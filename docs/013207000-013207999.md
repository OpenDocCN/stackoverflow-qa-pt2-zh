# StackOverflow 问答 13207000-13207999

# ajax - 使用 VB.NET、AJAX 和 NPGSQL 连接到 PostgreSQL

> ID：13207000
> 
> 赞同：2
> 
> 时间：2012-11-03T07:24:28.483
> 
> 标签：ajax, postgresql, npgsql

我正在尝试在 VB.NET 和/或 .asp 中编写一个脚本，该脚本将使用 NPGSQL 数据提供程序连接到我的 PostgreSQL 数据库。

此函数使用 AJAX 获取一个值 (selectedFT) 并将该值发送到 helloWorld.asp 脚本。这部分工作正常。

```
function ajaxyThing (selectedFT) {

var xmlhttp; //CREATE THE VARIABLE TO HOLD THE XMLHTTPRequest OBJEcT
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari THESE BROWSERS SUPPORT THE   XMLHTTPRequest OBJECT
  xmlhttp=new XMLHttpRequest();  //CREATE THE XMLHTTPRequest OBJECT
  }
else
 {// code for IE6, IE5 THESE BROWSERS DO NOT SUPPORT THE XMLHTTPRequest OBJECT AND NEED    AND ACTIVEXOBJECT
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"); //CREATE THE ActiveXObject
  }
//When using Async = true specify a function to execute when the reponse is ready in     the onreadystatechange event
xmlhttp.onreadystatechange = function () {
if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
    document.getElementById("responseText").innerHTML = xmlhttp.responseText;
}
}

//TO SEND A REQUEST TO A SERVER, WE USE THE open() AND send() METHODS OF THE     XMLHttpRequest object
xmlhttp.open("GET", "helloWorld.asp?q="+ selectedFT, true);
xmlhttp.send();
} 
```

接下来我需要 ASP 脚本（或者一个 .aspx，或者一个 .ashx。我不知道什么是最好的方法）来使用 selectedFT 值来查询我的 PostgreSQL 数据库。这就是我遇到麻烦的地方。我知道我需要做以下事情，但我不知道如何将它们放在一起：

1) 从 AJAX http 请求中获取值。例如，我可能应该使用：

```
response.expires=-1
q= request.querystring("q") 
```

2) 然后我需要建立到 PostgreSQL 数据库的连接。我使用以下代码（取自本网站[http://www.techrepublic.com/article/easily-integrate-postgresql-with-net/6102826](http://www.techrepublic.com/article/easily-integrate-postgresql-with-net/6102826)）在标准 .aspx 页面的 PageLoad 中运行，它可以正常工作将数据绑定到gridview。但我真正需要的不是将结果集连接到网格视图，而是让我的连接脚本独立，这样我就可以使用输出来做许多不同的事情。我不确定如何在 .asp 脚本（或 .aspx 或 .ashx）中实现此代码，并在我从 AJAX 函数调用 .asp 脚本（或 .aspx 或 .ashx）时使其运行。

```
 Private Sub Page_Load(ByVal sender As System.Object, ByVal e As System.EventArgs)Handles MyBase.Load

    Dim pgConnection As NpgsqlConnection = New NpgsqlConnection
    Dim pgCommand As NpgsqlCommand = New NpgsqlCommand
    Dim pgConnectionString As String
    Dim sda As NpgsqlDataAdapter

    Dim ds As DataSet
    ds = New DataSet

    pgConnectionString = "Server=localhost;Port=5432;Userid=myUserId;Database=myDatabaseName;password=myPassword;Protocol=3;SSL=false;Pooling=true;MinPoolSize=1;MaxPoolSize=20;Encoding=UNICODE;Timeout=15;SslMode=Disable"
    pgConnection.ConnectionString = pgConnectionString
    pgConnection.Open()
    pgCommand.Connection = pgConnection
    pgCommand.CommandType = CommandType.Text

    pgCommand.CommandText = "SELECT * FROM ""myTable"";"

    If pgConnection.FullState = ConnectionState.Open Then
        MsgBox("Connection To PostGres is open", MsgBoxStyle.MsgBoxSetForeground)
    End If

    sda = New NpgsqlDataAdapter(pgCommand)
    sda.Fill(ds)
    GridView1.DataSource = ds
    GridView1.DataBind()

    pgConnection.Close()
End sub 
```

任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:25:58.393

经过一番挖掘，我找到了解决这个问题的方法。这是我使用 NPGSQL 数据连接器、ASP.NET (VB.NET)、Javascript 和 AJAX 从 PostGresql 数据库查询的解决方案。在我的应用程序中，名为“ajaxyThing”的 AJAX 函数从 OpenLayers 映射中的自定义控件接收值，但您可以将任何值传递给函数。

这是我的 javascript 文件中 Ajax 函数的代码：

```
function ajaxyThing (selectedFT) {
var xmlhttp; //CREATE THE VARIABLE TO HOLD THE XMLHTTPRequest OBJEcT
if (window.XMLHttpRequest)
 {// code for IE7+, Firefox, Chrome, Opera, Safari THESE BROWSERS SUPPORT THE     XMLHTTPRequest OBJECT
  xmlhttp=new XMLHttpRequest();  //CREATE THE XMLHTTPRequest OBJECT
  }
else
  {// code for IE6, IE5 THESE BROWSERS DO NOT SUPPORT THE XMLHTTPRequest OBJECT AND NEED AND ACTIVEXOBJECT
 xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"); //CREATE THE ActiveXObject
}
//When using Async = true specify a function to execute when the reponse is ready in the onradystatechange event
xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        document.getElementById("divAttributes").innerHTML = xmlhttp.responseText;
    }
}

//TO SEND A REQUEST TO A SERVER, WE USE THE open() AND send() METHODS OF THE     XMLHttpRequest object
xmlhttp.open("GET", "Handler.ashx?q="+ selectedFT, true);
xmlhttp.send();
} 
```

然后在 Microsoft Visual Web Developer Express 2010 中，我创建了一个 Web 处理程序 (.ashx) 文件并将变量从我的 AJAX 函数传递到其中。我将变量“selectedFT”传递给 Visual Studio Web 处理程序。这是来自网络处理程序的代码：

```
<%@ WebHandler Language="VB" Class="Handler" %>

Imports System
Imports System.Web
Imports Npgsql
Imports System.Data   

Public Class Handler : Implements IHttpHandler

    Public Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest
    context.Response.Expires = -1
    Dim q = context.Request.QueryString("q") 

    Dim pgConnection As NpgsqlConnection = New NpgsqlConnection
    Dim pgCommand As NpgsqlCommand = New NpgsqlCommand
    Dim pgConnectionString As String
    Dim sda As NpgsqlDataAdapter

    Dim ds As DataSet
    ds = New DataSet

    pgConnectionString = "Server=localhost;Port=5432;Userid=myPostGresUserId;Database=myDatabaseName;password=myPassword;Protocol=3;SSL=false;Pooling=true;MinPoolSize=1;MaxPoolSize=20;Encoding=UNICODE;Timeout=15;SslMode=Disable"
    pgConnection.ConnectionString = pgConnectionString
    pgConnection.Open()
    pgCommand.Connection = pgConnection
    pgCommand.CommandType = CommandType.Text

    pgCommand.CommandText = "SELECT * FROM ""myTable"" WHERE ""myValue"" = '" & q & "';"

    sda = New NpgsqlDataAdapter(pgCommand)
    sda.Fill(ds)

    If pgConnection.FullState = ConnectionState.Open Then
        context.Response.Write("<table>")
        Dim dr As DataRow
        Dim dt As DataTable
        dt = ds.Tables(0)
        For Each dr In dt.Rows
            context.Response.Write("<tr><td><b>Column #1 Name:</b></td><td>" & dr.Item(0) & "</td></tr>") 
            context.Response.Write("<tr><td><b>Column #2 Name:</b></td><td>" & dr.Item(1) & "</td></tr>") 
            context.Response.Write("<tr><td><b>Column #3 Name:</b></td><td>" & dr.Item(2) & "</td></tr>") 
            Next
        ds.Dispose()
        context.Response.Write("</table>")
    Else
        context.Response.Write("pgConnection did not open successfully.")
    End If

    pgConnection.Close()

End Sub

Public ReadOnly Property IsReusable() As Boolean Implements IHttpHandler.IsReusable
    Get
        Return False
    End Get
End Property

End Class 
```

我不会声称这是解决问题的最佳方法——但它确实有效。我愿意接受您可能需要使它更优雅的任何建议。谢谢！

# c# - jQuery自动完成显示未定义的值

> ID：13207003
> 
> 赞同：0
> 
> 时间：2012-11-03T07:24:48.040
> 
> 标签：c#, jquery, asp.net

我正在使用自动完成，我得到`undefined`. 此外，该函数将值作为字符串返回，但文本框下方的值显示为`undefined`. 我从过去 3 天开始一​​直在处理这个问题，但它不起作用

………………………………………………………………………………

**C＃**

```
public string[] GetCompletionList(string prefixText) 
{ 
    RegistrationBAL _rbal = new RegistrationBAL(0); 
    DataSet ds = new DataSet(); 
    _rbal.LoadByContextSearch(ds, prefixText); 
    List<string> strDetailIDList = new List<string>(); 
    foreach (DataRow row in ds.Tables[0].Rows) 
    { 
         strDetailIDList.Add(row["SearchKey"].ToString()); 
    } 
    String[] s = strDetailIDList.ToArray(); return s; } 
```

 **jQuery**

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script> 
<script type="text/javascript">
$(function() {
    $(".tb").autocomplete({
        source: function(request, response) {
            $.ajax({
            url: "MyService.asmx/GetCompletionList",
            data: "{ 'prefixText': '" + request.term + "' }",
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataFilter: function(data) { return data; },
                success: function(data) {
                    response($.map(data.d, function(item) {
                        return {
                            value: item.SearchKey
                        }
                    }))
                },
                error: function(XMLHttpRequest, textStatus, errorThrown) {
                alert(textStatus);
                }
            });
        },
        minLength: 1
    });
});
</script> 
```

# python - 在python中迭代包含数组对象的字典

> ID：13207008
> 
> 赞同：0
> 
> 时间：2012-11-03T07:25:55.970
> 
> 标签：python, dictionary, python-2.7

所以我试图在python中迭代一个字典对象，我得到的只是列出索引错误。这是我的清单的样子-

```
test_list = {"1":[{"1":[{"a":"100","b":"200"}],"2":[{"a":"300","b":"400"}]}]} 
```

这是代码 -

```
for counter in range(len(test_list)):
            print test_list['1'][counter] 
```

知道为什么我会收到这个错误吗？

编辑：我想访问 test_list 中的所有 a & b 元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:36:48.923

```
 python 3.2

    t = {"1":[{"1":[{"a":"100","b":"200"}],"2":[{"a":"300","b":"400"}]}]}
    res=[v["a"] for x in t.values() for p in x for y in p.values() for v in y] # values for a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T07:32:50.167

您的代码不会对我产生错误。如果你想要第一个 a 和 b 元素，你需要：

```
for key, val in test_list['1'][0]['1'][0].items():
    print key, val 
```

不用说，这是相当复杂的。你所拥有的是字典列表中的字典列表中的字典。为什么要使用这种数据结构？几乎可以肯定有一种更简单的方法来表示您的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T15:52:37.387

列表中的嵌套字典，太棒了。

我做了以下操作，可以对其进行修改以访问所需的项目。

```
In [21]: inside_dict = test_list['1'][0]

In [22]: for key,val in inside_dict.items():
    print '{} contains'.format(key)
    for key2, val2 in val[0].items():
        print '\t{}: {}'.format(key2, val2)
Out[22]:
1 contains
        a: 100
        b: 200
2 contains
        a: 300
        b: 400 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T07:40:20.490

```
for k,v in test_list.items():
    print v[0]['1'] 
```

好的，也许这有帮助：

```
for c in test_list:
    for v in test_list[c]:
            print v['1']
            print v['2'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T08:05:51.427

所以这里是答案

```
for key, val in test_list['1'][0].items():
    print key, val[0]['a']
    print key, val[0]['b'] 
```

# ruby - 将参数传递给 Rails 中的系统调用，但不是普通的 ruby 程序

> ID：13207009
> 
> 赞同：0
> 
> 时间：2012-11-03T07:26:04.927
> 
> 标签：ruby, sinatra, system

Ubuntu 12.04

西纳特拉 1.3.3

为什么将参数传递给 ruby​​ 系统调用（%x[] 或 ``）会在我的 sinatra 应用程序中给我一个“未找到”错误？相同的代码在从同一目录运行的普通 ruby​​ 脚本中运行良好。

我有一个像这样的文件 test.rb

```
output = %x["ls"] 
p output 
```

当我使用“ruby test.rb”运行它时，我得到了控制台中当前目录的内容，正如预期的那样。

如果我修改程序以向系统调用提供参数，如下所示：

```
output = %x["ls sub_dir/"] 
p output 
```

正如预期的那样，我得到了位于当前目录中的 sub_dir 的内容。

到现在为止还挺好。

现在，如果我使用 post 方法制作 Sintra 应用程序：

```
require 'rubygems'
require 'bundler/setup'
require 'sinatra'

post "/" do
 output = x["ls"]
 return output
end 
```

对“/”的 Post 调用的响应按预期返回当前目录的内容，其中包括“sub_dir”。

如果我尝试将参数添加到 sinatra 应用程序的系统调用中，如下所示：

```
require 'rubygems'
require 'bundler/setup'
require 'sinatra'

post "/" do
 output = x["ls sub_dir/"]
 return output
end 
```

响应为 nil，控制台中出现错误：

> sh: 1: ls sub_dir/: 未找到

为什么在我的 sinatra 应用程序中向系统调用添加参数会导致它崩溃，当从普通 ruby​​ 脚本调用的相同代码从相同位置运行时运行良好。

顺便说一句，这里显示的“ls”示例不是我真正需要运行的命令，所以请不要解释获取此信息的不同方式。我有一个可执行文件，它将文件名作为我需要运行的参数，其行为方式完全相同。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:48:51.443

如果要指定与应用程序相关的路径，可以使用如下内容：

```
post "/" do
 path = File.join(File.dirname(__FILE__), "sub_dir")
 %x[ls #{path}]
end 
```

然而，如果你想列出一个目录的内容，为什么不在 Ruby 中做呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T05:52:37.377

我在同一目录中的另一个文件中重写了 sinatra 应用程序。

一切都按预期工作。

我没有找到原因，我删除了原始文件，这样我就不会再浪费时间试图弄清楚了。

# jquery - setInterval 中公共方法中的 jQuery 小部件工厂访问选项和方法

> ID：13207012
> 
> 赞同：1
> 
> 时间：2012-11-03T07:26:41.133
> 
> 标签：jquery, jquery-ui, web, jquery-ui-widget-factory

我创建了一些小部件工厂，我想在公共方法中访问它的选项或方法，但它返回错误“142 Uncaught TypeError: Object has no method”或“无法读取属性”。如何正确访问？

这是示例：

```
function($){
  $.widget("demo.myWidget",{ 
    options:{
      myVar:0
    },
    _create:function(){
      //this line work in here
      alert(this.options.myVar);
    },
    calledFunction : function(){
      alert(this._getVar());
    },
    pubFunction : function(){
      setInterval(this.calledFunction, 1000);
    },
    _getVar : function(){
      return this.options.myVar;
    }
  });
}(jQuery));

$(document).ready(function(){
   $("selector").myWidget();
   $("selector").myWidget("pubFunction");
}); 
```

如果我访问 _create 方法中的选项，它工作正常。之前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T07:40:09.453

您的大部分代码都很好，但是在匿名函数末尾附近有语法错误。调用`$.widget()`没有正确结束，并且匿名函数本身永远不会被调用。

尝试：

```
(function($) {
  $.widget("demo.myWidget", { 
    options: {
      myVar:0
    },
    _create: function() {
      //this line work in here
      alert(this.options.myVar);
    },
    calledFunction: function() {
      alert(this._getVar());
    },
    pubFunction: function() {
      this.setInterval(this.calledFunction, 1000);
    },
    _getVar : function() {
      return this.options.myVar;
    }
  });        // <-- End call to $.widget().
})(jQuery);  // <-- End anonymous function and call it with the jQuery object. 
```

完成此操作后，代码将按预期工作。你可以在[这个 fiddle](http://jsfiddle.net/LE88y/)中测试它。

**编辑：**关于您评论中描述的问题，那是因为当[setInterval()](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)调用您的回调函数时，`this`绑定到全局对象（`window`在我们的例子中），而不是您的对象。[您可以使用$.proxy()](http://api.jquery.com/jQuery.proxy/)解决该问题：

```
pubFunction : function() {
  setInterval($.proxy(this.calledFunction, this), 1000);
}, 
```

# meteor - 将 Bladejs 与 Meteor 一起使用

> ID：13207015
> 
> 赞同：3
> 
> 时间：2012-11-03T07:27:32.803
> 
> 标签：meteor, blade, node-blade

我最近将 node-blade 智能包添加到我的流星中，并且静态内容显示良好。但是，我无法使用任何模板变量。在我安装刀片之前，模板变量在车把上工作得很好。有人知道我做错了什么吗？

## 控制台输出

```
ReferenceError: player is not defined
    at ~/meteor/project/views/info.blade:1:1

1 > .player-name.large= player.name
2 | .alliance-name= alliance.name
3 | .world-name= world.name
4 | 

    at eval (eval at <anonymous> (/usr/local/lib/node_modules/blade/lib/compiler.js:138:23))
    at /usr/local/lib/node_modules/blade/lib/runtime.js:323:5
    at runtime.loadTemplate (/usr/local/lib/node_modules/blade/lib/runtime.js:272:6)
    at /usr/local/lib/node_modules/blade/lib/blade.js:45:4
    at Compiler.compile (/usr/local/lib/node_modules/blade/lib/compiler.js:185:2)
    at compile (/usr/local/lib/node_modules/blade/lib/blade.js:41:12)
    at Object.compileFile (/usr/local/lib/node_modules/blade/lib/blade.js:66:3)
    at Object.runtime.loadTemplate (/usr/local/lib/node_modules/blade/lib/runtime.js:269:23)
    at Object.runtime.include (/usr/local/lib/node_modules/blade/lib/runtime.js:320:22)
    at eval (eval at <anonymous> (/usr/local/lib/node_modules/blade/lib/compiler.js:138:23))
Your application is crashing. Waiting for file change. 
```

## 信息刀片

```
.player-name.large= player.name 
```

## 客户端.js

```
if(Meteor.is_client) {
    Template.info.player = function(){
        var data = Session.get( 'data' );
        return data.player;
    };
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:53:59.513

**编辑：**现在允许在正文模板中使用助手。

您不能在 head 中使用助手或某些全局变量~~或身体~~模板。你甚至不能在 head 包含的模板中使用它们~~或身体~~模板。

查看这些链接以获取更多信息：

*   ~~[https://github.com/bminer/node-blade/issues/98](https://github.com/bminer/node-blade/issues/98)~~
*   [https://github.com/bminer/node-blade/wiki/Using-Blade-with-Meteor](https://github.com/bminer/node-blade/wiki/Using-Blade-with-Meteor)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T21:27:41.300

**编辑：**从 Blade 3.0.0 稳定版开始，这个答案不再准确。 `body.blade`模板可能不包含动态内容，如帮助程序、对 的引用`Session`等。

* * *

在[“Using Blade with Meteor”](https://github.com/bminer/node-blade/wiki/Using-Blade-with-Meteor)中说

> 头部或正文模板中不允许引用 Session。这是设计使然，它不是错误。在 Handlebars 中，您可以在标签中使用 Session 或 Meteor，但不能在标签中使用。我不喜欢 Handlebars 的实现，所以你被这个卡住了。body.blade 模板主要用于静态内容（即加载页面或其他）。加载应用程序后，您可以执行以下操作`$("body").replaceWith(Meteor.ui.render(Template.homepage) )`；从您的应用程序代码。

所以，这就是说，在初始化时，不能有动态生成的模板。

要解决此问题，文档建议

```
$("body").replaceWith(Meteor.ui.render(Template.homepage) ) 
```

我用`replaceWith`方法代替了`html`方法。看一个对我有用的例子：

```
# ./the_cow.coffee
if Meteor.isClient
  $ ->
    $('body').html Meteor.render -> Template.test
      user:
        name: 'Pill'

# ./views/test.blade
#test Testing
p= user.name 
```

查看已编译的 JavaScript：

```
if (Meteor.isClient) {
  $(function() {
    return $('body').html(Meteor.render(function() {
      return Template.test({
        user: {
          name: 'Pill'
        }
      });
    }));
  });
} 
```

不知道有没有更短的写法。

# java - 在 Java 中实现泛型接口的枚举常量

> ID：13207016
> 
> 赞同：9
> 
> 时间：2012-11-03T07:27:51.707
> 
> 标签：java, generics, interface, enums

假设您有一个通用接口：

```
public interface MyInterface<T> {
    T doSomething();
} 
```

是否可以声明一个实现 的枚举`MyInterface<T>`，但是每个枚举常量都针对不同的值实现它`T`？也就是说，给定这个枚举：

```
public enum MyEnum {
    FOO,
    BAR,
    BAZ;
} 
```

我们可以改变它，以便`FOO`实现`MyInterface<Integer>`、`BAR`实现`MyInterface<String>`和`BAZ`实现`MyInterface<List<MyOtherType>>`，并使其`MyEnum`整体实现`MyInterface<?>`吗？这样做似乎是完全可行的，因此它可能以类型安全的方式完成。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-04T00:25:06.230

不，正如[amalloy 指出的那样](https://stackoverflow.com/a/13207037/697449)，Java 不允许使用类型参数声明枚举。如果您考虑使用枚举的方式，例如在`switch`.

还要考虑该语言将如何实现通用枚举——这不是微不足道的。对于泛型 enum `MyEnum<T>`，每个枚举常量都需要解析`T`为某种特定类型，否则它们根本就不是常量。考虑一下：

```
enum MyEnum<T> {
    FOO; // T is not resolved
} 
```

这里有什么`T`用`FOO`？该语言需要一种新的语法才能表达它，例如：

```
enum MyEnum<T> {
    FOO<String>;
} 
```

因此，现在我们正在增加语言的复杂性，以支持没有过于引人注目的用例的语义。很容易理解为什么语言设计者会简单地为枚举添加类型参数。

**解决方法：**

您可以通过简单地不使用枚举来模拟您想要的模式。将接口的实现组织到一个实用程序类中：

```
public class MyImplementations {

    public static final MyInterface<Integer> FOO =
            new MyInterface<Integer>() {
                ...
            };

    public static final MyInterface<String> BAR =
            new MyInterface<String>() {
                ...
            };

    public static final MyInterface<List<MyOtherType>> BAZ =
            new MyInterface<List<MyOtherType>>() {
                ...
            };

    private MyImplementations() { }
} 
```

唯一本质上缺少的是一种迭代不同实现的方法，就像你可以做的那样`MyEnum.values()`- 但是假设`MyEnum<T>`你可以迭代的最具体的类型是`MyEnum<?>`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T07:32:23.033

不。怎么会有人使用这样的课程？

```
MyEnum x = whatever;
x.foo().get(0); // how can javac know that x is the version that gives back a List? 
```

# highcharts - HighCharts - 将系列与值而不是百分比进行比较

> ID：13207017
> 
> 赞同：3
> 
> 时间：2012-11-03T07:28:04.440
> 
> 标签：highcharts

只需要一个简单的答案，有没有一种简单的方法来比较一系列值而不是百分比？像“比较：'值'”而不是“比较：'百分比'”之类的东西，还是我必须手动添加给定时间间隔的数据点？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T07:36:45.587

是的，但该选项被称为`value`

从[plotOptions.series.compare](http://api.highcharts.com/highstock#plotOptions.series.compare)文档：

> compare: String
> 将系列的值与可见范围内的第一个值进行比较。**y 轴将显示百分比或绝对变化，具体取决于比较设置为 "percent" 还是 "value"**。当这应用于多个系列时，它允许将系列的开发相互比较。默认为未定义。

文档中的演示：设置比较为[`percent`](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/plotoptions/series-compare-percent/), [`value`](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/plotoptions/series-compare-value/)。

# php - Netbeans 中的 Laravel 表类自动完成功能

> ID：13207025
> 
> 赞同：0
> 
> 时间：2012-11-03T07:30:14.693
> 
> 标签：php, netbeans, autocomplete, laravel

我正在为我当前的项目使用 laravel。目前我正在使用[自动完成](http://forums.laravel.com/viewtopic.php?id=742#p5330)方法。一切正常，但在迁移文件中，自动完成不起作用。例如：

```
Schema::create('users', function($table) {
    $table->increments('id');
}); 
```

当我输入时`$table->`，我需要自动弹出`Table`Class 中可用的所有方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:28:37.533

我已经为您链接的主题发布了有关 netbeans 代码编译的信息。我认为这是 NetBeans5.2 的错误。昨天，我花了几个小时来解决这个问题。但我找不到解决方案。NetBeans 将 $table 作为参数处理。这很好。但忽略了@var declear。也没有有效的@param 用于关闭。所以最好的方法是将此报告给 NetBeans 错误跟踪器。我不是以英语为母语的人，所以我不能很好地解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T08:07:35.827

`@var`在使用之前在注释中添加变量类型`$table`：

```
/* @var $table \Laravel\Database\Schema\Table */
$table->increments('id'); 
```

或者在函数声明中输入提示：

```
Schema::create('users', function(\Laravel\Database\Schema\Table $table) {
    $table->increments('id');
}); 
```

# android - 如何添加通过用户输入的字符串数组中的值？

> ID：13207028
> 
> 赞同：0
> 
> 时间：2012-11-03T07:30:39.083
> 
> 标签：android, android-layout, android-intent, android-emulator

我想在字符串数组中添加所有值，但它不起作用：

```
public class Info extends Activity {
private static final String TAG = "Info";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.info);

    Intent myIntent = getIntent(); 
    Bundle b = myIntent.getExtras(); 
    String choice = b.getString("choice"); 
    String fname = b.getString("fname");
    String lname = b.getString("lname");
    String add = b.getString("add");
    String coun = b.getString("coun");
    String pro = b.getString("pro");
    String pcode = b.getString("pcode");

   Log.i(TAG,"selection: " + choice); 
   TextView textView = (TextView) findViewById(R.id.showmeText); 
   textView.append(": " + choice); 
   TextView textView1 = (TextView) findViewById(R.id.fname); 
   textView1.append(" " + fname); 
   TextView textView2 = (TextView) findViewById(R.id.lname); 
   textView2.append(" " + lname); 
   TextView textView3 = (TextView) findViewById(R.id.address1); 
   textView3.append(" " + add); 
   TextView textView4 = (TextView) findViewById(R.id.pro); 
   textView4.append(" " + pro); 
   TextView textView5 = (TextView) findViewById(R.id.country1); 
   textView5.append(" " + coun); 
   TextView textView6 = (TextView) findViewById(R.id.pcode); 
   textView6.append(" " + pcode); 

} 
```

我在 ListView 中尝试了这些所有值，但这些都不起作用，因为我在 ListView 中添加了所有 Textview。你能帮我如何在字符串数组中添加这些列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:34:48.987

试试这个

```
public class ArrayAdapterDemo extends ListActivity {
   TextView selection;

   "silly", "list" };
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);
       item.add(choice);
setListAdapter(new ArrayAdapter<String>(
      this,
      android.R.layout.simple_expandable_list_item_1,
      items));
selection=(TextView)findViewById(R.id.selection); 
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T08:00:35.530

```
Crete a ListView in your UI Deisgn layout xml. 

<ListView android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
                        android:id="@+id/choice_list" 
            android:focusable="false"
                   android:scrollbarStyle="outsideOverlay">

Step1 : Create a String Array ex: String[] myStringArray.

Step 2: Push all the string values into Array.
Step 3 : in your activity get the reference for listview (choice_list)

Ex:

ListView choiceListView = (ListView)findviewById(R.layout.choice_list)

ArrayAdapter<String> adapter = new ArrayAdapter<String>(getContext(),
                    android.R.layout.simple_dropdown_item_1line, myStringArray); 
```

选择列表视图.setAdapter（适配器）；

```
That is all to see the out put as list view in normal activity. You don't need ListActivity , but can use this in normal activity too. The above is the solution for any activity which has a listview as a component in it. 

If you like this please vote for me. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T07:42:35.587

```
String[] myStringArray = new String[7];
myStringArray[0] = choice;
myStringArray[1] = fname;
......
myStringArray[7] = pcode ;

Or you want to display all the text in a single textview. Your question is not clear.

I hope if its about pushing the values into the array then the above holds good. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T13:50:13.697

请在此处粘贴错误。我想我可能是因为缺少值或类转换异常。

# php - PHP - 想知道用于用户注册的嵌套 IF 语句的效率

> ID：13207038
> 
> 赞同：0
> 
> 时间：2012-11-03T07:32:45.493
> 
> 标签：php, validation, registration

我正在为我的朋友和我自己设计一个网站的小项目。我目前正在构建用户注册系统，并且想知道我检查用户条目的方式是否是最好的。

嗯，忽略 api 的东西，它是前夕的，可能无关紧要。

我有`else`s计划。

从本质上讲，我想知道这在……一切方面是否可以接受。如果没有，我能做些什么来改善这一点。

我是 PHP 新手，请善待 :)

所以，这就是我目前正在使用的：

```
if (!empty($_POST['username'])
&& !empty($_POST['password1'])
&& !empty($_POST['password2'])
&& !empty($_POST['email1'])
&& !empty($_POST['email2'])
&& !empty($_POST['keyID'])
&& !empty($_POST['vCode'])
){
 $api = new EVEAPI();
 if ($api->getCharacterID($_POST['username']) != 0){

     //The username is valid.

     if ($_POST['password1'] == $_POST['password2']){

         //Passwords match.

         if ($_POST['email1'] == $_POST['email2']
             && filter_var($_POST['email1'], FILTER_VALIDATE_EMAIL)
             ){

             //Emails match and are in valid format.

             if ($api->isValidAPI($_POST['keyID'], $_POST['vCode'])){

                 //If the API returns something that is not an error, continue.

                 $xml = $api->getAPIKeyInfo($_POST['keyID'], $_POST['vCode']);
                 if ($xml->result->key->attributes()->type == 'Account'){

                     //If the 'type' of the returned API info is 'Account', continue.

                     foreach ($xml->result->key->rowset->row as $apiRow){
                         $charID = (int) $apiRow->attributes()->characterID;
                         if ($charID == $api->getCharacterID($_POST['username'])){

                             //DO SOMETHING WITH INFO

                         }
                         else{
                         }
                     }
                 }
                 else{
                 }
             }
             else{
             }
         }
         else{
         }
     }
     else{
     }
 }
 else{
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:37:19.710

效率方面，这并不重要，但为了可维护性，它会。

与其嵌套这么多 if，不如在 if 中尝试早期失败。像这样的东西：

```
if ($api->getCharacterID($_POST['username']) == 0) {
    // Fail early.  Throw an exception, die, or whatever
}

// Continue along as normal, not in an else.

if ($_POST['email1'] != $_POST['email2']) {
    // Fail early.  Throw an exception, die, or whatever
}

// Etc. 
```

除非有充分的理由不使用它，否则这种策略通常会为您服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T07:59:45.753

通常在大多数验证模式中，它们都有这个错误数组，您可以在其中检查所有条件并将错误消息添加到数组中，如果数组最后为空，则仅表示没有错误。

对我来说，我不希望我的代码看起来像这样嵌套太多，我会使用变量来指示每个步骤。

从那里您可以决定是否只显示第一个错误。一次验证所有内容并没有什么坏处，因为除非您有 5000 个表单字段，否则处理不应该那么广泛。我认为没关系。

当您编写代码时，您必须记住，因为代码是为人类编写的，您会希望对您的眼睛或阅读您的代码的人友善。基本上嵌套是可以的。它节省了一些进一步的处理，它还取决于您需要的逻辑。

是的，节省时间很好，但有时你做得太好了，以尽量减少处理，如果你做得很好，你必须权衡需求，但最后你节省的时间是如此之多，那么它就没有意义了。编译器是无论如何都不会拍拍你的背说好工作..

```
$errors = array();

$usernameValid = $api->getCharacterID($_POST['username']) != 0;
if (!$usernameValid) $errors[] = 'Username is not valid';
//If you want to store which attribute caused the error you can use the attribute name as array key
//if (!$usernameValid) $errors['username'] = 'Username is not valid';

$passwordMatches = $_POST['password1'] == $_POST['password2'];
if (!$passwordMatches) $errors[] = 'Password does not match';

if ($usernameValid && $passwordMatches)
{
  //What to do if user name and password passes validation. wooo hoo~
}

//Etc etc.. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T07:40:10.707

它很难阅读，也不是很干净。我这样做的方式是使用否定的 if 语句。我的意思是：

```
if ($api->getCharacterID($_POST['username']) == 0){
    // Username is not valid, so stop execution
}

if ($_POST['password1'] != $_POST['password2']) {
    // Send error to user and stop execution
}

// ...etc. 
```

现在如何停止执行？那么你有几个选择

1.  抛出异常
2.  使用 die 语句
3.  每次输入 if 块时都会更改一个参数，然后检查是否应该继续。
4.  其他一些解决方案

但关键是，这种方法使您的代码更干净。

干杯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T07:43:08.877

这些天大多数程序员使用 jquery / Javascript 进行表单验证，但是如果您使用纯 PHP，请尝试下面的代码，希望它显然是好的和安全的 :)

```
$username = mysql_real_escape_string($_POST['username']);
  if($username == "")
  {
    $username_required = '<div>Please enter your username</div>';
    } else {
    $username_ok = true;
  } 
```

# asp.net-mvc - ASP.NET MVC 中针对 www.website.com/users/jeffAtwood 等 URL 的用户路由

> ID：13207043
> 
> 赞同：1
> 
> 时间：2012-11-03T07:33:31.553
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我正在尝试在以下网址显示用户详细信息：

www.website.com/users/yasser

最后一个条目`yasser`是我尝试了几条路线的用户名，但它不起作用。

我的用户控制器如下所示。

```
public class UserController : Controller
{
    public ActionResult Index(string username)
    {
        var model = _service.GetUserDetails(username);
        return View(model);
    }
} 
```

我已经引用[了这个](https://stackoverflow.com/questions/3000547/asp-net-mvc-user-routing-like-that-in-stackoverflow)和其他几个链接，但我真的不知道它是如何工作的。

有人可以帮我解决这个问题。谢谢

**编辑**：

我当前的路线配置如下

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T07:43:45.490

路由从上到下执行：

```
routes.MapRoute("UserProfile",
     "Users/{username}",
     new { controller = "User", action = "Index", username = string.Empty }
);

routes.MapRoute("Default",
     "{controller}/{action}/{id}",
     new { controller = "Home", action = "Index", id = UrlParameter.Optional}
); 
```

# asp.net-mvc-3 - 如何在 KendoUI 的 ClientRowTemplate 中访问模型的集合属性的值

> ID：13207044
> 
> 赞同：0
> 
> 时间：2012-11-03T07:33:42.987
> 
> 标签：asp.net-mvc-3, telerik-grid, telerik-mvc, kendo-ui

```
@(Html.Kendo().Grid(Model)
    .Name("Grid")
    .Columns(columns =>
    {
        columns.Bound(p => p.AirlineCode).Title("Airline");
        columns.Bound(p => p.SegmentInfo[0].FareClass).Title("Fare Class");
    }
    .ClientRowTemplate( 
        "<tr>"+
        "<td style =\"width: 130px\"><img src=\"/Content/themes/base/image/#=AirlineCode#.jpg\"/><span> #=AirlineName#</span></td>" + 
        "<td><div class=\"ClassType\"> //#=SegmentInfo[0].FareClass//#  </div></td>"+"</tr>"
    ) 
```

我应该如何编写`//#=SegmentInfo[0].FareClass//#`可能的部分以从 Model Property 获取值`SegmentInfo`，这是一个类对象，我需要访问它的 Property 称为`FareClass`字符串对象。

尝试给出正确的语法来访问这种对象值。

提前感谢我的助手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:17:27.837

我不确定它对数组的使用效果如何，但请尝试。

```
.ClientRowTemplate( 
        "<tr>"+
        "<td style =\"width: 130px\"><img src=\"/Content/themes/base/image/#=AirlineCode#.jpg\"/><span> #=AirlineName#</span></td>" + 
        "<td><div class=\"ClassType\"> #=SegmentInfo[0].FareClass#  </div></td>"+"</tr>"
    ) 
```

（完全删除 //）

# python - 为什么我在使用 Google App Engine 的教程时遇到服务器错误？

> ID：13207045
> 
> 赞同：1
> 
> 时间：2012-11-03T07:33:52.830
> 
> 标签：python, google-app-engine

我在 www.udacity.com 关注 Web 开发 (cs253) **，**突然开始出现错误：这是我第一次接触 Web 开发。

在成功遵循 Google App Engine 网站上的“hello world”教程（如 Udacity 上的视频课程所建议的那样）后，我开始进行一些小改动，并不断重新提交更新的修改版本，直到 4 或 5 次后我开始得到以下内容错误：

> 错误：服务器错误
> 
> 服务器遇到错误，无法完成您的请求。如果问题仍然存在，请报告您的问题并提及此错误消息和导致它的查询。

我尝试 (1) 等待一段时间然后重试，(2) 重新加载最新版本，(3) 重新加载之前已知可以工作的版本，(4) 清理 Chrome 的历史记录（我正在运行 MacOS Lion 版本10.7.5) -> 什么都没有。我仍然遇到同样的错误。

知道我在做什么错吗？谢谢：欢迎*任何*帮助！

最后一件事：我正在使用 Python 2.7（不确定它是否重要，但仍然如此。）

* * *

PS：这里是代码：

# 你好世界.py

```
import webapp2

form="
<form action="http://www.google.com/search">
    <input name="q">
    <input type="submit">
</form>
"""

class MainPage(webapp2.RequestHandler):
    def get(self):
#       self.response.headers['Content-Type'] = 'text/html'
#       self.response.out.write('Hello, Udacity!!')
        self.response.out.write(form)

app = webapp2.WSGIApplication([('/', MainPage)], debug=True) 
```

# 应用程序.yaml

```
application: chris73it-helloworld
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /.*
  script: helloworld.app 
```

就是这样：只有 2 个文件。

问题已解决：编辑代码时 3 个双引号中的 2 个消失了：现在它可以工作了。不幸的是，因为这是我在 SO 上的第一篇文章，所以我不能“给 +1 分” :-( 抱歉！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T07:55:01.503

After `form=` do you actually only have one `"` or is that just a copy and paste error. Because you should have `"""` to match the closing quotes at line 8.

# scala - 我可以在伴生对象中使用“this”吗？

> ID：13207047
> 
> 赞同：2
> 
> 时间：2012-11-03T07:34:17.417
> 
> 标签：scala, companion-object

在伴生对象中，我想要一个记录从伴生类实例化的所有实例的字段（它是抽象的），我可以这样做吗？

特别是，我认为`this`会引用子类的任何实例，但是当我在伴随对象中使用它时它不会编译。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T10:39:30.380

例如，您需要自己编写代码（不是线程安全的）：

```
abstract class C {
  // executed by all subclasses during construction
  C.registerInstance(this) 
}

object C {
  private val instances = ListBuffer[C]()
  def registerInstance(c: C) {
    instances += c
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T08:12:57.370

`this`in an `object`（不管它是否是伴随对象）指的是对象。例如

```
scala> object A { def foo = 1; def bar = this.foo } 
defined module A

scala> A.bar
res0: Int = 1 
```

# text - 创建 svg 文本多行，其中之一是空行

> ID：13207048
> 
> 赞同：1
> 
> 时间：2012-11-03T07:34:23.437
> 
> 标签：text, svg, raphael, multiline

我正在使用 <text> 和 <tspan> 为每一行创建 SVG 文本。文本有很多行，其中一行是空行，如下所示：

```
this is text line 1

this is text line 3 
```

上面的例子是一个三行文本，其中一行是空的。

问题是 SVG 文本只显示两行而不是三行（第一行和最后一行，没有中间行）。

见这里：http: [//jsfiddle.net/svincoll4/DX4Cn/](http://jsfiddle.net/svincoll4/DX4Cn/)

有人对此有解决方案以使其显示三行吗？

注意：我正在使用 Raphael JS 来创建这些文本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T08:34:45.407

默认情况下，空白在 html 和 svg 中被压缩，所以 \n\n\n 变为 \n。此外，如果根本没有文本，则中间行将被忽略。xml:space="preserve" 停止 SVG 中的空白压缩，额外的空间使中间行存在。

```
var $svg = Raphael('container', 400, 400);
var $text = "this is line 1\n \nthis is line 3";
$svg.canvas.setAttributeNS("http://www.w3.org/XML/1998/namespace", "xml:space","preserve");
$svg.text(50, 100, $text); 
```

# php - 从另一个 DOMDocument 对象导入元素时 nodeValue 丢失

> ID：13207049
> 
> 赞同：0
> 
> 时间：2012-11-03T07:34:26.140
> 
> 标签：php, domdocument

将节点从一个 DOMDocument 对象导入到另一个 DOMDOcument 对象时，nodeValue 似乎丢失了。

**Q1。有谁知道为什么？** *（这是一个错误吗？）*

**Q2。我怎样才能解决这个问题？**

* * *

**示例代码：**

```
$doc1 = new DOMDocument();
$div = $doc1->createElement('div');

$doc2 = new DOMDocument();
$span = $doc2->createElement('span', 'Span text');

$spanCopy = $doc1->importNode($span);
$div->appendChild($spanCopy);
$doc1->appendChild($div);

$otp = $doc1->saveHTML();

var_dump($span->nodeValue);
var_dump($spanCopy->nodeValue);
var_dump($otp); 
```

**输出：**

```
string 'Span text' (length=9)
string '' (length=0)
string '<div><span></span></div>' (length=25) 
```

* * *

**回答：**

似乎为了执行深层复制，您需要将 true 作为第二个参数传递给 importNode。

```
$spanCopy = $doc1->importNode($span, true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:43:45.487

**回答：**

似乎为了执行深层复制，您需要将 true 作为第二个参数传递给 importNode。

```
$spanCopy = $doc1->importNode($span, true); 
```

# java - 构造函数是必要的还是仅仅为了方便而使用？

> ID：13207054
> 
> 赞同：1
> 
> 时间：2012-11-03T07:35:18.520
> 
> 标签：java, constructor

我正在为我的入门编程课程布置家庭作业。我们最近了解了构造函数以及它们的工作原理和作用，但我不明白为什么每个对象都需要一个。这似乎只是额外的工作，因为您也可以实例化对象并在它们之外运行语句。例如，在测试了编写相同代码的不同方法后，我发现

```
public class MyCartoon extends Frame {
    StickFigure man = new StickFigure();
    public static void main(String[] args) {    
        new MyCartoon();
    }
} 
```

产生与此完全相同的效果：

```
public class MyCartoon extends Frame {
    StickFigure man;
    public MyCartoon() {
        man = new StickFigure();
    }
    public static void main(String[] args) {
        new MyCartoon();
    }
} 
```

我可以澄清一下吗？

但是，当我在另一个由上面的代码实例化的类中尝试类似代码时，它在尝试编译时抛出了 100 多个错误。以下代码运行良好。相同的代码，除了`StickFigure()`构造函数中的代码外，不会：

```
import wheels.users.*;
import java.awt.Color;

public class StickFigure {

Ellipse head; 
Line torso;
Line leftBackArm;
Line leftForeArm;
Line rightBackArm;
Line rightForeArm;
Line leftUpperLeg;
Line leftLowerLeg;
Line rightUpperLeg;
Line rightLowerLeg;

StickFigure() {

    head = new Ellipse();
    head.setColor(Color.WHITE);
    head.setFrameThickness(4);
    head.setFrameColor(Color.BLACK);
    head.setSize(80, 80);
    head.setLocation(140, 130);

    torso = new Line(180, 210, 160, 340);
    torso.setColor(Color.BLACK);
    torso.setThickness(4);

    leftBackArm = new Line(180, 210, 145, 280);
    leftBackArm.setColor(Color.BLACK);
    leftBackArm.setThickness(4);

    leftForeArm = new Line(145, 280, 132, 340);
    leftForeArm.setColor(Color.BLACK);
    leftForeArm.setThickness(4);

    rightBackArm = new Line(180, 210, 190, 290);
    rightBackArm.setColor(Color.BLACK);
    rightBackArm.setThickness(4);

    rightForeArm = new Line(190, 290, 225, 350);
    rightForeArm.setColor(Color.BLACK);
    rightForeArm.setThickness(4);

    leftUpperLeg = new Line(160, 340, 140, 420);
    leftUpperLeg.setColor(Color.BLACK);
    leftUpperLeg.setThickness(4);

    leftLowerLeg = new Line(140, 420, 105, 490);
    leftLowerLeg.setColor(Color.BLACK);
    leftLowerLeg.setThickness(4);

    rightUpperLeg = new Line(160, 340, 180, 420);
    rightUpperLeg.setColor(Color.BLACK);
    rightUpperLeg.setThickness(4);

    rightLowerLeg = new Line(180, 420, 180, 500);
    rightLowerLeg.setColor(Color.BLACK);
    rightLowerLeg.setThickness(4);

    }
} 
```

为什么与第一个代码块相反，这段代码会在没有提供构造函数的情况下抛出错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-03T07:39:36.160

您所展示的（使用[编译器提供的默认构造函数](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.9)和变量初始化器）在以下情况下很好：

*   您的初始化永远不需要抛出任何已检查的异常
*   您只需要在初始化中为变量赋值，而不用做*任何*其他事情。（您可以为更复杂的代码编写初始化程序块，但如果您要这样做，您不妨将其设为构造函数。）
*   您的构造函数不需要任何参数

以我的经验，这些都*很少*是真的，尤其是最后一点。当然，如果您乐于事后设置属性，则可以不用进行管理——但我个人喜欢不可变类型，它几乎*总是*需要构造函数参数。

*所以，考虑一下如何在没有*构造函数的情况下编写这个类，但保留它的所有其他特性：

```
public class Person {
    private final String name;
    private final LocalDate dateOfBirth;

    public Person(String name, LocalDate dateOfBirth) {
        this.name = name;
        this.dateOfBirth = dateOfBirth;
    }

    public String getName() {
        return name;
    }

    public LocalDate getDateOfBirth() {
        return dateOfBirth;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T07:38:10.027

并不是您的第一个代码不使用构造函数。确实如此。不同之处在于，它使用的是编译器提供的默认构造函数，如果您不提供任何构造函数，编译器会提供该构造函数。

构造函数用于初始化新创建对象的状态。要么你明确地给你的构造函数，要么编译器自己添加一个默认的。

实际上，`your first code after compilation`变成了这样：-

```
StickFigure man;
public MyCartoon() {
    super();
    man = new StickFigure();
}
public static void main(String[] args) {    
    new MyCartoon();
} 
```

因此，您可以看到，第一个代码和第二个代码之间几乎没有区别。（**注意**`super`：-如果您没有自己的`super`或调用，编译器会在您拥有的每个构造函数中添加一个调用作为第一个语句`this`）

上面代码中发生的情况是 - 编译器添加了一个默认构造函数，然后将您在构造函数中完成的所有实例变量初始化移动。如果你给出了多个构造函数（在这种情况下，编译器不会提供默认的构造函数），那么`instance variable`初始化代码会被编译器移动到每个构造函数中。

# c# - 无法从 Web 服务获取 cookie

> ID：13207057
> 
> 赞同：1
> 
> 时间：2012-11-03T07:35:52.247
> 
> 标签：c#, web-services

登录网络服务后，我无法取回 cookie。我能够连接，并得到一个登录成功的布尔值（`infoservice.LoginToVault`）。但是当我尝试检查我是否已连接（`infoservice.IsConnectedToVault`）时，我得到了一个错误的回复。

我发现原因是因为没有保存cookie。所以我尝试使用cookiecontainer，但有些东西告诉我我走错了路。我想我必须在登录时询问cookie，但是如何？

任何帮助，将不胜感激！

```
 InfoService infoservice = new InfoService(); // that's the webservice

        bool login = infoservice.LoginToVault("server", "vault", "user", "pass");
        bool check = infoservice.IsConnectedToVault();

        if (login == true)
        {
            Console.WriteLine("Succesfully logged in!");
        }
        if (login == false)
        {
            Console.WriteLine("Login failed!");
        }

        Console.WriteLine(infoservice.IsConnectedToVault());  // returns fallse..

        Uri siteUri = new Uri("http://ironman/CadacWebservice/InfoService.asmx");

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(siteUri);
        request.CookieContainer = new CookieContainer();

        HttpWebResponse response = (HttpWebResponse)request.GetResponse();

        foreach (Cookie cook in response.Cookies)
        {
            Console.WriteLine("Cookie:");
            Console.WriteLine("{0} = {1}", cook.Name, cook.Value);
            Console.WriteLine("Domain: {0}", cook.Domain);
            Console.WriteLine("Path: {0}", cook.Path);
            Console.WriteLine("Port: {0}", cook.Port);
            Console.WriteLine("Secure: {0}", cook.Secure);

            Console.WriteLine("When issued: {0}", cook.TimeStamp);
            Console.WriteLine("Expires: {0} (expired? {1})",
                cook.Expires, cook.Expired);
            Console.WriteLine("Don't save: {0}", cook.Discard);
            Console.WriteLine("Comment: {0}", cook.Comment);
            Console.WriteLine("Uri for comments: {0}", cook.CommentUri);
            Console.WriteLine("Version: RFC {0}", cook.Version == 1 ? "2109" : "2965");

            Console.WriteLine("String: {0}", cook.ToString());
            Console.ReadLine();
        } 
```

我能够得到一些 perl 代码，我知道它可以工作：但现在我需要它在 c# 中。

# 登录：

```
$soap = SOAP::Lite->new( proxy => 'http://localhost/Webservice/InfoService.asmx');

$soap->on_action( sub {sprintf '%s%s', @_} );

$soap->default_ns('http://x/webservices/');

$soap->uri('http://x.com/webservices/');

$soap->proxy('http://localhost/Webservice/InfoService.asmx', keep_alive => 1, cookie_jar => 
HTTP::Cookies->new(ignore_discard => 1));

$soap->encodingStyle(""); 
```

# 登录到网络服务

```
my $som = $soap->call('LoginToVault',

                SOAP::Data->name('server')->value('server')->type(''),

                SOAP::Data->name('vault')->value('vault')->type(''),

                SOAP::Data->name('user')->value('user')->type(''),

                SOAP::Data->name('password')->value('pass')->type('')
);

my $result = $som->result, "\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:56:48.710

我浏览了您的代码，我认为您的代码中没有任何错误。我在这里有一个问题 1) 那个 web 服务是你开发的吗？如果不是，请在 SoupUI 的帮助下测试此 Web 服务。如果是，请检查您从 IsConnectedToVault 方法返回的值。

# ruby-on-rails - 理论：method_missing

> ID：13207058
> 
> 赞同：3
> 
> 时间：2012-11-03T07:36:26.803
> 
> 标签：ruby-on-rails

我刚开始学习 Rails，我无法理解：

在我的 Post 控制器中，我没有方法 show （未描述），但我在控制器中放入：

```
def method_missing(name, *args)
  redirect_to posts_path
end 
```

我认为如果控制器找不到动作显示 - 它会调用`method_missing`并在重定向到`index`方法之后，但 Rails 会尝试渲染 view `show.html.erb`。

为什么方法缺失不捕获？我该如何使用`method_missing`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T07:49:06.820

Rails does not require action to be present in controller if corresponding template exists. It just assumes empty action and renders template, that is why your `method_missing` isn't invoked.

If you don't need `show` action anyway - just remove `show.html.erb` and `method_missing` will work as expected.

# php - 验证 Opencart

> ID：13207061
> 
> 赞同：3
> 
> 时间：2012-11-03T07:36:50.327
> 
> 标签：php, validation, opencart

我想在 opencart 代码示例中添加 php 电话号码验证，如下所示

```
 if(!filter_var($customer_email, FILTER_VALIDATE_EMAIL)) {
            $errors[$pos++] = 'Email is not valid.';
        }

        if($customer_mobile=='') {
            $errors[$pos++] = 'Please enter your Mobile.';
        } /*elseif (strlen($customer_mobile) < 11 || !is_numeric($this->request->post['cell_number'])){
            $errors[$pos++] = 'Mobile number should be 7 digits.';
        }*/ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T08:29:31.047

@Tayyab Gulsher Vohra....

我也面临这个问题。我总结自己并做到了。按照说明，opencart是一个**MVC结构**平台，所以需要了解Controller、Model和view，这里Controller是`index()`函数中的第一个初始化电话号码

```
if (isset($this->request->post['telephone'])) {
            $this->data['telephone'] = $this->request->post['telephone'];
        } else {
            $this->data['telephone'] = $this->customer->getTelephone();
        } 
```

此外，使用此方法的电话号码必须有效。

```
 function validate()
        if( !preg_match("/^([1]-)?[0-9]{3}-[0-9]{3}-[0-9]{4}$/i", $this->request->post['telephone']) ) {
                    $this->error['telephone'] = $this->language->get('error_telephone');
                } 
```

那么你应该在语言文件中初始化**电话号码值。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T09:22:02.437

好吧，您有 2 个选项，验证或过滤。因为电话号码的长度和字符不同，我建议你只是过滤

```
FILTER_SANITIZE_NUMBER_INT 
```

删除除数字、加号和减号之外的所有字符。

更多信息： [过滤器](http://www.php.net/manual/en/filter.filters.php)

**示例**：

```
<?php echo filter_var("Home: +1 (123) 456-7890 @ John", FILTER_SANITIZE_NUMBER_INT); ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T00:19:12.597

消毒器功能还没有真正准备好验证电话号码，我可能会使用正则表达式留下 () + - : e 和数字，因为这允许大多数国际号码和扩展名的变化。

# android - Android：Robotium：只有图标的标签点击

> ID：13207068
> 
> 赞同：1
> 
> 时间：2012-11-03T07:37:22.800
> 
> 标签：android, testing, robotium

I have tab layout.That has only icons not text.I tried with clickOnImageButton and ClickOnButton clickOnImage and also pressOnMenuItem(R.drwable.icon)but not worked.How can i do this with solo? Note: Image View present at the top of the tab.(tab is at bottom)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T11:42:03.207

Tabhosts是邪恶的。幸运的是，我还不得不将它们自动化，所以知道答案。

你要做的是你必须获得标签栏视图（android.R.id.tabs），然后将其转换为 Tabhost 或 ViewGroup 然后你可以通过 .getChildAt(x) 获取每个标签，其中 x 是索引的选项卡。

```
ViewGroup tabs = (ViewGroup) solo.getView(android.R.id.tabs);
View viewYouWantToDoStuffWith = tabs.getChildAt(x); //change x to the index you want. 
```

在你的情况下，你会想要类似的东西：

```
solo.clickOnView(viewYouWantToDoStuffWith); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T07:55:18.340

you can use method `solo.clickOnView(solo.getView(resourceId));`
where `resourceId` could be something like `R.id.id_Of_Button`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T07:45:33.733

请参阅此链接，因为他们正在使用图像+文本。所以删除作为图像制作的文本，你必须这样做。

```
http://www.androidhive.info/2011/08/android-tab-layout-tutorial/ 
```

这仅适用于您可以使用图像设置并作为自定义选项卡的文本。

```
http://www.androidpeople.com/android-tabhost-tutorial-part-1 
```

希望它对你有用。

# mysql - Invalid use of group function while updating a table with sum function

> ID：13207069
> 
> 赞同：8
> 
> 时间：2012-11-03T07:37:51.817
> 
> 标签：mysql, sql, sql-update

I have two tables: `o_daily_lcsgeneration` and `o_daily_generation`.

While trying to update the `o_daily_generation` I receive an error saying:

```
error(1111) invalid use of Group function 
```

Here is the code I am running:

```
update o_daily_generation join o_daily_lcsgeneration 
on o_daily_generation.Location =o_daily_lcsgeneration.Location 
   and o_daily_generation.Date =o_daily_lcsgeneration.Date  
set o_daily_lcsgeneration.Turbine_Generation =sum(o_daily_generation.Turbine_Generation) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-03T07:44:02.413

试试这个：

```
UPDATE o_daily_generation od
INNER JOIN 
(
     SELECT Location, SUM(Turbine_Generation) TurbineSum
     FROM o_daily_lcsgeneration
     GROUP BY Location
) og ON od.Location = og.Location
SET od.Turbine_Generation = og.TurbineSum 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-12T15:51:30.980

我确实根据上述答案更新了上述查询，但存在问题。

```
UPDATE tmpTotal t1
    INNER JOIN 
    (
         SELECT thirdlevel_delivery_id, MAX(baseline_id) MaxBaseLineId
         FROM tmpTotal
         GROUP BY release_id
    ) t2 ON t1.release_id = t2.release_id
    SET t1.planned_delivery_date = t2.MaxBaseLineId; 
```

它给

```
Error Code : 1054
Unknown column 't2.release_id' in 'on clause' 
```

# haskell - 如何让 Leksah 的糖果在 OS X 中正确渲染？

> ID：13207073
> 
> 赞同：2
> 
> 时间：2012-11-03T07:38:05.753
> 
> 标签：haskell, fonts, leksah

Haskell的[Leksah](http://leksah.org) IDE 有一个有趣的“糖果”功能，它将某些运算符（如 ==）呈现为特殊符号（在本例中为三等号）。在 OS X（Mountain Lion，10.8.2，如果重要的话）上，这些特殊符号仅显示为框。谷歌搜索显示其他人遇到过这个问题，但我找不到任何解决方案。

有人知道如何使糖果字体在 OS X 上的 Leksah 中正常工作吗？

# sql - 在 SQL Server 2008 R2 中用逗号格式化数字但不带小数？

> ID：13207075
> 
> 赞同：9
> 
> 时间：2012-11-03T07:38:11.293
> 
> 标签：sql, sql-server, sql-server-2008

我正在使用以下内容在 T-SQL 中创建逗号格式的数字。我怎样才能摆脱小数点和小数点后的数字。因此，如果我在格式化后得到 1,112.00，我怎么会只得到 1,112？

```
SELECT CONVERT(varchar, CAST(1112 AS money), 1) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-03T07:50:20.560

```
DECLARE @val varchar(50)

set @val = CONVERT(varchar(50), CAST(1112 AS money), 1)
SELECT  left(@val, len(@val) - 3) 
```

这也适用于小数点后的数字：

```
DECLARE @val varchar(50)

set @val = CONVERT(varchar(50), CAST(1112.56 AS money), 1)
SELECT  left(@val, len(@val) - 3) 
```

**注意**：正如@Mahmoud Gamal 指出的那样，格式化通常更适合在前端执行。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-03T07:50:54.017

像这样：

```
SELECT REPLACE(CONVERT(VARCHAR(20), CAST(1112 AS MONEY), 1), '.00', ''); 
```

这将始终正常工作。由于`CONVERT(VARCHAR(20), CAST(1112 AS MONEY), 1)`将始终返回一个带有`.00`. 但是，如果逗号后面有一个带十进制数字的数字， [**MitchWheat 的答案会更好。**](https://stackoverflow.com/a/13207166/722783)

**请注意**：您应该考虑在前端应用程序中执行此格式化操作。T-SQL 与格式化无关。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-05-28T13:10:27.770

```
PARSENAME(CONVERT(VARCHAR,CAST(1112 AS MONEY),1),2) 
```

它会很好地工作。

当自动将数字转换为货币数据类型时，小数点后将添加 2 个零。PARSENAME 函数将删除该零。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-12-03T01:26:50.010

[https://database.guide/how-to-format-numbers-in-sql-server/](https://database.guide/how-to-format-numbers-in-sql-server/)

从 SQL 2012 开始，您可以编写：

```
SELECT FORMAT(ColumnName, 'N0'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-06T17:25:53.857

经过一番研究，我找到了最初问题的 2 个可能答案。它们在下面列出。

**选项 1**：Mitch Wheat 的答案是一个可能的答案。但是，当想要在 SELECT 中格式化列值时，我们将不得不使用 Mitch 的 T-SQL 代码创建一个用户定义的标量函数，并从我们的 SQL 调用这个 UDF。

```
-- =============================================
-- Description: Formats a number and truncates 
--              the decimal part. You can pass 
--              a number as a string or a numeric type.
-- =============================================
CREATE FUNCTION dbo.Utility_fn_FormatNumberAndTruncateDecimals
(
   @unFormattedNumber VARCHAR(100)
)
 RETURNS VARCHAR(100)
  AS
 BEGIN
   DECLARE @val VARCHAR(100)
   SET @val = convert(VARCHAR(50), cast(@unFormattedNumber AS MONEY), 1)

   RETURN (SELECT left(@val, len(@val) - 3))
 END
 GO

 --call this function using either of the SELECTS below
 SELECT dbo.Utility_fn_FormatNumberAndTruncateDecimals('233444')
 SELECT dbo.Utility_fn_FormatNumberAndTruncateDecimals(233444.345) 
```

**选项 2：**我们可以在下面的 T-SQL 代码中使用名为“parsename”的内置系统函数来格式化和截断小数。

```
SELECT PARSENAME(CONVERT(VARCHAR, CAST('2334442221.345222'  AS MONEY), 1),2) 
```

# c - 在反汇编中演示 volatile 的示例 C 代码？

> ID：13207077
> 
> 赞同：5
> 
> 时间：2012-11-03T07:38:17.427
> 
> 标签：c, volatile

什么是一个简短的说明性 C 程序，它演示了反汇编中易失性和非易失性之间的区别？

IE

```
int main()
{
    volatile int x;

    ???
} 
```

对比

```
int main()
{
    int x;

    ???
} 
```

我们可以用什么来替换两者`???`以使生成的代码不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T07:45:19.483

例如：

```
x = 0; 
```

如果`x`is not `volatile`，编译器将看到它未被使用，并且可能会`x = 0;`从生成的代码中完全消除它（语句甚至变量本身）作为优化。

但是，该`volatile`关键字**正是为了防止编译器这样做。**它基本上告诉代码生成器“无论你认为这个变量是/做什么，不要再猜我，我需要它。” 因此，编译器会将 volatile 变量视为已访问，并将发出与表达式对应的实际代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T07:47:33.047

这可能不是最短的例子，但它`volatile`在*嵌入式系统*中很常见，假设`x`指向寄存器的地址，如果`volatile`不使用，编译器将假设 的值`x`不会改变并删除循环：

```
volatile long *x = (long*) REGISTER_BASE;
while (!(x&0x01)) {
   //do nothing;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T07:56:40.310

你也可以试试这个：

```
x=1;
x=2;
return x; 
```

打开优化并检查两者的反汇编。

# android - Android - 使用 System.exit 关闭应用程序

> ID：13207081
> 
> 赞同：1
> 
> 时间：2012-11-03T07:39:06.803
> 
> 标签：android, eclipse, sdk

我想用 System.exit 退出我的应用程序谁能帮我提供任何示例代码？我希望在按下返回或主页按钮时实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:44:17.810

您可以像这样在后按覆盖方法上打开对话框。

```
@Override
        public void onBackPressed() {
            // TODO Auto-generated method stub
            super.onBackPressed();

              DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    switch (which){
                    case DialogInterface.BUTTON_POSITIVE:
                        System.exit(0);
                        break;

                    case DialogInterface.BUTTON_NEGATIVE:

                        dialog.cancel();

                        break;
                    }
                }
            };

            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Exit or not ?").setPositiveButton("Yes", dialogClickListener)
                .setNegativeButton("No", dialogClickListener).show();
            }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T07:42:24.010

您只需在其中添加一个 onclick 侦听器即可执行`System.Exit`调用：

```
((Button) findViewById(R.id.button)).setOnClickListener(new OnClickListener {
    @Override
    public void onClick(View v) {
        System.Exit(0);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T07:43:46.787

您可以像这样在后退按钮中执行此操作

```
@Override
public void onBackPressed(){
   super.onBackPressed();
   System.exit(0)
} 
```

编辑：如果您在第一个活动中不需要这样做，只需按后退按钮操作系统将自动关闭您的应用程序

# ruby-on-rails - Rails 嵌套查询

> ID：13207082
> 
> 赞同：0
> 
> 时间：2012-11-03T07:39:19.190
> 
> 标签：ruby-on-rails, activerecord, nested-queries

我有关注查询

```
 notes = Note.where('notes.id IN
  (
    SELECT "notes"."id" FROM "notes" 
      WHERE "notes"."circle_id" = ?
  )
  OR notes.id IN 
  (
    SELECT "notes"."id" FROM "notes" 
      INNER JOIN "circles_dreams" 
      ON "circles_dreams"."dream_id" = "notes"."dream_id" 
      WHERE "circles_dreams"."circle_id" = ? 
  )', @circle.id, @circle.id) 
```

如何简化此查询？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:02:34.420

首先，您可以收集所有需要的笔记 id。`Note`我应该认为你已经和之间有什么关系`CirclesDream`

```
note_ids = Note.where(circle_id: @circle.id).pluck(:id) # your first SELECT
dream_ids = CirclesDream.where(id: @circle.id).pluck(:note_id) # your second SELECT

notes_ids = note_ids | dreams_ids # combine them

notes = Note.where(id: notes_ids) # Now your 
```

**upd：**我刚刚修正了错字。在第二个请求中更改`id`为`note_id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:32:45.947

试试这个

```
note_ids = Note.where('circle_id = ?', @circle.id).pluck(:id)

dream_note_ids = Note.joins(:circle_dreams).where('circle_dreams.circle_id = ?', @circle.id).plunk(:note_id)

notes_ids = note_ids | dream_note_ids 
```

如果您的`circle_dreams`表可以包含具有 的记录`note_id = null`，那么您必须应用联接。所以我认为这将适用于你的情况....

# iis - 使用 IIS/Coldfusion 阻止 IP 列表/国家/地区

> ID：13207083
> 
> 赞同：1
> 
> 时间：2012-11-03T07:39:20.363
> 
> 标签：iis, coldfusion, spam, application.cfc

例如，我从中国的 ips 收到了很多垃圾邮件/不需要的流量。在我的 FTP 日志中看到的 125.116.123.14 尝试登录等。

有没有办法可以在 Coldfusion Application.cfc 中阻止它？目前我正在手动将它们阻止在 IIS 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:28:08.127

在 Application.cfc 的顶部可以像这样简单：

```
<cfif Left(cgi.REMOTE_ADDR, 7) EQ "125.116">
    <cfabort/>
</cfif> 
```

您可以使用检查模式并获得一些可接受的结果。

但是，*我仍然建议在 Web 服务器级别处理它以提高效率*。我不太了解高级 IIS 的东西，但[动态 IP 限制](http://www.iis.net/downloads/microsoft/dynamic-ip-restrictions)等扩展可能对你有用。

# ruby-on-rails - Heroku 可以作为版本控制工作吗？

> ID：13207094
> 
> 赞同：2
> 
> 时间：2012-11-03T07:40:45.023
> 
> 标签：ruby-on-rails, git, heroku, github, assembla

我正在以 10 人一组的方式处理这个学校项目（RoR 中的 webapp），我们进入了这场战斗。

有人说我们应该使用 Heroku 作为我们的网络主机，因为它使用 git 进行版本控制。另一个说使用 Heroku 作为 web 主机很酷，但它不会存储旧代码并跟踪更改，所以我们应该建立自己的 github/assembla-git。

谁是对的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T07:52:15.907

Heroku uses git for deploy. So you can use it as version control too.

But I would not recommend it. When you push to heroku it's mean deploy to production. But your code can be not ready for it. Not tested yet, feature not fully implemented and etc.

You can add 2 remote for your repository.

```
git push origin master # github
git push heroku master 
```

So I would recommend you use heroku as webhost and github as version control

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T17:02:22.193

使用 Heroku 作为您的主要 Git 存储库没有任何问题。我有几十个以这种方式设置的项目。

Heroku 绝对不会随意删除存储库中的代码或提交。

当然，你推送到`master`分支的任何东西实际上都会被部署，但是如果你愿意，你可以自由地推送其他分支（Heroku 会简单地忽略这些）。

除了 Heroku 之外，使用 GitHub 的优势在于，您可以在裸 Git 存储库之上获得大量额外功能，例如基于 Web 的 UI 和协作工具（如拉取请求等）。请记住，GitHub 用于私有但是，存储库是一项付费服务​​。GitHub 也有竞争对手，例如 Bitbucket，它为小型团队免费提供私有存储库。

但是，如果您已经熟悉 Git，并且觉得您不需要任何额外的功能，那么您不妨选择 Heroku。为了简单起见，还有一些话要说。

# html - 为什么元素上的负下边距会降低该元素父级的高度？

> ID：13207095
> 
> 赞同：6
> 
> 时间：2012-11-03T07:40:57.843
> 
> 标签：html, css, margin

这可能是由于边距折叠，我知道边距折叠，至少它如何影响相邻元素，但我不明白当涉及负边距时它如何在嵌套元素上工作。

例如，在此标记和随附的 CSS 中：

### 标记

```
<div class="parent">
  <div class="child">
    Child 1
  </div>
</div>

<div class="parent">
  <div class="child negative">
    Child 1
  </div>
</div> 
```

### CSS

```
body {
  background: white;
  padding: 45px;
}

.parent {
  border: 1px solid black;
  margin-bottom: 10px;
}

.negative {
  margin-bottom: -1px;
} 
```

现场示例[在这里](http://cssdesk.com/tuZCX)。

当我检查第二个 div 的高度时`.parent`，我注意到它比第一个小 1 个像素。`.negative`发生这种情况是因为它内部元素的负边距。我快速浏览了 W3C，但找不到这种行为的解释。

有人可以解释一下这里发生了什么，并为我提供一个指向 W3C 规范部分的链接吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T08:26:22.427

> 这可能是由于边距折叠，我知道边距折叠，至少它如何影响相邻元素，但我不明白当涉及负边距时它如何在嵌套元素上工作。

[第 8.3.1 节](http://www.w3.org/TR/CSS21/box.html#collapsing-margins)包含所有详细信息。它还涵盖了嵌套框之间的相邻边距以及负边距的行为。

但是，您在这里看到的*并不是*保证金崩溃的影响，因为您已经在您的规则`border: 1px solid black`中声明了它。`.parent`这意味着那里有一个边框可以防止您的`.parent`边距与您的`.child.negative`边距完全折叠。

相反，这只是负利润率的工作方式。这在视觉格式化模型的各个部分中都有介绍，但在[第 11 节](http://www.w3.org/TR/CSS21/visufx.html)的开头最简洁直接地解决了这一点，总结如下：

> 通常，块框的内容被限制在框的内容边缘。在某些情况下，盒子可能会溢出，这意味着它的内容部分或全部位于盒子之外，例如：
> 
> *   ...
> *   后代盒子有[负边距](http://www.w3.org/TR/CSS21/box.html#margin-properties)，导致它部分定位在盒子外面。

因此，这里发生的事情是：

1.  从元素的实际高度`.child.negative`中减去元素的负边距的绝对值（乘以）。`.parent``1px`

2.  结果，`.child.negative`元素本身溢出`.parent`（因为它自己的高度没有改变，而`overflow`any的默认值`div`是`visible`）。

3.  由于保证金崩溃在这里不生效，因此`margin-bottom: 10px`in your`.parent`不受影响。请注意，虽然正常流程中的任何后续元素都会上移`1px`，这主要是由于`.child.negative`元素的负边距；换句话说，步骤 1 的副作用。

这就是它的全部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T08:18:01.383

当您使用时`.negative { margin-bottom: -1px; }`，它将在顶部移动。见这个例子。

![在此处输入图像描述](../Images/703d16231d0040e7e407893709f7ed07.png)

请参考您容易理解的以下链接。 [http://coding.smashingmagazine.com/2009/07/27/the-definitive-guide-to-using-negative-margins/](http://coding.smashingmagazine.com/2009/07/27/the-definitive-guide-to-using-negative-margins/)

```
body {
  background: white;
  padding: 45px;
}

.parent {
  border: 1px solid black;
  margin-bottom: 10px;
  min-height: 30px;
}

.negative {
  margin-bottom: 20px;
} 
```

**结论：**

例如，在您的情况下，我必须添加`min-height:30px`到父类以便它保留`fix`。仅当您添加`positive margins`到负类时才移动。仅仅因为您可以在上图中看到结果，就说明了您所需要的一切。

查看 cssdesk 链接[单击此处 cssdesk](http://cssdesk.com/zFJxV)

希望，它会帮助你。干杯。！！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-03T08:03:25.177

当外部元素没有边框、填充和内容时，第一个和最后一个元素的边距将应用于外部元素，而不是自身。

在您的情况下，父节点有边框，因此在这种情况下不会应用边距折叠。由于您有内部子节点的 margin-bottom = -1px，当计算子节点的外部高度时，它将是其内容的高度 + 填充 + 边框宽度 + 边距。因此，从外部测量时会减少 1px。这就是为什么父节点的高度会比上面的例子少 1px。为了看得更清楚，你可以给子节点加一个背景，比如说黄色，你会发现子节点会和父节点的边框重叠。

但是如果去掉父节点的边框，情况就完全不同了。

例如解释边距崩溃，说你有

```
<div style="background-color:black">
  <div style="height:10px; background-color:white; margin-top: 10px"></div>
</div> 
```

您不会看到一个 10px 高度的黑框，因为外部节点将被视为顶部有 10px 的边距，而内部节点的边距被忽略。而对于负面的情况，外边距会减少。

引用[规范](http://www.w3.org/TR/CSS21/box.html#collapsing-margins)：

> 当两个或多个边距折叠时，产生的边距宽度是折叠边距宽度的最大值。在负边距的情况下，从正邻接边距的最大值​​中减去负邻接边距的绝对值的最大值。如果没有正边距，则从零中减去相邻边距的绝对值的最大值。

欲了解更多信息： [https ://developer.mozilla.org/en-US/docs/CSS/margin_collapsing](https://developer.mozilla.org/en-US/docs/CSS/margin_collapsing)

# magento - 无法从愿望清单中删除产品

> ID：13207096
> 
> 赞同：3
> 
> 时间：2012-11-03T07:41:01.167
> 
> 标签：magento, magento-1.7, magento-1.6

我想从产品列表页面（default/template/wishlist/item/column/image.php）的愿望清单中删除产品。

我在愿望清单页面中看到了删除 url 功能`$this->getItemRemoveUrl($item)`。但它在 image.php 中不起作用。即使我尝试过，

```
echo Mage::helper(‘wishlist’)->getRemoveUrl($_product) 
```

它提供 URL 但不显示参数。

例如：-

```
domain.com/wishlist/index/remove (not working)
domain.com/wishlist/index/remove/item/3 (actual) 
```

那么我该如何解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:45:12.320

这个功能应该适合你

```
Mage::helper('wishlist')->getRemoveUrl($_product) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T09:46:38.607

请将您的 xml 文件与 magento 默认的 xml 文件进行比较

可能有任何`function`遗漏或评论

还有另一种可能性或错误

在

```
helper('wishlist')->getRemoveUrl($_product) 
```

可能`$_product`包含额外的空格或符号

请检查一下

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T11:41:30.180

使用`getModel`您可以删除心愿单产品，如下所示

```
Mage::getModel('wishlist/item')->load($id)->delete(); 
```

# visual-studio-2010 - 如何使用 System.IO 的 fileinfo 对象打开 pdf 文件

> ID：13207099
> 
> 赞同：0
> 
> 时间：2012-11-03T07:41:47.613
> 
> 标签：visual-studio-2010, c#-4.0, system.io.fileinfo

我有一个使用`fileInfo`类的简单对象：

```
DirectoryInfo myDirectory = new DirectoryInfo(@"d:\Books");
FileInfo[] files = myDirectory.GetFiles();

foreach (FileInfo file in files)
{
    try
    {
        file.OpenRead();
        break;
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message.ToString());
    }
} 
```

目录（书籍）中的第一个文件是`PDF`. 代码不会抛出异常。仍然没有打开特定文件。我缺少什么代码或我正在做任何错误。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:54:01.403

您应该使用`Process.Start`默认应用程序打开文件，如果您打开文件，如果*Adob​​e Reader*是默认应用程序`pdf`，它将在*Adob​​e Reader*中打开：*`pdf`*

 *```
 Process.Start(file.FullName); 
```

[`FileInfo.OpenRead`](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.openread.aspx)返回一个只读`FileStream`对象，不用于打开文件。*

# jquery - 如何在 jquery 中创建自定义事件？

> ID：13207103
> 
> 赞同：0
> 
> 时间：2012-11-03T07:42:30.840
> 
> 标签：jquery, plugins, custom-event

如何在 jquery 中创建自定义事件？我想创建一个选择绘制事件。这样我就可以用我的事件替换这个插件[JQuery Image Annotation上的添加注释按钮。](http://flipbit.co.uk/jquery-image-annotation.html)我希望能够像绘制矩形选择区域一样直接绘制注释，我该怎么做？请指导。

我已经这样做了，但我的问题是我不知道如何定义我想调用 ondraw 的自定义事件，我的意思是我想知道的是，如何定义基本的 jquery 事件？任何骨架或示例肯定会有所帮助，而且我是新手，所以我需要一些指导，我还找到了一段代码来创建矩形，代码：

```
 $(function(){
var $container = $('#container');
var $selection = $('<div>').addClass('selection-box');

$container.on('mousedown', function(e) {
    var click_y = e.pageY;
    var click_x = e.pageX;

    $selection.css({
      'top':    click_y,
      'left':   click_x,
      'width':  0,
      'height': 0
    });
    $selection.appendTo($container);
    $container.on('mousemove', function(e) {
        var move_x = e.pageX,
            move_y = e.pageY,
            width  = Math.abs(move_x - click_x),
            height = Math.abs(move_y - click_y);

        $selection.css({
            'width':  width,
            'height': height
        });
        if (move_x < click_x) { //mouse moving left instead of right
            $selection.css({
                'left': click_x - width
            });
        }
        if (move_y < click_y) { //mouse moving up instead of down
            $selection.css({
                'top': click_y - height
            });
        }
    }).on('mouseup', function(e) {
        $container.off('mousemove');
        $selection.remove();
    });
}); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T07:50:39.093

Have a look at triggering and binding [here](http://jamiethompson.co.uk/web/2008/06/17/publish-subscribe-with-jquery/). Trigger an event in your code

```
// Trigger event on selection draw
$(document).trigger('onSelectionDraw') 
```

then bind to the event

```
$(document).bind('onSelectionDraw', function() {
    // do stuff
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T08:05:03.487

我从未向我推荐在 jQuery 对象中创建自定义事件作为创建我自己的“事件”的合适方式。相反，我总是指向以下任何一个：

*   带有回调的函数，在我的脚本中的特定断点处调用，用我自己的代码模拟事件。
*   创建一些通用事件处理程序并使用 jQuery`.trigger()`方法触发事件
*   如果事件已存在，请使用您自己的事件处理程序取消绑定并重新绑定。

回调函数示例

```
function myCustomEvent(callback)
{
    // Do something

    // If callback is a function call it
    typeof callback === 'function' && callback();
} 
```

很久以后，在一个遥远的星系中

```
// You have a function that loads JS asyncronously
// but want to know each time it is fired. asyncLoad()
// Also accepts a callback as a parameter
asyncLoad('/js/myJs.js', function()
{
    console.log('myJs asyncronously loaded');

    // Script is loaded, run our event
    myCustomEvent(function()
    {
        console.log('myJs event complete');
    });
}); 
```

在该示例中，在 asyncLoad() 函数中触发您的自定义事件会更有意义，但为了展示它是如何工作的，我认为这会起作用。

你的代码：

当在 jQuery 对象上调用插件时，一个事件会绑定到该按钮。它很可能是一次“点击”，但是值得通过源代码查找实际触发的事件。

粗略地看，解除绑定和重新绑定似乎是最好的操作，假设您还可以找到它创建的按钮的 id。（或者有一个简单的方法来选择它作为一个 jQuery 对象）。

```
$('#createdButton').unbind('click')
    .click(function(e)
    {
        // New event handling code
    }); 
```

`.on`请注意，如果插件使用冒泡事件，例如，此方法可能不起作用。在这种情况下，您需要`stopPropagation()`为原始事件处理程序中的元素或父项。或者`unbind()`，在事件绑定到的低级 DOM 元素上也可以工作。

# android - 将数据从 Web 浏览器发送到 Android 应用程序

> ID：13207105
> 
> 赞同：0
> 
> 时间：2012-11-03T07:42:43.413
> 
> 标签：android, google-cloud-messaging

我正在开发一个家庭自动化系统，我的 android 应用程序可以使用蓝牙打开和关闭灯，我想添加另一个从网页控制设备的功能。

谁能告诉我最简单的方法是什么，我知道 GCM（Google Cloud Messaging）是最好的解决方案，但还有其他更好或更简单的方法吗？

如果有人有一些工作代码，请与我分享；我想尽快完成这个项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:47:36.210

If you have a backend built using PHP, Rails etc you can have API's that the app can call and check for instructions. However, this has the side effect of draining he battery due to continous polling.

If you don't wanna go the "polling the server periodically" way, you can use GCM as you mentioned.

You can send data using the JSON data format. This is easily the lighest and most versatile data format used by many web and android apps and has tremendous support from third party libraries as well.

Here are some tutorials for this:

[http://developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html)

[http://android.amolgupta.in/2012/07/google-cloud-messaging-gcm-tutorial.html](http://android.amolgupta.in/2012/07/google-cloud-messaging-gcm-tutorial.html)

[http://www.londatiga.net/featured-articles/how-to-send-message-to-google-cloud-messaging-gcm-server-using-json-and-php/](http://www.londatiga.net/featured-articles/how-to-send-message-to-google-cloud-messaging-gcm-server-using-json-and-php/)

[http://fundroiding.wordpress.com/2012/06/29/google-cloud-messaging-for-android-gcm-simple-tutorial/](http://fundroiding.wordpress.com/2012/06/29/google-cloud-messaging-for-android-gcm-simple-tutorial/)

[http://androidjayavelu.blogspot.in/2012/07/google-cloud-messaging-gcm-tutorial_27.html](http://androidjayavelu.blogspot.in/2012/07/google-cloud-messaging-gcm-tutorial_27.html)

# mysql - 从两个表中选择第一行

> ID：13207122
> 
> 赞同：0
> 
> 时间：2012-11-03T07:45:06.550
> 
> 标签：mysql, union

我知道 MySQL 没有用于选择第一行的 TOP 1 函数。所以我使用limit 1来做到这一点。但是如何同时从两个表（tableX，tableY）中选择第一行。

像这样？

```
SELECT * FROM Database.tableX 
limit 1, Database.tableY limit 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T08:49:42.203

除非两行之间存在某种关系，否则这是不可能的。这里的其他答案尝试连接两行，但它们不能保证它是每个表中的第一行。他们还假设有一个可以从两个表中匹配的字段。

我最好的建议是做两个查询：

`SELECT * FROM Database.tableX limit 1;`

`SELECT * FROM Database.tableY limit 1;`

编辑：您还应该添加一个 ORDER BY 来告诉 MySQL 如何对行进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T08:59:49.213

可能，如果表定义匹配：

```
SELECT * FROM Database.tableX LIMIT 1 
UNION ALL
(
 SELECT * FROM Database.tableY LIMIT 1
) 
```

注意内支架是必要的。否则优化器会将结果集限制为 1 看到最后一个`LIMIT 1`子句

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T08:56:01.167

只是这个：

```
SELECT *
FROM Database.TableX, Database.TableY
LIMIT 1 
```

或者这个？

```
SELECT *
FROM
  (SELECT * FROM Database.TableX LIMIT 1) t1,
  (SELECT * FROM Database.TableY LIMIT 1) t2 
```

# android - 在自定义列表视图中更改列表项的背景颜色

> ID：13207128
> 
> 赞同：1
> 
> 时间：2012-11-03T07:45:42.300
> 
> 标签：android

我有一个包含 7 个文本视图的自定义列表视图..我为此创建了一个自定义线性布局..然后我正在填充它...我想要做的是设置自定义颜色...当用户单击列表项并使其突出显示，直到他单击另一个项目...我将如何做到这一点？？...

这是列表项的自定义布局...

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LLtv"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/colors"
    android:cacheColorHint="#00000000" >

    <TextView
        android:id="@+id/TvVLdate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:paddingLeft="8dp"
        android:paddingTop="8dp"
        android:textColor="#000000"
        android:textSize="15dp" />

    <TextView
        android:id="@+id/TvVLtime"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/TvVLdate"
        android:paddingLeft="8dp"
        android:paddingTop="8dp"
        android:textColor="#000000"
        android:textSize="15dp" />

    <TextView
        android:id="@+id/TvVLcardno"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/TvVLtime"
        android:paddingLeft="8dp"
        android:paddingTop="8dp"
        android:textColor="#000000"
        android:textSize="15dp" />

    <TextView
        android:id="@+id/TvVLsaletext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/TvVLdate"
        android:paddingLeft="8dp"
        android:paddingTop="8dp"
        android:text="Sale transaction:Rs"
        android:textColor="#000000"
        android:textSize="15dp" />

    <TextView
        android:id="@+id/TvVLamnt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/TvVLsaletext"
        android:layout_toRightOf="@+id/TvVLsaletext"
        android:paddingTop="8dp"
        android:textColor="#000000"
        android:textSize="15dp" />

    <TextView
        android:id="@+id/TvVLtexttip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/TvVLamnt"
        android:layout_toRightOf="@+id/TvVLamnt"
        android:paddingLeft="8dp"
        android:paddingTop="8dp"
        android:text="Tip:Rs"
        android:textColor="#000000"
        android:textSize="15dp" />

    <TextView
        android:id="@+id/TvVLtip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/TvVLtexttip"
        android:layout_toRightOf="@+id/TvVLtexttip"
        android:paddingTop="8dp"
        android:textColor="#000000"
        android:textSize="15dp" />

</RelativeLayout> 
```

还有我的列表布局..

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#E0E0E0"
    android:orientation="vertical" >

    <include
        android:id="@+id/Hvoid"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        layout="@layout/header" />

    <RelativeLayout
        android:id="@+id/RLvoid"
        android:layout_width="match_parent"
        android:layout_height="40dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/Hvoid"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="12dp"
            android:text="Main Menu"
            android:textColor="#000000"
            android:textSize="15dp" />

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:paddingBottom="5dp"
            android:paddingTop="5dp"
            android:src="@drawable/ivoid" />
    </RelativeLayout>

    <View
        android:id="@+id/Vvoidtop"
        android:layout_width="fill_parent"
        android:layout_height="2dp"
        android:layout_below="@+id/RLvoid"
        android:background="@android:color/darker_gray" />

    <ListView
        android:id="@+id/Lvvoid"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/Bconfirm"
        android:layout_below="@+id/Vvoidtop"
        android:background="#E0E0E0"
        android:cacheColorHint="#00000000"
        android:divider="@android:color/transparent"
        android:dividerHeight="20dp" >
    </ListView>

    <Button
        android:id="@+id/Bconfirm"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_above="@+id/Vvoidbot"
        android:layout_marginTop="8dp"
        android:layout_marginBottom="8dp"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:background="@drawable/cbconfirm" />

    <View
        android:id="@+id/Vvoidbot"
        android:layout_width="fill_parent"
        android:layout_height="2dp"
        android:layout_above="@+id/Tvfooter"
        android:background="@android:color/darker_gray" />

    <TextView
        android:id="@+id/Tvfooter"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:gravity="center_horizontal"
        android:text="© India Transact Services Ltd."
        android:textColor="#000000"
        android:textSize="15dp" />

</RelativeLayout> 
```

和可绘制的颜色 xml 文件...

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Selected Item -->
    <item android:drawable="@android:color/darker_gray" android:state_selected="true"/>
    <item android:drawable="@android:color/darker_gray"  android:state_focused="true"/>
    <!-- Default Item -->
    <item android:drawable="@android:color/white" />
</selector> 
```

还有我的代码....

```
public class Void extends Activity {
    ListView lmenu;
    View Vlistselector;
    String s;
    View layout;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.voidlist);

        Menu Menu_data[] = new Menu[] {
                new Menu("29/09/2012", "05:40", "2234 xxxx xxxx 1990", "100",
                        "10"),
                new Menu("09/12/2012", "00:34", "2234 xxxx xxxx 1990", "99",
                        "12"),
                new Menu("29/09/2012", "12:20", "2234 xxxx xxxx 1990", "111",
                        "0"),
                new Menu("31/01/2012", "13:40", "2234 xxxx xxxx 1990", "105",
                        "19"),
                new Menu("13/10/2012", "01:40", "2234 xxxx xxxx 1990", "203",
                        "1"),
                new Menu("23/11/2012", "07:40", "2234 xxxx xxxx 1990", "44",
                        "5") };

        MenuAdapter adapter = new MenuAdapter(this, R.layout.voidlisttext,
                Menu_data);

        lmenu = (ListView) findViewById(R.id.Lvvoid);

        lmenu.setAdapter(adapter);
        // lmenu.setSelector(R.drawable.listcolorselector);
        lmenu.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> ada, View v, int position,
                    long id) {
                // TODO Auto-generated method stub

                /*
                 * v.setSelected(true);
                 */
                v.setBackgroundColor(Color.parseColor("#FCD5B5"));

                if (!(Vlistselector == null) && Vlistselector != v)
                    Vlistselector.setBackgroundColor(Color
                            .parseColor("#EEEEEE"));
                Vlistselector = v;

                Toast.makeText(getApplicationContext(),
                        String.valueOf(position + 1), Toast.LENGTH_LONG).show();
            }
        });

        findViewById(R.id.BLogout).setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                finish();
            }
        });
    }

    public class Menu {
        public String date;
        public String time;
        public String cardno;
        public String amnt;
        public String tip;

        public Menu() {
            super();
        }

        public Menu(String date, String time, String cardno, String amnt,
                String tip) {
            super();
            this.date = date;
            this.time = time;
            this.cardno = cardno;
            this.amnt = amnt;
            this.tip = tip;

        }
    }

    public class MenuAdapter extends ArrayAdapter<Menu> {

        Context context;
        int layoutResourceId;
        Menu data[] = null;

        public MenuAdapter(Context context, int layoutResourceId, Menu[] data) {
            super(context, layoutResourceId, data);
            this.layoutResourceId = layoutResourceId;
            this.context = context;
            this.data = data;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View row = convertView;
            MenuHolder holder = null;

            if (row == null) {
                LayoutInflater inflater = ((Activity) context)
                        .getLayoutInflater();
                row = inflater.inflate(layoutResourceId, parent, false);

                holder = new MenuHolder();
                holder.date = (TextView) row.findViewById(R.id.TvVLdate);
                holder.time = (TextView) row.findViewById(R.id.TvVLtime);
                holder.cardno = (TextView) row.findViewById(R.id.TvVLcardno);
                holder.amnt = (TextView) row.findViewById(R.id.TvVLamnt);
                holder.tip = (TextView) row.findViewById(R.id.TvVLtip);
                row.setTag(holder);

            } else {
                holder = (MenuHolder) row.getTag();
            }

            Menu Menu = data[position];
            holder.date.setText(Menu.date);
            holder.time.setText(Menu.time);
            holder.cardno.setText(Menu.cardno);
            holder.amnt.setText(Menu.amnt);
            holder.tip.setText(Menu.tip);

            return row;
        }

        public class MenuHolder {
            TextView date;
            TextView time;
            TextView cardno;
            TextView amnt;
            TextView tip;
        }
    }
} 
```

我想要的是代替颜色较深的灰色设置新的自定义颜色....我是否以正确的方式做到了，或者还有其他方法可以做到吗？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:52:23.747

对于这种情况，您应该在运行时使用 setBackground() 而不是依赖选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T07:53:20.087

```
View listColor;//declare this at the top 
```

在listviewitem的点击上做

```
@Override
protected void onListItemClick(ListView list, View view, int position, long id) {

if(listColor!=null){
    listColor.setBackgroundColor(Color.BLACK);
    listColor=view;
}else{
    listColor=view;
}
listColor.setBackgroundColor(Color.BLUE); //intead of blue you can change it to something you want like darkergray
//show toast on the clicked item 
String selectedValue = (String) getListAdapter().getItem(position);
Toast.makeText(this, selectedValue, Toast.LENGTH_SHORT).show();

} 
```

# javascript - Close a Chrome extension popup by clicking the browser action icon again

> ID：13207129
> 
> 赞同：7
> 
> 时间：2012-11-03T07:45:57.367
> 
> 标签：javascript, google-chrome, google-chrome-extension, popup

I'm developing a Chrome extension and I wanted to know if it is possible to close a popup by simply clicking again the icon that lets you open the popup: I tried anything but it looks like you must click elsewhere to close it. The docs states the `onClicked` event is:

*Fired when a browser action icon is clicked. This event will not fire if the browser action has a popup* ([http://developer.chrome.com/extensions/browserAction.html#popups](http://developer.chrome.com/extensions/browserAction.html#popups)).

Thanks in advance.

**[UPDATE]** I tried the following and it half (!) works: 1\. in popup.html I link popup.js; 2\. popup.js reads the value of a variable contained in background.js;

```
var currentStatus = chrome.extension.getBackgroundPage().open;
if(currentStatus==0){
  chrome.extension.getBackgroundPage().open=1;
}else{
  chrome.extension.getBackgroundPage().open=0;
  window.close();
} 
```

What happens: the first click opens the app, the second closes it, BUT it remains a micro popup with no content upon the icon. If I remove that, I reached my goal.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-14T21:46:47.093

`onClicked`如果您的扩展程序的浏览器操作未`default_popup`在清单中定义，则调用该事件。文档中的该注释与弹出窗口当前是否打开无关。

如果清单定义`default_popup`，则再次单击该按钮将关闭并重新打开插件。mousedown 关闭， mouseup 打开。（因此，单击按钮并拖动并释放鼠标确实会关闭弹出窗口，并不是任何人都应该这样做。）

我建议`default_popup`在 html 中为关闭弹出窗口的弹出窗口设置并制作一个按钮`window.close;`，或者在弹出窗口的用例中找到一个有意义的关闭点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-20T17:25:35.160

好吧，已经很久了，问题/错误仍然存​​在于 Chrome 浏览器上。我找到了一种解决方法，它不是很好，但它可以满足我的需要 - 在第二次点击图标时关闭窗口。这是我在弹出的 javascript 文件中所做的：

```
if(localStorage.getItem('firstClick')==='true'){
    localStorage.setItem('firstClick', 'false');
    window.close();
}
else {
    localStorage.removeItem('firstClick');
    localStorage.set('firstClick', 'true')
} 
```

# android - Parse Cloud语言中如何使用where条件

> ID：13207133
> 
> 赞同：-1
> 
> 时间：2012-11-03T07:46:21.820
> 
> 标签：android

我不知道如何使用 Where 条件从 Parse 中获取云数据库中的条件数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:51:58.980

```
 ParseQuery query = new ParseQuery("login");
    query.whereEqualTo("username", user);
    query.whereEqualTo("password", pass);
    query.findInBackground(new FindCallback() {

        @Override
        public void done(List<ParseObject> obj, ParseException e) {

            if (e == null) {

                 if(obj.size() == 1){
                     prog.dismiss();
                     Toast.makeText(con, "Login Success..", Toast.LENGTH_SHORT).show();
                     Intent in = new Intent(con, home.class);
                     con.startActivity(in);
                     con.finish();                               
                 }else {
                    Toast.makeText(con, "Password Wrong....", Toast.LENGTH_SHORT).show();
                }

             } else {
                 System.out.println("Fail.....................  ");
                 Toast.makeText(con, "Login Fail..", Toast.LENGTH_SHORT).show();
                 System.exit(0);
             }
        }
    }); 
```

# jquery - jQuery：如何在悬停、div 的 BORDER-RADIUS 和 MARGIN 上添加过渡？

> ID：13207135
> 
> 赞同：1
> 
> 时间：2012-11-03T07:46:49.223
> 
> 标签：jquery, html, transition, jquery-hover

语言：**Javascript** / **jQuery** / **PHP**

我想要完成的，类似于您在此页面的气泡中看到的悬停效果：
**[https ://www.vizify.com/rand-fishkin](https://www.vizify.com/rand-fishkin)**

我使用**CSS3**实现了类似的效果，但是过渡不如该页面上的过渡流畅，因此我选择使用 Javascript 代替。

我在这里做的是**在悬停时将 div 气泡的宽度和高度增加 10%**。

但我不知道如何按百分比调整**边框半径**和**边距？**

```
$(".colored-bg").each(function() {
    $.data(this, 'size', { width: $(this).width(), height: $(this).height() });
}).hover(function() {
    $(this).stop().animate({ height: $.data(this,'size').height*1.1, 
                         width: $.data(this,'size').width*1.1,
                         margin: '-13.5px auto' });
}, function() {
$(this).stop().animate({ height: $.data(this,'size').height, 
                         width: $.data(this,'size').width,
                         margin: '-13.5px auto' });
}); 
```

**悬停时：**

*   我想调整边框半径，以便即使在悬停时气泡也保持圆形（悬停的 div 大小的高度/宽度的 1/2 像素数）

*   我想将边距更改为 1/8 负像素（悬停的 div 大小） - 动态 - 悬停时使 div 保持垂直居中（这样当它增长时，它不会简单地向下扩展）。

够了，**[这里有一个演示](http://likebam.com/test/test.php)**，反映了我到目前为止所做的事情。

目前，我使用 300px 的固定边框半径（大于 div 本身）来保持 div 即使在悬停时也是圆形的，并且我正在以静态方式更改边距（不是基于百分比）。

由于我正在添加基于**百分比**的增长过渡，因此我无法为悬停的 div 执行静态边框半径或静态边距。

我的问题是，**如何按百分比指定边框半径和边距？**

如果这是您将宽度扩大 10% 的方式：`width: $.data(this,'size').width*1.1`
您如何将边距设置为当前高度的 1/8？

我偶然发现这篇文章正在做我想做的事：[**https**](https://stackoverflow.com/a/3630768/1399030) ://stackoverflow.com/a/3630768/1399030 （根据百分比进行划分和输出）

非常感谢，非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:09:20.977

爱，

试试这个：

```
$(".bubble").on('scale', function(e, s) {
    var data = $.data(this, 'size'),
        w = data.width,
        h = data.height;
    $(this).stop().animate({
        width: w * s,
        height: h * s,
        marginLeft: data.marginLeft - w * (s-1) / 2,
        marginTop: data.marginTop - h * (s-1) / 2
    });
}).each(function() {
    var $this = $(this);
    $.data(this, 'size', {
        width: $this.width(),
        height: $this.height(),
        marginLeft: parseInt($this.css('margin-left')),
        marginTop: parseInt($this.css('margin-top'))
    });
}).hover(function() {
    $(this).trigger('scale', [1.1]);
}, function() {
    $(this).trigger('scale', [1.0])
}); 
```

**[演示](http://jsfiddle.net/q7gTz/)**

## 笔记

*   通过在样式表中提供过多的边框半径（例如，等于宽度），可以保证圆形度（？），而无需对其进行缩放。我认为这适用于所有浏览器，但需要测试。
*   为了避免重复代码，我将缩放算法实现为自定义事件“缩放”的处理程序。
*   边距缩放使气泡以原始中心为中心。
*   You will see in the demo that the bubble is wrapped in a static container that reserves space into which the bubble can expand. This will prevent the whole page needing to reflow as the bubble grows/shrinks. Other approaches are available, eg absolute positioning.

# c++ - C++ 创建双向链接的类

> ID：13207138
> 
> 赞同：1
> 
> 时间：2012-11-03T07:47:01.740
> 
> 标签：c++, class, pointers

我有两个类，它们都需要链接到彼此的对象。这是一些示例代码来显示我的问题：

```
//object1.h
class object1{
    object2 *pointer;
} 
```

我的另一堂课：

```
//object2.h
class object2{
    object1 *pointer;
} 
```

我不确定我应该如何在彼此的文件中同时包含这两个类。在两个文件中包含另一个类会导致我出现问题。最好，我希望将两个对象都放在一个文件中，因为它们的标题每个只有几行代码，但这会导致文件中首先声明的任何类出现错误，因为另一个类标题不是在它之前；它给了我一个无效的类型错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T07:49:10.167

使用[前向声明](http://en.wikipedia.org/wiki/Forward_declaration)：

```
//object1.h
class object2;
class object1{
    object2 *pointer;
};

//object2.h
class object1;
class object2{
    object1 *pointer;
}; 
```

前向声明引入了*不完整的类型*。简而言之，它告诉编译器该定义存在于其他地方。但是，您对不完整类型有一些限制。由于编译器不知道它的完整定义，它不能做一些事情，比如为它分配足够的空间、调用成员函数、检查虚拟表等。从根本上说，你可以做的只是声明它们的引用/指针并传递他们周围：

```
// Forward declaration
class X;

class Y {
private:
//  X x;    // Error: compiler can't figure out its size
    X &x;    // A reference is ok
public:
    Y(X &x) : x(x) { }

//  void foo() { x.foo(); } // Error: compiler can't invoke X's member
    void bar();
};

// Full declaration
class X {
public:
    void foo() { }
};

void Y::bar()
{
    x.foo(); // Now it is OK to invoke X's member
} 
```

一个好的模式是使用前向声明来打破头文件或类定义之间的依赖循环，让您想知道您的设计是否可以改进。

# forms - post value still retains the same value after assigning it using $.post

> ID：13207139
> 
> 赞同：2
> 
> 时间：2012-11-03T07:47:14.667
> 
> 标签：forms, jquery

```
<script type="text/javascript">
      $(document).ready(function($) {
        $('#searchicon').click(function(){
            $('#searchicon.toappear').toggle();
            $('#searchicon2.appear').toggle();
            $('#extraSearch').slideToggle('fast');
        });
        $('#searchicon2').click(function(){
            $('#searchicon.toappear').toggle();
            $('#searchicon2.appear').toggle();
            $('#extraSearch').slideToggle('fast');
        });

        $('input[name=estimate]').click(function(){
            if (this.checked) {
                $("input.groupestimate").removeAttr("disabled");
            } else {
                $("input.groupestimate").attr("checked", false);
                $("input.groupestimate").attr("disabled", true);
            }
        });
        $("input.groupgatepass").attr("disabled", true);
        $('input[name=gatepass]').click(function(){
            if (this.checked) {
                $("input.groupgatepass").removeAttr("disabled");
            } else {
                $("input.groupgatepass").attr("checked", false);
                $("input.groupgatepass").attr("disabled", true);
            }
        });

        /*
        $('input.groupestimate').click(function() {
                    if(this.checked) {
                        $form = $('#globalSearch form');
                        if($('#globalSearch form[ACTION*="'+this.value+'"]'))
                        var data = new Object();
                          data.field = this.value;
                          var dataString = $.toJSON(data);
                                                      $.post('json.php',
                                 {data: dataString}, 
                                 function(res){ 
                                       var obj = $.evalJSON(res); 
                                       $form.attr('ACTION',$form.attr('action')+''+obj.query);
                                 }
                          );    
                    }

                });*/

        $('#globalSearch form').submit(function() {
            if($('input.groupheader[type=checkbox]:checked').length > 1) {
                alert('Please check only Estimate or Gatepass');
                return false;
            }

            var data = new Object();
            $('input.groupheader[type=checkbox]:checked').each(function(){
                data.header = this.value;
            });

            data.fields = new Array();
            $header = 'input.group'+data.header;
            $($header+'[type=checkbox]:checked').each(function(){
                data.fields.push(this.value);
            });

            var dataString = $.toJSON(data);
            $.post('json.php',
                   {data: dataString}, 
                   function(res){ 
                       var obj = $.evalJSON(res); 
                       $('input[name=query]').val(obj.query);
                   }
            );  
            alert($('input[name=query]').val()); //alerts nothing or the old value :(

            return false;
        });

      });
  </script> 
```

-------------HTML PART-------------------

```
<form action="?<?php echo http_build_query(cloneGet(array("server-page"=>$GLOBALS["setting"]["current_folder"], "currpage"=>"0","OrderBy"=>"","ByDirect"=>"","search_flg"=>"-1")));?>" method="post" id="" name="">
    <div id="extraSearch">
        <table class="stripe" width="100%" id="extraTableList">
            <tbody>
                <tr class="striped">
                    <th style="cursor:pointer;text-align:left;"><input type="checkbox" name="estimate" value="estimate" checked="checked" class="groupheader">Estimates</th>
                    <th style="cursor:pointer;text-align:left;"><input type="checkbox" name="gatepass" value="gatepass" class="groupheader">Gatepass</th>
                </tr>
                <tr>
                    <td class="int"><input type="checkbox" name="estimate1" value="customer" class="groupestimate">Customer</td>
                    <td class="int"><input type="checkbox" name="gatepass1" value="old_serial" class="groupgatepass">Old Serial</td>
                </tr>
                <tr>
                    <td class="int"><input type="checkbox" name="estimate2" value="serial_no" class="groupestimate">Serial No</td>
                    <td class="int"><input type="checkbox" name="gatepass2" value="type" class="groupgatepass">Type</td>
                </tr>
                <tr>
                    <td class="int"><input type="checkbox" name="estimate3" value="invoice_no" class="groupestimate">Invoice No</td>
                    <td class="int"><input type="checkbox" name="gatepass3" value="type_id" class="groupgatepass">Type ID</td>
                </tr>
                <tr>
                    <td class="int"><input type="checkbox" name="estimate4" value="salesman" class="groupestimate">Salesman</td>
                    <td class="int"><input type="checkbox" name="gatepass4" value="loader" class="groupgatepass">Loader</td>
                </tr>
                <tr>
                    <td class="int"><input type="checkbox" name="estimate5" value="estimate_no" class="groupestimate">Estimate No</td>
                    <td class="int"><input type="checkbox" name="gatepass5" value="total" class="groupgatepass">Total</td>
                </tr>
                <tr>
                    <td class="int"><input type="checkbox" name="estimate6" value="status" class="groupestimate">Status</td>
                    <td class="int">&nbsp;</td>
                </tr>
             </tbody>
         </table>
    </div>
    <img id="searchicon" src="___images/search-arrow.png" class="toappear" alt="Extra search" title="Extra search"/>
    <img id="searchicon2" src="___images/search-arrow.png" class="appear" alt="Extra search" title="Extra search"/>

      <input type="text" value="<?php echo $_REQUEST['quicksearch'];?>" id="s" name="quicksearch">
      <input type="hidden" value="" id="query" name="query" temp="">
      <input type="submit" value="Search" id="b">

<?php if( $_REQUEST['quicksearch'] ) { ?>
      <a id="c" href="?<?php echo http_build_query(cloneGet(array("quicksearch"=>"","search_flg"=>"-1")));?>">Cancel</a>
<?php } ?>  

    </form> 
```

As you can see, before it submits the values I want to insert a string into the 'query' input element value attribute. It works perfectly when doing it inside the callback of $.post but after checking it using alert() outside the $.post its empty.

Is $.post always like that?or am I missing something?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:03:14.287

当您使用**$.post**时，它正在发出**异步请求**。警报将不包含任何内容或旧值的原因是因为它**在 $.post 完成**其请求之前被触发。 **当警报放置在 $.post 回调中时，它将包含您想要的数据，因为它是在 $.post 完成后调用的**

# php - PHP OO 设计：扩展静态类还是实例类？

> ID：13207143
> 
> 赞同：0
> 
> 时间：2012-11-03T07:47:36.153
> 
> 标签：php, oop, inheritance, static

我有一个应用程序，它定义了对常见对象类型的某些操作。

例如，您可以拥有论坛帖子和图片。对于每个论坛帖子和图片，您可以执行以下操作：推荐、评论、评分。

我目前已经定义了一个静态类

```
class CoreObjectUtil
{
    protected static $_objObjKey  = null;
    protected static $_objTypeKey = null;

    public static function getComments (...) {...}
    public static function getCommentsArray (...) {...}
    public static function getRatings (...) {...}
    public static function getRatingsArray (...) {...}
} 
```

然后像这样子类化

```
class ForumPostUtil extends CoreObjectUtil
{
    protected static $_objObjKey  = 'forumpost';
    protected static $_objTypeKey = 'FP';
} 
```

为论坛帖子提供相关功能。这 2 个参数足以让 CoreObjectUtil 中的通用代码知道对这些函数适用的每个对象类型要做什么。

要使用这些函数，我在我的实例类中调用 selectPostProcess() 类，如下所示：

```
public function selectPostProcess ($data)
{
    $data = ForumPostUtil::mergeRatings ($data);
    $data = ForumPostUtil::mergeComments ($data);
    ...
} 
```

这很好用，并且将主要代码集中在 CoreObjectUtil 类中，其子类提供数据设置，让 CoreObjectUtil 中的代码知道该做什么。

另一种方法是将代码从 CoreObjectUtil 移动到基实例类中，然后在我的实例类中继承。因此，我不会从 CoreObjectUtil 调用静态方法，而是像 $this->getComments() 这样的方法调用。

从功能类型的角度来看，这两种方法都可以正常工作。然而，我想知道面向对象的设计指南和经验丰富的面向对象开发人员如何看待这两种方法。哪种方式更可取，为什么？

我将不胜感激有关此事的任何想法/见解。我可以毫无问题地编码任何一种方式，但我很难决定采取哪条路线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:33:23.963

我认为，您现在拥有的代码是有史以来最程序化的方法，即您现在拥有的是 OOP 的另一面。使用 class 关键字不会使其成为 OOP。

首先，您应该忘记静态，并不是说它不好用，而是它很容易被滥用，如果该功能可以属于对域概念建模的对象（在您的情况下与论坛相关），您真的必须首先尝试。只有当它以这种方式没有意义时，你才会将它作为一个静态方法放在实用程序类的某个地方。

说实话，您必须围绕 OOP 思维重新设计您的应用程序，即定义具有行为的类，这些行为建模特定概念或过程并且只有一个责任。此外，您不应该将业务对象（对论坛概念建模的对象）与持久性问题混为一谈，即不要将相同的对象业务功能和数据库访问。使用单独的类来访问存储。

使用存储库模式将业务层与持久层分开。尽量不要将创建/更新功能与查询混合在一起，如果它使事情变得复杂。在这种情况下，使用专门用于查询的单独读取模型。

您向我们展示的代码是关于查询的。您可以像这样拥有一个简单的 DAO/Repository（在这种情况下可以随意调用它）

```
 class ThreadViewData
 {
    public $Id ;
    public $Title;
    public $Comments; //etc
 }

  class ThreadsQueryRepository
  {
      //we inject the db access object , this helps with testing
      function _construct($db) { } 
       public function GetThread($id){ } //this returns a ThreadViewData
  } 
```

postPROcess 功能是一种可以合并评分和评论的服务。但也许合并功能更适合 Rating 和 Comment 对象。我不知道实际给出有效建议的域。

重点是，你必须考虑对象而不是函数，而现在你所拥有的只是函数。

# javascript - 从 Backbone 集合更新项目视图添加

> ID：13207145
> 
> 赞同：1
> 
> 时间：2012-11-03T07:47:52.763
> 
> 标签：javascript, backbone.js, inversion-of-control, underscore.js

我有一个`ListView`列表`ItemView`。`ListCollection`用作的**集合**。`ListView`现在，如果我得到额外的新集合（例如列表中的更多项目）并`add()`进入`ListCollection`，我应该如何在事件发生后总体上**呈现列表**`add`？

1.  我应该这样做`collection.add(newCollection)`吗？然后循环通过`newCollection`模型添加模型，同时`ItemView`绑定到模型的`add`事件进行渲染？

2.  或者我应该遍历每个模型`newCollection`以创建新模型，然后添加到`ListCollection`？每个循环都有调用`ItemView.render()`

我不想做的是重新渲染整个 ListView 效率太低了。

让我知道这两个或第三个之间是否有一个好的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T05:03:11.237

我想出了使用**LayoutManager**并将这个事件绑定`addOne`从`initialize`

```
this.collection.on("add", this.addOne, this); 
```

该`addOne`功能将基本上`insertView`从**LayoutManager使用**

```
this.insertView(new ItemView({model: model})).render(); 
```

就这么简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T17:00:58.100

处理此问题的最佳方法是让您为模型添加项目视图的过程与对集合的循环分开。然后，您可以从初始渲染、循环时以及“添加”事件中调用相同的函数。

```
 ItemView = Backbone.View.extend({
  // ...
});

ListView = Backbone.View.Extend({

  initialize: function(){
    this.collection.on("add", this.addItemView, this);
  },

  addItemView: function(item){
    var view = new ItemView({
      model: item
    });
    view.render();

    this.$el.append(view.$el);
  },

  render: function(){
    this.collection.each(this.addItemView);
  }

}); 
```

FWIW，MarionetteJS 为您处理所有这些：

```
 ItemView = Marionette.ItemView.extend({
  template: "#some-template"
});

CollectionView = Marionette.CollectionView.extend({
  itemView: ItemView
});

var cv = new CollectionView({
  collection: someCollection
});

cv.render(); 
```

[您可以在http://marionettejs.com](http://marionettejs.com)找到有关 Marionette 的更多信息

# java - Java Code to run Mac Terminal command to Tweak JVM memory

> ID：13207149
> 
> 赞同：0
> 
> 时间：2012-11-03T07:48:48.200
> 
> 标签：java, jvm

I am developing a Application using JavaFx 2.2.3 and jdk 1.7.0_09.This application will run on Windows, and Mac Osx. The problem is I am getting Out-Of-Memory. I know -Xms and -Xmx are used to tweak JVM memory. But requirement is we have to set JVM memory using java code as This is a desktop application so we can't tweak JVM on every system.

Now I find a solution for windows

proc = Runtime.getRuntime().exec("cmd.exe /c java -Xms250m -Xmx1024m -jar \"application.jar\" /n");

By using this code i can increase JVM memory before starting my Application jar. But this is a solution for Windows only.

Can any one tell similar kind of code For Mac.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:00:17.223

首先，您需要找到安装 java 的位置。Apple 的这份文档解释了如何做到这一点 - [http://developer.apple.com/library/mac/qa/qa1170/_index.html](http://developer.apple.com/library/mac/qa/qa1170/_index.html)

字符串 JAVA=...

proc = Runtime.getRuntime().exec(JAVA+ " -Xms250m -Xmx1024m -jar "application.jar");

所以让我们假设Java在'/usr/bin/java'，那么：

proc = Runtime.getRuntime().exec("/usr/bin/java -Xms250m -Xmx1024m -jar application.jar");

请注意，如果您需要从 'proc' 捕获输出，则可以执行以下操作：

```
DataInputStream in = new DataInputStream(proc.getInputStream());
while ((ls_str = ls_in.readLine()) != null) {
  // Do something with the output from proc
  System.out.println(ls_str);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T08:23:55.690

您不能为已经运行的 JVM 增加内存。标准方法是提供添加 JVM 参数的启动脚本。或者如果你使用webstart，我认为堆大小可以在jnlp文件中配置。

# java - Thread safe method and stack

> ID：13207155
> 
> 赞同：1
> 
> 时间：2012-11-03T07:49:04.120
> 
> 标签：java

StringBuffer class having methods which are thread safe? OK but i have question that when the particular method will be called then it will be loaded on to stack and stack is thread safe so why we need the thread safe method?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T07:51:06.060

It's quite possible to share a given `StringBuffer` instance across different threads in which case multiple threads will end up "modifying" or mutating the `StringBuffer`'s internal state. This is why it's required to explicitly synchronize `append` methods on a `StringBuffer`.

But you are right. If you don't plan on sharing stuff across thread boundaries (or like they call "publish" the instance), it is more logical to just create a `StringBuilder` instance (which is the non-synchronized brother of `StringBuffer`) in a given method call and throw it away (or more like let the GC take care of it) after the method call ends.

There is another aspect which comes into play when you absolutely have to share instances across threads and at the same time feel that the cost of synchronizing each operation is way too much -- thread locals. Basically, the idea in this case is to make each thread have its own copy of a "mutable" entity. There is no locking required because the moment some other thread tries to access a thread local variable, you hand across a fresh/pre-configured instance. This is commonly used for stuff like sharing `StringBuilder` and `DateFormat` instances to boost performance.

If you want to compare between raw/unsafe sharing of a mutable object between threads versus using a thread local, take a look at the [snippet I have hosted on Bitbucket](https://bitbucket.org/sanjayts/java-snippets/src/710015c880281f9f14b4e442c49b4b398cea79f6/src/main/net/sanjayts/snippets/threading/ThreadLocalTest.java?at=default).

# java - 在 java 中编译井字游戏程序时，会创建一个 ($ name appended).class

> ID：13207167
> 
> 赞同：0
> 
> 时间：2012-11-03T07:50:20.850
> 
> 标签：java

在编译井字游戏的代码以及使用 swing 和 awt 包在 java 中运行一些代码时。我得到了一个附加的类文件生成，与 ClassName.class 文件平行。可能是什么原因？它是否由于 ActionListeners 的使用而发生。通常在执行涉及结构的 C 程序时会生成此类 .bak 文件的创建。

这两种情况需要支持。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T07:53:36.940

名称中包含的类文件`$`不过是您可能在顶级类中使用过的`inner classes`or 。`anonymous inner classes`

例如，如果您有这样的类声明：-

```
public class A {
    public class B {
    }
} 
```

然后您将生成两个类文件： -`A.class`和`A$B.class`. `class B`这显示了里面的遏制`class A`。

如果`ActionListener`发生这种情况，请在您的代码中。

**更新： -**

如果您正在使用`anonymous inner class`，那么您还将获得其中的类名`$`：-

```
interface A {
   public void show();
}

public class Foo {
    public static void main(String[] a) {

        new A() {
            @Override
            public void show() {
                System.out.println("Hello");
            }
        }.show();
    }
} 
```

然后生成的类文件将是： -`Foo.class`和`Foo$1.class`.

因此，如果您将`ActionListener`其用作匿名内部类，那么您也会`$`以您的`class file`名义获得 that `anonymous inner class`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T07:56:19.133

是的，Java 编译器会将`Bar`“主”`Foo`类的内部类编译为 Foo$Bar...

那是：

```
class Foo {
   class Bar {
   }
} 
```

会创造`Foo.class`和`Foo$Bar.class`

你为什么要问？我的意思是，真正的问题是什么？

干杯。基思。

# iphone - How to change the color and font size UIWebview

> ID：13207173
> 
> 赞同：4
> 
> 时间：2012-11-03T07:51:21.413
> 
> 标签：iphone, ios, uiwebview

In my application I am loading HTML String which is parsed from the json file the string already contain font color and font size but I need to change the color and size of the font. To replace that I have already use the followings code but its not working

```
NSString *webString = [[NSString alloc] initWithFormat:@"document.getElementsByTagName('body')[0].style.webkitTextSizeAdjust= '%d%%'", 
                          textFontSize];
    [web stringByEvaluatingJavaScriptFromString:webString]; 
```

Is there is any other way to change it.If yes means please suggest me the answer.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T08:57:39.923

尝试这个，

```
[webView  loadHTMLString:[NSString stringWithFormat:@"<div id ='foo' align='justify' style='font-size:14px; font-family:helvetica; color:#ffffff';>%@<div>",yourString] baseURL:nil]; 
```

它可能会帮助你....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-01T06:01:52.207

您可以在 webview 的委托`webViewDidFinishLoad`方法中尝试这个 java 脚本

```
NSString *setTextSizeRule = [NSString stringWithFormat:@"addCSSRule('body', '-webkit-text-size-adjust: %d%%;')", currentTextSize];

NSString *changeColor = [NSString stringWithFormat:@"addCSSRule('html, body, div, p, span, a', 'color: #000000;')"];

[webView stringByEvaluatingJavaScriptFromString:setTextSizeRule];
[webView stringByEvaluatingJavaScriptFromString:changeColor]; 
```

您可以在 webview 的 done 加载方法中使用 java 脚本进行很多更改。

如果您仍然无法解决，请告诉我

# ruby-on-rails - How to enable development mode or display errors in ruby on rails

> ID：13207176
> 
> 赞同：1
> 
> 时间：2012-11-03T07:51:54.387
> 
> 标签：ruby-on-rails, ruby, hosting

When I browse the site I get:

```
We're sorry, but something went wrong. 
```

as I've seen its a `500.html` file, so its some internal server error, but how can I make display those errors?

I've tried this:

1) putting `ENV['RAILS_ENV'] ||= 'development'`in environment.rb, but nothing happened

2) `config.log_level = :any`, then looked at the production.log, but there is not 500 errors

Or what I need to write in the 500.html to see errors?, or just display it no matter how.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T08:59:35.960

您的日志文件（无论它们写在哪里）都应该包含您的错误。

如果您仍然想在浏览器中查看错误，您可以在 environment/production.rb 中更改以下内容（但将其视为临时解决方法）。确保将其切换回来。

`config.consider_all_requests_local = true`

# wcf - OutOfMemory exception when large number of records is sent from WCF to Silverlight

> ID：13207177
> 
> 赞同：1
> 
> 时间：2012-11-03T07:51:55.913
> 
> 标签：wcf, silverlight, gzip, out-of-memory

I have a Silverlight application in which I call my WCF service to get data from the database. If there is a small number of records then it's working fine, but if there are many records then it throws a System.OutOfMemory exception.

I have traced it in a WCF error log file. Are there any ways to compress the data which is coming from WCF to the Silverlight application?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:28:17.887

在您的服务 Web 配置中，在服务行为和端点行为中添加此项。然后它可以传输高达 2 GB 的数据。

```
 <dataContractSerializer maxItemsInObjectGraph="2147483647"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T12:33:29.893

U can use IIS dynamic compression for WCF messages. Read next threads/articles:

[Enabling dynamic compression](http://www.hanselman.com/blog/EnablingDynamicCompressionGzipDeflateForWCFDataFeedsODataAndOtherCustomServicesInIIS7.aspx)

[GZip compression with WCF hosted on IIS7](https://stackoverflow.com/questions/1735088/how-to-enable-iis-compression-for-wcf-services)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:06:42.010

一次传输 500,000（半百万）条记录对于您的系统来说太大了，无法处理。我还要说您的用户无法处理太多。

您应该将其分解为数据页，并且一次只返回几页。Silverlight/WCF (RIAServices) DomainDataService 可以为您处理所有这些：

```
<riaControls:DomainDataSource QueryName="GetResults"
                              LoadSize="200"
                              PageSize="100"
                              AutoLoad="True"/> 
```

您将分页器控件添加到页面以在用户控制下的数据页面中移动。

这使您的应用程序更具响应性，因为您每次只返回少量数据。一次性返回 500,000 条记录也很可能导致连接速度较慢的人超时。

我还建议您考虑过滤数据，以便只返回用户感兴趣的数据。

# windows - 使用 Windows bat 脚本中的变量控制 while 循环的开始和结束

> ID：13207183
> 
> 赞同：0
> 
> 时间：2012-11-03T07:52:50.400
> 
> 标签：windows, batch-file

我可以像这样在 DOS 批处理文件中执行 while 循环：

```
@REM initialize test value to be "true"
@SET intCounter=1

:while

@REM test condition
@IF %intCounter% GTR 10 (GOTO wend)

@REM procedure where condition is "true"
@echo %intCounter%

@REM set new test value
@SET /a intCounter=intCounter+1

@REM loop
@GOTO while

:wend

@PAUSE 
```

这将循环十次。我的问题有两个方面。

1.  我怎样才能控制循环的结束。我试过 set end =1 并用 %end% 替换 10，这不起作用。

2.  如何从键盘读取输入并将它们设置为 iniCounter 并结束。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T08:01:35.787

我不知道你做了什么，但是

```
@set end=5
:while
@IF %intCounter% GTR %end% (GOTO wend) 
```

确实有效，或者

```
@set /p end="Enter the end:" 
```

如果您希望它由用户输入

而且由于您的问题被标记为“windows”，因此您可能会更好

```
set /p start="From:"
set /p end="To:"
for /l %%i in (%start%, 1, %end%) do (
    echo %%i
) 
```

# php - 如何根据点击的链接使用 PHP MySQL 动态生成网页

> ID：13207184
> 
> 赞同：0
> 
> 时间：2012-11-03T07:53:04.320
> 
> 标签：php, mysql, get

我以前问过这个问题，但需要更多帮助。阅读此内容，然后我将在最后提供确切的详细信息。

我已经成功地将我为我的播客 (www.noformatpodcast.com) 构建的静态网站转换为 Dreamweaver 中的动态网站（目前在测试服务器上）。通过使用 Dreamweaver 中的“数据库”、“绑定”和“服务器行为”选项卡，我无需真正学习 PHP 或 MySQL 就可以做到这一点。我唯一无法弄清楚的是，当有人单击链接时，如何使用有关该链接的信息来创建页面时动态生成页面。例如，我在 index.php 页面上有一个动态生成的剧集网格。当有人单击第 55 集的链接时，我希望它加载第 55 集的页面（我已经创建）并填写第 55 集的信息，例如日期、标题、简介等。如果有人单击链接第43集，

我得到的答案都告诉我，我需要学习如何使用 $_GET。我已经在 w3schools.com 上查看了它的基础知识，但仍然需要很多帮助。这是我的动态重复代码块，它在我的 index.php 页面上制作剧集网格

```
<div id="post_container">
    <?php do { ?>
        <div id="post">
            <a href="episode.php" onmouseout="this.style.opacity=1;" onmouseover="this.style.opacity=0.7;">
                <h2>
                    <span class="darkblock"><?php echo $row_Episodes['post_id']; ?> | <?php echo $row_Episodes['ep_title']; ?>
                    </span>
                </h2>
                <img src="ep_artwork/ep_<?php echo $row_Episodes['post_id']; ?>.jpg"  width="260" height="260" />
            </a>
        </div>
    <?php } while ($row_Episodes = mysql_fetch_assoc($Episodes)); ?>
</div> 
```

所以基本上我有一堆大的方形图像，它们是指向 episode.php 页面的链接。我还编写了 episode.php 页面以动态显示数据：

```
<div id="summary">
    <div id="artwork">
        <img src="ep_<?php echo $row_Episodes['post_id']; ?>.jpg" width="260" height="260" />
    </div>
    <div id="ep_title">Ep. <?php echo $row_Episodes['post_id']; ?> | <?php echo $row_Episodes['ep_title']; ?>
    </div>
    <p class="episode_date"><?php echo $row_Episodes['ep_date']; ?>
    </p>
    <p><?php echo $row_Episodes['ep_blurb']; ?>
    </p>
</div>
<audio src="ep_media/ep_<?php echo $row_Episodes['post_id']; ?>.m4a" controls="controls">
</audio> 
```

我缺少的是将这两件事粘合在一起的代码。我的意思是，就目前而言，如果您单击任何一集，它只会将您带到 episode.php 页面并显示第一集的信息（因为它是数据库中的第一集）。我需要让它显示点击的情节的信息。我猜这涉及到使用 $_GET。有人可以确切地告诉我我需要包含哪些代码，以及在哪里包含它？我在这里发布的内容是否足够？或者您是否还需要了解有关我的 MySQL 数据库的更多信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:14:17.247

为此，使用**`apache rewrite module`** 此模块将帮助您重写 url，然后将您的请求转发到指定的脚本。

请参阅下面如何使用`.htaccess`文件重写 url。

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

现在您所要做的就是解析数据库**`$_SERVER['REQUEST_URI']`**，然后与**数据库**交互以获取所需的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T08:14:34.607

有很多解决方案，但我认为最简单的方法是在您的第一页（网格页面或 index.php）中，您将链接设置如下：

```
<div id="post_container">
    <?php do { ?>
        <div id="post">
            <a href="episode.php?episodeID=<?php echo $row_Episodes['post_id'] ?>" onmouseout="this.style.opacity=1;" onmouseover="this.style.opacity=0.7;">
                <h2>
                    <span class="darkblock"><?php echo $row_Episodes['post_id']; ?> | <?php echo $row_Episodes['ep_title']; ?>
                    </span>
                </h2>
                <img src="ep_artwork/ep_<?php echo $row_Episodes['post_id']; ?>.jpg"  width="260" height="260" />
            </a>
        </div>
    <?php } while ($row_Episodes = mysql_fetch_assoc($Episodes)); ?>
</div> 
```

然后在您的 episode.php 页面中，您应该使用

```
$_GET['episodeID']; 
```

建议的代码是：

```
$postID = $_GET['episodeID'];

// WRITE CODE TO GET CORRESPONDING TITLE, DATE, BLURP, AND OTHER INFO FROM THE DATABASE FOR THE SUBMITTED POST ID
// ASSUME THIS TITLE IS SAVED TO $postTitle, $postDate, $postBlurp, ...etc.

<div id="summary">
    <div id="artwork">
        <img src="ep_<?php echo $postID; ?>.jpg" width="260" height="260" />
    </div>
    <div id="ep_title">Ep. <?php echo $$postID; ?> | <?php echo $postTitle; ?>
    </div>
    <p class="episode_date"><?php echo $postTitle; ?>
    </p>
    <p><?php echo $postBlurp; ?>
    </p>
</div>
<audio src="ep_media/ep_<?php echo $postID; ?>.m4a" controls="controls">
</audio> 
```

您还必须确保您的代码安全。但这就是它背后的想法。

我的建议是学习 php 和 mysql 以使生活更轻松。

干杯。

# python - 我如何让 Python 显示所有可能的余数，而不是仅显示数字最大倍数的余数？

> ID：13207188
> 
> 赞同：0
> 
> 时间：2012-11-03T07:53:48.213
> 
> 标签：python

如果可能的话，我想找到一种方法来查看所有可能的剩余部分。

作为一个例子，而不是 34%5 只产生 4 我想实现一个方法来产生所有可能的余数列表 [29, 24, 19, 14, 9,4]

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T07:56:20.290

您可以使用该`range`功能。

```
>>> print(list(range(34, 0, -5)))
[34, 29, 24, 19, 14, 9, 4] 
```

（虽然只有 4 是余数。只有一个真正的余数。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T08:02:13.987

数学 101 遇到了一个生成器：

```
def all_remainders(num, denom):
  value = num
  yield value # we want the original number 
  while value >= denom:
    value -= denom
    yield value 
```

它有效吗？

```
>>> list(all_remainders(34, 5))
[34, 29, 24, 19, 14, 9, 4]
>>> list(all_remainders(34, 17))
[34, 17, 0]
>>> _ 
```

我希望你明白其中的逻辑。

`range`@dietrich-epp的基于 - 的解决方案也是如此，只是使用了一个标准函数。

我不确定您所说的重复功能应用到底是什么意思；这是我的猜测。如果您想将相同的功能应用于其自己的输出，您可以执行以下操作：

```
result = []
for remainder in all_remainders(34, 5):
  for nested_remainder in all_remainders(remainder, 3):
    result.append(nested_remainder)

print result 
```

但这会打印出很多重复的数字。您可以使用 a `set`，甚至将整个内容写在一个语句中（称为“生成器理解”）：

```
result = set(nested_remainder 
    for remainder in all_remainders(34, 5) 
    for nested_remainder in all_remainders(remainder, 7)
)

print result 
```

太糟糕了，结果不会很有趣。

如果您解释了您要解决的问题，我们可能会提供更好的解决方案。

# django - Django - 保存过滤对象时遇到问题

> ID：13207189
> 
> 赞同：0
> 
> 时间：2012-11-03T07:53:56.810
> 
> 标签：django, django-forms

对于我的第一个 Django 项目，我正在尝试制作一个应用程序，该应用程序允许用户创建媒体列表（书籍、电影等），其中包含描述每个对象（标题、作者等）的各种字段，但我无法确定出如何让它保存。也就是说，提交表单时什么也没有发生。有人可以告诉我我做错了什么吗？对不起，如果这是一个菜鸟问题；好像我在这里错过了一些非常基本的东西。（我使用的是基本的 HTML 表单而不是 ModelForms，因为对于某些媒体类型，我想忽略某些字段 - 例如电影的“作者” - 但如果有一种使用 ModelForms 的简单方法，我会全力以赴。）

从`views.py:`

```
def editbook(request,list_owner,pk):
    book_list = Item.objects.all().filter(item_creator=list_owner).filter(category='book').order_by('type','name')  
    item_to_edit = Item.objects.get(pk=pk)
    if request.method == 'POST':
        item_to_edit.save()
        return render_to_response('books.html', {'booklist': book_list, 'listowner': list_owner}, RequestContext(request))
    else:
        form=EditItem()
        return render_to_response('editbook.html', {'listowner': list_owner, 'item_to_edit': item_to_edit}, RequestContext(request)) 
```

来自models.py：

```
CATEGORY_CHOICES = (
    ('book','book'),
    ('tv','tv'),
    ('movie','movie'),
    ('game','game'),
    ('music','music'),
)

class Item(models.Model):
    item_creator = models.CharField(max_length=30) # user name goes here
    category = models.CharField(max_length=5, choices=CATEGORY_CHOICES)
    name = models.CharField(max_length=70)
    created = models.DateTimeField(auto_now_add=True)
    modified = models.DateTimeField(auto_now=True)  
    artist = models.CharField(max_length=70, blank=True)
    type = models.CharField(max_length=50, blank=True)
    progress = models.CharField(max_length=10, blank=True)
    finished = models.BooleanField(default=False)
    rating = models.IntegerField(default=0, blank=True, null=True)
    comment = models.CharField(max_length=140, blank=True)
    def __unicode__(self):
        return self.name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:20:55.243

当然，有一种方法可以只使用模型表单中的某些字段：正如[在表单中使用字段子集中](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#using-a-subset-of-fields-on-the-form)完整记录的那样，您可以在表单的 Meta 类中使用`fields`or`exclude`属性。

但是，正如 szaman 指出的那样，您仍然需要将 POST 数据传递给表单并检查其有效性，此外，您还需要`instance`在更新现有实例时传入参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T08:14:06.050

我看到的是您从数据库中获取对象并且提交表单时不仅仅是保存对象，但是您没有更新任何字段，因此您看不到 db.xml 中的更改。试着做：

```
if request.method == "POST":
        form = MyForm(request.POST)
        logging.info("form.is_valid() %s" % form.is_valid())
        if form.is_valid():
            item_to_edit.name = form.cleaned_data['name']
            item_to_edit.save()
... 
```

# java - 在java中复制文件

> ID：13207195
> 
> 赞同：4
> 
> 时间：2012-11-03T07:54:58.627
> 
> 标签：java, file, inputstream, fileinputstream

你能告诉我为什么这个字符“ **ÿ** ”出现在我的输出文件的末尾。（我使用 try/catch）

```
 File f1 = new File("C:/Users/NetBeansProjects/QuestionOne/input.txt");
        File f2 = new File("C:/Users/NetBeansProjects/QuestionOne/output.txt");
        fin = new FileInputStream(f1);
        fout = new FileOutputStream(f2);

        do {
            i = fin.read();
            fout.write(i);

        } while (i != -1); 
```

该代码复制了文件内容，但它以这个奇怪的字符结束。我必须包含整个代码吗？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-03T07:58:17.493

`fin.read()`当没有内容可读取时，该方法返回 -1；但是您实际上是在将 -1 写入`fout`，即使它没有出现在`fin`. 它显示为那个ÿ字符。

编写循环以避免此问题的一种方法是

```
 while((i = fin.read()) != -1 ){
        fout.write(i);
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T07:58:00.690

因为最后`fin.read()`不会读任何东西。根据[JavaDoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileInputStream.html#read%28%29)，它会返回`-1`，因此你`fout.write(i)`会写那个`-1`。你会做这样的事情来纠正这种行为：

```
do {
  i = fin.read();
  if (i>-1) //note the extra line
   fout.write(i);
} while (i != -1); 
```

或者改成`do .. while`电话`while .. do`。

我建议您还应该看看新的`NIO`API，它的性能比一次传输一个字符要好得多。

```
File sourceFile = new File("C:/Users/NetBeansProjects/QuestionOne/input.txt");  
File destFile = new File("C:/Users/NetBeansProjects/QuestionOne/output.txt");   

FileChannel source = null;                                                      
FileChannel destination = null;                                                 

try {                                                                           
    if (!destFile.exists()) {                                                   
        destFile.createNewFile();                                               
    }                                                                           
    source = new FileInputStream(sourceFile).getChannel();                      
    destination = new FileOutputStream(destFile).getChannel();                  
    destination.transferFrom(source, 0, source.size());                         
} catch (IOException e) {                                                       
    System.err.println("Error while trying to transfer content");               
    //e.printStackTrace();                                                      
} finally {                                                                     
    try{                                                                        
    if (source != null)                                                         
        source.close();                                                         
    if (destination != null)                                                    
        destination.close();                                                    
    }catch(IOException e){                                                      
        System.err.println("Not able to close the channels");                   
        //e.printStackTrace();                                                  
    }                                                                           
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-03T08:08:31.217

尝试使用 Java 7 中引入的新 Files 类

```
public static void copyFile( File from, File to ) throws IOException {
    Files.copy( from.toPath(), to.toPath() );
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T08:04:35.563

或者您可以在 fout 之前简单地检查 if(i != -1)

```
do {
    i = fin.read();
    if(i != -1)
    fout.write(i);
   } while (i != -1); 
```

# javascript - 为什么要使用#！而不是 # 在 Ajax 请求中？

> ID：13207200
> 
> 赞同：0
> 
> 时间：2012-11-03T07:55:45.293
> 
> 标签：javascript, ajax, browser-history

> **可能重复：**
> [Facebook 和新 Twitter URL 中的 shebang/hashbang (#!) 是什么？](https://stackoverflow.com/questions/3009380/whats-the-shebang-hashbang-in-facebook-and-new-twitter-urls-for)

我在几个使用 Ajax 请求加载页面的基于 Web 的应用程序中看到，它们`#!`在 urls 之后使用而不是`#`. 例如：`/boo.php#!Projects`而不是`/boo.php#Projects`.

我想知道，这样做是否有任何技术原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:00:11.980

这是因为 hashbang/shebang ( `#!`) 是 Google 用于索引 AJAX 页面的方案：

> 当您的网站采用该方案时，将被视为“AJAX 可抓取”。这意味着如果您的网站提供 HTML 快照，爬虫将看到您的应用程序的内容。

更多关于[谷歌开发者](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T08:01:48.297

这被称为“hashbang”。Google 使用它来索引基于 Ajax 的网站。那里有更多信息 - [http://www.fakingfantastic.com/2011/02/09/using-hash-bangs-in-your-urls/](http://www.fakingfantastic.com/2011/02/09/using-hash-bangs-in-your-urls/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T08:07:48.940

目的是使 AJAX 页面可以被 Google 等抓取。

通常，URL 中散列后面的所有内容都与爬虫无关，根本不会发送到服务器。在 AJAX 应用程序中，它曾经被大量用于“模拟”浏览器地址栏中的真实 URL（现在人们通常使用`history.pushState`.

为了解决不能执行完整 JavaScript 应用程序的限制，Google 发明了一种协议，该协议基本上规定如果遇到包含类似 hashbang 的 URL

```
http://example.com/foo#!key=value 
```

它可以将其转换为

```
http://example.com/foo?_escaped_fragment_=key=value 
```

并将其发送到服务器。然后，服务器应返回页面的表示，就像它在 JavaScript 应用程序中显示的那样。最后，让这些应用程序可抓取只是一个惯例。

有关详细信息，请参阅Google提供的[有关该主题的文档。](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)

# ruby - 使用 ruby 和 capybara 获取图像文件

> ID：13207201
> 
> 赞同：0
> 
> 时间：2012-11-03T07:55:51.180
> 
> 标签：ruby, selenium, webkit, capybara, capybara-webkit

它是capybara通过HTTPS协议访问的页面上的图片标签：

```
<img src="path"> 
```

有什么方法可以使用带有任何类型的驱动程序的水豚从页面获取图像文件？

我不能使用像 File.read('path') 这样的东西，因为图像也只能通过 HTTPS 访问。我最近的研究让我找到了这样的解决方案：

1.  访问页面
2.  将页面保存为 png（webkit 驱动程序有这种有用的能力）
3.  裁剪图像

但我**确实相信**存在漂亮的解决方案。

**编辑1：**

我已经尝试过 padde 的解决方案，但这里是响应正文：

```
<html><head><title>Object moved</title></head> 
    <body>
        <h2>Object moved to <a href=\"/Bledy/Blad404.aspx?aspxerrorpath=/CaptchaType.ashx\">here</a>.</h2> 
    </body>
</html> 
```

**编辑2：**

```
> curl -I image_path

5860cf30abf5d5480
HTTP/1.1 302 Found
Cache-Control: private
Content-Length: 168
Content-Type: text/html; charset=utf-8
Location: /Bledy/Blad404.aspx?aspxerrorpath=/CaptchaType.ashx
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Sat, 03 Nov 2012 17:18:55 GMT 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T14:41:25.957

如果我做对了，您可能想要的是来自 Ruby 的 HTTPS 请求。尝试：

```
require 'net/https'

url = URI.parse('path')

Net::HTTP.start(url.host, url.port, :use_ssl => true, :verify_mode => OpenSSL::SSL::VERIFY_NONE) do |http|
  res = http.get(url.request_uri)
  open("image.png", "wb") do |f|
    f.write(res.body)
  end
end 
```

对于裁剪，您可以使用[`chunky_png`](https://github.com/wvanbergen/chunky_png)（纯 Ruby）或[`rmagick`](http://rmagick.rubyforge.org)（需要 ImageMagick）

**编辑：**如果你想跟随重定向，你可以做

```
require 'net/https'

def process_image( content )
  # do your cropping here

  open("image.png", "wb") do |f|
    f.write(content)
  end
end

def fetch( url )
  Net::HTTP.start(url.host, url.port, :use_ssl => true, :verify_mode => OpenSSL::SSL::VERIFY_NONE) do |http|
    response = http.get(url.request_uri)
    case response.code
    when Net::HTTPRedirection
      fetch response['location']
    else
      process_image response.body
    end
  end
end

fetch URI.parse('path') 
```

# iphone - 从 iphone 应用程序中的自定义单元格调用方法

> ID：13207208
> 
> 赞同：0
> 
> 时间：2012-11-03T07:56:42.580
> 
> 标签：iphone, uibutton, custom-cell

我有一个视图控制器
名称：FirstVC

我在那个视图控制器中有表格视图。在我的表格视图中，我加载了一个自定义单元格。在我的自定义单元格中有 1 个标签和 1 个按钮。我从 FirstVC 设置标签以及自定义单元格的按钮。请参见下面的代码。

在 FirstVC.h 中

```
@interface FirstVC : UIViewController <UITableViewDataSource, UITableViewDelegate>
{
    IBOutlet UITableView *TblView;
    IBOutlet CustomCell *customCell;
}
- (void)addCounter:(NSInteger)pCat_ID;

@end 
```

在 FirstVC.m

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
        static NSString *cellIdentifier = @"Cell";
        CustomCell *cell = (CustomCell*)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];
        if(cell == nil){
        [[NSBundle mainBundle] loadNibNamed:@"CustomCell_iPhone" owner:self options:nil];
            cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
            cell = categoryCustomCell;
        }
NSInteger pCat_id = [[[arrayCategoryData objectAtIndex:indexPath.row] objectForKey:@"cat_id"] integerValue];
        [customCell setTextForLable:@"Test"];
        [customCell setAddCounterButton:pCat_id];

        return cell;
}

- (void)addCounter:(NSInteger)pCat_ID
{
    //Some code here….
} 
```

在 CustomCell.h

```
@interface CustomCell : UITableViewCell
{
    IBOutlet UILabel *lblCategoryName;
    IBOutlet UIButton *btnAddCounter;
}

- (void)setTextForLable:(NSString *)cat_name;
- (void)setAddCounterButton:(NSInteger)cat_ID;

@end 
```

在 CustomCell.m

```
@implementation CustomCell

- (void)setTextForLable:(NSString *)cat_name
{
    lblCategoryName.text = cat_name;
}

- (void)setAddCounterButton:(NSInteger)cat_ID
{
    [btnAddCounter addTarget:self action:@selector(addCounter:cat_ID) forControlEvents:UIControlEventTouchUpInside];
}

@end 
```

我想从自定义单元格调用**addCounter:(NSInteger)pCat_ID**方法。但这个想法行不通。请建议我新的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T09:00:05.320

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *cellIdentifier = @"Cell";
    CustomCell *cell = (CustomCell*)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if(cell == nil){
    [[NSBundle mainBundle] loadNibNamed:@"CustomCell_iPhone" owner:self options:nil];
        cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
        cell = categoryCustomCell;
    } 
     NSInteger pCat_id = [[[arrayCategoryData objectAtIndex:indexPath.row] 
    // call your method from here.. and put your method in this file then it will work for you
 [cell.btnAddCounter addTarget:self action:@selector(addCounter:pCat_id) forControlEvents:UIControlEventTouchUpInside];

    return cell; 
```

}

# ruby-on-rails - 带有rails的omniauth：获取facebook用户的信息

> ID：13207211
> 
> 赞同：1
> 
> 时间：2012-11-03T07:57:06.270
> 
> 标签：ruby-on-rails, ruby, facebook, omniauth

在身份验证过程的回调中，我执行以下操作：
`auth_hash = request.env['omniauth.auth']`

然后，我正在提取用户 ID，但是否可以同时获取用户的姓名和电子邮件地址？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T10:32:55.127

您需要首先从 request.env["omniauth.auth"] 获取原始数据

```
 data = request.env["omniauth.auth"].extra.raw_info 
  username = data.first_name 
  email  = data.email 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T09:55:04.250

是的

你可以通过做得到它

```
 auth_hash[:info][:name] for name and auth_hash[:info][:email] for email 
```

# django - 如何在 django 模板中使用“{”字符

> ID：13207213
> 
> 赞同：1
> 
> 时间：2012-11-03T07:57:43.590
> 
> 标签：django, django-templates

我知道我们使用 {{ }} 字符作为变量，但我想在 {} 字符之间显示我的数据

我想像这样展示 11 月{12}。所以我所做的是：

```
<ul>
    {% for month in archive %}
<li><a href="?{{month.date|date:"Y-m"}}">{{month.date|date:"F Y"}}{{{month.count}}}</a></li>
    {% endfor %}
</ul> 
```

但我得到了这样的错误：

无法解析余数：来自“{month.count”的“{month.count”

如何在模板中使用 { 字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T08:00:06.613

```
<ul>
    {% for month in archive %}
<li><a href="?{{month.date|date:"Y-m"}}">{{month.date|date:"F Y"}}&#123;{{month.count}}&#125;</a></li>
    {% endfor %}
</ul> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-03T08:04:46.260

`{`将and`}`作为`b_s`and渲染`b_e`到您的模板并执行以下操作：

```
<ul>
{% for month in archive %}
<li><a href="?{{month.date|date:"Y-m"}}">{{month.date|date:"F Y"}} {{b_s}} {{month.count}}      {{b_e}}</a></li>
{% endfor %} 
```

# java - 无法在 Tomcat 中部署使用 MYSQL 的 WebService

> ID：13207216
> 
> 赞同：0
> 
> 时间：2012-11-03T07:58:09.300
> 
> 标签：java, mysql, web-services, tomcat

这是我的网络服务代码。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package customer;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.text.Format;
import java.text.SimpleDateFormat;
import java.util.Date;
import javax.jws.WebService;

/**
 *
 * @author Mihir
 */
public class Customer {
  String date1;
  Format formatter;
  Date date = new Date();
    public String feedback(String contactno,String comments,String ambience,String service,String 

food,String email,String custno,String custname,String storeno,String sno) 
    {

  formatter = new SimpleDateFormat("dd/MM/yy");
  date1 = formatter.format(date);
  Connection con = null;
  PreparedStatement prest;
  try{
  Class.forName("com.mysql.jdbc.Driver");
  con = DriverManager.getConnection("jdbc:mysql://localhost:3306/feedback","root","root");
  Statement stmt = con.createStatement();

      String sql = "INSERT INTO fb(contact_no, 

date,comments,ambience,service,food,email,cust_no,cust_name,store_no,s_no) " +
                    "VALUES ('"+contactno+"', 

'"+date1+"','"+comments+"','"+ambience+"','"+service+"','"+food+"','"+email+"','"+custno+"',

'"+custname+"','"+storeno+"','"+sno+"')";

stmt.execute(sql);

  }

  catch (Exception e){
  e.printStackTrace();
  }
        return null;
  }

} 
```

现在这就是我想要做的。

1.  在 Tomcat 的 webapps 中创建名为 customer_customer 的文件夹。
2.  里面还有两个文件夹 - WEB-INF META-INF
3.  在 META_INF context.xml 中包含内容-

4.  WEB-INF 内部

4.a. 类/客户/Customer.class

4b。带有 jar 的 lib 文件夹 - I. webservices-api.jar II. webservices-extra.jar III.webservices--extra-api.jar IV. webservices-rt.jar V. webservices-tools.jar VI. mysql-connector-java-5.1.18-bin.jar

4c。web.xml -

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <listener>
        <listener-class>com.sun.xml.ws.transport.http.servlet.WSServletContextListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>Customer</servlet-name>
        <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Customer</servlet-name>
        <url-pattern>/feedback</url-pattern>
    </servlet-mapping>

</web-app> 
```

4d。太阳jaxws.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<endpoints version="2.0" xmlns="http://java.sun.com/xml/ns/jax-ws/ri/runtime">
  <endpoint implementation="ws.Customer" name="Adder" url-pattern="/feedback"/>
</endpoints> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:12:22.910

我现在得到它并且它的工作我进行了更改，以便我的包名称彼此不同并 `@Webservice` 在我的类名之前指定。我已经测试了 Web 服务并在我的 android 手机上实现。谢谢大家的意见。

# mongodb - 在 MongoDB 中拥有大量集合（需要架构设计建议）

> ID：13207217
> 
> 赞同：2
> 
> 时间：2012-11-03T07:58:11.650
> 
> 标签：mongodb, nosql

我正在考虑使用 MongoDB 来保存从 100 个摄像头记录的图像元数据，每个摄像头的记录将保存 30 天。如果一台相机一天提供 100,000 张图像，那么我将在 MongoDB 中最多保存（**100 x 30 x 100000**）图像（文档）。我的 Web 应用程序将查询这些数据：

**选择相机 > 选择日期 > 选择一个小时 > 获取该小时内的所有图像。**

我计划设计具有以下三个选项的架构，并且需要您的专家意见/建议以获得最佳出路；

1）**按小时收集：**创建**72000 个 MongoDB 收集**，即**每个摄像头每小时收集 1 个**（100 个摄像头 X 30 天 X 24 小时）（使用 --nssize 500 命令超过 24000 个限制）。我担心 MongoDB 是否允许我创建这么多集合，其次是在读取和写入这些集合时预期的性能收益和损失。不过，使用此模式读取每小时图像看起来非常容易，因为我可以在单个查询中将数据获取到任何集合。

2)**按日收集：**创建**3000 个 MongoDB 收集**，即**每个相机每天 1 个收集**（100 个相机 X 30 天）。虽然这是允许的，而且似乎有很好的收藏数量，但我担心的是在特定日期的收藏中读取特定小时的图像。

3）**Camera-wise Collections：**创建**100个MongoDB Collections**，即**每个Camera 1个Collection**（100个camera/collections）。然后以 (20141122061055000) 之类的格式保存具有唯一“id”的快照，这是对完整日期时间戳 (2014-11-22 06:10:55.000) 的改写。

我希望理想情况下我可以做（1）、（2）或（3），但欢迎任何其他选择。

考虑到我的情况，请就我对 MongoDB 的选择提出建议。

问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T12:48:54.530

这继续：[使用 MongoDB 而不是 MS SQL Server 的优点和缺点](https://stackoverflow.com/questions/13190468/pros-and-cons-of-using-mongodb-instead-of-ms-sql-server/13191791#13191791)。

我不确定您为什么要尝试使用许多集合的建议。

在 MongoDB 中以这种方式使用许多集合被认为是一个坏主意（并且您很可能在索引开销之后为此增加 ns 大小），您应该改为横向扩展单个通用文档集合。其他回答者似乎同意。

我会使用单个集合，其文档结构可能是（快速离开我的头顶）：

```
{
    _id: {},
    camera_id: ObjectId(),
    image: {},
    hour: ts_of_hour,
    day: ts_of_day
} 
```

这样，您就可以获得根据您想要的任何面额选择图像所需的所有数据。

注意：还要考虑 MongoDB 的锁是数据库级别的，而不是集合级别的。您不会在这里获得任何有用的信息，只会使您的查询更加困难和复杂，并且可能会使您的数据更难维护。

### 编辑

回答您的一些担忧：

注意：我还没有设计你的应用程序，这是一个迟到的答案（也是深夜）所以基本上这是我充实立即浮现在脑海中的基本概念。

> 每个相机1个集合，即几乎100个集合。

再说一次，我真的不明白这一点，如果您出于优化原因这样做，那么您将作为每个 DB 一台摄像机来执行此操作，但这正式过分。老实说，3000 万条记录不算什么，我现在就解决这个问题。无论您是在谈论 SQL 还是 MongoDB，就数据库潜力而言，30m 的记录集合通常被认为是很小的，甚至是分钟（MS SQL 表示它们可以存储每个表的 PB 数据）。

> 1.  选择 FromDate 和 ToDate 2 之间的所有图像

您可以使用上面的答案在文档上使用 BSON 日期字段来完成此操作。

> 2.  在 FromDate 和 ToDate 之间选择 Top(COUNT) 个图像

你可以`count()`。

`top()`并非在所有数据库系统中都实现，因此这是特定于 MS SQL 的，但是在此特定查询中它没有任何用处，因为该查询将始终返回一行。

您可以将此特定数据聚合到另一个集合中。这很好，所以在另一个集合中你会有一组天：

```
{
     count: 3,
     day: (date|ts)
} 
```

然后你可以在几天内增加一些，因为`count()`在大型工作集上会变慢。因此，收集的目的是总结您的数据，以使您的查询工作集更易于管理。

因此，其他集合可以很好地用于保存聚合函数的“缓存”，这会很慢，或者当然可以在您的应用程序中保存其他实体（就像关系数据库一样）。

基本上，就像在 SQL 中一样，常见的模式或文档被分组到集合中。所以我真的会用只有一张表的 SQL 设计你的应用程序：`images`也许`camera`也是。

除了 5 之外的所有其他都在这里被松散地覆盖，所以：

> 5.  从带有 ID 的图像中选择上一个/下一个图像

你可以`_id`像这样使用这里：

```
db.images.find({_id: {$gt: last_id}}).limit(1) 
```

这应该工作得很好。

至于你在这里发表的评论：

> 您的意思是在 MongoDB 中，查询包含 30 个文档的集合与查询包含 30,00,000 个文档的集合没有区别吗？

现在这取决于您对一般数据库设计的了解程度以及如何扩展数据库架构。这不仅适用于 MongoDB，也适用于 SQL。如果设置正确的 SQL 可以轻松查询 30 条之类的 30m 条记录。

这一切都归结为分片。至于它是否会很快取决于要运行的查询和它们的工作集大小（RAM中需要多少数据，是否在RAM中？）。从外观上看， image_id ( `ObjectId`) 和 date 上的分片索引可能会给你你想要的。然而，这需要更多的测试，因为我相信你对扩展数据库有点陌生，你真的应该通过谷歌或其他东西对这个主题进行一些搜索。

再次注意：30m 文档可能不需要分片，所以这可能只是制作好的索引的一个例子。

希望这会有所帮助，而且我还没有在这里绕圈子，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T08:17:24.843

我没有看到你的收藏问题。照片是一个单一的方案，它们应该在一个集合中。

每张照片都有一个时间戳。其余的通过[查询来](http://www.mongodb.org/display/DOCS/Advanced+Queries)完成。您可以每小时查询文档而不会出现问题：

```
var begin_hour = new Date(date.year, date.month, date.day, hour);
var end_hour = new Date(date.year, date.month, date.day, hour + 1);

db.photos.find({taken: {$gte: begin_hour, $lt: end_hour}}) 
```

这会按选定的 选择照片`hour`。

如果这不满足您，还有[MapReduce](http://www.mongodb.org/display/DOCS/MapReduce)。

# prolog - Prolog中的祖父谓词

> ID：13207223
> 
> 赞同：2
> 
> 时间：2012-11-03T07:58:27.840
> 
> 标签：prolog, predicate

我在 SWI-Prolog 中编写了以下程序：

```
male(reza).
male(aliakbar).
male(behrooz).
male(said).
male(aliasghar).
male(taghi).
male(gholamreza).
male(hadi).
female(fatema).
female(tahere).
female(olya).
female(fatema).
mother(fateme,reza).
mother(olya,hasan).
mother(x,y) :-
    wife(x,z),
    father(z,y).
brother(said,reza).
brother(x,y) :-
    father(z,x),
    father(z,y),
    x\==y,
    male(x).
sister(tahere,fateme).
sister(x,y) :-
    father(z,x),
    father(z,y),
    x\==y,
    female(x).
sister(olya,aliakbar).
wife(tahere,gholamreza).
father(gholamreza,hadi).
father(gholamreza, nastaran).
father(abdollah,hasan).
father(aliakbar,reza).
father(taghi,olya).
father(taghi,aliakbar).
father(taghi,aliasghar).
father(aliakbar,said).
grandfather(x,z) :-
    father(x,y),
    father(y,z).
grandfather(x,z) :-
    father(x,y),
    mother(y,z).
uncle(y,x) :-
    father(z,x),
    brother(z,y),
    male(y).
aunt(y,x) :-
    mother(z,x),
    sister(z,y),
    female(y).
cousin(y,x) :-
    aunt(z,x),
    mother(z,y),
    female(y).
cousin(y,x) :-
    aunt(z,x),
    mother(z,y),
    male(y). 
```

当我咨询“父亲（X，Y），父亲（Y，Z）”时。它返回正确答案（名称为波斯语），即它返回

```
X = taghi,
Y = aliakbar,
Z = reza ;
X = taghi,
Y = aliakbar,
Z = said ;
false. 
```

但我找不到**祖父（X，Y）**的正确答案。请帮我解释为什么。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:55:31.243

注意：大小写在 Prolog 中至关重要。你的规则不能被正确解释，因为你没有使用大写的变量。

# sql - 运行查询并在 TEdit 中显示结果

> ID：13207224
> 
> 赞同：1
> 
> 时间：2012-11-03T07:58:39.140
> 
> 标签：sql, delphi, delphi-xe3

我有一个`TComboBox`包含从我的数据库中收集的名称列表。旁边是`TEdit`我打算用于显示与每个人相关联的 ID 号的目的。

由于 firstName 和 lastName 是表中的单独字段，但在 TCombobox 中一起显示，我编写了一小部分将 firstName 和 lastName 拆分为两个单独的变量：

> ```
>  pos := AnsiPos(' ', cbStudents.Text); 
>  firstName := Copy(cbStudents.Text, 0, pos-1);
>  lastName := Copy(cbStudents.Text, pos+1, Length(cbStudents.Text)); 
> ```

然后我执行 SQL 代码：

```
 try
    query.Open;
    query.SQL.Add('Select studentID');
    query.SQL.Add('From student');
    query.SQL.Add('Where firstName = ' + StrToQuote(firstName));
    query.SQL.Add('And lastName = ' + StrToQuote(lastName));
    editID.Text := query
  finally
    query.Free;
  end; 
```

注意：`StrToQuote`用双引号（“”）封装变量 firstName 和 lastName

我收到的错误是：

参数超出范围

我究竟做错了什么？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T08:55:10.467

你的代码不能工作。它首先打开查询，然后设置 SQL 查询字符串。代替

```
 try
     query.Open;
     query.SQL.Add('Select studentID');
     query.SQL.Add('From student');
     query.SQL.Add('Where firstName = ' + StrToQuote(firstName));
     query.SQL.Add('And lastName = ' + StrToQuote(lastName));
   finally
     query.Free;
   end; 
```

利用

```
 // create or reset query here
  query := ...

  try

    query.SQL.Add('SELECT studentID');
    query.SQL.Add('FROM student');
    query.SQL.Add('WHERE firstName = :firstname');
    query.SQL.Add('AND lastName = :lastName');

    // set parameter values here

    query.Open;

    // now transfer data from fields to the user interface (TEdit)

  finally
    query.Free;
  end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T08:07:36.600

您的方法对我来说并不是最佳的（拆分显示名称），但您的问题是在释放查询后访问 query.Fields[0].AsString。

# regex - 正则表达式获取特定模式之前的最后一个分隔符

> ID：13207226
> 
> 赞同：0
> 
> 时间：2012-11-03T07:59:36.940
> 
> 标签：regex

获取某个模式之前最后一个分隔符位置的正则表达式是什么？

例如，我有一个字符串如下

```
some value;some other value;some special XYZ value;some more special XYZ value 
```

在这里，分隔符是分号（“;”），我正在寻找的模式是任何包含“XYZ”的字符串。

正确答案是这种情况是位置 28，它是在包含匹配模式（“XYZ”）的元素之前最后出现的分隔符（“;”）。

正则表达式会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:13:01.423

```
;(?=[^;]*XYZ) 
```

`XYZ`匹配字符串的同一段中后跟的分号。

使用它一次来查找第一个匹配项。如果您反复使用它，您也会发现以下情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T08:02:56.870

使用这个正则表达式

```
^.*(;).*XYZ.*$ 
```

`.*(;).*XYZ.*``;`会贪婪地匹配，即它会匹配到最后一次`XYZ`跟随它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T08:45:03.953

您可以分两步完成：

*   提取包含第一次出现的 XYZ 的最大子字符串，前面有一个分隔符
*   在该子字符串中找到最后一个分隔符的位置

IE，

```
s = "some value;some other value;some special XYZ value;some more special XYZ value"
s1 = re.findall("^.*?;.*?XYZ",s)[0]
len(re.findall("(.*;)",s1)[0]) --> 28 
```

# jquery - 如何获取复选框的跨度值并在jquery的文本框中显示？

> ID：13207232
> 
> 赞同：0
> 
> 时间：2012-11-03T08:00:14.633
> 
> 标签：jquery, addition

大家好，我正在处理 jquery，我在 span 标签中有一个值，我需要获取该值，并且需要在检查后显示在文本框中，如果我检查了多个 boxex，我需要添加这些值并且必须在文本框中显示

这里我的代码如下：

```
 <input type="checkbox"  />
        <span>100</span>
        <div class="clear"></div>
        <input type="checkbox" />
        <span>200</span>
        <div class="clear"></div>
        <input type="checkbox" />
        <span>300</span>
        <div class="clear"></div>
        <input type="checkbox" />
        <span>400</span>
         <input type="text" /> 
```

任何人都可以帮助完成这项工作提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:13:03.223

您可以使用此代码收集所有检查的值。

如果您将 HTML 更改为：

```
<button id="go">Test</button>
<div class="container">
    <input type="checkbox"  />
    <span>100</span>
</div>
<div class="container">
    <input type="checkbox" />
    <span>200</span>
</div>
<div class="container">
    <input type="checkbox" />
    <span>300</span>
</div>
<div class="container">
    <input type="checkbox" />
    <span>400</span>

</div>
<input id="results" type="text">​ 
```

然后，您可以使用它从所有选中的框中收集文本。您可以在不更改 HTML 的情况下执行此操作，但这比维护更改更清洁、更安全。

```
$(document).ready(function() {
    $("#go").click(function() {
        var data = $("input:checked").map(function() {
            return $(this).closest(".container").find("span").text();
        }).get().join(", ");
        $("#results").val(data);
    });
});​ 
```

工作演示：http: [//jsfiddle.net/jfriend00/jLEDC/](http://jsfiddle.net/jfriend00/jLEDC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T08:04:06.030

使用`next`方法，您可以选择复选框的下一个兄弟姐妹。

```
$('input[type=checkbox]').change(function(){
      var val = 0;
      $('input[type=checkbox]:checked').each(function(){
          val += parseInt( $(this).next().text(), 10 )    
      })  

     $('input[type=text]').val(val)
}) 
```

# android - Android - 主页按钮是否有类似 onBackPressed() 的功能？

> ID：13207234
> 
> 赞同：0
> 
> 时间：2012-11-03T08:00:32.100
> 
> 标签：android, eclipse, sdk

我正在寻找为主页和后退按钮创建代码。我了解如何使用 onBackPressed() 但我不知道如何使用主页按钮。我听说这是不可能的，但我不能使用@override

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T08:05:35.590

您永远不能覆盖主页按钮事件侦听器。并且没有可供程序员使用的这种方法。谷歌没有给予这样做的特权，以避免恶意软件阻碍设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T08:04:24.017

不，没有这样的东西可用。但是您可以使用一些活动回调，例如 onPause.. 当您按下主页按钮时会调用它。

查看下面的示例，运行它并在 logcat 中检查当您按下主页按钮时调用的方法，然后使用适合您的方法编写代码。

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        System.out.println("Destroy");
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        System.out.println("Pause");
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        System.out.println("Resume");
    }

    @Override
    protected void onStop() {
        // TODO Auto-generated method stub
        super.onStop();
        System.out.println("Stop");
    }

} 
```

# css - 在 WordPress 中创建固定导航菜单

> ID：13207240
> 
> 赞同：3
> 
> 时间：2012-11-03T08:01:23.993
> 
> 标签：css, wordpress, wordpress-theming, nav

如何修复（滚动时固定在顶部）我的 WordPress 驱动网站的导航菜单，如 TechCrunch.com？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T08:06:21.070

要始终将您的导航保持在网站顶部，请为您的菜单容器使用以下 css：

```
left: 0;
top: 0;
position: fixed;
padding: 5px 0;
width: 100%;
text-align: center; 
```

然后，如果用户向下滚动，您可以使用一些 JavaScript 来更改徽标大小。我建议使用 jQuery 库检查导航栏位置，更改它的位置以防用户滚动超过导航顶部的高度，使其保持在窗口顶部，当然当用户滚动时重复整个过程。

[你可以在这里](http://www.backslash.gr/content/blog/webdevelopment/6-navigation-menu-that-stays-on-top-with-jquery)找到好的和简单的教程

jQuery 代码需要放在你的 header.php 文件中，首先是附加 jquery 库`<script type="text/javascript" src="/scripts/jquerylibrary.js"></script>`，然后将你的代码放在`<script>`标签中，也放在 header php 中

# symfony - `base.html.twig`中声明的主要资产的最佳位置是什么

> ID：13207242
> 
> 赞同：2
> 
> 时间：2012-11-03T08:01:39.577
> 
> 标签：symfony, assets

每个包都有自己的公共目录来存储资产（css/js/images）。

现在使用的资产的最佳位置是`app\Resources\views\base.htl.twg`什么？

Symfony 是如何理解将它们呈现给公众的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T09:14:32.580

通常，目录中可用的模板资产`app/Resources/view`（如 base.html.twig）直接放置在 web 根目录的子目录中，如`web/includes/css/main.css`并用`asset('includes/css/main.css')`.

如果您不喜欢它，您可以轻松创建自己的包来存储应用程序资产。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T17:38:28.797

我建议您创建一个 DesignBundle 来存储所有基本模板和资产。此方法允许您与其他应用程序共享您的配置。

# ios - 以编程方式将 UITextField 添加到下拉列表

> ID：13207244
> 
> 赞同：0
> 
> 时间：2012-11-03T08:01:52.823
> 
> 标签：ios, uitextfield, uinavigationbar

我有一个由 UITableViewController 控制的 tableview。在这个 UITableViewController 类中`UITextField`，我通过将这些行添加到我的 viewDidLoad 方法以编程方式向我的 UINavigationItem 添加了一个：

```
CGRect passwordTextFieldFrame = CGRectMake(20.0f, 100.0f, 280.0f, 31.0f);
UITextField *passwordTextField = [[UITextField alloc] initWithFrame:passwordTextFieldFrame];
passwordTextField.placeholder = @"Password";
passwordTextField.backgroundColor = [UIColor whiteColor];
passwordTextField.textColor = [UIColor blackColor];
passwordTextField.font = [UIFont systemFontOfSize:14.0f];
passwordTextField.borderStyle = UITextBorderStyleRoundedRect;
passwordTextField.clearButtonMode = UITextFieldViewModeWhileEditing;
passwordTextField.returnKeyType = UIReturnKeyDone;
passwordTextField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
passwordTextField.tag = 2;
passwordTextField.autocapitalizationType = UITextAutocapitalizationTypeNone;
passwordTextField.delegate = self; // ADD THIS LINE
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:passwordTextField]; 
```

`UITextField`正确显示在我的导航栏上，但是当我单击它时， textFieldDidBeginEditing 永远不会触发。

我已将 与 textFieldDidBeginEditing 方法一起添加到我的头文件中。

我尝试在由 UIViewController 控制的视图中执行完全相同的操作，在这里当我单击“文本字段”时会触发 textFieldDidBeginEditing - 所以我怀疑我将文本字段添加到 UITableViewController 是造成问题的原因。

您可能会想-为什么不将“uinavigationbutton”添加到“NavigationBar”中-但我不能因为单击按钮时要调用的uidropdownmenu只接受“UITextField”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:34:25.973

尝试再添加一行：

```
[passwordTextField becomeFirstResponder]; 
```

# php - 获取数组 2 D 中第一个索引中的所有单词和最后一个单词？

> ID：13207247
> 
> 赞同：2
> 
> 时间：2012-11-03T08:02:51.447
> 
> 标签：php

如何获取下面数组中第一个索引中的所有单词并获取下一个索引？？？数组 2 D 中的最后一个单词，.. 示例：

```
$arr = array( 
  array( 
    '3'=>'repsol kawasaki honda ktm', 
    '4'=>'kawasaki honda ktm bmw', 
    '5'=>'honda ktm bmw ducati', 
    '6'=>'ktm bmw ducati yamaha'
  ) , 
  array( 
    '13'=>'lamborghi ferarri mercedes hyundai', 
    '14'=>'ferarri mercedes hyundai toyota',
    '15'=>'mercedes hyundai toyota nissan',
    '16'=>'hyundai toyota nissan renault'
  ), 
); 
```

我想要这样的产量：

```
 Array ( 
     [0] => Array (
       [0] => repsol kawasaki honda ktm 
       [1] => bmw 
       [2] => ducati
       [3] => yamaha 
      ) 
     [1] => Array ( 
       [13] => lamborghi ferarri mercedes hyundai 
       [14] => toyota 
       [15] => nissan  
       [16] => renault 
       ) 
   ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:09:24.387

这应该做你想要的......

```
function parseArray( &$arr ){
  $out = array();
  $keys = array_keys( $arr );
  $out[ $keys[0] ] = $arr[$keys[0]];
  unset($arr[$keys[0]]);
  foreach( $arr as $key => $val ){
    $out[ $key ] = array_pop( explode(' ', $val ) );
  }
  $arr = $out;
} 
```

然后`array_walk`像这样将函数应用于每个内部数组

```
$data = array(
  array(
    '3'=>'repsol kawasaki honda ktm', 
    '4'=>'kawasaki honda ktm bmw',   
    '5'=>'honda ktm bmw ducati', 
    '6'=>'ktm bmw ducati yamaha'
  ),
  array(
    '13'=>'lamborghi ferarri mercedes hyundai',
    '14'=>'ferarri mercedes hyundai toyota',
    '15'=>'mercedes hyundai toyota nissan',
    '16'=>'hyundai toyota nissan renault'
  )
);

echo "Before:\n";
print_r($data);
// Walk our array
array_walk( $data, 'parseArray');

echo "After\n";
print_r($data); 
```

### 输出

```
Before:
Array
(
    [0] => Array
        (
            [3] => repsol kawasaki honda ktm
            [4] => kawasaki honda ktm bmw
            [5] => honda ktm bmw ducati
            [6] => ktm bmw ducati yamaha
        )

    [1] => Array
        (
            [13] => lamborghi ferarri mercedes hyundai
            [14] => ferarri mercedes hyundai toyota
            [15] => mercedes hyundai toyota nissan
            [16] => hyundai toyota nissan renault
        )

)

After:    
Array
(
    [0] => Array
        (
            [3] => repsol kawasaki honda ktm
            [4] => bmw
            [5] => ducati
            [6] => yamaha
        )

    [1] => Array
        (
            [13] => lamborghi ferarri mercedes hyundai
            [14] => toyota
            [15] => nissan
            [16] => renault
        )

) 
```

# iphone - 使用平截头体透视和 GLKit 创建天空盒

> ID：13207248
> 
> 赞同：0
> 
> 时间：2012-11-03T08:02:56.043
> 
> 标签：iphone, ios, ipad, opengl-es

我在尝试将我的场景与天空盒包装在平截头体透视中时遇到了一些麻烦。

```
GLKMatrix4 projectionMatrix = GLKMatrix4MakeFrustum(-50, 50, -50, 50, 0.1, 100);

GLKMatrix4 baseModelViewMatrix = GLKMatrix4MakeTranslation(0.0f, -0.8f, 0.0); 
baseModelViewMatrix = GLKMatrix4Scale(baseModelViewMatrix, 0.5f, 0.5f, 0.5f);

self.effect.transform.projectionMatrix = projectionMatrix;
self.effect.transform.modelviewMatrix = GLKMatrix4Multiply(camera, baseModelViewMatrix);

GLKMatrix4 camera = GLKMatrix4MakeLookAt(
                                         self.cameraEye.x,
                                         self.cameraEye.y,
                                         self.cameraEye.z,
                                         0.0,
                                         0.0,
                                         0.0,
                                         0, 1, 0);

self.effect.transform.modelviewMatrix = GLKMatrix4Multiply(camera, baseModelViewMatrix);

self.skyBoxEffect.center = self.cameraEye;
self.skyBoxEffect.transform.projectionMatrix = self.effect.transform.projectionMatrix;
self.skyBoxEffect.transform.modelviewMatrix = self.effect.transform.modelviewMatrix; 
```

我在场景中渲染的对象在感觉或深度上看起来都不错，但是天空盒根本无法正常工作，图像失真可能是由于截锥体透视。这里有什么诀窍吗？如何使用 GLKit 使用平截头体视角制作天空盒？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:29:05.907

通常需要一些调整来设置与场景相关的截锥体变量。我可能是错的，但我认为你的平截头体的数学目前给你一个大约 160 度的视野。正常的 fov 大约是 45 到 80 度。检查[http://www.songho.ca/opengl/gl_projectionmatrix.html](http://www.songho.ca/opengl/gl_projectionmatrix.html)以获取有关定义适当平截头体的更多信息。

# c# - 更改列表框背景颜色

> ID：13207251
> 
> 赞同：2
> 
> 时间：2012-11-03T08:03:05.557
> 
> 标签：xaml, c#, colors, background, listbox, windows-8

我有一个`ListBox`用[xaml](/questions/tagged/xaml "显示标记为“xaml”的问题")写的：

```
<ListBox Margin="0" x:Name="ListBox_Main" Grid.Row="1" VerticalAlignment="Top" FontSize="24" SelectionChanged="ListBox_Main_SelectionChanged" Foreground="Black">
    <ListBoxItem Content="Item 1" Background="#19000000" />
    <ListBoxItem Content="Item 2" Background="#19000000" />
    <ListBoxItem Content="Item 3" Background="#19000000" />
    <ListBoxItem Content="Item 4" Background="#19000000"/>
    <ListBoxItem Content="Item 5" Background="#19000000"/>
 </ListBox> 
```

我们可以看到背景颜色是`#19000000`，我们可以在 C# 中更改颜色吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T22:52:45.080

您可以使用画笔设置背景颜色：

```
var item = ListBox_Main.Items[0] as ListBoxItem ;
item.Background = new SolidColorBrush(Windows.UI.Color.FromArgb(255, 255, 255, 0)); 
```

# sublimetext2 - Sublime text 2 - 与两台计算机共享配置等

> ID：13207253
> 
> 赞同：3
> 
> 时间：2012-11-03T08:03:17.547
> 
> 标签：sublimetext2

我在家里和工作中都在研究 Sublime Text 2。我需要在两台计算机上进行相同的配置。当我在家里改变一些东西时，我想在工作中看到这种改变，反之亦然。[我想我可以用Dropbox](http://en.wikipedia.org/wiki/Dropbox_%28service%29)做类似的事情吗？

我需要共享 Package Control 安装的用户配置、用户绑定、片段和插件。如何在两台计算机之间共享配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T08:22:46.110

我建议将您的文件放在[Dropbox](https://www.dropbox.com/)或任何类似的文件同步服务中。

（我就是用[AutoHotKey](http://en.wikipedia.org/wiki/AutoHotkey)脚本来做这件事的，而且效果很好。）

[SublimeText 论坛上](http://www.sublimetext.com/forum/viewtopic.php?f=2&t=7248)有一个帖子问了同样的问题，在那里，一个答案是指[使用 Dropbox 在 Windows 计算机上同步 Sublime Text 设置](http://juhap.iki.fi/misc/using-dropbox-to-sync-sublime-text-settings-across-windows-computers/)的页面，说“我对这种方法没有任何问题”。

该线程中提到的其他建议是：

*   将您的配置保存在在线版本控制系统（例如[GitHub](http://en.wikipedia.org/wiki/GitHub)或[Bitbucket](http://en.wikipedia.org/wiki/Bitbucket)）中 - 但它警告“某些插件确实包含一些私人信息（例如，SFTP 插件将其许可证保存在用户的文件夹中）”
*   “不管它值多少钱，我都会使用 Windows 便携版，并将其全部转储到我的 Dropbox 中。”
*   使用[shell 脚本在 OS X 和 Linux 之间进行同步](http://opensourcehacker.com/2012/05/24/sync-and-back-up-sublime-text-settings-and-plug-ins-using-dropbox-on-linux-and-osx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T00:52:10.580

这是一个在 Windows 和 Mac 之间同步的[解决方案](http://misfoc.us/post/18018400006/syncing-sublime-text-2-settings-via-dropbox "花哨的解决方案")

# javascript - 循环和数组问题

> ID：13207255
> 
> 赞同：1
> 
> 时间：2012-11-03T08:03:29.580
> 
> 标签：javascript, arrays, loops, for-loop

好的，我有一个文字数组，其中有一些图像。我有一个空的 DIV，其中将执行 FOR LOOP 以显示 div 中数组中的所有图像。

```
var icons = [
    '<img src="images/1.png" width="30" height="30"/>',
    '<img src="images/2.png" width="30" height="30"/>',
    '<img src="images/3.png" width="30" height="30"/>'
    ];

    var lol = document.getElementById("div");

    for (var i=0; i<icons.length; i++) {
            lol.innerHTML = icons[i] ;
        } 
```

问题是只显示最后一张图片而不是全部...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:05:02.803

那是因为您正在用当前图像覆盖前一个图像。如果要附加/连接所有图像，请使用`+=`：

```
lol.innerHTML += icons[i]; 
```

处理此问题的更好方法是使用 DOM 处理：

```
var img = document.createElement("img");
img.setAttribute("src", icons[i]);

lol.appendChild(img); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T08:08:08.700

你的代码覆盖了innerHTML 你可以附加innerHTML

尝试这个

```
lol.innerHTML += icons[i]; 
```

上面的代码是附加innerHTML

或者在 jquery 中你可以使用 append 函数

```
$('#div').append(icons[i]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T08:05:53.800

每次你做

```
lol.innerHTML = icons[i]; 
```

您将div 的内部 HTML*替换*`icons[i]`为. 连接所有图标元素，然后使用连接结果设置 div 的内部 HTML。

# jquery - 垂直滚动到下一部分时捕捉页面

> ID：13207257
> 
> 赞同：1
> 
> 时间：2012-11-03T08:03:53.443
> 
> 标签：jquery, navigation, scrollto, slidedown, vertical-scroll

嗨，我知道关于这个主题还有其他一些帖子，但似乎没有一个有明确可靠的答案。

我正在尝试使用 jquery 在此网站上重新创建效果：

[http://beoplay.com/Support](http://beoplay.com/Support)

每个页面都有幻灯片的单页面导航最简单的方法似乎是 jqueryTools：

[http://jquerytools.org/demos/scrollable/site-navigation.html](http://jquerytools.org/demos/scrollable/site-navigation.html)

当用鼠标向下滚动时，如何将“捕捉”效果添加到页面上与侧边导航相同的部分，以便您想要看到的所有内容都在视口中？几乎就像它们是单独的幻灯片......

其他帖子建议使用 impress.js、stellar.js 和 waypoints，但这些似乎都不能单独用于这种效果，我宁愿不使用其他插件。

我认为使用“scroll()、scrollTo()、jumpScroll”之类的东西可以轻松实现。

这里有两个非常相似的帖子，但似乎没有一个答案能很好地工作：

11051650

10171058

# haskell - 如何设置WinGHCi的工作目录

> ID：13207261
> 
> 赞同：5
> 
> 时间：2012-11-03T08:04:27.993
> 
> 标签：haskell, windows-7, ghc, winghci

我刚刚安装了 WinGHCi。当我尝试使用 Ctrl+L 加载 .hs 文件时，它会打开`C:\Program Files (x86)\Haskell Platform\2012.2.0.0\winghci`我安装它的文件浏览器。我不希望它默认去那里，我将我的代码文件保存在不同驱动器上的不同目录中，并且我不想`D:\MyPath\Haskell`每次加载文件时都必须导航到。

我试图设置用于启动 WinGHCi 的快捷方式的“开始于”字段，但它没有任何改变。

如何让 WinGHCi 默认在我自己的目录中查找？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T08:35:32.517

它在您打开 .hs 或 .lhs 的最后一个目录中打开。

尝试从您想要的文件夹中打开一些东西，退出，重新启动。它是否在您所在的位置重新启动？

尝试像那样工作一段时间，如果你喜欢它（我喜欢），那么你很好。

* * *

如果你真的想每次都去同一个地方，也许有办法。

我找不到任何设置来控制它，但信息存储在注册表中。我的在

```
Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\Software\Haskell\WinGHCi 1.0.6]
"WorkingDir"="D:\\Files\\Andrew\\prog\\haskell" 
```

您可以将您的版本保存为`resetghci.reg`：要制作自己的版本，请打开 regedit 并首先尝试相同的位置。如果没有，请搜索 WinGHCi。您可以导出该子树，但您会得到全部内容，包括最近的表达式等，我认为您不应该重置这些内容。将其保存为 ghcioriginal.reg 以防万一。编辑除 WorkingDir 之外的所有行并保存为 resetghci.reg

当您双击它时，它会询问您是否确定要将该信息添加到注册表中。是的，你是。

* * *

未经测试：

以下内容适用于旧版本，但微软似乎正在关闭 .pif 文件和启动命令，我无法在 Windows 7 中对此进行测试。

在与您创建的 .reg 相同的文件夹中创建一个名为 ghci.bat 的文本文件。在里面放

```
@echo off
regedit resetghci.reg
start WinGHCi 
```

您可能需要指定 WinGHCi 的完整路径。启动命令相当于在 shell 提示符下创建一个后台进程，所以它应该立即终止。

创建一个 ghci.bat 的快捷方式（它将被称为 ghci.pif）并将其设置为打开最小化并在其上放置一个漂亮的 lambda 图标（从winghci 可执行文件中对其进行昵称）。

在您的桌面、开始菜单或快捷方式栏上弹出它，当您使用它时，您将被弹出回您的标准位置。

# html - HTML 标记

> ID：13207275
> 
> 赞同：0
> 
> 时间：2012-11-03T08:06:14.670
> 
> 标签：html

我发现了一些使用它的代码：

```
<ul>
    <li>
        <false>blah blah blah</false>
    </li>
</ul> 
```

这是什么？它是 HTML5 创作的吗？SO & Google 搜索`<false>`（有或没有`HTML`）没有显示任何内容。

[这](http://syllabus.bos.nsw.edu.au/english/english-k10/content-and-outcomes/)是网站。检查`A. communicate through speaking, listening, reading, writing, viewing and representing*`下的标记`Objective A`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:36:19.610

`<false>`不是有效的 HTML 标记。然而，一些浏览器实际上并不关心，只是将未知元素解析为内联元素，这就是为什么如果你想使用新的块级元素（例如）需要重置 IE≤7 的 CSS（？ `<article>`）。

这被认为是不好的风格。要么准备你自己的文档类型，要么使用 CSS 类。没有语义标签来指示错误值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T10:00:25.247

它没有在任何 HTML 规范或公共草案中定义，并且很可能在任何浏览器中都没有被识别为任何含义。简而言之，它是一个“自定义标签”；参看。例如[使用自定义 HTML 标签](https://stackoverflow.com/questions/5970093/using-custom-html-tags)。

`false`在这种情况下，标签名称的选择看起来很奇怪，并且页面上的 CSS 或 JavaScript 代码中似乎没有任何对元素的引用。然而，一般来说，自定义标签可以用于样式和客户端脚本，因为现代浏览器通常会解析带有自定义标签的元素并为它们生成 DOM 节点。

我的猜测是这些标签的使用是偶然的，不是故意的。这些标签不会引起这样的问题，至少在将`<false>`标记添加到 HTML 之前不会……它们显然没有使用验证器（W3C 验证器报告 195 个错误，26 个警告）。

# android - 调用活动的方法时出现异常

> ID：13207276
> 
> 赞同：-1
> 
> 时间：2012-11-03T08:06:14.387
> 
> 标签：android, android-activity

我有`class A`，`class B`延伸`Activity`。在`Activity B`中，我创建了一个方法，`fillVariable`如下所示，但是当我从中调用此方法时，`Activity A`我得到`nullPointerException`.

**一个活动：**

```
public class A extends Activity{

    B b;

    public void onCreate(Bundle sc){
        setContentView(R.layout.first);
        b = new B();
        b.fillVariable();
    }
} 
```

**B活动：**

```
public class B extends Activity{

    Resources res;

    public void onCreate(Bundle sc){
    }

    public void fillVariable() {
        res = this.getResources();
        String temp = res.getString(R.string.myString);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:55:03.297

您必须传入`this`您的 A 类，例如`b = new B(this);`，因为您正在调用下一个活动，因此他们需要活动的上下文。

现在在 B 类中**创建**上下文，例如`Context ctx`.

`class b Constructor`现在在文件 b 中定义你的，比如：

```
public B(A obj) {
    // TODO Auto-generated constructor stub
    this.ctx = obj;
} 
```

并在任何函数中使用上下文 obj 使用资源，例如：

```
public String temp;
temp = ctx.getString(R.string.me); 
```

它正在运行。享受...

# java - Java 内存屏障

> ID：13207277
> 
> 赞同：3
> 
> 时间：2012-11-03T08:06:19.550
> 
> 标签：java, multithreading, concurrency, jvm

我正在阅读 JSR 133 Cookbook 并有以下关于内存屏障的问题。书中有一个插入内存屏障的例子，但只使用了局部变量的写入和读取。假设我有以下变量

```
int a;
volatile int b; 
```

和代码

```
b=a; 
```

我是否正确理解这一行会产生以下说明

```
load a
LoadStore membar
store b 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:02:44.293

JVM 的底层行为仅针对 volatile 变量得到保证。`b = a;`即使在线程完成对语句的评估之后，两个单独的线程也有可能访问变量“a”的不同值。JVM 只保证对 volatile 变量的访问是序列化的并且具有 Happens-Before 语义。这意味着`b = a;`在两个不同线程上执行的结果（面对 'a' 的“不稳定”值（哈哈））是不确定的，因为 JVM 只说存储到 'b' 是序列化的，它不保证哪个线程具有优先权。

更准确地说，这意味着 JVM 将变量 'b' 视为拥有自己的锁。一次只允许一个线程读取或写入“b”；这个锁只保护对“b”的访问，没有别的。

现在，这意味着在不同的 JVM 下会发生不同的事情，并且这种锁在不同的机器架构上实际实现的方式可能会导致应用程序的运行时行为大不相同。您应该信任的唯一保证是 Java 参考手册所说的，“一个字段可能被声明为 volatile，在这种情况下，Java 内存模型确保所有线程都看到变量的一致值。” 如需进一步回顾，请参阅 Dennis Byrne 的优秀[文章](http://www.infoq.com/articles/memory_barriers_jvm_concurrency)，了解不同 JVM 实现如何处理此问题的一些示例。

Happens-Before 语义在提供的示例中不是很有趣，因为整数原语没有为 volatile 旨在（部分）补救的那种指令重新排序提供太多机会。一个更好的例子是：

```
private AnObjectWithAComplicatedConstructor _sampleA;
private volatile AnObjectWithAComplicatedConstructor _sampleB;

public void getSampleA() {
    if (_sampleA == null) {
        _sampleA = new AnObjectWithAComplicatedConstructor();
    }
    return _sampleA;
}

public void getSampleB() {
    if (_sampleB == null) {
        _sampleB = new AnObjectWithAComplicatedConstructor();
    }
    return _sampleB;
} 
```

在此示例中，字段“_sampleA”存在严重问题；在多线程情况下，'_sampleA' 很可能正在一个线程中被初始化，同时另一个线程试图使用它，从而导致各种零星且非常非常难以复制的错误。要看到这一点，请考虑线程 X 在 getSampleA() 中执行新的“新”字节码指令语句，然后将（尚未初始化的）结果存储在字段“_sampleA”中。线程 X 现在被 JVM 暂停，线程 Y 开始执行 getSampleA() 并看到“_sampleA”不为空；然后返回哪个未初始化的值，线程 Y 现在开始在结果实例上调用方法，从而导致各种问题；当然，它只会出现在生产中，在奇数时间，

字段 _sampleB 更糟糕的情况是它可能有多个线程初始化单个实例；除了其中一个之外，所有这些最终都将被丢弃。像这样的代码应该包装在一个“同步”块中，但是 volatile 关键字可以解决问题，因为它要求最终存储在 '_sampleB' 中的值具有 Happens-Before 语义，这意味着等号右侧的内容是当等号左边的东西被执行时，保证是完整的。

# javascript - mp4 视频文件不提示在 IE 中保存

> ID：13207280
> 
> 赞同：2
> 
> 时间：2012-11-03T08:06:34.207
> 
> 标签：javascript, internet-explorer, mp4

在我的网络应用程序上单击链接，会下载 mp4 文件格式的视频文件。它适用于除 IE 之外的所有浏览器。

在所有其他浏览器中，单击链接首先会出现一个提示，询问是保存文件还是打开文件。

但在 IE 中，单击链接时，提示永远不会出现，并且文件开始自动播放。

如何解决此问题，以便在 IE 中也开始出现提示并正常工作。

还有任何类型的java脚本函数来解决这个问题。

# c# - 如何从 c# 编码将值插入到选定的列中？

> ID：13207283
> 
> 赞同：-1
> 
> 时间：2012-11-03T08:07:06.810
> 
> 标签：c#, asp.net, sql-server

我在 SQL Server 中有一个表，它有很多列。现在我只想在选定的列中添加值，但是当我这样做时，它会引发如下异常：

> INSERT 语句中的列数少于 VALUES 子句中指定的值。VALUES 子句中的值数必须与 INSERT 语句中指定的列数相匹配。）

如何处理？

这是我的代码：

```
SqlConnection con = getDbConnection();
SqlCommand cmd = new SqlCommand("insert into pi_project_info(control#,pro_name,cust_name,cust_order,order_dt,req_dt,notes) values ('" + tb_control.Text + "','" + tb_project.Text + "','" + ddl_customer_name.Text + "','" + tb_order_no.Text + "','" + dp_order.Text + "','" + dp_order.Text + "','" + dp_req_del.Text + "','" + tb_notes.Text + "' )", con);

 cmd.ExecuteNonQuery();
 MessageBox.Show("Saved successfully"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:12:15.050

你得到的错误很清楚。错误信息永远不会说谎。

> 为什么我得到这个错误？

因为您要将 8 个值插入 7 列。`INSERT`这些值必须与语句中列出的列号相匹配。

> 如何处理？

仅将 7 个值插入 7 列。或者您可能在列列表中缺少列名。

顺便说一句，您的代码*容易受到*SQL[注入](http://en.wikipedia.org/wiki/SQL_injection)的影响。尝试使用参数化查询。有关更多信息，请参阅这篇文章：

*   [**防止 ASP.NET 中的 SQL 注入**](http://www.mikesdotnetting.com/Article/113/Preventing-SQL-Injection-in-ASP.NET)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T08:13:23.407

你有一个重复：

```
 dp_order.Text + "','" + dp_order.Text 
```

只需放下一个，然后就可以了。但是考虑使用Sql参数来避免SQL Injection

# oracle - 如何锁定限制从其他会话读取的表？

> ID：13207285
> 
> 赞同：1
> 
> 时间：2012-11-03T08:07:27.617
> 
> 标签：oracle, plsql, locking

是否可以锁定限制从其他会话读取的表？我会更喜欢“你可以用......解决它”这样的建议，而不是“你为什么需要那个？”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T09:21:27.370

至少你承认这是一个奇怪的要求。

您可以做一些事情来实现这一点。所有这些都需要一些重定向，这意味着表必须由一个单独的模式拥有，而不是用户连接的那个。这是因为 Oracle 没有阻止读取的机制，并且模式所有者始终可以访问他们的表；我们所能做的就是拒绝其他用户访问我们的表。

一种选择是使用视图。大多数时候它指向你的桌子。

```
create or replace view public_user.your_table 
    as select * from private_user.your_table; 
```

但是当您想拒绝访问时，您可以将其切换到另一个空表（显然必须与 YOUR_TABLE 具有相同的投影）。

```
create or replace view public_user.your_table 
    as select * from private_user.empty_table; 
```

然后，当您完成后，您可以再次运行第一条语句。

这种方法相对简单，但需要发布 DDL。这意味着在 YOUR_TABLE 上工作的帐户也必须对 PUBLIC_USER.YOUR_TABLE 拥有权限。此外，发布 DDL 将使依赖于表（视图）的对象无效。

因此，这是一种替代方法。

```
create table lock_table (col1 number not null);
insert into lock_table values (1);

create procedure lock_your_table as
    pragma autonomous_transaction;
begin
     update lock_table set col1 = 0;
     commit;
end;
create procedure unlock_your_table as
    pragma autonomous_transaction;
begin
     update lock_table set col1 = 1;
     commit;
end; 
```

我们有不同版本的视图：

```
create or replace view public_user.your_table 
    as select * from private_user.your_table
                cross join lock_table
        where col1 = 1; 
```

这将返回 YOUR_TABLE 中的所有行或 none 或它们，具体取决于 LOCK_TABLE.COL1 的值。因此，您撤销对您运行的表数据的访问权限`lock_the_table()`并授予它您运行的权限`unlock_the_table()`。

* * *

为什么甲骨文很难做到这一点？因为它使应用程序用户感到困惑。Oracle 实现了多版本并发模型，这意味着我们始终可以读取表，而不管其他人是否在使用该表。面对这种方法，您想做的事情会发生。

# javascript - JavaScript 将文本重写/替换为页面上的 href（链接）

> ID：13207287
> 
> 赞同：2
> 
> 时间：2012-11-03T08:07:35.580
> 
> 标签：javascript

当访问者加载页面时，我需要简单的 JS 代码（纯 JS，无框架）将一段文本重写为链接锚（超链接）。

或者更准确地说，就像许多广告服务一样使用： - 将 JS 放在现有页面上 - 当 JS 被触发时，它会连接到我的服务器，查找一些数据并将页面内容中的某些短语重写为超链接

现在我完成了部分工作，其中被解雇的 JS 联系我的服务器，找到合适的短语，这些短语将转换为超链接，但不知道如何将页面上的短语重写为超链接。

因此，如果任何机构对此有纯 JS 解决方案，请与我分享 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T08:14:02.193

hrefPath 是您可以找到到您的服务器进行重写的路径

```
document.getElementById("ID").href=hrefPath; 
```

或者

```
document.getElementsByTagName('a')[0].href=hrefPath; 
```

将索引更改为 0 到您的要求

# .net - NUnit API 和以编程方式运行测试

> ID：13207289
> 
> 赞同：4
> 
> 时间：2012-11-03T08:07:42.787
> 
> 标签：.net, reflection, nunit

这是我第一次尝试侵入 NUnit 界面，并且面临一些问题。

这就是我想要实现的目标：

*   将一组字符串输入作为代码文件并将它们编译成程序集
*   获取内存中的程序集并将其传递给 NUnit 以识别和运行此代码中的测试

这是我到目前为止所拥有的

```
/// <summary> Validates whether the code files are valid </summary>
public string Validate(string[] codefiles)
{
    // To avoid NullReferenceException within NUnit
    // don't know why this is needed!
    TestExecutionContext.CurrentContext.TestPackage
        = new TestPackage("PersonTest");

    var assembly = BuildAssembly(codefiles);
    TestSuite suite = new TestAssembly(assembly, "PersonTest");
    var result = suite.Run(new NullListener(), TestFilter.Empty);
    return result.IsSuccess ? string.Empty : result.Message;
}

/// <summary> Builds an assembly </summary>
private static Assembly BuildAssembly(string[] code)
{
    var compilerparams = new CompilerParameters(new[] {"nunit.framework.dll"})
    {
        GenerateExecutable = false,
        GenerateInMemory = true
    };
    var results = new CSharpCodeProvider()
        .CompileAssemblyFromSource(compilerparams, code);

    if (!results.Errors.HasErrors) return results.CompiledAssembly;

    throw new Exception(GetErrors(results));
} 
```

这些是我要编译的两个字符串（通过将带有两个元素的字符串数组发送到上面的验证方法中）

```
private const string File1 = @"
    public class Person 
    {
        public string Name {get;set;}

        public Person(string name)
        {
            Name = name;
        }
    }";

private const string ProperInput = @"
    using NUnit.Framework;

    [TestFixture]
    public class PersonTest
    {
        [Test]
        public void CheckConstructor()
        {
            var me = new Person(""Roopesh Shenoy"");
            Assert.AreEqual(""Roopesh Shenoy"", me.Name);
        }
    }"; 
```

问题：

编译进行得很好——生成的程序集甚至有这两种类型。也不将 nunit.framework.dll 传递到引用的程序集中会产生编译异常（动态编译时），因此这意味着 TestFixture/Test addributes 也被识别。

但是，当我调试 TestAssembly 时，测试计数仅显示为零。因此，它没有显示测试成功或失败，而是显示不确定，基本上什么都不做。

我尝试浏览 NUnit 代码库，但还没有得出任何好的结论 - 他们的大多数便捷方法都希望程序集位于文件系统上，所以我试图弄清楚如何做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T17:29:55.773

NUnit 在运行时会创建一些 AppDomain，我想知道是否以某种方式动态地破坏了它并且由于缺少依赖项而看不到您的测试？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:33:23.267

啊，它有效！

我错过了几个步骤（其中固定装置被单独识别并添加到程序集中）+最初是对“InstallBuiltIns”方法的调用。它现在可以工作了，这就是它的外观：

```
//this is needed only once
CoreExtensions.Host.InstallBuiltins();

var assembly = BuildAssembly(codefiles.ToArray());

// to avoid NullReferenceException - don't know why this is needed!
TestExecutionContext.CurrentContext.TestPackage
    = new TestPackage(assembly.GetName().FullName);

var suite = GetTestSuiteFromAssembly(assembly);
return suite.Run(new NullListener(), TestFilter.Empty); 
```

在哪里：

```
/// <summary>
/// Converts a given assembly containing tests to a runnable TestSuite
/// </summary>
protected static TestSuite GetTestSuiteFromAssembly(Assembly assembly)
{
    var treeBuilder = new NamespaceTreeBuilder(
        new TestAssembly(assembly, assembly.GetName().FullName));
    treeBuilder.Add(GetFixtures(assembly));
    return treeBuilder.RootSuite;
}

/// <summary>
/// Creates a tree of fixtures and containing TestCases from the given assembly
/// </summary>
protected static IList GetFixtures(Assembly assembly)
{
    return assembly.GetTypes()
        .Where(TestFixtureBuilder.CanBuildFrom)
        .Select(TestFixtureBuilder.BuildFrom).ToList();
} 
```

BuildAssembly 和以前一样。我不得不重复 NUnit 中的一些逻辑的唯一原因是，由于某种原因，这些在 NUnit 代码库中是私有的！

# bash - bash后台进程修改全局变量

> ID：13207292
> 
> 赞同：31
> 
> 时间：2012-11-03T08:08:01.787
> 
> 标签：bash, variables, background, subprocess, global

我有一个全局 var foo="some value" 和一个后台进程 back_func，我想让后台进程访问 $foo 并修改它的值，这可以被主进程看到。类似于以下内容：

```
#!/bin/bash
foo=0

function back_func {
     foo=$(($foo+1))
     echo "back $foo"
}

(back_func) &
echo "global $foo" 
```

上述脚本的结果是

```
global 0
back 1 
```

怎样才能得到global和back都是'1'的结果？即后台进程的修改可以返回到主进程。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-03T13:08:02.520

# 2019年升级

玩`bash_ipc_demo`添加完成和图形生成器。

## *会合*

如果你想有两个可以通信的独立进程，你必须在两个进程都可以到达的地方放置一个*集合点。*

这可能是一个简单的文件、fifo 管道、unix 套接字、TCP 套接字或其他（Rexx 端口）。

## [bash](/questions/tagged/bash "显示标记为“bash”的问题")和其他[shell](/questions/tagged/shell "显示标记为“外壳”的问题")

Bash 没有与 rexx 端口等效的端口，因此有一个使用会合文件的小示例（在我的 Linux 上）。

我正在使用*共享内存* `/dev/shm`来减少磁盘负载。

### 简单的计数器样本

```
$ back_func() {
    while :;do
        echo $(($(</dev/shm/foo)+1)) >/dev/shm/foo;
        sleep .3;
      done;
} 
```

让玩

```
$ echo 1 >/dev/shm/foo
$ back_func &

$ echo $(</dev/shm/foo)
4

$ echo $(</dev/shm/foo)
21 
```

比现在停止：

```
$ fg
back_func
^C 
```

或者

```
$ kill $!
$
[1]+  Terminated              back_func 
```

### 不止一个变量

对于拥有许多变量，可以通过一种很好的方式：

```
$ back_func() {
    declare -A MYGLOBAL
    local vars
    while :; do
        ((MYGLOBAL["counter"]++))
        IFS=\ / read -a vars <<< "$(</proc/uptime) $(</proc/loadavg)"
        MYGLOBAL["uptime"]=$vars
        MYGLOBAL["idle"]=${vars[1]}
        MYGLOBAL["l01m"]=${vars[2]}
        MYGLOBAL["l05m"]=${vars[3]}
        MYGLOBAL["l15m"]=${vars[4]}
        MYGLOBAL["active"]=${vars[5]}
        MYGLOBAL["procs"]=${vars[6]}
        MYGLOBAL["lpid"]=${vars[7]}
        MYGLOBAL["rand"]=$RANDOM
        MYGLOBAL["crt"]=$SECONDS
        declare -p MYGLOBAL > /dev/shm/foo
        sleep 1
    done
} 
```

然后

```
$ back_func &
[1] 27429
$ . /dev/shm/foo
$ echo ${MYGLOBAL['counter']}
5
$ echo ${MYGLOBAL['lpid']}
27432 
```

从那里开始，为什么不：

```
$ dumpMyGlobal() {
    . /dev/shm/foo
    printf "%8s " ${!MYGLOBAL[@]}
    echo
    printf "%8s " ${MYGLOBAL[@]}
    echo
}

$ dumpMyGlobal
    l15m   uptime      crt    procs     lpid   active     rand     idle     l05m
  counter     l01m 
    0.42 13815568.06       95      554      649        1    31135 21437004.95   
  0.38       73     0.50 
$ dumpMyGlobal
    l15m   uptime      crt    procs     lpid   active     rand     idle     l05m
  counter     l01m 
    0.41 13815593.29      120      553      727        2     3849 21437046.41   
  0.35       98     0.33 
```

或者

```
$ dumpMyGlobal() {
    . /dev/shm/foo
    sort <(
        paste <(
            printf "%-12s\n" ${!MYGLOBAL[@]}
          ) <(printf "%s\n" ${MYGLOBAL[@]})
    )
}

$ dumpMyGlobal
active              1
counter             297
crt                 337
idle                21435798.86
l01m                0.40
l05m                0.44
l15m                0.45
lpid                30418
procs               553
rand                7328
uptime              13814820.80 
```

### 使用快照获取变量

最后`getMyGlobalVar`发挥作用

```
$ declare -A MYGLOBALLOCK   # snapshot variable
$ getMyGlobalVar () { 
    local i sync=false
    [ "$1" == "--sync" ] && shift && sync=true
    if [ -z "${MYGLOBALLOCK[*]}" ] || $sync; then
        . /dev/shm/foo
        for i in ${!MYGLOBAL[@]}
        do
            MYGLOBALLOCK[$i]=${MYGLOBAL[$i]}
        done
    fi
    echo ${MYGLOBALLOCK[$1]}
} 
```

将需要`--sync`重新读取*集合点的*标志，以便让您查看同一*快照*中的每个字段。

```
$ getMyGlobalVar --sync idle
362084.12

$ getMyGlobalVar idle
362084.12

$ getMyGlobalVar rand
1533

$ getMyGlobalVar rand
1533

$ getMyGlobalVar --sync rand
43256

$ getMyGlobalVar idle
362127.63 
```

## 完整可用的演示：

有一个完整的示例：[bash_ipc_demo](http://f-hauri.ch/vrac/bash_ipc_demo.txt)或[bash_ipc_demo.shz](http://f-hauri.ch/vrac/bash_ipc_demo.shz.txt)

您可以通过以下方式使用：

```
wget http://f-hauri.ch/vrac/bash_ipc_demo

source bash_ipc_demo
back_func help
Usage: back_func [-q] [start [-g N]|stop|restart|status|get|dump|help]
   -q    Quiet
   -g N  Start daemon, setting uptime_useGraph to N values

back_func status
Background loop function is not running.

back_func start -g 3600

back_func status
Background loop function (19939) is running. 
```

从那里，如果您`source bash_ipc_demo`在另一个终端中，您可以将列表放入其中。

你甚至可以关闭第一个终端。

```
back_func dump
backFunc_count                     13
backFunc_now      2016-04-06 17:03:19
backFunc_pid                    19939
backFunc_running                  yes
backFunc_start    2016-04-06 17:03:07
cpu_numcores                        2
loadavg_15min                    0.44
loadavg_1min                     0.66
loadavg_5min                     0.54
loadavg_active                      1
loadavg_last_pid                20005
loadavg_process                   650
random                        3714432
uptime_graph_val                 3600
uptime_idle                 425499.43
uptime_up                   495423.53
uptime_usage1sec                 9.90
uptime_usage                    57.06
uptime_useGraph  57.06 8.91 7.50 6.93 12.00 9.41 7.84 9.90 7.50 11.88 7.92 9.31 
9.90 
```

然后，您可以获得一个值

```
back_func get backFunc_pid newVar
echo $newVar 
19939 
```

或建立一个*快速的 cpu*图：

```
lastMinuteGraph -p -o /tmp/lastMinuteGraph.png -W 640 -H 220 
```

这将呈现一个 640x220 PNG 图形，并带有`uptime_graph_val`值。在这种情况下，正如从一个多小时`back_func start`开始调用的那样`-g 3600`，图形显示 640 列上的 3600 peek 和 220 行上的 0-100%：

[![最后一小时图](../Images/01bc19b0819e3c44e28e2442a1bcf51d.png)](https://i.stack.imgur.com/Fvcfb.png)

（*注意：*命令最初被命名`lastMinuteGraph`为这个只存储 60 个值的第一个版本，现在这个*`uptime_graph_val`*用于存储值的数量。因为我使用了`-g 3600`参数，这个命令可以通过命名`lastHourGraph`）。

然后：

```
back_func stop  
back_func get backFunc_end
2019-01-02 16:35:00 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-03T12:16:00.970

根据[此处](http://www.gnu.org/software/bash/manual/bashref.html#Lists)的 Bash 手册，

> 如果命令被控制操作符“&”终止，则shell 在子shell 中异步执行命令。

而且由于在子shell中运行的进程无法修改父shell的环境，我猜你想要做的事情只能通过临时文件/命名管道来实现。或者你可以重新考虑你的方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-03T12:51:01.577

如果主进程（我们称之为 main.sh）是另一个定期运行的 bash 脚本，那么您可以简单地让另一个脚本（我们称之为 other.sh）将值写入文件（我们称之为文件 value.sh） .

**其他.sh**

```
#! /bin/bash  
echo "SOME_VAR=42" > /tmp/value.sh 
```

**主文件**

```
#! /bin/bash  
. /tmp/value.sh  
# Now you can use SOME_VAR 
```

# javascript - 我可以将一个匿名函数作为同一对象中两个不同属性的值吗？

> ID：13207295
> 
> 赞同：0
> 
> 时间：2012-11-03T08:08:16.900
> 
> 标签：javascript, anonymous-function, object-properties

请注意，在下面的示例中，两者`create`和`update`是相同的。我相信有可能`update`只是`create`'s 代码的别名，而无需第二次写出来。

```
this.VAROPS = {
    // variable operations
    create:     function(id, value) { variables[id] = value; }
,   delete:     function(id)        { delete variables[id]; }
,   update:     function(id, value) { variables[id] = value; }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:12:11.380

你可以，你有两个选择：

1.  创建一个实际的命名函数（可能是您范围内的本地引用）并将其分配给两个属性

    ```
    function foo() {}
    var bar = {
        baz: foo,
        xyzzy: foo
    } 
    ```

2.  将第一个属性的值分配给对象文字定义*之外的第二个属性*

    ```
    var foo = {
        bar: function() {}
    }
    foo.baz = foo.bar; 
    ```

# python - 在Python3.2中用引号将输出的电子邮件地址括起来

> ID：13207297
> 
> 赞同：1
> 
> 时间：2012-11-03T08:09:12.037
> 
> 标签：python

我有一个小脚本：

```
#!/usr/bin/python3.2
#takes the bad_emails out of full_emails and leaves us with good_emails

#This is a manually generated list of bad emails (bounce backs)
bad_list = []
with open("bad_emails.txt","r") as bad:
    for line in bad.readlines():
        bad_list.append(line)
#this is a list of ALL email addresses output by AcyMailing
full_emails = []
with open("full_emails.txt","r") as full:
    for email in full.readlines():
        if email in bad_list:
            pass
        else:
            full_emails.append(email)

#this is a final list containing only the email addresses with want
good_list = []
with open("good_emails","w") as good:
    for email in full_emails:
        good.write(email) 
```

简而言之，我要做的是：从我们在 Joomla 中名为 AcyMailing 的邮件程序中获取电子邮件地址列表并将其导出。它具有以下格式：“abc@abc.com”“def@def.com”“etc@etc.etc”

虽然我上面的脚本有效（它摆脱了“坏电子邮件”，只留下了“好电子邮件”，但我还没有找到一种方法让每封电子邮件都像 AcyMailing (Joomla) 使用的那样被引号包围。我已经看到很多人使用正则表达式来完成这样的任务。这是在 python 中执行此操作的唯一方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:13:32.150

您应该能够将字符串用引号括起来：

```
good.write('"' + email.strip() + '"\n') 
```

或者您可以使用`.format`：

```
good.write('"{}"\n'.format(email.strip())) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T08:53:32.490

带有的 for 循环`.readlines()`是多余的。您可以使用[`set.difference()`](http://docs.python.org/2/library/stdtypes.html#set.difference)以下方法找到好的电子邮件：

```
# read all emails from the file, one email per line, skip blank lines
read_emails = lambda file: (line.strip() for line in file if line.strip())

with open('bad_emails.txt') as bad, open('full_emails.txt') as full:
     good_emails = set(read_emails(full)).difference(read_emails(bad))

with open('good_emails.txt', 'w') as good:
     good.writelines('"%s"\n' % email for email in good_emails) 
```

# c# - 根据 ComboBox 中的选定值过滤数据集

> ID：13207303
> 
> 赞同：0
> 
> 时间：2012-11-03T08:10:05.297
> 
> 标签：c#, .net, winforms, c#-4.0, dataset

在我的应用程序中，我尝试使用`RowFilter`或`Select`方法`DataSet`来显示用户在`ComboBox`. 有`DataSet`五列，因此我的项目有五个分别`ComboBoxes`填充了相同的列值`DataSet`。现在我正在尝试在 DataSet 中搜索用户选择的值并填充到 DataGridView 中。我尝试了以下方法：（*不工作*）

```
dgvMain.DataSource = null;
dgvMain.DataSource = dsMainDoctors.Tables[0].Select("Name = '" + cmbDoctorName.Text +"'"); 
```

**或者**

```
dgvMain.DataSource = null;
dgvMain.DataSource = dsMainDoctors.Tables[0].DefaultView.RowFilter = "Name = '" + cmbDoctorName.Text + "'"; 
```

第一次尝试没有显示任何内容，但第二次尝试显示类似于下图的内容，而不是显示列。在这里，我尝试仅使用一列值进行搜索，但我需要使用三个不同的列进行搜索，`DataSet`如何做到这一点？

![在此处输入图像描述](../Images/8af48d9003b161fd5ce92d3d258bc875.png)

我知道我在代码中做错了什么。请建议我应该怎么做才能更正我的代码。请不要使用 linq，因为它受到我的主要成员的限制。但欢迎所有类型的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T09:24:57.213

您可以尝试在过滤操作之后将默认视图分配给数据源

```
dgvMain.DataSource = null;
dsMainDoctors.Tables[0].DefaultView.RowFilter = "Name = '" + cmbDoctorName.Text + "'";
dgvMain.DataSource = dsMainDoctors.Tables[0].DefaultView; 
```

# c - zlib 压缩错误

> ID：13207312
> 
> 赞同：0
> 
> 时间：2012-11-03T08:12:13.670
> 
> 标签：c, compression, zlib

我正在使用从教程中获取的这段代码片段。它旨在压缩输入文件中的数据并将其放入输出文件中。但是，它在运行时会出现分段错误：

```
int map_Compress(char *inmapfile, char *outmapfile)
{
    FILE *infile = fopen(inmapfile, "rb");
    gzFile outfile = gzopen(outmapfile, "wb");
    if (!infile || !outfile) return -1;
    char inbuffer[1];
    int num_read = 0;
    unsigned long total_read = 0;
    while ((num_read = fread(&inbuffer, 1, sizeof(inbuffer), infile)) > 0)
    {
        printf("%d\n",total_read);
        total_read += num_read;
        gzwrite(outfile, inbuffer, num_read);
    }
    fclose(infile);
    gzclose(outfile);
    return total_read;
} 
```

它被这样称呼：

```
int main()
{
    if (map_Compress("maps/main.map", "maps/main.mz") < 0)
    {
        printf("Compression failed, couldn't open file(s)\n");
    }
    return 0;
} 
```

这个段错误是怎么回事？调用它时，我在屏幕上看到的只是：

```
0
1 
```

然后程序崩溃了……这里出了什么问题？我的输入文件有一些我放在那里的垃圾内容，所以该函数不应该将数据压缩到输出文件中吗？

请帮忙，我确定这是我忽略的一个简单问题:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T18:53:52.890

显示的代码没有任何问题会导致崩溃。它必须在其他地方发生。你没有调试器来告诉你它崩溃的地方吗？

有几个小问题需要修复。为了便携性，`infile`应该`NULL`和`outfile`应该比较`Z_NULL`，而不是使用`!`. 如果`fopen()`失败和`gzopen()`成功，您应该`gzclose()`在错误返回以避免巨大的内存泄漏。反之亦然。格式`printf`应该是. `%lu`（您需要稍微提高编译器警告级别。）`printf`可能应该在添加到之后`total_read`，因为最后打印的数字不是读取的实际数字。 `map_compress()`应该返回一个`unsigned long`，而不是一个`int`，因为你正在返回`total_read`。你有一个无关`&`的`fread()`— 没有伤害，但可能会造成混淆，如果您更改`inbuffer`为分配的缓冲区，则会导致失败。

您的代码已正确装配以支持大于一个字节的输入缓冲区。为了效率，它应该更大。至少 4K 或 8K。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-03T08:27:34.817

代替

```
fread(&inbuffer, 1 
```

尝试

```
fread(inbuffer, 1 
```

这里：

```
gzwrite(outfile, inbuffer, num_read); 
```

我不知道这个函数做什么，但可能你试图从只包含一个字节的 inbuffer 中读取 num_read 字节。

# php - 更改另一个函数中的变量值

> ID：13207313
> 
> 赞同：0
> 
> 时间：2012-11-03T08:12:13.430
> 
> 标签：php

我需要一些关于我的 php 代码的帮助。这是我的代码

```
class myclass extends anotherclass {

    var $bAlert;

    function myclass($var) {
        parent::anotherclass($var);
        $this->bAlert = false;
    }

function alert() {
        $this->bAlert = 'true';
        return;
    }

function display() {
        if(!$this->bAlert) {
           return;
        }
        return 'blah blah';
    }
} 
```

现在我想要的是，我有一个函数可以在调用 display() 时在屏幕上显示一些东西，这不是问题，但我只希望它在调用 alert() 后显示。所以这就是我的想法，但它有一个问题。我想在调用 alert() 后将 $bAlert 的值永久更改为 true，当然它不会发生。那么，任何人有任何其他聪明的想法或任何其他方式来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T08:22:34.153

使用单例类

请访问[**`here`**](https://stackoverflow.com/questions/203336/creating-the-singleton-design-pattern-in-php5)以获取有关单身课程的更多信息

**编辑：**

或者你可以使用静态变量和方法

**编辑：**

请参阅此代码：

```
<?php 
class myclass extends anotherclass {
    static public $bAlert;
    function myclass($var) {
        parent::anotherclass($var);
        self::$bAlert = false;
    }
    static function alert() {
        self::$bAlert = 'true';
        return;
    }
    function display() {
        if(!self::$bAlert) {
        return;
        }
        return 'blah blah';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T09:05:58.853

好的，为了清楚起见，我将添加我的实现

*注意：*为此，您需要`session_start();`在需要用户登录的所有脚本页面中使用。

```
class MyClass extends AnotherClass
{
  public static
    $bAlert = false;

  // This is the magic you need!
  public function __construct()
  {
    // Check if the session-var exists, then put it into the class
    if ( array_key_exists('bAlert', $_SESSION) ) {
      self::$bAlert = $_SESSION['bAlert'];

    // Set session with the default value of the class
    } else {
      $_SESSION['bAlert'] = self::$bAlert;
    }
  }

  function setAlert($alertValue = true)
  {
    // Used type-juggle in-case of weird input
    self::$bAlert = (bool) $alertValue;

    // Not needed, but looks neat.
    return;                 
  }

  function display($message = 'Lorum ipsum')
  {
    // This part will **only** work when it's a boolean
    if ( !self::$bAlert ) {
      return;
    }

    return $message;
  }
} 
```

顺便说一句，如果您在 PHP5+ 中使用类，请尝试使用`function __construct(){}`而不是`function MyClassName(){}`. 我知道与其他编程语言相比，它看起来很奇怪，但在 PHP5+ 中它工作得更好。

为了更好地理解类和对象以及会话，此文档可能有用：

*   [PHP 类和对象；基础知识](http://www.php.net/manual/en/language.oop5.basic.php)
*   [PHP 会话](http://nl1.php.net/manual/en/function.session-start.php)

# c++ - OpenCV 拼接

> ID：13207316
> 
> 赞同：0
> 
> 时间：2012-11-03T08:12:34.367
> 
> 标签：c++, opencv, image-stitching, panoramas

我迫切需要 opencv 拼接模块的帮助。我需要使用 opencv 中的“stitch”方法创建全景摄影。以下是我到目前为止的内容.. 但是当我运行程序时出现此错误：需要更多图像。是否有 OpenCV 专家可以帮助我解决此错误？

```
IplImage* img1 = cvLoadImage("/Users/myName/Desktop/image1.jpg", CV_LOAD_IMAGE_COLOR);
IplImage* img2 = cvLoadImage("/Users/myName/Desktop/image2.jpg", CV_LOAD_IMAGE_COLOR);

Mat vecImg1 = img1;
Mat vecImg2 = img2;

Mat allImages;

allImages.push_back(vecImg1);
allImages.push_back(vecImg2);

Mat outputImage;
Stitcher stitchImg = Stitcher::createDefault();
Stitcher::Status s = stitchImg.stitch(allImages, outputImage);
cout << "status: " << s << endl;

cvNamedWindow("stitch images", CV_WINDOW_AUTOSIZE);
cvShowImage("stitch images", &outputImage);
cvWaitKey(0);
cvDestroyWindow("stitch images"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T08:48:47.267

我猜“allImages”应该是类型`vector<Mat>`。

查看 OpenCV 示例“samples/cpp/stitching.cpp”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T08:54:50.770

我实际上找到了解决方法。

在 Xcode 中，在 Build Settings 下，我将 Compiler 类型从 Apple LLVM 更改为 LLVM GCC 4.2，现在我的代码生成全景图像就好了！

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-07T10:08:18.937

在stitcher类函数中，opencv查找图像之间的特征匹配。如果您输入的图像没有或很少有共同特征，则不会将这些图像视为同一视图的图像因此需要更多图像

# c++ - 字符串字符迭代器

> ID：13207321
> 
> 赞同：0
> 
> 时间：2012-11-03T08:13:09.407
> 
> 标签：c++, iterator

刚刚回到用 C++ 编程。我得到的错误：

> 发送的成员开始请求是非类类型 char[30]
> 
> 发送的成员端请求是非类类型 char[30]

```
char sent[] = "need to break this shiat down";
    for(vector<string>::iterator it=sent.begin(); it!=sent.end(); ++it){
        if(*it == " ")
            cout << "\n";
        else
            cout << *it << endl;
    } 
```

我应该将字符更改为字符串还是以不同的方式定义向量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T08:24:19.123

在其他答案中已指出您正在迭代错误的类型。您应该定义`sent`为`std::string`type 和 use`std::string::begin()`并`std::string::end()`进行迭代，或者，如果您有 C++11 支持，您有一些选项可以轻松地迭代固定大小的数组。您可以使用`std::begin`和 std::end` 进行迭代：

```
char sent[] = "need to break this shiat down";
for(char* it = std::begin(sent); it != std::end(sent); ++it){
    if(*it == ' ')
        std::cout << "\n";
    else
        std::cout << *it << "\n";
} 
```

或者您可以使用基于范围的循环：

```
char sent[] = "need to break this shiat down";
for (const auto& c : sent)
{
  std::cout << c << "\n";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T08:29:45.643

您还可以使用流式传输来丢弃空格并添加换行符。

```
#include <iostream>
#include <sstream>
#include <string>
using namespace std;

int main(int argc, char *argv[])
{
    stringstream ss("need to break this shiat down.", ios_base::in);

    string s;
    while (ss >> s)
        cout << s << endl;

    return EXIT_SUCCESS;
} 
```

结果：

> 需要
> 打破 这个
> shiat 下来 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T08:29:33.377

`char sent[]`不是`std::string`字符串文字 - 但在这种情况下，您可以迭代它：

```
int main() {
char sent[] = "need to break this shiat down";
    for(auto it = std::begin(sent); it!=std::end(sent) - 1; ++it){
        if(*it == ' ')
            cout << "\n";
        else
            cout << *it << endl;
    }
} 
```

请注意，我更改`" "`为`' '`- 并跳过了最后一个空终止字符`'\0'`...

现场示例： http: [//liveworkspace.org/code/55f826dfcf1903329c0f6f4e40682a12](http://liveworkspace.org/code/55f826dfcf1903329c0f6f4e40682a12)

对于 C++03，您可以使用这种方法：

```
int main() {
char sent[] = "need to break this shiat down";
    for(char* it = sent; it!=sent+sizeof(sent) - 1; ++it){
        if(*it == ' ')
            cout << "\n";
        else
            cout << *it << endl;
    }
} 
```

如果这是此时未知大小的字符串文字 - 使用 strlen 而不是 sizeof...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T08:16:01.637

您的变量`sent`不是类型`vector<string>`，而是`char[]`.

但是，您的 for 循环会尝试遍历**strings 的向量**。

对于普通数组，使用 C 迭代：

```
 int len = strlen(sent);
 for (int i = 0; i < len; i++) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-03T08:22:57.580

使用`string`代替`char[]`

```
string sent = "need to break this shiat down";
for(string::iterator it=sent.begin(); it!=sent.end(); ++it){
    if(*it == ' ')
        cout << "\n";
    else
        cout << *it << endl;
} 
```

`char[]`没有开始和结束方法..

# django - 添加两个注册表单 django-registration

> ID：13207324
> 
> 赞同：0
> 
> 时间：2012-11-03T08:13:28.413
> 
> 标签：django, django-registration

我正在使用`django-registration`应用程序。我有两个注册表单`A`和`B`. `A`具有默认注册字段。在`B`我添加了自定义字段和信号。两个注册表单也执行以下信号。这就是我添加`if form.is_valid()`. 这很糟糕。我只想在`BForm`被调用时执行。有没有其他选择？谁能帮我改进这段代码？谢谢

```
class BForm(RegistrationForm):
    """
    Subclass of ``RegistrationForm``
    """
    phone = forms.CharField(max_length=100, required=False) 
```

信号

```
def user_created(sender, user, request, **kwargs):
    form = BForm(request.POST)
    if form.is_valid():
        .....
user_registered.connect(user_created) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:31:44.190

在提交这两种形式时，将执行信号。发生这种情况是因为信号是从用户注册后的`register`视图发送的。`django-registration`因此，无论使用何种形式，如果用户注册成功，`user_registered`都会执行信号。

### 关于您对 form.is_valid() 的问题：

由于您拥有`required=False`BForm`phone`字段，即使`phone`POST 数据中不存在，您的数据`BForm`也是有效的，并且您的接收器函数中的代码`user_created`将被执行。

您可以进行以下更改以`user_created`确保仅在使用 BForm 时才执行接收者功能。

```
def user_created(sender, user, request, **kwargs):
    if 'phone' in request.POST:
        .....
        .....
user_registered.connect(user_created) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:17:07.780

根据[Django 关于该主题的文档](https://docs.djangoproject.com/en/1.4/topics/signals/#connecting-to-specific-signals)，您可以简单地执行以下操作：

```
user_registered.connect(user_created, sender=BForm) 
```

它应该可以工作。

# css - 它是如何工作的 css font-weight 值？

> ID：13207331
> 
> 赞同：9
> 
> 时间：2012-11-03T08:14:00.723
> 
> 标签：css

我不明白字体粗细值。当我将其更改为粗体、正常或 600+ 时，也会更改字体。但是将其更改为 100 到 500，不会改变任何内容。为什么会有这些价值观？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-03T09:33:40.283

从 100 到 900的`font-weight`值反映了设计不同粗细字体的排版实践。很少有字体具有所有这些权重，但已选择比例以或多或少地覆盖所使用的不同权重。CSS3 字体草案描述了数字和传统印刷术语（如 Thin、Extra Light 等）之间的[对应关系，但术语确实有所不同。](http://www.w3.org/TR/css3-fonts/#font-weight-prop)

在排版中，每个粗细都是由排版师设计的单独字体。这就是为什么大多数字体只有两种或可能只有一种粗细的原因之一：设计字体需要时间，而时间就是金钱。另一个特别适用于 Web 上使用的字体的原因是显示设备相当粗糙，使得精细的排版通常是一种毫无意义的尝试。特别是，小字体高度在低分辨率设备上效果不佳。

CSS 规范定义了一种将声明的字体权重映射到可用权重的算法。例如，当只有权重 400 和 700 可用（通常情况）时，权重 100、200 和 300 将映射到 400。

但是，在某些情况下，浏览器会在算法上使用粗体字形。这更像是一个问题而不是解决方案，并且由于浏览器的差异，如果您要求不存在的权重，可能会导致奇怪的事情。如果请求的字重为 600 或更大，并且字体只有正常 (400) 字体，则大多数浏览器似乎使用算法粗体。例如，设置`font-weight: bold`文本何时使用 Arial Unicode MS（没有粗体字体）会创建一个人工加粗的 Arial Unicode MS 版本。

常用字体还有其他问题。有时您需要像使用字体名称一样使用字体名称，例如，`font-family: Arial Black`而不是逻辑设置`font-family: Arial; font-weight: 900`。有时这不起作用，因为在*某些*浏览器上只有逻辑方式有效。

*作为一项规则，除非*您使用可下载字体（网络字体） via ，否则不要尝试使用正常和粗体以外的其他粗细`@font-face`，这样您就可以控制字体粗细问题。大多数可下载的字体仅包含两种基本粗细，或仅一种，但也有一些有趣的免费字体具有多种粗细。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T09:06:01.123

font-weight 值改变字体的粗细。

通常仅限所有浏览器。

```
font-weight:bold; 
```

好好工作。

100-500 font-weight 不加粗字体，因为它加粗字体的百分比小于 50%。

并且浏览器会自动将其更改为普通字体而不是粗体

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T08:20:34.497

`font-weight`设置您希望浏览器呈现的字体的*预期权重。*通常，相同字体的不同粗细实际上是不同的字体（考虑`Arial`与`Arial Black`），浏览器甚至可能用不同的字体系列代替更粗的字体。浏览器也不需要具有所有可用权重的所有字体，因此某些`font-family`/`font-weight`组合可能没有任何效果。

浏览器和 CSS 不是排版系统。您不能保证完全按照您指定的方式呈现您请求的样式。如果您想更好地控制字体，请考虑使用`@font-face`声明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T08:22:46.927

基本上，如果具有指定字体粗细的字体不存在，它将被最接近的可用字体粗细替换。这就是为什么您看不到任何变化的原因。

请注意，400 是正常的，700 是粗体，并且大多数网络字体没有比这更多的字体粗细。所以 95% 的时间，你可以坚持使用“粗体”和“正常”来指定 css 中的字体粗细。

# iphone - 使用 AFNetworking 下载大文件

> ID：13207335
> 
> 赞同：4
> 
> 时间：2012-11-03T08:14:14.750
> 
> 标签：iphone, objective-c, ios, cocoa-touch, afnetworking

我正在尝试实现大文件的下载并向用户显示当前进度，但阻止：

```
-[AFURLConnectionOperation setDownloadProgressBlock:] 
```

返回不正确的`bytesRead`和`totalBytesRead`值（它们小于应有的值）。

例如：如果我有一个 90MB 的文件并且当它完全下载时，最新的块调用`setDownloadProgressBlock:`给我`totalBytesRead`大约 30MB 的值。另一方面，如果文件是 2MB 大，最新的块调用会给出正确的`totalBytesRead`2MB 值。

AFNetworking 从 github 更新到最新版本。
如果 AFNetworking 无法正确执行，我可以使用什么解决方案？

**编辑：**我已经确定即使文件没有完全下载（并且每次文件相对较大时都会发生这种情况）AFNetworking 调用成功块：

```
-[AFHTTPRequestOperation setCompletionBlockWithSuccess:failure:] 
```

[我在这里](https://stackoverflow.com/questions/12722436/afimagerequestoperation-returns-image-that-not-downloaded-competely)问了一个关于这种情况的类似问题，但没有得到任何答案。
我可以检查下载的代码和实际文件大小，但`AFNetworking`没有用于继续部分下载的 API。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-03T11:34:52.380

我对 AFNetworking 中的 setDownloadProgressBlock 没有任何问题。

wiki 解释了如何跟踪下载进度： [https ://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-FAQ](https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-FAQ)

对于进度跟踪，您不需要`bytesRead`（在特定回调中写入的字节数）。

示例代码：

```
[downloadoperation setDownloadProgressBlock:^(NSUInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead) {
        float progress = ((float)totalBytesRead) / totalBytesExpectedToRead;
        self.progressView.progress = progress;
    }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T17:57:33.903

**phix23 回答了我最初的问题，所以进度块确实没有问题。我正在回答我的编辑。**

当成功阻止时

```
-[AFHTTPRequestOperation setCompletionBlockWithSuccess:failure:] 
```

调用时，我可以将下载的字节数与预期下载的字节数进行比较（在代码中实现起来并不难）。如果下载的字节数较少 - 我可以从中断的地方继续下载文件。为此，我在 中使用`Range`http 标头`NSURLRequest`，这里有更多信息：
[继续在 iPhone 上中断下载](https://stackoverflow.com/questions/975662/continue-an-interrupted-download-on-iphone)
[如何在 iPhone SDK 上实现可恢复的文件下载](http://surgeworks.com/blog/lab-mobile/iphone/how-to-implement-resumable-file-downloads-on-iphone-sdk)

所以，问题不在于 AFNetworking（NSURLConnection 具有相同的行为），但我认为框架的开发人员可以考虑这种情况。

# gcc - 这是 GCC (mingw) / glibc 错误 - scanf 短裤？

> ID：13207339
> 
> 赞同：0
> 
> 时间：2012-11-03T08:14:47.700
> 
> 标签：gcc, mingw, scanf, short

看下面一段简单的代码

```
int main() 
{
   short x = 0, y = 0;
   scanf("%d", &x);
   scanf("%d", &y);
   printf("%d %d\n", x, y);
   return 0;
} 
```

如果你在这个程序中输入 4 和 5，你会期望在输出中得到 4 和 5。在 windows (mingw) 上使用 GCC 4.6.2，它会产生 0 和 5 作为输出。所以我挖了一点。这是生成的汇编代码

```
movw    $0, 30(%esp)
movw    $0, 28(%esp)
leal    30(%esp), %eax
movl    %eax, 4(%esp)
movl    $LC0, (%esp)
call    _scanf
leal    28(%esp), %eax
movl    %eax, 4(%esp)
movl    $LC0, (%esp)
call    _scanf 
```

虽然我没有做太多的汇编编码，但上面的代码看起来并不正确。好像是建议把x放在esp的30字节偏移处，y放在esp的28字节偏移处，然后把它们的地址传给scanf。因此，当 x 和 y 的地址被处理为长整数（4 字节地址）时，应该发生以下情况：第一次调用将字节 [30,34) 设置为值 0x00000004，第二次调用将设置字节[28, 32) 到值 0x00000005。但是，由于这是一个小端机器，我们将从 30 获得 [0x04 0x00 0x00 0x00]，然后从 28 获得 [0x05 0x00 0x00 0x00]。这将导致字节号 30 重置为 0。

我尝试颠倒 scanfs 的顺序，它起作用了（输出确实是 4 和 5），所以现在，首先填充较小的偏移量，然后是后者（较大的）偏移量。

GCC 可能把这件事搞砸了，这似乎很荒谬。所以我尝试了 MSVC，它生成的程序集有一个明显的不同。变量放置在偏移量 -4 和 -8 处（即它们被认为是 4 个字节长，尽管注释说 2 个字节）。以下是部分代码：

```
_TEXT   SEGMENT
_x$ = -8    ; size = 2
_y$ = -4    ; size = 2
_main   PROC
    push    ebp
    mov ebp, esp
    sub esp, 8
    xor eax, eax
    mov WORD PTR _x$[ebp], ax
    xor ecx, ecx
    mov WORD PTR _y$[ebp], cx
    lea  edx, DWORD PTR _x$[ebp]
    push    edx
    push    OFFSET $SG2470
    call    _scanf
    add esp, 8
    lea eax, DWORD PTR _y$[ebp]
    push    eax
    push    OFFSET $SG2471
    call    _scanf
    add esp, 8 
```

我的问题分为两部分：

*   我没有可以使用的个人 Linux 机器。这是 GCC 问题，还是仅仅是 mingw 问题？

但是，更重要的是，

*   这是一个错误吗？编译器如何确定是否应该将“short”放置在 2 字节偏移或 4 字节偏移处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T08:17:20.947

要使用`scanf()`on `short`，您必须`%hd`在格式字符串中指定。

你在挑衅溢出，因为你在撒谎`scanf()`。打开警告（`-Wall`至少）。您应该从 GCC 收到有关不匹配的投诉。（当你在学习 C 时，用它`-Wall`来捕捉你所犯的愚蠢错误。当你像我一样使用 C 编程超过 25 年时，你将添加更多标志以确保你仍然不是犯愚蠢的错误。并且您将始终确保代码编译干净`-Wall`。）

Mac OS X 10.7.5 上的 GCC 4.7.1 说：

```
ss.c:6:4: warning: format ‘%d’ expects argument of type ‘int *’, but argument 2 has type ‘short int *’ [-Wformat]
ss.c:7:4: warning: format ‘%d’ expects argument of type ‘int *’, but argument 2 has type ‘short int *’ [-Wformat] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T08:51:03.433

Jonathan Leffler 的回答解释了`scanf`. 那么，人们可能想知道如何`printf`工作得很好。

原因`printf`似乎是它是一个可变参数函数，即接受可变数量参数的函数。在 C 标准中（因此在 Intel 平台上实现的 ABI 中），所有小于 int（chars、shorts）的整型值都作为 int 在堆栈上传递给可变参数函数，所有`float`值都作为`double`. 但是，此技巧不适用于`scanf`接收对象*地址*而不是实际值的 。`printf`即使是在上下文中被认为是“良性”的错误也会`scanf`超出它应该分配的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T08:58:30.313

哈！所有关于汇编代码的挖掘都是洗眼！快速谷歌搜索格式标识符产生了[一个相当隐藏的](http://en.wikipedia.org/wiki/Scanf_format_string#Format_string_specifications)（%hi）用于短整数。问题在于代码中的格式说明符，而不是代码本身。

因此，当 scanf 传递 %d 时，它会向传递的地址写入一个 4 字节的数字，然后问题中说明的所有问题都开始出现。

现在，只剩下一个问题了。为什么 GCC 和 VC++ 在程序中变量的定位不同？这只是迂腐的问题（GCC over VC++）还是有实际后果？

# c# - OleDbCommand 不会更新 MS Access 数据库，不会引发错误

> ID：13207340
> 
> 赞同：3
> 
> 时间：2012-11-03T08:15:02.343
> 
> 标签：c#, ms-access, .net-2.0, visual-studio-2012, oledb

我已经在这个问题上停留了几个小时，非常感谢任何帮助。

我正在尝试做的事情：使用 OleDb 更新 2003 MS Access 数据库。
当我执行代码时会发生什么：没有错误消息，但数据库根本没有更新。0 行受影响。
编程语言：C#

额外的信息：

(1) var_workid 是一个int，是我的表的主键。
(2) f2_sub 和 f2_field 是组合框。
(3) f2_date 是一个 DateTimePicker。
(4) f2_details、f2_pacq、f2_daily、f2_area都是TextBox。
(5) 我的连接有效，我可以毫无问题地执行诸如 SELECT ... FROM ... WHERE 之类的语句。(6).NET2.0

在 MS Access 中。
work_id、account_code、field_id、pacquiao、daily、area都是数字。
细节是文本。
date_done 是日期时间

```
private void btn_update_Click(object sender, EventArgs e)
    {
        string update_query;
        OleDbCommand SQLCommand = new OleDbCommand();

        update_query = "UPDATE [work_done] SET [account_code]= @AccountCode, [field_id] = @FieldID, [details] = @Details, [pacquiao] = @Pacquiao,[daily] = @Daily, [date_done] = @DateDone, [area] = @Area WHERE [work_id] = @WorkID;";
        SQLCommand.CommandText = update_query;
        SQLCommand.Connection = database;

        //Parameters
        SQLCommand.Parameters.AddWithValue("@AccountCode", f2_sub.SelectedValue.ToString());
        SQLCommand.Parameters.AddWithValue("@FieldID", f2_field.SelectedValue.ToString());
        SQLCommand.Parameters.AddWithValue("@Details", f2_details.Text);
        SQLCommand.Parameters.AddWithValue("@Pacquiao", f2_pacq.Text);
        SQLCommand.Parameters.AddWithValue("@Daily", f2_daily.Text);
        SQLCommand.Parameters.AddWithValue("@DateDone", f2_date.Value.ToString());
        SQLCommand.Parameters.AddWithValue("@Area", f2_area.Text);
        SQLCommand.Parameters.AddWithValue("@WorkID", var_workid);

        SQLCommand.CommandText = update_query;
        SQLCommand.Connection = database;

        //string message = "";
        //for (int i = 0; i < SQLCommand.Parameters.Count; i++) 
        //{
        //    message += SQLCommand.Parameters[i].Value.ToString() + "\n";
        //}
        //MessageBox.Show(message);

        int response = SQLCommand.ExecuteNonQuery();

        MessageBox.Show(response + " Update successful!", "Message", MessageBoxButtons.OK, MessageBoxIcon.Information);
        this.ParentForm.refresh();
        Close();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T08:20:40.067

我认为 OleDbCommand 不支持这样的参数（[OleDbCommand.Parameters 属性](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.parameters%28v=vs.100%29.aspx)）：

> 当 CommandType 设置为 Text 时，OLE DB .NET 提供程序不支持将参数传递给 SQL 语句或由 OleDbCommand 调用的存储过程的命名参数。在这种情况下，必须使用问号 (?) 占位符。

# c - uint8_t * const LCDMem = (uint8_t *) &LCDM3; 意义

> ID：13207342
> 
> 赞同：0
> 
> 时间：2012-11-03T08:15:17.220
> 
> 标签：c, embedded, msp430

```
uint8_t * const LCDMem = (uint8_t *) &LCDM3; 
```

此代码在 msp430fg4618 培训套件中用于 lcd 配置。谁能解释一下上述代码的含义？

它允许使用`array LCDMem[]`? 我不知道怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T08:21:41.887

LCDMem 不是数组，它是一个指针。此代码为 LCDMem 分配新地址 - LCDM3，因此执行后 LCDMem 将指向 LCDM3。不能说为 LCDM3 分配了多少字节，可能是数组，可能只是一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T08:20:00.700

该运算符`(type) value`称为*强制转换*并实现从一种类型到另一种类型的转换。

您示例中的代码将一个指针（的地址）转换`LCDM3`为另一种类型的指针。`LCDM3`这允许通过指针访问 的内容，`LCDMem`就好像它是一个连续的字节数组（8 位无符号整数）。

例如，`LDCM3`可以是结构对象，或结构数组的第一个元素。上述转换将允许人们读取和写入底层对象的各个字节。

# c# - 这是 Microsoft.CSharp.CSharpCodeProvider 中的文件路径解析错误吗？

> ID：13207346
> 
> 赞同：0
> 
> 时间：2012-11-03T08:16:56.790
> 
> 标签：c#, .net-4.5

这对我来说似乎是一个错误。但是，也许你们可以帮我决定。

这是一个错误吗？

注释的测试用例如下：

```
using System;
using System.CodeDom.Compiler;
using System.Diagnostics;
using System.IO;
using Microsoft.CSharp;

namespace CompilerBugTestCase
{
    internal static class Program
    {
        private const string DirectoryName = "TestSourceCode";
        private const string DirectoryNameTrailingSlash = DirectoryName + "/"; // This is intentionally defined with the wrong kind of slash
        private const string FileName = "Test.cs";
        private const string FilePath = DirectoryNameTrailingSlash + FileName; // By composition, this includes the wrong kind of slash

        private static void Main()
        {
            ShowItDoesWorkA();
            Console.WriteLine("ShowItDoesWorkA executed.");

            ShowItDoesWorkB();
            Console.WriteLine("ShowItDoesWorkB executed.");

            ShowItDoesNotWork();
            Console.WriteLine("ShowItDoesNotWork executed.");

            ShowItDoesNotWorkSimple();
            Console.WriteLine("ShowItDoesWorkSimple executed.");

            Console.WriteLine("Press [ ENTER ] to exit");
            Console.ReadLine();
        }

        private static void Setup()
        {
            if (!Directory.Exists(DirectoryName))
            {
                Directory.CreateDirectory(DirectoryName);
            }

            // Notice that this call has no problems
            // It uses the wrong slash, too!
            if (File.Exists(FilePath))
            {
                File.Delete(FilePath);
            }

            // We're creating a file with the wrong slash here as well.
            File.WriteAllText(FilePath, "using System; namespace TestCode { internal static class TestClass { public static void Main() { Console.WriteLine(\"I work!\"); } } }");
        }

        private static void CompileFiles(string[] files)
        {
            CSharpCodeProvider compiler = new CSharpCodeProvider();
            CompilerParameters parameters = new CompilerParameters()
            {
                GenerateExecutable = false,
                GenerateInMemory = true,
                IncludeDebugInformation = false,
                TreatWarningsAsErrors = true
            };

            CompilerResults results = compiler.CompileAssemblyFromFile(parameters, files);
            if (results.Errors.Count > 0)
            {
                // When looking at this exception, note the path it says it cannot find!
                // You will see it did not translate the path correctly and actually chopped the directory out.
                // Is that really the intended behavior?
                Debug.Fail(results.Errors[0].ErrorText);
            }
        }

        private static void ShowItDoesWorkA()
        {
            Setup();

            string[] files = Directory.GetFiles(DirectoryName);
            CompileFiles(files);
        }

        private static void ShowItDoesWorkB()
        {
            Setup();

            DirectoryInfo directory = new DirectoryInfo(DirectoryName);
            FileInfo[] files = directory.GetFiles();

            string[] paths = new string[files.Length];
            for (int i = 0; i < paths.Length; i++)
            {
                paths[i] = files[i].FullName;
            }

            CompileFiles(paths);
        }

        private static void ShowItDoesNotWork()
        {
            Setup();

            // Here we'll use the path with the wrong kind of slash.
            // It picks up the file just fine.
            string[] files = Directory.GetFiles(DirectoryNameTrailingSlash);
            CompileFiles(files);
        }

        private static void ShowItDoesNotWorkSimple()
        {
            // This is the simplest test case.
            // We hard code the path with the wrong kind of slash and it still crashes.

            Setup();

            string[] files = new string[1] { FilePath };
            CompileFiles(files);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T09:07:50.753

```
 private const string DirectoryNameTrailingSlash = DirectoryName + "/"; 
```

Windows 中的路径分隔符是反斜杠，`"\\"`. 或者更准确地说，它是`Path.DirectorySeparatorChar`。现在 Windows 本身也努力尝试将正斜杠解释为分隔符。然而，其他代码并不总是广泛匹配。就像我在`CodeDOMProvider`该类的源代码中找到的这个片段一样：

```
 internal static bool TryGetProbableCoreAssemblyFilePath(CompilerParameters parameters, out string coreAssemblyFilePath) {
        string multiTargetingPackRoot = null;
        char[] pathSeperators = new char[] { Path.DirectorySeparatorChar };
        // etc..
    } 
```

当您使用正斜杠时，这种代码只会出现故障。最后但同样重要的是，编译选项通过正斜杠传递给编译器。喜欢`/reference`。

通过正确的方式来解决你的问题：使用`Path.Combine()`.

# c# - 同时将文本框 IsEnabled 绑定到两个不同的单选按钮

> ID：13207352
> 
> 赞同：0
> 
> 时间：2012-11-03T08:17:43.000
> 
> 标签：c#, wpf, isenabled

我的 UI (WPF) 中有三个单选按钮。通过选择其中两个，我想启用文本框。并通过选择第三个文本框应该被禁用。我应该使用多重绑定吗？如果是怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:39:11.637

为什么不将`IsEnabled`第三个 RadioButton 设置为“未选中”状态？通常一组单选按钮是排他的，因为一次只能检查一个。

```
<StackPanel>
    <StackPanel.Resources>
        <convert:InvertBooleanConverter x:Key="InvertConverter" />
    </StackPanel.Resources>
    <TextBox IsEnabled="{Binding IsChecked, ElementName=radio, Converter={StaticResource InvertConverter}}" />
    <RadioButton x:Name="radio" IsChecked="True"/>
</StackPanel> 
```

使用自定义转换器

```
using System;
using System.Globalization;
using System.Windows;
using System.Windows.Data;

namespace MyApplication.Converters {
    public sealed class InvertBooleanConverter : IValueConverter {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture) {
            return !(bool)value;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture) {
            return DependencyProperty.UnsetValue;
        }
    }
} 
```

# asp.net-mvc-3 - 如何在 MVC 3 剃刀视图中生成空的 href

> ID：13207355
> 
> 赞同：1
> 
> 时间：2012-11-03T08:18:06.357
> 
> 标签：asp.net-mvc-3

对于初学者来说，我是 MVC3 的新手，所以我的知识有限。我知道我的要求可以通过`<a href="">`在视图页面中硬编码来实现。但是有没有办法使用 HTML 助手（如 ActionLink 或 RouteLink）来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:24:07.287

创建具有空值作为操作和控制器参数的操作链接，并在 htmlAttributes 中添加 href = String.Empty

```
@Html.ActionLink("link", null, null, new { href = String.Empty }) 
```

# tcp - 并发访问 Neo4j REST 服务器期间的高 TIME_WAIT

> ID：13207357
> 
> 赞同：0
> 
> 时间：2012-11-03T08:18:29.877
> 
> 标签：tcp, io, amazon-ec2, amazon-web-services, neo4j

我正在运行一个 Neo4j 实例，并通过 REST 从我的 Ruby on Rails 应用程序访问它。最近，我观察到在适度的流量激增期间，对我的 Neo4j REST 服务器的并发请求最终会出现**太多处于 TIME_WAIT 状态的连接（高达 ~14000）**。这最终导致我的 Web 应用程序出现严重延迟。

我在一个 c1.medium（1.7GiB，2 个 CPU 内核）EC2 实例上运行这个包含大约 10M 边和 2M 顶点的 Neo4j 实例。Neo4j 包装器配置**-Xmx 为 1024M** (1 GiB)。我当前的 ulimit 设置为 100000。

`$ ulimit -n 100000`

我已经提到了[http://docs.neo4j.org/chunked/stable/linux-performance-guide.html](http://docs.neo4j.org/chunked/stable/linux-performance-guide.html)（我在 Ubuntu 12.04 LTS 上）。做一个

`$watch grep -A 1 dirty /proc/vmstat`

在 nr_dirty 中给我 100-150 的间歇值。样本输出：

```
Every 2.0s: grep -A 1 dirty /proc/vmstat                                                                                                                     Sat Nov  3 13:25:53 2012
nr_dirty 148
nr_writeback 0
--
nr_dirty_threshold 83748
nr_dirty_background_threshold 41874
pgpgin 131920234 
```

我可以看到一致的 Block IO（存储在 EBS 上）以及大量的高上下文切换和中断。

```
$ vmstat 1 100
procs -----------memory---------- ---swap-- -----io---- -system-- ----cpu----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa
 0  0 141544  32244   3548 319952    1    1    67    36   16   11 11  1 87  1
 3  0 141544  31640   3556 320036    0    0   124   100 3649 4269 48  4 47  1
 0  0 141544  30648   3564 320116    0    0    76   168 2048 2660 24  3 71  3
 1  0 141544  29780   3580 320124    0    0     0   196 4285 6064 31  6 62  2
 0  0 141544  29780   3588 320116    0    0     0    80  826 2264  6  0 92  2
 0  0 141544  29408   3588 320304    0    0   176    52  952 1873 11  1 86  1
 0  0 141544  29408   3596 320296    0    0     0    40  161  389  0  0 99  0
 0  0 141544  29408   3596 320296    0    0     0     0   47   79  0  0 100  0
 0  1 141544  21720   3596 327992    0    0  7660     0  412  359  5  0 87  8
 0  0 141544  21720   3604 327956    0    0     0    80  224  652  0  1 99  1
 0  0 141544  21720   3604 327968    0    0     0    24  131  359  0  0 99  1
 0  0 141544  21720   3604 327968    0    0     0    24  132  359  0  0 100  0
 0  0 141544  21720   3612 327960    0    0     0    56  141  360  0  0 98  1
 0  0 141544  21100   3612 328580    0    0   608     0   99  173  2  0 97  1
 0  0 141544  20604   3620 328700    0    0   120   172 1172 2381 19  2 77  2
 0  0 141544  20604   3620 328700    0    0     0     0   49   85  0  0 100  0
 0  0 141544  20604   3620 328704    0    0     0    32  172  415  1  0 99  0
 1  0 141544  20480   3628 328696    0    0     0   108  578  755 41  1 56  3
 2  0 141544  20356   3628 328708    0    0     0     0  276   49 50  0 50  0
 1  0 141544  20480   3628 328708    0    0     0     0  287   49 50  0 50  0
 4  0 141560  20960   3648 328076   32   20  1092   356 4959 5501 68  6 23  3
 1  0 141560  20340   3656 328224    0    0   276    88 1181 1208 69  2 25  4
 1  0 141560  20340   3656 328280    0    0     0    16  290   53 50  0 50  0
 1  0 141560  20340   3656 328280    0    0     0     0  277   52 50  0 50  0
 1  0 141560  18868   3696 329116    0    0   844   376 2818 2112 67  2 26  5
 1  0 141560  18868   3696 329132    0    0     0     0  287   56 50  0 50  0
 1  0 141560  18868   3696 329132    0    0     0     0  280   46 50  0 50  0 
```

我不认为 nr_dirty 值太高。如果有人可以确认是否设置，我会很高兴

```
vm.dirty_background_ratio = 50
vm.dirty_ratio = 80 
```

[如http://docs.neo4j.org/chunked/stable/linux-performance-guide.html](http://docs.neo4j.org/chunked/stable/linux-performance-guide.html)中所示，在这里会有帮助吗？

还是**我已经用尽了可用内存（可用内存约为 14M，太低了）-> Block IO -> high TIME_WAIT**？在这种情况下，将这个实例移动到 m1.large（7.5 GiB，2 个 CPU 内核）会有帮助吗？

还有什么我在这里想念的吗？

# python - 无法导入名称 find_packages？

> ID：13207359
> 
> 赞同：1
> 
> 时间：2012-11-03T08:19:16.260
> 
> 标签：python, python-2.7, tweetstream

这可能是一个菜鸟错误，但我处于学习 python 的早期阶段。

*   运行Win7 64位
*   Python 是 2.7.2 64 位，python 在 CMD 提示符下运行良好。
*   [我下载了 TweetStream。](http://pypi.python.org/pypi/tweetstream)及其在c：/下
*   在 pyscripter 中打开 setup.py。
*   执行它，我得到这个错误：

![在此处输入图像描述](../Images/900cb1a19996f68ace4d3ba814827a91.png)

不太确定我做错了什么，或者如何纠正这个问题。
这是一个[简短的截屏视频](http://screencast.com/t/CKaYjLHjdzpd)，如果它不再发光。

编辑 - 回应评论。

```
c:\tweetstream-1.1.1>python setup.cfg install
  File "setup.cfg", line 2
    tag_build =
               ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T08:29:07.350

也许[这](http://wiki.python.org/moin/Distutils/Cookbook/AutoPackageDiscovery)可以帮助你。否则，你可以安装`setuptools`在你的 python 中，我认为你没有安装它。[安装工具](http://pypi.python.org/pypi/setuptools#windows)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-04-25T16:04:33.703

我做了以下事情，它对我有用：

`pip uninstall setuptools`

然后重新安装它：

`pip install setuptools`

# c++ - 模板和专用模板如何

> ID：13207362
> 
> 赞同：4
> 
> 时间：2012-11-03T08:19:49.880
> 
> 标签：c++, template-specialization

这是我不理解的代码

```
#include<iostream>

using namespace std;

template <typename T> 
T calc(T, T) { cout << "template calc" << endl; }

double calc(double, double) { cout << "ordinary calc" << endl; }

template <> 
char calc<char>(char, char) { cout << "template specialisation calc" << endl; }

int main() {

   int ival;
   double dval;
   float fd;

   calc(0, ival); // calls the generic calc(T, T)

   // the following all call calc(double, double)
   calc(0.25, dval);
   calc(0, fd);
   calc(0, 'J');

   calc('I', 'J'); // calls calc(char, char)
} 
```

calc 有 5 个函数调用，所以我将它们称为 1) - 5)，具体取决于它们的位置。

1）有点道理。0 是整数，ival 是整数，调用 calc(T, T) 是有意义的。尽管如此，我觉得我对此的推理是错误的。毕竟，它们都是双精度数，所以如果调用 calc(double, double)，那也是有意义的。所以在这里寻求澄清。

2) 没有戏剧，都是双打，调用 calc(double, double)。简单的。

3) fd 是一个浮点数。可以调用 calc(T, T) 或 calc(double, double)。因为 1) 导致了对 calc(T, T) 的调用，所以我假设这里也是如此，因为我们再次有一个参数为 0，但是，这调用了 calc(double, double)。所以这让我很困惑，特别是这和1）之间的区别

4) 我的第一个想法是 0 是一个有效字符，'J' 也是如此，所以它调用 calc(char, char)。它可能会使用常见的整数类型调用 calc(T, T)。但是不，两者都错了，它调用 calc(double, double)。我对这个很困惑。对我来说毫无意义。

5) 是有道理的，但前提是我应用与 4) 相同的逻辑，这在 4) 中是错误的，所以如果我要看到另一个使用模板的示例，我将不确定要应用什么逻辑。

所以寻找解释为什么这个程序做它做的事情。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:32:39.803

首先，当您在源代码中写入文字“0”时，它的类型为“int”。并且在寻找调用哪个函数时，编译器会选择最匹配的一个。如果不可用，编译器将进行一些隐式类型转换以使其工作。

1) 0 和 ival 都是 int

2)对于double和double，calc(double, double)完全匹配

3)对于int和float，没有找到匹配，所以都转换为double

4)对于int和char，同3)

5)对于char和char，calc(char, char)完全匹配

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T08:37:52.557

我建议您阅读[重载解决方案](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/cplr315.htm)：

> 选择最合适的重载函数或运算符的过程称为重载决策。
> 
> 假设 f 是一个重载的函数名。当您调用重载函数 f() 时，编译器会创建一组候选函数。这组函数包括所有名为 f 的函数，可以从调用 f() 的位置访问这些函数。编译器可以将名为 f 的那些可访问函数之一的替代表示作为候选函数包括在内，以促进重载解决。
> 
> 在创建了一组候选函数之后，编译器创建了一组可行的函数。这组函数是候选函数的子集。每个可行函数的参数数量与您用来调用 f() 的参数数量一致。
> 
> 编译器从一组可行函数中选择最佳可行函数，即当您调用 f() 时 C++ 运行时环境将使用的函数声明。编译器通过隐式转换序列来做到这一点。隐式转换序列是将函数调用中的参数转换为函数声明中相应参数的类型所需的转换序列。对隐式转换序列进行排序；一些隐式转换序列比其他的要好。最好的可行函数是其参数都具有比所有其他可行函数更好或排名相同的隐式转换序列的函数。编译器将不允许编译器能够找到多个最佳可行函数的程序。

1、2 和 5 都是完全匹配的，因此不需要转换。

为了解释 3 和 4，请注意，如果您删除该`double, double`函数，您的程序将无法编译。这是因为[不能](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/cplr315.htm)为 3 和 4 推导出模板参数（因为参数类型不匹配）。因此，只有该`double, double`函数被视为候选函数。

# macos - 如何向 OSX 启动 plist 添加参数以将输出通过管道传输到日志文件？

> ID：13207365
> 
> 赞同：5
> 
> 时间：2012-11-03T08:20:17.993
> 
> 标签：macos, bash, scripting, launchd

我已经尝试了许多不同的变体，但无法让它发挥作用。

我有一个 plist 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
        <key>Label</key>
        <string>com.ilium007.handbrake</string>
        <key>ProgramArguments</key>
        <array>
                <string>/bin/bash</string>
                <string>/Users/ilium007/support/scripts/handbrake/handbrake.sh &gt;&gt; /Users/ilium007/support/scripts/handbrake/logs/handbrake_encode.log</string>
                <!--<string>&gt;&gt;</string>-->
                <!--<string>/Users/ilium007/support/scripts/handbrake/logs/handbrake_encode.log</string>-->
        </array>
        <key>RunAtLoad</key>
        <true/>
        <key>StartInterval</key>
        <integer>60</integer>
</dict>
</plist> 
```

注意里面的评论。

我想将 handbrake.sh 脚本的输出通过管道传输到日志文件并尝试这样做，但在 OSX 上的 system.log 中不断出现“没有这样的文件”错误。

```
Nov  3 18:03:54 macmini com.ilium007.handbrake[15348]: /bin/bash: /Users/ilium007/support/scripts/handbrake/handbrake.sh >> /Users/ilium007/support/scripts/handbrake/logs/handbrake_encode.log: No such file or directory Nov  3 18:03:54 macmini com.apple.launchd.peruser.501[162] (com.ilium007.handbrake[15348]): Exited with code: 127 
```

如果我将 plist 更改为以下内容，它会运行但我没有收到任何日志，所以我假设它只运行第一个参数：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
        <key>Label</key>
        <string>com.ilium007.handbrake</string>
        <key>ProgramArguments</key>
        <array>
                <string>/bin/bash</string>
                <string>/Users/ilium007/support/scripts/handbrake/handbrake.sh</string>
                <string>&gt;&gt;</string>
                <string>/Users/ilium007/support/scripts/handbrake/logs/handbrake_encode.log</string>
        </array>
        <key>RunAtLoad</key>
        <true/>
        <key>StartInterval</key>
        <integer>60</integer>
</dict>
</plist> 
```

我想通过 launchd 运行的命令是：

```
/Users/ilium007/support/scripts/handbrake/handbrake.sh >> /Users/ilium007/support/scripts/handbrake/logs/handbrake_encode.log 
```

日志文件中从未出现任何内容。但是，如果我从终端运行该命令，我会在日志中获得内容。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-03T16:14:20.370

`>>`是一个 shell 运算符，而不是程序参数，并且 launchd 不会通过 shell 传递它的命令（除非你强制它，如@Lauri 的回答）。但是 launchd 确实有自己的重定向标准输出的选项：

```
<key>StandardOutPath</key>
<string>/Users/ilium007/support/scripts/handbrake/logs/handbrake_encode.log</string> 
```

请注意，它会自动附加（等效于`>>`，而不是`>`）。您还可以使用`StandardErrorPath`密钥重定向 stderr。您不能做的一件事是使用`~`（如在 ~/support/scripts/handbrake/logs/handbrake_encode.log 中）——这也是 launchd 无法模拟的 shell 功能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-03T04:24:07.320

标准输出和错误键非常有用，我将我的重定向到第一个终端/shell，如下所示：

```
<key>StandardOutPath</key>
<string>/dev/ttys000</string>
<key>StandardErrorPath</key>
<string>/dev/ttys000</string> 
```

如果您有多个终端，您可以将 ttys000 更改为另一个数字 (ttys001..2)。您可以通过在 shell 中键入来找到终端 ID：

```
tty 
```

这帮助我找出了为什么我在 OS X 中遇到控制台错误，我需要为每个命令提供完整路径，并为我在脚本中 CD'ing 的目录提供完整路径。

例如 grep 是：

```
/usr/bin/grep 
```

macports 安装的命令也使用其他路径，例如：

```
/opt/local/bin/lynx 
```

我还尝试 chown root:wheel plist，但这似乎没有必要，但防止某人将其编辑为任何内容可能不是一个坏主意......

编辑：在我得到一些权限错误后将我的用户改回普通用户，结果证明是因为脚本试图在 / 未经许可的情况下创建文件，也需要添加输出文件的完整路径，这很奇怪，因为它在前一个工作天。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-03T15:27:57.400

重定向运算符不能用作参数。您可以为管道制作另一个脚本或使用`bash -c`.

```
<string>bash</string>
<string>-c</string>
<string>bash ~/Desktop/test.sh >> ~/Desktop/test</string> 
```

# ruby-on-rails - 使用backbone.validation测试骨干模型验证 - 间谍永远不会被调用

> ID：13207366
> 
> 赞同：2
> 
> 时间：2012-11-03T08:20:21.057
> 
> 标签：ruby-on-rails, validation, backbone.js, coffeescript, jasmine

我正在使用[backbone.validation](https://github.com/thedersen/backbone.validation/blob/master/README.md)来验证我的主干模型，并在我的工作中采用了TDD 方法。不幸的是，在测试实际需要的字段时，我似乎无法调用我的间谍。

我一直在关注[使用 Jasmine 和 Sinon 测试 Backbone 应用程序](http://tinnedfruit.com/2011/03/25/testing-backbone-apps-with-jasmine-sinon-2.html)的教程， 除非他`"error"`用`"invalid"`. 这样做的原因是因为我认为backbone.validation 使用了无效/有效回调，而不是如自述文件的事件部分所述。

我的问题是我收到错误消息说我的间谍从未被调用。我尝试将绑定更改回错误/保存，但仍然没有运气。

我的代码如下：

```
class Event extends Backbone.Model
    url: ->
      '/events' + (if @isNew() then '' else '/' + @id)

    validation:
      title:
        required: true
      start_date:
        required: true
      end_date:
        required: true
      description:
        required: true 
```

然后我定义一个测试如下：

```
describe "Event", ->
  beforeEach ->
    @title = "Foo"
    @description = "Bar"
    @start_date = new Date
    @end_date = new Date

    @event = new CPP.Models.Event {
      title: @title
      description: @description
      start_date: @start_date
      end_date: @end_date
    }

  describe "when saving required fields", ->
    beforeEach ->
      @error_spy = sinon.spy();
      @event.bind('invalid', @error_spy)

    it "should not save when title is empty", ->
      @event.save 'title': ""
      expect(@error_spy).toHaveBeenCalledOnce();

    it "should not save when start_date is empty", ->
      @event.save 'start_date': ""
      expect(@error_spy).toHaveBeenCalledOnce();

    it "should not save when end_date is empty", ->
      @event.save 'end_date': ""l
      expect(@error_spy).toHaveBeenCalledOnce();

    it "should not save when description is empty", ->
      @event.save 'description': ""
      expect(@error_spy).toHaveBeenCalledOnce();

    it "should not save when location is empty", ->
      @event.save 'location': null
      expect(@error_spy).toHaveBeenCalledOnce();

  describe "when saving optional fields", ->
    beforeEach ->
      @success_spy = sinon.spy();
      @event.bind('valid', @success_spy)

    it "should save when deadline is empty", ->
      @event.save 'deadline': ""
      expect(@success_spy).toHaveBeenCalledOnce(); 
```

然而，当我运行我的测试时，我似乎得到`Error: Expected Function to have been called once.`了所有这些，并且在进一步检查 @event 对象时，我发现从未调用过间谍。

我认为这可能与通过 `_.extend(Backbone.Model.prototype, Backbone.Validation.mixin);`骨干网.validation自述文件中定义的模型原型的验证混合有关，但我似乎也无法让它工作。

我看过这个问题，[为什么在我运行这个测试时没有调用这个 sinon 间谍？](https://stackoverflow.com/questions/8441612/why-is-this-sinon-spy-not-being-called-when-i-run-this-test)但是，我也没有将答案合并到我的代码中。

如果有人能告诉我我做错了什么，我将不胜感激！

**已修复** 我设法修复我的代码如下：（1）我添加`_.extend Backbone.Model::, Backbone.Validation.mixin`到我的应用程序中

(2) 然后我按照[这个问题](https://stackoverflow.com/questions/10865364/qunit-sinon-js-backbone-unit-test-frustration-sinon-spy-appears-to-fail-to-d)中给出的建议在初始化时绑定我的间谍。代码现在如下所示： 模型：class Event extends Backbone.Model url: -> '/events' + (if @isNew() then '' else '/' + @id)

```
 validation:
      title:
        required: true
      start_date:
        required: true
      end_date:
        required: true
      description:
        required: true 
```

考试：

```
describe "Event", ->
  beforeEach ->
    @title = "Foo"
    @description = "Bar"
    @start_date = new Date
    @end_date = new Date

  describe "when saving required fields", ->
    beforeEach ->
      spy = @error_spy = sinon.spy();
      init = CPP.Models.Event::initialize
      CPP.Models.Event::initialize = ->
        spy(@, "validated:invalid")
        init.call this

      @event = new CPP.Models.Event {
        title: @title
        description: @description
        location: @location
        start_date: @start_date
        end_date: @end_date
      }

    it "should not save when title is empty", ->
      @event.save 'title': ""
      expect(@error_spy).toHaveBeenCalledOnce();

    it "should not save when start_date is empty", ->
      @event.save 'start_date': ""
      expect(@error_spy).toHaveBeenCalledOnce();

    it "should not save when end_date is empty", ->
      @event.save 'end_date': ""l
      expect(@error_spy).toHaveBeenCalledOnce();

    it "should not save when description is empty", ->
      @event.save 'description': ""
      expect(@error_spy).toHaveBeenCalledOnce();

    it "should not save when location is empty", ->
      @event.save 'location': null
      expect(@error_spy).toHaveBeenCalledOnce();

  describe "when saving optional fields", ->

    beforeEach ->
      spy = @success_spy = sinon.spy();
      init = CPP.Models.Event::initialize
      CPP.Models.Event::initialize = ->
        spy(@, "validated:valid")
        init.call this

      @event = new CPP.Models.Event {
        title: @title
        description: @description
        location: @location
        start_date: @start_date
        end_date: @end_date
      }

    it "should save when deadline is empty", ->
      @event.save 'deadline': ""
      expect(@success_spy).toHaveBeenCalledOnce(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:59:39.237

您是否检查过您是否包含添加验证混合的代码？

如果您希望能够在整个应用程序中绑定到模型中的已验证事件，而不是绑定到特定视图，那么您需要通过编写来添加 mixin

```
_.extend(Backbone.Model.prototype, Backbone.Validation.mixin) 
```

可以使用 coffeescript 在您的应用程序中编写

```
_.extend Backbone.Model::, Backbone.Validation.mixin 
```

将此代码添加到您的主 Backbone 应用程序文件中。

完成此操作后，您的间谍问题可能与[此问题](https://stackoverflow.com/questions/10865364/qunit-sinon-js-backbone-unit-test-frustration-sinon-spy-appears-to-fail-to-d)相关联- 您需要在绑定任何事件处理程序之前检查您是否在正确的时间绑定了间谍。上一个链接中的解决方案是通过挂钩初始化来实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T06:22:52.450

我认为您只是绑定到错误的事件。来自[精美手册](https://github.com/thedersen/backbone.validation/blob/master/README.md#events)：

> **已验证**
> 
> 该`validated`事件在执行验证后触发，无论是否成功。`isValid`是`true`或`false`取决于验证的结果。
> 
> ```
> model.bind('validated', function(isValid, model, errors) {
>   // do something
> }); 
> ```
> 
> **验证：有效**
> 
> `validated:valid`执行成功验证后触发该事件。
> 
> ```
> model.bind('validated:valid', function(model) {
>   // do something
> }); 
> ```
> 
> **已验证：无效**
> 
> `validated:invalid`在执行不成功的验证后触发该事件。
> 
> ```
> model.bind('validated:invalid', function(model, errors) {
>   // do something
> }); 
> ```

所以没有`'invalid'`事件，但有`'validated:invalid'`事件。试试这个：

```
@event.bind('validated:invalid', @error_spy) 
```

# android - 在不使用默认/内置应用程序的情况下使用 JavaMail API 在 Android 中发送电子邮件 -> 不工作

> ID：13207371
> 
> 赞同：3
> 
> 时间：2012-11-03T08:20:57.003
> 
> 标签：android

我知道有一些关于这个的话题和一些解决方案，但它对我不起作用......

我曾尝试[使用 JavaMail API 在 Android 中发送电子邮件，而不使用投票最多的默认/内置应用程序](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a?answertab=active#tab-top)，没有错误但也没有电子邮件:(

你能帮我写代码吗？

我有一个按钮，当我点击它时，我希望设备发送电子邮件。我在我的安卓设备上运行该软件，而不是在模拟器上（HTC One S - Android 4.0.4 Stock）

我会感谢你的帮助！谢谢！

# javascript - js代码在编辑器中工作，但不在现场

> ID：13207377
> 
> 赞同：0
> 
> 时间：2012-11-03T08:21:50.860
> 
> 标签：javascript

我用 JS（超级简单的订单）创建了一个简单的购物车总数计算器，但我无法让 JS 代码在实时浏览器中工作，但它在我的编辑器（Coda 2）中工作。代码是：

```
function CalcTotal()
{

var quantity = eval(document.bookorderform.bookqty.value);
if (quantity == undefined) {quantity = 0}
var orderTotal = eval(quantity * 14.99) + (3.99);
document.bookorderform.total.value=orderTotal;

} 
```

测试直播环境在： http: [//leapingbutterfly.org/bookorder.php](http://leapingbutterfly.org/bookorder.php)

*我还没有完成样式或 php 代码，但这不应该干扰 js 代码。

我已经两次和三次检查以确保代码与我的开发环境中的代码相同，我的表单变量也计算了它们各自的 js 变量。我能想到的唯一一件事是，如果我没有正确调用文档，但我之前调用过这样的文档没有问题。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:25:13.863

您的`input`元素具有无效属性：

```
<td>$<input form="bookorderform" type="text" name="total" id="total" size="5" /></td> 
```

如果您删除`form="bookorderform"`，它应该可以正常工作。

此外，您不应该`eval`像这样在代码中使用。只需使用`parseInt`：

```
function CalcTotal() {
    var quantity = parseInt(document.bookorderform.bookqty.value, 10);

    if (isNaN(quantity)) {
        quantity = 0;
    }

    var orderTotal = quantity * 14.99 + 3.99;
    document.bookorderform.total.value = orderTotal.toFixed(2);
} 
```

# java - 将证书链保存在 pkcs12 密钥库中

> ID：13207378
> 
> 赞同：23
> 
> 时间：2012-11-03T08:21:55.603
> 
> 标签：java, security, ssl, bouncycastle, digital-certificate

以下代码：

```
//used Bouncy Castle provider for keyStore
keyStore.setKeyEntry(alias, (Key)keyPair.getPrivate(), pwd, certChain); 
```

其中 certChain 持有最终证书和颁发者证书（即两个证书），
如果 keyStore 是`PKCS12`.

如果密钥库类型为 ，它会保存两个证书`PKCS12-3DES-3DES`。为什么是这样？PKCS12 不认为两个证书都是链的一部分吗？

编辑：这是一个[SSCCE](http://sscce.org/)。这适用于`"JKS"`，失败`"PKCS12"`： 只有链中的第一个证书可以通过`getCertificateChain(String)`. 保存的文件可以在`openssl pkcs12`显示两个证书的情况下打开。

```
 public void testKeyStore() {
    try {
        KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance("RSA");
        keyPairGenerator.initialize(1024);
        KeyPair keyPair = keyPairGenerator.generateKeyPair();
        PublicKey publicKey = keyPair.getPublic();
        PrivateKey privateKey = keyPair.getPrivate();
        Certificate[] outChain = { createCertificate("CN=CA", publicKey, privateKey), createCertificate("CN=Client", publicKey, privateKey) };

        KeyStore outStore = KeyStore.getInstance("PKCS12");
        outStore.load(null, "secret".toCharArray());
        outStore.setKeyEntry("mykey", privateKey, "secret".toCharArray(), outChain);            
        OutputStream outputStream = new FileOutputStream("c:/outstore.pkcs12");
        outStore.store(outputStream, "secret".toCharArray());
        outputStream.flush();
        outputStream.close();

        KeyStore inStore = KeyStore.getInstance("PKCS12");      
        inStore.load(new FileInputStream("c:/outstore.pkcs12"), "secret".toCharArray());
        Key key = outStore.getKey("myKey", "secret".toCharArray());
        assertEquals(privateKey, key);

        Certificate[] inChain = outStore.getCertificateChain("mykey");
        assertNotNull(inChain);
        assertEquals(outChain.length, inChain.length);
    } catch (Exception e) {
        e.printStackTrace();
        fail(e.getMessage());
    }
}

private static X509Certificate createCertificate(String dn, PublicKey publicKey, PrivateKey privateKey) throws Exception {
    X509V3CertificateGenerator certGenerator = new X509V3CertificateGenerator();
    certGenerator.setSerialNumber(new BigInteger("1"));
    certGenerator.setIssuerDN(new X509Name(dn));
    certGenerator.setSubjectDN(new X509Name(dn));
    certGenerator.setNotBefore(Calendar.getInstance().getTime());
    certGenerator.setNotAfter(Calendar.getInstance().getTime());
    certGenerator.setPublicKey(publicKey);
    certGenerator.setSignatureAlgorithm("SHA1withRSA");
    X509Certificate certificate = (X509Certificate)certGenerator.generate(privateKey, "BC");
    return certificate;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-19T08:27:59.110

您的代码有 2 个错误：

**首先：**您没有为证书设置颁发者（客户端证书应由 CA 颁发以建立有效的链）。

**第二：**创建证书链时使用错误的顺序（应该是客户端证书，最后是CA）

这里是重新设计的 SSCCE，它可以正常工作。

```
@Test
public void testKeyStore() throws Exception{
        try {
        String storeName =  "/home/grigory/outstore.pkcs12";
        KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance("RSA");
        keyPairGenerator.initialize(1024);
        KeyPair keyPair = keyPairGenerator.generateKeyPair();
        PublicKey publicKey = keyPair.getPublic();
        PrivateKey privateKey = keyPair.getPrivate();
        Certificate trustCert =  createCertificate("CN=CA", "CN=CA", publicKey, privateKey);
        Certificate[] outChain = { createCertificate("CN=Client", "CN=CA", publicKey, privateKey), trustCert };

        KeyStore outStore = KeyStore.getInstance("PKCS12");
        outStore.load(null, "secret".toCharArray());
        outStore.setKeyEntry("mykey", privateKey, "secret".toCharArray(), outChain);
        OutputStream outputStream = new FileOutputStream(storeName);
        outStore.store(outputStream, "secret".toCharArray());
        outputStream.flush();
        outputStream.close();

        KeyStore inStore = KeyStore.getInstance("PKCS12");
        inStore.load(new FileInputStream(storeName), "secret".toCharArray());
        Key key = outStore.getKey("myKey", "secret".toCharArray());
        Assert.assertEquals(privateKey, key);

        Certificate[] inChain = outStore.getCertificateChain("mykey");
        Assert.assertNotNull(inChain);
        Assert.assertEquals(outChain.length, inChain.length);
    } catch (Exception e) {
        e.printStackTrace();
        throw new AssertionError(e.getMessage());
    }
   }
    private static X509Certificate createCertificate(String dn, String issuer, PublicKey publicKey, PrivateKey privateKey) throws Exception {
        X509V3CertificateGenerator certGenerator = new X509V3CertificateGenerator();
        certGenerator.setSerialNumber(BigInteger.valueOf(Math.abs(new Random().nextLong())));
        certGenerator.setSubjectDN(new X509Name(dn));
        certGenerator.setIssuerDN(new X509Name(issuer)); // Set issuer!
        certGenerator.setNotBefore(Calendar.getInstance().getTime());
        certGenerator.setNotAfter(Calendar.getInstance().getTime());
        certGenerator.setPublicKey(publicKey);
        certGenerator.setSignatureAlgorithm("SHA1withRSA");
        X509Certificate certificate = (X509Certificate)certGenerator.generate(privateKey, "BC");
        return certificate;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:03:08.100

根据您使用的 JDK，有不同的方式来打包您的应用程序。当一些人使用 Linux 和 OpenJDK 以及其他一些人在 Windows 上使用 SunJDK (Oracle) 进行开发时，就会发生这种情况。

最新的有一些额外的配置，以便能够使用最强的算法。如果您的问题与 JCE 政策有关，[本文可以为您提供帮助。](http://www.eyrie.org/~eagle/notes/debian/jce-policy.html)

# oracle - 如何使用 WHERE CURRENT OF 更新游标记录？

> ID：13207379
> 
> 赞同：1
> 
> 时间：2012-11-03T08:22:11.980
> 
> 标签：oracle, plsql, cursor

执行此块时出现“ORA-01410：无效的 ROWID”异常。任何想法为什么？

```
DECLARE
  CURSOR c_orders IS
    SELECT * from orders FOR UPDATE OF no;
  v_order_record c_orders%ROWTYPE;
BEGIN
  OPEN c_orders; 
  LOOP
    FETCH c_orders INTO v_order_record;
    UPDATE orders SET no = 11 WHERE CURRENT OF c_orders;
    EXIT WHEN c_orders%NOTFOUND; 
  END LOOP;  
  CLOSE c_orders; 
END; 
```

但是，如果使用 FOR IN 语法，一切正常：

```
DECLARE
  CURSOR c_orders IS
    SELECT * from orders FOR UPDATE OF no;
BEGIN
  FOR rec IN c_orders
  LOOP
    UPDATE orders SET no = 11 WHERE CURRENT OF c_orders;
  END LOOP; 
END; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T08:27:02.670

将 移至`exit when`-`update`您无法更新不存在的内容。

# php - 在输入框中插入数据库中的值

> ID：13207383
> 
> 赞同：1
> 
> 时间：2012-11-03T08:22:38.343
> 
> 标签：php, javascript, jquery, input

如何更改此代码以将数据库中的值插入网页上的某些输入框中？如果找不到结果，我还需要在页面上添加一些动态文本。

我是否只需要创建 som 变量而不是 for 循环，然后为每个输入框插入类似这样的内容： $("input").val(j[i].optionValue);

```
$(function(){
   $("select#ctlJob").change(function(){
   $.getJSON("select.php",{id: $(this).val()}, function(j){
   var options = '';

   for (var i = 0; i < j.length; i++) {
        options += '<option value="' + j[i].optionValue + '">' + j[i].optionDisplay + '</option>';
   }

   $("#ctlPerson").html(options);
   $('#ctlPerson option:first').attr('selected', 'selected');
   })
 })         
}) 
```

像这样：

```
<div>
<label>number</label>
<input type="text" id="ctlJob"  />
<input type="submit" value="Get info from table and insert in fields" name="submit" />
</div>

<div>
<label>field1</label>
<input type="text"name="field1" maxlength="5" class="input" />
</div>

<div>
<label>Field2</label>
<input type="text"name="field2" maxlength="5" class="input" />
</div>

<label>&nbsp;</label>
<input type="submit" value="Send" name="submit" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:25:28.780

数据库在服务器中，Jquery/Javascript 在客户端。因此，您可以这样做的唯一方法是：

1- 使用 .php 生成 html 时，检索数据库信息并将其与您的 HTML 混合。

2-当您的页面加载时触发 Jquery 事件，然后对 .php 执行 AJAX 请愿以检索并返回您需要的数据，然后通过 Jquery 将其插入到您的 HTML 中。

```
$.post('get_db_info.php', function(data) {
   $("#input_where_data_goes").val(data);
}); 
```

如果您需要一次检索多个值，以 JSON 格式返回它们通常是最好的。

如果你想在你的 HTML 中删除它时从数据库中删除它，它或多或少是相同的：当你从 HTML 中删除它时，调用一个 AJAX 请求到一个从数据库中删除信息的 php，传递一个 ID 作为PHP 的变量。

```
$.post('delete_db_info.php', {deleted_id: deleted_id},function(data) {
   alert("DATA: "+deleted_id+" DELETED!");
}); 
```

# javascript - Google Visualization API：如何将数字轴标签格式化为持续时间？

> ID：13207388
> 
> 赞同：2
> 
> 时间：2012-11-03T08:23:16.750
> 
> 标签：javascript, google-visualization

有没有办法将数字轴标签格式化为持续时间，例如 Avg. 访问 Google Analytics 上的持续时间图表？

例如 160 秒在轴上被格式化为 00:02:40

```
var data = google.visualization.arrayToDataTable([
    ['Date', 'Avg. Visit Duration'],
    [new Date(2012, 9, 1),  233062],
    [new Date(2012, 9, 2),  210645],
    [new Date(2012, 9, 3),  253180],
    [new Date(2012, 9, 4),  296351],    
    ...
]); 
```

访问时长图表截图：http: [//i.stack.imgur.com/dGVtD.png](http://i.stack.imgur.com/dGVtD.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T10:22:55.397

看看我对[这个类似问题](https://stackoverflow.com/questions/7695246/how-to-display-vaxis-in-google-chart-in-time-format/19803417#19803417)的回答......

> 据我所知，没有办法通过 vAxis.format 做到这一点，但您可以使用 vAxis.ticks 实现您想要的效果。例如，如果您传递给图表的“时间”值只是一个以秒为单位的数字，您可以像这样创建一个刻度对象：
> 
> ```
> vAxis: { ticks: [{v:0, f:"0:00.0"}, {v:30, f:"0:30.0"}, {v:60, f:"1:00:0"}] } 
> ```
> 
> 问题是 v 轴将始终显示您通过它的所有刻度。因此，如果您事先不知道 v 轴的范围是多少，您可能必须通过循环数据并确定最高和最低时间来动态生成刻度对象。

# c# - 如何使用 LINQ to Entities 更新现有对象的属性？

> ID：13207390
> 
> 赞同：3
> 
> 时间：2012-11-03T08:23:23.647
> 
> 标签：c#, .net, entity-framework, linq-to-entities, garbage-collection

LINQ to Entities 允许这样做：

```
context.User.Select(u => new Person
{
    Name = u.Name,
    Parent = u.Parent.Name
}); 
```

我只需要一个大`User`表的两个属性，然后使用`Select`创建`Person`对象的方法获取它们，这样我就可以对它进行一些处理。问题是我经常这样做（比如每秒两次），这会伤害`GC`.

所以我决定汇集`Person`对象，但我不知道如何使用 LINQ to Entities 更新现有对象。我可以像上面那样将它作为匿名方法获取，然后将其属性分配给我猜想的解池对象，然后我可以返回解池实例，这至少会使匿名实例在较低的一代中消失，`GC`但是......

我真的更喜欢这样的东西：

```
context.User.Select(u => People.Take(u.Name, u.Parent.Name)) 
```

抛出一个`NotSupportedException`.

*   我可以使用实体框架来更新现有对象的值吗？
*   如果是这样，怎么做？
*   如果没有，我有什么选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T09:03:38.963

> 我可以使用实体框架来更新现有对象的值吗？

不-该`Select`方法用于*投影*而不是更新-您所做的是正确的方法。或者，您可能会发现将`Person` *类*更改为*结构*更有效，因为它消耗的内存更少。

我认为您需要详细说明*“它伤害了`GC`”*。

**更新**

看来 Linq to Entities 不支持投影到`struct`'s （对我来说似乎是一个限制） - 最好的方法是只投影到匿名类型然后你可以`Person`使用你的池机制将你的结果映射到你的类上，例如

```
var users = (from u in context.User
            select new {
                Name = u.Name,
                Parent = u.Parent.Name
            }).ToList().Select(u => People.Take(u.Name, u.Parent)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T08:43:23.243

您不能只从数据库中提取对象的少数属性。如果你想更新它，你必须得到完整的对象，更新它，然后保存更改。

但是如果你真的需要更新几个字段并且不想移动整个对象，你可以使用对象`ExecuteStoredCommand`的方法`context`（MySQL示例）：

```
 context.ExecuteStoredCommand("UPDATE table1 SET field1 = @value1 WHERE field2 = @value2", new MySqlParameter("@value1", 1), new MySqlParameter("@value2", 2)) 
```

它需要您编写一些SQL代码，但可以节省您的时间，因为您无需担心打开连接，创建命令和其他使用常规连接器所需的事情

# c++ - 支持按位运算的精确 X 位大小的变量（c++）

> ID：13207391
> 
> 赞同：0
> 
> 时间：2012-11-03T08:23:30.970
> 
> 标签：c++, optimization, bits

我正在尝试使用 C++ 中的位运算来解决问题，但我真的被卡住了。请帮助我完成以下查询。

1) 是否可以创建变量的 A 和 B，它们在内存中正好占用 100000 位，并且像 A&B 这样的操作是有效的？

2) 有没有一种快速的方法来生成 B(100000bits)，使其前 n 位为 0，最后 m 位为 0，其余为 1？（例如，如果 B 是 10 位，则为 0000011000 之类的数字）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T08:29:45.403

在回答 1 时，当然，这是类的目的。只需创建一个包含 100,000 位（约 12.5K）的类并覆盖该`operator&`方法（二进制方法，而不是地址运算符）。

一个好的开始将是（假设我们有两个整数持有位掩码）：

```
BigBits BigBits::operator &(const BigBits &that) const {
    BigBits bb(*this);
    bb.array[0] = this->array[0] & that.array[0];
    bb.array[1] = this->array[1] & that.array[1];
    return bb;
} 
```

这是未经测试的，但应该给你基本的想法。为了测试它，我必须编写相当多的代码，包括构造函数、析构函数、赋值等等，而这真的应该是*你的*任务:-)

回答两个，这也很容易。唯一的技巧位是两个边缘字节，所有内部字节都可以设置为全 1 位。

为了设置边缘字节，您对字节中的位数使用位除法和模运算，然后使用位掩码来设置它们。位掩码将是`0x80`, `0xc0`, `0xe0`, `0xf0`,`0xf8`等等，每个后续值再增加 1 位。

然后，您将使用`bitmask[bitpos % 8]`其各种形式来设置边缘字节，其数组索引将为`bitpos / 8`.

# python - 逐步让 NLTK 中的麦芽解析器工作？

> ID：13207394
> 
> 赞同：2
> 
> 时间：2012-11-03T08:24:04.217
> 
> 标签：python, parsing, nltk

我已经尝试了所有方法来使 Malt Parser (1.7.1) 与他们的预训练模型（添加了 .mco hack）一起工作。我得到的最接近的是一个 DependencyGraph，每个单词的第一个字母作为标签。我只到过一次，再也回不来了。99% 的时间，我得到的只是：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Python/2.7/site-packages/nltk/parse/malt.py", line 98, in parse
    return self.tagged_parse(taggedwords, verbose)
  File "/Library/Python/2.7/site-packages/nltk/parse/malt.py", line 150, in tagged_parse
    "code %d" % (' '.join(cmd), ret))
Exception: MaltParser parsing (java -jar /Users/walrusthecat/maltparser/malt.jar -w /var/folders/2b/0fpc89fd0rqbj8bf4r7xbh640000gp/T -c /Users/walrusthecat/maltparser/model.mco -i /var/folders/2b/0fpc89fd0rqbj8bf4r7xbh640000gp/T/malt_input.conlltApSTj -o /var/folders/2b/0fpc89fd0rqbj8bf4r7xbh640000gp/T/malt_output.conllrkclZz -m parse) failed with exit code 1 
```

如果我 chown 写入临时文件的目录，或者在 sudo 下执行 python，就会发生这种情况。我试过使用 Malt Parser 1.7.1 和 1.2 。任何事物？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-28T10:04:28.000

NLTK 中的 MaltParser API 在 2015 年 8 月进行了新的更新。

这是让 MaltParser 在 Linux 上工作的分步方法：

**1.下载提取麦芽解析器和预训练模型**

```
cd 
wget http://www.maltparser.org/mco/english_parser/engmalt.linear-1.7.mco
wget http://maltparser.org/dist/maltparser-1.8.1.zip
unzip maltparser-1.8.1.zip 
```

**2.设置环境变量**

*   确保已安装 java
*   下载并提取 Malt 解析器： http: [//www.maltparser.org/download.html](http://www.maltparser.org/download.html)
*   将环境变量设置`MALT_PARSER`为指向 MaltParser 目录，例如`/home/user/maltparser-1.8.1/`在 Linux 中。
*   使用预训练模型时，将环境变量设置`MALT_MODEL`为指向`.mco`文件，例如`engmalt.linear-1.7.mco`来自[http://www.maltparser.org/mco/mco.html](http://www.maltparser.org/mco/mco.html)。

例如。

```
export MALT_PARSER=$HOME/maltparser-1.8.1/
export MALT_MODEL=$HOME/engmalt.linear-1.7.mco 
```

（见[https://github.com/nltk/nltk/wiki/Installing-Third-Party-Software#malt-parser](https://github.com/nltk/nltk/wiki/Installing-Third-Party-Software#malt-parser)）

然后在`python`：

```
>>> from nltk.parse.malt import MaltParser
>>> mp = MaltParser('maltparser-1.8.1', 'engmalt.linear-1.7.mco')
>>> mp.parse_one('I shot an elephant in my pajamas .'.split()).tree()
Tree('shot', ['I', Tree('elephant', ['an']), Tree('in', [Tree('pajamas', ['my'])]), '.']) 
```

**`TL;DR`**

```
alvas@ubi:~$ cd 
alvas@ubi:~$ wget http://www.maltparser.org/mco/english_parser/engmalt.linear-1.7.mco
alvas@ubi:~$ wget http://maltparser.org/dist/maltparser-1.8.1.zip
alvas@ubi:~$ unzip maltparser-1.8.1.zip
alvas@ubi:~$ export MALT_PARSER=$HOME/maltparser-1.8.1/
alvas@ubi:~$ export MALT_MODEL=$HOME/engmalt.linear-1.7.mco
alvas@ubi:~$ python
Python 2.7.11 (default, Dec 15 2015, 16:46:19) 
[GCC 4.8.4] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from nltk.parse.malt import MaltParser
>>> mp = MaltParser('maltparser-1.8.1', 'engmalt.linear-1.7.mco')
>>> mp.parse_one('I shot an elephant in my pajamas .'.split()).tree()
Tree('shot', ['I', Tree('elephant', ['an']), Tree('in', [Tree('pajamas', ['my'])]), '.']) 
```

* * *

有关更多信息，请参阅以下演示：

*   [https://github.com/nltk/nltk/blob/develop/nltk/parse/malt.py#L288](https://github.com/nltk/nltk/blob/develop/nltk/parse/malt.py#L288)
*   [https://github.com/nltk/nltk/blob/f4c16c2f9c46cc42c9b68ae746832b622581c6b5/nltk/parse/malt.py#L435](https://github.com/nltk/nltk/blob/f4c16c2f9c46cc42c9b68ae746832b622581c6b5/nltk/parse/malt.py#L435)

* * *

**在 Windows 上，请仔细**按照打印屏幕步骤操作：[https ://github.com/nltk/nltk/issues/1294#issuecomment-189831647](https://github.com/nltk/nltk/issues/1294#issuecomment-189831647)

总结 Windows 步骤：

*   安装`Conda`（不要先安装 NLTK）
*   安装[`Git`](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)
*   安装[`Java`](http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html)
*   安装（**请勿使用**`NLTK`，直到他们将软件包更新到 NLTK v3.2 ！！！）`pip install -U https://github.com/nltk/nltk.git`**`conda install nltk`**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:56:34.013

您无需提供 .mco 文件的完整路径，只需文件名即可。

[如何使用-malt-parser-in-python-nltk](https://stackoverflow.com/questions/14009330/how-to-use-malt-parser-in-python-nltk)

# css - 三列固定宽度的网页布局和古怪的刷新行为

> ID：13207396
> 
> 赞同：0
> 
> 时间：2012-11-03T08:24:06.723
> 
> 标签：css, xhtml, browser-cache, page-refresh

所以今晚我一直在为客户进行基本的网站设计（供参考：[http](http://thomaswinchester.com/schaeferhvac/index.php) ://thomaswinchester.com/schaeferhvac/index.php ），我得到了一些奇怪的结果。关注的区域是页面中间的三列内容部分。

当我最初将文件上传到我的服务器时，这些列似乎无法正常工作。见下图：

![页面初始视图和正常刷新 (f5)](../Images/c838daef283db8a4e379c7ce83a52d6b.png)

所以我认为这只是文档正在加载一个旧的 .css 文件或其他东西，所以我决定按 ctrl+f5 以获得未缓存的外观。一切似乎都运行良好。见下图：

![第二次查看和未缓存刷新 (ctrl+f5)](../Images/965e1e3330603287250573ca4e166210.png)

这正是我想要的样子。因此，我对设计进行了一些后端更改，然后点击刷新（f5），布局再次中断。然后我按 ctrl+f5 并修复它。我已经断断续续地继续这种模式大约 15 分钟。

我的问题是：为什么会发生这种情况？哪个页面是“实际”页面。例如，我从以前从未访问过该域的笔记本电脑访问了该页面，它加载了损坏的页面。果然，按 ctrl+f5 就解决了！然后，按 f5 打破了它。

在这一点上，我应该提一下，我已经在最新版本的 Chrome、FF、IE、Opera 和 Safari for Windows（尽管 Safari for Windows 似乎没有 ctrl+f5）中测试了这种行为，结果相似。

我做了一些谷歌搜索，发现了一些线索：主要是解释 f5 和 ctrl+f5 之间的区别。我最担心的是，如果它正在加载缓存文件（即使在最新的 css 文件上传后 20 分钟），我该如何阻止这种情况在未来发生？

另外，除非您特别需要，否则我不会发布用于布局的代码，因为我不确定这是问题所在。该页面验证为 XHTML Strict，但这并不意味着我做的一切都是正确的，哈哈。如有必要，您可以通过单击第一段中的 URL 来查看源代码。

提前感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:11:16.733

是的，这个问题一定是关于 CSS 缓存的。

有几种方法可以强制浏览器加载外部文件，它们都是为了让浏览器认为文件已更新：

1.  将 GET 参数添加到 css 文件，例如`time()`，或类似的东西。

    `<link rel="stylesheet" type="text/css" href="style.css?<?php echo time(); ?>" />`

2.  添加 .htaccess 指令以获得某些文件的附加标头（例如 css 文件）：

    `<filesMatch "\.(css)$"> FileETag None <ifModule mod_headers.c> Header unset ETag Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate" Header set Pragma "no-cache" Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT" </ifModule> </filesMatch>`

# c# - 使用 Windows Phone 8 NFC 读取 Mifare 标签？

> ID：13207401
> 
> 赞同：15
> 
> 时间：2012-11-03T08:24:32.270
> 
> 标签：c#, .net, nfc, mifare, windows-phone-8

Windows Phone 8 NFC 是否支持基于 Mifare Ultralight/Classic 的标签？我使用此代码访问诺基亚 Lumia 920 上的 NFC 设备（代码示例取自[NDEF Tag Reader – NFC NDEF Tag Reader](https://projects.developer.nokia.com/nfctagreader)）

```
public partial class MainPage : PhoneApplicationPage
{
    public MainPage()
    {
        InitializeComponent();
        ProximityDevice device = ProximityDevice.GetDefault();
        device.DeviceArrived += DeviceArrived;
        device.DeviceDeparted += DeviceDeparted;
        device.SubscribeForMessage("NDEF", MessageReceived);
    }

    private void DeviceArrived(ProximityDevice sender)
    {
        // this event occurs when I am tapping any of my tags (tried 5 different Mifare Ultralight/Classic)
    }

    private void DeviceDeparted(ProximityDevice sender)
    {
        // this event occurs when I am moving away any tag
    }

    private void MessageReceived(ProximityDevice sender, ProximityMessage message)
    {
        // this event is never fired!!! :(
    }
} 
```

WP8 上的 NFC 有缺陷还是此代码错误？

**更新：** 从本文档[NFC 论坛类型标签](http://www.nfc-forum.org/resources/white_papers/NXP_BV_Type_Tags_White_Paper-Apr_09.pdf)中，您可以发现 Mifare Ultralight 与 NDEF 兼容。Android 设备可以轻松读取此类标签。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-05T07:49:53.407

WP8 和 Lumia 920 支持 Mifrare。我猜这里，但很可能您的 Mifare NFC 标签未格式化/初始化为 NDEF。您可以在购买 NFC 标签时要求您的 NFC 标签为 NDEF 格式。

Lumia 920 芯片（NXP PN544 系列）支持以下标签类型（至少）：

*   类型 1：黄玉家族
*   类型 2：Mifare Ultralight 系列、my-d-move、NTag
*   类型 3：Felica 家族
*   类型 4：Desfire 家族
*   非标准化：Mifare Standard

关于 NFC 标签 NDEF 格式：

*   WP8 只支持对这些标签的 NDEF 级别访问，这意味着标签需要是 NDEF 格式或有一个现有的 NDEF 消息给它（可以是空的）。如果您尝试在非格式化的 NFC 标签上使用 API，它们将无法工作（因为 WP8 缺乏对低级标签类型特定命令/访问的支持）
*   如果您想对标签进行 NDEF 格式化，您有以下选择：在订购标签时要求它们采用 NDEF 格式（或/并包含空的 NDEF 消息和要解锁的标签），使用 PC 的 NFC USB 读/写器硬件或使用带有 NFC 书写应用程序的 Symbian/MeeGo/Android NFC 设备

此致
-- Justin Angel
诺基亚 Windows Phone 开发者体验首席工程师

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T09:20:09.350

您发布的代码应该从 NFC 标签读取[NDEF消息。](http://www.developer.nokia.com/Community/Wiki/Understanding_NFC_Data_Exchange_Format_%28NDEF%29_messages)

虽然 Mifare 也与 NFC 标签一起使用，但相似之处就在于此：它是[一种完全不同的协议](http://www.nxp.com/documents/data_sheet/MF1S503x.pdf)，具有自己的（专有）数据格式。

因此，这段代码并没有真正的错误（WP8 上的 NFC 通常也不是“有缺陷的”），但如果您希望它能够读取 Mifare 标签，那么这种方法对您不起作用。

我不知道是否可以使用 WP8 读取 Mifare 标签：这取决于硬件（因为 Mifare 使用一些非 ISO 框架）以及 API 支持。快速谷歌搜索表明，旧诺基亚手机的 Java SDK 确实支持 Mifare，因此硬件支持可能在那里。但是，没有找到任何适用于 WP8 的东西，所以这很可能需要一些广泛的编码，如果它可以工作的话。

为了让您了解需要什么：在您获得 DeviceArrived 事件（这意味着阅读器检测到 ISO NFC 标签）后，您需要获取卡的 UID。这应该很容易，因为这是标准的 ISO 功能。

接下来，您需要能够直接向标签发送 Mifare 身份验证和读/写扇区命令。由于这些命令不是 ISO 标准的，这就是事情变得更加棘手和依赖于读者的地方。通过这个阶段确实需要协议文档和适用于您手机的 Mifare 测试工具。最后，除非您至少知道一个扇区密钥，否则大多数 Mifare 卡是完全不可读的，并且应用程序数据格式也是专有的（特定于发卡机构），因此即使在所有这些工作之后，也不能保证您可以获得有用的信息卡片...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T13:41:38.080

Windows Phone 8 应用程序只能访问非常高级的库，不能读取非 NDEF 格式的标签。

MIFARE UL 标签必须使用 NFC Forum NDEF Type 2 标准，由于标签的 48 字节用户内存很小，因此该标准过于简单。

如果您有一个低级别的读写器，您可以使您的 UL 标签 NDEF 兼容，而无需修改您的大部分数据，但您将需要牺牲：

*   第 3 页的所有 4 字节 OTP 内存（用于 NDEF 功能容器）
*   用户可编程存储器的前 6 个字节（最少 6 个字节，可能需要填充到 8 个字节以干净地填充前两页）。

标签的格式如下：（参考 - www.nfc-forum.org/specs/spec_list/#tagtypes）

*   第 3 页，字节 0-3：CC [幻数、版本、用户内存大小、读/写]
*   第 4 页，字节 0-1：NDEF MESSAGE TLV HEADER [Type, Length]（推荐类型 ExternalRtd）
*   第 4 页，字节 2-3：记录描述符（包括一个指定记录类型的字符串，建议将其设置为 1 字节长以节省空间，或 3 字节长以整齐填充）
*   第 5 页，字节 0-1 或 3：记录描述符
*   其余页/字节为记录/数据

示例：标签具有消息类型 ExternalRtd 和记录类型“abc”（记录类型在技术上应采用“urn:nfc:ext:companyname.com:typename”格式以完全符合 NDEF，但我们不能使用这么大的空间）

[页码，字节号]，值，注释

*   [3, 0] , 0xE1 , 幻数
*   [3, 1] , 0x10 , NDEF 版本号，主要版本 1，次要版本 0。
*   [3, 2] , 0x06 , 标签的用户内存大小 / 8。在本例中为 6，因为 6*8=48
*   [3, 3] , 0x00 , 允许读/写。0x00 = 允许写入，0x0F = 只读
*   [4, 0] , 0x03 , TLV 中的 T，类型。在这种情况下，一个 NDEF 消息。
*   [4, 1] , 0x2E , TLV 中的 L，长度。在本例中，标记的其余部分为 46 个字节。
*   [4, 2] , 0xD4 , 记录 MB_ME_CF_SR_IL_TNF。在这种情况下，11010100（是第一条记录，是最后一条记录，不是块，是短消息，标头中没有id，类型为“外部类型”）
*   [4, 3] , 0x03 , 记录类型长度。在这种情况下为 3（类型“abc”为 3 长）
*   [5, 0] , 0x28 , Payload Length, 标签的其余部分。在这种情况下 40。
*   [5, 1] , 0x61 , 类型的第一个字节, 0x61 = 97 = 'a'
*   [5, 2] , 0x61 , 类型的第二个字节, 0x62 = 98 = 'b'
*   [5, 3] , 0x61 , 类型的第三个字节, 0x63 = 99 = 'c'

*   标签的剩余 40 个字节，第 6 页到第 11 页，是您的有效负载。

如果您只想初始化标签以便手机可以读取它并完成其余工作，只需写入 CC，并且只写入 L 为零且没有 V 的 TLV。（4,0 = 0x03 和 4,1 =0x00 ）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T08:11:20.127

我遇到了类似的问题，我在 eBay 上购买了 NFC 标签包，但它们不是 NDEF 格式的。WP8 只能使用 NDEF 格式的标签，所以我必须找到一种方法来格式化它们。我在 Twitter 上找到了一个配备 NFC 的 Android 手机的人，他为我格式化了这些标签。太糟糕了，Windows Phone 8 也无法做到这一点。

您可以在官方 WPdev Uservoice 页面上为低级 NFC API 功能投票：
[为 NDEF 格式化和（解锁）标签提供低级 NFC API](http://wpdev.uservoice.com/forums/110705-app-platform/suggestions/3591174-provide-low-level-nfc-api-for-ndef-formatting-and-)

# wcf - Windows 应用商店应用程序中的 mtomMessageEncoding

> ID：13207403
> 
> 赞同：2
> 
> 时间：2012-11-03T08:24:41.770
> 
> 标签：wcf, windows-8, mtom

我在 Windows Store Apps 中编写了以下程序。

```
CustomBinding b = new CustomBinding() ;
TextMessageEncodingBindingElement t = new TextMessageEncodingBindingElement();
HttpTransportBindingElement h = new HttpTransportBindingElement();          
b.Elements.Add(t);
b.Elements.Add(h);

MyService client = new MyService(b, new EndpointAddress("http://localhost:8080/"));

var request = ...;
var response = client.Service000(request); 
```

在 Service000 中，请求消息是 Utf-8 编码，但响应消息是 Mtom 编码，如下所示。

```
mime-version: 1.0
Content-Type: Multipart/Related;
boundary=4aa7d814-adc1-47a2-8e1c-07585b9892a4;
type=application/xop+xml;
start=”&lt;14629f74-2047-436c-8046-5cac76d280fc@uuid>”;
startinfo=”application/soap+xml”

--4aa7d814-adc1-47a2-8e1c-07585b9892a4
Content-Type: application/xop+xml; type="application/soap+xml"
                charset=UTF-8
Content-Transfer-Encoding: binary
Content-ID: <14629f74-2047-436c-8046-5cac76d280fc@uuid>

<soap:Envelope>
....
</soap:Envelope>

--4aa7d814-adc1-47a2-8e1c-07585b9892a4
Content-Type: image/jpeg;
Content-Transfer-Encoding: binary
Content-ID: <1c696bd7-005a-48d9-9ee9-9adca11f8892@uuid>

Binary Scan Data
--4aa7d814-adc1-47a2-8e1c-07585b9892a4-- 
```

我想通过 MtomMwssageEncodeingBindingElement 处理响应消息。但 WinRT 不支持 MtomMwssageEncodeingBindingElement。有没有办法处理 Mtom Enconding 消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T18:25:15.977

不容易。如您所述，WinRT .NET 子集不支持 MTOM 消息编码，因此您无法使用它。如果您控制该服务，则应考虑使用 WinRT 支持的绑定添加一个新端点（例如`BasicHttpBinding`）。如果没有，那么您需要创建一个知道如何解析 MTOM 消息的自定义编码器，这不是一项简单的任务。

# ms-access - 无法在设计视图中打开 Northwind 模板表单

> ID：13207404
> 
> 赞同：0
> 
> 时间：2012-11-03T08:24:54.693
> 
> 标签：ms-access

我需要为库存控制目的建立一个数据库。我真的很喜欢微软提供的免费应用程序（“桌面产品库存数据库”），但我无法在设计视图中打开表单，也无法将这些表单导出到另一个数据库。请告知我需要做什么才能在设计视图中打开表单。非常感谢您，Nathaniel

数据库链接 [http://office.microsoft.com/en-us/ctndirectdownload.aspx?AssetID=TC102483123&Application=AC&Version=14&Result=2](http://office.microsoft.com/en-us/ctndirectdownload.aspx?AssetID=TC102483123&Application=AC&Version=14&Result=2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:22:39.767

许多 Access 2010 示例数据库（包括 Inventory）都设置为 Web 数据库。它们没有与“正常”访问表单相匹配的设计模式。

请参阅：[MS Access (2010) 启用设计视图](https://stackoverflow.com/questions/12354951/ms-access-2010-enable-design-view/12355015#12355015)

# python - Django：默认情况下如何使用 username__iexact 过滤用户？

> ID：13207416
> 
> 赞同：4
> 
> 时间：2012-11-03T08:26:12.747
> 
> 标签：python, django, orm

实现用户名不区分大小写：

我想`iexact`在查询时隐含暗示`user`：

```
user = User.objects.get(username = 'yugal')  # Lowercase
user.id # 1

user = User.objects.get(username = 'YUgal')  # Mixcase
user.id # 1 
```

我怎样才能做到这一点？{不知何故与`UserManager`}

**笔记：**

*   此外，`django.shortcuts.get_object_or_404`似乎将其用作`User.objects.get_query_set().all().get()`. 我们怎样才能让它发挥作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T09:26:41.353

明确的：

```
user = User.objects.get(username__iexact='yugal') 
```

隐式：覆盖`User`模型让您可以覆盖`objects`属性，您可以在其中添加自定义`iexact`处理：

```
class MyUser(User):

    class Meta:
        proxy = True

    objects = MyManager()

class MyManager(UserManager):

    def get(self, *args, **kwargs):

       if 'username' in kwargs:
           kwargs['username__iexact'] = kwargs['username']
           del kwargs['username']
       return super(MyManager, self).get(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:07:57.240

我想我想出了一种为所有数据库查询实现它的方法：

```
###### QuerySet #######
def _filter_or_exclude(self, negate, *args, **kwargs):
    if 'username' in kwargs:
        kwargs['username__iexact'] = kwargs['username']
        del kwargs['username']
    if args or kwargs:
        assert self.query.can_filter(),\
        "Cannot filter a query once a slice has been taken."
    from django.db.models import Q
    clone = self._clone()
    if negate:
        clone.query.add_q(~Q(*args, **kwargs))
    else:
        clone.query.add_q(Q(*args, **kwargs))
    return clone

from django.db.models.query import QuerySet
QuerySet._filter_or_exclude = _filter_or_exclude
###################### 
```

这解决了问题。

# c++ - C++，确定素数

> ID：13207417
> 
> 赞同：3
> 
> 时间：2012-11-03T08:26:14.930
> 
> 标签：c++

我昨天开始读一本关于 C++ 的书。到目前为止，我有 100 页，并用这个数字编写了我的第一个程序。我希望它找出给定的数字是否是质数。

我有两个问题。

1.  我知道我的方法是好的。该程序正在检查每个使程序变大的数字。这样做的理想方法是什么？如果我理解你的答案也没关系，我稍后会简单地阅读命令:)。

2.  我的`"Result+=1"`线路有很大的问题。起初我有`i=1`，这给了我以下结果`7`。

    1111112

嗯，我也知道为什么。对于 6 第一个 for 循环，他找到了一个数字`(1)`和最后一个`2(1,7)`。但这显然不是我想要的工作方式。我希望 Result 成为某种计数器。我怎么做？

编码：

```
#include <iostream>
using namespace std;

// Hauptprogramm

int main ()
{
    // Variablen
    int Prime_number;
    int Result = 0;

    // Abfragen
    cout << "Please enter possible prime number: ";
    cin >> Prime_number;

    // Rechnen
    for (int i=2; i <= Prime_number ; i++)
    {   
            if (Prime_number%i == 0)
            {   
                    Result +=1;
            }
    }

    // Ausgabe
    if(Result == 1)
    {
            cout << "You got a prime number!" << endl;
    }
    else
    {
            cout << "No luck" <<endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T08:39:38.277

你的逻辑很好奇，正如你所说的非常低效。这是一个更好的逻辑

检查从 2 到 Prime_number - 1 的每个数字，如果其中任何*一个*完全除则它*不是*素数，否则是。重要的一点是，你不再寻找一个除数，因为这样你就知道问题的答案了。这是一些执行此操作的代码

```
bool prime = true;
for (i = 2; i < Prime_Number; ++i)
{
    if (Prime_Number % i == 0)
    {
        prime = false;
        break;
    }
}
if (prime)
    cout << "You got a prime number!" << endl;
else
    cout << "No luck" <<endl; 
```

我认为您在尝试中错过的两点是变量的使用，以及一旦您知道它完成就可以退出循环`bool`这一事实。`break`

顺便说一下，这段代码可以进一步改进，但这对你来说是一个练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-13T11:56:40.433

在以下代码中可以看到更有效的方法

```
#include<iostream>
#include<algorithm>
bool isprime(int a)
{
    int count=0;
    for(int i=2;i<sqrt(a);i++)
    {
        if(a%i==0)
        {count++;}
    }
    if(a==1||count!=0) return false;
    else return true;
}
int main()
{
  int a;
  cin>>a;
  if(isprime(a))
  {
    cout<<"number is prime";
  }
  else cout<<"number is not prime";
  return 0;
} 
```

如您所见，这以指数方式减少了 isprime 函数中的测试用例数量，从而使代码更加高效。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T08:36:41.870

关于您的问题，我认为您的方法非常可靠：

为什么我从 i=2 开始？

好吧，我对素数的定义是一个有 2 个因数的数字：1 和它本身。因此，当您从一个开始时（正确）计算一个额外的因子，因为 prime_number 完全可以被 1 整除。这会给您一个结果计数 2，因为它找到了两个因子。

更好的方法是什么？

有几种更好的方法，有些更复杂；但是，您现在拥有的算法可以通过几种直接方式轻松改进：

*   一旦你找到任何不是 1 或素数的因子，那么你就知道这个数不是素数，只要有任何 (primenumber%i)==0 你就可以设置一个像*IsPrime=false*这样的标志并 *跳出*循环.
*   即使对于素数，您也不需要上升到素数，因为可能的最大因素是素数/2 - 因此您的循环速度会快两倍，并且在这种情况下也能正常工作。2\. 编辑：实际上，如果您考虑一下，素数的平方根是一个足够好的限制，因为所有因素都是成对出现的，而较小的因素总是在这个限制之内。

希望你学习愉快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-21T04:42:39.500

```
#include <stdio.h> 
#include <cmath>

bool BePrime(unsigned int N){
    if(N == 2) return true;

    for(int i = 2; i <= int(sqrt(N)); i++) {
        if(N%i == 0) return false;
    }
    return true;
}

main(){
    int a;
    while(scanf("%d",&a)){
        if(BePrime(a)) {
            printf("%d is Prime\n", a);
            continue;
        }
        printf("%d is not Prime\n", a);
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T11:32:01.540

您也可以检查以下代码：

```
#include "time.h"
#include "iostream"
#include "conio.h"
using namespace std;

int main()
{
    div_t divresult;
    time_t t1,t2;   
    t1 = time(NULL); 
    int prime[1501] = {0};
    prime[1] = 2;
    prime[2] = 3;
    prime[3] = 5;
    prime[4] = 7;
    prime[5] = 11;
    int count = 6;

    for(int i = 12; count < 1500; i +=1)
    {
        bool Bprime = true; 
        for(int j = 1; j < count; j+=1)
        {
            if(i%prime[j] == 0) Bprime = false;
        }
        if(Bprime == true) prime[count++] = i;
    }
    t2 = time(NULL);
    divresult = div(t2-t1,60);
    cout<<divresult.quot <<" min "<<divresult.rem<<" sec"<<endl;
    int n = 0;
    cout<<"Give Value of N:";
    cin>> n;
    cout<<n<<"th prime is: "<<prime[n-1]<<endl;     

    _getch();
    return 0;
} 
```

# c# - 将用户控件投射到另一个控件中

> ID：13207421
> 
> 赞同：0
> 
> 时间：2012-11-03T08:26:26.267
> 
> 标签：c#, asp.net, user-controls

我正在使用 .NET 框架 3.5 开发一个 ASP .NET 项目。我正在尝试将用户控件投射到另一个用户控件中，因此我正在使用以下代码。

在 test.ascx 文件中：

```
<%@ Reference Control="test2.ascx" %> 
```

在 test.ascx.cs 文件中：

```
 private ASP.test2_ascx testing;
    protected void Button1_Click(object sender, EventArgs e)
    {
 testing = (ASP.treestructure_ascx)LoadControl("test2.ascx");
                testing.aload(); 
```

问题是单词“ASP”下划线表示“Error17 找不到类型或命名空间名称'ASP'（您是否缺少 using 指令或程序集引用？）”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T12:01:33.680

你不能马上做。Make`treestructure_ascx`和`test2_ascx`files 继承自具有签名 aload 的接口，该签名实现了这两个控件。

```
public interface ICustomLoader
{
    public void aload();
} 
```

对于这两个控件：

```
public class treestructure_ascx : UserControl, ICustomLoader
{
    public void aload()
    {
        //your loading codes goes here
    }
} 
```

对于 test2_ascx

```
public class test2_ascx : UserControl, ICustomLoader
{
    public void aload()
    {
        //your loading codes goes here
    }
} 
```

因此，您将能够投射控件并使用`LoadControl`，您将能够访问您的`aload()`

```
protected void Button1_Click(object sender, EventArgs e)
{
    var testing = (ICustomLoader)LoadControl("test2.ascx");
    testing.aload();
} 
```

注意：我猜你不需要`ASP`命名空间。

# assembly - 如何在汇编中字节数的 2 位之间进行交换

> ID：13207434
> 
> 赞同：3
> 
> 时间：2012-11-03T08:28:30.807
> 
> 标签：assembly, x86, bit-manipulation

*我正在使用程序集 8086 (x86-32)

交易很简单，我在寄存器 AL 中有一个字节大小的数字（8 位），现在，我需要在寄存器中的数字的第 1 位（右二）和第 4 位（右五）之间进行交换铝。

例如：如果 Al 有这个数字：00010000B 现在它将有 00000010B。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T10:12:22.147

一对二指令回答：

```
and eax, $255; // mask off extra bits  -- perhaps not needed, if upper bits are 
mov al, look_up_table[eax] // guaranteed to be zero 
```

三个指令单独使用 al。

```
test al, $0x12
jpe skip       ;; parity was even (aka the bits are the same)
xor al, $0x12  ;; toggle both bits
skip: 
```

操作原理：比特只有在不同时才需要交换。0 变为 1 和 1 通过将它们与 1 异或变为 0。这两个位同时受到影响。

如果存在条件 cmovpo 或 cmovpe，则可以避免跳转。但在这种情况下，该序列至少需要 4 条指令（取决于某个寄存器是否已知包含零或位掩码）。

或者，如果 & 掩码仅设置了一个位，则可以选择测试。这是通过表达式 (a== (a&-a)) 完成的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T08:47:05.040

你可以试试这个：

```
mov BL, AL
mov BH, AL

and BL, 2h   //empty all bits except first
and BH, 10h  //empty all bits except fourth

shl BL, 3    //move bit 1 to position of bit 4
shr BH, 3    //move bit 4 to position of bit 1

and AL, edh  //empty first and fourth bits
or AL, BL    //set bit 4
or AL, BH    //set bit 1 
```

AL 寄存器包含结果。此外，您可能需要存储在寄存器 BX 中的数据。如果你这样做，那么在解决方案前面加上

```
push BX 
```

end 追加到末尾

```
pop BX 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T09:19:46.930

另一种选择（7 条指令）：

```
mov ebx,00010010b         ;ebx = 00010010
and ebx,eax               ;ebx = 000A00B0
lea ebx,[ebx+ebx*4]       ;ebx = 0A0AB0B0
rol bl,5                  ;ebx = AB0B00A0
and ebx,00010010b         ;ebx = 000B00A0
and al,11101101b          ;al = abc0ef0g
or  al,bl                 ;al = abcBefAg 
```

还有另一种选择（也是 7 条指令）：

```
ror al,1           ;ax = ????????.gabcAefB
ror ax,1           ;ax = B???????.?gabcAef
ror al,3           ;ax = B???????.Aef?gabc
rol ax,1           ;ax = ???????A.ef?gabcB
rol al,3           ;ax = ???????A.gabcBef?
ror al,1           ;ax = ????????.AgabcBef
rol al,2           ;ax = ????????.abcBefAg 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T10:00:58.083

我添加了我的六个指令替代方案：

```
xor   bl, bl  ; -> clear work register
btr   ax, 1   ; -> second bit to carry, clear that bit in al
cmovc bl, 8   ; -> set bit at bitpos 3
btr   ax, 4   ; -> fifth bit to carry, clear that bit in al
rcl   bl, 2   ; -> set bit at bitpos 2, shift bitpos 3 -> 5
or    al, bl  ; -> merge bits 
```

注意：这只是一个学术练习。您可能不想要使用 btr 指令的代码，因为它们很慢。至少上次我尝试过使用它们。另外：未经测试。

需要 486 指令集。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-03T10:08:31.247

单独使用 al 的 6 条指令

```
 ; al       | cf
           ; 76543210 | x
ror al, 5  ; 43210765 | x
bt  al, 4  ; 43210765 | 1
rcl al, 4  ; 07651432 | 1
bt  al, 2  ; 07651432 | 4
rcr al, 3  ; 32407651 | 4
rol al, 4  ; 76513240 | x 
```

# android - Android Wifi 硬件模块

> ID：13207443
> 
> 赞同：0
> 
> 时间：2012-11-03T08:29:52.270
> 
> 标签：android, linux

是否可以使用 adb 获取我设备的 wifi 硬件信息。我正在寻找制造商、模块信息等信息。

这是我尝试过的。

```
adb shell
lspci
lspci | less
lspci | grep -i intel
lspci | grep -i wireless 
```

还有这个

```
adb shell 
```

输出

```
shell@android:/ $ lspci
lspci: applet not found
1|shell@android:/ $ modinfo iwlagn
/system/bin/sh: modinfo: not found
127|shell@android:/ $ 

modinfo iwlagn 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:52:31.083

您可以尝试上传包含该模块的修改过的busybox（lspci）

# python - PermissionError：Python 中的 [Errno 13]

> ID：13207450
> 
> 赞同：93
> 
> 时间：2012-11-03T08:32:07.420
> 
> 标签：python, python-3.x

刚开始学习一些 Python，我遇到了如下所述的问题：

```
a_file = open('E:\Python Win7-64-AMD 3.3\Test', encoding='utf-8')

Traceback (most recent call last):
  File "<pyshell#9>", line 1, in <module>
    a_file = open('E:\Python Win7-64-AMD 3.3\Test', encoding='utf-8')
PermissionError: [Errno 13] Permission denied: 'E:\\Python Win7-64-AMD 3.3\\Test\ 
```

似乎是文件权限错误，如果有人能发光，将不胜感激。

**注意：不确定 Python 和 Windows 文件是如何工作的，但我以管理员身份登录到 Windows，并且该文件夹具有管理员权限。**

我尝试更改`.exe`属性以以管理员身份运行。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-11-03T08:49:56.137

做的时候；

```
a_file = open('E:\Python Win7-64-AMD 3.3\Test', encoding='utf-8') 
```

...您尝试将*目录*作为文件打开，这可能（并且在大多数非 UNIX 文件系统上）会失败。

你的另一个例子；

```
a_file = open('E:\Python Win7-64-AMD 3.3\Test\a.txt', encoding='utf-8') 
```

如果您只有`a.txt`. 不过，您可能希望使用原始（`r`-prefixed）字符串，以确保您的路径不包含任何转义字符，例如`\n`将被转换为特殊字符的转义字符。

```
a_file = open(r'E:\Python Win7-64-AMD 3.3\Test\a.txt', encoding='utf-8') 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2019-09-24T16:20:56.403

对我来说，我正在写入一个在 Excel 中打开的文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-03-20T12:16:52.700

对我来说，当我尝试将文件写入文件夹并想确保该文件夹存在时出现此错误。我不小心使用了：

```
path = Path("path/to/my/file.txt")
path.mkdir(parents=True, exist_ok=True)
with open(path, "w") as file:
    ... 
```

但是第二行的意思是“在*这个确切的路径上创建一个**目录*（并且也创建它的父目录，而不会因为它们已经存在而抛出错误）”。然后第三行抛出 a ，因为您当然不能在*目录*路径上使用！第二行应该是：*`PermissionError``open()`*

 **```
path.parent.mkdir(parents=True, exist_ok=True) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-04T19:37:48.440

当我不小心尝试通过命令提示符运行我的 python 模块时，我遇到了这个问题，而我的工作目录`C:\Windows\System32`不是我运行 python 模块的常用目录**

# java - ProGuard - 如何保留方法并同时混淆它们？

> ID：13207451
> 
> 赞同：8
> 
> 时间：2012-11-03T08:32:16.987
> 
> 标签：java, android, obfuscation, proguard

我正在尝试手动混淆我的 Android 应用程序（是的，我知道，这很痛苦），为此我需要保留我实现的所有方法，同时还要使用 ProGuard 混淆它们。

我尝试过像这样更改配置：

```
-keep class com.project.x.* {

} 
```

但它保留了所有类名和方法名，并且仍然删除了我未使用的代码。

我能做些什么来解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-07T14:23:12.177

正如 CommonsWare 所解释的，您似乎不太可能希望保留未使用的方法但又将其名称混淆，但 ProGuard 支持如下：

```
-keepclassmembers,allowobfuscation class com.project.x.** {
    <methods>;
} 
```

这强制保留指定包（及其子包）中的所有方法（但不是所有类），但仍允许对其名称进行混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T08:59:50.620

使用保持选项修饰符 - 见[这里](http://proguard.sourceforge.net/index.html#manual/usage.html)

我想你会做这样的事情：

```
-keep,allowoptimization class com.project.x.* {

} 
```

但是引用文档：“此修饰符仅对实现不寻常的要求有用。”

您是否尝试过逆向工程以查看这是您需要做的事情？我对 keep 的印象是，它将保留类作为应用程序的入口点，但它不会阻止它在内部优化和混淆这些类的方法。

也许您想要的只是`-keepnames`查看上面的链接以获取详细信息。

# php - 带有过滤器和性能的 Codeigniter 分页

> ID：13207456
> 
> 赞同：0
> 
> 时间：2012-11-03T08:33:12.947
> 
> 标签：php, codeigniter, pagination, limit, offset

我在使用 CI 分页时遇到问题，这是我的代码。

控制器：

```
$per_page = 20;
$offset = $this->uri->segment(2); 
$results = $this->model_users->search($keywords,$limit = $per_page,$offset,$order_by,$expire,$type = $q_type);

$pagination['per_page'] = $per_page;
$pagination['base_url'] = site_url('users');
$pagination['first_url'] = site_url('users');
$pagination['total_rows'] = $this->db->count_all_results('ci_users');
$pagination['uri_segment'] = 2;
$pagination['first_link'] = 'First';
$pagination['last_link'] = 'Last';
$pagination['next_link']  = false;
$pagination['prev_link']  = false;
$pagination['num_links'] = 6;

$this->pagination->initialize($pagination);

$view['users'] = $results; 
```

该模型：

```
function search($keywords = false,$limit = false,$offset=false,$order_by = false,$expire = false,$type = 'get'){

 if($keywords){
   $this->db->select("*,
           MATCH(".$type.") 
           AGAINST ('".$keywords."' IN BOOLEAN MODE)
            AS _score",false /*important*/);
   $this->db->having('_score > 0');
   $this->db->from('ci_users');
  $this->db->order_by('_score','DESC');
}else{
  $this->db->select('*');
  $this->db->from('ci_users');
}
  if($expire){

  $this->db->order_by('expire_datetime',$expire);
  }
  if($order_by){
  $this->db->order_by("id",$order_by);
 }

  if($limit){
  $this->db->limit($limit,$offset);
}

 $query = $this->db->get();

  return $query->result();

} 
```

当我单击链接 1 或链接 2 时一切正常，当我单击链接 3 时没有结果返回并且不明白为什么。

使用此代码可以修复，但对站点性能不利，因为我同时运行 2 个搜索查询：

```
 $pagination['total_rows'] = count($this->model_propos->search($keywords,false,false,false ,false,$type = $q_type)); 
```

感谢谁会帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:44:54.330

好的，正如已经解释的那样，您正在计算所有记录，然后返回过滤的结果集。您需要做的是仅计算过滤后的结果。这很容易通过简单地更改 total_rows 来完成，幸运的是，您的查询已经设置为通过在函数本身中设置默认值来执行此操作。

```
$pagination['total_rows'] = $this->db->count($this->model_users->search($keywords)); 
```

这将只返回结果集的计数，包括您的关键字，这是您希望分页工作的实际计数。

您可能必须更改模型中的 if 语句以将完整记录集返回为：

```
if($keywords && keywords != '') 
```

但是你必须测试那个。

# c - 在c中执行汇编代码

> ID：13207459
> 
> 赞同：3
> 
> 时间：2012-11-03T08:33:47.983
> 
> 标签：c, assembly, nasm

我想知道是否有办法调用 .c 汇编代码？我想将此代码放在我的 .c 文件中

我想在 .c 文件中执行的汇编代码以返回地址

```
1\. mov eax, 0x2d
2\. mov ebx, 0
3\. int 0x80 
```

我知道答案是 put eax。

这是 .c 文件的一部分：

```
1\. void function(void)
2\. {
3\. void *sp;
4\. sp = eax;
5\. fprintf(stderr, "system break:   %p\n", sp);
6\. } 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T08:36:11.020

执行此操作的能力是特定于编译器的。Gcc[使用其`asm`关键字 extension](http://www.ibm.com/developerworks/linux/library/l-ia/index.html)允许这样做，而 Visual Studio 实现了[不同的扩展](http://msdn.microsoft.com/en-us/library/4ks26t93%28v=vs.80%29.aspx)。

请注意，除了不可移植到其他架构的明显问题之外，包括任何内联汇编都会降低性能，因为编译器无法分析汇编以确定它是否无副作用、内联是否安全、是否访问全局资源， 等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T08:36:48.757

一些编译器将`__asm__`or`asm`关键字实现为 C 语言的扩展：

```
__asm__(
    "mov eax, 0x2d\n"
    "mov ebx, 0\n"
    "int 0x80\n"
); 
```

括号中的代码将被逐字复制到汇编程序的输入中。更多关于 GCC 如何实现这个特性的文档，可以在[这里](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html)找到。

顺便说一句，如果你想改变堆栈指针的值（*为什么？*），你可以在一行中完成：

```
__asm__("mov esp, eax"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-03T08:58:54.540

如果例如使用 gcc，另一种方法是首先编译一些非常琐碎的函数而不进行优化：

```
int foo(int a, int b) {
  return a+(b<<3);
} 
```

和`gcc -S foo.c`

并使用 foo.s 作为模板。稍后可以编译并链接这些文件 `gcc main.c foo.s`（并确保删除 foo.c 文件/将 foo.s 重命名为其他文件）

从该特定函数可以观察到，编译器将结果放在哪里，以及编译器将第一个和第二个参数放在哪个地址或寄存器中。

它比使用读、写、破坏列表学习 asm 模板要快一些。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-03T10:49:28.530

您真的需要将 Nasm 语法中的 asm 源代码“放入”您的 C 源程序吗？弗格编辑。lcc 也许......如果你想从你的 C 程序“执行”你的 asm 程序......

```
 global getbrk
    section .text
    getbrk:
        push ebx ; C likes it saved
        mov eax, 45 ; __NR_brk
        xor ebx, ebx ; get current break
        int 80h
        pop ebx
        ret 
```

assemble `nasm -f elf getbrk.asm`，放入`sp=getbrk();`你的C文件，编译`gcc -m32 -O3 -o myprog myprog.c getbrk.o`

或者只是`sp=sbrk(0);`在你的 C 程序中跳过 asm... 不会比使用 int 80h 更便携。（但那会有什么乐趣呢？）:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-04T21:55:38.003

```
void function(void){

   void *sp
   __asm__ volatile(
   "movl $0x2d, %%eax;"
   "movl $0, %%ebx;"
   "int $0x80"
   :"=a"(sp)
   :
   :"%ebx"
   );

   fprintf(stderr, "system break: %p\n",sp);
   } 
```

这是我的答案:)

# javascript - 如何在 Get 中发送许多 html 文本？jQuery, Javascript

> ID：13207461
> 
> 赞同：0
> 
> 时间：2012-11-03T08:34:01.613
> 
> 标签：javascript, jquery, html, vk

```
$('#participate').click(function(){

 var content = $('#item-content-text').html();

  VK.api('wall.post',{ message: content}, function(data) {
      if (data.response) { // если получен ответ
              //message send
      }
      else{    
        // error
       }
    });

}) 
```

所以我点击一个按钮然后我得到一些页面html内容，问题是：

如何通过 GET 发送许多 html 内容，也许有一个选项可以通过循环发送内容，但是如何做到这一点？

我认为是这样的：

```
for(var i = 0; i < content_array.length; i++){
     VK.api('wall.post',{ message: content_array[i]}, function(data) {
         if (data.response) { // если получен ответ
            //part of html sended
         }
         else{
            // error
         }
        });
} 
```

但是如何按部分拆分大的html内容？

PS：如果有人知道（API VK）没有通过POST发送该数据的选项，这就是我使用GET的原因......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:53:23.857

将字符串拆分成块

```
var chunkStr = function(str, chunkLength) {
    // Split at the end of a tag
    return str.match(new RegExp('.{1,' + +chunkLength + '}', 'g'));
}

var newstring = chunkStr( oldstring, 128 ); 
```

# java - 如何在 Eclipse 中分析 Eclipse 应用程序？

> ID：13207463
> 
> 赞同：3
> 
> 时间：2012-11-03T08:34:35.990
> 
> 标签：java, eclipse, eclipse-plugin, profiling

我在 Eclipse 中开发了一个插件。但它有一些性能问题。我想分析我的插件以找到一些钩子。我搜索并找到`TPTP`了，但它在 Eclipse Indigo 中不起作用。是否有任何其他 Eclipse 插件可用于分析`Eclipse Application/Java Process`？我正在使用`Run/Debug as eclipse application`.

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T15:10:33.450

[JProfiler](http://blog.ej-technologies.com/2009/06/jprofilers-ide-integrations.html)有一个 eclipse 插件，可以从 eclipse 中分析 eclipse 应用程序。请参阅[此屏幕截图](http://blog.ej-technologies.com/2009/06/jprofilers-ide-integrations.html)以查看 JProfiler eclipse 插件的实际运行情况。

免责声明：我公司开发 JProfiler。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T11:51:35.183

由于 Eclipse 程序仍然是 Java 程序，因此您可以使用任何普通的 Java 分析器。进行测量后，您只需过滤插件的包名称的结果。我使用[Yourkit Java Profiler](http://www.yourkit.com/)对不同的 Java 程序（Swing、Eclipse 插件...）进行了非常好的性能分析。它具有用于商业用途的完整功能试用许可证，您在从事开源项目时可以免费获得完整许可证。

# jquery - 使用 JQuery ajax 调用 ASP.NET Web API

> ID：13207472
> 
> 赞同：1
> 
> 时间：2012-11-03T08:36:42.300
> 
> 标签：jquery, asp.net, webforms, asp.net-web-api

我有一个使用 JQuery ajax 函数调用的 Web API。当我直接测试服务（使用 Chrome RESTEasy 扩展）时，它工作正常，但是当我使用 JQuery ajax 函数调用它时，我得到一个错误。我在端口 81 上调用它：

```
$.ajax({
   url: "http://127.0.0.1:81/api/people",
  data: JSON.stringify(personToCreate),
  type: "POST",
  contentType: "application/json;charset=utf-8",
  statusCode: {
     201: function (newPerson) {
        callback(newPerson);
     }
  },
  success: function (newPerson) {
     alert("New person created with an Id of " + newPerson.Id);
  },
  error: function (jqXHR, textStatus, errorThrown) {
     alert('Error. '+textStatus+'. '+errorThrown);
  }
}); 
```

...但是当我使用 FireBug Lite 跟踪它时，响应来自端口 82：

```
{"Message":"No HTTP resource was found that matches the request URI 'http://127.0.0.1:82/api/people'.","MessageDetail":"No action was found on the controller 'People' that matches the request."} 
```

我认为错误实际上是由于跨站点脚本被阻止，但如果您明白我的意思，我实际上并不是跨站点脚本。

有没有其他人遇到过这个并能够解决它？

编辑：路由配置（global.asax.vb）是：

```
RouteTable.Routes.MapHttpRoute(name:="DefaultApi", routeTemplate:="api/{controller}/{id}", defaults:=New With {Key .id = System.Web.Http.RouteParameter.Optional}) 
```

控制器：

```
Public Function PostValue(ByVal departmentid As Integer, ByVal emailaddress As String, ByVal firstname As String, ByVal lastname As String) As Guid
    Dim context As New WSMModelDataContext
    Dim bllPeople As New PeopleBLL(context)

    Return bllPeople.Create(firstname, lastname, emailaddress, departmentid)
End Function 
```

当我调试它时，它并没有运行控制器，尽管当通过 RESTEasy 调用它时，它正确路由并且控制器成功执行。唯一的区别似乎是通过 RESTEasy 调用它（正确）使用

```
http://127.0.0.1:81 
```

但由于某种原因，当通过 JQuery/ajax 调用时，它似乎正在使用

```
http://127.0.0.1:82. 
```

对于它的价值，我尝试使用相同的方式设置 GET 动词，它工作正常并返回预期结果，所以这似乎与使用 POST 动词有关。

好的，我刚刚注意到别的东西。这是一个 Visual Studio 2012 Cloud 项目，使用 Azure 模拟器进行本地开发。当我运行解决方案时，日志中出现以下两行：

```
Windows Azure Tools: Warning: Remapping public port 80 to 81 to avoid conflict during emulation.
Windows Azure Tools: Warning: Remapping private port 80 to 82 in role 'SimplicityWSM' to avoid conflict during emulation. 
```

所以看起来无法找到 api 的原因是 api 被移动到另一个端口，但主应用程序（它都在解决方案中的一个项目上）仍然在同一个端口上，并且代码假设api 与应用程序位于同一端口。

我不确定如何解决它，但看起来这可能是根本原因。

# mysql - 通过 MySQL 查询的批量操作：呈现私有类别中的所有帖子

> ID：13207475
> 
> 赞同：1
> 
> 时间：2012-11-03T08:36:49.433
> 
> 标签：mysql, wordpress

我想对特定类别的 WordPress 帖子执行批量操作：我想将类别中的所有帖子呈现为私有。

这个 MySQL 查询似乎很接近，但它不起作用（我想我弄错了括号点）：

```
UPDATE wp_posts SET post_status= 'private' WHERE post_staus = 'publish' and ID in (select object_id from wp_term_relationships where term_taxonomy_id  = 25); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:40:02.317

似乎您在“WHERE **post_staus** ”中有错误：应该是“WHERE **post_status** ”。

# java - 从属性文件java设置静态变量

> ID：13207476
> 
> 赞同：0
> 
> 时间：2012-11-03T08:36:53.473
> 
> 标签：java

我需要使用设置一些全局变量，这些变量将被一些类使用。

我无法从属性文件中分配静态变量。

我想如何调用变量是这样的： String url = WebdriverConfiguration.getBaseUrl();

```
public class WebDriverConfiguration
{
    private static Properties testProperties;
    private static String instaceUrl;

    testProperties = loadProperties();

    public static final String DEFAULT_BASEURL = testProperties.getProperty("confluence.base.url","");
    private static final int DEFAULT_HTTP_PORT = 8080;
    private static final String DEFAULT_CONTEXT_PATH = "/";
    public static final String TEST_SPACE_KEY = "SMOKE";
    public static final String TEST_PAGE = "XXX";

    private static final String BASE_URL = System.getProperty("baseurl", DEFAULT_BASEURL);

    public static String getBaseUrl()
    {
      return BASE_URL;

    }

    private Properties loadProperties() throws IOException
{
    InputStream testPropertiesInput = getClass().getClassLoader().getResourceAsStream("webtester.properties");
    Properties testProperties = new Properties();

    if (null != testPropertiesInput)
    {
        try
        {
            testProperties.load(testPropertiesInput);
        }
        finally
        {
            IOUtils.closeQuietly(testPropertiesInput);
        }
    }
    return testProperties;
}

   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T08:41:31.937

我不确定你在这里问什么，但你提供的代码不应该编译。代替

```
private static Properties testProperties;
testProperties = loadProperties(); 
```

和

```
private static final Properties testProperties = loadProperties(); 
```

更新，又发现一个bug。您还必须更改方法签名`loadProperties`：

```
private static final Properties loadProperties() throws IOException {...}

           ^     ^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T08:50:49.423

使用问题中的当前设计，需要进行以下更改：

```
public class WebDriverConfiguration {
    private static Properties testProperties = loadProperties();
    //...snip...

    private static Properties loadProperties() { //must be static and can not throw a checked exception
    //...snip...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T09:01:08.097

我认为你应该这样做：

首先，将您的构造函数签名设为私有。其次，将您的 loadProperties() 放入静态块。第三，你应该把你所有的财产都私有化。

# xslt - 间接变量/参数引用（另一个属性/另一个变量中的名称）

> ID：13207477
> 
> 赞同：1
> 
> 时间：2012-11-03T08:36:55.637
> 
> 标签：xslt

是否可以使用 XSL 访问名称存储在另一个变量（或参数）中的变量（或参数）？如果不是，为什么？

我是 xsl 的新手，来自其他可以访问此功能的语言，例如 bash、ant。也许我在寻找这个问题的答案时是错的。但由于我没有在 SO 上找到它，我认为应该有一个。

两个例子。我有参数`p1`, `p2`, `p3`. 然后我有一个参数`pname`，其值为 string `p2`。我想阅读`p2`using的价值`pname`，比如`$$pname`or `${$pname}`。或者以更复杂的方式。如果`pnumber`等于`2`，那么我想用名称读取参数的值`concat('p', $pnumber)`，我将其编码为
`param-value(concat('p', $pnumber))`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T13:49:06.237

**当 XSLT 样式表将自身作为常规 XML 文档访问时，这是可能的**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:param name="p1" select="'P1-Value'"/>
 <xsl:param name="p2" select="'P2-Value'"/>
 <xsl:param name="p3" select="'P3-Value'"/>

 <xsl:param name="pName" select="'p3'"/>
 <xsl:param name="pNumber" select="2"/>

 <xsl:variable name="vDoc" select="document('')"/>

 <xsl:template match="/">
     <xsl:value-of select=
     "concat('Param with name ',
             $pName,
             ' has value: ',
             $vDoc/*/xsl:param[@name = $pName]/@select
             )"/>
   <xsl:text>&#xA;</xsl:text>   

   <xsl:variable name="vParam" select=
      "$vDoc/*/xsl:param[@name = concat('p', $pNumber)]"/>

     <xsl:value-of select=
     "concat('Param with name p',
             $pNumber,
             ' has value: ',
             $vParam/@select
             )"/>

 </xsl:template>
</xsl:stylesheet> 
```

**产生想要的结果**：

```
Param with name p3 has value: 'P3-Value'
Param with name p2 has value: 'P2-Value' 
```

**说明**：

该表达式`document('')`选择当前 XSLT 样式表的文档节点。

一个限制是当前 XSLT 样式表必须具有（可通过）URI（例如驻留在给定文件中并通过其文件名可访问）——如果样式表是动态生成的，上述代码不会产生正确的结果（内存中的字符串）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:23:45.567

在`libxslt`事物中通过**`dyn:evaluate`扩展**是可能的。这是[描述](http://www.exslt.org/dyn/functions/evaluate/index.html)。总共提到了 3 个处理器，据说它们支持此功能：

*   来自 Apache 的 Xalan-J（版本 2.4.1）和
*   4XSLT，来自 4Suite。（版本 0.12.0a3）
*   来自 Daniel Veillard 等人的 libxslt。（版本 1.0.19）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T16:18:20.373

**便携式解决方法**。如果您同时控制应用程序和样式表，则应**将参数作为 xml 文档传递**。大多数处理器都提供了使参数成为节点集的选项。例如，在 MSXML 中，我使用：

```
xslProc.addParameter("params", xmlParams) 
```

其中`xslProc`is 属于处理器类型，由`"Msxml2.XSLTemplate.6.0"`使用`createProcessor`方法创建，并且`xmlParams`is `DomDocument`。在样式表中，我使用类似的东西来访问我的参数：

```
<xsl:variable name="value">
  <xsl:value-of select="$params//*[name() = concat('p', $pnumber)]" />
</xsl:variable> 
```

如果处理器不支持节点集外部参数，则可以始终将参数与数据组合在一个 xml 文档中。这在内存中效果很好。如果可以访问外部文件，则可以使用`document('params.xml')`语法来访问存储在单独文件中的参数。

我也在寻找解析 xml 字符串并拥有它的节点集的可能性，但它似乎只能作为某些 xslt 2.0 解析器中的扩展使用。我想要 1.0 解决方案。

# jquery - 选择先前单击的元素

> ID：13207478
> 
> 赞同：1
> 
> 时间：2012-11-03T08:36:58.037
> 
> 标签：jquery, select, click

我需要帮助来选择以前点击的元素..（我找不到答案）我的功能如下：

```
showSticker:function(){
    $(".Sticker").click(    
        function () {
            if ($(this).hasClass("StickerShow"))
                $(this).removeClass('StickerShow')
            else {
                $(".Sticker").removeClass('StickerShow'); // Here is a problem
                $(this).addClass('StickerShow');
            }
        }
    );
} 
```

实际上它工作得很好，但我发现从所有匹配的元素中删除类非常愚蠢，我注意到 CPU 很难渲染它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:41:15.117

您可以缓存一些东西，而不是不必要地遍历 DOM：

```
var $stickers = $('.Sticker');

// ...

showSticker: function() {
    $stickers.click(function() {
        var $this = $(this);

        if ($this.hasClass("StickerShow")) {
            $this.removeClass('StickerShow')
        } else {
            $stickers.removeClass('StickerShow'); // Here is a problem
            $this.addClass('StickerShow');
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T08:47:33.540

看来你想要这样：

```
showSticker:function(){
    var Stickers=$(".Sticker");
    var lastSticker=Stickers.first();
    Stickers.click(    
        function () {
            $this=$(this);
            if ($this.hasClass("StickerShow"))
                $this.removeClass('StickerShow')
            else {
            // Not worry about removeClass from element which has no such class
                lastSticker.removeClass('StickerShow');
                $this.addClass('StickerShow');
                lastSticker=$this;
            }

        }
    );
} 
```

如果贴纸是兄弟姐妹，您可以使用简单 的`$this.siblings('.StickerShow').removeClass('StickerShow')`而`$this.toggleClass('StickerShow')`不是`if/else`

# sql-server - 自动建议文本框

> ID：13207479
> 
> 赞同：1
> 
> 时间：2012-11-03T08:37:11.103
> 
> 标签：sql-server, vb.net, sql-server-2005

我想要一个自动建议文本框，在输入特定字母后显示员工姓名。姓名存在于雇员表中的三列中，即名字、中间名、姓氏。

我为此尝试了一个代码，但它只能显示表格的一列，即名字。如何连接所有三列，以便在文本框中建议它们。

我的代码：

```
Dim strSql As String = "select P_Firstname, P_MiddleName, P_LastName from Patient_Registration"
        Dim dtb As New DataTable
        Using cnn As New SqlConnection(conn)
            cnn.Open()
            Using dad As New SqlDataAdapter(strSql, cnn)
                dad.Fill(dtb)
            End Using
            cnn.Close()
        End Using
        txtsearch.AutoCompleteMode = AutoCompleteMode.SuggestAppend
        txtsearch.AutoCompleteSource = AutoCompleteSource.CustomSource
        If dtb.Rows.Count > 0 Then
            Dim i As Integer = 0
            For i = 0 To (dtb.Rows.Count - 1)
                txtsearch.AutoCompleteCustomSource.Add(dtb.Rows(i)("P_FirstName"))
            Next
        End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:42:01.830

利用：

```
For i = 0 To (dtb.Rows.Count - 1)
    txtsearch.AutoCompleteCustomSource.Add(dtb.Rows(i)("P_FirstName") & 
                                           dtb.Rows(i)("P_MiddleName") & 
                                           dtb.Rows(i)("P_LastName"))
Next 
```

代替：

```
For i = 0 To (dtb.Rows.Count - 1)
    txtsearch.AutoCompleteCustomSource.Add(dtb.Rows(i)("P_FirstName"))
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-29T06:04:32.680

```
 <asp:TextBox ID="ddlcenter" runat="server" Font-Size="10px" TabIndex="1" Width="150px"
                                                                    Style="text-transform: capitalize;"
                                                                    placeholder="Type Center Name/Code" autocomplete="off"></asp:TextBox>
                                                                <cc1:AutoCompleteExtender ServiceMethod="GetCenter" MinimumPrefixLength="2" CompletionInterval="100"
                                                                    EnableCaching="false" CompletionSetCount="10" TargetControlID="ddlcenter" UseContextKey="true"
                                                                    ID="AutoCompleteExtender1" runat="server" FirstRowSelected="false" CompletionListCssClass="completionList"
                                                                    CompletionListHighlightedItemCssClass="itemHighlighted" CompletionListItemCssClass="listItem">
                                                                </cc1:AutoCompleteExtender> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-04-29T05:57:43.500

```
[enter image description here][1]

  [1]: https://i.stack.imgur.com/g6TR9.png

Showing above result.

    enter code here

My code is :

 [System.Web.Script.Services.ScriptMethod()]
    [System.Web.Services.WebMethod]
    public static List<string> GetCenter(string prefixText, int count)
    {
        using (SqlConnection conn = new SqlConnection())
        {
            conn.ConnectionString = ConfigurationManager.AppSettings["ConnectionString"].ToString();
            using (SqlCommand cmd = new SqlCommand())
            {
                string cmdText = "Select centername from Center_Master WHere Active=1 and centername like '%' +@SearchText  + '%'";
                cmd.Parameters.AddWithValue("@SearchText", prefixText);

                cmdText += " order by centername ";
                cmd.CommandText = cmdText;
                cmd.Connection = conn;
                conn.Open();
                List<string> customers = new List<string>();
                using (SqlDataReader sdr = cmd.ExecuteReader())
                {
                    while (sdr.Read())
                    {
                        customers.Add(sdr["centername"].ToString());
                    }
                }
                conn.Close();
                return customers;
            }
        }
    } 
```

# google-chrome - 加载页面失败时自动刷新

> ID：13207480
> 
> 赞同：3
> 
> 时间：2012-11-03T08:37:46.930
> 
> 标签：google-chrome, google-chrome-extension

我正在尝试为 chrome 创建一个扩展，当页面加载因任何原因失败时自动刷新页面。

我的清单.json：

```
{ "browser_action" : { "default_icon" : "icon.png"
    },
  "description" : "Making your first Google Chrome extension.",
  "icons" : { "128" : "icon.png" },
  "name" : "Tutorialzine Extension",
  "version" : "1.0", 
  "permissions": [
     "webRequest",
     "tabs",
     "<all_urls>"
   ],
  "content_scripts": [
    {
      "matches": ["<all_urls>","http://*/*","https://*/*","*://*/*"],
      "js": ["myscript.js"],
      "run_at": "document_end"
    }
  ]
} 
```

myscript.js：

```
chrome.webRequest.onErrorOccurred.addListener(function details){
    chrome.tabs.reload(details.tabId);
} 
```

我究竟做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T13:41:39.423

内容脚本无法访问大多数`chrome.*`API。[文档中](http://developer.chrome.com/extensions/content_scripts.html)明确说明：

```
However, content scripts have some limitations. They cannot:
- Use chrome.* APIs (except for parts of chrome.extension) 
```

您应该改用[背景页面](http://developer.chrome.com/extensions/background_pages.html)或[事件页面](http://developer.chrome.com/extensions/event_pages.html)。

也不`chrome.webRequest.onErrorOccurred.addListener(function details)`是有效的 JavaScript 代码。`function`关键字不应该在那里。我相信您从文档中复制了此代码，但在文档中，这种类型的伪 JavaScript 仅用于描述函数定义（它期望什么类型的参数，它返回什么类型的值等）。

# c# - 使用 jquery 无法正确检索存储在 cookie 中的特殊字符

> ID：13207483
> 
> 赞同：0
> 
> 时间：2012-11-03T08:38:43.190
> 
> 标签：c#, jquery, html, cookies

我创建了一个代码，将我的一些关键字存储到 cookie 中，但我遇到了重音字符（如 ä、Ä 等）以及其他语言的特殊字符的问题。

我的本地机器支持它，因为我可以使用存储在 cookie 中的方法以外的其他方法检索它。

我还通过 jquery 检索了这个 cookie 关键字，但似乎我得到了不正确的解码值。

有什么想法吗？

谢谢你。非常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:52:53.717

如果您的问题类似于下面 pos 中提到的问题，那么看起来 url 编码应用于存储在 cookie 中的值。

[https://stackoverflow.com/questions/12478797/storing-special-characters-in-cookies-using-jquery-plugin](https://stackoverflow.com/questions/12478797/storing-special-characters-in-cookies-using-jquery-plugin)

您可以通过解码值来“反转”它。这将在以下帖子中讨论。

[JavaScript URL 解码功能](https://stackoverflow.com/questions/4292914/javascript-url-decode-function)

# php - PHP PDO SQLite3 转换日期字符串

> ID：13207486
> 
> 赞同：2
> 
> 时间：2012-11-03T08:39:44.557
> 
> 标签：php, sqlite, pdo

仅在 localhost 上使用 SQLite3、PDO 和 PHP5。

我正在使用网页表来显示列、样本集（表中的 1 条记录）、用于选择列的复选框以及用于为后续查询选择修改器的下拉列表。在单击“获取查询”按钮时，简单查询..

```
SELECT day FROM tbl; 
```

..变成..

```
SELECT datetime([day],'unixepoch','+978307200 seconds','localtime') as day FROM tbl; 
```

（这是通过字符串替换功能完成的）

然后通过 cookie 将其传递到结果页面（使用 cookie，因为我还传递了许多其他数据）

此查询现在将所有这些秒添加到转换后的 unix 纪元时间，并放弃本地时间的结果......（与 UTC 相比）

如果我将查询直接硬编码到“results.php”页面中，它可以正常工作。如果该页面使用存储在前一页设置的 cookie 中的查询，我将得不到任何结果。检查结果页面元素，我可以看到 cookie 已设置完整的查询。

我已将其缩小到`"+978307200"`修改器...因为没有它，它工作正常（除了 978307200 秒不平衡！）

我认为“+”号发生了一些事情，但完全不知道如何修复它。

有什么想法/建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:56:10.657

在 URL 和 cookie 中，加上 sing 是空格的占位符，`$_COOKIES`数组包含已解析的 cookie 标头，因此每个加号都更改为空格。

如果您确实必须在页面之间传递此类数据，请使用 session 。

如果由于某种原因会话不是一个选项，您将不得不将您的值编码为仅包含“安全”字符，然后再将它们存储到 cookie 中，然后在使用之前对其进行解码。最流行的是[base64_](http://php.net/manual/en/function.base64-encode.php)函数

# c++ - http请求中的QNetworkReply和QNetworkAccessManager超时

> ID：13207493
> 
> 赞同：14
> 
> 时间：2012-11-03T08:40:20.510
> 
> 标签：c++, timeout, qnetworkaccessmanager

执行 http 请求时如何设置超时？

我有这个代码：

```
{
    QNetworkRequest request;

    request.setUrl(QUrl("http://www.foo.com"));
    request.setRawHeader("User-Agent", USER_AGENT.toUtf8());
    request.setRawHeader("Accept-Charset", "ISO-8859-1,utf-8;q=0.7,*;q=0.7");
    request.setRawHeader("Accept",
        "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
    request.setRawHeader("Accept-Language", "en-us,en;q=0.5");
    request.setRawHeader("Connection", "Keep-Alive");

    reply = m_networkManager->get(request);
    QEventLoop loop;
    connect(reply, SIGNAL(finished()), &loop, SLOT(quit()));
    loop.exec();
} 
```

我在哪里以及如何为请求设置某种超时？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-05T10:11:55.707

```
QTimer timer;    
timer.setSingleShot(true);

QEventLoop loop;
connect(&timer, SIGNAL(timeout()), &loop, SLOT(quit()));
connect(reply, SIGNAL(finished()), &loop, SLOT(quit()));
timer.start(30000);   // 30 secs. timeout
loop.exec();

if(timer.isActive()) {
    timer.stop();
    if(m_reply->error() > 0) {
      ... // handle error
    }
    else {      
      int v = reply->attribute(QNetworkRequest::HttpStatusCodeAttribute).toInt();

      if (v >= 200 && v < 300) {  // Success
        ...
      }
    }
} else {
   // timeout
   disconnect(reply, SIGNAL(finished()), &loop, SLOT(quit()));

   reply->abort();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-15T04:58:03.030

看一下这个：

[https://doc.qt.io/qt-5/qnetworkrequest.html#setTransferTimeout](https://doc.qt.io/qt-5/qnetworkrequest.html#setTransferTimeout)

> void QNetworkRequest::setTransferTimeout(int timeout = DefaultTransferTimeoutConstant) 将超时设置为以毫秒为单位的传输超时。
> 
> 如果在超时到期之前没有传输任何字节，则传输被中止。零表示没有设置定时器。如果未提供参数，则超时为 QNetworkRequest::DefaultTransferTimeoutConstant。如果未调用此函数，则超时被禁用并且值为 0。
> 
> 这个函数是在 Qt 5.15 中引入的。

# mod-rewrite - mod_rewrite 到字符串特殊字符和同时缩短 URL

> ID：13207495
> 
> 赞同：0
> 
> 时间：2012-11-03T08:40:40.843
> 
> 标签：mod-rewrite, mediawiki

刚，

长时间的系统管理员，但第一次发布到这个优秀的网站，所以，请温柔。

我在 REGEX 方面还不强，并试图在我们内部托管的“mediawiki”网站上同时做两件事。

我们正在运行一个非常简单的 jane LAMP 堆栈（centOS 5.x、Apache 2.x、PHP 5.x）。我们是根。我们使用的是 /etc/httpd/conf.d/wiki.conf 而不是 .htaccess。物理路径是 /var/www/html/wiki/

通过以下一些组合，我取得了部分成功的结果，但我还不够好，无法一直做到这一点。我知道这个网站上有一些我希望使用的 mod_write 螺柱。

1.  我正在遵循这个食谱[https://www.mediawiki.org/wiki/Manual:Short_URL/Apache](https://www.mediawiki.org/wiki/Manual:Short_URL/Apache)以便将 URL 从 www.example.com/wiki/index.php?=title=Garden_Store 缩短到 www.example.com /wiki/Garden_Store

2.  如果用户应该选择键入 URL 的语法，仍然允许使用 www.example.com/wiki/index.php?=title=Garden_Store。（我相信 mediawiki 可以同时使用两个样式 URL。如果不可能，那么我将被迫跳过短 URL 并使用其中包含变量的样式。）

3.  最后，将示例中 URL 中的特殊字符字符串化，例如 www.example.com/wiki/index.php?=title=Garden,_Store! 应该是这个 www.example.com/wiki/index.php?=title=Garden_Store 。

另一个例子可能是 www.example.com/wiki/index.php?=title=Garden_Store,_Inc。应该是 www.example.com/wiki/index.php?=title=Garden_Store_Inc

最后一个例子，我们要确保我沟通良好，会得到这个“/title=Garden%20Store,%20Inc”，但想要这个“/index.php?title=Garden%20Store%20Inc”，因为我知道mediawiki 中的空格被下划线替换。

非常感谢你把一个新手带到了这个终点线的最后一点。

干杯。

杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:54:41.403

类似以下规则的东西应该可以满足您的需要：

```
RewriteRule ^(.*)\ (.*)$ $1\_$2 [L]
RewriteRule ^(.*)[^a-zA-Z0-9\/\._](.*)$ $1$2 [L] 
```

第一条规则确实用下划线替换了空格，而另一条线删除了您不想留在结果 URL 中的所有字符。请注意，如果需要，您可能需要添加更多内容。

# android - 对齐单选组内的单选按钮

> ID：13207496
> 
> 赞同：13
> 
> 时间：2012-11-03T08:40:49.787
> 
> 标签：android, android-layout

我正在开发一个 Android 3.1 平板电脑应用程序并在这里提出这个问题，因为我在我的代码中没有找到任何有效的答案（或示例）。

我有以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1" >

    <LinearLayout
        android:id="@+id/materialsLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
                                                <!-- 0 . Título del fragment -->
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight=".5"
            android:gravity="center_horizontal"
            android:text="@string/layout_title_quantity"
            android:textAppearance="?android:attr/textAppearanceLarge" />
                                                <!-- 1\. Texto -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/layout_qty_size_carton"
            android:textAppearance="?android:attr/textAppearanceMedium" />
                                                <!-- 2\. Texto -->

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="40dip"
            android:layout_gravity="center"
            android:orientation="horizontal"
            android:weightSum=".45" >

            <TextView
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_weight=".1"
                android:gravity="right"
                android:text="@string/layout_req_po"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_weight=".05"
                android:text="@string/layout_qty_carton"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/qtyPerCartonTxt"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_weight=".05"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_weight=".01"
                android:gravity="center"
                android:text="@string/layout_slash"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_weight=".05"
                android:text="@string/layout_cartoon_size"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/cartonSizeTxt"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_weight=".05"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_weight=".01"
                android:gravity="center"
                android:text="@string/layout_slash"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_weight=".03"
                android:text="@string/layout_weight"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/cartonWeightTxt"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_weight=".05"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </LinearLayout>
                                                <!-- 3\. Titulo tabla -->
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/layout_actual_finding"
                android:textAppearance="?android:attr/textAppearanceMedium" />
                                                <!-- 4\. Cabecera tabla -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="40dip"
            android:layout_gravity="center"
            android:orientation="horizontal"
            android:weightSum=".5" >

            <TextView
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".07"
                android:gravity="center"
                android:text="@string/layout_cartoon_number"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".07"
                android:gravity="center"
                android:text="@string/layout_actual_qty"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".07"
                android:gravity="center"
                android:text="@string/layout_actual_size"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".07"
                android:gravity="center"
                android:text="@string/layout_actual_weight"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <Button
                android:id="@+id/btnAddNewActPckCtr"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".05"
                android:onClick="onAddNewActPckCtrClick"
                android:text="@string/btn_add_new" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="40dip"
            android:layout_gravity="center"
            android:orientation="horizontal"
            android:weightSum=".5" >

            <TextView
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight=".07"
                android:gravity="right"
                android:text="@string/layout_result"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <RadioGroup
                android:id="@+id/rGroupResQTYOnline"
                android:layout_width="0dip"
                android:layout_height="match_parent"
                android:layout_gravity="right"
                android:layout_weight=".07"
                android:orientation="horizontal" >

                <RadioButton
                    android:id="@+id/rResQTYOnlineYes"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:layout_gravity="right"
                    android:text="@string/layout_yes" />

                <RadioButton
                    android:id="@+id/rResQTYOnlineNo"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:layout_gravity="left"
                    android:text="@string/layout_no" />

            </RadioGroup>

            <RadioGroup
                android:id="@+id/rGroupResSzOnline"
                android:layout_width="0dip"
                android:layout_height="match_parent"
                android:layout_weight=".07"
                android:orientation="horizontal" >

                <RadioButton
                    android:id="@+id/rResSzOnlineYes"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:text="@string/layout_yes" />

                <RadioButton
                    android:id="@+id/rResSzOnlineNo"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:text="@string/layout_no" />
            </RadioGroup>

            <RadioGroup
                android:id="@+id/rGroupResWgOnline"
                android:layout_width="0dip"
                android:layout_height="match_parent"
                android:layout_weight=".07"
                android:orientation="horizontal" >

                <RadioButton
                    android:id="@+id/rResWgOnlineYes"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:text="@string/layout_yes" />

                <RadioButton
                    android:id="@+id/rResWgOnlineNo"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:text="@string/layout_no" />
            </RadioGroup>

        <Button
            android:id="@+id/btnTakeQtyOnlinePhoto"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight=".07"
            android:onClick="onTakePhotoClick"
            android:text="@string/btn_take_photo" />

        </LinearLayout>

        <TextView
            android:layout_width="match_parent"
            android:layout_height="40dip"
            android:layout_gravity="center_horizontal"
            android:layout_marginLeft="40dip"
            android:layout_marginTop="40dip"
            android:layout_weight=".1"
            android:gravity="left|center_vertical"
            android:text="@string/layout_photos"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <Gallery
            android:id="@+id/quantityOnlineGallery"
            android:layout_width="fill_parent"
            android:layout_height="200dip" />
</LinearLayout>
</ScrollView> 
```

我正在尝试将单选按钮集中在 radiogroup 内，但我不知道该怎么做。

我试过这段代码：

```
 <RadioGroup
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
   <RadioButton
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_weight="1"
       android:layout_gravity="center|left"/>
   <RadioButton
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_gravity="center|right" />
    </RadioGroup> 
```

但它不起作用。

**我该怎么做？**

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-03T09:38:36.643

试试这个可能会有所帮助：将您的无线电组对齐到中心

```
<RadioGroup
                android:id="@+id/rGroupResSzOnline"
                android:layout_width="0dip"
                android:layout_height="match_parent"
                android:layout_weight=".07"
                android:gravity="center"
                android:orientation="horizontal" >

                <RadioButton
                    android:id="@+id/rResSzOnlineYes"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:text="Yes" />

                <RadioButton
                    android:id="@+id/rResSzOnlineNo"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:text="No" />
            </RadioGroup> 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-11-03T09:36:52.290

您是否尝试在 RadioGroup 内嵌套 LinearLayout 或 RelativeLayout 并将 RadioButton 放入其中？我自己没试过，不知道行不行。

# ios - NSXMLParser 和一个带有奇怪编码的 xml

> ID：13207497
> 
> 赞同：0
> 
> 时间：2012-11-03T08:40:50.313
> 
> 标签：ios, xml, encoding, nsxmlparser

我无法解析 XML 文件

最初，我将我的解析器声明为：

```
NSURL *url = [[NSBundle mainBundle] URLForResource:@"download.rss" withExtension:@"webintents"];
NSXMLParser *parser = [[NSXMLParser alloc] initWithContentsOfURL:url]; 
```

解析时，我遇到错误

> NSXMLParserErrorDomain 错误 9

我检查它是 NSXMLParserInvalidCharacterError。

在解析器运行多个标签并在一个标签处遇到错误之后。

然后我更改声明以将编码迭代为：

```
NSError *errorOfStr = nil;
NSStringEncoding encoding;
NSString *xmlFeedStr = [NSString stringWithContentsOfURL:[[NSBundle mainBundle] URLForResource:@"download.rss" withExtension:@"webintents"] usedEncoding:&encoding error:&errorOfStr];

NSXMLParser *parser = [[NSXMLParser alloc] initWithData:[xmlFeedStr dataUsingEncoding:encoding allowLossyConversion:YES]]; 
```

但是在初始化变量“xmlFeedStr”时遇到错误。检查“errorOfStr”，我看到错误：

> 可可错误 264

我查了一下，是 NSFileReadUnknownStringEncodingError

之后，我尝试将文件的某些编码强制为 NSUTF8StringEncoding 或 NSUnicodeStringEncoding，如下所示：

```
NSStringEncoding encoding = NSUnicodeStringEncoding;
NSString *xmlFeedStr = [NSString stringWithContentsOfURL:[[NSBundle mainBundle] URLForResource:@"download.rss" withExtension:@"webintents"] encoding:encoding error:&error]; 
```

但没有成功。我遇到了一些 Cocoa 错误，因为无法加载文件或加载没有内容的文件。

请帮我？

我把我的文件放在：

[http://www.mediafire.com/download.php?yxfp3ch8n3ai4iq](http://www.mediafire.com/download.php?yxfp3ch8n3ai4iq)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:30:13.633

标签“内容：编码”中某处的问题。请使用以下代码：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    NSLog(@"Application Did Finish Launching");

    NSString *dataString = [[[NSString alloc] initWithContentsOfFile:@"/Users/alex/Downloads/download.rss.webintents" encoding:NSASCIIStringEncoding error:nil] autorelease];

    NSData *data = [dataString dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];

    NSXMLParser *parser = [[NSXMLParser alloc] initWithData:data];
    [parser setDelegate:self];
    [parser parse];
    [parser release];
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict
{
    NSLog(@"Did Start Element: %@", elementName);
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    NSLog(@"Found Characters: %@", string);
}

- (void)parser:(NSXMLParser *)parser foundCDATA:(NSData *)CDATABlock
{
    NSString *someString = [[NSString alloc] initWithData:CDATABlock encoding:NSUTF8StringEncoding];
    NSLog(@"Found CDATA: %@", someString);
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    NSLog(@"Did End Element: %@", elementName);
}

- (void)parserDidEndDocument:(NSXMLParser *)parser
{
    NSLog(@"Parser Did End Document");
}

- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError
{
    NSLog(@"Parse Error Occurred: %@", parseError.description);   
} 
```

# recursion - Dr Racket 中的 Lambda 递归

> ID：13207503
> 
> 赞同：2
> 
> 时间：2012-11-03T08:41:27.623
> 
> 标签：recursion, lambda, lisp, syntax-error, racket

我试图在 Racket 博士中创建“应用 N 次”功能，但不知道我哪里出错了。我的代码似乎是正确的，但显然我遗漏了一些东西。下面打印的是代码和我得到的错误。

```
(define (applyNtimes F n)
  (lambda (x)
    (if (= n 0) x 
        (F (applyNtimes F (- n 1))))))

(define cdr3 (applyNtimes cdr 3))

(cdr3 '(1 2 3 4 4 5)) 
```

这是我得到的错误：

```
cdr: contract violation
  expected: pair?
  given: # 
```

预期的输出应该是

```
(4 4 5) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T09:43:38.043

这就是问题所在，您正试图申请`F`返回`applyNtimes`但想一想，返回的是什么？**一个拉姆达**。

这意味着在您的情况下，我们正在尝试应用于`cdr`lambda，哎呀。

为了让这个 lambda 的值真正使用它，我们必须调用它。这样做很容易，只需更改

```
(F (applyNtimes F (- n 1)))))) 
```

至

```
(F ( (applyNtimes F (- n 1)) ;;Get the Lambda
     x))))) ;; and apply it to x 
```

为了理解这一点，让我们把它分开，首先我们应用`F`到一些东西上。因为在我们的例子`F`中，`cdr`我们最好给它某种形式的对。

在此代码中，“某事”是应用`(applyNTimes F (- n 1))`到的结果`x`。

好吧，这导致我们进行一些递归，我们真正要做的是

```
(F (F (F ... ((applyNTimes F (- n whatever)) x)))) 
```

好的，那么这个递归如何结束？那么当`(- n whatever)`为 0 时，我们返回 lambda

```
(lambda (x) x) 
```

这真的把整个事情变成了

(F(F(F(F(F(F(Fx)))))))

这是我们想要的 applyNtimes 函数。

# php - PHP：在 javascript onclick 上设置 php 变量

> ID：13207505
> 
> 赞同：1
> 
> 时间：2012-11-03T08:41:55.163
> 
> 标签：php

单击单选按钮时如何设置php变量？

或者有没有其他不使用ajax的方法。

我想做的是设置

```
$_SESSION['a'] = $a; 
```

其中 $a 是最初设置为 0 的答案数组。

我有一个带有 4 个选项的问题单选按钮。当用户单击单选按钮时，我希望我的会话记录该单选按钮。

我在考虑单选按钮上的 OnClick 功能。

我该怎么做呢。或者我如何在会话中存储选择的单选按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T10:00:07.967

您可以在单一表单提交中获取所有答案，然后在 PHP 端处理答案。

```
<p>
<input name="question1" type="radio" value="a" />
<input name="question1" type="radio" value="b" />
<input name="question1" type="radio" value="c" />
<input name="question1" type="radio" value="d" />
</p> 
```

在 PHP 方面

```
$_SESSION['a'] = $_POST['question1']; // it will be either a, b, c, d 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T08:46:05.687

仅通过 JavaScript 不可能您需要使用 ajax 来执行此操作或提交表单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T10:21:05.797

如果只是为了用户增强而保存它（即它在服务器端没有意义，您只是希望浏览器记住它以方便用户使用），最好只将数据保存在客户端，在 localStorage（首选）或 Cookie 上。

当您提交表单时，将发生完整的服务器端处理。

# windows-8 - 如何在我的 x86 操作系统中为 windows phone 安装 VS2012？如何将 Windows 8 pro 从 x86 转换为 x64？

> ID：13207508
> 
> 赞同：0
> 
> 时间：2012-11-03T08:42:10.143
> 
> 标签：windows-8, visual-studio-2012

我下载了一个 x86 windows pro 版本并安装在我的系统中。我犯的错误是我的系统支持 x64，但错误地使用了 Windows 8 pro 的 msdn x86 版本。

由于安装了 x86 操作系统，我无法为 windows phone 安装 Visual Studio 2012。它抛出一个错误，说明你的系统是 x86。

如果您能为此提供解决方案，那将有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T12:21:14.363

您必须卸载 x86 Windows 8，然后安装 x64 版本来修复此类错误。

# ruby-on-rails - Ruby Gems 未安装在 Amazon EC2 上

> ID：13207509
> 
> 赞同：1
> 
> 时间：2012-11-03T08:42:20.167
> 
> 标签：ruby-on-rails, amazon-ec2

我有一个亚马逊 ec2 服务器正在运行，我想在它的 rails 上安装 ruby​​。但是当我输入时 `sudo gem install rails`，它不起作用。它一直在等待。我等了30分钟。试图看看出了什么问题。这是我输入后得到的`sudo gem install rails -V`：

```
GET http://rubygems.org/latest_specs.4.8.gz
302 Moved Temporarily
GET http://production.s3.rubygems.org/latest_specs.4.8.gz
304 Not Modified
GET http://rubygems.org/specs.4.8.gz
302 Moved Temporarily
GET http://production.s3.rubygems.org/specs.4.8.gz
304 Not Modified
GET http://rubygems.org/quick/Marshal.4.8/rack-test-0.6.1.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/rack-test-0.6.1.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/rack-test-0.6.2.gemspec.rz
302 Moved Temporarily
GET http://bb-m.rubygems.org/quick/Marshal.4.8/rack-test-0.6.2.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/journey-1.0.4.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/journey-1.0.4.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/sprockets-2.1.3.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/sprockets-2.1.3.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/erubis-2.7.0.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/erubis-2.7.0.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/arel-3.0.2.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/arel-3.0.2.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/tzinfo-0.3.29.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/tzinfo-0.3.29.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/tzinfo-0.3.30.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/tzinfo-0.3.30.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/tzinfo-0.3.31.gemspec.rz
302 Moved Temporarily
GET http://bb-m.rubygems.org/quick/Marshal.4.8/tzinfo-0.3.31.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/tzinfo-0.3.32.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/tzinfo-0.3.32.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/tzinfo-0.3.33.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/tzinfo-0.3.33.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/tzinfo-0.3.34.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/tzinfo-0.3.34.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/mail-2.4.4.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/mail-2.4.4.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/rake-0.9.2.2.gemspec.rz
302 Moved Temporarily
GET http://bb-m.rubygems.org/quick/Marshal.4.8/rake-0.9.2.2.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/rack-ssl-1.3.2.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/rack-ssl-1.3.2.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/thor-0.14.6.gemspec.rz
302 Moved Temporarily
GET http://bb-m.rubygems.org/quick/Marshal.4.8/thor-0.14.6.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/thor-0.15.0.gemspec.rz
302 Moved Temporarily
GET http://bb-m.rubygems.org/quick/Marshal.4.8/thor-0.15.0.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/thor-0.15.1.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/thor-0.15.1.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/thor-0.15.2.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/thor-0.15.2.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/thor-0.15.3.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/thor-0.15.3.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/thor-0.15.4.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/thor-0.15.4.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/thor-0.16.0.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/thor-0.16.0.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/rdoc-3.4.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/rdoc-3.4.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/rdoc-3.5.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/rdoc-3.5.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/rdoc-3.5.1.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/rdoc-3.5.1.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/rdoc-3.5.2.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/rdoc-3.5.2.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/rdoc-3.5.3.gemspec.rz
302 Moved Temporarily
GET http://bb-m.rubygems.org/quick/Marshal.4.8/rdoc-3.5.3.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/rdoc-3.6.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/rdoc-3.6.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/rdoc-3.6.1.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/rdoc-3.6.1.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/rdoc-3.7.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/rdoc-3.7.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/rdoc-3.8.gemspec.rz
302 Moved Temporarily
GET http://bb-m.rubygems.org/quick/Marshal.4.8/rdoc-3.8.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/rdoc-3.9.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/rdoc-3.9.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/rdoc-3.9.1.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/rdoc-3.9.1.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/rdoc-3.9.2.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/rdoc-3.9.2.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/rdoc-3.9.3.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/rdoc-3.9.3.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/rdoc-3.9.4.gemspec.rz
302 Moved Temporarily
GET http://bb-m.rubygems.org/quick/Marshal.4.8/rdoc-3.9.4.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/rdoc-3.10.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/rdoc-3.10.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/rdoc-3.11.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/rdoc-3.11.gemspec.rz
200 OK
GET http://rubygems.org/quick/Marshal.4.8/rdoc-3.12.gemspec.rz
302 Moved Temporarily
GET http://production.cf.rubygems.org/quick/Marshal.4.8/rdoc-3.12.gemspec.rz
200 OK 
```

它继续前进。如何将 ruby​​ on rails 安装到我的服务器上？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T01:03:31.007

你有机器上的root访问权限吗？

如果是这样，您可以通过以 root 用户身份安装每个本机 gem 来使安装更顺畅。这是因为原生 gem 需要在服务器上编译代码。

警告：这并不完全安全，因此不要在高安全性生产服务器上执行此操作。

这是我做的，你可以选择任何你想要的：

```
sudo su
gem install bcrypt-ruby
gem install curb
gem install fastthread
gem install ffi 
gem install json 
gem install mysql2
gem install nokogiri
gem install pg
gem install rmagick
gem install ruby-prof
gem install sqlite3 
gem install ssh
gem install therubyracer 
```

您可能还想尝试使用 ruby​​ 安装工具。我最喜欢的是 rbenv：[https ://github.com/sstephenson/rbenv](https://github.com/sstephenson/rbenv)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T08:50:52.447

尝试这种方式，进入源代码并：

```
cd ruby-1.9.2-p136/ext/zlib/
ruby extconf.rb --with-zlib-include=/usr/include --width-zlib-lib=/usr/lib
gem install rails --include-dependencies 
```

# php - 将帖子网址保存为会话名称？

> ID：13207512
> 
> 赞同：1
> 
> 时间：2012-11-03T08:42:31.003
> 
> 标签：php, url, session, cookies, background

我正在开发一个自定义主页背景，在我的 html 中有

```
<form action="'.$_SERVER['PHP_SELF'].'">
<input type="text" width="128px" name="mybg">
<input type="submit" value="Set as background">
</form>

<b style="position:absolute;height:100%;width:100%;top:0;left:0;z-index:-1;background:url('<?=$_SESSION['mybg'];?>');"></b> 
```

和我的 php 文件：

```
if(isset($_GET['mybg'])){
session_set_cookie_params(3600 * 24 * 7);
session_start();
$_SESSION['mybg'] = $_GET['mybg'];
} 
```

并且我的背景图片显示为帖子网址，该网址就像`"http://si.te/?mybg=http%3A%2F%2Fabc.com%2Fpic.jpg"`但是当我返回主页（index.php）并且背景图片消失时，如何在会话中保存它？

我不想使用任何 sql 请不要建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:51:05.710

用下面替换您的 html 表单标记行并尝试..

```
<form action="<?=$_SERVER['PHP_SELF']?>"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T08:51:47.693

您的代码主要是正确的，但是您必须将条件移到`session_start()`外部`if`。否则，当您返回主页时，会话将不会启动，`$_SESSION['mybg']`也不会设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T08:52:21.033

此行定义在您的页面顶部

```
session_set_cookie_params(3600 * 24 * 7);
session_start(); 
```

# c# - 我们可以更改 ListBox 的选定项颜色吗？

> ID：13207513
> 
> 赞同：1
> 
> 时间：2012-11-03T08:42:39.253
> 
> 标签：c#, wpf, xaml, listbox, windows-8

所以，我`ListBox`用 XAML 写了这个：

```
<ListBox Margin="0" x:Name="ListBox_Main" Grid.Row="1" VerticalAlignment="Top" FontSize="24" SelectionChanged="ListBox_Main_SelectionChanged" Foreground="Black">
     <ListBoxItem Content="Item 1" Background="#19000000" />
     <ListBoxItem Content="Item 2" Background="#19000000" />
     <ListBoxItem Content="Item 3" Background="#19000000" />
     <ListBoxItem Content="Item 4" Background="#19000000"/> 
     <ListBoxItem Content="Item 5" Background="#19000000"/>
 </ListBox> 
```

I can change the color of background, foreground, and the text of the list box items but there's no option to change the color when any of the items is selected, it is blue by default: ![在此处输入图像描述](../Images/4b68c975f7a9d457d3ed0b343dfbf150.png)

我们可以改变那个蓝色吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:04:41.030

您需要根据`ListBoxItem`您的要求更改默认样式模板。[MSDN 参考](http://msdn.microsoft.com/en-us/library/cc278062%28v=vs.95%29.aspx)

```
<Style TargetType="ListBoxItem">
  <Setter Property="Padding" Value="3" />
  <Setter Property="HorizontalContentAlignment" Value="Left" />
  <Setter Property="VerticalContentAlignment" Value="Top" />
  <Setter Property="Background" Value="Transparent" />
  <Setter Property="BorderThickness" Value="1"/>
  <Setter Property="TabNavigation" Value="Local" />
  <Setter Property="Template">
      <Setter.Value>
          <ControlTemplate TargetType="ListBoxItem">
              <Grid Background="{TemplateBinding Background}">
                  <vsm:VisualStateManager.VisualStateGroups>
                      <vsm:VisualStateGroup x:Name="CommonStates">
                          <vsm:VisualState x:Name="Normal" />
                          <vsm:VisualState x:Name="MouseOver">
                              <Storyboard>
                                  <DoubleAnimation Storyboard.TargetName="fillColor" Storyboard.TargetProperty="Opacity" Duration="0" To=".35"/>
                              </Storyboard>
                          </vsm:VisualState>
                          <vsm:VisualState x:Name="Disabled">
                              <Storyboard>
                                  <DoubleAnimation Storyboard.TargetName="contentPresenter" Storyboard.TargetProperty="Opacity" Duration="0" To=".55" />
                              </Storyboard>
                          </vsm:VisualState>
                      </vsm:VisualStateGroup>
                      <vsm:VisualStateGroup x:Name="SelectionStates">
                          <vsm:VisualState x:Name="Unselected" />
                          <vsm:VisualState x:Name="Selected">
                              <Storyboard>
                                  <DoubleAnimation Storyboard.TargetName="fillColor2" Storyboard.TargetProperty="Opacity" Duration="0" To=".75"/>
                              </Storyboard>
                          </vsm:VisualState>
                      </vsm:VisualStateGroup>
                      <vsm:VisualStateGroup x:Name="FocusStates">
                          <vsm:VisualState x:Name="Focused">
                              <Storyboard>
                                  <ObjectAnimationUsingKeyFrames Storyboard.TargetName="FocusVisualElement" Storyboard.TargetProperty="Visibility" Duration="0">
                                      <DiscreteObjectKeyFrame KeyTime="0">
                                          <DiscreteObjectKeyFrame.Value>
                                              <Visibility>Visible</Visibility>
                                          </DiscreteObjectKeyFrame.Value>
                                      </DiscreteObjectKeyFrame>
                                  </ObjectAnimationUsingKeyFrames>
                              </Storyboard>
                          </vsm:VisualState>
                          <vsm:VisualState x:Name="Unfocused"/>
                      </vsm:VisualStateGroup>
                  </vsm:VisualStateManager.VisualStateGroups>
                  <Rectangle x:Name="fillColor" Opacity="0" Fill="#FFBADDE9" IsHitTestVisible="False" RadiusX="1" RadiusY="1"/>
                  <Rectangle x:Name="fillColor2" Opacity="0" Fill="#FFBADDE9" IsHitTestVisible="False" RadiusX="1" RadiusY="1"/>
                  <ContentPresenter
                          x:Name="contentPresenter"
                          Content="{TemplateBinding Content}"
                          ContentTemplate="{TemplateBinding ContentTemplate}"
                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                          Margin="{TemplateBinding Padding}"/>
                  <Rectangle x:Name="FocusVisualElement" Stroke="#FF6DBDD1" StrokeThickness="1" Visibility="Collapsed" RadiusX="1" RadiusY="1" />
              </Grid>
          </ControlTemplate>
      </Setter.Value>
  </Setter>
</Style> 
```

您还可以查看此链接，[格式化选定 WPF 列表框项的背景颜色以](http://jamesmccaffrey.wordpress.com/2008/09/26/formatting-the-background-color-of-a-selected-wpf-listbox-item/)供参考。

# jaxb - JAXB 生成没有注解的 java 类

> ID：13207516
> 
> 赞同：6
> 
> 时间：2012-11-03T08:42:50.927
> 
> 标签：jaxb, xjc

我正在尝试使用 jdk 1.6, xjc 命令从示例 xsd 生成 java 类。但我不想使用注解，即我不想生成包含注解的java 类。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T14:05:42.243

在[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)中，标准中定义的 XML 绑定元数据的唯一标准表示是 JAXB 注释。因此，在没有这些注释的情况下生成类的选项用途有限。

我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)的负责人，我们确实提供了 JAXB 元数据的 XML（和 JSON）表示作为扩展：

*   XML - [http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html](http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html)
*   JSON - [http://blog.bdoughan.com/2012/04/extending-jaxb-representing-metadata-as.html](http://blog.bdoughan.com/2012/04/extending-jaxb-representing-metadata-as.html)

如果您有兴趣能够生成此元数据而不是注释，请针对 MOXy 组件在我们的错误数据库中请求增强：

*   [https://bugs.eclipse.org/bugs/enter_bug.cgi?product=EclipseLink](https://bugs.eclipse.org/bugs/enter_bug.cgi?product=EclipseLink)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T10:37:15.413

这个问题有两个部分：

*   在编译时，您必须以不同的方式生成代码。您可以编写一个 XJC 插件来执行此操作。
*   在运行时中，您必须使用没有注释的 JAXB 实现（请参阅 Blaise 在这部分的回答）。

请参阅有关 XJC 可扩展性的这个问题：

> [XJC - 它是可扩展的吗？](https://stackoverflow.com/questions/26619375/xjc-is-it-extensible)

您可以编写一个完全替代代码生成的[XJC 插件。](https://jaxb.java.net/plugin.html)所以我可以想象一个 XJC 插件，它为[MOXy](http://www.eclipse.org/eclipselink/moxy.php)生成 XML 映射而不是类中的注释。您也可以使用额外的注释阅读器对 JAXB RI 执行此操作，但与简单地使用 MOXy 相比要复杂得多。

但是请注意，编写高级 XJC 插件可能非常复杂。

# java - 将新的 WindowListener 添加到 JFrame

> ID：13207519
> 
> 赞同：6
> 
> 时间：2012-11-03T08:43:44.523
> 
> 标签：java, swing, jframe, joptionpane, windowlistener

```
 mainFrame.addWindowListener(new WindowListener() {

        @Override
        public void windowClosing(WindowEvent e) {
            if (JOptionPane.showConfirmDialog(mainFrame, "Are you sure you want to quit?", "Confirm exit.", JOptionPane.OK_OPTION, 0, new ImageIcon("")) != 0) {
                return;
            }
            System.exit(-1);
        }

        @Override 
        public void windowOpened(WindowEvent e) {}

        @Override 
        public void windowClosed(WindowEvent e) {}

        @Override 
        public void windowIconified(WindowEvent e) {}

        @Override 
        public void windowDeiconified(WindowEvent e) {}

        @Override 
        public void windowActivated(WindowEvent e) {}

        @Override 
        public void windowDeactivated(WindowEvent e) {}

    }); 
```

有我的代码，是否有可能因为我只使用 windowClosing 方法来删​​除我的情况下的所有其他方法，无用的方法，所以它占用的空间更少？

例子

```
 mainFrame.addWindowListener(new WindowListener() {

        @Override
        public void windowClosing(WindowEvent e) {
            if (JOptionPane.showConfirmDialog(mainFrame, "Are you sure you want to quit?", "Confirm exit.", JOptionPane.OK_OPTION, 0, new ImageIcon("")) != 0) {
                return;
            }
            System.exit(-1);
        }

    }); 
```

是否可以？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-03T08:46:30.357

`WindowListener`调用的默认实现[`WindowAdapter`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowAdapter.html)允许您覆盖您真正想要使用的方法

# c# - 通过Sql查询进行分页

> ID：13207520
> 
> 赞同：0
> 
> 时间：2012-11-03T08:44:33.907
> 
> 标签：c#, sql, sql-server, sql-server-2005, gridview

我正在开发一个使用网格视图的应用程序。我想通过使用 sql 查询为该网格视图使用分页。

我想在 和 的帮助下显示`pagesize`记录`pageindex`。

如何使用 sql 查询来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:45:56.250

> 我想通过使用 sql 查询为该网格视图使用分页。
> 
> 我想在 pagesize 和 pageindex 的帮助下显示记录。

将两个参数传递给 sql 查询`@pageindex`和`@pagesize`，您可以使用该`ROW_NUMBER()`函数进行分页。类似于以下内容：

```
;With CTEForPagination AS  
(
   SELECT ROW_NUMBER() OVER(ORDER BY SomeFieldToOrderBy) AS RowNum,  * 
   FROM YourTableReference
)
SELECT *   
FROM CTEForPagination
WHERE RowNum BETWEEN ((@PageIndex - 1) * @PageSize + 1)
    AND (@PageIndex * @PageSize)
ORDER BY AnotherFieldToOrderBy
--This is just an example 
```

## [示例演示](https://data.stackexchange.com/stackoverflow/query/84211/pagination-through-sql-query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:02:00.137

```
WITH EmpOrdered AS
(   
SELECT
Lastname,
ROW_NUMBER() Over (ORDER BY Lastname) AS rownum  
FROM Employees
)
SELECT e.*
FROM Employees e
INNER JOIN EmpOrdered ON e.Lastname = EmpOrdered.Lastname
WHERE EmpOrdered.rownum BETWEEN 1000 AND 1050
ORDER BY EmpOrdered.rownum ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T09:23:08.757

尝试这个

```
CREATE PROCEDURE GetUserByPaging
(
    @PageSize int,
    @PageIndex int
)
AS
    /* SET NOCOUNT ON */
declare 
    @StartRow int,
    @EndRow int

    if(@PageIndex < 1)
      Set @PageIndex = 1

    Set @StartRow = (@PageSize * (@PageIndex - 1)) + 1
    Set @EndRow = @PageSize * @PageIndex

SELECT * FROM(
    SELECT
       ROW_NUMBER() Over(Order By u.UserID) RowNumber,
       u.UserID,
       u.UserName
    FROM 
        Users u) u
    WHERE 
        ((u.RowNumber Between @StartRow AND @EndRow)) 
```

# javascript - 如何查找对象是否存在于数组中javascript

> ID：13207527
> 
> 赞同：8
> 
> 时间：2012-11-03T08:45:59.837
> 
> 标签：javascript, jquery

我在javascript中有一个对象数组。与此类似的东西：

```
 var objectArray = [
         { "Name" : "A", "Id" : "1" },
         { "Name" : "B", "Id" : "2" },
         { "Name" : "C", "Id" : "3" },
         { "Name" : "D", "Id" : "4" }
    ]; 
```

现在我正在尝试`Name`通过内置函数等来确定数组中是否存在具有给定属性值`inArray`的对象`indexOf`。意味着如果我只有一个字符串，那么`C`这是否可以检查具有属性名称 C 的对象是否存在是否在数组中使用 indexOf、inArray 等内置函数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T08:51:13.730

我不会使用类似于 Rahul Tripathi 的评论链接答案的索引，而是使用修改后的版本按名称提取对象，而不是传递整个对象。

```
function pluckByName(inArr, name, exists)
{
    for (i = 0; i < inArr.length; i++ )
    {
        if (inArr[i].name == name)
        {
            return (exists === true) ? true : inArr[i];
        }
    }
} 
```

用法

```
// Find whether object exists in the array
var a = pluckByName(objectArray, 'A', true);

// Pluck the object from the array
var b = pluckByName(objectArray, 'B'); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-03T08:50:04.717

```
var found = $.map(objectArray, function(val) {
    if(val.Name == 'C' ) alert('found');
});​ 
```

[演示](http://jsfiddle.net/abZ4z/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T08:48:22.867

你可以试试：

```
objectArray.indexOf({ "Name" : "C", "Id" : "3" }); 
```

更好的方法是简单地遍历数组，但如果你必须使用 indexOf，这就是你的做法。

迭代方法如下所示：

```
var inArray = false;
for(var i=0;i<objectArray.length;i++){
    if(objectArray[i]["Name"] == "C"){
        inArray = true;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T09:10:20.060

好吧，如果对象不是太大，您可以考虑迭代并匹配以查找特定对象是否存在，如下所示：

```
//The Object
var objectArray = [
     { "Name" : "A", "Id" : "1" },
     { "Name" : "B", "Id" : "2" },
     { "Name" : "C", "Id" : "3" },
     { "Name" : "D", "Id" : "4" }
];

//Function to check if object exist with the given properties
function checkIfObjectExist(name,id)
{
for(var i=0;i<objectArray.length;i++)
 {
  if(objectArray[i].Name===name && objectArray[i].Id===id)
   {     
      return true;
   }
 }    
}

// Test if function is working
console.log(checkIfObjectExist("B","2")); 
```

# facebook - 打开图表：如何为所用时间指定属性

> ID：13207530
> 
> 赞同：1
> 
> 时间：2012-11-03T08:46:34.107
> 
> 标签：facebook, facebook-graph-api

当我需要展示完成对象上的操作所花费的时间时，如何指定属性。
例如

```
1 hour 2 minutes
20 minutes 
2 minutes 20 seconds etc. 
```

Facebook 公开了一个[DateTime](https://developers.facebook.com/docs/opengraph/simpletypes/)类型。但我理解它的方式是实际时间而不是间隔。

如何指定我喜欢的 320 秒并且 OG 会在适当的分区中显示它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T20:28:18.903

您想使用`duration`文本模板来显示您的操作类型的自定义属性。

这是一个在 Open Graph Aggregation 单元中显示持续时间的示例：

![在此处输入图像描述](../Images/07f13b75c00c3686eeb7cbc000437aca.png)

`sleep`我在 object-type有一个 action-type `bar`，我的 Aggregation 显示小睡的持续时间。

创建 action-type `sleep`，将其连接到 object-type `bar`，并创建`sleep_seconds`一个 Integer 自定义属性：

![在此处输入图像描述](../Images/12a99bfda2ef9b636450b9ffe50835be.png)

自定义属性`sleep_seconds`将保存小睡的持续时间（以秒为单位）。

接下来，创建一个显示持续时间的 OG 聚合（称为`duration`文本模板）：

![在此处输入图像描述](../Images/22909ba9aa0be298fcf955e4e393e729.png)

我的对象类型`bar`有一个名为 的自定义属性`rating`，这并不重要，`duration`但我只是为了好玩而展示它——它保存了这个栏对睡眠有多好的评价:)

最后，要发布一个动作，我使用 js-sdk 并包含持续时间`sleep_seconds`：

```
function post() {
  FB.api(
    '/me/esmithy_one:sleep',
    'post',
    {bar: 'http://www.plooza.com/og/bar11.html',
     sleep_seconds: 60*60*1 + 60*39 + 2  // h m s
    },
    function(response) {
      if (!response || response.error) {
        console.log(response);
        alert('Error occured');
      } else {
        console.log(response);
        alert('Post was successful! Action ID: ' + response.id);
      }
    }
  );
} 
```

如果您真的想显示“1 小时 39 分 2 秒”而不是 1:39:02，那么您可以在代码中计算它，将其转换为字符串，并将字符串保存为操作的自定义属性-类型。当然，您的操作类型的自定义属性将`string`代替`integer`。

你可以试试这个很棒的应用程序：http: [//plooza.com/og/sleep1.html](http://plooza.com/og/sleep1.html)

如果您无法让您的聚合单元显示在用户的时间轴中，请尝试删除除您要显示的聚合之外的**所有其他聚合。**在测试我的测试应用程序时，我必须这样做。此外，发布足够的操作来填充聚合单元。

更多信息： [https ://developers.facebook.com/docs/opengraph/template/](https://developers.facebook.com/docs/opengraph/template/)

# java - 后台线程Android

> ID：13207531
> 
> 赞同：1
> 
> 时间：2012-11-03T08:46:42.440
> 
> 标签：java, android, multithreading

我对android中的线程有疑问

**如果从新线程的run()**方法调用我的活动中的方法是在该新线程或主线程中执行的方法。例如。

```
 ...
  public void run()
   {
    someMethod(); //some method declared in activity  
    }
  ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T08:51:22.833

由于每个线程都有自己的堆栈，并且`Threads`不共享堆栈。因此，一旦启动了一个线程，那么从它调用的任何方法都将`Thread`仅在其中执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T08:51:08.723

是的。您调用的每个方法都在当前线程中执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T09:02:30.370

创建线程时，它有自己的堆栈。因此，您从该线程调用的任何方法都仅在该线程的堆栈中执行。

# php - 如何在 PHP 中为每个 img 赋予自己的名称，来自 MySQL 查询

> ID：13207538
> 
> 赞同：0
> 
> 时间：2012-11-03T08:48:02.063
> 
> 标签：php, javascript, jquery, mysql

下面是我的 PHP 代码，我正在寻找给每个 img 自己的名字的方法，然后我可以在 jQuery 中选择。

PHP：

```
$query=mysql_query($sql) or die(mysql_error());
while($list=mysql_fetch_array($query)){
    print"
        <div class=\"content\">$list[content]</div>
        <div class=\"contentpic\">$list[content_pic]</div>
    ";
}

content    : longtext
content_pic     : text 
```

1 content_pic 列保存几个img src：`< img src="http://path">< img src="http://path">...`

这是我尝试做[的示例示例站点是一个普通的电子商店](http://www.asos.com/Vans/Vans-Authentic-Plimsolls/Prod/pgeproduct.aspx?iid=691064&abi=1&clr=Black&r=2)
1内容页面里面有几个内容img，我应该继续找到方法给每个img自己的名字，然后在jQuery中选择使用方法来移动或.. . 一些行为。
或者有没有更好的解决方案？

任何建议将不胜感激，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:00:28.843

您可以像这样为每个图像赋予它自己的 ID：

```
$counter = 1;
while($row = mysql_fetch_array($query)){
   echo "<img id='myImage" . $counter . "' src='" . $row['content_pic'] . "' />";
   $counter++;
} 
```

然后只需使用 JQuery 使用它们的 ID 选择每个图像：myImage1、myImage2 ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:22:03.273

可能这会有所帮助

```
$counter = 1;
while($row = mysql_fetch_array($query)){
$name="name='img".$counter."'>";
echo str_replace(">",$name,$row['content_pic'];
$counter++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T04:30:43.877

不要在 MySQL 中保存整个 img 标签 html 代码，只需保存路径。使用 PHP explode()，并将索引写入类。

# c - 指针地址不递增

> ID：13207541
> 
> 赞同：2
> 
> 时间：2012-11-03T08:48:44.397
> 
> 标签：c, optimization, pointers

我之前已经在[Code Review](https://codereview.stackexchange.com/questions/16301/how-to-improved-and-optimized-my-squeeze-function)中实施了一些建议。我还通过使用指针改进了我的代码。但是，下面的地址递增部分有什么问题`squeezed_str++`？似乎地址没有增加。请指教。

PS。substring() 函数正在工作。:)

```
char *squeeze (char *str, int start_index, int end_index, char *ref_str) {
     char *substr;
     substr = malloc (sizeof (*substr));
     if (substr == NULL) {
          printf ("Unable to allocate memory.\n");
          exit (EXIT_FAILURE);
     }

     char *squeezed_str;
     squeezed_str = malloc (sizeof (*squeezed_str));
     if (squeezed_str == NULL) {
          printf ("Unable to allocate memory!\n");
          exit (EXIT_FAILURE);
     }

     substr = substring (str, start_index, end_index);
     int substr_len = strlen (substr);
     int refstr_len = strlen (ref_str);

     char chr1, chr2; chr1 = chr2 = '\0';

     for (int i = 0; i < substr_len; i++) {
          chr1 = *(substr+i);
          for (int j = 0; j < refstr_len; j++) {
               chr2 = *(ref_str + j);
               if (chr1 == chr2) {
                    break;
               }
          }
          if (chr1 != chr2) {
               *squeezed_str = *(substr+i);
               squeezed_str++;
          }     
     }

     return squeezed_str;
 } /* end of squeeze() */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T09:16:28.833

内联建议的一些改进，未经测试：

```
char *squeeze (char *str, int start_index, int end_index, char *ref_str) {
     char *substr = substring (str, start_index, end_index);
         //do not malloc here!, you are doing an assignment later on, so memory leak
         //infact might as well move assignment right here

     char *squeezed_str;
     squeezed_str = malloc (strlen(str)+1); //+ 1 one for null terminator
     if (squeezed_str == NULL) {
          printf ("Unable to allocate memory!\n");
          exit (EXIT_FAILURE);
     }

     int substr_len = strlen (substr);
     int refstr_len = strlen (ref_str);
     int squeezeStrIdx = 0;

     for (int i = 0; i < substr_len; i++) {
          char chr1 = substr[i]; //using index accessing is nicer
                                 //moved the scope of the variable in
          char chr2 = '\0'; //reduced variable scope, benefit is now resets each loop
          for (int j = 0; j < refstr_len; j++) {
               chr2 = ref_str[j];
               if (chr1 == chr2) {
                    break;
               }
          }
          if (chr1 != chr2) {
               squeezed_str[squeezeStrIdx] = chr1;
               squeezeStrIdx++; //if you modify squeezed_str,
                                //how do you expect to return it at end of method?
          }     
     }

     //this is to null terminate the squeezed_str
     squeezed_str[squeezeStrIdx] = '\0';

     return squeezed_str;
 } /* end of squeeze() */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T09:17:46.130

完全有缺陷的一件事是完全修改`squeezed_str`。这是返回的地址`malloc`。如果您修改它，您以后将无法访问`free`该内存区域。您造成了内存泄漏，或者更糟糕的是，您`free`在最后调用时造成了崩溃。

编辑：

```
 char *squeeze (const char *str, size_t start_index, size_t end_index, const char *ref_str) 
 /* You don't modify `str` and `ref_str` so it is a good idea to make it visible in the signature of the function, whence the const qualifiers */
 {
 char *substr;   
 /* Snip the memory leak */

 char *squeezed_str = malloc (sizeof (*squeezed_str));
 if (!squeezed_str) {
      fprintf (stderr, "Unable to allocate memory!\n");  /* Error are to be written on stderr */
      exit (EXIT_FAILURE);     /* Exitting the app in a function is not good style */
 }

 substr = substring (str, start_index, end_index);
 size_t substr_len = strlen (substr);       /* strlen returns size_t not int */
 size_t refstr_len = strlen (ref_str);

 char chr1 = 0, chr2 = 0;
 char *squeezed_copy = squeezed_str;       /* We use a second pointer to not lose the malloc'ed area */
 for (size_t i = 0; i < substr_len; i++) {
      chr1 = substr[i];                     /* This syntax is simpler (you'll see when you have nested structures */
      for (size_t j = 0; j < refstr_len; j++) {
           chr2 = ref_str[j];
           if (chr1 == chr2) {
                break;
           }
      }
      if (chr1 != chr2)
           *squeezed_copy++ = substr[i];
 }
 /* Add the NUL sentinel */
 *squeezed_copy++ = 0;

 return squeezed_str;
} /* end of squeeze() */ 
```

这就是说，我还没有检查算法是否符合您的预期。预感我会说使用`strstr`会是一个更好的主意。

# linux - 如何“导出”命令“日期”？（linux /期望/ sftp）

> ID：13207543
> 
> 赞同：1
> 
> 时间：2012-11-03T08:49:15.067
> 
> 标签：linux, sftp, expect

我想从 sftp 服务器安排文件复制。不允许使用公钥，所以我只知道一种使用期望的方法。

问题是文件名每天都在变化，但文件名实际上是 date+.csv 所以我可以安排它。

但无法设置变量文件名...

我想在 2 个脚本中做这样的事情。

## 脚本 1（sh 脚本）

文件名=日期 %Y%m%d

## 导出文件名

## 脚本 2（exp 脚本）

连接到 sftp 服务器获取文件名。

## 出口

我的努力如下。

我的 *.sh 脚本 =

### 开始

```
#!/bin/sh
file=$(date --date='-2 days' +%Y%m%d.csv)"
# looking for something like this (20121031.csv)
export file
expect /home/desk4/task/sftp.exp 
```

### 结尾

我的期望脚本位于“/home/desk4/task/sftp.exp”

### 开始

# !/usr/bin/expect

```
spawn /usr/bin/sftp user@server.com
expect "user@server.com's password:"
send "password"
send "\r"
expect "sftp>"
spawn "get $file \r"
expect "sftp>"
send "bye \r" 
```

### 结尾

错误

./sftp.sh: 3: export: 20121031.csv: 变量名错误

# 当我更新用于测试目的的 sh 脚本时，如下所示......

```
#!/bin/sh
file=$(date)
export $file
expect /home/harshit/Desktop/1/sftp.exp 
```

======================================== 错误= ./sftp.sh: 3: 导出: 2: 错误的变量名

- 结尾 -

谢谢你的重播。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:36:40.530

“bad variable name”错误是由于您导出变量的*值*，而不是变量的*名称*：`export $file`是错误的，使用`export file`

在期望中，您通过全局`env`数组访问环境变量，所以`$env(file)`不要使用`$file`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T08:54:17.133

继续在同一行发出 export 和 variable ：

```
$export filename=`date +'%F' | sed 's/[-]//g'`.csv
$echo $filename
20121103.csv 
```

# asp.net - JSP/ASP 会话对象会话和网站用户帐户会话之间的区别？它们不同吗？

> ID：13207551
> 
> 赞同：0
> 
> 时间：2012-11-03T08:50:10.807
> 
> 标签：asp.net, jsp, session, session-state, session-timeout

我正在修改 JSP 和 ASP.Net 中会话对象的概念。我很困惑，“什么时候创建了一个实际的会话对象？” 直到最近，我还认为它是在用户登录他的帐户时创建的，但现在我在书中读到它是在用户访问您网站上的任何页面时隐式创建的。

那么它是什么时候真正创建的呢？JSP 会话与网站用户帐户会话不同吗？

如果后者是正确的，当用户实际登录他的帐户时是否创建了第二个新会话，而前一个会话被破坏了？例如：购物网站可能允许用户选择许多商品并“添加到我的购物车”。他登录后这些数据会发生什么。在销毁初始会话后是否在内部创建了一个新会话？

如果这看起来令人困惑，那么您可以指定 Session 通常在实际系统中是如何实现的（因为我是学生）？会话通常何时开始？其中存储了哪些数据？您设置的典型超时时间是多少，为什么？

我的研究：JSP 会话是抽象概念，用户帐户会话是特定于实现的。两者都不一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:58:53.510

会话通常由

*   生成唯一令牌，
*   创建一个 Session 对象来保存会话数据并将其存储在由唯一令牌索引的映射中，
*   将包含此令牌的会话 cookie 发送到浏览器。

每次来自该浏览器的请求都包含 cookie，因此容器可以从其内部会话映射中检索适当的会话。

所以是的，会话可以在用户通过身份验证之前存在，甚至根本没有身份验证。当用户通过身份验证时，他会保持相同的会话。唯一的区别是您通常在会话中添加用户 ID，以便将用户与会话相关联。

例如，您可以让匿名用户在会话中购物并将商品添加到他们的购物车中，并且仅在他们需要付款时才要求他们进行身份验证（以检索他们存储的帐户）。或者您可以让他们将商品添加到购物车中，而根本不对其进行身份验证。

# vim - Vim 中追加和插入模式的区别

> ID：13207566
> 
> 赞同：59
> 
> 时间：2012-11-03T08:51:46.203
> 
> 标签：vim

我在 vimtutor 中玩耍时偶然注意到了这一点。Vim 中的追加和插入模式有什么区别？当我`a`以正常模式（不是`A`）输入时，我可以插入文本。我什么时候应该使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-11-03T08:53:41.400

append 命令将光标放在*当前*位置之后，而 insert 命令将光标放在它*之前*。

使用 append 命令就像将光标向右移动一个字符，然后使用 insert 命令。

使用 insert 命令就像将光标向左移动一个字符，然后使用 append 命令。

您可以根据要开始输入的位置来选择。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2016-06-19T20:39:43.133

请注意，`vimtutor`最初并没有使命令的情况变得明显：

SHIFT+A（大写 A，与 a 相反）光标移动到当前行的*末尾*。

SHIFT+I（大写 I，而不是 i）移动到*当前*行的开头。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-02-06T20:05:38.723

**Append**的另一个重要方面是，如果当前位置*之后*的位置是一个空格，后跟一个单词。完成编写后，它将连接两个单词。

例如具有以下文本的文件：

你好。*_*

将光标放在*i*上。按*a*按钮然后按*ESC*后，您将拥有：

你好。*_*

# php - 通过PHP调用页面加载的随机记录，通过AJAX动态显示结果

> ID：13207571
> 
> 赞同：1
> 
> 时间：2012-11-03T08:52:28.583
> 
> 标签：php, mysql, ajax

这是我在过去 3 天里总共坚持了大约 7 个小时的事情，这让我非常疯狂。非常感谢您可以借给我的任何帮助。

基本上我想：

1.  在页面加载时调用 PHP 函数，该函数从我的 MySQL 数据库中随机选择一条记录

2.  在 HTML 页面中动态显示该记录

（一旦我把它弄下来，我还希望能够通过点击一个按钮来触发这个过程。）

在处理此任务之前，我整理了一个原型，该原型通过 HTML 下拉菜单动态显示特定记录：http: [//lrdondmt.com/week13/ajaxprototype1.html](http://lrdondmt.com/week13/ajaxprototype1.html)

我一直在尝试修改此代码以实现上述目的。

我的 PHP 看起来像这样：

```
<?php

// connect to database

    $username= "**withheld**"'
    $password="**withheld**";
    $database="**withheld**";
    $table="banddb";
    mysql_connect(localhost,$username,$password);
    @mysql_select_db($database) or die( "Unable to select database");

// the query itself, selects random record from database

    $sql="SELECT * FROM banddb WHERE id >= (SELECT FLOOR( MAX(id) * RAND()) FROM quotes ) ORDER BY id LIMIT 1";
    $result = mysql_query($sql);

// echo result

while($row = mysql_fetch_array($result))
  {
    echo '<b>Band name:</b>&nbsp;' . $row['bandname'] . '</br></br>';
    echo '<b>Location:</b>&nbsp;' . $row['city'] . ',&nbsp;' . $row['state'] . '</br></br>';
    echo '<b>Image:</b> </br></br>' . '<img src="http://lrdondmt.com/discovermusic/images/' . $row['imgpath'] . '" />' . '</br></br>';
    echo '<b>About the band: </b>' . $row['abouttheband'] . '</br></br>';
    echo '<a href="' . $row['bandcamplink'] .  '"><img src="http://www.lrdondmt.com/discovermusic/images/bandcamp-icon.png" alt="Find on the band on Bandcamp" /></a>' . '</br></br>';
    echo '<a href="' . $row['facebooklink'] .  '"><img src="http://www.lrdondmt.com/discovermusic/images/facebook-icon.png" alt="Find on the band on Facebook" /></a>' . '</br></br>';
    echo '<b>Bandcamp player:</b> </br></br>' . '<iframe width="300" height="100" id=bandcampplayer src="http://bandcamp.com/EmbeddedPlayer/v=2/album=' . $row['bandcampid'] . '/size=grande/bgcol=e9e9e9/linkcol=890101/" allowtransparency="true" frameborder="0" >' . '</br></br>';
  }
echo "</table>";

// close connection 

mysql_close();

?> 
```

我的 HTML 文档如下所示：

```
<!DOCTYPE html>

<html>
<head>

    <title>AJAX prototype 2</title>

<script type="text/javascript" >    
    function showRecord()
    {
          {
          document.getElementById("txtHint").innerHTML="";
          return;
          }
        if (window.XMLHttpRequest)
          {// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();
      }
        else
          {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
        }
    xmlhttp.open("GET","getmusic2.php",true);
    xmlhttp.send();
    }
    </script>

    <script type="text/javascript" >
        $(document).ready(function(showRecord))
    </script>

</head>

<body>

<div id="txtHint">
    <em>Your content should appear here.</em>
</div>

</body>
</html> 
```

如果您需要任何进一步的信息，请询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:09:09.807

由于您已经在使用 jQuery，您可以用这个更简单的 jQuery 函数替换整个 showRecord() 函数：

```
$.ajax({
     url: 'getmusic2.php',
     success: function(data) {
         $('#txtHint').html(data);
     }
}); 
```

此外，您的加载呼叫应如下所示：

```
$(document).ready(function() {
    showRecord();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:00:59.280

调用 ajax 函数时，您的闭包看起来不对，请修复此行

```
$(document).ready(function(showRecord)) 
```

看起来像这样

```
$(document).ready(function(){showRecord()}) 
```

# android - 将 Kinect 连接到 Android

> ID：13207573
> 
> 赞同：4
> 
> 时间：2012-11-03T08:52:35.813
> 
> 标签：android, java-native-interface, kinect

因此，我正在尝试使用任何必要的方式将 Kinect 连接到 Android 平板电脑。我最好避免在中间放置 Windows 机器或 arduino 板。

我已经尝试过的方法是让 C# 程序（kinect sdk 使用 C#）与 android 设备通信。我试图弄清楚如何通过 USB 发送消息，并决定进行端口转发。这行得通，但比我希望的要慢。

我想问题是我可以将它作为 USB 设备或附件连接到 Android 并通过 JNI 进行通信吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T10:10:38.027

![Android 上的 OpenNI](../Images/230e1266d9fedae70090ca0a8a04481a.png)

理论上你应该可以使用 OpenNI for ARM。我已经看到[Hirotaka 的](http://www.youtube.com/watch?v=fRc1oXB8kPE)OpenNI 演示在 Linaro Android 上运行，但使用的是 Asus Xtion Pro 传感器和 Panda 板。Hirotaka 还[发布了](http://www.hirotakaster.com/archives/2012/03/openni-for-android-apk-and-shared-binaries.php)关于他的设置的说明。

[在youtube](http://www.youtube.com/results?search_query=kinect%20on%20android&page=&utm_source=opensearch)上进行快速搜索会发现 Kinect 和 Android 平板电脑的示例。

* * *

旁注：我不明白您为什么要尝试使用 C#：您将使用 Java 编写 Android 应用程序，而 OpenNI 有一个 Java 包装器。

# php - 加载主要内容后加载 PHP 包含的内容

> ID：13207574
> 
> 赞同：0
> 
> 时间：2012-11-03T08:52:39.507
> 
> 标签：php, html, html-table, include, load

在我的网站：[www.metallica-gr.net](http://metallica-gr.net)上，您可以看到主表有 3 列。

第 1 列（左）：垂直图像
第 2 列（中）：主要内容
3d 列（右）：垂直图像

问题是，因为正确的图像位于代码的底部（因为它是表格的最后一列），它会等待主要内容在出现之前加载。所以在网站加载之前它看起来很乱，因为布局的只有一个边框出现。

我不能为此使用 div，因为我已经制作了很多 html 页面，而且当我尝试它时也没有成功。有没有什么办法解决这一问题？这是代码：

**索引.html：**

```
<table border="0" cellspacing="0" cellpadding="0" id="main" align="center">
      <tr>
        <td width="2" valign="top"><?php include "vertical.php"?></td>
        <td valign="top" style="vertical-align:top;">
    <div><?php include "main.html"?></div></td>
        <td width="2" valign="top"><?php include "vertical.php"?></td>
      </tr>
    </table> 
```

**垂直.php：**

```
<div style="background-image:url(images/vertical.jpg); width:2px; height:100%; background-repeat:repeat-y; vertical-align:top; position:fixed; top:0;"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T15:25:45.620

虽然我建议探索更现代的 HTML 结构（例如使用 div），但我知道有时完全重组是不可行的。

* * *

我相信 PHP 输出缓冲区可能会提供一个临时解决方案。

```
<?php ob_start(); ?>
<table border="0" cellspacing="0" cellpadding="0" id="main" align="center">
    <tr>
        <td width="2" valign="top"><?php include "vertical.php" ?></td>
        <td valign="top" style="vertical-align:top;">
            <div><?php include "main.html" ?></div>
        </td>
        <td width="2" valign="top"><?php include "vertical.php" ?></td>
    </tr>
</table>
<?php ob_end_flush(); ?> 
```

这将保持页面响应，直到处理完所有包含。您还应该意识到，虽然这可能会减少页面上的“洗牌”，但它也可能会增加感知的加载时间。

有关更多信息，请参阅 PHP 手册的 ob_start 文档：[http ://www.php.net/manual/en/function.ob-start.php](http://www.php.net/manual/en/function.ob-start.php)

* * *

虽然上述内容应该解决由 PHP 包含引起的任何问题，但看起来您可能还有其他一些可能的罪魁祸首。最有可能的是您从“src”加载了标签。脚本标签在加载和处理它们时会延迟所有其他加载，这就是为什么建议尽可能异步添加它们的原因。如果它们无法异步加载，则应将它们包含在结束标记内或正上方。

有关脚本问题的更多信息，请参阅： [HTML 中的 <script> 标记位置会影响网页的性能吗？](https://stackoverflow.com/questions/4396849/does-the-script-tag-position-in-html-affects-performance-of-the-webpage)

* * *

在筛选 HTML 时，我还发现了一些可能应该解决的验证错误：http: [//validator.w3.org/check ?uri=http%3A%2F%2Fmetallica-gr.net%2F&charset=%28detect+自动%29&doctype=内联&group=0](http://validator.w3.org/check?uri=http%3A%2F%2Fmetallica-gr.net%2F&charset=%28detect+automatically%29&doctype=Inline&group=0)

即使是基于表格的布局也应该验证，因为它使浏览器呈现更可预测并且更容易寻找错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:43:19.543

我认为你应该用 div 结构替换表结构，因为这是表结构的缺点，它会逐行加载每个 TR / TD，而在 DIV 结构中我们进行不同的划分，这就是为什么浏览器会同时加载不同的划分，这就是为什么现在一天设计师更喜欢DIV结构。

在您的情况下，它从第一个 TD 开始加载，并以最后一个 TD 结束，所以我认为 DIV 结构是您问题的解决方案。

# php - 显示 PHP mysql 表中的图像

> ID：13207580
> 
> 赞同：2
> 
> 时间：2012-11-03T08:53:42.903
> 
> 标签：php, mysql, image

我有一个 PHP 脚本来回显 Mysql 表的内容。我将它用作静态页面的小型 CMS。

我想知道的是如何在我的 PHP 脚本中显示图像。我有一个提交日期、标题、消息和图像的表单。

我正在使用 Image 字段插入图像的 URL。什么是在页面上显示图像的正确方法。

下面是我的代码：

```
<?php
$con = mysql_connect("localhost","name","password");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("databaseName", $con);

$result = mysql_query("SELECT * FROM Blog");

while($row = mysql_fetch_array($result))
  {
  echo $row['Date'];
  echo "<br />";
  echo $row['Title'];
  echo "<br />";
  echo $row['Message'];
  echo "<br />";
  echo $row['Image'];
  echo "<br />";
  echo "<br />";
  echo "<br />";
  }

mysql_close($con);
?> 
```

这是结果：

> 2 月 17 日
> 标题
> 这是我的消息
> http‍://vickybeeching.com/blog/wp-content/uploads/2011/09/canthearyou.jpeg
> 
> 2 月 18 日
> 标题
> 这是我的消息
> http‍://vickybeeching.com/blog/wp-content /uploads/2011/09/canthearyyou.jpeg

但我希望页面显示图像而不是 URL。我猜只是使用`<img></img>`标签，但我不确定 PHP 在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T08:58:53.823

您可以在图像标签中编写代码而不是直接回显。

试试这个代码。

```
echo "<img src='".$row['Image']."'/>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T09:58:02.163

试试这个代码，但完美地给出图像文件夹路径

```
<?php
  $imagepath = "../uploads/";
  echo "<img src='".$imagepath.$row['Image']. "' alt='' height='200' width='200' /> ";
?> 
```

根据需要，您可以更改图像的高度和宽度。但清晰度不同。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T08:56:20.563

```
 echo $row['Image']; 
```

像这样替换

```
 echo '<img src="'.$row['Image'].'" alt="" />'; 
```

# ios - Geoloqi 示例代码：IOS 代码符号错误

> ID：13207591
> 
> 赞同：0
> 
> 时间：2012-11-03T08:56:09.797
> 
> 标签：ios, xcode

当我在我真正的 iphone ios6 上运行示例代码时。有这样的错误“

身份“iPhone 开发人员：Aaron Parecki (UR6C55S2E6)”与您的钥匙串中的任何有效、未过期的证书/私钥对都不匹配”

但是如果我使用模拟器，它似乎很好。有没有办法解决这个问题并在我的设备上测试示例代码？我已经购买了开发者帐户并配置了设备。其他程序运行良好。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:02:11.587

您需要有一个开发者帐户，然后设置一个 App Id，为您的应用创建配置文件，然后在您的项目中使用配置文件。

您收到错误是因为您的系统上没有安装开发人员（即 Aaron）的配置文件或钥匙串对，您需要拥有自己的然后尝试运行，它会正常工作。

# xml - Magento：添加分页并设置列号

> ID：13207595
> 
> 赞同：0
> 
> 时间：2012-11-03T08:56:22.770
> 
> 标签：xml, magento

我正在使用 magento 1.7，

要包括分页，我正在使用代码，

```
<reference name="content">
  <block type="catalog/product_list" name="home" template="catalog/product/list.phtml">
    <action method="setCategoryId"><category_id>137</category_id></action>
      <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
        <block type="page/html_pager" name="product_list_toolbar_pager"/>
      </block>
    <action method="setToolbarBlockName"><name>product_list_toolbar</name></action>
  </block>
</reference> 
```

上面的代码放在CMS > pages > design里面

这会产生预期的输出，但我想设置显示的“产品数量”，即 column_count 为 5 以及分页。如何将 column_count 包含到上述代码中？

我可以通过在 CMS > pages > content 中添加以下代码来进行列计数，

```
{{block type="catalog/product_list" column_count="5" category_id="2" template="catalog/product/list.phtml"}} 
```

但上面的代码没有分页。我怎样才能让两者同时工作。

请帮忙，

感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:32:40.763

添加以下代码

```
<?php
    $_productCollection = clone $this->getLoadedProductCollection();
    $_productCollection->clear()
                   ->setPageSize(8)
                   ->load();      
    $_helper = $this->helper('catalog/output');
    $this->setData('column_count',3);       
?> 
```

在下面

> 模板/目录/产品/list.phtml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:55:51.120

我得到了答案，

```
<reference name="content">
<block type="catalog/product_list" name="home" template="catalog/product/list.phtml">
<action method="setCategoryId"><category_id>137</category_id></action>

<action method="addColumnCountLayoutDepend"><layout>one_column</layout><count>5</count></action>
<block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
<block type="page/html_pager" name="product_list_toolbar_pager"/>
 </block>
<action method="setToolbarBlockName"><name>product_list_toolbar</name><count>5</count></action>
</block>
 </reference> 
```

将以上代码粘贴到 CMS > pages > design

# php - 致命错误：在第 10 行的 AbsoluteFilesystem.php 中找不到接口“Twig_LoaderInterface”

> ID：13207597
> 
> 赞同：1
> 
> 时间：2012-11-03T08:56:34.153
> 
> 标签：php, twig, zend-framework2

我在 Windows 7 和 zend 框架 2 上使用 WAMP 服务器。我使用模块`ZfcTwig`来配置`Twig`模板引擎，但出现此错误：

```
( ! ) Fatal error: Interface 'Twig_LoaderInterface' not found in
D:\wamp\www\mysocial\libs\ZfcTwig\src\ZfcTwig\Twig\Loader\AbsoluteFilesystem.php on line 10 Call Stack
#   Time    Memory  Function    Location 1  0.0391  140840  {main}( )   ..\index.php:0 2    0.3756  237656  FrBox::Run( )   ..\index.php:15
3   0.7834  282088  Zend\Mvc\Application::init( )   ..\frBox.php:136
4   1.3790  2242488 Zend\Mvc\Application->bootstrap()   ..\Application.php:243
5   1.4070  2541256 Zend\EventManager\EventManager->trigger()   ..\Application.php:146
6   1.4070  2541376 Zend\EventManager\EventManager->triggerListeners()  ..\EventManager.php:208 7   1.4072  2545160 call_user_func ()   ..\EventManager.php:468
8   1.4072  2545176 Zend\Mvc\View\Http\ViewManager->onBootstrap()   ..\EventManager.php:468
9   1.4796  2989624 Zend\Mvc\View\Http\ViewManager->registerViewStrategies( )   ..\ViewManager.php:140
10  1.4796  2989880 Zend\ServiceManager\ServiceManager->get()   ..\ViewManager.php:440
11  1.4797  2990288 Zend\ServiceManager\ServiceManager->create()    ..\ServiceManager.php:442
12  1.4797  2990320 Zend\ServiceManager\ServiceManager->createFromFactory( )    ..\ServiceManager.php:487
13  1.5014  2992816 Zend\ServiceManager\ServiceManager->createServiceViaCallback()  ..\ServiceManager.php:841
14  1.5014  2993072 call_user_func ()   ..\ServiceManager.php:726
15  1.5014  2993096 ZfcTwig\Service\ViewStrategyFactory->createService()    ..\ServiceManager.php:726
16  1.5014  2993184 Zend\ServiceManager\ServiceManager->get()   ..\ViewStrategyFactory.php:13
17  1.5014  2993592 Zend\ServiceManager\ServiceManager->create()    ..\ServiceManager.php:442
18  1.5014  2993624 Zend\ServiceManager\ServiceManager->createFromFactory( )    ..\ServiceManager.php:487
19  1.5022  3000816 Zend\ServiceManager\ServiceManager->createServiceViaCallback()  ..\ServiceManager.php:841
20  1.5023  3001072 call_user_func ()   ..\ServiceManager.php:726
21  1.5023  3001096 ZfcTwig\Service\ViewRendererFactory->createService()    ..\ServiceManager.php:726
22  1.5108  3028320 Zend\ServiceManager\ServiceManager->get()   ..\ViewRendererFactory.php:27
23  1.5108  3028720 Zend\ServiceManager\ServiceManager->create()    ..\ServiceManager.php:442
24  1.5108  3028752 Zend\ServiceManager\ServiceManager->createFromFactory() ..\ServiceManager.php:487
25  1.6081  3035512 Zend\ServiceManager\ServiceManager->createServiceViaCallback()  ..\ServiceManager.php:841 26    1.6081  3035768 call_user_func ()   ..\ServiceManager.php:726
27  1.6081  3035792 ZfcTwig\Service\EnvironmentFactory->createService() ..\ServiceManager.php:726
28  1.6081  3036144 Zend\Loader\StandardAutoloader->autoload()  ..\ServiceManager.php:0
29  1.6082  3036200 Zend\Loader\StandardAutoloader->loadClass() ..\StandardAutoloader.php:217 30    1.6654  3047944 include(
'D:\wamp\www\mysocial\libs\ZfcTwig\src\ZfcTwig\Twig\Loader\AbsoluteFilesystem.php') ..\StandardAutoloader.php:306 
```

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T23:28:50.927

使用 composer 安装或更新模块及其所有依赖项。有一些变化，几个小时模块被破坏了。

```
"require": {
...
"zf-commons/zfc-twig": "dev-master",

...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-25T16:48:20.210

在类似的情况下，错误是：

```
PHP Fatal error:  Interface 'Twig_LoaderInterface' not found in
..../vendor/twig/twig/lib/Twig/Loader/String.php on line 30 
```

原因在 composer.json 中`"twig/twig":"~1.0"`，它加载版本`v1.27`

解决方案是`"twig/twig":"~1.20"`。

# asp.net-mvc - 未找到 Mvc 3 Html.action 方法 - 无效 Microsoft.Web.Infrastructure

> ID：13207600
> 
> 赞同：2
> 
> 时间：2012-11-03T08:57:00.710
> 
> 标签：asp.net-mvc, methodnotfound

我发布到 Web 服务器（Windows server 2008 R2 Enterprise-IIS 7）我的 Mvc 3 网站但无法正常工作，为什么？

**_Layout.cshtml：**

```
@Html.Action("GetLeftMenu", "Menu", new { ulCss = "navmenu-v", CurrentContentID = ViewBag.CurrentContentID, LangID = Session["langID"] }) 
```

**菜单控制器：**

```
 [OutputCache(Duration = 3600, VaryByParam = "LangID;ulCss")]
        public MvcHtmlString GetLeftMenu(string ulCss, int? CurrentContentID, int? LangID = 1)
        {
...
} 
```

**错误：**

```
Method not found: 'Void Microsoft.Web.Infrastructure.DynamicValidationHelper.ValidationUtility.GetUnvalidatedCollections(System.Web.HttpContext, System.Collections.Specialized.NameValueCollection ByRef, System.Collections.Specialized.NameValueCollection ByRef, System.Collections.Specialized.NameValueCollection ByRef, System.Web.HttpCookieCollection ByRef)'. 
```

# java - 比较两个不同arraylist（JAVA）中的字符串

> ID：13207601
> 
> 赞同：3
> 
> 时间：2012-11-03T08:57:14.990
> 
> 标签：java, string, arraylist, compare

这是我的代码的一部分：

```
 ArrayList<String> Alist= new ArrayList<String>();
  ArrayList<String> Blist= new ArrayList<String>(); 

  Alist.add("gsm");
  Alist.add("tablet");
  Alist.add("pc");
  Alist.add("mouse");

  Blist.add("gsm");
  Blist.add("something");
  Blist.add("pc");
  Blist.add("something"); 
```

所以我有两个数组列表，我想比较所有项目并检查它们是否**不相等**，以及它们是否**只打印不相等的项目**。

所以我做了这样的事情：

[http://postimage.org/image/adxix2i13/](http://postimage.org/image/adxix2i13/) 对图片感到抱歉，但是当我在此处发布 for 循环时出现某种错误。

结果是：

```
not equals..:tablet
not equals..:pc
not equals..:mouse
not equals..:gsm
not equals..:tablet
not equals..:pc
not equals..:mouse
not equals..:gsm
not equals..:tablet
not equals..:pc
not equals..:mouse
not equals..:gsm
not equals..:tablet 
```

我只想打印示例中不相等的 2 个，它们是 gsm 和 pc

```
not equals..:gsm
not equals..:pc 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-03T09:01:42.730

不要`!=`用来比较字符串。使用[等号](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#equals%28java.lang.Object%29)方法：

```
if (! Blist.get(i).equals(Alist.get(j)) 
```

但这可能无法解决您的算法问题（根本不清楚）。

如果您想要知道哪些项目在同一位置是相同的，您可以使用一个简单的循环：

```
int sizeOfTheShortestList = Math.min(Alist.size(), Blist.size());
for (int i=0; i<sizeOfTheShortestList; i++) {
    if (Blist.get(i).equals(Alist.get(i))) {
        System.out.println("Equals..: " + Blist.get(i));
    }
} 
```

如果要获取两个列表中的项目，请使用

```
for (int i = 0; i < Alist.size(); i++) {
    if (Blist.contains(Alist.get(i))) {
        System.out.println("Equals..: " + Alist.get(i));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T09:00:49.330

`RemoveAll(Collection c)`如果您碰巧知道一个列表是否总是包含所有列表，则可以在其中一个列表上使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T09:06:04.787

您可以使用以下代码：

```
 ArrayList<String> Alist = new ArrayList<String>();
    ArrayList<String> Blist = new ArrayList<String>();

    Alist.add("gsm");
    Alist.add("tablet");
    Alist.add("pc");
    Alist.add("mouse");

    Blist.add("gsm");
    Blist.add("something");
    Blist.add("pc");
    Blist.add("something");
    for (String a : Alist)
    {
        for (String b : Blist)
        {
            if (a.equals(b))
            {
                System.out.println("Equals " + a);
                break;
            }
        }
    } 
```

输出为：
等于 gsm
等于 pc

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T09:06:46.147

现在您将每个元素与所有其他元素进行比较。做类似的事情

```
for (int i = 0; i < Alist.size(); i++) {
    if (!Alist.get(i).equals(Blist.get(i)) {
        // print what you want
    }
} 
```

那当然是假设两个列表的长度相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T09:22:43.210

与其编写代码来手动比较列表元素，不如考虑使用[Apache Commons Collections](http://commons.apache.org/collections/apidocs)。

```
import org.apache.commons.collections.CollectionUtils;

List listA = ...;
List listB = ...;

Collection intersection = CollectionUtils.intersection(listA, listB); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-03T09:35:40.810

```
import java.util.HashSet;

public class CheckSet<T> extends HashSet<T>{

    @Override
    public boolean add(T e) {
        if (contains(e)) {
            remove(e);
            return true;
        } else {
            return super.add(e);
        }
    }   
} 
```

将两个列表的所有元素添加到一个`CheckSet`实例中，最后它只会包含不相等的元素。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-09T01:56:41.823

这是一种方法：

```
 public static boolean compare(List<String> first, List<String> second) {
    if (first==null && second==null) return true;
    if (first!=null && second==null) return false;
    if (first==null && second!=null) return false;

    if ( first.size()!=second.size() ) return false;

    HashMap<String, String> map = new HashMap<String, String>();
    for (String str : first) {
        map.put(str, str);
    }
    for (String str : second) {
        if ( ! map.containsKey(str) ) {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-18T10:21:10.100

公共静态 void main(String args[]) 抛出异常 {

```
 List<String> arrayList1 = new ArrayList<String>();
     arrayList1.add("a");
     arrayList1.add("b");
     arrayList1.add("c");
     arrayList1.add("d");

     List<String> arrayList2 = new ArrayList<String>();
     arrayList2.add("a");
     arrayList2.add("b");
     arrayList2.add("c");
     arrayList2.add("d");

     boolean isEqual = false;
     if(arrayList1.size() == arrayList2.size()){
        List<String> arrayListTemp = new ArrayList<String>();
        arrayListTemp.addAll(arrayList1);
        arrayListTemp.addAll(arrayList2);
        HashSet<Object> hashSet = new HashSet<Object>();
        hashSet.addAll(arrayListTemp);
        if(hashSet.size() == arrayList1.size() &&
            hashSet.size() == arrayList2.size()){
            isEqual = true;
        }
     }
     System.out.println(isEqual);
 } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-28T09:03:46.383

我们可以比较两种不同`arrayList`的尺寸`java`或`Android`如下。

```
ArrayList<String> array1 = new ArrayList<String>();
ArrayList<String> array2 = new ArrayList<String>();

array1.add("1");
array1.add("2");
array1.add("3");
array1.add("4");
array1.add("5");
array1.add("6");
array1.add("7");
array1.add("8");

array2.add("1");
array2.add("2");
array2.add("3");
array2.add("4");

 for (int i = 0; i < array1.size(); i++) {
            for (int j=0;j<array2.size();j++) {
                if (array1.get(i) == array2.get(j)) {
                    //if match do the needful
                } else {
                    // if not match
                }
            }
        } 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2014-03-13T11:16:58.980

```
import java.util.Arrays;
public class ExampleContains {
    public static boolean EligibleState(String state){
        String[] cities = new String[]{"Washington", "London", "Paris", "NewYork"};
        boolean test = Arrays.asList(cities).contains(state)?true:false;
        return test;
     }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        System.out.println(EligibleState("London"));
    }

} 
```

# android - 根据int值/文件名加载文件android

> ID：13207602
> 
> 赞同：1
> 
> 时间：2012-11-03T08:57:38.627
> 
> 标签：android, asset-management

我正在尝试从资产文件夹加载一个文件，我希望文件名基于 int i 的当前值（即如果 i = 2，则打开 2.txt 和 2.jpg）。我有以下处理资产管理器方面的代码，并且正在工作：

```
 //link the image and text boxes to the xml
    Image = (ImageView)findViewById(R.id.image);
    Text = (TextView)findViewById(R.id.text);
    loadDataFromAsset();
}

//actually load the text file and image file   
public void loadDataFromAsset() {
    //load the asset files themselves
    try {
        InputStream is = getAssets().open("1.txt");
        //check file size
        int size = is.available();
        //create a buffer to handle it
        byte[] buffer = new byte[size];
        //send the data to the buffer
        is.read(buffer);
        //close the stream down
        is.close();
        //set the text we recovered to the TextView
        Text.setText(new String(buffer));
    }
    catch (IOException ex) {
        return;
    }

    //image file next
    try {
        InputStream ims = getAssets().open("1.jpg");
        //load the image as drawable
        Drawable d = Drawable.createFromStream(ims,  null);
        //set the drawable image to the imageview
        Image.setImageDrawable(d);
    }
    catch (IOException ex) {
        return;
            }

    } 
```

我是 java 新手，真的不知道如何从这里继续前进，我怎样才能使 1.jpg 和 1.txt 根据 int 的值实际工作？

谢谢;

安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:15:39.223

尝试将其用于文本

```
InputStream is = getResources().getAssets().open("yourINTvalue.txt");
String textfile = convertStreamToString(is);
Text.setText(textfile);

public static String convertStreamToString(InputStream is)
        throws IOException {
        Writer writer = new StringWriter();

        char[] buffer = new char[2048];
        try {
            Reader reader = new BufferedReader(new InputStreamReader(is,
                    "UTF-8"));
            int n;
            while ((n = reader.read(buffer)) != -1) {
                writer.write(buffer, 0, n);
            }
        } finally {
            is.close();
        }
        String text = writer.toString();
        return text;
} 
```

图片试试这个

```
InputStream bitmap=null;
try {
bitmap=getAssets().open("yourINTvalue.png");
Bitmap bit=BitmapFactory.decodeStream(bitmap);
img.setImageBitmap(bit);
} catch (IOException e) {
e.printStackTrace();
} finally {
bitmap.close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T13:37:17.123

试试这个：

```
//actually load the text file and image file   
public void loadDataFromAsset(int val) {
//load the asset files themselves
try {
    InputStream is = getAssets().open(val + ".txt");
    //check file size
    int size = is.available();
    //create a buffer to handle it
    byte[] buffer = new byte[size];
    //send the data to the buffer
    is.read(buffer);
    //close the stream down
    is.close();
    //set the text we recovered to the TextView
    Text.setText(new String(buffer));
}
catch (IOException ex) {
    return;
}

//image file next
try {
    InputStream ims = getAssets().open(val + ".jpg");
    //load the image as drawable
    Drawable d = Drawable.createFromStream(ims,  null);
    //set the drawable image to the imageview
    Image.setImageDrawable(d);
}
catch (IOException ex) {
    return;
        }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T09:05:29.063

试试这样

InputStream is = getAssets().open(i+".txt");

# hadoop - 配置单元元数据中的错误：org.apache.thrift.transport.TTransportException：java.net

> ID：13207605
> 
> 赞同：6
> 
> 时间：2012-11-03T08:58:12.550
> 
> 标签：hadoop, hive

我使用`hive-0.9.0`with`mysql`作为元存储。我得到一个例外：

```
hive> show tables;
FAILED: Error in metadata: org.apache.thrift.transport.TTransportException:java.net.SocketTimeoutException:Read timed out

FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask 
Error in metadata: MetaException(message:Could not connect to meta store using any of the URIs provided) 
```

任何指向的指针都会有所帮助。

问候尼拉吉

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-27T03:21:59.723

您是否正确配置了 Metastore 的 URL 和凭据？您是否尝试通过以下方式重新启动 Metastore 服务

> 蜂巢--服务元存储

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T01:21:34.333

请检查您的配置单元配置`${HIVE_HOME}/conf/hive-site.xml`

hive mysql 配置示例：

```
<property>
  <name>javax.jdo.option.ConnectionURL</name>
  <value>jdbc:mysql://localhost:3306/hive?createDatabaseIfNotExist=true</value>
</property>

<property>
  <name>javax.jdo.option.ConnectionDriverName</name>
  <value>com.mysql.jdbc.Driver</value>
</property>

<property>
  <name>javax.jdo.option.ConnectionUserName</name>
  <value>hive</value>
</property>

<property>
  <name>javax.jdo.option.ConnectionPassword</name>
  <value>hive</value>
</property> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T13:38:30.723

转到 hive/hcatalog/sbin

./hcat_server.sh

这应该有帮助

# php - 在 PHP 中通过遍历数组构建树

> ID：13207607
> 
> 赞同：0
> 
> 时间：2012-11-03T08:58:36.790
> 
> 标签：php, arrays, tree

如何从 PHP 中的数组构建树，知道构建树需要遵循的规则？

我在代码中没有任何特定的地方可以找到真正错误的地方
无论如何，这些问题可能与我反复使用的按引用传递有关。
我没有使用递归，因为速度在这里真的**很**重要。根据输入数组的规则（我可以完全控制它们），这是可能的，而且速度更快，无需递归。

它是如何工作的：当你遍历数组时，每个元素的 ['start_order'] 是一个比前一个 ['start_order'] 更大的数字。
每次下一个元素的 ['start_order'] 大于此元素的 ['start_order'] 并且下一个元素的 ['end_order'] 小于此元素的 ['end_order']，则**该元素是该元素的子元素**.
在这一步之后，我必须找到该元素的所有子元素（我刚刚发现它是这个元素的子元素的那个）。

这是我的代码。

```
<?php
ksort($treeArray);
$tree = array();
$stack = array();
reset($treeArray);
$currentParent = &$treeArray[key($treeArray)];
$tree[] = &$treeArray[key($treeArray)];

while(next($treeArray) !== false){

    if(current($treeArray)['start_order'] <= $currentParent['end_order']){
        if(current($treeArray)['end_order'] <= $currentParent['end_order']){
            // There's a child of the previous

            // push the new parent
            $stack[] = $currentParent;

            if(!isset($currentParent['children'])){
                $currentParent['children'] = array();
            }
            $currentParent['children'][] = &$treeArray[key($treeArray)];
            $currentParent = current($treeArray);

        }else{
            // Supposed not to happen. Log the problem.
        }
    }else /* if(current($treeArray)['start_order'] > $currentParent['end_order']) */{
        // Pop the child here, there are no more children.
        if(($popedElement = array_pop($stack)) === NULL){
            $tree[] = $currentParent;
        }else{
            $popedElement['children'][] = &$treeArray[key($treeArray)];
            $stack[] = $popedElement;
            $currentParent = current($treeArray);
        }
    }
}

?> 
```

例子：

它的输入数组在结构上可以是这样的：

```
[1][child1][child1child1][child2][child2child1][child2child2][child2child3][2][child2child1] 
```

解析为这棵树：

```
[1]
    [child1]
        [child1child1]
    [child2]
        [child2child1]
        [child2child2]
        [child2child3]
[2]
    [child2child1] 
```

并且不要忘记这个顺序保持不变。[child2child3] 从未出现在 [child2child2] 之前，[2] 从未出现在 [1] 之前。在这个类比中，几乎就像在处理 XML 时一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T12:25:33.747

在这里发现了问题。问题与我在尝试解决此问题时如何处理传递引用有关。

这是解决方案：

```
$tree[] = &$treeArray[key($treeArray)];
$currentParent = &$treeArray[key($treeArray)];
next($treeArray);

while(current($treeArray) !== false){

    if(current($treeArray)['start_order']['start_position'] <= $currentParent['end_order']['end_order']){
        if(current($treeArray)['end_order']['end_order'] <= $currentParent['end_order']['end_order']){
            // There's a child of the previous

            // push the new parent
            $stack[] = &$currentParent;

            $currentParent['children'][] = &$treeArray[key($treeArray)];

            $currentParent = &$treeArray[key($treeArray)];
        }else{
            // Supposed not to happen. Log the problem.
        }
        next($treeArray);
    }else /* if(current($treeArray)['start_order']['start_position'] > $currentParent['end_order']['end_order']) */{
        // Close previous element here. There are no more children.

        if(end($stack) === false){
            $currentParent = &$treeArray[key($treeArray)];
            $tree[] = &$treeArray[key($treeArray)];

            next($treeArray);
        }else{              
            $currentParent = &$stack[key($stack)];
            unset($stack[key($stack)]);
        }
    }
} 
```

主要问题实际上是传递引用，它在 PHP 中与在 C 中不同。
为了解决这个问题，我无法同时使用 push 或 pop php 函数：
The push because the $var[] operator is更快并使用该功能。
弹出，因为它的返回是我之前推送的内容的副本，而不是我推送的实际元素。

Additionally, all variable assignments have to be explicitly made by reference (using the & character), so using current() for assignment is out of the question, instead I need to use the key() function like I did.

I also had a small but important bug that forced me to change the "while" instruction. It now contains current() instead of next(). That's only because after the pop of the stack I mustn't move to the next element. I need to do another iteration before I move to the next one. This solves the bad nesting generated when there are multiple tags closing in the same place.

Please note that this code is **not optimized for speed**.

# jquery - jQuery：检查图像是否已完成加载

> ID：13207609
> 
> 赞同：2
> 
> 时间：2012-11-03T08:58:45.667
> 
> 标签：jquery, download

> **可能重复：**
> [检测图像何时加载的独立于浏览器的方法](https://stackoverflow.com/questions/821516/browser-independent-way-to-detect-when-image-has-been-loaded)

如何检查客户端是否已完全下载图像，以便我可以以如下格式使用它：

```
<script type="text/javascript">
function doSomething(){
//doing something already
    if(image has finished loading) {
        alert("The image has been downloaded");
    }
    else {
        //do something else
    }
}
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T09:02:13.743

您可以使用`load`：

```
$img.load(function() {
  // image is loaded
}); 
```

如果您有问题，请加载代码`window.load`而不是`document.ready`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T09:05:59.950

尝试这样的事情-：

```
<script type ="text/javascript">
    var imageLoaded = false;

    $(document).ready(function(){

        $("img").load(function(){
            imageLoaded = true;
        });
    });

    function doSomething(){
        //doing something already
        if(imageLoaded) {
           alert("The image has been downloaded");
        } 
        else {
           //do something else
        }
}

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T09:04:28.847

```
<span id="result"></span>
</p>

<script type="text/javascript">

    $('#image1')
    .load(function(){
        $('#result').text('Image is loaded!');  
    })
    .error(function(){
        $('#result').text('Image is not loaded!');
    });

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T09:25:16.587

所有这些仅使用加载函数回调的解决方案并不完全准确，因为有时不会为已缓存的图像或损坏的图像触发加载。有许多尝试尽可能简单地检测这种行为，我可以告诉你，最好的方法是使用 Desandro 加载的非常明亮的插件图像。

你可以在这里看到它： [https ://github.com/desandro/imagesloaded/blob/master/jquery.imagesloaded.js](https://github.com/desandro/imagesloaded/blob/master/jquery.imagesloaded.js)

# mysql - MySQL JOIN 查询 -

> ID：13207618
> 
> 赞同：0
> 
> 时间：2012-11-03T08:59:40.220
> 
> 标签：mysql, sql

我知道这个问题已经在这里问过了，但我无法从以前的答案中弄清楚这个问题。

我们有 2 张桌子：

```
members
-----------------------
| id | country_iso_3 |
-----------------------
  1    USA
  2    DZA
  3    FRA
  4    ILI
  5    USA
  6    USA

members_details
-----------------------
| member_id | city    |
-----------------------
  1          AA
  2          BB
  3          CC
  4          DD
  5          EE
  6          FF 
```

现在我想查询 members_details 并选择来自同一国家的城市，这里应该是“AA”、“EE”和“FF”的结果（因为成员来自美国）

我知道如何比较来自不同表的不同列，但是在这里我们需要以某种方式检查第二个表“member_id”和第一个表“id (country_iso_3)”！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:01:12.167

只是`JOIN`这两个表，其中有一个`WHERE`子句表示您想要获得它的城市的国家/地区，如下所示：

```
SELECT md.city 
FROM members m
INNER JOIN members_details md ON m.id = md.memberid
WHERE m.country_iso_3 = 'USA' 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/b8065/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T09:03:23.720

```
Select city from members LEFT JOIN members_details 
ON members.id = members_details.memberid Where country_iso_3 = 'USA' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T09:25:30.757

这应该有效，不仅适用于美国，而且适用于不止一次列出的任何国家：

```
SELECT d.city
FROM members m,
     members_details d
WHERE d.member_id = m.id
  AND m.country_iso_3 IN (
    SELECT country_iso_3
    FROM members
    GROUP BY 1
    HAVING count(1) > 1
) 
```

# build - 如何使构建定义更有条理？

> ID：13207619
> 
> 赞同：0
> 
> 时间：2012-11-03T08:59:39.947
> 
> 标签：build, tfs, categories

我遇到了关于构建定义的问题。

现在有近 50 个 Gated 构建定义。

在发布版本后，我们将在每个 sprint 中创建一个分支。

我们仍然想在分支上添加 GATED 机制，因此列表中将有 >100 个构建定义。

构建定义太多。

是否可以制作一些文件夹并将它们放在列表中的不同类别（主干，分支）中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T16:45:31.907

取决于您使用的 TFS 版本。

对于 TFS 2010，您可以安装一个名为[Inmeta.VisualStudio.TeamExplorer.BuildExplorer](http://visualstudiogallery.msdn.microsoft.com/35daa606-4917-43c4-98ab-38632d9dbd45)的插件。它允许您根据选择的分隔符“构建”构建定义的树视图（默认为“.”）。

对于 TFS 2012，我还没有看到类似的东西，但在那里你可以选择最喜欢的构建定义，还可以过滤定义列表。

# java - 如何在 Java 中包装多个方法？枚举不是正确的方法吗？

> ID：13207620
> 
> 赞同：2
> 
> 时间：2012-11-03T08:59:41.327
> 
> 标签：java, concurrency, enums, word-wrap

我有 1 个调用`A`的接口需要由我在程序启动后动态加载的类来实现。让我们称之为`B`。

该接口提供了 x（多于 1）个方法。`a()`让我们从to调用 em `z()`。现在我必须将这个类包装一段时间来测量和控制问题，并在它自己的线程中运行它，以便能够在它花费太长时间时杀死它。

因此，我发明`C`了包装类，`B`因为`B`它本身不能实现可运行。

下一部分是原始程序应该调用的类。新班级`D`。`D`实现接口`A`以及隐藏模型的整个控制部分。

现在我必须将接口的方法包装在 D 中，并将它们发送给 C，C 将它们解包并在对象 B 上执行它们。

这里有一些我想象的示例代码：

```
public class D implements A {

private C ai;

public D(String aiName) {
    ai = new C("trivialKi");
}

private void call(parameters, ORIGIN_METHOD origin) {
    AiTaskExecutor task = new AiTaskExecutor(parameters, origin, ai);
    FutureTask<Long> tsk = new FutureTask<Long>(task);

    Thread thread = new Thread(tsk);
    thread.start();
    if (abort) {
            tsk.cancel(true);
    }
}

@Override
public void a(g g, f f, t t) {
    call(g, f, t, ORIGIN_METHOD.a);
}

@Override
public void b(g g, t t, h h) {
    call(g, t, h, ORIGIN_METHOD.b);
}

@Override
public void c(g g, t t, f f) {
    call(g, t, f, ORIGIN_METHOD.c);
}
} 
```

在 C 类中，带有该枚举的明显 switch 案例将参数传递给 B 类上的正确方法，该方法保存在 C 类的私有字段中。

您有更好的解决方案吗？我个人不喜欢 enum 的东西，如果参数差异太大，这不会很好地工作。

这样的事情有“标准”解决方案吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T09:08:58.603

对此的标准解决方案是：`java.lang.reflect.Proxy`为 A 使用“动态代理”( )。这可以节省您几乎所有的样板代码。

该站点和 Google 包含足够的`Proxy`.

另外：我建议不要为每个调用使用一个新线程——如果调用的方法很短，这将非常昂贵。您可以改用`Callable`接口`Runnable`和线程池`Executor`。这也允许您在界面中具有返回值:-)

**编辑**

只是为了好玩，我编写了动态代理和执行器的东西。

给定以下接口`A`和示例实现`B`：

```
interface A {
    int a(int g, int f, int h);
    int b(int x);
}

class B implements A {
    @Override
    public int a(int g, int f, int t) {
        System.out.println("called a in thread "+Thread.currentThread().getName());
        return 42;
    }
    @Override
    public int  b(int x) {
        System.out.println("called b in thread "+Thread.currentThread().getName());
        return 21;
    }
} 
```

正确`Callable`使用反射调用 any`java.lang.reflect.Method`如下所示：

```
class ReflectiveMethodCallable implements Callable<Object> {
    private Object target;
    private Method method;
    private Object[] args;

    public ReflectiveMethodCallable(Object target, Method method, Object[] args) {
        this.target = target;
        this.method = method;
        this.args = args;
    }

    @Override
    public Object call() throws Exception {
        return method.invoke(target, args);
    }
} 
```

创建这样的 a`ReflectiveMethodCallable`并将其赋予 an 的`ExecutorService`部分是`InvocationHandler`of `java.lang.reflect.Proxy`：

```
class MyInvocationHandler implements InvocationHandler {
    private Object target;
    private ExecutorService executorService;

    public MyInvocationHandler(Object target, ExecutorService executorService) {
        this.target = target;
        this.executorService = executorService;
    }

    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        try {
            Callable<Object> task = new ReflectiveMethodCallable(target, method, args);
            Future<Object> future = executorService.submit(task);
            return future.get();
        }
        catch(ExecutionException e1){
            try {
                throw e1.getCause();
            } catch(InvocationTargetException e2){
                throw e2.getCause();
            }
        }
    }
} 
```

`InvocationHandler`在创建新的`Proxy`时使用`createProxyFor`。该类的其余部分`Main`用于 SSCCE 示例：

```
public class Main {
    public static void main(String[] args) throws InterruptedException {
        ExecutorService executorService = Executors.newCachedThreadPool();

        // get B somehow
        A a = new B();

        // get proxy for B 
        A proxy = createProxyFor(a, executorService);

        // call proxy
        System.out.println("current thread: "+Thread.currentThread().getName());

        int resultA = proxy.a(1,2,3);
        System.out.println("calling a returned "+resultA);

        int resultB = proxy.b(1);
        System.out.println("calling b returned "+resultB);

    }

    static A createProxyFor(A a, ExecutorService executorService){
        InvocationHandler h = new MyInvocationHandler(a, executorService);
        A proxy = (A)Proxy.newProxyInstance(A.class.getClassLoader(), new Class[]{A.class}, h);
        return proxy;
    }
} 
```

输出：

```
current thread: main
called a in thread pool-1-thread-1
calling a returned 42
called b in thread pool-1-thread-1
calling b returned 21 
```

完成：

*   每个方法`A`都将在另一个线程中调用。
*   线程由线程池重用。
*   附加逻辑（例如时间测量、超时控制）可以在`invoke`或 中完成`call`。
*   无需为每种方法编写任何代码。

# apache - 是什么导致 504 网关超时在 mod_jk 与 tomcat7 和 apache2？

> ID：13207633
> 
> 赞同：2
> 
> 时间：2012-11-03T09:01:00.693
> 
> 标签：apache, tomcat, timeout, gateway, mod-jk

我在具有 2GB RAM、8GB 交换空间和 Intel Xeon CPU X3330 的 debian-lenny x64 服务器上运行带有 apache 2.2 和 mod_jk 1.2.26 的 tomcat 7。我有一个 GWT 应用程序，它使用连接池与后端 mysql 数据库进行交互。此应用程序必须处理许多请求，但每个请求需要一点时间来处理（假设 1 秒），然后它必须释放分配的资源以供其他请求使用。选择时并发客户端的数量可能会增加超过 200 个，但通常会少于 100
个。Apache 以 prefork-mpm 模式配置，具有以下配置：

```
<IfModule mpm_prefork_module>
    StartServers       8
    MinSpareServers    5
    MaxSpareServers   20
    MaxClients       256
    MaxRequestsPerChild  2000
</IfModule> 
```

& 这是我的 worker.properties 文件：

```
worker.worker1.type=ajp13
worker.worker1.host=localhost
worker.worker1.port=8009

worker.worker1.lbfactor=1
worker.worker1.connect_timeout=6000
worker.worker1.prepost_timeout=6000
worker.worker1.connection_pool_size=256
worker.worker1.connection_pool_minsize=64
worker.worker1.connection_pool_timeout=60
worker.worker1.reply_timeout=1000
worker.worker1.retries=5

worker.worker1.fail_on_status=-500

worker.worker1.cachesize=64
worker.worker1.cache_timeout=60 
```

& 这是 server.xml 中 tomcat 连接器的配置：

```
 <Connector port="8009" protocol="AJP/1.3" redirectPort="8443" URIEncoding="UTF-8"  connectionTimeout="60000" maxThreads="256" acceptorThreadCount="2" /> 
```

现在，问题是我的一些应用程序请求失败并出现 504 网关超时错误。我已经更改并测试了许多设置都在配置文件之上，但我无法获得稳定的状态。此外，在运行tomcat几个小时后，服务器上许多正在运行的应用程序崩溃，并出现与fork新进程和系统资源泄漏相关的错误（我在VPS上运行，但我确信我有足够的资源&甚至比我需要运行这样的应用程序还要多，所以我确定问题只是因为 apache、tomcat 和 mod_jk 的错误配置）。
任何想法？请为 mpm_prefork、mod_jk worker 属性和建议一个理想的配置
谢谢

# c++ - 无法弄清楚 int[3][3] 和 int(* const)[3] 之间的区别

> ID：13207638
> 
> 赞同：0
> 
> 时间：2012-11-03T09:01:15.707
> 
> 标签：c++, arrays, templates, pointers, g++

我有这个代码：

```
int board[3][3];        // I am ommiting initialization code for board here so as not to clutter it.
typedef std::vector<std::pair<int [3][3], int> > History;
History hist = History();
const std::pair<int[3][3], int> p = std::make_pair(board, cell);
hist.push_back(p); 
```

但是用 g++ 编译它给了我这个我无法理解的错误：

```
In file included from /usr/include/c++/4.7/bits/stl_algobase.h:65:0,
                 from /usr/include/c++/4.7/vector:61,
                 from performancesystem.h:29:
/usr/include/c++/4.7/bits/stl_pair.h: In instantiation of
    ‘std::pair<_T1, _T2>::pair(const std::pair<_U1, _U2>&) [with _U1 = 
    int (*)[3]; _U2 = int; _T1 = int [3][3]; _T2 = int]’:
Test.cpp:74:65:   required from here
/usr/include/c++/4.7/bits/stl_pair.h:111:39: error: incompatible types in
    assignment of ‘int (* const)[3]’ to ‘int [3][3]’ 
```

在理解 C++ 中指针和数组之间的区别时，我总是遇到这个问题。他们不应该是一样的吗？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T09:14:38.020

您的问题不是数组指针差异（很大）。

问题是数组不能在赋值中按值复制。将 C 数组包装在一个类中可以解决它，或者更好 - 使用标准数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T09:14:33.563

在某些情况下，数组可以转换为指针。从来没有任何转换是你正在尝试的其他方式。

要继续前进，您应该停止直接使用数组。它们在 C++ 中相当无用。我会写一个新的类（或结构，如果你愿意）

```
class Board
{
...
private:
   int sq[3][3];
};

typedef std::vector<std::pair<Board, int> > History; 
```

这样您将停止使用无用的数组，并且您不会对数组和指针产生混淆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T09:15:14.267

不能怪你，因为数组与指针的区别通常仅在动态大小的结构中*实现。*

数组 int a[3][4][5][6] 例如是从内存中线性分配的。它包含 3*4*5*6 个单位，其中 a[2][3][4][0] ... a[2][3][4][5] 在 6 个连续索引中，其中 a[ 0][1][n][5] 分别是 6 个元素，其中 a[1][n][3][6] 是每个 5*6 个元素，依此类推。

然而，指针提供了“间接”。多维数组可以通过 first_level 数组 a[3] 提供 3 个指向下一级数组 b[4]、c[4] 和 d[4] 的指针（间接）来实现，每个指针都提供到下一级的间接等。

在许多现实生活中的应用程序（例如指向字符串的指针表）中，人们真的看不出区别，因为语法隐藏了细节：

`int main(int ac, char **av) {`// 用 可以得到第三个字符串的第三个字符`av[2][2]`，即使原型可以用 表示`int main(int ac, char *av[]);`，但不能用表示，`int main(int ac, char av[][]);`因为表 av 的维度不可能从该语法中确定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T09:23:48.163

问题的根源在于 C 和 C++ 处理多维数组的方式。当`const`涉及时，问题会放大。

那`std::pair<int [3][3], int>`是一对值，其中第二个是 an `int`，第一个是指向 的数组的指针`int[3]`。出于多种原因，第一个元素是有问题的。一是它是一个指针。另一个是`const`对多维数组做了奇怪的事情。这就是你遇到的问题。

您想要的是一个 3x3 数组作为对象。所以——让它成为一个对象：

```
struct Board {
   int arr[3][3];
}; 
```

现在你的对变成`std::pair<Board,int>`，你的向量 a `std::vector<std::pair<Board, int> >`。您现在可以安全地从局部变量中构造`Board`,`int`对，因为 ,`Board`被复制了。您无法使用原始 C 多维数组安全地执行此操作，因为第一个元素将是一个指针。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-03T09:29:54.257

您`board`定义了一个**常量**指针。`int (* const)[3]`实际上与变量相同：`int[n][3]`只是一个指向 3 个整数数组的指针（尽管第一个是常量）！
你有三个选择：

*   将模板中的*T1*定义为`int (*const)[3]`
*   将 your 定义`board`为**动态**分配的数组。（与`int (*board)[3] = new int[3][3];`）
*   **危险：** const_cast<> 你`board`到一个非常量变量。（最好不要这样做：D）

LG ntor

PS：但是，我还建议为此编写一个类并重载 [] 运算符。更*先进的技术*;)

# ruby - 将错误上传到 appfog：“错误（JSON 404）：未找到”

> ID：13207645
> 
> 赞同：0
> 
> 时间：2012-11-03T09:02:27.717
> 
> 标签：ruby, json, http-status-code-404, appfog

我正在为我的 grails 应用程序使用 appfog 服务。我使用`af`了他们的 ruby​​ 实用程序几个星期，效果很好。今天我尝试像往常一样通过命令更新我的项目：

```
af update my_project 
```

但是收到一个错误：

```
Error (JSON 404): Not Found 
```

我不知道我弄坏了什么，但在另一台电脑上我做了同样的事情并且它可以工作。

如何解决？也许你知道我打破了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T10:02:21.290

遇到了同样的问题。

看来我已注销。不得不重新登录并正常工作。

```
af login
  > Email: ...
  > Password ...
af update my_poject 
```

砰! 工作！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T13:39:29.820

我的 Django 应用程序也发生了这种情况，因为我的本地副本是空的。

我可以修复它从 github 下载，一个用于 appfog 的空白 django 项目（也应该用于 grails）

[https://github.com/appfog](https://github.com/appfog)

所以我可以更新这些文件并再次运行命令：

```
af update my_project 
```

它奏效了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T19:01:32.497

这可能会帮助某人。我忘记了我将项目名称更改为其他名称，因此请确保您正在更新到实际存在的项目，如下所示：

```
sudo af update project 
```

还要确保您已登录：

```
sudo af login 
```

# web - 在哪里可以找到有关网站文件夹结构的文章？

> ID：13207648
> 
> 赞同：1
> 
> 时间：2012-11-03T09:02:46.317
> 
> 标签：web, n-tier-architecture, directory-structure

我正在创建一个包含多个项目的 n 层网站。我想在结构方面遵循最佳实践规则。

是否有任何与文件夹结构相关的文章，或者是否有人有他们自己使用的好模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:08:17.153

在 PHP 站点中，我通常有一个 .htaccess 文件，它将所有请求重定向到一个文件，然后处理路由。对于这个 MVC 设置，我会做这样的事情：

```
/web_root
  /public
    /css
    /js
    /images
    index.php
  /app
    /lib
    /models
    /routes
    /templates
    bootstrap.php 
```

然后，我将强制我的 apache 将`/web_root/public/`目录作为文档根目录服务，只允许用户访问我的“公共”文件……我的所有逻辑都将隐藏在其中`/web_root/app`以增加安全性。

# shell - 在 shell 脚本中将 int 转换为 hex

> ID：13207655
> 
> 赞同：1
> 
> 时间：2012-11-03T09:04:19.820
> 
> 标签：shell, unix, hex

我必须在 shell 脚本中使用不同的参数多次调用二进制文件。例如，我必须用参数调用二进制“set”：

设置 0x00 设置 0x01 设置 0x02 ... 设置 0x60

是否可以通过 shell 脚本中的循环来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T09:10:31.910

使用命令的`%x`格式进行`printf`转换，如`printf 0x%x num`. 要将转换后的值作为参数传递给另一个命令，请使用`$(...)`执行引号：

```
$ i=8
$ while [ $i -lt 16 ]; do
> echo $(printf 0x%x $i)
> i=$(expr $i + 1)
> done
0x8
0x9
0xa
0xb
0xc
0xd
0xe
0xf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T09:12:49.680

在您需要的任何循环中使用`printf "0x%X" $decimal`。

# java - Activemq 消息速率

> ID：13207660
> 
> 赞同：1
> 
> 时间：2012-11-03T09:05:01.767
> 
> 标签：java, performance, activemq

我将在一个项目中使用 activemq，并希望能够对应用程序进行压力测试。我可以通过哪种方式每秒发送 x 条消息，以便我可以考虑正常的消息传递周期，并查看它如何处理异常的消息传递速率？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T09:08:39.873

由于activeMQ是一种实时消息传递机制，所以每个人都应该知道它的性能
天气你使用的是队列或主题，我建议你**使用JMeter进行性能测试**。**[请点击此链接](http://activemq.apache.org/jmeter-performance-tests.html)**，您将了解有关**JMeter**及其性能测试的所有信息。
希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T09:08:20.447

您应该遵循 activemq[性能测试](http://activemq.apache.org/performance.html)页面中的建议之一。

# ios - iOS模拟器无法输入中文

> ID：13207662
> 
> 赞同：0
> 
> 时间：2012-11-03T09:05:18.663
> 
> 标签：ios, ios-simulator, user-input

我的 iOS 模拟器是`Version 6.0 (358.4)`. 我已经通过`Settings -> General -> Keyboard`. 并且国际语言也是简体中文。但是，我仍然无法在我的 iOS 模拟器中输入中文。它只显示英文字符而不是中文字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T03:19:25.227

我认为您必须通过单击屏幕左下方的“arch”图标来切换到模拟器上的中文输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-27T13:34:17.357

在模拟器中输入中文的条件是，设置中文区域，或者设置中文语言。否则无法获得中文输入法。

# ios - ios中的轮流导航，可以吗？

> ID：13207663
> 
> 赞同：3
> 
> 时间：2012-11-03T09:05:27.197
> 
> 标签：ios, location, mapkit

我的问题是我想为我的 ios 应用程序在地图上的两个位置之间轮流导航。我想使用可以帮助我的任何第三方 api 的 mapkit 在地图上显示导航箭头。请帮助我提前谢谢

![在此处输入图像描述](../Images/295be30ea2b724a06b5fae33c87d973f.png)

# android - 在android中通过sdcard使用现有数据库

> ID：13207666
> 
> 赞同：0
> 
> 时间：2012-11-03T09:05:35.713
> 
> 标签：android

我必须制作一个使用`Sqlite`数据库的应用程序。我的问题是资产文件夹的数据库大小太大，所以我必须把它放在 sdcard 中。我自己尝试过，但无法理解如何从中获取数据，因为无论我在以前的应用程序中使用资产文件夹成功实现的任何方法，它们都给出了类似的错误。

```
11-03 21:23:32.426: E/Database(13645): sqlite3_open_v2("/mnt/sdcard/myfolder/LeoTemplate.db", &handle, 1, NULL) failed 
```

我已经搜索了很多，所以如果有人可以建议我教程或任何其他仅关于 sdcard 的建议，那将是可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:36:09.437

首先，您必须创建扩展 SQLiteOpenHelper 的 databaseHelper 类，然后写下用于将数据库复制到 /data/data/package/databases 的代码，如下所示。

```
public class DataBaseHelper extends SQLiteOpenHelper{

    //The Android's default system path of your application database.
      private static String DB_PATH = "/data/data/com.project.examplepackage/databases/";
    private static String DB_NAME = "mydatabase.db";
    private SQLiteDatabase myDatabase; 
    private final Context myContext;

    /**
     * Constructor
     * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
     * @param context
     */
    public DataBaseHelper(Context context) {
        super(context, DB_NAME, null, 1);
        this.myContext = context;
    }

    /**
    * Creates a empty database on the system and rewrites it with your own database.
    * */
    public void createDataBase() throws IOException{
        boolean dbExist = checkDataBase();
        if(dbExist){
            //do nothing - database already exist
        }else{

            //By calling this method and empty database will be created into the default system path
               //of your application so we are gonna be able to overwrite that database with our database.
            this.getReadableDatabase();
            try {
                copyDataBase();
            } catch (IOException e) {
                throw new Error("Error copying database");
            }
        }
    }

    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
    */
    private boolean checkDataBase(){
        SQLiteDatabase checkDB = null;
        try{
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
        }catch(SQLiteException e){
            //database does't exist yet.
        }
        if(checkDB != null){
            checkDB.close();
        }
        return checkDB != null ? true : false;
    }
    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{
        //Open your local db as the input stream
        InputStream myInput = new FileInputStream(new File(database_path_to_sdcard));

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);
        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }
        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

        //Toast.makeText(myContext, "Copy Done", 300).show();
    } 
```

**After creating this class write down this code for copying database into Application's launcher Activity.**

```
 DataBaseHelper myDBH = new DataBaseHelper(this);
        myDBH = new DataBaseHelper(this);
        try {
            myDBH.createDataBase();
            myDBH.close();
        } 
        catch (IOException ioe) {
             throw new Error("Unable to create database");
        } 
```

**This way you can copy existing database from sdcard to your application 's database folder.**

# asp.net-mvc-4 - Web api 打开 oauth(DotNetOpenAuth) mvc 4

> ID：13207673
> 
> 赞同：5
> 
> 时间：2012-11-03T09:06:41.403
> 
> 标签：asp.net-mvc-4, oauth-2.0, dotnetopenauth

mvc 4 互联网应用程序模板有一个惊人的功能，可以轻松与 facebook twitter 和 google 集成。但是 web api 模板中没有这样的功能。如何轻松`DotNetOpenAuth`与 web api 集成？有教程吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T14:51:39.957

MVC 是一个面向浏览器的网站。WebAPI 用于由浏览器网页以外的某些客户端进行编程访问（尽管它可能是在浏览器中运行的 javascript）。因此，需要浏览器重定向的 OpenID 或 OAuth 登录流程对 WebAPI 没有意义。反正不是直接的。

*似乎*适用的是您希望您的 WebAPI 获得授权，并知道它们代表什么用户。常见的情况是 WebAPI 充当[OAuth 2 资源服务器](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-1.1)，接受由授权服务器颁发的访问令牌，该服务器接受 Facebook、Twitter 和 Google 以在生成这些访问令牌之前登录用户。

有几个 WebAPI 示例可以做到这一点。这是[一个](https://github.com/DavidChristiansen/DotNetOpenAuth.WebAPI.40)。

# mysql - 从 2 个表中获取数据（MySQL）

> ID：13207676
> 
> 赞同：0
> 
> 时间：2012-11-03T09:06:50.577
> 
> 标签：mysql

我有 2 个具有相同列的表，我需要从两个表中全部显示它们，但现在我得到每行中的所有列，例如。定位器每行 2 次，它必须从正确的表中仅显示 1 次。

```
SELECT a.*, b.* FROM  clothes a, items b group by a.locator,b.locator 
```

我该怎么做呢？

我将让它从两个带有行的表中输出。“名称”、“定位器”、“价格”和 WHERE “ibutik” = 1。

带有测试行的衣服表：

```
 CREATE TABLE IF NOT EXISTS `clothes` (
   `id` int(11) NOT NULL AUTO_INCREMENT,
   `locator` varchar(48) DEFAULT NULL,
   `name` varchar(32) DEFAULT NULL,
     `price` int(11) DEFAULT '100',
    `level` smallint(6) DEFAULT '0',
     `type` smallint(6) DEFAULT NULL,
     `sex` smallint(4) DEFAULT NULL,
     `x_offset` smallint(6) DEFAULT '0',
     `y_offset` smallint(6) DEFAULT '0',
     `nontradeable` tinyint(4) DEFAULT '0',
     `ibutik` int(1) NOT NULL,
     `koebt` int(9) NOT NULL,
     PRIMARY KEY (`id`)
   ) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=55 ;

 INSERT INTO `clothes` (`id`, `locator`, `name`, `price`, `level`, `type`, `sex`, `x_offset`, `y_offset`, `nontradeable`, `ibutik`, `koebt`) VALUES
   (1, '1.png', 'Male body', 100, 1, 2, 1, 0, 0, 0, 0, 0),
   (3, '1.png', 'Female body\r\n', 100, 1, 1, 2, 0, 0, 0, 0, 0)) 
```

和项目：

```
CREATE TABLE IF NOT EXISTS `items` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
  `locator` varchar(32) DEFAULT '',
  `name` varchar(32) DEFAULT '',
  `price` int(11) DEFAULT '100',
  `level` smallint(6) DEFAULT '0',
  `rotateable` tinyint(4) DEFAULT '0',
  `x_offset` smallint(6) DEFAULT '0',
  `y_offset` smallint(6) DEFAULT '0',
  `z_index` smallint(6) DEFAULT '0',
  `nontradeable` tinyint(4) DEFAULT '0',
  `ibutik` int(1) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=20 ;

INSERT INTO `items` (`id`, `locator`, `name`, `price`, `level`, `rotateable`, `x_offset`, `y_offset`, `z_index`, `nontradeable`, `ibutik`) VALUES
(1, 'rodplante.png', 'Rød plante', 10, 0, 0, 0, 0, 0, 0, 1),
(2, '1.png', 'Gul plante', 0, 0, 0, 0, 0, 0, 0, 0),
(3, '2.png', 'Gul plante', 0, 0, 0, 0, 0, 0, 0, 0), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:22:10.453

在可以尝试类似的东西：

```
select id,locator,name,price, tableName from 
(
  select a.id as id, a.locator as locator, a.name as name, 
     a.price as price, a.ibutik as ibutik, 'closes' as tableName 
    from  clothes a
  union all
  select b.id,b.locator,b.name,b.price,b.ibutik,'items' from items b 
) foo
where ibutik=0; 
```

用[sqlFiddle](http://www.sqlfiddle.com/#!2/86650/8)验证。

# knockout.js - knockout.js 中的自定义油门扩展器

> ID：13207677
> 
> 赞同：0
> 
> 时间：2012-11-03T09:07:11.993
> 
> 标签：knockout.js, throttling, extender, computed-observable

我有一个绑定到某些输入的 observable，有时它的值变化太快，以至于最终用户没有时间阅读它。所以我想限制输入变化的速度。

但这不是一个节流阀，因为节流阀是一个瓶颈，节流的 observable 在变化的同时根本没有变化。我想要一个自定义油门，以便立即应用第一个更改，然后它可能仅在延迟后更改（当然，每次延迟后它都会显示 CURRENT 值）。

到目前为止，我已经编写了自定义的 restrictSpeedChange 扩展程序。这是：http: [//jsfiddle.net/kasheftin/Pn9r8/4/](http://jsfiddle.net/kasheftin/Pn9r8/4/)。它实际上适用于通常的 observables。

```
ko.extenders.restrictChangeSpeed = function(target,timeout) {
    var writeTimeoutInstance = null;
    var currentValue = target();
    var updateValueAgain = false;
    return ko.dependentObservable({
        read: target,
        write: function(value) {
            var updateValue = function(value) {
                target(value);
                if (!writeTimeoutInstance) {
                    writeTimeoutInstance = setTimeout(function() {
                        writeTimeoutInstance = null;
                        if (updateValueAgain) {
                            updateValueAgain = false;
                            updateValue(currentValue);
                        }
                    },timeout);
                }
            }
            currentValue = value;
            if (!writeTimeoutInstance)
                updateValue(currentValue);
            else
                updateValueAgain = true;
        }
    });
} 
```

问题是我希望它也可以与计算的 observables 一起使用。对他们来说，throttle extender 有throttleEvaluation 变量，这个变量在dependentObservable.js evaluatePossiblyAsync 方法中使用。但我不想更改核心淘汰文件中的任何内容。

在我的示例[http://jsfiddle.net/kasheftin/Pn9r8/4/](http://jsfiddle.net/kasheftin/Pn9r8/4/)中，通常的可观察变量是 restrictChangeSpeedVar1 并且它按预期工作。计算变量是restrictChangeSpeedComputedVar1。我应该怎么做才能让它像第一个一样工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T18:14:56.240

快速思考一下您现有的代码：

在您的扩展器中，您可以查看是否正在处理不可写的计算 observable，然后返回一个已通过扩展器并订阅了计算的 observable。

```
ko.extenders.restrictChangeSpeed = function(target, timeout) {
    var writeTimeoutInstance = null;
    var currentValue = target();
    var updateValueAgain = false;
    var interceptor;

    if (ko.isComputed(target) && !ko.isWriteableObservable(target)) {
        interceptor = ko.observable().extend({ restrictChangeSpeed: timeout });
        target.subscribe(interceptor);
        return interceptor;
    }
.... 
```

关键是你需要一些东西来完成你的“写”逻辑。使用普通计算，它只会重新评估其“读取”逻辑并更新，而不会通过您的“写入”代码。

这是一个示例：http: [//jsfiddle.net/rniemeyer/GPbrR/](http://jsfiddle.net/rniemeyer/GPbrR/)

此外，您的小提琴中有一个错字：

```
self.restrictChangeSpeedComputedVar1 = ko.computed(this.var1).extend({restictChangeSpeed:1000}); 
```

您拼错了您的扩展程序名称（`restict`而不是`restrict`），这让我在测试我添加的更改时摸不着头脑，直到我注意到它。

关于我的更改的唯一有趣的事情是，现在有人可能会写入您的计算，但是每当底层计算发生更改时它总是会更新，我不明白您为什么会故意尝试写入它。

# python - 从终端检测脚本中键盘输入的最简单方法是什么？

> ID：13207678
> 
> 赞同：74
> 
> 时间：2012-11-03T09:07:36.503
> 
> 标签：python, keyboard, terminal

我有一个简单的 python 脚本，它有一些循环运行的函数（我正在读取传感器读数）。

```
while True:
    print "Doing a function" 
```

如果按下键盘，我想打印“按下键”。

在 Python 中执行此操作的最简单方法是什么？我搜索了高低。我已经知道如何用 pygame 来做，但我宁愿不做。如果我必须使用 pygame，是否可以没有单独的应用程序窗口？：

```
import pygame, time
from pygame.locals import *

pygame.init()
screen = pygame.display.set_mode((640, 480))
pygame.display.set_caption('Pygame Keyboard Test')
pygame.mouse.set_visible(0)

while True:

   print "doing a function"

    for event in pygame.event.get():
      if (event.type == KEYUP) or (event.type == KEYDOWN):
         print "key pressed"
         time.sleep(0.1) 
```

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2015-07-31T01:47:49.293

# 编辑：

我已经对这个问题进行了很多思考，并且可能需要一些不同的行为。我一直在为 Unix 和 Windows 实现它们中的大多数，一旦它们完成就会在这里发布。

### 同步/阻塞键捕获：

1.  一个简单的`input`or `raw_input`，一个阻塞函数，一旦用户按下换行符，它就会返回用户输入的文本。
2.  一个简单的阻塞函数，等待用户按下单个键，然后返回该键

### 异步密钥捕获：

1.  每当用户在命令提示符中键入键时，即使在解释器（键盘记录器）中键入内容时，也会使用按下的键调用回调
2.  用户按下回车后使用键入的文本调用的回调（不太实时的键盘记录器）
3.  程序运行时按下按键调用的回调（例如，在 for 循环或 while 循环中）

### 轮询：

1.  用户只是希望能够在按下某个键时执行某些操作，而不必等待该键（因此这应该是非阻塞的）。因此，他们调用 poll() 函数，该函数要么返回一个键，要么返回 None。这可能是有损的（如果他们在轮询之间花费太长时间，他们可能会错过一个键）或非有损的（轮询器将存储所有按下的键的历史记录，因此当 poll() 函数请求它们时，它们将始终被返回按按下的顺序）。

2.  与 1 相同，只是 poll 仅在用户按下换行符后返回一些内容。

### 机器人：

这些是可以调用以编程方式触发键盘事件的东西。这可以与关键捕获一起使用，以将它们回显给用户

# 实现

### 同步/阻塞键捕获：

一个简单的`input`or `raw_input`，一个阻塞函数，一旦用户按下换行符，它就会返回用户输入的文本。

```
typedString = raw_input() 
```

一个简单的阻塞函数，等待用户按下单个键，然后返回该键

```
class _Getch:
    """Gets a single character from standard input.  Does not echo to the
screen. From http://code.activestate.com/recipes/134892/"""
    def __init__(self):
        try:
            self.impl = _GetchWindows()
        except ImportError:
            try:
                self.impl = _GetchMacCarbon()
            except(AttributeError, ImportError):
                self.impl = _GetchUnix()

    def __call__(self): return self.impl()

class _GetchUnix:
    def __init__(self):
        import tty, sys, termios # import termios now or else you'll get the Unix version on the Mac

    def __call__(self):
        import sys, tty, termios
        fd = sys.stdin.fileno()
        old_settings = termios.tcgetattr(fd)
        try:
            tty.setraw(sys.stdin.fileno())
            ch = sys.stdin.read(1)
        finally:
            termios.tcsetattr(fd, termios.TCSADRAIN, old_settings)
        return ch

class _GetchWindows:
    def __init__(self):
        import msvcrt

    def __call__(self):
        import msvcrt
        return msvcrt.getch()

class _GetchMacCarbon:
    """
    A function which returns the current ASCII key that is down;
    if no ASCII key is down, the null string is returned.  The
    page http://www.mactech.com/macintosh-c/chap02-1.html was
    very helpful in figuring out how to do this.
    """
    def __init__(self):
        import Carbon
        Carbon.Evt #see if it has this (in Unix, it doesn't)

    def __call__(self):
        import Carbon
        if Carbon.Evt.EventAvail(0x0008)[0]==0: # 0x0008 is the keyDownMask
            return ''
        else:
            #
            # The event contains the following info:
            # (what,msg,when,where,mod)=Carbon.Evt.GetNextEvent(0x0008)[1]
            #
            # The message (msg) contains the ASCII char which is
            # extracted with the 0x000000FF charCodeMask; this
            # number is converted to an ASCII character with chr() and
            # returned
            #
            (what,msg,when,where,mod)=Carbon.Evt.GetNextEvent(0x0008)[1]
            return chr(msg & 0x000000FF)

def getKey():
    inkey = _Getch()
    import sys
    for i in xrange(sys.maxint):
        k=inkey()
        if k<>'':break

    return k 
```

### 异步密钥捕获：

每当用户在命令提示符中键入键时，即使在解释器（键盘记录器）中键入内容时，也会使用按下的键调用回调

**用户按下回车后使用键入的文本调用的回调（不太实时的键盘记录器）**

视窗：

这使用下面给出的 windows Robot，命名脚本 keyPress.py

```
# Some if this is from http://nullege.com/codes/show/src@e@i@einstein-HEAD@Python25Einstein@Lib@subprocess.py/380/win32api.GetStdHandle
# and
# http://nullege.com/codes/show/src@v@i@VistA-HEAD@Python@Pexpect@winpexpect.py/901/win32console.GetStdHandle.PeekConsoleInput

from ctypes import *
import time
import threading

from win32api import STD_INPUT_HANDLE, STD_OUTPUT_HANDLE

from win32console import GetStdHandle, KEY_EVENT, ENABLE_WINDOW_INPUT, ENABLE_MOUSE_INPUT, ENABLE_ECHO_INPUT, ENABLE_LINE_INPUT, ENABLE_PROCESSED_INPUT

import keyPress

class CaptureLines():
    def __init__(self):
        self.stopLock = threading.Lock()

        self.isCapturingInputLines = False

        self.inputLinesHookCallback = CFUNCTYPE(c_int)(self.inputLinesHook)
        self.pyosInputHookPointer = c_void_p.in_dll(pythonapi, "PyOS_InputHook")
        self.originalPyOsInputHookPointerValue = self.pyosInputHookPointer.value

        self.readHandle = GetStdHandle(STD_INPUT_HANDLE)
        self.readHandle.SetConsoleMode(ENABLE_LINE_INPUT|ENABLE_ECHO_INPUT|ENABLE_PROCESSED_INPUT)

    def inputLinesHook(self):

        self.readHandle.SetConsoleMode(ENABLE_LINE_INPUT|ENABLE_ECHO_INPUT|ENABLE_PROCESSED_INPUT)
        inputChars = self.readHandle.ReadConsole(10000000)
        self.readHandle.SetConsoleMode(ENABLE_LINE_INPUT|ENABLE_PROCESSED_INPUT)

        if inputChars == "\r\n":
            keyPress.KeyPress("\n")
            return 0

        inputChars = inputChars[:-2]

        inputChars += "\n"

        for c in inputChars:
            keyPress.KeyPress(c)

        self.inputCallback(inputChars)

        return 0

    def startCapture(self, inputCallback):
        self.stopLock.acquire()

        try:
            if self.isCapturingInputLines:
                raise Exception("Already capturing keystrokes")

            self.isCapturingInputLines = True
            self.inputCallback = inputCallback

            self.pyosInputHookPointer.value = cast(self.inputLinesHookCallback, c_void_p).value
        except Exception as e:
            self.stopLock.release()
            raise

        self.stopLock.release()

    def stopCapture(self):
        self.stopLock.acquire()

        try:
            if not self.isCapturingInputLines:
                raise Exception("Keystrokes already aren't being captured")

            self.readHandle.SetConsoleMode(ENABLE_LINE_INPUT|ENABLE_ECHO_INPUT|ENABLE_PROCESSED_INPUT)

            self.isCapturingInputLines = False
            self.pyosInputHookPointer.value = self.originalPyOsInputHookPointerValue

        except Exception as e:
            self.stopLock.release()
            raise

        self.stopLock.release() 
```

**程序运行时按下按键调用的回调（例如，在 for 循环或 while 循环中）**

视窗：

```
import threading
from win32api import STD_INPUT_HANDLE
from win32console import GetStdHandle, KEY_EVENT, ENABLE_ECHO_INPUT, ENABLE_LINE_INPUT, ENABLE_PROCESSED_INPUT

class KeyAsyncReader():
    def __init__(self):
        self.stopLock = threading.Lock()
        self.stopped = True
        self.capturedChars = ""

        self.readHandle = GetStdHandle(STD_INPUT_HANDLE)
        self.readHandle.SetConsoleMode(ENABLE_LINE_INPUT|ENABLE_ECHO_INPUT|ENABLE_PROCESSED_INPUT)

    def startReading(self, readCallback):
        self.stopLock.acquire()

        try:
            if not self.stopped:
                raise Exception("Capture is already going")

            self.stopped = False
            self.readCallback = readCallback

            backgroundCaptureThread = threading.Thread(target=self.backgroundThreadReading)
            backgroundCaptureThread.daemon = True
            backgroundCaptureThread.start()
        except:
            self.stopLock.release()
            raise

        self.stopLock.release()

    def backgroundThreadReading(self):
        curEventLength = 0
        curKeysLength = 0
        while True:
            eventsPeek = self.readHandle.PeekConsoleInput(10000)

            self.stopLock.acquire()
            if self.stopped:
                self.stopLock.release()
                return
            self.stopLock.release()

            if len(eventsPeek) == 0:
                continue

            if not len(eventsPeek) == curEventLength:
                if self.getCharsFromEvents(eventsPeek[curEventLength:]):
                    self.stopLock.acquire()
                    self.stopped = True
                    self.stopLock.release()
                    break

                curEventLength = len(eventsPeek)

    def getCharsFromEvents(self, eventsPeek):
        callbackReturnedTrue = False
        for curEvent in eventsPeek:
            if curEvent.EventType == KEY_EVENT:
                    if ord(curEvent.Char) == 0 or not curEvent.KeyDown:
                        pass
                    else:
                        curChar = str(curEvent.Char)
                        if self.readCallback(curChar) == True:
                            callbackReturnedTrue = True

        return callbackReturnedTrue

    def stopReading(self):
        self.stopLock.acquire()
        self.stopped = True
        self.stopLock.release() 
```

### 轮询：

**用户只是希望能够在按下某个键时执行某些操作，而不必等待该键（因此这应该是非阻塞的）。因此，他们调用 poll() 函数，该函数要么返回一个键，要么返回 None。这可能是有损的（如果他们在轮询之间花费太长时间，他们可能会错过一个键）或非有损的（轮询器将存储所有按下的键的历史记录，因此当 poll() 函数请求它们时，它们将始终被返回按按下的顺序）。**

Windows 和 OS X（可能还有 Linux）：

```
global isWindows

isWindows = False
try:
    from win32api import STD_INPUT_HANDLE
    from win32console import GetStdHandle, KEY_EVENT, ENABLE_ECHO_INPUT, ENABLE_LINE_INPUT, ENABLE_PROCESSED_INPUT
    isWindows = True
except ImportError as e:
    import sys
    import select
    import termios

class KeyPoller():
    def __enter__(self):
        global isWindows
        if isWindows:
            self.readHandle = GetStdHandle(STD_INPUT_HANDLE)
            self.readHandle.SetConsoleMode(ENABLE_LINE_INPUT|ENABLE_ECHO_INPUT|ENABLE_PROCESSED_INPUT)

            self.curEventLength = 0
            self.curKeysLength = 0

            self.capturedChars = []
        else:
            # Save the terminal settings
            self.fd = sys.stdin.fileno()
            self.new_term = termios.tcgetattr(self.fd)
            self.old_term = termios.tcgetattr(self.fd)

            # New terminal setting unbuffered
            self.new_term[3] = (self.new_term[3] & ~termios.ICANON & ~termios.ECHO)
            termios.tcsetattr(self.fd, termios.TCSAFLUSH, self.new_term)

        return self

    def __exit__(self, type, value, traceback):
        if isWindows:
            pass
        else:
            termios.tcsetattr(self.fd, termios.TCSAFLUSH, self.old_term)

    def poll(self):
        if isWindows:
            if not len(self.capturedChars) == 0:
                return self.capturedChars.pop(0)

            eventsPeek = self.readHandle.PeekConsoleInput(10000)

            if len(eventsPeek) == 0:
                return None

            if not len(eventsPeek) == self.curEventLength:
                for curEvent in eventsPeek[self.curEventLength:]:
                    if curEvent.EventType == KEY_EVENT:
                        if ord(curEvent.Char) == 0 or not curEvent.KeyDown:
                            pass
                        else:
                            curChar = str(curEvent.Char)
                            self.capturedChars.append(curChar)
                self.curEventLength = len(eventsPeek)

            if not len(self.capturedChars) == 0:
                return self.capturedChars.pop(0)
            else:
                return None
        else:
            dr,dw,de = select.select([sys.stdin], [], [], 0)
            if not dr == []:
                return sys.stdin.read(1)
            return None 
```

简单用例：

```
with KeyPoller() as keyPoller:
    while True:
        c = keyPoller.poll()
        if not c is None:
            if c == "c":
                break
            print c 
```

**与上面相同，只是 poll 仅在用户按下换行符时返回一些内容。**

### 机器人：

**这些是可以调用以编程方式触发键盘事件的东西。这可以与关键捕获一起使用，以将它们回显给用户**

视窗：

```
# Modified from http://stackoverflow.com/a/13615802/2924421

import ctypes
from ctypes import wintypes
import time

user32 = ctypes.WinDLL('user32', use_last_error=True)

INPUT_MOUSE    = 0
INPUT_KEYBOARD = 1
INPUT_HARDWARE = 2

KEYEVENTF_EXTENDEDKEY = 0x0001
KEYEVENTF_KEYUP       = 0x0002
KEYEVENTF_UNICODE     = 0x0004
KEYEVENTF_SCANCODE    = 0x0008

MAPVK_VK_TO_VSC = 0

# C struct definitions
wintypes.ULONG_PTR = wintypes.WPARAM

SendInput = ctypes.windll.user32.SendInput

PUL = ctypes.POINTER(ctypes.c_ulong)

class KEYBDINPUT(ctypes.Structure):
    _fields_ = (("wVk",         wintypes.WORD),
                ("wScan",       wintypes.WORD),
                ("dwFlags",     wintypes.DWORD),
                ("time",        wintypes.DWORD),
                ("dwExtraInfo", wintypes.ULONG_PTR))

class MOUSEINPUT(ctypes.Structure):
    _fields_ = (("dx",          wintypes.LONG),
                ("dy",          wintypes.LONG),
                ("mouseData",   wintypes.DWORD),
                ("dwFlags",     wintypes.DWORD),
                ("time",        wintypes.DWORD),
                ("dwExtraInfo", wintypes.ULONG_PTR))

class HARDWAREINPUT(ctypes.Structure):
    _fields_ = (("uMsg",    wintypes.DWORD),
                ("wParamL", wintypes.WORD),
                ("wParamH", wintypes.WORD))

class INPUT(ctypes.Structure):
    class _INPUT(ctypes.Union):
        _fields_ = (("ki", KEYBDINPUT),
                    ("mi", MOUSEINPUT),
                    ("hi", HARDWAREINPUT))
    _anonymous_ = ("_input",)
    _fields_ = (("type",   wintypes.DWORD),
                ("_input", _INPUT))

LPINPUT = ctypes.POINTER(INPUT)

def _check_count(result, func, args):
    if result == 0:
        raise ctypes.WinError(ctypes.get_last_error())
    return args

user32.SendInput.errcheck = _check_count
user32.SendInput.argtypes = (wintypes.UINT, # nInputs
                             LPINPUT,       # pInputs
                             ctypes.c_int)  # cbSize

def KeyDown(unicodeKey):
    key, unikey, uniflag = GetKeyCode(unicodeKey)
    x = INPUT( type=INPUT_KEYBOARD, ki= KEYBDINPUT( key, unikey, uniflag, 0))
    user32.SendInput(1, ctypes.byref(x), ctypes.sizeof(x))

def KeyUp(unicodeKey):
    key, unikey, uniflag = GetKeyCode(unicodeKey)
    extra = ctypes.c_ulong(0)
    x = INPUT( type=INPUT_KEYBOARD, ki= KEYBDINPUT( key, unikey, uniflag | KEYEVENTF_KEYUP, 0))
    user32.SendInput(1, ctypes.byref(x), ctypes.sizeof(x))

def KeyPress(unicodeKey):
    time.sleep(0.0001)
    KeyDown(unicodeKey)
    time.sleep(0.0001)
    KeyUp(unicodeKey)
    time.sleep(0.0001)

def GetKeyCode(unicodeKey):
    k = unicodeKey
    curKeyCode = 0
    if k == "up": curKeyCode = 0x26
    elif k == "down": curKeyCode = 0x28
    elif k == "left": curKeyCode = 0x25
    elif k == "right": curKeyCode = 0x27
    elif k == "home": curKeyCode = 0x24
    elif k == "end": curKeyCode = 0x23
    elif k == "insert": curKeyCode = 0x2D
    elif k == "pgup": curKeyCode = 0x21
    elif k == "pgdn": curKeyCode = 0x22
    elif k == "delete": curKeyCode = 0x2E
    elif k == "\n": curKeyCode = 0x0D

    if curKeyCode == 0:
        return 0, int(unicodeKey.encode("hex"), 16), KEYEVENTF_UNICODE
    else:
        return curKeyCode, 0, 0 
```

操作系统：

```
#!/usr/bin/env python

import time
from Quartz.CoreGraphics import CGEventCreateKeyboardEvent
from Quartz.CoreGraphics import CGEventPost

# Python releases things automatically, using CFRelease will result in a scary error
#from Quartz.CoreGraphics import CFRelease

from Quartz.CoreGraphics import kCGHIDEventTap

# From http://stackoverflow.com/questions/281133/controlling-the-mouse-from-python-in-os-x
# and from https://developer.apple.com/library/mac/documentation/Carbon/Reference/QuartzEventServicesRef/index.html#//apple_ref/c/func/CGEventCreateKeyboardEvent

def KeyDown(k):
    keyCode, shiftKey = toKeyCode(k)

    time.sleep(0.0001)

    if shiftKey:
        CGEventPost(kCGHIDEventTap, CGEventCreateKeyboardEvent(None, 0x38, True))
        time.sleep(0.0001)

    CGEventPost(kCGHIDEventTap, CGEventCreateKeyboardEvent(None, keyCode, True))
    time.sleep(0.0001)

    if shiftKey:
        CGEventPost(kCGHIDEventTap, CGEventCreateKeyboardEvent(None, 0x38, False))
        time.sleep(0.0001)

def KeyUp(k):
    keyCode, shiftKey = toKeyCode(k)

    time.sleep(0.0001)

    CGEventPost(kCGHIDEventTap, CGEventCreateKeyboardEvent(None, keyCode, False))
    time.sleep(0.0001)

def KeyPress(k):
    keyCode, shiftKey = toKeyCode(k)

    time.sleep(0.0001)

    if shiftKey:
        CGEventPost(kCGHIDEventTap, CGEventCreateKeyboardEvent(None, 0x38, True))
        time.sleep(0.0001)

    CGEventPost(kCGHIDEventTap, CGEventCreateKeyboardEvent(None, keyCode, True))
    time.sleep(0.0001)

    CGEventPost(kCGHIDEventTap, CGEventCreateKeyboardEvent(None, keyCode, False))
    time.sleep(0.0001)

    if shiftKey:
        CGEventPost(kCGHIDEventTap, CGEventCreateKeyboardEvent(None, 0x38, False))
        time.sleep(0.0001)

# From http://stackoverflow.com/questions/3202629/where-can-i-find-a-list-of-mac-virtual-key-codes

def toKeyCode(c):
    shiftKey = False
    # Letter
    if c.isalpha():
        if not c.islower():
            shiftKey = True
            c = c.lower()

    if c in shiftChars:
        shiftKey = True
        c = shiftChars[c]
    if c in keyCodeMap:
        keyCode = keyCodeMap[c]
    else:
        keyCode = ord(c)
    return keyCode, shiftKey

shiftChars = {
    '~': '`',
    '!': '1',
    '@': '2',
    '#': '3',
    '$': '4',
    '%': '5',
    '^': '6',
    '&': '7',
    '*': '8',
    '(': '9',
    ')': '0',
    '_': '-',
    '+': '=',
    '{': '[',
    '}': ']',
    '|': '\\',
    ':': ';',
    '"': '\'',
    '<': ',',
    '>': '.',
    '?': '/'
}

keyCodeMap = {
    'a'                 : 0x00,
    's'                 : 0x01,
    'd'                 : 0x02,
    'f'                 : 0x03,
    'h'                 : 0x04,
    'g'                 : 0x05,
    'z'                 : 0x06,
    'x'                 : 0x07,
    'c'                 : 0x08,
    'v'                 : 0x09,
    'b'                 : 0x0B,
    'q'                 : 0x0C,
    'w'                 : 0x0D,
    'e'                 : 0x0E,
    'r'                 : 0x0F,
    'y'                 : 0x10,
    't'                 : 0x11,
    '1'                 : 0x12,
    '2'                 : 0x13,
    '3'                 : 0x14,
    '4'                 : 0x15,
    '6'                 : 0x16,
    '5'                 : 0x17,
    '='                 : 0x18,
    '9'                 : 0x19,
    '7'                 : 0x1A,
    '-'                 : 0x1B,
    '8'                 : 0x1C,
    '0'                 : 0x1D,
    ']'                 : 0x1E,
    'o'                 : 0x1F,
    'u'                 : 0x20,
    '['                 : 0x21,
    'i'                 : 0x22,
    'p'                 : 0x23,
    'l'                 : 0x25,
    'j'                 : 0x26,
    '\''                : 0x27,
    'k'                 : 0x28,
    ';'                 : 0x29,
    '\\'                : 0x2A,
    ','                 : 0x2B,
    '/'                 : 0x2C,
    'n'                 : 0x2D,
    'm'                 : 0x2E,
    '.'                 : 0x2F,
    '`'                 : 0x32,
    'k.'                : 0x41,
    'k*'                : 0x43,
    'k+'                : 0x45,
    'kclear'            : 0x47,
    'k/'                : 0x4B,
    'k\n'               : 0x4C,
    'k-'                : 0x4E,
    'k='                : 0x51,
    'k0'                : 0x52,
    'k1'                : 0x53,
    'k2'                : 0x54,
    'k3'                : 0x55,
    'k4'                : 0x56,
    'k5'                : 0x57,
    'k6'                : 0x58,
    'k7'                : 0x59,
    'k8'                : 0x5B,
    'k9'                : 0x5C,

    # keycodes for keys that are independent of keyboard layout
    '\n'                : 0x24,
    '\t'                : 0x30,
    ' '                 : 0x31,
    'del'               : 0x33,
    'delete'            : 0x33,
    'esc'               : 0x35,
    'escape'            : 0x35,
    'cmd'               : 0x37,
    'command'           : 0x37,
    'shift'             : 0x38,
    'caps lock'         : 0x39,
    'option'            : 0x3A,
    'ctrl'              : 0x3B,
    'control'           : 0x3B,
    'right shift'       : 0x3C,
    'rshift'            : 0x3C,
    'right option'      : 0x3D,
    'roption'           : 0x3D,
    'right control'     : 0x3E,
    'rcontrol'          : 0x3E,
    'fun'               : 0x3F,
    'function'          : 0x3F,
    'f17'               : 0x40,
    'volume up'         : 0x48,
    'volume down'       : 0x49,
    'mute'              : 0x4A,
    'f18'               : 0x4F,
    'f19'               : 0x50,
    'f20'               : 0x5A,
    'f5'                : 0x60,
    'f6'                : 0x61,
    'f7'                : 0x62,
    'f3'                : 0x63,
    'f8'                : 0x64,
    'f9'                : 0x65,
    'f11'               : 0x67,
    'f13'               : 0x69,
    'f16'               : 0x6A,
    'f14'               : 0x6B,
    'f10'               : 0x6D,
    'f12'               : 0x6F,
    'f15'               : 0x71,
    'help'              : 0x72,
    'home'              : 0x73,
    'pgup'              : 0x74,
    'page up'           : 0x74,
    'forward delete'    : 0x75,
    'f4'                : 0x76,
    'end'               : 0x77,
    'f2'                : 0x78,
    'page down'         : 0x79,
    'pgdn'              : 0x79,
    'f1'                : 0x7A,
    'left'              : 0x7B,
    'right'             : 0x7C,
    'down'              : 0x7D,
    'up'                : 0x7E
} 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-11-03T09:13:53.203

[Python 文档](http://docs.python.org/faq/library#how-do-i-get-a-single-keypress-at-a-time)提供了这个片段来从键盘获取单个字符：

```
import termios, fcntl, sys, os
fd = sys.stdin.fileno()

oldterm = termios.tcgetattr(fd)
newattr = termios.tcgetattr(fd)
newattr[3] = newattr[3] & ~termios.ICANON & ~termios.ECHO
termios.tcsetattr(fd, termios.TCSANOW, newattr)

oldflags = fcntl.fcntl(fd, fcntl.F_GETFL)
fcntl.fcntl(fd, fcntl.F_SETFL, oldflags | os.O_NONBLOCK)

try:
    while 1:
        try:
            c = sys.stdin.read(1)
            if c:
                print("Got character", repr(c))
        except IOError: pass
finally:
    termios.tcsetattr(fd, termios.TCSAFLUSH, oldterm)
    fcntl.fcntl(fd, fcntl.F_SETFL, oldflags) 
```

你也可以使用[PyHook](http://sourceforge.net/apps/mediawiki/pyhook/index.php?title=PyHook_Tutorial)模块来完成你的工作。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2017-03-28T09:04:24.057

我发现的最简单的方法之一是使用 pynput 模块。[也可以在这里找到很好的例子](https://pypi.python.org/pypi/pynput)

```
from pynput import keyboard

def on_press(key):
    try:
        print('alphanumeric key {0} pressed'.format(
            key.char))
    except AttributeError:
        print('special key {0} pressed'.format(
            key))

def on_release(key):
    print('{0} released'.format(
        key))
    if key == keyboard.Key.esc:
        # Stop listener
        return False

# Collect events until released
with keyboard.Listener(
        on_press=on_press,
        on_release=on_release) as listener:
    listener.join() 
```

以上是为我制定并安装的示例，请
使用 python 2：

```
 pip install pynput 
```

对于蟒蛇 3：

```
 pip3 install pynput 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-11-03T09:25:15.980

如果您使用的是 Windows，则可以使用[http://docs.python.org/2/library/msvcrt.html中的方法。](http://docs.python.org/2/library/msvcrt.html)

```
import msvcrt
....
while True:
    print "Doing a function"
    if msvcrt.kbhit():
        print "Key pressed: %s" % msvcrt.getch() 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2017-11-09T08:44:53.567

这在 macOS Sierra 和 Python 2.7.10 和 3.6.3 上对我有用

```
import sys,tty,os,termios
def getkey():
    old_settings = termios.tcgetattr(sys.stdin)
    tty.setcbreak(sys.stdin.fileno())
    try:
        while True:
            b = os.read(sys.stdin.fileno(), 3).decode()
            if len(b) == 3:
                k = ord(b[2])
            else:
                k = ord(b)
            key_mapping = {
                127: 'backspace',
                10: 'return',
                32: 'space',
                9: 'tab',
                27: 'esc',
                65: 'up',
                66: 'down',
                67: 'right',
                68: 'left'
            }
            return key_mapping.get(k, chr(k))
    finally:
        termios.tcsetattr(sys.stdin, termios.TCSADRAIN, old_settings)
try:
    while True:
        k = getkey()
        if k == 'esc':
            quit()
        else:
            print(k)
except (KeyboardInterrupt, SystemExit):
    os.system('stty sane')
    print('stopping.') 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-03-21T19:57:22.787

基于上述内容，这些函数似乎适用于从键盘获取字符（阻塞和非阻塞）：

```
import termios, fcntl, sys, os

def get_char_keyboard():
  fd = sys.stdin.fileno()

  oldterm = termios.tcgetattr(fd)
  newattr = termios.tcgetattr(fd)
  newattr[3] = newattr[3] & ~termios.ICANON & ~termios.ECHO
  termios.tcsetattr(fd, termios.TCSANOW, newattr)

  c = None
  try:
    c = sys.stdin.read(1)
  except IOError: pass

  termios.tcsetattr(fd, termios.TCSAFLUSH, oldterm)

  return c

def get_char_keyboard_nonblock():
  fd = sys.stdin.fileno()

  oldterm = termios.tcgetattr(fd)
  newattr = termios.tcgetattr(fd)
  newattr[3] = newattr[3] & ~termios.ICANON & ~termios.ECHO
  termios.tcsetattr(fd, termios.TCSANOW, newattr)

  oldflags = fcntl.fcntl(fd, fcntl.F_GETFL)
  fcntl.fcntl(fd, fcntl.F_SETFL, oldflags | os.O_NONBLOCK)

  c = None

  try:
    c = sys.stdin.read(1)
  except IOError: pass

  termios.tcsetattr(fd, termios.TCSAFLUSH, oldterm)
  fcntl.fcntl(fd, fcntl.F_SETFL, oldflags)

  return c 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-10-03T08:18:03.240

受上面找到的代码（学分）的启发，我正在寻找的简单阻塞（也就是不消耗 CPU）macOS 版本：

```
import termios
import sys
import fcntl
import os

def getKeyCode(blocking = True):
    fd = sys.stdin.fileno()
    oldterm = termios.tcgetattr(fd)
    newattr = termios.tcgetattr(fd)
    newattr[3] = newattr[3] & ~termios.ICANON & ~termios.ECHO
    termios.tcsetattr(fd, termios.TCSANOW, newattr)
    if not blocking:
        oldflags = fcntl.fcntl(fd, fcntl.F_GETFL)
        fcntl.fcntl(fd, fcntl.F_SETFL, oldflags | os.O_NONBLOCK)
    try:
        return ord(sys.stdin.read(1))
    except IOError:
        return 0
    finally:
        termios.tcsetattr(fd, termios.TCSAFLUSH, oldterm)
        if not blocking:
            fcntl.fcntl(fd, fcntl.F_SETFL, oldflags)

def getKeyStroke():
    code  = getKeyCode()
    if code == 27:
        code2 = getKeyCode(blocking = False)
        if code2 == 0:
            return "esc"
        elif code2 == 91:
            code3 = getKeyCode(blocking = False)
            if code3 == 65:
                return "up"
            elif code3 == 66:
                return "down"
            elif code3 == 68:
                return "left"
            elif code3 == 67:
                return "right"
            else:
                return "esc?"
    elif code == 127:
        return "backspace"
    elif code == 9:
        return "tab"
    elif code == 10:
        return "return"
    elif code == 195 or code == 194:        
        code2 = getKeyCode(blocking = False)
        return chr(code)+chr(code2) # utf-8 char
    else:
        return chr(code)

while True:
    print getKeyStroke() 
```

**2017-11-09，已编辑**：未使用 Python 3 测试

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-02-23T05:40:59.020

我为@enrico.bacis 的回答编写了一个更易于使用的实现。它同时支持 Linux（python2.7 和 python3.5）和 Windows（python2.7）。它可能支持Mac OS，但我没有测试它。如果您在 Mac 上尝试过，请告诉我结果。

```
'''
Author: Yu Lou
Date: 2017-02-23

Based on the answer by @enrico.bacis in http://stackoverflow.com/a/13207724/4398908
and @Phylliida in http://stackoverflow.com/a/31736883/4398908
'''

# Import modules
try:
    try:
        import termios, fcntl, sys, os, curses # Import modules for Linux
    except ImportError:
        import msvcrt # Import module for Windows
except ImportError:
    raise Exception('This platform is not supported.')

class KeyGetterLinux:
    '''
    Implemented kbhit(), getch() and getchar() in Linux.

    Tested on Ubuntu 16.10(Linux 4.8.0), Python 2.7.12 and Python 3.5.2
    '''
    def __init__(self):
        self.buffer = '' # A buffer to store the character read by kbhit
        self.started = False # Whether initialization is complete

    def kbhit(self, echo = False):
        '''
        Return whether a key is hitten.
        '''
        if not self.buffer:
            if echo:
                self.buffer = self.getchar(block = False)
            else:
                self.buffer = self.getch(block = False)

        return bool(self.buffer)

    def getch(self, block = True):
        '''
        Return a single character without echo.
        If block is False and no input is currently available, return an empty string without waiting.
        '''
        try:
            curses.initscr()
            curses.noecho()
            return self.getchar(block)
        finally:
            curses.endwin()

    def getchar(self, block = True):
        '''
        Return a single character and echo.
        If block is False and no input is currently available, return an empty string without waiting.
        '''
        self._start()
        try:
            return self._getchar(block)
        finally:
            self._stop()

    def _getchar(self, block = True):
        '''
        Return a single character and echo.
        If block is False and no input is currently available, return a empty string without waiting.
        Should be called between self._start() and self._end()
        '''
        assert self.started, ('_getchar() is called before _start()')

        # Change the terminal setting
        if block:
            fcntl.fcntl(self.fd, fcntl.F_SETFL, self.old_flags & ~os.O_NONBLOCK)
        else:
            fcntl.fcntl(self.fd, fcntl.F_SETFL, self.old_flags | os.O_NONBLOCK)

        if self.buffer: # Use the character in buffer first
            result = self.buffer
            self.buffer = ''
        else:
            try:
                result = sys.stdin.read(1)
            except IOError: # In python 2.7, using read() when no input is available will result in IOError.
                return ''

        return result

    def _start(self):
        '''
        Initialize the terminal.
        '''
        assert not self.started, '_start() is called twice'

        self.fd = sys.stdin.fileno()

        self.old_attr = termios.tcgetattr(self.fd)

        new_attr = termios.tcgetattr(self.fd)
        new_attr[3] = new_attr[3] & ~termios.ICANON
        termios.tcsetattr(self.fd, termios.TCSANOW, new_attr)

        self.old_flags = fcntl.fcntl(self.fd, fcntl.F_GETFL)

        self.started = True

    def _stop(self):
        '''
        Restore the terminal.
        '''
        assert self.started, '_start() is not called'

        termios.tcsetattr(self.fd, termios.TCSAFLUSH, self.old_attr)
        fcntl.fcntl(self.fd, fcntl.F_SETFL, self.old_flags)

        self.started = False

    # Magic functions for context manager
    def __enter__(self):
        self._start()
        self.getchar = self._getchar # No need for self._start() now
        return self

    def __exit__(self, type, value, traceback):
        self._stop()
        return False

class KeyGetterWindows:
    '''
    kbhit() and getchar() in Windows.

    Tested on Windows 7 64 bit, Python 2.7.1
    '''
    def kbhit(self, echo):
        return msvcrt.kbhit()

    def getchar(self, block = True):
        if not block and not msvcrt.kbhit():
            return ''
        return msvcrt.getchar()

    def getch(self, block = True):
        if not block and not msvcrt.kbhit():
            return ''
        return msvcrt.getch()

    _getchar = getchar

    # Magic functions for context manager
    def __enter__(self):
        return self

    def __exit__(self, type, value, traceback):
        return False

try:
    import termios
    KeyGetter = KeyGetterLinux # Use KeyGetterLinux if termios exists
except ImportError:
    KeyGetter = KeyGetterWindows # Use KeyGetterWindows otherwise 
```

这是一个示例（假设您将上面的代码保存在 'key_getter.py' 中）：

```
from key_getter import KeyGetter
import time

def test1(): # Test with block=False
    print('test1')

    k = KeyGetter()
    try:
        while True:
            if k.kbhit():
                print('Got', repr(k.getch(False)))
                print('Got', repr(k.getch(False)))
            else:
                print('Nothing')

            time.sleep(0.5)
    except KeyboardInterrupt:
        pass
    print(input('Enter something:'))

def test2(): # Test context manager with block=True
    print('test2')

    with KeyGetter() as k:
        try:
            while True:
                if k.kbhit():
                    print('Got', repr(k.getchar(True)))
                    print('Got', repr(k.getchar(True)))
                else:
                    print('Nothing')

                time.sleep(0.5)
        except KeyboardInterrupt:
            pass
    print(input('Enter something:'))

test1()
test2() 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-19T11:14:58.803

好吧，自从这个问题发布之日起，一个 Python 库就解决了这个话题。来自 Moses Palmer 的 pynput 库非常适合以非常简单的方式捕获键盘和鼠标事件。

*   GitHub 存储库在这里：[https ://github.com/moses-palmer/pynput](https://github.com/moses-palmer/pynput)
*   PyPi 项目在那里：[在此处输入链接描述](https://pypi.org/project/pynput/)
*   并且 lib 的安装很容易：'pip install pynput'

（请注意 pynput 中缺少的 'i' - 我也错过了...... ;-) ）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-04-14T07:35:48.557

这需要以 root 身份运行：（警告，这是一个系统范围的键盘记录器）

```
#!/usr/bin/python3

import signal
import keyboard
import time
import os

if not os.geteuid() == 0:
  print("This script needs to be run as root.")
  exit()

def exitNice(signum, frame):
  global running 
  running = False

def keyEvent(e):
  global running
  if e.event_type == "up":
    print("Key up: " + str(e.name))
  if e.event_type == "down":
    print("Key down: " + str(e.name))
  if e.name == "q":
    exitNice("", "")
    print("Quitting")

running = True
signal.signal(signal.SIGINT, exitNice)
keyboard.hook(keyEvent)

print("Press 'q' to quit")
fps = 1/24
while running:
  time.sleep(fps) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-22T15:05:17.607

```
from time import sleep
import keyboard

flag = True

def main():
   global flag
   while flag:
        print('sleeping')
        sleep(2)

def changeFlag():
    global flag
    flag = False

keyboard.on_press_key("r", lambda _:changeFlag())

main() 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-06-05T18:20:26.337

```
import turtle

wn = turtle.Screen()
turtle = turtle.Turtle()

def printLetter():
    print("a")

turtle.listen()
turtle.onkey(printLetter, "a") 
```

# css - 浏览器是否从右到左读取 css 选择器？

> ID：13207683
> 
> 赞同：0
> 
> 时间：2012-11-03T09:08:10.807
> 
> 标签：css, performance, css-selectors

> **可能重复：**
> [为什么浏览器从右到左匹配 CSS 选择器？](https://stackoverflow.com/questions/5797014/why-do-browsers-match-css-selectors-from-right-to-left)

我听说浏览器从右到左读取 css 选择器。所以如果我们这样写；

```
#block1 a{text-decoration:none;} 
```

浏览器首先查找，所有标签然后查找 block1 并且性能下降一点。这是真的吗？

# android-camera - 使用 EXIF 或光标的图像方向始终为 0

> ID：13207687
> 
> 赞同：4
> 
> 时间：2012-11-03T09:08:25.813
> 
> 标签：android-camera, android-orientation, android-cursor

我正在从我的人像相机应用程序拍照并发送到服务器。在发送之前，我需要在必要时旋转图像。所以我将图像保存在 sdcard 中并尝试获取 Exif 或 Cursor。我经历了大部分与此相关的帖子。但对我没有任何作用。这是代码..

1.  **Exif接口**

    ```
     File imageFile = new File(uri.toString());
    ExifInterface exif = new ExifInterface(imageFile.getAbsolutePath());
    int orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION,   ExifInterface.ORIENTATION_NORMAL); 
    ```

    此处任何图像的方向始终为 0

2.  **光标**

    ```
    int orientation = 0;
    final String[] projection = new String[] { MediaStore.Images.Media.ORIENTATION };
    final Cursor cursor = getApplicationContext()
                    .getContentResolver().query(uri, projection, null,
                            null, null); 
    if (cursor != null) {
    final int orientationColumnIndex = cursor.getColumnIndex(MediaStore.Images.Media.ORIENTATION);
    if (cursor.moveToFirst()) {
       orientation = cursor.isNull(orientationColumnIndex) ? 0 : cursor.getInt(orientationColumnIndex);
     } 
    ```

    这里的图像旋转也是零。我怎样才能找到图像的确切旋转？任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-21T13:30:05.170

请开始使用支持库中的 ExifInterface。它提供了一个支持 InputStream 的构造函数。从 Uri 获取路径是错误的。你需要这个库：在你的 build.gradle 中编译 'com.android.support:exifinterface:25.3.1'。代码

```
private float getOrientation (InputStream image, Uri photoURI) {
    //ExifInterface myExif = new ExifInterface(photoURI.getPath());

    float photoRotation = 0;
    boolean hasRotation = true;

    try {
        ExifInterface exif = new ExifInterface(image);
        int exifRotation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION,
                ExifInterface.ORIENTATION_UNDEFINED);

        switch (exifRotation) {
            case ExifInterface.ORIENTATION_UNDEFINED: {
                hasRotation = false;
            }
            case ExifInterface.ORIENTATION_ROTATE_90: {
                photoRotation = 90.0f;
                break;
            }
            case ExifInterface.ORIENTATION_ROTATE_180: {
                photoRotation = 180.0f;
                break;
            }
            case ExifInterface.ORIENTATION_ROTATE_270: {
                photoRotation = 270.0f;
                break;
            }
        }
    } catch (IOException e) {
            Log.d("ODDREAMS", e.getMessage());
    }

    if (!hasRotation) {
        try {
                String[] columns = {MediaStore.Images.Media.DATA, MediaStore.Images.Media.ORIENTATION};
                Cursor cursor = getActivity().getContentResolver().query(photoURI, columns, null, null, null);

                if (cursor == null) return 0;

                if (cursor.moveToFirst()) {
                    int orientationColumnIndex = cursor.getColumnIndex(columns[1]);
                    photoRotation = cursor.getInt(orientationColumnIndex);
                    Log.d("ODDREAMS", "CURSOR " + photoRotation);
                }
                cursor.close();
        }
        catch (Exception e) {}

    }

    return photoRotation;
} 
```

# php - 如何在没有密码的情况下授权 MediaWiki 1.19 中的用户？

> ID：13207692
> 
> 赞同：3
> 
> 时间：2012-11-03T09:09:07.730
> 
> 标签：php, authorization, mediawiki, session-cookies

在我的插件中，我只有用户名或电子邮件，我必须授权该用户。我发现了下一个问题，但它对我不起作用：

```
 class ApiPlugin extends ApiBase {
        public function execute() {
            $params = $this->extractRequestParams();

            switch ( $params['do'] ) {
                case 'login':
                    // Registering. Works fine.
                    $user = User::newFromName( 'admin' );
                    $user->setEmail( admin@email.com );
                    $user->setRealName( 'admin' );
                    $uid = $user->idForName();

                    if ( $uid === 0 ) {
                        $user->addToDatabase();
                        $user->setPassword( generate_password() );
                        $user->saveSettings();
                    }
                    $ssu = new SiteStatsUpdate( 0, 0, 0, 0, 1 );
                    $ssu->doUpdate();

                    if ($user->isLoggedIn()) $user->doLogout();

                    //Logging in.
                    $id = User::idFromName('admin');
                    $user->setID($id);
                    $user->loadFromId();

                    $user->setToken();
                    $user->saveSettings();

                    wfSetupSession();
                    $user->setCookies();
                    break;
            }

        }
    } 
```

此外，另一个问题是直接从数据库获取密码哈希，但这是野蛮行为......
提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:44:25.557

几天后，我尝试分离代码和......利润！

```
class ApiPlugin extends ApiBase {
    public function execute() {
        $params = $this->extractRequestParams();

        switch ( $params['do'] ) {
            case 'register':
                // Registering. Works fine.
                $user = User::newFromName( 'admin' );
                $user->setEmail( admin@email.com );
                $user->setRealName( 'admin' );
                $uid = $user->idForName();

                if ( $uid === 0 ) {
                    $user->addToDatabase();
                    $user->setPassword( generate_password() );
                    $user->saveSettings();
                }
                $ssu = new SiteStatsUpdate( 0, 0, 0, 0, 1 );
                $ssu->doUpdate();
            case 'authorise':
                if ($user->isLoggedIn()) $user->doLogout();
                wfSetupSession();
                //Logging in.
                $id = User::idFromName('admin');
                $user->setID($id);
                $user->loadFromId();

                $user->setToken();
                $user->saveSettings();

                $user->setCookies();
                break;
        }

    }
} 
```

# ios - 如何获取 iOS 部署目标值？

> ID：13207694
> 
> 赞同：1
> 
> 时间：2012-11-03T09:09:13.733
> 
> 标签：ios, xcode, deployment

例如，`iOS Deployment Target`我的 Xcode 项目之一中的值为 iOS 4.3。如何从代码中读取该值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:13:32.403

我不确定这是否会返回部署（即最小）版本或构建 SDK 版本，但`<Availability.h>`头文件中有宏，您可以使用它们编写类似的东西

```
if (__IPHONE_OS_MIN_VERSION_REQUIRED == 4.3) {
    // Code available in iOS 4.3 or later only
} 
```

等等

# python - 如何从 Python 列表中删除方括号？

> ID：13207697
> 
> 赞同：49
> 
> 时间：2012-11-03T09:09:36.103
> 
> 标签：python, list, output

```
LIST = ['Python','problem','whatever']
print(LIST) 
```

当我运行这个程序时，我得到

```
[Python, problem, whatever] 
```

是否可以从输出中删除方括号？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-11-03T09:11:56.137

您可以将其转换为字符串，而不是直接打印列表：

```
print(", ".join(LIST)) 
```

如果列表中的元素不是字符串，您可以使用`repr`（如果您想要在字符串周围加上引号）或`str`（如果您不想要）将它们转换为字符串，如下所示：

```
LIST = [1, "foo", 3.5, { "hello": "bye" }]
print( ", ".join( repr(e) for e in LIST ) ) 
```

这给出了输出：

```
1, 'foo', 3.5, {'hello': 'bye'} 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-11-03T09:13:54.360

是的，有几种方法可以做到这一点。例如，您可以将列表转换为字符串，然后删除第一个和最后一个字符：

```
l = ['a', 2, 'c']
print str(l)[1:-1]
'a', 2, 'c' 
```

如果您的列表仅包含字符串并且您也想删除引号，那么您可以使用`join`已经说过的方法。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-11-03T09:24:10.213

如果列表中有数字，则可以用于`map`应用于`str`每个元素：

```
print ', '.join(map(str, LIST)) 
```

^`map`是 C 代码，所以它比`str(i) for i in LIST`

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2014-02-07T11:35:05.467

```
def listToStringWithoutBrackets(list1):
    return str(list1).replace('[','').replace(']','') 
```

# java - 将 AjaxEventBehavior 添加到表单的按钮可防止表单使用 Wicket 6.1 和 6.2 提交

> ID：13207701
> 
> 赞同：3
> 
> 时间：2012-11-03T09:10:23.460
> 
> 标签：java, ajax, wicket

我有一个简单的`FormPage`派生自`WebPage`这样定义的：

```
public FormPage() {

    final FeedbackPanel feedback = new FeedbackPanel("feedback");
    add(feedback);

    final TextField<String> entry = new TextField<String>("entry");

    final Button button = new Button("button");
    button.add(new AjaxEventBehavior("onclick") {
        @Override
        protected void onEvent(final AjaxRequestTarget target) {
            System.out.println("Event");
        }
    });

    Form<DataModel> form = new Form<User>("userForm", new CompoundPropertyModel<DataModel>(dataModel)) { 

        @Override
        protected void onValidate() {
            System.out.println("Validate");
            String entryValue = entry.getValue();
            if (entryValue == null || entryValue.length() == 0) {
                error("entry value required");
            }
        };

        @Override
        protected void onSubmit() {
            System.out.println("Submit");
            if (!hasErrors()) {
                String entryValue = entry.getValue();
                if (!entryValue.equals("value")) {
                    error("entry has wrong value");
                }
            }
        };
    };

    form.add(entry);
    form.add(button);
    add(form);
} 
```

我正在尝试在表单提交时做一些事情（在这个例子中只是打印到控制台），所以我附加`AjaxEventBehavior`了按钮的`onclick`事件。这完美地工作：在按钮单击时执行操作，但现在没有提交表单。

我也在试验

```
form.add(new AjaxEventBehavior("onsubmit") 
```

并且此事件处理程序还阻止表单提交。例如，

```
entry.add(new AjaxEventBehavior("onclick") 
```

允许提交表单，但事件与提交无关。现在我很困惑如何提交我的表单并对此事件执行一些操作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-04T12:38:10.963

默认情况下，在 Wicket 6 中，附加到组件的行为会阻止默认组件操作发生。

如果要同时触发行为和组件操作，则必须在行为中覆盖 updateAjaxRequestAttributes 方法：

```
@Override
protected void updateAjaxAttributes(AjaxRequestAttributes attributes) {
    super.updateAjaxAttributes(attributes);
    attributes.setAllowDefault(true);
} 
```

# python - 如何在 Django 模板中“忽略”NoReverseMatch？

> ID：13207710
> 
> 赞同：4
> 
> 时间：2012-11-03T09:11:20.353
> 
> 标签：python, django, django-templates

**有什么方法可以禁止从 Django 模板中`NoReverseMatch`的标签抛出异常`url`（只是让它静默失败，返回一个空字符串或 smth ......当然，为了开发，暂时）？**

（我正在做一个 Django 项目，就事情的组织而言，它有点乱（一群远程工作人员、承包商以及本地团队，有许多重叠的任务分配给不同的人，甚至是前端和后端-最终工作往往会作为同一任务的一部分混在一起......）*我真的需要忽略/隐藏/禁用`NoReverseMatch`模板标签抛出的`url`内容，以便有效地完成我的工作而不是最终做其他人为了能够做我的工作......*）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-03T13:50:28.677

另一种方法是 using `{% url ... as var %}`，它不会引发异常（[如文档中所述](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#url)），但也不会将 url 呈现为内联。

你需要替换这个：

```
<a href="{% url somepage %}"> 
```

有了这个：

```
{% url somepage as var %}
<a href="{{ var }}"> 
```

根据您必须使用的模板数量，这可能是也可能不是更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:45:17.393

最简单/最快的方法是更新 django 的`url`标签以静默失败。

`def url(parser, token):`您可以在in上更新函数定义`<your_django_path>/templatetags/future.py`以包含所有代码，`try ... except`并且在有任何异常时不引发异常。

但是，这是我能想到的最快的破解方法，我不确定是否有更好的解决方案。

# scala - scala集合函数不同的调用方式

> ID：13207711
> 
> 赞同：3
> 
> 时间：2012-11-03T09:11:27.757
> 
> 标签：scala

这编译

```
//legal
def s1 = List("aaa","bbb").collect { case x => x.split("\\w") } 
```

以下不要。

```
// all illegal

// missing parameter type for expanded function ((x$2) => x$2.split{<null>}("\\w"{<null>} {<null>}){<null>}
def s2 = List("aaa","bbb").collect ( _.split("\\w") )

// missing parameter type
def s3 = List("aaa","bbb").collect ( x => x.split("\\w") )

// type mismatch; found : String => Array[java.lang.String] required: PartialFunction[java.lang.String,?]
def s4 = List("aaa","bbb").collect ( (x:String) => x.split("\\w") ) 
```

虽然 scala 编译器正在尽最大努力与我沟通我的错误所在，但它就在我的脑海中。

这也编译的事实

```
def s2 = List("aaa","bbb").find ( _.split("\\w").length > 2 ) 
```

什么时候使用什么让事情变得更加混乱

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T09:23:41.480

第二部分不编译的原因是它`List#collect`作为`PartialFunction[A, B]`一个参数，因此可以指定要应用的函数和过滤元素，你可以应用这个函数。

例如：

> List(1, "a", 2, "3").collect {case x : Int => x + 1 }

将仅应用于整数元素并`List(2, 3)`返回`List[Int]`

在您的情况下，您可以使用`map`和`filter`功能来完成工作

`def s1 = List("aaa","bbb").map(_.split("\\w")).filter(_.length > 2)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T09:23:46.987

collect 需要一个部分函数（一系列 case 语句）：

```
list.collect {
  case a => ...
  case b => ...
  ...
} 
```

# asp.net - 如何显示 SaveFileDialog

> ID：13207716
> 
> 赞同：2
> 
> 时间：2012-11-03T09:12:06.420
> 
> 标签：asp.net

如何向`SaveFileDialog`用户显示可以选择保存文件的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:15:44.543

你不能在网页中做到这一点。

您必须执行“将文件另存为..”检查[链接](http://aspalliance.com/259)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:19:27.840

您无法`SaveFileDialog`在`ASP.net`代码中显示，因为它是在**服务器端**执行的。通常在这种情况下，将文件/图像以字节的形式刷新，用户会看到一个对话框来打开它或将其保存在他们的机器上。

# ruby-on-rails - ActiveModel::MassAssignmentSecurity::SchedulesController#create 中的错误

> ID：13207719
> 
> 赞同：0
> 
> 时间：2012-11-03T09:12:27.837
> 
> 标签：ruby-on-rails, activerecord, attr-accessor

我试图声明一些虚拟属性，这些属性将用于在给定日期时间的情况下将日期和时间组合在一起，尽管我不断收到以下错误。正如您从下面的代码示例中看到的那样，我如何设置属性，以及我传递给它们的信息。

```
ActiveModel::MassAssignmentSecurity::Error in SchedulesController#create

{"utf8"=>"✓",

"authenticity_token"=>"j4V6DAqK5U/+ZGaSKDlrEoOBqXu3pEq/FM51ingi2sg=",
 "schedule"=>{"event"=>"1",
 "result_id"=>"",
 "date"=>"04/11/2012",
 "arrival_time"=>"08:00 PM",
 "time"=>"08:00 PM",
 "duration"=>"1800",
 "location_id"=>"11",
 "selected_players"=>["",
 "41",
 "38"],
 "team_id"=>"1",
 "opponent_id"=>"1",
 "home_or_away"=>"Home"},
 "commit"=>"Save Event"} 
```

控制器

```
 # POST /schedules
  # POST /schedules.json
  def create
    params[:schedule].delete(:date)
    params[:schedule].delete(:time)
    @user = User.find(current_user)

    @players = User.where(:team_id => current_user[:team_id]).all
    params[:schedule][:selected_players].compact
    #params[:schedule][:selected_players].reject!{|selected_players| selected_players==""}
    #@availabilities = @user.availabilities.create(:unique_id => params[:schedule][:id])

    @schedule = Schedule.new(params[:schedule])

    respond_to do |format|
      if @schedule.save
        #Notifier.event_added(@user,@schedule).deliver
        format.html { redirect_to(schedules_url,
                                  :notice => "#{event_display_c(@schedule.event)} vs #{@schedule.opponent.name} was successfully created.") }
        format.json { render :json => @schedule, :status => :created, :location => @schedule }
      else
        format.html { render :action => "new" }
        format.json { render :json => @schedule.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

模型

```
class Schedule < ActiveRecord::Base
  belongs_to :location
  belongs_to :opponent
  belongs_to :team
  belongs_to :result
  has_many :availabilities, :dependent => :destroy

  attr_accessible :location_id, :user_id, :opponent_id, :datetime, :score_for, :score_against, :event,
                  :team_id, :home_or_away, :arrival_time, :duration, :selected_players, :result_id

  attr_accessor :date, :time 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:40:20.107

我相信您会收到 MassAssignmentSecurity 错误，因为您在实例化新计划时正在传递虚拟属性`time`并`date`进入`Schedule.new`，并且由于它们不在白名单属性列表中，Rails 假定它们是不应大量分配的属性。您应该在启动新计划之前删除它们`params`，然后（如果需要）直接设置相应的实例变量：

```
def create
  date = params[:schedule].delete(:date)
  time = params[:schedule].delete(:time)
  @schedule = Schedule.new(params[:schedule])
  @schedule.date = date
  @schedule.time = time
  ... 
```

如果您想在模型保存时设置，您应该创建一个回调`datetime`来执行此操作（也许您已经拥有）。`date``time``before_save`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:59:20.830

检查无法访问的参数。然后这样做：

```
date = params[:schedule]
@schedule = Schedule.new(params[:schedule]) do |schedule|
  schedule.date = date
  ...
end 
```

或者，您可以将批量分配规则设置为非严格：

```
config.active_record.mass_assignment_sanitizer = :logger 
```

而不是有这些例外，过滤的属性将被记录下来。那么你可以这样做：

```
@schedule = Schedule.new(params[:schedule]) do |schedule|
  schedule = params[:schedule][:date]
  ...
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T08:10:35.783

自己想出来的，最后只是在数据库中添加了字段

# c# - order by in lambda expressions

> ID：13207727
> 
> 赞同：0
> 
> 时间：2012-11-03T09:14:29.977
> 
> 标签：c#, linq, linq-to-objects, lambda

I'm trying to sort the data in lambda expression in the following case.

```
if (Directory.Exists(Server.MapPath(System.Configuration.ConfigurationManager.AppSettings["ErrorLogPath"].ToString())))
{
    string path = Server.MapPath(System.Configuration.ConfigurationManager.AppSettings["ErrorLogPath"].ToString());
    // a.Select(p => Path.GetFileNameWithoutExtension(p));
    var a = Directory.GetFiles(path);
    if (a != null)
    {
        Session["gvData"] = a.ToList();
        BindDataToGrid();
    }
} 
```

In `var` `a` i get list of complete path of files like

```
c:\\logfiles\\01022012.txt. 
```

How can I get `var` `a` sorted on basis of `01022012` I tried

```
var a = Directory.GetFiles(path).OrderBy(p=>Path.GetFileNameWithoutExtension(p)); 
```

but not working. Is there any thing am I doing wrong?

Getting result as

```
"C:\\LogFiles\\01112012.txt" 
"C:\\LogFiles\\08102012.txt" 
"C:\\LogFiles\\14092012.txt" 
"C:\\LogFiles\\15102012.txt" 
"C:\\LogFiles\\17102012.txt" 
"C:\\LogFiles\\19092012.txt" 
```

Expected is

```
"C:\\LogFiles\\14092012.txt" 
"C:\\LogFiles\\19092012.txt" 
"C:\\LogFiles\\08102012.txt" 
"C:\\LogFiles\\15102012.txt" 
"C:\\LogFiles\\17102012.txt" 
"C:\\LogFiles\\01112012.txt" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T10:10:03.593

```
var a = Directory.GetFiles(path)
                 .OrderBy(p => Regex.Replace(p,@"^.*\\(\d\d)(\d\d)(\d\d\d\d).*$","$3$2$1")) 
```

The order worked but was an alphabetical order, whereas you want a chronological order. The trick is to turn ddMMyyyy into yyyyMMdd (thanks to the regex) and then then alphabetical and chronological orders become identical.

# web-services - 从 Web 服务填充数据网格

> ID：13207733
> 
> 赞同：1
> 
> 时间：2012-11-03T09:14:59.713
> 
> 标签：web-services, silverlight, asynchronous, datagrid, .net-4.5

我正在尝试编写一个 Silverlight 应用程序（使用 Silverlight 5.1、.Net 4.5），我希望在其中拥有 3 个数据网格。

第一个数据网格显示症状列表，第二个数据网格应列出 datagrid1 中所选症状的子症状，第三个数据网格应显示一种可以治愈子症状的“盐”。数据网格应通过 WCF Web 服务接收它们的数据。第一个数据网格从表症状中获取所有数据，第二个数据网格仅从 web 服务获取 datagrid1 中所选症状的子症状，并且“盐”数据网格应仅从 web 服务接收与所选症状和子症状一起出现的盐。

只要我选择一个症状，就会出现子症状，只要我选择子症状，就会出现相应的盐。一切都很好。

我遇到的问题：当我选择一个子症状并在 Datagrid1 中再次选择一个症状时，所有数据网格都消失了。

这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.ServiceModel;
using Rebat.SymptomeService;

namespace Rebat
{
    public partial class MainPage : UserControl
    {
        ServiceClient client = new ServiceClient();

        public MainPage()
        {
           InitializeComponent();
           ServiceClient client = new ServiceClient();
           client.SymptomeListCompleted += new EventHandler<SymptomeListCompletedEventArgs>(client_SymptomeListCompleted);
           client.SymptomeListAsync();
        }

        void client_SymptomeListCompleted(object sender, SymptomeListCompletedEventArgs e)
        {
            SymptomeGrid.ItemsSource = e.Result;
        }
        void client_CustomerListCompleted(object sender, Symptome2ListCompletedEventArgs e)
        {
           Symptome2Grid.ItemsSource = e.Result;
        }
        void client_SalzListCompleted(object sender, SalzListCompletedEventArgs e)
        {
            SalzGrid.ItemsSource = e.Result;
        }

        private void SymptomeGrid_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            Symptome sympt = SymptomeGrid.SelectedItem as Symptome;
            client.Symptome2ListCompleted +=  new EventHandler<Symptome2ListCompletedEventArgs>(client_CustomerListCompleted);
            client.Symptome2ListAsync(sympt.sId.ToString());
        }

        private void Symptome2Grid_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            Symptome2 sympt2 = Symptome2Grid.SelectedItem as Symptome2;
            client.SalzListCompleted += new EventHandler<SalzListCompletedEventArgs>(client_SalzListCompleted);
            //if i remove the next line, datagrids don't dissapear anymore... so this might be the problem
            client.SalzListAsync(sympt2.sy1.ToString(), sympt2.sy2.ToString());
        }

    }
} 
```

这里是 .xaml 代码

```
<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk" x:Class="Rebat.MainPage"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot" Background="White" Margin="-13,0,-543,-335" RenderTransformOrigin="0.499,0.573">
        <Grid.RowDefinitions>
            <RowDefinition Height="0*"/>
            <RowDefinition Height="516*"/>
            <RowDefinition Height="119*"/>
        </Grid.RowDefinitions>

        <sdk:DataGrid x:Name="SymptomeGrid" Margin="20,10,0,0" HorizontalAlignment="Left" Width="249" Grid.RowSpan="2" SelectionChanged="SymptomeGrid_SelectionChanged" Height="227" VerticalAlignment="Top"/>
        <sdk:DataGrid x:Name="Symptome2Grid" HorizontalAlignment="Left" Height="227" Margin="293,10,0,0" VerticalAlignment="Top" Width="244" Grid.RowSpan="2" SelectionChanged="Symptome2Grid_SelectionChanged"/>
        <sdk:DataGrid x:Name="SalzGrid" HorizontalAlignment="Left" Height="227" Margin="20,275,0,0" Grid.Row="1" VerticalAlignment="Top" Width="401"/>

    </Grid>
</UserControl> 
```

这里是网络服务代码：

```
using System.ServiceModel;
using System.ServiceModel.Activation;
using System.Collections.Generic;
using System.Data;
using System.Data.SqlClient;
using System.Data.OleDb;

namespace Rebat.Web
{
    [ServiceContract(Namespace = "")]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class Service
    {
        [OperationContract]
        public List<Symptome> SymptomeList()
        {
           var custList = new List<Symptome>();
            using (OleDbConnection conn = new OleDbConnection(
               @"Provider=Microsoft.ACE.OLEDB.12.0; Data Source = C:\Users\simon\Documents\Visual Studio 2012\Projects\WpfApplication1\WpfApplication1\rebat.mdb"))
            {
                const string sql = @"SELECT Feld1, Feld2 FROM Symptome";
                conn.Open();
                using (OleDbCommand cmd = new OleDbCommand(sql, conn))
                {
                    OleDbDataReader dr = cmd.ExecuteReader(
                        CommandBehavior.CloseConnection);
                    if (dr != null)
                        while (dr.Read())
                        {
                            var cust = new Symptome
                            {
                                sId = dr.GetInt16(0),
                                symptom = dr.GetString(1)
                            };
                            custList.Add(cust);
                        }
                    return custList;
                }
            }
        }

        // Add more operations here and mark them with [OperationContract]
        [OperationContract]
        public List<Symptome2> Symptome2List(string s1)
        {
            var custList = new List<Symptome2>();
            using (OleDbConnection conn = new OleDbConnection(
               @"Provider=Microsoft.ACE.OLEDB.12.0; Data Source = C:\Users\simon\Documents\Visual Studio 2012\Projects\WpfApplication1\WpfApplication1\rebat.mdb"))
            {

                string sql = @"SELECT ID, sy1, sy2, symptom2 FROM Symptome2 where sy1="+s1;
                conn.Open();
                using (OleDbCommand cmd = new OleDbCommand(sql, conn))
                {
                    OleDbDataReader dr = cmd.ExecuteReader(
                        CommandBehavior.CloseConnection);
                    if (dr != null)
                        while (dr.Read())
                        {
                            var cust = new Symptome2
                            {
                                ID = dr.GetInt32(0),
                                sy1 = dr.GetInt16(1),
                                sy2 = dr.GetInt16(2),
                                symptom2 = dr.GetString(3)
                            };
                            custList.Add(cust);
                        }
                    return custList;
                }
            }
        }
         // Add more operations here and mark them with [OperationContract]
        [OperationContract]
        public List<Salz> SalzList(string sym1, string sym2)
        {
            var salzList = new List<Salz>();
            using (OleDbConnection conn = new OleDbConnection(
               @"Provider=Microsoft.ACE.OLEDB.12.0; Data Source = C:\Users\simon\Documents\Visual Studio 2012\Projects\WpfApplication1\WpfApplication1\rebat.mdb"))
            {

                string sql = @"SELECT sId, salz FROM Salze where sId in (SELECT saId from Rezept where sy1Id= " + sym1 + " and sy2Id=" +sym2 + ")";

                conn.Open();
                using (OleDbCommand cmd = new OleDbCommand(sql, conn))
                {
                    OleDbDataReader dr = cmd.ExecuteReader(
                        CommandBehavior.CloseConnection);
                    if (dr != null)
                        while (dr.Read())
                        {
                            var cust = new Salz
                            {
                                SID = dr.GetInt32(0),
                                Name = dr.GetString(1)
                            };
                            salzList.Add(cust);
                        }
                    return salzList;
                }
            }
        }
    }
} 
```

最后是帮助班

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace Rebat.Web
{
    public class Symptome
    {
        public int sId { get; set; }
        public string symptom { get; set; }
    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace Rebat.Web
{
    public class Symptome2
    {
        public int ID { get; set; }
        public int sy1 { get; set; }
        public int sy2 { get; set; }
        public string symptom2 { get; set; }
    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace Rebat.Web
{
    public class Salz
    {
        public int SID { get; set; }
        public string Name { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:38:15.990

这是完整的源代码，试试这个

**代码背后.cs：**

```
 private void SymptomeGrid_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        Symptome2Grid.ItemsSource = null;
        SalzGrid.ItemsSource = null;
        svcSymptom.Symptome sympt = SymptomeGrid.SelectedItem as svcSymptom.Symptome;
        if (sympt != null)
        {
            svcSymptom.Service1Client SymptomsClient = new svcSymptom.Service1Client();

                SymptomsClient.Symptome2ListCompleted += (a, ae) =>
                {
                    if (ae.Result.Count != 0)
                    {
                        Symptome2Grid.ItemsSource = ae.Result.ToList();
                    }
                };
                SymptomsClient.Symptome2ListAsync(sympt.symptom.ToString());

        }

    }

    private void Symptome2Grid_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        SalzGrid.ItemsSource = null;
        svcSymptom.Symptome2 sympt2 = Symptome2Grid.SelectedItem as svcSymptom.Symptome2;
        if (sympt2 != null)
        {
            svcSymptom.Service1Client SymptomsClient = new svcSymptom.Service1Client();
            SymptomsClient.SalzListCompleted += (a, ae) =>
               {
                   if (ae.Result.Count != 0)
                   {
                       SalzGrid.ItemsSource = ae.Result.ToList();
                   }
               };
            SymptomsClient.SalzListAsync(sympt2.sy1.ToString(), sympt2.sy2.ToString());

        }
    } 
```

# php - 使用 COVERT_TZ 函数、php、mysql 更改 YEARWEEK 的时区偏移量

> ID：13207734
> 
> 赞同：0
> 
> 时间：2012-11-03T09:15:05.547
> 
> 标签：php, mysql, datetime, timezone, convert-tz

好的，这就是我想要做的：

```
 $timezone1 = '+00:00';
 $timezone2 = '+08:00';

WHERE DATE(CONVERT_TZ(from_unixtime(comment_date), '$timezone1', '$timezone2')) =  DATE_SUB(CURRENT_DATE,INTERVAL 1 DAY)"; 
```

该行通过将输出转换为我正确的时区，为我提供了表格中昨天提交的总数。

**现在我想对本周**提交的总数做同样的事情：

```
 WHERE YEARWEEK(from_unixtime(comment_date), 1) =  YEARWEEK(CURRENT_DATE, 1)"; 
```

这给了我本周提交的总数，但时间偏移错误。如何让 $timezone1 和 $timezone2 进入这一行？我尝试了几种组合，但似乎没有任何效果，例如：

```
 WHERE (CONVERT_TZ(YEARWEEK(from_unixtime(comment_date), 1), '$timezone1', '$timezone2')) =  YEARWEEK(CURRENT_DATE, 1)"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:25:21.840

我不是 PHP 或 MySQL 开发人员，但听起来您*应该*只更改`DATE`原始代码`YEARWEEK`

```
WHERE YEARWEEK(CONVERT_TZ(from_unixtime(comment_date), '$timezone1', '$timezone2')) 
    =  YEARWEEK(CURRENT_DATE, 1)"; 
```

如果这不起作用，请提供有关它不起作用的*方式的更多信息。*

另请注意，您并没有真正提供时区 - 您提供的是偏移量。这意味着您的代码*将*根据夏令时给出不一致的结果。这可能是也可能不是问题，具体取决于您的要求。

# php - 默认将一个全局变量传递给一个类的所有方法

> ID：13207736
> 
> 赞同：1
> 
> 时间：2012-11-03T09:15:28.077
> 
> 标签：php, oop, mysqli

假设我创建了一个全局变量 global $db3; （$db3实际上是另一个类的实例化对象）。我不想把这个全局变量一个一个地传递给每个方法，而是想把这个变量默认传递给一个类的所有方法。

我的第一个数据库类是

```
class dtb{
public $connection;

public function __construct(){

    $this->connection=mysqli_connect('localhost','root','','new5');

     }

     }
 $db3=new dtb(); 
```

第二类是

```
 session_start();
  $a = new session($db3);

       class user{
         public $db;

          public function __construct($db)
    {
        $this->db = $db;

    }

function login(){
 //global $db3;

 //$db3->show_new();
   $results=mysqli_query($this->db->connection,"select * from user");  //(I want to use $db3 of another class here as resource link)

      }

   } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-03T09:21:36.467

强烈不建议使用全局变量。它会妨碍您的应用程序的可读性和可维护性，并可能导致您失去理智。

**[有关更多详细信息，请参阅此问题。](https://softwareengineering.stackexchange.com/questions/148108/why-is-global-state-so-evil)**

将变量传递给类的构造函数。所有其他方法都可以通过访问`$this->db`.

```
class A {

    private $db;

    public function __construct($db) {
        $this->db = $db;
    }

    public function someFunction() {
        $this->db->doSomething();
    }

    /*
     * Etc
     */
} 
```

然后，您继续通过以下方式调用它：

```
$db3 = new dtb;
$a = new A($db3);
$a->someFunction(); 
```

`someFunction()`将有权访问该`$db3`实例，因为它已传递给构造函数并保存为对象字段。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T16:08:41.097

您的代码示例中有一些与您在问题中要求的内容相关的问题，因此我想突出显示它们。

最明显的问题是您没有传递数据库连接对象。相反，您将其包装到类型`dtb`中，以便稍后在其他类型中展开，例如在您的`user`：

```
function login() {
   ...

   $results = mysqli_query($this->db->connection,"select * from user");
                                  ^--^--- unwrapping
   ... 
```

相反，`user`类型应该只有连接。它不需要知道`dtb`包装：

```
function login() {
   ...

   $results = mysqli_query($this->connection, "select * from user");
                                      ^--- one thing, not one thing and another
   ... 
```

除此之外，您没有使用`mysqli`扩展的 OO 接口。您的示例代码很好地证明了这*不必要地*使您的代码复杂化。让我们用 mysqli 的方式来做：

```
function login() {
   ...

   $results = $this->connection->query("select * from user");

   ... 
```

如您所见，您可以在不使用指定`mysqli_*`函数的情况下使用连接，而只需使用`query`对象的方法即可。

所以现在这行代码就很本地化了。该`$connection`对象需要进入`user`, 用于您迄今为止使用的非 OO 后台全局变量。但是在面向对象编程中，类的代码中不应该使用全局变量。那是因为程序代码中的全局变量是`$this`类中的变量。`$this`应该包含类中的方法所需的一切——如果没有提供方法参数。

所以你的多样化类是*基于*数据库连接的。你想在每个班级都有它。一个类在它的构造方法中被初始化。在那里，您将所有内容作为初始化类所需的参数传递。让我们以`user`示例类为例：

```
class User
{
    private $connection;

    public function __construct(Mysqli $connection) {
        $this->connection = $connection;
    }

    public function login() {
        $resultSet = $this->connection->query("SELECT * FROM user;");
    }
} 
```

正如你所看到的，`User`在它的构造方法中初始化`__construct`了`Mysqli`连接。然后可以使用该连接，`$this->connection`因为它已分配给该私有变量。

您现在可以放心，一旦类被实例化，连接将保持不变。如果您需要同时打开与另一个数据库的连接，这也很有用。无论您需要创建多少个 Mysqli 连接，您的代码都将继续工作。

所以现在来使用：

```
$connection = new Mysqli('localhost','root','','new5');

$user = new User($connection);

$user->login(); 
```

就是这样。当然，在创建 Mysqli 连接对象的位置和创建用户的位置之间可能存在一些代码，但您需要做的就是传递连接。

这不会停在这里，尽管我已经接近这里的博客文章。您可能想要做的甚至是消除每个类中连接细节的负担，而是从负责重复数据库交互代码的基类扩展，以便在更高级别的类中您可以更专注于数据库细节上的工作和更少。有很多不同的方法可以做到这一点。从基类扩展只是其中之一。一个非常简单的例子：

```
class Database
{
    private $connection;

    public function __construct(Mysqli $connection) {
        $this->connection = $connection;
    }

    protected function query($sql) {
        return $this->connection->query($sql);
    }
}

class User extends Database
{
    $resultSet = $this->query("SELECT * FROM user;");
} 
```

例如，如果您有一组公共类，只是其属性名称不同，则公共基类可以包含实现该目标的代码，而从它扩展的类只需要为此指定参数。

但正如所写，有许多不同的方式将类映射到数据库连接。有时您根本不想映射它们。做最适合你的事情，玩一点。如果您始终在构造函数中进行初始化并阻止使用全局变量（以及也是全局变量的静态类变量），那么您将保持灵活性并且实际上可以玩得更好。

请记住：每个人都在用水做饭，这背后没有魔法。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-03T09:23:29.297

在构造函数中将其设置为类变量

```
Class a{

  public __construct( $db ){
    $this->db = $db;
  }

  function b(){
    $this->db->query();
  }
} 
```

# javascript - 对正则表达式的误解

> ID：13207738
> 
> 赞同：1
> 
> 时间：2012-11-03T09:15:37.167
> 
> 标签：javascript, regex

我有一个例子：

```
var p =  /^(\d)+$/;
var s = '834736';
var a = p.exec(s);
console.log(a); 
```

我想对第一个数字进行分组`^(\d)`，但结果是：

```
["834736", "6"] 
```

它抓住最后一个数字。谁能给我解释一下？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T09:17:32.560

如果您只想捕获第一个数字，请将第一个数字放入组中，然后匹配组外的其余数字，如下所示：

```
/^(\d)\d*$/ 
```

你只抓住最后一个数字的原因是，你对匹配的每个数字重复相同的组。这意味着，每次匹配一个新数字时，该组的旧内容都会被替换，因此您将获得最后一个数字作为您的组的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T09:16:43.950

你应该把`+`里面的组或（如果你只想要第一个数字）拆分表达式：

```
/^(\d)\d*$/ 
```

# javascript - 使用 Jquery 输出 HTML 内容

> ID：13207741
> 
> 赞同：0
> 
> 时间：2012-11-03T09:15:49.053
> 
> 标签：javascript, jquery

作为搜索结果，我想在网页上显示一条消息。下面是我的 JS 代码。我在 HTML 中将 DIV 保留为空。调用该函数后，浏览器中没有显示任何内容。我是新手，请纠正我做错的地方。

```
 function test() {
    var v = "<p  class=""noresults""> <img src=""icons/oops-icon_small.jpg"" alt=""OOPS!"" >    id=""img_align"" /> we did not find" + "any results relating to your search. </p>" + "<span >    class=""noreult_home""> <a href=""#""><img src=""icons/home_icon.jpg"" alt=""Home""/>       </a> ></span>";

    $("div#con").html(v);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T09:22:47.540

我改进了你的 javscript 功能

```
function test() {
    var v= "<p class='noresults'><img src='icons/oops-icon_small.jpg' alt='OOPS!' id='img_align'/>we did not find any results relating to your search.</p><span class='noreult_home'><a href='#'><img src='icons/home_icon.jpg' alt='Home'/></a></span>";
    $("div#con").html(v);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:20:30.833

试试这种方式：

```
function test() { 
  $('<img />').attr('id', 'img_align').append('div#con');
  $('<p></p>').addClass('noresult_home').html('we did not find any results relating to your search.').append('div#con');
} 
```

# performance - 并行与串行的效率和加速

> ID：13207743
> 
> 赞同：5
> 
> 时间：2012-11-03T09:16:29.360
> 
> 标签：performance, parallel-processing, processing-efficiency

目前，我正在阅读我的教授在课堂上分发的指南。学习指南不是作业，只是了解考试的内容。我已经完成了除了 1 个问题之外的所有问题，并希望有人可以帮助我。

这是问题：假设 Tserial = n 和 Tparallel = n/p + log2(p)，其中时间以毫秒为单位，p 是进程数。如果我们将 p 增加 k 倍，找到一个公式，说明我们需要增加多少 n 才能保持恒定的效率。如果我们将进程数从 8 个增加到 16 个，我们应该将 n 增加多少？并行程序是否可扩展？

任何帮助理解这一点将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-03T16:28:10.850

评论和第一个答案都可以帮助您解决恒定的并行计算时间，但这与解决恒定效率的问题略有不同。

如上所述，并行效率由您使用多个处理器的效率来定义。100% 的效率意味着您从使用 p 个处理器中获得了 p 倍的加速；所以效率是根据每个处理器的加速来定义的：

![在此处输入图像描述](../Images/7dc962ba50579d826be90057a3124e51.png)

因此，如果您将处理器数量增加 k 倍，问题大小增加 k 倍，那么现在您要考虑恒定的效率。

让我们首先在没有涉及 log(p) 的“并行开销”术语的情况下执行此操作：

![在此处输入图像描述](../Images/14cc103385329e225c80faff893c5f5d.png)

例如，效率始终为 1，因此当您改变处理器数量时，您无需对问题大小做任何事情。

但是因为存在一些开销，为了保持恒定的效率，您需要在扩大规模时解决更大的问题。使用间接费用项，您会得到 ![在此处输入图像描述](../Images/4910078ebf291f40e2e1f5b90f986161.png)

让我们看看这里的渐近线——如果你已经在无限数量的处理器上，你的效率已经为零（因为每个处理器的工作量为零，但开销无限），所以你可以保持问题大小不变；效率将保持不变。另一方面，您永远无法将问题规模扩大到足以重新获得 p=1 时的并行效率；那是 100%，由于开销，您所做的任何事情都必然会少于此。

另请注意，您必须增加问题大小的数量总是至少比您增加处理器数量的因素多一点。

在您正在查看的特定情况下，p=8，k=2，您需要将问题大小增加 2+2/3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T11:44:02.547

希望这项工作是正确的。

例如，如果 Tserial = 10ms，在理想世界（效率为 100%）如果你用 2 个进程进行并行处理，Tparallel（理想）是 10ms/2 = 5ms

不幸的是，任何并行处理都会产生处理开销来管理分布在处理器之间的工作。

在这种情况下，管理开销所用时间的公式是 log2(p)。因此，如果您有 2 个处理器并且 Tserial = 10ms，则 Tparallel 变为 5ms + log2(2) = 6ms

使用上面的例子，让我们假设“恒定效率”意味着如果我们将 p 增加 k 倍，我们需要增加多少 Tserial 即 n 以使 Tparallel 仍然是 6ms

让 a = 增加 n 的因子

n/p + log2(p) = na/pk + log2(pk)

n/p + log2(p) = na/pk + log2(p) + log2(k)

n/p = na/pk + log2(k)

nk - na = pk log2(k)

ka = (pk log2(k)) / n

a = k - [(pk log2(k)) / n]

如果 p =8 且 k = 2

a = 2 - [(16 log2(2)) / n] a = 2 - (16/n)

在这种情况下，并行程序是可扩展的，因为如果处理器数量增加一倍，它几乎可以处理两倍的工作量。提供 n >> 16

# c++ - C++如何对数组变量进行排序

> ID：13207744
> 
> 赞同：-4
> 
> 时间：2012-11-03T09:16:41.923
> 
> 标签：c++

我接到了家长班的电话

```
Shape 
```

形状得到了 2 个孩子的电话

```
Square and Rectangle 
```

Shape类有一个变量调用区，它是int类型

所以我像这样创建了一些正方形，矩形的对象

```
int main()
{
    Shape *shaped[100];

    //then i did some adding of object..
    int areaValue;
    areaValue=1;

    shaped[0] = new Rectangle();
    shaped[0]->setArea(areaValue);

    areaValue=7;
    shaped[1] = new Square();
    shaped[1]->setArea(areaValue);

    areaValue=5;
    shaped[2] = new Square();
    shaped[2]->setArea(areaValue);

    shapeCounter = 3;

    sort(shaped[0],shaped[2]);

    for (int i=0;i<shapeCounter;i++)
    {
        cout << shaped[i].getArea() << endl;
    }

} 
```

我尝试按升序排序，但它不起作用。没有位置变化，区域仍然是相同的顺序。

感谢大家的帮助！

更新：

我在 Shape.cpp 做了以下更改

```
 bool Shape::orderByArea(const Shape* lhs, const shape* rhs)
    {
      return lhs->area() < rhs->area();
    } 
```

然后在 main.cpp 我做了这个

```
std::sort(shaped, shaped + 3, orderByArea); 
```

但是我得到一个错误，orderByArea 没有在这个范围内声明。

**我尝试的另一件事是：** 使用向量进行排序

在 Shape.h

```
public:

bool operator<const Shape& x) const
{
return area < x.area;
} 
```

在 main.cpp

```
vector<ShapeTwoD*> sortVector;
sortVector.clear();
sortVector.assign(shaped,shaped + shapeCounter);

sort(sortVector.begin(),sortVector.end());

for(int i=0;i<shapeCounter;i++)
{
cout << sortVector[i].toDisplay() << endl;
} 
```

但似乎没有任何问题。我试着做一个打印输出它的位置是一样的。

**更新：现在已修复。排序正在工作。感谢专家！**

我还有一个问题是

形状 *shape[100];

我如何复制的值

```
Shape *shaped[100]; 
```

进入

```
vector<Shape> myVector; 
```

代替

```
vector<Shape*> myVector; 
```

所以我可以使用普通的对象排序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T09:20:49.333

在您的代码中，您如何期望编译器知道您想按区域排序，魔术？我建议阅读有关标准 C++ 库（又名 STL）的书，它将解释如何进行自定义排序。在您的代码中，您有一个*指针*数组，因此您应该编写一个可以对指针进行排序的*仿函数*。您的 std::sort 参数也是错误的。您的数组开始于`shaped`，结束于`shaped + 3`（因为您的数组中有三个元素）。

```
struct sort_by_area
{
    static bool operator()(Shape* x, Shape* y)
    {
        return x->getArea() < y->getArea();
    }
};

sort(shaped, shaped + 3, sort_by_area()); 
```

未经测试的代码，为任何错误道歉。

或者您可以使用 juanchopanza 所说的函数指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T09:22:12.450

`shapes`假设你有一个充满`Shape*`, 并且`Shape`有一个方法的数组`int getArea() const;`，你需要定义一个小于比较逻辑，然后告诉`std::sort`使用它。您可以通过定义这种小于函数来实现前者：

```
inline bool orderByArea(const Shape* lhs, const shape* rhs)
{
  return lhs->getArea() < rhs->getArea();
} 
```

然后调用`std::sort`，传递一个指向函数的指针：

```
#include <algorithm>

Shape* shapes[3] = ....; // array of three pointers to Shape
std::sort(shapes, shapes + 3, orderByArea); 
```

# mysql - SQL中limit和offset是如何执行的？

> ID：13207746
> 
> 赞同：2
> 
> 时间：2012-11-03T09:16:42.990
> 
> 标签：mysql, sql, select, limit, where

我想知道在选择行后是否执行限制和偏移：

```
SELECT * FROM users WHERE id > 4 LIMIT 0,90 ORDER BY datetime DESC; 
```

此查询是先选择所有用户的行然后应用`LIMIT`，还是先应用`LIMIT`然后选择用户的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T09:20:41.537

子句首先在`FROM`查询中执行，然后是`WHERE`子句。之后应用该`LIMIT`条款。

因此，以下是您发布的查询的逻辑查询处理步骤：

*   `FROM`子句返回所有用户。
*   `WHERE`条款适用。只有具有的用户`id > 4`才能进入下一步。
*   然后`LIMIT`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T09:42:25.697

所以你问的问题在这里不太有意义。

您真正应该问的是，“MySQL 是否必须在查询中找到与 WHERE 子句匹配的所有行，或者它是否可以应用 LIMIT 并且最多只需要读取 N 行？”

这里有两种可能的情况，还有一件需要考虑的额外事情，以及您的原始查询存在问题。

1.  如果你使用 LIMIT，你应该使用 ORDER BY。MySQL 没有“自然”顺序，这意味着您从该查询中实际返回的行是不确定的。这是一件坏事。

所以现在你使用 ORDER BY 有两种可能性。

1.  MySQL 可以使用索引来满足 ORDER BY 子句。在这种情况下，它可以按索引顺序扫描表以查找匹配项，直到满足 LIMIT 为止，然后它将在那里停止读取。这是有效的。

2.  MySQL*不能*使用索引。然后它必须在应用 LIMIT 之前找到所有可能的匹配项并对整个结果集进行排序。如果有很多行，这通常会很慢。

另外要考虑的是，当您使用带限制的偏移量时，mysql 必须读取所有行直到起始位置，然后才能返回结果。当偏移值非常大时，这会变得非常慢。

这个关于 MySQL 中高效分页的幻灯片解释了很多： [http ://www.scribd.com/doc/14683263/Efficient-Pagination-Using-MySQL](http://www.scribd.com/doc/14683263/Efficient-Pagination-Using-MySQL)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T09:22:58.613

**选择查询**

```
SELECT * FROM users WHERE id > 4 LIMIT 0,90; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T09:23:32.230

来自[http://dev.mysql.com/doc/refman/5.0/en/limit-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/limit-optimization.html)

如果将 LIMIT row_count 与 ORDER BY 一起使用，MySQL 会在找到排序结果的第一个 row_count 行后立即结束排序，而不是对整个结果进行排序。如果使用索引进行排序，则速度非常快。如果必须进行文件排序，则必须选择与不带 LIMIT 子句的查询匹配的所有行，并且必须对其中的大部分或全部进行排序，然后才能确定已找到第一个 row_count 行。在任何一种情况下，在找到初始行之后，都不需要对结果集的任何剩余部分进行排序，MySQL 也不会这样做。

**[主要参考链接](https://stackoverflow.com/questions/6736483/how-does-limit-parameter-work-in-sql)**

# python - 即使我已将其添加到 settings.py 中，也没有名为“myapp”的模型

> ID：13207747
> 
> 赞同：2
> 
> 时间：2012-11-03T09:16:44.370
> 
> 标签：python, django

我收到以下错误：

```
ImportError at /
No module named midi_app
Request Method: GET
Request URL:    http://127.0.0.1:8000/
Django Version: 1.4.1
Exception Type: ImportError
Exception Value:    No module named midi_app
Exception Location: /Users/home/virtualenv/venv/lib/python2.7/site-packages/django/utils/importlib.py in import_module, line 35
Python Executable:  /Users/home/virtualenv/venv/bin/python 
```

我已将我的应用程序“midi_app”添加到`INSTALLED_APPS`settings.py 的部分。我不确定为什么会看到此错误。virtualenv 与它有什么关系吗？

谢谢。

更新：我已经添加了尽可能多的目录，但我仍然看到这个错误。请在下面查看我的路径。请帮忙，我真的很沮丧。

> '/Users/home/virtualenv/venv/lib/python27.zip',
> 
> '/Users/home/virtualenv/venv/lib/python2.7',
> 
> '/Users/home/virtualenv/venv/lib/python2.7/plat-darwin',
> 
> '/Users/home/virtualenv/venv/lib/python2.7/plat-mac',
> 
> '/Users/home/virtualenv/venv/lib/python2.7/plat-mac/lib-scriptpackages',
> 
> '/Users/home/virtualenv/venv/lib/python2.7/lib-tk',
> 
> '/Users/home/virtualenv/venv/lib/python2.7/lib-old',
> 
> '/Users/home/virtualenv/venv/lib/python2.7/lib-dynload',
> 
> '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
> 
> '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',
> 
> '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',
> 
> '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',
> 
> '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',
> 
> '/Users/home/virtualenv/venv/lib/python2.7/site-packages',
> 
> '/Users/home/Desktop/Web Development/Django-1.4',
> 
> '/Users/home/virtualenv/venv',
> 
> '/Users/home/Desktop/Web Development/Aptana Studio 3.0',
> 
> '/Users/home/virtualenv/venv/bin',
> 
> '/Users/home/桌面/Web 开发',
> 
> '/Users/home/virtualenv',
> 
> '/Users/home/virtualenv/venv/lib/python2.7/site-packages/PIL',
> 
> '/Users/home/virtualenv/venv/lib/python27.zip',
> 
> '/Users/home/virtualenv/venv/lib/python2.7/plat-darwin',
> 
> '/Users/home/virtualenv/venv/lib/python2.7/plat-mac',
> 
> '/Users/home/virtualenv/venv/lib/python2.7/plat-mac/lib-scriptpackages',
> 
> '/Users/home/virtualenv/venv/lib/python2.7/lib-tk',
> 
> '/Users/home/virtualenv/venv/lib/python2.7/lib-old'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:06:24.860

原来我的网址是错误的。

我将其指定为

```
url(r'^$', 'musicproject.midi_app.views.index'), 
```

代替

```
 url(r'^$', 'midi_app.views.index'), 
```

感谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T02:11:55.980

另一件需要注意的事情，你必须有一个：

```
__init__.py 
```

文件（空的很好，只需使用“touch **init** .py”）在通向您的应用程序的每个目录中位于 python 路径中。

因此，如果您有这样的结构：

```
my_project/
    manage.py
    __init__.py
    urls.py
    settings.py
    apps/
        __init__.py <---- this has to be here
        midi_app/
            __init__.py <--- this also has to be here
            models.py
            admin.py
            views.py
            urls.py 
```

这很容易被忽视。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T09:32:35.033

不，virtualenv 与此错误无关。`ImportError`这意味着它无法在您指定的位置找到您的应用程序，请重新检查应用程序的路径和您提供的路径以及名称。

# vb.net - 如何在 VB.NET 的 Web 浏览器控件中检测回发事件？

> ID：13207748
> 
> 赞同：2
> 
> 时间：2012-11-03T09:17:15.390
> 
> 标签：vb.net, browser, postback, detect

实际上我在 Java 或 C# 中找到了一些示例，我需要简单的方法来检测回发事件。

我想依次向网站发送许多请求并将所有响应写入列表框或其他内容。

[网站：](http://itsportal.saglik.gov.tr/its_os/index.php)

**用户名：86800010865280016**

**密码：马尔喀布尔**

**示例请求字符串（KAREKOD：表单上的第三个文本框！！！）**

```
0108697930090038212747294171305311002531

0108697930090038212747286171305311002531

0108697930090038212792028171305311002532

0108697930090038212883023171305311002533

0108697930090038212883047171305311002533 
```

登录网站后，我设置了请求字符串；

```
DirectCast(GetWebBroForm1.item("f_karekod"), mshtml.HTMLTextAreaElement).value = CurrentQR 
```

并点击提交按钮；

```
DirectCast(GetWebBroForm1.item("Getir", 0), mshtml.HTMLButtonElement).click() 
```

一切都好。

**现在的问题是我必须检测回发事件，解析回发信息，然后需要依次发送另一个请求。**

多谢。

```
Private Function GetWebBroDoc1() As mshtml.HTMLDocument
    Return DirectCast(WebBro1.Document.DomDocument, mshtml.HTMLDocument)
End Function

Private Function GetWebBroForm1() As mshtml.HTMLFormElement
    If GetWebBroDoc1.forms.length > 0 Then
        Return DirectCast(GetWebBroDoc1.forms.item(0), mshtml.HTMLFormElement)
    Else
        Return Nothing
    End If
End Function       

Private Sub SendQR(ByVal CurrentQR)
    CurrentQR="0108697930090038212747294171305311002531" 'request string
    DirectCast(GetWebBroForm1.item("f_karekod"), mshtml.HTMLTextAreaElement).value = CurrentQR
    Return
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:53:35.117

也许这可以帮助你：

```
If IsPostBack Then
'Do something
Else
'Do something else
End If 
```

# xamarin.ios - 通过testflight将monotouch开发的应用程序部署到ios6但在ios5上没问题

> ID：13207751
> 
> 赞同：1
> 
> 时间：2012-11-03T09:17:40.187
> 
> 标签：xamarin.ios, ios6, testflight

当我使用 testflight 部署我的 iphone 应用程序时，它们在 ios5 上运行良好，但在 ios 6 上运行良好

他们“似乎”安装正常，但最终显示“失败消息，请重试”

我正在使用最新版本的 xcode 4.5 并持续使用 monotouch

在 ios6 模拟器上工作正常，当我将我的 mac 直接连接到 ios6 设备时

我在 testflight 构建/权限配置中看不到任何明显的 ios6 特定内容

任何想法都非常受欢迎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T21:30:51.823

这听起来就像一个配置文件问题。

这个新的 iOS 6 设备设置在配置文件上吗？当我过去从 TestFlight 看到这个错误时，这通常是问题。

# python - 在 Windows XP 下运行 Python 脚本（模块）

> ID：13207753
> 
> 赞同：0
> 
> 时间：2012-11-03T09:18:01.637
> 
> 标签：python, configuration, installation, windows-xp

问题在于在 Windows XP 下运行 Python 脚本（模块）。

昨天我为 Windows 安装了 Python 3.3.0 版本。问题**是我可以使用**命令行和 IDLE 来计算（它在输出中没有错误），但是如果我尝试简单的***打印“Hello”。***，在命令提示符下输出，在 GUI IDLE 中显示：

```
Syntax error: invalid syntax 
```

路径变量设置为默认目录“C:\Python33\”，我可以再次使用它进行计算，但是从在线资源中运行示例或那些简单的东西目前对我来说是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:18:57.857

你需要`print("hello")`在 python 3.x中使用类似的东西

`print`已在 python 3.x 中转换为函数。

读这个:`[打印是一个函数](http://docs.python.org/3.0/whatsnew/3.0.html#print-is-a-function)

```
Python 3.1.2 (release31-maint, Dec  9 2011, 20:50:50) 
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> print 3
  File "<stdin>", line 1
    print 3
          ^
SyntaxError: invalid syntax

>>> print(3)                  # works fine
3 
```

# java - 用于稀疏矩阵的 UJMP Java 库

> ID：13207762
> 
> 赞同：1
> 
> 时间：2012-11-03T09:19:02.690
> 
> 标签：java, matrix, sparse-matrix, ujmp

我已将 UJMP（通用 Java 矩阵包）库下载并包含到我的项目中，用于生成稀疏矩阵。但我找不到任何关于库函数、如何创建稀疏矩阵、向矩阵添加元素等的文档。有没有人对此有经验或有关于库的文档？感谢你所做的一切。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T07:40:52.453

有一个支持稀疏矩阵和向量的[la4j 库](http://la4j.org/)。按照官方网站上给出的示例进行操作。la4j 支持稀疏矩阵的[CRS（压缩行存储）](http://netlib.org/linalg/html_templates/node91.html)和[CCS（压缩列存储）](http://netlib.org/linalg/html_templates/node92.html)。更重要的是，由于易于使用的可组合迭代器，它实际上利用了计算中稀疏数据的优势。例如，在现代笔记本电脑上，将两个形状为 10k x 10k 的稀疏矩阵与仅 1% 的非零值相乘将需要几微秒。

这是示例：

```
Matrix a = CRSMatrix.random(10000, 10000, 0.25 /* density */, new Random());
Matrix b = CCSMatrix.random(10000, 10000, 0.25 /* density */, new Random());
Matrix c = a.multiply(b); 
```

la4j 正在积极开发中。当前版本[0.5.0](https://github.com/vkostyukov/la4j/releases/tag/0.5.0)已于 2015 年 1 月发布。

# c# - 尝试创建 UserControl 实例时，出现 NullPointerException

> ID：13207766
> 
> 赞同：0
> 
> 时间：2012-11-03T09:19:44.547
> 
> 标签：c#, wpf, visual-studio-2010, visual-studio-2008, user-controls

当我尝试使用`UserControl`同一解决方案中的 a 时，我正在`NullPointerException`排队`InitializeComponent()`。

我`MainWindow.xaml.cs`要添加的文件`UserControl`：

```
ViewStudentUc viewStudentUc = new ViewStudentUc();
viewStudentGrid.Children.Add(viewStudentUc); 
```

我`ViewStudentUc.xaml`遇到异常的文件：

```
public ViewStudentUc()
{
    InitializeComponent();   //Where I'm getting NullPointerException.
} 
```

为什么我会收到此异常以及如何删除它？

这是调用堆栈。

```
SNS School Management.exe!SNS_School_Management.ViewStudentUc.ViewStudentUc() Line 25   C#
SNS School Management.exe!SNS_School_Management.MainWindow.viewStudent_button_Click(object sender, System.Windows.RoutedEventArgs e) Line 39 + 0x15 bytes   C#
[External Code] 
```

# android - 在我的 android 应用程序中显示 youtube 视频缩略图

> ID：13207771
> 
> 赞同：2
> 
> 时间：2012-11-03T09:20:29.600
> 
> 标签：android, youtube

在我的应用程序中，我正在尝试播放一些 youtube 视频。因此，在主屏幕中，我的视频将显示在列表视图中。我需要视频的缩略图。我如何通过 java 代码获取 youtube 视频的缩略图。请查看示例屏幕截图 TED 应用程序。![在此处输入图像描述](../Images/29c6b21d7647576b43c734e64a82a754.png)

# c# - lua:1: 'ï' 附近的意外符号

> ID：13207783
> 
> 赞同：3
> 
> 时间：2012-11-03T09:21:44.850
> 
> 标签：c#, lua

更具体地说，完整的错误是

> ../../Scripts/LuaTest.lua:1: 'ï' 附近的意外符号

我已经`LuaTest.lua`用不同的编辑器检查了文件以包含 Notepad++，但找不到任何额外/隐藏的字符。我不知道可能导致这种情况的原因。
旁注，我正在关注本指南：[Godpatterns: Scripting with Lua in C#](http://www.godpatterns.com/2006/05/scripting-with-lua-in-c.html)

这是主要的代码块：

```
class Program
{
    static void Main(string[] args)
    {
        Lua lua = new Lua();
        Program program = new Program();

        // register our C# functions
        lua.RegisterFunction("DanSays", program, program.GetType().GetMethod("DanSays"));
        lua.RegisterFunction("ThorSays", program, program.GetType().GetMethod("ThorSays"));

        lua.DoFile("../../Scripts/LuaTest.lua");
        Console.ReadLine();
    }

    public void DanSays(string s)
    {
        Console.WriteLine("Dan Says > " + s);
    }
    public void ThorSays(string s)
    {
        Console.WriteLine("Thor says > " + s);
    }

} 
```

此外，这里是`LuaTest.lua`

```
DanSays("Hey, Thor!");
ThorSays("Hi Dan! You know Thursdays . . . ");
DanSays("*sigh* yeah, Thor, I know Thursdays.");
ThorSays("Named after me you know!");
DanSays("Yeah, I know."); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T09:28:43.557

这可能是由某些文本编辑器放置在 Unicode 文本文件开头的[字节顺序标记引起的。](https://en.wikipedia.org/wiki/Byte_order_mark)BOM 的字节包括 0xEF，它是[ISO 8859-1 字符代码](https://en.wikipedia.org/wiki/ISO/IEC_8859-1)ï（带有变音符号的拉丁小写 i）。

所以你的猜测是正确的，里面*有*隐藏的字符。将您的文本编辑器配置为在编写文本文件时**不**使用 BOM。

# sql - MAX 函数和 GROUP BY 函数不能一起工作

> ID：13207784
> 
> 赞同：0
> 
> 时间：2012-11-03T09:21:48.643
> 
> 标签：sql, join

我想列出教“java”的教授的名字，他教的次数以及他教的最近一年和学期。

我尝试了这个查询，但它给出了两行具有相同名称的行。

```
SELECT i.I_FNAME, COUNT(f.I_ID) as myCount, f.CO_TERMNUMBER, f.CO_YEAR
FROM 
  INSTRUCTOR i
JOIN TEACHINGQUALIFICATION t
  ON i.I_ID = t.I_ID
JOIN COURSE c
  ON c.C_ID = t.C_ID
JOIN COURSEOFFERING f
  ON i.I_ID = f.I_ID  
WHERE c.C_TITLE =  'java'
  GROUP BY t.I_ID, i.I_FNAME, f.CO_TERMNUMBER, f.CO_YEAR
  ORDER BY f.CO_YEAR desc 
```

**输出：**

```
1    Gaurav    1    4   2006
2    Gaurav    1    1   2000 
```

**预期输出：**

```
1    Gaurav    2    4   2006 
```

**有错误的代码：**

我还使用条件“AND f.CO_YEAR = MAX (f.CO_YEAR)”尝试了此代码，但它显示此错误“此处不允许使用组函数”

```
SELECT  t.I_ID, i.I_FNAME, COUNT(f.I_ID) as Cnt, f.CO_TERMNUMBER, f.CO_YEAR
FROM 
  INSTRUCTOR i
JOIN TEACHINGQUALIFICATION t
  ON i.I_ID = t.I_ID
JOIN COURSE c
  ON c.C_ID = t.C_ID
JOIN COURSEOFFERING f
  ON i.I_ID = f.I_ID  
WHERE c.C_TITLE =  'itec801' AND f.CO_YEAR= MAX (f.CO_YEAR)
  GROUP BY t.I_ID, i.I_FNAME, f.CO_TERMNUMBER, f.CO_YEAR
  ORDER BY f.CO_YEAR desc 
```

* * *

**更新**

* * *

此代码显示最新年份的输出，但问题是当它获取最新行时，计数器停在那里并显示 1 个值。但我想计算所有行，然后只显示最近一年。

```
SELECT  t.I_ID, i.I_FNAME, COUNT(f.I_ID) as Cnt, f.CO_TERMNUMBER, f.CO_YEAR
    FROM 
      INSTRUCTOR i
    JOIN TEACHINGQUALIFICATION t
      ON i.I_ID = t.I_ID
    JOIN COURSE c
      ON c.C_ID = t.C_ID
    JOIN COURSEOFFERING f
      ON i.I_ID = f.I_ID  
 JOIN
    (
    SELECT I_ID, MAX(CO_YEAR) LatestYear
    FROM COURSEOFFERING GROUP BY I_ID
    ) 
  f2 ON f.I_ID = f2.I_ID AND f.CO_YEAR = f2.LatestYear

    WHERE c.C_TITLE =  'itec801' 
      GROUP BY t.I_ID, i.I_FNAME, f.CO_TERMNUMBER, f.CO_YEAR
     having  f.CO_YEAR= MAX (f.CO_YEAR)
      ORDER BY f.CO_YEAR desc 
```

**新输出：**

```
1    Gaurav    1    4   2006 
```

**预期输出：**

```
1    Gaurav    2    4   2006 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:43:38.557

这个查询怎么样，我没有尝试过，但是：

```
SELECT  i.I_FNAME, COUNT(f.I_ID) as Cnt, MAX(f.CO_TERMNUMBER), MAX(f.CO_YEAR)
FROM 
  INSTRUCTOR i
JOIN TEACHINGQUALIFICATION t
  ON i.I_ID = t.I_ID
JOIN COURSE c
  ON c.C_ID = t.C_ID
JOIN COURSEOFFERING f
  ON i.I_ID = f.I_ID
WHERE c.C_TITLE =  'itec801'
  GROUP BY i.I_FNAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:26:46.710

```
 If you have aggeragate function then use having statement like and must below  order :
     select * from table
     where cond...
     group by ...
     having cond ...
     order by..
    =======================
    Exapmle:

      SELECT  t.I_ID, i.I_FNAME, COUNT(f.I_ID) as Cnt, f.CO_TERMNUMBER, f.CO_YEAR
        FROM 
       INSTRUCTOR i
       left outer JOIN TEACHINGQUALIFICATION t  ON i.I_ID = t.I_ID
       left outer JOIN COURSE c  ON c.C_ID = t.C_ID
       left outer JOIN COURSEOFFERING f  ON i.I_ID = f.I_ID  
       WHERE c.C_TITLE =  'itec801' 
       GROUP BY t.I_ID, i.I_FNAME, f.CO_TERMNUMBER, f.CO_YEAR
       having  f.CO_YEAR= MAX (f.CO_YEAR)
       ORDER BY f.CO_YEAR desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T09:27:52.327

你需要使用[Having子句](http://en.wikipedia.org/wiki/Having_%28SQL%29)

试试这个（我没有测试过）

```
SELECT  t.I_ID, i.I_FNAME, COUNT(f.I_ID) as Cnt, f.CO_TERMNUMBER, f.CO_YEAR
FROM 
  INSTRUCTOR i
JOIN TEACHINGQUALIFICATION t
  ON i.I_ID = t.I_ID
JOIN COURSE c
  ON c.C_ID = t.C_ID
JOIN COURSEOFFERING f
  ON i.I_ID = f.I_ID  
WHERE c.C_TITLE =  'itec801'
  GROUP BY t.I_ID, i.I_FNAME, f.CO_TERMNUMBER, f.CO_YEAR
  HAVING f.CO_YEAR= MAX (f.CO_YEAR)
  ORDER BY f.CO_YEAR desc 
```

# jquery - jQuery 多个上下滑动 div

> ID：13207802
> 
> 赞同：2
> 
> 时间：2012-11-03T09:23:32.903
> 
> 标签：jquery, slidetoggle

我找到了制作以下滑动面板的教程。 [http://www.webdesignerwall.com/demo/jquery/simple-slide-panel.html](http://www.webdesignerwall.com/demo/jquery/simple-slide-panel.html)我想在屏幕顶部有多个向下滑动菜单

我尝试创建一个新的并尝试将其设置为 display:inline，但这不起作用。按钮出现在彼此的顶部。我怎样才能让它们并排？理想情况下，我希望幻灯片并排显示，并且能够分别单击每个。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Simple Slide Panel</title>

<script type="text/javascript" src="jquery.js"></script>

<script type="text/javascript">
$(document).ready(function(){

    $(".btn-slide").click(function(){
        $("#panel").slideToggle("slow");
        $(this).toggleClass("active"); return false;
    });

});
</script>

<style type="text/css">
body {
    margin: 0 auto;
    padding: 0;
    width: 200px;
    font: 75%/120% Arial, Helvetica, sans-serif;
}
a:focus {
    outline: none;
}
#panel {
    background: #754c24;
    height: 500px;
    display: none;
}

#about {
    background: #754c24;
    height: 500px;
    display: none;
}

.slide {
    margin: 0px 20%;
    padding: 0;
    border-top: solid 4px #422410;
    background: orange;
}
.btn-slide {
    background: url(images/white-arrow.gif) no-repeat right -50px;
    text-align: center;
    width: 100%;
    height: 31px;
    padding: 10px 10px 0 0;

    display: block;
    font: bold 120%/100% Arial, Helvetica, sans-serif;
    color: #fff;
    text-decoration: none;
}
.active {
    background-position: right 12px;
}

</style>
</head>

<body>

<div id="panel">
    hi
</div>

<p class="slide"><a href="#" class="btn-slide">Button 1</a></p>

<div id="about">
    hi
</div>

<p class="slide"><a href="#" class="btn-slide">Button 2</a></p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:26:48.683

只需将 float:left 属性赋予它解决的面板......

如果 # panel 和 #about 负责滑块，则添加此 css

```
#panel {
    background: #754c24;
    height: 500px;
    display: none;
    float:left;
}

#about {
    background: #754c24;
    height: 500px;
    display: none;
    float:left; ----> float attribute
} 
```

按钮也应赋予相同的属性以使它们并排

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:44:51.930

## *[jsBin 演示](http://jsbin.com/isuqug/3/edit)*

jQuery：

```
$(function(){

    $(".btn-slide").click(function(e){
        e.preventDefault();
        $(this).closest('p').prev('.panel').slideToggle(800);
        $(this).toggleClass("active");
    });

}); 
```

HTML：

```
 <div id="sliders">
    <div>
      <div class="panel">Panel</div>
      <p class="slide"><a href="#" class="btn-slide">Button 1</a></p>
    </div>

    <div>  
      <div class="panel">About</div>
      <p class="slide"><a href="#" class="btn-slide">Button 2</a></p>
    </div>
  </div> 
```

CSS：

```
/* ================== */
#sliders{
  display:table;
  width:100%;
}
#sliders > div{
 vertical-align:top;
  display:table-cell;
}
.panel{
    background: #754c24;
    height: 500px;
    display: none;
}

.slide {
    margin: 0px;
    padding: 0;
    border-top: solid 4px #422410;
    background: orange;
}
.btn-slide {
    background: url(images/white-arrow.gif) no-repeat right -50px;
    text-align: center;
    width: 100%;
    height: 31px;
    padding: 10px 10px 0 0;

    display: block;
    font: bold 120%/100% Arial, Helvetica, sans-serif;
    color: #fff;
    text-decoration: none;
}
.active {
    background-position: right 12px;
} 
```

# c++ - 将指纹（十六进制格式）转换为图像

> ID：13207810
> 
> 赞同：2
> 
> 时间：2012-11-03T09:24:43.153
> 
> 标签：c++, objective-c, uiimageview, nsdata, fingerprint

有代码可以转换吗？我有指纹数据的十六进制格式。我想显示`UIImageView`为图像。

我尝试将十六进制转换为`NSData`然后使用`imageWithData:`，但它不起作用。没有显示图像。显然这不是图像。不以 FF D8 开头，也不以 FF D9 结尾。

有人知道这些吗？感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T02:28:53.743

看起来[免费指纹成像软件 (FFPIS)](http://ffpis.sourceforge.net/)是可以转换 WSQ 的免费选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:33:54.777

检查此软件：[http ://www.nist.gov/itl/iad/ig/nbis.cfm](http://www.nist.gov/itl/iad/ig/nbis.cfm)

它几乎可以满足您的需求。不过，您必须编写一些 C++ 包装器。

# php - 为什么 jQuery 不提交此表单？（或者我做错了什么？:-p）

> ID：13207815
> 
> 赞同：2
> 
> 时间：2012-11-03T09:25:16.677
> 
> 标签：php, jquery, forms, submit, opayo

HTML：

```
<form action="https://live.sagepay.com/gateway/service/vspform-register.vsp" method="POST" id="sagepay_form"> 
    <input type="hidden" name="navigate" value="" />
    <input type="hidden" name="VPSProtocol" value="2.23">
    <input type="hidden" name="TxType" value="PAYMENT">
    <input type="hidden" name="Vendor" value="******************">
    <input type="hidden" id= "Crypt" name="Crypt" value="">
    <input id="payment_proceed" value="Proceed To Payment" class="mws-button green" type="button">
</form> 
```

JS：

```
$("#payment_proceed").click(function() {
        $.post('/includes/cart/ajax/sagepay.php', { //This script just echos the base64 "Crypt" string required by sagepay.
                "cart_id": <?php echo $cart_id; ?>,
                "title": $("#title").val(),
                "first_name": $("#first_name").val(),
                "last_name": $("#last_name").val(),
                "telephone": $("#telephone").val(),
                "email": $("#email").val(),
                "line1": $("#line1").val(),
                "line2": $("#line2").val(),
                "line3": $("#line3").val(),
                "town": $("#town").val(),
                "county": $("#county").val(),
                "postcode": $("#postcode").val()
            },
            function(crypt){              
                $("#Crypt").val(crypt); //The base64 "Crypt" string is inserted in to the hidden form field here.
                alert($("#Crypt").val()); //I just put this here to make sure it had received the "Crypt" string.
                $("#sagepay_form").submit(); //This doesn't work...
            });
    }); 
```

我不知道为什么 $("#sagepay_form").submit(); 不提交表格。我唯一的猜测是因为“操作”网址是远程服务器。如果是这种情况，有谁知道我该如何实现我想要实现的目标？

谢谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:33:18.337

使用 `$("#sagepay_form").submit(function()`... 而不是`$("#payment_proceed").click(function()`.

# android - 阻止 Go 短信以获取短信广播

> ID：13207819
> 
> 赞同：2
> 
> 时间：2012-11-03T09:25:48.757
> 
> 标签：android, sms, broadcastreceiver

我有一个短信广播听众，在清单中定义为：

```
<receiver android:name=".CustomSmsListener" >
    <intent-filter android:priority="2147483647" >
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />
    </intent-filter>
</receiver> 
```

当我的手机安装了 Go 短信时。收到短信时，两个接收者都可以工作，但是我不希望 Go 短信工作。我的应用程序是第一个安装在手机中的应用程序，因此首先调用该接收器。另外，我正在中止听众中的广播：

```
if (isDelete()) {
    abortBroadcast();
} 
```

我已经检查了[这个软问题](https://stackoverflow.com/questions/6600266/suppress-block-broastreceiver-in-another-app)，但似乎没有任何效果。

此外，我收到的警告有点混乱，这可能会导致这种歧义。在清单中接收者声明的第一行，即

```
<receiver android:name=".CustomSmsListener" > 
```

我收到以下警告

`Exported receiver does not require permission`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-06T17:16:54.707

使用 `android:priority="999"`我想这是优先级的最后一个限制

```
 <receiver android:name=".CustomSmsListener" >
       <intent-filter android:priority="999" >
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />
      </intent-filter>
   </receiver> 
```

# c# - Visual Studio 中的设置文件

> ID：13207823
> 
> 赞同：0
> 
> 时间：2012-11-03T09:26:09.150
> 
> 标签：c#, visual-studio, installation

我在 Visual Studio 中使用 Visual Studio 安装程序项目制作了一个安装项目。

安装后，它给了我 2 个安装文件，如下图：

![在此处输入图像描述](../Images/2de33aeae7d75ec786721e44a86c4ed2.png)

我想知道用户应该安装哪一个以便他们可以使用该应用程序。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:33:50.620

从[这里](http://social.msdn.microsoft.com/forums/en-US/winformssetup/thread/3a897533-e9d8-481a-9ea3-1205f427bfb2/)的 hello world 项目示例：

> HelloWorld_Setup.msi
> 
> HelloWorld 项目的 Windows 安装程序包。我们可以通过修改设置项目的“属性页”对话框中的“输出文件名”属性将其名称更改为更常规的名称。
> 
> 安装程序
> 
> 安装引导程序文件，它读取 Setup.ini 以确定所需的安装任务。这是运行以开始安装的文件。Setup.exe 将检查所需的 .NET 运行时，如果在目标 PC 上未找到，则提示用户下载。

您可能还会看到：

> 安装程序.ini
> 
> Setup.exe 用于执行所需操作的初始化文件。在像这样的简单安装项目中，Visual Studio .NET 创建对包含应用程序的 Windows Installer 包的 MSI 文件的引用以及对所需 .NET Framework 运行时的引用。在更复杂的安装中，它可能包含其他特定于应用程序的信息。

所以`Setup.exe`在没有 .net 的机器上运行并确保它们拥有它。还`.msi`需要[Windows Installer](http://www.microsoft.com/en-us/download/details.aspx?id=8483)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T09:34:51.370

**Setup.exe**文件检查先决条件（这是在安装应用程序之前安装的必要软件，例如在您的情况下是 .Net Framework 4.0、Windows Installer 等）。

如果未安装它们，它会从供应商网站安装它们或从安装程序提供的文件夹中安装它们。

如果系统预先安装了这些先决条件，它会直接调用您的**msi 文件**，该文件实际安装您的应用程序。

名称**“setup.exe”**不能从 VS 更改。但是 msi 文件名可以从 VS 项目中配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T09:33:25.170

扩展名为 .msi 的文件，它应该在计算机中安装应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T09:35:22.653

您列表中的两个文件可能是：

*   安装程序
*   软件设置.msi

不确定，您需要显示附加信息。但假设我的扩展名正确，基本答案是 setup.exe 是最好的。但是，如果您只想发送该文件，请务必将其设置在原始机器（例如虚拟 PC）上。

现在，关于你没有说的，也许没有问的。如果您使用 VS2010 或更早版本并添加了 VS 设置项目，请注意 VS2012 不支持这些项目。只需回答未提出的问题，也许就可以回答添加设置项目的真正问题。如果是这种情况，请查看 ViX。有点学习曲线（1-2天），但它是工作。

唉，我认为VS2010设置项目很好。

# java - AsyncTask：在 AudioTrack 中实现 executeOnExecutor() 线程类

> ID：13207824
> 
> 赞同：2
> 
> 时间：2012-11-03T09:26:15.200
> 
> 标签：java, android, android-asynctask, http-post, audiotrack

对于并行执行，我遇到了问题`AsyncTask`，`executeOnExecutor()`但是在发送和接收音频时，我得到的声音有延迟（400 毫秒到 600 毫秒）。这是我的代码：

录音通话代码：

```
private void startRecording() { 
    recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,
    RECORDER_SAMPLERATE, RECORDER_CHANNELS,
    RECORDER_AUDIO_ENCODING, BufferElements * BytesPerElement); 
    recorder.startRecording();
    isRecording = true;
    /*
     * Schedule a task for repeated fixed-rate execution after a specific
     * delay has passed.
     */
    timer.scheduleAtFixedRate(new TimerTask() {

            @Override
            public void run() {
                bData = new short[BufferElements];

                while (isRecording) {
                // gets the voice output from microphone to byte format
                /*
                 * Reads audio data from the audio hardware for recording
                 * into a buffer.
                 */
                recorder.read(bData, 0, BufferElements);
                if (AudioRecord.ERROR_INVALID_OPERATION != 0) {
                    /* Send the audio voice data to server */
                    SendAudio();
                }
            }}, 0, 1);
} 
```

两个用户之间通话时，首先发起通话，如图所示。

------>> 从用户 1 呼叫用户 2 发起呼叫 = 0

如果 user2 接到呼叫，则发起呼叫 = 1 <<------

如果initial call = 1，则在两个用户之间传输数据，即发送和接收语音数据。

------>> 当Initiate call = 1时，传输数据

发送和接收语音数据<<------

播放音频数据有什么问题？

播放音频时出现语音延迟。发送和接收响应之间的时间太长，大约 400 毫秒到 600 毫秒。我需要做什么来解决这个问题？第一次持有 5 个数据块，当它收到 5 个音频数据时立即开始一个接一个地播放，如上面的代码所示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:01:37.377

尝试将 5 个音频数据减少到 3 个？- 并不总是最好的主意，但它可能会有所帮助。带宽如何，是否足以舒适地传输？网络延迟如何？做一个 ping ，如果有 400 毫秒，那么你不能做太多事情。

# android - Android MediaRecorder 在 4.0.4 上启动失败

> ID：13207830
> 
> 赞同：0
> 
> 时间：2012-11-03T09:27:37.087
> 
> 标签：android, mediarecorder, android-mediarecorder

我从 MediaRecorder start() 方法中得到这个代码。该文件是在 SD 卡上的正确位置创建的，开始预览，等等......当我从我的代码中注释掉这个方法时，一切正常。

这是我的 CamcoderPreview 类：

```
public class CamcorderPreview extends SurfaceView implements
    SurfaceHolder.Callback {

MediaRecorder recorder;
SurfaceHolder holder;
String fileName;
Camera camera;

private int counter = 1;

public CamcorderPreview(Context context, AttributeSet attrs) {
    super(context, attrs);
    holder = getHolder();
    holder.addCallback(this);
    holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    recorder = new MediaRecorder();

}

public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    initCamera();
}

private void initCamera(){
    camera = Camera.open();

    try {
        camera.setPreviewDisplay(holder);
    } catch (IOException e) {
        System.out.println("error on camera init:" + e);
        e.printStackTrace();
    }

    camera.lock();
    recorder.setCamera(camera);

    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    recorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);

    SimpleDateFormat sdf = new SimpleDateFormat("MM_dd_HH_mm");

    File dir = new File("/sdcard/TrainHardVideo/" + sdf.format(new Date()));
    if (!dir.exists()) {
        dir.mkdirs();
    }

    recorder.setOutputFile(dir.getAbsolutePath() + "/" + counter + ".mp4");
     recorder.setPreviewDisplay(holder.getSurface());

    if (recorder != null) {
        try {
            recorder.prepare();
            counter++;
            System.out.println("recorder prepare...");
        } catch (IllegalStateException e) {
            Log.e("IllegalStateException", e.toString());
        } catch (IOException e) {
            Log.e("IOException", e.toString());
        }

        camera.startPreview();
        recorder.start();
    }

}

public void surfaceCreated(SurfaceHolder holder) {

}

public void surfaceDestroyed(SurfaceHolder holder) {
}

public MediaRecorder getRecorder() {
    return recorder;
} 
```

}

这是 LogCat 中的消息：

```
11-03 10:06:06.449: E/MediaRecorder(4104): start failed: -19
11-03 10:06:06.453: D/AndroidRuntime(4104): Shutting down VM
11-03 10:06:06.453: W/dalvikvm(4104): threadid=1: thread exiting with uncaught exception (group=0x40a451f8)
11-03 10:06:06.457: E/AndroidRuntime(4104): FATAL EXCEPTION: main
11-03 10:06:06.457: E/AndroidRuntime(4104): java.lang.RuntimeException: start failed.
11-03 10:06:06.457: E/AndroidRuntime(4104):     at android.media.MediaRecorder.native_start(Native Method)
11-03 10:06:06.457: E/AndroidRuntime(4104):     at android.media.MediaRecorder.start(MediaRecorder.java:714)
11-03 10:06:06.457: E/AndroidRuntime(4104):     at hu.android.TrainHardPro.CamcorderPreview.initCamera(CamcorderPreview.java:90)
11-03 10:06:06.457: E/AndroidRuntime(4104):     at hu.android.TrainHardPro.CamcorderPreview.surfaceChanged(CamcorderPreview.java:44)
11-03 10:06:06.457: E/AndroidRuntime(4104):     at android.view.SurfaceView.updateWindow(SurfaceView.java:544)
11-03 10:06:06.457: E/AndroidRuntime(4104):     at android.view.SurfaceView.access$000(SurfaceView.java:81)
11-03 10:06:06.457: E/AndroidRuntime(4104):     at android.view.SurfaceView$3.onPreDraw(SurfaceView.java:169)
11-03 10:06:06.457: E/AndroidRuntime(4104):     at android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:590)
11-03 10:06:06.457: E/AndroidRuntime(4104):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1617)
11-03 10:06:06.457: E/AndroidRuntime(4104):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
11-03 10:06:06.457: E/AndroidRuntime(4104):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-03 10:06:06.457: E/AndroidRuntime(4104):     at android.os.Looper.loop(Looper.java:137)
11-03 10:06:06.457: E/AndroidRuntime(4104):     at android.app.ActivityThread.main(ActivityThread.java:4575)
11-03 10:06:06.457: E/AndroidRuntime(4104):     at java.lang.reflect.Method.invokeNative(Native Method)
11-03 10:06:06.457: E/AndroidRuntime(4104):     at java.lang.reflect.Method.invoke(Method.java:511)
11-03 10:06:06.457: E/AndroidRuntime(4104):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
11-03 10:06:06.457: E/AndroidRuntime(4104):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
11-03 10:06:06.457: E/AndroidRuntime(4104):     at dalvik.system.NativeStart.main(Native Method) 
```

谢谢！

# android - 如何在另一个 Activity 的 ListView 中显示解析的数据？

> ID：13207834
> 
> 赞同：1
> 
> 时间：2012-11-03T09:28:11.123
> 
> 标签：android

我可以`ListView`通过 ksoap2 在同一活动中显示名称和位置，但我想在 a 中显示另一个活动中的名称和位置`ListView`。

我不知道该怎么做。有人可以指导我吗？

这是我的代码：

```
package com.example.rotaryclubnew;
import java.util.ArrayList;
import java.util.List;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class Searchcontactswithposition extends Activity implements OnClickListener{

    EditText name1,pos;
    Button searching;

    public static String SOAP_ACTION1 = "http://tempuri.org/Search";

   public static String NAMESPACE = "http://tempuri.org/";

    public static String METHOD_NAME2 = "Search";

    private static String URL = "http://115.119.182.114/Rotaryclub/RotaryService.asmx"; 

    TextView txtdata;
    ListView lv;
     List<String> contactRecords = new ArrayList<String>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.searchcontactswithposition);
        lv=(ListView) findViewById(R.id.listView1);
        name1=(EditText) findViewById(R.id.editText1withname);
        pos=(EditText)findViewById(R.id.editText1withposition);

        searching=(Button) findViewById(R.id.button2search);
        searching.setOnClickListener(this);

        //txtdata=(TextView) findViewById(R.id.textViewtodisplayname);

        //abs();
    }
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    /*  Intent i = new Intent(Searchcontactswithposition.this,Displaydetails.class);
        Bundle extras = new Bundle();
        extras.putString("Nameofperson", name1.getText().toString());
        extras.putString("Positionofcontacts", pos.getText().toString());
        i.putExtras(extras);
        startActivity(i);*/

             Thread networkThread = new Thread() {
                    @Override
                    public void run() {
                      try {
                         SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME2);     

                         SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                         envelope.dotNet=true;
                         envelope.setOutputSoapObject(request);

                         HttpTransportSE ht = new HttpTransportSE(URL);
                        // ht.call(SOAP_ACTION1, envelope);
                         if( name1.getText().toString().equals("")&&pos.getText().toString().equals("")){

                            Toast.makeText(Searchcontactswithposition.this, "please enter details", 3000).show();
                                /*Intent i=new Intent(Searchcontactswithposition.this, Rotary_main.class);
                                startActivity(i);*/
                         }
                         request.addProperty("Name",name1.getText().toString());//pass the parameters
                         request.addProperty("Position",pos.getText().toString());

                         envelope.setOutputSoapObject(request);
                         ht.call(SOAP_ACTION1, envelope);

                      final SoapObject result = (SoapObject)envelope.getResponse();

        runOnUiThread (new Runnable()
                   { 
                     public void run() 
                     {

                         int count=result.getPropertyCount();
                         System.out.println("in main count "+count);
                         for (int i = 0; i <count; i++) 
                          {
                              SoapObject result1=(SoapObject) result.getProperty(i);//get the result 
                              if(result!=null)
                              {
                              contactRecords.add("Name "+result1.getProperty(2).toString()+"\n"+"Position "+result1.getProperty(1).toString());
                              name1.setText("");
                              pos.setText("");

                             System.out.println("in for loop "+"Name "+result1.getProperty(2).toString()+"\n"+"Position "+result1.getProperty(1).toString());
                          }

                          }
                      }
                   });
                   }
                    catch (Exception e) {
                         e.printStackTrace();
                     }
                     handler.sendEmptyMessage(0);//call the handle to display the data in a listview

                    }
                  };
                            /*lv.setOnItemClickListener(new OnItemClickListener() {
                              @Override
                              public void onItemClick(AdapterView<?> parent, View view,int position, long id) {

                                // you can do ur work according to selected string or index here... 
                             Toast.makeText(getApplicationContext(),lv.getAdapter().getItem(position)+" is selected", Toast.LENGTH_LONG).show();

                             }

                            });*/

                  networkThread.start();//start the network thred

    }

    private Handler handler = new Handler()
        {
            @SuppressLint("HandlerLeak")
            @Override
            public void handleMessage(Message msg)
            {

                ArrayAdapter<String> aa;
            aa = new ArrayAdapter<String>(Searchcontactswithposition.this, android.R.layout.simple_list_item_1,contactRecords);
            lv.setAdapter(aa);
           // aa.clear();

            }
        };

    /*public void abs()
    {

        if( name1.getText().toString().equals("")||pos.getText().toString().equals("")){

                Intent i=new Intent(Searchcontactswithposition.this, Rotary_main.class);
                startActivity(i);

            Toast.makeText(this, "please enter details",4000).show();   
            }*/

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:43:22.967

只需使用 Intent 将 contactRecords ArrayList 传递给另一个活动：

```
Intent intent = new Intent(Searchcontactswithposition.this, Other_Activity.class);
intent.putStringArrayListExtra("contactRecords_list", contactRecords);
startActivity(intent); 
```

并在 Other_Activity 中获取contactRecords，就像在 Activity 的 onCreate 方法中一样：

```
contactRecords = getIntent().getStringArrayListExtra("contactRecords_list"); 
```

现在，您可以使用 listView Adapter 的 contactRecords ArrayList 作为其他活动的数据源

# mongodb - Mongodb 索引是如何工作的？

> ID：13207835
> 
> 赞同：6
> 
> 时间：2012-11-03T09:28:12.153
> 
> 标签：mongodb, indexing

```
I have a collection such as:
{u'_id': ObjectId('5094cc44e3f0f827b3618918'),
  u'xxx': 0},
 {u'_id': ObjectId('5094cc44e3f0f827b3618919'),
  u'xxx': 1},
 {u'_id': ObjectId('5094cc44e3f0f827b361891a'),
  u'xxx': 2},
 {u'_id': ObjectId('5094cc44e3f0f827b361891b'),
  u'xxx': 3},
 {u'_id': ObjectId('5094cc44e3f0f827b361891c'),
  u'xxx': 4}
... 
```

当我创建索引时，例如：

```
db.test.ensure_index([("_id",-1),("xxx",1)])
db.test.ensure_index([("xxx",1)]) 
```

然后，我使用解释，例如：

```
db.test.find({"xxx":1}).sort("_id",-1).skip(5).limit(5).explain()

result is:
{u'allPlans': [{u'cursor': u'BtreeCursor _id_ reverse',
                u'indexBounds': {u'_id': [[{u'$maxElement': 1},
                                           {u'$minElement': 1}]]},
                u'n': 9,
                u'nscanned': 34,
               u'nscannedObjects': 34},
               {u'cursor': u'BtreeCursor xxx_1',
                u'indexBounds': {u'xxx': [[1, 1]]},
                u'n': 34,
                u'nscanned': 34,
                u'nscannedObjects': 34},
               {u'cursor': u'BtreeCursor _id_-1_xxx_1',
                u'indexBounds': {u'_id': [[{u'$maxElement': 1},
                                           {u'$minElement': 1}]],
                                 u'xxx': [[1, 1]]},
                u'n': 10,
                u'nscanned': 38,
                u'nscannedObjects': 10},
               {u'cursor': u'BasicCursor',
                u'indexBounds': {},
                u'n': 16,
                u'nscanned': 34,
                u'nscannedObjects': 34}],
 u'cursor': u'BtreeCursor xxx_1',
 u'indexBounds': {u'xxx': [[1, 1]]},
 u'indexOnly': False,
 u'isMultiKey': False,
 u'millis': 1,
 u'n': 5,
 u'nChunkSkips': 0,
 u'nYields': 0,
 u'nscanned': 34,
 u'nscannedAllPlans': 140,
 u'nscannedObjects': 34,
 u'nscannedObjectsAllPlans': 112,
 u'scanAndOrder': True,
 u'server': u'ubuntu:27017'} 
```

从 n,nscanned 和 nscnnedObjects 的 num，我认为它应该使用 u'BtreeCursor *id* -1_xxx_1' 作为光标，但是为什么它使用 u'cursor': u'BtreeCursor xxx_1',？谁能给我一些建议？我对索引优化有一点了解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T12:07:03.267

索引中字段的顺序很重要；查找和排序示例的最佳复合索引实际上是：

```
db.test.ensure_index([("xxx",1),("_id",-1)]) 
```

由于您的搜索条件在字段“xxx”上，因此将此字段放在索引中的第一位将比搜索`_id`然后过滤到与您的`xxx`条件匹配的文档找到更多的结果。

如果查看`n`查询优化器在 中考虑的每个计划的数量`allPlans`，`BtreeCursor xxx_1`索引实际上返回的结果最多 (34)。其他索引返回 9、10 和 16 个结果......因此对于给定的搜索条件效率会降低。

有关索引优化的更多信息，这篇文章非常有帮助：[优化 MongoDB 复合索引](http://java.dzone.com/articles/optimizing-mongodb-compound)。

# android - 在android中链接和复制外部（可移动存储）文件

> ID：13207836
> 
> 赞同：1
> 
> 时间：2012-11-03T09:28:31.267
> 
> 标签：android, external, sd-card

在开始开发功能之前，我有一个悬而未决的问题，我想在之后了解有关该主题的更多信息，然后重新开始；）我尝试搜索，但不确定要搜索什么。因此，我想在这里采摘你的大脑......

**这是当前情况：** 我有一个存储活动/事件日志的应用程序。在一个简化的例子中：“人 A 用 100 毫升水装满了一个玻璃杯”

这作为记录存储在单个表中。

**现在，为了满足新功能的要求：** 我通过 USB 将外部存储设备连接到我的平板电脑。在这个存储设备上有几个文本文件。每个文件都包含一个活动/事件的参数，类似于上面描述的，但具有不同的数据。

我想创建一个函数来导入这些文件，将它们的一些内容作为新记录读入数据库，然后将文件存储在平板电脑上的某个位置，并将文件链接作为数据库中的一个字段。理想情况下，我希望将整个文本文件的内容存储在一个字段中，或相关 1:1 表中的一个字段中，但这些文件可能大到 1MB（1MB 非常少见，但可能。平均为大约 100KB）。

**所以，我的问题是：**

*   是否可以将文件从通过 USB 链接的外部存储设备复制到 android 设备的 SD 卡/内部存储器？（我可以使用平板电脑上的文件浏览器应用程序访问此存储设备）
*   如果是这样，最好的方法是什么？
*   如果没有，我的替代方案是什么？
*   此外，如果无法复制和本地存储文件，是否仍然可以访问外部存储上的内容？在这种情况下，我将只导入我需要的数据，而不是存储原始文件的副本。

在此先感谢，非常感谢所有回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T11:07:11.357

没人愿意冒险吗？:)

对于有同样问题的未来读者：可以从 USB 连接设备读取文件。请记住，直接从文件系统读取文件与将其作为邮件附件读取是不同的。只不过是一条不同的道路；）

我最终将文件读入数据库，将行拆分为记录。换句话说，不是在一个字段中添加整个文件（甚至是整行），而是将文件解析为单个记录，拆分为各个字段。

我遇到的两件事可能会对您有所帮助。读取文件非常快，但不要犯我将这些行一一写入数据库所犯的错误。最好将它们全部添加到事务中，并立即提交。另一种，您可以使用读取缓冲区来读取文件，而不是使用默认的输入流。这也加快了大文件的读取速度。

# mysql - 将 MySQL 列值设置为 NULL 而不是 0 或 '' 对磁盘空间的影响

> ID：13207838
> 
> 赞同：10
> 
> 时间：2012-11-03T09:28:47.037
> 
> 标签：mysql, database

我试图了解处理在**磁盘空间**和**索引性能**方面大部分为空的列的最佳方法。在所有空的地方 NULL 与 '' （对于 varchar / text）和 0 （对于 int）之间有区别吗？

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-03T10:00:45.627

`VARCHAR`不，使用 NULL 不会比空或`INT`字段占用更少的空间。事实上，它可能会占用**更多**空间。原因如下：

A`VARCHAR`存储为大小 + 值。用于大小的字节数取决于`VARCHAR`. `VARCHAR(255)`需要一个字节，`VARCHAR(65536)`需要两个字节，依此类推。

因此，`VARCHAR(255)`即使您存储一个空字符串，该列也会占用一个字节。下表每行至少占用一个字节（加上一些其他可能的开销，具体取决于存储引擎）。

```
CREATE TABLE sample (
  a VARCHAR(255) NOT NULL
); 
```

为了保存`NULL`值，MySQL 为每一行使用一个位掩码。每个字节最多可以存储 8 个可为空的列。因此，如果您有这样的表：

```
CREATE TABLE sample (
  a VARCHAR(255) NULL
); 
```

每行至少需要两个字节。存储`NULL`只是设置位，无论您使用与否，它都已保留。`VARCHAR`即使列设置为 ，每一行仍使用 的大小字节`NULL`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T09:41:10.387

简单的答案可能是（尽管这无关紧要），空值可能会占用更少的磁盘空间，尽管节省的空间可能很小（尽管即使是很小的节省也会加起来）。
除非磁盘空间受到非常严格的限制，否则我不会担心（磁盘空间比程序员的时间便宜很多）。
此外，null 和 0（或 ''）在语义上是不同的，因此不应互换使用，当然不是为了理论上（或非常小的）性能增益。

有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/4229805/how-much-disk-space-is-needed-to-store-a-null-value-using-postgresql-db)。

我不认为索引会受到很大影响，可能会有轻微的速度提升。
有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/1070329/query-performance-with-null)。

[这个问题](https://stackoverflow.com/questions/471367/when-to-use-null-in-mysql-tables)专门处理 MySQL 和 null 性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T10:03:21.703

这取决于。

如果您有一个固定宽度的表格（没有`VARCHAR`、或） `VARBINARY`，它可能没有任何区别。`BLOB``TEXT`

在可变宽度表中， a`NULL`可能会占用与 empty 一样多的空间`VARCHAR`。

如果您几乎拥有所有值`NULL`并且只有极少数包含数据，则可以创建一个单独的表来连接。

所以让我们假设你有一个人列表，其中只有少数人有你的生日。

所以而不是

```
CREATE TABLE people (id INT UNSIGNED NOT NULL PRIMARY KEY AUTOINCREMENT, name VARCHAR(60) NOT NULL, birthday DATE) 
```

你可以做

```
CREATE TABLE people (id INT UNSIGNED NOT NULL PRIMARY KEY AUTOINCREMENT, name VARCHAR(60) NOT NULL)
CREATE TABLE birthdates (id INT UNSIGNED, birthday DATE NOT NULL) 
```

并使用 LEFT JOIN 查询数据。

如果有应用程序需要以旧格式访问表，您可以定义一个视图。

# ruby - ruby 在子类中限制 attr_accessor

> ID：13207839
> 
> 赞同：1
> 
> 时间：2012-11-03T09:29:10.967
> 
> 标签：ruby, inheritance, attr-accessor

我想限制子类中超类方法的访问

```
class Parent
  attr_accessor :first_name, :last_name

  def initialize(first_name, last_name)
    @first_name, @last_name = first_name, last_name
  end

  def full_name
  @first_name + " " + @last_name 
  end

end

class Son < Parent
  attr_accessor :first_name

  def initialize(parent, first_name)
    @first_name = first_name 
    @last_name = parent.last_name
  end

  def full_name
    @first_name + "  " + @last_name 
  end
end

p = Parent.new("Bharat", "Chipli")
puts p.full_name

s = Son.new(p, "Harry")
s.last_name= "Smith"
puts s.full_name 
```

在这里，我将儿子的全名命名为**“Harry Smith”**，但我想要**“Harry Chipli”**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T10:52:13.600

在父级的初始化方法中：

```
@first_name, @last_name = [first_name, last_name] 
```

尝试这个

和：

```
class Son
  def attr_reader :last_name

  def last_name=(name)
    @last_name ||= name
  end
end 
```

这样，如果儿子没有从父母那里设置名字（对孤儿有好处），它只会定义姓氏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:35:56.787

```
class Son < Parent
  attr_accessor :first_name

  ...

  private

  attr_accessor :last_name
end 
```

应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T10:50:35.993

您可以重新定义 last_name 设置器：

```
Class Son < Parent

...

def last_name=(name)
end 
```

# matlab - 将数据转换为矩阵形式

> ID：13207840
> 
> 赞同：0
> 
> 时间：2012-11-03T09:29:15.173
> 
> 标签：matlab, matrix

我有一个像这张图片所示的文本文件。
![在此处输入图像描述](../Images/09781d4c6afe000f3054ee30c3d5d67c.png)

我想将数据导入matlab并将其转换为矩阵形式，如下所示：

```
[-5.02 9.70 -1.00 4.68;-2.34 7.53 2.51 3.51;7.03 7.36 6.02 -0.33] 
```

有没有办法很好地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:36:38.747

你试过[`dlmread`](http://www.weizmann.ac.il/matlab/techdoc/ref/dlmread.html)吗？请参阅此[示例](https://alenblog.wordpress.com/2011/03/27/matlab-read-matrix-data-from-a-file/)。

在你的情况下：

```
 M = dlmread(filename,'\t',1,0); 
```

参数 Row = 1 跳过第一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:35:03.440

我刚刚创建了一个制表符分隔值文件（就像你的一样，但没有列名），然后使用 load 函数来获取矩阵：

```
X = load('file.txt') 
```

在此之后，您将在 X 中拥有矩阵，就好像您执行了

```
X = [-5.02 9.70 -1.00 4.68;-2.34 7.53 2.51 3.51;7.03 7.36 6.02 -0.33] 
```

请不要忘记在加载文件之前删除第一行（带有列名）。

加载函数的冒险之处在于自动解析文件。例如，它可以解析使用空格、制表符、列来分隔列的文件。

# c++ - C++ 禁用 C1061 错误 - 块嵌套很深？

> ID：13207841
> 
> 赞同：3
> 
> 时间：2012-11-03T09:29:22.307
> 
> 标签：c++

我正在使用一个开源项目（服务器），基本上在启动时它会加载一个带有数百个项目属性的大型 xml 项目数据库。它使用大量的 else/ifs 来检查这些属性，我冒昧地添加了大约 20 个，现在看来我已经破坏了编译器。我四处搜索，我找到的答案都没有给我一个可行的选择，所以我只是想知道你是否可以禁用它，我试过使用#pragma（因为他们自己在其他一些警告中使用它）。我对这部分 C++ 没有太多经验，所以我可能做错了。

```
#pragma warning(disable:1061) 
```

是我尝试过的，没有工作给了我和错误，它不是一个有效的警告。是否可以禁用此错误？

谢谢你。

//Edit - 解决方案只是想添加我是如何解决这个问题的。我最终创建了一个函数，将所有自定义属性放入其中，这样我就不会超过 128 级限制。

```
bool isCustomAttribute(std::string strValue, int intValue, xmlNodePtr itemAttributesNode, ItemType& it) 
```

然后我插入到 else ifs 的数组中，虽然可能不太漂亮，但这是一个快速而简单的解决方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T09:35:03.017

您不能禁止此错误，因为它是致命的编译器错误，而不是警告。[它的文档](http://msdn.microsoft.com/en-us/library/dcda4f64.aspx)说：

> 编译器限制：块嵌套太深
> 
> 代码块的嵌套超过了 128 个嵌套级别的限制。简化嵌套。

这是编译器的限制，但请注意，就可读性和可维护性而言，128 个嵌套级别太多了。您应该重构该代码以达到更合理的嵌套级别（例如，四级或更少）。

# iphone - 线程 1：信号 SIGABRT 错误

> ID：13207844
> 
> 赞同：0
> 
> 时间：2012-11-03T09:29:56.547
> 
> 标签：iphone, objective-c, xcode

我有一个问题..我在我的 xcode 项目中得到了这个：

**＃进口**

```
int main(int argc, char *argv[]) {
NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
int retVal = UIApplicationMain(argc, argv, nil, nil);  -> Thread 1: Signal SIGABRT
[pool release];
return retVal; 
```

}

我真的不知道如何解决这个问题..请帮帮我！

标题：

```
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>#import "RootA.h"
#import "RootB.h"
#import "RootC.h"
#import "RootD.h"
#import "RootE.h"
#import "RootF.h"
#import "RootG.h"

@interface TabOneViewController : UIViewController {

}
- (IBAction)switchViewsToRootA:(id)sender;

- (IBAction)switchViewsToRootB:(id)sender;

- (IBAction)switchViewsToRootC:(id)sender;

- (IBAction)switchViewsToRootD:(id)sender;

- (IBAction)switchViewsToRootE:(id)sender;

- (IBAction)switchViewsToRootF:(id)sender;

- (IBAction)switchViewsToRootG:(id)sender;

@end 
```

主要的：

```
#import "TabOneViewController.h"

@implementation TabOneViewController

- (IBAction)switchViewsToRootA:(id)sender {

 UIBarButtonItem *mainButton = [[UIBarButtonItem alloc] 
 initWithTitle:@"Back" 
 style:UIBarButtonItemStyleBordered 
 target:self
 action:@selector(mainMenu:)];
 self.navigationItem.backBarButtonItem = mainButton;
 [mainButton release];

RootA *rootA = [[RootA alloc] initWithNibName:@"RootA" bundle:nil];
[self.navigationController pushViewController:rootA animated:YES];
[rootA release];

}

- (IBAction)switchViewsToRootB:(id)sender {

UIBarButtonItem *mainButton = [[UIBarButtonItem alloc] 
                               initWithTitle:@"Back" 
                                   style:UIBarButtonItemStyleBordered 
                               target:self
                               action:@selector(mainMenu:)];
self.navigationItem.backBarButtonItem = mainButton;
[mainButton release];

RootB *rootB = [[RootB alloc] initWithNibName:@"RootB" bundle:nil];
[self.navigationController pushViewController:rootB animated:YES];
[rootB release];
}   

- (IBAction)switchViewsToRootC:(id)sender {

UIBarButtonItem *mainButton = [[UIBarButtonItem alloc] 
                               initWithTitle:@"Back" 
                               style:UIBarButtonItemStyleBordered 
                               target:self
                               action:@selector(mainMenu:)];
self.navigationItem.backBarButtonItem = mainButton;
[mainButton release];

RootC *rootC = [[RootC alloc] initWithNibName:@"RootC" bundle:nil];
[self.navigationController pushViewController:rootC animated:YES];
[rootC release];
}   

- (IBAction)switchViewsToRootD:(id)sender {

UIBarButtonItem *mainButton = [[UIBarButtonItem alloc] 
                               initWithTitle:@"Back" 
                               style:UIBarButtonItemStyleBordered 
                               target:self
                               action:@selector(mainMenu:)];
self.navigationItem.backBarButtonItem = mainButton;
[mainButton release];

RootD *rootD = [[RootD alloc] initWithNibName:@"RootD" bundle:nil];
[self.navigationController pushViewController:rootD animated:YES];
[rootD release];
}   

- (IBAction)switchViewsToRootE:(id)sender {

UIBarButtonItem *mainButton = [[UIBarButtonItem alloc] 
                               initWithTitle:@"Back" 
                               style:UIBarButtonItemStyleBordered 
                               target:self
                               action:@selector(mainMenu:)];
self.navigationItem.backBarButtonItem = mainButton;
[mainButton release];

RootE *rootE = [[RootE alloc] initWithNibName:@"RootE" bundle:nil];
[self.navigationController pushViewController:rootE animated:YES];
[rootE release];
}   

- (IBAction)switchViewsToRootF:(id)sender {

UIBarButtonItem *mainButton = [[UIBarButtonItem alloc] 
                               initWithTitle:@"Back" 
                               style:UIBarButtonItemStyleBordered 
                               target:self
                               action:@selector(mainMenu:)];
self.navigationItem.backBarButtonItem = mainButton;
[mainButton release];

RootF *rootF = [[RootF alloc] initWithNibName:@"RootF" bundle:nil];
[self.navigationController pushViewController:rootF animated:YES];
[rootF release];
}   

- (IBAction)switchViewsToRootG:(id)sender {

UIBarButtonItem *mainButton = [[UIBarButtonItem alloc] 
                               initWithTitle:@"Back" 
                               style:UIBarButtonItemStyleBordered 
                               target:self
                               action:@selector(mainMenu:)];
self.navigationItem.backBarButtonItem = mainButton;
[mainButton release];

RootG *rootG = [[RootG alloc] initWithNibName:@"RootG" bundle:nil];
[self.navigationController pushViewController:rootG animated:YES];
[rootG release];
}   

    #pragma mark -
    #pragma mark Table view data source

        - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
        // Return the number of sections.
        return 1;
    }

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    return 1;
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    // Configure the cell...

    return cell;
}

#pragma mark -
#pragma mark Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    // Navigation logic may go here. Create and push another view controller.
    /*
    <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
    // ...
    // Pass the selected object to the new view controller.
    [self.navigationController pushViewController:detailViewController animated:YES];
    [detailViewController release];
    */
}

#pragma mark -
#pragma mark Memory management

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Relinquish ownership any cached data, images, etc. that aren't in use.
}

- (void)viewDidUnload {
    // Relinquish ownership of anything that can be recreated in viewDidLoad or on demand.
    // For example: self.myOutlet = nil;
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:15:41.420

有时出现此错误是因为连接`IBOutlet`到 IB，然后删除了该 ivar。检查所有 IBOutlets 是否正确连接。

`viewDidLoad`然后检查您的viewcontroller`viewWillAppear`或`viewDidAppear`方法中是否有任何错误代码。

# c++ - 对应字符不在同一位置时字符串的所有排列

> ID：13207857
> 
> 赞同：0
> 
> 时间：2012-11-03T09:33:22.780
> 
> 标签：c++, c, string, algorithm, permutation

我需要给定字符串的所有可能排列，以便没有字符应与输入字符串保持在同一位置。例如。：对于输入“询问”输出：所有可能的排列，如“ksa”，“kas”......这样'a'不在第一个位置，'s'不在第二个位置等等......在任何排列。

**我只需要计算这种可能的排列**

我可以通过生成所有排列并过滤它们来做到这一点，但我需要一种**非常有效**的方法来做到这一点。

字符串中的所有字符都是“唯一”

首选语言 C++。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T10:50:49.333

您正在寻找的东西被称为错乱 -[维基百科文章](http://en.wikipedia.org/wiki/Derangement)很好地解释了一种获取公式的方法，以及几个不同的结果方程。

您还可以使用包含原理来计算数字，从所有排列的数量 - n! 开始，然后减去固定在其位置上的一个数字的排列，加上固定两个数字的排列，依此类推。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-03T10:53:44.813

对于一组可`n`区分的元素，您可以通过以下方式排列它们，而没有元素位于其原始位置`dearangements(n)`：

```
int derangements(int n) {
    assert(n >= 0);
    return n ? ((n - 1) * (derangements(n - 1) + derangements(n - 2)) : 1;
} 
```

请注意，由于非线性递归，这具有指数运行时间。但是，您可以改进此公式。

```
int derangements(int n) {
    assert(n >= 0);
    if(n == 0) return 1;

    int a = 1;
    int b = 0;
    do {
       int x = (n-1)*(a+b);
       a = b;
       b = x;
    } while(--n > 1);
    return b;
} 
```

# ajax - 如何检测 AJAX 发生的请求 URL？

> ID：13207862
> 
> 赞同：1
> 
> 时间：2012-11-03T09:33:43.893
> 
> 标签：ajax, winforms, c#-4.0, webbrowser-control

在 Windows 应用程序中，我有一个 WebBrowser 控件。当网页进行 AJAX 调用时，我想检测此调用并希望 AJAX 调用发生请求 URL？

# scala - 如何在 Squeryl 中的列组合中唯一索引

> ID：13207865
> 
> 赞同：2
> 
> 时间：2012-11-03T09:34:19.267
> 
> 标签：scala, squeryl

如何结合 squeryl 模式中的列定义唯一约束？

```
A  |  B  
2     1  allow
2     3  allow
3     1  allow
2     1  don't allow same with row one 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T20:01:52.540

你试过这个吗？

```
on(authors)(s => declare(      
   columns(s.firstName, s.lastName) are(unique) 
)) 
```

[http://squeryl.org/schema-definition.html](http://squeryl.org/schema-definition.html)

# facebook-graph-api - Facebook 墙上的邮政编码不起作用

> ID：13207876
> 
> 赞同：0
> 
> 时间：2012-11-03T09:35:21.493
> 
> 标签：facebook-graph-api, facebook-wall

有人可以告诉我为什么下面的代码没有给我在墙上发布消息的表格吗？它只是重定向到 $homeurl ！

配置文件

```
<?php
require_once("facebook/src/facebook.php"); //include facebook SDK

######### edit details ##########
$appId = '****************************'; //Facebook App ID
$appSecret = '**********************************'; // Facebook App Secret
$return_url = 'http://www.landshoppe.com/process.php';  //return url (url to script)
$homeurl = 'http://www.landshoppe.com/';  //return to home

$fbPermissions = 'publish_stream,manage_pages';  //Required facebook permissions

##################################

//Call Facebook API
$facebook = new facebook(array( 'appId'  => $appId, 'secret' => $appSecret));

$fbuser = $facebook->getUser();
?> 
```

我的 AppId 和 AppSecret 是正确的。尽管如此， $fbuser 似乎没有连接。回显 $fbuser 给出 0。并且 index.php facebook 发布表单重定向到主页 url，因为我认为 $fbuser 没有连接.. 应该是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T13:25:34.770

您需要添加登录处理，`getLoginUrl`否则如果用户尚未登录您的应用程序，`user`则始终为零

# silverlight - 如何将控件的属性绑定到控件元素的属性？

> ID：13207883
> 
> 赞同：1
> 
> 时间：2012-11-03T09:36:21.270
> 
> 标签：silverlight, windows-phone-7

我需要对我的 Windows Phone 应用程序进行数字控制。

我尝试创建自定义控件，但无法将控件的属性绑定到控件的元素。

我在控件中添加了一个依赖属性

```
public static readonly DependencyProperty LineThicknessProperty =
            DependencyProperty.Register("LineThickness", typeof (double), typeof (DigitControl), new PropertyMetadata(default(double)));

[DefaultValue(10D)]
public double LineThickness
{
    get { return (double) GetValue(LineThicknessProperty); }
    set { SetValue(LineThicknessProperty, value); }
} 
```

并试图将其绑定到控件的元素

```
<UserControl x:Class="Library.DigitControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    d:DesignHeight="480" d:DesignWidth="480">

    <Grid x:Name="LayoutRoot">
    <Rectangle Margin="0" StrokeThickness="0" Width="{Binding LineThickness, RelativeSource={RelativeSource Self}}" Fill="#FFFF5454" RadiusX="5" RadiusY="5"/>
    </Grid>
</UserControl> 
```

但它不起作用。在哪里可以将该属性绑定到元素的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:42:43.470

在后面的代码中做到这一点。

设置名称：

```
<Rectangle x:Name="theRect" Margin="0" StrokeThickness="0" Fill="#FFFF5454" RadiusX="5" RadiusY="5"/> 
```

然后在后面的代码中：

```
theRect.SetBinding(Rectangle.WidthProperty, new Binding("LineThickness"){Source = this}); 
```

不是在带有 Visual Studio 的 PC 上，所以如果它不是 100% 可编译的，那就适用吧！但是给你一个大致的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:04:15.407

您所做的将不起作用，因为`RelativeSource={RelativeSource Self}`将源设置为目标对象，在您的情况下是 Rectangle 。

而且由于 rectangle 没有 LineThickness 属性，绑定失败。

要获得正确的绑定，您可以做几件事。

更可取的方法可能是`this.DataContext = this;`在您的 UserControl 构造函数中设置，然后像`Width="{Binding LineThickness}"`在 XAML 中一样简单地设置绑定。

或者，如果您不想设置 Datacontext，您可以定位最接近的 UserControl 类型的元素并在该元素上找到属性：

```
Width="{Binding LineThickness, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=UserControl}}" 
```

**更新**
您也可以简单地给 UserControl 一个名称，并在绑定中使用 ElementName 属性引用它：

```
<UserControl x:Name="uc1" ... </UserControl>

Width="{Binding LineThickness, ElementName=uc1}" 
```

# matlab - Matlab - 显示泰勒多项式

> ID：13207885
> 
> 赞同：0
> 
> 时间：2012-11-03T09:36:33.040
> 
> 标签：matlab, taylor-series

我有一个非常简单的问题。我们得到一个函数 f: R -> R^2 看起来像这样：**f(x) = [cos(x) ; 罪（2 * x）]**

我们必须将函数与第一和第二泰勒多项式一起显示在一个图中。我已经计算了多项式，但我无法让它在 matlab 中工作（矩阵维数问题）。也许你可以帮我找出错误，这是我的代码：

```
function display
clf;
x=linspace(0,2*pi,1000);
y=F(x); plot(y(1,:),y(2,:),'k'); 
axis equal; axis manual; hold on
xx=1;
yy=F(xx); plot(yy(1,:),yy(2,:),'ro'); 
y=T1(xx,x); plot(y(1,:),y(2,:),'g'); 
%y=T2(xx,x); plot(y(1,:),y(2,:),'b'); 
return 
```

这个显示函数是正确的，问题在于函数 T1 和 T2：

```
function y=F(x)
y=[cos(x);sin(2*x)];

function y=T1(xx,x)
dy=[-sin(xx);  2*cos(2*xx)]; % 1st derivative at xx
y=F(xx) + dy.*(x-xx);

function y=T2(xx,x)
ddy=[-cos(xx); -4*sin(2*x)]; % 2nd derivative at xx
y=T1(xx,x)+ ((x-xx).*ddy.*(x-xx))/2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:27:56.210

您遇到问题是因为您试图将不同大小的矩阵相乘。

这部分是因为您已将其设置`xx`为单个值 1。如果将其更改为与 x 大小相同的矩阵，则应与这些矩阵一起使用，例如

`xx=ones(size(x))`

此外，在您的 T1 和 T2 函数中，您的 dy 矩阵是 2 行 x 1000 列。您必须乘以相同维度的矩阵 - 例如，您可以这样做：

`y=F(xx) + dy.*[x-xx;x-xx];`在 T1 和：

`y=T1(xx,x)+ (ddy.*[x-xx;x-xx].*[x-xx;x-xx])/2;`在T2

T2 中的一行也有一个轻微的错字（x 应该是 xx）：

`ddy=[-cos(xx); -4*sin(2*xx)]; % 2nd derivative at xx`

最后，我发现`xx`作为变量的使用有点令人困惑。我会选择`a`这里使用的：

[http://en.wikipedia.org/wiki/Taylor_series]

# c# - C#中的日期格式问题

> ID：13207887
> 
> 赞同：-1
> 
> 时间：2012-11-03T09:36:38.423
> 
> 标签：c#, javascript, .net, date

我以这种格式从 javascript 中获取 C# 中的日期：

`"Tue Jan 15 00:00:00 UTC+0530 2008"`.

如何将其转换为`"dd/MMM/yyyy"`格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:05:45.320

```
 var jsdate = "Tue Jan 15 00:00:00 UTC+0530 2008";
 var format = "ddd MMM d HH:mm:ss UTCzzzzz yyyy";
 var date = DateTime.ParseExact(jsdate, format, CultureInfo.InvariantCulture);

 Console.WriteLine(date.ToString("dd/MMM/yyyy")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T10:07:28.177

试试这个：

```
var test = "Tue Jan 15 00:00:00 UTC+0530 2008";
const string format = "ddd MMM d HH:mm:ss zzz yyyy";

var var = DateTime.ParseExact(test.Replace("UTC", ""), format, CultureInfo.InvariantCulture);
Console.WriteLine(var); 
```

# java - 为不可变类实现 clone()

> ID：13207888
> 
> 赞同：7
> 
> 时间：2012-11-03T09:36:42.850
> 
> 标签：java, clone, class-design, immutability

我正在开发一个类库。

1.  我有一个用于矩阵的抽象基类 Matrix，它提供了一些基本方法的实现。
2.  派生自 Matrix 的是不同类型矩阵的具体子类。
3.  我要求矩阵是可克隆的，所以 Matrix 实现了 Cloneable 接口。
4.  从 Matrix 派生的一些类是不可变的

不可变类的克隆方法是否可以接受，而不是返回对象的克隆，而是返回对象本身？

一些（过度简化的）代码用于澄清：

```
abstract class Matrix implements Cloneable {
   ...
}

class ImmutableMatrix extends Matrix {
    ImmutableMatrix clone() {
        return this;
    }
    ...
}

class SomeOtherMatrix extends Matrix {
    SomeOtherMatrix clone() {
        SomeOtherMatrix other = super.clone();
        ...
        return other;
    }
    ...
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-03T09:51:29.330

我原以为打电话`super.clone()`就足够了。

如果您的类是不可变的，那么它应该在构造时已经克隆了任何可变类。因此，我认为拥有您班级拥有的任何字段的浅表副本是安全的。

*`x.clone() != x`首选的 JavaDocs 状态。虽然这不是绝对要求，但您的计划肯定会违反 return`this`*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T16:04:33.607

只需返回`this`不可变类的 clone() 实现即可。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-12T22:47:04.107

虽然您可以让不可变类简单地实现`clone`以返回对自身的引用，但我真的认为在`clone`可能或可能不可变的事物上使用没有太大价值，因为缺少某种使不可变事物的可变应对的方法，反之亦然。

我认为您的基`Matrix`类最好包含方法`IsImmutable`和`IsWritable`以及`AsImmutable`,`AsMutable`和`AsNewMutable`方法；它还应该包括读取和写入矩阵的方法（尽管在不可写矩阵上调用“write”方法应该会引发异常）。

定义静态方法`CreateImmutableMatrix`，`CreateMutableMatrix`给定 a `Matrix`，将创建一个新的不可变或可变矩阵，该矩阵已使用适当的数据进行预初始化。

可变类应该实现`AsImmutable`将自己传递给`CreateImmutableMatrix`，`AsMutable`返回自己，并将`AsNewMutable`自己传递给`CreateMutableMatrix`。

不可变类应该实现`AsImmutable`返回自己、`AsMutable`调用`AsNewMutable`并将`AsNewMutable`自己传递给`CreateMutableMatrix`.

只读包装器应该实现`AsImmutable`调用`AsImmutable`被包装的对象，并`AsMutable`调用`AsNewMutable`被`AsNewMutable`包装的对象。

接收可能需要或可能不需要复制或变异的矩阵的对象可以简单地将其存储在字段中（例如`Foo`）。如果它需要改变矩阵，它可以替换`Foo`为`Foo.AsMutable()`. 如果需要复制包含矩阵的对象，则应根据副本中的字段是否可能需要更改来替换副本中`Foo.AsImmutable()`的`Foo.AsNewMutable()`字段。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-12T08:59:25.257

您的类不是严格不可变的，因为它不是最终的：可以有可变的子类。

如果有人想子类化，如果你只是返回`ImmutableMatrix`，他将无法`clone()`通过调用来实现。因此，在这种情况下，您应该调用.`super.clone()``this``super.clone()`

但是，如果您将班级定为决赛，我看不出有什么理由不直接 return `this`。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-03T10:05:18.730

是的，如果我们看到 String（不可变类）的行为，如果内容相同，则返回相同的对象，所以我认为你是对的，clone() 方法应该只返回这个。

# iphone - 使用计数值对数组进行排序

> ID：13207890
> 
> 赞同：1
> 
> 时间：2012-11-03T09:36:44.143
> 
> 标签：iphone, ios, ios5, ios4, ios6

我有一个包含一些字符串的数组。为字符串的每个字符分配一个整数值。例如 a=2,b=5,c=6 ,o=1,k=3 等

a 字符串中的最终值是字符值的总和。因此，对于示例字符串“BOOK”，该字符串将存储为“BOOK (7)”。同样，每个字符串都有一个最终的整数值。我想用存储在每个数组索引中的字符串中的这些最终整数值对这些数组进行排序。该数组包含超过 200,000 个单词。所以排序过程应该很快。有什么方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:43:52.177

一个残酷的快速示例可能是，如果您的字符串结构始终相同，例如“Book (7)”，您可以通过查找“()”之间的数字对字符串进行操作，然后您可以使用字典临时存储对象：

```
 NSMutableArray *arr=[NSMutableArray arrayWithObjects:@"Book (99)",@"Pencil (66)",@"Trash (04)", nil];
    NSLog(@"%@",arr);

    NSMutableDictionary *dict=[NSMutableDictionary dictionary];
    //Find the numbers and store each element in the dictionary 
    for (int i =0;i<arr.count;i++) {
        NSString *s=[arr objectAtIndex:i];
        int start=[s rangeOfString:@"("].location;
        NSString *sub1=[s substringFromIndex:start];
        NSString *temp1=[sub1 stringByReplacingOccurrencesOfString:@"(" withString:@""];
        NSString *newIndex=[temp1 stringByReplacingOccurrencesOfString:@")" withString:@""];
        //NSLog(@"%d",[newIndex intValue]);
        [dict setValue:s forKey:newIndex];
    }
    //Sorting the keys and create the new array
    NSArray *sortedValues = [[dict allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];
    NSMutableArray *newArray=[[NSMutableArray alloc]init];
    for(NSString *valor in sortedValues){
               [newArray addObject:[dict valueForKey:valor]];
        }
    NSLog(@"%@",newArray); 
```

这打印：

> （
> “书（99）”，
> “铅笔（66）”，
> “垃圾（04）”
> ）
> 
> （
> “垃圾（04）”，
> “铅笔（66）”，
> “书（99）”
> ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:22:46.623

据我了解，您想对包含以下格式的字符串的数组进行排序

```
a=3 
```

并且您想在忽略字符的同时根据数字进行排序。在这种情况下，以下代码将适用于您

```
-(NSArray *)Sort:(NSArray*)myArray
{
    return [myArray sortedArrayUsingComparator:(NSComparator)^(id obj1, id obj2)
            {
                NSString *first = [[obj1 componentsSeparatedByString:@"="] objectAtIndex:1];
                NSString *second = [[obj2 componentsSeparatedByString:@"="] objectAtIndex:1];
                return [first caseInsensitiveCompare:second];
            }];
} 
```

**如何使用它：**

```
NSArray *arr= [[NSArray alloc] initWithObjects:@"a=3",@"b=1",@"c=4",@"f=2", nil];
NSArray *sorted = [self Sort:arr];

for (NSString* str in sorted)
{
    NSLog(@"%@",str);
} 
```

**输出**

```
b=1
f=2
a=3
c=4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T10:23:22.597

试试这个方法

```
+(NSString*)strTotalCount:(NSString*)str
{
   NSInteger totalCount =  0;
   // initial your character-count directory
   NSDictionary* characterDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
    [NSNumber numberWithInt:2], [NSString stringWithUTF8String:"a"],
    [NSNumber numberWithInt:5], [NSString stringWithUTF8String:"b"],
    [NSNumber numberWithInt:6], [NSString stringWithUTF8String:"c"],
    [NSNumber numberWithInt:1], [NSString stringWithUTF8String:"o"],
    [NSNumber numberWithInt:3], [NSString stringWithUTF8String:"k"],
                                   nil];

   NSString* tempString = str;
  for (NSInteger i =0; i<tempString.length; i++) {
    NSString* character  = [tempString substringWithRange:NSMakeRange(i, 1)];
    character = [character lowercaseString];
    NSNumber* count = [characterDictionary objectForKey:character];
    totalCount += [count integerValue];
  };
  return [NSString stringWithFormat:@"%@(%d)",str,totalCount];
} 
```

测试语句：

```
 NSLog(@"%@", [ViewController strTotalCount:@"BOOK"]); 
```

将输出“ BOOK(10) ”

您可以将 ViewController 更改为您自己的类名；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T11:33:31.623

首先 - 创建一个自定义对象来保存您的值。不要将值放在字符串中。排序不是你的基本问题。问题是您将值保存到难以提取的字符串中。

```
@interface StringWithValue

@property (nonatomic, copy, readwrite) NSString* text;
@property (nonatomic, assign, readwrite) NSUInteger value;

- (id)initWithText:(NSString*)text;

- (NSComparisonResult)compare:(StringWithValue*)anotherString;

@end

@implementation StringWithValue

@synthesize text = _text;
@synthesize value = _value;

- (id)initWithText:(NSString*)text {
    self = [super init];

    if (!self) {
       return nil;
    }

    self.text = text;
    self.value = [self calculateValueForText:text];

    return self;
}

- (NSComparisonResult)compare:(StringWithValue*)anotherString {
   if (self.value  anotherString.value) {
      return NSOrderedDescending;
   }
   else {
      return NSOrderedSame;
   }
}

- (NSString*)description {
    return [NSString stringWithFormat:@"%@ (%u)", self.text, self.value];
}

@end 
```

然后对数组进行排序将是`sortUsingSelector:`. 请注意，这将在性能上击败所有其他答案，因为无需在每次比较时解析值。

# c# - .net MVC 使用数据库的简单成员身份验证

> ID：13207893
> 
> 赞同：13
> 
> 时间：2012-11-03T09:36:59.977
> 
> 标签：c#, asp.net-mvc, authentication, entity-framework-4, membership-provider

使用带有 .NET MVC 4 的 Code First Entity Framework 我创建了一个新的 Web 应用程序并使用对象填充数据库，如下所示。

```
 public class GratifyGamingContext : DbContext
{
    public DbSet<Game> Games { get; set; }
    public DbSet<Genre> Genres { get; set; }
    public DbSet<UserProfile> UserRepository { get; set; }
} 
```

我想使用我的 UserRepository 表而不是 AccountModel.cs 中的内置 UserContext 类来访问我的用户帐户，因为我无法使用现有的 dbContext 进行工作。

```
 public class UsersContext : DbContext
{
    public UsersContext()
        : base("DefaultConnection")
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }
}

[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
} 
```

从 InitializeSimpleMembershipAttribute.cs 构造 SimpleMembershipInitializer 对象时，我的程序总是崩溃。我已经注释掉了我认为应该无关紧要的代码。

```
 [AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
public sealed class InitializeSimpleMembershipAttribute : ActionFilterAttribute
{
    private static SimpleMembershipInitializer _initializer;
    private static object _initializerLock = new object();
    private static bool _isInitialized;

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        // Ensure ASP.NET Simple Membership is initialized only once per app start
        LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
    }

    private class SimpleMembershipInitializer
    {
        public SimpleMembershipInitializer()
        {
            //Database.SetInitializer<UsersContext>(null);

            try
            {
                using (var context = new GratifyGamingContext())
                {
                    if (!context.Database.Exists())
                    {
                        // Create the SimpleMembership database without Entity Framework migration schema
                        ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
                    }
                }

                WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);
            }
            catch (Exception ex)
            {
                throw new InvalidOperationException("The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588", ex);
            }
        }
    }
} 
```

我的 ConnectionString 如下：

```
<add name="DefaultConnection" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=aspnet-GratifyGaming-20120917185558;AttachDbFilename=|DataDirectory|\Games.mdf;Integrated Security=True" providerName="System.Data.SqlClient" /> 
```

从任何 AccountController 页面调用 WebSecurity.InitializeDatabaseConnect 时出现以下错误：

> [SqlException (0x80131904): 文件“C:\Users\Unreal\Documents\Visual Studio 2010\Projects\GratifyGaming\GratifyGaming.WebUI\App_Data\Games.mdf”的目录查找失败，操作系统错误 2（检索失败此错误的文本。原因：15105)。无法将文件“C:\Users\Unreal\Documents\Visual Studio 2010\Projects\GratifyGaming\GratifyGaming.WebUI\App_Data\Games.mdf”附加为数据库“aspnet-GratifyGaming-20120917185558”。]
> 
> [TargetInvocationException: 调用目标抛出异常。] System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0

如果我不转到任何 AccountController 驱动的页面，我的应用程序将连接到数据库。如何配置此应用程序以使用我的 UserRepository 表而不是 UsersContext 作为用户成员？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-05T06:47:09.933

从 web.config 中的 DefaultConnectionString 中删除 AttachDbFileName

```
<add name="DefaultConnection" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=aspnet-GratifyGaming-20120917185558;Integrated Security=True" providerName="System.Data.SqlClient" /> 
```

调用 Global.asax.cs 中的 WebSecurity.InitialiseDatabase 方法

```
 public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {

        AreaRegistration.RegisterAllAreas();
        Database.SetInitializer<GratifyGamingContext>(new DatabaseInitializer()); 
        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
        AuthConfig.RegisterAuth();

        WebSecurity.InitializeDatabaseConnection(
                  connectionStringName: "DefaultConnection",
                  userTableName: "UserProfile",
                  userIdColumn: "UserID",
                  userNameColumn: "UserName",
                  autoCreateTables: true);
    }
} 
```

在 AccountController.cs 中注释掉 [InitializeSimpleMembership]

```
 [Authorize]
    //[InitializeSimpleMembership]
    public class AccountController : Controller 
```

# c# - 在 wp7 中使用转换器绑定图像

> ID：13207894
> 
> 赞同：0
> 
> 时间：2012-11-03T09:37:10.467
> 
> 标签：c#, windows-phone-7, xaml, windows-phone-7.1

我正在使用 VS2012 和 C#(Windows 8.0 SDK) 开发 Windows 手机应用程序，我是新手，我正在使用以下代码绑定 PNG 图像`Converter`

```
xmlns:myproject="clr-namespace:SolutionName.Converters"

 <UserControl.Resources>
    <myproject:LoginHistoryImageConverter x:Key="LoginHistoryImageConverter"/>
</UserControl.Resources>

<Grid x:Name="LayoutRoot" Background="{StaticResource pivotBackground}">
        <ListBox x:Name="listBoxLogs">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid MinWidth="480" Height="88" Margin="12,0,12,0" HorizontalAlignment="Stretch">
                        <Image Width="80" Height="80" Source="{Binding device, Converter={StaticResource LoginHistoryImageConverter}}"/>
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Left" Margin="85,0,0,0" VerticalAlignment="Center">
                            <TextBlock FontSize="25" Text="{Binding date}" Foreground="{StaticResource MessageListForeground}" HorizontalAlignment="Left"/>
                            <TextBlock FontSize="25" Text="{Binding ip_address}" Foreground="{StaticResource MessageListForeground}" HorizontalAlignment="Left" MaxWidth="200"/>
                        </StackPanel>
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,38,0">
                            <TextBlock FontSize="18" Text="{Binding time}" Foreground="{StaticResource MessageListForeground}" HorizontalAlignment="Right"/>
                            <TextBlock FontSize="18" Text="{Binding location}" Foreground="{StaticResource MessageListForeground}" HorizontalAlignment="Right" MaxWidth="200"/>
                        </StackPanel>
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid> 
```

你可以观察我正在绑定图片

```
<Image Width="80" Height="80" Source="{Binding device, Converter={StaticResource LoginHistoryImageConverter}}"/> 
```

通过使用转换器，我得到`device`字符串“M”或“PC”，我返回了`BitmapImage`

```
public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
        String text = (String)value;                        
        if (text.Equals("M"))
        {
            return new BitmapImage(new Uri("Resources/Assets/mobile.png",UriKind.Relative));
        }
        else
        {
            return new BitmapImage(new Uri("Resources/Assets/pc.png", UriKind.Relative));
        }
 } 
```

当我得到字符串时，`"M"`我需要显示`mobile`图像否则`PC`图像但是当我导航到我的页面时，它会触发`XamlParseException`at `"InitializeComponent()"`，请观察图像 ![在此处输入图像描述](../Images/86a0e18868cd53fcd4591b7e6749e3ea.png)

即使我尝试了下面的代码来绑定图像，但没有运气

```
<Image Width="80" Height="80">
    <Image.Source>
        <BitmapImage UriSource="{Binding device, Converter={StaticResource LoginHistoryImageConverter}}"/>
    </Image.Source>
</Image> 
```

我错过了什么。请帮我

完整的 XAML 代码

```
<phone:PhoneApplicationPage
    x:Class="SampleProject.Views.Settings.Logs.LoginHistory"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:myproject="clr-namespace:SampleProject.Converters"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    mc:Ignorable="d"
    shell:SystemTray.IsVisible="True">

    <UserControl.Resources>
        <myproject:LoginHistoryImageConverter x:Key="LoginHistoryImageConverter"/>
    </UserControl.Resources>

        <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="{StaticResource pivotBackground}">
        <ListBox x:Name="listBoxLogs">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid MinWidth="480" Height="88" Margin="12,0,12,0" HorizontalAlignment="Stretch">
                        <Image Width="80" Height="80" Source="{Binding device, Converter={StaticResource LoginHistoryImageConverter}}"/>
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Left" Margin="85,0,0,0" VerticalAlignment="Center">
                            <TextBlock FontSize="25" Text="{Binding date}" Foreground="{StaticResource MessageListForeground}" HorizontalAlignment="Left"/>
                            <TextBlock FontSize="25" Text="{Binding ip_address}" Foreground="{StaticResource MessageListForeground}" HorizontalAlignment="Left" MaxWidth="200"/>
                        </StackPanel>
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,38,0">
                            <TextBlock FontSize="18" Text="{Binding time}" Foreground="{StaticResource MessageListForeground}" HorizontalAlignment="Right"/>
                            <TextBlock FontSize="18" Text="{Binding location}" Foreground="{StaticResource MessageListForeground}" HorizontalAlignment="Right" MaxWidth="200"/>
                        </StackPanel>
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>

</phone:PhoneApplicationPage> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:40:44.117

首先，您提供的 XAML 代码存在一些问题。和资源没有定义`pivotBackground`，`MessageListForeground`但也许你在全局级别定义了它们，例如在 中`App.xaml`，在这种情况下它应该没问题。

否则，您的代码应该可以工作。您可以通过检查异常的详细信息来获取有关失败的确切原因的更多信息：当异常发生时，就像您在屏幕截图中显示的那样，单击“查看详细信息”，然后展开并检查`Message`和`InnerException`属性的值：

![在此处输入图像描述](../Images/dee918df8229e125d4d7cf843846889b.png)

# php - 无法通过 api 访问更新 Soundcloud 上的用户全名？

> ID：13207895
> 
> 赞同：1
> 
> 时间：2012-11-03T09:37:14.740
> 
> 标签：php, api, soundcloud

有人在使用 Soundcloud.com api 并尝试更新 user[full_name] 吗？！

我正在开发自己的 PHP 包装器，但我已经使用“官方支持”的 php 包装器进行了测试，但也没有运气。

'full_name' 是否可能是只读数据字段？！

```
<?php
require_once 'Services/Soundcloud.php';

// create a client object with access token
$client = new Services_Soundcloud('YOUR_CLIENT_ID', 'YOUR_CLIENT_SECRET');
// get authrization login
// authorize application, get the CODE here
// ...
// then set the oauth2_token to access 'private' aka logged-in-only resources
$client->setAccessToken('ACCESS_TOKEN');

// get the current user
$user = json_decode($client->get('me'));

// update the user's profile full_name
$user = json_decode($client->put('me', array(
'user[full_name]' => 'John Doe'
)));
print $user->full_name; 
```

当我运行这段代码时。我在我的 cURL 处理程序上收到一个 200 OK 的 HTTP 代码。但 soundcloud 上从未更新全名。我可以使用相同的代码更新“描述”或“城市”字段。

'full_name' 可能是只读的？！

Soundcloud 文档非常“有限”（由于缺少更好的词，英语不是我的母语），我在那儿（developers.soundcloud.com）找不到任何有关“不可更新”数据字段的信息。

提前感谢您的帮助，对不起我的英语不好。

# python - 如何在 Ubuntu 上获取 GTK3 (GI) 和 Python 3 中的剪贴板内容

> ID：13207897
> 
> 赞同：4
> 
> 时间：2012-11-03T09:37:22.970
> 
> 标签：python, ubuntu, python-3.x, pygtk, gtk3

在 Python 2 中，使用我的机器（Ubuntu 12.10）中安装的内容，我可以做到

```
import gtk
cb = gtk.clipboard_get()
content = cb.wait_for_text() 
```

从剪贴板中获取文本。

然而，在 Python3 中，我应该对 Gtk.Clipboard() 对象做同样的事情，但是我得到了一些似乎与小部件和类似的东西有关的错误，但是我的应用程序没有 GUI 并且不应该. 我在正确的轨道上吗？

```
>>> from gi.repository import Gtk
>>> cb = Gtk.Clipboard()
>>> content = cb.wait_for_text()
/usr/lib/python3/dist-packages/gi/types.py:47: Warning: g_object_get_data: assertion `G_IS_OBJECT (object)' failed
  return info.invoke(*args, **kwargs)

(.:10935): Gdk-CRITICAL **: gdk_display_get_default_screen: assertion `GDK_IS_DISPLAY (display)' failed

(.:10935): Gtk-CRITICAL **: gtk_invisible_new_for_screen: assertion `GDK_IS_SCREEN (screen)' failed
/usr/lib/python3/dist-packages/gi/types.py:47: Warning: invalid (NULL) pointer instance
  return info.invoke(*args, **kwargs)
/usr/lib/python3/dist-packages/gi/types.py:47: Warning: g_signal_connect_data: assertion `G_TYPE_CHECK_INSTANCE (instance)' failed
  return info.invoke(*args, **kwargs)

(.:10935): Gtk-CRITICAL **: gtk_widget_add_events: assertion `GTK_IS_WIDGET (widget)' failed
/usr/lib/python3/dist-packages/gi/types.py:47: Warning: g_object_set_data: assertion `G_IS_OBJECT (object)' failed
  return info.invoke(*args, **kwargs)
/usr/lib/python3/dist-packages/gi/types.py:47: Warning: g_object_set_qdata: assertion `G_IS_OBJECT (object)' failed
  return info.invoke(*args, **kwargs)

(.:10935): Gdk-CRITICAL **: gdk_display_get_default_screen: assertion `GDK_IS_DISPLAY (display)' failed

(.:10935): Gtk-CRITICAL **: gtk_invisible_new_for_screen: assertion `GDK_IS_SCREEN (screen)' failed

(.:10935): Gtk-CRITICAL **: gtk_widget_add_events: assertion `GTK_IS_WIDGET (widget)' failed

(.:10935): Gtk-CRITICAL **: gtk_widget_get_window: assertion `GTK_IS_WIDGET (widget)' failed

(.:10935): Gtk-CRITICAL **: gtk_selection_convert: assertion `GTK_IS_WIDGET (widget)' failed 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T00:36:17.197

您不仅仅是在处理 Python 2 和 Python 3 —— 事实上，在这种情况下，这无关紧要。重要的*是*第一个示例使用的是 GTK2 的 PyGTK，第二个示例使用的是 GTK3 的 PyGObject。

由于 GTK3 在 Python 中使用[gobject 自省](https://live.gnome.org/GObjectIntrospection)，因此在 PyGTK 中手动维护的一些魔法不存在。如果您查看[剪贴板的 C API，](http://developer.gnome.org/gtk/2.24/gtk-Clipboards.html)您将看到它`Gtk.Clipboard.get()`具有标识剪贴板所需的参数。这在[gtk_clipboard_get_for_display()](http://developer.gnome.org/gtk/2.24/gtk-Clipboards.html#gtk-clipboard-get-for-display)的参考资料中有解释。

长话短说，GTK3 中正确的代码更像是这样的：

```
from gi.repository import Gtk, Gdk
cb = Gtk.Clipboard.get(Gdk.SELECTION_CLIPBOARD)
content = cb.wait_for_text() 
```

# android - 滚动视图动画

> ID：13207904
> 
> 赞同：2
> 
> 时间：2012-11-03T09:39:01.267
> 
> 标签：android, android-layout, android-animation

我有一个`ScrollView`布局，其中我有一个子布局。我正在`ScrollView`使用`android:layoutAnimation="@anim/layout"`布局是`anim`文件的地方一个一个地加载每个布局。这是动画文件

```
 <layoutAnimation xmlns:android="http://schemas.android.com/apk/res/android"
     android:delay="200%"
     android:animation="@anim/slide_in_up" /> 
```

这是`slide_in_up`文件::

```
 <translate
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromYDelta="100%p"
    android:toYDelta="0"
    android:duration="@android:integer/config_longAnimTime" /> 
```

现在的问题是我想在滚动发生时应用相同的内容。作为用户滚动，所有布局都应该一个接一个地出现。我遇到了`Scroller`类，但我没有例子。有没有办法实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T06:54:46.010

考虑使用 Listview，而不是使用 Scrollview。在列表视图的源适配器实现中覆盖 getView(..) 并将所需的动画应用于该视图。这应该有帮助： [http ://rimkhong9.blogspot.jp/2012/07/androidlistviewlistview.html](http://rimkhong9.blogspot.jp/2012/07/androidlistviewlistview.html)

# python - 用于格式化 HTTP 响应字节的库

> ID：13207905
> 
> 赞同：0
> 
> 时间：2012-11-03T09:39:05.583
> 
> 标签：python, http, socketserver

我需要一个只能格式化正确 HTTP 响应的库（无需创建 Web 服务器，因为我已经有了这个）。

我必须将一个 http 响应的主体和一个内容类型传递给这个库。

如果我尝试发送 AJAX，以下功能将无法正常工作 - jQuery 未找到任何响应。但是，如果我在浏览器的 URL 字符串中键入相应的 URL，则会显示一个页面。

```
def response( data ):   
    return "HTTP/1.0 200 OK\r\nContent-Type:application/json\r\nConnection:close\r\n\r\n{0}\r\n".format( data ) 
```

**详情**。数据变量是json字符串。我还使用了 SocketServer 类，在 child 的 handle() 函数中调用 self.request.sendall( result_response )。

```
# the 'request handler' class
class StateRequestHandler( SocketServer.BaseRequestHandler ):

    def handle( self ):
    ...
        self.request.sendall( response( some_json ) )

# the configured server class
class StateServer( SocketServer.ThreadingMixIn, SocketServer.TCPServer ):
pass 
```

**解决了**。原因在于跨域请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:29:33.407

尝试以下操作：

1.  尽管 HTTP 1.0 和 1.1 规范说标头名称和标头值之间的空格是可选的，但规范确实说“首选单个 SP[ace]”。

2.  确保您没有任何跨域问题，因此请确保您的 HTML 页面完全从域、方案和端口作为您的 JSON 响应提供（除非您已正确配置 CORS.

3.  使用 Chrome 开发工具 / Firebug / Fiddler 查看他们发出的请求并检查 Javascript 控制台。

4.  使用 Wireshark 可以准确查看电线上的内容。

# entity-framework - 实体框架 SaveChanges “挂起”程序

> ID：13207907
> 
> 赞同：8
> 
> 时间：2012-11-03T09:39:13.327
> 
> 标签：entity-framework, freeze, savechanges

我的代码很简单：

```
Context.AddObject("EntitiesSetName", newObjectName);
Context.SaveChanges(); 
```

它工作得很好，但只有一次——第一次。那个时候，我在 SaveChanges() 被跟踪后用 Shift+F5 中断了我的程序。这是一个调试过程，所以我手动从数据库中删除了一条新创建的记录，并在调试模式下再次运行程序。但它不再起作用了——它在调用 SaveChanges() 时“挂起”。

我看到的另一件奇怪的事情是：如果我在 addObject() 和 SaveChanges() 之前编写，它们被称为：

```
var tempResult = (from mydbRecord in Context 
                  where Context.myKey == 123 
                  select mydbRecord.myKey).Count(); 
// 123 is the key value of the record that should be created before the program hangs. 
```

tempResult 将具有下一个值：1。

因此，似乎记录已创建（当程序挂起时）并且现在存在，但是当我使用其他工具手动检查数据库时 - 它没有！

我做错了什么？是某种缓存问题还是其他问题？

**编辑：**

我找到了问题的根源。这根本不是 EF 问题，而是我用来手动控制数据库的工具（Benthic）的问题。

当工具连接到同一个数据库时，我的程序与该工具陷入某种死锁（当我调用 SaveChanges() 时）。

所以，问题出在同步区域，恕我直言，所以我的问题可以标记为已解决。

# javascript - javascript 参考错误

> ID：13207909
> 
> 赞同：0
> 
> 时间：2012-11-03T09:39:31.933
> 
> 标签：javascript, settimeout

首先，我在加载图像时调用函数 reloadImage1，如下所示：

```
<img src="loading.gif" onload="reloadImage1(this,'newphoto.jpg')"> 
```

这是reloadImage1：

```
function reloadImage1(img,isrc)
{
    setTimeout("reloadImage2(img,isrc)",2000);
} 
```

这是reloadImage2：

```
function reloadImage2(img,isrc)
{
    img.removeAttribute("onload");
    img.src = isrc;
} 
```

执行 reloadImage1 时收到以下错误消息：

`ReferenceError: img is not defined`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T09:42:20.100

尝试更改`reloadImage1`为：

```
function reloadImage1(img, isrc) {
    setTimeout(function() {
        reloadImage2(img, isrc);
    }, 2000);
} 
```

检查这个**演示**：http: [//jsfiddle.net/MrATK/](http://jsfiddle.net/MrATK/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T09:45:36.810

在您的代码中：

```
> function reloadImage1(img,isrc) { 
```

*img*和*src*是函数的局部变量。

```
>     setTimeout("reloadImage2(img,isrc)",2000);
> } 
```

将字符串传递给 setTimeout 时，它在全局上下文中执行，它无法访问函数中的变量*img*和*src*。而是将具有闭包的函数传递给原始函数上下文，例如：

```
 setTimeout(function() {reloadImage2(img,isrc);}, 2000); 
```

# javascript - 在javascript中将setInterval赋予全局变量时如何更正clearInterval？

> ID：13207915
> 
> 赞同：0
> 
> 时间：2012-11-03T09:40:49.670
> 
> 标签：javascript, jquery, setinterval, clearinterval

这是我的代码

**HTML 代码**

```
<ul>
    <li>One</li>
    <li>Two</li>
    <li>Three</li>
    <li>Four</li>
</ul> 
```

以下是一段**Javascript**代码

```
//The below line is outside of document ready
var interval;

//The below code is wraped in  document ready
$("input").live("click", function(){

 var length = $('li').length, start = 1;
    alert(length+' : '+start);
    interval = setInterval(function() {
                    if (length > 0 && start <= length) {
                        alert('IF section');
                        $('li:nth-child('+start+')').
                           removeClass('hidden').addClass('visible');
                        start++;
                    } else {
                        alert('Else section with before clearInterval called');
                        clearInterval(interval);
                        alert('Else section with after clearInterval called');

                    }
}, 3000);

}); 
```

在方法执行后，这里`ELSE`的部分被重复调用。`clearInterval`一件有趣的事情是**alert** before`clearInterval`语句被重复调用，而**alert** after`clearInterval`没有在`setInterval`方法中调用。[你可以在fiddle](http://jsfiddle.net/QZxtL/)中找到一个例子。在 Fiddle`var interval`里面是 DomReady。它应该在 DomReady 之外。我不知道如何把它放在 DomReady 之外。

为什么会发生这种情况？

如何纠正这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:51:38.147

检查这个**演示**：http: [//jsfiddle.net/QZxtL/1/](http://jsfiddle.net/QZxtL/1/)

您需要做的就是将您的`clearInterval`呼叫更改为`clearInterval(interval);`

*注意*：我将间隔更改为 1000 毫秒以使测试更容易。:-)

# android - 相对布局：共享屏幕高度

> ID：13207925
> 
> 赞同：1
> 
> 时间：2012-11-03T09:42:44.377
> 
> 标签：android, share, android-relativelayout

这是我的xml：

```
<RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                >

            <LinearLayout android:layout_alignParentTop="true"
                          android:layout_height="wrap_content"
                          android:layout_width="fill_parent"
                          android:id="@+id/llRow1" />
            <LinearLayout android:layout_height="wrap_content"
                          android:layout_width="fill_parent"
                          android:layout_below="@+id/llRow1"
                          android:id="@+id/llRow2" />
            <LinearLayout android:layout_alignParentBottom="true"
                          android:layout_height="wrap_content"
                          android:layout_width="fill_parent"
                          android:id="@+id/llRow3" >
</RelativeLayout> 
```

我想要的是： - 这 3 个“行”必须共享屏幕的高度 - 但还有一个额外的：当我将第三行 (llRow3) 可见性设置为 GONE 时，只有 row1 和 row2 必须共享屏幕高度。

怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T09:45:52.167

为所有这些设置一个相同`layout_weight`的值。因此，如果您将第三个的可见性设置为 GONE，它们仍将具有这些权重。编辑：将 ParentLayout 更改为 LinearLayout，或者如果您需要 RelitiveLayout，那么您可以将这三个 LinearLayout 包装在另一个 LinearLayout 中并为它们设置权重，如下所示：

```
 <RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:id="@+id/llRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_weight="1" />

        <LinearLayout
            android:id="@+id/llRow2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/llRow1"
            android:layout_weight="1" />

        <LinearLayout
            android:id="@+id/llRow3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_weight="1" >
        </LinearLayout>
    </LinearLayout>

</RelativeLayout> 
```

# javascript - JavaScript中多个case的switch语句

> ID：13207927
> 
> 赞同：995
> 
> 时间：2012-11-03T09:43:09.950
> 
> 标签：javascript, switch-statement

我在 JavaScript 中的 switch 语句中需要多个案例，例如：

```
switch (varName)
{
   case "afshin", "saeed", "larry":
       alert('Hey');
       break;

   default:
       alert('Default case');
       break;
} 
```

我怎样才能做到这一点？如果没有办法在 JavaScript 中做类似的事情，我想知道一个也遵循[DRY 概念](http://c2.com/cgi/wiki?DontRepeatYourself)的替代解决方案。

* * *

## 回答 #1

> 赞同：2005
> 
> 时间：2012-11-03T09:44:45.347

`switch`使用语句的贯穿功能。匹配的 case 将一直运行，直到找到 a `break`（或`switch`语句的结尾），所以你可以这样写：

```
switch (varName)
{
   case "afshin":
   case "saeed":
   case "larry": 
       alert('Hey');
       break;

   default: 
       alert('Default case');
} 
```

* * *

## 回答 #2

> 赞同：136
> 
> 时间：2016-01-17T02:15:47.203

这适用于常规 JavaScript：

```
function theTest(val) {
  var answer = "";
  switch( val ) {
    case 1: case 2: case 3:
      answer = "Low";
      break;
    case 4: case 5: case 6:
      answer = "Mid";
      break;
    case 7: case 8: case 9:
      answer = "High";
      break;
    default:
      answer = "Massive or Tiny?";
  }
  return answer;
}

theTest(9); 
```

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2012-11-03T09:55:30.693

这是完全避免该`switch`声明的不同方法：

```
var cases = {
  afshin: function() { alert('hey'); },
  _default: function() { alert('default'); }
};
cases.larry = cases.saeed = cases.afshin;

cases[ varName ] ? cases[ varName ]() : cases._default(); 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2012-11-03T09:53:39.533

在 Javascript 中，要在一个 switch 中分配多个 case，我们必须定义`different case without break inbetween`如下：

```
 <script>
      function checkHere(varName){
        switch (varName)
           {
           case "saeed":
           case "larry":
           case "afshin":
                alert('Hey');
                break;
          case "ss":
               alert('ss');
               break;
         default:
               alert('Default case');
               break;
       }
      }
     </script> 
```

请看示例点击[链接](http://jsfiddle.net/kS5M5/)

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2020-02-04T00:16:57.083

为了清晰和[DRY](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)语法，我喜欢这个。

```
varName = "larry";

switch (true)
{
    case ["afshin", "saeed", "larry"].includes(varName) :
       alert('Hey');
       break;

    default:
       alert('Default case');

} 
```

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2013-07-30T20:11:09.417

如果你使用 ES6，你可以这样做：

```
if (['afshin', 'saeed', 'larry'].includes(varName)) {
   alert('Hey');
} else {
   alert('Default case');
} 
```

或者对于早期版本的 JavaScript，您可以这样做：

```
if (['afshin', 'saeed', 'larry'].indexOf(varName) !== -1) {
   alert('Hey');
} else {
   alert('Default case');
} 
```

请注意，这在较旧的 IE 浏览器中不起作用，但您可以很容易地修补。有关更多信息，请参阅问题[确定字符串是否在 javascript 中的列表中](https://stackoverflow.com/questions/2430000/determine-if-string-is-in-list-in-javascript)。

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2020-01-07T13:46:45.007

我的情况类似于：

```
switch (text) {
  case SOME_CONSTANT || ANOTHER_CONSTANT:
    console.log('Case 1 entered');

  break;

  case THIRD_CONSTANT || FINAL_CONSTANT:
    console.log('Case 2 entered');

  break;

  default:
    console.log('Default entered');
} 
```

案件`default`总是*进入*。如果您遇到类似的多案例 switch 语句问题，您正在寻找这个：

```
switch (text) {
  case SOME_CONSTANT:
  case ANOTHER_CONSTANT:
    console.log('Case 1 entered');

  break;

  case THIRD_CONSTANT:
  case FINAL_CONSTANT:
    console.log('Case 2 entered');

  break;

  default:
    console.log('Default entered');
} 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2017-12-06T15:10:05.383

添加和澄清[Stefano 的答案](https://stackoverflow.com/questions/13207927/switch-statement-multiple-cases-in-javascript/47677502#47677502)，您可以使用表达式来动态设置 switch 中条件的值，例如：

```
var i = 3
switch (i) {
    case ((i>=0 && i<=5) ? i : -1):
        console.log('0-5');
        break;

    case 6: console.log('6');
} 
```

因此，在您的问题中，您可以执行以下操作：

```
var varName = "afshin"
switch (varName) {
    case (["afshin", "saeed", "larry"].indexOf(varName)+1 && varName):
      console.log("hey");
      break;

    default:
      console.log('Default case');
} 
```

虽然它是如此[干燥](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)......

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2015-09-01T09:12:30.363

在 Node.js 中，您似乎可以这样做：

```
data = "10";
switch(data){
    case "1": case "2": case "3": // Put multiple cases on the same
                                  // line to save vertical space.
        console.log("small");
        break;

    case "10": case "11": case "12":
        console.log("large");
        break;

    default:
        console.log("strange");
        break;
} 
```

在某些情况下，这使得代码更加紧凑。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2018-02-21T12:40:49.600

我这样使用它：

```
switch (true){
     case /Pressure/.test(sensor): 
     {
        console.log('Its pressure!');
        break;
     }

     case /Temperature/.test(sensor): 
     {
        console.log('Its temperature!');
        break;
     }
} 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2014-09-06T12:51:28.440

您可以使用“ **in** ”运算符...
它依赖于对象/哈希调用，因此它与 JavaScript 一样快。

```
// Assuming you have defined functions f(), g(a) and h(a,b)
// somewhere in your code,
// you can define them inside the object, but...
// the code becomes hard to read. I prefer it this way.

o = { f1:f, f2:g, f3:h };

// If you use "STATIC" code can do:
o['f3']( p1, p2 )

// If your code is someway "DYNAMIC", to prevent false invocations
// m brings the function/method to be invoked (f1, f2, f3)
// and you can rely on arguments[] to solve any parameter problems.
if ( m in o ) o[m]() 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2016-03-10T16:07:00.573

**这取决于。** [Switch](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/switch)评估一次且仅一次。在匹配时，无论 case 说什么，直到“break”的所有后续 case 语句都会触发。

```
var onlyMen = true;
var onlyWomen = false;
var onlyAdults = false;

 (function(){
   switch (true){
     case onlyMen:
       console.log ('onlymen');
     case onlyWomen:
       console.log ('onlyWomen');
     case onlyAdults:
       console.log ('onlyAdults');
       break;
     default:
       console.log('default');
   }
})(); // returns onlymen onlywomen onlyadults
```

```
<script src="https://getfirebug.com/firebug-lite-debug.js"></script>
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2021-06-25T10:30:23.260

一些有趣的方法。对我来说，最好的解决方法是使用`.find`.

您可以通过在 find 函数中使用合适的名称来指示多种情况。

```
switch (varName)
{
   case ["afshin", "saeed", "larry"].find(firstName => firstName === varName):
       alert('Hey');
       break;

   default:
       alert('Default case');
       break;
} 
```

其他答案更适合给定的示例，但是如果您对我有多种情况，这是最好的方法。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-09-23T15:30:07.487

我可以看到这里有很多很好的答案，但是如果我们需要检查超过 10 个案例会发生什么？这是我自己的方法：

```
 function isAccessible(varName){
     let accessDenied = ['Liam', 'Noah', 'William', 'James', 'Logan', 'Benjamin',
                        'Mason', 'Elijah', 'Oliver', 'Jacob', 'Daniel', 'Lucas'];
      switch (varName) {
         case (accessDenied.includes(varName) ? varName : null):
             return 'Access Denied!';
         default:
           return 'Access Allowed.';
       }
    }

    console.log(isAccessible('Liam')); 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-02-25T14:28:04.180

上述方法的问题在于，`case`每次调用具有`switch`. 一个更强大的解决方案是拥有一个**地图**或**字典**。

这是一个例子：

```
// The Map, divided by concepts
var dictionary = {
  timePeriod: {
    'month': [1, 'monthly', 'mensal', 'mês'],
    'twoMonths': [2, 'two months', '2 months', 'bimestral', 'bimestre'],
    'trimester': [3, 'trimesterly', 'quarterly', 'trimestral'],
    'semester': [4, 'semesterly', 'semestral', 'halfyearly'],
    'year': [5, 'yearly', 'annual', 'ano']
  },
  distance: {
    'km': [1, 'kms', 'kilometre', 'kilometers', 'kilometres'],
    'mile': [2, 'mi', 'miles'],
    'nordicMile': [3, 'Nordic mile', 'mil (10 km)', 'Scandinavian mile']
  },
  fuelAmount: {
    'ltr': [1, 'l', 'litre', 'Litre', 'liter', 'Liter'],
    'gal (imp)': [2, 'imp gallon', 'imperial gal', 'gal (UK)'],
    'gal (US)': [3, 'US gallon', 'US gal'],
    'kWh': [4, 'KWH']
  }
};

// This function maps every input to a certain defined value
function mapUnit (concept, value) {
  for (var key in dictionary[concept]) {
    if (key === value ||
      dictionary[concept][key].indexOf(value) !== -1) {
      return key
    }
  }
  throw Error('Uknown "'+value+'" for "'+concept+'"')
}

// You would use it simply like this
mapUnit("fuelAmount", "ltr") // => ltr
mapUnit("fuelAmount", "US gal") // => gal (US)
mapUnit("fuelAmount", 3) // => gal (US)
mapUnit("distance", "kilometre") // => km

// Now you can use the switch statement safely without the need
// to repeat the combinations every time you call the switch
var foo = 'monthly'
switch (mapUnit ('timePeriod', foo)) {
  case 'month':
    console.log('month')
    break
  case 'twoMonths':
    console.log('twoMonths')
    break
  case 'trimester':
    console.log('trimester')
    break
  case 'semester':
    console.log('semester')
    break
  case 'year':
    console.log('year')
    break
  default:
    throw Error('error')
}
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-05-06T00:33:41.747

你可以这样做：

```
alert([
  "afshin", 
  "saeed", 
  "larry",
  "sasha",
  "boby",
  "jhon",
  "anna",
  // ...
].includes(varName)? 'Hey' : 'Default case') 
```

或者只是一行代码：

```
alert(["afshin", "saeed", "larry",...].includes(varName)? 'Hey' : 'Default case') 
```

埃里克的回答有一点改进

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-07-11T14:54:50.773

一种可能的解决方案是：

```
const names = {
afshin: 'afshin',
saeed: 'saeed',
larry: 'larry'
};

switch (varName) {
   case names[varName]: {
       alert('Hey');
       break;
   }

   default: {
       alert('Default case');
       break;
   }
} 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2018-01-09T22:37:46.843

*在函数内部时，在switch*语句中执行多个案例的另一种方法：

```
function name(varName){
  switch (varName) {
     case 'afshin':
     case 'saeed':
     case 'larry':
       return 'Hey';
     default:
       return 'Default case';
   }
}

console.log(name('afshin')); // Hey
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2021-09-07T13:17:32.943

# 更清洁的处理方式

```
if (["triangle", "circle", "rectangle"].indexOf(base.type) > -1)
{
    //Do something
}else if (["areaMap", "irregular", "oval"].indexOf(base.type) > -1)
{
    //Do another thing
} 
```

您可以对具有相同结果的多个值执行此操作

* * *

## 回答 #20

> 赞同：-2
> 
> 时间：2015-12-16T10:02:56.583

只需更改*开关*条件方法：

```
switch (true) {
    case (function(){ return true; })():
        alert('true');
        break;
    case (function(){ return false; })():
        alert('false');
        break;
    default:
        alert('default');
} 
```

* * *

## 回答 #21

> 赞同：-4
> 
> 时间：2015-10-05T09:07:09.233

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Example1</title>
    <link rel="stylesheet" href="css/style.css" >
    <script src="js/jquery-1.11.3.min.js" type="text/javascript"></script>
    <script>
        function display_case(){
            var num =   document.getElementById('number').value;

                switch(num){

                    case (num = "1"):
                    document.getElementById("result").innerHTML = "You select day Sunday";
                    break;

                    case (num = "2"):
                    document.getElementById("result").innerHTML = "You select day  Monday";
                    break;

                    case (num = "3"):
                    document.getElementById("result").innerHTML = "You select day  Tuesday";
                    break;

                    case (num = "4"):
                    document.getElementById("result").innerHTML = "You select day  Wednesday";
                    break;

                    case (num = "5"):
                    document.getElementById("result").innerHTML = "You select day  Thusday";
                    break;

                    case (num = "6"):
                    document.getElementById("result").innerHTML = "You select day  Friday";
                    break;

                    case (num = "7"):
                    document.getElementById("result").innerHTML = "You select day  Saturday";
                    break;

                    default:
                    document.getElementById("result").innerHTML = "You select day  Invalid Weekday";
                    break
                }

        }
    </script>
</head>
<body>
    <center>
        <div id="error"></div>
        <center>
            <h2> Switch Case Example </h2>
            <p>Enter a Number Between 1 to 7</p>
            <input type="text" id="number" />
            <button onclick="display_case();">Check</button><br />
            <div id="result"><b></b></div>
        </center>
    </center>
</body> 
```

* * *

## 回答 #22

> 赞同：-4
> 
> 时间：2016-02-24T11:37:49.970

你可以这样写：

```
switch (varName)
{
   case "afshin": 
   case "saeed": 
   case "larry": 
       alert('Hey');
       break;

   default: 
       alert('Default case');
       break;
} 
```

* * *

## 回答 #23

> 赞同：-6
> 
> 时间：2019-11-21T07:29:52.687

对我来说这是最简单的方法：

```
switch (["afshin","saeed","larry"].includes(varName) ? 1 : 2) {
   case 1:
       alert('Hey');
       break;

   default:
       alert('Default case');
       break;
} 
```

# c# - jQuery 自动完成显示未定义的值，而 WebService 正在返回正确的数据

> ID：13207931
> 
> 赞同：0
> 
> 时间：2012-11-03T09:43:48.397
> 
> 标签：c#, asp.net, ajax, web-services

```
$(function() {
$(".tb").autocomplete({
    source: function(request, response) {
        $.ajax({
        url: "MyService.asmx/GetCompletionList",
        data: "{ 'prefixText': '" + request.term + "' }",
            dataType: "json",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataFilter: function(data) { return data; },
            success: function(data) {
                response($.map(data.d, function(item) {
                    return {
                        value: item.Email
                    }
                }))
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                alert(textStatus);
            }
        });
    },
    minLength: 1
}); 
```

});

这是我的 jQuery 代码和`WebService`方法。谁能帮我？。`GetCompletionList` `WebService`方法返回字符串列表，但在`TextBox`显示`undefined`所有值 时自动完成

```
public List<string> GetCompletionList(string prefixText)
{
    RegistrationBAL _rbal = new RegistrationBAL(SessionContext.SystemUser);
    DataSet ds = new DataSet();
    _rbal.LoadByContextSearch(ds, prefixText);

    List<string> myList = new List<string>();
    foreach (DataRow row in ds.Tables[0].Rows)
    {
        myList.Add((string)row[0]);
    }
    return myList.ToList();       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:56:43.600

尝试改变ajax调用中的数据如下

如果为 asp 控件完成了自动完成

```
 data: "{'prefixText':'" + document.getElementById("<%= ContactName.ClientID %>").value + "'}", 
```

否则给出如下

```
data: "{'prefixText':'" + document.getElementById("requiredID").value + "'}", 
```

自动完成工作的编辑答案

```
function SearchText() {
    $(".autosuggest").autocomplete({
        source: function (request, response) {
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: "AutoCompleteService.asmx/GetAutoCompleteData",
                data: "{'PhoneContactName':'" + document.getElementById("<%= ContactName.ClientID %>").value + "'}",
                dataType: "json",
                success: function (data) {
                    response(data.d);
                },
                error: function (result) {
                    //alert("Error");
                }
            });
        }
    });
} 
```

这类似于您的 ajax 函数，但在服务器端，我使用了 Web 服务，如下所示，从数据库中获取值

```
public class AutoCompleteService : System.Web.Services.WebService
{
    [WebMethod]
    public List<string> GetAutoCompleteData(string PhoneContactName)
    {
        List<string> result = new List<string>();
        string QueryString;
        QueryString = System.Configuration.ConfigurationManager.ConnectionStrings["Admin_raghuConnectionString1"].ToString();

        using (SqlConnection obj_SqlConnection = new SqlConnection(QueryString))
        {
            using (SqlCommand obj_Sqlcommand = new SqlCommand("select DISTINCT PhoneContactName from PhoneContacts where PhoneContactName LIKE +@SearchText+'%'", obj_SqlConnection))
            {
                obj_SqlConnection.Open();
                obj_Sqlcommand.Parameters.AddWithValue("@SearchText", PhoneContactName);
                SqlDataReader obj_result = obj_Sqlcommand.ExecuteReader();
                while (obj_result.Read())
                {
                    result.Add(obj_result["PhoneContactName"].ToString().TrimEnd());
                }
                return result;
            }
        }
    }

} 
```

..希望这会有所帮助：D

# php - 如何检查 scandir() 是否返回任何错误或警告？

> ID：13207932
> 
> 赞同：1
> 
> 时间：2012-11-03T09:44:04.293
> 
> 标签：php, file-io

> **可能重复：**
> [检查PHP中是否存在目录](https://stackoverflow.com/questions/746672/check-whether-a-directory-exists-in-php)

我正在尝试 scandir() 检查目录的内容并使用 javascript 发送路径参数并尝试在#container div 中加载内容：

```
$("#container").load("fetch_images.php?path="+pathvariable); 
```

在 fetch_images.php 我试图`scandir($_GET['pathvariable'])`扫描给定目录的元素。我的问题是，如果没有使用 $_GET['pathvariable'] 提供正确的路径，页面会显示一些警告和错误。

尝试扫描喜欢`$files_dir_results = scandir($path);`并使用`foreach()`来显示数组的所有结果。

我不想在输出页面上显示任何类型的警告或错误。我知道我可以禁用 PHP 警告，但我更喜欢任何更好的选择。

我不知道如何检查 scandir() 是否正在返回任何错误或警告。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T09:48:24.847

我建议您首先检查目录是否存在`is_dir()`. 然后，如果目录存在，请执行`scandir()`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-03T09:49:50.753

[您应该首先使用is_dir](http://php.net/manual/en/function.is-dir.php)检查路径是否有效，然后对其进行扫描

```
$images = array();
$valid_images = array('jpg','png','gif');
if(is_dir($_GET['path'])){
  foreach(scandir($_GET['path']) as $file){
    $ext = pathinfo($file, PATHINFO_EXTENSION);
    if(in_array($ext, $valid_images)){
      array_push($images, $file);
    }   
 }
}

echo json_encode($images); 
```

# silverlight - 在silverlight中调用Required？

> ID：13207933
> 
> 赞同：2
> 
> 时间：2012-11-03T09:44:08.497
> 
> 标签：silverlight, invoke, multithreading, begininvoke, invokerequired

SilverLight 中是否有与`Control.InvokeRequired`Winforms 相同的东西？

我已经发现 Winforms Invoke 相当于`Control.Dispatcher.BeginInvoke`但我找不到类似的东西`InvokeRequired`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:51:16.360

以下扩展方法非常有用

```
public static bool InvokeRequired(this FrameworkElement element)
{
    return !element.Dispatcher.CheckAccess();
}
public static void Invoke(this FrameworkElement element, Action action)
{
    if (element.InvokeRequired())
    {
        using (AutoResetEvent are = new AutoResetEvent(false))
        {
            Deployment.Current.Dispatcher.BeginInvoke(() =>
            {
                action.Invoke();
                are.Set();
            });
            are.WaitOne();
        }
    }
    else
        action.Invoke();
} 
```

# sql-server-2008 - SQL 合并语句

> ID：13207935
> 
> 赞同：2
> 
> 时间：2012-11-03T09:44:18.373
> 
> 标签：sql-server-2008

我正在尝试在 SQL Server 2008 中使用新的“MERGE”语句。该语句将从临时表中获取记录并在其他表中更新相同的记录。语句如下：

```
create table #TempTable(ProcPOAmdDel_ProcessAmendmentId bigint,ProcPOAmdDel_SemiFinProdId bigint,ProcPOAmdDel_ChallanQty int)

MERGE PurProcessPOAmendmentDelivery AS pod
USING (SELECT ProcPOAmdDel_ProcessAmendmentId,
       ProcPOAmdDel_SemiFinProdId FROM #TempTable ) AS temp
ON pod.ProcPOAmdDel_ProcessAmendmentId = temp.ProcPOAmdDel_ProcessAmendmentId AND 
   pod.ProcPOAmdDel_SemiFinProdId=temp.ProcPOAmdDel_SemiFinProdId 
WHEN MATCHED THEN UPDATE 
  SET pod.ProcPOAmdDel_ChallanQty = temp.ProcPOAmdDel_ChallanQty; 
```

在运行状态时我遇到了一个错误 Invalid column name'ProcPOAmdDel_ChallanQty'。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:09:16.277

在源表中包括列 ProcPOAmdDel_ChallanQty，即 temp

```
MERGE PurProcessPOAmendmentDelivery AS pod
USING (SELECT ProcPOAmdDel_ProcessAmendmentId,
              rocPOAmdDel_SemiFinProdId,
              ProcPOAmdDel_ChallanQty
       FROM #TempTable ) AS temp
ON pod.ProcPOAmdDel_ProcessAmendmentId = temp.ProcPOAmdDel_ProcessAmendmentId AND 
pod.ProcPOAmdDel_SemiFinProdId=temp.ProcPOAmdDel_SemiFinProdId 
WHEN MATCHED THEN 
UPDATE SET pod.ProcPOAmdDel_ChallanQty = temp.ProcPOAmdDel_ChallanQty; 
```

# php - Plesk API 和 cURL 不起作用

> ID：13207937
> 
> 赞同：1
> 
> 时间：2012-11-03T09:44:41.250
> 
> 标签：php, api, curl, fastcgi, plesk

我有一个脚本，它使用 Plesk API 创建 FTP 帐户。在我们搬到新供应商的新 VPS 之前，该脚本运行良好。

该脚本不再起作用，我收到如下错误：

cURL 错误号：7 cURL 错误：无法连接到 xx.xx.xxx.xxx 权限被拒绝。

似乎 cURL 不起作用。我尝试的是在 PLESK 中将 php 支持从 fastCGI 更改为 Apache 模块，错误消息消失了，但是 PLESK API 什么也没做，尽管页面的加载时间比我使用 fastCGI 时长得多，所以看起来像它做某事。

我还在防火墙中添加了端口 8443 用于传入和传出。

我正在使用 PLESK 11，我的脚本看起来像这样。

```
// Plesk login gegevens
$host   = "**********";
$login  = "**********";
$pass   = "**********";
$port   = 8443;

// Maak de FTP map aan
$data =<<<EOF
<packet version="1.6.3.5">
<ftp-user>
<add>
<name>John</name>
<password>Doe1234</password>
<home>/private/John_Doe/</home>
<create-non-existent>true</create-non-existent>
<webspace-id>1</webspace-id>
</add>
</ftp-user>
</packet>

EOF;

sendCommand($data, $login, $pass, $host, $port);

function write_callback($ch, $data) 
{
    // echo $data;
    return strlen($data);
}

function sendCommand($data, $login, $passwd, $host, $port=8443) 
{
    echo $data;

    $script = "enterprise/control/agent.php";
    $url = "https://$host:$port/$script";
    $headers = array(
    "HTTP_AUTH_LOGIN: $login",
    "HTTP_AUTH_PASSWD: $passwd",
    "HTTP_PRETTY_PRINT: TRUE",
    "Content-Type: text/xml",
    );

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_HTTPHEADER, &$headers);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_WRITEFUNCTION, 'write_callback');
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    curl_setopt($ch, CURLOPT_VERBOSE, 1);
    $result = curl_exec($ch);

    if (!$result) 
    {
         echo "\n\n-------------------------\ncURL error number:".curl_errno($ch);
         echo "\n\ncURL error:".curl_error($ch);
    }

    curl_close($ch);
    return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T22:29:21.723

我不是 plesk 或 linux 人，但我想在这次讨论中贡献我的一份力量，

> 我有一个脚本，它使用 Plesk API 创建 FTP 帐户。在我们搬到新供应商的新 VPS 之前，该脚本运行良好。

该声明清楚地表明问题不在于您的代码，而在于您的 VPS。

可能有问题！

1)通过 API-RPC 更新 Parallels Panel 的**客户端权限**，尝试使用管理员凭据。

发现问题：plesk 9.2。所以它可能会在下一个版本中修复，但我不确定。[资源](http://kb.parallels.com/en/7075)

2）检查SElinux是否被禁用，如果没有禁用它并检查。您的下一个问题一定是，如何**禁用 SElinux**。答案在这里有[据可查](http://www.crypt.gen.nz/selinux/disable_selinux.html)

3) 您应该安装**mod_suphp**并按照我们的教程进行操作。在这里查看[更多信息](http://forum.parallels.com/showthread.php?t=100101)。

我只是在上面总结，很少有人认为希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:58:01.633

我不确定，但请参阅下面的 URL，我认为这对您很有帮助。

**Plesk API 中的异常 HTTP 标头**

根据TRiG[的 Plesk API 中的 Unusual HTTP 标头](https://stackoverflow.com/questions/11228046/unusual-http-headers-in-the-plesk-api)

**或阅读**

下面根据上面的 URL**由 rdo**回答

1.  Plesk 使用自己的标题。在自定义 http 请求中，您可以添加任何有效的标头，例如一些网络服务器添加自己的标头，例如“由：xxxx 提供支持”，所以没关系。

2.  漂亮的 xml 输出需要漂亮的打印头。

3.  HTTP_AUTH_LOGIN 标头包含面板用户登录。HTTP_AUTH_PASSWD 标头包含面板用户密码。CURLOPT_USERPWD 不是必需的。

4.  尝试使用这些选项： $ch = curl_init();

    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);

    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

    curl_setopt($ch, CURLOPT_URL, $url);

    curl_setopt($ch, CURLOPT_ENCODING, 'UTF-8');

    curl_setopt($ch, CURLOPT_POSTFIELDS, $packet);

    curl_setopt($ch, CURLOPT_TIMEOUT, 1200); //等待20分钟

    $response = curl_exec($ch);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:58:06.907

假设您记得更改主机，移动后是否重新创建了您的 plesk 用户和密码？尝试使用脚本中的凭据直接在 VPS 上登录 plesk，以确保帐户正常。

# android - 如何在Google play上获取apk文件的安装链接

> ID：13207943
> 
> 赞同：0
> 
> 时间：2012-11-03T09:45:14.977
> 
> 标签：android, url, google-play

我想在谷歌市场上获取 apk 的位置。那可能吗 ？

**编辑**

我想限制互联网（路由器）只安装应用程序，我不想让互联网打开其他网站。如果我使用应用程序链接，安装应用程序时安装链接与应用程序链接不同，因此该链接将被阻止。

如何允许互联网路由器只打开应用程序 apk 文件。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:50:04.370

如果这是您所追求的，您无法获取存储在 Google 服务器上的 apk 文件本身的 url。这将是出于安全原因，也因为可能不只是一个副本（冗余、分布式服务器、扩展等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:58:53.390

您无法获取安装 URL。以下几点照顾我的市场

*   如果申请付款怎么办？
*   计数器 有多少下载？
*   设备支持（屏幕或 API）
*   国家支持

但是您可以在 Market 上获取您的应用程序的 URL，这是链接`"market://details?id=" + YOUR_PACKAGE_NAME`

*注意：这个东西通常用于应用程序内的应用程序评级。*

# java - 没有 .jnlp 文件可以存在 java web start 应用程序吗？

> ID：13207945
> 
> 赞同：0
> 
> 时间：2012-11-03T09:45:17.457
> 
> 标签：java, java-web-start

正如 Java Web Start 中所解释的，[Java Web](http://en.wikipedia.org/wiki/Java_Web_Start) Start 应用程序似乎需要一个 .jnlp 文件。我的应用程序没有单个 .jnlp 文件。我的应用程序几乎没有`main()`像`run()`每个班级那样。任何人都可以在没有 main 和 JNLP 文件的情况下解释 Web Start 的工作原理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T09:50:50.737

> 任何人都可以在没有 main() 和 .jnlp 文件的情况下解释网络启动是如何工作的吗？

如果没有.jnlp 文件，它就*无法工作。*您必须提供一个 .jnlp 文件，还必须提供一个 main() 方法或一个可以启动的 Applet 类。

# csv - 附加 CSV 文件，其中列以不同的顺序

> ID：13207953
> 
> 赞同：0
> 
> 时间：2012-11-03T09:46:52.103
> 
> 标签：csv, utf-8, append, libreoffice

我需要通过附加每个源文件中的行来定期将来自多个 CSV 文件的数据合并到一个电子表格中。只有 OpenOffice/LibreOffice 能够读取 UTF-8 CSV 文件，该文件具有包含换行符的引号分隔字段。

现在，每个 CSV 文件都有列标题，但列的顺序因文件而异。有些文件还缺少列，有些文件有额外的列。

我有列名的主列表，以及我希望它们全部排列的顺序。解决这个问题的最佳方法是什么？LibreOffice 可以正确解析 CSV（Excel 肯定不会）。最终，这些文件都将进入一个合并的电子表格。除了列顺序之外，每个源文件中的每一行都必须保持完整。

这些步骤最终也需要交给非技术第三方，所以我正在寻找一种不会提供太多非专家技术障碍的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T12:11:54.750

好的，我正在以不同的方式解决这个问题。相反，我返回到源应用程序 (WooCommerce) 来修复导出，因此电子表格在每次导出时都以相同的顺序列出了所有相同的列。这确实有我需要跟进的其他后果，例如管理补丁和尝试让源项目接受更改。但它确实避免了必须在 CSV 文件中附加不匹配的列，这似乎是一个常见的问题，没有人有任何真正的解决方案（是的，我已经搜索了很多）。

# html - Html5验证成功后调用函数

> ID：13207954
> 
> 赞同：2
> 
> 时间：2012-11-03T09:47:04.500
> 
> 标签：html

我有一些文本框和一个提交按钮。我已经使用了 HTML5 的“必需”验证。它工作正常。现在，当 HTML5 验证未发现任何错误时，我想在按钮单击中调用一个函数。当未提供必填字段时，单击按钮将不会调用该函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T10:49:58.403

您可以使用`form.onsubmit`处理程序。假设表单的 ID 是`form`：

```
var form = document.getElementById("form");
form.onsubmit = function() {
    //Pre-submission validation.

    //Return true or false based on whether the validation passed.
    //return false will prevent the submission the form.
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T10:57:33.860

你需要一些额外的帮助才能做到这一点，它可能是纯 javascript 的形式。就个人而言，我会使用 jQuery 来提供帮助，因为它会让您的事情变得更容易，并考虑到任何跨浏览器的一致性。想不想用jQuery是你的选择，是否只适合这个是另外一个话题，下面的例子只是一个示范。

这是一个使用 jQuery 实现验证侦听功能的假设示例：

HTML

```
<form>
    <input type="text" class="input-text" required>
    <input type="text" class="input-text" required>
    <input type="submit" id="submit" class="input-button" disabled>
</form> 
```

​ JS

```
$textInputs = $('input.input-text');
$textInputs.on('keyup', function() {
    var $validTextInputs = $('input.input-text:valid'),
        $submit = $('#submit');
    console.log($textInputs.length, $validTextInputs.length);
    if($textInputs.length === $validTextInputs.length){
        //all text fields are valid
        $submit.attr('disabled', null);
    } else {
        //not all text fields are valid
        $submit.attr('disabled', '');
    }
});​ 
```

CSS（仅让我们在视觉上知道输入何时有效）

```
.input-text:valid {
    background: green;
}​ 
```

请参阅此处的示例：http: [//jsfiddle.net/m6QXc/](http://jsfiddle.net/m6QXc/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-03T14:14:02.370

HTML5表单验证后使用jquery触发函数

```
 <form id="myForm">
       <input type="text" class="input-text" required>
       <input type="submit" id="submit" class="input-button" disabled>
    </form>

    $("myForm").submit(function(){
        // Your code    
     }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T10:40:39.890

好吧，你可以试试这个：[fiddle example](http://jsfiddle.net/e6Hf7/73/)根据需要扩展它，虽然使用了jQuery。你可以在里面添加任何你想要的东西：

```
 $('#exampleForm').submit(function(e){     
          e.preventDefault();     

          // here you can call your own js methods, send form with ajax? 
          // or what ever you want
      }); 
```

# swing - Swing 更改 JScrollPane 内容

> ID：13207955
> 
> 赞同：2
> 
> 时间：2012-11-03T09:47:16.697
> 
> 标签：swing, jscrollpane

嗨，我正在尝试更改`JScrollPane`内容，例如

```
scrollPanel = new JScrollPane(new Welcome().display());

        for(final JMenuItem i : items) {
            i.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e) {
                    String txt = i.getText();

                    if(txt.equals("Open")) {
                        scrollPanel = new JScrollPane(new Open().display());
                    } else if(txt.equals("Save")) {
                        scrollPanel = new JScrollPane(new Save().display());
                    } else if(txt.equals("Save as")) {
                        scrollPanel = new JScrollPane(new SaveAs().display());
                    } else if(txt.equals("Close")) {
                        new Close().ask();
                        scrollPanel = new JScrollPane();
                    }

                    scrollPanel.revalidate();
                    scrollPanel.repaint();
                }
            });
        }   

        scrollPanel.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        scrollPanel.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);

        menuBar.add(menu);
        frame.setJMenuBar(menuBar);
        frame.add(scrollPanel);

        frame.pack();
        frame.setSize(640, 480);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(frame.EXIT_ON_CLOSE); 
```

但它不起作用。每个类 Open、Save、SaveAs 都返回`JPane`内部`JLabel`。前任。

```
public class Open {
    public JPanel display() {
        JPanel panel = new JPanel();
        panel.add(new JLabel("Open"));
        return panel;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T09:54:36.947

您没有更改滚动窗格内容。您正在为该`scrollPanel`字段分配一个新的 JScrollPane 实例。您添加到框架中并显示的滚动窗格保持原样。

如果你想改变滚动窗格的内容，你应该使用

```
scrollPanel.setViewportView(new Open().display()); 
```

# php - 获取服务器时间并通过表单插入 Mysql 表

> ID：13207956
> 
> 赞同：1
> 
> 时间：2012-11-03T09:47:18.183
> 
> 标签：php, sql-server, time, microtime

我有一个将日期、标题、消息和图像发布到 SQL 表中的表单。一切正常，除了表单，它有一个字段，我必须手动输入日期和时间。

我想知道的是如何让 PHP 获取按下表单按钮时的日期和时间（格林威治标准时间）并将其发布到我的 sql 表的“时间”部分而不是我手动执行，我'm 将此用作超轻量级 CMS 博客。

这是我的 insert.php

`mysql_query("INSERT INTO Blog (Date, Title, Message, Image) VALUES('$_POST[Date]', '$_POST[Title]' , '$_POST[Message]' , '$_POST[Image]' ) ") or die(mysql_error());`

`echo "1 record added";`

这是我的表格

 `````
<form action="insert.php" method="post">
<span class="label">Date:       </span>     <input type="text" class="dateField" name="Date" />
<span class="label">Title:      </span>     <input type="text" class="titleField" name="Title" />
<span class="label">Message:    </span>     <textarea  name="Message" class="messageField" maxlength="1000" cols="0" rows="0"></textarea>
<span class="label">Image URL:      </span>     <input type="text" class="ImageField"  name="Image" />
<input type="submit" class="submitBtn"/>
</form> 
````  `我希望服务器添加时间/日期，而不是我手动输入。这很容易做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:49:31.847

```
mysql_query("INSERT INTO Blog (Date, Title, Message, Image) 
            VALUES(now(), '" . $_POST[Title] . "' , '" . $_POST[Message] . "' , 
            '" . $_POST[Image] . "' ) ") or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T09:49:52.990

**MySQL 的** `NOW()`（本地时间或服务器时间）或`UTC_TIMESTAMP()`（GMT 或 UTC）可以解决问题。

替换`'$_POST[Date]'`为`NOW()`or`UTC_TIMESTAMP()`就完成了:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T09:49:34.313

使用 PHP`time()`函数获取脚本激活的时间。

一个例子是`mysql_query("INSERT INTO Blog SET date = '".time()."'")`

更多信息在这里[http://php.net/manual/en/function.time.php](http://php.net/manual/en/function.time.php)

顺便说一句，您应该从使用 mysql 扩展转换为 mysqli 或 PDO MySQL，请在此处了解原因[http://lt1.php.net/manual/en/intro.mysql.php](http://lt1.php.net/manual/en/intro.mysql.php)``

# java - 原始 Java 类文件？

> ID：13207958
> 
> 赞同：-1
> 
> 时间：2012-11-03T09:47:33.660
> 
> 标签：java, class

我想知道为什么当我在记事本（我正在使用记事本++）中打开原始 .class 文件时，为什么大多数文本都替换为 NUL 或类似的东西？

我不是预期的可读代码，但我不明白这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T09:51:21.917

因为`.class`文件是二进制文件，并`notepad`试图将内容转换为文本。它正在打印它所发现的相应字符，大多数时候不在`a-zA-Z0-9`范围内。

# key-value-store - g-wan kv 存储 KV_INCR_KEY

> ID：13207960
> 
> 赞同：0
> 
> 时间：2012-11-03T09:47:39.360
> 
> 标签：key-value-store, g-wan

如何使用`KV_INCR_KEY`？
我在 gwan api 中发现了一个有用的功能，但没有任何示例。
我想用它作为主键将项目添加到 KV 存储。
另外，如何获得这个键的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T17:27:04.740

该`KV_INCR_KEY`值是要传递给的标志`k_add()`。

您可以通过检查`k_add()`. 该[文档](http://gwan.ch/api#kv)指出：

```
kv_add(): add/update a value associated to a key
return: 0:out of memory, else:pointer on existing/inserted kv_item struct 
```

这源于 G-WAN 论坛上讨论的一个想法。而且，就像其他一些标志（例如时间戳或持久性）一样，它还没有被实现（`KV_NO_UPDATE`是功能性的）。

由于下一个版本（专注于新的脚本语言）之后的版本是一种零配置`mapReduce`，因此 KV 存储将很快受到更多关注。

# vb.net - 在 vb.net 函数中将任何控件作为参数传递

> ID：13207961
> 
> 赞同：2
> 
> 时间：2012-11-03T09:47:52.317
> 
> 标签：vb.net, function, parameters, controls

我有一个如下的 vb.net 函数，其中我将复选框控件名称作为参数传递。代码在这里

```
Public Function emaildata(ByVal grdv As GridView, ByVal ctrl As String, ByVal celpos As Integer) As GridView
        Dim comm As OleDbCommand = New OleDbCommand()
        Dim bpv As String = ""
        Dim gv As New GridView
        For Each gvrow As GridViewRow In grdv.Rows
            Dim chkbx As CheckBox = CType(gvrow.FindControl(ctrl), CheckBox)
            If chkbx.Checked Then
                If bpv <> "" Then
                    bpv += ","
                End If
                bpv += gvrow.Cells(celpos).Text
                comm.CommandText = "SELECT chq_num Cheque#,to_char(bpv_amt,'9,999,999,999') Amount,vch_nar Narration,bnf_nam PartyName,acc_des Bank from  CHECK_DATA where bpv_num in(" & bpv.ToString() & ") and BPV_DTE=to_date('" & TreeView2.SelectedValue & "')"
                comm.CommandType = CommandType.Text
                comm.Connection = con
                Dim da As New OleDbDataAdapter(comm)
                Dim ds As New DataSet
                da.Fill(ds)
                gv.DataSource = ds
                gv.DataBind()
            End If
        Next
        Return gv
    End Function 
```

问题是我必须使用与单选按钮相同的功能也与文本框，我不想为所有类型的控件编写单独的函数。我想将控件检测为参数和。例如，如果我传递文本框然后函数应该表现得像一个文本框，如果是单选，那么是单选行为，如果是复选框，那么这个行为是一样的。我有这三个控件来传递函数，我想为这些控件创建一个自动检测方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:57:10.107

您需要将 ctrl 作为 CONTROL（它是所有控件的基类）作为参数发送。

您需要使用后期绑定，并且需要为每种控件类型编写单独的案例......

下面的代码仅适用于复选框

```
Dim chkbx As CheckBox = CType(gvrow.FindControl(ctrl), CheckBox)
If chkbx.Checked Then 
```

对于文本框和单选按钮，您需要编写额外的代码

```
Public Function emaildata(ByVal grdv As GridView, ByVal ctrl As Control, ByVal celpos As Integer) As GridView

 If TypeOf ctrl Is Button Then

 ElseIf TypeOf ctrl Is RadioButton Then 

 Else

 EndIf 
```

# python - 访问字典内列表中的随机项目

> ID：13207962
> 
> 赞同：1
> 
> 时间：2012-11-03T09:48:01.513
> 
> 标签：python, python-3.x

鉴于以下情况：

```
topic = {'Countries': ['Somalia', 'Bermuda'],
         'Cars'     : ['Tesla', 'Lotus']
} 
```

如何在随机字典中访问列表中的随机项目？确实尝试将每个列表中的元素组合成一个列表，尽管这并不是我所需要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T09:49:14.827

使用`random.choice`,`.keys()`然后再次使用与所选键关联的值：

```
import random

key = random.choice(list(topic.keys()))
value = random.choice(topic[key]) 
```

我们需要将`.keys()`（dict 视图）的结果转换为列表，以便您能够从中进行随机选择。

演示：

```
>>> import random
>>> topic = {'Countries': ['Somalia', 'Bermuda'],
...          'Cars'     : ['Tesla', 'Lotus']
... }
>>> key = random.choice(list(topic.keys()))
>>> value = random.choice(topic[key])
>>> value
'Tesla' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T09:57:28.377

这是一个在所有项目上均匀随机的解决方案 - 如果有 1000 辆汽车和 1 个国家/地区，它会更频繁地挑选汽车

```
import random
# build a list of containing key/value pairs
values = [(k, v) for k, values in topic.items() for v in values]

# pick one of these
key, value = random.choice(values) 
```

# php - 在 PHP 中使用 HTML 表单提交的上一个按钮

> ID：13207965
> 
> 赞同：0
> 
> 时间：2012-11-03T09:48:45.507
> 
> 标签：php, html

我使用表单提交完成了我的脚本。我正在做的是每页带有下一个按钮的一系列问题。现在我想添加一个功能以返回上一个问题。

我如何将其编码为一个

```
<FORM name ="Submit1" method ="post" action = <? echo "question.php?num=". $n ; ?>  >
<Input type = "Submit" VALUE = "Next" name ="Submit1" /></FORM> 
```

我想在不弄乱对齐的情况下将“上一个”按钮添加到同一个表单中。

我尝试制作另一个，然后将操作发布到上一页。

但该按钮位于“下一步”下方或问题上方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:11:51.797

```
<FORM name ="Submit1" method ="post" action="/question.php?num=<? echo $n; ?>"  id="formID">
<Input type = "Submit" VALUE = "Next" name ="Submit1" />
<Input type = "Submit" VALUE = "Prev" onclick="document.formID.action = '/question.php?num=<? echo ($n-1); ?>'" name ="Submit2" />
</FORM> 
```

尝试使用该 Javascript

```
onclick="document.formID.action = '/question.php?num=<? echo ($n-1); ?>'" 
```

这必须在您的表单提交之前更改表单操作，到上一页 $n-1 或者它必须是 $n-2 .. 您必须正确设置它

# jquery - 如果我使用 jQuery 语法： $(" ") ，图像实际上会下载到客户端吗？

> ID：13207984
> 
> 赞同：5
> 
> 时间：2012-11-03T09:51:28.043
> 
> 标签：jquery, syntax

如果我使用 jQuery 语法 : `$("<img src='img.jpg'>")`，图像实际上会下载到客户端吗？还是我必须将其附加到正文才能下载？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T09:55:49.490

您不必将图像元素添加到要加载的图像的文档中。

图像元素本身将在您创建图像后立即请求图像（并且一旦它具有`src`值）。

运行此命令时观看网络活动（在 Firebug/Developer Tools 中）：http: [//jsfiddle.net/Guffa/AvgVN/](http://jsfiddle.net/Guffa/AvgVN/)

[谷歌“javascript preload”](https://www.google.com/search?q=javascript%20preload)可以找到大量使用它的代码示例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T09:56:16.617

是的，图像将立即下载。

即使`Image`已创建的元素尚未在 DOM 中，您的浏览器仍会在`.src`设置属性后立即开始下载它。

使用您自己的头像，我只是在控制台中执行此操作：

```
> i = $('<img src="http://graph.facebook.com/100002351317104/picture?type=large">');
...
> i[0].width
180 
```

显示图像确实已加载。

如果您考虑一下，实际上必须是这种情况，否则图像预加载将永远无法工作。图像预加载取决于创建分离`Image`节点并设置其`src`，这正是`$("<img src=...>")`要做的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T09:57:53.310

我会说是的，或者可能取决于浏览器。

```
$("<img src='http://crssrd.com/web_apps/index/themes/crssrd.com/images/loading.gif'>")​ 
```

例如，在 Chrome 上测试：http: [//jsfiddle.net/SMnhU/](http://jsfiddle.net/SMnhU/) 图像会立即下载。

# ruby-on-rails - Rails 如何使用 twitter bootstrap 制作动态模态窗口

> ID：13207988
> 
> 赞同：0
> 
> 时间：2012-11-03T09:51:58.050
> 
> 标签：ruby-on-rails, twitter-bootstrap

大家好，我开始使用带有 rails 的 twitter bootstrap，我想为每个事件创建一个模态窗口，但每个组件的模态窗口都是相同的

我有这个代码：

```
<% @event.each do |event| %>
  <div class="modal hide fade" id="infos">
    <div class="modal-header"> 
      <a class="close" data-dismiss="modal">×</a>
      <h3><%= event.titre %></h3>
    </div>
    <div class="modal-body">
      <p><%= event.titre %><%= event.dday %><%= event.lieux %> <%= event.commentaire%></p>
    </div>
  </div>
  <div class="timeline_event" data-toggle="modal" data-target="#infos">
    <%= link_to (event.titre), event %> <br />
    <p>Le <%= event.dday %> à <%= event.lieux %></p>
   </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T10:13:42.127

所有 div都一样`id`。所以第一个模态总是打开的。尝试设置唯一 ID：

```
<div class="modal hide fade" id="<%= dom_id(event, :infos) %>">
...
<div class="timeline_event" data-toggle="modal" data-target="#<%= dom_id(event, :infos) %>"> 
```

**[更新： http](http://apidock.com/rails/ActionController/RecordIdentifier/dom_id) : **//apidock.com/rails/ActionController/RecordIdentifier/dom_id****

# php - Yii：属于通

> ID：13207997
> 
> 赞同：1
> 
> 时间：2012-11-03T09:53:23.847
> 
> 标签：php, activerecord, orm, yii

我有 3 个模型：

```
Groups
     id
     name

Users
     id
     group_id
     login
     // ....

Messages
     id
     user_id
     title
     body
     // .... 
```

用户属于群组并拥有许多消息

```
 'group' => array(self::BELONGS_TO, 'Groups', 'group_id'),
 'messages' => array(self::HAS_MANY, 'Messages', 'user_id') 
```

组有很多用户

```
 'users' => array(self::HAS_MANY, 'Users', 'group_id') 
```

消息属于用户

```
 'user' => array(self::BELONGS_TO, 'Users', 'user_id') 
```

Yii 中没有属于关系，`$through`所以我如何定义连接消息和组的关系（即消息属于组）？

**UPD：**一个肮脏的黑客。定义新的关系类型：

```
class BelongsToThrough extends CBelongsToRelation {
    public $through;
} 
```

将其设置为关系类型`Messages`：

```
'group' => array('BelongsToThrough', 'Groups', 'group_id', 'through' => 'user') 
```

它有效。不知何故。有人可以解释一下这是如何工作的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:02:11.973

也许您可以在消息和组之间建立一个桥接表（groups_messages）并像这样连接它们：

```
'groups' => array(self::MANY_MANY, 'Groups', 'groups_messages(message_id, group_id)') 
```

# android - “硬编码字符串 xxx 应使用 @string 资源”问题

> ID：13207999
> 
> 赞同：9
> 
> 时间：2012-11-03T09:53:49.893
> 
> 标签：android

我在 hello world 活动代码中收到以下错误：

```
Description Resource Path Location Type
[I18N] Hardcoded string "and this is a clickable button!", 
    should use @string resource
activity_hello_world.xml/HelloWorld/res/layout line 21 Android Lint Problem 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-03T09:57:29.450

这不是错误，这是 Lint 警告。因此您可以运行应用程序，但显示文本的推荐方式（在 TextViews、Buttons 等上）是使用字符串引用。你必须去你的 res 文件夹，在 values 下会有一个 strings.xml 文件。在里面添加这个：

```
 <string name="my_string">Your Text!</string> 
```

然后要在你的按钮上设置文本，你必须这样做：

```
android:text="@string/my_string" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-19T14:21:15.390

示例-（键盘）

将其放在 values 文件夹下的文件 string.xml 下

```
<string name="keypad_title">Keypad</string> 
```

将此代码放在布局文件夹下的keypad.xml下

```
<Button android:id="@+id/keypad_1"
     android:text="1">
  </Button> 
```