# StackOverflow 问答 15176000-15176999

# c# - 无法转换类型为“System.Data.DataSet”的对象

> ID：15176000
> 
> 赞同：0
> 
> 时间：2013-03-02T15:13:56.810
> 
> 标签：c#, sql

运行调试器查看错误后出现此错误：

> “无法将‘System.Data.DataSet’类型的对象转换为‘NLHosp.DataSet’类型”

“NLHosp”是我的数据库的名称。

这是代码：

```
 private void btnLogin_Click(object sender, System.EventArgs e)
    {
        string strUser;
        string strPass;
        string sMsg = "";

        strUser = txtUserID.Text ;
        strPass = txtPassword.Text ;

        DataSet o_Find = new DataSet ();
        Users oUsers = new Users();

        try
        {
            o_Find = (DataSet)oUsers.FindData(strUser,strPass);
            sMsg = "Welcome " + o_Find.Tables ["Login"].Rows[0]["UserName"].ToString ();

            switch (strUser)
            {
                case "Admissions":
                    frmAdmissions admitForm = new frmAdmissions ();
                    admitForm.Visible = true;
                    admitForm.Activate();
                    break;
                case "Admin":
                case "Nurse":
                case "Doctor":
                    frmMenu menuForm = new frmMenu ();
                    menuForm.oCurrent.UserName = strUser;
                    menuForm.Visible = true;
                    menuForm.Activate();
                    menuForm.SelectUser();
                    break;
            }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:16:32.503

看起来您已经`DataSet`在`NLHosp`命名空间中声明了自己的类型，这就是您要强制转换的类型 - 但`FindData`它只是返回一个`System.Data.DataSet`对象。

首先，我*强烈*建议您重命名`NLHosp.DataSet`，以免与现有系统类型名称发生冲突。然后你应该考虑你*真正*想要将它投射到什么。如果您真的打算将其转换为您的自定义类型（并且可以工作），那么您需要查看`FindData`并弄清楚为什么它只返回一个`System.Data.DataSet`. *看起来*你只需要一些东西`System.Data.DataSet`......

# javascript - 如何让用户确认 ExtJs 中的组合框更改事件？

> ID：15176002
> 
> 赞同：6
> 
> 时间：2013-03-02T15:14:08.887
> 
> 标签：javascript, extjs, combobox, callback, client-side

我的 extjs 应用程序中有一个组合，我想显示“你确定吗？” 如果用户拒绝，则向用户确认窗口并防止更改。

由于 JavaScript 的确认框是同步的，因此可以正常工作。但是使用 Ext JS，会显示确认消息，并且我的其余代码将在用户响应之前执行。这是我的代码：

```
// JavaScript confirm box
{
    xtype: 'combo',
    ...
    ...
    ...
    listeners: {
        beforeselect: function(combo, record, index ) {
            if(confirm('Are you sure ?') == false)
            {
                 return false; // prevent combo from changing
            }
            // else continue
        }
    }
}
// Ext JS message box (to confirm)
{
    xtype: 'combo',
    ...
    ...
    ...
    listeners: {
        beforeselect: function(combo, record, index ) {
            Ext.Msg.show({
                title: 'Warning',
                msg: 'Are You Sure ?',
                buttons: Ext.Msg.YESNO,
                fn: function(btn) {
                    if (btn == 'yes') {
                        // continue and set new value on combo
                    }
                    else if (btn == 'no') {
                        // prevent combo from changing
                    }
                }
            });
        }
    }
} 
```

问题是`Ext.Msg.show`获取回调函数并且不等待用户回答并且我们无法阻止组合框更改。

我应该怎么办？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-02T21:28:35.473

为了取消组合框更改，`beforeSelect`侦听器需要返回 false。我的建议是：

```
beforeselect: function(combo, record, index ) {
  Ext.Msg.show({
    title: 'Warning',
    msg: 'Are You Sure ?',
    buttons: Ext.Msg.YESNO,
    fn: function(btn) {
      if (btn == 'yes') {

        // Here we have to manually set the combo value
        // since the original select event was cancelled
        combo.setValue( /* whatever value was selected */ );
      }

      else if (btn == 'no') {

        // Don't do anything because the select event was already cancelled
      }
    }
  });

  // Cancel the default action
  return false;
} 
```

ExtJS 模态不会像本机对话框那样停止脚本的执行，这意味着`beforeSelect`侦听器在用户操作之前返回。此代码的工作方式是立即停止选择事件，并显示对话框。当用户选择“是”时，组合上的值会以编程方式在回调函数中设置。

# asp.net - 检测电子邮件客户端或网站

> ID：15176010
> 
> 赞同：0
> 
> 时间：2013-03-02T15:15:16.500
> 
> 标签：asp.net, asp.net-mvc, email, http

我有兴趣检测重定向我网站的新用户的电子邮件客户端或网站。例如，如果他是从 Gmail.com 重定向的（通过单击他的一封电子邮件中的链接），我想跟踪它。

如果我需要以某种方式操纵指向我的网站的链接，我可以做到。

我知道有一种方法可以做到这一点，因为我看到很多网站和服务都在这样做，但我想知道如何做。我可以跟踪用户代理，但这并没有告诉我有关站点或电子邮件客户端的任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T19:23:33.553

为此，您必须使用 QueryStrings。例如，将用户发送到您的网站的链接必须是这样的`www.yourwebsite.com/default.aspx?sender="googleMail"`

当您的 default.aspx 页面加载时，您可以使用下面显示的代码获取此信息

```
 if(Request.QueryString["sender"]!=null)
{
string Sender=Request.QueryString["sender"].ToString();
} 
```

您可以设置不同的查询字符串，例如

```
www.yourwebsite.com/default.aspx?sender="googleMail"
www.yourwebsite.com/default.aspx?sender="YahooMail"
www.yourwebsite.com/default.aspx?sender="googleAdsense" 
```

有一些方法可以跟踪用户浏览器、IP 地址等。但是要跟踪这个，您必须采用上述方法。

# haskell - Haskell `ncurses` 库

> ID：15176015
> 
> 赞同：15
> 
> 时间：2013-03-02T15:15:41.393
> 
> 标签：haskell, ncurses

我想在我的 Haskell 程序中使用基于文本的 UI。我为 ncurses 库找到了一些绑定（另请参阅[hscurses 或 ncurses，使用哪一个？](https://stackoverflow.com/questions/6924009/hscurses-or-ncurses-which-one-to-use)）。`hscurses`和`nanocurses`包只是 C 库的简单包装器，虽然没有`vty`很好的文档记录并且有点难看（例如混合蛇案例和骆驼案例）。

Hackage 上的[`ncurses`](http://hackage.haskell.org/package/ncurses)库看起来更漂亮，并提供了非常适合 Haskell 的 API。问题是它似乎没有实现一些关键功能，比如调整窗口大小或刷新窗口。

所以我的问题是：

*   是否有任何其他 Haskell 文本 UI 库，无论是否基于 ncurses，我错过了？
*   如果没有人，是否可以扩展`ncurses`Haskell 库以至少支持窗口刷新和调整大小？（这个应该可以咨询项目业主，但我需要快速解决）

**编辑：**

我终于在`nscurses`没有窗口（和面板）的情况下使用以避免刷新它们的麻烦。我在输出到窗口右下角时遇到了问题（[Python 的 ncurses binding](http://bugs.python.org/issue8243)报告了一个非常相似的问题）。我通过不在那里写来解决它:)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T10:17:05.903

你看过[vty-ui](http://jtdaugherty.github.com/vty-ui/ "vty-ui")吗？它有一个很好的用户手册，里面有很多例子。我相信它本质上是对 vty 的封装。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T16:33:11.447

我已经成功使用了 nanocurses 和 hscurses，我的 hmp3 应用程序具有作为nanocurses 基础的[绑定](http://code.haskell.org/~dons/code/hmp3/Curses.hsc)。

无论如何，您可能会想要一个不错的高级 API。hscurses 至少有一个盒子抽象。

你会很好地与 hscurses。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-14T07:34:47.250

haskell 中基于文本的用户界面还有另一个不错的选择；

[Brick](https://github.com/jtdaugherty/brick)由 jtdaugherty 编写，他是开发 vty-ui 的同一人，现在已弃用。

API 是[声明](https://stackoverflow.com/questions/12189151/declarative-language#12193648)式的，更适合展示像 Haskell 这样的语言。[文档](https://github.com/jtdaugherty/brick/blob/master/docs/guide.rst)也很棒而且很完整。

# eclipse - 无法从可绘制文件夹中检索 png 文件

> ID：15176020
> 
> 赞同：-1
> 
> 时间：2013-03-02T15:16:12.560
> 
> 标签：eclipse

我无法使用此代码从可绘制文件夹中检索我的 png 文件

```
RadioButton.OnClickListener myOptionOnClickListener = new RadioButton.OnClickListener(){

@Override
public void onClick(View v){
    if (state.equals("second"))
    {
        if(list[0].isChecked())
            image.setImageResource(R.drawable.d1);
        else
            image.setImageResource(-1);

        if(list[1].isChecked())
            image.setImageResource(R.drawable.h7);
        else
            image.setImageResource(-1);
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:10:59.967

尝试这个：

```
image.setImageResource(getResources().getDrawable(R.drawable.d1)); 
```

# php - 如何使用 HMVC 从 CodeIgniter 中的模块自动包含/加载 css 和 js

> ID：15176023
> 
> 赞同：1
> 
> 时间：2013-03-02T15:16:29.917
> 
> 标签：php, codeigniter, hmvc

我在具有 css 和 js 文件夹的模块文件夹中有一些模块，我正在考虑如何将所有这些 css 和 js 文件自动加载到我的模板标题中。

我正在考虑创建 2 个名为**cssloader**和**jsloader**的模块，它们将包含在模板的标题部分中。

它们将包含一些 php 脚本，将 css（和 js）的 url 放入一个数组中，该数组将在模板中输出，例如：

```
<?php echo Modules::run( 'cssloader/cssloader/_css_include_for_frontend' ); ?> 
```

url 将被一些脚本抓取，该脚本将搜索 CI 应用程序的模块文件夹并在其中查找 css 文件夹以及带有一些已定义常量或变量的文件**load_css.php ，例如**

```
$css_loader_frontend['slider'] = array('slider.css', 
                                       'slider_ie6.css'
                                      );
$css_loader_backend['slider']  = array('slider_admin.css'); 
```

该文件将包含将要加载的文件，例如 slider.css（在滑块模块 css 文件夹中）

和 javascript 的类似场景。

我的方法对与否，你会以某种不同的方式做吗？

你怎么看待这件事？

你会做什么不同的和更有效的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:37:15.337

我认为这个[模板类](http://williamsconcepts.com/ci/codeigniter/libraries/template/index.html)可以帮助你，不过，我想知道你为什么要访问模块内的资产文件，我并不精通，但据我所知，你应该访问诸如 img、js、css 等文件在系统和应用程序文件夹级别上，可以将其命名为“公共”或“资产”的文件夹，以避免“目录访问被禁止”。

# javascript - 客户端连接时的socket.io错误

> ID：15176025
> 
> 赞同：0
> 
> 时间：2013-03-02T15:16:44.190
> 
> 标签：javascript, node.js, socket.io

我在我的 node.js 安装上成功运行了 socket.io。

```
info  - socket.io started 
```

控制台显示它运行正常，但只要客户端（浏览器）连接：

```
socket = io.connect('<my host>:8000'); 
```

控制台正在踢出一个错误：

```
crypto.js:123
  return new Hash(hash);
         ^
TypeError: undefined is not a function
    at Object.createHash (crypto.js:123:10)
    at WebSocket.onSocketConnect (/node_modules/socket.io/lib/transports/websocket/hybi-16.js:120:23)
    at WebSocket.handleRequest (/node_modules/socket.io/lib/transport.js:71:10)
    at WebSocket.Transport (/node_modules/socket.io/lib/transport.js:31:8)
    at new WebSocket (/node_modules/socket.io/lib/transports/websocket/hybi-16.js:59:13)
    at new WebSocket (/node_modules/socket.io/lib/transports/websocket.js:31:17)
    at Manager.handleClient (/node_modules/socket.io/lib/manager.js:661:19)
    at Manager.handleUpgrade (/node_modules/socket.io/lib/manager.js:618:8)
    at Server.<anonymous> (/node_modules/socket.io/lib/manager.js:123:10)
    at Server.emit (events.js:88:20) 
```

谁能理解这可能意味着什么？

我的代码在我的本地机器上运行良好，只有将它移动到我的生产服务器时才会发生此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:43:39.307

事实证明，这是因为 Node 安装时使用了 --without-ssl 选项。这意味着它不会安装 socket.it 所需的任何加密内容。我安装了openssl，重新安装了Node，这修复了它:)

# python - 带有 tkinter 的复选框

> ID：15176027
> 
> 赞同：0
> 
> 时间：2013-03-02T15:17:10.100
> 
> 标签：python, tkinter

在编码 tkinter 复选框时需要一些帮助。我有一个复选按钮，如果我选择它，它将启用许多其他复选框。下面是选中第一个复选框后的功能

```
def enable_():
    # Global variables
    global var
    # If Single test
    if (var.get()==1):
        Label (text='Select The Test To Be Executed').grid(row=7,column=1)
        L11 = Label ().grid(row=9,column=1)
        row_me =9
        col_me =0
        test_name_backup = test_name
        for checkBoxName in test_name:
            row_me = row_me+1
            chk_bx = Checkbutton(root, text=checkBoxName, variable =checkBoxName, \
                            onvalue = 1, offvalue = 0, height=1, command=box_select(checkBoxName), \
                            width = 20)
            chk_bx.grid(row = row_me, column = col_me)
            if (row_me == 20):
                row_me = 9
                col_me = col_me+1 
```

我在这里有两个问题。

1.  如何删除动态创建的复选框（chk_bx）我的意思是如果我选择初始复选框，它将启用许多其他框，如果我取消选择第一个复选框，它应该删除最初创建的框？

2.  我将如何从动态创建的框“选择/未选择”中获取值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:47:28.557

**1\. 如何删除动态创建的复选框？**

只需将所有检查按钮添加到列表中，以便`destroy()`在需要时调用它们：

```
def remove_checkbuttons():
    # Remove the checkbuttons you want
    for chk_bx in checkbuttons:
        chk_bx.destroy()

def create_checkbutton(name):
    return Checkbutton(root, text=name, command=lambda: box_select(name),
                       onvalue=1, offvalue=0, height=1, width=20)

#...
checkbuttons = [create_checkbutton(name) for name in test_name] 
```

**2.如何从动态创建的框“选择/未选择”中获取值？**

您必须创建一个 Tkinter `IntVar`，用于存储`onvalue`or`offvalue`取决于是否选中了检查按钮。您还需要跟踪此对象，但不必创建新列表，因为您可以将它们附加到相应的检查按钮：

```
def printcheckbuttons():
    for chk_bx in checkbuttons:
        print chk_bx.var.get()

def create_checkbutton(name):
    var = IntVar()
    cb = Checkbutton(root, variable=var, ...)
    cb.var = var
    return cb 
```

# javascript - Javascript 在 Joomla 文章中不起作用

> ID：15176029
> 
> 赞同：0
> 
> 时间：2013-03-02T15:17:11.083
> 
> 标签：javascript, image, joomla, panning

我正在尝试将这个（dannyvankooten dot com/jquery-plugins/mapz/）图像平移脚本实现到 Joomla 文章中。我在 Joomla ( [http://tylypahka.tk/karttatesting/](http://tylypahka.tk/karttatesting/) ) 之外对其进行了测试，它运行良好。但是，当我在 Joomla 文章中尝试它时，平移不起作用（[http://tylypahka.tk/kartta](http://tylypahka.tk/kartta)）。

我将与测试版本相同的代码放入 Joomla 模板的头部：

```
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.13/jquery-ui.min.js" type="text/javascript"></script>
<script src="https://jquery-ui.googlecode.com/svn-history/r2596/branches/dev/spinner/external/mousewheel/jquery.mousewheel.min.js" type="text/javascript" ></script>
<script src="http://tylypahka.tk/js/jquery.mapz.js" type="text/javascript"></script>
<script type="text/javascript" src="http://tylypahka.tk/js/jquery.maphilight.js"></script>
<script type="text/javascript">
$(document).ready(function() {
  $("#map").mapz({
    zoom : true,
    createmaps : true,
    mousewheel : true
  });
});
</script>
<script type="text/javascript">$(function() {
        $('.map').maphilight();
        $('#squidheadlink').mouseover(function(e) {
            $('#squidhead').mouseover();
        }).mouseout(function(e) {
            $('#squidhead').mouseout();
        }).click(function(e) { e.preventDefault(); });
    });</script>
<style>
.map-viewport{ position:relative; width:860px; height:883px; overflow:hidden; background-color:black;}
.level{ position:absolute; left:0; top:0; z-index:10;}
.current-level{ z-index:20; }
#map{ width:1297px; height:883px; position:absolute; left:0; top:0; cursor:move;}
</style> 
```

以及与文章相同的确切代码：

```
<div class="map-viewport">
  <div id="map">
    <img src="http://img42.imageshack.us/img42/8954/tylypahkanportit.png" width="1297" height="883" usemap="#html-map" class="current-level level map" />
  </div>
  <map name="html-map">
    <area id="squidhead" shape="rect" coords="311,494,434,634" href="http://www.image-maps.com/" alt="" title=""/>
  </map>
</div> 
```

jQuery 会自动加载到 Joomla 站点中，所以这应该不是问题。有什么想法我在这里做错了吗？

所有建议和帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T22:40:01.833

您正在使用 $ ，它是 jQuery 的简写代码，但 Joomla 还加载了 mootools，它被分配了相同的选择器：因此只需将所有 $() 更改为 jquery() ，您应该可以正常工作。您只需要在外部级别执行此操作，然后将 $ 作为参数传递：

```
jQuery(function($){
  // inside this handler you can use the $ since you passed it as a parameter to the function:
  // btw, this is nicer than jQuery(document).ready...
  $('#someid').show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T15:54:21.010

最好使用 Joomla 编码标准将代码包含在您的脑海中，同时检查它是否尚未导入，因为这会导致冲突。

因此，首先，下载[Sourcerer](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-content/5051)，它可以让您将代码添加到您的文章中。

然后，使用 Sourcerer 添加以下内容：

```
$document = JFactory::getDocument();
if(!JFactory::getApplication()->get('jqueryui')){
     JFactory::getApplication()->set('jqueryui',true);
     $document->addScript("https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.13/jquery-ui.min.js");
}
$document->addScript("https://jquery-ui.googlecode.com/svn-history/r2596/branches/dev/spinner/external/mousewheel/jquery.mousewheel.min.js");
$document->addScript("http://tylypahka.tk/js/jquery.mapz.js");
$document->addScript("http://tylypahka.tk/js/jquery.maphilight.js");
$document->addScriptDeclaration('
$(document).ready(function() {
  $("#map").mapz({
    zoom : true,
    createmaps : true,
    mousewheel : true
  });
});
');
$document->addScriptDeclaration('
$(function() {
        $('.map').maphilight();
        $('#squidheadlink').mouseover(function(e) {
            $('#squidhead').mouseover();
        }).mouseout(function(e) {
            $('#squidhead').mouseout();
        }).click(function(e) { e.preventDefault(); });
    });
');

$document->addStyleDeclaration(.map-viewport { position:relative; width:860px; height:883px; overflow:hidden; background-color:black;}
.level{ position:absolute; left:0; top:0; z-index:10;}
.current-level{ z-index:20; }
#map{ width:1297px; height:883px; position:absolute; left:0; top:0; cursor:move;}); 
```

希望这有效并有所帮助

# mysql - 回显特殊字符时，Mysql 行导入停止

> ID：15176032
> 
> 赞同：0
> 
> 时间：2013-03-02T15:17:42.847
> 
> 标签：mysql, import, phpmyadmin, export

我遇到了一个类似的问题，就像下面的问题一样。但是解决方法发现我没有选择。

[欧元符号打破了mysql插入过程](https://stackoverflow.com/questions/15145584/euro-symbol-breaks-mysql-insertion-process)

我正在为朋友迁移一些数据，我无法访问服务器或 mysql shell，我必须导入几个数据库。

两台服务器都有 phpMyAdmin（源：3.4.10.1deb1，目标：3.5.3）但是如果我导出和导入一个 sql 文件（转储仍然可以），行导入将在一个特殊字符即将出现时停止插入，导致断弦。

我检查过，所有表都是`utf8_general_ci`源和目标，转储有`/*!40101 SET NAMES utf8 */;`

下面是变量，但除了会话和全局被翻转之外，我看不出有什么区别。知道出了什么问题，以及如何（以及是否）我可以使用有限的权限来解决它？

```
Source:
character set client    utf8    
(Global value)  latin1  
 character set connection   utf8    
(Global value)  latin1  
 character set database latin1  
 character set filesystem   binary  
 character set results  utf8
(Global value)  latin1  
 character set server   latin1  
 character set system   utf8

Destination:
character set client    latin1  
(Sessionvariables)  utf8    
character set connection    latin1  
(Sessionvariables)  utf8    
character set database  latin1  
character set filesystem    binary  
character set results   latin1
(Sessionvariables)  utf8    
character set server    latin1  
character set system    utf8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T23:27:15.580

好的，连接可能有问题，但我无权改变它。

更简单的解决方案是导入 gzip 压缩（或其他压缩）文件，而不是常规 SQL 文件。压缩会更改特殊字符，因此它们不会在上传过程中中断。一旦在服务器上，一切都是 utf-8 并且插入按预期运行。

# gcc - 库之间的 gcc 未定义引用

> ID：15176037
> 
> 赞同：1
> 
> 时间：2013-03-02T15:18:38.040
> 
> 标签：gcc, linker, static-libraries, nm

在链接时，我得到以下信息：

```
libMain.a(Object.o): In function `Object': 
Object.cpp(44): undefined reference to `Transform::MakeIdentity()' 
```

从使用中肯定可以看出`nm --defined-only libSystem.a`

```
Transform.o:
00000000 T Transform::MakeIdentity() 
```

libSystem.a 和 libMain.a 都被正确输入。链接器命令行选项：

> -o "Game.so" -shared -Wl,-z,noexecstack "-lstdc++" "-lsupc++" "-lgnustl_static" "-lgcc" "libSystem.a" "libMain.a" -nostdlib -l"c" - l"m" -l"log" -l"gcc" -Wl,-soname,"libGame" -Wl,--no-undefined

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T15:29:49.163

链接静态库的顺序很重要。有关详细讨论，请参阅[为什么链接库的顺序有时会导致 GCC 中的错误？](https://stackoverflow.com/questions/45135/linker-order-gcc)

# c# - NHibernate 基于 Reflection.Type 返回强类型的 IEnumerable

> ID：15176051
> 
> 赞同：0
> 
> 时间：2013-03-02T15:19:34.663
> 
> 标签：c#, nhibernate

我有一个在我的 NHibernate 项目中实现的 Lucene FT 引擎。我正在尝试做的一件事是支持定期维护，即清除 FT 索引并从持久实体中重建。我构建了一个通用的静态方法`PopulateIndex<T>`，它可以派生实体的类型，查找全文索引列的属性属性，并将它们存储到 Lucene 目录中。现在，我的问题是如何为该方法提供`IEnumerable<T>`NHibernate 方面的强类型。

```
public static void PopulateIndex<T>(IEnumerable<T> entities) where T : class
{
    var entityType = typeof(T);
    if (!IsIndexable(entityType)) return;

    var entityName = entityType.Name;           
    var entityIdName = string.Format("{0}Id", entityName);

    var indexables = GetIndexableProperties(entityType);

    Logger.Info(i => i("Populating the Full-text index with values from the {0} entity...", entityName));
    using (var analyzer = new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_30))
    using (var writer = new IndexWriter(FullTextDirectory.FullSearchDirectory, analyzer, IndexWriter.MaxFieldLength.UNLIMITED))
    {
        foreach (var entity in entities)
        {
            var entityIdValue = entityType.GetProperty(entityIdName).GetValue(entity).ToString();
            var doc = CreateDocument(entity, entityIdName, entityIdValue, indexables);
            writer.AddDocument(doc);
        }
    }
    Logger.Info(i => i("Index population of {0} is complete.", entityName));
} 
```

这是给我 agita 的方法：

```
public void RebuildIndices()
{
    Logger.Info(i => i("Rebuilding the Full-Text indices..."));
    var entityTypes = GetIndexableTypes();

    if (entityTypes.Count() == 0) return;
    FullText.ClearIndices();
    foreach (var entityType in entityTypes)
    {
        FullText.PopulateIndex(
            _Session.CreateCriteria(entityType)
            .List()
            );
    }
} 
```

看起来这会返回一个强类型`List<T>`，但事实并非如此。如何获得该强类型列表，或者有替代/更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:51:23.657

如果你想获得强类型列表，你应该指定泛型参数。我可以提出两个选择： 避免反思。我`PopulateIndex`的意思是直接调用每种类型：

```
public void RebuildIndexes()
{
    Logger.Info(i => i("Rebuilding the Full-Text indices..."));
    FullText.ClearIndices();
    FullText.PopulateIndex(LoadEntities<EntityA>());
    FullText.PopulateIndex(LoadEntities<EntityB>());
    ...
}

private IEnumerable<T> LoadEntities<T>()
{
    _Session.QueryOver<T>().List();
} 
```

或者您可以使用反射调用 PopulateIndex：

```
public void RebuildIndices()
{
    Logger.Info(i => i("Rebuilding the Full-Text indices..."));
    var entityTypes = GetIndexableTypes();

    if (entityTypes.Count() == 0) return;
    FullText.ClearIndices();
    foreach (var entityType in entityTypes)
    {
        var entityList = _Session.CreateCriteria(entityType).List();
        var populateIndexMethod = typeof(FullText).GetMethod("PopulateIndex", BindingFlags.Public | BindingFlags.Static);
        var typedPopulateIndexMethod = populateIndexMethod.MakeGenericMethod(entityType);
        typedPopulateIndexMethod.Invoke(null, new object[] { entityList });
    }
} 
```

# javascript - 如果条件为真，则将键添加到哈希

> ID：15176053
> 
> 赞同：1
> 
> 时间：2013-03-02T15:19:53.050
> 
> 标签：javascript

我有这个代码：

```
function myFunction(serializeData, extraSerializedData){
  //serializeData is boolean
  var    formSerializedData = '';
  if(serializeData){
      var formSerializedData = $("#myform").serialize();
      if (typeof extraSerializedData !== 'undefined'){
        formSerializedData += extraSerializedData;
      }
    }

    $.ajax({
      type: "get",
      url: "/123",
      data: formSerializedData, //TODO!!!       
      success: function(data){
        //...... 
```

我只想在存在的情况下添加`data`密钥`serializeData`。是否有可能以及如何以使代码保持“美丽”的方式做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T15:24:50.887

我建议，虽然未经测试：

```
$.ajax({
      type: "get",
      url: "/123",
      data: serializeData !== undefined ? formSerializedData : null,
      success: function(data){
        //......
      }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T15:26:45.483

我讨厌三元运算符，所以在这里，有这个：

```
function myFunction(serializeData, extraSerializedData){
    var formSerializedData = '';
    var extendWith = {};

    if(serializeData){
        var formSerializedData = $("#myform").serialize();
        if (typeof extraSerializedData !== 'undefined'){
            formSerializedData += extraSerializedData;
        }
        extendWith.data = formSerializedData;
    }

    $.ajax($.extend({
        type: "get",
        url: "/123",    
        success: function(data){
            //......
        }
        //rest of the object
    },extendWith));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T15:30:49.520

我建议使用 ajaxSetUp ：

```
 $.ajaxSetup({
     url: "/123/",
     type: "get",
     success: function(){};
   });

   //Check for serializeData data and pass accordingly
  $.ajax({ data: myData }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T15:45:57.093

```
function myFunction(serializeData, extraSerializedData){
    var ajaxthing = {
        type: 'get', 
        url: '/123', 
        success: function (data) {...}
    };

    if(serializeData){
        var formSerializedData = $("#myform").serialize();
        if (typeof extraSerializedData !== 'undefined'){
            formSerializedData += extraSerializedData;
        }
        ajaxthing.data = formSerializedData;
    }

    $.ajax(ajaxthing); 
```

# python - 如何以编程方式打开串口？

> ID：15176055
> 
> 赞同：0
> 
> 时间：2013-03-02T15:20:10.460
> 
> 标签：python, serial-port, arduino, pyserial, archlinux

我有一个连接到运行 Arch 的 Raspberry Pi 的 Arduino。

arduino 没有什么可做的，只是不断地打印一些传感器数据：

```
#include<Arduino.h>

void setup() {
    Serial.begin(9600);
}

float temp = .0;
int lumen = 0;

void loop() {
    if(Serial.available()) {        
        temp = analogRead(4) * .4882812 - 273.15;
        lumen = analogRead(0);
        Serial.print(temp);
        Serial.print("|");
        Serial.print(lumen);
        Serial.println();
    }
    delay(10);
} 
```

在 Raspberry 上，将运行以下脚本：

```
# run.py
#!/usr/bin/env python2
from arduino import Arduino
from poster import Poster
import time
import subprocess
import json

if __name__ == '__main__':
    with open("config.json") as config_fh:
        config = json.load(config_fh)
        print(config)

    base_url = config["URL"]
    security_token = config["KEY"]
    port = config["TTY"]

    arduino = Arduino(port=port)
    arduino.start()
    time.sleep(1)

    while True:
        is_door_open = arduino.is_door_open()
        temperature = arduino.get_temperature()

        print arduino.is_door_open()
        print arduino.get_temperature()

#       nmap = subprocess.Popen("./networkClientsInNetwork.sh", stdout = subprocess.PIPE, stderr = subprocess.PIPE)
#       network_clients_count = int(nmap.stdout.readlines()[0])
#       print network_clients_count

#       poster = Poster()
#       poster.post_door_state(base_url, arduino.is_door_open(), security_token)
#       poster.post_temperature(base_url, str(arduino.get_temperature()), security_token)
#       poster.post_clients(base_url, str(network_clients_count), security_token)

        time.sleep(3)

from threading import Thread
import serial
import random
import time 
```

这是应该不断从串口获取值的线程：

```
class Arduino(Thread):
    def __init__(self, port):
        Thread.__init__(self, target=self.recieve)
        self.daemon = True
        self.last_recieved = None

        self.serial = self.configure_port(port)
        self.serial.open()

    def configure_port(self, port_id):
        ser = serial.Serial(port=port_id, timeout=1)
        ser.rtscts = True
        ser.dsrdtr = True

        return ser

    def recieve(self):
        while True:
            self.serial.flushInput()
            self.serial.flushOutput()
            if self.serial.isOpen():
                self.last_recieved = self.serial.readline().replace("\r\n", "").split("|")

    def getLastRecieved(self):
        return self.last_recieved

    def is_door_open(self):
        try:
            lumen = int(self.getLastRecieved()[1])
            return_val = lumen > 150
        except Exception:
            return_val = None
            pass

        return return_val

    def get_temperature(self):
        try:
            temperature = int(float(self.getLastRecieved()[0]))
            temperature_offset = -5
            return_val = int(temperature) + temperature_offset
        except Exception:
            return_val = None
            pass

        return return_val 
```

现在，当我第一次启动`run.py`时，它永远不会从串口获取数据。他们永远都是`None`。

当我跑

`ino serial`（开始`picocom`）

并点击`Enter`，Arduino 将其所有数据发送到流中。如果我通过退出 picocom`Q`然后 start `run.py`，python脚本可以从串口读取所有数据。

所以我想知道：我在初始化中缺少什么？如何使用`picocom`via自动化串口初始化`python`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:22:33.113

我使用以下代码使用 python 连接到我的 arduino 并接收数据：

```
import serial 
```

类 Arduino（）：

```
def __init__(self):
    try:
        self.arduino = serial.Serial('/dev/ttyUSB0', 9600)
        self.receivethread = threading.Thread(target=self.receive)
        #self.receivethread.start()
    except serial.error as message:
        pass
    except threading.ThreadError as message:
        pass
    except Exception as message:
        pass

def receive(self):
    while 1:
        if self.arduino.open():
            try:
                datapacket = self.arduino.readline(30, chr(0))
            except Exception as message:
                pass
            except serial.error as message:
                pass)
        else:
                pass

    return datapacketdecoded 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T07:29:06.433

我通过乞求这个问题来解决这个问题。我将我的 Arduino`loop`方法更改为：

```
void loop() {
    temp = analogRead(4) * .4882812 - 273.15;
    lumen = analogRead(0);
    Serial.print(temp);
    Serial.print("|");
    Serial.print(lumen);
    Serial.println();
    delay(10);
} 
```

这将*通过*. `run.py`_ 虽然我仍然想知道输入的期望是什么。*`picocom``Serial.available()`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T06:41:01.327

```
import serial

ser=serial.Serial('/dev/ttyUSB0', 9600, timeout=3) 
```*

# xslt - 创造什么？函数或模板还是？

> ID：15176059
> 
> 赞同：2
> 
> 时间：2013-03-02T15:20:39.913
> 
> 标签：xslt, xslt-2.0, xpath-2.0

我有以下问题，请参阅代码示例：

```
<xsl:if test="/Document/test/id">
  <TEST1>
     <xsl:value-of select="/Document/test/id"/>
   </TEST1>
</xsl:if> 
```

我有一个巨大的 xslt 脚本，里面有很多相同的代码。我想创建一个函数，但我总是遇到错误。我在问自己这是否是解决这个问题的正确解决方案。

为了使代码更好地维护，我想使用类似下面的东西。这不是 xslt 语法，因为我不知道怎么做，而是想知道我在寻找什么。

```
...
<xsl:something "TEST1", "/Document/test/id1" />
<xsl:something "TEST2", "/Document/test/id2" />
... 
```

尽管我不知道如何解决这个问题，但代码的可读性和可维护性会更好:-(欢迎任何建议......

问候德克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:25:06.663

**这种转变**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:my="my:my" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:variable name="vDoc" select="/"/>

 <xsl:template match="/">
     <xsl:sequence select="my:test(xs:QName('Test1'), /*/test/id1/string())"/>
     <xsl:sequence select="my:test(xs:QName('Test2'), /*/test/id2/string())"/>
     <xsl:sequence select="my:test(xs:QName('Test3'), /*/test/id3/string())"/>
     <xsl:sequence select="my:test(xs:QName('Test4'), /*/test/id4/string())"/>
 </xsl:template>

 <xsl:function name="my:test">
   <xsl:param name="pName" as="xs:QName"/>
   <xsl:param name="pToPresent" as="item()?"/>

   <xsl:if test="$pToPresent">
     <xsl:element name="{$pName}">
             <xsl:sequence select="$pToPresent"/>
     </xsl:element>
   </xsl:if>
 </xsl:function>
</xsl:stylesheet> 
```

**应用于以下 XML 文档时：**

```
<Document>
 <test>
  <id1>Some Id1</id1>
 </test>
 <test>
  <id2>Some Id2</id2>
 </test>
 <test>
  <id4>Some Id4</id4>
 </test>
</Document> 
```

**产生了想要的正确结果：**

```
<Test1>Some Id1</Test1>
<Test2>Some Id2</Test2>
<Test4>Some Id4</Test4> 
```

**请注意**：

1.  的第一个参数`my:test()`声明为 type `xs:QName`，它保证指令的`name`属性值`xsl:element`始终是有效名称。

2.  的第二个参数`my:test()`被非常松散地声明为 type `item()?`，这使我们可以自由地提供任何类型的项目（字符串或节点或元素，或...），并且所提供的内容将“按原样”复制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T17:27:08.607

我认为这是最接近你想要的：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:f="custom-functions" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>

  <xsl:template match="/">
    <CONTENT>
      <xsl:sequence select="f:rename('TEST1', /Document/test/id1)"/>
      <xsl:sequence select="f:rename('TEST2', /Document/test/id2)"/>
    </CONTENT>
  </xsl:template>

  <xsl:function name="f:rename">
    <xsl:param name="name" as="xs:string"/>
    <xsl:param name="toWrap" />

    <xsl:if test="$toWrap">
      <xsl:element name="{$name}">
        <xsl:value-of select="$toWrap"/>
      </xsl:element>
    </xsl:if>
  </xsl:function>
</xsl:stylesheet> 
```

在以下输入上运行时：

```
<Document>
  <test>
    <id1>Hello!</id1>
    <id2>Hello again!</id2>
  </test>
</Document> 
```

产生的输出是：

```
<CONTENT>
   <TEST1>Hello!</TEST1>
   <TEST2>Hello again!</TEST2>
</CONTENT> 
```

您也可以试试这个，它有点冗长，但与 XSLT 1.0 兼容：

```
<xsl:stylesheet version="1.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>

  <xsl:template match="/">
    <CONTENT>
      <xsl:apply-templates select="/Document/test/id1" mode="rename">
        <xsl:with-param name="name" select="'TEST1'" />
      </xsl:apply-templates>
      <xsl:apply-templates select="/Document/test/id2" mode="rename">
        <xsl:with-param name="name" select="'TEST2'" />
      </xsl:apply-templates>
    </CONTENT>
  </xsl:template>

  <xsl:template match="@* | node()" mode="rename">
    <xsl:param name="name" />
    <xsl:element name="{$name}">
      <xsl:value-of select="." />
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

在上面的示例 XML 上运行时，再次生成相同的输出。

# c++ - 模板函数参数和模板成员函数参数

> ID：15176060
> 
> 赞同：2
> 
> 时间：2013-03-02T15:20:53.060
> 
> 标签：c++, templates

我有这个问题：

```
template <void (*F)(int)> struct FunctionWrapper // This compiles and works
{
    static void call_it() 
    { 
        F(0); 
    }
};

class MyClass
{
public:
    static void callMe(int k)
    {
    }
};

template <void (MyClass::*F)(int)> struct FunctionWrapper // Error - F incompatible with declaration
{
    static void call_it() 
    { 
        MyClass::F(0); 
    }
}; 
```

为什么我可以使用函数指针（编译时间常数）但不能使用类成员（甚至是静态的）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:24:53.253

静态函数与普通函数具有相同的类型签名；它不是真正的成员函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T15:25:07.233

> 为什么我可以使用函数指针（编译时间常数）但不能使用类成员（甚至是静态的）？

您可以将指向静态函数的指针用作常规函数指针。例如，以下工作：

```
template <void (*F)(int)> struct FunctionWrapper
{
    static void call_it()
    {
        F(0);
    }
};

class MyClass
{
public:
    static void callMe(int k)
    {
    }
};

int main()
{
    FunctionWrapper<&MyClass::callMe> obj;
    obj.call_it();
} 
```

关于您的尝试，这是 C++11 标准第 14.1/4 段要求的内容：

> 非类型模板参数应具有以下类型之一（可选 cv 限定）：
> 
> — 整数或枚举类型，
> 
> — 指向对象的指针或**指向函数**的指针，
> 
> — 对对象的左值引用或对函数的左值引用，
> 
> — 指向成员的指针，
> 
> — std::nullptr_t。

指向*成员*函数的指针（即使`static`）不是非类型模板参数的选项。

# c++ - 使用 g++ 的成员函数的未定义引用

> ID：15176062
> 
> 赞同：1
> 
> 时间：2013-03-02T15:21:08.703
> 
> 标签：c++, templates, reference, g++, undefined

由于某些原因，有时当我在 CPP 文件中而不是在它们的声明头中定义我的成员函数时，我会从 g++ 中得到未定义的引用错误。这个问题类似于[未定义的对成员函数的引用](https://stackoverflow.com/questions/7206633/undefined-reference-to-member-function)，但该用户设法通过将丢失的文件添加到他的命令行来解决问题，这似乎在这里不起作用。顺便说一句，我不反对使用 makefile；事实上，每当我习惯了这些命令时，我最终都会这样做。

我的主文件（'ringbuftest.cpp'）：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <iostream>
#include <cstring>
#include "ringbuffer.h"
using namespace std;

void *reader(void* param);
void *writer(void* param);

struct pack{
  char msg[256];
};

RINGBUFFER<pack> *ringo;

int main(){
pthread_t rdr;
pthread_t wtr;

ringo = new RINGBUFFER<pack>(12);

int ret1 = pthread_create(&rdr,NULL,reader,(void*)NULL);
int ret2 = pthread_create(&wtr,NULL,writer,(void*)NULL);

#ifdef _unix
cout<< "unix single underscore\n";
#elif defined __unix
cout<< "unix two underscores\n";
#endif

pthread_join(wtr,NULL);
pthread_join(rdr,NULL);

cout<< "threads are done\n";
exit(0);
return 0;
}

void *reader(void *param){
  pack myPack;
  while(true)
  {
    for(int i=0;i<10000;i++){int k=0;k=i;k++;i=k;i--;}
    if( ringo->Pop(&myPack) )
    {
      cout<< myPack.msg;
    }
  }
}
void *writer(void *param){
  pack myPack;
  while(true){
    strcpy(myPack.msg,"hello reader!\n");
    ringo->Push(&myPack);
  }
} 
```

我的班级标题（'ringbuffer.h'）：

```
#include<stdlib.h>
using namespace std;

#ifndef __ring_buffer_h__
#define __ring_buffer_h__

#define RINGBUFFER_DEFAULT_SIZE 8

template <class T>
class RINGBUFFER
{
private:
    unsigned int top;
    unsigned int bottom;
    unsigned int size;
    unsigned int count;
    void *items;
public:
    RINGBUFFER();
    RINGBUFFER(unsigned int size);
    ~RINGBUFFER();
    bool Push(T *value);
    bool Pop(T *value);
};

#endif 
```

我的类定义（'ringbuffer.CPP'）：

```
#include "ringbuffer.h"

template<class T>
RINGBUFFER<T>::RINGBUFFER()
{
    top = bottom = 0;
    size = RINGBUFFER_DEFAULT_SIZE;
    count = 0;
    items = malloc((size+1)*sizeof(T));
}

template<class T>
RINGBUFFER<T>::RINGBUFFER(unsigned int _size)
{
    top = bottom = 0;
    size = _size;
    count = 0;
    items = malloc(size*sizeof(T));
}

template<class T>
RINGBUFFER<T>::~RINGBUFFER()
{
    free(items);
}

template<class T>
bool RINGBUFFER<T>::Push(T *value)
{
    if( count<size )
    {
        memcpy(&(((T*)items)[bottom]),value,sizeof(T));
        bottom = (bottom+1)%size;
        count++;
        return true;
    }
    return false;
}

template<class T>
bool RINGBUFFER<T>::Pop(T *value)
{
    if( count>0 ) 
    {
        memcpy(value,&(((T*)items)[top]),sizeof(T));
        top = (top+1)%size;
        count--;
        return true;
    }
    return false;
} 
```

要编译，我一直在尝试使用：

```
g++ ringbuffer.CPP ringbuftest.cpp -lpthread -o ringbuffertest.o 
```

我得到了错误：

```
/tmp/ccj8RqhY.o: In function `main':
ringbuftest.cpp:(.text+0x21): undefined reference to `RINGBUFFER<pack>::RINGBUFFER(unsigned int)'
/tmp/ccj8RqhY.o: In function `reader(void*)':
ringbuftest.cpp:(.text+0x157): undefined reference to `RINGBUFFER<pack>::Pop(pack*)'
/tmp/ccj8RqhY.o: In function `writer(void*)':
ringbuftest.cpp:(.text+0x1db): undefined reference to `RINGBUFFER<pack>::Push(pack*)'
collect2: error: ld returned 1 exit status 
```

我猜我在使用 g++ 时做错了，因为我在不同的项目中一直遇到这个问题，或者我使用的模板错误。（？）我该如何解决这个错误？

编辑：我应该提一下，如果我将成员定义粘贴到头文件中并从 g++ 命令中排除 .CPP ，这将完美编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:23:35.563

您需要移动`RINGBUFFER<T>`from `ringbuffer.cpp`to的整个定义，以便在编译`ringbuffer.h`时可见。`ringbuftest.cpp`

# c# - AviFile 库创建大于 2 GB 的 avi - 不可用

> ID：15176067
> 
> 赞同：0
> 
> 时间：2013-03-02T15:21:43.303
> 
> 标签：c#, compression, avi

我正在使用 AviFile 库从来自 Kinect 的位图制作 avi 视频。文件大小变得非常高，超过 2 GB 我无法再打开这些文件。我将不得不压缩这些文件。有谁知道我如何压缩它的工具或比 AviFile 更好的库？

亲切的问候

亚历山大·齐格勒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:01:45.937

好的，我已经解决了！最大的问题是处理来自 kinect 的大量图像。通过压缩，无法将它们写入文件（--> 内存不足）。所以我将它们作为字节写入文件（在录制期间）。录制后我将它们读出，压缩它们并保存为 avi（文件变得小得多，大约 100 MB）。感谢您的每一条评论

# javascript - 理解 underscore 的 isNaN 实现

> ID：15176076
> 
> 赞同：7
> 
> 时间：2013-03-02T15:22:42.430
> 
> 标签：javascript, numbers, underscore.js, nan

取自 underscore.js 源：

```
_.isNaN = function(obj) {
  return _.isNumber(obj) && obj != +obj;
}; 
```

他们为什么这样做？上述实现是否等同于：

```
_.isNaN = function(obj) {
  return obj !== obj;
}; 
```

如果是，为什么是“更复杂”的版本？如果不是，行为差异是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T15:31:59.653

`_.isNaN(new Number(NaN))`返回真。

这是[设计使然](https://github.com/documentcloud/underscore/issues/749)。

```
var n = new Number(NaN);
console.log(_.isNaN(n), n!==n); // logs true, false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T15:52:21.753

宿主环境（例如网络浏览器环境）可能会引入其他不等于自身的值。该`_.isNumber(obj)`部分确保输入是一个数字值，因此只有在传递该值`_.isNaN`时才返回。`true``NaN`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T15:56:41.010

如果 + 在任何没有前面值的值之前给出 + ，JavaScript 引擎将尝试将该变量转换为 Number。如果它是有效的，它会给你 Number 否则它将返回 NaN。例如

```
 + "1" // is equal to integer value 1
 + "a1" // will be NaN because "a1" is not a valid number 
```

在上述情况下

```
 +"a1" != "a1" // true, so this is not a number, one case is satisfied
 +"1" == "1" // true, so it is number 
```

另一个简单的情况是，为什么下面的表达式给出这个输出

```
 console.log("Why I am " + typeof + "");
 // returns "Why I am number" 
```

因为 +"" 是 0。

如果你想检查它是否是一个数字，你可以使用下面的函数

```
function isNumber(a){ 
   /* first method : */  return (+a == a);
   /* second method : */  return (+(+a) >= 0);
   // And so many other exists
} 
```

如果我在某处错了，请有人纠正我..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-24T13:33:25.727

我找到了一个 _.isNaN 的案例

```
_.isNaN({}) => false
//but
isNaN({}) => true 
```

# javascript - 如何使用 jquery 和 razor 制作搜索表单

> ID：15176078
> 
> 赞同：2
> 
> 时间：2013-03-02T15:22:53.370
> 
> 标签：javascript, jquery, razor

我使用 webmatrix 制作了一个 CRUD 应用程序。我正在使用 jquery 和 razor 语法。由于我仍在学习，我花了很长时间才弄清楚如何使用 jquery 并在我的 asp.net 中实现它。

以下是我所做的代码：

```
 $('#grid').click({
                 function () {
                        $.ajax({
                            type: "POST",
//javascript code here

</script>
</head>
<body>
input type="text" name="fname"><<input type="button" value="Submit form">

<div id="grid" class="ui-widget">
    @RenderPage("~/Partials/Recipient.cshtml")
</div> 
```

我对一种方式感兴趣，当我单击提交按钮时，我的文本框中的值将发布到我的 Recpient.cshtml 并执行，然后在搜索下方呈现。我被困在这里，我需要将输入值发布到 Partials/Recipient.cshtml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:05:59.947

首先，您配置您的 ajax 调用（这会将您的`fname`输入字段的值作为`POST`参数发送到您的`Recipient.cshtml`脚本），然后`Recipient.cshtml`在成功时处理输出。

它应该看起来像：

```
$.ajax({
url: "Partials/Recipient.cshtml",
type: "POST",
data: { fname: $('input[name$="fname"]').val() }
success: function(ajaxoutput)
{
    //dosomething();
}
}); 
```

更多信息：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# java - 负字符值 JAVA

> ID：15176079
> 
> 赞同：5
> 
> 时间：2013-03-02T15:22:56.897
> 
> 标签：java, char, int

为什么会出现以下情况：

```
char p = 0;
p--;
System.out.println(p); 
```

结果**65535**

为什么不给出编译错误或运行时异常？我期望它，因为字符不能为负数。相反，它从倒挂开始倒数。提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-02T15:24:20.920

> 为什么不给出编译错误或运行时异常？

因为语言规范要求原始类型的算术是模，`2^width`所以`-1`变成.`2^16-1``char`

在[整数运算部分中](http://docs.oracle.com/javase/specs/jls/se5.0/html/typesValues.html#4.2.2)，指出

> 内置整数运算符不会以任何方式指示上溢或下溢。

这样就禁止抛出异常。

对于使用的后缀减量运算符，具体而言，其行为在[15.14.3中指定](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.14.3)

> 否则，从变量的值中减去值 1，并将差值存储回变量中。在减法之前，对值 1 和变量的值执行二进制数字提升（第 5.6.2 节）。如有必要，可通过缩小原语转换（第 5.1.3 节）和/或在存储变量之前对其类型进行装箱转换（第 5.1.7 节）来缩小差异。后缀递减表达式的值是变量在新值被存储之前的值。

二进制数字提升将值和 1 都转换为`int`（因为这里的类型是`char`），因此您将中间结果`-1`作为`int`，然后执行缩小原语转换：

> 有符号整数到整数类型 T 的窄化转换只会丢弃除 n 个最低位之外的所有位，其中 n 是用于表示类型 T 的位数。除了可能丢失有关数值大小的信息之外，这可能会导致结果值的符号与输入值的符号不同。

产生一个`char`值`0xFFFF`（因为 Java 为其有符号整数类型指定了二进制补码表示，在[一元减号](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.15.4)的规范中明确说明）：

> 对于整数值，求反与从零减法相同。**Java 编程语言对 integers 使用二进制补码表示**，并且二进制补码值的范围不是对称的，因此最大负 int 或 long 的否定会导致相同的最大负数。这种情况下会发生溢出，但不会抛出异常。对于所有整数值 x，-x 等于 (~x)+1。

对于超出范围结果的一般环绕行为，作为[乘法运算符规范中的](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.17.1)示例：

> 如果整数乘法溢出，则结果是数学乘积的低位，以某种足够大的二进制补码格式表示。因此，如果发生溢出，则结果的符号可能与两个操作数值的数学乘积的符号不同。

类似的短语出现在整数加法的规范中，并且需要减法来实现`a - b == a + (-b)`，因此溢出行为如下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T15:24:07.990

因为这就是 Java 语言的定义方式。运行时不会检查每个操作的边界（可能是因为它会非常昂贵）。它只是上溢或下溢。

# arrays - Matlab：对数组维度求和

> ID：15176081
> 
> 赞同：0
> 
> 时间：2013-03-02T15:23:01.510
> 
> 标签：arrays, matlab, multidimensional-array, sum

我已经做了相当多的搜索，到目前为止还没有找到满意的答案，所以如果这个问题已经被提出，我很抱歉。

我被困在如何对数组的维度求和。我有数组 A(w0,lambda,2048,2048)，我希望能够定义第二个数组 U(w0, 2048, 2048)，它由 A 在维度 lambda 上的总和组成。

到目前为止，我一直在定义 A 和 U 如下：

```
A = zeros(length(w0),length(lambda),2048,2048);
U = zeros(length(w0),2048,2048);
for ii = 1:length(w0)                    % Scan through spot sizes
    for aa = 1:length(lambda)            % Scan through wavelengths
          A(ii,aa,:,:) = ASM(w0(ii),lambda(aa),z1,z2);
    end
    U(ii,:,:) = sum(A,2);
end 
```

ASM 只是一个函数。z1 和 z2 之前定义过，这里不相关。

我一直试图想出其他可能的方法来找到 U(w0,2048,2048) 作为 A (lambda) 的第二维的总和，但没有成功......

感谢您的任何指点，如果这已经解决，再次抱歉！

詹姆士。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:08:24.170

从它的声音来看，你只想要：

```
U = squeeze(sum(A, 2)); 
```

[`squeeze()`](http://www.mathworks.co.uk/help/matlab/ref/squeeze.html)消除了单件维度。

以下是两种替代解决方案：

```
U = reshape(sum(A, 2), [length(w0) 2048 2048]); 
```

或者：

```
U = sum(A, 2);
U = U(:, 1, :, :); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:09:33.753

尝试使用带有维度参数的“ [sum ”函数，并在所需维度上折叠结果。](http://www.mathworks.com/help/matlab/ref/sum.html)

```
z = rand(2,3,2,2);
q = sum(z,2); %sum all 3 matrices of size 2x2x2 to get 2x1x2x2 result
zz = q(:,1,:,:); %zz is now 2x2x2, by collapsing the dimension 2. 
```

# node.js - npm package.json 操作系统特定依赖

> ID：15176082
> 
> 赞同：69
> 
> 时间：2013-03-02T15:23:04.817
> 
> 标签：node.js, npm, node-gyp

有没有办法在 npm package.json 文件中指定操作系统特定的依赖项？

例如，如果用户正在运行 Linux，我只想安装 'dbus' ( [https://npmjs.org/package/dbus](https://npmjs.org/package/dbus) ) 作为我的模块的依赖项。我对 Mac 和 Windows 会有不同的依赖。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-09-26T23:14:52.397

有一种可能的好方法可以做到这一点，具体取决于您的设置。

npm package.json 支持[os](https://docs.npmjs.com/files/package.json#os)密钥，

还有[可选的依赖项](https://docs.npmjs.com/files/package.json#optionaldependencies)

*   `os`可用于指定模块可以安装在哪个操作系统上。
*   `optionalDependencies`是模块依赖项，如果无法安装，npm 会跳过它们并继续安装。

通过这种方式，您可以让您的模块对每个操作系统都有一个可选的依赖项，并且只有可以加载/安装的模块才会被加载/安装 ^.^

**EDIT:** As @Sebastien mentions below, **this approach is dangerous**. For any given OS, at least one of your dependencies is "required" and the rest "optional". Making all versions of the dependency optional means that if your installation fails for a legitimate reason, it will silently skip installation and you will be missing a dependency you really need.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-27T21:42:19.060

我认为简短的回答是否定的。不过，我可以想到几种解决方法——最简单的方法是将所有内容添加到 package.json 中，而不管操作系统如何，然后`require()`在运行时添加正确的内容。

如果这对您不起作用，您也许可以使用安装脚本来获得您想要的结果 - [https://docs.npmjs.com/misc/scripts](https://docs.npmjs.com/misc/scripts)

我没有对此进行测试，但我认为它会起作用：

在你的 package.json 中添加这样的内容：

```
,"scripts": {
  "install": "node install_dependencies.js"
} 
```

然后添加一个`install_dependencies.js`检查操作系统并运行相应`npm install ...`命令的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-26T23:37:15.890

There's also the **bindings-shyp** module:

[https://www.npmjs.com/package/bindings-shyp](https://www.npmjs.com/package/bindings-shyp)

> **Helper module for loading your native module's .node file**
> 
> This is a helper module for authors of Node.js native addon modules. It is basically the "swiss army knife" of require()ing your native module's .node file.
> 
> Throughout the course of Node's native addon history, addons have ended up being compiled in a variety of different places, depending on which build tool and which version of node was used. To make matters worse, now the gyp build tool can produce either a Release or Debug build, each being built into different locations.
> 
> This module checks all the possible locations that a native addon would be built at, and returns the first one that loads successfully.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-26T17:23:39.900

Quoting @npm_support at:

[https://twitter.com/npm_support/status/968195526989512705](https://twitter.com/npm_support/status/968195526989512705)

> 2/2 If you'd like to avoid installation problems related to dependencies, one route is for you to write a wrapper that's required as a regular dependency, and to make sure that it has `optionalDeps` (and also ensure that the wrapper verifies you have everything needed to work).

But IMHO it looks more like a workaround than solving the problem for real.

I can understand that npm wants to preserve portability and avoid to deal with platform specifics, but it has to be done anyway and IMHO doing this at runtime is not optimal (specialty if one wants do optimize code size).

So today I have no optimal solution to share but an open discussion for proposal.

Can't "conditional dependencies" be supported in npm ?

The 1st thing that came to my mind was to to add a "override" section that will change (+add, -remove, =replace) current parsed sections.

For example:

`dependencies: { "common-stuff": "*" } overrides: { "os: { linux: { dependencies: { "+best-linux-module" } } } }`

And other option suggested by a developer I know, would be to introduce a **provides** keyword, then several modules could provide a same semantic than would be satisfied by resolver (a la debian), but it's generating similar overhead.

I am looking for a generic approach not only focused on OS support but also on other flavors of package (depending on engines for instance).

Do you know any related issue in NPM tracker ? if not I am considering to file a bug to be tracked at:

[https://github.com/npm/npm/issues?q=dependencies+conditional](https://github.com/npm/npm/issues?q=dependencies+conditional)

Feedback welcome on this idea.

# c# - 如何在 wpf 中为 ResourceDictionary 动态添加键和值？

> ID：15176083
> 
> 赞同：1
> 
> 时间：2013-03-02T15:23:16.597
> 
> 标签：c#, wpf, resourcedictionary

```
<Application
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
x:Class="MultiLanguage.App"
StartupUri="MainWindow.xaml">
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary x:Name="LanguageDictionary" Source="/LanguageResources;component/EnglishResources.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

**英语资源.xaml**

```
<ResourceDictionary
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:sys="clr-namespace:System;assembly=mscorlib">

<sys:String x:Key="add">ADD</sys:String>
<sys:String x:Key="key">Key</sys:String>
<sys:String x:Key="stringValue">String Value</sys:String> 
```

**主窗口.xaml**

```
<Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
x:Class="MultiLanguage.MainWindow"
x:Name="Window"
Title="MainWindow"
Width="640" Height="480">

<Grid x:Name="LayoutRoot" HorizontalAlignment="Center" VerticalAlignment="Center">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="Auto"/>
    </Grid.ColumnDefinitions>
    <Button x:Name="btnAdd" Content="{DynamicResource add}" Height="48" Grid.Column="0" Grid.Row="3" Grid.ColumnSpan="2" Margin="10" Click="btnAdd_Click" />
    <TextBlock Text="{DynamicResource key}" Height="40" Width="100" Grid.Column="0" Grid.Row="0" Margin="10"/>
    <TextBlock Text="{DynamicResource stringValue}" Height="40" Width="100" Grid.Column="0" Grid.Row="1" Margin="10"/>
    <TextBox x:Name="txtKey" Height="40" Width="200" Grid.Column="1" Grid.Row="0" Margin="10"/>
    <TextBox x:Name="txtStringValue" Height="40" Width="200" Grid.Column="1" Grid.Row="1" Margin="10"/>
</Grid> 
```

使用上面的代码，我得到以下窗口

![在此处输入图像描述](../Images/ca6138c0befccfed3c0c95dc55441fdd.png)

```
private void btnAdd_Click(object sender, RoutedEventArgs e)
    {
        AddKeyValue(txtKey.Text, txtStringValue.Text);
    }

    private void AddKeyValue(object key, object value)
    {
        // load the resource dictionary
        var rd = new System.Windows.ResourceDictionary();
        rd.Source = new System.Uri("pack://application:,,,/LanguageResources;component/EnglishResources.xaml", System.UriKind.RelativeOrAbsolute);

        // add the new key with value
        rd.Add(key, value);

        // now you can save the changed resource dictionary
        var settings = new System.Xml.XmlWriterSettings();
        settings.Indent = true;
        var writer = System.Xml.XmlWriter.Create(@"EnglishResources.xaml", settings);
        System.Windows.Markup.XamlWriter.Save(rd, writer);
    } 
```

如果我单击添加按钮，则应将值插入到我已经拥有的资源字典中（EnglishResources.xaml）。但它不是插入。请帮帮我。

**我需要喜欢**

```
<ResourceDictionary
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:sys="clr-namespace:System;assembly=mscorlib">

<sys:String x:Key="add">ADD</sys:String>
<sys:String x:Key="key">Key</sys:String>
<sys:String x:Key="stringValue">String Value</sys:String>

<!-- the value should be inserted here. But not Insert-->

</ResourceDictionary> 
```

**添加后**

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"    xmlns:s="clr-namespace:System;assembly=mscorlib">

<s:String x:Key="add">ADD</sys:String>
<s:String x:Key="key">Key</sys:String>
<s:String x:Key="stringValue">String Value</sys:String>

<!-- the value should be inserted here. But not Insert-->

</ResourceDictionary> 
```

在我将值添加到资源字典中后，我得到了类似上面的结果。**sys**更改为s **，**名称空间合并为一行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T19:40:02.877

你可以用这个简单的解决方案来做到这一点

```
private void AddKeyValue(object key, object value) {
  // load the resource dictionary
  var rd = new System.Windows.ResourceDictionary();
  rd.Source = new System.Uri("pack://application:,,,/YOURAssemblyName;component/EnglishResources.xaml", System.UriKind.RelativeOrAbsolute);

  // add the new key with value
  //rd.Add(key, value);
  if (rd.Contains(key)) {
    rd[key] = value;
  } else {
    rd.Add(key, value);
  }

  // now you can save the changed resource dictionary
  var settings = new System.Xml.XmlWriterSettings();
  settings.Indent = true;
  var writer = System.Xml.XmlWriter.Create(@"EnglishResources.xaml", settings);
  System.Windows.Markup.XamlWriter.Save(rd, writer);
} 
```

用法

```
AddKeyValue("NewKey1", "StringValue");
AddKeyValue("NewKey2", 1000); 
```

希望有帮助。

# c++ - 如何通过模板调用运算符重载？

> ID：15176084
> 
> 赞同：0
> 
> 时间：2013-03-02T15:23:30.907
> 
> 标签：c++, visual-studio-2010, operator-overloading

请看下面的代码

**树.h**

```
//Tree Data Structure.

    #pragma once
    #include <iostream>
    #include "Player.h"
    template <typename T>

    class Tree
    {
    public:
        T* root;

    Tree(void)
    {
        root = 0;
    }

    Tree::~Tree(void)
    {
    }

    //Find elements in tree (Find() function removed)

    //Display values in tree (Display() Function removed)

    //Insert data into tree
    void Insert(T * data)
    {
        T *newNode = data;

        if(this->root == 0)
        {
            root = newNode;
        }
        else
        {
            T *current = root;
            T *parent;

            while(true)
            {
                parent = current;

                if(data->id < current->id)
                {
                    current = current->leftChild;

                    if(current==0)
                    {
                        parent->leftChild = newNode;
                        return;
                    }
                }
                else
                {
                    current = current->rightChild;

                    if(current==0)
                    {
                        parent->rightChild = newNode;
                        return;
                    }
                }
            }
        }
    }
    }; 
```

**播放器.h**

```
#pragma once
#include "GameObject.h"
#include "Tree.h"

class Player:public GameObject
{
public:
    Player(void);
    ~Player(void);

    Player *rightChild;
    Player *leftChild;

    void Display();
    bool operator !=(const Player&);
    bool operator <(const Player&);

}; 
```

**播放器.cpp**

```
#include "Player.h"
#include <iostream>

Player::Player(void)
{
    leftChild = 0;
    rightChild = 0;
}

Player::~Player(void)
{
}

bool Player::operator!=(const Player& player)
{
    if(instances==NULL)
    {
        return false;
    }
    else
    {
        return true;
    }
}

bool Player::operator<(const Player& player)
{

    if(this->instances < player.instances)
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

在这里，`Tree`是一个模板。该类`Player`是将插入到树中的类。

在`Tree.h`, inside`Insert()`方法中，`if(data->id < current->id)`我不需要调用 Player 的`<`重载运算符。我怎样才能做到这一点？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:28:41.233

您可以取消引用您的指针，如下所示：

```
if (*data < *current) { ... } 
```

# java - 创建一个 ArrayList，其中包含用户定义的最小值和最大值之间的一组数字（JAVA）

> ID：15176086
> 
> 赞同：0
> 
> 时间：2013-03-02T15:23:33.967
> 
> 标签：java, arrays, arraylist

基本上，我需要创建一个名为：

```
public boolean doesContain(double x) 
```

像这样工作：

```
Returns true if and only if x lies between left and right, and the
interval is not empty (i.e. left < right). 
```

这就是类的样子：

```
public class Interval {

    private double left;
    private double right;

    public Interval(double left, double right){
        this.left = left;
        this.right = right;
    }

    public boolean doesContain(double x){

        ArrayList<Double> nums = new ArrayList<Double>();
        //Add code here

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:25:35.027

```
public boolean doesContain(double x){
    return left < right && left <= x && x <= right;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T15:28:09.723

```
public boolean doesContain(double x) {
    if (left >= right) {
        return false;
    } else {
        return x >= left && x <= right;
    }
} 
```

# ios - 如何自动调整 UIScrollView 的大小

> ID：15176089
> 
> 赞同：3
> 
> 时间：2013-03-02T15:23:39.593
> 
> 标签：ios, uiview, uiscrollview

在我的应用程序中是一个信息页。textllength 可能因本地化而有所不同。除此之外，3.5 英寸的屏幕比 4 英寸的显示器占用更少的空间。所以我试图实现的是 UILabel 在 ScrollView 内“生长”，并且 Scrollview 适应屏幕。

这是我的代码：

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

// Create a ScrollView and a label
UIScrollView *infoScroll = [[UIScrollView alloc] initWithFrame:CGRectMake(20.0f, 55.0f, 300.0f, 400.0f)];

CGRect labelFrame = CGRectMake(0, 0, 280, 800);
UILabel *infoLabel = [[UILabel alloc] initWithFrame:labelFrame];

NSString *labelText = NSLocalizedString (@"InfoText",@"");
[infoLabel setText:labelText];

// Tell the label to use an unlimited number of lines
[infoLabel setNumberOfLines:0];
[infoLabel setBackgroundColor:[UIColor clearColor]];
[infoLabel setFont:[UIFont boldSystemFontOfSize:17]];
infoLabel.textColor = [UIColor colorWithRed:255 green:255 blue:255 alpha:1.0];
[infoLabel sizeToFit];
infoScroll.contentSize = CGSizeMake(infoScroll.contentSize.width, infoLabel.frame.size.height);
[infoScroll addSubview:infoLabel];

[self.view addSubview:infoScroll];

} 
```

请指教，提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T15:42:34.220

通过以下方式修改您的功能：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    // Create a ScrollView and a label
    UIScrollView *infoScroll = [[UIScrollView alloc] initWithFrame:CGRectMake(20.0f, 55.0f, self.view.frame.size.width - 20.0, self.view.frame.size.height - 55)];
    infoScroll.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

    UILabel *infoLabel = [[UILabel alloc] initWithFrame:CGRectZero];
    infoLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;        

NSString *labelText = NSLocalizedString (@"InfoText",@"");
    [infoLabel setText:labelText];

    // Tell the label to use an unlimited number of lines
    [infoLabel setNumberOfLines:0];
    [infoLabel setBackgroundColor:[UIColor clearColor]];
    [infoLabel setFont:[UIFont boldSystemFontOfSize:17]];
    infoLabel.textColor = [UIColor colorWithRed:255 green:255 blue:255 alpha:1.0];
    //[infoLabel sizeToFit];

    CGSize infoLabelSize = [infoLabel.text sizeWithFont:infoLabel.font
               constrainedToSize:CGSizeMake(infoScroll.frame.size.width, 5000)
                   lineBreakMode:UILineBreakModeWordWrap];

    infoLabel.frame = CGRectMake(0, 0, infoLabelSize.width, infoLabelSize.height);
    infoScroll.contentSize = infoLabelSize;
    [infoScroll addSubview:infoLabel];

    [self.view addSubview:infoScroll];

} 
```

# java - Jetty 可以自动编译 *.java 文件吗？

> ID：15176092
> 
> 赞同：2
> 
> 时间：2013-03-02T15:23:53.463
> 
> 标签：java, jsp, jakarta-ee, servlets, jetty

我的应用程序的结构是：

```
/app
 |-src
 ||-Test.java
 |-WebContent
 ||-test.jsp
 ||-WEB-INF
 ||.. 
```

配置文件片段：

```
...
<New class="org.eclipse.jetty.webapp.WebAppContext">
    <Set name="contextPath">/</Set>
    <Set name="resourceBase">/app/WebContent/</Set>
    <Set name="extraClasspath">/app/src/</Set>
</New>
... 
```

*测试.jsp*：

```
<%
Test test;
%> 
```

*来自test.jsp*的错误消息：

```
PWC6033: Error in Javac compilation for JSP 
```

如何通过自动化获得*Test.class*（根据*Test.java*）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T10:53:12.187

Jetty 不能编译任何东西，它只是网络服务器。使用 maven 在 jetty 中部署您的项目。Maven 自动编译所有 *.java 文件。

# html - 不能跨越多个 div 的表单

> ID：15176098
> 
> 赞同：1
> 
> 时间：2013-03-02T15:24:45.813
> 
> 标签：html

每当我使用 a通过 a`<form>`关闭时，浏览器（至少 chrome 和 firefox）都会关闭标签。下面是示例代码`</form>``</div>``<form>`

```
<div class="modal-body">
  <form method="post" action="/api/users/">
    <textarea name="description">
    </textarea>
</div>
<div class="modal-footer">
  <input type="submit" class="btn btn-primary" value="Submit" />
  </form>
</div> 
```

这是[小提琴](http://jsfiddle.net/kevins8/BBfXb/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T15:26:38.377

你不能按照你展示的方式去做；它不是有效的 HTML。

如果要跨多个`<div>`'s 跨越表单，则需要将 form 标记放在它们之外：

```
<form method="post" action="/api/users/">
  <div class="modal-body">
    <textarea name="description">
    </textarea>
  </div>
  <div class="modal-footer">
   <input type="submit" class="btn btn-primary" value="Submit" />
  </div>
</form> 
```

# python - 此代码查看 html 结果 无

> ID：15176101
> 
> 赞同：-3
> 
> 时间：2013-03-02T15:24:54.623
> 
> 标签：python, urllib

我编写代码视图html。但结果为无。

```
# coding: UTF-8

import urllib

class View_html:
    def __init__(self):
        url = "http://www.yahoo.com/"
        self.data = urllib.urlopen(url)

    def html(self):
        self.data.read()

if __name__=="__main__":
    a = View_html()
    print a.html() 
```

结果

```
None 
```

如何更改此代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:25:18.200

您忘记了`return`关键字：

```
def html(self):
    return self.data.read() 
```

# c# - 另一个进程使用的图像

> ID：15176103
> 
> 赞同：0
> 
> 时间：2013-03-02T15:25:04.310
> 
> 标签：c#, image, bitmap

我正在获取计算机的屏幕截图，然后通过复制它然后使用它来将其设置为图片框，但是在第一次这样做之后，它说图片正在被另一个进程使用，但我猜我只是笨拙的。

```
 public void UpdatePic()
    {
        String newtemp = System.Environment.GetFolderPath(Environment.SpecialFolder.MyPictures) + "\\screentemp.png";
        if (File.Exists(newtemp)) { File.Delete(newtemp); }
        File.Copy(screendirect, newtemp);
        Image image = Image.FromFile(newtemp);
        try
        {
            using (Bitmap tempBitmap = new Bitmap(image))
            {
                Size size = new Size(pictureBox1.Width, pictureBox1.Height);
                Bitmap backgroundBitmap = new Bitmap(size.Width, size.Height);
                using (Graphics g = Graphics.FromImage(backgroundBitmap))
                {
                    g.InterpolationMode = InterpolationMode.HighQualityBicubic;
                    // Get the set of points that determine our rectangle for resizing.
                    Point[] corners = { new Point(0, 0), new Point(backgroundBitmap.Width, 0), new Point(0, backgroundBitmap.Height)};
                    g.DrawImage(tempBitmap, corners);
                    g.Dispose();
                }
                pictureBox1.Image = backgroundBitmap;

            }
        }
        finally
        {

        }
    } 
```

# c++ - 基于范围的循环：按值获取项目或引用 const？

> ID：15176104
> 
> 赞同：267
> 
> 时间：2013-03-02T15:25:07.383
> 
> 标签：c++, c++11

阅读一些基于范围的循环示例，他们提出了两种主要方式^([1](http://en.cppreference.com/w/cpp/language/range-for)) ^, ^([2](http://allanmcrae.com/2012/05/c11-part-3-range-based-for-loops/)) ^, ^([3](http://www.cprogramming.com/c++11/c++11-ranged-for-loop.html)) ^, ^([4](http://en.wikipedia.org/wiki/C++11#Range-based_for-loop))

```
std::vector<MyClass> vec;

for (auto &x : vec)
{
  // x is a reference to an item of vec
  // We can change vec's items by changing x 
} 
```

或者

```
for (auto x : vec)
{
  // Value of x is copied from an item of vec
  // We can not change vec's items by changing x
} 
```

出色地。

当我们不需要更改`vec`项目时，IMO，示例建议使用第二个版本（按值）。为什么他们不建议`const`参考的东西（至少我没有找到任何直接的建议）：

```
for (auto const &x : vec) // <-- see const keyword
{
  // x is a reference to an const item of vec
  // We can not change vec's items by changing x 
} 
```

不是更好吗？它不是避免在每次迭代中出现冗余副本`const`吗？

* * *

## 回答 #1

> 赞同：468
> 
> 时间：2013-03-02T15:27:29.477

如果您不想更改项目并且想要*避免*复制，那么`auto const &`是正确的选择：

```
for (auto const &x : vec) 
```

谁建议你使用`auto &`都是错误的。别理他们。

这是回顾：

*   选择`auto x`何时要使用副本。
*   选择`auto &x`何时要使用原始项目并可以修改它们。
*   选择`auto const &x`何时要使用原始项目并且不会修改它们。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-03-02T15:33:07.820

如果你有`std::vector<int>`or ，那么使用(with value copy) 而不是`std::vector<double>`就好了，因为复制 an or a很便宜：`auto``const auto&``int``double`

```
for (auto x : vec)
    .... 
```

但是，如果您有一个`std::vector<MyClass>`, where`MyClass`有一些非平凡的复制语义（例如`std::string`，一些复杂的自定义类等），那么我建议使用**`const auto&`以避免深度复制**：

```
for (const auto & x : vec)
    .... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-02T15:28:12.487

> 当我们不需要更改`vec`项目时，示例建议使用第一个版本。

然后他们给出了错误的建议。

> 为什么他们不建议 const 引用的东西

因为他们给出了错误的建议:-)你提到的是正确的。如果您只想**观察**一个对象，则无需创建副本，也无需对其进行非`const`引用。

**编辑：**

我看到您链接的所有引用都提供了迭代一系列`int`值或其他一些基本数据类型的示例。在这种情况下，由于复制 an`int`并不昂贵，因此创建一个副本基本上等同于（如果不是更有效）拥有一个 observing `const &`。

但是，对于用户定义的类型，情况通常并非如此。复制 UDT 的成本可能很高，如果您没有理由创建副本（例如修改检索到的对象而不更改原始对象），那么最好使用`const &`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T16:03:12.223

我将在这里相反，并说`auto const &`在基于范围的 for 循环中没有必要。告诉我你是否认为下面的函数很傻（不是它的目的，而是它的编写方式）：

```
long long SafePop(std::vector<uint32_t>& v)
{
    auto const& cv = v;
    long long n = -1;
    if (!cv.empty())
    {
        n = cv.back();
        v.pop_back();
    }
    return n;
} 
```

在这里，作者创建了一个 const 引用，`v`用于所有不修改 v 的操作。在我看来，这很愚蠢，并且可以使用相同的参数`auto const &`作为基于范围的 for 循环中的变量，而不仅仅是`auto &`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-31T11:48:11.480

我会考虑

```
for (auto&& o : range_expr) { ...} 
```

或者

```
for (auto&& o : std::as_const(range_expr)) { ...} 
```

它总是有效的。

并提防可能的[临时范围表达式](https://en.cppreference.com/w/cpp/language/range-for)陷阱。

在 C++20 中，你有类似的东西

```
for (T thing = foo(); auto& x : thing.items()) { /* ... */ } 
```

# c - 使用 write() 函数时文件描述符错误

> ID：15176108
> 
> 赞同：1
> 
> 时间：2013-03-02T15:25:22.497
> 
> 标签：c, file, file-descriptor

我想编写一个同时传输更多文件的程序。有一次我收到了错误的文件描述符错误。我做了什么？我将所有文件按大小降序排列（我按此顺序打开它们， f->filename[i] 不会改变）。我修改了这些文件的权限： chmod ugo+wrx 。当文件完全发送后，我在“for”之后减少 numberOfFiles。我的问题是，当我想写入文件时，它返回错误的文件描述符，但是当我想关闭该文件时，它工作正常。

这是一段不起作用的代码：

```
//open all the files that I want to send
        f->fileIndex[i] = open(f->fileName[i],O_RDONLY | O_CREAT);
        if (f->fileIndex[i] < 0 ) {
          perror("ERROR: Cannot open/create the file \n");
        }
....
for (i=1; i<numberOfFiles; ++i){
          if (write(f->fileIndex[i],aux,sz) == -1) {
            perror("ERROR Cannot write\n");
          }
          printf("%d %s\n",f->fileIndex[i],aux);
// aux = what I want to write
...
          if (f->size[i] <= 0) { //If the whole file was sent
            printf("close the file  %s\n",f->fileName[i]);
            if (close(f->fileIndex[i])) { // and here it works fine ...
              perror("cannot open the file\n");
            }
          }
} 
```

我检查了一下，file_descriptor 的值相同。请问我哪里错了，好吗？任何提示都会有所帮助！谢谢！

# grammar - 是否有确定语法歧义的固定方法？

> ID：15176113
> 
> 赞同：6
> 
> 时间：2013-03-02T15:25:42.110
> 
> 标签：grammar, context-free-grammar, bnf, ambiguous-grammar

我们在课堂上学习歧义，下面的语法是作为歧义语法的一个例子给出的。我只是没有看到它是多么模棱两可。是否存在人们用来确定歧义的固定模式或方法，或者它就像一个逻辑难题，您必须通过组合来找到语法中的歧义句子？我在网上阅读的示例大多已经给出了模棱两可的句子，但是您首先如何找到该句子？我会很感激任何帮助，谢谢。

```
< stmt_list> ==> < stmt>

               | < stmt> ; < stmt_list>

< var> ==> A | B | C

< stmt> ==> < var> + < var>

               | < var> - < var>

               | < var> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:40:56.493

通常，[确定语法是否模棱两可是不可判定的。](http://en.wikipedia.org/wiki/Ambiguous_grammar#Recognizing_ambiguous_grammars)所以是的，在语法中找到一个模棱两可的句子会变成一个非常困难的逻辑难题。不过，解决特定案例和寻找启发式方法是一个活跃的研究领域。这是一个很好的发现歧义的工具：[http](http://www.brics.dk/grammar/) ://www.brics.dk/grammar/ 。该网页包含一个指向一篇解释其工作原理的论文的链接，但老实说，这让我无法理解。

# wpf - MVVM + UserControl + 依赖属性

> ID：15176115
> 
> 赞同：5
> 
> 时间：2013-03-02T15:26:21.767
> 
> 标签：wpf, mvvm, user-controls, dependency-properties

好吧，这与这个问题有些相关：[WPF Printing multiple pages from a single View Model](https://stackoverflow.com/questions/15162274/wpf-printing-multiple-pages-from-a-single-view-model)

我试图遵循那里给出的建议，但现在我被困住了。

我的应用程序使用 MainView.xaml 和适当的 MainViewViewModel.cs，我在后台使用 MVVM Light。

现在-根据帖子-似乎我必须执行以下操作：

*   创建用户控件
*   从用户控件中公开一些属性
*   确保视图模型显示这些属性

这个想法很清楚，但是在尝试相互通知时我被卡住了。

我的用户控件 (UcTest.xaml) 公开了一个依赖属性：

```
public string SpecialText
{
    get { return (string)GetValue(SpecialTextProperty); }
    set
    {
        SetValue(SpecialTextProperty, value);

    }
}

// Using a DependencyProperty as the backing store for SpecialText.  This enables animation, styling, binding, etc...
public static readonly DependencyProperty SpecialTextProperty =
    DependencyProperty.Register("SpecialText", typeof(string), typeof(UcTest), new PropertyMetadata(new PropertyChangedCallback(SpecialTextChangedPropertyCallback)));

private static void SpecialTextChangedPropertyCallback(DependencyObject sender, DependencyPropertyChangedEventArgs e)
{
    // Do something
    Debug.WriteLine("Ffgdgf");
} 
```

好的，所以我现在确实有一个具有一些依赖属性的用户控件。然而，这些属性与我的 ViewModel 属性完全分开（那些是应该显示的）。

所以基本上我有两种可能性：

*   我现在如何告诉 UserControl 的 ViewModel 某些属性已更改？
*   是否有可能忘记依赖属性并直接访问视图模型？

附加信息#1：我已经上传了一个（简单）我在这里尝试做的例子：[Example Project](http://www.box.com/s/2eqdm4x8ujryl9k4b1mw)。我想从我的 MainViewViewModel 更改 UserControl1 中标签的值（通过 UserControl1 的 ViewModel 中的绑定属性）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T15:50:41.417

您通常会将UserControl 的属性[绑定](http://msdn.microsoft.com/en-us/library/ms752347.aspx)到 ViewModel 属性。双向绑定可以双向工作，从 ViewModel 到 View，反之亦然。

```
<Window x:Class="TestApplication.MainWindow" ...>
    <Window.DataContext>
        <local:MyViewModel/>
    </Window.DataContext>
    <Grid>
        <local:UcTest SpecialText="{Binding MyViewModelProperty, Mode=TwoWay}"/>
    </Grid>
</Window> 
```

要直接访问上例中的 ViewModel 对象，您可以简单地将 UserControl 的[`DataContext`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.datacontext.aspx)属性转换为 ViewModel 类型。DataContext 继承自 MainWindow。

```
var viewModel = DataContext as MyViewModel;
var property = viewModel.MyViewModelProperty; 
```

* * *

您当然也可以直接将专门的 ViewModel 实例分配给 UserControl 的`DataContext`：

```
<local:UcTest SpecialText="{Binding MyViewModelProperty, Mode=TwoWay}"/>
    <local:UcTest.DataContext>
        <local:UserControlViewModel/>
    </local:UcTest.DataContext>
</local:UcTest> 
```

或者您可以将 ViewModel 实例创建为资源字典中的资源并像这样分配 DataContext

```
<local:UcTest DataContext="{StaticResource MyUserControlViewModel}"
              SpecialText="{Binding MyViewModelProperty, Mode=TwoWay}"/> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T14:56:12.680

好吧，经过数小时的谷歌搜索，似乎“正确”的方法是根本不这样做。一般的方法是将数据保留在您的 MainViewModel 中，而不是为 UserControl 使用额外的 ViewModel（我发现它有点......好吧..不太好）。主要问题是没有简单的机制将数据从依赖属性获取到 ViewModel。

对于打印，我现在已经回到纯粹用代码来做。

# .htaccess - .htaccess 根据 url 重定向

> ID：15176121
> 
> 赞同：0
> 
> 时间：2013-03-02T15:27:02.423
> 
> 标签：.htaccess

在我的托管帐户中，我有域。一个位于根目录，另一个位于 /example/ 文件夹中。这是我的主 .htaccess 文件中的重定向代码，除了我刚刚描述的功能外，它工作正常。这个功能以前是有效的，然后神秘地停止了——

```
Options -MultiViews
RewriteEngine On
RewriteBase /

RewriteRule ^/example(.*)$ http://example.com/$1 [R=301,L]
# Rewrite /example to http://example.com

# Remove .php from file names and force added slash
# http://stackoverflow.com/questions/1068595/htaccess-code-to-remove-extension-and-addforce-trailing-slash
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{THE_REQUEST} ^GET\ /[^?\s]+\.php
RewriteRule (.*)\.php$ /$1/ [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*)/$ $1.php [L]

RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule .*[^/]$ $0/ [L,R=301] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:01:47.877

尝试删除前导斜杠，如下所示：

```
RewriteRule ^example(.*)$ http://example.com/$1 [R=301,L] 
```

# git - git中类似“dir”的命令

> ID：15176122
> 
> 赞同：0
> 
> 时间：2013-03-02T15:27:10.210
> 
> 标签：git, github, bitbucket

我想在 git 中查看当前目录中的文件。例如，在 linux **dir**命令中显示当前目录中的文件。git中有这样的命令吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T15:31:00.437

您可以使用`git ls-files`查看 git 中包含的所有文件。仅对于当前目录，使用`ls`.

# asp.net - 如何仅创建带有上一周和下一周按钮的周历

> ID：15176124
> 
> 赞同：1
> 
> 时间：2013-03-02T15:27:18.903
> 
> 标签：asp.net

我真的被困在这个问题上。我想要的是应该有 6 个表格单元格，我应该在其中有日期。像 2013 年 4 月 3 日星期一 2013 年 5 月 3 日星期二等到星期六。我还有两个按钮，上一周和下周按钮。当我单击下周按钮时，它应该会在下周自动显示，并且应该显示前一周每当我按下上一个按钮时.. 我还需要获取天/月和年的值，以便我可以在我的 sql 查询的 where 子句中使用它们.. 请任何人都可以帮助我解决这个问题.. .

我提供了一个链接，您可以通过访问此链接查看我想要的内容

[www.test.ginormous.in/dinesmart/Filestore/Food/Capture.png](http://www.test.ginormous.in/dinesmart/Filestore/Food/Capture.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:41:37.353

我只是给你一个大纲，因为发布整个代码是不可能的。

1.  在您的 aspx 页面中创建一个 asp:panel
2.  尝试通过编写 myPanel.innerhtml = "(your html structure generated in a string)" 在该面板内动态生成表结构
3.  使用**theDate.AddDays(7 - (int)theDate.DayOfWeek)**获取星期天的日期。（其中 theDay 是当前日期或您给定的日期，如果您想要星期一将其更改为 7 到 6，则返回星期天的日期等。）
4.  在上一个和下一个单击上，您可以从上面生成的轮的第一天添加或减去 7 天。

希望这可以帮助你。

# jquery - 无限滚动：Chrome 中的双重内容 + 在 IE 中不起作用

> ID：15176129
> 
> 赞同：1
> 
> 时间：2013-03-02T15:27:46.933
> 
> 标签：jquery, ajax, infinite-scroll

下面的代码在 Firefox 19.0 中按预期工作。该脚本从数据库中加载随机文章。

它在 Internet Explorer 中重复加载相同的内容，在 Chrome 中加载双重+不同的内容。

```
<script type="text/javascript">
$(window).scroll(function()
{
if($(window).scrollTop() == $(document).height() - $(window).height())
{

$('div#loadmoreajaxloader').show();
$.ajax({
url: "loadmore.php",
success: function(html)
{
if(html)
{
$("#wrapper").append(html);
$('div#loadmoreajaxloader').hide();
}else
{
$('div#loadmoreajaxloader').html('<center>No more posts to show.</center>');
}
}
});
}
});
</script> 
```

这里是 loadmore.php

```
<?php
include('db.php');
$stmt = $db->prepare("SELECT * FROM db ORDER BY RAND() DESC LIMIT 9");
if($stmt->execute()){
while ($row = $stmt->fetch()) {
echo'
content here
';}}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:55:00.880

我猜你总是得到相同的 9 个元素，因为你的 MySQL 查询没有偏移量。

尝试添加偏移量，如下所示：

在 loadmore.php 上

```
$limit=9;
$limit_offset = $limit*$_GET['offset'];
$stmt = $db->prepare("SELECT * FROM db ORDER BY RAND() DESC LIMIT :limit OFFSET :offset");
$stmt->bindValue(':limit', $limit, PDO::PARAM_INT);
$stmt->bindValue(':offset', $limit_offset, PDO::PARAM_INT); 
```

在您的 JavaScript 代码上：

```
<script type="text/javascript">
var offset = 0; 
```

...

```
$.ajax({
    url: "loadmore.php",
    data: { offset: offset }
    success: function(html){
        if(html){
            offset++;
            $("#wrapper").append(html);
            $('div#loadmoreajaxloader').hide();
        } else {
            $('div#loadmoreajaxloader').html('<center>No more posts to show.</center>');
        }
    }
}); 
```

# ruby - Ruby 中的符号序列“#$”是什么意思以及在哪里使用它？

> ID：15176130
> 
> 赞同：2
> 
> 时间：2013-03-02T15:27:52.080
> 
> 标签：ruby

[书中](http://www.ruby-doc.org/docs/ProgrammingRuby/)有一个例子：

```
"Seconds/day: #{24*60*60}" # => Seconds/day: 86400
"#{'Ho! '*3}Merry Christmas!" # => Ho! Ho! Ho! Merry Christmas!
"This is line #$." # => This is line 3 
```

但是当我尝试`#$`在一个单独的文件中实现第三行的符号时，它会打印出奇怪的东西。这是我的文件`str2.rb`：

```
puts "Hello, World #$."
puts "Hello, World #$"
puts "#$" 
```

现在我运行它（在 Win XP 控制台中）：

```
C:\ruby\sbox>ruby str2.rb
你好，世界 0
你好，世界 ["enumerator.so", "C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/i386-mingw32/enc/encdb.so", "C:/Rai
lsInstaller/Ruby1.9.3/lib/ruby/1.9.1/i386-mingw32/enc/windows_1251.so", "C:/RailsInstaller/Ruby1.9.3/lib/ruby/
1.9.1/i386-mingw32/enc/trans/transdb.so", "C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/defau
lts.rb", "C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/i386-mingw32/rbconfig.rb", "C:/RailsInstaller/Ruby1.9.3/l
ib/ruby/site_ruby/1.9.1/rubygems/deprecate.rb", "C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems
/exceptions.rb", "C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/defaults/operating_system.rb",
 "C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb", "C:/RailsInstaller/Ruby1.9
.3/lib/ruby/site_ruby/1.9.1/rubygems.rb", "C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/i386-mingw32/enc/utf_16l
e.so”、“C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/i386-mingw32/enc/trans/utf_16_32.so”、“C:/RailsInstaller/Ru
by1.9.3/lib/ruby/1.9.1/i386-mingw32/enc/trans/single_byte.so"]
看跌期权

```

我发现`#$.`（该句点是强制性的）仅在交互式 Ruby 控制台中显示行号。用于它`0`在任何行上生成的文件。但是，如果我使用这样的符号，为什么会打印所有这些文本`"#$" \n "#$"`？

文件中还有这样的代码：

```
puts "Hello, World #$" ## without period at the end 
```

产生这样的错误：

```
C:\ruby\sbox>ruby str2.rb
str2.rb:3: unterminated string meets end of file 
```

是什么`#$`意思？在哪里以及如何使用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T15:47:04.673

`"#$."`是 的简写`"#{$.}"`，或者是全局变量的插值。同样，`#@`对于实例变量和`#@@`类变量也是如此。

你所拥有的问题是第二个`"`in*没有*`"#$"`被解释为字符串的结束引号，而是作为被插值的全局变量名的一部分（）。为了更清楚您的代码实际上是如何被解释的，我将使用字符串文字代替 Ruby 认为的字符串分隔符：*`$"`*

 *```
puts %(Hello, World #$.)
puts %(Hello, World #$"
puts )#$" 
```

如您所见，这是打印的数组的来源（它是 的内容`$"`）以及末尾的“puts”字符串。`#$"`代码末尾的 被解释为注释。（请注意，第二个字符串跨越并包括第二行和第三行之间的换行符。）

如果您确实想打印`#$`为字符串，则必须转义其中的一部分或使用单引号字符串：

*   `"\#$" #=> "#$"`
*   `"#\$" #=> "#$"`
*   `'#$' #=> "#$"`

简单地放入`#$`一个没有转义的插值字符串是无效的，这可以通过使用字符串文字看出：

```
%(#$)  #=> #<SyntaxError: (eval):2: syntax error, unexpected $undefined
       #   %(#$)
       #      ^> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T15:55:14.187

在 Ruby 中，全局变量是使用美元符号定义的。

```
$foo = "bar" 
```

有一些预定义的全局变量，例如

```
# last line number seen by interpreter
$. 
```

我想你只是错过了这个时期。您可以使用 - 将变量插入到字符串中

```
"line #{$.}" 
```

或速记

```
"line #$." 
```*

# objective-c - 在 ARC 下，使用运行时方法分配给对象类型 ivar 是否合法/安全？

> ID：15176132
> 
> 赞同：4
> 
> 时间：2013-03-02T15:28:10.473
> 
> 标签：objective-c, automatic-ref-counting, variable-assignment, objective-c-runtime, ivar

基于[此处描述的技术，](https://stackoverflow.com/questions/12265083/object-setinstancevariable-with-cgpoint/12265664#12265664)我使用 ivar_getOffset() 方法在对象实例中设置 ivars。

现在我遇到了 ivar 是 NSString* 的情况：

```
NSString* _name; 
```

**更新：**

我走错了路（在这种情况下不能使用 ivar_getOffset），我应该使用：

```
object_setIvar(target, _ivar, [stringValue copy]); 
```

将对象值分配给 ivars。

我的问题仍然存在：在 ARC 下这样做安全吗？ARC 会正确释放 ivar 的现有对象吗？

我担心 ARC 可能无法正确释放 ivar 在分配之前设置的任何字符串。虽然我对此表示怀疑，否则编译器不会让我喜欢 object_setInstanceVariable（“在自动引用计数模式下不可用”）的情况 - 对吧？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T16:53:19.483

是的，使用 ARC 这样做是合法的，至少在 Mac OS X 10.8.2 中是这样

如果你要反汇编 libobjc，你会发现：

```
================ B E G I N   O F   P R O C E D U R E ================

                                       ; Basic Block Input Regs: rdx rsi rdi -  Killed Regs: rbx rbp r15
                                            _object_setIvar:
000000000000c1f5 55                              push       rbp                           ; XREF=0xc1e1
000000000000c1f6 4889E5                          mov        rbp, rsp
000000000000c1f9 4157                            push       r15
000000000000c1fb 4156                            push       r14
000000000000c1fd 4155                            push       r13
000000000000c1ff 4154                            push       r12
000000000000c201 53                              push       rbx
000000000000c202 4883EC18                        sub        rsp, 0x18
000000000000c206 488955C8                        mov        qword [ss:rbp-0x40+var_8], rdx
000000000000c20a 4889F3                          mov        rbx, rsi
000000000000c20d 4989FF                          mov        r15, rdi
000000000000c210 4D85FF                          test       r15, r15
000000000000c213 0F8449010000                    je         0xc362
                                       ; Basic Block Input Regs: rbx -  Killed Regs: <nothing>
000000000000c219 4885DB                          test       rbx, rbx
000000000000c21c 0F8440010000                    je         0xc362
                                       ; Basic Block Input Regs: r15 -  Killed Regs: rax
000000000000c222 41F6C701                        test       r15L, 0x1
000000000000c226 4C89F8                          mov        rax, r15
000000000000c229 740F                            je         0xc23a
                                       ; Basic Block Input Regs: <nothing> -  Killed Regs: rax
000000000000c22b 4883E00F                        and        rax, 0xf
000000000000c22f 48C1E003                        shl        rax, 0x3
000000000000c233 4803057ECE1000                  add        rax, qword [ds:0x1190b8]
                                       ; Basic Block Input Regs: rax rbx -  Killed Regs: rdx rbp rsi rdi r12
000000000000c23a 4C8B20                          mov        r12, qword [ds:rax]           ; XREF=0xc229
000000000000c23d 48C745D000000000                mov        qword [ss:rbp-0x40+var_16], 0x0
000000000000c245 4889DF                          mov        rdi, rbx
000000000000c248 E805F5FFFF                      call       _ivar_getName
000000000000c24d 488D55D0                        lea        rdx, qword [ss:rbp-0x40+var_16]
000000000000c251 4C89E7                          mov        rdi, r12
000000000000c254 4889C6                          mov        rsi, rax
000000000000c257 E8C9E7FFFF                      call       __class_getVariable
000000000000c25c 4885C0                          test       rax, rax
000000000000c25f 7433                            je         0xc294
                                       ; Basic Block Input Regs: <nothing> -  Killed Regs: r14
000000000000c261 4C8D75D0                        lea        r14, qword [ss:rbp-0x40+var_16]
000000000000c265 EB1F                            jmp        0xc286
                                       ; Basic Block Input Regs: rax rbx r12 r14 -  Killed Regs: rdx rbp rsi rdi
000000000000c267 E88EC3FFFF                      call       __class_getSuperclass         ; XREF=0xc292
000000000000c26c 488945D0                        mov        qword [ss:rbp-0x40+var_16], rax
000000000000c270 4889DF                          mov        rdi, rbx
000000000000c273 E8DAF4FFFF                      call       _ivar_getName
000000000000c278 4C89E7                          mov        rdi, r12
000000000000c27b 4889C6                          mov        rsi, rax
000000000000c27e 4C89F2                          mov        rdx, r14
000000000000c281 E89FE7FFFF                      call       __class_getVariable
                                       ; Basic Block Input Regs: rax rbx -  Killed Regs: <nothing>
000000000000c286 4839D8                          cmp        rax, rbx                      ; XREF=0xc265
000000000000c289 7409                            je         0xc294
                                       ; Basic Block Input Regs: rbp -  Killed Regs: rdi
000000000000c28b 488B7DD0                        mov        rdi, qword [ss:rbp-0x40+var_16]
000000000000c28f 4885FF                          test       rdi, rdi
000000000000c292 75D3                            jne        0xc267
                                       ; Basic Block Input Regs: rax rbx rbp -  Killed Regs: rbx rdi r12 r13
000000000000c294 4C8B6DD0                        mov        r13, qword [ss:rbp-0x40+var_16] ; XREF=0xc25f, 0xc289
000000000000c298 4889DF                          mov        rdi, rbx
000000000000c29b E8B3F2FFFF                      call       _ivar_getOffset
000000000000c2a0 4889C3                          mov        rbx, rax
000000000000c2a3 4D8D241F                        lea        r12, qword [ds:r15+rbx]
000000000000c2a7 4C89EF                          mov        rdi, r13
000000000000c2aa E8B3F2FFFF                      call       __class_usesAutomaticRetainRelease
000000000000c2af 84C0                            test       al, al
000000000000c2b1 746B                            je         0xc31e
                                       ; Basic Block Input Regs: rax r13 -  Killed Regs: rdi r14
000000000000c2b3 4C89EF                          mov        rdi, r13
000000000000c2b6 E840A00000                      call       __class_getInstanceStart
000000000000c2bb 4189C6                          mov        r14d, eax
000000000000c2be 4C89EF                          mov        rdi, r13
000000000000c2c1 E80EA80000                      call       _class_getWeakIvarLayout
000000000000c2c6 4885C0                          test       rax, rax
000000000000c2c9 7423                            je         0xc2ee
                                       ; Basic Block Input Regs: rax rbx r14 -  Killed Regs: rcx rsi rdi
000000000000c2cb 4489F1                          mov        ecx, r14d
000000000000c2ce 4889DF                          mov        rdi, rbx
000000000000c2d1 4829CF                          sub        rdi, rcx
000000000000c2d4 4889C6                          mov        rsi, rax
000000000000c2d7 E8483C0000                      call       __ZL17is_scanned_offsetlPKh   ; is_scanned_offset(long, unsigned char const*)
000000000000c2dc 84C0                            test       al, al
000000000000c2de 740E                            je         0xc2ee
                                       ; Basic Block Input Regs: rbp r12 -  Killed Regs: rsi rdi
000000000000c2e0 4C89E7                          mov        rdi, r12
000000000000c2e3 488B75C8                        mov        rsi, qword [ss:rbp-0x40+var_8]
000000000000c2e7 E82B440100                      call       _objc_storeWeak
000000000000c2ec EB74                            jmp        0xc362
                                       ; Basic Block Input Regs: rax r13 -  Killed Regs: rdi
000000000000c2ee 4C89EF                          mov        rdi, r13                      ; XREF=0xc2c9, 0xc2de
000000000000c2f1 E8C5A70000                      call       _class_getIvarLayout
000000000000c2f6 4885C0                          test       rax, rax
000000000000c2f9 7423                            je         0xc31e
                                       ; Basic Block Input Regs: rax rbx r14 -  Killed Regs: rcx rsi rdi
000000000000c2fb 4489F1                          mov        ecx, r14d
000000000000c2fe 4889DF                          mov        rdi, rbx
000000000000c301 4829CF                          sub        rdi, rcx
000000000000c304 4889C6                          mov        rsi, rax
000000000000c307 E8183C0000                      call       __ZL17is_scanned_offsetlPKh   ; is_scanned_offset(long, unsigned char const*)
000000000000c30c 84C0                            test       al, al
000000000000c30e 740E                            je         0xc31e
                                       ; Basic Block Input Regs: rbp r12 -  Killed Regs: rsi rdi
000000000000c310 4C89E7                          mov        rdi, r12
000000000000c313 488B75C8                        mov        rsi, qword [ss:rbp-0x40+var_8]
000000000000c317 E8044C0100                      call       _objc_storeStrong
000000000000c31c EB44                            jmp        0xc362
                                       ; Basic Block Input Regs: <nothing> -  Killed Regs: <nothing>
000000000000c31e 803DEB49110000                  cmp        byte [ds:_UseGC], 0x0         ; XREF=0xc2b1, 0xc2f9, 0xc30e
000000000000c325 7428                            je         0xc34f
                                       ; Basic Block Input Regs: rax r13 -  Killed Regs: rdi
000000000000c327 4C89EF                          mov        rdi, r13
000000000000c32a E8A5A70000                      call       _class_getWeakIvarLayout
000000000000c32f 4885C0                          test       rax, rax
000000000000c332 741B                            je         0xc34f
                                       ; Basic Block Input Regs: rax rbx -  Killed Regs: rsi rdi
000000000000c334 4889DF                          mov        rdi, rbx
000000000000c337 4889C6                          mov        rsi, rax
000000000000c33a E8E53B0000                      call       __ZL17is_scanned_offsetlPKh   ; is_scanned_offset(long, unsigned char const*)
000000000000c33f 84C0                            test       al, al
000000000000c341 740C                            je         0xc34f
                                       ; Basic Block Input Regs: rbp r12 -  Killed Regs: rsi rdi
000000000000c343 488B7DC8                        mov        rdi, qword [ss:rbp-0x40+var_8]
000000000000c347 4C89E6                          mov        rsi, r12
000000000000c34a E831230000                      call       _objc_assign_weak
                                       ; Basic Block Input Regs: rbx rbp r15 -  Killed Regs: rax rdx rsi rdi
000000000000c34f 488D055AE51000                  lea        rax, qword [ds:_objc_assign_ivar_internal] ; XREF=0xc325, 0xc332, 0xc341
000000000000c356 488B7DC8                        mov        rdi, qword [ss:rbp-0x40+var_8]
000000000000c35a 4C89FE                          mov        rsi, r15
000000000000c35d 4889DA                          mov        rdx, rbx
000000000000c360 FF10                            call       qword [ds:rax]
                                       ; Basic Block Input Regs: <nothing> -  Killed Regs: rbx rsp rbp r12 r13 r14 r15
000000000000c362 4883C418                        add        rsp, 0x18                     ; XREF=0xc213, 0xc21c, 0xc2ec, 0xc31c
000000000000c366 5B                              pop        rbx 
```

注意 _class_usesAutomaticRetainRelease 的调用`000000000000c2aa`。

此方法的实现可在[opensource.apple.com获得](http://www.opensource.apple.com/source/objc4/objc4-532.2/runtime/objc-runtime-new.mm)

此函数的标题注释是：

```
/***********************************************************************
 * _class_usesAutomaticRetainRelease
 * Returns YES if class was compiled with -fobjc-arc
 **********************************************************************/ 
```

这意味着 ObjC 运行时的这个特殊功能知道 ARC。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T16:05:26.163

我不知道答案，但我知道如何确定答案...

创建一个指向您自己的类的实例的 ivar，例如`LC2DFoo`. 在`-[LC2DFoo dealloc]`. 使用您描述的运行时方法创建一个实例`LC2DFoo`并将其分配给 ivar。接下来，将相同的 ivar 设置为其他内容，例如`nil`. 你达到你的断点了吗？

# cakephp - CakePHP 的 Utils 插件未将记录插入表中

> ID：15176139
> 
> 赞同：0
> 
> 时间：2013-03-02T15:28:52.653
> 
> 标签：cakephp

我在此链接上使用 CakePHP 的 Utils 插件 - [https://github.com/CakeDC/utils](https://github.com/CakeDC/utils)。然而，我现在遇到的问题是，当我上传 csv 时，它会使用 setFlash 例如（从 test.csv 成功导入 3 条记录）从我的 csv 中计算正确的记录数，但没有将任何记录插入数据库。有没有人知道可能导致这种情况的原因。我没有从提供的链接中更改任何内容。

这些是我到目前为止所采取的步骤。在我的 Appmodel 中，我添加了下面的代码

```
public $actsAs = array(
    'Utils.CsvImport' => array(
        'delimiter'  => ','
    )
); 
```

在 app/View/Common 中创建了一个名为 Common 的共享视图，并添加了共享的 import.ctp 视图，代码如下

```
<h3>Import <?php echo Inflector::pluralize($modelClass);?> from CSV data file</h3>
<?php
echo $this->Form->create($modelClass, array('action' => 'import', 'type' => 'file') );
echo $this->Form->input('CsvFile', array('label'=>'','type'=>'file') );
echo $this->Form->end('Submit');
?> 
```

这是我对 AppController 的导入操作

```
/**
* CSV Import functionality for all controllers
*    
*/
function import() {
    $modelClass = $this->modelClass;
    if ( $this->request->is('POST') ) {
        $records_count = $this->$modelClass->find( 'count' );
        try {
            $this->$modelClass->importCSV( $this->request->data[$modelClass]['CsvFile']['tmp_name']  );
        } catch (Exception $e) {
            $import_errors = $this->$modelClass->getImportErrors();
            $this->set( 'import_errors', $import_errors );
            $this->Session->setFlash( __('Error Importing') . ' ' . $this->request->data[$modelClass]['CsvFile']['name'] . ', ' . __('column name mismatch.')  );
            $this->redirect( array('action'=>'import') );
        }

        $new_records_count = $this->$modelClass->find( 'count' ) - $records_count;
        $this->Session->setFlash(__('Successfully imported') . ' ' . $new_records_count .  ' records from ' . $this->request->data[$modelClass]['CsvFile']['name'] );
        $this->redirect( array('action'=>'index') );
    }
    $this->set('modelClass', $modelClass );
    $this->render('../Common/import');
} //end import() 
```

要上传文件，我将我的应用程序指向控制器操作，例如 localhost/test/employees/import

提前致谢

# c++ - C++ - 如何检查模板类类型是否为无效？

> ID：15176141
> 
> 赞同：3
> 
> 时间：2013-03-02T15:28:58.840
> 
> 标签：c++, void, typeid

我需要一种方法来检查模板类的类型是否为无效。

这是我的尝试：

```
template <typename target_type, typename start_function_type, typename end_function_type> class C_rule {

  public:
    //...
    void setIntoEffect(bool true_or_false) {
          if (true_or_false == true) {
             for (size_t i = 0; i < targets.size(); i++) {
                 if (typeid(start_function_type) != typeid(void)) {
                    start_function_type start_function_return_value = enforceOnTarget(targets.at(i));
                 }

                 else {
                    enforceOnTarget(targets.at(i));
                 }
             }
          }

          else if ((true_or_false == false) && (is_in_effect == true)) {
             for (size_t i = 0; i < targets.size(); i++) {
                 if (typeid(end_function_type) != typeid(void)) {
                    end_function_type end_function_return_value = removeFromTarget(targets.at(i));
                 }

                 else {
                    removeFromTarget(targets.at(i));
                 }
             }
          }
          is_in_effect = true_or_false;
     }

  protected:
    //...
  private:
    //...

}; 
```

但是，这会产生一个编译器错误，抱怨在创建“start_function_type”和“end_function_type”为无效的 C_rule 对象时将两个变量“start_function_return_value”和“end_function_return_value”声明为无效。我试图阻止创建一个变量来存储规则的“开始”和“结束”函数的返回值，如果这些函数的返回类型是 void（因为 void 函数显然不返回任何内容）。而且，如您所见，我正在尝试为此目的使用 typeid 运算符，但它似乎不起作用。显然，当 start_function_type 和 end_function_type 为 void 时，仍在输入 if 语句，我不知道为什么。也许 typeid 没有 t 与 void 一起工作？我用谷歌搜索了这个问题，但找不到答案，所以我在这里问这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T15:33:19.107

在 C++11 中，您可以使用标准`std::is_same<>`类型特征来验证两种类型是否相同：

```
#include <type_traits>

// ...
bool same = std::is_same<T1, T2>::value; 
```

在你的情况下，这可能变成：

```
bool same = std::is_same<start_function_type, void>::value; 
```

但是，这不会解决您的问题，因为`if`语句不是编译时[（静态）`if`](https://www.google.com/search?q=static+if+i+had+a+hammer&aq=0&oq=static+if+i+had+&aqs=chrome.1.57j0.3269&sourceid=chrome&ie=UTF-8)：语句的两个分支`if`仍然必须编译。

您可以做的是将您的类模板专门用于`start_function_type`or `end_function_type`is的情况，`void`或者将处理它们的代码部分分解为单独的专门类模板。

# php - 在同一页面上为搜索输入使用不同的占位符 - wordpress

> ID：15176143
> 
> 赞同：0
> 
> 时间：2013-03-02T15:29:05.687
> 
> 标签：php, wordpress

如果您在 wordpress 中使用 searchform.php 来显示搜索输入框。如何在同一页面的不同搜索框中显示不同的占位符？例如，我有一个页面，在页脚、侧边栏的小部件和主导航菜单中都有一个搜索框。我希望在每个上显示不同的占位符。

这就是我在搜索表单中的内容

```
<!-- Searchform -->
<form method="get" class="search" action="<?php echo home_url(); ?>" >
    <input id="s" placeholder="Search..." type="text" name="s" onfocus="if (this.value==this.defaultValue) this.value = '';" 
    onblur="if (this.value=='') this.value = this.defaultValue" >
    <input class="searchsubmit" type="submit" value="<?php _e( '', 'mytheme' ); ?>">
</form>
<!-- /Searchform --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:25:55.170

get_search_form() 函数打印出 searchform.php 中的代码。不要在您的页面中使用 get_search_form()，而是取出该函数并从 searchform.php 复制代码并将其粘贴到您希望搜索栏显示的位置。然后相应地更改占位符文本。

```
<html>
    <head>
        <!-- Header Stuff -->
    </head>
    <body> 
        <div class="main-navigation-menu">   
            <!-- Searchform -->
            <form method="get" class="search" action="<?php echo home_url(); ?>" >
                <input id="s" placeholder="PLACEHOLDER TEXT HERE" type="text" name="s" onfocus="if    (this.value==this.defaultValue) this.value = '';" 
                onblur="if (this.value=='') this.value = this.defaultValue" >
                <input class="searchsubmit" type="submit" value="<?php _e( '', 'mytheme' ); ?>">
            </form>
            <!-- /Searchform -->
        </div>
        <div class="sidebar">
           <div class="widget">
               <!-- Default widget stuff from functions.php will appear here. Searchform styling will come from searchform.php -->
           </div>
        </div>
        <div class="footer">   
            <!-- Searchform -->
            <form method="get" class="search" action="<?php echo home_url(); ?>" >
                <input id="s" placeholder="PLACEHOLDER TEXT HERE" type="text" name="s" onfocus="if    (this.value==this.defaultValue) this.value = '';" 
                onblur="if (this.value=='') this.value = this.defaultValue" >
                <input class="searchsubmit" type="submit" value="<?php _e( '', 'mytheme' ); ?>">
            </form>
            <!-- /Searchform -->
        </div>
    </body>
</html> 
```

保留 searchform.php 和该文件的样式，您希望您的小部件搜索表单出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:12:00.080

我不太确定您要做什么，但总体思路很简单。只需有条件地创建占位符文本。

```
if (is_home()) {
  $placeholder = "Search Posts...";
} elseif(is_tag()) {
  $placeholder = "Search Tags...";
} else {
  $placeholder = "Search...";
}

<!-- Searchform -->
<form method="get" class="search" action="<?php echo home_url(); ?>" >
    <input id="s" placeholder="<?php echo $placeholder; ?>" type="text" name="s" onfocus="if (this.value==this.defaultValue) this.value = '';" 
```

这和你正在寻找的东西一样吗？

**基于对要求的进一步解释**

搜索表单功能并不是真的要像您想要的那样工作。您可以使用全局变量来欺骗它。

放

```
$GLOBALS['placeholder'] = "Default placeholder value"; 
```

然后编辑您的`functions.php`表格以阅读...

```
<!-- Searchform -->
<form method="get" class="search" action="<?php echo home_url(); ?>" >
    <input id="s" placeholder="<?php echo $GLOBALS['placeholder']; ?>" type="text" name="s" onfocus="if (this.value==this.defaultValue) this.value = '';" 
```

并像这样调用函数：

```
$GLOBALS['placeholder'] = "Placeholder value...";
get_search_form(); 
```

根据文档，`get_search_form(false)`应该返回一个字符串，这意味着这样的东西应该可以工作：

编辑搜索表单以阅读：

```
<!-- Searchform -->
<form method="get" class="search" action="<?php echo home_url(); ?>" >
    <input id="s" placeholder="%s" type="text" name="s" onfocus="if (this.value==this.defaultValue) this.value = '';" 
```

然后使用...

```
$search_form = get_search_form(false);
printf($search_form,'Placeholder...'); 
```

这避免了全局变量，这通常是一件好事。我不能开箱即用。如果您查看源代码，该功能似乎取决于`searchform.php`. 如果该文件存在，它就会被简单地包含在内，这使得“返回字符串”部分非常冒险。事实证明，使用可用的过滤器进行劫持非常困难。

为了避免`global`杂耍，我认为您需要将“get_search_form”替换为：

```
function my_get_searchform($placeholder = 'Search') {
  $search_form_template = locate_template('searchform.php');
  if ( '' != $search_form_template ) {
    ob_start();
    require($search_form_template);
    $form = ob_get_clean();
    printf($form,$placeholder);
  }
} 
```

# c++ - 在同一台机器上编译的相同 C++ 代码表现不同

> ID：15176146
> 
> 赞同：0
> 
> 时间：2013-03-02T15:29:21.943
> 
> 标签：c++, qt, dll, crash

我编写了一个使用一些 Qt 静态库的 C++ 代码。我使用 MSVS2010（在 Windows 7 上）编译代码，然后`.exe`在第二台机器上运行创建的 -file。

我已经在同一台机器上编译了完全相同的代码 2 次，`.exe`当第二台机器的 (Windows XP) 屏幕保护程序启动时，生成的代码在第二台机器上崩溃，我再次编译了相同的代码（在代码或编译器或其设置）和生成的`.exe`-file 确实可以正常工作。

有人知道什么会导致这种情况吗？

有没有办法可以调试这个问题？在不同时间可能打开不同的其他程序这一事实会影响编译吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:34:05.743

问题**不**在于编译过程（如果您没有更改源代码，它将始终生成相同的二进制文件），而在于执行环境。

您的第二台机器上似乎有什么东西使您的程序间歇性崩溃（或者很可能与第二台机器无关，并且您的程序到处都间歇性崩溃）。要调试它，您可能最终不得不在第二台机器上安装调试环境并希望问题再次出现，或者您也可以尝试在您的开发机器上重现崩溃。

# matlab - MatLab 迷宫求解

> ID：15176158
> 
> 赞同：0
> 
> 时间：2013-03-02T15:31:09.153
> 
> 标签：matlab, maze

我一直在使用 Image Analyst [http://www.mathworks.com/matlabcentral/fileexchange/27175-mazesolution](http://www.mathworks.com/matlabcentral/fileexchange/27175-mazesolution)的 maze_solution 函数一段时间没有问题。有一些限制：迷宫必须是完美的并且没有圆形路径。

话虽如此，当我测试它时，它通常工作得很好，让我为您提供两个输出示例：

[maze-1](http://prntscr.com/uolm7) -> [solution-1](http://prntscr.com/umkzb)（显然效果很好）

[maze-2](http://prntscr.com/uol7l) -> [solution-2](http://prntscr.com/uol3u)（不太好）

现在让我提出一些关于我的迷宫并不明显的规则：

1.  没有圆形路径（有一些被困在墙上，但迷宫求解器不会遇到）。
2.  它们总是从左上角开始，然后每次都有四个出口在同一个坐标。
3.  永远只有一个出口。

所以，我想做的是，让我们考虑第一个屏幕截图。它运行良好并“找到”出口，有没有办法让 mat lab 弹出一个消息框（例如使用 msgbox()）并说“嘿，用户，我找到了解决方案！它是 A！”？我已经考虑了很长时间，但没有找到这样做的方法。我想到的解决方案之一是伪代码：

```
if CertainCoordinate = red pixel
    return A 
```

而CertainCoordinate 可能是A、B、C 和D 的不可更改坐标（x 和y）（然后我会使用4 个'ifs'），但我什至不知道如何实现。有什么想法或……可以为我指明正确方向的东西吗？

所以，总结一下：我有一个算法现在会生成一条红色的出口路径（如果你有任何建议，我愿意接受更好的算法）但我的目标是让 matlab 告诉我他发现了什么，而不是显示图像中的我。因此，例如，在第一张图片中，我希望它打开一个 MessageBox 并说“嘿，用户！我找到了出口，它是 D！”，而不是向我显示带有红色路径的图片。问题是，我不知道如何教 MatLab 'D 在哪里'并让他认识到他找到了'D'。那么，关于如何做到这一点有什么建议吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:16:24.457

假设您有一个图像，称为`maze`一组可能`x`的出口坐标和出口的相应`y`坐标。您还可以检查迷宫解决程序使用什么颜色，假设这是`Red`.

现在解决方案非常简单。首先运行迷宫求解器，然后检查以下

```
isRed = maze(x,y) == Red;
exitxCoordinates = x(isRed)
exityCoordinates = y(isRed) 
```

这为您提供了 x 和 y 坐标。（如果没有找到解决方案，它们是空的）。从这里将它们连接到您指定的字母之一应该不会太难。

# ruby-on-rails - Rails money-rails gem 在货币化上获得未定义的方法

> ID：15176159
> 
> 赞同：6
> 
> 时间：2013-03-02T15:31:10.577
> 
> 标签：ruby-on-rails, currency

我正在尝试让`money-rails`gem 工作，但我遇到了问题...>.<

这是我有相应列的产品：

```
class ItemAttrVal < ActiveRecord::Base
  belongs_to :attr_name
  belongs_to :registry_item

  monetize :price_val_cents, :allow_nil => true
  #snip
end 
```

我已经运行了迁移，并且有相应的列（`price_val_cents`和`price_val_currency`）。

我的 Gemfile 中有 gem，并且运行`bundle install`成功。

当我这样做时`ItemAttrVal.new`，我将其作为错误消息的第一行：

```
NoMethodError: undefined method `monetize' for #<Class:0x007fb489c759d0> 
```

有人可以帮我指出我错过了什么简单的事情吗？我没有将它作为一个`require`（除了我的 Gemfile）包含在任何地方，但我认为不需要它......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-01T17:02:54.413

根据 Peter Brown 的评论，无论何时添加新的 gem，或者添加或修改环境变量，您都应该重新启动控制台。只需退出并重新启动它，还建议重新启动服务器。

有时问题仍然存在，即使在重新启动后也是如此。在这种情况下，请尝试终止 spring 服务器，以便您完全重新开始。

# ios - 在自我操作中传递参数：@selector

> ID：15176161
> 
> 赞同：2
> 
> 时间：2013-03-02T15:31:28.853
> 
> 标签：ios, objective-c, nsindexpath

我正在尝试将 NSIndexpath 作为参数添加到方法中

```
[self action:@selector(showDetailedImage)]; 
```

是否可以向此方法添加额外的参数（`NSIndexPath`）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T15:47:09.667

**不，你不能传递参数**，你只能证明这个选择器会接受那么多的参数。

如果您需要这样做，您可以创建一个属性并从方法访问它`showDetailedImage`。

但是，您可以使用此选择器：

```
[self performSelector:@selector(showDetailedImageIndex:) withObject:objectOfNSIndex]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-09T08:44:28.937

`-(void)wrapperMethodOforiginalSelectorMethod;`对您的*now-selector-method* 说一个包装器（另一种方法） ，`-(void)originalSelectorMethod:(id)argument;`并将包装器作为您的新选择器，它会进一步用您的参数调用您的 originalSelectorMethod。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-03-02T15:38:46.670

您必须添加额外的参数

ShowDetailedImage:(NSIndexPath *)indexPath

可以调用 [self action:@selector(showDetailedImage:)];

# java - Java：检查字符串是否在字典中

> ID：15176167
> 
> 赞同：4
> 
> 时间：2013-03-02T15:31:39.643
> 
> 标签：java, algorithm, dictionary

我有一本语言词典（即英语、意大利语等...），它本质上是一个文件，每一行都有一个单词。

现在我想用一个方法创建一个类，该方法在输入中给定一个字符串，检查该字符串是否存在于该字典中。

我的想法是该方法返回一个布尔值。在伪代码中：

```
boolean checkWord(String s){
    if(StringIsInDictionary) return true;
    return false
} 
```

实现该功能的最佳方式应该是什么？

考虑该文件将包含约 65000 个单词。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T15:33:23.527

将字典读成一个[`Set<String>`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)（例如，[`HashSet<String>`](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)），然后使用[`set.contains(word)`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html#contains%28java.lang.Object%29).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T16:05:34.483

对于空间和时间高效的解决方案（就像您可能在智能手机上使用的那样），请考虑使用[布隆过滤器](http://en.wikipedia.org/wiki/Bloom_filter)。这样您就不需要将字典存储在手机上，并且检查字符串是否在字典中会非常快。请注意，布隆过滤器可能会返回误报，但您可以对其进行调整以降低这种风险。

有几个开放源代码的布隆过滤器 Java 实现。一个在这里[https://github.com/magnuss/java-bloomfilter](https://github.com/magnuss/java-bloomfilter)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T15:35:34.370

您可能不想将单词存储为每行一个单词。更好的方法可能是只从磁盘读取文件一次，将单词存储在 HashSet（由 HashMap 支持的集合，搜索效率很高），然后使用`set.contains("mystring")`. 但是，这将要求整个地图都在内存中，但是当您需要检查多个单词时它会非常有效。

然后，您甚至可以返回并以更有效的方式将集合序列化到磁盘，从而加快初始加载速度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T15:43:34.083

看看这个问题，我想它可以帮助你。 [使用java在文本文件中查找字符串的最快方法](https://stackoverflow.com/questions/5460684/fastest-way-to-find-a-string-in-a-text-file-with-java)

# c++ - 如何处理 ATLMFC 包含文件中的指针截断？

> ID：15176168
> 
> 赞同：1
> 
> 时间：2013-03-02T15:31:56.927
> 
> 标签：c++, windows, visual-c++, mfc, atl

在将我当前的 32 位应用程序移植到 64 位的过程中，我添加了编译器选项 /we4302（请参阅 SO [Question Clarification: Porting 32 to 64 bit和](https://stackoverflow.com/questions/15096939/clarification-porting-32-to-64-bit)[Hans Passant](https://stackoverflow.com/a/15097982/977038)的建议答案），我遇到了一个 ATLMFC 的场景包含文件似乎有指针截断。

```
c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\ATLMFC\INCLUDE\afxtempl.h
(163) : error C4302: 'type cast' : truncation from 'CControlBar *' to 'long'
c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\ATLMFC\INCLUDE\afxtempl.h
(163) : error C4302: 'type cast' : truncation from 'HMENU ' to 'long' 
```

我计划将编译器标志永久添加到我们的构建系统中，但如果我们在 MFC 包含中遇到问题，那将是一个坏主意。

所以我的问题是

1.  报告的问题是错误警告吗？
2.  如果这确实导致指针截断，建议的解决方案是什么
3.  在构建系统中添加编译器选项 /we4302 是不是一个坏主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:48:58.587

如果您打开 afxtempl.h 头文件，您会在第 163 行找到以下代码：

```
template<class ARG_KEY>
AFX_INLINE UINT AFXAPI HashKey(ARG_KEY key)
{
    // (algorithm copied from STL hash in xfunctional)
    ldiv_t HashVal = ldiv((long)(ARG_KEY)key, 127773); // *** error is on this line
    HashVal.rem = 16807 * HashVal.rem - 2836 * HashVal.quot;
    if (HashVal.rem < 0)
        HashVal.rem += 2147483647;
    return ((UINT)HashVal.rem);
} 
```

转换`(long)`为在计算哈希码的方法中。尽管它并不理想（因为它可能会导致哈希冲突），但在计算哈希码时丢弃前 32 位并不是错误。因此，这是您可以忽略的虚假警告。

我会`/we4302`在您的本地开发框中使用来查找并修复所有真正的错误；最终可能会有太多误报而无法在构建服务器上启用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-09T07:41:18.820

为了补充[布拉德利的答案](https://stackoverflow.com/a/15176935/321013)，我发现：

## [VS 2015 RC 与 Visual Studio 2013 Update 4 中 MFC 和 ATL 更改的综合比较（第 1 部分）](https://naughter.wordpress.com/2015/05/07/a-comprehensive-comparison-of-the-mfc-atl-changes-in-vs-2015-rc-compared-to-visual-studio-2013-update-4/)

> ……
> 
> *   afxtempl.h
>     
>     
>     
>     第 164 行：模板函数 HashKey 现在抑制 C4311 编译器错误

所以看来他们终于在 VS 2015 中修复了它。

# c# - 识别字符串中的问题字符

> ID：15176173
> 
> 赞同：0
> 
> 时间：2013-03-02T15:32:18.710
> 
> 标签：c#, sql-server, encoding, character-encoding, linq-to-entities

我希望能够使用 LINQ to Entities 识别保存在我的 sql 服务器中的字符串中的问题字符。

有问题的字符是在编码过程中出现问题的字符。

这是一个有问题的字符串示例：“testing�stringáאç”。

在上面的例子中，只有 � 字符被认为是有问题的。

因此，例如以下字符串不被视为有问题：“testingstringáאç”。如何检查此 Varchar 并确定其中有问题的字符？

请注意，我首选的解决方案是通过 LINQ to entity query 来识别它，但也欢迎使用其他解决方案 - 例如：可能是某些存储过程？

我尝试使用正则表达式和“LIKE”语句，但没有成功......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:45:44.583

查看[编码类](http://msdn.microsoft.com/en-us/library/86hf4sb8.aspx)。

它具有[DecoderFallback 属性](http://msdn.microsoft.com/en-us/library/system.text.encoding.decoderfallback.aspx)和[EncoderFallback 属性](http://msdn.microsoft.com/en-us/library/system.text.encoding.encoderfallback.aspx)，可让您检测和替换在解码过程中发现的坏字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T15:46:23.857

你可以这样做：

```
DECLARE @StringWithProblem NVARCHAR(20) = N'This is '+NCHAR(8)+N'roblematic';
DECLARE @ProblemChars NVARCHAR(4000) = N'%['+NCHAR(0)+NCHAR(1)+NCHAR(8)+']%'; --list all problematic characters here, wrapped in %[]%

SELECT PATINDEX(@ProblemChars, @StringWithProblem), @StringWithProblem; 
```

这将为您提供第一个有问题的字符的索引，如果没有找到，则为 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T15:59:39.977

.Net 和 NVARCHAR 都使用 Unicode，因此本质上没有什么“问题”（至少对于 BMP 字符来说不是）。

因此，您首先必须定义“有问题”的含义：

*   字符未映射到目标代码页中

只需在编码之间转换并检查数据是否丢失：

```
CONVERT(NVARCHAR, CONVERT(VARCHAR, @originalNVarchar)) = @originalNVarchar 
```

请注意，您可以使用 COLLATE 子句而不是使用默认数据库排序规则来使用 SQL Server 排序规则。

*   由于使用的字体，字符无法显示

这在 .Net 中不容易做到

# plone - 如何将 Dexterity 内容类型添加为默认视图？

> ID：15176176
> 
> 赞同：2
> 
> 时间：2013-03-02T15:32:34.353
> 
> 标签：plone, dexterity

我正在尝试将文件夹默认视图设置为我创建的敏捷内容类型。但我看到 Dexterity 内容类型不在文件夹的可能默认内容视图列表中。为什么？我必须在内容类型中设置一个选项吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T15:47:22.230

在以下情况下，内容项被列为候选默认页面：

*   该对象不是容器类型

或者

*   `default_page_types`对象门户类型在您的`site_properties`属性表中列出。在 ZMI 中找到它（站点设置 -> Zope 管理界面 -> `portal_properties`）。

    该`default_page_types`属性是一个`portal_type`id 列表；对于敏捷类型，通常是一个带点的名称（例如[敏捷手册](http://plone.org/products/dexterity/documentation/manual/developer-manual/schema-driven-types/the-fti)使用`example.conference.presenter`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-26T07:17:37.537

**克隆 5.x 的更新**

*   转到`Site Setup > Content Settings`控制面板

*   `Workflow, visibility and versioning settings for your content types`在下拉列表中选择您的（敏捷性）内容类型。

*   查看`Can be used as a default page`

    （default_page_types 属性已从 ZMI 中删除）

# forms - Formmail - 使其在成功响应中显示名称和电子邮件

> ID：15176180
> 
> 赞同：1
> 
> 时间：2013-03-02T15:33:19.537
> 
> 标签：forms, perl, formmail

我正在使用 formmail.pl 来处理我在我的网站上使用的表单。有几个字段被发送到脚本，包括姓名、电子邮件、电话和文本区域中的一些文本。

就目前而言，成功提交会正确打印电话和文本区域数据，但不会打印输入的姓名和电子邮件。在电子邮件中，它在“发件人”标题中发送名称和电子邮件，并且与成功页面一样，仅显示电话和文本区域数据显示在电子邮件正文中。

我想在这两种情况下显示所有数据，但是我似乎找不到处理这个的代码部分。除了超过 3000 行代码之外，我会发布 formmail.pl 脚本，所以我只会发布我认为负责的地方，希望有人能指出我正确的方向。我对 Perl 相当陌生，阅读和理解这种大小的脚本有点压倒性。

```
sub success_page {
  my ($self, $date) = @_;

  if ($self->{FormConfig}{'redirect'}) {
    print $self->cgi_object->redirect( $self->{FormConfig}{'redirect'} );
  }
  elsif ( $self->{CFG}{'no_content'}) {
    print $self->cgi_object->header(Status => 204);
  }
  else {
    $self->output_cgi_html_header;
    $self->success_page_html_preamble($date);
    $self->success_page_fields;
    $self->success_page_footer;
  }
}

sub success_page_html_preamble {
  my ($self, $date) = @_;

  my $title = $self->escape_html( $self->{FormConfig}{'title'} || 'Success' );
  my $torecipient = 'to ' . $self->escape_html($self->{FormConfig}{'recipient'});
  $torecipient = '' if $self->{Hide_Recipient};
  my $attr = $self->body_attributes;

  print <<END;
    <head>
    <title>$title</title>
  END

  $self->output_style_element;

  print <<END;
    <link type="text/css" href="css/stylesheet.css" rel="stylesheet" /></script>
    </head>

<body>

    <p>Below is what you submitted $torecipient on $date</p>
  END
}

sub success_page_fields {
  my ($self) = @_;

  foreach my $f (@{ $self->{Field_Order} }) {
    my $val = (defined $self->{Form}{$f} ? $self->{Form}{$f} : '');
    $self->success_page_field( $self->escape_html($f), $self->escape_html($val) );
  }
}

sub success_page_field {
  my ($self, $name, $value) = @_;
  print "<p><b>$name:</b> $value</p>\n";
} 
```

好的，这有点长。这些东西主要用于成功页面，与电子邮件方面的关系不大，但也许如果有人能在那里找到我需要的东西，我也可以将它应用到电子邮件部分。

如果需要任何进一步的信息，请告诉我

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:31:50.697

我自己并没有真正使用过[NMS FormMail](http://nms-cgi.sourceforge.net/scripts.shtml)，但是查看[源代码](http://nms-cgi.sourceforge.net/formmail_modules-3.14m1/)，似乎您应该可以通过设置以下额外配置选项来实现您想要的东西：

```
$more_config{include_config_email} = 1;
$more_config{include_config_realname} = 1; 
```

这应该会导致 FormMail.pl 将`email`和`realname`字段视为普通表单字段，除了它们的特殊含义。

# android - 离线osm应用程序上的触摸事件方法（应用程序强制关闭）

> ID：15176183
> 
> 赞同：0
> 
> 时间：2013-03-02T15:33:26.940
> 
> 标签：android, osmdroid

这是一个*离线osm地图*的应用程序。该应用程序在*没有敏感课程*的情况下运行良好，但在添加`touchy()`课程后应用程序关闭

```
import java.util.List;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.graphics.Canvas;
import android.graphics.Color;
import android.location.LocationManager;
import android.os.Bundle;
import android.view.MotionEvent;

public class MainActivity extends Activity implements OpenStreetMapContributorConstants{
    long start,stop;
     Context t;
     MyLocationOverlay compass;
     private MapView m_mapView;
     List overlaylist ; 

    // Default map zoom level:
    private int MAP_DEFAULT_ZOOM = 12;

    // Default map Latitude:
    private double MAP_DEFAULT_LATITUDE =  31.039109;

    // Default map Longitude:
    private double MAP_DEFAULT_LONGITUDE = 31.381073;

    private org.osmdroid.views.MapController mMapController;
    int mIncr = 10000;

     @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Specify the XML layout to use:
        setContentView(R.layout.activity_main);       
        m_mapView =(MapView) findViewById(R.id.mapview);
        List<Overlay> overlaylist = m_mapView.getOverlays();
        touchy t =new touchy();
        overlaylist.add(t);

         compass =new MyLocationOverlay(MainActivity.this,m_mapView);
         overlaylist.add(compass);
        // Setup the mapView controller:
        m_mapView.setBuiltInZoomControls(true);
        m_mapView.setMultiTouchControls(true);
        m_mapView.setClickable(true);
        m_mapView.setUseDataConnection(false);
        m_mapView.getController().setZoom(MAP_DEFAULT_ZOOM);
        m_mapView.getController().setCenter(
            new GeoPoint(MAP_DEFAULT_LATITUDE, MAP_DEFAULT_LONGITUDE));
        m_mapView.setTileSource(TileSourceFactory.MAPNIK);
        LocationManager locationManager = (LocationManager)         getSystemService(Context.LOCATION_SERVICE);
        GeoPoint gPt0 = new GeoPoint(31.039109, 31.381073);
        GeoPoint gPt1 = new GeoPoint(gPt0.getLatitudeE6()+ mIncr, gPt0.getLongitudeE6());
        GeoPoint gPt2 = new GeoPoint(gPt0.getLatitudeE6()+ mIncr, gPt0.getLongitudeE6() + mIncr);
        GeoPoint gPt3 = new GeoPoint(gPt0.getLatitudeE6(), gPt0.getLongitudeE6() + mIncr);
        mMapController = m_mapView.getController();

        mMapController.setCenter(gPt0);

        PathOverlay myPath = new PathOverlay(Color.RED, this);
        myPath.addPoint(gPt0);
        myPath.addPoint(gPt1);
        myPath.addPoint(gPt2);
        myPath.addPoint(gPt3);
        myPath.addPoint(gPt0);
        m_mapView.getOverlays().add(myPath);
    }

       @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        compass.disableCompass();
        super.onPause();
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        compass.getMyLocation();
        compass.enableMyLocation();
        compass.runOnFirstFix(new Runnable(){
               public void run() {
               // First time: removes the circle and draws a dot.
               // Second time: removes the circle and dot, and draw a new dot. 
               m_mapView.getOverlays().clear();
               m_mapView.getOverlays().add(compass);
               m_mapView.postInvalidate();
               }

        });
        compass.enableCompass();
        super.onResume();
        }
    class touchy extends Overlay{

        public touchy() {
            // TODO Auto-generated constructor stub
            super(t);
        }

        public boolean onTouchEvent(MotionEvent e,MapView m){
            if(e.getAction() ==MotionEvent.ACTION_DOWN){
                start = e.getEventTime();
            }if(e.getAction() ==MotionEvent.ACTION_UP){
                stop = e.getEventTime();
            }if(stop - start >3000){
                AlertDialog alert =new AlertDialog.Builder(MainActivity.this).create();
                alert.setTitle("Enter the street Condition");
                alert.setMessage("you must enter the condition ");
                alert.setButton("OK", new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub

                    }
                });
                 alert.setButton2("OK", new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub

                    }
                });
                 alert.setButton3("OK", new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub

                    }
                });
                 alert.show();
                 return true;
            }
            return false;

        }

        @Override
        protected void draw(Canvas arg0, MapView arg1, boolean arg2) {
            // TODO Auto-generated method stub

        }

    }

} 
```

## 03-11 14:46:24.775：D/TextLayoutCache(3156)：使用调试级别：0 - 启用调试：0

03-11 14:46:24.905: D/AndroidRuntime(3156): 关闭 VM 03-11 14:46:24.905: W/dalvikvm(3156): threadid=1: 线程退出未捕获异常 (group=0x2b542210) 03 -11 14:46:24.905: E/AndroidRuntime(3156): 致命异常: main 03-11 14:46:24.905: E/AndroidRuntime(3156): java.lang.NullPointerException 03-11 14:46:24.905: E /AndroidRuntime(3156): 在 org.osmdroid.views.overlay.OverlayManager.onDraw(OverlayManager.java:107) 03-11 14:46:24.905: E/AndroidRuntime(3156): 在 org.osmdroid.views.MapView。 dispatchDraw(MapView.java:818) 03-11 14:46:24.905: E/AndroidRuntime(3156): at android.view.ViewGroup.drawChild(ViewGroup.java:2989) 03-11 14:46:24.905: E/ AndroidRuntime(3156): 在 android.view.ViewGroup.dispatchDraw(ViewGroup.java:2593) 03-11 14:46:24.905: E/AndroidRuntime(3156): 在 android.view.ViewGroup.drawChild(ViewGroup.java:2989) 03-11 14:46:24.905: E/AndroidRuntime(3156): 在 android.view.ViewGroup.dispatchDraw(ViewGroup.java:2593) 03-11 14:46:24.905: E/AndroidRuntime(3156): 在android.view.ViewGroup.drawChild(ViewGroup.java:2989) 03-11 14:46:24.905: E/AndroidRuntime(3156): 在 android.view.ViewGroup.dispatchDraw(ViewGroup.java:2593) 03-11 14: 46:24.905: E/AndroidRuntime(3156): 在 android.view.ViewGroup.drawChild(ViewGroup.java:2989) 03-11 14:46:24.905: E/AndroidRuntime(3156): 在 android.view.ViewGroup.dispatchDraw (ViewGroup.java:2593) 03-11 14:46:24.905: E/AndroidRuntime(3156): 在 android.view.View.draw(View.java:11085) 03-11 14:46:24.905: E/AndroidRuntime (3156): 在 android.widget.FrameLayout.draw(FrameLayout.java:462) 03-11 14:46:24.905: E/AndroidRuntime(3156): 在 com.android.internal.policy.impl.PhoneWindow$DecorView。绘制（电话窗口。java:2145) 03-11 14:46:24.905: E/AndroidRuntime(3156): 在 android.view.ViewRootImpl.draw(ViewRootImpl.java:2026) 03-11 14:46:24.905: E/AndroidRuntime(3156) : 在 android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1634) 03-11 14:46:24.905: E/AndroidRuntime(3156): 在 android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442) 03-11 14:46:24.905: E/AndroidRuntime(3156): 在 android.os.Handler.dispatchMessage(Handler.java:99) 03-11 14:46:24.905: E/AndroidRuntime(3156): 在 android.os.Looper .loop(Looper.java:137) 03-11 14:46:24.905: E/AndroidRuntime(3156): 在 android.app.ActivityThread.main(ActivityThread.java:4441) 03-11 14:46:24.905: E /AndroidRuntime(3156): at java.lang.reflect.Method.invokeNative(Native Method) 03-11 14:46:24.905: E/AndroidRuntime(3156): at java.lang.reflect.Method.invoke(Method.java ：511) 03-11 14:46:24.905: E/AndroidRuntime(3156): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 03-11 14:46:24.905: E/ AndroidRuntime(3156): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 03-11 14:46:24.905: E/AndroidRuntime(3156): 在 dalvik.system.NativeStart.main(Native方法） ＃＃

# javascript - 扩展 AngularJS $resource 以映射到 Rails RESTful Routes（特别是 $save 以创建和更新）

> ID：15176185
> 
> 赞同：3
> 
> 时间：2013-03-02T15:33:50.623
> 
> 标签：javascript, ruby-on-rails, api, rest, angularjs

我想映射默认的 AngularJS $resource 操作：

```
 'get':    {method:'GET'}
  'save':   {method:'POST'}
  'query':  {method:'GET', isArray:true}
  'remove': {method:'DELETE'}
  'delete': {method:'DELETE'} 
```

到这 5 条 Rails RESTful 路线：

```
 'show':   {method:'GET'}                 -> get
  'create': {method:'POST'}                -> save
  'update': {method:'PUT'}                 -> save
  'index':  {method:'GET', isArray:true}   -> query
  'delete': {method:'DELETE'}              -> remove or delete 
```

一切都映射得很好，除了`save`. 它`create`作为一个`POST`请求工作。但是`PUT`当我保存具有`id != null`

```
# This factory needs a smarter $save() method
myServices.factory 'Message', ['$resource', ($resource) ->
    Message = $resource "api/users/:user_id/messages/:id",
        user_id: '@user_id'
        id: '@id'
    ,
        # update should not be needed
        update:
            method: 'PUT'

    Message
]

myApp.controller "UsersShowCtrl", ["$scope", "$routeParams", "User", "Message", ($scope, $routeParams, User, Message) ->
    $scope.user = User.get({id: $routeParams.user_id})
    $scope.myMessage = new Message {user_id: $routeParams.user_id}

    $scope.submitMyMessage = ->
        # This should just be:
        # $scope.myMessage.$save()
        # rather than:
        unless $scope.myMessage.id?
            $scope.myMessage.$save()
        else
            $scope.myMessage.$update()

] 
```

我最终还想修改提交的参数，以便我可以将它们命名为默认的 rails 嵌套参数`params[:message]`，而不是将它们直接附加到根`params`字符串，但首先我需要知道如何最好地修改 $resource。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T19:05:38.280

在我的脑海中，这个 save() 方法怎么样？

```
myServices.factory 'Message', ['$resource', ($resource) ->
    Message = $resource "api/users/:user_id/messages/:id",
        user_id: '@user_id'
        id: '@id'
    ,
        # update should not be needed
        update:
            method: 'PUT'

    Message::save = ->
        if @id?
            @update()
        else
            @create()

    Message
] 
```

# python - 将 .txt 文件转换为列表并能够逐行索引和打印列表

> ID：15176190
> 
> 赞同：1
> 
> 时间：2013-03-02T15:34:13.653
> 
> 标签：python, list, python-3.x

我希望能够逐行读取文件，然后在出现提示时（比如用户输入“背景”），它返回 0:24 行，因为这些是 .txt 中与他/她的背景相关的行。

```
def anaximander_background():
    f = open('Anaximander.txt', 'r')
    fList = []
    fList = f.readlines()
    fList = [item.strip('\n') for item in fList]
    print(fList[:20]) 
```

这段代码打印我的列表，如：

```
['ANAXIMANDER', '', 'Anaximander was born in Miletus in 611 or 610 BCE.', ...] 
```

我尝试了很多不同的方法（for、if 和 while 循环）并尝试了 csv 导入。

我得到的最接近的是能够打印出类似于：

```
[ANAXIMANDER]
[]
[info] 
```

依此类推，具体取决于我从`fList`.

我真的希望它像我刚刚展示的示例一样打印，但没有列表括号 ([ ])。

如有必要，绝对可以澄清。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T15:37:05.250

循环遍历列表，或使用`str.join()`：

```
for line in fList[:20]:
    print(line) 
```

或者

```
print('\n'.join(fList[:20]) 
```

第一个`fList`单独打印切片中包含的每个元素，第二个将行连接成一个新字符串，`\n`在打印之前在它们之间使用换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T15:51:41.723

要打印文件的前 20 行：

```
import sys
from itertools import islice

with open('Anaximander.txt') as file:
    sys.stdout.writelines(islice(file, 20)) 
```

# java - android-market 检索空结果

> ID：15176193
> 
> 赞同：1
> 
> 时间：2013-03-02T15:34:39.290
> 
> 标签：java, android, google-play

我想收集一些关于特定应用程序的数据

谷歌游戏市场。

我使用了这个非官方的 API：

[https://code.google.com/p/android-market-api/](https://code.google.com/p/android-market-api/)

这是我的代码，它基本上获取应用程序名称列表

并尝试在每个应用程序上获取其他数据：

```
public void printAllAppsData(ArrayList<AppHarvestedData> dataWithAppsNamesOnly)
{       
    MarketSession session = new MarketSession();
    session.login("[myGamil]","[myPassword]");
    session.getContext().setAndroidId("dead00beef");

    final ArrayList<AppHarvestedData> finalResults = new ArrayList<AppHarvestedData>();

    for (AppHarvestedData r : dataWithAppsNamesOnly)
    {
    String query = r.name;
    AppsRequest appsRequest = AppsRequest.newBuilder()
                                    .setQuery(query)
                                    .setStartIndex(0).setEntriesCount(10)
                                    //.setCategoryId("SOCIAL") 
                                    .setWithExtendedInfo(true)
                                    .build();

    session.append(appsRequest, new Callback<AppsResponse>() {
             @Override
             public void onResult(ResponseContext context, AppsResponse response) {

                      List<App> apps = response.getAppList(); 
                        for (App app : apps) { 
                                AppHarvestedData r = new AppHarvestedData(); 

                                r.title = app.getTitle();
                                r.description = app.getExtendedInfo().getDescription();
                                String tmp = app.getExtendedInfo().getDownloadsCountText();
                                tmp = tmp.replace('<',' ').replace('>',' ');
                                int indexOf = tmp.indexOf("-");
                                tmp = (indexOf == -1) ? tmp : tmp.substring(0, indexOf);
                                r.downloads = tmp.trim();
                                r.rating = app.getRating();
                                r.version = app.getVersion(); 
                                r.userRatingCount = String.valueOf(app.getRatingsCount()); 
                                finalResults.add(r);
                                }
                        }
             });
    session.flush();
    }

    for(AppHarvestedData res : finalResults)
    {           
            System.out.println(res.toString());
    }
} 
```

}

我现在应该打电话`session.flush();`吗？

结果，我所有的查询都返回空集合，

即使我看到有一些名称作为输入。

当我只发送一个硬编码的应用程序名称作为查询时，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T20:20:16.627

session.flush() 关闭你的会话你应该为每个查询打开会话。注意用户可能会被锁定几分钟，所以你应该有很多用户来处理这些查询。如果您有 AppId，您应该使用该查询：

```
 String query = r.name;
    AppsRequest appsRequest = AppsRequest.newBuilder()
                                    .setAppId("com.example.android")               
                                    .setWithExtendedInfo(true)
                                    .build();

    session.append(appsRequest, new Callback<AppsResponse>() {
             @Override
             public void onResult(ResponseContext context, AppsResponse response) {

                      List<App> apps = response.getAppList(); 
                        for (App app : apps) { 
                                AppHarvestedData r = new AppHarvestedData(); 

                                r.title = app.getTitle();
                                r.description = app.getExtendedInfo().getDescription();
                                String tmp = app.getExtendedInfo().getDownloadsCountText();
                                tmp = tmp.replace('<',' ').replace('>',' ');
                                int indexOf = tmp.indexOf("-");
                                tmp = (indexOf == -1) ? tmp : tmp.substring(0, indexOf);
                                r.downloads = tmp.trim();
                                r.rating = app.getRating();
                                r.version = app.getVersion(); 
                                r.userRatingCount = String.valueOf(app.getRatingsCount()); 
                                finalResults.add(r);
                                }
                        }
             });
    session.flush();
    } 
```

如果您还想下载屏幕截图或图像，则应调用此查询：

```
 GetImageRequest? imgReq; imgReq = GetImageRequest?.newBuilder().setAppId(appId).setImageUsage(AppImageUsage?.SCREENSHOT).setImageId("0").build();

session.append(imgReq, new Callback<GetImageResponse>() {
@Override public void onResult(ResponseContext? context, GetImageResponse? response) {
Log.d(tag, "------------------> Images response <----------------"); if(response != null) {
try {
//imageDownloader.download(image, holder.image, holder.imageLoader);
Log.d(tag, "Finished downloading screenshot 1...");
} catch(Exception ex) {
ex.printStackTrace();
}
} else {
Log.e(tag, "Response was null");
} Log.d(tag, "------------> End of Images response <------------");
}
}); 
```

# sql - 在其他表上定义检查条件

> ID：15176194
> 
> 赞同：2
> 
> 时间：2013-03-02T15:34:46.693
> 
> 标签：sql, database-design, oracle11g

我有如下表格：

### 坦克桌

```
CREATE TABLE fishtank(
tanknum number(8),
temperature number(6,2),
capacity number(10),
primary key(tanknum));

Name        Null     Type        
----------- -------- ----------- 
TANKNUM     NOT NULL NUMBER(8)   
TEMPERATURE          NUMBER(6,2) 
CAPACITY             NUMBER(10) 
```

### 鱼型

```
CREATE TABLE type(
species varchar2(20),
mintemp number(6,2),
maxtemp number(6,2),
primary key(species));

Name    Null     Type         
------- -------- ------------ 
SPECIES NOT NULL VARCHAR2(20) 
MINTEMP          NUMBER(6,2)  
MAXTEMP          NUMBER(6,2) 
```

### 吃

```
CREATE TABLE eats(
species1 varchar2(20),
species2 varchar2(20),
primary key(species1, species 2),
foreign key(species1) references type,
foreign key(species2) references type);

Name     Null     Type         
-------- -------- ------------ 
SPECIES1 NOT NULL VARCHAR2(20) 
SPECIES2 NOT NULL VARCHAR2(20) 
```

现在是这样的，有一个不同种类的鱼缸。我想把鱼放进鱼缸。吃指定哪两个物种互相吃。如果我们在吃像

```
species1='a' species2='b' 
```

这意味着物种'a'吃'b'，所以我们不能把它们都放在同一个缸里。现在我正在尝试创建一个名为 fish 的表，它应该有

```
name
species
tanknum 
```

在创建表格时，我想在这里添加一个条件，即同一个鱼缸中的任何两条鱼都不应该互相吃掉。我想使用检查约束来实现这一点，并且我正在研究 oracle SQL。需要一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:43:25.923

触发器将是一个很好的解决方案

```
 create trigger prevent 
    on fish 
    for insert 
    as 
begin
    if ( CASE when inserted.species IN (SELECT DISTINCT (species2) FROM fish f JOIN eats e ON f.species= e.species1) THEN 1 ELSE 0 END)

    /* Cancel the insert and print a message.*/

        rollback transaction; 
        print "No fish eating allowed!." ;

    /* Otherwise, allow it. */
    else
      print "Added!";
    end if;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:16:28.887

伙计，检查一下！！！！有任何澄清让我知道！！！！

```
 create or replace
TRIGGER check_fish before
INSERT ON fish_in_tank FOR EACH row DECLARE

Type rec_2 IS TABLE OF fish_in_tank%rowtype;
fish_dup rec_2;
no_insert EXCEPTION;
BEGIN

SELECT name,
SPECIES,
tanknum bulk collect
INTO fish_dup
FROM fish_in_tank
WHERE SPECIES IN
(SELECT case when species1=:new.species then species2 when species2=:new.species then species1 end FROM Eats );

dbms_output.put_line(fish_dup(1).name);
FOR i IN fish_dup.first..fish_dup.last
LOOP
IF (:new.tanknum=fish_dup(i).tanknum) THEN
raise no_insert;
END IF;
END LOOP;
EXCEPTION
WHEN no_insert THEN

raise_application_error(-20000,'Cannot insert');
WHEN NO_DATA_FOUND THEN
dbms_output.put_line('Successful');
END; 
```

# c++ - ColorF：什么头文件或库定义了 ColorF？

> ID：15176198
> 
> 赞同：1
> 
> 时间：2013-03-02T15:36:08.477
> 
> 标签：c++, panda3d

我正在尝试为 1.8 版构建 Solar-System (C++) Panda3D 示例。我遇到的问题是，当我编译它时出现错误：

```
clr; g++ -c ./solar_system/tut_solar_system.cpp -o ss.o -fPIC -L/usr/lib/panda3d -I/usr/include/python2.7 -I/usr/include/panda3d
./solar_system/../p3util/cOnscreenText.h:75:22: error: ‘Colorf’ does not name a type 
```

我已经尝试编辑该文件并包括 glew、glext 和 glut（由我的发行版提供），以及 Panda3D 提供的“panda_gext”——这些都没有提供 ColorF。（我使用的是archlinux，我有glew、gleext和freeglut。）

我不知道从哪里开始寻找。谷歌让我失望了！有谁知道 ColorF 是在哪里定义的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:53:46.883

它被称为 LColorf，它是 LVecBase4f 的 typedef，LVecBase4f 是用于四分量浮点值（例如向量和颜色）的通用 Panda3D 类。“f”代表“浮动”；还有一个 LColord typedef 可用。

这是 Panda3D 1.8.0 中的一个变化。在 1.8.0 之前，它被称为 Colorf（没有前导 L）。据推测，您下载的示例程序是为早期版本设计的。您可以更改相关示例程序以使用 LColorf，或者您可以选择在包含这些标题之前添加以下内容：

```
#if PANDA_NUMERIC_VERSION >= 1008000
#define Colorf LColorf
#endif 
```

（或者，如果您喜欢，您可以使用 typedef。）

作为记录，要包含以使 LColorf 符号可用的适当头文件是`luse.h`. 您不应该包含`panda_glext.h`，它仅由 OpenGL 渲染器使用。

# scala - Scala：对象初始化程序中的并行收集导致程序挂起

> ID：15176199
> 
> 赞同：18
> 
> 时间：2013-03-02T15:36:09.207
> 
> 标签：scala, scala-collections

我刚刚注意到一个令人不安的行为。假设我有一个由一个对象组成的独立程序：

```
object ParCollectionInInitializerTest {
  def doSomething { println("Doing something") }

  for (i <- (1 to 2).par) {
    println("Inside loop: " + i)
    doSomething
  }

  def main(args: Array[String]) {
  }
} 
```

该程序是完全无辜的，当 for 循环中使用的范围**不是**并行范围时，它可以正确执行，输出如下：

> 内部循环：1
> 做某事
> 内部循环：2
> 做某事

不幸的是，当使用并行集合时，程序只是挂起，没有调用 doSomething 方法，所以输出如下：

> 内循环：2
> 内循环：1

然后程序挂起。
这只是一个讨厌的错误吗？我正在使用 scala-2.10。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-02T15:59:57.503

这是在 Scala 中在构造完成之前释放对单例对象的引用时可能发生的固有问题。`ParCollectionInInitializerTest`发生这种情况是因为在对象完全构造之前，另一个线程试图访问该对象。它与方法无关`main`，而是与初始化包含该`main`方法的对象有关——尝试在 REPL 中运行它，输入表达式`ParCollectionInInitializerTest`，您将得到相同的结果。它也与作为守护线程的 fork-join 工作线程无关。

单例对象被延迟初始化。每个单例对象只能初始化一次。这意味着访问对象的第一个线程（在您的情况下是主线程）必须获取对象的锁，然后对其进行初始化。随后出现的每个其他线程都必须等待主线程初始化对象并最终释放锁。这是在 Scala 中实现单例对象的方式。

在您的情况下，并行收集工作线程尝试访问要调用的单例对象`doSomething`，但在主线程完成初始化对象之前不能这样做 - 所以它会等待。另一方面，主线程在构造函数中等待，直到并行操作完成，这取决于所有工作线程完成——主线程一直持有单例的初始化锁。因此，出现死锁。

您可以使用 2.10 的期货或仅使用线程导致此行为，如下所示：

```
def execute(body: =>Unit) {
  val t = new Thread() {
    override def run() {
      body
    }
  }

  t.start()
  t.join()
}

object ParCollection {

  def doSomething() { println("Doing something") }

  execute {
    doSomething()
  }

} 
```

将其粘贴到 REPL 中，然后编写：

```
scala> ParCollection 
```

并且 REPL 挂起。

# sql - 阅读时更新表格

> ID：15176201
> 
> 赞同：0
> 
> 时间：2013-03-02T15:36:30.160
> 
> 标签：sql, vb.net

我正在编写一段代码（VB.NET）来清理（相当大的）数据表。

我正在连接到我的 SQL 数据库，遍历表，清理数据并将清理后的数据添加到不同的列中。

由于我目前正在为我清理数据的同一循环中的每条记录更新我的数据库，我想知道是否有更有效的方法来执行此操作，我将清理数据然后发送所有一次更新的记录到数据库。

简化代码：

```
'Connect
SQLConn.ConnectionString = strConnection
SQLConn.Open()
SQLCmd.Connection = SQLConn
SQLConn2.ConnectionString = strConnection
SQLConn2.Open()
SQLCmd2.Connection = SQLConn2

'Set query
strSQL = "SELECT Column1 FROM Table1"
SQLCmd.CommandText = strSQL

'Load Query
SQLdr = SQLCmd.ExecuteReader

'Start Cleansing
While SQLdr.Read
    Cleansing()

'Add to database
    strSQL2 = "UPDATE Table1 SET Clean_data = '" & strClean & "' WHERE Dirty_Data = '" & SQLdr(0).ToString & "'"
    SQLCmd2.CommandText = strSQL2
    SQLCmd2.ExecuteNonQuery() 
End While

'Close Connections
SQLdr.Close()
SQLConn.Close()
SQLConn2.Close() 
```

我猜测（通过寻找解决方案）可以在我的循环之外进行更新，但我似乎无法找到具体的方法。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:53:21.490

您的代码需要很长时间，因为它`update`正在对每条记录进行全表扫描。您可以通过在“脏数据”列上添加索引来加快速度。

本质上，您正在读取 select 语句中的数据。清理一行，然后更新它。首选的“基于集合”的方法更像是：理想情况下，您希望这样做：

```
update table1
    set column1 = <fix the dirty data>
    where column1 <is dirty> 
```

并且您在 SQL 中有一些选项，在`replace()`和`case`和`like`（例如）方面可以帮助这个过程。

但是您已经拥有数据库外部的清理代码。为此，您要创建并打开一个游标，处理记录，然后写回。与数据库内操作相比，游标相对较慢。但是，这*正是*它们的设计目的——将外部代码应用于单个记录。

# matlab - Matlab gui文本更新不起作用

> ID：15176206
> 
> 赞同：1
> 
> 时间：2013-03-02T15:37:11.277
> 
> 标签：matlab

好的，所以我在 Matlab 中构建了一个 GUI，在执行主函数时，文本显示“处理中...”。完成后，它会显示“完成！”，但是用户有一个复选框选项来创建电影。因此，我试图让它在执行此部分时说“正在创建电影文件...”，但不会从说“处理中...”改变

这是代码：

```
set(handles.text5,'String','Processing...')
mov = main(days,viewpoint,planets,makemov,names);
if strcmp(makemovie,'y') == 1
    set(handles.text5, 'String', 'Creating Movie File...')
    moviemaker(mov, movname)
    set(handles.text5, 'String', 'Done!')
else
    set(handles.text5, 'String', 'Done!')
end 
```

我知道 if 语句正在正确执行，因为如果我选中该框，它确实会创建电影，但是我无法弄清楚为什么它不会显示“正在创建电影文件...”

任何帮助将不胜感激，谢谢。

# cordova - PhoneGap/JQuery Mobile - 获取引用页面

> ID：15176209
> 
> 赞同：0
> 
> 时间：2013-03-02T15:37:39.017
> 
> 标签：cordova, jquery-mobile

我有一个 PhoneGap/JQuery Mobile 应用程序，它有一个“设置”页面，标题中有一个“返回”按钮，用于返回上一页。单击后退按钮时，我需要刷新上一页。

我已经设法通过使用 document.referrer 在桌面浏览器上运行 $.mobile.changePage(referrer, {reloadPage:"true"}); 但在 Android PhoneGap 应用程序上似乎不存在引荐来源网址。

我尝试在后退按钮上添加 data-ajax="false" 和 data-rel="external" 但这不起作用，我已经搜索了所有答案，但没有找到任何相关内容。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:49:32.460

我发现的一个临时解决方案是在 URL 中发送一个代码，然后使用 switch 语句来获取完整的引用 URL。我确信有更好的方法来做到这一点。

```
<a href="Settings.html?ref=in">Settings</a>

switch(getUrlParam('ref')) {
    case "in":
        page="index.html";
        break;
}

$.mobile.changePage(page, {pageReload:"true"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T00:01:31.520

删除后退按钮中的 rel="back" 并在 href="#" 字段中放置指向页面的链接。

通过这种方式，它会返回，但它会像任何其他链接一样被视为链接并会刷新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T17:58:30.467

在 pageinit 中，将所有后退按钮标记为 data-ajax="false"

```
$(document).on('pageinit', function(event, data){
    $('a[data-rel=back]').attr('data-ajax', 'false');
}); 
```

# java - 用于塔防的 Dijkstra、广度优先还是 A*？

> ID：15176212
> 
> 赞同：3
> 
> 时间：2013-03-02T15:38:05.177
> 
> 标签：java, path-finding

所以我问了一个关于为我的塔防游戏优化我的 A* 的问题，得到了几个答案，说我应该先使用 Dijkstra 或 Breadth 来计算 50 多个敌人的最短距离。

我的问题是

我是先使用广度还是 Dijkstra？dijkstra 比 A* 快吗？它和A*一样准确吗？有什么方法可以优化 A* 而不是二进制堆，这样我就可以使用 A* 计算路径而无需学习 dijkstra？

目前平均需要大约 0.003 秒来计算 30* 30 网格上的长路径，我的 A* 使用二进制堆，但我认为这可能不够快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T15:44:44.753

DJikstra*是*具有惰性启发式函数的 A* 的一个单独案例。然后，所有问题都归结为您是否可以提出合适的启发式函数。如果可以的话，A* 会表现得更好，这一点毫无疑问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T15:59:53.103

对于塔防游戏，您通常希望为每个出口保存[最短路径树](http://en.wikipedia.org/wiki/Shortest_path_tree)，并将其用于所有前往该出口的生物。这样，您只需在连接发生变化时（即建造或摧毁塔时）重新计算一次。

由于无论如何您都想计算完整的最短路径树，因此您不妨使用普通的旧[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)而不是更复杂[的 A*](http://en.wikipedia.org/wiki/A-star_algorithm)。

但是，*也*可以根据需要使用“增量 A*”来构建最短路径树。基本上，你会*从目标运行 A* 到 mob*，当你到达目标时保存算法的状态（包括到目前为止构建的部分最短路径树），然后恢复它（使用不同的目标和启发式）当您接下来需要从树尚未覆盖的某个点找到通往该目标的路径时。您甚至可以在添加或移除塔时对树进行增量更新，尽管这会变得有点复杂。

# c++ - 读取整个文件并通过套接字发送

> ID：15176213
> 
> 赞同：2
> 
> 时间：2013-03-02T15:38:15.467
> 
> 标签：c++, sockets, winapi, winsock, winsock2

我制作了一个应该传输文件的服务器和客户端。我试图让它读取整个文件并发送它。但现在我看到了，我遇到了问题。服务器应在客户端连接时自动发送文件。但是文件是空的，不知道问题出在哪里你可以看到我正在尝试发送.txt文件。但我想将来发送一个大文件，但不大于 1MB。）

编辑：

图片在这里：http: [//img819.imageshack.us/img819/8259/aadi.jpg](http://img819.imageshack.us/img819/8259/aadi.jpg)

*   左侧：我尝试发送的文件。
*   右侧：我收到的文件

![在此处输入图像描述](../Images/659314c123a5c3f4c931f1dfaf31c907.png)

问题：我收到的文件已损坏，无法使用。

服务器：

```
#include <WinSock2.h>
#include <Windows.h>
#include <stdio.h>
#include <iostream>
using namespace std;

#pragma comment(lib, "Ws2_32.lib")
#define Port 6000

SOCKET Socket, Sub;
WSADATA Winsock;
sockaddr_in Addr;
sockaddr_in IncomingAddress;
int AddressLen = sizeof(IncomingAddress);

int main()
{
    WSAStartup(MAKEWORD(2, 2), &Winsock);    // Start Winsock

    if(LOBYTE(Winsock.wVersion) != 2 || HIBYTE(Winsock.wVersion) != 2)    // Check version
    {
        WSACleanup();
        return 0;
    }

    Socket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);

    ZeroMemory(&Addr, sizeof(Addr));
    Addr.sin_family = AF_INET;
    Addr.sin_port = htons(Port);  
    bind(Socket, (sockaddr*)&Addr, sizeof(Addr));

    if(listen(Socket, 1) == SOCKET_ERROR)
    {
        printf("listening error\n");
    }
    else
    {
        printf("listening ok\n");
    }

    if(Sub = accept(Socket, (sockaddr*)&IncomingAddress, &AddressLen))
    {
        char *ClientIP = inet_ntoa(IncomingAddress.sin_addr);
        int ClientPort = ntohs(IncomingAddress.sin_port);
        printf("Client conncted!\n");
        printf("IP: %s:%d\n", ClientIP, ClientPort);

        printf("Sending file .. \n");

        FILE *File;
        char *Buffer;
        unsigned long Size;

        File = fopen("C:\\Prog.rar", "rb");
        if(!File)
        {
            printf("Error while readaing the file\n");
            getchar();
            return 0;
        }

        fseek(File, 0, SEEK_END);
        Size = ftell(File);
        fseek(File, 0, SEEK_SET);

        Buffer = new char[Size];

        fread(Buffer, Size, 1, File);
        char cSize[MAX_PATH];
        sprintf(cSize, "%i", Size);

        fclose(File);
        send(Sub, cSize, MAX_PATH, 0); // File size

        //int len = Size;
        //char *data = Buffer;

        int Offset = 0;
        while(Size > Offset)
        {
            int Amount = send(Sub, Buffer + Offset, Size - Offset, 0);

            if(Amount <= 0)
            {
                cout << "Error: " << WSAGetLastError() << endl;
                break;
            }
            else
            {
                Offset += Amount;
                printf("2\n");
            }
        }

        free(Buffer);
        closesocket(Sub);
        closesocket(Socket);
        WSACleanup();
    }

    getchar();
    return 0;
} 
```

客户：

```
#include <WinSock2.h>
#include <Windows.h>
#include <stdio.h>
#include <iostream>
using namespace std;

#pragma comment(lib, "Ws2_32.lib")

SOCKET Socket;
WSADATA Winsock;
sockaddr_in Addr;
int Addrlen = sizeof(Addr);

int main()
{
    WSAStartup(MAKEWORD(2, 2), &Winsock);    // Start Winsock

    if(LOBYTE(Winsock.wVersion) != 2 || HIBYTE(Winsock.wVersion) != 2)    // Check version
    {
        WSACleanup();
        return 0;
    }

     Socket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);

    ZeroMemory(&Addr, sizeof(Addr));    // clear the struct
    Addr.sin_family = AF_INET;    // set the address family
    Addr.sin_addr.s_addr = inet_addr("127.0.0.1");
    Addr.sin_port = htons(6000);    // set the port

    if(connect(Socket, (sockaddr*)&Addr, sizeof(Addr)) < 0)
    {
        printf("Connection failed !\n");
        getchar();
        return 0;
    }

    printf("Connection successful !\n");

    printf("Receiving file .. \n");

    int Size;
    char *Filesize = new char[1024];

    if(recv(Socket, Filesize, 1024, 0)) // File size
    {
        Size = atoi((const char*)Filesize);
        printf("File size: %d\n", Size);
    }

    char *Buffer = new char[Size];

    //int len = Size;
    //char *data = Buffer;

    int Offset = 0;
    while(Size > Offset)
    {
        int Amount = recv(Socket, Buffer + Offset, Size - Offset, 0);

        if(Amount <= 0)
        {
            cout << "Error: " << WSAGetLastError() << endl;
            break;
        }
        else
        {
            Offset += Amount;
            printf("2\n");
        }
    }

    FILE *File;
    File = fopen("Prog.rar", "wb");
    fwrite(Buffer, 1, Size, File);
    fclose(File);

    getchar();
    closesocket(Socket);
    WSACleanup();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T16:09:20.300

`send`API 可能不会发送您请求发送的所有数据。因此，您必须注意返回值，并从上次发送结束的地方重试发送。举个例子：

```
offset = 0;
while (offset < bufsize) {
    r = send(socket, buf+offset, bufsize-offset);
    if (r <= 0) break;
    offset += r;
} 
```

当您为文件传输做类似的事情时，您并不确定您的文件大小是否属于这种情况。

当你发送文件大小时，你只需要发送代表大小的字符串，而不是整个`MAX_PATH`. 然后接收方需要解析第一个字符串以确定大小，但是在第一个字符串结尾之后读入的任何数据都需要被视为文件的一部分。但是，由于您正在尝试发送`MAX_PATH`，因此接收者应该收到相同的金额。您的客户端代码收到 1024 个字节，但没有迹象表明这与`MAX_PATH`.

API 返回的`recv`字节数也可能少于请求的字节数。您使用循环来处理读取文件，但您可能需要循环来读取包含文件大小的整个消息。

在您的客户端接收循环中，您正在递增`data`指针。这使得以后无法写出文件。你已经有了`Buffer`，所以用它来写出你的文件。

```
fwrite(Buffer, 1, len, File); 
```

如果您在执行套接字 I/O 时遇到错误，您可以使用 检索错误`WSAGetLastError()`，或者您可以使用该选项`getsockopt()`在套接字上发出问题。`SO_ERROR`这些可能返回不同的值，但错误原因应该是相关的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-15T14:18:04.277

我自己也遇到了同样的问题，在谷歌搜索后发现 send() api 可以根据依赖于操作系统的低级 TCP 缓冲区发送最大数据。所以为了发送一个巨大的文件，我们需要执行文件分块，即发送文件在块的形式。

```
`const int FILE_CHUNK_SIZE = 2000; 

 //get file size
 ifstream file("myFile.file", ios::binary);
 file.seekg(0, ios::end);
 unsigned int fileSize = file.tellg();
 file.close();

 //get the file
 char* fileBuffer = new char[fileSize];
 file.open("myFile.file", ios::binary);
 file.seekg (0, ios::beg);
 file.read (fileBuffer, fileSize);
 file.close();

 //send file in chunks
 unsigned int bytesSent = 0;
 int bytesToSend = 0;

 while(bytesSent < fileSize)
 {
     if(fileSize - bytesSent >= FILE_CHUNK_SIZE)
        bytesToSend = FILE_CHUNK_SIZE;
    else
        bytesToSend = fileSize - bytesSent;
    send(ConnectSocket, fileBuffer + bytesSent, bytesToSend, 0 );
    bytesSent += bytesToSend;
}
delete [] fileBuffer;` 
```

在接收端，我们需要调用一个 recv() api，直到读取整个文件内容。

归功于：shacktar cplusplus.com

# java - 我正在更改图像中像素的 LSB 值，但它没有生效（Java）

> ID：15176214
> 
> 赞同：1
> 
> 时间：2013-03-02T15:38:16.087
> 
> 标签：java, rgb

我已经彻底研究了每一个问题，但是，唉！所以，这是我的问题，我想做的是改变图像中 RGB 值的 LSB。我已经使用 getRGB() 来获取特定像素的 RGB 值，将单个 R、G 和 B 值转换为 8 位，我试图用另一个来源的位替换它们的 LSB（例如文本） . 举例说明：@像素 (0, 1) R=0111010, G=0011101 和 B=1101001 我想用 101 替换它们的 LSB，即新值将是 R=011101(1), G=001110(0) 和B=110100(1)。事情是在我处理它并保存我的图像之后，它并没有真正保存它。这是我的代码

```
Scanner input = new Scanner(System.in);
    System.out.print("Enter URL: ");
    String imageURL = input.next();

    File file = new File(imageURL);
    BufferedImage image = ImageIO.read(file);

    String flag = "011111000111110011";
    int pixelX = 0;
    int pixelY = 0;

    for(int i=0; i<flag.length(); i+=3){
        int pixel = image.getRGB(pixelX, pixelY);
        int  red   = (pixel & 0x00ff0000) >> 16;
        int  green = (pixel & 0x0000ff00) >> 8;
        int  blue  =  pixel & 0x000000ff;
        System.out.println("\n@ pixel: "+pixelX+pixelY+"\nred: "+red+"green: "+green+"blue: "+blue);

        String binRed = roundTo8(Integer.toBinaryString(red));
        String binGreen = roundTo8(Integer.toBinaryString(green));
        String binBlue = roundTo8(Integer.toBinaryString(blue));
        System.out.println("\nbinRed: "+binRed+"\nbinGreen: "+binGreen+"\nbinBlue: "+binBlue);

        String flagRed = flag.substring(i, (i+1));
        String flagGreen = flag.substring((i+1), (i+2));
        String flagBlue = flag.substring((i+2), (i+3));
        System.out.println("\nflagRed: "+flagRed+"\nflagGreen: "+flagGreen+"\nflagBlue: "+flagBlue);

        if(!(flagRed.equals(binRed.charAt(7)))){
            binRed = (binRed.substring(0, 7)).concat(flagRed);
            System.out.print("\nnew binRed: "+binRed);
        }

        if(!(flagGreen.equals(binGreen.charAt(7)))){
            binGreen = (binGreen.substring(0, 7)).concat(flagGreen);
            System.out.print("\nnew binGreen: "+binGreen);
        }

        if(!(flagBlue.equals(binBlue.charAt(7)))){
            binBlue = (binBlue.substring(0, 7)).concat(flagBlue);
            System.out.print("\nnew binBlue: "+binBlue);
        }

        System.out.print("\nnew red: "+Integer.parseInt(binRed, 2));
        System.out.print("\nnew green: "+Integer.parseInt(binGreen, 2));
        System.out.print("\nnew blue: "+Integer.parseInt(binBlue, 2));
        System.out.println("==========");
        //

        int newRed = Integer.parseInt(binRed, 2);
        int newGreen = Integer.parseInt(binGreen, 2);
        int newBlue = Integer.parseInt(binBlue, 2);

        Color clr = new Color(newRed, newGreen, newBlue);
        int temp = clr.getRGB();
        image.setRGB(pixelX, pixelY, temp);

        try {
            File outputfile = new File("saved.jpg");
            ImageIO.write(image, "jpg", outputfile);
        } catch (IOException e) {
            JOptionPane.showMessageDialog(null, "An error occured while saving the steg file.", "Error", JOptionPane.ERROR_MESSAGE);
        }

        pixelX++;
    } 
```

我已经使用此代码来测试上面的代码：

```
Scanner input = new Scanner(System.in);
    System.out.print("Enter URL: ");
    String imageURL = input.next();

    File file = new File(imageURL);
    BufferedImage image = ImageIO.read(file);

        for(int j=0; j<45; j++){
            int pixel = image.getRGB(j, 0);
            int  red   = (pixel & 0x00ff0000) >> 16;
            int  green = (pixel & 0x0000ff00) >> 8;
            int  blue  =  pixel & 0x000000ff;

            String binRed = roundTo8(Integer.toBinaryString(red));
            String binGreen = roundTo8(Integer.toBinaryString(green));
            String binBlue = roundTo8(Integer.toBinaryString(blue));

            System.out.print(binRed.charAt(7)+""+binGreen.charAt(7)+binBlue.charAt(7)+" ");
        } 
```

# javascript - 用于处理 Markdown 文件中的 javascript 的命令行工具

> ID：15176217
> 
> 赞同：1
> 
> 时间：2013-03-02T15:38:23.163
> 
> 标签：javascript, command-line, markdown

我一直在进行广泛的搜索，但似乎找不到答案（或者可能没有用正确的词问）。事情是这样的：

我有一个降价文件，其中包含一些 javascript 部分。这些通过浏览器得到了很好的处理。现在我想使用 pandoc 处理相同的文件以输出上下文源，然后从中构建一个 pdf。

由于 pandoc 似乎没有解释 javascript，至少据我所知，我想要一个命令行（linux）工具，在使用 pandoc 之前解释 javascript。将流程抽象为

```
cat mySource.md | ThatVerySpecialTool | pandoc > myContextInput.tex 
```

我们的想法是为网站和 pdf 提供相同的来源。而且由于该网站已经存在并正在运行，我真的很想保留降价源。

尽管作为一个请求看起来很简单，但我无法找到任何可以帮助我的东西。

脚本部分看起来像

```
<script type="text/javascript" language="javascript">
document.write("something");
</script> 
```

非常感谢

# python - ng-Grid 'Selection' 不会显示在使用 Flask 的浏览器中

> ID：15176218
> 
> 赞同：2
> 
> 时间：2013-03-02T15:38:26.630
> 
> 标签：python, angularjs, flask

在 pluker [http://plnkr.co/edit/CncDWCktXTuBQdDVfuVv?p=preview上使用 Master/Details 示例](http://plnkr.co/edit/CncDWCktXTuBQdDVfuVv?p=preview)

我复制了所有本地文件，然后在 Firefox 和 chrome 中启动了 html。一切正常。

但是当我尝试通过 Flask python 服务器为页面提供服务时。我没有看到 html 中的选择作为输出。看起来像 {{ ?? }} 在没有出现....

app.py：精简烧瓶应用程序

```
from flask import Flask, render_template, request, json, Response

app = Flask(__name__)
DEBUG = True

@app.route("/index", methods=['GET', 'POST'])
def selected_version():
    return render_template("index.html")

if __name__ == "__main__":
    app.run(debug=True) 
```

index.html：

```
<!DOCTYPE html>
<html ng-app="myApp">
    <head lang="en">
        <meta charset="utf-8">
        <title>Custom Plunker</title>  
        <link rel="stylesheet" type="text/css" href="http://angular-ui.github.com/ng-grid/css/ng-grid.css" />
        <link rel="stylesheet" type="text/css" href="../static/css/style.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js"></script>
        <script type="text/javascript" src="http://angular-ui.github.com/ng-grid/lib/ng-grid.debug.js"></script>
        <script type="text/javascript" src="../static/js/newAppMain.js"></script>
    </head>
    <body ng-controller="MyCtrl">
        <div class="gridStyle" ng-grid="gridOptions"></div>
        <div class="selectedItems"> {{mySelections}} </div>
    </body>
</html> 
```

index.html 的视图源

```
 <!DOCTYPE html>
    <html ng-app="myApp">
        <head lang="en">
            <meta charset="utf-8">
            <title>Custom Plunker</title>  
            <link rel="stylesheet" type="text/css" href="http://angular-ui.github.com/ng-grid/css/ng-grid.css" />
            <link rel="stylesheet" type="text/css" href="../static/css/style.css" />
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
            <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js"></script>
            <script type="text/javascript" src="http://angular-ui.github.com/ng-grid/lib/ng-grid.debug.js"></script>
            <script type="text/javascript" src="../static/js/newAppMain.js"></script>
        </head>
        <body ng-controller="MyCtrl">
            <div class="gridStyle" ng-grid="gridOptions"></div>
            <div class="selectedItems"></div>
        </body>
    </html> 
```

# android - PhoneGap - 从当前应用启动另一个应用

> ID：15176219
> 
> 赞同：6
> 
> 时间：2013-03-02T15:38:27.017
> 
> 标签：android, cordova, android-intent

我正在为 android 开发一个基于 phonegap 的应用程序，并且想知道如何在当前设备中未安装希望的应用程序时运行另一个应用程序甚至去 android 市场。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:45:57.277

是的，Dozent，这是可能的，但您可能最终需要编写一个插件来调用 Android Intent。许多核心PhoneGap API，如Camera 使用Intents。

[http://developer.android.com/guide/topics/intents/intents-filters.html](http://developer.android.com/guide/topics/intents/intents-filters.html)

[http://wiki.phonegap.com/w/page/36753494/How%20to%20Create%20a%20PhoneGap%20Plugin%20for%20Android](http://wiki.phonegap.com/w/page/36753494/How%20to%20Create%20a%20PhoneGap%20Plugin%20for%20Android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T16:01:56.427

查看这个名为[WebIntent](http://smus.com/android-phonegap-plugins/)的插件。要了解有关意图的更多信息，请参阅[此处](http://developer.android.com/guide/components/intents-filters.html)。

# c# - 我表单上的某些控件没有显示在 foreach 循环中

> ID：15176220
> 
> 赞同：2
> 
> 时间：2013-03-02T15:38:34.707
> 
> 标签：c#, winforms, controls, windows-forms-designer

我在表单上有一个大约 100 组控件（标签、复选框、文本框）的列表。它们都被标记为默认名称，(textbox1, textbox2, ... textbox101) 它们通常是隐藏的，除非需要。当我运行时：

```
 string msg = "";
        foreach (Control child in Controls)
            msg = msg + child.Name + ", ";
        MessageBox.Show(msg); 
```

只有前 90 个出现在 Controls 集合中（如 Messagebox 输出所示）。就好像我达到了表格的限制，但我知道我没有。

它们都是在 .Designer.cs 文件中创建的，它们看起来都一样。它们的创建方式相同。

```
 ...
    private System.Windows.Forms.CheckBox checkBox88;
    private System.Windows.Forms.Label label88;
    private System.Windows.Forms.TextBox textBox88;
    private System.Windows.Forms.CheckBox checkBox89;
    private System.Windows.Forms.Label label89;
    private System.Windows.Forms.TextBox textBox89;
    private System.Windows.Forms.CheckBox checkBox90;
    private System.Windows.Forms.Label label90;
    private System.Windows.Forms.TextBox textBox90;
    private System.Windows.Forms.CheckBox checkBox91;
    private System.Windows.Forms.Label label91;
    private System.Windows.Forms.TextBox textBox91;
    private System.Windows.Forms.CheckBox checkBox92;
    private System.Windows.Forms.Label label92;
    private System.Windows.Forms.TextBox textBox92;
    private System.Windows.Forms.CheckBox checkBox93;
    private System.Windows.Forms.Label label93;
    private System.Windows.Forms.TextBox textBox93;
    ... 
```

是否有一些底层位置 C# 保存有关表单上的控件的信息？谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:41:28.663

检查设计器文件并确保它们实际上已添加到表单中。也就是说，寻找一条`this.Controls.Add(label91)`线。

有时设计器文件以孤立控件结尾，您可能在过去删除了某些内容。乍一看，代码中应该有一个控件，但它只是一个未使用的（剩余）变量。

除此之外，请确保控件不在容器中（例如 a`Panel`或`GroupBox`）。他们将是一个孩子的孩子，不会直接出现在`Form.Controls`.

否则，作为表单一部分的所有控件都*将*位于 中`Form.Controls`，因为这*是*子控件的基础位置（也是唯一位置）。

# asp.net - ASP.NET，页面加载和回发时的会话维护

> ID：15176225
> 
> 赞同：1
> 
> 时间：2013-03-02T15:38:58.517
> 
> 标签：asp.net, session, pageload

我正在制作一个需要维护登录用户会话的网站。有不同的页面，因此必须维护每个页面的会话。我在主页上输入按钮的单击事件中传递会话变量中的值。该代码第一次运行良好，但是当用户从另一个页面重定向到主页时，会话变为空。我很困惑在哪里进行会话以保留所有页面的价值。？

这是我的代码：

```
 protected void Page_Load(object sender, EventArgs e)
{
    //Session["UserName"] = null;
    //Session["UserRoles"] = null;
    if (!Page.IsPostBack) //if page is not postback then here
    {
        Session["UserName"] = null;
        Session["UserRoles"] = null;
        if (Session["UserRoles"] != null && (String)Session["UserRoles"] == "Admin")
        {
            divLoggedInMember.Visible = true;
            lblLoggedinUser.Text = "Welcome" + " " + Session["UserName"] + "(Admin)";
        }
        else if (Session["UserRoles"] != null && (String)Session["UserRoles"] == "member")
        {
            divLoggedInMember.Visible = true;
            lblLoggedinUser.Text = "Welcome" + " " + Session["UserName"];
        }
    }

    else //if page postback then here
    {
        if (Session["UserRoles"] != null)
        {
            if ((String)Session["UserRoles"]=="Admin")
            {
                divLoggedInMember.Visible = true;
                lblLoggedinUser.Text = "Welcome" + " " + Session["UserName"] + "(Admin)";
            }
            else
            {
                divLoggedInMember.Visible = true;
                lblLoggedinUser.Text = "Welcome" + " " + Session["UserName"];
            }
        }
    }

}

 protected void btnenter_Click(object sender, ImageClickEventArgs e)
    {
        try
        {
            Session["UserName"] = null;
            Session["UserRoles"] = null;
            DataTable dt = new DataTable();
            dt=getUserInfo(txtUserId.Text.Trim(),txtPassword.Text.Trim());

            if (dt.Rows.Count == 0)
            {
                Response.Write("<script> alert('User Not Exist')</script>");
            }
            else
            {
                strUserName = dt.Rows[0]["User_Name"].ToString();
               // strUserName = txtUserId.Text.Trim(); 
                struserRoles = dt.Rows[0]["USER_ROLE"].ToString();
                Session["UserName"] = (String)strUserName;
                Session["UserRoles"] = (String)struserRoles;

                if (Session["UserRoles"] != null && (String)Session["UserRoles"]=="Admin")
                {
                    divLoggedInMember.Visible = true;
                    lblLoggedinUser.Text = "Welcome" + " " + Session["UserName"] + "(Admin)";
                }
                else if (Session["UserRoles"] != null && (String)Session["UserRoles"] == "Member")
                {
                    divLoggedInMember.Visible = true;
                    lblLoggedinUser.Text = "Welcome" + " " + Session["UserName"];
                }
                Response.Redirect("MemberPage.aspx", false);
            }
        }
        catch (Exception ex)
        {
            ex.Message.ToString();
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T15:49:53.170

您遇到的问题是，在`if`检查 PostBack 的第一部分中，您正在清除 Session 变量，然后检查它们是否为空。这里没有意义。他们将永远是空的，你的`if`永远`else if`不会发生。重新考虑您的策略以及您想要实现的目标。

现在，我对您正在尝试做的事情发表评论...首先，以这种方式使用 Session 是您在 Classic ASP 中所做的事情。使用 ASP.NET 有更好的机制来做到这一点。相反，您应该利用`MembershipProvider`并`RoleProvider`验证您的用户并跟踪他们。而不是从会话变量中读取用户名，您通常会使用它`Page.User.Identity.Name`来检索用户的 ID 或用户名。除此之外，您可以`Roles.IsUserInRole()`在类中使用或其他一些静态方法`Roles`。

第二件事，你重复你的变量名太多次了。也就是说，您正在使用硬编码的字符串，这些字符串在太多地方指向同一事物。您的维护将一团糟。当您仍处于开发阶段的早期时，请切换到`FormsAuthentication`让 ASP.NET 为您处理上述所有任务。

更新：ASP.NET 包含一组有关登录和安全的组件。其中之一是`LoginView`允许根据不同的角色指定不同的视图。通过使用此控件，您不必为正在进行的检查而烦恼。

您所做的检查在 Page_Load 中是可以的，但您确实需要对此进行优化。如果有必要进行持续检查，请不要打扰`if (IsPostBack) ... else ...`. 在外面做这个检查。例如：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Session["UserRoles"] != null && Session["UserRoles"] == "Admin")
    {
        // Show Admin section
        // Hide Non-admin section
    }
    else
    {
        // Hide Admin section
        // Show non-admin section
    }

    if (!IsPostBack)
    {
        // Do Postback logic here
    }
} 
```

同样，您想要实现的目标已经可以作为`LoginView`组件使用。查看 ASP.NET 上的这些[Web 窗体教程](http://www.asp.net/web-forms/tutorials/security)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T15:45:29.683

根据您的问题，我不太确定您是否了解会话行为在 ASP.NET 中的工作原理。您不必做任何事情来保持同一网站中页面之间的会话。此外，您提供的代码片段永远不会做任何事情：

```
 // You set theses two session vars to null, but then 
       // immediately check for contents??
       Session["UserName"] = null;
        Session["UserRoles"] = null;

        // Neither of these if statements will ever evaluate to true,
        // because you just set them to null above..
        if (Session["UserRoles"] != null && (String)Session["UserRoles"] == "Admin")
        {
            divLoggedInMember.Visible = true;
            lblLoggedinUser.Text = "Welcome" + " " + Session["UserName"] + "(Admin)";
        }
        else if (Session["UserRoles"] != null && (String)Session["UserRoles"] == "member")
        {
            divLoggedInMember.Visible = true;
            lblLoggedinUser.Text = "Welcome" + " " + Session["UserName"];
        } 
```

# forms - Codeigniter 从带有复选框的表单中更新 mysql 表数据

> ID：15176228
> 
> 赞同：0
> 
> 时间：2013-03-02T15:39:33.960
> 
> 标签：forms, codeigniter, checkbox, updates, multiple-records

codeigniter 的新手，并试图让我了解从用户表单更新检查的行。

我的视图生成一个带有 MySQL 数据的表单，如下所示：

```
<?php 
    echo form_open('masterdata/update_customers');
?>

<table>
    <tr>
        td>&nbsp;</td><td>Customer Name</td><td>postalcode</td>
    <tr>

<?php if(isset($records)) : foreach ($records as $row) : ?>
    <tr>
        <td>
            <input type=checkbox name="editcustomer[]" id="editcustomer[]" value="<?php echo $row->id ?>">
        </td>
        <td>
            <input type="text" name="customername_<?php echo $row->id ?>" id="customername_<?php echo $row->id ?>" value="<?php echo $row->customer_name ; ?>" >
        </td>
        <td>
            <input type="text" name="postalcode_<?php echo $row->id ?>" id="postalcode_<?php echo $row->id ?>" value="<?php echo $row->postalcode ; ?>" >
        </td>
    </tr>
<?php endforeach ; ?>
    </table>
<input type="submit" value="Update Selected">
<?php else : ?>
<h2> No Records Found</h2>
<?php endif; ?>
<?php echo form_close(); ?> 
```

当我获得所有输入字段的唯一名称和值时，这非常有效。

我现在的问题是尝试将选定的复选框和值传递给 codeigniter 并让它更新每一行。

传统上我会使用`foreach($_POST['editcustomer'] as $editcustomer){`但无法在codeigniter中解决这个问题。

我的控制器功能，`update_customers`现阶段非常基础：

```
function update_customers()
    {

        $this->form_validation->set_rules("customer_name","`Customer Name`","required|min_length[6]|xss_clean");
        $this->form_validation->set_rules("postalcode","`Postal Code`","required|xss_clean|min_length[6]");

        if ($this->form_validation->run() == FALSE){
            $data["message"]="";

            $data['title']="Master Data Home Page";
            $this->load->view("master_data/view_master_data_header",$data);
            $this->load->view("master_data/view_master_data_nav");
            $this->load->view("master_data/view_content_master_data_manage_customers");
            $this->load->view("master_data/view_master_data_footer");
        } else {

        $data = array(
            'customer_name' =>  $this->input->post('customer_name'),
            'postalcode' =>  $this->input->post('postalcode'),
            );

        $this->model_master_data->update_customer_records($data);

        $this->customers_updated();
        }
    } 
```

我的模型功能`update_customer_records`是：

```
function update_customer_records($data)
{

        $this->db->where('id',$this->input->post('id'));
    $this->db->update('customers',$data);

} 
```

我知道这里有很多缺失，比如只处理检查的行。但不知道如何添加它。其次，根据我的观点，我的唯一名称和 ID 正在生成： `name="customername_<?php echo $row->id ?>" id="customername_<?php echo $row->id ?>"`

如何让更新应用于唯一的表单输入名称？我需要将前缀 customername_ 和 postalcode_ 附加到 input->post(?) 值吗？

任何指导或帮助将不胜感激。提前一百万谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:03:14.097

使用 CodeIgniter，如果必须获取复选框值，则必须使用 $this->input->post('name_of_your_checkbox')。它返回一个数组。

例如，如果您在视图中有它：

```
<input type="checkbox" name="editcustomer[]" value="1" />
<input type="checkbox" name="editcustomer[]" value="2" />
<input type="checkbox" name="editcustomer[]" value="3" /> 
```

从控制器：

```
public function update_customers() {

    $editcustomer = $this->input->post('editcustomer');

} 
```

返回：

```
Array {
    [0] => 1
    [1] => 2
    [2] => 3
} 
```

# html - 难以将元素与 boostrap 对齐

> ID：15176233
> 
> 赞同：0
> 
> 时间：2013-03-02T15:40:06.253
> 
> 标签：html, css, twitter-bootstrap

我在处理一些 CSS/HTML 属性时遇到了一些困难。我正在使用引导程序进行良好的渲染。

所以我想要这个： ![在此处输入图像描述](../Images/2db7523c3e1f5d314c24bb736058600f.png)

img 是完美的，但问题在于日期（02.03.2013）。我在 img 上放了一个浮点数，所以 h3 可以正常工作，但日期不能正常工作。

请问你能帮帮我吗 ？这是我所拥有的：http: [//jsbin.com/uqadoc/1/edit](http://jsbin.com/uqadoc/1/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:42:24.773

`<h3>`在( 你的日期 )周围放置一个 div`<p>`具有固定宽度的 H3 和 Float:left; 和 p, float:right;

注意：我在 jf 中进行了非 div 访问，但概念相同

```
 <div class='main'>
    <img src='' class='ims'>
       <div class='content'>

           <h3 class="qwe" >serwqerqwrewqr</h3>

           <p class="wer">dafdf</p>
          <div class="rty" >

               sfdg
               ffffffffffffffffffffff
           fdsffffffffffff</br>

          sfdg
               ffffffffffffffffffffff
           fdsffffffffffff</br>          sfdg
               ffffffffffffffffffffff
           fdsffffffffffff</br>          sfdg
               ffffffffffffffffffffff
           fdsffffffffffff</br>
</div>
</div> 
</div>

.main{
    width:500px;
    height:200px;
    background:black;
}
.content{
    width:100ps;
    height:200px;
    background:red;
}
.ims{
    float:left;
    width:100px;
    height:200px;
    background:blue;
}
    .qwe{
        float:left;
    width:300px
        height:50px;
    }

    .wer{

    width:200px
        height:50px;
        float:right;      
    }
 .rty{
padding-top:80px;
    width:400px
        float:right;      
    } 
```

Jfiddle [http://jsfiddle.net/qAEzr/](http://jsfiddle.net/qAEzr/)

# php - 在插入时返回 MySQL 时间戳

> ID：15176234
> 
> 赞同：3
> 
> 时间：2013-03-02T15:40:20.467
> 
> 标签：php, mysql, sql, timestamp

当我在 PHP 中对 MySQL 数据库执行插入语句时，有没有办法返回自动生成的时间戳，或者我是否需要单独调用数据库来检索数据？

编辑：我忘记了 MySQL 不使用纪元日期。我决定只使用一个自动递增的整数和一个存储过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:41:26.690

您需要提出单独的请求以获取该信息。执行 INSERT 时，您只能获取自动递增表的最后一个插入 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T16:22:10.467

Use a multi-statement query.

1.  Select the current timestamp into a variable.
2.  insert the row with the timestamp.
3.  return (select) the variable to php.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T15:43:54.270

据我所知，如果设置为ed ，则*最后插入的 ID是可能的。*但是对于时间戳，我建议您创建一个，这样您在数据库上只会有一个请求。请记住，连接到数据库的成本很高。`ID``AUTO_INCREMENT``stored procedure`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T15:45:32.860

您可以返回 a `last inserted id`after `insert`，例如：

```
<?php
$sql=mysql_query("INSERT INTO <TABLE> VALUES (?,?)");
return mysql_insert_id();
?> 
```

# z3 - 量化数据类型

> ID：15176236
> 
> 赞同：1
> 
> 时间：2013-03-02T15:40:22.690
> 
> 标签：z3

在使用 Z3Py 时，我定义了一个整数列表，如下所示：

```
List = Datatype('List')
List.declare('cons', ('head', IntSort()), ('tail', List))
List.declare('nil')
List = List.create() 
```

现在，我在该列表上定义了一些简单的函数，如下所示：

```
len = Function('len', List, IntSort())

def len_defn():
  ls = List('ls')
  return And([
    len(List.nil) == 0,
    ForAll(ls, Implies(List.is_cons(ls), len(ls) == 1+len(List.tail(ls))))
  ]) 
```

不幸的是，这最终失败了，因为`ls = List('ls')`抛出了错误：

```
AttributeError: DatatypeSortRef instance has no __call__ method 
```

尝试使用`ls = Var(0, List)`throw：

```
AttributeError: DatatypeRef instance has no attribute '__len__' 
```

有谁知道通常应该如何处理数据类型的量化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:08:08.347

要创建排序常量`List`，我们应该使用过程`Const`。

```
ls = Const('ls', List) 
```

在 Z3Py 中，过程`ForAll`和`Exists`基于将 Z3 常量作为参数的 C API。大多数用户发现这些 C API 比基于 de Bruijn 索引的 API 更易于使用。

另一个问题，我们不应该重新定义`len`. `len`是一个 Python 内置函数。为避免您的程序出现问题，我们应该使用

```
Len = Function('len', List, IntSort()) 
```

这是重写的示例（[也可在此处在线获得](http://rise4fun.com/Z3Py/5RPs)）

```
List = Datatype('List')
List.declare('cons', ('head', IntSort()), ('tail', List))
List.declare('nil')
List = List.create()
Len = Function('len', List, IntSort())

def len_defn():
  ls = Const('ls', List)
  return And([
    Len(List.nil) == 0,
    ForAll(ls, Implies(List.is_cons(ls), Len(ls) == 1+Len(List.tail(ls))))
  ])

print len_defn() 
```

# c# - 使用常规 HTML 触发服务器端事件？

> ID：15176242
> 
> 赞同：0
> 
> 时间：2013-03-02T15:41:08.903
> 
> 标签：c#, asp.net, html, events, webforms

我有以下 ASP.NET Webform 代码位于带有几个输入的用户控件中：

```
<asp:ImageButton ID="imgBLogin" CssClass="floatRightclear" runat="server" ImageUrl=""
                OnClick="imgBLogin_Click" ValidationGroup="Login" /> 
```

这将触发服务器上的 imgBLogin_Click 提交。

现在我需要生成一个特制的提交按钮（飞门），问题是这是如何在纯 HTML 中完成的？可能吗？

在这种情况下，我得到了一个帮助类，它将为链接按钮生成正确的 HTML：

```
<%= Helpers.ButtonLink("Skapa konto", ResolveUrl("~/sites/" + this.Page.Theme + "/common/createProfile.aspx") , "btn1", style: "float:right;" ) %> 
```

我需要对提交按钮（图像按钮）做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:46:34.607

我不确定我是否 100% 理解您的问题，但我相信您想在完成一些 HTML/JS 工作后触发服务器端事件？

无论如何，从客户端触发服务器端事件的唯一方法是使用 JavaScript。

您可以添加一个 ASP 按钮并将 css 可见性设置为 hidden( `style="display:none;"`) ，而不是 asp.net Visible 属性。

然后向要触发事件的 HTML 元素添加 onclick 属性（例如`<a href="#" onclick"fnFireEvent()>Click Here</a>`：）

那么你的javascript部分将是：

```
<script> 
function fnFireEvent()
{
  $("#<%=btnFireEvent.ClientID %>").click(); //your asp.net button that you set visibility to hidden earlier.
}
</script> 
```

然后在服务器端事件中，您可以做您想做的事情。

希望这可以帮助。

# php - KO 3.2 - 库与助手

> ID：15176244
> 
> 赞同：0
> 
> 时间：2013-03-02T15:41:27.690
> 
> 标签：php, kohana

`APPATH/classes/libraries`好吧，这将是一个非常简短的问题 -和文件夹有什么区别`APPATH/classes/helpers`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:54:42.817

没有。这些是你会做的。一切都只是一个“类”。

# c++ - 类在此上下文中不可用，因为它是 Friend

> ID：15176249
> 
> 赞同：0
> 
> 时间：2013-03-02T15:41:40.587
> 
> 标签：c++, vb.net, managed-c++

我正在尝试在 VB.NET 中创建一个遗留 c++ 类的实例。我已按照以下网页上的说明进行操作：http: [//windowsdevcenter.com/pub/a/dotnet/2004/03/29/mcpp_part3.html? page=2](http://windowsdevcenter.com/pub/a/dotnet/2004/03/29/mcpp_part3.html?page=2)

1) 使用一个文件 (MFoo.cpp) 和以下代码创建了一个 Visual C++ 项目：

```
class Foo 
{ public: 
// constructor 
Foo(void) {} 
// destructor 
~Foo(void) {} 
// some method 
void DoSomeFoo(){} }; 

__gc class MFoo 
{ public: Foo * _foo; 
public: 
    // constructor 
    MFoo() { _foo = new Foo();} 
    // destructor 
    ~MFoo() { delete _foo; } 
    // method 
    void ManagedDoSomeFoo() { _foo->DoSomeFoo(); } }; 
```

2) 在 Visual C++ 中构建项目，生成 DLL 3) 在 VB.NET 应用程序中创建对 DLL（在第 2 部分中创建）的引用

现在，当我尝试创建 C++ 对象的实例时出现错误，即 Dim foo As New MFoo。错误是：MFoo 在此上下文中不可用，因为它是 Friend。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T15:59:05.640

您需要将 MFoo 类声明为公共，将行替换`__gc class MFoo`为`public __gc class MFoo`

# c++ - ShowCaret 和 SetCaretPos 因 ERROR_ACCESS_DENIED 而失败

> ID：15176252
> 
> 赞同：0
> 
> 时间：2013-03-02T15:42:07.173
> 
> 标签：c++, winapi

什么可能导致`ShowCaret`和`SetCaretPos`失败`ERROR_ACCESS_DENIED`？

我正在创建插入符号`WM_CREATE`并将插入符号显示在`WM_COMMAND`. 我检查并`CreateCaret`成功执行。

它们应该在同一个线程中运行。

我在调用之前使用`SetScrollInfo`and来更新窗口的内容。但我不认为这些会导致失败..`InvalidateRect``ShowCaret``ShowCaret`

**相关代码：**

```
#define CHAR_WIDTH  7
#define CHAR_HEIGHT 12

case WM_CREATE:
    CreateCaret(hWnd, NULL, CHAR_WIDTH, 2);
    UpdateScrollbar(hWnd); // calls SetScrollInfo. initially nMin and nMax are both 0
    return 0;

case WM_COMMAND:
    switch(LOWORD(wParam))
    {
    case IDM_OPENFILE:
        if (DoOpenFile(hWnd))
        {
            InvalidateRect(hWnd, NULL, TRUE);
            UpdateScrollbar(hWnd);

            if (SetCaretPos(CHAR_WIDTH * 12, CHAR_HEIGHT - 1) == 0)
            {
                char ss[33];
                sprintf_s(ss, "DEBUG 2: %d\n", GetLastError());
                OutputDebugString(ss);
            }

            if (ShowCaret(hWnd) == 0)
            {
                char ss[33];
                sprintf_s(ss, "DEBUG 3: %d\n", GetLastError());
                OutputDebugString(ss);
            }
        }
        break;
    }
    return 0; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T16:26:45.523

是的，您没有正确执行此操作。每个消息队列（换句话说，每个线程）只有一个插入符号。当另一个窗口已经有一个插入符号时，您不能创建插入符号，最有可能的情况是编辑框。在您的窗口收到焦点 WM_SETFOCUS 消息之前，您不得创建或显示插入符号*。*当窗口失去焦点时，你*必须*销毁它，WM_KILLFOCUS 消息。

您使用 GetLastError() 的方式也很危险，尽管您现在可能会侥幸逃脱。在 C 或 C++ 中计算参数的顺序是不确定的。您冒着改变错误代码的参数表达式之一的风险。在调用其他任何内容之前始终获取错误代码，将其存储在局部变量中。

并且*永远不要*跳过错误检查，至少您必须 assert() 返回值。CreateCaret() 调用现在可能会失败，因为刚刚创建的窗口将永远不会获得焦点。

# core-data - Core Data Managed Object 一对多关系插入/更新保存

> ID：15176257
> 
> 赞同：0
> 
> 时间：2013-03-02T15:42:51.980
> 
> 标签：core-data, insert, save, one-to-many, relationship

假设我有 person->phones 关系（当然是一对多）。初始插入保存在我做的地方正常工作：

```
 if (does not exist) {
      user = (Member *)[NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:ctx];
} else {
    searchObjectsForEntity:@"Person" withPredicate:pred andSortKey:nil andSortAscending:NO andContext:ctx]; 
```

是否应该只用一个 insertNewObjectForEntityForName 来替换它，它可以插入或存在？

接下来，我需要创建我的手机对象并将它们添加到我的 Person 中，我这样做是这样的：

```
NSManagedObject* mo=nil;
Phone* phone = (Phone *)[NSEntityDescription insertNewObjectForEntityForName:@"Phone"
                                                      inManagedObjectContext:ctx];
[mutableSetOfPhones addObject:mo];
user.phones = phones; 
```

因此，我创建了一个电话管理对象的新实例，将其添加到集合中并将其添加到人员，然后保存。这一切都很好，除非我使用相同的代码重新保存 Person 实例，即编辑/插入/删除电话或对用户数据进行任何其他修改。旧的电话记录保留在数据库中，不再与任何人相关联。

这样做的正确方法是什么？我是否需要遍历 user.phones 才能通过某个 id 查看编辑/删除？我是否应该在保存更新的记录之前删除旧实例（更简单）？推荐的方法是什么，也许我做的事情完全不正确？

# django - Django - 操作查询字符串（搜索过滤器）

> ID：15176262
> 
> 赞同：1
> 
> 时间：2013-03-02T15:43:04.213
> 
> 标签：django, query-string, django-urls

我正在寻找操作查询字符串，以便我可以创建搜索过滤器——我想知道什么是最好的方法。我希望能够添加/更新/删除部分。例如：

**颜色**

*   蓝色 (www.google.com/ `?color=blue`)
*   红色 (www.google.com/ `?color=red`)
*   绿色 (www.google.com/ `?color=green`)
*   无 (www.google.com/ `?`)

我发现了一些这样做的片段，但我正在查看文档，我看到了[QueryDict 对象](https://docs.djangoproject.com/en/dev/ref/request-response/#querydict-objects "QueryDict 对象")。我不确定这将如何在模板中发挥作用。什么是最好和*最安全*的方法？

# android - GridView 未更新

> ID：15176263
> 
> 赞同：1
> 
> 时间：2013-03-02T15:43:04.177
> 
> 标签：android, android-layout, android-widget

我正在尝试编写一个简单的 Boggle 应用程序。有一个“洗牌板”按钮，它应该洗牌所有的立方体并显示新的板。

问题是：即使我更新了`LetterAdapter`(inside `LetterAdapter#shuffle`，我调用) 并使用了, 的任何组合，我`notifyDataSetChanged`也`refreshDrawableState()`无法让视图被更新。我能找到的唯一工作方法是将适配器重新分配给.`invalidate()``invalidateViews()``onClick``GridView`

为什么不`refreshDrawableState()`, `invalidate()`,`invalidateViews()`或`notifyDataSetChanged`工作？为什么它们在视觉上没有任何效果？

```
public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final GridView letterGrid = (GridView) findViewById(R.id.letter_grid);
        final LetterAdapter letterAdapter = new LetterAdapter(this);
        letterGrid.setAdapter(letterAdapter);

        Button shuffleButton = (Button) findViewById(R.id.shuffle_button);
        shuffleButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                letterAdapter.shuffle();
                // --------------- RELEVANT PART
                // letterGrid.refreshDrawableState();
                // letterGrid.invalidate();
                // letterGrid.invalidateViews();
                letterGrid.setAdapter(letterAdapter);
                // --------------- END
            }
        });
    }

    public class LetterAdapter extends BaseAdapter {
        private Context mContext;
        private BoggleBoard mBoggleBoard;

        public LetterAdapter(Context context) {
            mContext = context;
            mBoggleBoard = new BoggleBoard();
        }

        public void shuffle() {
            mBoggleBoard.shuffle();
            notifyDataSetChanged();
        }

        @Override
        public int getCount() {
            return BoggleBoard.NUM_OF_CUBES;
        }

        @Override
        public Object getItem(int position) {
            return mBoggleBoard.getLetter(position);
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            final Button letterButton;
            final String curLetter = mBoggleBoard.getLetter(position);
            if (convertView == null) {
                letterButton = new Button(mContext);
                letterButton.setText(curLetter);
            } else {
                letterButton = (Button) convertView;
            }
            return letterButton;
        }
    }
} 
```

注意：我已经阅读了大约十几个相关的问题/答案，但找不到任何令人满意的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:58:32.907

问题出在你的`getView`方法上。您应该`letterButton.setText(curLetter);`在条件之外调用。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    final Button letterButton;
    final String curLetter = mBoggleBoard.getLetter(position);
    if (convertView == null) {
        letterButton = new Button(mContext);            
    } else {
        letterButton = (Button) convertView;            
    }

    letterButton.setText(curLetter);        
    return letterButton;
} 
```

# scala - Scala 中的模糊导入

> ID：15176264
> 
> 赞同：8
> 
> 时间：2013-03-02T15:43:06.220
> 
> 标签：scala, import

我正在用 Scala 编写一个小型模拟程序。它是基于参与者的，所以我创建了一个文件`messages.scala`，其中包含系统中有效的所有消息。

除此之外，我还有一个管理组件，`management.scala`以及一个定义节点和链接类的文件`nodes.scala`。管理和节点文件`import sim.messages._`，然后管理都`import sim.nodes._`需要能够从该文件实例化事物。

问题来自一种消息类型`Tick`，它同时被`management.scala`和使用`nodes.scala`。编译管理组件后，我得到：

```
error: reference to Tick is ambiguous;
it is imported twice in the same scope by
import sim.nodes._
and import sim.messages._ 
```

我尝试在管理组件中删除消息的导入，因为它们显然已经被导入到这个范围中，但是他们再也找不到它们了。想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-02T16:35:49.623

尝试

```
import sim.nodes._
import sim.nodes.{ Tick => NodesTick } 
```

和/或

```
import sim.messages._
import sim.messages.{ Tick => MessagesTick } 
```

当然，您必须将引用重命名为`Tick`正确的引用。

# ruby-on-rails - 不可阻挡的服务器 - rails

> ID：15176272
> 
> 赞同：0
> 
> 时间：2013-03-02T15:44:17.897
> 
> 标签：ruby-on-rails, sql-server

我正在使用 ubuntu 机器和 ruby​​mine ide。问题是我无法停止使调试变得不可能的服务器。我正在开发的应用程序仅使用 ssl 安全性运行，因此侦听 443 端口。我尝试了一切

当我运行时`pgrep -l rails`，没有找到这样的过程。所以我只能杀死 ruby​​ 进程，但服务器不会停止。

然后我尝试`./script/server stop`了但它没有停止服务器

我试过`kill -INT $(cat tmp/pids/server.pid)`了，但里面没有 server.pid 文件`app_root/tmp/pids`

我试过了`lsof -wni tcp:3000`，并且`lsof -wni tcp:443`：但没有输出

我试过`killall -9 rails`了，但没有找到rails进程

我试过`CTRL-C`但服务器仍在运行

我试过`fuser -n tcp 3000`了，服务器还在运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:46:24.277

如果有的话，你必须杀死 allruby 进程。这里没有 rails 进程，因为 rails 只是一个用 ruby​​ 编写的框架，所以 ruby​​ 做了所有的解释

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T17:15:49.223

您可以使用以下命令找到正在运行 rails 服务器的进程。然后使用 kill 停止服务器

```
ps -ef | grep rails 
```

# php - 很多选择请求

> ID：15176274
> 
> 赞同：0
> 
> 时间：2013-03-02T15:44:36.547
> 
> 标签：php, mysql

我正在运行一个应用程序，该应用程序在交通繁忙时需要大量选择计数，我想限制这一点，我确定有一种技术可以在临时变量上记录选择查询结果，无需访问数据库即可获取它，并更新它每 x 秒设置一次值，这肯定会减少整体加载时间。

这是函数调用： return $this->getOnlineNow($user_code); 每次访问者查看我的应用程序小部件时都会调用该行，您可以想象数据库在大流量下的巨大压力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:48:51.387

您可以尝试缓存从 select 语句中获得的数据。

但是，如果您尝试像您所说的那样频繁更新该数据，这将无济于事：

> 临时变量上的选择查询结果在不访问数据库的情况下获取它，并每 x 秒更新一次该值

您需要首先确保，您在此时间间隔内调用数据库的次数少于当前访问的次数。要在 x 秒间隔后更新临时表意味着您需要每 x 秒连接一次数据库，这增加了目前访问数据库的开销。这可能会使事情变得更糟，就像现在一样。

[你可以在这里](http://php.net/manual/en/mysqlnd-qc.quickstart.caching.php)找到一些关于缓存的基础知识/快速入门，谷歌可能会帮助你。

# ruby - 特殊字符的正则表达式

> ID：15176280
> 
> 赞同：0
> 
> 时间：2013-03-02T15:45:11.607
> 
> 标签：ruby, regex

我网站上的用户可以输入简历信息，例如`textarea`. 我遇到的问题是我从用户粘贴简历信息中获取*无序*列表字符和字符，例如 。我想删除此类实例。

我不确定如何匹配无序列表字符和 。

请指教。

更新

到目前为止我所拥有的：

```
 before_save :strip_skills_experience

 def strip_skills_experience
  self.skills = skills.gsub(/[\u2022]/, '')
#self.experience = experience.gsub(/[\u2022]/, '')
end 
```

使用以下内容：

```
 self.skills = skills.gsub(/[^\w\s\.&!,;:\(\)\$\-%\*\+"'\\\[\]\{\}\?<>`~\|=\^]/, '') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:43:46.610

您可以使用白名单来允许用户输入中的某些字符：

假设您要删除每个非字母数字字符，匹配它们的正则表达式将是：`[^A-Za-z0-9]`。现在您可以简单地将匹配的字符替换为`""`.

# objective-c - 关闭窗口时终止应用程序

> ID：15176284
> 
> 赞同：4
> 
> 时间：2013-03-02T15:45:22.257
> 
> 标签：objective-c, macos, cocoa

我对使用 xCode 的 Objective-c 有点陌生，我想知道一些事情。单击窗口左侧的红色圆圈时，有没有办法终止应用程序？就像在计算器上一样。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-02T15:48:29.103

**是的，您可以使用 Mac OSX 应用程序**。

您需要在 AppDelegate 类中实现此方法

```
 - (BOOL)applicationShouldTerminateAfterLastWindowClosed:(NSApplication *)sender{
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:25:42.473

如果您想在关闭窗口时终止应用程序。请实现以下 appdelegate 方法。

```
- (BOOL)applicationShouldTerminateAfterLastWindowClosed:(NSApplication *)sender
    {
        return YES;
    } 
```

如果你不想终止你的应用程序，只需设置返回“NO”。

我希望您的问题将通过此解决方案得到解决。

# c# - WCF 接收上下文

> ID：15176288
> 
> 赞同：1
> 
> 时间：2013-03-02T15:45:35.723
> 
> 标签：c#, wcf

我正在从事一项任务，我试图确保按照写入的顺序将数据传送到数据库。数据库将位于另一台机器上，当发送计算机继续排队数据库消息时，数据库机器可能会发生故障。

我正在尝试将 WCF 用于此任务，并且从我最初的阅读来看，我认为这可能会使用带有消息队列和启用 ReceiveContext 的通道的 WCF。该文档指出 ReceiveContext '使应用程序能够决定是访问消息还是将其留在队列中以进行进一步处理。

我遇到的问题是，如果我调用 Abandon 方法指示消息没有被成功处理并且应该留在队列中，WCF 似乎将消息放在队列的后面而不是留在队列中队列的前面。因为我需要按照它们最初发送的顺序将消息写入数据库，所以这个解决方案不起作用。

有什么方法可以强制 WCF 在删除消息之前“偷看”消息，或者将放弃消息放在队列的前面？如果没有的话，任何人都可以提出一种方法来完成我正在尝试做的事情，而不必从头开始编写大量代码。

谢谢，艾尔

# ravendb - 在 ravenDB 的子类中添加标识键

> ID：15176289
> 
> 赞同：1
> 
> 时间：2013-03-02T15:45:37.730
> 
> 标签：ravendb

我有这两个类：

```
public class BlogPost
{
    public string Id { get; set; }
    public string Title { get; set; }
    public string Category { get; set; }
    public string Content { get; set; }
    public DateTime PublishedAt { get; set; }
    public string[] Tags { get; set; }
    public BlogComment[] Comments { get; set; }
}

public class BlogComment
{
    public string Id { get; set; }
    public string Title { get; set; }
    public string Content { get; set; }
} 
```

并添加到这样的文档中：

```
// Creating a new instance of the BlogPost class
BlogPost post = new BlogPost()
                    {
                        Title = "Hello RavenDB",
                        Category = "RavenDB",
                        Content = "This is a blog about RavenDB",
                        Comments = new BlogComment[]
                                    {
                                        new BlogComment() {Title = "Unrealistic", Content = "This example is unrealistic"},
                                        new BlogComment() {Title = "Nice", Content = "This example is nice"}
                                    }
                    }; 
```

有没有办法让我的评论像我的**BlogPost**类一样具有身份密钥？

还有一个问题：有没有一种方法可以在不使用 post 的情况下获取评论对象。像这样的东西：

```
using( var session = doc.OpenSession() )
{
    return session.Load<BlogComment>( ID );
} 
```

或者

```
using( var session = doc.OpenSession() )
{
     return ( from comment in session.Query<BlogComment>()
     where comment.Title == title
     select comment ).FirstOrDefault();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T04:07:40.720

您可以只在 BlogPost 上拥有一个整数属性，在添加新评论时递增并设置该值。这将为您提供帖子范围内的身份样式ID。

# c - x86-64 上的 long double 是什么？

> ID：15176290
> 
> 赞同：13
> 
> 时间：2013-03-02T15:45:42.397
> 
> 标签：c, linux, floating-point, x86-64, ieee-754

有人告诉我：

> 在 x86-64 下，FP 算术是用 SSE 完成的，因此 long double 是 64 位。

但是在 x86-64 ABI 中它说：

| C型 | 大小 | 结盟 | AMD64 架构 |
| --- | --- | --- | --- |
| 长双 | 16 | 16 | 80 位扩展 (IEEE-754) |

参见：[amd64-abi.pdf](http://www.cs.tufts.edu/comp/40/readings/amd64-abi.pdf)

gcc 说`sizeof(long double)`是 16 并给出`FLT_DBL`=`1.79769e+308`和`FLT_LDBL = 1.18973e+4932`

所以我很困惑，`long double`64位如何？我认为这是一个 80 位的表示。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-02T16:00:11.007

> 在 x86-64 下，FP 算术是用 SSE 完成的，因此 long double 是 64 位。

这*通常*在 x86-64 下发生（保证存在 SSE 指令），但程序仍然可以自由使用 x87，当您使用`long double`.

您可以通过`g++`在 Linux 上编译这样的程序来确认这一点：

```
#include <iostream>
#include <cstdlib>
#include <ctime>

int main()
{
    std::srand(std::time(NULL));
    float f1=rand(), f2=rand();
    double d1=rand(), d2=rand();
    long double l1=rand(), l2=rand();

    std::cout<<f1*f2<<" "<<d1*d2<<" "<<l1*l2<<std::endl;
    return 0;
} 
```

在汇编输出中，我找到`mulsd xmm1, xmm0`了`double`产品和`mulss xmm0, xmm2`产品`float`（都是 SSE 指令），但`fmulp st(1), st`（x87 指令）是`long double`产品。

因此，可以确认，编译器尽可能使用 SSE，但仍允许通过旧的 x87 指令集进行 80 位精度计算。

* * *

请注意，这是特定于编译器的 - 一些编译器（例如 VC++）总是忽略 80 位精度类型，只是将`long double`其视为`double`.

另一方面，由于 x86-64 System V ABI（在 Linux 上采用）要求`long double`80 位，编译器使用该类型的所有可用精度执行计算的唯一方法是使用 x87 指令。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T11:27:31.820

AMD ABI 实际上无法强制要求 C`long double`类型是什么，因为它没有这样做的权限/权限。每个 C 实现都可以根据 C 标准制定自己的类型规范（如果 C 实现符合标准），并且每个 C 实现都可以选择是否符合 AMD ABI。

这意味着您不能简单地问“ `long double`x86-64 上有什么？” 您必须询问`long double`特定 C 实现中的内容。这意味着指定用于编译的特定 C 编译器、版本和开关。（编译器可能有一个开关，其中一个设置`long double`生成 64 位二进制 IEEE 754 浮点对象，另一个设置`long double`生成 80 位 Intel 浮点对象。从技术上讲，编译器、版本和开关的每种不同组合是一个独特的 C 实现。）

实现`long double`为 64 位二进制 IEEE-754 浮点对象的编译器只是将它们作为 AMD ABI 调用的内容传递`double`；它永远不会像 ABI 所说的那样通过它们`long double`。这样做时，编译器的这一方面将仅与其他`long double`类似处理的软件兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T15:49:23.223

SSE 计算是双精度的，中间表示是 64 位。

`long double`正如您所指出的，那不是。64 位值只是在计算后写入长双精度数。

# php - 如何在 Grails 项目中使用 PHP 生成的 Salt

> ID：15176293
> 
> 赞同：1
> 
> 时间：2013-03-02T15:45:48.277
> 
> 标签：php, grails, spring-security, salt

我有一个要转换为 Grails 的 PHP 应用程序。PHP 应用程序使用盐机制来编码其所有用户的密码。

将 salt 和 salted 密码移动到 Grails 中的（自定义）用户数据库时，我无法在 Grails 应用程序中登录。

当然，我使用的是[Spring Security Core 插件，并且我已经按照](http://grails.org/plugin/spring-security-core)[本教程](http://blog.swwomm.com/2010/06/grails-passwords-salted.html)中的说明将 salt 添加到 User 域类中，我在这里找到了：[Grails with Spring Security Plugin and Salted Passwords](https://stackoverflow.com/questions/7739296/grails-with-spring-security-plugin-and-salted-passwords)

完成教程后，我可以添加一个用户并使用该用户成功登录：

```
[BootStrap.groovy]:
new User( username:"user", email:"user@place.com", password:"password", enabled:true).save(flush: true) 
```

（您可能还注意到添加了电子邮件，这是我使用[本教程](http://omarello.com/2010/09/grails-customize-authentication/)添加的）

但是我无法使用从 PHP 项目转移过来的任何用户登录。如果有任何帮助，以下是他们的密码编码方式：

```
$password = "password";
$salt = bin2hex( openssl_random_pseudo_bytes( 32 ) );
$passwordSalted = hash( "sha256", $salt . $password ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:16:35.463

看起来伯特在这里提出了他的建议：http: [//grails.1312388.n4.nabble.com/Spring-Security-Core-plugin-and-multiple-salt-sources-tc3638236.html#a3646256](http://grails.1312388.n4.nabble.com/Spring-Security-Core-plugin-and-multiple-salt-sources-tc3638236.html#a3646256)

基本上，我已经从上面提到的教程中获得了自己的 salt，我只需使用自定义密码编码器将它与密码结合起来。

```
public class CustomPasswordEncoder extends MessageDigestPasswordEncoder {

    public CustomPasswordEncoder() {
        super("SHA-256");
    }

    @Override
    protected String mergePasswordAndSalt(String password, Object salt, boolean strict) {
        if (password == null) {
            password = "";
        }

        if (salt == null || "".equals(salt)) {
            return password;
        }

        return salt + password;
    }
} 
```

# asp.net-mvc - 如何强制文本内容在浏览器中以多行显示

> ID：15176299
> 
> 赞同：0
> 
> 时间：2013-03-02T15:46:36.733
> 
> 标签：asp.net-mvc, asp.net-mvc-2

下面控制器的输出在 IE9 中呈现不带换行符 如何强制浏览器在创建时在单独的行中呈现文本？

.NET 3.5 中使用 ASP.NET / Mono MVC2

```
 public ActionResult Index()
    {
        var sb = new StringBuilder();
        sb.AppendLine("Line1");
        sb.AppendLine("Line2");
        return new ContentResult() { Content = sb.ToString() };
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:53:19.983

这取决于你想做什么。浏览器忽略简单的换行，因为`C#`它是`\r\n`. 使用`<br />`（新行的html标签）或尝试`<pre>`标签：

```
<pre>
   Line 1
   Line 2
</pre> 
```

演示：http: [//jsfiddle.net/CQeTX/](http://jsfiddle.net/CQeTX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T15:50:40.287

使用 时`AppendLine`，`StringBuilder`追加换行符。如果要在浏览器中显示换行符，则必须添加`<br/>`：

```
sb.AppendLine("Line1<br/>");
sb.AppendLine("Line2<br/>"); 
```

或者

```
sb.Append("Line1<br/>");
sb.Append("Line2<br/>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T15:50:59.477

如果它是页面上 html 的一部分

```
 sb.AppendLine("Line1<br />"); 
```

或者如果它在代码中

```
 sb.AppendLine("Line1\n"); 
```

# design-patterns - 什么是非锁定设计模式？

> ID：15176307
> 
> 赞同：1
> 
> 时间：2013-03-02T15:48:02.837
> 
> 标签：design-patterns, locking

今天我第一次遇到一个技术术语。

> 非锁定设计模式

有更多学识的人可以提供更多详细信息吗？链接到任何现有的文章/知识库也会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:49:33.293

他们可能在谈论非阻塞算法。[维基百科](http://en.wikipedia.org/wiki/Non-blocking_algorithm)是一个很好的起点。

# android - getDayOfMonth 抛出 NullPointerException

> ID：15176309
> 
> 赞同：0
> 
> 时间：2013-03-02T15:48:14.253
> 
> 标签：android, nullpointerexception

我试图在对话框中获取选定的日期，但不幸的是我得到了 NullPointerException。

```
 AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
            LayoutInflater inflater = getLayoutInflater();
            builder.setView(inflater.inflate(R.layout.dialog_add, null));
            builder.setTitle("Add new event");
            builder.setPositiveButton("Add", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    DatePicker datepicker = (DatePicker) findViewById(R.id.ad_date_picker);
                    ContentValues values = new ContentValues();
                    values.put(DbHelper.COLUMN_NAME_DAY, datepicker.getDayOfMonth());
                    values.put(DbHelper.COLUMN_NAME_MONTH, datepicker.getMonth());
                    values.put(DbHelper.COLUMN_NAME_YEAR, datepicker.getYear());

                    DbHelper dbHelper = new DbHelper(getApplicationContext());
                    SQLiteDatabase db = dbHelper.getWritableDatabase();
                    db.insert(DbHelper.TABLE_NAME, null, values);
                }
            });
            builder.show(); 
```

堆栈跟踪：

```
03-02 17:34:31.890: E/AndroidRuntime(1619): FATAL EXCEPTION: main
03-02 17:34:31.890: E/AndroidRuntime(1619): java.lang.NullPointerException
03-02 17:34:31.890: E/AndroidRuntime(1619):     at com.dennis.countdown.MainActivity$1$1.onClick(MainActivity.java:38)
03-02 17:34:31.890: E/AndroidRuntime(1619):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
03-02 17:34:31.890: E/AndroidRuntime(1619):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-02 17:34:31.890: E/AndroidRuntime(1619):     at android.os.Looper.loop(Looper.java:137)
03-02 17:34:31.890: E/AndroidRuntime(1619):     at android.app.ActivityThread.main(ActivityThread.java:5193)
03-02 17:34:31.890: E/AndroidRuntime(1619):     at java.lang.reflect.Method.invokeNative(Native Method)
03-02 17:34:31.890: E/AndroidRuntime(1619):     at java.lang.reflect.Method.invoke(Method.java:511)
03-02 17:34:31.890: E/AndroidRuntime(1619):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
03-02 17:34:31.890: E/AndroidRuntime(1619):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
03-02 17:34:31.890: E/AndroidRuntime(1619):     at dalvik.system.NativeStart.main(Native Method) 
```

DatePicker 在 XML 文件中，因为我需要一个带有标题字段和日期选择器的自定义对话框。我没有找到任何其他方法来做到这一点。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="wrap_content"
android:layout_height="wrap_content">
<ImageView
    android:src="@drawable/ic_launcher"
    android:layout_width="match_parent"
    android:layout_height="64dp"
    android:scaleType="center"
    android:background="#FFFFBB33"
    android:contentDescription="@string/app_name" />
<EditText
    android:id="@+id/title"
    android:inputType="textEmailAddress"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="16dp"
    android:layout_marginLeft="4dp"
    android:layout_marginRight="4dp"
    android:layout_marginBottom="4dp"
    android:hint="Title" />
<DatePicker 
    android:id="@+id/ad_date_picker"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:layout_margin="5dp"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:40:24.397

`Your DatePicker is null`，当您尝试访问 datepicker.getDayOfMonth() 时，它会抛出`NPE` 您需要在 onCreate 中初始化 DatePicker

```
 DatePicker datepicker = (DatePicker) findViewById(R.id.ad_date_picker); 
```

如果您的日期选择器在膨胀视图中，而不是从膨胀视图中获取

```
 DatePicker datepicker = (DatePicker) inflattedview.findViewById(R.id.ad_date_picker); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:30:12.997

我的问题在[Pragnani](https://stackoverflow.com/a/15176848/1866009)的帮助下得到了解决。

代替：

```
LayoutInflater inflater = getLayoutInflater();
builder.setView(inflater.inflate(R.layout.dialog_add, null));
DatePicker datepicker = (DatePicker) findViewById(R.id.ad_date_picker); 
```

我用了：

```
View view = LayoutInflater.from(MainActivity.this).inflate(R.layout.dialog_add, null);
builder.setView(view);
DatePicker datepicker = (DatePicker) view.findViewById(R.id.ad_date_picker); 
```

# c++ - 如何 cin 文本

> ID：15176316
> 
> 赞同：0
> 
> 时间：2013-03-02T15:48:51.663
> 
> 标签：c++, text, cin

如何让用户在此程序中输入文本而不是数字。我怎样才能让 cin 声明接受文本？我必须使用char吗？

```
int main()
{
    using namespace std;
    int x = 5;
    int y = 8;
    int z;
    cout << "X=" << x << endl;
    cout << "Y=" << y << endl;
    cout << "Do you want to add these numbers?" << endl;
    int a;
    cin >> a;
    if (a == 1) {
        z = add(x, y);
    }
    if (a == 0) {
        cout << "Okay" << endl;
        return  0;
    }
    cout << x << "+" << y << "=" << z << endl;
    return 0;
} 
```

---编辑---为什么这不起作用？

```
int main()
{
    using namespace std;
    int x = 5;
    int y = 8;
    int z;
    cout << "X = " << x << " Y = " << y << endl;
    string text;
    cout << "Do you want to add these numbers together?" << endl;
    cin >> text;
    switch (text) {
        case yes:
            z = add(x, y);
            break;
        case no: cout << "Okay" << endl;
        default:cout << "Please enter yes or no in lower case letters" << endl;
            break;
}
    return 0;
} 
```

谢谢大家！如果你有兴趣，你可以看看我在这里制作的游戏。 [http://pastebin.com/pmCEJU8E](http://pastebin.com/pmCEJU8E) 您正在帮助一位年轻的程序员实现他的梦想。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:57:14.187

您可以`std::string`用于此目的。记住`cin`阅读你的文本直到空白。如果你想`getline`从同一个库中读取整行使用函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T15:55:30.263

您可以使用`std::string`.

```
std::string str;
std::cin>>str; //read a string 

// to read a whole line
std::getline(stdin, str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T16:09:54.530

由于您只关心用户的 1 个字符响应，因为`Do you want to add these numbers?`可能由 a 连接，如果您打算只读取 1 个字符`(Y/N)`，则应该（在我看来）使用[getchar()函数。](http://www.cplusplus.com/reference/cstdio/getchar/)对于容易出错的 1 个字符输入处理，我会这样做：

```
bool terminate = false;
char choice;
while(terminate == false){
    cout << "X=" << x << endl;
    cout << "Y=" << y << endl;
    cout << "Do you want to add these numbers?" << endl;

    fflush(stdin);
    choice = getchar();
    switch(choice){
    case 'Y':
    case 'y':
        //do stuff
        terminate = true;
        break;
    case 'N':
    case 'n':
        //do stuff
        terminate = true;
        break;
    default:
        cout << "Wrong input!" << endl;
        break;
    }
} 
```

**作为对您编辑的回复**

这不起作用，因为您不能`std::string`作为参数传递给`switch`. 正如我告诉你的，你应该为此目的只阅读一个字符。如果您坚持使用字符串，请不要使用`switch`，而是`if else`使用字符串比较器来查找块`==`。

```
cin >> text;
if(text == "yes"){
    z = add(x, y);
}
else if(text == "no")
{
    cout << "Okay" << endl;
}
else
{
    cout << "Please enter yes or no in lower case letters" << endl;
} 
```

# spring - 如何将默认值传递给 Spring 输入/隐藏元素？

> ID：15176324
> 
> 赞同：0
> 
> 时间：2013-03-02T15:49:49.737
> 
> 标签：spring, spring-mvc

假设，我有以下 Spring 表单

```
<form:form id="mainForm" name="mainForm" 
           method="post" action="Temp.htm" commandName="tempBean">

    <form:hidden path="stringValue" />

</form:form> 
```

隐藏字段使用命令 bean - 映射`TempBean`。如果我需要将一个动态的默认值传递给这个隐藏字段并依赖于其他一些操作，该怎么办？

* * *

HTML 上下文：

```
<c:set var="someVariable" value="${someValue}"/>

<input type="hidden" 
       id="stringValue" 
       name="stringValue" 
       value="${someVariable}"/> 
```

标签喜欢`<form:input>`并且`<form:hidden>`没有`value`属性。那么，在这种情况下，如何将默认值传递给命令对象呢？

我正在使用 Spring 3.2.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:43:04.800

您可以将默认值设置为您正在使用的通用名称中的 bean

```
@RequestMapping(value="/someView.html", method=RequestMethod.GET)
    public String someView(ModelMap modelMap){

        TempBean tempBean = new TempBean();
                tempBean.setStringValue(somevalue);
        modelMap.addAttribute(tempBean );
        return "something";
    } 
```

# php - 使用设置值更新 mysqli 查询

> ID：15176329
> 
> 赞同：0
> 
> 时间：2013-03-02T15:50:18.197
> 
> 标签：php, mysqli

我可以动态更新我的列，但我不知道如何用设定值更新它（我知道很愚蠢）

这是我的 sql 代码，它使用设置值更新列：

```
if (isset($_POST['delete'])) {
$sql = 'UPDATE users SET user_deletion_date = NOW(), user_deleted_by = '.$_SESSION['id'].', deleted = Y
          WHERE user_id = ?';
  if ($stmt->prepare($sql)) {
    // bind the query parameters
    $stmt->bind_param('i', $_GET['user_id']);
    // bind the result to variables
    $stmt->bind_result($user_id, $user_deletion_date, $user_deleted_by, $deleted);
    // execute the query, and fetch the result
    $done = $stmt->execute();
    $stmt->fetch();
  }
}
if ($done) {
  header('Location: update_users_confirm.php');
  exit;
} 
```

这根本不会更新表格，我知道问题出在我的 bind_param 上，有人可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:07:49.993

迈克尔 B 的答案很可能是解决方案。将 $_GET 更改为 $_POST

# c# - 会话状态超时

> ID：15176332
> 
> 赞同：4
> 
> 时间：2013-03-02T15:50:32.783
> 
> 标签：c#, asp.net

我在 web.config 文件中有这个设置：`<sessionState timeout="540" />`. 这试图使所有会话在 8 小时后过期。但是，会话到期比这快得多，并且我得到一个对象引用未设置为对象错误的实例。有人能告诉我是否还有其他影响会话的东西吗？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T16:04:49.887

如果应用程序池回收（不活动、异常或配置），SessionState 也会过期。

无论如何，将 SessionState 超时延长这么多并不是最佳实践。

也许您应该将依赖项更改为会话或使用不同的方式来持久化这些对象（视图状态）。

如果您绝对需要让会话持续存在这么多，您应该使用另一台服务器或数据库作为会话存储。

[http://msdn.microsoft.com/en-us/library/ms178586(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178586(v=vs.100).aspx)

# c# - 在 Datagrid 中搜索并滚动并选择新添加的项目

> ID：15176337
> 
> 赞同：0
> 
> 时间：2013-03-02T15:50:57.557
> 
> 标签：c#, wpf, telerik

我正在使用 Telerik Datagrid 控件来显示 100 条记录。在我的应用程序中，用户选择他们想要编辑的，我使用表单来允许用户更新记录。同样，如果他们希望添加新记录，则单击“添加”并出现空白版本的表单。

我没有直接绑定到数据源。我通过将 Itemsource 设置为我的记录列表来向网格提供数据。

当用户编辑了一条记录时，我可以很容易地滚动并选择已编辑的记录：

```
 //find row index of selected item
            var lastRowUpdated = RadGridAssetTable.Items.IndexOf(this.RadGridAssetTable.SelectedItem);

            // move to index following edit
            RadGridAssetTable.ScrollIndexIntoView(lastRowUpdated);
            RadGridAssetTable.SelectedItem = lastRowUpdated; 
```

但是，当我添加新记录时，我无法弄清楚如何以编程方式滚动并选择新添加的网格项。

实际上，我想在网格行中搜索（隐藏）记录 ID，选择控件中的行索引并滚动到它

似乎没有一种以编程方式在网格中搜索数据的方法，有人可以指出如何做到这一点的正确方向吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:26:16.387

好的，所以我这样解决了。

```
 var lastRowUpdated = 0;
        var i = 0;

        if (_assetsavedData.AssetId == -1)
        {
            foreach (var rowItem in from object row in RadGridAssetTable.Items select row as AssetLinked)
            {
                Debug.WriteLine(rowItem.AssetItems.AssetCommonName);

                if (rowItem.AssetItems.AssetCommonName.Equals(_assetsavedData.AssetCommonName))
                {
                    lastRowUpdated = i;
                    Debug.WriteLine("found at " + i);
                    break;
                }

                i++;
            }
        }
        else
        {
            lastRowUpdated = RadGridAssetTable.Items.IndexOf(this.RadGridAssetTable.SelectedItem);
        } 
```

# git - Git 推送和提交远程混淆？

> ID：15176343
> 
> 赞同：0
> 
> 时间：2013-03-02T15:51:31.427
> 
> 标签：git

我有一个本地仓库和一个远程 SSH 仓库。我是这些的唯一用户。我使用遥控器作为我的备份。我在当地有几个分支。当推送它们（其中一个分支）时，它似乎工作正常，但我遇到的问题是，当我打开远程仓库时，我看到推送后有一个提交等待，第二个是我没有看到我的本地更改虽然 Git 说一切正常，而遥控器说有修改文件。

所以我想知道这是否真的是推动工作的方式？我是否必须手动提交遥控器上的每次推送？我主要想使用它备份，所以我想要一种自动化的方式，即远程接受推送并在那里进行提交。

第二个问题是为什么我没有看到我在遥控器上所做的更改？我已经从本地成功推送到远程，在远程成功提交，但是文件是旧版本。我不确定这是网络问题还是其他问题。其他人有类似的问题吗？

远程是 Linux samba，本地是 Windows 7。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:05:31.310

基本上，您必须按以下方式工作（假设您有存储库的本地克隆）：

*   创建一个本地分支：`git branch <new_branch_name>`并切换到它：`git checkout <new_branch_name>`
*   将分支推送到远程存储库：`git push -u origin <new_branch_name>`
*   修改后，提交更改：`git commit -a -m <commit_message>`
*   将更改推送到远程存储库：`git push`

为了检索其他人在远程仓库中所做的更改，您必须执行`git pull`.

# java - 为什么我的代码会崩溃

> ID：15176350
> 
> 赞同：-2
> 
> 时间：2013-03-02T15:52:09.927
> 
> 标签：java, android

所以我正在运行一个教程应用程序，除了我尝试运行波纹管类外，它都可以正常工作，但是我没有在代码中遇到错误，所以我想知道如果代码可能有问题，是否有人可以提供帮助。

另外一方面不是在编程时，例如你输入说：android：在xml或其他东西中。在 java 中，为什么我没有得到包含所有选项的下拉菜单？

代码：

```
package com.example.learn.tam;

import java.util.Random;

import android.app.Activity; 
import android.graphics.Color;
import android.os.Bundle;
import android.text.InputType;
import android.view.Gravity;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.ToggleButton;

public class textplay extends Activity implements View.OnClickListener{

Button chkCommand;
ToggleButton passToggle;
EditText input;
TextView display;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.text);

    holder();

    passToggle.setOnClickListener(this);

    chkCommand.setOnClickListener(this);
}

private void holder() {

    Button chkCommand = (Button) findViewById(R.id.bResults);
    passToggle = (ToggleButton) findViewById(R.id.tbPassword);
    input = (EditText) findViewById(R.id.etCommands);
    display = (TextView) findViewById(R.id.tvResults);

}

@Override
public void onClick(View v) {
    switch(v.getId()){
    case R.id.bResults:

        String check = input.getText().toString();

        display.setText(check);

        if(check.contentEquals("left")){
            display.setGravity(Gravity.LEFT);
        }
        else if(check.contentEquals("center")) {
            display.setGravity(Gravity.CENTER);
        }
        else if(check.contentEquals("right")){
            display.setGravity(Gravity.RIGHT);
        }
        else if(check.contentEquals("blue")){
            display.setTextColor(Color.BLUE);
        }
        else if(check.contentEquals("WTF")){
            Random crazy = new Random();
            display.setText("WTF!!!!");
            display.setTextSize(crazy.nextInt(75));
            display.setTextColor(Color.rgb(crazy.nextInt(265),crazy.nextInt(265),crazy.nextInt(265)));

            switch(crazy.nextInt(3)){
            case 0:
                display.setGravity(Gravity.LEFT);
                break;
            case 1:
                display.setGravity(Gravity.CENTER);
                break;
            case 2:
                display.setGravity(Gravity.RIGHT);
                break;
            }
        }
        else{
            display.setText("Invalid");
            display.setGravity(Gravity.CENTER);
            display.setTextColor(Color.WHITE);
        }

        break;
        case R.id.tbPassword:

        if (passToggle.isChecked() == true){
            input.setInputType(InputType.TYPE_CLASS_TEXT  | InputType.TYPE_TEXT_VARIATION_PASSWORD);
        }else{
            input.setInputType(InputType.TYPE_CLASS_TEXT);
        }
        break;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T15:53:10.963

改变：

```
private void holder() {

    Button chkCommand = (Button) findViewById(R.id.bResults);
    passToggle = (ToggleButton) findViewById(R.id.tbPassword);
    input = (EditText) findViewById(R.id.etCommands);
    display = (TextView) findViewById(R.id.tvResults);

} 
```

到

```
private void holder() {

    chkCommand = (Button) findViewById(R.id.bResults);
    passToggle = (ToggleButton) findViewById(R.id.tbPassword);
    input = (EditText) findViewById(R.id.etCommands);
    display = (TextView) findViewById(R.id.tvResults);

} 
```

通过声明一个具有相同名称的新变量，您隐藏了类字段。因此，类级别`chkCommand`保持为空，并在您尝试使用`chkCommand.setOnClickListener(this);`.

# c# - Asp.net mvc 4 - 需要使用会话但不能使用 cookie

> ID：15176355
> 
> 赞同：1
> 
> 时间：2013-03-02T15:52:41.443
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, cookieless

我正在开发一个**ASP.NET MVC 4**应用程序。

我需要使用会话来存储各种东西。我的任务是不使用 cookie。

有没有办法解决这个问题？有人告诉我 ASP.NET MVC 4 不能在无 cookie 模式下工作。

还有其他替代方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:45:42.663

编辑您的 web.config

```
<sessionState cookieless="true" timeout="20" /> 
```

# oop - 封装与抽象的区别

> ID：15176356
> 
> 赞同：130
> 
> 时间：2013-03-02T15:52:44.533
> 
> 标签：oop, encapsulation, abstraction

我今天接受了采访。我有一个来自**OOP的问题，关于****封装**和**抽象**之间的区别？

我回答她说，**封装**基本上是将数据成员和成员函数绑定到一个名为**Class**的单元中。而**抽象**基本上是为了隐藏实现的复杂性并为用户提供方便的访问。我以为她会接受我的回答。但她质疑，如果两者的目的都是为了隐藏信息，那么这两者之间的实际区别是什么？我无法给她任何答案。

**在问这个问题之前，我阅读了 StackOverFlow 上的其他线程，了解这两个OOP**概念之间的区别。但我发现自己无法说服面试官。

任何人都可以用一个最简单的例子来证明它的合理性吗？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-03-02T16:03:40.383

**封装隐藏****了类**中可能经常更改的变量或某些实现，以防止外人直接访问它。他们必须通过 getter 和 setter 方法访问它。

**抽象**也用于隐藏某些东西，但**程度更高（类，接口）**。使用抽象类（或接口）的客户并不关心它是什么，他们只需要知道它可以做什么。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2018-07-12T11:20:19.683

这张图片很好地总结了两者之间的区别：

[![在此处输入图像描述](../Images/26f3f08294d1085cde933889e4404cc8.png)](https://i.stack.imgur.com/07dXi.png)

来源[在这里](http://www.differencebetween.net/technology/difference-between-abstraction-and-encapsulation/)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2018-12-22T04:17:17.580

**封装：**将代码和数据一起包装成一个单元。`Class`是封装的一个例子，因为它包装了方法和属性。

**抽象：**隐藏内部细节并仅显示功能。抽象关注对象的作用而不是它的作用。它提供类的通用视图。

```
int number = 5;
string aStringNumber = number.ToString(); 
```

在这里， ToString() 是抽象的。而这个机制`number`变量如何转换为字符串并初始化为`aStringNumber`封装。

*让我们以一个真实世界的计算器为例。封装是内部电路、电池等，它们结合起来使它成为一个计算器。抽象是提供用于操作它的不同按钮，如开关、清除和其他按钮。*

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-06-20T20:19:48.833

抽象 - 是识别一组对象的共同基本特征的过程（和此过程的结果）。有人可能会说抽象是泛化的过程：所有考虑的对象都包含在对象的超集中，所有这些对象都具有给定的属性（但在其他方面有所不同）。

封装——是将数据和操作这些数据的函数封装到一个单元中的过程，以便对外界隐藏内部实现。

这是与特定编程语言无关的一般答案（就像问题一样）。所以答案是：抽象和封装没有任何共同之处。但是它们的实现可能彼此相关（例如，在 Java 中：封装 - 细节隐藏在类中，抽象 - 细节根本不存在于类或接口中）。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2021-01-02T19:46:21.907

是的 ！！！！如果我说**封装是一种高级的特定范围抽象**，

你们中有多少人阅读/赞成我的回答。让我们深入了解我为什么这么说。

在我提出索赔之前，我需要澄清两件事。

一个是数据隐藏，另一个是抽象

### 数据隐藏

大多数时候，我们不会直接访问我们的内部数据。我们的内部数据不应该直接出去，因为外部人员无法直接访问我们的内部数据。这一切都与安全有关，因为我们需要保护特定对象的内部状态。

### 抽象

为简单起见，隐藏内部实现称为抽象。在抽象中，我们只关注必要的事情。基本上，我们抽象地谈论“做什么”而不是“如何做”。安全性也可以通过抽象来实现，因为我们不会强调“我们是如何实现的”。由于我们可以更改实现，因此可维护性将会提高，但不会影响我们的最终用户。

我说过，“封装是一种高级的特定范围抽象”。为什么？因为我们可以将封装视为数据隐藏+抽象

> 封装 = 数据隐藏 + 抽象

在封装中，我们需要将数据隐藏起来，让外部的人看不到数据，我们需要提供可以用来访问数据的方法。这些方法可能在这些东西中具有验证或其他功能，这些东西也对外部人员隐藏。所以在这里，我们隐藏了访问方法的实现，它被称为抽象。

这就是为什么我像上面所说的封装是一种抽象。

那么区别在哪里**呢**？

不同之处在于，如果我们为了简单性、可维护性和安全性而对用户隐藏某些东西，那么抽象是通用的，并且，

封装是一种与内部状态安全相关的特定封装，其中我们隐藏了内部状态（数据隐藏），我们提供了访问数据的方法，并且这些方法的实现也对外部人员隐藏（抽象）。

**为什么我们需要抽象** 当您进行设计时，您不会谈论实现。你说如果你给这个方法提供这些参数，它会给出这些输出。我们隐藏方法的内部实现并讨论它将做什么，所以这是一个抽象。

例子

```
public int add(int a, int b); 
```

这个方法定义告诉我们，如果你给两个变量，它会做加法并返回结果。

在这里，我们不会看实现，我们只看这个方法做了什么，而不是它是怎么做的。方法实现可能因开发人员而异。1.

```
public int add(int a, int b){
   return a + b; 
} 
```

```
public int add(int a, int b){

   return b + a; 
} 
```

两种方法在做同样的事情，但它们的实现不同。

基本上，

## 需要抽象来对系统建模。需要封装以增强系统安全性。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-03-02T16:00:07.647

**抽象：** 通常用于提供对一组类的多态访问。一个抽象类不能被实例化，因此另一个类必须从它派生来创建一个更具体的表示。

抽象类的常见用法示例可以是模板方法设计模式的实现，其中引入了抽象注入点，以便具体类可以以自己的“具体”方式实现它。

见：[http://en.wikipedia.org/wiki/Abstraction_(computer_science)](http://en.wikipedia.org/wiki/Abstraction_(computer_science))

**封装：** 这是向将要使用它的客户端隐藏特定类的实现复杂性的过程，请记住，“客户端”可能是编写该类的人的程序或事件。

参见：[http://en.wikipedia.org/wiki/Encapsulation_(object-oriented_programming)](http://en.wikipedia.org/wiki/Encapsulation_(object-oriented_programming))

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-01-26T03:37:44.387

有一篇很棒的文章深入探讨了抽象、封装和信息隐藏之间的区别：[http ://www.tonymarston.co.uk/php-mysql/abstraction.txt](http://www.tonymarston.co.uk/php-mysql/abstraction.txt)

以下是文章的结论：

> 抽象、信息隐藏和封装是非常不同但高度相关的概念。有人可能会争辩说，抽象是一种帮助我们识别哪些特定信息应该可见，哪些信息应该隐藏的技术。封装是一种封装信息的技术，以隐藏应该隐藏的内容，并让原本应该可见的内容变得可见。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-03-19T05:38:58.507

封装：

隐藏的东西，有点像药丸。我们不知道胶囊里有什么，我们只是把它拿走。和编程一样——我们只是隐藏了一些特殊的方法或属性代码，它只给出输出，和胶囊一样。简而言之，封装隐藏了数据。

抽象：

抽象意味着隐藏逻辑或实现。例如，我们服用药片并查看它们的颜色，但不知道这样做的目的是什么以及它如何作用于身体。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-08-12T01:24:30.620

是的，抽象和封装确实是关于隐藏。

*   **仅使用相关细节并在设计级别**隐藏不必要的数据称为**抽象**。（就像只为“汽车”类选择相关属性以使其更抽象或更通用。）

*   **封装**是在**实现级别**隐藏数据。就像如何实际隐藏数据以防止直接/外部访问一样。这是通过将数据和方法绑定到单个实体/单元来完成的，以防止外部访问。因此，封装也称为实现级别的数据隐藏。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-01-13T18:13:57.483

一个非常实际的例子是。

假设我想加密我的密码。

*   我不想知道细节，我只是调用 encryptionImpl.encrypt(password) 它返回一个加密的密码。

    `public interface Encryption{ public String encrypt(String password); }`

    这称为**抽象**。它只是显示应该做什么。

*   现在让我们假设我们有两种类型的加密 Md5 和 RSA，它们从第三方加密 jar 实现加密。

    然后那些 Encryption 类有自己的实现加密的方式来保护它们的实现不受外界的影响

    这称为**封装**。隐藏应该如何完成。

记住：***应该做什么和应该怎么做。***

***隐藏复杂性与保护实现***

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-02-25T09:40:59.913

两者的区别只是**View Point**
Encapsulation 字用于隐藏数据，如果我们的目标是防止客户看到我们逻辑的内部视图

如果我们的目标是向客户展示外部视图，则抽象词用于隐藏数据

外部视图意味着让假设

```
BubbleSort(){
//code 
swap(x,y);
} 
```

在这里我们使用冒泡排序中的交换来向我们的客户展示我们正在应用什么逻辑，如果我们在这里用整个代码替换交换（x，y），在单个实例中他/她无法理解我们的逻辑

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-06-08T16:42:24.207

让我用上面讨论的相同例子来解释它。请考虑同一台电视。

**封装**：我们可以使用遥控器进行的调整就是一个很好的例子 - 音量增大/减小、颜色和对比度 - 我们所能做的就是将其调整到提供的最小值和最大值，并且不能做任何超出遥控器提供的东西 -想象一下这里的 getter 和 setter（setter 函数将检查提供的值是否有效，如果是，它会处理操作，如果不是，则不允许我们进行更改 - 就像我们不能将音量降低到零以上，即使我们按下音量按钮一百次）。

**抽象**：我们可以在这里采用相同的示例，但具有更高的程度/上下文。降低音量按钮将降低音量 - 这是我们提供给用户的信息，用户不知道遥控器内部的红外发射器和电视中的接收器以及解析信号和微处理器的后续过程电视里面的建筑。简而言之，在上下文中不需要它 - 只需提供必要的内容。在这里可以很容易地关联教科书的定义，即隐藏内部实现并只提供它将做什么而不是如何做到这一点！

希望它澄清一点！

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-10-30T13:28:17.460

简而言之，`Abstraction`通过隐藏实现和实现接口以能够与类的实例进行交互，发生在类级别。鉴于，`Encapsulation`用于隐藏信息；例如，将成员变量设为私有以禁止直接访问，并为它们提供 getter 和 setter 以进行间接访问。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-08-01T12:22:53.373

**抽象** 顾名思义，抽象意味着对某事的*总结*或*简要*说明。在 OOP 的情况下，抽象类是那些不包含现实世界中该对象的所有信息的类，例如。您想预订酒店房间，如果您的对象是您主要关心的*房间：*

*   它的价格、大小、床位等。

但你不在乎

*   他们在酒店房间里用过的电线。
*   他们用什么水泥建造的

因此，您可以获得有关您关心的*房间的***抽象**信息。

 *另一方面，**封装**基本上是将相关信息封装在一起，例如。您预订了酒店房间，您去那里按开关打开*灯泡*。现在*开关*对象具有打开灯泡所需的所有内部接线，但您真的不关心这些接线。您只关心灯泡是否打开。

现在可以说**抽象**也适用于这里：

可以说*交换机*的内部布线对您来说也是抽象的，所以这一定是**抽象**的情况，但这里有一些细微的区别：

**抽象**更多是一个上下文的东西，它没有非抽象的信息，比如你不关心的布线信息，不存在于预订酒店*房间*的网站的上下文中（比如你的教室*没有*关于它的布线网格，因为这个*房间*只被委托用于在线预订），而**封装**更细化，它意味着隐藏和封装你不需要关心的细颗粒物，用于打开灯泡*开关*隐藏布线在交换机内部（如类的私有属性/方法）。现在*switch*类有信息，但它对你是隐藏的。另一方面*room* class 没有关于酒店房间布线设计的信息，因为它甚至没有在*房间在线预订的上下文中*

因此，**抽象**更多地与类相关，而**封装**更多地与类对象、属性和方法的内部相关。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-11-09T10:19:17.333

**抽象**

*   是隐藏如何，只显示什么的过程
*   目的是简化信息并向用户隐藏不必要的细节

**封装**

*   是将数据和功能包装到一个单元中的过程
*   目的是通过防止直接访问并仅提供更安全和间接的方式来保护数据

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-02-22T12:15:46.347

抽象

在 Java 中，抽象意味着将信息隐藏到现实世界中。它建立了双方之间的合同，以告知“我们应该如何使用服务”。

例如，在 API 开发中，只向世界展示了服务的抽象信息，而不是实际的实现。java中的接口可以很好地帮助实现这个概念。

接口提供各方之间的合同，例如，生产者和消费者。生产者在不让消费者知道产品是如何制造的情况下生产商品。但是，通过界面，Producer 让所有消费者知道可以购买什么产品。在抽象的帮助下，生产者可以将产品推销给他们的消费者。

封装：

封装是抽象的一层。同一产品公司尝试屏蔽来自其他生产组的信息。例如，如果一家公司生产葡萄酒和巧克力，封装有助于屏蔽每种产品如何相互制造的信息。

1.  如果我有一个单独的包，一个用于葡萄酒，另一个用于巧克力，并且如果所有类都在包中声明为默认访问修饰符，那么我们将为所有类提供包级封装。
2.  在一个包中，如果我们将每个类字段（成员字段）声明为私有并具有访问这些字段的公共方法，这样就可以对这些字段进行类级别的封装

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-10-19T18:02:07.497

如果我是面对面试的人，我会说最终用户的视角抽象和封装是相当的。这不过是信息隐藏。从软件开发人员的角度来看，抽象解决了设计级别的问题，封装解决了实现级别的问题

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-02-21T16:50:01.177

封装是将数据和方法封装在一个单元中，使数据只能通过方法（getter/setter）访问，以确保数据的安全性。

抽象隐藏了工作如何完成的内部实现细节。

以以下堆栈类为例：

```
Class Stack
{
private top;
void push();
int pop();
} 
```

现在封装有助于保护内部数据，因为无法直接在外部访问顶部。

抽象有助于在堆栈上进行推送或弹出，而无需担心推送或弹出的步骤是什么

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-03-02T07:28:48.200

简单来说，**封装**就是数据隐藏（信息隐藏），**抽象**就是细节隐藏（实现隐藏）

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2019-04-04T07:34:07.177

再多说几句就明白了

绝不能混淆数据抽象和抽象类。它们是不同的。

通常我们说抽象类或方法基本上是为了隐藏一些东西。但是没有..那是错误的。抽象这个词是什么意思？谷歌搜索说英文单词abstraction是什么意思

“存在于思想中或作为一个想法，但没有物理或具体的存在。”

在抽象类的情况下也是如此。它不是隐藏方法的内容，而是方法的内容已经是空的（没有物理或具体的存在），但它决定了方法应该如何（存在于思想中或作为一种想法）或方法应该如何在课程中.

那么你什么时候真正使用抽象方法呢？

*   当基类中的方法在扩展它的每个子类中都不同时。
*   所以你要确保子类实现了这个功能。
*   这也确保了具有强制签名的方法必须具有 n 个参数。

所以关于抽象类！- 抽象类不能被实例化，只能扩展！但为什么 ？

*   必须防止具有抽象方法的类创建自己的实例，因为其中的抽象方法没有任何有意义的实现。
*   如果由于某种原因您发现拥有该类的实例意义不大，您甚至可以将类抽象化。

抽象类帮助我们避免创建它的新实例！

类中的抽象方法强制子类使用提供的签名确保实现该功能！

* * *

## 回答 #21

> 赞同：-4
> 
> 时间：2016-12-07T12:57:17.373

抽象：应该向我们的类外部公开的最少函数和变量是什么。

封装：如何实现这个需求，意思是如何实现。*

# jquery-masonry - JQuery Masonry & Infinite Scroll - 如何从特定页面 URL 滚动内容？

> ID：15176359
> 
> 赞同：0
> 
> 时间：2013-03-02T15:53:09.743
> 
> 标签：jquery-masonry, infinite-scroll

我已经在我的投资组合网站中实现了 JQuery Masonry，并且我还使用了无限滚动功能。

JQuery Masonry 主页：[http](http://masonry.desandro.com/)
://masonry.desandro.com/ 带有工作无限滚动的作品集页面：[http ://www.owenprescott.com/3d-digital-art.php](http://www.owenprescott.com/3d-digital-art.php)

为了附加下一组图像，它被指示创建新的 html“页面”，如下所示：`2.html`、`3.html`等`4.html`（有组织的数字顺序）。问题是我的大部分网站`.PHP`都不是`.HTML`，我使用包含等来构建网站。我希望找到一种方法来解决必须以上述数字顺序 (& .HTML) 标记页面的方法，而是使用现有的语义 PHP 结构来描述带有 URL 中的关键字的项目。

我希望这是我遇到的一个可以理解的困境，我仍在学习 JQuery，所以我可能会在使用适当的术语时遇到困难。换句话说，如果您打开 Masonry 项目文件，您将如何更改代码以便为特定 URL 附加内容，如下所示。

页数：

```
2.html - - - > /conceptual-urban-architecture-3d.php <br>
3.html - - - > /futuristic-outdoor-architecture-3d.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:51:23.467

尝试“[路径](https://github.com/paulirish/infinite-scroll/wiki/Options#path)”选项：

```
path: function(pageNumber) {
    return "/your/custom/url";
} 
```

# php - 创建完美缩略图

> ID：15176364
> 
> 赞同：0
> 
> 时间：2013-03-02T15:53:32.997
> 
> 标签：php

下面的代码工作没有任何错误，但我的问题是当我创建缩略图时，有时缩略图是不可理解的（某些条件，如宽度比高度大得多）我也尝试了一个自动计算高度的代码。但它赢了' 不完美的作品。我想要一个每次都创建一个可以理解的缩略图的代码。（可以生成裁剪的缩略图）

```
function make_thumb($src, $dest, $desired_width)
{
    $source_image = imagecreatefromjpeg($src);
    $width = imagesx($source_image);
    $height = imagesy($source_image);

    //even if height is calculated automatically using
    $desired_height = floor($height * ($desired_width / $width));

    $virtual_image = imagecreatetruecolor($desired_width, $desired_height);
    imagecopyresampled($virtual_image, $source_image, 0, 0, 0, 0, $desired_width, $desired_height, $width, $height);
    imagejpeg($virtual_image, $dest);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:46:58.823

我编写了一个脚本来制作横向或纵向图像的拇指。可能这会帮助你

```
<?php
    $thumbWidth = 200; // can change it to whatever required
    $thumbHeight = 200; // can change it to whatever required

    $img = imagecreatefromstring(file_get_contents('SAM_1883.JPG'));
    $imgWidth = imagesx($img);
    $imgHeight = imagesy($img);

    $imgStart_x = 0;
    $imgStart_y = 0;
    $imgEnd_x = $imgWidth;
    $imgEnd_y = $imgHeight;

    if($imgWidth > $imgHeight){
        $diff = $imgWidth - $imgHeight;
        $imgStart_x = $diff / 2;
        $imgEnd_x = $imgWidth - $diff;
    }else{
        $diff = $imgHeight - $imgWidth;
        $imgEnd_y = $imgHeight - $diff;
    }

    $dest = imagecreatetruecolor($thumbHeight,$thumbHeight);
    imagecopyresized($dest, $img, 0, 0, $imgStart_x, $imgStart_y, $thumbWidth, $thumbHeight, $imgEnd_x, $imgEnd_y);
    imagePNG($dest,'abc'.rand(0,9999).'.png');
?> 
```

但是，您可以根据需要更改拇指的源、拇指宽度、拇指高度和目的地。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T16:05:24.427

您可以使用`Class SimpleImage`，例如：

```
// Usage:
// Load the original image
$image = new SimpleImage('lemon.jpg');

// Resize the image to 600px width and the proportional height
$image->resizeToWidth(600);
$image->save('lemon_resized.jpg'); 
```

你可以在`class`这里找到这个`github` [https://gist.github.com/miguelxt/908143](https://gist.github.com/miguelxt/908143)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-02T16:08:49.040

[https://github.com/lencioni/SLIR](https://github.com/lencioni/SLIR)可以动态调整图像大小。它会将图像缓存在服务器上，并使其可缓存在浏览器和代理服务器上。调整大小发生在加载图像时，而不是在加载 HTML 时，因此您的 HTML 加载速度更快。

# php - 如果文件已经存在，如何通过 codigniter 获取新生成的文件名

> ID：15176366
> 
> 赞同：0
> 
> 时间：2013-03-02T15:53:37.150
> 
> 标签：php, codeigniter

***如果文件已经存在，如何通过codigniter获取新生成的文件名？***

我将图像文件插入到我的项目`(uploads)`文件夹中，并将其名称`i.e image.png`插入到我的数据库表中。

说`car.png`是我`uploads`文件夹中存在的图像。如果我再次尝试上传`car.png`图像，那么目前它正在保存`car1.png`到我的上传文件夹中，而不替换旧图像。我想获取新的图像名称，即`car1.png`保存到我的数据库中，但它实际上保存了我从表单中发送的名称，即`car.png`。

获取我使用的文件名

```
 $img1=$_FILES['img1']['name'];  
 //this gives me the name of file which i am uploading from my form  i.e car.png 
```

请帮我解决我的问题。请....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:19:43.337

看来您没有使用 codeingiter 的文件上传类。我建议您使用它，因为它会解决您的问题。

如果您上传一个同名文件，并且在您传递的选项中将覆盖设置为 FALSE，codeigniter 会将您的**car.png**重命名为**car1.png**（或下一个可用的数字）。

然后，如果上传成功，它将返回一个包含与该文件相关的所有数据的数组

```
Array
(
    [file_name]    => mypic.jpg
    [file_type]    => image/jpeg
    [file_path]    => /path/to/your/upload/
    [full_path]    => /path/to/your/upload/jpg.jpg
    [raw_name]     => mypic
    [orig_name]    => mypic.jpg
    [client_name]  => mypic.jpg
    [file_ext]     => .jpg
    [file_size]    => 22.2
    [is_image]     => 1
    [image_width]  => 800
    [image_height] => 600
    [image_type]   => jpeg
    [image_size_str] => width="800" height="200"
) 
```

如您所见，这样即使文件更改了，您也将获得文件的名称。

您可以在此处阅读有关文件上传类以及如何实现它的更多信息：http: [//ellislab.com/codeigniter/user-guide/libraries/file_uploading.html](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)

**EDIT2** 你必须在你的视图 userfile1、userfile2、userfile3 等上命名你的输入文件

```
class Upload extends CI_Controller {

  function __construct()
  {
    parent::__construct();
    $this->load->helper(array('form', 'url'));
  }

  function index()
  {
    $this->load->view('upload_form', array('error' => ' ' ));
  }

  function do_upload(){
   $config['upload_path'] = './uploads/';
   $config['allowed_types'] = 'gif|jpg|png';
   $config['max_size']    = '100';
   $config['max_width']  = '1024';
   $config['max_height']  = '768';

   $this->load->library('upload', $config);
   foreach($_FILES as $key => $value){ 
     if ( ! $this->upload->do_upload($key)){
      $error = array('error' => $this->upload->display_errors());
      $this->load->view('upload_form', $error);
    }else{   
        //This $data is the array I described before
      $data = array('upload_data' => $this->upload->data());
        //So if you this you will get the file name
      $filename = $data['upload_data']['file_name'];
    }
  }
  $this->load->view('upload_success', $data);
}
}
?> 
```

# android - 按住按钮时重复一个字符

> ID：15176368
> 
> 赞同：2
> 
> 时间：2013-03-02T15:53:46.437
> 
> 标签：android

只要按住按钮，我就想一遍又一遍地打印一封信。例如，如果我推动`R`2 秒，我应该会看到： `"RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRR"`

我试过这个：

```
public void addListenerOnUP() {
    Button b = (Button) findViewById(R.id.up);
    b.setOnTouchListener(new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            String p = "R";

            //print ...
            return true;
        }
    });
} 
```

但它只在用户移动手指时有效，而不是在他们触摸屏幕时。我怎样才能让“R”重复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:04:26.347

> 移动手指时它的工作
> 我想在不移动的情况下使用它

您需要使用回调。通过使用 Handler 和 Runnable，您可以在用户手指向下时以设定的时间间隔打印出一个新字母。（也许每 100 毫秒一次？）

```
private Handler handler = new Handler();
private Runnable runnable = new Runnable() {
    @Override
    public void run() {
        // Print out your letter here...

        // Call the runnable again
        handler.postDelayed(this, 100);
    }
} 
```

仅在用户手指向下时打印字母：

```
b.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        switch(event.getAction()){
        case MotionEvent.ACTION_DOWN:
            // Start printing the letter in the callback now 
            handler.post(runnable);
            break;
        case MotionEvent.ACTION_CANCEL:
        case MotionEvent.ACTION_UP:
            // Stop printing the letter
            handler.removeCallbacks(runnable);
        }
        return true;
    }
}); 
```

# php - 如何使用网络摄像头和 php 或 javascript 扫描 QR 码

> ID：15176369
> 
> 赞同：5
> 
> 时间：2013-03-02T15:54:09.307
> 
> 标签：php, javascript, qr-code

我正在尝试实现二维码。我已经使用 phpqrcode 成功实现了它。但是我不知道如何使用网络摄像头和 php 或 javascript 解码 QR 码。我试图在谷歌上搜索它，但找不到任何解决方案。任何人都可以帮助我吗？太感谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:00:21.990

您可以使用这个[jquery 网络摄像头插件](http://www.xarg.org/project/jquery-webcam-plugin/)，然后将图像发送到[php-zbarcode](https://github.com/mkoppanen/php-zbarcode)。它使用可以读取二维码的 zbar [。](http://zbar.sourceforge.net/)请注意，该插件需要闪存。

您还可以使用[jsqrcode](https://github.com/LazarSoft/jsqrcode)来扫描和解释 QR 码，但这需要 HTML5 来显示网络摄像头输出，并使用 Flash 进行捕获。

[这是与纯 javascript 解决方案有关的先前问题](https://stackoverflow.com/questions/7733975/what-javascript-qr-code-reading-libraries-are-available)

# html - 菜单项之间有一个奇怪的几个像素间距

> ID：15176372
> 
> 赞同：1
> 
> 时间：2013-03-02T15:54:21.027
> 
> 标签：html, css, wordpress, menu

出于某种原因，我的菜单项在菜单项之间一直有一些左右间距..！虽然我有点确定我没有编程这个..？

有人知道为什么我的菜单项之间有 3 个像素的间距吗？

[http://jsfiddle.net/skunheal/ceFSJ/](http://jsfiddle.net/skunheal/ceFSJ/)

HTML：

```
<div id="menu">
   <ul id="nav">
      <li class="page_item page-item-13">
            <a href="http://www.overdelijn.nl/wp/?page_id=13">Contact</a>
        </li>
      <li class="page_item page-item-5 current_page_item">
            <a href="http://www.overdelijn.nl/wp/">Home</a>
        </li>
      <li class="page_item page-item-7">
            <a href="http://www.overdelijn.nl/wp/?page_id=7">Nieuws</a>
        </li>
   </ul>
</div> 
```

CSS：

```
#nav, #subNav {
   list-style: none;
   padding-left: 0px;
   margin: 0px;
}

#nav li, #subNav li {
   display: inline;
    padding:0px;
}

/* Currently selected page nav item (and parent) if applicable */
.current_page_item a,
.current_page_parent a {
    text-decoration: none;
    font-family:futura;;
    color:#CCC;
}

.page_item a{
    text-decoration: none;
    font-family:futura;;
    color:#FFFFFF;
    display:inline-block;
    background:#00C;
    line-height:30px;
    width:120px;
    height:30px;
}   

#menu{
    height:30px;
    text-align:center;
} 
```

提前谢谢，问候，梅林！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T16:00:45.140

您已将s设置`display`为。因此，标签之间的空格（换行符和缩进）就像单词之间的空格。只需删除空格并使其如下所示：`li``inline``li`

```
<div id="menu">
 <ul id="nav">
   <li class="page_item page-item-13"><a href="http://www.overdelijn.nl/wp/?page_id=13">Contact</a></li><li class="page_item page-item-5 current_page_item"><a href="http://www.overdelijn.nl/wp/">Home</a></li><li class="page_item page-item-7"><a href="http://www.overdelijn.nl/wp/?page_id=7">Nieuws</a></li>
 </ul>
</div> 
```

您也可以通过将字体大小设置`ul`为零并在`li`s 上再次设置来修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T16:00:07.600

`<ul>`尝试删除和`<li>`项目之间的所有空白。

要么将它们放在一行中，要么像这样分成几行......

```
<ul id="nav"><li class="page_item page-item-13"><a href="http://www.overdelijn.nl/wp/?page_id=13">Contact</a></li
><li class="page_item page-item-5 current_page_item"><a href="http://www.overdelijn.nl/wp/">Home</a></li
><li class="page_item page-item-7"><a href="http://www.overdelijn.nl/wp/?page_id=7">Nieuws</a></li
></ul> 
```

* * *

**更新**

基于您的 JSFiddle...[这里是删除空格的相同小提琴](http://jsfiddle.net/ceFSJ/2/)

# python - Selenium/Python - 无法在用户名字段中输入文本

> ID：15176373
> 
> 赞同：3
> 
> 时间：2013-03-02T15:54:23.813
> 
> 标签：python, selenium

我对 Python 和 Selenium 很陌生。

我正在尝试创建一个自动脚本，其中加载了一个页面并完成了用户名和密码字段。

当我在 Selenium 中运行自动化时，它工作正常（这是一个简单的过程），但是当我通过 python 服务器运行它时它不起作用。页面加载，但未填充任何字段。

任何帮助表示赞赏！

```
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import Select
from selenium.common.exceptions import NoSuchElementException
import unittest, time, re

class Pageload(unittest.TestCase):
    def setUp(self):
        self.driver = webdriver.Firefox()
        self.driver.implicitly_wait(30)
        self.base_url = "http://gymbox.com/"
        self.verificationErrors = []
        self.accept_next_alert = True

    def test_pageload(self):
        driver = self.driver
        driver.get(self.base_url + "/Login")
        driver.find_element_by_id("login_Email").clear()
        driver.find_element_by_id("login_Email").send_keys("hello") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-17T09:45:30.020

您无法输入密钥，因为它位于 iframe 中。尝试 driver.switch_to_frame() 然后执行其余脚本。

这里的例子：

```
def test_pageload(self):
driver = self.driver
driver.get(self.base_url + "/Login")
driver.switch_to_frame('iframe') #<iframe> is the ID of your iframe
driver.find_element_by_id("login_Email").clear()
driver.find_element_by_id("login_Email").send_keys("hello") 
```

# php - mysql中包含日-月-年的日期所需的数据类型

> ID：15176378
> 
> 赞同：-1
> 
> 时间：2013-03-02T15:54:48.587
> 
> 标签：php, html, mysql, sql, drop-down-menu

大家好，我正在使用 wamp 服务器，并且我有一个带有出生日期字段的数据库。我只是想知道哪种数据类型适合我的网站上指定的出生日期（1996 年 1 月 1 日）。我想使用 DATE_FORMAT() 函数获取示例 mysql 查询。我见过的大多数帖子都使用 SELECT 和 SELECT*。但我认为这应该用 UPDATE 代替。与 UPDATE 用户一样 SET dob = DATE_FORMAT(dob, '%m/%d/%Y')); . 请在下面找到我的代码，了解如何指定出生日期：

```
<label id= "dob" for="dob">Date of birth:</label>
       <!-- Month dropdown -->
<select name="dob" id="month" onchange="" size="1">
    <option value="01">January</option>
    <option value="02">February</option>
    <option value="03">March</option>
    <option value="04">April</option>
    <option value="05">May</option>
    <option value="06">June</option>
    <option value="07">July</option>
    <option value="08">August</option>
    <option value="09">September</option>
    <option value="10">October</option>
    <option value="11">November</option>
    <option value="12">December</option>
</select>

<!-- Day dropdown -->
<select name="dob" id="day" onchange="" size="1">
    <option value="01">01</option>
    <option value="02">02</option>
    <option value="03">03</option>
    <option value="04">04</option>
    <option value="05">05</option>
    <option value="06">06</option>
    <option value="07">07</option>
    <option value="08">08</option>
    <option value="09">09</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
    <option value="24">24</option>
    <option value="25">25</option>
    <option value="26">26</option>
    <option value="27">27</option>
    <option value="28">28</option>
    <option value="29">29</option>
    <option value="30">30</option>
    <option value="31">31</option>
</select>

<select id="birthyear" name="dob">
<option value="1996">1996</option>
<option value="1995">1995</option>
<option value="1994">1994</option>
<option value="1993">1993</option>
<option value="1992">1992</option>
<option value="1991">1991</option>
<option value="1990">1990</option>
<option value="1989">1989</option>
<option value="1988">1988</option>
<option value="1987">1987</option>
<option value="1986">1986</option>
<option value="1985">1985</option>
<option value="1984">1984</option>
<option value="1983">1983</option>
<option value="1982">1982</option>
<option value="1981">1981</option>
<option value="1980">1980</option>
<option value="1979">1979</option>
<option value="1978">1978</option>
<option value="1977">1977</option>
<option value="1976">1976</option>
<option value="1975">1975</option>
<option value="1974">1974</option>
<option value="1973">1973</option>
<option value="1972">1972</option>
<option value="1971">1971</option>
<option value="1970">1970</option>
<option value="1969">1969</option>
<option value="1968">1968</option>
<option value="1967">1967</option>
<option value="1966">1966</option>
<option value="1965">1965</option>
<option value="1964">1964</option>
<option value="1963">1963</option>
<option value="1962">1962</option>
<option value="1961">1961</option>
<option value="1960">1960</option>
<option value="1959">1959</option>
<option value="1958">1958</option>
<option value="1957">1957</option>
<option value="1956">1956</option>
<option value="1955">1955</option>
<option value="1954">1954</option>
<option value="1953">1953</option>
<option value="1952">1952</option>
<option value="1951">1951</option>
<option value="1950">1950</option>
<option value="1949">1949</option>
<option value="1948">1948</option>
<option value="1947">1947</option>
<option value="1946">1946</option>
<option value="1945">1945</option>
<option value="1944">1944</option>
<option value="1943">1943</option>
<option value="1942">1942</option>
<option value="1941">1941</option>
<option value="1940">1940</option>
<option value="1939">1939</option>
<option value="1938">1938</option>
<option value="1937">1937</option>
<option value="1936">1936</option>
<option value="1935">1935</option>
<option value="1934">1934</option>
<option value="1933">1933</option>
<option value="1932">1932</option>
<option value="1931">1931</option>
<option value="1930">1930</option>
<option value="1929">1929</option>
<option value="1928">1928</option>
<option value="1927">1927</option>
<option value="1926">1926</option>
<option value="1925">1925</option>
<option value="1924">1924</option>
<option value="1923">1923</option>
<option value="1922">1922</option>
<option value="1921">1921</option>
<option value="1920">1920</option>
</select>

       </p> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T15:57:04.260

在数据库中保存日期时，请使用正确的数据类型`DATE`或`DATETIME`. 不要使用`VARCHAR`

优点：

*   易于操作
*   操作数据时不需要强制转换
*   将使用索引（*如果定义了键*）

缺点

*   想不出什么。。

如果您想以这种格式保存日期的原因`January 01 1996`是因为它比 更具可读性`1996-01-01`，那么不要。这可以`DATE_FORMAT()`在数据投影期间使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T15:59:34.860

```
$query = "INSERT INTO users (username, date_of_birth) ";
$query .= "VALUES ('John Doe', 'DATE: Manual Date', '2008-7-04')"; 
```

手动日期的行为有点像大多数脚本语言中的大多数 StringToTime 函数。

另一种存储时间的方法，实际上更有效一点，是使用脚本语言（如 PHP）将时间格式化为切片机并将其作为 INT(11) 存储在数据库中。因此，当从数据库中检索微时间时，您可以以任何您喜欢的方式显示它，并且使用它进行计算甚至更快:)。

# sql-server - 如何在 SQL Server 2008 中插入参数 Unicode 值？

> ID：15176379
> 
> 赞同：-1
> 
> 时间：2013-03-02T15:54:49.743
> 
> 标签：sql-server, sql-server-2008

我必须在一列中插入俄语字符。

它可以通过以下方式完成：

```
insert into tbl_test(name)
values(N'ŞİĞİL') 
```

没错，但我必须在 SP 中做一些`@pName`参数。

所以，

```
insert into tbl_test(name)
values(N@pName) 
```

不是正确的语法。

有什么方法可以使用代码或在选项中有选项吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T15:59:23.517

使用 nvarchar (unicode string) 作为参数类型应该可以解决问题：

```
create procedure dbo.spAddName
@name nvarchar(100)
as

insert into tbl_test(name) values(@name)

GO 
```

**更新**

显然，问题似乎出在您的调用代码中，而不是其他人试图帮助解决的存储过程的定义中。

这是一个完整示例，说明如何从 t-sql 和 c# 正确调用上述存储过程。

```
-- create a test table
create table dbo.tbl_test (
name nvarchar(100) NOT NULL
)
go

-- prove that a simple insert succeeds
insert into dbo.tbl_test (name) values (N'ŞİĞİL')

-- simple select against the unicode column to return the characters verbatim
select name from dbo.tbl_test

-- execute the original stored procedure from t-sql
dbo.spAddName N'ŞİĞİL' 
```

...现在使用 c# 和 ado.net，只是为了提供来自应用程序代码的示例调用。

```
const string cnStr = @"Server=.;Database=test;Trusted_Connection=Yes;";
using (SqlConnection cn = new SqlConnection(cnStr)) {
    cn.Open();
    using (SqlCommand cmd = new SqlCommand("dbo.spAddName", cn)) {
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add(new SqlParameter("@name", SqlDbType.NVarChar, 100) {
                Value = "ŞİĞİL"
            });
        cmd.ExecuteNonQuery();
    }
    cn.Close();
} 
```

如果您对那些试图提供帮助的人更有礼貌，那么将来您更有可能获得更多帮助。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-13T05:21:53.657

我有同样的问题。这个解决方案对我有用：[http ://www.dbafire.com/2015/06/21/convert-varchar-column-to-nvarchar-techniques-and-best-practices/](http://www.dbafire.com/2015/06/21/convert-varchar-column-to-nvarchar-techniques-and-best-practices/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-03T10:13:54.597

我意识到了问题，必须更改参数值的排序规则。试试那几行，一步一步。

```
ALTER DATABASE TEST SET SINGLE_USER WITH ROLLBACK IMMEDIATE

ALTER DATABASE TEST COLLATE Cyrillic_General_100_CI_AS

ALTER DATABASE TEST SET MULTI_USER 
```

但是，如果数据库中有依赖项，

```
ALTER DATABASE TEST COLLATE Cyrillic_General_100_CI_AS 
```

不管用。您必须删除依赖项，然后尝试。

谢谢。

# c# - 由于身份冲突，无法向数据源添加行

> ID：15176380
> 
> 赞同：1
> 
> 时间：2013-03-02T15:54:51.263
> 
> 标签：c#, sql-server, visual-studio-2012

我有一个简单的 VS 2012 C# 表单，其中包含绑定到绑定源的数据网格控件。这绑定到的 SQL Server 数据源具有一个标识列 (ID)，它也是主键。

在此 ID 字段的数据集属性中，我有 AutoIncrement = true、AutoIncrement Seed = -1（默认）和 AutoIncrementStep = -1（默认）

我无法将新行保存到数据库中。

如果我使用工具条添加新记录，清除 ID 字段，然后单击保存图标，我会收到此异常：“当 IDENTITY INSERT 设置为关闭时，无法在表 xxxx 中插入标识列的显式值”。如果我将自动生成的值“-1”留在字段中，我会得到同样的异常。

附加到保存按钮的代码：

```
private void tblClassificationBindingNavigatorSaveItem_Click(object sender, EventArgs e)
    {         
        this.Validate();
        this.tblClassificationBindingSource.EndEdit();
        this.tableAdapterManager.UpdateAll(this.exportComplianceSISVTDataSet);
    } 
```

执行最后一步会导致异常。

一些论坛回复者建议将 IDENTITY INSERT 设置为“ON”作为解决方法，但许多人建议不要这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:03:31.793

> 我相信您正在绑定 Sql server 表中的数据。在 SQL Server 引擎本身中设置 IDENTITY 属性。那是在服务器中的表上。将种子设置为 1，将增量设置为 1。
> 有关身份的更多信息：[单击此处](http://msdn.microsoft.com/en-in/library/aa933196%28v=sql.80%29.aspx)
> 
> [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/97893/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T02:20:47.900

我正是这个问题。将表的 Identity_Insert 设置为 ON 不会更改错误，并且会在 SQL Server Management Studio 中创建不一致的行为。在插入定义了标识字段的记录时，记录显然已成功插入，但在 select 语句的结果中看不到。

我通过更改 DataSetDesigner.cs 的 InitAdapter 函数中定义的 Update 和 Insert 语句来排除 Identity 字段，从而解决了这个问题。下面显示了一个示例，其中 ID 是更新命令的标识字段。

`//this._adapter.UpdateCommand.CommandText = @"UPDATE [dbo].[Stopwords] SET [ID] = @ID, [Stopword] = @Stopword, [DateAdded] = @DateAdded WHERE (([ID] = @Original_ID) AND ([Stopword] = @Original_Stopword) AND ((@IsNull_DateAdded = 1 AND [DateAdded] IS NULL) OR ([DateAdded] = @Original_DateAdded))); //SELECT ID, Stopword, DateAdded FROM Stopwords WHERE (Stopword = @Stopword)"; this._adapter.UpdateCommand.CommandText = @"UPDATE [dbo].[Stopwords] SET [Stopword] = @Stopword, [DateAdded] = @DateAdded WHERE (([ID] = @Original_ID) AND ([Stopword] = @Original_Stopword) AND ((@IsNull_DateAdded = 1 AND [DateAdded] IS NULL) OR ([DateAdded] = @Original_DateAdded))); SELECT ID, Stopword, DateAdded FROM Stopwords WHERE (Stopword = @Stopword)";`

由于这些更改在自动生成的代码中，因此如果重新生成数据集代码，则需要重新应用它们。

# android - AsyncTask 完成时加载 TabPageIndicator

> ID：15176385
> 
> 赞同：1
> 
> 时间：2013-03-02T15:55:09.280
> 
> 标签：android, android-asynctask, viewpagerindicator

我使用[ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)库和`SampleTabsDefault.java`.

**我想要的是：**

我想通过在后台加载一些数据并在任务完成时`AsyncTask`调用。`setAdapter`

**问题：**

我收到错误：`ViewPager`尚未绑定。

**代码：**

```
public class SampleTabsDefault extends FragmentActivity {
    private static final String[] CONTENT = new String[] { "Recent", "Artists",
            "Albums", "Songs", "Playlists", "Genres" };
    FragmentPagerAdapter adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.simple_tabs);
        new LoadContentTask().execute();
    }

    private void loadContent() {
        // TODO Auto-generated method stub

        ViewPager pager = (ViewPager) findViewById(R.id.pager);
        pager.setAdapter(adapter);

        TabPageIndicator indicator = (TabPageIndicator) findViewById(R.id.indicator);
        indicator.setViewPager(pager);
    }

    private class LoadContentTask extends AsyncTask<Object, Object, Object> {

        @Override
        protected Object doInBackground(Object... arg) {
            adapter = new GoogleMusicAdapter(getSupportFragmentManager());
            return true;
        }

        protected void onPostExecute(Object result) {
            // process result
            loadContent();
        }
    }

    class GoogleMusicAdapter extends FragmentPagerAdapter {
        public GoogleMusicAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            return TestFragment.newInstance(CONTENT[position % CONTENT.length]);
        }

        @Override
        public CharSequence getPageTitle(int position) {
            return CONTENT[position % CONTENT.length].toUpperCase();
        }

        @Override
        public int getCount() {
            return CONTENT.length;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:39:12.317

任务完成后调用 setContentView。

# javascript - Google Maps API Javascript 和跟随标记

> ID：15176387
> 
> 赞同：1
> 
> 时间：2013-03-02T15:55:15.177
> 
> 标签：javascript, google-maps, focus, marker

我目前正在使用 javascript Google Maps API 在地图上放置标记并将地图周围的标记移动到不同的坐标。我可以在地图上放置一个标记并对其进行更新，以便标记在地图周围移动，但是如果标记移动得比地图边缘更远，我如何重新调整地图的焦点，以便标记保持在中心地图不重绘整个地图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:04:04.473

您可以使用`Map.getBounds()`来获取地图的边界并`LatLngBounds.contains(latLng:LatLng)`检查该点是否在地图之外，然后可以使用 设置地图的中心`Map.setCenter(latlng:LatLng)`，只需将 LatLng 设置为与标记相同。

[https://developers.google.com/maps/documentation/javascript/reference](https://developers.google.com/maps/documentation/javascript/reference)

# php - 将一点 PHP 代码合并到我的 HTML 文档中

> ID：15176392
> 
> 赞同：1
> 
> 时间：2013-03-02T15:55:45.707
> 
> 标签：php, javascript, html, facebook, iframe

这是快速而肮脏的：我为一个站点编写了一堆 HTML、CSS 和 Javascript（使用 jQuery）。我把所有东西都托管在 Apache 服务器上，所以我相信我*可以*在网站上添加一些 PHP 脚本，但我不确定*如何*做，因为**我不知道 PHP。**

我想添加的脚本是这样的，它应该允许我在 iframe 中打开 Facebook 或 YouTube 等网站：

```
<?php
header('X-Frame-Options: GOFORIT'); 
?> 
```

[（我从这里](https://stackoverflow.com/questions/6666423/overcoming-display-forbidden-by-x-frame-options)得到了这段代码）。

那么我该如何实现呢？对于这样一个初学者的问题，我深表歉意，只是我还没有开始学习 PHP。如果可能的话，尽量让你的答案简单，因为，我在这方面是新手。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:14:10.000

由于您使用的是 Apache Web 服务器，因此您可以使用[Header 指令](http://httpd.apache.org/docs/2.2/mod/mod_headers.html)。尽管此资源已过时，但这里是使用带有 Apache 标头指令的 X-Frame-Options的[解释](http://www.webmasterworld.com/webmaster/4022867.htm)

```
#Add to httpd.conf configuration file.
Header always append X-Frame-Options SAMEORIGIN 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T15:59:54.423

有些人在[这里](https://stackoverflow.com/questions/5091519/displaying-facebook-in-an-iframe-on-my-website)讨论了同样的话题，也许它有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T16:17:42.200

假设您已将 mod_php 安装到 apache 中（并在安装后重新启动 apache），根据我的经验，您**需要将 PHP 代码放在您的 Web 服务器目录中的一个文档中，该文档具有 .php**（一个 PHP 文件）的扩展名。要添加 PHP，您只需将那段代码添加到文档顶部，如下所示：

```
<?php
header('X-Frame-Options: GOFORIT'); 
?>
<html>
...
</html> 
```

如果你这样做但它仍然不起作用，这可能会有所帮助（应该与 ubuntu 的 apache2 包一起使用）：

```
sudo apt-get install php5 libapache2-mod-php5
sudo service apache2 restart
cd /var/www
sudo mv index.html index.php 
```

这假定您的网络服务器目录是 /var/www，并且您的帐户不能在那里写入。这也假设您的 HTML 文档是 index.html（将其替换为您的文档）。

完成此操作后，您应该能够访问`localhost`并且应该执行您的 PHP 脚本。如果您想在不使用 facebook 或 youtube 框架的情况下对其进行测试（或者如果特定的 PHP 代码不起作用），您可以使用以下 PHP 代码：

```
<?php
phpinfo();
?> 
```

这将显示有关您的 PHP 安装的大量信息，这些信息将直接打印到浏览器（因此您将看到它是否有效）。

# javascript - 对对象的javascript数组进行排序

> ID：15176393
> 
> 赞同：2
> 
> 时间：2013-03-02T15:55:51.610
> 
> 标签：javascript, sorting

我有一个看起来像这样的数组：

```
data = 
[
    {name: "Monday", amount: 67, colour: "red"},

    {name: "Tuesday", amount: 23, colour: "blue"},

    {name: "Wednesday", amount: 50, colour: "yellow"},

    {name: "Thursday", amount: 70, colour: "green"},

    {name: "Friday", amount: 20, colour: "orange"},

    {name: "Saturday", amount: 90, colour: "black"},

    {name: "Sunday", amount: 10, colour: "brown"}
] 
```

我想按“数量”值对数组进行降序排序，因此排序后，数组将如下所示：

```
data = 
[
    {name: "Saturday", amount: 90, colour: "black"},

    {name: "Thursday", amount: 70, colour: "green"},

    {name: "Monday", amount: 67, colour: "red"},

    {name: "Wednesday", amount: 50, colour: "yellow"},

    {name: "Tuesday", amount: 23, colour: "blue"},

    {name: "Friday", amount: 20, colour: "orange"},

    {name: "Sunday", amount: 10, colour: "brown"}
] 
```

我在 stackoverflow 上看到过类似的各种帖子，但我发现很难将这些问题解释为像我这样具有命名索引（名称、数量、颜色）而不仅仅是`[0], [1], [2]`等的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:04:05.190

使用[Array.sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)：

```
data.sort(function(a, b) {
    return b.amount - a.amount;
}); 
```

# php - 使用垂直和水平图像的背景填充调整图像大小

> ID：15176394
> 
> 赞同：6
> 
> 时间：2013-03-02T15:55:52.593
> 
> 标签：php, imagemagick

我正在尝试创建一个图片库。这次我想试试 PHP Image Magick。

上传文件时，我希望将其大小调整为 1024x724。如果图像是垂直的（宽度 < 高度），我希望它安装在图像的中心，透明背景（如果不可能，则为白色）两侧应该为空白，因此图像始终可以是 1024x724 和纵横比收音机要保留。

如果图像是水平的（宽度 > 高度），同样适用。

到目前为止，这是我的代码：

```
$img = new Imagick($targetFile);
$img->scaleImage(1024,724);
$img->setGravity(imagick::GRAVITY_CENTER);
$img->setImageBackgroundColor('white');
$img->extentImage(1024,724,0,0);

$img->writeImage($targetFile);

$img = new Imagick($targetFile);
$img->scaleImage(150,150);
$img->setGravity(imagick::GRAVITY_CENTER);
$img->setImageBackgroundColor('white');
$img->extentImage(150,150,0,0);

$img->writeImage($targetThumb); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-03T04:38:25.800

如果我正确地理解了您想要什么，那么您已经在那儿了。现在，如果您尝试使用透明 PNG（源和目标）而不是 jpeg，它将使图像变平并使背景变为纯白色，您不希望这样吗？

您需要做的是确定图像是否具有或可能具有透明度，然后将背景颜色设置为无。使图像变平，因此在这些情况下`-extent`，为了保持背景的透明度。`None`（而且，如前所述，您当然需要使用 png 或 gif 输出而不是 jpg，因为 jpeg 无法处理透明度。）通常我会进行简单的扩展检查，因为它在大多数情况下已经足够好了，[但还有更详细的检查](http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=18596)。

```
$background = preg_match('/\.gif$|\.png$/', $thumbnailFilename) == 1 ? 'None' : 'white';
$edge = shell_exec("convert $imgFile -resize 1024x724 -background $background -gravity center -extent 1024x724 -quality 90 $thumbnailFilename"); 
```

我在这里检查输出缩略图，因为如果您要输出到 jpeg，无论来源如何，它都会被剥夺透明度。有了这个，如果您提供`$imgFile`test-transparent1.png 和`$thumbnailFilename`test-transparent1.sized.png，则 test-transparent1.sized.png 的大小应该适合 1024x724 并用透明像素填充，以便原始图像居中。

==编辑 ImageMagick PHP 类：==

首先，为了进行比例缩放，您需要将 scaleImage 的最佳拟合参数设置为 true。此外，在您使用 API 时，extentImage 似乎根本不使用重力选项，因此我们必须使用负 X 或 Y 偏移来将图像正确居中在新画布上。这是我的测试脚本在我开始工作后的样子：

```
<?php
$targetFile = 'mizu.png';
$targetThumb = 'mizu.thumb.png';

$background = preg_match('/\.gif$|\.png$/', $targetThumb) == 1 ? 'None' : 'white';

$img = new Imagick($targetFile);

$img->scaleImage(150,150,true);
$img->setImageBackgroundColor($background);
$w = $img->getImageWidth();
$h = $img->getImageHeight();
$img->extentImage(150,150,($w-150)/2,($h-150)/2);
$img->writeImage($targetThumb); 
```

==根据评论更新：==

对于那些在 6.5.7-8 之后得到这个答案并使用 imagemagick 的人，需要调整这个答案，使 extentImage x 和 y 值为负数。您可以在[php.net/manual/en/imagick.extentimage.php](https://php.net/manual/en/imagick.extentimage.php)上查看警告说明- 由 Jeff Richards 提供

# delphi - Delphi 从许多编辑中读取

> ID：15176395
> 
> 赞同：1
> 
> 时间：2013-03-02T15:55:57.023
> 
> 标签：delphi, pascal

有没有可能改变这样的事情：

```
myfunction(1,1,strtoint(form1.a11.text));
myfunction(1,2,strtoint(form1.a12.text));
myfunction(1,3,strtoint(form1.a13.text));
myfunction(1,4,strtoint(form1.a14.text));
myfunction(1,5,strtoint(form1.a15.text));
myfunction(1,6,strtoint(form1.a16.text));
myfunction(1,7,strtoint(form1.a17.text));
myfunction(1,8,strtoint(form1.a18.text));
myfunction(1,9,strtoint(form1.a19.text)); 
```

像这样的东西？：

```
 for i:=1 to 9 do
      myfunction(1,i,strtoint(form1.'a1'+i.text)); 
```

我知道这行不通，但我想找到更快的方法。类似的东西

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T15:58:39.937

您可以使用`FindComponent`按名称定位组件。这假定组件由表单对象拥有。这是一个有效假设的可能性很高。

```
(form1.FindComponent('a1'+IntToStr(i)) as TEdit).Text 
```

我个人不喜欢这种代码。我会创建一组编辑控件：

```
type
  TForm1 = class
  ....
  private
    FEditArr: array [1..9] of TEdit;
  .... 
```

然后在构造函数中初始化数组：

```
FEditArr[1] := a11;
FEditArr[2] := a12;
.... 
```

这使得随后获得给定索引的编辑控件的代码更加清晰。

如果您沿着这条路线走，那么在运行时创建编辑控件也可能更容易，而不是必须在设计器中创建它们，然后在构造函数中编写该数组分配代码。概括地说，它看起来像这样。

```
for i := 1 to 9 do
begin
  FEditArr[i] := TEdit.Create(Self);
  FEditArr[i].Parent := Self;
  FEditArr[i].Left := ...;
  FEditArr[i].Top := ...;
end; 
```

# apache - Codeigniter 只能访问根目录下的 url

> ID：15176396
> 
> 赞同：0
> 
> 时间：2013-03-02T15:56:16.393
> 
> 标签：apache, codeigniter

两天前我在 VPS 上有一个由 codeigniter 编写的网站，我重新安装了操作系统并想恢复整个网站。

我复制了所有原始设置。

我将 vritaul 主机文件粘贴为原始文件。/etc/apache2/sites-available/default 并将整个站点的数据放在同一系统路径 /home/www/MYSITE

但是，它不起作用。

我可以确定它可以正确访问网站的子路径，但无法通过 base_url 访问网站

你们可以试试[http://www.tao2tw.com/assets/images/VIP.jpg](http://www.tao2tw.com/assets/images/VIP.jpg) 和试试[http://www.tao2tw.com/](http://www.tao2tw.com/)

有我的问题....我不知道...我恢复完整的原始设置。

我没有更改 .htaccess 文件（保持原样）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:22:28.297

The problem isn't with the files, the problem is within the database.

Have you imported the database to your server? The name is the same? And the credentials? Check the config file database.php and see if everything matches

# c# - 使用 Type 参数实例化泛型集合

> ID：15176399
> 
> 赞同：5
> 
> 时间：2013-03-02T15:56:39.197
> 
> 标签：c#, generics, reflection

如何通过向构造函数提供 System.Type 值来实例化 a `List<Foo>`or在运行时？`List<Bar>`这个问题必须回答很多次，但我找不到。

最终，我想做一个像这样的扩展方法：

```
public static IEnumerable<T> CreateEnumerable<T>(this System.Collections.IEnumerable list, Type type){
    var stuff = something;

    // magic happens to stuff where stuff becomes an IEnumerable<T> and T is of type 'type'

    return stuff as IEnumerable<T>;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-02T15:59:14.990

您可以`List<>`在运行时使用反射和[`MakeGenericType`](http://msdn.microsoft.com/en-us/library/system.type.makegenerictype.aspx)方法指定参数。

```
var typeParam = typeof(Foo);
var listType = typeof(List<>).MakeGenericType(typeParam); 
```

然后使用[`Activator`](http://msdn.microsoft.com/en-us/library/system.activator.aspx)类实例化它

```
var list = Activator.CreateInstance(listType); 
```

但是，如果您只想将 an`IEnumerable`变成 an `IEnumerable<T>`，则 Linq 已经有方法 ([`Cast`](http://msdn.microsoft.com/en-us/library/bb341406.aspx)和[`OfType`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)) 来执行此操作：

```
IEnumerable untypedList = ...

var foos = untypedList.Cast<Foo>(); // May throw InvalidCastException
var bars = untypedList.OfType<Bar>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:16:14.070

您不能在逻辑上使`Type type`参数与`< T >`通用参数匹配。

扩展方法必须返回非泛型`IEnumerable`。

有可能使这个语法`IEnumerable`实际上（在运行时）拥有一个泛型`IEnumerable < That particular type >` ，但执行您的扩展方法的用户程序员必须做出假设、检查和强制转换。

`InvalidCastException`请注意，如果您走这条路并且用户程序员不知道这些事情，您可能最终会遇到:)。

它是这样的：

```
public static class SomeExtensions {

    private static readonly MethodInfo methodDefOf_PrivateHelper = typeof(SomeExtensions)
        .GetMethod("PrivateHelper", 
                   BindingFlags.NonPublic | BindingFlags.Static, 
                   Type.DefaultBinder, 
                   new [] { typeof(System.Collections.IEnumerable) }, 
                   null);

    private static IEnumerable<T> PrivateHelper<T>(System.Collections.IEnumerable @this){
        foreach (var @object in @this)
            yield return (T)@object; // right here is were you can get the cast exception
    }

    public static System.Collections.IEnumerable DynamicCast(
        this System.Collections.IEnumerable @this,
        Type elementType
    ) {
        MethodInfo particularizedMethod = SomeExtensions.methodDefOf_PrivateHelper
            .MakeGenericMethod(elementType);

        object result = particularizedMethod.Invoke(null, new object[] { @this });
        return result as System.Collections.IEnumerable;
    }

} 
```

以下是你如何使用它：

```
object[] someObjects = new object[] { "one", "two", "three" };
IEnumerable implicitlyCastedToEnumerable = someObjects;

Type unknownType = (DateTime.Now.Hour > 14) ? typeof(string) : typeof(int);

IEnumerable apparentlyNothingHappenedHere 
    = implicitlyCastedToEnumerable.DynamicCast(unknownType);

// if it's not after 14:00, then an exception would've jumped over this line and
// straight out the exit bracket or into some catch clause

// it it's after 14:00, then the apparentlyNothingHappenedHere enumerable can do this:
IEnumerable<string> asStrings = (IEnumerable<string>)apparentlyNothingHappenedHere;

// whereas the earlier would've cause a cast exception at runtime
IEnumerable<string> notGoingToHappen = (IEnumerable<string>)implicitlyCastedToEnumerable; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T17:19:59.443

这可能会奏效

```
public static IEnumerable<T> CreateEnumerable<T>(this IEnumerable list, Type type) {
    var stuff=something;

    var temp=stuff;
    stuff=Array.CreateInstance(type, count) as T[]; 
    // copy elements to stuff
    return stuff as IEnumerable<T>;
} 
```

但是，不能保证`T`是 type `type`。看签名`CreateEnumerable<T>`：

```
public static IEnumerable<T> CreateEnumerable<T>(this IEnumerable list, Type type) 
```

没有`T`从参数来推断调用哪个泛型方法，也就是说，当你想调用它时需要指定一个类型参数。我认为这`T`是多余的，而是

```
public static IEnumerable CreateEnumerable(this IEnumerable list, Type type) {
    var stuff=something;

    var temp=stuff;
    stuff=Array.CreateInstance(type, count);
    // copy elements to stuff
    return stuff as IEnumerable;
} 
```

请注意，我不知道`count`您想要什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T16:05:14.207

您的扩展方法已经是通用的。只需调用构造函数。

```
var list = new List<T>(); 
```

如果您想将非泛型 IEnumerable 转换为泛型，System.Linq 中已经有相应的方法。

```
return list.Cast<T>(); 
```

# java - Libgdx 撇号未呈现

> ID：15176405
> 
> 赞同：0
> 
> 时间：2013-03-02T15:57:25.907
> 
> 标签：java, text, fonts, render, libgdx

我正在尝试在 libgdx 中渲染文本，但是我的撇号没有被渲染。

我尝试过的事情：

*   切换字体（我试过 Arial，所以不是字体）
*   检查位图图形以确保它实际上有一个图形
*   导入 .ttf 文件并使用 FreeTypeFontGenerator 即时生成位图字体
*   将字符串打印到控制台以确保撇号在字符串中是偶数

我被难住了，我不知道。任何想法/解决方案表示赞赏！

非常感谢。

```
FreeTypeFontGenerator fontGenerator = new FreeTypeFontGenerator(Gdx.files.internal("mainFont.ttf"));
mainFontSmall = fontGenerator.generateFont(32); 
```

然后稍后在渲染更新中

```
System.out.println(level.introText);
mainFontSmall.setColor(0,0,0,introAlpha);
mainFontSmall.setScale(1f);
mainFontSmall.draw(sprites, level.introText, 50, 50); 
```

# git - 需要有关使用 git 和 bitbucket 的帮助

> ID：15176408
> 
> 赞同：0
> 
> 时间：2013-03-02T15:57:50.157
> 
> 标签：git, github, bitbucket

我在 bitbucket 中创建了一个存储库。现在我要在我的电脑上写一个java项目。问题是，我应该怎么做才能将文件放入 bitbucket？也就是说，我是不是要在eclipse里写我的程序，然后把.java文件复制到我电脑的项目文件夹中，然后使用**git add**和**git commit**命令呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:02:41.777

在 bitbucket 中创建一个新的存储库。当您到达最后一个屏幕时，它会询问您是否要导入现有项目。
选择导入，它将为您提供在计算机上键入以创建“远程”的命令以及将更改推送到远程 bitbucket 存储库的命令。

更多详细信息，请访问[https://confluence.atlassian.com/display/BITBUCKET/Importing+code+from+an+existing+project#Importingcodefromanexistingproject-Importanexisting,unversionedcodeprojecttoanemptyrepository](https://confluence.atlassian.com/display/BITBUCKET/Importing+code+from+an+existing+project#Importingcodefromanexistingproject-Importanexisting,unversionedcodeprojecttoanemptyrepository)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T02:28:28.967

你需要推它。。

git remote add origin git@git:Projectname.git

git push -u 起源大师

# twitter-bootstrap - 引导模式不会出现在 Meteor 中

> ID：15176413
> 
> 赞同：8
> 
> 时间：2013-03-02T15:58:31.013
> 
> 标签：twitter-bootstrap, modal-dialog, meteor

我正在尝试让 Bootsrap 的模式工作，但是当我单击按钮时，我得到的只是一个黑屏，没有出现我期望的模式对话框。我正在使用流星。

这是我的代码：

```
<div class="container">
    <h2>Example of creating Modals with Twitter Bootstrap</h2>
    <div class="modal hide fade in" id="example" style="display: none; ">
        <div class="modal-header">
            <a class="close" data-dismiss="modal">×</a>
            <h3>This is a Modal Heading</h3>
        </div>
        <div class="modal-body">
            <h4>Text in a modal</h4>
            <p>You can add some text here.</p>
        </div>
        <div class="modal-footer">
            <a class="btn btn-success" href="#">Call to action</a>
            <a class="btn" data-dismiss="modal" href="#">Close</a>
        </div>
    </div>
    <p><a data-toggle="modal" href="#example" class="btn btn-primary btn-large">Launch
        demo modal</a></p>
</div> 
```

出于测试目的，我基本上从以下网址获得了代码：[http ://www.w3resource.com/twitter-bootstrap/modals-tutorial.php。](http://www.w3resource.com/twitter-bootstrap/modals-tutorial.php)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-02T05:27:00.913

我有一个类似的问题。问题在于 Meteor 和 Bootstrap 工作方式的根本区别。Meteor 假定标记可以随时重新加载。如果任何实时变量发生变化，Meteor 只会重新加载模板。另一方面，Bootstrap 假设模板只会被加载一次，并且在运行时使用 javascript 对其进行修改。

正在发生的事情是流星正在加载我的模态模板。在某些时候，我正在单击某些东西，这会导致该模式出现在 javascript 中。然而，片刻之后，一个实时变量发生了变化，导致模板再次加载。由于模板隐藏了模式，它覆盖了只是试图显示模板的 javascript。

我通过将模态的内部放在与外部不同的模板中解决了这个问题。外部模板不响应任何实时变量，因此希望它永远不会被重新加载。

前：

```
<template name="modal">      
  <div class="modal hide fade in" id="settings-modal" data-backdrop="false">
    <div class="modal-header">
    ...
</template> 
```

后：

```
<template name="modal">      
  <div class="modal hide fade in" id="settings-modal" data-backdrop="false">
    {{> modalInner}}
  </div>
</template>      

<template name="modalInner">
  <div class="modal-header">
    ...
</template> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-17T23:58:57.343

这是一个示例应用程序，它展示了如何使用 Meteor 显示引导模式：

*   [https://github.com/alanning/meteor-modal-example](https://github.com/alanning/meteor-modal-example)

您可以在此处查看实时版本：

*   [http://modal-example.meteor.com/](http://modal-example.meteor.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-20T03:57:06.990

我已经找到了一个不错的解决方案——我的 Modal 是它自己的模板和一个会话变量控制它是否被显示。在它被“渲染”之后，我触发引导程序的 JS 来“打开”它。

```
...
{{#if getSession 'isRegisterConfirmation'}}
  {{> registerConfirm}}
{{/if}}
</template>

<template name="registerConfirm">
<div class="modal registerConfirmModal">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Confirm Name / Info</h3>
  </div>
  <div class="modal-body">
    You are registering as
    ... 
```

棘手的部分是将 Meteor 和 Bootstrap 之间的事件联系起来。

*   在 Meteor 渲染 -> 触发 Bootstrap 模态显示
*   在 Bootstrap Modal 上隐藏 -> 从 Meteor 清除会话变量

这实际上效果很好，这是我正在做的事情的简化版本......

```
Template.registerConfirm.rendered = function() {
  var thing = Session.get('thingToConfirm');
  $('.registerConfirmModal').on('hidden', function() {
    Session.set('thingToConfirm', '');
    Session.set('isRegisterConfirmation', false);
  });
  $('.registerConfirmModal').on('shown', function() {
    $('.registerConfirmModal button.confirm').focus();
  });
  $('.registerConfirmModal').modal('show');
}; 
```

然后触发模态就像将会话变量设置为true一样简单......所有其余的交换都基于事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-04T20:09:58.007

我遇到了同样的问题。我从模态中删除了“隐藏”类，然后它就起作用了。 **我还必须在同一个模板中包含模式以及激活它的链接。**

代替

```
<div class="modal hide fade in" id="example" style="display: none; "> 
```

尝试这个

```
<div class="modal fade" id="example" style="display: none;"> 
```

# magento - 如何在 Magento 客户地址模型中获取最后插入的 id

> ID：15176418
> 
> 赞同：7
> 
> 时间：2013-03-02T15:58:53.743
> 
> 标签：magento

我将客户地址保存在`customer_address_entity`表中。一切都很好，但我想得到最后生成的`entity_id`. 有人可以帮助我吗？

我有以下代码；

```
 $customAddress = Mage::getModel('customer/address');

         $customAddress->setData($_custom_address)
            ->setCustomerId($customer->getId())
            ->setIsDefaultBilling('0')
            ->setIsDefaultShipping('1')
            ->setSaveInAddressBook('1');

         try {
           $customAddress->save();
         } catch (Exception $ex) {
              Mage::log("\n Address save Error:: \n" . $ex->getMessage(), null, $this->log_entry_file);
       } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-11-12T10:52:11.740

1 - 使用模型时，这将返回最近添加/保存的项目 ID 由 $model 对象

```
 $model->getId() 
```

2 - 但是当使用自定义查询时，然后使用以下来获取最后插入的 id

```
$connection    = Mage::getSingleton(’core/resource’)->getConnection(’core_write’);
$sql         = "INSERT INTO <table> SET field1 = ?, field2 = ?, ...";
$connection->query($sql, array($field1_value, $field2_value, ...));
$lastInsertId = $connection->lastInsertId();
echo $lastInsertId; 
```

3 - 从特定表中，通过定义自己的函数获取最后插入的 id

```
 function getLastInsertId($tableName, $primaryKey)
   {
    //SELECT MAX(id) FROM table
    $db = Mage::getModel('core/resource')->getConnection('core_read');
    $result = $db->raw_fetchRow("SELECT MAX(`{$primaryKey}`) as LastID FROM `{$tableName}`");
    return $result['LastID'];
   } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-02T16:18:33.533

保存使用后获取id`getId()`

```
...
try {
       $customAddress->save();
       echo $customAddress->getId(); 
 }
.... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-15T06:45:31.260

```
If you use magento save method than try this to get the last inssert id.

$order->save();
Afetr save method use getId method to get the last insert id in magento 
echo $order->getId(); 

//For custom connection use 
$db_write = Mage::getSingleton('core/resource')->getConnection('core_write');
$sqlQuery = "SELECT * FROM TABLE_NAME ";
$db_write ->query($sqlQuery);
echo $lastInsertId  = $db_write ->fetchOne('SELECT last_insert_id()'); 
                              OR

echo $db_write ->lastInsertId(); // you may also try this.

For more Info 
```

[点击这里](http://magentoo.blogspot.com/2014/01/get-last-insert-id-in-magento.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-30T11:54:28.773

使用以下代码解决您的查询：

```
$customer = Mage::getModel("customer/customer");
$customer   ->setWebsiteId($websiteId)
            ->setStore($store)
            ->setFirstname('John')
            ->setLastname('Doe')
            ->setEmail('jd1@ex.com')
            ->setPassword('somepassword');

            $address = Mage::getModel("customer/address");
            $address->setCustomerId($customer->getId())
            ->setFirstname($customer->getFirstname())
            ->setMiddleName($customer->getMiddlename())
            ->setLastname($customer->getLastname())
            ->setCountryId('HR')
            ->setPostcode('31000')
            ->setCity('Osijek')
            ->setTelephone('0038511223344')
            ->setFax('0038511223355')
            ->setCompany('Inchoo')
            ->setStreet('Kersov')
            ->setIsDefaultBilling('1')
            ->setIsDefaultShipping('1')
            ->setSaveInAddressBook('1');

        try{
            $address->save();
            $lastId = $address->getId(); // Last id
        }
        catch (Exception $e) {
            Zend_Debug::dump($e->getMessage());
        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-25T15:48:48.197

有一个magento方法：

```
$table = $model->getResource()->getMainTable();

$connection = Mage::getSingleton('core/resource')->getConnection();
$id = $connection->lastInsertId($tableName); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-10T12:57:02.527

```
$freeevent = Mage::getModel('freeevent/freeevent');
$freeevent->setData('firstname', $firstname);
$freeevent->setData('lastname', $lastname);
$freeevent->save();
$getLastId = $freeevent->getId(); 
```

使用此代码在 magento 中获取最后插入的 id。

# c++ - 改进背景减法

> ID：15176422
> 
> 赞同：0
> 
> 时间：2013-03-02T15:59:15.243
> 
> 标签：c++, opencv, image-processing

我正在从事视频处理项目以检测前景物体。下面是我的代码的一部分，用于分离前景和背景。

```
#include "opencv2/core/core.hpp"
#include "opencv2/video/background_segm.hpp"
#include "opencv2/highgui/highgui.hpp"
#include <stdio.h>

using namespace std;
using namespace cv;

//this is a sample for foreground detection functions
int main(int argc, const char** argv)
{

    VideoCapture cap;
    bool update_bg_model = true;

    cap.open(0);

    if( !cap.isOpened() )
    {
        printf("can not open camera or video file\n");
        return -1;
    }

    namedWindow("image", CV_WINDOW_NORMAL);
    namedWindow("foreground mask", CV_WINDOW_NORMAL);
    namedWindow("foreground image", CV_WINDOW_NORMAL);
    namedWindow("mean background image", CV_WINDOW_NORMAL);

    BackgroundSubtractorMOG2 bg_model;
    Mat img, fgmask, fgimg;

    for(;;)
    {
        cap >> img;

        if( img.empty() )
            break;

        if( fgimg.empty() )
          fgimg.create(img.size(), img.type());

        //update the model
        bg_model(img, fgmask, update_bg_model ? -1 : 0);

        fgimg = Scalar::all(0);
        img.copyTo(fgimg, fgmask);

        Mat bgimg;
        bg_model.getBackgroundImage(bgimg);

        imshow("image", img);
        imshow("foreground mask", fgmask);
        imshow("foreground image", fgimg);
        if(!bgimg.empty())
          imshow("mean background image", bgimg );

        char k = (char)waitKey(30);
        if( k == 27 ) break;
        if( k == ' ' )
        {
            update_bg_model = !update_bg_model;
            if(update_bg_model)
                printf("Background update is on\n");
            else
                printf("Background update is off\n");
        }
    }

    return 0;
} 
```

在前景蒙版窗口中，我得到了很多噪声以及实际的前景对象。完整的对象也被识别为前景。我还需要用矩形绑定前景对象。如果我在前景蒙版中绘制轮廓，Wil BoundRect() 会完成这项工作吗？...还有什么是最推荐在查找轮廓时传递的参数（findcontour()）和 BoundRect 函数...提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-13T04:57:34.607

回答太晚了，但我希望这对其他人有帮助。

以像素完美的方式将视频中的前景与背景分离（对背景没有任何限制）是一个非常困难的问题。很多研究工作已经进入这个领域，而且还有很大的空间。因此，简单的高斯混合（BackgroundSubtractorMOG2 使用的）可能不会给您非常准确的结果。噪声几乎是不可避免的，因为 MOG 的决定是基于颜色提示的，并且背景中的某些像素可能适合它制作的高斯模型。

这些作为前景的像素有效地代表了变化。因此，如果您修改背景模型的学习率，您可以密切跟踪正在移动的像素。如果您可以假设您的背景是相当静态的，那么移动的像素将代表您的前景，并且可以在一定程度上帮助您解决问题。

我还建议在 openCV 中使用 BackgroundSubtractorGMG 函数。该函数从前几帧（数量可设置）中学习一个背景模型。如果可能的话，让前几帧没有前景。你可能会取得不错的成绩。

# php - Symfony2 自定义存储库类

> ID：15176424
> 
> 赞同：7
> 
> 时间：2013-03-02T15:59:16.820
> 
> 标签：php, symfony, doctrine-orm, repository, entity

我是 symfony2 的新手，我正在尝试创建自定义存储库类并且无法做到。

这是我正在做的事情：

*   我在实体类（ MobilePhones ）中添加了注释

> @ORM\Entity(repositoryClass="Maak\DefaultBundle\Entity\MobilePhonesRepository")

*   在 MobilePhonesRepository 我创建了名为`findAllMobilePhones()`

*   在控制器中，我使用以下方法调用函数：

> $em->getRepository('MaakDefaultBundle:MobilePhones')->findAllMobilePhones();

但我明白`Undefined method findAllMobilePhones()`了，我已经清除了缓存并尝试了同样的错误。怎么了？

**我的存储库类：**

```
<?php

namespace Maak\DefaultBundle\Entity;
use Doctrine\ORM\EntityRepository;

class MobilePhonesRepository extends EntityRepository
{
    public function findAllMobilePhones()
    {
        return $this->getEntityManager()->createQuery('SELECT p FROM AcmeStoreBundle:Product p ORDER BY p.name ASC') ->getResult();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:58:57.520

感谢所有人的时间。最后我找到了问题所在。

我决定调试整个项目，发现`repository-class`没有在要在元数据中设置的 XMLDriver 中设置`customRepositoryName`。这是因为我使用的是 XML 映射，并且我`repositoryClass`使用 Annotations 来提供这个实体。

再次感谢:)

# javascript - 为什么这条路线行不通？

> ID：15176426
> 
> 赞同：0
> 
> 时间：2013-03-02T15:59:24.777
> 
> 标签：javascript, express, routes

我正在使用 Express 尝试使用以下代码创建基本路线。

```
app.get('/name/:name', function(req, res) {
  var response = req.params.name;
  if (response == '') {
    response = 'Hello unknown person!';
  } 
  else {
    response = 'Hello ' + req.parans.name;
  }
  res.send(response)
}); 
```

但我不断收到错误。

`500 TypeError: Cannot read property 'name' of undefined`

我不知道为什么它不起作用：/有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:01:19.150

更改`req.parans.name`为`req.params.name`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T16:01:38.157

您在 else 块中拼错了 params “parans”。

# java - java - 如何使用audioinputstream java获取下载文件的进度

> ID：15176440
> 
> 赞同：0
> 
> 时间：2013-03-02T16:00:19.530
> 
> 标签：java, progress-bar

我是使用 java 下载文件的新手，如果这是一个愚蠢的问题，我很抱歉，但我已经搜索了 2 天，但找不到解决方案。我在小程序中使用 JPanel，我想在进度条中显示下载进度。（也许下载不是正确的词，它更可能是初始化）

我想要的是显示从 URL 下载 wav 文件的过程。我并不是要显示读取过程（我会让用户知道该文件稍后正在处理。）我只是想获得进度*ais=AudioSystem.getAudioInputStream(url);*

我尝试使用*ProgressMonitorInputStream*但这对我不起作用，因为我想将进度条添加到我的 JFrame 中。我一直在寻找*swingWorker*，但它的使用并没有给我想要的进步。

这是我的阅读功能。我还根据我的需要更改 wav 格式。

```
 public void readFile() {

    byte[] data = null;
    AudioInputStream ais = null;
    try {
        URL url = new URL("http://www-mmsp.ece.mcgill.ca/documents/AudioFormats/WAVE/Samples/AFsp/M1F1-Alaw-AFsp.wav");
        ais = AudioSystem.getAudioInputStream(url);

        AudioFormat format = ais.getFormat();
        numberOfChannels = format.getChannels();

        AudioFormat TargetFormat = new AudioFormat(format.getSampleRate(), 16, numberOfChannels, true, false);
        AudioInputStream desiredFormatStream = AudioSystem.getAudioInputStream(TargetFormat,ais);
        data = new byte[4];
        int totalSampleCount = ais.available()/(format.getSampleSizeInBits()/8);

        audio = new double[totalSampleCount];
        for (int i = 0; i < totalSampleCount-1; i=i+2) {
            desiredFormatStream.read(data);

                if(!TargetFormat.isBigEndian()){
                    audio[i] = ((short) (((data[1] & 0xFF) << 8) + (data[0] & 0xFF))) / ((double) MAX_16_BIT);
                    audio[i+1] = ((short) (((data[3] & 0xFF) << 8) + (data[2] & 0xFF))) / ((double) MAX_16_BIT);
                }
                else {
                    audio[i] = ((short) (((data[0] & 0xFF) << 8) + (data[1] & 0xFF))) / ((double) MAX_16_BIT);
                    audio[i+1] = ((short) (((data[2] & 0xFF) << 8) + (data[3] & 0xFF))) / ((double) MAX_16_BIT);
                }

        }

        StdAudio.open(TargetFormat);

    } catch (Exception e) {
        System.out.println(e.getMessage());
        throw new RuntimeException("Could not read " + filename);
    }
} 
```

有什么办法可以做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:28:49.197

[`URLConnection`](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html)最简单的方法是在您已经存在的对象上打开一个`URL`并查询`Content-Length`http-header 字段。使用[`getContentLength()`- 方法](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#getContentLength())执行此操作。

> **注意**如果您正在下载大文件，则`int`可能不足以容纳内容长度。因此， [`getContentLengthLong()`](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#getContentLengthLong%28%29)应该首选。此方法 **从 Java 7 开始可用**。

这将保存文件的长度（以字节为单位）。当您通过 阅读时[`AudioInputStream.read()`](http://docs.oracle.com/javase/6/docs/api/javax/sound/sampled/AudioInputStream.html#read%28byte%5B%5D,%20int,%20int%29)，此方法将返回每次读取的实际字节数。

**伪代码**

```
long totalLength = con.getContentLengthLong();
while still reading{
  long totalBytesRead += in.read();
  print "Process: "+(totalBytesRead * 100 / totalLength);
} 
```

**另见**：

*   与使用内容长度的示例[类似的问题](https://stackoverflow.com/q/263013/717341)
*   关于[使用无缓冲](http://codeisland.org/2012/working-unbuffered-streams/)流的文章

# mono - 将 RestSharp.MonoDroid 添加到解决方案

> ID：15176444
> 
> 赞同：2
> 
> 时间：2013-03-02T16:00:29.220
> 
> 标签：mono, restsharp, xamarin

对不起初学者的问题，但我不熟悉单声道。我需要为in创建`REST`客户端，并且我想将框架添加到解决方案中。我该怎么做？在Java中，我只是将jar文件添加到项目中，不知道我是怎么做的。我已经下载了解决方案。`Android``Xamarin``RestSharp``RestSharp.Monodroid`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T00:56:08.647

I am assuming that you are using Visual Studio 2010 as an IDE. If yes, then this answer applies.

Right click on the project in which you want to use RestSharp library then click on **Add Reference...** and browse for RestSharp dll. This is how you add references in Visual Studio.

# android - 制作在Android中虚拟化项目的滚动gridview的最佳方法是什么？

> ID：15176445
> 
> 赞同：0
> 
> 时间：2013-03-02T16:00:31.970
> 
> 标签：android, gridview, android-arrayadapter, android-adapter

我想使用可以轻松显示 500 个项目的网格视图。就像每行 3 个项目和许多行一样。我不希望 gridview 拥有真正的 500 个项目。例如，如果屏幕一次可以显示 15 个项目，我希望它重用这些项目并将其内容替换为与当前滚动位置对应的项目。（如 iOS 中的 TableView 或 Windows 8 和 Windows Phone 8 中的虚拟化面板）。

把它想象成一个照片应用程序，它在 3 列中列出照片，你甚至可以滚动 1000 个项目或 5000 个项目（它只需要用户自己的时间滚动到那个深度，我只是希望视图能够独立处理项目他们的计数）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:24:46.117

我有好消息要告诉你！适配器模式正是为此目的而构建的。

> **Adapter** - Adapter 对象充当 AdapterView 和该视图的基础数据之间的桥梁。适配器提供对数据项的访问。Adapter 还负责为数据集中的每一项创建一个 View。[请参阅此处了解更多信息](http://developer.android.com/reference/android/widget/Adapter.html)。

* * *

> **GridView** - [GridView](http://developer.android.com/guide/topics/ui/layout/gridview.html)是一个[ViewGroup](http://developer.android.com/reference/android/view/ViewGroup.html)，它在二维、可滚动的网格中显示项目。网格项使用[ListAdapter](http://developer.android.com/reference/android/widget/ListAdapter.html)自动插入到布局中。有关如何使用适配器动态插入视图的介绍，请阅读使用适配器[构建布局。](http://developer.android.com/guide/topics/ui/declaring-layout.html#AdapterViews)

使用这些页面中显示的示例来了解如何将 GridView 与适配器一起使用，然后修改适配器的示例代码以从您想要的任何位置而不是从 加载图片`R.drawables`。

特别注意 ListAdapter`getView()`方法中的部分，尤其是`View convertView`传递给`getView()`. 如果可能，该参数将是“回收”视图。（一个完全退出屏幕的。因此使用时间更长）因此，通过重新使用它而不是`new`每次创建视图，您可以滚动浏览数千个项目的列表，同时仍然只使用多少 View 对象它需要显示一个完整的屏幕价值。

# java - ECB 模式下的 RSA 加密

> ID：15176447
> 
> 赞同：3
> 
> 时间：2013-03-02T16:00:46.497
> 
> 标签：java, encryption, rsa, ecb

我的代码有问题。

我想要做的是使用 ECB 模式加密文件（意思是加密文本块而不链接到下一个块）。

它有时可以完美地工作，但有时却不能。当它加密 128 字节的数据并写入 129 字节时，就会出现问题。它会在第一次这样做之前完美地工作，但随后解密将被关闭一个字节，并将一切搞砸。我知道这一点，因为当它出错时，您可以看到密码（在第 88 行，一个字节数组）的长度为 129，而不是 128，然后将其写入文件。

这是我的意思的一个例子：加密：testtesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttest

输出：testtesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttest(500字节的乱码数据)

我附上了我的整个代码；为了快速运行，我启用了解密以在加密后立即生成到标准输出。

所以只需运行： -k key （将生成 key.public 和 key.private） -e key.public -i input -o output （将加密一些文件输入并将其存储在输出中，读取该文件，解密它，发送到标准输出）。

任何帮助，将不胜感激！

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.math.BigInteger;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.Arrays;
import java.util.Scanner;
import java.io.*;
import java.util.List;
import java.util.Random;

public class RSA {

    public static void main(String[] args) throws UnsupportedEncodingException {
        List<String> list = Arrays.asList(args);
        if(list.contains("-h")) {
            System.out.println("Usage:");
            System.out.println("RSA -h - View command-line arguments.");
            System.out.println("RSA -k <key file> -b <bit size> - Generate public/private keyfiles of size <bit size>.");
            System.out.println("RSA -e <key file>.public -i <input file> -o <output file> - Encrypt <input file> with key <key file>, store in <output file>.");
            System.out.println("RSA -d <key file>.private -i <input file> -o <output file> - Decrypt <input file> with key <key file>, store in <output file>.");
        } else if (list.contains("-k")) {
            String key_file = "";
            try {
                key_file = list.get(list.indexOf("-k") + 1);
                if(key_file.equals("-b")) {
                    System.out.println("Usage:");
                    System.out.println("RSA -k <key file> -b <bit size> - Generate public/private keyfiles of size <bit size>.");
                    System.exit(1);
                }
            } catch (ArrayIndexOutOfBoundsException e) {
                System.out.println("Usage:");
                System.out.println("RSA -k <key file> -b <bit size> - Generate public/private keyfiles of size <bit size>.");
                System.exit(1);
            }
            int bit_size = 0;
            if(!list.contains("-b")) {
                bit_size = 1024;
            } else {
                try {
                    bit_size = Integer.parseInt(list.get(list.indexOf("-b") + 1));
                } catch(ArrayIndexOutOfBoundsException e) {
                    System.out.println("Usage:");
                    System.out.println("RSA -k <key file> -b <bit size> - Generate public/private keyfiles of size <bit size>.");
                    System.exit(1);
                }
            }

            generate_key(bit_size, key_file);

        } else if (list.contains("-e")) {
            //get input file and output file
            String input_file = "";
            String key_file = "";
            String output_file = "";
            try {
                input_file = list.get(list.indexOf("-i") + 1);
                output_file = list.get(list.indexOf("-o") + 1);
                key_file = list.get(list.indexOf("-e") + 1);
            } catch (ArrayIndexOutOfBoundsException e) {
                System.out.println("Usage:");
                System.out.println("RSA -e <key file>.public -i <input file> -o <output file> - Encrypt <input file> with key <key file>, store in <output file>.");
                System.exit(1);
            }

            String public_key = read_file(key_file);
            String private_key = read_file("key.private");

            BigInteger public_modulus = new BigInteger(public_key.substring(1, public_key.indexOf(',')));
            BigInteger public_exponent = new BigInteger(public_key.substring(public_key.indexOf(',') + 1, public_key.length() - 1));

            byte[] file = read_bytes(input_file);
            byte[] cipher = new byte[128];
            byte[] decrypted = new byte[128];

            BigInteger d = new BigInteger(private_key.substring(1, private_key.indexOf(',')));
            BigInteger modulus = new BigInteger(private_key.substring(private_key.indexOf(',') + 1, private_key.length() - 1));

            write_file(output_file, "", false);
            int index = 0;
            while (index<file.length) {
                byte[] block = Arrays.copyOfRange(file, index, index+128);
                cipher = new BigInteger(block).modPow(public_exponent, public_modulus).toByteArray();
                append_bytes(output_file, cipher);
                index+=128;
            }

            byte[] encrypted = read_bytes(output_file);

            index = 0;
            while(index < encrypted.length) {
                byte[] block = Arrays.copyOfRange(encrypted, index, index+256);
                decrypted =  new BigInteger(block).modPow(d, modulus).toByteArray();
                System.out.println(new String(decrypted));
                index+= 256;
            }

        } else if (list.contains("-d")) {
            /*String input_file, output_file, key_file;
            input_file = output_file = key_file = "";

            try {
                input_file = list.get(list.indexOf("-i") + 1);
                output_file = list.get(list.indexOf("-o") + 1);
                key_file = list.get(list.indexOf("-d") + 1);
            } catch (ArrayIndexOutOfBoundsException e) {
                System.out.println("Usage:");
                System.out.println("RSA -d <key file>.private -i <input file> -o <output file> - Decrypt <input file> with key <key file>, store in <output file>.");
                System.exit(1);
            }

            String private_key = read_file(key_file).toString();
            BigInteger d = new BigInteger(private_key.substring(1, private_key.indexOf(',')));
            BigInteger modulus = new BigInteger(private_key.substring(private_key.indexOf(',') + 1, private_key.length() - 1));

            byte[] encrypted = null;
            /* todo */

        } else {
            System.out.println("Usage:");
            System.out.println("RSA -h - View command-line arguments.");
            System.out.println("RSA -k <key file> -b <bit size> - Generate public/private keyfiles of size <bit size>.");
            System.out.println("RSA -e <key file>.public -i <input file> -o <output file> - Encrypt <input file> with key <key file>, store in <output file>.");
            System.out.println("RSA -d <key file>.private -i <input file> -o <output file> - Decrypt <input file> with key <key file>, store in <output file>.");
        }
    }

    private static void generate_key(int bit_size, String key_file) {
        BigInteger p = BigInteger.probablePrime(bit_size, new Random());
        BigInteger q = BigInteger.probablePrime(bit_size, new Random());

        BigInteger one = new BigInteger("1");
        BigInteger phi = new BigInteger("1");
        BigInteger e = new BigInteger("65537");

        boolean done = false;

        while(!done) {
            BigInteger temp = p.subtract(one);
            BigInteger temp2 = q.subtract(one);
            phi = (temp.multiply(temp2));
            if(phi.gcd(e).equals(one)) {
                done = true;
            } else {
                e = BigInteger.probablePrime(bit_size, new Random());
            }
        }

        BigInteger public_modulus = p.multiply(q);
        BigInteger public_exponent = e;
        BigInteger private_key = public_exponent.modInverse(phi); //d

        try {
            write_file(key_file + ".public", "(" + public_modulus + "," + e + ")", false);
            write_file(key_file + ".private", "(" + private_key.toString() + "," + public_modulus + ")", false);
        } catch (Exception ex) {
            System.out.println("Error creating key files.");
            System.exit(1);
        }

    }

    public static void write_bytes(String file_name, byte[] bytes) {
        try {
            FileOutputStream fos = new FileOutputStream(new File(file_name));
            fos.write(bytes);
            fos.close();
        } catch (IOException e) {
            System.out.println("Error writing bytes to file.");
            System.exit(1);
        }
    }

    public static String read_file(String file_name) {
        boolean is_key = false;
        if(file_name.contains(".public") || file_name.contains(".private"))
            is_key = true;

        Scanner sc = null;
        try {
            sc = new Scanner (new File(file_name));
        } catch (FileNotFoundException e) {
            System.out.println("Input file does not exist.");
            System.exit(1);
        }

        StringBuilder buf = new StringBuilder("");
        while (sc.hasNext ()) {
           buf.append (sc.nextLine());
           if(!is_key)
               buf.append("\n");
        }
        sc.close();
        return buf.toString();
    }

    public static byte[] read_bytes(String file_name) {
        Path path = Paths.get(file_name);
        byte[] encrypted = null;
        try {
            encrypted = Files.readAllBytes(path);
        } catch (IOException e) {
            System.out.println("Error reading bytes from " + file_name);
            System.exit(1);
        }
        return encrypted;
    }
    public static void append_bytes(String file_name, byte[] bytes) {
        try {
            OutputStream fos = new FileOutputStream(file_name, true);
            fos.write(bytes);
            fos.flush();
            fos.close();
        } catch (IOException e) {
            e.printStackTrace();
            System.out.println("Error appending bytes to file.");
            System.exit(1);
        }
    }

    public static void write_file(String file_name, String message, boolean append) {
        try {
            FileWriter fstream = new FileWriter(file_name, append);
            BufferedWriter out = new BufferedWriter(fstream);
            out.write(message);
            out.close();
        } catch (Exception e){
            System.out.println("Error writing to file.");
            System.exit(1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T16:42:51.103

ECB 是一种[分组密码操作模式](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)。[RSA](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)是一种[公钥加密方案](http://en.wikipedia.org/wiki/Public-key_cryptography)，而不是[分组密码](http://en.wikipedia.org/wiki/Block_cipher)。

通常，[直接使用 RSA 加密长消息是没有意义的](https://crypto.stackexchange.com/questions/14/how-can-i-use-asymmetric-encryption-such-as-rsa-to-encrypt-an-arbitrary-length)。相反，您将使用[混合加密：为](http://en.wikipedia.org/wiki/Hybrid_encryption)[AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)等对称密码选择随机密钥，使用对称密码加密消息，然后使用 RSA 加密对称密钥。

此外，在使用RSA 加密密钥时，请记住使用适当的填充方案，例如[OAEP ；](http://en.wikipedia.org/wiki/Optimal_asymmetric_encryption_padding)未填充的“教科书 RSA”不安全。（或者使用不需要填充的[RSA-KEM 之类的方案。）也不要对 AES 使用 ECB 模式；](http://en.wikipedia.org/wiki/Key_encapsulation)使用像 CBC 或 CTR 这样的语义安全模式，或者更好的是，使用经过[身份验证的加密](http://en.wikipedia.org/wiki/Authenticated_encryption)模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-17T18:55:53.680

问题是“BigInteger.toByteArray()”。这个字节数组需要进行后处理。数组的第一个元素带有符号位，其他字节被视为无符号。如果正数的最高有效位在第 7 位，则该方法添加前导 0 以表示正号。如果删除此 0 字节，则输出具有恒定的块大小。反过来，当从一个数组构造一个正 BigInteger 时，它需要一个前导零位 7。

关于密钥生成：q、p 有规律的半比特大小，“n = p*q”参见 [Wikipedia RSA Key Generation](https://en.wikipedia.org/wiki/RSA_(cryptosystem)#Key_generation)

关于安全性：如上所述，“教科书 RSA”对于流媒体并不安全。最低要求的修改是在每个块中添加一些随机字节“盐”。常见的 RSA 实现为此保留了大约 25% 的块大小。更好的是切换到操作模式[CBC](https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Cipher_block_chaining_(CBC))。

关于接受度：几乎没有可移植的加密算法适用于所有 Java 运行时提供程序和版本，每个变体都在不断开发，并且具有有限的生命周期。实现也是隐藏的，可能有后门。因因式分解问题的难度，自己做是可移植的、可追溯的和安全的，个别修改攻击者不知道。最后，性能不足是一个安全因素，例如，当您引入密码相关哈希时，暴力密码搜索无法及时成功。

# jquery - jQuery甘特图未初始化

> ID：15176450
> 
> 赞同：0
> 
> 时间：2013-03-02T16:01:00.827
> 
> 标签：jquery, gantt-chart

我不太确定为什么我的 jQuery Gantt 不起作用 - 我已经按照网站上看到的确切示例进行了操作。到目前为止，这是我的代码：

```
$(function () {

    "use strict";

    $(".gantt").gantt({
        source: [{
            name: "Sprint 0",
            desc: "Analysis",
            values: [{
                from: "/Date(1320192000000)/",
                to: "/Date(1322401600000)/",
                label: "Requirement Gathering",
                customClass: "ganttRed"
            }]
        }, {
            name: " ",
            desc: "Scoping",
            values: [{
                from: "/Date(1322611200000)/",
                to: "/Date(1323302400000)/",
                label: "Scoping",
                customClass: "ganttRed"
            }]
        }, {
            name: "Sprint 1",
            desc: "Development",
            values: [{
                from: "/Date(1323802400000)/",
                to: "/Date(1325685200000)/",
                label: "Development",
                customClass: "ganttGreen"
            }]
        }, {
            name: " ",
            desc: "Showcasing",
            values: [{
                from: "/Date(1325685200000)/",
                to: "/Date(1325695200000)/",
                label: "Showcasing",
                customClass: "ganttBlue"
            }]
        }, {
            name: "Sprint 2",
            desc: "Development",
            values: [{
                from: "/Date(1326785200000)/",
                to: "/Date(1325785200000)/",
                label: "Development",
                customClass: "ganttGreen"
            }]
        }, {
            name: " ",
            desc: "Showcasing",
            values: [{
                from: "/Date(1328785200000)/",
                to: "/Date(1328905200000)/",
                label: "Showcasing",
                customClass: "ganttBlue"
            }]
        }, {
            name: "Release Stage",
            desc: "Training",
            values: [{
                from: "/Date(1330011200000)/",
                to: "/Date(1336611200000)/",
                label: "Training",
                customClass: "ganttOrange"
            }]
        }, {
            name: " ",
            desc: "Deployment",
            values: [{
                from: "/Date(1336611200000)/",
                to: "/Date(1338711200000)/",
                label: "Deployment",
                customClass: "ganttOrange"
            }]
        }, {
            name: " ",
            desc: "Warranty Period",
            values: [{
                from: "/Date(1336611200000)/",
                to: "/Date(1349711200000)/",
                label: "Warranty Period",
                customClass: "ganttOrange"
            }]
        }],
        navigate: "scroll",
        scale: "weeks",
        maxScale: "months",
        minScale: "days",
        itemsPerPage: 10,
        onItemClick: function (data) {
            alert("Item clicked - show some details");
        },
        onAddClick: function (dt, rowId) {
            alert("Empty space clicked - add an item!");
        },
        onRender: function () {
            if (window.console && typeof console.log === "function") {
                console.log("chart rendered");
            }
        }
    });

    $(".gantt").popover({
        selector: ".bar",
        title: "I'm a popover",
        content: "And I'm the content of said popover."
    });
}); 
```

我在这里包含了一个链接来展示它：http: [//jsfiddle.net/Zn2ML/](http://jsfiddle.net/Zn2ML/)

不知道为什么它看起来不像这样：[http ://taitems.github.com/jQuery.Gantt/](http://taitems.github.com/jQuery.Gantt/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:13:20.517

您似乎缺少包含来自以下位置的 javascript 文件和 css 文件：

[http://taitems.github.com/jQuery.Gantt/](http://taitems.github.com/jQuery.Gantt/)

从一个简单的示例开始，不要忘记包含示例中的所有 css 和 javascript，然后开始进行代码更新以使其适合您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:39:42.753

看这个例子

未为此加载图标...

你编码

```
.fn-gantt .dataPanel {
    margin-left: 0px;
    border-right: 1px solid #DDD;
    background-image: url(../img/grid.png);
    background-repeat: repeat;
    background-position: 24px 24px;
} 
```

为。。改变：

```
.fn-gantt .dataPanel {
    margin-left: 0px;
    border-right: 1px solid #DDD;
    background-image: url(http://taitems.github.com/jQuery.Gantt/img/grid.png);
    background-repeat: repeat;
    background-position: 24px 24px;
} 
```

[jsFiddle 示例](http://jsfiddle.net/Zn2ML/3/)

# c++ - 如何从另一个类发出信号？

> ID：15176458
> 
> 赞同：34
> 
> 时间：2013-03-02T16:01:36.027
> 
> 标签：c++, qt, qt4, signals-slots

我的 Qt 应用程序有问题。我正在尝试从另一个类中发出信号（它是放置信号的类的嵌套类）。

我已经用插槽连接了信号，应该没问题。但是当我尝试从这个嵌套类中发出这个信号时，我得到了编译器错误：

> 没有对象不能调用成员函数

怎么了？我在 Qt 文档中寻找，但找不到合理的解决方案甚至解释。

简化的类定义如下所示。

```
class LogWriter : public QDialog
{   
   Q_OBJECT

public:
   class Log : public QObject
   {
      Q_OBJECT

   public:
      bool print;

      Log(bool _print, QString _color, QObject *obj = NULL)
         : QObject(obj)
      {
         print = _print;
         color = _color;
      }
   };

   LogWriter(QWidget * parent = 0);
   ~LogWriter();

public slots:
   void setMinVal();
   void setMediumVal();
   void setHighVal();
   void cleanWindow();
   void appendText(QString &text);

signals:
   void signalLogAppend(QString);
}; 
```

`LOW`我使用以下函数调用将客户端代码中的 LogWriter实例的信号连接到某个插槽：

```
connect(&LOW, SIGNAL(signalLogAppend(QString)),
        this, SLOT(appendText(QString&)),
        Qt::DirectConnection); 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-02T16:41:03.137

要理解这个问题，您必须了解信号是如何发出的：

它们只是一个非静态成员函数调用，因此需要调用一个实例（“发送者”）。通常，此实例是（如果您从**同一类**`this`的另一个非静态成员函数中发出信号），因此调用语法变为没有任何（文字）实例的普通函数调用。关键字是可选的，只是一个扩展为空的宏。以下四个版本在写入包含信号的同一类的成员函数时都是相同的：**`emit`**

 **```
emit this->signalLogAppend("foo");
emit signalLogAppend("foo");
this->signalLogAppend("foo");
signalLogAppend("foo"); 
```

如果您从内部类中发出外部类的信号，则`this`指针指向内部类的一个实例，因此外部类缺少一些实例。这就像你从内部类中调用外部类的任何其他函数一样：编译器不知道在哪个（外部类的）对象实例上调用它。所以你必须写这样的东西：

```
emit someLogWriter->signalLogAppend("foo"); 
```

在这里，是您要为其发出信号`someLogWriter`的实例。`LogWriter`**

# google-maps - 包含各种点的 kml 层的问题

> ID：15176460
> 
> 赞同：0
> 
> 时间：2013-03-02T16:01:40.880
> 
> 标签：google-maps, events, google-maps-api-3, kml, infowindow

我正在使用 google map api v 3 做一个 web 应用程序。我有一个 kml 图层覆盖谷歌地图。kml 层是使用连接到我的数据库的 qgis 开发的。现在我有两个问题：

1.  为什么单击标记时信息窗口为空，不应该从数据库中获取信息？
2.  我可以从标记更改每个点的图标吗？

![在此处输入图像描述](../Images/829784283ff46ce95c36833553c713bc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:38:04.680

1.  从您发布的信息中无法判断为什么信息窗口为空。(a.) css 设置为白色，或者 (b.) KML 中的内容（名称/描述）为空。如果这没有帮助，请发布指向您的 KML 的链接或您的 KML 的片段。

2.  KML 提供了控制图标显示的能力，请参阅[参考资料](http://code.google.com/apis/kml/documentation/kmlreference.html)

# c++ - 制作文件 - 编译并将引用放入系统文件夹

> ID：15176469
> 
> 赞同：1
> 
> 时间：2013-03-02T16:02:48.183
> 
> 标签：c++, gcc, makefile

我正在用 C++ 开发一个库并使用 GCC 编译该库。

我正在寻找创建制作文件的示例或教程。这个想法是这样的：

1.  用户下载库的源代码。

2.  在命令提示符下，执行“make”文件，该文件：

    2.1 编译所有类实现，输出到库

    2.2 将所有引用（类）放入系统文件夹。

2.2 将启用：

```
#include <audiolib/class.h> 
```

代替：

```
#include "audiolib/class.h" 
```

我是制作文件的新手，所以，任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:10:31.503

如何`#include <...>`和`#include "..."`工作与 Make 无关，这是 GCC 的行为。例如，从 GCC 文档中查看[这个。](http://gcc.gnu.org/onlinedocs/cpp/Include-Syntax.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T16:12:38.010

通常最好使用构建系统为您生成 makefile，而不是自己编写脚本。他们的目标是生成可移植的构建脚本，您只需进行少量配置。生成的脚本通常会检查平台的功能，并为您提供一些方法来根据可用的特性和功能来改变构建。

如果您使用[GNU 构建系统](http://en.wikipedia.org/wiki/GNU_build_system)为您生成构建脚本，您最终会得到典型的构建过程：

```
./configure
make
make install 
```

该`make install`命令会将构建输出复制到正确的目录，例如将库头复制到`/usr/include`，从而允许编译器找到头文件。

# php - 缩放标记但是....它在移动！！OO 什么鬼

> ID：15176474
> 
> 赞同：1
> 
> 时间：2013-03-02T16:03:31.387
> 
> 标签：php, javascript, api, google-maps, google-maps-api-3

我认为问题出在训练数据中，正如您在下面看到的那样，我放了 php 代码和渲染来解释。

我是谷歌地图 API 的新手，这不是我的代码。那么问题来了：什么时候放大这个指针在我放大时移动了很多！我无法弄清楚地图显示的冲突。我只想使用 LatLong 来指示该区域，但提供了脚本来计算道路..这是第二个假设。

我尝试了什么：

*   从：`setMapAddress ("<? Php city ();?>, <? Php been ();?>, <? Php zipcode ();?>");`
*   到`setMapAddress ("");`
*   结果：`setMapAddress (" , , ");`

- 删除：

```
bed: "<?php beds(); ?>",
            bath: "<?php baths(); ?>",
            size: "<?php echo get_post_meta($post->ID, "_ct_sqft", true); ?> <?php sqftsqm(); ?>",
            street: "<?php the_title(); ?>",
            city: "<?php city(); ?>",
            state: "<?php state(); ?>",
            zip: "<?php zipcode(); ?>", 
```

* * *

问题图片： ![#[问题图片][1]](../Images/5366772ec54910659c04a1b1eb2f1dc0.png)

* * *

[带有脚本的页面](http://pineto.contat.eu/listings/zona-industriale-scerne-di-pineto-capannone/)

```
<script>
        function setMapAddress(address) {
            var geocoder = new google.maps.Geocoder();
            geocoder.geocode( { address : address }, function( results, status ) {
                if( status == google.maps.GeocoderStatus.OK ) {
                    <?php  if((get_post_meta(get_the_ID(), "_ct_latlng", true))) { ?>
                    var location = new google.maps.LatLng(<?php echo get_post_meta(get_the_ID(), "_ct_latlng", true); ?>);
                    <?php } else { ?>
                    var location = results[0].geometry.location;
                    <?php } ?>
                    var options = {
                        zoom: 15,
                        center: location,
                        mapTypeId: google.maps.MapTypeId.<?php echo strtoupper($ct_options['ct_contact_map_type']); ?>, 
                        streetViewControl: true
                    };
                    var mymap = new google.maps.Map( document.getElementById( 'map' ), options );   
                    var marker = new MarkerWithLabel({
                        map: mymap, 
                        draggable: false,
                        flat: true,
                        labelContent: '',
                        labelAnchor: new google.maps.Point(22, 0),
                        labelClass: "label", // the CSS class for the label
                        labelStyle: {opacity: 1},
                        icon: '<?php echo get_template_directory_uri(); ?>/images/blank.png',
                        <?php  if((get_post_meta(get_the_ID(), "_ct_latlng", true))) { ?>  
                        position: new google.maps.LatLng(<?php echo get_post_meta(get_the_ID(), "_ct_latlng", true); ?>)
                        <?php } else { ?>
                        position: results[0].geometry.location
                        <?php } ?>
                    });     
                }
            });
        }
        setMapAddress( "<?php city(); ?>, <?php state(); ?>, <?php zipcode(); ?>" );
        </script>
        <div id="map"></div> 
```

此代码呈现为：

```
<script>
        function setMapAddress(address) {
            var geocoder = new google.maps.Geocoder();
            geocoder.geocode( { address : address }, function( results, status ) {
                if( status == google.maps.GeocoderStatus.OK ) {
                                        var location = new google.maps.LatLng(42.608120,14.067420);
                                        var options = {
                        zoom: 15,
                        center: location,
                        mapTypeId: google.maps.MapTypeId.ROADMAP, 
                        streetViewControl: true
                    };
                    var mymap = new google.maps.Map( document.getElementById( 'map' ), options );   
                    var marker = new MarkerWithLabel({
                        map: mymap, 
                        draggable: false,
                        flat: true,
                        labelContent: '',
                        labelAnchor: new google.maps.Point(22, 0),
                        labelClass: "label", // the CSS class for the label
                        labelStyle: {opacity: 1},
                        icon: 'http://pineto.contat.eu/wp-content/themes/th/images/blank.png',

                        position: new google.maps.LatLng(42.608120,14.067420)
                                            });     
                }
            });
        }
        setMapAddress( ", , " );
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T17:27:12.093

问题出在图像上。

首先去掉下面的css（layout.css，第151行）：

```
font-weight: bold; color: #fff; padding: 1px 4px; background: url(<?php echo get_template_directory_uri(); ?>/images/map-pin.png) no-repeat;} 
```

然后，确保这个 javascript（mapping.js，第 26 行）：

`icon: 'wp-content/themes/reale/images/blank.png',`

指向我的标记图像。

# vb.net - 使用线程而不是计时器 [VB.NET]

> ID：15176476
> 
> 赞同：0
> 
> 时间：2013-03-02T16:03:37.263
> 
> 标签：vb.net

如何在没有计时器的情况下每 2 分钟执行一次代码？. 我想我可以用线程来做，但是怎么做呢？使用计时器或线程更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:32:43.690

对于计时器来说，线程是一种非常昂贵的替代品，尤其是一个滴答声很慢的计时器。调用 Sleep(2 * 60 * 1000) 的线程未有效使用 1 MB 内存和五个操作系统句柄，这是托管线程的成本。

请改用 System.Threading.Timer 或 System.Timers.Timer。回调/事件在线程池线程上运行，因此请注意您所做的事情，当您访问共享变量时需要正确锁定。与常规线程相同的注意事项。

# javascript - Javascript JSON.parse SUB JSON

> ID：15176478
> 
> 赞同：0
> 
> 时间：2013-03-02T16:03:41.347
> 
> 标签：javascript, json

好的，我知道这听起来很愚蠢，因为下面的代码应该可以工作

```
document.getElementById('petimg').src = petJSON[0].picture[0].large; 
```

但是它不断使网站崩溃

这是完整的代码

```
xmlhttp=new XMLHttpRequest();
xmlhttp.open("GET","http://service.ipetfindr.com/iOS/?uri=fetchpet/13373A" + n[1],false);
xmlhttp.send();

var petJSON = JSON.parse(xmlhttp.responseText);

alert(petJSON[0].picture.large);

document.getElementById('petimg').src = petJSON[0].picture.[0].large;
document.getElementById("petname").innerHTML = petJSON[0].petname;
document.getElementById("breed").innerHTML = petJSON[0].breed;
document.getElementById("petid").innerHTML = petJSON[0].ipetfindrtagid; 
```

我遇到问题的 JSON 部分如下

```
"picture":[{"large":"http:\/\/www.ipetfindr.com\/petuploads\/7b2b07363b271703782d0b7d5362f8f4.JPG","small":"http:\/\/www.ipetfindr.com\/petuploads\/7b2b07363b271703782d0b7d5362f8f4-x-h80.JPG"}] 
```

**EDIT FIX** 修复此错误的方法很简单

```
xmlhttp=new XMLHttpRequest();
xmlhttp.open("GET","http://service.ipetfindr.com/iOS/?uri=fetchpet/13373A" + n[1],false);
xmlhttp.send();

var petJSON = JSON.parse(xmlhttp.responseText);
var petpicture = petJSON[0].picture[0];
alert(petpicture.large); //THIS allows me or anyone to call the large image in the sub array

document.getElementById('petimg').src = petJSON[0].picture.[0].large;
document.getElementById("petname").innerHTML = petJSON[0].petname;
document.getElementById("breed").innerHTML = petJSON[0].breed;
document.getElementById("petid").innerHTML = petJSON[0].ipetfindrtagid; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:20:12.240

`petJSON[0].picture.[0].large`是语法错误。删除 之前的点`[`，您只能使用点或括号表示法来[访问属性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators)。

# git - 重写历史以删除重复的提交消息

> ID：15176482
> 
> 赞同：2
> 
> 时间：2013-03-02T16:04:09.830
> 
> 标签：git, version-control

当我第一次进入VC时，我使用的是SVN并且不明白我在做什么。我在不同的主干上维护了一个项目的不同部分，但会一次对所有主干进行提交，从而导致具有相同提交消息的多个提交。大约两年前，我醒来并将所有的树干弄成一个树干，然后又醒了一些并将 repo 转换为 git。现在我有了一个快速、灵活的仓库，里面有几个分支，我再高兴不过了……

...除了所有那些旧的、重复的提交消息都在困扰我。（它们构成了我 repo 中提交的大约 1/3-1/2。）这正是`git rebase`它的用途，对吧？我已经尝试对一批副本进行测试运行，并且它可以正常工作，只是它看起来像是将我的`master`分支与我的所有其他分支分开。我这样做了，`git rebase -i <sha>`并将所有重复的提交压缩到第一个。我想保持我的分支结构完整。

我想要压缩的所有重复消息都在我进行`svn=>git`转换之前出现，并且我的所有分支都在转换之后开始。也就是说，`svn=>git`转换前的整个历史是线性的，没有分支。

另一个警告——这是一个很大的警告——是这个 repo 已经被推送到一个远程 repo。我知道重写共享存储库的历史是个坏消息，但我只是在考虑它，因为还没有人从我的遥控器克隆或分叉。我想在将其用于克隆/分叉之前清理历史记录。

那么有没有办法在一定程度上重写历史，而其余部分保持不变呢？还有其他建议可以帮助我清理这个烂摊子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T19:17:36.543

您可以使用 rebase 将两个旧提交压缩为一个，但这将导致一个**全新**的提交。因此，rebase 必须更改所有子项（直接在提交之后提交）以指向新的提交，这将再次导致全新的提交。- 等等...

因此，修改/重新调整旧提交将导致一个全新的提交图。其他分支仍然指向旧图。这就是为什么您将您的分支与所有其他分支分开的原因。

根据提交分支的复杂性，您的清理工作会变得非常棘手。很可能你应该让你的存储库保持原样。

如果你真的想改变历史。您应该创建一个指向上一次 SVN 提交的新分支，它应该是所有分支的父级。`git tag oldsvn $SHA1; git checkout -b newsvn oldsvn`

您现在可以清理该分支，然后在该分支上重新设置所有其他分支。（这是 rebase 的真正想法，给分支一个新的基础。）你可以用`git rebase --onto newsvn oldsvn $branch`.

由于您可能正在重写共享共同历史的多个分支，因此您可能会再次为您的分支获得不同的树。看看[Git：如何一次变基多个分支（具有相同的基本提交）？](https://stackoverflow.com/questions/866218/git-how-to-rebase-many-branches-with-the-same-base-commit-at-once)

# c - 输出数组的所有元素 - C

> ID：15176487
> 
> 赞同：0
> 
> 时间：2013-03-02T16:04:30.357
> 
> 标签：c, for-loop

我正在尝试输出包含用户输入的数组的所有元素。例如，如果用户为形容词输入微笑、快乐和悲伤，我想将其输出给用户。

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    int counter_1, counter_2, counter_3, tracker;

    printf("Enter a number of adjectives: ");
    int numAdj;

    scanf("%d", &numAdj);

    printf("Enter a number of nouns: ");
    int numNouns;

    scanf("%d", &numNouns);

    char adj[numAdj];
    char nouns[numNouns];

    printf("Please enter %d adjectives: \n", numAdj);

    for (counter_1 = 0; counter_1 <= numAdj - 1; counter_1++) {
        scanf("%s", &adj[counter_1]);
    }

    printf("Please enter %d nouns: \n", numNouns);

    for (counter_2 = 0; counter_2 <= numNouns - 1; counter_2++) {
        scanf("%s", &nouns[counter_2]);
    }

    for (counter_3 = 0; counter_3 <= numAdj - 1; counter_3++) {
        printf("%s", &adj[counter_3]);
    }
    return 0;
} 
```

我不知道为什么我不能输出数组的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:10:34.903

您正在从数组打印`adj`，它只有`numAdj`元素空间，即如果`numAdj`是 3，您只能访问元素`adj[0]`、、`adj[1]`和`adj[2]`。但是，最终循环迭代到`numAdj * numNouns`，它超过了`adj`只要`numNouns`不是 0 的结尾（在这种情况下，它只打印第一个元素，`adj[0]`）。

使用`for`前两个循环中的每一个循环中的行来正确迭代`adj`和`nouns`。

此外，`adj`和`nouns`都是单个`char`元素的数组，即单个字符，而不是字符串。您需要使它们成为字符数组的数组（因为 C 字符串是字符数组，C 字符串数组是字符数组的数组）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:13:36.287

你写：

```
char adj[numAdj];
char nouns[numNouns]; 
```

接下来你正在做：

```
...
scanf("%s", &adj[counter_1]);
... 
```

but `&adj[counter_1]`is reference to `char`，但 scanf 等待引用 to `char *`。这是错误的。数组也存在同样的问题`char nouns[numNouns];`，它是字符数组，而不是字符串数组。

# php - 将用户点添加到数据库

> ID：15176489
> 
> 赞同：0
> 
> 时间：2013-03-02T16:04:52.403
> 
> 标签：php, add, points

我确实搜索过，但找不到任何东西，或者我是盲人。

我正在尝试为我使用更新的用户添加积分，但它不断更改积分：对于 exp：

```
$sql = mysql_query("UPDATE users SET points='20' WHERE username='".$_SESSION['username']."'") 
```

它增加了 20 分，但是当我再次提交它时它保持不变。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:06:35.060

应该是`points=points+20`

# emacs - 在 Emacs 中使用悬挂缩进填充 Markdown 样式的列表项

> ID：15176496
> 
> 赞同：2
> 
> 时间：2013-03-02T16:05:32.810
> 
> 标签：emacs, elisp, markdown

我希望 Emacs 用悬挂缩进包装 Markdown 样式的列表项。事实上，即使在 中`fundamental-mode`，这也很有效。考虑这三个列表项：

```
* Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.

- Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.

+ Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. 
```

使用`M-q`( `fill-paragraph`) 填充时，结果为

```
* Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do
  eiusmod tempor incididunt ut labore et dolore magna aliqua.

- Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris
  nisi ut aliquip ex ea commodo consequat.

+ Duis aute irure dolor in reprehenderit in voluptate velit esse
cillum dolore eu fugiat nulla pariatur. 
```

请注意，前两个是我想要的，但最后一个不是。我无法理解为什么在最后一种情况下行为不同，以及如何适当地修改它。

源代码中的注释`fill-paragraph`说明尝试了以下步骤：

> 1.  如果区域在交互调用时处于活动状态，则填充该区域。
> 2.  试试`fill-paragraph-function`。
> 3.  试试我们的语法感知填充代码。
> 4.  如果这一切都失败了，默认为好的 ol' 文本段落填充。

当我按下以填充这些列表项时，没有活动区域`M-q`，因此应跳过第 1 步。我还没有定义一个`fill-paragraph-function` （我验证它`fill-paragraph-function`在`nil`）`fundamental-mode`。

这意味着我们进入第三步。在 中`fundamental-mode`，所有三个列表标记都具有相同的语法（用 验证`describe-char`）：

```
character: * (displayed as *) (codepoint 42, #o52, #x2a)
   syntax: _    which means: symbol

character: - (displayed as -) (codepoint 45, #o55, #x2d)
   syntax: _    which means: symbol

character: + (displayed as +) (codepoint 43, #o53, #x2b)
   syntax: _    which means: symbol 
```

因此，我不明白为什么这一步会以不同的方式对待这些段落。在查看源代码时，似乎这只是试图处理评论，所以我认为相信在上述情况下跳过了三个。

所以，我们似乎进入了第四步，它使用了 `paragraph-start`. 我尝试设置`paragraph-start`为以下（允许标记前有空格）：

```
"\f\\|[ \t]*$\\|^[ \t]*[*+-] " 
```

这也不起作用，所以我不知道如何进行这项工作。

我是否需要编写自定义填充段落功能，还是有更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:05:32.810

一个简单的解决方案是使用`adaptive-fill-regexp`. 该变量是一个正则表达式，它匹配构成缩进的行首的文本。在上述情况下，我们希望将列表标记计入缩进。

在前两种情况下，这些标记已经在 的默认值中`adaptive-fill-regexp`，如 中所定义`fill.el`：

```
"[ \t]*\\([-–!|#%;>*·•‣⁃◦]+[ \t]*\\)*" 
```

请注意，尽管第一组的字符集中有很多不同的项目符号字符，但加号 (+) 不是。对于上述三种情况，以下方法可以解决问题：

```
"[ \t]*\\([*+-][ \t]*\\)*" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T19:56:30.940

我认为您只需要从 Elpa / package.el 更新您的降价模式（或许还可以获取降价模式+）

确保你有奶盒，果酱回购。

我只是试了一下用例....注意markdown-mode / markdown-mode+的版本

![在此处输入图像描述](../Images/f0cd6dfbc7e9f391bbd95065660da4ae.png)

# javascript - 地理位置计算距离为0？

> ID：15176505
> 
> 赞同：0
> 
> 时间：2013-03-02T16:05:56.847
> 
> 标签：javascript, geolocation

我已经为此工作了一段时间，并且整天都在向我抛出问题。我现在正处于真正陷入困境的地步，不知道下一步该去哪里。我会指出我对 Javascript 很陌生，所以这可能是一个菜鸟错误。

无论如何，总体目标是检查用户当前位置，然后检查他们是否在目标坐标的 200m 半径内。当我输入当前坐标时，它会在 OnInterval 函数中运行警报，但是如果它们在 200m 半径范围内，它就不会运行。

有谁知道如何解决这一问题？：X

```
var userPositionLat;
var userPositionLong;

jQuery(window).ready(function() {  
    initiate_geolocation();
});

function initiate_geolocation() {  
    //navigator.geolocation.getCurrentPosition(handle_geolocation_query,handle_errors);
    // http://www.thedotproduct.org/2010/04/example-of-navigator-geolocation-watchposition/
    navigator.geolocation.watchPosition(handle_geolocation_query,handle_errors, {enableHighAccuracy:true, maximumAge:30000});
}

function handle_errors(error) {  
    switch(error.code)  
    {  
        case error.PERMISSION_DENIED: alert("user did not share geolocation data");  
        break;

        case error.POSITION_UNAVAILABLE: alert("could not detect current position");  
        break;

        case error.TIMEOUT: alert("retrieving position timed out");  
        break;

        default: alert("unknown error");  
        break;
    }  
}  

function handle_geolocation_query(position) {
    userPositionLat = position.coords.latitude;
    userPositionLong = position.coords.longitude;

    alert('Your latitude is :'+userPositionLat+' and longitude is '+userPositionLong);

    IsUserNearTarget();
}

function CalculateDistance(lat1, long1, lat2, long2) {
    // Translate to a distance
    var distance =
            Math.sin(lat1 * Math.PI) * Math.sin(lat2 * Math.PI) +
            Math.cos(lat1 * Math.PI) * Math.cos(lat2 * Math.PI) * Math.cos(Math.abs(long1 - long2) * Math.PI);

    // Return the distance in meters
    return Math.acos(distance) * 6370981.162;
}

function IsUserNearTarget()
{
    // The target longitude and latitude
    var targetlong = 0.0; //change this with your coordinates to test
    var targetlat = 0.0; //change this with your coordinates to test

    // Start an interval every 1s
    var OurInterval = setInterval(OnInterval, 1000);

    // Call this on an interval
    function OnInterval() {
        var distance = CalculateDistance(targetlat, targetlong, userPositionLat, userPositionLong);

        // Is it in the right distance? (200m)
        if (distance <= 200) {
            // Stop the interval
            clearInterval(OurInterval);

            alert('TOTALLY WORKS BRO');
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:09:20.723

要将度数转换为弧度，请乘以`π/180`，而不是`π`。

# html - z-index 不起作用，图像在 div 后面

> ID：15176507
> 
> 赞同：2
> 
> 时间：2013-03-02T16:06:02.337
> 
> 标签：html, css

我正在尝试向 css 添加一个菜单，但它的工作图像正在退回到 div。我认为一些css问题，尝试了很多但不起作用，甚至z-index也没有效果，我也尝试附上一张图片但声誉问题，图片解释了很多。无论如何，这个问题可能听起来很简单，但不知道为什么它不起作用，M 使用 firefox 19。

**的CSS**

```
ul.gelbuttonmenu{
    position:relative;
    padding: 0;
    margin: 0;
    margin-bottom:1em;
    text-align: center; /*set value to "left", "center", or "right"*/
    }

ul.gelbuttonmenu li{
    display: inline;
    z-index:10;
    }

ul.gelbuttonmenu li a{
    color: black;
    font-weight:bold;
    padding: 10px; /*make sure padding is sufficient that the height of the link is enough to fully show the gel button*/
    margin-right: 20px; /*spacing between each menu link*/
    text-decoration: none;
    z-index:10;
    }

ul.gelbuttonmenu li.active{ /*style of LI that gets dynamically added to menu to create background effect*/
    position:absolute;
    width:0;
    background:lightblue;
    z-index:10;
    background:url(gelbuttonleft.gif) top left no-repeat, url(gelbuttonright.gif) top right no-repeat, url(gelbuttoncenter.gif) top center repeat-x;
    }
body{}
            .head{height:50px}
            .foot{height:90px}

            .wrap{width:80%;margin-left: 10%;background-color: #74e0ea;
            text-align: center;
            -webkit-border-radius: 5px;
            -moz-border-radius: 5px;
            border-radius: 5px;
            -webkit-box-shadow: #666 0px 2px 50px;
            -moz-box-shadow: #666 0px 2px 50px;
            box-shadow: #666 0px 2px 50px;
            background: #74E0EA;
            background: -webkit-gradient(linear, 0 0, 0 bottom, from(#74E0EA), to(#CCF1F5));
            background: -webkit-linear-gradient(#74E0EA, #CCF1F5);
            background: -moz-linear-gradient(#74E0EA, #CCF1F5);
            background: -ms-linear-gradient(#74E0EA, #CCF1F5);
            background: -o-linear-gradient(#74E0EA, #CCF1F5);
            background: linear-gradient(#74E0EA, #CCF1F5);
            } 
```

**的HTML**

```
</div>
<div id="wrapper" class="wrap">
<div id="menu">
    <ul id="gooeymenu1" class="gelbuttonmenu">
    <li><a href="#">Home</a></li>
    <li><a href="#">CSS Codes</a></li>
    <li><a href="#">Forums</a></li>
    <li><a href="#">Tools</a></li>
    <li><a href="#">JavaScript</a></li>
    <li><a href="#">CSS Gallery</a></li>
    </ul>
 </div>
 </div>
 <div id="footer" class="foot">

</div> 
```

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-04-28T14:31:30.000

您可以使用带有以下代码的简单 css 菜单：

```
 ul {list-style: none;padding: 0px;margin: 0px;}
  ul li {display: block;position: relative;float: left;border:1px solid #000}
  li ul {display: none;}
  ul li a {display: block;background: #000;padding: 5px 10px 5px 10px;text-decoration: none;
           white-space: nowrap;color: #fff;}
  ul li a:hover {background: #f00;}
  li:hover ul {display: block; position: absolute;}
  li:hover li {float: none;}
  li:hover a {background: #f00;}
  li:hover li a:hover {background: #000;}
  #drop-nav li ul li {border-top: 0px;}
```

```
<ul id="drop-nav">
  <li><a href="#">Support</a></li>
  <li><a href="#">Web Design</a>
    <ul>
      <li><a href="#">HTML</a></li>
      <li><a href="#">CSS</a></li>
      <li><a href="#">JavaScript</a></li>
    </ul>
  </li>
  <li><a href="#">Content Management</a>
    <ul>
      <li><a href="#">Joomla</a></li>
      <li><a href="#">Drupal</a></li>
      <li><a href="#">WordPress</a></li>
      <li><a href="#">Concrete 5</a></li>
    </ul>
  </li>
  <li><a href="#">Contact</a>
    <ul>
      <li><a href="#">General Inquiries</a></li>
      <li><a href="#">Ask me a Question</a></li>
    </ul>
  </li>
</ul>
```

# html - CSS 粘性页脚 - 内容样式问题

> ID：15176509
> 
> 赞同：1
> 
> 时间：2013-03-02T16:06:18.017
> 
> 标签：html, css

我正在尝试用 CSS 实现一个粘性页脚。我意识到这是一个常见问题，因此我尝试了通过 Google 找到的各种解决方案。

但是，我发现的解决方案都没有完成我想要做的事情。我不仅希望页脚位于底部，而且我可以`div`在页眉和页脚之间放置一个占用所有可用空间的页脚，即使没有足够的内容（想象一下，如果你在周围加上边框`#content`，它应该从页眉一直扩展到页脚，无论有多少内容。）。

这就是解决方案失败的地方。任何一个“推”元素都会阻碍。或者，如果`div`不破坏页脚或将页面宽度增加到 100% 以上，则无法将其设置为 100%。

这是基本标记：

```
<!DOCTYPE html>
<html>
    <body>
        <header>
            Header!
        </header>
        <div id="content">
            Content!
        </div>
        <footer>
            Footer!
        </footer>
    </body>
</html> 
```

再一次，我已经没有想法让 CSS 做我想做的事了。我可能不会使用 Javascript。帮助？

编辑：我希望标题具有动态高度。页脚不应始终可见。它应该像[这样](http://www.cssstickyfooter.com)工作。

编辑2：它应该看起来像[这样](http://jsfiddle.net/awTZS/)，除了黑色区域应该一直延伸到页脚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:20:49.570

为了使“内容”的高度为 100%，您必须同时设置高度和`html`内容的高度。`body``100%``min-height``100%`

您还需要在内容的顶部/底部填充，以便页眉和页脚（绝对定位，以免弄乱 100% 高度以创建不必要的滚动条）。此填充要求您知道页眉/页脚的高度，但由于它们应该是静态的，因此您很可能会这样做。

最后，`border-box`需要作为`box-sizing`内容的 ，以防止填充*添加*到高度。

无论内容的大小如何，这都有效。

```
html {
    height: 100%;
}
body {
    height: 100%;
    margin: 0;
}
#content {
    min-height: 100%;
    background-color: blue;
    padding-top: 50px;
    padding-bottom: 50px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    color: white;
}
header {
    height: 50px;
    background-color: yellow;
    position: absolute;
    width: 100%;
}
footer {
    position: fixed;
    background-color: red;
    height: 50px;
    bottom: 0;
    width: 100%;
} 
```

在行动：

[http://jsfiddle.net/s8gZB/2/](http://jsfiddle.net/s8gZB/2/)

[http://jsfiddle.net/s8gZB/1/](http://jsfiddle.net/s8gZB/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:15:37.813

最好的方法是为您的`div`内容设置一个绝对值`top: HEADER_HEIGHT;``bottom: FOOTER_HEIGHT;`

还要将 div 推`inner`到 100% 的高度，它的父级应该有一个`height`not `min-height`。为防止问题更改`min-height`为`height`，您应该添加`overflow: visible;`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T16:10:12.270

试试这个作为页脚

位置：固定；

底部：0 ;

无论滚动在哪里，页脚都将始终可见。

# android - 垃圾收集器可以释放单例实例吗？（以及为什么或如何避免它）

> ID：15176512
> 
> 赞同：8
> 
> 时间：2013-03-02T16:06:47.273
> 
> 标签：android, garbage-collection, singleton, dealloc

在 Android 中，我有单例类，但我不确定垃圾收集器是否可以释放它。

如果垃圾收集器将释放我的单例类，如何避免它被释放？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:10:19.087

垃圾收集收集没有指向的对象，除非引用是静态的。[静态字段是否为垃圾收集打开？](https://stackoverflow.com/questions/453023/are-static-fields-open-for-garbage-collection)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T16:37:07.670

有很多方法可以实现单例。最好的之一是：

```
public static enum My { SINGLETON; } 
```

某物是否是单例与它是否被 GC 无关。如果没有对它的强引用，则该对象将被 GC。查一下（[http://weblogs.java.net/blog/2006/05/04/understanding-weak-references](http://weblogs.java.net/blog/2006/05/04/understanding-weak-references)）。

还有一个有趣的问题。在 Android 中，您的应用程序不控制它的生命周期。进程可能会以您意想不到的方式终止并重新创建。如果发生这种情况，静态最终变量将被重新初始化。这里还有更多内容：

[http://portabledroid.wordpress.com/2012/05/04/singletons-in-android/](http://portabledroid.wordpress.com/2012/05/04/singletons-in-android/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T16:08:56.607

gc 将释放您的实例的唯一原因是如果整个应用程序被破坏......

# c# - asp.net mvc 固定页眉和页脚

> ID：15176515
> 
> 赞同：0
> 
> 时间：2013-03-02T16:07:09.630
> 
> 标签：c#, asp.net, .net, asp.net-mvc

在布局中固定页眉和页脚的理想模式是什么

我必须为这两个创建一个特殊的视图吗？

如何声明它们将出现在哪里？

```
<html>
<head>
<title></title>
</head>
<body>

<div id="header"></div>

@RenderBody()

<div id="footer"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:15:09.150

您将需要使用 css 来定义`div`标签出现的位置

```
#header {
   display:block;
}

#fooder {
  display: block;
} 
```

可能是确保`header`位于“正文”内容之上并且`footer`位于其之前的内容之下的基本示例。这只是一个非常简单、可能无用的示例，但希望它能让您了解在项目中的位置。

# objective-c - SplitView 和核心数据：何时更改/提交用户所做的更改

> ID：15176516
> 
> 赞同：0
> 
> 时间：2013-03-02T16:07:31.583
> 
> 标签：objective-c, ipad, core-data, uisplitviewcontroller

我对 ipad 和拆分视图相当陌生，但对 iphone 和核心数据非常熟悉。而且我现在想知道何时实际保存任何更改，以免更改丢失，并且不会经常调用保存上下文。

用户从主视图中选择一个项目，然后将其显示在详细视图控制器中。与 iPhone 非常相似。但是在拆分视图中，详细视图控制器只是保持可见，并且每次在主视图中选择一个新的详细项目时，都会为其分配一个新的详细项目。

问题：在此期间，用户可能对详细信息项进行了更改。什么时候保存这些？我可以对哪个事件做出反应？setDetailItem 是在显示新的 detailItem 之前保存对旧 detailItem 所做更改的好地方。美好的。但是在用户退出应用程序之前对最后一项的更改是什么？

为了增加一些复杂性：我在 TabBar 中运行了几个拆分视图控制器。所以用户可以从一个标签栏切换到下一个。我想这`viewWillDisappear`可能适合控制这些事件？我也应该在那里保存最后的更改吗？离开应用程序时也会调用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:44:27.450

`setDetailItem`对我来说`viewWillDisappear`保存用户数据听起来不错。

`viewWillDisappear`当应用程序进入后台时不调用，而是`applicationDidEnterBackground`在应用程序中调用委托。根据文件，

> ...您应该使用此方法来释放共享资源，*保存用户数据*，使计时器无效，并存储足够的应用程序状态信息以将您的应用程序恢复到其当前状态，以防以后终止。...

或者，您可以注册`UIApplicationDidEnterBackgroundNotification`.

# android - Android WebView：是否可以检测 URL 哈希更改？

> ID：15176519
> 
> 赞同：8
> 
> 时间：2013-03-02T16:07:53.230
> 
> 标签：android

我需要检测 Android WebView 中的 URL 哈希更改，但找不到任何方法。 `shouldOverrideUrlLoading()`在初始页面加载时触发，但在页面加载后不会触发任何后续哈希更改。

这甚至可以通过 Android WebView 实现吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-26T13:39:07.250

有可能的。

您必须像这样声明一个 Javascript 接口：

```
private class MyJSI {
         public void doStuff()
         {
         }
} 
```

并将您的 webview 与 Javascript 接口链接，如下所示：

```
webView.addJavascriptInterface(new MyJSI(), "myjsi"); 
```

然后，您必须在页面加载时编写一些 javascript 代码，以便在哈希更改时调用函数 doStuff。

```
webview.setWebViewClient(new WebViewClient() {  

         public void onPageFinished(WebView view, String url)  
         {
                 view.loadUrl("javascript:window.onhashchange = function() { myjsi.doStuff(); };");
         }
}); 
```

我希望它有所帮助。我已经对其进行了测试，并且可以正常工作。

# heroku - Heroku FATAL：不允许角色登录/取消配置数据库

> ID：15176520
> 
> 赞同：5
> 
> 时间：2013-03-02T16:08:12.757
> 
> 标签：heroku

我正在 Heroku 上测试一个应用程序，结果开发数据库突然脱机。postgres.heroku.com 在数据库中有以下信息：

```
Statistics
Plan    Dev
Status  
Data Size   0 B
Tables  7
PG Version  ?
Created     February 27, 2013 19:38 
```

日志说`FATAL: role "-removed-" is not permitted to log in`。

heroku 文档有错误，但它并没有真正帮助：

```
FATAL: role “role-name”…

FATAL: role "u8akd9ajka" is not permitted to log in (PG::Error)

This occurs when you have de-provisioned a starter tier database but are still trying to connect to it. To resolve:

    If required, provision a new database via heroku addons:add heroku-postgresql
    Use heroku pg:promote HEROKU_POSTGRESQL_<new-database-color> to promote it, making it the primary database for your application. 
```

如何取消配置数据库？据我所知，我没有对数据库做任何事情，它只是离线了。

我可以成功地在数据库上使用提升命令（`heroku pg:promote HEROKU_POSTGRESQL_ROSE`）但它保持在相同的状态。如果我跑，`heroku pg:info`我会得到`Resource not found`

我可以添加一个新数据库并重新开始，但我想知道我是否可以让数据库恢复活力（在生产中发生这种情况的前景令人恐惧）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:20:12.623

Heroku 在您显示创建的数据库时遇到了问题：[https](https://status.heroku.com/incidents/498) ://status.heroku.com/incidents/498 ...您的数据库可能存在与此相关的问题。

当您在生产中时，您与免费帐户处于不同的级别；我个人在 3 年内没有遇到过 Heroku 生产应用程序的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-03-17T06:37:00.550

当我们删除/取消配置数据库并忘记删除 CONFIG VARS（ENV 变量）时会发生这种情况。（有时 CONFIG vars 不会自动删除）

尝试清除

> “DATABASE_URL”

变量来自

> 应用程序设置选项卡 > 配置变量

之后重新配置 postgres DB。

# jquery - 具有多行的垂直 jquery 轮播

> ID：15176522
> 
> 赞同：-4
> 
> 时间：2013-03-02T16:08:31.730
> 
> 标签：jquery, jquery-plugins, carousel

我正在寻找一个支持垂直方向多行的 jquery carousel 插件。我想拖放单个项目，因此我不能将多个项目放在一个列表项中。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:15:35.867

看看**[Gallerific](http://www.twospy.com/galleriffic/)**。

示例画廊位于**[此处](http://www.twospy.com/galleriffic/example-2.html)**。

# git - git/cygwin 静默失败

> ID：15176526
> 
> 赞同：11
> 
> 时间：2013-03-02T16:08:55.967
> 
> 标签：git, cygwin

我正在尝试克隆的 bitbucket 上有一个个人/私有存储库。当我从 Ubuntu 机器克隆时，我可以克隆存储库：

```
$ git clone https://<user>@bitbucket.org/<user>/<repo>.git
Cloning into '<repo>'...
Password for 'https://<user>@bitbucket.org':
remote: Counting objects: 586, done.
remote: Compressing objects: 100% (519/519), done.
remote: Total 586 (delta 65), reused 583 (delta 65)
Receiving objects: 100% (586/586), 2.55 MiB | 650 KiB/s, done.
Resolving deltas: 100% (65/65), done. 
```

但是，当我从 cygwin 尝试相同的命令时，我得到一个静默失败：

```
$ git clone -v --progress https://<user>@bitbucket.org/<user>/<repo>.git
Cloning into <repo>... 
```

然后 git 退出。我花了一个小时试图追踪这个，但是无声的错误很难用谷歌搜索。

我尝试过的事情：

*   在cygwin中重新安装git
*   在cygwin中降级git
*   删除和重建 .gitconfig 文件
*   回声$？打印 141（可能与 SIGPIPE 有关？）
*   设置 GIT_CURL_VERBOSE 没有产生任何添加的输出

注意：git 版本是 1.7.5.1

有人对这里可能发生的事情有任何见解吗？

**编辑/更新**

在找不到问题的解决方案后，我完全重新安装了 cygwin，问题似乎已经消失了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-07-30T14:31:10.177

我遇到了这个问题，对我来说，它原来是`cygcurl-4.dll`我编译并安装到 /usr/local/bin 的一个狡猾的版本。我删除了那个文件，现在 git 可以工作了。

对于其他人，我的修复细节可能有所不同，但这就是我进行调试的方式。现在有一个`strace`用于 Cygwin 的基本版本，但我不确定它来自哪个包。

为了跟踪子进程的产生（除其他外），我使用了`strace --mask=sigp git clone https://github.com/<user>/<repo>.git`. 浏览了一下，我发现了这个块：

```
--- Process 12224 created
  922    5807 [main] git 11849! child_info_spawn::worker: new process name \\?\C:\cygwin64\usr\libexec\git-core\git-remote-https.exe
--- Process 12224 loaded C:\Windows\System32\ntdll.dll at 0000000077830000
   25    5832 [main] git 11849! child_info_spawn::worker: spawned windows pid 12224
   41    5873 [main] git 11849! child_info::sync: n 2, waiting for subproc_ready(0x188) and child process(0x178)
--- Process 12224 loaded C:\Windows\System32\kernel32.dll at 0000000077610000
--- Process 12224 loaded C:\Windows\System32\KernelBase.dll at 000007fefd870000
--- Process 12224 loaded C:\cygwin64\usr\local\bin\cygcurl-4.dll at 0000000482aa0000
--- Process 12224 loaded C:\cygwin64\bin\cygcrypto-1.0.0.dll at 00000003d5120000
--- Process 12224 loaded C:\cygwin64\bin\cygwin1.dll at 0000000180040000
--- Process 12224 loaded C:\cygwin64\bin\cygz.dll at 00000003b0490000
--- Process 12224 loaded C:\cygwin64\bin\cygrtmp-0.dll at 00000003ac650000
--- Process 12224 loaded C:\cygwin64\bin\cygssl-1.0.0.dll at 00000003ab640000
--- Process 12224 loaded C:\cygwin64\bin\cygssh2-1.dll at 00000003ab6b0000
--- Process 12224, exception c0000139 at 00000000778f8078
--- Process 12224 exited with status 0xc0000139 
```

之后是所有的出口清理。所以问题发生在 DLL 加载过程中`/usr/libexec/git-core/git-remote-https.exe`。Cygwin 通常不会告诉您太多关于这些错误的信息，但是如果您“使用 Windows”启动程序，它会显示一个错误框。

`cygstart /usr/libexec/git-core/git-remote-https.exe`弹出一个框，上面写着

```
The procedure entry point curl_global_sslset could not be located
in the dynamic link library cygcurl-4.dll. 
```

检查它试图加载哪些库`cygcheck /usr/libexec/git-core/git-remote-https.exe`：

```
C:\cygwin64\usr\libexec\git-core\git-remote-https.exe
  C:\cygwin64\usr\local\bin\cygcurl-4.dll
    C:\cygwin64\bin\cygcrypto-1.0.0.dll
      C:\cygwin64\bin\cygwin1.dll
        C:\Windows\system32\KERNEL32.dll
          C:\Windows\system32\ntdll.dll
          C:\Windows\system32\KERNELBASE.dll

          (... many more Windows 7 DLLs ...)

      C:\cygwin64\bin\cygz.dll
    C:\cygwin64\bin\cygrtmp-0.dll
      C:\cygwin64\bin\cygssl-1.0.0.dll
    C:\cygwin64\bin\cygssh2-1.dll
  C:\cygwin64\bin\cygiconv-2.dll
  C:\cygwin64\bin\cygintl-8.dll 
```

所以手动安装`C:\cygwin64\usr\local\bin\cygcurl-4.dll`很可能是一个候选者，删除它为我解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T03:00:34.597

作为一种解决方法，请考虑安装 Github for Windows，在资源管理器中右键单击要克隆的目录，然后在此处选择 Git Bash。然后，使用 Git Bash 克隆存储库。好在 Cygwin git、Github for Windows 和 Git Bash 都可以访问同一个存储库（它们与同一个 .git 目录进行交互），因此它们不会相互干扰。如果在 Git Bash 中克隆成功，您也许可以在 Cygwin 中进行常规操作。

在该目录中获取工作 git 的第四个选项是使用 vagrant。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-18T05:36:38.183

我遇到了同样的问题。

安装`ca-certificates`包为我解决了这个问题。

# javascript - 防止 Twitter 响应式布局在宽度 < 320px 时折叠

> ID：15176529
> 
> 赞同：0
> 
> 时间：2013-03-02T16:09:18.883
> 
> 标签：javascript, html, css, twitter-bootstrap

示例：http: [//twitter.github.com/bootstrap/examples/carousel.html](http://twitter.github.com/bootstrap/examples/carousel.html)

我希望响应式布局在宽度 < 320 像素时停止折叠，即如果宽度 < 320 像素，则显示水平滚动条。

设置它的最佳方法是什么`min-width`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:49:16.307

在引导程序中查找：

```
@media (min-width: 320px) {  

} 
```

并改变你想要发生的任何事情。

# mysql - mysql PDO where like or query 只返回 1 个结果

> ID：15176537
> 
> 赞同：2
> 
> 时间：2013-03-02T16:10:01.220
> 
> 标签：mysql, pdo, sql-like

当我通过 phpMyAdmin 手动运行以下 SQL 时，返回超过 1 行：

```
SELECT * 
FROM bread
WHERE (type LIKE '%hite%' OR type LIKE '%grain%' OR type LIKE '%brown%' ) 
AND bread_hide = 0 
LIMIT 20; 
```

但是，当我在 PDO 中运行它时，它只返回一个结果。SQL 是为每个搜索词动态构建的，如下所示：

```
 SELECT * FROM bread WHERE ( type LIKE :q0 OR type LIKE :q1 OR type LIKE :q2 ) AND bread_hide = 0 LIMIT 20; 
```

因此，如果用户输入“hite grain brown”，则绑定以下参数：

```
:q0 = %hite%
:q1 = %grain%
:q2 = %brown% 
```

手动运行时，我得到以下结果：

```
white bread
wholegrain
brown bread 
```

通过我的 PHP PDO 查询运行时，我只得到最后一个：

```
brown bread 
```

如果用户输入“hite grain”，我会得到`wholegrain`而不是`white bread`

我希望有人知道这是什么原因/解决方法，谢谢！

**php 代码：** 这是绑定参数、执行查询和检索数据的方式：

```
$statement_handle = $db_handle->prepare($breadSQL);
foreach($searchWord as $i=>$q) {
    $q = "%".$q."%";
    $statement_handle->bindParam(":q$i", $q);
}
$statement_handle->execute(); 
$statement_handle->setFetchMode(PDO::FETCH_ASSOC);
while($row = $statement_handle->fetch())
{
    $breadList[] = array('breadName' => $row['bread_name']);
} 
```

**固定代码：**

```
foreach($searchWord as $i=>$q) {
    $q = "%".$q."%";
    $statement_handle->bindValue(":q$i", $q, PDO::PARAM_STR);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:48:26.910

尝试使用带引号的那些参数

```
:q0 = '%hite%'
:q1 = '%grain%'
:q2 = '%brown%' 
```

# c# - .NET HttpClient。如何发布字符串值？

> ID：15176538
> 
> 赞同：197
> 
> 时间：2013-03-02T16:10:10.240
> 
> 标签：c#, asp.net-web-api, dotnet-httpclient

如何使用 C# 和 HttpClient 创建以下 POST 请求： ![用户代理：提琴手内容类型：application/x-www-form-urlencoded 主机：localhost：6740 内容长度：6](../Images/e9b628c439928944c8a024b236cb6f69.png)

我的 WEB API 服务需要这样的请求：

```
[ActionName("exist")]
[HttpPost]
public bool CheckIfUserExist([FromBody] string login)
{           
    return _membershipProvider.CheckIfExist(login);
} 
```

* * *

## 回答 #1

> 赞同：467
> 
> 时间：2013-03-02T16:22:42.240

```
using System;
using System.Collections.Generic;
using System.Net.Http;

class Program
{
    static void Main(string[] args)
    {
        Task.Run(() => MainAsync());
        Console.ReadLine();
    }

    static async Task MainAsync()
    {
        using (var client = new HttpClient())
        {
            client.BaseAddress = new Uri("http://localhost:6740");
            var content = new FormUrlEncodedContent(new[]
            {
                new KeyValuePair<string, string>("", "login")
            });
            var result = await client.PostAsync("/api/Membership/exists", content);
            string resultContent = await result.Content.ReadAsStringAsync();
            Console.WriteLine(resultContent);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-03-02T16:19:32.403

下面是同步调用的示例，但您可以使用 await-sync 轻松更改为异步：

```
var pairs = new List<KeyValuePair<string, string>>
            {
                new KeyValuePair<string, string>("login", "abc")
            };

var content = new FormUrlEncodedContent(pairs);

var client = new HttpClient {BaseAddress = new Uri("http://localhost:6740")};

    // call sync
var response = client.PostAsync("/api/membership/exist", content).Result; 
if (response.IsSuccessStatusCode)
{
} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2020-03-03T12:38:58.227

[在这里](http://zetcode.com/csharp/httpclient/)`JsonConvert.SerializeObject()`我找到了这篇文章，它是使用&发送帖子请求`StringContent()`到`HttpClient.PostAsync`数据

```
static async Task Main(string[] args)
{
    var person = new Person();
    person.Name = "John Doe";
    person.Occupation = "gardener";

    var json = Newtonsoft.Json.JsonConvert.SerializeObject(person);
    var data = new System.Net.Http.StringContent(json, Encoding.UTF8, "application/json");

    var url = "https://httpbin.org/post";
    using var client = new HttpClient();

    var response = await client.PostAsync(url, data);

    string result = response.Content.ReadAsStringAsync().Result;
    Console.WriteLine(result);
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-11-03T09:13:12.900

在 asp.net 的网站上有一篇关于您的问题的文章。我希望它可以帮助你。

如何用asp net调用api

[http://www.asp.net/web-api/overview/advanced/calling-a-web-api-from-a-net-client](http://www.asp.net/web-api/overview/advanced/calling-a-web-api-from-a-net-client)

这是文章 POST 部分的一小部分

以下代码发送一个 POST 请求，其中包含 JSON 格式的 Product 实例：

```
// HTTP POST
var gizmo = new Product() { Name = "Gizmo", Price = 100, Category = "Widget" };
response = await client.PostAsJsonAsync("api/products", gizmo);
if (response.IsSuccessStatusCode)
{
    // Get the URI of the created resource.
    Uri gizmoUrl = response.Headers.Location;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-02T16:19:44.450

你可以做这样的事情

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create("http://localhost:6740/api/Membership/exist");

req.Method = "POST";
req.ContentType = "application/x-www-form-urlencoded";         
req.ContentLength = 6;

StreamWriter streamOut = new StreamWriter(req.GetRequestStream(), System.Text.Encoding.ASCII);
streamOut.Write(strRequest);
streamOut.Close();
StreamReader streamIn = new StreamReader(req.GetResponse().GetResponseStream());
string strResponse = streamIn.ReadToEnd();
streamIn.Close(); 
```

然后 strReponse 应该包含您的网络服务返回的值

# html - Google Chrome“加载时”和“Dom 内容加载”有什么区别？

> ID：15176542
> 
> 赞同：1
> 
> 时间：2013-03-02T16:10:21.463
> 
> 标签：html, css

我正在使用开发工具并查看网络活动。我看到这两个。一个有红线，另一个有蓝线。有人可以解释一下有什么区别。用户何时会看到该页面。是“加载中”还是“加载 Dom 内容”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T16:12:05.587

“加载时”是指所有外部资源，例如完全加载的图像和音频。

“Dom Content Loaded”意味着 HTML 已被解析，任何修改 DOM 的脚本现在都可以安全运行。

# django - 如果没有所有字段，模型表单就无法验证？

> ID：15176548
> 
> 赞同：2
> 
> 时间：2013-03-02T16:11:02.947
> 
> 标签：django, django-forms

我有一个模型表单无法通过验证，因为我不想显示模板中的某些字段，它们对用户来说并不重要，但它们是模型的一部分，并且它们的值是动态生成的。我如何将这些字段设置为表单中不需要（它们的值是在 POST 之后生成的），以便表单可以通过验证，并且它们应该在模型中是必需的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T16:20:14.573

使用模型实例用数据填充表单。取而代之的是`form = Form()`，您将获得要保存到的模型的实例`model_object = Model.objects.get(id=27)`——（或者你可能会获取它），然后使用`form = Form(instance=model_object)`. 这将使用模型数据填充字段。

如果您希望排除字段以便动态计算值，请尝试以下步骤：

```
class Form(forms.ModelForm):
    class Meta:
        model = Model
        exclude = ('field_name', 'field_name', 'field_name', ...) # the fields you want to exclude 
```

然后：

```
def View(request):
    if request.POST:
        form = Form(request.POST)
        if form.is_valid():
            model_object = form.save(commit=False) # an unsaved model object
            model_object.field = some dynamic value
            model_object.another_field = some other dynamic value
            model_object.save() # save the model, ignore the form 
```

有关更多信息，您可以查看：[在视图中保存时设置 user_id - Django](https://stackoverflow.com/questions/8632087/setting-user-id-when-saving-in-view-django/8632377#comment21017393_8632377)

`'field_name'`更新：我在排除行中添加了引号`Form`

# java - 随机图片缩短

> ID：15176551
> 
> 赞同：0
> 
> 时间：2013-03-02T16:11:12.560
> 
> 标签：java

我只有一天的 eclipse 和 java 语言经验，今天我在这里得到了很多人的回答，并成功地按照我想要的方式开发了一个应用程序:)。谢谢大家！

现在我需要的是，我在这里有这段代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final int[] photos={R.drawable.img1, R.drawable.img2,R.drawable.img3,R.drawable.img4};

    final ImageView image=(ImageView)findViewById(R.id.imageview1);

    final Random ran=new Random();
    int i=ran.nextInt(photos.length);
    image.setImageResource(photos[i]);
    image.setOnClickListener(new View.OnClickListener()
    { 
```

在这段代码中，它只使用了 img1-img4，但我的文件夹中有 25 张图片，但应用程序只显示了这 4 张。我可以在代码中添加所有 25 张图片，稍后因为我将拥有超过 100 张图片，所以我可以将它们全部添加到代码中，但是有什么办法可以缩短它吗？我总是将它们命名为 img1...img25...img62...img99 等等，我应该使用什么代码来识别和使用文件夹中的所有图像，而不仅仅是书面图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:15:53.817

使用for循环，非常简单。

```
 for(int x = 0;x<numberofimages;x++) {
      R.drawable.img + x; //put your code here, the thing I put is wrong.
  } 
```

我知道 for 循环中的文本是错误的，但你可以弄清楚我认为:)

# asp.net-mvc - 剃刀命令不显示

> ID：15176555
> 
> 赞同：0
> 
> 时间：2013-03-02T16:11:46.633
> 
> 标签：asp.net-mvc, razor

我无法让 Razor 引擎处理下一行中的 data_content 属性。它将 @String.Format 部分视为文字字符串而不是 Razor 命令。我试过@: 和@| 无济于事。

```
@Html.TextArea("VisitPurpose", null, 
    new { 
        @data_toggle = "hover", 
        @class = "hasPopover input-xxlarge", 
        rows="6", 
        data_placement = "right", 
        data_content = "@String.Format({0}, @Resources.Resource.VisitPurpose)"  
    }) 
```

需要明确的是，这也不起作用：

```
 @Html.TextArea("VisitPurpose", null, 
        new { 
            @data_toggle = "hover", 
            @class = "hasPopover input-xxlarge", 
            rows="6", 
            data_placement = "right", 
            data_content = "@Resources.Resource.VisitPurpose)"  
        }) 
```

上面的代码在我的页面上呈现了这个。Razor 引擎不会呈现我的资源文件中的值，而是将其显示为文字字符串。

![在此处输入图像描述](../Images/f15141f42db3fb14fbeded58913e37db.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:15:23.840

因为您已经处于“代码”模式，所以您不需要`@`before `String.Format`：

```
@Html.TextArea("VisitPurpose", null, 
    new { @data_toggle = "hover", 
          @class = "hasPopover input-xxlarge", 
          rows="6", data_placement = "right", 
          data_content = String.Format("{0}", Resources.Resource.VisitPurpose)}) 
```

顺便说一句，使用您当前的代码（例如，只有`"{0}"`字符串格式的模式），您根本不需要`String.Format`：

```
@Html.TextArea("VisitPurpose", null, 
    new { @data_toggle = "hover", 
          @class = "hasPopover input-xxlarge", 
          rows="6", data_placement = "right", 
          data_content = Resources.Resource.VisitPurpose }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:19:18.667

看来这个片段有效。

我错误地假设 Resources.Resource.VisitPurpose 变量需要用引号括起来。这就是为什么我最初在那里有 String.Format 的原因。

我删除了这些引号并呈现了页面。然后，我查看了页面源代码，并低调地看到了 Razor 引擎为我放入了它们。

感谢大家的关注和耐心。

```
<div class="control-group">
        @Html.LabelFor(model => model.VisitPurpose, @UrgentCareWaitWeb.Resources.Resource.VisitPurpose, new { @class = "control-label" })
        <div class="controls">
            @Html.TextArea("VisitPurpose", null, new { @data_toggle = "hover", @class = "hasPopover input-xxlarge", rows="6", data_placement = "right", data_content =  Resources.Resource.VisitPurpose   })
        </div>
    </div> 
```

# android - 添加项目后对数组适配器进行排序

> ID：15176562
> 
> 赞同：1
> 
> 时间：2013-03-02T16:12:13.250
> 
> 标签：android, sorting, adapter

如何强制数组适配器自行排序。notifyDataSetChanged 不起作用。我想要做的是向数组 adpater 添加一个项目，然后强制它再次排序。这是我的适配器：

```
 this.noteListViewAdapter = new NoteListViewAdapter(this.GetActivityContext(), R.layout.list_view_note_item, noteItems);

    // sorting
    this.noteListViewAdapter.sort(new Comparator<NoteItem>()
    {
        @Override
        public int compare(NoteItem item1, NoteItem item2)
        {
            // TODO Auto-generated method stub
            return item2.CreationDate.compareTo(item1.CreationDate);
        };
    }); 
```

它工作正常。项目已排序。但是当我想添加新项目时，排序不起作用。它甚至没有被调用。这就是我添加新项目的方式：

```
 this.noteListViewAdapter.add(note);
    this.noteListViewAdapter.notifyDataSetChanged(); 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:17:05.260

`sort()`在将`add()`传递`note`的内容添加到`noteItems`.

或者你可以`notifyDataSetChanged()`在调用之前调用它`super.notifyDataSetChanged()`。

我认为后者更好，因为这样你在批处理`add()`项目时不会每次都排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T22:40:25.533

不要在 notifyDataSetChanged() 中调用 sort() ，否则你会得到一个 StackOverFlow ！:)

sort() 已经调用 notifyDataSetChanged()

# junit - 打开网址后超时

> ID：15176563
> 
> 赞同：1
> 
> 时间：2013-03-02T16:12:16.150
> 
> 标签：junit, rc

我正在将 Selenium RC 与 Junit 一起使用。

运行以下简单脚本后，我收到超时错误。

com.thoughtworks.selenium.SeleniumException：30000 毫秒后超时

我已经记录了使用 IDE 可以正常工作的 IDE 脚本。当使用 Junit 格式格式化相同的代码并尝试通过 Eclipse 和 Junit 运行时，它会给出上述超时错误。

```
package script;

import com.thoughtworks.selenium.*;
import java.util.regex.Pattern;

public class ComparePrice extends SeleneseTestCase {
    public void setUp() throws Exception {
        setUp("http://www.landmarkonthenet.com/", "*firefox");
    }
    public void testComparePrice() throws Exception {
        selenium.open("http://www.landmarkonthenet.com/");
        selenium.click("link=Books");
        selenium.waitForPageToLoad("60000");
        selenium.type("id=TopSearch", "junit");
        selenium.click("css=button[type=\"submit\"]");
        selenium.waitForPageToLoad("60000");
        selenium.click("xpath=(//a[contains(text(),'Desc')])[2]");
        selenium.waitForPageToLoad("60000");
        String P1 = selenium.getText("xpath=/html/body[@id='department']/div[@id='page-body']/div[@id='main-content']/div[@id='page-content']/div[3]/div[1]/article/div[2]/p/span[1]");
        System.out.println(P1);
        String P2 = selenium.getText("xpath=/html/body[@id='department']/div[@id='page-body']/div[@id='main-content']/div[@id='page-content']/div[3]/div[2]/article/div[2]/p/span[2]");
        System.out.println(P2);
        String T3 = selenium.getEval("var A = Number(\"" + P1 + "\".substr(3).replace(/,/g,'')); var B= Number(\"" + P2 + "\".substr(3).replace(/,/g,'')); var c = false; if(A>=B) C=true; C");
        System.out.println(T3);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:30:31.257

将 Selenium RC 独立 jar 更新到最新：[http](http://docs.seleniumhq.org/download/) ://docs.seleniumhq.org/download/即 `2.31.0`

放置一些下一个元素以等待您在加载 URL 后使用`waitForElementToPresent`而不是`waitForPageToLoad`

用于`windowMaximize`更好的视野。

如果您的完整会话超时，请使用`setTimeOut`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T16:13:59.720

而不是使用 selenium.waitForPageToLoad("60000");

每次点击后尝试使用以下内容

```
for (int second = 0;; second++) {
            if (second >= 60) Assert.fail("timeout");
            try { if (selenium.isVisible("next element")) break; } catch (Exception e) {}
            Thread.sleep(1000);
        } 
```

然后，您将能够找出其超时错误的确切位置，例如

```
public void testComparePrice() throws Exception {

selenium.open("http://www.landmarkonthenet.com/");

selenium.click("link=Books");

for (int second = 0;; second++) {
    if (second >= 60) Assert.fail("timeout");
    try { if (selenium.isVisible("id=TopSearch")) break; } catch (Exception e) {}
    Thread.sleep(1000);
        }

selenium.type("id=TopSearch", "junit");
selenium.click("css=button[type=\"submit\"]"); 
```

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-23T09:21:15.990

您可以尝试以下方法 -> 1\. 当您尝试浏览应用程序时。找出应用程序中的一些静态元素，并使用 For 循环和内部循环应用动态等待控制，检查该元素是否存在。

```
for (int second = 0;; second++) {
        if (second >= 160) fail("timeout");
        try { if (selenium.isTextPresent(" Web Element on the page")) break; } catch (Exception e) {}
        Thread.sleep(1000);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T20:39:26.447

in which line do you get the timeout error? usually it's when selenium can not recognize an element from the DOM, check your xpaths if they return anything. I would recommend you to use xpath finder: [https://addons.mozilla.org/en-us/firefox/addon/xpath-finder/](https://addons.mozilla.org/en-us/firefox/addon/xpath-finder/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T14:20:22.150

尝试使用 Selenium Remote Control 1.0.2 你可以在这里阅读[Selenium Remote Control 1.0.2](http://seleniumhq.wordpress.com/2010/02/22/selenium-1-0-2-release-firefox-3-6-and-snow-leopard-support/)并在那里下载 jar：

# r - 基于公式的框架摘要

> ID：15176567
> 
> 赞同：0
> 
> 时间：2013-03-02T16:12:46.710
> 
> 标签：r, aggregate

考虑以下：

```
df = data.frame(x=1:10, y = (1:10) %% 2 == 0) 
```

我想打电话给类似的东西

```
summarize(x ~ y, data = df) 
```

并获得类似的输出

```
 FALSE TRUE
Mean   5     6
Count  5     5 
```

基本上，我想要类似`xtabs`但具有可定制输出的东西。例如`xtabs(x ~ y, data = df, FUN = c(mean, length))`。

这样的事情存在吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T16:23:49.430

您`aggregate`在 base R 中寻找，但有*许多*可用选项。使用`aggregate`，您必须做一些工作才能使事情变得正确，但这是基本思想：

```
> aggregate(x ~ y, df, function(x) cbind(mean(x), length(x)))
      y x.1 x.2
1 FALSE   5   5
2  TRUE   6   5 
```

为了让您开始使用替代方案，这里是“data.table”：

```
> library(data.table)
> DT <- data.table(df)
> DT[, list(Mean = mean(x), Count = length(x)), by = "y"]
       y Mean Count
1: FALSE    5     5
2:  TRUE    6     5 
```

和 plyr：

```
> library(plyr)
> ddply(df, .(y), summarize, Mean = mean(x), Count = length(x))
      y Mean Count
1 FALSE    5     5
2  TRUE    6     5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T19:04:43.347

看一下表格包，它可以让您在公式语句中指定表格的形状、样式和汇总度量。如果您使用如下公式：

```
group + (n=1) ~ (var1 + var2)*(mean+sd) 
```

然后你会得到一个表格，每个级别都有`group`一行，底部有一个总行，然后列将是和的平均值和标准差`var1`（`var2`总共 4 列）。

还有其他选项可用于设置列和标题的格式，您可以使用自己创建的函数进行汇总，可以进行计数和百分比，以及许多其他事情。

# jquery - jQuery TABS 在新的 ASP .NET MVC4 项目下不起作用

> ID：15176574
> 
> 赞同：3
> 
> 时间：2013-03-02T16:13:35.787
> 
> 标签：jquery, html, .net, asp.net-mvc, jquery-tabs

我所做的是

1.  我创建了新的 ASP .NET MVC4 项目。

2.  我使用了[http://jqueryui.com/tabs/](http://jqueryui.com/tabs/)示例代码

所以我得到了这个：

**_Layout.schtml**

```
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title - My ASP.NET MVC Application</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />
 @*   @Styles.Render("~/Content/css")
      @Scripts.Render("~/bundles/modernizr")*@

    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>

    <script>
        $(function () {
            $("#tabs").tabs();
        });
    </script>
</head> 
```

和**Index.cshtml**

```
<div id="tabs">
  <ul>
    <li><a href="#tabs-1">Nunc tincidunt</a></li>
    <li><a href="#tabs-2">Proin dolor</a></li>
    <li><a href="#tabs-3">Aenean lacinia</a></li>
  </ul>
  <div id="tabs-1">
    <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
  </div>
  <div id="tabs-2">
    <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
  </div>
  <div id="tabs-3">
    <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>
    <p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>
  </div>
</div> 
```

1.  它根本不起作用。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T17:10:30.620

如果您的 _Layout.cshtml 看起来像：

```
<body>
    @RenderBody()

    @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false)
</body> 
```

问题是`@Scripts.Render(~/bundles/jquery")`因为您已经将它包含在页面顶部。

*更新*

使用 MVC4 中已包含的工具的更简洁的方法是：

**_Layout.cshtml**

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    @Styles.Render("~/Content/css")
    @Styles.Render("~/Content/themes/base/css")
    @Scripts.Render("~/bundles/modernizr")

</head>
<body>
    @RenderBody()

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/jqueryui")
    @RenderSection("scripts", required: false)
</body>
</html> 
```

**索引.cshtml**

```
... Add at the bottom...
@section scripts
{
    <script>
        $(function () {
            $("#tabs").tabs();
        });
    </script>
} 
```

我通过查看 App_Start\BundleConfig.cs 文件找到了这个解决方案。此外，您可能希望在包管理器控制台中运行 NuGet 更新包，以便获得 jquery 内容的当前版本。

# algorithm - 嵌套循环时间分析

> ID：15176578
> 
> 赞同：1
> 
> 时间：2013-03-02T16:14:04.087
> 
> 标签：algorithm, time-complexity, nested-loops

好的，我正在学习算法课并且正在准备考试......不幸的是......我无法理解嵌套循环时间分析背后的概念

这段代码中有三个循环

```
for (i=1->n)
 for (j=1->i)
   for (k=1->i)
     x=x+1; 
```

我不明白如何找出答案：s任何答案都会有很大帮助谢谢大家:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:29:34.477

您需要总结循环，这只是需要计算的多个 sigma：

![西格玛计算](../Images/a8e851a85647087eff58bc8ac9b46033.png)

内 sigma 中的**1**是您在最内层循环中所做的事情的复杂性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T16:21:12.310

当 时`i=1`，k-loop 运行 1 次，j-loop 运行 1 次。Total=1.1=1 time
当 时`i=2`，k-loop 运行 2 次，j-loop 运行 2 次。Total=2.2=4 times
当 时`i=3`，k-loop 运行 3 次，j-loop 运行 3 次。Total=3.3=9 次
当 时`i=n`，k-loop 运行 n 次，j-loop 运行 n 次。总计=nn=n^2 次

因此，算法的时间复杂度为 O(1+2^2+3^2+...n^2)=O(n(n+1)(2n+1)/6) =O(n^3)

# php - 确保字符串是 UTF-8 编码的

> ID：15176581
> 
> 赞同：6
> 
> 时间：2013-03-02T16:14:10.437
> 
> 标签：php, csv, utf-8

在我的应用程序中，我读取了一个 csv 文件并向用户显示内容。但是编码有问题。

我有两个 csv 文件**example1.csv**和**example2.csv**。我都在记事本++中打开过，它显示了 example1 的 ANSI 编码和没有 BOM 的 UTF-8 的 example2。

首先，我尝试[**了 mb_detect_encoding**](http://www.php.net/manual/en/function.mb-detect-encoding.php)函数来检测编码，但它在两种情况下都显示为 UTF-8，这是不正确的。

其次，我尝试使用[**utf8_encode**](http://php.net/manual/de/function.utf8-encode.php)将文件内容转换为 UTF-8 。这适用于 ANSI 文件。但是对于没有 BOM 文件的 UTF-8，它似乎被编码回 ANSI。它显示**Ã**而不是德语**ß**。其他特殊字符也一样。

我想确保在显示或处理内容之前始终采用 UTF-8 格式。那么我做错了什么吗？

* * *

这就是我使用 mb_detect_encoding 函数的方式：

```
$file_content = file_get_contents($_FILES['file']['tmp_name']);

die(var_dump( mb_detect_encoding($file_content))); 
```

它为这两个示例打印 UTF-8。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-02T19:57:24.343

## 成：另一个不便的真相

**不可能以 100% 的准确度和/或置信度检测未知文本的编码。**

在实践中，可能会出现各种结果：您可以非常确定 UTF-8 中的多语言文本将被正确检测到，而完全不可能检测出 ISO-8859 编码家族中的哪一个对应于一些文本——除非你愿意做统计分析，否则甚至不可能做出有根据的猜测！

## 我们必须处理什么？

有了这个，让我们看看你*能做*什么。首先，除非您将自定义工具带入战斗，否则您会受到`mb_detect_encoding`可以为您做的事情的限制。不幸的是，这并不是很多。姐妹函数的文档[`mb_detect_order`](http://www.php.net/manual/en/function.mb-detect-order.php)指出：

> mbstring 当前实现了以下编码检测过滤器。如果以下编码存在无效的字节序列，编码检测将失败。
> 
> UTF-8、UTF-7、ASCII、EUC-JP、SJIS、eucJP-win、SJIS-win、JIS、ISO-2022-JP。
> 
> 对于 ISO-8859-X，mbstring 始终检测为 ISO-8859-X。
> 
> 对于 UTF-16、UTF-32、UCS2 和 UCS4，编码检测将始终失败。

所以，打折日本编码，你基本上有能力区分 UTF-8、UTF-7 和 ASCII。您无法检测到 ISO-8859-X，因为如果您将其考虑在内，*任何*文本都将被“识别”为*任何*这些编码（即您将有 100% 的误报率 - 不好），并且包含 UTF 的组根本不支持-16。

不幸的是，坏消息并没有就此结束。**编码****的*顺序也很重要！***由于以 UTF-7 或 ASCII 编码的文本也是有效的 UTF-8，将 UTF-8 放在候选列表的前面将确保这是您将获得的唯一结果——因此必须不惜一切代价避免它.

由于默认检测顺序取决于 php.ini[设置](http://www.php.net/manual/en/mbstring.configuration.php#ini.mbstring.language)，因此您绝对不应该依赖它并通过设置自己的检测顺序进入已知状态：

```
mb_detect_order('ASCII, UTF-8'); // I left UTF-7 out, but who cares? 
```

所以你至少可以判断你的文本是 ASCII 还是 UTF-8，对吧？嗯，不。除非您特别要求，当您说“UTF-8”时，*您是认真*的：

```
$valid_utf8 = "\xC2\xA2";
$invalid_utf8 = "\xC2\x00";

mb_detect_order('UTF-8');
echo mb_detect_encoding($valid_utf8);   // "utf-8": correct
echo mb_detect_encoding($invalid_utf8); // "utf-8": WTF?!?!?! 
```

上面的问题是，除非您传递参数，否则 UTF-8`true`的`$strict`检测......有点过于乐观了。

## 好吧，您实际上*可以*用这件事做什么？

这是最好的——检测编码的正确方法（只是勉强在这里继续使用复数）：

```
$valid_utf8 = "\xC2\xA2";
$invalid_utf8 = "\xC2\x00";
$ascii = "hello world";

mb_detect_order('ASCII, UTF-8');
echo mb_detect_encoding($valid_utf8, mb_detect_order(), true);   // OK: "utf-8"
echo mb_detect_encoding($invalid_utf8, mb_detect_order(), true); // OK: false
echo mb_detect_encoding($ascii, mb_detect_order(), true);        // OK: "ascii" 
```

## 可以用不是有效 UTF-8 的文本做什么？

除非您有关于该文本的带外信息，否则很遗憾**没有**。

好吧，这并不完全正确。在实践中你可以做一些事情：

1.  看看文本开头是否有BOM。可能不会有，即使从数学上讲，您可能会将单字节编码误认为 Unicode，但值得一试。
2.  看看是不是 UTF-16 的味道。如果绝大多数偶数字节具有相同的值，那么您可能正在查看 UTF-16 LE。如果大多数奇数字节发生这种情况，您可能正在查看 UTF-16 BE。不幸的是，在这两种情况下，你永远无法确定。
3.  Assume that the text is in ISO-8859-X and do statistical analysis based on known properties of the script that corresponds to this encoding to see if the result is close to what you would expect. If it's close enough for some encodings in this class and way off for the others you can make an educated guess.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-02T17:59:54.937

为了检查 utf8 做这样的事情

```
if (mb_check_encoding(file_get_contents($file), 'UTF-8')) {
    // yup, all UTF-8
} 
```

# java - Java — 可以丢弃 Future 返回值吗？

> ID：15176583
> 
> 赞同：3
> 
> 时间：2013-03-02T16:14:21.123
> 
> 标签：java, java.util.concurrent

如果一个 async 方法返回一个`Future`对象，但是我们不关心底层操作是成功还是失败，那么调用该方法而不存储返回的对象是否有任何不利影响`Future`？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T16:17:50.103

如果您也不关心操作是否已执行或取消，那么可以，您可以忽略返回的 Future。

# java - 子列表索引超出范围异常

> ID：15176584
> 
> 赞同：2
> 
> 时间：2013-03-02T16:14:23.617
> 
> 标签：java, jakarta-ee

每当我运行我的 xhtml 时。它给了我以下例外。statusindex 对象的值为 5。我使用 JQuery 进行延迟滚动，所以当我的 xhml 页面 getMoreStatusList 调用 getMoreStatusList 函数时，它给了我一个索引超出范围的异常。数据库中有 26 个状态更新，因此索引越界异常对我来说毫无意义。

1) 代码

```
public List<Status> getMoreStatusList() {

    FacesContext context = FacesContext.getCurrentInstance();
    HttpSession session = (HttpSession) context.getExternalContext()
            .getSession(false);
    User user = (User) session.getAttribute("userdet");
    Query query = em.createQuery("SELECT s FROM Status s WHERE s.email='"
            + user.getEmail() + "' ORDER BY s.timeMillis desc",
            Status.class);
    List<Status> results = query.getResultList();
    Query query1 = em.createQuery("SELECT f FROM Friend f WHERE f.email='"
            + user.getEmail() + "'", Friend.class);
    List<Friend> results1 = query1.getResultList();
    Iterator<Friend> it = results1.listIterator();
    while (it.hasNext()) {
        String email = it.next().getFriendEmail();
        Query query2 = em.createQuery(
                "SELECT s FROM Status s WHERE s.email='" + email
                        + "' ORDER BY s.timeMillis desc", Status.class);
        List<Status> results2 = query2.getResultList();
        results.addAll(results2);

    }
    Collections.sort(results);
    int index = (int) session.getAttribute("statusindex");
    System.out.println(index);
    results = results.subList(index,index+5);
    session.setAttribute("statusindex", index + 5);
    return results;

} 
```

2) 例外

```
Mar 02, 2013 9:31:58 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/FreeBird_v.6] threw exception [/getMoreStatusList.xhtml @120,43 test="#{p.videostatus!=null}" /getMoreStatusList.xhtml @120,43 test="#{p.videostatus!=null}": /getMoreStatusList.xhtml @14,60 items="#{statusBean.moreStatusList}": Error reading 'moreStatusList' on type com.bean.StatusBean] with root cause
java.lang.IndexOutOfBoundsException: toIndex = 30
    at java.util.SubList.<init>(Unknown Source)
    at java.util.RandomAccessSubList.<init>(Unknown Source)
    at java.util.AbstractList.subList(Unknown Source)
    at java.util.Vector.subList(Unknown Source)
    at com.bean.StatusBean.getMoreStatusList(StatusBean.java:190)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:87)
    at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:67)
    at com.sun.faces.el.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:71)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:169)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:106)
    at com.sun.faces.facelets.tag.jstl.core.IndexedValueExpression.getValue(IndexedValueExpression.java:89)
    at org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:68)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:147)
    at org.apache.el.parser.AstNotEqual.getValue(AstNotEqual.java:38)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:106)
    at com.sun.faces.facelets.tag.TagAttributeImpl.getObject(TagAttributeImpl.java:326)
    at com.sun.faces.facelets.tag.TagAttributeImpl.getBoolean(TagAttributeImpl.java:133)
    at com.sun.faces.facelets.tag.jstl.core.IfHandler.apply(IfHandler.java:88)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:94)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:131)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:162)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:114)
    at com.sun.faces.facelets.tag.jstl.core.ForEachHandler.apply(ForEachHandler.java:214)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:131)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:162)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:114)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:94)
    at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:89)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:94)
    at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:79)
    at com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:148)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:734)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:96)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:135)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:309)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T16:30:32.853

[`List.subList()`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#subList%28int,%20int%29)的文档非常清楚：

> 抛出：`IndexOutOfBoundsException`- 对于非法的端点索引值 ( `fromIndex < 0 || toIndex > size || fromIndex > toIndex`)

在你的情况下，`toIndex > size`：

```
java.lang.IndexOutOfBoundsException: toIndex = 30 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T16:29:15.637

消息说`toIndex`是 30。这意味着`statusindex`不是 5，如您所相信的那样，而是 25：

> ```
> java.lang.IndexOutOfBoundsException: toIndex = 30 
> ```

旁注，您应该在查询中使用命名参数而不是字符串连接来传递参数。您的代码容易受到 SQL 注入攻击。如果电子邮件地址恰好包含单引号，它也会失败。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T16:29:06.683

`results = results.subList(index,index+5);`

所以它会这样做：

`results.subList(25,30);`如果通过了 25，则错误。

# css - Symfony 的样式表未加载

> ID：15176585
> 
> 赞同：0
> 
> 时间：2013-03-02T16:14:25.070
> 
> 标签：css, symfony1

我正在尝试使用 symfony 1.1.9 的 askeet 教程。

到目前为止，除了样式表没有加载外，一切都很好，请查看附件图像。

该页面应该看起来像[这样](http://gnhroofing.ca/getmeapro.ca/web/web/customer_dev.php)。也许这是一个简单的调整，我将不胜感激任何正确方向的提示。

![](../Images/db47e0de8943f70cf69de976299341df.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T22:22:20.447

**首先**，如果你现在必须选择 symfony，对于一个新的开发，你最好考虑使用[版本 2](http://symfony.com/get_started)，它是最后一个也是最新的。

* * *

我的猜测是您忘记`/sf`在 Apache 配置中定义别名。

您的虚拟主机必须如下所示：

```
<VirtualHost 127.0.0.7:80>
  DocumentRoot "/home/sfprojects/jobeet/web"
  DirectoryIndex index.php
  <Directory "/home/sfprojects/jobeet/web">
    AllowOverride All
    Allow from All
  </Directory>

  Alias /sf /home/sfprojects/jobeet/lib/vendor/symfony/data/web/sf
  <Directory "/home/sfprojects/jobeet/lib/vendor/symfony/data/web/sf">
    AllowOverride All
    Allow from All
  </Directory>
</VirtualHost> 
```

*（[我从文档中获取](http://symfony.com/legacy/doc/jobeet/1_4/en/01?orm=Propel#chapter_01_web_server_configuration_the_secure_way)）*

看到`/sf`别名了吗？它直接进入 symfony 的资产文件夹，它将显示公共页面（您尝试加载的页面）、工具栏、404 等的默认图像、js 和 css。

# python - 如何基于缩进解析块

> ID：15176586
> 
> 赞同：2
> 
> 时间：2013-03-02T16:14:25.177
> 
> 标签：python, algorithm, parsing, indentation

我正在编写一个从类似 Markdown 的标记到 HTML 的翻译器。我已经完成了脚本，除了有序/无序列表翻译。我想根据重要的空格（又名越位规则）格式化列表。示例有效输入如下所示：

```
:: List item 
   top level
 :: List item level 2
 :: List item level 2
    :: List item level 3
      :: List item level 4
 :: List item level 2

:: List item top level 
```

`::`表示一个列表项。缩进级别可能是任意的。标签不重要。我一直在研究纸上的解决方案，但我无法找到实施的方法。我该怎么办？

PS：只要它不止一个，任何任意数量的空格都表示一个新的级别，就像在 python 中一样。

我正在使用 python 来实现这一点，但我不是在寻找代码。我想解释如何做。最好我想自己实现完整的东西，没有任何库。我将在我的 jekyll 博客中使用这个标记，但这对我来说不仅仅是一个小工具，我想从这个项目中尽可能多地学习正则表达式和解析。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T04:53:42.787

@delnan 到[Python 参考](http://docs.python.org/3/reference/lexical_analysis.html#indentation)的链接提供了一种很好的方法，但是（正如参考本身所暗示的）Python 允许正确的缩进，这也使阅读感到困惑，并且（如果您尝试利用它的全部自由性）可能难以调试。

对于您的应用程序，如果您需要每个唯一数量的缩进空格来指示不同的列表级别，则可能不会让用户感到困惑。对于这些语义，您可以在不超过四行 Python 3 中找到列表的级别。您不想在代码中看到解决方案（尽管如果您愿意，我很乐意发布）所以我的做法大致如下：

1.  计算列表每行开头的空格数（不需要正则表达式）。
2.  创建一个集合并对其进行排序以给出用于该列表的每个级别的缩进空格数的列表，从最少到最多排序。
3.  创建一个字典，将每种情况下使用的缩进空格数与列表级别相关联。
4.  使用列表每行开头的空格数来引用该字典，这给出了每行的列表级别。

（已编辑以包含代码并处理多行列表项）

鉴于：

```
:: List item
   (this is the second line of the first list item)
 :: List item level 2
 :: List item level 2
    :: List item level 3
      :: List item level 4
 :: List item level 2
:: List item top leve 
```

...下面的函数生成列表：

```
:: List item (this is the second line of the first list item)
 :: List item level 2
 :: List item level 2
  :: List item level 3
   :: List item level 4
 :: List item level 2
:: List item top level 
```

...我认为这是这个测试用例的预期结果。

这是代码，用于接受来自标准输入的列表：

```
import sys

def findIndent (lst):
    # given a list of text strings, returns a list containing the
    # indentation levels for each string
    spcCount = [len(s)-len(s.lstrip(' ')) for s in lst]
    indent = sorted(set(spcCount))
    levelRef = {indent[i]:i for i in range(len(indent))}
    return [levelRef[i]+1 for i in spcCount]

lst = []
for li in sys.stdin:
    if li.lstrip(' ').find('::') == 0:
        lst.append(li.rstrip())
    else:
        lst[-1] = lst[-1].rstrip() + ' ' + li.lstrip(' ').rstrip()

for i,li in zip(findIndent(lst),lst):
    print (' '*i + li.lstrip()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:20:31.970

不是答案，但我需要块格式。

这应该解析到什么级别的列表？

```
:: List item level 
  :: List item level ?
 :: List item level ?
    :: List item level ?
 :: List item level ?
   :: List item level ? 
```

我认为您正在尝试处理列表中没有任何意义的极端情况，而实际上您应该告诉用户编写更有效的内容。

# javascript - 有条件地将按钮添加到 jQueryUI 对话框

> ID：15176588
> 
> 赞同：0
> 
> 时间：2013-03-02T16:14:28.763
> 
> 标签：javascript, jquery-ui-dialog

根据给定的条件，我想在 jQueryUI 对话框上有一个或两个按钮。

`DIV`通过将 data-includeUploadButton 设置为 0 或 1，在元素内定义条件。

我想我可以在 open 方法中创建一个按钮数组，然后使用`buttons:buttons`.

或者更容易阅读，是否可以在创建对象符号数组时直接放置条件？

或者也许有其他方式？我宁愿没有一堆全局变量。

谢谢！

```
<div id="dialog-conditional" title="dialog-conditional" data-includeUploadButton="1"></div>

$("#dialog-conditional").dialog({
    //....
    open        : function() {
        var includeUploadButton=$(this).data('includeUploadButton');
    },
    buttons     : [
        {text    : 'UPLOAD',"class"  : 'green'},
        {text    : 'CLOSE',click    : function() {$(this).dialog("close");}}
    ]    
}); 
```

# pdf - 使用 Zend_Pdf 在浏览器中打开 PDF 文件时如何设置适合页面视图

> ID：15176591
> 
> 赞同：0
> 
> 时间：2013-03-02T16:14:46.557
> 
> 标签：pdf, zend-pdf

我正在使用 Zend_Pdf 创建 PDF 文档。在浏览器中打开 PDF 文件时，Zend_Pdf 中是否有一种方法可以将视图设置为*适合页面*（或者准确地说适合用户屏幕）？像 mpdf 的 SetDisplayMode("fullpage") 函数。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:07:23.300

我对`Zend_Pdf`API 非常熟悉，我很确定这个选项不存在。我还在代码中对“ViewerPreferences”进行了搜索，但没有出现任何结果。如果存在此选项，“ViewerPreferences”是文件中需要存在的字符串的一部分，因此省略此字符串进一步表明`Zend_Pdf`.

这个答案提供了一些很好的提示，可能允许有人在其中实现该选项`Zend_Pdf`：[Set PDF to print with no scaling](https://stackoverflow.com/questions/4725711/set-pdf-to-print-with-no-scaling)

# jquery - Highchart 点击 - Extrafield

> ID：15176592
> 
> 赞同：0
> 
> 时间：2013-03-02T16:14:47.600
> 
> 标签：jquery, events, click, highcharts

我们在我们的应用程序中使用 Highcharts api。[http://jsfiddle.net/hitser/k7eDR/2/](http://jsfiddle.net/hitser/k7eDR/2/)

我有这个系列数组：

```
[{"showInLegend":false,"name":"J_02","data":[20,17,26,25],"extrafield":["<b>Time:
</b>05:44:45S<b>Speed:</b>20Km\h<b>Lat:</b>4.666810 <b>Long:</b>-74.111214","<b>Time:
</b>05:46:47<b>Speed:</b>17Km\h<b>Lat:</b>4.672675<b>Long:</b>-74.105377"," <b>Time:
</b>05:50:54<b>Speed:</b>26Km\h<b>Lat:</b>4.689762<b>Long:</b>-74.093102","<b>Time:
</b>05:57:02<b>Speed:</b>25Km\h<b>Lat:</b>7.390400<b>Long:</b>-74.073021"]}] 
```

因为我可以为每个点做一个警报事件来向我展示：

```
Name :J_02
Time : 05:44:45
Speed :20Km/h
Lat:4.666810
Long:74.111214 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:05:44.063

您可以通过以下方式在点击事件中获取它。

```
plotOptions: {
    series: {
        point: {
            events: {
                click: function() {
                    alert(this.series.options.extrafield[0]);
                }
            }
        }
    }
} 
```

然后，如果您想根据单击的点位置获取它，您可以将`x`其用作索引。

```
alert(this.series.options.extrafield[ this.x ]); 
```

[**演示**](http://jsfiddle.net/ricardolohmann/fhQGA/)

# wcf - WCF - 服务合同中的接口参数

> ID：15176593
> 
> 赞同：1
> 
> 时间：2013-03-02T16:15:05.730
> 
> 标签：wcf, interface, servicecontract

我有一个将由 .NET 客户端使用的 WCF 服务。我想在操作合约中使用一个接口作为参数。我还没有完全实现服务到能够测试这种方法的地步，如果结果不可行，我不想花很多时间在它上面。

这是这样做的正确方法吗？

```
public interface ISchedulerJob
{
    void Execute();
}

public class MyJobA : ISchedulerJob
{
public void Execute() { //... }
}

public class MyJobB : ISchedulerJob
{
public void Execute() { //... }
}

[ServiceContract]
    [ServiceKnownType(typeof(MyJobA))]
    [ServiceKnownType(typeof(MyJobB))]
    public interface ISchedulerService
    {
        [OperationContract]
        void Schedule(ISchedulerJob schedulerJob);
    } 
```

我查看了这篇文章：

[在 wcf 服务中使用类接口作为参数](https://stackoverflow.com/questions/7213083/using-class-interface-as-a-parameter-in-wcf-service)

它看起来像我正在尝试完成的工作，但是如果我尝试在接口上使用 KnownType 属性，则会出现编译错误，因此我改用了 ServiceKnownType 属性。

# html - html代码的透明注解

> ID：15176598
> 
> 赞同：1
> 
> 时间：2013-03-02T16:15:41.807
> 
> 标签：html, metadata, translation

我有一个动态创建的网页。大多数文本是使用翻译机制插入的。但当然现在必须先翻译文本。因此，除了在单独的工具中进行批量翻译之外，我还希望允许在页面中显示翻译的地方发生这种情况。

所以（我认为）我需要做的是，以某种方式标记应该翻译的文本并使用 javascript 创建一个显示翻译小部件并填写元信息的按钮。到现在为止还挺好。问题是，文本可能不仅出现在 html 节点内的 textnodes 中，而且还出现在属性中。这就是为什么我的想法（使用一些 html 标签`<translate metadata=.../>`，甚至使用 html 注释）不起作用的原因。此外，说“将这些数据放在当前的 html 标记之外”也是不可行的，因为整个代码都使用了翻译例程。

是否有另一种方法可以透明地将元信息放入 html 代码中？也许是不可见的 unicode 字符？（我使用的是 utf-8）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:31:25.043

在 HTML5 中，有一个全局[`translate`属性](http://www.w3.org/TR/html5/dom.html#the-translate-attribute)：

> 该`translate`属性是一个枚举属性，用于指定在页面本地化时是否要翻译元素的属性值及其 Text 节点子节点的值，或者是否保持它们不变。

您必须添加`translate="no"`到*不应*翻译的每个元素（请注意，子元素继承该值）。

对于应该翻译属性值而不是元素内容的极端情况，您可以`span`在内容周围添加一个元素，例如：

```
<b title="translate this, please" translate="yes"><span translate="no">Don't translate this</span></b> 
```

* * *

对于更复杂的情况，您可以查看[W3C Recommendation **Internationalization Tag Set (ITS)**](http://www.w3.org/TR/its/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T19:16:41.273

我认为您正在尝试重新发明轮子。谷歌有一个很棒的翻译 API，我认为你应该使用它。

[https://developers.google.com/translate/](https://developers.google.com/translate/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T14:09:40.137

我设法自己解决了这个问题，使用零长度的 unicode 字符。

三个字符`\u200B`（零宽度空格，ZWSP），`\u200C`（零宽度非连接符，ZWNJ）和`\u200D`（零宽度连接符，ZWJ）是不可见的控制字符。我选择 ZWSP 作为消歧的边界指标， ZWNJ 作为 binary`0`和 ZWJ 作为 binary `1`。在 PHP 中，这意味着对注释 id 进行编码`$nr`是这样完成的：

```
$binnr = decbin($nr);
$annotation = "&#x200B;";
for($i=0; $i<strlen($binnr); $i++)
    $annotation .= '&#x200'.($binnr{$i}=="0"?"c":"d").';';
$annotation .= '&#x200b;'; 
```

使用实际字符而不是 html 实体可能会更好。所以我们需要

```
return html_entity_decode($annotation, ENT_NOQUOTES, 'UTF-8'); 
```

我正在将属于这些 id 的元数据收集到一个单独的数组中，并将其放入页眉中。然后在故事的 javascript 方面，搜索 DOM 树以查找编码注释：

```
function parse_numbers(text)
{
    read = false;
    nrs = []; nr = 0;
    for(var i=0; i<text.length; i++)
    {
        if(text[i] == "\u200B") {
            read = !read;
            if(!read) {
                nrs.push(nr);
                nr = 0;
            }
        } else if(text[i] == "\u200C") {
            nr <<= 1;
        } else if(text[i] == "\u200D") {
            nr <<= 1; nr++;
        }
    }
    return nrs;
}

function buttons_recursive(node, insert)
{
    nrs = [];
    switch(node.nodeType)
    {
        case 1: //ELEMENT_NODE:
            for(var i=0; i<node.attributes.length; i++) {
                nrs.concat(buttons_recursive(node.attributes[i], false));
            }
            var new_insert = insert;
            if(node.nodeName == "BUTTON" || node.nodeName == "A") {
                new_insert = false;
            }
            for(var i=0; i<node.childNodes.length; i++) {
                nrs.concat(buttons_recursive(node.childNodes[i], new_insert));
            }
            break;
        case 2: //ATTRIBUTE_NODE:
            nrs = parse_numbers(node.value);
            break;
        case 3: //TEXT_NODE:
            nrs = parse_numbers(node.nodeValue);
            break;
        default:
            return [];
    }
    if(insert) {
        for(var i=nrs.length-1; i>=0; i--) {
            node.parentNode.insertBefore(create_inline_button(nrs[i]), node.nextSibling);
        }
        return [];
    } else {
        return nrs;
    }
} 
```

通过执行

```
buttons_recursive(document.body, true); 
```

该函数`create_inline_button`应创建控制元素以启动具有给定标识符的文本的翻译。

# node.js - 如何使用 node.js 设置脚本的最大执行时间？

> ID：15176599
> 
> 赞同：6
> 
> 时间：2013-03-02T16:15:45.463
> 
> 标签：node.js, execution-time

我为我的用户提供了一种使用 JavaScript 转换数据的灵活方法，在服务器端使用 Node.js 执行。采用这种设计，需要考虑 3 个问题：

*   [安全性：我使用沙箱](http://gf3.github.com/sandbox/)解决了安全问题，以避免使用本机 Node.js 库。

*   资源：我们可以使用 v8 选项轻松设置最大内存使用量`--max_executable_size`。关于 CPU 使用率，我会看看如何使用`cpulimit`or来管理它`renice`，现在它并不重要。

*   时间：我需要限制脚本的执行时间，以避免它们像僵尸一样运行。我在这里卡住了。

我尝试了类似的东西：

```
 node -e '
    setTimeout(function() {
       console.log("timeout");
       process.exit;
    }, 5000);
    console.log("begin");
    while (1);
 ' 
```

但是这段代码只显示“开始”，似乎我的超时从未被调用。任何的想法 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-09T21:09:30.517

您可能想查看tripwire ( [https://github.com/tjanczuk/tripwire](https://github.com/tjanczuk/tripwire) )。它是一个可以杀死失控节点脚本的模块，您可以设置超时。它是一个本地节点模块，所以这是需要考虑的一件事，但它适用于 Mac、Windows 和 Linux。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-02T16:38:01.520

不幸的是，如果您的用户可以启动阻塞操作（如`while(1)`），则无法告诉 Node 在一定时间后退出，因为阻塞操作会阻止`setTimeout`处理程序触发。要么确保用户启动的东西不会阻塞主循环，要么（这是一个*非常*糟糕的主意）使用某种外部自动终止/超时来破坏节点进程。

基本上，您可以使用 Node 来限制*非阻塞*代码的执行时间，但 Node 的全部意义在于阻塞代码会阻塞一切。如果您的用户确实能够运行任意代码，我会考虑在更高级别运行您的进程管理器/超时杀手：例如，使用 Node 的[exec](http://nodejs.org/api/child_process.html)工具生成具有终止超时的进程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-06-13T22:43:30.800

Node 的[内置`vm`模块](https://nodejs.org/api/vm.html)提供了`module.evaluate`，`script.runInContext`以及其他几种方法，它们将在沙盒环境中运行代码，并且可以`timeout`选择指定允许 VM 运行的最长时间（以毫秒为单位）。

请注意，在 Node.js 中运行不受信任的代码*充满了潜在的安全问题*。甚至 VM 模块都明确表示“ **vm 模块不是一种安全机制。不要使用它来运行不受信任的代码。** ”（为什么不呢？ [这是为什么不这样做的一个原因](https://www.quora.com/What-are-the-use-cases-for-the-Node-js-vm-core-module)：看起来它运行起来应该是无害的，`vm.runInNewContext("this.constructor.constructor('return process')().exit()")`但实际上它将导致节点终止。

您也可以考虑使用[Patrik Simek](https://github.com/patriksimek)的[vm2](https://github.com/patriksimek/vm2)，它提供了类似的功能，但声称“使用列入白名单的 Node 的内置模块运行不受信任的代码。安全！” 文档中的一个示例：

```
const {VM} = require('vm2');

const vm = new VM({
    timeout: 1000,
    sandbox: {}
});

vm.run("process.exit()"); // throws ReferenceError: process is not defined 
```

# c - 如何在简单的 Pthread 编程中分配数组变量？

> ID：15176603
> 
> 赞同：2
> 
> 时间：2013-03-02T16:16:27.430
> 
> 标签：c, arrays, pthreads, variable-assignment

我是 Pthread 编程的新手。

我一直在尝试以一种非常简单的方式使用 Pthread，如下面的代码，它在我的 CodeBlock 中运行良好，因为我已经包含了 dll 和 bin 文件。

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>

void *printNumber(void *x);

int main(){
    pthread_t threadA, threadB, threadC, threadD;
    pthread_create(&threadA, NULL, printNumber, (void *)"Sponge");
    pthread_create(&threadB, NULL, printNumber, (void *)"Star");
    pthread_create(&threadC, NULL, printNumber, (void *)"Squid");
    pthread_create(&threadD, NULL, printNumber, (void *)"Crab");
    pthread_exit(NULL); 
    return 0;
}

void *printNumber(void *x){
    char* id = (char*)x;
    int i;
    for(i=0;i<100;i++){
        printf("Thread %s: printing integer value %i\n", id, i);
    }
    pthread_exit(NULL);
} 
```

然后我编写了另一个简单的程序，使用 Pthread 将 2 个数组（arrayA + arrayB）添加到 arrayC 中。这是我的简单代码。一切都是硬编码的，在 main() 中没有循环等，因为我想让它尽可能简单，以便我理解如何创建单个 Pthread。

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>

#define SIZE 16
#define UPPER_RAND 100
#define NUM_THREADS 4

// HEADER PROCEDURES    
void randomGenerator(int arr[]);
void printArray(int arr[]);
void *addArrayPthread(void *x);

typedef struct {
    int startIdx;
    int arrC[SIZE], arrA[SIZE], arrB[SIZE];
} someType;

int main(){
    printf("A Simple Program To Add Arrays Using PThread\n");
    int arrayA[SIZE];
    int arrayB[SIZE];
    int arrayC[SIZE];

    randomGenerator(arrayA);
    printArray(arrayA);

    randomGenerator(arrayB);
    printArray(arrayB);

    someType *w,*x,*y,*z;
    w = (someType*) malloc(sizeof(someType));
    x = (someType*) malloc(sizeof(someType));
    y = (someType*) malloc(sizeof(someType));
    z = (someType*) malloc(sizeof(someType));

    (*w).startIdx = 0;
    (*w).arrA = arrayA;
    (*w).arrB = arrayB;
    (*w).arrC = arrayC;

    (*x).startIdx = 4;
    (*x).arrA = arrayA;
    (*x).arrB = arrayB;
    (*x).arrC = arrayC;

    (*y).startIdx = 8;
    (*y).arrA = arrayA;
    (*y).arrB = arrayB;
    (*y).arrC = arrayC;

    (*z).startIdx = 12;
    (*z).arrA = arrayA;
    (*z).arrB = arrayB;
    (*z).arrC = arrayC;

    pthread_t threadA, threadB, threadC, threadD;
    pthread_create(&threadA, NULL, addArrayPthread, (void *)w);
    pthread_create(&threadB, NULL, addArrayPthread, (void *)x);
    pthread_create(&threadC, NULL, addArrayPthread, (void *)y);
    pthread_create(&threadD, NULL, addArrayPthread, (void *)z);

    pthread_join(threadA, NULL);
    pthread_join(threadB, NULL);
    pthread_join(threadC, NULL);
    pthread_join(threadD, NULL);

    return 0;
}

//=====================================================================================//

void randomGenerator(int arr[]){
    printf("Generating random value for the array...\n");
    int i;
    for (i=0;i<SIZE;i++){
        arr[i] = (rand() % UPPER_RAND);
    }
}

void printArray(int arr[]){
    printf("Display the array value...\n");
    int i;
    printf("[");
    for (i=0;i<SIZE;i++){
        printf("%i, ",arr[i]);
    }
    printf("]\n");
}

void *addArrayPthread(void *x){
    someType *p = (someType *) x;
    printf("Adding to arrays, starting from index #%i\n",(*p).startIdx);
    int blockSize = SIZE/NUM_THREAD;
    int end = (*p).startIdx + blockSize;
    int i;
    for (i=(*p).startIdx;i<end;i++){
        (*p).arrC[i] = (*p).arrA[i] + (*p).arrB[i];
    }
} 
```

我在这些行周围收到 12 条错误消息： (*x).arrA = arrayA; 等等

```
||In function `int main()':|
\pth_array.c|58|error: ISO C++ forbids assignment of arrays| 
```

这是我的问题：

1.  为什么禁止分配数组？以及如何解决？
2.  在上面的第一个程序中，我将**pthread_exit(NULL)**放入了两次：在 main() 和 void* 函数中。我想我只需要放一次。那么我到底应该把它放在哪里呢？在 main() 中还是在 void* 函数中？
3.  是否必须在返回 0 之前将**pthread_join放在 main() 中？**

先感谢您。你的解释对我有很大的帮助。

谢谢

PS：我在下面的部分中发布了另一个类似的问题（关于矩阵）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:56:03.410

类似的东西怎么样：

```
typedef struct {
    int startIdx;
    int *arrC, *arrA, *arrB;
} someType;

[...]

x->arrA = arrayA
[...] 
```

pthread_join 是必需的，因为您希望在退出应用程序之前等待每个线程完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:48:42.657

出色地，

1.  您不能直接在 C 中复制数组。[这里](https://stackoverflow.com/questions/1022379/copying-an-array-in-c)已经很好地解释了。
2.  pthread_exit 的确切功能在[这里](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_exit.html)明确说明；示例也可[在此处](http://www.thegeekstuff.com/2012/04/terminate-c-thread/)获得。也就是说调用应该放在 printNumber(void *x) 中，而不是 main() 中。
3.  pthread_join 的确切功能在[此处](http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_join.html)已明确说明。因此，要将控制权传递给线程，需要调用 pthread_join。

# fortran - Fortran 存储连接的字符串

> ID：15176610
> 
> 赞同：2
> 
> 时间：2013-03-02T16:17:29.950
> 
> 标签：fortran

我有一个简单的程序：

```
PROGRAM concatenate

CHARACTER::char*11,name*4

CHARACTER(20)::charname

char='hello there'
name='Fred'

WRITE(*,*) char

WRITE(*,*) name

charname = char // ', ' // name

WRITE(*,*) charname

END PROGRAM 
```

假设我不想提前指定变量 charname 的长度，让它的长度自动由 char 和 name 的长度决定。我可以在 Fortran 中做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T17:07:32.023

是的，你可以这样声明`charname`：

```
character(len=:), allocatable :: charname 
```

`charname`当您为其赋值时，编译器/运行时将负责制作正确的长度

```
charname = char//','//name 
```

您甚至可以使用另一个语句自动重新分配它，例如

```
charname = char//', Mr'//name 
```

这一切都取决于您的编译器是否已经实现了 Fortran 2003 的这些功能，但所有广泛使用的编译器的最新版本都具有。

# java - 为什么我的代码没有给出编译错误？

> ID：15176613
> 
> 赞同：3
> 
> 时间：2013-03-02T16:17:43.347
> 
> 标签：java

在下面的代码中，我将数据分配给最终对象。但没有得到编译错误。

```
class Name {
    private String name;

    public Name (String s) {
        this.name = s;
    }

    public void setName(String s) {
        this.name = s;
    }
}

private void test (final Name n) {
    n.setName("test");//here exception coming but not giving compile error
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T16:19:01.973

因为`final`适用于引用`n`，而不是引用的对象`n`。

所以你不能这样做：

```
n = new Name("test"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-02T16:19:57.043

来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.4)：

> 一旦分配了最终变量，它总是包含相同的值。***如果最终变量持有对对象的引用，则对象的状态可能会通过对对象的操作而改变，但变量将始终引用同一个对象。***

所以可以操作指向的对象的状态`n`

```
private void test(final Name n) {
    n.setName("test");
} 
```

但你不能`n`存储另一个对象

```
private void test(final Name n) {
    n = new Name("test"); //Can't do this
} 
```

# php - 使用 JavaScript 动态添加字段使字段消失

> ID：15176618
> 
> 赞同：0
> 
> 时间：2013-03-02T16:17:53.980
> 
> 标签：php, javascript, jquery, forms

这是我的 JS 代码：

```
<script language="javascript">
function addInput() {
    document.getElementById('text').innerHTML += "<input type='text' value='' name='a1[]' size='60' />";
    document.getElementById('text').innerHTML += "<input type='text' value='' name='a2[]' size='9' /><br />";
}

function addInput1() {
    document.getElementById('text1').innerHTML += "<input type='text' value='' name='b[]' size='30' /><br />";
}

function addInput2() {
    document.getElementById('text2').innerHTML += "<input type='text' value='' name='c[]' size='30' />
}
</script> 
```

这是我的 PHP 表单代码：

```
<form method="post" enctype="multipart/form-data" name="form1" >

<input type="submit" onclick="addInput()" name="add" value="Add Other" />
<div id="text"></div>

<input type="submit" onclick="addInput1()" name="add1" value="Add Other" />
<div id="text1"></div>

<input type="submit" onclick="addInput2()" name="add2" value="Add Other" />
<div id="text2"></div>

<input type="submit" name="submit" value="Submit" />
</form> 
```

当我添加字段时，它工作得很好，但是当我尝试编辑字段时，页面重置并且所有添加的字段都消失了。

我的 JS 代码有问题吗？有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:22:15.740

您正在使用提交按钮添加输入，但提交按钮提交表单更好地使用按钮输入，例如

```
<input type="button"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:40:30.870

提交按钮用于提交表单。最好使用按钮，但返回`false`也会停止按钮的默认行为。前任：

```
function addInput() {
  // your code
  return false;
} 
```

在html上：

```
<input type="submit" onclick="return addInput()" name="add" value="Add Other" /> 
```

# python - 对python程序的CPU时间进行计时？

> ID：15176619
> 
> 赞同：17
> 
> 时间：2013-03-02T16:18:06.573
> 
> 标签：python, time, cpu, profile, execution

我想为我的代码片段计时，我只想要 CPU 执行时间（忽略操作系统进程等）。

我试过time.clock()，它看起来太不精确了，每次都给出不同的答案。（理论上，如果我为相同的代码片段再次运行它，它应该返回相同的值？？）

我已经用 timeit 玩了大约一个小时。基本上对我来说扼杀它的是“设置”过程，我最终不得不导入大约 20 个函数，这是不切实际的，因为我实际上只是将我的代码重新写入设置部分以尝试使用它。

Cprofiles 看起来越来越有吸引力，但它们是否会返回 CPU 时间？还有一个小问题——它输出的信息太多了。有什么方法可以将输出的信息放入 txt 或 .dat 文件中，以便我实际阅读它？

干杯

操作系统：Ubuntu 程序：python 2.7

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-02T16:28:52.813

听起来您正在寻找一种方法来计时整个**进程的**执行时间，您可以做的最好的事情是使用[timeit.default_timer()](http://docs.python.org/2/library/timeit.html#timeit.default_timer)，它提供了最精确的 time.clock() 或 time.time() 函数可用当前平台，但它是**系统范围的**时间，这意味着其他进程可能会干扰您的测量。

以下是 timeit.default_timer() 文档中的信息：

> 以特定于平台的方式定义默认计时器。在 Windows 上，time.clock() 的粒度为微秒，但 time.time() 的粒度为 1/60 秒。在 Unix 上，time.clock() 的粒度为 1/100 秒，而 time.time() 则更精确。在任一平台上，**default_timer() 测量挂钟时间，而不是 CPU 时间**。这意味着在同一台计算机上运行的其他进程可能会干扰计时。

您应该尝试测试可能可以访问不同时间 API 的 c 模块。

* * *

最好的方法是使用[time.process_time()](http://docs.python.org/dev/library/time.html#time.process_time)，它仅在**python 3.3 及更高**版本中可用，这是来自文档的信息：

> 返回当前进程**的系统和用户 CPU 时间之和**的值（以秒为单位） 。它不包括睡眠期间经过的时间。根据定义，它是**进程范围**的。返回值的参考点是未定义的，因此只有连续调用的结果之间的差异才有效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-02T16:34:44.847

代替`time.clock()`，使用[`timeit.default_timer()`](http://docs.python.org/2/library/timeit.html#timeit.default_timer); 它为您的平台使用最准确的选项。例如，对于 Ubuntu，这将`time.time()`改为使用。

使用时`timeit`，创建一个设置函数，然后您可以重新使用它`timeit`。是的，这看起来有点工作，但它可以确保您对真正想要测量的内容进行计时，并且不会在时间关键的测量部分中包含设置代码。

# java - Math.random 打印出 10 个随机整数，但它们都是同一个数字？

> ID：15176620
> 
> 赞同：-2
> 
> 时间：2013-03-02T16:18:06.877
> 
> 标签：java

在下面的程序中，询问用户他想从哪个数字范围生成 10 个随机数，但是，一旦用户输入他的选择，打印的数字都是一样的？

```
import java.io.*;

public class RandomInt
{
    public static void main (String [] args) throws IOException
    {
        String inGuess;
        int theGuessInt = 0;
        int theNum;
        int theNum2;
        BufferedReader myInput = new BufferedReader (new InputStreamReader (
                System.in));
        System.out
                .println ("Hello this program generates random numbers from 0-10 or 20-30");
        System.out
                .println ("Please input '1' for the random generation of 0-10, or '2' for the generation of 20-30");
        inGuess = myInput.readLine ();
        theGuessInt = Integer.parseInt (inGuess);
        // Generate random numbers from 0 to 10
        theNum = (int) (Math.random () * 10 - 0) + 0;
        // Generate random numbers from 20 to 30
        theNum2 = (int) (Math.random () * 30 - 20) + 20;
        if (theGuessInt == 1)
        {
            System.out
                    .println (" You chose to generate ten random numbers from 0-10");
            System.out.println (" Please wait....(Press any key to con't)");
            inGuess = myInput.readLine ();
            System.out.println (theNum);
            System.out.println (theNum);
            System.out.println (theNum);
            System.out.println (theNum);
            System.out.println (theNum);
            System.out.println (theNum);
            System.out.println (theNum);
            System.out.println (theNum);
            System.out.println (theNum);
            System.out.println (theNum);
        }
        if (theGuessInt == 2)
        {
            System.out
                    .println (" You chose to generate ten random numbers from 20-30");
            System.out.println (" Please wait....(Press any key to con't)");
            inGuess = myInput.readLine ();
            System.out.println (theNum2);
            System.out.println (theNum2);
            System.out.println (theNum2);
            System.out.println (theNum2);
            System.out.println (theNum2);
            System.out.println (theNum2);
            System.out.println (theNum2);
            System.out.println (theNum2);
            System.out.println (theNum2);
            System.out.println (theNum2);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T16:19:56.280

好吧，你正在做：

```
System.out.println(theNum);
System.out.println(theNum);
System.out.println(theNum);
System.out.println(theNum);
System.out.println(theNum);
System.out.println(theNum);
System.out.println(theNum);
System.out.println(theNum);
System.out.println(theNum); 
```

这会打印十次相同的数字。您需要`theNum`在每个之前分配`println()`或将数字存储在数组中并在循环中打印出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T16:22:31.660

以下代码显然打印了 10 次相同的数字：

```
System.out.println (theNum);
System.out.println (theNum);
System.out.println (theNum);
System.out.println (theNum);
System.out.println (theNum);
System.out.println (theNum);
System.out.println (theNum);
System.out.println (theNum);
System.out.println (theNum);
System.out.println (theNum); 
```

尝试做：

```
System.out.println ((int) (Math.random () * 10 - 0) + 0);
System.out.println ((int) (Math.random () * 10 - 0) + 0);
System.out.println ((int) (Math.random () * 10 - 0) + 0);
System.out.println ((int) (Math.random () * 10 - 0) + 0);
System.out.println ((int) (Math.random () * 10 - 0) + 0);
System.out.println ((int) (Math.random () * 10 - 0) + 0);
System.out.println ((int) (Math.random () * 10 - 0) + 0);
System.out.println ((int) (Math.random () * 10 - 0) + 0);
System.out.println ((int) (Math.random () * 10 - 0) + 0);
System.out.println ((int) (Math.random () * 10 - 0) + 0); 
```

# java - 组合框模型集selecteditem

> ID：15176623
> 
> 赞同：0
> 
> 时间：2013-03-02T16:18:46.883
> 
> 标签：java, swing, netbeans, selection, jcombobox

我有以下代码：

```
package nypdapp;

import java.sql.*;
import javax.swing.*;

public class CaseFileAddFrame extends javax.swing.JFrame {

    /**
     * Creates new form CaseFileFrame
     */
    private Connection Econn;
    private int cfid;
    private boolean wijzig;
    private DefaultListModel DetectiveListModel = new DefaultListModel();
    private DefaultListModel EmployeeTotListModel = new DefaultListModel();
    private DefaultListModel WitnessModel = new DefaultListModel();
    private DefaultListModel EvidenceModel = new DefaultListModel();
    private DefaultListModel SuspectsModel = new DefaultListModel();
    private DefaultComboBoxModel DistrictModel = new DefaultComboBoxModel();
    private DefaultComboBoxModel LocationModel = new DefaultComboBoxModel();
    SpinnerModel spmodel = new SpinnerNumberModel(2013,1950,2013,1);
    public CaseFileAddFrame(int cfid, boolean wijzig) {
        initComponents();
        this.cfid = cfid;
        this.wijzig=wijzig;
        s1.setVisible(false);
        s3.setVisible(false);
        s4.setVisible(false);
        YearSn.setModel(spmodel);
        try
        {
            SimpleDataSource.init();
            Econn = SimpleDataSource.getConnection();
        }
        catch(SQLException | ClassNotFoundException e)
        {
            System.out.println(e);
        }
        setDistricts();
        getSelectedDistrict();
        ClassCB.setEnabled(false);
        if(wijzig == true)
        {
            setInformation();
        }        
    }

    private void setLocation(int lid)
    {
        try
        {
            Statement userStat = Econn.createStatement();
            String userquery = "SELECT name, district_name FROM location l INNER JOIN district d ON l.distr_ic = d.district_id WHERE l_id = "+lid;
            ResultSet result = userStat.executeQuery(userquery);
            result.next();
            String name = result.getString("district_name");
            System.out.println("DBName: "+name);
            int i = DistrictModel.getSize();
            for(int p =0; p < i; p++)
            {
                System.out.println("Current:"+DistrictModel.getElementAt(p));
                if(DistrictModel.getElementAt(p).equals(name))
                {
                    //DistrictModel.setSelectedItem(p);
                    DistrictCB.setSelectedIndex(p);
                    System.out.println("Done<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<");
                }
            }
        }
        catch(SQLException e)
        {
            System.out.println(e);
        }         
    }
   private void setInformation()
    {
        try
        {
            Statement userStat = Econn.createStatement();
            String userquery = "SELECT * FROM casefile WHERE cf_id = "+this.cfid;
            ResultSet result = userStat.executeQuery(userquery);
            result.next();
            switch(result.getInt("crime")) 
            {
                case 0: 
                {
                    CrimeCB.setSelectedIndex(0);
                }
                    break;
                case 1: 
                {
                    CrimeCB.setSelectedIndex(1);
                }
                    break;
                case 2: 
                {
                    CrimeCB.setSelectedIndex(2);
                }
                    break;
                default: 
                {
                    CrimeCB.setSelectedIndex(0);
                }
            }
            if(CrimeCB.getSelectedIndex() == 2)
            {
                ClassCB.setEnabled(true);
            switch (result.getInt("classtype")) 
            {
                case 0: 
                {
                    ClassCB.setSelectedIndex(0);
                }
                    break;
                case 1: 
                {
                    ClassCB.setSelectedIndex(1);
                }
                    break;
                case 2: 
                {
                    ClassCB.setSelectedIndex(2);
                }
                    break;
                case 3: 
                {
                    ClassCB.setSelectedIndex(3);
                }
                    break;
                case 4: 
                {
                    ClassCB.setSelectedIndex(4);
                }
                    break;
                case 5: 
                {
                    ClassCB.setSelectedIndex(5);
                } 
                    break;
                case 6: 
                {
                    ClassCB.setSelectedIndex(6);
                }
                    break;
                case 7: 
                {
                    ClassCB.setSelectedIndex(7);
                }
                    break;
                case 8: 
                {
                    ClassCB.setSelectedIndex(8);
                }  
                    break;
                default: 
                {
                    ClassCB.setSelectedIndex(0);
                }
            }
            }
            else
            {
                ClassCB.setEnabled(false);
            }

            switch (result.getInt("type")) 
            {
                case 0: 
                {
                    TypeCB.setSelectedIndex(0);
                }
                    break;
                case 1: 
                {
                    TypeCB.setSelectedIndex(1);
                }
                    break;
                case 2: 
                {
                    TypeCB.setSelectedIndex(2);
                }
                    break;
                case 3: 
                {
                    TypeCB.setSelectedIndex(3);
                }
                    break;
                case 4: 
                {
                    TypeCB.setSelectedIndex(4);
                }
                    break;
                case 5: 
                {
                    TypeCB.setSelectedIndex(5);
                } 
                    break;
                case 6: 
                {
                    TypeCB.setSelectedIndex(6);
                }
                    break;
                case 7: 
                {
                    TypeCB.setSelectedIndex(7);
                }
                    break;
                case 8: 
                {
                    TypeCB.setSelectedIndex(8);
                }       
                    break;
                default: 
                {
                    TypeCB.setSelectedIndex(0);
                }
            }
            SubjectTF.setText(result.getString("subject"));
            Date date = result.getDate("date");
            int month = date.getMonth();
            int day = date.getDate();
            int year = date.getYear()+1900;
            MonthCB.setSelectedIndex(month);
            DayCB.setSelectedIndex(day);
            spmodel.setValue(year);
            AssignedDATF.setText(result.getString("assignedDA"));
            FRNameTF.setText(result.getString("fr_id"));
            DescriptionTA.setText(result.getString("description"));
            setLocation(result.getInt("lid"));
        }
        catch(SQLException e)
        {
            System.out.println(e);
        }       
    }    
    private void setDistricts()
    {
        try
        {
            Statement userStat = Econn.createStatement();
            String userquery = "SELECT district_id, district_name FROM district";
            ResultSet userResult = userStat.executeQuery(userquery);
            while(userResult.next())
            {
               int ids = userResult.getInt("district_id");
               String name = userResult.getString("district_name");
               DistrictModel.addElement(new DistrictItem(name,ids));
            }
            DistrictCB.setModel(DistrictModel);
        }
        catch(SQLException e)
        {
            System.out.println(e);
        }
    }                                              

    private void SubmitCaseFileButtonActionPerformed(java.awt.event.ActionEvent evt) {                                                     
        if(validation() == false)
        {
            javax.swing.JOptionPane.showMessageDialog(null, "WARNING\nCheck the field validation!\nIf there is no Assigned DA Enter 'Unknown'");
        }
        else if(wijzig == false)
        {
            int crime = CrimeCB.getSelectedIndex();
            int crimeclass;
            if(ClassCB.isEnabled() == true)
            {
                crimeclass = ClassCB.getSelectedIndex();
            }
            else
            {
                crimeclass = 0;
            }
            String subject = SubjectTF.getText();
            int month = MonthCB.getSelectedIndex()+1;
            int day = DayCB.getSelectedIndex()+1;
            int year = Integer.parseInt(spmodel.getValue().toString());
            Date date = ToSQLClass.toSqlDate(year, month, day);
            int crimetype = TypeCB.getSelectedIndex();
            LocationSItem li = (LocationSItem)LocationCB.getSelectedItem();
            int locationid = li.id;
            String assignedDA = AssignedDATF.getText();
            String description = DescriptionTA.getText();
            String fr = FRNameTF.getText();
            try
            {
                PreparedStatement addstat = Econn.prepareStatement("INSERT INTO casefile VALUES(cf_id,?,?,?,?,?,?,?,?,?,?)");
                addstat.setString(1, subject);
                addstat.setInt(2, crime);
                addstat.setInt(3, crimetype);
                addstat.setString(4, description);
                addstat.setString(5, assignedDA);
                addstat.setString(6, fr);
                addstat.setNull(7,java.sql.Types.INTEGER);
                addstat.setDate(8, date);
                addstat.setInt(9, crimeclass);
                addstat.setInt(10, locationid);
                addstat.execute();    
                javax.swing.JOptionPane.showMessageDialog(null, "WARNING\nCasefile added!\n\nDon't forget to add suspects, witnesses, detectives and evidence!");
                this.dispose();
            }
            catch(SQLException e)
            {
                System.out.println(e);
            }
        }
        else
        {
            int crime = CrimeCB.getSelectedIndex();
            int crimeclass;
            if(ClassCB.isEnabled() == true)
            {
                crimeclass = ClassCB.getSelectedIndex();
            }
            else
            {
                crimeclass = 0;
            }
            String subject = SubjectTF.getText();
            int month = MonthCB.getSelectedIndex()+1;
            int day = DayCB.getSelectedIndex()+1;
            int year = Integer.parseInt(spmodel.getValue().toString());
            Date date = ToSQLClass.toSqlDate(year, month, day);
            int crimetype = TypeCB.getSelectedIndex();
            LocationSItem li = (LocationSItem)LocationCB.getSelectedItem();
            int locationid = li.id;
            String assignedDA = AssignedDATF.getText();
            String description = DescriptionTA.getText();
            String fr = FRNameTF.getText();
            try{
            Statement addstat = Econn.createStatement();            
            addstat.executeUpdate("UPDATE casefile SET subject = '" + subject
                       + "' ,assignedDA = '" + assignedDA
                       + "' ,description = '" + description
                       + "' , fr_id = '" + fr
                        +"',date = '"+date
                        +"' ,crime = "+crime
                        +" ,crimeclass = " +crimeclass
                        +" ,crimetype = " +crimetype
                        +" ,lid = " +locationid
                       + " WHERE cf_id = " + this.cfid);         
            }
            catch(SQLException e) { System.out.println(e); }
        }
    }                                                                                           
    private void getSelectedDistrict()
    {
        try
        {
            LocationModel.removeAllElements();
            DistrictItem di = (DistrictItem)DistrictCB.getSelectedItem();
            Statement userStat = Econn.createStatement();
            String userquery = "SELECT l_id, name FROM location WHERE distr_ic = "+di.id;
            ResultSet userResult = userStat.executeQuery(userquery);
            while(userResult.next())
            {
               int ids = userResult.getInt("l_id");
               String name = userResult.getString("name");
               LocationModel.addElement(new LocationSItem(ids,name));
            }
            LocationCB.setModel(LocationModel);
        }
        catch(SQLException e)
        {
            System.out.println(e);
        }
    }
    private void DistrictCBItemStateChanged(java.awt.event.ItemEvent evt) {                                            
        getSelectedDistrict();
    }                                           

    private void CrimeCBItemStateChanged(java.awt.event.ItemEvent evt) {                                         
        if(CrimeCB.getSelectedIndex() == 2)
        {
            ClassCB.setEnabled(true);
        }
        else
        {
            ClassCB.setEnabled(false);
        }
    }                
} 
```

DistrictModel 包含从 setDistricts() 方法检索到的每个地区。

我认为它的作用是不言自明的。问题是，它永远不会进入 if 语句（即使它打印 de districtmodel.getelementat 中的所有项目），所以它确实通过 for 循环正确运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:56:03.210

好的。现在我们可以看到代码，答案很简单。地区模型包含以下实例`DistrictItem`：

```
DistrictModel.addElement(new DistrictItem(name,ids)); 
```

然后你将这个模型的每个元素与一个字符串进行比较。所以很明显，比较总是错误的，因为 DistrictItem 不能等于 String。只有一个字符串可以等于一个字符串。

因此，假设地区名称是唯一的（但您可能应该使用 ID 而不是名称），您应该遍历元素并找到与您检索到的名称相同的元素：

```
int i = DistrictModel.getSize();
for (int p = 0; p < i; p++) {
    DistrictItem currentDistrictItem = (DistrictItem) DistrictModel.getElementAt(p);
    if (currentDistrictItem.getName().equals(name)) {
        DistrictCB.setSelectedIndex(p);
        break;
    }
} 
```

此外，您应该尊重 Java 命名约定：变量以 lwoercase 字母开头：`districtModel`而不是`DistrictModel`（所有其他变量都相同）

# maven - Maven 模块版本控制 - 最佳实践

> ID：15176624
> 
> 赞同：3
> 
> 时间：2013-03-02T16:18:48.753
> 
> 标签：maven, versioning, multi-module

如果我有一个多模块项目，让我们将其简化为：

*   模块一
*   模块 b

其中模块 b 依赖于模块 a。

如果我在模块 b 中进行了更改，并更新了它的版本，我是否也应该增加模块 a 的版本，即使这个模块没有被更改？

谢谢你，罗克珊娜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:31:56.240

一个简短的回答：这取决于。

如果您的模块只是大型复杂项目中不可分割的部分，那么在每个项目中使用相同的版本是有意义的。

相反，如果您的模块是低耦合的（例如`A`是 Web 服务并且`B`是 Android 客户端`A`），那么您可能在每个模块中都有不同的版本。

# matlab - 将函数应用于Matlab中的多个数组

> ID：15176628
> 
> 赞同：1
> 
> 时间：2013-03-02T16:18:58.493
> 
> 标签：matlab

除了创建更大的数组之外，还有什么简单的方法可以将函数 Foo 应用于多个数组（矩阵）A、B、C？

本质上，我想要类似于 Python 中的“地图”的东西，例如：

```
L = [A, B, C]
地图（富，L）

```

让我们假设以下情况： 1\. 函数 Foo 是按组件应用的，不会改变矩阵的维度，例如 log()、exp()。2.函数是一个通用函数，作用于整个矩阵，例如removerows()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:28:14.677

默认情况下，MATLAB 中没有内置的“map”模拟。但是，您始终可以自己编写功能；[在这里](https://stackoverflow.com/questions/983163/map-function-in-matlab)已经完成了。放入您的 MATLAB bin 中，您应该可以开始使用了。

如果您希望您的代码可以跨系统移植，我建议您使用简单的循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:22:12.057

您可以使用[`varargin`](http://www.mathworks.co.uk/help/matlab/matlab_prog/support-variable-number-of-inputs.html)and`varargout`创建一个函数，该函数接受任意数量的输入并产生任意数量的输出。

那么你就可以写：

```
[D, E, F] = map(foo, A, B, C); 
```

# apache2 - 使用 apache2 和虚拟主机的子域配置

> ID：15176633
> 
> 赞同：0
> 
> 时间：2013-03-02T16:19:34.633
> 
> 标签：apache2, subdomain, virtualhost, server-name

我正在运行 ubuntu 12.04 的服务器中设置网页。

我已经停用了默认站点（ a2dissite default default-ssl ），并且我创建了一个新站点，我需要启动并工作的站点将是一个子域。

想象一下我有 foo.com。我的目标是 foo.com 抛出 403 http 错误，而 sub.foo.com 呈现我需要的网页。我的虚拟主机看起来像这样：

foo.com（默认）

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    ServerName foo.com

    DocumentRoot /var/www/default
    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>
    <Directory /var/www/default/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined

    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>
</VirtualHost> 
```

sub.foo.com

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    ServerName sub.foo.com

    DocumentRoot /var/www/sub
    <Directory />
        Options FollowSymLinks
        AllowOverride All
    </Directory>
    <Directory /var/www/sub/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined

    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>
</VirtualHost> 
```

当我访问 sub.foo.com 时，会显示该页面。当我访问 foo.com 时，显示相同的页面（：S），我需要 403 在这里...

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T13:05:34.000

您是否在 Apache 配置中启用了 NamedVirtualHosts？Apache 重新启动时是否会给您任何警告？所有网站都启用了吗？

他们配置了不同的 DocumentRoots，所以我猜你在两个路径中都有相同的文件，或者实际上两个请求都由同一个 vhost 配置提供服务。在*foo.com*的配置中，我将首先更改`Allow from all`为`Deny from all`：

```
<Directory /var/www/default/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    Deny from all
</Directory> 
```

...您有更大的机会受到 403 的欢迎；）

# javascript - 使用 Javascript (jQuery) 插入 flash 时避免页面刷新

> ID：15176636
> 
> 赞同：1
> 
> 时间：2013-03-02T16:19:44.480
> 
> 标签：javascript, jquery, flash

我有这个功能

```
function onVideo(vchat, idUser){
        $('#videollamada').html('<div class="videollamada">'+
                                '<div align="right">'+
                                    '<a href="javascript:closevll(0,'+idUser+');">Cerrar</a></div>'+
                                '<div align="center">');
        if (AC_FL_RunContent == 0) {
                    alert("This page requires AC_RunActiveContent.js.");
                } else {
                    AC_FL_RunContent(
                                     'codebase', 'http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0',
                                     'width', '350',
                                     'height', '240',
                                     'src', 'videochat',
                                     'quality', 'high',
                                     'pluginspage', 'http://www.macromedia.com/go/getflashplayer',
                                     'align', 'middle',
                                     'play', 'true',
                                     'loop', 'true',
                                     'scale', 'showall',
                                     'wmode', 'window',
                                     'devicefont', 'false',
                                     'id', 'videochat',
                                     'bgcolor', '#ffffff',
                                     'name', 'videochat',
                                     'menu', 'true',
                                     'allowFullScreen', 'true',
                                     'allowScriptAccess','sameDomain',
                                     'movie', '../../vChat/videochat?address=ec2-50-19-75-28.compute-1.amazonaws.com&from=0&to=1',
                                     'salign', ''
                                     ); //end AC code
                }
        $('#videollamada').append('</div></div>');

        usingvll= vchat;
        $('#vll_'+idUser).html('<img src="images/webcamUs.png" width="15" />&nbsp;<img src="images/phoneOut.png" width="15" />');
} 
```

它应该使视频聊天的空间可见。它本身就可以工作，我可以加载任何 html 等等。当我尝试在 Flash 中添加一个小 rtmp 客户端时，问题就来了。它不会在页面中显示它，而是刷新页面并仅在浏览器中加载 swf。

任何人都知道如何正确加载 swf，而无需刷新浏览器？

**编辑**

这就是 AC_FL_RunContent 的样子

```
function AC_FL_RunContent(){
    var ret =
    AC_GetArgs
    ( arguments, ".swf", "movie", "clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
    , "application/x-shockwave-flash"
    );
    AC_Generateobj(ret.objAttrs, ret.params, ret.embedAttrs);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T21:03:13.880

就像@d1001001 所说，使用 swfobject 而不是 AC_FL_RunContent 就可以了，就像这样：

```
<script type="text/javascript" src="chat/js/swfobject.js"></script>
<script type="text/javascript>
function onVideo(vchat, idUser){

        $('#videollamada').html('<div class="videollamada">'+
                                '<div align="right">'+
                                    '<a href="javascript:closevll(0,'+idUser+');">Cerrar</a></div>'+
                                '<div id="swfclient" align="center"><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" /></a></div></div>');
        usingvll= vchat;
        $('#vll_'+idUser).html('<img src="images/webcamUs.png" width="15" />&nbsp;<img src="images/phoneOut.png" width="15" />');

        //SWFObject
        var flashvars = {};
        flashvars.address = "ec2-50-19-75-28.compute-1.amazonaws.com";
        flashvars.from = "from";
        flashvars.to = idUser;
        var params = {};
        params.quality = "high";
        params.bgcolor = "#cccccc";
        var attributes = {};
        attributes.align = "middle";
        swfobject.embedSWF("http://50.17.226.114/vChat/videochat.swf", "swfclient", "350", "240", "9.0.0", "expressInstall.swf", flashvars, params, attributes);
}
</script> 
```

# cuda - 改进的 reduce0 CUDA 缩减代码不起作用

> ID：15176645
> 
> 赞同：0
> 
> 时间：2013-03-02T16:20:12.123
> 
> 标签：cuda, gpu

我编写了一个 CUDA 代码，它基本上为我汇总了一个数组。数组大小`N`应该是 的幂`2`，即`2^x`。但是，我的代码无法正常工作。例如，如果输出是`150177410`，我的代码输出`150177408`。`5`在过去的几个小时里，我一直在尝试调试它。任何帮助将不胜感激。下面是代码：

```
//only for array size of 2^x and TPB of 2^y as godata is = num of blocks. But num of blocks 2^sth if previous satisfied
//Works for arbitrary size array of type 2^x

#include<stdio.h>

__global__ void computeAddShared(int *in , int *out, int sizeInput){
    //not made parameters gidata and godata to emphasize that parameters get copy of address and are different from pointers in host code
    extern __shared__ float temp[];

    int tid = blockIdx.x * blockDim.x + threadIdx.x;
    int ltid = threadIdx.x;
    temp[ltid] = 0;
    while(tid < sizeInput){
        temp[ltid] += in[tid];
        tid+=gridDim.x * blockDim.x; // to handle array of any size
    }
    __syncthreads();
    int offset = 1;
    while(offset < blockDim.x){
        if(ltid % (offset * 2) == 0){
            temp[ltid] = temp[ltid] + temp[ltid + offset];
        }
        __syncthreads();
        offset*=2;
    }
    if(ltid == 0){
        out[blockIdx.x] = temp[0];
    }

}

int main(){

    int N = 8192;//should be 2^sth
    int size = N;
    int *a = (int*)malloc(N * sizeof(int));
    /* TO create random number
    FILE *f;
        f = fopen("invertedList.txt" , "w");
        a[0] = 1 + (rand() % 8);
        fprintf(f, "%d,",a[0]);
        for( int i = 1 ; i< N; i++){
            a[i] = a[i-1] + (rand() % 8) + 1;
            fprintf(f, "%d,",a[i]);
        }
        fclose(f);
        return 0;*/
    FILE *f;
    f = fopen("invertedList.txt","r");
    if( f == NULL){
            printf("File not found\n");
            system("pause");
            exit(1);
    }
    int count = 0 ;
    long actualSum = 0;
    for( int i =0 ; i < N ; i++){
        fscanf(f, "%d,", &a[count]);
        actualSum+=a[count];
        count++;
    }
    fclose(f);
    printf("The actual sum is %d\n",actualSum);
    int* gidata;
    int* godata;
    cudaMalloc((void**)&gidata, N* sizeof(int));
    cudaMemcpy(gidata,a, size * sizeof(int), cudaMemcpyHostToDevice);
    int TPB  = 256;
    int blocks = 10; //to get things kicked off
    cudaEvent_t start, stop;
    cudaEventCreate(&start);
    cudaEventCreate(&stop);
    cudaEventRecord(start, 0);
    while(blocks != 1 ){
        if(size < TPB){
            TPB  = size; // size is 2^sth
        }
        blocks  = (size+ TPB -1 ) / TPB;
        cudaMalloc((void**)&godata, blocks * sizeof(int));
        computeAddShared<<<blocks, TPB,TPB*sizeof(int)>>>(gidata, godata,size);
        //cudaFree(gidata);
        gidata = godata;
        size = blocks;
    }
    //printf("The error by cuda is %s",cudaGetErrorString(cudaGetLastError()));

    cudaEventRecord(stop, 0);
    cudaEventSynchronize(stop);
    float elapsedTime; 
    cudaEventElapsedTime(&elapsedTime , start, stop);
    printf("time is %f ms", elapsedTime);
    int *output = (int*)malloc(sizeof(int));
    cudaMemcpy(output, gidata,size *  sizeof(int), cudaMemcpyDeviceToHost);
    //Cant free either earlier as both point to same location
    cudaError_t chk = cudaFree(godata);
    if(chk!=0){
        printf("First chk also printed error. Maybe error in my logic\n");
    }

    printf("The error by threadsyn is %s", cudaGetErrorString(cudaGetLastError()));
    printf("The sum of the array is %d\n", output[0]);
    getchar();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-02T17:39:47.367

正如 talonmies 之前所说，内核本身是可以的。基本上，它是使用*算法级联*`reduce0`改进的 CUDA SDK 的内核，在将内核改进为同一 SDK时使用的*布伦特优化*的意义上。**`reduce5``reduce6`**

 **内核工作正常可以通过以下测试代码显示，该代码还与代码`reduce0`中命名的 OP 内核的性能进行了比较`reduce0_stackoverflow`。`reduce0_stackoverflow`内核还报告、注释了`reduce0`.

对于下面的测试用例，与在 GeForce GT540M 卡上`reduce0_stackoverflow`执行`0.030ms`比较。`0.049ms`

请注意，下面的代码并不要求数组大小必须是 的幂`2`。

```
#include <thrust\device_vector.h>

#define BLOCKSIZE 256

/********************/
/* CUDA ERROR CHECK */
/********************/
#define gpuErrchk(ans) { gpuAssert((ans), __FILE__, __LINE__); }
inline void gpuAssert(cudaError_t code, char *file, int line, bool abort=true)
{
    if (code != cudaSuccess) 
    {
        fprintf(stderr,"GPUassert: %s %s %d\n", cudaGetErrorString(code), file, line);
        if (abort) { getchar(); exit(code); }
    }
}

/*******************************************************/
/* CALCULATING THE NEXT POWER OF 2 OF A CERTAIN NUMBER */
/*******************************************************/
unsigned int nextPow2(unsigned int x)
{
    --x;
    x |= x >> 1;
    x |= x >> 2;
    x |= x >> 4;
    x |= x >> 8;
    x |= x >> 16;
    return ++x;
}

/*************************************/
/* CHECK IF A NUMBER IS A POWER OF 2 */
/*************************************/
bool isPow2(unsigned int x)
{
    return ((x&(x-1))==0);
}

/******************/
/* REDUCE0 KERNEL */
/******************/
/* This reduction interleaves which threads are active by using the modulo
    operator.  This operator is very expensive on GPUs, and the interleaved
    inactivity means that no whole warps are active, which is also very
    inefficient */
template <class T>
__global__ void reduce0(T *g_idata, T *g_odata, unsigned int N)
{
    extern __shared__ T sdata[];

    unsigned int tid    = threadIdx.x;                              // Local thread index
    unsigned int i      = blockIdx.x * blockDim.x + threadIdx.x;    // Global thread index

    // --- Loading data to shared memory
    sdata[tid] = (i < N) ? g_idata[i] : 0;

    // --- Before going further, we have to make sure that all the shared memory loads have been completed
    __syncthreads();

    // --- Reduction in shared memory
    for (unsigned int s=1; s < blockDim.x; s *= 2)
    {
        // --- Only the threads with index multiple of 2*s perform additions. Furthermore, modulo arithmetic is slow.       
        if ((tid % (2*s)) == 0) { sdata[tid] += sdata[tid + s]; }
        // --- At the end of each iteration loop, we have to make sure that all memory operations have been completed
        __syncthreads();
    }

    // --- Write result for this block to global memory. At the end of the kernel, global memory will contain the results for the summations of
    //     individual blocks
    if (tid == 0) g_odata[blockIdx.x] = sdata[0];
}

/***************************/
/* REDUCE0 - STACKOVERFLOW */
/***************************/
template <class T>
__global__ void reduce0_stackoverflow(T *g_idata , T *g_odata, unsigned int N) {

    extern __shared__ T sdata[];

    unsigned int tid    = threadIdx.x;                              // Local thread index
    unsigned int i      = blockIdx.x * blockDim.x + threadIdx.x;    // Global thread index

    // --- Loading data to shared memory
    //sdata[tid] = (i < N) ? g_idata[i] : 0;                        // CUDA SDK
    sdata[tid] = 0;
    while(i < N){
        sdata[tid] += g_idata[i];
        i+=gridDim.x * blockDim.x; // to handle array of any size
    }

    // --- Before going further, we have to make sure that all the shared memory loads have been completed
    __syncthreads();

    // --- Reduction in shared memory
    //  for (unsigned int s=1; s < blockDim.x; s *= 2)                  // CUDA SDK
    //  {
    //     if ((tid % (2*s)) == 0) { sdata[tid] += sdata[tid + s]; }
    //     __syncthreads();
    //  }
    unsigned int s = 1;
    while(s < blockDim.x) 
    {
        // --- Only the threads with index multiple of 2*s perform additions. Furthermore, modulo arithmetic is slow.       
        if ((tid % (2*s)) == 0) { sdata[tid] += sdata[tid + s]; }

        // --- At the end of each iteration loop, we have to make sure that all memory operations have been completed
        __syncthreads();

        s*=2;
    }

    // --- Write result for this block to global memory. At the end of the kernel, global memory will contain the results for the summations of
    //     individual blocks
    if (tid == 0) g_odata[blockIdx.x] = sdata[0];

}

/********/
/* MAIN */
/********/
int main()
{
    const int N = 15336;

    thrust::device_vector<int> d_vec(N,3);

    int NumThreads  = (N < BLOCKSIZE) ? nextPow2(N) : BLOCKSIZE;
    int NumBlocks   = (N + NumThreads - 1) / NumThreads;

    // when there is only one warp per block, we need to allocate two warps
    // worth of shared memory so that we don't index shared memory out of bounds
    int smemSize = (NumThreads <= 32) ? 2 * NumThreads * sizeof(int) : NumThreads * sizeof(int);

    // --- Creating events for timing
    float time;
    cudaEvent_t start, stop;
    cudaEventCreate(&start);
    cudaEventCreate(&stop);

    thrust::device_vector<int> d_vec_block(NumBlocks);

    /***********/
    /* REDUCE0 */
    /***********/
    cudaEventRecord(start, 0);
    reduce0<<<NumBlocks, NumThreads, smemSize>>>(thrust::raw_pointer_cast(d_vec.data()), thrust::raw_pointer_cast(d_vec_block.data()), N);
    cudaEventRecord(stop, 0);
    cudaEventSynchronize(stop);
    cudaEventElapsedTime(&time, start, stop);
    printf("reduce0 - Elapsed time:  %3.3f ms \n", time);   

    // --- The last part of the reduction, which would be expensive to perform on the device, is executed on the host
    thrust::host_vector<int> h_vec_block(d_vec_block);
    int sum_reduce0 = 0;
    for (int i=0; i<NumBlocks; i++) sum_reduce0 = sum_reduce0 + h_vec_block[i];
    printf("Result for reduce0 = %i\n",sum_reduce0);

    /**********************************/
    /* REDUCE0 KERNEL - STACKOVERFLOW */
    /**********************************/
    cudaEventRecord(start, 0);
    reduce0_stackoverflow<<<NumBlocks/2, NumThreads, smemSize>>>(thrust::raw_pointer_cast(d_vec.data()), thrust::raw_pointer_cast(d_vec_block.data()), N);
    cudaEventRecord(stop, 0);
    cudaEventSynchronize(stop);
    cudaEventElapsedTime(&time, start, stop);
    printf("reduce0 - stackoverflow - Elapsed time:  %3.3f ms \n", time);   

    // --- The last part of the reduction, which would be expensive to perform on the device, is executed on the host
    h_vec_block = d_vec_block;
    int sum_reduce0_stackoverflow = 0;
    for (int i=0; i<NumBlocks; i++) sum_reduce0_stackoverflow = sum_reduce0_stackoverflow + h_vec_block[i];
    printf("Result for reduce0_stackoverflow = %i\n",sum_reduce0_stackoverflow);

    getchar();
} 
```**

# java - 如何找到一个java类的代码

> ID：15176650
> 
> 赞同：-1
> 
> 时间：2013-03-02T16:20:33.033
> 
> 标签：java, servlets

我在我的 java servlet 中使用该方法：

```
request.setCharacterEncoding("UTF-8"); 
```

我想知道如何才能看到这个界面背后的源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:22:27.090

Below is a link to the source code of many Java built in libraries

[Reference for the servlet request class](http://grepcode.com/file/repo1.maven.org/maven2/javax.servlet/servlet-api/2.4/javax/servlet/ServletRequest.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:22:31.343

The implementation of HttpServletRequest is the one provided by your servlet container (Tomcat, Jetty, ...). So, if your container is opensource, print the class of the request:

```
System.out.prinln(request.getClass()); 
```

then find the sources of the servlet container and browse for the class that has been printed. The web page of the container, most of the time, says where the sources can be found.

That said, the contract of the method is well documented in the interface, and you shouldn't have to know how it's implemented to use the method. The documentation should be sufficient.

# dns - AWS Route 53 DNS 传播时间

> ID：15176656
> 
> 赞同：15
> 
> 时间：2013-03-02T16:20:44.180
> 
> 标签：dns, amazon-route53

大约 5 小时前，我在 AWS Route 53 服务中创建了一个新的托管区域。记录如下所示：

**托管区域 domain.com**

```
domain.com.     A
domain.com.     MX   1 ASPMX.L.GOOGLE.COM.
                     5 ALT1.ASPMX.L.GOOGLE.COM.
                     5 ALT2.ASPMX.L.GOOGLE.COM.
                     10 ASPMX2.GOOGLEMAIL.COM.
                     10 ASPMX3.GOOGLEMAIL.COM.
domain.com.     NS   ns-1042.awsdns-02.org.
                     ns-996.awsdns-60.net.
                     ns-280.awsdns-35.com.
                     ns-1711.awsdns-21.co.uk.
domain.com.     SOA  ns-1042.awsdns-02.org.
                     awsdns-hostmaster.amazon.com. 1 7200 900 1209600 86400
www.domain.com. A    XX.XXX.XX.XXX 
```

我还为我的注册商更新了域记录，以便在那里指定 AWS DNS 服务器。

domain.com 的记录 A。是空的，因为它只是 www.domain.com 的别名。来自同一托管区域的子域。所以 www.domain.com。指的是真实的弹性 IP 地址。

AWS 官方文档说：

> 问题：我对 Amazon Route 53 上的 DNS 设置所做的更改会以多快的速度在全球传播？
> 
> Amazon Route 53 旨在在正常情况下在 60 秒内将您对 DNS 记录所做的更新传播到其全球权威 DNS 服务器网络。请注意，缓存 DNS 解析器不受 Amazon Route 53 服务的控制，并将根据其生存时间 (TTL) 缓存您的资源记录集。

就我而言，5 小时后 DNS 记录尚未传播。我看到 AWS DNS 服务器已经更新了记录。因此 nslookup 为我的 Web 服务正确显示了 ASW DNS 服务器的弹性 IP 地址。但是，例如，google DNS 仍然不知道它：

```
nslookup domain.com 8.8.8.8: can't find domain.com: NXDOMAIN 
```

您能否说我是否执行了错误的 DNS 设置以导致 DNS 记录尚未传播？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-18T22:02:51.860

我遇到了类似的问题。需要更新域的 Registar NS 记录以匹配托管区域内的 NS 记录。

有关说明和详细描述的答案，请参见以下内容：[https ://stackoverflow.com/a/37534217/3895401](https://stackoverflow.com/a/37534217/3895401)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-01T14:02:59.373

我相信域名A记录必须指向IP。并为 www 添加别名。

对于我的 wordpress 网站，我将域和 www A 记录都指向 ip 地址。

# android - 在android中设计国际象棋

> ID：15176657
> 
> 赞同：-1
> 
> 时间：2013-03-02T16:20:46.437
> 
> 标签：android

我通过使用表格布局中的按钮为国际象棋游戏设计了一个用户界面。对于棋子，我将 ASCII 值作为字符串值打印在按钮上。但是我不知道单击按钮时如何获取该值。这是我第一次为 Android 编程。

```
 <Button android:id="@+id/a8" android:layout_width="36dp" android:layout_height="36dp" android:background="@color/white" android:hint="@string/b_rook" android:textSize="25sp"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:32:32.943

如果您只想要按钮的文本值，请将以下内容附加`OnClickListener`到所有按钮：

```
OnClickListener myButtonClickListener = new OnClickListener() { 
        @Override
        public void onClick(View v) {
            String buttonText = ((Button) v).getText();
                            //Do whatever you want with buttonText

        }
    }; 
```

为`Button`实例“myButton”分配它：

```
myButton.setOnClickListener(myButtonClickListener ); 
```

# php - 将数组样式数据保存到 mysql 数据库 (JSON)

> ID：15176660
> 
> 赞同：0
> 
> 时间：2013-03-02T16:20:51.190
> 
> 标签：php, mysql, json

我有一个网站，它对其中的一些内容使用投票功能。我有一个存储所有内容条目的 MySQL 数据库，每个用户在登录时都有一个 INT id。我如何在数据库中存储可变数量的数据，以便我可以检查特定用户是否已投票已经防止双重投票。我已经尝试过了，但我不确定它是否工作正常。

当用户提交投票表单时，保存在数据库中的现有字符串通过 post 与表单一起发送`$_POST['voted']`然后我需要将刚刚投票的人的 ID 添加到 json 字符串并将其保存回 mysql 数据库。`$_SESSION['ID']`保存用户 ID 和`Voted`mysql 中的字段类型是`TEXT`

```
$json = array();
$json = var_dump(json_decode($_POST['voted']));
$json[] = $_SESSION['ID'];
$Voted = json_encode($json); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:31:34.773

您将 json 解码为数组

```
$json = json_decode($your_data_from_mysql_query, true); //When TRUE, returned objects will be converted into associative arrays. 
```

[然后你用这个函数http://php.net/manual/en/function.in-array.php](http://php.net/manual/en/function.in-array.php)检查用户是否已经在数组中有他的id ，如果它不存在那么你填充数组并继续你的工作流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:31:25.453

不要使用会话。相反，添加一个连接用户和投票主题的新表。当用户对某个主题进行投票时，将用户 ID 和主题 ID 添加到此表中。在允许用户投票之前，请检查此表。

```
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET latin1 COLLATE latin1_swedish_ci ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`users`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `mydb`.`users` (
  `id` INT NOT NULL AUTO_INCREMENT ,
  `name` VARCHAR(45) NULL ,
  PRIMARY KEY (`id`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `mydb`.`vote_topics`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `mydb`.`vote_topics` (
  `id` INT NOT NULL AUTO_INCREMENT ,
  `name` VARCHAR(45) NULL ,
  PRIMARY KEY (`id`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `mydb`.`users_has_vote_topics`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `mydb`.`users_has_vote_topics` (
  `users_id` INT NOT NULL ,
  `vote_topics_id` INT NOT NULL ,
  PRIMARY KEY (`users_id`, `vote_topics_id`) ,
  INDEX `fk_users_has_vote_topics_vote_topics1_idx` (`vote_topics_id` ASC) ,
  INDEX `fk_users_has_vote_topics_users_idx` (`users_id` ASC) ,
  CONSTRAINT `fk_users_has_vote_topics_users`
    FOREIGN KEY (`users_id` )
    REFERENCES `mydb`.`users` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_users_has_vote_topics_vote_topics1`
    FOREIGN KEY (`vote_topics_id` )
    REFERENCES `mydb`.`vote_topics` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS; 
```

# actionscript-3 - 如何使用 BINDABLE 和具有 urlencoded 值的 JSON 节点值在 flashbuilder 4.5 中显示此图像 url

> ID：15176661
> 
> 赞同：0
> 
> 时间：2013-03-02T16:20:52.763
> 
> 标签：actionscript-3, apache-flex, flash-builder

我在 flashbuilder 4.5 移动应用程序中加载 JSON 我正在处理，到目前为止，所有变量都渲染得很好，我正在使用左右滑动手势来允许用户在项目数组中移动 - 使用 actionscript3。

现在我到了我正在向舞台添加图像的部分，该阶段的 SOURCE 参数绑定到一个变量 (thisimg2)，该变量的值是图像 url 的 json 值...... URL 的一个示例是：

```
http://i.ebayimg.com/00/s/MTA2MlgxNjAw/%24T2eC16JHJG%21E9nm3pkoZBQDVSKHsow%7E%7E60_1.JPG?set_id=880000500F 
```

和

```
http://i.ebayimg.com/00/s/MTIwMFgxNjAw/%24%28KGrHqV,%21pcE9eMM4r4ZBPmiD+Ft%21%21%7E%7E60_1.JPG?set_id=880000500F 
```

一小部分 json URL 值作为没有十六进制值的非常简单的图像 URL 返回，并且显示得很好，但是大部分看起来像上面的 2 个示例，根本不渲染，只会导致损坏flex 中的图像/问号符号（使用桌面调试/模拟器）。我尝试对 url 字符串进行解码，但没有奏效。

当我将网址放入浏览器时，它们可以正常工作并在浏览器中呈现。

我可以对 URL 做些什么来让它们工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T19:19:32.240

您能否提供一个适合您的 URL 示例？

我相信 Ebay 专门阻止来自其他域的 Flash 应用程序使用它们的图像。

URL 编码不是问题...... Flash 只是依靠浏览器来下载它们。但是，看看隐藏在`BitmapImage`组件内部的这段代码（这是 Spark`Image`组件使用的底层代码）：

BitmapImage::loadExternal()（第 1513 行）

```
 try
    {
        loaderContext.checkPolicyFile = true;
        var urlRequest:URLRequest = source is URLRequest ?
            source as URLRequest : new URLRequest(source as String);
        loader.load(urlRequest, loaderContext);
    } 
```

这里它告诉`Loader`它它将用来获取图像以检查源域的 crossdomain.xml 文件。这是该 crossdomain.xml 文件的[链接。](http://i.ebayimg.com/crossdomain.xml)

他们的 crossdomain.xml 文件专门允许来自各种 ebay 域的 Flash 应用程序访问 i.ebayimage.com 上的内容。我刚刚扫描了它，但我没有看到任何允许使用通配符 ( `allow-access-from domain="*"`) 的内容，因此允许使用非 ebay 域。因此，除非 ebay 允许，否则您将永远无法在 Flash 应用程序中使用这些图像。

**[编辑]**

**在您执行以下任一操作之前，您可能应该[确定您正在做的事情的合法性](http://www.socialmediaexaminer.com/copyright-fair-use-and-how-it-works-for-online-images/)。**

实际上，我收回了这一点。您将永远无法使用 Flex`Image`或`BitmapImage`组件来加载这些图像，因为这些组件会检查策略文件。但是，您有几个选择：

*   扩展`BitmapImage`类并覆盖`loadExternal()`方法，使其不检查策略文件
*   使用您自己的`Loader`来显示图像。这在 Flex 应用程序中需要做更多的工作，但它可以工作（我刚刚用一个简单的 AS3 应用程序对其进行了测试）。

这是我测试过的非常基本的 AS3 应用程序（不使用 Flex）：

```
package
{
    import flash.display.Loader;
    import flash.display.Sprite;
    import flash.net.URLRequest;

    public class As3Project extends Sprite
    {

        private var loader:Loader;

        function As3Project()
        {
            loader=new Loader();
            var url:URLRequest = new URLRequest("http://i.ebayimg.com/00/s/MTA2MlgxNjAw/%24T2eC16JHJG%21E9nm3pkoZBQDVSKHsow%7E%7E60_1.JPG?set_id=880000500F");
            loader.load(url);
            addChild(loader);
        }
    }
} 
```

# php - 在 PHP 中获取星期几

> ID：15176665
> 
> 赞同：-6
> 
> 时间：2013-03-02T16:21:16.933
> 
> 标签：php

如果我有日期、月份和年份值，PHP 中有没有办法计算星期几？我不是指一周中的今天，而是过去未来的任何日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:25:16.260

```
$day_of_week = date ('l', strtotime ('2012-06-11 13:43:23')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:23:54.063

`echo date('l',strtotime('3 March 2013'));`

returns Sunday.

`echo date('l',mktime(0,0,0,$month,$day,$year));`

returns appropriately for integer values of month, day and year.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T16:26:15.843

You can do it like this.

```
echo date('l j \of F Y', strtotime('2013-03-02')); 
```

If you only want the day of the week change the first argument to just l.

[PHP Date documentation](http://php.net/manual/en/function.date.php) has a very good list of what information you can "extract" from the date.

# c++ - 成员函数调用 - 我可以在没有对象的情况下访问它吗？

> ID：15176667
> 
> 赞同：1
> 
> 时间：2013-03-02T16:21:37.643
> 
> 标签：c++, templates

如果我有类似的东西

```
class MyClass
{
public:
    void callMe()
    {
        cout << "called";
    }
};

template< void (MyClass::*callFunc)() > struct A 
{
   void A_call()
   {
       callFunc();
   }
};

int main(int argc, char *argv[])
{
   struct A <&MyClass::callMe> object;

   object.A_call();
} 
```

这不会编译，因为它说“callFunc：术语不评估为采用 0 个参数的函数”。

类成员函数不是编译时常量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:27:26.763

您已定义`callFunc`为指向成员函数的指针。要取消引用它（调用成员函数），您需要提供指针本身*和*您要调用其成员的对象，沿着这条一般线：

```
template <void (MYClass::*callFunc)() > class A { 
    MyClass &c;
public:
    A(MyClass &m) : c(m) {}
    void A_call() { c.*callFunc(); }
};

int main() { 
    MyClass m;

    A<&MyClass::callMe> object(m);

    object.A_call();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:25:16.840

You call the method `callFunc()` outside of the class `MyClass` and it is not static, then you will need an instance of `MyClass` to call it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T16:25:40.923

```
MyClass::callMe 
```

is a non-static member function! You can't call it without an instance of MyClass! The instance is passed as first argument, therefor `MyClass::callMe` is actually:

```
void callMe(MyClass * this) 
```

which obviously can't be called without an instance of MyClass...

# ember.js - ember-data 模型可以有多个 belongsTo 关系吗？

> ID：15176670
> 
> 赞同：0
> 
> 时间：2013-03-02T16:21:57.777
> 
> 标签：ember.js, ember-data

我是否正确构建了这些模型？

用例是我有用户模型和公司模型。User 和 Company 都将拥有一系列电话号码。根据 Ember 文档，我应该在 User 和 Company 模型中有一个 .hasMany ，在子模型中有一个 .belongsTo 。当用户和公司都依赖同一个子电话型号时会发生什么？在用户不关心的电话模型中有一个 .belongsTo 是否可以接受（对于公司模型反之亦然）？

```
 App.User = DS.Model.extend({
    username:DS.attr('string'),
    phones:DS.hasMany('App.Phone'),
  });

  App.Company = DS.Model.extend({
    name:DS.attr('string'),
    phones:DS.hasMany('App.Phone')

  });

  App.Phone = DS.Model.extend({
    user:DS.belongsTo('App.User'),
    company:DS.belongsTo('App.Company'),
    number:DS.attr('string'),
    format:DS.attr('string'),
    type:DS.attr('string')
  }); 
```

# ios - 为什么我的 detailTextLabel 在移动？

> ID：15176673
> 
> 赞同：0
> 
> 时间：2013-03-02T16:22:14.083
> 
> 标签：ios, uitableview

我在我的子类中使用以下代码为我`UITableViewCell`的未选择单元格设置阴影`UITableView`

```
- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated
{
  [super setHighlighted:highlighted animated:animated];
  [self applyLabelDropShadow:!highlighted];
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
  [super setSelected:selected animated:animated];
  [self applyLabelDropShadow:!selected];
}

- (void)applyLabelDropShadow:(BOOL)applyDropShadow
{
  self.textLabel.shadowColor = applyDropShadow ? [UIColor whiteColor] : nil;
  self.textLabel.shadowOffset = CGSizeMake(0, 1);
  self.detailTextLabel.shadowColor = applyDropShadow ? [UIColor whiteColor] : nil;
  self.detailTextLabel.shadowOffset = CGSizeMake(0, 1);
} 
```

这段代码来自 Mike Stead 的另一个StackOverflow[问题](https://stackoverflow.com/users/83030/mike-stead)[，](https://stackoverflow.com/questions/1184014/removing-text-shadow-in-uitableviewcell-when-its-selected)它运行良好。

但是，当该行从选中移动到取消选中时，您会看到`detailTextLabel`非常轻微的向下移动，这是我不希望发生的。对于单元格不会发生这种情况`textLabel`。

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:25:30.533

尝试使用`[UIColor clearColor]`非阴影而不是`nil`：

```
- (void)applyLabelDropShadow:(BOOL)applyDropShadow
{
  self.textLabel.shadowColor = applyDropShadow ? [UIColor whiteColor] : [UIColor clearColor];
  self.textLabel.shadowOffset = CGSizeMake(0, 1);
  self.detailTextLabel.shadowColor = applyDropShadow ? [UIColor whiteColor] : [UIColor clearColor];
  self.detailTextLabel.shadowOffset = CGSizeMake(0,1);
} 
```

# xcode - 带有分页控制 iOS 的滑动菜单

> ID：15176677
> 
> 赞同：0
> 
> 时间：2013-03-02T16:22:26.663
> 
> 标签：xcode, cocoa, user-experience

我想创建一个类似于图像的菜单，其中包含按钮底部的分页控件。

我不知道使用哪些控件，有人可以帮助我吗？

![](../Images/94e7371664cd86a904fde04702719f26.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:40:36.003

这应该是导航窗口之一。“点”的数量等于您将拥有的页面的数量

# java - not able to connect main class with other class in netbeans

> ID：15176686
> 
> 赞同：0
> 
> 时间：2013-03-02T16:22:46.193
> 
> 标签：java, swing, class, netbeans-6.9

I am trying to make a gui based application in netbeans but my main class is not connecting to other class. The code for main class is as below:

```
package legaldiary;
public class Main {
public static void main(String[] args) {
    // TODO code application logic here
    ULogin ulgn = new ULogin();

}
} 
```

The code for other class is as below:

```
package legaldiary;
public class ULogin extends javax.swing.JFrame {
public ULogin() {
    initComponents();
}
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    jLabel1 = new javax.swing.JLabel();
    jLabel2 = new javax.swing.JLabel();
    jLabel3 = new javax.swing.JLabel();
    jTextField1 = new javax.swing.JTextField();
    jTextField2 = new javax.swing.JTextField();
    jButton1 = new javax.swing.JButton();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jLabel1.setText("Welcome to Legal Diary");

    jLabel2.setText("jLabel2");

    jLabel3.setText("jLabel3");

    jTextField1.setText("jTextField1");

    jTextField2.setText("jTextField2");

    jButton1.setText("jButton1");

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(64, 64, 64)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addComponent(jLabel2)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 172, Short.MAX_VALUE)
                    .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(layout.createSequentialGroup()
                    .addComponent(jLabel3)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 172, Short.MAX_VALUE)
                    .addComponent(jTextField2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
            .addGap(71, 71, 71))
        .addGroup(layout.createSequentialGroup()
            .addGap(89, 89, 89)
            .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 174, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(137, Short.MAX_VALUE))
        .addGroup(layout.createSequentialGroup()
            .addGap(152, 152, 152)
            .addComponent(jButton1)
            .addContainerGap(175, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(41, 41, 41)
            .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(37, 37, 37)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel2)
                .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(57, 57, 57)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel3)
                .addComponent(jTextField2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(18, 18, 18)
            .addComponent(jButton1)
            .addContainerGap(34, Short.MAX_VALUE))
    );

    pack();
}// </editor-fold>

/**
* @param args the command line arguments
*/
public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new ULogin().setVisible(true);
        }
    });
}

// Variables declaration - do not modify
private javax.swing.JButton jButton1;
private javax.swing.JLabel jLabel1;
private javax.swing.JLabel jLabel2;
private javax.swing.JLabel jLabel3;
private javax.swing.JTextField jTextField1;
private javax.swing.JTextField jTextField2;
// End of variables declaration 
```

}

Please help me out in finding the error.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:26:25.293

You never call `setVisible` in your `Main` class. Although you do call it in the `main` method of `ULogin` itself, that method is not invoked when running from `Main`:

```
SwingUtilities.invokeLater(new Runnable() {
   public void run() {
      new ULogin().setVisible(true);
   }
}); 
```

# java - 双重格式的 JSpinner

> ID：15176695
> 
> 赞同：3
> 
> 时间：2013-03-02T16:24:06.597
> 
> 标签：java, swing, jspinner, jformattedtextfield

我想创建支持非整数值（例如 2.01 和 -3.456）的 JSpinner，因此 getValue() 返回一个 Double。

不仅如此，我还希望步长应该是动态的，使用如下公式（幅度的 10%）：

```
stepSize = 0.1 * pow(10, round( log(currentValue) )); 
```

是否可以？或者我应该问，这值得麻烦吗？

### 更新：

通过改编 Vishal 的回答，我制作了以下课程来制作漂亮的双旋转器。到目前为止，它们在我的程序中表现得非常好，尽管我会将自适应步长抽象到另一个父类中，以便稍后制作 AdaptiveDoubleSpinner 和 AdaptiveIntegerSpinner。

```
import javax.swing.JSpinner;
import javax.swing.SpinnerNumberModel;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class DoubleSpinner extends JSpinner {

    private static final long serialVersionUID = 1L;
    private static final double STEP_RATIO = 0.1;

    private SpinnerNumberModel model;

    public DoubleSpinner() {
        super();
        // Model setup
        model = new SpinnerNumberModel(0.0, -1000.0, 1000.0, 0.1);
        this.setModel(model);

        // Step recalculation
        this.addChangeListener(new ChangeListener() {
            @Override
            public void stateChanged(ChangeEvent e) {
                Double value = getDouble();
                // Steps are sensitive to the current magnitude of the value
                long magnitude = Math.round(Math.log10(value));
                double stepSize = STEP_RATIO * Math.pow(10, magnitude);
                model.setStepSize(stepSize);
            }
        });
    }

    /**
     * Returns the current value as a Double
     */
    public Double getDouble() {
        return (Double)getValue();
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T17:59:27.990

是的，有可能 。请参见下面给出的示例：
![在此处输入图像描述](../Images/d87ffff33ce120ee49c59ae4f680ae4f.png)

```
import java.awt.Container;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.BorderLayout;
import java.util.Calendar;
import java.util.Date;

import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSpinner;
import javax.swing.SpinnerNumberModel;
import javax.swing.SwingUtilities;

public class SpinnerDemo extends JFrame 
{
    JSpinner s;
    SpinnerNumberModel model ;
    JSpinner.NumberEditor editor;
    JTextField stepText;
    JButton bStepSet;
    public void prepareAndShowGUI()
    {
        model = new SpinnerNumberModel(0.0,-1000.0 ,1000.0,0.1);
        s = new JSpinner(model);
        editor = new JSpinner.NumberEditor(s) ;
        s.setEditor(editor);
        stepText = new JTextField(10);
        bStepSet = new JButton("Set Step");
        bStepSet.addActionListener( new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent evt)
            {
                try
                {
                    /* You can apply your stepSize deduction logic here*/
                    Double val = Double.parseDouble(stepText.getText().trim()); 
                    /*Setting the stepSize*/
                    model.setStepSize(val);
                }
                catch (Exception ex){}
            }
        });
        Container c = getContentPane();
        c.add(s);
        JPanel southPanel = new JPanel();
        southPanel.add(stepText);southPanel.add(bStepSet);
        c.add(southPanel,BorderLayout.SOUTH);
        pack();
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }

    public static void main(String args[]) 
    {
        SwingUtilities.invokeLater( new Runnable()
        {
            @Override
            public void run()
            {
                SpinnerDemo sd = new SpinnerDemo();
                sd.prepareAndShowGUI();
            }
        });
    }
} 
```

# tidesdk - HTML5 桌面应用程序

> ID：15176696
> 
> 赞同：1
> 
> 时间：2013-03-02T16:24:20.147
> 
> 标签：tidesdk

我们有一个带有 python 和 GTK 的桌面应用程序，它的某些部分是用 C 开发的，可能是出于性能或遗留问题，我不太确定，它还有一个嵌入式 mySQL 数据库。现在，同样的 APP 也可以在 Android 平台上运行。

重写整个应用程序不太可行。我遇到了这个 Tide SDK，你可以在 HTML5 中使用 GUI。使用 Tide SDK 开发的应用程序可以在 android 上运行吗？如果是，用户界面的响应速度如何。

我可以为 HTML5 UI 查看的任何其他框架，同时支持 Android 和桌面。

PS我不是android开发人员，对此了解不多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T04:28:15.003

re: 使用 Tide SDK 开发的应用程序可以在 android 上运行吗？

不。

你可以看看做桌面潮和移动钛或phonegap，并分享你的应用程序逻辑。

# sql - 将 SIP 分机重新分配给其他用户

> ID：15176697
> 
> 赞同：0
> 
> 时间：2013-03-02T16:24:31.107
> 
> 标签：sql, tsql

早安社区..

我又遇到了一个问题，我想使用更新命令将一个用户的 sip 扩展名重新分配给另一个用户，我在[这里](https://stackoverflow.com/questions/7433699/sql-update-set-one-column-to-another-value-and-change-value-in-same-step)找到了这个例子，但我不知道我是否可以使用它或让它做什么我想让它做..

```
1   Angie   Angie   Romero      NULL
2   Nina    Nina    Molina      1094
9   Vanessa Vanessa Valdviezo   1091
10  Marcelo Marcelo Limo        NULL 
```

1、2、9 和 10 是用户 ID 代码。
字段名按照Jason的要求从左到右，
`UsuCodigo, usuUsuario, usuNombre, usuApa and Ext`
表名是`lvUser`

可怕的名字，我知道，我不是桌子的原始设计师。

我希望能够将扩展名分配`1091`给用户 ID `10`，并将用户 ID 的扩展名字段设置`9`为`NULL`

以上是如何将其保存在数据库中的示例

如果您需要更多信息，我会尽可能提供。

在此先感谢，罗伯特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:27:30.617

你没有给我们表名或列名，但你可以做这样的事情来将扩展 1094 从用户 2 移动到用户 1

```
Update User set SPI = null where UserID = 2
Update User set SPI = 1094 where UserID = 1 
```

# java - Displaying list from an array, input data numerically

> ID：15176699
> 
> 赞同：1
> 
> 时间：2013-03-02T16:24:46.737
> 
> 标签：java, arrays, java.util.scanner

I am trying to take input from the user on student data. First, I ask the user how many students they are inputing data on. Then, the code asks the user for the data on the exact number of students the user put in for the first question.

Below is the start of my code. I am having issues in getting the user input after the initial variable. I need to take that variable, say the user enters `5`, I need to prompt the user 5 times to input the Students Name and grade. Like so:

```
Student 1 last name:
Student 1 first name:
Student 1 grade:

Student 2 last name: 
```

I have to use an array, I just need to figure out how to properly get the user input.

```
import java.util.Scanner;

public class StudentScoresApp {

    public static Score score = new Score();
    private static Student student;

    public static void main(String[] args) {
        System.out.println("Welcome to the Student Scores Application.\n");
        getStudentScores();
    }

    public static void getStudentScores() {
        Scanner input = new Scanner(System.in);
        System.out.println("Enter number of students to enter:   ");
        int num = input.nextInt();
        int [] a = new int[num];
        for (int i = 0 ; i < num ; i++); {
            System.out.print("Enter Student " + (i + 1) + " last name:");
            a[i] = in.nextInt();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:31:18.937

```
String [] lastNames = new String [num];
String [] firstNames = new String [num];
int [] grades = new int [num];

for (int i = 0; i < num; i++)
{
    System.out.print ("Enter Student " + (i + 1) + " last name:");
    lastNames [i] = in.nextLine ();
    System.out.print ("Enter Student " + (i + 1) + " first name:");
    firstNames [i] = in.nextLine ();
    System.out.print ("Enter Student " + (i + 1) + " grade:");
    gradess [i] = in.nextInt ();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T16:53:48.627

在我看来，处理数组之间的关联并不是一个好习惯，无论如何由你决定你的设计。如果您想这样做，那么@Mikhail Vladimirov 的建议就是要走的路。

另一方面，只需根据您的需要设计一个类，并将该类的对象存储在数组或列表中。

```
public class StudentScore{
    String firstName;
    String lastName;
    int grade;

    pulbic StudnetScore(String firstName, String lastName, int grade){
        this.firstName = firstName;
        this.lastName = lastName;
        this.grade = grade;
    }

    //getters(), setters()
} 
```

在主课中：

```
StudentScore[] studentScores = new StudentScore[num];
for (int i = 0; i < studentScores.length; i++){
    System.out.print ("Enter Student " + (i + 1) + " last name:");
    String lastName = in.nextLine ();
    System.out.print ("Enter Student " + (i + 1) + " first name:");
    String firstName = in.nextLine ();
    System.out.print ("Enter Student " + (i + 1) + " grade:");
    int grade = in.nextInt ();
    studentScores[i] = new StudentScore(firstName,lastName,grade);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T17:32:25.743

我建议您使用 arrayList 来存储学生对象。请考虑以下示例以更好地理解：

首先，您可以创建一个模型类来使用 getters() 和 setters() 存储学生详细信息。它必须看起来像这样：

```
package com.stack.overflow.works.model;

public class Student {

    private String firstName;
    private String lastName;
    private int score;

    public Student() {}

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public int getScore() {
        return score;
    }

    public void setScore(int score) {
        this.score = score;
    }
} 
```

接下来，您可以创建如下所示的 StudentScoresApp 来读取用户的输入：

```
package com.stack.overflow.works.main;

import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

import com.stack.overflow.works.model.Student;

public class StudentScoresApp {

    public static List<Student> getStudentScores() {
        List<Student> students = new ArrayList<Student>();
        Student student = null;
        Scanner scanner = new Scanner(System.in);
        System.out.print("Enter number of students to enter: ");
        int numberOfStudents = scanner.nextInt();

        for (int i = 0; i < numberOfStudents; i++) {
            student = new Student();
            System.out.print("Enter Student " + (i + 1) + " First Name:");
            String firstName = scanner.next();
            student.setFirstName(firstName);
            System.out.print("Enter Student " + (i + 1) + " Last Name:");
            String lastName = scanner.next();
            student.setLastName(lastName);
            System.out.print("Enter Student " + (i + 1) + " Score:");
            int score = scanner.nextInt();
            student.setScore(score);
            students.add(student);
        }
        scanner.close();

        return students;
    }

    public static void displayStudentScores(List<Student> students) {
        int i = 1;
        for (Student student: students) {
            System.out.println("Student " + (i) + " First Name:" + student.getFirstName());
            System.out.println("Student " + (i) + " Last Name:" + student.getLastName());
            System.out.println("Student " + (i) + " Score:" + student.getScore());
            i++;
        }
    }

    public static void main(String[] args) {
        System.out.println("Welcome to the Student Scores Application");
        System.out.println("*****************************************");
        List<Student> students = StudentScoresApp.getStudentScores();
        System.out.println();
        System.out.println("Displaying Student Scores:");
        System.out.println("*************************");
        StudentScoresApp.displayStudentScores(students);
    }

} 
```

现在，您可以运行 StudentScoresApp。样品测试结果如下图所示：

```
Welcome to the Student Scores Application
*****************************************
Enter number of students to enter: 3
Enter Student 1 First Name:Sandeep
Enter Student 1 Last Name:Thulaseedharan
Enter Student 1 Score:100
Enter Student 2 First Name:Sathya
Enter Student 2 Last Name:Narayanan
Enter Student 2 Score:100
Enter Student 3 First Name:Jayakrishnan
Enter Student 3 Last Name:Lal
Enter Student 3 Score:100

Displaying Student Scores:
*************************
Student 1 First Name:Sandeep
Student 1 Last Name:Thulaseedharan
Student 1 Score:100
Student 2 First Name:Sathya
Student 2 Last Name:Narayanan
Student 2 Score:100
Student 3 First Name:Jayakrishnan
Student 3 Last Name:Lal
Student 3 Score:100 
```

希望这可以帮助..

谢谢..快乐编码...

# bash - How? Bash loop, sed and inserting the current loop's filename into the sed pattern space

> ID：15176701
> 
> 赞同：3
> 
> 时间：2013-03-02T16:24:51.637
> 
> 标签：bash, sed, filenames

The goal: To loop through a folder of text files, extract all the end-of-line, word-wrapped, hyphenated words, and collate them into a list.

```
001.txt be-littled
001.txt dev-eloper
002.txt sand-wich
... 
```

The purpose is to scan the list and differentiate the valid hyphenated words from the merely word-wrapped (i.e., twenty-four versus dev-eloper).

My current Bash/sed script catches most (enough) of the words correctly. I know it needs some tweaking (like when the hyphenated word ends the paragraph).

But right now, I can't get the current filename into the pattern space.

```
for f in *.txt
  do
    sed -rn 'N;/PATTERN/!{D};s:PATTERN:\3-\5\n\7:;P;D' * > output.txt;
  done 
```

..where PATTERN = (^.*)( +)(.+)(-\n)(\S+)( +)(.*$)

or

```
for f in *.txt; do sed -rn 'N;/(^.*)( +)(.+)(-\n)(\S+)( +)(.*$)/!{D};s:(^.*)( +)(.+)(-\n)(\S+)( +)(.*$):\3-\5\n\7:;P;D' * > output.txt;done 
```

I tried putting '"$f"' just before the \3 but that just prepends the last page on all lines (i.e., '250.txt be-littled').

I suspect my code isn't doing exactly what I think its doing. :-) Maybe I don't grok the loop order of sed within bash.

I'm using Ubuntu 12.10 and just started learning bash and sed a few weeks ago. I'm open to suggestions.

Thanks,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T17:21:50.877

我不知道你的意思是什么`word-wrapped`，但这可能有效：

```
grep -oH "[^ ]*-[^ ]*$" *.txt | sed 's/:/ /' 
```

尾随`sed`调用只是为了使输出等于您的输出 - 它用空格替换第一个`:`添加的。`grep`

输出：

```
$ cat 001.txt 
be-littled
dev-eloper

$ cat 002.txt 
sand-wich

$ grep -oH "[^ ]*-[^ ]*$" *.txt | sed 's/:/ /'
001.txt be-littled
001.txt dev-eloper
002.txt sand-wich 
```

**注意**：要改进用于满足您的需求的表达式`grep`，首先需要了解您的需求——我真的没有从`word-wrapped`;那里得到这个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T19:30:20.760

我不明白为什么您没有成功写入文件名。你写过你`'"$f"'`之前试过的`\3`，我认为应该可以。但是我做了几乎相同的事情，但对整个 sed 命令使用双引号，所以我不必使用`'"..."'`构造。
您还应该在写入结果文件时使用`>>`而不是，否则您会为循环中的每个新文件覆盖结果文件。 这可能是一个错字，但你在 sed 行的末尾应该不是我认为的。`>`
`... * > output.txt``$f``*`

对 sed 命令使用双引号，在`!`in之后使用空格`! {D}`，`>> output.txt`并`$f`在替换中写入文件名（也使用`@`作为替换分隔符以便能够`<file>:`在结果中使用）：

```
for f in *.txt; do
  sed -rn "N;/(^.*)( +)(.+)(-\n)(\S+)( +)(.*$)/! {D};s@(^.*)( +)(.+)(-\n)(\S+)( +)(.*$)@$f: \3-\5\n\7@;P;D" $f >> output.txt
done 
```

我还没有审查你的模式，但当我测试它时它似乎很有效。

我在两个小文件上进行了尝试，一个在您的问题中包含包裹的单词，另一个带有一些带有“虚拟单词”的行。

```
[]$ cat tf1.txt
asdf asdf be-
littled asdf asdf
asfd dev-
eloper asdf sand-
wich asdf asdf.
[]$ cat tf2.txt
asfd abc-
de lsdk laskfjd
asdf asdf 1234-
56 sdl sdg
sdfg 
```

输出：

```
[]$ ./tfwordwrap.sh
tf1.txt: be-littled
tf1.txt: dev-eloper
tf1.txt: sand-wich
tf2.txt: abc-de
tf2.txt: 1234-56 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T16:39:46.583

我不知道，如何使用 sed 获取当前文件名。如果你不介意使用 perl，试试这个 perl 脚本

```
use strict;
use warnings;

my $hyphen;

while (<>) {
    next if (m/^\s*$/);

    if ($hyphen) {
        m/^\s*(\w+)/;
        print "$1\n";
        $hyphen = 0;
    }

    if (m/(\w+-)\s*$/) {
        print "$ARGV $1";
        $hyphen = 1;
    }
} 
```

此脚本将行的最后一个连字符部分与文件名一起打印并设置一个标志。在下一行中，它查找此标志并打印该行的第一个单词。它还跳过空行。

你称之为

```
perl hyphen.pl file1.txt file2.txt ... 
```

# angularjs - Let inner directives run before outer directives angularjs

> ID：15176703
> 
> 赞同：2
> 
> 时间：2013-03-02T16:25:05.550
> 
> 标签：angularjs, angularjs-directive

I have the following html:

```
<div nag-tabs="tabsOptions">
    <ul class="tabs">
            <li ng-repeat="tab in tabs">{{ tab }}</li>
    </ul>
    <div class="tab_content">
            <div ng-repeat="tabContent in tabsContent">{{ tabContent }}</div>
    </div>
</div> 
```

The issue that I am having is that the tabs directive is running before the the ng-repeat directive.

Is there any way to get the tabs directive to run after all the directives that encompasses the content of the nag-tab directive run (ng-repeat or whatever else might be put in there)?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T21:27:34.657

一个指令可以在三个不同的时间“运行”，因为一个指令可以具有编译、预链接和后链接方法。 [这个 plunker](http://plnkr.co/edit/D42ak2Kgt7kzSavm1VHw?p=preview)包含两个示例 HTML 结构——一个使用 ng-repeat，一个不使用——它会在 3 个指令函数中的每一个运行时打印出来。

对于 ng-repeat 示例，我们看到 ng-repeat 链接前和链接后功能在 nag-tabs 链接后运行。因此，如果您想让 tabs 指令在 ng-repeat 后链接函数运行后执行某些操作，则必须使用 $timeout（如建议的 @charlietfl）或 $watch 或事件来执行代码之后。

您可以尝试向`checklast`ng-repeat 元素添加一个指令，该指令可以在 is 时向您的 tabs 指令发出`$last`信号`true`。信号可以通过一个事件来完成，或者 checklast 指令可以是`require`您的 tabs 指令，然后 checklast 指令可以调用您的 tabs 指令控制器上的方法。另请参阅[https://stackoverflow.com/a/13906907/215945](https://stackoverflow.com/a/13906907/215945)。

请注意，漂亮的 plunker 来自[Peter](https://groups.google.com/d/msg/angular/3HsNz4ncnYA/I5itlZQgoq0J)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:02:01.573

你控制 tab 指令吗？如果是这样，则修改其编译阶段以将 ng-repeat 添加到其子元素。

# parsing - Grammar Follow Set Explanation

> ID：15176705
> 
> 赞同：0
> 
> 时间：2013-03-02T16:25:12.487
> 
> 标签：parsing, grammar

I'm looking at the following simple grammar and its accompanying table:

```
S-> aSbT | epsilon
T-> bFaF | epsilon
F-> epsilon

nonterminal first set   follow set  
S           a           b                                      
T           b           b
F           ∅          a b 
```

Could someone please explain why b, but not a, is in the follow set of T?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:38:33.387

看看[这里](http://www.jambe.co.nz/UNI/FirstAndFollowSets.html)，了解如何计算 first 和 follow 集的一个很好的解释。

当您计算 Follow(T) 时，遵循集合的第三条规则适用（因为 T 仅出现在第一个产生式中，之后没有任何内容）。然后，您将把 Follow(S) 中的所有内容放在 Follow(T) 中。

跟随(S) = {b}，然后跟随(T) = {b}。

如果 S 是语法的起始符号，我认为在 Follow(S) 中也应该是 $ （或 epsilon）。

# c - fscanf not reading in a file in Xcode in C

> ID：15176708
> 
> 赞同：1
> 
> 时间：2013-03-02T16:25:22.117
> 
> 标签：c, xcode, file, scanf

I'm trying to get my xcode to read in a file, but I keep getting a "build succeeded" and then (11db) as the output.

I have saved a file called "sudokode.in" to my desktop, and that's what I'm trying to open.

The file only has an integer, **19**, in it.

I just want to print out 19 to the screen.

I have never gotten my Xcode to read a file before, so I wouldn't know if I have to set it up, or what. I have searched online and haven't found a real solution to this problem.

I appreciate the help.

```
int main() {

int num;

FILE* ifp = fopen("sudokode.in", "r");
fscanf(ifp, "%d", &num);

printf("%d", num);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T16:28:26.043

该文件可能不存在。如果是这种情况，`ifp`将会是`NULL`，所以检查一下：

```
int main() {

int num;

FILE* ifp = fopen("sudokode.in", "r");
if (ifp == NULL) {
    printf("Oops, this file doesn't exist!\n");
    return -1;
}
fscanf(ifp, "%d", &num);

printf("%d", num);

return 0;
} 
```

您的程序仅在您从存储的同一目录运行时才有效`sudoke.in`。您可以改用绝对路径（例如`/User/John/Desktop/sudoke.in`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-18T05:08:37.497

要设置您的工作目录以在 Xcode 中读取和写入文件，请转到 Product --> Scheme --> Edit Scheme，然后单击它。

然后，单击“工作目录”旁边的复选框，并使用下面字段末尾的灰色小文件图标来设置工作目录。

我在这里找到了关于如何在 Xcode 上的 c 中为基本命令行项目执行此操作的很好的解释：

[https://www.meandmark.com/blog/2013/12/setting-the-current-working-directory-for-xcode-command-line-projects/](https://www.meandmark.com/blog/2013/12/setting-the-current-working-directory-for-xcode-command-line-projects/)

# java - 使用 Matlab Control google 代码的问题

> ID：15176709
> 
> 赞同：0
> 
> 时间：2013-03-02T16:25:28.890
> 
> 标签：java, matlab

要将 java 与 matlab 链接，我使用了一个开源，Matlab Control google code 我收到此错误：`Error: At least one END is missing: the statement may begin here.`
从命令行 javac Dwtembed.java 运行此代码。
如果你复制粘贴下面的代码并检查，你会很清楚，你会明白我实际上在做什么。我真的希望能在这个问题上得到一些帮助。

```
import matlabcontrol.*;
class Dwtembed
{
    public static void main(String[] args) throws MatlabConnectionException,          MatlabInvocationException
    {
        //Create a proxy, which we will use to control MATLAB
        MatlabProxyFactory factory = new MatlabProxyFactory();
        MatlabProxy proxy = factory.getProxy();

        proxy.eval("file_name='lena.bmp';"); 
        proxy.eval("cover_object=double(imread(file_name));"); 
        proxy.eval("mc=size(cover_object,1);"); 
        proxy.eval("nc=size(cover_object,2);"); 
        proxy.eval("file_name='dmg2.bmp';"); 
        proxy.eval("message=double(imread(file_name));"); 
        proxy.eval("mm=size(message,1);"); 
        proxy.eval("nm=size(message,2);"); 
        proxy.eval("[ca,ch,cv,cd]=dwt2(cover_object,'haar');"); 
        proxy.eval("ca1=ca;"); 

        proxy.eval("qiangdu=1;"); 

        proxy.eval("for i=1:nm"); 
            proxy.eval("for j=1:nm"); 
                proxy.eval("if(message(i,j)==0)"); 
                    proxy.eval("ca1(i,j)=ca(i,j)+qiangdu;"); 
                proxy.eval("end"); 
            proxy.eval("end"); 
        proxy.eval("end"); 

        proxy.eval("watermarked_image=idwt2(ca1,ch,cv,cd,'haar');"); 
        proxy.eval("watermarked_image_round=round(watermarked_image);"); 
        proxy.eval("watermarked_image_uint8=uint8(watermarked_image_round);"); 
        proxy.eval("imshow(watermarked_image_uint8);"); 

        proxy.eval("figure(2);");
        proxy.eval("imshow(watermarked_image_uint8,[]);");
        proxy.eval("title('watermarked image');");
        proxy.eval("imwrite(watermarked_image_uint8,'dwt_watermarked.bmp','bmp');"); 
        proxy.eval("xsz=mc*nc*max(max(cover_object.^2))./sum(sum((cover_object-watermarked_image_round).^2));"); 
        proxy.eval("psnr=10*log10(xsz);");

    //Disconnect the proxy from MATLAB
    proxy.disconnect();
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T03:33:18.720

您不能像那样`eval`使用`for`s 和`if`s，因为`for i=1:nm`它本身不是有效的 MATLAB 语句。你`eval`需要的东西是完整的 MATLAB 语句。

尝试将整个`for`or`if`语句放在一个`eval`.

# html - Responsive table handling in Twitter Bootstrap

> ID：15176714
> 
> 赞同：84
> 
> 时间：2013-03-02T16:26:15.563
> 
> 标签：html, twitter-bootstrap, css

When a table's width exceed the span's width, like this page: [http://jsfiddle.net/rcHdC/](http://jsfiddle.net/rcHdC/)

You will see the table's content is outside of the `span`.

What would be the best method to cater this case?

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2013-08-21T00:32:54.290

[Bootstrap 3](http://blog.getbootstrap.com/2013/08/19/bootstrap-3-released/)现在有开箱即用的响应表。万岁！:)

你可以在这里查看：[https ://getbootstrap.com/docs/3.3/css/#tables-responsive](https://getbootstrap.com/docs/3.3/css/#tables-responsive)

在你的桌子周围添加一个`<div class="table-responsive">`，你应该很高兴：

```
<div class="table-responsive">
  <table class="table">
    ...
  </table>
</div> 
```

要使其适用于所有布局，您可以执行以下操作：

```
.table-responsive
{
    overflow-x: auto;
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-03T11:07:35.257

一个可用的选项是 fooTable。在响应式网站上效果很好，并允许您设置多个断点... [fooTable Link](http://themergency.com/footable/)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-06-20T08:29:15.370

在处理响应式表格时，您可以做很多不同的事情。

我个人喜欢 Chris Coyier 的这种方法：

*   [http://css-tricks.com/responsive-data-tables/](http://css-tricks.com/responsive-data-tables/)

您可以在此处找到许多其他替代方案：

*   [http://css-tricks.com/responsive-data-table-roundup/](http://css-tricks.com/responsive-data-table-roundup/)
*   [http://bradfrost.github.io/this-is-responsive/patterns.html#tables](http://bradfrost.github.io/this-is-responsive/patterns.html#tables)

如果您可以利用 Bootstrap 并快速获得一些东西，您可以简单地使用类名“.hidden-phone”和“.hidden-tablet”来隐藏一些行，但这种方法在许多情况下可能是最好的。更多信息（参见“响应式实用程序类”）：

*   [http://twitter.github.io/bootstrap/scaffolding.html#responsive](http://twitter.github.io/bootstrap/scaffolding.html#responsive)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-17T13:57:20.430

如果您使用的是 Bootstrap 3 和更少，您可以通过更新文件将响应表应用于所有分辨率：

```
tables.less 
```

或覆盖这部分：

```
@media (max-width: @screen-xs) {
  .table-responsive {
    width: 100%;
    margin-bottom: 15px;
    overflow-y: hidden;
    overflow-x: scroll;
    border: 1px solid @table-border-color;

    // Tighten up spacing and give a background color
    > .table {
      margin-bottom: 0;
      background-color: #fff;

      // Ensure the content doesn't wrap
      > thead,
      > tbody,
      > tfoot {
        > tr {
          > th,
          > td {
            white-space: nowrap;
          }
        }
      }
    }

    // Special overrides for the bordered tables
    > .table-bordered {
      border: 0;

      // Nuke the appropriate borders so that the parent can handle them
      > thead,
      > tbody,
      > tfoot {
        > tr {
          > th:first-child,
          > td:first-child {
            border-left: 0;
          }
          > th:last-child,
          > td:last-child {
            border-right: 0;
          }
        }
        > tr:last-child {
          > th,
          > td {
            border-bottom: 0;
          }
        }
      }
    }
  }
} 
```

和：

```
@media (max-width: @screen-lg) {
  .table-responsive {
    width: 100%;
... 
```

请注意我是如何更改第一行 @screen-XX 值的。

我知道让所有表都响应可能听起来不太好，但我发现在大型表（很多列）上启用此功能非常有用。

希望它可以帮助某人。

# node.js - Node.js：网站部署策略

> ID：15176717
> 
> 赞同：3
> 
> 时间：2013-03-02T16:26:28.503
> 
> 标签：node.js, web-deployment

我使用 node.js 开发 web 应用程序和网站

但是当我想将应用程序部署到某个 Pass 时，我必须自己手动优化应用程序

像

*   将 Sass 编译为样式表

*   将javascript文件和css文件合并在一起

*   将它们复制到YUI压缩后，压缩后再复制回来

*   等等

这个工作流程让我很不安，所以我的问题是，是否有一些工具或模块可以优化这个工作流程，或者自动完成这项工作

你的部署策略是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T16:45:59.030

你需要的是一个构建工具。在 Java 中，ant 和 maven 是流行的选择。在 node.js 世界中，有大量的构建工具。我最熟悉的两个是 grunt 和 buildr（完全披露：我是 buildr 的维护者）。

这两种工具都归结为您编写一个配置文件，指定您的源文件/目录以及您希望对它们执行的操作，选项包括缩小、连接、Saas 或 Stylus 编译等。

[https://github.com/gruntjs/grunt](https://github.com/gruntjs/grunt)

[https://github.com/balupton/buildr.npm](https://github.com/balupton/buildr.npm)

对于部署工作流程，我推荐以下步骤：

1.  从源代码控制（Git 或 Subversion 或诸如此类）中清除您的网站或应用程序代码的签出。
2.  运行 grunt 或 buildr 命令来编译所有网站资源。
3.  将结果上传到您的 Web 服务器，然后重新启动 node.js 进程。很多方法可以做到这一点。

对于应用程序，我建议删除远程系统上的安装目录，并在其位置上 SCP'ing 新版本。这假设存在负载平衡器。

根据您的应用程序，这可能很简单，可以使用 shell 脚本编写自己的脚本，或者您可以使用 capistrano 或fleet 之类的工具。

[https://github.com/capistrano/capistrano](https://github.com/capistrano/capistrano)

[https://github.com/substack/fleet](https://github.com/substack/fleet)

对于一个简单的网站，我推荐一些查看文件差异的东西，比如 rsync。我将 rsync 用于我的个人网站，因为它只是静态内容，我不必担心依赖关系等。

所以发布可能会像

```
$ git clone git://github.com/whatever.git && (cd whatever && buildr && rsync -avz --delete -e ssh <remote server>:webroot) 
```

或者对于一个应用程序，更自动化一点：

```
$ git clone git://github.com/whatever.git && (cd whatever && buildr && make upload) 
```

对于主要应用程序：

```
$ buildApp && deployApp 
```

buildApp 和 deployApp 是包含构建和部署所需的所有命令、日志记录、配置等的脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-27T17:14:59.610

你真的应该看看[Grunt.js](https://github.com/gruntjs/grunt)。

Brandon 的回答很好，但我只能猜测他对 Grunt 没有经验。Make现在对我来说只不过是一段遥远而痛苦的记忆。

Grunt 本身只是一个“任务运行器”，而所有繁重的工作都是由“插件”完成的，每个插件都为 Gruntfile 中的特定“任务”提供动力。所以有一个[用于将 SASS 编译为 CSS](https://github.com/gruntjs/grunt-contrib-sass)的[插件，一个用于 YUI doc](https://github.com/gruntjs/grunt-contrib-yuidoc)的插件等等。您可以在 GitHub 社区和 Grunt.js 网站上找到数百个 Grunt 插件，网址为：http: [//gruntjs.com/plugins](http://gruntjs.com/plugins)。

此外，所有的“grunt-contrib-”插件都是由 Grunt.js 核心团队策划的，每个插件都专注于在特定的事情上做得非常好。有一个用于缩小 CSS 的插件，另一个用于丑化（缩小/模糊）JavaScript，一个用于连接文件，等等。甚至还有一个用于生成静态站点的插件，[assemble](http://github.com/assemble/assemble)（我是维护者之一）。

# android - 如何减少动态生成 n 行的 TableLayout 中的行之间的间隙（格式化行）？

> ID：15176722
> 
> 赞同：0
> 
> 时间：2013-03-02T16:27:28.910
> 
> 标签：android, android-layout, tablelayout, android-xml, android-tablelayout

我一直在尝试减少在表格布局中生成“n”行时存在的差距。
有人可以告诉我如何减少行之间的空间吗？以及如何删除显示在 2 行之间的额外颜色（2 个编辑文本的背景颜色）？

![在此处输入图像描述](../Images/38f79fdca48f3677bd47ad7487c53de4.png)

这是我的 Activty 的代码：

```
public TableRow tr2;

//starts from below: 

        /*Intent passedvals = getIntent();

        fStoreID = passedvals.getStringExtra("storeID");
        fIMEI = passedvals.getStringExtra("imei");
        fDate = passedvals.getStringExtra("date");*/

        TableLayout tl2 = (TableLayout) findViewById(R.id.dynprodtable);

        String[] ProductID = {"01","02","03","04","05"};
        String[] ProductName = {"Curd50ML","Curd100ML","Milk1LTR","Milk2LTR","Cream250GM"};
        String[] LODqty = {"01Feb-5","01Feb-2","01Feb-10","01Feb-9","01Feb-22"};
        String[] rate = {"10.00","18.00","40.00","75.00","50.00"};
        String[] stock = {"1","2","3","4","5"};
        String[] orderQty = {"1","2","3","4","5"};
        String[] orderVal = {"1","2","3","4","5"};
        String[] freeQty = {"1","2","3","4","5"};
        String[] disVal = {"1","2","3","4","5"};
        //String[] ProductID = {"01","02","03","04","05"};

/*      dbengine.open();
        //productList = dbengine.FetchStoreList();
        dbengine.close();*/

        for (int current = 0; current <= (ProductID.length - 1); current++) {

            // Create a TableRow and give it an ID
            tr2 = new TableRow(this);

            tr2.setId(100 + current);
            tr2.setTag(ProductID[current]);
            //tr2.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, 10));

            TableRow.LayoutParams params = new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            params.setMargins((int)0.0, (int)-50.0, (int)0.0, (int)-50.0);

            tr2.setLayoutParams(params);

            tr2.setClickable(true);

            TextView tvProd = new TextView(this);
            tvProd.setId(200+current);
            tvProd.setTag(ProductID[current]);
            tvProd.setText(ProductName[current]);
            tvProd.setTextSize(8);
            tvProd.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

            tvProd.setBackgroundColor(Color.parseColor("#d8e2ee"));
            tr2.addView(tvProd);

            TextView tvLODqty = new TextView(this);
            tvLODqty.setId(400+current);
            tvLODqty.setTag(ProductID[current]);
            tvLODqty.setText(LODqty[current]);
            tvLODqty.setTextSize(8);
            //tvLODqty.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            tvLODqty.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            tvLODqty.setBackgroundColor(Color.parseColor("#90a3c1"));
            tr2.addView(tvLODqty);

            TextView tvRate = new TextView(this);
            tvRate.setId(500+current);
            tvRate.setTag(ProductID[current]);
            tvRate.setText(rate[current]);
            tvRate.setTextSize(8);
            //tvRate.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            tvRate.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            tvRate.setBackgroundColor(Color.parseColor("#90a3c1"));
            tr2.addView(tvRate);

            EditText etStock = new EditText(this);
            etStock.setId(600+current);
            etStock.setTag(ProductID[current]);
            etStock.setText(stock[current]);
            etStock.setTextSize(8);
            //etStock.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            etStock.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            etStock.setBackgroundColor(Color.parseColor("#d8e2ee"));
            tr2.addView(etStock);

            EditText etOrderQty = new EditText(this);
            etOrderQty.setId(700+current);
            etOrderQty.setTag(ProductID[current]);
            etOrderQty.setText(orderQty[current]);
            etOrderQty.setTextSize(8);
            //etOrderQty.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            etOrderQty.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            etOrderQty.setBackgroundColor(Color.parseColor("#d8e2ee"));
            tr2.addView(etOrderQty);

            TextView tvOrderVal = new TextView(this);
            tvOrderVal.setId(800+current);
            tvOrderVal.setTag(ProductID[current]);
            tvOrderVal.setText(orderVal[current]);
            tvOrderVal.setTextSize(8);
            //tvOrderVal.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            tvOrderVal.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            tvOrderVal.setBackgroundColor(Color.parseColor("#90a3c1"));
            tr2.addView(tvOrderVal);

            TextView tvFreeQty = new TextView(this);
            tvFreeQty.setId(900+current);
            tvFreeQty.setTag(ProductID[current]);
            tvFreeQty.setText(freeQty[current]);
            tvFreeQty.setTextSize(8);
            //tvFreeQty.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            tvFreeQty.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            tvFreeQty.setBackgroundColor(Color.parseColor("#90a3c1"));
            tr2.addView(tvFreeQty);

            TextView tvDisVal = new TextView(this);
            tvDisVal.setId(1000+current);
            tvDisVal.setTag(ProductID[current]);
            tvDisVal.setText(disVal[current]);
            tvDisVal.setTextSize(8);
            //tvDisVal.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            tvDisVal.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            tvDisVal.setBackgroundColor(Color.parseColor("#90a3c1"));
            tr2.addView(tvDisVal);

            // Add the TableRow to the TableLayout
            tl2.addView(tr2, new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

            /*rb1.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    // TODO Auto-generated method stub

                    System.out.println("inside-onClick");
                    //System.out.println(arg0.getId());
                    System.out.println(arg0.getTag());
                    selStoreID = arg0.getTag().toString();

                }
            });*/

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:14:13.347

您好，检查您的 XML 文件，您是否在表格行中提供了任何填充，如果有，请删除并检查一次

# javascript - onblur 和 onchange 不适用于输入标签

> ID：15176724
> 
> 赞同：0
> 
> 时间：2013-03-02T16:27:53.660
> 
> 标签：javascript, ajax, html

在解决了这个问题之后，我发现事件`onblur`和`onchange`设计的工作，但是如果你的页面只有一个

```
<input type="text" onblur="loadXMLDoc()"> Change Content</input> 
```

这些事件在不同的浏览器中表现得很奇怪。尝试调试是浪费时间，没有错误！问题是没有地方可以让焦点/更改移动到！我添加了

```
<input type="hidden"></input> 
```

这结束了这个问题。令我不安的是，我在谷歌上搜索了几个小时试图找到答案。我发现很多人建议第三方 javascript 库，一些关于间隔计时器的建议，然后是那些添加`checkbox`或`submit`按钮的建议。答案是阅读 HTML DOM 事件对象：表单事件：onblur - 当表单元素失去焦点时发生该事件。如果你无处可去，你怎么会失去注意力？即时通讯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:29:13.847

`<input />`是正确的语法不是`<input></input>`

[小提琴](http://jsfiddle.net/fN9Bc/)

# android - 在页面上显示 HTML 数据：corona SDK

> ID：15176729
> 
> 赞同：3
> 
> 时间：2013-03-02T16:28:50.623
> 
> 标签：android, html, coronasdk

在我的一个电晕应用程序中，我必须在场景中显示一个 html 表格。是否可以在 corona sdk 应用程序的普通页面上显示 html 表（其 html 数据字符串在应用程序中生成）..？

任何建议都是可观的...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:30:44.280

我想我明白你在问什么，如果是这样，那么是的，你当然可以！

您需要做的是使用 WebView 的 API。

*注意：仅 Android、iOS、适用于 OS X 的 Corona Simulator 和 OS X 桌面应用程序支持本机 Web 视图。[在此处查看文档](https://docs.coronalabs.com/api/library/native/newWebView.html)*

您可以使用此 API 加载本地或远程 html 文件。

```
local webView = native.newWebView( 0, 0, 320, 480 )
webView:request( "http://www.coronalabs.com/" )
-- or
webView:request( "localfile.html", system.ResourceDirectory ) 
```

我在我正在开发的一个医疗应用程序中这样做了很多次，我会直接从我的应用程序将客户链接到医疗产品，然后当他们完成浏览时，他们可以关闭 web 视图并继续正常使用该应用程序.

如果你想要类似的功能，你需要做的就是设置你的 webview，并创建一个覆盖层，用户可以按下某种后退按钮来终止 webview，这应该从 API 中得到相当的解释。

# knockout.js - 意外的淘汰赛绑定行为？

> ID：15176737
> 
> 赞同：0
> 
> 时间：2013-03-02T16:29:58.307
> 
> 标签：knockout.js

我的场景：

我有一个带有选项卡的视图，在两个选项卡中，我正在使用 ajax 调用加载部分视图。我想将这两个部分视图数据绑定到本地视图模型。

在这两个部分视图中，我都有一个具有相同 ID 的元素，这是不正确的，我打算修复它，但后来我发现了一个奇怪的行为。

关注的元素：

```
<div id="listsBar">...</div> 
```

DOM 准备好后完成的绑定：

```
$(function () {

    ko.applyBindings(listsViewModel, document.getElementById("listsBar"));

}); 
```

这总是只影响第一个元素，这可能很好，但现在我需要。

但随后，我向元素添加了一个与 Id 同名的类：

```
<div id="listsBar" class="listsBar">...</div> 
```

突然之间，绑定应用于这两个元素。

谁能解释一下？它是功能还是错误/黑客？

# c# - SQL Server + 实体框架基础知识

> ID：15176738
> 
> 赞同：4
> 
> 时间：2013-03-02T16:29:59.507
> 
> 标签：c#, sql-server, database, entity

我的任务是在 C# 中创建一个用于管理公司员工的程序。只是一个简短的概述 - 每个员工的所有信息都将存储在 MS SQL 数据库中。作为表示层，我必须使用 WPF 并作为与数据库的通信 - LINQ to Entities。

问题是 - 我设法自己学习了 WPF，但 SQL 是一件严肃的事情。我做了一些研究，但即使在阅读了许多不同的教程之后，我也没有找到任何令人满意的东西。我什至不明白这个模型的机制。我的理解是，在 SQL Server 中创建数据库根本没有任何作用，因为从数据库创建实体模型后，它不再与 SQL Server 绑定。因此，更新创建的 SQL 数据库中的数据对程序本身不再有用。我可能错了，这很有可能，但我就是不明白。

那么，谁能指出我正确的方向？我什至必须知道什么才能开始？也许这样一个菜鸟的一些教程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T17:24:24.030

ADO.NET Entity Framework (EF) 最初是随 Visual Studio 2008 和 .NET Framework 3.5 Service Pack 1 一起发布的。到目前为止，许多人认为 EF 只是 Microsoft 的另一个 ORM 产品，尽管从设计上来说它应该更强大不仅仅是一个 ORM 工具。为这个新框架创建了一个新的数据访问提供程序 EntityClient，但在幕后，ADO.NET 数据提供程序仍用于与数据库通信

应用程序不再直接连接到数据库或查看任何特定于数据库的构造；整个应用程序根据更高级别的 EDM 模型运行。这意味着您不能再使用本机数据库查询语言；不仅数据库无法理解 EDM 模型，而且当前的数据库查询语言也没有处理 EDM 引入的元素（如继承、关系、复杂类型等）所需的构造。

**. LINQ to Entities 允许开发人员使用 LINQ 表达式和 LINQ 标准查询运算符针对实体数据模型 (EDM) 创建灵活的强类型查询**

教程可以在[这里找到](http://entityframeworktutorial.net/default.aspx#.UTI0IaKLDgU)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T17:15:56.370

这基本上与您实际所说的相反：

> 我的理解是，在 SQL Server 中创建数据库根本没有任何作用，因为从数据库创建实体模型后，它不再与 SQL Server 绑定。因此，更新创建的 SQL 数据库中的数据对程序本身不再有用。

发生的情况是实体框架 (EF) 连接到您的数据库并从您的 SQL Server 获取数据。从那时起，当您在应用程序中进行更改时，EF 将以“分离”模式运行。这可能是您困惑的根源。您缺少的部分是您告诉 EF 使用 ef.SaveChanges() 将在“分离”模式下所做的所有更改推送回您的数据库。因此，您在内存中进行更改，然后当您准备好时，您告诉 EF 将这些更改推送到数据库。

现在到您的另一点，如果您直接对 SQL Server 进行更改（我可以看到会发生这种情况的场景），您肯定会遇到“分离”模式 EF 对象的问题。老实说，我不确定这里会发生什么，比我更有经验的人应该说，这是一个非常有趣的问题，我也想知道答案。

以下是一些我觉得不错的教程信息：

[http://www.microsoft.com/downloads/details.aspx?FamilyID=355c80e9-fde0-4812-98b5-8a03f5874e96&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyID=355c80e9-fde0-4812-98b5-8a03f5874e96&displaylang=en) 实际上在[这个](https://stackoverflow.com/questions/62110/ado-net-entity-framework-tutorials)答案中

并且：

[http://www.codeproject.com/Articles/363040/An-Introduction-to-Entity-Framework-for-Absolute-B](http://www.codeproject.com/Articles/363040/An-Introduction-to-Entity-Framework-for-Absolute-B)

编辑：当我谈论分离模式时，请了解在 EF 内部有多种模式可供您操作，其中一种是分离模式。我讨厌在我的答案 b/c 中使用“分离模式”一词，我知道其他人会说这个词令人困惑，他们是正确的。只需了解在 EF 内部有一个“分离”模式，它在某种程度上是一个高级主题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T17:17:54.047

Entity Framework 是非常简单且非常强大的 ORM。我对您的建议是从[http://www.asp.net/entity-framework](http://www.asp.net/entity-framework)开始。在这里，您可以找到很多入门教程，以帮助您在短时间内启动和运行。尽管这些教程与 ASP.NET 相关，但您可以很容易地理解它们并将它们与其他平台一起使用。

# php - 复制的文件名变得乱码

> ID：15176742
> 
> 赞同：2
> 
> 时间：2013-03-02T16:30:33.493
> 
> 标签：php

我在 CentOS 服务器上安装了 PHP，我想将文件从该服务器（使用 PHP FTP）传输到运行 IIS 的 Windows FTP 服务器。现在我的问题是，当文件名包含非拉丁字符时，它会将文件名更改为“ØªØ³Øª.3gp”（它在 CentOS 中的名称是 تست.3gp）我已经搜索了很多次但没有解决方案。我怎样才能解决这个问题？

我认为 Windows 使用 CP-1252 (Windows-1252) 作为字符集，而 CentOS 使用 UTF-8 作为字符集。但是用它转换它`iconv()`并`mb_convert_encoding()`没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:18:36.597

经过多次研究，我找到了答案。windows 对不同的语言使用不同的字符集。对于这些字符集的编码，我们可以使用这个类：[http ://www.phpclasses.org/package/1360-PHP-Conversion-between-many-character-set-encodings.html](http://www.phpclasses.org/package/1360-PHP-Conversion-between-many-character-set-encodings.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T12:13:18.667

我们也可以在以下代码中使用这些编码`mb_convert_encoding()`：

```
// Cyrillic script such as Russian, Bulgarian, Serbian Cyrillic and other languages Windows-1251 ~= ISO-8859-5 

// Latin alphabet Windows-1252 ~= ISO-8859-1 // sometimes called incorrectly "ANSI"

//modern Greek. It is not capable of supporting the older polytonic Greek. It is not fully compatible with ISO 8859-7 because the letters like Ά are located at different byte values Windows-1253 ~= ISO-8859-7

// Turkish Windows-1254 = ISO-8859-9

// Hebrew Windows-1255 = ISO-8859-8

// Arabic script like Persian and Urdu Windows-1256 ~= ISO-8859-6

// Estonian, Latvian and Lithuanian languages Windows-1257 != ISO-8859-4

// Vietnamese texts. It is very similar to Windows-1252 with the differences being that s-caron and z-caron Windows-1258 ~= Windows-1252 
```

我将这些代码用于波斯文件名：

```
$filename=iconv('UTF-8','Windows-1256//IGNORE',$filename); 
```

# firefox - 在 Firefox 18 或 19 中禁用 CSS 的快速方法

> ID：15176743
> 
> 赞同：0
> 
> 时间：2013-03-02T16:30:41.850
> 
> 标签：firefox

有人知道在 Firefox 18 或 19 中禁用 CSS 的快速方法吗？最新版本的 Chrome？

# ruby-on-rails - Rubygems 不允许我使用 RVM 在 ruby 2.0 上安装 rails 3.2

> ID：15176745
> 
> 赞同：0
> 
> 时间：2013-03-02T16:31:07.647
> 
> 标签：ruby-on-rails, rubygems, rvm, ruby-2.0

我最近使用 RVM 将我的 ruby​​ 版本升级到了 2.0.0-p0。这非常有效。
然后我继续使用`gem install rails`. 这不起作用。事实上，我在使用 ruby​​ 2.0.0-p0 时无法安装任何 gem。我尝试使用 ruby​​-1.9.3-p374 安装另一个 gem，效果很好。

这是我在 ruby​​-2.0.0-p0 上安装 rails 时遇到的错误：

```
Could not find a valid gem 'rails' (>= 0), here is why:
      Unable to download data from http://rubygems.org/ - too many connection resets (http://production.s3.rubygems.org/latest_specs.4.8.gz) 
```

我该怎么做才能让 Rails 在 ruby​​-2.0.0-p0 上工作？先感谢您！

# generics - 实例化泛型类 (Java)

> ID：15176749
> 
> 赞同：0
> 
> 时间：2013-03-02T16:31:48.073
> 
> 标签：generics, java-7, instantiation, type-inference, diamond-operator

我一直被教导在你的代码中实例化一个泛型类时这样做：

```
ArrayList<String> a = new ArrayList<String>(); 
```

但是当我在 Eclipse 中工作时，它总是自动完成它：

```
ArrayList<String> a = new ArrayList <>(); 
```

这两种说法有区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:32:34.667

后者只是 Java 7 中的快捷语法（称为*类型推断*）。

有关更多详细信息，请参阅[*通用实例创建的类型推断。*](http://docs.oracle.com/javase/7/docs/technotes/guides/language/type-inference-generic-instance-creation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:33:33.260

```
ArrayList<String> a = new ArrayList <>(); 
```

在这种情况下，应用了类型推断。因此，您不需要在构造函数调用时显式声明**参数化类型。**

# android - 位图和缩放位图

> ID：15176755
> 
> 赞同：0
> 
> 时间：2013-03-02T16:32:10.400
> 
> 标签：android, performance, bitmap, scaling, recycle

我正在使用以下方法加载多个位图（从全屏图像到单个精灵帧的大约 40 个不同大小的位图）：

```
Bitmap graphic = BitmapFactory.decodeResource(res, R.drawable.mygraphics); 
```

然后我使用以下方法缩放它们（因此它们在任何设备上相对于屏幕看起来都相同）：

```
Bitmap scaledGraphic = Bitmap.createScaledBitmap(mygraphics,  screen.width()/2, screen.height()/2, true); 
```

上面的例子只是为了将图像放大/缩小到屏幕尺寸的四分之一。

然后我在我的 onDraw() 方法中引用缩放的图像：

```
canvas.drawBitmap(scaledGraphic, X, Y, null); 
```

这一切都可以正常工作，并且在各种屏幕尺寸上看起来都不错。

我的问题是，据我了解，createScaledBitmap 在内存中从原始位图创建了另一个位图（而不仅仅是缩放原始位图）。如果是这种情况，一旦创建了缩放位图，我真的不再需要原始位图了，有什么办法可以从内存中删除它吗？

我需要打电话给它回收吗？我只是在尝试优化我的代码，并且在动画卡顿等方面存在很多问题...... GC 被调用了几次（不是很多），我真的不知道为什么会发生这种情况，但认为这会很好无论如何都要练习解决这个问题。

# windows-phone-8 - Windows Phone Toolkit 测试框架挂起正在运行的测试

> ID：15176756
> 
> 赞同：1
> 
> 时间：2013-03-02T16:32:21.360
> 
> 标签：windows-phone-8

我已经使用 nuget 将 Windows Phone Toolkit Test Framework 安装到了一个空的 wp8 应用程序中。我的主页现在看起来

```
public partial class MainPage : PhoneApplicationPage
{
    // Constructor
    public MainPage()
    {
        InitializeComponent();
        this.Content = UnitTestSystem.CreateTestPage();
    }
}

[TestClass]
class ImageTests : WorkItemTest
{
    [TestMethod]
    [Description("foo")]
    public void dummyTest()
    {
        Assert.IsFalse(false);
    }
} 
```

如[http://blogs.windows.com/windows_phone/b/wpdev/archive/2012/11/20/windows-phone-toolkit-overview.aspx中所述](http://blogs.windows.com/windows_phone/b/wpdev/archive/2012/11/20/windows-phone-toolkit-overview.aspx)

问题是，一旦我在模拟器中启动项目并点击播放按钮，应用程序就会显示`Running Tests...`并且似乎挂起。任何想法如何让我的测试实际执行？即使我完全删除了测试类，也会发生同样的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-24T09:27:55.783

在测试类中使用 Microsoft.VisualStudio.TestTools.UnitTesting，而不是 Microsoft.VisualStudio.TestPlatform.UnitTestFramework 命名空间。

# iphone - iOS 应用内短信视图未显示

> ID：15176757
> 
> 赞同：1
> 
> 时间：2013-03-02T16:32:23.613
> 
> 标签：iphone, ios, objective-c, sms, viewcontroller

我有一个相当简单的问题，它可能会发布在其他地方，但我找不到。

我在 switch 语句中使用此代码来生成 MessageUI 以发送文本消息。

```
 case 1:
         if([MFMessageComposeViewController canSendText])
         {
             MFMessageComposeViewController *controller = [[MFMessageComposeViewController alloc] init];
             controller.messageComposeDelegate = self;
             controller.body = @"Hello from iOS App!";
             controller.recipients = [NSArray arrayWithObjects:@"18009998888", nil];
             [self presentModalViewController:controller animated:YES];
         }
 NSLog(@"SMS");
 break; 
```

但是我没有生成文本消息视图控制器，而是得到了这个视图， http: [//img594.imageshack.us/img594/7624/screenshot20130302at931.png](http://img594.imageshack.us/img594/7624/screenshot20130302at931.png)

我究竟做错了什么？我是否错过了这个过程中的一步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:39:39.280

您无法`MFMessageComposeViewController`在模拟器上查看。在您的设备上试一试，它应该可以工作

返回 yes的原因`canSendText`是因为您在 Mac 上安装了消息应用程序

# python - Google Calendar API 创建事件返回 201 但未创建任何事件

> ID：15176758
> 
> 赞同：0
> 
> 时间：2013-03-02T16:32:25.417
> 
> 标签：python, google-app-engine, google-api, google-calendar-api

我正在使用 Google 日历 API 从我的 Google App Engine 应用程序中创建单次事件。

JSON 编码的事件如下所示：

```
event = {"data":{
             "title": "Test Event",
             "details": "Details of test event",
             "transparency": "opaque",
             "status": "confirmed",
             "location": "My Place",
             "when": [{
                 "start": "2013-03-05T15:00:00.000Z",
                 "end": "2013-03-05T17:00:00.000Z"
             }]
}} 
```

我用来添加事件的代码是：

```
def sendGCalEvent(self, event):
    scope = "https://www.google.com/calendar/feeds/"
    authorization_token, _ = app_identity.get_access_token(scope)
    logging.info("Using token %s to represent identity %s",
             authorization_token, app_identity.get_service_account_name())
    payload = simplejson.dumps(event)

    response = urlfetch.fetch(
        "https://www.google.com/calendar/feeds/default/private/full",
        method=urlfetch.POST,
        payload=payload,
        headers = {"Content-Type": "application/json",
                   "Authorization": "OAuth " + authorization_token})
    if response.status_code == 201:
        result = simplejson.loads(response.content)
        logging.info("Status code was %s, and the returned event looks like %s", response.status_code, result)
        return
    raise Exception("Call failed. Status code %s. Body %s",
                response.status_code, response.content) 
```

一切似乎都正常，它验证正常，事件已发布，我收到 201 响应以及带有日历中添加字段的事件 JSON。

但是该事件没有创建，它没有显示在我的日历上。当我转到返回的事件数据中“备用链接”字段中的 URL 时，我的日历出现一条错误消息，指出“事件不存在”

对此的任何帮助将不胜感激。我对 Google 的 API 很陌生，所以希望我遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:51:36.447

得到它的工作。根据日历 API 的协议指南：

> 要发布条目，请使用特殊的“默认”URL（和 Authorization 标头；请参阅上面的身份验证部分）向日历发送以下 HTTP 请求。日历自动将默认 URL 重定向到属于经过身份验证的用户的日历的读/写私人订阅源的 URL。（请注意，您不必使用默认 URL 向日历发送 POST 请求；如果您愿意，可以指定用户 ID 而不是“默认”。有关详细信息，请参阅日历提要类型参考。）

```
POST https://www.google.com/calendar/feeds/default/private/full 
```

这确实返回了 201 响应，但没有添加事件。但是，当我为默认用户指定用户 ID 时，它可以工作。

```
POST https://www.google.com/calendar/feeds/user@website.com/private/full 
```

我仍然不确定为什么默认提要不起作用。

# c# - 在 WCF 服务和客户端之间共享接口（用 ServiceContract 标记）

> ID：15176759
> 
> 赞同：4
> 
> 时间：2013-03-02T16:32:26.437
> 
> 标签：c#, .net, wcf, inheritance, publish-subscribe

我正在使用 VS2010 和 .NET 4.0。

我在这里检查过（[在 WCF 服务中实现的共享接口](https://stackoverflow.com/questions/3624911/sharing-interfaces-that-are-implemented-in-wcf-service)），但不同之处在于我要完成的工作涉及一个*用*ServiceContract 标记的接口。

即在服务中，我有一个接口A（标记为ServiceContract）和一个扩展接口B（也标记为ServiceContract）。B 由 WCF 服务实现。

确切的扩展是这样的：

```
public interface A<T>

public interface B : A<SpecificType> 
```

（“SpecificType”被标记为 DataContract。）

显然，B 在代理生成过程中暴露给了 WCF 客户端；但是，我还需要公开接口 A（我正在实现一个半通用的发布/订阅系统，并且“发布者”需要能够检查/依赖接口 A）。

我尝试解决此问题的第一种方法是创建一个单独的“共享”程序集，该程序集包含接口并且可供服务和客户端使用；但是，这最终效果不佳，因为在发布者中，它需要确保 B 的实例实际上是从 A 正确扩展的。这种隐式转换失败，可能是因为服务引用似乎并不完全与“共享”程序集一起工作。

为了解决这个问题，我手动编辑了 Reference.cs 文件，它最终工作了（我添加了接口 A 的定义并确保接口 B 正确引用它）。但这会带来一个很大的问题，因为每次我更新服务引用时，这段代码都会被删除。

在查看了此站点和其他站点上的其他 WCF 响应后，我似乎无法找到确切的答案（也许我只是没有通过所有这些和他们的响应）。

如果有人能指出我正确的方向，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T17:45:15.717

向客户端提供对“原始”服务合同接口的访问（程序集或指向 .cs 文件的链接）。然后你有两个选择：

1）将自动生成的代理调用包装到您自己的类方法调用中（根据需要实现接口）。服务参考更新不会伤害您。

2）不要使用自动生成的代理。创建您自己的代理（实现您的接口）：

```
var baseAddress = "net.tcp://localhost:4503/MyService"; 
var channelFactory = new DuplexChannelFactory<IMyService>(new InstanceContext(new MyNotificationReceiver()), //MyNotificationReceiver - WCF callback implementation class
    myNetTcpBinding,
    new EndpointAddress(baseAddress));

var proxy = channelFactory.CreateChannel();
proxy.MyMethod(); 
```

# python - 在python中计算和附加子列表元素

> ID：15176764
> 
> 赞同：2
> 
> 时间：2013-03-02T16:32:41.833
> 
> 标签：python, sublist

我正在尝试计算子列表元素的唯一实例数，然后将每个唯一元素写入一个新列表，并将实例数附加到子列表中。list_1 中的每个子列表将只有两个元素，顺序无关紧要。

所以：

```
list_1 = [[a, b], [a, c], [a, c], [a, c], [b, e], [d, q], [d, q]] 
```

变成：

```
new_list =  [[a, b, 1], [a, c, 3], [b, e, 1], [d, q, 2]] 
```

我在想我需要使用集合，但我感谢任何人指出我正确的方向。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T16:40:22.057

你想看[`collections.Counter()`](http://docs.python.org/2/library/collections.html#collections.Counter)；`Counter`对象是多集（也称为包）；他们将键映射到计数。

您必须*将*子列表转换为元组才能用作键：

```
from collections import Counter

counts = Counter(tuple(e) for e in list_1)

new_list = [list(e) + [count] for e, count in counts.most_common()] 
```

它为您提供`new_list`按计数排序（降序）：

```
>>> from collections import Counter
>>> list_1 = [['a', 'b'], ['a', 'c'], ['a', 'c'], ['a', 'c'], ['b', 'e'], ['d', 'q'], ['d', 'q']]
>>> counts = Counter(tuple(e) for e in list_1)
>>> [list(e) + [count] for e, count in counts.most_common()]
[['a', 'c', 3], ['d', 'q', 2], ['a', 'b', 1], ['b', 'e', 1]] 
```

如果您的出现总是连续的，那么您也可以使用[`itertools.groupby()`](http://docs.python.org/2/library/itertools.html#itertools.groupby)：

```
from itertools import groupby

def counted_groups(it):
    for entry, group in groupby(it, key=lambda x: x):
        yield entry + [sum(1 for _ in group)]

new_list = [entry for entry in counted_groups(list_1)] 
```

我在这里使用了一个单独的生成器函数，但是您可以将循环内联到列表理解中。

这给出了：

```
>>> from itertools import groupby
>>> def counted_groups(it):
...     for entry, group in groupby(it, key=lambda x: x):
...         yield entry + [sum(1 for _ in group)]
... 
>>> [entry for entry in counted_groups(list_1)]
[['a', 'b', 1], ['a', 'c', 3], ['b', 'e', 1], ['d', 'q', 2]] 
```

并保留原来的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T16:50:22.907

如果相同的子列表是连续的：

```
from itertools import groupby

new_list = [sublist + [sum(1 for _ in g)] for sublist, g in groupby(list_1)]
# -> [['a', 'b', 1], ['a', 'c', 3], ['b', 'e', 1], ['d', 'q', 2]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T16:45:38.727

有点“绕房子”的解决方案

```
list_1 = [['a', 'b'], ['a', 'c'], ['a', 'c'], ['a', 'c'], ['b', 'e'], ['d', 'q'], ['d', 'q']]
new_dict={}
new_list=[]
for l in list_1:
    if tuple(l) in new_dict:
        new_dict[tuple(l)] += 1
    else:
        new_dict[tuple(l)] = 1
for key in new_dict:
    entry = list(key)
    entry.append(new_dict[key])
    new_list.append(entry)
print new_list 
```

# rest - Node.js REST 接口主干集合

> ID：15176770
> 
> 赞同：2
> 
> 时间：2013-03-02T16:33:29.647
> 
> 标签：rest, backbone.js, marionette

我有以下问题：

我的服务器端（猫鼬）上有一个`account`集合，我使用 express-resource 来获取 REST API。

现在我有几个其他对象（项目、组织、任务），其中包含一个成员列表（ObjectIds 数组），它们都是集合的子`account`集。

MarionetteJS 应用程序正在处理我的客户端集合。

我正在寻找一种避免调用 API 的方法。目标是通过调用 api 来获取集合。

我有一些想法：

*   向每个对象添加资源，例如

    ```
    /api/organization/:organizationId/members/
    /api/organization/:organizationId/project/:projectId/members/ 
    ```

*   将参数添加到基本资源，例如

    ```
    /api/accounts/?ids=id 
    ```

*   尽可能（从组织）获取最大的帐户集并从该集合（客户端）中获取其他子集。

*   在服务器端填充成员列表中的成员

*   单个帐户加载。遍历成员列表并获取每个成员。

有没有一种最佳实践？我知道第一个选项可能是最好的，但也许我错过了一个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T14:21:41.043

这完全取决于您如何构建 Mongoose 数据库。如果成员列表包含在组织、项目或任务文档中，则文档查询将为您提供所需的列表，而无需查找您感兴趣的特定字段。

如果您将列表编码为不同的文档（这听起来像是一种 SQL 做法），您将需要在 Node 上设置一个新资源来获取成员列表。在这种情况下，您的第一个选项在 URL 结构方面听起来不错，但实现（在服务器端或客户端加载）取决于项目的特性。通过使用 Node，我猜你想要一个小型服务器和一个重型客户端（通常的场景），所以你最终会在客户端上做这件事。

至于好的实践，MongoDB 是一个面向文档的数据库。为了充分利用它，请停止考虑实体和关系，并考虑它们将服务的文档。在许多部分重复数据是很常见的。每个集合都是一种文档类型，因此每次客户端想要显示一些数据时，它都会获取包含它需要的所有信息的文档。

在线查找 MongoDB 模式，有很多好的来源。如果您更喜欢一本书，请查找 Chodorow 的权威指南或 Copeland 的应用设计模式。

# c# - WebClient 卡住了？

> ID：15176772
> 
> 赞同：1
> 
> 时间：2013-03-02T16:33:54.253
> 
> 标签：c#, webclient

**背景**
我正在构建一个远程 c# 应用程序以通过 php 服务器进行连接。它检查客户端程序是否被服务器识别，然后循环发送日志，例如在线时间并检查命令。我模糊地评论了一些你可能不明白我为什么这样做的部分。

```
namespace Revamped_SERVER
    {
        class Program
        {
            static readonly String BASEURL = "http://mysite.com/index.php?";
            static String OLD_ID = default(String);
            static String CURRENT_ID = default(String);
            static string GET(string PHP,Boolean IS_COMMAND)
            {
                using (WebClient CLIENT = new WebClient())
                {
                    string RAW = CLIENT.DownloadString(BASEURL + PHP);
                    if (IS_COMMAND)
                    {
//this is a command, I remove the unique command ID so that previous commands and new ones aren't repeated if they have been submited more than once
                        CURRENT_ID = RAW.Remove(5, RAW.Length - 5);
                        return RAW.Remove(RAW.Length - 154, 154).Replace(CURRENT_ID, "");
                    }
                    else { return RAW.Remove(RAW.Length - 154, 154); } //this part removes extra string from server analytics a pain in the ***.
                }
            }
            static string TIMESTAMP()
            { 
                return DateTime.Now.ToString("M/d/yyy") + " - " + DateTime.Now.ToString("HH:mm:ss tt"); //Time to send to server
            }
            static void Main(string[] args)
            {
                using (WebClient CLIENT = new WebClient())
                {
                    Boolean CONNECTED = false;
                    String Username = Environment.UserName;
                    while (true)
                    {
                        while (CONNECTED == false)
                        {
                            if (GET("REQUEST=ONLINE",false) == "TRUE")
                            {
                                CONNECTED = true;
                            }
                        }
                        if (CONNECTED)
                        {
                            if (GET("REQUEST=CHECK",false) == "FALSE")
                            {
                                CLIENT.OpenRead(BASEURL + "REQUEST=ADD");
                            }
                            CLIENT.OpenRead(BASEURL + "DATA=" + Username + "\r\nLast online at " + TIMESTAMP());
                            try
                            {
//this is where it gets stuck

                                String COMMAND = GET("REQUEST=COMMAND",true);
                                if (CURRENT_ID != OLD_ID)
                                {
                                    OLD_ID = CURRENT_ID; //Set new ID 
                                    MessageBox.Show(COMMAND); //Show what Commands was sent by server
                                }
                            }
                            catch
                            {
                                CONNECTED = false; 
                            }
                        }
                    }
                }
            }
        }
    } 
```

**问题**
在第一个循环中，它运行良好：连接，检查它是否被服务器识别，然后检查命令。但是，当它再次循环时，它会发送日志但停留在：

```
String COMMAND = GET("REQUEST=COMMAND",true); 
```

它没有给我任何错误，但是当我将鼠标悬停在 Web 客户端时，它给了我这个：

![无法评估表达式，因为当前方法的代码已优化。](../Images/5b15b71ab4d043085567b2da67ede540.png)

我看过这篇文章，但它没有向我解释如何在我的情况下避免这种情况。

> [http://blogs.msdn.com/b/jmstall/archive/2005/11/15/funceval-rules.aspx](http://blogs.msdn.com/b/jmstall/archive/2005/11/15/funceval-rules.aspx)

**这个 WebClient 卡在第二个循环有什么问题？**

**细节**

*   我正在使用 .NET 4.5
*   Windows 7 64 位
*   视觉工作室 2012
*   服务器在线并且运行良好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:55:58.963

[WebClient.OpenRead](http://msdn.microsoft.com/en-us/library/system.net.webclient.openread%28v=vs.71%29.aspx)返回一个流，需要将其传递给流阅读器以读取响应。

在您的情况下，您根本没有使用返回的流。由于您正在重用 webclient 的实例，我的猜测是这就是导致您提到的行为的原因。

# jquery - 段码做什么

> ID：15176773
> 
> 赞同：-2
> 
> 时间：2013-03-02T16:34:03.917
> 
> 标签：jquery, wordpress

```
window.send_to_editor = function(html) {
    imgurl = jQuery('img',html).attr('src');
    jQuery('#adimage').val(imgurl);
    tb_remove();
} 
```

我不知道这段代码是什么，最有趣的是`imgurl = jQuery('img',html).attr('src');`在所有文档 img `id`ant src中进行代码搜索`url`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:38:34.680

这很简单。它将返回所有`img`html 的后代元素，`html`这里是上下文。然后只返回`src`集合中第一个节点的属性，链接它`attr`只会返回第一个节点的src。

```
imgurl = jQuery('img', html).attr('src'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:39:26.053

`imgurl = jQuery('img',html).attr('src');`

此代码专门寻找一个 img 标签并从中获取 src 属性并将其分配给 var imgurl。

我认为它正在搜索的上下文是您传入的任何内容`html`

# jquery - 使用json格式在ajax请求中传递Html标签

> ID：15176778
> 
> 赞同：0
> 
> 时间：2013-03-02T16:34:43.007
> 
> 标签：jquery, ajax, asp.net-mvc, json

在将标签替换为其他字符后，我正在使用 json 格式在 Ajax 请求中传递 html 标签，如下所示：

```
function changeJson(json) {
var ResultValue = "";
ResultValue = json;
var resultlength = ResultValue.length;

for (var wordlength = 0; wordlength < resultlength + 1; wordlength++) {
    ResultValue = ResultValue.replace("<", " l_ ");
    ResultValue = ResultValue.replace(">", " r_ ");
    ResultValue = ResultValue.replace("&", " and ");
}
return ResultValue; 
```

}

有没有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:36:26.867

你为什么要做这个替换？这不是必需的。

只需用属性装饰视图模型[`[AllowHtml]`](http://msdn.microsoft.com/en-us/library/system.web.mvc.allowhtmlattribute%28v=vs.98%29.aspx)属性。就像这样：

```
public class MyViewModel
{
    [AllowHtml]
    public string SomeHtmlProperty { get; set; }
} 
```

然后你可以有一个控制器动作来处理 AJAX 调用：

```
[HttpPost]
public ActionResult SomeAction(MyViewModel model)
{
    // do something with the model.SomeHtmlProperty here
    ...
} 
```

最后，您可以使用 $.ajax 方法调用此控制器操作：

```
$.ajax({
    url: '/somecontroller/someaction',
    type: 'POST',
    data: { someHtmlProperty: 'some value that could contain <, >, &, and whatever you want characters' },
    success: function(result) {
        // handle the results from your AJAX call here
    }
}); 
```

如您所见，您实际上并不需要编写被调用的函数`changeJson`或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:47:33.033

Darin Dimitrov 的解决方案非常好，但如果您愿意，可以使用[encodeURIComponent](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)和 decodeURIComponent 在客户端对 html 字符串进行编码和解码。在服务器端，您可以使用[HttpUtility.HtmlDecode](http://msdn.microsoft.com/en-us/library/system.web.httputility.htmldecode.aspx)来解码编码的字符串。

```
encodeURIComponent("<a>& abc</a>"); 
```

演示：http: [//jsfiddle.net/9tYgm/](http://jsfiddle.net/9tYgm/)

# actionscript-3 - 分别计算mp3长度的旋转

> ID：15176781
> 
> 赞同：0
> 
> 时间：2013-03-02T16:34:57.187
> 
> 标签：actionscript-3, rotation, audio

我正在尝试创建一组转盘，我已经成功加载了一个 mp3 并且可以播放它，现在在我的转盘动画剪辑中，我有另一个用于手臂的动画剪辑，我可以轻松地改变它的旋转。

我正在努力将 mp3 与旋转联系起来。我希望手臂在 mp3 播放时慢慢旋转。当声音开始和结束时，手臂需要从 -4 开始并在 +14（旋转）结束。

现在iv尝试使用以下代码计算mp3的长度

```
mp3Length = (_mp3.bytesTotal/(_mp3.bytesLoaded/_mp3.length))/1000; 
```

所以我加载一首歌曲并跟踪 mp3Length 的值，跟踪的值为 352.8620408163265

但是当我在 iTunes 中看同一首歌时，长度是 5:53。

所以我猜我计算长度的方式有问题。

然后我尝试使用以下代码旋转手臂。. .

```
leftDeck.arm.rotation = 18 / mp3Length; 
```

那是 -4 和 +14 之间的差值 18，但这是快速旋转手臂的方式。

谁能帮我指出正确的方向来解决这个问题？

非常感谢

更新 - - -

好的 iv 找到了正确识别 mp3 长度的代码

```
var Milliseconds:Number = (_mp3.bytesTotal / (_mp3.bytesLoaded / _mp3.length));

var Minutes:uint = Math.floor(Milliseconds/60000);
var Seconds:uint = (Milliseconds%60000);
var SecondsTens:uint = Math.floor(Seconds/10000);

Seconds = Math.ceil(Seconds%10000)
Seconds /= 1000;

trace(Minutes + ":" + SecondsTens + "" + Seconds); 
```

但我仍在努力将旋转与长度联系起来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:25:39.877

您可能不需要知道比特率来计算 MP3 的长度，因为 Sound 类具有`length`以毫秒为单位报告长度的属性。

该类`SoundChannel`有一个`position`属性，它以毫秒为单位报告正在播放的声音的当前位置。

这意味着您可以根据以下内容计算旋转百分比`[soundChannel].position / [sound].length`并将其应用于旋转：

```
leftDeck.arm.rotation = 18 * (_mp3Channel.position / _mp3.length) - 4; 
```

减去 4 的原因是因为您的范围是 -4 到 14。

# css - 激活时使链接具有不同的颜色

> ID：15176784
> 
> 赞同：0
> 
> 时间：2013-03-02T16:35:20.387
> 
> 标签：css

所有，我的导航菜单目前有以下 CSS：

```
#primary-menu, .default-menu, #mobile-menu-dropdown li, .site-navigation a {
  font-size: 32px;
} 
```

然后我有以下 HTML 来显示菜单：

```
<nav id="primary-menu-container" role="navigation" class="site-navigation main-navigation clearfix">
<div class="menu-main-menu-container">
<ul id="primary-menu" class="menu">
<li id="menu-item-79" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-79"><a href="http://website.com/new_site/">Home</a></li>
<li id="menu-item-38" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-38"><a href="http://website.com/new_site/tagged?tag=news">News</a></li>
<li id="menu-item-69" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-69"><a href="http://website.com/new_site/tagged">Blog</a></li>
<li id="menu-item-71" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-71"><a href="http://website.com/new_site/music">Music</a></li>
<li id="menu-item-73" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-73"><a href="http://website.com/new_site/shows">Shows</a></li>
<li id="menu-item-75" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-75"><a href="http://website.com/new_site/photos">Photos</a></li>
<li id="menu-item-76" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-76"><a href="http://website.com/new_site/videos">Videos</a></li>
<li id="menu-item-113" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item menu-item-113"><a href="http://website.com/new_site/faq">FAQ</a></li>
<li id="menu-item-21" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-21"><a href="http://website.com/new_site/contact">Contact</a></li>
</ul></div>             
</nav> 
```

例如，当有人单击这些链接之一时，我想让链接处于活动状态并为 #FF0000 着色。我尝试了以下 CSS，但在新页面加载时它不保留颜色：

```
#primary-menu, .default-menu, #mobile-menu-dropdown li, .site-navigation a:active {
  color: #FF0000;
} 
```

有人对如何使这项工作有任何想法吗？

编辑：我添加了一些 jQuery 作为 Explosion Pills 推荐。这个 jQuery 看起来像这样：

```
jQuery(".menu a").each(function () {
    if(jQuery(this).attr('href') === jQuery(location).attr('href')){
        if (jQuery(this).attr('title') === jQuery(this).text()) {
            alert("It is in here and the title is: " + jQuery(this).attr('title'));
            jQuery(this).css('color', '#FF0000');
        }
    }
}); 
```

它成功进入我的警报，但它没有将我指定的颜色应用于链接（它不会对任何链接执行此操作）

页面链接： http: [//tinyurl.com/a7tpvwy](http://tinyurl.com/a7tpvwy)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:43:10.643

我假设您*希望*加载下一页，因此仅使用 CSS 是不可能的，因为 CSS 无法知道您在哪个页面上。您可以使用 JavaScript 解决方案来检查当前`location`是否等于任何链接的位置并将其突出显示为绿色，例如

```
Array.prototype.forEach.call(document.querySelectorAll('a'), function (elem) {
    if (elem.getAttribute('href') === window.location.pathname) {
        elem.style.color = '#FF0000';
    }
}); 
```

更简单的替代方法是在*服务器*端处理它。当您打印出标题链接时，请检查当前位置并设置链接的样式（如果有匹配项）。

编辑：jQuery 版本：

```
$("a").each(function () {
    if ($(this).attr('href') === window.location.pathname) {
        $(this).css('color', '#FF0000');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T16:50:10.703

一种设置链接样式的简单方法：

```
ul.menu li a:active {color: #FF0000;} 
```

编辑：对不起，我错过了你说你希望新页面加载时颜色保持不变的部分。如前所述，您需要一些客户端/服务器端代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T16:43:45.953

尝试`.site-navigation:visited`访问的链接。见这里：http: [//jsfiddle.net/Kgxrw/](http://jsfiddle.net/Kgxrw/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T16:44:04.563

你的 CSS 没有做你认为的那样：

`#primary-menu, .default-menu, #mobile-menu-dropdown li, .site-navigation a:active`

逗号代表`OR`不`AND`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-22T07:52:00.247

为了做你想做的事，你必须首先理解 **a:hover 必须** 在CSS 定义中的**a:link**和**a:visited**之后才能有效。如果它们不按此顺序，则它们将无法工作。

其次，您必须了解，如果您认为 (a:active) 是指最终用户所在的当前链接的颜色，这是不正确的。(a:active) 单击链接时会更改颜色。您可以通过在您使用 (a:active) 设置不同颜色的链接上按住鼠标按钮来测试这一点。

最后，如果您尝试仅使用 CSS 来执行此操作，则必须在最终用户所在的当前链接上添加一个特定的类。下面我给你一个例子希望这会有所帮助:)

您的导航栏如下-Home
-News
-Blog
-ect
...

我们在此示例的“博客”页面上：

```
 /*YOUR CSS SHOULD LOOK LIKE THIS*/
    /* Note: You can make these any colors you want *\

    /* unvisited link grey */
    #primary-menu-container a:link {
    	color: #777;
    }
    /* visited link grey */
    #primary-menu-container a:visited {
    	color: #777;
    }
    /* mouse over link blue */
    #primary-menu-container a:hover {
    	color: #0CF;
    }
    /* selected link blue */
    #primary-menu-container a:active {
    	color: #0CF;
    }
    /* !IMPORTANT ONLY ADD THIS CLASS TO YOUR ACTIVE PAGE LINK ( Color Blue )*/
    /* Note: You can make this any color you want */

    .activePage a {
    	color: #0CF !important
    }
```

```
<nav id="primary-menu-container" role="navigation">
<div class="menu-main-menu-container">
<ul id="primary-menu" class="menu">
<li id="menu-item-79" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-79"><a href="http://website.com/new_site/">Home</a></li>
<li id="menu-item-38" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-38"><a href="http://website.com/new_site/tagged?tag=news">News</a></li>
<li id="menu-item-69" class="activePage"><a href="http://website.com/new_site/tagged">Blog</a></li><!-- Notice the clase="activePage" -->
<li id="menu-item-71" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-71"><a href="http://website.com/new_site/music">Music</a></li>
<li id="menu-item-73" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-73"><a href="http://website.com/new_site/shows">Shows</a></li>
<li id="menu-item-75" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-75"><a href="http://website.com/new_site/photos">Photos</a></li>
<li id="menu-item-76" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-76"><a href="http://website.com/new_site/videos">Videos</a></li>
<li id="menu-item-113" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item menu-item-113"><a href="http://website.com/new_site/faq">FAQ</a></li>
<li id="menu-item-21" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-21"><a href="http://website.com/new_site/contact">Contact</a></li>
</ul></div>             
</nav>
```

注意我没有在其他链接中放置 .activePage 标签？这样做是允许您在 css 中为导航栏选择的原始颜色仍然存在，而活动页面保持不变并具有不同的颜色。

之所以可行，是因为我在该单独类的颜色末尾添加了**!important 。**

```
.activePage {
      color: #0CF !important
    }
```

因此，要将相同的技术应用于您的其他页面，它看起来就像这样：

“主页”

```
 /*YOUR CSS SHOULD LOOK LIKE THIS*/
    /* Note: You can make these any colors you want *\

    /* unvisited link grey */
    #primary-menu-container a:link {
    	color: #777;
    }
    /* visited link grey */
    #primary-menu-container a:visited {
    	color: #777;
    }
    /* mouse over link blue */
    #primary-menu-container a:hover {
    	color: #0CF;
    }
    /* selected link blue */
    #primary-menu-container a:active {
    	color: #0CF;
    }
    /* !IMPORTANT ONLY ADD THIS CLASS TO YOUR ACTIVE PAGE LINK ( Color Blue )*/
    /* Note: You can make this any color you want */

    .activePage a {
    	color: #0CF !important
    }
```

```
 <nav id="primary-menu-container" role="navigation">
<div class="menu-main-menu-container">
<ul id="primary-menu" class="menu">
<li id="menu-item-79" class="activePage"><a href="http://website.com/new_site/">Home</a></li><!-- Notice the clase="activePage" -->
<li id="menu-item-38" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-38"><a href="http://website.com/new_site/tagged?tag=news">News</a></li>
<li id="menu-item-69" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-69"><a href="http://website.com/new_site/tagged">Blog</a></li>
<li id="menu-item-71" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-71"><a href="http://website.com/new_site/music">Music</a></li>
<li id="menu-item-73" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-73"><a href="http://website.com/new_site/shows">Shows</a></li>
<li id="menu-item-75" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-75"><a href="http://website.com/new_site/photos">Photos</a></li>
<li id="menu-item-76" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-76"><a href="http://website.com/new_site/videos">Videos</a></li>
<li id="menu-item-113" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item menu-item-113"><a href="http://website.com/new_site/faq">FAQ</a></li>
<li id="menu-item-21" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-21"><a href="http://website.com/new_site/contact">Contact</a></li>
</ul></div>             
</nav>
```

我希望我给了你一个可靠的答案。

# jquery - 跟随图像的窗口

> ID：15176785
> 
> 赞同：1
> 
> 时间：2013-03-02T16:35:22.570
> 
> 标签：jquery, scroll, window, horizontal-scrolling, smooth-scrolling

我希望我的程序窗口`img`在一定范围内跟随马里奥而不是滚动，本质上是移除滑动条并以某种方式保持窗口专注于马里奥角色（就像任何 2D 横向滚动视频游戏一样）。关于如何使用 jQuery 或 HTML 执行此操作的任何想法？

[你可以在这里](http://jsfiddle.net/Zeaklous/jh7LD/5/)找到我的程序。如所见，我有希望窗口显示的上限和下限，但我没有办法移动屏幕以显示这些边界

**编辑：**最好将硬币计数器、音乐播放/暂停按钮以及我在屏幕顶部添加的任何其他内容与窗口一起移动。容器`div`可以做到这一点吗？我可以只使用 CSS 移动来影响 中的所有元素`div`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T03:57:46.570

您可以尝试使用负边距移动整个页面，并使用`position: fixed`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:41:57.020

为此，我`moveAmount`在函数中创建了一个临时变量，该变量计算了我的马里奥和变量之间`moveMario`的距离，并使用代码移动了包含硬币计数器和音乐播放/暂停按钮的`img``upperRange``lowerRange``div``$("#id").animate({"left":"+=" + moveAmount + "px"},1);`

对于实际窗口的移动，我使用了相同的概念，但使用了代码`window.scrollTo(lowerRange - (1/10)*winWidth, 0);`（因为`lowerRange`最初定义为`(1/10)*winWidth`）

在尝试了一周不同的事情后，我真的为自己解决了这个问题而感到自豪。

[在这里](http://jsfiddle.net/Zeaklous/NpKgc/31/)查看我的工作示例！

# css - css 中的 C++ 样式注释样式

> ID：15176786
> 
> 赞同：0
> 
> 时间：2013-03-02T16:35:39.617
> 
> 标签：css

我设计了一个基于 webkit 的 web 应用程序，我正在使用 c++ 生成我的 css，所以我自然地使用 c++ ide。我完成的 css 文件看起来像

```
/**
Css Modules and Sub Modules Table Of Content
 */

responsiveGrid();
resets();

/**
 * @brief responsiveGrid
 * @return
 */
function responsiveGrid(){}
.container{}
/**
 * @brief resets
 * @return
 */
function resets(){}
.tableView{} 
```

函数定义应该被删除，函数实现也应该被删除，给我留下评论和干净清晰的 css 代码。我的问题是评论。这种类型的评论会被允许吗`css3`？`css2`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T16:51:33.323

您可以通过简单地查看官方 CSS 规范来自己弄清楚这一点。[CSS2 规范](http://www.w3.org/TR/CSS2/)[在评论部分](http://www.w3.org/TR/CSS2/syndata.html#comments)说

> 注释以字符开头，以字符`"/*"`结尾 `"*/"`。它们可能出现在其他标记之外的任何地方，它们的内容对渲染没有影响。评论不能嵌套。

CSS3 规范[没有涵盖语法](http://www.w3.org/TR/css-2010/#css3)的模块，因此适用 CSS2 规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T16:44:43.813

当然，只要它们以 . 开头`/*`和结尾，它们就可以作为评论`*/`。它们与 CSS 中的任何其他注释具有相同的含义：无。

顺便说一句，这些是 C 风格的注释，而不是 C++ 风格的。C++ 单行注释以 开头`//`，没有结束标记，并且不是有效的 CSS。

# macos - 如何在 TextWrangler 中打开 Infile

> ID：15176790
> 
> 赞同：-2
> 
> 时间：2013-03-02T16:35:52.203
> 
> 标签：macos, perl, text-files, textwrangler, file-io

我在 Mac 上使用 TextWrangler 来运行 Perl。

我有一个文本文件，我想将其作为 TextWrangler 的输入文件打开，但我不断收到错误消息，`Error: cannot open file simap data.txt for reading.`

我知道我的代码是正确的，因为它可以在 PC 上运行（使用 Perl Express）。

但是，我认为我没有将要打开的文本文件保存在正确的位置。我应该把它保存在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T20:35:59.923

除非您提供文件的完整路径，否则您的程序将在当前工作目录中查找它。如果您将`open`调用编写为

```
open my $fh, '<', '/full/path/to/simap data.text' or die $!; 
```

或者如果你想省略路径并把它放在当前工作目录中，而你不知道那在哪里，那么添加

```
use Cwd 'abs_path';
print abs_path('simap data.text'), "\n"; 
```

如果您只提供一个文件名到`open`.

# javascript - 将变量从多个javascript函数传递给另一个？

> ID：15176794
> 
> 赞同：1
> 
> 时间：2013-03-02T16:36:23.880
> 
> 标签：javascript

有两个下拉列表，我试图将两者的选定值传递给另一个函数。知道我这样做的方式是不正确的，但是看了这么久却看不到可能简单的解决方案。

```
 d3.select("#parameterType").on("change", function() 
    {
        var selectedParameter = this.value;
        console.log(selectedParameter);
        filterData(selectedParameter);
    });

    d3.select("#dateTimeTaken").on("change", function() 
    {   
        var selectedMonth = this.value;
        console.log(selectedMonth);
        filterData(selectedMonth)
    });

    function filterData(selectedParameter,selectedMonth)
    {
        console.log(selectedParameter);
        console.log(selectedMonth);
    } 
```

谁能帮我指出正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:43:09.323

我建议在您尝试将参数传递到的函数中检索选定的值。像这样的东西：

```
function filterData()
{
   var selectedParameter = document.getElementById("parameterType").value;
   var selectedMonth = document.getElementById("dateTimeTaken").value;
   console.log(selectedParameter);
   console.log(selectedMonth);
} 
```

并在任何一个选定值发生变化时调用该函数。

```
d3.select("#parameterType").on("change", function() { filterData(); });

d3.select("#dateTimeTaken").on("change", function() { filterData(); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T16:39:10.490

试试这个方法：

跟踪函数`selectedParameter`和`selectedMonth`函数之外。在`onchange`处理程序中，设置适当的变量，然后调用`filterData`不带参数的函数。然后`filterData`检查是否设置了两个变量，如果是，则对它们进行处理。

代码：

```
var filterData = (function () {
    var selectedParameter, selectedMonth;
    d3.select("#parameterType").on("change", function() 
    {
        selectedParameter = this.value;
        filterData();
    });

    d3.select("#dateTimeTaken").on("change", function() 
    {   
        selectedMonth = this.value;
        filterData();
    });

    function filterData()
    {
        if (selectedParameter === undefined || selectedMonth === undefined) {
            console.log("Both variables not set yet.");
            return;
        }
        console.log("Both variables are set!");
    }
    return filterData;
})(); 
```

我将它包装在一个闭包中，这样变量就不会泄漏到全局范围内，并让闭包返回`filterData`函数，这样它就可以在闭包之外被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T16:38:22.363

通过更改 var selectedParameter = this.value; 创建一个全局变量 到刚刚 selectedParameter = this.value; 没有变量。

# java - tomcat 6 终身内存问题

> ID：15176795
> 
> 赞同：0
> 
> 时间：2013-03-02T16:36:24.947
> 
> 标签：java, tomcat, tomcat6

我们的应用程序部署在 tomcat 6 中，在监控 tomcat 性能的同时，我们了解到终身内存在不断增加，它即将达到提交的内存。我担心之后它会停止工作。

以下是永久内存的统计数据： 已用：296,436 kbytes 已提交：349,568 kbytes 最大：1,398,144 kbytes GC 时间：复制时 15.116 秒（348 个集合）

 MarkSweepCompact 1.754 秒（5 个集合）

请指导。谢谢，阿鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:13:23.810

它可能是由您的应用程序中的内存泄漏引起的。

你可以阅读得到一些关于不同内存空间的信息：[java内存池是如何划分的？](https://stackoverflow.com/questions/1262328/how-is-the-java-memory-pool-divided)

我建议您在应用程序上运行分析器（例如：[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)），您将能够检测到留在内存中的对象（未获得 GC 的对象）。

# jetty - 使用 logback 过滤掉扫描仪事件

> ID：15176797
> 
> 赞同：3
> 
> 时间：2013-03-02T16:36:28.257
> 
> 标签：jetty, slf4j, logback

我第一次与 Jetty 一起使用 logback。我一切正常，但我确实有一件烦人的事情我想不通。一旦 Jetty 启动，我就会开始获取一个日志文件，其中包含以下内容：

```
2013-03-02 11:19:23.933:DBUG:oeju.Scanner:scanned [C:\Code\jetty-8\contexts]: {}
2013-03-02 11:19:24.646:DBUG:oeju.Scanner:scanned [C:\Users\willie\AppData\Local\Temp\context5868271910991031759deploy]: {}
2013-03-02 11:19:24.938:DBUG:oeju.Scanner:scanned [C:\Code\jetty-8\webapps]: {}
2013-03-02 11:19:24.943:DBUG:oeju.Scanner:scanned [C:\Code\jetty-8\contexts]: {}
2013-03-02 11:19:25.655:DBUG:oeju.Scanner:scanned [C:\Users\willie\AppData\Local\Temp\context5868271910991031759deploy]: {}
2013-03-02 11:19:25.948:DBUG:oeju.Scanner:scanned [C:\Code\jetty-8\webapps]: {}
2013-03-02 11:19:25.952:DBUG:oeju.Scanner:scanned [C:\Code\jetty-8\contexts]: {}
2013-03-02 11:19:26.665:DBUG:oeju.Scanner:scanned [C:\Users\willie\AppData\Local\Temp\context5868271910991031759deploy]: {}
2013-03-02 11:19:26.958:DBUG:oeju.Scanner:scanned [C:\Code\jetty-8\webapps]: {}
2013-03-02 11:19:26.963:DBUG:oeju.Scanner:scanned [C:\Code\jetty-8\contexts]: {}
2013-03-02 11:19:27.675:DBUG:oeju.Scanner:scanned [C:\Users\willie\AppData\Local\Temp\context5868271910991031759deploy]: {}
2013-03-02 11:19:27.968:DBUG:oeju.Scanner:scanned [C:\Code\jetty-8\webapps]: {}
2013-03-02 11:19:27.973:DBUG:oeju.Scanner:scanned [C:\Code\jetty-8\contexts]: {} 
```

logback 中过滤的语法有点神秘，我不知道如何告诉 logback 忽略这些扫描事件。我已经尝试了明显的

```
<filter class="oeju.Scanner" /> 
```

但它不起作用。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T02:25:46.477

您看到的日志格式不是 logback

```
2013-03-02 11:19:26.665:DBUG:oeju.Scanner:scanned .... 
```

那是Jetty自己内部[`StdErrLog`](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/util/log/StdErrLog.html)产生的日志格式。所以用 logback 过滤掉它（还）不起作用。

**如何使 logback 在 Jetty 中工作**

首先，确保您的服务器类路径中存在 slf4j-api 和 logback jar。

完成此操作的最简单方法是将它们放入`${jetty.home}/lib/ext/`并通过在命令行上快速检查来验证它们是否存在。

```
$ java -jar start.jar --version 
```

这将向您显示服务器类路径中将包含的内容。

现在开始码头。应该检测到 slf4j-api 类，并且内部日志记录从 切换[`StdErrLog`](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/util/log/StdErrLog.html)到[`Slf4jLog`](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/util/log/Slf4jLog.html).

此时您只需要配置 logback。通常带有一个`${jetty.home}/resources/logback.xml`文件。（有关详细[信息，请参阅](http://logback.qos.ch/manual/configuration.html)[logback 文档](http://logback.qos.ch/manual/index.html)）

**的意思`oeju.Scanner`**

至于这`oeju.Scanner`部分，那是 StdErrLog 为命名的 logger 生成的全限定类名的缩写[`org.eclipse.jetty.util.Scanner`](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/util/Scanner.html)。看看它是如何只使用每个包命名空间段的第一个字母来形成`oeju`?

**如何在 logback 中过滤 Scanner 事件**

在您的 logback.xml 中，使用以下内容代替您的问题，将该特定类的日志记录级别设置为 INFO。

```
<logger name="org.eclipse.jetty.util.Scanner" level="info" /> 
```

# php - php中的类型提示

> ID：15176798
> 
> 赞同：2
> 
> 时间：2013-03-02T16:36:31.243
> 
> 标签：php, oop, arguments, type-hinting

所以我找到了这个例子，我正在学习php oop，我想问一下addProduct方法中的参数ShopProduct是什么意思以及它有什么作用？

```
abstract class ShopProductWriter {
    protected $products = array();
    public function addProduct( ShopProduct $shopProduct ) {
        $this->products[]=$shopProduct;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T16:52:36.447

### 让我们一行一行地看：

```
abstract class ShopProductWriter { 
```

声明一个`abstract`名为`ShopProductWriter`. `abstract`类不能被实例化（你永远不能有一个实例`ShopProductWriter`。）为了使用这个类，你必须创建一个扩展类`ShopProductWriter`。*见[http://php.net/manual/en/language.oop5.abstract.php](http://php.net/manual/en/language.oop5.abstract.php)*

```
protected $products = array(); 
```

创建一个名为的类变量`$products`，它是一个数组。这个变量的可见性是`protected`。这意味着`$products`只能使用 this 运算符从类上下文中访问。此外，`$this->products`将可用于所有扩展`ShopProductWriter`. *见[http://php.net/manual/en/language.oop5.visibility.php](http://php.net/manual/en/language.oop5.visibility.php)和[http://php.net/manual/en/language.oop5.basic.php](http://php.net/manual/en/language.oop5.basic.php)*

```
public function addProduct( ShopProduct $shopProduct ) { 
```

定义了一个`public`名为的可见函数`addProduct`，这个函数可以在任何类实例扩展的类上下文之外调用`ShopProductWriter`。此函数采用单个参数，该参数必须是`ShopProduct`OR 子类扩展的实例`ShopProduct` *（“如果将类或接口指定为类型提示，则也允许其所有子类或实现。”参见[http://php.net/manual/ zh/language.oop5.typehinting.php](http://php.net/manual/en/language.oop5.typehinting.php)）。*

```
$childInstance = new ChildCLassExtendingShopProductWriter();
$childInstance->addProduct($IAmAShopProductInstance); 
```

最后，

```
$this->products[]=$shopProduct; 
```

该函数将传递给 addProduct 函数的任何实例添加到类数组`products`中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T16:39:08.530

这意味着`$shopProduct`必须是`ShopProduct`类的实例

但请注意，类型提示仅适用于对象、数组和接口。例如，您不能为字符串做类型提示

你**不能**做

`function wontWork(string $string) {}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T16:38:10.417

它将给定的产品添加到对象存储的产品列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T16:40:27.607

`ShopProductWriter`是一个抽象类。并且`$products`是一个受保护的变量，其中`array`存储 `addProduct`的是一个函数，其中对象存储的产品列表

# algorithm - 最佳拟合 2D blob 上的矩形

> ID：15176799
> 
> 赞同：5
> 
> 时间：2013-03-02T16:36:42.187
> 
> 标签：algorithm, opencv, image-processing, image-recognition, object-recognition

我有一个二进制 blob（见图），我想在它上面放置一个*已知宽度和高度*的矩形。

如何找到最佳拟合矩形，即最大前景像素在内部而最大数量背景像素在外部的矩形？

（这是我对最佳匹配的初步定义，我愿意接受其他建议）

我正在寻找已知大小的矩形，但如果有任意大小的解决方案，那也很好。

示例 blob： ![在此处输入图像描述](../Images/9debbc6a005fc5ffea7f31eab0894ce2.png)

我想找到这些矩形： ![在此处输入图像描述](../Images/e4b2f62d367f92ee90c40105d2db2917.png)

到目前为止我的想法包括

*   从最小的封闭矩形开始；但这不适合这些 blob
*   最大封闭矩形；同样的问题，另外我没有算法
*   用霍夫变换找到矩形边；数据太嘈杂了。

我意识到对于符合我的标准的同一个 blob 可能有多个矩形，理想情况下，我想要一些可以找到所有候选者的算法（认为因为这可能更难，我很乐意找到一种只找到一个候选者的方法） ： ![在此处输入图像描述](../Images/765556a065ce5f1b981ccd07a58d7877.png) ![在此处输入图像描述](../Images/b4a0f0a6a5d861b79aabf871fe1d4ee3.png)

我主要使用 opencv 和 cvBlobLib 来处理我的数据，但我愿意接受任何通用解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T17:28:50.033

I have seen a thesis on a similar subject (circle covering on a RGB plane), based on an evolutionary approach.

*   The objective function was clearly defined (How many squares? How big? Can they overlap? You'd probably want to penalize small or overlapping squares).
*   You may start by running the [k-means](http://en.wikipedia.org/wiki/K-means_clustering) algorithm to preprocess the data, i.e. find potential center points of the squares.

As I recall, SGA, CGA and eCGA were compared (CGA started with initial, k-means-based covering), with SGA outperforming the others. They were ran on a per-image basis. There were around 30 individuals and 20 generations with runtimes around a couple of minutes.

As for the SGA, the crossover operator would take two parents at a time and pair up the closes/most similar circles from both of the parents. Then, for each pair, it would draw a children circle somewhere in between with a radius also in between that of the two circles'. (Though I would suggest not to take values exactly between those of the parents', but allow +/- 15% outside the range. It would keep the population from the premature convergence).

With rectangles, you'd have to slightly modify the approach; each rectangle could be a tuple *(x, y, width, height, rotation)*, with *x* and *y* being the coordinates of the center.

# java - Java - 将字符串转换为双精度的最有效方法

> ID：15176800
> 
> 赞同：1
> 
> 时间：2013-03-02T16:36:52.960
> 
> 标签：java, arrays, string, parsing, double

嗨，我正在读取文本文件并将每一行（用逗号分隔）保存到一个数组中。唯一的问题是数组中的大多数元素都是双精度值，而两个元素是字符串。因此，我不得不将数组设为 String[] 数组。因此，每当我想对数组中的双精度值执行一些方程式时，我必须首先将它们解析为双精度值。我实际上是在运行这些方程的 1000 多次迭代，因此我的代码不断地将字符串解析为双精度。这是一种代价高昂的方式，它减慢了我的程序。有没有更好的方法可以将字符串数组中的值转换为双精度值，或者在保存文本文件中的行时应该采取更好的方法？谢谢

这是我从文本文件中读取后其中一个数组的样子：

```
String[] details = {"24.9", "100.0", "19.2" , "82.0", "Harry", "Smith", "45.0"}; 
```

我现在需要将前 2 个元素相乘并将其添加到第 3、第 4 和第 7 个元素的总和中。换句话说，我只使用数字元素（当然保存为字符串）

```
double score = (Double.parseDouble(details[0]) * Double.parseDouble(details[1])) + Double.parseDouble(details[2]) + Double.parseDouble(details[3]) + Double.parseDouble(details[6]); 
```

我必须对文本文件中的每一行（1000 多行）执行此操作。因此，我的程序运行非常缓慢。有没有更好的方法可以将字符串值转换为双精度值？还是有更好的方法我应该首先存储它们？

编辑：我使用分析器检查代码的哪一部分是最慢的，它确实是我上面显示的代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T18:02:23.907

这是一个生成输入文件的示例，例如您描述的 10000 行长的输入文件，然后将其读回并执行您发布的计算并将结果打印到标准输出。为了获得最差的读取性能，我在读取文件时专门禁用了任何缓冲。正如其他人所建议的那样，我也根本没有做任何缓存。整个过程，包括生成文件、进行计算和打印结果，始终需要大约 520-550 毫秒。这几乎不是“慢”，除非您对数百或数千个文件重复相同的过程。如果您看到与此截然不同的性能，那么可能是硬件问题。出现故障的硬盘可能会使读取性能下降到几乎为零。

```
import java.io.*;
import java.util.Random;

public class ReadingDoublesFromFileEfficiency {
    private static Random random = new Random();

    public static void main(String[] args) throws IOException {
        long start = System.currentTimeMillis();
        String filePath = createInputFile();
        BufferedReader reader = new BufferedReader(new FileReader(filePath), 1);
        String line;
        while ((line = reader.readLine()) != null) {
            String[] details = line.split(",");
            double score = (Double.parseDouble(details[0]) * Double.parseDouble(details[1])) + Double.parseDouble(details[2]) + Double.parseDouble(details[3]) + Double.parseDouble(details[6]);
            System.out.println(score);
        }
        reader.close();
        long elapsed = System.currentTimeMillis() - start;
        System.out.println("Took " + elapsed + " ms");
    }

    private static String createInputFile() throws IOException {
        File file = File.createTempFile("testbed", null);
        PrintWriter writer = new PrintWriter(new FileWriter(file));
        for (int i = 0; i < 10000; i++) {
            writer.println(randomLine());
        }
        writer.close();
        return file.getAbsolutePath();
    }

    private static String randomLine() {
        return String.format("%f,%f,%f,%f,%s,%s,%f",
                score(), score(), score(), score(), name(), name(), score());
    }

    private static String name() {
        String name = "";
        for (int i = 0; i < 10; i++) {
            name += (char) (random.nextInt(26) + 97);
        }
        return name;
    }

    private static double score() {
        return random.nextDouble() * 100;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T16:58:16.833

您最好创建一个适当的对象并将值存储在其中 - 这给您带来两个主要好处，1）您的代码会更快，因为您避免不必要地重新计算双精度值和 2）您的代码会更清晰，因为字段将被命名，而不是`details[0]`在完全不清楚`[0]`所指内容的情况下进行调用。

由于 2) 我不知道这些字段应该是什么，所以显然你的课程看起来会有所不同，但想法是一样的：

```
public class PersonScore {
    private double[] multipliers = new double[2];
    private double[] summers = new double[3];
    private String first;
    private String last;

    // expects a parsed CSV String
    public PersonScore(String[] arr) {
        if(arr.length != 7)
            throw new InvalidArgumentException("Must pass exactly 7 fields");
        multipliers[0] = Double.parseDouble(arr[0]);
        multipliers[1] = Double.parseDouble(arr[1]);
        summers[0] = Double.parseDouble(arr[2]);
        summers[0] = Double.parseDouble(arr[3]);
        summers[0] = Double.parseDouble(arr[6]);
        first = arr[4];
        last = arr[5];
    }

    public double score() {
        double ret = 1;
        for(double mult : multipliers)
            ret *= mult;
        for(double sum : summers)
            ret += sum;
        return ret;
    }

    public String toString() {
        return first+" "+last+": "+score();
    }
} 
```

请注意，还有一个额外的好处，即 score 方法现在更加健壮。您在上面的实现对我们想要使用的字段进行了硬编码，但是通过将字段解析并存储为结构内容，我们能够实现更易读、更可扩展的分数计算方法。

# c - c 字符串构造

> ID：15176802
> 
> 赞同：0
> 
> 时间：2013-03-02T16:36:59.200
> 
> 标签：c, string

我正在尝试解析`argv`回单个字符串以用于系统调用。该字符串通过调用显示得很好`printf`（即使没有`\0`终止符），但是将其用作系统的参数会产生各种未定义的行为。

如何确保字符串正确终止？有没有更好、更可靠的方法来`char[][]`解析`char[]`？

```
#include <stdio.h>
int main(int argc,char *argv[]){

char cmd[255]="tcc\\tcc.exe ";
char**ptr=argv+1;
while(*ptr){
   strcat(cmd,*ptr);
   ++ptr;
   if(*ptr)cmd[strlen(cmd)]=' ';
}

printf("cmd: ***%s***\n",cmd);
system(cmd);
} 
```

我刚刚发现并纠正了此代码中的另一个缺陷，系统命令需要（转义）文件路径的反斜杠

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:44:48.120

该指令：

```
 if(*ptr)
       cmd[strlen(cmd)]=' ';
   else
       cmd[strlen(cmd)]='\0'; 
```

将 break `cmd`，因为它将覆盖其零终止。请尝试：

```
l = strlen(cmd);
if (*ptr) {
    cmd[l++] = ' ';
}
cmd[l] = 0x0; 
```

这将附加一个空格，*并且*零终止字符串。实际上，由于它已经为零终止，您可以做得更好：

```
if (*ptr) {
    int l = strlen(cmd);
    cmd[l++] = ' ';
    cmd[l  ] = 0x0;
} 
```

## 更新

一个更好的选择可能是这样的：

```
int main(int argc, char *argv[])
{
        char cmd[255]="tcc/tcc.exe";
        char **ptr=argv+1;
        for (ptr = argv+1; *ptr; ptr++)
        {
            strncat(cmd, " ",  sizeof(cmd)-strlen(cmd));
            strncat(cmd, *ptr, sizeof(cmd)-strlen(cmd));
        }
        printf("String: '%s'.\n", cmd);
        return 0;
} 
```

我们`strncat()`用来检查我们没有超出`cmd`缓冲区，并且空间被提前应用。这样，字符串末尾就没有多余的空间了。

确实`strncat()`比直接赋值要慢一点`cmd[]`，但考虑到安全和调试时间，我觉得还是值得的。

## 更新 2

好的，所以让我们尝试快速完成此操作。我们跟踪变量中*应该*`cmd`有什么长度，并复制比它稍快的字符串，既不检查字符串长度，也不复制字符串末尾的额外零。*`memcpy()``strcpy()`*

 *（这节省了一些东西 - 请记住，`strcat()`必须隐式计算它`strlen`的两个参数。这里我们保存它）。

```
int main(int argc, char *argv[])
{
        #define MAXCMD  255
        char    cmd[MAXCMD]="tcc/tcc.exe";
        int     cmdlen  = strlen(cmd);
        char    **ptr=argv+1;
        for (ptr = argv+1; *ptr; ptr++)
        {
            /* How many bytes do we have to copy? */
            int l = strlen(*ptr);
            /* STILL, this check HAS to be done, or the program is going to crash */
            if (cmdlen + 1 + l + 1 < MAXCMD)
            {
                /* No danger of crashing */
                cmd[cmdlen++]   = ' ';
                memcpy(cmd + cmdlen, *ptr, l);
                cmdlen  += l;
            }
            else
            {
                printf("Buffer too small!\n");
            }
        }
        cmd[cmdlen] = 0x0;
        printf("String: '%s'.\n", cmd);
        return 0;
} 
```

## 更新 3 - 不是很推荐，但很有趣

可以尝试比编译器的*通常*内置`strlen`和`memcpy`指令更聪明（文件位于：“Bad Ideas”下），并且完全不使用 strlen()。这转化为更小的内部循环，并且当`strlen`和`memcpy`通过库调用实现时，性能更快（*看起来，没有堆栈帧！*）。

```
int main(int argc, char *argv[])
{
        #define MAXCMD  254
        char    cmd[MAXCMD+1]="tcc/tcc.exe";
        int     cmdlen  = 11; // We know initial length of "tcc/tcc.exe"!
        char    **ptr;
        for (ptr = argv+1; *ptr; ptr++)
        {
            cmd[cmdlen++] = ' ';
            while(**ptr) {
                cmd[cmdlen++] = *(*ptr)++;
                if (MAXCMD == cmdlen)
                {
                        fprintf(stderr, "BUFFER OVERFLOW!\n");
                        return -1;
                }
            }
        }
        cmd[cmdlen] = 0x0;
        printf("String: '%s'.\n", cmd);
        return 0;
} 
```

## 讨论 - 不那么有趣

*我从我认为目光短浅的教授那里收到的许多讲座无耻地抄袭，直到他们每次都被证明是正确的*。

这里的问题是要准确界定**我们**在做什么——这棵特定的*树*属于哪个*森林。*

 *我们正在构建一个将被提供给`exec()`调用的命令行，这意味着操作系统将不得不构建另一个进程环境并分配和跟踪资源。让我们退后一步：将运行一个大约需要 1 毫秒的操作，我们正在为其提供一个可能需要 10 微秒而不是 20 微秒的循环。

我们对内部循环的 20:10（即 50%！）改进转化为 1020:1010（即大约 1%）只是整个*流程启动*操作。让我们假设这个过程需要半秒 - 五百毫秒 - 才能完成，我们正在查看 500020:500010 或 0.002% 的改进，这与从未充分记住的[http://en.wikipedia.org/wiki一致/Amdahl%27s_law](http://en.wikipedia.org/wiki/Amdahl%27s_law)。

或者让我们换一种说法。一年后，我们将运行这个程序，比如说，*十亿次*。现在节省的这 10 微秒转化为惊人的 10.000 秒，或大约两个小时零三分之二。我们开始大谈特谈，*除了*为了获得这个结果，我们花费了 16 个小时的编码、检查和调试 :-)

双重`strncat()`解决方案（实际上是*最慢*的）提供更易于阅读、理解和修改的代码。并重复使用。上面最快的解决方案*隐含地依赖于分隔符是一个字符*，而*这一事实并不是立即显而易见*的。这意味着重用以“，”作为分隔符的最快解决方案（假设我们需要它用于 CSV 或 SQL）现在*将引入一个微妙的错误*。

在设计一个算法或一段代码时，明智的做法是不仅要考虑代码的紧密度和本地（“钥匙孔”）性能，还要考虑以下因素：

*   单曲如何影响整体的表现。将 10% 的开发时间花在*不到*10% 的总体目标上是没有意义的。
*   *编译器*解释它是多么容易（并且无需我们进一步努力对其进行优化，甚至可能专门针对不同的平台进行优化——所有这些都是免费的！）
*   几天、几周或几个月后，*我们*将多么容易理解它。
*   代码的非特定性和健壮性如何，允许在其他地方重用它（[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)）。
*   它的意图有多清晰 - 允许稍后对其进行重新设计，或者用相同意图的不同实现 ( [DRAW](http://en.wikipedia.org/wiki/Reinventing_the_wheel) ) 替换。

## 一个微妙的错误

这是为了回答威廉莫里斯的问题，所以我将使用他的代码，但我的代码也有同样的问题（实际上，我的问题 - 并非完全是无意的 -**更糟**）。

这是 William 代码的原始功能：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
    #define CMD "tcc/tcc.exe"
    char cmd[255] = CMD;
    char *s = cmd + sizeof CMD - 1;
    const char *end = cmd + sizeof cmd - 1;
    // Cycle syntax modified to pre-C99 - no consequences on our code
    int i;
    for (i = 1; i < argc; ++i) {
        size_t len = strlen(argv[i]);
        if (s + len >= end) {
            fprintf(stderr, "Buffer overrun!\n");
            exit(1);
        }
        // Here (will) be dragons
        //*s++ = '.';
        //*s++ = '.';
        //*s++ = '.';

        *s++ = ' ';
        memcpy(s, argv[i], len);
        s += len;
    }
    *s = '\0';
    // Get also string length, which should be at most 254
    printf("%s: string length is %d\n", cmd, (int)strlen(cmd));
    return 0;
} 
```

缓冲区溢出检查验证*到目前为止写入*的字符串以及*尚未写入的字符串*一起不超过缓冲区。**分隔符本身的长度不计算在内**，但事情会以某种方式解决：

```
 size_t len = strlen(argv[i]);
        if (s + len >= end) {
            fprintf(stderr, "Buffer overrun!\n");
            exit(1);
        } 
```

现在我们以最快速的方式添加分隔符 - 通过重复戳：

```
 *s++ = ', ';
        *s++ = ' '; 
```

现在如果`s + len`等于`end - 1`，则检查将通过。我们现在添加*两个*字节。总长度为 s + len + 2，等于 end*加一*：

> tcc/tcc.exe, 它是, 最好的, 时代, 它, 是, 最坏的, 时代, 它, 是, 时代, 的, 智慧, 它, 是, 时代, of, 愚蠢, it, was, the, epoch, of, confidence, it, was, the, epoch, of, incredulity, it, was, the, season, of, Light, it, was: string length is 254
> 
> tcc/tcc.exe, 它是, 最好的, 时代, 它, 是, 最坏的, 时代, 它, 是, 时代, 的, 智慧, 它, 是, 时代, of, 愚蠢, it, was, the, epoch, of, 信念, it, was, the, the, epoch, of, incredulity, it, was, the, season, of, Light, it, **ouch** : string length is **255**

使用更长的分隔符，例如“...”，问题就更加明显了：

> tcc/tcc.exe... 它... 是... 最好的... 次... 它... 是... 最... 最差的... ..时代……它……是……智慧的……时代……它……是……时代……的……愚蠢……它……是……信仰的……时代……它……曾经……**更长**：字符串长度为 **257**

*在我的版本中，检查需要完全*匹配的事实会导致**灾难性的结果**，因为一旦缓冲区溢出，匹配将始终失败并导致大量内存覆盖。

如果我们修改我的版本

```
if (cmdlen >= MAXCMD) 
```

我们将得到一个总是拦截缓冲区溢出的代码，*但仍然不能阻止它们*直到分隔符的长度减去 2；即，假设的 20 字节长的分隔符在被捕获之前可能会覆盖 18 字节`cmd`的缓冲区。

我要指出，这**并不是**说我的代码有一个灾难性的错误（因此，一旦修复，它将永远快乐）；关键是代码的结构方式是，为了加快速度，*一个危险的错误很容易被忽视*，或者在重用看起来“安全且经过测试”的东西时很容易引入相同的错误代码。这是一种最好避免的情况。

（我现在要坦白，并承认我自己很少这样做......而且经常仍然不这样做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T17:44:35.993

这可能比您想要的更复杂，但它避免了缓冲区溢出，并且如果缓冲区太小它也会退出。请注意，一旦缓冲区中没有足够的空间，继续循环`argv[N]`可能会导致尾随字符串（`argv[N+1]`等）比`argv[N]`添加到字符串中更短，即使`argv[N]`被省略...

请注意，我正在使用`memcpy`，因为到那时我已经知道多长时间了`argv[i]`。

```
int main(int argc, char **argv)
{
#define CMD "tcc/tcc.exe"
    char cmd[255] = CMD;
    char *s = cmd + sizeof CMD - 1;
    const char *end = cmd + sizeof cmd - 1;

    for (int i = 1; i < argc; ++i) {
        size_t len = strlen(argv[i]);
        if (s + len >= end) {
            fprintf(stderr, "Buffer overrun!\n");
            exit(1);
        }
        *s++ = ' ';
        memcpy(s, argv[i], len);
        s += len;
    }
    *s = '\0';
    printf("%s\n", cmd);
    return 0;
} 
```**

# json - 如何让 CakePHP 不返回视图？

> ID：15176803
> 
> 赞同：1
> 
> 时间：2013-03-02T16:37:00.320
> 
> 标签：json, cakephp, view, controller

我正在构建一个 Android 移动应用程序，对于我的服务器端，我使用 CakePHP 来响应 JSON 对象。我注意到默认情况下，CakePHP 控制器必须有与之关联的视图。我怎样才能关闭它，而只是简单地返回 JSON 对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T16:45:53.270

你试过了吗

```
$this->autoRender = false; 
```

在控制器中？顺便说一句，它的记录。

此外，对于这个确切的用例，还有特殊的 JsonViews。此视图甚至不会尝试查找视图文件。

[http://book.cakephp.org/2.0/en/views/json-and-xml-views.html#json-and-xml-views](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html#json-and-xml-views)

# javascript - 从 javascript VS GSP 调用 grails 操作

> ID：15176809
> 
> 赞同：0
> 
> 时间：2013-03-02T16:37:51.680
> 
> 标签：javascript, grails, extjs, gsp

我在控制器中有一个动作

```
def deleteFiling={
  obj.removeFiling()
  redirect(action:"list") 
```

}

这被称为gsp：

```
<g:link action="deleteFiling" id="${filingInstance.id}"> <img src="${resource(dir:'images',file:'trash.gif')}" title="Delete" /> 
```

它的作用是执行数据库查询，然后使用成功消息重定向到主页。

所以我需要 gsp 调用一个不同的操作，它可以像弹出确认消息一样执行一些 javascript 工作，一旦完成，它就会调用该操作 deleteFiling 并执行它。

所以我在 extjs 中做这样的事情：

```
Ext.MessageBox.show({
    title:'Commit Confirmation',
    msg: 'You are about to <strong>Delete</strong> the entire <strong>Filing</strong>. This \n action cannot be reversed within the form PF application. \n\nAre you sure you want to Proceed',
    buttons: Ext.MessageBox.YESNO,
    fn: processDelete,
    icon: Ext.MessageBox.QUESTION
});
function processDelete(btn, text){
    $.ajax({
           url : appContextRoot + '/filing/deleteFiling'
           //success:mySuccessFunction 
    });
} 
```

我遇到的问题是当我通过 ajax 调用调用操作时，查询被执行但重定向不

但是当我直接从 gsp 调用操作时，重定向有效。我的问题是使用 java 脚本中的 ajax 调用调用操作和直接从 gsp 调用它有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T18:44:40.873

在您的 GSP 标记中，您不使用 ajax 调用它。这是对您的操作的直接 GET 请求。这意味着整个页面被刷新。当您使用 ajax 调用您的操作时，该操作的响应将呈现到一个对象中。然后，您可以通过使用 Javascript 操作 DOM 来显示操作的结果（在您的情况下是不同的操作 - 列表操作）。

当然，您可以在没有 ajax 的情况下使用 javascript 调用该操作：

```
function processDelete(btn, text){
    loacation.href="${createLink(action: 'deleteFiling')}";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T11:39:46.220

我在我的一个插件中使用了 java 脚本。看看这个例子：

[https://github.com/vahidhedayati/ajaxdependancyselection/blob/master/grails-app/views/autoComplete/_filterField.gsp](https://github.com/vahidhedayati/ajaxdependancyselection/blob/master/grails-app/views/autoComplete/_filterField.gsp)

此文件夹中有更多示例，您可以根据自己的情况进行调整。其中大多数执行并返回远程结果-然后您可以根据输出进行更改...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-30T09:57:16.913

在 Grails 中，您可以从**JavaScript调用****action** ，如下所示： **userId**和**viewId**是 action 的参数。

 ******函数**closeAgentPopup** (userId){

window.location.href= **"${createLink(action:'profile', controller:'agent')}"+'/'+userId+'?viewId=0';**

}******

# sql-server-2008 - SQL Server 事务复制 - 执行前和后脚本

> ID：15176810
> 
> 赞同：0
> 
> 时间：2013-03-02T16:37:53.693
> 
> 标签：sql-server-2008, replication, transactional-replication

我正在使用 SQL Server 2008 并进行了事务复制设置。我需要能够在发布者上执行复制前脚本，然后在订阅者上执行复制后脚本。事务复制可以做到这一点吗？

我在这里找到[了另一篇文章](https://stackoverflow.com/questions/7724272/post-replication-script-in-sql-server-2008)，但是这里的 post 脚本只有在 snapsnot 交付给订阅者时才会执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T18:27:51.850

如果您按计划运行分发代理，这将起作用。编辑分发代理 SQL 代理作业。在运行代理作业步骤之前添加一个步骤，以在发布服务器上执行 SQL 脚本。然后在运行代理作业步骤之后添加一个步骤，该步骤执行[sp_addscriptexec](http://msdn.microsoft.com/en-us/library/ms174360.aspx)以将 SQL 脚本发布到订阅服务器。

我在[用 sp_addscriptexec 执行脚本](http://www.sqlrepl.com/sql-server/executing-scripts-with-sp_addscriptexec/)中有一篇描述 sp_addscriptexec 的帖子。我建议在部署到生产之前在您的测试环境中尝试此操作。

# php - PDO INSERT 不适用于 $_POST 变量

> ID：15176811
> 
> 赞同：2
> 
> 时间：2013-03-02T16:37:55.893
> 
> 标签：php, sql, pdo

我正在为此烦恼-希望这是一个容易的疏忽。

我计划使用 jQuery AJAX 函数向这个 PHP 文件发送一堆变量。我写了这个部分来将所有 $_POST 变量分配给 php 变量：

```
foreach($_POST as $key => $value){
    $$key = $value;
} 
```

它似乎正在工作，因为我可以像这样操纵变量：

```
echo 'name: ' . $name . '<br>';
echo 'main_pic: ' . $main_pic . '<br>';
echo 'product_pic: ' . $product_pic . '<br>';
echo 'more_pic: ' . $more_pic . '<br>';
echo 'paypal_code: ' . $paypal_code . '<br>';
echo 'category_id: ' . $category_id . '<br>';
echo 'price: ' . $price . '<br>';
echo 'description: ' . $description . '<br>';
echo 'product_color: ' . $product_color . '<br>';
echo 'design_color: ' . $design_color; 
```

所以现在我有了这些，我想将它们插入到我的表中-

```
$qry = $pdo->prepare("INSERT INTO inventory (name, main_pic, product_pic, more_pic, paypal_code, category_id, price, description, product_color, design_color) 
                                            VALUES (:name, :main_pic, :product_pic, :more_pic, :paypal_code, :category_id, :price, :description, :product_color, :design_color)");

    $qry-> bindParam(':name', $name);
    $qry-> bindParam(':main_pic', $main_pic);
    $qry-> bindParam(':product_pic', $product_pic);
    $qry-> bindParam(':more_pic', $more_pic);
    $qry-> bindParam(':paypal_code', $paypal_code);
    $qry-> bindParam(':category_id', $category_id);
    $qry-> bindParam(':price', $price);
    $qry-> bindParam(':description', $description);
    $qry-> bindParam(':product_color', $product_color);
    $qry-> bindParam(':design_color', $design_color);
    $qry-> execute(); 
```

这不会运行 - 我不确定记录错误以查看原因的最佳方法。如果我手动分配变量并注释掉我之前的 $_POST 恶作剧，一切似乎都正常，并且 INSERT 运行良好。

有什么线索吗？我认为这可能是因为数据库需要某种变量类型，但我认为我已经充分探索了这一点。

任何人都知道手动分配变量会起作用但从 $_POST 获取它们不会起作用的任何原因吗？

编辑：按照这些建议，我收到一条错误消息 SQLSTATE[23000]：完整性约束违规：1062 Duplicate entry '0' for key 1

好吧，所以当我尝试这个插入时，我没有分配唯一的主键——我假设 PDO 会处理这个问题。处理分配唯一主键的最佳方法是什么？我想避免让用户手动分配它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T17:06:39.990

这不是一个答案，但它看起来比评论更好。您为什么要执行以下操作：

```
foreach($_POST as $key => $value){
    $$key = $value;
} 
```

这是重新注册全局变量（有点）。使用上面的代码，您可以轻松地覆盖具有意外结果的局部变量，甚至引入安全漏洞。

如果我发布`$_POST['is_admin'] = 1`或类似的东西怎么办？不管怎样，我认为你明白了。你刚才所做的很糟糕，而且可能很危险。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T17:21:48.603

像@PeeHaa 一样，这不是答案，而是扩展我对他的评论；删除伪寄存器全局功能：选择字段白名单，并将名称与发布的名称协调。

```
$fields = ['name', 'age', 'sex'];

$query = $pdo->prepare(sprintf('INSERT INTO `table` (%s) VALUES (%s)', 
    implode(',', $fields), 
    implode(',', array_map(function($field) {
        return ":{$field}";
    }, $fields))));

foreach($fields as $field) {
    $query->bind(":{$field}", $_POST[$field]);
}

$query->execute(); 
```

显然，这需要更多的验证、empty() 检查等，但你明白了。此外，您可以使用回调查找添加更多验证/清理：

```
$sanitizers = [
    'sex' => function($value) {
        $value = strtolower($value);
        return in_array($value, ['male', 'female', 'unknown']) 
            ? $value : 'unknown';
    },
];

foreach($sanitizers as $field => $sanitizer) {
    if (isset($_POST[$field])) {
        $_POST[$field] = $sanitizer($_POST[$field]);
    }
} 
```

如果帖子包含“性别”的“无性别”，您将得到“未知”。

* * *

更完整的例子：

```
// whitelist keys and sanitizer values
$fields = [
    // limit to 255 
    'name' => function($value) {
        return substr($value, 0, 255);
    }, 
    // you can't be that old
    'age' => function($value) {
        return min(max((int) $value, 0), 100);
    },
    // starfish need not apply
    'sex' => function($value) {
        $value = strtolower($value);
        return in_array($value, ['male', 'female', 'unknown']) 
            ? $value : 'unknown';
    },
];

// build ye' old query
$query = $pdo->prepare(sprintf('INSERT INTO `table` (%s) VALUES (%s)', 
    implode(',', array_keys($fields)), 
    implode(',', array_map(function($fields){
        return ":${$field}";
    }, array_keys($fields)))));

// loop dee doop to sanitize and bind
foreach ($fields as $key => $sanitizer) {
    if (is_callable($sanitizer)) {
        $query->bind(":{$field}", $sanitizer($_POST[$field]));
        continue;
    }
    $query->bind(":{$field}", $_POST[$field]);
}

// fire the cannons!
$query->execute(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T17:19:51.470

> **OP 说：** 好的，所以当我尝试这个插入时，我没有分配唯一的主键——我假设 PDO 会处理这个问题。处理分配唯一主键的最佳方法是什么？我想避免让用户手动分配它。

只是解决这部分或您的问题-您只需使用未引用的 0

```
insert into table (id, name) values (0, 'Bob'); 
```

但正如你所说，如果它是一个正确自动递增的 id，你不应该这样做。

在旧版本的 Mysql (< 5) 中，您可以使用一个空字符串，当 5.0 发布时它会爆炸，以防万一读到这篇文章的人违反了以前未记录的功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T16:58:49.107

清空您的数据库表，看看它是否有效......您的数据库表中可能有一个您试图覆盖的主键。

检查您的数据库表，使用`EXPLAIN inventory`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-02T17:01:12.267

如果需要，您可以拥有一个自动递增的主键。假设您使用 mysql： [http ://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

# math - 使用 Arduino 驱动双 7 段显示器

> ID：15176816
> 
> 赞同：1
> 
> 时间：2013-03-02T16:38:15.423
> 
> 标签：math, arduino

好的，所以我正在尝试驱动基于 7 段的显示器，以便以摄氏度显示温度。所以，我有两个显示器，加上一个额外的 LED 来指示正数和负数。

我的问题在于软件。我必须找到一些驱动这些显示器的方法，这意味着将给定的整数转换为引脚上的相关电压，这意味着对于两个显示器中的每一个，我都需要知道整数中的十位数和 1 的数量。

到目前为止，我想出的东西对于 arduino 来说并不是很好，因为它依赖于除法。

```
tens = numberToDisplay / 10;
ones = numberToDisplay % 10; 
```

诚然，我还没有对此进行测试，但我认为我可以假设对于具有有限除法能力的微控制器，这不是最佳解决方案。

我已经绞尽脑汁，四处寻找使用加法/减法/按位的解决方案，但我根本想不出一个。这个部门是我唯一能看到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:57:06.100

对于这个应用程序来说很好。您无需为简单的温度计的性能而烦恼。

但是，如果您确实需要比除法和模数更快的东西，那么按位运算会有所帮助。基本上，您将使用按位运算`&`符将要显示的值与描述要在显示器上显示的数字的模式进行比较。

请参阅此处的项目，例如： http: [//fritzing.org/projects/2-digit-7-segment-0-99-counting-with-arduino/](http://fritzing.org/projects/2-digit-7-segment-0-99-counting-with-arduino/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T02:21:27.983

您也可以尝试使用 7 段显示驱动芯片来简化输出并节省引脚。MC14511BCP（“4511”）是一个不错的选择。它将二进制编码的十进制 (BCD) 转换为适当的 7 段配置。规格表可[在此处](http://www.alldatasheet.com/view.jsp?Searchword=MC14511BCP)获得，并且通常可以在网上电子零件商店找到。

# java - 如何处理特定类型的期望

> ID：15176818
> 
> 赞同：-1
> 
> 时间：2013-03-02T16:38:20.337
> 
> 标签：java

```
class A{
    public static void main(String[]args){
         int = 0;
         try{
         i = Integer.parseInt(args[0]);
         }
        catch()
        System.out.println("this value of i is" + i);
} 
```

如果发生异常，如何使用 toString 打印异常。我在这里假设只有一个命令行参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:44:48.937

如果您查看文档[`Integer.parseInt`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)，您会发现它会抛出`NumberFormatException`：

> **抛出：**
> [`NumberFormatException`](http://docs.oracle.com/javase/7/docs/api/java/lang/NumberFormatException.html) - 如果字符串不包含可解析的整数。

因此，这是您要捕获的异常：

```
try{
    i = Integer.parseInt(args[0]);
} catch (NumberFormatException nfe) {
    // handle exception
} 
```

如果您想在遇到此异常时打印出来，您可以使用`nfe.printStackTrace()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:43:28.133

通常，catch 部分将异常作为参数。它在此页面顶部进行了说明：http: [//docs.oracle.com/javase/tutorial/essential/exceptions/catch.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/catch.html)

# pagination - ember.js 带分页的休息 api

> ID：15176820
> 
> 赞同：6
> 
> 时间：2013-03-02T16:38:28.400
> 
> 标签：pagination, ember.js, ember-data

目前我没有意义如何使用 ember-data 实现分页。我发现，我可以返回“元”属性作为响应，并且 ember-data 不会引发错误。但我只是不知道如何访问它，也不知道该属性的预期用途。

互联网上的几个例子假设我已经将整个集合加载到 ember，或者他们做了一些小技巧并进行无限滚动，这不需要有关页数的信息。

我认为加载所有记录如果我有 < 1k 个记录就可以了，但有时我会处理大量数据（比如说 apache 日志）。然后怎样呢？

所以基本上我想使用 ember 和 ember-data 来构建我的第一个现实应用程序，但我只是认为这不是一个好主意。

好的，所以有人知道如何解决这个基本但复杂的问题吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:09:51.573

好的，这里有一些想法可以帮助您入门。

首先，您必须从路由开始，并将页码作为动态参数。

```
this.resource('posts', { path: '/posts/:page' }; 
```

然后由于我没有使用 Silex 的经验，您需要支持某种可用于分页的服务器端参数。例如`offset`，`limit`其中第一个表示您要跳过多少条记录，第二个表示您希望从那里选择多少条记录。理想情况下，您应该将它们实现为查询参数，例如`?offset=0&limit=10`.

然后，您只需按如下方式实现您的表路由：

```
App.TableRoute = Ember.Route.extend({
    model: function (params) {
        return App.Post.find({ offset: (params.page - 1) * 10, limit: 10  });
    }
}); 
```

然后，您可以开始做一些更神奇的事情并创建每页参数的项目或通过提前获取所有记录的数量来验证页码。

# joomla2.5 - 在 Jooma 2.5 中安装 Jomsocial Ajax 系统时出错

> ID：15176825
> 
> 赞同：0
> 
> 时间：2013-03-02T16:38:50.120
> 
> 标签：joomla2.5, jomsocial

我尝试为我的 Joomla 站点（2.5.6）安装 Jomsocial 2.6.0，但在安装 Ajax 系统时出现错误，它无法复制特定文件，我将安装所需的所有文件设置为可写但它没有上班族：

复制失败的 JInstaller：：安装：无法将文件 ...../home/components/com_community/install_5132235717102/azrul.system.php 复制到 ...../home/plugins/system/azrul.system/azrul.system .php

安装 Jomsocial Ajax 系统提取.....失败 3-3c COM_INSTALLER_INSTALL_ERROR : Ajax 系统安装失败。

在此先感谢 Mouad

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:44:30.313

我明白了，我必须将文件权限更改为 755

# c++ - 在 C++ 中存储当前对象

> ID：15176829
> 
> 赞同：0
> 
> 时间：2013-03-02T16:39:10.187
> 
> 标签：c++

我想存储当前选择的对象（通过鼠标点击选择），然后在这个对象上实现方法。当前选择的对象是从一个数组中选择的：

```
for(int i=0; i<trackList.size(); i++)
{
    trackList[i].setSelected(false);
    if((trackList[i].isClicked(x,y)) && (!trackList[i].isSelected()))
    {
        trackList[i].setSelected(true);
        currentSelected = trackList[i];
    }
} 
```

我是 C++ 新手，并且已经阅读过指针等内容，但我很难理解应该在哪里以及如何使用它们。我是否需要将 currentSelected 对象作为指向 trackList[i] 的指针？

然后我可以使用指针引用在这个对象上实现方法吗？

非常感谢

编辑： trackList 正在存储 Track 对象的向量：

```
std::vector<interface1::Track> trackList; 
```

currentSelected 正在存储一个 Track 对象，我想将方法​​应用于：

```
interface1::Track* currentSelected; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:47:12.210

你需要做：

```
 currentSelected = &(trackList[i]); 
```

为了给指针分配地址的值`trackList[i]`。

另一种方法是使用迭代器，如下所示：

```
std::vector<interface1::Track> trackList;
std::vector<interface1::Track>::iterator it, currentSelected;
for (it = trackList.begin(); it != trackList.end(); it++)
{
    it->setSelected(false);
    if((it->isClicked(x,y)) && (!it->isSelected()))
    {
        it->setSelected(true);
        currentSelected = it;
    }
} 
```

稍后您可以`currentSelected->setSelected(false);`同时使用指针和迭代器。

# html - 修复了页眉和页脚问题

> ID：15176831
> 
> 赞同：0
> 
> 时间：2013-03-02T16:39:15.607
> 
> 标签：html, css, 960.gs

我目前正在**使用 960 网格系统**进行网站设计，并在设计的最后时刻遇到了一个小障碍。最终，我只想将页眉和页脚栏设置为“固定”在页面上，这样即使页面的其余部分正在滚动，它们也将保持静止。这是固定导航栏的一个很好的例子。 [http://ryanscherf.net/](http://ryanscherf.net/) 我的不会是垂直的，但你明白了。

我遇到的问题是标题完美地工作，并且正是我怀疑的方式。这是我的标题的 HTML

```
<div id="header">
    <p>
        ATS Logo
    </p>
</div><!--end header--> 
```

和 css 使它伸展并固定位置

```
 #header
{
background:grey;
width:100%;
height:65px;
position:fixed
/*padding:15px;*/
} 
```

这个解决方案也完全按照我想要的方式工作。但是，当我将相同的确切设置应用于页脚时，会导致不希望的结果。这是一个小提琴来说明我的意思。您必须取消注释页脚的“位置：固定”行才能看到我的意思。 [http://jsfiddle.net/s4cWP/](http://jsfiddle.net/s4cWP/) 和全屏 [http://jsfiddle.net/s4cWP/embedded/result/](http://jsfiddle.net/s4cWP/embedded/result/)

值得注意的是，除了使用我自己的 css（位于 jsFiddle 的顶部！）之外，我还使用了 960 重置网格和 960 12 列样式表。

我真的很感激朝着正确的方向前进。这里有什么我没有考虑的吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T17:17:18.297

我假设您希望页脚始终显示为页眉：[JSFiddle](http://jsfiddle.net/s4cWP/2/)。

新#页脚：

```
#footer
{
    background:grey;
    width:100%;
    position:fixed;
    bottom:0;
    left:0;
} 
```

另外，由于重叠，我在#container 的底部添加了填充：

```
#container
{
    padding-top:75px;
    padding-bottom:30px;
} 
```

# sql-server-2008-r2 - MDX 查询不接受日期值

> ID：15176833
> 
> 赞同：3
> 
> 时间：2013-03-02T16:39:24.503
> 
> 标签：sql-server-2008-r2, ssas, mdx

我是 SSAS 新手，我正在尝试查询一个多维数据集，以根据 aome 度量组按日期顺序检索数据。我希望在查询中指定的日期范围。我正在使用的查询是这样的：-

 `````
SELECT
{
    [Measures].[Measure1],
    [Measures].[Measure2],
    [Measures].[Measure3]
} 
ON COLUMNS,
NON EMPTY{
   [Date].[AllMembers]
         } 
ON ROWS
FROM (SELECT ( STRTOMEMBER('2/23/2013', CONSTRAINED) : 
STRTOMEMBER('3/1/2013', CONSTRAINED) ) ON COLUMNS 
FROM   [MyCube]) 
````  `但是它给了我以下错误
**查询 (10, 16) 违反了 STRTOMEMBER 函数中 CONSTRAINED 标志施加的限制。**

我尝试删除 constrained 关键字，然后甚至删除 strtomember 函数。但在每种情况下，我分别得到以下错误
**Query (10, 16) STRTOMEMBER 函数需要 1 参数的成员表达式。使用了字符串或数字表达式。**
和
* *Query (10, 14) : 函数需要一个用于 1 参数的成员表达式。使用了字符串或数字表达式。**

我可以从最后两个错误中理解我需要包含约束关键字。但是谁能告诉我为什么这个查询不会执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T17:59:04.790

作为成员表达式传递的字符串必须是完全限定的成员名称，或者解析为一个。使用与 SELECT 中相同的格式。

例如：

```
STRTOMEMBER('[Date].[2/23/2013]', CONSTRAINED) 
```

编辑：我刚刚注意到你的范围选择的语法看起来不对——你需要使用`{...}`，而不是`(...)`.

```
SELECT { 
    STRTOMEMBER('2/23/2013', CONSTRAINED) : 
    STRTOMEMBER('3/1/2013', CONSTRAINED) } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:37:20.857

请执行以下脚本。提取您的日期维度属性，通过右键单击复制它并​​将其粘贴到 STRTOMEMBER 值中。

它会正常工作。

```
 SELECT NON EMPTY { [Measures].[Internet Sales Amount] } ON COLUMNS 
 FROM ( SELECT ( STRTOMEMBER('[Date].[Date].&[20050701]')  : 
 STRTOMEMBER('[Date].[Date].&[20061007]') )  ON COLUMNS 
 FROM [Adventure Works]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-10T14:34:11.757

```
FROM ( SELECT (
   STRTOMEMBER(@FromDateCalendarDate, CONSTRAINED) :
   STRTOMEMBER(@ToDateCalendarDate, CONSTRAINED) ) ON COLUMNS 
`````

# ios - 为方便起见，不能使用#define

> ID：15176840
> 
> 赞同：1
> 
> 时间：2013-03-02T16:39:47.347
> 
> 标签：ios, objective-c, xcode, cocoa-touch, c-preprocessor

我可能犯了一些语法错误，但我不明白为什么我的代码不起作用：

在 .m 文件的顶部，我写道：

```
#define kCountry "Country"; 
```

在这种情况下，我收到了来自 xCode 的红色警告 - 预期]

然后在函数体中：

```
 floatCountries = 74,2;
 [[NSUserDefaults standardUserDefaults]setFloat:floatCountries forKey:kCountry];

  float test= [[NSUserDefaults standardUserDefaults]floatForKey:kCountry];
  NSLog(@"%f", test); 
```

在那个 - 预期的表达。

这可能听起来有点愚蠢，但我想简化我的代码并使用它，请帮助我！:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T16:40:43.643

从定义末尾删除分号并添加“@”：

```
#define kCountry @"Country" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-02T16:41:22.507

利用：

```
#define kCountry @"Country" 
```

您在末尾添加了一个分号。

由于这将被替换为字符串值，因此您需要输入`@`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-03T07:34:33.870

解释*为什么*这不起作用：

### 分号

> ```
> #define kCountry "Country"; 
> ```
> 
> 在这种情况下，我收到了来自 xCode 的红色警告 - 预期]

没有所谓的“红色警告”。警告为黄色；错误为红色。

（除非您打开“将警告视为错误”；然后，从某种意义上说，所有警告都是红色的——因为它们是错误。）

反正。

诸如`#define`不需要分号的预处理器指令。如果您包含一个，它将成为指令的一部分。

预处理器将任何宏替换为您定义的任何宏。在这种情况下，您定义了一个名为“<code>kCountry”的宏，其值为“<code>"Country;”。请注意，*分号是值的一部分*——指令在行尾结束，而不是在分号。

因此，当您使用宏时：

> ```
> [[NSUserDefaults standardUserDefaults]setFloat:floatCountries forKey:kCountry];
> 
> float test= [[NSUserDefaults standardUserDefaults]floatForKey:kCountry]; 
> ```

预处理器替换宏如下：

> ```
> [[NSUserDefaults standardUserDefaults]setFloat:floatCountries forKey:"Country";];
> 
> float test= [[NSUserDefaults standardUserDefaults]floatForKey:"Country";]; 
> ```

分号不能放在语句中；它必须紧随其后。因此，上述陈述无效。

解决方法是从 d 宏的行中删除分号`#define`，以便分号不会出现在输出中：

> ```
> [[NSUserDefaults standardUserDefaults]setFloat:floatCountries forKey:"Country"];
> 
> float test= [[NSUserDefaults standardUserDefaults]floatForKey:"Country"]; 
> ```

顺便说一句，Xcode 在它的 Jump Bar 中有一个选项可以向您显示代码的完整预处理版本，因为编译器会看到它。这在调查宏观问题时会很方便。

所以，这是问题之一。另一个是……</p>

### 您使用的字符串类型

`"Country"`是一个 C 字符串。它仅适用于 C 字符串和 stdio 库（包括函数`printf`、`strcat`等）以及需要 C 字符串的各种其他 API（例如`+[NSString stringWithUTF8String:]`和`+[NSString stringWithCString:encoding:]`）。

NSUserDefaults，就像 Cocoa 中需要字符串的所有其他东西一样，需要一个 Cocoa 字符串对象——一个 NSString。NSString 字面量的语法是相同的，但`@`前面有一个：`@"Country"`。

因此有效的版本：

```
#define kCountry @"Country" 
```

产生预处理的输出：

```
[[NSUserDefaults standardUserDefaults]setFloat:floatCountries forKey:@"Country"];

float test= [[NSUserDefaults standardUserDefaults]floatForKey:@"Country"]; 
```

在这两个地方都没有语法错误和正确类型的字符串，这是可以工作的版本。

哦，而且，正如 Anoop Vaidya 已经指出的那样：

### 数字语法

您尝试为变量分配一个数字，但我认为您会在那里找到一个与您预期不同的数字。

> ```
> floatCountries = 74,2; 
> ```

如果您使用以下语句打印此变量的值：

```
NSLog(@"%f", floatCountries); 
```

你会发现输出是`2.0`.

C 有一个称为逗号运算符的运算符，它很简单`x, y`，其中 x 和 y 可以是任何表达式（理想情况下是相互兼容的类型——例如，两个数字）。

逗号运算符首先计算左边的表达式，然后计算右边的表达式，然后它自己计算右边的表达式。

`74,2`首先计算表达式`74`，然后计算表达式`2`，然后计算为`2`。因此，您将`2`(an `int`，根据需要自动转换) 分配给变量。

将其与文字数字一起使用似乎有点愚蠢，但确实如此。逗号运算符的存在是为了与具有副作用的表达式一起使用，例如涉及`++`and`--`运算符的表达式。

通常不鼓励使用逗号运算符，因为生成的代码不清楚：通常，每一行应该做一件事，但一行如`x = ++y, --z;`做*三*件事。

尽管如此，正如您发现的那样，它是有效的。但是，如果您打开了“未使用值”警告（您应该这样做），您应该会收到一个警告，因为实际上一半的表达式是未使用的——您将其丢`74`在地板上。无害，但表明这不是您的本意。

你想要的是：

```
floatCountries = 74.2; 
```

# perl - 从文本文件创建多维向量

> ID：15176845
> 
> 赞同：1
> 
> 时间：2013-03-02T16:40:18.180
> 
> 标签：perl, multidimensional-array

我有以下问题：

我有一个看起来像的文件：

```
1 2 4 5 7 8
3 1 3 7 8 9 10 11
2 4 1 3 5
4 5 6 7 
```

我想创建不同的向量，其中：

```
vector[0][0]=1 , vector[0][1]=2, ... , vector[1][0]=3, vector[1][1]=1 etc etc 
```

我还处于起步阶段，我尝试过：

```
my $file = 'file.dat';
open (INFO, $file);
my @vector = <INFO>;
close (INFO); 
```

但它只创建一个数组来读取文件中包含的内容，而不是赋予文件元素的确切位置（正如我所期望的结果）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T16:43:54.220

遍历文件，拆分行并将它们放入您推送到主数组的匿名数组中：

```
use strict;
use warnings;
use Data::Dumper;

# Use the lines below for your real data
#my $file = 'file.dat';
#open my $fh, "<", $file or die "Cannot open $file: $!";
my @vector;
while (<DATA>) {   # replace <DATA> with <$fh>
    push @vector, [ split ];
}
print Dumper \@vector;

__DATA__
1 2 4 5 7 8
3 1 3 7 8 9 10 11
2 4 1 3 5
4 5 6 7 
```

**输出：**

```
$VAR1 = [
          [
            '1',
            '2',
            '4',
            '5',
            '7',
            '8'
          ],
          [
            '3',
            '1',
            '3',
            '7',
            '8',
            '9',
            '10',
            '11'
          ],
          [
            '2',
            '4',
            '1',
            '3',
            '5'
          ],
          [
            '4',
            '5',
            '6',
            '7'
          ]
        ]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T19:54:10.237

您可以非常简单地使用`map`正则表达式来挑选数字子字符串`my @vector = map [ /\d+/g ], <FILEHANDLE>`

本程序从`DATA`文件句柄中读取，方便演示。您通常会使用自己打开一个文件`open my $fh, '<', 'myfile' or die $!`并从该文件句柄中读取。

`Data::Dump`是否仅用于显示数据结构，否则是不必要的。

```
use strict;
use warnings;
use 5.010;

my @vector = map [ /\d+/g ], <DATA>;

use Data::Dump;
dd \@vector;

say "\$vector[0][0] = $vector[0][0]";
say "\$vector[0][1] = $vector[0][1]";
say "\$vector[1][0] = $vector[1][0]";
say "\$vector[1][1] = $vector[1][1]";

__DATA__
1 2 4 5 7 8
3 1 3 7 8 9 10 11
2 4 1 3 5
4 5 6 7 
```

**输出**

```
[
  [1, 2, 4, 5, 7, 8],
  [3, 1, 3, 7 .. 11],
  [2, 4, 1, 3, 5],
  [4 .. 7],
]
$vector[0][0] = 1
$vector[0][1] = 2
$vector[1][0] = 3
$vector[1][1] = 1 
```

# java - jstl-api 和 jstl-impl 的区别

> ID：15176846
> 
> 赞同：5
> 
> 时间：2013-03-02T16:40:20.990
> 
> 标签：java, jar, jstl

我是 Java EE 技术的初学者。`jstl-api`我想知道罐子和罐子有什么区别`jstl-impl`。

为什么 API 和实现是分开的？这是否意味着还有其他可用的实现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T23:01:02.720

API 和实现是分开的，因为 Java EE 使用标准化规范。

API 是该规范的一部分，并包含一组大部分接口，参与创建该规范的每个人都同意这些接口。从理论上讲，每个人都可以实现已发布的标准化 API 并按照相关规范文档中的描述进行操作。当您的实现通过所谓的 TCK（技术合规工具包）时，您可以将其称为“已认证”。

该规范系统的一个既定目标是鼓励竞争，同时受保护的用户会被锁定在任何特定的实现中。

JSTL 尤其是 JSP 规范的一部分，该规范是在[JSR 245](http://jcp.org/en/jsr/detail?id=245)下开发的。如果您想自己实现，请从阅读[规范文档](http://jcp.org/aboutJava/communityprocess/mrel/jsr245/index.html)开始。

> 您能否指出任何解释如何为 jstl 编写我们自己的 impl 的教程？

据我所知，没有具体的教程可以创建您自己的 Java EE 规范实现。在几乎所有情况下，这几乎都是一项专家工作，而且通常只由少数几个组织或个人执行。这种材料并不真正适合像教程一样的写作，尽管 David Blevins（TomEE 的名气）偶尔让我们瞥见了与此相关的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T16:50:39.080

jstl-api 包含需要实现的接口。jstl-impl 包含这些实现的标准或默认实现。为什么两者都需要？因为如果您想要标准或默认功能，则使用 jstl-impl，但如果您想实现自己的行为，则可以覆盖 jstl-api 中接口的方法。这就是 API 的含义：应用程序编程接口。最好的祝福。

# ios - iOS Core Data 与其他用户交换对象

> ID：15176849
> 
> 赞同：1
> 
> 时间：2013-03-02T16:40:26.147
> 
> 标签：ios, networking, core-data, social

我有一个使用核心数据设置并使用 stackmob 托管的应用程序。我的用户登录和身份验证运行良好。用户可以创建新用户、登录和注销。问题：现在我希望用户能够相互交流。即，如果他们正在参加音乐会并想在我的应用程序上邀请其他用户，我将如何设置？我希望它类似于 Facebook：当有人发送邀请时，它会显示为收件人的通知。收件人可以单击通知并查看有关音乐会的详细信息。

这个过程叫什么？是否有一个很好的教程可以在 iOS 上实现这个？有什么书吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T17:27:42.890

在我看来，您将不得不使用推送通知。

您基本上必须将这些添加到您的应用程序委托类中：

```
- (BOOL)application:(UIApplication *)app didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
   // other setup tasks here....
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)];

    UILocalNotification *localNotif = [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];
    if (localNotif) {
        NSString *itemName = [localNotif.userInfo objectForKey:ToDoItemKey];
        [viewController displayItem:itemName];  // custom method
        application.applicationIconBadgeNumber = localNotif.applicationIconBadgeNumber-1;
    }
}

// Delegation methods
- (void)application:(UIApplication *)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)devToken {
    const void *devTokenBytes = [devToken bytes];
    self.registered = YES;
    [self sendProviderDeviceToken:devTokenBytes]; // custom method
}

- (void)application:(UIApplication *)app didFailToRegisterForRemoteNotificationsWithError:(NSError *)err {
    NSLog(@"Error in registration. Error: %@", err);
}

- (void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notif {
    NSString *itemName = [notif.userInfo objectForKey:ToDoItemKey]
    [viewController displayItem:itemName];  // custom method
    application.applicationIconBadgeNumber = notification.applicationIconBadgeNumber-1;
}

- (void)application:(NSApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {
    // Code to handle remote notifications 
} 
```

来自 Apple 的完整信息：http: [//developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html)

# c++ - 没有对象的模板打印成员变量

> ID：15176853
> 
> 赞同：3
> 
> 时间：2013-03-02T16:40:36.500
> 
> 标签：c++, templates

这很奇怪（MSVC2012）：

```
using namespace std;

class MyClass
{
public:

    int membervar;
};

template< int (MyClass::*var) > struct A 
{
   void print()
   {
       cout << var;
   }
};

int main(int argc, char *argv[])
{
   struct A <&MyClass::membervar> object;

   object.print();
} 
```

此代码编译并实际输出“1”。它从哪里得到它？？membervar 属于什么对象？我以为我需要一个对象来访问数据成员

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:47:36.470

> 此代码编译并实际输出“1”。它从哪里得到它？

发生的情况是：

```
int (MyClass::*var) = &MyClass::membervar;
cout << var; 
```

因为没有采用流和成员指针的移位运算符，所以选择了另一个移位运算符：

```
std::ostream::operator<<(bool); 
```

换句话说，它`var`在将其转换为`bool`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:49:46.287

> 此代码编译并实际输出“1”。它从哪里得到它？？

您要打印的是*指向成员函数*的指针。

它正在转换为`bool`. 并且该 bool 评估为`true`，这意味着它非零。

# php - 如何将 facebook 登录响应从 javascript 传递到 php 页面？

> ID：15176854
> 
> 赞同：3
> 
> 时间：2013-03-02T16:40:36.177
> 
> 标签：php, javascript, facebook, api

我正在尝试向我的网站添加带有 facebook 功能的 loing，我使用 javascript 连接到 facebook API，如您所知，facebook 发送名为“response”的对象，我想将此对象传递给我的 index.php 页面以读取其内容.

你能告诉我如何通过和阅读这个对象吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T19:39:43.033

如果你需要从你的服务器上使用 facebook，你不能只使用 js auth。

您需要实现“服务器登录”，如[登录服务器端应用程序中所述](https://developers.facebook.com/docs/howtos/login/server-side-login/)

您不需要实现所有复杂的事情，只需从互联网上找到任何库，据我所知，FB 有自己的 php 库，并使用它来进行服务器登录。你可以找到很多例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T20:07:50.333

您可以通过使用`jQuery.ajax()`或`jQuery.post()`功能来完成它。但它不安全。因为js对所有浏览器都是开放的。坏人可能会发送意外数据并借此机会损害您的应用程序/网络。无论如何，这是您的选择。

您可以在此处添加我使用`replace_login()`过的功能`FB.getLoginStatus()`，如下所示：

```
FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            // connected
    replace_login();
        } else if (response.status === 'not_authorized') {
            // not_authorized
        } else {
            // not_logged_in
        }
    }); 
```

现在写`replace_login()`在同一个文件中，`FB.getLoginStatus()`如下所示：

```
function replace_login(){
       FB.api('/me', function(response) {
          $.post("http://yourdomain.com/ajax_post_login",{ username: response.username, name: response.name, fb_res: response }, function(data) {
              alert(data);
          })
       });
  } 
```

检查[facebook server-side-login](http://developers.facebook.com/docs/howtos/login/server-side-login/)，它将为您提供更多帮助。

# javascript - Dojo 树 - 延迟到服务器返回数据

> ID：15176856
> 
> 赞同：1
> 
> 时间：2013-03-02T16:40:44.303
> 
> 标签：javascript, json, dojo

我有一个服务器函数，它生成代表文件系统一部分的 JSON。

一旦用户从下拉列表中选择了一个项目，就会调用服务器函数。

到目前为止，一切都很好。

我的问题是如何仅在从服务器返回 JSON 数据时显示树？请让您的回答尽可能详细和完整，因为无论如何我都不是 javascript 专业人士！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:34:22.017

`var serverFunctionComplete = false;
var x = serverFunction();
while(!serverFunctionComplete) {
//just waiting
}
setTimeout(function() {
serverFunctionComplete = true;//if the server doesn't respond
}, 5000);`

这应该让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T19:25:03.223

`sync : true`您可以使用xhr 对象中的属性使 ajax 请求同步。这会阻止其他代码执行，直到从服务器收到响应并且回调完成执行。

```
require(["dojo/request/xhr"], function(xhr){
  xhr("example.json", {
    handleAs: "json",
    sync: true
  }).then(function(data){
    // Do something with the handled data
  }, function(err){
    // Handle the error condition
  }, function(evt){
    // Handle a progress event from the request if the
    // browser supports XHR2
  });
}); 
```

但是，这通常不是最佳实践，因为异步加载是 javascript 和 ajax 的一大优点。建议在 xhr 的回调函数中显示您的树，这样您的脚本就不会因轮询响应而挂起。

```
require(["dojo/request/xhr"], function(xhr){
  xhr("example.json", {
    handleAs: "json"
  }).then(function(data){
    // Display your Tree!
  }, function(err){
    // Handle the error condition
  });
}); 
```

对于一般的异步线程管理，请参阅[Dojo 的 Defered 类。](https://dojotoolkit.org/reference-guide/1.9/dojo/Deferred.html#dojo-deferred)

# javascript - JavaScript比较不同的日期格式？

> ID：15176857
> 
> 赞同：0
> 
> 时间：2013-03-02T16:40:50.230
> 
> 标签：javascript, date, datejs

我正在尝试从文本中提取不同的日期格式，然后比较这些日期（如果它们属于某个时间跨度）。假设时间跨度是从 1.1.2013 到 1.3.2013 。这是 DD/MM/YYYY 时间格式。

现在如何从文本中提取不同的时间格式。我在这里有时间格式的例子。

*   2012 年 10 月 23 日星期二上午 7:59
*   2013 年 2 月 19 日晚上 7:32
*   今天，晚上 9 点 22 分
*   昨天，上午 09:03
*   2013 年 2 月 28 日 09:38
*   昨天 16:48
*   2012 年 10 月 8 日上午 5:41:00
*   2013 年 2 月 18 日下午 03:17
*   2013 年 2 月 1 日下午 12:31
*   12.2.2013 20:43

我知道这不是一项简单的任务，但任何类型的建议都可以帮助我。

我也知道这个问题和答案。这对我以后有好处

[用 JavaScript 比较两个日期](https://stackoverflow.com/questions/492994/compare-dates-with-javascript/497790#497790)

聊天的人也有这样的说法。

```
Uwe Günther
@IceD looks like you need some lib who implements that all :-) 
But ih ave noe clue which one does. Better ask the Stack 
```

**重要的**

**我不想要 jQuery，因为我无法在我现在使用的东西中实现它。所以只有 JS 解决方案。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T17:05:10.780

您需要将它们规范化为一种通用的、可比较的格式，最合适的是[`Date`objects](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)。

对于您的某些格式，（某些浏览器）将能够处理[`Date.parse`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)它们，但对于其他格式（例如`"yesterday"`），您需要进行更复杂的解析（直到 NLP？）。最好知道每个片段的格式，这样您就可以将它们传递给正确的解析算法，否则您需要应用一些启发式方法。

# sql - 任何方式自动添加 no is table

> ID：15176858
> 
> 赞同：-1
> 
> 时间：2013-03-02T16:40:55.160
> 
> 标签：sql, sql-server

这些是表格和编码。

```
create table student
(
s_id varchar(10) unique,
s_name varchar(50),
s_report varchar(50),
)

create table student_contact
(
stid int identity primary key,
stcellphone varchar(50) unique,
s_id varchar(10),
foreign key(s_id) references student(s_id)
)

create table test
(
t_id int identity primary key,
t_marks int,
)

create table st_test
(
stt_id int identity primary key,
s_id varchar(10),
t_id int,
foreign key(s_id) references student(s_id),
foreign key(t_id) references test(t_id)
)

alter view [join]
as
select s1.s_name,s2.stcellphone,s4.t_marks,s1.s_report
from
student as s1
inner join
student_contact as s2
ON s1.s_id=s2.s_id
inner join
st_test s3
ON s1.s_id=s3.s_id
inner join
test as s4
ON s4.t_id=s3.t_id

alter procedure marks
@st_id varchar(10)='',
@name varchar(50)='',
@mobile varchar(50)='',
@marks int=''
as
begin
    if(@marks < 3)
    begin
    insert into student values(@st_id,@name,'You are enrolled for 6 months')
    insert into test values(@marks)
    insert into student_contact values(@mobile,@st_id)
    select * from [join] where s_name =@name
    end
end 
```

这是我创建的编码我已经创建了一个插入数据的过程现在我希望在“st_test”表中有2个列名是（s_id，t_id），它们是对学生和测试表的引用现在问题是我已经创建这些表是连接的视图，并且该视图已在过程中使用，问题在于过程中我希望当我填写所有参数时，我将根据条件看到插入的表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:55:14.167

您需要考虑使用`SCOPE_IDENTITY()`：

```
declare @id int
insert into test values(@marks)
SET @id = SCOPE_IDENTITY()
insert into st_test values(@st_id,@id)
insert into student_contact values(@mobile,@st_id)
select * from [join] where s_name =@name 
```

我还建议您在最后一个 select 语句中使用 @id 而不是 s_name ，因为您知道它应该是唯一的。

# configuration - Xtext 项目创建问题

> ID：15176859
> 
> 赞同：0
> 
> 时间：2013-03-02T16:40:58.830
> 
> 标签：configuration, xtext

在开始之前，我必须承认我是 Xtext 和 DSL 设计的新手。我在这个问题上的一些问题可能有点“不够聪明”。

我已经使用 IDE 创建了一个 Xtext 项目，同时我正在使用 Xtext 提供的示例项目之一作为我需要用我的语言执行的操作的指南。我看到很多让我紧张的警告。

显然，当开发环境创建一个新项目时，它会以某种方式将该项目配置为使用 Java 5 库。我正在使用 Java 6，结果我收到警告说我的项目是为 Java 5 配置的，并且我的系统上没有 Java 5（没有！）。

我尝试更改构建路径以使其使用 Java 6 库，但这会产生许多其他警告——包括我的 manifest.mf 文件中引用的 Java 6 无效的警告！

然后是“plugin.xml”警告。显然，build.properties 文件引用了一个名为“plugin.xml”的文件，该文件不是在 IDE 创建项目时创建的。我不知道这个文件是否足够重要以创建，我不知道应该放入什么。

坦率地说，我讨厌警告。警告往往会导致我生产的产品未来出现问题。我喜欢干净的编译和干净的部署。我想消除这些警告，以免它们开始把我搞砸（比如放入会破坏 Java5 库的 Java6 类）。

有没有人能够可靠地消除这些警告？请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-29T07:07:09.670

对于 JDK 警告，您只需将 Manifest.MF 切换到与您的首选 JDK 匹配的目标环境（在您的情况下为“JavaSE-1.6”）。

一旦您第一次运行语法生成器，关于缺少 plugin.xml 的警告就会消失，因为它会生成这样一个文件。

# android - android使用内置图库打开特定文件夹

> ID：15176863
> 
> 赞同：3
> 
> 时间：2013-03-02T16:41:24.100
> 
> 标签：android, image, android-intent, gallery, directory

我正在尝试使用 gallery 打开特定文件夹并参考了其他类似问题[open image form built_in gallery](https://stackoverflow.com/questions/7131693/open-image-form-built-in-gallery)，并实现了以下代码，但仍然失败并报告错误（如下 logcat 所示）：

**选择特定文件夹：**

```
private void selectSpecificFolder()
{
    File dir = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/MyFolder");
    Log.d("File path ", dir.getPath());
    String dirPath=dir.getAbsolutePath();
    if(dir.exists() && dir.isDirectory()) {
        Intent intent = new Intent(Intent.ACTION_VIEW, null);
        intent.setType("image/*");
        intent.setData(Uri.fromFile(dir));

        Log.d("b4performSpecificCrop_startActivityForResult::", Integer.toString(3));
        startActivityForResult(intent, 3);
        Log.d("afterperformSpecificCrop_startActivityForResult::", Integer.toString(3));
    }
    else
    {
        Toast.makeText(this, "No file exist to show", Toast.LENGTH_LONG).show();
    }  
} 
```

**活动结果：**

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    super.onActivityResult(requestCode, resultCode, data);      
    if (requestCode == 3)
    {
        Log.d("INSIDE_ONACTIVITY_REQUEST3", Integer.toString(3));
        if (data==null) 
        {
            Toast.makeText(this,"No image selected",Toast.LENGTH_LONG).show();
        }
        else
        {
            Uri selectedImageUri = data.getData();
            String selectedImagePath = selectedImageUri.getPath();

            if(selectedImagePath!=null)
            {
                Intent intent = new Intent();
                intent.setAction(Intent.ACTION_VIEW);
                intent.setData(selectedImageUri);
                startActivity(intent);
            }
        }   
    } 
```

## 日志猫：

```
03-02 23:56:09.910: D/b4performSpecificCrop_startActivityForResult::(18133): 3
03-02 23:56:09.940: D/Instrumentation(18133): checkStartActivityResult  :Intent { act=android.intent.action.VIEW dat=file:xxxxx }
03-02 23:56:09.940: D/Instrumentation(18133): checkStartActivityResult  inent is instance of inent:
03-02 23:56:09.950: D/AndroidRuntime(18133): Shutting down VM
03-02 23:56:09.950: W/dalvikvm(18133): threadid=1: thread exiting with uncaught exception (group=0x40c6e1f8)
03-02 23:56:09.965: E/AndroidRuntime(18133): FATAL EXCEPTION: main
03-02 23:56:09.965: E/AndroidRuntime(18133): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=file:xxxxx }
03-02 23:56:09.965: E/AndroidRuntime(18133):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1535)
03-02 23:56:09.965: E/AndroidRuntime(18133):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1387)
03-02 23:56:09.965: E/AndroidRuntime(18133):    at android.app.Activity.startActivityForResult(Activity.java:3195)
03-02 23:56:09.965: E/AndroidRuntime(18133):    at com.abc.drawing.Doodlz.performSpecificCrop(Doodlz.java:1712)
03-02 23:56:09.965: E/AndroidRuntime(18133):    at com.abc.drawing.Doodlz.access$20(Doodlz.java:1701)
03-02 23:56:09.965: E/AndroidRuntime(18133):    at com.abc.drawing.Doodlz$43.onClick(Doodlz.java:1184)
03-02 23:56:09.965: E/AndroidRuntime(18133):    at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:167)
03-02 23:56:09.965: E/AndroidRuntime(18133):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-02 23:56:09.965: E/AndroidRuntime(18133):    at android.os.Looper.loop(Looper.java:137)
03-02 23:56:09.965: E/AndroidRuntime(18133):    at android.app.ActivityThread.main(ActivityThread.java:4511)
03-02 23:56:09.965: E/AndroidRuntime(18133):    at java.lang.reflect.Method.invokeNative(Native Method)
03-02 23:56:09.965: E/AndroidRuntime(18133):    at java.lang.reflect.Method.invoke(Method.java:511)
03-02 23:56:09.965: E/AndroidRuntime(18133):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
03-02 23:56:09.965: E/AndroidRuntime(18133):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
03-02 23:56:09.965: E/AndroidRuntime(18133):    at dalvik.system.NativeStart.main(Native Method) 
```

## 问题：

在 Logcat 中，它报告`android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=file:xxxxx }`这意味着什么以及如何解决？谢谢！！

PS：对于应用程序，它没有单独的布局来显示该特定文件夹中的所有图像。相反，有一个“打开文件夹”按钮，当用户按下该按钮时。它只会使用内置图库直接显示特定文件夹中的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T01:47:50.690

I guess the problem is inside the AndroidManifest.xml

This is a main resource for this problem, check the Mark Murphy response: [https://groups.google.com/forum/?fromgroups#!topic/android-beginners/nYFBeAgmkMU](https://groups.google.com/forum/?fromgroups#!topic/android-beginners/nYFBeAgmkMU)

This is a secondary, but basic the same problem [Android: No Activity found to handle Intent error? How it will resolve](https://stackoverflow.com/questions/9157490/android-no-activity-found-to-handle-intent-error-how-it-will-resolve)

# javascript - 允许用户以 HTML 格式更改和保存网页上的背景图像

> ID：15176870
> 
> 赞同：1
> 
> 时间：2013-03-02T16:42:18.950
> 
> 标签：javascript, html

我希望用户可以选择更改我网站上的背景图片，所以我找到了一些允许他们这样做的代码。它允许他们将他们选择的图像的 URL 粘贴到文本框（输入）中：

```
<script type="text/javascript">
function changebackground(){
    var url = document.getElementById('bgchanger').value;
    document.getElementsByTagName('body')[0].style.backgroundImage = "url('" + url + "')";
}
</script>

<input type="text" id="bgchanger" placeholder="Change Background Add URL" />
<input type="button" onclick="changebackground();" value="Change!" /> 
```

一切正常，但是当用户离开网站或点击刷新时，背景图像会变回白色（默认）

我想知道我们是否可以在用户下次访问该站点时保存用户背景图像。

我做了一个演示：

> **演示**：http: [//goo.gl/253IN](http://goo.gl/253IN)
> 
> 用户名：**demo**
> 
> 密码：**demo1**

先感谢您！

PS我不是HTML和Javascrpit方面的专家（还：D），所以我无法理解真正复杂的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:51:05.787

要做到这一点..您必须在用户计算机上放置一个 cookie，然后检查 cookie 是否已设置并检索它的值，...

这是一个用于 cookie 的 jquery 插件 [https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

首先你创建 cookie

```
$.cookie('background_image', url , { expires: 7 });// will expire in 7 days 
```

然后您检查是否设置了该cookie

```
if(typeof($.cookie('background_image')) != 'undefined'){
    var users_old_back_ground = $.cookie('background_image');
    $('body').css ({ "background-image" : "url('" + users_old_back_ground + "')"}); //jquery : selecting the body tag ... then using css() to set the bg
}else{
    // do something else because the user doesnt have the cookie 
} 
```

并尝试增强您以前的代码并使用 jquery 而不是普通的 javascript

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:49:59.143

一个很好的方法是使用 localStorage。我写了一个 jQuery Plugin 来使它更容易处理。看看这些例子。[https://github.com/yckart/jquery.storage.js](https://github.com/yckart/jquery.storage.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T16:54:58.747

尝试使用 localStorage

```
 var defaultImage = "http://...";
    document.getElementsByTagName('body')[0].style.backgroundImage = localStorage.getItem('back') ? "url('"+localStorage.getItem('back')+"')" : "url('"+defaultImage+"')";
  function changebackground(){
      var url =  document.getElementById('bgchanger').value;
      document.getElementsByTagName('body')[0].style.backgroundImage = "url('" + url + "')";
      localStorage.setItem('back',url);
    } 
```

# java - 大输入的十进制扩展程序运行非常慢

> ID：15176872
> 
> 赞同：5
> 
> 时间：2013-03-02T16:42:36.173
> 
> 标签：java, performance, algorithm, math, bigdecimal

我正在编写一个程序来计算数字的小数扩展`103993/33102`，我想根据用户输入的数字打印出所有尾随小数。它可以快速运行所有数字，`10^5`但如果输入`10^6`到程序大约需要 5 分钟才能打印出答案。我怎样才能加快速度？我尝试了两种不同的方法，一种`BigDecimal`使用字符串，另一种使用字符串，但都没有有效地工作。

```
public static void main(String[] args) throws NumberFormatException,
        IOException {
    // BigDecimal num1 = new BigDecimal(103993);
    // BigDecimal num2 = new BigDecimal(33102);
    String repNum = "415926530119026040722614947737296840070086399613316";
    // pw.println(num.toString());
    String sNum = "3.1";
    // pw.println(repNum.length());
    int cases = Integer.parseInt(br.readLine());
    int dec;
    for (int i = 0; i < cases; i++) {
        sNum = "3.1";
        dec = Integer.parseInt(br.readLine());

        if (dec == 0)
            pw.println("3");
        else if (dec <= 52) {
            sNum += repNum.substring(0, dec - 1);
            pw.println(sNum);
        } else {
            while (dec > 52) {
                sNum += repNum;
                dec -= 51;
            }
            sNum += repNum.substring(0, dec - 1);
            pw.println(sNum);

        }

        // pw.println(num1.divide(num2, dec,
        // RoundingMode.FLOOR).toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T17:30:51.200

无需创建一长串数字，只需打印出数字即可。例如：

```
 while (dec > 52) {
            System.out.print(repNum);
            dec -= 51;
        }
        pw.println(repNum.substring(0, dec - 1)); 
```

通过连接在循环中创建长字符串对性能非常不利，因为字符串是不可变的。该程序花费所有时间创建新字符串，一个比另一个长，并将字符从旧的复制到新的，实质上是实现[Schlemiel the Painter 的算法](http://en.wikipedia.org/wiki/Schlemiel_the_Painter%27s_algorithm)。

# ios - 有时我的 UITextField 对触摸没有反应，为什么？

> ID：15176874
> 
> 赞同：2
> 
> 时间：2013-03-02T16:42:47.327
> 
> 标签：ios, uiview, uitextfield

我有一个`UITextField`（密码字段），有时需要多次触摸才能显示键盘。这似乎只在您点击占位符文本的位置时才会发生。这是视图层次结构的照片，对我来说似乎没问题。

![查看层次结构](../Images/a587ac29bef4f1003e07b40c51c64cfc.png)

![按钮位置](../Images/b38b4b63936c88fb839a02eebd1418c2.png)

任何想法还有什么要寻找的，所以我可以弄清楚为什么会这样？

* * *

**编辑**

所以我弄清楚了问题所在，它`leftView`在下一段代码中：

```
 UIView *pwPaddingView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 5, 38)];
  self.passwordField.leftView = pwPaddingView;
  self.passwordField.leftViewMode = UITextFieldViewModeAlways; 
```

这似乎可以防止触摸“密码”的前三个字符。它存在的原因是要填充字段的左侧，因此单词不会正好靠在左边距上。我必须允许检测触摸或以不同方式填充字段的替代方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T00:22:16.683

要停止左视图吞下点击事件，您可以在视图上将 userInteractionEnabled 设置为 NO，例如

```
UIView *pwPaddingView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 5, 38)];
pwPaddingView.userInteractionEnabled = NO;
self.passwordField.leftView = pwPaddingView;
self.passwordField.leftViewMode = UITextFieldViewModeAlways; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:06:14.917

在情节提要中创建一个子类`UITextField`并将密码字段设置为此类。在新类内部覆盖以下方法，如下所示

```
// placeholder position
- (CGRect)textRectForBounds:(CGRect)bounds {
  return CGRectInset( bounds , 10 , 0 );
}

// text position
- (CGRect)editingRectForBounds:(CGRect)bounds {
  return CGRectInset( bounds , 10 , 0 );
} 
```

并从 viewController 代码中删除以下代码：

```
UIView *pwPaddingView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 5, 38)];
self.passwordField.leftView = pwPaddingView;
self.passwordField.leftViewMode = UITextFieldViewModeAlways; 
```

这会填充单元格，但不会阻止触摸检测

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T11:58:31.840

您是否将其设置为不取消视图中的其他触摸？

```
 UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(dismissKeyboard)];
 tap.cancelsTouchesInView = NO; //add this line
 [self.view addGestureRecognizer:tap]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-13T12:10:20.007

打电话

> [自我辞职FirstResponder]

在我的 ViewController 中使用 UITextField 有助于解决对触摸的周期性无响应

# javascript - 用于创建 innerHTML 的 JavaScript 循环（Google 表格）

> ID：15176892
> 
> 赞同：0
> 
> 时间：2013-03-02T16:44:34.287
> 
> 标签：javascript, google-visualization

我正在使用 Google 表格作为我的来源获取一些数据。我发生了三个类似的查询，但只有两个是返回结果并在我的表格单元格中工作。环顾四周后，我看到人们循环创建 id=# 以包含在他们的 HTML 中，但我无法完全弄清楚用我的语法来执行此操作。

这是我目前使用的，（警告：Noobie Code Ahead）

```
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
google.load('visualization', '1', {packages: ['gauge']});
google.setOnLoadCallback(queryValue);
function queryValue () {
var query = new google.visualization.Query('https://spreadsheets.google.com/spreadsheet/tq?range=B22:B37&key=0AhCv9Xu_eRnSdFNhSzNQUFd3b1ZfRHgtQURINFpzeGc&gid=7');
query.send(function (response) {
    if (response.isError()) {
        alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
    }
    var data = response.getDataTable();

    // fetch the data from range B22:B37 into the span "bx"
    // These are date labels 
    document.getElementById('b22').innerHTML = data.getValue(0, 0);
    document.getElementById('b23').innerHTML = data.getValue(1, 0);
    document.getElementById('b24').innerHTML = data.getValue(2, 0);
    document.getElementById('b25').innerHTML = data.getValue(3, 0);
    document.getElementById('b26').innerHTML = data.getValue(4, 0);
    document.getElementById('b27').innerHTML = data.getValue(5, 0);
    document.getElementById('b28').innerHTML = data.getValue(6, 0);
    document.getElementById('b29').innerHTML = data.getValue(7, 0);
    document.getElementById('b30').innerHTML = data.getValue(8, 0);
    document.getElementById('b31').innerHTML = data.getValue(9, 0);
    document.getElementById('b32').innerHTML = data.getValue(10, 0);
    document.getElementById('b33').innerHTML = data.getValue(11, 0);
    document.getElementById('b34').innerHTML = data.getValue(12, 0);
    document.getElementById('b35').innerHTML = data.getValue(13, 0);
    document.getElementById('b36').innerHTML = data.getValue(14, 0);
    document.getElementById('b37').innerHTML = data.getValue(15, 0);
});
}
google.setOnLoadCallback(queryValue1);
function queryValue1 () {
var query = new google.visualization.Query('https://spreadsheets.google.com/spreadsheet/tq?range=A22:A37&key=0AhCv9Xu_eRnSdFNhSzNQUFd3b1ZfRHgtQURINFpzeGc&gid=7');
query.send(function (response) {
    if (response.isError()) {
        alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
    }
    var data1 = response.getDataTable();

    // fetch the data from range A22:A37 into the span "bx"
    // These are the labels on the top of the gauges and I want to turn the color of the gauge range. (i.e. <70:red, 71-89:yellow, 90-100:red)
    document.getElementById('a22').innerHTML = data1.getValue(0, 0);
    document.getElementById('a23').innerHTML = data1.getValue(1, 0);
    document.getElementById('a24').innerHTML = data1.getValue(2, 0);
    document.getElementById('a25').innerHTML = data1.getValue(3, 0);
    document.getElementById('a26').innerHTML = data1.getValue(4, 0);
    document.getElementById('a27').innerHTML = data1.getValue(5, 0);
    document.getElementById('a28').innerHTML = data1.getValue(6, 0);
    document.getElementById('a29').innerHTML = data1.getValue(7, 0);
    document.getElementById('a30').innerHTML = data1.getValue(8, 0);
    document.getElementById('a31').innerHTML = data1.getValue(9, 0);
    document.getElementById('a32').innerHTML = data1.getValue(10, 0);
    document.getElementById('a33').innerHTML = data1.getValue(11, 0);
    document.getElementById('a34').innerHTML = data1.getValue(12, 0);
    document.getElementById('a35').innerHTML = data1.getValue(13, 0);
    document.getElementById('a36').innerHTML = data1.getValue(14, 0);
    document.getElementById('a37').innerHTML = data1.getValue(15, 0);
});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:50:03.803

要执行循环，您可以使用起点和终点，然后只需在代码中使用每个递增的值。

* * *

由于您基本上是从`0`to循环`15`，因此 start 将是`0`，包容性 end 将是`15`。你`ID`只是简单地被 抵消`22`并且在其之前`"b"`，所以我们使用加法来抵消数字，并使用连接来加入`"b"`。

```
for (var i = 0; i <= 15; i++) {
    document.getElementById('b' + (i + 22)).innerHTML = data.getValue(i, 0);
} 
```

# php - SELECT some_value FROM php_array WHERE other_values （不是 mysql ！）

> ID：15176893
> 
> 赞同：0
> 
> 时间：2013-03-02T16:44:37.887
> 
> 标签：php, search, multidimensional-array

在 MySQL 中，我可以从一行的一列中选择一个值，其中一列或多列具有指定的值：

```
SELECT name FROM table WHERE birthyear = '1965' AND birthplace = 'Vancouver' 
```

现在我有一个多维 PHP_array（不是 mySQL 数据库），我想以类似的方式从给定出生年份和出生地的行中提取名称。这是数组：

```
$example = Array
(
    [0] => Array
            (
            [0] => 1965
            [1] => Bob
            [2] => Vancouver

        )

    [1] => Array
        (
            [0] => 1973
            [1] => John
            [2] => Vancouver

        )

    [2] => Array
        (
            [0] => 1965
            [1] => Paul
            [2] => Houston

        )

) 
```

在我看来，对于每个 WHERE 条件，我都需要一个 PHP 循环。如果您假设我需要匹配多个列（生日、出生地、性别、职业等），您就会明白这会如何减慢包含数千个条目的数组的执行速度。

我怎样才能用最少的循环数做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T18:24:28.920

此功能将满足您的需求：

```
function getNameByYear($year, array $array) {
    $name = false;
    foreach ($array as $a) {
        if ($a[0] == $year) {
            $name = $a[1];
            break;
        }
    }
    return $name;
} 
```

用法：

```
$example; // your array
$n = getNameByYear(1965, $array); // Bob
$n = getNameByYear(1973, $array); // John
$n = getNameByYear(1982, $array); // Paul
$n = getNameByYear('1965', $array); // Bob
$n = getNameByYear('1973', $array); // John
$n = getNameByYear('1982', $array); // Paul
$n = getNameByYear('wrong', $array); // false
$n = getNameByYear(2035, $array); // false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:50:06.757

```
array_filter($example,function($v) { return $v[0] == 1982; }); 
```

# c# - 在基于 AJAX 的请求 C# 上抓取网站

> ID：15176896
> 
> 赞同：0
> 
> 时间：2013-03-02T16:44:48.407
> 
> 标签：c#

我有一个像这样的网站[http://www.lfp.fr/ligue1/feuille_match/52255](http://www.lfp.fr/ligue1/feuille_match/52255)我想在选项卡 infoMatch 和 Statistiques 之间切换，但它只显示第一页的数据，当我使用萤火虫检查时它给我的回应是：GET showStatsJoueursMatchmatchId=52255&domId=112&extId=24&live=0&domNomClub=AJ+Auxerre&extNomClub=FC+Nantes

```
string url="http://www.lfp.fr/ligue1/feuille_match/52255";
                    string getData = "?matchId=52255&domId=112&extId=24&live=0&domNomClub=AJ+Auxerre&extNomClub=FC+Nantes";
                    System.Uri uriObj = new System.Uri(url);
                    String Methode = "GET";
                    lgRequest = (HttpWebRequest)WebRequest.CreateDefault(uriObj);
                    lgRequest = (HttpWebRequest)WebRequest.CreateDefault(uriObj);    
    lgRequest.Method = Methode;
    lgRequest.ContentType = "text/html";
                    SetRequestHeader("Accept", "text/html");
                    SetRequestHeader("Cache-Control", "no-cache");
                    SetRequestHeader("Content-Length", getData.Length.ToString());

    StreamWriter stream = new StreamWriter
                (lgRequest.GetRequestStream(), Encoding.ASCII);
            stream.Write(body);
            stream.Close();
            lgResponse = (HttpWebResponse)lgRequest.GetResponse(); 
```

但它给了我错误“无法发送具有这种动词类型的内容主体”。当我在方法中使用“POST”时，它给出了 HTML 的响应，但只有第一页数据而不是统计数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:55:51.833

试试以下地址：[http ://www.lfp.fr/ligue1/feuille_match/showStatsJoueursMatch?matchId=52255&domId=112&extId=24&live=0&domNomClub=AJ+Auxerre&extNomClub=FC+Nantes](http://www.lfp.fr/ligue1/feuille_match/showStatsJoueursMatch?matchId=52255&domId=112&extId=24&live=0&domNomClub=AJ+Auxerre&extNomClub=FC+Nantes)

就像这样：

```
using System;
using System.Net;

class Program
{
    static void Main()
    {
        using (var client = new WebClient())
        {
            string result = client.DownloadString("http://www.lfp.fr/ligue1/feuille_match/showStatsJoueursMatch?matchId=52255&domId=112&extId=24&live=0&domNomClub=AJ+Auxerre&extNomClub=FC+Nantes");
            Console.WriteLine(result);
        }
    }
} 
```

请注意，我使用了 a[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)而不是`WebRequest`which 使代码更短且更易于理解。

从远程站点下载 HTML 后，您可能会考虑使用 HTML 解析库，例如[`HTML Agility Pack`](http://htmlagilitypack.codeplex.com/)从您抓取的标记中提取有用信息。

# php - 嵌套 for 循环中的“除以零”错误

> ID：15176898
> 
> 赞同：-3
> 
> 时间：2013-03-02T16:44:56.887
> 
> 标签：php, for-loop, division, zero

此脚本的目的：

编写一个以 1 为步从 1 到 10 的脚本。对于每个数字，显示该数字是奇数还是偶数，如果该数字是质数，还显示一条消息。在 HTML 表格中显示此信息。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Exercise 1</title>
<link rel="stylesheet" type="text/css" href="common.css" />
<style type="text/css">
  th { text-align: left; background-color: #999; }
  th, td { padding: 0.4em; }
  tr.alt td { background: #ddd; }
</style>
</head>
<body>

<h2>Exercise 1</h2>

<table cellspacing="0" border="0" style="width: 20em; border: 1px solid #666;">
  <tr>
    <th>Number</th>
    <th>Parity</th>
    <th>Primality</th>
  </tr>
    <?php 
    $n=10;
    for ($i=1;$i<=$n;$i++){
    echo ($i%2 != 0)? '<tr class = "alt">':'<tr>'; ?>
    <td><?php echo $i; ?></td>
    <td><?php echo ($i%2 != 0)? "Odd":"Even";?></td>
    <td><?php 

    $k=0;
    for ($j=1;$j<=$i;$j++){
        if ($i%$j=0) $k++; //Where the error occurs
    }
    echo ($k=2 || $k=1)?"Prime":"Composite";?>
    </td></tr>
    <?php
    }
    ?>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:48:31.690

`if ($i%$j=0)`应该是`if ($i%$j==0)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:48:40.303

`$i%$j=0`

赋值`$j`为`0`然后尝试做`$i % 0`；

你要

`($i % $j) == 0`

以同样的方式还有另一个错误`echo`。

还可以考虑使用空格格式化代码以使其更具可读性。

# jenkins - 分布式 Jenkins - Linux 上的主控和 Windows 上的从属 - 如何配置节点特定设置

> ID：15176899
> 
> 赞同：1
> 
> 时间：2013-03-02T16:45:04.207
> 
> 标签：jenkins, maven-3, jenkins-plugins

这是我的问题的背景。

我已经设置了分布式 Jenkins，其中主机在 RHEL linux 机器上运行，从机在 Windows 机器上运行。我在将从节点注册到主节点时没有任何问题。

在 master Jenkins 中，在管理 Jenkins 页面下，我提供了对应于 master (/opt/maven3) 的 maven 路径详细信息。

现在我已经创建了 maven2/3 作业并专门在从节点上分配了作业。但是当slave在windows上运行maven作业时，它采用的是安装master的maven路径（/opt/maven3），因为这个路径在windows中无效，会引发错误。

我尝试使用预构建步骤覆盖该值，设置 M2_HOME 和 PATH 环境条目。但在静脉中。

所以简单来说，如何在 Jenkins 中配置节点特定设置？

意思是我想在节点 1 中指定 Maven 路径是 XXX/maven3，在节点 2 中指定 Maven 路径是 yyy/zzz/maven3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T08:56:31.960

覆盖设置如下： **System Management** -> **Node Management** -> your slave setting -> **Node Properties** -> check the *Tools Locations* -> **Add**，然后设置slave maven选项，*别名*选择“maven”，*目录*用slave maven写入目录。你可以试试。

# while-loop - scanf("%[^\n]",command) 在 while 循环内

> ID：15176901
> 
> 赞同：3
> 
> 时间：2013-03-02T16:45:15.470
> 
> 标签：while-loop, scanf

我想要一个无限循环，每个循环都获取命令，

这是我的代码

```
while ( 1 )
{
    char * command[100];
    printf("---| ");
    scanf( "%[^\n]",command);
    printf("%s\n",command);

} 
```

由于某种原因，它只输入一次，并且循环不会因询问输入而终止。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:58:58.443

定义应该是

字符命令[100]；

而不是 char *command[100] - 这是一个由 100 个字符指针组成的数组。

scanf() 也不容易使用，我会使用`fgets(command, sizeof(command), stdin);` 然后删除换行符。

```
while ( 1 )
{
    char command[100];
    printf("---| ");
    scanf( "%s", command);
    printf("%s\n",command);
} 
```

# javascript - Javascript中的全局变量回到它的第一个值

> ID：15176908
> 
> 赞同：0
> 
> 时间：2013-03-02T16:46:17.093
> 
> 标签：javascript

我正在尝试制作一个获取两个参数并根据它所在的步骤执行不同操作的函数。

所以这就像一个有四个步骤的简短任务。

```
var  stp=1;
var vocabulary= new Array();
vocabulary['greatings']= ['привет','здорово','здравствуй'];
vocabulary['grQuestions']= ['как дела','что нового','как здоровье','как поживаешь'];
vocabulary['qrAnswers']= ['нормально как сам','спасибо хорошо','потихоньку','отлично'];

function myMission(stp,str) {
  switch (stp) {
  case 1:
    {
      if (jQuery.inArray(str, vocabulary['greatings'])!==-1) {
        stp+=1;
        $('.stp').html(stp);
        $('.answer').html('Привет!');
      } else {
        $('.stp').html(stp);
        $('.answer').html('Не понимаю');
      }
    }
    break;
  case 2:
    alert("23");
    break;
  case 3:
    alert("24");
    break;
}
}
$(document).ready(function() {
  $('#checker').click(function() {
    var str = $('.yourVoice').val();
    myMission(stp,str);
  });
}); 
```

问题是`stp`总是回到`1` 我该如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:51:22.780

问题是您将 stp 的值作为参数传递给函数。然后它对其本地副本而不是全局变量进行操作。

要修复它，请从函数定义和对它的任何调用中删除 stp 参数。

```
function myMission(str) { ...

myMission(str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:53:36.693

为什么要为全局变量`var stp=1;`和函数参数使用相同的名称会使自己复杂化`function myMission(stp,str)`？您正在编辑的变量是函数范围的局部变量，全局变量根本不受影响。

如果我理解得很好，您不需要参数，而应该只使用全局变量。

```
function myMission(str) { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T16:56:06.880

当您在具有相同名称的参数的函数内执行 stp+=1 时，您不再使用全局 var，但您正在处理实际上是原始 var 副本的参数，因此您正在处理完全不同的东西。

解决方案可以是更改函数的参数名称：

```
function myMission(stp_another_name,str) {
... 
```

无论如何，如果你想处理全局变量，你可以省略将它作为参数传递给函数

```
function myMission(str) {
...

...
myMission(str); 
```

当然根据您的代码的目的

# django - 无法使用有效的用户名和密码登录到 django 管理视图

> ID：15176910
> 
> 赞同：0
> 
> 时间：2013-03-02T16:46:25.843
> 
> 标签：django, google-app-engine, django-admin, django-nonrel

我知道这个问题之前已经被问过好几次了，但大部分问题都是很久以前问过的，旧的答案对我不起作用。

我有一个基于 django-nonrel 的应用程序，它使用 dbindexer 作为后端并部署在 GAE 上。我可以查看不需要登录的应用程序的主页。
但是当我尝试登录到管理员视图时，它给出了“错误的用户名/密码”

在我的本地开发服务器上，如果我使用“manage.py runserver”，那么我可以在管理页面上登录。但是如果我通过 GAE 启动器运行我的应用程序，那么我将无法登录。

我可以收集到 GAE 启动器使用与“manage.py runserver”不同的 django。那么，如何让 GAE（在启动器和部署服务器上）使用 django-nonrel？

其他详情：

```
app.yaml does NOT include "django" library.

settings.py  

DATABASES['native'] = DATABASES['default']
DATABASES['default'] = {'ENGINE': 'dbindexer', 'TARGET': 'native'}  

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',

    'djangotoolbox',
    'autoload',
    'dbindexer',

    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    'django.contrib.admindocs',

    'djangoappengine',
    'testapp',
)  

urls.py

from django.conf.urls.defaults import *
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^admin/', include(admin.site.urls)),    
) 
```

**更新 1::**
正如@dragonx 指出的那样，我需要运行 `python manage.py remote createsuperuser`并创建用户。

在本地服务器上，当我运行“manage.py syncdb”时，它会用初始化数据填充数据库，其中还包括创建超级用户。为此，我在“fixtures”目录中使用“initial_data.yaml”，并由 syncdb 命令自动读取。
那么，有没有办法在服务器端运行“syncdb”？不知何故，我假设这是在部署时自动发生的，就像“manage.py runserver”本身发生一样，我不需要手动运行应用程序。

如果我运行`manage.py remote syncdb`，它会脱口而出以下错误：

```
google.appengine.api.datastore_errors.NeedIndexError: no matching index found.
<<ed>>some stack trace<<ed>>
The suggested index for this query is:
- kind: django_content_type
  properties:
  - name: app_label
  - name: name 
```

**更新 2：**如果您从应用程序目录使用，
而不是使用命令，它会在远程服务器上运行固定装置。不知道在做什么。也可用于初始化远程数据库。`appcfg.py update site``python manage.py deploy`
`manage.py remote loaddata initdata.yaml`

但即使在此之后，我仍然看不到管理界面中加载的夹具数据，即似乎数据库没有初始化或者管理视图可能被严重破坏。但我会留到另一个问题~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T17:30:25.497

当你运行`python manage.py runserver`它时，它会在你的本地机器上启动一个本地开发服务器。它在您的本地机器上有自己的开发数据存储。在某个时候，您在本地数据库中创建了一个管理员用户。

当您在应用引擎上部署时，它会在 Google 的服务器上运行您的代码。那里有一个数据存储，但它不共享您的开发服务器上的数据。您还需要在生产数据存储中创建一个管理员用户。尝试：

`python manage.py remote createsuperuser`

# android - 启动 google+ 环聊并同时运行我的应用程序

> ID：15176911
> 
> 赞同：2
> 
> 时间：2013-03-02T16:46:40.180
> 
> 标签：android, android-activity, hangout

iv'e 编写了一个接收 Android GCM 消息并与 Ardunio ADK 板通信的 Android 应用程序，iv'e 在我的 android 设备和我的计算机之间启动了一个 Google+ 视频群聊（使用适用于 android 的 Google+ 应用程序），然后 iv'e 启动了我的应用程序，所以环聊在后台运行，我的应用程序在前面，但是当环聊在后台运行时，相机会冻结。我认为这样做的原因是，当我运行另一个应用程序时，环聊活动会暂停，因为我不能同时运行两个活动。

**我的问题**：

**有没有办法让我可以同时运行它们，这样我就可以接收 GCM 消息，与 ardunio 通信并同时拨打视频群聊电话？**

**，有没有办法修改我的应用程序来实现这个？**

**谢谢**

# c++ - 如何在 C++ 中使用 Microsoft Visual Studio 2012 查找语法错误？

> ID：15176916
> 
> 赞同：0
> 
> 时间：2013-03-02T16:47:16.730
> 
> 标签：c++, visual-studio-2012, syntax-highlighting

我已确保 InteliSense 已打开，并且在我使用 IDE 时没有禁用任何内容。我没有办法告诉我代码中的语法错误在哪里。当我尝试构建项目时，它只会给我“失败”的报告，并且错误框中没有报告语法错误。

[http://imageshack.us/f/850/visualt.jpg/](http://imageshack.us/f/850/visualt.jpg/)

它给我的唯一错误是：

错误 2 错误 LNK1169：找到一个或多个多重定义符号 C:\Users\Artur\Documents\Visual Studio 2012\Projects\Project2\Debug\Project2.exe 1 1 Project2

错误 1 ​​错误 LNK2005: _main 已在 Portfolio Program 2.obj C:\Users\Artur\Documents\Visual Studio 2012\Projects\Project2\Project2\Source.obj Project2 中定义

这些对我来说似乎没有任何意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:51:57.837

如果您的 C++ 代码中有任何语法错误，Visual Studio 通常会给您提供语法错误。您收到的错误消息表明您将两个模块链接在一起，这两个模块都包含 main() 的定义。这将不起作用，因为链接器将无法确定将两个 main() 函数中的哪一个用作程序的入口点。因此，请检查您的链接器和项目依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:57:45.430

您在资源中有 source.cpp。这是错误的。

# c - c字符串超出边界时仍然有效吗？

> ID：15176917
> 
> 赞同：-1
> 
> 时间：2013-03-02T16:47:20.890
> 
> 标签：c, arrays, string, printf

谁能告诉我为什么下面的代码仍然有效？很明显 str[4] 越界了：

```
#include<stdio.h>
int main(){
    char str[3];
    scanf("%s", str);
    printf("%c\n", str[4]);
    printf("%s\n", str);
    return 0;
} 
```

当它运行时， enter `abcdefg`，它会回显第 5 个字符和整个字符串，什么都不会出错，奇怪吗？

已经声明 c/c++ 不进行边界检查，而在上述情况下，我应该如何使用 printf 打印用户输入的 c 字符串？或更一般地说，如何正确使用来自用户的 c 字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:51:54.230

str[4] 为您提供指向字符串最后一个元素之后的内存地址的指针。您仍然可以将其转换为角色，但您永远不知道会得到什么，并且您的软件可能会崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T16:53:56.093

> 为什么它有效？

它不“工作”。不过，它可能*看起来有效*；由于您的代码（越界访问数组）会调用未定义的行为，因此您实际上可以获得任何结果。未定义的行为并不意味着“它必须崩溃”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T17:16:07.783

你写了：

> 当它运行时，输入[abcdefg]，它会回显第5个字符和整个字符串，什么都不会出错，奇怪吗？

但我在您发布的代码中看不到输入读数：

> ```
> #include<stdio.h>
> int main(){
>     char str[3];
>     printf("%c\n", str[4]);
>     printf("%s\n", str);
>     return 0;
> } 
> ```

在任何情况下，`str[4]`指向`char`从 开始的第 5 个（字节）`str`，因此它将打印程序运行时恰好位于该内存位置的任何“垃圾”。

越界访问数组项是*未定义*的行为，因此未指定确切的行为。只需注意您的数组边界。

# 64-bit - Corflags.exe cf001 无法打开文件进行写入

> ID：15176922
> 
> 赞同：1
> 
> 时间：2013-03-02T16:48:11.427
> 
> 标签：64-bit, 32bit-64bit, corflags

我正在尝试编辑 corflags 文件，以便我可以在 64 位 pc 上运行 32 位应用程序，但每次我尝试使用类似的东西编辑文件`corflags.exe assembly /32bit+`时都会出现错误消息`cf001 could not open file for writing`。

现在我尝试了很多不同的选择，例如：

*   以管理员模式运行；
*   使用搜索查找文件并检查只读未勾选
*   检查是否勾选了用户完全控制
*   试图将整个文件夹设置为非只读

*尝试整个文件夹时，它看起来好像已设置为只读，但随后我单击“确定”并重新右键单击整个文件夹，该框已填充（未勾选）这是否意味着该文件夹的一部分是只读的，为什么它重置为只读？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-07T19:02:11.763

我只是遇到了同样的问题并尝试了同样的事情。

`cornflags`从提升权限运行（“以管理员身份运行” ）`Visual Studio Command Prompt`。我对原始副本做了同样的事情，`.exe`只是为了确保没有其他进程正在使用该程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-15T15:10:27.587

创建您打算使用 CorFlags 定位的文件的副本。（例如“WcfServiceHost.exe”--creates-->“WcfServiceHost - Copy.exe”）

将原始文件重命名为其他文件：（例如“WcfServiceHost.exe”->“WcfServiceHose_Original.exe”）

重命名以复制到原始文件名（例如“WcfServiceHose - Copy.exe”->“WcfServiceHost.exe”

出于我的目的，我创建了副本并命名它们来描述它们的配置： 示例：WCFServiceHost_With32BitOn.exe WCFServiceHost_With32BitOff.exe

现在我可以销毁 WCFServiceHost.exe 文件并从这些预先修改的副本中创建它们。不再需要 CorFlags 操作。

注意：这基本上是@RMalke 答案的更详细版本，该答案应标记为答案。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-09-08T11:26:08.317

我意识到这是几年后的事了，但对于其他人来说，我发现最快的方法是将复制`cmd`并复制`corflags.exe`到与您要编辑的文件夹相同的文件夹中。然后`cmd`从那里以管理员身份运行。

# php - javascript include_once- javascript php 调用相同的文件复制内容

> ID：15176924
> 
> 赞同：0
> 
> 时间：2013-03-02T16:48:20.377
> 
> 标签：php, javascript, jquery, ajax

我正在使用 ajax 加载一个基于屏幕分辨率显示内容的 php 脚本。该脚本运行良好，但 ajax 调用的 url 也会在脚本中稍后调用——它包含所有处理信息。因此，结果是所有内容都通过 jquery 加载，然后用 php 复制。例子：

```
<script type="text/javascript">
$(document).ready(function() {
      $.ajax({
         url: 'functions/maxresults.php',
         type: 'GET',
         data: {h: screen.height, w: screen.width}
      }).done(function ( data ) {
          alert("I am working!");
         document.getElementById("container").innerHTML=data;
        });
    });
</script> 
```

***再往下***

```
<?php
include_once("functions/maxresults.php");   
?> 
```

* * *

```
<?php
require_once("databasefunctions.php");
?>

<div id="container">
<div id="movieinfo"> 
<?php include("sidebar.php");?>
<?php
// get the function
include_once ('function.php');
if($_GET['page'])
$page = $_GET['page'];
else
$page = 0; 
$maxresults = -1;
if(($_GET['w']) && ($_GET['h'])) {
  $w = $_GET['w'];
  $h = $_GET['h'];
}
  if ($w == 1920) {
    $maxresults = 24;  
  } else if ($w == 1600) {
    $maxresults = 21;  
  } else if ($w == 1440){ 
    $maxresults = 14;
  } else if ($w == 1366) { 
    $maxresults = 21;
  } else if ($w == 1024) {
    $maxresults = 8;
  } else 
    $maxresults = 6;
echo $maxresults;
$currentpage = $page;
$page = $page*$maxresults;
$numpages = QuickQuery("SELECT COUNT(id) FROM movies WHERE visible=1");
$numpages = mysql_result($numpages, 0);
$numpages = $numpages/$maxresults-1;
$result = GetMoviesByRangeID($page, $maxresults);//Show <maxresults> pages at a time
DisplayResults($result); 
?>
</div>
</div> 
```

我无法删除 php 包含或脚本根本无法工作。在 jquery 中创建一个 include_once 会起作用吗？如果是这样，我该如何编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:05:54.970

PHP 是一个预处理器。因此，将其“稍后”包含在文件中并不重要。您的 include_once 将在 JavaScript 执行之前被处理和输出。

我看起来问题是您的 include_once 脚本也在输出容器 div。因此，当您删除该行时，它会破坏 javascript。试试这个：

1.  从您的 maxresults.php 文件中删除容器 div。
2.  `<?php include_once('functions/maxresults.php);>`用一个空的 div替换id 的容器：`<div id="container"></div>`

你的 JavaScript 现在应该可以工作了：

```
<script type="text/javascript">
$(document).ready(function() {
  $.ajax({
     url: 'functions/maxresults.php',
     type: 'GET',
     data: {h: screen.height, w: screen.width}
  }).done(function(resp) {
      alert("I am working!");
      $("#container").html(resp);
    });
});
</script> 
```

**再往下**

```
<div =id="container"></div> 
```

**最大结果.php**

```
<?php
require_once("databasefunctions.php");
?>

<div id="movieinfo"> 
<?php include("sidebar.php");?>
<?php
// get the function
include_once ('function.php');
if($_GET['page'])
$page = $_GET['page'];
else
$page = 0; 
$maxresults = -1;
if(($_GET['w']) && ($_GET['h'])) {
  $w = $_GET['w'];
  $h = $_GET['h'];
}
  if ($w == 1920) {
    $maxresults = 24;  
  } else if ($w == 1600) {
    $maxresults = 21;  
  } else if ($w == 1440){ 
    $maxresults = 14;
  } else if ($w == 1366) { 
    $maxresults = 21;
  } else if ($w == 1024) {
    $maxresults = 8;
  } else 
    $maxresults = 6;
echo $maxresults;
$currentpage = $page;
$page = $page*$maxresults;
$numpages = QuickQuery("SELECT COUNT(id) FROM movies WHERE visible=1");
$numpages = mysql_result($numpages, 0);
$numpages = $numpages/$maxresults-1;
$result = GetMoviesByRangeID($page, $maxresults);//Show <maxresults> pages at a time
DisplayResults($result); 
?>
</div> 
```

# ios - UITableViewCell 和 UILabel

> ID：15176928
> 
> 赞同：1
> 
> 时间：2013-03-02T16:48:28.873
> 
> 标签：ios, uitableview, uilabel

我以这种方式将两个自定义添加`UILabel`到我的部分：`UITableView`

```
//in .h file:
NSArray *listaopzioni;
@property (nonatomic, retain) NSArray *listaopzioni;

//in .m file:
self.listaopzioni = [[NSArray arrayWithObjects:@"Strumenti",@"Help & Credits", nil] retain];

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    }

    if ([indexPath section]==0) {

        cell.accessoryType = UITableViewCellAccessoryNone;

        UILabel *slogan= [[UILabel alloc] initWithFrame:CGRectMake(0,0,cell.frame.size.width,cell.frame.size.height)];
        slogan.text=[listaopzioni objectAtIndex:indexPath.row];
        slogan.textAlignment=UITextAlignmentCenter;
        slogan.font= [UIFont boldSystemFontOfSize:20];
        slogan.backgroundColor=[UIColor clearColor];
        [cell.contentView addSubview:slogan];
        [slogan release];

    } 
} 
```

一切都很好，但是当我上下滑动表格视图（试图覆盖下面的单元格`UINavigationBar`）时，我得到了一个奇怪的效果：文本重叠只是使每个字母变厚。

怎么了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T21:26:48.270

`cellForRowAtIndexPath`每次单元格变得可见时都会调用方法。这就是每次滚动时它都会创建标签的原因。解决方案是在创建单元格时放置标签创建：

```
 if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];

    if ([indexPath section]==0) {

    cell.accessoryType = UITableViewCellAccessoryNone;

    UILabel *slogan= [[UILabel alloc] initWithFrame:CGRectMake(0,0,cell.frame.size.width,cell.frame.size.height)];
    slogan.text=[listaopzioni objectAtIndex:indexPath.row];
    slogan.textAlignment=UITextAlignmentCenter;
    slogan.font= [UIFont boldSystemFontOfSize:20];
    slogan.backgroundColor=[UIColor clearColor];
    [cell.contentView addSubview:slogan];
    [slogan release];

   } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T21:52:33.410

UITableViewCells（如果使用得当）会被重用，这意味着在创建它们之后，它们会保持其创建状态，即标签已添加到您的单元格中。您需要做的是利用此单元重用来发挥您的优势：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    UILabel slogan;
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
        slogan = [[UILabel alloc] initWithFrame:CGRectMake(0,0,cell.frame.size.width,cell.frame.size.height)];
        slogan.tag = 2121; // Any unique-to-the-cell, positive integer
        slogan.textAlignment=UITextAlignmentCenter;
        slogan.font= [UIFont boldSystemFontOfSize:20];
        slogan.backgroundColor=[UIColor clearColor];
        [cell.contentView addSubview:slogan];
    } else {
        slogan = [cell viewWithTag:2121]; // Must match slogan.tag
    }

    if ([indexPath section]==0) {

        cell.accessoryType = UITableViewCellAccessoryNone;

        slogan.text=[listaopzioni objectAtIndex:indexPath.row];

    } 
} 
```

# c++ - Boost Thread int 参数到成员函数不起作用？

> ID：15176934
> 
> 赞同：-3
> 
> 时间：2013-03-02T16:48:42.717
> 
> 标签：c++, multithreading, c++11, mingw, boost-thread

对线程和并发完全陌生，但我试图将一个函数作为一个新线程启动，但我不明白我的错误。我收到一个错误`Candidate expects X arguments, 2 provided`。此错误重复`0 < X <= 9`（除了 2）。但是，在我看到的每个示例中，它就像放置您的函数及其参数一样简单。我的代码如下所示：

培训师.cpp：

```
int time = 5; // for example

void Member::decrement(int seconds){
    while(seconds > 0){
        seconds--;
        Sleep(1000);
    }
    isBusy = false;
}

void Member::startDecrement(string state){
    if (state == "busy"){ // isBusy is a private boolean, hence this
        isBusy = true;
        thread myThread = thread(decrement, time); // Thread for method
        myThread.join(); 
    else {
        isBusy = false;
    }
} 
```

然而这不起作用？有人可以给我指导吗，我想做的很简单，但到目前为止我还没有找到适合我的方法。替代方案也`thread`受到赞赏，我已经看到这`std::async`是一个选项，但它似乎不适用于我的编译器设置。

设置信息：`-sdt=c++11`, `MinGW`, `Win64`,`GCC 4.7.2`

**编辑**：

看到我因错误而被钉死，[这是整个错误日志](http://pastebin.com/80K52Epv)。

我也试过答案中提供的代码，没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T17:33:49.630

由于您的编译错误似乎表明这`decrementTime`是一个成员函数，因此您需要提供一个对象来调用它（例如`this`指针）：

```
thread myThread = thread(&Trainer::decrementTime, this, transactionTime); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T17:06:29.333

这是一个最小*且*完整的示例：

```
#include <iostream>
#include <thread>

void decrement(int seconds) {
  std::cout << "seconds: " << seconds << std::endl;
}
int main(int arg, char * argv[]) {
  int time = 100;
  std::thread myThread(decrement, time);
  myThread.join();
  return 0;
} 
```

像这样编译它：`g++ thread.cpp -o thread -std=c++11 -pthread`

下一次，给出这样的例子和完整的错误信息，并确保在编译器标志等技术细节中没有拼写错误。

# python - 我的重力模拟出了什么问题？

> ID：15176937
> 
> 赞同：4
> 
> 时间：2013-03-02T16:49:04.597
> 
> 标签：python, algorithm, simulation, astronomy, runge-kutta

[根据在这个答案](https://stackoverflow.com/a/15111343/924313)中给我的建议，我在我的重力模拟器中实现了一个龙格-库塔积分器。

然而，在我模拟了太阳系一年之后，位置仍然偏离了 110 000 公里，这是不可接受的。

我的初始数据由 NASA 的 HORIZONS 系统提供。通过它，我获得了行星、冥王星、月球、火卫二和火卫一在特定时间点的位置和速度矢量。

这些矢量是 3D 的，但是，有些人告诉我，我可以忽略三维，因为行星在围绕太阳的盘子中排列自己，所以我做到了。我只是将 xy 坐标复制到我的文件中。

这是我改进的更新方法的代码：

```
"""
Measurement units:

[time] = s
[distance] = m
[mass] = kg
[velocity] = ms^-1
[acceleration] = ms^-2
"""

class Uni:
    def Fg(self, b1, b2):
        """Returns the gravitational force acting between two bodies as a Vector2."""

        a = abs(b1.position.x - b2.position.x) #Distance on the x axis
        b = abs(b1.position.y - b2.position.y) #Distance on the y axis

        r = math.sqrt(a*a + b*b)

        fg = (self.G * b1.m * b2.m) / pow(r, 2)

        return Vector2(a/r * fg, b/r * fg)

    #After this is ran, all bodies have the correct accelerations:
    def updateAccel(self):
        #For every combination of two bodies (b1 and b2) out of all bodies:
        for b1, b2 in combinations(self.bodies.values(), 2):
            fg = self.Fg(b1, b2) #Calculate the gravitational force between them

            #Add this force to the current force vector of the body:
            if b1.position.x > b2.position.x:
                b1.force.x -= fg.x
                b2.force.x += fg.x
            else:
                b1.force.x += fg.x
                b2.force.x -= fg.x

            if b1.position.y > b2.position.y:
                b1.force.y -= fg.y
                b2.force.y += fg.y
            else:
                b1.force.y += fg.y
                b2.force.y -= fg.y

        #For body (b) in all bodies (self.bodies.itervalues()):
        for b in self.bodies.itervalues():
            b.acceleration.x = b.force.x/b.m
            b.acceleration.y = b.force.y/b.m
            b.force.null() #Reset the force as it's not needed anymore.

    def RK4(self, dt, stage):
        #For body (b) in all bodies (self.bodies.itervalues()):
        for b in self.bodies.itervalues():
            rd = b.rk4data #rk4data is an object where the integrator stores its intermediate data

            if stage == 1:
                rd.px[0] = b.position.x
                rd.py[0] = b.position.y
                rd.vx[0] = b.velocity.x
                rd.vy[0] = b.velocity.y
                rd.ax[0] = b.acceleration.x
                rd.ay[0] = b.acceleration.y

            if stage == 2:
                rd.px[1] = rd.px[0] + 0.5*rd.vx[0]*dt
                rd.py[1] = rd.py[0] + 0.5*rd.vy[0]*dt
                rd.vx[1] = rd.vx[0] + 0.5*rd.ax[0]*dt
                rd.vy[1] = rd.vy[0] + 0.5*rd.ay[0]*dt
                rd.ax[1] = b.acceleration.x
                rd.ay[1] = b.acceleration.y

            if stage == 3:
                rd.px[2] = rd.px[0] + 0.5*rd.vx[1]*dt
                rd.py[2] = rd.py[0] + 0.5*rd.vy[1]*dt
                rd.vx[2] = rd.vx[0] + 0.5*rd.ax[1]*dt
                rd.vy[2] = rd.vy[0] + 0.5*rd.ay[1]*dt
                rd.ax[2] = b.acceleration.x
                rd.ay[2] = b.acceleration.y

            if stage == 4:
                rd.px[3] = rd.px[0] + rd.vx[2]*dt
                rd.py[3] = rd.py[0] + rd.vy[2]*dt
                rd.vx[3] = rd.vx[0] + rd.ax[2]*dt
                rd.vy[3] = rd.vy[0] + rd.ay[2]*dt
                rd.ax[3] = b.acceleration.x
                rd.ay[3] = b.acceleration.y

            b.position.x = rd.px[stage-1]
            b.position.y = rd.py[stage-1]

    def update (self, dt):
        """Pushes the uni 'dt' seconds forward in time."""

        #Repeat four times:
        for i in range(1, 5, 1):
            self.updateAccel() #Calculate the current acceleration of all bodies
            self.RK4(dt, i) #ith Runge-Kutta step

        #Set the results of the Runge-Kutta algorithm to the bodies:
        for b in self.bodies.itervalues():
            rd = b.rk4data
            b.position.x = b.rk4data.px[0] + (dt/6.0)*(rd.vx[0] + 2*rd.vx[1] + 2*rd.vx[2] + rd.vx[3]) #original_x + delta_x
            b.position.y = b.rk4data.py[0] + (dt/6.0)*(rd.vy[0] + 2*rd.vy[1] + 2*rd.vy[2] + rd.vy[3])

            b.velocity.x = b.rk4data.vx[0] + (dt/6.0)*(rd.ax[0] + 2*rd.ax[1] + 2*rd.ax[2] + rd.ax[3])
            b.velocity.y = b.rk4data.vy[0] + (dt/6.0)*(rd.ay[0] + 2*rd.ay[1] + 2*rd.ay[2] + rd.ay[3])

        self.time += dt #Internal time variable 
```

算法如下：

1.  更新系统中所有物体的加速度
2.  RK4(第一步)
3.  转到 1
4.  RK4（二）
5.  转到 1
6.  RK4（第三）
7.  转到 1
8.  RK4（第四）

我的 RK4 实施是否搞砸了？还是我只是从损坏的数据开始（重要的机构太少而忽略了第三维）？

如何解决这个问题？

* * *

解释我的数据等...

我所有的坐标都是相对于太阳的（即太阳在 (0, 0)）。

```
./my_simulator 1yr

Earth position: (-1.47589927462e+11, 18668756050.4)

HORIZONS (NASA):

Earth position: (-1.474760457316177E+11,  1.900200786726017E+10) 
```

我`110 000 km`通过从我的模拟器预测的坐标中减去 NASA 给出的地球 x 坐标得到了错误。

```
relative error = (my_x_coordinate - nasa_x_coordinate) / nasa_x_coordinate * 100
               = (-1.47589927462e+11 + 1.474760457316177E+11) / -1.474760457316177E+11 * 100
               = 0.077% 
```

相对误差似乎微乎其微，但这仅仅是因为在我的模拟和美国宇航局的模拟中地球都离太阳很远。距离*仍然*很大，使我的模拟器毫无用处。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T07:14:10.583

这种模拟是出了名的不可靠。舍入误差累积并引入不稳定性。提高精度并没有多大帮助。问题是您（必须）使用有限步长，而自然使用零步长。

您可以通过减小步长来减少问题，因此需要更长的时间才能使错误变得明显。如果您不是实时执行此操作，则可以使用动态步长，如果两个或更多物体非常接近，则该步长会减小。

我对这类模拟所做的一件事是在每一步之后“重新归一化”以使总能量相同。整个系统的引力加上动能的总和应该是一个常数（能量守恒）。计算出每一步后的总能量，然后将所有物体的速度缩放一个常数，以保持总能量不变。这至少使输出看起来更合理。如果没有这种缩放，在每一步之后都会向系统添加或移除少量能量，并且轨道往往会爆炸到无穷大或螺旋进入太阳。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T19:15:52.907

要对太阳系进行 RK4 集成，您需要非常好的精度，否则您的解决方案将很快发散。假设您已正确实现所有内容，您可能会看到 RK 用于此类模拟的缺点。

要验证是否是这种情况：尝试不同的积分算法。我发现使用[Verlet 集成](http://en.wikipedia.org/wiki/Verlet_integration)，太阳系模拟会变得不那么混乱。Verlet 也比 RK4 更容易实现。

Verlet（和衍生方法）在长期预测（如全轨道）方面通常优于 RK4 的原因是它们是辛的，也就是说，RK4 不保存动量。因此，即使在发散之后，Verlet 也会给出更好的行为（真实的模拟，但其中有错误），而 RK 一旦发散就会给出非物理行为。

另外：确保您尽可能好地使用浮点数。在太阳系中不要使用米为单位的距离，因为浮点数的精度在 0..1 区间内要好得多。使用 AU 或其他一些标准化比例比使用米要好得多。正如其他主题所建议的那样，确保您在时间上使用一个纪元，以避免在添加时间步长时累积错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-02T16:58:24.110

`110 000 km`绝对误差是指什么相对误差？

> 通过将我预测的地球 x 坐标与 NASA 的地球 x 坐标相减，我得到了 110 000 公里的值。

我不确定您在这里计算的是什么，或者您所说的“NASA 的地球 x 坐标”是什么意思。那是从什么原点，在什么坐标系中，在什么时间的距离？（据我所知，地球绕太阳运行，所以它的 x 坐标相对于以太阳为中心的坐标系一直在变化。）

无论如何，您通过从“NASA 的地球 x 坐标”中减去您的计算值来计算出 110,000 公里的绝对误差。你似乎认为这是一个糟糕的答案。你的期望是什么？把它当场击中？在一米之内？一公里？你可以接受什么，为什么？

通过将误差差除以“NASA 的地球 x 坐标”，您会得到一个相对误差。把它想象成一个百分比。你得到什么价值？如果是 1% 或更少，恭喜你自己。那将是相当不错的。

您应该知道[浮点数在计算机上并不精确](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。（你不能用二进制精确表示 0.1，就不能用十进制精确表示 1/3。）会有错误。您作为模拟器的工作是了解错误并尽可能减少它们。

你可能有一个步长问题。尝试将你的时间步长减少一半，看看你是否做得更好。如果这样做，则表示您的结果尚未收敛。再次减少一半，直到达到可接受的错误。

您的方程式可能条件不佳。如果这是真的，小的初始错误会随着时间的推移而放大。

我建议您对方程进行无量纲化并计算稳定性极限步长。您对“足够小”步长应该是多少的直觉可能会让您感到惊讶。

我还阅读了有关[多体问题](http://en.wikipedia.org/wiki/N-body_problem)的更多信息。这是微妙的。

您也可以尝试使用数值积分库而不是积分方案。您将对方程式进行编程并将其提供给工业强度积分器。它可以让您深入了解是您的实现还是导致问题的物理原理。

就个人而言，我不喜欢你的实施。如果您考虑到数学向量，那将是一个更好的解决方案。相对位置的“如果”测试让我感到寒冷。矢量力学会使符号自然出现。

更新：

好的，你的相对误差很小。

当然，绝对错误确实很重要 - 取决于您的要求。如果你在一个星球上降落一辆车，你不想离开那么多。

因此，您需要停止对什么构成步长太小的假设，并做您必须做的事情以将错误驱动到可接受的水平。

您计算中的所有数量都是 64 位 IEEE 浮点数吗？如果没有，你永远不会到达那里。

64 位浮点数[的精度约为 16 位](http://en.wikipedia.org/wiki/Floating_point)。如果您需要更多，您将不得不使用像 Java 的 BigDecimal 这样的无限精度对象，或者 - 等待它 - 重新调整方程式以使用公里以外的长度单位。如果你用对你的问题有意义的东西来缩放你的所有距离（例如，地球的直径或地球轨道的长轴/短轴的长度），你可能会做得更好。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-12T02:29:34.257

非常简单的更改将改善事情（正确使用浮点值）

*   更改单位系统，以使用尽可能多的尾数位。使用仪表，你做错了...使用 AU，如上所述。更好的是，缩放事物以使太阳系适合 1x1x1 的盒子
*   已经在另一篇文章中说过：您的时间，将其计算为 time = epoch_count * time_step，而不是通过添加！这样，您可以避免累积错误。
*   在对多个值进行求和时，请使用高精度求和算法，例如 Kahan 求和。在 python 中，math.fsum 会为你做这件事。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-27T23:55:02.963

力分解不应该是

```
th = atan(b, a);
return Vector2(cos(th) * fg, sin(th) * fg) 
```

（参见[http://www.physicsclassroom.com/class/vectors/Lesson-3/Resolution-of-Forces](http://www.physicsclassroom.com/class/vectors/Lesson-3/Resolution-of-Forces)或[https://fiftyexamples.readthedocs.org/en/latest/gravity.html#solution](https://fiftyexamples.readthedocs.org/en/latest/gravity.html#solution)）

顺便说一句：你取平方根来计算距离，但你实际上需要平方距离......

为什么不简化

```
 r = math.sqrt(a*a + b*b)
 fg = (self.G * b1.m * b2.m) / pow(r, 2) 
```

至

```
 r2 = a*a + b*b
 fg = (self.G * b1.m * b2.m) / r2 
```

我不确定 python，但在某些情况下，您可以获得更精确的中间结果计算（英特尔 CPU 支持 80 位浮点数，但在分配给变量时，它们会被截断为 64 位）： [如果存储在中间值中，浮点计算会发生变化“双”变量](https://stackoverflow.com/questions/29335982/floating-point-computation-changes-if-stored-in-intermediate-double-variable)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-04T23:01:55.957

目前尚不清楚您的行星坐标和速度在哪个参考系中。如果它在日心坐标系中（参考系与太阳相关），那么您有两个选择：（i）在非惯性参考系中执行计算（太阳不是静止的），（ii）转换位置和速度进入惯性重心参考系。如果您的坐标和速度在重心参考系中，那么您也必须有太阳的坐标和速度。

# php - 检测 ajax 上传何时意外终止

> ID：15176944
> 
> 赞同：2
> 
> 时间：2013-03-02T16:49:33.263
> 
> 标签：php, javascript, jquery, ajax, file-upload

我有这个 ajax 上传代码，它发回数据，说明上传是否成功。但是它只知道文件是否没有错误并且一旦文件已经上传就被移动到目标路径，如果上传在完成之前终止，则不会返回任何数据。有没有办法可以收听检测上传意外终止的时刻并提醒页面？

```
$('#send').click(function() {

 var fileInput = $('#file')[0];
     var data = new FormData();

  for(var i = 0; i < fileInput.files.length; ++i){     
      data.append('file[]',fileInput.files[i]);
   }
     $.ajax({
    type:'POST',
    method:'POST',
    url:'upload.php',
    headers:{'Cache-Control':'no-cache'},
    data:data,
    contentType:false,
    processData:false,
    success: function(response){
        var return_data = response;

        if(return_data !== 'success') {
        $('#status').html('uploaded'); 
        }
        else if(return_data == 'success') {
           $('#status').html('upload failed'); 
        }         
      }
   });
}); 
```

在upload.php中：

```
if($_FILES['file']['error'][$key] == 0
   && move_uploaded_file($_FILES['file']['tmp_name'][$key],"video/test/$name")){
        echo "success";
 }else{
        echo "failed"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T18:54:48.037

向您的选项对象添加一个`error`方法。`$.ajax`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T18:54:50.940

$.ajax 的参数之一是错误。如果页面未返回状态 200，您可以指定要运行的函数。

来自 jquery 文档（[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)）

"error Type: Function( jqXHR jqXHR, String textStatus, String errorThrown ) 请求失败时调用的函数。该函数接收三个参数： jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象，描述类型的字符串发生的错误和可选的异常对象（如果发生）。第二个参数（除了 null）的可能值是“timeout”、“error”、“abort”和“parsererror”。发生 HTTP 错误时，errorThrown 接收HTTP 状态的文本部分，例如“未找到”或“内部服务器错误”。从 jQuery 1.5 开始，错误设置可以接受一个函数数组。每个函数将依次调用。注意：不调用此处理程序用于跨域脚本和 JSONP 请求。这是一个 Ajax 事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T19:04:25.357

```
$('#send').click(function() {
   var fileInput = $('#file')[0];
   var data = new FormData();

   for(var i = 0; i < fileInput.files.length; ++i){     
       data.append('file[]',fileInput.files[i]);
   }

   $.ajax({
        type:'POST',
        method:'POST',
        url:'upload.php',
        headers:{'Cache-Control':'no-cache'},
        data:data,
        contentType:false,
        processData:false,

        beforeSend: function(response){
            // before send do some func if u want
        },

        success: function(response){
            var return_data = response;

            if(return_data !== 'success') {
               $('#status').html('uploaded'); 
            } else if(return_data == 'success') {
               $('#status').html('upload failed'); 
            }         
        },

        complete: function(response){
            // do some func after complete if u want
        },

        error: function(response){
            // here is what u want
            alert ("Error: " + response.statusText);
        },

    });
    // end ajax call
}); 
```

# google-app-engine - 如何获取新放入 NDB 的模型的最新条目？

> ID：15176948
> 
> 赞同：0
> 
> 时间：2013-03-02T16:49:58.590
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

我怎样才能获得新加入 NDB 的模型的最新条目？

1：如果我使用相同的父键？如何 ？

我看到文件写

> 其键具有相同根的实体形成一个实体组或组。如果实体位于不同的组中，那么对这些实体的更改有时可能看起来“无序”。如果实体在您的应用程序的语义中不相关，那很好。但是，如果某些实体的更改应该是一致的，那么您的应用程序应该在创建它们时使它们成为同一组的一部分。

这是否意味着，使用相同的父键，订单是插入订单？

但是，如何获得最后一个？

2：如果我不使用相同的父键（型号相同）？如何 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T17:05:52.407

如果您对最终一致性没问题（即您可能不会立即看到最新的*）*，您可以添加一个带有 auto_now_add=True 的 DateTimeProperty，然后运行按该属性排序的查询以获取最新的。（这也是近似值，因为您可能将多个实体保存在一起，它们的顺序与您预期的不同。）

如果您需要它完全正确，我能看到的唯一方法是创建一个实体，其工作是保存对最新条目的引用，并在与您正在创建的条目相同的事务中更新该实体。就像是：

```
class LatestHolder(ndb.Model):
    latest = ndb.KeyProperty('Entry')

# code to update:

@ndb.transactional(xg=True)
def put_new_entry(entry):
    holder = LatestHolder.get_or_insert(name='fixed-key')
    holder.latest = entry
    holder.put()
    entry.put() 
```

请注意，我在这里使用了一个全局固定的键名，而持有者类没有父级。这是一个瓶颈；如果您的“最新条目”只需要来自特定的父项，您可能更愿意使用不同的父项创建多个最新持有者实体，在这种情况下，您只需将父键传递给 get_or_insert。

# c++ - C++：读写类

> ID：15176953
> 
> 赞同：1
> 
> 时间：2013-03-02T16:50:13.420
> 
> 标签：c++, file, class, binary

```
#include <cstdlib>
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

class PERSON{
    string name, surname;

public:

    void set_name(string aname, string asurname){
        name = aname;
        surname = asurname;
    };

    void read(){

    }

    void output(){
     cout << name << " " << surname << "\n";
    }

    void save(PERSON *x){
        ofstream file("test.bin", ios::out | ios::app | ios::binary);

        if(!file.is_open()){
                cout << "ERROR\n";
        }else{
                file.write((char*)x, sizeof(*x));
                file.close();
        }

    }
};

/*
 * 
 * 
 * 
 */
int main(int argc, char** argv) {

    PERSON * person1 = new PERSON;
    PERSON * person2 = new PERSON;

    person1->set_name("Amon", "Raa");
    person1->save(oseba1);

    ifstream file2("test.bin", ios::in | ios::binary);

    if(!file2.is_open()){
        cout << "Error\n";
        return 0;
    }

    while(!file2.eof()){
        file2.read((char *)person2, sizeof(*person2));
        person2->output();
    }

    file2.close(); 

    return 0;

} 
```

这是我的代码......我做错了什么？我想要做的是每次将一个类保存到二进制文件的末尾，然后读取所有条目......

但每次我运行程序时，我只打印最后输入的名称

所以在第一次正确写入文件并且输出正常时运行它然后我将名称更改为其他名称，比如说 John Doe，我得到 2times John Doe 的输出

请帮助......我是一个完整的初学者;（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:56:10.357

例如，类的序列化包含在 boost 包中。

[http://www.boost.org/doc/libs/1_53_0/libs/serialization/doc/index.html](http://www.boost.org/doc/libs/1_53_0/libs/serialization/doc/index.html)

我认为您实际上并不想自己实现这些功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T16:56:37.063

您不能简单地用 C++ 写出类的二进制映像，尤其是包含指针和非 POD 成员的类。一旦你的数据有间接性，简单地写出内存映像就行不通了，既因为只写出类的内存映像不包括指向的数据，又因为为了让它工作你会必须将所有数据（包括指向的数据）加载到与保存它们时完全相同的内存位置。这不容易（委婉地说）。

您有两种选择，一种是手册，一种是使用第三方库：

1）你用一堆记账信息分别写和读每个成员。这应该适用于您的情况，因为您真正需要加载和保存的是两个字符串的内容及其各自的长度

2）另一种选择 - 特别是当数据结构比您使用的更复杂时 - 是使用类似[boost::serialization](http://www.boost.org/doc/libs/1_53_0/libs/serialization/doc/index.html)的东西来为您完成繁重的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-31T17:09:31.480

您必须使用 PERSON 类的指针数组。然后从二进制文件中读取并填充人员数组。

```
ifstream input("PERSON.std",ios::binary);
    input.seekg(0, ios::end);
    int count = input.tellg() / sizeof(PERSON);
    PERSON *persons = new PERSON[count];
    input.seekg(0, ios::beg);
    input.read((char*) persons, sizeof(PERSON)*count);
    cout << count << endl;

    for (int j = 0; j < count; j++)
    {
        cout << count << endl;
        cout <<persons[j].output() << "\n";
    }
    cout << '\n';
    input.close(); 
```

# assembly - 在 EMU8086 中比较和打印值

> ID：15176954
> 
> 赞同：0
> 
> 时间：2013-03-02T16:50:20.910
> 
> 标签：assembly, x86, x86-16

我刚开始学习`assembly`，我写了一些行来练习，但是我卡在需要显示结果的部分。

**说明：**我有一个`min`值和一个`max`值。我将这些值与 a 进行比较`array`，试图仅显示不在 inteval ( `[min,max]`)中的值

这是我尝试过的（我知道我在这方面很糟糕，对不起！）：

```
include emu8086.inc

ORG 100h   

mov cx, 5    

verificareMinim:   
           MOV AX,date                                                                                  
           MOV BX,minInterval                                                                                 
           CMP AX,BX 
           JB belowMinResults   

 loop verificareMinim      ; sfarsit pasul 1 

 verificareMaxim:  
            MOV AX,date 
            MOV BX,maxInterval
            CMP AX,BX
            JA  overMaxResults

  loop verificareMaxim  ; sfarsit pasul 2

 belowMinResults:
            int 21h
            JMP verificareMinim

 overMaxResults:  
            int 21h
            JMP verificareMaxim

maxInterval DW 10
minInterval DW 1
date DW -1,-4,11,3,7

RET ; return to operating system.
END ; directive to stop the compiler. 
```

所以，我的问题是：

1）我的代码有什么问题？（问题如上所述，在`Description`）

2）如何显示结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T18:20:09.703

如果您只想打印适合范围的数组的数字，则无需使用 2 个循环使其过于复杂。一个循环就足够了。

另一个问题是您没有为`int 21h`DOS 调用设置任何有意义的参数。

第三个问题是你没有更新你的指针。

第四个问题是您`cx`在第一个 ( `verificareMinim`) 循环之后不再设置。

第五个问题是您使用无符号条件跳转`jb`和`ja`有符号数。

第六个问题是您的代码进入无限循环，因为 when`loop verificareMaxim`不再分支到`verificareMaxim`，执行继续`belowMinResults`，然后（如果`int 21h`没有崩溃，即），`JMP verificareMinim`使其成为无限循环。

第七个问题是`ret`指令在您的数据之后，并且永远不会到达。

你可以这样做：

```
 mov si,date ; si points to the array.
                ; some assemblers want mov si,offset array.
                ; lea si,date may also be used.

    mov cx,5    ; length of array date 
```

**编辑：**打印**不在**区间内的数字。固定的。

**编辑：**修复了十六进制打印中的错误。

```
@verify_loop:
    mov ax,[si]           ; read value from array into ax
    cmp ax,[minInterval]  ; compare value of ax with the value of min_Interval
                          ; some assemblers want cmp ax,min_Interval
    jl  @number_is_ok     ; jump if less, signed conditional jump.

    cmp ax,[maxInterval]  ; compare value of ax with the value of max_Interval
                          ; some assemblers want cmp ax,max_Interval
    jle @number_not_valid ; jump if less or equal, signed conditional jump.

@number_is_ok:

    ; the number in ax is valid, print it here.

    ; I'll do the printing here the easy way: printing in
    ; hexadecimal, printing in other formats (say, decimal) left as an exercise.
    ; hint: use div and print always the remainder after converting it to ASCII
    ; 0...9.
    ;
    ; I'll just use int 21h/ah=02h here, dl contains the character to write.

    push cx

    mov cl,12d ; number of bits to shift.
               ; start with 12 (it's 16 minus 4).

    @print_loop:
        mov dx,ax

        shr dx,cl   ; shift dx cl bits to the right
        and dl,0x0F ; leave only the lower nibble (4 bits)
        cmp dl,9
        jbe @between_0_and_9 ; jump if between or equal to 9
                             ; (unsigned conditional jump)

            add dl,('a'-'9'-1) ; Edit: fixed bug here.
                               ; Lowercase hexadecimal letters a-f
                               ; (change to 'A' for uppercase)
    @between_0_and_9:
        add dl,'0'           ; convert to printable ASCII '0'...'9', 'a' ... 'f'

        push ax    ; according to Ralph Brown's interrupt list,
                   ; int 21h/ah=02 modifies al.
        mov ah,2   ; print character to screen
        int 21h    ; character in dl
        pop ax

        sub cl,4        ; next time shift 4 bits less
        jnc @print_loop ; continue if there's still bits left

    pop cx

@number_not_valid:
    add si,2            ; next word in array date.
    dec cx              ; decrement counter.
    jnz @verify_loop    ; continue if there's still words in array date.

; now everything is done.

    mov ax,4C00h
    int 21h      ; int 21h/ah=4Ch, return to DOS, return code in al.
                 ; int 20h works too, no return code.
                 ; ret works too, but only in .COM files.

maxInterval DW 10
minInterval DW 1
date        DW -1, -4, 11, 3, 7 
```

# java - 打开跟踪文件时出错：没有这样的文件或目录 (2) Google 日历

> ID：15176955
> 
> 赞同：1
> 
> 时间：2013-03-02T16:50:22.547
> 
> 标签：java, android

我按照[此处](http://developer.android.com/guide/topics/providers/calendar-provider.html#insert-calendar)的指南 在 Google 日历上添加事件，但它没有将事件添加到日历中并且我有错误：

打开跟踪文件时出错：没有这样的文件或目录 (2)

和

```
long eventID = Long.parseLong(uri.getLastPathSegment()); 
```

没用过，为什么？

代码主要：

```
 long calID = 3;
Calendar beginTime = Calendar.getInstance();

ContentResolver cr = getContentResolver();
ContentValues values = new ContentValues();
values.put(Events.DTSTART, beginTime.getTimeInMillis() + 11*60*1000);
values.put(Events.DTEND, beginTime.getTimeInMillis()+60*60*1000);
values.put(Events.TITLE, "Jazzercise");
values.put(Events.DESCRIPTION, "Group workout");
values.put(Events.CALENDAR_ID, calID);
values.put(Events.EVENT_TIMEZONE, "America/Los_Angeles");
Uri uri = cr.insert(Events.CONTENT_URI, values);

// get the event ID that is the last element in the Uri
long eventID = Long.parseLong(uri.getLastPathSegment());
// 
// ... do something with event ID
//
// 
```

显现：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.inscal"
    android:versionCode="1"
    android:versionName="1.0" >
  <uses-sdk
        android:minSdkVersion="16"
        android:targetSdkVersion="16" />
    <uses-permission android:name="android.permission.READ_CALENDAR" />
    <uses-permission android:name="android.permission.WRITE_CALENDAR" />
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.inscal.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:54:56.233

您好，请在您的 Androidmainfest 文件中添加此权限

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

这是使用 Intent 实现日历事件的代码：

```
Calendar cal = Calendar.getInstance();              
Intent intent = new Intent(Intent.ACTION_EDIT);
intent.setType("vnd.android.cursor.item/event");
intent.putExtra("beginTime", cal.getTimeInMillis());
intent.putExtra("allDay", true);
intent.putExtra("rrule", "FREQ=YEARLY");
intent.putExtra("endTime", cal.getTimeInMillis()+60*60*1000);
intent.putExtra("title", "A Test Event from android app");
startActivity(intent); 
```

# javascript - li a 需要在没有子菜单时可点击

> ID：15176957
> 
> 赞同：0
> 
> 时间：2013-03-02T16:50:33.617
> 
> 标签：javascript, jquery, accordion

嗨，我有一个手风琴菜单，一切正常，除非某个部分没有子类别，我需要链接到页面而不是尝试打开不存在的子菜单。

如何在此代码中实现这一点？

```
$.noConflict();
$(document).ready(function() {

        // Store variables

        var accordion_head = $('ul.accordion > li > a.item'),
            accordion_body = $('ul.accordion li > ul.sub-menu');

        // Click function

        accordion_head.on('click', function(event) {

            // Disable header links

            event.preventDefault();

            // Show and hide the tabs on click

            if ($(this).attr('class') != 'active'){
                accordion_body.slideUp('normal');
                $(this).next().stop(true,true).slideToggle('normal');
                accordion_head.removeClass('active');
                $(this).addClass('active');
            }

        });

    }); 
```

HTML....

```
 <div class="Block CategoryList Moveable" id="SideCategoryList">

   <div class="BlockContent" id="dropDowns">
    <ul class="accordion">
    <li><a href="http://site-link.co.uk" >Main Category 1</a>
    <ul class="sub-menu">   <li><a href="http://site-link.co.uk" class="item">item 1</a>

    </li>   <li ><a href="http://site-link.co.uk" class="item">item 2</a>

    </li>   <li ><a href="http://site-link.co.uk" class="item" >item 3</a>

   </li>    <li ><a href="http://site-link.co.uk" class="item">item 4</a>

    </li></ul>

</li>   <li ><a href="http://site-link.co.uk" class="item">Main Category 2</a>

</li>   <li ><a href="http://site-link.co.uk" class="item">Main Category 3</a>

</li>
    </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:06:52.730

只是抛出一个猜测：

```
// Disable header links

// event.preventDefault(); - handle this below

// Show and hide the tabs on click

if ($(this).attr('class') != 'active'){
    accordion_body.slideUp('normal');
    var subMenu = $(this).next('ul');
    if (subMenu) {
      subMenu.stop(true,true).slideToggle('normal');
      event.preventDefault();
    }
    accordion_head.removeClass('active');
    $(this).addClass('active');
} else {
    event.preventDefault();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:54:24.313

在这里你去[http://jsfiddle.net/davidchase03/WaQES/](http://jsfiddle.net/davidchase03/WaQES/)因为第一个没有类项目

`var accordion_head = $('ul.accordion > li > a')`

并添加

```
 // Disable header links
    if (  $(this).next().hasClass('sub-menu')  ) {
        event.preventDefault();
    } 
```

# java - 如何将文件保存在 JAR 中？

> ID：15176965
> 
> 赞同：-4
> 
> 时间：2013-03-02T16:51:48.533
> 
> 标签：java, jar

我知道如何获取资源，例如。图像或文本文件。但是如何将文件保存在 JAR 中？有没有办法像我在获取资源时那样使用 getClass() ？如果不是，路径的开始是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:58:23.997

如果您询问如何将文件添加到 JAR，请参阅以下文档：[http ://docs.oracle.com/javase/tutorial/deployment/jar/update.html](http://docs.oracle.com/javase/tutorial/deployment/jar/update.html)

命令是`jar uf jar-file input-file(s)`。如果您希望以编程方式执行此操作，请参阅该类的http://docs.oracle.com/javase/6/docs/api/java/util/jar/JarEntry.html [。](http://docs.oracle.com/javase/6/docs/api/java/util/jar/JarEntry.html)`JarEntry`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T17:04:18.927

一种选择是在打包 JAR（或程序）时将资源放入 JAR 文件中。

例如，如果您使用 Maven 构建程序，只需将所有需要的文件放到 src/main/resources 目录中（参见[http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-布局.html](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html) )。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T16:58:26.477

是的。有一种方法可以使用 jar 命令执行此操作。您可以查看[Javadoc](http://docs.oracle.com/javase/tutorial/deployment/jar/update.html)以了解这一点。

# javascript - 如何将鼠标移到onclick

> ID：15176968
> 
> 赞同：0
> 
> 时间：2013-03-02T16:52:02.463
> 
> 标签：javascript, html, canvas, onclick

如何更改此代码而不是拖动您只需单击两个元素即可交换两个元素的位置？我想通过单击一个然后另一个来交换两个图块，但是在这里您需要拖动第一个图块将其带到另一个图块然后它们将交换。

```
 function onPuzzleClick(e){
        if(e.layerX || e.layerX == 0){
            _mouse.x = e.layerX - _canvas.offsetLeft;
            _mouse.y = e.layerY - _canvas.offsetTop;
        }
        else if(e.offsetX || e.offsetX == 0){
            _mouse.x = e.offsetX - _canvas.offsetLeft;
            _mouse.y = e.offsetY - _canvas.offsetTop;
        }
        _currentPiece = checkPieceClicked();
        if(_currentPiece != null){
            _stage.clearRect(_currentPiece.xPos,_currentPiece.yPos,pcWidth,pcHeight);
            _stage.save();
            _stage.globalAlpha = .9;
            _stage.drawImage(_img, _currentPiece.sx, _currentPiece.sy, pcWidth, pcHeight, _mouse.x - (pcWidth / 2), _mouse.y - (pcHeight / 2), pcWidth, pcHeight);
            _stage.restore();
            document.onmousemove = updatePuzzle;
            document.onmouseup = pieceDropped;
        }
    }
    function checkPieceClicked(){
        var i;
        var piece;
        for(i = 0;i < _pieces.length;i++){
            piece = _pieces[i];
            if(_mouse.x < piece.xPos || _mouse.x > (piece.xPos + pcWidth) || _mouse.y < piece.yPos || _mouse.y > (piece.yPos + pcHeight)){
                //PIECE NOT HIT
            }
            else{
                return piece;
            }
        }
        return null;
    }
    function updatePuzzle(e){
        _currentDropPiece = null;
        if(e.layerX || e.layerX == 0){
            _mouse.x = e.layerX - _canvas.offsetLeft;
            _mouse.y = e.layerY - _canvas.offsetTop;
        }
        else if(e.offsetX || e.offsetX == 0){
            _mouse.x = e.offsetX - _canvas.offsetLeft;
            _mouse.y = e.offsetY - _canvas.offsetTop;
        }
        _stage.clearRect(0,0,width,height);
        var i;
        var piece;
        for(i = 0;i < _pieces.length;i++){
            piece = _pieces[i];
            if(piece == _currentPiece){
                continue;
            }
            _stage.drawImage(_img, piece.sx, piece.sy, pcWidth, pcHeight, piece.xPos, piece.yPos, pcWidth, pcHeight);
            _stage.strokeRect(piece.xPos, piece.yPos, pcWidth,pcHeight);
            if(_currentDropPiece == null){
                if(_mouse.x < piece.xPos || _mouse.x > (piece.xPos + pcWidth) || _mouse.y < piece.yPos || _mouse.y > (piece.yPos + pcHeight)){
                    //NOT OVER
                }
                else{
                    _currentDropPiece = piece;
                    _stage.save();
                    _stage.globalAlpha = .4;
                    _stage.fillStyle = PUZZLE_HOVER_TINT;
                    _stage.fillRect(_currentDropPiece.xPos,_currentDropPiece.yPos,pcWidth, pcHeight);
                    _stage.restore();
                }
            }
        }
        _stage.save();
        _stage.globalAlpha = .6;
        _stage.drawImage(_img, _currentPiece.sx, _currentPiece.sy, pcWidth, pcHeight, _mouse.x - (pcWidth / 2), _mouse.y - (pcHeight / 2), pcWidth, pcHeight);
        _stage.restore();
        _stage.strokeRect( _mouse.x - (pcWidth / 2), _mouse.y - (pcHeight / 2), pcWidth,pcHeight);
    }
    function pieceDropped(e){
        document.onmousemove = null;
        document.onmouseup = null;
        if(_currentDropPiece != null){
            var tmp = {xPos:_currentPiece.xPos,yPos:_currentPiece.yPos};
            _currentPiece.xPos = _currentDropPiece.xPos;
            _currentPiece.yPos = _currentDropPiece.yPos;
            _currentDropPiece.xPos = tmp.xPos;
            _currentDropPiece.yPos = tmp.yPos; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T20:52:40.453

**这是使用鼠标单击而不是拖动来交换片段的方法**

在 mouseup 处理程序中：

*   检查用户是否击中任何棋子。

*   如果用户点击了一块并且之前没有“选择”一块，那么“选择”这块。

*   如果用户击中一个棋子并且*与*先前的选择一样，则交换这两个棋子并重置棋子。

*   如果用户在所有片段之外单击，则清除任何“选定”片段。

这是供您查看的工作代码和小提琴：http: [//jsfiddle.net/m1erickson/a75xz/](http://jsfiddle.net/m1erickson/a75xz/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");
    var canvasOffset=$("#canvas").offset();
    var offsetX=canvasOffset.left;
    var offsetY=canvasOffset.top;
    var canvasWidth=canvas.width;
    var canvasHeight=canvas.height;

    // create "pieces"
    var selectedPiece=-1;
    var pieceSize=75;
    var pieces=[];
    pieces.push({x:50,y:30,color:"orange"});
    pieces.push({x:150,y:30,color:"green"});
    pieces.push({x:250,y:30,color:"blue"});
    for(var x=0;x<pieces.length;x++){
        drawPiece(x,false);
    }

    // draw the specified piece
    // stroke it in red if it's selected
    function drawPiece(pieceId,isStroked){
        if(pieceId<0){return;}
        var piece=pieces[pieceId];
        ctx.save();
        ctx.beginPath();
        ctx.fillStyle=piece.color;
        ctx.rect(piece.x,piece.y,pieceSize,pieceSize);
        ctx.fill();
        ctx.strokeStyle=(isStroked ? "red" : "black");
        ctx.lineWidth=6;
        ctx.stroke();
        ctx.fillStyle="white";
        ctx.font = 'italic 18px Calibri';
        ctx.fillText("Box#"+pieceId,piece.x+15,piece.y+25);
        ctx.restore();
    }

    function hitTest(x,y){
        var hit=-1;
        for(var pieceId=0;pieceId<pieces.length;pieceId++){
            piece=pieces[pieceId];
            var isHit=!(x<piece.x || x>(piece.x + pieceSize) || y<piece.y || y>(piece.y + pieceSize));
            if(isHit){
                hit=pieceId;
                break; // Hit! We're outta here...   
            }
        }
        return(hit); // returns piece# if hit else -1 to indicate no hits
    }

    function handleMouseUp(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);

      // de-highlight previous selection, if any
      drawPiece(selectedPiece,false)

      // did we hit a piece?
      var hit=hitTest(canMouseX,canMouseY);

      // if no-hit, the user clicked outside a box
      // so clear the selectedPiece and we're outta here
      if(hit<0){
          drawPiece(selectedPiece,false)
          selectedPiece=-1;
          return;
      }

      // Hit!
      // if no previous selection, 
      // set selectedPiece and highlight selectedPiece
      if(selectedPiece<0){
              selectedPiece=hit;
              drawPiece(selectedPiece,true);
      }
      // else, there was a piece already selected
      // so swap these pieces!
      else{
          var s=pieces[selectedPiece];
          var h=pieces[hit];
          var temp={x:s.x, y:s.y}; 
          s.x=h.x;
          s.y=h.y;
          h.x=temp.x;
          h.y=temp.y;
          drawPiece(selectedPiece,false);
          drawPiece(hit,false);
          selectedPiece=-1; // clear 
      }

    }  // end handleMouseDown()

    $("#canvas").mouseup(function(e){handleMouseUp(e);});

}); // end $(function(){});
</script>

</head>

<body>
    <br/><p>Click once to select a box</p>
    <p>Click a second box to swap the boxes</p>
    <canvas id="canvas" width=400 height=300></canvas>
</body>
</html> 
```

# c++ - 比较队列和堆栈的内容

> ID：15176970
> 
> 赞同：1
> 
> 时间：2013-03-02T16:52:34.913
> 
> 标签：c++, recursion, stack, queue, equality

假设我们在 c++ 中，使用 STL Stack 和 Queue

```
 Stack:      [1 2 3 4 5] <=>
    Queue:   => [5 4 3 2 1] => 
```

递归检查数据条目在内容和顺序方面是否相同的最优雅方法是什么？假设上面显示的堆栈和队列具有相同的数据和相同的顺序。

我在概念上理解要做什么时遇到问题，因为数据 pop() 的顺序相反。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:58:52.800

如果通过递归，您的意思不是递归函数调用，而只是循环，那么这里有一个答案。该函数首先检查堆栈和队列的大小是否相同。如果它们的大小不同，则函数返回 false。该函数有一个本地堆栈对象，该对象获取堆栈参数的元素，以便以与传入的堆栈参数相反的顺序弹出。然后循环检查堆栈和队列的每个前/顶部元素是否相等。如果相等，则循环继续到下一次迭代。如果不相等，则函数返回 false。如果循环结束但没有返回 false，则函数返回 true。

```
#include <iostream>
#include <stack>
#include <queue>
using namespace std;

bool check(stack<int> stackPar, queue<int> queuePar)
{

    if (stackPar.size() != queuePar.size())
    {
        return false;
    }

    stack<int> reverseStack;

    for (int i = 0, initialSize = stackPar.size(); i < initialSize; ++i)
    {
        reverseStack.push(stackPar.top());
        stackPar.pop();
    }

    for (int i = 0; i < reverseStack.size(); ++i)
    {
        if (reverseStack.top() == queuePar.front())
        {
            reverseStack.pop();
            queuePar.pop();
        }
        else
        {
            return false;
        }
    }
    return true;
}

int main()
{
    stack<int> myStack;
    queue<int> myQueue;

    for(int i = 1; i <= 5; ++i)
    {
        myStack.push(i);
        myQueue.push(i);
    }

    cout << "Stack and queue are ";
    cout << ( check(myStack, myQueue) ? "equal." : "not equal." ) << endl;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T17:38:04.340

不需要递归，这将是对资源的无用浪费。无需改变你的`queue`and `stack`（换句话说，这甚至适用于`const`'s ）。

假设您`std::stack`和两者在内部使用相同类型的底层容器（如果您使用默认`std::queue`容器，则应该是），那么您可以访问两者的受保护成员（您的真实容器）并使用 operator 比较它们：`std::dequeue``c``queue``stack``==`

```
#include <iostream>
#include <queue>
#include <stack>

template<typename Adapter>
typename Adapter::container_type const& getContainer(const Adapter& adapter) {
  struct AccessProtected : private Adapter {
    static typename Adapter::container_type const& getContainer(const Adapter& adapter) { return adapter.*&AccessProtected::c; }
  };
  return AccessProtected::getContainer(adapter);
}

int main() {
  std::queue<int> queue;
  std::stack<int> stack;
  for (int i = 0; i < 10; ++i) {
    queue.push(i);
    stack.push(i);
  }
  std::cout << (getContainer(queue) == getContainer(stack) ? "equal" : "not equal") << std::endl;
  return 0;
} 
```

`queue`现在，如果您使用不同的容器类型作为and的底层实现`stack`，您仍然可以使用相同`getContainer()`的技术来获取按相同顺序排序的容器：两者`queue::push()`并`stack::push()`调用底层容器的`push_back()`方法，只有当您`pop()`（和类似操作）反转发生在`stack`. 由于这些底层容器的顺序相同，因此您可以更轻松地进行比较（留给读者作为练习；））。

**信用：**我懒得重新实现一个受保护的成员访问器，所以我无耻地复制和修改[了这个](https://stackoverflow.com/questions/1185252/is-there-a-way-to-access-the-underlying-container-of-stl-container-adaptors)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T17:18:09.263

部分递归的解决方案是递归地将队列中的所有元素弹出到辅助堆栈中，然后检查辅助堆栈和原始堆栈是否相同。这种检查也可以递归地进行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-01T07:01:04.450

你可能不会同时弹出它们，你可以尝试弹出一个（使用记录它的东西）ADT（不要弹出队列，弹出堆栈），然后到基数（大小==1），然后你比较并对队列进行一些更改, 并返回。然后在每次递归调用后对记录器和当前队列的前面做一些事情，你会找到答案。

# c++ - 用于图像缩放的双三次插值算法

> ID：15176972
> 
> 赞同：11
> 
> 时间：2013-03-02T16:52:38.520
> 
> 标签：c++, image, algorithm, image-processing, bicubic

我正在尝试编写一个基本的双三次调整大小算法来调整 24 位 RGB 位图的大小。**[我对所涉及的数学](http://www.paulinternet.nl/?page=bicubic)**有一个大致的了解，并且我使用Google Code 中的[**这个实现**](http://code.google.com/a/eclipselabs.org/p/bicubic-interpolation-image-processing/source/browse/trunk/libimage.c)作为指导。我在这里没有使用任何外部库——我只是在试验算法本身。位图表示为普通的`std::vector<unsigned char>`：

```
inline unsigned char getpixel(const std::vector<unsigned char>& in, 
    std::size_t src_width, std::size_t src_height, unsigned x, unsigned y, int channel)
{
    if (x < src_width && y < src_height)
        return in[(x * 3 * src_width) + (3 * y) + channel];

    return 0;
}

std::vector<unsigned char> bicubicresize(const std::vector<unsigned char>& in, 
    std::size_t src_width, std::size_t src_height, std::size_t dest_width, std::size_t dest_height)
{
    std::vector<unsigned char> out(dest_width * dest_height * 3);

    const float tx = float(src_width) / dest_width;
    const float ty = float(src_height) / dest_height;
    const int channels = 3;
    const std::size_t row_stride = dest_width * channels;

    unsigned char C[5] = { 0 };

    for (int i = 0; i < dest_height; ++i)
    {
        for (int j = 0; j < dest_width; ++j)
        {
            const int x = int(tx * j);
            const int y = int(ty * i);
            const float dx = tx * j - x;
            const float dy = ty * i - y;

            for (int k = 0; k < 3; ++k)
            {
                for (int jj = 0; jj < 4; ++jj)
                {
                    const int z = y - 1 + jj;
                    unsigned char a0 = getpixel(in, src_width, src_height, z, x, k);
                    unsigned char d0 = getpixel(in, src_width, src_height, z, x - 1, k) - a0;
                    unsigned char d2 = getpixel(in, src_width, src_height, z, x + 1, k) - a0;
                    unsigned char d3 = getpixel(in, src_width, src_height, z, x + 2, k) - a0;
                    unsigned char a1 = -1.0 / 3 * d0 + d2 - 1.0 / 6 * d3;
                    unsigned char a2 = 1.0 / 2 * d0 + 1.0 / 2 * d2;
                    unsigned char a3 = -1.0 / 6 * d0 - 1.0 / 2 * d2 + 1.0 / 6 * d3;
                    C[jj] = a0 + a1 * dx + a2 * dx * dx + a3 * dx * dx * dx;

                    d0 = C[0] - C[1];
                    d2 = C[2] - C[1];
                    d3 = C[3] - C[1];
                    a0 = C[1];
                    a1 = -1.0 / 3 * d0 + d2 -1.0 / 6 * d3;
                    a2 = 1.0 / 2 * d0 + 1.0 / 2 * d2;
                    a3 = -1.0 / 6 * d0 - 1.0 / 2 * d2 + 1.0 / 6 * d3;
                    out[i * row_stride + j * channels + k] = a0 + a1 * dy + a2 * dy * dy + a3 * dy * dy * dy;
                }
            }
        }
    }

    return out;
} 
```

**问题**：当我使用此算法缩小图像时，除了输出图像由于某种原因在右侧包含所有黑色像素外，它可以工作，看起来它已被“裁剪”。

**例子：**

输入图像：

![在此处输入图像描述](../Images/51367649482fe7022aad41413b9647e2.png)

输出图像：

![在此处输入图像描述](../Images/82d9a3a885b0c3c7476a642c9e5fce28.png)

***问题***：**查看算法，我不明白为什么会发生这种情况。有人看到这里的缺陷吗？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-02T17:01:32.983

尽量不要交换宽度和高度。

```
 for (int i = 0; i < dest_width; ++i)
    {
        for (int j = 0; j < dest_height; ++j) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-27T06:17:07.800

我建议不要使用这个函数，因为它写得很糟糕。您需要进行两次卷积：首先按 X 坐标，然后按 Y。在此函数中，所有这些卷积同时进行，这会导致工作非常缓慢。如果您查看 jj 循环主体，您会注意到主体的所有第二部分都从“d0 = C[0] - C[1];”开始 可以移到 jj 循环之外，因为只有此循环的最后一次迭代对 out[] 数组生效（所有先前的迭代结果都将被覆盖）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-04T13:25:36.473

您应该在调用时切换`x`and ，并且应该使用以下方法对数组进行索引：`z``getpixel``getpixel`

```
[(y * 3 * src_width) + (3 * x) + channel] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-09T04:29:56.510

在`getpixel(in, src_width, src_height, z, x, k)`：

```
z mean horizontal offset
x mean vertical offset 
```

所以只需要修补这个`getpixel`功能，下面是修补后的代码：

```
inline unsigned char getpixel(const std::vector<unsigned char>& in, 
    std::size_t src_width, std::size_t src_height, unsigned y, unsigned x, int channel)
{
    if (x < src_width && y < src_height)
        return in[(y * 3 * src_width) + (3 * x) + channel];

    return 0;
}

std::vector<unsigned char> bicubicresize(const std::vector<unsigned char>& in, 
    std::size_t src_width, std::size_t src_height, std::size_t dest_width, std::size_t dest_height)
{
    std::vector<unsigned char> out(dest_width * dest_height * 3);

    const float tx = float(src_width) / dest_width;
    const float ty = float(src_height) / dest_height;
    const int channels = 3;
    const std::size_t row_stride = dest_width * channels;

    unsigned char C[5] = { 0 };

    for (int i = 0; i < dest_height; ++i)
    {
        for (int j = 0; j < dest_width; ++j)
        {
            const int x = int(tx * j);
            const int y = int(ty * i);
            const float dx = tx * j - x;
            const float dy = ty * i - y;

            for (int k = 0; k < 3; ++k)
            {
                for (int jj = 0; jj < 4; ++jj)
                {
                    const int z = y - 1 + jj;
                    unsigned char a0 = getpixel(in, src_width, src_height, z, x, k);
                    unsigned char d0 = getpixel(in, src_width, src_height, z, x - 1, k) - a0;
                    unsigned char d2 = getpixel(in, src_width, src_height, z, x + 1, k) - a0;
                    unsigned char d3 = getpixel(in, src_width, src_height, z, x + 2, k) - a0;
                    unsigned char a1 = -1.0 / 3 * d0 + d2 - 1.0 / 6 * d3;
                    unsigned char a2 = 1.0 / 2 * d0 + 1.0 / 2 * d2;
                    unsigned char a3 = -1.0 / 6 * d0 - 1.0 / 2 * d2 + 1.0 / 6 * d3;
                    C[jj] = a0 + a1 * dx + a2 * dx * dx + a3 * dx * dx * dx;

                    d0 = C[0] - C[1];
                    d2 = C[2] - C[1];
                    d3 = C[3] - C[1];
                    a0 = C[1];
                    a1 = -1.0 / 3 * d0 + d2 -1.0 / 6 * d3;
                    a2 = 1.0 / 2 * d0 + 1.0 / 2 * d2;
                    a3 = -1.0 / 6 * d0 - 1.0 / 2 * d2 + 1.0 / 6 * d3;
                    out[i * row_stride + j * channels + k] = a0 + a1 * dy + a2 * dy * dy + a3 * dy * dy * dy;
                }
            }
        }
    }

    return out;
} 
```

# c# - 多线程检查远程文件是否存在的性能问题

> ID：15176975
> 
> 赞同：0
> 
> 时间：2013-03-02T16:52:54.283
> 
> 标签：c#

```
void test()     //apply multithreading
    {
        ThreadPool.SetMaxThreads(int.Parse(TxtThread.Text), int.Parse(TxtThread.Text) + 10);
        foreach (string url in list_url)
        {
            ThreadPool.QueueUserWorkItem(new WaitCallback(CheckFile), url);
        }
    }

void CheckFile(object url)  //incoming url to check files exists or not
{
    HttpWebResponse response = null;
    foreach (string str in filenameArr)
    {
        try
        {
            string strUrlFile2 = UriFile(url.ToString(), str);
            response = Com.WebResponse(strUrlFile2);
            if (response.StatusCode == HttpStatusCode.OK && response.ContentType.ToLower() != "text/html")
                {

                }
        }
        catch (Exception ex)
        {
        }
        finally
        {
            if (response != null)
            {
                response.Close();
            }
        }
    }
}

public static HttpWebResponse WebResponse(string strUrlFile)    //check method
        {
            HttpWebRequest req = null;
            try
            {
                //System.GC.Collect();
                req = (HttpWebRequest)WebRequest.Create(strUrlFile);
                req.Method = "HEAD";
                req.Timeout = 100;
                req.ProtocolVersion = HttpVersion.Version11;
                req.AllowAutoRedirect = false;
                req.Accept = "*/*";
                req.KeepAlive = false;
                HttpWebResponse res = (HttpWebResponse)req.GetResponse();
                return res;
            }
            catch (Exception)
            {
                return null;
            }
        } 
```

list_url:url 数组列表

filenameArr:文件名字典数组

问题：</p>

1、过了一会儿，http请求检查telefile几次，任务没有完成，所有线程都停止了。

2、当线程池线程数增长到一定数量，且所有子线程操作的不是主UI线程，而是程序界面慢的现象

# android - 在后台更新上一个活动的 ListView

> ID：15176976
> 
> 赞同：0
> 
> 时间：2013-03-02T16:52:55.133
> 
> 标签：android, android-listview

我对我之前的 ListView 活动有疑问。

我有我的 ListView，它正在使用套接字连接继续更新，现在当我单击任何列表行时，我现在可以进入下一个屏幕，当我回到以前的 ListView 屏幕时，我的 ListView 再次开始更新，但我想保留当我在下一个屏幕上时，在后台更新我的 ListView。

当我在下一个屏幕上时，我想保持我以前的屏幕处于活动状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:03:40.360

在我看来，您用来加载数据的代码`ListView`与您的`Activity`. 例如，您有一个`AsyncTask`or包含您的`Thread`，并且您使用它来下载数据，或者做任何需要的事情来获取数据以填充列表。我还假设您在其中一种生命周期方法中启动它，例如.`Activity``ListView``Activity``onCreate()`

如果是这种情况，那么您应该考虑将用于获取列表数据的代码与您的活动代码分开。

做到这一点的一种方法是使用`Service`能够独立于应用程序的其余部分运行的 a，并完成所有与获取列表数据有关的繁重工作。您可以从应用程序中的任何位置与服务进行通信。可以将`Service`数据保存到数据库中。然后，您在 Activity 中所要做的就是查询数据库并填充适配器以立即获取最新数据。

您可以在此处阅读有关服务的更多信息：http: [//developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T17:14:22.480

您可以（并且可能应该）按照 Paul 的建议进行操作，**或者**您可以更改为使用`Fragments`或切换屏幕的方式`ViewFlipper`。这样，您仍然可以在不同页面上 运行`AsyncTask`或执行其他操作。`Thread`

# r - 使用 R 连接到 PostgreSQL（在 Windows 中）

> ID：15176977
> 
> 赞同：4
> 
> 时间：2013-03-02T16:53:01.847
> 
> 标签：r, postgresql

我有这个 R 代码，我想使用 conf 文件连接到 postgres 数据库：

```
con <- dbConnect(PostgreSQL(), groups='epl') 
```

postgresql.conf 文件包含：

```
#------------------------------------------------------------------------------
# CUSTOMIZED OPTIONS
#------------------------------------------------------------------------------

# Add settings for extensions here
[epl]
host='localhost'
port = 5432
dbname='rlearning'
user='user'
password='pass' 
```

当我运行 R 代码时，我得到这个错误：

```
Error in postgresqlNewConnection(drv, ...) : 
  unused argument(s) (groups = "epl") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T17:01:20.207

如果一切都失败了，您可以尝试阅读文档并按照示例进行操作。对于`help(dbConnect)`，你发现

```
# create an PostgreSQL instance and create one connection.
drv <- dbDriver("PostgreSQL")

# open the connection using user, passsword, etc., as
con <- dbConnect(drv, dbname = "postgres") 
```

这是您添加其他用户、密码、主机、参数的地方。

它还将向您*表明，没有任何论据`groups`*可以解释您得到的错误。

# javascript - 我如何发送对象作为参数 Javascript

> ID：15176978
> 
> 赞同：0
> 
> 时间：2013-03-02T16:53:05.400
> 
> 标签：javascript, arrays

我需要传递一个数组作为参数，但我有一个问题，我不知道如何解释，所以这里是示例：

我有这个代码：

```
var doc = document;

    var Class = {};

    Class.Validate = function(opc)
    {
        alert(opc.id);//
return Class;// when returns the object the alert trigger as expected showing "#name"
    };

Class.Validate({
    id: "#name",
}) 
```

但我想做的是：

```
var Class = {};
    Class.Validate = function(opc)
    {
        alert(opc.name);//when the object is return show display "carlosmaria"
return Class;//

    };

Class.Validar({
    name: {field:"carlos",field:"maria"},
}) 
```

我怎样才能存档呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T17:03:42.087

alert(opc.name) 应该返回类似 {Object object} 的内容，因为它是一个对象。第二点是您的对象具有两次“字段”作为属性。

如果你想使用一个数组，你应该这样调用：

```
Class.Validar({
    name: ["carlos", "maria"]
}) 
```

然后，您可以遍历 opc.name 以连接全名。像这样的东西：

```
Class.Validate = function(opc)
{
    var name = "";
    for (var i=0, len=opc.name.length; i<len; ++i) {
        name += opc.name[i];
    }
    alert(name);//when the object is return show display "carlosmaria"
    return Class;//
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T16:59:57.760

考虑使用实际[数组](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)（通过[数组文字](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values%2C_variables%2C_and_literals#Array_literals)）：

```
Class.Validate({
     name: ["carlos", "maria"]
}); 
```

# android - 将字符串从java传递到c++并使用带有NDK大小写错误的popen？

> ID：15176988
> 
> 赞同：1
> 
> 时间：2013-03-02T16:53:58.217
> 
> 标签：android, c++, c, android-ndk, java-native-interface

我正在使用 NDK 将 java 与 C++ 结合起来，这是我的代码：

**MainActivity.java**

```
public class MainActivity extends Activity {

/*Don't forget to load the library!!*/
static {
    System.loadLibrary("NDK1");
}

public native String exec(String cmd); 
```

**安卓.mk**

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
 # Here we give our module name and source file(s)
LOCAL_MODULE    := NDK1
LOCAL_SRC_FILES := NDK1.cpp
include $(BUILD_SHARED_LIBRARY) 
```

**应用程序.mk**

```
APP_ABI := armeabi armeabi-v7a
APP_STL := gnustl_static 
```

**NDK1.cpp**

```
#include <string>
#include <iostream>
#include <stdio.h>
 #include <jni.h>

   std::string exec(char* cmd) {
  FILE* pipe = popen(cmd, "r");
  if (!pipe) return "ERROR";
 char buffer[128];
 std::string result = "";
 while(!feof(pipe)) {
     if(fgets(buffer, 128, pipe) != NULL)
     result += buffer;
 } 
 pclose(pipe);
 return result;
}

  jstring Java_com_example_ndk1_MainActivity_exec(JNIEnv* env, jobject javaThis , jstring   cmd) {
char * res;

    res = env->GetStringUTFChars(cmd ) ;

std::string result = exec(res);
  return env->NewStringUTF(result);
 } 
```

但是有这个错误！

```
 $ /cygdrive/c/android-ndk-r4/ndk-build
   make: Warning: File `/cygdrive/c/android-ndk-r4/build/core/import-locals.mk' has    modification time 140680622 s in the future
 Compile++ thumb  : NDK1 <= NDK1.cpp
 jni/NDK1.cpp: In function '_jstring* Java_com_example_ndk1_MainActivity_exec(JNIEnv*,   jobject, jstring)':
 jni/NDK1.cpp:22:39: error: no matching function for call to   '_JNIEnv::GetStringUTFChars(_jstring*&)'
 jni/NDK1.cpp:22:39: note: candidate is:
 C:/android-ndk-r4/platforms/android-14/arch-arm/usr/include/jni.h:860:17: note: char   const* _JNIEnv::GetStringUTFChars(jstring, jboolean*)
 C:/android-ndk-r4/platforms/android-14/arch-arm/usr/include/jni.h:860:17: note:     candidate expects 2 arguments, 1 provided
 jni/NDK1.cpp:25:36: error: no matching function for call to  '_JNIEnv::NewStringUTF(std::string&)'
 jni/NDK1.cpp:25:36: note: candidate is:
 C:/android-ndk-r4/platforms/android-14/arch-arm/usr/include/jni.h:854:13: note: _jstring*  _JNIEnv::NewStringUTF(char const*)
 C:/android-ndk-r4/platforms/android-14/arch-arm/usr/include/jni.h:854:13: note:   no known  conversion for argument 1 from 'std::string {aka std::basic_string<char>}' to 'char const*'
 /cygdrive/c/android-ndk-r4/build/core/build-binary.mk:269: recipe for target  `obj/local/armeabi/objs/NDK1/NDK1.o' failed
 make: *** [obj/local/armeabi/objs/NDK1/NDK1.o] Error 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T20:54:57.793

经过多次尝试解决问题后，这是解决方案而不会导致任何错误：

```
jstring Java_com_example_ndk1_MainActivity_exec(JNIEnv* env, jobject javaThis , jstring cmd) {
const char * res;

    jboolean isCopy;
    res = env->GetStringUTFChars(cmd, &isCopy);

    if (isCopy == JNI_TRUE) {
        (env)->ReleaseStringUTFChars(cmd, res);
    }

std::string result = exec(res);
return (env)->NewStringUTF((const char* )result.c_str());
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T16:59:39.363

[编辑以使答案更通用-代码中有几个错误]

对于该类型的每个错误，请在[JNI 参考](http://docs.oracle.com/javase/1.4.2/docs/guide/jni/spec/functions.html "JNI reference")`no matching function for call to`中查找函数的定义

确保您是：

*   传递所有必需的参数
*   参数是必需的类型

例如，调用`GetStringUTFChars`缺少参数，调用 `NewStringUTF`不接受`std::string`as 参数。它想要一个`const char *`.

对于`NewStringUTF`，请尝试：

`return (*env)->NewStringUTF(env, (const char*)result.c_str());`

这个 JNI 教程也不错： http: [//www.steveolyo.com/JNI/JNI.html](http://www.steveolyo.com/JNI/JNI.html)

# jquery - Twitter Bootstrap 附加导航栏 - 下面的 div 跳起来

> ID：15176990
> 
> 赞同：14
> 
> 时间：2013-03-02T16:54:20.430
> 
> 标签：jquery, css, twitter-bootstrap, affix

比较难描述问题。所以看看这个jsFiddle：

[http://jsfiddle.net/xE2m7/](http://jsfiddle.net/xE2m7/)

当导航栏固定到顶部时，内容会跳到它下面。

CSS：

```
.affix {
    position: fixed;
    top: 0px;
}
#above-top {
    height: 100px;
    background: black;
} 
```

哪里有问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-02T17:03:21.133

这里的问题是，无法将导航栏固定到顶部的导航栏下方的容器中的其余内容传达给其他内容。您可以使用更现代的 CSS 来实现这一点，但请注意，这不会是旧浏览器的修复程序（实际上，您可能会发现 postion:fixed 属性在旧浏览器中也存在问题......

```
.affix + .container {
    padding-top:50px
} 
```

这会等到导航栏固定，然后将填充添加到它的兄弟容器中，以防止它在导航下“跳跃”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-24T10:19:32.980

您还可以使用 Bootstrap 附加事件通过 CSS 类从相关元素中添加和删除填充（或边距）：

```
// add padding or margin when element is affixed
$("#navbar").on("affix.bs.affix", function() {
  return $("#main").addClass("padded");
});

// remove it when unaffixed
$("#navbar").on("affix-top.bs.affix", function() {
  return $("#main").removeClass("padded");
}); 
```

这是一个 JSFiddle：http: [//jsfiddle.net/mumcmujg/1/](http://jsfiddle.net/mumcmujg/1/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-09T19:26:14.810

我的解决方案受@niacurshi 的启发：

与其硬编码一个 padding-top，不如创建一个不可见的重复元素，它占用相同的空间，但仅在原始元素被附加时。

JS：

```
var $submenu = $(".submenu");

// To account for the affixed submenu being pulled out of the content flow.
var $placeholder = $submenu.clone().addClass("affix-placeholder");
$submenu.after($placeholder);

$submenu.affix(…); 
```

CSS：

```
.affix-placeholder {
  /* Doesn't take up space in the content flow initially. */
  display: none;
}

.affix + .affix-placeholder {
  /* Once we affix the submenu, it *does* take up space in the content flow. But keep it invisible. */
  display: block;
  visibility: hidden;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-17T22:02:45.230

如果您想避免重复的内容，另一种选择。

```
<script>
    jQuery(document).ready(function(){
        jQuery("<div class='affix-placeholder'></div>").insertAfter(".submenu:last");
    });
</script>

<style>
.affix-placeholder {
  display: none;
}
.affix + .affix-placeholder {
  display: block;
  visibility: hidden;
  height: /* same as your affix element */;
  width: 100%;
  overflow: auto;
}
</style> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-27T14:02:49.087

在其上方的部分周围添加标题包装器。并给包装器一个等于这些元素组合高度的最小高度。

例子：

```
<div class="header-wrapper" >
   <div class="topbar" >this bar is 36 pixels high</div>
   <div class="menubar">this menubar has a height of 80 pixels</div>
</div>

<div class="" >Your container moving upwards after the affix element becomes fixed</div> 
```

两个元素的高度 36 + 80 = 116 。标题包装器的最小高度应为 116 像素，请参阅：

```
.header-wrapper {
  min-height: 116px;
} 
```

非常简单整洁的解决方案

# regex - 正则表达式可选匹配

> ID：15176992
> 
> 赞同：0
> 
> 时间：2013-03-02T16:54:36.817
> 
> 标签：regex, perl

我在一个数组中有一些属于这种模式的字符串：

```
Aaaaa
Bbbbb (Ccccc)
Ddddd
Eeeee
Fffff (Ggggg) 
```

我想制作一个看起来像这样的新数组：

```
Aaaaa
Bbbbb
Ddddd
Eeeee
Fffff 
```

我能够将带有括号的模式与以下 Perl 正则表达式匹配：

```
$string =~ /(.*?)(\(.*?\))/;
push(@newarray, $1); 
```

但这不适用于那些没有括号中的文本的字符串。我已经尝试了其他一些来匹配可选的括号，但似乎没有一个有效：

```
$string =~ /(.*?)(?:\(.*?\))/;
$string =~ /(.*?)(\(.*?\))?/;
$string =~ /(.*?)(?:\(.*?\))?/; 
```

如果有人可以提供帮助，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:56:08.870

您正在寻找的模式是：

```
/^(.*?)(?: \(.*\))?\z/ 
```

如果您添加，您的最后两个将起作用`\z`。问题是`.*?`很高兴匹配零个字符。

* * *

解决方案：

```
my @b = @a;
s/ \(.*\)// for @b; 
```

或者

```
use List::MoreUtils qw( apply );
my @b = apply { s/ \(.*\)// } @a; 
```

或 (5.14+)

```
my @b = map s/ \(.*\)//r, @a; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T19:43:19.890

如果初始字符串中从来没有任何空格，那么你可以只写

```
my @newarray = map /^(\S+)/, @array; 
```

如果它可能包含空格，那么

```
my @newarray = map /^([^(]*[^\s(])/, @array; 
```

# android - 以时间间隔重复运行线程

> ID：15176994
> 
> 赞同：0
> 
> 时间：2013-03-02T16:54:56.920
> 
> 标签：android, multithreading

在我的 Android 应用程序中。我尝试使用一个线程在给定的时间间隔内重复做一些事情。我基本上想到了一个解决方案，如下所示。

```
public void run(){

     while(true){

       sleep(5000); 

       doSomeStuff();

      }
} 
```

但我想，这段代码在做我想做的事情时有一些逻辑问题。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T19:30:44.243

您可以尝试使用[Handler](http://developer.android.com/reference/android/os/Handler.html "处理程序")和[postDelayed](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)