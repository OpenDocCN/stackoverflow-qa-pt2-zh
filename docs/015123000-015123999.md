# StackOverflow 问答 15123000-15123999

# python - python在MySQL表名周围插入单引号（'）

> ID：15123001
> 
> 赞同：4
> 
> 时间：2013-02-27T21:42:52.390
> 
> 标签：python, mysql

我有一个名为 project1 的数据库，其中包含以下表格：

```
_systbl1
_systbl2
_systbl3
dataset1
dataset2
dataset3 
```

每当添加新表时，都需要授予 MySQL 用户 odbc 对 dataset% 表的 SELECT 权限。

为此，我使用了一个简单的 python 脚本，如下所示：

```
#!/usr/bin/python
import MySQLdb

db = MySQLdb.connect(
    host="localhost",
    user="user",
    passwd="pass",
    db="project1"
    )

    # Create Cursor Object
cur = db.cursor()

# get list of tables beginning with dataset
cur.execute("SHOW TABLES FROM project1 LIKE 'dataset%';")

# run GRANT statement for each table
for row in cur.fetchall() :
    cur.execute("GRANT SELECT ON `project1`.`%s` TO `odbc`@`localhost`;", row)
    cur.execute("GRANT SELECT ON `project1`.`%s` TO `odbc`@`%`;", row) 
```

不幸的是，它给了我以下错误：

```
Traceback (most recent call last):
  File "mysql_query.py", line 20, in <module>
    cur.execute("GRANT SELECT ON `project1`.`%s` TO `odbc`@`localhost`;", row)
  File "/usr/lib/python2.7/dist-packages/MySQLdb/cursors.py", line 174, in execute
    self.errorhandler(self, exc, value)
  File "/usr/lib/python2.7/dist-packages/MySQLdb/connections.py", line 36, in defaulterrorhandler
    raise errorclass, errorvalue
_mysql_exceptions.ProgrammingError: (1146, "Table 'project1.'dataset1'' doesn't exist") 
```

正如您在错误的最后一行中看到的，问题在于 python 在生成查询时在表名周围加上了一个单引号。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:46:37.640

不要对表名使用 SQL 参数。SQL 参数被数据库适配器转义，以不被解释为文字值。

您必须自己插入这些内容，但*绝对确定*您的表名不包含不受信任的数据（防止 SQL 注入攻击）：

```
cur.execute("GRANT SELECT ON `project1`.`%s` TO `odbc`@`localhost`;" % row)
cur.execute("GRANT SELECT ON `project1`.`%s` TO `odbc`@`%%`;" % row) 
```

（`%`授权中的字符已通过将其翻倍为 进行转义`%%`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:46:33.727

而是使用：

```
cur.execute("GRANT SELECT ON `project`.`%s` TO `odbc`@`localhost`" % row) 
```

这不会使用输入的正常转义。不过，请注意任何表名中的反引号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-27T00:17:55.477

```
sql = """CREATE TABLE IF NOT EXISTS `""" + project +  """` ( `id` INT(11) NOT NULL AUTO_INCREMENT, PRIMARY KEY (`id`))""" 
```

# python - 访问列表字典中的列表项

> ID：15123004
> 
> 赞同：0
> 
> 时间：2013-02-27T21:43:02.640
> 
> 标签：python, dictionary

我正在尝试创建一个数据结构来跟踪多年来每月发生的事件。我已确定列表字典是最佳选择。我想创建类似这样的结构（年份：代表每月出现次数的十二个整数的列表）：

```
yeardict = {
'2007':[0,1,2,0,3,4,1,3,4,0,6,3]
'2008':[0,1,2,0,3,4,1,3,5,0,6,3]
'2010':[7,1,3,0,2,6,0,6,1,8,1,4]
} 
```

我将一个如下所示的字典作为输入：

```
monthdict = {
'2007-03':4,
'2007-05':2,
'2008-02':8
etc.
} 
```

我让我的代码循环通过第二个字典，首先注意键（年份）中的前 4 个字符，如果字典中没有，那么我初始化该键以及列表中十二个空白月的值形式：[0,0,0,0,0,0,0,0,0,0,0,0]，然后将该月份位置列表中的项目的值更改为任何值。如果年份在字典中，那么我只想将列表中的项目设置为等于该月的值。我的问题是如何访问和设置字典中列表中的特定项目。我遇到了一些对谷歌没有特别帮助的错误。

这是我的代码：

```
 yeardict = {}
    for key in sorted(monthdict):
        dyear = str(key)[0:4]
        dmonth = str(key)[5:]
        output += "year: "+dyear+" month: "+dmonth
        if dyear in yeardict:
            pass
#            yeardict[str(key)[0:4]][str(key)[5:]]=monthdict(key)                
        else:
            yeardict[str(key)[0:4]]=[0,0,0,0,0,0,0,0,0,0,0,0]
#            yeardict[int(dyear)][int(dmonth)]=monthdict(key) 
```

被注释掉的两行是我想要实际设置值的地方，当我将它们添加到我的代码中时，它们会引入两个错误之一：1\. 'dict' 不可调用 2\. KeyError: 2009

让我知道我是否可以澄清任何事情。谢谢你的关注。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T21:56:27.327

这是我将如何写这个：

```
yeardict = {}
for key in monthdict:
    try:
        dyear, dmonth = map(int, key.split('-'))
    except Exception:
        continue  # you may want to log something about the format not matching
    if dyear not in yeardict:
        yeardict[dyear] = [0]*12
    yeardict[dyear][dmonth-1] = monthdict[key] 
```

请注意，我假设您的日期格式中的 January`01`不是`00`，如果不是这种情况，请在最后一行中使用`dmonth`而不是。`dmonth-1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:54:08.970

```
defaultlist = 12*[0]
years = {}
monthdict = {
'2007-03':4,
'2007-05':2,
'2008-02':8
}

for date, val in monthdict.items():
    (year, month) = date.split("-")
    occurences = list(years.get(year, defaultlist))
    occurences[int(month)-1] = val
    years[year] = occurences 
```

*实际上编辑*， defaultdict 无济于事。重新编写答案以执行默认获取并复制该列表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T21:56:54.190

这有你想要的行为吗？

```
>>> yeardict = {}
>>> monthdict = {
... '2007-03':4,
... '2007-05':2,
... '2008-02':8 }
>>> for key in sorted(monthdict):
...     dyear = str(key)[0:4]
...     dmonth = str(key)[5:]
...     if dyear in yeardict:
...         yeardict[dyear][int(dmonth)-1]=monthdict[key]
...     else:
...         yeardict[dyear]=[0]*12
...         yeardict[dyear][int(dmonth)-1]=monthdict[key]
... 
>>> yeardict
{'2008': [0, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], '2007': [0, 0, 4, 0, 2, 0, 0, 0, 0, 0, 0, 0]}
>>> 
```

# javascript - 存储大量数据的更好方法

> ID：15123014
> 
> 赞同：0
> 
> 时间：2013-02-27T21:43:32.277
> 
> 标签：javascript, arrays, function, select

我正在制作一个价目表，我有很多数据要解析。所有的数据都是不同的，没有公式。下面是我正在使用的一个片段。我想知道是否有更好的方法来存储和访问所有这些数据。

```
 function getPrice(number) {
    totalPrice = 0;
    for (var t = 2; t <= number; t++) {
        var ipp = 'cab' + (t - 1) + 'Size';
        var cabP = 'p' + (t - 1);
        var cabStyle = document.getElementById('cab' + (t - 1)).value;
        var cabs = document.getElementById(ipp);
        switch (cabStyle) {
            case 'b1':
                if (cabs.value === "") {
                    totalPrice = totalPrice + 0;
                    document.getElementById(ipp).style.border = "1px solid red";
                } else if (cabs.value <= 12) {
                    totalPrice = totalPrice + 111;
                    document.getElementById(cabP).innerHTML = " $111";
                    document.getElementById(ipp).style.border = "";
                } else if (cabs.value > 12 && cabs.value <= 13.5) {
                    totalPrice = totalPrice + 113;
                    document.getElementById(cabP).innerHTML = " $113";
                    document.getElementById(ipp).style.border = "";
                } else if (cabs.value > 13.5 && cabs.value <= 15) {
                    totalPrice = totalPrice + 116;
                    document.getElementById(cabP).innerHTML = " $116";
                    document.getElementById(ipp).style.border = "";
                } else if (cabs.value > 15 && cabs.value <= 16.5) {
                    totalPrice = totalPrice + 118;
                    document.getElementById(cabP).innerHTML = " $118";
                    document.getElementById(ipp).style.border = "";
                } else if (cabs.value > 16.5 && cabs.value <= 18) {
                    totalPrice = totalPrice + 120;
                    document.getElementById(cabP).innerHTML = " $120";
                    document.getElementById(ipp).style.border = "";
                } else if (cabs.value > 18 && cabs.value <= 19.5) {
                    totalPrice = totalPrice + 122;
                    document.getElementById(cabP).innerHTML = " $122";
                    document.getElementById(ipp).style.border = "";
                } else if (cabs.value > 19.5 && cabs.value <= 21) {
                    totalPrice = totalPrice + 124;
                    document.getElementById(cabP).innerHTML = " $124";
                    document.getElementById(ipp).style.border = "";
                } else if (cabs.value > 21 && cabs.value <= 22.5) {
                    totalPrice = totalPrice + 126;
                    document.getElementById(cabP).innerHTML = " $126";
                    document.getElementById(ipp).style.border = "";
                } else if (cabs.value > 22.5 && cabs.value <= 24) {
                    totalPrice = totalPrice + 141;
                    document.getElementById(cabP).innerHTML = " $141";
                    document.getElementById(ipp).style.border = "";
                } else if (cabs.value > 24 && cabs.value <= 27) {
                    totalPrice = totalPrice + 146;
                    document.getElementById(cabP).innerHTML = " $146";
                    document.getElementById(ipp).style.border = "";
                } else if (cabs.value > 27 && cabs.value <= 30) {
                    totalPrice = totalPrice + 152;
                    document.getElementById(cabP).innerHTML = " $152";
                    document.getElementById(ipp).style.border = "";
                }
                break;
            case 'b2':
                if (cabs.value === "") {
                    totalPrice = totalPrice + 0;
                    document.getElementById(ipp).style.border = "1px solid red";
                } else if (cabs.value <= 27) {
                    totalPrice = totalPrice + 167;
                    document.getElementById(cabP).innerHTML = " $167";
                    document.getElementById(ipp).style.border = "";
                } else if (cabs.value > 27 && cabs.value <= 30) {
                    totalPrice = totalPrice + 173;
                    document.getElementById(cabP).innerHTML = " $173";
                    document.getElementById(ipp).style.border = "";
                } else if (cabs.value > 30 && cabs.value <= 33) {
                    totalPrice = totalPrice + 178;
                    document.getElementById(cabP).innerHTML = " $178";
                    document.getElementById(ipp).style.border = "";
                } else if (cabs.value > 33 && cabs.value <= 36) {
                    totalPrice = totalPrice + 183;
                    document.getElementById(cabP).innerHTML = " $183";
                    document.getElementById(ipp).style.border = "";
                } else if (cabs.value > 36 && cabs.value <= 39) {
                    totalPrice = totalPrice + 194;
                    document.getElementById(cabP).innerHTML = " $194";
                    document.getElementById(ipp).style.border = "";
                } else if (cabs.value > 39 && cabs.value <= 42) {
                    totalPrice = totalPrice + 199;
                    document.getElementById(cabP).innerHTML = " $199";
                    document.getElementById(ipp).style.border = "";
                } else if (cabs.value > 42 && cabs.value <= 45) {
                    totalPrice = totalPrice + 205;
                    document.getElementById(cabP).innerHTML = " $205";
                    document.getElementById(ipp).style.border = "";
                }
                break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:54:22.157

重新排列一些代码可能会有所帮助。例如，该`document.getElementById(ipp).style.border`行在所有块中都是相同的，除了第一个。因此，您可以将其取出并单独制作一个块：

```
document.getElementById(ipp).style.border = cabs.value ? "" : "1px solid red"; 
```

然后看起来你的`b1`出租车可以这样安排：

```
cabdata = [111,113,116,118,120,122,124,126,141,146,146,152,152];
// note duplicate values at end due to bigger interval
cabindex = Math.max(0,Math.ceil((cabs.value-12)/1.5));
totalPrice += cabdata[cabindex];
document.getElementById(cabP).innerHTML = " $"+cabdata[cabindex]; 
```

同样对于`b2`：

```
cabdata = [167,173,178,183,194,199,205];
cabindex = Math.max(0,Math.ceil((cabs.value-27)/3));
totalPrice += cabdata[cabindex];
document.getElementById(cabP).innerHTML = " $"+cabdata[cabindex]; 
```

另请注意，上述两个块中的最后两行相同，因此可以将它们移动到`switch`.

总有一个公式，尽管它可能不是那么简单。示例：[蝙蝠侠公式](http://uploads.neatorama.com/wp-content/uploads/2011/07/small_batmath-499x516.jpg)

# jquery - 如果在拖动操作期间显示可放置的项目，则不显示 hoverClass

> ID：15123019
> 
> 赞同：3
> 
> 时间：2013-02-27T21:43:55.533
> 
> 标签：jquery, jquery-ui, drag-and-drop, jquery-ui-draggable, jquery-ui-droppable

我知道标题令人困惑，但问题很容易重现。

我的页面上有一些可放置的元素（jQueryUI），当它们被拖过时会显示悬停类。但是，我有一些隐藏元素有时会在拖动过程中显示出来，然后不会像应有的那样用它们的 hoverClass 响应。

我在这里有一个 jsFiddle[**来**](http://jsfiddle.net/ControlFreak/CsXpL/)显示这种情况，但是，如果您继续拖动 div，最终 listItems 开始显示它们的 hoverClass。但是，在我的网站上，这从未发生过…… hoverClass 从未出现在新显示的项目上。

HTML

```
<ul>
    <li>Row1</li>
    <li>Row2</li>
    <li>Row3<span id="More">MORE...</span></li>
    <li style="display: none;">Row4</li>
    <li style="display: none;">Row5</li>
</ul>
<div id="DragMe">DragMe!</div> 
```

CSS

```
#DragMe {
    position: absolute;
    height: 100px;
    width: 100px;
    border: 1px solid black;
    background-color: RGBA(255,255,255,0.5);
}
.DragOver {
    background-color: #000000;
    color: #FFFFFF;
}
#More {
    margin-left: 10px;
} 
```

JavaScript

```
$('#DragMe').draggable({
    cursorAt: {top: 50, left: 50}
});

$('li').droppable({
    hoverClass: 'DragOver'
});

$('#More').droppable({
    over: function() {
        $('li').show();
    }
}); 
```

有什么我可以改变以使其正常工作的吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T16:11:39.657

我猜想 jQuery UI 有一个 bug 可以处理可放置的隐藏元素。一种解决方法可能是使用不透明度：

HTML

```
...
<li class="hidden">Row4</li>
<li class="hidden">Row5</li>
... 
```

CSS

```
.hidden{
    opacity: 0;
} 
```

JS

```
$('#More').droppable({
    over: function() {
        $('li.hidden').removeClass('hidden');
    }
}); 
```

演示：http: [//jsfiddle.net/CsXpL/2/](http://jsfiddle.net/CsXpL/2/)

**编辑**

你欠我一杯冰镇啤酒！Draggable 有以下选项：`refreshPositionsType`说：

`If set to true, all droppable positions are calculated on every mousemove. Caution: This solves issues on highly dynamic pages, but dramatically decreases performance.`.

链接：[http ://api.jqueryui.com/draggable/#option-refreshPositions](http://api.jqueryui.com/draggable/#option-refreshPositions)

所以解决方案是：

```
$('#DragMe').draggable({
    cursorAt: {top: 50, left: 50},
    refreshPositions: true
}); 
```

演示：http: [//jsfiddle.net/CsXpL/9/](http://jsfiddle.net/CsXpL/9/)

# c++ - 我覆盖此方法的方式有什么问题？

> ID：15123029
> 
> 赞同：-1
> 
> 时间：2013-02-27T21:44:55.063
> 
> 标签：c++, inheritance, overriding

我正在尝试构建一个光线追踪器。我有一个名为 Shape 的类，我将其扩展到 Sphere 类（以及其他形状，如三角形）。形有法

```
virtual bool intersect(Ray) =0; 
```

所以我创建了 Sphere 类

```
class Sphere : public Shape{
public:
    Sphere(){};
    bool intersect(Ray){/*code*/};
}; 
```

我有一个主类，用于创建形状指针列表。我创建一个球体指针并执行以下操作：

```
Sphere* sph = &Sphere();
shapes.emplace_front(sph); //shapes is a list of Shape pointers 
```

然后，当我想在另一个类中跟踪射线时，我执行以下操作：

```
for (std::list<Shape*>::iterator iter=shapes.begin(); iter != shapes.end(); ++iter) {
    Shape* s = *iter;
    bool hit = (*s).intersect(ray);
} 
```

但是我得到了我不能在虚拟类 Shape 上调用 intersect 的错误，即使它应该是 *s 指向一个 Sphere 类型的对象。我在继承方面做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T21:52:48.017

一个问题是：

```
Sphere *sph = &Sphere(); 
```

它创建一个类型为 的临时对象`Sphere`，存储指向该临时对象的指针，然后销毁该临时对象。结果是胡说八道。

将其更改为：

```
Sphere *sph = new Sphere(); 
```

事情会好得多。

# javascript - 如何从 Javascript 访问 HTTP 请求标头？

> ID：15123031
> 
> 赞同：0
> 
> 时间：2013-02-27T21:45:01.510
> 
> 标签：javascript, browser, jqxhr

我正在使用 Chrome 进行开发，但我认为我的问题中没有任何特定于浏览器的内容。

我正在编写一个需要了解浏览器使用的语言的 Javascript 应用程序。据此[，](https://stackoverflow.com/questions/1043339/javascript-for-detecting-browser-language-preference)我不应该使用`navigator.language`；我应该改为执行一些虚拟 ajax 请求并查看浏览器在请求的`Accept-Language`标头中放置了什么。

据我所知，没有办法以编程方式访问 ajax 请求的请求标头。我在请求的成功回调中返回的 xhr 对象有一个名为 的方法`getAllResponseHeaders()`，但没有提及请求标头。

如果这是获取用户语言偏好的正确方法，那么我一定遗漏了一些明显的东西。如何`Accept-Language`从 Javascript 中访问标头？或者，如果我正在做的事情就像我认为的那样迂回，那么找出用户语言偏好的更简单方法是什么？

# linux - 登录到非阻塞命名管道？

> ID：15123034
> 
> 赞同：6
> 
> 时间：2013-02-27T21:45:08.123
> 
> 标签：linux, bash, logging, pipe, fifo

我有一个问题，我在 stackoverflow 或网络上的任何地方都找不到帮助。

我有一个程序（芹菜分布式任务队列），我有多个实例（工作者），每个实例都有一个日志文件（celery_worker1.log，celery_worker2.log）。

重要的错误存储到数据库中，但我喜欢在运行新操作时不时跟踪这些日志，以确保一切正常（日志级别较低）。

我的问题：这些日志占用了大量磁盘空间。我想做的事：只有在我需要的时候才能“观看”日志（tail -f），而不会占用大量空间。

到目前为止我的想法：

*   将日志输出到标准输出，而不是文件：这里不可能，因为我有很多工作人员输出到不同的文件，但我想一次将它们全部拖尾（tail -f celery_worker*.log）
*   使用 logrotate: 这对我来说是一个“OK”的解决方案。我不希望这是一项日常任务，但宁愿不为此投入一分钟的 crontab，而且服务器不是我的，因此这意味着在 admin-sys 方面有一些工作
*   使用命名管道：第一眼看起来不错，但我不知道命名管道（linux FIFO）在哪里阻塞。因此，当我不同时对所有管道进行尾部处理时，或者当我刚刚退出尾部处理时，记录器的写入操作将被阻止。

有没有办法拥有一个非阻塞的命名管道，它只会在有尾时抛出到标准输出，而在没有尾时抛出到 /dev/null？

或者这种类型的管道有技术困难吗？如果有，它们是什么？

谢谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:13:26.210

您可以尝试共享内存设备[man:shm_overview](http://www.kernel.org/doc/man-pages/online/pages/man7/shm_overview.7.html)或者其中的一些。您需要将它们组织为循环缓冲区，以便它们存储日志的最后 N kb，并且每当您使用阅读器读取它们时，它都会将所有内容输出到您的控制台。busybox 的 syslog/logread 套装采用了这种方法（参见[logread.c](http://code.metager.de/source/xref/busybox/sysklogd/logread.c)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:50:46.110

让每个工作人员记录到标准输出，但将每个标准输出连接到一个实用程序，该实用程序会根据大小或时间自动假脱机和轮换日志。 [multilog](http://cr.yp.to/daemontools/multilog.html)和[svlogd](http://smarden.org/runit/svlogd.8.html)就是这样的例子。对于这些程序，您只需跟踪“当前”日志文件。

你是对的，logrotate 并不是你所遇到问题的正确解决方案。

命名管道无法按您的意愿工作。充其量，您的作者可以填满他们的管道，然后丢弃后续日志，这与您想要的行为相反。

# jquery - jquery 我正在寻找 td 内的所有 div id，如果 id == "" 然后隐藏 div id 的行

> ID：15123041
> 
> 赞同：0
> 
> 时间：2013-02-27T21:45:34.817
> 
> 标签：jquery, javascript

jquery 我正在寻找 td 内的所有 div id，如果 id == "" 然后隐藏 div id 的行，到目前为止，我的 html 脚本看起来像这样，但脚本没有在 TD 内找到 div id；

我还在底部包含了脚本，并相信我的问题是识别我将其分配为 #div 的“div id”，但它仍然无法正常工作。

```
<html>
<head>
<title></title>
<style type="text/css">
    .style2
    {
        width: 84px;
    }
    .style3
    {
        width: 91px;
    }
    .style4
    {
        width: 86px;
    }
</style>
</head>
<body>
<div style="height: 254px; width: 406px">
    <table id="test" border="2" style="width: 78%; height: 181px;">
        <tr>
            <td class="style4">
                Test</td>
            <td class="style2">
                Test</td>
            <td class="style3">
                Test</td>
        </tr>
        <tr id="EN" >
            <td colspan="3" ><hr><div id="EN-TXT">English</div></td>
        </tr>
        <tr id="ES">
            <td colspan="3" ><hr><div id=""></div></td>
        </tr>
        <tr id="PT">
            <td colspan="3" ><hr><div id="PT-TXT">Portuguese</div></td>
        </tr>
        <tr id="FR" style="display:none">
            <td colspan="3" ><hr><div id="FR-TXT">French</div></td>
        </tr>
        <tr>
            <td colspan="3">Footer</td>
        </tr>
    </table>
</div>
<script src="http://code.jquery.com/jquery-1.5.js"></script>
        <script type="text/javascript">
                $('td').each(function() {
                   if ($(this).find('#div').text()=="") {
                       $(this).closest('tr').hide();
                }
         });
</script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:49:00.023

```
// hides the div with id=''
$('td > div[id=""]').closest('tr').hide(); 
```

[http://jsfiddle.net/4Yvjj/](http://jsfiddle.net/4Yvjj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:47:50.737

尝试这个：

```
$('td').each(function() {
    if ($(this).find('div').attr("id")=="") {
         $(this).closest('tr').hide();
    }
}); 
```

# c++ - 某种类型的泛型类变量

> ID：15123045
> 
> 赞同：-2
> 
> 时间：2013-02-27T21:46:02.013
> 
> 标签：c++, class, generics, types, where

在 C# 中，我可以这样定义：

```
public interface BaseObject
{
    int GetValue();
}

public class Test<T> where T : BaseClass
{
    T BaseObject;
} 
```

这意味着我知道我总是可以调用 BaseObject.GetValue() / BaseObject->GetValue(); 因为我知道baseobject有这个方法。

在 C++ 中是否有类似的方法可以做到这一点？这样我就可以定义一个多个类可以继承的接口和一个可以利用这一点的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:13:54.793

您在询问*C++ 概念*，这是一种指定模板参数要求的方法。它们是在 C++11 工作期间提出的，但事实证明它们足够复杂，以至于没有及时完成。但他们只是被推迟了，没有被遗忘。

同时，duck 类型仍然非常强大，当您传递一个没有所需接口的模板参数时，它会捕获。它只是不会整齐地报告问题。

作为一种解决方法，检查您显示的约束的一种简单方法利用了指针转换仅在向上转换时是隐式的这一事实：

```
public class Test<T> where T : BaseClass
{
    static T* enforcement_helper = 0;
    static BaseClass* enforce_inheritance_constraint = enforcement_helper;

}; 
```

根据您的编译器的新程度，您可能需要将这些行放在一个特殊的成员函数中（析构函数很好，因为它几乎总是被处理）。

但是您应该只检查约束以改进错误消息（通过在明确注释的代码部分中导致失败）。C++ 模板是鸭子类型的，它们可以使用任何提供所需操作的模板参数。不需要正式的“界面”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:48:15.953

模板，它比 C# 泛型更强大（并不是说它们一定*更好*，只是不同）。

```
template<class T>
class foo
{
public:
    int whatever() 
    { 
        return obj.GetValue();
    }
private:
    T obj;
}; 
```

为您使用的每个模板参数创建一个单独的类。如果您提供的模板类型会导致错误，您将在编译时知道。

# html - 动态添加tabindex

> ID：15123054
> 
> 赞同：35
> 
> 时间：2013-02-27T21:46:24.227
> 
> 标签：html, jquery, accessibility, tabindex

我想添加`tabindex`到所有表单元素。该表单是动态的，我无法将其添加到 HTML。我想将它作为一个函数运行。

如果有多个同名单选按钮，则每个单选按钮都必须有自己的`tabindex`值。页面上的大多数表单元素都以 开头`<input>`，除了`<select>`. 我该如何解释呢？

我想我需要运行一个循环并添加属性，对吧？

```
var n = 1; 

$('input, select').each(function() {               
    $(this).attr('tabindex', n++);
}); 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-27T22:05:30.417

奇怪的问题，但这是基本的想法：

```
$(":input:not(:hidden)").each(function (i) { $(this).attr('tabindex', i + 1); }); 
```

这使用[:input](http://api.jquery.com/input-selector/)来获取包括按钮和文本区域在内的所有内容。`:not(:hidden)`只会排除隐藏的输入以避免不必要的选项卡。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-07-26T21:54:45.357

最好避免`n++`设置不同的`tabindex`数字。

相反，尝试设置`tabindex`为`0`：

```
$(':input:visible').each(function() {               
    $(this).attr('tabindex', '0');
}); 
```

> `tabindex="0"`意味着元素在顺序键盘导航中应该是可聚焦的，但它的顺序由文档的源顺序定义。 [~ developer.mozilla.org](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex#wikiArticle)

选择[`:input`](https://api.jquery.com/input-selector/)器基本上选择所有表单控件。

[`:visible`](https://api.jquery.com/visible-selector/)选择器基本上选择所有可见的元素。

* * *

或如评论中所建议的那样，如果您没有其他更改可应用于每个可见输入，那么这应该足够了：

```
$(':input:visible').attr('tabindex', '0'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-02-19T11:38:55.163

在这里，我描述了如何通过 jquery 动态添加 aria-selected 和 tabindex 值。我还想看看可访问性如何与 tablist、tab 和 tabpanel 角色一起工作，以及 aria 属性如何工作。希望对这段代码有帮助：

```
 var $tabs = $('.tabs');
 var $panels = $('.panel');

 $tabs.on('click', 'a', function (e) {
 e.preventDefault();
  var id = $(this).attr('href');

  // Find the currently visible tab and panel and hide them
$tabs.find('[aria-selected="true"]').attr({
            'aria-selected': false,
            'tabindex': -1
        });
   $(this).attr({
            'aria-selected': true,
            'tabindex': 0
        });
}); 
```

标签包装器：-

```
<ul class="tabs" role="tablist">
  <li role="presentation"><a href="#tab-1" role="tab" aria-controls="tab-1" aria-selected="true">Tab 1</a></li>
  <li role="presentation"><a href="#tab-2" role="tab" aria-controls="tab-2">Tab 2</a></li>
  <li role="presentation"><a href="#tab-3" role="tab" aria-controls="tab-3">Tab 3</a></li>
</ul>

<div class="tab-panels">
  <div class="panel" id="tab-1" role="tabpanel" aria-hidden="false">…&lt;/div>
  <div class="panel" id="tab-2" role="tabpanel" aria-hidden="true">…&lt;/div>
  <div class="panel" id="tab-3" role="tabpanel" aria-hidden="true">…&lt;/div>
</div> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-06-09T16:36:09.510

一种方法是将元素在 DOM 中移到更高的位置。与较低的元素相比，DOM 树顶部的元素将首先使用 Tab 聚焦。

# jquery - 带有活动链接和 URL 参数的 DIV 开关

> ID：15123056
> 
> 赞同：0
> 
> 时间：2013-02-27T21:46:29.403
> 
> 标签：jquery, url

我正在尝试使用活动链接从 URL 参数进行 div 切换。六个`<div>`s，六个环节；可以更多，也可以更少。

我希望使用活动链接开关加载 URL 参数，例如`page.html?option=c2`.
目前，使用 URL 参数加载正确的内容但没有活动链接，`onclick`此后活动有效。

Opera 有我认为 wrap div 的问题。

到目前为止，这是我的代码：

```
$(window).load(function(){
    var option = 'c1';
    var url = window.location.href;
    option = url.match(/option=(.*)/)[1];
    showDiv(option);    

    function showDiv(option) {
     $('#' + option).show();
    }   
$('#con1b a').click(
    function() {
    var showThis = $(this).attr('name');
    $('.active').removeClass('active');
    $(this).addClass('active');
    $('#wrap > div').hide();
    $('#' + showThis).show();
    return false;
    }); 
}); 
```

CSS是这个

```
#con1b a.active {color:#ff3300; text-decoration: none;}
#wrap div {display: none;} 
```

HTML是这个

```
<div id="con1b">
<a href="javascript:showDiv('c1')" name="c1">Link C1</a>
<a href="javascript:showDiv('c2')" name="c2">Link C2</a>
<a href="javascript:showDiv('c3')" name="c3">Link C3</a>
<a href="javascript:showDiv('c4')" name="c4">Link C4</a>
<a href="javascript:showDiv('c5')" name="c5">Link C5</a>
<a href="javascript:showDiv('c6')" name="c6">Link C6</a> 
```

```
<div id="wrap">
    <div id="c1">C1 Content</div>
    <div id="c2">C2 Content</div>
    <div id="c3">C3 Content</div>
    <div id="c4">C4 Content</div>
    <div id="c5">C5 Content</div>
    <div id="c6">C6 Content</div>
</div> 
```

[http://www.zest.ch/csi/2013/page.html?option=c2](http://www.zest.ch/csi/2013/page.html?option=c2)上的示例 为没有链接的 div 加载正确的内容为活动的（红色）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:02:55.377

到目前为止，如果我说得对，你有两个问题：

```
$('#wrap > div').hide(); 
```

这在 Opera 中不起作用，您想将我通过 url 参数 option=* 选择的链接标记为活动？

1.

```
<div id="wrap">
    <div id="c1" class="con">C1 Content</div>
    <div id="c2" class="con">C2 Content</div>
    <div id="c3" class="con">C3 Content</div>
    <div id="c4" class="con">C4 Content</div>
    <div id="c5" class="con">C5 Content</div>
    <div id="c6" class="con">C6 Content</div>
</div>

$('#wrap div.con').hide() 
```

会做。你也可以和

```
 $('#wrap').children('div').hide(); 
```

1.  给你的链接一个 id 并设置为活动的。

    链接 C1 函数 showDiv(option) { $('#' + option).show(); $('#l' + 选项).addClass('active'); }

2.  只是一个增强：

    链接 C1

应替换为：

```
 <a class="linkme" name="c1">Link C1</a>

 $('.linkme').click(function() {
    var option = $(this).attr('name');
    showDiv(option);
 }); 
```

它并不完美，但我希望你明白我的意思

另一个编辑：很抱歉，您不能在 Opera 10.10 中使用它，我刚刚安装并检查了它。这似乎是一个 jquery (bug) 问题。错误控制台只是告诉我这不是您的代码，而是来自 jquery 的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:24:51.507

这是你在找什么：http: [//jsfiddle.net/hK26Z/2/](http://jsfiddle.net/hK26Z/2/)

首先删除 name 属性，因为它是不必要的，而只是我们一个适用于您想要控制内容隐藏/显示的所有链接的类。还`href`可以直接更改目标 ID，这样如果用户由于某种被上帝抛弃的原因而没有启用 JS，他们将获得典型的行为跳转。因为我们希望它像这样降级，所以我们不会用 CSS 隐藏内容——我们将直接使用 jQuery 的 show 和 hide 方法。

```
<div id="con1b">
    <a href="#c1" class="content-link">Link C1</a>
    <a href="#c2" class="content-link">Link C2</a>
    <a href="#c3" class="content-link">Link C3</a>
    <a href="#c4" class="content-link">Link C4</a>
    <a href="#c5" class="content-link">Link C5</a>
    <a href="#c6" class="content-link">Link C6</a>
</div>
<div id="wrap">
    <div id="c1" class="content-container">C1 Content</div>
    <div id="c2" class="content-container">C2 Content</div>
    <div id="c3" class="content-container">C3 Content</div>
    <div id="c4" class="content-container">C4 Content</div>
    <div id="c5" class="content-container">C5 Content</div>
    <div id="c6" class="content-container">C6 Content</div>
</div> 
```

和 JS：

```
$(function(){
  $('a.content-link').click(function (e) {
     var $this = $(this),
         containerSelector = $this.attr('href'),
         $links = $('a.content-link');

     e.preventDefault();

     // hide all content containers other than our target
     $('div.content-container').not(containerSelector).hide();

     // show the target
     $(containerSelector).show();

     // set active classes
     $links.not($this).toggleClass('active', false);
     $this.toggleClass('active', true);

  });

  // this runs on initialization to show our "active" content based on the url:
  (function(){
     var option = '#c1',
         url = window.location.href;

      option = '#' + url.match(/option=(.*)/)[1];

      // just fake a click on the element so the event handler runs
      $('a[href='+option+']').click();
  })();
}); 
```

# rvm - 启动新终端窗口时收到“bash：/etc/profile [...] No such file or directory”消息

> ID：15123059
> 
> 赞同：1
> 
> 时间：2013-02-27T21:46:35.150
> 
> 标签：rvm, .bash-profile

> 上次登录：2 月 27 日星期三 22:38:32 在 ttys003
> -bash: /etc/profile.d/rvm.sh: 没有这样的文件或目录
> -bash: /etc/profile.d/sm.sh: 没有这样的文件或目录
> Williams-MacBook-Pro:~ william$

我认为这与过去某个时候 rvm 安装出错有关，但我似乎无法修复每次打开新终端窗口时出现的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:07:53.797

解决方案是 cd 到 /etc/profile 并注释掉引起问题的两行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T19:16:38.727

我的解决方案是 cd 到 /etc 并修改配置文件。

之前对 cd /etc/profile 的回答在我的 Mac 上不起作用，“profile”是一个文件而不是一个目录。

# php - 类方法链

> ID：15123060
> 
> 赞同：1
> 
> 时间：2013-02-27T21:46:35.737
> 
> 标签：php

我有以下代码，但它似乎不想链接工作。

```
 $this->view->setData($class_vars);
 $this->view->render('addview'); 
```

以上工作并运行良好，但是当我尝试执行以下操作时：

```
 $this->view->setData($class_vars)->render('addview'); 
```

我收到以下错误：

> 致命错误：在...中的非对象上调用成员函数 render()

但奇怪的是当我用另一种方式称呼它时：

```
 $this->view->render('addview')->setData($class_vars); 
```

它运行，但我需要先运行 setData，因为这会为实际视图设置 var，所以即使我得到了视图，它在 var 应该在哪里出现错误？两种方法都是公开的？

感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T21:48:41.087

是否`setData()`返回视图对象（即它`return $this;`有线）？如果不是...如果您希望它以这种方式工作，那么它应该。

供进一步参考。这种技术被称为“流利的界面”，并在此处描述：http: [//www.martinfowler.com/bliki/FluentInterface.html](http://www.martinfowler.com/bliki/FluentInterface.html)

# java - 饼图的自定义 AdapterView

> ID：15123063
> 
> 赞同：1
> 
> 时间：2013-02-27T21:46:41.523
> 
> 标签：java, android, performance, android-adapterview

因此，我为正在使用的饼图视图创建了一个自定义 AdapterView。我不确定我做错了什么，但是当我尝试旋转它时，饼图非常不稳定。我怀疑正在进行太多绘图，因为 traceview 显示了很多对 Canvas.nDrawDisplayList 的调用，这不是我直接控制的。

我在 github 上放置了一个示例项目以进行结帐（[https://github.com/saulpower/ExpandablePieChart](https://github.com/saulpower/ExpandablePieChart)）。如果我能让它工作，这是一个很酷的小图书馆！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:30:53.913

将所有内容移至表面视图，现在获得了相当不错的性能。

# dropbox-api - 用 C# 编写的 OAuth 1.0 签名代码

> ID：15123067
> 
> 赞同：0
> 
> 时间：2013-02-27T21:46:56.440
> 
> 标签：dropbox-api

现在我正在使用一些开源 C# 库来使用 OAuth 1.0 对我的 URL 进行签名。我签署它是为了从 Dropbox 下载文件。它适用于所有情况，除非文件中包含“（”字符。当它具有该字符时，我收到以下错误：

```
{"error": "Host: rpc.dropbox.com:443, FE: None, X-Dropbox-RequestId: None, 
  X-Dropbox-App-Error: None, Invalid or missing signature"} 
```

我认为这是由于我正在使用的 OAuth 身份验证代码。有什么好的图书馆吗？此外，我需要该库在 .Net 2.0 上工作。任何比这更高的东西都不适合我。我知道这很糟糕，但这是我的限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:33:58.887

这是一个文件名编码问题。当文件名中有空格时，我得到了同样的错误。我通过用 %20 替换空间解决了这个问题。您可以尝试将 ( 字符替换为 %28.

# c++ - 计数器未给出预期结果

> ID：15123068
> 
> 赞同：1
> 
> 时间：2013-02-27T21:46:57.440
> 
> 标签：c++

我正在为计算 Armstrong 数字的 C++ 类编写程序。该程序工作正常，除了每个输出行应该读为：

```
Armstrong number 1: xxx
Armstrong number 2: xxx
Armstrong number 3: xxx
Armstrong number 4: xxx, etc... 
```

计算是正确的，但给出增量数字“Armstrong number 1”、2、3 等的计数器仅反映实际的 armstrong 结果。我需要它来计算显示的行数。

代码如下。

```
#include <iostream>
#include <string>
#include <sstream>
#include <iomanip>
#include <cmath>

using namespace std;

int main()
{
    // Change the console's background color.
    system ("color F0");

    // Declare the variables
    int i = 0, counter = 1, var1, var2, var3, var4;

    while (i < 1000)
    {
        var1 = i/100;
        var2 = (i % 100) / 10;
        var3 = (i % 100) % 10;
        var4 = (var1 * var1 * var1) + (var2 * var2 * var2) + (var3 * var3 * var3);

        if (i == var4)

            cout << "\n Armstrong number " << counter << ": " << var4;
            counter++;
            i++;

    }
        cout << "\n";
        system ("pause");
        return 0;
} 
```

我该如何解决？

我需要的是： 阿姆斯特朗 1 号：0 阿姆斯特朗 2 号：1 阿姆斯特朗 3 号：153 阿姆斯特朗 4 号：370

我得到的是： 阿姆斯特朗号 0：0 阿姆斯特朗号 1：1 阿姆斯特朗号 153：153 阿姆斯特朗号 370：370

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T21:48:47.510

根据缩进，您可能需要忘记括号：

```
 if (i == var4)
   {
        cout << "\n Armstrong number " << counter << ": " << var4;
        counter++;
   }
   i++; 
```

没有括号，只有`cout`“在”`if`语句中。`counter`和的增量`i`每次都会执行。

仔细观察后，我相信`i++`应该在右括号之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:16:46.540

关于风格的一些建议：

如果您需要初始化/检查/增加循环，请使用 for()，它是为此而设计的
这是 C++，而不是 C，请在使用变量之前声明您的变量
专门设计用于内部语句的增量运算符，因此如果您只使用一次变量在增加它之后，你就违背了那个设计

```
int counter = 1;

for (int i = 0; i < 1000; i++ )
{
    int var1 = i/100;
    int var2 = (i % 100) / 10;
    int var3 = (i % 100) % 10;
    int var4 = (var1 * var1 * var1) + (var2 * var2 * var2) + (var3 * var3 * var3);

    if (i == var4)
         cout << "\n Armstrong number " << counter++ << ": " << var4;
} 
```

您的代码不仅变得更具可读性和更易于理解，而且您将消除许多错误，包括您的代码中已经存在的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T21:52:01.400

Mark Wilkins 已经解决了您的关键错误，但我还要注意您没有正确检查 Armstrong 数字。它只能用于 3 位数字的立方。对于两位数，它应该是平方的，我不确定这个概念对个位数是否有意义。

另外，为什么你的柜台从一个开始？

# clojure - 递归组合序列与自身，不重复

> ID：15123069
> 
> 赞同：0
> 
> 时间：2013-02-27T21:46:59.503
> 
> 标签：clojure

这很难解释，但很容易展示。不知道为什么我自己没有弄清楚，所以我一定在clojure中遗漏了一些显而易见的东西。

我需要将向量与其自身组合成一个向量，并且我需要将第一个元素与所有剩余元素组合，然后将第二个元素与所有剩余元素（第三个及之后）组合起来。

作为一个简短的例子：[1 2 3 4 5]

我需要一个函数来获取：[[1 2] [1 3] [1 4] [1 5] [2 3] [2 4] [2 5] [3 4] [3 5]]

如果这看起来像是为大型矩阵获得了一半的对，那么您是对的。我只想解决一半的矩阵减去中间对角线。这是我唯一需要顺序的部分（所以我只解决了一半），其余部分我想使用 reducers 库在后台并行化较重的数学。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:48:15.273

我只是使用一个`for`：

```
(for [ i (range 1 6) j (range 6) :when (< i j)] [i j])
; => ([1 2] [1 3] [1 4] [1 5] [2 3] [2 4] [2 5] [3 4] [3 5] [4 5]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T22:06:54.680

你想要的是内置在 clojure/math.combinatorics 中： [https ://github.com/clojure/math.combinatorics](https://github.com/clojure/math.combinatorics)

您正在寻找的基本示例在自述文件中，但为了完整回答这个问题，我将在此重复：

```
(ns example.core
    (:require [clojure.math.combinatorics :as combo]))

(combo/combinations [1 2 3] 2)
;;=> ((1 2) (1 3) (2 3)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T02:47:46.007

```
(def v [1 2 3 4 5])

(for [i (range (count v)) 
      :let [vv (drop i v)] 
      r (rest vv)] 
  [(first vv) r])

=> ([1 2] [1 3] [1 4] [1 5] [2 3] [2 4] [2 5] [3 4] [3 5] [4 5]) 
```

# windows - 我怎样才能使这个过程自动化？

> ID：15123070
> 
> 赞同：0
> 
> 时间：2013-02-27T21:47:00.327
> 
> 标签：windows

我是编程/脚本的新手。我有大约 40 个文件夹（Win7），其中包含包含各种日期的文件。目前，我打开每个文件夹，搜索我需要的日期，然后将其复制到其他地方。自动化这个过程有多困难？我可以输入我需要的日期，然后该工具会将我需要的所有文件复制到给定的目的地吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:12:25.963

假设所有日期的格式都相似，那么用 python 制作一些东西会很简单。

```
 import os
    import sys
    import shutil
    fileList = []
    rootdir = sys.argv[1]

    #iterate over the files
    for root, subFolders, files in os.walk(rootdir):
            for file in files:
                        #if date is in the file path add it to a list
                        if sys.argv[2] in root:
                            fileList.append(os.path.join(root,file))

    #move file from one location to the new dest
    for f in fileList:
        shutil.move(f,sys.argv[3] + f[f.rindex("/"):])
        print "moving %s to %s" % (f,sys.argv[3] + f[f.rindex("/"):]) 
```

这不会进行任何错误检查，也不会检查您的输出目录是否已创建。但要点就在那里。

python script.py directory_to_search str_to_find dest_dir

**编辑：**错过了修改日期的位。我确定有图书馆可以获取此类信息。这仅在目录中查找字符串:(

**编辑 编辑**： os.path.getmtime(filepath) 是如果我没记错的话，你如何在 python 中获取文件的修改时间。

# visual-studio-2012 - 使用键盘访问 VS2012 中的建议操作

> ID：15123071
> 
> 赞同：2
> 
> 时间：2013-02-27T21:47:01.840
> 
> 标签：visual-studio-2012

当我添加了对类的引用但忘记添加`using`指令时，R# 会建议自动插入它。我会通过`alt`+访问它`enter`。

现在，我在一个没有 R# 的系统上，这迫使我使用鼠标展开那个小东西来展开一个建议菜单。我怎样才能从键盘做到这一点？有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:11:19.320

您正在寻找的是展开***智能标签***菜单。
这可以通过按 `Ctrl`+`Period (.)`快捷键来完成。

您也可以为此使用++`Alt`快捷 方式。`Shift``F10`

**编辑：** 如果上面的组合对你不起作用，你可以像这样重新激活它：

1. `Tools > Customize > Keyboard...`（注意`Keyboard...`按钮在屏幕的右下角）

2\. 找到该`View.ShowSmartTag`命令并将其设置回`Ctrl`+`Period (.)`快捷方式。

# javascript - 在函数内设置定时器

> ID：15123073
> 
> 赞同：0
> 
> 时间：2013-02-27T21:47:03.693
> 
> 标签：javascript, function, object, timer

我有一个游戏对象，我想在一定时间后重新生成（变得活跃）。每次时间到了，我都会收到这个错误：

```
Uncaught TypeError: Object [object global] has no method 'SpawnCounter' 
```

不知道我做错了什么？这是我的对象的一部分：

```
this.Update = function(){
    //Collisions
    if(this.active){
        if(player.Intersects(this)){
            console.debug("Player Touching Pick Up!");
            if(this.type == "weapon")
                player.weapon = this.subtype;
            this.active = false;
        }
    }
    else{
        //THIS IS THE TIMER
        setTimeout( function(){ this.SpawnCounter(); }, 2000 );
    }
};

this.SpawnCounter = function(){
    this.active = true;
}; 
```

所有这一切，只是一个游戏拾取 - 2秒后重新出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:58:50.467

也许尝试将其范围限定为另一个变量...

```
this.Update = function(){
    var that = this;
    //Collisions
    if(this.active){
        if(player.Intersects(this)){
            console.debug("Player Touching Pick Up!");
            if(this.type == "weapon")
                player.weapon = this.subtype;
            this.active = false;
        }
    } else{
        //THIS IS THE TIMER
        setTimeout( function(){ that.SpawnCounter(); }, 2000 );
    }
};

this.SpawnCounter = function(){
    this.active = true;
}; 
```

# asp.net - 从 iframe 或任何其他控件获取 url

> ID：15123076
> 
> 赞同：0
> 
> 时间：2013-02-27T21:47:13.020
> 
> 标签：asp.net

我有一个带有 iframe 控件的 aspx 页面，它托管跨域站点。我将提供一个简单的工具来允许用户在 asp.net 文本框中快速“复制过去”框架 url。显然，由于我的 IFrame 指向外部站点，出于安全原因，这种操作被拒绝。

有没有办法在跨域场景中获取当前帧 url？

我可以使用与 iframe 不同的解决方案，这对我来说真的不重要。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-28T07:33:47.223

如果您正在寻找 javascript 解决方案，那么这可能是：HTML：

```
<input type="text" id="url" />
<button id="go">Go</button>
<br />
<iframe id="browser" width="300px" height="300px"></iframe> 
```

Javascript：

```
$(document).ready(function(){
    $("#go").on("click", function(){
        var url = $("#url").val();
        $("#browser").attr("src", url);
    });
}); 
```

[http://jsfiddle.net/bBhc4/](http://jsfiddle.net/bBhc4/)

尽管“深入”到 iframe 元素中会导致同源策略限制

# java - 关于在java中用swing准备风险游戏的地图

> ID：15123077
> 
> 赞同：4
> 
> 时间：2013-02-27T21:47:15.907
> 
> 标签：java, swing, java-2d

我想开始编写一个名为“风险”的游戏项目，我的第一个目标是正确构建地图。所以从逻辑上讲，每个区域都应该是一个 JButton，但 JButton 是面向矩形的。此外，我知道每个区域都应该是一个组件，因此我可以为每个区域使用鼠标事件侦听器。我的问题是

*   我应该尝试使用坐标、线条、形状等来绘制每个区域吗？或者
*   有没有办法定期绘制和组合每个区域？

另一方面，这是游戏地图的链接。

[风险地图](http://4.bp.blogspot.com/--jaT7jIrR7M/UBDQ9UvF40I/AAAAAAAABKI/vEqAZAosgpg/s1600/Risk_game_map_fixed.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T21:55:27.000

尝试制作固定的领土，因此您不必为调整实际领土的大小而头疼，只需更改您最近占领的领土的颜色，就像在 Dune2 中一样，如果您知道该游戏的话。而且我认为，您绝对应该将那个 jbutton 放在地图上的数字下方（或者，如果您将数字替换为地区名称并将该按钮放在下方，那肯定会更好）。我希望，我的回答回答了你的疑问:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T23:53:11.500

我觉得这将是很多工作。简单的方法是将 JButtons 放在数字下方。

如果您仍然倾向于制作形状不规则的可点击区域，我建议为每个国家/地区创建 Polygon (java.awt) 实例。它们是使用定义角的 x 和 y 点的数组制作的。方便的是，有一个 Polygon.contains(x, y) 方法可以让您知道 (x, y) 是否在您的多边形中。如果您使用覆盖整个地图的较大 JPanel 并获取鼠标相对于 JPanel 的位置，则可以通知每个国家/地区是否有鼠标在其中。

# node.js - 使用 RESTify Node.js 创建 OAuth2.0 服务提供者

> ID：15123079
> 
> 赞同：19
> 
> 时间：2013-02-27T21:47:29.297
> 
> 标签：node.js, oauth-2.0, restify

我有一个使用 node.js 和 node-restify 构建的宁静 API。我负责保护它的部分。显然，很容易找到如何使用 OAuth 2.0 作为客户端，但很难找到如何设置提供程序。我想我的谷歌技能不如以前那么好了。

有人可以指出我从哪里开始吗？节点是否有基本的 OAuth 2.0 服务器提供程序库？

如果需要，我创建自己的库没有问题，但我查看了规范，因为它是规范，它似乎过于复杂。我认为会有某种教程、网络广播或“hello World”风格的项目为我的假人打破它。

谢谢你的想法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T17:35:41.900

经过一番沉重的谷歌搜索，我想出了一个线索。我与一位开始从事这样一个项目的好心天才进行了交谈。他决定完成他的代码并将其发布给全世界。

该包称为restify-OAuth2。

这是[包](https://npmjs.org/package/restify-oauth2)的链接。这是[github 页面](https://github.com/domenic/restify-oauth2)的链接。

感谢您的所有帮助 Domenic。

# azure - 我什么时候应该在 azure 上选择“云服务”而不是“虚拟机”

> ID：15123080
> 
> 赞同：0
> 
> 时间：2013-02-27T21:47:29.047
> 
> 标签：azure

调查一下，我发现 1 个小型计算云服务的 1 个角色几乎比 1 个小型“虚拟机”贵 60%...

那么我为什么要选择使用云服务而不是虚拟机呢？

在网上搜索我发现了很多关于此的文章，包括[这篇文章](http://blogs.msdn.com/b/silverlining/archive/2012/06/27/windows-azure-websites-web-roles-and-vms-when-to-use-which.aspx)，但没有一篇对我来说足够清楚......最后一篇中的比较在我看来毫无用处......

是否有我不知道或未被考虑的“特权”？证明云服务的“额外费用”是合理的......在云服务上运行的代码是否比在虚拟机上运行更好（可能是因为开销更少）？任何事物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:41:12.970

我认为当我们需要将应用程序迁移到云端并使其“正常工作”时，将使用虚拟机。如果使用虚拟机，我们不需要太多额外的努力来将我们的遗留代码迁移到天蓝色。但它没有提供与云服务相比丰富的PaaS功能，如自动部署、自动更新、负载均衡等。

因此，如果我们有一个遗留系统并且我们想快速迁移到 azure，那么我们可以选择虚拟机。但是如果我们需要管理一堆机器，云服务会帮助我们很多，让我们专注于业务逻辑。

# javascript - 当我到达页面顶部时，如何启动 JavaScript 或 jQuery 事件？

> ID：15123081
> 
> 赞同：4
> 
> 时间：2013-02-27T21:47:32.670
> 
> 标签：javascript, jquery

我有一个简单的问题，但我找不到解决方案......我只想在向上滚动页面并“触摸”它的顶部时启动一个事件（执行一个方法）。我在我的页面中使用 JavaScript 和 jQuery。提前致谢 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T21:50:06.730

使用 onscroll 事件。香草js示例：

```
window.onscroll = function() {
    if(document.body.scrollTop == 0) {
        alert('yay!');
    }
} 
```

[http://jsfiddle.net/kuWuf/](http://jsfiddle.net/kuWuf/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-27T22:11:44.933

您应该为此目的使用滚动事件：

```
$(window).scroll(function() {
    if ($(this).scrollTop() == 0) {
        //Do whatever you want to do
    }
}); 
```

您应该注意的一件事是，当有人连续滚动到顶部时，即使您只希望在顶部被击中时也会触发，为此您可以将事件处理程序定义为一个函数并将最后一个滚动顶部值放入函数局部变量。

```
$(window).scroll(handleHitTop);

function handleHitTop(event) {
    var currentScrollTopValue = $(this).scrollTop();

    if (handleHitTop.lastTop === undefined) {
        handleHitTop.lastTop = currentScrollTopValue ;

        return;
    }

    if (handleHitTop.lastTop == 0 && currentScrollTopValue == 0) {
        return;
    }

    handleHitTop.lastTop = currentScrollTopValue;

    if (handleHitTop.lastTop == 0) {
        //Call your event here
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-27T21:50:18.210

使用`.scroll()`处理程序和`.scrollTop()`：

```
$(window).scroll( function() {
    if($(this).scrollTop() == 0) {
        alert("Top!!!");
    }
}); 
```

[http://jsfiddle.net/jtbowden/wvJ9r/](http://jsfiddle.net/jtbowden/wvJ9r/)

# kohana - Kohana - 需要有关路由的建议

> ID：15123082
> 
> 赞同：0
> 
> 时间：2013-02-27T21:47:37.843
> 
> 标签：kohana

```
application
modules
   myModule
      classes
         controller
         model
         helper
         foo.php
      views
      init.php 
```

这是我的模块的文件结构。我需要在 init.php 中创建路由，这将允许我从项目中的任何位置调用 foo.php 文件。foo.php 中的类没有扩展任何 kohana 类——这就是阻止我的地方。

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:56:37.730

路由适用于控制器，而不是随机类。只要您注册了模块，该类就会在您注册时自动加载`new Foo;`。他们不需要扩展 kohana 类来自动加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:54:43.600

尝试：`include Kohana::find_file('classes', 'foo');`并且不要忘记在`bootstrap.php: 'myModule' => MODPATH.'myModule'`.

# vb.net - 属性设置器中的 ArgumentException 使用什么参数名称

> ID：15123083
> 
> 赞同：3
> 
> 时间：2013-02-27T21:47:39.480
> 
> 标签：vb.net, exception

来自 MSDN：

> 每个 ArgumentException 都应带有导致此异常的参数的名称。

我的问题：如果属性设置器应该抛出一个`ArgumentException`，我应该给它设置器的参数名称（默认值：）`value`还是属性名称？

例子：

```
 Private _myProperty As String
    Public Property MyProperty As String
        Get
            Return _myProperty
        End Get
        Set(value As String)
            If String.IsNullOrEmpty(value) Then
                ' what I've been doing for the last 2 years
                Throw New ArgumentNullException("value", "value cannot be empty")

                ' what I think I should be doing instead
                Throw New ArgumentNullException("MyProperty", "value cannot be empty")
            End If
            _myProperty = value
        End Set
    End Property 
```

我希望这是有道理的。你怎么看？

**编辑**

我想另一种解决方案是重命名`value`为更有意义的名称，然后将其用作`paramName`. 但不知何故，这似乎不是正确的做法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T21:52:25.060

根据MSDN 上[捕获和抛出标准异常类型](http://msdn.microsoft.com/en-us/library/ms229007.aspx)的示例，您应该继续将“值”设置为参数名称：

> 请使用 value 作为属性设置器的隐式 value 参数的名称。

所以没关系：

```
Throw New ArgumentNullException("value", "value cannot be empty") 
```

# javascript - ModX 资源树

> ID：15123084
> 
> 赞同：0
> 
> 时间：2013-02-27T21:47:40.990
> 
> 标签：javascript, extjs, content-management-system, modx, modx-revolution

我正在使用 MODX Revolution 2.2.1-pl（高级），但遇到了问题。我的资源树是……嗯……远……没有显示……不可见。

当我登录到 Manager 时，我的 JS 控制台显示：

```
SyntaxError: syntax error
(<>br />
ext-all.js (Zeile 7, Spalte 1) 
```

（注意...... **br**行中的“>”仅用于显示错误消息，而不是错误本身的一部分。

我从来没有接触过这个被压缩的（ext-all.js）文件，我得到这个错误非常令人困惑。

有没有人，以前必须处理同样的问题，有我的解决方案？如果我更新MODX，我担心这个问题会变得更糟。

谢谢，

少汗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:22:58.760

对此不是 100% 确定，但我在管理器中遇到了一些压缩 javascript 的问题。如果您的设置页面有效，请尝试禁用它。

放：

> compress_js 为否

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:23:14.307

先清除缓存，然后；

在 modx 系统设置中关闭脚本和 css 压缩和缓存。我认为这已在 2.2.2+ 中修复

这是一件相当普遍的事情，但我不确定确切的错误是什么〜所以不确定这是否是您所遇到的。

# mysql - 我的大表连接有问题吗？

> ID：15123086
> 
> 赞同：0
> 
> 时间：2013-02-27T21:47:50.353
> 
> 标签：mysql, sql

我正在执行以下查询：

```
UPDATE extlinks
INNER JOIN sp_board using (title)
SET extlinks.board_id = sp_board.id 
```

两`title`列都是索引，以及`board_id`列和`id`列（这是主索引）。`extlinks`有 645 万行，而`sp_board`大约有 370 万行。这两个表都是 Innodb。

我在一个多小时前开始了此加入，但仍未完成。这是正常的吗？如果是，我预计需要多长时间？如果没有，关于什么可能是错误的任何想法？

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:11:32.893

对于大型更新，几个小时的运行时间是正常的。如果您使用 InnoDB，MySQL 服务器必须为您的更新生成一个事务，因此它可以在需要时回滚它。这需要很多开销。在此操作期间，您的服务器可能使用了大量 RAM 和 IO。

稍等一下。

# c# - 从 FormView 的当前绑定行获取数据

> ID：15123088
> 
> 赞同：0
> 
> 时间：2013-02-27T21:47:51.163
> 
> 标签：c#, asp.net, formview

我有一个分页绑定到 SqlDataSource 的 FormView。我试图找出如何访问当前绑定到 FormView 的数据源。例如，如果我在第 2 页，如何访问数据源的第二行？我只需要读取某些值进行比较；数据不会改变。是否可以将其作为 DataRow 或 DataTable 对象获取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T23:02:12.923

使用此代码访问 SQLDataSource 中的 DataTable

```
 DataSourceSelectArguments args = new DataSourceSelectArguments();
    SqlDataSource mds = (SqlDataSource)MyFormView.DataSourceObject;
    DataView view = (DataView)mds.Select(args);
    DataTable dt = view.ToTable();
    DataRow dr2 = dt.Rows[1]; 
```

我用 ListView 测试了这个，而不是 FormView，希望它也适用于你

# php - 从while循环中获取变量

> ID：15123095
> 
> 赞同：0
> 
> 时间：2013-02-27T21:48:04.133
> 
> 标签：php, javascript, mysql

好的，我认为对于经验丰富的网络开发人员来说，我所拥有的非常简单。现在，这[是](http://stateofdebate.com/debatelist.php)我的辩论网站 State of Debate 的索引页面。从下面的代码中，你可以看到我有一个while循环来呼应每个辩论，它对应于mySQL数据库中的一个“did”。为了赞成/反对的目的，我需要做的是让每个“做了”通过循环。然后我会将它传递给“upvote.php”和“downvote.php”。

我尝试了一个 foreach 循环，虽然这可能是答案，但我只是没有找到它。我已经使用了 $_SESSION['did'] = $row['did'] 并且所做的只是将最后一个 did 传递给 PHP 页面。

任何帮助表示赞赏。请询问您是否需要更多信息。

```
<?php

$result = mysql_query("SELECT did,debatetitle  FROM debates");
while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td><a href='/debatepage.php?did=" . $row['did'] . " '>" . $row['debatetitle'] . "</a></td>";
?>

<tr><td>
<a href="upvote.php" onClick="alert('You have given this item a thumbs up! You can change your vote, or leave it how it is.')"; onMouseOver="return changImage()" onMouseOut= "return changImageBack()" ><img
name="jsbutton2" src="Graphics/thumbs-up-unclicked.jpeg" width="75" height="75" border="0"
alt="javascript button"></a>

<script type="text/javascript">
function changImage()
{
document.images["jsbutton2"].src= "Graphics/thumbs-up.jpeg";
return true;
}
function changImageBack()
{
 document.images["jsbutton2"].src = "Graphics/thumbs-up-unclicked.jpeg";
 return true;
}
</script>

<a href="downvote.php" onClick="alert('You have given this item a thumbs down! You can change your vote, or leave it how it is.')"; onMouseOver="return changeImage()" onMouseOut= "return changeImageBack()" ><img
name="jsbutton1" src="Graphics/thumbs-down-unclicked.jpeg" width="75" height="75" border="0"
alt="javascript button"></a>

<script type="text/javascript">
function changeImage()
{
document.images["jsbutton1"].src= "Graphics/thumbs-down.jpeg";
return true;
}
function changeImageBack()
{
 document.images["jsbutton1"].src = "Graphics/thumbs-down-unclicked.jpeg";
 return true;
}
</script>

</tr></td>

<?php
echo "</tr>";
  }
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:53:26.093

改变这个：

```
<a href="upvote.php" onCli.... 
```

至

```
<a href="upvote.php?did<?PHP echo $row['did']"; ?> onCli 
```

与downvote链接相同。

要使用 upvote.php 中的变量：

```
<?PHP
echo $_GET['did'];
?> 
```

# makefile - 获取文件名的makefile compile

> ID：15123098
> 
> 赞同：0
> 
> 时间：2013-02-27T21:48:17.097
> 
> 标签：makefile

我需要一个生成文件，它还可以获取文件编译的名称例如：

```
make foo

and the makefile should compile foo.c to foo. 
```

这是我的生成文件。如何改变它？

```
all: out

out: out.o 
gcc -g  -m32 -Wall -o out out.o

out.o: out.c
gcc -m32 -g  -Wall -ansi -c -o out.o out.c

.PHONY: clean

#Clean the build directory
clean: 
rm -f *.o out 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:27:43.813

没有直接的方法可以将参数传递给 Makefile，但是您可以利用变量来实现您想要的。检查对下面的 Makefile 所做的修改

`NAME ?=out #Default binary generated is out if you dont pass any argument`

`${NAME}: ${NAME}.o`

```
gcc -g  -m32 -Wall -o ${NAME} ${NAME}.o 
```

`${NAME}.o: ${NAME}.c`

```
gcc -m32 -g  -Wall -ansi -c -o ${NAME}.o out.c 
```

`.PHONY: clean`

`#Clean the build directory`

`clean:`

```
`rm -f *.o ${NAME}` 
```

你应该通过键入来调用 Makefile

`$ make NAME=foo`

`$ make clean NAME=foo`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T01:42:10.370

**将参数直接传递给 Make 非常简单。**

您当前的 makefile 可以用 调用`make foo`，并将编译`foo.c`生成`foo`，因为 Make 具有处理以下情况的隐含规则`foo.c => foo`；即使“foo”不是任何规则的目标，也不会出错。（至少，我正在使用的**GNU Make 3.81就是这种情况。）**

如果你想控制编译器和标志的选择（如你的`out`规则），有不止一种方法可以做到这一点。最简单的（虽然严格来说不是最好的）是修改 makefile 中的几个变量：

```
CC = gcc
CFLAGS = -g -m32 -Wall -ansi 
```

另一种选择是使用您自己的模式规则覆盖隐式规则：

```
%: %.c
    gcc -g -m32 -Wall -ansi -o $@ $< 
```

如果您希望它`foo.o`在单独的步骤中构建，则必须将规则拆分为两个规则 - 并且还放入一个没有配方的规则以取消 Make 的隐式规则：

```
%: %.o
    gcc -g -m32 -Wall -o $@ $^

%.o: %.c
    gcc -m32 -g  -Wall -ansi -c -o $@ $<

%: %.c 
```

一旦掌握了基础知识，就可以进行进一步的改进。

# solr - Solr 4.1 Solr 云分片结构

> ID：15123099
> 
> 赞同：0
> 
> 时间：2013-02-27T21:48:26.783
> 
> 标签：solr, lucene, sharding

如果我计划在 Solr 云中保存 7TB 的数据，从 1 台服务器开始保存 100 个分片然后开始填充集合，一旦大小增加，每个分片最终将被剥离到自己的专用服务器中（拥有约 70GB ea 和自己的专用资源和副本）？

也就是说，我会从本地 100 个分片开始收集，然后随着数据的增长，我可以一次剥离一个分片，并给它自己的服务器——专用的大量资源。

这样做可以吗？或者我会在数据不足的情况下将这么多分片放在一台服务器中以某种方式在内部引发巨大的瓶颈？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-19T11:54:57.233

这对于 Solr 4.1 来说似乎是有效的策略，因为该项目的主要贡献者之一 Mark Miller 也提到了这种方法检查[here](https://www.youtube.com/watch?feature=player_detailpage&v=eVK0wLkLw9w#t=1692)

但是，如果您可以升级或计划升级。可以在 4.3 之后在 Solr 中动态添加新的 shrad 检查[这里](https://cwiki.apache.org/confluence/display/solr/Shards+and+Indexing+Data+in+SolrCloud)

# string - “perl -e”命令的替代品

> ID：15123101
> 
> 赞同：-12
> 
> 时间：2013-02-27T21:48:28.277
> 
> 标签：string, perl, terminal, system

我正在使用“perl -e”命令来生成字符串输出文件，例如：

```
> perl -e 'print "A"x5'
AAAAA 
```

这个命令有哪些替代品？

不要问我为什么，但我不喜欢这个命令，我找不到其他类似的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T21:50:06.713

尝试这个 ：

```
perl -E 'say "A"x5' 
```

或者 ：

```
perl<<!
print "A"x5
! 
```

或者

```
echo 'print "A"x5' | perl 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T22:01:49.573

您可以编写一个简短的 shell 脚本来消除 -e 部分。

```
$ cat perle
#!/bin/sh

perl -e "$@" 
```

这让你写`perle 'print "Hello"'`。引号仍然是必要的。

或者您可以使用[Devel::REPL](https://metacpan.org/module/Devel%3a%3aREPL)及其`re.pl`.

```
$ re.pl
$ "A"x5
AAAAA 
```

这些只是在黑暗中拍摄，你不喜欢什么`perl -e`？

# c++ - QItemSelectionModel::selectedIndexes() 崩溃

> ID：15123109
> 
> 赞同：2
> 
> 时间：2013-02-27T21:48:49.340
> 
> 标签：c++, qt, model, qt5

我一直在寻找解决这个问题的方法，我开始相信这可能是 Qt 函数本身的一个错误。问题是，在您调用 QItemSelectionModel::selectedIndexes() 后，当程序尝试破坏此函数返回的 QModelIndexList 时，程序将崩溃。在崩溃之前，您会收到以下调试消息：

> 调试断言失败！
> (...)
> 文件：f:\dd\vctools\crt_bld\self_x86\crt\src\dbgheap.c
> 行：1419
> 表达式：_pFirstBlock == pHead
> (...)

下面是最简单的会导致问题的代码，大家可以自己测试一下：

```
#include <QApplication>
#include <QStringList>
#include <QStringListModel>
#include <QItemSelectionModel>
#include <QModelIndex>
#include <QModelIndexList>
#include <QListView>
#include <QItemSelectionModel>

void doSomethingWithSelection(QItemSelectionModel* selectionmodel);

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QStringList list;
    list.push_back("1");
    list.push_back("2");
    list.push_back("3");
    list.push_back("4");
    QStringListModel model(list);
    QListView view;
    view.setModel(&model);
    view.setSelectionMode(QAbstractItemView::ExtendedSelection);

    QItemSelectionModel *selectionmodel = view.selectionModel();
    QModelIndex first = model.index(0);
    QModelIndex last = model.index(2);
    QItemSelection selection(first, last);
    selectionmodel->select(selection,QItemSelectionModel::Select);

    doSomethingWithSelection(selectionmodel);

    view.show();
    return a.exec();
}

void doSomethingWithSelection(QItemSelectionModel* selectionmodel)
{
    QModelIndexList indexlist = selectionmodel->selectedIndexes();
    // this is what causes the error. I put this inside a function
    // so the error will happen when exiting the function,
    // when the program try to destroy the list nodes.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-08-30T02:46:40.800

我在`QTreeView`访问和访问`selectedIndexes()`或`selectionModel()`.

当我使用正确的编译器开关和正确的库时，它已**修复。**`/MD``Qt`

要修复崩溃：

*   编译你的代码`/MDd`并与调试链接`Qt libs`（例如`Qt5Cored.lib`
*   编译您的代码`/MD`并与发布链接`Qt libs`（示例`Qt5Core.lib`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-11T08:20:40.957

我有完全相同的问题，只是我使用选定的行而不是选定的索引。当 QModelIndexList 中的内部 QList 尝试从堆中删除索引时，我将其缩小到函数退出。不知道如何修复它，但我[在这里](http://www.qtforum.org/article/13355/qt4-qtableview-assertion-failure.html?s=24b87570d6036bd20b1c317228385143d7ee4b5b)阅读了这篇有趣的帖子并提出了这个功能：

```
QModelIndexList Class::getViewSelection(QAbstractItemView *view ,  int columnNumber) const
{
  QModelIndexList list;
  for (int row = 0; row < view->model()->rowCount(view->rootIndex()); ++row)
  {
    QModelIndex index = view->model()->index(row, columnNumber, view->rootIndex());

    if (view->selectionModel()->isSelected(index))
        list.push_back(index);
   }
  return list;
} 
```

我编写了这个函数来获取选定的行，因此列参数是您想要索引的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T08:48:09.473

我设法解决了这个问题，但现在我不明白为什么会这样，但是：（我写这个作为答案希望它可以帮助有同样问题的人）

在我的 Qt 项目中，我使用带有***Microsoft Windows SDK for Windows 7 (7.0.7600.16385.40715) (x86)***的工具包作为编译器。当我将编译器更改为***Microsoft Visual C++ Compiler 10.0 (x86)***时，此代码可以正常工作。

正如我所说，我不知道为什么会这样，如果有人可以向我解释这一点，我会很高兴听到。我什至不知道为什么 Windows SDK 被列为编译器。它不是，是吗？

# jquery - 用jquery点击复选框重复帖子

> ID：15123117
> 
> 赞同：1
> 
> 时间：2013-02-27T21:49:16.177
> 
> 标签：jquery, ajax, post, click

我正在尝试做一些我认为非常简单的事情。我想设置一个独立的复选框，选中该复选框后，会将数据库中的字段切换为“1”。未选中时，它将该标志切换回 0。我已将帖子侧设置得很好，但是单击时，我最终会多次发生帖子。

```
<input name="trackdefect" value="1" type="checkbox" id="trackdefect"><label for="defect">Factory Defect</label> 
```

还有我的 javascript：

```
$("input[name=trackdefect]:checked").live('click', function(e) {
   $.post("save.php", { id:"trackdefect",value:"1" });
});

$("input[name=trackdefect]:not(:checked)").live('click', function(e) {
   $.post("save.php", { id:"trackdefect",value:"0" });
}); 
```

有时它会在点击时运行一次，有时会运行 3 次，有时会运行 4 次或 5 次。我不确定为什么。当我在小提琴中使用几乎相同的代码时，它工作正常，没有倍数：http: [//jsfiddle.net/suQfA/4/](http://jsfiddle.net/suQfA/4/)

（当然，我想出了一个解决方法，检查切换是否与已有的相同，因此它不会发布或记录任何内容，但这是一个杂乱无章的问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:54:34.510

你只需要绑定一次

```
$("input[name=trackdefect]").change(function(){
    var val = this.checked ? 1 : 0;
    $.post("save.php", { id:"trackdefect",value: val });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:51:14.410

尝试使用`change`事件而不是`click`复选框上的事件。

[http://jsfiddle.net/suQfA/5/](http://jsfiddle.net/suQfA/5/)

# android - 获取所选项目值抛出 IndexOutOfBoundsException

> ID：15123118
> 
> 赞同：1
> 
> 时间：2013-02-27T21:49:22.870
> 
> 标签：android, android-listview, android-arrayadapter, android-listfragment

我在一个带有一些 mp3 文件的片段中创建了一个列表，然后我将此列表传递给另一个片段，它可以工作，在这个片段中，我尝试在用户按下一个时获取项目值。

以下代码行在创建列表的片段中完成这项工作，但在此片段中它会引发 IndexOutOfBoundsException。

```
String trackId = SD_PATH + songs.get(position); 
```

完整代码：

```
public class QueueListFragment extends ListFragment {

    private static final String SD_PATH = new String(Environment.getExternalStorageDirectory().getPath() + "/");
    private List<String> songs = new ArrayList<String>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ArrayAdapter<String> songList = new ArrayAdapter<String>(getActivity().getApplicationContext(), R.layout.playlist_item2, songs);
        setListAdapter(songList);
    }

    public void onListReceived(List<String> songs) {

        ArrayAdapter<String> songList = new ArrayAdapter<String>(getActivity().getApplicationContext(), R.layout.playlist_item2, songs);
        setListAdapter(songList);

    }

    @Override
    public void onListItemClick(ListView listView, View view, int position,
            long longId) {
        super.onListItemClick(listView, view, position, longId);

        String trackId = SD_PATH + songs.get(position);
        Toast.makeText(getActivity().getApplicationContext(), trackId, Toast.LENGTH_SHORT).show();

    }

} 
```

完整的Logcat：

```
02-27 21:47:54.300: W/dalvikvm(3781): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
02-27 21:47:54.333: E/AndroidRuntime(3781): FATAL EXCEPTION: main
02-27 21:47:54.333: E/AndroidRuntime(3781): java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
02-27 21:47:54.333: E/AndroidRuntime(3781):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
02-27 21:47:54.333: E/AndroidRuntime(3781):     at java.util.ArrayList.get(ArrayList.java:304)
02-27 21:47:54.333: E/AndroidRuntime(3781):     at com.harteg.fragmentstest.QueueListFragment.onListItemClick(QueueListFragment.java:50)
02-27 21:47:54.333: E/AndroidRuntime(3781):     at android.support.v4.app.ListFragment$2.onItemClick(ListFragment.java:58)
02-27 21:47:54.333: E/AndroidRuntime(3781):     at android.widget.AdapterView.performItemClick(AdapterView.java:298)
02-27 21:47:54.333: E/AndroidRuntime(3781):     at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
02-27 21:47:54.333: E/AndroidRuntime(3781):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
02-27 21:47:54.333: E/AndroidRuntime(3781):     at android.widget.AbsListView$1.run(AbsListView.java:3423)
02-27 21:47:54.333: E/AndroidRuntime(3781):     at android.os.Handler.handleCallback(Handler.java:725)
02-27 21:47:54.333: E/AndroidRuntime(3781):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-27 21:47:54.333: E/AndroidRuntime(3781):     at android.os.Looper.loop(Looper.java:137)
02-27 21:47:54.333: E/AndroidRuntime(3781):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-27 21:47:54.333: E/AndroidRuntime(3781):     at java.lang.reflect.Method.invokeNative(Native Method)
02-27 21:47:54.333: E/AndroidRuntime(3781):     at java.lang.reflect.Method.invoke(Method.java:511)
02-27 21:47:54.333: E/AndroidRuntime(3781):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-27 21:47:54.333: E/AndroidRuntime(3781):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-27 21:47:54.333: E/AndroidRuntime(3781):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:58:15.670

您是变量 shadowing `songs`，因此类范围`songs`的大小始终为`0`. `songs`您在顶部声明并实例化了它：

```
private List<String> songs = new ArrayList<String>(); size of 0 
```

*但是*，`onListReceived()` *还有*一个名为 的变量`songs`，在制作适配器时使用。

你可以做：

```
String trackId = SD_PATH + listView.getItemAtPosition(position); 
```

或者

```
String trackId = SD_PATH + listView.getAdapter().getItem(position); 
```

或者在调用一次时使类`songs`指向新列表`onListReceived()`：

```
 public void onListReceived(List<String> newSongs) {
        this.songs = newSongs;
        ArrayAdapter<String> songList = new ArrayAdapter<String>(getActivity().getApplicationContext(), R.layout.playlist_item2, songs);
        setListAdapter(songList);  
    } 
```

# java - php android json解析错误

> ID：15123119
> 
> 赞同：0
> 
> 时间：2013-02-27T21:49:32.740
> 
> 标签：java, php, android, json

我收到此错误

```
Error parsing data org.json.JSONException: Value <br of type java.lang.String cannot be converted to JSONObject 
```

我无法确定这个错误来自哪里，我认为它会是 php，但是当我从不同的页面获取 json 时它工作正常，所以我不知道错误来自哪里

这是php页面

```
include("database.php");

$state = $_GET['state'];
$response["county"] = array();
switch ($state){
case "Select A State":

    break;
default:
    $squery = $con->prepare("SELECT * FROM states WHERE fullName = :state");
    $squery->bindParam(':state', $state, PDO::PARAM_STR);
    $squery->execute();
    $srow = $squery->fetch(PDO::FETCH_ASSOC);

    $tb = trim($srow['tbName']);
    $query = $con->prepare("SELECT DISTINCT(County) FROM `$tb` ORDER BY County ASC");
    $query->execute();

    while ($row = $query->fetch(PDO::FETCH_ASSOC)){
        $temp = array("display"=>$row['County']);
        array_push($response["county"], $temp);
        unset($temp);
    }
    break;
}
print json_encode($response); 
```

这是我的java代码

```
package com.photosbychristian.ems;

import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.Activity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class Edit extends Activity {

private ProgressDialog stateDialog;
private ProgressDialog countyDialog;
private ProgressDialog cityDialog;

JSONParser stateParser = new JSONParser();
JSONParser countyParser = new JSONParser();
JSONParser cityParser = new JSONParser();

private static String url_state = "http://www.photosbychristian.com/ems/states.php";
private String url_county = "http://www.photosbychristian.com/ems/countys.php?state=Pennsylvania";
private static String url_city = "http://www.photosbychristian.com/ems/states.php";

private static final String TAG_STATE_DISPLAY = "display";
private static final String TAG_COUNTY_DISPLAY = "display";

JSONArray statesArray = null;
JSONArray countysArray = null;
JSONArray citysArray = null;

ArrayAdapter<String> stateAdapter;
ArrayAdapter<String> countyAdapter;
ArrayAdapter<String> cityAdapter;

Spinner state;
Spinner county;
Spinner city;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.edit);

    TabHost th = (TabHost) findViewById(R.id.tabhost);
    th.setup();
    TabSpec specs = th.newTabSpec("tag1");
    specs.setContent(R.id.tab1);
    specs.setIndicator("My Hospitals");
    th.addTab(specs);
    specs = th.newTabSpec("tag2");
    specs.setContent(R.id.tab2);
    specs.setIndicator("Add Hospitals");
    th.addTab(specs);
    new LoadStates().execute();

    state = (Spinner) findViewById(R.id.sState);
    county = (Spinner) findViewById(R.id.sCounty);
    city = (Spinner) findViewById(R.id.sCity);

    stateAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item);
    countyAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item);
    cityAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item);

}

class LoadStates extends AsyncTask<String, String, String> {

    // Before starting background thread Show State Progress Dialog

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        stateDialog = new ProgressDialog(Edit.this);
        stateDialog.setMessage("Loading States. Please wait...");
        stateDialog.setIndeterminate(false);
        stateDialog.setCancelable(false);
        stateDialog.show();
    }

    /** Get states form Internet **/

    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = stateParser.makeHttpRequest(url_county, "GET",
                params);

        // Check your log cat for JSON response
        Log.d("All States: ", json.toString());

        stateAdapter
                .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        stateAdapter.add("Select A State");
        try {
            // products found
            // Getting Array of Products
            statesArray = json.getJSONArray("state");

            // looping through All Products
            for (int i = 0; i < statesArray.length(); i++) {
                JSONObject c = statesArray.getJSONObject(i);

                // Storing each JSON item in variable
                // String id = c.getString(TAG_HID);
                String disp = c.getString(TAG_STATE_DISPLAY);

                stateAdapter.add(disp);

            }

        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /** After completing background task Dismiss the progress dialog **/

    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        stateDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                // add states to spinner
                state.setAdapter(stateAdapter);

            }
        });

        state.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> parent, View view,
                    int position, long id) {
                // On selecting a spinner item
                String label = parent.getItemAtPosition(position)
                        .toString();
                if (label == "Select A State") {

                } else {
                    url_county = "http://www.photosbychristian.com/ems/countys.php?state="
                            + label;
                    Log.d("url", url_county);
                    // load county spinner

                    new LoadCounty().execute();
                }
            }

            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        });
    }
}
} 
```

完整的堆栈跟踪

```
02-27 21:28:58.527: E/JSON Parser(1782): Error parsing data org.json.JSONException: Value <br of type java.lang.String cannot be converted to JSONObject
02-27 21:28:58.527: W/Trace(1782): Unexpected value from nativeGetEnabledTags: 0
02-27 21:28:58.527: W/Trace(1782): Unexpected value from nativeGetEnabledTags: 0
02-27 21:28:58.547: W/Trace(1782): Unexpected value from nativeGetEnabledTags: 0
02-27 21:28:58.547: W/Trace(1782): Unexpected value from nativeGetEnabledTags: 0
02-27 21:28:58.577: W/dalvikvm(1782): threadid=11: thread exiting with uncaught exception (group=0x40a70930)
02-27 21:28:58.587: E/AndroidRuntime(1782): FATAL EXCEPTION: AsyncTask #1
02-27 21:28:58.587: E/AndroidRuntime(1782): java.lang.RuntimeException: An error occured while executing doInBackground()
02-27 21:28:58.587: E/AndroidRuntime(1782):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
02-27 21:28:58.587: E/AndroidRuntime(1782):     at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
02-27 21:28:58.587: E/AndroidRuntime(1782):     at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
02-27 21:28:58.587: E/AndroidRuntime(1782):     at java.util.concurrent.FutureTask.run(FutureTask.java:239)
02-27 21:28:58.587: E/AndroidRuntime(1782):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
02-27 21:28:58.587: E/AndroidRuntime(1782):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
02-27 21:28:58.587: E/AndroidRuntime(1782):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
02-27 21:28:58.587: E/AndroidRuntime(1782):     at java.lang.Thread.run(Thread.java:856)
02-27 21:28:58.587: E/AndroidRuntime(1782): Caused by: java.lang.NullPointerException
02-27 21:28:58.587: E/AndroidRuntime(1782):     at com.photosbychristian.ems.Edit$LoadStates.doInBackground(Edit.java:106)
02-27 21:28:58.587: E/AndroidRuntime(1782):     at com.photosbychristian.ems.Edit$LoadStates.doInBackground(Edit.java:1)
02-27 21:28:58.587: E/AndroidRuntime(1782):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
02-27 21:28:58.587: E/AndroidRuntime(1782):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
02-27 21:28:58.587: E/AndroidRuntime(1782):     ... 4 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:51:47.657

`<br`听起来你有一些 HTML 处理 json 字符串。转储原始 json 字符串，您可能会发现其中嵌入了一个 PHP 错误，导致 json 语法错误。例如你正在接受

```
<br />Warning: blah blah blah
[your json object here] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:48:39.173

您正在使用空参数执行查询，因此您的 url`http://www.photosbychristian.com/ems/countys.php?state=Pennsylvania`实际上会变成`http://www.photosbychristian.com/ems/countys.php?state=Pennsylvania?`返回 -

```
<br />
<b>Fatal error</b>:  Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1103 Incorrect table name ''' in /home/content/03/8587103/html/ems/countys.php:18
Stack trace:
#0 /home/content/03/8587103/html/ems/countys.php(18): PDOStatement-&gt;execute()
#1 {main}
  thrown in <b>/home/content/03/8587103/html/ems/countys.php</b> on line <b>18</b><br     /> 
```

要修复，请执行以下操作：

```
protected String doInBackground(String... args) {
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add( new BasicNameValuePair( "state", "Pennsylvania" ) );
    // getting JSON string from URL
    String url = "http://www.photosbychristian.com/ems/countys.php";
    JSONObject json = stateParser.makeHttpRequest(url, "GET",
            params); 
```

# testng - 在组级别参数化

> ID：15123120
> 
> 赞同：0
> 
> 时间：2013-02-27T21:49:33.610
> 
> 标签：testng

我想在 testng.xml 中对组进行参数化，然后使用 a 获取数据`DataProvider`。

1.  我想运行一个元组和一个包含在元组中但参数不同的组。看来，如果该组包含在元组中，则不会第二次启动。我的用例是一个具有不同用户角色的网站（超级组应该从管理员的角度进行测试，group1 应该只作为访问者进行测试）

    ```
    <suite name="Suite1" verbose="1" parallel="false">
        <test name="Test1">
            <groups>
                <define name="supergroup">
                    <include name="group1" />
                    <include name="group2" />
                </define>
                <run>
                    <include name="supergroup">
                        <parameter name="config" value="super" />
                    </include>
                    <include name="group1">
                        <parameter name="config" value="first" />
                    </include>
                </run>
            </groups>
            <packages>
                <package name="com.company.test.*" />
            </packages>
        </test>
    </suite> 
    ```

2.  我想使用 DataProvider 获取参数并将它们注入测试类。ITestContext 似乎没有机会访问定义在测试级别以下的参数

    ```
    @DataProvider(name = "test", parallel = false)
    public static Object[][] testDataProvider(ITestContext context){

        String config = context.getCurrentXmlTest().getParameter("config");

        Object[][] back = new Object[1][1];

        back[0] = new Object[] { config };

        return back;
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:09:21.620

我可以这样做：

```
<suite name="Suite1" verbose="1" parallel="false">
    <test name="SuperTest">
        <parameter name="config" value="super" />
        <groups>
            <run>
                <include name="group2" />
                <include name="group1" />
            </run>
        </groups>
        <packages>
            <package name="com.company.test.*" />
        </packages>
    </test>
    <test name="SubTest">
        <parameter name="config" value="sub" />
        <groups>
            <run>
                <include name="group1"/>
            </run>
        </groups>
        <packages>
            <package name="com.company.test.*" />
        </packages>
    </test>
</suite> 
```

虽然我似乎没有得到组模式

# search - Umbraco：删除用户时，该用户一直出现在搜索结果中

> ID：15123121
> 
> 赞同：1
> 
> 时间：2013-02-27T21:49:33.257
> 
> 标签：search, asp.net-membership, umbraco

我基于 asp.net CreateUserWizard 控件为 Umbraco 创建了 Register Member 用户控件。这个控件很好用，因为用户是按照我想要的方式创建的。但是，当我从成员部分的后端删除用户时，用户会从用户树中消失，但不会从搜索结果中消失。用户是否真的被删除了，我是否还需要以某种方式更新搜索索引。如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:47:53.897

如果您使用 Umbraco Membership 提供程序，我想说的第一步是打开您的数据库并查看您的**cmsMember**表以查看用户是否仍然存在。如果他们不这样做，那么您可能正在查看缓存问题，但是您实际上不需要采取任何其他步骤来刷新缓存。

当您说搜索结果时，您是指来自 Umbraco 后端的成员搜索还是自定义成员搜索？另外你运行的是什么版本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-22T19:32:39.507

Umbraco 只是禁用成员，而不是在数据库中删除它。在您的研究请求中，尝试添加对处于激活状态或未禁用状态的成员的限制。

# c# - 如何在 asp.net 中发回 JSON？

> ID：15123125
> 
> 赞同：2
> 
> 时间：2013-02-27T21:49:51.443
> 
> 标签：c#, asp.net, json

假设我会在 PHP 中有这个：

```
<?php

    $year = date('Y');
    $month = date('m');

    echo json_encode(array(

        array(
            'id' => 111,
            'title' => "Event1",
            'start' => "$year-$month-10",
            'url' => "http://yahoo.com/"
        ),

        array(
            'id' => 222,
            'title' => "Event2",
            'start' => "$year-$month-20",
            'end' => "$year-$month-22",
            'url' => "http://yahoo.com/"
        )

    ));

?> 
```

我该怎么做才能在 asp .net 中获得等价物？

就像如果用户去`giveMeJson.aspx` 我希望它返回与`giveMeSomeJson.php`.

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T22:17:46.013

在空 .aspx 后面的代码中（使用 Json.Net）：

```
using Newtonsoft.Json;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebApplication1
{
    public partial class giveMeSomeJson : System.Web.UI.Page
    {
        protected override void OnLoad(EventArgs e)
        {
            Response.ContentType = "text/json";

            var year = DateTime.Now.Year;
            var month = DateTime.Now.Month;

            Response.Write(JsonConvert.SerializeObject(new[]
                {
                    new
                    {
                        id = "111",
                        title = "Event1",
                        start = String.Format("{0}-{1}-10", year, month),
                        url = "http://yahoo.com/"
                    },
                    new
                    {
                        id = "222",
                        title = "Event2",
                        start = String.Format("{0}-{1}-20", year, month),
                        url = "http://yahoo.com/"
                    }
                }));
        }
    }
} 
```

或者，仅使用 .aspx 中的代码：

```
<%@ Page Language="C#" %>
<%@ Import Namespace="Newtonsoft.Json" %>
<script runat="server">
    string json = JsonConvert.SerializeObject(new[]
        {
            new
            {
                id = "111",
                title = "Event1",
                start = String.Format("{0}-{1}-10", DateTime.Now.Year, DateTime.Now.Month),
                url = "http://yahoo.com/"
            },
            new
            {
                id = "222",
                title = "Event2",
                start = String.Format("{0}-{1}-20", DateTime.Now.Year, DateTime.Now.Month),
                url = "http://yahoo.com/"
            }
        }); 
</script>
<%= json %> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-27T21:57:44.197

无需深入了解在 ASP.NET 中写入输出的各种方法（有很多），您可以使用`JavaScriptSerializer`JSON.NET 或 JSON.NET 将 .NET 数组序列化为 JSON，然后将其写入输出。

使用 JSON.NET，它是：

```
Person[] arr = new[] { new Person { Name = "John" }, new Person { Name = "Jane" } };
string json = JsonConvert.SerializeObject(arr); 
```

`json`现在可以将字符串写入响应。您可以使用`Literal`控件或`<%= %>`语法，或直接写入响应对象等。

**编辑**：

最简单的例子是：

```
<%@ Page Language="C#" %>
<%@ Import Namespace="Newtonsoft.Json" %>

<%
    Person[] arr = new[] { new Person { Name = "John" }, new Person { Name = "Jane" } };
    string json = JsonConvert.SerializeObject(arr);
%>
<%= json %> 
```

这会像 PHP 一样在页面本身上完成所有工作，并将输出写入页面。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T21:56:14.167

如果您使用的是 ASP.NET MVC，那么

```
public JsonResult GetSomeJson()
{
    var myModel = getSomeModel
    return Json(myModel);
} 
```

* * *

更新-所以网络表单？我不做网络表单，但它就像

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)] 
public MyModel GetSomeJson()
{
  MyModel myModel = getSomeModel;
  return myModel;
} 
```

# c++ - sdl：以全屏模式解锁鼠标并使其可在另一台显示器上使用

> ID：15123134
> 
> 赞同：0
> 
> 时间：2013-02-27T21:50:17.467
> 
> 标签：c++, sdl

是否可以在全屏模式下解锁鼠标，以便您可以在另一台显示器上使用它？我阅读了 SDL 文档，但找不到与我的问题相关的任何内容。

编辑：几天前我在[http://gamedev.stackexchange](http://gamedev.stackexchange)上发布了同样的问题，但没有人回答，因此我交叉发布到主站点 [https://gamedev.stackexchange.com/questions/49948/sdl-unlock-mouse -in-fullscreen-mode-and-make-it-useable-on-another-monitor](https://gamedev.stackexchange.com/questions/49948/sdl-unlock-mouse-in-fullscreen-mode-and-make-it-useable-on-another-monitor)

edit2：我已经在外部程序的帮助下尝试过窗口全屏模式，但性能比全屏模式差很多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:02:52.367

我看不出有什么办法。

您可以使用 SDL_SetVideoMode() 来伪造它。将其设置为桌面的确切大小并使用 SDL_NOFRAME 标志。桌面大小可以通过

```
const SDL_VideoInfo* videoInfo = SDL_GetVideoInfo();    //get desktop size
desktopWidth = videoInfo->current_w;
desktopHeight = videoInfo->current_h; 
```

这个黑客可以在任何分辨率下工作。

# python - 如何在 Python 3.2 程序中从无异常语法中优雅地包含 Python 3.3？

> ID：15123137
> 
> 赞同：4
> 
> 时间：2013-02-27T21:50:22.320
> 
> 标签：python, exception, python-3.2, python-3.3, forward-compatibility

我正在尝试重新引发异常，以便为用户提供有关实际错误的更好信息。Python 3.3 包括[PEP 409](http://www.python.org/dev/peps/pep-0409/)。它添加了`raise NewException from None`抑制原始异常上下文的语法。

但是，我的目标是 Python 3.2。Python 脚本将解析，但在运行时如果遇到`from None`它将生成的语法 `TypeError: exception causes must derive from BaseException`。例如：

```
try:
    regex_c = re.compile('^{}$'.format(regex)) 
except re.error as e:
    e_msg = 'Regular expression error in "{}"'.format(regex)
    e_reraise = Exception(e_msg)
    # Makes use of the new Python 3.3 exception syntax [from None]
    # to suppress the context of the original exception
    # Causes an additional TypeError exception in Python 3.2
    raise e_reraise from None 
```

封装`raise e_reraise from None`在一个`try`just 中会产生一个更大的异常堆栈跟踪。版本检查也不起作用，因为我`python3.3`在 Xubuntu 12.10 上提取`/usr/lib/python3/dist-packages/*`了为 python3.2 模块设置的模块。（你会得到一个方便`Error in sys.excepthook:`，它会产生**大量的**回溯。）

有没有办法在 Python 3.3 中运行时使用 PEP 409 功能，而在 Python 3.2 中默默地忽略它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T22:14:55.463

您可以`exc.__cause__ = None`在 Python 3.3 中设置禁止上下文打印：

```
except re.error as e:
    e_msg = 'Regular expression error in "{}"'.format(regex)
    e_reraise = Exception(e_msg)
    e_reraise.__cause__ = None  # 'raise e_reraise from None'
    raise e_reraise 
```

在 Python 3.3 中，当你使用时`raise exc from cause`，真正发生的是：

```
exc.__cause__ = cause
raise exc 
```

并设置`exc.__cause__`反过来隐式设置`exc.__suppress_context__ = True`。请参阅[PEP 415](http://www.python.org/dev/peps/pep-0415/)，其中详细说明了如何`raise exc from None`处理。

`exc.__cause__ = None`在 Python 3.2 中设置时，没有任何变化：

```
$ python3.2
Python 3.2.3 (default, Apr 13 2012, 13:31:19) 
[GCC 4.2.1 Compatible Apple Clang 3.0 (tags/Apple/clang-211.12)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> try:
...     raise ValueError()
... except:
...     exc = TypeError()
...     exc.__cause__ = None
...     raise exc
... 
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
ValueError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "<stdin>", line 6, in <module>
TypeError 
```

但是在 Python 3.3 中，上下文被抑制了：

```
$ python3.3
Python 3.3.0 (default, Sep 29 2012, 08:16:08) 
[GCC 4.2.1 Compatible Apple Clang 3.1 (tags/Apple/clang-318.0.58)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> try:
...     raise ValueError()
... except:
...     exc = TypeError()
...     exc.__cause__ = None
...     raise exc
... 
Traceback (most recent call last):
  File "<stdin>", line 6, in <module>
TypeError 
```

就像您使用过一样`raise exc from None`：

```
>>> try:
...     raise ValueError()
... except:
...     raise TypeError() from None
... 
Traceback (most recent call last):
  File "<stdin>", line 4, in <module>
TypeError 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T22:17:10.347

您链接的 PEP 提供了解决方案：

> *   `raise NewException() from None`
> 
> 遵循显式声明原始异常的现有语法
> 
> *   `exc = NewException(); exc.__context__ = None; raise exc`
> 
> 前一种方法的非常冗长的方式

因此，您只需避免使用新语法并使用冗长的等价物。

如果您不想看到分配，可以将代码放入函数中：

```
def suppress_context(exc):
    exc.__context__ = None
    return exc 
```

然后做：

```
raise suppress_context(TheErrorClass()) 
```

**编辑：正如Martijn** [PEP 415](http://www.python.org/dev/peps/pep-0415/)指出的那样改变了这种行为：

> 总而言之，`raise exc from cause`将相当于：
> 
> ```
> exc.__cause__ = cause
> raise exc 
> ```

因此，您应该设置为，而不是设置`__context__`为。`None``__cause__``None`

如果您真的想使用新语法，那么唯一的方法是替换`sys.excepthook`为解析回溯输出并删除您不想要的部分的内容。但在这种情况下，您还*必须*这样做：

```
try:
    raise error from None
except TypeError:
    raise error 
```

然后`excepthook`应该搜索回溯以及是否应该删除与该`raise error from None`行相关的部分。这不是一项简单的任务，您最终会得到比其他解决方案更多的代码。

# math - 获得重叠的“深度”？

> ID：15123141
> 
> 赞同：2
> 
> 时间：2013-02-27T21:50:33.827
> 
> 标签：math, collision-detection, overlap

这是一个几乎与平台无关的数学问题。我有两个重叠的正方形。我需要知道“重叠深度”（一种形状进入另一种形状的程度）。我需要这些数据来允许适当的碰撞（将玩家移回重叠深度）。有没有更简单的方法？还是我最好坚持以下几点；

`rA`是一个矩形，所以 ia `rB`。

```
depth.x = (rA.position.x - rB.position.x);
depth.y = (rA.position.y - rB.position.y); 
```

`rA`这会返回一些不正确的信息，因为它不是返回重叠深度，而是返回和之间的距离`rB`（预期）。问题是，我无法计算出找到两个对象的重叠深度的公式。即使我已经知道有碰撞，我是否需要以某种方式考虑对象大小？

有人建议我可以做到`depth.x = (rA.width/2) - (rA.position.x - rB.position.x)`。但是，如果 rB 在左侧，这将不起作用，因为它会这样做`-10(example) - 50`，这将是无效的 ( `-60`)。我宁愿避免冗长的`if`陈述，并坚持只知道它们有多少重叠。那么，有可能解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:16:37.327

我将假设您的正方形轴对齐，但展示一种即使它们不是也可以工作的技术。

# 一般结果（凸多边形）

该方法依赖于两组的 Minkowski 差，这是一种寻找交叉点的常用技术。

两个凸形状的 Minkowski 差是凸的，如果两个原始集合都是多边形，则结果形状是多边形。这意味着它可以表示为一组方程![n_i.x>c_i](../Images/14a0c8a733ec3535e65740e00df67305.png)，其中每个 n [i]都是单位法线。

因此，确定两个形状是否相交的算法是：

1.  确定两种形状的闵可夫斯基差。
2.  确定原点是否落入闵可夫斯基和内（如果所有 都为真`c_i<0`）

然后是深度的度量`max(c_i)`

# 轴对齐正方形的特殊情况

现在对于两个轴对齐的正方形，Minkowski 和只是另一个轴对齐的正方形。以正方形 A 为中心，`(cA_x,cA_y)`以宽`WA`和高为中心，`HA`我们可以将其表示为：

```
 A = { (cA_x + a WA/2, cA_y + b HA/2), where -1<=a<=1, -1<=b<=1 } 
```

同样，正方形 B 将是：

```
 B = { cB_x + c WB/2, cB_y + d HB/2), where -1<=c<=1, -1<=b<=1 } 
```

那么闵可夫斯基差是

```
 A-B = { (cA_x - cB_x + a WA/2 - c WB/2, cA_y - cB_y + b HA/2 - d HB/2), where ... }
     = { (cA_x - cB_x + r (WA-WB)/2, A_y - cB_y + s (HA-HB)/2), where -1<=s<=1, -1<=r<=1 } 
```

那么的 4 个边`A-B`是

```
 x > (cA_x-cB_x) - |WA-WB|/2
 y > (cA_y-cB_y) - |HA-HB|/2
 x < (cA_x-cB_x) + |WA-WB|/2
 y < (cA_y-cB_y) + |HA-HB|/2 
```

最后两个可以改写为

```
 x > -(cA_x-cB_x) - |WA-WB|/2
 y > -(cA_y-cB_y) - |HA-HB|/2 
```

因此我们发现相交的深度为：

```
 min(
     (cA_x-cB_x) - |WA-WB|/2,
     (cA_y-cB_y) - |HA-HB|/2,
    -(cA_x-cB_x) - |WA-WB|/2,
    -(cA_y-cB_y) - |HA-HB|/2 ) 
```

仅当此深度为正时才会发生相交。

（注意：我在写这篇文章时一直在计算数学，所以很可能我在这里或那里有一个不正确的符号......请随时纠正任何此类错误......）

# css - -webkit-transform(hover tooltip) 在 Safari (Windows 7) 中不起作用，但在 Chrome、Opera、IE 9 和 Firefox 中起作用（所有最新版本）

> ID：15123143
> 
> 赞同：0
> 
> 时间：2013-02-27T21:50:37.480
> 
> 标签：css, safari, webkit, tooltip, transform

我尝试悬停以在 Windows 7 的 Safari 中弹出工具提示，但未成功。它适用于 Chrome、IE 9、Firefox 和 Opera（所有最新版本）。如果我注释掉几行 CSS，我可以在 Safari 中弹出工具提示，尽管我想要的“淡入”效果也会消失——但它可以工作。（我在下面指出了注释掉的块行）。谁能帮我理解 1\. 如何解决这个问题？2\. 为什么两个 webkit 浏览器的工作方式不同？

这是代码（首先是 HTML 部分，然后是 CSS 部分）。

HTML（相关部分）：

```
 <div class="mycontainer">
       <div class="myblock has-tooltip">Content I can hover over<span  class="tooltip">content in tooltip popup</span></div>
    </div> 
```

CSS（相关部分）：

```
.has-tooltip {
cursor: help;
font-family: "Gill Sans", Impact, sans-serif; 
font-size: 20px; */
margin: 20px 75px 10px 45px;
padding: 0.5em;
position: relative;
text-transform: uppercase;
-webkit-transform: translateZ(0); /* webkit flicker fix */
-webkit-font-smoothing: antialiased; /* webkit text rendering fix */ 
```

}

```
.has-tooltip .tooltip {
background: #FF6600;
bottom: 100%;
color: #fff;
font-size: 0.8em;
font-weight:100;
display: block;
left: -1em;
margin-bottom: 0.6em;
opacity: 0;
padding: 1em;
position: absolute;
visibility: hidden;
width: 140%; 

-webkit-transform: translateX(0px) translateY(10px);
   -moz-transform: translateX(0px) translateY(10px);
    -ms-transform: translateX(0px) translateY(10px);
     -o-transform: translateX(0px) translateY(10px);
        transform: translateX(0px) translateY(10px); 
```

/* 注意：如果我在 Safari 中的工具提示显示下方评论此块 */

```
 -webkit-transition: all 1s ease-out;
   -moz-transition: all 1s ease-out;
    -ms-transition: all 1s ease-out;
     -o-transition: all 1s ease-out;
        transition: all 1s ease-out; 
```

/* 注意：如果我在工具提示上方评论这个块也显示了 Safari */

```
-webkit-box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.28);
   -moz-box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.28);
    -ms-box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.28);
     -o-box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.28);
        box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.28); 
```

}

```
/* This bridges the gap so you can mouse into the tooltip without it disappearing */
.has-tooltip .tooltip:before {
bottom: -1em;
content: " ";
display: block;
height: 1em;
left: 0;
position: absolute;
width: 100%; 
```

}

```
/* CSS Triangles - see Trevor's post */
.has-tooltip .tooltip:after {
border-left: solid transparent 0.5em;
border-right: solid transparent 0.5em;
border-top: solid #FF6600 0.5em;
bottom: -0.5em;
content: " ";
height: 0;
left: 50%;
margin-left: -1em;
position: absolute;
width: 0; 
```

}

```
.has-tooltip:hover .tooltip {
opacity: 1;
visibility: visible; 
-webkit-transform: translateX(0px) translateY(0px) !important;
   -moz-transform: translateX(0px) translateY(0px) !important;
    -ms-transform: translateX(0px) translateY(0px) !important;
     -o-transform: translateX(0px) translateY(0px) !important;
        transform: translateX(0px) translateY(0px) !important; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:33:06.033

您的代码（包括您指出的部分）在 Mountain Lion 上的 Safari 6.0.2 中对我来说很好。[http://i.imgur.com/YyNsQ09.png](http://i.imgur.com/YyNsQ09.png)

# qt - QT 桌面应用程序与嵌入式 webkit 之间的通信

> ID：15123147
> 
> 赞同：1
> 
> 时间：2013-02-27T21:50:43.000
> 
> 标签：qt, qtwebkit

我是 QT 编程的新手。Qt 可以在 Qt 桌面应用程序中嵌入 webkit 控件。是否存在任何方式在 C++ Qt 桌面应用程序和 webkit 中打开的网站之间进行通信？例如，我想从我们的网站管理员创建的站点加载页面并获取该站点上发生的事件。或者另一个例子：通过 webkit 进行 facebook 授权，我的 QT 应用程序应该知道状态。

问候

# java - 在 Bouncy Castle 中创建密钥使用离线 CRL 签名

> ID：15123152
> 
> 赞同：0
> 
> 时间：2013-02-27T21:50:53.550
> 
> 标签：java, x509certificate, bouncycastle

如何通过 bouncy casle 创建密钥使用离线 CRL 签名？我知道如何创建预定义的 keyCertSign 或其他使用常量...

```
import org.bouncycastle.asn1.x509.KeyUsage;
KeyUsage keyUsage = new KeyUsage(KeyUsage.keyCertSign | KeyUsage.cRLSign); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T06:35:12.897

KeyUsage.cRLSign 应该涵盖 CRL 签名和离线 CRL 签名。根据 X.509 规范[RFC 5280](https://www.rfc-editor.org/rfc/rfc5280#section-4.2.1.3)，只有 9 种基本密钥用法。

```
 KeyUsage ::= BIT STRING {
       digitalSignature        (0),
       nonRepudiation          (1), -- recent editions of X.509 have
                            -- renamed this bit to contentCommitment
       keyEncipherment         (2),
       dataEncipherment        (3),
       keyAgreement            (4),
       keyCertSign             (5),
       cRLSign                 (6),
       encipherOnly            (7),
       decipherOnly            (8) } 
```

如果设置了 cRLSign 位，并且您在 IE 中打开证书，您将看到“离线 CRL 签名，CRL 签名”。其他证书查看者可能只会说“CRL 签名”。

# javascript - 页面不可见时暂停的超时

> ID：15123154
> 
> 赞同：0
> 
> 时间：2013-02-27T21:51:00.490
> 
> 标签：javascript, performance

我想要一个与 setTimeout 类似的计时器 API，但不同之处在于当页面不活动/不可见时计时器会暂停。

```
setActiveTimeout(function(){ alert('hi') }, 10000); 
```

换句话说，如果用户在计时器前五秒切换到另一个选项卡，等待一小时，然后切换回来，他们会在切换回来五秒*后*收到警报。

原因是，a) 节省 CPU 周期，b) 当用户返回到包含异步定期更新的页面时，不会出现“堆积”行为。

我想我可以尝试使用新的页面可见性 API 或 requestAnimationFrame() 或它们的某种组合来构建一个执行此类操作的库，但这似乎很复杂，我希望有人可能知道一个简单的解决方案，或者执行此操作的库。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:53:58.397

我会尝试在`blur`事件中停止计数器，然后重新启动`focus`：

```
window.onfocus = function(e) {
    // restart counter
    // I recommend setInterval
}

window.onblur = function(e) {
    // stop counter
    // with clearInterval
} 
```

# angularjs - AngularJS - ng-click - ng-class - 切换禁用/启用

> ID：15123158
> 
> 赞同：2
> 
> 时间：2013-02-27T21:51:23.533
> 
> 标签：angularjs

**我有这个表行：**

```
<table>
<tr ng-repeat="truckWheelbase in truckWheelbases | orderBy:sortFunction" ng-click="toggleRow($index)">                            
   <td>
      <!--Wheelbase-->                    
      <label class="checkbox" for="{{truckWheelbase.Id}}">
         <input type="checkbox" ng-model="selection.Ids[truckWheelbase.Id]" id="{{truckWheelbase.Id}}">
            {{truckWheelbase.WheelBaseGrade}} - {{truckWheelbase.Inches}} inches
      </label>
   </td>
   <!--Payload-->  
   <td>
      <input id="{{truckWheelbase.Payload}}" type="number" ng-class="getClass({{truckWheelbase.Id}})">
   </td>
</tr>
             .......remaining rows ............
</table> 
```

**我要完成的工作：**

在页面加载开始时，每个表格行的所有控件都被禁用**，除了第 1 列中的复选框控件**。

当用户选中/取消选中相应行的复选框时，该行中的所有控件都将启用/禁用。

我没有取得太大的成功，但我确信**ng-class**是必需的，并且控制器中的**toggleRow($index)**会将类设置为 disabled="disabled" 或只是空白。

有任何想法吗？

**插图：**

![在此处输入图像描述](../Images/cbf85859d4e4abd3afa489df08be48d1.png)

**镁铁矿**

**ng-disabled="!selection.Ids[truckWheelbase.Id]"** 确实禁用了页面加载时的所有控件，但是如何实现**ng-class="getClass({{truckWheelbase.Id}})"**以启用检查框点击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:41:35.010

我不确定你的`toggleRow()`函数到底在做什么，但我认为它正在改变`selection.Ids`对象。如果是这种情况，您只需要使用相同的信息来启用/禁用输入。为此，请使用`ng-disabled`指令：

```
<!--Payload-->  
<td>
    <input id="{{truckWheelbase.Payload}}" type="number" ng-class="getClass({{truckWheelbase.Id}})" 
           ng-disabled="!selection.Ids[truckWheelbase.Id]">
</td> 
```

# javascript - json字符编码错误

> ID：15123160
> 
> 赞同：0
> 
> 时间：2013-02-27T21:51:26.733
> 
> 标签：javascript, json, character-encoding

我的 json 字符编码错误。我需要查阅这个 json url，但结果有错误的字符，尤其是重音字符。

```
http://gbrds.gbif.org/registry/resource/33d52667-27bd-45fd-b710-2854751aac72.json 
```

是否有可能获得正确的文本？（javascript中的一些功能 - jquery）

# graph - highcharts 折线图中的缺失值导致没有线，只有点

> ID：15123163
> 
> 赞同：17
> 
> 时间：2013-02-27T21:51:41.757
> 
> 标签：graph, highcharts, line, missing-data

请看一下：

[http://jsfiddle.net/2rNzr/](http://jsfiddle.net/2rNzr/)

```
var chart = new Highcharts.Chart({

    chart: {
        renderTo: 'container'
    },

    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    },

    series: [{
        data: [29.9, '', 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
    }]

}); 
```

您会注意到数据中有一个空白值（第二个值），这会导致折线图显示不正确。

这是一个错误吗？

指定缺失值的正确方法是什么，因此折线图中会有间隙？即我不希望折线图简单地在点 1 和 3 之间画一条线。

非常感谢您生产出色的产品！

托尼。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-27T22:12:02.647

您需要将缺失值更改为 null，并指定您想要通过现有值的线/样条。

```
var chart = new Highcharts.Chart({

    chart: {
        defaultSeriesType: 'line',
        renderTo: 'container'
    },

    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    },

    series: [{
        data: [29.9, null, 106.4, 129.2, 144.0, 176.0, null, 148.5, 216.4, 194.1, 95.6, 54.4],
    }]

}); 
```

请参阅[http://jsfiddle.net/xynZT/](http://jsfiddle.net/xynZT/)，以 defaultSeriesType: 'spline' 为例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:14:55.873

它没有显示不正确，它只是绘制了一个散点图。我认为这是因为您没有完整的系列，因此会被这样对待。我可能，这取决于您的数据不使用负数，尝试将没有数据的集合设置为 0，这样您就有了`data: [29.9, 0, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]`，这将显示一条线。

# ms-access - 访问前端打不开

> ID：15123167
> 
> 赞同：0
> 
> 时间：2013-02-27T21:51:48.343
> 
> 标签：ms-access, vba

我已经建立了一个分为前端和后端的访问数据库。这个前端有相当多的 VBA 编程。我把它们都放在我们工作时的共享驱动器上，供所有用户使用。但是，我是唯一可以打开它的人。当其他用户打开它时，只需访问 Access 的主屏幕，它会显示打开的最近文件、新数据库等。但是，如果我在其他人的计算机上使用我的帐户登录，我就可以打开它。任何想法为什么用户无法打开它？我将它作为 .accde 发布，所以所有的 VBA 都会被编译，所以它不应该是一个参考错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:15:36.277

好吧，我在发布我的问题时有点仓促，我只是发现了问题。后端存储在共享驱动器上访问受限的文件夹中，因此我们不必担心任何用户访问数据，但是，这意味着无权访问该文件夹的用户，AKA 不是我，无法打开前端。解决方案：锁定后端并将其放在共享位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:28:45.517

检查后端数据库中的链接表以及对它们的任何 VBA 引用是否具有*完全*限定的网络驱动器路径。我遇到了与此问题相关的类似情况。

即使每个人都可以访问数据库以及共享驱动器，但在 Novell 等一些网络系统中，每个用户的共享驱动器权限都是单独映射和别名的。因此，相同的网络驱动器路径可以映射到不同用户的不同驱动器号。

因此，例如，当您登录时，您可能会看到该文件位于 G:\Shared Stuff 但是，另一个用户完全有可能将此网络驱动器映射到 H:\Shared Stuff。结果，他们仍然可以看到您的前端数据库，但是任何引用或链接到 G:\Shared Stuff 的交互对他们来说都将失败，因为您打算引用的驱动器已映射到他们的 H: 驱动器。如果您使用 Access 向导拆分数据库或创建链接表，这很容易发生。

如果您使用的是使用驱动器号的文件系统（例如 Novell），则解决方案是使用完整的文件路径，包括被映射驱动器号抽象出来的路径部分。因此，例如，您可能需要使用 \\Company Data\My Department's Data\Shared Stuff 来代替 G:\Shared Stuff。

在 Novell 中，您可以通过查看“映射网络驱动器”来找到完整的网络路径。

这不是发生这种情况的唯一原因，但值得检查！祝你好运。

# javascript - 弹出窗口未关闭

> ID：15123169
> 
> 赞同：0
> 
> 时间：2013-02-27T21:51:57.093
> 
> 标签：javascript, popupwindow

我有一个弹出窗口，应该在 onLoad 期间关闭。使用的脚本是

```
<body onLoad="window.opener.findPersonResults('undefined');this.close()"> 
```

但它并没有关闭这个弹出窗口。我希望它在加载后立即关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:56:16.913

尝试替换`this.close()`为`window.close()`.

# c - 在库中检测应用程序的键盘和鼠标事件

> ID：15123170
> 
> 赞同：0
> 
> 时间：2013-02-27T21:51:59.480
> 
> 标签：c, macos, events, keyboard, mouse

我想要达到的目标：

目标是制作一个 Mac OS X 库 - dylib/bundle/framework，它拦截加载该库的应用程序的所有鼠标和键盘事件。我只想记录这些事件，而不是更改它们。该库需要有一个 C API 来公开记录事件的详细信息。

我目前所做的：

我已经实现了两种方法来从应用程序加载的库中检测应用程序的鼠标和键盘事件：

1) 使用 Carbon 安装事件处理程序。出于某种原因，使用 InstallApplicationEventHandler 或 InstallEventHandler( GetApplicationEventTarget(), ... ) 没有成功。只能捕获所有非应用程序事件（所有事件，除了那些传递到加载我的库的目标应用程序的事件）。

2）CGEventTaps：鼠标（[http://osxbook.com/book/bonus/chapter2/altermouse/](http://osxbook.com/book/bonus/chapter2/altermouse/)）和键盘（[http://osxbook.com/book/bonus/chapter2/alterkeys/](http://osxbook.com/book/bonus/chapter2/alterkeys/)）。这些工作，但在系统范围内。我希望我的库仅捕获传递给已加载它的应用程序的事件。

有谁知道如何创建应用程序范围的键盘和鼠标挂钩/点击，而不是系统范围的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T05:33:37.160

可以使用[CGEventTapCreateForPSN](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html)创建应用程序特定的事件点击。当前申请进程序列号可以使用
`ProcessSerialNumber currentProcess; GetCurrentProcess(&currentProcess);`

然后为此 PSN 创建并点击事件。

# sql - 数据库创建错位括号PK

> ID：15123174
> 
> 赞同：0
> 
> 时间：2013-02-27T21:52:25.440
> 
> 标签：sql, primary-key, create-table, sqlfiddle

我正在通过 SQLFiddle 创建这些数据库表，并且出现了一个我认为没有问题的错误。它与`Club`底部的主键有关，告诉我`(`放错了位置。这个脚本有什么问题，为什么？

[SQLFiddle](http://sqlfiddle.com/#!2/f08ed)

```
CREATE TABLE Club
(
  CLUB_ID int NOT NULL,
  CLUB_NAME varchar(255) NOT NULL,
  STREET_ADDRESS varchar(255) NOT NULL,
  CITY varchar(255) NOT NULL,
  STATE varchar(2) NOT NULL,
  ZIPCODE int NOT NULL,
  PHONE int NOT NULL,
  PRIMARY KEY(CLUB_ID)
);

CREATE TABLE Member
(
  MEMBER_ID int NOT NULL,
  FIRST_NAME varchar(255) NOT NULL,
  LAST_NAME varchar(255) NOT NULL,
  STREET_ADDRESS varchar(255) NOT NULL,
  CITY varchar(255) NOT NULL,
  STATE varchar(2) NOT NULL,
  ZIPCODE int NOT NULL,
  PRIMARY KEY(MEMBER_ID)
);

CREATE TABLE Phone
(
  PHONE_ID int NOT NULL,
  MEMBER_ID int,
  PHONE_TYPE varchar(255) NOT NULL,
  PHONE_NUMBER int NOT NULL,
  PRIMARY KEY(PHONE_ID),
  FOREIGN KEY(MEMBER_ID) REFERENCES Member(MEMBER_ID)
);

CREATE TABLE Membership
(
  MEMBERSHIP_ID int NOT NULL,
  MEMBER_ID int,
  CLUB_ID int,
  JOIN_DATE varchar(255) NOT NULL,
  END_DATE varchar(255),
  REASON varchar(255),
  PRIMARY KEY(MEMBERSHIP_ID),
  FOREIGN KEY(MEMBER_ID) REFERENCES Member(MEMBER_ID),
  FOREIGN KEY(CLUB_ID) REFERENCES Club(CLUB_ID)
);

CREATE TABLE Talent
(
  TALENT_ID int NOT NULL,
  TALENT_NAME varchar(255) NOT NULL,
  DESCRIPTION varchar(255) NOT NULL,
  PRIMARY KEY(TALENT_ID)
);

CREATE TABLE Member_Talent
(
  MEMBER_ID int,
  TALENT_ID int,
  PRIMARY KEY(MEMBER_ID, TALENT_ID),
  FOREIGN KEY(MEMBER_ID) REFERENCES Member(MEMBER_ID),
  FOREIGN KEY(TALENT_ID) REFERENCES Talent(TALENT_ID)
);

CREATE TABLE Award
(
  AWARD_ID int NOT NULL,
  AWARD_NAME varchar(255) NOT NULL,
  DESCRIPTION varchar(255) NOT NULL,
  PRIMARY KEY(AWARD_ID)
);

CREATE TABLE Member_Award
(
  MEMBER_AWARD_ID int NOT NULL,
  MEMBER_ID int,
  AWARD_ID int,
  AWARD_DATE varchar(255) NOT NULL,
  PRIMARY KEY(MEMBER_AWARD_ID),
  FOREIGN KEY(MEMBER_ID) REFERENCES Member(MEMBER_ID),
  FOREIGN KEY(AWARD_ID) REFERENCES Award(AWARD_ID),
);

CREATE TABLE Office
(
  OFFICE_ID int NOT NULL,
  CLUB_ID int,
  OFFICE_NAME varchar(255) NOT NULL,
  DESCRIPTION varchar(255) NOT NULL,
  PRIMARY KEY(OFFICE_ID),
  FOREIGN KEY(CLUB_ID) REFERENCES Club(CLUB_ID)
);

CREATE TABLE Officer
(
  OFFICER_ID int NOT NULL,
  OFFICE_ID int,
  MEMBER_ID int,
  YEAR int NOT NULL,
  PRIMARY KEY(OFFICER_ID),
  FOREIGN KEY(OFFICE_ID) REFERENCES Office(OFFICE_ID),
  FOREIGN KEY(MEMBER_ID) REFERENCES Member(MEMBER_ID)
);

CREATE TABLE Project
(
  PROJECT_ID int NOT NULL,
  CLUB_ID int,
  PROJECT_NAME varchar(255) NOT NULL,
  DESCRIPTION varchar(255) NOT NULL,
  PROJECT_DATE varchar(255) NOT NULL,
  PROJECT_TYPE varchar(255) NOT NULL,
  COST int NOT NULL,
  REVENUE int NOT NULL,
  PRIMARY KEY(PROJECT_ID),
  FOREIGN KEY(CLUB_ID) REFERENCES Club(CLUB_ID)
);

CREATE TABLE Member_Project
(
  MEMBER_ID int,
  PROJECT_ID int,
  PRIMARY KEY(MEMBER_ID, PROJECT_ID),
  FOREIGN KEY(MEMBER_ID) REFERENCES Member(MEMBER_ID),
  FOREIGN KEY(PROJECT_ID) REFERENCES Project(PROJECT_ID)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:00:27.553

找到给你问题的指令......

```
CREATE TABLE Member_Award
(
  MEMBER_AWARD_ID int NOT NULL,
  MEMBER_ID int,
  AWARD_ID int,
  AWARD_DATE varchar(255) NOT NULL,
  PRIMARY KEY(MEMBER_AWARD_ID),
  FOREIGN KEY(MEMBER_ID) REFERENCES Member(MEMBER_ID),
  FOREIGN KEY(AWARD_ID) REFERENCES Award(AWARD_ID),
); 
```

删除 , 之后`Award(AWARD_ID)`

[SQL小提琴](http://sqlfiddle.com/#!2/1ec76)

# django - Django 1.5 图形扩展 -x 选项被忽略

> ID：15123181
> 
> 赞同：1
> 
> 时间：2013-02-27T21:52:44.467
> 
> 标签：django, graphviz, pygraphviz

我使用`django-extensions`命令来可视化我的 Django 项目（Django 版本 1.5）的数据库结构`python manage.py graph_models my_model -x user -o output.png`。

不幸的是，升级到 Django 1.5 后，graph_models 忽略了选项`-x`. 此选项可用于从图表中排除模型。

由于我的`user`Django 应用程序的几乎所有模型中都有该模型，因此将用户排除在图表之外对我来说很重要。否则图表会变得太满且难以阅读。

对于如何解决该问题的任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:01:42.527

我意识到这与 Django 1.5 无关。

我必须做的是`-x`用大写选项替换`-X`选项。第一个是排除列，第二个是排除模型。我所做的是将列（模型字段）从`user`to重命名`creator`，因此列名不再匹配，因此再次出现在图表上。

我发现[django-extensions github 存储库](https://github.com/django-extensions/django-extensions/blob/master/django_extensions/management/commands/graph_models.py)`graph_models`中的选项存在差异。

最后起作用的命令如下：

`python manage.py graph_models mymodel1 mymodel2 -g -X User -o mygraph.png`

# node.js - 猫鼬 findOneAndUpdate 不工作

> ID：15123182
> 
> 赞同：33
> 
> 时间：2013-02-27T21:52:46.027
> 
> 标签：node.js, mongoose

我正在尝试在 mongoose 中使用“findOneAndUpdate”，而我发送的更新的 JS 对象没有保存到 mongo。保存时我没有收到错误，但我确实为更新的对象返回了一个空值。有什么想法我可能做错了吗？这个示例试图更新存储在 mongo 中的整个对象，即覆盖名称对象。

```
var query = {"_id": id};
var update = {name: {first: 'john', last: 'smith'}};
var options = {new: true};
People.findOneAndUpdate(query, update, options, function(err, person) {
  if (err) {
    console.log('got an error');
  }

  // at this point person is null.
}); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-28T01:49:01.390

原来我正在搜索的 id 不存在，因此返回 null。按预期工作！

# api - 向国会/参议院发送信函的 API？

> ID：15123186
> 
> 赞同：1
> 
> 时间：2013-02-27T21:53:08.750
> 
> 标签：api

我正在创建一个网站，该网站将具有“将这封信作为电子邮件发送给您的国会/参议院代表”功能。我找到了一些提供物理地址的 API，但我正在寻找电子邮件地址。有谁知道允许此功能（付费或免费）的 API？我需要按邮政编码查找代表。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:21:25.337

事实证明，参议员的电子邮件地址不再公开。使用第 3 方服务，CQRC Engage。

# c - 指针符号

> ID：15123187
> 
> 赞同：6
> 
> 时间：2013-02-27T21:53:16.620
> 
> 标签：c, arrays, pointers

我不觉得指针理论特别麻烦，但我偶尔会被一些符号弄糊涂。在下面的例子中，有人能解释一下这条线是如何`p = (int*) a`工作的。我对代码的解释表明，这一行只是将第一个数组的第一个元素的地址存储在指针 p 中，这样就可以`printf("%u", *p)`产生`5`. 如果是这样的话，这条线只是一种更间接的写作方式`p = a[0]`吗？

```
int main()
{
    int a[][4] = {
        5, 7, 5, 9,
        4, 6, 3, 1,
        2, 9, 0, 6
        };

    int *p; // create an integer pointer
    int (*q)[4]; // create a pointer to a four-element integer array

    p = (int*)a; // ?
    q = a;

    printf("%u %u\n", p, q);
    p++;
    q++;
    printf("%u %u\n", p, q);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T22:10:52.803

表达式`a`在值上下文中使用时，确实会评估为“数组第一个元素的`a`地址” - 地址`a[0]`- 正如您正确理解的那样。

但是，请注意，数组`a`实际上就是我们所说的*二维*数组。它是一个*数组数组*。array 的第一个元素`a`本身就是一个数组：类型为 的数组`int [4]`。因此，考虑到上述`a`情况，在值上下文中使用时，表达式等同于表达式`&a[0]`，它是一个类型的指针，`int (*)[4]`在概念上指向*整个*一维数组`a[0]`。

出于这个原因，尝试做

```
p = a; 
```

将导致来自编译器的诊断消息。`int (*)[4]`给`int *`指针对象赋值是非法的。这些类型不兼容。为了抑制此诊断消息，有问题的代码使用显式强制转换

```
p = (int *) a; 
```

这有力地将上述`int (*)[4]`指针值推入`p`. 在典型的实现中，这保留了原始指针的数值，只执行概念类型转换。

访问 的 值的尝试`*p`通常会产生 的 值，`a[0][0]`因为从*数字上看*，整个`a`地址与 的地址相同，`a[0]`并且与 的地址相同`a[0][0]`。上面的代码利用了这个数字标识，同时使用显式转换来解决类型不兼容问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-27T21:55:31.307

> 我对代码的解释表明，这一行只是将第一个数组的第一个元素的地址存储在指针 p 中

正确的。

> 如果是这样的话，这条线只是一种更间接的写作方式`p = a[0]`吗？

不，不是。“这一行只存储第一个元素**的地址**” - 它非常*类似于*

```
p = &a[0]; 
```

但是上面的说法并不完全正确，因为`&a[0]`它的类型是`int (*)[4]`. 没有演员表的正确分配可能类似于

```
p = &a[0][0]; 
```

尝试使用 with`-Wall`打开编译各种声明并搜索偶尔的错误/警告:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T22:31:26.233

为了扩展 H2CO3 的答案，请记住，在大多数情况下，*数组*类型的表达式将转换为*指针*类型的表达式，表达式的值将是数组第一个元素的地址。

The type of the expression `a` is "3-element array of 4-element array of `int`". Except when it is the operand of the `sizeof`, `_Alignof`, or unary `&` operators, `a` will be *converted* to an expression of type "pointer to 4-element array of `int`" (`int (*)[4]`), and its value will be the address of `a[0]`. The problem is that a value of type `int (*)[4]` cannot be assigned to a variable of type `int *`; the types are not *compatible*, so we need to cast the result of the expression `a` to `int *`.

This works because the address of the array and the address of the first element of the array are the same - the expressions `a`, `&a`, `a[0]`, `&a[0]`, and `&a[0][0]` all yield the same *value*, they just have different *types* (`int (*)[4]`, `int (*)[4][4]`, `int *`, `int (*)[4]`, and `int *`, respectively).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T21:55:29.033

几乎。它类似于写作`p = &a[0][0]`。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-27T21:55:29.940

`a`是一个数组的`3`数组`4`。`int`

的值`a`是指向 的数组`4`的指针`int`。该指针的值是数组开头的地址。

`(int *) a`将指针转换为指向`int`. 值不变，但类型不同。

请注意，要打印指针值，正确的规范是`p`.

# html - html5画布涂鸦改变颜色

> ID：15123193
> 
> 赞同：3
> 
> 时间：2013-02-27T21:53:38.350
> 
> 标签：html, colors, html5-canvas

我非常努力地理解 javascript，我受到 Jay Weekes 的这段代码的启发：view-source: [http://jayweeks.com/sketchy-structures-html5-canvas/#/](http://jayweeks.com/sketchy-structures-html5-canvas/#/) <|:{

我试图找出如何让用户选择 strokeStyle 颜色。我不知道该怎么做。我试过了，不透明度停止工作，颜色变黑了......

我使用了一个带有 id 和功能的按钮。不工作。我决定来寻求帮助。

我不知道我是否很好地表达了自己。如果我不是，请告诉我。

提前谢谢了！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T23:14:35.557

对于这个问题的一种可能的解决方案，我有一个粗略的开始。结果在[这里 jsFiddle](http://jsfiddle.net/amullins/ycyQD/5/)。

我的想法是首先添加一个简单的 UI 元素来选择颜色。我能想到的最简单的事情是链接列表。

```
<div id="sketch-color">
    <ul class="colorList">
        <li><a href="#" data-color="black">Black</a></li>
        <li><a href="#" data-color="red">Red</a></li>
        <li><a href="#" data-color="green">Green</a></li>
        <li><a href="#" data-color="blue">Blue</a></li>
    </ul>
</div> 
```

您会注意到我开始研究使用 HTML5 数据，但没有按照我应该做的那样进行。我编辑了 CSS 文件以使链接更加明显：

```
#sketch-color li:first-of-type a { color:black; }
... 
```

然后，为了遵循原来的逻辑，我在基本的 UI 读数中添加了一行：

```
 <li>pen color: <span id="current-color"></span></li> 
```

从那时起，它只是 javascript。我在“当前”元素列表中添加了另一个变量，并将其默认设置为“黑色”：

```
var currOpacity = document.getElementById( 'current-opacity' ),
    currDensity = document.getElementById( 'current-density' ),
    currCache = document.getElementById( 'current-cache' ),
    currColor = document.getElementById( 'current-color' );
    currCache.innerHTML = '0';
    currColor.innerHTML = "Black"; 
```

然后我需要获取所有新链接，关闭它们的默认点击事件处理程序，并添加我自己的。我习惯了 jQuery，所以我可能没有以最有效的方式做到这一点。

```
// Color Events
var colorListItems = document.getElementById( 'sketch-color' ).getElementsByTagName('ul')[0].children;

var colorLinks = [];
for(var i = 0; i < colorListItems.length; i++)
{
    colorLinks.push(colorListItems[i].children[0]);
}

for(var i = 0; i < colorLinks.length; i++)
{
    colorLinks[i].removeEventListener("click");
    colorLinks[i].addEventListener("click", onClickColorChange, false);
} 
```

然后我定义了事件处理程序：

```
//event handlers    
function onClickColorChange( e ) {
    e.preventDefault();
    currColor.innerHTML = e.target.innerHTML;
    return false;
} 
```

好的，那太好了。我可以更改`span`. 不是很有趣。我需要破解 Jay 的绘图代码才能让它做点什么。我注意到在调用函数之前不会决定设置颜色`Point.connect()`，所以我更改了该函数中的关键线以调用一个新函数来设置线条样式：

```
if( totDist < maxDist*5 && drawDist < maxDist ){
  ctx.strokeStyle = currentStrokeStyle();
  ctx.line( this.x, this.y, p.x, p.y );
} else { break; } 
```

然后定义了这个新函数：

```
function currentStrokeStyle() {
    var curr_color = currColor.innerHTML;
    var red = 0, green = 0, blue = 0;
    switch(curr_color) {
        case "Red": red = 255; break;
        case "Green": green = 255; break;
        case "Blue": blue = 255; break;
    };
    return 'rgba( ' + red + ',' + green + ',' + blue + ','+ uiOpacity.opacity +' )';
} 
```

然后魔法发生了。

我意识到这里有很大的改进空间。应该有一个 rgb 滑块或类似的东西，我应该使用 HTML5 数据属性而不是 keying off `innerHTML`。也就是说，我正在提交我开始工作的第一个版本。我邀请您分叉[jsfiddle](http://jsfiddle.net/amullins/ycyQD/5/)并使其变得更好。

## 更新

对于没有明确说明如何通过这种安排添加新颜色，我深表歉意。基本上，我们需要向 UI 中的颜色列表添加新链接，然后在 currentStrokeStyle() 函数中的 switch 语句中添加新案例。因此，要添加橙色选项：

```
<div id="sketch-color">
    <ul class="colorList">
       <li><a href="#" data-color="black">Black</a></li>
       <li><a href="#" data-color="red">Red</a></li>
       <li><a href="#" data-color="green">Green</a></li>
       <li><a href="#" data-color="blue">Blue</a></li>
       <li><a href="#" data-color="orange">Orange</a></li>
    </ul>
</div> 
```

和：

```
function currentStrokeStyle() {
    var curr_color = currColor.innerHTML;
    var red = 0, green = 0, blue = 0;
    switch(curr_color) {
        case "Red": red = 255; break;
        case "Green": green = 255; break;
        case "Blue": blue = 255; break;
        case "Orange": red = 255; green = 128; break;
    };
    return 'rgba( ' + red + ',' + green + ',' + blue + ','+ uiOpacity.opacity +' )';
} 
```

如果您希望链接也显示为橙色，则需要再次更改 CSS：

```
#sketch-color li:nth-child(4) a { color:blue; }
#sketch-color li:nth-child(5) a { color:orange; } 
```

现在应该可以了。同样，如果我使用 HTML5 数据属性将 rgb 值直接传递给`currentStrokeStyle()`.

新颜色已添加[到 jsFiddle](http://jsfiddle.net/amullins/ycyQD/6/)中。

# r - ggplot2重叠时间序列

> ID：15123194
> 
> 赞同：0
> 
> 时间：2013-02-27T21:53:43.127
> 
> 标签：r, ggplot2, time-series

我正在尝试在我工作的河流上绘制估计和实际深度值。似乎估计和实际重叠的时间段，估计没有正确输出，即使我的估计值直到 2012 年 9 月（图表上的结束时间）

```
library(ggplot2)
library(scales)
LowerHydro<-data.frame(LowerHydrology)
LowerHydro$date <- as.Date(LowerHydro$Date, format = "%m/%d/%y")
LowerHydro<-rename(LowerHydro,c(Clarks.Lower..m.="Depth"))
qplot(main="Lower Clarks Hydrograph",xlab="Date",ylab="Depth(m)",
      date,Depth,data=LowerHydro,group=Group,color=Group,geom="line") + 
   geom_line(lwd=0.70) + 
   scale_x_date(labels=date_format("%b-%y"),
                breaks="60 days",
                limits = as.Date(c("2010-10-01","2012-09-12")),
                expand=c(0.01,0)) + 
   theme_bw()+
   labs(colour="") + 
   scale_y_continuous(expand=c(0.03,0),
                      limits=c(4,20),
                      breaks=seq(4,20,by=2),
                      labels=seq(4,20,by=2)) + 
   theme(axis.title.x=element_text(face='bold',size=16,vjust=-2)) + 
   theme(axis.title.y=element_text(face='bold',size=16,angle = 90,vjust=-0.2,hjust=0.5)) + 
   theme(plot.title=element_text(face='bold',size=25,vjust=2)) + 
   theme(axis.text.x=element_text(size=12)) + 
   theme(axis.text.y=element_text(size=12)) + 
   theme(legend.title=element_text(size=16,hjust=-0.2)) + 
   theme(legend.text=element_text(size=16)) + 
   theme(legend.key.size=unit(c(1.15,1.15),"lines")) + 
   scale_color_manual(values=c("Estimated"="black", "Actual"="blue")) + 
   theme(plot.margin = unit(c(1,-5,2,2),"lines"))

str(LowerHydro)
data.frame':    1053 obs. of  4 variables:
$ Date : Factor w/ 1053 levels "01/01/11","01/01/12",..: 561 563 565 567 569 571 572   574 576 578 ...
$ Depth: num  5.24 5.14 5.42 5.27 5.27 ...
$ Group: Factor w/ 2 levels "Actual","Estimated": 2 2 2 2 2 2 2 2 2 2 ...
$ date : Date, format: "2010-10-01" "2010-10-02" ...

with(LowerHydro, LowerHydro[date %in% seq.Date(as.Date("2012-01-01"),   as.Date("2012-01-10"), by='1 day'),])
     Date Clarks.Lower..m.     Group
457  1/1/2012           11.242 Estimated
458  1/2/2012           11.054 Estimated
459  1/3/2012           11.054 Estimated
460  1/4/2012           10.992 Estimated
461  1/5/2012           10.773 Estimated
462  1/6/2012            9.959 Estimated
463  1/7/2012            8.739 Estimated
464  1/8/2012            7.676 Estimated
465  1/9/2012            7.019 Estimated
466 1/10/2012            6.581 Estimated 
```

很抱歉 qplot 上的代码繁琐......它的所有美学......但它似乎不喜欢我在 2011 年 10 月之后的同一日期范围内拥有实际值和估计值。我无法发布图像，但基本上我具有整个日期范围的估计值，但在它们与实际值重合后，估计线在时间范围结束之前只是略微倾斜的平坦线。

这是图表的链接：

[http://s1358.beta.photobucket.com/user/jaredmilitello/media/Rplot01_zps9b29f6d3.png.html](http://s1358.beta.photobucket.com/user/jaredmilitello/media/Rplot01_zps9b29f6d3.png.html)

如果我编辑此代码以在 2011-10-07 法案中创建第一个日期，而不是像最初那样为 2011-07-10，我会收到一个错误...本质上，此代码是我的数据集，没有随机深度。

```
> act <- data.frame(date=seq.Date(as.Date('2011-10-07'),
                             as.Date('2012-09-12'),
                             by='1 day'),
              Depth=rnorm(n=431, sd=100),
              Group="Actual")
Error in data.frame(date = seq.Date(as.Date("2011-10-07"), as.Date("2012-09-12"),  : 
arguments imply differing number of rows: 342, 431, 1
> est <- data.frame(date=seq.Date(as.Date('2010-10-01'),
                           as.Date('2012-09-12'),
                           by='1 day'),
             Depth=rnorm(n=713, sd=100),
              Group="Estimate") 
> LowerHydro <- rbind(act, est)
> str(df)
function (x, df1, df2, ncp, log = FALSE)   
> qplot(date, Depth, data=LowerHydro, colour=Group, geom="line") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T23:14:21.257

**正如评论已经指出的那样**，在不了解您的数据的情况下，我们无法为您提供很好的帮助。

您的数据一定有问题，因为绘制两条具有重叠时间段的线没有问题：

```
act <- data.frame(date=seq.Date(as.Date('2011-07-10'),
                                as.Date('2012-09-12'),
                                by='1 day'),
                  Depth=rnorm(n=431, sd=100),
                  Group="Actual")
est <- data.frame(date=seq.Date(as.Date('2010-10-01'),
                                as.Date('2012-09-12'),
                                by='1 day'),
                  Depth=rnorm(n=713, sd=100),
                  Group="Estimate")

LowerHydro <- rbind(act, est)
str(df)

qplot(date, Depth, data=LowerHydro, colour=Group, geom="line") 
```

![在此处输入图像描述](../Images/dc0c61dbafa1e2304dcab9afc73b7322.png)

如果您需要帮助，请让您的问题可重现（请参阅评论中的链接）并提供有关您数据的所有相关详细信息。

此外，在基本情节正常运行之前，不要为您对情节所做的所有调整而烦恼（请注意，它们不是某种意义上的**美学）。**`ggplot2`至少不要把所有不相关的东西都放在你的问题中。

* * *

**编辑**

在查看您的实际数据后，问题很快就会变得明显。如果你整理你的情节而不担心它的外观，那么你应该避免在未来遇到这样的问题。

这就是我只运行原版时会发生的情况`qplot`：

```
qplot(date, Depth, data=LowerHydro, group=Group, color=Group, geom="line") 
```

![在此处输入图像描述](../Images/466b9a30156d6e11d53db0dc2939337a.png)

很明显，估计组的日期被填满了——在实际测量开始后，估计组跳到未来大约十年。

现在，至于**为什么**会发生这种情况，您必须回到转换`Date`为`date`. 您使用`format="%m/%d/%Y"`，这会很棒，但不一致。对于大约 2011 年 10 月 4 日之后的日期，格式从 更改`%m/%d/%y`为`%m/%d/%Y`（即 10/01/11 到 10/01/2011）。

为避免将来发生这种情况：

1.  检查您的数据，并查看格式是否一致。
2.  进行这样的转换后检查您的数据。
3.  在你开始担心它的外观**之前先**整理好你的情节
4.  将最小的示例发布到 stackoverflow，这样每个人都不会看错东西，不会给你投反对票，也不会有兴趣帮忙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:37:27.370

### 这是我尝试过的。

我生成了一些样本数据来尝试你的情节：

```
library(package=ggplot2)
library(package=scales)

LowerHydro <- data.frame(date=seq.Date(as.Date('2010-10-01'),
                                       as.Date('2012-09-12'),
                                       by='1 day'),
                         Depth=rnorm(n=713, sd=100),
                         Group=c(rep('Estimated', 363),
                                 rep('Actual', 350))) 
```

并绘制它（一个简化的情节，请注意）

```
qplot(date, Depth, data=LowerHydro, group=Group, color=Group, geom="line")+
    scale_x_date(labels=date_format("%b-%y"),breaks="60 days",
                 limits = as.Date(c("2010-10-01","2012-09-12")),
                 expand=c(0.01,0))+theme_bw() 
```

一切似乎都如预期的那样。

现在，我在末尾添加了一个错误标记的日期（最后一个日期包含实际和估计数据的数据）

```
LowerHydro <- rbind(LowerHydro, data.frame(date=as.Date('2012-09-12'),
                             Depth=rnorm(n=1, sd=100),
                             Group='Estimated')) 
```

然后剧情中断

```
qplot(date, Depth, data=LowerHydro, group=Group, color=Group, geom="line")+
    scale_x_date(labels=date_format("%b-%y"),breaks="60 days",
                 limits = as.Date(c("2010-10-01","2012-09-12")),
                 expand=c(0.01,0))+theme_bw() 
```

您是否检查了每个估计数据和实际数据中的日期范围？

# facebook-like - 更改元标记“标题”

> ID：15123201
> 
> 赞同：1
> 
> 时间：2013-02-27T21:54:17.170
> 
> 标签：facebook-like, facebook-opengraph, title, meta-tags

我需要更改我网站的标题，因为现在标题是“主页”。我想在网站上添加一个“喜欢”按钮，并且我想要一些不同的东西，而不是标题的“主页”。我尝试更改“标题”的元标记，但通过 facebookb 调试工具运行 url，它说：

> Attempted Frozen Title Change 看来您正试图将属性 og:title 从 XX 更改为 XY。如果是这样，则不允许您针对此对象执行此操作，因为已针对它发布了太多操作。

如何更改标题？谢谢！对不起，如果我的英语充满错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T18:36:40.257

没有任何方法可以改变它。Facebook 基本上是在告诉你，太多用户在 Facebook 上拥有带有原始标题的对象。在太多动作之后改变可以被视为试图误导。

# r - 如何更有效地在 R 中重新格式化 xts 数据？

> ID：15123206
> 
> 赞同：3
> 
> 时间：2013-02-27T21:54:33.630
> 
> 标签：r, for-loop, xts

我有一个 xts 对象，它具有基于 n 周期的一系列移动平均线。

```
 3     5       8    10
2012-11-16 1.573333 1.598 1.61500 1.631
2012-11-19 1.543333 1.576 1.60125 1.617
2012-11-20 1.546667 1.562 1.58750 1.601
2012-11-21 1.523333 1.530 1.57000 1.583 
```

我想将其重新格式化为以下内容。

```
 ma     n
2012-11-16 1.573333  3
2012-11-16 1.598     5
2012-11-16 1.61500   8
2012-11-16 1.631     10
2012-11-19 1.543333  3
2012-11-19 1.576     5
2012-11-19 1.60125   8
2012-11-19 1.617     10
2012-11-20 1.546667  3
2012-11-20 1.562     5
2012-11-20 1.58750   8
2012-11-20 1.601     10
2012-11-21 1.523333  3
2012-11-21 1.530     5
2012-11-21 1.57000   8
2012-11-21 1.583     10 
```

目前，我正在使用 for 循环，我认为它在 R 中不够高效。

```
> sma1
              3     5       8    10
2012-11-16 1.573333 1.598 1.61500 1.631
2012-11-19 1.543333 1.576 1.60125 1.617
2012-11-20 1.546667 1.562 1.58750 1.601
2012-11-21 1.523333 1.530 1.57000 1.583
>
> n <- c(3,5,8,10)
> count <- 0
> for(i in n) { 
+     tempsma <- cbind(rbind(sma1[,paste(i,sep="")]),paste(i,sep=""))
+     if (count == 0) {
+         sma2 <- tempsma 
+         count <- 1
+     } else {
+         sma2 <- rbind(sma2,tempsma)
+     }
+ }
> names(sma2) <- c("ma","n")
> sma2
                 ma  n
2012-11-16 1.573333  3
2012-11-16 1.598000  5
2012-11-16 1.615000  8
2012-11-16 1.631000 10
2012-11-19 1.543333  3
2012-11-19 1.576000  5
2012-11-19 1.601250  8
2012-11-19 1.617000 10
2012-11-20 1.546667  3
2012-11-20 1.562000  5
2012-11-20 1.587500  8
2012-11-20 1.601000 10
2012-11-21 1.523333  3
2012-11-21 1.530000  5
2012-11-21 1.570000  8
2012-11-21 1.583000 10 
```

由于 R 中的 for 循环很昂贵，我想知道是否有更有效的方法来执行相同的任务。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T23:19:04.420

这里有一个使用`stack`.

首先我创建一个示例数据：

```
> dat <- xts(data.frame(matrix(1:8,ncol=4)),Sys.time()+1:2)
> dat
                    X1 X2 X3 X4
2013-02-28 00:17:25  1  3  5  7
2013-02-28 00:17:26  2  4  6  8 
```

然后，我把它放在长格式使用`stack`：

```
> data.frame(index(dat),stack(as.data.frame(coredata(dat))))
           index.dat. values ind
1 2013-02-28 00:17:25      1  X1
2 2013-02-28 00:17:26      2  X1
3 2013-02-28 00:17:25      3  X2
4 2013-02-28 00:17:26      4  X2
5 2013-02-28 00:17:25      5  X3
6 2013-02-28 00:17:26      6  X3
7 2013-02-28 00:17:25      7  X4
8 2013-02-28 00:17:26      8  X4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T22:05:48.867

如果您可以将数据转换为数据框，则可以使用包的`melt`功能`reshape2`。首先，我使用示例数据，因为您的数据不容易重现：

```
library(xts)
data(sample_matrix)
sample.xts <- head(as.xts(sample_matrix),5)
sample.xts
#                Open     High      Low    Close
# 2007-01-02 50.03978 50.11778 49.95041 50.11778
# 2007-01-03 50.23050 50.42188 50.23050 50.39767
# 2007-01-04 50.42096 50.42096 50.26414 50.33236
# 2007-01-05 50.37347 50.37347 50.22103 50.33459
# 2007-01-06 50.24433 50.24433 50.11121 50.18112 
```

然后你可以这样做：

```
df <- data.frame(sample.xts)
df$id <- rownames(df)
melt(df, measure.vars=c("Open", "High","Low","Close")) 
```

这使 ：

```
 id variable    value
1  2007-01-02     Open 50.03978
2  2007-01-03     Open 50.23050
3  2007-01-04     Open 50.42096
4  2007-01-05     Open 50.37347
5  2007-01-06     Open 50.24433
6  2007-01-02     High 50.11778
7  2007-01-03     High 50.42188
8  2007-01-04     High 50.42096
9  2007-01-05     High 50.37347
10 2007-01-06     High 50.24433
11 2007-01-02      Low 49.95041
12 2007-01-03      Low 50.23050
13 2007-01-04      Low 50.26414
14 2007-01-05      Low 50.22103
15 2007-01-06      Low 50.11121
16 2007-01-02    Close 50.11778
17 2007-01-03    Close 50.39767
18 2007-01-04    Close 50.33236
19 2007-01-05    Close 50.33459
20 2007-01-06    Close 50.18112 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:23:46.427

```
> xts = read.csv("xts.csv",header=F)
> xts
          V1       V2    V3      V4    V5
1 11/16/2012 1.573333 1.598 1.61500 1.631
2 11/19/2012 1.543333 1.576 1.60125 1.617
3 11/20/2012 1.546667 1.562 1.58750 1.601
4 11/21/2012 1.523333 1.530 1.57000 1.583
> 
> col1 = rep(xts[,1],each=nrow(xts))
> n = rep(c(3,5,8,10),times=nrow(xts))
> sma1 = c()
> 
> for(i in 1:nrow(xts)){
+ sma1 = rbind(sma1,t(xts[i,-1]))
+ }
> 
> sma2 = data.frame(col1,sma1,n)
> sma2
         col1       X1  n
1  11/16/2012 1.573333  3
2  11/16/2012 1.598000  5
3  11/16/2012 1.615000  8
4  11/16/2012 1.631000 10
5  11/19/2012 1.543333  3
6  11/19/2012 1.576000  5
7  11/19/2012 1.601250  8
8  11/19/2012 1.617000 10
9  11/20/2012 1.546667  3
10 11/20/2012 1.562000  5
11 11/20/2012 1.587500  8
12 11/20/2012 1.601000 10
13 11/21/2012 1.523333  3
14 11/21/2012 1.530000  5
15 11/21/2012 1.570000  8
16 11/21/2012 1.583000 10 
```

# macros - 使用 gen-class 的 clojure 宏不会创建注释

> ID：15123214
> 
> 赞同：5
> 
> 时间：2013-02-27T21:54:59.823
> 
> 标签：macros, clojure, annotations, gen-class

我正在尝试编写一个 clojure 宏，用于在编译时生成多个 Java 类。我发现当我在宏之外调用 gen-class 时，我可以向类添加注释。但是，当我尝试在宏中使用 gen-class 时，编译的类没有注释。

我把我的问题归结为这个例子：

```
(gen-class
  :name ^{Deprecated true} Test1
  :prefix Test1-
  :methods [[^{Deprecated true} getValue [] Integer]])

(defn Test1-getValue [] 42)

(defmacro create-test-class [name x]
  (let [prefix (str name "-")]
    `(do
      (gen-class
         :name ~(with-meta name {Deprecated true})
         :prefix ~(symbol prefix)
         :methods [[~(with-meta 'getValue {Deprecated true}) [] Integer]])
      (defn ~(symbol (str prefix "getValue")) [] ~x))))

(create-test-class Test2 56) 
```

当我编译这个文件时，它会创建一个 Test1.class 和 Test2.class - 我用 Eclipse 检查两者，发现 Test1 有类级别和方法级别的 @Deprecated 注释，但 Test2.class 没有注释。当我使用宏扩展时，看起来好像我的 Test2.class 应该被注释：

```
user=> (set! *print-meta* true)
true
user=> (macroexpand '(create-test-class Test2 56))
(do (clojure.core/gen-class :name ^{java.lang.Deprecated true} Test2 :prefix Test2- :methods [[^{java.lang.Deprecated true} getValue [] java.lang.Integer]]) (user/defn Test2-getValue [] 56)) 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T14:44:52.167

Meikel Brandmeyer 在这里回答了这个问题：

[https://groups.google.com/forum/#!topic/clojure/Ee1bVwcUT-c](https://groups.google.com/forum/#!topic/clojure/Ee1bVwcUT-c)

“引用宏中的注释。（使用元名称`{Deprecated true}）。注意反引号。”

这是工作宏：

```
(defmacro create-test-class [name x]
  (let [prefix (str name "-")]
    `(do
      (gen-class
         :name ~(with-meta name `{Deprecated true})
         :prefix ~(symbol prefix)
         :methods [[~(with-meta 'getValue `{Deprecated true}) [] Integer]])
      (defn ~(symbol (str prefix "getValue")) [] ~x)))) 
```

# javascript - Angularjs中页面之间的数据绑定

> ID：15123215
> 
> 赞同：1
> 
> 时间：2013-02-27T21:55:04.370
> 
> 标签：javascript, angularjs

我正在尝试了解 Angularjs 中的数据绑定。

我想要做的是在页面之间建立绑定，即如果我更改 first.html 上的输入，那么 second.html 中的数据应该会自动更改。

例如，这是 first.html：

```
<div ng-controller="MyCtrl">
  <input type="text" ng-model="value"/><br>

   {{value}}

<a href="#/second"><input type="submit" value="Second page"/></a>
</div> 
```

并且说 second.html 只有这段代码 {{value}}。

在 .js 文件中，我们有 $routeProvider，它将模板 url 作为“second.html”，控制器是“MyCtrl”。

所以控制器是：

```
MyApp.controller(function($scope){

 $scope.value="somevalue";

 }) 
```

通过上述方式，second.html 上的 {{value}} 正在获取值“somevalue”。这是来自控制器。

但是，如果我动态更改 first.html 上的输入值，则 second.html 上的值不会获得该值。

我的问题是如何自动将 second.html 上的值与 first.html 绑定。

为了清楚地理解问题，假设first.html上有一个输入文本的输入字段和一个提交按钮，那么我想在submit的second.html页面上获取first.html的文本字段的输入值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T23:42:28.607

使用服务并将模型存储在那里。Gloopy 在这里已经有一个很好的例子：[https](https://stackoverflow.com/a/12009408/215945)
://stackoverflow.com/a/12009408/215945确保使用对象属性而不是原始类型。

如果您更愿意使用 $rootScope，那么如上所述，定义一个对象，而不是原语：

```
$rootScope.obj = { prop1: "somevalue" }` 
```

然后在您的视图中绑定到该对象属性：

```
<input type="text" ng-model="obj.prop1">
{{obj.prop1}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:37:41.987

如果您将数据附加到 $rootScope if 将在控制器之间的转换中幸存并成为所有 $scopes 的一部分（原型继承魔法）

```
//**attach in controller1:**
function MyCtrl1($rootScope) {
    $rootScope.recs= { rec1 : "think philosophically" };
}

//**do nothing in controller for view2:**
function MyCtrl2($scope) {
  //nothing
}

//**Markup for view2: automaticall makes use of data in $routeScope**
<p>Try doing this: {{recs.rec1 }}</p>

//**markup for view1 to respond to OPs question in comments**:
<input ng-model="recs.rec1" /> 
```

更新：创建自定义服务是一种更可扩展且结构合理的方法来处理此问题，但 $rootScope 方法是快速而肮脏的方法。

更新 2：添加 view1 标记以响应 OP 问题，编辑示例以利用正确的建议来使用对象而不是原始的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T02:35:29.103

找到了我正在寻找的解决方案，解决方案在 Angular 文档中，这里是链接[http://docs.angularjs.org/cookbook/deeplinking](http://docs.angularjs.org/cookbook/deeplinking)。

该链接上示例的某些部分回答了我的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-21T19:41:23.570

You should user $broadcast, $emit or scope communication. Try to avoid overloading the rootScope. It is as a bad practice as saving data into the application sessions.

# sql - 按月分组的打开项目的 Oracle SQL 查询计数

> ID：15123218
> 
> 赞同：2
> 
> 时间：2013-02-27T21:55:12.577
> 
> 标签：sql, oracle

我获得了项目数据的视图，并被要求总结在给定月份中有多少项目是开放的。

```
PROJECT_ID          OPEN_DATE         CLOSE_DATE         OWNER
         1          8/01/2012         09/01/2012          JEFF     
         2          8/08/2012         10/01/2012          JEFF     
         3          9/01/2012               Null          JEFF     
         4          9/12/2012               Null          JEFF     
         5          9/24/2012         11/01/2012          JEFF     
         6         10/01/2012         12/01/2012          JEFF     
         7         10/09/2012         01/01/2013          JEFF 
```

我需要这样的 OPEN 计数。完成基本查询后，我需要按项目所有者过滤/分组

```
AUG12   SEPT12   OCT12   NOV12   DEC12   JAN13   FEB13
2        4       5       4       3       2       1
^        ^       ^       ^       ^       ^       ^
|        |       |       |       |       |       |-> From Projects 3 & 4
|        |       |       |       |       |-> From Projects 3 & 4 
|        |       |       |       |-> From Projects 3,4 & 7
|        |       |       |-> From Projects 3,4,6 & 7
|        |       |-> From Projects 3,4,5,6 & 7
|        |-> From Projects 2,3,4, & 5                                    
|-> From Project 1 & 2 
```

**最新** 这是我根据 Gordon 的建议进行的连接。查询慢约4-5秒

```
SELECT SUM(case when (OPEN_DATE <= thedate and CLOSE_DATE > thedate) or (OPEN_DATE <= thedate and CLOSE_DATE Is Null) then 1 else 0 end) as Open 
1\.     From (select * FROM Project 
2\.     WHERE Project.Owner = :owner AND Project.action_for = :actionFor )  
3\.     cross join (   select add_months(last_day(SYSDATE), level-7)

4\.        as thedate from  dual connect by level <= 12   ) 
5\.      group by to_char(thedate, 'YYYY-MM') order by 1 
```

除了速度慢之外，我不确定它是否能正确处理我的真实数据。我需要分解查询以提供可以手动检查结果的结果。如何调试一条 sql 语句？我的意思是仅仅因为你得到了结果，你怎么知道它们是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:50:47.877

这是一种方法。它将值放在单独的行中，而不是单独的列中。无论如何，我发现这更容易使用：

```
select owner, to_char(thedate, 'YYYY-MM') as YYYYMM,
       SUM(case when open_date <= thedate and close_date > thedate then 1 else 0 end) as cnt
from project p cross join
     (select to_date('2012-08-31', 'yyyy-mm-dd') as thedate from dual union all
      select to_date('2012-09-30', 'yyyy-mm-dd') as thedate from dual union all
      select to_date('2012-10-31', 'yyyy-mm-dd') as thedate from dual union all
      select to_date('2012-11-30', 'yyyy-mm-dd') as thedate from dual union all
      select to_date('2012-12-31', 'yyyy-mm-dd') as thedate from dual union all
      select to_date('2013-01-31', 'yyyy-mm-dd') as thedate from dual union all
      select to_date('2013-02-28', 'yyyy-mm-dd') as thedate from dual
     ) as monthends
group by owner, to_char(thedate, 'YYYY-MM')
order by 1 
```

如果您想为任意范围创建monthends 表，您可以了解Oracle 的`connect by`语法。获得几个月的更简单方法是：

```
select add_month('01Jan2000', rownum) - 1
from project
where rownum < 12 * 20 
```

这将获得 2000-2019 的月底日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T00:47:37.373

这将返回在打开当月未关闭的项目的计数。这听起来像你所要求的

```
 SELECT to_char(open_date, 'MON-YYYY') as OpenMonths, count(*) as counts FROM 
  Project WHERE to_char(open_date,'MON-YYYY') <> to_char(close_date,'MON-YYYY') 
    GROUP BY to_char(open_date, 'MON-YYYY'); 
```

sqlfiddle 的链接在这里。[http://www.sqlfiddle.com/#!4/28bf5/1](http://www.sqlfiddle.com/#!4/28bf5/1) 我将空值更改为其他示例日期，因为 DDL 的文本没有正确检测到它们。

编辑：

使用生成的月/年维度，此查询将起作用

```
 SELECT monthid, count(*) as ProjectsOpen FROM
  (
   Select * FROm table1 CROSS JOIN mdim WHERE 
  (to_date(mdim.monthid,'MON-YYYY') >= table1.open_date ) AND (to_date(mdim.monthid,'MON-YYYY') <= table1.close_date)
  ) GROUP BY monthid; 
```

月份维度类似于

```
 INSERT ALL 
 INTO mdim 
     VALUES ('JAN-2012')
INTO mdim 
     VALUES ('FEB-2012')
INTO mdim 
     VALUES ('MAR-2012')
INTO mdim 
     VALUES ('APR-2012')
INTO mdim 
     VALUES ('MAY-2012')
INTO mdim 
     VALUES ('JUN-2012')
INTO mdim 
     VALUES ('JUL-2012')
INTO mdim 
     VALUES ('AUG-2012')
INTO mdim 
     VALUES ('SEP-2012')
INTO mdim 
     VALUES ('OCT-2012')
INTO mdim 
     VALUES ('NOV-2012')
INTO mdim 
     VALUES ('DEC-2012')
INTO mdim 
     VALUES ('JAN-2013')
INTO mdim 
     VALUES ('FEB-2013')
INTO mdim 
     VALUES ('MAR-2013')
INTO mdim 
     VALUES ('APR-2013')
INTO mdim 
     VALUES ('MAY-2013')
INTO mdim 
     VALUES ('JUN-2013')
INTO mdim 
     VALUES ('JUL-2013')
INTO mdim 
     VALUES ('AUG-2013')
INTO mdim 
     VALUES ('SEP-2013')
INTO mdim 
     VALUES ('OCT-2013')
INTO mdim 
     VALUES ('NOV-2013')
INTO mdim 
     VALUES ('DEC-2013') 
```

由于 SQLFiddle 搞砸了 csv 导入，我正在做一些任意的 to_date 转换。但是，如果您填充月份维度，第二个查询将获得您想要的数据。

小提琴：[http ://www.sqlfiddle.com/#!4/ca8ac/34](http://www.sqlfiddle.com/#!4/ca8ac/34)

# .htaccess - 需要做简单的重定向规则

> ID：15123225
> 
> 赞同：0
> 
> 时间：2013-02-27T21:55:28.630
> 
> 标签：.htaccess

当用户调用时，我需要编写一个简单的重定向规则子

```
http://www.mysite.com/subfolder 
```

它重定向到

```
http://www.mysite.com/subfolder/ 
```

使用尾随的“/”，我已经测试过

```
Redirect 301 /subfolder http://www.mysite.com/subfolder/ 
```

但它有一个重定向循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:40:16.540

尝试

```
RedirectMatch 301 /subfolder$ http://www.mysite.com/subfolder/ 
```

# html - 带有图像的注销链接

> ID：15123230
> 
> 赞同：1
> 
> 时间：2013-02-27T21:55:35.963
> 
> 标签：html, image, hyperlink, logout

我有一个需要用户登录的 html 页面。注销按钮使用的最佳格式是什么？我还考虑在“注销”（注销的链接）一词旁边使用图像，将它们重定向到主页：index.html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:01:35.037

> 好的，请问我可以知道如何使用显示注销的图像作为链接来启用用户注销吗？

使用常规 HTML： `<a href="logout.php"><img src="logoutImg.png"></a>`

# java - 如何加密资源文件？

> ID：15123233
> 
> 赞同：3
> 
> 时间：2013-02-27T21:55:41.523
> 
> 标签：java, encryption, slick2d

嗨，我有一个用 Java 和 Slick2d 制作的游戏，我有一个包含我所有资源（图像、声音等）的文件夹，我想知道如何加密它们以使人们无法编辑它们？我尝试了 MD5，但我不确定它是如何工作的，而且我不担心有人闯入代码，因为我已将 jar 拼接到一个 exe 文件中。另外，如果我需要知道如何解密文件以便它们可以在代码中使用，请也解释一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:04:58.450

没有办法保护图像/资源，你所能做的就是让它稍微难一点。如果您将图像/资源交付给客户端，那么他们总是可以解密它们，毕竟客户端必须在某个时间点*显示它们未加密。*

顺便说一句：MD5是一种哈希算法，用于检查数据是否完好无损。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:02:47.300

[MD5](http://en.wikipedia.org/wiki/MD5)是一个不可逆的散列函数，两个输入可能产生相同的输出。

如果文件的内容不是“秘密”，您可以使用 MD5 进行验证过程，这应该很容易。

*   使用您的应用程序使用的所有资源的哈希创建一个哈希表（或只是一个表）
*   一旦applet lanched[为每个文件创建一个哈希值](https://stackoverflow.com/questions/304268/getting-a-files-md5-checksum-in-java)并将其与您的表进行比较，如果它不一样，则有人更改了您的jar 文件的内容。

*我建议将哈希表保留在代码中，这样会更难修改*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:06:43.667

如果您正在使用您的资源，则必须对其进行解密，然后客户端才能使用它们，因为它们正在游戏中使用。

# c# - 如何通过字符串分隔列表项以保存到文本文件

> ID：15123234
> 
> 赞同：0
> 
> 时间：2013-02-27T21:55:43.233
> 
> 标签：c#, file, text, report

我正在用 C# 创建一个 Windows 窗体应用程序来存储有关汽车后备箱销售的详细信息，例如日期、位置、宣传成本、是否用于慈善等。其中一项规范是必须能够保存一些信息将文本文件，例如所有汽车靴销售保存到 carbootsaleall.txt 文件中，我还需要一个按钮将所有慈善和非慈善汽车靴销售保存到不同的文本文件中。

我已经编写了将所有汽车后备箱销售保存到文本文件中的代码，但我不确定如何将其他汽车后备箱销售区分开来，具体取决于它们是用于慈善事业还是不同的文件。

这是我在按钮之间保存所有汽车后备箱销售的代码：

```
 List<CarBootSale> carbootsales = carBootSaleList.ReturnList();
        textReportGenerator.GenerateAllReport(carbootsales, AppData.CARBOOTSALE);
        MessageBox.Show("All Car Boot Sales have been written to the report file: " + AppData.CARBOOTSALE); 
```

这是我在 TextReportGenerator 类中的代码：

```
 public void GenerateAllReport<T>(List<T> aList, string filePath) where T : IDisplay
    {
        FileStream outFile;
        StreamWriter writer;

        outFile = new FileStream(filePath, FileMode.Create, FileAccess.Write);
        writer = new StreamWriter(outFile);

        foreach (T obj in aList)
        {
            writer.WriteLine(obj.Display());
        }
        writer.Close();
        outFile.Close();
    } 
```

这是带有构造器等的 CarBootSale 类：

```
public class CarBootSale : IDisplay
{

    public string ID { get; set; }
    public string Date { get; set; }
    public string Location { get; set; }
    public double PitchCost { get; set; }
    public int Capacity { get; set; }
    public string Charity { get; set; }
    public string CharityName { get; set; }
    public string Catering { get; set; }

    public CarBootSale(string id, string date, string location, double pitchcost, int capacity, string charity, string charityname, string catering)
    {
        ID = id;
        Date = date;
        Location = location;
        PitchCost = pitchcost;
        Capacity = capacity;
        Charity = charity;
        CharityName = charityname;
        Catering = catering;
    } 
```

我如何能够修改 TextReportGenerator 类中的按钮代码和代码，以便还可以选择将慈善汽车引导销售保存到 carbootsalecharity.txt

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:57:49.687

```
using System.Linq;

...

foreach (var obj in aList.Where(x -> x.Charity.ToLower() == "yes")
{
    writer.WriteLine(obj.Display());
} 
```

如果您需要比这更多的泛化（即您需要它适用于任何 T），请查看 Predicate Builder 或 Dynamic Linq，或者让 T 继承包含 Charity 的公共接口。

# php - 在 wordpress 标题上显示 php 脚本的结果

> ID：15123238
> 
> 赞同：0
> 
> 时间：2013-02-27T21:55:58.313
> 
> 标签：php, wordpress, variables, header, parameter-passing

您好，我正在尝试在我的主页中显示搜索结果。我正在运行一个互联网广播网站，我正在努力让它发挥作用。

用户将使用搜索引擎查找歌曲“John”，例如：[http ://tir.fullerton.edu/search/searchv2.php](http://tir.fullerton.edu/search/searchv2.php)

它将显示所有可能的结果。然后，一旦他们找到它，他们就会点击超链接（“这首歌”）。

然后它显示结果。

我希望能够在我们的标题主页上显示这些结果。 [http://tir.fullerton.edu/](http://tir.fullerton.edu/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:59:01.220

```
<header>
    <?php echo $resultsString; ?>
</header> 
```

模糊的问题......这应该可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T23:52:51.033

在不知道 searchV2.php 中有什么内容的情况下，您应该尝试从他们选择的歌曲中捕获 onClick 事件，然后将其存储为 PHP 会话。

```
$_SESSION['SongChoice'] = "This Song"; 
```

然后在您的标题中，您可以通过会话变量检索单击的结果。此会话将一直持续到站点关闭或直到您通过其他歌曲选择重置它等。

# java - 为类提供一个参数构造函数

> ID：15123247
> 
> 赞同：-3
> 
> 时间：2013-02-27T21:56:24.280
> 
> 标签：java

我为下面的类创建了一个参数构造函数，但不确定如何将它分配给类变量 colour。

```
public class MyClass{
   private String colour;
   public MyClass(String s){
   } 
```

请帮忙 ....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:57:36.137

```
public class MyClass{
   private String color;
   public MyClass(String color){
      this.color = color;
   }
   ...
} 
```

# c# - 存在某些条件时自动将行添加到网格视图

> ID：15123254
> 
> 赞同：0
> 
> 时间：2013-02-27T21:56:46.197
> 
> 标签：c#, asp.net

我需要在具有 AutoGenerateColumns="true" 的网格视图中添加一行。这是诀窍。SQL 查询以这样的方式编写（使用数据透视），它以三个一组的形式返回记录，如下所示：

```
Repair Code Repair Code Entries 6/1/2012    7/1/2012    8/1/2012    9/1/2012
00000A  Critical Down Time          1       
00000A  Critical Outage             1       
00000A  Total Repair Time          65       
00000B  Critical Down Time                                              6
00000B  Critical Outage                                                 3
00000B  Total Repair Time                                              90
00000C  Critical Down Time          1                      5    
00000C  Critical Outage             1                      5    
00000C  Total Repair Time          30                    240    
00000D  Critical Down Time                                 2     
00000E  Critical Down Time                                 1    
00000G  Critical Down Time                                 1    
00000M  Critical Down Time          1                      3    
00000M  Critical Outage             1                      3    
00000M  Total Repair Time          60                    180 
```

我需要在 00000A 和 XYXYXY 之间添加一个空白行。GridView 是使用 DataTable 从 bll 类填充的。我正在使用 OnRowCreated 方法来修改列标题和 OnRowDataBound 来格式化单元格中的信息。

我以为我可以在两种事件方法中的任何一种中添加一行，但在我看来，这在循环中为时已晚。我说的对吗？

我遇到过各种帖子，例如[这个](https://stackoverflow.com/questions/10982744/add-row-to-asp-net-gridview)和[这个，](http://www.codeproject.com/Articles/467788/Dynamically-adding-and-deleting-rows-from-ASP-NET)但它们都以不同的方式进行，例如按钮单击事件。

在我的情况下，我唯一可以依赖的常数是三个类别的存在或不存在：停机时间、修复时间和总时间。在某些情况下，我只有三个类别中的一个或两个，这就是我需要插入具有相应缺失类别的行的地方。

任何建议如何去做？

谢谢，

R。

更新：我已经更新了上面查询的输出。正如您在下半部分看到的那样，“Critical Down Time”重复了 4 次，所以我需要截取数据并添加“Critical Outage”、“Total Repair Time”和一个空白行作为分隔符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:53:43.113

您应该在`DataTable`. 像这样：

首先，找到要插入新行的索引。这是使用行的主键完成的（我假设您的行有主键）

```
int rowPosition = dt.Rows.IndexOf(dt.Rows.Find([PRIMARY KEY])); 
```

然后创建一个新行并将其插入到表中：

```
dt.Rows.InsertAt(dt.NewRow(), rowPosition); 
```

然后，您可以像以前一样绑定 GridView。

**更新**

从 OP 收到更多更新后，解决方案如下：

首先，一些变量。

```
/// <summary>
/// This holds the number and names of the subcategories that are required for each category. 
/// </summary>
string[] subCategories = new string[3] { "Critical Down Time", "Critical Outage", "Total Repair Time" };
string categoryPrevious = null;
string categoryCurrent = null;
int subCategoryOccurences = 0;
int rowCount = 0;
DataRow rowFiller = null; 
```

这是从数据库填充数据表后接收数据表的方法。

```
public void PrepareDataTable(DataTable dtResults)
{

    if (dtResults == null || dtResults.Rows.Count == 0)
        return;

    //initialize category
    categoryPrevious = dtResults.Rows[0]["Category"].ToString();
    do
    {
        //get the current category
        categoryCurrent = dtResults.Rows[rowCount]["Category"].ToString();
        //check if this is a new category. this is where all the work is done
        if (categoryCurrent != categoryPrevious)
        {
            //check if we have fulfilled the requirement for number of subcategories 
            CheckSubCategoryRequirements(dtResults);
            //at this point we have fulfilled the requirement for number of subcategories 
            //add blank (separator) row
            dtResults.Rows.InsertAt(dtResults.NewRow(), rowCount);
            rowCount++;
            //reset the number of subcategories
            subCategoryOccurences = 0;
            categoryPrevious = categoryCurrent;
        }
        else
        {
            rowCount++;
            categoryOccurences++;
        }
    } while (rowCount < dtResults.Rows.Count);
    //check sub category requirements for the last category
    CheckSubCategoryRequirements(dtResults);

} 
```

这是处理添加任何缺失子类别的方法。我已将代码提取到一个单独的方法中，因为它在代码中的两个不同位置调用：

```
/// <summary>
/// Checks if a category has fulfilled the requirements for # of sub categories and adds the missing sub categories, if needed
/// </summary>
private void CheckSubCategoryRequirements(DataTable dtResults)
{
    if (subCategoryOccurences< subCategories.Length)
    {
        //we need to add rows for the missing subcategories
        while (subCategoryOccurences< subCategories.Length)
        {
            //create a new row and populate category and subcategory info
            rowFiller = dtResults.NewRow();
            rowFiller["Category"] = categoryPrevious;
            rowFiller["SubCategory"] = subCategories[subCategoryOccurences];
            //insert the new row into the current location of table 
            dtResults.Rows.InsertAt(rowFiller, rowCount);
            subCategoryOccurences++;
            rowCount++;
        }
    }
} 
```

最后，这里有一个“测试工具”来测试上面的代码：

```
public void RunTest()
{
    DataTable dtResults = new DataTable();
    dtResults.Columns.Add("Category");
    dtResults.Columns.Add("SubCategory");
    dtResults.Rows.Add("XXXX", "Critical Down Time");
    dtResults.Rows.Add("XXXX", "Critical Outage");
    dtResults.Rows.Add("XXXX", "Total Repair Time");
    dtResults.Rows.Add("YYYY", "Critical Down Time");
    dtResults.Rows.Add("YYYY", "Critical Outage");
    dtResults.Rows.Add("ZZZZ", "Critical Down Time");
    dtResults.Rows.Add("ZZZZ", "Critical Outage");
    dtResults.Rows.Add("ZZZZ", "Total Repair Time");
    dtResults.Rows.Add("AAAA", "Critical Down Time");

    PrepareDataTable(dtResults);
} 
```

我已经测试了代码，它似乎可以按照您的要求工作。如果我错过了什么或任何部分不清楚，请告诉我。

这是数据表的前后：

前

![在此处输入图像描述](../Images/bc5f7780324d9cf39f0c321fdc1b0494.png)

后：

![在此处输入图像描述](../Images/d648957af7a0bad23195d42683132fa7.png)

# iphone - FFmpeg：与音频队列的音频同步

> ID：15123257
> 
> 赞同：0
> 
> 时间：2013-02-27T21:56:58.140
> 
> 标签：iphone, ios, objective-c, c, ffmpeg

我的应用程序中有一个视频播放器。我对avi文件和mp3音频没有问题，但是当我播放mpg或wmv时，我必须使用avcodec_decode_audio3。前几秒钟播放，然后当缓冲区重新填充时，我会静默几秒钟，然后音频从同一个地方继续，每次缓冲区重新填充时都会发生这种情况。

这是音频队列格式：

```
 playState.format.mSampleRate = _av->audio.sample_rate;
        playState.format.mFormatID = kAudioFormatLinearPCM;
        playState.format.mFormatFlags =  kAudioFormatFlagsCanonical;
        playState.format.mChannelsPerFrame = _av->audio.channels_per_frame;
        playState.format.mBytesPerPacket = sizeof(AudioSampleType) *_av->audio.channels_per_frame;
        playState.format.mBytesPerFrame = sizeof(AudioSampleType) *_av->audio.channels_per_frame;
        playState.format.mBitsPerChannel = 8 * sizeof(AudioSampleType);

        playState.format.mFramesPerPacket = 1;
        playState.format.mReserved = 0; 
```

填充音频缓冲区：

```
static void fillAudioBuffer(AudioQueueRef queue, AudioQueueBufferRef buffer){

int lengthCopied = INT32_MAX;
int dts= 0;
int isDone = 0;

buffer->mAudioDataByteSize = 0;
buffer->mPacketDescriptionCount = 0;

OSStatus err = 0;
AudioTimeStamp bufferStartTime;

AudioQueueGetCurrentTime(queue, NULL, &bufferStartTime, NULL);

while(buffer->mPacketDescriptionCount < numPacketsToRead && lengthCopied > 0){

    lengthCopied = getNextAudio(_av,buffer->mAudioDataBytesCapacity-buffer->mAudioDataByteSize, (uint8_t*)buffer->mAudioData+buffer->mAudioDataByteSize,&dts,&isDone);
    if(!lengthCopied || isDone) break;

    if(aqStartDts < 0) aqStartDts = dts;
    if(buffer->mPacketDescriptionCount ==0){
        bufferStartTime.mFlags = kAudioTimeStampSampleTimeValid;
        bufferStartTime.mSampleTime = (Float64)(dts-aqStartDts);
    }
    buffer->mPacketDescriptions[buffer->mPacketDescriptionCount].mStartOffset = buffer->mAudioDataByteSize;
    buffer->mPacketDescriptions[buffer->mPacketDescriptionCount].mDataByteSize = lengthCopied;
    buffer->mPacketDescriptions[buffer->mPacketDescriptionCount].mVariableFramesInPacket = _av->audio.frame_size;
    buffer->mPacketDescriptionCount++;
    buffer->mAudioDataByteSize += lengthCopied;

}
if(buffer->mAudioDataByteSize){
    if((err=AudioQueueEnqueueBufferWithParameters(queue, buffer, 0, NULL, 0, 0, 0, NULL, &bufferStartTime, NULL)))
    {

    }
}

int   getNextAudio(video_data_t* vInst, int maxlength, uint8_t* buf, int* pts, int* isDone) {
struct video_context_t  *ctx = vInst->context;
int    datalength            = 0;
while(ctx->audio_ring.lock || ((ctx->audio_ring.count <= 0 && ((ctx->play_state & STATE_DIE) != STATE_DIE))&&((ctx->play_state & STATE_EOF) != STATE_EOF))){
    PMSG1(stdout,"die get audio %d", ctx->play_state);
    if((ctx->play_state & STATE_STOP) != STATE_STOP){
        PMSG1(stdout,"die NO CARGADO %d",ctx->play_state);
        return 0;
    }
    usleep(100);
}
*pts = 0;
ctx->audio_ring.lock = kLocked;

if(ctx->audio_ring.count>0 && maxlength > ctx->audio_buffer[ctx->audio_ring.read].size){
    memcpy(buf, ctx->audio_buffer[ctx->audio_ring.read].data, ctx->audio_buffer[ctx->audio_ring.read].size);
    datalength = ctx->audio_buffer[ctx->audio_ring.read].size;
    *pts = ctx->audio_buffer[ctx->audio_ring.read].pts;
    ctx->audio_ring.read++;
    ctx->audio_ring.read %= ABUF_SIZE;
    ctx->audio_ring.count--;
}
ctx->audio_ring.lock = kUnlocked;

if((ctx->play_state & STATE_EOF) == STATE_EOF && ctx->audio_ring.count == 0) *isDone = 1;
return datalength; 
```

这是播放 mpg 文件的日志：

```
Input #0, mpeg, '1.MPG':
  Duration: 00:03:14.74, start: 3370.475789, bitrate: 2489 kb/s
    Stream #0:0[0x1e0]: Video: mpeg2video (Main), yuv420p, 544x576 [SAR 24:17 DAR 4:3], 9000 kb/s, 25 fps, 25 tbr, 90k tbn, 50 tbc
    Stream #0:1[0x1c0]: Audio: mp2, 48000 Hz, stereo, s16, 192 kb/s
mpeg2video  MPEG-2 video 
aspect 1.333333
startPlayback
DTS: 0.000000 time base: 0.000011 StartDTS: 303347520 Orig DTS: 303347520
Video Buffer: 157/1024 Audio Buffer: 33/1024
Bytes copied for buffer 0xc292ac0: 1046016
DTS: 490320.000000 time base: 0.000011 StartDTS: 303347520 Orig DTS: 303837840
Video Buffer: 276/1024 Audio Buffer: 2/1024
Bytes copied for buffer 0x1225f8b0: 1046016
DTS: 980640.000000 time base: 0.000011 StartDTS: 303347520 Orig DTS: 304328160
Video Buffer: 411/1024 Audio Buffer: 1/1024
Bytes copied for buffer 0x13380840: 1046016
DTS: 1470960.000000 time base: 0.000011 StartDTS: 303347520 Orig DTS: 304818480
Video Buffer: 885/1024 Audio Buffer: 797/1024
Bytes copied for buffer 0xc292ac0: 1046016
-----Here the audio stop for 4 or 5 seconds
-----then continues for 4 or 5 seconds 
DTS: 1961280.000000 time base: 0.000011 StartDTS: 303347520 Orig DTS: 305308800
Video Buffer: 765/1024 Audio Buffer: 797/1024
Bytes copied for buffer 0x1225f8b0: 1046016
-----Here the audio stop for 4 or 5 seconds
-----then continues for 4 or 5 seconds 
DTS: 2451600.000000 time base: 0.000011 StartDTS: 303347520 Orig DTS: 305799120
Video Buffer: 644/1024 Audio Buffer: 798/1024
Bytes copied for buffer 0x13380840: 1046016
... 
```

如果我减少缓冲区，则静音和声音时间会减少。所以我想知道如何解决它？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T20:02:59.770

我有一个类似的问题，虽然不完全相同。我什至不确定 iOS 是否会查看 mSampleTime（需要对此进行试验），但我突然想到的一件事是 mSampleTime 不是以时间为单位，而是以样本为单位。代替

> ```
> if(buffer->mPacketDescriptionCount ==0){
>     bufferStartTime.mFlags = kAudioTimeStampSampleTimeValid;
>     bufferStartTime.mSampleTime = (Float64)(dts-aqStartDts);
> } 
> ```

要设置 bufferStartTime，我使用以下内容：

```
AudioTimeStamp presentationTime = { 0 };
AudioTimeStamp actualStartTime = { 0 };

presentationTime.mFlags = kAudioTimeStampSampleTimeValid;
presentationTime.mSampleTime = (Float64) (block->presentationTime / (Float64) 1000000000.0) * (Float64) format.mSampleRate;

AudioQueueEnqueueBufferWithParameters(output, buffer, 0, NULL, trimFramesStart, trimFramesEnd, 0, NULL, &presentationTime, &actualStartTime); 
```

当然，上面的代码片段引用了我没有在这里定义的数据结构（我没有定义我的块对象，并且 presentationTime 以纳秒为单位）。同样，当我通过 AudioQueueGetCurrentTime 从音频队列中读取时间时，我自己似乎有时间漂移（将视频同步到音频中的有效位置，似乎有一个微小的恒定偏移量，对我来说随着时间的推移复合 A/V 去同步化）。还没有玩过其他音频格式。

# c# - 如何在 C# 中使用 XML 进行对象表示？

> ID：15123259
> 
> 赞同：0
> 
> 时间：2013-02-27T21:56:59.713
> 
> 标签：c#, xml, xml-parsing, xml-serialization

首先，我只想以在此之前我从未使用过 XML 或 C# 作为开头，所以如果我的问题没有意义，我深表歉意。

我的任务是修改现有的 C# 程序。

该程序当前所做的是读取具有以下条目的文本文件：

员工ID-姓名-主管ID

```
7;Jill;0
3;Joe;7
6;Bob;3 
```

上面的文本对应于 Employee-Supervisor 关系，例如，Joe 的员工 ID 是 3，他向 Jill 报告。Bob 的员工 ID 是 6，他向 Joe 汇报工作。

我用 Java 编写了一个程序，它采用上述文本文件并将它们转换为 XML 文件，如下所示（按照上面的示例）：

```
<Employees>
  <Employee_Name> Jill
           <Employee_Name>Joe 
                 <Employee_Name>Bob</Employee_Name>
           </Employee_Name>
   </Employee_Name>
</Employees> 
```

我的问题如下：

我怎样才能采用这种 XML 层次结构并使其可用于我的 C# 程序，它知道这些关系？

例如，其中一项功能是让程序自动向员工的所有主管以及由同一直接经理监督的任何人发送电子邮件。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:25:39.837

您可以使用 Linq to XML 来查询您的文档：

首先，你需要一个类来存储数据：

```
class Employee
{
    public string Name { get; set; }
    public List<Employee>  Subordinates { get; set; }

} 
```

然后，您可以使用它`XElement.Parse()`来解析您的 xml 字符串或`XElement.Load(filePath)`从文件中加载它。

```
var xml = XElement.Parse("<Employees>  <Employee_Name> Jill           <Employee_Name>Joe                  <Employee_Name>Bob</Employee_Name>           </Employee_Name>   </Employee_Name></Employees>"); 
```

和递归算法来获取数据：

```
static List<Employee> GetEmployees(XElement xml)
{
    return (from e in xml.Elements("Employee_Name")
            let name = e.Nodes().First().ToString()
            select new Employee { Name = name, Subordinates = GetEmployees(e) }).ToList();
} 
```

可以在您的 xml 上调用它：

```
var employees = GetEmployees(xml); 
```

对于您的示例数据，您将收到一名员工 (Jill) 和一名下属 (Joe)，后者也将拥有另一名下属 (Bob)。

# java - 如何检查memcache是 否过期

> ID：15123260
> 
> 赞同：1
> 
> 时间：2013-02-27T21:56:59.940
> 
> 标签：java, google-app-engine

我将值存储在集合中并将到期日期设置为从今天开始的一天：

```
mservice.put("myList", listValues, Expiration.onDate(new Date(System.currentTimeMillis() + 86400000))); 
```

当我使用以下命令请求此列表时缓存过期时：

```
mservice.get("myList"); 
```

返回值会为空吗？

我想每天刷新一次缓存，需要一种方法来检查缓存是否过期。如果过期，则重新填充缓存。上面描述的方法是执行此操作的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:06:11.350

正如[https://developers.google.com/appengine/docs/python/memcache/clientclass#Client_get](https://developers.google.com/appengine/docs/python/memcache/clientclass#Client_get)所说，如果密钥不再在缓存中，则返回值将为*None （不是空列表）。*所以是的，如果你的调用返回 None，你需要刷新它。

# c# - 在 C# 项目中运行 SAS 9.2 程序？

> ID：15123261
> 
> 赞同：2
> 
> 时间：2013-02-27T21:57:06.943
> 
> 标签：c#, sas

我每天都在运行 SAS 批处理文件，但由于没有编译 SAS 文件，因此只需使用记事本打开文件即可查看它们。

我想知道是否可以从 C# 项目中运行 .SAS 文件，从而隐藏 SAS 代码。

在此先感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:25:38.793

如果你想隐藏你的 SAS 代码，有几种方法可以做到这一点，而不用那么复杂。这个主题在这里得到了很好的介绍： [https ://communities.sas.com/thread/34604?start=0&tstart=0](https://communities.sas.com/thread/34604?start=0&tstart=0)

存储程序和编译宏在这里是两个非常好的解决方案；它们相当容易实现，并且允许您以最少的额外工作来部署您的代码（就像 C# 项目或其他任何东西）。

# javascript - 位置：固定导航停止在特定 div 的末尾 - 视差滚动和 javascript

> ID：15123262
> 
> 赞同：0
> 
> 时间：2013-02-27T21:57:11.597
> 
> 标签：javascript, scroll, css-position, parallax

我有一个垂直方向的垂直导航栏，我想在`#contact`. 如果用户向上滚动，它将需要再次恢复滚动。实现这一目标的最佳方法是什么？

正在使用的javascript：

```
$(function() {
            $.fn.scrollBottom = function() {
                return $(document).height() - this.scrollTop() - this.height();
            };

            var $el = $('#nav>div');
            var $window = $(window);
            var top = $el.parent().position().top;

            $window.bind("scroll resize", function() {
                var gap = $window.height() - $el.height() - 10;
                var visibleFoot = 340 - $window.scrollBottom();
                var scrollTop = $window.scrollTop()

                if (scrollTop < top + 10) {
                    $el.css({
                        top: (top - scrollTop) + "px",
                        bottom: "auto"
                    });
                } else if (visibleFoot > gap) {
                    $el.css({
                        top: "auto",
                        bottom: visibleFoot + "px"
                    });
                } else {
                    $el.css({
                        top: 0,
                        bottom: "auto"
                    });
                }
            }).scroll();
        }); 
```

[jsfiddle](http://jsfiddle.net/pVmeD/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T00:09:29.693

我相信这是您正在寻找的代码：

```
$(function() {
    var $Nav = $('#Nav');
    var $window = $(window);
    var $contact = $('#contact');
    var maxTop = $contact.offset().top + $contact.height() - $Nav.height();
    window.navFixed = 1;

    $window.bind("scroll resize", function() {
        var currentTop = $window.scrollTop();
        if (currentTop <= maxTop && window.navFixed == 0) {
            $Nav.css({
                position: 'fixed',
                top: '5%'
            });
            window.navFixed = 1;
        } else if (currentTop > maxTop && window.navFixed == 1) {
            $Nav.css({
                position: 'absolute',
                top: maxTop
            });
            window.navFixed = 0;
        }
    }).scroll();
}); 
```

该`#Nav`元素包含您最初指定的 CSS：`position: fixed; top: (...)`. `maxTop`文档准备好后，根据`#contact`元素的顶部和高度计算变量。

在`scroll`and`resize`事件上，变量`currentTop`被计算为当前滚动位置。如果此值低于`maxTop`，则`#Nav`设置为原始 CSS；如果该值较高，则应用新的 CSS 样式：`position: absolute; top: maxTop;`

`window.navFixed`用于防止 CSS 在滚动时不断更新。我确信该位可以改进，但是，它证明了它的目的。

查看[JSFiddle](http://jsfiddle.net/pVmeD/2/)以获取完整的 HTML。

PS。*您的代码中有一个小错误，其中`#Nav`指的是`<ul>`元素，而不是`<nav>`元素。但是，移动元素是`<ul>`，当它应该是 时`<nav>`。*

# internet-explorer - ie8 上的 @font-face 文本块状 - 实时示例

> ID：15123263
> 
> 赞同：3
> 
> 时间：2013-02-27T21:57:14.987
> 
> 标签：internet-explorer, fonts, internet-explorer-8, font-face

据我所知，我已经正确嵌入了@font-face 字体（我已经检查并仔细检查了），但是我在 IE8 上遇到了以前从未经历过的奇怪行为。

在 IE8 上，有一个完美呈现的字体闪烁，然后它们切换为非常块状。它们在所有其他浏览器（IE9+、Webkit 等）中都能正常工作

这是有问题的网站： http: [//scope-art.com/](http://scope-art.com/)

我正确地提供了eot字体：

```
@font-face {
    font-family: 'proxima';
    src: url('../fonts/proxima_nova_bold-webfont.eot');
    src: url('../fonts/proxima_nova_bold-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/proxima_nova_bold-webfont.woff') format('woff'),
         url('../fonts/proxima_nova_bold-webfont.ttf') format('truetype'),
         url('../fonts/proxima_nova_bold-webfont.svg#proxima_nova_rgbold') format('svg');
    font-weight: bold;
    font-style: normal;
} 
```

谁能解释发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:05:24.890

您需要提供字体的 EOT 版本，以便 IE8 嵌入它。
这可能就是为什么它没有按您希望的那样工作。

您可以尝试[使用 Font Squirrel @font-face Generator](http://www.fontsquirrel.com/fontface/generator)作为准备字体代码的工具。

# sql-server - 使用实体框架在 DTC 中提交然后查询？

> ID：15123265
> 
> 赞同：0
> 
> 时间：2013-02-27T21:57:39.637
> 
> 标签：sql-server, entity-framework, msdtc

关于实体框架如何参与 DTC 事务的快速（我认为）问题。

如果我在同一个分布式事务中创建两个 DbContext，我保存在第一个上下文中的数据是否可以通过第二个上下文提供给后续查询？

换句话说，在 DTC 事务中：我通过 context1 获取、更改和保存数据，然后创建 context2 并查询相同的实体。context1 中未提交的数据是否对 context2 可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:48:05.233

看来第二个上下文确实可以看到第一个上下文所提交的更改。我们正在使用读提交隔离。我本质上是在做（伪代码）：

```
Start Distributed Transaction

Context1: Fetch data into entities
Context1: Change entities
Context1: Save entities

Context2: Fetch data into same entities as used context 1
Context2: Change entities
Context2: Save entities

Commit Distributed Transaction 
```

当我进入上下文 2 时，我确实看到了保存在上下文 1 中的更改，即使它们没有提交（通过 DTC）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T23:14:34.407

这取决于您使用的隔离级别。

如果您要将 DbContexts 包含在[TransactionScope](http://msdn.microsoft.com/en-gb/library/system.transactions.transactionscope.aspx)中并指定 IsolationLevel.ReadUncommitted，例如

```
var options = new TransactionOptions{ IsolationLevel = System.Transactions.IsolationLevel.ReadUncommitted };
using(var scope= new TransactionScope(TransactionScopeOption.Required, options))
{
    ... DbContexts here

    scope.Complete();
} 
```

然后您的第二个查询将能够看到第一个查询所做的更改。对于其他隔离级别，他们不会。

SQL Server 的默认隔离级别是 Read Committed，但[TransactionScope](http://msdn.microsoft.com/en-gb/library/system.transactions.transactionscope.aspx)的默认隔离级别是 Serializable。

有关一些示例，请参见[http://www.gavindraper.co.uk/2012/02/18/sql-server-isolation-levels-by-example/](http://www.gavindraper.co.uk/2012/02/18/sql-server-isolation-levels-by-example/)。

# python - Python - 具有多个（目标列表“=”）组的赋值语句有优点/缺点吗？

> ID：15123267
> 
> 赞同：1
> 
> 时间：2013-02-27T21:57:46.813
> 
> 标签：python

从[这里](https://stackoverflow.com/questions/6780952/how-to-change-behavior-of-dict-for-an-instance)找到的递归字典的解决方案中，我看到了以下 Python 配方：

```
class RecursiveDict(dict):
    """Implementation of perl's autovivification feature."""
    def __missing__(self, key):
        value = self[key] = type(self)()
        return value 
```

关于行`value = self[key] = type(self)()`：与以下代码相比，它有什么优点或缺点吗？还是只是语法？

```
self[key] = type(self)()
value = self[key] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T22:04:02.417

它主要是语法糖，但不适用于您列出的语句；相反，它相当于

```
value = type(self)()
self[key] = value 
```

要查看差异，请在 Python 提示符下键入以下内容：

```
>>> class FakeDict(object):
...  def __setitem__(self, k, v):
...   pass
...  def __getitem__(self, k):
...   raise KeyError("boom!")
... 
>>> d = FakeDict()
>>> x = d[1] = 42
>>> d[1] = 42
>>> x = d[1]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 5, in __getitem__
KeyError: boom! 
```

当然，对于一个乖巧的人`dict`来说，这无关紧要，但是

```
self[key] = type(self)()
value = self[key] 
```

`dict`确实在第二行执行了多余的查找，因此在循环内，速记可能会带来性能优势。

**在一般情况下**，它甚至比我上面所说的要复杂一些。速记赋值实际上等价于

```
__some_temporary = type(self)()
value = __some_temporary
self[key] = __some_temporary 
```

并且简化的形式出现`value = type(self)(); self[key] = value`只是因为`value`是一个简单的局部变量。如果`value`被替换为可能失败的形式的表达式`container[key]`，则等价将不再成立。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:01:08.407

这只是语法。有时它使代码更容易阅读，有时则不然。

但是会发生什么？另一个答案让我很好奇：我评论说编译器可能使用了“寄存器或变量”，而这正是发生的事情。让我们反编译一个简单的函数：

```
>>> import dis
>>> def f():
...     a = b = c = 1
...     return a
... 
>>> dis.dis(f)
  2           0 LOAD_CONST               1 (1)
              3 DUP_TOP             
              4 STORE_FAST               0 (a)
              7 DUP_TOP             
              8 STORE_FAST               1 (b)
             11 STORE_FAST               2 (c)

  3          14 LOAD_FAST                0 (a)
             17 RETURN_VALUE 
```

最右边的值（在我`type(self)()`的实际情况下为 1）被加载到堆栈上（想想“局部变量”）然后复制到堆栈上（在基于堆栈的 VM 操作中消耗堆栈，所以如果你想“保持"一个值，您需要制作多个副本）然后分配，然后复制，然后分配等等。即，转换回 Python 这类似于：

```
def f():
    t = 1
    a = t
    b = t
    c = t
    return a 
```

编译器甚至保留了从左到右 (a, b, c) 的赋值顺序。

# android - Android ADB 端口号更改，Eclipse 无法连接设备

> ID：15123274
> 
> 赞同：2
> 
> 时间：2013-02-27T21:58:14.383
> 
> 标签：android, windows, android-emulator, adb

我使用 Windows 7 升级到新电脑。Eclipse 无法连接到 ADB。曾经。任务管理器显示 ADB 端口号在 3180 到 5452 之间的任何位置，而不是应该在 5555 到 5585 的范围内。进入命令提示符输入“kill-server”然后“start-server”重置最后显示“守护程序未运行。现在在端口 5037 上启动它 * 守护程序已成功启动”但下一个命令“adb devices”显示没有附加任何内容。端口号发生变化，DDMS 显示 ADB 已被强制关闭，因此某处存在连接。

我尝试使用“adb port xxxx”更新驱动程序并强制端口号连接，但显然它没有工作，或者我不会在这里发布。在我最后一台使用 WinXP 的电脑上，如果需要，我可以强制使用端口号以使其工作，但这里没有发生这种情况。

有什么建议么？

# php - 无法连接到数据库，连接太多

> ID：15123276
> 
> 赞同：0
> 
> 时间：2013-02-27T21:58:16.887
> 
> 标签：php, mysql, mysqli

当我尝试连接到我的数据库时出现以下错误。

> 警告：mysqli::mysqli() [mysqli.mysqli]: (HY000/2002): 无法通过 /homez.640 中的套接字 '/var/run/mysqld/mysqld.sock' (2) 连接到本地 MySQL 服务器/connelho/www/uea/includes/database.php on line 8 无法连接到 MySQL: (2002) Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)

在执行任何 SQl 查询之前，我总是运行以下连接方法：

```
public static function connect() {
    require_once("constants.php");
    $mysqli = new mysqli(DB_SERVER, DB_USER, DB_PASSWORD, DB_NAME);
    if ($mysqli->connect_errno) {
        die("Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error);
    }
    return $mysqli;
} 
```

在任何 SQl 查询之后，我总是运行以下断开连接方法：

```
public static function disconnect($mysqli = NULL, $stmt = NULL) {
    if (isset($mysqli)) {
        $mysqli->close();
    }
    if (isset($stmt)) {
        $stmt->close();
    }
} 
```

我查看了[https://stackoverflow.com/a/2499660](https://stackoverflow.com/a/2499660)并向我的托管服务提供商发送了电子邮件，他们告诉我检查我的脚本“我们有 30 个 MySQL 连接作为限制 - 我们无法调整它，也没有理由这样做如果您的脚本运行正常，应该会发生”。它工作了好几个星期，然后突然停止连接。我是该网站的唯一访问者。

关于我的数据库类如何连接和断开连接的示例：

```
public static function county_select() {
    //connect to database
    $mysqli = Database::connect();

    //write sql statement
    $sql = "SELECT id, county FROM Counties ORDER BY country, county ASC";

    //prepared statement, stage 1: prepare
    if (!($stmt = $mysqli->prepare($sql))) {
        die("Prepare failed: (" . $mysqli->errno . ") " . $mysqli->error);
    }

    //prepared statement, stage 2: execute  
    if (!$stmt->execute()) {
        die("Execute failed: (" . $stmt->errno . ") " . $stmt->error);
    }

    //prepared statement, stage 3: bind result
    if (!$stmt->bind_result($id, $county)) {
        die("Binding result failed: (" . $stmt->errno . ") " . $stmt->error);
    }
    $counties = array();
    //prepared statement, stage 5: fetch    
    while ($stmt->fetch()) {
        $counties[] = array("id" => $id, "county" => $county);
    }
    //disconnect from database
    Database::disconnect($mysqli, $stmt);

    return $counties;
} 
```

我已经一天无法连接到我的网站了。连接多久到期？如何手动断开它们？我认为 PHP 在请求结束时会以任何方式自动关闭数据库连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T23:55:00.413

查询后请勿断开连接！仅在第一次查询发生时连接到数据库一次。否则，您将尝试连接超过必要的连接，这不止一次。

在寻找性能时，总是连接和断开连接并不是一个好主意。它会禁用某些功能：基本上，您将丢失与现有连接相关的任何内容，例如重新使用准备好的语句，或在后续查询中访问 LAST_INSERT_ID()。保持连接活动对此很重要。

但是你的问题通常源于滥用持久连接，但我在这里看不到这样的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:09:02.743

好吧，我已经非常愚蠢了。前几天晚上我无法连接到服务器，所以我将连接方法中使用的常量切换到 localhost，然后第二天就忘记了……难怪我无法连接！什么扳手哈哈。不知道为什么那天晚上我无法连接，但我现在可以了。很抱歉浪费了人们的时间

# javascript - 多个jquery html（）分配不起作用

> ID：15123278
> 
> 赞同：0
> 
> 时间：2013-02-27T21:58:17.410
> 
> 标签：javascript, jquery

我想在 ajax 调用之前和期间向用户展示一个“加载器”。这是代码（简化版...）

```
$(document).ready(function() {  
    $("#btn").click(function(){
        $("#log").html("loading ajax call...");
        anotherFunc();
    });
});

function anotherFunc(){
   $.ajax({
       type: "GET",
       url: correct_url,
       data: data_to_send,
       dataType: "jsonp",
       success: function(data){
        $("#log").html("new html");
       }
   })
} 
```

问题是“加载 ajax 调用...”从未出现。我只看到显示“新 html”。单打 ajax #log 修改调用完美地单独工作（没有其他）

还有其他方法吗？我究竟做错了什么？

附言。我还尝试用相同的结果写入另一个 id (#log2)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:03:27.763

很可能一切正常，但 AJAX 调用返回非常快（尤其是在本地测试时）。要查看是否是这种情况，只需执行以下操作：

```
$(document).ready(function() {  
    $("#btn").click(function(){
        $("#log").html("loading ajax call...");
        setTimeout(function(){anotherFunc();},2000);
    });
}); 
```

# .net - Html.ActionLink 到上位控制器

> ID：15123279
> 
> 赞同：0
> 
> 时间：2013-02-27T21:58:17.073
> 
> 标签：.net, asp.net-mvc, actionlink

在我拥有的当前控制器**视图/用户中**

```
grid.Column(format: (item) => Html.ActionLink("Edit", "Edit", new { id = item.UserId }), style: "column-action"), 
```

我有另一种观点，例如**Views/Commissions**

所以我想在网格上添加`Html.ActionLink`到上定位的控制器

```
grid.Column(format: (item) => Html.ActionLink("Comission", "Index", "Comission", new { id = item.UserId }), style: "column-action") 
```

但我看到了错误的网址，例如

```
http://localhost:51381/Users?Length=16 
```

而不是应该像

```
http://localhost:51381/Comission/Index/123-sfsdf-2342342-ssdfsdf 
```

任何线索如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:18:30.830

问题是您创建链接的方法使用了不正确的 Html.ActionLink 重载。

您将需要添加`null`

看看this [other question](https://stackoverflow.com/questions/2686260/asp-net-mvc-adding-querystring-length-to-actionlinks)以了解问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T22:10:01.077

您需要添加`null`作为最后一个参数（代表`htmlArguments`）以使用正确的`Html.ActionLink`重载：

```
grid.Column(format: (item) => Html.ActionLink("Comission", "Index", "Comission", new { id = item.UserId }, /*here ->*/null), style: "column-action") 
```

# javascript - 使用jQuery删除元素之前的文本

> ID：15123281
> 
> 赞同：3
> 
> 时间：2013-02-27T21:58:18.877
> 
> 标签：javascript, jquery, dom

想象一下这个场景：

```
<span>Item 1</span> | <span>Item 2</span> 
```

如何定位 | 并删除它？另外，假设我总是需要删除 | 在其中`span`包含“第 2 项”之前，列表可以随着在“第 2 项”之前或之后添加的项目而增长。所有新项目都将包含在`span`其中，并用 | 分隔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T22:13:03.700

```
$('span').each(function() {
    if ($(this).text() == 'Item 2') {
        $(this.previousSibling).remove();
    }
}); 
```

[http://jsfiddle.net/spFUG/2/](http://jsfiddle.net/spFUG/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T22:21:12.130

操作文本节点是 jquery 不完全擅长的事情之一。顺便说一下，本机浏览器 API 做得很好。即使您不想经常使用它，这次您也可能应该使用它。`previousSibling`选择前一个节点，无论是文本节点、评论节点还是元素节点。假设它始终是您要删除的文本节点可能是安全的：

```
var $elem = $(":contains('Item 2')");

$elem.map(function(){ //select the preceding node to any element we want to remove
  return this.previousSibling
}).addBack() // select the original element node as well
.remove(); // remove both 
```

请注意，这`addBack`是在 jQuery 1.8 中添加的。如果您使用的是旧版本，请`andSelf`改用。如果您只想删除*文本*节点，请`addBack`完全删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:03:03.643

更新

这是一些直接的javascript，可以从代码中删除所有“|”

```
var parent = $('span').parent().get(0), children = parent.childNodes, node;

    for (node = 0;node < children.length;node++){
        if (children[node].data === " | "){
             parent.removeChild(children[node]);
        }
    } 
```

小提琴：http: [//jsfiddle.net/vg3pc/](http://jsfiddle.net/vg3pc/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T22:14:53.453

`.contents`查找文本节点。

```
$("#container").contents().each(function () {
    //Text node
    if (this.nodeType === 3) {
       $(this).remove();
    }
}); 
```

[http://jsfiddle.net/QQsk5/](http://jsfiddle.net/QQsk5/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T22:16:05.490

`span`找到s的父级并与[`.html()`](http://api.jquery.com/html/)一起使用`.replace()`。

JAVASCRIPT：

```
$('span:first-child').parent().html($('span:first-child').parent().html().replace(/\|/g, '')) 
```

演示：http: [//jsfiddle.net/dirtyd77/5F3kf/2/](http://jsfiddle.net/dirtyd77/5F3kf/2/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T22:23:57.933

抢`spans`。删除所有内容。放回跨度（`.join`ed 随您选择）。

```
<div class='container'>
  <span>Item 1</span> | <span>Item 2</span>
</div> 
```

.

```
var $c = $(".container");
var $spans = $c.find("span");
var htmlSpans = [];
$spans.each(function(){
   htmlSpans.push($(this).prop("outerHTML"));
});

$c.empty();
$c.append(htmlSpans.join(" ")); 
```

[http://jsfiddle.net/u59Uz/](http://jsfiddle.net/u59Uz/)

编辑：肮脏的黑客使用相同的逻辑来处理这个非常具体的情况。正则表达式替换在管道前后处理 0 个或多个空格。

```
var $c = $(".container");
var html = $c.prop("outerHTML");

$c.empty();
$c.append(html.replace(/\s*\|\s*<span>Item 2/,"<span>Item 2" )); 
```

[http://jsfiddle.net/TnXB7/1/](http://jsfiddle.net/TnXB7/1/)

# android - 回合制多人游戏：制作/验证动作

> ID：15123282
> 
> 赞同：0
> 
> 时间：2013-02-27T21:58:27.437
> 
> 标签：android

我想使用 Skiller 将我的游戏带到多人游戏中。多人模式发生在与口袋妖怪相同风格的战斗中，怪物使用玩家选择的动作进行战斗。Skiller 使用在用户之间发送的字符串来传达动作。对于多人游戏，我应该：

(1) 只发送招式名称，让双方玩家的客户端计算结果（伤害）。

(2) 让进行移动的客户端计算结果并发送。

(3) 发送移动名称，让两个客户端计算结果并发送它们以相互检查

(4) 一个我不知道的更好的选择

[编辑] 在战斗开始时，一条消息会来回传递，以便双方玩家的客户端都有关于怪物的所有信息（健康、攻击值、状态），以便每个人都可以根据移动计算造成的伤害。

如果我要在移动后验证结果，如果他们得到不同的结果会发生什么？验证是有意义的，但我不确定如果它以不同的方式返回我会想要做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:22:58.130

让攻击者发送移动，然后防御者（被攻击的人）计算造成的伤害。

继续看口袋妖怪的例子，只有防御者应该计算伤害的原因是攻击者不需要从防御者那里收到很多信息，例如最大生命值、“防御”类属性等。然后防御者将收到的伤害发送回攻击者，以便双方玩家都知道发生了什么。

我相信这是最好的方法。

# jpa-2.0 - 如何让 EclipseLink 为 UPDATE WHERE 子句输出有效的 Informix SQL？

> ID：15123285
> 
> 赞同：1
> 
> 时间：2013-02-27T21:58:38.743
> 
> 标签：jpa-2.0, eclipselink, informix

我们有一个这样的命名查询：

```
UPDATE Foo f SET f.x = 0 WHERE f.x = :invoiceId 
```

`Foo`在这种情况下是具有超类的实体，使用每类表的继承策略。

EclipseLink 生成的 SQL 是：

```
UPDATE foo_subclass SET x = ?
 WHERE EXISTS(SELECT t0.id
                FROM foo_superclass t0, foo_subclass t1
               WHERE ((t1.x = ?) AND ((t1.id = t0.id) AND (t0.DTYPE = ?))) 
```

（`?`插槽已正确填充。）

在 Informix 11.70 上，我们收到子查询无法访问正在更改的表的错误。

这是我能够找到的关于 Informix 子查询限制的文档：http: [//publib.boulder.ibm.com/infocenter/idshelp/v115/index.jsp ?topic=%2Fcom.ibm.sqls.doc%2Fids_sqs_2005 .htm](http://publib.boulder.ibm.com/infocenter/idshelp/v115/index.jsp?topic=%2Fcom.ibm.sqls.doc%2Fids_sqs_2005.htm)

其他数据库也对这样的子查询有限制，因此尽管这表现为 Informix 问题，但我敢肯定，如果我们针对 MySQL 运行它，我们会得到类似的错误。

如何让 EclipseLink 遵守这些限制？我应该使用更好的查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T04:34:02.460

找到了答案。看起来 EclipseLink 必须为 MySQL 处理这种情况，它也有类似的问题。

答案是在你的`InformixPlatform`子类中，你需要重写以下方法来解决这个问题：

1.  `supportsLocalTemporaryTables()`: 这需要返回`true`
2.  `shouldAlwaysUseTempStorageForModifyAll()`: 这需要返回`true`
3.  `dontBindUpdateAllQueryUsingTempTables`需要返回`true`
4.  `getCreateTempTableSqlPrefix()`: 这需要返回`CREATE TEMP TABLE`
5.  `getCreateTempTableSqlSuffix()`: 这需要返回`WITH NO LOG`
6.  `isInformixOuterJoin()`: 需要退货`false`
7.  `getTempTableForTable(DatabaseTable)`：这需要这样做：

    ```
    return new DatabaseTable("TL_" + table.getName(), "" /* no table qualifier */, table.shouldUseDelimiters(), this.getStartDelimiter(), this.getEndDelimiter()); 
    ```

此外，您还需要覆盖以下方法以获得正确的`InformixPlatform`行为：

1.  `appendBoolean(Boolean, Writer)`：库存的 Informix 平台无法正确写出布尔文字。你需要这样做：

    ```
    if (Boolean.TRUE.equals(booleanValue)) {
      writer.write("'t'");
    } else {
      writer.write("'f'");
    } 
    ```

2.  您需要覆盖`writeUpdateOriginalFromTempTableSql`，以便它包含与覆盖相同的代码`H2Platform`：

    ```
    @Override
    public void writeUpdateOriginalFromTempTableSql(final Writer writer, final DatabaseTable table, final Collection pkFields, final Collection assignedFields) throws IOException {
      writer.write("UPDATE ");
      final String tableName = table.getQualifiedNameDelimited(this);    
      writer.write(tableName);
      writer.write(" SET ");
      final int size = assignedFields.size();
      if (size > 1) {
        writer.write("(");            
      }
      writeFieldsList(writer, assignedFields, this);
      if (size > 1) {
        writer.write(")");            
      }
      writer.write(" = (SELECT ");        
      writeFieldsList(writer, assignedFields, this);
      writer.write(" FROM ");
      final String tempTableName = this.getTempTableForTable(table).getQualifiedNameDelimited(this);
      writer.write(tempTableName);
      writeAutoJoinWhereClause(writer, null, tableName, pkFields, this);
      writer.write(") WHERE EXISTS(SELECT ");
      writer.write(((DatabaseField)pkFields.iterator().next()).getNameDelimited(this));
      writer.write(" FROM ");
      writer.write(tempTableName);
      writeAutoJoinWhereClause(writer, null, tableName, pkFields, this);
      writer.write(")");
    } 
    ```

最后，您的构造函数需要调用`this.setShouldBindLiterals(false)`.

有了这些变化，Informix 似乎很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:33:20.557

代替：

```
UPDATE foo_subclass SET x = ?
 WHERE EXISTS(SELECT t0.id
                FROM foo_superclass t0, foo_subclass t1
               WHERE ((t1.x = ?) AND ((t1.id = t0.id) AND (t0.DTYPE = ?))) 
```

做这个：

```
UPDATE
  foo_subclass SET x = ?
WHERE
  foo_subclass.x = ? AND
  EXISTS(SELECT t0.id
         FROM foo_superclass t0
         WHERE ((foo_subclass.id = t0.id) AND (t0.DTYPE = ?)) 
```

请注意，在 11.50 上，您不能为 foo_subclass 使用别名。11.70 允许。我假设“id”是主键（或至少是唯一标识符）。

# clojure - 在 Clojure 中，我如何获得只有记录实例的记录的基础？

> ID：15123287
> 
> 赞同：4
> 
> 时间：2013-02-27T21:58:39.890
> 
> 标签：clojure, record

我在 Clojure 中有记录

```
(defrecord Animal [name age]) 
```

我可以轻松地创建记录的一个实例

```
(def my-cat (Animal. "spot" 2)) 
```

我还可以使用 map->Animal 函数创建一个实例

```
(def my-dog (map->Animal {:name "snowy" :age 6 :legs 3})) 
```

这创造了

```
#user.Animal{:name "snowy", :age 6, :legs 3} 
```

仅给定一个实例`Animal`，例如`my-dog`，我如何获得基础？

我知道我可以进行静态调用`Animal`来获取它，如下所示：

```
(Animal/getBasis) 
```

这给出了`[name age]`，但我如何从中得到这个`my-dog`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:28:15.060

问题似乎在于 clojure 对静态方法调用的处理。这是一些可以得到答案的代码

```
user=> (defrecord Animal [name age])
user.Animal
user=> (def my-dog (map->Animal {:name "snowy" :age 6 :legs 3}))
#'user/my-dog
user=> (. (. (type my-dog) getMethod "getBasis" nil) invoke nil nil)
[name age] 
```

[在另一个 SO 线程](https://stackoverflow.com/questions/2852133/clojure-vars-and-java-static-methods)中对此进行了更长的讨论

# java - 实例化列表 可以使用泛型类型吗？

> ID：15123292
> 
> 赞同：0
> 
> 时间：2013-02-27T21:58:53.993
> 
> 标签：java, generics, objectinstantiation

我正在辅导的一个学生正在学习一个使用 Dietel 关于 Java 的书的 Web 开发课程，其中包含一些涉及泛型的奇怪代码：

```
class StackComposition <T>
{
    private List<T> stackList;

    public StackComposition()
    {
        stackList = new List<T>("stack")  // ERROR
    }

    // .... more code
} 
```

我很清楚为什么这段代码不起作用，我对为什么教师建议学生使用这段代码作为起点感到困惑。也许我只是不了解泛型并且我的 Java 技能不足，但我不明白如何用泛型类型实例化泛型集合。我看到意图是通过使用通用列表集合并在运行时确定类型来创建堆栈，但我看不出使用上述配置如何实现这一点。我的第一个倾向是告诉学生使用 Generic`Stack<T>`对象而忘记编写这个自定义 Stack 类，但显然这不是作业的目标。

我尝试使用该`java.lang.reflect`软件包进行测试来解决此问题，但据我所知，这仅适用于非通用容器，例如`Array`：

```
public StackComposition(Class<T> type)
{
    Object obj = Array.newInstance(type, 10);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T22:09:08.680

您的代码中有两个问题：

您正在尝试使用`new`非法的关键字实例化接口。您应该实例化`ArrayList`（或实现的类`List`）的对象。

其次，不允许将`String`引用传递给构造函数。

因此，这是您应该在代码中使用的内容：

```
stackList = new ArrayList<T>(); 
```

或者`stackList = new ArrayList<T>(10);`如果你想给你的初始大小`stackList`（替换`10`为你希望你的列表被初始化的大小）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:32:13.237

从纯粹的教学角度来看，该练习可能旨在通过将某些方法*转发*到某些更通用类型的包含实例来说明*组合。*只需要暴露想要的方法，内部使用的具体类型可以根据需要改变。

 *```
import java.util.Deque;
import java.util.LinkedList;

public class MyStack<T> {

    private Deque<T> deque = new LinkedList<T>();

    public void push(T item){
        deque.push(item);
    }

    public T pop() {
        return deque.pop();
    }

    public static void main(String[] args) {
        MyStack<Integer> stack = new MyStack<>();
        stack.push(42); // OK
        stack.addFirst(0); // no such method
    }
} 
```*

# php - DomPdf 在 php 中渲染 html 时出错

> ID：15123295
> 
> 赞同：0
> 
> 时间：2013-02-27T21:59:02.683
> 
> 标签：php, html, dompdf

我尝试使用 div、tables、thead、tboody、tfoot、h2、h3 和 ccs 呈现视图 HTML。

我在 php 中使用 donpdf 渲染的结果是：

```
"%PDF-1.3 1 0 obj << /Type /Catalog /Outlines 2 0 R /Pages 3 0 R >> endobj 2 0 obj << /Type /Outlines /Count 0 >> endobj 3 0 obj << /Type /Pages /Kids [6 0 R ] /Count 1 /Resources << /ProcSet 4 0 R /Font << /F1 8 0 R >> >> /MediaBox [0.000 0.000 612.000 792.000] >> endobj 4 0 obj [/PDF /Text ] endobj 5 0 obj << /Creator (DOMPDF) /CreationDate (D:20130227215320+00'00') /ModDate (D:20130227215320+00'00') >> endobj 6 0 obj << /Type /Page /Parent 3 0 R /Contents 7 0 R >> endobj 7 0 obj << /Filter /FlateDecode /Length 66 >> stream x��2�300P@&�ҹ�B�M��́����BH����������BH��B���H�f�B���k�� endstream endobj 8 0 obj << /Type /Font /Subtype /Type1 /Name /F1 /BaseFont /Times-Roman /Encoding /WinAnsiEncoding >> endobj xref 0 9 0000000000 65535 f 0000000008 00000 n 0000000073 00000 n 0000000119 00000 n 0000000273 00000 n 0000000302 00000 n 0000000416 00000 n 0000000479 00000 n 0000000616 00000 n trailer << /Size 9 /Root 1 0 R /Info 5 0 R >> startxref 725 %%EOF" 
```

知道为什么`dompdf`会呈现此响应吗？

这是生成Pdf的代码：

```
class PdfView extends PhpView {

public $orientation = "portrait";
public $size = "letter";

function render(Response $response) {
    $response->resetBuffer();
    parent::render($response);
    $buffer = utf8_decode($response->getBuffer());
    $response->resetBuffer();
    Context::load("app/core/lib/dompdf/dompdf_config.inc");
    $pdf = new DOMPDF();
    $pdf->set_paper($this->size,$this->orientation);
    $pdf->load_html($buffer);
    $pdf->render();
    $render = $pdf->output();
    if ($path = @$response->result->options->save)
        file_put_contents($path, $render);
    else {
        $response->setHeader("Content-Type", "application/pdf");
        echo $render;
    }
} 
```

}

应用程序的标题是“application/pdf”。请帮帮我！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-11T18:35:57.537

我有同样的问题。基本问题可以在类库中找到，如下：

```
/* FUNCION QUE DARÁ ERRORES*/
/* Function with troubles*/
if (PHP_VERSION < 6) {
    $magic_quotes = get_magic_quotes_runtime();
    set_magic_quotes_runtime(0);
}
$file_buffer = file_get_contents($path);
$file_buffer = $this->EncodeString($file_buffer, $encoding);
fclose($fd);
if (PHP_VERSION < 6) { set_magic_quotes_runtime($magic_quotes); }
    return $file_buffer;
} 
```

您必须替换为以下代码：

```
/* NUEVA FUNCION CORRECTA */
/* Fuction correct*/  
if (PHP_VERSION < 6) {
    $magic_quotes = get_magic_quotes_runtime();
    ini_set("magic_quotes_runtime", 0);
}
$file_buffer = file_get_contents($path);
$file_buffer = $this->EncodeString($file_buffer, $encoding);
fclose($fd);
if (PHP_VERSION < 6) { ini_set("magic_quotes_runtime", $magic_quotes); }
    return $file_buffer;
} 
```

我希望这段代码对你有帮助:)

# java - 自定义名称空间 JAXB、XML

> ID：15123297
> 
> 赞同：1
> 
> 时间：2013-02-27T21:59:15.480
> 
> 标签：java, xml, jaxb

我想使用自定义名称空间映射以下 xml。我检查了[How to have custom namespace prefix](https://stackoverflow.com/questions/13817126/how-to-have-custom-namespace-prefix)但找不到任何答案。

```
<p385:execute xmlns:p385="http://tal.myserver.com">
<version xsi:type="xsd:string">0.1.0</version>
<xmlData xsi:type="xsd:string">
   .... xml encoded data
</xmlData>
</p385:execute> 
```

我如何将其映射到 java 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:28:19.590

由于只有根元素是命名空间限定的，因此您只需`@XmlRootElement`在类的注释上指定命名空间。

```
@XmlRootElement(namespace="http://tal.myserver.com")
public class Execute {
} 
```

`@XmlSchema`您可以使用包级别注释建议应该用于命名空间的前缀：

*   [http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html](http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:24:35.860

使用 wsimport 工具从 WSDL 生成工件，例如 JAXB 类：

[http://docs.oracle.com/javase/7/docs/technotes/tools/share/wsimport.html](http://docs.oracle.com/javase/7/docs/technotes/tools/share/wsimport.html)

[http://jax-ws-commons.java.net/jaxws-maven-plugin/wsimport-mojo.html](http://jax-ws-commons.java.net/jaxws-maven-plugin/wsimport-mojo.html)

# php - 对准备好的语句的使用有哪些限制？

> ID：15123298
> 
> 赞同：0
> 
> 时间：2013-02-27T21:59:20.100
> 
> 标签：php, mysql

我在我的 php 项目中使用准备好的语句，在 localhost 上它工作正常，但在服务器上它停止在中间呈现页面。当我在单个语句上执行嵌套查询并使用 2 个语句修复该错误时，我看到了一个这样的错误，但是这次我在单个语句上执行 3 个独立的 sql 查询，但它仍然停留在最后一个查询中......

所有查询都是独立的，我的意思是查询不是嵌套的。

我该如何解决？

这是最后一个查询

```
if($stmt->prepare("sql"))
{
    $stmt->bind_param("s", $material);
    $stmt->bind_result($mid, $subject, $title);
    $stmt->execute();
    if($stmt->fetch()){ // do something}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T16:39:18.070

很长一段时间后，我再次遇到了同样的问题，并通过先执行我准备好的语句然后绑定结果来简单地解决它：

```
if($stmt->prepare("sql query goes here"))
{
    $stmt->bind_param("s", $material);
    $stmt->execute();
    $stmt->bind_result($mid, $subject, $title);
    if($stmt->fetch()){ // do something}
} 
```

希望这对其他人也有帮助。

# drupal - Drupal 和多站点

> ID：15123299
> 
> 赞同：1
> 
> 时间：2013-02-27T21:59:24.113
> 
> 标签：drupal

我已经设置了一个 drupal 多站点，但需要帮助才能在 stackoverflow 上的站点网络之间共享统计信息。

我需要显示有多少用户在主站点的一个节点上发布。

# mysql - PHP.ini Mysql 问题

> ID：15123305
> 
> 赞同：1
> 
> 时间：2013-02-27T21:59:35.697
> 
> 标签：mysql, windows, configuration, php

我花了很多时间试图解决这个问题。我不断收到`Fatal error: Call to undefined function mysql_connect()`错误，所以我做了一些网络拖网，其他人也遇到了同样的问题，但设法通过包含'extension ='和取消注释'extension = php_mysql.dll'来解决它，但正如你所看到的那样做这两件事还是不行。错过了什么？

我的 PHP ini（我在 Windows 7 上）（修剪！）

```
;;;;;;;;;;;;;;;;;;;;;;;;;
; Paths and Directories ;
;;;;;;;;;;;;;;;;;;;;;;;;;

; UNIX: "/path1:/path2"
;include_path = ".:/php/includes"
;
; Windows: "\path1;\path2"
include_path = ".;c:\php\includes"
;
; PHP's default setting for include_path is ".;/path/to/php/pear"
; http://php.net/include-path

; The root of the PHP pages, used only if nonempty.
; if PHP was not compiled with FORCE_REDIRECT, you SHOULD set doc_root
; if you are running php as a CGI under any web server (other than IIS)
; see documentation for security issues.  The alternate is to use the
; cgi.force_redirect configuration below
; http://php.net/doc-root
doc_root =

; The directory under which PHP opens the script using /~username used only
; if nonempty.
; http://php.net/user-dir
user_dir =

; Directory in which the loadable extensions (modules) reside.
; http://php.net/extension-dir
; extension_dir = "./"
; On windows:
; extension_dir = "ext"

; Whether or not to enable the dl() function.  The dl() function does NOT work
; properly in multithreaded servers, such as IIS or Zeus, and is automatically
; disabled on them.
; http://php.net/enable-dl
enable_dl = Off

; cgi.force_redirect is necessary to provide security running PHP as a CGI under
; most web servers.  Left undefined, PHP turns this on by default.  You can
; turn it off here AT YOUR OWN RISK
; **You CAN safely turn this off for IIS, in fact, you MUST.**
; http://php.net/cgi.force-redirect
;cgi.force_redirect = 1

; if cgi.nph is enabled it will force cgi to always sent Status: 200 with
; every request. PHP's default behavior is to disable this feature.
;cgi.nph = 1

; if cgi.force_redirect is turned on, and you are not running under Apache or Netscape
; (iPlanet) web servers, you MAY need to set an environment variable name that PHP
; will look for to know it is OK to continue execution.  Setting this variable MAY
; cause security issues, KNOW WHAT YOU ARE DOING FIRST.
; http://php.net/cgi.redirect-status-env
;cgi.redirect_status_env = 

; cgi.fix_pathinfo provides *real* PATH_INFO/PATH_TRANSLATED support for CGI.  PHP's
; previous behaviour was to set PATH_TRANSLATED to SCRIPT_FILENAME, and to not grok
; what PATH_INFO is.  For more information on PATH_INFO, see the cgi specs.  Setting
; this to 1 will cause PHP CGI to fix its paths to conform to the spec.  A setting
; of zero causes PHP to behave as before.  Default is 1\.  You should fix your scripts
; to use SCRIPT_FILENAME rather than PATH_TRANSLATED.
; http://php.net/cgi.fix-pathinfo
;cgi.fix_pathinfo=1

; FastCGI under IIS (on WINNT based OS) supports the ability to impersonate
; security tokens of the calling client.  This allows IIS to define the
; security context that the request runs under.  mod_fastcgi under Apache
; does not currently support this feature (03/17/2002)
; Set to 1 if running under IIS.  Default is zero.
; http://php.net/fastcgi.impersonate
;fastcgi.impersonate = 1

; Disable logging through FastCGI connection. PHP's default behavior is to enable
; this feature.
;fastcgi.logging = 0

; cgi.rfc2616_headers configuration option tells PHP what type of headers to
; use when sending HTTP response code. If it's set 0 PHP sends Status: header that
; is supported by Apache. When this option is set to 1 PHP will send
; RFC2616 compliant header.
; Default is zero.
; http://php.net/cgi.rfc2616-headers
;cgi.rfc2616_headers = 0

;;;;;;;;;;;;;;;;
; File Uploads ;
;;;;;;;;;;;;;;;;

; Whether to allow HTTP file uploads.
; http://php.net/file-uploads
file_uploads = On

; Temporary directory for HTTP uploaded files (will use system default if not
; specified).
; http://php.net/upload-tmp-dir
;upload_tmp_dir =

; Maximum allowed size for uploaded files.
; http://php.net/upload-max-filesize
upload_max_filesize = 2M

; Maximum number of files that can be uploaded via a single request
max_file_uploads = 20

;;;;;;;;;;;;;;;;;;
; Fopen wrappers ;
;;;;;;;;;;;;;;;;;;

; Whether to allow the treatment of URLs (like http:// or ftp://) as files.
; http://php.net/allow-url-fopen
allow_url_fopen = On

; Whether to allow include/require to open URLs (like http:// or ftp://) as files.
; http://php.net/allow-url-include
allow_url_include = Off

; Define the anonymous ftp password (your email address). PHP's default setting
; for this is empty.
; http://php.net/from
;from="john@doe.com"

; Define the User-Agent string. PHP's default setting for this is empty.
; http://php.net/user-agent
;user_agent="PHP"

; Default timeout for socket based streams (seconds)
; http://php.net/default-socket-timeout
default_socket_timeout = 60

; If your scripts have to deal with files from Macintosh systems,
; or you are running on a Mac and need to deal with files from
; unix or win32 systems, setting this flag will cause PHP to
; automatically detect the EOL character in those files so that
; fgets() and file() will work regardless of the source of the file.
; http://php.net/auto-detect-line-endings
;auto_detect_line_endings = Off

;;;;;;;;;;;;;;;;;;;;;;
; Dynamic Extensions ;
;;;;;;;;;;;;;;;;;;;;;;

; If you wish to have an extension loaded automatically, use the following
; syntax:
;
;   extension=modulename.extension
;
; For example, on Windows:
;
   extension=c:\PHP\ext\msql.dll
;
; ... or under UNIX:
;
;   extension=c:\PHP\ext\msql.so
;
; ... or with a path:
;
;   extension=/path/to/extension/msql.so
;
; If you only provide the name of the extension, PHP will look for it in its
; default extension directory.
;
; Windows Extensions
; Note that ODBC support is built in, so no dll is needed for it.
; Note that many DLL files are located in the extensions/ (PHP 4) ext/ (PHP 5)
; extension folders as well as the separate PECL DLL download (PHP 5).
; Be sure to appropriately set the extension_dir directive.
;
;extension=php_bz2.dll
;extension=php_curl.dll
;extension=php_fileinfo.dll
;extension=php_gd2.dll
;extension=php_gettext.dll
;extension=php_gmp.dll
;extension=php_intl.dll
;extension=php_imap.dll
;extension=php_interbase.dll
;extension=php_ldap.dll
;extension=php_mbstring.dll
;extension=php_exif.dll      ; Must be after mbstring as it depends on it
extension=php_mysql.dll
extension=php_mysqli.dll
;extension=php_oci8.dll      ; Use with Oracle 10gR2 Instant Client
;extension=php_oci8_11g.dll  ; Use with Oracle 11gR2 Instant Client
;extension=php_openssl.dll
;extension=php_pdo_firebird.dll
;extension=php_pdo_mysql.dll
;extension=php_pdo_oci.dll
;extension=php_pdo_odbc.dll
;extension=php_pdo_pgsql.dll
;extension=php_pdo_sqlite.dll
;extension=php_pgsql.dll
;extension=php_pspell.dll
;extension=php_shmop.dll

; The MIBS data available in the PHP distribution must be installed. 
; See http://www.php.net/manual/en/snmp.installation.php 
;extension=php_snmp.dll

;extension=php_soap.dll
;extension=php_sockets.dll
;extension=php_sqlite3.dll
;extension=php_sybase_ct.dll
;extension=php_tidy.dll
;extension=php_xmlrpc.dll
;extension=php_xsl.dll
;extension=php_zip.dll

;;;;;;;;;;;;;;;;;;;
; Module Settings ;
;;;;;;;;;;;;;;;;;;;

[CLI Server]
; Whether the CLI web server uses ANSI color coding in its terminal output.
cli_server.color = On

[Date]
; Defines the default timezone used by the date functions
; http://php.net/date.timezone
;date.timezone =

; http://php.net/date.default-latitude
;date.default_latitude = 31.7667

; http://php.net/date.default-longitude
;date.default_longitude = 35.2333

; http://php.net/date.sunrise-zenith
;date.sunrise_zenith = 90.583333

; http://php.net/date.sunset-zenith
;date.sunset_zenith = 90.583333

[filter]
; http://php.net/filter.default
;filter.default = unsafe_raw

; http://php.net/filter.default-flags
;filter.default_flags =

[iconv]
;iconv.input_encoding = ISO-8859-1
;iconv.internal_encoding = ISO-8859-1
;iconv.output_encoding = ISO-8859-1

[intl]
;intl.default_locale =
; This directive allows you to produce PHP errors when some error
; happens within intl functions. The value is the level of the error produced.
; Default is 0, which does not produce any errors.
;intl.error_level = E_WARNING

[sqlite]
; http://php.net/sqlite.assoc-case
;sqlite.assoc_case = 0

[sqlite3]
;sqlite3.extension_dir =

[Pcre]
;PCRE library backtracking limit.
; http://php.net/pcre.backtrack-limit
;pcre.backtrack_limit=100000

;PCRE library recursion limit.
;Please note that if you set this value to a high number you may consume all
;the available process stack and eventually crash PHP (due to reaching the
;stack size limit imposed by the Operating System).
; http://php.net/pcre.recursion-limit
;pcre.recursion_limit=100000

[Pdo]
; Whether to pool ODBC connections. Can be one of "strict", "relaxed" or "off"
; http://php.net/pdo-odbc.connection-pooling
;pdo_odbc.connection_pooling=strict

;pdo_odbc.db2_instance_name

[Pdo_mysql]
; If mysqlnd is used: Number of cache slots for the internal result set cache
; http://php.net/pdo_mysql.cache_size
pdo_mysql.cache_size = 2000

; Default socket name for local MySQL connects.  If empty, uses the built-in
; MySQL defaults.
; http://php.net/pdo_mysql.default-socket
pdo_mysql.default_socket=

[Phar]
; http://php.net/phar.readonly
;phar.readonly = On

; http://php.net/phar.require-hash
;phar.require_hash = On

;phar.cache_list =

[mail function]
; For Win32 only.
; http://php.net/smtp
SMTP = localhost
; http://php.net/smtp-port
smtp_port = 25

; For Win32 only.
; http://php.net/sendmail-from
;sendmail_from = me@example.com

; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
; http://php.net/sendmail-path
;sendmail_path =

; Force the addition of the specified parameters to be passed as extra parameters
; to the sendmail binary. These parameters will always replace the value of
; the 5th parameter to mail(), even in safe mode.
;mail.force_extra_parameters =

; Add X-PHP-Originating-Script: that will include uid of the script followed by the filename
mail.add_x_header = On

; The path to a log file that will log all mail() calls. Log entries include
; the full path of the script, line number, To address and headers.
;mail.log =
; Log mail to syslog (Event Log on NT, not valid in Windows 95).
;mail.log = syslog

[SQL]
; http://php.net/sql.safe-mode
sql.safe_mode = Off

[ODBC]
; http://php.net/odbc.default-db
;odbc.default_db    =  Not yet implemented

; http://php.net/odbc.default-user
;odbc.default_user  =  Not yet implemented

; http://php.net/odbc.default-pw
;odbc.default_pw    =  Not yet implemented

; Controls the ODBC cursor model.
; Default: SQL_CURSOR_STATIC (default).
;odbc.default_cursortype

; Allow or prevent persistent links.
; http://php.net/odbc.allow-persistent
odbc.allow_persistent = On

; Check that a connection is still valid before reuse.
; http://php.net/odbc.check-persistent
odbc.check_persistent = On

; Maximum number of persistent links.  -1 means no limit.
; http://php.net/odbc.max-persistent
odbc.max_persistent = -1

; Maximum number of links (persistent + non-persistent).  -1 means no limit.
; http://php.net/odbc.max-links
odbc.max_links = -1

; Handling of LONG fields.  Returns number of bytes to variables.  0 means
; passthru.
; http://php.net/odbc.defaultlrl
odbc.defaultlrl = 4096

; Handling of binary data.  0 means passthru, 1 return as is, 2 convert to char.
; See the documentation on odbc_binmode and odbc_longreadlen for an explanation
; of odbc.defaultlrl and odbc.defaultbinmode
; http://php.net/odbc.defaultbinmode
odbc.defaultbinmode = 1

;birdstep.max_links = -1

[Interbase]
; Allow or prevent persistent links.
ibase.allow_persistent = 1

; Maximum number of persistent links.  -1 means no limit.
ibase.max_persistent = -1

; Maximum number of links (persistent + non-persistent).  -1 means no limit.
ibase.max_links = -1

; Default database name for ibase_connect().
;ibase.default_db =

; Default username for ibase_connect().
;ibase.default_user =

; Default password for ibase_connect().
;ibase.default_password =

; Default charset for ibase_connect().
;ibase.default_charset =

; Default timestamp format.
ibase.timestampformat = "%Y-%m-%d %H:%M:%S"

; Default date format.
ibase.dateformat = "%Y-%m-%d"

; Default time format.
ibase.timeformat = "%H:%M:%S"

[MySQL]
; Allow accessing, from PHP's perspective, local files with LOAD DATA statements
; http://php.net/mysql.allow_local_infile
mysql.allow_local_infile = On

; Allow or prevent persistent links.
; http://php.net/mysql.allow-persistent
mysql.allow_persistent = On

; If mysqlnd is used: Number of cache slots for the internal result set cache
; http://php.net/mysql.cache_size
mysql.cache_size = 2000

; Maximum number of persistent links.  -1 means no limit.
; http://php.net/mysql.max-persistent
mysql.max_persistent = -1

; Maximum number of links (persistent + non-persistent).  -1 means no limit.
; http://php.net/mysql.max-links
mysql.max_links = -1

; Default port number for mysql_connect().  If unset, mysql_connect() will use
; the $MYSQL_TCP_PORT or the mysql-tcp entry in /etc/services or the
; compile-time value defined MYSQL_PORT (in that order).  Win32 will only look
; at MYSQL_PORT.
; http://php.net/mysql.default-port
mysql.default_port =

; Default socket name for local MySQL connects.  If empty, uses the built-in
; MySQL defaults.
; http://php.net/mysql.default-socket
mysql.default_socket =

; Default host for mysql_connect() (doesn't apply in safe mode).
; http://php.net/mysql.default-host
mysql.default_host =

; Default user for mysql_connect() (doesn't apply in safe mode).
; http://php.net/mysql.default-user
mysql.default_user =

; Default password for mysql_connect() (doesn't apply in safe mode).
; Note that this is generally a *bad* idea to store passwords in this file.
; *Any* user with PHP access can run 'echo get_cfg_var("mysql.default_password")
; and reveal this password!  And of course, any users with read access to this
; file will be able to reveal the password as well.
; http://php.net/mysql.default-password
mysql.default_password =

; Maximum time (in seconds) for connect timeout. -1 means no limit
; http://php.net/mysql.connect-timeout
mysql.connect_timeout = 60

; Trace mode. When trace_mode is active (=On), warnings for table/index scans and
; SQL-Errors will be displayed.
; http://php.net/mysql.trace-mode
mysql.trace_mode = Off

[MySQLi]

; Maximum number of persistent links.  -1 means no limit.
; http://php.net/mysqli.max-persistent
mysqli.max_persistent = -1

; Allow accessing, from PHP's perspective, local files with LOAD DATA statements
; http://php.net/mysqli.allow_local_infile
;mysqli.allow_local_infile = On

; Allow or prevent persistent links.
; http://php.net/mysqli.allow-persistent
mysqli.allow_persistent = On

; Maximum number of links.  -1 means no limit.
; http://php.net/mysqli.max-links
mysqli.max_links = -1

; If mysqlnd is used: Number of cache slots for the internal result set cache
; http://php.net/mysqli.cache_size
mysqli.cache_size = 2000

; Default port number for mysqli_connect().  If unset, mysqli_connect() will use
; the $MYSQL_TCP_PORT or the mysql-tcp entry in /etc/services or the
; compile-time value defined MYSQL_PORT (in that order).  Win32 will only look
; at MYSQL_PORT.
; http://php.net/mysqli.default-port
mysqli.default_port = 3306

; Default socket name for local MySQL connects.  If empty, uses the built-in
; MySQL defaults.
; http://php.net/mysqli.default-socket
mysqli.default_socket =

; Default host for mysql_connect() (doesn't apply in safe mode).
; http://php.net/mysqli.default-host
mysqli.default_host =

; Default user for mysql_connect() (doesn't apply in safe mode).
; http://php.net/mysqli.default-user
mysqli.default_user =

; Default password for mysqli_connect() (doesn't apply in safe mode).
; Note that this is generally a *bad* idea to store passwords in this file.
; *Any* user with PHP access can run 'echo get_cfg_var("mysqli.default_pw")
; and reveal this password!  And of course, any users with read access to this
; file will be able to reveal the password as well.
; http://php.net/mysqli.default-pw
mysqli.default_pw =

; Allow or prevent reconnect
mysqli.reconnect = Off

[mysqlnd]
; Enable / Disable collection of general statistics by mysqlnd which can be
; used to tune and monitor MySQL operations.
; http://php.net/mysqlnd.collect_statistics
mysqlnd.collect_statistics = On

; Enable / Disable collection of memory usage statistics by mysqlnd which can be
; used to tune and monitor MySQL operations.
; http://php.net/mysqlnd.collect_memory_statistics
mysqlnd.collect_memory_statistics = On

; Size of a pre-allocated buffer used when sending commands to MySQL in bytes.
; http://php.net/mysqlnd.net_cmd_buffer_size
;mysqlnd.net_cmd_buffer_size = 2048

; Size of a pre-allocated buffer used for reading data sent by the server in
; bytes.
; http://php.net/mysqlnd.net_read_buffer_size
;mysqlnd.net_read_buffer_size = 32768

[OCI8]

; Connection: Enables privileged connections using external
; credentials (OCI_SYSOPER, OCI_SYSDBA)
; http://php.net/oci8.privileged-connect
;oci8.privileged_connect = Off

; Connection: The maximum number of persistent OCI8 connections per
; process. Using -1 means no limit.
; http://php.net/oci8.max-persistent
;oci8.max_persistent = -1

; Connection: The maximum number of seconds a process is allowed to
; maintain an idle persistent connection. Using -1 means idle
; persistent connections will be maintained forever.
; http://php.net/oci8.persistent-timeout
;oci8.persistent_timeout = -1

; Connection: The number of seconds that must pass before issuing a
; ping during oci_pconnect() to check the connection validity. When
; set to 0, each oci_pconnect() will cause a ping. Using -1 disables
; pings completely.
; http://php.net/oci8.ping-interval
;oci8.ping_interval = 60

; Connection: Set this to a user chosen connection class to be used
; for all pooled server requests with Oracle 11g Database Resident
; Connection Pooling (DRCP).  To use DRCP, this value should be set to
; the same string for all web servers running the same application,
; the database pool must be configured, and the connection string must
; specify to use a pooled server.
;oci8.connection_class =

; High Availability: Using On lets PHP receive Fast Application
; Notification (FAN) events generated when a database node fails. The
; database must also be configured to post FAN events.
;oci8.events = Off

; Tuning: This option enables statement caching, and specifies how
; many statements to cache. Using 0 disables statement caching.
; http://php.net/oci8.statement-cache-size
;oci8.statement_cache_size = 20

; Tuning: Enables statement prefetching and sets the default number of
; rows that will be fetched automatically after statement execution.
; http://php.net/oci8.default-prefetch
;oci8.default_prefetch = 100

; Compatibility. Using On means oci_close() will not close
; oci_connect() and oci_new_connect() connections.
; http://php.net/oci8.old-oci-close-semantics
;oci8.old_oci_close_semantics = Off

[PostgreSQL]
; Allow or prevent persistent links.
; http://php.net/pgsql.allow-persistent
pgsql.allow_persistent = On

; Detect broken persistent links always with pg_pconnect().
; Auto reset feature requires a little overheads.
; http://php.net/pgsql.auto-reset-persistent
pgsql.auto_reset_persistent = Off

; Maximum number of persistent links.  -1 means no limit.
; http://php.net/pgsql.max-persistent
pgsql.max_persistent = -1

; Maximum number of links (persistent+non persistent).  -1 means no limit.
; http://php.net/pgsql.max-links
pgsql.max_links = -1

; Ignore PostgreSQL backends Notice message or not.
; Notice message logging require a little overheads.
; http://php.net/pgsql.ignore-notice
pgsql.ignore_notice = 0

; Log PostgreSQL backends Notice message or not.
; Unless pgsql.ignore_notice=0, module cannot log notice message.
; http://php.net/pgsql.log-notice
pgsql.log_notice = 0

[Sybase-CT]
; Allow or prevent persistent links.
; http://php.net/sybct.allow-persistent
sybct.allow_persistent = On

; Maximum number of persistent links.  -1 means no limit.
; http://php.net/sybct.max-persistent
sybct.max_persistent = -1

; Maximum number of links (persistent + non-persistent).  -1 means no limit.
; http://php.net/sybct.max-links
sybct.max_links = -1

; Minimum server message severity to display.
; http://php.net/sybct.min-server-severity
sybct.min_server_severity = 10

; Minimum client message severity to display.
; http://php.net/sybct.min-client-severity
sybct.min_client_severity = 10

; Set per-context timeout
; http://php.net/sybct.timeout
;sybct.timeout=

;sybct.packet_size

; The maximum time in seconds to wait for a connection attempt to succeed before returning failure.
; Default: one minute
;sybct.login_timeout=

; The name of the host you claim to be connecting from, for display by sp_who.
; Default: none
;sybct.hostname=

; Allows you to define how often deadlocks are to be retried. -1 means "forever".
; Default: 0
;sybct.deadlock_retry_count=

[bcmath]
; Number of decimal digits for all bcmath functions.
; http://php.net/bcmath.scale
bcmath.scale = 0

[browscap]
; http://php.net/browscap
;browscap = extra/browscap.ini

[Session]
; Handler used to store/retrieve data.
; http://php.net/session.save-handler
session.save_handler = files

; Argument passed to save_handler.  In the case of files, this is the path
; where data files are stored. Note: Windows users have to change this
; variable in order to use PHP's session functions.
;
; The path can be defined as:
;
;     session.save_path = "N;/path"
;
; where N is an integer.  Instead of storing all the session files in
; /path, what this will do is use subdirectories N-levels deep, and
; store the session data in those directories.  This is useful if you
; or your OS have problems with lots of files in one directory, and is
; a more efficient layout for servers that handle lots of sessions.
;
; NOTE 1: PHP will not create this directory structure automatically.
;         You can use the script in the ext/session dir for that purpose.
; NOTE 2: See the section on garbage collection below if you choose to
;         use subdirectories for session storage
;
; The file storage module creates files using mode 600 by default.
; You can change that by using
;
;     session.save_path = "N;MODE;/path"
;
; where MODE is the octal representation of the mode. Note that this
; does not overwrite the process's umask.
; http://php.net/session.save-path
;session.save_path = "/tmp"

; Whether to use cookies.
; http://php.net/session.use-cookies
session.use_cookies = 1

; http://php.net/session.cookie-secure
;session.cookie_secure =

; This option forces PHP to fetch and use a cookie for storing and maintaining
; the session id. We encourage this operation as it's very helpful in combating
; session hijacking when not specifying and managing your own session id. It is
; not the end all be all of session hijacking defense, but it's a good start.
; http://php.net/session.use-only-cookies
session.use_only_cookies = 1

; Name of the session (used as cookie name).
; http://php.net/session.name
session.name = PHPSESSID

; Initialize session on request startup.
; http://php.net/session.auto-start
session.auto_start = 0

; Lifetime in seconds of cookie or, if 0, until browser is restarted.
; http://php.net/session.cookie-lifetime
session.cookie_lifetime = 0 
```

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:01:48.067

> 请务必正确设置 extension_dir 指令。

确保`.dll`位于您的扩展文件夹中。然后，尝试定义`extension_dir`.

```
; Directory in which the loadable extensions (modules) reside.
; http://php.net/extension-dir
; extension_dir = "./"
; On windows:
; extension_dir = "ext" 
```

# java - Google 数据存储区查询返回陈旧数据

> ID：15123307
> 
> 赞同：2
> 
> 时间：2013-02-27T21:59:49.030
> 
> 标签：java, google-app-engine, google-cloud-datastore

我正在使用 Google App Engine，当我从数据存储中删除并再次列出结果时，我会恢复过时的数据。问题是什么？这是我使用的代码。

```
public void remove(long id) {
    EntityManager em = EMFService.get().createEntityManager();
    try {
      Todo todo = em.find(Todo.class, id);
      em.remove(todo);
    } finally {
      em.close();
    }
  }

  public List<Todo> getTodos(String userId) {
    EntityManager em = EMFService.get().createEntityManager();
    Query q = em
        .createQuery("select t from Todo t where t.author = :userId");
    q.setParameter("userId", userId);
    List<Todo> todos = q.getResultList();
    System.out.println("Listado de " + userId  + ": " + todos);
    return todos;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:16:37.367

AppEngine 使用“最终一致”的 HRD。

在此处阅读更多信息：[https ://developers.google.com/appengine/docs/java/datastore/structuring_for_strong_consistency](https://developers.google.com/appengine/docs/java/datastore/structuring_for_strong_consistency)

# entity-framework - Model.GetType().Name 附加了类似于 GUID 的内容

> ID：15123309
> 
> 赞同：2
> 
> 时间：2013-02-27T22:00:02.537
> 
> 标签：entity-framework, asp.net-mvc-4, ef-code-first, proxy-classes

我正在做一个代码优先的 ASP .NET MVC 项目。

在我看来，我正在接受实体。

```
@model MyProject.Model.MyEntity 
```

在视图中，我正在渲染一个局部视图，并传入模型。

```
@Html.Partial("_Edit", Model) 
```

在这个局部视图中，我将模型定义为一个对象。

```
@model object 
```

当我显示模型的类型时，我会看到附加的 GUID。

```
@{
    Type entityType = Model.GetType();
    string singularName = entityType.Name;
}

@{ ViewBag.Title = "Edit an existing " + singularName; } 
```

这是我在屏幕上看到的：

**编辑现有的 MyEntity_CB3FF0C41867D7757E4AF90F10EE2F7ED5B407EFCB96592EC3FB0A06DCAB902B**

`SubString()`任何人都知道为什么，除了在下划线上做 a 之外还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-24T18:23:21.750

这个问题根源于实体框架而不是 MVC x。

我遇到了同样的问题并打印出我的模型的完全限定名称（“SupportContactSecurity”）：

```
System.Data.Entity.DynamicProxies.SupportContactSecuri_4C68726A6CC129D0001F286F1E38612D8DEC28F26CA3D3884B53BCDF810D8E6A 
```

**DynamicProxies**是那里的关键字。实体框架（默认情况下）用这些代理替换您的实体，因此它可以在上下文级别进行更改跟踪（我认为）。如果要关闭此功能，请参阅[此 Stack Exchange 问题](https://stackoverflow.com/questions/5719787/programatically-enabling-disabling-entity-proxies)。

# java - Wicket 的对象序列化问题

> ID：15123319
> 
> 赞同：0
> 
> 时间：2013-02-27T22:00:55.850
> 
> 标签：java, wicket, wicket-1.5, wicket-1.6

我正在尝试将 searchService 传递给 Wicket 以供使用。当我在 searchService 没有最终版本的情况下运行它时，我没有遇到任何问题，但我必须将其设为最终版本才能在覆盖的 onSubmit 中使用它。

```
 final SearchService searchService = new SearchService();

    Form<?> form = new Form("searchForm") {
        public void onSubmit() {
            List<File> results = searchService.getSearchResults();
            info("Found: " + results.size());
        }
    }; 
```

如果我这样做，我会收到一个错误：

```
org.apache.wicket.core.util.objects.checker.CheckingObjectOutputStream$ObjectCheckException: The object type is not Serializable!
A problem occurred while checking object with type: test.service.SearchService
Field hierarchy is:
  2 [class=test.webui.HomePage, path=2]
    private java.lang.Object org.apache.wicket.MarkupContainer.children [class=[Ljava.lang.Object;]
      private java.lang.Object org.apache.wicket.MarkupContainer.children[1] [class=org.apache.wicket.markup.html.form.Form, path=2:searchForm]
        private final test.service.SearchService test.webui.HomePage$1.val$searchService [class=test.service.SearchService] <----- field that is causing the problem 
```

我是wicket的新手，所以我想知道是否有正确的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T23:50:21.473

是的。这是预期的行为。

Wicket 将序列化整个页面。事实上，整个页面流。

您看到的错误非常好，因为它可以帮助您使您的应用程序在复制的会话集群中工作。

要解决它，您有多种选择。在我的头顶上：

*   您可以在 onSubmit 表单中实例化 SearchService，而不是将其作为属性传递。
*   您可以使用某种依赖注入。Wicket 开箱即用地支持 Guice 和 Spring。但是没有什么能阻止您将注入器代理与其他依赖注入器一起使用。
*   您可以将 SearchService 存储在 Wicket 应用程序而不是页面上。wicket 应用程序是每个集群节点的不可序列化的单例，它在线程中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-12T16:16:13.963

您可以尝试实现`Serializable`您的`SearchService`类并声明一个变量`serialVersionUID`。

例如：

```
public class SearchService implements Serializable {
    private static final long serialVersionUID = -1769512858853931584L;
    //your code
} 
```

# html - 要计算 X 个 img，创建 n°X 个 div 并将 imgs 附加到创建的 div

> ID：15123327
> 
> 赞同：0
> 
> 时间：2013-02-27T22:01:32.963
> 
> 标签：html, image, each, counter

各位早上好，我的 div 和 imgs 有问题。

所以，例如，我已经将数量 X 的 imgs 放入一个 div（在本例中为 #content_project），现在我想创建数量 X（来自 imgs 的数量）的 div（在本例中为 #content），追加它一个一个（每个）之前调用的img，将所有这些创建的（#content）附加到#contenitore_project 中，最后从div #content_project 中删除旧的img。

所以，这是之前的代码：

```
<div id="content_project">
    <a><img src="#" /></a>
    <a><img src="#" /></a>
    <a><img src="#" /></a>
</div>

<div id="contenitore_project">
</div> 
```

我想用jquery做到这一点：

```
<div id="content_project">
</div>

<div id="contenitore_project">
    <div id="content"><img src="#" /></div>
    <div id="content"><img src="#" /></div>
    <div id="content"><img src="#" /></div>
</div> 
```

我希望你明白。

坦率

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:10:14.093

这是一个单行：

```
$('#content_project img').unwrap().wrap('<div class="content">').parent().appendTo('#contenitore_project'); 
```

*   `$('#content_project img')`选择您的图像标签。
*   `.unwrap()`摆脱他们的父`<a>`标签。
*   `.wrap()`用自己的`<div class="content">`元素包装每一个。
*   `.parent()`选择`<div>`，而不是`<img>`标签。
*   `.appendTo('#contenitore_project')`将它们全部移动到另一个元素。

**演示：http: [//jsfiddle.net/QyYeX/](http://jsfiddle.net/QyYeX/)**

# doctrine-orm - createNativeQuery - oci8 返回空数组

> ID：15123334
> 
> 赞同：0
> 
> 时间：2013-02-27T22:01:57.403
> 
> 标签：doctrine-orm, zend-framework-modules

在一个非常简单的实体上：

```
class Users {
/**
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 * @ORM\Column(type="integer")
 */
protected $userid;

/** @ORM\Column(type="string") */
protected $username;
}[...] 
```

在尝试进行本机查询时

```
 $rsm = new \Doctrine\ORM\Query\ResultSetMapping;
    $rsm->addEntityResult('Application\Entity\Users', 'u');
    $rsm->addFieldResult('u', 'test', 'username');
    $rsm->addFieldResult('u', 'userid', 'userid');
    $q = $objectManager->createNativeQuery('SELECT u.username as test, u.userid from users u where u.userid=17',$rsm);
    $result = $result->getResult(); 
```

$result 使用 oracle（oci8 驱动程序和 pdo）返回一个空数组。使用 MySQL，一切正常。Oracle和MySQL之间的数据库完全相同，相同的表，相同的列。

'users' 表不为空，因为在使用 DQL 时，它可以工作。在使用带有本机查询的 addRootEntityFromClassMetadata() 时也可以使用。

似乎只有 oci8+addEntityResult() 才会出现问题。

任何想法 ？

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:09:50.793

在手册中找到它。

ResultSetMapping#addFieldResult();

第一个参数是字段结果所属的实体结果的别名。第二个参数是 SQL 结果集中列的名称。请注意，此名称区分大小写，即，**如果您对 Oracle 使用本机查询，则它必须全部为大写**。第三个参数是实体结果上由 $alias 标识的字段的名称，该列的值应设置在该字段中。

```
$rsm->addFieldResult('u', 'TEST', 'username');
$rsm->addFieldResult('u', 'USERID', 'userid'); 
```

# jquery - 自定义设置日期 - jquery datepicker

> ID：15123337
> 
> 赞同：0
> 
> 时间：2013-02-27T22:02:11.667
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

使用像这里这样的日期选择器：http: [//jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)，我想知道如何自定义它，所以如果用户在文本框中输入数字 5，日期选择器会自动将日期设置为 Today + 5 . 所以，如果你想将日期设置为未来 30 天，你可以输入 30，日期选择器会设置正确的日期。

我希望这个功能是对现有功能的补充，而不是代替它。

有什么想法吗？

谢谢。

编辑：

这是我正在使用的日期选择器的示例。

```
<!doctype html>

<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Datepicker - Restrict date range</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>
$(function() {
$( "#datepicker" ).datepicker({ minDate: -20, maxDate: "+1M +10D" });
});
</script>
</head>
<body>

<p>Date: <input type="text" id="datepicker" /></p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T13:20:09.317

也许是这样的？（很快就完成了，你可能需要调整——不要100%依赖它）

```
textboxVal = $('#textboxID').val();
var date = new Date($textboxVal);

    function formatDate() {
        var month = date.getMonth() + 1 ;
        var day = date.getDate() + textboxVal;
        var year = date.getFullYear();
        month = month < 10 ? '0' + month : month;
        day = day < 10 ? '0' + day : day;
        var strDate = month + '/' + day + '/' + year;
        return strDate;
    } 
```

然后将 datepicker 中的值设置为 strDate。

# angularjs - Angular js控制器中的关键字“this”

> ID：15123338
> 
> 赞同：2
> 
> 时间：2013-02-27T22:02:13.010
> 
> 标签：angularjs

从这个 URL [https://github.com/angular/angular-seed/blob/master/app/js/app.js](https://github.com/angular/angular-seed/blob/master/app/js/app.js)，我得到了一个如下所示的控制器。

```
function WineListCtrl(Wine) {
    this.wines = Wine.query();
} 
```

到目前为止，我在 Angular 中所做的是定义一个注入 $scope 的控制器。所以我尝试了，将上面的控制器更改为

```
function WineListCtrl(Wine, $scope) {
    console.log($scope, this)
    this.wines = Wine.query();
} 
```

但这给出了一个错误 Error: Unknown provider for `'$scope'`.

我在这里有三个问题：

1.  为什么`$scope`不注入控制器的。
2.  里面`this`的`WineListCtrl`意思是`$scope`。
3.  Angular 中的大多数错误都属于“XXXX 的未知提供者”格式。如果萤火虫这么说，我应该寻找什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:12:19.083

1.  在以这种形式编写控制器时，您应该向它们注入如下依赖项：

    `function WineListCtrl(Wine, $scope) { console.log($scope, this) this.wines = Wine.query(); } WineListCtrl.$inject = ['Wine', '$scope'];`

2.  `this`不一样`$scope`。$scope 是[一个特定于角度的对象](http://docs.angularjs.org/api/ng.$rootScope.Scope#$new)，使用`$rootScope.$new()`

3.  见#1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T23:28:11.700

1.  您正在使用“推断的依赖项”（请参阅[​​ DI 页面](http://docs.angularjs.org/guide/di)），它应该可以正常工作，除非您缩小或混淆您的 JavaScript。

2.  请参阅[我](https://stackoverflow.com/a/14168699/215945)对这个问题的回答：[AngularJS 控制器中的'this' vs $scope](https://stackoverflow.com/questions/11605917/this-vs-scope-in-angularjs-controllers)

3.  `ng-app`当您忘记在某处使用，或者您忘记使用适当的模块初始化您的应用程序时，通常会发生“未知提供者”错误：

    *   [Angular js未知提供者](https://stackoverflow.com/questions/12339272/angular-js-unknown-provider)
    *   [AngularJS linky 过滤器抛出“未知提供者”错误](https://stackoverflow.com/questions/10921362/angularjs-linky-filter-throws-an-unknown-provider-error)

# qt - QImage 加载某些图像的方向错误

> ID：15123340
> 
> 赞同：3
> 
> 时间：2013-02-27T22:02:29.797
> 
> 标签：qt

我正在从如下所示的图像文件中实例化 QImage，然后在 QWidget 上渲染它。

```
QImage ( const QString & fileName, const char * format = 0 ) 
```

对于大多数图像，一切正常。但是对于一些图像，QImage 会加载 90 度旋转的图像。

似乎这只发生在我之前在手机上以纵向模式拍摄的照片上。风景拍的都不错

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:10:23.413

您可能需要使用 libexif 之类的库来确定照片方向，然后相应地旋转 QImage

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-11-06T21:10:26.823

使用 C++ Qt 类 QImageReader：

```
QImageReader imgReader( imagePath );
imgReader.setAutoTransform( true );
QImage img = imgReader.read(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T22:11:05.630

[https://discussions.apple.com/thread/2541504?start=0&tstart=0](https://discussions.apple.com/thread/2541504?start=0&tstart=0)

听起来这是一个很常见的问题，在图像上添加了一些标志或标签，说明如何旋转它，而不是实际重新排序图像中的像素。对于您尝试渲染的图像，您可以使用您尝试使用的格式，看看是否有任何额外的标志可以检查并让 Qt 进行旋转。

听起来 cppguy 知道有一个库可以让您检查这些标志。

编辑找到了更好的描述：

> johninsj - 回复：iPhone 4 照片和视频在电子邮件中横向旋转
> 
> 2010 年 11 月 2 日下午 1:45（响应 VibrantRedGT）
> 
> 当您拍摄照片时，Apple 会设置 jpeg 元标记以进行定向，因此如果您将 iphone 倒置或侧放等，图像（由于相机倒置/侧置而被倒置或侧向拍摄）知道它当您查看图像时需要翻转/旋转图像。
> 
> 并非所有软件都支持旋转设置。Gimp（它可以在所有东西上运行，并且是免费的）可以。
> 
> 您可以旋转图像并保存它们，或者学习使用 iPhone 以正确的方向拍摄未旋转图像的照片。当您查看屏幕时，这将是右侧的主页按钮。

希望有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-11-03T22:31:27.880

从 Qt 5.5 开始设置**Image.autoTransform : true**因为默认为 false！

[QT Image QML 类型参考](https://doc.qt.io/qt-5/qml-qtquick-image.html#autoTransform-prop)

# mysql - Mysql为所有日期字段添加默认值

> ID：15123342
> 
> 赞同：-2
> 
> 时间：2013-02-27T22:02:30.280
> 
> 标签：mysql, alter

我必须更改数据库中所有日期字段的默认值。你知道如何快速做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:26:49.747

尝试这样的事情：

```
SELECT
    CONCAT('ALTER TABLE `', TABLES.TABLE_NAME, '` ALTER COLUMN `', COLUMNS.COLUMN_NAME, '` SET DEFAULT ''2013-02-27'';')

    INTO OUTFILE 'C:\\queries.sql'

    FROM TABLES
        INNER JOIN COLUMNS
            ON COLUMNS.TABLE_SCHEMA = TABLES.TABLE_SCHEMA
            AND COLUMNS.TABLE_NAME = TABLES.TABLE_NAME

    WHERE
        TABLES.TABLE_TYPE = 'BASE TABLE' 
        AND TABLES.table_schema = 'your_database'
        AND data_type = 'date'; 
```

你必须适应

*   输出文件的路径（这里是 Windows 服务器上的 C:/queries.sql...）
*   您的数据库名称
*   显然是您将设置的默认值（此处为 2013-02-27）。

然后，您必须在目标数据库上运行输出脚本。

# sql - JOIN 到子查询的 Oracle 语法错误

> ID：15123351
> 
> 赞同：0
> 
> 时间：2013-02-27T22:03:02.107
> 
> 标签：sql, join, oracle11g, subquery

以下代码已经是一个简化的示例，但仍会产生语法错误：

`ORA-00904: "R"."READING_TIME": invalid identifier`

```
SELECT r.user_id, rm.reading_time start_time, r.reading_time end_time
FROM Readings r 
INNER JOIN  (
      SELECT r2.user_id, r2.reading_time, r2.x, r2.y
      FROM Readings r2
      WHERE r2.user_id=r.user_id and 
            r2.reading_time < r.reading_time
      ) rm   
ON r.user_id=rm.user_id; 
```

为什么内部查询与外部查询的别名有问题？

链接到我的小提琴：[http ://sqlfiddle.com/#!4/0d4b5/21](http://sqlfiddle.com/#!4/0d4b5/21)

`UPDATE:` 我通过执行自连接并将相关查询移至**ON**子句解决了这个问题。

更新了整个脚本的小提琴：[http ://sqlfiddle.com/#!4/39032/10](http://sqlfiddle.com/#!4/39032/10)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:11:23.120

“rm”内联视图无法访问外部查询列，因此`r.user_id`不能`r.reading_time`在内部查询中引用。你必须在外面过滤：

```
SELECT r.user_id, rm.reading_time start_time, r.reading_time end_time
FROM Readings r 
INNER JOIN  (
      SELECT r2.user_id, r2.reading_time, r2.x, r2.y
      FROM Readings r2
      ) rm   
ON rm.user_id=r.user_id 
AND rm.reading_time < r.reading_time; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:07:33.013

您不能从 JOIN 的一个部分引用另一部分。

你在找这个吗？

```
SELECT r.user_id, r2.reading_time start_time, r.reading_time end_time
FROM Readings r 
INNER JOIN Readings r2 
ON r.user_id=r2.user_id
   AND r2.reading_time < r.reading_time; 
```

**[SQL 小提琴](http://sqlfiddle.com/#!4/0d4b5/24)**

# javascript - javascript变量上的jquery选择器

> ID：15123354
> 
> 赞同：0
> 
> 时间：2013-02-27T22:03:08.263
> 
> 标签：javascript, jquery, addclass

嘿伙计们，我在实现一些 jQuery 代码时遇到了麻烦。我有一个 javascript 函数，它存储从 (a td) 调用该函数的元素，然后选择它的父节点并更改该父节点的类 (a tr)。我想将其更改为 jQuery，以便我可以利用 .addClass 工具。这是代码

```
 function draftHandler(teamID, element, from, name, pos)
{
     if(...something...) 
          element.parentNode.className = "drafted";
} 
```

我一直在尝试类似...

```
element.closest('tr').addClass('drafted'); 
```

...没有任何运气。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:04:58.480

```
$(element).closest('tr').addClass('drafted'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:04:59.743

尝试：

```
 $(element).parent().addClass('drafted'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:05:06.550

```
$('td').parent('tr').addClass('drafted'). 
```

您可以替换`$('td')`为元素。

唯一增加的`parent('tr')`安全性是确保您确实将类添加到父 tr 元素。如果您的第一个父母`td`实际上是`tr`.

# android - 使用 Android NDK 输入混淆信息

> ID：15123358
> 
> 赞同：0
> 
> 时间：2013-02-27T22:03:23.993
> 
> 标签：android, android-ndk, native-activity

在使用 NDK 和 NativeActivity 进行黑客攻击时，我无法获得有关触摸输入的有用信息——我只是获得了标志的模糊信息。

这是相关代码的片段（从示例中的 plasma.c 编辑）：

```
static int32_t engine_handle_input(struct android_app* app, AInputEvent* event) {
    struct engine* engine = (struct engine*)app->userData;
    LOGI("Event: action=%d\nkeyCode=%d\nmetaState=0x%x\nAction=0x%x\nx=%d\ny=%d"
        "\nflags=0x%x\nxprec=%d\nyprec=%d\nxoff=%d\nyoff=%d\nguessX=%d\n\n",
                AKeyEvent_getAction(event),
                AKeyEvent_getKeyCode(event),
                AKeyEvent_getMetaState(event),
                AMotionEvent_getAction(event),
                AMotionEvent_getX(event,0),
                AMotionEvent_getY(event,0),
                AMotionEvent_getFlags(event),
                AMotionEvent_getXPrecision(event),
                AMotionEvent_getYPrecision(event),
                AMotionEvent_getXOffset(event),
                AMotionEvent_getYOffset(event))

    return 0;
} 
```

这是我在触摸屏幕时得到的那种日志输出：

```
I/libplasma(24786): Event: action=1
I/libplasma(24786): keyCode=0
I/libplasma(24786): metaState=0x0
I/libplasma(24786): Action=0x1
I/libplasma(24786): x=1074838969
I/libplasma(24786): y=1073741824
I/libplasma(24786): flags=0x408cf365
I/libplasma(24786): xprec=-2147483648
I/libplasma(24786): yprec=1081822550
I/libplasma(24786): xoff=0
I/libplasma(24786): yoff=1074839057
I/libplasma(24786): 
```

我不确定我应该如何从这个垃圾中提取有用的信息，而且我找不到关于 NDK NativeActivity 输入的单个教程。这里有 NDK 大师吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T23:36:14.840

傻我。他们都回来了`floats`。

```
AMotionEvent_getX(event,0)
AMotionEvent_getY(event,0)
AMotionEvent_getFlags(event)
AMotionEvent_getXPrecision(event)
AMotionEvent_getYPrecision(event)
AMotionEvent_getXOffset(event)
AMotionEvent_getYOffset(event) 
```

如果我将它们用作浮点数`%f`，这是我的输出：

```
I/libplasma(29039): Event: action=1
I/libplasma(29039): keyCode=0
I/libplasma(29039): metaState=0x0
I/libplasma(29039): Action=0x1
I/libplasma(29039): x=1513.833618
I/libplasma(29039): y=697.899841
I/libplasma(29039): flags=0x0
I/libplasma(29039): xprec=1.533854
I/libplasma(29039): yprec=1.547500
I/libplasma(29039): xoff=0.000000
I/libplasma(29039): yoff=0.000000 
```

如果将来有人遇到此问题，请确保打开源文件`android/input.h`以获取有关每个功能的信息。默认情况下，这将位于`<NDK-Install-Path>/platforms/<ndk-platform>/arch-arm/usr/include/android/input.h`。

# javascript - Ext JS 选项卡面板不适合窗口大小

> ID：15123360
> 
> 赞同：0
> 
> 时间：2013-02-27T22:03:30.763
> 
> 标签：javascript, dynamic, extjs, panel, tabpanel

有人希望在 Ext JS 中完成一个面板来动态适应窗口大小。我不熟悉 Ext，但经过数小时的搜索，我还没有找到可行的解决方案。以下是预计将被修复的代码：

```
var histotab = Ext.createWidget('tabpanel', { 
         activeTab: 0,
     width : 2000,
     height : "50%",
     defaults :{
         bodyPadding: 10
     },
    items: [
        {
           id: 'chartCmp',
           title: 'By Year',
           xtype: 'chart',
           style: 'background:#fff',
           layout:'fit',
           animate: true,
       shadow: true,
           store:SOD.storeHistogram,
           axes: [{
        type: 'Numeric',
        position: 'left',
        fields: ['countoffiles'],
        label: {
            font: '8px Arial'
        }, 
```

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:51:13.353

使用具有合适布局的 Ext.container.Viewport 类。视口始终将自身调整为文档视图大小。

```
Ext.widget('viewport', {
    layout: 'fit',
    items: {
        xtype: 'tabpanel',
        items: [{
            title: 'Foo',
            html: 'First tab'
        }]
    }
}); 
```

# mysql - mysql not null & 允许 null 差异

> ID：15123367
> 
> 赞同：1
> 
> 时间：2013-02-27T22:03:41.480
> 
> 标签：mysql, null

我是一个mysql初学者，也许这是一个愚蠢的问题，所以不要笑我:)我目前正在看一本书，对以下句子感到困惑：

> NOT NULL 表示表中的所有行在属性中都必须有值，如果不指定，该字段可以为空（NULL）

因此，即使您将列设置为不为空，您也不必为其指定值？然后它变成空白（空）？那么 not null 和 allow null 有什么区别呢？书错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T22:05:22.850

“如果未指定”是指“NOT NULL” - 不是值。所以它会更清楚：

> NOT NULL 表示表中的所有行都必须在属性中具有值。如果未指定 NOT NULL，则该字段可以为空（NULL）

# css - 列表布局 CSS

> ID：15123368
> 
> 赞同：2
> 
> 时间：2013-02-27T22:03:42.607
> 
> 标签：css

我想显示这样的列表：

![在此处输入图像描述](../Images/8b07a72a642c7fdc77c10415f6c831df.png)

但是我的 CSS 知识不是很好，我遇到了一些问题，比如：

![在此处输入图像描述](../Images/28fc652b3e09b833b17a559c46d0d8ea.png)

我认为它与浮动和类似的有关。尝试了几件事，但没有奏效。这是列表的 HTML：

```
<ul id="list">
    <li>
        <img class="itemImg" src="images/foo.jpg" width="230px" height="230px">
        <span class="title">Title title title title</span>
        <a class="rightImage" href="#">
            <img src="images/info_btn.png" width="120px" height="120px">
        </a>
        <span class="textBottom">textBottom textBottom textBottom textBottom </span>
    </li> 
```

和CSS：

```
#list {
    list-style: none;
    margin: 0px;
    padding: 0px;
    font-size: 40px;
}

#list li {
    margin-bottom: 20px;
    padding: 10px;
    -moz-border-radius: 8px;-webkit-border-radius: 8px;border-radius: 8px;
}

.itemImg {
    -moz-border-radius: 8px;-webkit-border-radius: 8px;border-radius: 8px;
    margin-right: 10px;
}

.rightImage {
    float: right;
    margin-bottom: 20px;
    margin-top:20px;
}
/*  vertical-align: center; */

.title {
    vertical-align: top;
    font-size: 2em;
    font-weight: bold;
    background-color:#00ff00;
}

.textBottom {
    float: right;
    margin-top: 200px;
    background-color:#ff0000;
} 
```

任何方向都非常感谢......谢谢。

**编辑：**我还希望“文本文本文本文本”行相对于父级的右下角对齐 - 而不是“Img2”。但我读过这种对齐方式在 CSS 中是不可能的。你怎么处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:13:41.620

你也需要那里的div，我会摆脱跨度。确保设置浮动和宽度。不要忘记清除你的花车。这是一个粗略的编辑，只是为了传达 div 和 float 的想法。

```
<li>
    <img class="itemImg" src="images/foo.jpg" width="230px" height="230px">
    <div class="leftcontainer"><div class="lefttop"><div class="title">Title title title title</div>
    <a class="rightImage" href="#">
        <img src="images/info_btn.png" width="120px" height="120px">
    </a></div>
    <div class="textBottom">textBottom textBottom textBottom textBottom </div></div>
</li> 
```

然后添加css

```
 #list {
        list-style: none;
        margin: 0px;
        padding: 0px;
        font-size: 40px;
    }

    #list li {
        margin-bottom: 20px;
        padding: 10px;
        -moz-border-radius: 8px;-webkit-border-radius: 8px;border-radius: 8px;
    }
    #list li:after{clear:both}
    .itemImg {
        -moz-border-radius: 8px;-webkit-border-radius: 8px;border-radius: 8px;
        margin-right: 10px;
float:left;
width:50px;
    }

    .leftcontainer{float:right,width:200px}//some width

    .rightImage {
        float: right;
        margin-bottom: 20px;
        margin-top:20px;
width:50px;
    }
    /*  vertical-align: center; */

    .title {
        vertical-align: top;
        font-size: 2em;
        font-weight: bold;
        background-color:#00ff00;
float:left;
width:170px
    }

    .textBottom {
        float: right;
        margin-top: 200px;
        background-color:#ff0000;
width:160px;//some width
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:47:00.510

我终于得到了非常接近我正在寻找的东西。有一些小问题，例如，底部文本仅在左图下方开始 - 不在同一行（即使它更短），也没有锚定在右下角。相反，它在正确的图像下方。但它看起来像我想要的。这是html：

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
    <ul id="list">
        <li>
            <img class="itemImg" src="http://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/Citrus_%C3%97_aurantium_-_fruits_cut.jpg/800px-Citrus_%C3%97_aurantium_-_fruits_cut.jpg" width="230px" height="230px">

            <span class="title">Title title title title title</span>

            <a class="rightImage" href="#">
                <img src="http://jungschirüti.ch/wordpress/wp-content/uploads/2011/02/info.png" width="120px" height="120px">
            </a>
            <div style="clear:both"></div>
            <span class="textBottom">Text Text Text Text Text </span>

            <div style="clear:both"></div>
        </li>

    </ul>
</body>
</html> 
```

和CSS：

```
#list {
    list-style: none;
    margin: 0px;
    padding: 0px;
    font-size: 40px;
}

#list li {
    margin-bottom: 20px;
    padding: 10px;
    -moz-border-radius: 8px;-webkit-border-radius: 8px;border-radius: 8px;
  background-color: #aaaaff;
}

.itemImg {
    -moz-border-radius: 8px;-webkit-border-radius: 8px;border-radius: 8px;
    margin-right: 10px;
  float:left;
}

.rightImage {

  float: right;
    margin-bottom: 20px;
    margin-top:20px;
  display:block;

}
/*  vertical-align: center; */

.title {
    font-size: 2em;
    font-weight: bold;
    background-color:#00ff00;
    width:350px;
    display:block;
  float:left;
}

.textBottom {
    float: right;

    background-color:#ff0000;
  width:500px;
} 
```

# ios - UIWebView 关闭视频清除 iOS 6.1 中的内容

> ID：15123369
> 
> 赞同：0
> 
> 时间：2013-02-27T22:03:41.973
> 
> 标签：ios, objective-c, ios6, uiwebview, ios6.1

我正在使用 UIWebView 显示嵌入视频（Youtube 和 Vimeo iFrames）的内容。模态视频播放器最初开箱即用的效果很好。我更新到 iOS 6.1 SDK，现在当我关闭视频播放器时，UIWebView 已被清除并且不会重新呈现内容。关于我需要更改以使其在 iOS 6.1 中正常工作的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:38:19.680

我最终重置了 viewWillAppear 中的内容（在视频关闭后被调用）并正确呈现。

```
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self.webView loadHTMLString:self.html baseURL:self.url];
} 
```

# android - 在 android 上导航主菜单的最佳方式

> ID：15123371
> 
> 赞同：0
> 
> 时间：2013-02-27T22:03:51.803
> 
> 标签：android, android-activity, menu

所以现在我的主要活动有几个按钮（一个是“关于”）。我处理更改屏幕以显示有关信息的方式是添加一个 onClickListener：

```
Intent myIntent = new Intent(v.getContext(), About.class);
startActivityForResult(myIntent, 0); 
```

About.java 然后将内容视图设置为包含后退按钮的不同布局。后退按钮的处理方式与所描述的相同，并返回到主要活动。

不过我注意到的是，当我运行应用程序并单击“关于”，然后单击“返回”时，它将运行 2 个主要活动和 1 个关于活动。那么有没有更好的方法来处理这样的菜单，或者我可以在 Intent 代码中添加一些内容以使其在继续下一个之前关闭当前活动？

编辑：哦，哇，谢谢家伙，我什至没有想到这一点。我现在有点睡眠不足。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:08:25.563

您不应该启动一项新活动来返回之前的活动。`finish();`当您单击后退按钮返回到 backstack 上的上一个活动时，您只需调用您的 about 活动。

或者，您可以按照“Android 方式”进行操作，而不是放入后退按钮，不用担心调用`finish()`，只允许用户按下手机上的后退按钮（所有 Android 手机都有）返回到上一个活动.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:10:08.320

您可以调用`finish()`，`MainActivity`然后`MainActivity`从类`Intent`内部创建一个新的`About`。但一个更好的方法可能是不是`finish()`你的`MainActivity`，只是`finish()`你的关于类。这将带您进入您`MainActivity`已经运行过的上一个。此外，如果您愿意，这将允许您`About`从其他活动中调用并返回到您调用它的任何位置

# mod-rewrite - mod_rewrite 破坏 http 基本身份验证

> ID：15123381
> 
> 赞同：1
> 
> 时间：2013-02-27T22:04:59.967
> 
> 标签：mod-rewrite, basic-authentication

在像我希望的那样使用 GIT 成功进行重写后，我设法打破了推送到 git 所需的身份验证。

`ScriptAlias`出于某种原因，如果请求的话，似乎重写了身份验证信息，`http://username:password@domain.tld/`这使得无法推送数据。

```
<VirtualHost *:80>
DocumentRoot /home/subgit/repos

    <Directory /home/subgit/repos>
        Options       None
        AllowOverride none
        Order         allow,deny
        Allow         from all
    </Directory>

CustomLog /home/subgit/logs/access_log combined
SuexecUserGroup subgit subgit

RewriteEngine On
RewriteCond %{HTTP_USER_AGENT} ^git
RewriteRule ^(.*)$ /git/testrepo/$1 [PT]

RewriteCond %{QUERY_STRING} service=git-receive-pack [OR,NC]
RewriteCond %{REQUEST_URI} ^/git/.*/git-receive-pack$ [NC]
RewriteRule .* - [E=AUTHREQUIRED:yes]

ScriptAlias /git/ /home/subgit/bin/gitolite-suexec-wrapper.sh/

 <LocationMatch "/git/">
    Order Allow,Deny
    Deny from env=AUTHREQUIRED
    Allow from all
    Satisfy Any
    AuthType Basic
    AuthName "subgit"
    AuthBasicProvider file
    AuthUserFile /home/subgit/etc/subgit
    Require valid-user
  </LocationMatch>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:56:22.613

由于 [PT] 还需要 [L] 没有执行任何低于它的规则，移动上面的 AUTHREQUIRED 规则解决了这个问题。

# visual-studio-2010 - VS2012 会自动安装 .NET 4.5 吗？我应该使用 VS2012 还是 VS2010

> ID：15123385
> 
> 赞同：1
> 
> 时间：2013-02-27T22:05:10.307
> 
> 标签：visual-studio-2010, c#-4.0, .net-4.0, visual-studio-2012, .net-4.5

首先，老实说，我对 Windows 8 一无所知。（操作系统功能、Windows 应用商店甚至 Windows 8 Phone 的开发）。

其次，我确实安装了 VS2010 和 .NET 4.0，并且在过去 2 年中一直在使用它。

现在，我的问题是，

1.  我应该安装 VS2012 吗？（为什么我提出这个问题是因为，我不知道它的特点，也有人说有很多新事物的复杂性）

2.  我已经下载了VS2012。但是，如果我安装，它会自动安装 .NET 4.5 吗？我也担心，.NET 4.5 有一些错误，因为我发现 .NET 4.5 是包括 CLR 在内的 4.0 库的替代品，我在进一步开发中会遇到问题吗？

3.  如果我安装 VS2012，我已经存在的 VS 2010 和 4.0 会发生什么？我将无法使用 VS2010 为 .NET 4.0（或其次是 3.5 应用程序）开发应用程序，因为库将被替换为 4.5 吗？

4.  与 .NET4.5/VS2012 关联的 C# 版本是什么。是 C#4.0 吗？或 4.5 或 5.0 ？

如果有人可以帮助我，我很感激，让我单独理解我的上述问题，因为我是新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:13:01.613

1.  也许。
    它具有更简洁的 UI、更好的 Javascript 体验和语言级别的异步支持

2.  是的; VS 2012 基于.Net 4.5

3.  所有 .Net 4.0 应用程序都将使用 .Net 4.5 BCL。
    兼容性问题不是很多

4.  C# 5.0。
    与 .Net 不同，C# 从来没有非整数版本号。

# java - 在 Heroku 上扩展 SpringWebFlow 应用程序的问题

> ID：15123386
> 
> 赞同：1
> 
> 时间：2013-02-27T22:05:18.620
> 
> 标签：java, spring, heroku, primefaces, spring-webflow

所以这是我的问题。我正在 Heroku 云上开发基于 SpringWebFlow 的应用程序，但我似乎遗漏了一些东西。

该应用程序在单个测功机上运行良好，但是当我将其放大以使用多个测功机时，它会停止工作（正常）。我认为这与我的代码有关，但后来我部署了一个示例[SpringWebFlow 应用程序](http://webflowprimefaces.herokuapp.com/ "SpringWebFlow 应用程序")（可以在这里找到：[https](https://src.springframework.org/svn/spring-samples/webflow-primefaces-showcase) ://src.springframework.org/svn/spring-samples/webflow-primefaces-showcase ）来检查是否问题会表现出来，它确实会表现出来。很难描述，但总的来说流程似乎出现故障，即您必须多次单击某些按钮才能使它们执行预期的操作，有时页面会自行刷新等。好像请求/会话处理。一旦我回到使用单个测功机，一切都会立即运行良好。

由于我是 Spring 和 Heroku 的新手，在升级到多个 dyno 时我应该记住并注意什么？如果是这样，如何使这个示例应用程序很好地扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:55:22.900

我似乎已经解决了我自己的问题。这是会话管理问题。Memcached 插件解决了它。

# c# - 为什么 Newtonsoft.JSON 在每个元素的每个属性中都放置一个“$”符号？

> ID：15123387
> 
> 赞同：3
> 
> 时间：2013-02-27T22:05:19.703
> 
> 标签：c#, .net, asp.net-mvc-4, json.net

我已经使用King 的**JSON**很长时间了，我刚刚注意到，他为每个元素添加了一个**属性名称**：

```
{ "$id": "1", "BackGroundColor": "#FFFFFF", "PageTitleFontColor": "#9C0912", "TitleDescriptionFontColor": "#715135", "TextTitleFontColor": "#715135", "ContentFontColor": "#646464", "VisiblePages": { "$id": "2", "$values": [ "About", "Gallery", "PriceList" ] } } 
```

这就是我的设置方式：

```
JsonSerializerSettings jSettings = new JsonSerializerSettings
{
   PreserveReferencesHandling = PreserveReferencesHandling.All,
   Formatting = Formatting.Indented,
   DateTimeZoneHandling = DateTimeZoneHandling.Utc,
   ReferenceLoopHandling = ReferenceLoopHandling.Ignore,
};

jSettings.Converters.Add(new Newtonsoft.Json.Converters.StringEnumConverter());
GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings = jSettings;

config.Formatters.JsonFormatter.SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/html")); 
```

模型示例：

```
public class SettingsApiModel
{
    public virtual string BackGroundColor { get; set; }
    public virtual string PageTitleFontColor { get; set; }
    public virtual string TitleDescriptionFontColor { get; set; }
    public virtual string TextTitleFontColor { get; set; }
    public virtual string ContentFontColor { get; set; }
    public virtual IList<string> VisiblePages { get; set; } 
} 
```

我实际上不喜欢每个属性上的“$”。我怎样才能删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T06:33:02.150

您需要更改`PreserveReferencesHandling`您在对象中使用的`jSettings`属性。您可以根本不设置它，也可以将其设置为`PreserveReferencesHandling.Objects`.

无`PreserveReferencesHandling`设置：

```
{
    "BackGroundColor": "#FFFFFF",
    "PageTitleFontColor": "#9C0912",
    "TitleDescriptionFontColor": "#715135",
    "TextTitleFontColor": "#715135",
    "ContentFontColor": "#646464",
    "VisiblePages": [
        "About",
        "Gallery",
        "PriceList"
    ]
} 
```

`PreserveReferencesHandling = PreserveReferencesHandling.Objects`

```
{
    "$id": "1",
    "BackGroundColor": "#FFFFFF",
    "PageTitleFontColor": "#9C0912",
    "TitleDescriptionFontColor": "#715135",
    "TextTitleFontColor": "#715135",
    "ContentFontColor": "#646464",
    "VisiblePages": [
        "About",
        "Gallery",
        "PriceList"
    ]
} 
```

# spring - 使用 Spring 与 JNDI 查找配置 ActiveMQ

> ID：15123391
> 
> 赞同：2
> 
> 时间：2013-02-27T22:05:26.990
> 
> 标签：spring, activemq

伙计们-我有一个 Spring 3.1、ActiveMQ 5.8 和 Tomcat7 设置。

在 Spring 中配置工厂和队列与 JNDI 查找相比有什么优势吗？

```
<amq:connectionFactory id="connectionFactory" brokerURL="tcp://localhost:61616"/>
<amq:queue id="queueOne" physicalName="TestQueueOne"/>
<amq:queue id="queueTwo" physicalName="TestQueueTwo"/>

<bean id="jmsTemplate" class="org.springframework.jms.core.JmsTemplate">
    <property name="connectionFactory" ref="connectionFactory" />
</bean> 
```

META-INF/context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<Context>   
<Resource 
    name="jms/ConnectionFactory" 
    auth="Container"
    type="org.apache.activemq.ActiveMQConnectionFactory" 
    description="JMS Connection Factory"
    factory="org.apache.activemq.jndi.JNDIReferenceFactory" 
    brokerURL="tcp://localhost:61616" />

<Resource 
    name="jms/QueueOne" 
    auth="Container"
    type="org.apache.activemq.command.ActiveMQQueue" 
    factory="org.apache.activemq.jndi.JNDIReferenceFactory"
    physicalName="TestQueueOne" />

<Resource 
    name="jms/QueueTwo" 
    auth="Container"
    type="org.apache.activemq.command.ActiveMQQueue" 
    factory="org.apache.activemq.jndi.JNDIReferenceFactory"
    physicalName="TestQueueTwo" />
</Context> 
```

我想知道一种方法是否比另一种“更好”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:00:17.277

根据您当前使用 Tomcat 的设置，也许 Spring 配置是要走的路。如果您要转而使用成熟的应用程序服务器，例如 JBoss，那么 JNDI 可能会更好，因为您可以使用集群的 JNDI 来实现应用程序服务器提供的高可用性：

[http://docs.jboss.org/jbossclustering/cluster_guide/5.1/html/clustering-jndi.html](http://docs.jboss.org/jbossclustering/cluster_guide/5.1/html/clustering-jndi.html)

# javascript - 如何通过它们的 id 传递参数？

> ID：15123393
> 
> 赞同：0
> 
> 时间：2013-02-27T22:05:30.397
> 
> 标签：javascript, html, parameters

这可能是一个愚蠢的问题，因为我在任何地方都没有找到关于我的具体问题的任何信息，这是我的第一个 javascript/html 项目。

我想通过与它们相关联的 id（book1 和 price1）传递一本书的名称及其价格。我的想法是这样，如果稍后名称或价格发生变化，函数“addToCart(book1,price1)”将自动传入更新后的名称/价格。是否可以在 javascript/html5 中以这种方式将字符串传递给函数？

以下是部分代码：

```
<td>
    <span class="bookName" id="book1">
        <b>Artificial Intelligence: Modern Approach</b>
    </span> <br>
    <b>PRICE: $</b> 
    <span id="price1"> 158.55 </span> 
    <button type="button" onclick="addToCart(book1, price1)">Add to cart!</button>
</td> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:08:10.613

HTML

```
<button type="button" onclick="addToCart('book1', 'price1')">Add to cart!</button> 
```

JS

```
function addToCart(productId, priceId) {
    // ...
} 
```

关于您的代码的其他一些注释：

*   使用`<br />`代替`<br>`，否则它不是有效的 HTML
*   理想情况下使用`<label>`标签，这使其更易于访问

例如

```
<label for="price1">PRICE:</label>
<span>$</span>
<span id="price1">158.55</span> 
```

*   通常最好将事件挂接到单独的 JavaScript 文件（或`<script>`标记）而不是 HTML 属性中。这为您的功能和标记/UI 提供了更清晰的分离

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:08:36.813

假设您使用的是 jquery：

```
onClick="addToCart($(this).siblings('.bookName').text(), $(this).siblings('.price').text())" 
```

`<span class="price">158.55</span>`这将要求您在价格跨度 ( )上放置一个类。

请记住... DOM 中的每个元素都“知道”它在哪里，您可以轻松地向上/向下导航此树以查找附近的相关元素。

# geronimo - 使用 Cargo 或 geronimo-maven-plugin 将 Web 应用程序远程部署到 Geronimo？

> ID：15123396
> 
> 赞同：2
> 
> 时间：2013-02-27T22:05:51.183
> 
> 标签：geronimo, maven-cargo

我是一个 maven 初学者.. 和 geronimo 就这点而言。我试图弄清楚如何将 webApp war 文件部署到远程 geronimo 服务器，以便我可以设置一个持续集成环境。

让我详细说明：

*   系统 A 有 Eclipse maven 项目并且没有安装 geronimo。
*   系统 B 有一个 geronimo 服务器

现在我想从系统 A 执行 maven 目标，以便构建我的 webApp 的 war 文件，然后在系统 B 上远程部署（可能需要先取消部署现有的文件）。我一直在阅读 Cargo 和“geronimo” -maven-plugin ”和它的方式在我的头上。有很多将货物远程部署到 tomcat 的示例，但这对我不起作用。

任何关于从哪里开始解决上述情况的建议将不胜感激！

谢谢！

# ssl-certificate - 具有多个密钥库的 Jmeter

> ID：15123398
> 
> 赞同：2
> 
> 时间：2013-02-27T22:06:29.333
> 
> 标签：ssl-certificate, jmeter, keystore, jks

我正在尝试确定引用不同 keyStore 文件以满足负载测试需求的最佳方式。

我有不同的环境和不同的证书集。一种用于开发，一种用于分期。我的目标是使用一个带有参数的测试计划来告诉 Jmeter 要命中哪个环境。

如何通过 Beanshell 告诉 Jmeter 使用哪个 keyStore？中的当前设置`system.properties`如下：

```
javax.net.ssl.keyStore=C:/apache-jmeter-2.9/bin/ssl/myKeyStore.jks
#The password to your keystore
javax.net.ssl.keyStorePassword=supersecret 
```

此外，如果我通过命令行传入以下内容：

```
-Djavax.net.ssl.keyStore=path_to_keystore
-Djavax.net.ssl.keyStorePassword=password_of_keystore 
```

它会覆盖`system.properties`文件中分配的值吗？

感谢阅读，Jmeter-Fan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:01:20.437

看一下密钥库配置。

您只需使用所有证书创建一个 p12 文件，配置 system.properties 和 jmeter.properties，将配置添加到您的测试计划中，然后开始！

[http://jmeter.apache.org/usermanual/component_reference.html#Keystore_Configuration](http://jmeter.apache.org/usermanual/component_reference.html#Keystore_Configuration)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:31:17.143

问题解决了！这只是 beanshell 脚本中的一个简单赋值，并添加一些条件逻辑来确定要命中哪个环境（提示：不要对参数使用单引号）：

```
System.setProperty("javax.net.ssl.keyStore","path/to/keystore");
System.setProperty("javax.net.ssl.keyStorePassword","supersecret"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-28T13:43:31.323

我使它与这个一起工作：

```
import org.apache.jmeter.util.SSLManager;
System.setProperty("javax.net.ssl.keyStore","foo.jks");
System.setProperty("javax.net.ssl.keyStorePassword","fooPW");
SSLManager.getInstance().reset(); 
```

这是在像*Beanshell这样的代码**采样器*中，在要切换到另一个密钥库的*ThreadGroup中。*然后，在这个*ThreadGroup*中，不要忘记像任何 SSL conf（https、Java 实现、服务器名称和端口）一样配置*HTTP 请求默认值。*

 ***我在*测试计划*中使用了它，其中所有测试都是连续执行的，如果没有，你应该重新设计这个解决方案。

有点棘手和丑陋，是的，但它有效。***

# jquery - 如何将 jsonutil 与 Coldfusion7 和 jquery ajax 一起使用？

> ID：15123399
> 
> 赞同：1
> 
> 时间：2013-02-27T22:06:29.620
> 
> 标签：jquery, ajax, json, coldfusion, coldfusion-7

我试图了解如何使用 JSONutil 在 jquery 和 Coldfusion 之间序列化/反序列化 JSON。我被coldfusion 7卡住了，所以我不能`returnformat='json'`在我的cfc中使用该属性。

客户端.cfc：

```
<cfcomponent>
    <cffunction name="GetClientsByName"
        returntype="query" 
        hint="get clients from search term">

        <cfargument name="name" type="string" required="yes">

        <cfquery name="GetClientsByName" datasource="#application.dsn#">
            SELECT client_id, client_name
            FROM Clients
            WHERE client_name LIKE '%' + <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.name#"> + '%'    
        </cfquery>

        <cfreturn GetClientsByName>
    </cffunction>
</cfcomponent> 
```

jquery ajax 调用：

```
function getClients(name){
    $.ajax {
        type: "post"
        url: "/surveymanagement/admin/client.cfc",
        dataType: "json",
        data: {
            method: "GetClientsByName",
            name: name
        },
        success: function(data){
            $("#here").html(data)
        }
    } 
```

现在我在哪里以及如何使用 jsonutil 来让它工作？

jsonutil 的站点：http: [//jsonutil.riaforge.org/](http://jsonutil.riaforge.org/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T23:21:49.917

（简要说明，我的建议是先让 cfc 单独工作。这样调试 CF 问题要容易得多。在确认 cfc 返回所需的 JSON 字符串之前，不要将 jquery 添加到混合中。但回到你的问题...)

该实用程序易于使用。在您的函数内部，创建它的一个实例。然后将您的查询对象传递到`serializeJSON()`. 最后返回结果字符串。

*请注意，您的函数签名必须支持远程访问并返回一个字符串（不是查询）*

```
 <cffunction name="GetClientsByName" access="remote" returntype="string">
        <cfargument name="name" type="string" required="yes">

        <!--- always localize function variables --->
        <cfset var util = createObject("component", "path.to.JSONUtil")>
        <cfset var getClientsByName = "">

         .... run cfquery .....

        <!--- return JSON string --->   
        <cfreturn util.serializeJSON(getClientsByName)>

    </cffunction> 
```

您可以直接在浏览器中（或使用`cfinvoke`）测试 cfc：

```
 http://localhost/path/to/client.cfc?method=getClientsByName&name=foo 
```

但是，查询的本机表示方式有点尴尬 IMO。正如 Lance 所提到的，您可能更喜欢返回一个结构数组，这是一个更标准的方法。

```
 <cfset var results = arrayNew(1)>
     <cfset var elem = "">
     ... run query ...  

     <cfloop query="getClientsByName">
          <cfset elem = structNew()>
          <cfset elem["client_id"] = getClientsByName.client_id>
          <cfset elem["client_name"] = getClientsByName.client_name>
          <cfset arrayAppend(results, elem)>
      </cfloop>

      <cfreturn util.serializeJSON(results)> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T22:38:38.563

看看[https://stackoverflow.com/a/6257891/886591](https://stackoverflow.com/a/6257891/886591)你可以使用 $getJSON

```
$.ajax({
  dataType: "json",
  url: url,
  data: data,
  success: success
}); 
```

[Ben Nadel](http://www.bennadel.com/blog/124-Ask-Ben-Converting-a-Query-to-an-Array.htm)还有一篇非常有用的文章，关于将查询转换为数组。由于在 json 中使用查询可能会很痛苦，因此首先将它们转换为数组会更容易

# c++ - 以突发模式读取 cuda 数据

> ID：15123400
> 
> 赞同：-1
> 
> 时间：2013-02-27T22:06:33.597
> 
> 标签：c++, c, cuda, gpu

我目前的 CUDA 代码的执行速度比 CPU 代码慢大约 3-4 倍。

我删除了所有无关的 CPU/GPU 传输，因此大部分计算都在 GPU 上完成，只有最终结果被传输回 CPU 内存。

为了加快速度，我做了一些阅读并发现由于 GPU 内存总线要慢得多，因此访问 GPU 设备内存也很慢。而且，由于我的计算使用大型数组——因此有很多内存访问——即使我设置`threadsPerBlock`为最大值 1024，这也会减慢速度。

我想我现在唯一的选择是将数据块复制到每个单独块操作的 MP 共享内存中，并在该内存上进行计算。

我想知道如何最有效地将突发模式下的一块内存复制到共享内存中。我应该通过复制每个经纱中的起始线程索引来做到这一点吗？

任何具有相关代码或功能的解决方案都将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:04:48.330

没有突发模式之类的东西。从全局内存到共享内存的最快内存复制就是使用线程来完成：

```
__global__ void mykernel(int *globaldata){

  __shared__ int localdata[256];
  int idx = threadIdx.x + blockIdx.x * blockDim.x;
  if (threadIdx.x < 256)
    localdata[threadIdx.x] = globaldata[idx];
  __syncthreads();

  (... rest of kernel code)
} 
```

如果您以每块至少 256 个线程（以及内核中的许多块）启动上述内核，您将获得良好的内存带宽和利用率。

CUDA C[最佳实践指南](http://docs.nvidia.com/cuda/cuda-c-best-practices-guide/index.html)有更多关于如何使用[共享内存](http://docs.nvidia.com/cuda/cuda-c-best-practices-guide/index.html#shared-memory)来有效加速各种操作的代码示例。

# android - 在 Dalvik 中的两个进程之间共享内存

> ID：15123402
> 
> 赞同：12
> 
> 时间：2013-02-27T22:06:40.090
> 
> 标签：android

我创建了一个 android 服务，它向应用程序公开一个接口以接受相机帧字节数组。该服务使用本机库来处理此相机帧并返回有关相机帧的一些数据。目标是能够实时处理相机预览帧。

**问题**- 我的 AIDL 文件有一个名为 initFrame(in byte[] frame) 的 API。每当我从应用程序（在单独的进程中运行）调用此 API 时，都会出现异常 - [TransactionTooLargeException](http://developer.android.com/reference/android/os/TransactionTooLargeException.html.)

这是因为字节数组的大小 > 1MB 并且绑定器事务缓冲区具有 1MB 的有限固定大小。即使大小限制更大，复制大缓冲区以进行实时处理也是非常低效的。

**问题**- android 中有没有办法在两个 dalvik 进程之间共享内存，可以帮助解决问题？我查看了[MemoryFile](http://developer.android.com/reference/android/os/MemoryFile.html)，但似乎 MemoryFile 目前只能用于在使用隐藏 API 的进程之间共享内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:30:27.650

对于这种类型的事务，我会在 2 个进程之间使用套接字连接。双方可以根据需要流式传输数据和缓冲区，而不会占用大量资源。您的服务在套接字上侦听并让客户端连接到套接字并发送数据应该相对容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T22:57:43.647

看看**ashmem**子系统，它是一个共享内存分配器，类似于 POSIX SHM，但具有不同的行为并具有更简单的基于文件的 API。

也许这就是您正在寻找的：

```
int ashmem_create_region(const char *name, size_t size);
int ashmem_set_prot_region(int fd, int prot);
int ashmem_pin_region(int fd, size_t offset, size_t len);
int ashmem_unpin_region(int fd, size_t offset, size_t len);
int ashmem_get_size_region(int fd); 
```

这在`system/core/include/cutils/ashmem.h`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T01:05:00.350

如果您能够修改Android系统，您可以扩大交易规模。Binder 事务缓冲区有一个有限的固定大小，目前为 1Mb

ProcessState.cpp中有一个参数

```
#define BINDER_VM_SIZE ((1*1024*1024) - (4096 *2)) 
```

请尝试增加此值。

如果您无法做到这一点，请尝试将您的数据分成几个事务。

此外，您还可以采用其他 IPC 机制，例如使用本机代码在`system/core/include/cutils/ashmem.h`. 这并不难。据我所知，有些厂商使用ashmem在一些没有binder驱动支持的内核上实现binder事务。您也可以使用套接字。

# zend-framework2 - Zf2 - 使用 uri 获取控制器名称/动作名称

> ID：15123406
> 
> 赞同：1
> 
> 时间：2013-02-27T22:06:53.617
> 
> 标签：zend-framework2

有没有办法使用给定的 uri 获取控制器名称和操作名称？

例子：

```
uri: http://test/client/edit/48 
```

控制器名称 => 客户端操作名称 => 编辑

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T07:47:48.077

您可以将您的 uri 与应用程序路由器匹配以获取`RouteMatch`对象。

```
$request = new \Zend\Http\Request();
$request->setUri($uri);
$router = $serviceLocator->get('Router');
$routeMatch = $router->match($request); 
```

现在您可以检索您的参数。

```
if ($routeMatch) {
    $controller = $routeMatch->getParam('controller');
    $action     = $routeMatch->getParam('action');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:26:58.183

在您的控制器中添加以下内容：-

```
use Zend\Stdlib\RequestInterface as Request;
use Zend\Stdlib\ResponseInterface as Response; 
```

然后在你的控制器中创建一个调度函数

```
public function dispatch(Request $request, Response $response = null)
{
    $controller = $this->params('controller');
    $action = $this->params('action');

    echo "Controller: " . $controller . " Action: " . $action;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T10:06:59.663

虽然晚了，但是为了帮助新访客，在这里解决了，

[ZF2：在控制器中获取 url 参数](https://stackoverflow.com/questions/10024969/zf2-get-url-parameters-in-controller)

简而言之，这段代码应该会有所帮助，

```
$controller = $this->params()->fromRoute('RouteParamForController'); 
```

# jquery - jqueryui性能优化

> ID：15123409
> 
> 赞同：1
> 
> 时间：2013-02-27T22:06:58.520
> 
> 标签：jquery, performance, jquery-ui

我需要你的帮助，我有一个非常沉重的 html 页面，我希望它是 JqueryUI - ed。

我的意思是将复选框转换为 ui 按钮，将单选按钮转换为 jUI 单选等等……这是在一个简单的对话框中，需要 25 秒才能呈现！

使用 Chrome 开发者工具，我可以看到很多 Parse HTML 调用。所有的时间都花在了渲染上。

你能给出一些建议来优化 Jquery 调用吗？

这是代码，位于 Chrome 结果下方。

```
 $("input[id*=roleHabilitationsListItemAdd]")
        .button({
            icons: {primary: "ui-icon-none"},
            text: false
        })
        .click(function () {
            if (this.checked) {
                $(this).button("option", "icons", {primary: "ui-icon-check"});
            }
            else {
                $(this).button("option", "icons", {primary: "ui-icon-none"});
            }
        })
        .filter(":checked").button({icons: {primary: "ui-icon-check"}}); 
```

![此屏幕显示开发人员工具和所有调用的开始](../Images/0574cd405bd13ec726756d478e2b009c.png) ![这是结果的一部分，较重的选项卡。 另一个有单选按钮（虽然只有一个维度）](../Images/8a169a5add9cabfc8e7261298bdff020.png)

# c# - 在 LabView 应用程序中引用的 C# .dll 可以访问 app.config 文件吗？

> ID：15123410
> 
> 赞同：3
> 
> 时间：2013-02-27T22:07:09.540
> 
> 标签：c#, dll, app-config, labview

我有一个在 LabView 应用程序中引用的 C# .dll。我需要 .dll 才能访问 App.config 文件。（这样我们就可以在 .dll 中使用 log4Net 进行调试）

问题是此 C# .dll 的入口点是 LabView 应用程序而不是 .NET 应用程序，因此此 .dll 不存在“DOT_NET_APP.exe.config”

我试过“LABVIEW_APP.exe.config”只是为了看看它是否可以记录，但我什么也没得到。不创建日志文件。我还进行了测试以确保 log4Net 配置正确。（创建了一个虚拟的 .net 控制台应用程序并测试了 C# .dll）

有没有办法让 .DLL 被明确告知在哪里寻找其配置文件？我可以覆盖导致它查找“DOT_NET_APP.exe.config”并提供我自己的默认行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T22:16:04.340

[`AppDomain.GetData()`](http://msdn.microsoft.com/en-us/library/system.appdomain.getdata.aspx)与参数一起使用`"APP_CONFIG_FILE"`以查找配置文件的位置。

# java - 导出的 jar 文件不会执行

> ID：15123411
> 
> 赞同：0
> 
> 时间：2013-02-27T22:07:09.310
> 
> 标签：java, eclipse, jar, executable-jar

我已经为我的 gui 应用程序创建了一个可运行的 jar，但是当我单击它时，它不会执行。不过，项目在 Eclipse 中运行良好。我正在使用 JOGL，如果有帮助，这些 jar 会在 Eclipse 中被外部调用。关于为什么 jar 不会执行的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:17:35.727

可能所有引起问题的文件确实存在于项目中，但被注释掉了（因此，您没有在包资源管理器中看到它们，这是您通常使用的视图）。

删除它们后，一切都会好起来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:37:26.887

编译警告不应阻止您创建可运行的 jar。并且替换已经存在的目录和依赖也没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-28T23:07:25.157

会不会有问题`MANIFEST.MF`？我记得在那个问题上遇到了问题并`jar`建立了自己。因此，您无需正确填写即可构建您的应用程序。问题是你`jar`不会在简单的双击（或用`java -jar myapp`）打开它时执行。

因此，您的问题可能可以通过添加以下内容来解决`META-INF/MANIFEST.MF`：

```
Manifest-Version: 1.0
Main-Class: path.to.main.class 
```

# c++ - 如何使用 boost::spirit 验证代数语句？

> ID：15123412
> 
> 赞同：5
> 
> 时间：2013-02-27T22:07:15.107
> 
> 标签：c++, parsing, boost, boost-spirit, boost-spirit-qi

我正在尝试扩展[计算器示例](http://www.boost.org/doc/libs/1_53_0/libs/spirit/example/qi/calc_utree.cpp)，以便解析器不会解析和评估代数表达式，而是确定代数语句是否为真。我的意思是像`1 + 5 * 5 - 10 = 19 - 3`(desired parser result is `true`) 和`3 - 1 = 9`(desired parser result is `false`) 这样的语句。

我不得不承认我是新手`boost::spirit`，现在这一切都让人不知所措。但是，我确实觉得我对计算器示例的理解足够好，至少可以取得一些进展。

使用提供的示例作为起点，语法如下所示：

```
calculator() : calculator::base_type(expression)
{
    using qi::uint_;
    using qi::_val;
    using qi::_1;

    expression =
        term                    [_val = _1]
            >> *( ('+' >> term  [_val = _val + _1])
                | ('-' >> term  [_val = _val - _1])
                );

        term =
            factor                [_val = _1]
            >> *( ('*' >> factor  [_val = _val * _1])
                | ('/' >> factor  [_val = _val / _1])
                );

        factor =
            uint_                 [_val = _1]
            |   '(' >> expression [_val = _1] >> ')'
            |   ('-' >> factor    [_val = -_1])
            |   ('+' >> factor    [_val = _1]);
} 
```

为简洁起见，我删除了调试宏。

为了限制问题的范围，我决定每个语句只允许一个等号。由于在一对闭合的括号内出现等号是没有意义的（至少在常规意义上），我决定也不允许使用括号。这通过允许删除可选的 来简化`factor`-parser `'(' >> expression [_val = _1] >> ')'`。

在这一点上，我有点卡住了。首先，我需要解析器接受一个等号。其次，在最终执行比较之前，我需要语义操作来分别评估语句的左侧（LHS）和右侧（RHS）（或者这是我认为需要做的事情）。

我想知道最简单的方法是否是构建两个单独的解析器，一个 LHS 和一个 RHS，由匹配等号的第三个解析器分隔。两个解析器 LHS 和 RHS 应该是相同的，除了语义动作，显然需要将输入分成两个不同的类别，以便最终进行比较。

在尝试编写两个单独的解析器 LHS 和 RHS 之前，我想学习如何修改原始解析器，以便它将计算的表达式存储在局部变量中。（我什至不确定这是否是通往任何地方的可行之路，但这似乎是朝着正确方向迈出的一步。）

这是我尝试过的：

```
int result;

expression =
    term                            [result = _1]
    >> *(   ('+' >> term            [result = result + _1])
        |   ('-' >> term            [result = result - _1])
        ); 
```

但这让我的编译器（Apple LLVM 编译器 4.2、Xcode 4.6）发疯了，对我大喊大叫

> 从不兼容的类型'const _1_type'（又名'const actor< argument < 0 > >'）分配给'int'

事后看来，这当然是有道理的，因为从一开始`_val`就没有绑定`int`（毕竟，解析器是 AFAIU 应该是通用的）。换句话说，我需要弄清楚如何定义用于临时存储评估的解析表达式的类型。

问题是：任何人都可以在正确的方向上轻推我吗？LHS 和 RHS 的拆分似乎是可行的方法吗？

非常感谢任何建议！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T22:42:02.633

如果你问我，最简单的方法是**[http://liveworkspace.org/code/1fvc8x$0](http://liveworkspace.org/code/1fvc8x%240)**

```
equation = (expression >> "=" >> expression) [ _val = _1 == _2 ]; 
```

这将解析两个表达式，并且返回的属性是一个`bool`指示两个表达式是否评估为相同值的属性。

演示程序

```
int main()
{
    doParse("1 + 2 * 3 = 7");
    doParse("1 + 2 * 3 = 8");
} 
```

印刷

```
parse success
result: true
parse success
result: false 
```

### 示例程序

```
#include <boost/fusion/adapted.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>

namespace qi    = boost::spirit::qi;
namespace phx   = boost::phoenix;

typedef unsigned attr_t;

template <typename It, typename Skipper = qi::space_type>
    struct calculator : qi::grammar<It, bool(), Skipper>
{
    calculator() : calculator::base_type(equation)
    {
        using qi::uint_;
        using qi::_val;
        using qi::_1;
        using qi::_2;

        equation = (expression >> "=" >> expression) [ _val = _1 == _2 ];

        expression =
            term                    [_val = _1]
                >> *( ('+' >> term  [_val = _val + _1])
                    | ('-' >> term  [_val = _val - _1])
                    );

            term =
                factor                [_val = _1]
                >> *( ('*' >> factor  [_val = _val * _1])
                    | ('/' >> factor  [_val = _val / _1])
                    );

            factor =
                uint_                 [_val = _1]
                |   '(' >> expression [_val = _1] >> ')'
                |   ('-' >> factor    [_val = -_1])
                |   ('+' >> factor    [_val = _1]);
    }

  private:
    qi::rule<It, unsigned(), Skipper> expression, term, factor;
    qi::rule<It, bool(), Skipper> equation;
};

bool doParse(const std::string& input)
{
    typedef std::string::const_iterator It;
    auto f(begin(input)), l(end(input));

    calculator<It, qi::space_type> p;
    bool result;

    try
    {
        bool ok = qi::phrase_parse(f,l,p,qi::space,result);
        if (ok)   
        {
            std::cout << "parse success\n";
            std::cout << "result: " << std::boolalpha << result << "\n";
        }
        else      std::cerr << "parse failed: '" << std::string(f,l) << "'\n";

        if (f!=l) std::cerr << "trailing unparsed: '" << std::string(f,l) << "'\n";
        return ok;
    } catch(const qi::expectation_failure<It>& e)
    {
        std::string frag(e.first, e.last);
        std::cerr << e.what() << "'" << frag << "'\n";
    }

    return false;
}

int main()
{
    doParse("1 + 2 * 3 = 7");
    doParse("1 + 2 * 3 = 8");
} 
```

# linux - 脚本：如何根据匹配列将文件中的行放在一起？

> ID：15123413
> 
> 赞同：0
> 
> 时间：2013-02-27T22:07:23.733
> 
> 标签：linux, bash, scripting, awk

我有两个文件，它们的行如下：

档案一：

```
TCONS_00000007  ENSMUST00000044158  gene:ENSMUSG00000041560 433/463 0.0 364.0
TCONS_00000009  ENSMUST00000044158  gene:ENSMUSG00000041560 1051/1122   0.0 890.0
TCONS_00000212  ENSMUST00000112323  gene:ENSMUSG00000032582 458/475 0.0 420.0
TCONS_00000636  ENSMUST00000061242  gene:ENSMUSG00000048076 1694/1751   0.0 1571.0
TCONS_00000636  ENSMUST00000163300  gene:ENSMUSG00000048076 1658/1713   0.0 1539.0 
```

文件 B：

```
chr1    4675000 4675009 TCONS_00000007
chr1    4677953 4678274 TCONS_00000008
chr1    4677956 4679079 TCONS_00000009
chr1    43944821    43946606    TCONS_00000636 
```

编辑：文件 B 中的第 4 列将是唯一的。文件 A 中的第 1 列不一定是。

我想做的是输出一个文件，这样它只会保留 A 上的第 1 列和 B 上的第 4 列匹配的行。允许重复。（所以在上面的例子中，我希望输出看起来像这样）：

```
chr1    4675000 4675009 TCONS_00000007  ENSMUST00000044158  gene:ENSMUSG00000041560 
chr1    43944821    43946606     TCONS_00000636 ENSMUST00000061242  gene:ENSMUSG00000048076
chr1    43944821    43946606     TCONS_00000636 ENSMUST00000163300  gene:ENSMUSG00000048076 
```

所以我尝试使用 awk 来做到这一点......我被卡住了。

```
FNR==NR{ ### script.awk
    array[$4]++
    next
}

{
    if ($1 in array){
        print $1,$2,$3...
    }
}
awk -f script.awk fileB fileA > fileC 
```

我遇到的麻烦是打印部分正常工作。如您所见，这样做会保留我想要的 fileA 中的行，但我想不出一种方法来获取我也想要的 fileB 的 $1、$2、$3 列（显然输入 $1、$2、 3 美元不起作用）。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:14:50.397

从您当前的脚本来看，它看起来`$4`在`fileB`. 所以你可以试试这个修改后的脚本（基于你的代码）：

```
FNR==NR{ ### script.awk
    array[$4]=$0
    next
}

{
    if ($1 in array){
        print array[$1],$1,$2,$3...
    }
} 
```

然后

```
awk -f script.awk fileB fileA > fileC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:13:11.327

尝试这个 ：

```
awk '
    NR==FNR{v=$1;$1="";arr[v]=$0}
    NR!=FNR{v=$4;$4="";arr[v]=arr[v] $0}
    END{for (a in arr) print a, arr[a]}
' A B 
```

# arrays - MATLAB中二维矩阵中的可变长度行

> ID：15123414
> 
> 赞同：1
> 
> 时间：2013-02-27T22:07:27.840
> 
> 标签：arrays, matlab, matrix

嗨，我需要在 Matlab 中存储可变长度的行。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T22:25:09.107

我意识到我的评论中的链接对于这类问题不一定足够清楚，所以我想我会用一个例子将它扩展到一个答案。

使用元胞数组，您可以在每个元胞中保存任何数据类型。不太普遍，这意味着它适用于保存不同长度的向量，这就是您所要求的。

```
A = [0 1 2];
B = [3 4];

#% assigning a variable into a cell array:
C{1} = A;  #% note the curly braces {} instead of ()
C{2} = B;

#% getting a value out of a cell array:
D = C{2}; #% D is a 1x2 matrix of doubles
E = C(2); #% E is a 1x1 cell 
```

如您所见，要访问元胞数组的元素，请使用大括号`{}`而不是通常的括号`()`来读取/写入元胞数组。

# c - SSE 运算符+= 用于向量

> ID：15123418
> 
> 赞同：2
> 
> 时间：2013-02-27T22:07:47.523
> 
> 标签：c, performance, vector, sse

我有两个`double`类型的数组，我想执行`vecA += vecB`. 到目前为止，我正在做`vecA = vecA + vecB`，据我所知，例如整数写入`i = i + 5`比`i += 5`. 所以我想知道，是否有一些 SSE 功能可以`operator+=`在 __m128d 上执行。我搜索并一无所获。我的应用程序在此操作上花费了大约 60% 的时间`vecA = vecA + vecB`，因此任何性能提升都会显示出来。

下面代码片段中的所有数组都是 16 字节对齐的，并且`len`总是偶数。

原始代码很简单

```
inline void addToDoubleVectorSSE(
         const double * what, const double * toWhat, double * dest, const unsigned int len)
{
   __m128d * _what      = (__m128d*)what;
   __m128d * _toWhat    = (__m128d*)toWhat;

   for ( register unsigned int i = 0; i < len; i+= 2 )
   {
       *_toWhat = _mm_add_pd( *_what, *_toWhat );
       _what++;
       _toWhat++;
   }
} 
```

在阅读[http://fastcpp.blogspot.cz/2011/04/how-to-process-stl-vector-using-sse.html](http://fastcpp.blogspot.cz/2011/04/how-to-process-stl-vector-using-sse.html)之后作者通过不立即写入他刚刚读到的内容来获得性能，我试过了

```
__m128d * _what         = (__m128d*)what;
__m128d * _toWhat       = (__m128d*)toWhat;
__m128d * _toWhatBase   = (__m128d*)toWhat;

__m128d _dest1;
__m128d _dest2;

for ( register unsigned int i = 0; i < len; i+= 4 )
{
    _toWhatBase = _toWhat;
    _dest1      = _mm_add_pd( *_what++, *_toWhat++ );
    _dest2      = _mm_add_pd( *_what++, *_toWhat++ );

    *_toWhatBase++ = _dest1;
    *_toWhatBase++ = _dest2;
} 
```

但速度上没有任何改善。那么，有什么`operator+=`适合的`__m128d`吗？或者还有其他方法可以用来对双精度数组执行 operator+= 吗？目标平台始终是使用 MSVC 的 Intel i7 CPU 上的 Windows（XP 和 7）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T23:00:49.210

您正在做不必要的工作，现代编译器会自动生成这种代码。该功能称为“自动矢量化”。MSVC 在 VS2012 中也支持它。我无法理解您的代码，所以我像这样重写了它：

```
inline void addToDoubleVectorSSE(
         const double * what, double * toWhat, const unsigned int len)
{
    for (unsigned ix = 0; ix < len; ++ix) 
        toWhat[ix] += what[ix];
} 
```

这产生了这个机器代码：

```
00A3102E  xor         eax,eax  
00A31030  movupd      xmm0,xmmword ptr [esp+eax+358h]  
00A31039  movupd      xmm1,xmmword ptr [esp+eax+38h]  
00A3103F  add         eax,10h  
00A31042  addpd       xmm1,xmm0                          // <=== Look!!
00A31046  movupd      xmmword ptr [esp+eax+348h],xmm1  
00A3104F  cmp         eax,320h  
00A31054  jb          wmain+30h (0A31030h) 
```

显然，考虑到代码看起来多么干净，您应该赞成这个解决方案。如有必要，请更新您的 VS 版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T22:44:22.813

据我所知，没有`+=`, 因为 SSE 算术运算通常是寄存器到寄存器或内存到寄存器，而不是寄存器到内存。

但是，您可以使用您链接的博客文章中的建议来提高您的性能。该技巧对您不起作用的原因是您没有消除两条指令之间的依赖关系：`++`增量的副作用`_what++`并`_toWhat++`阻止第二对操作同时开始。如下修改你的循环以获得改进：

```
for ( register unsigned int i = 0; i < len; i+= 4, _what += 2, _toWhat += 2, _toWhatBase+=2 )
{
    _toWhatBase = _toWhat;
    _dest1      = _mm_add_pd( *_what, *_toWhat );
    _dest2      = _mm_add_pd( *(_what+1), *(_toWhat+1));

    *_toWhatBase = _dest1;
    *(_toWhatBase+1) = _dest2;
} 
```

更改后，操作`_dest2`变得独立于操作`_dest1`

根据我的挂钟估计，经过这个简单的修改，我得到了大约 28% 的改进。

# sum - 我如何将 sqrt(x2 - x1)^2 (y2 - y1)^2 转换为正确的 java 代码

> ID：15123419
> 
> 赞同：-4
> 
> 时间：2013-02-27T22:07:51.113
> 
> 标签：sum, pow, square-root

我将如何转换两点之间距离的方程式：

```
sqrt((x2 − x1)^2 + (y2 − y1)^2) 
```

进入正确的Java代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:09:47.833

你可以使用`Math.pow`和`Math.sqrt`包`java.lang.Math`

# drupal - Drupal 消息在表单重定向时丢失

> ID：15123420
> 
> 赞同：0
> 
> 时间：2013-02-27T22:07:51.443
> 
> 标签：drupal, drupal-7

我正在尝试在用户注册时打印一条消息。我创建了一个表单提交处理程序，它调用 drupal_set_message 并返回“/”。我在我的提交处理程序中放置了一条看门狗消息，以确保它被调用，并且确实如此。

重定向后，我没有收到任何消息。我的 devel 调试 dpm 不起作用，我的 drupal_set_message 不起作用等等。正在使用的模板肯定是打印 $messages。

我检查了非常相似的问题，但它似乎并不适用。我的用户 0 存在，这也是一个很老的答案。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:23:15.697

尝试利用 hook_form_alter() 添加自定义提交处理程序。请务必清除缓存，以便检测到您的钩子。

```
function mymodule_form_user_register_form_alter(&$form, &$form_state) {
  // Add a custom submit handler to the user register form
  $form['#submit'][] = 'mymodule_custom_reg_handler';
}

function mymodule_custom_reg_handler(&$form, &$form_state) {
  drupal_set_message('Hi mom!');
} 
```

# windows - 使用 Windows 启动参数启动应用程序

> ID：15123421
> 
> 赞同：6
> 
> 时间：2013-02-27T22:07:51.503
> 
> 标签：windows, registry, inno-setup, startup

我试图让我的应用程序在 Windows 启动时自动启动并运行登录逻辑。

我已经使用带有参数的启动文件夹中的快捷方式使用它，但是我想知道是否有某种方法可以设置可以启动我的程序并像快捷方式一样传递参数的注册表项？

我正在为安装程序使用 Inno Setup，并且我正在使用这一行：

```
Name: "{commonstartup}\AppNameHere"; Filename: "{app}\AppNameHere.exe"; \
    Parameters: "/login"` 
```

但我希望能够改为使用这样的注册表项：

```
Root: HKLM; Subkey: "SOFTWARE\Microsoft\Windows\CurrentVersion\Run"; \
    ValueType: string; ValueName: "AppNameHere"; ValueData: """{app}\AppNameHere.exe"""; \
    Flags: uninsdeletevalue` 
```

我认为有一些方法可以为启动指定参数，但我在 Inno Setup 网站上找不到任何东西，除了我已经发现从[http://www.jrsoftware.org/iskb.php添加注册表项本身?startwithwindows](http://www.jrsoftware.org/iskb.php?startwithwindows)

有没有人有在 Windows 启动时添加注册表项和使用参数启动应用程序的经验？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T22:32:17.447

您可以在 中包含参数`ValueData`，用空格隔开，并与可执行路径隔开。例如：

```
[Registry]
Root: HKLM; Subkey: "SOFTWARE\Microsoft\Windows\CurrentVersion\Run"; \
    ValueType: string; ValueName: "AppNameHere"; \
    ValueData: """{app}\AppNameHere.exe"" /login" 
```

# jquery - Firefox 中的 $.ajax 调用

> ID：15123424
> 
> 赞同：0
> 
> 时间：2013-02-27T22:07:54.153
> 
> 标签：jquery, ajax, firefox

我正在尝试使用 $.ajax。基于此响应，我将显示或隐藏一些容器。问题在于，在 Chrome 中响应恢复正常，并且成功回调工作正常。但是，在 Firefox 中，响应返回为未定义。我试图将数据类型设置为 json ，然后在响应返回后解析 json ，但这也不起作用。我刚刚收到一个错误，说数据不完整，无法解析。

这是javascript：

```
var infoId = $("#infoId").val();

    $.ajax({
        type: "GET",
        url: "http://localhost/HartvilleServices.Enrollment/Participation",
        data: "userInformationId=" + infoId,
        processData: false
    })
        .error(function(x, s, e) {
            $("#thankYou-container").css("display", "none");
            $("#survey-container").css("display", "block");
        })
        .success(function (data) {
            $.each(data, function (key, val) {
                if (val.hasResponse == "False") {
                    $("#thankYou-container").css("display", "none");
                    $("#survey-container").css("display", "block");
                } else {
                    $("#thankYou-container").css("display", "block");
                    $("#survey-container").css("display", "none");
                }

            });
        }); 
```

谁能给我一些见解？我以前从未注意到这个问题。

# cucumber - 为“Given”和“Then”步骤定义相同的短语

> ID：15123431
> 
> 赞同：5
> 
> 时间：2013-02-27T22:08:47.307
> 
> 标签：cucumber, aruba

我在这里寻找建议或最佳实践。

有时我想使用不同的介词为 2 个不同的步骤提供相同的正则表达式/短语。`Given`我经常看到的案例是一个在两个方面和`Then`步骤上都有意义的短语。

`Given`用于执行和操作的步骤（设置测试状态）。并`Then`用于验证状态但不执行操作的步骤。我经常发现相同的措辞对两者都适用。此类短语的一个示例是“我已登录”

这是一个人为的场景

```
Scenario: Login is saved between sessions.
    Given I am logged in
    When I exit the application
    And I start the application
    Then I am logged in 
```

当然，这在步骤定义中不起作用，因为 cucumber 不区分步骤谓词。

我玩弄了在所有碰撞`Then`步骤中添加“验证”，或在所有重复`Given`步骤中添加“那个”。但没有什么是正确的。

```
Given that I am logged in.
...
Then verify I am logged in. 
```

它当然有效，但我觉得我错过了一些不需要在我的大部分步骤中使用相同的“扩展谓词”的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-15T18:34:53.333

我有同样的问题，这是我得到的答案：

步骤定义必须是唯一的，Cucumber 才能知道要执行什么。此外，Given/When/Then 关键字在技术上是可互换的。它们是为了功能文件的可读性，但与实现无关。所以如果两个步骤（Given 和 Then）都做同样的事情，技术上没有问题；您应该能够使用功能文件中的相同步骤定义，前面带有“Given”或“Then”关键字。也就是说，您可能需要考虑重写您的步骤定义以描述预期的行为而不是实现，例如“给定一个 id 为 xxx 的元素”

# php - 如何从另一个数组中过滤匹配数组键的数组？

> ID：15123432
> 
> 赞同：3
> 
> 时间：2013-02-27T22:08:58.130
> 
> 标签：php, arrays

这是我的数组：

```
$not_wanted = array('example1', 'example2');

$from_this_array= array(

'example1'=>'value1',
'example2'=>'value2',
'should_stay'=>'value3'

) 
```

最后我应该有

```
array('should_stay'=>'value3') 
```

我一直在尝试，但它有病

```
public function aaData($array){
    $aaData =array();
    foreach ($array as $key=>$item){        
        if(array_key_exists($key, $this->unset_array)){
            unset($array[$key]);
            $aaData[] = $item;
        }
    }
    var_dump($aaData);
    return $aaData;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:13:49.790

一种可能的方法：

```
$not_wanted = array('example1', 'example2');
$from_this_array= array(
  'example1'=>'value1',
  'example2'=>'value2',
  'should_stay'=>'value3'
);

print_r(array_diff_key(
  $from_this_array, array_flip($not_wanted))); 
```

[**演示**](http://codepad.org/jPLJsufA)。

请注意，[**array_diff**](http://www.php.net/manual/en/function.array-diff.php)与此处无关，因为它检查的是值，而不是键。由于您的第一个 ( `$not_wanted`) 数组包含值，因此应将其翻转（变成哈希）以在其上使用[**array_diff_key**](http://www.php.net/manual/en/function.array-diff-key.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:19:49.083

仅作记录，这是您的代码的工作版本：

```
function aaData($array){
    $aaData =array();
    foreach ($array as $key=>$item){        
        if(!in_array($key, $this->unset_array)){
            $aaData[$key] = $item;
        }
    }
    var_dump($aaData);
    return $aaData;
} 
```

您`array_key_exists`在存储应排除的键的数组上使用了 - 但在此数组中，它们是值，而不是键，因此您需要`in_array()`。此外，对原始数组进行操作也没有任何意义`unset()`，因为您只会返回修改后的数组。

[演示](http://codepad.org/vz4bcs6p)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:20:17.047

做就是了：

```
foreach ($from_this_array as $key => $val) {
   if (in_array($key, $not_wanted)) {
      unset($from_this_array[$key]);
   }
} 
```

查看[**工作演示**](http://codepad.org/T2BlX2cb)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T22:22:38.630

```
function aaData($array, $not_wanted){
  foreach ($not_wanted as $key){        

    if(isset($array[$key])){
        unset($array[$key]);
    }
}
return $array;
}

$not_wanted = array('example1', 'example2');

$array= array(

'example1'=>'value1',
'example2'=>'value2',
'should_stay'=>'value3'

);

print_r(aaData($array, $not_wanted)); 
```

# android - 在 FragmentTabHost 中的选项卡更改后 ListFragment 不可点击

> ID：15123435
> 
> 赞同：0
> 
> 时间：2013-02-27T22:09:13.683
> 
> 标签：android, android-layout, android-fragments

我的 android 应用程序按以下方式组织：

*   包含两个片段（第一个选项卡中的 FragmentA 和第二个选项卡中的 FragmentB）的 FragmentTabHost。
*   FragmentA 有一个 ListViewFragment 并扩展了以下视图：

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <fragment xmlns:android="http://schemas.android.com/apk/res/android"
       android:id="@+id/titles"
       android:name="br.sachetto.ondepublicar.ListViewFragment"
       android:layout_width="match_parent"
       android:layout_height="match_parent" 
       android:focusable="false"
       android:focusableInTouchMode="false"
       android:clickable="false" /> 
    ```

*   片段 B 的观点非常相似。

*   以下代码用于加载 FragmentA 中的视图：

    ```
    private static View view;

    @Override 
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
                             Bundle savedInstanceState) {           

            if (view != null) {         
                    ViewGroup parent = (ViewGroup) view.getParent();        
                    if (parent != null)             
                            parent.removeView(view);    
                    }     
                    else {  
                            view = inflater.inflate(R.layout.list_fragment, 
                                                    container, false);  
                    }
             }  
        return view;         
    } 
    ```

一切正常，直到我从第一个选项卡（FragmentA）更改为第二个选项卡（FragmentB）。在此更改之后，我的列表视图停止响应点击事件。但是，如果我向下和向上滚动列表，它会再次开始响应。如果这个问题有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:16:25.063

如果我没记错的话，您将片段膨胀到以前（在 xml 中）定义为静态/编译时片段的片段中。

这种做法是不允许的，并且会导致两个片段相互重叠。我建议您膨胀所有将通过代码动态移动或更改的片段。

# opengl - 如何在openGl中测试旋转物体的碰撞

> ID：15123440
> 
> 赞同：-1
> 
> 时间：2013-02-27T22:09:33.203
> 
> 标签：opengl, graphics, 3d

我写了一个简单的程序，它由两个碰撞的立方体组成。当我移动它们并测试碰撞时，它工作得很好，但是当我旋转一个立方体时，碰撞就搞砸了。我知道发生这种情况是因为 openGL 不会更改我的对象坐标，那么，我该如何实现呢？

我尝试像这样计算新坐标：

```
new.x = coordinates.x * cos(degrees) - coordinates.y * sin(degrees);
new.y = coordinates.x * sin(degrees) + coordinates.y * cos(degrees); 
```

但是 new.x 和 new.y 是不对的。

我也试过这个，将模型视图乘以 (new.x, new.y, 0, 1)：

```
GLdouble modelview[16], NEWVERTEX[4];
glGetDoublev(GL_MODELVIEW_MATRIX, modelview);

nmview[0] = modelview[0] * new.x + modelview[4] * new.y + modelview[8] * 0 + modelview[12] * 1;
nmview[1] = modelview[1] * new.x + modelview[5] * new.y + modelview[9] * 0 + modelview[13] * 1;
nmview[2] = modelview[2] * new.x + modelview[6] * new.y + modelview[10] * 0 + modelview[14] * 1;
nmview[3] = modelview[3] * new.x + modelview[7] * new.y + modelview[11] * 0 + modelview[15] * 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T23:56:52.620

第一：OpenGL是一个本地化的光栅化器，它只知道点、线和三角形。在 OpenGL 中没有几何对象，也没有场景。

第二：从第一个开始，OpenGL 不进行碰撞检测，并且在 OpenGL 端的对象中没有任何东西可以“改变”。您必须自己进行碰撞检测或使用 3rd 方库实现事物。场景中的所有变化都通过使用 OpenGL 重新绘制整个事物来反映。

* * *

PS：这个问题有点像FAQ。

# jqgrid - 使用 jqGrid onDocument.Ready 时查看数据集的第 n 页

> ID：15123443
> 
> 赞同：0
> 
> 时间：2013-02-27T22:09:41.773
> 
> 标签：jqgrid, jquery, double-click

我有一个独特的问题，我似乎无法找到答案。

我实现了一个分页的 jqGrid。当我双击任何数据页面上的一行时，我的计划是使用 onDoubleClick 事件并使用带有 (id) 参数的函数来获取行的 id，并将其传递给我拥有的操作方法然后将我的页面重定向到编辑页面（我不使用 jqGrid 编辑弹出窗口......这将是我网站上的太多模式窗口）。我的问题是，一旦我编辑了那个病人，我想重定向回我点击离开的相同页面（数据）以进入这个编辑页面。当我说同一个页面时，我将重定向到同一个网格，我想回到保存我刚刚单击的行的同一个数据页面。对我来说，最简单的方法是将页面和行信息发送到我用来调用编辑页面的操作方法。

我可以重定向回数据的第一页......但我希望用户看到他对那个人所做的更改。这可能在数据的第 n 页...

我以为我想出了一个解决方案...

```
 $(document).ready(function () {
        debugger;
        var pageFromTemp = '@TempData["PAGEVAR"]';
        var rowFromTemp = '@TempData["ROWVAR"]';
        var pId = '@TempData["POPULATIONID"]';
        if ((rowFromTemp != "") && (pageFromTemp != "")) {
            //loadPage(pageFromTemp, rowFromTemp, pId);
            $("#ftTable").setGridParam({ page: pageFromTemp });
            $("ftTable").setGridParam({ rowNum: rowFromTemp });
        }
        //else {
        jQuery("#frTable").jqGrid({ 
```

如您所见，在 $(document).ready(function (){} 上，我获得了已保存以重定向到此页面的页面信息，并尝试使用 setGridParam 函数对其进行设置。不幸的是，我仍然重定向回数据的第一页。有没有办法可以将 jqGrid 设置为打开数据的第 N 页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:44:17.670

保存网格状态的最好方法是使用`localStorage`. 看[答案](https://stackoverflow.com/a/8547852/315935)和[上一个](https://stackoverflow.com/a/8436273/315935)。

试试[演示](http://www.ok-soft-gmbh.com/jqGrid/ColumnChooserAndLocalStorage2_single.htm)。您可以选择每页 5 行，选择网格中的第二页，选择某行。然后转到任何其他页面并再次打开演示。您可以使用`F5`键重新加载页面。您将看到先前选择的页面和先前选择的行将被恢复。所以所有的工作都像你想要实现的那样。此外，它将保存许多其他参数，这些参数是网格的状态。它改善了用户体验，使使用网格更加舒适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T23:08:58.780

以下将重新加载网格并将其设置为特定页面。您必须注意在出现双击的网格的第一个视图期间出现的过滤、排序等，并且根据您的用例，可能会在重新加载网格期间将其传递出去。

```
$(gridName).jqGrid().trigger('reloadGrid', [{ page: X}]); 
```

# jquery - jQuery slideToggle() 事件后如何将元素的：visibile 状态发送到 localStorage

> ID：15123449
> 
> 赞同：0
> 
> 时间：2013-02-27T22:09:57.327
> 
> 标签：jquery, local-storage, slidetoggle

我有一个 div 结构，我在整个包装器 div 上调用 slideToggle 以展开/折叠 div 的内容。

我想根据用户离开 div 的状态来存储 div 的状态（打开或关闭）。

在下面的代码中，无论 div 组的展开/折叠如何，控制台的 alert(localStorage.getItem('widgetPreview')) 始终返回可见：

```
$('#myDiv').on('click',function(){
    $(this).children().slideToggle();
    if((this).children().is(':visible')){
        localStorage.setItem('widgetPreview','visible');
    }
    else
    {
        localStorage.setItem('widgetPreview','hidden');
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:13:16.213

```
$('#myDiv').on('click',function(){
    $(this).children().slideToggle().promise().done(function() {
        var vis = $(this).is(':visible') ? 'visible' : 'hidden';
        localStorage.setItem('widgetPreview', vis);
    });
}); 
```

# java - ClassCastException：java.lang.Object 无法转换为 java.lang.Integer

> ID：15123450
> 
> 赞同：13
> 
> 时间：2013-02-27T22:10:00.043
> 
> 标签：java, classcastexception

我的问题的根源是我有一个方法可以处理 JDBC 查询并在查询后释放所有连接。一个“ResultSet”被传回调用方法。

我发现我不能简单地将 ResultSet 传递回调用方法，因为在 ResultSet 关闭的情况下，任何使用它的尝试都会得到一个已经关闭的错误。

因此，在关闭资源之前，我会遍历 ResultSet 并将其存储在 ArrayList 中。

因为该方法处理任何查询，所以我不知道返回的是哪种类型。因此 ArrayList 存储泛型 s。

这工作除了一个表中的一个字段.. 在一个数据库中，即一个 Integer[] 字段。

我从中得到的是一个 JDBC4Array 对象，并且我有一段时间将它放到 Integer[] 中以存储在 ArrayList 中。我确实需要它是一个整数 []。

这就是我现在所拥有的......这是在经历了很多沮丧的banjaxxing之后。

在循环通过 ResultSet 时，在连接关闭之前，我这样做：

```
 // For every row in the ResultSet
            while (rs.next()) {
                // Initialize a ITILRow for this ResultSet row
                ITILRow row = new ITILRow();

                // For each column in this row, add that object to the ITILRow
                for (int colNum=1; colNum<=numCols; colNum++) {
                    Object o = rs.getObject(colNum);

                    // JDBC4Array is a real pain in the butt
                    ArrayList<Integer> tmpList = new ArrayList<Integer>();
                    if (o != null) {
                        if (o.getClass().getSimpleName().endsWith("Array")) {
                            // At least at this time, these Arrays are all Integer[]
                            Array a = (Array) o;
                            Integer[] ints = (Integer[]) a.getArray();
                            for (Integer i : ints) {
                                tmpList.add(i);
                            }
                            o = tmpList;
                        }
                    }

                    row.add(o);
                }

                // Add the ITILRow to allRows
                allRows.add(row);
            } 
```

然后，在调用方法中......

```
 for (ITILRow row : allRows) {
        ...
        ArrayList comps = (ArrayList) row.getObject(5);
        Integer[] argh = (Integer[]) ((ArrayList<Integer>) comps).toArray();

        ...
    } 
```

我得到：

```
java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to [Ljava.lang.Integer; 
```

帮助将不胜感激。我已经把我的大脑绑在这个结上了。

谢谢，

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-27T22:11:32.777

[**`List#toArray()`**](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#toArray%28%29)返回一个`Object`数组。改为使用[**`List#toArray(T[])`**](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#toArray%28T%5B%5D%29)。

```
Integer[] arg = (Integer[]) comps.toArray(new Integer[comps.size()]); 
```

# rest - 资源不同版本的 RESTful URL

> ID：15123451
> 
> 赞同：11
> 
> 时间：2013-02-27T22:09:59.583
> 
> 标签：rest, restful-url, restful-architecture

我在概念上很难理解有关版本化资源的 URL 的正确内容。

假设我有一个应用程序，它以非常类似于版本控制系统的方式跟踪食谱，比如像 RCS 之类的老派。每个版本都可以是一段时间的工作副本，然后从中创建一个新版本。每个版本都有与之关联的评论，并且不共享评论。我可以随时回顾历史并查看配方的演变过程，但每个实例始终被视为同一配方的一个版本。我试图找出构建 URL 以引用这些的最合适的方法，但我无法理解子资源和时间资源等之间的一些差异。

我见过的两种主要方法是：

```
> 1) query parameters
> -- /recipes/ultimate-thing                -> List of available versions of Ultimate Thing
> -- /recipes/ultimate-thing?version=2      -> Version 2 of Ultimate Thing
> -- /recipes/ultimate-thing?version=latest -> Current working version of Ultimate Thing

2a) Nested resources with versions considered subresources
-- /recipes/ultimate-thing/versions/      -> List of available versions of Ultimate Thing
-- /recipes/ultimate-thing/versions/2     -> Version 2 of Ultimate Thing
-- /recipes/ultimate-thing                -> Current working version of Ultimate Thing

2b) Nested resources with the list at the resource
-- /recipes/ultimate-thing                 -> List of available versions of Ultimate Thing
-- /recipes/ultimate-thing/versions/2      -> Version 2 of Ultimate Thing
-- /recipes/ultimate-thing/versions/latest -> Current working version of Ultimate Thing 
```

我觉得每次我试图说服自己采用一种方法时，我都觉得我缺乏理解来为该方法构建适当的理由。

1 似乎是很多 Rails 人的首选，但我不确定如何明确何时要创建新版本的配方，因为 POST 到特定资源（**/recipes/ultimate-thing**）通常想要创建具有该名称的资源，如果它不存在，是否适合返回类似 404 的内容而不是创建它，并且只发布到**/recipes**以创建新的食谱，然后允许 POST 到**/recipes/ultimate -**创建新版本的东西？另外，如何表示评论？如果没有版本，我可以做类似**/recipes/ultimate-thing/comments 的事情**，但是**/recipes/utlimate-thing/comments?version=latest**看起来很丑，而 2b 确实看起来更明确“最新版本的终极事物配方的评论”，2a 似乎最干净。

事实上，我通常最喜欢 2a，但我很难确定版本是食谱的子资源，因为没有食谱，一个版本**是**食谱，但该食谱的所有版本都应该在逻辑上组合在一起。

我还在 stackoverflow 上看到了 2b，但它似乎过于冗长，因为您一直需要**/recipes/ultimate-thing/version/latest/comments**之类的东西。虽然如果我认为一个版本是一组带有可以注释的说明的成分，而一个食谱是一个具有相似意图的版本的集合，那么这确实是最有意义的。

我真的很喜欢 2a，但是我所缺少的方法是否有一些东西使它成为一个坏主意？我是否遗漏了 1 如何工作的东西，这使得很多人似乎更喜欢它？

或者总是做类似**/recipes/ultimate-thing/latest**或**/recipes/ultimate-thing/2/comments 之类的事情**是否更有意义，即使这使得这些是同一食谱的不同修订版最不明确？

我不确定这是否是一个非常合适的论坛，我只是想讨论一下，所以我明白为什么一种方法会比另一种更好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T22:28:36.720

哇。好问题。我也发现 REST 的最大挑战之一是它是一种风格，而不是严格的规范。这种风格似乎没有被很好地理解，也没有任何东西可以强制它。

简短回答：风格#1：***/recipes/cake?version=2***

这种风格似乎最适合我。只是在快速谷歌搜索之后，我发现查询参数被认为是 URI 的一部分。因此，在 URI 中放置一个标识属性似乎是合适的。

样式 2 和 3 似乎违反了路径段表示 ID 和子资源的其他 REST 约定。因此，样式***/recipes/cake/2***看起来像 ID 为 2 的“蛋糕”资源***。/recipes/cake/version/2***使“版本”看起来是子资源，而实际上它是父资源的属性资源。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T16:30:08.677

我去年年底刚刚实现了这种模式，并结合了 2a 和 2b：

```
2c) Nested resources with versions considered subsets
-- /recipes/ultimate-thing/versions/      -> List of available versions of Ultimate Thing
-- /recipes/ultimate-thing/versions/2     -> Version 2 of Ultimate Thing
-- /recipes/ultimate-thing/versions/latest-> Redirect to current working version of Ultimate Thing 
```

不要将较长的 URI 视为“子资源”或“属性”，就像 URI 标识*事物一样*。*将 URI 视为标识数据*更为自然，而且，由于 HTTP URI 是分层的，较长的 URI 指的*是数据的子集*。集合中的项目是数据：集合中所有数据的子集。“事物”的“属性”是数据：关于该事物的所有数据的子集。“子资源”是关于“事物”的数据，它不独立于其父级而存在，因此是有关父级的所有数据的子集。

在你的情况下，你不必做太多的心理柔道来思考`recipes/cherry-pie/`关于樱桃派是什么以及如何制作的所有数据，而不是特定版本的说明。这包括身份信息和其他非特定于版本的数据，还包括指向 的链接`versions/`，以及指向历史和有趣视频的链接，在这些视频中有人会遇到一个人。然后，URI`recipes/cherry-pie/versions/`是所有版本化的樱桃派数据的子集；一般来说，它只不过是表单中每个 URI 的链接集合`recipes/cherry-pie/versions/{version}/`。我还将包含在`versions/`文档链接中`recipes/cherry-pie/versions/latest/`，该链接会临时重定向到`recipes/cherry-pie/versions/182/`最新版本或任何最新版本。

这对客户来说非常自然。许多人在他们认为资源爆炸的情况下绊倒，并认为可怜的客户可能跟不上。但是，如果您按照自然用户工作流边界划分资源，则不会有问题。一些客户会想要浏览一组食谱；有些会深入到单个配方（无论版本如何）；有些人会向下钻取，想知道有多少个版本，哪个是最新的，并从中进行选择；有些会向下钻取并检索单个版本。如果您想显示单个配方或所有配方的所有版本，您可能做错了什么（在极少数情况下您不是，请设计另一个资源，例如`recipes/byname/pie/quickview`，它收集所有数据并大量缓存它）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-17T17:47:39.163

这完全取决于您如何查看资源版本。这些是否仅用于 wiki 中的历史跟踪，或者版本是单独的资源。在第一种情况下，[EJK 答案](https://stackoverflow.com/a/15123738/565822)似乎是一个很好的解决方案。对于第二种情况，为资源版本/变体创建新的唯一标识符可能是另一种解决方案。例如：

```
3) Resources with versions
-- /recipes/                          -> List of available recipes versions
-- /recipes/ultimate-thing-version-2  -> Version 2 of Ultimate Thing
-- /recipes/ultimate-thing            -> The "offical" version of Ultimate Thing 
```

如果资源是彼此的变体，这甚至是更优选的解决方案：

```
3) List of recipes
-- /recipes/                           -> List of available recipes and variations
-- /recipes/ultimate-thing-with-sugar  -> The Ultimate Thing recipe with sugar
-- /recipes/ultimate-thing-with-honey  -> The Ultimate Thing recipe with honey 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-18T17:36:34.090

我有一个用例，其中每个版本的*创建时间*至关重要。API 必须回答的常见问题是：

1.  最新版本是`/recipes/ultimate-thing`什么？
2.  `/recipes/ultimate-thing`2019-01-01 的最新版本是什么？
3.  `/recipes/ultimate-thing`在 2019-01-01 和 2019-01-31 之间创建了哪些版本？

数字 3\. 在我看来是查询参数的一个明显案例：

```
-- /recipes/ultimate-thing?versions_since=2019-01-01&versions_until=2019-01-31 
```

对 2\. 使用相同的方法可能不会有什么坏处：

```
-- /recipes/ultimate-thing?version=2019-01-01 
```

然后让我们保持一致并为 1 使用相同的方法：

```
-- /recipes/ultimate-thing?version=latest 
```

从这个角度来看，您的选项 1) - 使用查询参数 - 似乎是最自然的。

# javascript - 节点生成子节点和 unref 问题

> ID：15123463
> 
> 赞同：0
> 
> 时间：2013-02-27T22:11:06.620
> 
> 标签：javascript, node.js, process, terminal, command-line-interface

我必须在 Node 中调用一个命令，然后基本上移交给该命令的 stdio，因此在生成子进程并将`stdio`选项设置为时，`inherit`我得到的行为正是我所追求的。

也就是说，父进程一直在运行，直到子进程退出，虽然它可能并不重要，但我真的更喜欢退出父进程，因为它不再需要了。

我发现我可以通过`child.unref()`在生成子进程后立即调用来做到这一点，但是这样做时我会遇到一些非常奇怪的行为。

例如：

```
var child = child_process.spawn('irb', [], {
    detached: true,
    stdio: 'inherit'
  });

child.unref(); 
```

irb repl 正在运行并且父进程已经退出，但是在输入`quit`irb repl 时，我得到了这个：

```
qNameError: undefined local variable or method `uit' for main:Object
    from (irb):1
    from /Users/RayViljoen/.rvm/rubies/ruby-1.9.3-p385/bin/irb:16:in `<main>' 
```

这只是示例之一，将 irb 替换为 node 或 coffee 具有类似的效果。事实上，这个问题似乎与大多数交互式控制台类似，它们作为子进程生成，然后从父进程中删除。

有没有人经历过这个或知道如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:32:55.997

我很确定“继承”选项正在将您的节点进程变成管道，以便将 io 路由到子进程...如果您切断当前进程，则该管道被切断...节点非常有效就管道流量而言，如果您的脚本不是太复杂，您可以在运行子进程之前尽量减少非 GC 对象的数量。我不会太担心让它留下来。

# qt - 如何使（不是全部）树项始终在 QTreeView 中展开？

> ID：15123465
> 
> 赞同：2
> 
> 时间：2013-02-27T22:11:18.183
> 
> 标签：qt, qt4, qt5, qtreeview

如何使（不是全部）树项始终在 QTreeView 中展开？我找不到一个好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T23:38:27.320

你可以试试：

```
tree_item.setExpanded(true)
tree_item.setDisabled(true) 
```

我没有测试过它，但根据文档它应该可以工作。

[http://qt-project.org/doc/qt-4.8/qtreewidgetitem.html#setDisabled](http://qt-project.org/doc/qt-4.8/qtreewidgetitem.html#setDisabled)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:31:09.773

您只需`itemsExpandable`通过调用将属性设置为 false `setItemsExpandable(false)`。此属性保存用户是否可以交互地展开和折叠项目。一旦该属性设置为 false，您展开的任何项目都将无法被用户折叠。

# opencv - 廉价板上的 OpenCV

> ID：15123474
> 
> 赞同：1
> 
> 时间：2013-02-27T22:11:44.220
> 
> 标签：opencv

对于我的高年级项目，我需要一块便宜的板子（不超过 100 美元，不包括运费），它能够运行 OpenCV 相关的网络摄像头，使用的软件也可以具有通用 I/O 引脚。

为此，我购买了树莓派 B 型，但在安装 raspbian OS 后，我注意到即使有时我只移动鼠标，CPU 使用率也是 %100。你认为 Raspberry PI 能够执行这样的 OpenCV 代码吗？该代码在视点中识别具有特定颜色的圆形对象。正如我所说，我还需要使用几个通用 I/O 引脚来连接三个传感器，但我认为这不会有问题。我是否必须对 RPi 进行一些优化才能使我的代码流畅运行？出于我的目的，我不需要显示器、键盘、wifi 或鼠标。

另一个问题，如果您认为 RPi 不适合我的应用程序，您能推荐任何符合规格的板吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T23:12:29.057

覆盆子的 CPU 运行如此之多的事实可能是因为您有一个图形界面。摆脱它（通过重新安装没有它的 raspbian），它应该更快。;)

# vim - 带有文件名的 tmux 选项卡在 vim 中打开

> ID：15123477
> 
> 赞同：32
> 
> 时间：2013-02-27T22:11:58.970
> 
> 标签：vim, tmux

我是 tmux 的新手，正在尝试弄清楚如何编辑配置，以便打开 vim 的窗口显示在任务栏中，而不是显示在 vim`#:vim`中打开的文件的名称
`(ie "#:filename.php")`。似乎这应该是一件常见的事情，但我的搜索 - foo 失败了。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-27T23:37:26.927

这是部分答案。它可以改进，但我现在没有时间解决它。

将以下内容放入您的`.vimrc`:

```
autocmd BufReadPost,FileReadPost,BufNewFile * call system("tmux rename-window " . expand("%")) 
```

还有其他事件（参见`:help autocmd-events`Vim）也可以用来处理。我还没有弄清楚的一件事是，如果您`vim`在两个窗格中的每个窗格中都有一个 open 实例，并且您从一个窗格切换到另一个窗格，那么如何更改窗口名称。`vim`不知道 中的活动`tmux`，因此不会`vim`触发任何事件。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-05T19:33:52.753

有可能的！我想分享这个答案，因为我一直在寻找它很长一段时间。终于有时间自己实现了。将以下内容放入您的`.vimrc`:

```
autocmd BufEnter * let &titlestring = ' ' . expand("%:t")
set title 
```

它将终端标题设置为仅当前焦点`%t`的文档标题（代表没有路径的文档标题）。由于 event `BufEnter`，每次您将焦点切换到另一个文档时，终端标题都会更改。同样在离开 Vim 时，它会变回原来的状态。将（或替换）以下内容放入您的`.tmux.conf`：

```
set-window-option -g window-status-current-format "[#I #W#T]"
set-window-option -g window-status-format "[#I #W#T]" 
```

没有必要完全复制它，但它看起来像这样：

```
[1 vim .tmux.conf][2 bash]... 
```

`I`代表窗口编号。`W`代表正在运行的当前应用程序，代表`T`终端标题。后面我们用来显示当前在 vim 中打开的文件。始终设置终端标题（我的 bash 终端始终显示我不需要在状态栏描述中看到的主机名），因此仅在 vim 运行时显示它，将以下内容添加到您的`.bashrc`：

```
PROMPT_COMMAND='echo -ne "\033]0;\007"' 
```

这对于我使用的 shell bash 来说是正确的。PROMPT_COMMAND 在终端中显示您的提示之前进行评估。echo 命令将终端标题设置为空。因此，每次您从可能已更改标题的应用程序中收到提示时，都会发生此操作。其他 shell 可能需要进行不同的配置...

`tmux rename-window`只要窗口存在，我就不会使用它设置标题。您需要在每次应用程序启动时调用它。所提出的方法使事情保持动态，因为它适用于一个窗口中的多个窗格以及在 vim 中打开的多个分屏/文件。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-04-17T07:42:07.270

感谢伟大的输入家伙它节省了我很多打字:-)

我将之前的两个答案合二为一，我喜欢。

```
autocmd BufEnter * call system("tmux rename-window " . expand("%:t"))
autocmd VimLeave * call system("tmux rename-window bash")
autocmd BufEnter * let &titlestring = ' ' . expand("%:t")                                                                 
set title 
```

第一行和第二行用于 tmux，第三和第四行用于正常终端使用。您不必重新启动 tmux，因为它是显式更新 tmux 的 vim。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-06-17T08:56:10.403

并在 Vim 退出时恢复自动窗口标题：

```
autocmd VimLeave * call system("tmux setw automatic-rename") 
```

我还建议检查我们是否在 tmux 下运行：

```
if exists('$TMUX')
    autocmd BufEnter * call system("tmux rename-window '" . expand("%:t") . "'")
    autocmd VimLeave * call system("tmux setw automatic-rename")
endif 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-10T19:00:52.523

这里有很好的答案，但我仍然无法让它按照我想要的方式工作，即：1）在打开 vim 时更改 TMUX 窗口名称 2）在退出时。完成后将其返回到以前的名称我使用以下 3 vimrc 行实现了它：

```
autocmd BufReadPost,FileReadPost,BufNewFile * call system("tmux rename-window " . expand("%:t"))
let tmuxtitle = system("tmux display-message -p '#W'")
autocmd VimLeave * call system("tmux rename-window " . shellescape(tmuxtitle)) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-05-10T01:05:52.940

作为设置 tmux 窗口名称的其他答案的替代方法，您可以让 vim 设置 tmux 窗格标题。`tmux new-window -n <window-name>`这使您可以在 vim 更改窗格标题时保留您定义的静态窗口名称。您可以使用`#T`in`set-titles-string`显示窗格标题，例如`set-option -g set-titles-string "#W: #T"`将显示 tmux 窗口名称和窗格标题。

用于更改窗格标题的示例 vim 配置：

```
" Teach vim the tmux escape sequences for changing pane title
" Note the "^[" should be a literal escape code (use `^v<esc>` to enter it)
set t_ts=^[]2;
set t_fs=^[\\

" Turn on setting the title.
set title

" The following causes vim to refresh the title each time we change buffers.
" Otherwise it will only set the title once at startup.
augroup RefreshTitle
  autocmd!
  " The concatenation of the colon is a hack to prevent vim from
  " interpreting the string as a modeline.
  autocmd BufEnter * let &titlestring = "vim" . ":" . expand("%:t")
augroup END 
```

[感谢](http://vim.wikia.com/wiki/Automatically_set_screen_title)vim.wikia.com的自动命令`t_ts`和`t_fs`指导和[phluk](https://stackoverflow.com/a/29693196/197789)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-06-07T21:40:46.587

感谢这里所有的好答案！

这是这些方法加上一些 bash（在使用窗格时重命名窗口）的组合，我用来创建没有索引号或其他符号的标题名称，尽管它可以用于任何所需的格式。

```
basePath/   -> at the prompt
fileName    -> inside Vim 
```

* * *

##### ~/.tmux.conf

允许通过下面的 .vimrc 和 .bashrc 配置文件重命名窗口标题，并将标题格式设置为仅显示名称。

要保留索引号，请将 window-status-format 和 window-status-current-format 行更改为“#I:#W”。有关“格式”和“变量名称”下的更多选项，请参见 tmux 手册页。

```
set -g allow-rename on
set-window-option -g window-status-format "#W"
set-window-option -g window-status-current-format "#W" 
```

特定于没有索引号的配置，您可以将选项卡创建和移动绑定设置为更像浏览器和 Vim。

```
# Create window -- Ctrl + t 
# Navigate windows -- Ctrl+ h,l 
bind -n C-t new-window
bind -n C-h previous-window
bind -n C-l next-window 
```

* * *

##### ~/.vimrc

输入 Vim 并保存文件时，将窗口标题设置为文件名。

```
if exists('$TMUX')
    autocmd VimEnter,BufWrite * call system("tmux rename-window ' " . expand("%:t") . " '")
endif 
```

* * *

##### ~/.bashrc

我使用 bash 而不是 tmux 中的自动重新格式化选项，以便将窗口标题重命名为活动窗格（如果适用）。我还将标题重命名为在此处退出 Vim 时的基本路径。

```
# If Tmux running...
tmux ls > /dev/null 2>&1
TMUX_STATUS=$?
if [ $TMUX_STATUS -eq 0 ]; then

    # Create function to get pwd, trim to "basepath/", 
    # and rename window
    basepathTitle () {
        getval=$(pwd)
        BASEPATH_TITLE=" ${getval##*/}/ "
        tmux rename-window "$BASEPATH_TITLE"
    }

    # Change cd functionality to rename window title to
    # pwd after every directory change
    cd () {

        builtin cd "$@"
        CD_STATUS=$?

        basepathTitle

        return "$CD_STATUS"
    }

    # Change vim functionality to change title 
    # back to basepath on close
    vim () {

        /usr/bin/vim "$@"
        VIM_STATUS=$?

        basepathTitle

        return "$VIM_STATUS"
    }

    # Set window title when tmux starts
    basepathTitle

fi 
```

* * *

##### 源 tmux.conf

```
tmux source-file ~/.tmux.conf 
```

* * *

##### 来源 .bashrc

```
. .bashrc 
```

* * *

# java - Java 异常：ThreadPoolExecutor$Worker 与 com.myco.TaskListEntry 不兼容

> ID：15123481
> 
> 赞同：1
> 
> 时间：2013-02-27T22:12:08.130
> 
> 标签：java, multithreading, naming

在 Java 中，我得到一个强制转换异常：

```
java.lang.ClassCastException: java.util.concurrent.ThreadPoolExecutor$Worker
incompatible with com.myco.TaskListEntry
at com.myco.JobThreadFactory.newThread(JobThreadFactory.java:17) 
```

这是代码：

```
public class JobThreadFactory implements ThreadFactory {
    @Override
    public Thread newThread(Runnable r) {
        TaskListEntry entry = (TaskListEntry)r;   //<== Cast exception!
        return new Thread(r, "Thread for " + entry.toString());
    }
}

@DisallowConcurrentExecution
public class WorksheetSessionJob implements Job {
    private List<TaskListEntry> taskListEntries;

    @Override
    public void execute(JobExecutionContext jobContext) throws JobExecutionException {
        ThreadFactory threadFactory = new JobThreadFactory();
        ExecutorService executor = Executors.newCachedThreadPool(threadFactory);
        for( TaskListEntry nextEntry : getWorkListEntries() ) {
            executor.execute(nextEntry);
        }
    }

    private List<TaskListEntry> getWorkListEntries() {
        List<TaskListEntry> entries = new ArrayList<TaskListEntry>();

        // TODO Get rows from DB - for now, make something up to test with
        //-- beginning of fake data creation ----------
        TaskListEntry entry = new TaskListEntry("0022", "04590150560", "DI_MODULAR", 1);
        entries.add(entry);
        entry = new TaskListEntry("0007", "04590150560", "DI_MODULAR", 2);
        entries.add(entry);
        //-- end of fake data creation ----------------

        return entries;
    }

}

public class TaskListEntry implements Runnable {
    private String  worksheetNumber;
    private String  specimenNumber;
    private String  instrumentName;
    private int     id;

    public TaskListEntry(String worksheetNumber, 
            String specimenNumber, String instrumentName, int id) {
        super();
        this.worksheetNumber = worksheetNumber;
        this.specimenNumber = specimenNumber;
        this.instrumentName = instrumentName;
        this.id = id;
    }

    @Override
    synchronized public void run() {
        // executor in my Job should have created a thread for me to run in
        //-- TESTING ONLY -------------
        try {
            Thread.sleep(10000);    //force execution to another thread?
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        //-- END OF TESTING -----------
    }

} 
```

为什么没有发送我的 TaskListEntry 可运行文件？我需要使用该类中的值来命名相应的线程。我究竟做错了什么？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T22:13:59.617

您遇到了演员问题，因为当调用线程工厂时，您`Runnable`与`ThreadPoolExecutor$Worker`该类无关。这`Worker` `Runnable`是一个内部执行器类，它从`BlockingQueue`保存您的`TaskListEntry`实例的内部中取出任务。您的任务无法通过设计与特定线程相关联。如果您将 100k 任务提交到队列中，您不会希望它产生 100k 线程——这就是使用线程池的全部意义所在。

If you are trying to somehow track which threads are processing which tasks, I would suggest logging the thread-id (`Thread.currentThread().getId()`) inside of the `TaskListEntry.run()` method. But if you are trying to see each task somehow in the thread-names, you aren't understanding how the thread-pool works. Typically, I use a `ThreadFactory` to set the name on pool threads to identify the pool name. Something like `"TaskListEntry pool-1"` or something would be an appropriate thread-name here.

If you explain more about what you are trying to accomplish with regards to the names, we may be able to provide more help.

# python - 在 Amazon EC2 上启动 http-server

> ID：15123492
> 
> 赞同：6
> 
> 时间：2013-02-27T22:12:39.337
> 
> 标签：python, amazon-web-services, amazon-ec2

我正在尝试在 Amazon EC2 实例上设置和访问一个简单的 Python http-server。服务器在 localhost:80 下本地工作，但我无法让它在 EC2 实例上工作。

我将一个弹性 IP 连接到实例，它至少可以访问该 IP 上的 ssh。

我认为问题在于我错误地设置了 HTTPServer 的 server_address： [Python HTTPServer 文档](http://docs.python.org/2/library/basehttpserver.html#BaseHTTPServer.HTTPServer) 由于我真的不知道，我在家里配置了路由器以将 HTTP 请求转发到计算机的本地 IP，192.168.1。 xx

我认为这可能是一个安全组问题，所以我添加了源为 0.0.0.0/0 的入站 HTTP（我认为应该允许所有传入的 IP）并设置端口 80 而没有任何更改选项。

另外，我认为在 80 端口上运行 sudo 下的服务器脚本是一个潜在的安全风险。有没有办法在另一个端口（如 8080 而不是 80）下转发请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:10:05.363

对于安全组，您可以创建允许端口 8080 的规则（执行“自定义 TCP 规则”，然后将 8080 作为端口范围）。

听起来您的 HTTPServer 很可能绑定到环回。我会将地址设置为 0.0.0.0（所有接口），将端口设置为 8080，然后在您的安全组上打开 8080。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T11:00:07.703

从安全的角度来看，在常规 http 服务器后面运行脚本可能会更好。

这是 NginX 的配置[，](http://nginx.org)可以帮助您入门（将此文件放入 中`/etc/nginx/conf.d/`）：

```
upstream myscript  {
  server localhost:8080;
}

server {
    server_name _;
    listen 80;
    location = / {
        proxy_pass  http://myscript;
    }
} 
```

在此设置中，您在端口 8080 上运行脚本（用于在您的 python 脚本`server_address = ('localhost', 8080)`中配置您的脚本）。`HTTPServer`

因此，当查询在端口 80 上命中 nginx 时，它会将其转发到您的脚本负责的本地主机端口 8080。

# java - 将参数/参数传递给 OnClickListener()

> ID：15123498
> 
> 赞同：0
> 
> 时间：2013-02-27T22:13:06.010
> 
> 标签：java, android, onclicklistener

我是 Android 新手，我仍在努力理解其中一些概念，所以如果我不得不要求经常澄清，我很抱歉。

我正在尝试覆盖/创建我自己的`OnClickListener`. 但是，我收到这个错误，说`startActivity(Intent)`我的班级未定义......我无法弄清楚为什么我会收到这个错误。

```
import android.content.ActivityNotFoundException;
import android.content.Intent;
import android.net.Uri;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;

public class ContactOCL implements OnClickListener {
    String contactInfo;
    public ContactOCL(String contactInfo) {
        this.contactInfo = contactInfo;
    }

    public void onClick(View v) {
        try {
            Intent callIntent = new Intent(Intent.ACTION_CALL);
            callIntent.setData(Uri.parse("tel:" + contactInfo));
            startActivity(callIntent); // Error here
        } catch (ActivityNotFoundException activityException) {
            Log.e("Calling a Phone Number", "Call failed", activityException);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T22:19:55.370

由于您已经`View`传递了 to `onClick()`，因此无需将 Activity 也传递给封闭类。做就是了：

```
v.getContext().startActivity(callIntent); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T22:17:13.283

要开始一项活动，您需要一项活动。

一种解决方案是将您的活动传递给您的 ContactOCL 类

```
public ContactOCL(Activity activity, String contactInfo) {
    this.contactInfo = contactInfo;
    this.activity = activity;
} 
```

然后开始活动，你使用

`activity.startActivity(callIntent);`

然后，当您创建此 ContactOCL 类时，您可以通过添加活动参数来做到这一点，例如：（`new ContactOCL(this, contactInfo);`我假设您从活动类创建 ContactOCL）

编辑：虽然我的解决方案适用于一般情况，但对于这种特殊情况，没有必要这样做，因为您可以从视图中访问活动。相反，请参阅[A--C here 建议的解决方案](https://stackoverflow.com/questions/15123498/passing-arguments-parameters-to-onclicklistener/15123601#15123601)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T22:31:42.850

这个类将作为一个内部类工作`Activity`- 只需将其放入并删除`public`类修饰符：

```
public class MyActivity extends Activity
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    class ContactOCL implements OnClickListener {
        String contactInfo;
        public ContactOCL(String contactInfo) {
            this.contactInfo = contactInfo;
        }

        public void onClick(View v) {
            try {
                Intent callIntent = new Intent(Intent.ACTION_CALL);
                callIntent.setData(Uri.parse("tel:" + contactInfo));
                startActivity(callIntent); // No Error here
            } catch (ActivityNotFoundException activityException) {
                Log.e("Calling a Phone Number", "Call failed", activityException);
            }
        }

    }
} 
```

# c++ - 当用户在地铁时，桌面应用程序需要焦点

> ID：15123504
> 
> 赞同：5
> 
> 时间：2013-02-27T22:13:32.577
> 
> 标签：c++, windows, microsoft-metro, focus

我有一个桌面应用程序（非 Metro）。在某些紧急情况下（可能意味着生死），我需要让用户回到我的应用程序桌面。如果用户在 Metro 风格应用程序中，我如何将注意力重新集中到我的应用程序上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T10:06:32.660

在 MSDN 上找到了这个很棒的示例代码。

它会检查 Windows 8 开始屏幕是否可见。一探究竟。

```
PCWSTR const _GetMonitorAppVisibilityString(MONITOR_APP_VISIBILITY monitorAppVisibility)
{
    PCWSTR pszAppVisibilityString = nullptr;
    switch (monitorAppVisibility)
    {
        case MAV_NO_APP_VISIBLE:
            pszAppVisibilityString = L"no apps visible";
            break;

        case MAV_APP_VISIBLE:
            pszAppVisibilityString = L"a visible app";
            break;

        case MAV_UNKNOWN:
        __fallthrough;
        default:
            pszAppVisibilityString = L"unknown";
            break;
    }
    return pszAppVisibilityString;
} 
```

按照此链接下载完整的示例 c++ 代码 (Visual C++ 2012/13)： [http ://code.msdn.microsoft.com/windowsdesktop/Start-screen-visibility-b1a72059](http://code.msdn.microsoft.com/windowsdesktop/Start-screen-visibility-b1a72059)

# css - 使用 :hover、:visited 和 :active 为 4 个不同的 div 设置样式

> ID：15123505
> 
> 赞同：1
> 
> 时间：2013-02-27T22:13:33.590
> 
> 标签：css, html, styling

我希望有人可以帮助我解决这个问题。

我得到了这个 HTML：

```
<a href="http://test"><div id="topleftbox"></div></a>
<a href="http://test"><div id="toprightbox"></div></a>
<a href="http://test"><div id="bottomleftbox"></div></a>
<a href="http://test"><div id="bottomrightbox"></div></a> 
```

我用这样的背景图像来设置这些 div 的样式：

```
#topleftbox {
  background: url(../img/images/layout_03.jpg);
  background-repeat: no-repeat;
  width: 229px;
  height: 228px;
  float: left;
  }

 #topleftbox:hover {
  background: url(../img/hoverimages/layout_03.jpg);
  } 
```

我悬停在新图像上的作品。是否可以添加 :visited 和 :active 以便在单击/访问上一个链接/图像后永久显示新的（悬停）图像？

谢谢

* * *

jsfiddle.net/AcvbG - 现在可以使用颜色。奇怪的是没有背景图片..

我的目标是：`When clicking,hovering the #leftbox`背景图像必须更改为另一个，使用:visited、:hover 和:active。

有人知道解决方案吗？还是我必须使用javascript（知识有限）谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:20:19.867

~~我不相信那些伪类会做你想做的事。
[http://www.w3.org/TR/CSS2/selector.html#dynamic-pseudo-classes](http://www.w3.org/TR/CSS2/selector.html#dynamic-pseudo-classes)~~

> :active 伪类在用户激活元素时应用。例如，在用户按下鼠标按钮并释放它的时间之间。
> 
> :visited 伪类在用户访问链接后应用。

~~如果您愿意使用 javascript，那么有一些选择。~~

编辑：

您可能会将您的`<a>`标签设置为像您的 div 一样，并且只需更改它们的背景。这是完全可行的。

[http://jsfiddle.net/AcvbG/](http://jsfiddle.net/AcvbG/)

# sql - 选择使用案例显示所有结果

> ID：15123506
> 
> 赞同：0
> 
> 时间：2013-02-27T22:13:34.340
> 
> 标签：sql, sql-server

表中的两个字段`articles`：

`title`和`body`

两条记录：

`meow bark | 1234 5678`和`bird snake | 8596 2952`

Where `meow bark`is under`title`和`1234 5678`is under`body`等...

**SQL查询：**

```
SELECT *, 
       CASE WHEN title = 'meow' then 1 else 0 end + CASE WHEN title = 'bark' then 1 else 0 end AS matches 
FROM  articles 
ORDER BY matches DESC 
```

返回两行。请帮助我理解我的语法有什么问题。我希望它只返回标题与查询中的内容匹配的行。除非我不明白 CASE 是如何工作的，否则如果上面示例中的标题与 meow 或 bark 匹配，它应该显示 - 否则，不显示。

目标是根据大多数匹配返回结果。看看这里的小提琴：[http ://sqlfiddle.com/#!3/13b33/10](http://sqlfiddle.com/#!3/13b33/10)

我稍微修改了一下，但没有想到足以打破它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:16:56.513

如果要排除行，则需要将其放在 WHERE 子句而不是 SELECT 子句中。

此外，您使用的比较是*equivalence*。如果该列包含您的搜索值，这将不会“匹配”，正如您似乎认为的那样，但前提是该列*具有完全相同的文本并且没有其他内容*（有一些小的整理余量）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T22:19:12.657

不确定您想要实现什么...您希望返回什么

这可能更接近你想要的

```
SELECT *, 
       matches = CASE WHEN title LIKE '%meow5' THEN 1 ELSE 0 END + CASE WHEN title LIKE '%bark5' THEN 1 ELSE 0 END  
FROM   articles 
ORDER BY matches desc 
```

**OP 更新后**编辑****

 **`WHERE`如果您只想返回一些记录，请尝试使用该子句：

```
SELECT *
FROM   articles 
WHERE  title LIKE '%meow%' 
       OR 
       title LIKE '%bark%'
ORDER BY matches desc 
```

**最终编辑**

[试试这个小提琴](http://sqlfiddle.com/#!3/1e37c/10)

万一小提琴过时了，这里是脚本：

```
CREATE TABLE  YourTable (FieldToSearch varchar(max));
INSERT INTO YourTable 
VALUES
('If there were a dog'),
('If there was a dog'),
('If that dog died!'),
('I''d be happy with cat');

SELECT x.*
FROM   (
       SELECT FieldToSearch, 
       CASE WHEN ' ' + FieldToSearch + ' ' like '% if %' then 1 else 0 end
       + CASE WHEN ' ' + FieldToSearch + ' ' like '% there %' then 1 else 0 end 
       + CASE WHEN ' ' + FieldToSearch + ' ' like '% was %' then 1 else 0 end
       + CASE WHEN ' ' + FieldToSearch + ' ' like '% a %' then 1 else 0 end
       + CASE WHEN ' ' + FieldToSearch + ' ' like '% dog %' then 1 else 0 end AS matches
      FROM YourTable
      )x
WHERE x.matches >0
ORDER BY x.matches DESC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:22:43.737

您没有在查询中提到 where 子句，它将获取所有记录，除非您使用 where 条件过滤它们**

# html - 使用 :hover 时 css 的意外行为，发生了什么？

> ID：15123509
> 
> 赞同：0
> 
> 时间：2013-02-27T22:13:42.853
> 
> 标签：html, css, css-transitions

我发现了这个`:hover`效果的一个问题，这是我以前从未见过的。当我`:hover`在 div“框”上时……这会改变背景的一部分……

谢谢 ！

**部分的 CSS**

```
.first { background:#fff; width:100%; height:auto; position:relative;}     

.second {background-image:url(../images/body/1.jpg); background-attachment:fixed;width:100%; height:auto; position:relative; display:inline-block;} 
```

**HTML**

```
<div class="span4 one">
    <i class=" icon-4x icon-beaker">
    </i>
    <h2>
        Awesome
    </h2>
    <p>
        Donec sed odio dui. Etiam porta sem malesuada magna mollis euismod. Nullam
        id dolor id nibh ultricies vehicula ut id elit. Morbi leo risus, porta
        ac consectetur ac, vestibulum at eros. Praesent commodo cursus magna, vel
        scelerisque nisl consectetur et.
    </p>
    <button type="submit">
        shown more
    </button>
</div> 
```

**盒子的 CSS**

```
 .boxes .span4{text-align:center; padding:10px 0; display:inline;
    -webkit-transition: all 300ms linear;
       -moz-transition: all 300ms linear;
         -o-transition: all 300ms linear;
        -ms-transition: all 300ms linear;
            transition: all 300ms linear;}

==>.boxes .span4:hover {background: rgba(51,153,255,0.1);}<=== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:26:34.980

它看起来不像`background-attachment: fixed;`直线平移（它基本上改变了背景图像的固定位置，具体取决于它上面在 Y 轴上平移的元素）

# php - 登录表单：不重定向到允许的页面

> ID：15123514
> 
> 赞同：0
> 
> 时间：2013-02-27T22:14:04.450
> 
> 标签：php, forms, login

首先，英语不是我的母语，而且已经很晚了，我从中午开始搜索这个。所以，请放纵。

我对一个简单的登录表单有疑问。嗯，这个登录表单是如此简单，我以为我不会有任何问题......

**我做了什么：** 所以，我创建了一个包含登录表单的页面 index.php。发送时，脚本验证字段是否填写，连接到数据库，检查数据库中的数据，如果密码和登录名正确，则启动 $_SESSION 并填写 $_SESSION['login]。然后它通过 session_start 和对 $_SESSION['login'] 的检查将用户重定向到具有后台内容的页面。从理论上讲，它会起作用。

但不是。

**问题是什么：** 当我在登录表单中输入信息并发送它时，相同的页面会重新加载并且不会将我重定向到后台页面。零错误启动

**我的代码：** *index.php*

```
<?php 
    include('functions.php');
    login();
 ?>
 <!DOCTYPE html>
 <head>
 ...
 </head>
 <body>

<div id="main">
 <h2>Authentification</h2>
 <form name="iam" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>" >
   <label for="login" class="iconic comment"> Login <span class="required">* </span>
   </label>
   <input type="text" required="required" name="login" id="login">
   <label for="mdp" class="iconic comment"> Password <span class="required">* </span>
   </label>
   <input type="password" required="required" name="mdp" id="mdp">
   <input type="submit" name="Submit" value="Submit">
 </form>
</div>
</body> </html> 
```

login() 进入*functions.php*：

```
<?php
include_once('conf/connec.php');
$connect_db=connect();

function login() {

        if(isset($_POST['Submit'])) {

            if(!empty($_POST['login']) && !empty($_POST['mdp'])) {

                $query = mysql_query("SELECT mdp, login FROM 2K13_id WHERE login = '".md5($_POST['login'])."'");

                if(mysql_num_rows($query) == 1) {
                    $user = mysql_fetch_object($query);

                    // On vérifie la concordance des mots de passe (en md5)
                    if(md5($_POST['mdp']) == $user->mdp) {     
                        session_start();
                        $_SESSION['login'] = $user->login;
                        header("Location:backoffice.php");

                    } else {
                        echo 'Mauvais mot de passe pour cet utilisateur.';
                    }

                } else {
                    echo 'Ce login n\'existe pas dans notre base.';
                }
            } else {
                echo 'Vous devez remplir tous les champs !';
            }
        }
    }

?> 
```

*以及我backoffice.php*中每个 html 声明之前的一堆代码：

```
<?php
session_start();
    if(!isset($_SESSION['login'])) {
        die("NO PASARAN");
    } 
```

我真的不知道我为什么要转身：我检查了所有密码和登录名，每个标题。（为了避免标题可能出现的问题，我什至尝试使用脏 js 包含

```
echo '<script>document.location = "backoffice.php"</script>'; 
```

我有点绝望，所以如果你能帮助我或者只是打开一个可能的错误/php错误的灯，我会非常感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:30:48.927

尝试关闭您的输入标签。代替

```
<input type="text" required="required" name="login" id="login">
<label for="mdp" class="iconic comment"> Password <span class="required">* </span>
</label>
<input type="password" required="required" name="mdp" id="mdp">
<input type="submit" name="Submit" value="Submit"> 
```

写

```
<input type="text" required="required" name="login" id="login" />
<label for="mdp" class="iconic comment"> Password <span class="required">* </span>
</label>
<input type="password" required="required" name="mdp" id="mdp" />
<input type="submit" name="Submit" value="Submit" /> 
```

Also, check to see if you are entering `if` with header redirect. You must not have any html output before it, including empty space. And url should normally be absolute, not relative, so add `http://...`

# c# - 使用 Simple Injector abd WebFormsMVP 将运行时值传递给构造函数

> ID：15123515
> 
> 赞同：6
> 
> 时间：2013-02-27T22:14:09.430
> 
> 标签：c#, .net, dependency-injection, simple-injector, webformsmvp

我正在尝试将**SimpleInjector 与 WebFormsMvp**结合起来。

为方便 DI WebFormsMvp 提供了`IPresenterFactory`接口。
它包含`Create`提供**要解析的演示者类型**和**视图实例**的方法。
我需要将**视图实例注入到****Presenter**的**构造**函数**中**。 演示者还有**其他****需要**由**容器**创建的依赖项。

 ******这是我到目前为止得到的，但并不理想。
问题的**正确解决方案**是什么？

演示者构造函数：

```
public FooPresenter(IFooView view, IClientFactory clientFactory) : base(view) 
```

工厂：

```
public class SimpleInjectorPresenterFactory : IPresenterFactory
{
    private readonly Container _container;
    private IView _currentView;

    public SimpleInjectorPresenterFactory()
    {
        _container = new Container();

        Func<Type, bool> isIView = 
            type => typeof(IView).IsAssignableFrom(type);

        _container.ResolveUnregisteredType += (s, e) => {
            if (isIView(e.UnregisteredServiceType))
                e.Register(() => _currentView);
        };
    }

    public IPresenter Create(Type presenterType, Type viewType, IView viewInstance)
    {
        lock (_currentView)
        {
            _currentView = viewInstance;
            return _container.GetInstance(presenterType) as IPresenter;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T00:22:39.843

WebFormsMvp 强制您在演示者的构造函数中获取视图，但这会触发循环引用。如果您查看不同容器的工厂实现，您会发现对于每个容器，它们使用不同的技巧来解决设计中的这个怪癖。例如，通过统一，他们创建一个子容器并在子容器中注册该视图，并使用该子容器解析演示者。相当奇怪和性能沉重。

WebFormsMvp 的设计者应该将 View 设置为`IPresenter`界面上的可写属性，而不是在 Presenter 的构造函数中获取视图。这将使在演示者上设置视图变得非常容易。像这样的东西：

```
public IPresenter Create(Type presenterType, IView view)
{
    var presenter = (IPresenter)_container.GetInstance(presenterType);
    presenter.View = view;
    return presenter;
} 
```

不幸的是，他们没有这样做，并且不可能扩展设计以允许这样做（不使用反射做真正令人讨厌的事情）。

Simple Injector 不支持为`GetInstance()`方法提供构造函数参数。有充分的理由，因为这通常会导致服务定位器反模式，您总是可以通过更改设计来解决这个问题。在你的情况下，你没有做出那个古怪的设计，所以你不能改变它。

你所做的`ResolveUnregisteredType`非常聪明。我自己不会想到这个。而且由于我是 Simple Injector 背后的首席开发人员，我可以说你所做的非常聪明 :-)

关于您的`SimpleInjectorPresenterFactory`.

首先，您应该提供`Container`as 构造函数参数，因为您很可能需要向容器添加其他注册，并且您不想`Container`在`SimpleInjectorPresenterFactory`.

其次，您可以使用`System.Threading.ThreadLocal<IView>`. 这使您可以摆脱全局锁定。锁定可防止任何演示者同时进行，这可能会降低您的网站速度。

所以这是一个重构版本：

```
public class SimpleInjectorPresenterFactory : IPresenterFactory {
    private readonly Container _container;
    private ThreadLocal<IView> _currentView = new ThreadLocal<IView>();

    public SimpleInjectorPresenterFactory(Container container) {
        _container = container;

        _container.ResolveUnregisteredType += (s, e) => {
            if (typeof(IView).IsAssignableFrom(e.UnregisteredServiceType)) {
                e.Register(() => _currentView.Value);
            }
        };
    }

    public IPresenter Create(Type presenterType, Type viewType, 
        IView viewInstance)
    {
        _currentView.Value = viewInstance;

        try {
            return _container.GetInstance(presenterType) as IPresenter;
        } finally {
            // Clear the thread-local value to ensure
            // views can be disposed after the request ends.
            _currentView.Value = null;
        }
    }
} 
```

如果您查看 的实现`UnityPresenterFactory`，您会看到其中正在进行大量缓存。我不知道他们为什么这样做，但从性能的角度来看，对于 Simple Injector，你根本不需要这样的东西。也许我错过了一些东西，但我不明白为什么应该有缓存。

但更糟糕的是，在`UnityPresenterFactory`. 看看这个方法：

```
private Type FindPresenterDescribedViewTypeCached(Type presenter, 
    IView view) 
{
    IntPtr handle = presenter.TypeHandle.Value;
    if (!this.cache.ContainsKey(handle)) 
    {
        lock (this.syncLock)
        {
            if (!this.cache.ContainsKey(handle))
            {
                Type viewType = CreateType(presenter, view);
                this.cache[handle] = viewType;
                return viewType;
            }
        }
    }
    return this.cache[handle];
} 
```

乍一看，这段代码看起来不错，因为实现了双重检查锁。不幸的是，缓存（字典）是从锁外部读取的，而它是在锁内部更新的。这不是线程安全的。相反，开发人员应该将整个东西包裹在锁中，使用`ConcurrentDictionary`（仅限.net 4）或考虑`cache`不可变，这意味着您创建原始字典的副本，添加新值，并将引用替换为旧词典与新词典。但是，在这种情况下，我可能会锁定整个事情。

这有点离题，但只是想告诉:-)******

# c++ - C ++按位与按成员复制？

> ID：15123516
> 
> 赞同：5
> 
> 时间：2013-02-27T22:14:18.930
> 
> 标签：c++, copy-constructor

按位复制和按成员复制有什么区别？当然，如果您复制成员，那么您最终还是会复制代表成员的位？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T22:20:35.057

```
class MyClass
{
public:
    MyClass () : m_p (new int (5)) {}
    ~MyClass () {delete m_p;}
    int* m_p;
};

MyClass a;
MyClass b;
memcpy (&a, &b, sizeof (a)); 
```

我只是通过重写它的成员变量而不先释放它而泄漏了“a”中分配的int。现在 'a' 和 'b' 有一个 m_p 指向相同的内存位置，并且两者都会在销毁时删除该地址。第二次尝试删除该内存将崩溃。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T22:27:32.900

*   按位复制：将对象的对象表示复制为未解释的字节序列。
*   成员复制：根据对象的类型复制对象的每个子对象。对于具有非平凡复制构造函数的对象，这意味着调用复制构造函数。对于普通可复制类型的子对象，这意味着按位复制。

两者都是相同的，因此如果所有子对象都是可平凡复制的，则整个对象都是可平凡复制的。（类（子）对象也不能有虚成员函数或虚基类。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T22:16:52.247

如果您正在二进制复制对象，则可能存在不应复制的内部结构，例如引用计数器。按位复制会破坏这一点。成员副本将使用正确的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T22:19:05.917

当按位复制引用或指针类型成员时，您可能会遇到麻烦。取决于您真正需要什么，并且可以通过对结果类实例进行浅拷贝或深拷贝来处理。

# php - 移动网站/应用程序

> ID：15123517
> 
> 赞同：1
> 
> 时间：2013-02-27T22:14:20.677
> 
> 标签：php, html, mobile, smartphone

我正在一个项目中创建一个应用程序表单来表示各种实时功率数据。数据已经在线（在网站上）可用。因此，在某种程度上，我正在制作该网站的应用程序版本。但是，我无法访问任何后端，这意味着我没有任何 PHP 协议可以将实时数据发送到我的应用程序。我已经尝试下载整个网站，但是网站上有一个隐藏的 php 文件，所以下载的网站版本不显示任何数据。

所以我遇到了障碍，我想做这项工作，但我什至不知道如何开始。

我已经考虑使用工具将网站转换为移动网站，但这需要修改它自己的基本网站（我没有访问权限）。

如果我要从头开始编写应用程序，那么我更喜欢 HTML 5 用于跨平台，但原生也可以。

总的来说，我被困住了，如果有人有任何制作移动网站、基于应用程序的网站等的经验，可以提供一些意见。如果给我一个不可能完成的任务，请告诉我。然后我可以告诉我的教授并解决一些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-20T09:27:17.620

你为什么不使用 AJAX 呢？

您必须编写一个返回所需 HTML 的视图。

例如：“ [http://yourserver/yourphp.php](http://yourserver/yourphp.php) ”

在您的应用程序中，您可以使用 Apache Cordova 管理 webview，并使用此功能将该文本响应（您的 HTML）附加到您的应用程序主体

```
function httpGet(yourUrl){
    xmlHttp = new XMLHttpRequest();
    xmlHttp.open( "GET", yourUrl,);
    xmlHttp.send( null );
    return xmlHttp.responseText;
} 
```

# ruby-on-rails - 创建具有从 Rails 传递的隐藏字段值的对象

> ID：15123520
> 
> 赞同：2
> 
> 时间：2013-02-27T22:14:38.893
> 
> 标签：ruby-on-rails, angularjs

我对 Angular 很陌生，所以我如何接近这个可能是完全错误的，但是一些关于这个方向的一般性建议将不胜感激。我正在尝试做的或多或少是使用 Angular 创建新的“喜欢”对象（类似于 facebook 的“喜欢”）。它们包含两个值，user_id（以前由 rails 通过 devise 的辅助方法设置为 current_user.id）和 post_id。

我的问题：

*   current_user 在 Angular 的 ng-controller 中不可访问
*   您不能像这样直接在表单中提供默认输入值：

`

```
<input type="text" value="<%= current_user.id %>" ng-model="newLike.user_id" > 
```

所以或多或少我要问的是，我怎样才能设法为 user_id 和 post_id 设置输入的默认值。我遇到了使用 ng-init 的建议，但是，从我所看到的一切看来，这似乎只允许从角度控制器设置默认输入值

编辑：

我花了很长时间才意识到将变量作为参数传递给 addLike，所以我成功地根据 current_user.id 和 act.id 创建了新对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T21:21:00.637

**Rails方式** 您可以在.html.erb（或.js.erb）中编写初始化全局/传递参数值为current_user.id的javascript代码

**Angular 方式** 在这里使用 ng-init 是完美的（比 rails 方式更好）。正如 Mark Rajcok 所评论的，ng-init 可以像这样从您的 HTML 中使用：

```
<input type="text" ng-init="newLike.user_id='<%= current_user.id %>'" ...> 
```

# php - json编码二维数组

> ID：15123522
> 
> 赞同：0
> 
> 时间：2013-02-27T22:14:48.943
> 
> 标签：php, javascript, jquery

我在php中有以下内容：

```
$query = mysql_query($sql);
$rows = mysql_num_rows($query); 
$data['course_num']=$rows;
$data['course_data'] = array();
while ($fetch = mysql_fetch_assoc($query) )
{

    $courseData = array(
    'course_name'=>$fetch['course_name'],
    'training_field'=>$fetch['training_field'],
    'speciality_field'=>$fetch['speciality_field'],
    'language'=>$fetch['language'],
    'description'=>$fetch['description'],
    'type'=>$fetch['type'],
    );

    array_push($data['course_data'],$courseData);
}

echo json_encode($data); 
```

当我在 jquery 中收到此脚本的结果时（使用 post）

我使用以下方式记录它：

```
console.log(data['course_data']); 
```

输出是：

```
[Object { course_name="Introduction to C++",  training_field="Engineering" ,  speciality_field="Software",  more...}] 
```

但我似乎无法弄清楚如何访问这些元素。

我试过

```
data['course_data'].course_name

data['course_data']['course_name'] 
```

没有任何效果。有任何想法吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:24:05.893

例如，您应该在第一个数组中指定索引

```
data['course_data'][0]['course_name']; 
```

如果您将第一个数组定义为变量而不是数组中的变量，您可以做得更好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:24:12.073

当您`array_push($data['course_data'],$courseData);`实际使用`$courseData`时`$data['course_data'][0]`，因此您可以在 JavaScript 中以`data['course_data'][0]['course_name']`.

如果你只打算得到一个结果，而不是`array_push($data['course_data'],$courseData);`你应该只指定`$data['course_data'] = $courseData`. 否则，您应该像这样迭代`data['course_data']`：

```
for (i in data['course_data']) {
  console.log(data['course_data'][i]['course_name']);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:23:58.720

```
$data['course_data'][0]['course_name'] 
```

应该做的伎俩。如果不是，请发送 var_dump($data) 的输出

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T22:24:07.153

假设 PHP 代码是正确的，您将收到如下 JSON 数据：

```
{
    "course_num":34,
    "course_data":[
        {
            "course_name":"name_value",
            ....
        },
        ....etc (other object based on SQL result)
    ]
} 
```

所以，如果你想访问结果的总数：

```
data.course_num 
```

如果要访问结果列表的第一个元素：

```
data.course_data[0] 
```

如果要访问结果列表的第一个元素的名称：

```
data.course_data[0].course_name 
```

或者

```
data.course_data[0]['course_name'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T22:24:24.203

使用 jquery 的 parseJSON 方法从 json 对象中获取所有好东西...

[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

# delphi - 如何从非delphi应用程序在任务栏上显示delphi dll进度条

> ID：15123525
> 
> 赞同：4
> 
> 时间：2013-02-27T22:14:53.990
> 
> 标签：delphi, dll, windows-7, delphi-xe2

我有一个从非 VCL 主机应用程序加载的混合 CBuilder/Delphi dll。我正在使用 RAD Studio XE2。加载 dll 后，我将应用程序句柄设置为主机的主窗体，这具有使我的窗体和对话框远离任务栏的效果。但是我想在任务栏上显示进度条并将其与主机应用程序堆叠在一起。我用谷歌搜索并广泛搜索，但找不到类似的东西。

[Bob 博士在这里](http://www.drbob42.com/examine/examinC5.htm)写了一个关于任务栏各种功能的很好的教程，从那里我得到了一个显示在主应用程序的任务栏按钮中的进度条，但我真的想为进度条创建第二个“堆叠”图标，很多应用程序都会这样做。Bob 博士的示例假设您是主应用程序的一部分，并使用此代码添加一个选项卡：

```
if not Application.MainFormOnTaskBar then
  FormHandle := Application.Handle
else FormHandle := Application.MainForm.Handle;
TaskbarList.AddTab(FormHandle); 
```

在我的情况下，这没有任何作用。我试过了

```
FormHandle := FindWindow('TfmProg', NIL);
TaskbarList.addTab(FormHandle); 
```

但这并没有改变任何事情。

我已经创建了以 Application 作为所有者和 NIL 的表单。我已经创建了 fsNormal 或 fsStayOnTop。坦率地说，我已经触及了我能得到的每一个参数，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:45:44.977

您设置`Application.Handle`为主机应用程序主窗体的句柄是正确的。这将使主机应用程序的主窗口成为您的窗口的[所有者](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632599.aspx#owned_windows)。但是，正如您所观察到的，这也会使您的顶级窗口远离任务栏。那是因为拥有的顶级窗口不会出现在任务栏中。

要将拥有的顶级窗口放在任务栏上，您应该包括[`WS_EX_APPWINDOW`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ff700543.aspx#WS_EX_APPWINDOW)扩展窗口样式。将此添加到表单的`CreateParams`过程中。

```
procedure CreateParams(var Params: TCreateParams); override;
....
procedure TMyForm.CreateParams(var Params: TCreateParams);
begin
  inherited;
  Params.ExStyle := Params.ExStyle or WS_EX_APPWINDOW;
end; 
```

然后，您可以使用`ITaskbarList3.SetProgressState`and`ITaskbarList3.SetProgressValue`传递表单的句柄，以显示表单任务栏按钮的任务栏进度。

* * *

我必须承认我发现你的代码很奇怪：

```
FormHandle := FindWindow('TfmProg', NIL);
TaskbarList.addTab(FormHandle); 
```

Since the code is running in your DLL, which also created the form, you shouldn't be using `FindWindow` to obtain the handle. You can just use `Form.Handle` where `Form` is the reference to your form instance. That said, I'd still prefer the approach outlined above, using `WS_EX_APPWINDOW`, since it is resilient to window handle re-creation and feels rather simpler to me.

# css - 使用过渡定位特定的 CSS 变换

> ID：15123528
> 
> 赞同：1
> 
> 时间：2013-02-27T22:15:00.460
> 
> 标签：css

有没有办法使用 Transition 属性来定位特定的 CSS Transform 属性（例如`Rotate()`, `Scale()`, ）？`TranslateX()`类似于以下内容：

```
transition: 200ms transform-Rotate, 500ms transform-TranslateX; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:51:49.373

[不可以。CSS 过渡规范](http://www.w3.org/TR/2013/WD-css3-transitions-20130212/#transition-property-property)规定在该`transition-property`字段中只能使用单个 CSS 属性。`transform`是一个 CSS 属性。`Rotate()`,`Scale()`等是`transform`函数，而不是 CSS 属性。

# c# - WinRT 应用程序中 RGB 值的直方图

> ID：15123529
> 
> 赞同：0
> 
> 时间：2013-02-27T22:15:02.860
> 
> 标签：c#, windows-8, plot, windows-runtime, histogram

我在 WinRT 应用程序中创建图像的直方图表示时遇到问题。我想要制作的包括图像的红色、绿色、蓝色、亮度的四个直方图。

我的主要问题是如何实际绘制该直方图的图片，以便我可以在屏幕上显示它。到目前为止，我的代码非常...凌乱，我为这个主题搜索了很多，主要是我的结果由 Java 中的代码组成，我试图以某种方式将其翻译成 C#，但 API 完全不同...... AForge也尝试过，但那是winforms......

这是我凌乱的代码，我知道它看起来很糟糕，但我正在努力首先完成这项工作：

```
public static WriteableBitmap CreateHistogramRepresentation(long[] histogramData, HistogramType type)
    {
        //I'm trying to determine a max height of a histogram bar, so
        //I could determine a max height of the image that then I'll remake it
        //at a lower resolution :
        var max = histogramData[0];

        //Determine the max value, the highest bar in the histogram, the initial height of the image.
        for (int i = 0; i < histogramData.Length; i++)
        {
            if (histogramData[i] > max)
                max = histogramData[i];
        }

        var bitmap = new WriteableBitmap(256, 500);

        //Set a color to draw with according to the type of the histogram :
        var color = Colors.White;
        switch (type)
        {
            case HistogramType.Blue :
                {
                    color = Colors.RoyalBlue;
                    break;
                }
            case HistogramType.Green:
                {
                    color = Colors.OliveDrab;
                    break;
                }
            case HistogramType.Red:
                {
                    color = Colors.Firebrick;
                    break;
                }
            case HistogramType.Luminosity:
                {
                    color = Colors.DarkSlateGray;
                    break;
                }
        }

        //Compute a scaler to scale the bars to the actual image dimensions :
        var scaler = 1;
        while (max/scaler > 500)
        {
            scaler++;
        }

        var stream = bitmap.PixelBuffer.AsStream();
        var streamBuffer = new byte[stream.Length];

        //Make a white image initially :
        for (var i = 0; i < streamBuffer.Length; i++)
        {
            streamBuffer[i] = 255;
        }

        //Color the image :
        for (var i = 0; i < 256; i++) // i = column
        {
            for (var j = 0; j < histogramData[i] / scaler; j++) // j = line
            {
                streamBuffer[j*256*4 + i] = color.B; //the image has a  256-pixel width
                streamBuffer[j*256*4 + i + 1] = color.G;
                streamBuffer[j*256*4 + i + 2] = color.R;
                streamBuffer[j*256*4 + i + 2] = color.A;
            }
        }

        //Write the Pixel Data into the Pixel Buffer of the future Histogram image :
        stream.Seek(0, 0);
        stream.Write(streamBuffer, 0, streamBuffer.Length);

        return bitmap.Flip(WriteableBitmapExtensions.FlipMode.Horizontal);
    } 
```

这会创建一个非常糟糕的直方图表示，它甚至没有用相应的颜色对其进行着色......它无法正常工作，我正在努力修复它......

如果您可以提供链接，您可能知道任何用于 WinRT 应用程序的直方图表示的代码或其他所有内容，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:41:20.587

虽然您可以使用 JP Alioto 指出的图表控件，但直方图往往代表*大量*数据。仅在您的示例中，您就渲染了 256 条 * 4 轴（R、G、B、L）。图表控件的问题在于，他们通常喜欢交给他们绘制的水合数据集合（或数组），并倾向于将其保存在内存中。像您这样的直方图需要在内存中有 1024 个对象 (256 * 4) 并作为一个整体传递给图表。这不是很好地使用内存管理。

当然，另一种选择是自己绘制。但正如您所发现的，逐像素绘图可能有点痛苦。最好的答案 - 在我看来 - 是同意 Shahar 并建议您在 CodePlex 上使用 WriteableBitmapEx。

[http://writeablebitmapex.codeplex.com](http://writeablebitmapex.codeplex.com)

WriteableBitmapEx 包括用于绘制线条和矩形等非常快速的形状的方法。您可以在枚举数据时绘制数据（而不必一次将其全部保存在内存中），结果是一个已经“位图缓存”的漂亮紧凑图像（这意味着它渲染速度非常快，因为它没有在每一帧上重绘）。

开发支持、设计支持和更多的好处：http: [//bit.ly/winappsupport](http://bit.ly/winappsupport)

# makefile - makefile：lint 多个源文件并输出到相应的 txt 文件

> ID：15123530
> 
> 赞同：0
> 
> 时间：2013-02-27T22:15:04.430
> 
> 标签：makefile, lint

我正在尝试在一个目录上运行一个 makefile，以便它在该目录中的所有 cpp 文件上运行 lint，并将输出保存在与源文件同名的多个文件中。例如，换句话说，我想将 abc.cpp 的 lint 输出保存到 abc.txt 和 def.cpp 到 def.txt 等等，以将所有未知数量的文件保存到子目录 lintfiles。类似于以下内容：-

```
*lint .ALWAYS:*
   --lint-nt $(PATHS) $(OPTIONS) *.cpp > ./lintfiles/%f.txt 
```

make util 不理解 Lint 的`%f`选项。我也尝试了以下方法，但它没有产生任何输出。

```
lintfiles/%.txt: %.cpp
   -lint-nt $(PATHS) $(OPTIONS) $@ $^ 
```

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:25:12.770

我不熟悉 pc-lint，但如果语法类似于

```
lint-nt -o abc.lint abc.cpp 
```

那么这个makefile应该可以完成这项工作：

```
SRC_DIR := src # or whatever
SRCS := $(wildcard $(SRC_DIR)/*.cpp)
LINTS := $(patsubst $(SRC_DIR)/%.cpp, $(SRC_DIR)/lint/%.lint, $(SRCS))

all: $(LINTS)

$(LINTS): $(SRC_DIR)/lint/%.lint : $(SRC_DIR)/%.cpp
    lint-nt $(PATHS) $(OPTIONS) -o $@ $< 
```

# bash - 变量连接

> ID：15123536
> 
> 赞同：3
> 
> 时间：2013-02-27T22:15:36.890
> 
> 标签：bash

我有 3 个日期（可能更多）作为参数：

```
DATE_0="01-JAN-11"
DATE_1="01-JAN-12"
DATE_2="01-JAN-13" 
```

现在我想循环日期并希望在 _ 之后附加另一个变量的值。

```
for (( i=0; i<3; i++ ))
do
    echo $DATE_$i
done 
```

我想在 i=0 时打印 01-JAN-11，当 i=1 时打印 01-JAN-12 等等。谁能帮我？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:22:28.770

您可以使用间接参数扩展

```
for ((i=0; i<3; i++)); do
    var=DATE_$i
    echo ${!var}
done 
```

但数组是更好的解决方案

```
DATES=(01-JAN-11 01-JAN-12 01-JAN-13)
for d in "${DATES[@]}"; do
   echo $d
done 
```

或者

```
for ((i=0; i<${#DATES[@]}; i++)); do
   echo ${DATES[i]}
done 
```

# php - 输出在while循环后停止，不使用“or die()”

> ID：15123539
> 
> 赞同：1
> 
> 时间：2013-02-27T22:15:56.913
> 
> 标签：php, loops, while-loop

我知道还有一个关于同一主题的问题，但该问题涉及 or die() 语句。我有同样的问题，但我没有在我的 while 循环中使用 or die() 语句。答案可能很明显，但我无法弄清楚。

```
$Dates = "1";
$Select = $mysqli->query("SELECT * FROM ----");
while ($Dates != "") {
$Dates = $Select->fetch_assoc();
$Get = $mysqli->query("SELECT * FROM " . $Dates["Meeting_Date"] . " WHERE Last_Name='" . $LName . "'");
$Vals = $Get->fetch_assoc();
if ($Vals != "") {
$TimeIn = $Vals["Time_In"];
$TimeIn2 = explode(":",$TimeIn);
$TotIn = ($TimeIn2[0]*60)+$TimeIn2[1];
$TimeOut = $Vals["Time_Out"];
$TimeOut2 = explode(":",$TimeOut);
$TotOut = ($TimeOut2[0]*60)+$TimeOut2[1];
$TotTime = ($TotOut - $TotIn)/60;
$TotalTime = floor($TotTime) . " Hours " . ($TotTime-floor($TotTime))*60 . " Minutes";
echo "<tr><td>" . str_replace("_","/",$Dates["Meeting_Date"]) . "</td><td>" . $TimeIn . "</td><td>" . $TimeOut . "</td><td>" . $TotalTime . "</td></tr>";
}
if ($Vals == "") {
echo "<tr><td>" . str_replace("_","/",$Dates["Meeting_Date"]) . "</td><td colspan='3' style='background-color: rgba(0,0,0,0.25)'>Did not Attend</td></tr>";
}
} 
```

我在while循环之后放置的任何东西都不会被执行，即使while循环只执行了2次，就像它应该做的那样......

任何想法表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:21:07.563

这就是问题：

```
while ($Dates != "") {
  $Dates = $Select->fetch_assoc();
  $Get = $mysqli->query("SELECT * FROM " . $Dates["Meeting_Date"] . " WHERE Last_Name='" . $LName . "'"); 
```

当没有更多记录时，`$Dates`将为空（`NULL`），因此下一行将导致致命错误。

您可以将其更改为：

```
while ($Dates = $Select->fetch_assoc()) {
  $Get = $mysqli->query("SELECT * FROM " . $Dates["Meeting_Date"] . " WHERE Last_Name='" . $LName . "'"); 
```

# php - 如何不让 PHPmailer 发送包含多个“收件人”地址的电子邮件？

> ID：15123541
> 
> 赞同：1
> 
> 时间：2013-02-27T22:16:04.040
> 
> 标签：php, phpmailer

我的数据库中有一个表，其中包含要发送的电子邮件。脚本作为 cron 作业定期运行，以从表中读取数据并通过 SMTP 服务器发送电子邮件。我在这里使用 PHPMailer 进行工作。该脚本运行一个循环发送电子邮件，直到表中的所有电子邮件都已发送。

问题是大多数连续发送的电子邮件都有一个共同的主题。因此，当循环运行时，不知何故，所有发送的电子邮件都有一个很长的“收件人”列表。因此，基本上，如果 5 个电子邮件条目（地址不同）具有相同**的**主题和相同的内容，那么它最终只会在“收件人”字段中发送 1 封具有 5 个地址（每个电子邮件条目之一）的电子邮件。这会将每个人的电子邮件地址显示给列表中的其他所有人。这是不可取的，并且电子邮件必须仅发送给它所针对的那个人。

我不知道这里在玩什么。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:17:58.420

你在做这样的事情吗？

```
$mailer = new PHPMailer();

while($row = fetch_from_db()) {
   $mailer->AddAddress($row['email']);
   $mailer->send();
} 
```

如果是这样，你需要做一个

```
$mailer->ClearAllRecipients() 
```

在您发送每封电子邮件后，您可以从一个“新”`To:`列表开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-04T13:58:42.953

```
while($row = fetch_from_db()) {
   $mailer->AddAddress($row['email']);
   $mailer->send();
   $mailer->ClearAllRecipients()
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:50:48.633

1，从你的数据库中获取联系人

```
$contacts = 'GET CONTACTS ARRAY FROM DB'
        if(!empty($contacts)){
            foreach ($contacts as $crt_contact){
               $emails[] = $crt_contact->email ;
            }
        } 
```

第二次使用以下内容创建“to”字段

```
$to = implode(',', array_unique($emails)); 
```

使用`$to`发送邮件（）函数

# java - 任何 java markdown 库都支持 github 语法？

> ID：15123543
> 
> 赞同：12
> 
> 时间：2013-02-27T22:16:09.750
> 
> 标签：java, github, markdown

我正在寻找一个用于渲染[markdown](http://en.wikipedia.org/wiki/Markdown)文件的 java 库，它支持[github markdown 语法](https://help.github.com/articles/github-flavored-markdown)。

具体来说，我需要它支持 github 的代码块样式（标准降价中不支持）：

```
```javascript
alert("hello world")
``` 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T22:24:20.447

您可能会查看[https://github.com/sirthias/pegdown](https://github.com/sirthias/pegdown)，它似乎对 GitHub 风格有一些支持 - 包括代码块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-18T02:46:55.223

我最终在我的项目[https://github.com/greenlaw110/rythm-website中选择了](https://github.com/greenlaw110/rythm-website)[https://code.google.com/p/markdown4j/](https://code.google.com/p/markdown4j/) ，该项目运行在[http://rythmengine.org/](http://rythmengine.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-02T22:06:16.823

[https://github.com/rjeschke/txtmark](https://github.com/rjeschke/txtmark)好用，最近好像在积极开发。它支持对原始 Markdown 语言的许多扩展——比如代码块。

# c++ - 在 qt 中更改 svg 的颜色

> ID：15123544
> 
> 赞同：12
> 
> 时间：2013-02-27T22:16:12.083
> 
> 标签：c++, qt, svg

我在资源中加载了一个 svg，但它是黑色的。如何将颜色更改为白色？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-11-05T09:20:56.840

这就是你在 Qt 中的做法，不要忘记将 xml 和 svg 模块添加到你的 qt 项目（*.pro 文件）中。此代码片段通过修改任何“路径”元素的“填充”属性来更改颜色，但您可以使用它来修改任何元素的任何属性。

```
void SetAttrRecur(QDomElement &elem, QString strtagname, QString strattr, QString strattrval);

void ChangeSVGColor()
{

    // open svg resource load contents to qbytearray
    QFile file("myfile.svg");
    file.open(QIODevice::ReadOnly);
    QByteArray baData = file.readAll();
    // load svg contents to xml document and edit contents
    QDomDocument doc;
    doc.setContent(baData);
    // recurivelly change color
    SetAttrRecur(doc.documentElement(), "path", "fill", "white");
    // create svg renderer with edited contents
    QSvgRenderer svgRenderer(doc.toByteArray());
    // create pixmap target (could be a QImage)
    QPixmap pix(svgRenderer.defaultSize());
    pix.fill(Qt::transparent);
    // create painter to act over pixmap
    QPainter pixPainter(&pix);
    // use renderer to render over painter which paints on pixmap
    svgRenderer.render(&pixPainter);
    QIcon myicon(pix);
    // Use icon ....    

}

void SetAttrRecur(QDomElement &elem, QString strtagname, QString strattr, QString strattrval)
{
    // if it has the tagname then overwritte desired attribute
    if (elem.tagName().compare(strtagname) == 0)
    {
        elem.setAttribute(strattr, strattrval);
    }
    // loop all children
    for (int i = 0; i < elem.childNodes().count(); i++)
    {
        if (!elem.childNodes().at(i).isElement())
        {
            continue;
        }
        SetAttrRecur(elem.childNodes().at(i).toElement(), strtagname, strattr, strattrval);
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-28T07:43:56.487

由于 SVG 格式是基于 XML 的，而 XML 只是 ASCII 文本……您可以将 SVG 资源加载到 QString 中，调用 QString::replace("\"#000000\"", "\"#ffffff\" ")，然后将修改后的 QString 传递给您的 QSVGRenderer。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-11-26T21:18:28.860

如果你的 SVG 是黑色的，有一个非常简单的方法可以做到：**QGraphicsEffect**

```
#include <QGraphicsItem>
#include <QGraphicsColorizeEffect>

QGraphicsItem *item;
QGraphicsColorizeEffect *effect;    

item = new QGraphicsItem;
effect = new QGraphicsColorizeEffect;

effect->setColor(Qt::white);
effect->setStrength(1);

item->setGraphicsEffect(effect) 
```

这不适用于白色 SVG，但考虑到几乎所有提供图标的网站都是黑色的，这非常简洁。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-27T22:50:48.283

只要您在 Mac 上不需要它，这应该可以工作：

[http://doc-snapshot.qt-project.org/4.8/qwidget.html#setGraphicsEffect](http://doc-snapshot.qt-project.org/4.8/qwidget.html#setGraphicsEffect)

[http://doc-snapshot.qt-project.org/4.8/qgraphicscolorizeeffect.html](http://doc-snapshot.qt-project.org/4.8/qgraphicscolorizeeffect.html)

编辑：或者如果您需要支持 Mac，请在 QGraphicsView 中进行 svg 渲染和效果。

[http://doc-snapshot.qt-project.org/4.8/qgraphicsitem.html#setGraphicsEffect](http://doc-snapshot.qt-project.org/4.8/qgraphicsitem.html#setGraphicsEffect)

设置您的着色效果将其着色为白色，并将其设置为 svgWidget。

希望有帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-01-07T18:34:23.370

pyqt5 的解决方案。您可以轻松地将其转换为 c++

```
def QIcon_from_svg(svg_filepath, color='black'):
    img = QPixmap(svg_filepath)
    qp = QPainter(img)
    qp.setCompositionMode(QPainter.CompositionMode_SourceIn)
    qp.fillRect( img.rect(), QColor(color) )
    qp.end()
    return QIcon(img) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-09T09:30:16.027

您可以使用 ColorOverlay，如本问题末尾所述：

[Qt QML LevelAdjust 在应用于 svg 源时显示奇怪的边缘效果](https://stackoverflow.com/questions/57788376/qt-qml-leveladjust-shows-strange-edge-effects-when-applied-to-svg-source)

它不会更改 SVG，但它会创建一个彩色图层，该图层的形状与您的绘图相同（假设您的绘图背景是透明的）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-01T09:01:55.677

```
#ifndef SVG_ITEM_H
#define SVG_ITEM_H

#include <QObject>
#include <QPen>
#include <QQuickItem>
#include <QQuickPaintedItem>
#include <QSvgRenderer>

class SVG_Item : public QQuickPaintedItem
{

    Q_PROPERTY(QString source READ source WRITE setSource NOTIFY sourceChanged)
    Q_PROPERTY(QColor color READ color WRITE setColor NOTIFY colorChanged)
    Q_PROPERTY(QPen stroke READ stroke WRITE setStroke NOTIFY strokeChanged)
    Q_PROPERTY(bool debuging READ debuging WRITE setdebuging)
    Q_PROPERTY(QColor backgroundColor READ backgroundColor WRITE setBackgroundColor NOTIFY backgroundColorChanged)

    Q_OBJECT

public:
    explicit SVG_Item(QQuickItem *parent = nullptr);
    void paint(QPainter *painter) Q_DECL_OVERRIDE;
    QString source() const;
    QColor color() const;
    QPen stroke() const;
    bool debuging() const;

    QColor backgroundColor() const;

signals:
    void sourceChanged(QString source);
    void colorChanged(QColor color);
    void strokeChanged(QPen stroke);
    void backgroundColorChanged(QColor backgroundColor);

public slots:
    void setSource(QString source);
    void setColor(QColor color);
    void setStroke(QPen stroke);
    void setdebuging(bool debuging);    
    void setBackgroundColor(QColor backgroundColor);

private:
    QString m_source;
    QColor m_color;
    QPen m_stroke;
    QString svgContent;
    QSvgRenderer *renderer;
    bool changed;
    bool m_debuging;
    QColor m_backgroundColor;
    QColor m_test;
};

#endif // SVG_ITEM_H

#include "svg_item.h"

#include <QSvgRenderer>
#include <QDebug>
#include <QPainter>
#include <QSvgGenerator>

SVG_Item::SVG_Item(QQuickItem *parent) : QQuickPaintedItem(parent)
{
    changed = false;
    renderer = NULL;
    m_debuging = false;
    m_backgroundColor = Qt::transparent;
}

void SVG_Item::paint(QPainter *painter)
{
    painter->fillRect(0,0,this->width(),this->height(),m_backgroundColor);
    if(m_source != "")
    {
        if(changed)
        {
            if(renderer != NULL)
            {
                renderer->deleteLater();
            }
            renderer = new QSvgRenderer(svgContent.toLocal8Bit());
        }
        if(renderer != NULL)
            renderer->render(painter);
    }

}

void SVG_Item::setSource(QString source)
{
    if(source.startsWith("qrc"))
        source = source.remove(0,3);
    if (m_source == source)
        return;

    QFile readFile(source);
    if(!readFile.exists())
    {
        qWarning("file not found");
    }
    readFile.open(QFile::ReadOnly);
    svgContent = readFile.readAll();

    setColor(color());

    //readData.replace()

    m_source = source;
    emit sourceChanged(m_source);
}

void SVG_Item::setColor(QColor color)
{
    changed = true;
    QString fillStr = "fill:%1";
    fillStr = fillStr.arg(color.name());
    svgContent = svgContent.replace(QRegExp("fill:[# 0-9 a b c d e f A B C D E F]+"), fillStr);

    if(!svgContent.contains(QRegExp("fill:[# 0-9 a b c d e f A B C D E F]+")))
    {
        QString style = "<path \n style=\"fill:%1;fill-opacity:1\"";
        style = style.arg(color.name());
        svgContent = svgContent.replace("<path",style);

        style = "<rect \n style=\"fill:%1;fill-opacity:1\"";
        style = style.arg(color.name());
        svgContent = svgContent.replace("<rect",style);

        style = "<circle \n style=\"fill:%1;fill-opacity:1\"";
        style = style.arg(color.name());
        svgContent = svgContent.replace("<circle",style);

        style = "<ellipse \n style=\"fill:%1;fill-opacity:1\"";
        style = style.arg(color.name());
        svgContent = svgContent.replace("<ellipse",style);

        style = "<polygon \n style=\"fill:%1;fill-opacity:1\"";
        style = style.arg(color.name());
        svgContent = svgContent.replace("<polygon",style);
    }

    //

    this->update();

    if (m_color == color)
        return;

    m_color = color;
    emit colorChanged(m_color);
}

void SVG_Item::setStroke(QPen stroke)
{
    changed = true;
    if (m_stroke == stroke)
        return;

    m_stroke = stroke;
    emit strokeChanged(m_stroke);
}

void SVG_Item::setdebuging(bool debuging)
{
    m_debuging = debuging;
}

void SVG_Item::setBackgroundColor(QColor backgroundColor)
{
    if (m_backgroundColor == backgroundColor)
        return;

    m_backgroundColor = backgroundColor;
    emit backgroundColorChanged(m_backgroundColor);
}

QString SVG_Item::source() const
{
    return m_source;
}

QColor SVG_Item::color() const
{
    return m_color;
}

QPen SVG_Item::stroke() const
{
    return m_stroke;
}

bool SVG_Item::debuging() const
{
    return m_debuging;
}

QColor SVG_Item::backgroundColor() const
{
    return m_backgroundColor;
} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-02-28T06:08:40.810

如果白色是您需要的唯一颜色，那么一个简单的解决方案是使用图像编辑器（例如 Inkscape）更改原始 SVG 图像的颜色。当然，如果您需要使用多种不同颜色的图像，那将不是一个合理的解决方案。

# c - 旅行推销员意外的分段错误

> ID：15123548
> 
> 赞同：2
> 
> 时间：2013-02-27T22:16:27.037
> 
> 标签：c, segmentation-fault, traveling-salesman

我正在尝试为 C99 中的旅行商问题实现我自己的深度优先搜索算法，但我遇到了意外的分段错误。

我有一小部分节点（大致）对应于英国的地方，它们之间有对称的路径。问题出现在`newNode()`方法的早期，我创建一个新节点并设置其初始状态。这涉及为节点创建一个路径数组，该数组将指定连接的节点和它们之间的“距离”，其中每个路径的节点元素被初始化为 NULL。这些数组比我当前实现的示例图所需的要大得多（请参阅 参考资料`MAX_PATHS`），因此以后很容易扩展。

在这种情况下，`paths`数组可以包含 16 个元素。初始化此数组的 FOR 循环在`i = 3`. 完全让我想不通的原因。我`gdb`在代码下方添加了一些输出。希望它有所帮助，或者您可能更喜欢使用自己的方法。

谢谢; 任何帮助将不胜感激！

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define NODES 4
#define MAX_PATHS 16

typedef struct _node_t node_t;
typedef struct _path_t path_t;

struct _node_t
{
    char name[64];
    struct _path_t* paths;
};

struct _path_t
{
    struct _node_t* node;
    int dist;
};

node_t* nodes[NODES];

node_t* newNode(char* name)
{
    node_t* toReturn = (node_t*) malloc(sizeof(node_t*));

    if (toReturn == NULL)
    {
        perror("malloc");
        exit(EXIT_FAILURE);
    }

    printf("toReturn (%p)\n", toReturn);

    strcpy(toReturn->name, name);

    toReturn->paths = (path_t*) malloc(sizeof(path_t) * MAX_PATHS);

    if (toReturn->paths == NULL)
    {
        perror("malloc");
        exit(EXIT_FAILURE);
    }

    printf("toReturn->paths (%p)\n", toReturn->paths);

    for (int i = 0; i < MAX_PATHS; i++)
        toReturn->paths[i].node = NULL; /* !!! */

    return toReturn;
}

void addPath(node_t* node1, node_t* node2, int dist)
{
    int i = 0;

    while (i < MAX_PATHS)
    {
        if (node1->paths[i].node == NULL)
        {
            node1->paths[i].node = node2;
            node1->paths[i].dist = dist;
            break;
        }

        i++;
    }

    if (i == MAX_PATHS)
    {
        fprintf(stderr, "Ran out of paths!!\n");
        exit(EXIT_FAILURE);
    }

    i = 0;

    while (i < MAX_PATHS)
    {
        if (node2->paths[i].node == NULL)
        {
            node2->paths[i].node = node1;
            node2->paths[i].dist = dist;
            break;
        }

        i++;
    }

    if (i == MAX_PATHS)
    {
        fprintf(stderr, "Ran out of paths!!\n");
        exit(EXIT_FAILURE);
    }
}

int getNodeIndex(node_t* node)
{
    for (int i = 0; i < NODES; i++)
        if (nodes[i] == node)
            return i;

    return -1;
}

void depthFirstSearch(node_t* node, int* visited, int depth, int length)
{
    printf("%s\n", node->name);

    int i = 0; /* Path pointer */

    int thisVisited[NODES];
    memcpy(thisVisited, visited, sizeof(int) * NODES);

    /* Set this node as visited */

    visited[getNodeIndex(node)] = 1;

    /* Now traverse all connected nodes that haven't been visited */

    while (node->paths[i].node != NULL)
    {
        if (visited[getNodeIndex(node->paths[i].node)] == 0)
            depthFirstSearch(node->paths[i].node, thisVisited, depth + 1,
                                  node->paths[i].dist);

        i++;
    }

    for (int j = 0; j < depth; j++)
        putchar(' ');
}

int main(int argc, char** argv)
{
    nodes[0] = newNode("Liverpool");
    nodes[1] = newNode("London");
    nodes[2] = newNode("Manchester");
    nodes[3] = newNode("Norwich");

    addPath(nodes[0], nodes[1], 212);
    addPath(nodes[0], nodes[2], 34);
    addPath(nodes[1], nodes[2], 208);
    addPath(nodes[1], nodes[3], 114);
    addPath(nodes[2], nodes[3], 191);

    int visited[NODES] = {0};

    depthFirstSearch(nodes[0], visited, 0, 0);

    return EXIT_SUCCESS;
} 
```

* * *

在`malloc()`ing 节点及其路径数组之后：

```
(gdb) p toReturn
$16 = (node_t *) 0x602010
(gdb) p toReturn->paths
$17 = (struct _path_t *) 0x602030 
```

在 FOR 循环之前：

```
(gdb) p toReturn->paths[0]
$18 = {node = 0x0, dist = 0}
(gdb) p toReturn->paths[1]
$19 = {node = 0x0, dist = 0}
(gdb) p toReturn->paths[2]
$20 = {node = 0x602030, dist = 0} // (I don't understand this value here.)
(gdb) p toReturn->paths[3]
$21 = {node = 0x0, dist = 0}
(gdb) p toReturn->paths[4]
$22 = {node = 0x0, dist = 0}
(gdb) p toReturn->paths[5]
$23 = {node = 0x0, dist = 0}
(gdb) p toReturn->paths[6]
$24 = {node = 0x0, dist = 0}
(gdb) p toReturn->paths[7]
$25 = {node = 0x0, dist = 0}
(gdb) p toReturn->paths[8]
$26 = {node = 0x0, dist = 0}
(gdb) p toReturn->paths[9]
$27 = {node = 0x0, dist = 0}
(gdb) p toReturn->paths[10]
$28 = {node = 0x0, dist = 0}
(gdb) p toReturn->paths[11]
$29 = {node = 0x0, dist = 0}
(gdb) p toReturn->paths[12]
$30 = {node = 0x0, dist = 0}
(gdb) p toReturn->paths[13]
$31 = {node = 0x0, dist = 0}
(gdb) p toReturn->paths[14]
$32 = {node = 0x0, dist = 0}
(gdb) p toReturn->paths[15]
$33 = {node = 0x0, dist = 0} 
```

`toReturn`FOR循环之前的状态：

```
(gdb) p *toReturn
$36 = {
  name = "Liverpool", '\000' <repeats 15 times>, "\021\001", '\000' <repeats 37 times>, paths = 0x602030} 
```

它保持不变，直到它在 FOR 循环中意外更改时`i = 3`

```
(gdb) p *toReturn
$40 = {
  name = "Liverpool", '\000' <repeats 15 times>, "\021\001", '\000' <repeats 37 times>, paths = 0x0} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T22:17:43.117

```
node_t* toReturn = (node_t*) malloc(sizeof(node_t*)); 
```

这看起来不对。您需要分配`node_t`not的大小`node_t *`。当我们这样做的时候，[不要使用 malloc](http://c-faq.com/malloc/mallocnocast.html)。

# haskell - 从单子翻译成应用

> ID：15123552
> 
> 赞同：19
> 
> 时间：2013-02-27T22:16:48.523
> 
> 标签：haskell, monads, applicative

好的，所以我知道`Applicative`类型类包含什么，以及它为什么有用。但是我不能完全围绕你如何在一个重要的例子中使用它。

例如，考虑以下相当简单的 Parsec 解析器：

```
integer :: Parser Integer
integer = do
  many1 space
  ds <- many1 digit
  return $ read ds 
```

`Monad`现在，如果不使用实例，你会怎么写`Parser`呢？很多人声称这是可以做到的，而且是个好主意，但我不知道具体如何。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-27T23:05:58.430

我会写

```
integer :: Parser Integer
integer = read <$ many1 space <*> many1 digit 
```

有一堆左关联（如应用程序）解析器构建运算符`<$>`, `<*>`, `<$`, `<*`. 最左边的东西应该是从组件值组装结果值的纯函数。每个运算符右边的东西应该是一个解析器，从左到右共同给出语法的组成部分。使用哪个运算符取决于两个选择，如下所示。

```
 the thing to the right is    signal  / noise
  _________________________            
  the thing to the left is \           
                            +-------------------
                    pure /  |   <$>       <$
                  a parser  |   <*>       <* 
```

因此，选择`read :: String -> Integer`作为将传递解析器语义的纯函数后，我们可以将前导空间分类为“噪声”，将一堆数字分类为“信号”，因此

```
 read <$ many1 space <*> many1 digit
 (..)    (.........)     (.........)
 pure    noise parser     |
 (.................)      |
     parser              signal parser
 (.................................)
                    parser 
```

您可以将多种可能性与

```
p1 <|> ... <|> pn 
```

并表示不可能

```
empty 
```

很少需要在解析器中命名组件，并且生成的代码看起来更像是添加了语义的语法。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-27T22:19:47.383

```
integer :: Parser Integer
integer = read <$> (many1 space *> many1 digit) 
```

或者

```
integer = const read <$> many1 space <*> many1 digit 
```

您是否认为其中任何一个更具可读性取决于您。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-01T14:07:59.160

您的示例可以逐步重写为更类似于 Applicative 的形式：

```
do
  many1 space
  ds <- many1 digit
  return $ read ds 
```

1.  `do`符号定义：

    ```
    many1 space >> (many1 digit >>= \ds -> return $ read ds) 
    ```

2.  的定义`$`：

    ```
    many1 space >> (many1 digit >>= \ds -> return (read ds)) 
    ```

3.  的定义`.`：

    ```
    many1 space >> (many1 digit >>= (return . read)) 
    ```

4.  第三单子定律（结合性）：

    ```
    (many1 space >> many1 digit) >>= (return . read) 
    ```

5.  `liftM`（非`do`符号）的定义：

    ```
    liftM read (many1 space >> many1 digit) 
    ```

这是（或者应该是，如果我没有搞砸:)）在行为上与您的示例相同。

现在，如果你用 和 替换`liftM`，你`fmap`会得到Applicative：`<$>``>>``*>`

```
read <$> (many1 space *> many1 digit) 
```

这是有效的，因为`liftM`,`fmap`和`<$>`通常应该是同义词，就像`>>`和一样`*>`。

这一切都有效，我们可以这样做，因为原始示例没有使用任何解析器的结果来构建后续解析器。

# javascript - 如何更新为 javascript / jquery 中的 for 循环的每次迭代显示的 html？

> ID：15123553
> 
> 赞同：4
> 
> 时间：2013-02-27T22:16:49.957
> 
> 标签：javascript, jquery, html, loops, iteration

对于循环的每次迭代，我将如何更改 h1？此代码现在仅在完成所有操作后显示 h1 文本。

```
for (i=0; i<array.length; i++) {
  $("body > h1").text("Processing #" + i);
  // things that take a while to do
} 
```

附加信息：如果我在循环时调整窗口大小，则 html 会更新。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T22:29:48.910

```
var array = ['one', 'two', 'three']
var i = 0;

var refreshIntervalId = setInterval(function() {
    length = array.length;
    if (i < (array.length +1)) {
        $("h1").text("Processing #" + i);
    } else {
        clearInterval(refreshIntervalId);
    }
    i++     
}, 1000); 
```

[http://jsfiddle.net/3fj9E/](http://jsfiddle.net/3fj9E/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T22:35:54.170

使用`setInterval`具有一毫秒延迟的 a：

```
var i=0, j=array.length;
var iv = setInterval(function() {
    $("h1").text("Processing #" + i);
    // things that take a while to do
    if (++i>=j) clearInterval(iv);
}, 1); 
```

[http://jsfiddle.net/mblase75/sP9p7/](http://jsfiddle.net/mblase75/sP9p7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T22:21:10.430

有时您可以通过强制重新计算布局来强制渲染

```
for (i=0; i<array.length; i++) {
  $("body > h1").text("Processing #" + i)
      .width();  // force browser to recalculate layout
  // things that take a while to do
} 
```

它可能不适用于所有浏览器。

一种更好的方法，它不会过多地阻止浏览器：

```
function doThings(array) {
   var queueWork,
       i = -1,
       work = function () {
          // do work for array[i]
          // ...
          queueWork();
       };

   queueWork = function () {
       if (++i < array.length) {
          $("body > h1").text("Processing #" + i);
          setTimeout(work, 0); // yield to browser
       }
   };
}

doThings(yourArray); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T17:20:28.180

[**演示**](http://jsfiddle.net/MaFJ4/13/)

我花了一些时间来开发一个似乎可以解决这个问题的 jquery 函数。基本上，它是一个进程处理程序，您可以`add`访问任意数量的进程，然后调用`run`它以异步方式顺序调用这些进程。

```
$.fn.LongProcess = function () {
    var _this = this;
    this.notifications = [];
    this.actions = [];

    this.add = function (_notification, _action) {
        this.notifications.push(_notification);
        this.actions.push(_action);
    };
    this.run = function () {

        if (!_this.actions && !_this.notifications) {
            return "Empty";
        }
        //******************************************************************
        //This section makes the actions lag one step behind the notifications.
        var notification = null;
        if (_this.notifications.length > 0) notification = _this.notifications.shift();

        var action = null;
        if ((_this.actions.length >= _this.notifications.length + 2) || (_this.actions.length > 0 && _this.notifications.length == 0)) 
            action = _this.actions.shift();
        //****************************************************************
        if (!action && !notification) {
            return "Completed";
        }

        if (action) action();        
        if (notification) notification();

        setTimeout(_this.run, 1000); 
        //setTimeout(_this.run,1); //set to 1 after you've entered your actual long running process. The 1000 is there to just show the delay.
    }
    return this;
}; 
```

如何使用`<h1 class="processStatus"></h1>`：

```
$(function () {
    var process = $().LongProcess();

    //process.add(notification function, action function);
    process.add(function () {
        $(".processStatus").text("process1");
    }, function () {
        //..long process stuff
        alert("long process 1");
    });

    process.add(function () {
        $(".processStatus").text("process2");
    }, function () {
        //..long process stuff
        alert("long process 2");
    });

    process.add(function () {
        $(".processStatus").text("process3");
    }, function () {
        //..long process stuff
        alert("long process 3");
    });

    process.run();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-22T15:50:35.283

如果过程很长，您可以使用此脚本显示特定时间间隔的每个通知。

这是代码..

**html**

```
<div id="ccNotificationBox"></div> 
```

**css**

```
#ccNotificationBox{
 -webkit-animation-name:;
 -webkit-animation-duration:2s;/*Notification duration*/
 box-sizing:border-box;
 border-radius:16px;
 padding:16px;
 background-color:rgba(0,0,0,0.7);
 top:-100%;
 right:16px;
 position:fixed;
 color:#fff;
}
#ccNotificationBox.active{
 -webkit-animation-name:note;
 top:16px;
}
@-webkit-keyframes note{
0%   {opacity:0;}
20%  {opacity:1;}
80%  {opacity:1;}
100% {opacity:0;}
} 
```

**javascript**

```
var coccoNotification=(function(){
var
nA=[],
nB,
rdy=true;
function nP(a){
 nA.push(a);
 !rdy||(nR(),rdy=false);
}
function nR(){
 nB.innerHTML=nA[0];console.log(nA[0]);
 nB.offsetWidth=nB.offsetWidth;//reflow ios
 nB.classList.add('active');
}
function nC(){
 nB.classList.remove('active');
 nB.innerHTML='';
 nA.shift();
 nA.length>0?nR():(rdy=true);
}
function init(){
 nB=document.getElementById('ccNotificationBox');
 nB.addEventListener('webkitAnimationEnd',nC,false);
 window.removeEventListener('load',init,false);
}
window.addEventListener('load',init,false);
return nP
})(); 
```

**用法**

`coccoNotification('notification 1');`

**例子**

[http://jsfiddle.net/f6dkE/1/](http://jsfiddle.net/f6dkE/1/)

**信息**

上面的示例非常适合外部 js，因为您只使用一个全局变量，它是函数的名称......在我的例子中`coccoNotification`

这是一种不同的方法，但它的作用相同

[http://jsfiddle.net/ZXL4q/11/](http://jsfiddle.net/ZXL4q/11/)

# visual-studio-2010 - 如何安装此 Visual Studio 项目模板？

> ID：15123556
> 
> 赞同：0
> 
> 时间：2013-02-27T22:16:57.027
> 
> 标签：visual-studio-2010, github

我这辈子都想不通。“操作方法”视频在 ProjectTemplates/Visual C# 文件夹中显示了两个 .zip 文件，但我在此 GitHub 页面上找不到它们……说明在上面的“下载”选项卡下……下载这两个项目模板”，我什至找不到视频中看到的 zip 文件的选项卡或下载选项。

这是我尝试过的：

*   下载包含两个项目的单个 .zip 文件，并将该 .zip 放在 ProjectTemplates/Visual C# 文件夹中。重新启动 VS2010 - 新项目，我不认为它是一个选项

*   压缩嵌套项目，将其放在与上述相同的文件夹中。重新启动 VS2010 - 新项目，但它不是一个选项

下载中没有 .msi 或 .vsix 文件。

任何帮助表示赞赏

[https://github.com/irobinson/WebFormsMvp-DNN-Module-Template](https://github.com/irobinson/WebFormsMvp-DNN-Module-Template)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:01:37.753

说明所指的下载选项卡不再存在，这可能解释了您找不到它的原因。

幸运的是，您仍然可以在此处找到下载：[https ://github.com/irobinson/WebFormsMvp-DNN-Module-Template/downloads](https://github.com/irobinson/WebFormsMvp-DNN-Module-Template/downloads)

一旦你下载了这些并将压缩包添加到你的模板文件夹中，你应该很高兴。

# c# - 组合框太高

> ID：15123559
> 
> 赞同：1
> 
> 时间：2013-02-27T22:17:10.520
> 
> 标签：c#, xml, silverlight

如果我将高度设置为更大的值，它将超过专用空间。我该如何解决这个问题？我可以以某种方式带走组合框中的所有空白空间吗？

见下图。由于这个问题，您无法阅读文本“-Vessel Type-”。

![在此处输入图像描述](../Images/4920b2d771fa6237a2b51eb4caefeec3.png)

代码：

```
 <ComboBox Name="comboBoxVesselType" Width="152" Margin="8,2,0,0" Height="15" Padding="0,0,0,0" BorderThickness="0" FontSize="10" MouseEnter="canvasSelection_MouseEnter" MouseLeave="canvasSelection_MouseLeave">
        <ListBoxItem Content="- Vessel Type- " IsSelected="True" />
    </ComboBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:23:46.280

为什么要将 ListBoxItem 放在组合框中？

无论如何尝试填充负值，如

```
Paddin="0,-5, 0, 0" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:21:40.603

我认为您可能必须对组合框进行模板化。此处示例：http: [//msdn.microsoft.com/en-us/library/ms752094](http://msdn.microsoft.com/en-us/library/ms752094(v=vs.85).aspx) (v=vs.85).aspx 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:23:11.007

尝试设置`ComboBox` `VerticalContentAlignment`为`Top`

例子：

```
 <ComboBox VerticalContentAlignment="Top" .................... 
```

结果：

![在此处输入图像描述](../Images/afea0ec42605c9bda7d7b3b0bb052324.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T23:30:12.250

因此，ComboBox 的项目不是 ListBoxItem，而是 ComboBoxItem。那解决了它。

```
 <ComboBox Name="comboBoxVesselType" Width="152" Margin="8,2,0,0" Height="15" Padding="0,0,0,0" Background="{x:Null}" BorderThickness="0" FontSize="10" MouseEnter="canvasSelection_MouseEnter" MouseLeave="canvasSelection_MouseLeave">
            <ComboBoxItem Content="- Vessel Type- " IsSelected="True" />
        </ComboBox> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T00:02:40.087

您可以使用 ComboBoxItem 代替 ListBoxItem。您还可以将对齐设置为“中心”，避免使用固定宽度。那解决了它。

```
<ComboBox Name="comboBoxVesselType" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="8,2,0,0" Height="15"
Padding="0,0,0,0" Background="{x:Null}" BorderThickness="0" FontSize="10"
MouseEnter="canvasSelection_MouseEnter" MouseLeave="canvasSelection_MouseLeave">
<ComboBoxItem Content="- Vessel Type- " IsSelected="True" />
</ComboBox> 
```

# html - 连续 3 张图像在移动设备中留下空白

> ID：15123566
> 
> 赞同：1
> 
> 时间：2013-02-27T22:17:40.107
> 
> 标签：html, css

以下代码在桌面上运行良好，但在移动设备上却在右侧留下了空白：

```
ul{
width:100%;
}

li{
width:33.3333333333333%;
float:left;
}

img{
  width:100%;
}

<ul>
  <li><a href="#"><img src="img/men.jpg"/></a></li>
  <li><a href="#"><img src="img/women.jpg"/></a></li>
  <li><a href="#"><img src="img/kids.jpg"/></a></li>
</ul> 
```

我也尝试过 display:table 但这留下了更多的空白:(有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:01:28.933

您是否尝试过`display: block;`在 css 中的 img 标签上使用，其他可能是 ul 和 li 标签上的边距和填充未设置为 0。

看看附加的 jsfiddle，看看它是否能帮助你解决问题。

[http://jsfiddle.net/djy6V/](http://jsfiddle.net/djy6V/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:29:46.843

您应该设置 的宽度，`<li>`使它们加起来为 100。您的加起来为`99.9999999%`。样式前两个使用`33%`和最后一个使用`34%`。

# python - Python - 无法“结束”递归函数

> ID：15123570
> 
> 赞同：1
> 
> 时间：2013-02-27T22:17:54.967
> 
> 标签：python, recursion

我已经完成了一个迷宫寻路递归函数作为家庭作业，但我遇到了一个问题。我知道我已经正确地完成了所有事情（通过调试），正在找到路径等。但是当所有递归函数开始返回 True 时，原始/第一个不是！我找不到让它返回 true 的方法（递归调用采用“if, true”格式）。

我希望你们能帮助我，抱歉英语不好，因为它不是我的母语。

*这里是代码：

```
def pathExists(labyrinth, currCoord, destination, previousRule, visited):
    if currCoord == destination:
        return True
    if currCoord not in labyrinth:
        print "False"
        return False

    rule = labyrinth[currCoord]
    if rule == Any:
        previousRule = rule
        print currCoord
        if (pathExists(labyrinth, (currCoord[0], currCoord[1] - 1), destination, rule, visited) or
            pathExists(labyrinth, (currCoord[0] + 1, currCoord[1]), destination, rule, visited) or
            pathExists(labyrinth, (currCoord[0] - 1, currCoord[1]), destination, rule, visited) or
            pathExists(labyrinth, (currCoord[0], currCoord[1] + 1), destination, rule, visited)):
            print "True"
            return True
        else:
            print"outro"

    elif rule == Bridge:
        print currCoord
        currCoord = nextCoord(currCoord, previousRule)
        if pathExists(labyrinth, currCoord, destination, rule, visited):
            print "True"
            return True

    else:
        print currCoord
        if currCoord in visited:
                print "False"
                return False
        visited.append(currCoord)
        previousRule = rule
        currCoord = nextCoord(currCoord, rule)
        if pathExists(labyrinth, currCoord, destination, rule, visited):
            print "True"
            return True 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:43:44.033

没有所有代码我错了，但我认为你需要一个全局/类 var 来存储返回值。逻辑：第一次调用不返回任何内容（或返回无），因为正在调用其他函数。
要清楚：

```
a = [1,2,[4,6],3,4]
ret = None
def f(x):
    global ret
    if isinstance(x, list):
        f(x[0])
    else:
        ret = x
        return x

var = f(a)
print(var, ret) 
```

如果您测试，您将看到 var = None，但 ret 为 1（而不是 global，我建议您将代码封装在一个类中并使用 self.ret 之类的东西）。

PS：正如 Joel Cornett 所说，使用英文/抽象 var 名称使所有代码更具可读性！

# shell - 通过内联设置 awk 变量

> ID：15123572
> 
> 赞同：1
> 
> 时间：2013-02-27T22:18:01.050
> 
> 标签：shell, gawk

我有这个：./awktest -v fields=`cat testfile`

应该将 fields 变量设置为 '1 2 3 4 5' 这是 testfile 包含的所有内容

它返回： gawk: ./awktest:9: fatal: cannot open file '2' for reading（没有这样的文件或目录）

当我这样做时，它工作正常。./awktest -v 字段='1 2 3 4 5'

出错时的打印字段产量：1 在第二个实例中打印字段产量：1 2 3 4 5

当我尝试使用 12345 而不是 1 2 3 4 5 时，两者都可以正常工作，因此这是空白区域的问题。这是什么问题？以及我该如何解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T23:11:37.200

这很可能不是一个`awk`问题。最有可能的是，你的*外壳*是罪魁祸首。

例如，如果 awktest 是：

```
#!/bin/bash
i=1
for arg in "$@"; do
  printf "%d\t%s\n" $i "$arg"   
  ((i++))
done 
```

然后你得到：

```
$ ./awktest -v fields=`cat testfile`
1   -v
2   fields=1
3   2
4   3
5   4
6   5 
```

您会看到文件内容没有作为单个单词处理。

简单的解决方案：在命令行上使用双引号：

```
$ ./awktest -v fields="$(< testfile)"
1   -v
2   fields=1 2 3 4 5 
```

该`$(< file)`构造是一个 bash 快捷方式``cat file``，不需要生成外部进程。

或者，在 awk BEGIN 块中读取文件的第一行

```
awk '
    BEGIN {getline fields < "testfile"} 
    rest of awk program ...
' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:58:27.303

```
./awktest -v fields="`cat testfile`"

#note that:
#./awktest -v fields='`cat testfile`'
#does not work 
```

# jetty - 如何更改 PaxExam 端口

> ID：15123576
> 
> 赞同：1
> 
> 时间：2013-02-27T22:18:20.193
> 
> 标签：jetty, cxf, port, apache-karaf, pax-exam

我有一套使用 PaxExam 成功运行的集成测试。我使用 Maven 运行测试。测试的目的是测试通过在 Karaf 中运行的 Apache CXF 实现的 REST Web 服务。

测试在我的机器上运行，但在 Jenkins 构建期间由于端口冲突而失败。CXF 使用端口 8181，这似乎是默认的 Jetty 端口。有没有办法在测试套件中以声明方式或编程方式更改此端口？

我尝试使用此处列出的各种 PaxExam 选项：

[http://team.ops4j.org/wiki/display/PAXEXAM3/Configuration+Options](http://team.ops4j.org/wiki/display/PAXEXAM3/Configuration+Options)，但无济于事。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:51:40.753

您使用 Pax-Exam-Karaf 还是使用普通的 Pax-Exam，如果是 Pax-Exam-Karaf，请使用以下配置：

```
KarafDistributionOption.editConfigurationFilePut("etc/org.ops4j.pax.web.cfg",
 "org.osgi.service.http.port", "alternative-port"), 
```

如果是普通的 Pax-Exam：

```
systemProperty("org.osgi.service.http.port").value("8181") 
```

您还可以在[Karaf Regression Test](https://github.com/apache/karaf/blob/trunk/tooling/exam/regression/src/test/java/org/apache/karaf/tooling/exam/regression/KarafWithBundleTest.java)中查看 Karaf 如何进行回归测试，或者在[Pax-Web Integration Tests中查看 pax-web itests](https://github.com/ops4j/org.ops4j.pax.web/blob/master/itest/src/test/java/org/ops4j/pax/web/itest/ITestBase.java)

# django - django sanction oauth2.0 注销用户

> ID：15123577
> 
> 赞同：1
> 
> 时间：2013-02-27T22:18:20.443
> 
> 标签：django, django-views

我正在尝试将[django sanction](https://github.com/demianbrecht/django-sanction)集成到我的博客应用程序中（此处为 django newbie），但我似乎无法在登录过程后“注销”用户（使用 Google OAuth2.0）。

整个过程似乎没有痛苦 - 即我能够在我的数据库上获取所有用户详细信息，并且能够访问我的 django 模板上的用户详细信息，但是，当我注销并尝试重新登录时，它似乎记住了我的凭据（饼干？）。我正在尝试从[这里注销](https://github.com/demianbrecht/django-sanction/blob/master/example/example/templates/profile.html)

ps：我正在本地主机上开发 - 想知道这是否是问题（？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:24:05.330

请参见此处：[如何在 django 中强制用户注销？](https://stackoverflow.com/questions/953879/how-to-force-user-logout-in-django)

引用：

```
I don't think there is a sanctioned way to do this in Django yet.

The user id is stored in the session object, but it is encoded. Unfortunately, that means you'll have to iterate through all sessions, decode and compare... 
```

# ios6 - while 循环的条件不起作用，无法填充表格视图单元格

> ID：15123578
> 
> 赞同：1
> 
> 时间：2013-02-27T22:18:21.347
> 
> 标签：ios6, while-loop, uitableview

我是 ios 的初学者，正在构建我的第一个应用程序......所以对我来说放轻松:-)

我正在尝试在表格视图单元格中显示来自 Web 服务的结果。但是我的while循环条件失败了。我将 nslog 移到了 while 循环中，它清楚地打印了数组中的对象，正如您所期望的那样。但是，我相信当它结束时会有一些问题。

有没有人对它为什么失败有任何想法？

基本上我正在尝试获取“配方名称”和“smallImageUrls; 从 Web 服务结果并在 tableview 单元格中打印。

我知道我的 tableview 单元格不会按原样正确打印。我稍后会解决这个问题。可能将 url 提取到一个数组中，然后在 tableviewcell 方法中使用该数组。

非常感谢任何人可以提供的任何帮助。我只是觉得它很奇怪，因为它显然正在通过 while 循环而没有任何问题。:-S

没有真正的错误信息只是：

self SearchedYummlyViewController * 0x12b39570 匹配计数 int 40

在底部窗格的左侧。

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    self.searchYummlyRecipeResults = [NSJSONSerialization JSONObjectWithData:self.yummlyRecipesNSData options:nil error:nil];
    self.tempYummlyResultsMatches = [[NSMutableArray alloc]init];  
    int matchesCount = 0;
    while([self.searchYummlyRecipeResults[@"matches"]objectAtIndex:matchesCount]){
        [self.tempYummlyRecipeMatch addObject:[[self.searchYummlyRecipeResults[@"matches"]objectAtIndex:matchesCount]objectForKey:@"recipeName"]];
        [self.tempYummlyRecipeMatch addObject:[[self.searchYummlyRecipeResults[@"matches"]objectAtIndex:matchesCount]objectForKey:@"smallImageUrls"]];   
        NSLog(@"tempYummlyRecipeMatch array's contents: %@", self.tempYummlyRecipeMatch);
        matchesCount++;
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...

    NSString *recipeString = self.tempYummlyRecipeMatch[indexPath.row];
    cell.textLabel.text = recipeString;

    //The below is code on how to add a image from a web service to a cell. I dont think that will work but my code cant make it down there yet so I'll tackle that after while loop issue.
    NSURL *url = [NSURL URLWithString:self.tempYummlyRecipeMatch[indexPath.row+1];
    UIImage *image = [UIImage imageWithData: [NSData dataWithContentsOfURL:url]];

    cell.imageView.image = image;

    return cell;
} 
```

下面的 Web 服务输出示例：

```
Recipe List: {
    attribution =     {
        html = "<a href='http://www.yummly.com/recipes/onion-soup'>onion soup recipes</a> search powered by <img src='http://static.yummly.com/api-logo.png'/>";
        logo = "http://static.yummly.com/api-logo.png";
        text = "onion soup recipes: search powered by Yummly";
        url = "http://www.yummly.com/recipes/onion-soup";
    };
    criteria =     {
        allowedIngredients =         (
        );
        excludedIngredients =         (
        );
        facetFields =         (
        );
        maxResults = 6;
        requirePictures = 0;
        resultsToSkip = 0;
        terms =         (
            onion,
            soup
        );
    };
    facetCounts =     {
    };
    matches =     (
                {
            attributes =             {
            };
            flavors =             {
                bitter = "0.1666666666666667";
                meaty = "0.3333333333333333";
                piquant = 0;
                salty = "0.5";
                sour = "0.3333333333333333";
                sweet = "0.5";
            };
            id = "French-onion-soup-sandwiches-309090";
            ingredients =             (
                "olive oil",
                "sea salt",
                "fresh thyme leaves",
                "granulated sugar",
                "yellow onions",
                "unsalted butter",
                "beef broth",
                "cracked black pepper",
                "gruyere cheese",
                bread
            );
            rating = 0;
            recipeName = "French Onion Soup Sandwiches";
            smallImageUrls =             (
                "http://i.yummly.com/French-onion-soup-sandwiches-309090-273265.s.jpg"
            );
            sourceDisplayName = "Joy the Baker";
            totalTimeInSeconds = 0;
        },
                {
            attributes =             {
                course =                 (
                    "Main Dishes"
                );
            };
            flavors =             {
                bitter = 1;
                meaty = "0.1666666666666667";
                piquant = 0;
                salty = 1;
                sour = "0.1666666666666667";
                sweet = "0.3333333333333333";
            };
            id = "Awesome-Slow-Cooker-Pot-Roast-Allrecipes";
            ingredients =             (
                "condensed cream of mushroom soup",
                "onion soup mix",
                "pot roast",
                water
            );
            rating = "4.69";
            recipeName = "Awesome Slow Cooker Pot Roast";
            smallImageUrls =             (
                "http://i2.yummly.com/Awesome-Slow-Cooker-Pot-Roast-Allrecipes-2.s.png",
                "http://i.yummly.com/Awesome-Slow-Cooker-Pot-Roast-Allrecipes-58919.s.png"
            );
            sourceDisplayName = AllRecipes;
            totalTimeInSeconds = 29400;
        },
                {
            attributes =             {
                course =                 (
                    Soups,
                    Appetizers
                );
                cuisine =                 (
                    French
                );
                holiday =                 (
                    Thanksgiving
                );
            };
            flavors =             {
                bitter = "0.1666666666666667";
                meaty = "0.1666666666666667";
                piquant = 0;
                salty = "0.1666666666666667";
                sour = "0.1666666666666667";
                sweet = "0.1666666666666667";
            };
            id = "French-Onion-Soup-The-Pioneer-Woman-Cooks-_-Ree-Drummond-41364";
            ingredients =             (
                "stick butter",
                "french bread",
                "yellow onion",
                "low sodium chicken broth",
                "gruyere cheese",
                "minced garlic",
                "dry white wine",
                "worcestershire sauce",
                "beef broth"
            );
            rating = 0;
            recipeName = "French Onion Soup";
            smallImageUrls =             (
                "http://i.yummly.com/French-Onion-Soup-The-Pioneer-Woman-Cooks-_-Ree-Drummond-41364-1512.s.jpg",
                "http://i.yummly.com/French-Onion-Soup-The-Pioneer-Woman-Cooks-_-Ree-Drummond-41364-1199.s.jpg",
                "http://i.yummly.com/French-Onion-Soup-The-Pioneer-Woman-Cooks-_-Ree-Drummond-41364-220.s.jpg"
            );
            sourceDisplayName = "The Pioneer Woman";
            totalTimeInSeconds = 0;
        },
                {
            attributes =             {
                course =                 (
                    Soups
                );
            };
            flavors = "<null>";
            id = "Curried-sweet-potato-soup-333086";
            ingredients =             (
                broth,
                salt,
                "sweet potatoes",
                "lite coconut milk",
                onion,
                "coconut oil",
                "curry powder",
                garlic,
                spinach,
                lime,
                "chopped cilantro",
                "red pepper flakes",
                "brown sugar",
                peas
            );
            rating = 0;
            recipeName = "Curried Sweet Potato Soup";
            smallImageUrls =             (
                "http://i.yummly.com/Curried-sweet-potato-soup-333086-295006.s.jpg"
            );
            sourceDisplayName = "Camille Styles";
            totalTimeInSeconds = 0;
        },
                {
            attributes =             {
            };
            flavors = "<null>";
            id = "French-onion-soup-grilled-cheese-308496";
            ingredients =             (
                "unsalted butter",
                "kosher salt",
                "sweet onions",
                "unsalted beef stock",
                pepper,
                "gruyere cheese",
                "dry sherry",
                "italian bread",
                "fresh thyme"
            );
            rating = 0;
            recipeName = "French Onion Soup Grilled Cheese";
            smallImageUrls =             (
                "http://i.yummly.com/French-onion-soup-grilled-cheese-308496-272505.s.jpg"
            );
            sourceDisplayName = "The Kitchn";
            totalTimeInSeconds = 0;
        },
                {
            attributes =             {
            };
            flavors =             {
                bitter = 1;
                meaty = 1;
                piquant = 0;
                salty = 1;
                sour = 1;
                sweet = "0.8333333333333334";
            };
            id = "Vidalia-onion-soup-with-wild-rice-and-blue-cheese-305366";
            ingredients =             (
                "vidalia onions",
                "chicken stock",
                herb,
                pepper,
                "wild rice",
                "unsalted butter",
                baguette,
                salt,
                "extra virgin olive oil",
                other
            );
            rating = 0;
            recipeName = "Vidalia Onion Soup with Wild Rice and Blue Cheese";
            smallImageUrls =             (
                "http://i.yummly.com/Vidalia-onion-soup-with-wild-rice-and-blue-cheese-305366-268824.s.jpg"
            );
            sourceDisplayName = "Smitten Kitchen";
            totalTimeInSeconds = 0;
        }, 
```

tempYummlyRecipeResults nslog 示例

```
tempYummlyRecipeMatch array's contents: (
    "French Onion Soup Sandwiches",
        (
        "http://i.yummly.com/French-onion-soup-sandwiches-309090-273265.s.jpg"
    )
)
2013-02-27 22:13:34.334 CustomTableView[435:11303] tempYummlyRecipeMatch array's contents: (
    "French Onion Soup Sandwiches",
        (
        "http://i.yummly.com/French-onion-soup-sandwiches-309090-273265.s.jpg"
    ),
    "Awesome Slow Cooker Pot Roast",
        (
        "http://i2.yummly.com/Awesome-Slow-Cooker-Pot-Roast-Allrecipes-2.s.png",
        "http://i.yummly.com/Awesome-Slow-Cooker-Pot-Roast-Allrecipes-58919.s.png"
    )
)
2013-02-27 22:13:34.335 CustomTableView[435:11303] tempYummlyRecipeMatch array's contents: (
    "French Onion Soup Sandwiches",
        (
        "http://i.yummly.com/French-onion-soup-sandwiches-309090-273265.s.jpg"
    ),
    "Awesome Slow Cooker Pot Roast",
        (
        "http://i2.yummly.com/Awesome-Slow-Cooker-Pot-Roast-Allrecipes-2.s.png",
        "http://i.yummly.com/Awesome-Slow-Cooker-Pot-Roast-Allrecipes-58919.s.png"
    ),
    "French Onion Soup",
        (
        "http://i.yummly.com/French-Onion-Soup-The-Pioneer-Woman-Cooks-_-Ree-Drummond-41364-1512.s.jpg",
        "http://i.yummly.com/French-Onion-Soup-The-Pioneer-Woman-Cooks-_-Ree-Drummond-41364-1199.s.jpg",
        "http://i.yummly.com/French-Onion-Soup-The-Pioneer-Woman-Cooks-_-Ree-Drummond-41364-220.s.jpg"
    )
)
2013-02-27 22:13:34.335 CustomTableView[435:11303] tempYummlyRecipeMatch array's contents: (
    "French Onion Soup Sandwiches",
        (
        "http://i.yummly.com/French-onion-soup-sandwiches-309090-273265.s.jpg"
    ),
    "Awesome Slow Cooker Pot Roast",
        (
        "http://i2.yummly.com/Awesome-Slow-Cooker-Pot-Roast-Allrecipes-2.s.png",
        "http://i.yummly.com/Awesome-Slow-Cooker-Pot-Roast-Allrecipes-58919.s.png"
    ),
    "French Onion Soup",
        (
        "http://i.yummly.com/French-Onion-Soup-The-Pioneer-Woman-Cooks-_-Ree-Drummond-41364-1512.s.jpg",
        "http://i.yummly.com/French-Onion-Soup-The-Pioneer-Woman-Cooks-_-Ree-Drummond-41364-1199.s.jpg",
        "http://i.yummly.com/French-Onion-Soup-The-Pioneer-Woman-Cooks-_-Ree-Drummond-41364-220.s.jpg"
    ),
    "Curried Sweet Potato Soup",
        (
        "http://i.yummly.com/Curried-sweet-potato-soup-333086-295006.s.jpg"
    )
)
2013-02-27 22:13:34.335 CustomTableView[435:11303] tempYummlyRecipeMatch array's contents: (
    "French Onion Soup Sandwiches",
        (
        "http://i.yummly.com/French-onion-soup-sandwiches-309090-273265.s.jpg"
    ),
    "Awesome Slow Cooker Pot Roast",
        (
        "http://i2.yummly.com/Awesome-Slow-Cooker-Pot-Roast-Allrecipes-2.s.png",
        "http://i.yummly.com/Awesome-Slow-Cooker-Pot-Roast-Allrecipes-58919.s.png"
    ),
    "French Onion Soup",
        (
        "http://i.yummly.com/French-Onion-Soup-The-Pioneer-Woman-Cooks-_-Ree-Drummond-41364-1512.s.jpg",
        "http://i.yummly.com/French-Onion-Soup-The-Pioneer-Woman-Cooks-_-Ree-Drummond-41364-1199.s.jpg",
        "http://i.yummly.com/French-Onion-Soup-The-Pioneer-Woman-Cooks-_-Ree-Drummond-41364-220.s.jpg"
    ),
    "Curried Sweet Potato Soup",
        (
        "http://i.yummly.com/Curried-sweet-potato-soup-333086-295006.s.jpg"
    ),
    "French Onion Soup Grilled Cheese",
        (
        "http://i.yummly.com/French-onion-soup-grilled-cheese-308496-272505.s.jpg"
    )
)
2013-02-27 22:13:34.335 CustomTableView[435:11303] tempYummlyRecipeMatch array's contents: (
    "French Onion Soup Sandwiches",
        (
        "http://i.yummly.com/French-onion-soup-sandwiches-309090-273265.s.jpg"
    ),
    "Awesome Slow Cooker Pot Roast",
        (
        "http://i2.yummly.com/Awesome-Slow-Cooker-Pot-Roast-Allrecipes-2.s.png",
        "http://i.yummly.com/Awesome-Slow-Cooker-Pot-Roast-Allrecipes-58919.s.png"
    ),
    "French Onion Soup",
        (
        "http://i.yummly.com/French-Onion-Soup-The-Pioneer-Woman-Cooks-_-Ree-Drummond-41364-1512.s.jpg",
        "http://i.yummly.com/French-Onion-Soup-The-Pioneer-Woman-Cooks-_-Ree-Drummond-41364-1199.s.jpg",
        "http://i.yummly.com/French-Onion-Soup-The-Pioneer-Woman-Cooks-_-Ree-Drummond-41364-220.s.jpg"
    ),
    "Curried Sweet Potato Soup",
        (
        "http://i.yummly.com/Curried-sweet-potato-soup-333086-295006.s.jpg"
    ),
    "French Onion Soup Grilled Cheese",
        (
        "http://i.yu 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:45:08.550

在结束时`connectionDidFinishLoading`，您应该重新加载表格视图。

```
[self.tableView reloadData]; 
```

仅仅更新您的数组并不会立即更新您的表格视图。

**编辑：**你是对的，你的`while`循环条件不正确。目前，它只检查索引处的对象`matchesCount`是否不是`nil`（有点类似于`while(object)`or `while(object != nil)`）。我认为您正在寻找的是数组中的对象数量是否大于`matchesCount`以防止数组索引超出范围异常。为此，您需要使用`while([self.searchYummlyRecipeResults[@"matches"] count] > matchesCount)`.

# dynamics-crm-2011 - 当它不是您的主要实体时，您如何获取属性的值

> ID：15123580
> 
> 赞同：1
> 
> 时间：2013-02-27T22:18:28.780
> 
> 标签：dynamics-crm-2011

我正在尝试编写一个在创建帐户时触发的插件。如果有原始潜在客户，我想获取潜在客户中的公司名称并将其放在帐户名称字段中。我不知道该怎么做是从领导实体那里获取信息。

我有以下代码（我会不断更新）...

```
Entity member = service.Retrieve("lead", 
    ((EntityReference)account["originatingleadid"]).Id, new ColumnSet(true));

if (member.Attributes.Contains("companyname"))
{
    companyName = member.Attributes["companyname"].ToString();
}

if (context.PostEntityImages.Contains("AccountPostImage") &&
    context.PostEntityImages["AccountPostImage"] is Entity)
{
    accountPostImage = (Entity)context.PostEntityImages["AccountPostImage"];

    companyName = "This is a test";

    if (companyName != String.Empty)
    {
        accountPostImage.Attributes["name"] = companyName;
        service.Update(account);
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:21:58.673

潜在客户是否与帐户相关联？只需使用 IOrganizationService.Retrieve 方法来检索正确的潜在客户（假设您具有来自帐户实体的潜在客户 ID）..

在插件的执行方法中创建组织服务。

[http://msdn.microsoft.com/en-us/library/gg334504.aspx](http://msdn.microsoft.com/en-us/library/gg334504.aspx)

这里还有一个编写插件的好例子：

[http://mscrmkb.blogspot.co.il/2010/11/develop-your-first-plugin-in-crm-2011.html?m=1](http://mscrmkb.blogspot.co.il/2010/11/develop-your-first-plugin-in-crm-2011.html?m=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T23:11:33.313

我暂时不会破坏你的乐趣，但总体思路是：

1.  抓住*Create*的消息。
2.  *从您的实体*（即您创建的帐户）中提取 guid 。
3.  从其*EntityReference*获取 guid （这是您的线索）。
4.  从中读取适当的字段。
5.  更新您帐户中的名称字段。
6.  存储信息。

哪个步骤给您带来了问题？:)
与往常一样，我建议在 fetchXML 之前使用查询表达式。YMMV

# war - 如何将 WAR 文件部署到 Tomcat 5.5？

> ID：15123583
> 
> 赞同：2
> 
> 时间：2013-02-27T22:19:02.153
> 
> 标签：war, tomcat5.5

我想在 LINUX 上运行的 Tomcat 上测试我当前的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:35:47.367

[单击此处](http://tomcat.apache.org/tomcat-5.5-doc/manager-howto.html)查看有关如何将 WAR 文件部署到 Tomcat 5.5 的说明。

或者，检查您的`{tomcat}\conf\server.xml`文件中的`Host`节点并按`appBase`如下方式引用属性：

```
<Host name="localhost" appBase="{THIS VALUE REPRESENTS A FILE PATH WHERE YOU CAN DROP YOUR WAR FILE MANUALLY}"
  unpackWARs="true" autoDeploy="true"
  xmlValidation="false" xmlNamespaceAware="false"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-13T16:37:30.013

我以自己的方式找到了解决方案，并希望这对正在寻找相同解决方案的人有所帮助。

1）要从eclipse创建一个war文件，右键单击MyApp>export>war文件>浏览目标路径>完成

[2) 从http://tomcat.apache.org/](http://tomcat.apache.org/)下载 Apache Tomcat Server 5.5并将 tar.gz 解压缩（安装）到所需的文件夹。

3) 确保在您的机器中配置了 java 环境变量（JAVA_HOME 和 PATH）。

$ 回声 $JAVA_HOME

```
If not, go ahead and add them to the bash_profile or bashrc with the JDK or JRE absolute path.
For example: 
$ which java
/usr/bin/java
$ ls -l /usr/bin/java
lrwxrwxrwx. 1 root root 22 Jan 24 13:11 /usr/bin/java -> /etc/alternatives/java
$ ls -l /etc/alternatives/java
lrwxrwxrwx. 1 root root 42 Jan 24 13:11 /etc/alternatives/java -> /usr/lib/jvm/jre-1.6.0-ibm.x86_64/bin/java 
```

4）通过给出以下行添加到 bash_profile 或 bashrc

```
$ gedit ~/.bashrc
$ export JAVA_HOME=/usr/lib/jvm/jre-1.6.0-ibm.x86_64
$ export PATH=$PATH:/usr/lib/jvm/jre-1.6.0-ibm.x86_64/bin 
```

5）注销并重新登录以反映更改。

6) 要启动 Tomcat 5.5 服务器，请转到步骤 2 中提到的解压文件夹 (apache_tomcat_5.5.XX)。apache_tomcat_5.5.XX/bin --> 右键 --> 在终端中打开 --> ./startup.sh

```
 If the server could not and complains about permissions, add the execute permission to the .sh files by using
 chmod 700 *.sh (Your terminal should point at tomcat's bin folder) 
```

7) 启动服务器后，在浏览器中输入 localhost:8080。如果您看到 Tomcat 的主页，那么您已经成功配置了 Tomcat 服务器设置。

8) 要访问 Tomcat 的管理器模块，您必须在 apache_tomcat_5.5.XX/conf/tomcat-users.xml 中添加以下行

```
 <role rolename="manager"/>
  <role rolename="admin"/>
  <user username="admin" password="admin" roles="admin,manager"/> 
```

如果您的 xml 已经默认配置了经理角色，请忽略此步骤。

9) 单击管理下左侧菜单中的 Tomcat 管理器，输入 admin 作为您的用户名和密码以访问管理器模块。

10) 在这里您可以选择您的 buildcentral 战争文件并将其部署到服务器。单击更新表中的 buildcentral 链接以从浏览器访问应用程序。

PS：如果您在第 10 步之后有任何错误，您可以查看与您的 war 文件关联的运行时错误的日志文件。转到 apache_tomcat_5.5.XX/logs/Catalina.out

# javascript - HTML Select 的 onClick 事件

> ID：15123584
> 
> 赞同：2
> 
> 时间：2013-02-27T22:19:04.483
> 
> 标签：javascript, html, html-select

我的 HTML 选择有问题，我想在其中将较长的选项显示为省略号。我可以通过 javascript onChange 实现这一点，在其中我检查所选选项文本的长度，如果它大于 N，它将其更改为省略号文本。这里的问题是，一旦选择并省略了该选项，然后我再次单击选择框，原始文本现在显示为省略号。我需要始终显示原始选项列表并仅在选择选项时执行省略号。

我的 onChange 代码看起来像

```
if(option[selectedIndex].text.length > N){
    var val = option[selectedIndex].text;
    option[selectedIndex].text = option[selectedIndex].text.substr(0,N) + "...";
} 
```

我认为实现此目的的方法之一是在单击选择时刷新原始列表。不幸的是，我的浏览器不支持 HTML 选择上的“点击”事件。即使我使用

```
event.preventDefault(); 
```

DOM 识别 click 事件，但仅在列表显示后才被触发，从而违背了目的。就像我在这里做的事情 [jsFiddle](http://jsfiddle.net/ankurshukla/pGwQe/1/)

在这种情况下我不能使用 jQuery 也是一个很大的限制！

请指教！

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:54:57.887

要完成您想要的，您必须首先创建一个嵌套在 select 元素中的“虚拟”选项元素，并使用 CSS 将其隐藏。当用户更改该值时，您将用用户选择的选项的值覆盖虚拟显示值。

之后，当用户选择一个新选项时，'dummy' 值将被隐藏，但仍会填充在主选择框中。这是基于您以前的 jsfiddle 的一些粗略代码。

警告：我不确定此解决方案的兼容性。

**HTML：**

```
<select id="select-el">
    <option id="display-el" value="-1">Can't see me</option>
    <option id="id1" value="1">Option 1</option>
    <option id="id2" value="2">Option 2</option>
    <option id="id3" value="3">Option 3</option>
    <option id="id4" value="4">Option 4</option>
    <option id="id5" value="5">Option Longer</option>
</select> 
```

**CSS：**

```
#display-el {
  display:none;
  visibility: hidden;
} 
```

**JavaScript：**

```
var N = 8;

var selectEl = document.getElementById('select-el');
var displayEl = document.getElementById('display-el');

selectEl.onchange= function(e) {
    var index = selectEl.selectedIndex;
    var option = selectEl[index];

    selectEl.selectedIndex = 0;

    if(option.text.length > N){
        displayEl.text = option.text.substr(0, N) + "...";
    } else {
        displayEl.text = option.text
    }

    displayEl.value = option.value;
    console.log(displayEl.value);
} 
```

我在这里分叉了你的 jsFiddle：http: [//jsfiddle.net/3v8yt/](http://jsfiddle.net/3v8yt/)所以你可以检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:32:31.613

我可以想到两个选择。

选项1：具有“真实文本”的隐藏元素，比方说：

```
<input type="option1" value="Real text1" />
<input type="option2" value="Real text2" /> 
```

然后，当检测到 onchange 时，重新填充选择列表（与您的类似，但对于一个元素，将真实文本应用于所有元素），然后将您的代码应用于选定的（'...'）。

选项 2：在将文本更改为“...”之前，保存状态，我猜你只需要两个 javascript 变量，比方说：

```
var actualOption = 0;
var realText = ''; 
```

在应用“...”之前，在检测到 onchange 时将实际状态设置为这些变量，例如： 1 - 在更改之前，在实际选项上设置 realText（实际上带有 '...' 的选项） 2 - 保存 realText 加上带有新选项的实际选项（将要更改） 3 - 应用“...”

当检测到新的 onchange 时，它​​应该恢复先前选择的选项的文本，并设置新的。

希望你能理解...

编辑：很长一段时间我不纯粹的 JS 工作，但我会尝试。

在您的代码的某个时刻，声明 2 个全局变量：

```
var actualOption = 0;
var realText = ''; 
```

在您的 onchange 函数上应用如下内容：

```
(...)
if (actualOption!=0) option[actualOption].text = realText;
(...) 
```

在你的 if(option[selectedIndex .....，应用类似的东西：

```
var val = option[selectedIndex].text;
realText = val;
actualOption = selectedIndex;
option[selectedIndex].text = option[selectedIndex].text.substr(0,N) + "..."; 
```

在简历中：在更改之前保存所选选项的状态。当检测到新的 onchange 时，恢复之前选择的选项，并保存新选择的选项状态。

我认为它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T04:40:51.683

实际上，您只需使用 css 就可以实现您想要的，根本不需要使用 Javascript 替换选项文本。您甚至可以对 select 和 option 使用相同的 css。

CSS：

```
select, select option {
  overflow: hidden;
  text-overflow: ellipsis;
} 
```

如果您为选择和/或选项设置了宽度（或最大宽度）值，您应该看到文本在末尾包含省略号，就在它被切断之前。

查看[这个 jsfiddle 示例](http://jsfiddle.net/4TeLH/6/)，了解它的实现有多容易。

# regex - 基于正则表达式递归地重命名目录和文件

> ID：15123587
> 
> 赞同：0
> 
> 时间：2013-02-27T22:19:12.123
> 
> 标签：regex, linux, bash, pcre

我正在尝试剥离所有“？” 在给定目录中的文件名中，谁有更多的子目录，并且在其中有子目录。我尝试过使用带有系统调用的简单 perl 正则表达式脚本，但它无法递归每个子目录，手动操作会浪费太多时间。我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:28:38.840

您可以使用**find**命令搜索带有“？”的文件名。然后使用其*exec*参数运行删除“？”的脚本 文件名中的字符。考虑这个脚本，你可以将它保存到`/usr/local/bin/rename.sh`，例如（记得给它 +x 权限）：

```
#!/bin/sh
mv "$1" "$(echo $1| tr -d '?')" 
```

然后这将完成这项工作：

```
find -name "*\?*" -exec rename.sh {} \; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:29:32.843

试试这个 ：

```
find -name '*\?*' -exec prename 's/\?//g' {} + 
```

请参阅[https://metacpan.org/module/RMBARKER/File-Rename-0.06/rename.PL](https://metacpan.org/module/RMBARKER/File-Rename-0.06/rename.PL)`rename` （这是Ubuntu 发行版上的默认命令）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T23:54:08.063

查找所有带有“？”的名称 并删除所有这些。可能 -exec 选项也可以使用，但需要额外的脚本

```
for f in $(find $dir -name "*?*" -a -type f) ; do
    mv $f ${f/?/}
done 
```

# python - 在熊猫数据框中选择不同的列

> ID：15123591
> 
> 赞同：2
> 
> 时间：2013-02-27T22:19:19.147
> 
> 标签：python, pandas

我正在尝试使用选择键在熊猫数据框中选择不同的列

假设我的数据框是，

```
import pandas as pnd
s1 = pnd.Series ([0,3,6,7])
s2 = pnd.Series ([1,4,8,9])
s3 = pnd.Series ([2,5,10,11])
df = pnd.DataFrame({'A':s1, 'B':s2, 'C':s3})

   A  B   C
0  0  1   2
1  3  4   5
2  6  8  10
3  7  9  11 
```

我的选择键是，

```
s4 = pnd.Series (['A','B','C','A'])

0    A
1    B
2    C
3    A 
```

我想要的结果是，

```
0  0
1  4
2  10
3  7 
```

我想我可以运行一个 for 循环来做到这一点

```
l = []
for idx in df.index:
    l.append( df[s4[idx]][idx])
s5 = pnd.Series(l)
print s5 
```

有没有更好/更短/更有效的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T22:56:53.843

```
pnd.Series(df.lookup(df.index, s4), df.index) 
```

# jquery - jquery 更改表单操作

> ID：15123592
> 
> 赞同：1
> 
> 时间：2013-02-27T22:19:21.033
> 
> 标签：jquery, forms

肯定有问题可以帮助解决这个问题，但我似乎无法让我的工作......

试图将我的表单操作基于菜单。显然有什么问题，并会感谢任何想法！

```
$("#role").change(function() {
    if ($(this).val() == "audience");
    var action = "./";
    } else {
    var action = "http://google.com";
$("#landing_form").attr("action", action);
});

  <form action="./" method="post" id="landing_form">
    <select name="role" id="role">
      <option value="audience">Audience</option>
      <option value="presenter">Presenter</option>
      <option value="moderator">Moderator</option>
    </select> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T22:23:48.143

有一些语法错误，缺少花括号等。

```
$(function() {
    $("#role").on('change', function() {
        if (this.value == "audience") {
            var action = "./";
        } else {
            var action = "http://google.com";
        }
        $("#landing_form").attr("action", action);
    });
}); 
```

# javascript - ECMAScript 规范 v5 中缺少有关输入在全局范围内声明的函数时会发生什么的详细信息？

> ID：15123595
> 
> 赞同：2
> 
> 时间：2013-02-27T22:19:41.763
> 
> 标签：javascript, ecmascript-5, ecma262

ECMAScript 规范详细介绍了当控制进入**[函数内函数](http://www.ecma-international.org/ecma-262/5.1/#sec-10.4.3)**的执行上下文时会发生什么。

```
function foo() {
  function bar() {

  }
  bar(); // Control will be given to the bar function.  Details specified by spec
} 
```

还有一个解释当控制[进入全局代码](http://www.ecma-international.org/ecma-262/5.1/#sec-10.4.1)时会发生什么。

```
<script>
  // Entering global code!  Details specified by spec
</script> 
```

但是，没有具体说明**在为全局代码中定义的函数**输入控制权时会发生什么。

```
<script>
  function foo() {
  }
  foo(); // Calling a function defined in the global environment...not specified by spec
</script> 
```

**编辑**：这对我很重要的原因是因为我很好奇全局代码调用的函数的内部 [[Scope]] 属性是什么。我假设它将是全局执行上下文的词法环境，但在规范中没有指定这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:33:21.307

我认为您误解了那句话（来自[§10.4.3，*输入功能代码*](http://www.ecma-international.org/ecma-262/5.1/#sec-10.4.3)）：

> 当控制进入函数对象中包含的函数代码的执行上下文时，执行以下步骤`F`，提供的调用者`thisArg`和提供的调用者`argumentsList`[…]

这并不意味着输入的函数必须包含在 中`F`，而是表示*输入的代码*包含在*函数`F`*（您正在调用的函数）中。

[调用函数](http://www.ecma-international.org/ecma-262/5.1/#sec-11.2.3)时使用的[`[[Call]]`方法](http://www.ecma-international.org/ecma-262/5.1/#sec-13.2.1)不区分全局/局部声明或调用的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T01:21:51.883

在全局代码中声明的函数在 10.4.1 的步骤 2 中全局代码的声明绑定实例化期间被实例化。

这是通过 10.5 的步骤 5.c 完成的，该步骤实际上是通过第 13 节中的第一个算法创建每个这样的函数对象。请注意，这会将函数的 [[Scope]] 设置为当前执行上下文的 VariableEnvironment。当前执行上下文由 10.4.1 的第 1 步（通过 10.4.1.1）设置到全局环境。

# django - 何时在 Django 1.5 中使用自定义用户模型

> ID：15123596
> 
> 赞同：14
> 
> 时间：2013-02-27T22:19:45.090
> 
> 标签：django, django-1.5

我对 Django 1.5 中的自定义用户模型有疑问

所以现在默认的用户模型对我来说很好，我只需要添加一些其他变量，例如性别、位置和生日，以便用户在成功注册并激活他们的帐户后填写这些变量。

那么，实现此场景的最佳方法是什么？

我是否必须创建一个名为 Profile 的新应用并继承 AbstractBaseUser？并将我的自定义变量添加到models.py？有什么好榜样可以让我效仿吗？

先感谢您

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-27T22:30:08.653

您想将您的用户模型扩展到`AbstractUser`并添加您的附加字段。`AbstractUser`继承所有标准用户配置文件字段，而`AbstractBaseUser`从头开始，没有任何这些字段。

很难在接近发布的时候定义最佳实践，但似乎除非您需要彻底重新定义 User 模型，否则您应该`AbstractUser`尽可能使用。

[以下是使用扩展用户模型的文档`AbstractUser`](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#extending-django-s-default-user)

然后你`models.py`会看起来像这样：

```
class MyUser(AbstractUser):
    gender = models.DateField()
    location = models.CharField()
    birthday = models.CharField() 
```

`MyUser`然后将具有 User 模型附带的标准电子邮件、密码、用户名等字段，以及上面的三个附加字段。

然后你需要添加`AUTH_USER_MODEL`到你的`settings.py`：

`AUTH_USER_MODEL = 'myapp.MyUser'`

# html - 是否可以将 HTML 元素固定到另一个元素的底部？

> ID：15123600
> 
> 赞同：5
> 
> 时间：2013-02-27T22:19:55.357
> 
> 标签：html, css, flow

一个简单的问题，一个简单的问题。我正在研究一种用相对简单的 HTML 来表示文本文档（例如书页）的方法。每个 HTML 文档可以显示许多页面。我遇到的最大问题是页脚。当然，我希望它很简单；也许只是一个`<FOOTER>`带有纯文本的标签。但是，无论前面有多少文字，我都无法理解如何强制它停留在页面底部。**有没有办法将 HTML 元素固定到另一个元素的底部？**

这是一个例子：

> [http://prog.bhstudios.org/documents.htm](http://prog.bhstudios.org/documents.htm)

`position:relative`不起作用，因为我不知道页脚的原始位置会在哪里，除了“在其父级中的某个位置”。

`position:absolute; bottom:0`不起作用，因为这是相对于查看窗口的最左上角位置，而不是相对于元素的父级

`position:fixed; bottom:0`不起作用，因为这会将其从流程中取出并将其“固定”到查看窗口的底部，完全独立于元素的父级。

**我想要一些可以按预期`float:bottom`工作的东西。**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T22:22:34.290

我只是在做类似的事情：

```
<div style="position: relative; height: 300px;">
    <h1>some content on top</h1>

    <div style="position: absolute; bottom: 0px; background: #cccccc;">
        this is on bottom!
    </div>
</div> 
```

# blogger - Blogger 是否提供检查浏览器类型和版本的方法？

> ID：15123609
> 
> 赞同：0
> 
> 时间：2013-02-27T22:20:22.357
> 
> 标签：blogger

我正在谷歌上搜索有关 Blogger 是否提供检查浏览器类型和版本的方法，但没有任何消息。也许这里有人对此有明确的“是”或“否”？如果“是”，也许提供一个简短的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:06:12.310

这样的博主没有办法独占。如果有办法回答你的问题，那就是通过html。

你的意思是这样的小提琴？有一些错误所以加密的jsfiddle。

[http://goo.gl/NKuop](http://goo.gl/NKuop)或 jsfiddle(dot)net/hSxu8/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T13:17:50.910

这是你想要的？
用于检测访问者浏览器的 JavaScript 代码？

```
<script type="text/javascript">
browsername=navigator.appName;
if (browsername.indexOf("Netscape")!=-1) {browsername="NS"}
else
{if (browsername.indexOf("Microsoft")!=-1) {browsername="MSIE"}
else {browsername="N/A"}};
// Browserdetectionscript made by Henrik Petersen / NetKontoret
// Script explained at www.echoecho.com/javascript.htm
// Please do not remove this and the two lines above.
// Detect the browsername
browserversion="0";
if (navigator.appVersion.indexOf("2.")!=-1) {browserversion="2"};
if (navigator.appVersion.indexOf("3.")!=-1) {browserversion="3"};
if (navigator.appVersion.indexOf("4.")!=-1) {browserversion="4"};
if (navigator.appVersion.indexOf("5.")!=-1) {browserversion="5"};
if (navigator.appVersion.indexOf("6.")!=-1) {browserversion="6"};

// Send visitor to relevant pages
if (browsername=="NS") {window.location="http://stackoverflow.com"};
if (browsername=="MSIE"){
  if (browserversion<4){window.location="http://www.google.com"}
  else {window.location="http://www.facebook.com"}
}
if (browsername=="N/A") {window.location="http://www.aslamise.blogspot.com"};
</script> 
```

如果没有，请告诉我们，你需要用它做什么。
如果是，请投票并标记为已接受的答案。:)

# java - 我可以在纯 Java 中实现 park/unpark 方法吗？

> ID：15123611
> 
> 赞同：4
> 
> 时间：2013-02-27T22:20:29.387
> 
> 标签：java, synchronization, jvm, concurrent-programming

我知道 LockSupport 是 JDK 的一部分，但我想知道下面的实现在语义上是否正确。观察 Object.wait 可以处理线程中断的问题。我的问题与性能无关。但是，只要您的解决方案仅使用基本结构，如等待、通知和同步，我将不胜感激任何改进我的解决方案的建议。

非常感谢。

```
final class LockSupport {
    static void park(long time) {
        Thread th = Thread.currentThread();
        if (th instanceof MyThread) {
            MyThread h = (MyThread)th;
            synchronized (h.obj) {
                if (h.permit) {
                    h.permit = false;
                    return;
                }
                try {
                    h.obj.wait(time);
                } catch (InterruptedException e) { }
            }
        }
    }

    static void unpark(MyThread h) {
        synchronized (h.obj) {
            h.permit = true;
            h.obj.notify();
        }
    }
}

abstract class MyThread extends Thread {
    public Object obj = new Object();
    public boolean permit = true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T23:13:31.827

初始许可应该是假的。

当捕获到中断时，需要重新中断当前线程

```
 catch (InterruptedException e) { th.interrupt(); } 
```

因为如果`park()`由于中断返回，应该设置中断状态（参见javadoc示例）

完成`wait()`后，通常或因中断而突然消耗许可证。

在`unpark()`中，如果 permit 已经为真，则无需通知。

# c# - 更新大表（很多列）。C# .NET

> ID：15123613
> 
> 赞同：7
> 
> 时间：2013-02-27T22:20:35.210
> 
> 标签：c#, .net, sql, ado.net, sql-server-2000

我必须更新一个包含 270 多个更新字段的大表。

我对 .NET 比较陌生，需要建议在这种情况下使用什么更好：SqlCommand，某种内存映射表或 DataSet，或者它可能存在某种使用 DB 元数据自动生成的对象？请帮忙。

原因：我有一个旧的大型 Delphi7 应用程序，其中一部分负责侦听套接字上的一些数据包，这些数据包被编组到大型结构，并在最后一步存储在 DB 中。现在我将这部分移植到新的 C# 服务中，至少实际上我必须保留相同的逻辑。问题是结构很大（超过 220 个字段），存储它的表有近 300 个字段。从我的 220 个字段的结构中扣除/计算其他约 50 个字段，所有字段都应在数据库中更新。实际的 Delphi 代码是丑陋的蚂蚁，它像 table 本身一样增长了几年，像这样：

```
'UPDATE TABLE_NAME ' +
  '  MSG_TYPE = ' + IntToStr(integer(RecvSruct.MSG_TYPE)) + ' ' + 
  ' ,SomeFLOATfield = ' + FloatToStr(RecvSruct.SomeFLOATfield) + ' ' + 
  ... //and other over 270 fileds here
'WHERE ID = ' + IntToStr(obj.ID) 
```

没有任何动态 SQL 等。实际上我无法更改数据库结构。所以我只能在代码中播放，我不确定是否适当地翻译代码。表格用于一些报告和统计。一些计算/扣除的字段必须处理源代码中的一些常量。

使用的开发工具：MS SQL Server 2000、C# .net2.0、VS2008

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:56:50.470

最简单的解决方案在这里适用，因为 ole db 的工作方式是使用字符串。所以，要传递 270、500、1000 个参数，我所做的只是传递一个字符串，包含 270 个参数的字符串可能远低于 2kb ......在现代计算中......继承 1...... 不会有性能损失。这里有一个 xml 解决方案，但这只是苹果和橘子，你仍然在传递字符串，但是它需要额外的代码来处理 xml。所以......你的架构应该是这样的：

1.  SQL server 上的存储过程，有 270 个输入参数：

    ```
     Create Procedure sp_Example1 
     (@param1 [type], @param2 [type], @param3 [type], etc...)
     AS 
     BEGIN
     [SQL statements]
     END 
    ```

2.  具有 270 个参数的命令对象：

    ```
    SqlCommand cmd = new SqlCommand("sp_Example1", [sqlconnectionstring]);
    cmd.Parameters.Add(New SqlParameter("@param1", param1.value));
    cmd.Parameters.Add(New SqlParameter("@param2", param2.value));
    cmd.Parameters.Add(New SqlParameter("@param3", param3.value)); 
    ```

请记住，您仍在执行非常密集的操作，但您的基准应该是旧应用程序。如果它更糟一点，我不会担心，因为该框架需要更多的计算开销。

我不知道为什么它不会格式化代码......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:31:30.507

好的。由于您可以添加一个新的存储过程，我建议将所有值打包，并将其作为 XML 传送到您的存储过程。

你可以在这里找到一个例子：http: [//granadacoder.wordpress.com/2009/01/27/bulk-insert-example-using-an-idatareader-to-strong-dataset-to-sql-server-xml/](http://granadacoder.wordpress.com/2009/01/27/bulk-insert-example-using-an-idatareader-to-strong-dataset-to-sql-server-xml/)

好消息是，我的示例较旧并且编码为 Sql Server 2000（使用 OPENXML）。

..

这比将 300 个参数发送到存储过程（恕我直言）要好。

另一个优点是，如果您有超过 1 行数据，您也可以将其发送下来。

……

它的“要点”：

首先，您可以在此处获取 2000 个“pubs”数据库：

[http://www.microsoft.com/en-us/download/details.aspx?id=23654](http://www.microsoft.com/en-us/download/details.aspx?id=23654)

现在添加这个存储过程：

/* 美国药典 */

```
DROP PROCEDURE dbo.uspTitleUpsert
GO

CREATE  PROCEDURE dbo.uspTitleUpsert (
    @xml_doc TEXT , 
    @numberRowsAffected int output  --return
)

AS 

SET NOCOUNT ON 

DECLARE @hdoc INT -- handle to XML doc

DECLARE @errorTracker int -- used to "remember" the @@ERROR

DECLARE @updateRowCount int
DECLARE @insertRowCount int 

--Create an internal representation of the XML document.    
EXEC sp_xml_preparedocument @hdoc OUTPUT, @XML_Doc    

-- build a table (variable table) to store the xml-based result set
DECLARE @titleupdate TABLE (  
    identityid int IDENTITY (1,1) , 

title_id varchar(6) , 
title varchar(80) , 
type varchar(32) , 
pub_id varchar(32) , 
price money , 
advance money , 
royalty varchar(32) , 
ytd_sales varchar(32) , 
notes TEXT , 
pubdate datetime
)

--the next call will take the info IN the @hdoc(with is the holder for @xml_doc), and put it IN a variableTable
INSERT @titleupdate
    (
        title_id ,
        title ,
        type ,
        pub_id ,
        price ,
        advance ,
        royalty ,
        ytd_sales ,
        notes ,
        pubdate
    )
SELECT  
    title_id ,
    title ,
    type ,
    pub_id ,
    price ,
    advance ,
    royalty ,
    ytd_sales ,
    notes ,
    getdate() /*dbo.udf_convert_xml_date_to_datetime (pubdate)*/
FROM  
    -- use the correct XPath .. the second arg ("2" here) distinquishes
    -- between textnode or an attribute, most times with
    --.NET typed datasets, its a "2"
    --This xpath MUST match the syntax of the DataSet
 OPENXML (@hdoc, '/TitlesDS/Titles', 2) WITH (  

    title_id varchar(6) , 
    title varchar(80) , 
    type varchar(32) , 
    pub_id varchar(32) , 
    price money , 
    advance money , 
    royalty varchar(32) , 
    ytd_sales varchar(32) , 
    notes TEXT , 
    pubdate varchar(32)

)  

EXEC sp_xml_removedocument @hdoc

select * from @titleupdate

SET NOCOUNT OFF

Update 
    dbo.titles 
set 
    title = vart.title , 
    type = vart.type , 
    pub_id = vart.pub_id , 
    price = vart.price , 
    advance  = vart.advance , 
    royalty  = vart.royalty , 
    ytd_sales  = vart.ytd_sales , 
    notes  = vart.notes , 
    pubdate  = vart.pubdate 
FROM
    @titleupdate vart , dbo.titles realTable
WHERE
    (rtrim(upper(realTable.title_id))) = ltrim(rtrim(upper(vart.title_id)))
    and
    exists 
    (
        select null from dbo.titles innerRealTable where (rtrim(upper(innerRealTable.title_id))) = ltrim(rtrim(upper(vart.title_id)))
    )

Select @updateRowCount = @@ROWCOUNT

INSERT INTO dbo.titles
    (
        title_id ,
        title ,
        type ,
        pub_id ,
        price ,
        advance ,
        royalty ,
        ytd_sales ,
        notes ,
        pubdate
    )
Select
    title_id ,
    title ,
    type ,
    pub_id ,
    price ,
    advance ,
    royalty ,
    ytd_sales ,
    notes ,
    pubdate
FROM
    @titleupdate tu
WHERE
    not exists 
    (
        select null from dbo.titles innerRealTable where (rtrim(upper(innerRealTable.title_id))) = ltrim(rtrim(upper(tu.title_id)))
    )

Select @insertRowCount = @@ROWCOUNT

print '/@insertRowCount/'
select @insertRowCount
print ''

print '/@updateRowCount/'
select @updateRowCount
print ''

select @numberRowsAffected = @insertRowCount + @updateRowCount

--select * from titles

SET NOCOUNT OFF

GO

--GRANT EXECUTE on dbo.uspTitleUpsert TO pubsuser

GO 
```

/* 示例用法 */

```
EXEC dbo.uspTitleUpsert
'
<TitlesDS>
    <Titles>
        <title_id>PN3333</title_id>
        <title>Peanut Cooking</title>
        <type>trad_cook</type>
        <pub_id>0877</pub_id>
        <price>3.33</price>
        <advance>4444.00</advance>
        <royalty>1</royalty>
        <ytd_sales>33</ytd_sales>
        <notes>Peanut Cooking Notes</notes>
        <pubdate></pubdate>
    </Titles>

    <Titles>
        <title_id>SSMS4444</title_id>
        <title>Sql Server Management Studio</title>
        <type>programming</type>
        <pub_id>0877</pub_id>
        <price>13.33</price>
        <advance>5444.00</advance>
        <royalty>2</royalty>
        <ytd_sales>33</ytd_sales>
        <notes>Sql Server Management Studio Notes</notes>
        <pubdate></pubdate>
    </Titles>   

</TitlesDS>
'
, 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:55:42.053

1.  您可以将表拆分为新表，然后创建与旧表同名的视图，用于连接、切换、强制转换等，以将新表转换为报表的旧结构。

2.  如果您确实使用命令（例如您发布的 Delphi 代码），请使用参数来防止 SQL 注入。

3.  使用当前的数据库结构，您使用开箱即用的 ORM 可能会很累，因为您有大量的列要映射。您可以将 POCO 类创建为类型安全模型，然后使用数据表示法或自定义属性来简化映射，然后根据属性动态创建 SQL 命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T23:02:10.957

恐怕没有什么特别的兔子可以从.net 帽子中拔出来。

除了“知道”只有一些完全独立的字段发生了变化并仅为它们构建更新语句的复杂性之外，你已经被填满了。

即使知道这会更好地存储为 blob 并不能真正帮助您。在任何情况下都可能不是真的。

参数化查询或存储过程在代码中看起来会更整洁一些，但无论如何都可以在 delphi 中完成。

没有办法从这里说它应该如何完成，但一个可能有里程的想法是将当前表隐藏在除了一小组函数之外的所有内容中。

例如，如果您要重命名它，然后使用当前名称创建视图。阅读的东西和（可能是写入它的大量代码）都不会注意到。如果您可以达到仅通过视图和一些存储过程访问原始表的程度，那么您可以开始破解结构。

仅代码（无 sql）将在应用程序和表之间插入 ORM 样式访问。这是一个应该基于您的技能组合和应用程序组合的决定，而不是其他任何事情。

除非您能够并且准备好将所有应用程序与此表的特定实现分离，否则您只是在打磨粪便。没有必要为此花费宝贵的资源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T22:40:52.373

使用[Simple.data](http://simplefx.org/simpledata/docs/)可以简化您的代码和逻辑（尽管它需要 .NET 4.0）

# shared-libraries - Eclipse 找不到 32 位 ncurses 库

> ID：15123615
> 
> 赞同：3
> 
> 时间：2013-02-27T22:20:36.117
> 
> 标签：shared-libraries, static-libraries, ncurses

我正在运行 Ubuntu，需要在我的程序中使用 32 位版本的 ncurses。我使用 wget 从[http://ftp.gnu.org/pub/gnu/ncurses/ncurses-5.9.tar.gz](http://ftp.gnu.org/pub/gnu/ncurses/ncurses-5.9.tar.gz)下载了 ncurses-5.9 。然后我输入：

```
gzip -dc < ncurses-5.9.tar.gz | tar -xf -
cd ncurses-5.9 
```

此时，我遵循了[此处](http://cross-lfs.org/view/svn/sparc64/final-system/ncurses.html)列出的所有说明（我也在下面列出了它们：

```
CC="gcc ${BUILD32}" CXX="g++ ${BUILD32}" \
./configure --prefix=/usr --libdir=/lib \
--with-shared --without-debug --enable-widec \
--with-manpage-format=normal \
--with-default-terminfo-dir=/usr/share/terminfo

make
make install
mv -v /usr/bin/ncursesw5-config{,-32}
mv -v /lib/lib{panelw,menuw,formw,ncursesw,ncurses++w}.a /usr/lib

rm -v /lib/lib{ncursesw,menuw,panelw,formw}.so
ln -svf ../../lib/libncursesw.so.5 /usr/lib/libncursesw.so
ln -svf ../../lib/libmenuw.so.5 /usr/lib/libmenuw.so
ln -svf ../../lib/libpanelw.so.5 /usr/lib/libpanelw.so
ln -svf ../../lib/libformw.so.5 /usr/lib/libformw.so 
```

所有这些命令都成功执行。然而，当我去运行我的程序时，我使用了适当的标志，`-lncurses`但我得到了错误：`/usr/bin/ld: cannot find -lncurses`

从终端我可以看到`libncurses libncurses++w.a libncursesw.a libncursesw.so`都在`/usr/lib`并且`ncurses5-config ncursesw5-config-32` 在`/usr/lib`.

请告知我应该尝试改变什么，非常感谢！

# qt - 如何将 QCalendarWidget 与 QDataWidgetMapper 一起使用？

> ID：15123618
> 
> 赞同：3
> 
> 时间：2013-02-27T22:20:46.087
> 
> 标签：qt, pyside, model-view

我目前使用 QDataWidgetMapper 像这样（使用 PySide）映射我的日历小部件：

```
self.mapper.addMapping(self.ui.calendar, 2, "selectedDate") 
```

当我这样做时，它确实显示了正确的日期：

```
self.mapper.toFirst() 
```

但我的问题是，当我单击不同的日期更改所选日期时，映射不会捕获更改并将其保存到数据库中。换句话说，如果我选择使用委托，映射器不会在模型或 setModelData 上发出 setData。

我错过了什么？

编辑：我找到了解决方案。我上面做的是对的，但是映射器没有自动提交数据。我所做的是：

```
self.ui.calendar.selectionChanged.connect(self.ui.mapper.submit()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-16T13:30:42.270

我找到了解决方案。我上面做的是对的，但是映射器没有自动提交数据。我所做的是：

self.ui.calendar.selectionChanged.connect(self.ui.mapper.submit())

# vba - Excel VBA - 使用单元格引用范围

> ID：15123625
> 
> 赞同：3
> 
> 时间：2013-02-27T22:21:17.043
> 
> 标签：vba, excel

我正在尝试将`validation`（使用 DataValidation:List）动态添加到工作表中的范围。我录制了一个生成以下代码的宏：

```
With Worksheets("Clusters").Range("C2:C100").Validation
    .Delete
    .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
    xlBetween, Formula1:="=Managers"
    .IgnoreBlank = True
    .InCellDropdown = True
    .InputTitle = ""
    .ErrorTitle = ""
    .InputMessage = ""
    .ErrorMessage = ""
    .ShowInput = True
    .ShowError = True
End With 
```

这对于静态范围 C2:C100 工作正常，但列可能并不总是 C。我有一个包含列号的变量 cMANFCM。我试图编辑代码以使用它：

```
With Worksheets("Clusters").Range(Cells(2,cMANFCM), Cells(100, cMANFCM)).Validation
    .Delete
    .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
    xlBetween, Formula1:="=Managers"
    .IgnoreBlank = True
    .InCellDropdown = True
    .InputTitle = ""
    .ErrorTitle = ""
    .InputMessage = ""
    .ErrorMessage = ""
    .ShowInput = True
    .ShowError = True
End With 
```

为什么这不起作用，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T23:03:02.183

您的代码适用于我的 - 我添加了一行来删除*所有*现有的验证，它确实创建了新的验证而不会引发错误：

许多验证参数可能会被忽略......并且您可以选择在其他工作表处于活动状态时如何引用工作表/范围：

```
Option Explicit
Sub control()
    'Call changeValidation(4)
    'Call changeValidationPAlbert(5)
    Call changeValidationTWilliams(6)
End Sub

Sub changeValidation(cMANFCM As Integer)

With Excel.ThisWorkbook.Worksheets("Clusters")
    .Cells.Validation.Delete
    .Range(.Cells(2, cMANFCM), .Cells(100, cMANFCM)).Validation.Add _
            Type:=xlValidateList, _
            AlertStyle:=xlValidAlertStop, _
            Operator:=xlBetween, _
            Formula1:="=managers"
End With

End Sub
Sub changeValidationAlbert(cMANFCM As Integer)

With Excel.ThisWorkbook.Worksheets("Clusters")
    .Cells.Validation.Delete
    .Range("A2:A100").Offset(, cMANFCM - 1).Validation.Add _
            Type:=xlValidateList, _
            AlertStyle:=xlValidAlertStop, _
            Operator:=xlBetween, _
            Formula1:="=managers"
End With

End Sub
Sub changeValidationTWilliams(cMANFCM As Integer)

With Excel.ThisWorkbook.Worksheets("Clusters")
    .Cells.Validation.Delete
    .Cells(2, cMANFCM).Resize(100, 1).Validation.Add _
            Type:=xlValidateList, _
            AlertStyle:=xlValidAlertStop, _
            Operator:=xlBetween, _
            Formula1:="=managers"
End With

End Sub 
```

# c - 没有 64 位临时的定点乘法

> ID：15123638
> 
> 赞同：4
> 
> 时间：2013-02-27T22:22:35.773
> 
> 标签：c, optimization, fixed-point

嗨，我正在为嵌入式系统实现一些定点数学东西，我正在尝试将两个 16.16 定点数相乘而不创建 64 位临时数。到目前为止，这是我想出的生成最少指令的代码。

```
int multiply(int x, int y){
    int result;
    long long temp = x;
    temp *= y;
    temp >>= 16;
    result = temp;
    return result;
} 
```

这段代码的问题在于它使用了一个临时的 64 位整数，这似乎会生成错误的汇编代码。我正在尝试制作一个使用两个 32 位整数而不是 64 位整数的系统。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T22:35:29.667

将您的数字想象为每个数字都由两个大“数字”组成。

```
 A.B
x C.D 
```

数字的“基数”是 2^bit_width，即 2^16 或 65536。

所以，产品是

```
D*B       + D*A*65536 + C*B*65536 + C*A*65536*65536 
```

但是，要使乘积右移 16，您需要将所有这些项除以 65536，所以

```
D*B/65536 + D*A       + C*B        + C*A*65536 
```

在 C 中：

```
uint16_t a = x >> 16;
uint16_t b = x & 0xffff;
uint16_t c = y >> 16;
uint16_t d = y & 0xffff;

return ((d * b) >> 16) + (d * a) + (c * b) + ((c * a) << 16); 
```

签名版本有点复杂；通常最容易对 的绝对值执行算术`x`然后`y`修复符号（除非您溢出，您可以相当乏味地检查它）。

# openoffice-calc - 获取连续值最高的列名

> ID：15123646
> 
> 赞同：0
> 
> 时间：2013-02-27T22:23:06.707
> 
> 标签：openoffice-calc

我需要一个公式来获取每个 openoffice (libreoffice) 计算行中具有最高值的列的名称，即：

```
 A0   |   A1   |    A2  |   A3
------------------------------------
field1 | field2 | field3 | heighest*
------------------------------------
  10   |   12   |   8    | field2*
------------------------------------
   7   |    5   |   15   | field3*
------------------------------------
etc... 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:57:56.230

我没有安装 openoffice 来检查它，但这似乎适用于谷歌电子表格：

```
=Indirect(Address(1, Match(Max(A2:C2),A2:C2, 0))) 
```

[谷歌电子表格](https://docs.google.com/spreadsheet/ccc?key=0AnbJ2RkBA73AdEd0TXh1eG5fVlN3M1hwZjZDd1JFb1E&usp=sharing)

# wso2 - 跨 ESB 集群共享注册表和配置空间

> ID：15123659
> 
> 赞同：1
> 
> 时间：2013-02-27T22:23:48.953
> 
> 标签：wso2, wso2esb, esb

已将 ESB v4.6.0 的实例链接到 G-Reg v4.5.3

[http://docs.wso2.org/wiki/display/ESB460/Remote+Registry+Instance+Configuration#RemoteRegistryInstanceConfiguration-Atom-BasedRemoteInstanceConfiguration](http://docs.wso2.org/wiki/display/ESB460/Remote+Registry+Instance+Configuration#RemoteRegistryInstanceConfiguration-Atom-BasedRemoteInstanceConfiguration)

当 ESB 启动时，它会抛出几个错误，例如：

```
[Framework Event Dispatcher] ERROR AbstractTransportService Error while checking the transport availability 
java.lang.NullPointerException 
```

尽管如此，**我可以**在两端浏览注册表，但是当我在 ESB 中创建 BAM 配置文件并**成功**保存在注册表中时，ESB 开始失败，并显示：

```
[http-nio-9443-exec-37] ERROR RPCMessageReceiver Exception occurred while trying to invoke service method getResourceString 
java.lang.reflect.InvocationTargetException 
```

并且无法通过注册表浏览器（空资源）和 BAM 配置文件管理页面（异常）在 ESB 端读取 BAM 配置文件。但可以在 Governance Registry 浏览器中读取。我在创建共享集合时设置了完全开放的权限，每个人都可以读取、写入等工件。

我找不到有关连接可能出现问题的信息，以允许浏览和写入，但阻止 ESB 读取。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:56:51.840

我会回答我自己的问题，以帮助其他面临同样问题的人。

基于 Atom 的注册表共享在较新版本的 WSO2 中“事实上”已被弃用。

**从现在开始使用基于 JDBC 的注册表共享。**

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:51:32.593

我不认为它已被弃用，我很确定它是一个错误，存在于 4.5.1/2/3

[wso2esb wso2 治理注册表](https://stackoverflow.com/questions/15421509/wso2esb-wso2-governance-registry/15425666?noredirect=1#15425666)

# terminal - 语法错误：找不到或无法读取要导入的文件：foundation/common/ratio

> ID：15123667
> 
> 赞同：11
> 
> 时间：2013-02-27T22:24:08.343
> 
> 标签：terminal, compass-sass, sass, zurb-foundation

我已经安装了基础，当我编辑和保存 app.scss 文件时，它会在我的项目的 sass 文件夹中创建一个“app.css”和一个“config.rb”文件。当我打开那个“app.css”文件时，我得到了这个

```
Syntax error: File to import not found or unreadable: foundation/common/ratios. 
```

然后我得到这个：

```
File to import not found or unreadable: foundation/common/ratios.
          Load paths:
            /Applications/MAMP/htdocs/WebApp02/sass
            /Library/Ruby/Gems/1.8/gems/compass-0.12.2/frameworks/blueprint/stylesheets
            /Library/Ruby/Gems/1.8/gems/compass-0.12.2/frameworks/compass/stylesheets
            Compass::SpriteImporter
    on line 1 of /Applications/MAMP/htdocs/WebApp02/sass/_settings.scss
    from line 2 of /Applications/MAMP/htdocs/WebApp02/sass/app.scss 
```

然后是一堆通往我的宝石的路径。

在我想知道是否有人能解释为什么会发生之前，它从未在我的 sass 文件夹中创建 app.css 和 config.rb 文件。Compass 仍然符合“样式表”文件夹中的 app.css，但我想修复它以防止将来发生任何错误。

config.rb 文件看起来像这样

```
require 'zurb-foundation'
Require any additional compass plugins here.

Set this to the root of your project when deployed:
http_path = "/"
css_dir = "stylesheets"
sass_dir = "sass"
images_dir = "images"
javascripts_dir = "javascripts"

You can select your preferred output style here (can be overridden via the command line):
 output_style = :expanded or :nested or :compact or :compressed

To enable relative paths to assets via compass helper functions. Uncomment:
    relative_assets = true 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T14:45:47.600

我在使用 sinatra 的项目中遇到了同样的错误。这是在从基础 3.2.5 升级到版本 4.0.2 之后。我意识到 zurb-foundation gem 中不再存在“foundation/common/ratios”。我在“foundation not found or unreadable”有另一个错误，所以我还必须在 zurb-foundation 之前修改我的 Gemfile，需要 'compass' gem

```
gem 'compass'
gem 'zurb-foundation' 
```

对于基础 3.2.5 'compass'，Gemfile 中没有明确要求，但现在需要，如果您查看 zurb-foundation.rb 代码（在您的 ruby​​ gemset 中），您可以看到：

```
if defined?(Compass)
  Compass::Frameworks.register("foundation",
    :stylesheets_directory => File.join(root,"scss"),
    :templates_directory => File.join(root,"templates")
  )
end 
```

因此，如果项目中的指南针没有在 zurb-foundation 之前定义，zurb-foundation.rb 不会扩展包含 scss 文件夹的路径。

我希望我今天的经历可以帮助到你。最好的问候，罗伯托

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T17:19:57.713

我无法让它工作（带有资产管道和 gem“compass-rails”和/或 gem“compass”的 rails 3.2.12）所以我只锁定了 3.2.5

```
gem 'zurb-foundation', "= 3.2.5" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T23:35:40.943

我在尝试使用 Visual Studio **Express** 2010 更新 Foundation 3 网站时遇到了同样的错误。Express 不允许使用 Mindscape 扩展工具。

所以这对我有用几次。我基本上从一个新的 web 文件夹开始，使用 compass 来创建文件夹。我不会浪费时间尝试更新，因为这似乎对我有用。无论如何，在版本更新之前备份它很常见。

从您网站上方的根文件夹中。（我使用 vs 默认路径）所以从 rails i cd 中的命令行到这个路径

```
> cd C:\Users\georgegargoyle\Documents\Visual Studio 2010\WebSites\ 
```

*请注意，如果您从基础 3 中取消分级，并且您只使用 ruby​​ 作为基础，那么您很可能拥有新基础所需的旧版本的 sass。我不知道卸载并重新安装 sass 会受到伤害

这是

```
>  gem uninstall sass
> 
> gem install sass 
```

我想如果它问你 sass 的版本并且你不知道输入第 5 个选项作为文本而不是数字 5 ......所有版本？然后.. 键入数字 5，您可能会收到两个警告，所以我只需按两次 y 或 yes。

无论如何，从网站文件夹类型

指南针创建你的新文件夹 -r zurb-foundation --使用基础

你应该看到很酷的 Woot！就在那里

```
> cd yournewfolder 
```

然后进入项目文件夹

```
gem install compass
gem update compass
gem install foundation
gem update foundation 
```

基金会的文档在下面，我是新手，所以这不一定是最佳实践，只是对我有用。感谢上面的gekorob，我想我了解到，我怀疑，由于您安装的版本，您运行这些命令的顺序很重要。ruby、指南针、sass、基础和视觉工作室。

我怀疑如果换位思考可能会导致问题。并会带你到这里。

[http://foundation.zurb.com/docs/sass.html](http://foundation.zurb.com/docs/sass.html)

希望这会有所帮助，并且您会看到很多。

[http://www.ipaad.org/images/Step105.jpg](http://www.ipaad.org/images/Step105.jpg)

# ruby - 如何解决 Cucumber 的“无法加载此类文件”警告？

> ID：15123677
> 
> 赞同：10
> 
> 时间：2013-02-27T22:24:33.243
> 
> 标签：ruby, windows, cucumber, gherkin

我正在尝试阅读“黄瓜书”，但黄瓜的行为不如预期。

我在 Windows 7（32 位）上，我有理由相信我已经正确安装了 Ruby 和必要的 gem。

但是，当我运行 cucumber 时，我收到以下消息：

```
WARNING: cannot load such file -- 2.0/gherkin_lexer_en
Couldn't load 2.0/gherkin_lexer_en
The $LOAD_PATH was:
C:/Ruby200/lib/ruby/gems/2.0.0/gems/cucumber-1.2.1/bin/../lib
C:/Ruby200/lib/ruby/gems/2.0.0/gems/gherkin-2.11.6-x86-mingw32/lib
C:/Ruby200/lib/ruby/gems/2.0.0/gems/builder-3.2.0/lib
C:/Ruby200/lib/ruby/gems/2.0.0/gems/diff-lcs-1.2.1/lib
C:/Ruby200/lib/ruby/gems/2.0.0/gems/cucumber-1.2.1/lib 
```

这会持续一段时间，列出更多检查的路径，然后是“恢复到 Ruby 词法分析器”，以及一条消息“没有找到 en 的词法分析器（无法加载此类文件 --gherkin/lexer/en）...”

根据它正在检查的路径，它似乎想要在“gherkin-2.11.6-x86-mingw32/lib”文件夹中有一个“2.0”文件夹，这显然不存在。但是，“1.8”和“1.9”文件夹似乎有“gherkin_lexer_en”文件（实际上是“gherkin_lexer_en.so”）。

作为一个疯狂的猜测，我复制了 1.9 文件夹并将其命名为 2.0。我真的没想到这会奏效，但认为值得一试。

如何让 cucumber 查看我拥有的文件夹之一，或者获得一个可以接受的 2.0 文件夹？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-29T11:02:22.107

`$ gem install gherkin --platform ruby`

转到 ruby​​ 安装目录中的以下文件夹

`{rubyDir}\lib\ruby\gems\2.0.0\gems\gherkin-2.12.2\lib\gherkin`

对你们来说可能是不同的道路

修改修改`*lib/gherkin/c_lexer.rb:7` 前缀的值如下：

`prefix = ''`

在以下链接找到答案 [https://github.com/cucumber/gherkin/issues/273](https://github.com/cucumber/gherkin/issues/273)

回复 mscharley 于 2014 年 1 月 18 日发表评论

像魅力一样为我工作..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T16:19:46.297

在 Windows 上，您暂时必须使用 Ruby 1.9。目前还没有发布小黄瓜的 Ruby 2.0 版本。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-21T12:37:18.830

如果您使用的是 gherkin ver 2.12.1，您现在应该可以在 Windows 上使用 cucumber 和 ruby​​ 2.0。

首先，使用 --ignore-dependencies 选项安装 gherkin-2.12.1。

reson --ignore-dependencies 选项是必需的，如果不指定它，它将安装非常旧的 json 1.4.X 版本并且无法在 ruby​​ 2.0 上安装。

此时，您应该可以在 ruby​​ 2.0 上使用 ruby​​ cucumber，但是您会看到像上面这样的错误消息作为警告消息。这意味着尽管您看到了这条消息，但您仍然可以使用黄瓜。

如果要删除错误，请按照以下步骤操作。

1.  在 [ruby installed dir]\lib\ruby\gems\2.0.0\gems\gherkin-2.12.1\lib 上创建 [2.0] 文件夹（该文件夹包括 gherkin_lexer_XX.so）。

2.  将 [ruby installed dir]\lib\ruby\gems\2.0.0\gems\gherkin-2.12.1\lib 中的所有内容复制到创建的 [2.0] 文件夹中（您不需要复制 [2.0] 文件夹创建）。

# amazon-web-services - 在任何 VPC 子网中启动 EC2 实例，在非 VPC 启动中模拟“No Preference”选项

> ID：15123685
> 
> 赞同：2
> 
> 时间：2013-02-27T22:25:00.013
> 
> 标签：amazon-web-services, amazon-ec2, boto, amazon-vpc

我有一个非常标准的堆栈、RDS、2 个使用 ELB 的 EC2 实例。因为我希望 ELB 被限制在一个特定的 IP 范围内，所以我在 VPC 中启动了堆栈，出于 2 个子网的 DR 原因。

我使用了几台临时 ec2 机器，当它们不在 VPC 中时，我允许在任何可用区启动。这（据我所知）意味着如果 AZ 不可用，那么机器将在其他区域启动。

有没有办法在 VPC 中模拟这一点？有没有办法说在 VPC 的任何子网中启动机器？

如果不是通过随机选择一个子网来解决它相当容易，并且如果它尝试另一个失败。只是想知道是否有更清洁的受支持方法？

我正在使用python和boto。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:17:05.137

> 这（据我所知）意味着如果 AZ 不可用，那么机器将在其他区域启动。

[这是正确的，当通过可用的Amazon EC2](http://aws.amazon.com/ec2/) API 操作直接运行实例时，在[Amazon VPC](http://aws.amazon.com/vpc/)中提供此选项确实很好。

不幸的是，[RunInstances](http://docs.aws.amazon.com/AWSEC2/latest/APIReference/ApiReference-query-RunInstances.html)和[RequestSpotInstances](http://docs.aws.amazon.com/AWSEC2/latest/APIReference/ApiReference-query-RequestSpotInstances.html) API 操作都只允许分别指定可选参数*SubnetId*或*LaunchSpecification.SubnetId*（*启动 [Spot] 实例的子网的 ID*），因此不会有任何信息到您的 VPC如果未指定子网，则希望启动实例。

## 解决方法

[您可以通过Auto Scaling](http://aws.amazon.com/autoscaling/)的[CreateAutoScalingGroup](http://docs.aws.amazon.com/AutoScaling/latest/APIReference/API_CreateAutoScalingGroup.html) API 操作间接实现所需的行为，请参阅参数*VPCZoneIdentifier*：

> Amazon Virtual Private Cloud (Amazon VPC) 的子网标识符的逗号分隔列表。

*   此功能也可通过[AWS CloudFormation中的](http://aws.amazon.com/cloudformation/)[AutoScalingGroup](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-as-group.html)资源类型使用。

# sql - 特定时间段内的多笔交易，受日期范围限制

> ID：15123687
> 
> 赞同：1
> 
> 时间：2013-02-27T22:25:07.013
> 
> 标签：sql, sql-server, sql-server-2005

我有一个交易、人员、交易日期、物品等的数据库。每次有人购买物品时，交易都会存储在表中，如下所示：

```
personNumber, TransactionNumber, TransactionDate, ItemNumber 
```

我想要做的是找到从 2012 年 1 月 1 日（transactionDate）到 2012 年 3 月 1 日在 14 天（可配置）或更短的时间内多次购买相同 ItemNumber 的人（personNumber）。然后，我需要在报告中列出所有这些交易。

样本数据：

```
personNumber, TransactionNumber, TransactionDate, ItemNumber
1           |               100|      2001-01-31|        200
2           |               101|      2001-02-01|        206
2           |               102|      2001-02-11|        300
1           |               103|      2001-02-09|        200
3           |               104|      2001-01-01|        001
1           |               105|      2001-02-10|        200
3           |               106|      2001-01-03|        001
1           |               107|      2001-02-28|        200 
```

结果：

```
personNumber, TransactionNumber, TransactionDate, ItemNumber
1           |               100|      2001-01-31|        200
1           |               103|      2001-02-09|        200
1           |               105|      2001-02-10|        200
3           |               104|      2001-01-01|        001
3           |               106|      2001-01-03|        001 
```

你会怎么做呢？

我试过这样做：

```
select * 
from (
    select personNumber, transactionNumber, transactionDate, itemNumber,
count(*) over (
    partition by personNumber, itemNumber) as boughtSame)
from transactions
where transactionDate between '2001-01-01' and '2001-03-01')t
where boughtSame > 1 
```

它让我明白了：

```
personNumber, TransactionNumber, TransactionDate, ItemNumber
1           |               100|      2001-01-31|        200
1           |               103|      2001-02-09|        200
1           |               105|      2001-02-10|        200
1           |               107|      2001-02-28|        200
3           |               104|      2001-01-01|        001
3           |               106|      2001-01-03|        001 
```

问题是我不想要 TransactionNumber 107，因为那不在 14 天内。我不确定在哪里设置 14 天的限制。我可以做一个日期差异，但是在哪里，在什么范围内？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:44:07.653

唉，SQL Server 2005 中的窗口函数还不够强大。我会使用相关子查询来解决这个问题。

相关子查询计算一个人在每次购买后 14 天内购买该项目的次数（不计算第一次购买）。

```
select t.*
from (select t.*,
             (select count(*)
              from t t2
              where t2.personnumber = t.personnumber and
                    t2.itemnumber = t.itemnumber and
                    t2.transactionnumber <> t.transactionnumber and
                    t2.transactiondate >= t.transactiondate and 
                    t2.transactiondate < DATEADD(day, 14, t.transactiondate
             ) NumWithin14Days
      from transactions t
      where transactionDate between '2001-01-01' and '2001-03-01'
     ) t
where NumWithin14Days > 0 
```

您可能还想在子查询中设置时间限制。

上的索引`transactions(personnumber, itemnumber, transactionnumber, itemdate)`可能会帮助它运行得更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:48:41.377

如果您的问题表明您只想找到具有指定条件的人（personNumbers），您可以通过以下方式进行自我加入和分组：

```
create table #tx (personNumber int, transactionNumber int, transactionDate dateTime, itemNumber int)
insert into #tx
values
    (1, 100, '2001-01-31', 200),
    (2, 101, '2001-02-01', 206),
    (2, 102, '2001-02-11', 300),
    (1, 103, '2001-02-09', 200),
    (3, 104, '2001-01-01', 001),
    (1, 105, '2001-02-10', 200),
    (3, 106, '2001-01-03', 001),
    (1, 107, '2001-02-28', 200)

declare @days int = 14

select t1.personNumber from #tx t1 inner join #tx t2 on 
    t1.personNumber = t2.personNumber 
    and t1.itemNumber = t2.itemNumber
    and t1.transactionNumber < t2.transactionNumber
    and datediff(day, t1.transactionDate, t2.transactionDate) between 0 and @days
group by t1.personNumber
-- if more than zero joined rows there is more than one transaction in period
having count(t1.personNumber) > 0 

drop table #tx 
```

# javascript - jQuery Dialog UI 不确定地滚动到顶部

> ID：15123689
> 
> 赞同：1
> 
> 时间：2013-02-27T22:25:09.900
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

我正在处理某人的代码，他们对所有弹出窗口都使用了 jquery UI Dialog。问题是页面一直滚动到顶部，而对话框则留在任何打开的位置。这是代码：

```
$('body').on('click', 'a[href$="#dialog"]', function(e) {
    e.preventDefault();
    $('#contact-popup').dialog({
        title: 'Contact',
        modal: true,
        width: 328,
        show: {effect: 'fade', duration: 400},
        hide: {effect: 'fade', duration: 400},
        resizable: false,
        draggable: false,
        open: function() {
            $('#contact-popup form').show();
            $('#thanks').hide();
        }
    })
    return false;
}); 
```

我试过`e.preventDefault()`, `return false`，但它仍然滚动到页面顶部。

我正在从锚点调用对话框：`<a href="#dialog">Click Here</a>`

我是否需要更改调用对话框的方式？还是我在这里做错了什么？

这是链接，因此您可以对其进行测试：`test.persogenics.com/hire/interview-guide/`

刚刚尝试将对话框“打开”放入常规 js 函数中 - 不起作用 - 仍然滚动到顶部：

```
js:
function popup() {
    $('#contact-popup').dialog()
    return false;
};

html:
<button onClick="popup();">Click Me</button> 
```

这意味着这不是锚定问题，.. 对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:07:06.820

发现问题！事实证明，这个问题是我创建的一个绝对定位输入来“欺骗”对话框 UI 使其不自动关注任何实际输入。

```
<div id="contact-popup" style="display:none">

--> <input type='text' style='position:absolute; top:-9999px;' />

    <form method="post" action="../../email.php">
        <h5>Leave us your contact info and we'll get in touch.</h5>
        <div data-role="fieldcontain">
            <input type="text" name="first-name" value="" class="required"> 
```

我猜这会使页面视图跳出，因为它将它推到顶部。

现在我知道你不仅要小心你如何编写 jQuery，还要小心你放入对话框弹出窗口中的内容！

感谢大家对此的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:52:09.207

问题可能是您正在使用指向页面内锚点的锚点 URL，通常的做法是将“javascript:void(0)”作为 href 传递，在您的情况下，您通过它的 href 检测特定的锚点，因此要解决您可以将一个类传递给指向对话框并从中选择的锚标记。也许是这样的

```
<a class="dialog_link" href="javascript:void(0)" > 
```

和 jQuery

```
$('body').on('click', ',dialog_link', function(e) {
e.preventDefault();
$('#contact-popup').dialog({
    title: 'Contact',
    modal: true,
    width: 328,
    show: {effect: 'fade', duration: 400},
    hide: {effect: 'fade', duration: 400},
    resizable: false,
    draggable: false,
    open: function() {
        $('#contact-popup form').show();
        $('#thanks').hide();
    }
})
return false; 
```

});

# angularjs - Angular JS 中的幻灯片转换

> ID：15123691
> 
> 赞同：2
> 
> 时间：2013-02-27T22:25:14.487
> 
> 标签：angularjs, angular-ui

我正在尝试使用 AngularJS 路由实现类似于 JQueryMobile 的幻灯片转换。

JQuery Mobile 在这里：http: [//view.jquerymobile.com/1.3.0/docs/widgets/transitions/](http://view.jquerymobile.com/1.3.0/docs/widgets/transitions/)

我可以尝试创建一个将利用此解决方案的指令：[https](https://stackoverflow.com/a/13661642/524511) ://stackoverflow.com/a/13661642/524511但想先询问是否有现成的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T02:37:12.707

## 更新（2013 年 5 月 21 日）

动画支持从 1.1.4 版开始被引入核心 Angular.JS 库（当前处于稳定状态，在本次更新时）。

这是发布的官方公告。它还嵌入了演示该功能的 Youtube 视频：

[http://blog.angularjs.org/2013/04/angularjs-106-universal-irreversibility.html](http://blog.angularjs.org/2013/04/angularjs-106-universal-irreversibility.html)

.

## 原始答案

你可以试试 Angular-UI 的东西。

这里有两个主要组件可以提供帮助：

*   Animate，应该直接做你想做的事
    [http://angular-ui.github.io/#/directives-animate](http://angular-ui.github.io/#/directives-animate)

*   jQuery 路径（虽然这可能很棘手）
    [http://angular-ui.github.io/#directives-jq](http://angular-ui.github.io/#directives-jq)

**注意：**
如果这些链接对您不起作用，请尝试从“指令”菜单中选择它们。当我写这个答案时，它们似乎对我不起作用。有趣的是，路由在 Angular 自己的站点之一中无法按预期工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T00:39:50.223

这可能会有所帮助：

[https://github.com/sthomp/angular-slidenav.js](https://github.com/sthomp/angular-slidenav.js)

[http://mgcrea.github.io/angular-strap/##asides](http://mgcrea.github.io/angular-strap/##asides)

我用的是第一个。它非常简单，不需要额外的库来获得幻灯片过渡。

# database - Phonegap离线应用的数据库策略

> ID：15123698
> 
> 赞同：-1
> 
> 时间：2013-02-27T22:25:49.740
> 
> 标签：database, json, cordova, mobile

我必须使用 phonegap 为所有移动平台开发一个移动应用程序。这将是一种医学信息应用程序。但我是phonegap的新手。首先应用程序将存储用户信息（这不是义务，也许我不会这样做，但它可能对统计有好处），但后来应用程序只会搜索并显示药物信息。问题是我应该使用哪种数据库方法在本地提供这些信息，以后如何在需要时更新它？我找到了不同的策略，但不完全是我需要的。如果您能提供帮助，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:56:43.113

您可以使用 HTML5 Web 存储（本地存储、会话存储）来存储用户信息，对于数据库，您可以使用 phonegap 存储 api。如果您想更新信息，那么您必须定期进行数据库同步，这意味着您的应用程序将在前台使用更新数据库表的 javascript 间隔。如果您需要更多帮助，请告诉我。您可以使用 ajax 将所有药物信息从服务器数据库同步到本地数据库。 [http://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp) [http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html](http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html) 感谢和问候 Jitendra Kumar

# c# - SqlTransaction 支持多个 SqlConnections

> ID：15123700
> 
> 赞同：7
> 
> 时间：2013-02-27T22:25:55.130
> 
> 标签：c#, sql, sqltransaction

所以我有多个`SqlConnections`我想在一个中使用`SqlTransaction`。我知道我可以只使用一个连接，但最终在每个连接中都有大量新声明的无用（连接完成后）变量，我需要程序尽可能快地保持。

我在一个`using`声明中都有每个连接。

我正在使用最新的 .NET 和 SQL Server 2008 R2。

可能吗？

另外，我已经看过：

[如何在 .NET 中为多个 SqlConnections 使用单个 SqlTransaction？](https://stackoverflow.com/questions/619857/how-to-use-a-single-sqltransaction-for-multiple-sqlconnections-in-net)

没有人回答这个问题，平台已经过时了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-28T01:01:21.520

你链接的问题有我会给你的答案，TransactionScope。

这样做的目的是让您的连接自动加入已经存在的事务。

```
using(System.Transacation.TransactionScope myScope = new TransactionScope()){
  //all of your sql connections and work in here

  //call this to commit, else everything will rollback
  myScope.Complete();
} 
```

在这里更多地查看事务范围：

[http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)

如果这不能回答你的问题，那么我已经彻底误解了它。

# python - Python数组和函数

> ID：15123701
> 
> 赞同：0
> 
> 时间：2013-02-27T22:25:59.147
> 
> 标签：python, list

我有一个列表“地图”，我想用作用于初始数组的每个位置的函数“counterPosition”的相应输出值替换所有元素，如下所示：

```
map[0][0] = counterPosition(0,0)
map[0][1] = counterPosition(0,1)
... 
```

像这样一个一个地做我可以得到答案，但是当我尝试这样的事情时：

```
 for x in range (len(map)):
    for y in range (len(map)):
        map[x][y] = counterPosition(x,y) 
```

它不起作用......我做错了什么吗？

编辑：

```
def counterPosition(x, y):
    bombs = 0
    for i in range(x-1, x+2):
        for j in range(y-1, y+2):
            if i<0 or j<0: continue
            elif map[i][j] == True:
                bombs += 1
    return bombs

map = [[True, False, False, False, False, True],
         [False, False, False, False, False, True],
         [True, True, False, True, False, True],
         [True, False, False, False, False, False],
         [False, False, True, False, False, False],
         [False, False, False, False, False, False]] 
```

错误是：

```
IndexError: list index out of range 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:28:12.417

你快到了

```
for x in range (len(map)):
    for y in range(len(map[x])):
        map[x][y] = counterPosition(x,y) 
```

**更新**：您提供的原始代码只会在您的地图是方形的情况下运行，但您提供的数据*就是这种情况。*查看您的示例数据和更新的代码，实际错误来自您的`counterPosition`函数。其实有两个问题。

**1.** 在您的`counterPosition`函数中，您访问超出范围的元素。这作为错误消息的一部分打印在上面`IndexError:...`- 仔细阅读这些消息并将其包含在您的帖子中是个好主意。如果您传入，`x=5,y-5`则该函数将尝试访问`map[6][6]`. “正确”的代码应该是这样的

```
def counterPosition(x, y):
    bombs = 0
    for i in range(x-1, x+2):
        for j in range(y-1, y+2):
            # check bounds:
            if 0 <= i < len(map) and 0 <= j < len(map[i]):
                if map[i][j] == True:
                    bombs += 1
    return bombs 
```

**2.**第二个问题是`counterPosition` *期望* `map`包含布尔元素，但是您返回一个整数`counterPosition`并将其分配给`map[x][y]`。所以下一轮`map`将包含整数值。在没有看到您项目的其余部分的情况下，我认为您想要的是两个独立的多维数组。

# objective-c - 访问目标 c 中的数组

> ID：15123703
> 
> 赞同：0
> 
> 时间：2013-02-27T22:25:59.217
> 
> 标签：objective-c, nsmutablearray

让我们想象一下这种情况：

游戏.h：

```
@interface Game : CCLayer
{    
    NSMutableArray* questions;
}

@property (nonatomic,retain) NSMutableArray* questions;

- (void) didLoadFromCCB;
- (void) pressitem:(id)sender;

@end 
```

游戏.m

```
 @implementation Game

 @synthesize questions;

 - (void) didLoadFromCCB
 {
     NSMutableArray *questions = [[NSMutableArray alloc] initWithObjects:[NSNumber numberWithInteger:-1],nil];

     NSLog(@"didload %@", questions);
 }

 - (void) pressitem:(id)sender
 {
     NSLog(@"pressitem %@",questions);
 }
@end 
```

我从 didLoadFromCCB 获取日志，但在 pressitem 上它返回 null。不应该通过我的所有实现来访问数组吗？

我知道这个接缝就像一个真正的菜鸟问题，但我来自 actionscript/php 背景，我刚刚订购了一本 C 和一本 Objective C 的书，但在我等待的时候，我只是想深入研究一下。

感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:28:22.693

`questions`您在`didLoadFromCCB`阴影中的本地声明会影响实例变量。你可能应该只写那一行：

```
self.questions = [[NSMutableArray alloc] initWithObjects:[NSNumber numberWithInteger:-1],nil]; 
```

然后，您将创建数组并将指向它的指针存储在实例变量中，而不仅仅是创建一个立即超出范围的本地指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:29:13.017

范围。`NSMutableArray *questions`声明方法的局部变量`- didLoadFromCCB`。它不设置实例变量（具有较小范围的变量会抑制具有相同名称但范围较宽的变量）。简单地写

```
self.questions = [[NSMutableArray alloc] initWithObject:[NSNumber numberWithInteger:-1]]; 
```

反而。

# mule - Mule 将元素添加到 XML 消息

> ID：15123706
> 
> 赞同：1
> 
> 时间：2013-02-27T22:26:16.247
> 
> 标签：mule, mule-studio

我正在尝试做我认为应该是一个非常简单的任务。

在 mule 流中，读取 xml 文件，在特定位置添加 xml 元素。然后将xml写入另一个文件。

XSLT 在这里将是一个非常好的工具，但是对于我的测试，我试图避免使用 xslt。我考虑过使用 java 或 groovy 转换器和 XML 解析器来执行此操作，如果需要，我可以依靠它。然而，我能想到的最简单的方法是 XML-to-maps，然后是更新值的脚本，然后 maps-to-xml 返回一个完全空的记录。

我如何在不使用 xslt 并且最好不使用 jaxb 或 mule 内置之外的其他 xml 解析器的情况下做到这一点？

编辑：我已经玩过数据映射器了，但是对于 xml-xml 映射，它需要一个模式，我在运行时不会知道这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-05T12:32:31.603

最简单的方法是 XSLT，例如[http://bushorn.com/xml-to-xml-transformation-in-mule/](http://bushorn.com/xml-to-xml-transformation-in-mule/)
但是如果您出于任何原因想避免 XSLT，是的，Groovy 将足够好 [XML 映射在 Mule](https://stackoverflow.com/questions/21635220/xml-mapping-in-mule)
[http://www.sixtree.com.au/articles/2013/data-mapping-with-groovy-part-1/](http://www.sixtree.com.au/articles/2013/data-mapping-with-groovy-part-1/)
自定义 Java 类也将帮助您做到这一点

# c# - 对服务类使用静态只读引用有什么问题吗？

> ID：15123711
> 
> 赞同：3
> 
> 时间：2013-02-27T22:26:40.917
> 
> 标签：c#, asp.net, oop, soa

我继承了这段代码，原作者出于某种原因真的很喜欢静态只读引用。

我在下面概述了一般模式，**这些静态只读引用有什么影响？**

```
public class DbAccess
{
    private static readonly ISomethingFactory = SomethingFactories.GetFactory("1");
    private static IThing1Dao Thing1Dao { get {return ISomethingFactory.Thing1Dao; }}
    private static IThing2Dao Thing2Dao { get {return ISomethingFactory.Thing2Dao; }}
}

public class SomethingFactories
{
   public static ISomethingFactory GetFactory(string key) 
   {
      switch(key)
      {
         case "...":
         return new SomeFactory();
      }
   }
}    

public class SomeFactory : ISomeFactory
{    
    public IThing1Dao Thing1Dao
    {
       get { return new Thing1Dao(); }
    }
}    

public class SomeService : ISomeService
{
    private static readonly IThing1Dao thing1Dao = DbAccess.Thing1Dao
    private static readonly IThing2Dao thing2Dao = DbAccess.Thing2Dao

    public Thing1Object1 GetObject1(int id)
    {
        return thing1Dao.GetObject1(id);    
    }

    public Thing1Object2 GetObject2(int id)
    {
        return thing1Dao.GetObject2(id);
    }
} 
```

.aspx 页面中的用法如下：

```
public class MyBasePage : System.Web.UI.Page
{
    protected static readonly SomeService someService = new SomeService();     
}    

public class SomeAspxPage : MyBasePage
{
   void btnAddObject1(...)
   {
      Thing1Object1 obj1 = someService.GetObject(1);
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:29:34.597

*static*表示只`ISomethingFactory`存在一个实例，并且可以通过类型访问该实例（不是每个实例一个实例`DbAccess`）。

*readonly*意味着，在初始化之后，该值不能被覆盖。

这是基于启动时数据（例如来自 app.config 的数据）执行初始化的相当正常的模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T22:32:16.230

Web 应用程序是多线程的，因此静态成员的用途有限。

如果你有一个对象的静态引用，那么这个对象必须是线程安全的，或者你必须同步使用它，以便在任何时候只有一个线程可以使用它。

将静态引用设为只读意味着引用本身是线程安全的，因为一旦设置它就无法更改，但这不会自动使其引用线程安全的对象。

# java - 有没有办法在 Eclipse 中创建一个快捷方式，将光标跳转到当前行的第 n 列？

> ID：15123712
> 
> 赞同：10
> 
> 时间：2013-02-27T22:26:49.040
> 
> 标签：java, eclipse, indentation, spaces

我必须遵循一些严格的 Java 代码缩进规则。

在很多情况下，我必须跳到当前行的第 26 列或第 28 列。我的原始位置和第 26/28 列之间的字符应该是空格字符（不是 TAB）。

有没有办法在 Eclipse 中使用一些键盘快捷键（或其他方式）来做到这一点？我检查了所有可用的代码样式规则，但找不到任何可以帮助我的东西。

**例子 ：**

```
 package                    com.companyname.something;

    import                     java.io.*;

    public                     class Something
                               extends SomethingElse
                               implements AnotherThing
    {
      public static final String
        SOME_NAME            = "SomeValue";

      private int              _var;

    } 
```

如您所见，遵循这些标准需要输入大量空格。有没有办法在 Eclipse 中轻松做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-12-20T11:02:53.673

这不是一个好的做法，但您可以使用它

在eclipse中创建模板 `Window -> Preferences -> Java -> Editor -> Templates -> New...`

```
Name : 1
Pattern :${cursor}<give one space> 
```

-

```
Name :2
Pattern :${cursor}<give two space> 
```

.

.

.

```
Name : 26
Pattern :${cursor}<give 26 space> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-19T18:06:45.223

尽管这个要求很荒谬，但一个 Formatter 首选项设置可以帮助您遵守它。打开**Java Code Style** > **Formatter**首选项（工作区或项目级别）并单击**Edit...**以修改活动配置文件（或者如果您不希望此更改影响您编写的所有代码，则创建一个新配置文件）。

![在此处输入图像描述](../Images/601f1a94f094abc3cd5832c0b63fc799.png)

在 Formatter 对话框中，选择 Indentation 选项卡，然后将**Tab Policy**设置为*Spaces Only*并将**Indentation size**设置为 28。

![在此处输入图像描述](../Images/e398f1ed5f55ab6f49e8e2d686aa85b0.png)

使用这些设置，`Tab`将跳转到第 28 列，您可以`Backspace`根据需要从那里开始。

*请注意，这几乎会破坏使用 Eclipse 的“批量格式化”功能（右键单击并选择 Source > Format）的能力，因为它将处理**所有**缩进位置有 28 个空格，这不是你的强制风格似乎想要。这仅在打字时有帮助。*

* * *

尽管这有助于完成这些愚蠢的任务，但我还是重复我上面的评论，这里最好的建议是考虑换一个新雇主；如果这是强制性的事情，那么可能还有许多其他愚蠢的问题需要处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T23:00:59.280

看看这个：[日食缩进](http://stefaanlippens.net/Indentation_with_spaces_and_tab_key_in_eclipse)

不要选中该框，而是将标签宽度更改为 27 或 28 或您需要的任何值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-23T00:57:02.880

并不完全符合要求，但您可以在 Eclipse 运行时使用 Sublime 进行编辑。请参阅 [https://superuser.com/questions/636699/how-to-go-to-column-by-its-number-in-sublime-text-3的最佳答案](https://superuser.com/questions/636699/how-to-go-to-column-by-its-number-in-sublime-text-3)

快速的网络搜索显示了一些 Eclipse 插件。你试过[http://jalopy.sourceforge.net/existing/indentation.html](http://jalopy.sourceforge.net/existing/indentation.html)吗？（也有商业版）

如果没有其他方法适合您，您可能可以编写一个 Python 脚本并设置一个热键以在当前文件上运行它。或者你可以编写一个 AutoHotkey 脚本来使用 sendkeys 我很确定，但不完全确定如何。AutoHotkey 论坛可能是一个不错的起点（[http://www.autohotkey.com/board/forum/48-support/](http://www.autohotkey.com/board/forum/48-support/)）。

但在我做任何事情之前，我会问我的老板她/他用什么。如果他们说空格键，我会难以置信地看着。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-25T12:55:46.077

我没有找到我想要的东西，但我找到了一些有用的东西。

我没有定义将光标跳转到第 28 列的快捷方式，而是设法用一条垂直线标记第 28 列，这样我就可以轻松找到它，而无需经常检查当前列号：

[![在此处输入图像描述](../Images/a2175d387cef11c72e9572d28a3e4b79.png)](https://i.stack.imgur.com/JsJeJ.png)

这可以在 Window -> Preferences -> General -> Editors -> Text Editors 中进行配置。

您必须选中“显示打印边距”并将“打印边距列”设置为 27。您甚至可以配置垂直线的颜色（我选择了浅灰色，以免分散我的注意力）。

[![在此处输入图像描述](../Images/c92f4783b5c72fc7295ca385ed468939.png)](https://i.stack.imgur.com/RUidO.png)

# wpf - 在后面的代码中查找类型的默认样式

> ID：15123714
> 
> 赞同：12
> 
> 时间：2013-02-27T22:26:57.703
> 
> 标签：wpf, code-behind, wpf-style

在 WPF 中，您可以创建一个`Style`作为 XAML 中控件类型的默认值的：

```
<Style TargetType="{x:Type local:MyControl}">
    . . .
</Style> 
```

`Style`然后，当 WPF 显示该控件时，它会根据其类型从资源中查找该控件。

我想在我的程序的代码隐藏中做同样的事情。我怎么找到那个`Style`？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-27T22:33:44.363

您可以使用控件类型作为关键字在Application级资源中搜索样式：

```
Style defaultStyle = Application.Current.TryFindResource(typeof(MyControl)) as Style; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-07T18:00:38.057

```
object globalStyleDefinedByApp;
Style globalStyle = new Style(typeof(TargetType));
if (Application.Current.Resources.TryGetValue(typeof(TargetType), out globalStyleDefinedByApp))
{
    globalStyle = globalStyleDefinedByApp as Style ?? globalStyle;
} 
```

万一有人在这里寻找通用 Windows 项目 (UWP) 的解决方案，则不`TryFindResource`存在，因此以上是您必须这样做的方法。

# javascript - 我可以将 Facebook Javascript SKD 与动态脚本标签插入一起使用吗？

> ID：15123722
> 
> 赞同：0
> 
> 时间：2013-02-27T22:27:44.317
> 
> 标签：javascript, html, facebook

我想达到什么目的。要创建一个加载 Facebook Javascript SDK 的模块，而不必将该脚本标记粘贴到您的 HTML 中并手动输入您的应用程序详细信息，是的，这似乎是在浪费时间，但对我来说似乎更有意义。例如，此模块将使用您的详细信息进行配置，并且可以通过 Javascript 设置所有内容，而不是将初始化代码放在 HTML 文件中，将其余逻辑放在脚本文件中。

我的问题。当我动态附加脚本和

```
<div id="fb-root"></div> 
```

我收到一个错误

```
FB.init 已被调用 - 这可能表明存在问题
```

这对我来说似乎很奇怪，因为我只有一次实例 FB.init 被调用。实际上，我的脚本与手动将脚本标记添加到 html 中的脚本相同，但我正在尝试动态实现它。

我已经尝试过。我在这里阅读了很多关于使用 javascript 附加和前置元素的问题，我几乎尝试了所有这些方法。我已经阅读了标题为使用 Javascript 动态插入脚本的主题，这些都没有帮助。

我的方法似乎是正确的，但我仍然收到这些 Facebook 错误。

我的标记。

```
<!DOCTYPE html>
    <head>
       <title></title>
    <head>
    <body>
        <script src="facebook.js"></script>
    </body>
</html> 
```

我的Javascript：

```
var Facebook = {};

Facebook = {
        config: {
        APP_ID: 'APP_ID',
        APP_URL: 'APP_URL',
        CHANNEL_URL: 'CHANNEL_URL'
    }

};

var fbEl = document.createElement('div');
fbEl.id = 'fb-root';
document.body.insertBefore(fbEl,document.body.children[0]);

var fbScript = document.createElement('script');
fbScript.type = 'text/javascript';
fbScript.innerHTML = '';
fbScript.innerHTML += 'window.fbAsyncInit = function() {\n';
fbScript.innerHTML +=   'FB.init({\n';
fbScript.innerHTML +=       'appId      : '+Facebook.APP_ID+',\n';
fbScript.innerHTML +=       'channelUrl : '+Facebook.CHANNEL_URL+',\n';
fbScript.innerHTML +=       'status     : false,\n';
fbScript.innerHTML +=       'cookie     : true,\n';
fbScript.innerHTML +=       'xfbml      : false \n';
fbScript.innerHTML +=   '});\n';

fbScript.innerHTML +=   '};\n';

fbScript.innerHTML +=   '(function(d, debug){\n';
fbScript.innerHTML +=   'var js, id = "facebook-jssdk", ref = d.getElementsByTagName("script")[0];\n';
fbScript.innerHTML +=   'if (d.getElementById(id)) {return;}\n';
fbScript.innerHTML +=   'js = d.createElement("script"); js.id = id; js.async = true;\n';
fbScript.innerHTML +=   'js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";\n';
fbScript.innerHTML +=   'ref.parentNode.insertBefore(js, ref);\n';
fbScript.innerHTML +=   '}(document, /*debug*/ false));';

document.body.insertBefore(fbScript,document.body.children[1]); 
```

我确实在我的代码中正确设置了 Facebook 变量，这是为了演示。我已经阅读了很多次有关此的 Facebook 文档。

有没有办法只使用 Javascript 为 tje FB JS SKD 动态添加块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:40:04.907

我不确定实际出了什么问题，但是您的间接级别比您需要的要多，这使整个事情变得太复杂了。为什么不这样：

```
var Facebook = {
   config:{ //etc
   }
};

window.fbAsyncInit = function() {
  FB.init(//etc
  )
};

(function(d, debug){
  var js, id = //etc - this injects the SDK script reference into the dom.
})(document, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:36:17.160

FB 提供的异步 JS 代码是一种仅在 javascript 中生成 FB SDK 代码的方法。现在，您似乎尝试将 PHP 样式编码到 JS 中...

如果需要异步加载模块，则应使用模块加载器（RequireJS 或 YepNope 等）。

触发的错误信息可能是因为您在 FB SDK URL 中添加了一些参数（例如`//connect.facebook.net/fr_CA/all.js#xfbml=1&appId=123456789"`）。如果是这样，只需删除 hash 之后的所有内容`#`。另外，请确保您没有两次加载 SDK。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:38:58.333

我尝试的方法是导致奇怪的加载顺序，初始化代码会在加载 SDK 之前加载导致奇怪的错误。

修改逻辑解决了这个问题。没有太大的不同，但现在它完美地工作了。

```
Facebook = {};

Facebook = {
    config: {
        APP_ID: 'APP_ID',
        APP_URL: 'APP_URL',
        CHANNEL_URL: 'CHANNEL_URL'
    }

};
Facebook.init = function() {
    var fbEl = document.createElement('div');
    fbEl.id = 'fb-root';
    document.body.insertBefore(fbEl,document.body.children[0]);
    window.fbAsyncInit = function() {
    // init the FB JS SDK
        FB.init({
            appId      : 'APP_ID', // App ID from the App Dashboard
            channelUrl : 'CHANNEL_URL', // Channel File for x-domain communication
            status     : true, // check the login status upon init?
            cookie     : true, // set sessions cookies to allow your server to access the session?
            xfbml      : true  // parse XFBML tags on this page?
        });

        // Additional initialization code such as adding Event Listeners goes here

    };

    // Load the SDK's source Asynchronously
    // Note that the debug version is being actively developed and might 
    // contain some type checks that are overly strict. 
    // Please report such bugs using the bugs tool.
    (function(d, debug){
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
        ref.parentNode.insertBefore(js, ref);
    }(document, /*debug*/ false));
};

Facebook.init(); 
```

# java - LWJGL 小程序未加载

> ID：15123725
> 
> 赞同：0
> 
> 时间：2013-02-27T22:28:01.533
> 
> 标签：java, lwjgl

我用 LWJGL 创建了一个 Applet。在 Eclipse 中作为 Applet 运行时，它运行良好。

我通过右键单击项目导出 jar 文件，然后导出并通过窗口。

当我尝试在我的网络浏览器中加载它时，我看到一个 java 屏幕加载，然后全白，没有任何反应。它应该显示一个黄色背景。

这就是我在 html 中加载我的小程序的方式：

```
<applet code="com.game.engine.Main"
archive="test.jar"
width="1024" height="786"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:42:16.480

使用小程序非常困难。您必须确保将其导出为 JAR 文件而不是可运行的 JAR 文件。此外，您必须将您正在使用的所有库提取到 JAR 文件中。

我希望这能澄清一点！

# php - 无法实例化动态类

> ID：15123730
> 
> 赞同：0
> 
> 时间：2013-02-27T22:28:17.530
> 
> 标签：php

这让我很困惑。为什么第一行有效，而当我动态创建对象时却无效？

```
$a = new Strategy\NotificationStrategy(); // This works

$className = "Strategy\\NotificationStrategy";
var_dump(class_exists($className)); // bool(false)
$strategy = new $className(); // Fatal error: Class 'Strategy\NotificationStrategy' not found, etc.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:52:33.660

命名空间在编译时解析。当您尝试从字符串创建对象时，您必须定义类的绝对路径。像这样的东西：

```
$className = "\\Vendor\\Package\\Strategy\\NotificationStrategy"; 
```

或者

```
$className = __ NAMESPACE __."\\Strategy\\NotificationStrategy"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:57:00.577

嗯......我尝试了类似于你所做的事情：

策略.php：

```
<?php
    namespace Strategy{

      class NotificationStrategy{
        public function hello(){ echo "Hi!\n"; }
      }
    }
?> 
```

实例化.php

```
<?php
  require 'strategy.php';

  $ns    = new Strategy\NotificationStrategy();
  $klass = "Strategy\\NotificationStrategy";
  $qq    = new $klass();

  $qq->hello(); // Hi!
?> 
```

这对我来说很好，所以如果你遇到问题，那会让我认为你有需要问题......也许你的动态调用试图在包含类定义的文件的包含之前触发？

# php - PHP表单发送错误

> ID：15123735
> 
> 赞同：-2
> 
> 时间：2013-02-27T22:28:31.067
> 
> 标签：php, regex, forms, email, contact-form

我将首先说我不是编码员，并且真的需要一些帮助。

我的`contact.php`表单不断返回此错误消息：

```
Invalid email address entered 
```

当我在服务器上测试它时。

我已将此`contact.php`表格用于其他网站，并且效果很好。我读到 php 代码现在可能已被弃用，但我不确定如何修复它。

这是php代码：

```
<?php

if(!$_POST) exit;

$email = $_POST['email'];

//$error[] = preg_match('/\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/i',     $_POST['email']) ? '' : 'INVALID EMAIL ADDRESS';
if(!preg_match('/\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/i',$email )){
$error.="Invalid email address entered";
$errors=1;
}
if($errors==1) echo $error;
else{
$values = array ('name','email','message');
$required = array('name','email','message');

$your_email = "dimasir@yahoo.com";
$email_subject = "New Message: ".$_POST['subject'];
$email_content = "new message:\n";

foreach($values as $key => $value){
  if(in_array($value,$required)){
    if ($key != 'subject' && $key != 'company') {
      if( empty($_POST[$value]) ) { echo 'PLEASE FILL IN REQUIRED FIELDS';     exit; }
    }
    $email_content .= $value.': '.$_POST[$value]."\n";
  }
}

if(@mail($your_email,$email_subject,$email_content)) {
    echo 'Message sent!'; 
} else {
    echo 'ERROR!';
}
}
?> 
```

编辑原始注释****这是我的 HTML 代码：

```
 <form method="post" action="contact.php"> 
                  <input type="hidden" name="send" value="1" />
                    <fieldset>                      
                        <label>First Name </label>
                        <input name="" type="text" class="filed1" />
                        <label>Last Name</label>
                        <input name="" type="text" class="filed1" />
                            <label>Your Email  </label>
                        <input name="" type="text" class="filed1" />
                        <label>Company</label>
                        <input name="" type="text" class="filed1" />
                        <label>Message </label>
                        <textarea name="" cols="" rows="" ></textarea>
                        <input type="image" src="images/send.jpg" />

                    </fieldset>
              </form>
            </div>
            <!--  \ CONTACT BOX / -->

          </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:34:45.823

改变你的线路，就像

`if(!preg_match('/\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/i',$email )){`

进入

`if(!preg_match('/^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)* @[A-Za-z0-9-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$/',$email )){`.

这应该可以解决问题。

如果这不起作用，请尝试更改`$email = $_POST['email'];`为`$email = urldecode($_POST['email'])`;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T23:03:31.053

```
if(!preg_match('/\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/i',$email )){
    $error.="Invalid email address entered";
    $errors=1;
} 
```

应该是这样的：

```
if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
    $error .= "Invalid email address entered";
    $errors = 1;
} 
```

PHP 有一个内置函数[filter_var()](http://us3.php.net/manual/en/function.filter-var.php#example-4924)来验证电子邮件地址，这比使用正则表达式更快、更准确。

使用此 HTML 代码**（确保填写其余属性）**：

```
<label>First Name </label>
<input name="f_name" type="text" class="filed1" />
<label>Last Name</label>
<input name="l_name" type="text" class="filed1" />
    <label>Your Email  </label>
<input name="email" type="text" class="filed1" />
<label>Company</label>
<input name="company" type="text" class="filed1" />
<label>Message </label>
<textarea name="message" cols="" rows="" ></textarea>
<input type="image" src="images/send.jpg" /> 
```

# meteor - 如何通过 html 按钮提交集合

> ID：15123737
> 
> 赞同：0
> 
> 时间：2013-02-27T22:28:33.430
> 
> 标签：meteor

我有一个 html 按钮。我想在单击时插入一个集合。我该怎么做呢？我知道如何从控制台执行此操作，但不知道页面。我目前正在使用基本的 hello world 示例。

下面是我的代码

```
var savedState = new Meteor.Collection("SavedState");

 Template.hello.events({
    'click input' : function () {

    savedState.insert({Category:"SYNTHS", items: [{Name:"whatever"}]});

    }
  });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:46:31.197

你遇到了什么错误？假设您围绕它编写的代码是正确的，那么您编写的代码是有效的。见下文。

Javascript：

```
var savedState = new Meteor.Collection("SavedState");

if (Meteor.isClient) {
    Template.hello.events({
        'click input' : function () {
            savedState.insert({Category:"SYNTHS", items: [{Name:"whatever"}]});
        }
    });
} 
```

模板：

```
<body>
    {{> hello}}
</body>

<template name="hello">
    <input type="button" value="Click" />
</template> 
```

# android - Android 开发 RecoverySystem.installPackage() 无法写入 /cache/recovery/command 权限被拒绝

> ID：15123742
> 
> 赞同：14
> 
> 时间：2013-02-27T22:28:57.687
> 
> 标签：android

我被要求为基于 Android 的产品编写一个简单的小应用程序。该设备带有两个具有不同功能的 Android 系统映像。我正在编写的应用程序只是一个概念证明，当您单击一个按钮时，它会使用恢复系统将当前操作系统替换为其中一个图像。

设备已植根，应用程序作为系统应用程序运行。

我用

```
RecoverySystem.installPackage(context, packageFile); 
```

（[请参阅此处以供参考](http://developer.android.com/reference/android/os/RecoverySystem.html#installPackage%28android.content.Context,%20java.io.File%29)）用其中一个图像替换操作系统。这应该重新启动系统并初始化恢复系统以安装映像。

我遇到的问题是此调用失败，因为该`RecoverySystem.installPackage`方法似乎无法访问 /cache/recovery/command 文件。我猜它试图为恢复系统编写一些命令，以便在重新启动时执行，但失败了。这是我得到的例外：

```
02-27 16:44:39.463: E/BroadSign Resolution Switcher(4439): java.io.FileNotFoundException: /cache/recovery/command: open failed: EACCES (Permission denied)
02-27 16:44:39.463: E/BroadSign Resolution Switcher(4439):  at libcore.io.IoBridge.open(IoBridge.java:416)
02-27 16:44:39.463: E/BroadSign Resolution Switcher(4439):  at java.io.FileOutputStream.<init>(FileOutputStream.java:88)
02-27 16:44:39.463: E/BroadSign Resolution Switcher(4439):  at java.io.FileOutputStream.<init>(FileOutputStream.java:73)
02-27 16:44:39.463: E/BroadSign Resolution Switcher(4439):  at java.io.FileWriter.<init>(FileWriter.java:42)
02-27 16:44:39.463: E/BroadSign Resolution Switcher(4439):  at android.os.RecoverySystem.bootCommand(RecoverySystem.java:381)
02-27 16:44:39.463: E/BroadSign Resolution Switcher(4439):  at android.os.RecoverySystem.installPackage(RecoverySystem.java:330) 
```

因此，我假设我没有访问此文件的适当权限。虽然这是我在清单中设置的权限：

```
<uses-permission android:name="android.permission.REBOOT" />
<uses-permission android:name="android.permission.ACCESS_CACHE_FILESYSTEM" />
<uses-permission android:name="android.permission.DELETE_CACHE_FILES" /> 
```

我知道我需要对`RecoverySystem`. 但是，我不知道其他两个是否相关。我什至不知道我是否需要其他权限来创建/写入 /cache 分区中的文件。

有人知道我可能会错过什么吗？

* * *

**更新：**

嗯，看来我想通了。毕竟权限是对的。一切都是正确的。

当我通过将 apk 文件移动到 /system/app 来将应用程序设置为系统应用程序时，我还没有放入所有权限。当我在我的设备上运行最新代码时，它会将其安装在 /data/app 中，并将其识别为系统应用程序的更新。因此，只能识别原始系统应用程序的权限。

在我重新设置我的最新代码以直接从 /system/app 运行后，它工作了。

现在我唯一的问题是，当它重新启动时，它没有安装映像，我最终得到一个带有感叹号的死绿色机器人。我会继续调查。

我希望这篇文章可以帮助任何有同样问题的人。我也很乐意回答任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-20T01:34:29.330

在我的应用程序安装在 /system/app 之前，我遇到了以下错误：

```
07-20 10:52:46.512      933-951/? W/RecoverySystem﹕ !!! REBOOTING TO INSTALL /storage/emulated/legacy/Download/Update.zip !!!
07-20 10:52:46.512      933-951/? W/System.err﹕ java.io.FileNotFoundException: /cache/recovery/command: open failed: EACCES (Permission denied)
07-20 10:52:46.512      933-951/? W/System.err﹕ at libcore.io.IoBridge.open(IoBridge.java:409)
07-20 10:52:46.512      933-951/? W/System.err﹕ at java.io.FileOutputStream.<init>(FileOutputStream.java:88)
07-20 10:52:46.512      933-951/? W/System.err﹕ at java.io.FileOutputStream.<init>(FileOutputStream.java:73)
07-20 10:52:46.512      933-951/? W/System.err﹕ at java.io.FileWriter.<init>(FileWriter.java:42)
07-20 10:52:46.512      933-951/? W/System.err﹕ at android.os.RecoverySystem.bootCommand(RecoverySystem.java:389)
07-20 10:52:46.522      933-951/? W/System.err﹕ at android.os.RecoverySystem.installPackage(RecoverySystem.java:337) 
```

我已经尝试了所有需要的权限，但我无法继续。

因此，由于我使用的是 4.2 以上的 API，因此我尝试**将我的应用程序放入`/system/priv-app`**其中，并且它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-18T15:07:01.420

系统应用（共享用户 ID 设置为 的应用`android.uid.system`）无法在 Android 5 及更高版本上安装系统更新 - SELinux 政策禁止这样做。`/cache`系统应用程序禁止具体写入。换句话说：

*   `/cache`归`system`用户所有，因此您在`system`UID 下运行的应用程序可以对其进行写入。*但仅当 SELinux 被禁用/允许时。*
*   如果您有`android.permission.ACCESS_CACHE_FILESYSTEM`平台签名权限，您可以写入`/cache`.

您需要删除共享用户 ID。您仍然需要使用平台签名对应用进行签名，并确保您拥有以下权限：

*   `android.permission.REBOOT`
*   `android.permission.ACCESS_CACHE_FILESYSTEM`- 写信给`/cache`
*   `android.permission.RECOVERY`- API 21 需要重启才能恢复

这将适用于 Kitkat 和 Lollipop+。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-25T04:14:01.540

**在android 5.0.2**中创建自定义 OtaUpdate 应用程序时，我遇到了同样的问题，我已经解决了。我将通过以下2个步骤与您分享：

1.  在 AndroidManifest.xml 中添加 android:sharedUserId="com.google.uid.shared"
2.  将您的 apk 推送到 system/app 或 system/priv-app

对于**安卓 4.1.2**：

1.  在 AndroidManifest.xml 中添加 android:sharedUserId="android.uid.system"
2.  将您的 apk 推送到系统/应用程序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-28T06:29:46.403

我在 android 8 中遇到了同样的问题。
如果你添加`android:sharedUserId="android.uid.system"`，`AndroidManifest.xml`它应该可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-24T01:39:50.450

**安卓 5.1.0**

1.  添加`android:sharedUserId="android.uid.system"`AndroidManifest.xml
2.  将您的 apk 推送到`system/priv-app`
3.  接着

    ```
    adb root
    adb shell setenforce 0 
    ```

# java - 处理 FreeMarker 模板中的错误有哪些不同的方法？

> ID：15123743
> 
> 赞同：13
> 
> 时间：2013-02-27T22:28:59.703
> 
> 标签：java, struts2, freemarker

如何抑制 FreeMarker 模板错误？我在这里看：http: [//freemarker.sourceforge.net/docs/pgui_config_errorhandling.html](http://freemarker.sourceforge.net/docs/pgui_config_errorhandling.html) 但我不明白如何“TemplateExceptionHandler.IGNORE_HANDLER”。我正在使用 Struts2 以及如何显示另一个 ftl 页面而不是显示堆栈跟踪？

```
class MyTemplateExceptionHandler implements TemplateExceptionHandler {
    public void handleTemplateException(TemplateException te, Environment env, java.io.Writer out)
            throws TemplateException {
        try {
            out.write("[ERROR: " + te.getMessage() + "]");
        } catch (IOException e) {
            throw new TemplateException("Failed to print error message. Cause: " + e, env);
        }
    }
}

...

cfg.setTemplateExceptionHandler(new MyTemplateExceptionHandler()); 
```

[在http://freemarker.sourceforge.net/docs/pgui_config_errorhandling.html](http://freemarker.sourceforge.net/docs/pgui_config_errorhandling.html)找到上面的文章 我该如何使用它？最后一行，cfg 来自哪里？

“FreeMarker API 的主要入口点”... [http://massapi.com/source/freemarker-2.3.18/src/freemarker/template/Configuration.java.html](http://massapi.com/source/freemarker-2.3.18/src/freemarker/template/Configuration.java.html)

所以，这是主要的入口点，我猜 cfg 来自这个类。我仍然没有看到控制器将如何进入我的 MyTemplateExceptionHandler 类。

以下线路需要去哪里？

```
cfg.setTemplateExceptionHandler(new MyTemplateExceptionHandler()); 
```

只是将这条线放在正确的位置吗？

这就是我当前班级的样子：

```
 import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.Writer;
import java.util.Properties;

import freemarker.cache.FileTemplateLoader;
import freemarker.cache.MultiTemplateLoader;
import freemarker.cache.TemplateLoader;
import freemarker.cache.WebappTemplateLoader;
import freemarker.core.Environment;
import freemarker.ext.beans.BeansWrapper;
import freemarker.ext.jsp.TaglibFactory;
import freemarker.ext.servlet.HttpRequestHashModel;
import freemarker.ext.servlet.HttpRequestParametersHashModel;
import freemarker.ext.servlet.HttpSessionHashModel;
import freemarker.ext.servlet.ServletContextHashModel;
import freemarker.template.ObjectWrapper;
import freemarker.template.TemplateException;
import freemarker.template.TemplateExceptionHandler;
import freemarker.template.TemplateModel;

import javax.servlet.GenericServlet;
import javax.servlet.ServletContext;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.apache.struts2.views.JspSupportServlet;
import org.apache.struts2.views.freemarker.FreemarkerManager;
import org.apache.struts2.views.freemarker.ScopesHashModel;
import org.apache.struts2.views.freemarker.StrutsBeanWrapper;
import org.apache.struts2.views.freemarker.StrutsClassTemplateLoader;
import org.omg.CORBA.PUBLIC_MEMBER;

import com.opensymphony.xwork2.ActionInvocation;
import com.opensymphony.xwork2.util.FileManager;
import com.opensymphony.xwork2.util.ValueStack;

public class MyTemplateExceptionHandler extends org.apache.struts2.views.freemarker.FreemarkerManager {

    freemarker.template.Configuration configuration = new freemarker.template.Configuration();

    public MyTemplateExceptionHandler() {
        System.out.println("MyTemplateExceptionHandler constructor()");
        configuration.setTemplateExceptionHandler(new Test1());
    }

    class Test1 implements TemplateExceptionHandler {

        @Override
        public void handleTemplateException(TemplateException te, Environment env, java.io.Writer out) throws TemplateException {
            System.out.println("MyTemplateExceptionHandler1 handleTemplateException()");
            try {
                out.write("[ERROR TEST TEST: " + te.getMessage() + "]");
            } catch (IOException e) {
                throw new TemplateException("Failed to print error message. Cause: " + e, env);
            }
        }
    }
} 
```

我的代码将进入 MyTemplateExceptionHandler 构造函数（）。但不能进入 MyTemplateExceptionHandler1 handleTemplateException()。我需要做什么？

我仍然看到黄色的 FTL 堆栈跟踪。

在这个博客上也指出了同样的事情：http: [//blog.cherouvim.com/freemarker-exception-handling/](http://blog.cherouvim.com/freemarker-exception-handling/)我在哪里配置我的 freemarker 以及如何配置？我仍然不知道那条线需要去哪里。

我的另一个问题是，博客上发布的类似乎是一个内部类，我是将那个内部类放入任何类还是外部类？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T15:43:08.587

如果您想在 freemarker 中处理它，请使用它的[尝试恢复](http://freemarker.sourceforge.net/docs/ref_directive_attempt.html)机制：

```
<#attempt>
  attempt block
<#recover>
  recover block
</#attempt> 
```

它类似于 Java 的 try-catch。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T09:05:56.597

如果要在 Struts2 中设置`TemplateExceptionHandler`为，则`TemplateExceptionHandler.IGNORE_HANDLER`需要扩展`org.apache.struts2.views.freemarker.FreemarkerManager`类、覆盖`init`和`createConfiguration`方法，并在`struts.properties`文件中配置自定义管理器。

```
struts.freemarker.manager.classname = your.package.YourFreeMarkerManager 
```

**更新**

您的自定义 FreemarkerManager 应如下所示：

```
public class MyFreemarkerManager extends
    org.apache.struts2.views.freemarker.FreemarkerManager {

private static final Logger LOG = LoggerFactory
        .getLogger(MyFreemarkerManager.class);

@Override
public void init(ServletContext servletContext) throws TemplateException {
    config = createConfiguration(servletContext);

    // Set defaults:
    config.setTemplateExceptionHandler(TemplateExceptionHandler.IGNORE_HANDLER);
    contentType = DEFAULT_CONTENT_TYPE;

    // Process object_wrapper init-param out of order:
    wrapper = createObjectWrapper(servletContext);
    if(LOG.isDebugEnabled()) {
        LOG.debug("Using object wrapper of class " + wrapper.getClass().getName());
    }
    config.setObjectWrapper(wrapper);

    // Process TemplatePath init-param out of order:
    templatePath = servletContext.getInitParameter(INITPARAM_TEMPLATE_PATH);
    if(templatePath == null) {
        templatePath = servletContext.getInitParameter("templatePath");
    }

    config
            .setTemplateLoader(createTemplateLoader(servletContext, templatePath));

    loadSettings(servletContext);
}

@Override
protected Configuration createConfiguration(ServletContext servletContext)
        throws TemplateException {
    Configuration configuration = new Configuration();

    configuration
            .setTemplateExceptionHandler(TemplateExceptionHandler.IGNORE_HANDLER);

    if(mruMaxStrongSize > 0) {
        configuration.setSetting(Configuration.CACHE_STORAGE_KEY, "strong:"
                + mruMaxStrongSize);
    }
    if(templateUpdateDelay != null) {
        configuration.setSetting(Configuration.TEMPLATE_UPDATE_DELAY_KEY,
                templateUpdateDelay);
    }
    if(encoding != null) {
        configuration.setDefaultEncoding(encoding);
    }

    configuration.setWhitespaceStripping(true);

    return configuration;
}
} 
```

将该常量放入您的 struts.xml 文件中：

```
<constant name="struts.freemarker.manager.classname" value="your_package.MyFreemarkerManager" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-11T22:07:18.437

您还可以使用`freemarker.properties`以下内容`key=value`：

```
template_exception_handler = rethrow 
```

只需将您`freemarker.properties`的放在类路径中即可。

我认为这是一种更清洁的方法。

# c# - 即使成功执行，C# 对象也无法从 DBNull 错误中强制转换

> ID：15123745
> 
> 赞同：0
> 
> 时间：2013-02-27T22:29:06.593
> 
> 标签：c#, sql

我正在尝试更新我的数据库中的值（同时返回状态消息）并且收到以下 InvalidCastError - Object cannot be cast from DBNull to other types。但是，信息会在数据库中更新。它似乎只是不想返回“真”或等效的成功。代码如下图：

C＃：

```
 public bool Update(Customer pCustomer)
    {
        using (SqlConnection sqlConnect = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString))
        {
            using (SqlCommand sqlComm = new SqlCommand("Update_Customer", sqlConnect))
            {
                sqlComm.CommandType = CommandType.StoredProcedure;
                //Other items to update (Not causing issues)

                sqlComm.Parameters.Add("@Message", SqlDbType.Bit).Direction = ParameterDirection.Output;
                sqlComm.Connection = sqlConnect;

                try
                {
                    sqlComm.Connection.Open();
                    sqlComm.ExecuteNonQuery();
                    return Convert.ToBoolean(sqlComm.Parameters["@Message"].Value);
                }

                catch(Exception)
                {
                    throw;
                }

                finally
                {
                    sqlComm.Connection.Close();
                }
            }
        }
    } 
```

SQL：

```
 //Unrelevent code removed
  AS
BEGIN
    BEGIN TRY
        BEGIN TRAN
            BEGIN
                UPDATE Customer
                SET
                    Password = @Password,
                    RecordTimeStamp = @NewRecordTimeStamp
                WHERE CustomerID = @CustomerID AND RecordTimeStamp = @OldRecordTimeStamp
            END
            IF @@ROWCOUNT <> 1
                BEGIN
                    Set @Message = 1
                END
        IF @@ERROR <> 0
            ROLLBACK TRAN
        ELSE
            COMMIT TRAN
    END TRY
    BEGIN CATCH
        DECLARE @Err nvarchar(500)
        SET @Err = ERROR_MESSAGE()
        RAISERROR(@Err, 16, 1)
    END CATCH
END
GO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:34:28.123

采取有根据的猜测，我认为`sqlComm.Parameters["@Message"].Value`正在回归`System.DBNull.Value`。

是否有可能`@@ROWCOUNT`等于 1，因此`@Message`没有被设置？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T23:33:05.127

```
AS
BEGIN
Set @Message = 0
    BEGIN TRY
        BEGIN TRAN
            BEGIN
                UPDATE Customer
                SET
                    Password = @Password,
                    RecordTimeStamp = @NewRecordTimeStamp
                WHERE CustomerID = @CustomerID AND RecordTimeStamp = @OldRecordTimeStamp
            END
            IF @@ROWCOUNT = 1
                    Set @Message = 1
            END
            IF @@ERROR <> 0
            ROLLBACK TRAN
            ELSE
            COMMIT TRAN
    END TRY
    BEGIN CATCH
        DECLARE @Err nvarchar(500)
        SET @Err = ERROR_MESSAGE()
        RAISERROR(@Err, 16, 1)
    END CATCH
END
GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T23:19:48.573

除非我的 T-Sql 很糟糕，否则应该可以。

```
BEGIN
    SET @Message = 0;

    BEGIN TRANSACTION

    BEGIN TRY
        UPDATE Customer
        SET Password        = @Password,
            RecordTimeStamp = @NewRecordTimeStamp
        WHERE CustomerID    = @CustomerID
        AND RecordTimeStamp = @OldRecordTimeStamp

        IF @@ROWCOUNT <> 1
            Set @Message = 1;

        COMMIT TRANSACTION
    END TRY
    BEGIN CATCH

        DECLARE @Err nvarchar(500)
        SELECT @Err = ERROR_MESSAGE()
        RAISERROR(@Err, 16, 1)

        ROLLBACK TRANSACTION
    END CATCH
END 
```

# asp.net - 如何在 asp.net 中使用 LINQ 显示年初至今的数据

> ID：15123751
> 
> 赞同：0
> 
> 时间：2013-02-27T22:29:21.693
> 
> 标签：asp.net, linq, entity-framework

我正在尝试为商店显示选定年份的选定月份的**YearToDate的总****销售**记录。假设用户选择 Year = 2012 和 Month = July，因此 Shop 的**YearToDate**总数将是所有记录的总和从 2012 年 1 月到 2012 年 7 月。如何使用 LINQ 来完成？

 ****我的做法：

```
ShowRecordForYearToDate(year, monthFrom, MonthTo)
{
    ...
} 
```

问题是计算**YearToDate**总数我必须设置 MonthFrom = 所选年份的第一个月，如何在 LINQ 中完成？销售记录的属性**SalesDate**为`datetime`。

我看了一下[here](https://stackoverflow.com/a/15101301/1108500)，但不确定我应该如何处理。

对不起，如果这个问题太琐碎，但对于新手来说。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:32:15.720

像这样的东西？

```
var YTDTotal = Sales.Where(s => s.Date.Year = year 
                             && s.Date.Month >= monthFrom
                             && s.Date.Month <= monthTo
                          )
                    .Sum(s=>s.Amount); 
```

或者如果总是从一月开始

```
var YTDTotal = Sales.Where(s => s.Date.Year = year 
                             && s.Date.Month <= monthTo
                          )
                    .Sum(s=>s.Amount); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:33:15.500

```
 Shop.Where(s => s.Year == year && a.month      >= monthFrom && s.month <= monthTo).Sum(s     => s.Sales) 
```****

# java - Java，围绕自身旋转图像

> ID：15123763
> 
> 赞同：1
> 
> 时间：2013-02-27T22:29:54.033
> 
> 标签：java, image, swing, image-rotation

我知道如何在 java 中旋转图像，但我找不到使用 Graphics2D.rotate 方法围绕其中心旋转图像的方法。这就是我所拥有的。

```
public void rotateLeft(Graphics2D g) {
    rotateLeft++;

    g.rotate(Math.toRadians(rotateLeft), charX, charY);
} 
```

顺便说一句，charX 和 charY 是坐标...那么，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T22:33:37.280

您可以使用：

```
g.rotate(angle, (imageWidth / 2) + 1, (imageHeight / 2) + 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T22:18:53.607

这就是我的做法：

```
 AffineTransform oldTrans = g2d.getTransform();
        g2d.rotate(-theta,xNow+bufferedBox.getWidth()/2, this.getHeight() - groundY - yNow - bufferedBox.getHeight()/2);
        g2d.drawImage(bufferedBox, xNow, this.getHeight() - groundY - yNow - bufferedBox.getHeight(), null);
        g2d.setTransform(oldTrans); 
```

xNow 和 yNow 是我的盒子所在的坐标。“this”指的是 jPanel，groundY 是偏移量（它在地面上）。bufferedBox 指的是我的图像

# mysql - 如何将形状文件导入 MySQL

> ID：15123765
> 
> 赞同：11
> 
> 时间：2013-02-27T22:30:06.633
> 
> 标签：mysql, import, spatial, shapefile

我需要将 shape 文件中的空间数据导入 MySQL 表。我能够导入 PostGreSQL。MySQL 的任何指针。我需要 MySQL 表中的数据。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-16T19:48:48.307

安装 FWtool 试试这个

```
ogr2ogr -f MySQL MySQL:database_name,host=localhost,user=root,password=1234 C:\route_path\line.shp -nln datatable_name -update -overwrite -lco engine=MYISAM 
```

尝试在任何进程中安装以获得更好的结果 Osgeo4w

[http://trac.osgeo.org/osgeo4w/](http://trac.osgeo.org/osgeo4w/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-25T22:06:46.253

I have just used the ogr2ogr command line tool to import the shape file into the mysql database. Make sure that the database server allows external connections. If doesn't, then it throws all sorts of errors.

Once you have that you can use -

Select ASTEXT(Shape) POLYGON from world to get an array of the polygon coordinates etc

# c - 搜索项目链表C（队列）

> ID：15123767
> 
> 赞同：0
> 
> 时间：2013-02-27T22:30:09.963
> 
> 标签：c, linked-list, queue, traversal

我有两个结构名称 *head 和 *tail。

我使用 head 作为链表的开始，使用 tail 作为结束。

假设我有一个包含任意数量元素的链表

```
typedef struct queue
{
    int stuff;
    struct queue *nextNode;
}q; 
```

在我的一个节点中，stuff = 164（这是假设的）

我将如何搜索我的链接列表以找到 164？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T22:33:17.290

获取指向链表头部的指针。假设列表中的最后一项标有其`nextNode`指针为`NULL`，您可以逐个遍历列表：

```
struct queue *tmp = head;
while (tmp != NULL) {
    if (tmp->stuff == 164) {
        // found it!
        break;
    }
    tmp = tmp->nextNode;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:32:48.760

只需遍历您的队列

```
struct queue *current = head;

while(current != NULL)
{
    if(current->stuff == numToSearch)
        // found it
    current = current->nextNode;

} 
```

注意：请原谅任何小的语法错误，我已经有一段时间没有接触 c

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:37:30.123

```
struct queue *find(struct queue *ptr, int val) {
 for ( ; ptr; ptr = ptr->nextNode) {
     if (ptr->stuff == val) break;
     }
 return ptr;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T23:12:31.217

从头开始。虽然未达到尾部且当前项目值不是我们正在寻找的值，但转到下一个节点。如果项目完成，则循环不是我们正在寻找的那个 -> 列表中不存在这样的项目。代码是在尾指针不为 NULL 的假设下编写的。

```
struct queue* item = head;
while (item != tail && item->stuff != 164) {
    item = item->nextNode;
}
if (164 == item->stuff) {
// do the found thing
} else {
// do the not found thing
} 
```

# lua - 将碰撞侦听器排除到一个对象

> ID：15123769
> 
> 赞同：0
> 
> 时间：2013-02-27T22:30:15.433
> 
> 标签：lua, coronasdk

在下面代码的第 6 行，我添加了一个`Runtime:addEventListener("collision", onCollision)`，但它正在与带有身体的所有东西交互，在这种情况下如何将碰撞侦听器排除到一个对象'BCloud1.png'

```
function getRandomStar()
    local temp = starTable[math.random(1, #starTable)] -- Get a random star from starTable
    local randomStar = display.newImage(temp.imgpath) -- Set image path for object

    if ( temp.imgpath == "BCloud1.png" ) then
    physics.addBody( randomStar, "static", { density=.1, bounce=.1, friction=.2, radius=45 } )
    Runtime:addEventListener("collision", onCollision)
    temp.imgpath = "BCloud"..tostring(math.random(1, 3))..".png";
    end

    if ( temp.imgpath == "BCloud2.png" ) then
    temp.imgpath = "BCloud"..tostring(math.random(1, 3))..".png";
    physics.addBody( randomStar, "static", { density=.1, bounce=.1, friction=.2, radius=45 } )  
    end

    if ( temp.imgpath == "BCloud3.png" ) then
    temp.imgpath = "BCloud"..tostring(math.random(1, 3))..".png";
    physics.addBody( randomStar, "static", { density=.1, bounce=.1, friction=.2, radius=45 } )  
    end

    randomStar.myName = "star" -- Set the name of the object to star
    randomStar.movementSpeed = temp.movementSpeed; -- Set how fast the object will move
    randomStar.x = math.random(-30, _W);    
    randomStar.y = -35;
    randomStar.rotation = math.random(0,20) -- Rotate the object

    starMove = transition.to(randomStar, {
        time=randomStar.movementSpeed, 
        y=500,
        onComplete = function(self) self.parent:remove(self); self = nil; 
        end
        }) -- Move the star
end--END getRandomStar() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:34:20.637

如果你想使用

```
Runtime:addEventListener("collision", onCollision) 
```

并控制什么与什么发生碰撞，然后使用碰撞过滤器。它们看起来要容易得多。

这是我在学习它们时使用的教程。

[碰撞过滤器](https://developer.coronalabs.com/forum/2010/10/25/collision-filters-helper-chart)

# python - celery - 链接组和子任务。-> 乱序执行

> ID：15123772
> 
> 赞同：28
> 
> 时间：2013-02-27T22:30:38.070
> 
> 标签：python, celery, django-celery

当我有类似以下的事情时

```
group1 = group(task1.si(), task1.si(), task1.si())
group2 = group(task2.si(), task2.si(), task2.si())

workflow = chain(group1, group2, task3.si()) 
```

直观的解释是 task3 应该只在组 2 中的所有任务都完成后执行。

实际上，任务 3 在 group1 已启动但尚未完成时执行。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-28T22:48:59.127

事实证明，在芹菜中，您不能将两组链接在一起。
我怀疑这是因为与任务链接的组自动成为一个和弦
-> Celery 文档：[http ://docs.celeryproject.org/en/latest/userguide/canvas.html](http://docs.celeryproject.org/en/latest/userguide/canvas.html)

> 将一个组与另一个任务链接在一起会自动将其升级为和弦：

组返回父任务。当将两组链接在一起时，我怀疑当第一组完成时，和弦开始回调“任务”。我怀疑这个“任务”实际上是第二组的“父任务”。我进一步怀疑这个父任务在完成启动组内的所有子任务后立即完成，因此执行第二组之后的下一个项目。

为了证明这一点，这里有一些示例代码。您需要已经有一个正在运行的 celery 实例。

```
# celery_experiment.py

from celery import task, group, chain, chord
from celery.signals import task_sent, task_postrun, task_prerun

import time
import logging

import random
random.seed()

logging.basicConfig(level=logging.DEBUG)

### HANDLERS ###    
@task_prerun.connect()
def task_starting_handler(sender=None, task_id=None, task=None, args=None, kwargs=None, **kwds):    
    try:
        logging.info('[%s] starting' % kwargs['id'])
    except KeyError:
        pass

@task_postrun.connect()
def task_finished_handler(sender=None, task_id=None, task=None, args=None, kwargs=None, retval=None, state=None, **kwds):
    try:    
        logging.info('[%s] finished' % kwargs['id'])
    except KeyError:
        pass

def random_sleep(id):
    slp = random.randint(1, 3)
    logging.info('[%s] sleep for %ssecs' % (id, slp))
    time.sleep(slp)

@task()
def thing(id):
    logging.info('[%s] begin' % id)
    random_sleep(id)
    logging.info('[%s] end' % id)

def exec_exp():
    st = thing.si(id='st')
    st_arr = [thing.si(id='st_arr1_a'), thing.si(id='st_arr1_b'), thing.si(id='st_arr1_c'),]
    st_arr2 = [thing.si(id='st_arr2_a'), thing.si(id='st_arr2_b'),]
    st2 = thing.si(id='st2')
    st3 = thing.si(id='st3')
    st4 = thing.si(id='st4')

    grp1 = group(st_arr)
    grp2 = group(st_arr2)

    # chn can chain two groups together because they are seperated by a single subtask
    chn = (st | grp1 | st2 | grp2 | st3 | st4)

    # in chn2 you can't chain two groups together. what will happen is st3 will start before grp2 finishes
    #chn2 = (st | st2 | grp1 | grp2 | st3 |  st4)

    r = chn()
    #r2 = chn2() 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-09-26T02:51:05.783

我对芹菜有同样的问题，试图建立一个第一步是“产生一百万个任务”的工作流程。尝试了分组、子任务，最终我的第 2 步在第 1 步结束之前开始。

长话短说，我可能已经找到了使用和弦和哑音完成器的解决方案：

```
@celery.task
def chordfinisher( *args, **kwargs ):
  return "OK" 
```

什么都不做，但它使我能够做到这一点：

```
tasks = []
for id in ids:
    tasks.append( mytask.si( id ) )
step1 = chord( group( tasks ), chordfinisher.si() )

step2 = ...

workflow = chain( step1, step2 ) 
```

本来我想在子任务中有step1，但出于与怀疑相同的原因，调用组的动作结束，任务被认为已完成，我的工作流程继续......

如果有人有更好的东西，我很感兴趣！

# ruby-on-rails - 访问从控制器代码传入 URL 的参数

> ID：15123774
> 
> 赞同：0
> 
> 时间：2013-02-27T22:30:38.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我的耙子路线如下所示：

```
report GET /management/:id/report(.:format) report#show 
```

在我的控制器代码中，如何访问该 :id 参数？还在`.params[:id]`吗？

我想我很困惑，因为这个时间 id 不是 URL 中的最后一件事，它位于 URL 的中间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:33:28.517

是的，您可以像您说的那样访问您在路线中定义的参数：

```
# The route 
# /management/:id/report(.:format)
# will generate the following params:
params[:id]
params[:format] # optional 
```

另一个例子：

```
match ':controller(/:action(/:id))'
# will produce the following params:
params[:controller]
params[:action] # (optional)
params[:id] # (optional)

match '/search/:search'
# will produce, in the SearchController (and views):
params[:search] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:33:55.480

它是`params[:id]`。它只是一个命名参数，不必是 url 的最后一部分。如果它不起作用，请提供您的路线。

# php - 如何重构这个嵌套的 try-catch

> ID：15123775
> 
> 赞同：1
> 
> 时间：2013-02-27T22:30:43.683
> 
> 标签：php, refactoring, try-catch

我是 try-catch 的新手，最近一直在重构大量代码以跟上[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)的原则。但是，我仍然有一些我无法完全解决的场景。例如，在我正在开发的多语言应用程序中，我想让用户通过在 URL 的查询字符串中传递两个字母的国家代码来设置界面语言，或者让应用程序使用默认语言，如果用户没有请求：

```
// Which language shall we use?
$language = new language();
if(isset($_GET['language_code'])){
    try {
        $language->set_by_language_code($_GET['language_code']);
    } catch(e_language_not_found $e){
        try {
            $language->set_default_language();
            // TODO - use 'e_language_not_found' to display an error in the default language
        } catch(Exception $e){
            exit('No default language found');
        }
    }
} else {
    try {
        $language->set_default_language();
    } catch(Exception $e){
        exit('No default language found');
    }
} 
```

`set_default_language()`问题是当用户根本没有请求任何语言时，我已经重复了该块。如何重构代码以便在应用程序中只调用一次该方法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:39:59.220

在我看来，你应该在你的`language`类中实现这些方法：

*   `language::hasLanguage()`它返回一个布尔值，指示语言的存在（不抛出异常！）

*   `language::getDefLang()`它返回默认语言标识符。

```
// Which language shall we use?
$language = new language();

// fallback
$langToSet = $language->getDefLang();

// use the passed language identifier if it exists
$passedLangId = isset($_GET['language_code']) ? $_GET['language_code'] : NULL;
if ($passedLangId !== NULL && $language->hasLanguage($passedLangId)) {
  $langToSet = $passedLangId;
}

try {
  $language->set_by_language_code($langToSet);
}
catch(Exception $e){
  exit('No default language found');
} 
```

您还应该为块指定更详细`Exception`的类型。`catch`

`try...catch`您还可以通过`language::hasLanguage()`在`if`语句中使用来替换块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T22:40:25.180

您在两个地方调用该函数的事实本身并不坏。它不会影响性能，重构它可能会降低代码的可读性。

这是我为您的代码提出的：

```
// Which language shall we use?
$language = new language();
try {
  try {
    if(isset($_GET['language_code'])){
      $language->set_by_language_code($_GET['language_code']);
    } else {
      $language->set_default_language();     
    }
  } catch(e_language_not_found $e){    
      $language->set_default_language();    
  }
} catch (Exception $e){
  exit('No default language found');
} 
```

# segmentation-fault - 不能 strcpy 分段错误

> ID：15123780
> 
> 赞同：0
> 
> 时间：2013-02-27T22:30:55.420
> 
> 标签：segmentation-fault

我得到一个分段错误

所以在顶部我有 typedef char * string;

然后我只有一个名为空格的变量，设置为 5 左右

```
for(i=0; i<=spaces; i++) {
    sepwords[i] = malloc(3000);
} 
```

str 是一个字符数组，我正在寻找空格并复制到那时

```
while(str[i]!=' ') {

    printf("%d\n", i);
    strcpy(sepwords[i], "hello");
    i++;

} 
```

所以这实际上有效

但是，如果我这样做

```
while(str[i]!=' ') {
    char *temp[100];
    *temp=str[i];

    printf("%d\n", i);
    strcpy(sepwords[i], *temp);
    i++;

} 
```

它在这方面存在缺陷

我不认为这是因为我使用的是 typedef 字符串，因为我事先分配了内存。

有任何想法吗？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define MAXLINE 256

char *progn;

void usage(void) {
    fprintf(stderr, "Usage: %s pattern\n", progn);
}
typedef char * string;

int pattern_match(char *pattern, char *str) {

int i=0;
int spaces=0;

while(str[i]!=0) {
    if(str[i]==' ') {
        spaces++;
    }
    i++;
}
string sepwords[spaces];

for(i=0; i<=spaces; i++) {
    sepwords[i] = malloc(3000);
}

i=0;

while(str[i]!=' ') {
    char *temp[100];
    *temp=str[i];

    printf("%d\n", i);
    strcpy(sepwords[i], temp);
    i++;

}

//printf("%d\n", spaces);

//strs[0]="hiya boy";
//printf(strs[1]);

}

int main(int argc, char **argv) {

    char line[MAXLINE];
    char *pattern;
    progn = argv[0];

    if (argc != 2) {
        usage();
        return EXIT_FAILURE;
    }
    pattern = argv[1];

    while (!feof(stdin) && !ferror(stdin)) {
        if (!fgets(line, sizeof (line), stdin)) {
            break;
        }
        if (pattern_match(pattern, line)) {
            printf("%s", line);
        }
    }
    if (ferror(stdin)) {
        perror(progn);
        return EXIT_FAILURE;
    }
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T23:00:47.800

您的代码中有两个语法错误。你的编译器一定警告过你：

> *temp=str[i];

temp 是 char*[100]，* *temp 等价于 temp[0]，它是一个 char **。但是 str[i] 是字符。因此，您将 char （单字节）放入 char* （地址）中。

> strcpy(sepwords[i], temp);

temp 是 100 个 char* 的完整数组的地址，因此您像一个大字符串一样复制，直到找到某个零字节。

还有这个错误：

> 字符串分隔符[空格]；
> 
> for(i=0; i<=空格; i++) {
> 
> ```
> sepwords[i] = malloc(3000); 
> ```

它是：i < 空格，而不是 i<=spaces，因为 string sepwords[spaces] 分配了一个“空格”长度的数组，从 0 到空格-1。

最后：如果您的输入不包含空格，则 while(str[i] != ' ') 没有结束条件这是您遇到段错误的地方（gdb 是您的朋友），因为您最终会照顾结束str （过去最后一个 \0 字节）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:32:21.987

1.  与其将 char* 定义为字符串，不如将其定义为 pchar。char* 不是字符串，它是指向字符的指针，它可能是也可能不是字符的地址，在内存中可能后面跟着以 0 结尾的其他字符。这很重要，因为 undefined_pchar 的值 = 分段错误。undefined_string = "" 的值。

2.  `fprintf(stderr, "Usage: %s pattern\n", progn);`这将打印未定义的 progn。它可能是非法内存，也可能是随机收集的内存。无论哪种情况都不好。所以你应该在声明你的 progn 时`pchar progn = 0`表明你理解这个概念。

3.  sepwords 是一个 char*，sepwords[i] 是一个 char，通过说 sepwords[i] = malloc(3000)，如果它甚至可以编译，那将是对符号的滥用。改为使用 pchar* 来创建 c 样式字符串的列表。

    for(i=0; i<=spaces; i++) { sepwords[i] = malloc(3000); }

我很想尝试找出错误，但是意图必须有点清楚，我才能通过评论或正确的类型使用来理解您要做什么。

# css - 样式块引用 - 必须浮动：正确，但希望块引用居中

> ID：15123781
> 
> 赞同：3
> 
> 时间：2013-02-27T22:31:03.613
> 
> 标签：css, css-float, html

我正在尝试设置我的块引用的样式，以便将它们从常规文本中删除，并使用不同的颜色背景。我发现让它们从常规文本中脱颖而出的最好方法是使用`float:right`，但是，我不希望将块引用强制到段落的右侧（理想情况下，我希望它居中）。我如何实现这种效果？

需要明确的是，我希望块引用中的文本保持左对齐。块引用的整个形式是我想要居中的。

[jsfiddle](http://jsfiddle.net/ecCCu/)

```
.blockquote {
    width: 75%;
    float: right;
    margin-top:20px;
    margin-bottom: 20px;
    padding: 20px;
    background: #0fddaf;
    background: rgb(15, 221, 175); /* Fall-back for browsers that don't support rgba */
    background: rgba(15, 221, 175, .15);
    font-family: fanwood_italic-webfont;
}

.blockquote p {
    padding: 10px

}

<span class="blockquote">Being good in business is the most fascinating kind of art. Making money is art and working is art and good business is the best art.</span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:35:26.180

与其浮动它，为什么不将 .blockquote 设置为`display: block`并删除浮动？然后，您可以只使用边距/填充将其放在您想要的位置，而不必担心内容会根据您调整大小*。

*很多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T22:35:43.137

将跨度更改为 div。然后删除float：right，并添加margin：0 auto；

[http://jsfiddle.net/ecCCu/3](http://jsfiddle.net/ecCCu/3)

```
<div class="blockquote">Being good in business is the most fascinating kind of art. Making money is art and working is art and good business is the best art.</div>

.blockquote {
    width: 75%;
    margin: 0 auto;
    margin-top:20px;
    margin-bottom: 20px;
    padding: 20px;
    background: #0fddaf;
    background: rgb(15, 221, 175); /* Fall-back for browsers that don't support rgba */
    background: rgba(15, 221, 175, .15);
    font-family: fanwood_italic-webfont;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:35:13.797

也许这就是你想要的：

*   [http://jsfiddle.net/ecCCu/1/](http://jsfiddle.net/ecCCu/1/)

我还添加了`text-align: right`以防万一，因为您提到您希望文本向右移动，而不是整个容器/黑引号。

* * *

**编辑**我忘记了你`float: right`在那里，所以这是另一个没有它的更新：

*   [http://jsfiddle.net/ecCCu/2/](http://jsfiddle.net/ecCCu/2/)

# c# - 当用户具有完全控制权时，DirectorySecurity.SetAccesesControl 上出现 UnauthorizedAcccesException

> ID：15123784
> 
> 赞同：1
> 
> 时间：2013-02-27T22:31:20.757
> 
> 标签：c#, security, directory

我有一个 C# 控制台应用程序，它正在创建一个目录，然后尝试将目录的修改访问权限授予域用户。该应用程序已经运行了很长时间，但突然之间它开始抛出一个`UnauthorizedAcccesException`方法`DirectorySecurity.SetAccessControl`。

我已经使用了当前用户帐户`WindowsIdentity.GetCurrent`并确认它是我期望的帐户（它冒充高级用户，因为登录用户没有足够的访问权限）。我已经检查了超级用户对所创建目录的权限，他们拥有完全控制权。

```
private DirectoryInfo CreateFolderWithOpenAccess(string directoryPath)
{
  DirectoryInfo directory = Directory.CreateDirectory(directoryPath);
  DirectorySecurity directorySecurity = directory.GetAccessControl();

  if (!HasModifyAccess(directory))
  {
    directorySecurity.AddAccessRule(
      new FileSystemAccessRule(
        Settings.Default.DomainUsers, 
        FileSystemRights.Modify,
        InheritanceFlags.ContainerInherit | InheritanceFlags.ObjectInherit,
        PropagationFlags.None, 
        AccessControlType.Allow
      )
    );

    directory.SetAccessControl(directorySecurity);
  }

  return directory;
} 
```

有人对我应该检查什么以确保我没有遗漏任何东西有任何建议吗？这样做的任何替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:03:21.793

我咨询了我们 IT 部门的人，他们提醒我正在使用网络文件共享访问我正在创建的文件夹。事实证明，即使该帐户对共享中的所有文件和文件夹具有“完全控制”权限，它也无法更改权限，因为它在共享级别没有“完全控制”权限。造成这种情况的原因是我们的数据服务器上的文件夹洗牌，其中一位 IT 人员重新创建了共享，但没有重新创建帐户的“完全控制”权限。共享权限可以通过以下方式找到：

1.  打开共享文件夹的属性
2.  单击“共享”选项卡
3.  点击“高级共享”
4.  点击“权限”
5.  确保该帐户具有“完全控制”

# c# - Windows Phone 8 检测屏幕解锁

> ID：15123785
> 
> 赞同：2
> 
> 时间：2013-02-27T22:31:26.033
> 
> 标签：c#, windows-phone-8, windows-phone

我的 WP8 应用程序设置为在锁定屏幕下运行，因为即使在屏幕锁定时它也需要继续运行，但我希望能够检测到用户何时解锁他们的屏幕，我该怎么做？

手机解锁时调用了哪些方法（如果有）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T22:37:25.603

框架的`Unobscured`事件将在用户解锁时触发（它也会`Obscured`在手机被锁定时触发）。

然而，这些事件也会为 MessageBox、Reminder 等触发，因此您会得到其他误报。但是，应该可以很容易地检测到您所追求的场景。

[有关详细信息，](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206951%28v=vs.105%29.aspx)请参阅此 MSDN 链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T22:36:26.767

`PhoneApplicationFrame`锁定/解锁类有两个适当的事件：

[PhoneApplicationFrame.Unobscured 事件](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.controls.phoneapplicationframe.unobscured%28v=vs.105%29.aspx)

[PhoneApplicationFrame.Obcured 事件](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.controls.phoneapplicationframe.obscured%28v=vs.105%29.aspx)

MSDN上对此有更多描述：[如何模拟Windows Phone的锁定屏幕](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206951%28v=vs.105%29.aspx#BKMK_Understandingtheeventsthatoccurwhenthephoneislockedorunlocked)

# magento - 为所有简单产品都启用了地图的组产品应用地图

> ID：15123787
> 
> 赞同：0
> 
> 时间：2013-02-27T22:31:28.290
> 
> 标签：magento

我们有一个 Magento 问题，当所有简单产品都启用了 MAP 时，组产品（在搜索、目录等中）显示其价格为“起价：$XX.XX”。

我们希望价格显示类似“添加到购物车以查看价格”的内容

我已将其追踪到代码中的两个可能位置。

首先在 app/code/core/Mage/Catalog/Block/Product/Abstract.php

```
public function getPriceHtml($product, $displayMinimalPrice = false, $idSuffix = '')
{
    $type_id = $product->getTypeId();
    if (Mage::helper('catalog')->canApplyMsrp($product)) {
        $realPriceHtml = $this->_preparePriceRenderer($type_id)
            ->setProduct($product)
            ->setDisplayMinimalPrice($displayMinimalPrice)
            ->setIdSuffix($idSuffix)
            ->toHtml();
        $product->setAddToCartUrl($this->getAddToCartUrl($product));
        $product->setRealPriceHtml($realPriceHtml);
        $type_id = $this->_mapRenderer;
    }

    return $this->_preparePriceRenderer($type_id)
        ->setProduct($product)
        ->setDisplayMinimalPrice($displayMinimalPrice)
        ->setIdSuffix($idSuffix)
        ->toHtml();
} 
```

如果我弄清楚是否在返回之前注释掉 if 语句或只是将 $temp_id 设置为 msrp，它将起作用（但适用于所有产品）

所以我需要在上面的函数中添加一些代码来检查是否所有关联的产品都启用了 MAP，或者更改函数 canApplyMsrp 来检查。

app/code/core/Mage/Catalog/Helper/Data.php

```
public function canApplyMsrp($product, $visibility = null, $checkAssociatedItems = true)
{
    if (!$this->isMsrpEnabled()) {
        return false;
    }

    if (is_numeric($product)) {
        $product = Mage::getModel('catalog/product')
            ->setStoreId(Mage::app()->getStore()->getId())
            ->load($product);
    }

    if (!$this->canApplyMsrpToProductType($product)) {
        return false;
    }

    $result = $product->getMsrpEnabled();
    if ($result == Mage_Catalog_Model_Product_Attribute_Source_Msrp_Type_Enabled::MSRP_ENABLE_USE_CONFIG) {
        $result = $this->isMsrpApplyToAll();
    }

    if (!$product->hasMsrpEnabled() && $this->isMsrpApplyToAll()) {
        $result = true;
    }

    if ($result && $visibility !== null) {
        $productVisibility = $product->getMsrpDisplayActualPriceType();
        if ($productVisibility == Mage_Catalog_Model_Product_Attribute_Source_Msrp_Type_Price::TYPE_USE_CONFIG) {
            $productVisibility = $this->getMsrpDisplayActualPriceType();
        }
        $result = ($productVisibility == $visibility);
    }

    if ($product->getTypeInstance(true)->isComposite($product)
        && $checkAssociatedItems
        && (!$result || $visibility !== null)
    ) {
        $resultInOptions = $product->getTypeInstance(true)->isMapEnabledInOptions($product, $visibility);
        if ($resultInOptions !== null) {
            $result = $resultInOptions;
        }
    }

    return $result;
} 
```

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:16:32.053

将函数 getPriceHTML 更改为：

```
public function getPriceHtml($product, $displayMinimalPrice = false, $idSuffix = '')
{
    $type_id = $product->getTypeId();
    if (Mage::helper('catalog')->canApplyMsrp($product)) {
        $realPriceHtml = $this->_preparePriceRenderer($type_id)
            ->setProduct($product)
            ->setDisplayMinimalPrice($displayMinimalPrice)
            ->setIdSuffix($idSuffix)
            ->toHtml();
        $product->setAddToCartUrl($this->getAddToCartUrl($product));
        $product->setRealPriceHtml($realPriceHtml);
        $type_id = $this->_mapRenderer;
    }
    else if ($type_id == 'grouped')
    {
        $all_map = true;
        $associatedProducts = $product->getTypeInstance(true)->getAssociatedProducts($product);
        foreach ($associatedProducts as $simpleProduct)
        {
            if (!Mage::helper('catalog')->canApplyMsrp($simpleProduct)) {
                $all_map = false;
                break;
            }
        }
        if ($all_map)
        {
            $realPriceHtml = $this->_preparePriceRenderer($type_id)
                ->setProduct($product)
                ->setDisplayMinimalPrice($displayMinimalPrice)
                ->setIdSuffix($idSuffix)
                ->toHtml();
            $product->setAddToCartUrl($this->getAddToCartUrl($product));
            $product->setRealPriceHtml($realPriceHtml);
            $type_id = $this->_mapRenderer;
        }
    }

    return $this->_preparePriceRenderer($type_id)
        ->setProduct($product)
        ->setDisplayMinimalPrice($displayMinimalPrice)
        ->setIdSuffix($idSuffix)
        ->toHtml();
} 
```

似乎已经成功了。任何人都可以看到这种技术的任何问题吗？

# c++ - 访问冲突写入位置 0x0000000a

> ID：15123799
> 
> 赞同：0
> 
> 时间：2013-02-27T22:32:19.090
> 
> 标签：c++, runtime-error

我制作了一个简单的程序，在其中我使用用户输入的参数执行程序，但是每当我运行它时，它都会给我错误

```
 "Unhandled exception at 0x00f138b7 in SZP_Client.exe: 0xC0000005: Access violation writing location 0x0000000a." 
```

我的代码是

```
 char* command_text;
        cout << "Enter SERVER IP Address without Port ";
        cin >> command_text;
        char* command_str = strdup("PServLib.exe \"127.0.0.1\" \"30760\" ");
        string command_string_out_final= command_str;
        command_string_out_final.append(command_text);
        command_string_out_final = command_string_out_final + " \"3627\"";
        system(command_string_out_final.c_str()); 
```

为什么我的代码会引发访问冲突，我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T22:36:05.737

罪魁祸首是`cin >> command_text`。当写入 a`char*`时，它假定这是一个足够大的 char 数组来保存正在写入的值。相反，它是一个未初始化的`char*`，因此您正在写入任意内存。

最简单的解决方法是更改`command_text`​​为`std::string`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T22:36:18.163

```
char* command_text;
cout << "Enter SERVER IP Address without Port ";
cin >> command_text; 
```

`command_text`是一个未初始化的指针。你为什么在你的代码中混合`char*`和`std::string`？`std::string`随处使用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-27T22:38:42.140

```
char* command_text;

cin >> command_text; 
```

这是读入没有为其分配空间的 C 样式字符串。

使用 C++ 字符串会更好

```
std::string command_text;
cin >> command_text; 
```

它根据需要分配空间来存储输入。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-27T22:37:51.480

你可能想要

```
 string command_text; 
```

而不是一个`char *`. `cin`将尝试将其输出放入 a `string`，而不是 a `char*`。

# papi - 常春藤桥上的事件与 PAPI

> ID：15123805
> 
> 赞同：1
> 
> 时间：2013-02-27T22:32:55.293
> 
> 标签：papi

我正在`PAPI`做一些测量和特征工作，我有几个关于常春藤桥事件的问题。

1.  根据 SDM 表 19-5（第三代 Intel® Core™ i7、i5、i3 处理器的处理器内核中的非架构性能事件），Ivy Bridge 具有名为`CYCLE_ACTIVITY.CYCLES_LDM_PENDING`和`CYCLE_ACTIVITY.CYCLES_L1D_PENDING`的计数器`CYCLE_ACTIVITY.CYCLES_L2_PENDING`。但是，当我尝试 时`papi_native_avail`，我不仅得到了这三个，而且还得到`STALLS`了每个对应的事件，`CYCLE_ACTIVITY.STALLS_LDM_PENDING`包括`CYCLE_ACTIVITY.STALLS_L1D_PENDING`和`CYCLE_ACTIVITY.STALLS_L2_PENDING`。我也有不同的数字`CYCLES`和`STALLS`事件。所以问题是它们之间有什么区别。

2.  这个问题与上述问题有关，因为在 Intel 64 and IA-32 Architectures Optimization Reference Manual 附录 B.3.2.3 中提到的所有事件都是`STALLS`事件，实际上在 SDM 中甚至都没有提到，而不是`CYCLES`事件。问题是它们应该是什么，`CYCLES`或者`STALLS`？我应该使用哪些来进行 B.3.2.3 提到的内存绑定表征？

3.  上面提到的附录 B.3.2.3 中有一些关于如何计算不同级别的内存子系统的界限的公式。我发现令人困惑的一件事是，当我使用上述 STALLS 事件进行测量时，我得到的数字`STALLS_L2_PENDING`大于`STALLS_L1D_PENDING`，而该部分中有一个公式显示：

`%L2 Bound = (CYCLE_ACTIVITY.STALLS_L1D_PENDING - CYCLE_ACTIVITY.STALLS_L2_PENDING) / CLOCKS`

这是否意味着我的测量是错误的？如果不是，那么我怎么能计算`%L2 Bound`，因为它会高于零。

源代码在以下链接： [https ://github.com/yqzhang/SMTM/blob/master/native/native.c](https://github.com/yqzhang/SMTM/blob/master/native/native.c)

有人可以帮我解决这个问题吗？

# matlab - matlab如何将图像旋转90度？

> ID：15123807
> 
> 赞同：2
> 
> 时间：2013-02-27T22:33:04.973
> 
> 标签：matlab, image-processing, reshape

我有 100 张灰度图像（256*256 像素），它们存储在 faces.mat 文件中。所以在 faces.mat 文件中，有 100 行和 65536(256*256) 列。每行代表一个图像。

现在我想重塑面孔矩阵并显示图像。

我用：

```
for i=1:N    
    imagesc(reshape(faces(i,:)'),256,256));
    colormap gray;
end 
```

但我发现我的形象转了 90 度！ ![在此处输入图像描述](../Images/b531428ed060d567af4456d8899f2e8c.png)

有人可以告诉我如何将图像向右转吗？当我将它们变成 face.mat 时，我是否处理错误的图像？下面是我编写的将图像存储到矩阵的代码。

```
function ImageGenerate
Files = dir(strcat('D:\face\','*.tiff'));
LengthFiles = length(Files);
faces = [];
for i = 1:LengthFiles;
    Img = imread(strcat('D:\face\',Files(i).name));
    temp = im2double(Img);
    [row, col] = size(temp);
    vector = [];
    for i =1 : row
        for j = 1:col
            vector = [vector temp(i,j)];
        end
    end
    faces = [faces;vector];
end
save('faces2.mat','faces'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T09:21:40.680

对于具有 90 度 int 乘数的旋转图像，有以下[`rot90`](http://www.mathworks.com/help/matlab/ref/rot90.html)功能：

```
rot90(Img); 
```

这比其他答案中提出的[转置](https://stackoverflow.com/a/15130800/1714410)[`imrotate`](https://stackoverflow.com/a/15123859/1714410)更有效，更通用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T22:36:02.367

您可以使用[`imrotate`](http://www.mathworks.com/help/images/ref/imrotate.html)来旋转图像。要逆时针旋转 90 度，只需写

```
img = reshape(faces(i,:)'),256,256);
img = imrotate(img, 90); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T23:21:06.137

对于没有图像处理工具箱的人，可以通过应用转置（翻转 X 和 Y）然后对 X 轴进行反射来实现相同的目的：

```
img = reshape(faces(i,:), [256 256]);
rightImg = flipdim(img', 1); 
```

顺便说一句，我相信您可以通过更改编写面部的代码来为自己省去很多麻烦，如下所示：

```
temp = im2double(Img);
faces = [faces;temp(:)]; 
```

那时，您会以正确的顺序存储图像中的所有体素，并且可以使用

```
fre = reshape(faces,[256 256 100]);
img = fre(:,:,ii); 
```

要理解为什么这有效，您必须意识到 Matlab 按元素的顺序将元素存储在数组中 - 所以 m(1,1), m(2,1), m(3,1), m(1,2 ), m(2,2), ... 等等。我这样做的方式保留了图像中像素的顺序，所以我最后要做的就是重塑矩阵并恢复第 i 个面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T08:29:29.323

由于图像表示为值矩阵，因此您可以转置矩阵，因此 imgNew=img';

**例子：**

```
 load mandrill
  X2=X';
  figure()
  image(X);
  colormap(map)
  figure()
  image(X2)
  colormap(map) 
```

![在此处输入图像描述](../Images/34930c9792fd108ff5a2a971c9db40e6.png)

![在此处输入图像描述](../Images/70c87ac50a17d755ba4fc019a68c8146.png)

# php - 强制下载仅显示在浏览器中，不提示下载

> ID：15123809
> 
> 赞同：2
> 
> 时间：2013-02-27T22:33:12.423
> 
> 标签：php, content-management-system, download

我似乎无法弄清楚这一点，我知道这很简单。我正在构建一个非常基本的内容管理系统的后端。对于这个特定的部分，我只是想创建一个允许下载文件（客户端的 CV）的 PHP 链接。

**我的问题：**

单击下载文件的链接时，浏览器不会提示您选择本地目录来保存文件 - 它只是在文档内容之前和之后显示文件和一堆符号（我假设这是文件的打开和关闭 exif 数据以供应用程序解密）。

我怎么能强迫浏览器提示用户输入“另存为...”框？

```
<?php
require("connect.php");
$query = "SELECT * FROM kb_info LIMIT 1";

$result = mysql_query($query, $link);
while ($row = mysql_fetch_array($result)) {
    $file_extension = end(explode(".", $row["extension"]));

    if ($file_extension == doc) {

        header('Content-disposition: attachment; filename='.$row["extension"]);
        header('Content-type: application/doc');
        header ("Content-Length: ".filesize($row["extension"]));
        readfile($row["extension"]);
        exit;

    }
    if ($file_extension == docx) {

        header('Content-disposition: attachment; filename='.$row["extension"]);
        header('Content-type: application/docx');
        header ("Content-Length: ".filesize($row["extension"]));
        readfile($row["extension"]);
        exit;

    }
    if ($file_extension == pdf) {

        header('Content-disposition: attachment; filename='.$row["extension"]);
        header('Content-type: application/pdf');
        header ("Content-Length: ".filesize($row["extension"]));
        readfile($row["extension"]);
        exit;

    }
}    
?> 
```

非常感谢，

乔希

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T15:02:04.040

我认为问题可能是 PHP 文件中的某处有一些空格，这导致标头未正确发送，因此您会看到整个输出。

我建议以下步骤：

1.  检查“connect.php”并在文件的开头/结尾查找空行/空格并将其删除

2.  以这种方式调整您的 php 文件，即您`?>`在文件末尾省略了结束标记 - 这样您就不会在文件末尾得到空行

3.  如果以上还不够，您需要检查您的 apache 和 php 错误日志和/或设置错误日志，因此您还会看到警告 - 如果标头未正确发送或是否存在其他错误，您将收到通知

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:41:52.057

我用于下载的标题：

```
 header("Pragma: public");
        header("Expires: 0");
        header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
        header("Cache-Control: public");
        header("Content-Description: File Transfer");
        header("Content-type: application/force-download");
        header("Content-Disposition: attachment; filename=".$file); 
        header("Content-Type: application/octet-stream");
        header("Content-Transfer-Encoding: binary");
        header("Content-Length: ".$bytes.""); 
```

# django - django中支持零，一，二，少数，多，其他的Android i18n复数等价物是什么？

> ID：15123818
> 
> 赞同：2
> 
> 时间：2013-02-27T22:33:22.657
> 
> 标签：django, google-app-engine, internationalization, django-i18n

[http://developer.android.com/guide/topics/resources/string-resource.html](http://developer.android.com/guide/topics/resources/string-resource.html)

我在 django 中找到了函数，但它不支持英语和类似语言以外的其他语言 - 如何处理它？

```
def ngettext(singular, plural, number):
    return real_ngettext(singular, plural, number) 
```

* * *

在 Android 中更广泛地支持语言 - 如何在 django 中获得相同的支持：

**零** 当语言需要对数字 0 进行特殊处理时（如阿拉伯语）。

**one**当语言需要对像 1 这样的数字进行特殊处理时（与英语和大多数其他语言中的数字 1 一样；在俄语中，任何以 1 结尾但不以 11 结尾的数字都属于此类）。

**2**当语言需要对像 2 这样的数字进行特殊处理时（如威尔士语中的 2 或斯洛文尼亚语中的 102）。

**少数**当语言要求对“小”数字进行特殊处理时（如捷克语中的 2、3 和 4；或波兰语中以 2、3 或 4 结尾但不是 12、13 或 14 的数字）。

**many** 当语言需要对“大”数字进行特殊处理时（如马耳他语中以 11-99 结尾的数字）。

**其他** 当语言不需要对给定数量进行特殊处理时（如中文中的所有数字，或英文中的 42）。

我可以编写自定义函数，但它会使 django 提取脚本毫无用处。这个问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T00:00:28.947

我认为作为 django i18n 实现的基础的 GNU gettext 支持您的用例。`Plural-Forms`在[GNU gettext doc](http://www.gnu.org/software/gettext/manual/html_node/gettext_150.html)中搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-26T04:28:07.723

也许这将是半题外话......我为俄语数字结尾的 AWK 脚本编写了一个函数（也许它对某人有用，他们探索它，并将其重新制作为 hi 最喜欢的语言）：

```
#!/usr/bin/awk -f
function rne(rusnum,raz,dva,mnogo){ # Russian Number Endings (rusnum=number; raz -- ending for 1, 21, 101, etc; dva -- 2-4, 22-24, 102-104...; mnogo -- 0, 5-20, 25-30, 95-100...)
 rusnum_tmp[1]=substr(rusnum,length(rusnum),1) #getting units
 rusnum_tmp[2]=substr(rusnum,length(rusnum)-1,1) #getting tens
 rusnum_tmp[1]=rusnum_tmp[1]/1 #converting string to number
 rusnum_tmp[2]=rusnum_tmp[2]/1
 if(rusnum_tmp[1]==1&&(rusnum_tmp[2]!=1||length(rusnum)==1)){
  outrusend=raz
 }else{
  if(rusnum_tmp[1]<=4&&rusnum_tmp[1]>=2&&rusnum_tmp[2]!=1){outrusend=dva}else{outrusend=mnogo}
 }
 return outrusend;
} 
```

# php - Joomla 只是慢，还是我可以以某种方式加快速度？

> ID：15123821
> 
> 赞同：7
> 
> 时间：2013-02-27T22:33:24.497
> 
> 标签：php, performance, joomla

我已经在 Google 上搜索了这个问题很长一段时间，但我找不到一篇文章讨论 Joomla 的速度，而不是脚本和图像等外部资源的加载速度。我的 Apache + PHP 设置执行得非常好 - 启用了压缩并且我正在使用本地虚拟机来运行它。问题在于服务器端的 Joomla，我不知道如何追踪它的来源。

我本地 Joomla 设置上的页面*总是*需要 2 到 3 秒才能加载。根据 Chrome 开发者工具中的*Network*标签，浏览器等待 HTML 页面大约 2 秒，然后在大约 0.3 秒内加载所有外部资源。*每个*页面都是这种情况，甚至是管理员页面。这导致非常令人沮丧的页面浏览，因为每次链接点击都会等待很长时间。为了说明，这里是加载速度图的屏幕截图。蓝线是 HTML 页面：

![插图](../Images/86b896a238d76a0366ba9b2cf633a1a3.png)

*Joomla 的每个*请求都需要 2 秒的处理时间是怎么回事？Joomla 就是这么慢，还是我的设置有问题？如果是这样，我该如何调试它？

* * *

### 我试过的

*   我已经创建了一个完全独立于 Joomla 设置的 PHP 页面，并在其中填充`<?php phpinfo(); ?>`以确认所有 PHP 脚本不受 2 秒延迟的影响。他们不是。
*   我编写并执行了一个小的 PHP 脚本，它通过“127.0.0.1”和“localhost”连接到本地 MySQL 服务器，并打印出 Joomla 数据库中的所有表。该脚本仅在几分之一秒内运行，因此在连接到数据库时故障不在于 DNS 问题。

* * *

### 用于加载首页的 Joomla 个人资料信息：

```
应用 0.000 秒 (+0.000)；0.81 MB (+0.807) - 加载后
应用 0.217 秒 (+0.217)；2.29 MB (+1.479) - 初始化后
应用 0.296 秒 (+0.079)；4.34 MB (+2.055) - afterRoute
应用 0.640 秒 (+0.345)；5.59 MB (+1.247) - 发货后
应用 0.705 秒 (+0.065)；5.85 MB (+0.266) - beforeRenderModule mod_menu（主菜单）
应用 0.774 秒 (+0.069)；5.91 MB (+0.053) - afterRenderModule mod_menu（主菜单）
应用 0.774 秒 (+0.000)；5.90 MB (-0.009) - beforeRenderModule mod_menu（所有前端视图）
应用 1.004 秒 (+0.229)；6.05 MB (+0.147) - afterRenderModule mod_menu（所有前端视图）
应用 1.004 秒 (+0.000)；6.03 MB (-0.016) - beforeRenderModule mod_menu（用户菜单）
应用 1.035 秒 (+0.032)；6.05 MB (+0.021) - afterRenderModule mod_menu（用户菜单）
应用 1.036 秒 (+0.000)；6.04 MB (-0.010) - beforeRenderModule mod_menu（深度菜单）
应用 1.058 秒 (+0.023)；6.06 MB (+0.017) - afterRenderModule mod_menu（深度菜单）
应用 1.059 秒 (+0.000)；6.05 MB (-0.010) - beforeRenderModule mod_menu（本网站）
应用 1.092 秒 (+0.034)；6.06 MB (+0.014) - afterRenderModule mod_menu（本网站）
应用 1.092 秒 (+0.000)；6.05 MB (-0.013) - beforeRenderModule mod_login（登录表单）
应用 1.116 秒 (+0.024)；6.07 MB (+0.023) - afterRenderModule mod_login（登录表单）
应用 1.116 秒 (+0.000)；6.07 MB (-0.002) - beforeRenderModule mod_breadcrumbs (Breadcrumbs)
应用 1.143 秒 (+0.027)；6.09 MB (+0.021) - afterRenderModule mod_breadcrumbs (Breadcrumbs)
应用 1.143 秒 (+0.000)；6.09 MB (-0.003) - beforeRenderModule mod_menu（顶部）
应用 1.179 秒 (+0.035)；6.12 MB (+0.028) - afterRenderModule mod_menu（顶部）
应用 1.179 秒 (+0.000)；6.10 MB (-0.012) - beforeRenderModule mod_search (搜索)
应用 1.207 秒 (+0.028)；6.13 MB (+0.028) - afterRenderModule mod_search (搜索)
应用 1.236 秒 (+0.029)；6.15 MB (+0.014) - 渲染后
```

请注意，“afterInitialise”、“afterDispatch”和“afterRenderModule mod_menu (All Front End Views)”步骤每个都需要将近三分之一秒。这些点中的每一个运行的时间都比我接受整个脚本运行的时间要长。关于如何减少这些的任何线索？

[我希望这个问题足够具体，不会立即关闭。如果我可以做些什么来使其更具体，请发表评论。]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T23:06:42.890

joomla 很慢（我希望为此被标记），但确实如此。我已经使用 APC、eAccelerator 和其他几个使用各种版本的 PHP 和 apache 进行了测试，甚至尝试使用 nginx，作为模块和 FastCGI。

看来joomla现在只是臃肿。就个人而言，如果您将它用于简单的 CMS 目的，我会为初学者推荐 wordpress，或者为更高级的用户推荐 drupal。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T23:11:18.360

在系统选项中启用不同级别的缓存时，我得到了更好的结果。如果你不使用缓存，它会很慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-13T03:17:45.907

这可能取决于您的网络主机......在共享资源方面，亚马逊 AWS 是一场噩梦。在小型甚至中型实例上，您的 CPU 资源是共享的，我通常会获得 50% 的资源“被盗”... %st ...这使得服务器负载很高，因此页面非常慢。您可以忘记微型实例...您的服务器负载恒定为 90% +

我们计划在今年年底搬迁网络主机。希望我们能解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-07T08:10:27.293

在本地主机（Windows）上运行 joomla 2.5，我在管理员任务上经历了长达 8 秒的时间。最后我不得不禁用一些 php 扩展来提高性能。前任。php_pdo_oci.dll , php_pdo_mysql.dll 等 尝试只使用必要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-10T23:08:41.733

是的，与 wordpress 相比，Joomla 需要更多时间来处理生成的 html。为什么？因为它为您提供了一个强大的框架，让您的网站不仅仅是一个博客。

# fonts - 内嵌网页字体，跨平台显示差异巨大

> ID：15123822
> 
> 赞同：0
> 
> 时间：2013-02-27T22:33:26.547
> 
> 标签：fonts, cross-platform, webfonts

![在此处输入图像描述](../Images/196cdc3a9bc2282cbfad7be5cc68405c.png)所以我已经为此奋斗了几个星期，但仍然找不到任何答案。

我正在使用字体 League Gothic 并尝试使用 webkit 方法和 css @fontface 方法，两者都给了我相同的结果。

在 Apple 电脑和移动设备以及 Andriod 设备上，一切看起来都很完美，但在 Microsoft 电脑上，它们显示的好像每个字符都有不同的行高/字符高度。

我附上了一张图片来说明我的意思。左边的图片来自苹果，左边的图片来自微软的comp，右边的图片来自苹果。

请注意，这不是浏览器问题，它在使用一个平台的所有浏览器上看起来都很好，而在使用另一个平台的所有浏览器上看起来都错了。

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:39:16.313

可能的原因是每个浏览器使用不同的字体文件类型；IE 仅使用 .eot，而其他浏览器将使用 .ttf 或 .otf 文件类型。可能是您的 .eot 类型与其他类型不同；尝试不同的网络字体（Google Web Fonts 有很多可以快速轻松地使用），看看问题是否仍然存在。如果是这样，那么这是字体的 IE 渲染问题（当然，没有浏览器以相同的方式渲染字体），如果不是，那么这是字体文件问题。

# java - Jersey ReST 网络服务返回一个文件

> ID：15123823
> 
> 赞同：0
> 
> 时间：2013-02-27T22:33:26.267
> 
> 标签：java, file-io, jersey

我找到了几个如何从 ReSTful Jersey web 服务返回 File / OutputStream 的好例子，但似乎它们最终都在文件系统上创建了一个 File。我的问题是我不想让这些文件在机器上徘徊。一旦服务将响应发送给客户端，我有没有办法进行清理，而不必让一些后端进程监视这些文件的文件系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:42:33.550

您可以只返回 base64 中的文件，处理并忘记。

# eclipse - .jcp 等效于 Eclipse？

> ID：15123834
> 
> 赞同：1
> 
> 时间：2013-02-27T22:34:27.617
> 
> 标签：eclipse, file-extension, jcreator

对于我在学校 CS2 课上的一个实验室，JCreator 安装在学校的计算机上，有 4.x 版本，我自己更像是一个 eclipse 人，我什至在学校用它来代替 JCreator，但是`.jcp`我所知道的文件扩展名是与 JCreator 相关的文件扩展名。我可以做些什么来制作一个与 eclipse 兼容的文件文件夹，我也在家里使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:44:46.690

Eclipse 通过使用两个文件来识别其项目，即`.classpath`和`.project`. 只要您可以将它们与项目文件和结构一起导出，您就应该能够将项目导入另一个 Eclipse 实例。

我不确定 JCreator 是否可以为您创建这些文件，但我确信每个 Eclipse 项目都会生成这些文件。

您可以将 JCreator 特定文件保留在项目文件夹中，eclipse 将忽略它无法处理/理解的所有文件。问题将是如何在您编辑项目时使您正在使用的库在两个 IDE 环境中保持同步。

您可能希望将其重新分解为构建管理工具，例如`ant/buildr/maven`

# javascript - 为什么我们将 null 传递给 XMLHttpRequest.send？

> ID：15123839
> 
> 赞同：30
> 
> 时间：2013-02-27T22:34:52.447
> 
> 标签：javascript, ajax

为什么`send`经常被称为

```
xhr.send(null) 
```

代替

```
xhr.send() 
```

?

[W3](http://www.w3.org/TR/XMLHttpRequest/#the-send()-method)、[MDN](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#send())和[MSDN](http://msdn.microsoft.com/en-us/library/ie/ms536736(v=vs.85).aspx)都声明它是可选的。此外，ActiveX 控件[似乎不需要参数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms759148(v=vs.85).aspx)：

```
hr=pIXMLHTTPRequest.CreateInstance("Msxml2.XMLHTTP.6.0");
SUCCEEDED(hr) ? 0 : throw hr;

hr=pIXMLHTTPRequest->open("GET", "http://localhost/books.xml ", false);
SUCCEEDED(hr) ? 0 : throw hr;

hr=pIXMLHTTPRequest->send(); // <-- this line
SUCCEEDED(hr) ? 0 : throw hr; 
```

的做法`send(null)`至少可以追溯到[2005 年的 Google Maps](http://web.archive.org/web/20050212032837/http://www.google.com/mapfiles/maps.1.js)，但是被缩小了，没有任何解释：

```
Y.asynchronousTransform = function (qc, vb, kc, Nc, Ba) {
    if (m.type == 3) return;
    var cc = Y.getCached(kc);
    if (cc) {
        cc.transformToHTML(qc, vb);
        if (Nc) Nc();
        return
    }
    var yc = qa.create(Ba);
    var sa = Xd.create();
    nd('<a href="' + kc.xmlEscape() + '">' + kc.xmlEscape() + "</a>", 0);
    sa.open("GET", kc, true);
    sa.onreadystatechange = function () {
        if (sa.readyState == 4) {
            if (yc.isValid()) {
                try {
                    var Db = sa.responseXML;
                    var cc = Y.create(Db);
                    Y.cache(kc, cc);
                    cc.transformToHTML(qc, vb);
                    if (Nc) Nc()
                } catch (b) {}
            }
        }
    };
    sa.send(null)
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-01T00:38:11.997

如果您看一下 XMLHttpRequest 的旧规范，似乎 W3C 并没有要求参数在某一时刻是可选的，这可能导致人们“以防万一”提供显式空值。

（搜索“应该支持发送”） [http://web.archive.org/web/20060409155734/http://www.w3.org/TR/XMLHttpRequest/](http://web.archive.org/web/20060409155734/http://www.w3.org/TR/XMLHttpRequest/)

我遇到的另一个可能的原因来自俄语页面的翻译，可在此处查看：[长谷歌翻译链接](https://translate.google.com/translate?sl=ru&tl=en&js=y&prev=_t&hl=en&ie=UTF-8&u=http%3A%2F%2Fweb.archive.org%2Fweb%2F20131005151134%2Fhttp%3A%2F%2Fxhtml.co.il%2Fru%2FjQuery%2F%25D0%25A2%25D0%25B8%25D0%25BF%25D1%258B%2FXMLHttpRequest&edit-text=)（搜索“GET-Request for Version without ActiveX”）

> 当你发送一个没有 ActiveX 的版本的 GET 请求时，你必须指定 null，否则你不能指定任何参数。如果 GET 始终指定为 null，则不会失败：

我不知道这是否属实，但如果 GET 参数包含在正文中，那么如果数据值为“未定义”，则可能不会生成正文，这似乎是合理的。

不幸的是，我在搜索中找不到任何更确凿的信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-24T04:40:35.340

在旧版本的 Firefox 中不添加`null`会引发异常。

这种行为[早在 2002 年](https://bugzilla.mozilla.org/show_bug.cgi?id=128541)就已经存在，并且存在[于 Firefox 3 (2008)](https://bugzilla.mozilla.org/show_bug.cgi?id=836815)中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-06T19:43:55.330

因此，如果您的 HTTP 请求方法是**GET**，那么 HTTP 客户端只需将数据附加到请求 URL（作为所谓的[查询字符串](https://en.wikipedia.org/wiki/Query_string)）即可将数据发送到服务器，这意味着请求的主体将为**空**，这就是为什么需要将该参数的值设置为`null`.

但是，如果您的 HTTP 请求方法是**POST**，那么您的请求数据将被放入请求正文中，最终将通过`send`函数发送到服务器。

干杯!

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-20T13:38:01.757

XMLHttpRequest.send() 方法发送请求。如果请求是异步的（这是默认设置），则此方法会在请求发送后立即返回。如果请求是同步的，则此方法在响应到达之前不会返回。send() 接受请求正文的可选参数。如果请求方法是 GET 或 HEAD，则忽略该参数并将请求正文设置为 null。

# python - 如何用正则表达式编写递归scrapy规则？

> ID：15123840
> 
> 赞同：1
> 
> 时间：2013-02-27T22:34:56.337
> 
> 标签：python, xpath, scrapy

网址的格式是
[http://www.khmer24.com/ad/change-petrol-to-gas-use-injector-special-price/67-204320.html](http://www.khmer24.com/ad/change-petrol-to-gas-use-injector-special-price/67-204320.html)
我想保留域名、广告和号码67 在网址中。这是示例网址：
[http ://www.khmer24.com/ad/ANY-STRING/67-123456789.html](http://www.khmer24.com/ad/ANY-STRING/67-123456789.html)

这是我的蜘蛛中的代码：

```
from scrapy.item import Item, Field

class Khmer24(Item):
    title = Field()
    price = Field()

from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector

class MySpider(CrawlSpider):
    name = "khmer24"
    allowed_domains = ["www.khmer24.com"]
    start_urls = ["http://www.khmer24.com/"]   
    #HERE IS WHERE I GET STUCK
    rules = (Rule (SgmlLinkExtractor(allow=("index/ad\d\s\67-\d00.html", ),restrict_xpaths=('//p[@class="nextpage"]',))
    , callback="parse_items", follow= True),
    )

    def parse_items(self, response):
        hxs = HtmlXPathSelector(response)
        titles = hxs.select("//div[@class='innerbox']")
        items = []
        for title in titles:
            item = Khmer24()
            item["title"] = title.select("h1/text()").extract()
            item["price"] = title.select("table/tr/td/p[@class='description']/span[@class='price']/strong/text()").extract()
            items.append(item)
        return(items) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:33:18.497

听起来您只是在寻找链接提取器的允许 XPath。试试这个：

```
/ad/[^/]+/67-\d+\.html 
```

主页可能呈现如下内容：

```
>>> le = SgmlLinkExtractor(allow=r'/ad/[^/]+/67-\d+\.html')
>>> le.extract_links(response)
[Link(url='http://www.khmer24.com/ad/change-petrol-to-gas-use-injector-special-price/67-204320.html', text=u'', fragment='', nofollow=False),
 Link(url='http://www.khmer24.com/ad/i-want-to-sell-my-car-toyota-corolla-s-2003/67-253891.html', text=u'', fragment='', nofollow=False),
 Link(url='http://www.khmer24.com/ad/corolla-altis-2002/67-242425.html', text=u'Corolla Altis 2002', fragment='', nofollow=False),
 Link(url='http://www.khmer24.com/ad/nissan-crew-1997/67-256846.html', text=u'Nissan crew 1997', fragment='', nofollow=False),
 Link(url='http://www.khmer24.com/ad/white-nissan-march-2002/67-198118.html', text=u'White Nissan March 2002', fragment='', nofollow=False),
 Link(url='http://www.khmer24.com/ad/mercedes-s430-black-year-2000-phnom-penh/67-257711.html', text=u'Mercedes S430, Black Year 2000, Phnom Penh', fragment='', nofollow=False),
 Link(url='http://www.khmer24.com/ad/car-for-sale-or-exchangeprado-2007/67-233230.html', text=u'Car for sale or exchange(PRADO 2007)', fragment='', nofollow=False),
 Link(url='http://www.khmer24.com/ad/urgent-toyota-hybrid-pruis-2001-abs-brake/67-164632.html', text=u'URGENT Toyota Hybrid PRUIS 2001 . ABS brake', fragment='', nofollow=False),
 Link(url='http://www.khmer24.com/ad/camry-97-xle-for-sale/67-254704.html', text=u'Camry 97-XLE For Sale', fragment='', nofollow=False),
 Link(url='http://www.khmer24.com/ad/honda-civic-98-silver-for-sale/67-193666.html', text=u'Honda Civic 98 Silver For Sale', fragment='', nofollow=False)] 
```

# javascript - 如何使用 HTML5/phonegap 禁用 GPS

> ID：15123850
> 
> 赞同：0
> 
> 时间：2013-02-27T22:35:30.790
> 
> 标签：javascript, android, iphone, html, cordova

我需要做一个从 iphone 和 android 禁用/启用 GPS 的功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:32:58.130

您无法在手机上禁用或启用它。这由手机的设置控制，PhoneGap API 或 HTML5 无法访问。

默认情况下，在 iPhone 上，应用程序的位置服务被禁用，直到您尝试使用以下命令访问它们：

```
window.navigator.geolocation 
```

完成此操作后，系统将提示用户授予该应用使用位置服务的权限。如果他们批准，它就开始了。

在 Android 上，权限是在安装应用程序时设置的。如果他们批准权限，它就会打开。

# javascript - 进度事件侦听器一次加载一个缩略图

> ID：15123860
> 
> 赞同：2
> 
> 时间：2013-02-27T22:36:04.323
> 
> 标签：javascript, event-handling

我正在处理大约 40 个大小为 9000KB 的大图像。我有下面的代码，所有图像一次加载，这使我的屏幕冻结，我希望我的控件将等到第一个图像成功进行，然后完全加载，然后转到下一个。任何想法都有帮助..

```
//dropping around 40 images 

dropbox.addEventListener("drop", dropUpload, false);

function dropUpload(event) {
    noop(event);

    var dropMethod = event.dataTransfer;
    var classicMethod = event.target;

    var dropedFiles = (dropMethod == undefined) ? classicMethod.files: dropMethod.files;
    for ( var i = 0; i < dropedFiles.length; i++) {
        addFilesToUpload(dropedFiles[i]);

    }
}

function addFilesToUpload(file) {
    var li = document.createElement("li"), div = document.createElement("div"), img, progressBarContainer = document
            .createElement("div"), progressBar = document.createElement("div"), tBody;
    li.appendChild(div);

    progressBarContainer.className = "progress-bar-container";
    progressBar.className = "progress-bar";
    progressBar.setAttribute("id", "proBar_" + (indexN++));
    progressBarContainer.appendChild(progressBar);
    li.appendChild(progressBarContainer);
    var reader = new FileReader();
    reader.onerror = function(event) {
        alert("couldn't read file " + event.target.error.code);
    };
    // Present file info and append it to the list of files
    fileInfo = "<div><strong>Name:</strong> " + file.name + "</div>";
    fileInfo += "<div><strong>Size:</strong> " + parseInt(file.size / 1024, 10)
            + " kb</div>";
    fileInfo += "<div><strong>Type:</strong> " + file.type + "</div>";
    div.innerHTML = fileInfo;

    if (reader !== "undefined" && (/image/i).test(file.type)) {
        img = document.createElement("img");
        img.setAttribute("class", "thumb");
        img.setAttribute("id", "img_" + (indexN++));
        reader.onload = (function(img, li) {
            return function(evt) {
                img.src = evt.target.result;
                img.file = file;
            };
        }(img, li));
        reader.readAsDataURL(file);
    }

    reader.addEventListener("progress", function(evt) {
        if (evt.lengthComputable) {
            progressBar.style.width = (evt.loaded / evt.total) * 100 + "%";
        }
    }, false);

    reader.addEventListener("load", function() {
        progressBarContainer.className += " uploaded";
        progressBar.innerHTML = "";
    }, false);

    tBody = getTableBodyLayout(img, li);
    document.getElementById("images_table").appendChild(tBody);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:43:54.837

您可以更改`addFilesToUpload()`为在文件完成后进行回调，并更改`dropUpload()`为一次启动一个。

```
function dropUpload(event) {
    noop(event);

    var dropMethod = event.dataTransfer;
    var classicMethod = event.target;

    var dropedFiles = (dropMethod == undefined) ? classicMethod.files: dropMethod.files;
    var filesDone = 0;

    // local function to process the next file
    function next() {
        if (filesDone < dropedFiles.length) {
            addFilesToUpload(dropedFiles[filesDone++], next);
        }
    }
    // do the first one
    next();
}

function addFilesToUpload(file, doneCallback) {
    var li = document.createElement("li"), div = document.createElement("div"), img, progressBarContainer = document
            .createElement("div"), progressBar = document.createElement("div"), tBody;
    li.appendChild(div);

    progressBarContainer.className = "progress-bar-container";
    progressBar.className = "progress-bar";
    progressBar.setAttribute("id", "proBar_" + (indexN++));
    progressBarContainer.appendChild(progressBar);
    li.appendChild(progressBarContainer);
    var reader = new FileReader();
    reader.onerror = function(event) {
        alert("couldn't read file " + event.target.error.code);
    };
    // Present file info and append it to the list of files
    fileInfo = "<div><strong>Name:</strong> " + file.name + "</div>";
    fileInfo += "<div><strong>Size:</strong> " + parseInt(file.size / 1024, 10)
            + " kb</div>";
    fileInfo += "<div><strong>Type:</strong> " + file.type + "</div>";
    div.innerHTML = fileInfo;

    if (reader !== "undefined" && (/image/i).test(file.type)) {
        img = document.createElement("img");
        img.setAttribute("class", "thumb");
        img.setAttribute("id", "img_" + (indexN++));
        reader.onload = (function(img, li) {
            return function(evt) {
                img.src = evt.target.result;
                img.file = file;
                // call the callback to tell the caller that this file is done now
                doneCallback();
            };
        }(img, li));
        reader.readAsDataURL(file);
    }

    reader.addEventListener("progress", function(evt) {
        if (evt.lengthComputable) {
            progressBar.style.width = (evt.loaded / evt.total) * 100 + "%";
        }
    }, false);

    reader.addEventListener("load", function() {
        progressBarContainer.className += " uploaded";
        progressBar.innerHTML = "";
    }, false);

    tBody = getTableBodyLayout(img, li);
    document.getElementById("images_table").appendChild(tBody);
} 
```

* * *

如果您想等到每个图像都加载完毕后再继续下一个图像，那么您可以将`reader.onload`处理程序更改为：

```
 reader.onload = (function(img, li) {
        return function(evt) {
            img.onload = function() {
                // call the callback to tell the caller that this file is done now
                doneCallback();
            };
            img.src = evt.target.result;
            img.file = file;
        };
    }(img, li)); 
```

# ruby - Ruby 变量的可见性

> ID：15123868
> 
> 赞同：4
> 
> 时间：2013-02-27T22:36:29.910
> 
> 标签：ruby

如果我`@var`在 Ruby 中声明，该类的每个对象都会有自己的`@var`.

但如果我错过了`@`怎么办？我的意思是，我声明了一个名为`var2`without的变量`@`。他们是共享变量还是临时创建的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T22:45:01.913

`@`当它所在的方法完成运行时，如果没有它，它就会被丢弃。

```
class Foo
  def initialize
    @bing = 123
    zing  = 456
  end

  def get_bing
    @bing
  end

  def get_zing
    zing
  end
end

foo = Foo.new
foo.get_bing #=> 123
foo.get_zing #=> NameError: undefined local variable or method `zing' for #<Foo:0x10b535258 @bing=123> 
```

这表明实例变量`@bing`与该实例一起保存。它的值可以在该实例的任何方法中访问。

但是局部变量`zing`不会持久化（在大多数情况下），并且一旦方法运行完成，任何局部变量都会被丢弃，并且不再可访问。运行时`get_zing`，它会查找名为的局部变量或方法`zing`，但找不到，因为`zing`from`initialize`早已不复存在。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T22:54:09.170

当变量声明时没有范围前缀（`@`-instance、`@@`-class 或`$`-global），则声明当前范围，即：

```
class Foo
  def boo
    @boo ||= 'some value'
    var ||= 40

    puts "boo: #@boo var: #{var}"
  end

  def foo
    var ||= 50

    puts "boo: #@boo var: #{var}"
  end
end

c = Foo.new
c.boo # => boo: some value var: 40
c.foo # => boo: some value var: 50

def foo
  $var ||= 30

  puts "$var: #$var"
end

foo # => $var: 30

puts "$var: #$var" # => $var: 30

%w[some words].each do |word|
  lol = word # blocks introduce new scope
end

puts lol # => NameError: undefined local variable or method `lol'

for word in %w[some words]
  lol = word # but for loop not
end

puts lol # => words 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T22:46:41.877

它将成为属于局部词法范围的局部变量。

前任。

```
class Foo
  def Bar
    @fooz = 1
  end
  def Barz
    fooz = 2
  end
  def test
    puts @fooz
  end
end

f = Foo.new
f.Bar
f.test
f.Barz
f.test 
```

输出：

```
1
1 #not 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T22:56:37.427

如果您使用一个名为`var2`它的变量，它是本地的，并且仅在声明它的构造的范围内。那是：

*   如果您在方法中声明它，它将是该方法的本地。
*   如果您尝试在类定义中但在任何方法之外声明，则会引发 NameError。例如：

> ```
> class Foo
>   bar = 2    
> end
> 
> Foo.new
> 
> NameError: undefined local variable or method 'bar' 
> ```

# python - Python：如何忽略 # 以使该行不是注释？

> ID：15123871
> 
> 赞同：2
> 
> 时间：2013-02-27T22:36:47.897
> 
> 标签：python, comments, config

我在使用配置文件时遇到问题，因为该选项以 # 开头，因此 python 将其视为注释（就像它应该的那样）。

配置文件中不起作用的部分：

```
[channels]
#channel 
```

如您所见，它是一个 IRC 频道，这就是它需要 # 的原因。现在我可以使用一些丑陋的方法来添加 # 每次我需要它，但我更愿意保持它干净。

那么有什么办法可以忽略这一点吗？这样当我要打印选项时，它会以

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:39:39.120

如果您在 python 文件中设置，您可以使用 \ 转义 #

否则我认为这应该在一个配置文件中，其他语法不将 # 视为注释行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:47:21.037

您可能正在使用`ConfigParser`- 您应该提到 btw - 然后您必须在将配置文件提供给解析器之前对其进行预处理/后处理，因为 ConfigParser 忽略了注释部分。

我可以想到两种方法，它们都使用 readfp，而不是 ConfigParser-class 的 read-method：1）从 codecs-module 子类 StreamWriter 和 StreamReader 并使用它们将打开过程包装在一个透明重新编码。2）`StringIO`从`io`模块中使用，例如：

```
from io import StringIO
...
s = configfile.read()
s.replace("#","_")
f = StringIO(unicode(s))
configparser.readfp(f) 
```

如果您不必使用“ini”文件语法，请查看该`json`模块。我使用它比使用 ini 文件更频繁，特别是如果配置文件不应该由简单用户手动编辑。

```
my_config={
  "channels":["#mychannel", "#yourchannel"],
  "user"="bob",
  "buddy-list":["alice","eve"],
  }

import json
with open(configfile, 'rw') as cfg:
  cfg.write(json.dumps(my_config)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:46:30.090

ConfigParser 无法不忽略以“#”开头的行。

ConfigParser.py，第 476 行：

```
 # comment or blank line?
        if line.strip() == '' or line[0] in '#;':
            continue 
```

没办法关掉。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T23:28:31.753

在您的辩护中，ConfigParser 让您犯了这个错误：

```
import sys
import ConfigParser

config = ConfigParser.RawConfigParser()
config.add_section('channels')
config.set('channels', '#channel', 'true')

config.write(sys.stdout) 
```

产生这个输出：

```
[channels]
#channel = true 
```

但是，您可以给出以类似开头的部分名称`#`：

```
import sys
import ConfigParser

config = ConfigParser.RawConfigParser()
config.add_section('#channels')
config.set('#channels', 'channel', 'true')

config.write(sys.stdout)

with open('q15123871.cfg', 'wb') as configfile:
    config.write(configfile)

config = ConfigParser.RawConfigParser()
config.read('q15123871.cfg')
print config.get('#channels', 'channel') 
```

产生输出：

```
[#channels]
channel = true

true 
```

# jsf - 在复合组件中将输入字段设置为可编辑

> ID：15123874
> 
> 赞同：0
> 
> 时间：2013-02-27T22:36:58.543
> 
> 标签：jsf, jsf-2

我有一个复合组件

```
 <co:interface>
            <co:attribute name="editAction"     required="false"  targets="edit"   method-signature="java.lang.String f()"/>
            <co:attribute name="saveAction"     required="false"  targets="save"   method-signature="java.lang.String f()"/>
            <co:attribute name="isBrowseModus"  required="true"/>
            <co:attribute name="user"           required="true"/>
            <co:attribute name="editListener"   targets="edit" method-signature="void f(javax.faces.event.ActionEvent)" />
            <co:actionSource name="save"/>
        </co:interface>
        <co:implementation>
............
        <p:inplace id="inpLand" editor="true" 
            toggleable="#{not cc.attrs.isBrowseModus}" 
            style="#{cc.attrs.isBrowseModus ? 'color: black' : 'color: blue'}">  
                <p:inputText value="#{cc.attrs.user.land}" label="text"/>  
        </p:inplace>  
...........
        <c:if test="#{cc.attrs.isBrowseModus}">
           <p:commandButton id="edit" value="#{msgs.co_userdata_button_edit}" icon="ui-icon-unlocked" actionListener="#{cc.attrs.editListener}"/>
        </c:if> 
```

实际上，这个复合组件是由调用 myData.xhtml 的视图调用的：

```
 <h:form id="dataForm">  
        <mc:UserData user="#{dataBean.user}" 
               isBrowseModus="#{dataBean.browseModus}"
               saveAction="#{dataBean.save}" 
               editListener="#{dataBean.editActionListener}">
        </mc:UserData>   
    </h:form> 
```

我的目标是什么：在该复合组件中，用户可以通过单击“编辑”按钮来更改任何用户数据。我更喜欢使用 PRIMEFACES 的就地标签。单击编辑按钮后，所有可更改的字段都应显示为蓝色（请参阅复合组件）。

我的问题是我不知道如何将**isBrowseModus**标志（定义为 cc-attribute）更新为 false。实际上我是在**editActionListener**（在managedBean 中定义）中完成的，但不幸的是没有任何结果。

从托管 bean (dataBean) 中提取：

```
....
    public boolean isBrowseModus() {
        return browseModus;
    }

    public void setBrowseModus(boolean browseModus) {
        this.browseModus = browseModus;
    }

    public void editActionListener(ActionEvent event) {
        browseModus = false;
        FacesContext.getCurrentInstance().renderResponse();
    }
.... 
```

我对 JSF 并不熟悉，因为这可能是必要的，因为我从一个月以来就一直在使用 JSF。也许有更方便的方法来实现这个结果。但不幸的是我不知道怎么做。有没有人可以帮我解决这个问题？

提前谢谢了。问候， 博多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:33:36.383

布尔变量正在通过数据传递， cc.attrs.isBrowseModus 与 databean 中的 browseModus 无关。理想的解决方案是保留 Boolean 对象以便传递引用，但由于 Java 中的 Boolean 包装器也是不可变的，因此您需要使用具有布尔值的东西，例如 commons-lang 中的 MutableBoolean 类。

```
<h:form id="dataForm">  
        <mc:UserData user="#{dataBean.user}" 
               isBrowseModus="#{dataBean.browseModus}"
               saveAction="#{dataBean.save}" 
               editListener="#{dataBean.editActionListener}">
        </mc:UserData>   
    </h:form>

...
 <p:inplace id="inpLand" editor="true" 
            toggleable="#{not cc.attrs.isBrowseModus.value}" 
            style="#{cc.attrs.isBrowseModus ? 'color: black' : 'color: blue'}">  
                <p:inputText value="#{cc.attrs.user.land}" label="text"/>  
        </p:inplace>  
...

....
MutableBoolean browseModus = new MutableBoolean();

    public MutableBoolean isBrowseModus() {
        return browseModus;
    }

    public void setBrowseModus(MutableBoolean browseModus) {
        this.browseModus = browseModus;
    }

    public void editActionListener(ActionEvent event) {
        browseModus.setValue(true);
        FacesContext.getCurrentInstance().renderResponse();
    }
.... 
```

# jquery - jQuery：删除动态创建的内容时遇到问题

> ID：15123876
> 
> 赞同：0
> 
> 时间：2013-02-27T22:37:05.790
> 
> 标签：jquery, html

好的，所以我一直坚持这个问题，我不知道为什么它不起作用。我已经创建了我的程序通常尝试做的事情的 jsfiddle：

[http://jsfiddle.net/ZNbm8/](http://jsfiddle.net/ZNbm8/)

我的 jQuery 是：

```
var count = 0;
$("#add").on("click", function(){
    var html = '<div id="stuff">';
    count++;
    html += '<button class="remove" id="' + count + '">Remove</button>';
    html += '</div>';
    $( html ).insertBefore("#add");
});
$(".remove").on("click", function(){
    $(this).remove();
}); 
```

我的html是：

```
<button id="add">Add</button> 
```

基本上我有一个正在创建一些 html 的按钮。这个新的 html 创建了一个与之关联的按钮，该按钮应该允许用户删除新创建的条目。我不知道为什么这不起作用。我一直在寻找解决方案，但到目前为止没有任何效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T22:38:46.030

它不起作用，因为您将单击处理程序附加到尚不存在的元素。

如果您通过使用委托稍微改变您的点击处理程序，您应该没问题：

HTML：

```
<div class="parentElement">
  <button id="add">Add</button>
</div> 
```

JS：

```
$(".parentElement").on("click", ".remove", function(){
    $(this).remove();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T22:40:34.110

当您在之前插入内容`#add`时，只需抓住它的父级并添加一个委托事件处理程序`on()`来删除`#stuff`元素，如下所示：

```
var count = 0;
$("#add").on("click", function(){
    count++;
    var html = '<div id="stuff_' + count + '">';
        html += '<button class="remove" id="a' + count + '">Remove</button>';
        html += '</div>';
    $( html ).insertBefore("#add");
}).parent().on('click', '.remove', function(){
    $(this).closest('[id^="stuff_"]').remove();
}); 
```

编辑：修复了 ID 问题！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T22:40:58.147

您需要使用的委托版本`on`才能正常工作

小提琴：

```
$(document).on("click", ".remove",function(){
    $(this).remove();
}); 
```

[http://jsfiddle.net/DpDYq/](http://jsfiddle.net/DpDYq/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T22:39:55.960

添加动态元素时，如果您希望您的 javacsript 影响这些元素，您需要使用`.live`

```
var count = 0;
$("#add").live("click", function(){
    var html = '<div id="stuff">';
    count++;
    html += '<button class="remove" id="' + count + '">Remove</button>';
    html += '</div>';
    $( html ).insertBefore("#add");
});
$(".remove").live("click", function(){
    $(this).remove();
}); 
```

[http://jsfiddle.net/ZNbm8/3/](http://jsfiddle.net/ZNbm8/3/)

**编辑**

如评论中提到的，`live()`在 jquery 的更高版本（1.7+）中已弃用。改为这样做：

```
var count = 0;
$('body').on('click', '#add', function(){
    var html = '<div id="stuff">';
    count++;
    html += '<button class="remove" id="' + count + '">Remove</button>';
    html += '</div>';
    $( html ).insertBefore("#add");
});
$('body').on('click', '.remove', function(){
    $(this).remove();
}); 
```

上面会将处理程序附加到所有具有类“remove”或id为“add”的DOM元素，它们是“body”中DOM元素的后代，即使它们将来被添加。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T22:40:47.787

对于那个用途

```
$('.remove').live('click', function(event) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T22:40:54.847

根据 jQuery 的文档：

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。

所以你也可以这样使用`.on()`：

```
$("body").on("click", ".remove", function(){
    $(this).remove();
}); 
```

正如你在这里看到的：http: [//jsfiddle.net/darkajax/JWFgS/](http://jsfiddle.net/darkajax/JWFgS/)

注意：您可以更改`body`父元素...

# node.js - res.end 上的 Node.js 和 Sendgrid 邮件程序错误

> ID：15123878
> 
> 赞同：2
> 
> 时间：2013-02-27T22:37:17.380
> 
> 标签：node.js, heroku, http-headers, express, sendgrid

我对节点有点陌生。我正在使用 express 和 sendgrid api 发送电子邮件（完全收集 REST）。sendgrid 成功或失败后，我想用一个 json 对象来响应。这是示例案例：

```
var SendGrid = require('sendgrid-nodejs').SendGrid;
var sendgrid = new SendGrid(user, key);

app.get('/LGP/:email', function (req, res){
    sendgrid.send({
        to: req.params.email,
        from: 'me@example.com',
        subject: 'Hello World',
        text: 'This email sent through SendGrid'
        }, function(success, message) {
            if (!success) {
                console.log(message);
            } else {
                res.writeHead(200, { 'Content-Type': 'application/json' });
                res.write(JSON.stringify({ result: 'success' }));
                res.end(); //error occurs: "Can't use mutable header APIs after sent."
            }
        }
    );
}); 
```

在我的本地服务器上（使用工头），一切正常。但是当我将它推送到heroku时，它给了我这个堆栈跟踪：

```
2013-02-27T22:12:46+00:00 app[web.1]: http.js:543
2013-02-27T22:12:46+00:00 app[web.1]:     throw new Error("Can't use mutable header APIs after sent.");
2013-02-27T22:12:46+00:00 app[web.1]:           ^
2013-02-27T22:12:46+00:00 app[web.1]: Error: Can't use mutable header APIs after sent.
2013-02-27T22:12:46+00:00 app[web.1]:     at ServerResponse.getHeader (http.js:543:11)
2013-02-27T22:12:46+00:00 app[web.1]:     at /app/node_modules/express/node_modules/connect/lib/middleware/logger.js:229:26
2013-02-27T22:12:46+00:00 app[web.1]:     at ServerResponse.<anonymous> (/app/node_modules/express/node_modules/connect/lib/middleware/logger.js:149:20)
2013-02-27T22:12:46+00:00 app[web.1]:     at /app/app.js:60:13
2013-02-27T22:12:46+00:00 app[web.1]:     at IncomingMessage.<anonymous> (/app/node_modules/sendgrid/lib/sendgrid.js:74:9)
2013-02-27T22:12:46+00:00 app[web.1]:     at IncomingMessage.emit (events.js:81:20)
2013-02-27T22:12:46+00:00 app[web.1]:     at HTTPParser.onMessageComplete (http.js:133:23)
2013-02-27T22:12:46+00:00 app[web.1]:     at CleartextStream.ondata (http.js:1213:22)
2013-02-27T22:12:46+00:00 app[web.1]:     at CleartextStream._push (tls.js:291:27)
2013-02-27T22:12:46+00:00 app[web.1]:     at SecurePair._cycle (tls.js:565:20)
2013-02-27T22:12:48+00:00 heroku[web.1]: Process exited with status 1
2013-02-27T22:12:48+00:00 heroku[web.1]: State changed from up to crashed 
```

/app/app.js:60:13 指的是带有“res.end()”的行。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:48:12.593

为了最大限度地提高您的应用程序在本地和 heroku 上表现相同的机会，您应该确保为所有模块指定特定版本并避免使用`"*"`main `dependencies`。

还应该在 package.json 中指定节点版本：

```
"engines": {
  "node": "0.8.20"
} 
```

（使用任何合适的版本）。

# django - Django在模板中显示从多个选择中选择的项目

> ID：15123881
> 
> 赞同：0
> 
> 时间：2013-02-27T22:37:25.020
> 
> 标签：django, django-forms, django-templates

我在 ModelForm 中有多项选择。当页面重新加载出现错误时，我希望显示当前**选定**的项目。

# 视图.html

```
error: {{ form.recipients.errors }}<br/>
currently selected: <br/>
{% for recipient in form.recipients %} <!--I want some type of loop through only the selected items in my recipients -->
    {{ recipient }}<br/>
{% endfor %}
{{ form.recipients }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:55:43.243

您想循环字段的值，而不是字段本身：

```
{% for recipient in form.recipients.value %}
    {{ recipient }}
{% endfor %} 
```

# php - 无法识别重音 + 请求超链接时出错

> ID：15123888
> 
> 赞同：0
> 
> 时间：2013-02-27T22:37:44.593
> 
> 标签：php, javascript, html, hyperlink, html-parsing

我正在制作一本西班牙语词典。我从 www.rae.es 得到定义。当时有两个问题：

*   搜索引擎不适用于重音 (á é í ó ú )。输出是来自 rae.es 的错误消息，指出无法识别该单词。例如：对于单词“baúl”，出现（翻译）：“单词 baÃºl 没有在字典中注册。”

*   另一个问题是，每当一个词有 2 个或更多含义时，都会显示一个带有多个选项的建议（这些选项由字典生成），但如果您单击一个，则会出现错误。如果在定义中存在指向另一个单词的超链接，也会发生同样的情况。

单击此处查看示例： http://verbum.xtrweb.com/verbumpost.php?word=cuarto& [word0 =](http://verbum.xtrweb.com/verbumpost.php?word=cuarto&word0=)

您还可以通过右键单击然后在 chrome 上“检查元素”来查看代码，我也认为 firefox 和 Safari，以检查我如何检索定义。如果你使用谷歌浏览器会更好。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:42:42.520

您必须对查询字符串进行 URL 编码。例如，替换`ú`为`%FA`作品： http://verbum.xtrweb.com/verbumpost.php?word=ba%FAl& [word0](http://verbum.xtrweb.com/verbumpost.php?word=ba%FAl&word0=) = 。

此外，错误消息`baÃºl`表明在某些时候您正在混合编码（可能是 UTF8 和拉丁语 1）。

在 JavaScript 中，您可以使用[`encodeURI`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURI)对完整 URL 进行编码，或[`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)对查询字符串的一部分进行编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T04:57:15.717

联系 Real Academia Española，了解通过其他网站上的搜索表格使用其内容的信息。您可以向他们索取技术规格，如果他们授予您此类使用的权利（参见他们的[版权声明](http://www.rae.es/rae/gestores/gespub000001.nsf/voTodosporId/4F34A4D521080642C12576C5003D16DE?OpenDocument)）。

# stereotype - How are Boundary, Entity and Control classes defined?

> ID：15123892
> 
> 赞同：0
> 
> 时间：2013-02-27T22:38:01.923
> 
> 标签：stereotype

I'm referencing a book by bennet, s et al (2002). Object-orientated systems analysis and design 2nd ed. McgraawHill:Maidenhead.

In the book when describing requirements analysis Bennet refers to three types of 'analysis class stereotypes' as a way of breaking down use case diagrams into defined classes.

The first two seem fairly straight forward : an boundary class is the terminus between the user and the system, or the system and other systems that it relies on. An entity class is the 'information and associated behaviour of some phenomenon or concepts such as an individual, a real life object, or a real life event' i.e. the data that you're trying to model or store, such as a person.

Finally, there are control classes which 'represent co-ordination sequencing, transactions and control of other objects'. This definition isn't as clear as Bennet states:

> "meanwhile, the boundary class represents interaction with the user and the entity clases represent the behaviour of things in the application domain and storage of information that is directly associated with these things"

This rather begs the question what exactly is an application or software domain in this context? How does the control class fit in with these other two definitions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:28:11.517

I think this offers a best case solution :

[http://epf.eclipse.org/wikis/openuppt/openup%5Fbasic/guidances/concepts/entity%5Fcontrol%5Fboundary%5Fpattern,%5FuF-QYEAhEdq%5FUJTvM1DM2Q.html](http://epf.eclipse.org/wikis/openuppt/openup%5Fbasic/guidances/concepts/entity%5Fcontrol%5Fboundary%5Fpattern,%5FuF-QYEAhEdq%5FUJTvM1DM2Q.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-31T07:27:22.720

Entity objects represent the persistent information tracked by the system.

Boundary objects represent the interactions between the actors and the system.

Control objects are in charge of realizing use cases.

Modeling the system with entity, boundary, and control objects provides developers with simple heuristics to distinguish different, but related concepts.

# android - getMenuInflater 和 ListActivity

> ID：15123909
> 
> 赞同：1
> 
> 时间：2013-02-27T22:39:03.620
> 
> 标签：android

我有一个动作栏。当我打电话

```
getMenuInflater().inflate(R.menu.items, menu); 
```

在我的 Activity 中使用 ActionBar 的菜单，这就是我想要的。但是，当我在 ListActivity 中尝试此操作时，菜单会添加到经典菜单（我必须在其中按下菜单按钮...） 如何将菜单添加到 ListActivity 中的 ActionBar？

# vb.net - vb.net 函数不会在所有代码路径上返回值

> ID：15123910
> 
> 赞同：0
> 
> 时间：2013-02-27T22:39:04.073
> 
> 标签：vb.net, browser

我在 VB.Net 中做了一个简单的函数 get 获取您在文本框一中键入的字符串，并通过 webbrower 将其发送到文本框 id“wgo”，然后单击提交。它给了我警告“函数 GetMessage（）不在所有代码路径上返回一个值”。如果有人知道如何修复警告，或者如何以不同的格式捕获 textbox1.text 消息；请告诉我。

这是我正在使用的部分代码：

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim elements = WebBrowser1.Document.GetElementsByTagName("input")   '' or whatever tag it is
    For Each element As HtmlElement In elements
        GetMessage() 'Get message from textbox1 and send it 
        If element.GetAttribute("className") = "submitbut" Then
            element.InvokeMember("click")
            MsgBox("Your ECHO has been broadcast!")
            Exit For
        End If
    Next
    TextBox2.Text = TextBox1.Text 'Displays what the sent message was
    TextBox1.Text = ""            'Erases old message from textbox1
    TextBox3.Text = getCurrentDateTimeString()  'Displays the time and date it was sent
End Sub

Function GetMessage()
    WebBrowser1.Document.GetElementById("wgo").SetAttribute("value", TextBox1.Text)
End Function 
```

任何帮助，将不胜感激！我是 VB.net 的新手，所以放轻松！再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:40:53.830

你的函数根本不返回任何东西！

这是所需的行为，您应该将其更改为`Sub`：

```
Sub GetMessage()
    WebBrowser1.Document.GetElementById("wgo").SetAttribute("value", TextBox1.Text)
End Sub 
```

# html - 如何让两个平行四边形完美重叠并在 HTML 中动态调整大小？

> ID：15123912
> 
> 赞同：3
> 
> 时间：2013-02-27T22:39:10.517
> 
> 标签：html, css, shape, skew, css-shapes

我刚刚开始接触 HTML 和 CSS，我想创建一个涉及平行四边形和动态调整大小的设计。我想要四个平行四边形，每个从顶部开始，然后分别到 25%、50%、75% 和 100%，并重叠。结果是看起来像一个平行四边形，但有四个部分（这些部分将带有 a-tags 以链接到站点的其他部分）。

现在这一切都很好，直到您处理右边距和倾斜。每个平行四边形的右上角需要坐在同一个地方并向下倾斜相同的角度才能使这个技巧起作用。不幸的是，因为右边距是从平行四边形的中心（不是顶部）到右边缘的距离，所以这很难——这个度量的固定距离或相对距离都不起作用。关键问题是右边距需要是屏幕垂直高度的函数——这可以通过 JQuery 实现，但我想尝试纯 HTML 或 CSS 解决方案。

**代码**

这是一些说明问题的基本代码：

```
<!DOCTYPE html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title></title>
    <style>
        html,
        body { 
                height:100%;
                width:100%; }
        div.parallelogram {
                position:absolute;
                top:0;
                right:0;
                -moz-transform:skew(-20deg);
                -o-transform:skew(-20deg);
                -webkit-transform: skew(-20deg); }
        div#parallelogram1 {
                height:100%;
                width:20%;
                background-color:#AAA;
                z-index:10; margin-right:100px; }
        div#parallelogram2 {
                height:50%;
                width:20%;
                background-color:#CCC;
                z-index:20;
                margin-right:55px; }
    </style>
</head>
<body>
<div class="parallelogram" id="parallelogram1"></div>
<div class="parallelogram" id="parallelogram2"></div>
</body> 
```

如果您可以让两个平行四边形保持对齐，并且无论大小如何仍然垂直填充屏幕（不要担心水平调整大小，我会把它挂在页面的右侧 - 这已经足够了我想要的效果），那么你就是英雄。

我个人认为三种可能性：

1.  使用正确的边距右、宽度、高度和倾斜组合的一些惊人的方法
2.  将每个平行四边形放入某个容器中，并告诉它它必须完全留在容器内。
3.  拼图 - 制作水平条，然后在每个尺寸上与白色平行四边形重叠以创建所需的形状。我已经设法让它工作，但我热衷于制作一个更简单的解决方案 - 如果你真的希望平行四边形坐在某物前面，这种技术很烦人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T20:57:24.890

**编辑：**
只需将 3 个平行四边形嵌套在一个父级中，这将使其更容易。这是您解释的场景的完整解决方案：

[http://jsbin.com/omoreb/1/edit](http://jsbin.com/omoreb/1/edit)

或者，如果您不想相对定位嵌套的平行四边形，您完全可以这样做，但这需要您指定每个平行四边形的高度；并为其中的每个锚元素指定一个 margin-top。我认为这个解决方案做得很好。

# mysql - MySql 事务成功表锁，最后插入

> ID：15123913
> 
> 赞同：0
> 
> 时间：2013-02-27T22:39:11.267
> 
> 标签：mysql

我有几个问题我不确定，如果有人可以帮助我，那将是一个很大的帮助

1）我想返回我的代码，用户成功插入数据库它也没有失败。我会按照 If Last_Insert_id is not null 的方式执行此操作吗？返回一条消息说插入。

2) last_isert_id 将特定于插入的用户，即一次插入一个。我需要做一个锁来实现这一点。即，例如，如果我有一个配置文件表并且我得到了 last_isert_id，我可以保证是否有很多人同时注册每个 id 将用于每个用户。还是我需要做表锁定。

在改进方面最受欢迎的任何其他反馈

开始

```
DECLARE _user_role_permission int;
DECLARE _user_id int;
DECLARE EXIT HANDLER FOR SQLEXCEPTION ROLLBACK;
DECLARE EXIT HANDLER FOR SQLWARNING ROLLBACK;

SET _user_role_permission = (SELECT id FROM user_role_permission WHERE role_permission = in_role_permission);

START TRANSACTION;

INSERT INTO user_site(username, email, status, password, password_strategy, salt, requires_new_password, reset_token,
                             login_time, lock_status, login_ip, created_ip, activation_key, validation_key,
                             create_time, update_time)
                  VALUES(in_username, in_email, in_status, in_password, 
                            in_password_strategy, in_salt, in_requires_new_password,
                             in_reset_token, in_login_time, in_lock_status, in_login_ip,
                             in_created_ip, in_activation_key, in_validation_key,
                             in_create_time, in_update_time);   

SET _user_id = LAST_INSERT_ID();                        

INSERT INTO user(user_site_id) VALUES(_user_id);

INSERT INTO user_permission(user_id, permission_id)VALUES (_user_id,_user_role_permission); 

COMMIT;

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:47:12.807

1.  可以使用[`SELECT @@warning_count;`](http://dev.mysql.com/doc/refman/5.5/en/show-warnings.html)and [`SELECT @@error_count;`](http://dev.mysql.com/doc/refman/5.5/en/show-errors.html)after`INSERT`看是否成功。我是的，它将返回 0 行。

2.  last_insert_id() 仅限于当前连接，所以无论有多少并发连接到数据库，你总是会得到正确的值。

# css - CSS 溢出：如何修复 CSS 溢出滚动错误

> ID：15123917
> 
> 赞同：0
> 
> 时间：2013-02-27T22:39:20.530
> 
> 标签：css

我正在创建一个页面，该页面顶部有固定链接，底部有固定提交按钮。`overflow:auto`中间的内容可以使用;滚动。

我注意到，当我减小浏览器窗口大小时，滚动条会慢慢消失。

我怎样才能解决这个问题？有什么黑客吗？

我正在使用 Firefox 19.0 和 chrome 版本 26.0.1410.12 和 IE9

这是我的全部代码：

```
<!DOCTYPE HTML>
<html>

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>overflow based Layout</title>
        <style type="text/css">
            <!--
            /* Pretty Stuff
================================== */
            /* Zero down margin and paddin on all elements */
            * {
                margin: 0;
                padding: 0;
            }
            body {
                font: 92.5%/1.6"Lucida Grande", "Lucida Sans", "Lucida Sans Unicode", Verdana, sans-serif;
            }
            h1 {
                font-size: 2.4em;
                font-weight: normal;
            }
            h2 {
                font-size: 2.0em;
                font-weight: normal;
            }
            p, li {
                font-size: 1.4em;
            }
            h1, h2, p {
                margin: 1em 0;
            }
            #branding h1 {
                margin: 0;
            }
            #wrapper {
                background-color: #fff;
            }
            #branding {
                height: 50px;
                background-color:#b0b0b0;
                padding: 20px;
            }
            #form-b {
                height: 500px;
                overflow: auto;
                position: fixed;
                top: 164px;
                width: 98%;
            }
            #mainNav {
                list-style: none;
                background-color:#eee;
            }
            #footer {
                background-color:#b0b0b0;
                padding: 1px 20px;
            }
            /* The Core Technique
================================= */
            body {
                text-align: center;
                min-width: 1260px;
            }
            #wrapper {
                width: 100%;
                margin: 0 auto;
                text-align: left;
            }
            #content {
                width: 100%;
                float: right;
            }
            #mainNav li {
                /*  width: 180px; 
  float: left;  */
                display:inline;
            }
            #submit-b {
                border: 0px solid red;
                bottom: 77px;
                position: fixed;
                text-align: cemter;
                width: 100%;
            }
            #footer {
                clear: both;
            }
            /* Add some padding 
================================== */
            #mainNav {
                padding-top: 20px;
                padding-bottom: 20px;
                position: fixed;
                width: 100%;
            }
            #mainNav * {
                padding-left: 20px;
                padding-right: 20px;
            }
            #mainNav * * {
                padding-left: 0;
                padding-right: 0;
            }
            #content * {
                padding-right: 20px;
            }
            #content * * {
                padding-right: 0;
            }
            -->
            /* fieldset styling */
            fieldset {
                margin: 1em 0;
                /*  space out the fieldsets a little*/
                padding: 1em;
                border : 1px solid #ccc;
                background-color:#F5F5F5
            }
            /* legend styling */
            legend {
                font-weight: bold;
            }
            form p {
                position: relative;
                width: 100%;
            }
            /* style for  labels */
            label {
                float: left;
                width: 10em;
            }
            #remember-me label {
                width: 4em;
            }
            /* style for required labels */
            label .required {
                font-size: 0.83em;
                color:#760000;
            }
            /* style error messages */
            label .feedback {
                position: absolute;
                margin-left: 11em;
                left: 200px;
                right: 0;
                font-weight: bold;
                color:#760000;
                padding-left: 18px;
                background: url(images/error.png) no-repeat left top;
            }
            /* :KLUDGE: Explicitly set the width for IE6- */
            * html .feedback {
                width: 10em;
            }
            input {
                width: 200px;
            }
            input[type="text"], textarea {
                border-top: 2px solid #999;
                border-left: 2px solid #999;
                border-bottom: 1px solid #ccc;
                border-right: 1px solid #ccc;
            }
            input.radio, input.checkbox, input.submit {
                width: auto;
            }
            /* style form elements on focus */
            input:focus, textarea:focus {
                background: #ffc;
            }
            input.radio {
                float: left;
                margin-right: 1em;
            }
            textarea {
                width: 300px;
                height: 100px;
            }
            /* Date of Birth form styling */
            #monthOfBirthLabel, #yearOfBirthLabel {
                text-indent: -1000em;
                width: 0;
            }
            #dateOfBirth {
                width: 3em;
                margin-right: 0.5em;
            }
            #monthOfBirth {
                width: 10em;
                margin-right: 0.5em;
            }
            #yearOfBirth {
                width: 5em;
            }
            /* Color form styling */
            #favoriteColor {
                margin: 0;
                padding: 0;
                border: none;
                background: transparent;
            }
            #favoriteColor h2 {
                width: 10em;
                float: left;
                font-size: 1em;
                font-weight: normal;
            }
            #favoriteColor div {
                width: 8em;
                float: left;
            }
            #favoriteColor label {
                /*width: 3em;*/
                float: none;
                display: inline;
            }
        </style>
    </head>

    <body>
        <div id="wrapper">
            <div id="branding">

<h1>Branding</h1>

            </div>
            <div id="content">
                <ul id="mainNav">
                    <li class="first">
                        <a href="#">Home</a>
                    </li>
                    <li>
                        <a href="#">About</a>
                    </li>
                    <li>
                        <a href="#">News</a>
                    </li>
                    <li>
                        <a href="#">Products</a>
                    </li>
                    <li>
                        <a href="#">Services</a>
                    </li>
                    <li>
                        <a href="#">Clients</a>
                    </li>
                    <li>
                        <a href="#">Case Studies</a>
                    </li>
                </ul>
                <div id="form-b">
                    <form id="comments_form" action="#" method="post">
                        <fieldset>
                            <legend>Your Contact Details</legend>
                            <p>
                                <label for="author">Name: <span class="required">(Required)</span>
                                </label>
                                <input name="author" id="author" type="text" />
                            </p>
                            <p>
                                <label for="email">Email Address: <span class="feedback">Incorrect email address. Please try again.</span>
                                </label>
                                <input name="email" id="email" type="text" />
                            </p>
                            <p>
                                <label for="url">Web Address:</label>
                                <input name="url" id="url" type="text" />
                            </p>
                        </fieldset>
                        <fieldset>
                            <legend>Your Contact Details</legend>
                            <p>
                                <label for="author">Name: <span class="required">(Required)</span>
                                </label>
                                <input name="author" id="author" type="text" />
                            </p>
                            <p>
                                <label for="email">Email Address: <span class="feedback">Incorrect email address. Please try again.</span>
                                </label>
                                <input name="email" id="email" type="text" />
                            </p>
                            <p>
                                <label for="url">Web Address:</label>
                                <input name="url" id="url" type="text" />
                            </p>
                        </fieldset>
                        <fieldset>
                            <legend>Your Contact Details</legend>
                            <p>
                                <label for="author">Name: <span class="required">(Required)</span>
                                </label>
                                <input name="author" id="author" type="text" />
                            </p>
                            <p>
                                <label for="email">Email Address: <span class="feedback">Incorrect email address. Please try again.</span>
                                </label>
                                <input name="email" id="email" type="text" />
                            </p>
                            <p>
                                <label for="url">Web Address:</label>
                                <input name="url" id="url" type="text" />
                            </p>
                        </fieldset>
                        <fieldset>
                            <legend>Your Contact Details</legend>
                            <p>
                                <label for="author">Name: <span class="required">(Required)</span>
                                </label>
                                <input name="author" id="author" type="text" />
                            </p>
                            <p>
                                <label for="email">Email Address: <span class="feedback">Incorrect email address. Please try again.</span>
                                </label>
                                <input name="email" id="email" type="text" />
                            </p>
                            <p>
                                <label for="url">Web Address:</label>
                                <input name="url" id="url" type="text" />
                            </p>
                        </fieldset>
                        <fieldset id="submit-b">
                            <legend></legend>
                            <p>
                                <input id="submit" class="submit" name="submit" type="submit" />
                            </p>
                        </fieldset>
                    </form>
                </div>
            </div>
            <div id="footer">
                <p>Footer</p>
            </div>
        </div>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:52:33.060

将内边距减小到 10px：

```
#content * {
    padding-right: 10px; /* Line 106 */
} 
```

# autocomplete - Sublime Text 2 自定义补全：类似 jQuery 的语法

> ID：15123918
> 
> 赞同：1
> 
> 时间：2013-02-27T22:39:23.353
> 
> 标签：autocomplete, escaping, sublimetext2

我正在为 Kirby CMS 编写自己的自定义自动完成功能。语法如下：`$page->title()`例如。现在，只是一个简单的完成将是这样的（这已经在工作了）：

```
{ "trigger": "page->title()", "contents": "page->title()" }, 
```

我的问题是，Sublime Text 无法识别`>`- 一切正常，直到我输入 > 字符，自动完成就停在那里（自动完成工具提示被隐藏）。我根本不是专家，只尝试了我现在的基本转义内容（就像你会转义 $ 符号：`\\$var`和`page-\\>title()`），但我得到的只是`page-\>...`. 一个反斜杠会导致错误。

现在我的问题是：是否有可能以我可以输入`page->`并获得相应建议的方式转义 >，还是我必须做其他事情？还是根本不可能？

谢谢你的回答！

# c# - 如何根据第一个列表匹配检索子字符串

> ID：15123924
> 
> 赞同：3
> 
> 时间：2013-02-27T22:39:51.530
> 
> 标签：c#, linq, lambda

在一个字符串中，我需要根据列表中任何项目的第一个匹配项恢复一个 7 个字符的子字符串。如果没有匹配，它应该返回一个空字符串。

我有以下代码：

```
List<string> myList = new List<string>()
{
    "TNCO",
    "TNCB",
    "TNIT"
};
string sample = "TNSD102, WHRK301, TNIT301, YTRE234";

//doesn't give an index
bool anyfound = myList.Any(w => sample.Contains(w));

//code that needs replacing
string code = sample.Substring(sample.IndexOf("TNC"), 7);
if (code == "")
{
    code = sample.Substring(sample.IndexOf("TNIT"), 7);
} 
```

该列表永远不可能超过 35-40 个项目并且字符串 < 50 个字符。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:58:54.427

```
string val1 = (sample.Split(',').FirstOrDefault(w => myList.Any(m => w.Contains(m))) ?? string.Empty).Trim(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:55:42.477

这为您提供了所有匹配项的 IEnumerable：

```
var matches = from code in sample.Split(',')
              from w in myList
              where code.Trim().StartsWith(w)
              select code; 
```

要获得第一个值，请使用 FirstOrDefault。`??`如果没有匹配，则使用合并运算符返回一个空字符串。

```
string firstMatch = (matches.FirstOrDefault() ?? "").Trim(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:49:11.263

有了这么小的数据集，您可以简单地拆分字符串并搜索第一个匹配项：

```
// split the sample string into separate entries
var entries = sample.Split(new char[] {',', ' '},
    StringSplitOptions.RemoveEmptyEntries);

// find the first entry starting with any allowed prefix
var firstMatch = entries.FirstOrDefault (
    e => myList.Any (l => e.StartsWith(l)));

// FirstOrDefault returns null if there are no matches
if (firstMatch == null)
    Console.WriteLine("No match!");
else
    Console.WriteLine(firstMatch); 
```

示例输出（[**DEMO**](http://ideone.com/QcnBYU)）：

```
TNIT301 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T22:56:42.887

在此处运行此代码会根据您要查找的内容返回索引 2。

```
int keyIndex = myList.FindIndex(w => samples.Contains(w)); 
```

`TNIT301`这是索引字符串值

`keyIndex`您还可以执行以下操作以在变量值的索引位置返回字符串值。

```
var subStrValue = samples.Split(',')[keyIndex]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T22:59:15.910

```
List<string> myList = new List<string> { "TNCO", "TNCB", "TNIT" };
string sample = "TNSD102, WHRK301, TNIT301, YTRE234";
string[] sampleItems = sample.Split(new[] { ',', ' ' }, StringSplitOptions.RemoveEmptyEntries);

var results = myList
    .Select(prefix => sampleItems
        .FirstOrDefault(item => item.StartsWith(prefix)) ?? ""); 
```

# python - 在 django flatpage 中嵌入 tinyMCE

> ID：15123927
> 
> 赞同：2
> 
> 时间：2013-02-27T22:40:03.507
> 
> 标签：python, django, django-tinymce

我正在使用[django-tinymce](https://github.com/aljosa/django-tinymce)。我想知道如何将它嵌入到管理面板的平面页面中。

从项目的自述文件中：

在您的项目的 settings.py 中将 tinymce 添加到 INSTALLED_APPS：

```
INSTALLED_APPS = (
    ...
    'tinymce',
) 
```

将 tinymce.urls 添加到项目的 urls.py 中：

```
urlpatterns = patterns('',
    ...
    (r'^tinymce/', include('tinymce.urls')),
) 
```

我的平面网址：

```
url(r'^pages/', include('django.contrib.flatpages.urls')), 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-02T19:58:22.137

您需要覆盖内容字段的小部件。去做这个：

1.  将`FlatpageForm`ModelForm 扩展为`PageForm`
2.  扩展`FlatPageAdmin`以使用新的`PageForm`

代码示例：

```
from django.contrib.flatpages.admin import FlatpageForm, FlatPageAdmin
from django.contrib.flatpages.models import FlatPage
## OOPS this is a custom widget that works for initializing
## tinymce instances on stacked and tabular inlines
## for flatpages, just use the tinymce packaged one.
#from content.widgets import TinyMCE 
from tinymce.widgets import TinyMCE

class PageForm(FlatpageForm):

    class Meta:
        model = FlatPage
        widgets = {
            'content' : TinyMCE(attrs={'cols': 100, 'rows': 15}),
        }

class PageAdmin(FlatPageAdmin):
    """
    Page Admin
    """
    form = PageForm 
```

然后注销旧的平面管理员并重新注册新的

```
admin.site.unregister(FlatPage)
admin.site.register(FlatPage, PageAdmin) 
```

# python - matplotlib：更改 yaxis 刻度标签

> ID：15123928
> 
> 赞同：8
> 
> 时间：2013-02-27T22:40:04.847
> 
> 标签：python, matplotlib

对于 y 轴上的每个刻度标签，我想更改： `label -> 2^label`

我正在绘制日志数据（以 2 为基数），但我希望标签显示原始数据值。

我知道我可以得到当前的 y 标签 `ylabels = plt.getp(plt.gca(), 'yticklabels')`

这给了我一个清单：`<a list of 9 Text yticklabel objects>` 每一个都是`<matplotlib.text.Text object at 0x...>`

[我在http://matplotlib.org/users/text_props.html](http://matplotlib.org/users/text_props.html)查看了文本对象的文档， 但我仍然不确定更改每个文本标签中的字符串的正确语法是什么。

更改标签后，我可以使用以下方法将它们设置在轴上：

`plt.setp(plt.gca(), 'yticklabels', ylabels)`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T23:43:01.807

如果你想在一般情况下这样做，你可以使用`FuncFormatter`（参见： [matplotlib 轴标签格式](https://stackoverflow.com/questions/14775040/matplotlib-axis-label-format/14775453#14775453)， imshow：标签作为图像索引的[任意函数](https://stackoverflow.com/questions/12645946/imshow-labels-as-any-function-of-the-image-indices/12654847#12654847)[。Matplotlib set_major_formatter AttributeError](https://stackoverflow.com/questions/14731879/matplotlib-set-major-formatter-attributeerror/14732779#14732779)）

在你的情况下，以下应该工作：

```
import matplotlib as mpl
import matplotlib.pyplot as plt

def mjrFormatter(x, pos):
    return "$2^{{{0}}}$".format(x)

def mjrFormatter_no_TeX(x, pos):
    return "2^{0}".format(x)

ax = plt.gca()
ax.yaxis.set_major_formatter(mpl.ticker.FuncFormatter(mjrFormatter))
plt.draw() 
```

荒谬的`{}`转义是新式字符串 frommate 的结果

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-02T02:34:48.703

根据[http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.set_yticks](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.set_yticks)

`a = plt.gca()
a. set_yticks(list_of_labels)`

# sql - 多用户查询 - 最佳实践

> ID：15123931
> 
> 赞同：1
> 
> 时间：2013-02-27T22:40:12.420
> 
> 标签：sql, tsql, sql-server-2008-r2

我目前有大约 10 个用户在我的工作场所使用他们自己的个性化查询来进行内部流程。用户在查询顶部输入一些值，点击执行，瞧，他们的报告显示在网格中。他们访问的源数据表是相同的，但在其中创建的表是个性化的，后缀为_User1，_User2...User10。每次他们运行查询时，先前创建的表都会被删除并再次创建。整个查询运行大约需要 1 秒。

大多数结构看起来像这样重复 5 次，这 5 个步骤得到所需的输出：

```
DROP TABLE z
SELECT *
INTO z
FROM y 
```

现在，用户数量增加到 50 个，这意味着主查询代码中的每次调整都会导致我更改 50 个特定于用户的查询并将它们发送回去。10 个用户可以管理和烦人，50 个用户完全无法管理。

我的问题是，构建数据库/查询的最佳方法是什么？理想情况下，我只想有一个查询，一组创建的表（不是 50 个）。由于运行只需要 1 秒，我们是否会冒两个或多个用户（使用不同的输入）同时运行查询、访问相同的表并以某种方式获取错误数据的风险，因为他们在完全相同的时间运行它？

通常有没有特定的方法？希望有人可以提供一些启示。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:53:26.960

免责声明：正如我在评论中指出的那样，让一群用户直接访问 SSMS 以运行报告是一个**非常糟糕的主意**。获得某种前端，甚至是一个简单的 MS Access 数据库 - 例如，您只需要一个许可证即可开发数据库，​​并且您可以为其余用户提供 Access Runtime。如果用户不知道自己在做什么，他们可能会以多种方式真正搞砸你。我将在下面提供一些想法，但我**不建议这样做**。

* * *

一种解决方案：使用临时表，这样您就不必担心每个用户的表重叠：

```
-- drop the table if it already exists
if object_id('tempdb..#z') is not null
    DROP TABLE #z

SELECT *
INTO #z
FROM y 
```

当您为表名添加前缀时`#`，它将成为连接范围的临时表，这意味着单独的会话将看不到其他会话中的临时表，即使它们具有相同的名称。

* * *

除非您有一些非常复杂的场景，否则通常不需要创建临时表。您应该能够利用子查询、视图、CTE 和存储过程来实时生成输出，而无需涉及任何新表。您甚至可以构建引用其他视图的视图和过程，以便组织复杂的逻辑。例如，您可以将逻辑封装到这样的存储过程中：

```
CREATE PROCEDURE TheReport
(
    @ReportID int,
    @Name varchar(50),
    @SomeField varchar(10)
)
AS
BEGIN
    -- do some complicated query here
    SELECT field1, field2 FROM Result Q
END 
```

然后您甚至不必向您的用户发送更新（除非字段更改）。只需让他们的查询调用存储过程，您就可以在方便时直接更新该过程：

```
DECLARE @ReportID int
DECLARE @Name varchar(50)
DECLARE @SomeField varchar(10)

-- YOU CAN MODIFY THIS --
SET @ReportID = 5
SET @Name = 'MyName'
SET @SomeField = 'abc'
-- DON'T MODIFY BELOW THIS LINE --

EXEC [TheReport] @ReportID, @Name, @SomeField; 
```

# .net - .NET 中的业务规则引擎和 Designer

> ID：15123932
> 
> 赞同：3
> 
> 时间：2013-02-27T22:40:15.293
> 
> 标签：.net, business-rules

我正在寻找 .NET 中的（最好是商业的）业务规则引擎，其中包括一个 GUI 设计器，它将规则序列化为可以存储在数据库中的东西（最好是 XML）。我已经查看了 InRule 和 FlexRule，InRule 还没有回复我关于评估的信息，而且 FlexRule 似乎无法在 Windows 8 上运行。如果设计师在 Silverlight 之类的东西中，那就太好了，这样它就可以托管了在网上。

面向 .NET 4.0 的业务规则引擎有哪些选项？

# ruby - ruby中缺少括号，我怎么知道它是变量还是函数

> ID：15123944
> 
> 赞同：0
> 
> 时间：2013-02-27T22:40:48.660
> 
> 标签：ruby

例如，假设我们有一个名为 ItemCollection 的类并且我们调用 ItemCollection.quantity，因为不需要括号，我们如何知道它是访问 ItemCollection 中的数量变量还是它调用了 quantity() 函数？此外，对于 Ruby 类中的字段，它们是私有的还是公共的？

该评论回答了我对吸气剂的问题。但是，如果我有一个数量变量和一个做其他事情而不是获取/设置数量值的数量（）函数怎么办？Ruby 如何确定我真正指的是哪一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:52:39.237

只有通过方法才能直接访问类中的变量（除了自省）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-13T13:26:17.790

### 1\. 是否以小写字母(a,b..)开头？

一种。Ruby 检查它是否是局部变量。
湾。Ruby 检查它是否是方法。
C。Ruby 调用 method_missing

### 2\. 是否以大写字母（A,B..）开头？

一种。Ruby 检查它是否是常量。
湾。Ruby 调用 const_missing

### 3.是方法调用(object.method)吗？

一种。Ruby 检查它是否是方法
b。Ruby 调用 method_missing

所以外部对象（如 steenslag 所说）ruby 3.
在你的对象/类定义中它与 1/2 一起使用：

```
class E    
  def a()
    'a'
  end
  def get_a()
    a=42
    puts a 
  end
end
E.new.get_a() #42 
```

但在这种情况下：

```
class A
  a=42
  def get_a()
    a
  end
end
A.new.get_a() # NameError: undefined local variable or method `a' for #<A:0x3820368> 
```

变量**a**属于 A 的某个**版本***，*因此类 A 和类 A 的实例在声明类后本身不知道**a**。

# css - SVG "fill: url(#....)" 在 Firefox 中表现异常

> ID：15123953
> 
> 赞同：22
> 
> 时间：2013-02-27T22:41:49.603
> 
> 标签：css, firefox, svg, gradient, fill

我有以下 SVG 图形：

```
<svg width='36' height='30'>
  <defs>
    <linearGradient id="normal-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:rgb(81,82,84); stop-opacity:.4"/>
      <stop offset="100%" style="stop-color:rgb(81,82,84); stop-opacity:1"/>
    </linearGradient>
    <linearGradient id="rollover-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:rgb(0,105,23); stop-opacity:.5"/>
      <stop offset="100%" style="stop-color:rgb(0,105,23); stop-opacity:1"/>
    </linearGradient>
    <linearGradient id="active-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:rgb(0,0,0); stop-opacity:.4"/>
      <stop offset="100%" style="stop-color:rgb(0,0,0); stop-opacity:1"/>
    </linearGradient>
  </defs>

  <text x="8" y="25" style="font-size: 29px;" font-family="Arial">hello world</text>
</svg>' 
```

我通过 CSS 设置元素的`fill`属性，`text`并根据悬停状态在各种渐变之间切换。这在 Chrome 和 Safari 中效果很好，但在 Firefox 中，文本不会显示。检查该元素后，我发现 Firefox 将附加`none`到我的`fill: url(#...)`CSS 属性的末尾。我尝试`none`使用 Firebug 删除关键字，但 Firebug 只是删除了整个属性。为什么会这样？

**编辑：** 我应该注意，如果我删除设置属性的 CSS，并将`fill`属性硬编码`fill`到`text`元素中（而不是通过内联`style`属性），则文本会在所有浏览器中正确显示。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-28T14:48:24.150

弄清楚了。在我的 CSS 中，我引用渐变的方式与我最初引用内联填充的方式相同：

```
#myselector {
    fill: url('#gradient-id');
} 
```

为了让它在 Firefox 中工作，我不得不把它改成这样：

```
#myselector {
    fill: url('/#gradient-id');
} 
```

不知道为什么会这样。也许它与包含我的样式表的目录结构有关？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-28T16:13:16.337

当我们用 css（外部和内部 css）分配以下代码时，SVG “fill: url(#...)” 在 Firefox 中的行为很奇怪。

```
#myselector {
fill: url('#gradient-id');
} 
```

**解决方案**

提供内联样式，这可以通过两种方式完成。静态或动态方式

动态方式

```
.attr('fill', 'url(#gradient-id)') 
```

静态方式

```
fill="url(#gradient-id)" 
```

在静态中，您必须将其放在 SVG Html 中；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-20T08:44:45.810

我在 SVG 中遇到了同样的问题`linearGradient`——还是在 2017 年。我猜，问题在于 Firefox 将其视为`url('#gradient-id')`普通 URL 并应用了元标记规则`<base href=""/>`。把它注释掉，然后检查。

# javascript - cssSandpaper.setOpacity(node,0) 不起作用？

> ID：15123957
> 
> 赞同：1
> 
> 时间：2013-02-27T22:42:01.417
> 
> 标签：javascript, css, dom, opacity

到目前为止，这就是我设置图像不透明度的方法。除了 IE 之外，使用`container_div.style.opacity() = 0`而不是`cssSandpaper.setOpacity(container_div,0)`适用于所有浏览器，但我希望它也可以在 IE 上运行，所以我使用了 cssSandpaper。

```
var image_tag;

image_tag = document.createElement("img");  
image_tag.setAttribute("height", "100%");
image_tag.setAttribute("width", "100%");
image_tag.src = "image.png"     
document.getElementById(id).appendChild(image_tag); 

var container_div = document.getElementById(id);  
cssSandpaper.setOpacity(container_div, 0); 
```

# c - 将非 ASCII 字符输入到 scanf("%s")

> ID：15123963
> 
> 赞同：7
> 
> 时间：2013-02-27T22:42:22.903
> 
> 标签：c, format, scanf, buffer-overflow

有没有一种方法可以向使用的 scanf 发出非 ascii 十六进制字符`%s`？我正在尝试插入十六进制字符等`\x08\xDE\xAD`（以演示缓冲区溢出）。

输入不是命令行参数，而是程序内部的 scanf。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-21T08:20:06.597

我假设您想在标准输入上提供任意数据（因为您使用 阅读`scanf`）。

您可以使用外壳创建数据并将其通过管道传输到您的程序中，例如

```
printf '\x08\xDE\xAD' | yourprogram 
```

`scanf`请注意，这仅在没有要输入的空白​​字符时才有效（因为`%s`格式在空白处停止）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:40:32.193

当你说'to a `scanf()`'时，大概还有其他数据要提供。让一个程序（可能是 Perl 或 Python 脚本）生成数据并将非 ASCII 字符写入程序的标准输入是否可行？如果您需要标准输入看起来像一个终端，那么您应该调查[`expect`](http://expect.nist.gov/)哪个可以为您处理。这是处理问题的常用方法。

# c# - 来自 textbox1 的用户输入 > 存储在列表中 > 在 textbox2 中输出

> ID：15123964
> 
> 赞同：5
> 
> 时间：2013-02-27T22:42:23.913
> 
> 标签：c#

我只是有一个关于 C# 列表的问题。在编程方面，我完全是个菜鸟，我真的很抱歉成为一个鸟脑子。我正在做一些练习编码，我正在创建一个简单的程序，允许用户通过 textbox1 输入名称，然后一旦他们按下按钮 1，名称将存储在一个列表中，并将在 textbox2 上输出。

我很难存储来自 textbox1 的数据。在网上查了一下，但我没有找到合适的文章来解决我的问题，所以我在这里试试运气。

对不起，我忘了提到我正在使用 Winforms。

非常感谢您的快速回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:48:01.050

假设winforms ...

*   将 2 个列表和一个按钮拖放到您的设计器上。
*   将按钮拖到您的设计器上
*   双击您的按钮以自动创建事件
*   在表单中的某处创建一个列表结构来存储列表
*   在表单构造函数中实例化您的列表
*   在`button1_Click`事件中将文本添加`textbox1`到列表中
*   生成 1textbox2 的文本`

这是一个例子

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            list = new List<string>();
        }

        List<string> list;

        private void button1_Click(object sender, EventArgs e)
        {
            list.Add(textBox1.Text);

            string txt = "";
            foreach(string s in list)
            {
                txt += s + " ";
            }
            textBox2.Text = txt;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:49:01.953

类似的东西？

```
string name = Textbox1.Text;
ListBox1.Add(name); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T23:08:10.993

如果您使用传统的 Windows 窗体应用程序；我不确定您是否打算将数据存储在另一个文本框中。但是列表框可能更符合您的目标。

1.  将以下内容：文本框、第二个文本框、列表框和按钮从工具箱拖到您的表单中。
2.  随心所欲地调整它们，将它们视为绘画的画布。
3.  一旦它看起来像你想要的那样配置，双击按钮。

此时 Visual Studio 将离开设计器视图并进入代码视图。这样你就可以看到代码了。它会自动将您置于 Button 代码块中。

这些块非常重要，随着您的进步，您会注意到 C# 的结构。

```
private void button1_click(object sender, EventArgs e)
{
     // Logic to add will go in here.
} 
```

这是什么意思？

*   Private ：是修饰符，表示仅限于该类。
*   Void：表示它不要求返回类型。
*   button1_click：这是按钮的名称，您可以在其属性中更改它。将组件命名在前面是一种很好的做法，这样您就知道自己在使用什么。

整个区块是一个事件。所以当它被点击时，它会执行一个动作。这就是它的意思；所以这是您实现目标的地方：

```
private void btnAddToList_Click(object sender, EventArgs e)
{
       // Test to ensure it isn't null.
       if(txtAddText.Text != String.EmptyOrNull)
       {
            // Declare a variable with the initial textbox value.
            string txtVar = txtAddText.Text;

            // Has the second textbox inherit value from other Textbox.
            txtNewText = txtVar

           // Now Add it to a Listbox.
           lstContainer.Items.Add(txtAddText.Text + DateTime.Now());
       }

       else 
       {
            // Null or Empty Character, Error Message.
            MessageBox.Show("Invalid Entry, please enter a valid entry");
       }
} 
```

这将提供基础知识，但正如您从其他示例中看到的那样，它们的做法不同。如果您不小心，您会注意到这种逻辑中可能存在错误。您将学习根据您配置的结构来识别它。

希望这是有帮助的，而且看起来很多其他人也为你做了一些很棒的帖子。

快乐编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T22:48:18.783

在 button1 点击监听器中（如果你没有这个钩子进入 GUI builder 视图并双击按钮，它将自动为你创建和注册监听器），添加以下代码；

```
 textbox2.Text = textbox1.Text; // set tb2 = tb1
  textbox1.Text = System.String.Empty; // clear tb1 
```

现在，在您的帖子中，您说将数据存储在列表中，但您没有指定用户如何输入该数据，因此很难给您一个具体的答案。如果名称用逗号分隔以获得包含所有名称的数组，您可以简单地执行；

```
 string[] names = textbox1.Text.Split(','); 
```

但是，从您的帖子来看，您似乎根本不想将数据存储在列表中。如果您只想在单击输入按钮时`textbox1`显示输入`textbox2`，请使用第一个代码段。如果您走第二条路线，则必须将数组转换回单个字符串。这可以通过 for 循环轻松完成。

```
 string result = System.String.Empty;
 for (int i = 0; i < names.Length; i++)
      result = result + names[i] + " "; 
```

`textbox2`显示里面有什么，`textbox1`显示名字的数量；

```
 textbox2.Text = textbox1.Text; // set tb2 = tb1
  string[] names = textbox1.Text.Split(','); // i use a comma but use whatever
  // separates the names might just want ' ' for whitespace
  textbox1.Text = System.String.Empty; // clear tb1
  MessageBox.Show("You entered " + names.Count.ToString() + " names."); // show the names count 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T22:53:53.480

这很简单。

```
 List<string> mylist=new List<string>();
    mylist.Add(textbox1.Text);
    textbox2.Text=mylist[mylist.Count - 1] 
```

首先，您创建一个字符串对象列表。然后将 textbox1 中的文本添加到列表的末尾。然后通过获取列表的长度并减去 1 来获取您从列表中添加的最后一个元素，因为在 C# 集合中是基于 0 的，并且第一个元素是 [0] 而不是 [1]。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T22:55:10.203

你可以使用这样简单的东西：

```
private void button1_Click_1(object sender, EventArgs e)
{
     string[] names = textBox1.Text.Split(new string[] { " ", Environment.NewLine, "," }, StringSplitOptions.RemoveEmptyEntries);
     //you can add more parameters for splitting the string
     textBox2.Text = string.Join(",", names);
     //you can replace the comma with something more suitable for you
} 
```

第一行将您在 textBox1 中输入的字符串（因此名称由换行符、空白字符或逗号分隔）拆分为字符串数组（而不是您请求的列表），第二行将字符串连接成一个大字符串分隔的名称用逗号将其放入 textBox2

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-29T16:18:40.807

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace ShowAllSaveNameAndCountApp
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        List<string> ourList=new List<string>();

        string txt =" ";
        private void buttonSave_Click(object sender, EventArgs e)
        {
            ourList.Add(textBoxEntryName.Text);

            foreach (string s in ourList)
            {
                txt+= s+ "\n ";

            }
            textBoxEntryName.Clear();

           ourList.Clear();

        }

        private void buttonShowAllName_Click(object sender, EventArgs e)
        {
            textBoxShowName.Text = txt;
        }
    }
} 
```

# java - Android：表没有名为“变量名”的列 MySql 数据库错误

> ID：15123966
> 
> 赞同：5
> 
> 时间：2013-02-27T22:42:29.140
> 
> 标签：java, android, sqlite

当我尝试在我的数据库中添加一个新条目时，我遇到了如下所示的错误。我现在搜索了几个小时，但我无法检测到哪里出了问题。任何输入都会很棒！

这是**来自 LogCat 的错误**。

```
02-27 23:02:51.451: E/SQLiteLog(6777): (1) table dager has no column named brutto
02-27 23:02:51.451: E/SQLiteDatabase(6777): Error inserting brutto=0 date=21.03.2013      
hours=4
02-27 23:02:51.451: E/SQLiteDatabase(6777): android.database.sqlite.SQLiteException:    
table dager has no column named brutto (code 1): , while compiling: INSERT INTO     
dager(brutto,date,hours) VALUES (?,?,?)
02-27 23:02:51.451: E/SQLiteDatabase(6777):     at 
android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
02-27 23:02:51.451: E/SQLiteDatabase(6777):     at           android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
02-27 23:02:51.451: E/SQLiteDatabase(6777):     at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
02-27 23:02:51.451: E/SQLiteDatabase(6777):     at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
02-27 23:02:51.451: E/SQLiteDatabase(6777):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
02-27 23:02:51.451: E/SQLiteDatabase(6777):     at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:31)
02-27 23:02:51.451: E/SQLiteDatabase(6777):     at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1467)
02-27 23:02:51.451: E/SQLiteDatabase(6777):     at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1339)
02-27 23:02:51.451: E/SQLiteDatabase(6777):     at com.adev.timelonn.DatabaseHandler.addDay(DatabaseHandler.java:79)
02-27 23:02:51.451: E/SQLiteDatabase(6777):     at com.adev.timelonn.AddHours.onClick(AddHours.java:99)
02-27 23:02:51.451: E/SQLiteDatabase(6777):     at android.view.View.performClick(View.java:4084)
02-27 23:02:51.451: E/SQLiteDatabase(6777):     at android.view.View$PerformClick.run(View.java:16966)
02-27 23:02:51.451: E/SQLiteDatabase(6777):     at android.os.Handler.handleCallback(Handler.java:615)
02-27 23:02:51.451: E/SQLiteDatabase(6777):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-27 23:02:51.451: E/SQLiteDatabase(6777):     at android.os.Looper.loop(Looper.java:137)
02-27 23:02:51.451: E/SQLiteDatabase(6777):     at android.app.ActivityThread.main(ActivityThread.java:4931)
02-27 23:02:51.451: E/SQLiteDatabase(6777):     at java.lang.reflect.Method.invokeNative(Native Method)
02-27 23:02:51.451: E/SQLiteDatabase(6777):     at java.lang.reflect.Method.invoke(Method.java:511)
02-27 23:02:51.451: E/SQLiteDatabase(6777):     at 
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
02-27 23:02:51.451: E/SQLiteDatabase(6777):     at 
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
02-27 23:02:51.451: E/SQLiteDatabase(6777): at dalvik.system.NativeStart.main(Native   
Method) 
```

我的**数据库文件**。

```
 public class DatabaseHandler extends SQLiteOpenHelper {
 private static final int DATABASE_VERSION = 1;

 // Database Name
 private static final String DATABASE_NAME = "timeliste";

 // Contacts table name
 private static final String TABLE_DAYS = "dager";

 // Contacts Table Columns names
 private static final String KEY_ID = "id";
 private static final String KEY_DATE = "date";
 private static final String KEY_HOURS = "hours";
 private static final String KEY_UB = "ub";
 private static final String KEY_BRUTTO = "brutto";

 public DatabaseHandler(Context context) {
  super(context, DATABASE_NAME, null, DATABASE_VERSION);
 }

 // Creating Tables
 @Override
  public void onCreate(SQLiteDatabase db)        
 String CREATE_DAY_TABLE = "CREATE TABLE " + TABLE_DAYS + "(" 
 + KEY_ID + " INTEGER PRIMARY KEY," + KEY_DATE + " TEXT," + KEY_HOURS + " INTEGER,     
     " 
 + KEY_UB + " INTEGER," + KEY_BRUTTO + "INTEGER," + ")"; 
 db.execSQL(CREATE_DAY_TABLE);
 }

 // Upgrading database
 @Override
 public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
  // Drop older table if existed
  db.execSQL("DROP TABLE IF EXISTS " + TABLE_DAYS);

  // Create tables again
  onCreate(db);
 }

 /**
  * All CRUD(Create, Read, Update, Delete) Operations
  */

 // Adding new contact
 void addDay(AddNewDay newday) {
  SQLiteDatabase db = this.getWritableDatabase();

  ContentValues values = new ContentValues();
  values.put(KEY_DATE, newday.getDate()); // GetDate
  values.put(KEY_BRUTTO, newday.getBrutto()); // GetBruttoLønn
  values.put(KEY_HOURS, newday.getHours()); // GetHours
  values.put(KEY_UB, newday.getUb()); // GetUBTillegg

  // Inserting Row
  db.insert(TABLE_DAYS, null, values);
  db.close(); // Closing database connection
 }

 // Get single day
 AddNewDay getContact(int id) {
  SQLiteDatabase db = this.getReadableDatabase();

  Cursor cursor = db.query(TABLE_DAYS, new String[] { KEY_ID,
    KEY_DATE, KEY_HOURS, KEY_BRUTTO, KEY_UB }, KEY_ID + "=?",
    new String[] { String.valueOf(id) }, null, null, null, null);
  if (cursor != null)
   cursor.moveToFirst();

  AddNewDay newday = new AddNewDay(Integer.parseInt(cursor.getString(0)),
    cursor.getString(1), Integer.parseInt(cursor.getString(2)),
    Integer.parseInt(cursor.getString(3)),Integer.parseInt(cursor.getString(4)));
  // return contact
  return newday;
 }

 // Getting All Contacts
 public List<AddNewDay> getAllContacts() {
  List<AddNewDay> contactList = new ArrayList<AddNewDay>();
  // Select All Query
  String selectQuery = "SELECT  * FROM " + TABLE_DAYS;

  SQLiteDatabase db = this.getWritableDatabase();
  Cursor cursor = db.rawQuery(selectQuery, null);

  // looping through all rows and adding to list
  if (cursor.moveToFirst()) {
   do {
    AddNewDay days = new AddNewDay();
    days.setID(Integer.parseInt(cursor.getString(0)));
    days.setDate(cursor.getString(1));
    days.setHours(Integer.parseInt(cursor.getString(2)));
    days.setUb(Integer.parseInt(cursor.getString(3)));
    days.setBrutto(Integer.parseInt(cursor.getString(4)));
    // Adding contact to list
    contactList.add(days);
   } while (cursor.moveToNext());
  }

  // return contact list
  return contactList;
 }

 // Updating single contact
 public int updateDay(AddNewDay newday) {
  SQLiteDatabase db = this.getWritableDatabase();

  ContentValues values = new ContentValues();
  values.put(KEY_ID,  newday.getID());
  values.put(KEY_DATE, newday.getDate());
  values.put(KEY_HOURS, newday.getHours());
  values.put(KEY_UB, newday.getUb());
  values.put(KEY_BRUTTO, newday.getUb());

  // updating row
  return db.update(TABLE_DAYS, values, KEY_ID + " = ?",
    new String[] { String.valueOf(newday.getID()) });
 }

 // Deleting single contact
 public void deleteDay(AddNewDay newday) {
  SQLiteDatabase db = this.getWritableDatabase();
  db.delete(TABLE_DAYS, KEY_ID + " = ?",
    new String[] { String.valueOf(newday.getID()) });
  db.close();
 }

 // Getting contacts Count
 public int getContactsCount() {
  String countQuery = "SELECT  * FROM " + TABLE_DAYS;
  SQLiteDatabase db = this.getReadableDatabase();
  Cursor cursor = db.rawQuery(countQuery, null);
  cursor.close();

  // return count
  return cursor.getCount();
 }

} 
```

然后是我的**AddNewDay 文件**。

```
 public class AddNewDay {

 //private variables
     int _id;
     String _date;
     int _hours;
     int _ubtillegg;
     int _brutto;        

     // Empty constructor
     public AddNewDay(){
     }
     // constructor
     public AddNewDay(int id, String date, int hours, int ubtillegg, int            brutto){
      this._id = id;
      this._date = date;
      this._hours = hours;
      this._ubtillegg = ubtillegg;
      this._brutto = brutto;
     }       
     // constructor
     public AddNewDay(String date, int hours, int brutto){
      this._date = date;
      this._hours = hours;
      this._brutto = brutto;
     }
     // getting ID
     public int getID(){
      return this._id;
     }

     // setting id
     public void setID(int id){
      this._id = id;
     }

     // getting date
     public  String getDate(){
      return this._date;
     }

     // setting date
     public void setDate(String date){
      this._date = date;
     }

     // getting hours
     public int getHours(){
      return this._hours;
     }

     // setting hours
     public void setHours(int hours){
      this._hours = hours;
     }

     // getting ubtillegg
     public int getUb(){
      return this._ubtillegg;
     }

     // setting ubtillegg
     public void setUb(int ub){
      this._ubtillegg = ub;
     }

     // getting brutto
     public int getBrutto(){
      return this._brutto;
     }

     // setting brutto
     public void setBrutto(int brutto){
      this._brutto = brutto;
     }

             public String toString() {
         return _date + " jobbet du " + _hours + " timer.";
             }  
            } 
```

这就是我在数据库中添加新条目的方式。

```
 // # Makes a new object of newday.
        AddNewDay newday = new AddNewDay ();
        newday._date = "21.03.2013";
        newday._id = 1;
        newday._hours = 4;
        newday._ubtillegg = 1500;

        // # Open databse connection and writes new day.
        DatabaseHandler connect = new DatabaseHandler (this);
        connect.addDay(newday);

        // # Updates the dblist with entries.
        GlobalVariables.dblist = connect.getAllContacts(); 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-01T00:31:38.623

所以基本上我找到了解决方案。我仍然对它有多愚蠢感到困惑。很明显，数据库工作是超级敏感的材料！我的问题是我在最后一个“INTEGER”值中忘记了一个空格。所以不是`" INTEGER"`我写`"INTEGER"`的，这给了我一行`"bruttoINTEGER"`而不是“brutto”。所以空格是错误的。我将 createTable 函数重写为：

```
 public void onCreate(SQLiteDatabase db) {
   String CREATE_DAY_TABLE = "CREATE TABLE " + TABLE_DAYS + "(" 
 + KEY_ID + " INTEGER PRIMARY KEY," + KEY_DATE + " TEXT," + KEY_HOURS + " INTEGER, " 
 + KEY_UB + " INTEGER," + KEY_BRUTTO + " INTEGER" + ");"; 
 db.execSQL(CREATE_DAY_TABLE);
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-20T08:42:19.867

```
private static final int VERSION = 4; 
```

更改它对我来说很好的版本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-21T07:28:57.570

我同意上面的 iNzzane。这个问题主要是语法造成的。例如，以前我的代码是正确的。这里是：

```
String CREATE_PRODUCTS_TABLE = "CREATE TABLE " + TABLE_PRODUCTS + "("
                + COLUMN_ID + " INTEGER PRIMARY KEY," + COLUMN_MESSAGEADDRESS
                + " TEXT," + COLUMN_MESSAGEBODY + " TEXT " + ")";

the above code was running correct but i added another column and it started causing the mentioned error. below is the erroneous code:

String CREATE_PRODUCTS_TABLE = "CREATE TABLE " + TABLE_PRODUCTS + "("
                + COLUMN_ID + " INTEGER PRIMARY KEY," + COLUMN_MESSAGEADDRESS
                + " TEXT," + COLUMN_MESSAGEBODY + " TEXT" + COLUMN_MESSAGETIME + " LONG" + ")";

as you can see, when i added the new column i forgot to include a comma after type TEXT. this means that when this code is executed, there will be syntax error as the compiler will read the last part as:

COLUMN_MESSAGEBODY TEXTCOLUMN_MESSAGETIME LONG

as opposed to:

COLUMN_MESSAGEBODY TEXT, COLUMN_MESSAGETIME LONG

solution: ensure that your syntax is correct and you heed to spaces and commas. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T22:50:36.070

我不确定，但也许您在“ub”和“brutto”字段之前的查询中忘记了“,”

String CREATE_DAY_TABLE = "CREATE TABLE " + TABLE_DAYS + "(" + KEY_ID + " INTEGER PRIMARY KEY," + KEY_DATE + " TEXT," + KEY_HOURS + " INTEGER PRIMARY KEY, " + KEY_UB + " INTEGER PRIMARY KEY, " + KEY_BRUTTO + "整数主键" + ")"; db.execSQL(CREATE_DAY_TABLE);

# jquery - jquery删除不起作用

> ID：15123969
> 
> 赞同：0
> 
> 时间：2013-02-27T22:42:41.710
> 
> 标签：jquery

我正在尝试删除一些 li html 行。

这是html：

![HTML](../Images/3dc305ca953f4a1ac1d609ec54127ead.png)

这是我正在尝试使用的 jquery：

```
$("li").remove(":contains('undefined')"); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:47:10.707

你可以试试：

```
$("li:contains('undefined')").remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:49:48.253

我会这样做：

```
$('li').filter(function() {
    return $(this).find('span').text().indexOf('undefined') != -1;
}).remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:44:11.260

尝试：

```
$("li span:contains('undefined')").remove(); 
```

它在我脑海中起作用:)

* * *

**编辑**这将删除 LI：

```
$("li span:contains('undefined')").parent().parent().remove(); 
```

# django - 是否有支持翻译的 django flatblocks

> ID：15123972
> 
> 赞同：3
> 
> 时间：2013-02-27T22:42:59.853
> 
> 标签：django, internationalization

我真的很喜欢[django-flatblocks](https://github.com/zerok/django-flatblocks)应用程序，但缺少的一件事是国际化支持（即以不同语言定义块的内容）。有没有类似的应用程序提供此功能？

# javascript - ReferenceError：日期未定义

> ID：15123973
> 
> 赞同：1
> 
> 时间：2013-02-27T22:43:08.500
> 
> 标签：javascript, date

我在这里有一些代码，我从“adate”表示的表单中获取值。然后我拆分用户在连字符处输入的字符串，并将每个值分隔为年、月和日，如您所见。我使用这些值来定义一个日期对象。我的控制台正确显示日期，但我也不断收到此错误。我是否错误地定义了日期？我不确定问题是什么。

```
function getFormData() {
    var task = document.getElementById("task").value;
    if (checkInputText(task, "Please enter a task")) return;

    var who = document.getElementById("who").value;
    if (checkInputText(who, "Please enter a person to do the task")) return;

    var adate = document.getElementById("dueDate").value;
    var reString = new RegExp("[0-9]{4}\\-\[0-9]{2}\\-\[0-9]{2}");

    if ( adate.match(reString)) {
    processDate(adate) } 

    else {
     alert("you did not enter the date in the correct format")
    };

    var id = (new Date()).getTime();
    var todoItem = new Todo(id, task, who, date);
    todos.push(todoItem);
    addTodoToPage(todoItem);
    saveTodoItem(todoItem);

    hideSearchResults();
}    

function processDate(adate) {
     var splitArray = new Array();
     splitArray = adate.split("-");
     var year = splitArray[0];
     var month = splitArray[1] - 1;
     var day = splitArray[2];
     var date = new Date(year, month, day);
     console.log(date);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T23:01:13.627

使您的函数返回日期，因为其中的`date`变量对外部不可见：

```
function processDate(adate) {
    var splitArray = new Array();
    splitArray = adate.split("-");
    var year = splitArray[0];
    var month = splitArray[1] - 1;
    var day = splitArray[2];
    return new Date(year, month, day);
} 
```

然后在调用时分配给一个新变量：

```
var date = processDate(adate); 
```

该错误实际上起源于以下行，因为您引用了一个不存在的`date`变量：

```
var todoItem = new Todo(id, task, who, date); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T00:29:47.280

只是一个评论。

RegExp 构造函数通常仅在动态生成表达式时才需要。在您有固定表达式的情况下，使用文字会更简单（因为您不必引用某些字符）。此外，为了测试格式，更合适的方法是，`test`而不是`match`.

如果日期格式为：yyyy-mm-dd，请考虑：

```
var reString = /^\d{4}-\d\d-\d\d$/; // trim leading and trailing white space?

if (reString.test(adate)) {
  processDate(adate);
} 
```

日期字符串验证应该在`processDate`函数中，这可能会根据格式是否不正确或日期无效而引发不同的错误（例如 2013-02-29，它将在您当前的代码中返回 2013-03-01 的日期）。

# java - Java - 找不到构造函数？

> ID：15123975
> 
> 赞同：0
> 
> 时间：2013-02-27T22:43:29.493
> 
> 标签：java

尝试编译时，我的代码无法编译：

```
package ch02.genericStringLogs;

public class DemoGenericLogs {
  public static void main(String[] args) {
    GenericLogInterface<Float> genFloatLog = new LinkedGenericLog<Float>();
    LLGenericNode<Float> node0 = new LLGenericNode<Float>(2.2);
    LLGenericNode<Float> node1 = new LLGenericNode<Float>(3.3);
    LLGenericNode<Float> node2 = new LLGenericNode<Float>(4.4);
    LLGenericNode<Float> node3 = new LLGenericNode<Float>(5.5);
    genFloatLog.insert(node0);
    genFloatLog.insert(node1);
    genFloatLog.insert(node2);
    genFloatLog.insert(node3);

    System.out.println(genFloatLog.size());
    System.out.println(genFloatLog.toString());
    genFloatLog.clear();
    System.out.println(genFloatLog.size());

    GenericLogInterface<String> genStringLog = new LinkedGenericLog<String>();
    LLGenericNode<String> string0 = new LLGenericNode<String>("one");
    LLGenericNode<String> string1 = new LLGenericNode<String>("two");
    LLGenericNode<String> string2 = new LLGenericNode<String>("three");
    LLGenericNode<String> string3 = new LLGenericNode<String>("four");

    System.out.println(genStringLog.size());
    System.out.println(genStringLog.toString());
    genStringLog.clear();
    System.out.println(genStringLog.size());
  }
} 
```

我收到此错误：

```
Error:
    part1/ch02/genericStringLogs/DemoGenericLogs.java:5: cannot find symbol
    symbol  : constructor LinkedGenericLog()
    location: class ch02.genericStringLogs.LinkedGenericLog<java.lang.Float> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:45:34.433

[假设它与您之前的问题](https://stackoverflow.com/questions/15122613/java-compile-time-error-compiler-not-recognizing-method-override/15122657#15122657)中的类相同，那么唯一的构造函数`LinkedGenericLog<T>`就是这个：

```
public LinkedGenericLog(String name) 
```

因此，当您构建一个时，您需要传入一个名称。例如：

```
GenericLogInterface<Float> genFloatLog = new LinkedGenericLog<Float>("Some name"); 
```

如果您不想传入名称，则需要进行更改`LinkedGenericLog`- 添加无参数构造函数。在这种情况下，您希望日志具有什么名称？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:44:50.443

这条线...

```
GenericLogInterface<String> genStringLog = new LinkedGenericLog<String>(); 
```

表示您正在尝试调用无参数构造函数。

如果您遇到该错误，您的`LinkedGenericLog`类不能有无参数构造函数。Java[默认提供了一个](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)，除非您定义了其他接受参数的构造函数。

# exception - Hadoop 作业没有被杀死

> ID：15123977
> 
> 赞同：0
> 
> 时间：2013-02-27T22:43:51.730
> 
> 标签：exception, configuration, hadoop, jobs

我的工作在 map-reduce 步骤之前有一些例外，但工作没有被杀死。如何配置hadoop以使作业在异常后被杀死？

现在调用主类

心跳 心跳

主类调用完成

Oozie Launcher 结束

标准错误日志

```
org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Io exception: Unknown host specified )
    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:82)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:577)
    at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:792)
    at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:815)
    at com.seven.crcs.export.dao.ReportDAOImpl.recreateReportEntity(ReportDAOImpl.java:151)
    at com.seven.crcs.export.dao.ReportDAOImpl.saveActiveUserCount(ReportDAOImpl.java:93)
    at com.seven.crcs.export.ReportJdbcExporter.saveActiveUserCount(ReportJdbcExporter.java:55)
    at com.seven.dataprocessor.oc.jobs.reports.export.day.ExportDailyUserReducer.exportUserCounts(ExportDailyUserReducer.java:32)
    at com.seven.dataprocessor.oc.jobs.reports.export.ExportActiveUser
org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Io exception: Unknown host specified ) 
```

和

```
2013-02-28 06:06:46,487 INFO org.apache.hadoop.mapred.JobClient: Task Id : attempt_201302270945_0181_r_000000_0, Status : FAILED
2013-02-28 06:07:00,600 INFO org.apache.hadoop.mapred.JobClient: Task Id : attempt_201302270945_0181_r_000000_1, Status : FAILED
2013-02-28 06:07:16,650 INFO org.apache.hadoop.mapred.JobClient: Task Id : attempt_201302270945_0181_r_000000_2, Status : FAILED
2013-02-28 06:07:31,731 INFO org.apache.hadoop.mapred.JobClient: Job complete: job_201302270945_0181 
```

但工作完成成功

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:45:04.073

您的工作实际上已终止，但仅在地图任务尝试失败 3 次后，如任务 ID 所示：

*   **尝试**_201302270945_0181_r_000000_0
***   **尝试**_201302270945_0181_r_000000_1***   **尝试**_201302270945_0181_r_000000_2****

 ******您可以通过将[参数](http://hadoop.apache.org/docs/r1.1.1/mapred-default.html) `mapred.map.max.attempts`设置为`1`或使用[JobConf#setMaxMapAttempts(int)JobConf#setMaxMapAttempts](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/JobConf.html#setMaxMapAttempts%28int%29)来限制每个任务的最大尝试次数。

这将导致您的地图任务在第一次异常时失败，从而更快地终止您的工作。******

# html - JSOUP 选择结束标记之后的所有文本，直到指定标记

> ID：15123978
> 
> 赞同：0
> 
> 时间：2013-02-27T22:43:52.220
> 
> 标签：html, parsing, text, extract, jsoup

我在表中的许多表行中有这个 html：

```
.........
<tr class="greycellodd" align="right">
<td align="left">
<input type="checkbox" name="cashInvestment" value="100468057"/>
</td>
<td align="left">Cardcash 
</td>
<td class="nobr">26 Aug 10</td>
<td class="nobr"> 1.00 
</td>
<td class="nobr"> 1.00 
</td>
<td align="right">£</td>
<td class="nobr">0.00 </td>
<td class="nobr">0.00 </td>
<td class="nobr">
<span class="changeupsmall">1.00 </span>
</td>
</tr>
<tr class="greycellodd">
<td align="right"/>
<td class="nobr" colspan="8">VISA</td>
</tr>
<tr class="greycelleven" align="right">
<td align="left">
<input type="checkbox" name="cashInvestment" value="100480214"/>
</td>
<td align="left">Santander
</td>
<td class="nobr">24 Sep 11</td>
<td class="nobr"> 1.00 
....... 
```

我需要提取每个复选框标签之间的所有内容

```
<input type="checkbox" name="cashInvestment" ../> 
```

例子

元素 1：

```
Cardcash 
26 Aug 10
1.00 
1.00 
£
0.00
0.00
1.00
VISA 
```

要素 2：

```
Santander
24 Sep 11
1.00 
....... 
```

我试过了：

```
 Elements Inve = mainFirst.select("input ~ *" ); 
```

和

```
 Elements Inve = doc.select("input"); // gives me nothing as there is no text to the input tag (it has no child). 
```

我还需要获取复选框的值，我知道该怎么做，但如果可能的话，最好同时做：

```
Elements mainTables = doc.select("table.maintable");
for (Element subTable : mainTables){    
  Elements borrowInve = subTable.select("input[type=checkbox][name=cashInvestment]" );
  String attr = test.attr("value");
} 
```

谢谢

编辑：通过检查大小解决：

```
 Elements td = tableRows.get(i).select("td");

            Elements cash = tableRows.get(i).getElementsByAttributeValue("name", attrValue); // check if checkbox is present
            int theSize = cash.size();

            if(theSize ==1){ // this row is not a comment 

                String checkbox = "";
                Element cbox = td.select("input[type=checkbox]" ).first();
                checkbox = cbox.attr("value");
             else if (theSize ==0){ // this row contains a comment
                                  ............. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:10:03.723

我从来没有在 JSOUP 中做过任何事情，但是快速浏览一下文档，可能是这样的：

```
Elements Inve = doc.select(".maintable tr td:not(:has(input))"); 
```

尽管如果您可以向要定位的元素添加一个类可能会更容易。

# debugging - 使用 Matlab 函数 `trisurf` 显示结果

> ID：15123979
> 
> 赞同：1
> 
> 时间：2013-02-27T22:43:52.947
> 
> 标签：debugging, matlab, plot, numerical-methods

我`u`从 Gauss-Siedel（求解 2D 泊松方程）获得了一个解，我想用`trisurf`. 但是，我似乎无法理解它是如何`trisurf`工作的（我尝试过使用它，但没有运气）。我还查看了 Matlab 文档，但我不明白峰值是什么。目前，我有这样的东西（但它不起作用）：

```
ss = a:h:b; %subspace
[X,Y] = meshgrid(ss,ss);
tri = delaunay(X,Y);
Z = peaks(ss);
trisurf(tri,X,Y,Z); 
```

我在哪里插入解决方案值（向量`u`）？`peaks`在这种情况下必须采取哪些类型的价值观？

细节：

*   `a`= 下限
*   `b`= 上限
*   `h`=步长
*   `u`= Gauss-Siedel 的解。它的大小取决于我在网格上评估的点数。解决方案应该收敛，因为它是通过运行`i`多次迭代获得的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T23:24:39.300

首先，让我给你我的输出`whos`

```
 triangle_obj       1x1               540  TriScatteredInterp              
  u                 15x1               120  double                          
  X                 15x1               120  double                          
  Y                 15x1               120  double 
```

试试下面的方法。我认为您可能会发现这对您有用（假设您的所有点都不是共线的）。您可能会因为 TriScatteredInterp 中的 [X, Y] 参数混淆而感到困惑。

```
triangle_obj = TriScatteredInterp([X, Y], u);
figure
trisurf(triangle_obj, X, Y, u); 
```

# java - 合并排序中合并的测试用例

> ID：15123988
> 
> 赞同：4
> 
> 时间：2013-02-27T22:44:25.653
> 
> 标签：java, algorithm, sorting, merge

是否有任何边缘情况或一般情况下我需要测试此功能。我唯一能想到的是，如果要合并的数组之一是空的。我还需要考虑其他测试用例吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T22:51:46.587

对于任何类型，我都会考虑以下情况：

*   空列表
*   已排序的列表
*   反向排序列表
*   由相同元素组成的列表
*   包含骗子的列表

这不仅是为了证明算法，也是为了性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T22:52:50.853

多一点：

*   考虑每个数组中的元素数： 两个数组都有偶数个元素 一个数组有偶数个，而另一个数组有奇数个元素 一个数组中的元素数大于另一个数组中的元素数

*   还要考虑数组中元素的范围 一个数组中的最大元素小于第二个数组中的最小元素 一个数组有重复 两个数组都有相同的元素集，例如（A1：2,4,6,8 和A2: 2,4,6,8)

基本上，这些都擅长在合并时捕捉 for 循环中的一个错误

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-20T20:02:51.273

以下案例我用来测试我的合并排序代码。我想这涵盖了大多数情况。您可以直接复制您的 C 代码并使用它进行测试。

```
//int arr[] = {12, 15, 23, 4 , 6, 10, 35, 28}; //Even number of element
//int arr[]={}; //Empty list 
int *arr = NULL; //Null pointer
//int arr[] = {4, 6, 10, 12, 15, 23, 28, 35}; //already sorted array
//int arr[] = {12, 15, 23, 4 , 6, 10, 35}; //odd length array
//int arr[] = {35, 28, 23, 15, 12, 10, 6, 4}; //descending sorted array input
//int arr[] = {12};//one element
//int arr[] = {12, 4}; // two elements
//int arr[] = {12, 15, 23, 4 , 6, 10, 35, 28, 100, 130, 500, 1000, 235, 554, 75, 345, 800, 222, 333, 888, 444, 111, 666, 777, 60};//large list of elements 
//int arr[] = {12, 15, -23, -4 , 6, 10, -35, 28}; //negative elements
int arr[] = {12, 12, 23, 4 , 6, 6, 10, -35, 28}; //duplicate elements
int arr[] = {12, 12, 12, 12, 12}; //Same element 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T22:52:21.900

考虑`if`代码中的每个语句和循环条件，并尝试找到使条件为真/假的测试用例。如果您发布代码，我们可以讨论可能的测试用例。

# regex - Bash/PHP 通过正则表达式从 HTML 中提取 URL

> ID：15123995
> 
> 赞同：0
> 
> 时间：2013-02-27T22:44:57.453
> 
> 标签：regex, linux, bash

有什么简单的方法可以在 bash/或 PHP 中提取这个 URL？

```
http://shop.image-site.com/images/2/format2013/fullies/kju_product.png 
```

从这个 HTML 代码？

```
<a href="javascript: open_window_zoom('http://shop.image-site.com/image.php?image=http://shop.image-site.com/images/2/format2013/fullies/kju_product.png&pID=31777&download=kju.png&name=13011 KELLYS Kju: 490mm (19.5&quot;)',550,366);"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:50:22.497

在`bash`中，您可以尝试以下操作：

```
sed 's/.*image=\(http:\/\/[^&]*\).*/\1/g' 
```

**更新**：
上面的解决方案执行替换而不是提取。包含模式（必需的 url）的行被模式本身替换。但是，替换不是就地的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T22:54:27.670

使用 perl，您可以进行匹配和捕获

```
perl -n -e 'print "$1\n" if (m/image=(.*?)\&/);' 
```

这将捕获`image=`和下一个之间的所有内容并将其`&`打印出来`$1`。

有关正则表达式的更多信息，请参阅[`perlre`](http://perldoc.perl.org/perlre.html)或[http://www.regular-expressions.info/](http://www.regular-expressions.info/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T22:52:32.477

无论您决定以哪种方式修饰它，您都可以简单地使用等于的分隔符拆分`?image=`，然后`result[1]`使用简单的分隔符拆分您收到的第二个令牌（即 ）`&`。该拆分的第一个结果就是您的答案。

但是，纯正则表达式匹配看起来像：`m#image=(a-z0-9\:/\.\-)&#i`. 您可以使用该正则表达式并将其放在您想要存储结果的任何位置`$1`。尽管很多人认为，您不必匹配行首和行尾来匹配结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T22:55:28.703

尝试这样做：

```
xmllint --html --xpath '//a/@href' file://file.html |
    grep -oP 'image=\Khttp://.*?\.png' 
```

您可以使用 URL 而不是本地文件：

```
http://domain.tld/path 
```

或者，如果您已经提取了要在`$string`变量中解析的行：

```
grep -oP 'image=\Khttp://.*?\.png' <<< "$string" 
```