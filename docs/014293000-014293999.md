# StackOverflow 问答 14293000-14293999

# php - 从浏览器调用 PHP cURL 下载不起作用

> ID：14293002
> 
> 赞同：1
> 
> 时间：2013-01-12T11:43:35.087
> 
> 标签：php, web-applications

我想要一个可以从浏览器访问的 php 脚本，该脚本会将文件下载到我的远程服务器（而不是我的计算机）。这是我从浏览器调用的完整代码 localhost/download.php 但它不起作用（在网络管理器中，我看到正在下载某些东西，但在项目文件夹中我找不到它）：

```
<?  
    function download($url, $referer, $name)
    {
        $path = $name.'.mp3';
        $fp = fopen($path, 'w');
        $ch = curl_init($url);
        curl_setopt($ch, CURLOPT_FILE, $fp);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_HEADER, false);
        curl_setopt($ch, CURLOPT_HTTPHEADER, array(
                    'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:13.5) Gecko/20100101 Firefox/13.4.9\r\n',
                    "Referer: $referer" 
        ));
        $data = curl_exec($ch);
        curl_close($ch);
        fwrite($fp, $data);
        fclose($fp);
    }

    echo 'Please wait it is downloading...<br/>';
    /*$url = $_GET['url'];
    $referer = $_GET['referer'];
    $name = $_GET['name'];*/
    $url = "http://stream.get-tune.net/file/91259796/101538464/3652118538/ee58ddeb905ffa12/Palwan_Halmyradow_-_Sensiz_(get-tune.net).mp3";
    $referer = "http://get-tune.net/?a=music&q=palwan+halmyradow";
    $name = "Palwan Halmyradow - Sensiz";
    download($url, $referer, $name);
?> 
```

但是当我从命令行调用以下命令时它可以工作：

```
php /var/www/idym/download.php 
```

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:57:07.820

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
```

差异可能是由于 cli php 和 apache php 的配置不同造成的。

[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

完整代码：

```
function download($url, $referer, $name)
{
    $path = $name.'.mp3';
    $fp = fopen($path, 'w');
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_FILE, $fp);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array(
                'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:13.5) Gecko/20100101 Firefox/13.4.9\r\n',
                "Referer: $referer" 
    ));
    $data = curl_exec($ch);
    curl_close($ch);
    fwrite($fp, $data);
    fclose($fp);
} 
```

# php - 在php中的函数和文件之间传递变量

> ID：14293007
> 
> 赞同：0
> 
> 时间：2013-01-12T11:44:38.947
> 
> 标签：php, variables

我有一个名为 admin.php 的文件，其中有一个名为 send 的按钮。我想要做的是当我单击它时，使用户页面 user.php 上的链接可见。我怎样才能做到这一点？

我有一个文件，其中包含我的所有函数，名为 functions.php，其中有一个名为 onSubmit($var); 的函数。我用值 $_POST['send'] 初始化变量 $var 是 admin.php 但是当我在文件 user.php 中调用函数时，我无法告诉他变量 $var 是谁，所以我得到 'undefined指数'。

还有另一种方法可以做到这一点吗？

**编辑添加的代码** 这是 admin.php

```
<input type="button" name="send" value="Submit" /><br/>      

require 'functions.php';  
$posted = $_POST['send'];  
onSubmit($posted); 
```

这是 user.php

```
require 'functions.php';  
onSubmit($var);  //here it says undefined index var because it doesn't know who the variable is
if($isSent == 1) { 

<a style="visibility:visible;" href="test3.html" id="test3">Test3</a> <br/>  

} 
```

这是functions.php

```
global $isSent;  
function onSubmit($var) {  
if(isset($var)) {  
$isSent = 1;  
}  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:02:47.543

基本上你需要使用如下会话：

```
if(isset($_SESSION['makeVisible']) && $_SESSION['makeVisible'] == true){
    echo '<button>Button init</button>'; //you could also use html like the comment below.
}
/*
if(condition){?> <!-- this is now html --> <button>Button init</button><?}
*/ 
```

然后在您的管理页面上设置此变量，请使用：

```
if(isset($_POST['submitButton'])){
    $_SESSION['makeVisible'] == true;
} 
```

您还需要一个表格才能使此方法起作用，但还有其他方法，但我更喜欢这个。

```
<form name="buttonMakerThing" method="POST">
    <input name="submitButton" value="Make button init Visible" type="submit"/>
</form> 
```

如果没有`action`表单，则默认将表单信息“发布”到当前页面。使条件`if(isset($_POST))`返回真。
您需要`$_SESSION`在您网站上的每个 php 页面的顶部添加一个声明才能使其正常工作。它必须在每一页的第一行！例如：

```
01: | <?php session_start();
02: |//rest of script; 
```

请更多地`$_SESSIONS`了解`unnsetting`/`destroying`您的会话以及它们的更多用途:) [http://php.net/manual/en/reserved.variables.session.php](http://php.net/manual/en/reserved.variables.session.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T11:48:56.553

如果您有定义函数的functions.php，只需将其包含在admin.php 文件中，然后您就可以从那里调用该函数并传递值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T15:05:13.387

是的，我对缓存做了一些研究，这就是我想出的。这可能不是 100% 正确，但这是一个开始，就像我说过的，我自己从未尝试过，哈哈

在您的 admin.php 中，我将这个函数放在：

```
if(isset($_POST['send'])){
    if($enabled == true){
        $enabled == false;
    }
    else{
        $enabled == true;
    }
     apc_add('enabled',$enabled);
} 
```

现在“获取”我们的`$enabled`变量：

```
$enabled = apc_fetch('enabled'); 
```

然后检查客户端页面中的 var：

```
if($enabled == true){
    echo ' button';
} 
```

现在我唯一没有完全了解的是`apc_`函数的安全性和客户端的使用。我相信它适用于服务器的所有客户端，但我不是 100% 确定。这里的[php手册](http://php.net/manual/en/function.apc-add.php)给出了更好的例子。

这是我想到的方法。但是我再次不确定它的安全性，但我相信你可以找到一些东西来保证它的安全。该视频实际上是[Youtube API](http://www.youtube.com/watch?v=bwDU9WfbGaQ)的教程。但他确实涵盖了将变量保存到缓存文本文件中，这应该对你有用:)

# c++ - C win32 api unicode 到 ascii

> ID：14293013
> 
> 赞同：0
> 
> 时间：2013-01-12T11:45:07.937
> 
> 标签：c++, c, api, winapi, lpcwstr

> **可能重复：**
> [如何将 LPCWSTR 转换为 const char *？](https://stackoverflow.com/questions/4542521/how-do-you-convert-lpcwstr-to-const-char)

我有一个函数可以获取用于 win32 api 使用的 LPCWSTR 字符串。现在我有一个以 ASCII 格式向 IRC 服务器发送数据的函数。所以现在我需要将它转换为ASCII，我没有找到任何解决方案，我只找到了将ASCII转换为UNICODE的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:51:15.050

[WideCharToMultiByte](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374130%28v=vs.85%29.aspx)从 UNICODE 转换为 MBCS。如果您的原始宽字符字符串仅包含可以用 ASCII 表示的字符，那么这将产生一个 ASCII 字符串。您还可以使用内部调用 WideCharToMultiByte 的[wcstombs 。](http://msdn.microsoft.com/en-us/library/5d7tc9zw%28v=vs.80%29.aspx)

无论哪种方式，您都会得到一个`LPSTR`或`char *`（它们是相同的）。

# networking - LAN IP 地址的用途是什么？

> ID：14293016
> 
> 赞同：2
> 
> 时间：2013-01-12T11:45:22.210
> 
> 标签：networking, routing, ip, frame

如果有mac地址，本地IP地址的用途是什么？ARP 将 mac 地址映射到 IP 地址，但我不明白为什么需要它，因为我认为 LAN 上的数据是作为只关心 mac 地址的帧发送的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:32:51.073

很久以前，世界上还有比以太网 LAN 更多的东西，应用程序编写者并不关心您的 PC 是否连接到以太网、令牌环、XNS 网络或拨号。IP 在所有这些之上提供了一层抽象和连贯性，允许应用程序作者忽略它们之间的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T11:48:06.790

如果您想与*不在*局域网（例如 StackOverflow）上的机器交谈，会发生什么。

IP 允许在任何地方路由数据包，而不仅仅是在当前网段的本地路由，尽管现在主要通过以太网*，* IP 也可以在其他底层上同样有效地工作，从而为上层提供一致的视图。考虑到实际上有多少东西是基于 IP（DNS、FTP、SSH、HTTP 等）构建的，这一点至关重要。

机器几乎肯定会缓存 IP 到以太网的详细信息以加快后续传输，因此翻译对 LAN 的影响并没有那么糟糕。

# java - 这个java代码有什么问题？

> ID：14293018
> 
> 赞同：-5
> 
> 时间：2013-01-12T11:45:48.523
> 
> 标签：java

我在[这里遇到了一个 ICPC 问题](http://www.spoj.com/problems/AMR12G/)

问题归结为找到最大值。可以通过在具有 * 和 的矩阵中进行 K 操作来实现。这样我们就可以在一次操作中切换一行中的元素。我首先切换了导致正数或零的行（切换行 2 次给出 0 变化）以递减顺序更改 *。最后，如果左侧有 1 个切换，则切换具有负变化的行中绝对值最小的行。

这是我的代码 - [IDEONE.COM中的代码下面有一些测试用例](http://ideone.com/etDkSF)

```
import java.util.Scanner;

public class Main {

  public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);
    int t = sc.nextInt();
    for (t = t; t > 0; t--) { 
      int n = sc.nextInt();
      int m = sc.nextInt();
      int k = sc.nextInt();
      char[][] array = new char[n][m] ;
      int[] tracker = new int[n];
      int[] trackerl = new int[n];
      int i,j;
      for (i = 0; i < n; i++) {
        String temp = sc.next();
        for (j = 0; j < m; j++) {             
          array[i][j] = (temp.charAt(j));  
        }   
      }
      int light = 0, diamond = 0;

      for (i = 0; i < n; i++) {
        for (j = 0; j < m; j++) {
          if (array[i][j] == '*') {
            diamond++;
          }     
        }
        tracker[i] = diamond;
        diamond = 0;
      }

      int a, b;
      int temp;
      int sortTheNumbers = n;

      for (a = 1; a < sortTheNumbers; a++) {
        for (b = 0; b < sortTheNumbers-a; b++) {
          if (tracker[b] > tracker[b + 1]) {
            temp = tracker[b];
            tracker[b] = tracker[b + 1];
            tracker[b + 1] = temp;
          }
        }
      }

      for (i = 0; i < n; i++)
        trackerl[i]=m-tracker[i];

      int br = 0;
      try {
        if (m % 2 == 0) {
          for ( i = 0; i <= n - 1; i++)
            if (tracker[i] > (m) / 2)
              br++;  
        }
        if (m % 2 !=0 ) {
          for (i = 0; i <= n - 1; i++)
            if (tracker[i] >= (m + 1) / 2)
              br++;
        }
      } catch (Exception e) {
      }

      int ans = 0;
      try {
        if (br >= k) {
          for (i = n - 1; i > (n - 1 - k); i--)
            ans += tracker[i];

          for (i = (n - 1 - k); i >= 0; i--)
            ans += trackerl[i];       
        }

        if (br < k) {
          if (br != 0 && br != n) {
            for (i = n - 1; i > (n - br); i--) {
              ans += tracker[i];
              k--;
            }

            int pass1 = 0, pass2 = 0;
            if (k % 2 == 0)
              pass1 = Math.max(tracker[(n - br)] + tracker[(n - br - 1)],
                                        trackerl[(n - br)] + trackerl[(n - br - 1)]);
              if (k % 2 != 0)
                pass2 = Math.max(tracker[(n - br)] + trackerl[(n - br - 1)],
                                          trackerl[(n - br)] + tracker[(n - br - 1)]);
                // System.out.print("Hp" + tracker[(n - br)]);
              }

              ans += Math.max(pass1, pass2);
              for (i = (n - 2 - br); i >= 0; i--)
                ans += trackerl[i];
              }
              if (br != 0 && br == n) {
                for (i = n - 1; i > (n - br); i--) {
                  ans += tracker[i];
                  k--;
                }
                if (k % 2 != 0) {
                  ans += tracker[(n - br)];
                }
                if (k % 2 == 0) {
                  ans += trackerl[(n - br)];
                }
                for (i = (n - 1 - br); i >= 0; i--) {
                  ans += trackerl[i];
                }        
              }
              if (br == 0) {
                if (k % 2 != 0) {
                  ans += tracker[(n - 1)];
                }
                if (k % 2 == 0) {
                  ans += trackerl[(n - 1)];
                }
                for (i = (n - 2); i >= 0; i--) {
                  ans += trackerl[i];
                }
              }
            }
          } catch (Exception e) {
          }
          System.out.println(""+ans);
        }
      }
    } 
```

无论我选择哪个测试用例都能给出正确答案。正如您从链接中看到的那样，我在测试用例中保持了多样性。代码仍然不正确，因为法官不接受它。我真的找不到缺陷在哪里。是在我的代码中还是在我的逻辑中？请为我指出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:40:40.413

写代码和写论文一样，有语法、拼写、标点符号等规则，使代码可读，要点清晰。研究这些*并*编写清晰的代码是有回报的，不仅对需要阅读您代码的其他人，对您也是如此（您会看到更多自己的错误）。

我将指出我在格式化代码时遇到的一些项目。（示例来自内存，而不是您的代码）

```
if(x=3;y>(2-2-x);y++) 
```

不要写这样的一行，因为

1.  **if**不是一个函数，并且选择“if(”而不是“if (”使它看起来更像一个函数。关键字**while**也是如此。

2.  将多个算术运算字符串（尤其是 '+' 和 '-'）放在很长的一行中（如 "(2-2-x)" 会混淆 '-' 字符可以扮演的双重角色，你会更好放入空格“（2 - 2 - x）”以使读者意识到我们正在处理多个减法，没有一元否定运算（负数）。

3.  **if**语句需要三个参数（用分号分隔）。在每个参数之后放置空格可以向读者表明它们在“下一个”参数中。支持“if (x=3;y>(2-2-x);y++)”而不是“if (x=3;y>(2-2-x);y++)”。

在接下来的例子中

```
if(x=3;y>(2-2-x);y++) 
  {x=3;y=2;} 
```

下一行的括号会产生阅读理解问题。

1.  它们会遇到与 if 语句后没有括号相同的格式问题。通过将整个块放在一行上，您会混淆块和行，并且任何行重新排序都会极大地影响程序的运行。这是不好的。要解决此问题，请支持“if (x = 3; y >(2 - 2 - x); y++) {”。

2.  单行上有一个复合语句，它模仿了它上面的 if 语句的格式，这可能会使读者误以为这是后续嵌套 if 语句的一部分。将两个赋值语句放在各自的行上更具可读性。

3.  您将块的末尾绑定到一个语句，该语句将块边界与特定操作耦合。通常需要更新他们的代码，并且语句和块的结尾应该在程序的生命周期内连接的可能性很小。倾向于将块分隔符的结尾放在非语句行上。

上述所有要点一起使用时，代码看起来像

```
if (x = 3; y > (2 - 2 - x); y++) {
  x = 2;
  y = 3;
} 
```

经过一些简单的格式化后，很明显你有多个“如果这个，那么那个”块。很明显，这些块中的很多都遵循一种模式，“如果这样，那就那样。如果不是这样，那就那样”。该语言具有处理这种模式的内置能力，其中“else”块附加到先前的 if 块。

（直接来自您的代码的示例）

```
 if (k % 2 != 0) {
          ans += tracker[(n - 1)]
        }
        if (k % 2 == 0) {
          ans += trackerl[(n - 1)];
        } 
```

可以写得更干净

```
 if (k % 2 != 0) {
          ans += tracker[(n - 1)]
        } else {
          ans += trackerl[(n - 1)];
        } 
```

或者，使用重新排序来强调平等而不是不平等

```
 if (k % 2 == 0) {
          ans += tracker1[(n - 1)]
        } else {
          ans += tracker[(n - 1)];
        } 
```

可以继续下去，但是在您进行了这样的更改之后，您的代码实际上是从一个更好的地方开始的，因此在完成一些基础知识之前，谈论使您的代码可读的更高级别的技术是没有意义的。即便如此，我还是建议您使用完整的单词来描述变量名称，以尝试描述变量的用途。

祝你好运，在我重新格式化的过程中，我可能剪掉了一个结束块分隔符（它们不匹配），或者它可能一开始就不存在（不像人们可以检查未格式化的版本）。

# c# - 我如何对出现在硬盘上的目录进行排序？

> ID：14293022
> 
> 赞同：2
> 
> 时间：2013-01-12T11:46:35.930
> 
> 标签：c#

在我的硬盘上，我有例如：

目录 1 目录 2 目录 3 目录 4 .....

我的代码是：

```
DirectoryInfo dInfo = new DirectoryInfo(AutomaticsubDirectoryName);
DirectoryInfo[] subdirs = dInfo.GetDirectories(); 
```

所以`subdirs`我得到了所有目录，但它们的顺序与我的硬盘上的顺序不同。我怎样才能对它们进行排序，以便它们`subdirs`按照它们在我的硬盘上的顺序排列？

* * *

解决了这个问题：

```
DirectoryInfo[] subdirs = dInfo.GetDirectories().OrderBy(d =>
                    {
                        int i = 0;
                        if (d.Name.Contains("Lightning ") && d.Name.Contains(" Length") && d.Name.IndexOf("Lightning ") < d.Name.IndexOf(" Length"))
                        {
                            string z = d.Name.Substring(("Lightning ").Length);
                            string f = z.Substring(0, z.IndexOf(" Length"));
                            if (Int32.TryParse(f, out i))
                                return i;
                            else
                                return -1;
                        }
                        else
                            return -1;
                    }).ToArray(); 
```

工作完美。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:56:03.793

Windows 使用的字符串比较功能公开给大家使用。因此，您需要一点点 pinvoke 才能获得与 Explorer 使用的完全相同的排序顺序。将其包装在 IComparer<> 中，这样您就可以将其传递给 Array.Sort() 或 OrderBy() Linq 子句：

```
using System;
using System.Collections.Generic;
using System.Runtime.InteropServices;

public class LogicalComparer : IComparer<string> {
    public int Compare(string x, string y) {
        return StrCmpLogicalW(x, y);
    }
    [DllImport("shlwapi.dll", CharSet = CharSet.Unicode, ExactSpelling = true)]
    private static extern int StrCmpLogicalW(string s1, string s2);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T11:52:27.373

假设您正在谈论文件系统以及诸如 Windows Explorer 之类的软件如何显示名称，我想您正在谈论对名称进行自然排序。在这里阅读：http: [//www.codinghorror.com/blog/2007/12/sorting-for-humans-natural-sort-order.html](http://www.codinghorror.com/blog/2007/12/sorting-for-humans-natural-sort-order.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T11:52:37.863

`Craetion time`是它们如何出现在硬盘上的合理标准。

```
DirectoryInfo[] subdirs = dInfo.GetDirectories().OrderBy(d => d.CreationTime).ToArray(); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-14T16:33:04.690

解决了这个问题：

```
DirectoryInfo[] subdirs = dInfo.GetDirectories().OrderBy(d =>
                    {
                        int i = 0;
                        if (d.Name.Contains("Lightning ") && d.Name.Contains(" Length") && d.Name.IndexOf("Lightning ") < d.Name.IndexOf(" Length"))
                        {
                            string z = d.Name.Substring(("Lightning ").Length);
                            string f = z.Substring(0, z.IndexOf(" Length"));
                            if (Int32.TryParse(f, out i))
                                return i;
                            else
                                return -1;
                        }
                        else
                            return -1;
                    }).ToArray(); 
```

工作完美。

# arrays - 如何将数据库查询结果添加到数组

> ID：14293023
> 
> 赞同：0
> 
> 时间：2013-01-12T11:46:44.327
> 
> 标签：arrays, vb.net

我正在尝试从 Access 数据库中选择字符串值，然后将它们放入字符串数组中，以便我可以对数组执行循环语句。

但是我不知道如何将查询结果放入数组中。我知道如何查询数据库，但我需要的只是如何将结果放入数组中。

我的选择语句是`Select motonum from moto`. 我想放入`motonum`一个数组。

读取数据的整个代码是：

```
connect2()
If Not cnn2.State = ConnectionState.Open Then
    'open connection
    cnn2.Open()
    'MessageBox.Show("chk2")
End If
cmd5.Connection = cnn2
cmd5.CommandText = "Select motonum from moto"
myData5 = cmd5.ExecuteReader
While myData5.Read
    'code to return results here
End While` 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T12:46:24.680

有许多不同的方法可以解决这个问题，具体取决于项目的实际需求。首先，我会问你是否真的需要一个字符串数组作为返回类型。在大多数情况下，数组不如 List(Of String) 或其他实现 IEnumerable 的类型有用。

这里有两个选项，都涉及 List(Of String)。但是，将 List 返回给调用者，然后调用者可以选择使用 List 类型的许多有用方法来处理数据：

这是我推荐的方式：

```
Public Function getListOfMotonum() As List(Of String)
    Dim SQL As String = "SELECT motonum FROM moto"

    Dim output As New List(Of String)()

    ' Set the connection string in the Solutions Explorer/Properties/Settings object (double-click)
    Using cn = New SqlConnection(Properties.Settings.[Default].MyConnectionString)
        Using cmd = New SqlCommand(SQL, cn)
            cn.Open()

            Try
                Dim dr = cmd.ExecuteReader()
                While dr.Read()
                    output.Add(dr("motonum").ToString())
                End While
            Catch e As SqlException
                ' Do some logging or something. 
                MessageBox.Show("There was an error accessing your data. DETAIL: " & e.ToString())
            End Try
        End Using
    End Using

    Return output

End Function 
```

这是一个使用此函数输出的简单代码示例：

```
Private Sub PrintListToConsole()
    Dim MyMotonumList = Me.getListOfMotonum()

    For Each item As String In MyMotonumList
        Console.WriteLine(item)
    Next
End Sub 
```

如果您的项目需要一个字符串数组，则方法可能会有所不同。您可以从同一个函数返回一个字符串，只需稍作修改：

```
' Change the return type in the function signature:
Public Function getArrayOfMotonum() As String()
    Dim SQL As String = "SELECT motonum FROM moto"
    Dim output As New List(Of String)()

    '  . . . Same Data Access code as above:

    ' Just use the .ToArray method of the List class HERE:
    Return output.ToArray()

End Function 
```

或者，您可以在客户端代码中使用相同的方法，使用返回列表的原始函数：

```
Private Sub PrintArrayToConsole()
    Dim MyMotonumArray = Me.getArrayOfMotonum()

    For Each item As String In MyMotonumArray 
        Console.WriteLine(item)
    Next
End Sub 
```

从函数中返回 List 提供了一种更灵活的返回类型，以及许多有用的方法。

作为旁注，请允许我在消耗数据访问资源时推荐 Using 块。这将为您处理 Connection 和 Command 对象的正确拆卸和处置。

# php - 可选的空格正则表达式

> ID：14293024
> 
> 赞同：57
> 
> 时间：2013-01-12T11:46:47.820
> 
> 标签：php, regex, preg-match, removing-whitespace

我在尝试忽略某些字符之间的空格时遇到问题。我已经在谷歌上搜索了几天，似乎找不到正确的解决方案。

这是我的代码：

```
// Get Image data
preg_match('#<a href="(.*?)" title="(.*?)"><img alt="(.*?)" src="(.*?)"[\s*]width="150"[\s*]height="(.*?)"></a>#', $data, $imagematch);
$image = $imagematch[4]; 
```

基本上这些是我的一些场景：

```
 <a href="/wiki/File:Sky1.png" title="File:Sky1.png"><img alt="Sky1.png" src="http://media-mcw.cursecdn.com/thumb/5/56/Sky1.png/150px-Sky1.png"width="150" height="84"></a> 
```

（注意 width="" 和 src="" 之间没有空格）

和

```
<a href="/wiki/File:TallGrass.gif" title="File:TallGrass.gif"><img alt="TallGrass.gif" src="http://media-mcw.cursecdn.com/3/34/TallGrass.gif" width="150"height="150"></a> 
```

（注意 width="" 和 height="" 之间没有空格。）

无论如何要忽略这些字符之间的空格吗？因为我不是正则表达式专家。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-01-12T11:49:43.607

`\s?`如果可以允许空格，则添加一个。

**\s**代表空白

**?** 表示前面的字符可能出现一次，也可能不出现。

如果允许多个空格并且是可选的，请使用`\s*`.

*****表示前面的字符可以出现零次或多次。

```
'#<a href\s?="(.*?)" title\s?="(.*?)"><img alt\s?="(.*?)" src\s?="(.*?)"[\s*]width\s?="150"[\s*]height\s?="(.*?)"></a>#' 
```

允许属性名称和 = 之间的可选空格。

如果你想在`=`也后面有一个可选的空格，在它后面加上一个`\s?`。

同样，无论您有可选字符，`?`如果最大出现次数为**1**或`*`如果最大出现次数不受限制，则可以在可选字符之后使用。

而您的实际问题是`[\s*]`导致出现**空格**或*****作为包含在其中的字符`[`并且`]`是字符类。字符类允许其任何成员出现一次（因此`*`从其中删除），并且如果您在字符类中的任何字符之后附加量词（ , 等），则`?`可以`+`根据量词出现。`*``]`

# objective-c - dispatch_async vs dispatch_sync 执行顺序

> ID：14293027
> 
> 赞同：9
> 
> 时间：2013-01-12T11:47:19.257
> 
> 标签：objective-c, concurrency, sync, grand-central-dispatch, dispatch-async

我创建了一个串行调度队列：

```
dispatch_queue_t serialQueue = dispatch_queue_create("com.unique.name.queue", DISPATCH_QUEUE_SERIAL); 
```

我想使用这个串行队列来确保类访问的线程安全，同时自动异步执行不需要返回调用线程的工作。

```
- (void)addObjectToQueue:(id)object
{
    dispatch_async(serialQueue, ^{
        // process object and add to queue
    }); 
}

- (BOOL)isObjectInQueue:(id)object
{
    __block BOOL returnValue = NO;
    dispatch_sync(serialQueue, ^{
        // work out return value
    });
    return returnValue;
} 
```

如果我调用 addObjectToQueue: 方法，然后立即调用 isObjectInQueue: 方法，它们是否保证以相同的顺序执行，或者 isObjectInQueue 会/可以先执行吗？

换句话说，除了不阻塞调用线程之外，dispatch_async 的执行是否与 dispatch_sync 完全相同（立即调度块）？

我见过类似的问题，答案是双向的，所以我正在寻找一个明确的答案，最好有 Apple 文档支持。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-12T12:49:26.983

> 它们是否保证以相同的顺序执行？

是的。

> 会/可以`isObjectInQueue`先执行吗？

是的。

两个答案都是肯定的原因是你应该考虑线程。这大概就是您首先使用串行队列的原因。您正在安全地访问该队列线程。

基本上，这些块将按照它们被放入串行队列的顺序执行。这是 100% 保证的。但是，如果多个线程都在努力解决这个问题，那么一个线程可能会在另一个线程有机会添加之前先从队列中读取某些内容。

> 换句话说，`dispatch_sync`除了不阻塞调用线程之外，dispatch_async 的执行是否与（立即调度块）完全相同？

这是正确的。在这两种情况下，块都被添加到队列中。它会立即添加。`dispatch_sync`只是在返回之前等待块完成，而`dispatch_async`立即返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T12:47:14.817

我想你的问题是，主线程会在`dispatch_async`仍在执行队列操作的同时继续运行吗？我认为不会，因为这值得明确提及。如果有的话，我在[dispatch_async.3](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/dispatch_async.3.html)中发现了这个，这表明情况就是这样：

> 从概念上讲，dispatch_sync() 是一个方便的 dispatch_async() 包装器，它添加了一个信号量来等待块的完成，以及一个包装器来表示它的完成。

实际上，如果您按照[queue.c 中 dispatch_async](http://libdispatch.macosforge.org/trac/browser/trunk/src/queue.c#L1322)的源代码进行操作，您会看到该块在前台排队，只有在那之后，执行才会返回到调用`dispatch_async`. 因此，如果队列是串行的，那么**来自同一个线程的**`dispatch_async`后跟将按顺序对块进行排队。`dispatch_sync`

 **因为`dispatch_sync`将阻塞直到块（以及串行队列中的所有块）执行完毕，所以你的代码是正确的。`isObjectInQueue:`如果之前添加的对象在队列中，将正确报告。

**编辑**：在多线程环境中，我将上面的代码编写为：

```
- (void)addObjectToQueue:(id)object
{
    dispatch_barrier_async(_queue, ^{
        // process object and add to queue
    });
}

- (BOOL)isObjectInQueue:(id)object
{
    __block BOOL returnValue = NO;
    dispatch_sync(_queue, ^{
        // work out return value
    });
    return returnValue;
} 
```

因为可以在任何时候推迟每个方法的执行以支持另一个线程。**

# c# - Launching the Windows Store listing from Win RT / Windows 8 app

> ID：14293036
> 
> 赞同：1
> 
> 时间：2013-01-12T11:48:55.957
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml

On Windows Phone there's a marketplace review task.

Is there **any** way to implement the equivalent functionality in WinRT apps?

I realize that there's the "rate and review" button in the Charms bar, however, this is not what I need, as I want to integrate a button inside the app to launch the review UI.

It may seem trivial, however, this is one of the most important requirements!

This is not a duplicate of [is there an equivalent of wp7's marketplacereviewtask for windows 8 / winrt / metro style?](https://stackoverflow.com/questions/10578342/is-there-an-equivalent-of-wp7s-marketplacereviewtask-for-windows-8-winrt-me) because the questioner was happy with the Charms bar method.

thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T13:33:18.523

This can be done in C# this way:

```
Windows.System.Launcher.LaunchUriAsync(new Uri("ms-windows-store:REVIEW?PFN=PACKAGENAME")); 
```

Where Package Name is to be replaced with yours, which can be found in Package.appxmanifest under the packaging tab.

# sql-server - 如何在sql中使用exec字符串分配变量？

> ID：14293040
> 
> 赞同：5
> 
> 时间：2013-01-12T11:49:09.250
> 
> 标签：sql-server

我想用从“exec（字符串）”返回的内容分配一个变量，但在语法上遇到了困难。下面是一些工作代码...

```
declare @iGeographyLevel int = 2
declare @iGeographyLevelID int = 64
declare @sGeographyName varchar(30)

declare @sSQL nvarchar(max)

set @sSQL = '
select Name
    from GeographyLevel'+ cast(@iGeographyLevel as varchar(5))+'
    where GeographyLevel'+ cast(@iGeographyLevel as varchar(5)) + 'ID = '+ cast(@iGeographyLevelID as varchar(5))

exec (@sSQL) 
```

我想做类似...

```
set @sGeographyName  = exec (@sSQL) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T14:27:33.383

[`sp_executesql`](http://msdn.microsoft.com/en-gb/library/ms188001.aspx)是这样做的最好方法。

```
DECLARE @iGeographyLevel INT = 2
DECLARE @iGeographyLevelID INT = 64
DECLARE @sGeographyName VARCHAR(30)
DECLARE @sSQL NVARCHAR(max)

SET @sSQL = '
SELECT @sGeographyName = Name
FROM   GeographyLevel' + cast(@iGeographyLevel AS VARCHAR(5)) + '
WHERE  GeographyLevel' + cast(@iGeographyLevel AS VARCHAR(5)) + 'ID = @iGeographyLevelID'

EXEC sp_executesql
  @sSQL,
  N'@iGeographyLevelID INT, @sGeographyName VARCHAR(30) OUTPUT',
  @iGeographyLevelID,
  @sGeographyName OUTPUT

SELECT @sGeographyName 
```

不过这里对动态 SQL 的要求有点臭。不知道为什么您不只有一个`Geography`带有列的表（或者如果表*必须*`Level`分开，则可能是分区视图）此外，这些天[广泛不鼓励](https://stackoverflow.com/q/111933/73226)使用匈牙利表示法来表示变量名。

# unix - 在监禁进程后使用 execlp

> ID：14293045
> 
> 赞同：0
> 
> 时间：2013-01-12T11:50:25.557
> 
> 标签：unix, exec, posix, chroot

基本上我想在一个被监禁的进程中执行一个 shell 命令。当我尝试以下代码（作为普通用户和 root 用户）时，它没有产生任何输出

```
if(!(pid=fork)){
   chroot("./jail_folder");
   chdir("/");

   execl("/bin/ls","ls",NULL);
} 
```

我尝试了 perror() 函数，它给了我一个“没有这样的文件或目录”错误。是否可以在被监禁的进程中运行 shell 命令？如果是这样，我们该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:54:14.313

是的，这是可能的，但你必须让它可以被监狱访问（通常，这意味着将所需的程序 + 它的所有库复制到监狱；符号链接不起作用，硬链接是可以的）。否则，如果您将程序限制在目录树的一部分而没有`/bin`，则无法访问也就不足为奇了`/bin/ls`。

# playframework-1.x - 播放框架1.2.5 Websocket

> ID：14293046
> 
> 赞同：0
> 
> 时间：2013-01-12T11:50:26.970
> 
> 标签：playframework-1.x

而是使用 EventStream 而不是 ArchivedEventStream，当我运行命令警报（通知）消息时，转到除原始发件人之外的所有连接的套接字，我也可以发送给原始发件人。

这是我的模型和控制器，使用 WebSocket

事件模型

```
public class EventModel {

// ~~~~~~~~~ Let's chat! 

final EventStream<EventModel.Event> events = new EventStream<EventModel.Event>(100);

/**
 * Get the event
 */

public EventStream<EventModel.Event> getEventStream() {
    return events;
}
/**
 * A user say something on the room
 */

public void _alert(Notification notification){
    if(notification == null) return;
    events.publish(new EventModel.NotificationEvent(notification));
}

// ~~~~~~~~~ Events

public static abstract class Event {

    final public String type;
    final public Long timestamp;
    public boolean sended;

    public Event(String type) {
        this.sended = false;
        this.type = type;
        this.timestamp = System.currentTimeMillis();
    }

}

public static class NotificationEvent extends EventModel.Event{
    public final Notification notification;
    public NotificationEvent(Notification notification) {
        super("notification");
        this.notification = notification;
    }

    public User getReceiver(){
        return notification.receiver;
    }
}

// EventModel factory

static EventModel instance = null;
public static EventModel get() {
    if(instance == null) {
        instance = new EventModel();
    }
    return instance;
}

//Alert notification
public static void alert(Notification notification){
    get()._alert(notification);
}

} 
```

这是控制器

```
public class MyWebSocket extends RootController {

public static class WebSocket extends WebSocketController {

    public static void echo(Long userId) {
        //Security
        User user = User.findById(userId);   

        EventModel eventCentre = EventModel.get();

        // Socket connected, join the chat room
        EventStream<EventModel.Event> eventStrean = eventCentre.getEventStream();

        // Loop while the socket is open
        while(inbound.isOpen()) {

            // Wait for an event (either something coming on the inbound socket channel, or ChatRoom messages)

            Either<WebSocketEvent,EventModel.Event> e = await(Promise.waitEither(
                inbound.nextEvent(), 
                eventStrean.nextEvent()
            ));

            //Handle if get any notification 
            for(EventModel.NotificationEvent event: ClassOf(EventModel.NotificationEvent.class).match(e._2)) {

                if(!event.getReceiver().equals(user)) continue;
                outbound.send(event.notification.toJson());
            }      

            // Case: The socket has been closed
            for(WebSocketClose closed: SocketClosed.match(e._1)) {
                disconnect();
            }   
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:39:37.870

要发送给原始发件人，请删除或注释掉这一行：

```
if(!event.getReceiver().equals(user)) continue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T14:27:29.030

需要注意的一个小问题

[https://github.com/playframework/play1/pull/709](https://github.com/playframework/play1/pull/709)

# c - 将值放入c中的数组

> ID：14293048
> 
> 赞同：0
> 
> 时间：2013-01-12T11:50:44.337
> 
> 标签：c, arrays, file-io

我有一个程序，目前可以计算出分子在特定速度和温度下的概率。它们需要打印到输出文件中，因为其中一个变量每次增加 5。
例如：

```
for
    (tempK=173;tempK<1173;tempK+=5)
        {
        power=(mass/(2*pi*k*tempK));
        prob = ((4*pi)*pow(power,threeovertwo))*(exp((-mass*(pow(speed,two))/(2*k*tempK))));

        fprintf (fp,"Molecular Name:%s Molecular Mass:%lg\n Probability: %lg Temperature:%lg Speed:%lg\n",name,mass,prob,tempK,speed); 
```

这在一定程度上有效，但唯一的问题是 Molecular Name: 和 Molecular Mass: 在每一行之间重复，给出如下输出文件：

```
Molecular Name:Hydrogen Molecular Mass:2
 Probability: 0 Temperature:1158 Speed:50
Molecular Name:Hydrogen Molecular Mass:2
 Probability: 0 Temperature:1163 Speed:50
Molecular Name:Hydrogen Molecular Mass:2
 Probability: 0 Temperature:1168 Speed:50 
```

这是不可取的，有谁知道阻止这种情况发生的方法，可能是通过将所有变量（“温度”）等输入到数组中，然后打印数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:54:30.020

在循环外打印分子量和名称：

```
 fprintf (fp,"Molecular Name:%s Molecular Mass:%lg\n",name,mass);

 for(tempK=173;tempK<1173;tempK+=5)
 {
    power=(mass/(2*pi*k*tempK));
    prob = ((4*pi)*pow(power,threeovertwo))*(exp((-mass*(pow(speed,two))/(2*k*tempK))));

    fprintf (fp,"Probability: %lg Temperature:%lg Speed:%lg\n",prob,tempK,speed);
 } 
```

# android - 运行脚本

> ID：14293049
> 
> 赞同：1
> 
> 时间：2013-01-12T11:50:51.963
> 
> 标签：android, python, python-3.x

我有一个 Python 脚本正在运行，它检查是否为我下学期想上的一门课打开了空位，然后它给我发电子邮件。
**问题**
我不能一直使用我的笔记本电脑。是否有任何资源可以让我存放我的脚本并让它在某个服务器上运行。

或者更好的是，无论如何都可以在 Android 手机上运行这样的脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:53:49.300

如果您正在抓取网页，则可以使用[scraperwiki](https://scraperwiki.com/)。它允许您在他们的服务器上免费运行爬虫代码。（[lxml](http://lxml.de/)也可以在那里导入！）您可以设置希望脚本运行的频率。

# jquery-ui - 脚本不适用于“if”中的不同位数

> ID：14293050
> 
> 赞同：1
> 
> 时间：2013-01-12T11:51:08.767
> 
> 标签：jquery-ui, jquery, draggable, jquery-ui-sortable

我正在使用 jquery-ui 来组织 div 并将更改保存回服务器上。

为此，我从直接涉及的 2 个 div 中读取了一些信息，并通过 ajax 将它们发送到另一个页面中。

所以，我有一个代码，在拖动 dom 更新后，div 的属性“pos”被移动，div 的属性在它之后。如果第一个的 attr "pos" 是第二个的 >，它会触发这个脚本。

```
if (ui.item.attr('pos') > ui.item.next().attr('pos'))
        {
            $.ajax({
            type: "POST",
            url: "muovi.php",
            data: { in:ui.item.attr('ids'), pos1:ui.item.attr('pos'), out:ui.item.next().attr('ids'), pos2:ui.item.next().attr('pos')},
            success: function(response){

                $.ajax({
                  url: "",
                  context: document.body,
                  success: function(s,x){      ( -> Reload the page )
                  $(this).html(s);
                  }
                });

                $(".overlay").css("visibility","hidden"); (-> to understand if something went wrong)
                }
        });
    } 
```

问题是，如果我有这样的 div：

```
[...]
<div class="game" pos="7" ids="something">
<div class="game" pos="8" ids="something else">
<div class="game" pos="9" ids="~">
<div class="game" pos="10" ids="~">
<div class="game" pos="11" ids="~">
[...] 
```

如果我将位置为 1-9 的 div 移动到位置为 1-9 的 div 上，则不会出现错误，如果位置 10-99 中的 div 相同。但是，如果我尝试将 10-99 的 div 移回 1-9 的 div 上，脚本似乎不起作用。

所以，如果有不同的位数，我就有这个问题。这是否可以在不编辑“pos”字段的情况下解决？问题清楚了吗？我应该添加更多信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:35:55.587

在执行与以下的比较之前，您需要将字符串转换为数字[`parseInt`](http://www.w3schools.com/jsref/jsref_parseint.asp)：

```
if (parseInt(ui.item.attr('pos')) > parseInt(ui.item.next().attr('pos'))) 
```

# java - SAX 的 characters() 方法未解析 Text 节点中的特殊字符

> ID：14293052
> 
> 赞同：2
> 
> 时间：2013-01-12T11:51:53.977
> 
> 标签：java, android, xml, xml-parsing, sax

我正在制作一个使用 SAX 解析器解析 XML 的 android 应用程序。

在 XML 中有标签：

```
<title>Deals &amp; Dealmakers: Technology, media and communications M&amp;A </title> 
```

如您所见，它包含一些特殊的章程，例如`&amp;`

问题是我正在使用 SAX 的隐式方法：

```
@Override
public void characters(char[] ch, int start, int length) throws SAXException{} 
```

在这里，参数 'char[] ch' 应该获取整行`Deals &amp; Dealmakers: Technology, media and communications M&amp;A` 但它只获取“Deals”。

我该如何解决这个问题？

一个问题可能是因为我将 XML 传递给 SAX 解析器的方式。我需要更改编码或格式吗？

目前，我`InputStream`使用以下代码将 XML 作为 & 传递：

```
HttpResponse httpResponse = utils.sendRequestAndGetHTTPResponse(URL);
if (httpResponse.getStatusLine().getStatusCode() == 200) {
    HttpEntity entity = httpResponse.getEntity();
    InputStream in = entity.getContent();
    parseResponse(in);
}

// Inside parseResponse method:
try {
    SAXParserFactory spf = SAXParserFactory.newInstance();
    SAXParser sp = spf.newSAXParser();
    XMLReader xmlReader = sp.getXMLReader();

    MyHandler handler = new MyHandler();
    xmlReader.setContentHandler(handler);
    xmlReader.parse(new InputSource(in));
} catch (Exception e) {
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T11:54:27.107

> 在这里，参数 'char[] ch' 应该获取整行 Deals & Dealmakers: Technology, media and Communications M&A 但它只获取“Deals”。

您似乎假设您将在一个电话中获得整个文本。对此没有任何保证。我强烈怀疑你的`characters`方法会被同一个文本节点多次调用，这对解析器来说是有效的。您需要确保您的代码能够处理该问题。

从[文档](http://docs.oracle.com/javase/7/docs/api/org/xml/sax/ContentHandler.html#characters%28char%5B%5D,%20int,%20int%29)中：

> SAX 解析器可以在单个块中返回所有连续的字符数据，也可以将其拆分为多个块；但是，任何单个事件中的所有角色都必须来自同一个外部实体，以便定位器提供有用的信息。

*您*可以设置一项功能以确保一次性获取所有数据；我不确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T12:08:00.743

我猜 UTF-8 正是问题所在。在文件中，您解析的编码定义为 ISO-8859-1

所以只需尝试以下代码：

```
InputSource is = new InputSource(yourInputStream);
is.setEncoding("ISO-8859-1");
xmlReader.parse(is); 
```

希望这可以帮助。

# c# - 没有 ORM 的数据访问层

> ID：14293053
> 
> 赞同：3
> 
> 时间：2013-01-12T11:52:03.367
> 
> 标签：c#, repository-pattern, data-access-layer

我正在编写 mmorpg 服务器仿真器（爱好项目）并且我已经停止编写数据访问层。问题是我不能使用 ORM（性能问题）。我已经阅读了很多关于 Repository 模式的内容，但它似乎不太适合我的项目，因为我需要以下方法：(player db) GetAllByLevel(...)、GetByName(...) 等。我希望我的应用程序与数据库无关。（我现在使用 sql server，但我想稍后添加对 mysql 的支持）哪种数据访问模式适合我的项目？

对不起，我的英语不好。

# 编辑

还有一个问题。我读过存储库模式在 agreggate 根上运行。我有 3 个表玩家，player_friend 和 player_chest。Player 是一个聚合根，如果我没记错的话，我应该只创建一个存储库 (PlayerRepository)，它可能具有以下方法：GetFriends([player id], ...), GetChest([player id], ...)等等。我对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T06:40:31.293

> 我已经阅读了很多关于 Repository 模式的内容，但它似乎不太适合我的项目，因为我需要以下方法：(player db) GetAllByLevel(...)、GetByName(...) 等。

相反。有很多错误的存储库模式示例（通常是泄漏的抽象）会教你错误。`GetAllByLevel`恕我直言，这是一个很好的方法，因为它非常清楚地描述了该方法的作用。

我写过关于存储库模式的文章：http: [//blog.gauffin.org/2013/01/repository-pattern-done-right/](http://blog.gauffin.org/2013/01/repository-pattern-done-right/)。还请阅读文章开头的抽象链接。

> 问题是我不能使用 ORM（性能问题）。

没问题。存储库模式用于抽象出数据源，无论它是哪种类型。

如果你想使用 vanilla ADO.NET，你可以阅读这篇博文：http: [//blog.gauffin.org/2013/01/ado-net-the-right-way/](http://blog.gauffin.org/2013/01/ado-net-the-right-way/)

> 还有一个问题。我读过存储库模式在 agreggate 根上运行。我有 3 个表玩家，player_friend 和 player_chest。Player 是一个聚合根，如果我没记错的话，我应该只创建一个存储库 (PlayerRepository)，它可能具有以下方法：GetFriends([player id], ...), GetChest([player id], ...)等等。我对吗？

不，我会说 Friends 也是一个根。阅读这篇关于设计聚合的文章：http: [//dddcommunity.org/library/vernon_2011](http://dddcommunity.org/library/vernon_2011)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T12:01:32.100

存储库是要走的路。关键是您可以拥有同一个存储库接口的多个实现，一个用于 sql server，另一个用于 oracle 或 postgresql。您不一定有一个支持所有可能数据库的通用实现（这将非常困难）。

具体实现可以使用具体 dbms 的任何特定功能来满足您的性能标准。

# meteor - Massive Reactivity lag in Meteor App on iOS

> ID：14293059
> 
> 赞同：3
> 
> 时间：2013-01-12T11:52:39.593
> 
> 标签：meteor

The following code is behaving correctly in Chrome and Safari on my MacBook and is reacting immediately. It causes a card to flip in the browser. However on iOS the card is flipping between 3 to 8 seconds after it is tapped.

Utterly perplexed. Could it be that the minimongo instance is just too much for the iPad's processor to handle well, this isn't a big dataset, there is one object with a few properties in the Deck collection and 20 objects with about 10 properties in the Cards collection. All properties are short strings (less than 30 characters). I wouldn't think this would load something with the processing capabilities of an iPad.

Also, I have a Galaxy Nexus and it runs without lag on it. Any solutions?

```
var flip = function (card) {
    var id = card;
    var state = Cards.findOne(id).state;
    if (state == 'flipped')
        Cards.update( id, {$set: {state: 'play'}});
    else
        Cards.update( id, {$set: {state: 'flipped'}});
};

Template.cards.events({
    'click .play': function (event) {
        flip(event.currentTarget.id);
    },
    'click .flipped': function (event) {
        flip(event.currentTarget.id);
    },
    'touchstart .play': function (event) {
        flip(event.currentTarget.id);
    },
    'touchstart .flipped': function (event) {
        flip(event.currentTarget.id);
    }
});

Template.cards.preserve({
  '.card[id]': function (node) { return node.id; },
  '.front[id]': function (node) { return node.id; },
  '.back[id]': function (node) { return node.id; },
  '.dummy[id]': function (node) { return node.id; },
});

Template.cards.cards = function () {
    var deck = Deck.findOne({ active: Session.get("activeDeck") });
    if ( deck != undefined )
        var cards = Cards.find({ deck_id: deck['_id'] }, {sort: {order: 1}}).fetch();
    else cards = {};
    return cards;
}

Template.cards.break = function () {
    return 12;
}

var Cards = new Meteor.Collection("cards");
var Deck = new Meteor.Collection("deck");

Meteor.subscribe("cards");
Meteor.subscribe("deck", function () {
    Session.set("activeDeck", 1);
}); 
```

Also, it is probably worth mentioning that on the page load there is a delay of roughly the same amount of time before any of the cards render at all.

UPDATE: I've gotten into the Dev tools in safari and recorded a timeline for events and it's reporting the following for an event received from another client via the server, there is a similar profile for the client generated change, with more steps, but both feature a roughly 3 second pause after the first Timer Fire on deps.js line 55. (0ms start time is logging as it should on the click or on the change from another client)

```
Type              | Details          | Location            | Start Time | Duration
Event Dispatched  | readystatechange | sockjs-0.3.4.js:791 | 0ms        | 0.0ms
Event Dispatched  | readystatechange | sockjs-0.3.4.js:791 | 0.5ms      | 7.4ms
Event Dispatched  | readystatechange | sockjs-0.3.4.js:791 | 9.0mms     | 1.0ms
Timer Fired       | 4801             | deps.js:55          | 12.1ms     | 927ms
Timer Fired       | 4803             | sockjs-0.3.4.js:848 | 4.18s      | 6.2ms
Timer Fired       | 4804             | deps.js:55          | 4.19s      | 0.0ms 
```

Source is now available at: [https://github.com/SnappyCroissant/memoryapp](https://github.com/SnappyCroissant/memoryapp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:31:23.527

It turned out to be due to the fact the entire `DOM` was being redrawn (as pointed out by @Akshat in the comments above) as I passed an array rather than a cursor to the Handlebars `{{#each}}` loop as discovered in this question: [https://stackoverflow.com/a/14307612/981731](https://stackoverflow.com/a/14307612/981731)

# eclipse - Eclipse 切换 @ 和 "

> ID：14293063
> 
> 赞同：0
> 
> 时间：2013-01-12T11:53:07.760
> 
> 标签：eclipse

每隔几个小时就会发生一次 - 当我按*Shift-2*获得`"`, 并`@`出现时。当我按下*Shift-'*时，它会输入一个`"`（尽管这只会在按下另一个键后出现）。我使用的是英文（而不是美式）键盘。我必须按某种快捷键组合，但我不知道它是什么。当我重新启动 Eclipse 时它就消失了。我可以忍受这个问题，但我宁愿不要！

任何人都知道我不小心使用的快捷方式是什么，所以我以后可以避免/纠正它？

编辑：Windows 7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:01:51.197

如果您的计算机上有多种语言布局，您可能正在打开它们。

您使用的是什么操作系统？如果 Windows 7 快捷方式是 ctrl + shift [http://www.tomshardware.com/forum/10444-63-shortcut-keys-keyboard-language-sharing](http://www.tomshardware.com/forum/10444-63-shortcut-keys-keyboard-language-changing)

如果您使用的是 Windows XP，我认为快捷方式是 alt + shift

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T11:58:07.550

如果您使用的是 Windows，则按 Ctrl + Shift 可更改键盘布局。在您的情况下，它似乎切换到在 Shift + 2 上有 @ 的美国布局

# vb.net - 移动光标位置

> ID：14293066
> 
> 赞同：0
> 
> 时间：2013-01-12T11:53:20.250
> 
> 标签：vb.net, cursor, position, maskedtextbox

如何`MaskedTextBox`在VB.NET中设置a的光标位置从右开始？`MaskedTextBox`在我的表格中是 5 位数字格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:27:26.207

如果我理解你的问题。

```
 MaskedTextBox1.Focus()
    MaskedTextBox1.SelectionStart = 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T10:38:40.113

只有这对我有帮助：

```
private void TxtSeriesTxtNumber_EnterLeave(object sender, EventArgs e) {
            MaskedTextBox txt = sender as MaskedTextBox;
            if (txt.IsNull()) {
                return;
            }
            txt.Select(0, 0);
        } 
```

# node.js - 在 AppFog 上，如何在终端（node.js）上查看控制台日志

> ID：14293070
> 
> 赞同：4
> 
> 时间：2013-01-12T11:53:59.787
> 
> 标签：node.js, debugging, deployment, console, appfog

我希望能够从**AppFog上的****node.js**应用程序在我的终端中查看控制台日志。没有它很难调试。

 **我在文档中看到了一种叫做隧道的东西，这是我要找的吗？
如果是这样，你能解释一下怎么做吗？

下面的屏幕截图来自我的本地机器：如何从我的 AppFog 实例中看到类似的输出？

![控制台登录终端](../Images/e65f5c323bc9116e5a6bfd92fe7695d5.png)

编辑： *@Vadim*在他的回答中提到了命令

```
af logs <your_app_name> 
```

它似乎按预期工作，但它在几秒钟后停止记录，
如何告诉它继续观看？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-12T13:13:53.853

您可以通过`af`工具查看 console.log 输出。输入控制台：

```
af logs <your_app_name> 
```**

# asp.net-mvc - ASP.NET MVC：路由问题

> ID：14293079
> 
> 赞同：0
> 
> 时间：2013-01-12T11:54:39.400
> 
> 标签：asp.net-mvc, asp.net-mvc-4, routing, asp.net-routing

所以我有这个控制器动作：

```
public ActionResult Categories(int typecode)
{
  // code removed
} 
```

这条路线：

```
routes.MapRoute(null,
  "{controller}/{action}/{typecode}",
  new { controller = "Search", action = "Categories", }
); 
```

和这个链接来调用路线：

```
@Html.ActionLink("Ga", "Categories", "Search", new { typecode = 16860 }, null) 
```

如果我使用它，我的 URL 是：`http://localhost:50033/Search/Categories?typecode=16860` 但是如果我将所有出现的`typecode`to更改为`id`，它可以工作并且我得到这个 URL：`http://localhost:50033/Search/Categories/16860`

因此，使用 typecode 我的路线不起作用，而使用 id 则可以。我究竟做错了什么？谢谢！

**编辑：**

我想我不够清楚，但在我的`Global.asax.cs`文件中我有这个：

```
public static void RegisterRoutes(RouteCollection routes)
{
  routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

  routes.MapRoute("TypeCode",
    "Search/Categories/{typecode}",
    new { controller = "Search", action = "Categories" }
  );
} 
```

所以这只是一条路线，而不是`SearchController`我有这个`Categories`动作：

```
public ActionResult Categories(int typecode)
{
  // Irrelevant code removed
} 
```

所以参数和路由参数一模一样，那么我有这个链接：

```
@Html.ActionLink("Ga", "Categories", "Search", new { typecode = 16860 }, null) 
```

也完全使用路由参数，但生成的链接仍然是：`http://localhost:50033/Search/Categories?typecode=16860`所以这不是我想要的。

现在，当我**替换**所有类型代码出现时，如下所示：

```
public static void RegisterRoutes(RouteCollection routes)
{
  routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

  routes.MapRoute("TypeCode",
    "Search/Categories/{id}",
    new { controller = "Search", action = "Categories" }
  );
}

public ActionResult Categories(int id)
{
  // irrelevant code removed
}

@Html.ActionLink("Ga", "Categories", "Search", new { id = 16860 }, null) 
```

有用！所以我**替换了**所有东西，没有更多的路线，我只是`typecode`用`id`.

为什么是这样？任何人都可以帮我解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:09:13.783

> 因此，使用 typecode 我的路线不起作用，而使用 id 则可以。我究竟做错了什么？

问题是您无疑仍然在您的自定义路由*之前*映射了默认路由，即

```
routes.MapRoute(
    "Default",                                              // Route name
    "{controller}/{action}/{id}",                           // URL with parameters
    new { controller = "Home", action = "Index", id = "" }  // Parameter defaults
); 
```

这意味着任何与“controller/action/id”类似的 url 匹配的东西都将被默认路由解析，而不是您的自定义路由。该路由不被识别`typecode`为预期参数的事实意味着它被视为查询字符串参数（因此`?typecode=`）。

如果您想`typecode`更具体地选择要将其映射到哪个控制器并将此路由放在默认路由*之前*，即

```
routes.MapRoute(
    "CategoryItem",
    "{controller}/Categories/{typecode}",
    new { controller = "Search", action = "Categories", typecode = UrlParameter.Optional }
);

routes.MapRoute(
    "Default",                                              // Route name
    "{controller}/{action}/{id}",                           // URL with parameters
    new { controller = "Home", action = "Index", id = "" }  // Parameter defaults
); 
```

这将限制任何开始`controller/Categories/`时只接受 a`typecode`而不是 an 的url `id`- 这应该导致您的 URL 形成为`Search/Categories/12345`. 如果您真的想要，您可以通过控制器进一步限制这一点（只需在路线中替换`{controller}`）`Search`。

但是，考虑到您实际上并没有在任何地方显示在 URL 中，我认为这样做没有任何*真正的*好处。`typecode`如果您希望显示 url，我可以理解，`Search/Categories?typecode=12345`因为它可能比`id`. 就个人而言，我会保留您的默认路线并将您的操作链接更改为：

```
@Html.ActionLink("Ga", "Categories", "Search", new { id = 16860 }, null) 
```

它会给你同样的结果。

**更新**

根据您的更新，我唯一能想到的是您没有在路由中指定默认值，因此可能没有正确选择参数，请尝试：

```
routes.MapRoute("TypeCode",
    "Search/Categories/{typecode}",
    new { controller = "Search", action = "Categories", typecode = "" }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T15:11:41.710

问题已经解决了。我将为遇到相同问题的任何人解释出了什么问题。

我在这个项目中使用 ASP.NET MVC 4，之前我用 MVC 3 创建了一些网上商店。我一直在做的是将路由放入`Global.asax.cs`文件中。现在，当我开始我的项目时，没有`RegisterRoutes()`方法，所以我创建了一个并将我的路线放入其中。刚才我读[了这篇](https://stackoverflow.com/questions/11173936/cant-find-route-name-in-route-collection)文章，它说 MVC 4 在`App_Data/RouteConfig.cs`我签出该文件中注册了它的路由，并看到了`RegisterRoutes()`带有一条路由的方法，默认的带有 as optional parameter `id`。

所以这就是为什么它只使用`id`作为参数，MVC 4 甚至没有查看我的路线`Global.asax.cs`，而只是从`App_Data/RouteConfig.cs`.

我确实将我的路线放在`App_Data/RouteConfig.cs`文件中并且它有效！又学到了一些东西，我很高兴它终于奏效了。我还要感谢@James 对我的帮助。

# javascript - IE8 上的 CKEditor JavaScript 错误

> ID：14293080
> 
> 赞同：0
> 
> 时间：2013-01-12T11:55:03.073
> 
> 标签：javascript, ckeditor

我正在使用 CKEditor 3.6.1 版。当我通过“输入”放置一个空行时，IE8 上出现错误。这是一个例子：

```
writting test

writing test2 
```

如您所见，两个句子之间有一个空行。当我用鼠标单击空行时，我无法集中精力写东西。要集中写空行，我需要使用我的键盘。有人告诉我这是 IE8 上的 JavaScript 错误。当我调试它时，我看到一条错误消息，例如`setSize == undefined`. 有人知道吗？

另外CKEditor版本升级比较麻烦，因为我自定义了很多代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T00:57:28.197

如果您使用旧版本的 CKEditor，则无法为您提供帮助，您已经对其进行了修改，并且您没有向我们提供任何关于您更改了什么、什么错误以及您在哪里的想法。

# android - Google Cloud Messaging：如何显示图标和群组消息

> ID：14293084
> 
> 赞同：1
> 
> 时间：2013-01-12T11:55:19.790
> 
> 标签：android, android-c2dm, coronasdk

我有两个关于 Google Cloud Messaging 的问题：

（我的推送脚本是 PHP，我的客户端是 Corona SDK。）

1.  PUSH ICON：目前，我的推送消息显示在屏幕上，图标看起来像一个倒三角形，里面有一个感叹号。如何让它显示我自己的图标？（我可以从服务器口述图标，还是必须在客户端完成？）

2.  分组消息：目前，如果我向手机发送三条推送消息，它们会单独显示在推送列表中，而在其他应用程序中，后续推送消息都会替换前一条，因此它们仅在列表中占据一个位置。我该如何做到这一点？这是`collapse_key`价值吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:15:42.047

首先，您应该在此线程的标题中指定“Google Cloud Messaging”（或 C2DM），而不是“Android Push”...

1）如果您没有设置任何自定义图标，设备借用，我不知道为什么，来自其他已安装应用程序的图标（有时是 Google Talk 的图标）。您可以使用以下代码从客户端设置自己的图标：

```
 String app_name = context.getString(R.string.app_name);
    int icono = R.drawable.ic_stat_notify;
    long time = System.currentTimeMillis();
    Notification notification = new Notification(icono, app_name, time); 
```

您应该按照官方的[Android 设计指南](http://developer.android.com/guide/practices/ui_guidelines/icon_design_status_bar.html)来设计自定义图标，通常设计三个版本的图标（一个用于运行 v2.2 的设备，另一个用于运行从 v2.2 到 v3.0 的设备，另一个用于运行从 v3 的设备.0)。

2）是的，这正是`collapse_key`目的。

# .net-4.0 - FtpWebResponse GetResponse() 给出“远程服务器返回错误：(550) 文件不可用（例如，找不到文件，无法访问）。”

> ID：14293085
> 
> 赞同：0
> 
> 时间：2013-01-12T11:55:34.030
> 
> 标签：.net-4.0, ftpwebrequest

我有一个带有图片库的 Win Form，它使用 FtpWebRequest 上传图片，但在更改为 .Net 4.0 后，我突然收到 550 错误。上传文件和列出目录时都会发生错误。从我的示例代码中可以看出，我已经从[http://support.microsoft.com/kb/2134299](http://support.microsoft.com/kb/2134299)实现了 MS 解决方案。

我检查了用户名、密码和路径——一切都正确。

不过，我得到一个错误。我浏览了谷歌的每一个解决方案，没有任何回应。

```
SetMethodRequiredCWD();

FtpWebRequest reqFTP = (FtpWebRequest)WebRequest.Create(new Uri(pPath));
reqFTP.Credentials = new NetworkCredential(Properties.Settings.Default.FTPUser, Properties.Settings.Default.FTPPass);
reqFTP.Method = WebRequestMethods.Ftp.ListDirectory;
reqFTP.KeepAlive = false;

FtpWebResponse respFTP = (FtpWebResponse)reqFTP.GetResponse();

Stream respStreamFTP = respFTP.GetResponseStream();
StreamReader streamReader = new StreamReader(respStreamFTP, Encoding.Default); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:10:03.760

我推荐的一种方法是使用例如 Fiddler 监视 ftp-client 和 -server 之间的请求/响应交换。

首先，通过手动使用 Filezilla 等第三方客户端上传文件来记录错误未出现的会话。然后，以您的程序作为客户端记录另一个会话。比较交换的消息可能会产生一些关于什么是错误的见解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T21:22:42.257

尝试启用网络跟踪：http: [//msdn.microsoft.com/en-us/library/a6sbz1dx%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/a6sbz1dx%28v=vs.100%29.aspx)

# c++ - 是否有库函数来确定 IP 地址（IPv4 和 IPv6）在 C/C++ 中是否为私有/本地？

> ID：14293095
> 
> 赞同：1
> 
> 时间：2013-01-12T11:56:48.333
> 
> 标签：c++, c, ip, ip-address, lan

1、给定一个32位整数值，如何准确判断是否为私有IPv4地址。

2、给定一个128位整数值，如何准确判断是否为私有IPv6地址。

考虑到IP地址在不同平台上的字节顺序，每次都写这么一个普通的小函数很容易出错。所以我认为应该有一个库函数，是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:11:57.457

这会让你开始。我没有打扰包括“链接本地”地址范围，但这是一个留给您通过修改下面的代码来完成的练习。

IPV6 略有不同。而且你的问题有点畸形，因为大多数系统都没有原生的 128 位类型。IPv6 地址通常包含在 sockaddr_in6 结构中的 16 字节数组中。

完成此示例所需了解的所有内容都在[此链接](http://en.wikipedia.org/wiki/Private_network)中。

```
// assumes ip is in HOST order.  Use ntohl() to convert as approrpriate

bool IsPrivateAddress(uint32_t ip)
{
    uint8_t b1, b2, b3, b4;
    b1 = (uint8_t)(ip >> 24);
    b2 = (uint8_t)((ip >> 16) & 0x0ff);
    b3 = (uint8_t)((ip >> 8) & 0x0ff);
    b4 = (uint8_t)(ip & 0x0ff);

    // 10.x.y.z
    if (b1 == 10)
        return true;

    // 172.16.0.0 - 172.31.255.255
    if ((b1 == 172) && (b2 >= 16) && (b2 <= 31))
        return true;

    // 192.168.0.0 - 192.168.255.255
    if ((b1 == 192) && (b2 == 168))
        return true;

    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-26T20:11:43.577

来自 uhttpd 来源：

```
bool uh_addr_rfc1918(struct uh_addr *addr)
{
    uint32_t a;

    if (addr->family != AF_INET)
        return false;

    a = htonl(addr->in.s_addr);
    return ((a >= 0x0A000000) && (a <= 0x0AFFFFFF)) ||
           ((a >= 0xAC100000) && (a <= 0xAC1FFFFF)) ||
           ((a >= 0xC0A80000) && (a <= 0xC0A8FFFF));

    return 0;
} 
```

# ember.js - Ember.js :: 无法在视图中呈现 ember.js 模型

> ID：14293102
> 
> 赞同：2
> 
> 时间：2013-01-12T11:57:40.247
> 
> 标签：ember.js, rendering

如果有人能用这个让我摆脱痛苦，我将不胜感激，让我发疯，我知道这将是一件非常简单的事情。

我有一个数组：

# 数据

```
var test = [{"name":"Kober Ltd","town":"Bradford","type":"Z1CA","number":3650645629},
{"name":"Branston Ltd.","town":"Lincoln","type":"Z1CA","number":3650645630}] 
```

我想将此信息呈现为collectionView中的子元素：

# 集合视图

```
App.ThreeView = Ember.CollectionView.extend({
  itemViewClass: Ember.View.extend({    
      click: function(){
        alert('hello')
       },   
    classNames: ['element','foobar'],
    templateName: 'foo'
  })
}) 
```

这是我的控制器：

# 控制器

```
App.ThreeController = Ember.ArrayController.extend({
content: [],
  init: function(){
    var me = this;
    $.each(test,function(k,v){
        var t = App.ThreeModel.create({
            name : v.name,
            town: v.town,
            type: v.type,
            number: v.number
        }) 
        me.addObject( t )
    })
    console.log( me.content )
  }
}) 
```

# 模板：

```
 <script type="text/x-handlebars" data-template-name="application">
        {{outlet}}
    </script>

    <script type="text/x-handlebars" data-template-name="three">
    </script>

    <script type="text/x-handlebars" data-template-name="foo">
        <div class="symbol"> {{ view.content.type }} </div>
        <div class="number"> {{ view.content.number }} </div>
        <div class="name"> {{ view.content.name }} </div>
        <div class="town"> {{ view.content.town }} </div>
    </script> 
```

我正在使用最新的 Ember so...V2 路由器，它使用“三”名称同步所有部分。如果我将数组直接放入视图中，每个都可以工作：

```
App.ThreeView = Ember.CollectionView.extend({
  content: test, // manually added a pure array into view content
  itemViewClass: Ember.View.extend({    
      click: function(){
          alert('hello')
      },    
      classNames: ['element','foobar'],
      templateName: 'foo'
  })
}) 
```

但是当我尝试使用 Ember.js 对象“正确”执行此操作时，我没有得到任何渲染视图（除了一个空的应用程序视图）。

我已经尝试过变通方法，比如从视图添加一个“contentBinding”到控制器只是为了看看我是否可以强制连接但仍然没有。当我使用 Three.js 获取渲染内容并进一步操作时，通过容器渲染视图很重要。

所以，总结一下：我可以在视图中呈现纯数组，但控制器没有传递任何内容。顺便说一句，控制器肯定是建立的，因为我可以在 init 上控制台记录它的内容。如果我更改视图名称，控制器不会被实例化，所以我知道命名空间正在工作。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:14:43.157

我不确定要接受整个问题，但是现在，当您定义控制器时，在 init() 函数中，首先不要忘记调用 this._super() （它将通过类层次结构并调用构造函数）。也许这只是缺少的东西。

编辑：似乎对于新路由器，将视图定义为 CollectionView 不起作用。所以我用普通的 Ember.View 替换它，并在模板中使用 {each} 助手。

```
<script type="text/x-handlebars" data-template-name="three">
  {{each controller itemViewClass="App.FooView" tagName="ul"}} 
</script> 
```

这是一个最小的工作小提琴：http: [//jsfiddle.net/Sly7/qCdAY/14/](http://jsfiddle.net/Sly7/qCdAY/14/)

编辑2：

通过重新阅读问题，并看到您尝试将 CollectionView 内容的属性绑定到控制器，我尝试了它，因为它工作正常:)

[http://jsfiddle.net/Sly7/qCdAY/15/](http://jsfiddle.net/Sly7/qCdAY/15/)

# extjs - Extjs4如何在状态栏上设置图标

> ID：14293104
> 
> 赞同：1
> 
> 时间：2013-01-12T11:57:58.640
> 
> 标签：extjs, extjs4.1, extjs-mvc

我的网格中有一个状态栏。现在我需要在状态栏上添加一个图标并在该图标旁边添加文本。但我可以在状态栏上设置文本而不是图标。谁能帮我解决这个问题？！下面是我的代码：

```
weekSelectionChange: function(model, records){
    var record = records[0];
    if(record){
        var activeFlag = record.data.activeFlag,
        statuslabel = Ext.getCmp('showgridstatusbar'),
        cashPayLabel = Ext.getCmp('cashPayLabel'),
        lateFeeLabel = Ext.getCmp('lateFeeLabel'),
        icon  = '${resource(dir: "images", file: "TIC01001.png")}',
        status = activeFlag ? '<span style="color:black;font-weight:bold">Installment Status &raquo;  </span>  <span style="color:green;font-weight:bold">Paid</span>' : '<span style="color:black;font-weight:bold">Installment Status &raquo;  </span>  <span style="color:red;font-weight:bold">Due !</span>';
        statuslabel.setIcon(icon);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T19:29:20.343

状态栏，您可以根据文档设置图标和文本。请参见[此处](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ux.statusbar.StatusBar-cfg-iconCls)

用图标定义你的 CSS 类。

```
.x-statusbar .x-status-custom {
        padding-left: 25px;
        background: transparent url(images/custom-icon.gif) no-repeat 3px 2px; -- your icon here
    }

// Setting a default icon:
var sb = Ext.create('Ext.ux.statusbar.StatusBar', {
    defaultIconCls: 'x-status-custom'
});

// Changing the icon:
sb.setStatus({
    text: 'New status',
    iconCls: 'x-status-custom'
}); 
```

# delphi - 在 Delphi 中从希伯来语文本创建 Base64 字符串

> ID：14293111
> 
> 赞同：1
> 
> 时间：2013-01-12T12:00:02.513
> 
> 标签：delphi, utf-8, base64, delphi-7

我正在尝试将用希伯来语编写的电子邮件的“主题”字段编码为 Base64，以便可以在所有浏览器中正确阅读主题。目前，我正在使用编码 Windows-1255，它适用于某些客户端但不是全部，所以我想使用 utf-8、base64。

我对这个主题的阅读（没有双关语）表明文本必须是形式

```
=?<charset>?<encoding>?<encoded text>?= 
```

例如

```
=?windows-1255?Q?=E0=E1?= 
```

我从使用 UTF-8B 编码的希伯来语发送给我的信件中提取了编码的主题行，并在这个网站 www.webatic.com/run/convert/base64.php 上成功解码了它们。我还使用这个网站对简单字母进行编码，并注意到返回编码与*我*从 Delphi 算法得到的结果不同。

所以 - 我正在寻找一种成功编码字母的算法，例如 aleph (ord=224)、bet (ord=225) 等。根据网站，由两个字母 aleph 和 bet 组成的字符串返回代码 15DXkq= =，但基本的 Delphi 算法返回 Ue4，而 TIdEncoderQuotedPrintable 组件返回 =E0=E1（这是 ISO-8859 编码）。

**编辑**（经过几条评论）：

我让一个朋友从她的 Mac 电脑上给我发一封电子邮件，这并不奇怪，它使用 UTF-8 编码（而不是 Windows-1255）。主题是一个字母，aleph，ord 224。编码的主题出现在电子邮件的标题中，如下所示

```
=?UTF-8?B?15A=?= 
```

这可以分为三个部分： '前缀' (=?UTF-8?B?)，这意味着正在使用带有 base64 编码的 UTF-8；'有效负载'（15A =），我引用的网站将其正确翻译为字母aleph；和后缀 (?=)。

我需要一种算法来将任意字符串翻译，其中大部分将是希伯来语（因此使用 ord >= 224）到 base64/utf-8；正确的解决方案是在引用的网站上正确解码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:33:40.967

很抱歉浪费了你所有的时间。今天我又花了几个小时在这个主题上，发现我使用的 base64 代码有一个巨大的错误。

发送 base64 编码的 UTF-8 主题行所需的步骤是：

1.  通过 AnsiToUTF8 函数将“普通”文本（即本地 ANSI 代码页）转换为 UTF-8
2.  将此编码为base64
3.  创建一个前缀为 '=?UTF-8?B?'、第 2 阶段的结果和后缀为 '=?=' 的字符串
4.  发送！

这是创建和发送电子邮件的完整代码（明显简化）

```
 with IdSMTP1 do
  begin
   host:= ....;
   username:= ....;
   password:= ....;
  end;

 with email do
  begin
   From.Address:= ....;
   Recipients.EMailAddresses:= ....;
   cclist.add.address:= ....;
   email.subject:= '=?UTF-8?B?' + encode64 (AnsiToUTF8 (edit1.text)) +  '=?=';
   email.Body.text:= ....;
  end;

 try
  IdSMTP1.Connect (1000);
  IdSMTP1.Send (email);
 finally
  if IdSMTP1.Connected
   then IdSMTP1.Disconnect;
 end; 
```

使用此页面上与此页面相同的代码[，](http://www.delphi-zone.com/2010/03/how-to-encode-decode-base64-string)[“](http://www.swissdelphicenter.ch/torry/showcode.php?id=1524) codes64 ”字符串以数字开头，然后是大写字母，然后是小写字母，然后是标点符号。但是这个[页面](http://email.about.com/od/emailbehindthescenes/l/blbase64enctabl.htm) 显示应该是大写字母，然后是小写字母，然后是数字，然后是标点符号。

一旦我做了这个更正，字符串开始被“正确”编码——我可以在我的电子邮件客户端中正确地阅读它们，我认为这是“正确”的定义。

了解其他人是否对我发现的 base64 编码代码有问题会很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:04:41.747

您根本不需要`Subject`手动对属性进行编码。 `TIdMessage`自动为您编码。只需将 `Edit1.Text`值原样分配给 the `Subject`并`TIdMessage`根据需要对其进行编码。

如果您想自定义如何对 `TIdMessage`标头进行编码，请使用该`TIdMessage.OnInitializeISO` 事件来提供所需的字符集和编码值。在 Delphi 2009+ 中，它默认为 UTF-8 和 Base64。在早期版本中，`TIdMessage`读取 RTL 的当前操作系统语言并为已知语言选择一些默认值。但是，希伯来语不是其中之一，因此最终会使用 ISO-8859-1 和 QuotedPrintable。您可以覆盖这些值，例如：

```
email.Subject := Edit1.Text; 
```

.

```
procedure TForm1.emailInitializeISO(var VHeaderEncoding: Char; var VCharSet: string);
begin
  VHeaderEncoding := 'B';
  VCharSet := 'UTF-8';
end; 
```

# c# - 如何将treeview中的数据与sqldatasource绑定

> ID：14293115
> 
> 赞同：0
> 
> 时间：2013-01-12T12:00:16.283
> 
> 标签：c#, treeview

我在以下两个表中有数据

`Parent Mater`和`Child Master`

里面有`parent master`两个字段`prtID`和`name`。其中`child master`有三个字段`ID`，`name`并且`prtid`，**prtid**是来自的外键`parent master`。

我想`TreeView`在 c#.net 的 Windows 应用程序中绑定数据，这样每个子节点都会出现在其父节点内。

请指导我完成这项任务的正确方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:28:44.653

看起来像重复条目。请在提出新问题之前进行一些搜索：

*   [从数据库绑定 C# Windows 窗体 TreeView](https://stackoverflow.com/questions/5181371/bind-c-sharp-windows-form-treeview-from-database)

# tcp - TCP 端点如何知道另一个端点是关闭了连接的两半还是只关闭了一个？

> ID：14293120
> 
> 赞同：4
> 
> 时间：2013-01-12T12:00:40.183
> 
> 标签：tcp, half-close

考虑在两个 TCP 端点之间建立的 TCP 连接，其中一个端点调用：

1.  `close()`: 在这里，不允许进一步读取或写入。

2.  `shutdown(fd, SHUT_WR)`：这会将全双工连接转换为单工连接，端点调用`SHUT_WR`仍然可以读取。

但是，在这两种情况下，FIN 数据包都会通过线路发送到对等端点。那么问题来了，接收到 FIN 的 TCP 端点如何区分另一个端点是否使用了`close()`or `SHUT_WR`，因为在后一种情况下它应该仍然能够发送数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:31:30.727

基本上，答案是，**没有。** 或者更确切地说，找出答案的唯一通用方法是尝试发送一些数据并查看您是否收到 ACK 或 RST 作为响应。

当然，应用程序协议可能会为连接的一侧提供某种机制，以提前表明它不再希望接收更多数据。但是 TCP 本身并没有提供任何这样的机制。

# java - Weka中FP-Growth的数据要求是什么？

> ID：14293121
> 
> 赞同：16
> 
> 时间：2013-01-12T12:01:02.970
> 
> 标签：java, data-mining, weka

我想在 Weka 的数据集（模型）上使用 FP-Growth 关联规则算法。

不幸的是，这个算法是灰色的。我必须满足哪些先决条件才能使用它？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-13T15:37:41.267

答案/解决方案：

1.  Weka 实现的每个算法都有一些与之相关的摘要信息。为了从 GUI 中看到它，必须单击算法（或过滤器）选项，然后再次单击`Capabilities`按钮。然后会出现一个小弹出窗口，其中包含有关特定算法的一些信息。
2.  如果是`FPGrowth`- 模型属性需要是`binary`类型。就我而言，我有一个混合的名义参数和数字参数。我必须应用`NominalToBinary`过滤器，将我的名义属性转换为二进制值。然后我不得不将`NumericToBinary`所选选项`ignoreClass`设置为`true`.

这帮助我`FPGrowth`在 Weka 中“解锁”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-24T03:38:51.113

添加到@ŁukaszBachman 答案：您需要在应用过滤操作之前将类设置为“无类”。如果您使用的是 weka java api，那么您需要添加`data.setClassIndex(-1)`到您的 java 代码中。

例如：在 Java 中执行 Nominal To Binary：

```
 NominalToBinary nn = new NominalToBinary();
        nn.setInputFormat(Data);
        Data.setClassIndex(-1);
        Data = Filter.useFilter(Data, nn); 
```

# cloud-foundry - 部署 Cloud Foundry v2.0（下一代）。BOSH 清单文件错误

> ID：14293122
> 
> 赞同：0
> 
> 时间：2013-01-12T12:01:05.087
> 
> 标签：cloud-foundry, cf-bosh

我根据本[手册](https://github.com/cloudfoundry/oss-docs/blob/master/bosh/documentation/deploy_cf_vsphere.md)在 vSphere 上成功部署了完整的 Cloud Foundry，并使用[了这个](https://github.com/cloudfoundry/oss-docs/blob/master/bosh/tutorial/examples/dev124.yml)清单文件，如模板（我更改了很多，因为它有点过时了）。

现在我意识到我需要下一个版本的 Cloud Foundry 因为空间和组织功能，我开始使用 *_ng 模板用于云控制器和适当的节点。

我修改了我的 BOSH 清单文件，发现云控制器数据库存在一些问题。根据`cloud_controller_ng.yml.erb`

```
<% db = properties.ccdb_ng.databases.find { |db| db.tag == "cc" } %>
<% db_role = properties.ccdb_ng.roles.find { |role| role.tag == "admin" } %>
db:
  database: postgres://<%= db_role.name %>:<%= db_role.password %>@<%= properties.ccdb_ng.address %>:<%= properties.ccdb_ng.port %>/<%= db.name %>
  max_connections: <%= properties.ccdb_ng.max_connections || 32 %>
  pool_timeout: <%= properties.ccdb_ng.pool_timeout || 10 %>
  log_level: <%= properties.ccng.db_logging_level || "debug2" %> 
```

它需要`ccdb_ng`清单中的属性`ccdb`（顺便说一句。为什么？当 Cloud Foundry 的下一代成为当前版本时，这些更改变得无用。我错过了什么？）：

```
- name: ccdb_postgres
  template: postgres
  instances: 1
  resource_pool: infrastructure
  persistent_disk: 2048
  networks:
  - name: default
    static_ips:
    - 192.168.2.12
  properties:
    db: ccdb_ng
...
  ccdb_ng:
address: 192.168.2.12
port: 5524
pool_size: 10
roles:
- tag: admin
  name: ccadmin
  password: aaaBauWauZZb2
databases:
- tag: cc
  name: appcloud 
```

像结果一样，我得到了一个错误

```
Preparing configuration
binding configuration: Error filling in template `batch.yml.erb' for `uaa/0' (line 5: undefined method `databases' for nil:NilClass) (00:00:00)
Error                   1/1 00:00:00                                                                

Error 80006: Error filling in template `batch.yml.erb' for `uaa/0' (line 5: undefined method `databases' for nil:NilClass) 
```

这向我指出了这段代码：

```
<% cc_db = properties.ccdb.databases.find { |db| db.tag == "cc" } %>
<% cc_role = properties.ccdb.roles.find { |role| role.tag == "admin" } %> 
```

你怎么能看到它试图找到`ccdb`属性。是的，我可以更改清单文件，但在这种情况下`cloud_controller_ng.yml.erb`找不到`ccdb_ng`属性。

如何修改 CloudFoundry 的 BOSH 清单文件以避免这些问题？

我对此还有很多其他问题，但目前这是主要问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:14:31.850

Do you have a properties section in the manifest, like in this example;

[https://gist.github.com/3148465](https://gist.github.com/3148465)

For properties.ccdb NOT to evaluate as nil, there would need to be a ccdb entry in the properties section.

# image - 如何为多个页面创建变量 Meta 属性 og:image？

> ID：14293128
> 
> 赞同：0
> 
> 时间：2013-01-12T12:01:44.483
> 
> 标签：image, properties, meta

这是我正在尝试工作的代码，它应该解释我正在尝试做的事情。

```
<script>document.write('<meta property="og:image" content="' + location.pathname.replace(/\.html$/, '.jpg') + '">')</script> 
```

只是试图编辑元属性为 og:image 创建一个与 .html 文件同名的图像。到目前为止没有运气

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T13:33:54.200

Facebook 缩略图是通过类似搜索引擎网络爬虫的东西生成的。它遵循链接并从页面中获取所需的数据。但是像网络爬虫和 fb-share 这样的客户端只能看到你的 HTML，而不是页面上的所有资源——即像 javascript 和 jQuery 这样的客户端脚本。这意味着您的脚本将不会运行，因此不会创建元标记。而是尝试 PHP 服务器端实现，例如：

```
http://mylink.com/?ogimage_id=7 calls
<meta property="og:image" content= <?php $path_to_image_dir . "/" $_GET['ogimage_id'] 
```

在这里查看我的答案[Facebook sharer.php，如何拥有多个 og:image 标签？](https://stackoverflow.com/questions/3944268/facebook-sharer-php-how-to-have-multiple-ogimage-tags)

# express - ExpressJS 中的布局是什么？

> ID：14293130
> 
> 赞同：1
> 
> 时间：2013-01-12T12:01:53.750
> 
> 标签：express

我正在阅读 Express 的模板引擎 (ejs/Jade) 指南。

他们对布局和局部进行了很多引用？

这些是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:16:11.700

布局基本上是页面的整体结构。因此，例如，开始的 html 标记、头部部分、正文等定义了页面的结构、区域和侧边栏等等。

另一方面，部分是标记的小片段。页面的构建块。因此，假设您有一个带有顶部导航栏、主要内容区域和侧边栏的站点。您的导航可能是局部的，主要内容区域将由多个局部实例组成。在博客的情况下，主页上的主要内容区域将有几个相同部分呈现的实例。

所以，真的，他们的名字是相当字面的。布局定义了页面的整体布局，部分是页面的部分——部分。

另见：[http ://www.hacksparrow.com/express-js-jade-partials-how-to-use-them.html](http://www.hacksparrow.com/express-js-jade-partials-how-to-use-them.html)

而且，虽然与 expressjs 或节点无关，但这些概念仍然适用：[https ://github.com/handlino/FireApp/wiki/Templates,-layouts,-and-partials](https://github.com/handlino/FireApp/wiki/Templates,-layouts,-and-partials)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T21:26:21.787

您可以将布局视为一个主类，所有的 css 文件都扩展了它。布局是我们css的基本结构。例如：-

布局.jade

```
doctype 5
html
  head
    title= title
    link(rel='stylesheet', href='/stylesheets/style.css')
  body
    block content 
```

所以我们的主文件将是

索引.jade

```
extends layout

block content
  #wrapper
    #img
      a(href='/')
        img(src='/images/img.png')
    #display
      #login
        form(method='post')
          | Enter your name
          div
            input(type='text', name='username')
            input(type='submit', value='Log In') 
```

但要注意间距... ;)

# c++ - OpenGL 应用程序有时会崩溃

> ID：14293132
> 
> 赞同：1
> 
> 时间：2013-01-12T12:02:11.920
> 
> 标签：c++, opengl, crash, driver

我在 C++ 中使用 OpenGL 应用程序工作了几个月，以前从未遇到过这个问题。

*在Visual Studio 2012*中编码我可以在 IDE 中运行应用程序，也可以手动启动可执行文件。在这两种情况下，我都可以在调试和发布版本之间进行选择。以下问题仅在我自己启动发布构建可执行文件时出现。否则一切正常。

当我动态地向场景中添加新表单时，应用程序有时会崩溃。我的操作系统*Windows 8 64bit*让我`Debug the program`从崩溃对话框中退出，这确实没有太大帮助，因为它是一个发布版本，在运行时可用的调试信息较少，但它至少告诉我应用程序在 draw call 附近崩溃`glDrawTriangles()`。在我的代码中，循环内只有一个绘图调用。

崩溃只是不规则地发生，这让我发疯。有时应用程序在几分钟内运行良好，有时它立即崩溃，有时它运行几秒钟。但我认为重要的是要知道应用程序只会在新表单插入场景后立即崩溃，我首先在另一个线程中生成，然后在主线程中创建 OpenGL 缓冲区。

以下是 Windows 崩溃对话框中显示的问题详细信息。*我的显卡ATI Radeon 7870*的驱动程序似乎崩溃了。

> 问题签名：
>   问题事件名称：APPCRASH
>   应用程序名称：Application.exe 应用
>   程序版本：0.0.0.0
>   应用程序时间戳：50f1491a
>   故障模块名称：atioglxx.dll
>   故障模块版本：6.14.10.11931
>   故障模块时间戳：50650037
>   异常代码：c0000005
>   异常偏移量： 001108ef
>   操作系统版本：6.2.9200.2.0.0.256.27
>   区域设置 ID：1031
>   附加信息 1：5861
>   附加信息 2：5861822e1919d7c014bbb064c64908b2
>   附加信息 3：dac6
>   附加信息 4：dac6c2650fa14dd558bd9f448e
> 
> 在线阅读我们的隐私声明：http:
>   [//go.microsoft.com/fwlink/ ?linkid=190175](http://go.microsoft.com/fwlink/?linkid=190175)
> 
> 如果在线隐私声明不可用，请离线阅读我们的隐私声明：
>   C:\Windows\system32\en-US\erofflps.txt

到目前为止，我所做的是更新我的视频卡驱动程序并调试我的应用程序，因为我注意到结果不可靠，因为崩溃是自发发生的。有很多源文件，老实说，我不确定哪个会影响这个错误。它可能是一个名为的文件，`terrain.cpp`因此我将代码粘贴到此处。

```
#pragma once

#include "system.h"
#include "debug.h"

#include <vector>
#include <cstdlib>
#include <future>
using namespace std;
#include <GLEW/glew.h>
#include <SFML/OpenGL.hpp>
#include <SFML/Graphics/Image.hpp>
using namespace sf;
#include <GLM/glm.hpp>
#include <GLM/gtc/noise.hpp>
using namespace glm;

#include "settings.h"
#include "camera.h"
#include "form.h"
#include "transform.h"
#include "terrain.h"
#include "shader.h"
#include "movement.h"

typedef detail::tvec3<int> vec3i;

class ComponentTerrain : public Component
{
    void Init()
    {
        auto wld = Global->Add<StorageTerrain>("terrain");

        tasking = false;

        Texture();

        Listeners();
    }

    void Update()
    {
        auto wld = Global->Get<StorageTerrain>("terrain");
        auto stg = Global->Get<StorageSettings>("settings");
        auto cam = Global->Get<StorageCamera>("camera");
        auto cks = Entity->Get<StorageChunk>();

        int Distance = (int)(.5f * stg->Viewdistance / CHUNK_X / 2);
        Debug::Info("Terrain chunk distance " + to_string(Distance));
        for(int X = -Distance; X <= Distance; ++X)
        for(int Z = -Distance; Z <= Distance; ++Z)
        {
            addChunk(X + (int)cam->Position.x / CHUNK_X, 0, Z + (int)cam->Position.z / CHUNK_Z);
        }
        for(auto chunk : wld->chunks)
        {
            auto chk = cks.find(chunk.second);
            float distance = (float)vec3(chunk.first[0] * CHUNK_X - cam->Position.x, chunk.first[1] * CHUNK_Y - cam->Position.y, chunk.first[2] * CHUNK_Z - cam->Position.z).length();
            if(distance > stg->Viewdistance)
                deleteChunk(chunk.first[0], chunk.first[1], chunk.first[2]);
        }

        if(tasking)
        {
            if(task.wait_for(chrono::milliseconds(0)) == future_status::ready)
            {
                tasking = false;
                Data data = task.get();
                Buffers(data);
            }
        }
        else
        {
            for(auto chunk : cks)
            if(chunk.second->changed)
            {
                tasking = true;
                chunk.second->changed = false;
                task = async(launch::async, &ComponentTerrain::Mesh, this, Data(chunk.first));
                break;
            }
        }
    }

    struct Data
    {
        Data() {}
        Data(unsigned int id) : id(id) {}
        unsigned int id;
        vector<float> Vertices, Normals, Texcoords;
        vector<int> Elements;
    };

    future<Data> task;
    bool tasking;
    Image texture;

    void Listeners()
    {
        Event->Listen("SystemInitialized", [=]{
            auto cam = Global->Get<StorageCamera>("camera");
            cam->Position = vec3(0, CHUNK_Y, 0);
            cam->Angles = vec2(0.75, -0.25);
        });

        Event->Listen("InputBindChunk", [=]{
            addChunk(rand() % 5, 0, rand() % 5);
            addChunk(rand() % 5, 0, rand() % 5);
            addChunk(rand() % 5, 0, rand() % 5);
        });
    }

    unsigned int getChunk(int X, int Y, int Z)
    {
        auto wld = Global->Get<StorageTerrain>("terrain");
        array<int, 3> key = {X, Y, Z};
        auto i = wld->chunks.find(key);
        return (i != wld->chunks.end()) ? i->second : 0;
    }

    int addChunk(int X, int Y, int Z)
    {
        auto wld = Global->Get<StorageTerrain>("terrain");
        auto shd = Global->Get<StorageShader>("shader"); // moved this line

        unsigned int id = getChunk(X, Y, Z);
        if(!id)
        {
            id = Entity->New();
            Entity->Add<StorageChunk>(id);
            auto frm = Entity->Add<StorageForm>(id); // moved this line
            auto tsf = Entity->Add<StorageTransform>(id);

            frm->Program = shd->Program; // moved this line
            tsf->Position = vec3(X * CHUNK_X, Y * CHUNK_Y, Z * CHUNK_Z);

            Generate(id, X, Y, Z);

            array<int, 3> key = {X, Y, Z};
            wld->chunks.insert(make_pair(key, id));
        }
        return id;
    }

    void deleteChunk(int X, int Y, int Z)
    {
        auto wld = Global->Get<StorageTerrain>("terrain");

        unsigned int id = getChunk(X, Y, Z);
        if(id < 1) return;

        array<int, 3> key = {X, Y, Z};
        wld->chunks.erase(key);

        Entity->Delete<StorageChunk>(id);
        Entity->Delete<StorageForm>(id);
        Entity->Delete<StorageTransform>(id);

        // free buffers
    }

    void Generate(unsigned int id, int X, int Y, int Z)
    {
        auto cnk = Entity->Get<StorageChunk>(id);
        cnk->changed = true;

        for(int x = 0; x < CHUNK_X; ++x) {
        const float i = X + (float)x / CHUNK_X;
        for(int z = 0; z < CHUNK_Z; ++z) {
        const float j = Z + (float)z / CHUNK_Z;
                double height_bias = 0.30;
                double height_base = 0.50 * (simplex(0.2f * vec2(i, j)) + 1) / 2;
                double height_fine = 0.20 * (simplex(1.5f * vec2(i, j)) + 1) / 2;
                int height = (int)((height_bias + height_base + height_fine) * CHUNK_Y);
                for(int y = 0; y < height; ++y) cnk->blocks[x][y][z] = true;
        } }
    }

    #define TILES_U 4
    #define TILES_V 4

    Data Mesh(Data data)
    {
        auto cnk = Entity->Get<StorageChunk>(data.id);
        auto *Vertices = &data.Vertices, *Normals = &data.Normals, *Texcoords = &data.Texcoords;
        auto *Elements = &data.Elements;

        const vec2 grid(1.f / TILES_U, 1.f / TILES_V);

        int n = 0;
        for(int X = 0; X < CHUNK_X; ++X)
        for(int Y = 0; Y < CHUNK_Y; ++Y)
        for(int Z = 0; Z < CHUNK_Z; ++Z)
            if(cnk->blocks[X][Y][Z])
            {
                int Tile = Clamp(rand() % 2 + 1, 0, TILES_U * TILES_V - 1);

                for(int dim = 0; dim < 3; ++dim) { int dir = -1; do {
                    vec3i neigh = Shift(dim, vec3i(dir, 0, 0)) + vec3i(X, Y, Z);

                    if(Inside(neigh, vec3i(0), vec3i(CHUNK_X, CHUNK_Y, CHUNK_Z) - 1))
                        if(cnk->blocks[neigh.x][neigh.y][neigh.z])
                            { dir *= -1; continue; }

                    for(float i = 0; i <= 1; ++i)
                    for(float j = 0; j <= 1; ++j)
                    {
                        vec3 vertex = vec3(X, Y, Z) + floatify(Shift(dim, vec3i((dir+1)/2, i, j)));
                        Vertices->push_back(vertex.x); Vertices->push_back(vertex.y); Vertices->push_back(vertex.z);
                    }

                    vec3 normal = normalize(floatify(Shift(dim, vec3i(dir, 0, 0))));
                    for(int i = 0; i < 4; ++i)
                    {
                        Normals->push_back(normal.x); Normals->push_back(normal.y); Normals->push_back(normal.z);
                    }

                    vec2 position = (vec2(Tile % TILES_U, Tile / TILES_U) + .25f) * grid;
                    Texcoords->push_back(position.x);            Texcoords->push_back(position.y);
                    Texcoords->push_back(position.x + grid.x/2); Texcoords->push_back(position.y);
                    Texcoords->push_back(position.x);            Texcoords->push_back(position.y + grid.y/2);
                    Texcoords->push_back(position.x + grid.x/2); Texcoords->push_back(position.y + grid.y/2);

                    if(dir == -1) {
                        Elements->push_back(n+0); Elements->push_back(n+1); Elements->push_back(n+2);
                        Elements->push_back(n+1); Elements->push_back(n+3); Elements->push_back(n+2);
                    } else {
                        Elements->push_back(n+0); Elements->push_back(n+2); Elements->push_back(n+1);
                        Elements->push_back(n+1); Elements->push_back(n+2); Elements->push_back(n+3);
                    }
                    n += 4;

                dir *= -1; } while(dir > 0); }
            }

        return data;
    }

    void Buffers(Data data)
    {
        auto frm = Entity->Get<StorageForm>(data.id);

        glGenBuffers(1, &frm->Positions);
        glBindBuffer(GL_ARRAY_BUFFER, frm->Positions);
        glBufferData(GL_ARRAY_BUFFER, data.Vertices.size() * sizeof(float), &(data.Vertices[0]), GL_STATIC_DRAW);

        glGenBuffers(1, &frm->Normals);
        glBindBuffer(GL_ARRAY_BUFFER, frm->Normals);
        glBufferData(GL_ARRAY_BUFFER, data.Normals.size() * sizeof(float), &(data.Normals[0]), GL_STATIC_DRAW);

        glGenBuffers(1, &frm->Texcoords);
        glBindBuffer(GL_ARRAY_BUFFER, frm->Texcoords);
        glBufferData(GL_ARRAY_BUFFER, data.Texcoords.size() * sizeof(float), &(data.Texcoords[0]), GL_STATIC_DRAW);

        glGenBuffers(1, &frm->Elements);
        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, frm->Elements);
        glBufferData(GL_ELEMENT_ARRAY_BUFFER, data.Elements.size() * sizeof(int), &data.Elements[0], GL_STATIC_DRAW);

        glGenTextures(1, &frm->Texture);
        glBindTexture(GL_TEXTURE_2D, frm->Texture);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, texture.getSize().x, texture.getSize().y, 0, GL_RGBA, GL_UNSIGNED_BYTE, texture.getPixelsPtr());
        glGenerateMipmap(GL_TEXTURE_2D);
    }

    void Texture()
    {
        Image image;
        bool result = image.loadFromFile("forms/textures/terrain.png");
        if(!result){ Debug::Fail("Terrain texture loading fail"); return; }

        Vector2u size = Vector2u(image.getSize().x / TILES_U, image.getSize().y / TILES_V);
        texture.create(image.getSize().x * 2, image.getSize().y * 2, Color());
        for(int u = 0; u < TILES_U; ++u)
        for(int v = 0; v < TILES_V; ++v)
        {
            Image tile, quarter;
            tile.create(size.x, size.y, Color());
            tile.copy(image, 0, 0, IntRect(size.x * u, size.y * v, size.x, size.y), true);
            quarter.create(size.x, size.y, Color());
            quarter.copy(tile, 0,          0,          IntRect(size.x / 2, size.y / 2, size.x / 2, size.y / 2), true);
            quarter.copy(tile, size.x / 2, 0,          IntRect(0,          size.y / 2, size.x / 2, size.y / 2), true);
            quarter.copy(tile, 0,          size.y / 2, IntRect(size.x / 2, 0,          size.x / 2, size.y / 2), true);
            quarter.copy(tile, size.x / 2, size.y / 2, IntRect(0,          0,          size.x / 2, size.y / 2), true);
            texture.copy(quarter, (u * 2    ) * size.x, (v * 2    ) * size.y, IntRect(0, 0, 0, 0), true);
            texture.copy(quarter, (u * 2 + 1) * size.x, (v * 2    ) * size.y, IntRect(0, 0, 0, 0), true);
            texture.copy(quarter, (u * 2    ) * size.x, (v * 2 + 1) * size.y, IntRect(0, 0, 0, 0), true);
            texture.copy(quarter, (u * 2 + 1) * size.x, (v * 2 + 1) * size.y, IntRect(0, 0, 0, 0), true);
        }
    }

    template <typename T>
    inline T Clamp(T Value, T Min, T Max)
    {
        if(Value < Min) return Min;
        if(Value > Max) return Max;
        return Value;
    }

    bool Inside(vec3i Position, vec3i Min, vec3i Max)
    {
        if(Position.x < Min.x || Position.y < Min.y || Position.z < Min.z) return false;
        if(Position.x > Max.x || Position.y > Max.y || Position.z > Max.z) return false;
        return true;
    }

    inline vec3i Shift(int Dimension, vec3i Vector)
    {
        if      (Dimension % 3 == 1) return vec3i(Vector.z, Vector.x, Vector.y);
        else if (Dimension % 3 == 2) return vec3i(Vector.y, Vector.z, Vector.x);
        else                         return Vector;
    }

    vec3 floatify(vec3i Value)
    {
        return vec3(Value.x, Value.y, Value.z);
    }
}; 
```

但是，您可以[在 Github 上找到整个代码](https://github.com/ComputerGame/GraphicsApplication/tree/terrain/Application)。

您知道什么可能导致崩溃或如何找到错误吗？如果您需要更多信息以及哪种信息，请告诉我。

感谢@doomster，我现在可以找到并修复错误。

渲染器组件循环遍历表单向量以绘制它们。异步线程向该向量添加了新形式，但它们的缓冲区稍后在返回生成的顶点后在主线程中创建。这意味着绘图和表单添加是并行运行的。当渲染器尝试渲染没有任何已创建缓冲区的表单时发生崩溃。

`addChunk()`我在上面的代码中插入了注释，以突出显示我为解决问题而移至的三行`Buffers()`。我不知道为什么只有发布构建可执行文件崩溃了，但这不再重要了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T12:14:03.610

我要在这里验证两件事：

*   您正在使用`future<T>`. 我不确定，但如果它在不同的线程中运行，可能会对 OpenGL 产生负面影响，我听说它对多线程使用很敏感。尽管将其视为谣言，我不太确定，但尝试转换为单线程代码是值得一试的。
*   您也可以在发布版本中激活调试符号。这至少应该在崩溃发生时为您提供可用的回溯。实际上，VS 的 Debug/Release 设置只是默认设置，没有任何内在意义，因此您可以逐步修改 Debug 设置，直到与 Release 设置匹配。这应该会给你一个失败的变体，但仍然可以在调试器中使用。

# ios - NSMutableSet removeObject 无法移除对象

> ID：14293135
> 
> 赞同：2
> 
> 时间：2013-01-12T12:02:53.357
> 
> 标签：ios, objective-c

我正在尝试使用 NSMutableSet 创建一组对象。对象是一首歌曲，每个标签都有一个名字和一个作者。

代码：

```
#import "Song.h"

@implementation Song

@synthesize name,author;

-(Song *)initWithName:(NSString *)n andAuth:(NSString *)a {
    self = [super init];

    if (self) {
        name = n;
        author = a;
    }

    return self;
}

-(void)print {
    NSLog(@"song:%@; author:%@;", name,author);
}

-(BOOL)isEqual:(id)obj {
    //NSLog(@"..isEqual");

    if([[obj name] isEqualToString:name]
       && [[obj author] isEqualToString:author]) {
        return YES;
    }

    return NO;
}

-(BOOL)isEqualTo:(id)obj {
    NSLog(@"..isEqualTo");

    if([[obj name] isEqualToString:name]
       && [[obj author] isEqualToString:author]) {
        return YES;
    }

    return NO;
}

@end 
```

然后把这个对象放入NSMutableSet：</p>

```
int main(int argv, char *argc[]) {
    @autoreleasepool {
        Song *song1 = [[Song alloc] initWithName:@"music1" andAuth:@"a1"];
        Song *song2 = [[Song alloc] initWithName:@"music2" andAuth:@"a2"];
        Song *song3 = [[Song alloc] initWithName:@"music3" andAuth:@"a3"];

        Song *needToRemove = [[Song alloc] initWithName:@"music3" andAuth:@"a3"];

        NSMutableSet *ns = [NSMutableSet setWithObjects:song1, song2, song3, nil];

        [ns removeObject:needToRemove];

        for (Song *so in ns) {
            [so print];
        }
    }
} 
```

但是奇怪的事情发生了，music3还在NSMutableSet中。但是换成NSMutableArray，music3就可以删除了。NSMutableArray的removeObject调用对象的isEqual方法。我找到了removeObject的解释。就一句话：</p>

```
Removes a given object from the set. 
```

不解释它是如何工作的。如何像这样删除对象？NSMutableSet的removeObject调用哪个方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T12:08:56.203

Objective-c 集合类依赖于[`- (NSUInteger)hash`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/doc/uid/20000052-BBCGFFCH)找出相等的对象。

如果您的对象返回 YES[`isEqual:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/doc/uid/20000052-BBCCECDG)但不同`hash`，则 NSSet 之类的类将认为对象不同。

参见[hash](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/doc/uid/20000052-BBCGFFCH)的讨论：

> 如果两个对象相等（由`isEqual:`方法确定），则它们必须具有相同的哈希值。如果您在子类中定义散列并打算将该子类的实例放入集合中，那么最后一点尤其重要。

实现哈希方法。像这样的东西应该工作：

```
- (NSUInteger)hash {
    return [self.author hash] ^ [self.name hash];
} 
```

# c - 如何将密码转换为 128 位/256 位 WEP 密钥？

> ID：14293136
> 
> 赞同：3
> 
> 时间：2013-01-12T12:03:02.857
> 
> 标签：c, wep

我有一个密码，我想从中生成 128 位或 256 位 WEP 密钥。任何指针或链接都将有助于如何从纯文本生成 WEP 密钥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-19T01:16:33.663

希望原始海报现在已经找到了答案，但我发现这个信息非常**难以获得**，因为它已经过时了。正如反复提到的，在这个线程和其他线程中，WEP 非常不安全，但出于某种原因，没有人愿意给出直接的答案，并且有很多建议去学习其他东西。

对于原始问题，128 位密钥是 64 字节字符串的 MD5 哈希。这个 64 字节字符串是反复重复的 ASCII 密码短语，然后被截断为 64 字节。例如，在 SQL Server 中，这将显示为，

```
SELECT CAST(HASHBYTES('MD5', LEFT(REPLICATE(@phrase, CEILING(64.0 / LEN(@phrase))), 64)) AS varbinary(13)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T12:41:18.363

从阅读[密钥派生函数](http://en.wikipedia.org/wiki/Key_derivation_function)开始。高质量的现代 KDF 是[scrypt](http://www.tarsnap.com/scrypt.html)、[bcrypt](http://en.wikipedia.org/wiki/Bcrypt)和[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)。它们都有开源实现。

对于 PBKDF2，您可以指定派生密钥的长度。对于 scrypt，您可以选择输出的前 N ​​位并将它们用作密钥。

在不使用 KDF 的情况下执行此操作的最直接方法是将密码与 24 位 IV（初始化向量）连接并形成 RC4 密钥。

请注意，WEP 将您的密钥和 IV 组合成一个 RC4 流，该流为数据流提供密钥；出于这个原因，WEP 有许多缺点，使其无法提供足够的数据机密性。您可以通过以下[Wikipedia 页面](http://en.wikipedia.org/wiki/Wired_Equivalent_Privacy#Authentication)链接了解更多信息。

不要使用加密哈希作为派生密钥。

# php - 如何将 HTML 选择选项值解析到 PHP 邮件程序

> ID：14293138
> 
> 赞同：0
> 
> 时间：2013-01-12T12:03:15.633
> 
> 标签：php, html, parsing, mailer

提交表单后，我在旧网站上使用[phpmailer](https://code.google.com/a/apache-extras.org/p/phpmailer/)发送电子邮件。

它正在正确发送输入文本，但未发送正确的选择选项。

这是我正在使用的 PHP/HTML 页面：

```
// array to create title select options
<?php
$selectArray1 = array ('Mr'=>'Mr',
                  'Mrs'=>'Mrs',
                  'Miss'=>'Miss',
                  'Ms'=>'Ms',
                  'Dr'=>'Dr');
?>

// below select box only sending the first option (Mr)
<label for="title">Title</label>
<select id="title" name="title[]">
<?php
foreach ($selectArray1 as $val_title){
echo "<option value=\"$val_title\">";
echo $val_title;
echo "</option>";
}
?>
</select>

//below input in sending correctly
<label for="name">Name</label></td>
<input id="name" name="name" maxlength="50" type="text" value=""> 
```

因此，无论我是否从下拉列表中选择说“小姐”，收到的电子邮件将始终以“先生”为标题。

这是提交时表单操作的邮件程序：

```
<?php

// Grab our config settings
require_once($_SERVER['DOCUMENT_ROOT'].'/Site/config.php');

// Grab the FreakMailer class
require_once($_SERVER['DOCUMENT_ROOT'].'/Site/lib/MailClass.inc');

// instantiate the class
$mailer = new FreakMailer();

// Set the subject
$mailer->Subject = 'Finance Enquiry - Site.co.uk';

// Body
$mailer->Body = 'Finance Enquiry from Site.co.uk' . "\n\n" . $_POST['title'] .      "\n\n" . $_POST['name'] . "\n\n" . $_POST['user-email'];

// Add an address to send to.
$mailer->AddAddress('mail@mail.co.uk', 'Site');

if(!$mailer->Send())
{
echo 'There was a problem sending this mail!';
}
else
{
echo 'Mail sent!';
}
$mailer->ClearAddresses();
$mailer->ClearAttachments();
?> 
```

`$_POST['title']`以上是我遇到问题的地方。如何更改代码以便从用户输入发送正确的选择选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:16:00.413

为什么您将 select 命名为“title[]”，而不是将其重命名为“title”并检查代码。仅当您必须接受多个值时才需要方括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T12:17:55.313

您必须使用 'title' 而不是 'title[]' 作为名称`<select>`：

这有效：

```
<?php
$selectArray1 = array ('Mr'=>'Mr',
                  'Mrs'=>'Mrs',
                  'Miss'=>'Miss',
                  'Ms'=>'Ms',
                  'Dr'=>'Dr');
?>
<form action="test.php?done=1" method="POST">

<label for="title">Title</label>
<select id="title" name="title">
<?php
foreach ($selectArray1 as $val_title){
echo "<option value=\"$val_title\">";
echo $val_title;
echo "</option>";
}
?>
</select>

<input type="submit">
</form>

<?php

if( $_GET["done"] == 1 )
{
    echo "Output:".$_POST["title"];
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-17T16:09:13.240

事实证明，这是一个愚蠢的错误，输入名称/ID 有冲突。

ID`title`被分配给我表单上的另一个元素，这导致了冲突。

# javascript - 空输入 onload 即使保存在导航器中

> ID：14293142
> 
> 赞同：0
> 
> 时间：2013-01-12T12:03:41.127
> 
> 标签：javascript, input, code-cleanup, is-empty

即使导航器保存了日志记录的参数，我也想清除我网站中的所有输入。

我已经尝试在相关输入上使用它来做到这一点

```
<input type="text" name="login" placeholder="Adresse E-mail" onload="this.value=''"> 
```

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:06:27.563

您可能想尝试使用的是`autocomplete=off`输入字段中的参数。

```
<input type="text" name="login" placeholder="Adresse E-mail" autocomplete="off" > 
```

此参数也可以添加到实际`<form>`元素中 -

```
<form name="myForm" id="myForm" method="post" autocomplete="off" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T12:12:24.790

要以通用方式处理它，而不是标记每个字段，而是使用文档的 readystate 更改事件并使用 getElementsByTagName 按标记名称获取所有输入元素。检查每个元素的类型，然后设置适当的值。

# vb6 - 检查我的网络中是否存在特定计算机的快速方法

> ID：14293146
> 
> 赞同：0
> 
> 时间：2013-01-12T12:05:07.623
> 
> 标签：vb6, network-programming

嗯...我认为标题说明了一切。我想检查我的网络上是否存在一台电脑，例如“JOAN-PC”。

现在我正在做这样的事情：

```
Dim oShell As Object
Set oShell = CreateObject("Shell.Application")
MsgBox Not CBool(oShell.NameSpace(CVar("\\JOAN-PC")) Is Nothing) 
```

效果很好，但速度很慢，而且我的程序必须多次调用它。你们中有些人知道做同样事情的快速方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:26:49.313

也许您可以使用`NetRemoteTOD`相关的简单网络 API，甚至是“ping”请求。

这是一个你可能会适应的小例子。试一试，没有响应的机器的超时时间似乎不会太长（7 或 8 秒）。对于合法用途，这可能不会成为问题，但它足以阻止恶意“扫描程序”试图通过 IP 地址扫描整个网络以查找受害机器。

```
Option Explicit

'Fetch and display Net Remote Time Of Day from a
'remote Windows system.  Supply a UNC hostname,
'DNS name, or IP address - or empty string for
'the local host's time and date.
'
'Form has 3 controls:
'
'   txtServer   TextBox
'   cmdGetTime  CommandButton
'   lblTime     Label

Private Const NERR_SUCCESS As Long = 0

Private Type TIME_OF_DAY_INFO
    tod_elapsedt As Long
    tod_msecs As Long
    tod_hours As Long
    tod_mins As Long
    tod_secs As Long
    tod_hunds As Long
    tod_timezone As Long
    tod_tinterval As Long
    tod_day As Long
    tod_month As Long
    tod_year As Long
    tod_weekday As Long
End Type

Private Declare Function NetApiBufferFree Lib "netapi32" ( _
    ByVal lpBuffer As Long) As Long

Private Declare Function NetRemoteTOD Lib "netapi32" ( _
    ByRef UncServerName As Byte, _
    ByRef BufferPtr As Long) As Long

Private Declare Sub CopyMemory Lib "kernel32" Alias "RtlMoveMemory" ( _
    ByRef pTo As Any, _
    ByRef uFrom As Any, _
    ByVal lSize As Long)

Private Function GetTOD(ByVal Server As String) As Date
    Dim bytServer() As Byte
    Dim lngBufPtr As Long
    Dim todReturned As TIME_OF_DAY_INFO

    bytServer = Trim$(Server) & vbNullChar
    If NetRemoteTOD(bytServer(0), lngBufPtr) = NERR_SUCCESS Then
        CopyMemory todReturned, ByVal lngBufPtr, LenB(todReturned)
        NetApiBufferFree lngBufPtr
        With todReturned
            GetTOD = DateAdd("n", _
                             -.tod_timezone, _
                             DateSerial(.tod_year, .tod_month, .tod_day) _
                           + TimeSerial(.tod_hours, .tod_mins, .tod_secs))
        End With
    Else
        Err.Raise vbObjectError Or &H2000&, _
                  "GetTOD", _
                  "Failed to obtain time from server"
    End If
End Function

Private Sub cmdGetTime_Click()
    Dim dtServerTime As Date

    On Error Resume Next
    dtServerTime = GetTOD(txtServer.Text)
    If Err.Number <> 0 Then
        lblTime.Caption = Err.Description
    Else
        lblTime.Caption = CStr(dtServerTime)
    End If
    On Error GoTo 0
    txtServer.SetFocus
End Sub 
```

# go - 有什么方法可以将函数名别名为“_”？

> ID：14293148
> 
> 赞同：9
> 
> 时间：2013-01-12T12:05:15.443
> 
> 标签：go, gettext

在 Go 中，是否存在以下 gettext 短格式的情况：

```
_("String to be translated.") 
```

可以用吗？其中一个我相当确定答案是“不”的时候，但问以防万一我忽略了一些东西。我认为可以实现的最好的是：

```
import . "path/to/gettext-package"
...
s := gettext("String to be translated.") 
```

由于下划线具有非常特定的含义，并且尝试定义名为 '_' 的函数会导致编译时错误“无法使用 _ 作为值”。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-12T12:07:43.110

No.[空白标识符](http://golang.org/ref/spec#Blank_identifier)

> ...不引入新的绑定。

IOW，您可以声明命名的“事物” `_`，但不能使用该“名称”以任何方式引用它们。

但是，可以接近目标：

```
package main

import "fmt"

var p = fmt.Println

func main() {
        p("Hello, playground")
} 
```

（也在[这里](http://play.golang.org/p/MObJSyAaUd)）

ie. you can bind any (local or imported) function to a variable and later invoke the function through that variable, getting rid of the package prefix - if you think that's handy. IMO not, BTW.

# c++ - （缺少）使用 C++11 移动语义的性能改进

> ID：14293151
> 
> 赞同：22
> 
> 时间：2013-01-12T12:05:28.937
> 
> 标签：c++, gcc, c++11, clang, move-semantics

我已经编写 C++11 代码很长一段时间了，还没有对其进行任何基准测试，只期望像向量操作这样的东西现在可以通过移动语义“更快”。因此，当实际使用 GCC 4.7.2 和 clang 3.0（Ubuntu 12.10 64 位的默认编译器）进行基准测试时，我得到了非常不满意的结果。这是我的测试代码：

**编辑：**关于@DeadMG 和@ronag 发布的（好）答案，我将元素类型从没有 a更改`std::string`为，并使所有内部字符串更大（200-700 字节），因此它们不应该是SSO的*受害者*。`my::string``swap()`

 ***EDIT2：**牛是原因。通过出色的注释再次改编代码，将存储从`std::string`to更改为`std::vector<char>`并省略了复制/移动 onstructors（让编译器生成它们）。没有COW，速度差异实际上是巨大的。

**EDIT3：**使用`-DCOW`. 这使得内部存储 a`std::string`而不是`std::vector<char>`@chico 要求的 a。

```
#include <string>
#include <vector>
#include <fstream>
#include <iostream>
#include <algorithm>
#include <functional>

static std::size_t dec = 0;

namespace my { class string
{
public:
    string( ) { }
#ifdef COW
    string( const std::string& ref ) : str( ref ), val( dec % 2 ? - ++dec : ++dec ) {
#else
    string( const std::string& ref ) : val( dec % 2 ? - ++dec : ++dec ) {
        str.resize( ref.size( ) );
        std::copy( ref.begin( ), ref.end( ), str.begin( ) );
#endif
    }

    bool operator<( const string& other ) const { return val < other.val; }

private:
#ifdef COW
    std::string str;
#else
    std::vector< char > str;
#endif
    std::size_t val;
}; }

template< typename T >
void dup_vector( T& vec )
{
    T v = vec;
    for ( typename T::iterator i = v.begin( ); i != v.end( ); ++i )
#ifdef CPP11
        vec.push_back( std::move( *i ) );
#else
        vec.push_back( *i );
#endif
}

int main( )
{
    std::ifstream file;
    file.open( "/etc/passwd" );
    std::vector< my::string > lines;
    while ( ! file.eof( ) )
    {
        std::string s;
        std::getline( file, s );
        lines.push_back( s + s + s + s + s + s + s + s + s );
    }

    while ( lines.size( ) < ( 1000 * 1000 ) )
        dup_vector( lines );
    std::cout << lines.size( ) << " elements" << std::endl;

    std::sort( lines.begin( ), lines.end( ) );

    return 0;
} 
```

它的作用是将 /etc/passwd 读入一个行向量，然后将这个向量一遍又一遍地复制到自身上，直到我们至少有 100 万个条目。这是第一个优化应该有用的地方，不仅是`std::move()`你在 中看到的显式优化`dup_vector()`，而且`push_back`当它需要调整内部数组的大小（创建新的 + 复制）时，它本身应该表现得更好。

最后，对向量进行排序。当您不需要每次交换两个元素时都复制临时对象时，这肯定会更快。

我以两种方式编译和运行这两种方式，一种是 C++98，另一种是 C++11（使用 -DCPP11 进行显式移动）：

```
1> $ rm -f a.out ; g++ --std=c++98 test.cpp ; time ./a.out
2> $ rm -f a.out ; g++ --std=c++11 -DCPP11 test.cpp ; time ./a.out
3> $ rm -f a.out ; clang++ --std=c++98 test.cpp ; time ./a.out
4> $ rm -f a.out ; clang++ --std=c++11 -DCPP11 test.cpp ; time ./a.out 
```

具有以下结果（每次编译两次）：

```
GCC C++98
1> real 0m9.626s
1> real 0m9.709s

GCC C++11
2> real 0m10.163s
2> real 0m10.130s 
```

因此，编译为 C++11 代码时运行速度会稍慢一些。类似的结果也适用于 clang：

```
clang C++98
3> real 0m8.906s
3> real 0m8.750s

clang C++11
4> real 0m8.858s
4> real 0m9.053s 
```

有人能告诉我这是为什么吗？即使在为 C++11 之前的版本进行编译时，编译器是否优化得如此之好，以至于它们实际上达到了移动语义行为？如果我添加`-O2`，所有代码运行速度更快，但不同标准之间的结果几乎与上面相同。

**编辑**：使用 my::string 而不是 std::string 和更大的单个字符串的新结果：

```
$ rm -f a.out ; g++ --std=c++98 test.cpp ; time ./a.out
real    0m16.637s
$ rm -f a.out ; g++ --std=c++11 -DCPP11 test.cpp ; time ./a.out
real    0m17.169s
$ rm -f a.out ; clang++ --std=c++98 test.cpp ; time ./a.out
real    0m16.222s
$ rm -f a.out ; clang++ --std=c++11 -DCPP11 test.cpp ; time ./a.out
real    0m15.652s 
```

C++98 和 C+11 之间的移动语义差异非常**小。**使用 GCC 的 C++11 稍慢，使用 clang 的速度稍快，但差异仍然很小。

**EDIT2：**现在没有`std::string`'s COW，性能提升是巨大的：

```
$ rm -f a.out ; g++ --std=c++98 test.cpp ; time ./a.out
real    0m10.313s
$ rm -f a.out ; g++ --std=c++11 -DCPP11 test.cpp ; time ./a.out
real    0m5.267s
$ rm -f a.out ; clang++ --std=c++98 test.cpp ; time ./a.out
real    0m10.218s
$ rm -f a.out ; clang++ --std=c++11 -DCPP11 test.cpp ; time ./a.out
real    0m3.376s 
```

通过优化，差异也很大：

```
$ rm -f a.out ; g++ -O2 --std=c++98 test.cpp ; time ./a.out
real    0m5.243s
$ rm -f a.out ; g++ -O2 --std=c++11 -DCPP11 test.cpp ; time ./a.out
real    0m0.803s
$ rm -f a.out ; clang++ -O2 --std=c++98 test.cpp ; time ./a.out
real    0m5.248s
$ rm -f a.out ; clang++ -O2 --std=c++11 -DCPP11 test.cpp ; time ./a.out
real    0m0.785s 
```

以上显示使用 C++11 的速度提高了约 6-7 倍。

感谢您的精彩评论和回答。我希望这篇文章对其他人也有用和有趣。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-12T12:23:58.860

> 当您不需要每次交换两个元素时都复制临时对象时，这肯定会更快。

`std::string`有一个`swap`成员，所以`sort`已经使用它，并且它的内部实现已经是移动语义，有效。`std::string`只要涉及 SSO ，您就不会看到复制和移动之间的区别。此外，某些版本的 GCC 仍然有一个非 C++11 允许的基于 COW 的实现，这在复制和移动之间也没有太大区别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T12:19:37.753

这可能是由于[小字符串优化](http://john-ahlgren.blogspot.se/2012/03/small-string-optimization-and-move.html)，对于短于例如 16 个字符的字符串，可能会发生（取决于编译器）。我猜文件中的所有行都很短，因为它们是密码。

当特定字符串的小字符串优化处于活动状态时，移动将作为副本完成。

您将需要更大的字符串才能看到移动语义的任何速度改进。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T12:29:44.287

我认为您需要对程序进行概要分析。也许大部分时间都花在了2000 万个字符串的行`T v = vec;`和向量上！！！`std::sort(..)`与移动语义无关。*

# javascript - 如何在整个浏览器上为 ajax 内容重新初始化 jscrollpane

> ID：14293154
> 
> 赞同：0
> 
> 时间：2013-01-12T12:06:02.883
> 
> 标签：javascript, jquery, jscrollpane

好的，所以我正在使用[jScrollPane](http://jscrollpane.kelvinluck.com/fullpage_scroll.html)替换浏览器的默认滚动条（主要滚动条）。我使用此功能从上面提供的链接中获取。

```
// Set jscroll for window
$(function()
{
    var win = $(window);
    // Full body scroll
    var isResizing = false;
    win.bind(
        'resize',
        function()
        {
            if (!isResizing) {
                isResizing = true;
                var container = $('#grid');
                // Temporarily make the container tiny so it doesn't influence the
                // calculation of the size of the document
                container.css(
                    {
                        'width': 1,
                        'height': 1
                    }
                );
                // Now make it the size of the window...
                container.css(
                    {
                        'width': win.width(),
                        'height': win.height()
                    }
                );
                isResizing = false;
                container.jScrollPane(
                    {
                        'showArrows': false,
                        'verticalGutter': 10
                    }
                );
            }
        }
    ).trigger('resize');

    // Workaround for known Opera issue which breaks demo (see
    // http://jscrollpane.kelvinluck.com/known_issues.html#opera-scrollbar )
    $('body').css('overflow', 'hidden');

    // IE calculates the width incorrectly first time round (it
    // doesn't count the space used by the native scrollbar) so
    // we re-trigger if necessary.
    if ($('#grid').width() != win.width()) {
        win.trigger('resize');
    }
}); 
```

现在我的问题是我使用 masonry 和 ajax 页面加载以及[imagesloaded 插件](https://github.com/desandro/imagesloaded)来等到图像加载后应用砖石。我使用这种方法来触发加载图像的砌体。

```
$(document).ready(function() {
  var $container = $('#boxes');
  // var settings = {
    // 'showArrows': false,
    // 'verticalGutter': 10
  // };
  // var pane = $('#grid')
  // pane.jScrollPane(settings);
  // var api = pane.data('jsp');
  $container.imagesLoaded(function(){
    $('#boxes').fadeIn('fast');
    $('#boxes').masonry({
      itemSelector: '.box',
      columnWidth: 234,
      gutterWidth: 12,
      isFitWidth: true,
      isResizable: true
    });
    // api.reinitialise();
  });
}); 
```

现在使用这种方法滚动条不会显示，直到浏览器调整大小。我尝试使用 api.reinitialise() 但它没有正确调整内容的大小，并且会在内容上重叠滚动条，直到调整窗口大小。

现在，当使用 ajax 加载新页面时，我还需要重新初始化 jscrollpane。我在我的 wordpress 网站上使用这种方法来加载新内容。

```
//Ajax page loading!!
$(document).ready(function($) {
    var $mainContent = $("#grid"),
        siteUrl = "http://" + top.location.host.toString(),
        url = '',
        type = '',
        contentType = ''; 
    $(document).on("click", "a[href^='"+siteUrl+"']:not([href*='/wp-admin/']):not([href*='/wp-login.php']):not([href$='/feed/'])", function() {
        type = $(this).data("type");
        location.hash = this.pathname;
        return false;
    });
    $("#searchform").submit(function(e) {
        location.hash = '?s=' + $("#s").val();
        e.preventDefault();
    }); 
    $(window).bind('hashchange', function(){
        url = window.location.hash.substring(1); 
        if (!url) {
            return;
        } 
        contentType = $("#sector").data("type");
        url = url + " #sector"; 
        $mainContent.animate({opacity: "0.1"}).html('&lt;p&gt;Please wait...&lt;/&gt;').load(url, function() {
            $mainContent.animate({opacity: "1"});
            if (type === "masonry" || contentType === "masonry") {
              var $container = $('#boxes');
              $container.imagesLoaded(function(){
                $('#boxes').fadeIn('fast');
                $('#boxes').masonry({
                  itemSelector: '.box',
                  columnWidth: 234,
                  gutterWidth: 12,
                  isFitWidth: true,
                  isResizable: true
                });         
              });
            }           
        });
    });
    $(window).trigger('hashchange');
}); 
```

因此，鉴于我的一些页面有砌体而有些没有，我需要一种方法来设置页面加载时的 jscroll 并为砌体和 ajax 加载的页面重新初始化它。这里的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:17:04.157

你必须使用这个：

```
var data = 'blah blah';
var pane = $('#scroll-pane')
var api = pane.data('jsp');
api.getContentPane().append(data);
api.reinitialise(); 
```

# php - 应用户要求在我的网站上显示另一个网页。

> ID：14293155
> 
> 赞同：-1
> 
> 时间：2013-01-12T12:06:07.453
> 
> 标签：php

> **可能重复：**
> [从另一个网站获取数据](https://stackoverflow.com/questions/3174032/fetching-data-from-another-website)

我想创建一个网页，根据用户的要求在其上显示另一个网页。用户输入 URL 并在我的网站上看到他想要的网页。对另一个页面的请求必须**来自我的服务器，而不是来自 user**。否则我只能使用 iframe。

我愿意把它写在 php 上，因为我知道一些。谁能告诉我必须知道哪些科目才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:24:02.353

为此，您需要某种“PHP 代理”，这意味着通过 curl 或 file_get_contents() 获取网站内容。看看这里：[http](http://davidwalsh.name/curl-download)
://davidwalsh.name/curl-download 您的代理脚本可能如下所示：

```
function get_data($url) {
  $ch = curl_init();
  $timeout = 5;
  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
  $data = curl_exec($ch);
  curl_close($ch);
  return $data;
}
echo get_data($_GET["url"]); 
```

请注意，您可能需要注意图像的标题等，并且可能还存在一些安全漏洞，但这是基本思想。
现在您必须解析刚获得的初始网站的内容并更改此格式的所有链接：

```
http://example.com/thecss.css 
```

至

```
http://yoursite.com/proxy.php?url=http://example.com/thecss.css 
```

一些正则表达式或 PHP HTML 解析器可能在这里工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T12:16:03.647

你可以使用

```
echo file_get_contents('http://google.com') 
```

但是为什么不直接下载一个 php webproxy 包，比如[http://sourceforge.net/projects/poxy/](http://sourceforge.net/projects/poxy/)

# django - Django REST 框架：关于对象级权限的帮助

> ID：14293160
> 
> 赞同：6
> 
> 时间：2013-01-12T12:06:47.643
> 
> 标签：django, django-rest-framework

按照本教程：

[http://django-rest-framework.org/tutorial/1-serialization.html](http://django-rest-framework.org/tutorial/1-serialization.html)

通过[http://django-rest-framework.org/tutorial/4-authentication-and-permissions.html](http://django-rest-framework.org/tutorial/4-authentication-and-permissions.html)

我有这个代码：

```
# models.py
class Message(BaseDate):
    """
    Private Message Model
    Handles private messages between users
    """
    status = models.SmallIntegerField(_('status'), choices=choicify(MESSAGE_STATUS))
    from_user = models.ForeignKey(User, verbose_name=_('from'), related_name='messages_sent')
    to_user = models.ForeignKey(User, verbose_name=_('to'), related_name='messages_received')
    text = models.TextField(_('text'))
    viewed_on = models.DateTimeField(_('viewed on'), blank=True, null=True)

# serialisers.py
class MessageSerializer(serializers.ModelSerializer):
    from_user = serializers.Field(source='from_user.username')
    to_user = serializers.Field(source='to_user.username')

    class Meta:
        model = Message
        fields = ('id', 'status', 'from_user', 'to_user', 'text', 'viewed_on')

# views.py
from permissions import IsOwner

class MessageDetail(generics.RetrieveUpdateDestroyAPIView):
    model = Message
    serializer_class = MessageSerializer
    authentication_classes = (TokenAuthentication, SessionAuthentication)
    permission_classes = (permissions.IsAuthenticated, IsOwner)

# permissions.py
class IsOwner(permissions.BasePermission):
    """
    Custom permission to only allow owners of an object to edit or delete it.
    """

    def has_permission(self, request, view, obj=None):
        # Write permissions are only allowed to the owner of the snippet
        return obj.from_user == request.user

# urls.py
urlpatterns = patterns('',
    url(r'^messages/(?P<pk>[0-9]+)/$', MessageDetail.as_view(), name='api_message_detail'),
) 
```

然后打开 API 的 URL 我得到这个错误：

```
**AttributeError at /api/v1/messages/1/
'NoneType' object has no attribute 'from_user'**

Traceback:
File "/var/www/sharigo/python/lib/python2.6/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/var/www/sharigo/python/lib/python2.6/site-packages/django/views/generic/base.py" in view
  48\.             return self.dispatch(request, *args, **kwargs)
File "/var/www/sharigo/python/lib/python2.6/site-packages/django/views/decorators/csrf.py" in wrapped_view
  77\.         return view_func(*args, **kwargs)
File "/var/www/sharigo/python/lib/python2.6/site-packages/rest_framework/views.py" in dispatch
  363\.             response = self.handle_exception(exc)
File "/var/www/sharigo/python/lib/python2.6/site-packages/rest_framework/views.py" in dispatch
  351\.             self.initial(request, *args, **kwargs)
File "/var/www/sharigo/python/lib/python2.6/site-packages/rest_framework/views.py" in initial
  287\.         if not self.has_permission(request):
File "/var/www/sharigo/python/lib/python2.6/site-packages/rest_framework/views.py" in has_permission
  254\.             if not permission.has_permission(request, self, obj):
File "/var/www/sharigo/sharigo/apps/sociable/permissions.py" in has_permission
  17\.         return obj.from_user == request.user

Exception Type: AttributeError at /api/v1/messages/1/
Exception Value: 'NoneType' object has no attribute 'from_user' 
```

似乎 None 作为参数“obj”的值传递给 isOwner.has_permission()。我究竟做错了什么？我想我严格按照教程。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-02T11:03:16.177

使用函数`has_object_permission`而不是`has_permission`.

前任：

```
def has_object_permission(self, request, view, obj=None):
    return obj.from_user == request.user 
```

并在视图中调用`check_object_permissions`get_object 内的函数

```
def get_object(self):
    obj = get_object_or_404(self.get_queryset())
    self.check_object_permissions(self.request, obj)
    return obj 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-13T08:42:10.440

何时`has_permission()`调用`obj=None`它应该返回用户是否有权访问此类型的*任何*对象。所以你应该处理 None 传递的情况。

你的代码应该是这样的：

```
def has_permission(self, request, view, obj=None):
    # Write permissions are only allowed to the owner of the snippet
    return obj is None or obj.from_user == request.user 
```

# jquery - 是否可以在 jquery 中重新定位文本？

> ID：14293161
> 
> 赞同：0
> 
> 时间：2013-01-12T12:06:47.767
> 
> 标签：jquery

是否可以使用 jquery 重新定位文本？

我能够改变它`font-weight`就像这样 -

```
$('text').css('font-weight','bold'); 
```

但找不到改变相同位置的方法。

如果是这样，它是否适用于 foreignObject 中的文本？

[http://jsfiddle.net/6s2vw/](http://jsfiddle.net/6s2vw/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:14:36.257

对于您的具体情况，您需要设置元素的 x 和 y 属性。

jQuery代码：

```
$("svg").find("rect").attr('x', $(window).width() - 100);
$("svg").find("text").attr('x', $(window).width() - 100);

$("svg").find("rect").attr('y', $(window).height() - 100);
$("svg").find("text").attr('y', $(window).height() - 80); 
```

在这里检查小提琴：http: [//jsfiddle.net/z4wyS/](http://jsfiddle.net/z4wyS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T12:25:12.470

如果我理解正确，您需要将文本放置在黄色框的右下角。为此，您可以使用：

```
$(document).ready(function(){
    $text = $("text");
    $block = $text.prev();
    x = $block.attr('width') - $text.width();
    y = $block.attr('height') - $text.height();
    $("text").attr('x', x);
    $("text").attr('y', y);
}); 
```

# c# - 在C#中同时更新两个文本框

> ID：14293164
> 
> 赞同：0
> 
> 时间：2013-01-12T12:07:23.850
> 
> 标签：c#, textbox

当我在 textbox1 中插入数据时，我需要在 textbox2 中同时放置相同的数据。

我不知道哪个事件允许此功能。我正在使用视觉工作室 2010。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T12:12:20.240

使用`TextChanged`事件`textbox1`并使用它来更新`textbox2`：

```
// This can be done via designer too.
this.textbox1.TextChanged += new EventHandler(textbox1_TextChanged); 
```

现在，在您的表单类中：

```
void textBox1_TextChanged(object sender, EventArgs e)
{
    textbox2.Text = textbox1.Text;
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T12:11:23.320

将此处理程序添加到以下`TextChanged`事件`textBox1`：

```
private void OnTextChanged(object sender, EventArgs e)
{
    var textBox = sender as TextBox;
    textBox2.Text = textBox.Text;
} 
```

# android - 在android中插入视频时遇到错误

> ID：14293172
> 
> 赞同：1
> 
> 时间：2013-01-12T12:08:29.493
> 
> 标签：android, eclipse

这是我插入 VideoView 的代码，但是当我运行它时，无法播放。

```
VideoView v =(VideoView) findViewById(R.id.videoView1);
v.setVideoPath("/sdcard/ss.mp4");
v.setMediaController(new MediaController(this));
v.start();
v.requestFocus(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:12:57.630

使用[Environment.getExternalStorageDirectory()](http://developer.android.com/reference/android/os/Environment.html)获取外部存储路径而不是静态字符串：

```
VideoView v =(VideoView) findViewById(R.id.videoView1);
String baseDir = Environment.getExternalStorageDirectory().getAbsolutePath();
v.setVideoPath(baseDir+"/ss.mp4");
v.setMediaController(new MediaController(Your_Current_Activity.this));
v.start();
v.requestFocus(); 
```

并确保您在 Androidmanifest.xml 中添加了外部存储权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# bash - 运行“bash -n FILE_OF_ARBITRARY_INPUT.txt”是否存在任何安全问题？

> ID：14293173
> 
> 赞同：1
> 
> 时间：2013-01-12T12:08:29.853
> 
> 标签：bash

`bash -n`如果假设您正在编写一个检查 bash 文件语法的 Web 服务，那么在任何用户输入上运行都会有任何安全问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:24:12.893

据我所知，`-n`应该可以按您的预期工作，但我仍然会保持谨慎：我不知道对使用`bash -n`语法检查不受信任的代码以及 C 库中`bash`或 C 库中的错误进行任何认真的检查，或者真的任何地方都可能在这里产生影响，这些影响可能以难以推理的方式被利用。

*永远不要*相信用户输入似乎总是很谨慎，像 bash 这样的大型代码库是隐藏错误的好地方。

这是我要做的：

*   准备一个 chroot 监狱来运行一个静态链接的[受限](http://www.gnu.org/software/bash/manual/html_node/Optional-Features.html)bash
*   为目的准备一个非root用户
*   编写一个脚本，从模板构建监狱，使用源文件 chroot，删除权限，关闭除 (1) 和 dups (2) 之外的所有 fd，然后最终运行`bash -n`您的程序。

# c# - 如何使用 C# 检查 SQL 查询是否成功

> ID：14293179
> 
> 赞同：13
> 
> 时间：2013-01-12T12:09:15.150
> 
> 标签：c#, sql, sql-server

我是 C# 和 SQL 的新手。现在我从一个表单访问一个类中的一个函数。

我的代码是

```
public void updateSupplierInformation(string id, string name, string balance, string place, string address, string phone, string bankname, string bankbranch, string accountno)
{
        if (conn.State == ConnectionState.Closed)
        {
            conn.Open();
        }

        SqlCommand NewCmd = conn.CreateCommand();
        NewCmd.Connection = conn;
        NewCmd.CommandType = CommandType.Text;
        NewCmd.CommandText = " update supplier set " + " ID = " + "'" + id + "'" + " , NAME = " + "'" + name + "'" + " , BALANCE = " + "'" + balance + "'" + " , PLACE = " + "'" + place + "'" + "  , LOCATION = " + "'" + address + "'" + ",  PHONE = " + "'" + phone + "'" + " , BANK_NAME = " + "'" + bankname + "'" + " , BANK_BRANCH = " + "'" + bankbranch + "'" + ", ACCOUNT_NO = " + "'" + accountno + "'" + " where ID = " + "@id";
        NewCmd.Parameters.AddWithValue("@id",id);
        NewCmd.ExecuteNonQuery(); 
        conn.Close();
    } 
```

现在，如果给定的数据库中不存在记录，`id`应用程序将立即停止。我该如何处理？我想显示输入数据错误的消息并要求用户输入其他数据

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-12T12:24:33.053

ExecuteNonQuery() 返回受 INSERT、UPDATE 或 DELETE 语句影响的行数。如果您需要检查 sql 异常，您必须在函数中包含 try catch 语句。

```
public void updateSupplierInformation(string id, string name, string balance, string place, string address, string phone, string bankname, string bankbranch, string accountno)
    {
       try
       {
        if (conn.State == ConnectionState.Closed)
        {
            conn.Open();
        }

        SqlCommand NewCmd = conn.CreateCommand();
        NewCmd.Connection = conn;
        NewCmd.CommandType = CommandType.Text;
        NewCmd.CommandText = " update supplier set " + " ID = " + "'" + id + "'" + " , NAME = " + "'" + name + "'" + " , BALANCE = " + "'" + balance + "'" + " , PLACE = " + "'" + place + "'" + "  , LOCATION = " + "'" + address + "'" + ",  PHONE = " + "'" + phone + "'" + " , BANK_NAME = " + "'" + bankname + "'" + " , BANK_BRANCH = " + "'" + bankbranch + "'" + ", ACCOUNT_NO = " + "'" + accountno + "'" + " where ID = " + "@id";
        NewCmd.Parameters.AddWithValue("@id",id);
        int a=NewCmd.ExecuteNonQuery(); 
        conn.Close();
        if(a==0)
          //Not updated.
        else
          //Updated.
        }
        catch(Exception ex)
         {
         // Not updated
         }
    } 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-12T12:10:55.153

`ExecuteNonQuery`返回受影响的行数 - 如果为 0，则表示没有匹配的行要更新。当然，只有当更新在不引发异常方面实际上“有效”时……而我怀疑它在您的情况下引发了异常，这可能与数据库中*不*存在的行无关。（请注意，您可能没有显示某些代码*确实*取决于现有的行。）

此外：

*   您应该对*所有*参数使用参数化 SQL，而不是将值直接包含在 SQL 中。
*   您应该使用`using`语句来可靠地处理资源。
*   看起来您正在使用单个连接 - 不要那样做。`using`每次要执行数据库操作时都创建（并通过）一个新连接，并让连接池处理效率
*   找出应用程序刚刚停止的原因。几乎可以肯定会抛出异常，当发生这种情况时，您可以获得异常的详细信息，这一点非常重要。根据确切的上下文，您*可能*想要抓住它并继续（在某个较高级别）......但您至少应该始终记录它。

我的*猜测*（随意检查）是问题在于您的更新语句试图更新 ID，这可能是只读的。但是当您修复异常处理时，您会发现这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-19T07:35:19.713

只需检查条件

```
int a=NewCmd.ExecuteNonQuery(); 
    if(a==0)
      //Not updated.
    else
      //Updated. 
```

ExecuteNonQuery() -> 这个函数返回整数值。

谢谢

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-25T13:46:53.823

我知道已经发布了一个答案，但让我们试试别的：

```
SqlConnection SQLConn = new SqlConnection("datahere");
SqlCommand SQLComm = new SqlCommand();
SQLcomm.Connection = SQLConn;
SQLConn.Open();
SQLComm.CommandText = "SQL statement goes here"
SqlDataReader dataReader = SQLComm.ExecuteReader();
dataReader.Read();
if(dataReader.HasRows == true){ //if it has rows do code
//do code
}
else{
// do other code
} 
```

HasRows 将返回一个布尔值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-25T10:12:32.103

让 sql =`UPDATE TABLE SET column = '${data}' WHERE column = "value`

```
db.query(sql, (err, result)=> {

            console.log(result.affectedRows);
            if(err) {
                console.log(err);
                return res.send({
                    message: "Error occured. please retry",
                });
            } else if(result.affectedRows != 0) {
                console.log(result)
                return res.send({
                    success:true,
                    message: "updated!"
                });

            }else if(result.affectedRows == 0) {
                console.log(result)
                return res.send({
                    success:false,
                    message: "not updated!"
                });
            } else {
                console.log(result)
            }
        })
//this is a nodejs code 
```

# ruby-on-rails - 使用 Time.zone 时，Rails 中的时区转换不正确

> ID：14293181
> 
> 赞同：0
> 
> 时间：2013-01-12T12:09:23.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3

```
Time.zone = 'Asia/Kolkata'
Time.zone 
=> (GMT+05:30) Asia/Kolkata 
```

Time.zone 已正确设置。

```
Time.zone.parse('0000-01-01 03:00:00 UTC').strftime('%l:%M %p')
=> " 8:53 AM" 
```

应用了不正确的偏移量（+05:33 与 +05:30）

为什么会这样？有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:23:22.807

[1941 年之前加尔各答的时区](http://www.timeanddate.com/worldclock/clockchange.html?n=54&year=1941)似乎比 UTC 早 5 小时 53 分钟。

如果您使用比那晚一年（例如 2000 年）而不是 0 年，您应该得到您期望的结果。

由于夏令时，您无法真正将 UTC 时间转换为本地时间，夏季和冬季 8:00UTC 可以转换为不同的本地时间。为了自动转换以给出正确的结果，您需要一个完整的日期，而不仅仅是一个时间。

# graph - 查找图中所有所需点的最短路径

> ID：14293187
> 
> 赞同：0
> 
> 时间：2013-01-12T12:10:53.590
> 
> 标签：graph, shortest-path, breadth-first-search

我在一次采访中被问到以下问题

> 给你一个 4 X 4 的网格。网格上的某些位置包含宝藏。您的任务是访问包含宝藏的所有位置并收集它。您可以在四个相邻的单元格（上、下、左、右）上移动。“宝藏”的每一个动作和动作都是单一的单位成本。您需要遍历整个网格，并收集网格上的所有宝藏，将所花费的成本降至最低。

如果我能正确回忆，这是给出的示例图：

```
U..X
..X.
X..X
..X. 
```

其中，U是我现在的位置，X是宝物的位置。

我提出的解决方案是使用广度优先搜索遍历图并在这样做的同时“收集宝藏”。但是，面试官坚持认为有更好的方法可以将成本降到最低。我希望你能帮助我弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T12:22:00.373

您应该已经认识到这是一个小小的伪装的旅行推销员问题。使用广度优先，您可以确定您必须访问的不同顶点之间的最短路径，从而为您提供一个派生图，其中仅包含这些路径作为顶点之间的加权边。从那时起，它就是经典的 TSP。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T12:22:58.310

单独的 BFS 无法为您解决问题，因为您无法同时向各个方向移动。这不是单一来源的最短路径问题，因为一旦你收集到宝藏，你就会从当前位置开始通往下一个的路径，而不是从原来的位置开始。

收集所有宝藏所需的时间取决于您访问箱子的顺序`X`。由于只有五个，您可以尝试所有 120 个排序，计算成本，然后选择最好的一个。

请注意，如果顺序是固定的，则解决方案很简单：您按顺序将单元格之间的[曼哈顿距离](http://en.wikipedia.org/wiki/Taxicab_geometry)相加，然后选择最小的结果。

# layout - ZF2 部分循环错误

> ID：14293189
> 
> 赞同：0
> 
> 时间：2013-01-12T12:11:02.670
> 
> 标签：layout, partial-views, zend-framework2

将我的项目从我的本地（osx）开发转移到（debian）生产让我陷入了一些错误。在我的本地开发人员上一切正常，但在 debian 上出现了两个问题。

我的 layout.phtml 不会呈现（没有错误），并且我在部分循环中收到此错误。

错误输出粘贴：

[http://pastebin.com/74g1dL8g](http://pastebin.com/74g1dL8g)

谢谢！:) 尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:03:28.420

正如错误状态。

`"Rows as part of this DataSource, with type object cannot be cast to an array"`.

您必须使用没有数据的仅结构选项移动数据库。在您的代码中某处，您没有放置空检查来验证数据集或记录。我认为它试图将空对象转换为数组....

您需要使用提供逐步调试的 XDebug 来调试您的应用程序，并且可以与 eclipse PDT、netbeans 甚至 vim 一起使用。

或者

使用老式的方式

```
echo "programing working to till this line";
exit(); 
```

# python - 使用 python 执行 PL/PGSQL 块而不将它们存储到数据库中

> ID：14293195
> 
> 赞同：0
> 
> 时间：2013-01-12T12:12:19.193
> 
> 标签：python, postgresql, postgresql-9.2

我正在使用 python 构建 Django 应用程序，该应用程序预计会接收大量数据，我已经研究了一些可以提高性能的 PL/PGSQL 程序。这些过程存储在文件中，我不想在数据库上创建它们。

我只想能够使用 postgresql_psycopg2 执行它们，另一个棘手的部分是我希望能够在执行之前更改文件中的某些参数，但不确定如何处理它。

这是我的 Python 代码

```
 pg_script = os.path.join(getattr(settings, 'BASE_DIR'),'myapp/apps/rating/sql/rating_create_article_rating.sql')

        cursor = connection.cursor()
        cursor.execute("run script %s" % pg_script) 
```

这是 rating_create_article_rating.sql

```
DECLARE
    article_rec   publication_article%ROWTYPE;
    user_rec      auth_user%ROWTYPE;
    up            integer := 1;
    down          integer := -1;
    l_counter     integer := 0; -- local counter
    cnt           integer;
    p_content_type_id integer;
BEGIN

    LOOP
        -- RANDOM ARTICLE
        SELECT *
        INTO article_rec
        FROM publication_article
        order by random()
        LIMIT  1;

        -- RANDOM USER
        SELECT *
        INTO user_rec
        FROM auth_user
        order by random()
        LIMIT  1;

        BEGIN
          INSERT INTO rating_rate (rated_by_id, rated_at, content_type_id, object_id, rate, language)
          VALUES (user_rec.id, now(), p_content_type_id, article_rec.id, 1, 'en');
          l_counter := l_counter+1;
        EXCEPTION
              WHEN unique_violation THEN

        END;

        EXIT WHEN l_counter>cnt;
    END LOOP;

    RETURN;
END;
$$ LANGUAGE plpgsql; 
```

当我将上面的代码作为存储函数执行时，上面的代码有效，否则运行脚本不起作用，我收到以下错误

```
ERROR:  syntax error at or near "run" at character 1
STATEMENT:  run script /Users/mo/Projects/pythonic/myapp-env/myapp/myapp/apps/rating/sql/rating_create_article_rating.sql 
```

我还想知道是否有办法将参数传递给文件并从 pl/pgsql 处理它？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:09:03.617

首先，我更喜欢将这些东西放在函数中。一个重要的原因是这有助于分离 sql​​ 和应用程序代码，使其更易于阅读和查找所需内容。函数也可以进行一些优化。

如果这还不够，请使用 DO 块。DO 块有许多重要的限制。例如，它们不能返回结果。这意味着如果您想返回有关插入等的有用信息，则不能这样做。

`DO`创建一个没有返回类型的匿名函数。您将在块中包含您的函数体，`DO LANGUAGE PLPGSQL $$ .. $$;`它将立即运行。

# if-statement - cmd 如果脚本不起作用

> ID：14293197
> 
> 赞同：0
> 
> 时间：2013-01-12T12:12:22.347
> 
> 标签：if-statement, batch-file, cmd

```
@echo off
pause
color 0a
mode 1000

set /p apps = where do you want to go to?
echo metrix = 1
echo nothing = 2
pause

if %apps% == 1 goto metrix
if %apps% == 2 goto nothing

:metrix
:start
echo %random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random% %random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random% %random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random%%random%
goto start

:nothing
echo nothing
pause
exit 
```

为什么它不起作用？

我从教程中复制了它，但我不知道为什么它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:29:35.393

在以下语句中删除“=”前后的空格。

set /p apps = 你想去哪里？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T09:09:42.087

除了 CuriousMind 的建议之外，您还应该以这种方式进行比较：

```
if "%apps%"=="1" goto metrix
if "%apps%"=="2" goto nothing 
```

使用引号和删除多余的空格更安全。你可能还想写

```
echo metrix = 1
echo nothing = 2
set /p apps = where do you want to go to? 
```

以便在问题之前显示回声。

# android - android.annotation.SuppressLint 未定义

> ID：14293203
> 
> 赞同：0
> 
> 时间：2013-01-12T12:13:36.973
> 
> 标签：android

我是 Android 新手，尝试在 Android 中使用 Linphone 插件在导入此 API 后获取 android.annotation.SuppressLint 未定义错误。注解类型TargetApi PlusApi.java的属性值未定义请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T11:01:47.880

将您的目标 API 更改为 16 或按如下方式导入 lint jar：将光标移到“SuppressLint”上，它将带​​有红色下划线。选择修复选项“修复项目设置”。从弹出列表中选择“添加存档'annotations.jar'。祝你有快乐的一天。

# google-apps-script - Google Apps 脚本 - 发出 getCalendarsByName 然后 getEvents

> ID：14293204
> 
> 赞同：1
> 
> 时间：2013-01-12T12:13:49.390
> 
> 标签：google-apps-script

我正在构建一个 Google Apps 脚本代码，它将事件从日历写入电子表格。我要使用的日历不是我的默认日历，我想按名称获取此日历。但是，该方法不起作用... getCalendarById 确实有效，但是由于此脚本适用于未启动的用户，因此我需要按名称获取日历...

感谢您的进一步帮助！

```
var cal = CalendarApp.getCalendarsByName("Test 21");    
// var cal = CalendarApp.getDefaultCalendar(); 
var sheet = SpreadsheetApp.getActiveSheet();

var events = cal.getEvents(new Date("January 1, 2012"), new Date("December 31, 2030"));

for (var i=0;i<events.length;i++) {

var details=[[events[i].getTitle(), events[i].getDescription(), events[i].getStartTime(), events[i].getEndTime()]];

var row=i+1;

var range=sheet.getRange(row,1,1,4);

range.setValues(details);

}
} 
```

当我启动我的脚本时，我收到错误：TypeError：在日历中找不到方法 getEvents。（第 22 行）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:24:45.473

你注意到里面的“s”了`getCalendarsByName`吗？这意味着此方法返回一个日历对象数组，因为可以有许多具有相同名称的日历。如果您认为很可能只有一个带有您输入的名称的日历，那么您可以决定只获取第一个。

为此，只需像这样定义 Cal

```
var cal  = getCalendarByName(name string)[0] 
```

# sql-server-2008 - 使用 vb.net SqlCommand 选择 SQL Server 2008 中最后插入的记录，CommandType 设置为文本“不使用任何存储过程”

> ID：14293206
> 
> 赞同：3
> 
> 时间：2013-01-12T12:14:07.213
> 
> 标签：sql-server-2008

> **可能重复：**
> [在 SQL Server 2000 中获取最后插入的 UNIQUEIDENTIFIER](https://stackoverflow.com/questions/5863168/get-last-inserted-uniqueidentifier-in-sql-server-2000)

这是我的表架构

```
CustomersID     uniqueidentifier    (newid())
CompanyName     nvarchar(50)
RegistrantName  nvarchar(50)
AddressLine1    nvarchar(50)
AddressLine2    nvarchar(50)
City            nvarchar(50)
State           nvarchar(50)
Country         nvarchar(50)
Zip             nvarchar(20)
PhoneNo         nvarchar(50)
MobileNo        nvarchar(20)
FaxNo           nvarchar(20)
Website         nvarchar(250)
Email           nvarchar(250) 
```

由于我没有在我的表中使用任何身份字段，因此我无法使用`SCOPE_IDENTITY()`来获取最后插入的记录 ID。我需要`CustomersID` 在插入记录后得到。这怎么可能？

# css - css：两列div

> ID：14293208
> 
> 赞同：2
> 
> 时间：2013-01-12T12:14:31.577
> 
> 标签：css, html, web

> **可能重复：**
> [ie8 和 ie7 的 2 列 div](https://stackoverflow.com/questions/1280456/2-columns-div-for-ie8-and-ie7)

在我的网站中，我需要在一个`<div>`（黑色方块，它是一种容器）内添加两列`<div>`s。你可以从我附上的图更容易地理解它。

它应该：

1.  支持主流浏览器（不需要Explorer **6**）
2.  相对简单
3.  轻松更改两列之间的空间大小。
4.  改变`<div>`s的水平位置。

非常感谢。 ![草图](../Images/4b31eacc974cc50be08cb64e8bb304da.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T12:57:06.280

```
<style type="text/css">
#black {height:600px;width:500px;border:2px solid #000000;}
#black div{height:80px;width:150px;margin-top:20px;}
.green {border:2px solid #009900;float:left;margin-left:60px;}
.red{border: 2px solid #FF0000;float:right;margin-right:60px;}
</style>

   <div id="black">
        <div class="green"></div> <div class="red"></div>
        <div class="green"></div> <div class="red"></div>
        <div class="green"></div> <div class="red"></div>
        <div class="green"></div> <div class="red"></div>
   </div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T13:03:03.890

HTML

```
 <div class="container">
    <div class="box col1"></div>
    <div class="box col2"></div>
    <div class="box col1"></div>
    <div class="box col2"></div>
    <div class="box col1"></div>
    <div class="box col2"></div>
</div> 
```

CSS

```
.container {width:100%; padding: 50px; border:2px solid #000; float: left;}
.box {width:100px;height:100px;margin: 10px;}
.col1 {border:2px solid red;float:left;clear:left;}
.col2 {border:2px solid green;float:left;} 
```

修改**.box**填充以更改两列之间的空间大小

修改**.container**填充以更改容器内列的水平位置。

JSFiddle：http: [//jsfiddle.net/reB7v/](http://jsfiddle.net/reB7v/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T12:23:07.213

试试这个：

```
 <style>           
        .outer{width:100%; padding: 20px; border:1px solid #000; float: left;}
        .red{width: 20%; height: 40px; border:2px solid red; float: left;  margin: 20px;}
        .green{width: 20%; height: 40px; border:2px solid green; float: left; margin: 20px;}
         .clear{clear:both;}
    </style>

     <div class="outer">
        <div class="red"></div>
        <div class="green"></div>
        <div class="clear"></div>
        <div class="red"></div>
        <div class="green"></div>
    </div> 
```

希望它会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T12:43:20.030

嵌套列可以分为网格系统和流体网格系统。您可以从[Bootstrap](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)获取信息并复制其嵌套列 CSS。

# ruby - 为什么不同的输出来自带有和不带有“puts”的数组？

> ID：14293215
> 
> 赞同：-1
> 
> 时间：2013-01-12T12:15:05.443
> 
> 标签：ruby, arrays, inspect

`puts a1.zip(a2)`和 和有什么不一样`a1.zip(a2)`？为什么输出以不同的方式出现？

```
a1 = %w{a b c}
a2 = %w{1 2 3}

a1.zip(a2)
# => [["a", "1"], ["b", "2"], ["c", "3"]]

puts a1.zip(a2)
# =>
# a
# 1
# b
# 2
# c
# 3
#=> nil 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:22:00.683

你在做`puts`一个，只是在另一个做`zip`电话。为什么你期望它们是一样的？

`puts`确实在自己的行中打印数组的每个元素，这就是您在此处看到的。IRB 默认用于`inspect`打印对象。虽然您看到的不同，但`zip`两种情况下方法的输出是相同的。

# php - 添加 Limit 可以加快 mysql 查询速度，为什么？

> ID：14293218
> 
> 赞同：2
> 
> 时间：2013-01-12T12:15:42.297
> 
> 标签：php, mysql, sql

我有一个带有 INNER JOIN 的简单查询。连接的表有 1500 和 2500 行。两个表都有一个主键。未在此键上完成连接。

此查询的结果集有 1500 行。当我运行此查询时，它需要 20 秒......（*永恒*）

```
SELECT so.order_id
FROM   shop_orders so
       INNER JOIN shop_order_payments sop
          ON so.order_code = sop.order_code
WHERE  sop.status = 9
ORDER  BY date_created DESC 
```

当我在末尾添加“LIMIT 1500”时，查询只需 1 秒。（当我删除它时，它又需要 20 秒，所以它不是缓存......）

1.  为什么是这样 ？
2.  有没有一种快速的方法来找出这个查询有多少行？

注意：我使用 mysql() 函数在 php 脚本中运行此查询）

*update1: EXPLAIN 的结果

```
id select_type table type possible_keys key key_len ref rows Extra
1 SIMPLE sop ALL NULL NULL NULL NULL 1153 使用 where；使用临时的；使用文件排序
1 SIMPLE 所以 ALL NULL NULL NULL NULL 2529 使用 where

```

*   更新 2：

我按照评论中的要求运行了 DESC

```
payment_id - int(11) NO PRI auto_increment
时间戳 - 时间戳 NO CURRENT_TIMESTAMP   
order_code - varchar(100)NO         
接受 - varchar(50) 否         
金额 - varchar(20) 否          

```

所以只显示一个主索引，这还不够索引吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:25:23.347

`EXPLAIN`告诉查询没有使用索引。因此它执行全表扫描，导致它很慢。

尝试运行此语句，

```
ALTER TABLE shop_orders ADD INDEX td_idx (order_code);
ALTER TABLE shop_order_payments ADD INDEX td2_idx (order_code); 
```

并再次运行`SELECT`查询。

**更新 1**

您的表有一个索引，但`payment_id`在这种情况下没有使用的列上，因为连接使用的是 column `order_code`。您还必须在该列上定义一个索引。

# android - 在 Eclipse 中，使用 Android New Activity 向导时是否可以使用支持库

> ID：14293219
> 
> 赞同：2
> 
> 时间：2013-01-12T12:15:43.220
> 
> 标签：android, eclipse, android-support-library

在 Eclipse 中为 Android 应用程序使用新活动向导时

> 文件 -> 新建 -> 其他 -> Android -> Android Activity

我收到警告

> 此模板要求最低 SDK 版本至少为 11，当前最低版本为 8

向导中的大多数选项都会发生这种情况，但现在我想创建一个新的主细节活动，它将利用片段。

我正在使用 actionbar sherlock，并且我在项目中注册了最新的支持库 jar。我想使用向导，因为片段对我来说是新的，而且似乎需要很多我不熟悉的代码。因此，我将向导用作学习过程，以了解片段应该如何正确实现和无故障，这是我目前还没有信心手动完成的事情。

在我看来，我应该能够告诉向导使用支持库方法和类，但我似乎无法弄清楚如何做到这一点，这似乎很明显。

我可以将我的 min sdk 级别更改为 11，使用向导，将 min sdk 级别更改回 8 并进行所需的支持库更改，但真是太痛苦了！

**更新**

我将如何更改 Eclipse 或 android sdk 的源代码来实现这一点，因为它们都是开源的，对吗？我应该从哪里开始寻找？任何想法都非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:30:48.903

不幸的是，答案是否定的。

*新建 Android 应用程序*向导不允许您在创建新项目时选择/添加第三方支持库到您的项目。默认情况下，它将添加的唯一库是`android-support-v4.jar`库。

我想这是一个小小的权衡。新向导，尤其是*Android Activity*，在快速创建新活动时确实简化了一些事情。但我想，在谷歌添加这样的条款之前，我们将不得不忍受这一点。也就是说，如果他们选择在某个时间添加它。

**更新 1**

Eclipse 是开源的。这些是 Eclipse Source 可用的所有源：http: [//git.eclipse.org/c/](http://git.eclipse.org/c/)。但是，我认为修改 Eclipse 不会有帮助。我几乎可以肯定，它比 Eclipse 本身更多的是 ADT / SDK 所做的。但我只是在猜测这个。

**更新 2**

您可以从此处下载 SDK 源代码：[https](https://android.googlesource.com/platform/sdk/) ://android.googlesource.com/platform/sdk/ 。祝你好运。:-)

# zend-framework - Zend 插件的 preDispatch 看不到角色

> ID：14293227
> 
> 赞同：1
> 
> 时间：2013-01-12T12:17:06.593
> 
> 标签：zend-framework, plugins, acl

我尝试在插件的 preDispatch 方法中使用 ACL，但它看不到角色和资源。

在引导程序中：

```
protected function _initAutoLoad() {
...

$acl=new Application_Model_LibraryAcl();
$auth=Zend_Auth::getInstance();
$fc= Zend_Controller_Front::getInstance();
$fc->registerPlugin(new Application_Plugin_AccessCheck($acl, $auth));
...
} 
```

在插件的 preDispatch 中：

```
$this->_acl = $acl;
$this->_auth=Zend_Auth::getInstance();
$identity = $this->_auth->getStorage()->read();
$role=$identity->role;
$resource = $request->getControllerName();
$action= $request->getActionName();
if($this->_acl->isAllowed($role, $resource, $action)){
...
} 
```

而且我收到错误“找不到角色'管理员'”（此错误适用于所有角色）。无论我尝试做什么，它都不起作用。我通过将 ACL 代码从 Model 移动到这个插件来解决这个问题，但我认为将 ACL 保留在这里并不是一个好主意。其他模型和控制器可以从 Application_Model_LibraryAcl 及其角色和资源中看到 ACL，但插件的 preDispatch 不希望看到。

我使用 ZF 1.12。

编辑。我的 Application_Model_LibraryAcl() 是：

```
<?php
class Application_Model_LibraryAcl extends Zend_Acl {

    public function __construct(){

        //----------------------ADD ROLES HERE---------------------------------

        $acl = new Zend_Acl();
        $acl->addRole(new Zend_Acl_Role('guest'));
        $acl->addRole(new Zend_Acl_Role('user'), 'guest');
        $acl->addRole(new Zend_Acl_Role('admin'), 'user');

        //----------------------ADD RESOURCES HERE---------------------------------

        $acl->add(new Zend_Acl_Resource('authentication'));
        $acl->add(new Zend_Acl_Resource('index'));

        //----------------------ADD PERMITIONS HERE---------------------------------

        $acl->deny();

        $acl->allow('admin', NULL);
        $acl->allow('guest', 'authentication', array('login', 'registration', 'confirm', 'index' ));
        $acl->allow('guest', 'index', array('index' ));
        $acl->allow('user', 'index', array('index', 'confirm'));
        $acl->allow('user', 'authentication', array('logout' ));
        $acl->deny('user', 'authentication', array('login' ));

    }

} 
```

我在 Zend 存储中保留当前用户的角色。当我将所有代码从模型移动到插件而不进行任何更改时，此代码工作正常。如果我使用模型，我在这个字符串上有错误：

```
if($this->_acl->isAllowed($role, $resource, $action)) 
```

并且当我使用 ACL 作为插件的一部分时没有任何错误。

# c# - 如何使用带有 vbscript 的 EFS 加密文件？

> ID：14293228
> 
> 赞同：1
> 
> 时间：2013-01-12T12:17:08.577
> 
> 标签：c#, encryption, vbscript

是否可以使用 vbscript 以编程方式加密文件（使用 EFS）。是否有任何 EFS API 可以在 Windows 7 上与 c# 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:08:27.813

我将您的答案翻译为 C#：

```
WshShell sh1 = new WshShell(); 
var retval = sh1.Run("CIPHER /E /S:" & strDir, 0, True); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T03:52:43.607

还没有答案！！同时一种选择是使用以下脚本

```
Dim strDir, objShell, FSO, WshShell
strDir = "D:\TestFolder"
Set objShell = CreateObject("Shell.Application")
Set FSO = CreateObject("Scripting.FileSystemObject")
Set WshShell = WScript.CreateObject("WScript.Shell")
retval = WshShell.Run("CIPHER /E /S:" & strDir, 0, True)
MsgBox("Success") 
```

# android - 如何以编程方式从 android 读取 SIM SENT SMS 消息？

> ID：14293229
> 
> 赞同：1
> 
> 时间：2013-01-12T12:17:52.330
> 
> 标签：android, sms

我正在尝试加载所有 SIM 发送的 SMS 消息，但我不知道除了 **“content://sms/icc”和“content://sms/sim”之外的内容提供商 URI 是什么，**并且这些 uris 仅加载收到的消息。

如何加载 SIM 卡已发送消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:20:22.763

**使用此代码**

它对我有用，它会帮助你阅读`SMS`。

```
 /* location of sms inbox*/    
public static final String CONTENT = "content://sms/inbox";
/*location of sms on sim card */
public static final String SIMCONTENT = "content://sms/sim";
/*name of address field*/
public static final String ADDRESS = "address";
/*name of body field*/
public static final String BODY = "body";

/*cursor incoming sms*/
private static Cursor inboxCursor;
/*cursor sms on sim card*/
private static Cursor simCursor;

   initCursors(Context context){
        inboxCursor = context.getContentResolver()
                        .query(Uri.parse(CONTENT), null, null, null, null);
        simCursor = context.getContentResolver()
                        .query(Uri.parse(SIMCONTENT), null, null, null, null);  
}

 /**
  * Reading SMS from telephone memory.
  * @return a Map object where key - telephone number, value - a  List 
  * consisting of messages.
  */
public Map<String, List<String>> readTelephoneSms() {
    Map<String, List<String>> smsData = new HashMap<String, List<String>>();
    while (inboxCursor.moveToNext()) { 
        if(smsData.containsKey(inboxCursor.getString(inboxCursor.getColumnIndex(ADDRESS)))){
            smsData.get(inboxCursor.getString(inboxCursor.getColumnIndex(ADDRESS)))
                    .add(inboxCursor.getString(inboxCursor.getColumnIndexOrThrow(BODY)));
        }else{
            List<String> data = new ArrayList<String>();
            data.add(inboxCursor.getString(inboxCursor.getColumnIndexOrThrow(BODY)));
            smsData.put(inboxCursor.getString(inboxCursor.getColumnIndex(ADDRESS)), data);
        }
    }

    return smsData;
}

/**
  * Reading SMS from Sim card memory.
  * @return a Map object where key - telephone number, value - a  List
  * consisting of messages.
  */
public Map<String, List<String>> readSimSms() {
    Map<String, List<String>> smsData = new HashMap<String, List<String>>();
  while (simCursor.moveToNext()) { 
    if(smsData.containsKey(simCursor.getString(simCursor.getColumnIndex(ADDRESS)))){
        smsData.get(simCursor.getString(simCursor.getColumnIndex(ADDRESS)))
                .add(simCursor.getString(simCursor.getColumnIndexOrThrow(BODY)));
    }else{
        List<String> data = new ArrayList<String>();
        data.add(simCursor.getString(simCursor.getColumnIndexOrThrow(BODY)));
        smsData.put(simCursor.getString(simCursor.getColumnIndex(ADDRESS)), data);
    }           
}
    return smsData;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-11T04:56:16.693

您可以使用此 URI 在 android中访问已**发送的消息。**

* * *

> Uri sentURI = Uri.parse("content://sms/sent");

* * *

# javascript - 从 Javascript 中的 URL 检索后无法显示变量值

> ID：14293236
> 
> 赞同：1
> 
> 时间：2013-01-12T12:19:17.127
> 
> 标签：javascript, html

我是 javascript 新手，我的脚本有问题。在从 URL 检索数据后，我试图将一个名为**Ideal的变量显示为名为****weight**的 id ，但它不起作用。谁能帮我解决这个问题，我真的很感激......

这是javascript代码

```
<script>
    function formSubmit()
    {
        document.getElementById("frm1").submit();
        var x = document.getElementById("frm1");

    }
    function getUrlVars() {
            var vars = {};
            var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
            vars[key] = value;
        });
        return vars;
    }

    var first = getUrlVars()["height"];
    if(first<100){
        alert("Sorry, your height is not available");
    }else{
        var ideal = ((first-100)-(0.1*(first-100)));
        //alert(ideal); 
    }
    function update(){
        document.getElementById("weight").innerHTML=ideal;

    }

    </script>
</head> 
```

这是HTML

```
<!-- <div id="pg1" data-role="page">
        <div data-role="content" style="background-color: whitesmoke; height: 480px;">
    <div class="ui-grid-b">
                <div class="ui-block-a"></div>
                <div class="ui-block-b" style="padding-top: 100px;">
                    <center> <h1></h1></center>
                    <center><h4></h4></center>
                    <form id="frm1">
                    <label for="txt_val"></label>
                    <input type="text" name="height" id="txt_val" value=""  placeholder="160.5" required/>
                    <center><a href="#" data-inline="true" data-role="button" onclick="formSubmit()"></a></center>
                    <p id="weight" onclick="update()"></p>
                    </form>

                </div>
                <div class="ui-block-c"></div>
            </div>

        </div> --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:30:46.753

好吧，您定义变量**Ideal**的位置是在本地范围内，无法适应您的函数**update**。

您可以**先**在全局变量之后定义它，然后在当前位置为其赋值。

# flash - 如何在 FLA 文件中找到 AS 代码

> ID：14293237
> 
> 赞同：1
> 
> 时间：2013-01-12T12:19:20.970
> 
> 标签：flash, actionscript

我有一个没有附加 AS 文件的 .FLA 文件，但我认为它在他的内部，问题是如果我无法打开它，我该如何编辑这个 .FLA 文件内部的那些 AS，也许反编译？

ps：这个 .FLA 是由其他只给我 .FLA 和 .SWC 文件的程序员制作的，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:41:37.403

地狱编码先生..

试试这个 Press, Alt + F3 on your keyboard，将出现窗口资源管理器。

你会发现AS文件在哪里..

祝你好运 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:58:01.873

查看库符号并查看是否定义了基类并查看文件的 Actionscript 设置以查看是否定义了文档类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:51:26.723

检查库右键单击某些内容并按编辑类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T06:05:30.570

地狱编码器..

如果单击 f9 或 Alt+f3 未找到 actionscript，则该 fla 文件具有远程 XML。我的意思是你的 fla 的 swf 电影将在互联网连接时运行，否则它不会运行。只需检查一下，断开您的互联网并运行您的 swf 电影。如果它不会运行。您不能将其视为文件。

# python - 在 Tornado 中运行阻塞代码

> ID：14293238
> 
> 赞同：3
> 
> 时间：2013-01-12T12:19:28.253
> 
> 标签：python, asynchronous, tornado

我有一个龙卷风应用程序，我想使用一个阻塞库来完成一些事情。在无法以异步方式重写库的情况下，在 tornado 中执行它的方法是什么？

例如，我希望能够`@asynchronous`在请求处理程序上放置一个装饰器，在它启动一些长时间运行的函数，一旦完成就会返回响应。我不能只是回调。最简单的例子当然是在不阻塞龙卷风唯一线程的情况下睡眠 10 秒的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-05T03:32:47.920

接受的答案所指的代码[可在 SO 上找到](https://stackoverflow.com/q/14306360/1599229)。

[另一种方法在此处](http://lbolla.info/blog/2013/01/22/blocking-tornado)的博客文章中进行了详细介绍，并附有[完整的工作要点](https://gist.github.com/lbolla/4594879)。这是从要点重新发布的代码：

```
from concurrent.futures import ThreadPoolExecutor
from functools import partial, wraps
import time

import tornado.ioloop
import tornado.web

EXECUTOR = ThreadPoolExecutor(max_workers=4)

def unblock(f):

    @tornado.web.asynchronous
    @wraps(f)
    def wrapper(*args, **kwargs):
        self = args[0]

        def callback(future):
            self.write(future.result())
            self.finish()

        EXECUTOR.submit(
            partial(f, *args, **kwargs)
        ).add_done_callback(
            lambda future: tornado.ioloop.IOLoop.instance().add_callback(
                partial(callback, future)))

    return wrapper

class MainHandler(tornado.web.RequestHandler):

    def get(self):
        self.write("Hello, world %s" % time.time())

class SleepHandler(tornado.web.RequestHandler):

    @unblock
    def get(self, n):
        time.sleep(float(n))
        return "Awake! %s" % time.time()

class SleepAsyncHandler(tornado.web.RequestHandler):

    @tornado.web.asynchronous
    def get(self, n):

        def callback(future):
            self.write(future.result())
            self.finish()

        EXECUTOR.submit(
            partial(self.get_, n)
        ).add_done_callback(
            lambda future: tornado.ioloop.IOLoop.instance().add_callback(
                partial(callback, future)))

    def get_(self, n):
        time.sleep(float(n))
        return "Awake! %s" % time.time()

application = tornado.web.Application([
    (r"/", MainHandler),
    (r"/sleep/(\d+)", SleepHandler),
    (r"/sleep_async/(\d+)", SleepAsyncHandler),
])

if __name__ == "__main__":
    application.listen(8888)
    tornado.ioloop.IOLoop.instance().start() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T05:26:18.513

似乎我想要的只是创建一个新线程/进程，并且需要完成回调龙卷风的实际行为`IOLoop.instance().add_callback`

更多信息可[在此处获得](http://tornadogists.org/2185380/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T22:18:42.427

试试下面这个例子。

```
import tornado.ioloop
import tornado.web
import time

class MainHandler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    def get(self, request):
        if request is None:
            self.application.go = False
            self.write("Waiting for GET @ http://localhost:8888/go...<br>")
            self.flush()
            self._do_wait()
        else:
            self.application.go = True
            self.finish('Thanks!')

    def _do_wait(self, timeout_trys=10):
        if self.application.go:
            self.write('Finish')
            self.finish()
        else:
            self.write("Sleeping 2 second, timeout_trys=%s<br>" % timeout_trys)
            self.flush()
            tornado.ioloop.IOLoop.instance().add_timeout(time.time() + 2, 
                lambda: self._do_wait(timeout_trys-1))

application = tornado.web.Application([
    (r"/(\w+)?", MainHandler),
])

if __name__ == "__main__":
    application.listen(8888)
    tornado.ioloop.IOLoop.instance().start() 
```

# c# - StartPosition 设置为 CenterPosition 但我的表单未居中

> ID：14293241
> 
> 赞同：6
> 
> 时间：2013-01-12T12:20:09.223
> 
> 标签：c#, winforms, visual-studio, multiple-monitors

我正在使用 Visual Studio 2012。我的表单在打开时不会以屏幕为中心。我将表单`StartPosition`设置为`CenterScreen`，但它总是从左显示器的左上角开始（我有 2 个显示器）。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T12:32:55.200

试试这个方法！

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            //Method 1\. center at initilization
            this.StartPosition = FormStartPosition.CenterScreen;

            //Method 2\. The manual way
            this.StartPosition = FormStartPosition.Manual;
            this.Top = (Screen.PrimaryScreen.Bounds.Height - this.Height)/2;
            this.Left = (Screen.PrimaryScreen.Bounds.Width - this.Width)/2;

        }
    }
} 
```

在应用程序的构造函数中调用了两个虚拟成员。

即

```
this.Text; 
this.MaximumSize; 
```

不要在构造函数中调用虚拟成员可能会导致异常行为

固定代码

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            this.Location = new System.Drawing.Point(100, 100);
            this.Name = "Form1";
            this.StartPosition = System.Windows.Forms.FormStartPosition.CenterScreen;
            // to see if form is being centered, disable maximization
            //this.WindowState = System.Windows.Forms.FormWindowState.Maximized;
            this.Load += new System.EventHandler(this.Form1_Load);
            this.ResumeLayout(false);
            this.PerformLayout();

        }

        private void Form1_Load(object sender, EventArgs e)
        {
            this.Text = "Convertor";
            this.MaximumSize = new System.Drawing.Size(620, 420); 
        }
    }
} 
```

# networking - 自由开关认证

> ID：14293242
> 
> 赞同：3
> 
> 时间：2013-01-12T12:20:20.613
> 
> 标签：networking, sip, voip, freeswitch

我是freeswitch世界的新手，如果我向freeswitch发送UDP邀请数据包，我已经被黑客入侵了，有人使用我的网关并初始化来自未注册用户的呼叫而没有任何身份验证（在我自己测试之后）服务器在linux中使用nc命令如下：

```
$ nc -u x.x.x.x 5060 < invite

invite file contain the following : 
INVITE sip:+99xxxxxxx@x.x.x.x SIP/2.0
Via: SIP/2.0/UDP x.x.x.x:5060
Max-Forwards: 70
To: Bob <sip:+99xxxxxx@xxx.xxx.xxx.xxx>
From: Alice <sip:101@x.x.x.x>;tag=1928301774
Call-ID: a84b4c76e66710@pc33.atlanta.com
CSeq: 314159 INVITE
Contact: <sip:101@192.168.15.50>
Content-Type: application/sdp
Content-Length: 142

v=0
o=ibc 1090098764 894503441 IN IP4 192.168.1.33
s=-
c=IN IP4 192.0.2.200
t=0 0
m=audio 33445 RTP/AVP 98 97 8 0 3 101
a=rtpmap:98 speex/16000
a=rtpmap:97 speex/8000
a=rtpmap:8 PCMA/8000
a=rtpmap:0 PCMU/8000
a=rtpmap:3 GSM/8000
a=rtpmap:101 telephone-event/8000
a=fmtp:101 0-15
a=ptime:20
a=zrtp 
```

我发现以下内容：
用户 101 是未注册用户，并且在数据包中没有 authintication 标头，即使 freeswitch 允许通过我的网关进行呼叫。

那么在通过网关发起呼叫之前，有什么方法可以验证呼叫者的用户名和密码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-03T08:43:07.393

我的第一个猜测是检查 sofia.conf.xml 寻找

```
<param name="accept-blind-auth" value="true"/> 
```

在这里，您可以了解有关 FS 中 sip 身份验证的更多详细信息： [http ://wiki.freeswitch.org/wiki/Sofia_Configuration_Files#Auth](http://wiki.freeswitch.org/wiki/Sofia_Configuration_Files#Auth)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-04T07:00:58.030

我同意@borik-bobrujskov 的观点，只是扩展了相同的答案。

在 sip_profiles/external.xml 添加以下选项

```
<param name="auth-calls" value="true"/>
<param name="accept-blind-auth" value="false"/>
<param name="log-auth-failures" value="true"/>
<param name="auth-all-packets" value="true"/> 
```

这将确保为每个传入的 sip 请求发回如下所示的代理身份验证挑战

```
SIP/2.0 407 Proxy Authentication Required
Via: SIP/2.0/UDP x.x.x.x:5060;branch=z9hG4bK4d5f.11c7cfacce4d26c8fd1b01339c08b1dc.0
From: "1001"<sip:100@x.x.x.x;transport=TCP>;tag=18aa565e
To: <sip:200@y.y.y.y:5080;pstn_inbound=;ignore_userinfo=>;tag=eX6m9Ktp48aaF
Call-ID: ZwRgsMB3luEHyKaM2vL9eQ..
CSeq: 1 INVITE
User-Agent: FreeSWITCH-mod_sofia/1.9.0-742-8f1b7e0~64bit
Accept: application/sdp
Allow: INVITE, ACK, BYE, CANCEL, OPTIONS, MESSAGE, INFO, UPDATE, REGISTER, REFER, NOTIFY
Supported: timer, path, replaces
Allow-Events: talk, hold, conference, refer
Proxy-Authenticate: Digest realm="x.x.x.x", nonce="e797bde2-c7b5-47a7-ae95-931af57c9774", algorithm=MD5, qop="auth"
Content-Length: 0 
```

UA 不能用包含摘要、用户名、领域、随机数等的代理授权标头重建另一个 INVITE（使用 CSeq-2）以重新发送到 freeswitch 服务器以进行身份​​验证并继续调用

```
Proxy-Authorization: Digest username="aaa", realm="x.x.x.x", nonce="e797bde2-c7b5-47a7-ae95-931af57c9774", uri="sip:200@x.x.x.x5:5080;pstn_inbound=;ignore_userinfo=", qop=auth, nc=00000001, cnonce="4060286812", response="cae451f24bbbcefeb7d01c13b070026a", algorithm=MD5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-07T16:23:11.693

在 vanilla（默认示例）配置中，freeswitch 有两个 SIP 配置文件。首先，命名为 internal，侦听端口 5060，并且需要对数据包进行身份验证。第二个 SIP 配置文件，名为 external，侦听端口 5060，并且不需要身份验证即可调用 throw 它。外部配置文件的安全性必须由您的拨号方案提供。如果不是，那么黑客可以通过 INVITE 与 freeswitch 交谈，该命令使 freeswitch 调用抛出你的网关并将其与初始调用桥接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-12T04:48:39.957

如果你使用 "param name="accept-blind-auth" value="true"" 会给你盲验证。

无需密码验证。

# php - 在我的 Magento 主页中显示 WordPress 帖子

> ID：14293248
> 
> 赞同：0
> 
> 时间：2013-01-12T12:21:22.320
> 
> 标签：php, wordpress, magento

我想将我的 wordpress 博客的最新博客文章显示到我的 magento 商店，但在需要头文件时遇到问题。

我正在尝试这个：

```
<?php
require_once($_SERVER['DOCUMENT_ROOT'].'/blog/wp-blog-header.php');

 $args = array('numberposts'     => 5,
    'orderby'=> 'post_date',
    'post_type'       => 'post',
    'post_mime_type'  => ,
    'post_parent'     => ,
    'post_status'     => 'publish',
    'suppress_filters' => true ); 

  $postslist = get_posts($args);

  foreach($postslist as $post) : set_postdata($post); ?>

 <div><p><?php the_date(); ?></p>
    <p><a href="<?php the_permalink(); ?>"><?php the_title(); ?></p>
 </div>

<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:52:34.257

Fishpig not working in our case but we got the solution somehow. We retrieved the data from wordpress, saved it to database and then called it via **Magento**.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:38:05.557

@mukund002 你可以用几个解决方案来解决它。首先，您可以使用该`Fishpig`模块，该模块可以工作，或者您可以自己制作。为此，您必须在您的 Wordpress 博客和 Magento 中创建一些文件。[http://www.magentowebshop.org/magento-webshop/magento-webshop-wordpress-integration-2/](http://www.magentowebshop.org/magento-webshop/magento-webshop-wordpress-integration-2/)上有一本手册。它是荷兰语的，所以你可以使用谷歌翻译。我认为这个是在`fishpig`他们的模块中制作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T13:10:14.017

Fishpig 是一个很棒的 Magento 扩展，可以帮助将您的 Wordpress 博客集成到您的 Magento 站点中。它的编码非常好，并在大量网站上使用。另外，它是免费的。那里有帮助您获取最新博客文章的功能：http: [//fishpig.co.uk/wordpress-integration.html](http://fishpig.co.uk/wordpress-integration.html)

# spring - 当我尝试在 springmvc 上练习/学习我的第一个程序时遇到错误

> ID：14293251
> 
> 赞同：1
> 
> 时间：2013-01-12T12:21:40.627
> 
> 标签：spring, spring-mvc

我刚开始学习 Spring 并为 SpringMVC 编写了一个 Hello Word 程序，这个错误阻止了我

```
Error configuring application listener of class org.springframework.web.context.ContextLoaderListener
java.lang.NoClassDefFoundError: javax/servlet/ServletContextListener 
```

我在 lib 目录中有所有必要的 jar 文件。我使用的是 spring 3.2、tomcat 服务器和 eclipse Indigo IDE。

在 web.xml 中，我声明了 dispatcher servlet（命名为 dispatcher）以及 web-inf 下的对应 dispatcher-servlet.xml。

同样在 web.xml 声明的侦听器和 contextConfigLocation /WEB-INF/dispatcher-servlet.xml 下。

我搜索了谷歌，但找不到任何答案。在搜索过程中，我发现了一些关于 maven pom.xml 的内容（不知道那是什么）但无法理解它到底是什么？我需要 maven for springmvc 吗？这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T10:46:43.443

您将 JAR 文件放在哪个 lib 目录中？如果它在 WEB-INF 目录中，它应该被加载。否则，JAR 文件也应该导入到 WEB 部署程序集中。

如果您在开始时需要一个分步教程，您可以尝试遵循[使用 Spring Framework MVC 3.1 的 Hello World 示例](http://www.flacom.com/hello-world-example-using-spring-framework-mvc-3-1/ "使用 Spring Framework MVC 3.1 的 Hello World 示例")

# c - 为多线程 TCP 客户端执行“关闭（）”时未发送 TCP FIN

> ID：14293254
> 
> 赞同：0
> 
> 时间：2013-01-12T12:22:10.063
> 
> 标签：c, linux, tcp

我在多线程 TCP 客户端下面编写了该客户端，它基本上生成了一个单独的线程来接收数据，但是数据被写入主线程，只有在标准输入上从用户那里获取输入。

现在，按下 ctrl^D 然后实现退出循环（围绕 getline () 调用）并关闭套接字描述符，但在线路上看不到 FIN。但是，将 close() 替换为 shutdown () 会有所不同。使用 close() 不会在线发送 FIN，但是使用 shutdown(fd, SHUT_WR) 会在线发送 FIN？

为什么会有这种差异？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <errno.h>

void *receiver (void *arg);

pthread_t thrid;

int sockfd;

int reUse = 0;

int
main (int argc, char *argv[])
{
    struct sockaddr_in servaddr;

    struct sockaddr_in clntaddr;

    char *line;

    size_t len = 0;

    size_t read;

    int bytes;

    if (argc < 6)
    {
        printf
            ("Usage:%s <Server Ipv4 address> <Server Port> <SO_REUSEADDR Yes(1)/No(0))> <Close(0)/SHUT_RD(1)/SHUT_WR(2)/SHUT_RDWR(3)> <sleep (in sec)> [Client IPv4 address] [Client Port]\n",
             argv[0]);
        return -1;
    }

    /*
     * AF_INET, AF_INET6, AF_UNIX, AF_NETLINK
     * SOCK_STREAM (TCP), SOCK_DGRAM (UDP), SOCK_RAW
     */
    if ((sockfd = socket (AF_INET, SOCK_STREAM, IPPROTO_TCP)) == -1)
    {
        printf ("Failed to create socket: %s\n", strerror (errno));
        return -1;
    }

    /*
     * set SO_REUSEADDR option for the UDP server socket
     */
    reUse = atoi (argv[3]);
    if (reUse)
    {
        int i = 1;

        setsockopt (sockfd, SOL_SOCKET, SO_REUSEADDR, (void *) &i,
                    sizeof (i));
    }

    bzero (&clntaddr, sizeof (struct sockaddr_in));

    if (argc == 8)
    {
        printf ("doing bind......\n");
        clntaddr.sin_family = AF_INET;
        clntaddr.sin_port = htons (atoi (argv[7]));
        inet_aton (argv[6], &clntaddr.sin_addr);

        if (bind
            (sockfd, (struct sockaddr *) &clntaddr,
             sizeof (struct sockaddr_in)) == -1)
        {
            perror ("Failed to bind");
            close (sockfd);
            return -1;
        }
    }

    bzero (&servaddr, sizeof (struct sockaddr_in));

    servaddr.sin_family = AF_INET;
    servaddr.sin_port = htons (atoi (argv[2]));
    inet_aton (argv[1], &servaddr.sin_addr);

    if (-1 ==
        connect (sockfd, (struct sockaddr *) &servaddr,
                 sizeof (struct sockaddr_in)))
    {
        printf ("Failed to connect: %s\n", strerror (errno));
        return -1;
    }

    if (pthread_create (&thrid, NULL, receiver, NULL) < 0)
    {
        printf ("Failed to create thread\n");
    }

    while ((read = getline (&line, &len, stdin)) != -1)
    {
        bytes = send (sockfd, line, len, 0);
        if (bytes < 0)
        {
            if (errno == EINTR)
                continue;
            else
                printf ("%Read error %s\n", pthread_self (),
                        strerror (errno));
        }

    }

    if (0 == atoi (argv[4]))
    {
        printf ("doing close()....\n");
        close (sockfd);
    }
    else if (1 == atoi (argv[4]))
    {
        printf ("doing shutdown(..., SHUTRD)....\n");
        shutdown (sockfd, SHUT_RD);
    }
    else if (2 == atoi (argv[4]))
    {
        printf ("doing shutdown(..., SHUTWR)....\n");
        shutdown (sockfd, SHUT_WR);
    }
    else if (3 == atoi (argv[4]))
    {
        printf ("doing shutdown(..., SHUTRDWR)....\n");
        shutdown (sockfd, SHUT_RDWR);
    }

    if (line)
        free (line);

    sleep (atoi (argv[5]));
}

void *
receiver (void *arg)
{
    char buff[512];

    int bytes;

    while (1)

    {
        bytes = recv (sockfd, buff, sizeof (buff), 0);
        if (bytes < 0)
        {
            if (errno == EINTR)
                continue;
            else
                printf ("%Read error %s\n", pthread_self (),
                        strerror (errno));
            pthread_exit (-1);
        }
        else if (bytes == 0)
        {
            printf ("connection closed by Peer\n");
            close(sockfd);
            pthread_exit (-1);
        }
        else
        {
            printf ("Msg Received:%s\n", buff);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-12T14:49:28.053

调用 shutdown(WR) 会发送 FIN，但 close 有一点不同：如果 fd 引用计数不等于 0，则不会发送 FIN。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-27T15:15:51.913

您可以在关闭（套接字）之前使用关闭（套接字，SHUT_WR）

# php - 导出数据中的 Html 代码 [PHP]

> ID：14293255
> 
> 赞同：0
> 
> 时间：2013-01-12T12:22:30.420
> 
> 标签：php, html, tags, export

我正在尝试导出从我的数据库中获取的数据。
问题是数据带有html代码。
我只想导出没有 html 代码的数据。

注意：我的数据库没有任何 html 代码。

`$exported_db_datas`（全局数组变量）是这样创建的：

```
while($row = mysql_fetch_array($resultset,MYSQL_ASSOC))
{
    $resultsarray[$rowcount] = $row;
    $exported_db_datas[$rowcount] = $row;
    /*foreach($resultsarray[$rowcount] as $column)
    {
        $resultsarray2[$rowcount][] = $column;                  
    }*/

    $rowcount++;        
} 
```

出口代码：

```
$export_file = "export_phisto";

if ($format == "CSV")
{
    $file = $export_file.".csv";
    $separator = ",";
}
elseif ($format == "TAB")
{
    $file = $export_file.".tab";
    $separator = "\t";
}
elseif ($format == "TXT")
{
    $file = $export_file.".txt";
    $separator = "\t";
}
else// XLS
{
    $file = $export_file.".xls";
    $separator = "\t";
}    

header("Content-Disposition: attachment; filename=\"$file\"");
header("Content-Type: text/plain");

$flag = false;
foreach($exported_db_datas as $row)
{
        if(!$flag) 
        {
          // display field/column names as first row
          echo implode($seperator, array_keys($row)) . "\r\n";
          $flag = true;
        }
        echo implode($seperator, array_values($row)) . "\r\n";
} 
```

注意：即使我不使用`print $data`，导出的数据也有没有数据的网站的html代码。

我怎样才能导出从数据库中获取的数据？

导出数据~~示例~~~~在~~这里~~[。](http://www.mediafire.com/view/?xy0h4mt7uoormlh)~~

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T12:32:35.057

利用`strip_tags`

```
$exported_db_datas[$rowcount] = strip_tags($row); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T12:31:53.093

`strip_tags()`就像这样在这一行中使用`$exported_db_datas[$rowcount] = $row;`：`$exported_db_datas[$rowcount] = strip_tags($row);`

PS：不要使用 mysql_* 扩展名，它已被弃用，请参阅[此处的红色警告框](http://php.net/manual/en/function.mysql-connect.php)

# php - 使用 SERVER['REQUEST_URI'] 和 GET 控制网站流量

> ID：14293256
> 
> 赞同：1
> 
> 时间：2013-01-12T12:22:54.147
> 
> 标签：php, apache, .htaccess, url-rewriting

我有一个小网站。它的`.htaccess`文件是这样的：

```
RewriteEngine On
RewriteBase /site/
RewriteRule ^(.+)$ index.php [QSA,L] 
```

因此它将所有 URL 重定向到“index.php”。我可以获得请求的 URL 并采取相应的行动：

```
$uri = $_SERVER['REQUEST_URI'];
switch($uri)
{
case 'index':
    LoadIndex();
    break;

case 'about':
    LoadAbout();
    break;

case 'Posts':
    LoadPosts();
    break;

default:
    LoadNotFound();
} 
```

假设我想`$_GET[]`在索引页面中使用。这会更改 URL，因此无法加载页面。我怎样才能做到这一点？如何在不影响 URL 变量的情况下路由我的站点`$_GET[]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:32:23.643

`$_SERVER[REQUEST_URI]`会`/index.php`和*不会* `index`。`$_SERVER[REQUEST_URI]`还包括`QUERY_STRING`. 所以，它可能是`/index.php?var1=abc&var2=def`。

如果您只需要 URI 路径，请尝试`PHP_SELF`或`SCRIPT_NAME`. 但请记住，这些也将是`/index.php`，包括`/`和`.php`。

```
$uri = $_SERVER['PHP_SELF'];
switch($uri)
{
case '/index.php':
    LoadIndex();
    break;
...
} 
```

你不需要`QSA`在你的`RewriteRule`. 来自[RewriteRule 指令](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

> **修改查询字符串**
> 默认情况下，查询字符串是原封不动地传递的。

这意味着，该`$_GET`变量在您的 PHP 脚本中和以前一样可用。

# java - Java ArrayList clear() 函数

> ID：14293263
> 
> 赞同：34
> 
> 时间：2013-01-12T12:23:44.457
> 
> 标签：java, list, arraylist

假设我有一个`ArrayList<String> data;`

我正在使用`data.add()`函数将一些数据添加到这个数组中。假设我在这个数组中添加了 10 个字符串。数组的大小现在是 10。

如何销毁数组中的所有元素？该`data.clear()`函数刚刚将所有 10 个元素设置为 null。所以当我尝试添加另一个元素时，它只是在第 11 位。我只想从 0 开始；

我可以使用 for 循环来替换所有数据，但我真的认为有一种方法可以清空`ArrayList`. 是吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-12T12:26:12.287

你的假设似乎不正确。在 a 之后`clear()`，新添加的数据从索引 0 开始。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-12T12:30:42.843

如果您有任何疑问，请查看 JDK 源代码

`ArrayList.clear()`源代码：

```
public void clear() {
    modCount++;

    // Let gc do its work
    for (int i = 0; i < size; i++)
        elementData[i] = null;

    size = 0;
} 
```

您将看到它`size`设置为 0，因此您从 0 位置开始。

请注意，在向 中添加元素时`ArrayList`，后端数组被扩展（即，如果需要，数组数据被复制到更大的数组中）以便能够添加新项目。执行时`ArrayList.clear()`，您只删除对数组元素的引用并设置`size`为 0，但是，**`capacity`**保持原样。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-12T12:27:59.870

ArrayList.clear（来自[Java 文档](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#clear%28%29)）：

从此列表中删除所有元素。此调用返回后列表将为空

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-07-13T11:31:30.230

之后`data.clear()`肯定会从零索引重新开始。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-01-12T12:25:46.940

`data.removeAll(data);`会做的工作，我想。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-01-12T12:29:13.133

`clear()`函数清除 Arraylist 并从索引 0 开始不是真的

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-01-12T12:32:07.617

clear的源码说明了新添加的数据获得首位的原因。

```
 public void clear() {
    modCount++;

    // Let gc do its work
    for (int i = 0; i < size; i++)
        elementData[i] = null;

    size = 0;
    } 
```

顺便说一下，clear() 比 removeAll() 快，第一个是 O(n) 而后者是 O(n_2)

# gwt - Intellij 11/12 中是否有针对 GWT 应用程序或模块的一步构建？

> ID：14293267
> 
> 赞同：1
> 
> 时间：2013-01-12T12:24:00.197
> 
> 标签：gwt, intellij-idea

Intellij 似乎没有从 GWT 应用程序构建战争文件的一步法。还是我在某处错过了该选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:40:05.263

我建议使用 maven 进行项目描述。

IntelliJ 与 maven 项目配合得非常好。您可以使用 IntelliJ 进行开发，使用 maven 进行生产构建。

**更新**

你可以在这里找到文档：http: [//mojo.codehaus.org/gwt-maven-plugin/](http://mojo.codehaus.org/gwt-maven-plugin/)

步骤，让东西运行：

*   安装maven
*   [创建一个 pom.xml](http://gwt-maven.googlecode.com/svn/trunk/maven-googlewebtoolkit2-plugin/simplesample/)
*   定义你的依赖
*   调用`mvn install`并验证您的战争文件（它将在子目录“目标”中创建
*   调用`mvn idea:idea`这将创建一个 Intellj 项目 **或**
*   打开Intellij，选择“来自外部模型的新项目->来自maven”

# javascript - TTS HTML5 音频事件监听器

> ID：14293274
> 
> 赞同：1
> 
> 时间：2013-01-12T12:25:17.673
> 
> 标签：javascript, html, audio, addeventlistener

我的想法是创建一个使用谷歌“TTS Api”动态播放任何文本作为音频文件的JS。这是我的 JS 代码的一部分，以及我在 Chrome 中执行文件时遇到的错误。不知何故，我无法在 for 循环中访问我的数组中的某些音频对象。

数组`text_part`包含我要使用的文本。数组`audioElementListe`包含不同的音频对象。

我得到的错误：未捕获的类型错误：无法调用未定义的方法“播放”

顺便说一句，英语不是我的母语，我完全是 JS 初学者；）

```
audioElementListe = new Array(3);
function start()
{
    text_part = new Array(3);
    text_part[0]='Hallo';
    text_part[1]='Florian';
    text_part[2]='Haha';

    for(var i = 0; i < text_part.length; i++)
    {   
        audioElementListe[i] = new Audio("");
    }

    for(var i = 0; i < text_part.length; i++)
    {   
            var help = 0;
            var url = "http://translate.google.com/translate_tts?tl=de&q="+text_part[i];
            audioElementListe[i] = new Audio("");
            document.body.appendChild(audioElementListe[i]);
            audioElementListe[i].src=url;
            audioElementListe[i].addEventListener('canPlay', function()                 
            {audioElementListe[i].play();}, false);

            //Error seems to be right here
            audioElementListe[i].addEventListener('ended', function()   
            {audioElementListe[i++].play();}, false);
    }
    audioElementListe[0].play();
} 
```

编辑：通过不创建新的音频对象而是更改它的来源来做出“解决方法”。

```
<html>
<head>
</head>

<body>

<script type="text/javascript">

var audioElement;
var i;
function start()
{   
        i=0;
        text_part = new Array(3);
        text_part[0]='Hallo';
        text_part[1]='Florian';
        text_part[2]='Haha';

        var url = "http://translate.google.com/translate_tts?tl=de&q="+text_part[i];
        audioElement = new Audio("");
        document.body.appendChild(audioElement);
        audioElement.src=url;
        audioElement.addEventListener('canPlay', function() {audioElement.play();}, false);
        audioElement.addEventListener('ended', function()  
        {

                i++;
                if(i<text_part.length)
            {
                var url = "http://translate.google.com/translate_tts?tl=de&q="+text_part[i];
                audioElement.src=url;
                audioElement.addEventListener('canPlay', function() {audioElement.play();}, false);
                audioElement.play();
            }

;}, false);
        audioElement.play();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-14T08:58:53.267

我们需要在等效长度的大部分部分中分解要读取的字符串，并引入适当的 js 语句 setTimeOut(string, dt)

[http://renatocappellani.altervista.org/blog/programmazione-dei-ritardi-in-javascript-settimeoutcomandotempo/](http://renatocappellani.altervista.org/blog/programmazione-dei-ritardi-in-javascript-settimeoutcomandotempo/)

# jquery-mobile - 通过 JQuery Mobile 动态添加按钮

> ID：14293276
> 
> 赞同：3
> 
> 时间：2013-01-12T12:25:32.480
> 
> 标签：jquery-mobile

我正在开发一个 JQuery Mobile 应用程序。我在页面加载时动态添加 HTML。此处显示了一个精简的示例：

```
var h = "";
for (i=1; i<=5; i++) {
  h += "<div>Entry #" + i + "</div>";
  h += "<div class='ui-grid-a'>";
    h += "<div class='ui-block-a'><input type='button' value='Approve' onclick='return approveButton_Click(this);' /></div>";
    h += "<div class='ui-block-b'><input type='button' value='Reject' onclick='return rejectAbuse_Click(this);' /></div>";
  h += "</div><hr />";
});
$("#entries", "#myPage").append(h); 
```

我的 HTML 出现在 UI 中。但是，这些按钮不会呈现为典型的 JQuery Mobile 按钮。相反，它们看起来像传统的 HTML 按钮。如何获取动态添加的按钮以应用 JQuery 移动样式？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T17:41:00.690

这是您的代码中的一个工作示例：http: [//jsfiddle.net/Gajotres/NuCs2/](http://jsfiddle.net/Gajotres/NuCs2/)

在刷新按钮之前，必须先使用 .button() 函数对其进行初始化。像这样：

```
$("#approve"+i).button().button('refresh');
$("#reject"+i).button().button('refresh'); 
```

还有另一种解决方案，但只有在重新创建整个页面时才应使用它：

```
$("#index").trigger("pagecreate"); 
```

这是第二个解决方案的示例：http: [//jsfiddle.net/Gajotres/mpFJn/](http://jsfiddle.net/Gajotres/mpFJn/)

如果您想了解更多关于标记增强方法的信息，请查看我的另一篇**[文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**，让我保持透明，这是我的个人博客。或者在**[这里](https://stackoverflow.com/a/14550417/1848600)**找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T13:24:00.280

在 Jquery mobile 中使用“刷新”方法来动态显示 Jqm UI...

[http://jquerymobile.com/demos/1.2.0/docs/buttons/buttons-methods.html](http://jquerymobile.com/demos/1.2.0/docs/buttons/buttons-methods.html)

# git - 如果我将一个文件添加到我的 git 存储库，然后在 gitignore 中添加一个模式，表明该文件将被忽略，会发生什么

> ID：14293280
> 
> 赞同：2
> 
> 时间：2013-01-12T12:25:58.450
> 
> 标签：git, github, gitignore

假设我的仓库中有一个 android 项目并添加了 apk 文件。后来我添加了一个 gitignore 让我们说[这个](https://github.com/github/gitignore/blob/master/Android.gitignore)。这个apk文件将来会发生什么？该文件将在每次构建后不断更改，因此是否会被 git 检查？就我而言，我希望它继续跟踪此文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T12:34:24.343

该文件将继续被跟踪。您可以通过尝试轻松找到这一点：

```
$ mkdir /tmp/test
$ cd /tmp/test
$ git init
$ touch foo
$ git add foo
$ echo "foo" > .gitignore
$ git add .gitignore
$ git commit -m "initial commit"
$ echo foo > foo 
```

现在，`git status`将显示`modified: foo`，如果你`git add foo`，它会尽管上演`.gitignore`。

# c# - Word 加载项功能区

> ID：14293282
> 
> 赞同：0
> 
> 时间：2013-01-12T12:26:10.617
> 
> 标签：c#, ms-office, add-in, office-addins

我创建了一个 Office 加载项项目，并为应用程序添加了功能区菜单。当我构建我的项目 word 文档时，我的功能区没有问题。

使用下面的按钮单击事件单击功能区菜单中的按钮时，如何使用 StreamReader 将活动文档保存为文件？

```
 private void btnsavefile_Click(object sender, RibbonControlEventArgs e)
{
    //Getting FileStream here.

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-27T11:36:50.127

void Application_DocumentBeforeClose(Word.Document 文档, ref bool Cancel) { try {

```
 string filePath = this.Application.ActiveDocument.FullName.ToString();
        string fileName = this.Application.ActiveDocument.Name;

        //dialogFilePath = filePath;
        dialogFileName = fileName;

        string tempFile;
        string tempPath;

        if (true) 
        {

            var confirmResult = System.Windows.Forms.MessageBox.Show("Are you sure to save this document ??",
                    "Confirm Save!!",
                    System.Windows.Forms.MessageBoxButtons.YesNo);
            if (confirmResult == System.Windows.Forms.DialogResult.Yes)
            {
                //document.Save();
                var iPersistFile = (IPersistFile)document;
                iPersistFile.Save(tempPath, false);

               //Do some action here 
            }

            Word._Document wDocument = Application.Documents[fileName] as Word._Document;
            //wDocument.Close(Word.WdSaveOptions.wdDoNotSaveChanges);
            ThisAddIn.doc.Close(Word.WdSaveOptions.wdDoNotSaveChanges);
        }

    }
    catch (Exception exception)
    {

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:37:28.697

我在 Stack Overflow 中找到了以下解决方案。希望它与您相关。

[从 office 2007 加载项序列化当前 ActiveDocument](https://stackoverflow.com/questions/12175273/serialize-current-activedocument-from-office-2007-add-in)

就个人而言，我在处理这种情况时也做了同样的事情。我已将文件的副本保存到临时位置并将副本推送到服务器。在这种情况下，活动文档保持原样。

```
Excel.Workbook xlb = Globals.ThisAddIn.Application.ActiveWorkbook;
xlb.SaveCopyAs(filePath); 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-27T11:26:41.083

从添加新项目创建 Word 插件项目-> 添加功能区视觉设计器。

将菜单添加到功能区设计器并在ribbonsample.cs 中编写以下代码

```
public partial class RibbonSample
{
  private void RibbonSample_Load(object sender, RibbonUIEventArgs e)
  {
    // Initialise log4net 
  }
  //Adding items in menu from DB
  public RibbonSample()
        : base(Globals.Factory.GetRibbonFactory())
    {
        InitializeComponent();
        try
        {
            System.Data.DataTable dt = new DataAcces().GetData();
            if (dt.Rows.Count > 0)
            {
                for (int i = 0; i < dt.Rows.Count; i++)
                {
                    RibbonButton Field = this.Factory.CreateRibbonButton();
                    Field.Label = dt.Rows[i][1].ToString();
                    Field.Tag = i;
                    Field.ControlSize =
                        Microsoft.Office.Core.RibbonControlSize.RibbonControlSizeLarge;
                    Field.Click += Field_Click;
                    menu1.Items.Add(Field);
                }
            }
            else
            {
                System.Windows.Forms.MessageBox.Show("No Fields are available in database");
            }
        }
        catch (Exception exception)
        {
            //thrw exception
        }
    }

//Select menu item text in word 
void Field_Click(object sender, RibbonControlEventArgs e)
{
    try
    {
        Microsoft.Office.Interop.Word.Range currentRange = Globals.ThisAddIn.Application.Selection.Range;
        currentRange.Text = (sender as RibbonButton).Label;
    }
    catch (Exception exception)
    {
        log.Error(friendlyErrorMessage + " Field_Click Details:" + exception.Message, exception);
    }
  }
} 
```

# c# - C# 中的 RESTful Web 服务，用于生成或使用 JSON 和 XML 对象

> ID：14293284
> 
> 赞同：0
> 
> 时间：2013-01-12T12:26:51.110
> 
> 标签：c#, web-services, rest

请任何人建议我在 C# 中创建 RESTFul Web 服务的链接或网站，它应该能够使用和生成 XML 和 JSON 对象。应用程序应响应在 http 请求标头中发送的请求类型的对象。

提前感谢所有回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T12:53:54.227

[ASP.Net Web API](http://www.asp.net/web-api)是您正在寻找的东西。

[WCF](http://msdn.microsoft.com/en-us/library/dd203052.aspx)也可以帮助您。

# html - 选框滚动延迟

> ID：14293286
> 
> 赞同：-1
> 
> 时间：2013-01-12T12:26:59.457
> 
> 标签：html, css, marquee

当字幕方向向后时，文本一旦文本从左端熄灭，但是当文本上升时，文本就会脱离顶部，但不会立即从底部重新出现。

```
#content {position:absolute;left:10%;top:25%;width:40%;height:50%;white-space:nowrap;overflow:hidden;/* Safari and Chrome  */overflow-x:-webkit-marquee;-webkit-marquee-direction:up;-webkit-marquee-style: scroll;-webkit-marquee-speed: fast;-webkit-marquee-increment:small;-webkit-marquee-repetition:infinite;z-index:2;border:1px solid rgba(0,0,0,0.3);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:25:38.670

戈登先生...

我检查你的CSS。请对此进行更改：

```
 -webkit-marquee-style: slide;
    -webkit-marquee-increment:1px; 
```

检查我的链接[http://jsfiddle.net/eCH4J/1/](http://jsfiddle.net/eCH4J/1/)

祝你好运 ！

# jquery - 绑定到移动设备硬件按钮

> ID：14293287
> 
> 赞同：2
> 
> 时间：2013-01-12T12:27:12.093
> 
> 标签：jquery, jquery-mobile

是否可以使用 jQuery mobile 绑定到移动设备的硬件按钮？如果是这样，是否有任何代码示例？

特别是我对绑定到移动设备的音量增大和减小按钮以及使用这些按钮滚动页面感兴趣。

这是关于 android 和硬件后退按钮的类似问题[控制硬件后退按钮 jquery mobile](https://stackoverflow.com/questions/12859759/take-control-of-hardware-back-button-jquery-mobile)

现在我想知道如何对音量上下但跨平台做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T17:51:21.827

简短的回答是否定的，你不能只用 jQuery Mobile 来做到这一点。

现在我假设您正在创建一个移动应用程序，移动应用程序是指混合 android/iPhone 应用程序，而不是您的网络应用程序的移动版本。如果我是正确的，您可能会使用 Phonegap/Cordova 框架包装器，它将作为 HTML/CSS/JS 和 natuve 应用程序之间的包装器。

更多关于 Phonegap/Cordova 框架的信息可以在这里找到：[http ://cordova.apache.org/](http://cordova.apache.org/)

jQuery Mobile 和Phonegap 是一个标准的组合，你可以找到很多如何使用的教程。

但回到你的问题，这里是如何使用 Phonegap 将音量增大和音量减小事件绑定到 jQuery 移动代码：

```
document.addEventListener("volumedownbutton", onVolumeDownKeyDown, false);

function onVolumeDownKeyDown() {
    // Handle the volume down button
} 
```

和：

```
document.addEventListener("volumeupbutton", onVolumeUpKeyDown, false);

function onVolumeUpKeyDown() {
    // Handle the volume up button
} 
```

另请查看我的另一篇短文如何使用 jQuery mobile 处理 phonegap 事件：

[https://stackoverflow.com/a/14010308/1848600](https://stackoverflow.com/a/14010308/1848600)

有关音量增大/音量减小事件的更多信息，请参见此处：[http ://docs.phonegap.com/en/1.2.0/phonegap_events_events.md.html](http://docs.phonegap.com/en/1.2.0/phonegap_events_events.md.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T13:17:12.560

抱歉，Jquery 或 Jquery mobile 控制着您的网页或 webapp 的浏览器 DOM 和 UI。它们不控制移动设备的功能。您提到的...

但是就音量上下而言，您可以为此使用jquery插件...

如果您在 Jquery Mobile 中工作，请使用此...

[http://videojs.com/](http://videojs.com/)

一个 HTML5 视频播放器，可用作您要求的替代品...

# python - 通过 QtGui.QAction 将参数传递给触发的方法

> ID：14293288
> 
> 赞同：1
> 
> 时间：2013-01-12T12:27:18.320
> 
> 标签：python, pyqt, qtgui

假设我有一个类似的方法：

```
def open(self, opt):
    if opt == True:
    ...
    if opt == False:
    ... 
```

如何使用*QtGui.QAction*将参数传递给它，例如：

```
self.openAct = QtGui.QAction("O&pen", self, shortcut="Ctrl+O",
            statusTip="Opens a location", triggered=self.open) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:28:06.883

我*从 functools import partial*找到了答案。它在[这个线程](https://stackoverflow.com/questions/5364291/how-to-pass-arguments-to-a-function-using-a-predefined-signal-in-pyqt?rq=1)中。

# asp.net - SQL Server Express 数据库部署失败

> ID：14293290
> 
> 赞同：1
> 
> 时间：2013-01-12T12:27:29.650
> 
> 标签：asp.net, iis, sql-server-express

我必须在 IIS 服务器中部署带有远程数据库连接的 ASP.Net 应用程序。

部署在没有数据库的情况下运行良好。我能够在 IIS 服务器上运行该应用程序。

来到带有远程数据库的应用程序，我在 C# 代码中给出了连接字符串。它是连接的。

我`web.config`有这个连接字符串：

```
<configuration>
  <connectionStrings>
    <add name="ApplicationServices"
        connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
        providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

我已将其替换为我的数据库连接凭据，如下所示：

```
<configuration>
  <connectionStrings>
    <add name="ApplicationServices"
         connectionString="Data Source=RemoteHost,1433;Initial Catalog=DBNAME;user Id=MyUserId;Password=MyPassword"
         providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

在打包/发布选项中，我选择了（从 web.config 导入）并进行了部署。然后我收到以下错误：

> *Web 部署任务失败。（无法创建类型为“dbFullSql”和路径“数据”的对象“Data Source=RemoteHost,1433;Initial Catalog=DBNAME;user Id=MyUserId;Password=MyPassword”。）*
> 
> *无法创建类型为“dbFullSql”和路径“数据源=RemoteHost,1433；初始目录=DBNAME；用户 ID=MyUserId；密码=MyPassword”的对象。*
> 
> *来源无效。
> 数据库“DBNAME”的脚本失败。
> 数据库“DBNAME”的脚本失败。
> 指数数组的边界之外。*

我是 ASP.Net 的新手。任何人请帮助我。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:44:12.373

我认为您没有正确配置 Web 部署包，您可以这样做右键单击项目，选择属性并转到包/发布 SQL 我添加了演练链接：使用 Web 部署包部署 Web 应用程序项目（第 1 部分） 4) 对于 VS2010 [http://msdn.microsoft.com/en-us/library/dd483479(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd483479(v=vs.100).aspx)

# java - 在tomcat中部署JSF2应用时看不到欢迎页面

> ID：14293291
> 
> 赞同：2
> 
> 时间：2013-01-12T12:27:37.190
> 
> 标签：java, jsf, maven, tomcat, jsf-2

我想在 tomcat 上部署我的 JSF2 应用程序`mvn tomcat:run`。我之前确实使用该`mvn clean install`命令正确编译过它。Tomcat 在对我说`INFO: Starting Coyote HTTP/1.1 on http-8080`

我想知道我是否正确配置了欢迎页面。这是我的**web.xml**：

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5">

    <display-name>Archetype Created Web Application</display-name>

    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
            <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>home.xhtml</welcome-file>
    </welcome-file-list>

</web-app> 
```

这是我的**pom.xml**，只是为了仔细检查 artifactid 是否正确：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.bogus</groupId>
    <artifactId>jsf2_tutorial</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>
    <name>jsf2_tutorial Maven Webapp</name>
    <url>http://maven.apache.org</url>

    <repositories>
        <repository>
            <id>maven2-repository.dev.java.net</id>
            <name>Java.net Repository for Maven</name>
            <url>http://download.java.net/maven/2</url>
        </repository>
    </repositories>

    <dependencies>

        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.1.0-b03</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.1.0-b03</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <encoding>UTF-8</encoding>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

只是我要粘贴最后一点，**home.xhtml**以确保它也是正确的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html">
    <h:head>
        <title>Hello JSF 2!</title>
    </h:head>
    <h:body>
       #{welcome.message}
    </h:body>
</html> 
```

我导航到欢迎页面时的错误是：

```
HTTP status 500
In the url I notice I had a typo. Now I enter the correct URL but the problem is:

    type Exception report

    message

    description The server encountered an internal error () that prevented it from fulfilling this request.

    exception

javax.servlet.ServletException: Class javax.faces.webapp.FacesServlet is not a Servlet
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    java.lang.Thread.run(Thread.java:662)

root cause

java.lang.ClassCastException: javax.faces.webapp.FacesServlet cannot be cast to javax.servlet.Servlet
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    java.lang.Thread.run(Thread.java:662)

    note The full stack trace of the root cause is available in the Apache Tomcat/6.0.29 logs. 
```

**更新**

我通过从 pom.xml 中删除 servlet-api 依赖项摆脱了异常

```
 <dependency>  <groupId>javax.servlet</groupId> 
 <artifactId>servlet-api</artifactId>  <version>2.5</version> 
 </dependency> 
```

页面现在加载，但未显示消息。这是这个应用程序的 java 部分的样子：

```
package org.bogus;
import javax.faces.bean.ManagedBean;

@ManagedBean(name = "welcome", eager = true)
public class WelcomeBean {
    public WelcomeBean() {
        System.out.println("WelcomeBean instantiated");
    }
    public String getMessage() {
        return "I'm alive!";
    }
} 
```

这个例子和 oracle 的官方 JSF 教程几乎一样：http: [//docs.oracle.com/javaee/6/tutorial/doc/gjaam.html](http://docs.oracle.com/javaee/6/tutorial/doc/gjaam.html)

我包括`<load-on-startup>1</load-on-startup>`但我仍然没有在控制台或页面中看到该消息。也许配置仍然有问题。任何想法？

**更新** 我刚刚将`faces-config.xml`文件包含在`WEB-INF`但仍然无法正常工作：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- This file is not required if you don't need any extra configuration. -->
<faces-config version="2.1"
   xmlns="http://java.sun.com/xml/ns/javaee"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="
      http://java.sun.com/xml/ns/javaee
      http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd">

   <!-- Write your navigation rules here. -->

   <application>
        <locale-config>
            <default-locale>en</default-locale>
            <supported-locale>en</supported-locale>
        </locale-config>
   </application>

</faces-config> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T12:32:43.720

你基本上有两个问题：

1.  JSF2 至少需要 Servlet 2.5（与 Tomcat 6 兼容），但您`web.xml`已声明符合 Servlet 2.3（与 Tomcat 4 兼容）。您应该声明`web.xml`与 servletcontainer 兼容的最高版本。鉴于它是 Tomcat 6，它是一个 Servlet 2.5 容器，请将其声明为 Servlet 2.5。

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <web-app 
        xmlns="http://java.sun.com/xml/ns/javaee"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
        version="2.5">

        <!-- Config here. -->

    </web-app> 
    ```

    *（是的，没有文档类型！）*

    * * *

2.  `@ManagedBean`由于在注释扫描代码中意外插入了 Glassfish 特定代码，Mojarra 2.1.0 无法在 Tomcat 和 Jetty 上运行。另见[问题 1937](http://java.net/jira/browse/JAVASERVERFACES-1937)。您需要至少升级到 Mojarra 2.1.1（或仅升级到当前可用的 2.1.17）。另一种方法是在 中手动注册托管 bean `faces-config.xml`，但这很笨拙。

* * *

**与具体问题**无关**`@ManagedBean(eager=true)`，仅对作品进行`@ApplicationScoped`。只是省略它。**

# html - 引导文本输入错误的高度

> ID：14293294
> 
> 赞同：3
> 
> 时间：2013-01-12T12:27:45.037
> 
> 标签：html, twitter-bootstrap

我遇到了引导输入文本高度大小的问题。我正在使用标准 bootstrap.css 样式表，搜索表单位于导航栏中：

```
<div class="navbar  navbar-fixed-top m-header">
    <div class="navbar-inner m-inner">
        <div class="container-fluid">
            <div class="row-fluid">
                ...

<!-- // START SEARCH BAR -->
<div class="span6 offset4">             
    <form>
      <div class="input-append" id="top-search">
        <input type="text" placeholder="Search...">
        <div class="btn-group">
            <button class="btn" tabindex="-1">Search</button>
            <button class="btn dropdown-toggle" data-toggle="dropdown" tabindex="-1">
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
            <li><label class="radio">
              <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked>
              <i class="icon-search"></i>aaa
            </label></li>
            <li class="divider"></li>
            <li><label class="radio">
              <input type="radio" name="optionsRadios" id="optionsRadios1" value="option2" checked>
              <i class="icon-th"></i>bbb
            </label></li>
            <li><label class="radio">
              <input type="radio" name="optionsRadios" id="optionsRadios1" value="option3" checked>
             <i class="icon-file"></i>ccc
            </label></li>
            <li><label class="radio">
              <input type="radio" name="optionsRadios" id="optionsRadios1" value="option4" checked>
              <i class="icon-inbox"></i>ddd
            </label></li>
            <li><label class="radio">
              <input type="radio" name="optionsRadios" id="optionsRadios1" value="option5" checked>
              <i class="icon-camera"></i>eee
            </label></li>
            </ul>
        </div>
      </div>
    </form>
</div>
<!-- // END SEARCH BAR -->
... 
```

火狐：

![火狐](../Images/83e37796171bea6c0578c5fc4beee0e1.png)

铬合金：

![铬合金](../Images/8a11431553af327824e8e22b23a3694c.png)

我做了一些研究，可能是我使用了错误的文档类型，但我遵循了引导指南并且已经设置了 HTML5 文档类型：

```
<!DOCTYPE HTML>
<html lang="en">
  <head> 
```

我还通过使用 linux 'file' 和 'more' 检查了我的文件中是否有垃圾字符，但事实并非如此。

如果我在检查元素工具中覆盖或关闭文本输入的高度，则高度显示正确。正如这里提到的：[https](https://github.com/twitter/bootstrap/issues/246#issuecomment-7295682) ://github.com/twitter/bootstrap/issues/246#issuecomment-7295682 插入符号按钮的大小仍然会显示小..

但是，我不明白为什么文本输入在引导程序自己的网站上显示正确：http: [//twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms) 为什么他们没有同样的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:42:27.603

是的，我可以通过查看实际源代码来确认在 HTML 之前输出了代码，因此没有设置 HTML 文档类型。将它移到正在调用的第一个文件的第一行，它现在可以工作了。嗬！

# java - 重复执行一个java文件

> ID：14293295
> 
> 赞同：-1
> 
> 时间：2013-01-12T12:27:45.683
> 
> 标签：java

我有一个我想在机器上重复执行的 java 文件。一旦文件执行的前一个实例结束，该文件应该自动执行。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:28:30.310

在循环中使用 bash 脚本调用您的可执行文件

```
for i in 1 2 3 4 5 .. N
do
    java executable
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T12:46:29.073

Java 提供了一个环境，在该环境中，程序将按照您（或其他人）编写的方式运行。

操作系统细节将决定该程序的启动方式。如果您希望程序在前一个副本完成时启动，您需要使用该操作系统支持的脚本语言用循环包装 java 程序的启动，或者将程序转换为系统服务/守护程序。

存在其他技术，但它们实际上不会在第一个程序完成*后*启动第二个程序。他们要么：

1.  立即启动程序的第二个副本（除非已经找到）。该程序被编写为什么都不做，而它可以检测到它的“启动器”正在运行。当一个进程丢失时，第二个进程负责处理（并启动它的备用故障转移）。

2.  捕获关闭/崩溃事件并在退出时启动程序副本，实际上有两个程序同时运行，但持续时间很短。这通常是这样做的；但从技术上讲是不合理的，因为程序在启动新进程之前可能会以多种方式崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T12:48:18.233

你可以编写一个简单的 perl 或 python 脚本，它可以在 windows 和 linux 上运行。

```
#!/usr/bin/perl
$N = 100;
for($i = 0; $i < $N; $i++){
    system('/full/path/to/java -cp full_class_path my.class.Name');
} 
```

您可以在 java 文件中调用此脚本或在命令行上执行它。

```
Runtime.getRuntime().exec("perl script.pl") 
```

# c++ - 相当于mac的windows.h

> ID：14293296
> 
> 赞同：2
> 
> 时间：2013-01-12T12:27:49.843
> 
> 标签：c++, macos

是否有任何等效于 mac 的 windows.h ？我一直在谷歌搜索，但我找不到任何东西。我不知道这是否重要，但我目前正在使用 Mountain Lion。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:35:02.423

没有直接的等价物。也就是说，没有文件替代文件。毕竟是不同的平台。您只需使用他们的 API。在不确切知道您想要做什么以及打算使用什么功能的情况下，很难提供任何其他信息。

有碳 API。或者更好地说，有。特别是自 Mountain Lion 以来，此 API[已被弃用](https://developer.apple.com/library/mac/#releasenotes/General/CarbonCoreDeprecations/_index.html#//apple_ref/doc/uid/TP40012224)。上述链接提到了一些已弃用功能的替代方案，尽管 Objective-C 路线可能是更易于管理的替代方案。

# windows - 一个类似于 ImageOptim (of mac) 的 Windows 图像压缩工具

> ID：14293297
> 
> 赞同：18
> 
> 时间：2013-01-12T12:27:58.983
> 
> 标签：windows, image, png, jpeg, image-compression

我正在寻找一种适用于 Windows（更具体地说是 Windows 7）的图像压缩工具，类似于 ImageOptim（Mac 的）。我在 Windows 中使用了一些 jpeg 压缩器工具，但它们没有给出预期的结果。是的，它们会压缩大小，但 JPEG 的质量并不好。有些工具总是在图像上打印水印。这不是我想要的。

该工具应具有以下功能。1\. 免费使用许可。2\. 最佳压缩 3\. 最佳质量 4\. 多格式压缩，例如。JPG、GIF、PNG 等 5\. 有 windows 上下文菜单命令直接从资源管理器中转换图像。

等待您的回复。感谢你们。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-16T15:02:26.483

有文件优化器

[http://nikkhokkho.sourceforge.net/static.php?page=FileOptimizer](http://nikkhokkho.sourceforge.net/static.php?page=FileOptimizer)

根据这篇文章，它表现最好，文章还列出了更多可供探索的选项：http: [//www.netmagazine.com/features/best-image-compression-tools](http://www.netmagazine.com/features/best-image-compression-tools)

# javascript - 如果元素应用了类，则设置布尔变量

> ID：14293305
> 
> 赞同：0
> 
> 时间：2013-01-12T12:28:43.253
> 
> 标签：javascript, jquery

我可以通过这种方式隐藏页面上的元素

```
$('.info_player > .item_focus').hide(); 
```

如果元素 .info_player 是否应用了类 .item_focus，我需要将变量设置为 true 或 false。

如何用jquery制作它？

请给我一个代码示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:34:08.193

```
var hasClassItemFocus = $('.info_player > .item_focus').length > 0; 
```

`hasClassItemFocus`如果 .info_player 将 .item_focus 作为一个类，则为真。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T12:41:41.157

您在代码和描述中描述了不同的内容：

```
$('.info_player > .item_focus').hide(); 
```

意味着你有像下面这样的元素

```
...
<div class="info_player">
    <div class="item_focus">
... 
```

“元素 .info_player 是否应用了 .item_focus 类”

意思如下：

`div class="info_player item_focus"`

对于后一种情况，您可以使用`hasClass`方法。

在前一种情况下，您可以使用`$('.info_player > .item_focus').length`or`$('.info_player').find('.item_focus').length`和更多。Jquery 提供了多种方法来做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T12:33:52.823

你可以使用`jquery` [.hasClass()](http://api.jquery.com/hasClass/)

```
if($('.info_player').hasClass('item_focus'))
{
    var a = value;
} 
```

或一行

```
var a = $('.info_player').hasClass('item_focus') ? "a" : "b"; 
```

# php - PHP在不同服务器上包含不同的路径

> ID：14293310
> 
> 赞同：0
> 
> 时间：2013-01-12T12:29:29.813
> 
> 标签：php, include, include-path

在我的网站上，我有一个地方说：

```
include('../tpls/header_home.php'); 
```

它有效。现在我将站点移动到另一台服务器，我收到错误：

```
Warning: include(../tpls/header_home.php) [function.include]: failed to open stream: No such file or directory in /home/usern/public_html/site/tpls/static/home.php on line 4 
```

现在，如果我用这一行替换该行，它将起作用：

```
include('site/tpls/header_home.php'); 
```

我可以更改它，但我不知道还有多少地方到处都是损坏的路径，不仅在模板中，而且在文件、上传等中。

我宁愿通过设置或其他我缺少的东西来解决问题。我该怎么办？

暗示：

旧的工作服务器给了我 CWD： `/home/ortho/public_html/site/lib`

有问题的新服务器给了我 CWD： `/home/orthosho/public_html`

为什么？

结构体：

`/home/usern/public_html/site/tpls/static/home.php` `/home/usern/public_html/site/tpls/header_home.php`

PHP旧服务器：5.2.17

PHP新服务器：5.3.8

也许这会引起问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:34:46.850

好吧，你基本上回答了你自己的问题。

创建一个设置文件，将所有这些特定路径作为变量或其他方式保存，并在需要引用路径的任何位置包含该文件。这通常是它的工作原理。

设置.inc.php：

```
$_CONFIG['BASE_DIR'] = "/var/www/yoursite.com/"; 
```

some_file.php：

```
require 'settings.inc.php';
include $_CONFIG['BASE_DIR'] . "some_dependency.php"; 
```

我假设您正在尝试解决已经制作了整个系统的问题，而没有通用设置文件，在这种情况下我没有答案。开始编码后，您应该真正将事情集中起来以避免此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T12:59:10.273

鉴于您的新信息，问题如下：

```
Old server => ~/public_html/site/lib
New server => ~/public_html 
```

为什么？嗯，那是因为你已经这样设置了。您如何访问以前的网站？`yourdomain.com/site/`，或者只是`yourdomain.com`？如果是第一个，那肯定是你有不同的网络根。

现在，您要包含的内容是：

```
Old server => ~/public_html/site/tpls/...
New server => ~/tpls/ 
```

这看起来不太对吧？

我的猜测是您需要以某种方式[更改文档根目录。`httpd.conf`](http://httpd.apache.org/docs/current/mod/core.html#documentroot)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T13:04:00.333

有时使用 dirname 会有所帮助，因此它确实与当前文件相关。如果我制作 cronjobs，这就是我使用的，而且它更“便携”

```
<?php
    include dirname(__FILE__)."/../tpls/header_home.php"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T12:35:24.430

您必须有配置文件，该文件将具有您网站的绝对路径，ofc 它将是相对的（无需硬编码 url），然后在所有包含调用中使用它。

让我解释一下，假设您的站点中有一个名为 config 的文件夹和名为 config.php 的文件。如果你愿意，你可以制作一个包含所有重要变量的配置类。其中之一应该是

```
$ROOT_PATH = str_replace( '\\', '/', dirname( dirname( __FILE__ ) ) ) . '/'; 
```

这将是相对于您的项目的根路径。然后，当您包含某些内容时，您可以在其他地方简单地调用此变量：

```
require_once $ROOT_PATH . 'blabla/test.php'; 
```

修复损坏代码的替代方法是使用 set_include_path() 重新定义包含路径

[http://php.net/manual/en/function.set-include-path.php](http://php.net/manual/en/function.set-include-path.php)

但对于未来，学会聪明地编码:)

# ruby-on-rails - 间歇性 PostgreSQL 错误：缺少 FROM 子句

> ID：14293311
> 
> 赞同：1
> 
> 时间：2013-01-12T12:29:30.827
> 
> 标签：ruby-on-rails, postgresql, heroku, rake, pg

我有一个在 Heroku 上运行的 Rails 应用程序，它间歇性地从 Rake 任务执行的更新中抛出 Postgres 'missing FROM-clause' 错误。

一个示例 UPDATE 语句是：

```
UPDATE "temp_stats_values" 
    SET "number" = 66, 
        "average" = 0, 
        "percentage" = 0, 
        "num_out_of" = 0, 
        "updated_at" = '2013-01-12 11:43:40.067530' 
WHERE "temp_stats_values"."id" = 1330 
```

抛出的错误是：

`ActiveRecord::StatementInvalid: PG::Error: ERROR: missing FROM-clause entry for table "temp_stats_values"`

问题是，当显然不涉及另一个表时，我不知道为什么它期待这个 SQL 的 FROM 子句。此外，它似乎是断断续续的这一事实非常令人困惑。错误一旦发生，就会被 Airbrake 捕获。

无论如何，如果有人有任何好的想法，我将非常感激。

* * *

**更新**

示例[SQL Fiddle](http://sqlfiddle.com/#!1/9aa0d/2 "SQL小提琴")按预期工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:43:34.660

因此，在没有任何干预的情况下，这些错误神奇地消失了，就像它们最初神奇地开始发生一样。幽灵般的。无论如何，感谢所有评论的人。

# qooxdoo - 将内联应用程序切换到全屏？

> ID：14293314
> 
> 赞同：0
> 
> 时间：2013-01-12T12:29:45.580
> 
> 标签：qooxdoo

有没有办法将内联应用程序切换到全屏？我想使用一个独立的应用程序，但为了满足代理要求，我需要首先在现有页面的容器中启动它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:33:32.287

您可以尝试通过 HTML / CSS 将您的内联应用程序扩展为完整的浏览器大小。那应该可以完成这项工作，但您仍将坚持内联应用程序方法，这不应该以任何方式造成伤害。

# java - 通过搜索链接两个哈希图还是有更好的方法？

> ID：14293327
> 
> 赞同：-1
> 
> 时间：2013-01-12T12:30:53.203
> 
> 标签：java, hashmap

我有一个用于订单的哈希图和另一个用于订单项的哈希图。将数据放入哈希图中的方法如下执行：

```
 // THIS ONE ADDS THE ORDERS
    // (int orderNumber, String Datum, String salesperson, int customernumber)
    mainController.addBestallning(500, "2012/01/01", "Hendrik Gustafsson", 1001);

    // THIS ONE ADDS THE ORDERED ITEMS
    // (int orderNumber, int linePos, Artikel product, int amount, double price)
    mainController.addBestallningsOrderRad(500, 1, mainController.getAllaArtiklar().get(101), 5, 100.00); 
```

通过订单号找到订单后，如何找到已订购的商品？我现在唯一的链接是 ordernumber，我保存在 orderitemshashmap 中，所以我假设需要进行某种迭代，找到匹配项并返回结果。

我尝试这样做并让它工作，但前提是所有订单项位置也是唯一的。

所以，如果我要添加另一个这样的订单：

```
mainController.addBestallning(501, "2011/05/02", "Sven Karmageddon", 1002);            
mainController.addBestallningsOrderRad(501, 1, mainController.getAllaArtiklar().get(101), 5, 100.00); 
```

我找不到订单 501 的订单项。

这是我到目前为止所尝试的。制作了一种查找客户所有订单的方法：

```
public HashMap<Integer, Bestallning> getAllaKundOrdrar() {
    HashMap<Integer, Bestallning> allaKundOrderHashMap = new HashMap<>();
    //iterate through all orders
    //find the ones which belong to customerid
    //place them in allaKundOrderHashMap
    //return allaKundOrderHashMap
Iterator iter = tmpBestallningsregister.getAllaBestallningar().keySet().iterator();
while (iter.hasNext()) {
    Integer key = (Integer) iter.next();
    //String value = (String) controller.getAllaKunder().get(key).getKundNamn();              
    if ((customerNrToFindOrdersFor) == getAllaBestallningar().get(key).getKundNr()) {
        //found an order for this customer, putting it in the hashmap                
        allaKundOrderHashMap.put(key, getAllaBestallningar().get(key));
    }
}
return allaKundOrderHashMap;
} 
```

一种从所有客户那里查找所有已订购商品的方法（我知道，像这样搜索是 100% 错误）并获取属于特定订单的商品：

```
 //RETURN OF ORDERRADERS HASHMAP FOR SPECIFIC ORDER VIA ORDERREGISTER
public HashMap<Integer, BestallningsOrderRad> getAllaBestallningsBestallningsOrderRader() {
    HashMap<Integer, BestallningsOrderRad> allaBestallningsOrderRaderHashMap = new HashMap<>();
    //iterate through all orderrader
    //find the ones which belong to orderid
    //place them in allaKundOrderRaderHashMap
    //return allaKundOrderRaderHashMap                       

    Iterator iter = tmpBestallningsregister.getAllaBestallningsOrderRader().keySet().iterator();
    while (iter.hasNext()) {
        Integer key = (Integer) iter.next();         

        if ((orderNrToFindOrderRaderFor) == tmpBestallningsregister.getAllaBestallningsOrderRader().get(key).getBestallningsNr()) {                
            //found an orderrad for this order, putting it in the hashmap
            //allaBestallningsOrderRaderHashMap.put(key, getAllaBestallningsOrderRader().get(key));
            allaBestallningsOrderRaderHashMap.put(key, getAllaBestallningsOrderRader().get(key));                
        }
    }
    return allaBestallningsOrderRaderHashMap;
} 
```

有人愿意告诉我我做错了什么吗？我已经连续20个小时了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:45:13.083

不要使用两个不同`Map`的，而只使用一个。您需要正确定义一个`Order`包含所有订单数据的类（包括在订单之外很少使用的子订单）并仅使用`Map<Integer,Order>`

如果您坚持拥有两个单独的地图，则第二个使用相同的 id 但存储一个`List`（看起来像您想要订购的）子订单。

```
private Map<Integer, Order> orders;
private Map<Integer, List<SubOrder> suborders; 
```

在开始编码之前停下来思考更合适的数据结构通常会在以后为您节省很多“地狱”。

# asp.net-mvc - 从从 LocalStorage(WebSql) 检索并传递给 MVC 控制器的 javaScript 发送数据

> ID：14293328
> 
> 赞同：2
> 
> 时间：2013-01-12T12:31:28.733
> 
> 标签：asp.net-mvc, jquery-mobile, web-sql

```
 db.transaction(
           function (transaction) {
               transaction.executeSql('INSERT INTO EmployeeTable(Firstname,Lastname,BirthDate,EmployeeType,MaritalStatus,Company,IsActive,Dependents) values(?,?,?,?,?,?,?,?)',
                   [Firstname.toString(), Lastname.toString(), BirthDate, parseInt(empType), parseInt(marital),Company.toString(),active, parseInt(Dependents)]);

               transaction.executeSql('SELECT * FROM EmployeeTable', [], function (transaction, results) {

                   result = results;

                   alert(result.length);

                    for (i = 0; i < results.length; i++) {

                        var EmployeeID = results.rows.item(i).EmployeeID;
                        var Firstname = results.rows.item(i).Firstname;
                        var Lastname = results.rows.item(i).Lastname;

                        alert(results.rows.item(i).EmployeeID + "  " + results.rows.item(i).Firstname + "  " + results.rows.item(i).Lastname);
                        //var product =  [productid, productname, price, qty];                     
                        //insertTableRow(product,i);
                    }

                  }, null);    
           }
         ); 
```

我正在使用 WEB SQL 作为本地数据库

想将使用 db.Transaction() 方法从 websql 检索到的数据发送到服务器控制器。

请帮助相同......

我应该如何将数据传输到 mvc 的控制器.....

```
 [HttpPost]
    public ActionResult Create(FormCollection collection)
    {
        try
        {

            if (Save(0, collection))
            {
                // List<char> bulkdata = collection["bulkdata"].ToList();
                return RedirectToAction("Index");
            }

            else
            {
                return View("Edit");
            }
        }
        catch
        {
            return View();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:19:28.637

以下[教程](http://jaydata.org/blog/how-to-create-a-synchronized-online-offline-data-application-with-javascript-and-jaydata)展示了如何将本地数据库与 WCF 数据服务端点同步的示例。通过将其与[WebAPI 教程](http://jaydata.org/blog/how-to-use-jaydata-with-asp.net-web-api---i)相结合，您将能够使用以下几行同步到在线数据库：

```
function synchronizeData() {
        offlinedb
            .TodoItems
            .filter("it.InSync === false")
            .toArray(function (todoItems) {
                onlinedb.addMany(todoItems);
                onlinedb.saveChanges(function () {
                    todoItems.forEach(function (todoItem) {
                        offlinedb.attach(todoItem);
                        todoItem.InSync = true;
                    });
                    offlinedb.saveChanges(function () {
                        listLocalTodoItems();
                        listRemoteTodoItems();
                    });
                });
            })
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T17:52:38.060

您可以尝试序列化您的本地存储字符串，然后发送到服务器...

[ASP.NET MVC 如何将 JSON 对象作为参数从 View 传递到 Controller](https://stackoverflow.com/questions/560575/asp-net-mvc-how-to-pass-json-object-from-view-to-controller-as-parameter)

# class - 打字稿导入类

> ID：14293331
> 
> 赞同：4
> 
> 时间：2013-01-12T12:31:34.503
> 
> 标签：class, import, typescript

我一直试图让这个东西工作很长一段时间，到目前为止，我发现没有任何解决方案对我有用。

这就是我所拥有的：

```
//Test.ts
module t
{
    export class Test
    {
        constructor ()
        {
            alert("test");
        }
    }
}

//Main.ts
/// <reference path="Test.ts" />

var test: t.Test = new t.Test(); 
```

如您所见，我有两个文件，一个是 Main.ts，另一个是 Test.ts。它们都在同一个文件夹中。另外，如果它有帮助，我正在使用 VS2012 和 Typescript 插件。

感谢您的帮助！编辑：哦，顺便说一句，我收到错误（在 chrome 中）：未捕获的 ReferenceError：t 未定义

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T14:04:45.597

您需要在网页中包含这两个脚本：

```
<script src="test.js"></script>
<script stc="main.js"></script> 
```

# php - 大多数脚本中的 PHP 语法错误

> ID：14293333
> 
> 赞同：0
> 
> 时间：2013-01-12T12:31:54.387
> 
> 标签：php

我从 php.net 网站复制并粘贴了一个脚本...总是使用在线免费服务器我尝试测试一个 php 脚本我收到语法错误...

例如，使用这个简单的代码：

```
<html>
<head>
<title>Ejemplo PHP</title>
</head>
<body>
<?php echo '<p>Hola Mundo</p>'; ?> 
</body>
</html> 
```

我收到此错误：

```
Parse error: syntax error, unexpected T_CONSTANT_ENCAPSED_STRING in /home/a2524311/public_html/test1.php on line 6 
```

这有很多尝试过的脚本......

我认为服务器使用 PHP 5.2 但我不确定

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:38:51.567

兄弟，我已经运行了你给的脚本。它工作得很好。没有错误。我的 PHP 版本是 5.3.8。尝试回显 phpinfo() 以了解您的 PHP 版本。

```
<?php echo phpinfo(); ?> 
```

希望这对你有用。谢谢

# java - Thread.yield() 的使用；爪哇

> ID：14293334
> 
> 赞同：0
> 
> 时间：2013-01-12T12:32:04.243
> 
> 标签：java, yield

谁能解释这段代码：

```
public class Main implements Runnable{

private int i;
public synchronized void run() {
    System.out.print("i = "+ i +"\n");
    if (i % 5 != 0) {
        i++;
    }
    for (int x = 0; x < 5; x++, i++) {
        if (x > 1) {
            Thread.yield();
        }
    }
}

 public static void main(String[] args) {
    Main n = new Main();
    for (int x = 100; x > 0; --x) {
        new Thread(n).start();
    }
}
} 
```

以及输出如何

```
i= 0
i= 5
i= 10
i= 15
i= 20
.
.
.
i= 499 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T12:51:42.613

底部循环创建 100 个线程。每个线程都立即运行，与其他线程并行运行。在每个线程中，

*   在开始时，打印共享属性“i”的当前值
*   如果 i 不能被 5 整除，则递增一次
*   然后执行一个循环，最多 5 次。它执行的最后 3 次，它让给其他线程。每次执行此循环时，它都会增加共享变量“i”

因此，如果 i 能被 5 整除，则 i 增加 5 倍，否则增加 6 倍。但是， run() 方法是**同步**的。*因此，当其中一个线程已经在执行时，不允许其他线程执行*：您的程序实际上是单线程的，yield() 被忽略（没有其他线程可以执行），并且输出与

```
for (int i=0; i<500; i+= 5) System.out.println(i);
System.out.println(499); 
```

删除 synchronized 以查看改变输出的各种竞争条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T12:41:09.413

主线程创建 100 个线程，每个线程执行一个同步方法，以便它们序列化执行。每个线程都打印 i 的当前值（开始时默认为 0）并将其递增 5 次，以便下一个要占用 cpu（并执行主体）的线程打印 的新值`i`。

`Thread.yield();` 放弃 CPU 但并不意味着它会释放锁。这就是为什么每个线程`run`在前一个线程完成后才执行方法而不是其他的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T12:52:55.247

重要的是要了解[`yield`不释放监视器](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.3)。因此，您的所有线程都按顺序运行，即`yield`不允许其他线程运行，因为它在一个`synchronized`块内并且监视器保持锁定状态。

# c# - 网格视图中的搜索栏结果

> ID：14293336
> 
> 赞同：0
> 
> 时间：2013-01-12T12:32:20.773
> 
> 标签：c#, asp.net, .net

我正在开发一个 ASP .NET 页面，我想根据在搜索“文本框”中输入的搜索字符串从数据库中填充一个网格视图。网上有很多关于这个问题的内容，但没有一个能解决我的问题确切地。现在，我已经在这个页面上有一个带有模板字段的网格视图，可以从数据库中编辑和删除。关于如何完成这项工作的任何提示或想法。还告诉我如何仅将数据与搜索结果绑定（这是最重要的部分）。

# java - 搜索 JTable 的结果列表

> ID：14293340
> 
> 赞同：0
> 
> 时间：2013-01-12T12:32:43.767
> 
> 标签：java, swing, jtable

在[这里](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)阅读并且不理解这个概念，我不得不在这里发布我的问题。我正在尝试从关键字中获取输入值`JTextField`并过滤我的`JTable` `table_job`. ![在此处输入图像描述](../Images/9ce1c15759200e1d36a0b31a115c0519.png)

当按下搜索按钮时，它应该将`Job List`面板中的表格更改为仅显示在其表格中的任何列中包含关键字的工作集。目前，我没有运气并且正在获得空白屏幕。

这是作业列表屏幕

![在此处输入图像描述](../Images/d1f5e14fb2743f443ef6f0e10bc7f72e.png)

右边的表格没有根据关键字更新。

这是我尝试过但失败的方法，我是表过滤的新手。

```
try {              
    jobTableInit(); 
    String value = keyword.getText();

    TableRowSorter sorter;
    sorter = new TableRowSorter<DefaultTableModel>(new DefaultTableModel());
    RowFilter<DefaultTableModel, Object> rowFilter = null;
    try {
       rowFilter = RowFilter.regexFilter(keyword.getText());
    }
    catch(java.util.regex.PatternSyntaxException ex) {
       return;
    }
    sorter.setRowFilter(rowFilter);
    table_job.setRowSorter(sorter);
 }            
 catch (Exception e) {
    JOptionPane.showMessageDialog(null, e);
 } 
```

有人可以提出建议或给我看一个简单的示例代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:52:14.447

默认有两种方式

1.  使用自定义[比较](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)器并在[XxxTableModel](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)中搜索（或`JTables`使用查看`Pattern`），有关比较器的更多信息`JTables tutorial`请参见[排序和过滤](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)

2.  在 TableRowSorter 中使用 built_in [RowFilter](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)，然后过滤`JTables view`返回所需`List_of_Xxx`

3.  [另一个想法只是突出比赛](https://stackoverflow.com/questions/6410839/highlights-substring-in-the-tablecells-which-is-using-for-jtable-filetering)

# iphone - 如何删除 Core Data Values 中的所有值，然后如何在 Core Data 中存储值

> ID：14293342
> 
> 赞同：1
> 
> 时间：2013-01-12T12:32:54.547
> 
> 标签：iphone, objective-c, web-services, core-data

在我的应用程序中，我`Core Data`用来存储值。首先，我存储了 30 行每月的值，并每天一个接一个地检索这些值，但不是每天都删除该行。在这 30 天完成之后。在第 31 天，我需要清除所有存储在其中的数据， `Core Data`并且必须检查 Web 服务，并且必须从服务中检索数据并存储从服务中获取的值。每个月都必须这样做。

可能吗？

# c# - 在 .NET 中散列 SecureString

> ID：14293344
> 
> 赞同：24
> 
> 时间：2013-01-12T12:33:14.287
> 
> 标签：c#, .net, password-encryption, securestring

在 .NET 中，我们有 SecureString 类，在您尝试使用它之前一切都很好，至于（例如）散列字符串，您需要明文。在给定一个接受字节数组并输出字节数组的哈希函数的情况下，我已经尝试编写一个将散列 SecureString 的函数。

```
private static byte[] HashSecureString(SecureString ss, Func<byte[], byte[]> hash)
{
    // Convert the SecureString to a BSTR
    IntPtr bstr = Marshal.SecureStringToBSTR(ss);

    // BSTR contains the length of the string in bytes in an
    // Int32 stored in the 4 bytes prior to the BSTR pointer
    int length = Marshal.ReadInt32(bstr, -4);

    // Allocate a byte array to copy the string into
    byte[] bytes = new byte[length];

    // Copy the BSTR to the byte array
    Marshal.Copy(bstr, bytes, 0, length);

    // Immediately destroy the BSTR as we don't need it any more
    Marshal.ZeroFreeBSTR(bstr);

    // Hash the byte array
    byte[] hashed = hash(bytes);

    // Destroy the plaintext copy in the byte array
    for (int i = 0; i < length; i++) { bytes[i] = 0; }

    // Return the hash
    return hashed;
} 
```

我相信这将正确地散列字符串，并在函数返回时正确地从内存中清除任何明文副本，假设提供的散列函数表现良好并且不会复制它没有的输入擦洗自己。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-12T12:51:44.417

> 我在这里错过了什么吗？

是的，你有，一个相当基本的。当垃圾收集器压缩堆时，您无法清理留下的数组副本。Marshal.SecureStringToBSTR(ss) 没问题，因为 BSTR 是在非托管内存中分配的，所以会有一个不会改变的可靠指针。换句话说，擦洗那个没问题。

但是，您的`byte[] bytes`数组包含字符串的副本并*在*GC 堆上分配。您可能会使用 hashed[] 数组引发垃圾收集。很容易避免，但当然您几乎无法控制进程中分配内存和引发集合的其他线程。或者就此而言，当您的代码开始运行时，后台 GC 已经在进行中。

SecureString 的要点是*永远不要*在垃圾收集的内存中拥有字符串的明文副本。将其复制到托管数组中违反了该保证。如果你想让这段代码安全，那么你将不得不编写一个 hash() 方法，它接受 IntPtr 并且只读取该指针。

请注意，如果您的散列需要匹配在另一台机器上计算的散列，那么您不能忽略该机器将用于将字符串转换为字节的编码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-17T12:12:27.863

总是有可能使用非托管[CryptoApi](https://msdn.microsoft.com/en-us/library/windows/desktop/aa380255%28v=vs.85%29.aspx)或[CNG](https://msdn.microsoft.com/en-us/library/windows/desktop/aa376210%28v=vs.85%29.aspx)函数。请记住，这`SecureString`是为非托管消费者设计的，该消费者可以完全控制内存管理。

如果你想坚持使用 C#，你应该固定临时数组以防止 GC 在你有机会擦洗它之前移动它：

```
private static byte[] HashSecureString(SecureString input, Func<byte[], byte[]> hash)
{
    var bstr = Marshal.SecureStringToBSTR(input);
    var length = Marshal.ReadInt32(bstr, -4);
    var bytes = new byte[length];

    var bytesPin = GCHandle.Alloc(bytes, GCHandleType.Pinned);
    try {
        Marshal.Copy(bstr, bytes, 0, length);
        Marshal.ZeroFreeBSTR(bstr);

        return hash(bytes);
    } finally {
        for (var i = 0; i < bytes.Length; i++) { 
            bytes[i] = 0; 
        }

        bytesPin.Free();
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T13:27:52.863

作为对汉斯回答的补充，这里有一个如何实现哈希器的建议。Hans 建议将指向非托管字符串的指针传递给哈希函数，但这意味着客户端代码（= 哈希函数）需要处理非托管内存。这并不理想。

另一方面，您可以将回调替换为以下接口的实例：

```
interface Hasher {
    void Reinitialize();
    void AddByte(byte b);
    byte[] Result { get; }
} 
```

这样，散列器（尽管它变得稍微复杂一些）可以完全在托管土地上实施，而不会泄露安全信息。然后您`HashSecureString`将如下所示：

```
private static byte[] HashSecureString(SecureString ss, Hasher hasher) {
    IntPtr bstr = Marshal.SecureStringToBSTR(ss);
    try {
        int length = Marshal.ReadInt32(bstr, -4);

        hasher.Reinitialize();

        for (int i = 0; i < length; i++)
            hasher.AddByte(Marshal.ReadByte(bstr, i));

        return hasher.Result;
    }
    finally {
        Marshal.ZeroFreeBSTR(bstr);
    }
} 
```

请注意该`finally`块以确保将非托管内存归零，无论哈希实例执行什么恶作剧。

这是一个简单（但不是很有用）`Hasher`的实现来说明接口：

```
sealed class SingleByteXor : Hasher {
    private readonly byte[] data = new byte[1];

    public void Reinitialize() {
        data[0] = 0;
    }

    public void AddByte(byte b) {
        data[0] ^= b;
    }

    public byte[] Result {
        get { return data; }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-08T21:43:26.010

作为进一步的补充，您能否不将 @KonradRudolph 和 @HansPassant 提供的逻辑包装到自定义`Stream`实现中？

这将允许您使用该`HashAlgorithm.ComputeHash(Stream)`方法，该方法将保持接口受到管理（尽管您需要及时处理流）。

当然，对于一次在内存中最终有多少数据，您将受到 HashAlgorithm 实现的支配（但是，当然，这就是参考源的用途！）

只是一个想法...

```
public class SecureStringStream : Stream
{
    public override bool CanRead { get { return true; } }
    public override bool CanWrite { get { return false; } }
    public override bool CanSeek { get { return false; } }

    public override long Position
    {
        get { return _pos; }
        set { throw new NotSupportedException(); }
    }

    public override void Flush() { throw new NotSupportedException(); }
    public override long Seek(long offset, SeekOrigin origin) { throw new NotSupportedException(); }
    public override void SetLength(long value) { throw new NotSupportedException(); }
    public override void Write(byte[] buffer, int offset, int count) { throw new NotSupportedException(); }

    private readonly IntPtr _bstr = IntPtr.Zero;
    private readonly int _length;
    private int _pos;

    public SecureStringStream(SecureString str)
    {
        if (str == null) throw new ArgumentNullException("str");
        _bstr = Marshal.SecureStringToBSTR(str);

        try
        {
            _length = Marshal.ReadInt32(_bstr, -4);
            _pos = 0;
        }
        catch
        {
            if (_bstr != IntPtr.Zero) Marshal.ZeroFreeBSTR(_bstr);
            throw;
        }
    }

    public override long Length { get { return _length; } }

    public override int Read(byte[] buffer, int offset, int count)
    {
        if (buffer == null) throw new ArgumentNullException("buffer");
        if (offset < 0) throw new ArgumentOutOfRangeException("offset");
        if (count < 0) throw new ArgumentOutOfRangeException("count");
        if (offset + count > buffer.Length) throw new ArgumentException("offset + count > buffer");

        if (count > 0 && _pos++ < _length) 
        {
            buffer[offset] = Marshal.ReadByte(_bstr, _pos++);
            return 1;
        }
        else return 0;
    }

    protected override void Dispose(bool disposing)
    {
        try { if (_bstr != IntPtr.Zero) Marshal.ZeroFreeBSTR(_bstr); }
        finally { base.Dispose(disposing); }
    }
}

void RunMe()
{
    using (SecureString s = new SecureString())
    {
        foreach (char c in "jimbobmcgee") s.AppendChar(c);
        s.MakeReadOnly();

        using (SecureStringStream ss = new SecureStringStream(s))
        using (HashAlgorithm h = MD5.Create())
        {
            Console.WriteLine(Convert.ToBase64String(h.ComputeHash(ss)));
        }
    }
} 
```

# solr - Solr 在使用变音符号搜索时会找到没有变音符号的单词，但反之则不行

> ID：14293347
> 
> 赞同：2
> 
> 时间：2013-01-12T12:33:28.900
> 
> 标签：solr

对于我的 solr 实现，无论您搜索是否使用变音符号，我都希望查询返回带有和不带变音符号的单词。

举个例子

搜索词是“ **çest** ”——Solr 返回：“ *cest* ”、“ *çest* ”和“ *çest ca* ” 搜索词是“ **cest** ”——Solr 返回：“ *cest* ”、“ *çest* ”和“ *çest ca* ”

目前是第一部作品。当我搜索“çest”时，它会返回 cest 和 çest。但是，当我搜索“cest”时，它只返回“cest”

这是它在我的架构中的外观：

```
<fieldType name="text_special_search" class="solr.TextField" positionIncrementGap="100">
    <analyzer>
        <filter class="solr.ASCIIFoldingFilterFactory"/>
        <charFilter class="solr.PatternReplaceCharFilterFactory" pattern="\W+" replacement="-"/>
        <tokenizer class="solr.LowerCaseTokenizerFactory"/>
    </analyzer>
</fieldType> 
```

有没有办法让它双向工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:29:50.883

如果您想要任何一个匹配项，则不需要`solr.PatternReplaceCharFilterFactory`. 这将在特殊字符被传递到 ASCII 过滤器之前删除它们。

您可以使用 ：-

```
<fieldType name="text_special_search" class="solr.TextField" positionIncrementGap="100">
    <analyzer>
        <tokenizer class="solr.LowerCaseTokenizerFactory"/>
        <filter class="solr.ASCIIFoldingFilterFactory"/>
    </analyzer>
</fieldType> 
```

您还可以使用 WhiteSpace Tokenizer 来获取令牌并将小写字母用作过滤器。

另外，请记住分析器中的执行顺序如下，无论您的顺序如何：-

*   字符过滤器
*   分词器
*   过滤器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-20T18:52:52.420

推荐的答案对我没有用，而是我不得不使用这个：

```
<fieldType name="text_special_search" class="solr.TextField" positionIncrementGap="100">
    <analyzer>
        <charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/>
        <tokenizer class="solr.LowerCaseTokenizerFactory"/>
        <filter class="solr.ASCIIFoldingFilterFactory" preserveOriginal="true"/>
    </analyzer>
</fieldType> 
```

您还可以使用随您的 solr 版本提供的映射文件或使用下面链接的文件 [https://github.com/lmjabreu/solr-conftemplate/blob/master/mapping-ISOLatin1Accent.txt](https://github.com/lmjabreu/solr-conftemplate/blob/master/mapping-ISOLatin1Accent.txt)

# c# - C# 使用 P/Invoke 一次播放多个声音

> ID：14293349
> 
> 赞同：0
> 
> 时间：2013-01-12T12:33:45.477
> 
> 标签：c#, audio, pinvoke

我正在编写（翻译）我的 java 游戏引擎到`C#`. 现在我必须一次播放多个声音。我只针对 Windows 平台，需要支持这些格式。

*   音频 (PCM)
*   MIDI
*   国际电影节
*   非盟

出于学习目的，我想使用`P/Invokes`它。有没有`P/Invokes`做这些事情的？搜索谷歌总是指向`SoundPlayer`课程，但这不是我需要的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:43:33.427

检查[pinvoke.net](http://pinvoke.net/)页面。

下面有一些链接：

[http://www.pinvoke.net/default.aspx/winmm.playsound](http://www.pinvoke.net/default.aspx/winmm.playsound)

[http://www.pinvoke.net/default.aspx/coredll/playsound.html](http://www.pinvoke.net/default.aspx/coredll/playsound.html)

# ios - 使用自定义控件全屏显示搜索结果

> ID：14293352
> 
> 赞同：0
> 
> 时间：2013-01-12T12:33:58.347
> 
> 标签：ios, uiview, uisearchbar, uisearchdisplaycontroller

我需要为我的自定义控件显示搜索结果，我不太确定什么是使这个可配置的最佳方法。

基本上该控件类似于，`UITextField`但具有更多的可视化。当用户在字段中输入一些文本时，控件将进入全屏状态，以便搜索字段位于顶部，结果显示在下方。这与在 Apple 的 Mail.app 中进行地址搜索非常相似（见附图）。

这里的问题是 iPhone 上的“全屏”意味着什么。如果视图是从表格视图单元格呈现的，则父视图的框架不好。窗口的边界不起作用，因为如果有导航栏，我想让导航栏保持可见。此外，iPad 的全屏显示会有所不同。有了 iPad，我想我可以使用 pop over。

我在想使用我的自定义控件的控制器是否会提供边界（也许是委托方法？）但这感觉有点麻烦。

任何想法，将不胜感激。

![Apple Mail.app 地址搜索](../Images/eced125d609117f13dd3fb555d0f409c.png)

## 更新：

到目前为止，我得出的结论是，iPad 和 iPhone 版本必须有自己的结果显示专业。在 iPad 上，弹出框的实现非常简单。在 iPhone 上，我真的不知道确定扩展控件（文本字段和结果表）边界的正确方法。

很难描述这个问题，但我真正需要的是扩展控件以占据一些边界（在大多数情况下是键盘和导航栏之间的空间）。

# php - 如何更换新线

> ID：14293355
> 
> 赞同：0
> 
> 时间：2013-01-12T12:34:04.423
> 
> 标签：php, newline

```
$t = '"Confidence isn\'t gained over time and practice. Confidence is gained when you realize you choose your own path, you choose to fall, you choose not to fall.

If you are afraid to fall you fall because you are afraid. Everything is choice." - Daniel ILabaca';
$order   = array("\r\n", "\n", "\r");
$text = str_replace($order, '<br/>', $t); 
```

但在数据库中仍然是新行。

在插入之前我做`htmlspecialchars(addslashes(trim($text)))`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:37:08.187

你为什么不试试这个[`nl2br()`](http://php.net/manual/en/function.nl2br.php)功能呢？试试这个：

```
$text = nl2br($t); 
```

而不是以下两行：

```
$order   = array("\r\n", "\n", "\r");
$text = str_replace($order, '<br/>', $t); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T12:43:21.487

在数据库中保存数据时，**只需要对其进行转义以防止 SQL 注入**。无需执行 htmlspecialchars、nl2br、addlashes 等。您按原样保存用户数据。但要确保它的安全。**在表示层显示这些数据时，您应该使用 htmlentities、nl2br、addlashes 等函数**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T12:38:23.207

如果您根本不想要任何换行符并且不想将它们转换为 HTML `<br >`，请在此处查看：[从 html 源代码中删除所有换行符](https://stackoverflow.com/questions/5258543/remove-all-the-line-breaks-from-the-html-source)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T12:40:48.410

您应该使用 PHP 内置方法 nl2br()

```
nl2br — Inserts HTML line breaks before all newlines in a string 
```

例子

```
<?php
    echo nl2br("Welcome\r\nThis is my HTML document", false);
?> 
```

输出

```
Welcome<br>
This is my HTML document 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T12:40:58.543

而不是 $order 和 str_replace 位，只需尝试`$text = nl2br($t);`

# android - 使用 Web 服务响应更新 ViewPage 的片段

> ID：14293359
> 
> 赞同：3
> 
> 时间：2013-01-12T12:34:43.170
> 
> 标签：android, android-asynctask, android-fragments, android-viewpager

我是 FragmentActivity、Fragment 和 ViewPager 的新手。

我正在使用带有 2 个片段的 FragmentActivity。

每个片段都使用我将从 AsyncTask 中的 Web 服务调用中获得的相同数据。

现在我不想为每个片段调用 Web 服务两次。

相反，我的想法是使用 FragmentActivity 中的 AsyncTask 从 Web 服务获取数据，然后通知 FragmentAdapter 已收到数据。因此，Adapter 应该相应地更新两个 Fragment 的视图。

但我坚持如何实现这一目标。如果有人建议我这样的方式或一些例子，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-18T13:43:42.537

在后台启动一个任务，当收到结果时通知这样的片段

```
package com.example.myapplication2;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v7.app.ActionBarActivity;

public class MainActivity3 extends ActionBarActivity {

    private FragmentManager fragManager;
    private Fragment fragOne,fragTwo;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main2);

    fragManager = getSupportFragmentManager();
    if((fragOne=fragManager.findFragmentById(R.id.frag_one))==null){
        fragOne = new FragOne();
        fragManager.beginTransaction()
                .add(R.id.container, fragOne )
                .commit();
    }
    if((fragTwo=fragManager.findFragmentById(R.id.frag_two))==null){
        fragTwo = new FragTwo();
        fragManager.beginTransaction()
                .add(R.id.container, fragTwo)
                .commit();
    }

    startTaskInBackground();

    }

    @Override
    public void onTaskComplete() {
    fragOne.onDataReceived();
    fragTwo.onDataReceived();
    }

} 
```

# eclipse - 如何在 ubuntu 12.04 上完全卸载 eclipse

> ID：14293363
> 
> 赞同：0
> 
> 时间：2013-01-12T12:35:05.647
> 
> 标签：eclipse, ubuntu

我已经在我的 ubuntu 21.04 eclipse indigo 上安装了。但我忘记了如何安装它，使用 apt-get 或 rpm 或其他方式安装。

今天我为它安装一些更新时，eclipse出现了一些错误，例如，它找不到编辑器，ADT无法出现。

所以我想卸载它。

我用sudo apt=get remove eclipse，就OK了。

但是当我在 cmd 行中输入时：eclipse. 仍有日食出现。

所以我问如何完全安装

ubuntu 上的日食

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:48:36.593

Ubuntu 基于 Debian，因此使用通常由 apt-get 管理的 .deb 包。因此，您可以确定不涉及 rpm。

您要么通过 apt-get 安装它，要么在某处手动安装它。检查`type eclipse`找出它住在哪里。如果您怀疑某个文件可能来自某个包，您可以使用`dpkg -S filename`它来检查哪个包包含该文件。

如果您只是想安装另一个新的 Eclipse，您可以从网站上下载它并将其解压缩到一个新文件夹并使用它。- 任何其他（可能损坏的）安装都应该完全独立于此。

# python - 为什么重启线程时需要重新创建实例？

> ID：14293368
> 
> 赞同：13
> 
> 时间：2013-01-12T12:35:56.093
> 
> 标签：python, multithreading

想象以下类：

```
Class Object(threading.Thread):
    # some initialisation blabla
    def run(self):
        while True:
            # do something
            sleep(1)

class Checker():
    def check_if_thread_is_alive(self):
        o = Object()
        o.start()

        while True:
            if not o.is_alive():
                o.start() 
```

我想重新启动线程以防它死了。这行不通。因为线程只能启动一次。第一个问题。为什么是这样？

据我所知，我必须重新创建每个实例`Object`并调用`start()`以再次启动线程。在复杂`Object`的情况下，这不是很实用。我必须读取 old 的当前值`Object`，创建一个新值并使用旧值设置新对象中的参数。第二个问题：这可以以更智能、更简单的方式完成吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-12T12:43:57.320

以这种方式实现 threading.Thread 的原因是为了保持线程对象和操作系统线程之间的对应关系。在主要操作系统中，线程无法重新启动，但您可以**使用另一个线程 id**创建另一个线程。

如果娱乐是一个问题，则无需从 threading.Thread 继承您的类，只需将目标参数传递给 Thread 的构造函数，如下所示：

```
class MyObj(object):
    def __init__(self):
        self.thread = threading.Thread(target=self.run)
    def run(self):
        ... 
```

然后你可以访问线程成员来控制你的线程执行，并根据需要重新创建它。不需要 MyObj 娱乐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T12:44:04.063

见这里： [http ://docs.python.org/2/library/threading.html#threading.Thread.start](http://docs.python.org/2/library/threading.html#threading.Thread.start)

> 每个线程对象最多只能调用一次。它安排在单独的控制线程中调用对象的 run() 方法。
> 
> 如果在同一个线程对象上多次调用此方法，则会引发 RuntimeError。

一个线程不打算多次运行。您可能想使用[线程池](https://stackoverflow.com/questions/3033952/python-thread-pool-similar-to-the-multiprocessing-pool)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T12:48:57.840

我相信，这与`Thread`类的实现方式有关。它包装了一个真正的操作系统线程，因此重新启动线程实际上会改变它的身份，这可能会令人困惑。

处理线程的更好方法实际上是通过目标函数/可调用对象：

```
class Worker(object):
    """ Implements the logic to be run in separate threads """
    def __call__(self):
        #  do useful stuff and change the state

class Supervisor():
    def run(self, worker):
        thr = None
        while True:
            if not thr or not thr.is_alive():
                thr = Thread(target=worker)
                thr.daemon = True
                thr.start()
            thr.join(1)  # give it some time 
```

# ios - ios 6中的图像拖动速度很慢

> ID：14293369
> 
> 赞同：0
> 
> 时间：2013-01-12T12:36:05.127
> 
> 标签：ios, objective-c, xcode

我有一个 ipad 应用程序，具有适用于 ios 5 和 ios 6 的视频录制和图像拖动功能。

我使用“ScreenCapture”类文件进行视频录制，使用“Draggable”类文件进行图像拖动。

现在的问题是，当我使用“ScreenCapture”类时，图像拖动功能变得缓慢而且有点生涩。当我删除那个'ScreenCapture'类时，拖动工作正常（没有视频录制）。

这两个功能对于 ios 5 来说都很好。但是当尝试在 ios 6 中运行时，由于“ScreenCapture”，图像拖动变得很慢。

我怎样才能做到这一点？

**使用的代码：-

```
 //  For image dragging.......

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];

    if (isImageRemove)
    {
        imgcharacter = [[UIImageView alloc]init];
        imgobject = [[UIImageView alloc]init];

    }

    CGPoint pt = [[touches anyObject] locationInView:imgcharacter];
    startlocation =pt;

    imgcharacter.userInteractionEnabled=YES;
    imgobject.userInteractionEnabled=YES;

    int count;

    if (isImageRemove)
   {
        Images = [[NSMutableArray alloc]init];

        int value = [touch view].tag;

       int inx=0;
        for (int i1=0; i1<[[self.view subviews] count]; i1++) {
            if ([[[[self.view subviews]objectAtIndex:i1]valueForKey:@"tag"]intValue]==value) {
                inx=i1;
                break; 
            }
        }

        NSLog(@"index = %d",inx);

        count =   [self.view.subviews count];
        NSLog(@"count = %d",count);

        UIView* subview;

        if ((subview = [[self.view subviews] objectAtIndex:inx]))
        {
            if ([touch view].tag >0)
            {
                NSLog(@"subview = %@",subview);
                [subview removeFromSuperview];
            }
            else {
                NSLog(@"subview = %@",[self.view subviews]);
            }
        }

    }
    else 
    {

        CGPoint location = [touch locationInView:self.view];

    }

}

   // For Video recording.......

- (IBAction)btnRecording_Pressed:(id)sender {
    if (Isrecording ==YES)
    {
        [voiceRecorder stop];
        [captureview stopRecording];

        AVAudioSession *audioSession = [AVAudioSession sharedInstance];
        NSError *err = nil;
        [audioSession setCategory :AVAudioSessionCategoryPlayAndRecord error:&err];
        if(err)
        {
            NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
            return;
        }
        [audioSession setActive:YES error:&err];

        err = nil;
        if(err){
            NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
            return;
        }

        recordSetting = [[NSMutableDictionary alloc] init];

        [recordSetting setValue :[NSNumber numberWithInt:kAudioFormatLinearPCM] forKey:AVFormatIDKey];
        [recordSetting setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey];
        [recordSetting setValue:[NSNumber numberWithInt: 2] forKey:AVNumberOfChannelsKey];

        [recordSetting setValue :[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
        [recordSetting setValue :[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsBigEndianKey];
        [recordSetting setValue :[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsFloatKey];

        NSString *recorderFilePath = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) objectAtIndex:0];

        recorderFilePath = [recorderFilePath stringByAppendingPathComponent:@"tempRecording.caf"];
        NSURL *urls = [NSURL fileURLWithPath:recorderFilePath];
        err = nil;
        voiceRecorder = [[ AVAudioRecorder alloc] initWithURL:urls settings:recordSetting error:&err];

        if(!voiceRecorder){
            NSLog(@"recorder: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
            UIAlertView *alert =
            [[UIAlertView alloc] initWithTitle: @"Warning"
                                       message: [err localizedDescription]
                                      delegate: nil
                             cancelButtonTitle:@"OK"
                             otherButtonTitles:nil];
            [alert show];
            [alert release];
            return;
        }

        //prepare to record
        [voiceRecorder setDelegate:self];
        [voiceRecorder prepareToRecord];

        //scrren short of screen

        if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
            UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, NO, [UIScreen mainScreen].scale);
        else
            UIGraphicsBeginImageContext(self.view.bounds.size);

        [captureview.layer renderInContext:UIGraphicsGetCurrentContext()];

        UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        NSData * imageData = UIImageJPEGRepresentation(viewImage, 1.0);

        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);      

        NSString *documentsDirectory = [paths objectAtIndex:0];
        documentsDirectory = [documentsDirectory stringByAppendingPathComponent:@"VideoScreen.jpg"];

        [imageData writeToFile:documentsDirectory atomically:YES];

        [voiceRecorder record];

        [captureview performSelector:@selector(startRecording) withObject:nil afterDelay:0];

        Isrecording =NO;
        [btnRecord setTitle:@"Stop" forState:UIControlStateNormal];

    }
    else if (!Isrecording)
    {
        imgDustbin.hidden =NO;
        [[NSUserDefaults standardUserDefaults ] setValue:@"YES" forKey:@"DUSTBIN"];

        [voiceRecorder stop];
        [captureview stopRecording];
        [self createVideo];
        Isrecording=YES;
        [btnRecord setTitle:@"Record" forState:UIControlStateNormal];
    }
} 
```

谢谢。

# node.js - 在互联网上发布 Node.JS 服务器

> ID：14293370
> 
> 赞同：9
> 
> 时间：2013-01-12T12:36:10.220
> 
> 标签：node.js, publish

我有一个运行良好的 Node.JS 服务器`localhost`。现在我希望它可以从我的机器托管的互联网上访问。我的公共 IP 地址（[Google 告诉我我拥有](https://www.google.co.uk/search?q=what+is+my+ip+address&aq=0&oq=what+is+my+IP+address&aqs=chrome.0.0j5j0l2j62l2.2794&sourceid=chrome&ie=UTF-8)的那个）似乎不是“可访问的”：

```
https.createServer({
    key: privateKey,
    cert: certificate
}, server).listen(80, '86.151.23.17'); 
```

失败并出现以下 Node.JS 错误：

```
Error: listen EADDRNOTAVAIL
    at errnoException (net.js:770:11)
    at Server._listen2 (net.js:893:19)
    at listen (net.js:937:10)
    at Server.listen (net.js:994:9)
    at dns.js:71:18
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

如何将我的 Node.JS 服务器发布到我的公共 IP 地址？

[注意：我没有运行其他网络服务器。另外，我尝试了[这里](https://stackoverflow.com/questions/10809740/listen-eaddrnotavail-error-in-node-js?rq=1)建议的各种不同的端口。]

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-12T12:39:38.853

您很可能在路由器后面，因此您的公共 IP 在路由器本身以外的任何地方都不可用。您需要做的是监听您的私有 IP（通常在 192.168.* 范围内）并在路由器上设置端口转发。

如果您在 Linux 上，您还需要使用大于 1024 的端口而不是 80，这样您就不必以 root 身份运行节点。设置端口转发时，您可以简单地将端口 80 转发到节点服务器运行的任何端口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-05T10:13:49.150

您的应用程序应该侦听其他 IP 地址，例如

```
app.listen(3000,'0.0.0.0'); 
```

要不就

```
app.listen(3000); 
```

然后您必须在调制解调器中打开端口转发。像这样[http://www.dlink.com/uk/en/support/faq/routers/wireless-routers/dkt-series/how-do-i-open-up-ports-to-my-computer-port-在此路由器上转发](http://www.dlink.com/uk/en/support/faq/routers/wireless-routers/dkt-series/how-do-i-open-up-ports-to-my-computer-port-forwarding-on-this-router)

最后，您可以在这里[https://whatismyipaddress.com/的 IP 地址看到您的应用程序](https://whatismyipaddress.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-09T11:47:04.223

```
const http = require("http");
const hostname = '0.0.0.0';
const port = 80;

server.listen(port, hostname, () => {
  console.log(`Server running at http://${hostname}:${port}/`);
}); 
```

使用 0.0.0.0 将开始在我测试过的公共互联网上列出。

我遇到过 ISP 给定的路由器拦截默认 80 和 443 端口的情况。即使端口是开放的。所以最好先使用 8080 等端口检查服务器。

并且还将端口转发配置为静态本地地址（ipconfig /all 假设您的主机是 Windows），然后使用主机的 MAC 地址将该 IP 地址分配给您的主机。

为了更好的体验，如果您没有静态IP，可以随时使用noip.com动态域名访问您的服务器（无需知道IP地址）。

# windows-phone-7 - 如何更改 hubtile 标题属性的字体大小

> ID：14293374
> 
> 赞同：0
> 
> 时间：2013-01-12T12:36:40.217
> 
> 标签：windows-phone-7

我正在使用 Microsoft.Phone.Controls.Toolkit 中的 hubtile 控件，它的 xaml 代码是

```
<toolkit:HubTile x:Name="hub" Margin="12,12,0,0"                                             
                         Title="{Binding Title}"                        
                         Message="{Binding Message}"
                         Source="{Binding Image}"
                         GroupTag="BindingHubTile" Tap="HubTile_Tap_1">
                                </toolkit:HubTile> 
```

如何更改标题属性的字体大小以使整个标题适合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:05:51.503

你不能这样做。一种方法是找到 HubTile 类并更改默认字体大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:25:37.667

下载“ [Auto Scaling TextBlock for Silverlight](http://edventuro.us/2010/03/an-auto-scaling-textblock-for-silverlight/) ”类并将其包含在您的项目中。

修改 HubTile 控件的 ControlTemplate 以使用 AutoScalingTextBlock 而不仅仅是 TextBlock 作为标题。

# database-design - 大学课程的数据库设计

> ID：14293375
> 
> 赞同：0
> 
> 时间：2013-01-12T12:36:41.657
> 
> 标签：database-design

我目前正在为一所大学设计一个数据库（作业！）。一切看起来都还好。但是，我遇到了一个微妙的问题。

现在，我有`Intake`一个实体，它保存着学生可以注册的入学信息。每个入学都有很多`Specialism`s，每个专业都有很多`Module`要讲授的 s，每个模块都有很多`Lecturer`s 来提供它。

下图应该清楚设计（中间实体用于处理多对多关系）。

![数据库逻辑设计](../Images/f30dcaeb71377fb8a98a8e65c36403ac.png)

现在，假设我有一个录取代码`F1205`（从 2012 年 5 月开始的全日制录取），它仅针对一个专业（例如，`SE`软件工程）开放（为了简单起见）。该专业的专业摄入量将是一个串联键`F1205SE`。`SE`从这个id，我可以通过使用它的一部分来判断要讲授的模块是什么。

因为一个模块可以由许多讲师讲授，我如何指定将在该特定专业摄入量中提供该模块的讲师，以及将这些信息存储在哪里？

我觉得我有一个设计错误，但我不知道在哪里。

# c# - 未正确设置数组的 MVC JSON 对象

> ID：14293376
> 
> 赞同：2
> 
> 时间：2013-01-12T12:36:54.053
> 
> 标签：c#, javascript, jquery, asp.net-mvc, json

我正在制作一个工具，可以在其中获得报价抛出 javascript，然后将报价发送给自己。报价的制作进展顺利，但在发送电子邮件时，报价数据已损坏。除了数组之外，对象中
的数据`Quotation`都很好。`Options`发送 3 个数组项时，`Options`数组包含 3 个项，但**名称为 null 且价格为 0**。

报价使用`jQuery.post`.

C# 中的引用对象如下所示：

```
public class Quotation
{
    public string Email { get; set; }
    public string Product { get; set; }
    public int Amount { get; set; }
    public decimal BasePrice { get; set; }
    public decimal SendPrice { get; set; }
    public Option[] Options { get; set; }
    public decimal Discount { get; set; }
    public decimal SubTotal { get; set; }
    public decimal TotalPrice { get; set; }
}
public class Option
{
    public string Name { get; set; }
    public decimal Price { get; set; }
} 
```

操作方法如下所示：

```
[HttpPost]
public JsonResult Offerte(Models.Quotation quotation)
{
    //
} 
```

jQuery 看起来像：

```
$.post(baseUrl + "/api/Offerte/", jsonContent, function (data) {
    alert(data.Message);
}); 
```

jsonContent 对象如下所示：

```
{
    "Options":[
        {
            "Name":"Extra pagina's (16)",
            "Price":40
        },
        {
            "Name":"Papier Keuze",
            "Price":30
        },
        {
            "Name":"Omslag",
            "Price":29.950000000000003
        }
    ],
    "Amount":"5",
    "BasePrice":99.96000000000001,
    "SubTotal":199.91000000000003,
    "SendPrice":0,
    "Discount":19.991,
    "TotalPrice":179.91900000000004,
    "Email":"someone@example.com"
} 
```

有谁知道为什么数组设置不正确？

* * *

**编辑**
如果我将此调试代码添加到控制器：

```
using (var writer = System.IO.File.CreateText(Server.MapPath("~/App_Data/debug.txt")))
{
    writer.AutoFlush = true;

    foreach (var key in Request.Form.AllKeys)
    {
        writer.WriteLine(key + ": " + Request.Form[key]);
    }
} 
```

> 选项[0][名称]：额外页面的 (52)
> 选项[0][价格]：156
> 选项[1][名称]：Papier Keuze
> 选项[1][价格]：68.4
> 选项[2][名称]：Omslag
> 选项[2][价格]：41.94
> 数量：6基本价格
> ：149.91899999999998 小计
> ：416.2589999999996
> 发送价格：0
> 折扣：45.78848999999999
> 总价格：370.47051
> 电子邮件：someone@example.com

这意味着数据确实到达了控制器，但选项仍然没有正确设置。而且我不想要一个简单的修复，然后我自己解析它，我想知道处理它的正确方法，以便 MVC 处理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:50:18.633

如果您想将 JSON 数据发送到 ASP.NET MVC 控制器操作并且您希望模型绑定当前工作（例如，在您的模型上绑定集合），您需要将 contentType 指定为`"aplication/json"`.

因为`$.post`您无法指定您需要使用的 contentType`$.ajax`并且您还需要`JSON.stringify`您的数据：

```
$.ajax({
    url: baseUrl + "/api/Offerte/",
    type: 'POST',
    data: JSON.stringify(jsonContent),
    contentType: "application/json",
    success: function (data) {
        alert(data.Message);
    }
}); 
```

# android - Android中的长触摸处理

> ID：14293377
> 
> 赞同：0
> 
> 时间：2013-01-12T12:37:02.647
> 
> 标签：android

我想在***长***按当前活动时打开对话活动。我已经在简单的触摸事件中完成了它，但我想在长触摸时执行相同的操作，这样如果用户错误地触摸屏幕，它不会影响应用程序。如何实现？

任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:43:07.740

您触摸的不是活动，而是活动显示的视图。你可以`View.OnLongClickListener`用`setOnLongClickListener`方法设置一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T12:45:23.550

> 我想在长按当前活动时打开对话活动。

您不能在单击 Activity 时设置事件，您可以在特定布局或视图上设置事件（如果您想为整个 Activity 设置它，根布局会更好）。

您可以使用以下行在视图或布局上设置 LongClick 事件。

```
 yourViewOrLayout.setOnLongClickListener(new OnLongClickListener() {

        @Override
        public boolean onLongClick(View v) {
            //The Action you want to perform
            return false;
        }
    }); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T12:46:50.210

试试这个 ：

```
 RelativeLayout rl=(RelativeLayout) findViewById(R.id.relative1);
  rl.setOnLongClickListener(new View.OnLongClickListener() {    
        @Override
        public boolean onLongClick(View v) {
            Toast.makeText(getBaseContext(), "Long Clicked", Toast.LENGTH_SHORT).show();
            return false; // do false here
        }
    }); 
```

**编辑 ：**

```
Intent loginIntent = new Intent(ypurActivity.this, Login.class); 
```

# postgresql - PostgreSQL，在不使用辅助键的情况下查询两个（或更多）表

> ID：14293380
> 
> 赞同：0
> 
> 时间：2013-01-12T12:37:23.317
> 
> 标签：postgresql

我有这样的情况：

> 表 1：pk1 整数、pk2 整数、字符串1、字符串 2、字符串 3 表
> 2：pk3 整数、字符串 4、字符串 5、字符串 6

其中第一个表中的 pk2 int 与第二个表中的 pk3（索引）相同。创建表时，我没有使用辅助键，现在如果可能，我必须在单个查询中查询这两个表。到目前为止，我用两个查询来做到这一点：

```
SELECT pk1, pk2, string1, string2, string3 
FROM table1 
WHERE string1 ILIKE 'a%' 
```

然后，遍历结果：

```
SELECT pk3, string4, string5, string6 
from table2 WHERE pk3=" & Cint(reader.GetValue(1)) 
```

注意：reader.GetValue(1) = pk2 来自第一个表）

最后，我得到了所需的本地结果，例如：

```
1、string1、string2、string3、string4、string5、string6

```

我在第二个查询中使用 ANY 或 IN 进行了一些简化，但我相信像 PostgreSQL 这样的强大数据系统可以在单个查询中完成此操作。

该查询在显示的示例中应如何显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:56:42.580

```
SELECT t1.pk1, 
       t1.pk2, 
       t1.string1, 
       t1.string2, 
       t1.string3, 
       t2.string4, 
       t2.string5, 
       t2.string6
FROM table1 t1
  join table2 t2 on t1.pk2 = t2.pk3
WHERE t1.string1 ILIKE 'a%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T12:59:47.050

使用[join](http://www.postgresql.org/docs/8.3/static/tutorial-join.html)子句组合两个表并得到结果。

# iphone - 估计电池充满电的剩余时间

> ID：14293381
> 
> 赞同：-2
> 
> 时间：2013-01-12T12:37:29.313
> 
> 标签：iphone, ipad

> **可能重复：**
> [充电完成剩余时间，iOS](https://stackoverflow.com/questions/13899308/time-remaining-until-charge-is-complete-ios)

我正在使用下面的代码来获取电池电量

```
UIDevice *myDevice = [UIDevice currentDevice];
[myDevice setBatteryMonitoringEnabled:YES];
float batLeft = [myDevice batteryLevel];
int i=[myDevice batteryState];

batinfo=(batLeft*100); 
```

但我无法弄清楚，如何计算/估计充满电的剩余时间，即当电池电量 = 100% 时。

我正在尝试获得诸如剩余电量= **01:30:10之类的东西**

建议总是受到赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:56:39.100

Apple 网站上的电池规格示例，您可能需要记录所有设备和使用条件以查看哪个是哪个：

*   通话时间：3G 长达 8 小时，2G (GSM) 长达 14 小时

*   待机时间：长达200小时

*   互联网使用：3G 最长 6 小时，Wi-Fi 最长 9 小时

*   视频播放：长达 10 小时

*   音频播放：长达 40 小时

获取剩余电池百分比的代码是：

```
[[UIDevice currentDevice] setBatteryMonitoringEnabled:YES];
float batteryLevel = [myDevice batteryLevel]; 
```

这就是你所能做的，所以应用程序使用的其他任何东西都是你一半的猜测和计算。

[学分](https://stackoverflow.com/a/10816886/1260708)- 从这里复制，必须这样做，因为你说它“不是我需要的”，即使它是确切的答案。

因此，要得出**无法**使用本机 API 的结论，您必须设置条件以查找设备的型号，并使用苹果网站上的规格进行计算。

# xcode - ViewController 无法与助手编辑器一起使用

> ID：14293383
> 
> 赞同：0
> 
> 时间：2013-01-12T12:38:22.707
> 
> 标签：xcode, uiviewcontroller, assistant

我最近复制了我的项目，虽然它可以正确编译和运行（所有出口功能），但我注意到数据类型没有在我的两个 .H 文件中的 @property 上突出显示。

在摆弄之后，我注意到该视图似乎没有与之关联的 .H 文件，因此当我使用助手模式时，“自动”选项无法正常工作，它显示“没有助手规则”。

“身份检查器”中的类已正确链接到 .H 文件，但在查看故事板的 XML 后，我注意到了这一点：

```
<viewController title="First" id="2" customClass="FirstViewController" sceneMemberID="viewController"> 
```

与具有此 XML 的正常工作的视图控制器相比

```
<viewController title="buttonView" id="YcW-az-POT" customClass="buttonViewController" sceneMemberID="viewController"> 
```

我的印象是 ID 字段似乎引起了问题，是否有其他人遇到过这种情况，或者他们知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:43:13.607

非常奇怪的是，我将我的更改提交到我的存储库并在另一台设备上抓取它们，然后返回到原始设备并拉取在第二台设备上所做的更改，问题就消失了。

经过进一步调查，我最初怀疑该 ID 与该对象的关联不正确。如果你得到这个，我建议添加一个新视图并将你的内容重新链接到类实现，它应该可以解决问题。

# jboss - 4 和 5 版本中的 JBOSS 集群设置

> ID：14293388
> 
> 赞同：1
> 
> 时间：2013-01-12T12:38:59.987
> 
> 标签：jboss

谁能告诉我在 Jboss 服务器 4 和 5 中创建集群需要遵循的所有步骤或所需配置是什么？

谢谢你，阿马尔 Neeluri

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:50:02.170

请查看[集群](http://docs.jboss.org/jbossas/docs/Clustering_Guide/4/html/index.html)的 jboss 文档站点，提供每个组件的详细步骤。

# php - 为什么 Symfony 2 中有两个 Cookie 类？

> ID：14293392
> 
> 赞同：2
> 
> 时间：2013-01-12T12:39:27.323
> 
> 标签：php, symfony

为什么 Symfony 中有两个不同但又极其相似的类来表示浏览器 Cookie？

`Symfony\Component\HttpFoundation\Cookie`和`Symfony\Component\BrowserKit\Cookie`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T12:53:23.980

首先你需要了解什么是 Symfony 组件。

> Symfony 组件实现了开发网站所需的通用功能。它们是 Symfony 全栈框架的基础，但**即使您不使用该框架，它们也可以独立使用，因为它们没有任何强制依赖**项。

它们没有任何外部依赖项，这意味着任何依赖项都将与组件捆绑在一起。

`HttpFoundation\Cookie`是`HttpFoundation`组件使用的 Cookie 类。并且`BrowserKit\Cookie`是`BrowserKit`组件使用的类。它们是每个组件的小型捆绑依赖项。您应该使用组件，而不是其中的单个类。

这两个组件的目的是

*   **BrowserKit** 模拟网络浏览器的行为。
*   **HttpFoundation** 为 HTTP 规范定义一个面向对象的层。

根据您的方案确定要使用的组件。

# qt - 我如何在 Ubuntu 12.04 中针对 Qt5 构建 Qt-Creator？

> ID：14293393
> 
> 赞同：0
> 
> 时间：2013-01-12T12:39:30.053
> 
> 标签：qt

我在使用“软件中心”构建的 ubuntu 上安装了现有的 Qt4。之后，我使用默认设置从 git 安装了 Qt5。现在，意识到我拥有的 Qt Creator 版本是为 Qt 4.8.1 配置的，我卸载了它（使用软件中心），现在我正在寻找一些指导来重新构建它并链接到 Qt5。从他们的博客中，我注意到最新版本应该是 Qt5 安装的一部分，但我无法从 ubuntu 中的 HUD 启动它，也不知道有任何命令行选项可以从终端启动它。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:40:53.353

讨厌只是抛出一个链接，但是这个家伙很好地解释了......对于多个操作系统。

[http://qt-project.org/wiki/Building_Qt_5_from_Git](http://qt-project.org/wiki/Building_Qt_5_from_Git)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:12:49.337

您可以参考[Qt wiki](http://qt-project.org/wiki/Building_Qt_5_from_Git)。

构建示例过程：

> ./configure -developer-build -opensource -nomake 示例 -nomake 测试
> 
> 。/制作
> 
> ./make 安装

您的构建目标可能是 ARM 或其他平台，然后您可以使用`./configure --help`查看更多配置帮助。

# python - Python 对象生命周期追踪

> ID：14293398
> 
> 赞同：2
> 
> 时间：2013-01-12T12:40:27.687
> 
> 标签：python, trace

有没有办法在python代码运行期间跟踪对象的生命周期？我知道用于设置回调的 sys.settrace 函数，我可以在每个函数调用或代码行上停止，但是在此期间如何访问“活动”对象？我想跟踪程序，以便在每次停止后进行随机检查，就好像我真的在源代码的停止位置添加了代码一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-14T16:51:26.450

CPython 中的 gc（垃圾收集器）模块可以在某种程度上完成。

[垃圾收集器](http://docs.python.org/3.3/library/gc.html) 使用对象作为参数的函数很少，可以提供有关对象存在的一些信息：

```
gc.get_referrers(*objs)
gc.get_referents(*objs)
gc.is_tracked(obj) 
```

要简单地检查对象是否存在，请使用[此处所述的“尝试”](https://stackoverflow.com/questions/6383379/python-check-if-object-exists-in-scope)

# wpf - 使用 WPF / 实体框架跨多个窗口进行数据绑定？是否传递上下文？

> ID：14293399
> 
> 赞同：6
> 
> 时间：2013-01-12T12:40:29.850
> 
> 标签：wpf, entity-framework, data-binding, entity-framework-4

大多数 WPF/EF 教程仅在一个窗口中介绍数据绑定。然而，实际上数据会显示在许多窗口中。您经常在第一个窗口中显示一条记录，并在下一个窗口中深入挖掘相关细节。

因此，在我的场景中也是如此。在这里你可以看到我的数据结构和用户界面。实际上我不是在处理客户和发票，但结构是相同的。（我的具体问题在最后。）

![db设计和ui模型](../Images/124f0884f269ed7aed6ea112e487ad9e.png)

在 InvoicesWindow 中，我可以选择发票并按“显示发票”。这将打开一个显示客户详细信息和他的发票的 CustomerWindow。正确的发票是预先选择的。对于 CustomerWindow 中显示的每个发票，我可以添加项目或编辑它们。这是在一个名为“ItemWindow”的单独窗口中完成的。编辑 DataGrids 不是一种选择。它们设置为只读。

这是 wpf-window 类的代码（我只完成了显示数据，没有保存）：

**发票窗口：**

```
public partial class InvoicesWindow : Window 
{ 
    private MyEntities context = new MyEntities();

    public InvoicesWindow () 
    { 
        InitializeComponent(); 
    }

    private void Window_Loaded(object sender, RoutedEventArgs e) 
    { 
        CollectionViewSource invoicesViewSource = (CollectionViewSource)FindResource("invoicesViewSource");
        invoicesViewSource.Source = context.Invoices;
    }

    private void ShowInvoice_Click(object sender, RoutedEventArgs e) 
    { 
        Invoice selectedInvoice = (Invoice)InvoicesDataGrid.SelectedItem; 
        var customerWindow = new CustomerWindow(selectedInvoice);
        customerWindow.ShowDialog();
    }
} 
```

**客户窗口：**

```
public partial class CustomerWindow : Window 
{ 
    private MyEntities context = new MyEntities();
    private Invoice selectedInvoice;

    public CustomerWindow() 
    { 
        InitializeComponent(); 
    }

    public CustomerWindow (Invoice selectedInvoice) 
    { 
        InitializeComponent(); 
        this.selectedInvoice = selectedInvoice;
    }

    private void Window_Loaded(object sender, RoutedEventArgs e) 
    { 
        //Set the data 
        CollectionViewSource customerViewSource = (CollectionViewSource)FindResource("customerViewSource ");
        customerViewSource.Source = context.Customers.Where(p => p.id == selectedInvoice.Customer.id);

        //Select the right invoice
        CollectionViewSource customerInvoicesViewSource = (CollectionViewSource)FindResource("customerInvoicesViewSource ");
        customerInvoicesViewSource.Items.MoveCurrentTo(((ObjectSet<Invoice>)customerInvoicesViewSource.Source).Where(p => p.id == selectedInvoice.id).SingleOrDefault());
    }

    private void EditItem_Click(object sender, RoutedEventArgs e) 
    { 
        Item selectedItem = (Item)ItemsDataGrid.SelectedItem; 
        var itemWindow = new ItemWindow((IQueryable<Customer>)(customerViewSource.Source),selectedInvoice,selectedItem);
        itemWindow.ShowDialog();
    }
} 
```

**物品窗口：**

```
public partial class ItemWindow : Window 
{ 

    private Invoice _selectedInvoice;
    private Invoice _selectedItem;
    private IQueryable<Customer> _customers;

    public ItemWindo() 
    { 
        InitializeComponent(); 
    }

    public ItemWindow(IQueryable<Customer> customers, Invoice selectedInvoice, Item selectedItem) 
    { 
        InitializeComponent(); 
        this._customers = customers;
        this._selectedInvoice = selectedInvoice;
        this._selectedItem = selectedItem;
    }

    private void Window_Loaded(object sender, RoutedEventArgs e) 
    { 
        //Set the data 
        CollectionViewSource customerViewSource = (CollectionViewSource)FindResource("customerViewSource");
        invoicesViewSource.Source = _customers;

        //Select the right invoice
        CollectionViewSource customerInvoicesViewSource = (CollectionViewSource)FindResource("customerInvoicesViewSource ");
        customerInvoicesViewSource.Items.MoveCurrentTo(_selectedInvoice);

        //Select the right item
        CollectionViewSource customerInvoicesItemsViewSource = (CollectionViewSource)FindResource("customerInvoicesItems");
        customerInvoicesItems.Items.MoveCurrentTo(_selectedItem);
    }

} 
```

我把代码写出来了。因此，可能缺少一些演员表并且某些方法拼写错误。我希望我用“ObjectSet”得到正确的类型，它也可以是“ObjectCollection”或类似的东西。

XAML 是在 VS2010 的帮助下广泛创建的，如下视频所示：http: [//msdn.microsoft.com/de-de/data/ff806174.aspx](http://msdn.microsoft.com/de-de/data/ff806174.aspx)

**所以，最后我的问题;）**

*   我应用的装订设计是否正确？
    *   在 CustomerWindow 中，我创建了一个新上下文。
    *   在 CustomerWindow 和 ItemWindow 之间，我只是传递相同上下文的数据并手动选择当前项目。
    *   在CustomerWindow 中，我使用一个ObjectSet（或ObjectCollection，我不再确定类型），其中一个条目作为customersCollectionViewSource 的Source。这工作正常。但是，不需要集合，因为我只编辑一个客户。我没有设法将单个客户设置为来源。我不知道如何调整 VS2010 生成的视图源。
*   我还没有保存。但我认为由于我在 CustomerWindow 和 ItemWindow 之间的设计，我会遇到问题。也许你可以在这里给我一些建议。
    *   当 ItemWindow 中的“应用”按钮被按下时，应在 DB 中更新项目数据。但不是下面 CustomerWindow 中与客户和发票相关的数据。
    *   关闭 ItemWindow 时，应更新 CustomerWindow 中项目的 DataGrid。但不是 CustomerWindow 中的其余字段，因为这里可能在打开 ItemWindow 之前已更改数据。
    *   我克服“同步问题”的唯一解决方案：如果有任何更改，用户必须先在 CustomerWindow 中按“应用”，然后才能按“新项目”或“编辑项目”。（有点像使用两台显示器时 Windows 7 的“窗口分辨率控制”）但这对用户来说不太友好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:33:43.863

更简洁的设计是使用 MVVM 设计模式。

将视图模型注入到窗口的上下文中，并将视图模型绑定到实体集合或单个实体，在 xaml 中绑定到视图模型中的属性，并使用视图模型中实现的命令来执行操作，例如添加新的， 删除。

窗口不应该知道上下文。

如果您有一个列表视图模型 + 窗口和一个详细信息窗口（最好带有视图模型），那么列表视图模型应该将所选项目作为上下文传递给详细信息视图模型（或窗口）。

如果窗口不是同时打开或没有相关对象，那么它们的视图模型不应共享数据库上下文，否则，为了使更改在窗口之间容易反映，它们将不得不共享数据库语境。

# php - 如何使用低级套接字函数 socket_write/socket_read 在 PHP 中处理 ssl 请求？

> ID：14293404
> 
> 赞同：1
> 
> 时间：2013-01-12T12:41:01.020
> 
> 标签：php, sockets

我需要通过 ssl https 连接发送请求和接收响应。一项要求是仅使用低级套接字函数（**NOT STREAM ），例如**[http://php.net/manual/en/ref.sockets.php](http://php.net/manual/en/ref.sockets.php)上列出的 socket_write/socket_read、socket_send/socket_recv

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:21:27.053

您可以`stream_socket_enable_crypto()`在连接的套接字上使用该方法。要在套接字上启用 ssl，有 4 个可能的选项，具体取决于环境和版本。你可以尝试每一个，除非一个可以工作。图片这个例子：

```
function enableCrypto($socket)
{
    $modes = array(
        STREAM_CRYPTO_METHOD_TLS_CLIENT,
        STREAM_CRYPTO_METHOD_SSLv3_CLIENT,
        STREAM_CRYPTO_METHOD_SSLv23_CLIENT,
        STREAM_CRYPTO_METHOD_SSLv2_CLIENT
   );

   foreach ($modes as $mode) {
        if (stream_socket_enable_crypto($socket, true, $mode)) {
            return;
        }
   }

   throw new Exception('failed to enable crypto');
} 
```

顺便说一句，该示例取自 PEAR 存储库中的 HTTP_Request2 包。上面的函数与 HTTP_Request2_SocketWrapper::enableCrypto() 几乎相同。您可以通过查看 HTTP_Request2 的源代码找到更多信息。

# android - 将位图保存在自定义路径和自定义名称

> ID：14293405
> 
> 赞同：0
> 
> 时间：2013-01-12T12:41:08.320
> 
> 标签：android, bitmap, save, image-capture

我的程序捕获图像（作为位图），但我不知道（也找不到）如何在自定义路径中使用自定义名称保存它......这是我的图像捕获代码。我可以做吗？或者有什么办法将它保存为另一种数据类型，而不是位图？一些帮助会很棒。谢谢。

```
public class ShowMessagesPage extends Activity {
final static int CAMERA_RESULT = 0;
DBAdapter db = new DBAdapter(this);
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_show_messages_page);

    Button userButton = (Button)findViewById(R.id.button1);
    userButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
        error();
        }});

    Button buttonPhoto = (Button)findViewById(R.id.buttonPhoto);
    buttonPhoto.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(i, CAMERA_RESULT);
        }});}

protected void onActivityResult(int requestCode, int resultCode,
          Intent intent) {
        super.onActivityResult(requestCode, resultCode, intent);

        if (resultCode == RESULT_OK) {
          Bundle extras = intent.getExtras();
          Bitmap bmp = (Bitmap) extras.get("data");

        }
      }

and the other codes.......... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:49:50.803

尝试这个：

```
Intent getCameraImage = new Intent("android.media.action.IMAGE_CAPTURE");

File cameraFolder;

if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
    cameraFolder = new File(android.os.Environment.getExternalStorageDirectory(),"folder_name_of_your_choice");
else
    cameraFolder= ShowMessagesPage.this.getCacheDir();
if(!cameraFolder.exists())
    cameraFolder.mkdirs();

File photo = new File(Environment.getExternalStorageDirectory(), "folder_name_of_your_choice/camera_snap.jpg");
getCameraImage.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
initialURI = Uri.fromFile(photo);

startActivityForResult(getCameraImage, CAMERA_RESULT); 
```

并在 onActivityResult() 中，处理`Uri initialURI`以获取已保存到您在上面发布的代码中选择的路径的图像。图像文件的名称为：**camera_snap.jpg**

*注意：`Uri initialURI`是全局声明的。*

# c - 将C中的数组大小加倍？

> ID：14293407
> 
> 赞同：3
> 
> 时间：2013-01-12T12:41:17.817
> 
> 标签：c, arrays, algorithm

所以我有一段C代码：

```
void main (void){

int i,n,r,*pt1;
printf("Enter array size:\n");
scanf("%d",&n);
srand(time(NULL));
char niz[n];
pt1=niz;
for (i=0;i<n;i++){
    r=rand() % (15);
    printf("%d\n",r);
    if (r==0)
        break;
   niz[i]=r;
    if (i==n){
        pt1=(char*)realloc(niz,(sizeof(n)*2));
        if (pt1==NULL)
        printf("Jbg");
    }

}

free(pt1);
return 0; 
```

}

现在这里的重点是当计数器在循环中到达末尾时，将数组大小加倍。pt1 的代码可以吗？另外，我在 printf 的末尾遇到了分段错误，我不知道为什么。提前致谢！！:)

编辑：感谢大家的回答，这是我修改后的功能代码：

```
void dupla(int n){ 

int i,r;
srand(time(NULL));
char * niz=malloc(n);
for (i=0;i<n;i++){
    r=rand() % (15);
    printf("%d\n",r);
        if (r==0)
            break;
niz[i]=r;
        if (i==n){
            niz=(char*)realloc(niz,n*2);
        }
}
if (niz==NULL)
            printf("Jbg");
        else
            printf("It works\n");
            printf("%d",sizeof(niz));
free(niz);
}

void main (void){

int n;
printf("Enter array size:\n");
scanf("%d",&n);
dupla(n);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T12:44:42.497

您只能在通过调用//`realloc`获得的指针上使用。你的代码没有这样做，所以它被破坏了。`malloc``calloc``realloc`

大概应该是这样的：

```
char * niz = malloc(n);

// ...

char * tmp = realloc(niz, n * 2);

if (tmp) { niz = tmp; }
else     { /* flagrant error */ }

// ...

free(niz); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T12:45:17.950

`realloc`说它的第一个参数

> 指向先前使用 malloc、calloc 或 realloc 分配的内存块的指针，或空指针（用于分配新块）。

`niz`位于堆栈上，因此您将有未定义的行为。您应该最初分配`niz`使用。`malloc`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T12:43:47.840

您不能重新分配在堆栈中分配的数组。您应该从在堆中分配它开始。此外，您的初始数组 is`char[]`和 pt1 is `int*`，这使得您的意图有点不清楚。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T12:53:23.177

```
char* pt1 = malloc(n);
for (i=0; i < n + 1; i++) { // 1 more than the elements for the if.
    r = rand() % (15);
    printf("%d\n",r);
    if (r == 0)
        break;
    pt1[i] = r;
    if (i == n) { // Past end of array.
        n *= 2;
        --i; // So in the next loop i == old n.
        pt1 = (char*)realloc(pt1, n)); // n * sizeof(char)
        if (pt1 == NULL) {
            printf("Jbg");
            break;
        }
    }
}
free(pt1); 
```

# android - AsyncTask doInBackground 不会完成/挂起

> ID：14293411
> 
> 赞同：1
> 
> 时间：2013-01-12T12:41:51.663
> 
> 标签：android, android-asynctask

`lib.roomAvailable()`当我在 doInBackground 方法中调用时，我有一个 AsyncTask 无法完成。当 QueueTask 被调用时，progressDialog 将显示并坚持下去。它应该在 5 秒后消失。

如果我`lib.roomAvailable()`从 doInBackground 方法中删除，一切都会按预期工作。为什么我打电话时会出现这种奇怪的行为`lib.roomAvailable()`？

`roomAvailable()`调用另一个 AsyncTask 这可能是一个问题吗？

```
 public class QueueTask extends AsyncTask<Void, Void, Void> {

    private ProgressDialog progressDialog;
    private Library lib;
    private String date;
    private int room;
    private int time;
    private String user;
    private String id;

    public QueueTask(String date, int room, int time, String user, String id) {
        this.date = date;
        this.room = room;
        this.time = time;
        this.user = user;
        this.id = id;
    }

    @Override
    protected void onPreExecute() {
        lib = new Library();
        progressDialog = ProgressDialog.show(ManageRoomActivity.this, "Queuing", "Queuing process", true);
    }

    @Override
    protected Void doInBackground(Void... params) {

            int timer = 5;
            while(timer > 0) {
                if(lib.roomAvailable(date, room, time)) {
                                Log.w("RoomAvailable", "Room Available");
                            }
                android.os.SystemClock.sleep(1000);
                timer --;
                Log.w("TIMER", "" + timer);
            }
            progressDialog.dismiss();
                return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        progressDialog.dismiss();
        Intent intent = new Intent(ManageRoomActivity.this, DatePickerActivity.class);
        ManageRoomActivity.this.startActivity(intent);
    }
} 
```

编辑1：

```
public boolean roomAvailable(String date, int room, int time) {
          boolean available = false;

          String timeString = "";
          if(time < 10)
              timeString = "0";
          timeString = timeString + time;

          String roomNum = "";
          if(room < 10) 
              roomNum = "0";  

          roomNum = roomNum + room;
          AsyncTask<String, Void, String> readSource = new URL_Source();
          String source = "";
        try {
            String uri = getURI(date);
            source = readSource.execute(getURI(date)).get();
            String[] chunks =  source.split("<td");
              for(String chunk:chunks) {
                  if(chunk.contains(date) & chunk.contains("=Grp" + roomNum) & chunk.contains("stid=" + timeString))
                      available = true;
              }
              return available;
        } catch (InterruptedException e) {
            e.printStackTrace();
        } catch (ExecutionException e) {
            e.printStackTrace();
        }
        return available;
      } 
```

另一个异步任务：

```
public final class URL_Source extends AsyncTask<String, Void, String> {

public URL_Source() {

}

protected String doInBackground(String... uri) {
    try {
        URL url = new URL(uri[0]);
        InputStream in = url.openStream();
        StringBuilder source = new StringBuilder();
        BufferedReader reader = new BufferedReader(new InputStreamReader(in));

        String line;
        while((line = reader.readLine()) != null) {
            source.append(line);
        }
        in.close();
        return source.toString();

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return "ERROR";
} 
```

}

解决方案：

我不知道 AsyncTask 是如何工作的。您不能在 AsyncTask 中调用 AsynchTask！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T19:09:48.527

您正在尝试从 UI 线程以外的线程创建和启动 AsyncTask。不支持：

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

请参阅标题为“线程规则”的部分

# symfony - 消息：您请求了一个不存在的服务“http”

> ID：14293413
> 
> 赞同：2
> 
> 时间：2013-01-12T12:42:01.263
> 
> 标签：symfony, render, twig

我在树枝中的渲染标签有问题。

我收到一条消息：`"You have requested a non-existent service "http"`。当我使用`{% render url("render_menu") %}`

`render_menu`路线工作正常

帮我 ！

P/S: 对不起我的英语

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T01:28:31.083

您使用正确的方法，但使用的是旧版本。您应该升级以修复安全问题并解决您的问题。

一个安全问题改变了使用方式`render`：[http ://symfony.com/blog/security-release-symfony-2-0-20-and-2-1-5-released](http://symfony.com/blog/security-release-symfony-2-0-20-and-2-1-5-released)

文档已更新： [http ://symfony.com/doc/2.0/book/http_cache.html#using-edge-side-includes](http://symfony.com/doc/2.0/book/http_cache.html#using-edge-side-includes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T23:04:16.333

您使用的`render`标签错误。如果你想渲染动作，那在你的后面`render_menu`- 你应该以 format 传递它`YourBundle:YourController:YourAction`。

例如，如果你`menuAction()`在 route 后面有那个`render_menu`，那么在 Twig 中你应该这样称呼它：

```
{% render "YourBundle:YourController:menu" %} 
```

请注意，在调用标签时必须去掉单词`Action`。`menuAction``render`

# jquery - 是否可以在 jquery 中实现多个？

> ID：14293419
> 
> 赞同：0
> 
> 时间：2013-01-12T12:42:51.937
> 
> 标签：jquery, checkbox

我有多个问题`CheckBoxes`

**标记**

```
<p>
  <label>Display 1</label>
  <input class="show-options" id="one" name="name" type="checkbox" value="1" />
</p>

<p>
  <label>Display 2</label>
  <input class="show-options" id="second" name="name" type="checkbox" value="2" />
</p>

<div class="show-options-panel" style="display: none;">
  <p>Checkbox 1</p>
</div>

<div class="show-options-panel" style="display: none;">
  <p>Checkbox 2</p>
</div> 
```

**JS**

```
jQuery(document).ready(function($){

  $('.show-options').live('change', function(){
      if( $(this).is(':checked') ) {
        $(this).parent().parent().find('.show-options-panel').show('medium');
      } else {
        $(this).parent().parent().find('.show-options-panel').hide('medium');
      }
 });

}); 
```

`CheckBoxes`是否可以使用该标记创建倍数？这是示例[http://jsfiddle.net/satryabima/CupF3/1/](http://jsfiddle.net/satryabima/CupF3/1/)

**更新**

这是我朋友[http://jsfiddle.net/neosheet/9y44X/的解决方案](http://jsfiddle.net/neosheet/9y44X/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:50:02.860

您刚刚为您的显示面板提供了相同的类，因此当一个复选框激活您的*.show-options-panel*时，另一个复选框将不会再次显示相同的面板，因为它当然已经在错误的文本中可见。而且您的复选框具有相同的ID，这并不酷。

要了解单击的内容，您应该像这样编辑代码：

**HTML**

```
<p>
  <label>Display 1</label>
  <input class="show-options" id="first" name="name" type="checkbox" value="1" />
</p>

<p>
  <label>Display 2</label>
  <input class="show-options" id="second" name="name" type="checkbox" value="2" />
</p> 
```

**JS**

```
$(function() {
    $('.show-options').on('change', function(){
        if( $(this).is(':checked') ) {
            console.log($(this).attr("id") + " checked");
        } 
        else {
            console.log($(this).attr("id") + " unchecked");
        }
    });
}); 
```

如果您在浏览器中打开 Javascript 控制台窗口，您会看到发生了什么。另一种选择是使用两个具有不同文本和不同 id 的显示面板，然后根据 id 或复选框的某些其他确定性属性（如值或数据属性）显示和隐藏它们。

干杯。

# jquery - 在输入中插入特殊字符

> ID：14293420
> 
> 赞同：0
> 
> 时间：2013-01-12T12:43:02.630
> 
> 标签：jquery

我有一个非常简单的问题。我需要插入这两个字符（在输入的 val 中，但它只逃避我 \ 和可视化（。我想 \ 是一个特殊字符，但我需要它。

例子

```
 $('input#area').val("Try type \( \int_{-N}^{N} e^x \, dx \) ."); 
```

必须可视化输入中的所有 \。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:46:57.887

如果你想要一个文字`\`，你需要写`\\`.

# neo4j - 如何使用密码查询从索引中获取一组随机记录

> ID：14293424
> 
> 赞同：1
> 
> 时间：2013-01-12T12:43:21.383
> 
> 标签：neo4j, cypher

使用密码从特定 node_auto_index 获取随机记录的语法是什么？

我想有这个例子

```
START x=node:node_auto_index("uname:*")  RETURN x SKIP somerandomNumber LIMIT 10; 
```

有没有更好的方法不会返回一个连续的集合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:50:36.920

Neo4j 中没有类似于 SQL 的 Random() 的功能。

在使用 cypher 之前，您必须在该部分中声明随机数`SKIP random`（如果您不直接从控制台查询并且您使用 Neo4j 的任何高级语言） - 这将连续给出随机部分的节点，或者您必须检索所有节点，而不是在这些节点上用您的高级语言随机生成 - 这将为您提供一组随机的 ndo。

或者，要在 cypher 中创建一个伪随机函数，我们可以尝试这样的事情：

```
START x=node:node_auto_index("uname:*")
WITH x, length(x.uname) as len
WHERE Id(x)+len % 3 = 0
RETURN x LIMIT 10 
```

或根据 uname 节点的总数或 uname 参数的普通 ascii 值在此查询中制作复杂的 WHERE 部分，例如

# android - Android中获取网络IP地址

> ID：14293426
> 
> 赞同：0
> 
> 时间：2013-01-12T12:43:22.227
> 
> 标签：android, networking, ip

我有一个侦听连接的服务，我希望它只在特定网络上侦听。我可以像这样获取设备的 IP 地址：

```
 private void printNetworkInterfaces()
    {
        try
        {
            Enumeration<NetworkInterface> nis = NetworkInterface.getNetworkInterfaces();
            for (NetworkInterface ni : Collections.list(nis))
            {
                Enumeration<InetAddress> iis = ni.getInetAddresses();

                for (InetAddress ia : Collections.list(iis))
                {
                    // We only want IPv4 addresses
                    if (!isIPv4(ia.getHostAddress()))
                        continue;
                    // Do tomething with ia.getHostAddress();

                }
            }    
        }
        catch (SocketException e)
        {
            Log.w(TAG,e);
        }
    } 
```

但不是设备的 IP，我希望网络的 IP 在该网络上侦听。例如，如果 IP 是 192.168.1.1，那么网络 IP 应该是 192.168.1.0。

我可以直接用 0 替换第 4 个值，但这对于其他网络会失败。

有什么方法可以获取与 InetAddress.getHostAddress() 返回的 IP 地址关联的网络地址；?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:46:42.713

从网络掩码和 ip 你可以计算网络 ip。

```
wifii= (WifiManager) getSystemService(Context.WIFI_SERVICE);
 d=wifii.getDhcpInfo();
 s_dns1="DNS 1: "+String.valueOf(d.dns1);
 s_dns2="DNS 2: "+String.valueOf(d.dns2);    
 s_gateway="Default Gateway: "+String.valueOf(d.gateway);    
 s_ipAddress="IP Address: "+String.valueOf(d.ipAddress); 
 s_leaseDuration="Lease Time: "+String.valueOf(d.leaseDuration);     
 s_netmask="Subnet Mask: "+String.valueOf(d.netmask);    
 s_serverAddress="Server IP: "+String.valueOf(d.serverAddress); 
```

# mysql - mysql存储过程更新所有行而不是1

> ID：14293427
> 
> 赞同：0
> 
> 时间：2013-01-12T12:43:29.190
> 
> 标签：mysql, sql, stored-procedures

这是**MySQL**过程：

```
 CREATE DEFINER = `root`@`%` PROCEDURE `NewProc`(IN comp_id VARCHAR(40))
    BEGIN
    ...
    UPDATE tbl_complaint SET DIDM_Docket_No = '2013-12-12' WHERE Comp_ID = comp_id;
    END; 
```

这是我调用程序时的样子：

```
 call gen_docketno('{74651651-9D76-C973-175A-97B9B78608A5}') 
```

是不是因为参数**的括号和破折号**导致程序无法正确更新？因为当我在 sql 查询中运行它时它可以工作，但在存储过程中却不行。

```
 UPDATE tbl_complaint SET DIDM_Docket_No = '2013-12-12' WHERE Comp_ID = '{BF16E293-6CD2-8BC3-91B1-CF5AC70A090B}'; 
```

有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T12:46:23.047

重命名你的参数`comp_id`。它与您的列名冲突，导致它更新所有记录，

```
CREATE  PROCEDURE `NewProc`(IN _comp_id VARCHAR(40))
BEGIN
...
     UPDATE tbl_complaint 
     SET DIDM_Docket_No = '2013-12-12' 
     WHERE Comp_ID = _comp_id;
END; 
```

# jquery - 淘汰赛发电机

> ID：14293434
> 
> 赞同：0
> 
> 时间：2013-01-12T12:44:00.503
> 
> 标签：jquery, knockout.js, dynatree

我需要能够使用 Knockout 和 jquery 检测 TreeView 节点拖放更改。这是一个很好的例子，但它只初始化树。 [http://jsfiddle.net/jearles/EZgNs/](http://jsfiddle.net/jearles/EZgNs/) 谢谢。

```
ko.bindingHandlers.dynatree = {
    update: function(element, valueAccessor, allBindingsAccessor, viewModel) {
        setTimeout( function() { $(element).dynatree()}, 0);
    }
}; 
```

阿什拉夫

# python - 我应该使用哪种技术来开发这款鱼眼透视游戏？

> ID：14293438
> 
> 赞同：0
> 
> 时间：2013-01-12T12:44:12.340
> 
> 标签：python, pyopengl, panda3d, quake

我打算开发一款 3D 游戏，玩家以 3D 第一人称视角走在迷宫中，收集东西并逃离怪物。游戏本身很简单，但由于它不是为了娱乐，而是为了生物实验，所以它有一些具体的特点：

1.  我们将图形投影到3台投影仪的球形屏幕上，所以图形应该是**鱼眼**变换，并且可以**很容易地进一步变形**（处理投影仪之间的合并）。

2.  应该有**记录数据**的功能，比如玩家的路径，怪物出现的时间点等。所有的事件都应该是可记录的。

3.  游戏程序可以通过 USB**与外部设备进行交互。**例如，每当玩家按下某个键时，程序都会告诉 Arduino 板做某事。

在我的调查中，我找到了三个候选工具链来开发这样的游戏：

1.  **在 Quake3 引擎**+ [Fisheye Quake](http://strlen.com/gfxengine/fisheyequake/)上开发一个 MOD 。我认为的问题是 Quake3 在虚拟机上运行，​​那么是否可以实现上面的功能 2 和 3？

2.  **Panda3D** + [FisheyeLens API](https://www.panda3d.org/apiref.php?page=FisheyeLens)

3.  **PyOpenGL**。这是最灵活的方式，但我认为工作量最大。

我对 C/C++/Python 很熟悉，但这是我第一次开发 3D 游戏。我的问题是哪个工具链最适合这个项目（或任何其他好的选择）？我会遇到什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:02:48.687

由于还没有答案，让我在这里给出我自己的想法。我没有 3D 开发经验，不知道这些技术是否可行。出于某些方面的原因，我更喜欢 Panda3D。

**请注意，我仍然愿意接受其他答案。**

* * *

**为什么选择 Panda3D？**

1.  它有[据可查](http://www.panda3d.org/documentation.php)。这始终是选择技术的重要因素。
2.  它是用 Python 编写的，这对我来说是一个加分项。
3.  它是通用的（比 Quake3）。Panda3D 也可以用于[机器人模拟器](https://stackoverflow.com/questions/8513998/panda3d-robotics)等，这对我很有用。

**为什么不是 Quake3？**

1.  它在虚拟机 (QVM) 上运行。恐怕很难记录数据或访问外部设备。
2.  起初我想到 Quake3，因为它至少是一个非常经典的代码来阅读，但现在我意识到 Quake3 除了类似 FPS 的游戏之外什么都做不了。如果它值得一读，只需阅读它，但不必使用它。
3.  转换图形的渲染并不是那么灵活。它是一个有目的的游戏引擎，而不是一个通用的图形处理库。

**为什么不是 OpenGL？**

目前我认为 Panda3D 已经够低了。如果证明它不如我需要的灵活，那么我会转向 OpenGL。

# c# - Windows Phone - 如何处理导航错误

> ID：14293444
> 
> 赞同：0
> 
> 时间：2013-01-12T12:44:55.287
> 
> 标签：c#, windows-phone-7, windows-phone, windows-phone-8

如果导航错误发生在 OnNavigatedTo 方法中，我应该如何处理它们。例如，查询字符串参数在解析为整数时未传递或引发异常。

```
 protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        string itemIdParam;

        if (NavigationContext.QueryString.TryGetValue("itemId", out itemIdParam))
        {
            int itemId = int.Parse(NavigationContext.QueryString["itemId"]);

            _item = App.MainViewModel.Items.Where(i => i.ItemId == itemId).First();

            DataContext = _item;
        }
    } 
```

我应该抓住它们并显示一个 MessageBox 还是让它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:37:45.257

试试这样：

```
if( this.NavigationContext.QueryString.ContainsKey("itemId"))
  {
      string s_itemid = this.NavigationContext.QueryString["itemId"];
      int i_itemid;
      bool result = Int32.TryParse(s_itemid, out i_itemid);
      if(result)
         //parsing success
      else
         //parsing error

  }
else
   //parameter doesn't exist 
```

有关 TryParse 的更多信息：[链接](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T03:32:15.173

您可以做的另一件事来减少错误是定义您的导航 uri。例如，在 Details.xaml 页面中，您可以使用所需类型的参数创建一个名为 GetUri() 的静态方法。

```
public static Uri GetUri(int itemId){
  return new Uri(string.Format("/Details.xaml?itemId={0}", itemId), UriKind.Relative);
} 
```

当您想导航到详细信息页面时，只需编写：

```
NavigationService.Navigate(Details.GetUri(2)); 
```

# java - Eclipse JDT ASTParser - MethodVisitor 的问题

> ID：14293450
> 
> 赞同：3
> 
> 时间：2013-01-12T12:45:33.627
> 
> 标签：java, parsing, abstract-syntax-tree, eclipse-jdt

我正在编写一些代码来解析 java 源代码。我正在试验 Eclipse JDT AST 解析器。我的代码如下。（解析代码）。我正在针对我用 Java 编写的 Mailer 应用程序测试解析器（第二个代码片段）。我的解析器正在访问除 generateEmail() 和 debug() 方法之外的所有方法。我到处看了看，但我一生都无法理解为什么会发生这种情况。谁能告诉我我做错了什么？是内存问题吗？我没有收到任何 OutOfMemoryException

我想使用 MethodVisitor 方法访问特定方法，以访问特定方法中的语句和变量。

我的解析代码

```
public class RuleEngine {

public static void parse(String file) {
    File java = new File(file);
    ASTParser parser = ASTParser.newParser(AST.JLS3);
    String code = readFile(java);
    parser.setSource(code.toCharArray());
    parser.setKind(ASTParser.K_COMPILATION_UNIT);
    final CompilationUnit cu = (CompilationUnit) parser.createAST(null);

    cu.accept(new ASTVisitor() {

        public boolean visit(ImportDeclaration id) {
            Name imp = id.getName();
            debug("import", id.getName().getFullyQualifiedName());
            return false;
        }

        public boolean visit(VariableDeclarationFragment node) {
            SimpleName name = node.getName();
            debug("var.declaration", (name.getFullyQualifiedName() + ":" + cu.getLineNumber(name.getStartPosition())));
            return false; // do not continue 
        }

        public boolean visit(MethodDeclaration method) {
            debug("method", method.getName().getFullyQualifiedName());
            debug("method.return", method.getReturnType2().toString());
            List<SingleVariableDeclaration> params = method.parameters();

            for(SingleVariableDeclaration param: params) {
                debug("param", param.getName().getFullyQualifiedName());
            }

            Block methodBlock = method.getBody();
            String myblock = methodBlock.toString();
            methodVisitor(myblock);
            return false;
        }

    });

}

public static void methodVisitor(String content) {
    debug("entering met visitor", "1");
    ASTParser metparse = ASTParser.newParser(AST.JLS3);
    metparse.setSource(content.toCharArray());
    metparse.setKind(ASTParser.K_STATEMENTS);
    Block block = (Block) metparse.createAST(null);

    block.accept(new ASTVisitor() {
        public boolean visit(VariableDeclarationFragment var) {
            debug("met.var", var.getName().getFullyQualifiedName());
            return false;
        }

        public boolean visit(SimpleName node) {
            debug("SimpleName node", node.getFullyQualifiedName());
            return false;
        }
        public boolean visit(IfStatement myif) {
            debug("if.statement", myif.toString());
            return false;
        }

    });
}

public static void debug(String ref, String message) {
    System.out.println(ref +": " + message);
}

public static void main(String[]args) {
    parse("MailerDaemon.java");
} 
```

这是我的 MailerDaemon 代码

```
public boolean isBccMode() {
    return bccMode;
}

public void setBccMode(boolean bccMode) {
    this.bccMode = bccMode;
}

public void setServerPort(String serverPortAddr) {
    String[] elems = serverPortAddr.split("\\:");
    this.setServerAddr(elems[0]);
    this.setSmtpPort(elems[1]);
}

public String getServerAddr() {
    int i = 0;
    return serverAddr;
}
public void setServerAddr(String serverAddr) {
    this.serverAddr = serverAddr;
}
public boolean isSslOn() {
    return isSslOn;
}
public void setSslOn(boolean isSslOn) {
    this.isSslOn = isSslOn;
}
public String getSmtpPort() {
    return smtpPort;
}
public void setSmtpPort(String smtpPort) {
    this.smtpPort = smtpPort;
}
public String getFromEmail() {
    return fromEmail;
}
public void setFromEmail(String fromEmail) {
    this.fromEmail = fromEmail;
}
public String getToEmails() {
    return toEmails;
}
public void setToEmails(String toEmails) {
    this.toEmails = toEmails;
}
public String getUsername() {
    return username;
}
public void setUsername(String username) {
    this.username = username;
}
public String getPassword() {
    return password;
}
public void setPassword(String password) {
    this.password = password;
}
public String getSubject() {
    return subject;
}
public void setSubject(String subject) {
    this.subject = subject;
}
public String getMessage() {
    return message;
}
public void setMessage(String message) {
    this.message = message;
}
public String getCcList() {
    return ccList;
}
public void setCcList(String ccList) {
    this.ccList = ccList;
}
public String getBccList() {
    return bccList;
}
public void setBccList(String bccList) {
    this.bccList = bccList;
}

public String getFile() {
    return file;
}
public void setFile(String file) {
    debug("filename: " + file);
    this.file = file;
}
public void generateEmail() {
    Properties props = new Properties();
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.port", this.getSmtpPort());
    if(isSslOn()) {
        props.put("mail.smtp.socketFactory.port", this.getSmtpPort());
        props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
    }
    props.put("mail.smtp.host", getServerAddr());

    Session session = Session.getDefaultInstance(props, new Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(getUsername(), getPassword());
        }
    });

    Message msg = new MimeMessage(session);
    try {
        msg.setFrom(new InternetAddress(this.getFromEmail()));
        if (getToEmails() != null) {
            msg.setRecipients(Message.RecipientType.TO, InternetAddress.parse(getToEmails()));
        } else if (isBccMode()) {
            msg.setRecipients(Message.RecipientType.TO, InternetAddress.parse(getFromEmail()));
        }

        //msg.setRecipients(Message.RecipientType.CC, InternetAddress.parse(getCcList()));
        msg.setSubject(getSubject());
        //msg.setText(getMessage());
        MimeBodyPart messagePart = new MimeBodyPart();
        messagePart.setText(getMessage());

        /*
        MimeBodyPart attachments = new MimeBodyPart();
        FileDataSource fd = new FileDataSource(getFile());
        attachments.setDataHandler(new DataHandler(fd));
        attachments.setFileName(fd.getName());
        */

        Multipart mp = new MimeMultipart();
        mp.addBodyPart(messagePart);
        //mp.addBodyPart(attachments);

        msg.setContent(mp);
        Transport.send(msg);
        debug("Done. Closing Session...");

    } catch (AddressException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (MessagingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

private static void debug(String message) {
    System.out.println("[DEBUG]: " + message);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:10:55.037

我认为您的解析代码没有明显问题。我希望它在尝试解析该`generateEmail()`方法时在某个地方失败。由于解析器遵循顺序方法，因此该`debug()`方法也不会被解析。尝试将语句包含`public boolean visit(MethodDeclaration method)`在一个可能带有 Throwable 子句的 try-catch 块中。

还要检查您的`readFile()`方法。读取文件时最常见的一个问题是缺少将换行符附加到每一行。不添加新行会导致代码的错误构造，尤其是当代码中有注释时。您可以检查`compilationUnit.getProblems()`方法来检查任何此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:43:57.557

@UnniKris - 感谢您的回复。我更改了`readFile()`方法并`\n`在换行符写入 StringBuilder 之后包含了一个。这行得通。我所有的方法都被成功解析了。

我的 readFile() 方法的代码片段发布在这里：

```
public static String readFile(File file) {
    StringBuilder sb = new StringBuilder();
    try {
        Scanner scan = new Scanner(file);

        while(scan.hasNext()) {
            sb.append(scan.nextLine()+"\n"); //added the new line feed here
        }
        scan.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    String fullcode = sb.toString();
    //debug("full.code", fullcode);
    return fullcode;

} 
```

# javascript - 在 google-chrome 扩展中加载 iframe（错误：协议必须匹配）

> ID：14293451
> 
> 赞同：1
> 
> 时间：2013-01-12T12:45:40.307
> 
> 标签：javascript, google-chrome-extension, roblox

manifest.json 中的代码：

```
{
  "name": "Test",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Test",
  "browser_action": {
      "default_icon": "icon.png",
      "default_popup": "popup.html"
  },
  "permissions": [
      "notifications",
      "https://www.roblox.com"
  ],
  "background": { "scripts": ["background.js"] },
  "content_security_policy": "script-src https://www.roblox.com 'self' ; object-src 'self'",
  "web_accessible_resources": [
    "icon.png"
  ]
} 
```

background.js 中的代码：

```
var iframe = document.createElement("iframe")
iframe.src = "http://www.roblox.com/User.aspx?ID=1"

document.body.appendChild(iframe) 
```

我不断收到此错误：

```
Unsafe JavaScript attempt to access frame with URL chrome-extension://dbekkpdpdheclekbpajgigjdlpleolgd/_generated_background_page.html from frame with URL http://www.roblox.com/User.aspx?ID=1\. The frame requesting access has a protocol of 'http', the frame being accessed has a protocol of 'chrome-extension'. Protocols must match. 
```

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:13:24.073

您的代码中的问题是您的`http://www.roblox.com/*`来源不安全。Chrome 错误消息的**白名单仅安全资源**部分指的是这个。您必须使用`https://www.roblox.com/*`并声明

> "content_security_policy": "script-src [https://roblox.com](https://roblox.com) 'self' ; object-src 'self'"

在清单文件中。我观察到您的域正在通过

> [http://www.roblox.com/Ads/IFrameAdContent.aspx?v=2&slot=Roblox_User_Top_728x90&format=banner&v=2](http://www.roblox.com/Ads/IFrameAdContent.aspx?v=2&slot=Roblox_User_Top_728x90&format=banner&v=2)。

`http`URL，未列入白名单。

# 进一步阅读的参考资料

*   [内容安全政策](https://developer.chrome.com/extensions/contentSecurityPolicy.html)

# emacs - 在多个 emacs 缓冲区上执行特定命令

> ID：14293459
> 
> 赞同：6
> 
> 时间：2013-01-12T12:46:43.460
> 
> 标签：emacs

有没有办法在多个缓冲区上执行 emacs 命令，而不必单独选择它们并在每个单独的缓冲区上执行它。

我通常会打开与特定正则表达式匹配的多个文件，例如`~/*.py`，并希望启用特定模式，比如在每个文件上执行，`hs-minor-mode`或者`glasses-mode`说`C-c @ C-M-h`在每个文件上执行。目前我必须选择其中的每一个并单独进行。那么是否有黑客或循环来自动化任务。

假设我从缓冲区列表中标记缓冲区，然后为所有标记的缓冲区运行命令。

我试过[这个](https://stackoverflow.com/a/12778675/1309352)，但在执行命令后，`eval-expression`我完全无法访问我的迷你缓冲区，这意味着每当我输入`M-x`迷你缓冲区时都会返回这个

> 无法访问 minibuffer emacs 错误“进程菜单模式不支持隐藏显示次要模式”

我被迫实际上杀死了整个 emacs 进程，因为`C-x C-s`结束任务也没有工作。

PS：我没有使用elisp的经验

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T13:56:09.153

您可以为此使用 ibuffer 模式（它是默认 Emacs 发行版的一部分）。

```
(global-set-key "\C-x\C-b" 'ibuffer) ;; make ibuffer the default 
```

您可以在`*Ibuffer*`其中标记所需的缓冲区，`m`然后在每个缓冲区中使用`E`.

一般来说，`ibuffer`它比通常的缓冲区列表灵活得多，我认为`ibuffer`应该是 Emacs 中的默认缓冲区列表。

如果您经常这样做，您可能希望在每次进入 python 模式时通过将它们附加到模式挂钩来切换这些特定模式：

```
(add-hook 'python-mode-hook 'hs-minor-mode)
(add-hook 'python-mode-hook 'glasses-mode) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T15:44:16.990

我不知道 ibuffer 有这个功能！无论如何，对于那些更熟悉 dired 的人来说，这里有一个相同的命令。选择目录中的文件`m`或任何其他更强大的方法。然后做，`M-x``dired-do-command`并编写一个表单或命令，就像在`M-x`.

```
(defun dired-do-command (command)
  "Run COMMAND on marked files. Any files not already open will be opened.
After this command has been run, any buffers it's modified will remain
open and unsaved."
  (interactive
   (list
    (let ((print-level nil)
          (minibuffer-history-position 0)
          (minibuffer-history-sexp-flag (1+ (minibuffer-depth))))
      (unwind-protect
          (read-from-minibuffer
           "Command: " (prin1-to-string (nth 0 command-history))
           read-expression-map t
           (cons 'command-history 0))

        ;; If command was added to command-history as a
        ;; string, get rid of that.  We want only
        ;; evaluable expressions there.
        (if (stringp (car command-history))
            (setq command-history (cdr command-history)))))))
  (dolist (filename (dired-get-marked-files))
    (with-current-buffer (find-file-noselect filename)
      (if (symbolp command)
          (call-interactively command)
        (eval command))))) 
```

# javascript - 模拟 XHR2 文件上传

> ID：14293462
> 
> 赞同：1
> 
> 时间：2013-01-12T12:47:07.593
> 
> 标签：javascript, backbone.js, xmlhttprequest

我有一个 HTML 上传按钮，用于将（多个）文件发送到以 JSON 响应的服务器。基于该响应，我的应用程序流程继续。

现在，为了测试我的其余代码（取决于服务器响应），我想模拟文件上传，这样我就不必在每次重新加载时手动选择和上传新文件。

以下是我的上传方法的简化版本：

```
uploadToServer: function (file) {

    var self = this,
        data = new FormData(),
        xhr = new XMLHttpRequest();

    // When the request has successfully completed.
    xhr.onload = function () {
        var response = $.parseJSON(this.responseText);

        var photo = new App.Models.Photo({
            filename: response.filename,
            name: response.uuid
        });

        var photoView = new App.Views.Photo({ model: photo });

        $('.photos').append(photoView.render().el);
    };

    // Send to server, where we can then access it with $_FILES['file].
    data.append('file', file);
    xhr.open('POST', this.url);
    xhr.send(data);
} 
```

该`uploadToServer`参数`file`是来自[FileList的](https://developer.mozilla.org/en-US/docs/DOM/FileList)[File](https://developer.mozilla.org/en-US/docs/DOM/File)对象。如您所见，我的服务器等待.`$_FILES['file']`

如果 a 可以模拟一个真正的 File-object 被传递到 ，那就太棒了`uploadToServer`，因为我不必担心我现有的事件，例如`xhr.onload`可用`xhr.onprogress`。

如果这不可能，我可以创建一个自定义`uploadToServer`方法并在我的服务器上发送一个常规的 AJAX 请求和假响应。但是，我怎样才能使用我的事件（等）中的代码并将其绑定`xhr.onload`到`xhr.onprogress`该 AJAX 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:24:28.730

您可以通过创建画布、将其转换为文件并将结果传递给您的方法来模拟文件上传。

1.  创建一个画布：在这里，一个漂亮的红色方块

    ```
    var canvas = document.createElement('canvas'),
        ctx = canvas.getContext("2d");

    canvas.width = 100;
    canvas.height = 100;
    ctx.fillStyle = '#ff0000';
    ctx.fillRect(0, 0, 100, 100);

    document.body.appendChild(canvas); 
    ```

2.  将其转换为文件并将其传递给您的方法：我使用[Canvas to Blob](https://github.com/blueimp/JavaScript-Canvas-to-Blob)来简化测试，但您可能可以提取裸露的骨骼以满足您的需求。

    ```
    canvas.toBlob( function (blob) {
        m.uploadToServer(blob);
    }, 'image/jpeg'); 
    ```

还有一个 Fiddle [http://jsfiddle.net/pvWxx/](http://jsfiddle.net/pvWxx/)一定要打开控制台查看事件和请求。

如果您想通过 Blob 传递文件名，可以将第三个参数传递给`formData.append`，请参阅[如何为作为 FormData 上传的 Blob 提供文件名？](https://stackoverflow.com/questions/6664967/how-to-give-a-blob-uploaded-as-formdata-a-file-name)和更新的小提琴[http://jsfiddle.net/pvWxx/1/](http://jsfiddle.net/pvWxx/1/)

# html - 如何使用 CSS 为 div 标签赋予淡入淡出效果

> ID：14293465
> 
> 赞同：0
> 
> 时间：2013-01-12T12:47:29.607
> 
> 标签：html, css

我在它的**悬停**`Ul`上有一个标签，我显示了一个使用 css 的标签。 现在我希望该 div 标签将第一个淡入淡出或任何其他效果，如动画等。 我知道它可以通过使用轻松完成，但想知道我可以使用 Html5、css3、css 实现这一点**`div`

`jQuery`**

 **[这里是 JsFiddle](http://jsfiddle.net/Cedue/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:19:22.177

淡入[http://jsfiddle.net/thebabydino/Cedue/7/](http://jsfiddle.net/thebabydino/Cedue/7/)

从来没有像`-webkit-opacity`或`-moz-opacity`

如果你想转换`opacity`，那么要么写

```
transition: opacity 1s 
```

或者

```
transition: 1s 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T21:09:30.940

据我所知，从代码中删除`display: none;`和`display: block;`行可以启用动画：http: [//jsfiddle.net/Cedue/31/](http://jsfiddle.net/Cedue/31/)

（这是您原始小提琴的副本，仅删除了显示：行。）但是，这引发了一个问题，即您可以在隐藏文本时访问、突出显示甚至悬停文本；如果您不希望出现这种行为，您可能希望研究另一种隐藏它的方法，直到正确的区域悬停，例如用边距移动它。

正如 Ana 所提到的，如果您希望为整个淡入淡出动画，您应该使用 opacity 作为您的过渡参数（例如：`transition: opacity 1s ease;`，以及用于单独浏览器支持的附加行）。如果您像在示例中那样使用背景作为过渡属性，则只有背景会褪色并且文本会立即出现。

编辑：由于我自己的好奇心，我在 Chrome 和 Firefox 下测试了这个，每个都适用于 Windows 和 Mac，并且可以确认删除这些`display`行会导致动画在所有这些上工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T12:53:13.570

检查这个[网站](http://brugbart.com/Articles/javascript-fade)，它使用 css 和 javascript。

纯 CSS 实现[在这里](http://bavotasan.com/2011/a-simple-fade-with-css3/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T12:54:11.983

您应该查看 CSS3 过渡[http://www.alistapart.com/articles/understanding-css3-transitions/](http://www.alistapart.com/articles/understanding-css3-transitions/)**

# android - 如何使用来自其他活动的单实例活动重新启动活动

> ID：14293467
> 
> 赞同：1
> 
> 时间：2013-01-12T12:47:56.810
> 
> 标签：android

如何用来自另一个活动的单实例替换或重新启动活动。

我有两个活动，ActivityA 和 ActivityB。

在清单中：

```
 <activity
    android:name=".ActivityA"
    android:label="@string/activityA"
    android:launchMode="singleInstance" >
</activity>
<activity
    android:name=".ActivityB"
    android:label="@string/activityB" /> 
```

我的问题，如何从 ActivityB 中的方法重新启动 ActivityA。ActivityB 中的 Mycode 编号为：

```
class ActivityB extends Activity{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Button rButton = (Button) findViewById(R.id.restart);
        rButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                 restartActivityA();
            }
        });
    }

    public void restartActivityA() {
       Intent intent = new Intent(this, ActivityA.class);
       intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK|Intent.FLAG_ACTIVITY_CLEAR_TOP);
       startActivity(intent);
       this.finish();
    }
} 
```

如果我单击按钮，则不要重新启动。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:59:28.813

尝试将此添加到您的`ActivityA`：

```
 @Override
    protected void onNewIntent(Intent intent) 
    {
        super.onNewIntent(intent);           
    } 
```

**编辑：**

像这样调用 ActivityB ：

```
Intent intent = new Intent(this, ActivityB.class); 
startActivity(intent);
finish(); 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T12:51:41.850

试试这个可能会有所帮助。

```
Intent intent = getActivity().getIntent();//it will return the intent for current activity 
```

希望这可以帮助。

# spring-mvc - Spring MVC 处理程序返回带有额外引号的字符串

> ID：14293469
> 
> 赞同：16
> 
> 时间：2013-01-12T12:48:18.447
> 
> 标签：spring-mvc

我正在使用 Spring 3.1，并且我有一个应该返回 String 值的处理程序。这是我的处理程序的样子：

```
@RequestMapping(value = TEST_HANDLER_PATH, method = RequestMethod.POST)
public ResponseEntity<String> handleTest(HttpServletRequest request,
    @RequestParam("parma1") String param) throws Exception {
    String ret = ...
    ...
    HttpHeaders headers = new HttpHeaders();
    headers.add("Content-Type", "text/plain;charset=utf-8");
    return new ResponseEntity<String>(ret, headers, HttpStatus.CREATED);
} 
```

最后我还尝试了用`@ResponseBody`with注释方法`return ret;`。

在这两种情况下，当我点击服务时，我都会得到围绕字符串值的额外引号（例如`"This is a test"`）。我猜这是由于消息转换。这就是为什么我尝试定义`Content-Type`标题，明确点击 StringHttpMessageConverter，但无济于事。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-08-13T22:25:21.903

有同样的问题。

只要确保你注册了一个`org.springframework.http.converter.StringHttpMessageConverter`和你的杰克逊一样，这样字符串就会被逐字处理，而不是试图转换为 JSON（带有额外的引号）。

只需使用您喜欢的 Charset 使用默认构造函数或构造函数进行实例化。应该使用标准内部默认值为您设置媒体类型。如果您通过代码扩展进行配置，`WebMvcConfigurerAdapter`那么您只需在`configureMessageConverters(List<HttpMessageConverter<?>> converters)`方法中添加转换器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-31T04:36:49.987

在一个相关的场景中，我有一个错误地请求转换的`IntegrationFlow`for a 。`GET`基本上，目标服务将接收`@PathVariable`作为引号转义字符串

```
 return IntegrationFlows.from("getThing")
        .transform(Transformers.toJson())
        .handle( 
```

强制字符串在`.transform(Transformers.toJson())`URI 中转义，因此只需将其删除 - 它不应该存在 - 修复了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-25T17:43:07.957

就我而言，我*过度设计* **=）**

已经为 bean 的`toString`操作引入了一个转换器，如下所示：

```
class SerializableToString implements Converter<Serializable, String> 
```

限制它（仅限于我的 bean），解决了问题**X）**

**注意：**使用断点 @ 进行调试有`org.springframework.core.convert.support.GenericConversionService.getConverter`帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-12T18:19:06.573

原来在其中一个导入中注册了一个 JSON 消息转换器。

# jpa - 避免在表单提交时直接更新实体

> ID：14293470
> 
> 赞同：1
> 
> 时间：2013-01-12T12:48:27.790
> 
> 标签：jpa, seam

我有一个实体，它在屏幕上显示为可以修改的输入框中的文本。当我提交点击保存的表单时，我希望我的 ejb3 组件处理数据并使用实体管理器持久化或合并它。但是由于某种原因，当我修改数据并点击保存时，数据会通过我的 ejb3 直接在数据库中更新，这当然是不可取的。我的代码如下所示

```
@Entity
@Table(name = "EMP")
public class Emp implements java.io.Serializable {

private short empno;
private Dept dept;
private String ename;
private String job;
private Short mgr;
private Date hiredate;
private BigDecimal sal;
private BigDecimal comm;

public Emp() {
}

public Emp(short empno) {
    this.empno = empno;
}
public Emp(short empno, Dept dept, String ename, String job, Short mgr,
        Date hiredate, BigDecimal sal, BigDecimal comm) {
    this.empno = empno;
    this.dept = dept;
    this.ename = ename;
    this.job = job;
    this.mgr = mgr;
    this.hiredate = hiredate;
    this.sal = sal;
    this.comm = comm;
}

@Id
@Column(name = "EMPNO", unique = true, nullable = false, precision = 4, scale = 0)
public short getEmpno() {
    return this.empno;
}

public void setEmpno(short empno) {
    this.empno = empno;
}

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "DEPTNO")
public Dept getDept() {
    return this.dept;
}

public void setDept(Dept dept) {
    this.dept = dept;
}

@Column(name = "ENAME", length = 10)
@Length(max = 10)
public String getEname() {
    return this.ename;
}

public void setEname(String ename) {
    this.ename = ename;
}

@Column(name = "JOB", length = 9)
@Length(max = 9)
public String getJob() {
    return this.job;
}

public void setJob(String job) {
    this.job = job;
}

@Column(name = "MGR", precision = 4, scale = 0)
public Short getMgr() {
    return this.mgr;
}

public void setMgr(Short mgr) {
    this.mgr = mgr;
}

@Temporal(TemporalType.DATE)
@Column(name = "HIREDATE", length = 7)
public Date getHiredate() {
    return this.hiredate;
}

public void setHiredate(Date hiredate) {
    this.hiredate = hiredate;
}

@Column(name = "SAL", precision = 7)
public BigDecimal getSal() {
    return this.sal;
}

public void setSal(BigDecimal sal) {
    this.sal = sal;
}

@Column(name = "COMM", precision = 7)
public BigDecimal getComm() {
    return this.comm;
}

public void setComm(BigDecimal comm) {
    this.comm = comm;
} 
```

}

```
 @Stateful
    @Name("workflow")
    @Scope(ScopeType.CONVERSATION)
    public class WorkflowBean implements Workflow
    {
    @Logger private Log log;

    @In StatusMessages statusMessages;

    @PersistenceContext(type=PersistenceContextType.EXTENDED)
    EntityManager entityManager;

    @Out(required=false)
    Emp employee = new Emp();

    @RequestParameter("empEmpno")
    String empNo;

    public void workflow()
    {

        log.info("workflow.workflow() action called");
        statusMessages.add("workflow");

    } 
    @End
    public boolean save(){
       entityManager.merge(emp);
       entityManger.flush();
    }
    @Begin(join=true)
    public boolean populateEmp(){
        entityManager.setFlushMode(FlushModeType.COMMIT);
        System.out.println("The Emp No. is---"+empNo);
        int no = Integer.parseInt(empNo);
        short emp =(short)no;
        employee = entityManager.find(Emp.class, emp);
        entityManager.flush();
        return true;
    }
    public Emp getEmployee() {
        return employee;
    }

    public void setEmployee(Emp employee) {
        this.employee = employee;
    }
    // add additional action methods

    public String getEmpNo() {
        return empNo;
    }

    public void setEmpNo(String empNo) {
        this.empNo = empNo;
    }
    @Remove
    @Destroy
    public void destroy() {

    }
} 
```

我的观点看起来像

```
<h:form id="emp" styleClass="edit">

        <rich:panel>
            <f:facet name="header">Edit Emp</f:facet>

            <s:decorate id="empnoField" template="layout/edit.xhtml">
                <ui:define name="label">Empno</ui:define>
                <h:inputText id="empno"
                       required="true"
                          value="#{workflow.employee.empno}">
                </h:inputText>
            </s:decorate>

            <s:decorate id="commField" template="layout/edit.xhtml">
                <ui:define name="label">Comm</ui:define>
                <h:inputText id="comm"
                          value="#{workflow.employee.comm}"
                           size="14">
                </h:inputText>
            </s:decorate>

            <s:decorate id="enameField" template="layout/edit.xhtml">
                <ui:define name="label">Ename</ui:define>
                <h:inputText id="ename"
                           size="10"
                      maxlength="10"
                          value="#{workflow.employee.ename}">
                </h:inputText>
            </s:decorate>

            <s:decorate id="hiredateField" template="layout/edit.xhtml">
                <ui:define name="label">Hiredate</ui:define>
                <rich:calendar id="hiredate"
                          value="#{workflow.employee.hiredate}" datePattern="MM/dd/yyyy" />
            </s:decorate>

            <s:decorate id="jobField" template="layout/edit.xhtml">
                <ui:define name="label">Job</ui:define>
                <h:inputText id="job"
                           size="9"
                      maxlength="9"
                          value="#{workflow.employee.job}">
                </h:inputText>
            </s:decorate>

            <s:decorate id="mgrField" template="layout/edit.xhtml">
                <ui:define name="label">Mgr</ui:define>
                <h:inputText id="mgr"
                          value="#{workflow.employee.mgr}">
                </h:inputText>
            </s:decorate>

            <s:decorate id="salField" template="layout/edit.xhtml">
                <ui:define name="label">Sal</ui:define>
                <h:inputText id="sal"
                          value="#{workflow.employee.sal}"
                           size="14">
                </h:inputText>
            </s:decorate>
            <s:decorate id="deptField" template="layout/edit.xhtml">
                <ui:define name="label">Department</ui:define>
                <h:inputText id="dname"
                          value="#{workflow.deptName}">
                </h:inputText>
            </s:decorate>
            <div style="clear:both">
                <span class="required">*</span>
                required fields
            </div>

        </rich:panel>

        <div class="actionButtons">

            <h:commandButton id="save"
                          value="Save"
                         action="#{workflow.save}"
                       rendered="true"/>
        </div>
    </h:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:22:45.490

*[很难在评论中解决您的回复中的问题。]*

有几件事我不明白以及为什么这样做。

*   使用瞬态字段，它将增加在持久化时将它们添加到实体对象的开销。
*   为什么自动提交会导致问题且无法实施。

不管这些，你可以试试

*   使用 使实体分离`entityManager.detach(entity)`或清除持久性上下文`entityManager.clear()`，分离所有底层实体。但前一个更有利。
*   可以手动管理事务而不是容器。在您可以控制操作的地方使用 BMT。

# javascript - 显示 cytoscape.js 中节点之间的关系类型

> ID：14293474
> 
> 赞同：3
> 
> 时间：2013-01-12T12:49:03.880
> 
> 标签：javascript, graph, cytoscape.js

我正在寻找一种软件，它允许我通过自动绘图和用户交互来绘制实体之间的关系。我看过 cytoscape.js，它似乎是一个非常好的选择，但我想知道使用这个软件是否可以可视化关系的名称。

该示例的目的是绘制两个人并显示他们的关系，例如，他们是兄弟。

`Person1 ====== brother =====> Person2`

我需要修改代码来执行此操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T15:32:14.327

You don't need to modify the code. This functionality is already built in. You will need to know how to use the [mappers](http://cytoscape.github.com/cytoscape.js/#style/mappers) and [cytoscape stylesheet definitions](http://cytoscape.github.com/cytoscape.js/#core/initialisation).

If you take a look at the source of the demo that they used [here](http://cytoscape.github.com/cytoscape.js/js/demo.js), you'll see that when you're defining the cytoscape css style, you need to set the `content` attribute which you could then use the mappers and specify which attribute in the node/edge data you'd like to display. This is already done with the `id` attribute for nodes as follows:

```
style: cytoscape.stylesheet()
  .selector("node")
        .css({
            "content": "data(id)",
            "shape": "data(shape)",
            "border-width": 3,
            "background-color": "#DDD",
            "border-color": "#555",
        }) 
```

You can do the exact same for edges Hope this helps.

# c# - 何时在 C# 中删除 Timer 事件处理程序？

> ID：14293476
> 
> 赞同：3
> 
> 时间：2013-01-12T12:49:21.397
> 
> 标签：c#, .net, winforms, timer

我有一个 WindowsForm 应用程序 - “弹跳球”，所以我有一个用于表单的计时器，因为在每个滴答声中我都会移动球。

在我的表单中，我有以下代码：

```
public Form1(){

  timer = new Timer();
  timerHandler = new EventHandler(timerTick);
  timer.Tick += timerHandler;
  timer.Enabled = true;
} 
```

现在当用户关闭此应用程序时，我是否需要删除“EventHandler”？我有一个退出按钮，所以当用户单击它时，我会向他显示一个弹出对话框，询问他是否真的想退出应用程序。如果他点击“是”，我将关闭应用程序，否则什么也不会发生。

所以在我的退出按钮代码中我写了这个代码：

```
DialogResult result= MessageBox.Show("Do you really want to quit?", "Exit",  
                                     MessageBoxButtons.YesNo);
        if (result == DialogResult.Yes)
        {
             timer.Tick -= timerHandler;
             this.close();
        } 
```

当应用程序关闭时，我应该担心 timerHandler 还是 GC 破坏了他？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T12:52:13.580

> 现在当用户关闭此应用程序时，我是否需要删除“EventHandler”？

不，没有必要。除此之外，如果整个应用程序正在停止，这意味着该进程无论如何都会死，所以它是无关紧要的。

但即使*不是这种**情况*，计时器也将有资格与表单同时进行垃圾收集 - 因此事件处理程序不会让对象保持比它需要的时间更长的时间。（当然，这是假设您的`timer`变量是实例变量。）

编辑：以上只是解决垃圾收集方面的问题。进一步考虑，这里*可能*存在竞争条件（我不确定实现细节）：如果在表单关闭并隐式处理之后计时器滴答，但在事件循环停止运行之前，你可以最终会出现一个计时器滴答声，它试图将球移动到已处置的表格上，这将失败。

解决此问题的最佳方法不是删除刻度处理程序（IMO）-它是在处置表单时处置计时器（即在`Dispose`方法中-可能通过将其添加到组件容器中，但我不是在这方面完全确定）。

这不是事情是否会被垃圾收集的问题——而是事件处理程序是否会在它不再合适时被调用（因为表单已被释放）。如果表单关闭*立即*关闭事件循环，那很好 - 但我不确定。

# jsp - 在 Liferay MVC portlet 中刷新 JSP 页面的一部分

> ID：14293481
> 
> 赞同：4
> 
> 时间：2013-01-12T12:50:06.730
> 
> 标签：jsp, jquery, liferay

我需要`table`在页面上刷新一个而不重新加载整个页面。有谁知道这样做的好方法？

我用一个表创建了一个单独的`jspf`页面，并通过 Ajax 请求 > 呈现它`<portlet:renderURL`，但该页面包装在默认的 liferay 主题中。有没有其他方法可以在没有主题的情况下获取页面日期？

```
<portlet:renderURL var="testURL">
    <portlet:param name="jspPage" value="/jspf/test.jspf" />
</portlet:renderURL>

<script>
$("#test-button").click(function() {
    $("#test-table").load("<%= testURL %>");
})
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T08:51:11.323

要在 Liferay-MVC 中使用 Ajax，您应该创建一个`resourceURL`链接并`serveResource`在 Portlet 类中的方法中处理它。

```
<portlet:resourceURL var="testURL">
    <portlet:param name="pageAddress" value="/jspf/test.jspf" />
</portlet:resourceURL>

<script>
$("#test-button").click(function() {
    $("#test-table").load("<%= testURL %>");
})
</script> 
```

那么您应该在`serveResource`您的 portlet 类的 Method 中提供正确的结果。此外，您可以使用`resourceRequest`Object获取参数（pageAddress）

```
String pageAddress = resourceRequest.getParameter("pageAddress"); 
```

# c# - MVC Entites 异常，真的很奇怪

> ID：14293482
> 
> 赞同：1
> 
> 时间：2013-01-12T12:50:09.383
> 
> 标签：c#, asp.net-mvc, entity-framework

我在我的数据库中保存了一些位置/城市。

我的位置/城市确实会通过我 `this._entities.SaveChanges();`的抛出来保存，类似于：

`The changes to the database were committed successfully, but an error occurred while updating the object context. The ObjectContext might be in an inconsistent state. Inner exception message:AcceptChanges cannot continue because the object's key values conflict with another object in the ObjectStateManager. Make sure that the key values are unique before calling AcceptChanges.`

我真的不知道是什么问题，因为它以前工作过，而且这些更改不应该真正影响它......

下面是一些代码：
首先，我将所有对象放入 currentLocation。我通过 foreach 循环它们以将项目添加到方法 Add()。最后我调用 _entites.SaveChanges()。一切都被保存了，但我得到一个错误......

```
 var webService = new WeatherWebService();
            currentLocation = webService.FindLocation(city);

            // ...save the user in the database.
            foreach (var item in currentLocation)
            {
                this._repository.Add(item);
            }

            this._repository.Save();

    public override void Add(Location location)
    {
        this._entities.Locations.AddObject(location);
    }

    public override void Save()
    {
        this._entities.SaveChanges();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T21:38:54.893

问题解决了，似乎你必须从自动增量中输出一个 id ......否则它会使每个帖子 id 为 0，因此它认为它有几个具有相同的 ID。

使用像 NewId 这样的东西作为@@SCOPE_IDENTIY

# c - 域名解析

> ID：14293487
> 
> 赞同：0
> 
> 时间：2013-01-12T12:50:49.923
> 
> 标签：c, regex, parsing

我有这个代码：

```
 #include <stdio.h>
        #include <string.h>

        int main()
        {
         char buf[255];
         char buf2[255];
         char myhost[255] = "subdomain.domain.com";

         char *pch;
         int token_counter = 0;

         memset(buf, 0, 255);
         memset(buf2, 0, 255);
         pch = strtok(myhost, ".");
         while (pch != NULL)
           {
                pch = strtok(NULL, ".");
                if (pch == NULL)
                   {
                        memset(buf, 0, 255);
                        strncpy(buf, buf2, strlen(buf2) - 1);
                        break;
                   }
                token_counter++;
                strcat(buf2, pch);
                strcat(buf2, ".");
           }
         printf("Domain: %s\n", buf);
         return 0;
        } 
```

如果 myhost 被定义为 subdomain.domain.com，这工作正常，但如果它是 domain.com，它会显示“com”作为最终结果。

***如何让它正确检测它是子域还是域？也许如果我包括一个已知 tlds 的列表？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:58:21.383

`strtok`是矫枉过正，`strcat`是浪费。如果您只想打印第 n 个之后的所有内容`.`，请使用`strchr`或仅检查字符串以找到第 n 个`.`。如果需要，从字符串的末尾开始计数。

让我解释一下为什么`strcat`在这里浪费时间。考虑：

```
const char *name = "foo.bar.baz.qux.net";
printf( "%s\n", name + 8 ); 
```

如果要打印“baz.qux.net”，则不需要将该字符串复制到新缓冲区中，因为您已经有了指向所需字符串第一个字符的指针。使用你所拥有的。您需要做的就是在字符串中找到指向所需的指针`.`，然后执行`printf( "%s\n", dot + 1 )`or `puts( dot + 1 )`。（`puts`这里更好，但你可能更熟悉`printf`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T12:56:22.707

要确定它是否是子域，请计算主机名中以句点分隔的令牌数。正如上面的评论所指出的，这并没有考虑到 foo.on.ca 之类的东西。

# iis - IIS / Helicon ISAPI 重写盗链保护

> ID：14293490
> 
> 赞同：0
> 
> 时间：2013-01-12T12:50:58.163
> 
> 标签：iis, isapi-rewrite

我正在使用安装了 ISAPI Rewrite 3 的共享主机包。问题是当我尝试修改 .htaccess 以防止盗链时，它不起作用。有没有人有 ISAPI 重写的经验，可以阐明我做错了什么。我把文件放到和Default.aspx相同的目录下。.htaccess 是：-

```
[ISAPI_Rewrite]
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?example.com [NC]
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?example.net [NC]
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?example.co.uk [NC]
RewriteRule \.(jpg|jpeg|gif)$ - [NC,F,L] 
```

语法正确还是其他情况？一如既往，感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:26:13.983

尝试添加“RewriteBase /”，但其他一切看起来都不错。这可能是您的权限。

# php - 用php生成mp3波形

> ID：14293492
> 
> 赞同：5
> 
> 时间：2013-01-12T12:51:24.850
> 
> 标签：php, mp3

我需要构建一个将 mp3 文件转换为波形图像的网络脚本，我[遇到了这个网站](http://web.archive.org/web/20141023083712/http://andrewfreiday.com/2010/04/29/generating-mp3-waveforms-with-php/)。

我已将 PHP 文件`.dll`和 .exe 文件从 LAMB 上传到我的网站（由 host monster 托管）。

但是当我尝试在网站上上传 MP3 文件时，它只会生成黑色图像而不是波形图像。

我对PHP知之甚少，所以我不完全知道出了什么问题，但我猜它与程序的上传部分有关。

谁能告诉我出了什么问题以及如何克服它？

以下是原样的 php 代码（也可以[在 GitHub 上的这个存储库中找到](https://github.com/afreiday/php-waveform-png/blob/master/php-waveform-png.php)）。

```
 <?php

  ini_set("max_execution_time", "30000");

  // how much detail we want. Larger number means less detail
  // (basically, how many bytes/frames to skip processing)
  // the lower the number means longer processing time
  define("DETAIL", 5);

  define("DEFAULT_WIDTH", 500);
  define("DEFAULT_HEIGHT", 100);
  define("DEFAULT_FOREGROUND", "#FF0000");
  define("DEFAULT_BACKGROUND", "#FFFFFF");

  /**
   * GENERAL FUNCTIONS
   */
  function findValues($byte1, $byte2){
    $byte1 = hexdec(bin2hex($byte1));                        
    $byte2 = hexdec(bin2hex($byte2));                        
    return ($byte1 + ($byte2*256));
  }

  /**
   * Great function slightly modified as posted by Minux at
   * http://forums.clantemplates.com/showthread.php?t=133805
   */
  function html2rgb($input) {
    $input=($input[0]=="#")?substr($input, 1,6):substr($input, 0,6);
    return array(
     hexdec(substr($input, 0, 2)),
     hexdec(substr($input, 2, 2)),
     hexdec(substr($input, 4, 2))
    );
  }   

  if (isset($_FILES["mp3"])) {

/**
 * PROCESS THE FILE
 */

// temporary file name
$tmpname = substr(md5(time()), 0, 10);

// copy from temp upload directory to current
copy($_FILES["mp3"]["tmp_name"], "{$tmpname}_o.mp3");

    // support for stereo waveform?
$stereo = isset($_POST["stereo"]) && $_POST["stereo"] == "on" ? true : false;

    // array of wavs that need to be processed
$wavs_to_process = array();

/**
 * convert mp3 to wav using lame decoder
 * First, resample the original mp3 using as mono (-m m), 16 bit (-b 16), and 8 KHz (--resample 8)
 * Secondly, convert that resampled mp3 into a wav
 * We don't necessarily need high quality audio to produce a waveform, doing this process reduces the WAV
 * to it's simplest form and makes processing significantly faster
 */
if ($stereo) {
        // scale right channel down (a scale of 0 does not work)
  exec("lame {$tmpname}_o.mp3 --scale-r 0.1 -m m -S -f -b 16 --resample 8 {$tmpname}.mp3 && lame -S --decode {$tmpname}.mp3 {$tmpname}_l.wav");
        // same as above, left channel
  exec("lame {$tmpname}_o.mp3 --scale-l 0.1 -m m -S -f -b 16 --resample 8 {$tmpname}.mp3 && lame -S --decode {$tmpname}.mp3 {$tmpname}_r.wav");
  $wavs_to_process[] = "{$tmpname}_l.wav";
  $wavs_to_process[] = "{$tmpname}_r.wav";
} else {
  exec("lame {$tmpname}_o.mp3 -m m -S -f -b 16 --resample 8 {$tmpname}.mp3 && lame -S --decode {$tmpname}.mp3 {$tmpname}.wav");
  $wavs_to_process[] = "{$tmpname}.wav";
}

// delete temporary files
unlink("{$tmpname}_o.mp3");
unlink("{$tmpname}.mp3");

// get user vars from form
$width = isset($_POST["width"]) ? (int) $_POST["width"] : DEFAULT_WIDTH;
$height = isset($_POST["height"]) ? (int) $_POST["height"] : DEFAULT_HEIGHT;
$foreground = isset($_POST["foreground"]) ? $_POST["foreground"] : DEFAULT_FOREGROUND;
$background = isset($_POST["background"]) ? $_POST["background"] : DEFAULT_BACKGROUND;
$draw_flat = isset($_POST["flat"]) && $_POST["flat"] == "on" ? true : false;

$img = false;

// generate foreground color
list($r, $g, $b) = html2rgb($foreground);

// process each wav individually
for($wav = 1; $wav <= sizeof($wavs_to_process); $wav++) {

  $filename = $wavs_to_process[$wav - 1];

  /**
   * Below as posted by "zvoneM" on
   * http://forums.devshed.com/php-development-5/reading-16-bit-wav-file-318740.html
   * as findValues() defined above
   * Translated from Croation to English - July 11, 2011
   */
  $handle = fopen($filename, "r");
  // wav file header retrieval
  $heading[] = fread($handle, 4);
  $heading[] = bin2hex(fread($handle, 4));
  $heading[] = fread($handle, 4);
  $heading[] = fread($handle, 4);
  $heading[] = bin2hex(fread($handle, 4));
  $heading[] = bin2hex(fread($handle, 2));
  $heading[] = bin2hex(fread($handle, 2));
  $heading[] = bin2hex(fread($handle, 4));
  $heading[] = bin2hex(fread($handle, 4));
  $heading[] = bin2hex(fread($handle, 2));
  $heading[] = bin2hex(fread($handle, 2));
  $heading[] = fread($handle, 4);
  $heading[] = bin2hex(fread($handle, 4));

  // wav bitrate 
  $peek = hexdec(substr($heading[10], 0, 2));
  $byte = $peek / 8;

  // checking whether a mono or stereo wav
  $channel = hexdec(substr($heading[6], 0, 2));

  $ratio = ($channel == 2 ? 40 : 80);

  // start putting together the initial canvas
  // $data_size = (size_of_file - header_bytes_read) / skipped_bytes + 1
  $data_size = floor((filesize($filename) - 44) / ($ratio + $byte) + 1);
  $data_point = 0;

  // now that we have the data_size for a single channel (they both will be the same)
  // we can initialize our image canvas
  if (!$img) {
    // create original image width based on amount of detail
            // each waveform to be processed with be $height high, but will be condensed
            // and resized later (if specified)
    $img = imagecreatetruecolor($data_size / DETAIL, $height * sizeof($wavs_to_process));

    // fill background of image
    if ($background == "") {
      // transparent background specified
      imagesavealpha($img, true);
      $transparentColor = imagecolorallocatealpha($img, 0, 0, 0, 127);
      imagefill($img, 0, 0, $transparentColor);
    } else {
      list($br, $bg, $bb) = html2rgb($background);
      imagefilledrectangle($img, 0, 0, (int) ($data_size / DETAIL), $height * sizeof($wavs_to_process), imagecolorallocate($img, $br, $bg, $bb));
    }
  }

  while(!feof($handle) && $data_point < $data_size){
    if ($data_point++ % DETAIL == 0) {
      $bytes = array();

      // get number of bytes depending on bitrate
      for ($i = 0; $i < $byte; $i++)
        $bytes[$i] = fgetc($handle);

      switch($byte){
        // get value for 8-bit wav
        case 1:
          $data = findValues($bytes[0], $bytes[1]);
          break;
        // get value for 16-bit wav
        case 2:
          if(ord($bytes[1]) & 128)
            $temp = 0;
          else
            $temp = 128;
          $temp = chr((ord($bytes[1]) & 127) + $temp);
          $data = floor(findValues($bytes[0], $temp) / 256);
          break;
      }

      // skip bytes for memory optimization
      fseek($handle, $ratio, SEEK_CUR);

      // draw this data point
      // relative value based on height of image being generated
      // data values can range between 0 and 255
      $v = (int) ($data / 255 * $height);

      // don't print flat values on the canvas if not necessary
      if (!($v / $height == 0.5 && !$draw_flat))
        // draw the line on the image using the $v value and centering it vertically on the canvas
        imageline(
          $img,
          // x1
          (int) ($data_point / DETAIL),
          // y1: height of the image minus $v as a percentage of the height for the wave amplitude
          $height * $wav - $v,
          // x2
          (int) ($data_point / DETAIL),
          // y2: same as y1, but from the bottom of the image
          $height * $wav - ($height - $v),
          imagecolorallocate($img, $r, $g, $b)
        );         

    } else {
      // skip this one due to lack of detail
      fseek($handle, $ratio + $byte, SEEK_CUR);
    }
  }

  // close and cleanup
  fclose($handle);

  // delete the processed wav file
  unlink($filename);

}

header("Content-Type: image/png");

// want it resized?
if ($width) {
  // resample the image to the proportions defined in the form
  $rimg = imagecreatetruecolor($width, $height);
  // save alpha from original image
  imagesavealpha($rimg, true);
  imagealphablending($rimg, false);
  // copy to resized
  imagecopyresampled($rimg, $img, 0, 0, 0, 0, $width, $height, imagesx($img), imagesy($img));
  imagepng($rimg);
  imagedestroy($rimg);
} else {
  imagepng($img);
}

imagedestroy($img);

  } else {

?>

  <form method="post" action="<?php print $_SERVER["REQUEST_URI"]; ?>"     enctype="multipart/form-data">

  <p>MP3 File:<br />
    <input type="file" name="mp3" /></p>

  <p>Image Width:<br />
    <input type="text" name="width" value="<?php print DEFAULT_WIDTH; ?>" /></p>

  <p>Image Height:<br />
    <input type="text" name="height" value="<?php print DEFAULT_HEIGHT; ?>" /></p>

  <p>Foreground Color: <small>(HEX/HTML color code)</small><br />
    <input type="text" name="foreground" value="<?php print DEFAULT_FOREGROUND; ?>" /></p>

  <p>Background Color: (Leave blank for transparent background) <small>(HEX/HTML color code)</small><br />
    <input type="text" name="background" value="<?php print DEFAULT_BACKGROUND; ?>" /></p>

  <p>Draw flat-line? <input type="checkbox" name="flat" /></p>

  <p>Stereo waveform? <input type="checkbox" name="stereo" /></p>

  <p><input type="submit" value="Generate Waveform" /></p>

  </form>

<?php

  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T13:37:12.077

在这里看看这个，它是你想要做的一个 PHP 唯一的实现：[http ://www.phpclasses.org/package/482-PHP-Extracts-attributes-of-audio-files-Visualization.html](http://www.phpclasses.org/package/482-PHP-Extracts-attributes-of-audio-files-Visualization.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-24T20:43:09.173

如果由于某种原因此脚本无法打开任何一个音频文件，它将失败并产生一个黑匣子。因此，假设主机没有阻止 exec()，并且根据您的服务器配置，这可能是路径的问题。您可能想尝试以下一项或两项：

*   在 exec() 调用中使用“lame”可执行文件的完整路径
*   在 exec() 调用和脚本的其他地方使用音频文件的完整路径

```
exec("/usr/local/bin/lame /path/to/{$tmpname}_o.mp3 -m m -S -f -b 16 --resample 8 /path/to/{$tmpname}.mp3 && /usr/local/bin/lame -S --decode /path/to/{$tmpname}.mp3 {$tmpname}.wav"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-10T20:00:51.127

我找到了一个很好的库来做这件事：[JustWave Project](http://justwave.beotiger.com/index.html) 上面提到的都是真的……

1.  您需要一个可执行库来在服务器端生成 waveimage。此脚本使用 FFMEG
2.  对于缓存，此库使用 SQLite
3.  如果您在实际服务器上没有 FFMEG，您可以在本地生成图像和长度数据，然后上传。
4.  不错的简单输出，包括播放器，颜色可调整。

希望这可以帮助有相同需求的人。

# java - 在本地系统中动态创建 CSV 文件

> ID：14293504
> 
> 赞同：-1
> 
> 时间：2013-01-12T12:52:45.717
> 
> 标签：java, file, file-io

我正在尝试在使用我的应用程序的用户系统中动态创建一个 CSV 文件，以便我可以将数据写入其中，然后将其导入 Excel。

完成应用程序后，我将在服务器系统的 Tomcat 服务器中部署 WAR 文件。我正在尝试使用 System.getProperty("user.home") 在特定路径中创建文件。但是该文件是在部署应用程序的系统（服务器系统）中创建的。

不同的用户将在不同的系统中使用该应用程序，那么如何获取在本地主机系统（用户系统）中创建文件的路径？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-12T12:56:05.247

Tomcat 对打开网页的用户一无所知。Tomcat 正在使用`user.home`那些启动 Tomcat 实例的用户。您应该使用会话创建自定义登录权限，并将您的网站帐户映射到本地系统用户。

# iphone - 从 Nsdocument 目录中删除数据

> ID：14293505
> 
> 赞同：-1
> 
> 时间：2013-01-12T12:52:55.047
> 
> 标签：iphone, ios, objective-c, cocoa-touch

如何删除`NSDocumentDirectory`使用以下代码保存的数据。

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
 NSString *documentsDirectory = [paths objectAtIndex:0];
 NSString *fullFileName2 = [NSString stringWithFormat:@"%@nameArray", documentsDirectory];
 nameArray=[[NSMutableArray alloc]initWithContentsOfFile:fullFileName2];

 [nameArray addObject:nameField.text];
 [nameArray writeToFile:fullFileName2 atomically:NO]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:47:33.030

试试这个 ：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);  

NSString *documentsDirectory = [paths objectAtIndex:0]; 

NSString *fullFileName2 = [NSString stringWithFormat:@"%@nameArray", documentsDirectory]; 

[[NSFileManager defaultManager] removeItemAtPath:fullFileName2 error: NULL]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T05:52:53.613

试试这个，

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
 NSString *documentsDirectory = [paths objectAtIndex:0];
 NSString *fullFileName2 = [nameArray objectAtIndex:0];
 [[NSFileManager defaultManager] removeItemAtPath:fullFileName2 error: NULL]; 
```

# javascript - 带有数组括号定位的对象文字

> ID：14293513
> 
> 赞同：0
> 
> 时间：2013-01-12T12:53:35.963
> 
> 标签：javascript

我将这个对象设为文字，但我不明白 . 之后的数组的右括号定位是什么`active`。为什么我收到缺少括号的错误？

```
 var players = {
            player1 : {
                active : true,
                [
                    {
                        row : 1,
                        square : 1
                    },{
                        row : 2,
                        square : 1
                    },{
                        row : 3,
                        square : 1
                    }
                ]
            }
        }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T12:54:55.560

属性的值`active`可以是布尔值`true`或数组。不可能两者兼而有之。

您需要将其更改为：

```
active : [ ... ] 
```

或者

```
active : true,
somethingElse : [ ... ] 
```

或其他一些有效的数据结构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T12:55:23.927

首先，这不是[JSON](http://json.org)，而是[JavaScript 对象初始化器](http://www.ecma-international.org/ecma-262/5.1/#sec-11.1.5)（有时称为“对象文字”）。

问题出`[`在这里：

```
active: true,
[ 
```

在该值之前您需要一个键。基本形式是`key: value`，其中键是属性的名称（在 JavaScript 中可以是标识符、数字或字符串；在 JSON 中它必须是字符串，并且用双引号而不是单引号）和值是，嗯，价值。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T12:55:25.903

active 设置为 2 个值，`true`并且您的数组。要测试您的 JSON，请使用[http://jsonlint.com/](http://jsonlint.com/)。

# macos - 自动重命名视频文件

> ID：14293519
> 
> 赞同：1
> 
> 时间：2013-01-12T12:54:37.383
> 
> 标签：macos, bash, command-line, file-rename

我有很多要重命名的文件，手动完成它们需要很长时间。它们是视频文件，通常采用这种格式 - “节目名称 - 剧集编号 - 剧集名称”，例如“Breaking Bad - 101 - Pilot”。

我想做的是将“101”部分更改为我自己的“S01E01”约定。我认为在一系列节目中，该字符串的唯一顺序部分是最后一个数字，即。S01E01、S01E02、S01E03、S01E04 等...

谁能给我关于如何在 Mac OS X 上的终端上执行此操作的建议。我相信使用 Automator 或其他批量重命名程序太复杂了...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-23T03:24:49.527

以下脚本将查找所有 .mp4 文件，其中包含一串 3 个连续数字。例如 something.111.mp4 。它会将其转换为 something.S01E11.mp4 。它还将排除任何示例文件。

```
find . ! -name "*sample*" -name '*.[0-9][0-9][0-9].*.mp4' -type f | while read filename; do mv -v "${filename}" "`echo $filename | sed -e 's/[0-9]/S0&E/;s/SS00E/S0/g'`";done; 
```

与之前的脚本一样，它仅在少于 10 个季节时才有效。

对于那些试图为其当前目录树进行个性化的人，我建议学习 sed 和 find 命令。它们非常强大、简单，并且允许您替换文件名中的任何字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-23T05:16:42.357

以下解决方案：

*   适用于 3 位数和 4 位数季节+剧集说明符（例如`107`第 1 季第 7 集或`1002`第 10 季第 2 集）
*   展示先进`find`的`bash`技术，例如：
    *   `-regex`主要通过正则表达式匹配文件名（而不是通配符模式，如`-name`）
    *   `execdir`在与每个匹配文件相同的目录中执行命令（其中仅`{}`包含匹配的文件*名* ）
    *   调用一个临时脚本，该脚本演示与通过内置变量报告的组的`bash`正则表达式匹配和捕获；命令替换 ( ) 用零填充一个值；变量扩展以提取子字符串 ( )。`=~``${BASH_REMATCH[@]}``$(...)``${var:n[:m]}`

```
# The regular expression for matching filenames (without paths) of interest:
# Note that the regex is partitioned into 3 capture groups 
# (parenthesized subexpressions) that span the entire filename: 
#  - everything BEFORE the season+episode specifier
#  - the season+episode specifier,
#  - everything AFTER.
# The ^ and $ anchors are NOT included, because they're supplied below.
fnameRegex='(.+ - )([0-9]{3,4})( - .+)'

# Find all files of interest in the current directory's subtree (`.`)
# and rename them. Replace `.` with the directory of interest.
# As is, the command will simply ECHO the `mv` (rename) commands.
# To perform the actual renaming, remove the `echo`.
find -E . \
 -type f -regex ".+/${fnameRegex}\$" \
 -execdir bash -c \
   '[[ "{}" =~ ^'"$fnameRegex"'$ ]]; se=$(printf "%04s" "${BASH_REMATCH[2]}");
   echo mv -v "{}" "${BASH_REMATCH[1]}S${se:0:2}E${se:2}${BASH_REMATCH[3]}"' \; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T13:38:12.530

```
for FOO in *; do mv "$FOO" "`echo $FOO | sed 's/\([^-]*\) - \([0-9]\)\([0-9][0-9]\)\(.*\)/\1 - S0\2E\3\4/g'`" ; done 
```

如果季节少于 10 个，则此方法有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-29T08:19:16.307

使用`perl` `rename`可以轻松处理适当填充并适用于任意数量的季节和剧集的实现（<100，但可以轻松适应您当前的格式）：

```
$ ls -1 *.avi
My Show - 0301 - Qux.avi
My Show - 101 - Foo.avi
My Show - 102 - Bar.avi
My Show - 1102 - Blah.avi
My Show - 201 - Quux.avi

$ rename -n 's/- (\d+)(\d{2,}) -/sprintf("- S%02dE%02d -", $1, $2)/e' *.avi
My Show - 0301 - Qux.avi renamed as My Show - S03E01 - Qux.avi
My Show - 101 - Foo.avi renamed as My Show - S01E01 - Foo.avi
My Show - 102 - Bar.avi renamed as My Show - S01E02 - Bar.avi
My Show - 1102 - Blah.avi renamed as My Show - S11E02 - Blah.avi
My Show - 201 - Quux.avi renamed as My Show - S02E01 - Quux.avi 
```

我认为[`homebrew`](http://brew.sh/)附带了正确的版本，所以只需通过安装即可

```
$ brew install rename 
```

# functional-programming - TypeRex 是否支持 OCaml 4.00.1？

> ID：14293523
> 
> 赞同：3
> 
> 时间：2013-01-12T12:54:53.283
> 
> 标签：functional-programming, ocaml, typerex

嗨，我想使用 TypeRex，但它说

```
$ ./configure 
checking for ocamlc... ocamlc
OCaml version is 4.00.1
OCaml library path is /usr/local/lib/ocaml
checking for ocamlopt... ocamlopt
checking for ocamlc.opt... ocamlc.opt
checking for ocamlopt.opt... ocamlopt.opt
checking for ocaml... ocaml
checking for ocamldep.opt... ocamldep.opt
checking for ocamlmktop... ocamlmktop
checking for ocamlmklib... ocamlmklib
checking for ocamldoc... ocamldoc
checking for ocamlbuild... ocamlbuild
checking for camlp4... camlp4
checking for camlp4boot... camlp4boot
checking for camlp4o... camlp4o
checking for camlp4of... camlp4of
checking for camlp4oof... camlp4oof
checking for camlp4orf... camlp4orf
checking for camlp4prof... camlp4prof
checking for camlp4r... camlp4r
checking for camlp4rf... camlp4rf
configure: error: Your version of OCaml: 4.00.1 is not supported 
```

**TypeRex 是否支持 OCaml 4.00.1？**

* * *

我进一步关注了这个页面[http://www.typerex.org/manual-setup.html](http://www.typerex.org/manual-setup.html)

我用了这个命令

```
$./configure --disable-version-check EMACS=aquamacs 
```

它没有抱怨，但在我使用之后

```
$ make 
```

它说

```
mkdir -p ./_obuild
ocamlc -o ./_obuild/unixrun -make-runtime unix.cma
ld: library not found for -lcrt1.10.6.o
collect2: ld returned 1 exit status
File "_none_", line 1:
Error: Error while building custom runtime system
make: *** [_obuild/unixrun] Error 2 
```

**任何人都可以帮助我吗？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T22:50:21.547

Typerex[不能](https://github.com/OCamlPro/typerex/issues/59)与 OCaml 4.00.X 一起使用（按照讨论）。您将不得不等待，“[它没有死，它只是睡了一会儿](https://sympa.inria.fr/sympa/arc/caml-list/2012-12/msg00148.html)”。

# java - 如何在Java程序中制作“页面”

> ID：14293525
> 
> 赞同：-2
> 
> 时间：2013-01-12T12:55:14.767
> 
> 标签：java, user-interface

我有个问题。

我刚开始使用 Java，可能有一些小的基本知识。现在我想知道程序中的一种页面（部分）是如何制作的。我不是指某种选项卡式面板，或者如果您单击一个文本可见的按钮。

我的意思是，例如在整个屏幕上，程序的一个单独部分看起来。作为游戏的主菜单。除了当时可见的主菜单外，别无其他。例如，如果您单击该菜单中的按钮。游戏正在加载。（我以构建标准游戏为例）如果您例如在主菜单中单击另一个按钮（例如“设置”）然后可以看到麦汁设置“页面”，并且程序没有其他内容真的在做。我不知道如何调用这种类型的导航。但几乎每个程序都有一些东西。我该怎么做呢？例如，我应该做什么，作为一个新文件，导入特定页面的类，或者什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T12:57:45.170

您似乎正在寻找[`CardLayout`](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html). 如图所示[。](https://stackoverflow.com/questions/5665156/calling-awt-frame-methods-from-subclass/5786005#5786005)

![游戏视图](../Images/3e84734e45f9ce4d8da39f4e7796ef42.png) ![高分视图](../Images/108a81166d0c089a8de60cdb6ed2908a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T13:09:27.620

我认为您应该寻找“状态机”，这是一种结构化代码的方式，并在 JFrame 中实现您的菜单更改摆动组件（例如 JPanel）。如果我明白你想要什么，我认为这是一个选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T12:57:51.297

没有简短的答案，但根据您的问题，您需要大量阅读。我建议使用[swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/)，它解释了面板、框架、布局管理器和其他容器的使用。

您还可以在 netbeans 中使用 Matisse builder（eclipse 中的相关插件）

# android - 单击OFF按钮时如何停止声音

> ID：14293529
> 
> 赞同：0
> 
> 时间：2013-01-12T12:55:53.253
> 
> 标签：android, eclipse

```
package net.androidbootcamp.guessinggame;

import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class setting extends Activity {
@Override
public void onCreate (Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.settings);

Button s =(Button) findViewById(R.id.btnons);
s.setOnClickListener(new OnClickListener(){

public void onClick(View v) {

MediaPlayer mp = MediaPlayer.create(setting.this,R.raw.meow);
mp.start();

                }

    });

Button ss =(Button) findViewById(R.id.btnoffs);
ss.setOnClickListener(new OnClickListener(){ 
```

如何对关闭按钮进行编码。这是我的打开按钮代码。我不知道如何在单击另一个按钮（关闭）时停止声音。

```
 I have two buttons, the ON and OFF button,a normal game settings of sound. 
```

我不知道接下来会发生什么。每次单击OFF按钮时，我都想停止停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:05:01.220

这可能足以处理`MediaPlayer`代码中的存在：

```
package net.androidbootcamp.guessinggame;

import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class setting extends Activity {
    private MediaPlayer mediaPlayer;

    @Override
    public void onCreate (Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.settings);

        Button s =(Button) findViewById(R.id.btnons);
        s.setOnClickListener(
            new OnClickListener(){
                @Override
                public void onClick(View v) {
                    startMediaPlayer();
                }
            }
        );

        Button ss =(Button) findViewById(R.id.btnoffs);
        ss.setOnClickListener(
            new OnClickListener(){ 
                @Override
                public void onClick(View v) {
                    stopMediaPlayer();
                }
            }
        );
    }

     private void startMediaPlayer() {
        mediaPlayer = MediaPlayer.create(setting.this,R.raw.meow);
        mediaPlayer.start();
    }

    private void stopMediaPlayer() {
        if( mediaPlayer != null ) {
            mp.stop();
            mp.release();
        }
    }
} 
```

对您的代码的更改： `mp`现在是该类的成员`setting`，称为`mediaPlayer`. 以前，您很难尝试`mp`在“关闭按钮”的范围内工作`OnClickListener`，但现在已经解决了。还使用空检查将代码包装起来`stopMediaPlayer()`以避免`NullPointerException`.

# php - 在选择框codeigniter中动态获取数据

> ID：14293538
> 
> 赞同：0
> 
> 时间：2013-01-12T12:57:21.113
> 
> 标签：php, javascript, jquery, ajax, codeigniter

我有两个选择框，如果我选择一个选项，它将根据选项给我结果，然后结果将显示在第二个选择框中。我怎样才能做到这一点？我想，我必须做一个`onchange`函数，但我不知道如何从 JavaScript 中的控制器获取数据。

```
class StockInController extends MY_Controller {
    function index(){
        $data['main_content'] = 'stockInView';

        $this->load->model('supplierModel');
        $query = $this->supplierModel->getAllSuppliers();

        if ($query){
            $data['records1'] = $query; 
        } 

        $this->load->model('categoryModel');
        $query = $this->categoryModel->getAllCategories();

        if ($query){
            $data['records2'] = $query;
        }

        $this->load->model('itemsModel');
        $query = $this->itemsModel->getAllItems();

        if ($query){
            $data['records3'] = $query;

        }
        $this->load->view('dashboardTemplate/template',$data); 
    }

    function addStockIn(){
        //getting parameters from view 
        $data = array(
            'item_name' => $this->input->post('item_name'),
            'cat_id' => $this->input->post('cat_id')        
        );

        //$is_ajax = $this->input->post('ajax'); //or use this line
        //$this->input->is_ajax_request();

        $result = array();
        $this->load->model('stockInModel'); 
        $query = $this->stockInModel->addStocktoDB($data);

        if ($query){  //&& any other condition
            $result['res'] = 1;//process successful - replace 1 with any message
        } else {
            $result['res'] = 0;//process failed - replace 0 with any message
        }
        echo json_encode($result);//at the end of the function.
    }
} 
```

这是视图：

```
<div class="control-group">
    <label for="selsear" class="control-label">Select a Category</label>
    <div class="controls">
         <select name="select1" id="seslsear" class='cho'>
            <option id = "y" value="0">--Select--</option>
            <?php foreach($records2 as $r) { ?>
            <option value="<?=$r->cat_id?>"><?=$r->cat_name?></option>
            <?php } ?>
        </select>
    </div>
</div>

<div class="control-group">
    <label for="selsear" class="control-label">Select an item</label>
    <div class="controls">
        <select name="select1" id="selsear" class='cho'>
            <option id = "y" value="0">--Select--</option>
            <?php foreach($records3 as $r) { ?>
            <option value="<?=$r->item_id?>"><?=$r->item_name?></option>
            <?php } ?>
        </select>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-12T13:22:37.670

您将不得不编写一个函数来更改选择框和提要数据以成功实现 ajax

```
$('#selsear').change(function() {

 var form_data = {
    item_name: $('#item_name').val(),
    cat_id: $('#selsear').val()
 };

$.ajax({
       url:'controller_name/function_name',
       data:form_data,    
       datatype:'application/json',
       success:function(data){
           $.each(data,function(i){
                          htmlString="<option value='"+data[i]['item_id']+"'>'"+data[i]['item_name']+"'</option>"
           });
           $("#selsear").html(htmlString);
       }
}); 
```

控制器函数名称是从控制器检索数据的函数的名称。

我希望这能帮到您！

# c# - 通过属性注入 Autofac 构造函数

> ID：14293540
> 
> 赞同：2
> 
> 时间：2013-01-12T12:57:26.917
> 
> 标签：c#, dependency-injection, attributes, inversion-of-control, autofac

我有一个类当前需要一个`IIndex`以选择索引依赖项。我想将其更改为以某种方式使用构造函数参数上的属性，以便直接指定要使用的属性。

我很确定 Autofac 本身不支持这个，但我不害怕为此编写我自己的属性。我之前在 Autofac 的源代码端（自定义注册源等）搞砸了，但我从未见过定制注入端的方法。任何人都可以帮忙吗？

PS：我看过[这个问题](https://stackoverflow.com/questions/2477613/resolve-dependency-with-autofac-based-on-constructor-parameter-attribute)，但它变成了关于基于属性注入的好处的讨论。OTOH，我已经决定我不想手动注册每个依赖于这个特定依赖项的类型，所以我更喜欢它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-28T12:56:40.387

You can achieve this by scanning your class metadata on resolving an interface. When you get info about its parameters you can resolve actual implementation of the interface. See my answer [here](https://stackoverflow.com/a/19056430/974487).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T02:58:56.687

我注意到[http://code.google.com/p/autofac/wiki/WebFormsIntegration](http://code.google.com/p/autofac/wiki/WebFormsIntegration)说我们可以通过实现 IInjectionBehaviour 创建自定义依赖注入模型，我认为值得一试。

# spring-roo - Spring Roo jspx 标记 - 表中指向您自己的 URL 的列

> ID：14293542
> 
> 赞同：3
> 
> 时间：2013-01-12T12:57:51.093
> 
> 标签：spring-roo, jspx

我需要向 Roo 表添加一列，将用户指向另一个 URL。例如，您可以使用 update="true" 设置带有删除和更新按钮的列，但我想要另一个带有我自己 URL 的按钮。

我看到 table:table 和 table:column 标签是内置在默认脚手架中的。

我查看了添加 table:simple 和 table:display 标签，但无法让它们工作。

如何在 Roo 表中添加一列，在该表中定义自己的 URL（嵌入行的 id）和图像？

格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:15:53.580

添加自定义列标签并不容易，因为列标签实际上并不呈现值，它们只是告诉表格应该呈现哪些列，而表格标签进行实际呈现。

因此，最简单的方法是修改table标签如下：

*   将 table.tagx 复制到 tableCustom.tagx
*   根据“更新”列向 tableCustom 添加额外的自定义列
*   修改任何需要使用此新列的视图以使用 tableCustom

复制标签的原因是它允许您在新版本的 spring roo 发布时更新 roo 标签，而不会丢失您的更改。

# ios - iOS Monotouch - 如何在 ViewDidLoad() 之前设置 Frame？

> ID：14293548
> 
> 赞同：2
> 
> 时间：2013-01-12T12:58:09.553
> 
> 标签：ios, uiview, uiviewcontroller, xamarin.ios

是否可以在 UIViewController 中的 ViewDidLoad() 之前设置 Frame？

目前，我在构造函数中这样做：

```
View.Frame = _frame; 
```

问题是这个调用首先会自动触发 ViewDidLoad() 函数。在 ViewDidLoad() 中，我将子视图放置在“View.Frame”属性上。

但是这个属性只有在 ViewDidLoad() 完成后才会改变。所以基本上“View.Frame = _frame;” 首先使用旧的“Frame”值触发“ViewDidLoad()”，然后才更改属性。

我可以通过首先将一个类变量分配给“_frame”并在“ViewDidLoad()”中使用它来解决这个问题，但我想看看是否有另一种解决方案，以及我是否在这里遗漏了一些东西。（我也错过了这个流程背后的想法）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:02:58.713

这是 iOS 上的常见情况，我会说你为你的构造函数做正确的事情。在属性上调用 getter`View`将加载视图，因此它们提供了一个`IsViewLoaded`属性来检查这一点。

如果它不是你在框架中传递的构造函数，你也可以在你的控制器中做这样的事情：

```
public void SetFrame(Frame frame)
{
    if (IsViewLoaded) {
        View.Frame = frame;
    else {
        _frame = frame;
    }
} 
```

由于这种情况，可能值得考虑您的设计。我不知道全部情况，但是您的控制器可以`Frame`在班级内决定吗？也许您可以传递另一个值 in 让您对`Frame`in进行数学运算`ViewDidLoad`，这会更好地匹配 Apple 的模式。

# excel - 当我按下按钮时，Excel VBA 文本框重置为 0

> ID：14293553
> 
> 赞同：0
> 
> 时间：2013-01-12T12:58:26.607
> 
> 标签：excel, vba, button, textbox, userform

我有一个带有 2 个文本框、2 个标签和一个登录按钮的用户表单。

在我的 excel 表上，我有一个带有 id、name、pin 和 balance 的数据库。

问题是每当我单击登录按钮时，我的 ID 文本框会将其值重置为 0，但我的 pin 文本框工作正常！

我将粘贴我的完整代码：

```
Dim ID As Integer
Dim PIN As Integer
Dim PINField As String
Dim Balance As Double
Dim Attempts As Integer
Dim BalanceField As String

Private Sub btnLogin_Click()
    txtID.Text = ID
    Call SetId
    Call Authenticate
End Sub

Sub Authenticate()
    If txtPin.Text = PIN Then
        Call Welcome
    ElseIf Attempts > 3 Then
        Call Bye
    Else
        lblWelcome.Caption = "Wrong Pin"
        lblWelcome.ForeColor = RGB(255, 0, 0)
        Attempts = Attempts + 1
    End If
End Sub

Sub SetId()
    PINField = "C" & Str(ID)
    PINField = Replace(PINField, " ", "")
    MsgBox (PINField)
    BalanceField = "D" & Str(ID)
    BalanceField = Replace(BalanceField, " ", "")
    MsgBox (BalanceField)
End Sub

Sub Welcome()
    MsgBox ("Login Successful. Welcome")
End Sub

Sub Bye()
    MsgBox ("Max Pin Attempts reached. Contact Your Bank")
    Unload frmLogin
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:37:40.167

这样做的原因是因为您使用的变量没有值。因为它是一个`Integer`它返回0。

我猜你可能真的想要`ID = txtID.Text`- 也就是说，获取 txtID 文本框的值并将值存储在 ID 变量中。

这可能会出错，因为`Text`文本框的属性是字符串。您将需要使用`ID = CInt(txtID.Text)`. 您还应该进行一些检查以确保 txtID.Text 在分配之前计算为整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:40:19.987

请确保`reset`您在此处未显示的代码中的任何地方都没有 txtID。查看您的代码，它没有说明您如何将值设置`ID`为`PIN`...`PIN`

尼克指出的情况可能是这种情况，因为这是一个允许人们进入并且..然后您将其与 .. 进行比较的`Form`情况。但是你在比较什么？正如您所说，您在工作表中有一种数据库类型的结构。你需要评估和使用它。`textboxes``ID``PIN``PIN``ID``PIN`

这是我为您的工作表提供的可视化，*这是我最好的盲目猜测：*

用户需要通过表单输入一个值到`txtID`. 该数字实际上是包含相关的`cell number`for 列。然后将该 PIN 与 txtPIN 值进行比较。接下来根据该返回from 列。`C``PIN``balance``D``PIN`

尝试这个：

```
Private Sub btnLogin_Click()
    If txtID.Text <> "" Or txtID.value > 0 or txtPIN.Text <> "" Then
      ID = CInt(txtID.Text)
      Call SetID
      Call Authentication
    Else
      MsgBox "ID and PIN" can't be empty!"
    End If
End Sub

Sub Authenticate()
    If CInt(txtPin.Text) = PIN Then '-- here
        Call Welcome
        '-- idealy Blance can be shown at this point... 
    ElseIf Attempts > 3 Then
        Call Bye
    Else
        lblWelcome.Caption = "Wrong Pin"
        lblWelcome.ForeColor = RGB(255, 0, 0)
        Attempts = Attempts + 1
    End If
End Sub   

Sub SetId()       
      PIN = CInt(Trim(Sheets(1).Range("C" & ID).value))
      '-- NOT sure why you are showing this PIN here since you want to authenticate...?
      MsgBox PIN
      BalanceField = Sheets(1).Range("D" & ID).value  
      BalanceField = Trim(BalanceField) '--here
      '-- doesn't make sense to show Balance before authentication... 
      MsgBox BalanceField        
End Sub 
```

* * *

*   [`Trim`比 更清晰、更快`Replace`。](http://exceluser.com/blog/797/excels-clean-function-is-more-powerful-than-you-think.html).

# c# - 从 API 控制器调用自定义方法

> ID：14293554
> 
> 赞同：1
> 
> 时间：2013-01-12T12:58:40.807
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

我想在我的 Web API 控制器中创建一个自定义方法，因此我可以通过一个参数而不是只返回所有数据，例如我的控制器称为 StandingController，我想创建一个名为 GetStandingsBySeason(string season) 的方法。我已将 WebApiConfig 更改为如下所示：

```
config.Routes.MapHttpRoute(
            "DefaultApi",
            "api/{controller}/{id}",
            new { id = RouteParameter.Optional }
        );

        config.Routes.MapHttpRoute(
            "DefaultApiWithAction",
            "api/{controller}/{action}/{id}",
            new { id = RouteParameter.Optional }
        ); 
```

这是我的控制器中的方法：

```
public IEnumerable<StandingDTO> GetStandingsBySeason(string season)
    {
        return _repository.GetStandingsBySeason(season).Select(Mapper.Map<StandingDTO>);
    } 
```

在我的前端，我这样称呼它：

```
$.getJSON("/api/standing/GetStandingsBySeason/2011", self.standings); 
```

但是该方法永远不会被调用，任何人都可以阐明我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:17:59.793

看起来您的配置错误：您的模板是

```
"api/{controller}/{action}/{id}" 
```

但是该方法获取了名为season的参数，因此您可以通过以下方式调用它：

```
$.getJSON("/api/standing/GetStandingsBySeason?season=2011", self.standings); 
```

或者您可以将路由模板修改为

```
"api/{controller}/{action}/{season}" 
```

# opencv - Eclipse Open CV 应用程序构建错误？

> ID：14293558
> 
> 赞同：0
> 
> 时间：2013-01-12T12:59:08.977
> 
> 标签：opencv, android-ndk

我将在 Eclipse 中构建我的 Open CV 项目（C++），但它在**makefile**中出现错误，错误是

```
 recipe for target `Open_CV.exe' failed 
```

我还成功地将lib和opencv包含在项目中，但我不知道为什么会出现此错误，有时我的**子目录**文件中也会出现错误

和错误日志是：

****为项目 Open_CV 构建配置调试 ******

 **生成所有构建文件：../src/Open_CV.c 调用：跨 GCC 编译器 gcc -I"C:\OpenCV2.0\include\opencv" -O0 -g3 -Wall -c -fmessage-length=0 -MMD - MP -MF"src/Open_CV.d" -MT"src/Open_CV.d" -o"src/Open_CV.o" "../src/Open_CV.c" 在 C:/OpenCV2.0/include 包含的文件中/opencv/cv.h:1612, 来自 ../src/Open_CV.c:8: C:/OpenCV2.0/include/opencv/cvcompat.h: 在函数中`cvMinAreaRect': C:/OpenCV2.0/include/opencv/cvcompat.h:425: warning: left-hand operand of comma expression has no effect C:/OpenCV2.0/include/opencv/cvcompat.h:425: warning: left-hand operand of comma expression has no effect C:/OpenCV2.0/include/opencv/cvcompat.h:425: warning: left-hand operand of comma expression has no effect C:/OpenCV2.0/include/opencv/cvcompat.h:425: warning: statement with no effect ../src/Open_CV.c: In function`main'：../src/Open_CV.c:20：警告：函数“printf”的隐式声明../src/Open_CV.c：顶层：C：/OpenCV2.0/include/opencv/cxtypes.h :249: 警告: 'cvFloor' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxtypes.h:267: 警告: 'cvCeil' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxtypes .h:287: 警告: 'cvIsNaN' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxtypes.h:302: 警告: 'cvIsInf' 已定义但未使用 C:/OpenCV2.0/include/opencv /cxtypes.h:321: 警告: 'cvRNG' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxtypes.h:337: 警告: 'cvRandReal' 已定义但未使用 C:/OpenCV2.0/include /opencv/cxtypes.h:670：警告：“cvmGet”已定义但未使用 C:/OpenCV2.0/include/opencv/cxtypes.h:705：警告：“cvIplDepth”已定义但未使用 C:/OpenCV2。0/include/opencv/cxtypes.h:880: 警告: 'cvRectToROI' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxtypes.h:893: 警告: 'cvROIToRect' 已定义但未使用 C:/ OpenCV2.0/include/opencv/cxtypes.h:914: 警告: 'cvTermCriteria' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxtypes.h:936: 警告: 'cvPoint' 已定义但未使用 C :/OpenCV2.0/include/opencv/cxtypes.h:966: 警告: 'cvPointTo32f' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxtypes.h:991: 警告: 'cvPoint3D32f' 已定义但未使用使用 C:/OpenCV2.0/include/opencv/cxtypes.h:1011: 警告: 'cvPoint2D64f' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxtypes.h:1031: 警告: 'cvPoint3D64f' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxtypes.h:1052：警告：“cvSize”已定义但未使用 C:/OpenCV2。0/include/opencv/cxtypes.h:1070: 警告: 'cvSize2D32f' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxtypes.h:1146: 警告: 'cvRealScalar' 已定义但未使用 C:/ OpenCV2.0/include/opencv/cxtypes.h:1154: 警告: 'cvScalarAll' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxtypes.h:1666: 警告: 'cvAttrList' 已定义但未使用 C :/OpenCV2.0/include/opencv/cxcore.h:153: 警告: 'cvDecRefData' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxcore.h:174: 警告: 'cvIncRefData' 已定义但未使用使用 C:/OpenCV2.0/include/opencv/cxcore.h:208: 警告: 'cvGetRow' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxcore.h:219: 警告: 'cvGetCol' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxcore.h:248: 警告：'cvReleaseMatND' 已定义但未使用 C:/OpenCV2。0/include/opencv/cxcore.h:271: 警告: 'cvGetNextSparseNode' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxcore.h:522: 警告: 'cvSubS' 已定义但未使用 C:/ OpenCV2.0/include/opencv/cxcore.h:1083: 警告: 'cvCloneSeq' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxcore.h:1126: 警告: 'cvSetNew' 已定义但未使用 C :/OpenCV2.0/include/opencv/cxcore.h:1141: 警告: 'cvSetRemoveByPtr' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxcore.h:1156: 警告: 'cvGetSetElem' 已定义但未使用使用 C:/OpenCV2.0/include/opencv/cxcore.h:1323: 警告: 'cvEllipseBox' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxcore.h:1414: 警告: 'cvFont' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxcore.h:1672: 警告：'cvReadIntByName' 已定义但未使用 C:/OpenCV2。0/include/opencv/cxcore.h:1687: 警告: 'cvReadRealByName' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxcore.h:1701: 警告: 'cvReadStringByName' 已定义但未使用 C:/ OpenCV2.0/include/opencv/cxcore.h:1713：警告：“cvReadByName”已定义但未使用 C:/OpenCV2.0/include/opencv/cxmisc.h:222：警告：“cvAlignPtr”已定义但未使用 C :/OpenCV2.0/include/opencv/cxmisc.h:228: 警告: 'cvAlign' 已定义但未使用 C:/OpenCV2.0/include/opencv/cxmisc.h:234: 警告: 'cvGetMatSize' 已定义但未使用使用 C:/OpenCV2.0/include/opencv/cv.h:635: 警告: 'cvCreateSubdivDelaunay2D' 已定义但未使用 C:/OpenCV2.0/include/opencv/cv.h:670: 警告: 'cvSubdiv2DNextEdge' 已定义但未使用 C:/OpenCV2.0/include/opencv/cv.h:676: 警告：'cvSubdiv2DRotateEdge'已定义但未使用 C:/OpenCV2.0/include/opencv/cv.h:681: 警告: 'cvSubdiv2DSymEdge' 已定义但未使用 C:/OpenCV2.0/include/opencv/cv.h:686: 警告: ' cvSubdiv2DGetEdge' 已定义但未使用 C:/OpenCV2.0/include/opencv/cv.h:694: 警告: 'cvSubdiv2DEdgeOrg' 已定义但未使用 C:/OpenCV2.0/include/opencv/cv.h:701: 警告: 'cvSubdiv2DEdgeDst' 已定义但未使用 C:/OpenCV2.0/include/opencv/cv.h:708: 警告: 'cvTriangleArea' 已定义但未使用 C:/OpenCV2.0/include/opencv/cv.h:892 : 警告: 'cvCalcHist' 已定义但未使用 C:/OpenCV2.0/include/opencv/cv.h:1136: 警告: 'cvSURFPoint' 已定义但未使用 C:/OpenCV2.0/include/opencv/cv.h :1207: 警告: 'cvStarKeypoint' 已定义但未使用 C:/OpenCV2.0/include/opencv/cv.h:1231: 警告: 'cvStarDetectorParams'已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:112: 警告: 'cvMatArray' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:127: 警告: ' cvMean' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:134: 警告: 'cvSumPixels' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:141: 警告: 'cvMean_StdDev' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:154: 警告: 'cvmPerspectiveProject' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:165 : 警告: 'cvFillImage' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:216: 警告: 'cvRandInit' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h :249: 警告: 'cvbRand' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:257: 警告: 'cvbCartToPolar' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:273: 警告: 'cvbFastArctan' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:286: 警告: 'cvbSqrt' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:296: 警告: 'cvbInvSqrt' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:306 : 警告: 'cvbReciprocal' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:316: 警告: 'cvbFastExp' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h :324: 警告: 'cvbFastLog' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:332: 警告: 'cvContourBoundingRect' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat .h:338: 警告: 'cvPseudoInverse' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:385: 警告: 'cvConvexHull' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:413: 警告: 'cvMinAreaRect' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat。 h:434: 警告: 'cvFitLine3D' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:444: 警告: 'cvFitLine2D' 已定义但未使用 C:/OpenCV2.0/include/opencv/ cvcompat.h:453: 警告: 'cvFitEllipse' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:464: 警告: 'cvProject3D' 已定义但未使用 C:/OpenCV2.0/include/ opencv/cvcompat.h:506: 警告: 'cvHoughLines' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:519: 警告: 'cvHoughLinesP' 已定义但未使用 C:/OpenCV2.0/包括/opencv/cvcompat.h:531：警告：“cvHoughLinesSDiv”已定义但未使用 C:/OpenCV2。0/include/opencv/cvcompat.h:543: 警告: 'cvFindFundamentalMatrix' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:577: 警告: 'cvFindChessBoardCornerGuesses' 已定义但未使用 C:/ OpenCV2.0/include/opencv/cvcompat.h:588: 警告: 'cvCalibrateCamera' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:613: 警告: 'cvCalibrateCamera_64d' 已定义但未使用 C :/OpenCV2.0/include/opencv/cvcompat.h:642: 警告: 'cvFindExtrinsicCameraParams' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:667: 警告: 'cvFindExtrinsicCameraParams_64d' 已定义但未使用使用 C:/OpenCV2.0/include/opencv/cvcompat.h:693: 警告: 'cvRodrigues' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:711: 警告: 'cvProjectPoints' 已定义但未使用 C:/OpenCV2。0/include/opencv/cvcompat.h:740: 警告: 'cvProjectPointsSimple' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:771: 警告: 'cvUnDistortInit' 已定义但未使用 C:/ OpenCV2.0/include/opencv/cvcompat.h:786: 警告: 'cvUnDistort' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:804: 警告: 'cvCalcEMD' 已定义但未使用 C :/OpenCV2.0/include/opencv/cvcompat.h:815: 警告: 'cvKMeans' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:829: 警告: 'cvStartScanGraph' 已定义但未使用使用 C:/OpenCV2.0/include/opencv/cvcompat.h:842: 警告: 'cvEndScanGraph' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:862: 警告: 'cvLineAA' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:868: 警告：'cvCircleAA'已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:876: 警告: 'cvEllipseAA' 已定义但未使用 C:/OpenCV2.0/include/opencv/cvcompat.h:883: 警告: ' cvPolyLineAA' 已定义但未使用已完成构建：../src/Open_CV.c

构建目标：Open_CV.exe 调用：Cross GCC Linker gcc -L"C:\OpenCV2.0\lib" -o"Open_CV.exe" ./src/Open_CV.o -lcv200 -lhighgui200 ./src/Open_CV.o:在函数`cvDecRefData': C:/OpenCV2.0/include/opencv/cxcore.h:159: undefined reference to`*cvFree* ' C:/OpenCV2.0/include/opencv/cxcore.h:167: 未定义对`_cvFree_' ./src/Open_CV.o: In function`cvGetRow 的引用': C:/OpenCV2.0/include/opencv/cxcore.h:209: 未定义对`_cvGetRows' ./src/Open_CV.o: In function`cvGetCol' 的引用： C:/OpenCV2.0/include/opencv/cxcore.h:220: 未定义对`_cvGetCols' ./src/Open_CV.o: In function`cvReleaseMatND' 的引用：C:/OpenCV2.0/include/opencv/cxcore.h:249: 未定义对`_cvReleaseMat' ./src/Open_CV.o: In function`cvSubS' 的引用：C:/OpenCV2 .0/include/opencv/cxcore.h:523：未定义对`_cvAddS' ./src/Open_CV.o: In function`cvCloneSeq 的引用：C:/OpenCV2.0/include/opencv/cxcore.h:1084：未定义对`_cvSeqSlice' ./src/Open_CV.o: In function`cvSetNew 的引用：C:/OpenCV2.0/include /opencv/cxcore.h:1135：未定义的引用`_cvSetAdd' ./src/Open_CV.o: In function`cvGetSetElem': C:/OpenCV2.0/include/opencv/cxcore.h:1157: 未定义引用`_cvGetSeqElem' ./src/Open_CV.o: In function`cvEllipseBox': C:/OpenCV2.0/include/opencv/cxcore.h:1328: 未定义引用`_cvEllipse' ./src/Open_CV.o: In function`cvFont': C :/OpenCV2.0/include/opencv/cxcore.h:1416: 未定义对`_cvInitFont' ./src/Open_CV.o: In function`cvReadIntByName' 的引用：C:/OpenCV2.0/include/opencv/cxcore.h:1673: 未定义对`_cvGetFileNodeByName' ./src/Open_CV.o: In function`cvReadRealByName' 的引用：C:/OpenCV2。 0/include/opencv/cxcore.h:1688：未定义对`_cvGetFileNodeByName' ./src/Open_CV.o: In function`cvReadStringByName 的引用：C:/OpenCV2.0/include/opencv/cxcore.h:1702：未定义对`_cvGetFileNodeByName' ./src/Open_CV.o: In function`cvReadByName 的引用：C:/OpenCV2.0/include/ opencv/cxcore.h:1714: 未定义引用`_cvGetFileNodeByName' C:/OpenCV2.0/include/opencv/cxcore.h:1714: undefined reference to`_cvRead' ./src/Open_CV.o: 在函数`cvMean': C:/OpenCV2.0/include/opencv/cvcompat.h:128: undefined reference to`_cvAvg' ./src/Open_CV.o: 在函数`cvSumPixels': C:/OpenCV2.0/include/opencv/cvcompat.h:135: undefined reference to`_cvSum' ./src/Open_CV.o: 在函数中`cvMean_StdDev': C:/OpenCV2.0/include/opencv/cvcompat.h:143: undefined reference to`_cvAvgSdv' ./src/Open_CV.o: 在函数`cvmPerspectiveProject': C:/OpenCV2.0/include/opencv/cvcompat.h:157: undefined reference to`_cvReshape' C:/OpenCV2.0/include/opencv/cvcompat.h:158: 未定义引用`_cvReshape' C:/OpenCV2.0/include/opencv/cvcompat.h:160: undefined reference to`_cvPerspectiveTransform' ./src/Open_CV.o: 在函数`cvFillImage': C:/OpenCV2.0/include/opencv/cvcompat.h:166: undefined reference to`_cvGetElemType' C: /OpenCV2.0/include/opencv/cvcompat.h:166: 未定义对`_cvColorToScalar' C:/OpenCV2.0/include/opencv/cvcompat.h:166: undefined reference to`_cvSet' 的引用。/src/Open_CV.o: 在函数`cvRandSetRange': C:/OpenCV2.0/include/opencv/cvcompat.h:188: undefined reference to`_cvError' C:/OpenCV2.0/include/opencv/cvcompat.h:194: 未定义对`_cvError' ./src/Open_CV.o: In function`cvRandInit' 的引用：C:/OpenCV2.0/include/opencv/cvcompat.h:219: 未定义对`_cvError' C:/OpenCV2.0/include/opencv/cvcompat.h:225: undefined reference to`_cvError' 的引用。/src/Open_CV.o: 在函数`cvRand': C:/OpenCV2.0/include/opencv/cvcompat.h:240: undefined reference to`_cvError' C:/OpenCV2.0/include/opencv/ cvcompat.h:243: 未定义的对`_cvRandArr' ./src/Open_CV.o: In function`cvbCartToPolar' 的引用：C:/OpenCV2.0/include/opencv/cvcompat.h:267: 未定义的引用`_cvCartToPolar' ./src/Open_CV.o: In function`cvbFastArctan': C:/OpenCV2.0/include/opencv/cvcompat.h:281: 未定义对`_cvCartToPolar' ./src/Open_CV.o: In function`cvbSqrt 的引用': C:/OpenCV2.0/include/opencv/cvcompat.h:291: 未定义对`_cvPow' ./src/Open_CV.o: In function`cvbInvSqrt'的引用': C :/OpenCV2.0/include/opencv/cvcompat.h:301: 未定义对`_cvPow' ./src/Open_CV.o: In function`cvbReciprocal' 的引用：C:/OpenCV2.0/include/opencv/cvcompat.h:311: 未定义对`_cvPow' ./src/Open_CV.o: In function`cvbFastExp' 的引用：C:/OpenCV2。 0/include/opencv/cvcompat.h:319：未定义对`_cvExp' ./src/Open_CV.o: In function`cvbFastLog 的引用：C:/OpenCV2.0/include/opencv/cvcompat.h:327：未定义对`_cvLog' ./src/Open_CV.o: In function`cvPseudoInverse 的引用：C:/OpenCV2.0/include/ opencv/cvcompat.h:339：对`_cvInvert' ./src/Open_CV.o: In function`cvProject3D 的未定义引用：C:/OpenCV2.0/include/opencv/cvcompat.h:473：对`_cvTransform' ./src/Open_CV.o: In function`cvFindFundamentalMatrix 的未定义引用：C:/OpenCV2.0/include/opencv/cvcompat。小时：549：未定义的引用`_cvCreateMat' C:/OpenCV2.0/include/opencv/cvcompat.h:550: undefined reference to`_cvCreateMat' C:/OpenCV2.0/include/opencv/cvcompat.h:566: 未定义引用`_cvReleaseMat' C:/OpenCV2.0/include/opencv/cvcompat.h:567: undefined reference to`_cvReleaseMat' ./src/Open_CV.o: 在函数`cvUnDistortInit': C:/OpenCV2.0/include/opencv/cvcompat.h:774: undefined reference to`_cvGetRawData' ./src/Open_CV.o: 在函数`cvUnDistort': C:/OpenCV2.0/include/opencv/cvcompat.h:790: undefined reference to`_cvGetRawData' ./ src/Open_CV.o: 在函数`cvKMeans': C:/OpenCV2.0/include/opencv/cvcompat.h:816: undefined reference to`_cvCreateMat' C:/OpenCV2.0/include/opencv/cvcompat.h:821: 未定义引用`_cvKMeans2' C:/OpenCV2.0/include/opencv/cvcompat.h:822: undefined reference to`_cvReleaseMat' ./src/Open_CV.o: 在函数`cvStartScanGraph': C:/OpenCV2.0/include/opencv/cvcompat.h:833: undefined reference to`_cvError' C:/OpenCV2.0 /include/opencv/cvcompat.h:835: 未定义对`_cvCreateGraphScanner' C:/OpenCV2.0/include/opencv/cvcompat.h:837: undefined reference to`*cvFree*的引用' ./src/Open_CV.o: 在函数`cvEndScanGraph': C:/OpenCV2.0/include/opencv/cvcompat.h:844: undefined reference to`_cvError' C:/OpenCV2.0/include/opencv/cvcompat.h:848: 未定义引用`_cvAlloc' C:/OpenCV2.0/include/opencv/cvcompat.h:850: undefined reference to`_cvReleaseGraphScanner' ./src/Open_CV.o: 在函数`cvLineAA': C:/OpenCV2.0/include/opencv/cvcompat.h:863: undefined reference to`_cvGetElemType' C:/OpenCV2.0/include/opencv/cvcompat.h:863: 未定义的引用`_cvColorToScalar' C:/OpenCV2.0/include/opencv/cvcompat.h:863: undefined reference to`_cvLine' ./src/Open_CV.o: 在函数`cvCircleAA': C:/OpenCV2.0/include/opencv/cvcompat.h:869: undefined reference to`_cvGetElemType' C:/OpenCV2.0/include/opencv/cvcompat.h:869: 未定义引用`_cvColorToScalar' C:/OpenCV2.0/include/opencv/cvcompat.h:869: undefined reference to`_cvCircle' ./src/Open_CV.o: 在函数`cvEllipseAA': C:/OpenCV2.0/include/opencv/cvcompat.h:877: undefined reference to`_cvGetElemType' C: /OpenCV2.0/include/opencv/cvcompat.h:877: 未定义引用`_cvColorToScalar' C:/OpenCV2.0/include/opencv/cvcompat.h:877: undefined reference to`_cvEllipse'makefile:30: 目标`Open_CV.exe' failed ./src/Open_CV.o: In function`cvPolyLineAA' 的配方: C:/OpenCV2.0/include/opencv/cvcompat.h:884: 未定义引用`_cvGetElemType' C:/OpenCV2.0/include/opencv/cvcompat.h:884: undefined reference to`_cvColorToScalar' C:/OpenCV2.0/include/opencv/cvcompat.h:884: undefined reference to `_cvPolyLine' collect2: ld returned 1 exit status make: *** [Open_CV.exe] Error 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:23:51.487

我认为您错过了链接 libcxcore“-lcxcore”（或者可能是“-lcvaux”）。**

# c - cos 和 sin 在 C 中给出错误的答案

> ID：14293560
> 
> 赞同：-4
> 
> 时间：2013-01-12T12:59:14.807
> 
> 标签：c, trigonometry

嗨，我正在尝试通过在 C 中使用 sin 和 cos 来找到 ax 和 y 方向，我已经包含了 math.h 并使用 -lm 编译。我知道“rad”给出了正确的结果，但下一行没有，我一直盯着这个几个小时，在这里搜索问题，有人能看出这有什么问题吗？

```
double cos_sinY(int cos_sinus, double x, double y)
{
    double rad, y_value, pi = 3.1415;//8979323846
    rad = (double)cos_sinus/180*pi;
    y_value = x*(sin(rad))+y*(cos(rad));
    return y_value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:16:28.143

鉴于提问者提供的数学公式，“x_1 = x_0*cos(Alpha) - y_0*sin(Alpha), y_1 = x_0*sin(Alpha) + y_0*cos(Alpha)”，我测试了问题中的代码几个值。在每种情况下，代码都产生了我期望的值。

这个公式是在平面中旋转一个点的公式。旋转方向是数学家认为为正的方向（逆时针，(1, 0) 旋转 90º 为 (0, 1)）。

示例： cos_sinus(30, .3, .6) 产生 .669616。

如果这不是提问者所观察到的，那么他们的代码中还有一些其他问题超出了他们在问题中披露的内容。

应修改代码以使用更准确的 π 值，例如 3.1415926535897932384626433，而不是 3.1415。

# html - 如何在 Windows XP 上查看个人 Google+ 个人资料徽章

> ID：14293566
> 
> 赞同：0
> 
> 时间：2013-01-12T12:59:59.063
> 
> 标签：html, google-plus, badge

我按照[这些说明](https://developers.google.com/+/plugins/badge/)在 Firefox 的自定义起始屏幕上查看我的 Google+ 个人资料徽章。

起始屏幕是一个 html 文档，存储在我的桌面上并使用 file:// -originating URL 查看。我的浏览器是 Firefox 16，Windows 是 XP。

我读到人们在他们的 XP 上显示徽章时遇到问题，但似乎没有人有解决方案。

有人成功了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:54:54.063

您需要`http://`在第一行定义。

... `data-href="http://plus.google.com/`... 而不是 ... `data-href="//plus.google.com/`... 这是一个关于在其他未实现的文章中使其无协议的简短解释： [http](http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/#protocolless)

://encosia.com/3-reasons-why-you-should-let-google- [host-jquery-for-you/#protocolless](http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/#protocolless)

# iphone - 如何在 iPhone 的 mkmapview 中使用两个按钮显示自定义标注？

> ID：14293573
> 
> 赞同：3
> 
> 时间：2013-01-12T13:00:40.167
> 
> 标签：iphone, mkmapview, callout

我想显示一个带有两个按钮的自定义标注，我还想对两个按钮进行操作，

![在此处输入图像描述](../Images/3de43e11279b30402b82e73da1a619aa.png)

我尝试过，但没有在地图上做这种标注，这并不是我真正想要的。当我正在制作一个 iPhone 应用程序时，由于我是 MKMapview 的新手，所以我很难做到这一点。如何使用两个按钮显示自定义标注？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:05:36.060

你可以去左右 calloutaccessoryview 看[**这里**](https://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKAnnotationView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40008207)

```
//ANNOTATION VIEW SETTING DELEGATE
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation{
     MKPinAnnotationView *myPin  =   [[MKPinAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:@"reuseString"];
    myPin.draggable             =   NO;
    myPin.canShowCallout        =   YES;
    myPin.pinColor              =   MKPinAnnotationColorRed;

    UIButton *rightButton   =   [UIButton buttonWithType:UIButtonTypeCustom];
    rightButton.frame       =   CGRectMake(0, 0, 50, 30);
    [rightButton setTitle:@"Info!" forState:UIControlStateNormal];
    [rightButton setBackgroundImage:[UIImage imageNamed:@"image.png"] forState:UIControlStateNormal];
    rightButton.showsTouchWhenHighlighted   =   YES;
    [rightButton addTarget:self action:@selector(rightAcccoryViewButtonCLicked) forControlEvents:UIControlEventTouchUpInside]; //rightAcccoryViewButtonCLicked is a function

    myPin.rightCalloutAccessoryView = rightButton;

    return myPin;

} 
```

同样，您可以使用**leftCalloutAccessoryView**并添加另一个按钮。

# magento - 在 magento 中有一个类别概述错误

> ID：14293576
> 
> 赞同：0
> 
> 时间：2013-01-12T13:00:57.487
> 
> 标签：magento

处理您的请求时出现错误

> Bronmodel "gomage_navigation/adminhtml_system_config_source_category_column" niet gevonden voor attribuut "navigation_column_side"

痕迹：

```
#0 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Eav/Model/Entity/Attribute/Abstract.php(387): Mage::exception('Mage_Eav', 'Bronmodel "goma...')
#1 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Adminhtml/Block/Widget/Form.php(201): Mage_Eav_Model_Entity_Attribute_Abstract->getSource()
#2 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Adminhtml/Block/Catalog/Category/Tab/Attributes.php(113): Mage_Adminhtml_Block_Widget_Form->_setFieldset(Array, Object(Varien_Data_Form_Element_Fieldset))
#3 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Adminhtml/Block/Widget/Form.php(144): Mage_Adminhtml_Block_Catalog_Category_Tab_Attributes->_prepareForm()
#4 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Core/Block/Abstract.php(862): Mage_Adminhtml_Block_Widget_Form->_beforeToHtml()
#5 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Adminhtml/Block/Catalog/Category/Tabs.php(140): Mage_Core_Block_Abstract->toHtml()
#6 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Core/Block/Abstract.php(238): Mage_Adminhtml_Block_Catalog_Category_Tabs->_prepareLayout()
#7 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Core/Model/Layout.php(456): Mage_Core_Block_Abstract->setLayout(Object(Mage_Core_Model_Layout))
#8 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Adminhtml/Block/Catalog/Category/Edit/Form.php(55): Mage_Core_Model_Layout->createBlock('adminhtml/catal...', 'tabs')
#9 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Core/Block/Abstract.php(238): Mage_Adminhtml_Block_Catalog_Category_Edit_Form->_prepareLayout()
#10 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Core/Model/Layout.php(456): Mage_Core_Block_Abstract->setLayout(Object(Mage_Core_Model_Layout))
#11 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Adminhtml/Block/Widget/Form/Container.php(82): Mage_Core_Model_Layout->createBlock('adminhtml/catal...')
#12 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Core/Block/Abstract.php(238): Mage_Adminhtml_Block_Widget_Form_Container->_prepareLayout()
#13 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Core/Model/Layout.php(456): Mage_Core_Block_Abstract->setLayout(Object(Mage_Core_Model_Layout))
#14 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Core/Model/Layout.php(472): Mage_Core_Model_Layout->createBlock('adminhtml/catal...', 'category.edit')
#15 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Core/Model/Layout.php(239): Mage_Core_Model_Layout->addBlock('adminhtml/catal...', 'category.edit')
#16 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Core/Model/Layout.php(205): Mage_Core_Model_Layout->_generateBlock(Object(Mage_Core_Model_Layout_Element), Object(Mage_Core_Model_Layout_Element))
#17 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Core/Model/Layout.php(210): Mage_Core_Model_Layout->generateBlocks(Object(Mage_Core_Model_Layout_Element))
#18 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Core/Controller/Varien/Action.php(344): Mage_Core_Model_Layout->generateBlocks()
#19 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Core/Controller/Varien/Action.php(269): Mage_Core_Controller_Varien_Action->generateLayoutBlocks()
#20 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Adminhtml/Controller/Action.php(275): Mage_Core_Controller_Varien_Action->loadLayout(NULL, true, true)
#21 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Adminhtml/controllers/Catalog/CategoryController.php(201): Mage_Adminhtml_Controller_Action->loadLayout()
#22 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Adminhtml_Catalog_CategoryController->editAction()
#23 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('edit')
#24 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#25 /home3/tuinhuis/public_html/3works/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#26 /home3/tuinhuis/public_html/3works/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#27 /home3/tuinhuis/public_html/3works/index.php(87): Mage::run('', 'store')
#28 {main} 
```

尝试输入我的 magento 类别概述时出现此错误。这东西坏了，但不知道如何修复它......如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-09T06:38:12.050

为了解决此问题，请按照以下提到的步骤操作：

1.  从所有目录（app、skin、js等）中删除模块的所有文件
2.  从您的数据库表中删除列 = 从 navigation_ 开始的 EAV_Attribute，因为这些列属于 gomage 导航扩展。（例如：navigation_column_side）
3.  刷新缓存

错误将得到解决。

# php - PHP：奇怪的字符导致来自file（）函数的数组的第一个索引

> ID：14293577
> 
> 赞同：0
> 
> 时间：2013-01-12T13:01:02.403
> 
> 标签：php, text-files

> **可能重复：**
> [如何从文件开头删除ï»¿？](https://stackoverflow.com/questions/3255993/how-do-i-remove-i-from-the-beginning-of-a-file)

我怀疑这个问题以前遇到过，但我还找不到任何东西。我尝试过以各种方式编辑文件，但每次我仍然在第一个条目中得到这个奇怪的字符。

所以我有一个文本文件（.txt），其中包括：

> 德里克
> 
> 比利，威廉
> 
> 加里，橡树

现在，我调用 file() 函数，然后像这样打印：

```
<?php 
// read the file into an array called $users
$users = file('C:/private/filetest_02.txt');
?>
<pre>
<?php print_r($users); ?>
</pre> 
```

但是，然后我收到这个输出：

> 大批
> 
> (
> 
> ```
> [0] => ï»¿ derek, drw
> [1] => billy, william
> [2] => gary, oaktree 
> ```
> 
> )

为什么这个`ï»¿`字符显示在数组的第一个条目中？我能做些什么来缓解这种情况？提前感谢任何可以阐明这个问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:07:27.120

那是一个[UTF-8 字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark#Representations_of_byte_order_marks_by_encoding)。

您需要修改文件以将其删除。

# ios - MPMoviePlayerViewController 旋转播放录制的肖像电影

> ID：14293580
> 
> 赞同：1
> 
> 时间：2013-01-12T13:01:22.557
> 
> 标签：ios, objective-c, mpmovieplayercontroller

我在播放录制的肖像电影时遇到了问题`MPMoviePlayerViewController`（我使用快捷方式 MPVC）。（在 iOS 6.0.1 的 iPhone 4S 上测试）该应用程序执行以下操作：

*   录制电影（风景或肖像）
*   在 MPC 中预览电影（这次`MPMoviePlayerController`）
*   上传电影
*   有上传电影的tableView，你可以在里面观看
*   看电影是由 MPVC 完成的

如果我以纵向模式录制电影，MPVC 会向右翻转播放此视频。如果我在右侧以横向模式（左侧的主页按钮）录制电影，则会发生类似的情况，然后在 MPVC 中倒置播放电影。这仅在上传后播放电影时发生！在预览 MPC 中，电影播放正常，没有旋转！

我发现了一些涉及旋转视频的相关 SO 问题，但没有一个与 MPVC 明确相关。我使用了[这个](https://stackoverflow.com/questions/4627940/how-to-detect-iphone-sdk-if-a-video-file-was-recorded-in-portrait-orientation/6046421#6046421)，发现电影中存储的方向是完全正确的。所以人像电影真的用这个方法返回 UIInterfaceOrientationPortrait 。

所以现在我的问题是，有没有办法告诉 MPVC 旋转电影或正确对待它？还是我必须基于 编写自己的播放器`AVFoundation`？这是一个 MPVC 错误吗，因为电影提供的方向信息似乎是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-19T10:31:46.357

我最近偶然发现了类似的问题，在我将视频上传到第 3 方 CDN 后，我的视频被强制设置为横向。事实证明，它们被 3rd 方服务盲目地“翻转”为横向并转换为 iOS 流资源。您的视频可能没有任何问题，只需确保您了解上传视频后的流程，因为情况可能就是这样。

在与我的 CDN 托管服务提供商进行了长时间的交谈后，他们确认了一个问题：

“问题是从云文件中的文件到 iOS 流的转码似乎丢失了有关方向的 EXIF 信息，因此它只显示为横向。”

建议的解决方案是在上传视频之前旋转视频。

# html - href 到 wordpress 生成的 li

> ID：14293582
> 
> 赞同：0
> 
> 时间：2013-01-12T13:01:54.743
> 
> 标签：html, css, wordpress

我正在制作一个 wordpress 主题，但有一个小问题

我有一个名为类别的自定义页面。它是一个自定义页面。我使用此代码显示所有类别的列表

```
wp_list_categories('title_li=&orderby=name&show_count=1'); ?> 
```

这一切正常。它生成所有类别的 li 对象列表，这些对象是指向包含此类别中所有帖子的页面的链接。

所以出

```
<ul id="tagsul">
<li class="cat-item cat-item-31"><a href="http://www.hicheck.nl/?cat=31"  
title="Alle berichten opgeslagen onder Art &amp; Design bekijken">Art &amp; Design</a>        
</li>
<li class="cat-item cat-item-38"><a href="http://www.hicheck.nl/?cat=38" 
title="Alle berichten opgeslagen onder filmpjes bekijken">filmpjes</a> (3)
</li>
</ul> 
```

现在我的问题是：我怎样才能使整个 li 的链接而不是仅文本链接.. 因为 li 非常大。但此时只有文本显示的部分是可点击的..

问候，梅林

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:03:35.290

您需要将内部的锚点定义`li`为块级元素。将此添加到您的 CSS 中：

```
#tagsul li.cat-item a {
    display: block;
} 
```

# sql - 将新表添加到现有查询

> ID：14293583
> 
> 赞同：1
> 
> 时间：2013-01-12T13:02:04.320
> 
> 标签：sql, select

我有这个工作正常的现有查询：

```
SELECT data_tool.name as tool,
       MIN(data_cst.date_time) "start",
       MAX(data_cst.date_time) "end",
       data_cst.recipe_id,
       data_target.name as target,
       data_lot.name as lot,
       data_wafer.name as wafer,
       data_measparams.name as mp
FROM data_cst
INNER JOIN data_tool ON data_tool.id = data_cst.tool_id
INNER JOIN data_target ON data_target.id = data_cst.target_name_id
INNER JOIN data_lot ON data_lot.id = data_cst.lot_id
INNER JOIN data_wafer ON data_wafer.id = data_cst.wafer_id
INNER JOIN data_measparams ON data_measparams.id = data_cst.meas_params_name_id
WHERE data_target.id IN (130, 539)
AND data_cst.date_time BETWEEN '2010-01-11 00:00:00' AND '2013-01-11 23:59:59'
AND data_cst.tool_id IN (14,16)
GROUP BY wafer_id, data_cst.lot_id, data_file_id, target_name_id
HAVING count(*) < 100
ORDER BY start, tool 
```

现在我需要添加一些东西。我有另一个名为的表 `event_message_idx`，其中包含列`recipe_id`、`lot_id`、`tool_id`、 `date_time`和`message_idx`。

我需要找出该表中有多少行以及有多少行`message_idx = 'OM'` 加入`message_idx = 'SEM'`了上述查询 on `recipe_id, lot_id, tool_id`and has `date_time between start and end`。

我无法弄清楚如何在一个查询中执行此操作（我真的更喜欢子查询，因为这些表非常大，并且过去在这个系统上子查询性能很差）。

我一直在玩这样的左连接：

```
SELECT data_tool.name as tool,
       MIN(data_cst.date_time) "start",
       MAX(data_cst.date_time) "end",
       data_cst.recipe_id,
       data_target.name as target,
       data_lot.name as lot,
       data_wafer.name as wafer,
       data_measparams.name as mp,
       event_message_idx.message_idx,
       COUNT(event_message_idx.message_idx)
FROM data_cst
LEFT JOIN event_message_idx
  ON event_message_idx.recipe_id = data_cst.recipe_id
  AND event_message_idx.message_idx IN ('OM', 'SEM')
  AND event_message_idx.lot_id = data_cst.lot_id
  AND event_message_idx.tool_id = data_cst.tool_id
INNER JOIN data_tool ON data_tool.id = data_cst.tool_id
INNER JOIN data_target ON data_target.id = data_cst.target_name_id
INNER JOIN data_lot ON data_lot.id = data_cst.lot_id
INNER JOIN data_wafer ON data_wafer.id = data_cst.wafer_id
INNER JOIN data_measparams ON data_measparams.id = data_cst.meas_params_name_id
WHERE data_target.id IN (130, 539)
AND data_cst.date_time BETWEEN '2010-01-11 00:00:00' AND '2013-01-11 23:59:59'
AND data_cst.tool_id IN (14,16)
GROUP BY wafer_id, data_cst.lot_id, data_file_id, target_name_id,
event_message_idx.message_idx
HAVING count(*) < 100
ORDER BY start, tool 
```

但是这里有两个问题：

*   我得到了我想要的行数的两倍 - 一个用于 OM，一个用于 SEM
*   我不想这样——我只想知道有多少 OM 和 SEM 行（真的我只想知道是否有 0 或更多然后 0——实际计数无关紧要）。

*   我没有考虑日期范围 - 我只想计算 event_message_idx 中介于 start 和 end 之间的行，我不知道该怎么做。

这可能吗？我认为不是，我必须使用 2 个查询（这确实会使应用程序复杂化）或一个子查询（我也在努力编写）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:12:21.287

计算子查询中的那些，例如

```
SELECT  data_tool.name as tool,
        MIN(data_cst.date_time) "start",
        MAX(data_cst.date_time) "end",
        data_cst.recipe_id,
        data_target.name as target,
        data_lot.name as lot,
        data_wafer.name as wafer,
        data_measparams.name as mp,
        COALESCE(a.totalOM, 0) totalOM,
        COALESCE(a.totalSEM, 0) totalSEM
FROM    data_cst
        INNER JOIN data_tool 
            ON data_tool.id = data_cst.tool_id
        INNER JOIN data_target 
            ON data_target.id = data_cst.target_name_id
        INNER JOIN data_lot 
            ON data_lot.id = data_cst.lot_id
        INNER JOIN data_wafer 
            ON data_wafer.id = data_cst.wafer_id
        INNER JOIN data_measparams 
            ON data_measparams.id = data_cst.meas_params_name_id
        LEFT JOIN 
        (
            SELECT  recipe_id, lot_id, tool_id,
                    SUM(CASE WHEN message_idx = 'OM' THEN 1 ELSE 0 END) totalOM,
                    SUM(CASE WHEN message_idx = 'SEM' THEN 1 ELSE 0 END) totalSEM
            FROM    event_message_idx
            WHERE   date_time BETWEEN '2010-01-11 00:00:00' AND '2013-01-11 23:59:59'
            GROUP   BY recipe_id, lot_id, tool_id
        ) a ON  data_cst.recipe_id = a.recipe_id AND
                data_cst.lot_id = a.lot_id AND
                data_cst.tool_id = a.tool_id 
WHERE   data_target.id IN (130, 539) AND 
        (data_cst.date_time BETWEEN '2010-01-11 00:00:00' AND '2013-01-11 23:59:59') AND 
        data_cst.tool_id IN (14,16)
GROUP   BY  wafer_id, data_cst.lot_id, data_file_id, target_name_id
HAVING  COUNT(*) < 100
ORDER   BY `start`, tool 
```

# android - Android：位置对象的提供者

> ID：14293586
> 
> 赞同：0
> 
> 时间：2013-01-12T13:02:25.753
> 
> 标签：android, location

Location构造函数中的provider参数有什么用？

```
Location (String provider) 
```

我可以传递除`NETWORK_PROVIDER`or之外的其他字符串`GPS_PROVIDER`吗？

原因是我想在数据结构中存储一些坐标，使用 Location 对象而不是一对双精度对象。这是一个正确的推理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:07:07.043

您也可以传递 PASSIVE_PROVIDER（搜索文档）。

我永远不会存储 Location 对象，我觉得没有任何意义。请存放一对双打:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T13:08:29.727

> 我可以传递除 NETWORK_PROVIDER 或 GPS_PROVIDER 之外的其他字符串吗？

是的你可以。

有一个被动提供者可以传递给位置。被动提供者：

一种特殊的位置提供程序，用于在不实际启动位置修复的情况下接收位置。

当其他应用程序或服务请求位置更新时，此提供程序可用于被动接收位置更新，而无需自己实际请求位置。该提供者将返回由其他提供者生成的位置。您可以查询 getProvider() 方法来确定位置更新的来源。希望这可以帮助。

# javascript - Visual Studio 内联 javascript 混淆器

> ID：14293589
> 
> 赞同：1
> 
> 时间：2013-01-12T13:03:28.227
> 
> 标签：javascript, visual-studio-2010, visual-studio

有谁知道在发布时会在我的 .aspx 页面中混淆我的内联 javascript（在脚本块中）的插件或工具？如果插件还删除了 xml 注释/html 注释、空行等，它不会造成任何伤害。

它没有安全问题；）我只是不希望用户能够立即看到评论和阅读代码——也许最后一切看起来都更漂亮了。

# jquery - 使用 MVC 4 的 jQuery Masonry 可过滤组合

> ID：14293595
> 
> 赞同：0
> 
> 时间：2013-01-12T13:04:26.513
> 
> 标签：jquery, asp.net-mvc-4, portfolio

我正在将此 CSS 模板 ( [http://www.csstemplateheaven.com/demo/bigshot](http://www.csstemplateheaven.com/demo/bigshot/) ) 移植到 MVC 4 项目中，以更好地理解 MVC。我正在做的第一步是从演示转换此页面（[http://www.csstemplateheaven.com/demo/bigshot/portfolio.html](http://www.csstemplateheaven.com/demo/bigshot/portfolio.html)，由于某种原因，我无法让 jquery 'filter' 选项工作在 MVC 中。我在下面发布了标记，但有几点注意事项：

1.  我尝试在 MVC 4 中使用捆绑功能，但它不起作用，所以我在视图中放置了 javascript 和 css 的直接链接。我决定稍后解决捆绑和缩小问题。
2.  由于演示中的每个页面都有不同的相关 css 文件，因此我在 _Layout.cshtml 文件中使用了一个 @RenderSection 从各个视图中提取头部部分。
3.  与 css 和 js 相关的所有其他内容（除了过滤）在网站上都可以正常工作，除了投资组合不过滤结果。当我预览站点时，我可以看到各种 css 和 js 文件的链接，并且所有文件都是有效的。

感谢您提供的任何帮助或建议！

**_Layout.cshtml 的代码**

```
 <!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8" />

        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <meta name="viewport" content="width=device-width" />
        <title>Test Site</title>
        @RenderSection("head", required: false)

            <script>
                jQuery.noConflict()(function ($) {
                    $('#ei-slider').eislideshow({
                        animation: 'center',
                        autoplay: true,
                        slideshow_interval: 3000,
                        titlesFactor: 0
                    });
                });
    </script>

    </head>

<body style="background: #FFF">

   <div style="width:100%; background: #FFF">

       <div class="header">

        <!-- Logo/Title -->

            <div id="site_title"><a href="#">
                <img src="~/Content/img/logo.png" alt="My Site Title" /></a>
            </div>  

               <ol id="menu">
             <li><a href="#">Home</a>

              <!-- sub menu -->
              <ol>  
                <li><a href="#">Nivo Slider</a></li>
                <li><a href="#">EI Slider</a></li>
                <li><a href="#">Fullscreen Slider</a></li>
                <li><a href="#">Static Image</a></li>
              </ol>
              </li><!-- end sub menu -->

        <li><a href="#">Pages</a>

              <!-- sub menu -->
              <ol>     
                <li><a href="#">Magazine</a></li>
                <li><a href="#">Blog</a></li>
                <li><a href="#">Full Width Page</a></li>
                <li><a href="#">Columns</a></li>
              </ol>
        </li><!-- end sub menu -->

        <li><a href="#">Elements</a></li>

        <li><a href="#">Galleries</a>

              <!-- sub menu -->
              <ol>     
                <li><a href="#">Simple</a></li>
                <li><a href="~/Home/Hardware">Filterable</a></li>
                <li><a href="#">Fade Scroll</a></li>
                <li><a href="#">Video</a></li>
                <li class="last"><a href="#">PhotoGrid</a></li>
              </ol>
        </li><!-- end sub menu -->

               <li><a href="#">Contact</a></li>
    </ol>

       </div> 

     <!-- END header -->

       </div>

        @RenderSection("picturecycle", required: false)

    <div id="container">

        @RenderBody()

    </div>

    <div id="footer">

    <!-- First Column -->

    <div class="one-fourth">
        <h3>Useful Links</h3>
            <ul class="footer_links">
                <li><a href="#">Lorem Ipsum</a></li>
                <li><a href="#">Ellem Ciet</a></li>
                <li><a href="#">Currivitas</a></li>
                <li><a href="#">Salim Aritu</a></li>
            </ul>
    </div>

    <!-- Second Column -->

    <div class="one-fourth">
        <h3>Terms</h3>
            <ul class="footer_links">
                <li><a href="#">Lorem Ipsum</a></li>
                <li><a href="#">Ellem Ciet</a></li>
                <li><a href="#">Currivitas</a></li>
                <li><a href="#">Salim Aritu</a></li>
            </ul>
    </div>

    <!-- Third Column -->

    <div class="one-fourth">
        <h3>Information</h3>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent sit amet enim id dui tincidunt vestibulum rhoncus a felis.

        <div id="social_icons">
        Theme by <a href="http://www.csstemplateheaven.com">CssTemplateHeaven</a><br /> Photos © <a href="http://dieterschneider.net" title="Dieter Schneider Photography">Dieter Schneider</a>
        </div>

    </div>

    <!-- Fourth Column -->

    <div class="one-fourth last">
        <h3>Socialize</h3>
            <img src="~/Content/img/icon_fb.png" alt="Facebook">
            <img src="~/Content/img/icon_twitter.png" alt="Facebook">
            <img src="~/Content/img/icon_in.png" alt="Facebook">
    </div>

    <div style="clear:both"></div>

    </div> <!-- END footer -->

</body>
</html> 
```

**Hardware.cshtml 的代码（查看）**

```
 @{
    ViewBag.Title = "Hardware Page";
}

@section head {

<!-- CSS Files -->

    <link rel="stylesheet" type="text/css" media="screen" href="~/Content/style.css">
    <link rel="stylesheet" type="text/css" media="screen" href="~/Content/menu/css/simple_menu.css">
    <link rel="stylesheet" href="~/Content/css/prettyPhoto.css" type="text/css" media="screen"/>
    <link rel="stylesheet" href="~/Content/css/nivo-slider.css" type="text/css" media="screen"/>

<!-- JS Files -->

    <script type="text/javascript" src="~/Scripts/js/jquery.min.js"></script>    
    <script type="text/javascript" src="~/Scripts/js/custom.js"></script>
  <script type="text/javascript" src="~/Scripts/js/slides/slides.min.jquery.js"></script>
    <script type="text/javascript" src="~/Scripts/js/cycle-slider/cycle.js"></script>
    <script type="text/javascript" src="~/Scripts/js/nivo-slider/jquery.nivo.slider.js"></script>
    <script type="text/javascript" src="~/Scripts/js/tabify/jquery.tabify.js"></script>
    <script type="text/javascript" src="~/Scripts/js/prettyPhoto/jquery.prettyPhoto.js"></script>
    <script type="text/javascript" src="~/Scripts/js/twitter/jquery.tweet.js"></script>
    <script type="text/javascript" src="~/Scripts/js/scrolltop/scrolltopcontrol.js"></script>
    <script type="text/javascript" src="~/Scripts/js/portfolio/filterable.js"></script>
    <script type="text/javascript" src="~/Scripts/js/modernizr/modernizr-2.0.3.js"></script>
    <script type="text/javascript" src="~/Scripts/js/easing/jquery.easing.1.3.js"></script>
    <script type="text/javascript" src="~/Scripts/js/kwicks/jquery.kwicks-1.5.1.pack.js"></script>
    <script type="text/javascript" src="~/Scripts/js/swfobject/swfobject.js"></script>
    <!-- FancyBox -->
    <link rel="stylesheet" type="text/css" href="~/Scripts/js/fancybox/jquery.fancybox.css" media="all">
    <script type="text/javascript" src="~/Scripts/js/fancybox/jquery.fancybox-1.2.1.js"></script>

}

                <div id="portfolio">
                    <ul id="filterable">
                        <li class="first">
                        <h5>Sort by:</h5>

                        </li>
                        <li class="current"><a class="all" href="#all">All</a></li>
                        <li><a class="web" href="#web">Webdesign</a></li>
                        <li><a class="logos" href="#logos">Logo</a></li>
                        <li><a class="branding" href="#branding">Branding</a></li>
                        <li><a class="stupid" href="#stupid">Stupid</a></li>
                        <li><a class="video" href="#video">Video</a></li>

                    </ul>
                    <!--END filtering-nav-->
                    <div class="portfolio-container" id="columns">
                        <ul>
                            <li class="one-fourth web">
                            <p>
                                <a href="slideshow/slide_1.jpg" class="portfolio-item-preview" data-rel="prettyPhoto" title="Scream"><img src="~/Content/img/portfolio/portfolio-img-01.jpg" alt="" width="210" height="145" class="portfolio-img pretty-box"/></a>
                            </p>
                            <h4><a href="#">Worpdress Design</a></h4>

                            <p>
                                 Lorem ipsum dolor sit amet, tollite fit manibus individuationis omnibus civitas ad quia.
                            </p>
                            </li>
                            <li class="one-fourth logos">
                            <p>
                                <a href="slideshow/slide_1.jpg" class="portfolio-item-preview" data-rel="prettyPhoto"><img src="~/Content/img/portfolio/portfolio-img-01.jpg" alt=" " width="210" height="145" class="portfolio-img pretty-box"/></a>
                            </p>
                            <h4><a href="#">Logo Design</a></h4>

                            <p>
                                 Lorem ipsum dolor sit amet, tollite fit manibus individuationis omnibus civitas ad quia.
                            </p>
                            </li>
                            <li class="one-fourth stupid">
                            <p>
                                <a href="http://www.youtube.com/watch?v=pyOyBVXDJ9Qfeature=relmfu" class="portfolio-item-preview" data-rel="prettyPhoto"><img src="~/Content/img/portfolio/portfolio-img-01.jpg" alt=" " width="210" height="145" class="portfolio-img pretty-box"/></a>
                            </p>
                            <h4><a href="#">Watch Video</a></h4>

                            <p>
                                 Lorem ipsum dolor sit amet, tollite fit manibus individuationis omnibus civitas ad quia.
                            </p>
                            </li>
                            <li class="one-fourth web">
                            <p>
                                <a href="images/slideshow/slide-01.jpg" class="portfolio-item-preview" data-rel="prettyPhoto"><img src="~/Content/img/portfolio/portfolio-img-01.jpg" alt=" " width="210" height="145" class="portfolio-img pretty-box"/></a>
                            </p>
                            <h4><a href="#">Wordpress Master</a></h4>

                            <p>
                                 Lorem ipsum dolor sit amet, tollite fit manibus individuationis omnibus civitas ad quia.
                            </p>
                            </li>
                            <li class="one-fourth logos">
                            <p>
                                <a href="images/slideshow/slide-01.jpg" class="portfolio-item-preview" data-rel="prettyPhoto"><img src="~/Content/img/portfolio/portfolio-img-01.jpg" alt=" " width="210" height="145" class="portfolio-img pretty-box"/></a>
                            </p>
                            <h4><a href="#">Endless Logo Design</a></h4>

                            <p>
                                 Lorem ipsum dolor sit amet, tollite fit manibus individuationis omnibus civitas ad quia.
                            </p>
                            </li>
                            <li class="one-fourth web">
                            <p>
                                <a href="images/slideshow/slide-01.jpg" class="portfolio-item-preview" data-rel="prettyPhoto"><img src="~/Content/img/portfolio/portfolio-img-01.jpg" alt=" " width="210" height="145" class="portfolio-img pretty-box"/></a>
                            </p>
                            <h4><a href="#">Worpdress Widgets</a></h4>

                            <p>
                                 Lorem ipsum dolor sit amet, tollite fit manibus individuationis omnibus civitas ad quia.
                            </p>
                            </li>
                            <li class="one-fourth web">
                            <p>
                                <a href="images/slideshow/slide-01.jpg" class="portfolio-item-preview" data-rel="prettyPhoto"><img src="~/Content/img/portfolio/portfolio-img-01.jpg" alt=" " width="210" height="145" class="portfolio-img pretty-box"/></a>
                            </p>
                            <h4><a href="#">Magento Development</a></h4>

                            <p>
                                 Lorem ipsum dolor sit amet, tollite fit manibus individuationis omnibus civitas ad quia.
                            </p>
                            </li>
                            <li class="one-fourth web">
                            <p>
                                <a href="images/slideshow/slide-01.jpg" class="portfolio-item-preview" data-rel="prettyPhoto"><img src="~/Content/img/portfolio/portfolio-img-01.jpg" alt=" " width="210" height="145" class="portfolio-img pretty-box"/></a>
                            </p>
                            <h4><a href="#">Joomla Shopping</a></h4>

                            <p>
                                 Lorem ipsum dolor sit amet, tollite fit manibus individuationis omnibus civitas ad quia.
                            </p>
                            </li>
                            <li class="one-fourth branding">
                            <p>
                                <a href="images/slideshow/slide-01.jpg" class="portfolio-item-preview" data-rel="prettyPhoto"><img src="~/Content/img/portfolio/portfolio-img-01.jpg" alt=" " width="210" height="145" class="portfolio-img pretty-box"/></a>
                            </p>
                            <h4><a href="#">T-Shirts Designs</a></h4>

                            <p>
                                 Lorem ipsum dolor sit amet, tollite fit manibus individuationis omnibus civitas ad quia.
                            </p>
                            </li>
                            <li class="one-fourth video">
                            <p>
                                <a href="http://www.youtube.com/watch?v=pyOyBVXDJ9Q&amp;feature=relmfu" class="portfolio-item-preview" data-rel="prettyPhoto"><img src="~/Content/img/portfolio/portfolio-img-01.jpg" alt=" " width="210" height="145" class="portfolio-img pretty-box"/></a>
                            </p>
                            <h4><a href="#">Youtube Video</a></h4>

                            <p>
                                 Lorem ipsum dolor sit amet, tollite fit manibus individuationis omnibus civitas ad quia.
                            </p>
                            </li>
                            <li class="one-fourth branding">
                            <p>
                                <a href="images/slideshow/slide-01.jpg" class="portfolio-item-preview" data-rel="prettyPhoto"><img src="~/Content/img/portfolio/portfolio-img-01.jpg" alt=" " width="210" height="145" class="portfolio-img pretty-box"/></a>
                            </p>
                            <h4><a href="#">Brand Everything</a></h4>

                            <p>
                                 Lorem ipsum dolor sit amet, tollite fit manibus individuationis omnibus civitas ad quia.
                            </p>
                            </li>
                            <li class="one-fourth video">
                            <p>
                                <a href="http://www.youtube.com/watch?v=pyOyBVXDJ9Q&amp;feature=relmfu" class="portfolio-item-preview" data-rel="prettyPhoto"><img src="~/Content/img/portfolio/portfolio-img-01.jpg" alt=" " width="210" height="145" class="portfolio-img pretty-box"/></a>
                            </p>
                            <h4><a href="#">Another Video</a></h4>

                            <p>
                                 Lorem ipsum dolor sit amet, tollite fit manibus individuationis omnibus civitas ad quia.
                            </p>
                            </li>
                        </ul>
                        <!--END ul-->
                    </div>
                    <!--END portfolio-wrap-->
</div>

<div style="clear:both; height: 40px"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:46:43.933

经过更多的试验和错误以及额外的搜索，我能够通过将通用脚本和 css 文件移动到 _Layout.cshtml 页面来解决问题，并且仅使用 @RenderSection 为特定视图加载特定 css 或脚本。

我还在学习，但显然 js 文件的顺序会影响它们是否运行。如果有人可以进一步阐明这一点，或者将我引导到有关此主题的 MVC 资源，这将是有帮助的。我希望这对处于相同情况的其他人有所帮助。

# processing - 4乘4数独游戏

> ID：14293598
> 
> 赞同：0
> 
> 时间：2013-01-12T13:05:15.963
> 
> 标签：processing

我有一个任务是制作一个处理草图，制作 4 x 4 数独游戏并使玩家将丢失的数字输入到游戏网格中，我现在面临的问题是制作一个循环或允许玩家输入所有缺失的数字？我已经成功地允许玩家使用 switch 语句和 if 语句输入前 4 个数字，但是程序只通过每个案例的第一个 if 语句，我想让它通过其余的？这是我做的鳕鱼。

```
void setup ()
{
  background (255);
  size (125,125);
  board();
}

void cell (int x , int y , int s )
{
  rect (x,y,s,s);
}

void triple (int x , int y , int s )
{
  for (int i = 0 ; i < 2 ; i ++)
  {
    cell ( x,y,s);
    x += s;
  }
}

void block (int x , int y , int s )
{
  for (int i = 0 ; i < 2 ; i ++)
  {
    triple ( x , y , s);
    y += s;
  }
}

void row (int x , int y , int s )
{
  for ( int i = 0 ; i < 2 ; i ++)
  {
    block ( x , y , s);
    x += (s*2);
  }
}

void cellArray ( int x , int y , int s)
{
  for (int i = 0 ; i < 2 ; i ++)
  {
    row ( x , y , s);
    y += (s*2);

  }
}

void darwLines ( int x , int y , int s)
{
  strokeWeight (3);

  for (int i = 0 ; i < 1 ; i ++)
  {
    x += (s*2);
    line ( x , 0 , x , (s*4));
  }

  for ( int j = 0 ; j < 1 ; j ++)
  {
    y += (s*2);
    line ( 0 , y , (s*4) , y );
  }

  strokeWeight (1);
}

void board ()
{
  cellArray (0,0,30);
  darwLines (0,0,30);
}

void draw ()
{
   int [][] fixedArray = new int [4][4];
   fill (0);
   textSize(28);
    for (int i = 0 ; i < 4 ; i ++)
    {
      for (int j = 0 ; j < 4 ; j ++)
      {
        fixedArray [0][2] = 3; 
        fixedArray [1][1] = 4; 
        fixedArray [2][2] = 4;
        fixedArray [3][3] = 3;

        text(fixedArray [0][2], 65,25);
        text(fixedArray [1][1],35,58);
        text(fixedArray [2][2],65,88);
        text(fixedArray [3][3],95,117);
      }//end of inner loop.
    }//end of outter loop.

  if (mousePressed)
  {
    mouseClicked ();
  }
}
/*------------------------------------------------------------------------------------------*/
void mouseClicked ()
{
  int s = 30 ; 
  int cellX = mouseX / s;
  int cellY = mouseY / s;

  int [][] userInputArray = new int [4][4];

  for (int m = 0 ; m < 4 ; m ++)
  {
    for (int n = 0 ; n < 4 ; n ++)
    {

      switch (key)
     {
        case '1':

          if (mouseX > userInputArray [0][0] -s && mouseX < userInputArray [0][0]+s && mouseY > userInputArray [0][0] -s && mouseY < userInputArray [0][0] +s )
          {
            fill (0,0,255);
            text (key , 10,25);

          }

          else  if (mouseX > userInputArray [1][2] -30 && mouseX < userInputArray [1][2]+30 && mouseY > userInputArray [1][2] -30 && mouseY < userInputArray [1][2] +30)
             {
               fill (0,0,255);
               text ('1' , 65,58);
             }

          else  if (mouseX > userInputArray [2][3] -30 && mouseX < userInputArray [2][3]+30 && mouseY > userInputArray [2][3] -30 && mouseY < userInputArray [2][3] +30)
            {
              fill (0,0,255);
              text('1' ,95,88);
            }

         else   if (mouseX > userInputArray [3][1] -30 && mouseX < userInputArray [3][1]+30 && mouseY > userInputArray [3][1] -30 && mouseY < userInputArray [3][1] +30)
            {
              fill (0,0,255);
              text('1' ,35,117);
            }

          break ; 

          case '2':

            if (mouseX > userInputArray [0][1] -(s-s) && mouseX < userInputArray [0][1]+(s*2) && mouseY > userInputArray [0][1] -s && mouseY < userInputArray [0][1] +s )
            {
              fill (0,0,255);
              text(key ,35,25);
            }
           else  if (mouseX > userInputArray [1][3] - (s-s) && mouseX < userInputArray [1][3] +(s*2) && mouseY > userInputArray [1][3] -(s*2) && mouseY < userInputArray [1][3] +(s*2))
            {
              fill(0,0,255);
              text(key,95,58);
            }
           else  if (mouseX > userInputArray [2][0] -(s-s) && mouseX < userInputArray [2][0] +(s*2) && mouseY > userInputArray [2][0] -(s*2) && mouseY < userInputArray [2][0] +(s*2))
            {
              fill(0,0,255);
              text(key,10,88);
            }
            else if (mouseX > userInputArray [3][2] -(s-s) && mouseX < userInputArray [3][2] +(s*2) && mouseY > userInputArray [3][2] -(s*2) && mouseY < userInputArray [3][2] +(s*2))
            {
              fill(0,0,255);
              text(key,65,117);
            }

          break;

          case '3':

            if ( mouseX > userInputArray [1][0] -s && mouseX < userInputArray [1][0]+s && mouseY > userInputArray [1][0] -(s-s) && mouseY < userInputArray [1][0] +(s*2))
            {
              fill(0,0,255);
              text(key,10,58);
            }
            else if (mouseX > userInputArray [2][1] -s && mouseX < userInputArray [2][1]+s && mouseY > userInputArray [2][1] -(s-s) && mouseY < userInputArray [2][1] +(s*2))
            {
              fill(0,0,255);
              text(key,35,88);
            }

          break ;

          case '4':

            if (mouseX > userInputArray [0][3] +60 && mouseX < userInputArray [0][3]+120 && mouseY > userInputArray [0][3] -30 && mouseY < userInputArray [0][3] +30 )
            {
              fill(0,0,255);
              text(key,95,25);
            }

           else if (mouseX > userInputArray [3][0] +60 && mouseX < userInputArray [3][0]+120 && mouseY > userInputArray [3][0] -30 && mouseY < userInputArray [3][0] +30 )
            {
              fill(0,0,255);
              text(key,10,117);
            }
          break;

          default :
          {
            fill (255);
            rect ((cellX * s),(cellY*s),s,s);
          }
      }//end of switch.

    }//end of the inner loop.
  }//end of the outter for loop.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:16:41.893

我浏览了您的代码，并观察到一些问题：

*   首先，代码相当混乱。drawlines + cellArray + row + ... 可以更优雅地解决，而不需要如此复杂的函数嵌套。

*   显然，您希望 fixedArray 始终保持不变。因此，您不需要在每个绘制循环中定义它并分配值。您可以将该声明移至代码的开头。

*   userInputArray 也是如此，值在任何地方都没有定义，因此等于 0。

*   您在其自身之上绘制每个数字 16 次，这就是它看起来如此古怪的原因......绘制文本时不需要嵌套的 for 循环。

这就是说，请参阅附件中的增强代码提案。它解决了所有问题，如果需要更改数独大小和位置，则更加灵活，并且通常是更一致的代码。

尽管如此，如果你想让这变得真正有趣，试着弄清楚如何生成随机值，这样每个数独都与前一个不同！网上有很多数独生成算法。

祝你好运！

```
// GLOBAL VARS DECLARATION
int[][] resultsValue = {
  {1,2,3,4},
  {3,4,1,2},
  {2,3,4,1},
  {4,1,2,3}};
boolean[][] resultsSolved = new boolean[4][4];
int cellsX = 4;
int cellsY = 4;
float cellSize = 30; 
float xPos = 0;
float yPos = 0;

void setup ()
{
  background (255);
  size (130, 130);
  smooth();

  // GLOBAL VARS VALUE ASSIGNMENT            
  resultsSolved[0][2] = true;
  resultsSolved[1][1] = true;
  resultsSolved[2][2] = true;
  resultsSolved[3][3] = true;
}

void draw ()
{
  background(255);

  drawBoard(cellsX, cellsY, cellSize, xPos, yPos, 2);

  pushStyle();
  fill (0);
  textSize(28);

  for (int i = 0; i < 4; i++) {
    for (int j = 0; j < 4; j++) {
      if (resultsSolved[i][j] == true) {
         text(resultsValue[i][j], 5 + xPos + j * cellSize, -5 + yPos + (i + 1) * cellSize);
      }
    }
  }

  popStyle();

  if (mousePressed)
  {
    mouseClicked ();
  }

}

/*------------------------------------------------------------------------------------------*/

void drawBoard(int rows, int cols, float cellSize, float xPos, float yPos, int cellBlocks) {
  pushStyle();
  noFill();
  stroke(0);
  strokeWeight(1);

  // DRAW RECTANGLES
  for (int i = 0; i < cols; i++) {
    for (int j = 0; j < rows; j++) {
      rect(xPos + i * cellSize, yPos + j * cellSize, cellSize, cellSize);
    }
  }

  strokeWeight(3);

  // DRAW LINES
  for (int i = 0; i < cols / cellBlocks; i++) {
      line(xPos + i * cellSize * cellBlocks, yPos, xPos + i * cellSize  * cellBlocks, yPos + rows * cellSize); 
  }
  for (int i = 0; i < rows / cellBlocks; i++) {
      line(xPos, yPos + i * cellSize * cellBlocks, xPos + cols * cellSize, yPos + i * cellSize * cellBlocks); 
  }

  popStyle();
} 

void mouseClicked ()
{
  int cellX = (int) ((mouseX - xPos) / cellSize); 
  if (cellX > cellsX - 1) cellX = cellsX - 1;
  else if (cellX < 0) cellX = 0;

  int cellY = (int) ((mouseY - yPos) / cellSize); 
  if (cellY > cellsY - 1) cellY = cellsY - 1;
  else if (cellY < 0) cellY = 0;

  int lastKeyInt = int(key - '0');

  if (resultsValue[cellY][cellX] == lastKeyInt) {
    resultsSolved[cellY][cellX] = true;
  }
} 
```

# javascript - 是否有 JavaScript/jQuery 库来处理输入的自动方向？

> ID：14293600
> 
> 赞同：-1
> 
> 时间：2013-01-12T13:05:36.307
> 
> 标签：javascript, jquery, html, input, bidi

我正在寻找一个 jQuery 库来帮助处理双向性

谷歌在闭包库中有一个，但我觉得仅仅为了双向输入支持而包含所有库是一种浪费（除非你另外推荐我） [http://closure-library.googlecode.com/svn/trunk/closure /goog/demos/bidiinput.html](http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/bidiinput.html)

google 闭包库是一个看似无穷无尽的文件集合，具有许多依赖项。我看不出将它用于 1 个功能是如何有效的

[http://closure-library.googlecode.com/svn/trunk/closure/goog/](http://closure-library.googlecode.com/svn/trunk/closure/goog/)

**更新**

我从一个drupal项目中找到了[这个。](http://drupal.org/project/jquery_bidi)我无法使它工作。有人知道吗？

**更新2**

似乎`dir=auto`在输入字段中添加“”可以处理它。适用于 chrome 和 ff。任何人都可以证实这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:19:56.153

`dir=auto`应该修复它。

它在 html5 标准中，虽然 safari 不能使用它

[http://www.w3.org/International/tutorials/new-bidi-xhtml/qa-html-dir](http://www.w3.org/International/tutorials/new-bidi-xhtml/qa-html-dir)

适用于 chrome 和 firefox。

谢谢我:)

# .net - 在 AxSHDocVw.AxWebBrowser 中拦截 Ctrl-V 或 WM_PASTE 并进行清理

> ID：14293601
> 
> 赞同：0
> 
> 时间：2013-01-12T13:05:42.597
> 
> 标签：.net, axwebbrowser

我正在使用一个 winform **HTML 编辑器**，它使用`AxSHDocVw.AxWebBrowser`. 用户正在将其他软件中的文本复制并粘贴到此控件中。问题是，粘贴`Ctrl-V`时会添加一些字体标签以保留格式。我不想保留格式，它应该粘贴没有格式的干净文本，或者至少不应该添加`FONT`标签。我认为是拦截`Ctrl-V`和粘贴清理剪贴板文本之前。

所以，我尝试拦截`WM_PASTE`消息并用固定测试（只是为了检查）替换剪贴板内容，如下所示

```
class myWB : AxSHDocVw.AxWebBrowser
{
    protected override void WndProc(ref Message m)
    {
        if (m.Msg == 0x302)     // Trap WM_PASTE:
        {
            Clipboard.Clear();
            Clipboard.SetText("some text");
            return;
        }
        base.WndProc(ref m);
    }
} 
```

但它不起作用。我在 IF 块之前添加了以下内容，以查看它是否正在接收`WM_PASTE`消息。

```
Debug.WriteLine(m.Msg); 
```

在运行时，即使在多个`Ctrl-V`.

它没有收到该消息吗？

那么有什么办法呢？粘贴前如何清理文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:46:41.287

WM_PASTE 不是通知，而是*命令*。您将发送到 EDIT 控件以使其将剪贴板粘贴到控件中。

当然，网络浏览器不是编辑框，所以不会以同样的方式进行。您将需要拦截 IHtmlElement2.onpaste 事件。

# javascript - 动态加载 jQuery 仅在某些站点中失败

> ID：14293607
> 
> 赞同：0
> 
> 时间：2013-01-12T13:07:17.377
> 
> 标签：javascript, jquery

## 代码：

```
p_initJQuery();

function p_initJQuery() {
if (typeof jQuery === "undefined") {
    var script_tag = document.createElement('script');
    script_tag.setAttribute("type", "text/javascript");
    script_tag.setAttribute("src", "http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js")
    script_tag.onload = punctis_load_box;
    script_tag.onreadystatechange = function() {
        if (this.readyState == 'complete' || this.readyState == 'loaded') punctis_load_box();
    }
    document.getElementsByTagName("head")[0].appendChild(script_tag);
} else {
     punctis_load_box();
}
}

function punctis_load_box() {
    $(".punctis-social-box").html(typeof jQuery);
} 
```

* * *

这就是我控制站点的方式尚未加载 jquery，因为此代码旨在插入到我不知道任何内容的页面上，如果未加载，它会加载它。这在我的[测试站点](http://infoabout.me/punctis/punctis.php)上运行良好，但如果我在另一个更[复杂](http://www.delfinsblog.it/2013/01/06/bigdata-analysis-for-improve-the-hiring-process/)的站点上尝试它，它会失败并出现*Uncaught TypeError: Property '$' of object [object Window] is not a function*

我不知道发生了什么事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:18:34.843

当之前没有定义 jQuery 时，您的代码会加载 jQuery，但您的网站已经有 jQuery。

（我认为它包含在您的 wordpress 主题中）

所以你可以使用这个`jQuery`对象。如果不能使用`$`，那是因为 jQuery 处于“无冲突模式”下。

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

只需使用`jQuery`代替`$`或重新`$`定义`window.$ = jQuery.noConflict();`

# c++ - C++处理文件冻结程序

> ID：14293608
> 
> 赞同：0
> 
> 时间：2013-01-12T13:07:17.853
> 
> 标签：c++

我正在开发一个小程序，该程序采用输入文件并处理文件中的数据。使用我当前的代码（见下文），当您输入有效的文件名时，它只会冻结命令行（下拉一行并仅显示闪烁的 _ ），我必须终止程序才能退出。如果您输入无效的文件名，则 if(!file) 会被调用并正常运行。真正奇怪的是，如果我在 if 语句上方放置一个调试 cout，如果文件名正确，它将不会被调用。希望您能提供帮助，如果您需要更多信息，请告诉我！

这是我当前的代码：

```
using namespace std;
#include <iostream>
#include <stdexcept>
#include <string>
#include <fstream>
#include <vector>
#include <cctype>
#include "Student.h"

int main(){
    string filename, name;
    char *inputfile;
    ifstream file;
    vector<Student> students;
    const int SIZE = 200;
    char buffer [SIZE];
    int regno, i;

    cout << "Enter file name: ";
    cin >> filename;
    inputfile = const_cast<char*> (filename.c_str());
    file.open(inputfile);
    if (!file){
        cout << "Failed to open " << filename << endl;
        exit(1);
    }
    while (!file.eof()){
        file.getline(buffer, SIZE);
        i = 0;
        regno = 0;
        while (isdigit(buffer[i])){
            regno = (regno*10)+buffer[i];
        }
        cout << regno;
    }
    file.close();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T13:11:38.557

你的问题是你永远不会在循环中增加 i 。

这里：

```
 i = 0;
    regno = 0;
    while (isdigit(buffer[i])){
        regno = (regno*10)+buffer[i];
    } 
```

你进入无限循环，因为我总是保持 0。

另外你为什么要做const_cast？您也可以使用 const char * 打开。所以你可以这样写：

```
cin >> filename;
file.open(filename.c_str()); 
```

并且代码仍然可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T13:19:05.560

您的代码中还有一个关于使用`getline()`and的问题`eof()`。逐行读取文件的惯用方法是：

```
std::string line;
while(getline(in, line)) {
    // handle line here
} 
```

`in`指一些输入流，例如 std::ifstream 或 std::cin。关键是读取一行可能会失败（例如，由于 EOF），您可以在上面的循环中检查它。您的版本仅检查之前是否遇到过 EOF，但不会检查后续`getline()`调用是否实际产生任何数据。

# python - 从 Python 中的另一个列表中排除一个列表中的项目的有效方法

> ID：14293610
> 
> 赞同：3
> 
> 时间：2013-01-12T13:07:33.917
> 
> 标签：python, string, list, tokenize, stop-words

我有一个包含 8000 个字符串 (stop_words) 的列表和一个包含 100,000 个不同长度的字符串的列表，这些字符串包含数百万个单词。我正在使用该函数对 100,000 个字符串进行标记，并从列表 stop_words 中排除非字母数字标记和标记。

```
 def tokenizer(text):

       return [stemmer.stem(tok.lower()) for tok in nltk.word_tokenize(text)/ 
       if tok.isalpha() and tok.lower() not in stop_words] 
```

我已经使用 600 个字符串测试了这段代码，它需要 60 秒。如果我删除排除停用词的条件，则在相同的 600 个字符串上需要 1 秒

```
 def tokenizer(text):

       return [stemmer.stem(tok.lower()) for tok in nltk.word_tokenize(text)/ 
       if tok.isalpha()] 
```

我希望有一种更有效的方法可以从另一个列表中排除在一个列表中找到的项目。

我很感激任何帮助或建议

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T13:10:19.030

做`stop_words`一个集合，以便查找是 O(1)。

```
stop_words = set(('word1', 'word2', 'word3')) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T13:12:50.540

*   做`stop_words`一个集合，因为[检查集合中的成员](http://wiki.python.org/moin/TimeComplexity)是 O(1)，而检查列表中的成员是 O(N)。
*   为每个令牌调用`lower()`（`text`一次）而不是两次。`lower()`

* * *

```
stop_words = set(stop_words)
def tokenizer(text):
   return [stemmer.stem(tok) for tok in nltk.word_tokenize(text.lower())
           if tok.isalpha() and tok not in stop_words] 
```

* * *

由于访问局部变量比查找限定名称更快，因此您还可以通过 make`nltk.word_tokenize`和`stemmer.stem`local 获得一点速度：

```
stop_words = set(stop_words)
def tokenizer(text, stem = stemmer.stem, tokenize = nltk.word_tokenize):
   return [stem(tok) for tok in tokenize(text.lower())
           if tok.isalpha() and tok not in stop_words] 
```

`stem`和的默认值在*定义*函数时`tokenize`设置*一次*。里面,和是局部变量。通常这种微优化并不重要，但既然你调用 了 100K 次，它可能对你有一点帮助。`tokenizer`*`tokenizer``stem``tokenize``tokenizer`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T13:12:19.557

使用集：

```
{x for x in one_list} - other_list 
```

但是，它会删除重复项和排序，因此如果很重要，您还需要其他东西。*

# iphone - REST 到 Javascript API，可能吗？

> ID：14293611
> 
> 赞同：1
> 
> 时间：2013-01-12T08:26:47.227
> 
> 标签：iphone, translation

所以基本上我有一个两难境地，我没有解决方案。

我想创建一个调用 Google 的翻译和音译 API 的 iPhone 应用程序。翻译 API 在 php 中工作，因此我可以使用 iPhone 应用程序中的 REST 调用来调用它。

Google 音译 API 仅适用于 JavaScript。JavaScript 在浏览器运行 JavaScript 代码时呈现，那么我将如何从 iPhone 应用程序调用 JavaScript 库以便结果可以返回给我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:38:09.910

您可以在 UIWebview 的帮助下使用以下命令从目标 c 运行 javascript 代码

```
[webView stringByEvaluatingJavaScriptFromString: [NSString stringWithFormat:@"myJSFunction(%@)", parameters]]; 
```

你甚至可以得到回复[试试这个教程](http://stevenpsmith.wordpress.com/2011/01/20/executing-javascript-from-objective-c-in-an-ios-app/)

希望这无论如何都会对您有所帮助。

# sql - Convert varchar to time

> ID：14293617
> 
> 赞同：7
> 
> 时间：2013-01-12T13:09:03.423
> 
> 标签：sql, sql-server

I have tried the links available here for similar questions before but it does not work. So I am posting my case here.

I have time in format:

```
09:47:11:895799 
```

This is stored as `varchar(50)` in my Microsoft SQL Server database.

I am trying to convert it to time format as on this [link](http://msdn.microsoft.com/en-us/library/ms186724.aspx).

```
hh:mm:ss[.nnnnnnn] 
```

Can you please help?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-12T13:17:35.373

The string is in the wrong format. It should be `09:47:11.895799`. You need to replace the final `:` with a `.`

```
SELECT CAST(STUFF('09:47:11:895799', 9,1,'.') AS TIME) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-12T13:49:35.960

You can also make your string as `hh:mi:ss:mmm` (24 hour format) and then `convert` as time. That means trimming out last 3 digits from your milli seconds without replacing last `':'` with `'.'`

Here is [MSDN link](http://msdn.microsoft.com/en-us/library/ms187928.aspx) for more details of formatting. Here is working example of [SQL Fiddle](http://sqlfiddle.com/#!3/d41d8/7694)

```
DECLARE @s varchar(50) = '09:47:11:895799'
SELECT Convert(time, Left(@s,Len(@s)-3), 114) 
```

# android - 在android gson中存储对象

> ID：14293618
> 
> 赞同：0
> 
> 时间：2013-01-12T13:09:17.060
> 
> 标签：android, json, store, gson

> **可能重复：**
> [GSON 抛出“预期 BEGIN_OBJECT 但为 BEGIN_ARRAY”？](https://stackoverflow.com/questions/9598707/gson-throwing-expected-begin-object-but-was-begin-array)

我正在尝试将对象存储在 android 中，但我遇到了阅读问题

我的对象

```
public class User {
    private String login;
    private String password;

    public User(String login, String password){
        this.login = login;
        this.password = password;
    }

    public String getLogin(){
        return this.login;
    }
} 
```

我将我的对象保存在内部存储设备中

```
String FILENAME = getString(R.string.store);

User storeUser = new User(user.getText().toString(), password.getText().toString());

Gson gson = new Gson();

String data = gson.toJson(storeUser);

JSONArray mJSONArray = new JSONArray(Arrays.asList(data));

String string = mJSONArray.toString();

FileOutputStream fos;
fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
fos.write(string.getBytes());
fos.close(); 
```

我试着阅读

```
String FILENAME = getString(R.string.store);

FileInputStream fis;

fis =  openFileInput(FILENAME);

InputStreamReader inputStreamReader = new InputStreamReader(fis);
BufferedReader bufferedReader = new BufferedReader(inputStreamReader);
StringBuilder sb = new StringBuilder();
String line;
while ((line = bufferedReader.readLine()) != null) {
    sb.append(line);
}

System.out.println(sb.toString());

Gson gson = new Gson();

User user = gson.fromJson(sb.toString(), User.class);

System.out.println(user.getLogin()); 
```

我有

```
01-12 14:06:36.703: I/System.out(30366): [" {\"login\":\"username2\",\"password\":\"password\"}"]
01-12 14:06:36.753: D/AndroidRuntime(30366): Shutting down VM
01-12 14:06:36.753: W/dalvikvm(30366): threadid=1: thread exiting with uncaught exception (group=0x400205a0)
01-12 14:06:36.753: E/AndroidRuntime(30366): FATAL EXCEPTION: main
01-12 14:06:36.753: E/AndroidRuntime(30366): com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was BEGIN_ARRAY at line 1 column 2
01-12 14:06:36.753: E/AndroidRuntime(30366):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:176)
01-12 14:06:36.753: E/AndroidRuntime(30366):    at com.google.gson.Gson.fromJson(Gson.java:795)
01-12 14:06:36.753: E/AndroidRuntime(30366):    at com.google.gson.Gson.fromJson(Gson.java:761)
01-12 14:06:36.753: E/AndroidRuntime(30366):    at com.google.gson.Gson.fromJson(Gson.java:710)
01-12 14:06:36.753: E/AndroidRuntime(30366):    at com.google.gson.Gson.fromJson(Gson.java:682)
01-12 14:06:36.753: E/AndroidRuntime(30366):    at ant.junior.geoloc.MainActivity$1.onClick(MainActivity.java:65)
01-12 14:06:36.753: E/AndroidRuntime(30366):    at android.view.View.performClick(View.java:2532)
01-12 14:06:36.753: E/AndroidRuntime(30366):    at android.view.View$PerformClick.run(View.java:9293)
01-12 14:06:36.753: E/AndroidRuntime(30366):    at android.os.Handler.handleCallback(Handler.java:587)
01-12 14:06:36.753: E/AndroidRuntime(30366):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-12 14:06:36.753: E/AndroidRuntime(30366):    at android.os.Looper.loop(Looper.java:150)
01-12 14:06:36.753: E/AndroidRuntime(30366):    at android.app.ActivityThread.main(ActivityThread.java:4277)
01-12 14:06:36.753: E/AndroidRuntime(30366):    at java.lang.reflect.Method.invokeNative(Native Method)
01-12 14:06:36.753: E/AndroidRuntime(30366):    at java.lang.reflect.Method.invoke(Method.java:507)
01-12 14:06:36.753: E/AndroidRuntime(30366):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-12 14:06:36.753: E/AndroidRuntime(30366):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-12 14:06:36.753: E/AndroidRuntime(30366):    at dalvik.system.NativeStart.main(Native Method)
01-12 14:06:36.753: E/AndroidRuntime(30366): Caused by: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was BEGIN_ARRAY at line 1 column 2
01-12 14:06:36.753: E/AndroidRuntime(30366):    at com.google.gson.stream.JsonReader.expect(JsonReader.java:339)
01-12 14:06:36.753: E/AndroidRuntime(30366):    at com.google.gson.stream.JsonReader.beginObject(JsonReader.java:322)
01-12 14:06:36.753: E/AndroidRuntime(30366):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:165)
01-12 14:06:36.753: E/AndroidRuntime(30366):    ... 16 more 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:04:32.487

好的，我找到了错误，en encode 2 次。

# opencv - 在 Eclipse 中打开 CV 项目？

> ID：14293622
> 
> 赞同：-1
> 
> 时间：2013-01-12T13:10:01.707
> 
> 标签：opencv

我将在 Android 中开发一个项目，项目理念是：相机将打开，它会从名片等中识别电子邮件地址、电话号码、地址等字符串。我已经配置并安装了 cygwin 并进行了编译/在 Eclipse 中运行许多 c++ 程序，但现在我想知道，我是否应该安装 Open CV（如 OpenCV2.0）并将其文件包含在 C++ 项目中，或者我应该下载 OpenCV SDK 并包含在我的 Android 项目中。请帮助，例如我有这个代码用于使用打开的 cv 显示图像，但我需要使用 CAMERA 然后重新识别图片

```
 #include "cv.h"
 #include "highgui.h"
//using namespace openCV2;
int main()//int argc, char *argv[])
{
  IplImage* img = cvLoadImage("prado.jpg",1);
  cvNamedWindow( "Example1",1);
  cvShowImage("Example1", img );
  cvWaitKey(0);//*/

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T10:19:20.597

如果你想在 android 上设置项目使用 opencv，你可以尝试使用 opencv for android 或 opencv for windows，opencv for android SDK 使用 JAVA API，opencv for windows SDK 使用 C++ API。我推荐在android上使用JAVA API，如果你必须使用C++ API你可以参考android NDK信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-23T14:48:01.807

对于 Android 中的图像处理相关操作，请使用[OpenCV-Android-SDK](http://sourceforge.net/projects/opencvlibrary/files/opencv-android/2.4.9/OpenCV-2.4.9-android-sdk.zip/download)。

SDK 包含示例应用程序，如相机预览、人脸识别等，以及使用 OpenCV 的 Android 应用程序需要的 OpenCV 库。

有关与 eclipse 的集成和其他相关信息，请访问：

1.  [适用于 Android 的 OpenCV](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/O4A_SDK.html#get-the-opencv4android-sdk)
2.  [Tutorial-2-OpenCV-for-Android-Setup-Linux](http://web.stanford.edu/class/ee368/Android/Tutorial-2-OpenCV-for-Android-Setup-Linux-API11.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T08:01:33.917

这是一个使用openCV的已经编译的项目，示例将实时获取rgb颜色。 [为android编译的opencv项目](https://github.com/yoggy/ColorPickerCamera)

# html - 三级 CSS 下拉菜单

> ID：14293625
> 
> 赞同：0
> 
> 时间：2013-01-12T13:10:23.377
> 
> 标签：html, css, drop-down-menu

我有一个 CSS 下拉列表，基本上是这样的：http: [//jsfiddle.net/2RgmH/](http://jsfiddle.net/2RgmH/)

```
<ul id="menu">
  <li><span>Example 1</span>
    <ul>
      <li><span>Level 2-A-1</span></li>
      <li><span>Level 2-A-2</span></li>
      <li><span>Example 2</span>
        <ul>
          <li><span>Example 3</span>
          <li><span>Level 3-A-2</span></li>                   
          <li><span>Level 3-A-3</span></li>                                       
        </ul>
      </li>            
      <li><span>Level 2-A-4</span></li>            
    </ul>
  </li>
  <li><span>Level 1-B</span></li>
  <li><span>Level 1-C</span></li>
  <li><span>Level 1-D</span></li>
  <li><span>Level 1-E</span></li>
</ul>

#menu > li > ul li > ul{   /* Third Level & beyond */
  display:none;
  background:#068;
}
#menu > li > ul li:hover > ul{
  display:block;
  position:absolute;
  left:100%;
  border-left:solid 3px #fff;
  top:0;
  width:auto;
}
#menu > li > ul > li ul > li{
  display:block;
  padding:3px 10px;
  border-top:solid 3px #fff;
  white-space:nowrap;
}
#menu > li > ul > li ul > li:hover > span{
  color:#fff;
} 
```

我希望第 3 级与第 2 级对齐。将第 3 级下拉菜单更改为 position:relative 几乎可以做到这一点，但它将示例 2 的大小增加到第 3 级菜单的大小 - 不好。

我哪里错了？

编辑：

我应该链接到实际的例子，道歉。我正在处理的页面在这里： http: [//gmnscouts.org.uk/index2.php/](http://gmnscouts.org.uk/index2.php/) - 这是第二个菜单。如果你去县 > 活动，你会看到我的问题。li 伸展以适应 ul。这是将其设置为相对的。将其设置为绝对会将菜单推到顶部，这也是不受欢迎的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:39:40.097

添加这个CSS：

```
ul.children li ul.children {
position: absolute;
left: 100%;
top: 0;
}
ul.children > li { position: relative; } 
```

通过绝对定位，三级菜单不会占用任何空间，因为它会在自己的层中。

# php - ip blocker 类阻止“crawl-66-249-76-64.googlebot.com”，对吗？

> ID：14293626
> 
> 赞同：2
> 
> 时间：2013-01-12T13:10:24.593
> 
> 标签：php, ip, detection, bots

我写了一个非常强大的保护类“BlockIp”，它可以使用带有 IP 的黑名单，可以检测奇怪的 IP 配置，还可以阻止代理。

当它找到一个时，我会收到一封关于访问者的详细电子邮件，它被阻止的原因以及他们试图做什么（当然每天一次）。看起来它工作得很好，因为我过去收到了一些被这个类阻止的真实攻击。它不会阻止合法的机器人，但要测试检测方法是否正确并不容易。

今天我收到一封来自班级的电子邮件，它已经阻止了“ **crawl-6-249-76-64.googlebot.com** ”，它自称是谷歌机器人。我在网上搜索它是否被列入黑名单，但在任何地方都没有发现它被列入黑名单。在谷歌搜索“66.249.76.64”时，我发现许多站点都列出了该 IP。

我收到了来自班级的两封错误电子邮件。第一个是当“bot”尝试访问“robots.txt”时，第二个是当它尝试访问站点的根目录时。

我的问题是：这是不是谷歌机器人？（如果属实，则检测有问题，我必须修复它）。在谷歌的ip-range中没有找到IP：http: [//chceme.info/ips/](http://chceme.info/ips/)

这里有一些关于机器人的信息：

```
Ticket ID : {EVNT_117162_2013011220130110_32925_19904}
Event type : Access blocked
Event date : 01/12/2013 - 03:53:01 (server date-time)
Event counter : First occurring
Processed url : mysite/robots.txt
From url : Unknown or direct link
Domain : mysite
Domain IP : 000.000.000.000
Visitor IP : 66.249.76.64
Proxy IP : (not present)

Problem : Potential danger detected - 66.249.76.64
Hostname : crawl-66-249-76-64.googlebot.com
Block : Yes
Refferer : (direct access)
AgentString : Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)
Browser : Mozilla 5.0
Platform : Unknown Platform
Robot : Yes - Googlebot
Mobile : No
Tablet : No
Console : No
Crawler : Yes
Agent_type : crawler
Agent_name : googlebot
Agent_version : 2.1
Os_type : unknown
Os_name : unknown
Agent_languagetag : en
Status : ok
Request : 66.249.76.64
Languagecode : us
Country : United States
Region : California
City : Mountain View
Zipcode : 94043
Latitude : 37.3861
Longitude : -122.084
Timezone : -08:00
Areacode : 650
Dmacode : 807
Continentcode : na
Regioncode : ca
Currencycode : USD
Currencysymbol : &#36;
Currencysymbol_utf8 : $
Currencyconverter : 1
Extended : 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:25:01.283

首先，是的，这是谷歌。您可以按照此处所述验证 Google Bot： https: [//support.google.com/webmasters/bin/answer.py?hl=](https://support.google.com/webmasters/bin/answer.py?hl=en&answer=80553)
en&answer=80553 顺便说一句：“第一个是“bot”尝试访问 "robots.txt" " 应该始终允许机器人访问 /robots.txt

# zend-framework - 在 Elastic Beanstalk 上部署 zend 应用程序失败

> ID：14293627
> 
> 赞同：0
> 
> 时间：2013-01-12T13:10:28.607
> 
> 标签：zend-framework, amazon-ec2, amazon-elastic-beanstalk

我需要帮助才能将我的应用程序部署到 Elastic Beanstalk。到目前为止，我只想部署 Zend 提供的示例，没有 BD、服务等（基础 squeleton 应用程序）。

我已按照以下步骤操作：

*   进入 Elastic Beanstalk 控制台（无应用程序）。

*   创建一个 PHP 5.4 环境。

*   更改（编辑/加载配置 -> 容器选项卡）：文档根= \public

*   单击“上传新版本”并配置部署到现有环境（默认）。

重要的：

*   上传的文件是基本骨架路径的 .Zip 文件。

*   我的项目是在 Windows 下开发的，并使用 xampp 和 PHP 版本 5.4.7。

*   我使用 Eclipse 进行开发，我没有 Zend Studio。

上传后，显示事件错误（无法部署应用程序版本）。

我错了什么？或者缺少哪些步骤才能做好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:00:08.613

我将 zend 文件夹放在项目内的 LIBRARY 上

> /项目文件夹/库/

为我工作

# android - Android 应用程序安装/卸载事件

> ID：14293630
> 
> 赞同：0
> 
> 时间：2013-01-12T13:11:24.640
> 
> 标签：android, installation, uninstallation

有一个应用程序，安装后需要重新启动系统。我注册了引导接收器并将信息写入系统日志。并检查这条线的活动。它运行良好，但有一个问题......

当用户在一个会话中卸载并安装此应用程序（我的意思是用户不重新启动手机）时，系统日志仍然有“手机重新启动”行，并且应用程序运行时出现错误。

据我所知，我无法检查我的应用程序上的卸载事件，因为接收器在应用程序卸载之前停止。所以我的问题是我可以检查我的应用程序安装吗？或者可能以其他方式卸载？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:00:24.413

也许有人会感兴趣。我找到了允许我在安装/更新后检查系统重启的代码：

```
public static boolean phone_rebooted(Context ctx) {
        ApplicationInfo appInfo = ctx.getApplicationInfo();
        String appFile = appInfo.sourceDir;
        long installed = new File(appFile).lastModified();

        long boot_time = System.currentTimeMillis() - SystemClock.elapsedRealtime();
        if(boot_time < installed) {
           return false;
        } else {
           return true;
        }
    } 
```

# android - 是否可以打开 2 个活动而第一个活动不可见

> ID：14293631
> 
> 赞同：0
> 
> 时间：2013-01-12T13:11:30.260
> 
> 标签：android, android-activity

是否可以打开两个活动，其中两个 startActivity 一个接一个，但只有第二个可见。

**我需要的效果是当我在进行活动 A 时转到活动 C... 但打开活动 B**。

堆栈将是 A -> B -> C，但用户只会在按下 A 上的按钮时看到 C 打开。

**我知道我可以覆盖 C 上的 onBackPressed 以便它打开 B ......但我支持 1.6 版所以我不能覆盖动画**......因此，活动 B 将显示为一个新活动，而不是堆栈上的一个已经不是首选行为。

另外，我不是在寻找一个很棒的“技巧”，比如让布局透明或类似的东西。

只想要一个“是”和“如何”，或“否”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:33:37.563

在清单中定义您的 B 活动如下。

```
 <activity 
      android:name=".BrightnessActivity"
      android:label="@string/title_activity_main"
      android:excludeFromRecents="true"
      android:theme="@android:style/Theme.Translucent.NoTitleBar">
 </activity> 
```

并且还覆盖`onResume()`在活动 B 中。在其中调用活动 C`startActivtiy(intent)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:47:00.420

我读到的一切都指向**不可能**。

所以我会满足于此。

# android - 异步内的for循环

> ID：14293632
> 
> 赞同：1
> 
> 时间：2013-01-12T13:11:33.910
> 
> 标签：android, for-loop, android-asynctask, progressdialog

需要帮助从 task2 开始更具体地查看代码，这是错误的来源，但我无法弄清楚。假设如果不建议使用 for 循环，我想要的 require 代码是否还有其他替代方法？除了这个 getInformations，这个类实际上是从我没有上传的 2 个其他类调用的。这就是为什么我需要返回drawable。如果谢谢

> ```
> private AsyncTask<String, Void, String> task;
> private AsyncTask<String, Void, String> task1;
> private AsyncTask<String, Void, Drawable[]> task2; 
> ```

```
public void getInformations(){
    task = new AsyncTask<String, Void, String>() {
        ProgressDialog dialog;
        Bundle bundle;
        String res;
        @Override 
        protected void onPreExecute(){
            dialog = new ProgressDialog(Thoughts.this, ProgressDialog.STYLE_SPINNER);
            dialog.setMessage("Loading Data...");           
            dialog.setCancelable(false);
            dialog.setCanceledOnTouchOutside(false);    

            dialog.show();
        }

        @Override
        protected String doInBackground(String... arg0) {
            bundle = getIntent().getExtras();
            res = bundle.getString("Username");
            return res;
        }

        @Override
        protected void onPostExecute(String result) {
            dialog.dismiss();
            username = result;      

            task1 = new AsyncTask<String, Void, String>() {
                ProgressDialog dialog1;
                ArrayList<NameValuePair> postParameters;
                String response1;
                String res1;
                @Override 
                protected void onPreExecute(){
                    thoughtsDynamicListView = (ListView) findViewById(R.id.lvThoughts);                     

                    postParameters = new ArrayList<NameValuePair>();

                    dialog1 = new ProgressDialog(Thoughts.this, ProgressDialog.STYLE_SPINNER);
                    dialog1.setMessage("Loading Data...");          
                    dialog1.setCancelable(false);
                    dialog1.setCanceledOnTouchOutside(false);   

                    dialog1.show();
                }

                @Override
                protected String doInBackground(String... arg0) {
                    try {
                        response1 = CustomHttpClient.executeHttpPost("http://whatstherex.info/getT.php", postParameters);

                        res1 = response1.toString();

                        res1 = res1.replaceAll("null", "");

                        thoughtsList = res1.toString();

                        return thoughtsList;
                    }catch(Exception e){
                        res1 = e.toString();
                        return res1;
                    }
                }

                @Override
                protected void onPostExecute(String result1) {
                    dialog1.dismiss();

                    feed = result1.split("[_]");

                    task2 = new AsyncTask<String, Void, Drawable[]>() {         
                        ProgressDialog dialog2;
                        InputStream is;
                        Drawable[] d;
                        Drawable p4, p8, p12, p16, p20, p24, p28, p32, p36, p40, p44, p48, p52, p56, p60, p64, p68, p72, p76, p80, p84, p88, p92, p96, p100;
                        @Override 
                        protected void onPreExecute(){
                            dialog2 = new ProgressDialog(Thoughts.this, ProgressDialog.STYLE_SPINNER);
                            dialog2.setMessage("Loading Data...");          
                            dialog2.setCancelable(false);
                            dialog2.setCanceledOnTouchOutside(false);   

                            dialog2.show();
                        }

                        @Override
                        protected Drawable[] doInBackground(String... src) {
                            for(int i=0; i<src.length; i++){
                                try
                                {
                                    is = (InputStream) new URL(src[i]).getContent();
                                    d[i] = Drawable.createFromStream(is, "src name"+i);
                                }catch (Exception e) {
                                    e.toString();
                                }
                            }
                            return d;
                        }

                        @Override
                        protected void onPostExecute(Drawable[] result2) {
                            dialog2.dismiss();  

                            p4 = result2[1];
                            p8 = result2[2];
                            p12 = result2[3];
                            p16 = result2[4];
                            p20 = result2[5];
                            p24 = result2[6];
                            p28 = result2[7];
                            p32 = result2[8];
                            p36 = result2[9];
                            p40 = result2[10];
                            p44 = result2[11];
                            p48 = result2[12];
                            p52 = result2[13];
                            p56 = result2[14];
                            p60 = result2[15];
                            p64 = result2[16];
                            p68 = result2[17];
                            p72 = result2[18];
                            p76 = result2[19];
                            p80 = result2[20];
                            p84 = result2[21];
                            p88 = result2[22];
                            p92 = result2[23];
                            p96 = result2[24];
                            p100 = result2[25];

                            thoughtsInputs.add(new ThoughtsData(feed[1].toString(), feed[2].toString(), feed[3].toString(), p4));
                            thoughtsInputs.add(new ThoughtsData(feed[5].toString(), feed[6].toString(), feed[7].toString(), p8));
                            thoughtsInputs.add(new ThoughtsData(feed[9].toString(), feed[10].toString(), feed[11].toString(), p12));
                            thoughtsInputs.add(new ThoughtsData(feed[13].toString(), feed[14].toString(), feed[15].toString(), p16));
                            thoughtsInputs.add(new ThoughtsData(feed[17].toString(), feed[18].toString(), feed[19].toString(), p20));
                            thoughtsInputs.add(new ThoughtsData(feed[21].toString(), feed[22].toString(), feed[23].toString(), p24));
                            thoughtsInputs.add(new ThoughtsData(feed[25].toString(), feed[26].toString(), feed[27].toString(), p28));
                            thoughtsInputs.add(new ThoughtsData(feed[29].toString(), feed[30].toString(), feed[31].toString(), p32));
                            thoughtsInputs.add(new ThoughtsData(feed[33].toString(), feed[34].toString(), feed[35].toString(), p36));
                            thoughtsInputs.add(new ThoughtsData(feed[37].toString(), feed[38].toString(), feed[39].toString(), p40));
                            thoughtsInputs.add(new ThoughtsData(feed[41].toString(), feed[42].toString(), feed[43].toString(), p44));
                            thoughtsInputs.add(new ThoughtsData(feed[45].toString(), feed[46].toString(), feed[47].toString(), p48));
                            thoughtsInputs.add(new ThoughtsData(feed[49].toString(), feed[50].toString(), feed[51].toString(), p52));
                            thoughtsInputs.add(new ThoughtsData(feed[53].toString(), feed[54].toString(), feed[55].toString(), p56));
                            thoughtsInputs.add(new ThoughtsData(feed[57].toString(), feed[58].toString(), feed[59].toString(), p60));
                            thoughtsInputs.add(new ThoughtsData(feed[61].toString(), feed[62].toString(), feed[63].toString(), p64));
                            thoughtsInputs.add(new ThoughtsData(feed[65].toString(), feed[66].toString(), feed[67].toString(), p68));
                            thoughtsInputs.add(new ThoughtsData(feed[69].toString(), feed[70].toString(), feed[71].toString(), p72));
                            thoughtsInputs.add(new ThoughtsData(feed[73].toString(), feed[74].toString(), feed[75].toString(), p76));
                            thoughtsInputs.add(new ThoughtsData(feed[77].toString(), feed[78].toString(), feed[79].toString(), p80));
                            thoughtsInputs.add(new ThoughtsData(feed[81].toString(), feed[82].toString(), feed[83].toString(), p84));
                            thoughtsInputs.add(new ThoughtsData(feed[85].toString(), feed[86].toString(), feed[87].toString(), p88));
                            thoughtsInputs.add(new ThoughtsData(feed[89].toString(), feed[90].toString(), feed[91].toString(), p92));
                            thoughtsInputs.add(new ThoughtsData(feed[93].toString(), feed[94].toString(), feed[95].toString(), p96));
                            thoughtsInputs.add(new ThoughtsData(feed[97].toString(), feed[98].toString(), feed[99].toString(), p100));                  

                            adaptor = new ThoughtsCustomFeedAdaptor(Thoughts.this, R.layout.thoughtsdata, thoughtsInputs);
                            thoughtsDynamicListView.setAdapter(adaptor);

                        }
                    };                      
                    task2.execute(feed[4], feed[8], feed[12], feed[16], feed[20], feed[24], feed[28], feed[32], feed[36], feed[40], feed[44], feed[48], 
                            feed[52], feed[56], feed[60], feed[64], feed[68], feed[72], feed[76], feed[80], feed[84], feed[88], feed[92], feed[96], feed[100]);                                     
                }
            };
            task1.execute();
        }
    };
    task.execute();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:26:10.390

我认为不可能像那样链接 asynctask，因为 asynctask 应该从 UI 线程启动。

你应该在你的活动中做一个处理程序（在 UI 线程中执行）

```
mhandler = new Handler(getMainLooper(),new Callback() {

            @Override
            public boolean handleMessage(Message msg) {
                switch (msg.what) {
                case (1):
                    task1.execute();
                    break;
                case(2):    
                    break;
                    task2.execute();

                return false;
            }
        }); 
```

在你的 asyncTask 中放一些类似的东西，而不是直接启动任务

```
Message m = new Message();
m.what = 1; // 1 or 2 depends of your task
mhandler.sendMessage(m); 
```

使用此处理程序，您的任务将从 UI 线程开始。

# php - 编辑器（所见即所得编辑器）/图像上传/经典 ASP/JSON

> ID：14293633
> 
> 赞同：3
> 
> 时间：2013-01-12T13:11:37.920
> 
> 标签：php, json, asp-classic

对，在与各种所见即所得编辑器合作多年后，我实际上正在考虑购买 imperavi 的编辑器所见即所得编辑器 ( [http://imperavi.com/redactor/](http://imperavi.com/redactor/) )，但是我正在尝试使用试用版和经典 ASP为了使用脚本的图像/文件上传功能，目前图像/文件上传功能是用 PHP/JSON 编写的，并且很想将它们重写为 Classic ASP。

我将尝试在下面尽可能多地发布代码：

**带有编辑器所见即所得的 HTML 表单**

```
<!DOCTYPE html>
<html>
<head>  
    <title>All uploads</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="../css/style.css" />       
    <link rel="stylesheet" href="../redactor/redactor.css" />
    <script type="text/javascript" src="../lib/jquery-1.8.2.min.js"></script>   
    <script src="../redactor/redactor.js"></script>
    <script type="text/javascript">
    $(document).ready(
        function()
        {
            $('#redactor_content').redactor({   
                imageUpload: '../demo/scripts/image_upload.php',
                fileUpload: '../demo/scripts/file_upload.php',
                imageGetJson: '../demo/json/data.json'
            });
        }
    );
    </script>               
</head>

<body>
    <div id="page">
    <textarea id="redactor_content" name="content">
        <h2>Hello and Welcome</h2>
        <p>I never did quite grasp him, though he endeavored to explain it to me upon numerous occasions.  I suggested telepathy, but he said no, that it was not telepathy since they could only communicate when in each others' presence, nor could they talk with the Sagoths or the other inhabitants of Pellucidar by the same method they used to converse with one another.</p>
        <p>"What they do," said Perry, "is to project their thoughts into the fourth dimension, when they become appreciable to the sixth sense of their listener.  Do I make myself quite clear?"</p>
        <p>"You do not, Perry," I replied.  He shook his head in despair, and returned to his work.  They had set us to carrying a great accumulation of Maharan literature from one apartment to another, and there arranging it upon shelves.  I suggested to Perry that we were in the public library of Phutra, but later, as he commenced to discover the key to their written language, he assured me that we were handling the ancient archives of the race.</p>
        <p>During this period my thoughts were continually upon Dian the Beautiful.  I was, of course, glad that she had escaped the Mahars, and the fate that had been suggested by the Sagoth who had threatened to purchase her upon our arrival at Phutra.  I often wondered if the little party of fugitives had been overtaken by the guards who had returned to search for them.  Sometimes I was not so sure but that I should have been more contented to know that Dian was here in Phutra, than to think of her at the mercy of Hooja the Sly One.  Ghak, Perry, and I often talked together of possible escape, but the Sarian was so steeped in his lifelong belief that no one could escape from the Mahars except by a miracle, that he was not much aid to usâ€”his attitude was of one who waits for the miracle to come to him.</p>   
    </textarea> 
    </div>                      
</body>
</html> 
```

**PHP 图像上传脚本**- (imageUpload: '../demo/scripts/image_upload.php')

```
<?php

// This is a simplified example, which doesn't cover security of uploaded images. 
// This example just demonstrate the logic behind the process. 

// files storage folder
$dir = '/home/web/sitecom/images/';

$_FILES['file']['type'] = strtolower($_FILES['file']['type']);

if ($_FILES['file']['type'] == 'image/png' || $_FILES['file']['type'] == 'image/jpg' || $_FILES['file']['type'] == 'image/gif' || $_FILES['file']['type'] == 'image/jpeg' || $_FILES['file']['type'] == 'image/pjpeg')
{
    // setting file's mysterious name
    $filename = md5(date('YmdHis')).'.jpg';
    $file = $dir.$filename;

    // copying
    copy($_FILES['file']['tmp_name'], $file);

    // displaying file    
    $array = array(
        'filelink' => '/images/'.$filename
    );

    echo stripslashes(json_encode($array));   

}

?> 
```

**数据 JSON 文件**- (imageGetJson: '../demo/json/data.json')

```
[
    { "thumb": "json/images/1_m.jpg", "image": "json/images/1.jpg", "title": "Image 1", "folder": "Folder 1" },
    { "thumb": "json/images/2_m.jpg", "image": "json/images/2.jpg", "title": "Image 2", "folder": "Folder 1" },
    { "thumb": "json/images/3_m.jpg", "image": "json/images/3.jpg", "title": "Image 3", "folder": "Folder 1" },
    { "thumb": "json/images/4_m.jpg", "image": "json/images/4.jpg", "title": "Image 4", "folder": "Folder 1" },
    { "thumb": "json/images/5_m.jpg", "image": "json/images/5.jpg", "title": "Image 5", "folder": "Folder 1" },
    { "thumb": "json/images/1_m.jpg", "image": "json/images/1.jpg", "title": "Image 6", "folder": "Folder 1" },
    { "thumb": "json/images/2_m.jpg", "image": "json/images/2.jpg", "title": "Image 7", "folder": "Folder 1" },
    { "thumb": "json/images/3_m.jpg", "image": "json/images/3.jpg", "title": "Image 8", "folder": "Folder 1" },
    { "thumb": "json/images/4_m.jpg", "image": "json/images/4.jpg", "title": "Image 9", "folder": "Folder 1" },
    { "thumb": "json/images/5_m.jpg", "image": "json/images/5.jpg", "title": "Image 10", "folder": "Folder 2" },
    { "thumb": "json/images/1_m.jpg", "image": "json/images/1.jpg", "title": "Image 11", "folder": "Folder 2" },
    { "thumb": "json/images/2_m.jpg", "image": "json/images/2.jpg", "title": "Image 12", "folder": "Folder 2" } 
] 
```

**额外的信息：**

起初我无法让图像库显示任何图像，再次浏览stackoverflow后我发现：（[Get IIS6 to serve JSON files (inc. POST,GET)?](https://stackoverflow.com/questions/332988/get-iis6-to-serve-json-files-inc-post-get)）它说：

默认情况下，W2K3 及更高版本中的 IIS 不会提供不是它知道的 MIME 类型的文件（而是返回 404 错误）。

您需要将 MIME 类型添加到 IIS 以允许它为该类型的文件提供服务。您可以在站点级别或服务器级别进行设置。

为整个服务器设置这个：

```
Open the properties for the server in IIS Manager and click MIME Types
Click "New". Enter "JSON" for the extension and "application/json" for the MIME type. 
```

完成此操作后，我可以单击“插入图像”按钮并使用选项选择查看服务器上的实际图像。

现在我需要开始将上述内容重新写入经典 ASP。

出于这个问题的目的，我创建了一个名为“all_uploads_classic_asp.html”的新页面，它基本上是“all_uploads.html”的副本，并带有一些修改过的代码，请参阅我对以下代码的更改：

原版：

```
 <script type="text/javascript">
    $(document).ready(
        function()
        {
            $('#redactor_content').redactor({   
                imageUpload: '../demo/scripts/image_upload.php',
                fileUpload: '../demo/scripts/file_upload.php',
                imageGetJson: '../demo/json/data.json'
            });
        }
    );
    </script> 
```

修正版：

```
 <script type="text/javascript">
    $(document).ready(
        function()
        {
            $('#redactor_content').redactor({   
                imageUpload: '../demo/scripts/image_upload.asp',
                fileUpload: '../demo/scripts/file_upload.asp',
                imageGetJson: '../demo/json/data.json'
            });
        }
    );
    </script> 
```

然后我创建了一个名为“image_upload.asp”的新页面，它与原始 PHP 版本“image_upload.php”位于同一目录中

**经典 ASP 上传脚本**

```
<%
' This is a simplified example, which doesn't cover security of uploaded images. 
' This example just demonstrate the logic behind the process in Classic ASP
' Written by I.Hekkenberg (DevCentral)

' files storage folder and path
Dim MySaveFolder, MySaveFolderPath
    MySaveFolder     = "../demo/json/images/"
    MySaveFolderPath = "d:\internet\root\www\devcentral.co.uk\wwwroot\demo\wysiwyg\demo\json\images\"

' Server / Script Timeout for storage larger images
    Server.ScriptTimeout = 1200
    Set objUpload = Server.CreateObject("Persits.Upload")
        On Error Resume Next
        objUpload.OverwriteFiles = False
        objUpload.SetMaxSize 5242880    ' Limit files to 5MB
        objUpload.SaveVirtual(MySaveFolder)

        ' display error message
        If Err <> 0 Then 
            Response.Write "<br />ERROR file uploading: " & Err.Description & " | " & MySaveFolder
            Err.Clear
        ' no error occured so continue as normal
        Else
            ' ======================================================
            ' HELP NEEDED WITH REWRITTING THE BELOW INTO CLASSIC ASP
            '                                                       
            '   // displaying file                                  
            '   $array = array(                                     
            '   'filelink' => '/images/'.$filename                  
            '   );                                                  
            '   echo stripslashes(json_encode($array));             
            '                                                       
            ' ======================================================
        End If
    Set objUpload = Nothing
%> 
```

现在我被困在哪里了，谢谢

如果您需要更多信息，请询问，我会尽快更新

伊万·赫肯伯格

**更新：16/01/2013**

我已按照“ulluoink”的说明将代码修改为以下内容，但实际上传图像仍然没有运气。<% ' 这是一个简化的例子，不包括上传图片的安全性。' 这个例子只是演示了 Classic ASP 中的过程背后的逻辑 ' 由 I.Hekkenberg (DevCentral) 编写

```
' files storage folder and path
Dim MySaveFolder, MySaveFolderPath
    MySaveFolder     = "../demo/json/images/"
    MySaveFolderPath = "D:\internet\root\www\devcentral.co.uk\wwwroot\demo\wysiwyg\demo\json\images\"

    ' Server / Script Timeout for storage larger images
    Server.ScriptTimeout = 1200
    Set objUpload = Server.CreateObject("Persits.Upload")
        objUpload.OverwriteFiles = False
        objUpload.SetMaxSize 5242880    ' Limit files to 5MB
        objUpload.SaveVirtual(MySaveFolder)

        ' ======================================================
        ' HELP NEEDED WITH REWRITTING THE BELOW INTO CLASSIC ASP
        '                                                       
        '   // displaying file                                  
        '   $array = array(                                     
        '   'filelink' => '/images/'.$filename                  
        '   );                                                  
        '   echo stripslashes(json_encode($array));             
        '                                                       
        ' ======================================================
        ' Amended code by 'ulluoink'
        ' write json back to client
        with response
          .codePage = 65001
          .charset = "utf-8"
          .contentType = "application/json"
        end with

        For Each File in objUpload.Files
            response.write "{ ""filelink"": """ & MySaveFolder & "/" & File.FileName & """ }"
        Next
        ' ======================================================
    Set objUpload = Nothing
%> 
```

如果什么都没有发生或显示任何错误迹象，如何调试呢？我似乎也无法在日志文件中找到任何内容。

PS：以上代码已修改。我删除了经典 asp 的错误处理，一点运气都没有。

**更新时间：2013 年 1 月 16 日**

好的，所以找到 image_upload.asp 页面时出错了，这很蹩脚；（在安装 firebug 并将 404 错误修复到 image_upload.asp 后，我在 firebug 控制台中发现了一个新错误：

TypeError: rawString.match(...) 为 null [中断此错误]

var jsonString = rawString.match(/{(.|\n)*}/)[0];

其中指的是 redactor.js 文件：（[http://demo.devcentral.co.uk/wysiwyg/redactor/redactor.js](http://demo.devcentral.co.uk/wysiwyg/redactor/redactor.js)）

```
 uploadLoaded : function()
        {
            var i = $('#' + this.id)[0];
            var d;

            if (i.contentDocument)
            {
                d = i.contentDocument;
            }
            else if (i.contentWindow)
            {
                d = i.contentWindow.document;
            }
            else
            {
                d = window.frames[this.id].document;
            }

            // Success
            if (this.uploadOptions.success)
            {
                if (typeof d !== 'undefined')
                {
                    // Remove bizarre <pre> tag wrappers around our json data:
                    var rawString = d.body.innerHTML;
                    var jsonString = rawString.match(/\{(.|\n)*\}/)[0];
                    var json = $.parseJSON(jsonString);

                    if (typeof json.error == 'undefined')
                    {
                        this.uploadOptions.success(json);
                    }
                    else
                    {
                        this.uploadOptions.error(this, json);
                        this.modalClose();
                    }
                }
                else
                {
                    alert('Upload failed!');
                    this.modalClose();
                }
            }

            this.element.attr('action', this.element_action);
            this.element.attr('target', '');

        }, 
```

**更新和最终结果：18/01/2013**

再次在'ulluoink'的帮助下，他向我指出上传脚本中的路径让我很头疼，很明显Firebug调试工具将成为我在调试像json这样的脚本时使用的工具，我这个调试器一直得到答案这一事实给我留下了深刻的印象，感谢'ulluoink'帮助我解决了这个问题。

下面我将发布我用来让它工作的最终代码：

**最终编辑器 (WYSIWYG) - image_upload.asp**

```
<%
' This is a simplified example, which doesn't cover security of uploaded images. 
' This example just demonstrate the logic behind the process in Classic ASP
' Written by I.Hekkenberg (DevCentral)

' files storage folder and path
Dim MySaveFolder : MySaveFolder      = "../json/images"
    Server.ScriptTimeout = 1200
    Set objUpload = Server.CreateObject("Persits.Upload")
        objUpload.OverwriteFiles = False
        objUpload.SetMaxSize 5242880    ' Limit files to 5MB
        objUpload.SaveVirtual(MySaveFolder)
        ' code below provide by 'ulluoink'
        ' write json back to client
        with response
          .codePage = 65001
          .charset = "utf-8"
          .contentType = "application/json"
        end with

        For Each File in objUpload.Files
            response.write "{ ""filelink"": ""json/images/" & File.FileName & """ }"
        Next
        ' ======================================================
    Set objUpload = Nothing
%> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T12:51:13.640

```
'create instance of uploaded file
set File = objUpload.Files("file") 

' write json back to client
with response
  .codePage = 65001
  .charset = "utf-8"
  .contentType = "application/json"
end with

response.write "{ ""filelink"": """ & MySaveFolder & "/" & File.FileName & """ }" 
```

[你可以使用这样](http://www.webdevbros.net/2007/04/26/generate-json-from-asp-datatypes/)的类来生成 json ......

# python - Interviewstreet 的插入排序程序

> ID：14293637
> 
> 赞同：0
> 
> 时间：2013-01-12T13:11:52.220
> 
> 标签：python, insertion-sort

我尝试为 Python 中的挑战编写 Interiewstreet 的插入排序挑战[链接，](https://www.interviewstreet.com/challenges/dashboard/#problem/4e90477dbd22b) 下面是我的代码。

该程序对于输入元素的限制（我不确定）运行良好，但对于较大尺寸的输入返回错误输出。谁能指导我我做错了什么？

```
# This program tries to identify number of times swapping is done to sort the input array 

"""
=>Get input values and print them
=>Get number of test cases and get inputs for those test cases
=>Complete Insertion sort routine
=>Add a variable to count the swapping's 
"""

def sort_swap_times(nums):
  """ This function takes a list of elements and then returns the number of times 
      swapping was necessary to complete the sorting
  """

  times_swapped = 0L
  # perform the insertion sort routine
  for j in range(1, len(nums)):
    key = nums[j]
    i = j - 1
    while i >= 0 and nums[i] > key:
      # perform swap and update the tracker
      nums[i + 1] = nums[i]
      times_swapped += 1
      i = i - 1
    # place the key value in the position identified
    nums[i + 1] = key

  return times_swapped

# get the upper limit.
limit = int(raw_input())  
swap_count = []

# get the length and elements.
for i in range(limit):
  length = int(raw_input())
  elements_str = raw_input() # returns a list of strings

  # convert the given elements from str to int
  elements_int = map(int, elements_str.split())

  # pass integer elements list to perform the sorting
  # get the number of times swapping was needed and append the return value to swap_count list
  swap_count.append(sort_swap_times(elements_int))

# print the swap counts for each input array
for x in swap_count:
  print x 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T03:29:59.533

您的算法是正确的，但这是解决问题的一种幼稚方法，并且会在大型测试用例（即 len(nums) > 10000）上为您提供 Time Limit Exceed 信号。让我们分析一下算法的运行时复杂度。

```
for j in range(1, len(nums)):
    key = nums[j]
    i = j - 1
    while i >= 0 and nums[i] > key:
      # perform swap and update the tracker
      nums[i + 1] = nums[i]
      times_swapped += 1
      i = i - 1
    # place the key value in the position identified
    nums[i + 1] = key 
```

上述代码段所需的步数与 1 + 2 + .. + len(nums)-1 或 len(nums)*(len(nums)-1)/2 步数成正比，即 O(len(数）^2）。

**提示**：

使用所有值都在 [1,10^6] 范围内的事实。您在这里真正要做的是查找列表中的反转数，即查找所有 i < j st nums[i] > nums[j] 对。考虑一种数据结构，它允许您以对数时间复杂度找到每个插入操作所需的交换次数。当然，还有其他方法。

**剧透**：

> [二叉索引树](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=binaryIndexedTrees)

# sms - 通过 http api 在我的 clickatell 号码上获取传入消息

> ID：14293638
> 
> 赞同：0
> 
> 时间：2013-01-12T13:11:58.850
> 
> 标签：sms, sms-gateway, clickatell

我想当有人在我的 clickatell 号码上给我发消息时，我想在我的电子邮件上发送此消息。我正在使用 http 请求。我检查了 http api pdf，其中仅显示身份验证和发送消息 url 。我想要在我的脚本中收到消息的 url。

我正在使用 curl 功能来请求页面。

```
 $curl = curl_init();
     // Set some options - we are passing in a useragent too here
  curl_setopt_array($curl, array(
 CURLOPT_RETURNTRANSFER => 1,
CURLOPT_URL => 'http://api.clickatell.com/http/auth?user=demo& 
  password=demo&api_id=123432',
CURLOPT_USERAGENT => 'Codular Sample cURL Request',
   CURLOPT_POST => 1,
 CURLOPT_POSTFIELDS => array(
    item1 => 'value',
    item2 => 'value2'
)
));
 // Send the request & save response to $resp
   $resp = curl_exec($curl);
 print_r($resp);
  // Close request to clear up some resources
   curl_close($curl); 
```

它正在工作并向我返回会话 ID 和正常状态。同样，我可以收到传入的消息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:25:03.200

Clickatell 有一个双向服务，允许您从他们的服务接收消息，并且可以在[此处](http://www.clickatell.com/downloads/Clickatell_two-way_technical_guide.pdf)阅读他们的实施文档。

为了通过电子邮件接收通知，我建议选择`HTTP callback`Clickatell 的服务器。这将允许您编写一个小脚本将内容转换为电子邮件。

希望这对您有所帮助。

# java - 将 JAXB 编组为 XML 文件时

> ID：14293641
> 
> 赞同：1
> 
> 时间：2013-01-12T13:12:06.853
> 
> 标签：java, web-services, jaxb

我对我的 JAXB 的编组有疑问，不太明白为什么。当我整理数据并将其添加到 xml 文件中时，一切都是正确的，除了它在顶部导入 XML 编码。

之前的例子：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<FlightDetails xmlns="http://xml.netbeans.org/schema/Shows">
    <FlightDetailsCollection>
        <DestinationCity>France</DestinationCity>
        <ExtraInfo>Free Wifi</ExtraInfo>
        <Date>2009-03-09</Date>
        <Fare>
            <CurrencyName>GBP</CurrencyName>
            <CurrencyFare>60.0</CurrencyFare>
        </Fare>
    </FlightDetailsCollection>
</FlightDetails> 
```

然后，当我添加编组数据时，它显示如下：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<FlightDetails xmlns="http://xml.netbeans.org/schema/Shows">
    <FlightDetailsCollection>
        <OriginCity>London</OriginCity>
        <DestinationCity>France</DestinationCity>
        <AirlineBrand>Ryan Air</AirlineBrand>
        <ExtraInfo>Free Wifi</ExtraInfo>
        <Date>2009-03-09</Date>
        <Fare>
            <CurrencyName>GBP</CurrencyName>
            <CurrencyFare>60.0</CurrencyFare>
        </Fare>
    </FlightDetailsCollection>
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<FlightDetails xmlns="http://xml.netbeans.org/schema/Shows">
    <FlightDetailsCollection>
        <OriginCity>Germany</OriginCity>
        <DestinationCity>France</DestinationCity>
        <AirlineBrand>Virgin Air</AirlineBrand>
        <Date>2009-03-09</Date>
        <Fare>
            <CurrencyName>GBP</CurrencyName>
            <CurrencyFare>200.0</CurrencyFare>
        </Fare>
    </FlightDetailsCollection>
</FlightDetails> 
```

如您所见，它在将其放入 XML 文件之前添加了以下内容。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<FlightDetails xmlns="http://xml.netbeans.org/schema/Shows"> 
```

我怎样才能阻止它包含编码和模式名称？在调试中，它似乎只包含所需的信息，所以我无法跟踪它。我认为是 JAXB 添加了它，但可能是错误的。

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:33:51.290

您可以执行以下操作来省略 XML 声明：

```
Marshaller marshaller = jc.createMarshaller();
marshaller.setProperty(Marshaller.JAXB_FRAGMENT, true); 
```

我将创建一个 StAX`XMLStreamWriter`来包装您的输出并继续编组，这将有助于管理您的命名空间声明并添加一个根元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T15:03:56.513

从您的第二个示例看来，您正试图将几个不同的对象按顺序编组到同一个输出流（或编写器，或其他）。即使您可以禁止 XML 声明，这也不会产生格式良好的 XML，因为结果文件将具有多个根元素，更好的方法是针对`<FlightDetails>`包含多个`<FlightDetailsCollection>`元素的文件。具体如何实现这取决于您的 JAXB 类的详细信息。

# java - RESTful Web 服务客户端的路径

> ID：14293645
> 
> 赞同：0
> 
> 时间：2013-01-12T13:12:46.173
> 
> 标签：java, rest, service, web

好的，这是服务器端的代码，我只是对如何在客户端定义路径有疑问。这是服务器上的方法

```
@Path("{index}/{product}/{amount}")
@PUT
@Produces("text/plain")
public String editTable (@PathParam("index") Integer index, @PathParam("product")     String product, @PathParam("amount") Integer amount)
{...} 
```

现在在客户端

```
{url = new URL( "http://localhost:8080/OrderService/service/tableservice/"+num+"/"+product+"/"+amount);
.....} 
```

**/"+num+"/"+product+"/"+amount);**

这是正确的语法吗？

数字和数量也可以是整数，而产品是字符串还是我会有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:25:39.543

如果您将任何映射`@QueryParam`到整数，请确保您注意以下事项：
从Oracle 文档上的[链接：](http://docs.oracle.com/cd/E19776-01/820-4867/ghrst/index.html)

`If a query parameter exists in the query component of the request URI, then the value will be extracted and parsed as a 32–bit signed integer and assigned to the method parameter. If the value cannot be parsed as a 32–bit signed integer, then an HTTP 400 (Client Error) response is returned.`

为了安全起见，拥有你的`index`and `amount`as `String`。在您的服务中将它们解析为 Integer 并处理`NumberFormatException`而不是 HTTP 400。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T13:27:12.440

如果产品名称中包含“不安全”的 URL 字符，您将遇到问题。可能会是这样。为了解决这个问题，您***可以***在将名称附加到 URL 之前对名称进行 URL 编码。

***但***我认为你应该首先重新考虑你的 PATH 定义。一个好的资源端点应该唯一地标识它。但在您的情况下，您`amount`在 URL 中包含一个字段！这意味着根据谁订购产品，资源 URL 会发生变化：

客户 A 订购了 2 个 Furbies：

```
/OrderService/service/tableservice/9/Furbies/2 
```

客户 B 订购了 1 个 Furbie

```
/OrderService/service/tableservice/9/Furbies/1 
```

但在这两种情况下，客户都试图订购相同的东西——一只菲比！这不是 RESTful。相反，您应该定义一个唯一的资源端点，然后将附加的订单信息作为附加数据发送。例如：

```
public class Order {
    private Integer productId;
    private Integer amount;
}

@PUT
@Path("/{productId}/orders")
@Produces("text/plain")
public String updateOrder(@PathParam("productId"), Order order) { ... } 
```

您会注意到我也删除了索引字段，如果绝对需要，您可以将其重新添加。您会注意到我还在`orders`URL 的末尾添加了一个后缀。表示您正在为产品订单添加更新的表示。

# android - 如何在不干扰版本控制的情况下将外部 jar 添加到 Eclipse 项目

> ID：14293647
> 
> 赞同：0
> 
> 时间：2013-01-12T13:12:53.940
> 
> 标签：android, eclipse, git, version-control

我需要将[roottools](http://code.google.com/p/roottools/downloads/detail?name=RootTools-2.4.jar&can=2&q=)添加到我的 android 项目中，我打算将 jar 添加到我的 git repo 并将 jar 添加到我的 eclipse 构建配置中，如此[处](http://code.google.com/p/roottools/wiki/Usage)所述。问题是，第二步不会导致 repo 发生任何变化。更改仅在`.classpath`每个人建议添加到 gitignore 的文件中。所以问题是，我如何将这些信息添加`roottools.jar is included in the build path`到我的 git repo 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:38:11.220

使用不依赖于 IDE 的构建工具，例如 Maven。然后将构建脚本（在 Maven 的情况下为 pom.xml）检查到 git 中。

然后你仍然可以使用 Eclipse，因为它支持 Maven。

以下是有关如何使用 Maven 设置 Android 项目的信息：[http ://code.google.com/p/maven-android-plugin/wiki/GettingStarted](http://code.google.com/p/maven-android-plugin/wiki/GettingStarted)

# php - MySQL GROUP BY 多个列和字段

> ID：14293650
> 
> 赞同：3
> 
> 时间：2013-01-12T13:13:14.993
> 
> 标签：php, mysql, sql, select

我试图在这里搜索答案，很少有问题与我的问题非常相似，但我仍然无法弄清楚如何在下面进行 GROUP BY。

MYSQL结构：

```
ID | USERID | FRIENDID 
1  |   14   |    65
2  |   65   |    14
3  |   12   |    19
4  |   19   |    12 
```

如何使用 php 查询按 ID 1 和 ID 2 和 ID 3 和 ID 4 分组？

结果：

```
1\. 14 & 65 
2\. 12 & 19 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T13:24:37.283

```
SELECT LEAST(USERID, FRIENDID) as x, 
       GREATEST(USERID, FRIENDID) as y
FROM   TableName
GROUP  BY x, y 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/a3a21/3)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-12T13:22:18.513

```
SELECT CONCAT(USERID, ' & ', FRIENDID) FROM table 
```

# algorithm - 快速傅立叶变换算法是否适合图像梯度计算？

> ID：14293652
> 
> 赞同：2
> 
> 时间：2013-01-12T13:13:33.907
> 
> 标签：algorithm, image-processing, fft

我有一个大小矩阵和一个需要执行卷积`mXn`的过滤器。`[-1 0 1]`我可以在 O(n^2) 步骤中做到这一点，但在进一步搜索快速傅立叶变换时，到处都会出现。我想知道 FFT 是否适合这个问题。矩阵只有随机整数。但是，如果我有浮动值，会有所不同吗？FFT 是否意味着这样的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T13:16:54.570

如果您的过滤器只有两个非零元素，则按定义计算卷积只会采取`O(n*m)`步骤（即数据的大小）。在这种情况下，FFT 不会帮助你：2D FFT 会像`O(n*m*(log n+log m))`.

总结一下：当你有一个简单的本地化过滤器时，执行卷积的最佳方法是直接计算总和。当您需要计算更大数据的卷积或相关性（想想与另一幅图像的相关性）或执行复杂的操作时，FFT 可以帮助您。

# neo4j - 密码与匹配中where子句的效率

> ID：14293653
> 
> 赞同：1
> 
> 时间：2013-01-12T13:13:35.197
> 
> 标签：neo4j, cypher

我正在尝试使用 cypher 查找用户“mike”不喜欢的 10 个帖子。将带有 NOT 关系的 where 子句比匹配可选关系然后在 where 子句中检查该关系是否为 null 更有效吗？具体来说，我想确保它不会执行相当于全表扫描的操作，并确保这是一个可扩展的查询。

这是我正在使用的

```
START user=node:node_auto_index(uname:"mike"), 
  posts=node:node_auto_index("postId:*") 
  WHERE not (user-[:LIKES]->posts) 
  RETURN posts SKIP 20 LIMIT 10; 
```

或者我可以做一些过滤 MATCH 可选关系的事情吗

```
START user=node:node_auto_index(uname="mike"),
  posts=node:node_auto_index("postId:*")
  MATCH user-[r?:LIKES]->posts  
  WHERE r IS NULL
  RETURN posts SKIP 100 LIMIT 10; 
```

控制台上的一些快速测试似乎显示第二种方法的性能更快。我是否正确假设第二个查询更快？而且，如果是这样，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:45:50.323

我认为在第一个查询中，引擎会遍历所有`postID`节点并手动检查`not (user-[:LIKES]->posts)`每个帖子 ID 的条件，而在第二个示例中（假设您至少使用 v1.9.02）引擎只拾取帖子节点，实际上它们不是t 连接到用户。这只是引擎不经过所有 postIDs 节点的优化。

如果可能，请始终在查询中使用 MATCH 子句而不是 WHERE，并尝试在声明中省略星号`START n=node:index('name:*')`

# php - 在 PHP 中分隔多个电子邮件地址

> ID：14293655
> 
> 赞同：0
> 
> 时间：2013-01-12T13:13:41.593
> 
> 标签：php

按照这个线程：

[PHP：文本框分隔电子邮件](https://stackoverflow.com/questions/6011536/php-textbox-separate-emails)

我正在尝试分隔正在输入到文本框中的多个电子邮件地址。我的问题是，如果我使用上面的建议：

```
$emails = preg_split('/[;,\n]/', $_POST['email_receivers']); 
```

仅当分隔符后没有空格时才有效。我该如何调整它，以便某人可以仅通过分隔符或分隔符加空格来分隔电子邮件地址。

例如。( `email1@xyz.com;email2@xyz.com`) AND ( `email1@xyz.com; email2@xyz.com`) 应该都可以工作，但目前只有第一个示例有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:16:26.557

我想通过使空格可选来改进 Michael Berkowski 的答案：

```
$emails = preg_split('/\s*[;,\n]\s*/', $_POST['email_receivers']); 
```

`\s+`需要一个或多个空格。`\s*`使它们成为可选的（零个或多个）

# python - python - 如何将 html 字符串转换为 utf-8？获取 UnicodeDecodeError 错误

> ID：14293658
> 
> 赞同：1
> 
> 时间：2013-01-12T13:14:17.717
> 
> 标签：python, encoding

我有一个脚本，它遍历数据库并对字符串进行一些漂亮的处理，以及用其他文本替换一些文本等。

这在大多数情况下 100% 有效，但是一些 html blob 似乎包含 unicode 文本，这会破坏脚本并出现以下错误：

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 112: ordinal not in range(128) 
```

我不知道在这种情况下该怎么做，有没有人知道一个模块/函数来强制字符串中的所有文本都是标准化的 utf-8 或什么？

数据库中的所有 html blob 都来自 feedparser（下载 rss feed，存储在 db 中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:50:07.297

由于您不想向我们展示您的代码，因此我将给出一个一般性的答案，希望能帮助您找到问题所在。

当您第一次从数据库中取出数据并使用 获取时`fetchone`，您需要将其转换为`unicode`对象。获得变量后立即执行此操作是一种很好的做法，然后仅在输出时重新编码。

```
db = MySQLdb.connect()
cur = db.cursor()
cur.execute("SELECT col FROM the_table LIMIT 10")
xml = cur.fetchone()[0].decode('utf-8') # Or whatever encoding the text is in, though we're pretty sure it's utf-8\. You might use chardet 
```

运行`xml`完之后`BeautifulSoup`，如果`encode`将字符串保存到文件中，则可能会再次将其保存，或者如果将其重新插入数据库，则可能只是将其保留为 Unicode 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T16:52:23.940

经过几个小时的谷歌搜索，我终于找到了一个消除所有解码错误的解决方案。我对 python 还是很陌生（沉重的 php 背景）并且不了解字符编码。

在我的代码中，我有一个 .decode('utf-8') ，然后做了一些 .replace(str(beatiful_soup_tag),'') 语句。解决方案最终变得如此简单，以至于将所有 str() 更改为 unicode()。在那之后，没有一个问题。

答案在： [http ://ubuntuforums.org/showthread.php?t=1212933](http://ubuntuforums.org/showthread.php?t=1212933)

我真诚地向要求我发布代码的评论者道歉，我认为是坚如磐石的，而不是问题恰恰相反，我相信他们会立即发现问题！我不会再犯那个错误了！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T17:07:19.980

在对字符串变量进行任何进一步处理之前：

```
clean_str = unicode(str_var_with_strange_coding, errors='ignore') 
```

乱七八糟的字符被跳过。不优雅，因为您不会尝试恢复任何可能有意义的值，但有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T13:55:45.303

确保您真正了解[unicode](http://en.wikipedia.org/wiki/Unicode)和[UTF-8](http://en.wikipedia.org/wiki/UTF-8)之间的区别，并且它们不一样（这让许多人感到惊讶）。这是[每个软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最低要求](http://www.joelonsoftware.com/articles/Unicode.html)

您的数据库的编码是什么？它真的是 UTF-8 还是你只是*假设*它是？如果它包含带有随机编码的 blob，那么您就有问题，因为您[无法猜测编码](https://stackoverflow.com/questions/90838/how-can-i-detect-the-encoding-codepage-of-a-text-file)。当您从数据库中读取时，然后`decode`将 blob 转换为 unicode 并稍后在您的代码中使用 unicode。

但是假设您的基础是 UTF-8。然后你应该[**在任何地方使用 unicode** - 早解码，晚编码](http://farmdev.com/talks/unicode/)。在程序中的任何地方都使用 unicode，并且仅在读取或写入数据库、显示、写入文件等时解码/编码。

Unicode 和编码在 Python 2.x 中有点痛苦，幸运的是在 Python 3 中[所有文本都是 unicode](http://docs.python.org/3.0/whatsnew/3.0.html#text-vs-data-instead-of-unicode-vs-8-bit)

关于 BeautifulSoup，请使用最新[版本 4](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)。

# ios - 如果需要声明建议

> ID：14293661
> 
> 赞同：0
> 
> 时间：2013-01-12T13:14:21.003
> 
> 标签：ios, objective-c, cocoa-touch

`UITextField`我试图在我的,中输入大于 200 的值时显示警报`rcdAtIan.text`。我试过这个：

```
 Self.rcdAtIan.text = self.circuit.rcdAtIan;
    if (_rcdAtIan.text > @"200");{
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Value Exceeded" message:@"Message here............." delegate:nil cancelButtonTitle: @"Ok" otherButtonTitles: nil];
           [alert show]; 
```

然后这个：

```
Self.rcdAtIan.text = self.circuit.rcdAtIan;
 if (self.circuit.rcdAtIan > @"200");{
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Value Exceeded" message:@"Message here.........." delegate:nil cancelButtonTitle: @"Ok" otherButtonTitles: nil];
           [alert show];
    } 
```

但是在加载视图时会显示警报，而不是通过我的`if`声明。我知道我想说什么`if (_rcdAtIan.text => 200 "show my alert");`——但我不确定语法是否正确。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T13:17:47.737

您正在尝试对 2 个字符串值进行算术比较。你需要做的是问：

```
if ([_rcdAtIan.text intValue] > 200) {... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T13:17:28.907

你不能像这样比较字符串（嗯，你可以，但这没有意义，因为它对代表字符串的指针进行数值比较，并且**不比较字符串的内容**）。因此，您可能希望将字符串转换为数值：

```
if ([self.circuit.rcdAtIan intValue] >= 200) {
    // "200" or more has been entered
} 
```

# validation - Play Framework 2 中的显示错误

> ID：14293662
> 
> 赞同：11
> 
> 时间：2013-01-12T13:14:24.473
> 
> 标签：validation, error-handling, playframework, playframework-2.0

首先我想说的是，我认为 2.0 的 Play 文档非常非常糟糕。

我正在寻找一种在 HTML 选择下放置验证错误的方法，例如 play 会为自动生成的输入框执行此操作。

我试图复制 Play 输入框生成的 HTML 代码的结构，但我确定我的 HTML 代码中缺少一些 ifError-Scala 模板行。

糟糕的是，无法找到 Play < 2.0 文档已经涵盖的主题的 Play 2.0 文档。因此，如果您在文档中寻找解决方案，您将使用旧的、无法正常工作的文档。非常令人沮丧！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-13T14:21:57.943

我使用此代码在表单上显示一个全局引导警报框：

```
@if(form.hasErrors) {
    <div class="alert alert-error">
        <a class="close" data-dismiss="alert">x</a>
        @if(form.errors.size() > 0) {
            @for((key, value) <- form.errors) {
                @key.toString() : 
                    @for(err <- value) {
                        @err.message().toString()
                    }
            }
        } else {No error returned.}
    </div>
} 
```

表单错误键值对的输出是带有`@key.toString() : @value.message.toString`.

如果您想在字段级别显示错误，则需要使用另一个用于 form.errors 映射值的条件语句稍微修改它，以便它仅针对特定字段触发。我还没有测试过这个，但它会是这样的：

```
@if(form.hasErrors) {
    @if(form.errors.size() > 0) {
        @for((key, value) <- form.errors) {
            @for(err <- value) {
                @if(err.contains("YourSelectFieldName")) {
                    @err.message().toString()
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-24T21:57:15.030

2manyprojects 的答案效果很好，但你可以在控制器中做同样的事情。这一切都取决于你的喜好和风格。

```
public static Result save() {
        Form<form> boundForm = form.bindFromRequest();
        if (boundForm.hasErrors()) {
            String errorMsg = "";
            java.util.Map<String, List<play.data.validation.ValidationError>> errorsAll = boundForm.errors();
            for (String field : errorsAll.keySet()) {
                errorMsg += field + " ";
                for (ValidationError error : errorsAll.get(field)) {
                    errorMsg += error.message() + ", ";
                }
            }
            flash("error", "Please correct the following errors: " + errorMsg);
            return badRequest(detail.render(boundForm));
        } 
```

# html - 如何让我的侧边栏垂直填充空间？

> ID：14293665
> 
> 赞同：1
> 
> 时间：2013-01-12T13:14:35.457
> 
> 标签：html, css

我有一个非常简单的布局，看起来像这样

![在此处输入图像描述](../Images/dde0061c77c12164bfcfaf820bd90fd8.png)

的代码是这样的：

```
<!DOCTYPE html>
<html>
<HEAD>
    <LINK href="mystyle.css" title="compact" rel="stylesheet" type="text/css">
  </HEAD>
<body>

<div id="wrap">

    <div id="header">
    <p> Im the header. </p> 
    </div>

    <div id="nav">
    <p> Im the nav. </p> 
    </div>

    <div id="sidebar">
    <p> sidebar here </p> 
    <p> sidebar here </p>
    <p> sidebar here </p>
    <p> sidebar here </p>
    <p> sidebar here </p>
    <p> sidebar here </p>
    <p> sidebar here </p>
    <p> sidebar here </p>
    <p> sidebar here </p>
    </div>

    <div id="main">
    <p> im the main </p> 
    <p> im the main </p> 
    <p> im the main </p> 
    <p> im the main </p> 
    <p> im the main </p> 
    <p> im the main </p> 
    <p> im the main </p> 
    <p> im the main </p> 
    <p> im the main </p> 
    <p> im the main </p> 
    <p> im the main </p> 
    <p> im the main </p> 
    </div>

    <div id="footer">
    <p> footer </p> 
    </div>
</div>

<body> 

</html> 
```

这是CSS：

```
#wrap
{ 
    width: 100%; 
    background-color:blue; 
    padding: 10px; 
}

#header 
{ 
    background-color:white; 
    width: 98%; 
    float: left; 
    padding: 10px; 
}

#nav
{ 
    background-color:yellow; 
    padding: 10px; 
    width:100%;

}

#main 
{ 

    width:100%; 
    background:green; 
    padding: 10px; 

}

#sidebar
{ 
    background-color:pink; 
    float:right; 
    float:top; 
    padding: 10px; 
    width:20%;
    height:100%; 

}

#footer 
{ 
    background-color:orange; 
    padding: 10px; 
    width:100%;
    clear:both;

} 
```

现在我只是不知道为什么我不能让粉红色是/侧边栏垂直填充所有空间，一直到橙色页脚？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:30:08.373

示例：http: [//jsfiddle.net/s96Tw/](http://jsfiddle.net/s96Tw/)

1) 将内容附加`#sidebar`到`#main`元素；

2）添加`position:relative`到`#main`元素；

3）将此额外代码添加到css文件中：

```
#sidebar {
  height:100%;
  position:absolute;
  right:0;
  top:0;
  background:pink;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T13:51:12.613

海特先生纸袋

试试看...首先创建一个看起来像这个链接的图像

[http://www.vanseodesign.com/blog/wp-content/uploads/2011/05/faux-columns-background.png](http://www.vanseodesign.com/blog/wp-content/uploads/2011/05/faux-columns-background.png)

```
 background: url("faux-columns.png") repeat-y; 
```

在 CSS 中

这是关于等列的 4 个教程：[http ://www.vanseodesign.com/css/equal-height-columns/](http://www.vanseodesign.com/css/equal-height-columns/)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T13:36:12.163

您还可以将**#wrap 设置为粉红色**并将您的**#main 宽度设置为 ~70%**，这通常用作解决方法。

现在，由于#wrap 中的填充，您的边框也是粉红色的，但您可以随意调整，直到满足您的需要。

```
#wrap
{ 
    width: 100%; 
    background-color:pink; 
    padding: 10px; 
}

#main 
{ 

    width:70%; 
    background:green; 
    padding: 10px; 

} 
```

示例：http: [//jsfiddle.net/y9Yja/](http://jsfiddle.net/y9Yja/)

# javascript - 带页面的框滚动

> ID：14293666
> 
> 赞同：0
> 
> 时间：2013-01-12T13:14:40.873
> 
> 标签：javascript, html, css

我希望我的框随着我的页面向下滚动，但这个脚本似乎不起作用她是我的代码：

CSS

```
/* Print and Download Buttons */
#box {top: 271px;}
a.print{ background:#ffffff url(images/bg-print.jpg) no-repeat top center; border:1px solid #ccc; display:block; height:24px; padding:2px; 
         position:absolute; right:765px; text-indent:-9999px; top:271px; width:24px; z-index:110; }

a.download{ background:#ffffff url(images/bg-download.jpg) no-repeat top center; border:1px solid #ccc; display:block; height:24px; padding:2px;
            position:absolute; right:765px; text-indent:-9999px; top:300px; width:24px; z-index:111; }

    a.print:hover, a.download:hover{ padding-right:12px; } 
```

HTML 代码：

```
 <script type="text/javascript" src="_layout/js/costum.js"></script> <!--The Js file call !-->
<!-- My div Box that's i want to scroll down !-->
        <div id="box"> 
            <a href="javascript:window.print()" id="print" title="Print CV" class="tip print">Print CV</a>
            <a href="#" id="download" title="Download CV" class="tip download">Download CV</a>
            </div> 
```

这是我的 costum.js

```
 window.onload = function() {

  function getScrollTop() {
    if (typeof window.pageYOffset !== 'undefined' ) {
      // Most browsers
      return window.pageYOffset;
    }

    var d = document.documentElement;
    if (d.clientHeight) {
      // IE in standards mode
      return d.scrollTop;
    }

    // IE in quirks mode
    return document.body.scrollTop;
  }

  window.onscroll = function() {
    var box = document.getElementById('box'),
        scroll = getScrollTop();

    if (scroll <= 300) {
      box.style.top = "300px";
    }
    else {
      box.style.top = (scroll + 2) + "px";
    }
  };

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:31:17.950

您没有设置标签`position:absolute`，因此设置不会影响其位置。移动到 div，它应该可以正常工作：`a``box``top``position`

```
/* Print and Download Buttons */
#box {
    position:absolute;
    right:765px;
    top:271px;
}

a.print {
    background:#f00;
    border:1px solid #ccc;
    display:block;
    height:24px;
    padding:2px;
    text-indent:-9999px;
    width:24px;
    z-index:110;
}

a.download {
    background:#c00;
    border:1px solid #ccc;
    display:block;
    height:24px;
    padding:2px;
    position:absolute;
    text-indent:-9999px;
    width:24px;
    z-index:111;
}

a.print:hover, a.download:hover {
    padding-right:12px;
} 
```

# jax-ws - 移除元素 在 JAX-WS SOAP 响应中

> ID：14293672
> 
> 赞同：3
> 
> 时间：2013-01-12T13:15:47.987
> 
> 标签：jax-ws

我有以下 JAX-WS 方法

```
public School createUpdateSchool(Perks reqeustData, DataHandler contentData)
{
----
----
} 
```

在我的 SOAP 响应中，

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
<S:Body>
<ns3:CreateUpdateSchoolResponse xmlns:ns2=".........">
<return>
<ns2:Student name="Raj" ......
<ns2:Exam pattern="CBSE"............       
............    
</return>
</ns3:CreateUpdateSchoolResponse>
</S:Body>
</S:Envelope> 
```

事实上，我可以自定义元素，但我无法从肥皂响应中完全删除它。

*   是否可以通过某些配置删除它？
*   如果没有，至少通过 SOAP 处理程序如何做到这一点？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:37:14.153

我有同样的问题，找不到另一种方法来删除服务响应的标签返回，我发现的唯一方法是实现 SOAP Handler，如下所示：

希望这有帮助，祝你好运！

```
import java.util.Iterator;
import java.util.Set;

import javax.xml.namespace.QName;
import javax.xml.soap.Node;
import javax.xml.soap.SOAPException;
import javax.xml.soap.SOAPMessage;
import javax.xml.ws.handler.MessageContext;
import javax.xml.ws.handler.soap.SOAPHandler;
import javax.xml.ws.handler.soap.SOAPMessageContext;

import org.w3c.dom.NodeList;

import com.millicom.LoggerFFE;
import com.millicom.fulfillment.ws.cin.utils.ConnectorsLoggerUtil;

/**
 * @author jcperez
 * 
 */
public class SOAPLoggingHandler implements SOAPHandler<SOAPMessageContext> {

    protected static LoggerFFE logger=ConnectorsLoggerUtil.getLogger(SOAPLoggingHandler.class);

    @Override
    public boolean handleMessage(SOAPMessageContext context) {

        Boolean outboundProperty = (Boolean) context
                .get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);

        //Verificamos solo los mensajes de salida
        if(outboundProperty){

            try {
                //Obtenemos el mensaje
                SOAPMessage message = context.getMessage();

                //Obtenemos los elementos del cuerpo
                @SuppressWarnings("unchecked")
                Iterator<Node> it = message.getSOAPBody().getChildElements();

                //Obtenemos el primero nodo, el que corresponde al response de la operacion
                Node node = (Node) it.next();

                //Obtenemos el nodo return
                org.w3c.dom.Node returnNode = node.getChildNodes().item(0);
                //Obtenemos los nodos hijos en una varaible temporal
                NodeList nodeList = returnNode.getChildNodes();
                //Eliminamos el nodo return
                node.removeChild(returnNode);
                //Agregamos los hijos del nodo return al nodo response de la operacion
                while(nodeList.getLength() > 0){
                   node.appendChild(nodeList.item(0));
                }

            } catch (SOAPException e) {
               logger.error("SOAPLoggingHandler#handleMessage(context) Error al obtener el body del mensaje SOAP ", e);
            } catch (Exception e) {
                logger.error("SOAPLoggingHandler#handleMessage(context) Error general ", e);
            }

        }

        return true;
    }

    @Override
    public boolean handleFault(SOAPMessageContext context) {
        //do nothing
        return true;
    }

    @Override
    public void close(MessageContext context) {
      //do nothing
    }

    @Override
    public Set<QName> getHeaders() {
        return null;
    }

} 
```

# jquery - if 语句中的 OR 和 AND 组合

> ID：14293673
> 
> 赞同：1
> 
> 时间：2013-01-12T13:15:47.960
> 
> 标签：jquery, if-statement, jquery-selectors

我有这个选择器：

`$('ul:not(.sub-menu) > li, ul.sub-menu > li:last-child').not(':has(ul.sub-menu)');`

得到这些元素：

1.  每个**不是**`li`父母的直系后代（除非它是最后一个，参见 2。） **`.sub-menu`**
***   an的最后一个li元素`ul.sub-menu`*   **排除**所有`li`作为父级的`ul.sub-menu`**

 **现在，我想在 if 语句中使用它，它位于悬停函数内部。换句话说，它必须是相对于该列表项而不是*列表*项。

像这样的东西：

```
$("nav li").hover(function () {
  var $this = $(this); 
  if (($this.parent("ul:not(.sub-menu)") || ($this.parent("ul.sub-menu") && $this.is(":last-child"))) && $this.not(":has(ul.sub-menu)")) {
     // do something
  }
}); 
```

但这不起作用。我认为这与在 if 语句中组合 OR 和 AND 选择器有关，但我似乎无法调试它：上面的代码选择了所有列表项而没有区别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T13:17:33.423

`$this.parent("ul:not(.sub-menu)")`永远不会是假的，即使集合是空的。

在您的情况下使用`$this.parent("ul:not(.sub-menu)").length`。

因此，整个 if 语句看起来像这样：

```
if (
    (
        $this.parent("ul:not(.sub-menu)").length
        || ( $this.parent("ul.sub-menu").length && $this.is(":last-child") )
    ) && !$this.hasClass("sub-menu")
) {
     // do something
} 
```

* * *

细节 ：

```
if ($('#a')) { // always verified

if ($('#a').length>0) { // verified if there is an element with id a

if ($('#a').length) { // identical to last one 
```

正如[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators)所写：

> 可以转换为 false 的表达式示例是计算结果为 null、0、空字符串 ("") 或未定义的表达式**

# ios - RubyMotion UITableView 数据源未正确返回

> ID：14293680
> 
> 赞同：2
> 
> 时间：2013-01-12T13:16:57.643
> 
> 标签：ios, rubymotion

我是[RubyMotion](http://www.rubymotion.com)的新手。使用此控制器：

```
class LectureController < UIViewController

    def viewDidLoad
        super

        self.view.backgroundColor = UIColor.whiteColor

        @lectures ||= []

        Lecture.get() do |success, lectures|
            if success
                @lectures = lectures
                p "Received #{@lectures.length} lectures"
                @table.reloadData
            else
                App.alert("OOPS!")
            end
        end

        @table = UITableView.alloc.initWithFrame(self.view.bounds)
        self.view.addSubview @table
        @table.dataSource = self

        def tableView(tableView, numberOfRowsInSection: section)
            @lectures.count
        end

        def tableView(tableView, cellForRowAtIndexPath: indexPath)
            @reuseIdentifier ||= "CELL_IDENTIFIER"

            cell = tableView.dequeueReusableCellWithIdentifier(@reuseIdentifier) || begin
                UITableViewCell.alloc.initWithStyle(UITableViewCellStyleDefault, reuseIdentifier: @reuseIdentifier)
            end

            cell.textLabel.text = @lectures[indexPath.row].name

            cell
        end

    end

    def initWithNibName(name, bundle: bundle)
        super
        self.title = "Lectures"
        self
    end

end 
```

我遇到以下错误消息：

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException',
reason: 'UITableView dataSource must return a cell from
tableView:cellForRowAtIndexPath:' 
```

据我所知，`cellForRowAtIndexPath`应该*是*返回一个单元格。我不知道为什么它不起作用。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T23:03:43.823

您的两个`tableView`方法嵌套在您的`viewDidLoad`方法下。他们应该被移出成为主要`LectureController`课程的一部分。

在典型的 Ruby 类中，您可能能够摆脱这种情况（调用该`viewDidLoad`方法动态定义其他方法），但由于代码转换/编译的方式，它在 RubyMotion 中不起作用。

# objective-c - CATransition 无淡入淡出推送

> ID：14293684
> 
> 赞同：9
> 
> 时间：2013-01-12T13:17:21.237
> 
> 标签：objective-c, macos, cocoa, core-animation

我正在为 Mac OS X 制作一个导航控制器类。

我想用`kCATransitionPush`动画替换当前视图。
就像在这篇文章中一样：
[核心动画教程 - 带有过渡的向导对话框](http://www.cimgf.com/2008/03/03/core-animation-tutorial-wizard-dialog-with-transitions/)

`CATransition`是这样设置的：

```
CATransition *transition = [CATransition animation];
transition.type = kCATransitionPush;
transition.subtype = kCATransitionFromLeft;
[self.view setAnimations:@{ @"subviews" : transition }]; 
```

* * *

但是，当我替换视图时，会自动添加一个淡入淡出动画。

```
[NSAnimationContext beginGrouping];
{
    [[self.view animator] replaceSubview:_currentViewController.view with:newViewController.view];
}
[NSAnimationContext endGrouping]; 
```

* * *

如何在没有褪色的情况下制作推送动画？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T18:22:09.043

无论视图是否支持 CA，我发现获得平滑的核心动画过渡的最佳方法是执行以下操作：

1.  `NSView -cacheDisplayInRect:toBitmapImageRep`使用或类似方法创建您尝试设置动画的视图的图像
2.  将该图像放入 NSImageView
3.  将图像视图分层，当分层支持时，它将绘制得很好而不会出现故障
4.  将图像视图添加为您尝试转换的视图*的子视图*
5.  使用 NSView 的动画代理为图像视图帧设置动画
6.  动画完成后移除图像视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T13:37:25.603

我怀疑您遇到了隐式动画 - Core Animation 将自动为您自己的事务之外发生的图层属性更改设置动画。

在这两个问题中，对禁用这些隐式动画的几种方法进行了很好的总结：

[如何禁用 CALayer 隐式动画？](https://stackoverflow.com/questions/5833488/how-to-disable-calayer-implicit-animations)

[在 -[CALayer setNeedsDisplayInRect:] 中禁用隐式动画](https://stackoverflow.com/questions/2244147/disabling-implicit-animations-in-calayer-setneedsdisplayinrect)

[...您可以在 Core Animation 文档中](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Transactions.html)阅读有关隐式事务的更多信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T01:24:17.367

我认为从左过渡的过渡包括内置的淡入淡出。IOS 推送转换可以。

如果您不希望这样，您可能必须使用 Core Animation 滚动您自己的推送过渡。这在带有 UIView 动画的 iOS 中很容易。可悲的是，Mac OS 中没有等价物。我希望 Apple 能够返回并在 Mac OS 中添加视图动画。我在 iOS 中使用它们时会被宠坏，然后在我使用 Mac 应用程序时会想念它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-06T10:46:36.237

添加以下代码

```
 CATransition *transition = [CATransition animation];
        transition.type = kCATransitionPush;
        transition.subtype = kCATransitionFromLeft;
        [transition setDuration:0.5];
        [self.view.layer addAnimation:transition forKey:kCATransition]; 
```

# nhibernate - NHibernate 3.2 忽略实体名称

> ID：14293691
> 
> 赞同：1
> 
> 时间：2013-01-12T13:18:00.573
> 
> 标签：nhibernate

我正在使用 NHibernate 3.2 并为同一个类映射了两个表，在映射中指定了“实体名称”。麻烦的是，当我使用ISession中的方法来表示实体名称时，NHibernate坚持自己扣除，忽略了我的规范。

这是我的单元测试中的代码：

```
public class Cliente
{
    public virtual Guid UID { get; set; }
    public virtual long Revisao { get; set; }
    public virtual string Nome { get; set; }
    public virtual DateTime DataNascimento { get; set; }
}

  <class name="Cliente">
    <id name="UID">
      <generator class="guid"/>
    </id>
    <version name="Revisao" />
    <property name="Nome" />
    <property name="DataNascimento" />
  </class>

  <class name="Cliente" entity-name="ClienteAudit" schema="audit">
    <composite-id>
        <key-property name="UID" />
        <key-property name="Revisao" />
    </composite-id>
    <property name="Nome" />
    <property name="DataNascimento" />
  </class>   

 var cliente = new Cliente {DataNascimento = DateTime.Parse("1988/07/09"), Nome = "Heber Senger"};
        using (var ss = sf.OpenSession())
        {
            ss.Save("Cliente", cliente);
            ss.Flush();
        } 
```

NHibernate 坚持将实体保存为“ClienteAudit”（我在侦听器和表中验证），并且我明确告知实体名称为“Cliente”。

我只是尝试： - 在 Cliente 映射中指定实体名称；- 在方法save中省略名称，让NHibernate自由发现名称，再次在“ClienteAudit”中暗示；- 现在我正在研究SessionImpl等的内部代码。

如果有人可以提供帮助，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:54:19.330

所有工作都需要进行两项更改：

1.  版本属性的默认类型是 int 而不是 long；
2.  **最重要**的是：当实体名称没有在 HBM 中明确指出时，save 方法中指定的名称是类的全名。

顺便说一句，谢谢！

# java - 选择某些元素后让 Swing JMenuBar 树保持打开状态

> ID：14293693
> 
> 赞同：2
> 
> 时间：2013-01-12T13:18:19.987
> 
> 标签：java, swing, user-interface, drop-down-menu

我目前正在通过 Sun 出版的 Horstmann 和 Cornell 的非常全面和易读的文本（第 8 版/第 1 卷。ISBN：978-0-12-235476-9）并通过完成其中一个自学 Java Swing 示例（示例 9-8） 我注意到在选择“Toggle”菜单项时执行了一个烦人的操作。

`JCheckBoxMenuItem`该示例显示了使用和`JRadioButtonMenuItem`类在某些选项之间切换。我注意到，在选择其中一个菜单组件时，遍历的整个树都会关闭。有没有办法通过项目的可设置属性或提供的方法来阻止此菜单关闭`ActionListener`？

链接到作者代码转储：[这里](http://horstmann.com/corejava/corejava8.zip)

为任何回应欢呼。进一步深入 UI 实现将是一个不错的调整。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:46:32.313

*   [在 Java6 中不可能](http://tips4java.wordpress.com/2009/05/17/combo-box-no-action/)，因为`JPopup`用于`JMenu`and `JComboBox`，弹出窗口对鼠标键盘事件是隐藏的

*   可以基于（未装饰）或使用 JButtons（在您的情况下使用/ `JMenu`）的自定义弹出窗口`JComboBox``JDialog``JWindow``JCheckBox``JRadioButtons``GridLayout`

# c# - WinRT 分层数据显示

> ID：14293694
> 
> 赞同：1
> 
> 时间：2013-01-12T13:18:20.180
> 
> 标签：c#, xaml, windows-runtime, hierarchical

我需要显示分层数据，例如：

```
public class Element
{
    public string Name { get; private set; }
    public Element[] Elements { get; private set; }
} 
```

`Name`对于每个元素，它只是带有矩形（带有 ）的垂直面板。如果单击元素，则其子元素将显示在其下方（元素已展开）。如果单击其中之一，则会出现其元素，依此类推。

我已经用谷歌搜索了这个，发现 WinRT 中没有 HierarchicalDataTemplate 和树视图。
于是我开始自己做。
我创造`ItemsControl`了`DataTemplate` `DataTemplate1`它。在`DataTemplate1`我也创建`ItemsControl`并设置`DataTemplate2`为`ItemTemplate`. 在`DataTemplate2`，`ItemTemplate`是`DataTemplate3`等等。最后`DataTemplate`是没有`ItemsControl`。

在按钮`Click`事件中，我更改（即）`IsVisible`中任何元素的 Elements 属性，因此可以轻松执行任何自定义逻辑来展开/折叠元素。`DataModel``Element[]`

```
<DataTemplate x:Key="DataTemplate2">
    <StackPanel Visibility="{Binding IsVisible, Converter={StaticResource BooleanToVisibilityConverter}}">
        <Button  Style="{StaticResource ItemButtonStyle}"
                 Click="MenuElement_Click">
            <TextBlock Style="{StaticResource ItemTextBlockStyle}" Text="{Binding Name}"/>
        </Button>
        <ItemsControl ItemsSource="{Binding Elements}" ItemTemplate="{StaticResource DataTemplate3}"/>
    </StackPanel>
</DataTemplate>

<DataTemplate x:Key="DataTemplate1">
    <StackPanel Visibility="{Binding IsVisible, Converter={StaticResource BooleanToVisibilityConverter}}">
        <Button  Style="{StaticResource ItemButtonStyle}"
                 Click="MenuElement_Click">
            <TextBlock Style="{StaticResource ItemTextBlockStyle}" Text="{Binding Name}"/>
        </Button>
        <ItemsControl ItemsSource="{Binding Elements}" ItemTemplate="{StaticResource DataTemplate2}"/>
    </StackPanel>
</DataTemplate> 
```

它工作正常，但问题是如果我想启用 10 级层次结构，我必须复制过去 10 个数据模板。11级仍然不可用。

我还尝试`DataTemplate`在 C# 中创建并以递归方法手动申请`DataTemplate`它`ItemSource`等等。
但是我发现了2个问题。

1.  我实际上不知道如何`DataTemplate`在 Metro (C#) 中创建，因为它没有`VisualTree`属性。我只能制作（`var dt= new Datatemplate();`），我不知道如何改变它。

2.  如果我`DataTemplate`从 XAML ( `var dateTemplateRoot = (DataTemplate)this.Resources["DataTemplate1"];`)中读取

我仍然无法`ItemsControl`在其中找到并更改其`DataTemplate`.
实际上，我可以使用`var content = dateTemplateRoot.LoadContent();`然后 find `ItemsControl`by `VisualTreeHelper`，但之后我不能使用 content as `DataTemplate`(content has type `DependencyObject`)。

所以，实际上我有两个问题。通过“绑定”所有项目并仅切换属性
来执行分层下拉列表是否是一种好方法？ 第二个是——如何启用无限层次的分层嵌套？`Visibility`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:54:44.817

WinRT XAML Toolkit`TreeView`现在有一个控件。检查出来：[http ://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/b0ee76bd6492#WinRTXamlToolkit/Controls/TreeView/TreeView.cs](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/b0ee76bd6492#WinRTXamlToolkit/Controls/TreeView/TreeView.cs)

不过要小心 - 这只是 Silverlight Toolkit 的一个粗略移植，可能效果不佳。此外，如果您计划将其作为 Windows 应用商店应用程序的一部分发布 - 您将需要对其进行大量重新设计，除非您的应用程序仅适用于桌面，因为它不是很适合触控。

# google-maps-api-3 - Google Map Javascript API - 如何为模式叠加添加引导按钮？

> ID：14293695
> 
> 赞同：0
> 
> 时间：2013-01-12T13:18:27.787
> 
> 标签：google-maps-api-3, twitter-bootstrap, modal-dialog

我正在使用谷歌地图 Javascript API。我想在地图顶部覆盖一个引导按钮，这将启动一个带有有用提示的模态覆盖。

下面的代码有效，但模式按钮不在地图顶部。帮助表示赞赏。

这是 JSBin 中的一个示例：[JSBIN](http://jsbin.com/arezap/1/)

```
<!DOCTYPE html>
<html>
<head>

<link rel='stylesheet' type='text/css' href='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/themes/base/jquery-ui.css'/>
<link href='http://twitter.github.com/bootstrap/assets/css/bootstrap.css' rel='stylesheet' type='text/css' />

<script src='http://code.jquery.com/jquery.min.js'></script>
<script src='http://code.jquery.com/ui/jquery-ui-git.js'></script>
<script type='text/javascript' src='http://www.google.com/jsapi'></script>      <!--Load the Google chart AJAX API-->
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>      <!-- Google map API -->
<script src='http://twitter.github.com/bootstrap/assets/js/bootstrap.js'></script>

<title>Google Maps</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta charset="utf-8">
<style>
  html, body, #map_canvas {
    margin: 0;
    padding: 0;
    height: 100%;
  }
</style>

<script>
  var map;
  function initialize() {
    var mapOptions = {
      zoom: 8,
      center: new google.maps.LatLng(-34.397, 150.644),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById('map_canvas'),
        mapOptions);
  }

  google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>
<body>

<!-- MODAL OVERLAY START -->
<a data-toggle='modal' href='#myModal' class='btn btn-info pull-left'><i class='icon-white icon-info-sign'></i>&nbspHint</a>
          <div id='myModal' class='modal hide fade' tabindex='-1' role='dialog' aria-labelledby='myModalLabel' aria-hidden='true'>
        <div class='modal-header'>
          <button type='button' class='close' data-dismiss='modal' aria-hidden='true'></button>
          <h3 id='myModalLabel'>Welcome</h3>
        </div>

        <div class='modal-body'>
        <h4>Quick Hints</h4>
          <p><small>Blah blah.</small></p>

        </div>
        <div class='modal-footer'>
          <button class='btn' data-dismiss='modal'>Close</button>
        </div>
      </div>
<!-- MODAL OVERLAY END -->

<div id="map_canvas"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:29:37.313

它不在地图上，因为地图只是页面上的另一个元素，默认情况下所有元素都是相对定位的。您可以通过扩展 btn 的引导 CSS、增加 z-index 和绝对定位元素来解决此问题。

通过向按钮添加额外的类来扩展 CSS。让我们称之为“my_mo”。

```
.my_mo {
position:absolute;
z-index:2;
} 
```

为此，新的 CSS 必须在引导 CSS 之后（因此定位设置被覆盖）。

# php - 使用代码点火器中其他选择的 onchange 更新选择

> ID：14293699
> 
> 赞同：0
> 
> 时间：2013-01-12T13:18:39.813
> 
> 标签：php, javascript, jquery, codeigniter

我在那里，我是 CI 的新手，我遇到了问题：

在我的视图页面上，我在一个表单上有两个选择框，我想在另一个选择框（类别）上更改选择后用数据库中的数据更新一个选择框（项目）。有没有人告诉我更好的方法来做到这一点？

有代码

```
<select name ="category">
    <option id = "y" value="0">--Select--</option>
    <?php foreach($records2 as $r) { ?>
        <option value="<?=$r->cat_id?>"><?=$r->cat_name?></option>
    <?php } ?>
</select>
<select name="items">
    <option value="0">Indiferente</option>
</select><br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:36:44.367

最好的方法可能是进行[AJAX 调用](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)以在每次选择更改时检索新的数据集。

或者，如果数据量不是太大，您可以预加载所有类别的所有项目，并在每次更改时相应地替换选择器。

# ios - 适用于 iPad 的可滚动 GridView

> ID：14293700
> 
> 赞同：1
> 
> 时间：2013-01-12T13:18:44.560
> 
> 标签：ios, objective-c, uitableview, didselectrowatindexpath, uitapgesturerecognizer

我正在为 iPad 实施一个表格并面临一些主要问题。

对于 GridView，我实现了自己的 UITableViewCell 子类，效果很好。

数据显示正确，但是当我想访问单个单元格以转到一些新的详细信息视图时出现问题。由于一行只包含一个单元格，didSelectRowAtIndexPath 只能让我访问完整的单元格，但我不知道单个单元格在哪一列。

然后我实现了一个 TapGestureRecognizer。这向我显示了行和列并且有效，但直到我开始滚动......列部分仍然有效，但行显示不正确，因为 TapRecognizer 与 didSelectRowAtIndexPath 重叠（不好但不是那么重要的副作用.. 没有选定行的蓝色突出显示）。

有没有办法找出我滚动了多少像素？还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T16:30:24.360

我强烈建议使用`UICollectionView`超过那些 3rd 方类。访问所有委托协议有很多优点（例如，`UIMenuController`在没有 的情况下长按显示剪切复制粘贴`UIGestureRecognizer`）我自己使用一个作为网格。

为了实现网格布局，我做了以下...

**1）**我在我的 .h 文件中设置了以下代表：

```
@interface YourViewControllerWithCollectionView : UIViewController <UICollectionViewDataSource, UICollectionViewDelegateFlowLayout> {

}

@property (nonatomic, retain) IBOutlet UICollectionView *myCollectionView;

@end 
```

注意，我没有设置，`UICollectionViewDelegate`因为`UICollectionViewDelegateFlowLayout`实际上是 的子协议`UICollectionViewDelegate`，所以不需要同时设置。

**2）**在.m文件中，合成collection view，在viewDidLoad中声明datasource和delegate：（别忘了连接outlet，你可能想在cell上加上背景色，这样你就可以看到了）

```
@synthesize myCollectionView; 
```

查看加载：

```
 - (void)viewDidLoad
    {
    self.myCollectionView.delegate = self;
    self.myCollectionView.dataSource = self;

    //...

    } 
```

3）实现数据源

```
#pragma mark - UICollectionView Datasource

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView {

        return 1;
    }

    - (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {

        //the number of cells you want per row
        return 4;
    }

    - (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

        //load sublassed UICollectionViewCell called MyCollectionViewCell

        static NSString *cellIdentifier = @"cell";
        MyCustomCollectionViewCell *cell = (MyCollectionViewCell *)[collectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];

                cell.title.text = @"Title"
                // customize the cell...

        return cell; 
```

}

**5)**实施`UICollectionViewDelegateFlowLayout`

```
#pragma mark – UICollectionViewDelegateFlowLayout

- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {

    //this is what forces the collectionview to only display 4 cells for both orientations. Changing the "-80" will adjust the horizontal space between the cells.
    CGSize retval = CGSizeMake((myCollectionView.frame.size.width - 80) / 4, 78);

    return retval;
}

- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section {

    // for the entire section, which we have set to 1, adjust the space at 
    // (top, left, bottom, right)
    // keep in mind if you change this, you will need to adjust the retVal
    // in the method above

    return UIEdgeInsetsMake(5, 20, 10, 20);
}

- (CGFloat)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout minimumInteritemSpacingForSectionAtIndex:(NSInteger)section {

    CGFloat interimSpacing = 0.0f;

    return interimSpacing;
}

- (CGFloat)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout minimumLineSpacingForSectionAtIndex:(NSInteger)section {

    CGFloat lineSpacing = 0.0f;

    return lineSpacing;
} 
```

**6）**最后但同样重要的是，在方向更改时使布局无效以重绘单元格：

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
                               duration:(NSTimeInterval)duration{

    [self.myCollectionView.collectionViewLayout invalidateLayout];

} 
```

并且因为您实现`UICollectionViewDelegateFlowLayout`了 ，您已经可以访问`UICollectionViewDelegate`处理选择等，例如：

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
    MyCollectionViewCell *cell = (MyCollectionViewCell *)[collectionView cellForItemAtIndexPath:indexPath];

   //do something when a cell is tapped...
} 
```

更多信息可以在这里找到：[http ://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:47:03.987

查看CocoaControls.com 上的[AQGridView](https://github.com/AlanQuatermain/AQGridView)或其他一些[控件](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=grid)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T19:59:43.073

我建议反对 UICollectionView。UICollectionView 易于使用，但目前还不够稳定。我正在为我的应用程序使用[GMGridView](https://github.com/gmoledina/GMGridView)。经过几个月的运行，我可以说它对于生产版本来说已经足够稳定了。另一种选择是 PSTCollectionView，它是 UICollectionView 的 100% API 兼容替代品。但是，它还没有完成，并且包含比 UICollectionView[更多的错误。](https://github.com/steipete/PSTCollectionView/issues?state=open)

PSTCollectionView 令人不安的问题是：

1.  如果您想在屏幕上显示 > 80 个单元格，则[性能不佳](https://github.com/steipete/PSTCollectionView/issues/110)
2.  [未实现](https://github.com/steipete/PSTCollectionView/issues/174)重新加载部分
3.  装饰视图[未实现](https://github.com/steipete/PSTCollectionView/issues/237)

我遇到的 UICollectionView 令人不安的问题是：

1.  第一列中的项目可能会[消失](https://openradar.appspot.com/12433891)
2.  插入第一个单元格会[崩溃](https://openradar.appspot.com/13133715)
3.  使用标题视图重新加载部分将[崩溃](https://openradar.appspot.com/12954582)
4.  单元格中的[文字模糊](https://stackoverflow.com/questions/15098886/uicollectionviewflowlayout-doesnt-use-integral-frames)

检查开放雷达 [https://openradar.appspot.com/search?query=UICollectionView](https://openradar.appspot.com/search?query=UICollectionView) 以了解 UICollectionView 的所有当前问题。

我相信 UICollectionView 和 PSTCollectionView 在稳定时会是不错的选择。但此时此刻，[GMGridView](https://github.com/gmoledina/GMGridView)是更好的选择。

# java - HTTP 获取而不等待响应

> ID：14293704
> 
> 赞同：2
> 
> 时间：2013-01-12T13:19:25.297
> 
> 标签：java, http, get, response

我的应用程序连接到服务器，当我退出应用程序时，我必须从服务器注销。

我的问题是响应延迟：我的应用程序退出速度不够快，我必须等待服务器的响应才能离开 Handler。

响应并不重要，我确定如果我发送 get，它会注销。

***那么，是否可以注销（通过 http get）并关闭我的应用程序而不等待响应（但不停止“获取过程”）？***

就像我用浏览器在电脑上做的那样：我点击注销按钮，然后我关闭浏览器，而不是等待来自服务器的欢迎页面......

我尝试添加一个短的套接字超时，但服务器没有注销。

这是我的方法：

```
private void Disconnect() {

new Thread() {
    @Override
    public void run() {
        String errorMessage = null;
        Message msg = authHandler.obtainMessage();
        try {

            HttpGet httpGet = new HttpGet(LogoutURL);
            HttpResponse httpResponse = httpclient.execute(httpGet);
            if (httpResponse.getStatusLine().getStatusCode() != 200) {
                msg.what = AuthERR;
                authHandler.sendMessage(msg);
                return;
            }

            msg.what = AuthEND;
            msg.obj = choix;
            authHandler.sendMessage(msg);

        } catch (ClientProtocolException e) {
            errorMessage = e.toString();
        } catch (IllegalArgumentException e) {
            errorMessage = e.toString();
        } catch (IOException e) {
            errorMessage = e.toString();
        } catch (Exception e) {
            errorMessage = e.toString();
        } finally {
            if (errorMessage != null) {
                Log.e("Logout", errorMessage);
                msg.what = AuthUnknownHostException;
                msg.obj = errorMessage;
                authHandler.sendMessage(msg);
            }
        }
    }
}.start();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:23:33.733

HTTP 是半双工请求-响应协议。在您收到响应之前，您无法证明该请求已发送到服务器。由于网络问题，它可能会丢失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T13:25:01.303

如果您立即退出应用程序，如何知道服务器已收到注销请求？我建议将服务器更改为立即发送响应，然后在后台完成注销，这样您的客户端就会有快速响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T16:53:29.777

如果库不提供放弃连接的方法，您可以简单地退出。

```
Thread logoutThread = new LogoutThread();
logoutThread().start();
logoutThread.join(1000);
System.exit(0); 
```

假设，根据经验，在大多数情况下 1 秒就足够了。当然，没有将注销请求传递到服务器是有风险的，但这在网络应用程序中总是可以预料到的。

# c# - 事务性操作同时与非事务性操作混合

> ID：14293708
> 
> 赞同：0
> 
> 时间：2013-01-12T13:20:58.550
> 
> 标签：c#, .net, sql-server-2008, transactions, transactionscope

我需要将数据从外部源导入到我的数据库。因为要下载的数据很多，导入执行的时间很长，我需要将当前导入状态的定期更新持久化到数据库中（供用户关注）。

假设我有 2 个表：（`Import`导入数据的存储）和`Status`（导入状态监控表）。

数据导入代码：

```
public class Importer
{
    public delegate void ImportHandler(string item);
    public event ImportHandler ImportStarted;

    public void OnStart(string item)
    {            
        ImportStarted(item);
    }

    public void Execute(string[] items)
    {
        foreach (var item  in items)
        {
            OnStart(item);                    
            PersistImportedData(Download(item));
        }
    }

    private void PersistImportedData(object data)
    {
        using (var connection = new SqlConnection()){ /*saving imported data*/ }
    }
} 
```

启动代码 - 用于调用导入任务并更新其状态：

```
public class Starter
{
    public void Process(string[] items)
    {
       var importer = new Importer();
       importer.ImportStarted += UpdateImportState;
       importer.Execute(items);
    }

    private void UpdateImportState(string item)
    {
        using (var connection = new SqlConnection()){ /*status updates*/ }
    }
} 
```

现在一切正常。随着导入的进行，导入正在执行，用户正在获取状态更新（从`Status`表中）。

出现问题是因为这样的逻辑不安全。我必须确定，导入是一个原子操作。我不想部分下载和保存数据。我已经使用事务方法作为解决方案（我已经用 包裹`importer.Execute`）`TransactionScope`：

```
importer.ImportStarted += UpdateImportState;
using (var scope = new TransactionScope())
{
    importer.Execute(items);
    scope.Complete();
} 
```

现在我有了安全性——例如在进程中止的情况下会发生回滚。

**我现在面临不同的问题 - 我想要解决的问题**。我需要状态更新信息供用户显示，但`Status`表不受更新影响，而事务尚未完成。即使我尝试使用`RequiresNew`选项来创建单独的事务（不是环境事务），也没有任何变化。该`Execute`函数创建自己的数据库连接并`UpdateImportState`执行相同的操作。连接不共享。我不知道为什么`State`table 不会受到影响，即使`TransactionScope`只涵盖与`Import`table 连接的逻辑。

如何保持一致的导入并允许定期状态更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:01:11.263

在 UpdateImportState 中使用 TransactionScopeOption.Suppress 而不是 TransactionScopeOption.RequiresNew

# c# - WPF中GUI的定时刷新

> ID：14293710
> 
> 赞同：1
> 
> 时间：2013-01-12T13:21:32.210
> 
> 标签：c#, wpf, timer, rectangles, dispatchertimer

我有一个 WPF 画布，我想在其中`Rectangles`每 x 毫秒显示不同的颜色（存储在多维数组中）。

```
Random rnd = new Random();

foreach (var i in Enumerable.Repeat(1, 100))
{
    _rectGrid[rnd.Next(0, 30), rnd.Next(0, 30)].Fill = new SolidColorBrush(Colors.Blue);
    Thread.Sleep( 100 );
    // refresh somehow here?
} 
```

这可行，但我看不到它实时更新，因为它位于 MainWindow 构造函数中。

显然，矩形必须在 GUI 线程中创建，但如果我创建一个`Timer`来更改颜色，它是在不同的线程中。

我可以创建一个多维值数组并将这些值绑定到 Rectangle 数组中的颜色，以便我可以从另一个线程访问它们吗？如果我这样做，我如何告诉 GUI 线程重绘？

也许让用户首先单击一个按钮会更简单，这样就不会在构造函数中发生这种情况？

**`EDIT:`**

`DispatcherTimer`效果很好。为什么 MS 有一个单独的课程，这超出了我的范围。

![在此处输入图像描述](../Images/e0a803eddb975db4ff00edcd13c37785.png)

[这](http://georgewashingtoncsharp.wordpress.com/2013/01/19/graphical-profiling-learning-from-defeat/#more-55)是我使用它的来源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T13:36:31.483

您可以像这样使用[DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)：

```
 public MainWindow()
    {
        InitializeComponent();

        DispatcherTimer t = new DispatcherTimer();
        t.Tick += t_Tick;
        t.Interval = new TimeSpan(0, 0, 0, 0, 300);
        t.Start();
    }
    Random r = new Random();
    void t_Tick(object sender, EventArgs e)
    {
        byte[] rnd = new byte[4];
        r.NextBytes(rnd);
        this.Background = new SolidColorBrush(Color.FromArgb(rnd[0], rnd[1], rnd[2], rnd[3]));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T13:32:13.913

您可以尝试使用窗口的 ContentRendered 事件。

# c# - 与用户聚集表

> ID：14293711
> 
> 赞同：1
> 
> 时间：2013-01-12T13:21:53.160
> 
> 标签：c#, nhibernate, fluent-nhibernate

我的系统中有一个类的用户映射，这些用户可以彼此成为朋友，所以每个用户都有一个他们是朋友的用户列表，但是当我创建它时，没有朋友表，也没有列在`FriendList`创建的用户表中。

```
public class User
{
    public User()
    {

        Games = new List<Game>();
        Stats = new UserStats { Rating = 1500 };
    }

    public User(string username, string password)
    {
        Username = username;
        Password = password;
        Games = new List<Game>();
        FriendList = new List<User>();
        Stats = new UserStats { Rating = 1500 };
    }

    public virtual int Id { get; set; }
    public virtual string Username { get; set; }
    public virtual string Password { get; set; }
    public virtual IList<Game> Games { get; set; }
    public virtual UserStats Stats { get; set; }
    public virtual IList<User> FriendList { get; set; } 
}

public class UserMap : ClassMap<User>
{
    public UserMap()
    {
        Id(x => x.Id)
            .Column("UserId")
            .GeneratedBy
            .HiLo("100");
        Map(x => x.Username)
            .Not.Nullable();
        Map(x => x.Password)
            .Not.Nullable();
        HasMany(x => x.Games)
            .Cascade.All();
        References(x => x.Stats)
            .Not.Nullable()
            .Cascade.All();
        HasMany(x => x.FriendList)
            .Cascade.All();
    }
} 
```

我应该改为使用这些设置创建一个friendtable吗？

```
public class FriendConnection
{
    public int Id;
    public int Friend1ID;
    public int Friend2ID;
} 
```

或者我可以让这个其他设置工作吗？

这是我使用的会话工厂

```
public class SessionFactory
{
    private static readonly string ConnString = System.Configuration.ConfigurationManager.ConnectionStrings["MySQLConnectionString"].ConnectionString;

    private static ISessionFactory _session;
    private static readonly object SyncRoot = new Object();

    private static ISessionFactory CreateSessionFactory()
    {
        return Fluently.Configure()
            .Database(MySQLConfiguration
            .Standard
            .ConnectionString(ConnString))
            .Mappings(m => m.FluentMappings
                .AddFromAssemblyOf<UserMap>())
                .ExposeConfiguration(UpdateSchema)
                .BuildSessionFactory();
    }
    //
    private static void UpdateSchema(Configuration cfg)
    {
        new SchemaUpdate(cfg).Execute(false, true);
    }

    public static ISession Session
    {
        get
        {
            if (_session == null)
            {
                lock (SyncRoot)
                {
                    if (_session == null)
                        _session = CreateSessionFactory();
                }
            }
            return _session.OpenSession();
        }
    }

    private ISessionFactory CreateTables()
    { 
        return Fluently.Configure()
            .Database(MySQLConfiguration
            .Standard
            .ConnectionString(ConnString))
            .Mappings(m => m.FluentMappings
                .AddFromAssemblyOf<UserMap>())
                .BuildSessionFactory();
    }

    private static void ExportSchema(Configuration cfg)
    {
        var schemaexport = new SchemaExport(cfg);
        schemaexport.Drop(false, true);
        schemaexport.Create(false, true);

    }

    public ISession OpenCreateTablesSession()
    {

        _session = _session ?? (_session = CreateTables());

        return _session.OpenSession();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:37:29.407

您的无参数构造函数不会实例化您的好友列表

```
public User()
{
    Games = new List<Game>();
    Stats = new UserStats { Rating = 1500 };
    FriendList = new List<User>(); // <<<--- missing
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T13:46:27.613

如果任何用户可以成为任何用户的朋友，您将需要 ManyToMany 映射：

```
HasManyToMany(x => x.FriendList)
    .Table("FriendConnection")
    .ParentKeyColumn("Friend1ID")
    .ChildKeyColumn("Friend2ID"); 
```

不需要 C# 实体作为*中间人*。

但问题是，这样的 Friend 列表当前实例为*Parent owner*。所以*我（作为用户）*拥有关系（作为*父母*）。换句话说，我也可能是其他参考的*孩子*。这就是为什么用户还应该拥有 Friends 的集合，当前实例在其中发挥`child`作用

```
HasManyToMany(x => x.FriendList2)
    .Table("FriendConnection")
    .ParentKeyColumn("Friend2ID")
    .ChildKeyColumn("Friend1ID");  // reversed mapping 
```

用户应该像这样扩展：

```
public virtual IList<User> FriendList { get; set; }
public virtual IList<User> FriendList2 { get; set; } 
```

# iphone - 数组中的键值，如数组 [0] 等

> ID：14293718
> 
> 赞同：-2
> 
> 时间：2013-01-12T13:22:25.293
> 
> 标签：iphone

我正在使用此代码

```
NSDictionary *yourDictionary;

NSArray * yourKeys;
yourKeys = [yourDictionary allValues]; 
```

获取字典的值。但我希望以这种形式输出数组：array[0]，array[1]，而我在控制台中获得如下输出：-

```
2013-01-12 18:44:10.213 Birthday_Reminder[2871:c07] (
{
},
"Arpit Sihare") 
```

等等值。所以请帮助我以这种形式获取这些值，并且我正在使用 KABPersonfirstnameproperty 从通讯簿中检索这些名称。

```
 ABAddressBookRef addressBook = ABAddressBookCreate();
    NSArray *thePeople = (NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook);
    NSMutableArray* allPeoplesDicts = [NSMutableArray array];
    for (id person in thePeople)
    {
        ABMultiValueRef phone =(NSString*)ABRecordCopyValue(person, kABPersonPhoneProperty);
        NSString* name = (NSString *)ABRecordCopyCompositeName(person);
       // NSMutableArray* phones = [[NSMutableArray alloc] init];
        NSDictionary *phones=[[NSDictionary alloc]init ];
        for (CFIndex i = 0; i < ABMultiValueGetCount(phones); i++)
        {
            NSString *phone = [(NSString *)ABMultiValueCopyValueAtIndex(phones,i) autorelease];
            [phones addObject:phone];
        }
        NSDictionary* personDict = [[NSDictionary alloc] initWithObjectsAndKeys:name,@"Name",phones,@"PhoneNumbers",nil];
        [phones release];

        NSArray * yourKeys;
        yourKeys = [personDict allValues];

        NSLog(@"%@",yourKeys);
        [allPeoplesDicts addObject:personDict];
        [personDict release];
    } 
```

我想要数组形式的名字，当我使用 nslog(@"%@",array[0]) 它应该首先打印存储在数组中的值，很快就会像数组 [1]....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:47:56.380

很难理解你想说什么。我试过了，发现...

如果您只想存储所有`firstName`（我认为这是您的密钥），那么只需制作`yourKeys`一个`NSMutableArray`并将其添加`names`到该数组中。：

```
[yourKeys addObject:names]; 
```

简单的 ！！

# html - 可以容纳居中内容的响应式 CSS 圆圈

> ID：14293719
> 
> 赞同：5
> 
> 时间：2013-01-12T13:22:27.130
> 
> 标签：html, css, responsive-design, geometry

我正在寻找一种方法来创建一个可以容纳居中内容的响应式 CSS3 圆圈。
关于圈子，我在[这个问题](https://stackoverflow.com/questions/12945891/responsive-css-circles)中找到了一些很好的信息。太糟糕了，似乎无法将内容集中在这一点上。

[这个问题](https://stackoverflow.com/questions/8473443/center-an-image-in-a-css-circle)也和我的很相似，尽管它是一个应该居中的图像。在我的情况下，使用背景图像不是一个选项，所以这个选项对我也不起作用。

你有什么想法我可以解决这个问题吗？
当然我可以使用图像，但 CSS 会更优雅！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T14:22:09.637

## 纯 CSS 需要许多额外的包装器

更新：原始帖子（我已删除）错过了您正在寻求响应式设计的事实。[基于我对您引用的响应式圈子问题的回答](https://stackoverflow.com/questions/12945891/responsive-css-circles/13018712#13018712)似乎适用于所有 CSS3 浏览器，[**请参阅 fiddle**](http://jsfiddle.net/WTWrB/58/)。

**HTML**（需要五层wrapper，我在这个html中只展示了一个圆圈）

```
<div class="circles">
    <div>
      <div>
        <div>
          <div>
            <!-- BEG Content -->
            All types of content (see fiddle)
            <!-- END Content -->
          </div>
        </div>
      </div>
    </div>
    <!-- ditto the above 3 more times -->
</div> 
```

**CSS**

```
.circles{
    margin:0px auto;
}
.circles > div {
    overflow:hidden;
    float:left;
    width:auto;
    height:auto;
    position: relative;
    border-radius:50%;
    -moz-border-radius:50%;
    -webkit-border-radius:50%;
    -khtml-border-radius: 50%;
    background:#eee;
}

.circles > div > div {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
}
.circles > div > div > div {
    display: table;
    width: 100%;
    height: 100%;
}
.circles > div > div > div > div {
    display: table-cell;
    text-align: center;
    vertical-align: middle;
}

@media (max-width: 320px)
{
    .circles > div {padding: 50%;}
}

@media (min-width: 321px) and (max-width: 800px)
{
    .circles > div {padding: 25%;}
}

@media (min-width: 801px)
{
    .circles{width:800px}
    .circles > div {padding: 12.5%;}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T07:03:17.730

接受的答案对我不起作用，因为我想旋转圆圈。这样做：

HTML

```
<div class="mycircle">
  <div class="mycontent">
    <span>TEXT</span>
  </div>
</div> 
```

CSS

```
.mycircle {
  width: 30%; 
  height: 0;
  padding: 15% 0; //padding top & bottom must equal width 
  border-radius: 50%;
  -moz-border-radius: 50%; 
  -webkit-border-radius: 50%; 
  background: #dedede; 
}
.mycontent {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  text-align: center;
}
.mycontent:before {
  content: '';
  vertical-align: middle;
  display: inline-block;
  width: 0;
  height: 100%;
}

.mycontent span {
  vertical-align: middle;
  display: inline-block;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T14:47:53.913

如果内容的高度是固定的，并且您需要 CSS 方法，请使用以下属性将其应用于 cicle 内的内容

```
margin: auto; /*will center the element*/
position: relative;
top: 50%;
margin-top: - [here insert the height of the element if you know in advance / 2]px 
```

# ios - 无法找到崩溃的原因 -[UIScrollView(UIScrollViewInternal) _scrollViewAnimationEnded:finished:]

> ID：14293725
> 
> 赞同：14
> 
> 时间：2013-01-12T13:23:41.160
> 
> 标签：ios, crash, scrollview

在我的应用程序中，经常报告带有以下日志的许多崩溃，但即使使用多个测试设备和 iOS 版本，我也无法重现它。所以没有办法在 Xcode 上找到原因。因为跟踪中没有任何步骤导致我的代码，所以我无法想象有任何方法可以找到它的来源。应用程序本身非常复杂，当然也使用了许多嵌入的滚动视图。

有谁知道从哪里开始寻找？或者以前有人遇到过类似的问题吗？

我非常感谢任何帮助！

最好的问候，弗洛里安

```
OS Version:      iPhone OS 6.0.1 (10A523)
Report Version:  104

Exception Type:  SIGSEGV
Exception Codes: SEGV_ACCERR at 0xd1d28fbc
Crashed Thread:  0

Thread 0 Crashed:
0   libobjc.A.dylib                     0x392e65b0 objc_msgSend + 16
1   UIKit                               0x35a839f7 -[UIScrollView(UIScrollViewInternal)  _scrollViewAnimationEnded:finished:] + 135
2   UIKit                               0x35a838e9 -[UIAnimator stopAnimation:] + 469
3   UIKit                               0x35b1e257 -[UIAnimator(Static) _advanceAnimationsOfType:withTimestamp:] + 295
4   UIKit                               0x35a83381 -[UIAnimator(Static) _LCDHeartbeatCallback:] + 53
5   QuartzCore                          0x323d3071 CA::Display::DisplayLink::dispatch(unsigned long long, unsigned long long) + 161
6   QuartzCore                          0x323d2fc9 CA::Display::IOMFBDisplayLink::callback(__IOMobileFramebuffer*, unsigned long long, unsigned long long, unsigned long long, void*) + 65
7   IOMobileFramebuffer                 0x340befd7 IOMobileFramebufferVsyncNotifyFunc + 155
8   IOKit                               0x35ee8449 IODispatchCalloutFromCFMessage + 193
9   CoreFoundation                      0x339605db __CFMachPortPerform + 119
10  CoreFoundation                      0x3396b173 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 35
11  CoreFoundation                      0x3396b117 __CFRunLoopDoSource1 + 139
12  CoreFoundation                      0x33969f99 __CFRunLoopRun + 1385
13  CoreFoundation                      0x338dcebd CFRunLoopRunSpecific + 357
14  CoreFoundation                      0x338dcd49 CFRunLoopRunInMode + 105
15  GraphicsServices                    0x33f222eb GSEventRunModal + 75
16  UIKit                               0x3596a2f9 UIApplicationMain + 1121
17                                 0x00005233 main (main.m:14) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-08T21:55:06.460

我有同样的崩溃。原来是因为我们正在使用 [controller setContentOffset:newPt animated:YES] 为控制器设置动画，并且我们在控制器上实现了 scrollViewDidScroll 委托方法。单击屏幕上的一个按钮可以让您前进到另一个控制器，因此如果用户在动画进行时设法单击该按钮，我们会遇到原始海报的崩溃。解决方案只是在 dealloc 中将委托设置为 nil。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T14:13:31.007

你可能想看看这个线程：[Is there a way to cancel an animated UITableView/UIScrollView setContentOffset:animated:?](https://stackoverflow.com/questions/1898626/is-there-a-way-to-cancel-an-animated-uitableview-uiscrollview-setcontentoffseta)

该讨论表明它可能是在滚动视图发送动画结束消息之前被释放的委托。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T14:10:53.070

The `SIGSEGV` signal is sent to a process when it makes an invalid virtual memory reference, or segmentation fault. (see [Wikipedia](http://en.wikipedia.org/wiki/SIGSEGV#SIGSEGV))

So you are accessing an object that likely has been released. As this is an during an animation, maybe you defined a selector to be invoked after the animation finished or something like that? That would be were I would starting looking.

# git - 如何在 git review 中修复“StrictVersion 实例没有属性‘版本’”

> ID：14293727
> 
> 赞同：1
> 
> 时间：2013-01-12T13:23:45.683
> 
> 标签：git, gerrit, git-review

我得到：

```
Traceback (most recent call last):
  File "/usr/local/bin/git-review", line 863, in <module>
    main()
  File "/usr/local/bin/git-review", line 796, in main
    needs_update = latest_is_newer()
  File "/usr/local/bin/git-review", line 147, in latest_is_newer
    if latest_version > StrictVersion(version):
  File "/usr/lib/python2.7/distutils/version.py", line 140, in __cmp__
    compare = cmp(self.version, other.version)
AttributeError: StrictVersion instance has no attribute 'version' 
```

如何修复 git-review？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-10T16:19:21.963

当您传递`None`to`StrictVersion`或的版本时会发生此错误`LooseVersion`。

对于 Git Review，发生这种情况是因为Matthew Flaschen 的回答中提到了一个无效文件导致`None`被传入。`StrictVersion`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T13:23:45.683

删除文件：

```
~/.config/git-review/latest-version 
```

这是由该位置的空文件或无效文件引起的（它用于在需要时推荐更新）。请参阅[启动板 #1098873](https://bugs.launchpad.net/git-review/+bug/1098873)

如果文件被删除，它将自动重新生成。

# gwt - com.google.web.bindery.requestfactory.shared.Locator.getVersion() - 这个方法有什么用？

> ID：14293736
> 
> 赞同：0
> 
> 时间：2013-01-12T13:24:39.327
> 
> 标签：gwt

我是第一次写`GWT-Application`，需要你的建议。我为数据库实体实现定位器没有问题，我可以重用用于休眠乐观锁定的版本列，但我的一个实体代表一个`ldap-Object`. 你能告诉我`getVersion()`Locator 的方法是做什么用的，以及我如何实现这个方法，我`ldap-Object?`将读写 ldap 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:56:47.930

从[GWT 文档](https://developers.google.com/web-toolkit/doc/latest/DevGuideRequestFactory?hl=pl)中，`getVersion`方法是

> RequestFactory 使用它来推断实体是否已更改。后备存储（JDO、JPA 等）负责在每次持久化对象时更新版本，并且 RequestFactory 调用 getVersion() 以了解更改。此信息用于两个地方。首先，如果实体因服务器上的方法调用而发生更改，则 RequestFactoryServlet 向客户端发送 UPDATE 事件，例如，当调用持久化可编辑实体导致服务器上的版本更新时。其次，客户端维护最近看到的实体的版本缓存。每当它看到版本已更改的实体时，它就会在事件总线上触发 UPDATE 事件，以便侦听器可以更新视图。
> 
> 由于许多持久性框架提供了通用的查找/获取/查询方法，因此也可以创建一个通用的 Locator 类并在 @ProxyFor 注释中为每个实体类型指定它。为此，您的所有实体都可以扩展一个提供 getId() 和 getVersion() 的基类。或者，通用定位器可以在需要时使用反射来调用 getId() 和 getVersion()。

不确定您是否正在寻找除此之外的其他任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:59:04.310

我也有同样的问题。我的第一个想法是使用属性 modifyTimestamp 和 createTimestamp。但是仍然存在功能上的差距：这些时间戳的最小单位是秒，因此无法检测到同一秒内的变化。另一种解决方案是对 ldap 对象的所有属性使用一种校验和。不大好..

# android - 捏住特定点并缩放整个视图？

> ID：14293737
> 
> 赞同：0
> 
> 时间：2013-01-12T13:24:59.000
> 
> 标签：android, apache-flex, text, zooming, pinch

我试图为我的移动 android 项目缩放。问题是，我想用两根手指指向一个特定位置并捏住它们以进行缩放（不仅仅是一个图像，整个活动视图）：

```
private function onGestureZoom(event:TransformGestureEvent):void{
    if(canvas.scaleY.valueOf() >= 1) {
        canvas.scaleX *= event.scaleX;
        canvas.scaleY *= event.scaleY;
    } else {
        canvas.scaleX = 1;
        canvas.scaleY = 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:49:07.940

这个答案包括我编写的两个类（感兴趣的），它们有助于抽象问题以重用某些功能。我在这里也包括了 ToolBase，尽管理解这个问题并不重要。基本上 MultiTouchTool.as 设置为捕获 TouchEvents 并在对象中跟踪它们，它还根据我的用例需要了解的一些常见操作调用一些方法（我只是扩展这个类并覆盖我想要的方法挂钩）。

然后关键元素在 NavigatorTool.as 中，它使用对象原始变换矩阵并调整平移，然后进行缩放，然后重新调整平移。这有效地移动了注册点。所以图像向上和向左移动，所以两个手指之间的点现在位于左上角，然后图像被缩放并重置它的位置。由于缩放是以增量方式发生的，因此我不断更新 intialDistance（名称可能具有误导性）。

在我的例子中，我正在缩放一个名为 layerM 的对象，它是一个 Sprite，但任何[DisplayObject](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#transform)都可以工作。

[MultiTouchTool.as]

```
package com.shaunhusain.fingerPainting.tools
{
    import flash.display.Stage;
    import flash.events.TouchEvent;
    import flash.geom.Point;

    public class MultiTouchTool extends ToolBase implements ITool
    {
        protected var pointsTracked:Number = 0;
        protected var ptsTracked:Object;
        public function MultiTouchTool(stage:Stage)
        {
            super(stage);
            ptsTracked = {};
        }

        public function takeAction(event:TouchEvent=null):void
        {
            switch(event.type)
            {
                case TouchEvent.TOUCH_BEGIN:
                    ptsTracked[event.touchPointID] =  new Point(event.stageX, event.stageY);
                    pointsTracked++;
                    if(pointsTracked>1)
                        secondFingerDown();
                    break;

                case TouchEvent.TOUCH_MOVE:
                    switch(pointsTracked)
                    {
                        case 1:
                            oneFingerMoving(event);
                            break;
                        case 2:
                            twoFingersMoving(event);
                            break;

                    }
                    ptsTracked[event.touchPointID] =  new Point(event.stageX, event.stageY);
                    break;

                case TouchEvent.TOUCH_END:
                case TouchEvent.TOUCH_ROLL_OUT:
                    switch(pointsTracked)
                    {
                        case 1:
                            oneFingerEnd();
                            break;
                        case 2:
                            twoFingerEnd();
                            break;
                    }

                    ptsTracked[event.touchPointID] = null;
                    pointsTracked--;
                    if(pointsTracked<0)
                        pointsTracked = 0;
                    break;
            }
        }

        protected function oneFingerEnd():void
        {
            trace("default handler for one finger end, not overridden");
        }
        protected function twoFingerEnd():void
        {
            trace("default handler for two finger end, not overridden");
        }
        protected function oneFingerMoving(event:TouchEvent):void
        {
            trace("default handler for one finger moving, not overridden");
        }
        protected function twoFingersMoving(event:TouchEvent):void
        {
            trace("default handler for two fingers moving, not overridden");
        }
        protected function secondFingerDown():void
        {
            trace("default handler for second finger down, not overridden");
        }

        public function toString():String
        {
            return "Multi-Touch tool";
        }
    }
} 
```

[导航工具.as]

```
package com.shaunhusain.fingerPainting.tools 
{
    import flash.display.Stage;
    import flash.events.TouchEvent;
    import flash.geom.Matrix;
    import flash.geom.Point;

    /**
     * Allows the layer manager to be panned and zoomed on, other tools are
     * responsible for taking into account the current zoom and pan position
     * when modifying the layers.
     */
    public class NavigationTool extends MultiTouchTool implements ITool
    {
        private var initialDistance:Number;
        private var newDistance:Number;
        private var layerLocal:Point;
        //--------------------------------------------------------------------------------
        //              Constructor
        //--------------------------------------------------------------------------------
        public function NavigationTool(stage:Stage)
        {
            super(stage);
        }

        override public function toString():String
        {
            return "Navigation";
        }

        //--------------------------------------------------------------------------------
        //              Overrides
        //--------------------------------------------------------------------------------
        override protected function oneFingerMoving(event:TouchEvent):void
        {
            var currentTouchPrevPos:Point = ptsTracked[event.touchPointID];
            var offset:Point = new Point(event.stageX-currentTouchPrevPos.x,event.stageY-currentTouchPrevPos.y);
            layerM.x += offset.x;
            layerM.y += offset.y;
        }
        override protected function twoFingersMoving(event:TouchEvent):void
        {
            if(isNaN(initialDistance))
            {
                initialDistance = Point.distance(ptsTracked[0],ptsTracked[1]);
                layerLocal = new Point((ptsTracked[0].x+ptsTracked[1].x)/2,(ptsTracked[0].y+ptsTracked[1].y)/2);
            }
            else
            {
                newDistance = Point.distance(ptsTracked[0],ptsTracked[1]);

                var matrix:Matrix = layerM.transform.concatenatedMatrix.clone();

                matrix.tx -= layerLocal.x;
                matrix.ty -= layerLocal.y;
                matrix.scale(newDistance/initialDistance,newDistance/initialDistance);
                matrix.tx += layerLocal.x;
                matrix.ty += layerLocal.y;

                layerM.transform.matrix = matrix;

                initialDistance = newDistance;
            }
        }
        override protected function twoFingerEnd():void
        {
            initialDistance = NaN;
        }

    }
} 
```

[工具库.as]

```
package com.shaunhusain.fingerPainting.tools
{
    import com.shaunhusain.fingerPainting.view.managers.LayerManager;
    import com.shaunhusain.fingerPainting.view.managers.SecondaryPanelManager;
    import com.shaunhusain.fingerPainting.managers.UndoManager;
    import com.shaunhusain.fingerPainting.model.PaintModel;

    import flash.display.Stage;

    /**
     * Base class for tools to give them all easy access to the Singletons and
     * the Stage.
     */
    public class ToolBase
    {
        //--------------------------------------------------------------------------------
        //              Variables
        //--------------------------------------------------------------------------------
        protected var model:PaintModel = PaintModel.getInstance();
        protected var undoManager:UndoManager = UndoManager.getIntance();
        protected var secondaryPanelManager:SecondaryPanelManager = SecondaryPanelManager.getIntance();
        protected var layerM:LayerManager = LayerManager.getIntance();
        protected var stage:Stage;

        //--------------------------------------------------------------------------------
        //              Constructor
        //--------------------------------------------------------------------------------
        public function ToolBase(stage:Stage)
        {
            this.stage = stage;
        }
    }
} 
```

# android - 遍历 ListView 并获取 EditText-Field 值

> ID：14293740
> 
> 赞同：26
> 
> 时间：2013-01-12T13:25:04.180
> 
> 标签：android, listview, android-edittext

我创建了一个 ListView (myList)，每行都有一个 EditText-Field (R.id.mannschaften)。在 ListView 下，我创建了一个 Button 并在 OnCreate() 方法中为其设置了一个 OnClickListener。现在，当单击 Button 时，我想遍历 ListView 并获取每一行中 EditText-Field 的值并将它们保存在 String-List 中。但是我该怎么做呢？

这是我的代码：

```
private void ButtonClick() {
    /** get all values of the EditText-Fields */
    View v;
    ArrayList<String> mannschaftsnamen = new ArrayList<String>();
    EditText et;

    for (int i = 0; i < myList.getCount(); i++) {
        v = myList.getChildAt(i);
        et = (EditText) v.findViewById(R.id.mannschaften);
        mannschaftsnamen.add(et.getText().toString());
    }
    .....
} 
```

我已经知道， getChildAt 仅适用于可见行，但我不知道如何以不同的方式进行操作。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-04-21T15:26:45.737

当您使用时，`myList.getAdapter().getView(i,null,null)`您将获得项目视图的新实例，请尝试以下`ListView.getChildAt(position)`方法：

```
private void ButtonClick() {
    /** get all values of the EditText-Fields */
    View v;
    ArrayList<String> mannschaftsnamen = new ArrayList<String>();
    EditText et;
    for (int i = 0; i < myList.getCount(); i++) {
        v = myList.getChildAt(i);
        et = (EditText) v.findViewById(R.id.editText1);
        mannschaftsnamen.add(et.getText().toString());
    }
....
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-13T11:53:58.910

在朋友的帮助下解决了这个问题：

```
private void ButtonClick() {
    /** get all values of the EditText-Fields */
    View v;
    ArrayList<String> mannschaftsnamen = new ArrayList<String>();
    EditText et;
    for (int i = 0; i < myList.getCount(); i++) {
        v = myList.getAdapter().getView(i, null, null);
        et = (EditText) v.findViewById(i);
        mannschaftsnamen.add(et.getText().toString());
    }
....
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-06-16T02:19:02.520

我认为@Arius 的答案非常接近正确的解决方案。我只想强调`View`你应该得到的是`View`包含`ListView`. 所以你需要`getChildAt(position)`与你的`ListView`.

```
private void ButtonClick() {
/** get all values of the EditText-Fields
find your ListView local variable you had created for example :
private ListView listview; 
You also need to catch null value of EditText first. */
ArrayList<String> mannschaftsnamen = new ArrayList<String>();
EditText et;
    for (int i = 0; i < listview.getCount(); i++) {
        et = (EditText) listview.getChildAt(i).findViewById(R.id.editText1);
        if (et!=null) {
           mannschaftsnamen.add(String.valueOf(et.getText()));

           /** you can try to log your values EditText */
           log.v("ypgs", String.valueOf(et.getText()));
        }
    }
    ....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-19T13:17:15.517

关于为什么选择的答案有时可能会在“et = (EditText) v.findViewById(i);”上抛出 null

难道不是在那个时候尝试在您之前选择的视图中选择位置 i 处的项目吗？因此，如果子视图中的项目少于整个列表中的项目，由于我试图选择不存在的项目，您将得到 null。

也许嵌套循环可以解决这个问题？或者如果你已经知道你需要的元素的索引，直接给它索引。

# android - Eclipse Juno Egit 错误

> ID：14293741
> 
> 赞同：1
> 
> 时间：2013-01-12T13:25:22.943
> 
> 标签：android, egit, eclipse-juno

启动 Eclipse Juno 时出现此错误

> EGit 不需要 Git 才能运行，但安装目录中可能有一些重要的设置 EGit 需要了解才能与 Git 兼容。这些设置中最重要的是 core.autocrlf。Git for windows 默认在 Git 安装的 etc 目录中将此参数设置为 true。
> 
> 可以在 Team > Git 下的 Preferences 中配置该目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T23:20:10.237

简短回答： 1\. Window > Preferences > Team > Git > Configuration > System Settings 选项卡 2\. 使用 Browse 按钮​​并指向 Git 的全局设置。就我而言，那是`C:\Program Files (x86)\Git\etc\gitconfig`. 我在 64 位 Windows 7 上运行，但不知何故我的 Git 安装在 32 位程序文件 (x86) 下。

注意：即使您只是导航到 C:\Program Files (x86)\Git，Eclipse 也会选择正确的配置。

长答案（来自[EGit 用户指南](http://wiki.eclipse.org/EGit/User_Guide#Setting_up_the_Home_Directory_on_Windows)）： **指出系统范围的配置**

如果您使用 Git for Windows 作为 EGit 的伴侣，请确保 EGit 知道 Git 的安装位置，以便它可以找到“系统范围的设置”，例如 core.autocrlf 的设置方式。转到设置并查看 Team>Git>Configuration，然后查看 System Settings 选项卡。

如果您在安装适用于 Windows 的 Git 时从命令行提示符中选择了使用 Git 的选项之一，那么系统范围设置的位置将用路径填充，一切都很好。如果没有，请使用浏览按钮找到 Git 的安装位置，例如 C:\Program Files(x86)\Git。

该建议也适用于其他 Git 包装的用户，例如 Cygwin 或 TortoiseGit 下的 Git。

非 Windows 用户理论上应该检查此设置，但系统范围的设置通常不会在非 Windows 平台上使用。

# c# - 未设置断点时单元测试期间抛出异常

> ID：14293747
> 
> 赞同：1
> 
> 时间：2013-01-12T13:25:52.503
> 
> 标签：c#, unit-testing, windows-phone-8

当我在调试单元测试期间没有断点时，我无法弄清楚为什么会引发异常。但是，当我在下一行设置断点进行调试时，它运行正常。

这是我的代码。

MainPageViewModel.cs

```
public class MainPageViewModel
{
    public async Task<IEnumerable<Event>> GetAllEvents()
    {
        WebClient client = new WebClient();
        string xmlDoc = await FXNewsAlert.Misc.Extensions.DownloadStringTask(client, new Uri("http://www.forexfactory.com/ffcal_week_this.xml")); //breakpoint here

        var events = XDocument.Parse(xmlDoc)
            .Descendants("event")
            .Select(n => new Event
            {
                Title = n.Element("title").Value,
                Country = n.Element("country").Value,
                DateTime = this.ToLocalTime(String.Format("{0} {1}", n.Element("date").Value, n.Element("time").Value)),
                Impact = n.Element("forecast").Value,
                Forecast = n.Element("forecast").Value,
                Previous = n.Element("previous").Value
            }).ToList();

        return events;
    }
} 
```

事件测试.cs

```
[TestClass]
public class EventsTest : WorkItemTest
{
    [TestMethod]
    [Asynchronous]
    public async void GetAllEventsTest()
    {
        MainPageViewModel vm = new MainPageViewModel();
        IEnumerable<Event> events = await vm.GetAllEvents(); //WebException is thrown here.

        Assert.IsTrue(events.Count() > 0);
        EnqueueTestComplete();
    }
} 
```

我的猜测是不知何故加载url需要时间，所以通过断点它可以提供额外的时间，以便我下载的xml可以按时完成。

但它实际上是一个异步方法，所以没关系吧？我现在几乎迷路了。任何帮助将不胜感激。

编辑：DownloadStringTask 的实现

```
 public static Task<string> DownloadStringTask(this WebClient webClient, Uri uri)
    {
        var tcs = new TaskCompletionSource<string>();

        webClient.DownloadStringCompleted += (s, e) =>
        {
            if (e.Error != null)
            {
                tcs.SetException(e.Error);
            }
            else
            {
                tcs.SetResult(e.Result);
            }
        };

        webClient.DownloadStringAsync(uri);

        return tcs.Task;
    } 
```

System.Net.WebException 的 StackTrace

在 System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state) 在 System.Net.Browser.ClientHttpWebRequest.EndGetResponse(IAsyncResult asyncResult) 在 System.Net.WebClient.GetWebResponse(WebRequest 请求，IAsyncResult 结果) 在 System.Net .WebClient.DownloadBitsResponseCallback(IAsyncResult result) --- 从先前引发异常的位置结束堆栈跟踪 --- 在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task) 在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(任务任务）在 System.Runtime.CompilerServices.TaskAwaiter `1.GetResult() at FXNewsAlert.Resources.MainPageViewModel.<GetAllEvents>d__2.MoveNext() --- End of stack trace from previous location where exception was thrown --- at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task) at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task) at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult() 在 FXNewsAlertTest.UnitTests.EventsTest.d__0.MoveNext()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:07:39.023

我感觉 FXNewsAlert 出了点问题，上面没有介绍它的实现。我建议深入研究（或替换）`FXNewsAlert.Misc.Extensions.DownloadStringTask()`. 我的猜测是它在完成下载之前就已经产生了。

为了测试这段代码，我首先创建了一个 Event 类来包含数据并尽量减少对代码的更改：

```
public class Event
{
    public string Title { get; set; }
    public string Country { get; set; }
    public DateTime DateTime { get; set; }
    public string Impact { get; set; }
    public string Forecast { get; set; }
    public string Previous { get; set; }
} 
```

然后，我将您的代码稍微修改为使用 WebClient 的`DownloadStringTaskAsync()`方法：

```
public class MainPageViewModel
{
    public async Task<IEnumerable<Event>> GetAllEvents()
    {
        WebClient client = new WebClient();

        // HACK: Don't have access to the implementation to FXNewsAlert...
        //string xmlDoc = await FXNewsAlert.Misc.Extensions.DownloadStringTask(
        //    client, new Uri("http://www.forexfactory.com/ffcal_week_this.xml")); //breakpoint here

        string xmlDoc = await client.DownloadStringTaskAsync(
            new Uri("http://www.forexfactory.com/ffcal_week_this.xml")); //breakpoint here

        var events = XDocument.Parse(xmlDoc)
            .Descendants("event")
            .Select(n => new Event
            {
                Title = n.Element("title").Value,
                Country = n.Element("country").Value,
                DateTime = DateTime.Parse(String.Format("{0} {1}", n.Element("date").Value, n.Element("time").Value)),
                Impact = n.Element("forecast").Value,
                Forecast = n.Element("forecast").Value,
                Previous = n.Element("previous").Value
            }).ToList();

        return events;
    }
} 
```

我没有创建测试项目，而是创建了以下控制台应用程序：

```
class Program
{
    static void Main(string[] args)
    {
        var vm = new MainPageViewModel();
        var task = vm.GetAllEvents();
        task.Wait();
        foreach (Event e in task.Result)
        {
            Console.WriteLine("{0} [{1}]", e.Title, e.DateTime);
            Console.WriteLine("Forecast: {0} (Previous: {1})", e.Forecast, e.Previous);
            Console.WriteLine();
        }
    }
} 
```

无论有没有断点，这段代码都能很好地执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T04:24:51.197

将您的测试方法从 更改`async void`为`async Task`。

这不会清除`WebException`，但它应该使其保持一致，以便您可以调试它。

# audio - 使用 WaveOUT API 产生无失真的 Tone 声音所需的最小音频缓冲区是多少

> ID：14293749
> 
> 赞同：1
> 
> 时间：2013-01-12T13:26:01.220
> 
> 标签：audio, signals, buffer, waveout, waveoutwrite

WaveOut API 是否对当前播放的缓冲区大小有一些内部限制？我的意思是，如果我提供一个非常小的缓冲区，它是否会以某种方式影响播放到扬声器的声音。当我用小缓冲区生成和播放正弦波时，我遇到了非常奇怪的噪音。像高峰或“BUMP”之类的东西。

# 完整的故事：

我做了一个可以实时生成窦性声音信号的程序。可变参数是频率和音量。项目要求最大延迟为 50 毫秒。因此该程序必须能够实时产生具有手动可调音频信号频率的正弦信号。

我使用 Windows WaveOut API、C# 和 P/invoke 来访问 API。

当声音缓冲区为 1000 毫秒时，一切正常。如果我根据延迟要求将缓冲区最小化到 50 毫秒，那么对于我在每个缓冲区结束时遇到的某些频率，会出现噪音或“BUMP”。我不明白生成的声音是否格式错误（我检查过但不是）或者音频芯片发生了什么问题，或者初始化和播放有一些延迟。

当我将制作的音频保存到 .wav 文件时，一切都很完美。

这意味着我的代码中一定有一些错误，或者音频子系统对发送给它的缓冲区块有限制。

对于那些不知道 WaveOut 必须首先初始化的人，然后必须为每个缓冲区准备好包含需要播放的字节数的音频头以及指向包含需要播放的音频的内存的指针成为玩家。

**更新**

以下组合会产生噪音 44100 SamplingRate、16 位、2 通道、50 毫秒缓冲并生成 201Hz、202Hz、203Hz、204Hz、205Hz ... 219Hz、220Hz、240Hz 的 Sinus 音频信号，没问题

为什么相差20，我不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T13:42:01.960

当您需要流畅地输出音频时，需要牢记以下几点：

*   `waveOutXxxx`API 是较低级别 API 之上的遗留/兼容性层，因此它具有更大的开销，当您要达到最小延迟时不建议这样做。请注意，这不太可能是您的主要问题，但这是有助于理解的一般知识
*   因为 Windows 不是实时操作系统，它的音频子系统也不是实时的，或者您无法控制在将音频数据排队以供输出和数据真正播放之间所涉及的随机延迟，关键是要保持一定程度的缓冲区充满度它可以保护您免受播放下溢并提供流畅的播放
*   `waveOutXxxx`您不仅限于拥有单个缓冲区，您可以分配多个可重复使用的缓冲区并回收它们

总而言之，waveOutXxxx、DirectSound、DirectShow API 在延迟 50 毫秒及以上的情况下运行良好。使用 WASAPI 独占模式流，您[可以获得 5 毫秒甚至更低的延迟](https://dsp.stackexchange.com/questions/611/is-real-time-signal-processing-possible-under-windows/618#618)。

编辑：我似乎太早说了大约 20 毫秒的延迟。为了弥补这一点，这里有一个简单的工具[LowLatencyWaveOutPlay](http://www.alax.info/trac/public/browser/trunk/Utilities/LowLatencyWaveOutPlay) ( [Win32](http://www.alax.info/svn/public/trunk/Utilities/LowLatencyWaveOutPlay/_Bin/Win32/Release/LowLatencyWaveOutPlay.exe) , [x64](http://www.alax.info/svn/public/trunk/Utilities/LowLatencyWaveOutPlay/_Bin/x64/Release/LowLatencyWaveOutPlay.exe) ) 来估计您可以实现的延迟。有足够的缓冲播放是流畅的，否则你会听到卡顿。

我的理解是，缓冲区可能会延迟返回，并且在最小延迟方面的最佳设计在于拥有更多更小的缓冲区，以便尽早将它们归还。例如，10 个缓冲区 3 ms/缓冲区而不是 3 个缓冲区 10 ms/缓冲区。

```
D:\>LowLatencyWaveOutPlay.exe 48000 10 3
Format: 48000 Hz, 1 channels, 16 bits per sample
Buffer Count: 10
Buffer Length: 3 ms (288 bytes)
Signal Frequency: 1000 Hz
^C 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-28T06:09:38.257

所以我来这里是因为我也想找到 waveoutwrite() 的基本延迟。在获得平滑的正弦音之前，我有大约 25-26 毫秒的延迟。

这是为了：

AMD Phenom(tm) 9850 四核处理器 2.51 GHz 4.00 GB ram 64 位操作系统，基于 x64 的处理器 Windows 10 Enterprise N

代码如下。它是 Petzold 的正弦波程序的修改版本，重构为在命令行上运行。我还将缓冲区的轮询更改为在缓冲区完成上使用回调，其想法是这将使程序更有效率，但这并没有什么不同。

它还具有经过时间的设置，我用它来探测缓冲区操作的各种时间。使用我得到的那些：

```
Sine wave output program
Channels:         2
Sample rate:      44100
Bytes per second: 176400
Block align:      4
Bits per sample:  16
Time per buffer:  0.025850
Total time prepare header:   87.5000000000 usec
Total time to fill:          327.9000000000 usec
Total time for waveOutWrite: 90.8000000000 usec 
```

程序：

```
/*******************************************************************************

WaveOut example program

Based on C. Petzold's sine wave example, outputs a sine wave via the waveOut
API in Win32.

*******************************************************************************/

#include <stdio.h>
#include <windows.h>
#include <math.h>
#include <limits.h>
#include <unistd.h>

#define SAMPLE_RATE      44100
#define FREQ_INIT        440
#define OUT_BUFFER_SIZE  570*4
#define PI               3.14159
#define CHANNELS         2
#define BITS             16
#define MAXTIM           1000000000

double        fAngle;
LARGE_INTEGER perffreq;
PWAVEHDR      pWaveHdr1, pWaveHdr2;
int           iFreq = FREQ_INIT;

VOID FillBuffer (short* pBuffer, int iFreq)

{

     int i;
     int c;

     for (i = 0 ; i < OUT_BUFFER_SIZE ; i += CHANNELS) {

          for (c = 0; c < CHANNELS; c++)
            pBuffer[i+c] = (short)(SHRT_MAX*sin (fAngle));
          fAngle += 2*PI*iFreq/SAMPLE_RATE;
          if (fAngle > 2 * PI) fAngle -= 2*PI;

     }

}

double elapsed(LARGE_INTEGER t)

{

    LARGE_INTEGER rt;
    long tt;

    QueryPerformanceCounter(&rt);
    tt = rt.QuadPart-t.QuadPart;

    return (tt*(1.0/(double)perffreq.QuadPart));

}

void CALLBACK waveOutProc(HWAVEOUT hwo, UINT uMsg, DWORD_PTR dwInstance, DWORD_PTR dwParam1, DWORD_PTR dwParam2)

{

    if (uMsg == WOM_DONE) {

        if (pWaveHdr1->dwFlags & WHDR_DONE) {

            FillBuffer((short*)pWaveHdr1->lpData, iFreq);
            waveOutWrite(hwo, pWaveHdr1, sizeof(WAVEHDR));

        }
        if (pWaveHdr2->dwFlags & WHDR_DONE) {

            FillBuffer((short*)pWaveHdr2->lpData, iFreq);
            waveOutWrite(hwo, pWaveHdr2, sizeof(WAVEHDR));

        }

    }

}

int main()

{

    HWAVEOUT     hWaveOut ;

    short*       pBuffer1;
    short*       pBuffer2;
    short*       pBuffer3;

    WAVEFORMATEX waveformat;
    UINT         wReturn;
    int          bytes;
    long         t;
    LARGE_INTEGER rt;
    double       timprep;
    double       filtim;
    double       waveouttim;

    printf("Sine wave output program\n");

    fAngle = 0; /* start sine angle */

    QueryPerformanceFrequency(&perffreq);

    pWaveHdr1 = malloc (sizeof (WAVEHDR));
    pWaveHdr2 = malloc (sizeof (WAVEHDR));
    pBuffer1  = malloc (OUT_BUFFER_SIZE*sizeof(short));
    pBuffer2  = malloc (OUT_BUFFER_SIZE*sizeof(short));
    pBuffer3  = malloc (OUT_BUFFER_SIZE*sizeof(short));

    if (!pWaveHdr1 || !pWaveHdr2 || !pBuffer1 || !pBuffer2) {

        if (!pWaveHdr1) free (pWaveHdr1) ;
        if (!pWaveHdr2) free (pWaveHdr2) ;
        if (!pBuffer1)  free (pBuffer1) ;
        if (!pBuffer2)  free (pBuffer2) ;

        fprintf(stderr, "*** Error: No memory\n");
        exit(1);

    }

    // Load prime parameters to format
    waveformat.wFormatTag      = WAVE_FORMAT_PCM;
    waveformat.nChannels       = CHANNELS;
    waveformat.nSamplesPerSec  = SAMPLE_RATE;
    waveformat.wBitsPerSample  = BITS;
    waveformat.cbSize          = 0;

    // Calculate other parameters
    bytes = waveformat.wBitsPerSample/8; /* find bytes per sample */
    if (waveformat.wBitsPerSample&8) bytes++; /* round  up */
    bytes *= waveformat.nChannels; /* find total channels size */
    waveformat.nBlockAlign = bytes; /* set block align */
    /* find average bytes/sec */
    waveformat.nAvgBytesPerSec = bytes*waveformat.nSamplesPerSec;

    printf("Channels:         %d\n", waveformat.nChannels);
    printf("Sample rate:      %d\n", waveformat.nSamplesPerSec);
    printf("Bytes per second: %d\n", waveformat.nAvgBytesPerSec);
    printf("Block align:      %d\n", waveformat.nBlockAlign);
    printf("Bits per sample:  %d\n", waveformat.wBitsPerSample);
    printf("Time per buffer:  %f\n",
        OUT_BUFFER_SIZE*sizeof(short)/(double)waveformat.nAvgBytesPerSec);

    if (waveOutOpen (&hWaveOut, WAVE_MAPPER, &waveformat, (DWORD_PTR)waveOutProc, 0, CALLBACK_FUNCTION)
        != MMSYSERR_NOERROR) {

        free (pWaveHdr1) ;
        free (pWaveHdr2) ;
        free (pBuffer1) ;
        free (pBuffer2) ;

        hWaveOut = NULL ;
        fprintf(stderr, "*** Error: No memory\n");
        exit(1);

    }

    // Set up headers and prepare them

    pWaveHdr1->lpData          = (LPSTR)pBuffer1;
    pWaveHdr1->dwBufferLength  = OUT_BUFFER_SIZE*sizeof(short);
    pWaveHdr1->dwBytesRecorded = 0;
    pWaveHdr1->dwUser          = 0;
    pWaveHdr1->dwFlags         = WHDR_DONE;
    pWaveHdr1->dwLoops         = 1;
    pWaveHdr1->lpNext          = NULL;
    pWaveHdr1->reserved        = 0;

QueryPerformanceCounter(&rt);
    waveOutPrepareHeader(hWaveOut, pWaveHdr1, sizeof (WAVEHDR));
timprep = elapsed(rt);

    pWaveHdr2->lpData          = (LPSTR)pBuffer2;
    pWaveHdr2->dwBufferLength  = OUT_BUFFER_SIZE*sizeof(short);
    pWaveHdr2->dwBytesRecorded = 0;
    pWaveHdr2->dwUser          = 0;
    pWaveHdr2->dwFlags         = WHDR_DONE;
    pWaveHdr2->dwLoops         = 1;
    pWaveHdr2->lpNext          = NULL;
    pWaveHdr2->reserved        = 0;

    waveOutPrepareHeader(hWaveOut, pWaveHdr2, sizeof (WAVEHDR));

    // Send two buffers to waveform output device

QueryPerformanceCounter(&rt);
    FillBuffer (pBuffer1, iFreq);
filtim = elapsed(rt);

QueryPerformanceCounter(&rt);
    waveOutWrite (hWaveOut, pWaveHdr1, sizeof (WAVEHDR));
waveouttim = elapsed(rt);

    FillBuffer (pBuffer2, iFreq);
    waveOutWrite (hWaveOut, pWaveHdr2, sizeof (WAVEHDR));

    // Run waveform loop
    sleep(10);

printf("Total time prepare header:   %.10f usec\n", timprep*1000000);
printf("Total time to fill:          %.10f usec\n", filtim*1000000);
printf("Total time for waveOutWrite: %.10f usec\n", waveouttim*1000000);

    waveOutUnprepareHeader(hWaveOut, pWaveHdr1, sizeof (WAVEHDR));
    waveOutUnprepareHeader(hWaveOut, pWaveHdr2, sizeof (WAVEHDR));
    // Close waveform file
    free (pWaveHdr1) ;
    free (pWaveHdr2) ;
    free (pBuffer1) ;
    free (pBuffer2) ;

} 
```

# android - 在android中缓慢编辑文本响应？

> ID：14293750
> 
> 赞同：0
> 
> 时间：2013-01-12T13:26:06.110
> 
> 标签：android, android-layout, android-edittext

在我的项目中，我有一页有 9 个编辑文本框，并为所有这些内容设置了背景，我使用字体 serif fonts.in 将通过虚拟键盘进行编辑。编辑文本仅在几秒钟后显示如何纠正 tat问题..任何知道帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:28:32.657

可能背景越来越紧张，Android 在性能方面并不是很好。使用背景颜色或形状代替图像，或者[使背景重复](https://stackoverflow.com/a/2706944/832776)。

# eclipse-plugin - 如何在 e4 rcp 中实现和注册 iapplication 接口？

> ID：14293751
> 
> 赞同：0
> 
> 时间：2013-01-12T13:26:29.010
> 
> 标签：eclipse-plugin, eclipse-rcp, e4

有没有办法在 Eclipse rcp 中创建和实现 iapplication 接口？或者有没有办法改变 e4 rcp 中 e4application 类抛出的工作区锁定错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-23T22:47:45.290

实现 IApplication 接口（或扩展 E4Application 类）。假设您将类命名为“ExtendedE4Application”，将以下行添加到您的 plugin.xml

```
 <extension
         id="ExtendedE4Application"
         point="org.eclipse.core.runtime.applications">
      <application
            cardinality="singleton-global"
            thread="main"
            visible="true">
         <run
               class="your.package.ExtendedE4Application">
         </run>
      </application>
   </extension> 
```

# c# - 构建具有多重排序的表达式

> ID：14293760
> 
> 赞同：7
> 
> 时间：2013-01-12T13:28:27.730
> 
> 标签：c#, linq, lambda, expression

我正在尝试构建一个用于排序的表达式，并且我编写了使用一个属性对列表进行排序的代码。

但是我需要首先按一个属性对其进行排序，然后再按另一个属性对它进行排序，依此类推。

我的意思是我想构建一个表达式来实现类似的东西：`students.OrderBy(fistExpression.Compile()).ThenBy(secondImpression.Complie()).ThenBy(thirdExpression.Compile())`.

那么如何动态地放置这些`ThenBy`方法呢？

这是我的代码：

```
Type studentType = typeof(Student);
ParameterExpression studentParam = Expression.Parameter(studentType, "x");
MemberInfo ageProperty = studentType.GetProperty("Age");
MemberExpression valueInNameProperty = 
     Expression.MakeMemberAccess(studentParam, ageProperty);
Expression<Func<Student, int>> orderByExpression =
     Expression<Func<Student, int>>.Lambda<Func<Student, int>>(valueInNameProperty, studentParam);
var sortedStudents = students.OrderBy(orderByExpression.Compile()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:53:56.883

我的解决方案：

```
public static Func<Student, object> BuildPredicate(string propertyName)
{
    Type studentType = typeof(Student);
    ParameterExpression studentParam = Expression.Parameter(studentType, "x");
    MemberInfo ageProperty = studentType.GetProperty(propertyName);
    MemberExpression valueInNameProperty = Expression.MakeMemberAccess(studentParam, ageProperty);
    UnaryExpression expression = Expression.Convert(valueInNameProperty, typeof (object));
    Expression<Func<Student, object>> orderByExpression = Expression.Lambda<Func<Student, object>>(expression, studentParam);
    return orderByExpression.Compile();
} 
```

在您的表达式制作代码中添加了强制转换为`object`.

这就是你如何创建一个链`ThenBy`：

```
var sortedStudents = students.OrderBy(BuildPredicate("Age"));
foreach (var property in typeof(Student).GetProperties().Where(x => !String.Equals(x.Name, "Age")))
{
    sortedStudents = sortedStudents.ThenBy(BuildPredicate(property.Name));
}

var result = sortedStudents.ToList(); 
```

最后，`Student`示例类：

```
public class Student
{
    public int Age { get; set; }
    public string Name { get; set; } 
} 
```

**更新：**

另一种方法是使用属性来标记您的属性，以便在和`Student`中使用它们。像：`OrderBy``ThenBy`

```
public class Student
{
    [UseInOrderBy]
    public int Age { get; set; }

    [UseInOrderBy(Order = 1)]
    public string Name { get; set; } 
}

[AttributeUsage(AttributeTargets.Property)]
internal class UseInOrderByAttribute : Attribute
{
    public int Order { get; set; }
} 
```

这就是您可以使用以下方式构建排序链的方式`UseInOrderByAttribute`：

```
Type studentType = typeof (Student);
var properties = studentType.GetProperties()
                            .Select(x => new { Property = x, OrderAttribute = x.GetCustomAttribute<UseInOrderByAttribute>() })
                            .Where(x => x.OrderAttribute != null)
                            .OrderBy(x => x.OrderAttribute.Order);

var orderByProperty = properties.FirstOrDefault(x => x.OrderAttribute.Order == 0);
if (orderByProperty  == null)
    throw new Exception("");

var sortedStudents = students.OrderBy(BuildPredicate(orderByProperty.Property.Name));
foreach (var property in properties.Where(x => x.Property.Name != orderByProperty.Property.Name))
{
    sortedStudents = sortedStudents.ThenBy(BuildPredicate(property.Property.Name));
}

var result = sortedStudents.ToList(); 
```

*修复*：`BuildPredicate`可以不用`dynamic`. `BuildPredicate`示例代码已更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T14:41:34.383

我假设你有你希望能够排序的私有属性。例如，如果您有此类：

```
public class Student 
{
    public Student (int age, string name)
    {
        Age = age;
        Name = name;
    }

    private string Name { get;  set; }

    public int Age { get; set; }

    public override string ToString ()
    {
        return string.Format ("[Student: Age={0}, Name={1}]", Age, Name);
    }
} 
```

您可以使用以下方法来构建将获取公共和私有属性的表达式：

```
public static Func<TType, TResult> CreateExpression<TType, TResult>(string propertyName) 
{
    Type type = typeof(TType);
    ParameterExpression parameterExpression = Expression.Parameter(type, propertyName);
    MemberInfo property = type.GetProperty(propertyName, BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public);
    MemberExpression valueInProperty =  Expression.MakeMemberAccess(parameterExpression, property);

    return Expression.Lambda<Func<TType,TResult>>(valueInProperty, parameterExpression).Compile();
} 
```

使用示例：

```
 var students = new [] { 
            new Student(20, "Ben"), 
            new Student(20, "Ceasar"),
            new Student(20, "Adam"),
            new Student(21, "Adam"),
        };

        var sortedStudents = students
            .OrderBy(CreateExpression<Student, string>("Name"))
            .ThenBy(CreateExpression<Student, int>("Age"));

        sortedStudents.ToList().ForEach(student => Console.WriteLine(student)); 
        /*
        Prints:
        [Student: Age=20, Name=Adam]
        [Student: Age=21, Name=Adam]
        [Student: Age=20, Name=Ben]
        [Student: Age=20, Name=Ceasar]
         */ 
```

# java - Java7 WatchService - 如何检测实际监视目录的重命名/移动

> ID：14293764
> 
> 赞同：11
> 
> 时间：2013-01-12T13:28:45.483
> 
> 标签：java, io, java-7, watchservice

我正在使用[`WatchService`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)应用程序工作台同步数据文件。当我重命名/移动监视目录时，我没有收到任何事件，WatchKey 也不会变得无效。我仍然从重命名的目录中获取事件，但据我所知，没有办法找出 WatchKey 的实际路径[`WatchKey.watchable()`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchKey.html#watchable%28%29)，但仍然返回原始目录路径。我想避免需要锁定监视目录以防止更改，因为我希望使应用程序尽可能轻量级。

我在 Windows 7 上使用 JDK 7u10 遇到了这个问题

您是否知道此问题的任何解决方法，而无需锁定目录或查看所有目录到根目录？

**更新**

在 Linux 上，我观察到了同样的行为。

到目前为止，我现在似乎有三个选择。

1）依靠用户的纪律，他/她不会移动数据目录。我不太喜欢这个选项，因为它可能会导致未定义的行为。

2）使用更广泛的非标准原生库

3) 在上级目录上创建看门狗的层次结构。这些将仅接受`ENTRY_DELETE`事件，因为此事件（或`OVERFLOW`）必须在实际监视的目录被移动或删除时出现，因此无效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T14:05:30.757

我的理解是重命名目录会在新旧父目录上生成文件系统事件，而不是在重命名的目录上。根据[Can iNotify 的答案告诉我受监控的文件被移动到哪里？](https://stackoverflow.com/questions/5000880/can-inotify-tell-me-where-a-monitored-file-is-moved)，除非您正在监视目标目录，否则操作系统无法告诉您某些内容被移动到了哪里。（此外，在 Java 7/8 中 MOVE 事件不由 watch 服务实现处理。）

**更新**

您可以尝试使用标准 Java7 API添加对（[特定于平台](http://jpathwatch.wordpress.com/documentation/features/)的）扩展事件的支持的 jpathwatch 项目。`WatchService`

参考：

*   文档 - [http://jpathwatch.wordpress.com/](http://jpathwatch.wordpress.com/)
*   javadoc - [http://jpathwatch.sourceforge.net/](http://jpathwatch.sourceforge.net/)

# hadoop - 从 hdfs 远程检索文件并将其本地存储在节点中

> ID：14293765
> 
> 赞同：1
> 
> 时间：2013-01-12T13:28:56.137
> 
> 标签：hadoop, hdfs

我想编写一个作业，其中每个映射器检查来自 hdfs 的文件是否存储在正在执行的节点中。如果没有发生这种情况，我想从 hdfs 检索它并将其本地存储在此节点中。这可能吗?

编辑：我正在尝试这样做（3）重新分区加入的预处理，如此处所述：[链接](http://mapreducejoin.weebly.com/join-algorithm-in-mapreduce.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T04:32:38.210

[Hadoop 中的DistributedCache](http://hadoop.apache.org/docs/r0.20.2/mapred_tutorial.html#DistributedCache)功能可用于分发完成作业所需的辅助数据或辅助数据。这里 ( [1](http://developer.yahoo.com/hadoop/tutorial/module5.html#auxdata) , [2](http://hadoop.apache.org/docs/r0.20.2/mapred_tutorial.html#DistributedCache) ) 是一些有趣的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:03:28.860

你为什么想做这个？Hadoop 使用的**数据局部性原则可以为您做到这一点。**好吧，它不会移动数据，它会移动程序。

这来自关于 Hadoop 的 Wikipedia 页面：

> jobtracker 在知道数据位置的情况下将 map/reduce 作业调度到 tasktracker。例如，如果节点 A 包含数据 (x,y,z) 而节点 B 包含数据 (a,b,c)。jobtracker 将安排节点 B 在 (a,b,c) 上执行 map/reduce 任务，节点 A 将被安排在 (x,y,z) 上执行 map/reduce 任务

Hadoop 文档本身解释了将计算转移到数据而不是相反的原因：

> “移动计算比移动数据便宜” 如果应用程序请求的计算在它所操作的数据附近执行，则它的效率要高得多。当数据集的大小很大时尤其如此。这最大限度地减少了网络拥塞并增加了系统的整体吞吐量。假设是，将计算迁移到更靠近数据所在的位置通常比将数据移动到应用程序运行的位置更好。HDFS 为应用程序提供了接口，以使自己更靠近数据所在的位置。

# wcf - 关于服务参考和 MVVM 模式的几个一般问题

> ID：14293766
> 
> 赞同：2
> 
> 时间：2013-01-12T13:29:00.063
> 
> 标签：wcf, web-services, mvvm, visual-studio-2012

有一个网络服务。

*   它提供类型`Zoo`和`Animal`.
*   `Zoo`有一个动物 ID 和名称的字典。
*   `Animal`具有属性`Id`：`Name`和`(additional stuff)`。
*   它有一个`GetZoo`返回动物园对象的方法。
*   它有一个方法，该方法`GetAnimalStuffById`返回一个`Animal`带有`Id`,`Name`和`(additional stuff)`.

所以这个想法是 -`GetZoo`允许我获取动物 ID + 名称的列表，然后`GetAnimalStuffById`获取完整的动物信息。

我在 VS 中为该服务添加了一个“服务引用”，并想编写一个 MVVM 应用程序。有些事情我不完全理解，需要被洗脑。

1.  自动生成的类可以作为我的模型吗？

2.  与示例无关，但无论如何：添加服务引用时应该指定什么“集合类型”？对模型来说是`ObservableCollection`一种矫枉过正和不好的做法吗？

3.  比如说，用户进入一个显示完整动物信息的应用程序页面。显然，最初我只有一个`AnimalViewModel`和`Id`值`Name`（取自`GetZoo`）。当页面被导航到时，我调用`GetAnimalStuffById`并获取一个`Animal`包含所有数据的对象。接下来我该怎么办？将我的视图的 DataContext 替换为从新对象`AnimalViewModel`创建的新`Animal`对象 (A)，还是仅替换其中的值 (B)？

4.  如果答案是 (A)，如何替换所有视图中的 DataContext？

5.  如果答案是 (B)，那么应该是什么导致了该更新？虚拟机是否应该订阅一些花哨的经理关于获取`Animal`更新的活动？还是有其他方法？

6.  `INotifyPropertyChanged`自动生成的类的目的是什么？在我的情况下，它们总是从网络服务中返回。Microsoft 是否建议在某些情况下也将它们用作 ViewModels？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T10:37:29.807

以下是基于我自己的 MVVM 经验的一些答案（这可能是也可能不是“最佳实践”..）

1.  绝对地！无需将所有事情都做两次 - 参见 #5 和 #6（尽管这里有些人不同意）。

2.  是的，除非你真的需要`ObservableCollection`服务器端的功能，否则我会说这有点矫枉过正，而且可能会让其他人感到困惑。从技术上讲，通过网络发送的消息没有开销，但我会使用更简单的东西，比如数组。

3.  选择选项 B。

4.  -

5.  例如，你可以有一个属性`AnimalViewModel`来保存所有额外的东西：`public Animal AdditionalData { ...`. 现在，任何调用的人都可以使用该对象`GetAnimalStuffById`更新当前 ViewModel 的 AdditionalData 。`Animal`

6.  我假设您已经知道`INotifyPropertyChanged`可以让视图知道某些数据在某处发生了变化（如果没有，谷歌搜索“inotifypropertychanged mvvm”应该让您开始）。现在，连接 #1 和 #5 中的点，您的 View 现在可以*通过 AdditionalData*属性绑定到动物的附加数据，而无需重新创建 ViewModel: 中的所有内容`<TextBox Text="{Binding Path=AdditionalData.HeightOrWhatever}" />`。

*注意：如果您的视图不是 WPF 或 Silverlight，那么最后一点将没有多大意义。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:11:40.163

这是基于我的经验的答案（主要是提供另一种观点）

1.  `Models`从端点自动生成很好。但我会推荐 POCO`Models`没有任何`INPC`麻烦。两个原因，a) 它使`Models`维护变得更简单和更容易，b) 你不会想`Models`直接将你的 暴露给`View`，或者如果你这样做，它们将无法正常工作。

2.  从 #1 继续，我不会使用`ObservableCollection`in `Models`。再次保持简单，避免`Models`直接呈现给`View`.

3.  选项 (B)

4.  -

5.  中的所有属性都`ViewModel`应该实现 INPC。然后，当您更改它们时，绑定将自动更新。您可以将所有`AdditionalData`值作为`AnimalViewModel`扁平化数据的属性，也可以拥有一个`AdditionalDataViewModel`对象来保存额外数据。要从`AdditionalData`对象映射数据，请`AdditionalDataViewModel`考虑使用[AutoMapper](http://automapper.org/)或[ValueInjecter](http://valueinjecter.codeplex.com/)等映射工具。

6.  我不知道为什么自动生成器会`INPC`在你的模型中添加东西。你用的是什么工具？无论如何，正如我所说，我不建议`INPC`在. 相反，您应该从to映射并且只向.`Models``Models``View``Models``ViewModels``ViewModels``View`

# html - CSS显示所有孩子

> ID：14293769
> 
> 赞同：0
> 
> 时间：2013-01-12T13:29:17.867
> 
> 标签：html, css, menu

我想知道是否可以仅将 css 用于“悬停时，显示所有孩子”？

我创建了一个示例

> [http://jsfiddle.net/fantill/SEhX5/4/](http://jsfiddle.net/fantill/SEhX5/4/)

现在有 3 个级别`li`，当悬停时`li`会显示下一个级别`li`。

我希望当悬停第一级时`li`，所有下一级`li`都会出现。

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:36:52.483

```
nav ul > li:hover * {display:block} 
```

# javascript - 如何避免此 Javascript 中的重定向？

> ID：14293771
> 
> 赞同：0
> 
> 时间：2013-01-12T13:29:31.567
> 
> 标签：javascript

> **可能重复：**
> [显示执行值的 Javascript 提示](https://stackoverflow.com/questions/14292978/javascript-prompt-displaying-executed-value)

我知道我可以在此代码中插入 prompt()，但想知道如何停止此脚本以在另一个页面上显示结果。我正在尝试通过提示在同一页面上显示结果。

```
<input type="button" value="Short URL" onClick="javascript:void(location.href='http://taimoorsultan.com/y/yourls-api.php?signature=05e2685fc7&format=simple&action=shorturl&url='+escape(location.href));"> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:52:02.517

通过使用 JQuery AJAX，您可以在同一页面上显示结果

浏览器[在这里](http://openenergymonitor.org/emon/node/107)

[在这里](http://openenergymonitor.org/emon/sites/default/files/ajax01.tar.gz)下载源文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T13:47:14.853

请在 SO [What is the best ajax tutorial site](https://stackoverflow.com/questions/1602628/what-is-the-best-ajax-tutorial-site)上查看上一个问题。

如果您使用像 Jquery 之类的库（强烈推荐），它将具有使您的编码变得简单的包装器。

祝你好运。

# symfony - 教义模式更新/迁移错误：唯一索引

> ID：14293774
> 
> 赞同：0
> 
> 时间：2013-01-12T13:29:41.750
> 
> 标签：symfony, doctrine-orm, migration

我发现了类似的问题，但它们在应用程序中，我的与 cli 命令有关，即`php app/console doctrine:schema:update --force`或`php app/console doctrine:migrations:migrate`

错误：

```
Migration 20130112151503 failed during Execution. Error An exception occurred wh
ile executing 'CREATE UNIQUE INDEX UNIQ_68D3801E989D9B62 ON artists (slug)':

    SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '' for key
     'UNIQ_68D3801E989D9B62'

  [Doctrine\DBAL\DBALException]
  An exception occurred while executing 'CREATE UNIQUE INDEX UNIQ_68D3801E989
  D9B62 ON artists (slug)':

  SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '' fo
  r key 'UNIQ_68D3801E989D9B62' 
```

我真的希望迁移能够解决这个错误，但是唉。我该如何解决这个问题，例如我只能在实时服务器上运行迁移命令。如果存在，迁移为什么不首先删除唯一索引？或者为什么它没有检测到已经有一个唯一索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:41:25.480

该 SQL 错误并不是说已经存在唯一索引，而是说 slug 列具有重复值，因此无法添加索引。

确保 slug 列只有唯一（或 null，但可能不建议用于 slug 列）值，然后尝试再次运行迁移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-09T09:29:30.070

这是因为`slug`数据库中的字段为空或重复。因此，尝试删除表中的所有内容并再次生成命令

# javascript - 字符串访问需要正则表达式

> ID：14293782
> 
> 赞同：1
> 
> 时间：2013-01-12T13:30:46.607
> 
> 标签：javascript, jquery

我有一个巨大的字符串。该字符串采用以下形式：

```
 var str =  "content.....
              more content.........
              <script src='url' ... />
              <script src='url' ... />
              <script src='url' ... />
              ....
              ........."; 
```

现在我想访问字符串中的所有 url。所以为此我使用以下javascript：

```
 var regex = //this part i required
    var matches = [];
    var match = regex.exec(str); 
```

谁能给我正则表达式以从上述字符串访问 src 的所有值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T13:32:42.470

您正在导入 jQuery，因此，假设您的字符串是有效的 HTML，您可以使用它来解析它并获取您的 URL。

事实证明这并不容易，因为 jQuery 不允许您查找`<script>`元素。

我提出了这个解决方案，但它显然不是很优雅：

```
str = str.replace(/script/g, 'placeholder');
var urls = $('placeholder', '<div>'+str+'</div>').map(
    function(){return $(this).attr('src')}
).get(); 
```

这将创建一个包含所有 url 的数组。

[示范](http://jsfiddle.net/pq45P/)

# ios - 重用 UI（xib 文件）

> ID：14293783
> 
> 赞同：3
> 
> 时间：2013-01-12T13:30:53.627
> 
> 标签：ios, objective-c, xcode, cocoa-touch

在我的应用程序中，我有两个屏幕 - 第一个显示用户个人资料，第二个屏幕 - 编辑个人资料信息。它们是相似的。我已经完成了第一个屏幕的 xib 文件。

在第二个屏幕上重复使用它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:42:05.277

您应该将相关元素封装为自定义视图类。您可以通过使用代码而不是 xibs 创建视图来解决这个问题，我会推荐这个。

但是，如果您更喜欢使用 xib，您可以创建一个模拟您想要重用的东西的模型。然后在您的视图控制器中调用如下代码：

```
UIView* aView = [UIView alloc] initWithFrame .....];
[[NSBundle mainBundle] loadNibNamed:@"MyReusableComponent" owner:aView options:nil];
UILabel* someLabel = aView.injectedLabel; //this is alive after loading the xib
[self.view addSubView:aView]; 
```

创建 xib 时，您需要将 Files Owner 设置为一个类，该类将响应将注入的属性的设置器。（例如你的新视图类）。这样您就可以连接参考。

有关更多信息，请查看 Apple 从 xib 加载表格单元格的示例 - 这是相同的技术。当您加载 xib 并指定所有者时，它会将 xib 中的值注入所有者，在本例中为自定义视图。

![在此处输入图像描述](../Images/9d029040237dffaad4347d35664e290f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:27:13.310

您的意思是您进入视图控制器的编辑模式并重用您创建的那些元素吗？

[在视图控制器中启用编辑模式](https://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/EnablingEditModeinaViewController/EnablingEditModeinaViewController.html#//apple_ref/doc/uid/TP40007457-CH14-SW1 "在视图控制器中启用编辑模式")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T13:37:18.707

您可以使用更改外观`UITextField`的 s（而不是`UILabel`逻辑上用于显示的 s），然后打开`enabled`/关闭。作为一个最小的例子：

**显示**：

```
self.textField.borderStyle = UITextBorderStyleNone;
self.textfield.enabled     = NO; 
```

**编辑**：

```
self.textField.borderStyle = UITextBorderStyleBezel;
self.textfield.enabled     = YES; 
```

你当然可以在外观上做更多的事情，而不仅仅是这些基础知识。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-12T13:37:59.020

在 Xcode 中：转到文件 > 重复。

然后将重复的 xib 命名为“editProfile”之类的名称，这将提供第一个 xib 的副本，您可以根据需要进行调整

# php - 使用缓存存储访问统计信息的最佳方式

> ID：14293784
> 
> 赞同：0
> 
> 时间：2013-01-12T13:30:56.223
> 
> 标签：php, caching

为具有缓存的线程存储统计信息的最佳方法是什么？

我真正需要的是在我的社区的不同线程上存储每天有多少访问。

但是这样缓存是安全的，以后应该可以将其放入数据库中。

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:44:42.550

你是什​​么意思“但是这样缓存是安全的......”？

最简单的方法是使用 mySQL 数据库。它使用简单且安全。如果您没有数据库，您还可以将访问/视图存储在纯文本文件或多个基于文本的文件中。

# windows-phone-7 - 所有模板都完全安装在我的 Windows Phone SDK 7.1 中了吗？

> ID：14293785
> 
> 赞同：0
> 
> 时间：2013-01-12T13:30:57.433
> 
> 标签：windows-phone-7, winapi

我从网上得到一本电子书来学习 windows phone 开发 7.1。

我意识到我看到我的电脑中安装的模板不超过 2 个......

那么这是否意味着我的电脑中没有正确安装 windows phone SDK 7.1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:59:14.480

您还需要安装**XNA SDK** - [XNA SDK 下载](http://www.microsoft.com/en-us/download/details.aspx?id=23714)

# php - 使用 laravel 从多对多检索数据

> ID：14293790
> 
> 赞同：0
> 
> 时间：2013-01-12T13:31:58.173
> 
> 标签：php, laravel, eloquent

我有 2 个表和一个数据透视表。表的结构如下所述。

```
users table:
id username password
1   admin    xyzasd

roles table:

id  name
1   role1
2   role2

role_user table:

id user_id role_id
1    1       1
2    1       2 
```

我的用户模型：

```
class User extends Basemodel{
    public static $table = 'users';
    public static $timestamps = true;

    public function roles()
    {
        return $this->has_many_and_belongs_to('Role');
    }

    public static function menu(){
        $roles = User::find(1)->roles()->get();
        return $roles;
    }
} 
```

我的控制器：

```
public function get_index()
    {
        return View::make('home.index')
            ->with('title','testing many to many')
            ->with('menu',User::menu());
    } 
```

在我的刀片视图文件中，我有这个语句 {{$menu}} 我得到的只是一个消息数组，有人可以指导我如何获取记录吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T18:40:19.133

首先，用户应该扩展 Eloquent。此外，您应该创建一个角色模型。

//应用程序/模型/User.php

```
class User extends Eloquent
{
    public static $table = 'users';
    public static $timestamps = true;

    public function roles()
    {
        return $this->has_many_and_belongs_to('Role');
    }
} 
```

//application/models/Role.php

```
class Role extends Eloquent
{
    public static $table = 'roles';
    public static $timestamps = true;

    public function users()
    {
        return $this->has_many_and_belongs_to('User');
    }
} 
```

然后对于您的控制器，您基本上可以传递用户。

```
public function get_index()
{
    $user = User::find(1);

    return View::make('home.index')
        ->with('title','testing many to many')
        ->with('user', $user);
} 
```

然后在您看来，您可以做一些很酷的事情，例如：

```
<h1>What's up {{ $user->username }}?</h1>
<h2>You have the following roles:</h2>
@foreach($user->roles as $role)
    <p>{{ $role->name }}</p>
@endforeach 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T18:16:21.963

您应该在视图中遍历`$menu`数组：

```
@foreach ($menu as $menu_item)
  {{ $menu_item->id }} # output ID of a record
@endforeach 
```

# r - 更有效的滚动加入向后而不是向前？

> ID：14293791
> 
> 赞同：3
> 
> 时间：2013-01-12T13:31:59.467
> 
> 标签：r, join, data.table

`data.table`实现`asof`（也称为`rolling`or `LOCF`）开箱即用的连接。我发现了这个相关的问题：

[按类别填写数据表中的缺失（空白） - 向后和向前](https://stackoverflow.com/questions/12607465/filling-in-missing-blanks-in-a-data-table-per-category-backwards-and-forwar)

但这个问题在数据中有 NA。就我而言，我遵循那里的建议以保持数据不规则并使用`roll=TRUE`. 我想做的不是将最后一次观察结果向前推进，而是尽可能有效地向后进行下一次观察。

这是我尝试过的，`time:=-time`首先尝试欺骗它。我可以做得更好吗？我可以做得更快吗？

```
llorJoin <- function(A,B){
    B <- copy(B);
    keys <- key(A);
    if( !identical(key(A), key(B)) | is.null(keys) ){
       stop("llorJoin::ERROR; A and B should have the same non-empty keys");
    }

    lastKey <- tail(keys,1L);
    myStr <- parse(text=paste0(lastKey,":=-as.numeric(",lastKey,")"));
    A <- A[,eval(myStr)]; setkeyv(A,keys);
    B <- B[,eval(myStr)]; setkeyv(B,keys);

    origin <- "1970-01-01 00:00.00 UTC";
    A <- B[A,roll=T];
    myStr2 <- parse(text=paste0(lastKey,":=as.POSIXct(-",lastKey,",origin=origin)"));
    A <- A[,eval(myStr2)]; setkeyv(A,keys);
    return(A);
} 
```

* * *

```
library(data.table)
A <- data.table(time=as.POSIXct(c("10:01:01","10:01:02","10:01:04","10:01:05","10:01:02","10:01:01","10:01:01"),format="%H:%M:%S"),
                b=c("a","a","a","a","b","c","c"),
                d=c(1,1.9,2,1.8,5,4.1,4.2));
B <- data.table(time=as.POSIXct(c("10:01:01","10:01:03","10:01:00","10:01:01"),format="%H:%M:%S"),b=c("a","a","c","d"), e=c(1L,2L,3L,4L));
setkey(A,b,time)
setkey(B,b,time) 
```

* * *

```
library(rbenchmark)
benchmark(llorJoin(A,B),B[A,roll=T],replications=10)
            test replications elapsed relative user.self sys.self user.child sys.child
1 llorJoin(A, B)           10   0.045        1     0.048        0          0         0
2 B[A, roll = T]           10   0.009        1     0.008        0          0         0

   b                time  e   d
1: a 2013-01-12 09:01:01  1 1.0
2: a 2013-01-12 09:01:02  2 1.9
3: a 2013-01-12 09:01:04 NA 2.0
4: a 2013-01-12 09:01:05 NA 1.8
5: b 2013-01-12 09:01:02 NA 5.0
6: c 2013-01-12 09:01:01 NA 4.1
7: c 2013-01-12 09:01:01 NA 4.2 
```

因此，作为比较，初始数据上的 asof 连接要快 5 倍。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T11:40:34.697

`roll`自古以来argument就可以执行*nocb*了。更新此答案以便可以关闭[#615 。](https://github.com/Rdatatable/data.table/issues/615)

您也不再需要设置密钥。`on=`相反，您可以使用参数指定要加入的列（在 中实现`v1.9.6`）。有了这两个功能，任务可以完成如下：

```
require(data.table) # v1.9.6+
A[B, on=c("b", "time"), roll=-Inf]
#                   time b  e   d
# 1: 2015-10-11 10:01:01 a  1 1.0
# 2: 2015-10-11 10:01:02 a  2 1.9
# 3: 2015-10-11 10:01:04 a NA 2.0
# 4: 2015-10-11 10:01:05 a NA 1.8
# 5: 2015-10-11 10:01:02 b NA 5.0
# 6: 2015-10-11 10:01:01 c NA 4.1
# 7: 2015-10-11 10:01:01 c NA 4.2 
```

就是这样。

* * *

您非常接近最快的方式，而无需更改`data.table`. 以下功能请求已在一段时间前提交：

[FR#2300 添加向后和 firstback 到 roll=TRUE](https://github.com/Rdatatable/data.table/issues/615)

我在那里添加了一个链接回到这个问题。您可以在 R-Forge 上搜索功能请求列表。在这种情况下，像“roll”、“forwards”和“backwards”这样的词都可以找到。您可能需要 4 或 5 次尝试搜索尝试以确认尚未提交错误或功能请求。

对我来说，实现该功能请求（只需要内部几行代码）可能比尝试为您提供最快的解决方法要快。

# version-control - 在不改变历史的情况下折叠 Mercurial 变更集

> ID：14293793
> 
> 赞同：1
> 
> 时间：2013-01-12T13:32:27.030
> 
> 标签：version-control, mercurial, tree, rebase

有没有办法将一些连续的 Mercurial 变更集折叠成具有单个描述的树视图，同时保持完整的历史记录？有点像变基，但显示为不改变历史。

这些“固定”、“非常固定”和“非常固定”的变更集让我抓狂。

**更新：**我找到了[Collapse Extension](http://mercurial.selenic.com/wiki/CollapseExtension)和[Histedit Extension](http://mercurial.selenic.com/wiki/HisteditExtension)，但都像`rebase`. 我希望有一种方法可以将带有提交消息的“折叠”信息添加为纯可视层，而不会丢弃任何变更集信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:49:51.893

不，在 mercurial 中没有办法做到这一点。但是有额外的变更集会困扰你吗？您过去的代码总是有缺陷、缓慢且功能低下：这就是您不断开发它的原因。拥有不太正确的变更集并没有什么坏处。

你无法控制你的回购的整个历史；您只能更改其当前状态。如果它的当前状态已经修复了错误，那就没有问题了。让过去成为过去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T00:48:56.663

> 将几个连续的 Mercurial 变更集折叠到具有单个描述的树视图中，同时保持完整的历史记录？

你怎么看？一个具有不止一个历史的变更集？！

**简短的回答**：不，你不能 - 或者你有单个折叠的变更集或者你有范围集

**更长的答案**：如果您的存储库尚未发布（因为您无法编辑已推送存储库的历史记录 - 共享存储库不受您的排他控制），则不是在一个地方，但至少可以在两个地方访问。

如果具有相关范围集的存储库满足上述要求，您可以尝试

*   拥有一个未修改历史的 repo 用于开发（以下简称 DEV）
*   拥有一个具有折叠历史的回购（DEV 的克隆）以共享给公众（以下简称 PUBLIC）

建议的工作流程：

*   将 DEV（现在存在）克隆到 PUBLIC
*   以任何首选方式折叠 PUBLIC 中的范围集（因此 - 重写它的历史）
*   发布公共
*   继续你的 DEV 工作
*   需要时，将更改转移到 PUBLIC（您将获得具有历史记录的匿名分支，在折叠的范围集中分歧）
*   使用 rebase 线性化 PUBLIC 上的历史记录
*   发布公共

在开发过程中重复 4 个最新的周期点

# matlab - 将量化系数保存到文件

> ID：14293795
> 
> 赞同：0
> 
> 时间：2013-01-12T13:32:38.183
> 
> 标签：matlab, compression, image-compression, dct

我正在尝试读取图像，对其进行 DCT 变换，对其进行量化，然后将量化后的系数保存到将被读入分形编码程序的文件中。

当我解码文件（使用量化系数）时，我得到的只是一些灰屏。这是由于文件的内容还是我错过了其他东西？

```
 %% LOSSY COMPRESSION-DECOMPRESSION USNIG DISCRETE COSINE TRANSFORM TECHNIQUE.
function[]=dct11(filename,n,m)
% "filename" is the string of characters including Image name and its
% extension.
% "n" denotes the number of bits per pixel.
% "m" denotes the number of most significant bits (MSB) of DCT Coefficients. 

% Matrix Intializations.
N=8;                        % Block size for which DCT is Computed.
M=8;
I=imread('Lenna.bmp');         % Reading the input image file and storing intensity values in 2-D matrix I.
I_dim=size(I);              % Finding the dimensions of the image file.
I_Trsfrm.block=zeros(N,M);  % Initialising the DCT Coefficients Structure Matrix "I_Trsfrm" with the required dimensions.

Norm_Mat=[16 11 10 16 24 40 51 61       % Normalization matrix (8 X 8) used to Normalize the DCT Matrix.
          12 12 14 19 26 58 60 55
          14 13 16 24 40 57 69 56
          14 17 22 29 51 87 80 62
          18 22 37 56 68 109 103 77
          24 35 55 64 81 104 113 92
          49 64 78 87 103 121 120 101
          72 92 95 98 112 100 103 99];

save('LenaInitial.dat','I');

%% PART-1: COMPRESSION TECHNIQUE.

% Computing the Quantized & Normalized Discrete Cosine Transform.
% Y(k,l)=(2/root(NM))*c(k)*c(l)*sigma(i=0:N-1)sigma(j=0:M-1)y(i,j)cos(pi(2i+1)k/(2N))cos(pi(2j+1)l/(2M))
% where c(u)=1/root(2) if u=0
%            = 1       if u>0

for a=1:I_dim(1)/N
    for b=1:I_dim(2)/M
        for k=1:N
            for l=1:M
                prod=0;
                for i=1:N
                    for j=1:M
                        prod=prod+double(I(N*(a-1)+i,M*(b-1)+j))*cos(pi*(k-1)*(2*i-1)/(2*N))*cos(pi*(l-1)*(2*j-1)/(2*M));
                    end
                end
                if k==1
                    prod=prod*sqrt(1/N);
                else
                    prod=prod*sqrt(2/N);
                end
                if l==1
                    prod=prod*sqrt(1/M);
                else
                    prod=prod*sqrt(2/M);
                end
                I_Trsfrm(a,b).block(k,l)=prod;
            end
        end
        % Normalizing the DCT Matrix and Quantizing the resulting values.
        I_Trsfrm(a,b).block=round(I_Trsfrm(a,b).block./Norm_Mat);
%         save ('LenaCompressed1.txt');
    end
end
%Andrew added this
% save ('LenaCompressed.txt');

% zig-zag coding of the each 8 X 8 Block.
for a=1:I_dim(1)/N
    for b=1:I_dim(2)/M
        I_zigzag(a,b).block=zeros(1,0);
        freq_sum=2:(N+M);
        counter=1;
        for i=1:length(freq_sum)
            if i<=((length(freq_sum)+1)/2)
                if rem(i,2)~=0
                    x_indices=counter:freq_sum(i)-counter;
                else
                    x_indices=freq_sum(i)-counter:-1:counter;
                end
                    index_len=length(x_indices);
                    y_indices=x_indices(index_len:-1:1); % Creating reverse of the array as "y_indices".
                    for p=1:index_len
                        if I_Trsfrm(a,b).block(x_indices(p),y_indices(p))<0
                            bin_eq=dec2bin(bitxor(2^n-1,abs(I_Trsfrm(a,b).block(x_indices(p),y_indices(p)))),n);
                        else
                            bin_eq=dec2bin(I_Trsfrm(a,b).block(x_indices(p),y_indices(p)),n);
                        end
                        I_zigzag(a,b).block=[I_zigzag(a,b).block,bin_eq(1:m)];
                    end
            else
                counter=counter+1;
                if rem(i,2)~=0
                    x_indices=counter:freq_sum(i)-counter;
                else
                    x_indices=freq_sum(i)-counter:-1:counter;
                end
                    index_len=length(x_indices);
                    y_indices=x_indices(index_len:-1:1); % Creating reverse of the array as "y_indices".
                    for p=1:index_len
                        if I_Trsfrm(a,b).block(x_indices(p),y_indices(p))<0
                            bin_eq=dec2bin(bitxor(2^n-1,abs(I_Trsfrm(a,b).block(x_indices(p),y_indices(p)))),n);
                        else
                            bin_eq=dec2bin(I_Trsfrm(a,b).block(x_indices(p),y_indices(p)),n);
                        end
                        I_zigzag(a,b).block=[I_zigzag(a,b).block,bin_eq(1:m)];
                    end
            end
        end
    end
end

% Clearing unused variables from Memory space
clear I_Trsfrm prod; 
clear x_indices y_indices counter;

% Run-Length Encoding the resulting code.
for a=1:I_dim(1)/N
    for b=1:I_dim(2)/M

        % Computing the Count values for the corresponding symbols and
        % savin them in "I_run" structure.
        count=0;
        run=zeros(1,0);
        sym=I_zigzag(a,b).block(1);
        j=1;
        block_len=length(I_zigzag(a,b).block);
        for i=1:block_len
            if I_zigzag(a,b).block(i)==sym
                count=count+1;
            else
                run.count(j)=count;
                run.sym(j)=sym;
                j=j+1;
                sym=I_zigzag(a,b).block(i);
                count=1;
            end
            if i==block_len
                run.count(j)=count;
                run.sym(j)=sym;
            end
        end 

        % Computing the codelength needed for the count values.
        dim=length(run.count);  % calculates number of symbols being encoded.
        maxvalue=max(run.count);  % finds the maximum count value in the count array of run structure.
        codelength=log2(maxvalue)+1;
        codelength=floor(codelength);

        % Encoding the count values along with their symbols.
        I_runcode(a,b).code=zeros(1,0);
        for i=1:dim
            I_runcode(a,b).code=[I_runcode(a,b).code,dec2bin(run.count(i),codelength),run.sym(i)];
        end
    end
end
% Saving the Compressed Code to Disk.
save ('LenaCompressed.txt','I_runcode');

% Clearing unused variables from Memory Space.
clear I_zigzag run; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T07:48:31.003

Andrew，您使用 MATLAB 的`save`语句将系数保存到以 . 结尾的文件中`.txt`。“分形编码程序”对文件格式有何假设？

您的文件将不是文本文件。查看`save`. 也许你可以使用`'-ascii'`旗帜。

否则，您可能必须自己编写该系数文件。为了让你开始，我会说`fprintf`值得一看。

# php - HMVC 的视图如何输出其数据？

> ID：14293798
> 
> 赞同：0
> 
> 时间：2013-01-12T13:32:46.780
> 
> 标签：php, model-view-controller, view, hmvc

我目前正在阅读很多有关 HMVC 的内容并尝试学习它。到目前为止还没有使用它，因为我想在尝试编写代码之前理解它（我想尝试制作一个 lil 迷你框架，只是为了在我使用一些大型已知框架之前理解所有内容，不喜欢使用我不理解的东西 100%）。

所以我的问题是模块的某些视图如何输出其数据。有很多图形，但它们只显示了小型 MVC 三元组和模块控制器之间的链接。

因此，如果我的页面顶部有一个 MVC（级别 #1）并且我有一些模块（级别 #2），则请求将转到级别 #1，并且那里的控制器将决定接下来会发生什么，但是输出呢？2 级视图会输出其数据吗？或者它会像 $outputModuleXy = file_get_contents($templateName) 一样保存它并将其返回给第 2 级控制器，后者会将其传递给第 1 级控制器，以便第 1 级视图负责输出？

我对此有点困惑，因为我似乎找不到一些描述数据流的教程以及来自模块的视图数据如何到达浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:31:00.267

**HMVC**是一个**分层模型-视图-控制器**，这意味着您的应用程序中有许多模块。每个模块本身就是 MVC。所以你对输出数据的困惑很简单。您命名的每个**（级别） 。**有它自己的视图 - 模型 - 控制器。所以它只是会在它的视图中输出。假设您的系统在**登录**部分具有很大的凭据。它由许多级别的登录类型组成。并且您想将登录部分分离到单独的 MVC 模块中，这将导致您将应用程序构建为**HMVC**。现在如果我进入你的应用程序。第一**反应模块**会跳起来照顾我。但后来我想进入我的会员区。我可以在其中添加用户或修改他们的权限。所以你的控制器将调用处理这个区域的模块，这是另一个 MVC 层。这里的输出是由这个模块的视图提供的。

**HMVC**中有许多深入的功能，您必须在教程中阅读。

您可以查看许多有关**HMVC的资源：**

1.  [tutsplus - 在](http://net.tutsplus.com/tutorials/php/hvmc-an-introduction-and-application/)**codeigniter**解释中谈论它。
2.  [inviqa - 在](http://techportal.inviqa.com/2010/02/22/scaling-web-applications-with-hmvc/)**kohana php**解释中谈论它
3.  [javaworld](http://www.javaworld.com/javaworld/jw-07-2000/jw-0721-hmvc.html?page=1) - 谈论论文本身。

# jquery - 使用 jquery 将数据带到新窗口

> ID：14293799
> 
> 赞同：0
> 
> 时间：2013-01-12T13:32:53.577
> 
> 标签：jquery

可以使用 jquery 将表单数据带到另一个 html 页面。

下面的代码会是一个开始吗？

```
function login(){

var data = $('#logon').serialize();
$.post('mainApp.html', data, function() { alert('done'); }

);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:35:34.030

您可以通过将数据发送到服务器、使用 cookie 或使用本地存储来将数据发送到新窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T13:37:36.790

您可以使用 jquery ajax 表单插件让表单完成所有工作，您只需指定所需的选项。

[JQuery Ajax 表单插件](http://malsup.com/jquery/form/)

# cloudbees - 在 cloudbees 上的 MongoHQ 集合中错误地显示文档总数

> ID：14293801
> 
> 赞同：1
> 
> 时间：2013-01-12T13:32:56.797
> 
> 标签：cloudbees, mongohq

在 Cloudbees MongoHQ 上，一个集合显示的文档总数不正确，而其他集合显示正确。当我进入该集合并设置限制时，它显示的数字与文档总数不同。

在主屏幕上，它显示了 201 个文档，并且数量越来越多，但在集合中，即使将限制设置为 201，它也只显示 101 个文档。

MongoHQ 显示不正确的文档总数有什么原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T07:00:36.733

Mongo 的默认批量大小为 101。当您通过 MongoHQ 查询数据库时，会显示前 101 个结果，其余的则隐藏。不幸的是，它们不允许您运行 getNext() 命令。

更多信息（特定于 PHP Mongo 驱动程序）：[http ://derickrethans.nl/cursors-in-mongodb.html](http://derickrethans.nl/cursors-in-mongodb.html)

# perl - 使用 Test::More 和 Test::Deep 打印失败的子测试

> ID：14293809
> 
> 赞同：4
> 
> 时间：2013-01-12T13:34:44.440
> 
> 标签：perl, testing

[`Test::More`](https://metacpan.org/module/Test%3a%3aMore)我用and写了一个大测试[`Test::Deep`](https://metacpan.org/module/Test%3a%3aDeep)。该测试包含子测试。当我运行代码时，在最后一行我得到：

```
# Looks like you failed 3 tests of 25. 
```

如何打印指定失败子测试的摘要？（每个子测试都有一个标题。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T00:34:55.197

简短的回答：你不能。

稍微长一点的答案：你必须修补[Test::Builder](http://search.cpan.org/~mschwern/Test-Simple-0.98/lib/Test/Builder.pm)或[TAP::Harness](http://search.cpan.org/~ovid/Test-Harness-3.25/lib/TAP/Harness.pm)。

Hacky answer：在 subtest 函数周围放置一个包装器，该函数捕获名称和结果（subtest() 与所有测试函数一样，通过时返回 true，失败时返回 false）并在 END 块中输出额外的摘要信息。实施留给读者。

tl;博士信息...

[Test::Builder](http://search.cpan.org/~mschwern/Test-Simple-0.98/lib/Test/Builder.pm)（以及整个测试生态系统）不会在摘要中报告子测试。我不相信 Test::Builder 的发布版本（0.9x）根本不会存储子测试的结果。在 Test::Builder 0.9x 中，子测试是一种可怕的 hack。Test::Builder 1.5 更优雅地处理子测试，所以如果你想打补丁，我会针对 1.5 做。

[TAP::Harness](http://search.cpan.org/~ovid/Test-Harness-3.25/lib/TAP/Harness.pm)（并因此证明）不理解子测试，就它而言，它的垃圾被忽略了。为了解决这个问题，每个子测试最后都会产生一个额外的测试，这是 Test::Harness 所理解的。

```
# TAP::Harness sees this line, the overall plan.
1..1
    # All this indented subtest info is ignored by TAP::Harness.
    ok 1
    ok 2
    not ok 3
    1..3
    # Looks like you failed 1 test of 3.
# TAP::Harness sees this line, and that all it knows about the subtest
# It doesn't even know its a subtest.
not ok 1 - foo 
```

[TAP::Harness](http://search.cpan.org/~ovid/Test-Harness-3.25/lib/TAP/Harness.pm)需要修补才能理解子测试，这将是非常受欢迎的。

subtest 的包装器，使用[Test::More 自己的 subtest 函数](https://github.com/schwern/test-more/blob/v0.98/lib/Test/More.pm#L743)作为指导，看起来像这样：

```
use Test::Builder;

my @Failed_Subtests;
sub my_subtest {
    my $name = shift;

    # Call subtest
    my $tb = Test::Builder->new;
    my $subtest_ok = $tb->subtest($name, @_);

    # Record the name of any failing subtests
    push @Failed_Subtests, $name if !$subtest_ok;

    return $subtest_ok;
}

# When the test is over, show the failed subtests
END {
    if( @Failed_Subtests ) {
        diag sprintf "These subtests failed: %s", join(", ", @Failed_Subtests);
    }
} 
```

如果你使用`my_subtest`而不是`subtest`你会得到类似的东西：

```
# These subtests failed: bar, baz
# Looks like you failed 2 tests of 3. 
```

您可以替换 Test::More 的，而不是定义新的子测试函数。函数的主体看起来是一样的，但是替换 Perl 函数的技术是另一个问题的主题。

# android - 无法构建：当我在 sdk 中有此文件时，未从 SDK 文件夹中加载文件 dx.jar

> ID：14293812
> 
> 赞同：1
> 
> 时间：2013-01-12T13:35:03.100
> 
> 标签：android, sdk, adt

我在 sdk 的平台工具文件夹中有 dx.jar，但在运行期间仍然出现问题 无法构建：文件 dx.jar 未从 SDK 文件夹加载！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-28T13:38:12.867

在 Eclipse 工具（我的应用程序是 Android API 19）中，我正在使用：

- Android SDK Build Tools Rev 25.x（适用于我）。

在 Android Studio (JebBrains) 中太难落入这个问题了。

# php - 密码加密，在会话中存储密码

> ID：14293815
> 
> 赞同：19
> 
> 时间：2013-01-12T13:35:31.783
> 
> 标签：php, security, email, session, passwords

我需要存储密码并再次使用它。我认为这根本不安全。

**设想：**

我想创建一个网络邮件程序，用户使用用户名和密码登录，然后检查他们的电子邮件。此工具不打算在 db 上存储密码。但是在 PHP 中，我们需要在用户导航到的每个页面中连接到邮件服务器。所以需要用户名和密码才能连接到邮件服务器。如何以最安全的方式做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-12T14:05:57.197

由于不打算*存储密码*，而且必须多次重新输入密码也是不可取的，我看到的唯一解决方案是：

*   使用足够长的随机密钥加密密码（例如使用 AES）
*   在会话中存储加密的密码和用户名
*   以防万一，加密用户名和邮件服务器也可能没有错误。它不会受到伤害，并且假定的攻击者在服务器上没有已知的用户名。
*   将加密密钥存储在 cookie 中

这并不完美，但它应该工作得相当好，而且它可能是你能得到的最好的权衡。

对于每个请求，用户的浏览器都会发送 cookie，PHP 脚本可以使用 cookie 来解密存储在会话中的数据并在 IMAP/POP 服务器上发出请求。

有人利用您的服务器并获得对会话存储的访问权限将能够窃取加密密码，但如果您的随机密钥足够长且随机质量良好，那么这是徒劳的。

关键是，你只能*用你不知道的秘密来*真正保护一些东西。如果您有必要的信息来解密服务器上的某些信息（在这种情况下为 IMAP 密码），例如在会话存储中，那么利用您服务器的每个人都可以这样做。无论您的加密有多强大，它都没有任何区别。
确保秘密保持秘密的唯一方法是用*你不知道*的东西加密它们，只有用户（或者在这种情况下是用户的浏览器）知道的东西。

这导致了一个无法解决的问题，在某个时间点，你显然*必须知道*，至少在几分之一秒内。这是从 Web 服务器接收 cookie 到 PHP 脚本退出之间的时间。理论上，如果有root权限的人在那段时间读取进程内存，他也会知道这个秘密。但是，唉，这是你真的无法阻止的事情。
不过，只要信息从未存储在任何地方（甚至在会话中），它就应该是相当安全的。

当然，所有这些都假设*至少*您网站上的登录页面（最好是全部）是通过 提供`https://`的，并且您使用 TLS/SSL 与邮件服务器进行通信。否则，您将面临更多微不足道的攻击。

# c# - 用于分析和 map/reduce 的数据库

> ID：14293818
> 
> 赞同：1
> 
> 时间：2013-01-12T13:36:04.600
> 
> 标签：c#, mapreduce, analytics, document-based-database

我的应用程序中有多个线程根据它正在执行的工作生成日志文件。它们通常在多天内运行多次迭代，并生成接近 15 - 20 GB 的数据。我从每个日志迭代中提取特定字段并将它们与日志一起存储。

我需要对这些字段进行数据分析，将来可能会从原始日志中提取更多数据。我发现自己正在编写更多代码来管理这些文件，进行求和、平均、最小值、最大值等分析，并据此生成报告。还要编写代码以确保从线程生成的数据正确存储在文件中。是否可以通过使用适当的数据库来抽象出其中一些问题？

是否有满足以下要求的数据库

*   基于文档

*   允许我进行数据分析，如求和、最小值、最大值、平均值、基于特定字段的合并等。

*   允许从日志文件中提取新数据。
*   我没有任何高性能写入或读取，因为您可以看到生成 20 GB 的数据需要几天时间。
*   我可能正在并行运行多个这样的应用程序，它们将访问同一个数据库。
*   我也想做加盟。
*   我正在研究 C#/.NET

我遇到了 RethinkDB，它看起来像我想要的解决方案，但事实证明它还没有准备好生产并且仅在 Linux 上受支持。

谢谢...

# matlab - 如何使用变换图像检查线是否平行？

> ID：14293819
> 
> 赞同：0
> 
> 时间：2013-01-12T13:36:05.633
> 
> 标签：matlab, image-processing

我有一个理论上的问题：如果我有一个线条似乎平行的图像，我需要使用该图像的变换图像检查它们是否如此，我该怎么做？我如何从变换图像中判断它们是否平行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T14:48:41.133

使用霍夫变换。

在霍夫结果“图像”中，每条直线都是一个点。在一个轴上，您有图像中每条线的角度，在另一个轴上，每条线都与其中一个轴相交。

要检查您的线是否平行，请检测两个点并查看它们是否具有相同的角度值。

问候

# javascript - 基于下拉的文本框的条件验证

> ID：14293823
> 
> 赞同：0
> 
> 时间：2013-01-12T13:36:38.630
> 
> 标签：javascript, jquery

我正在研究 asp.net mvc 网站，我有 4 个`dropdowns`和 4 个`textboxes`这样的：

```
dialprefix1   callfromnumber1
dialprefix2   callfromnumber2
dialprefix3   callfromnumber3
dialprefix4   callfromnumber4 
```

我想对每一行进行分组，以便如果值 in`dialprefix1`则长度为 10。意味着我要执行基于的验证并且有多行。`44``callfromnumber1``textbox``dropdown`

我用它来允许文本框中的数字

```
$(".phone").keydown(function (event) {
    // Allow: backspace, delete, tab, escape, and enter
    if (event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 ||
            // Allow: Ctrl+A
            (event.keyCode == 65 && event.ctrlKey === true) ||
            // Allow: home, end, left, right
            (event.keyCode >= 35 && event.keyCode <= 39)) {
            // let it happen, don't do anything
        return;
    } else {
        // Ensure that it is a number and stop the keypress
        if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105)) {
        event.preventDefault();
        }
    }
}); 
```

我正在验证这样的长度：

```
$("#DefaultCallFrom1").keypress(function () {
    if ($("#Dialprefix1").val() == "44") {
        if (this.value.substring(0, 1) == "0" && this.value.length == "10") {
            displayAlertMessage("You can not enter more characters");
            this.value.length <= 10
        }
        else {
            displayAlertMessage("You can not enter more characters");
            this.value.length <= 9
        }
    }
})

$("#DefaultCallFrom2").keypress(function () {
    if ($("#Dialprefix2").val() == "44") {
        if (this.value.substring(0, 1) == "0")
            return this.value.length <= 10
        else
            return this.value.length <= 9
    }
}) 
```

1）我想根据类组合这些所有文本框都有类=电话，所有下拉菜单都有类拨号前缀。

2）。如果相关的下拉选择值为 44，我想确保该数字以 0、1、2、7、8 开头

标记如下所示：

```
<td style="padding-left: 1px">

<input type="text" value="1" readonly="readonly" name="srNo" id="srNo" disabled="disabled" class="tiny" style="text-align:right">
<select name="Dialprefix1" id="Dialprefix1" class="dialprefix">
    <option value="44">+44</option>
    <option value="001">+001</option>
    <option value="11" selected="selected">+11</option>
    <option value="12">+12</option>
    <option value="13">+13</option>
</select>

<span class="watermark_container" style="display: inline-block; position: relative;">
<span class="watermark" style="position: absolute; display: block; font-family: MS Shell Dlg; font-size: 13.3333px; color: rgb(153, 153, 153); left: 4px; top: 0px; height: 20px; line-height: 20px; text-align: left; pointer-events: none; opacity: 0.6;">
    Click here to add your phone number.
</span>
<input type="text" value="" title="Click here to add your phone number." name="DefaultCallFrom1" id="DefaultCallFrom1" class="textarea normal jq_watermark phone" autocomplete="off" data-jq-watermark="processed">
</span>
<br>

<input type="text" value="2" readonly="readonly" name="srNo" id="srNo" disabled="disabled" class="tiny" style="text-align:right">
<select name="Dialprefix2" id="Dialprefix2" class="dialprefix">
    <option value="44">+44</option>
    <option value="001">+001</option>
    <option value="11" selected="selected">+11</option>
    <option value="12">+12</option>
    <option value="13">+13</option>
</select>

<span class="watermark_container" style="display: inline-block; position: relative;">
<span class="watermark" style="position: absolute; display: block; font-family: MS Shell Dlg; font-size: 13.3333px; color: rgb(153, 153, 153); left: 4px; top: 0px; height: 20px; line-height: 20px; text-align: left; pointer-events: none;">
    Click here to add your phone number.
</span>
<input type="text" value="" title="Click here to add your phone number." name="DefaultCallFrom2" id="DefaultCallFrom2" class="textarea normal jq_watermark phone" autocomplete="off" data-jq-watermark="processed">
</span>
<br> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:28:24.567

给每个输入一个公共类（它们没有显示在标记中）。有几种方法可以匹配`input`到它的对应项`select`，例如使用`prev()`或者`next()`如果它们在 html 树中并排，没有其他元素，比如`<br>`将它们分开。

学习遍历 html 树的各种方法将有助于简化 jQuery 代码并创建使遍历更容易的标记。请注意，以下内容不需要任何 ID。

`index()`由于标记未知，我将使用它们来匹配它们。我使用`DefaultCallFrom`as className 为`input`.

```
var $inputs= $(".DefaultCallFrom"), $selects=$('.dialprefix');

$inputs.keypress(function () {
     /* get index of active input and use to match select*/
     var idx= $inputs.index( this ), $sel=$selects.eq( idx );
    if ($sel.val() == "44") {
        if (this.value.substring(0, 1) == "0" && this.value.length == "10") {
            displayAlertMessage("You can not enter more characters");
            this.value.length <= 10
        }
        else {
            displayAlertMessage("You can not enter more characters");
            this.value.length <= 9
        }
    }
}) 
```

API 参考

[http://api.jquery.com/index/](http://api.jquery.com/index/)

[http://api.jquery.com/prev/](http://api.jquery.com/prev/)

[http://api.jquery.com/next/](http://api.jquery.com/next/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:29:57.920

这是您的代码的工作版本。试试这个而不是`$("#DefaultCallFrom1").keypress(function ()`：

```
$(".phone").keypress(function(evt) {
    // Find the index
    index = ($(this).attr('id')).split("DefaultCallFrom")[1];

    // Check Dialprefix
    if ($("#Dialprefix" + index).val() == "44") {
        // 0 prefix
        if (this.value[0] == 0) {
            if(this.value.length == 10) {
                alert("You can not enter more characters...");
                evt.preventDefault();
            } 
        } else {
            if(this.value.length == 9) {
                alert("You can not enter more characters...");
                evt.preventDefault();
            }
        }
    }
}); 
```

# facebook - 我想在喜欢我的 Facebook 页面后注册用户？

> ID：14293827
> 
> 赞同：-5
> 
> 时间：2013-01-12T13:37:04.663
> 
> 标签：facebook, registration

我正在开发一个 Web 应用程序。我只想在喜欢我的 facebook 页面后注册用户（是的，这是客户要求！！！）所以有什么办法可以做到这一点？？？我正在使用 PHP 非常感谢.....

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-12T13:54:34.213

好的，这就是我会做的事情..你的问题有点不清楚，但我假设你想在你的数据库中保存人。你没有告诉我们你使用的是什么语言。

所以我给你一个开始。

1.  订阅点赞事件
2.  如果是 asp.net 则运行 webmethod 或调用方法
3.  将用户保存在数据库中

首先订阅应该订阅这个事件。这是在 java 脚本文件中。

FB.Event.subscribe('edge.create', function(response) { //运行 webmethod if asp.net } );

如果您使用 asp.net，则在您的代码隐藏中

您打开包含所有用户详细信息的对象并将它们放入数据库中。

# github - Github 下载文件夹为 zip

> ID：14293829
> 
> 赞同：7
> 
> 时间：2013-01-12T13:37:14.287
> 
> 标签：github, download, repository, zip

如何为我的 Github 存储库的访问者提供一个链接，以将我的存储库的 builds 文件夹下载为 zip 文件？该文件夹包含应用程序所需的可执行文件、着色器和纹理。

当然，我可以手动构建该目录的 zip 文件并将其添加到存储库中。但这会导致*每次提交*的文件冗余、大小更大和不必要的工作。

那么有没有办法在 Github 上压缩和下载特定文件夹及其 git 存储库的内容？也许 Github 已经有这个能力了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T13:43:16.263

2013 年 7 月更新：

[正如我在“在 github 上发布构建工件](https://stackoverflow.com/a/5207352/6309)”中提到的，您可以定义发布并**上传**附加到该发布的二进制文件！

![GitHub 发布](../Images/f1da5a105d8f216b1b82f7b0706dce2a.png)

* * *

原始答案（2013 年 1 月）

不，你不能单独使用 GitHub 来做到这一点。

而且 GitHub 最近取消了它的[上传功能](https://github.com/blog/1302-goodbye-uploads)，它允许你上传一个二进制文件供你的用户获取（而不会使你的 git repo 变大）。

因此，您需要将所述二进制文件存储在另一个外部（二进制）存储库（[Nexus](http://www.sonatype.org/nexus/)或[Amazon s3 服务](http://aws.amazon.com/s3/)，或...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T15:35:28.747

如果您依赖公共的持续集成服务器，您还可以将构建的结果作为可下载的工件进行推广。

例如，JetBrains TeamCity 提供了这样的功能，Codebetter.com 慷慨地**[为 .Net/Mono](http://codebetter.com/codebetter-ci/)**开源项目提供了免费的 TeamCity 服务器。

![伊姆古尔](../Images/792c969448b16a38cbc9c1566249baa1.png)

# php - 是否可以在不使用 GPS 的情况下跟踪手机位置并将其显示在谷歌地图上？

> ID：14293831
> 
> 赞同：0
> 
> 时间：2013-01-12T13:37:21.013
> 
> 标签：php, android, google-maps, web

我正在为我的 android 防盗应用程序开发一个网站，并添加了谷歌地图来搜索坐标和路线。这是我的问题，我想在不使用 GPS 的情况下搜索手机以获取坐标，并将其显示在谷歌地图上以在我的网站内与我的手机进行交互。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:55:40.490

使用它来检查 GPS 是否打开：

```
LocationManager service = (LocationManager) getSystemService(LOCATION_SERVICE);
boolean enabled = service.isProviderEnabled(LocationManager.GPS_PROVIDER); 
```

如果它关闭，请使用基于网络的定位服务。它使用小区信息（在某些手机上使用 wifi 从一个巨大的数据库中获取更精确的信息，其中 cellids 和 wifi ssids 和坐标相关联）

也许在有根手机上，您可以自动打开 gps。

# java - android中添加/编辑/删除联系人的事件

> ID：14293838
> 
> 赞同：1
> 
> 时间：2013-01-12T13:37:41.993
> 
> 标签：java, android

联系人列表中是否有添加/编辑/删除的事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:45:21.260

欢迎您注册一个`ContentObserver`适当`Uri`的从`ContactsContract` `ContentProvider`以了解对它的更改`Uri`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T07:40:25.000

```
//initially all your contact is stored in database then use this service and regiter this service in manifest 
public class ContactSync_Service extends IntentService {

public ContactSync_Service() {
    super("intent service");

}

@Override
protected void onHandleIntent(Intent intent) {

    MyContentObserver contentObserver = new MyContentObserver();
    this.getApplicationContext()
            .getContentResolver()
            .registerContentObserver(ContactsContract.Contacts.CONTENT_URI,
                    true, contentObserver);
}

@Override
public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();

}

class MyContentObserver extends ContentObserver {

    public MyContentObserver() {
        super(null);
    }

//whenever a contact is add,modified,delete this method will get called
    @Override
    public void onChange(boolean selfChange) {
        Log.e("changes", "changes");

        syncDatabase();
        super.onChange(selfChange);
    }

}

//comparing database contact list with phone's contact list if there is contact is added or modified
@TargetApi(18)
@SuppressWarnings("unused")
public void syncDatabase() {

    ContactDatabase db = new ContactDatabase(this);
//get all the data from database include contact and name
//contact bean is a class containing setter and getter of getName() and getContact()
    ArrayList<ContactBean> arrayListDataase = db.fetch();
    int size = arrayListDataase.size();
    Log.e("size of arraylist", size + "");
    /*
     * ArrayList<String> arrayListContact=new ArrayList<String>();
     * 
     * 
     * for(int i=0;i<arrayListDataase.size();i++) {
     * arrayListContact.add(arrayListDataase.get(i).getContact()); }
     */

    Cursor phones = getContentResolver().query(
            ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null,
            null, null);
    int i = 0;

    if (phones.moveToFirst()) {

        do {

            boolean flag = false;

            String phoneNumber = phones
                    .getString(phones
                            .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

            // Log.e("number", phoneNumber);

            for (i = 0; i < size; i++)
            {

                //comparing  database contact number with phone's contact list contact number 
                if (arrayListDataase.get(i).getContact().equalsIgnoreCase(phoneNumber)) 
                {   

                    flag = true;

                    String nameFromContactList = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                    String nameFromDatabase=arrayListDataase.get(i).getName();

                    //check if name is changed in contact list
                    if(!nameFromContactList.equalsIgnoreCase(nameFromDatabase))
                    {
                        db.upDateNameWhenChangeInContactListOfPhone(nameFromContactList, phoneNumber);

                    }

                    break;      

                }

            }

            if (!flag) {

                String image_uri="";
                Log.e("contact changed", phoneNumber);
                String name = phones
                        .getString(phones
                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                String email = phones
                        .getString(phones
                                .getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
                String time_stamp = phones
                        .getString(phones
                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.CONTACT_LAST_UPDATED_TIMESTAMP));

                image_uri = phones
                          .getString(phones
                            .getColumnIndex(ContactsContract.CommonDataKinds.Phone.PHOTO_URI));

                if((image_uri==null) || image_uri.matches("")  )
                {
                    image_uri="";
                }

                db.insert(name, phoneNumber, email, image_uri);
                //break;

            }

        } while (phones.moveToNext());

        phones.close();

    }

}} 
```

# cassandra - 构建 Cassandra debian 软件包时出错

> ID：14293840
> 
> 赞同：1
> 
> 时间：2013-01-12T13:37:47.083
> 
> 标签：cassandra, debian

我一直在这里执行步骤-> [http://wiki.apache.org/cassandra/DebianPackaging](http://wiki.apache.org/cassandra/DebianPackaging)

完成了一切，但似乎我无法构建软件包。执行 dpkg-buildpackage -uc -us 后

我得到的是：

```
dpkg-buildpackage: export CFLAGS from dpkg-buildflags (origin: vendor): -g -O2
dpkg-buildpackage: export CPPFLAGS from dpkg-buildflags (origin: vendor): 
dpkg-buildpackage: export CXXFLAGS from dpkg-buildflags (origin: vendor): -g -O2
dpkg-buildpackage: export FFLAGS from dpkg-buildflags (origin: vendor): -g -O2
dpkg-buildpackage: export LDFLAGS from dpkg-buildflags (origin: vendor): 
tail: cannot open `debian/changelog' for reading: No such file or directory
dpkg-buildpackage: error: tail of debian/changelog gave error exit status 1 
```

有什么问题？我想我得到了正确的java版本：

```
java version "1.6.0_26"
Java(TM) SE Runtime Environment (build 1.6.0_26-b03)
Java HotSpot(TM) Server VM (build 20.1-b02, mixed mode) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:51:05.343

听起来您可能是`dpkg-buildpackage`从`debian/`目录内部运行的。您应该从顶级目录运行它。

如果不是这种情况，请确保该`debian/`目录完全存在。我相信您需要进行源代码检查；可下载的软件包不包括它。最简单的方法是`git clone git://github.com/apache/cassandra.git`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T12:19:26.447

当 debian 目录是符号链接时也会发生这种情况。

# hadoop - 实施高级作业控制框架来帮助链接多个 Map-Reduce 作业意味着什么？

> ID：14293841
> 
> 赞同：7
> 
> 时间：2013-01-12T13:37:48.443
> 
> 标签：hadoop, mapreduce, oozie

我对 Hadoop 很陌生，目前我被分配了一个项目

**“实施一个高级作业控制框架来帮助链接多个 Map-Reduce 作业，即调查/改进现有的 org.apache.hadoop.mapred.jobcontrol 包。”**

该项目列在[http://wiki.apache.org/hadoop/ProjectSuggestions#research_projects上 Random Ideas 下的项目建议页面上](http://wiki.apache.org/hadoop/ProjectSuggestions#research_projects)

我的困惑是，我是否必须构建 Oozie 的高级版本（我认为这是一个链接多个作业的作业控制框架）或类似的东西，或者这是否意味着完全不同的东西。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T18:39:30.440

看起来您所指的项目可能与[此 Jira 票证](https://issues.apache.org/jira/browse/MAPREDUCE-215)有关。

现在[JobControl 类](https://github.com/apache/hadoop/blob/trunk/src/mapred/org/apache/hadoop/mapreduce/lib/jobcontrol/JobControl.java)非常简单，它缺少一些可以让用户的生活更轻松的功能。例如：

*   能够在工作状态改变时获得通知：现在你只需打电话`JobControl.run`就可以了，但实际上，如果我能在我的工作发生变化时得到通知，这可能会很有趣。
*   重新提交失败的作业：您可以实现一个工具来在/如果它失败时重新提交作业，例如，您可以在`ControlledJob`类中设置最大重试次数参数，并在发送失败通知之前重试到该点。
*   许多作业定期运行，每周、每天、每小时……这通常通过 crontab 完成，因此将此功能嵌入 Hadoop 可能会很有趣，例如，用户可以通过以下方式设置重复作业指定一个周期，JobControl 会以这些固定的时间间隔运行它。
*   也许有一个 UI 来可视化您的工作流程和每个工作的依赖关系，哪些步骤已经完成而哪些还没有完成。
*   不仅能够启动 Map/Reduce 作业，而且还能够启动 Hive、Pig，这可能会很有趣，因此您可以为用户提供通用接口来提交任何类型的作业并无缝监控它们。

最后，我认为您不需要重新发明一个全新的框架，`JobControl`该类已经提供了一个很好的起点。尝试从用户的角度思考，您可以做些什么来使提交和管理作业变得更容易和更短。此处和门票中的想法只是示例，您可以自由提出自己的想法。

就**Oozie**而言，它为控制工作流提供了更高的抽象，但设置起来也更复杂，应该保留给更复杂的工作。我知道有些人对使用 Oozie 犹豫不决，因为它增加了应用程序的开销。最大的区别还在于**Oozie**是一个服务器，而`JobControl`只是在客户端机器上运行，这是额外的开销。虽然上面提到的一些功能在**Oozie**中以一种或另一种方式存在，但在我看来，保持它简单并在客户端计算机上运行而无需像**Oozie那样的额外工作的能力是您项目的关键。**

# ms-access - 针对 Access 2007 (.accdb) 数据库的现有 VB6 DAO 代码？

> ID：14293843
> 
> 赞同：2
> 
> 时间：2013-01-12T13:37:56.333
> 
> 标签：ms-access, vb6, ms-access-2007, dao

`VB6` `DAO`以前用于`Access 95/97` `.mdb`文件的现有代码是否适用于`Access 2007`( `.accdb`) 数据库文件？

是否需要执行以下所有操作才能进行无缝迁移？

```
(1) Convert databases to 2007 format 
(2) Run AccessDatabaseEngine.exe on the target machine 
(3) In VB6 Project|References,
    (a) Deselect Microsoft DAO 3.6 object library
    (b) Select Microsoft Office 12 access database engine object library
    (c) Select Microsoft Office 12 object library 
(4) no special code changes needed when setting db objects 
```

来源：[http ://www.pcreview.co.uk/forums/opening-access-2007-vb6-accessdatabaseengine-exe-acedao-dll-t3534633.html](http://www.pcreview.co.uk/forums/opening-access-2007-vb6-accessdatabaseengine-exe-acedao-dll-t3534633.html)

# php - 当新行添加到数据库时，Twitter 喜欢更新

> ID：14293846
> 
> 赞同：1
> 
> 时间：2013-01-12T13:38:02.620
> 
> 标签：php, javascript, mysql, ajax, websocket

我有一个页面，内容是使用 php 和 Mysql 动态获取的。我使用 foreach 循环来显示所有内容。

```
foreach($data as $key){
            echo "<div id="post_content"> $key['post'] </div>";
      } 
```

现在我得到了我的提要，但这里的问题是，在你从数据库中看到新的帖子行之前，需要刷新页面。这就是推特出现的地方，当你在推特上并且有来自你关注的人的新帖子时，它会在提要的顶部显示“1条新推文”，当你点击它时，它会将推文的内容添加到饲料。根据我的研究，我找到了几种方法来做到这一点；

1.  网络套接字。缺点：跨浏览器兼容性。

2.  使用 AJAX：`refresh = setInterval(function(), 5000);`缺点：嗯，每 5 秒加载一次脚本：/

3.  有人向我推荐了 socket.io，我仍在研究如何将它与 php 集成。

我的问题是，有没有其他有效的（最好是简单有效的）方法来做到这一点？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:25:59.760

问题是任何与套接字相关的东西都对在特定时间点打开的连接数量有限制。因此，如果您不打算为数以万计的并发双工连接提供服务，那么最好将 AJAX 和 JSON 与 PHP 结合使用。我建议您实施轮询间隔。例如，当用户在一定时间后不活动时，增加间隔或假设 5-10 次轮询没有出现任何新内容，增加间隔，也许每次都加倍，直到达到 2 分钟。在获取消息或值时，将间隔减少到 5 秒或更短。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T13:48:52.947

最简单的方法是提供某种 API，这样您就可以访问某种`JSON`格式的新“推文”，然后将它们添加到您的 HTML 中。
socket.io 也是一个不错的选择，因为它结合了多种技术，如 websockets、长轮询等，并且在使用旧浏览器时会很好地降级。您可以在 socket.io 上在线找到许多教程。但是 socket.io 依赖于 node.js 服务器端 JS，所以如果你不熟悉它，这可能有点复杂。不过看看这个链接：[Using PHP with Socket.io](https://stackoverflow.com/questions/6398887/using-php-with-socket-io)

# php - OnClick 函数不适用于 href="index.php?p="

> ID：14293850
> 
> 赞同：1
> 
> 时间：2013-01-12T13:38:11.347
> 
> 标签：php, jquery, onclick

我用 Jquery 制作了一个函数，当我单击它时会更改链接颜色...当我将链接链接到 #(hash) 时，代码工作得很好，但我将它与 php 混合它不会工作？

这是我的 PHP，它工作得很好：

```
<?php
    $pages_dir = 'pages';
    if (!empty($_GET['p'])) {
        $pages = scandir($pages_dir, 0);
        unset($pages[0], $pages[1]);
        $p = $_GET['p'];
        if (in_array($p.'.inc.php', $pages)) {
            include($pages_dir.'/'.$p.'.inc.php');
        } else {
            echo '******.';
        }
    } else {
        include($pages_dir.'/hjem.inc.php');
    }
?> 
```

我的 HTML 中的链接也可以正常工作：

```
href="index.php?p=*********" 
```

但现在我想应用一种效果，使我的链接的背景颜色与 i OnClick 效果不同：

```
$(document).ready(function(){
        var $targetElement = $("*** This is to my links ***");
        $targetElement.click(function() {
            $targetElement.removeClass("changeColor")
            $(this).addClass("changeColor");
    });
}); 
```

还有一些CSS：

```
#****** ul li a:link.changeColor{
    background-color:black;
} 
```

Jquery 仅在我将链接指向 # 时才有效，并且我当然希望它可以与我的 php 代码一起工作:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:06:00.847

如果您转到一个新页面，jquery 不会触发，因为从技术上讲它会触发，但您会被重定向到另一个页面，因此您不会看到结果。如果您想要更改您被重定向到的页面上的链接值，那么您需要使用 javascript 来获取传递的 GET 变量并在那里创建逻辑。或者您可以使用 PHP 获取 GET 变量并回显出您想要的正确类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T14:56:00.043

不[`a:visited`](https://developer.mozilla.org/en-US/docs/CSS/%3avisited)符合您的需求？

另外，请注意，要使其正常工作，您必须在链接之前设置不透明的背景颜色（[参考](https://developer.mozilla.org/en-US/docs/CSS/Privacy_and_the_%3avisited_selector#Limits_to_visited_link_styles)）

# php - 将 PDO::ATTR_EMULATE_PREPARES 更改为 FALSE 并出现“无效参数号”错误

> ID：14293857
> 
> 赞同：7
> 
> 时间：2013-01-12T13:38:42.927
> 
> 标签：php, mysql, pdo, prepared-statement

我有以下代码例如：

```
$dbStatement=$this->dbObject->prepare("SELECT AVG(quality) as quality,
                                              AVG(adequacy) as adequacy,
                                              AVG(friendliness) as friendliness,
                                              SUM(overall) as overall,
                                              SUM(completed) as completed,
                                              type
                                       FROM   (SELECT AVG(quality) as quality,
                                                      AVG(adequacy) as adequacy,
                                                      AVG(friendliness) as friendliness,
                                                      COUNT(id) as overall,
                                                      SUM(is_completed) as completed,
                                                      category_id, type
                                               FROM valuation a
                                               WHERE status       =1
                                                 AND type         =:01
                                                 AND ((type='employer' AND owner_id=:02)
                                                      OR (type='employee' AND winner_id=:02))
                                               GROUP BY category_id
                                               HAVING COUNT(id)<=:03) b
                                       GROUP BY type");
$dbStatement->bindParam(':01',$Type);
$dbStatement->bindParam(':02',$UserID);
$dbStatement->bindParam(':03',$Most);
$dbStatement->execute(); 
```

此代码从`execute()`我设置`PDO::ATTR_EMULATE_PREPARES`为`FALSE`. 异常对象中包含以下消息：

> SQLSTATE[HY093]：参数号无效

虽然阅读了相应的手册，但目前无法意识到问题所在。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T14:44:02.533

该错误是由于**重复占位符**造成的。每个占位符必须是唯一的，即使您将相同的参数绑定到它。

```
AND ((type='employer' AND owner_id=:02)
OR (type='employee' AND winner_id=:02)) 
```

应该：

```
AND ((type='employer' AND owner_id=:02)
OR (type='employee' AND winner_id=:another02)) 
```

然后绑定到它：

```
$dbStatement->bindParam(':01',$Type);
$dbStatement->bindParam(':02',$UserID);
$dbStatement->bindParam(':another02',$UserID);
$dbStatement->bindParam(':03',$Most); 
```

# asp.net - 如何在 ASP.Net 应用程序中设置默认时区

> ID：14293858
> 
> 赞同：10
> 
> 时间：2013-01-12T13:38:51.860
> 
> 标签：asp.net, web-config

嗨，我创建了 asp.net Web 应用程序而没有考虑时区。我直接使用 DateTime.Now 函数。实际上，它以服务器配置的时区格式返回日期时间。现在我无法更改整个应用程序。那么有没有办法设置应用程序的时区独立于它所在的服务器？或者有什么方法可以在网络配置文件中设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T13:48:16.550

`TimeZone.CurrentTimeZone`用于执行代码的计算机上的时区。检查这些链接：http: [//msdn.microsoft.com/en-us/library/system.timezone.currenttimezone.aspx](http://msdn.microsoft.com/en-us/library/system.timezone.currenttimezone.aspx)

[http://msdn.microsoft.com/en-us/library/system.timezoneinfo.local.aspx](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.local.aspx)

# php - SSL 连接 (HTTPS) 的准备工作

> ID：14293859
> 
> 赞同：-1
> 
> 时间：2013-01-12T13:39:43.413
> 
> 标签：php, apache, security, http, ssl

我正在为我的网站建立 SSL 连接，这意味着我可以使用 HTTPS 访问它。这是我第一次做这样的事情，我想知道我需要在我的脚本上做的基本事情，以使其在新连接中正常工作。

我的网站使用 cookie 和会话。我还需要知道我应该如何强制用户使用 HTTPS 而不是 HTTP（即：如果用户使用 HTTP，则重定向到 HTTPS）。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:08:00.507

您可以在 php 中执行此操作，但实际上您将接受 http 连接，然后运行脚本并继续以编程方式发送重定向 HTTP 标头。

通常，您所做的是配置您使用的任何内容，为您的 php 应用程序（apache、nginx、...）提供服务以进行重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:57:08.857

您需要注意以下几点：

1.  为 HTTPS 配置 Apache。您将需要安装 SSL 证书，并在端口 443 上为 HTTPS 创建一个新的虚拟主机。此页面有一个很好的示例说明如何执行此操作：

[http://wiki.apache.org/httpd/NameBasedSSLVHosts](http://wiki.apache.org/httpd/NameBasedSSLVHosts)

1.  为了通过 HTTPS 访问 HTTP 会话，您需要确保在 HTTPS 中使用与在 HTTP 中相同的会话 ID。有几种方法可以做到这一点，最常见的是在查询字符串中发送会话 ID，然后使用 session_id() 在 HTTPS 页面上设置会话 ID；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T15:19:29.800

您需要注意以下事项：

*   为自己获取该网站的专用 IP 地址（在任何正常情况下，您都不能拥有基于名称的虚拟 SSL 主机）
*   从高质量的可信赖提供商处获得证书
*   确保 Apache 可以处理 SSL 请求（openssl、mod_ssl）
*   如果您只想强制 SSL，请将您的 http vhost 配置为重定向

    `Redirect permanent / https://yourdomain.com`

*   安全地配置你的 https 虚拟主机，确保你知道你在做什么关于密码套装等。这是一个示例配置（可能不完全是你需要的，但类似）：

    ```
    SSLEngine on
    Header set Strict-Transport-Security "max-age=8640000;includeSubdomains"
    SSLProtocol -ALL +SSLv3 +TLSv1
    SSLCipherSuite 'ECDHE-RSA-RC4-SHA:RC4+SHA1+RSA'
    SSLCertificateFile path/to/your.crt
    SSLCertificateKeyFile path/to/your.key
    SetEnvIf User-Agent ".*MSIE.*" \ 
        nokeepalive ssl-unclean-shutdown \ 
        downgrade-1.0 force-response-1.0
    SSLCACertificateFile path/to/intermediate.ca 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T15:22:55.903

如果您需要对特定 URL 强制使用 SSL，那么您可以执行以下操作

使用特定模式重写端口 80 上的传入 URL；

```
RewriteCond %{REQUEST_URI} ^/PATH-YOU-WANT-TO-RESTRICT$
RewriteCond %{SERVER_PORT} 80
RewriteRule ^(.*)$ https://%{SERVER_NAME}$1 [R,L] 
```

您还需要确保您的 apache 服务器正在侦听来自端口 443 的请求。这可以在您的 httpd.conf 文件中轻松完成；

```
Listen servername:443 
```

您还需要在我们的 Apache 服务器上安装一个虚拟主机；

```
LoadModule ibm_ssl_module modules/mod_ibm_ssl.so

<VirtualHost servername:443>
    SSLEnable
    ServerName servername
    SSLClientAuth None
    ErrorLog /servername/conf/ssl/logs/https-error_log
    RewriteEngine On
    Include conf/vanity_rules/vanity_rewrite_rules.conf
    KeyFile /servername/conf/ssl/yourkey.kdb
</VirtualHost> 
```

此配置将确保浏览器和 Apache 服务器之间的传输全部加密。

# html - div没有出现？

> ID：14293863
> 
> 赞同：2
> 
> 时间：2013-01-12T13:40:27.873
> 
> 标签：html, css

由于某种原因，我无法`div`显示。发生这种情况时，通常是一个愚蠢的错字，但我搜索了 10 分钟，重写了整个 css 文件，又搜索了 20 分钟，但我找不到类似的东西。我有一个居中的 div，里面还有另一个 div。父母显示得很好，但里面的孩子却没有。这是我的CSS：

```
*{
    margin: 0px;
    padding: 0px;
}
#chartBox {
    width: 510px;
    height: 510px;
    background: #FFFF00;
    margin: 20px auto 0px auto;
}

#11 {
    display: inline-block;
    border: 1px solid #FFFFFF;
    width: 100px;
    height: 100px;
    background: #000000;
} 
```

还有我的 HTML `body`（只`link`在 css 和`title`外部`body`）：

```
<body>
    <div id="chartBox">
        <div id="11">

        </div>
    </div>
</body> 
```

如果我在11中输入文字，文字出现在chartBox的一角，但div的背景和边框不显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:43:49.380

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 (“-”)、下划线 (“_”) 、冒号（“:”）和句点（“.”）。

您不能只在 div 中使用数字，例如“11”。将其重命名为“div11”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T13:43:21.257

原因是某些浏览器不支持以数字开头的 id 和类。尝试`id="_11"`，`#_11 {`而不是。

# metadata - 使用 OPENQUERY（执行存储过程）创建新临时表失败，错误 11526

> ID：14293865
> 
> 赞同：8
> 
> 时间：2013-01-12T13:40:34.950
> 
> 标签：metadata, sql-server-2012, openquery

我的开发 PC 上安装了 SQL Server 2012 完整版。

我正在尝试按照[此处](https://stackoverflow.com/questions/653714/how-to-select-into-temp-table-from-stored-procedure)的示例进行操作，这些示例显示了如何使用存储过程作为数据源来创建新的临时表。我试图将几个存储过程的结果组合到一个临时表中（各种结果集的列结构/定义是相同的）。

为了测试管道是否正常工作，我发出以下查询：

```
 SELECT * FROM OPENQUERY("FOO\SQL2012", 'exec mySchema.myStoredProc') 
```

但是我从那个简单的测试管道选择查询中得到了这个错误：

> *消息 11526，级别 16，状态 1，过程 sp_describe_first_result_set，第 1 行
> 无法确定元数据，因为语句 'insert #tmp(foo1, foo2, foo3) select 'O' as foo1, foo2, foo3' in procedure 'myStoredProc' 使用一个临时表。*

如果我正确理解错误，OPENQUERY 取决于服务器能够从数据库中的*持久*定义中提取列数据类型，并且在我的存储过程中实例化的临时表是短暂的，缺少持久定义。如果是这种情况，**是否有任何设置告诉 OPENQUERY 尽其所能并尝试对列数据类型进行智能猜测？**

这是我正在测试的虚拟 SP：

```
create proc testproc
as
begin

create table #test
(id int, name varchar(5) );

insert into #test(id,name)values(1,'xxx');
select * from #test;
--drop table #test;   -- tried dropping and not dropping, same error either way
end 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-13T02:12:26.173

尝试这个：

```
SELECT *
FROM OPENQUERY("FOO\SQL2012", 'SET FMTONLY OFF; EXEC mySchema.myStoredProc;') X; 
```

原因是当您跨链接服务器执行存储过程时，提供程序首先尝试确定结果行集的形状。它通过发出`SET FMTONLY ON;`然后运行您的语句来做到这一点。在不使用临时表的存储过程中，这很好用。查询解析器基本上是在没有实际获取所有数据的情况下进行空运行，只获取元数据（有点像显示估计的执行计划）。

问题是，当存储过程*确实*使用临时表时，它会失败，因为临时表的元数据不存在：无法通过适用于不使用临时表的存储过程的元分析来收集它。因此，解决方法是在批处理中手动`SET FMTONLY OFF;`执行存储过程。

请注意，使用此方法会使存储过程**运行两次**。第一次收集元数据（被丢弃的数据），第二次实际返回数据。如果调用的存储过程成本特别高或有副作用，则可能需要留有余量。

最后，请注意，此技巧不适用于每个存储过程。存储过程可以做一些事情，只是在工作中扔了一个扳手。我不知道所有的可能性，但其中之一是返回多个记录集。

为了响应您的更新`SET FMTONLY OFF`不起作用：您是否可以重组您的 SP 以不使用临时表或使用会话键控永久表？这些选项中的任何一个都可以完成这项工作。在 SQL Server 2012 中，您还可以选择使用[表值参数](http://msdn.microsoft.com/en-us/library/bb510489.aspx)传递数据。

您可能想阅读 Erland Sommarskog 的[如何在存储过程之间共享数据，](http://www.sommarskog.se/share_data.html)因为它可能会为您提供实现目标的方法的灵感。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-29T15:47:41.997

`WITH RESULT SETS [NONE | UNDEFINED]`在 EXEC 调用的末尾添加“ ”应该可以解决这个问题。[http://technet.microsoft.com/en-us/library/ms188332.aspx](http://technet.microsoft.com/en-us/library/ms188332.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-03T15:18:01.127

如果远程过程返回一个结果集，则必须以 启动该过程`SET NOCOUNT ON`，否则第一个结果集是没有任何元数据的行数，并且总是会生成错误。

`WITH RESULT SETS((field1 type1, field2 type2...))`然后可以在 EXEC 语句的末尾使用定义结果集。

（这并没有直接回答问题，但我遇到了同样的错误，因为我的存储过程创建了一个临时表来存储中间结果。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-15T15:59:29.753

如果来宾服务器 sp 在开始时没有结果集（选择查询），则链接服务器无法解析结果集。我使用的选项如下：

```
create procedure test
as

    if 1=2
    select a, b, c from table

    declare @variable varchar(10)
    ----...and rest of your procedure...

    --in the end
    select a, b, c from table 
```

# c# - Linq-to-SQL 中的类型继承

> ID：14293866
> 
> 赞同：0
> 
> 时间：2013-01-12T13:40:39.707
> 
> 标签：c#, sql-server, linq-to-sql

我在 SQL Server 中有一些表和一组视图和函数，它们为这些表添加了一些额外的列。C# Linq-to-SQL 向导只需为我创建所有类型并且我可以使用它们。

我的问题是：添加的信息非常小，我希望视图和函数返回的对象类型与主表相同，但自动生成的类型不同。

我只是`View1`从表类型 (say ) 中派生一个类型 (say `Table1`) 并编写代码以使用派生类型调用我的函数 (或打开我的视图)。但是，它会引发类型异常`InvalidOperationException`并说出类似*`... is this the root of inheritance?`*.

所以我想知道这在 Linq-to-SQL 和 C# 中是否可行，如果可以，我该怎么办？

以下示例需要参考：

*   System.Data.Linq.Mapping
*   System.Data.Linq
*   System.ComponentModel
*   系统反射

**例子**

```
// Something like this added to the designer of dbml.
[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.Servers")]
public partial class DBServer : INotifyPropertyChanging, INotifyPropertyChanged
{

    private static PropertyChangingEventArgs emptyChangingEventArgs = new PropertyChangingEventArgs(String.Empty);

    private System.Guid _ID;

    private string _ServerName;

    private string _ServerIPs;

    private string _Name;

#region Extensibility Method Definitions
partial void OnLoaded();
partial void OnValidate(System.Data.Linq.ChangeAction action);
partial void OnCreated();
partial void OnIDChanging(System.Guid value);
partial void OnIDChanged();
partial void OnServerNameChanging(string value);
partial void OnServerNameChanged();
partial void OnServerIPsChanging(string value);
partial void OnServerIPsChanged();
partial void OnNameChanging(string value);
partial void OnNameChanged();
#endregion

    public DBServer()
    {
        OnCreated();
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_ID", DbType="UniqueIdentifier NOT NULL", IsPrimaryKey=true)]
    public System.Guid ID
    {
        get
        {
            return this._ID;
        }
        set
        {
            if ((this._ID != value))
            {
                this.OnIDChanging(value);
                this.SendPropertyChanging();
                this._ID = value;
                this.SendPropertyChanged("ID");
                this.OnIDChanged();
            }
        }
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_ServerName", DbType="NVarChar(128) NOT NULL", CanBeNull=false)]
    public string ServerName
    {
        get
        {
            return this._ServerName;
        }
        set
        {
            if ((this._ServerName != value))
            {
                this.OnServerNameChanging(value);
                this.SendPropertyChanging();
                this._ServerName = value;
                this.SendPropertyChanged("ServerName");
                this.OnServerNameChanged();
            }
        }
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_ServerIPs", DbType="NVarChar(255) NOT NULL", CanBeNull=false)]
    public string ServerIPs
    {
        get
        {
            return this._ServerIPs;
        }
        set
        {
            if ((this._ServerIPs != value))
            {
                this.OnServerIPsChanging(value);
                this.SendPropertyChanging();
                this._ServerIPs = value;
                this.SendPropertyChanged("ServerIPs");
                this.OnServerIPsChanged();
            }
        }
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_Name", DbType="NVarChar(255)")]
    public string Name
    {
        get
        {
            return this._Name;
        }
        set
        {
            if ((this._Name != value))
            {
                this.OnNameChanging(value);
                this.SendPropertyChanging();
                this._Name = value;
                this.SendPropertyChanged("Name");
                this.OnNameChanged();
            }
        }
    }

    public event PropertyChangingEventHandler PropertyChanging;

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void SendPropertyChanging()
    {
        if ((this.PropertyChanging != null))
        {
            this.PropertyChanging(this, emptyChangingEventArgs);
        }
    }

    protected virtual void SendPropertyChanged(String propertyName)
    {
        if ((this.PropertyChanged != null))
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

我将此添加到一个单独的文件中：

```
public class DBServerEx: DBServer {
    long? _AssignedPermissions;
    long _InheritedPermissions;
    long _ActivePermissions;

    [ColumnAttribute(Storage="_AssignedPermissions", DbType="BigInt")]
    public long? AssignedPermissions {
        get {
            return this._AssignedPermissions;
        }
        set {
            if((this._AssignedPermissions!=value)) {
                this._AssignedPermissions=value;
            }
        }
    }

    [ColumnAttribute(Storage="_InheritedPermissions", DbType="BigInt NOT NULL")]
    public long InheritedPermissions {
        get {
            return this._InheritedPermissions;
        }
        set {
            if((this._InheritedPermissions!=value)) {
                this._InheritedPermissions=value;
            }
        }
    }

    [ColumnAttribute(Storage="_ActivePermissions", DbType="BigInt NOT NULL")]
    public long ActivePermissions {
        get {
            return this._ActivePermissions;
        }
        set {
            if((this._ActivePermissions!=value)) {
                this._ActivePermissions=value;
            }
        }
    }
} 
```

在那个文件中我有：（
请注意，它是一个部分类并`MyDataContext`继承`DataContext`）

```
partial class MyDataContext {
    [FunctionAttribute(Name="dbo.uf_SelectServerWithPermissions", IsComposable=true)]
    public IQueryable<DBServerEx> SelectServerWithPermissions([ParameterAttribute(Name="UID", DbType="BigInt")] long uID) {
        return this.CreateMethodCallQuery<DBServerEx>(this, ((MethodInfo)(MethodInfo.GetCurrentMethod())), uID);
    }
} 
```

在另一个文件中：

```
MyDataContext Context; 
```

现在，当我打电话时

```
from s in Context.SelectServerWithPermissions(uID)
select s; 
```

我得到`InvalidOperationException`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:29:31.693

从[继承支持（LINQ to SQL）](http://msdn.microsoft.com/en-us/library/bb386919%28v=vs.90%29.aspx)

`LINQ to SQL supports single-table mapping. In other words, a complete inheritance hierarchy is stored in a single database table.`

更多链接：

[如何：映射继承层次结构 (LINQ to SQL)](http://msdn.microsoft.com/en-us/library/bb399352%28v=vs.90%29.aspx)

[如何：使用 O/R 设计器配置继承](http://msdn.microsoft.com/en-us/library/Bb384573%28v=vs.100%29.aspx)

[Linq 到 SQL 的继承](http://blogs.microsoft.co.il/blogs/bursteg/archive/2007/10/01/linq-to-sql-inheritance.aspx)

[ASP.Net 应用程序中的 LINQ to SQL 继承模型](http://weblogs.asp.net/dotnetstories/archive/2010/12/18/linq-to-sql-inheritance-model.aspx)

# matlab - Matlab R2011b mex 文件编译错误“无法识别的开关：-argcheck”

> ID：14293867
> 
> 赞同：0
> 
> 时间：2013-01-12T13:40:41.550
> 
> 标签：matlab, compilation, mex

当我尝试在 matlab r2011b 上编译 mex 文件时，会出现如下错误。

我该如何解决？

[我从http://www.timotheecour.com/software/ncut_multiscale/ncut_multiscale.html](http://www.timotheecour.com/software/ncut_multiscale/ncut_multiscale.html)下载了代码并编译

我的系统：核心 i7 - 64 位 win7

```
You can change your home, image, and results directories if you want ; see startup/definePaths
*********************************
Error: compilation of \cimgnbmap_lower.cpp failed :     Usage:
        MEX [option1 ... optionN] sourcefile1 [... sourcefileN]
            [objectfile1 ... objectfileN] [libraryfile1 ... libraryfileN]

    Use the -help option for more information, or consult the MATLAB API Guide.

  C:\PROGRA~1\MATLAB\R2011B\BIN\MEX.PL: Error: Unrecognized switch: -argcheck.

*********************************
....... (same error for other 11 files)

There were 0 files compiled

Error: There were 12 erroneous files during compilation
\cimgnbmap_lower.cpp
\mex_XindicatorTimesX.cpp
\mex_affinity_option.cpp
\mex_computeRowSum.cpp
\mex_constraint_classes.cpp
\mex_extractMaxima.cpp
\mex_istril.cpp
\mex_neighborW.cpp
\mex_normalizeColumns.cpp
\mex_projection_QR_symmetric.cpp
\mex_w_times_x_symmetric_tril.cpp
\spmtimesd.cpp

ans = 

1x12 struct array with fields:
    isErrorDuringCompilation
    isCompilationFailed
    message
    compiledFilename
    file
    isError 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:51:33.290

mex 的 -argcheck 选项已从 MATLAB R2010b 中删除。您使用的是哪个版本的 MATLAB？如果您认为您的 mex 文件不希望对 API 函数进行无效调用，则可以安全地删除此选项。例如，使用 NULL 指针调用 mxGetPr 会崩溃。“-argcheck”会捕捉到这一点并作为错误抛出。

# python - 同时遍历两个数组的pythonic方法是什么？

> ID：14293869
> 
> 赞同：36
> 
> 时间：2013-01-12T13:40:54.023
> 
> 标签：python

如果我有两个长度相同的数组 - 说`a`和`b`

`a = [4,6,2,6,7,3,6,7,2,5]`

`b = [6,4,6,3,2,7,8,5,3,5]`

通常，我会这样做：

```
for i in range(len(a)):
    print a[i] + b[i] 
```

而不是这样的：

```
i=0
for number in a:
    print number + b[i]
    i += 1 
```

因为我更喜欢与使用的方法保持一致。

我知道`zip`，但我从不使用它。这是为此`zip`而生的吗？

将

```
for pair in zip(a,b):
    print pair[0] + pair[1] 
```

是这样做的*pythonic*方式吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-12T13:51:08.817

如果列表`a`很`b`短，请使用[zip](http://docs.python.org/2/library/functions.html#zip)（如@Vincenzo Pii 所示）：

```
for x, y in zip(a, b):
    print(x + y) 
```

如果列表`a`很`b`长，则使用[itertools.izip](http://docs.python.org/2/library/itertools.html#itertools.izip)来节省内存：

```
import itertools as IT
for x, y in IT.izip(a, b):
    print(x + y) 
```

`zip`创建一个元组列表。如果`a`和`b`很大，这可能会很麻烦（内存方面）。

`itertools.izip`返回一个迭代器。迭代器不会生成完整的元组列表；它只产生每个项目，因为它是由 for 循环请求的。因此，它可以为您节省一些内存。

在 Python2 中，调用`zip(a,b)`短列表比使用`itertools.izip(a,b)`. 但是在 Python3 中注意`zip`默认返回一个迭代器（即它相当于`itertools.izip`在 Python2 中）。

* * *

其他感兴趣的变体：

*   [from future_builtin import zip](http://docs.python.org/2/library/future_builtins.html#future_builtins.zip) -- 如果您希望在 Python2 中使用 Python3 风格`zip`进行编程。
*   [itertools.izip_longest](http://docs.python.org/2/library/itertools.html#itertools.izip_longest) -- 如果`a`和`b`长度不等。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-12T13:44:43.857

正如您自己提到的，一个可能的解决方案是使用`zip`，但与您在问题中的编写方式略有不同：

```
for x, y in zip(a, b):
    print x, y 
```

请注意，返回的元组列表的长度`zip()`将等于 和 的长度之间的`a`最小值`b`。这会影响何时`a`和`b`不同的长度。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-12T14:57:35.623

`zip`您可以使用Numpy而不是使用[Numpy](http://www.numpy.org/)，尤其是在速度很重要并且您有长数组的情况下。它要快得多，一旦您使用 numpy 数组，您就不需要循环，只需编写：

```
print a + b 
```

图表显示了使用 zip、izip 和 numpy 对不同长度列表求和的平均时间： ![在此处输入图像描述](../Images/ab0165afa74f47184edf6aadb90a8df3.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-13T13:34:55.087

提供这个答案是为了完整性，因为`numpy`已经在另一个答案中讨论过，并且将来自更高排名数组的值配对在一起通常很有用。

接受的[答案](https://stackoverflow.com/a/14293953/2437514)适用于任何等级为 1 的序列/数组。但是，如果该序列具有多个级别（例如`numpy`等级为 2 或更多的数组，也例如在 a `list`of `list`s 或`tuple`of `tuple`s 中），则需要遍历每个等级。下面是一个二维`numpy`数组的例子：

```
import numpy as np
a = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])
b = np.array([list('abc'), list('pdq'), list('xyz')])
c = np.array([[frobnicate(aval, bval) for aval, bval in zip(arow, brow)] for arow, brow in zip(a, b)]) 
```

同样的概念也适用于任何一组相同形状的二维嵌套序列：

```
a = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
b = [list('abc'), list('pdq'), list('xyz')]
c = [[frobnicate(aval, bval) for aval, bval in zip(arow, brow)] for arow, brow in zip(a, b)] 
```

如果其中一个或两个嵌套序列有“洞”，使用[`itertools.zip_longest`](https://docs.python.org/2/library/itertools.html#itertools.izip_longest)来填充洞（填充值默认为`None`但可以指定）：

```
from itertools import zip_longest as zipl
a = [[], [4, 5, 6], [7, 8, 9]] # empty list in the first row
b = [list('abc'), list('pdq'), []] # empty list in the last row
c = [[frobnicate(aval, bval) for aval, bval in zipl(arow, brow)] for arow, brow in zipl(a, b)] 
```

# c++ - 使用 ifstream 从文本文件到控制台窗口的输入出现意外结果

> ID：14293870
> 
> 赞同：0
> 
> 时间：2013-01-12T13:41:16.720
> 
> 标签：c++, visual-c++, file-handling

所以我写了“tic tac toe”主机游戏。它读取播放器的名称并将它们存储在文本文件中，并显示（或应该显示）文本文件中所有播放器的列表。但它不会显示所有玩家的名字。如果我直接选择显示名称选项（即案例 2），它不会显示任何内容。如果我玩游戏一次并按两个它只会显示当前 2 个玩家的名字。我希望它显示该列表中所有玩家的姓名！这是我的代码（查看 main () 中的案例 2），案例 3 也显示了意想不到的结果。请帮助

```
#include <iostream>
#include <fstream>
#include <stdio.h>
#include <string>
void user_info ();
void gameplay();
using namespace std;
    int turn[9],Row,Col;
    const int row=3,col=3;
    string player1;
    string player2;

void main()
{
    int x;
    cout<<endl;
    cout<<"$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n";
    cout<<"$  Press 1 to play game                 $\n";
    cout<<"$  Press 2 to view the list of all players  $\n";
    cout<<"$  Press 3 to EXIT                      $\n";
    cout<<"$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n\n\n";
    cin>>x;
    switch(x)
    {
    case 1:
        {

            cout<<"$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n";
            cout<<"$                                                                             $\n";
            cout<<"$                            LETS PLAY TIC TAC TOE                            $\n";
            cout<<"$                                                                             $\n";
            cout<<"$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n\n\n";
            user_info ();
            gameplay ();
            cout<<endl<<endl<<endl;
            main ();
        }
    case 2:
        {

            ifstream infile("file.txt",ios::in);
            cout<<"The name of players are "<<endl<<player1<<"\t"<<player2<<endl;;
            cout<<endl<<endl<<endl;
            main ();
        }
    case 3:
        {
            cout<<"Goodbye"<<endl;
            break;
        }
    default:
        {
            cout<<"Invalid choice\n";
            main();
        }
        }
    }
void user_info ()
{
    ofstream infile("file.txt",ios::app);
    cout<<"player 1 enter your name :";
    cin>>player1;
    cout<<"\n\nplayer 2 enter your name :";
    cin>>player2;

    cout<<endl<<endl;
    cout<<player1<<"'s symbol is 'O'\n\n";
    cout<<player2<<"'s symbol is 'X'\n\n";
    cout<<endl<<endl;
    infile<<player1<<"\t"<<player2<<endl;

}
void gameplay ()
{
    char arr[row][col]={'_','_','_','_','_','_','_','_','_'};
    cout<<endl<<endl;
    for(int i=0;i<3;i++)
        {
            for(int j=0;j<3;j++)
            {
                cout<<arr[i][j]<<"\t";
            }
            cout<<endl<<endl;
        }
    for(int k=1;k<=9;k++)
    {       
turn :  cout<<endl; 
        if(k%2!=0)
        {
        cout<<player1<<" will enter row and column :";
        cin>>turn[k];
        if(turn[k]<=33)
        {
            Row=turn[k]/10-1;
            Col=turn[k]%10-1;
        }
        else 
        {
            cout<<"wrong input...";
            goto turn;
        }

            arr[Row][Col]= 'O';

        for(int i=0;i<3;i++)
        {
            for(int j=0;j<3;j++)
            {
                cout<<arr[i][j]<<"\t";
            }
            cout<<endl<<endl;
        }
        if (arr[0][0]=='O' && arr[0][0]==arr[1][1] && arr[1][1]==arr[2][2]) {cout<<player1<<" wins"<<endl;break;}
        if (arr[2][0]=='O' && arr[2][0]==arr[1][1] && arr[1][1]==arr[0][2]) {cout<<player1<<" wins"<<endl;break;}
        if (arr[0][0]=='O' && arr[0][0]==arr[1][0] && arr[1][0]==arr[2][0]) {cout<<player1<<" wins"<<endl;break;}
        if (arr[0][1]=='O' && arr[0][1]==arr[1][1] && arr[1][1]==arr[2][1]) {cout<<player1<<" wins"<<endl;break;}
        if (arr[0][2]=='O' && arr[0][2]==arr[1][2] && arr[1][2]==arr[2][2]) {cout<<player1<<" wins"<<endl;break;}
        if (arr[0][0]=='O' && arr[0][0]==arr[0][1] && arr[0][1]==arr[0][2]) {cout<<player1<<" wins"<<endl;break;}
        if (arr[1][0]=='O' && arr[1][0]==arr[1][1] && arr[1][1]==arr[1][2]) {cout<<player1<<" wins"<<endl;break;}
        if (arr[2][0]=='O' && arr[2][0]==arr[2][1] && arr[2][1]==arr[2][2]) {cout<<player1<<" wins"<<endl;break;}

        if (k== 9){cout<<"The game is DRAW!!"<<endl; break;} //sum=9 because there are only 9 boxes in the game

        }
    //big   
        else
        {
turn2 :      cout<<endl;    
            cout<<player2<<" will enter row and column :";
            cin>>turn[k];
            if(turn[k]<=33)
            {
                Row=turn[k]/10-1;
                Col=turn[k]%10-1;
            }
            else 
            {
                cout<<"wrong input...";
                goto turn2;
            }

                arr[Row][Col]= 'X';

            for(int i=0;i<3;i++)
            {
                for(int j=0;j<3;j++)
                {
                    cout<<arr[i][j]<<"\t";
                }
                cout<<endl<<endl;
            }
        }
            if (arr[0][0]=='X' && arr[0][0]==arr[1][1] && arr[1][1]==arr[2][2]) {cout<<player2<<" wins"<<endl;break;}
            if (arr[2][0]=='X' && arr[2][0]==arr[1][1] && arr[1][1]==arr[0][2]) {cout<<player2<<" wins"<<endl;break;}
            if (arr[0][0]=='X' && arr[0][0]==arr[1][0] && arr[1][0]==arr[2][0]) {cout<<player2<<" wins"<<endl;break;}
            if (arr[0][1]=='X' && arr[0][1]==arr[1][1] && arr[1][1]==arr[2][1]) {cout<<player2<<" wins"<<endl;break;}
            if (arr[0][2]=='X' && arr[0][2]==arr[1][2] && arr[1][2]==arr[2][2]) {cout<<player2<<" wins"<<endl;break;}
            if (arr[0][0]=='X' && arr[0][0]==arr[0][1] && arr[0][1]==arr[0][2]) {cout<<player2<<" wins"<<endl;break;}
            if (arr[1][0]=='X' && arr[1][0]==arr[1][1] && arr[1][1]==arr[1][2]) {cout<<player2<<" wins"<<endl;break;}
            if (arr[2][0]=='X' && arr[2][0]==arr[2][1] && arr[2][1]==arr[2][2]) {cout<<player2<<" wins"<<endl;break;}

            if (k== 9){cout<<"The game is DRAW!!!"<<endl; break;} //sum=9 because there are only 9 boxes in the game

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:50:36.320

将 rdbuf 添加到第二种情况。您的代码应如下所示：

```
case 2:
    {

        ifstream infile("file.txt",ios::in);
        cout<<"The name of players are "<<endl<<player1<<"\t"<<player2<<endl;;
        **cout << infile.rdbuf()<<endl;**
        cout<<endl<<endl<<endl;
        main ();
    } 
```

`rdbuf`读取所有文件并在您的帮助下`cout`将内容转储到控制台

还可以将播放器名称写入文件修改 user_info，如下所示：

```
void user_info ()
{
    ofstream infile("file.txt",ios::app);
    cout<<"player 1 enter your name :";
    cin>>player1;
    infile << player1;
    cout<<"\n\nplayer 2 enter your name :";
    infile << player2;
    cin>>player2;

    cout<<endl<<endl;
    cout<<player1<<"'s symbol is 'O'\n\n";
    cout<<player2<<"'s symbol is 'X'\n\n";
    cout<<endl<<endl;
    infile<<player1<<"\t"<<player2<<endl;

} 
```

# exception - 忽略 Twig 模板中的异常

> ID：14293877
> 
> 赞同：3
> 
> 时间：2013-01-12T13:42:23.387
> 
> 标签：exception, symfony, twig

我有一个`area.html.twig`呈现另一个模板的模板：

```
//area.html.twig
...

{% render 'Acme:User:restricted.html.twig' %}

... 
```

有没有办法忽略\捕获抛出的异常`restricted.html.twig`而只渲染什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T16:29:35.880

您应该在模板中使用[嵌入式控制器：](http://symfony.com/doc/2.0/book/templating.html#embedding-controllers)

```
{% render "yourBundle:Controller:action" with { 'data': data, } %} 
```

最好使用路由（从[symfony 安全更新](http://symfony.com/blog/security-release-symfony-2-0-20-and-2-1-5-released)开始）：

```
{% render url('theactionroute', { 'data': data }) %} 
```

在操作中，您可以检查您想要的任何内容，并在某些情况下返回空白响应/模板。

您还可以将模板渲染包装在 try & catch 块中，并在发生 twig 异常时返回错误模板：

```
 try {
           $response =  $this->render('yourBundle:Default:action.html.twig',
                                      array('data' => $data));
      } catch (\Exception $exc) {
           return $this->render('yourBundle:Default:error.html.twig', array(
                        'message' => $exc->getMessage()
                    ));
      } 
```

# ruby-on-rails - 带有erb的Sass不会编译

> ID：14293878
> 
> 赞同：12
> 
> 时间：2013-01-12T13:42:28.473
> 
> 标签：ruby-on-rails, ruby, sass, asset-pipeline, erb

在 Rails 中，文件`file.css.sass.erb`：

```
.class-name
    width: <%= "10px" %> 
```

正在抛出错误：

```
Invalid CSS after "": expected expression (e.g. 1px, bold), was "<%= "10px" %>" 
```

*它不应该工作吗？*

## 更新 1

仍在努力解决它，但我发现如果我将其更改为 SCSS 语法（文件名和代码），它仍然会导致非常相似的错误。

```
Invalid CSS after " width: ": expected expression (e.g. 1px, bold), was "<%= "10px" %>;" 
```

虽然，如果我***删除***`scss`扩展名，将 CSS 类似的语法保留为 filename ，`file.css.erb`Rails 会按预期编译。

然而，考虑到我忘记了一些非常明显的事情，我也在考虑这可能是一个 gem 冲突`sass-rails`，或者一个错误，或者什么。*毕竟，代码在没有 SASS 扩展的情况下工作。*

## 更新 2

刚刚在同一问题上发现了其他 4 个未回答的问题：

1.  [scss.erb 红宝石代码未执行](https://stackoverflow.com/questions/8745129/scss-erb-ruby-code-not-executing)
2.  [资产未通过 .erb 预处理器运行](https://stackoverflow.com/questions/7693226/assets-not-being-run-though-the-erb-preprocessor?rq=1)
3.  [Rails erb 预处理未在开发模式下发生](https://stackoverflow.com/questions/13376733/rails-erb-preprocessing-not-happening-in-development-mode?rq=1)
4.  [sprockets sass 部分 erb 扩展](https://stackoverflow.com/questions/9268515/sprockets-sass-partial-erb-extension?rq=1)。

他们中的一些人最终通过改变方法解决了这个问题。SASS 文件上的 ERB 问题保持不变。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-13T16:08:41.580

[正如GitHub 上](https://github.com/rails/sass-rails/issues/94)`sass-rails`所讨论的，这确实是一个问题。

于是[这家伙](https://github.com/quinn)写了[这个补丁](https://github.com/quinn/sass_rails_patch)，彻底解决了这个问题。

## 解决方案

添加到`Gemfile`：

```
gem "sass_rails_patch", "~> 0.0.1" 
```

然后跑`bundle`，你很好！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-02-21T13:35:25.707

如果 erb 仅用于引用资产，则可以使用[资产助手：](https://github.com/rails/sass-rails#asset-helpers)

```
background-image: asset-url("rails.png") 
```

...代替...

```
background-image: url("<%= image_path('rails.png') %>"); 
```

# java - 在 JTextPane 中呈现 Markdown 格式的问题

> ID：14293879
> 
> 赞同：0
> 
> 时间：2013-01-12T13:42:46.293
> 
> 标签：java, swing, render, markdown, jtextpane

我正在使用 Swing 制作一个简单的 markdown 文本编辑器，它可以在其主 JTextPane 中实时呈现 markdown 格式。也就是说，markdown 格式的文本`*hello*`一旦检测到就会以斜体显示，但会以纯文本形式保存。

为此，我想出了一个正则表达式来获取降价标记（让我们现在仅用`*italics*`作示例），每隔几秒钟我的代码就会搜索 JTextPane 的文本并使用 JTextPane#setCharacterAttributes 来更改相关区域的格式.

```
// init
PLAIN = Document.addStyle("plain", null);
StyleConstants.setFontSize(PLAIN, 12);

ITALIC = Document.addStyle("italic", null);
StyleConstants.setItalic(ITALIC, true);
...
// every few seconds
// remove all formatting
Document.setCharacterAttributes(0, Document.getLength(), PLAIN, true);

// italicize parts that the regex matches
m = Pattern.compile("\\*([^\\n*]+)\\*").matcher(temp);
while (m.find()) {
    Document.setCharacterAttributes(m.start(), m.group().length(), ITALIC, false);
} 
```

问题是“活跃度”——一段时间后，JTextPane 开始用[characters 而不是 words](https://stackoverflow.com/questions/6052821/jtextarea-how-to-wrap-text-by-words-not-characters)换行，有时会完全失去自动换行，只显示未换行的行。

有什么办法可以修复这个/扩展 JTextPane 来修复它，还是 JTextPane 根本不适合这种实时更新？我用谷歌搜索了很长时间，但找不到任何东西；我只是不确定要搜索什么。

```
package test;

import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.lang.reflect.Field;
import java.util.logging.*;
import java.util.regex.*;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.text.*;

public class Test {

    private JFrame frame = new JFrame();
    private JTextPane jtp;
    private StyledDocument doc;

    // NEW LINES
    private Timer T;
    private boolean update = true;
    MarkdownRenderer m;
    // END OF NEW LINES

    public Test() {
        jtp = new JTextPane();
        jtp.setEditorKit(new MyStyledEditorKit());
        jtp.setText("\ntype some text in the above empty line and check the wrapping behavior");
        doc = jtp.getStyledDocument();
        // NEW LINES
        m = new MarkdownRenderer(jtp);
        Timer T = new Timer(2000, new java.awt.event.ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                if (update) {
                    update = false;
                    m.render();
                }
            }
        });
        T.start();
        // END OF NEW LINES
        doc.addDocumentListener(new DocumentListener() {

            private boolean doUpdate = true;
            public void insertUpdate(DocumentEvent e) {
                insert();
            }

            public void removeUpdate(DocumentEvent e) {
                insert();
            }

            public void changedUpdate(DocumentEvent e) {
//                triggers every time formatting is changed
//                 insert();
            }

            public void insert() {
                SwingUtilities.invokeLater(new Runnable() {

                    public void run() {
                        Style defaultStyle = jtp.getStyle(StyleContext.DEFAULT_STYLE);
                        doc.setCharacterAttributes(0, doc.getLength(), defaultStyle, false);
                        update = true;
                    }
                });
            }
        });
        JScrollPane scroll = new JScrollPane(jtp);
        scroll.setPreferredSize(new Dimension(200, 200));
        frame.add(scroll);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                Test bugWrapJava7 = new Test();
            }
        });
    }
}

class MyStyledEditorKit extends StyledEditorKit {
    private MyFactory factory;

    public ViewFactory getViewFactory() {
        if (factory == null) {
            factory = new MyFactory();
        }
        return factory;
    }
}

class MyFactory implements ViewFactory {
    public View create(Element elem) {
        String kind = elem.getName();
        if (kind != null) {
            if (kind.equals(AbstractDocument.ContentElementName)) {
                return new MyLabelView(elem);
            } else if (kind.equals(AbstractDocument.ParagraphElementName)) {
                return new ParagraphView(elem);
            } else if (kind.equals(AbstractDocument.SectionElementName)) {
                return new BoxView(elem, View.Y_AXIS);
            } else if (kind.equals(StyleConstants.ComponentElementName)) {
                return new ComponentView(elem);
            } else if (kind.equals(StyleConstants.IconElementName)) {
                return new IconView(elem);
            }
        }

        // default to text display
        return new LabelView(elem);
    }
}

class MyLabelView extends LabelView {
    public MyLabelView(Element elem) {
        super(elem);
    }
    public View breakView(int axis, int p0, float pos, float len) {
        if (axis == View.X_AXIS) {
            resetBreakSpots();
        }
        return super.breakView(axis, p0, pos, len);
    }

    private void resetBreakSpots() {
        try {
            // HACK the breakSpots private fields
            Field f=GlyphView.class.getDeclaredField("breakSpots");
            f.setAccessible(true);
            f.set(this, null);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

}

class MarkdownRenderer {    
    private static final MutableAttributeSet PLAIN = new SimpleAttributeSet();
    private static final MutableAttributeSet BOLD = new SimpleAttributeSet();
    private static final MutableAttributeSet ITALIC = new SimpleAttributeSet();
    private static final MutableAttributeSet UNDERLINE = new SimpleAttributeSet();

    private StyledDocument Document = null;

    public MarkdownRenderer(JTextPane editor) {
        Document = (StyledDocument) editor.getDocument();

        StyleConstants.setBold(BOLD, true);
        StyleConstants.setItalic(ITALIC, true);
        StyleConstants.setUnderline(UNDERLINE, true);
    }

    void render() {
        String s = "";
        try {
            s = Document.getText(0, Document.getLength());
        } catch (BadLocationException ex) {
            Logger.getLogger(MarkdownRenderer.class.getName()).log(Level.SEVERE, null, ex);
        }
//        Document.setCharacterAttributes(0, Document.getLength(), PLAIN, true);

        String temp = s.replaceAll("\\*\\*([^\\n*]+)\\*\\*", "|`$1`|"); // can also use lazy quantifier: (.+?)

        Matcher m = Pattern.compile("\\|`.+?`\\|").matcher(temp);
        while (m.find()) {
            Document.setCharacterAttributes(m.start(), m.group().length(), BOLD, false);
        }
        m = Pattern.compile("\\*([^\\n*]+)\\*").matcher(temp);
        while (m.find()) {
            Document.setCharacterAttributes(m.start(), m.group().length(), ITALIC, false);
        }
        m = Pattern.compile("_+([^\\n*]+)_+").matcher(temp);
        while (m.find()) {
            Document.setCharacterAttributes(m.start(), m.group().length(), UNDERLINE, false);
        }
    }
} 
```

# ipad - 当虚拟键盘出现时，iPad 中的弹出框会向上移动？

> ID：14293885
> 
> 赞同：-2
> 
> 时间：2013-01-12T13:43:20.813
> 
> 标签：ipad

当我在弹出视图中键入文本字段时，它向上移动并隐藏弹出视图中的一些字段。我想在弹出视图中重叠键盘。任何人都知道帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:31:30.693

你会在某个地方做这个

```
[[Utilities getAppDelegate].menuPopover presentPopoverFromRect:rect
                                                        inView:self.view 
                                      permittedArrowDirections:UIPopoverArrowDirectionAny 
                                                      animated:YES]; 
```

或类似的东西。我所做的是检查弹出窗口的绘制位置，如果它在屏幕上太低，我将允许的箭头方向更改为除了在图钉下方之外的所有内容`(UIPopoverArrowDirectionLeft || UIPopoverArrowDirectionRight || UIPopoverArrowDirectionDown)`

# java - 从 SWT 部分删除描述

> ID：14293886
> 
> 赞同：1
> 
> 时间：2013-01-12T13:43:26.213
> 
> 标签：java, swt, eclipse-rcp

我有一个从 SectionPart 扩展的类。

```
public class MyData extends SectionPart{

} 
```

在初始化方法中，我正在创建一个部分。

```
public class MyData extends SectionPart{
    public void initialize(){
        Section section = this.getSection();
        section.setText("List Items");
        ....
    }
} 
```

当我在该部分下的 UI 中看到时，我可以看到没有提供描述，但光标仍然在那里闪烁。要删除它，我在我的初始化方法中添加了以下代码。

```
public class MyData extends SectionPart{
    public void initialize(){
        Section section = this.getSection();
        section.setText("List Items");
        section.getDescriptionControl.setLayout(new GridData());
        section.getDescriptionControl.setVisible(false);
        ((GridData)section.getDescriptionControl().getLayoutData()).exclude = true;
        section.getDescriptionControl().getParent().layout(true);
    }
} 
```

现在描述控件是不可见的，但我无法从布局中删除它。请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T11:11:09.947

`Section#DESCRIPTION`如果您在创建截面部件时不使用样式标志，则不会添加描述控件。如果您看到描述控件，那么您必须在发送到该部分的构造函数的样式中设置此标志

# javascript - Javascript匿名函数上的innerHTML

> ID：14293890
> 
> 赞同：1
> 
> 时间：2013-01-12T13:44:05.370
> 
> 标签：javascript, anonymous-function

我正在编写一个greasemonkey 脚本来格式化数千个youtube 视频的观看次数。我格式化粗略数字的功能做得很好。我的问题是通过匿名函数设置格式化的数字。这是我正在尝试的...

```
function main(arg){
  var viewCount = new Array();

  for(var i=0; i < arguments.length; i++){
      var viewCount = Format(document.getElementsByClassName(arguments[i])[i].textContent);
//  (function(){document.getElementsByClassName(arguments[i])[i].innerHTML = viewCount[i]})();          
  }
} 
```

现在，这是一件棘手的事情。在 Firebug 上调试它，当我删除匿名函数的注释时，即使是 var viewCount 也会收到错误消息“ReferenceError：引用未定义的属性参数 [i]”。但是当评论它回来时，它会按预期设置。

这是我做的一个完整的测试平台：http: [//pastebin.com/JRPRQnv6](http://pastebin.com/JRPRQnv6)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:49:10.453

[`arguments` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)是每个函数中的一个特殊变量。您没有将任何参数传递给匿名函数，因此它是一个空对象。

如果`arguments`要从外部函数访问对象，则必须存储对它的引用。

例子：

```
 function main(arg){
  var viewCount = new Array();
  var args = arguments;

  for(var i=0; i < arguments.length; i++){
      var viewCount = Format(document.getElementsByClassName(arguments[i])[i].textContent);
      (function(){
          document.getElementsByClassName(args[i])[i].innerHTML = viewCount[i];
      })();          
  }
 } 
```

但我完全看不出有理由在这里使用立即函数。另一个潜在问题是您正在访问 的`i`第 th 元素`.getElementsByClassName`，其中`i`是参数的循环索引。`.getElementsByClassName`甚至可能不会返回这么多元素（即您为错误的列表使用了错误的索引）。

也许你打算这样做：

```
for(var i=0; i < arguments.length; i++){
    var elements = document.getElementsByClassName(arguments[i]);
    for (var j = 0, l = elements.length; j < l; j++) {
        elements[j].innerHTML = Format(elements[j].textContent);
    }
} 
```

# php - PHP - 从下拉菜单中选择目录

> ID：14293891
> 
> 赞同：0
> 
> 时间：2013-01-12T13:44:29.590
> 
> 标签：php, drop-down-menu, directory, mkdir

我想知道选择“上传”按钮时如何选择目录。

我要做的是让用户选择上传文件的位置，并可以从下拉菜单中选择在所选文件夹中创建新目录。

当我尝试使用`$val`或`$folder`选择上传目录时，没有上传任何内容。

当前代码可以在[这里](http://pastebin.com/FNvteF0i)找到。

这是一个截图，以获得更好的想法：

![在此处输入图像描述](../Images/dc013c17527df84b59ef0c1a682b7e1c.png)

所以基本上，用户选择一个文件，选择上传目的地（可以选择在所选目录中创建一个新文件夹），当创建上传按钮时，文件被上传。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:57:09.500

我不建议用户创建目录。您应该创建虚拟目录。此外，您的代码很容易受到[SQL-Injection 的](http://de.wikipedia.org/wiki/SQL_Injection#PHP)攻击。

但如果它只是一个小项目而不是公开的：

基本上，您将目录名称作为 POST 参数传递，就像以简单的形式一样。问题究竟出在哪里？

# java - 使用 Spring AOP 创建拦截器

> ID：14293892
> 
> 赞同：3
> 
> 时间：2013-01-12T13:44:32.663
> 
> 标签：java, spring, aop, spring-aop

我爱春天。但是当涉及到在方法执行前后插入代码时，我不得不承认，Spring/AOP 搞错了。

在我看来，硬编码方法名称或类似于方法名称的正则表达式应该是我们最不应该经历的事情。我们都从 2000 年代初期的 XML 地狱中艰难地学会了它。

相比之下，EJB3 的拦截器是基于注释的、简单的、更易于阅读的，并且它能够解决我们的大部分问题（如果不是全部的话）。如果我们可以在 Spring 中编写 EJB3 样式的拦截器，那不是很好吗？

我知道的最佳解决方案是`@annotation`在切入点表达式中使用，正如我在以下代码中所做的那样：

```
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface AroundExecution {

}

@Component
public class SimpleBean {
    @AroundExecution
    public void printGreetings(){
        logger.info("Hello World 2");
    }
}

@Aspect
@Component
public class SimpleAdvice {
    @Around("@annotation(com.myinterceptors.springaop.AroundExecution)")
    public Object adviceAround(ProceedingJoinPoint joinPoint) throws Throwable {
        Object retVal = null;
        try {
            logger.info("Before executing");
            retVal = joinPoint.proceed();
            logger.info("After executing");
        } 
        catch(Throwable e) {
            logger.error("Execution error");
            throw e;
        }
        return retVal;
    }
} 
```

似乎不可能消除注释类名称的最后一点硬编码。

如果我使用 Guice，我可以这样做：

```
 public class SimpleModule extends AbstractModule {
        protected void configure() {
        AroundInterceptor interceptor = new AroundInterceptor();
        bindInterceptor(
            Matchers.any(), 
            Matchers.annotatedWith(BeforeExecution.class).or(Matchers.annotatedWith(AfterExecution.class)), 
            interceptor
        );
        }
    }

public class AroundInterceptor implements MethodInterceptor {

    private static final Logger logger = LoggerFactory.getLogger(AroundInterceptor.class);

    public Object invoke(MethodInvocation invocation) throws Throwable {

        try{
            if(invocation.getMethod().getAnnotation(BeforeExecution.class)!=null){
                invokeBefore(invocation);
            }
            return invocation.proceed();
        }
        finally{
            if(invocation.getMethod().getAnnotation(AfterExecution.class)!=null){
                invokeAfter(invocation);
            }
        }
    }

    protected void invokeBefore(MethodInvocation invocation) throws Throwable {
        logger.info("Intercepted before executing: "+invocation.getMethod().getName());
    }

    protected void invokeAfter(MethodInvocation invocation) throws Throwable {
        logger.info("Intercepted after executing: "+invocation.getThis().getClass().getName()+"."+
                invocation.getMethod().getName());
    }
} 
```

不完全是最漂亮的，但它完成了工作。

装饰器模式是一种替代方案，但它在维护方面增加了很多开销：

[用于 Spring bean 的 JSR-299 CDI 装饰器](http://niklasschlimm.blogspot.com.au/2011/08/jsr-299-cdi-decorators-for-spring-beans.html)

如果 Spring 可以允许对切入点表达式进行扩充以支持类定义作为参数，那就容易多了，例如`@Around("@annotatedWith", MyAnnotation.class)`

我想知道是否有人曾经在 Spring 中实现过不需要在元数据或应用程序上下文中进行硬编码的拦截器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-07T10:08:25.367

有点晚了，但是看看 Spring 官方文档中的这段代码：

```
@Before("com.xyz.lib.Pointcuts.anyPublicMethod() && @annotation(auditable)")
public void audit(Auditable auditable) {
    AuditCode code = auditable.value();
    // ...
} 
```

注意切入点中引用的**可审计参数名称。**

如果您想使用 @Around 建议，只需像这样修改您的代码：

```
@Around("com.xyz.lib.Pointcuts.anyPublicMethod() && @annotation(auditable)")
public void audit(ProceedingJoinPoint joinPoint, Auditable auditable) {
    AuditCode code = auditable.value();
    // ...
} 
```

# .net - GrGen.NET：“给定的键不在字典中。”

> ID：14293893
> 
> 赞同：0
> 
> 时间：2013-01-12T13:44:36.627
> 
> 标签：.net, graph, transformation

在 GrGen.NET 中运行转换时出现此异常。我可以把它缩小到这个最小的例子：

**规则集：**

```
rule createNode : (Node) {
    modify {
        newNode:Node;
        return(newNode);
    }    
}

rule deleteAny {
    :Node;
    replace{}
} 
```

**序列集：**

```
(myVariable) = createNode
deleteAny[*] 
```

PS：GrGen.NET 是一个非常流行的基于 .NET 框架的图形转换库（在[http://grgen.net上查看）。](http://grgen.net)如果有人可以为 GrGen.NET 定义一个标签会很酷，我没有足够的声誉:-)。干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:57:31.520

显然，这个错误来自 GrGen。`myVariable`问题是包含从规则创建的节点的变量`createNode`。

当应该使用 删除节点时`deleteAny`，它会从图中删除，但仍以某种方式被困在此变量中。一个简单的解决方法是为这个变量分配一个任意值，例如`myVariable = 0`，在节点被删除之前。

这是一个 hack，但在修复此错误之前会一直这样做。

# javascript - 使用 jquery 编辑图像 src

> ID：14293896
> 
> 赞同：1
> 
> 时间：2013-01-12T13:45:03.090
> 
> 标签：javascript, jquery

我想编辑我所有图像的 src 属性。我实际上想从所有图像 src 中删除“\test”。我已经在 jquery 中尝试了 replace 和 src.replace，但没有成功。请帮助如何做到这一点。

```
$("img").each(function(){
            var srcVar = this.attr('src');
            this.attr('src', "http://www.abc.gr"+srcVar);
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:48:11.627

这应该可以帮助您：

```
$("img").each(function(){

    // get the current source, replace the test string
    var srcVar = this.attr('src').replace('/test', '');

    // apply it back
    $(this).attr('src', srcVar);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T13:49:43.303

试试这个...

```
$("img").each(function(){
    var srcVar = $(this).attr('src');
    srcVar = srcVar.replace("/test", "");
    $(this).attr('src', srcVar);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T13:48:04.830

改用`$(this)`：

```
$("img").each(function(){
    var srcVar = $(this).attr('src').replace("/test", "");;
    $(this).attr('src', srcVar);
}); 
```

# javascript - JavaScript 错误：“ReferenceError：未定义数组”

> ID：14293897
> 
> 赞同：7
> 
> 时间：2013-01-12T13:45:07.677
> 
> 标签：javascript, jquery, arrays, cakephp

我想制作一个 JavaScript`array`并通过 post 请求将其传递到 php 中的另一个页面我在 firebug 中收到错误：

> ReferenceError：未定义数组

这是代码：

```
$(document).ready(function(){
    var data = new array();               // this line throws the error
    // Handle Submiting form data
    $("#btnSumbit").click(function (){

        $('#tblCriteria input[type=text]').each(
            function(){
                data[this.id] = this.value;
            }
        ); 
```

此代码在`cakePHP`视图中。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-12T13:47:46.150

JavaScript 区分大小写，因此要创建一个新数组，请[`Array`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)使用大写字母编写：

```
var data = new Array(); 
```

但是，您可以始终使用简短版本：

```
var data = []; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-03-05T12:13:41.827

您需要在上面声明 Array 之前使用它来检查区分大小写的名称

```
 var arrayName = []; //  1
          or
 var arrayName = new Array(); //  2 
```

# jakarta-mail - Javamail，将真实发件人的地址隐藏给收件人？

> ID：14293898
> 
> 赞同：0
> 
> 时间：2013-01-12T13:45:19.577
> 
> 标签：jakarta-mail

我想发送邮件，`javamail`但我不希望收件人回复我。

我想显示我的真实`myrealadress@abc.com`地址`no-reply@abc.com`。

对于`reply to`，我使用：

```
messageMail.setReplyTo(new Address[]{new InternetAddress("no-reply@abc.com")}); 
```

但我可以在邮箱中看到真正的发件人。所以我使用：

```
messageMail.setFrom(new InternetAddress("myrealadress@abc.com", "no-reply@abc.com")); 
```

`myrealadress@abc.com`但我可以在收件人邮箱中看到地址...

那么，有没有办法将发件人地址邮件完全隐藏给收件人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:02:23.387

您可以通过从名称中分配来隐藏它

```
messageMail.setFrom(new InternetAddress("no-reply@abc.com", "WebMaster")); 
```

但通常通知发件人姓名和发件人地址是发送邮件的好习惯。使用来自姓名和来自地址并回复。提及喜欢`do not reply to the sender`

# php - phpUnit 测试 curl 操作

> ID：14293901
> 
> 赞同：1
> 
> 时间：2013-01-12T13:45:27.757
> 
> 标签：php, curl, phpunit

我有课，我用它来卷曲操作（发送帖子数据，获取网站来源等）。

现在我想对其进行单元测试，但我不知道**如何测试它**？

我的班级的示例用法：

```
$curl = new Curl();
$curl->setUrl('http://example.php');
$curl->setReturn(true);
$source = $curl->execute(); 
```

你对我有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T11:59:04.737

您可以使用抽象来卷曲，即[HTTP_Request2](http://pear.php.net/package/HTTP_Request2)。在单元测试期间，您不使用 curl 适配器，而是使用模拟适配器。

该库稳定且经过单元测试，因此您不必再测试 curl 的使用，但可以安全地使用模拟数据。

# jquery - HTML5 圆形动画，所以看起来它是浮动的

> ID：14293903
> 
> 赞同：0
> 
> 时间：2013-01-12T13:45:42.713
> 
> 标签：jquery, html, animation, html5-canvas, geometry

所以我是 html 5 的新手，我试图让一个圆圈看起来就像它只是漂浮在那里，所以它不是完全静止的，这可能吗？如果可以的话，你能帮忙吗？以及如何使画布的宽度为 100%，高度为 100%，以便填满整个屏幕？你需要一个画布来绘制它，否则你会怎么做？

```
 var canvas = document.getElementById('myCanvas');
    var context = canvas.getContext('2d');
    var centerX = canvas.width / 2;
    var centerY = canvas.height / 2;
    var radius = 70;

    context.beginPath();
    context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
    context.fillStyle = 'green';
    context.fill();
    context.lineWidth = 2;
    context.strokeStyle = '#003300';
    context.stroke(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:02:15.937

您可以在我的问题上查看我的代码：[mouse-over-html-5-canvas-image-in-animation-to-play-pause-it](https://stackoverflow.com/questions/14680148/mouse-over-html-5-canvas-image-in-animation-to-play-pause-it)。我问题中的代码与您想要的相同。也许它可能对你有一些帮助。

# android - 可以在官方不支持的地区更新三星固件

> ID：14293906
> 
> 赞同：-1
> 
> 时间：2013-01-12T13:46:22.667
> 
> 标签：android, galaxy

我拥有三星 Galaxy Note 10.1 NT-8000 并且居住在尚未提供 OTA 更新的国家。可能他们永远不会;-) 所以我想通过 ODIN 手动更新 FW。我已经阅读了很多操作手册，但仍然不确定我是否在它仍然不可用的地区升级新的 SAMSUNG FW 是否仍然能够拨打电话和使用数据服务。我将通过三星 4.1.1 升级最后一个原始固件。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:59:43.467

我将首先说这不是谈论这类事情的正确场所，但是会给出一个快速的答案，因为这似乎是第一次冒犯。

我建议查看[XDA](http://www.xda-developers.com/)以获取资源。自从 WinMo 6 天以来一直在那里，并且一直是移动黑客的领头羊。

据我在大量 I-9000 刷机的日子里所知，ROM（Android 位）在很大程度上独立于调制解调器（电话位）和内核（低级硬件接口的东西）。*如果您为您的确切*型号闪烁国际根目录 ROM，我会感到安全。请务必使用 TiBackup 之类的工具备份所有应用程序。

# c# - 如何将文件从我的 RichTextbox 控件中的拖放文本写入 Windows 资源管理器？

> ID：14293908
> 
> 赞同：1
> 
> 时间：2013-01-12T13:46:28.690
> 
> 标签：c#, file-io, drag-and-drop, richtextbox

我知道下面的问题有点棘手，但我真的需要解决它......

想象一下，您有一个带有文本框控件（在我的例子中是 RichTextBox）的表单。现在，您在此控件中选择部分文本，启动拖动事件并将所选文本拖放到窗体外，直接到 Windows 资源管理器中的某个文件夹，例如桌面...

如何实现？除了以下链接，我在网上没有找到有用的东西：[http ://forums.asp.net/t/1600192.aspx/1](http://forums.asp.net/t/1600192.aspx/1)

我所知道的是这种文件写入操作称为“废文件生成”。有人对我有用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:12:34.267

The [FileDrop](http://msdn.microsoft.com/en-us/library/system.windows.forms.dataformats.filedrop.aspx) expects the files to exist and the drop just does a copy of the file. You will have to write your data out to a file and then pass that name to the DataObject. The below is just a demonstration and you will need to figure out how you write the files and clean everything up so you are not creating extra files on the user's PC.

```
private void richTextBox1_MouseLeave(object sender, EventArgs e)
{
    // If the left mouse button is down when leaving the rtb
    if (MouseButtons == MouseButtons.Left)
    {
        // Write everything to a temp file.
        System.IO.File.WriteAllText(@"z:\Temp\helloWorld.rtf", richTextBox1.SelectedRtf);
        string[] filenames = { @"z:\Temp\helloWorld.rtf" };
        DataObject obj = new DataObject();
        // Set the drag drop data with the FileDrop format
        obj.SetData(DataFormats.FileDrop, filenames);
        // Start the drag drop effect
        DoDragDrop(obj, DragDropEffects.All);
    }
} 
```

# animation - cocos2d 动画的鞋盒

> ID：14293909
> 
> 赞同：1
> 
> 时间：2013-01-12T13:46:40.990
> 
> 标签：animation, cocos2d-iphone

是否可以使用 ShoeBox 制作 cocos2d 动画？只是我喜欢这个应用程序，它易于使用且免费。

就在我使用给我plist格式的texturePacker之前，而shoebox给的xml看起来像

```
<TextureAtlas imagePath="sheet.png">
    <SubTexture name="W1001.png" x="81" y="360" width="73" height="106"/>
    <SubTexture name="W1002.png" x="83" y="130" width="76" height="106"/>
    <SubTexture name="W1003.png" x="233" y="0" width="90" height="106"/>
    <SubTexture name="W1004.png" x="0" y="136" width="81" height="106"/>
    <SubTexture name="W1005.png" x="157" y="347" width="69" height="106"/>
    <SubTexture name="W1006.png" x="0" y="360" width="78" height="105"/>
    <SubTexture name="W1007.png" x="0" y="244" width="73" height="114"/>
    <SubTexture name="W1008.png" x="401" y="0" width="75" height="117"/>
    <SubTexture name="W1009.png" x="157" y="0" width="74" height="124"/>
    <SubTexture name="W1010.png" x="81" y="0" width="74" height="127"/>
    <SubTexture name="W1011.png" x="0" y="0" width="79" height="134"/>
    <SubTexture name="W1012.png" x="325" y="0" width="74" height="122"/>
    <SubTexture name="W1013.png" x="75" y="244" width="68" height="114"/>
    <SubTexture name="W1014.png" x="161" y="126" width="77" height="105"/>
    <SubTexture name="W1015.png" x="145" y="239" width="71" height="106"/>
    <SubTexture name="W1016.png" x="228" y="233" width="68" height="106"/>
</TextureAtlas> 
```

换句话说，如何将这个 xml 用于 cocos2d 动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:58:14.890

ShoeBox 3.1.0 新增 cocos2d pList 格式导出添加到“Sprite Sheet”工具中。

截图： http: [//farm9.staticflickr.com/8382/8457718272_315955c6fa_o.jpg](http://farm9.staticflickr.com/8382/8457718272_315955c6fa_o.jpg)

它没有大张旗鼓地宣布，因为我自己仍然无法测试或确认导出的正确性。但我非常有信心作物、x、y、.. 值是正确的。如果你可以试一试，让我知道它是否适合你，那就太好了。

# joomla - 如何在 Joomla 2.5 中将模块参数保存到数据库中

> ID：14293914
> 
> 赞同：0
> 
> 时间：2013-01-12T13:47:40.420
> 
> 标签：joomla, joomla2.5

我想更新数据库中的模块参数。我尝试使用以下代码：

```
if (!$params->get('is_installed')) 
{
    $db = JFactory::getDbo();

    $params->set('is_installed', 1);

    $sql = 'UPDATE '.$db->QuoteName('#__modules').' SET params = \''.(string) $params.'\' WHERE title = \'My module\'';
    $db->setQuery($sql);
    $db->query();

    // $params->get('is_installed') returns 1 - OK
} 
```

但它不想更改数据库中的参数值（我一直都有值“0”）。$params 字符串在查询中是正确的，因为如果我手动执行，SQL 查询就可以工作。怎么了 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:50:16.423

模块参数通过 Joomla 自动存储。您所要做的就是在 XML 文件中定义参数。要调用它，请使用以下命令：

```
$params->get('is_installed'); 
```

**更新：**

```
if($params->get('is_installed') == 0){
    $db = JFactory::getDbo();
    //rest of database query
} 
```

# php - 分层数据 PHP 组合框

> ID：14293920
> 
> 赞同：0
> 
> 时间：2013-01-12T13:48:05.320
> 
> 标签：php

此代码适用于以下数据。但结果是一个无序的 lis，我需要它作为下拉组合框。现在有没有人知道如何使用帖子中的 SQL 数据和结构来做到这一点？

SQL

```
CREATE TABLE IF NOT EXISTS `categories` (
  `catid` int(3) NOT NULL AUTO_INCREMENT,
  `catname` varchar(45) NOT NULL,
  `catparent` int(3) NOT NULL,
  `catorder` int(4) NOT NULL,
  `catdesc` varchar(1024) NOT NULL,
  PRIMARY KEY (`catid`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1;

--
-- Dumping data for table `categories`
--

INSERT INTO `categories` (`catid`, `catname`, `catparent`, `catorder`, `catdesc`) VALUES
(1, 'Informática', 0, 1000, 'Computadores e acessórios'),
(2, 'Comunicações', 0, 1000, 'Sistemas de Comunicações'),
(3, 'Acessórios', 1, 2000, 'Acessórios para Computadores'),
(4, 'PABX', 2, 2000, 'Centrais telefónicas IP e TDM'),
(5, 'Controle de Acessos', 0, 1000, 'Controle de Acessos e Assiduidade'),
(6, 'Construção Civil', 0, 1000, 'Construçao Civil    '); 
```

代码

```
 <?php
  include '../lib/configuration.php';

  $mysqli = new mysqli($dbhost, $dbuser, $dbpwd, $database);

  /* check connection */
  if (mysqli_connect_errno()) 
  {
      printf("Connect failed: %s\n", mysqli_connect_error());
      exit();
  }

  $query = "SELECT * FROM categories";
  if ($result = $mysqli->query($query)) 
  {

    /* fetch associative array */
    while($row = $result->fetch_assoc())
    { 
      $arrayCategories[$row['catid']] = array("pid" => $row['catparent'], "name" =>  $row['catname']);   
    }

    //createTree($arrayCategories, 0);
    function createTree($array, $currentParent, $currLevel = 0, $prevLevel = -1) 
    {
      foreach ($array as $categoryId => $category) 
      {
        if ($currentParent == $category['pid']) 
        {                       
            if ($currLevel > $prevLevel) echo " <ul> "; 
            if ($currLevel == $prevLevel) echo " </li> ";
            echo '<li id="'.$categoryId.'" onclick=child(this.id);><span>'.$category['name'].'</span>';
            if ($currLevel > $prevLevel) { $prevLevel = $currLevel; }
            $currLevel++; 
            createTree ($array, $categoryId, $currLevel, $prevLevel);
            $currLevel--;               
        }   
      }
      if ($currLevel == $prevLevel) echo " </li>  </ul> ";
    }   
?>
<div id="content" class="general-style1">
<?php
   if($result->num_rows!=0)
   {
  ?>
  <ul>
      <li id="0" class="root"><span>Categories</span>
      <?php createTree($arrayCategories, 0); ?>
  </li>
  </ul>
  <?php
    }
  }
  ?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:42:41.993

这应该对您有用，但您需要修改 cat_tree_array 中的字段名称。

```
function cat_tree_array($items) {
    $childs = array();
    foreach ($items as &$item) {
        $item = (array) $item;
        $childs[$item['id_parent']][] = &$item;
    }
    unset($item);

    foreach ($items as &$item) {
        $item = (array) $item;
        if (isset($childs[$item['id']])) {
            $item['_subs'] = $childs[$item['id']];
        }
    }
    return $childs[0];
} 
```

用法：

```
<?
// items: all data that you fetch from db (so just an array)
// e.g
// $qry = mysql_query("select * from categorys");
// while ($fch = mysql_fetch_array($qry)) $items[] = $fch;
$tree = cat_tree_array($items); 
?> 
```

HTML 列表：

```
<ul>
<? foreach ($tree as $t): ?>
    <li><?=$t['category_name']?></li>
    <? if (!empty($t['_subs'])): ?>
        <ul>
            <? foreach ($t['_subs'] as $s): ?>
                <li><?=$s['category_name']?></li>
            <? endforeach; ?>
        </ul>
    <? endif; ?>
<? endforeach; ?>
</ul> 
```

HTML 选择：

```
<select>
<? foreach ($tree as $t): ?>
    <option><?=$t['category_name']?></option>
    <? if (!empty($t['_subs'])): ?>
        <optgroup>
            <? foreach ($t['_subs'] as $s): ?>
                <option><?=$s['category_name']?></option>
            <? endforeach; ?>
        </optgroup>
    <? endif; ?>
<? endforeach; ?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:13:04.093

@qeremy

这是您的代码适应（尝试）我的 SQL：

```
<?php
  include '../lib/configuration.php';

  function cat_tree_array($items) {
      $childs = array();
      foreach ($items as &$item) {
          $item = (array) $item;
          $childs[$item['catparent']][] = &$item;
      }
      unset($item);

      foreach ($items as &$item) {
          $item = (array) $item;
          if (isset($childs[$item['id']])) {
              $item['catid'] = $childs[$item['id']];
          }
      }
      return $childs[0];
  }  

  $mysqli = new mysqli($dbhost, $dbuser, $dbpwd, $database);

  /* check connection */
  if (mysqli_connect_errno()) 
  {
      printf("Connect failed: %s\n", mysqli_connect_error());
      exit();
  }

  $query = "SELECT * FROM categories";
  if ($result = $mysqli->query($query)) 
  {

  /* fetch associative array */
  while($row = $result->fetch_assoc())
  { 
    $tree = cat_tree_array($items);
  } 
  ?>

  <select>
  <?php foreach ($tree as $t): ?>
      <option><?php = $t['catname']?></option>
      <?php if (!empty($t['catid'])): ?>
          <optgroup>
              <?php foreach ($t['catid'] as $s): ?>
                  <option><?php = $s['catname']?></option>
              <?php endforeach; ?>
          </optgroup>
      <?php endif; ?>
  <?php endforeach; ?>
  </select> 
```

我收到一个错误：

解析错误：语法错误，第 43 行 D:\Web Data\mydl\admin\test1.php 中的意外 '='

这是第 43 行：

```
 <option><?php = $t['catname']?></option> 
```

我不是 PHP 专家，但真的不明白那段代码

# ruby - pack() 和 unpack() 在 Ruby 中是如何工作的

> ID：14293926
> 
> 赞同：5
> 
> 时间：2013-01-12T13:48:43.803
> 
> 标签：ruby, binary-data, ruby-1.9.3, pack, unpack

在 Ruby 中为什么我们需要数组***`Packing`***？如何***`directive`***帮助做这样的包装？

我在控制台中运行了一些代码，以查看指令在数组打包中的外观和方式。但是每个指令的输出几乎相同。那么在核心上它们有什么不同呢？

```
irb(main):003:0> n = [ 65, 66, 67 ]
=> [65, 66, 67]
irb(main):004:0> n.pack("ccc")
=> "ABC"
irb(main):005:0> n.pack("C")
=> "A"
irb(main):006:0> n.pack("CCC")
=> "ABC"
irb(main):007:0> n.pack("qqq")
=> "A\x00\x00\x00\x00\x00\x00\x00B\x00\x00\x00\x00\x00\x00\x00C\x00\x00\x00\x00\
x00\x00\x00"
irb(main):008:0> n.pack("QQQ")
=> "A\x00\x00\x00\x00\x00\x00\x00B\x00\x00\x00\x00\x00\x00\x00C\x00\x00\x00\x00\
x00\x00\x00"
irb(main):009:0> n.pack("SSS")
=> "A\x00B\x00C\x00"
irb(main):010:0> n.pack("sss")
=> "A\x00B\x00C\x00"
irb(main):011:0> 
```

现在我可以从`n.pack("SSS") and n.pack("sss");n.pack("ccc") and n.pack("CCC"); n.pack("qqq") and n.pack("QQQ")`提供相同输出的控制台中看到。那么差异在哪里呢？

并且文档也没有涵盖每个指令在现实生活程序中如何工作的一些示例。我也对以下指令感到困惑，因为我不知道如何测试它们？他们的任何小代码对我也有帮助：

*   `S_, S!`
*   `S> L> Q>`
*   `S!< I!<`
*   `L_, L!`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-12T14:18:14.270

你在问一个关于计算机如何在内存中存储数字的基本原理的问题。例如，您可以查看这些以了解更多信息：

[http://en.wikipedia.org/wiki/Computer_number_format#Binary_Number_Representation](http://en.wikipedia.org/wiki/Computer_number_format#Binary_Number_Representation)
[http://en.wikipedia.org/wiki/Signed_number_representations](http://en.wikipedia.org/wiki/Signed_number_representations)

`S`以和之间的区别为例`s`；两者都用于打包和解包 16 位数字，但一个用于有符号整数，另一个用于无符号整数。当您想将字符串解包回原始整数时，这具有重要意义。

`S`: 16 位无符号数表示数字 0 - 65535 (0 到 (2^16-1))
`s`: 16 位有符号整数 -32768 - 32767 (-(2^15) 到 (2^15-1)) (一用于符号的位）

可以在这里看到区别：

```
# S = unsigned: you cannot pack/unpack negative numbers
> [-1, 65535, 32767, 32768].pack('SSSS').unpack('SSSS')
=> [65535, 65535, 32767, 32768]   

# s = signed: you cannot pack/unpack numbers outside range -32768 - 32767
> [-1, 65535, 32767, 32768].pack('ssss').unpack('ssss')
=> [-1, -1, 32767, -32768] 
```

因此，您看到您必须知道数字在计算机内存中的表示方式才能理解您的问题。有符号数使用一位来表示符号，而无符号数不需要这个额外的位，但你不能表示负数。

这是数字在计算机内存中如何表示为二进制的非常基础的知识。

例如，您需要打包的原因是当您需要将数字作为字节流从一台计算机发送到另一台计算机时（例如通过网络连接）。您必须将整数打包成字节才能通过流发送。另一种选择是将数字作为字符串发送；然后你将它们编码和解码为两端的字符串，而不是打包和解包。

或者假设您需要从 Ruby 调用系统库中的 C 函数。用 C 编写的系统库对基本整数（int、uint、long、short 等）和 C 结构（struct）进行操作。在调用此类系统方法之前，您需要将 Ruby 整数转换为系统整数或 C 结构。在那些情况下`pack`，`unpack`可以用来接口哪些这样的方法。

* * *

关于附加指令，它们处理如何表示打包字节序列的字节顺序。请参阅此处了解字节序的含义及其工作原理：

[http://en.wikipedia.org/wiki/Endianness](http://en.wikipedia.org/wiki/Endianness)

简而言之，它只是告诉打包方法应该将整数转换为字节的顺序：

```
# Big endian
> [34567].pack('S>').bytes.map(&:to_i)
=> [135, 7]   
# 34567 = (135 * 2^8) + 7

# Little endian
> [34567].pack('S<').bytes.map(&:to_i)
=> [7, 135]   
# 34567 = 7 + (135 * 2^8) 
```

# objective-c - NSPopover 和 NSButton 控件

> ID：14293934
> 
> 赞同：1
> 
> 时间：2013-01-12T13:49:16.850
> 
> 标签：objective-c, cocoa, osx-lion, nspopover

我创建了一个 StatusBar 应用程序。它使用自定义视图并利用 NSPopover 显示一些控件。我熟悉 NSTextfield 焦点问题。这不会引起任何疼痛。但是我在 NSPopover 中也有一个按钮。此按钮不接收任何操作并且不（视觉上）响应任何点击。有什么建议如何使按钮可聚焦吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:56:45.823

您是否尝试过`[NSApp activateIgnoringOtherApps:NO]`在显示弹出框之前调用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:33:24.137

NSPopover 不会成为第一响应者，除非有一个控件来设置它（例如 NSTextView）。我认为这不是 NSButton 的情况，所以请尝试`[myPopover makeFirstResponder]`。

# jboss - 同一台机器上具有相同端口的 Jboss 服务器

> ID：14293935
> 
> 赞同：1
> 
> 时间：2013-01-12T13:49:17.523
> 
> 标签：jboss

我们可以在同一台机器上运行多个具有相同端口的 Jboss Server 实例吗？如果是怎么办？

谢谢阿马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:30:39.620

当然，让两个服务监听同一个端口的唯一方法是确保它们绑定到不同的 IP 地址。如果您认为可以在同一接口上配置多个地址，只需使用标志“ `-b <address>`”启动每个 JBoss 实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:58:08.937

是的你可以。您还需要运行一个 Apache 服务器实例并将其用作 JBoss 集群的负载平衡器，并使用 mod_proxy 或 mod_ajp 插件在多个 JBoss 实例之间进行负载平衡。要在 Windows 上启动多个 JBoss 5 或 JBoss 6 实例，请[在此处使用我的脚本](https://gist.github.com/4366912) （但您必须自己增强配置以启用集群和 Apache 负载平衡器）。另外，我的启动脚本需要你从 YAJSW 服务器包装器项目中下载东西。

我经常将多个 jboss 服务器作为一个集群运行，并且我总是在端口 80 和 443 上运行一个 Apache 服务器，以平衡 JBoss 实例的负载。 [这是我博客中的示例帖子](http://thegreenoak.blogspot.com/2011/05/jboss-load-balanced-cluster-on.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T21:52:52.710

是的，如果您的机器有多个网络接口（IP 地址）并且您将每个 Jboss 实例绑定到一个不同的 IP，您可以这样做。例如，如果您的机器有两个网络接口：192.168.1.1 和 192.168.1.2，您可以使用以下命令运行每个实例：

```
./run.sh -c instance1 -b 192.168.1.1
./run.sh -c instance2 -b 192.168.1.2 
```

但最常见的情况是在同一台机器上运行多个实例，每个实例使用不同的端口，您可以使用 Jboss Ports Bindings 来实现。

在此 JBoss Web 中查找详细信息：[在一台机器上配置多个 JBoss 实例](https://community.jboss.org/wiki/ConfiguringMultipleJBossInstancesOnOneMachine)。

# linux - 如何使用 nslookup 命令在 linux 中检查电子邮件域

> ID：14293941
> 
> 赞同：1
> 
> 时间：2013-01-12T13:49:53.173
> 
> 标签：linux, fedora16

如何使用`nslookup`命令在 Fedora Linux 中检查电子邮件域？我在终端中使用了以下命令：

```
nslookup -query=mx com3263@dcs.ruh.ac.lk 
```

这对我不起作用。正确的命令是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:13:55.943

您可以查询域部分，而不是完整的电子邮件地址。

```
nslookup -query=mx dcs.ruh.ac.lk 
```

对于编程使用，`dig +short`或者某些版本`host`具有比`nslookup`.

并非所有域都提供明确的 MX 记录；在这种情况下回退到 A 记录（即尝试直接连接到主机）。

# c++ - Qt Creator 中 C++ 注释的自动换行

> ID：14293946
> 
> 赞同：4
> 
> 时间：2013-01-12T13:50:26.043
> 
> 标签：c++, qt-creator

[在我找到的这个线程中，](http://www.zeusedit.com/zforum/viewtopic.php?t=316&sid=e3962b1ee6b785ed7c1d31b4e3fc0450)我正在寻找的东西得到了很好的解释。从中：

```
// This is my comment. But it has been edited 
// so now 
// some lines are long and others are 
// very short. 
// Personally, I find this exceedingly ugly and I really 
// can't tolerate it. However, having to manual fix this 
// sort 
// of thing is undesirable. 
```

在线程中，他们说 emacs 有这个称为*Mq*的功能，它会在保留开头的同时重新格式化注释`//`。

Qt Creator 有类似的功能吗？或者，如果没有，是否有一个（免费）独立程序可以让我在写完评论后复制并粘贴到 Qt Creator 中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T15:56:35.690

`Ctrl+E,R`当光标在注释块中时按下。这会根据需要添加和删除`//`。

但它有一个怪癖 - 如果它是单行注释，它不会添加`//`新行。`//`解决方法是在按下之前在下面添加一行`Ctrl+E,R`。

您还需要确保有一个空行将注释与代码分开，否则它也会包装代码。

这是不好的：

```
int a = 5;
// something something
// something something
int b = 10; 
```

它将被错误地包装到

```
int a = 5; // something something // something something int b = 10; 
```

这很好：

```
int a = 5;

// something something
// something something

int b = 10; 
```

# linker - SDL_ttf 链接错误代码::Blocks(Windows)

> ID：14293949
> 
> 赞同：1
> 
> 时间：2013-01-12T13:50:53.997
> 
> 标签：linker, sdl, codeblocks, sdl-ttf

我已经按照lazyfoo.net 上的教程如何将 SDL_ttf 与 Code::Blocks(windows) 链接起来，但是出了点问题。我收到这些错误：

```
C:\SDL_ttf-2.0.11\include\SDL_ttf.h|30|error: SDL.h: No such file or directory|
C:\SDL_ttf-2.0.11\include\SDL_ttf.h|31|error: begin_code.h: No such file or directory|
C:\SDL_ttf-2.0.11\include\SDL_ttf.h|247|error: close_code.h: No such file or directory|
||=== Build finished: 3 errors, 0 warnings ===| 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:18:00.053

在 SDL_ttf.h 更改

```
#include"SDL.h"
#include"begin_code.h"
#include"close_code.h" 
```

至

```
#include<SDL/SDL.h>
#include<SDL/begin_code.h>
#include<SDL/close_code.h> 
```

# javascript - 窗口调整大小时视图中断

> ID：14293952
> 
> 赞同：0
> 
> 时间：2013-01-12T13:51:03.263
> 
> 标签：javascript, jquery, html, css, window

我用正方形创建了一个页面。方块组合成一个特定的单词。但是当我调整窗口大小时，方块会随意打乱它们的位置。如何更改我的`CSS`或`javascript`以便正方形在调整窗口大小时保留其原始位置？

您可以在以下位置查看该页面：[http ://www.tryst-iitd.com/13/beta](http://www.tryst-iitd.com/13/beta)

我已经包含以下代码来处理调整大小，但问题仍未解决。

```
<script type="text/javascript">
$(function () {
    var screenWidth = $(window).width() + "px";
    var screenHeight = $(window).height() + "px";
    $("#container").css({
        width: screenWidth,
        height:screenHeight,
    });
    $(window).resize( function () {
        var screenWidth = $(window).width() + "px";
        var screenHeight = $(window).height() + "px";
        $("#container").css({
            width: screenWidth,
            height:screenHeight,
        });
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:36:26.510

您的问题是您的 css 边距是固定宽度，因此即使正方形宽度以 % 为单位，边距也会导致此问题。例如，尝试禁用`wrap1`和`wrapalphabet`css 类，您会发现您的设计响应速度更快。

您可能必须重新考虑处理边距/填充的方式才能获得预期的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:42:21.543

正方形被打乱了，因为每当您调整窗口大小时，容器的宽度都会自动调整。为正方形设置一个固定值或设置一个最小宽度，容器应该可以解决问题。正方形宽度以 % 为单位。

另外，window resize 事件本身是没有用的，因为 div (id=container) 是根据 body 标签的宽度调整的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T15:17:40.603

以百分比设置正方形的位置和大小，您的调整大小代码将正常工作。

另外，设置`min-width`/ `min-height`CSS 属性会防止你的方块太小。

# java - 如何知道连接到系统的输入设备是什么

> ID：14293956
> 
> 赞同：2
> 
> 时间：2013-01-12T13:51:19.117
> 
> 标签：java, hardware

我只是想知道连接到系统的输入设备和输出设备是什么。是否有任何 api 来获取有关使用 java 的输入/输出设备的信息？

**编辑**

独立于任何操作系统。

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:58:55.283

要查找连接到系统的 USB 设备，您可以使用[jUSB](http://jusb.sourceforge.net/)。本文有更多[关于](http://www.ibm.com/developerworks/library/j-usb/index.html)如何使用 api 的深入信息。特别是要查找所有 USB 设备（从文章中稍作修改）：

```
Host host = HostFactory.getHost();
// Obtain a list of the USB buses available on the Host.
Bus[] bus  = host.getBusses();

// Traverse through all the USB buses.
for (int i = 0; i < bus.length; i++) {
    // Access the root hub on the USB bus and obtain the number of USB ports available on the root hub.
    Device root = bus[i].getRootHub();
    int totalPorts = root.getNumPorts();

    // Traverse through all the USB ports available on the 
    // root hub. It should be mentioned that the numbering 
    // starts from 1, not 0.
    for (int j=1; j<=total_port; j++) {
        // Obtain the Device connected to the port.
        Device device = root.getChild(j);
        if (device != null) {
                    // USB device available, do something here.
        }
    }
} 
```

同样，您可以使用 MIDI 系统的 api 来查找连接的 MIDI 设备，有关更多信息，请参阅[java 教程](http://docs.oracle.com/javase/tutorial/sound/accessing-MIDI.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:50:35.567

我认为您应该通过 java 尝试命令行`Runtime.getRuntime().exec(command);`

根据此站点[http://michaelminn.com/linux/command_line](http://michaelminn.com/linux/command_line) 以下命令应返回：

```
lspci: Lists information about devices connected to the internal PCI busses.

lspci -vv: Full dump of information. 
```

所以

```
String command="lspci"; 
```

从 Windows 中您可能需要下载 DevCon 命令！[http://support.microsoft.com/kb/311272/EN-US](http://support.microsoft.com/kb/311272/EN-US)

所以

```
String command="devcon find"; 
```

# java - 为什么 Java 内部编译器和 IndexOf() 为字符串返回不同的索引？

> ID：14293958
> 
> 赞同：-2
> 
> 时间：2013-01-12T13:51:57.307
> 
> 标签：java, string, indexing

我的文件包含：

```
public class MyC {
public void MyMethod()
        {
            **System.out.println("My method has been accessed")** // ; is expected

            System.out.println("My method has been accessed");
} 
```

}

当我在这个文件上调用 Eclipse 编译器时，它返回：

```
Code: compiler.err.expected
Kind: ERROR
Line Number: 4
End position: 99
Position: 99 
```

但是，当我尝试插入缺少的字符串“；”时 在第 4 行的位置 99 处，它得到“索引超出范围异常”。

我确实在文件中手动计数，并且文件中甚至不存在索引 99。如何解决此问题。

**这是我在特定位置替换的程序：**

```
try {

             int num[] = {4}; //Line Numbers

             String[] VALUES = new String[] {";"}; //Correct Solutions

             //String[] VALUES1 = new String[] {"ic"}; //To Replace With

             int [] StartIndex ={99};

             int [] EndIndex ={99};
             FileInputStream fs= new FileInputStream("C:\\Users\\Antish\\Desktop\\MyC1.java");
             BufferedReader br = new BufferedReader(new InputStreamReader(fs));

             FileWriter writer1 = new FileWriter("C:\\Users\\Antish\\Desktop\\Test_File1.txt");

             String line;
             String line1 = null;

             String done = null;
             Integer count =0;

             line = br.readLine();
             count++;

             while(line!=null){

                 boolean exists = false;
                 for(int index =0;index<num.length;index++){
                     if(count == num[index]){ //Line Count Equals

                             exists = true;
                             StringBuffer buf = new StringBuffer(line);

                             buf.replace(StartIndex[index], EndIndex[index], VALUES[index]);//Get Positions From Array oF Indexes
                             done = buf.toString();
                             writer1.write(done+System.getProperty("line.separator"));

                     }
                 }

                 if (!exists)
                     writer1.write(line+System.getProperty("line.separator"));

                 line = br.readLine();

                 count++;

                 } 
```

**当我运行上面的程序时，我得到了这个：**

![在此处输入图像描述](../Images/eebb8cc318c55cf4522957bf449b8c58.png)

**该程序运行良好，并且确实替换了特定索引处的字符串。我担心的是为什么 Java 编译器会从文件中返回如此大的位置。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:58:49.063

```
int [] StartIndex ={99}; 
```

创建一个包含一个值为 99 的元素的数组。我不确定您要做什么，但我认为您可能想要这个：

```
int[] StartIndex = new int[99]; 
```

# ruby - 当尝试通过 Watir 中的 x-path 来单击 jquery [+} 树时，我收到以下错误错误的参数数量（3 for 1）（ArgumentError）

> ID：14293960
> 
> 赞同：0
> 
> 时间：2013-01-12T13:52:05.270
> 
> 标签：ruby, watir

当尝试通过 Watir 中的 x-path 来单击 jquery [+} 树时，我收到以下错误错误的参数数量（3 for 1）（ArgumentError）

```
When /^Go to e-Care and search for the policy created$/ do

link = element_by_xpath(String("//{0}[contains(normalize-space(text()),{1})]", "a",`enter code here` "Actions"))
link_parent = link.element_by_xpath((".."))
plus_div = link_parent.element_by_class(("expandable-hitarea"))
plus_div.click

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:36:28.620

当需要单个参数时，您将多个参数传递给 String.new：

```
element_by_xpath(String("//{0}[contains(normalize-space(text()),{1})]", "a",`enter code here` "Actions")) 
```

例子：

```
String.new("foo")
=> "foo"
String.new("foo", "bar")
=>  wrong number of arguments (2 for 0..1) (ArgumentError) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:25:02.170

在 Watir 中，您的步骤将写为：

```
When /^Go to e-Care and search for the policy created$/ do
  link = @browser.link(:text => "Actions")
  link_parent = link.parent
  plus_div = link_parent.element(:class => "expandable-hitarea")
  plus_div.click
end 
```

这假定您的 watir 浏览器对象存储在`@browser`实例变量中。

# php - 使用第二个选择标签的值填充第三个选择标签，第二个选择标签的值使用第一个选择标签从数据库中获取

> ID：14293961
> 
> 赞同：0
> 
> 时间：2013-01-12T13:52:05.027
> 
> 标签：php, ajax

我使用 Ajax 和 abc.php（代码如下）来填充第二个选择标签的值，但我无法填充第三个选择标签，它应该出现在选择第二个选择标签之后。任何建议将不胜感激

```
<?php
$q=$_GET["q"];
include "localhost.php";
$sql="SELECT * FROM books WHERE class = '".$q."'";
$result = mysql_query($sql);
if(mysql_num_rows($result) > 0)
{
  while($row = mysql_fetch_array($result))
  {
     echo "<select name=\"name\">
           <option>Select subject
           </option>";
    echo "<option>" . $row['name'] ."</option>";
    echo "</select>";
  }          
}
else
{
   echo "error";
}

mysql_close($con);
?> 
```

我的html代码是

```
<?php 
    include "menu.php";
    include "localhost.php";

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<script>
<!--Code for selecting class-->
function showUser(str)
{
if (str=="Select class:")
  {
  document.getElementById("txtHint").innerHTML="Select any class";
  return;
  }
  if (str=="Select cla:")
  {
  document.getElementById("txtHint1").innerHTML="Select any cla";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }

  }
xmlhttp.open("GET","select11.php?q="+str,true);
xmlhttp.send();
}
<!--End of Code for selecting class-->

</script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>

        <link type="text/css" href="style.css" rel="stylesheet" />
</head>

<body>

        <div id="sn">

            <ul class="crumbs">
                <li class="first"><a href="iindex.php" style="z-index:9;"><span></span>Home</a></li>
                <li><a href="#" style="z-index:8;">Books</a></li>
                <li><a href="#" style="z-index:7;">Sale Books</a></li>
            </ul>

    </div>
    <div id="newad">
<fieldset>
    <legend><strong>Sale Books &amp; Stationary</strong></legend>
    <form >
      <table width="499" >
        <tr>
          <td width="96">Select Class:</td>
          <td width="139"><select required="required" x-moz-errormessage="Select the Class" name="class" id="select" onchange="showUser(this.value)">
            <option  selected="selected">Select class:</option> 
```

胡说八道

是的，我知道先生，while 循环会给我无数的选择标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:08:50.493

它应该是

```
if(mysql_num_rows($result) > 0)
{
    echo "<select name=\"name\"><option>Select subject</option>";
    while($row = mysql_fetch_array($result))
    {         
         echo "<option>" . $row['name'] ."</option>";

    }
  echo "</select>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:08:06.243

你能显示你的html吗？

尝试添加`onchange="someFunction()"`第二个选择标记，其中`someFunction()`是一个使用 ajax 填充第三个选择的 javascript 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T14:08:57.457

你的问题没有意义，但我可以建议你在使用之前检查你的变量是否设置并清理你拥有的 sql-injection `example.com?q=' or '1=1`。目前，您的代码将做的是为每个返回的结果创建一个新的选择框，您需要在循环外初始化选择，然后在循环内插入选项：

```
<?php
$q = !empty($_GET["q"])?$_GET["q"]:null;

include "localhost.php";

if($q != null){
    $sql="SELECT * FROM books WHERE class = '".mysql_real_escape_string($q)."'";

    $result = mysql_query($sql);

    $sel = '<select name="name"><option>Select subject</option>';
    if(mysql_num_rows($result) > 0){
        while($row = mysql_fetch_array($result)){
            $sel .= "<option>" . $row['name'] ."</option>";
        }
    }else{
        $sel .= '<option>No Books</option>';
    }
    $sel .= "</select>";

    echo $sel;
}
?> 
```

# android - 尽管手动更改附加内容，但仍会一次又一次触发相同的未决意图实例

> ID：14293964
> 
> 赞同：0
> 
> 时间：2013-01-12T13:52:21.627
> 
> 标签：android, android-intent

我必须多次执行一项任务，任务是广播一个意图，该意图将被不同的应用程序拦截。让我们说从 App **Sender**到**Receiver**。在 Receiver 应用程序中接收意图工作正常，我已经测试并保证：

我是怎么做的，我在 Sender 应用程序中创建了一个广播接收器，动作为 SENDER_ACTION。`frequency`我用这个动作创建了一个意图，用 key和 value设置了一个额外的`4`。从中获取 PendingIntent 并设置 10 秒的警报，并触发此意图。

想法是发送者应用程序将收到此意图，将向接收者应用程序触发所需的意图，然后将**频率**值减少 1，再次将其设置为意图，创建待处理的意图和警报并再次触发。

因此，理想情况下，这个频率计数器应该达到 0 并且进程应该终止。

我可以看到，在设置降低的**频率**值时，它正在发生（在日志中），但是当我收到相同的未更改值时。

我怀疑挂起的意图实例会一次又一次地被触发。有人可以帮助我为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T13:58:36.043

如果我不得不猜测——我猜，因为你没有提供源代码——那是因为你没有将正确的标志传递给`getBroadcast()`（或者你`PendingIntent`用来获取`PendingIntent`实例的任何工厂方法）。请记住，默认情况下，Android 会缓存`PendingIntent`对象并将重用它们，而它们的内部`Intent`额外内容未修改。考虑[`FLAG_UPDATE_CURRENT`](http://developer.android.com/reference/android/app/PendingIntent.html#FLAG_UPDATE_CURRENT)作为最后一个参数传递给`getBroadcast()`.

# python - Python 查找 rgb

> ID：14293965
> 
> 赞同：0
> 
> 时间：2013-01-12T13:52:41.030
> 
> 标签：python

我使用 Python，我想知道这是否可能。该 python 制作了我的屏幕图片，如果这个红色框 rgb 值如下：12、32 54。然后 python 运行一个代码。

[http://www.upload.ee/image/2978408/omo.jpg](http://www.upload.ee/image/2978408/omo.jpg)

请帮帮我；（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:55:38.580

你应该使用`PIL`图书馆。

链接： http: [//www.pythonware.com/products/pil/](http://www.pythonware.com/products/pil/)

```
from PIL import Image

im = Image.open("image.jpg")

pix = im.load()
print pix[x,y] 
```

您必须先安装`PIL`。

感谢[科斯](https://stackoverflow.com/users/399317/kos)的更新...

使用`ImageGrab`，代码将如下所示：

```
import PIL.ImageGrab

# pixel color at x, y
print PIL.ImageGrab.grab().load()[x, y] 
```

请注意，`ImageGrab`仅适用于 Windows。

# mysql - 如何将谷歌地图的位置存储和检索到mysql数据库中

> ID：14293967
> 
> 赞同：0
> 
> 时间：2013-01-12T13:52:55.100
> 
> 标签：mysql, database, google-maps

对不起，我对谷歌地图非常陌生，因此我需要一些帮助。我想存储和检索我在谷歌地图中输入和显示的位置。

任何启动让我让我去？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:57:21.960

试试 Google 地球，它会以 kml 格式保存位置，并且您可以从外部来源向其提供数据。如果您已登录，您也可以在 Google 地图中添加标记。否则您没有提供足够的信息

# android - 在android中使用用户名进行Skype通话

> ID：14293974
> 
> 赞同：0
> 
> 时间：2013-01-12T13:53:52.650
> 
> 标签：android, skype

我已经知道使用电话号码进行 Skype 通话，但我无法使用 Skype 用户名进行 Skype 通话，请帮助我，谢谢

使用电话号码时请查看我的代码 Skype 呼叫：

```
Intent skype_intent = new Intent("android.intent.action.CALL_PRIVILEGED");
    skype_intent.setClassName("com.skype.raider","com.skype.raider.Main");
    skype_intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
    skype_intent.setData(Uri.parse("tel:+91//phone number")); 
    startActivity(skype_intent); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T14:32:39.920

您可以像这样呼叫另一个 Skype 用户：

```
Intent skype = new Intent("android.intent.action.VIEW");
skype.setData(Uri.parse("skype:" + user_name));
startActivity(skype); 
```

对于视频通话：

```
Uri.parse("skype:" + user_name + "?call&video=true") 
```

# header - 如何使用 iptables 扩展标记发送到服务器的数据包？

> ID：14293977
> 
> 赞同：1
> 
> 时间：2013-01-12T13:53:59.553
> 
> 标签：header, debian, iptables, packets

我想使用 iptables 扩展（或 IPSec 工具？）**来标记（在发送时）和匹配（在接收时）**我的笔记本电脑和我的服务器之间的数据包，使 SSH 识别更加强大。

我不需要 VPN，只需在 IP 选项标头（或 AH 字段？）中发送附加信息。..同时与服务器交谈。

如果可以**仅对 Debian 使用 iptables 插件**（首先更改标头，然后比较远程主机上的密钥），那就太好了。

*我在 Google 上搜索了一天，发现诸如检查协议 AH 和 ESP 等主题；使用 iptables 字符串匹配过滤器；Payload mangling 等 - 但现在我无法理解最重要的事情：在两台计算机上为 Debian 安装哪个数据包:)*

我的梦想是在 SSH 握手开始之前在端口 22（内部没有签名）上使用 iptables 阻止连接。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T06:51:41.557

我又做了功课，在线大师告诉我使用 ToS 字段，“在通过全球网络传输时保持不变”。

如何设置它的示例：

```
iptables -t mangle -A PREROUTING -p TCP --dport 22 -j TOS --set-tos 0x10 
```

*而且它是一个很小的字段（256 位），填满了服务信息，所以没有多少空间可以玩，你必须非常小心。但是还是！..*

稍后，可以使用类似的东西在接收机器上读取 ToS 值

```
iptables -A INPUT -p tcp -m tos --tos 0x16 
```

# canvas - 在 AppInventor 中使 ImageSprite 可见/不可见

> ID：14293978
> 
> 赞同：1
> 
> 时间：2013-01-12T13:54:03.457
> 
> 标签：canvas, app-inventor

我在我的屏幕上创建了一个 Canvas 并放置了一个具有 de Canvas 宽度和高度的 ImageSprite。现在当 ImageSprite 被触摸时，它的可见性将会改变。只要我在它消失并且不可见时触摸它，它就可以正常工作。但是当我再次触摸它时，什么也没有发生，尽管它应该再次可见。

这是我的 AppInventor 代码的快照：

[图像精灵快照](http://s7.directupload.net/file/d/3133/mlxlt6j7_jpg.htm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:40:13.203

问题是，由于它被隐藏了，之后您将无法再单击它——因为它是隐藏的。

做两件事：

一：将您的 ImageSprite1 设置为具有特定的宽度和高度，而不是使用自动。

二：更改您的逻辑以使用 Picture 属性而不是 Visible 属性：

```
when ImageSprit1.Touched
ifelse ImageSprite1.Picture = Image.png
then-do set ImageSprite1.Picture to text 
else-do set ImageSprite1.Picture to text Image.png 
```

这样，当您触摸 ImageSprite 时，它​​会将“图片”设置为空，使其看起来像是隐藏的。（但如果你先指定宽度和高度，ImageSprite 将保留它的尺寸并且仍然可以再次触摸。当你再次触摸它时，它会再次显示它的图片。

确保将 Image.png 替换为您的实际图像的名称。

“文本”拼图位于块编辑器的“内置”选项卡下。

# java - Java 发送 Live Video InputStream 到 Red5 Media Server

> ID：14293979
> 
> 赞同：2
> 
> 时间：2013-01-12T13:54:17.897
> 
> 标签：java, inputstream, h.264, red5, rtmp

我有一个`InputStream`来自Java Socket的。这`InputStream`是一个 H.264 视频直播流。我想将此视频发送`InputStream`到 red5 媒体服务器，以便其他客户端可以观看。

我找到了这个例子

```
package com.ryong21.example.publisher;import java.io.File;
import java.io.IOException;
import java.util.Date;
import org.red5.server.messaging.IMessage;
import org.red5.server.stream.message.RTMPMessage;
import org.red5.server.stream.provider.FileProvider;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class Publisher {
            public static void main(String[] args) throws IOException, InterruptedException {

            Logger log = LoggerFactory.getLogger(Publisher.class);

            String publishName = "test";
            String localFile = "2.mp3";
            String host = "rtmpxn.91kge.com";
            int port = 1935;
            String app = "live";

            IMessage msg = null;
            int timestamp = 0;
            int lastTS = 0;

            PublishClient client = new PublishClient();

            client.setHost(host);
            client.setPort(port);
            client.setApp(app);                    

            client.start(publishName, "live", null);

            while(client.getState() != PublishClient.PUBLISHED){
                    Thread.sleep(500);
            }

            FileProvider fp = new FileProvider(new File(localFile));        

            Date begin = new Date();
            log.debug(begin.toString());

            while(true){
                    msg = fp.pullMessage(null);

                    if(msg == null){
                            log.debug("done!");
                            break;
                    }
                    timestamp = ((RTMPMessage)msg).getBody().getTimestamp();
                    Thread.sleep(timestamp - lastTS);
                    lastTS = timestamp;
                    client.pushMessage( msg);
            }      
            Date end = new Date();
            log.debug(end.toString());
            client.stop();
    } 
```

}`

我的问题是如何将它与 Sockets InputStream 一起使用，而不是 FileProvider 中使用的文件。InputStream 已经采用 H.264 编码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:36:56.747

好的，在深入挖掘视频流之后，我发现我首先必须将 InputStream 转换为容器格式文件。可能的容器格式是 .mp4 或 .flv

创建容器文件后，我现在可以将其发布到 red5 媒体服务器。

# perl - Perl 模块版本

> ID：14293982
> 
> 赞同：0
> 
> 时间：2013-01-12T13:54:35.720
> 
> 标签：perl, version, perl-module

`$HOME`我的 Web 服务器中安装了几个 perl 模块。用于运行 perl 5.8.8 的 Web 服务器，因此它们安装在`$HOME/perl/lib/perl5/5.8.8/...`

在服务器迁移期间，网络托管公司更改`perl`为，`5.10.1`但直到我的脚本开始失败时我才知道这一点。我设法通过将`5.8.8`树复制到它来进行快速的脏修复，`5.10.1`现在它似乎工作正常，但我想避免我的脚本将来像这样失败。

`5.8.8`即使 perl 版本再次升级，允许我的脚本使用文件夹下本地存储的模块的最佳方法是什么？

我可以在我的脚本中添加对预期 perl 版本的检查，如果它发生变化，我可以通过电子邮件发送给自己，但是到那时为时已晚，因为在我解决问题之前脚本可能已经失败了好几次。理想情况下，我想防止脚本完全失败。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T14:18:21.697

Depending on the amount of flexibility you have when configuring your environment you may want to use [Perlbrew](http://perlbrew.pl/).

to maintain an independent Perl installation at a specific version. This can avoid nasty surprises when the system-wide Perl installation changes.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T14:09:40.670

您真正应该做的是确保在新安装中安装了所需的模块。特别是对于 XS（C 级）模块，由于内核可能已更改，因此无法保证它们无需重新编译就可以在新版本的 Perl 上运行。

您应该创建一个`Makefile.PL`or `Build.PL`which 声明脚本的依赖关系，并且您的公司应该将其作为在服务器迁移时执行这些脚本的策略。

最后，是的，您可以检查`$^V`哪个是正在运行的 Perl。如果你在一个`BEGIN`块内执行它，它将在启动期间执行。事实上，您可以为您的（纯 perl）模块使用本地目录，然后使用该[`lib`](http://p3rl.org)模块指向它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T19:41:09.297

你为什么要移动文件？只需继续添加到 PERL5LIB 即可。

```
PERL5LIB=$HOME/perl/lib/perl5/5.10.1:$HOME/perl/lib/perl5/5.8.8 
```

我强烈建议您简单地使用[`perlbrew`](http://search.cpan.org/perldoc?perlbrew)在您的主目录中安装 Perl 的构建，而不是任由您的主机摆布。

# c - 失去对循环变量的依赖——循环优化

> ID：14293985
> 
> 赞同：0
> 
> 时间：2013-01-12T13:55:01.403
> 
> 标签：c, optimization

我有以下嵌套循环计算：

```
int aY=a*Y,aX=a*X;
for(int i=0; i<aY; i+=a)
{
    for(int j=0; j<aX; j+=a)
    {
        xInd=i-j+offX;
        yInd=i+j+offY;
        if ((xInd>=0) && (xInd<X) &&
            (yInd>=0) && (yInd<Y) )
            {
             z=yInd*X+xInd;
            //use z
            }
     }
} 
```

我想尽可能地失去对`i`,`j`和`xInd`的依赖`yInd`。换句话说，我想“遍历”在循环中运行时接收到的所有值，`z`但不涉及帮助变量`i`、`j`和- 或者至少涉及最少数量的计算（最重要的是没有乘法）。我怎样才能做到这一点？欢迎提供其他使循环更高效的可能方法的提示。谢谢！`xInd``yInd`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:49:59.833

如果我们假设 offX 和 offY 为 0，并用 '<=' 替换你的 '<'，我们可以通过这样做去掉 i 和 j：

```
for (yInd = 0; yInd <= aX + aY; ++yInd)
    for (xInd = max(-yInd, -aX); xInd <= min(yInd, aY); ++xInd) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:02:54.580

如果我们将问题解读为如何最小化循环周围的迭代次数，我们可以采用以下方法。

约束：

```
(xInd>=0) && (xInd<X)
(yInd>=0) && (yInd<Y) 
```

允许使用来收紧 for 循环的边界。扩展`xInd`并`yInd`给出：

```
0 <= i - j + offX <= X
0 <= i + j + offY <= Y 
```

修复`i`允许我们将第二个循环边界重写为：

```
for(int i=0; i<aY; i+=a) {
    int lower = (max(i + offX - X, -i - offY) / a) * a; //factored out for clarity.
    int upper = min(i + offX, Y - i -offY);
    for(int j=lower; j<=upper; j+=a) { 
```

`offX`如果您对、`offY`、的可能值有更多了解，则可能`a`会进一步减少。`X``Y`

请注意，实际上您可能不想在没有先进行分析的情况下盲目地应用这种类型的优化（它可能会阻止编译器为您执行此操作，例如[gcc 石墨](http://gcc.gnu.org/wiki/Graphite)）。

**用作索引**

如果该值`z=yInd*X+xInd`用于索引内存，则通过确保内存访问是连续的以确保良好的缓存行为来获得更大的胜利。

当前`yInd`每次迭代都会发生变化，因此可能会导致缓存性能不佳。

这个问题的解决方案是首先计算和存储所有索引，然后使用这些索引在第二遍中执行所有内存操作。

```
int indicies[Y * X];
int index = 0;
for(...){
    for(...){
        ...
        indicies[index++] = z;
    }
}
// sort indicies
for(int idx = 0; idx < index; idx++){
    z = indicies[idx];
    //do stuff with z
} 
```

# ruby - Heroku 中 mongoid 的奇怪异常

> ID：14293987
> 
> 赞同：-1
> 
> 时间：2013-01-12T13:55:31.837
> 
> 标签：ruby, mongodb, heroku, mongoid, mongoid3

我不断收到heroku的错误。这是一个使用 Mongoid 的 Sinatra 应用程序。尽管我也在那里托管了一个 Rails 应用程序，但它不会导致任何错误，尽管它们具有完全相同的 mongoid.yml 文件。

这是heroku的日志显示异常

```
me@ubuntu:~/dev$ heroku logs
2013-01-12T13:51:09+00:00 app[web.1]: Moped::Errors::ConnectionFailure - Could not connect to any secondary or primary nodes for replica set <Moped::Cluster nodes=[<Moped::Node resolved_address="127.0.0.1:27017">]>
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/cluster.rb:258:in `with_secondary'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/cluster.rb:258:in `with_secondary'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/session/context.rb:43:in `query'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/cluster.rb:258:in `with_secondary'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/cluster.rb:258:in `with_secondary'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/cluster.rb:258:in `with_secondary'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/cluster.rb:258:in `with_secondary'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/cluster.rb:258:in `with_secondary'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/cluster.rb:258:in `with_secondary'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/cluster.rb:258:in `with_secondary'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/cluster.rb:258:in `with_secondary'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:1265:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/cluster.rb:258:in `with_secondary'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/session/context.rb:104:in `with_node'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:835:in `block (3 levels) in route!'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/cluster.rb:258:in `with_secondary'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/cluster.rb:258:in `with_secondary'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/controllers/sessions_controller.rb:38:in `block in <class:App>'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:936:in `dispatch!'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:1265:in `block in compile!'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:769:in `block in call!'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/cluster.rb:258:in `with_secondary'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/cluster.rb:261:in `with_secondary'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/cluster.rb:258:in `with_secondary'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/cluster.rb:258:in `with_secondary'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/bundler/gems/mongoid-c839bb60e5f9/lib/mongoid/contextual.rb:19:in `first'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:870:in `catch'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:834:in `block in route!'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:921:in `block in invoke'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/query.rb:114:in `first'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:851:in `route_eval'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:755:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-timeout-0.0.3/lib/rack/timeout.rb:16:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-timeout-0.0.3/lib/rack/timeout.rb:16:in `block in call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/timeout.rb:68:in `timeout'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:835:in `[]'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:921:in `catch'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:870:in `process_route'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:769:in `call!'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-protection-1.3.2/lib/rack/protection/base.rb:48:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:833:in `each'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-protection-1.3.2/lib/rack/protection/xss_header.rb:27:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/bundler/gems/mongoid-c839bb60e5f9/lib/mongoid/contextual/mongo.rb:186:in `first'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-protection-1.3.2/lib/rack/protection/json_csrf.rb:17:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:136:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:1471:in `synchronize'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-protection-1.3.2/lib/rack/protection/xss_header.rb:27:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/logger.rb:15:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:134:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/urlmap.rb:49:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-protection-1.3.2/lib/rack/protection/base.rb:48:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:99:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/urlmap.rb:49:in `each'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-protection-1.3.2/lib/rack/protection/path_traversal.rb:16:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:129:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:1389:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-protection-1.3.2/lib/rack/protection/base.rb:48:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:1389:in `block in call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/exceptional-2.0.33/lib/exceptional/integration/rack.rb:21:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:835:in `block (2 levels) in route!'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/commonlogger.rb:20:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/head.rb:9:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/cluster.rb:258:in `with_secondary'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/moped-1.3.2/lib/moped/cluster.rb:258:in `with_secondary'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:921:in `invoke'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:872:in `block in process_route'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:833:in `route!'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-protection-1.3.2/lib/rack/protection/base.rb:48:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/connection.rb:81:in `block in pre_process'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/bin/thin:6:in `<top (required)>'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/connection.rb:79:in `pre_process'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/server.rb:159:in `start'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/backends/base.rb:63:in `start'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `<main>'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/connection.rb:79:in `catch'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `load'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/connection.rb:39:in `receive_data'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/urlmap.rb:64:in `block in call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/connection.rb:54:in `process'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/controllers/controller.rb:86:in `start'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/runner.rb:152:in `run!'
2013-01-12T13:41:47+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/runner.rb:187:in `run_command' 
```

**mongoid.yml**

```
development:
  sessions:
    default:
      database: dev123
      hosts:
        - localhost:27017
      options:
        timeout: 20

production:
  sessions:
    default:
      uri: <%= ENV['MONGOHQ_URL'] %>
      options:
        skip_version_check: true 
```

**宝石文件**

```
gem "mongoid", git: "https://github.com/mongoid/mongoid.git" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:59:09.480

错误是应用程序无法连接到它期望运行的本地 mongo 实例。

如果您认为日志消息很长，那么您还没有看到 Java Spring 自动装配异常 =) 虽然在这种情况下，最上面的错误消息足以确定问题。

我刚刚让 Mongo HQ 在 Heroku 上使用我的 Rails 应用程序，所以我的建议是：

在您的项目目录中运行`heroku config`以检查您是否已定义 RACK_ENV=production 并且 MONGOHQ_URL 已由 Heroku 定义。

如果 MONGOHQ_URL 没有在 Heroku 上定义为环境变量，很可能你还没有跑过去`heroku addons:add mongohq:sandbox` 告诉 Heroku 你想要一个 Mongo HQ 实例。

如果 RACK_ENV=production 未定义，只需添加： `heroku config:add RACK_ENV=production`

在此之后，重新启动您的应用程序，`heroku restart`它应该可以工作。

Rails 应用程序（而不是 Sinatra）的仅供参考，RACK_ENV 变为 RAILS_ENV。

# jquery - 具有整页叠加效果的滑动搜索框

> ID：14293988
> 
> 赞同：0
> 
> 时间：2013-01-12T13:55:33.387
> 
> 标签：jquery, overlay, slide, search-box

我想在我自己的网站上实现这种搜索框（点击顶部菜单中的“cerca”）： http: [//www.solidstudio.it/#](http://www.solidstudio.it/#)。

点击时这种滑动水平效果如何结合整页叠加效果显示搜索表单？

你知道一些教程或者你能帮我建立吗？

非常感谢您，Démian P.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:45:50.440

## *[jsBin 演示](http://jsbin.com/adaqek/1)*

我更喜欢悬停:)

**HTML：**

```
 <ul id="nav">

    <li><a href="#">portfolio. </a></li>
    <li><a href="#">agenzia. </a></li>
    <li><a href="#">contatti. </a></li>
    <li id="search"><a href="#">cerca.</a><input type="text" placeholder="Entra un termine" /></li>
    <li></li>

  </ul> 
```

**CSS：**

```
/* OVERLAY */

#overlay{
  position:absolute;
  z-index:9; /*input is 10*/
  display:none;
  width:100%;
  height:100%;
  background:url(http://www.solidstudio.it/wp-content/themes/solid/css/images/mask_black.png);
}

/* PAGE */
a{text-decoration:none;}

#nav{
  list-style:none;
  padding:0;
}
#nav li{
  position:relative;
  float:left;
  padding:40px 5px;
  cursor:pointer;
}
#nav li:hover{
  background:#000;
}
#nav li:hover a{
  color:#fff;
  border-bottom:1px solid #fff;
}
#nav a{
  display:block;
  border-bottom:1px solid #000;
  width:100px;
  margin:10px;
  color:#000;
  padding-bottom:10px;
}
li#search{
  z-index:10;
}
#nav input{
  display:none;
  position:absolute;
  top:50px;
  left:15px;
  background:transparent;
  border:none;
  border-bottom:1px solid #fff;
  height:31px;
  width:230px;
  color:#0ff;
  font-size:21px;
  font-family:Century Gothic, sans-serif;
  font-weight:400;
} 
```

**jQuery：**

```
$('#search').on('mouseenter mouseleave', function( e ){
  var mEnt      = e.type=='mouseenter';

  var opacity   = mEnt ? 1      : 0      ;
  var width     = mEnt ? 250    : 100    ;
  var show_hide = mEnt ? 'show' : 'hide' ;

  $(this).stop().animate({width: width}, 400);
  $('a', this).stop().fadeTo(400, !opacity);
  $('input', this).stop().fadeTo(400,opacity);
  $('#overlay').stop().fadeTo(400, opacity, function(){
    $(this)[show_hide]();
  });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:12:58.580

它只是一个滑动效果，只要用户鼠标聚焦在文本框内，jquery 就会通过动画增加文本框的宽度。这是一个例子

假设您的文本框是这样的：

```
<input type="text" id="textbox" style="width: 100px;" /> 
```

jquery 代码看起来像这样

```
$('#box').focus(function()
{
$(this).attr('data-default', $(this).width());
$(this).animate({ width: 150 }, 'slow');
}).blur(function()
{
var w = $(this).attr('data-default');
$(this).animate({ width: w }, 'slow');
}); 
```

data-default 用于存储临时值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T14:14:12.747

像这样的东西？[http://jsfiddle.net/McELm/](http://jsfiddle.net/McELm/)

当然你可以改进更多的风格。

html:

```
<a href="#">search</a>
<form action="#" type="post">
  <input type="text" class="search" value="search" />
</form> 
```

CSS：

```
* {
  font-family:Arial, Helvetica, sans-serif;
}
a {
  position:relative;
  background:#000;
  color:#FFF;
  text-decoration:underline;
  font-size:12px;
  height:20px;
  padding:5px 20px;
}

form {
  background:#000;
  position:relative;
  padding:5px 20px;
  margin:0;
  height:20px;
  width:38px;
  display:none;
}

form input.search {
  position:absolute;
  border:none;
  background:#000;
  color:#FFF;
  font-size:12px;
  height:20px;
  width:38px;
  text-decoration:underline;
  margin:0;
  padding:0;
} 
```

js：

```
$('a').click(function(e){
  e.preventDefault();

  $(this).hide();

  $('form, input.search').show().animate({width:'200px'},300,   function(){
    $('input.search').focus();
  });

}); 
```

# linq - 如何在视图中使用 IGrouping 处理 IEnumerable？

> ID：14293990
> 
> 赞同：4
> 
> 时间：2013-01-12T13:55:39.577
> 
> 标签：linq, view, ienumerable, igrouping

我正在尝试发送到视图`IEnumerable`并显示其中的每个元素，但是发送时出现问题。它说：

```
{System.Linq.Enumerable.WhereSelectEnumerableIterator<System.Linq.IGrouping<string,MvcApplication4.Models.USER>,<>f__AnonymousType8<string,int>>} 
```

我不知道如何处理它。

这是我的观点：

```
@model  IEnumerable<dynamic> 
```

我得到`dynamic`是因为我从几个函数中看到了这个视图，它们是如何发送不同类型的。

```
 <table border="1"  style="text-align:center">
      <tr>
          <td> </td>
          <td> user name </td>  
          <td>age </td>  
          <td>comments </td>
      </tr>

      @foreach (var t in (Model))
      {
      <tr>                                           
          <td>@(count++))</td>
          <td> @Console.WriteLine(t)</td>  
          <td>  </td>  
          <td> </td>
      </tr>                                    
      }

 </table> 
```

我`IEnumerable`从这个 linq 得到：

```
 var allU = (from m in comList
                    join c in users on m.user equals c.user into cm1
                    from cm2 in cm1.DefaultIfEmpty()
                    group cm2 by m.user into grouped
                    select new { name = grouped.Key, count = grouped.Count() }).AsEnumerable(); 
```

所以我的问题真的是：我怎样才能在视图中获取它的元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:33:44.050

您不能在视图中引用该类型，因为它是匿名类型。相反，定义一个类型来存储查询结果：

```
public class Result
{
  public string Name { get; set; }
  public int Count { get; set; }
} 
```

然后将您的查询更改为该类型：

```
var allU = (from m in comList
                    join c in users on m.user equals c.user into cm1
                    from cm2 in cm1.DefaultIfEmpty()
                    group cm2 by m.user into grouped
                    select new Result { Name = grouped.Key, Count = grouped.Count() }).AsEnumerable(); 
```

然后，您将能够绑定到`IEnumerable<Result>`视图中的类型。

# d - D语言：返回新创建的关联数组

> ID：14293999
> 
> 赞同：4
> 
> 时间：2013-01-12T13:56:33.680
> 
> 标签：d, associative-array, factory

在工厂函数中，我有时只想返回一个新创建的空关联数组。

一种方法是：

```
auto make_dict()
{ int[char] dict; return dict; } 
```

有没有办法避免声明局部变量`dict`？类似的东西

```
auto make_dict()
{ return int[char]; } 
```

或者，

```
auto make_dict()
{ return int[char](); } 
```

或者，

```
auto make_dict()
{ return new int[char]; } 
```

这些都不起作用，原因与需要如何声明关联数组有关。有办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T14:11:38.560

您可以使用

```
return (int[char]).init; 
```

所以你不必声明它。

所有类型的 init 属性表示该类型的默认初始化值（null 表示引用、空动态数组和空关联数组，使用当前实现）