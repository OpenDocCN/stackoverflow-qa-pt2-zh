# StackOverflow 问答 15680000-15680999

# c++ - 无法从 'FARPROC' 转换为 'BOOL (__cdecl *)(LPMEMORYSTATUSEX)'

> ID：15680008
> 
> 赞同：5
> 
> 时间：2013-03-28T10:57:41.993
> 
> 标签：c++, winapi

```
BOOL (WINAPI *gmse)(LPMEMORYSTATUSEX) = GetProcAddress(
                kernel32, "GlobalMemoryStatusEx"); 
```

这是一个 .cpp 文件。在编译上述代码时，我收到以下错误。

```
error C2440: 'initializing' : cannot convert from 'FARPROC' to 'BOOL (__cdecl *)(LPMEMORYSTATUSEX)'
    This conversion requires a reinterpret_cast, a C-style cast or function-style cast 
```

我似乎无法弄清楚我应该将`GetProcAddress`函数转换为什么。有人可以指出我正确的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T11:00:37.647

您需要将其转换为函数指针类型。为简化起见，使用 a`typedef`作为函数指针类型：

```
typedef BOOL (WINAPI *gmse_t)(LPMEMORYSTATUSEX);

gmse_t gmse = (gmse_t)GetProcAddress(kernel32, "GlobalMemoryStatusEx"); 
```

MSDN 上的[`GetProcAddress()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms683212%28v=vs.85%29.aspx)参考页面提供了示例代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T11:10:01.900

您需要转换从`GetProcAddress`.

所以，而不是当前

```
BOOL (WINAPI *gmse)(LPMEMORYSTATUSEX) = GetProcAddress(
            kernel32, "GlobalMemoryStatusEx"); 
```

做

```
auto const gmse = reinterpret_cast<BOOL (WINAPI*)(LPMEMORYSTATUSEX)>(
   GetProcAddress( kernel32, "GlobalMemoryStatusEx" )
   ); 
```

除了补充说`const`我会为那个函数指针使用一个更自我记录的名字，比如，那么调用它`GLobalMemoryStatusEx`呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-10T08:10:19.540

另一个优雅的解决方案（它只是 Cheers 和 hmjd 答案的完美结合）可以是：

```
typedef BOOL (WINAPI *gmse_t)(LPMEMORYSTATUSEX);
gmse_t gmse;
gmse = reinterpret_cast<gmse_t>(
   GetProcAddress( kernel32, "GlobalMemoryStatusEx" )
   ); 
```

# sql-server - 对查询感到困惑

> ID：15680009
> 
> 赞同：1
> 
> 时间：2013-03-28T10:57:44.120
> 
> 标签：sql-server, tsql

我对找出以下解决方案有点困惑：

我有 2 张桌子：

```
Days[id,Name] 
```

和：

```
Schedule[Id,FrDocId,FrDayId,Timein,TimeOut] 
```

现在我想要做的是将值从 Schedule 提取到 datagridview，因此查询将是 ->

```
Select Id, FrDayId, TimeIn, TimeOut 
from Schedule 
where Schedule.FrDocID=@docid(Parameter); 
```

这是我想显示日期名称而不是其 Id 的混淆部分，FrDayId 是日程表中的外键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:00:58.370

您将需要为此使用 join 语句。像下面这样的东西应该可以工作：

```
SELECT D.Name, S.Id, FrDayId, TimeIn, TimeOut
FROM Schedule S Inner JOIN Days D
   On S.FrDayId = D.id
WHERE S.FrDocID=@docid 
```

`FrDayId`上面的代码只是链接了与`id`字段匹配的 Schedule 和 Days 中的所有行。然后应用 where 过滤器。

有关详细信息，请参阅[MSDN Docs on Join](http://msdn.microsoft.com/en-us/library/ms191517%28v=sql.105%29.aspx)。

# c++ - 使用面向 64 位架构的 MSVC-11 编译 Boost 库

> ID：15680014
> 
> 赞同：2
> 
> 时间：2013-03-28T10:58:10.370
> 
> 标签：c++, windows, boost, visual-studio-2012, 64-bit

我需要编译`Boost Libraries 1.53`才能将它们与 Visual Studio 2012 一起使用。

到目前为止，我尝试过这种方式：

```
.\boostrap
.\bjam.exe --toolset=msvc-11.0 --address-model=64 
```

编译过程终止没有任何问题，但是当我尝试编译依赖于该库的 Visual Studio 项目时，我收到以下错误：

```
>libboost_thread-vc110-mt-1_53.lib(thread.obj) : fatal error LNK1112: module machine type 'X86' conflicts with target machine type 'x64' 
```

你能给我一些关于如何解决这个问题的提示吗？

谢谢你。

# android - 如何在具有多个 ListView(s) 的 Activity 中设置 ScrollView？

> ID：15680016
> 
> 赞同：0
> 
> 时间：2013-03-28T10:58:19.670
> 
> 标签：android, android-listview, android-activity, scrollview

这是我的实际活动： ![在此处输入图像描述](../Images/7695825c8c1c683f790b3be33b3e8745.png)

在此活动中，我以编程方式动态设置所有 ListView。如您所见，我遇到的问题是第一个 ListView 占据了她需要的位置，第二个 ListView 尝试通过在内部添加滚动条来继续显示..

我只是想知道如何以编程方式让所有 ListView(s) 占据她需要的整个位置，并为所有活动添加一个 ScrollBar（例如，滚动菜单）？

这是我的活动和适配器：

```
public class SousBoissonsActivity extends Activity {
    private String nom_categorie;
    private ArrayList<String> arraySousCategoriesName;
    private ArrayList<ArrayList<Drink>> arraySousCategories;
    private ArrayList<MyAdapter> myAdapters;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_sousboissons_list_item);

        nom_categorie = getIntent().getStringExtra("nom_categorie");
        setTitle(nom_categorie);
        DrinksContainer.setSousCategoriesNameArray(nom_categorie);
        DrinksContainer.setSousCategoriesArray(nom_categorie);

        arraySousCategories = DrinksContainer.sousCategoriesArray;
        myAdapters = new ArrayList<MyAdapter>();

        new DoDirtyJobAsyncTask().execute();
    }

    @Override
    protected void onResume() {
        super.onResume();
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        return super.onOptionsItemSelected(item);
    }

    private class DoDirtyJobAsyncTask extends AsyncTask<Void, MyAdapter, Void> {
        @Override
        protected Void doInBackground(Void... params) {
            for (ArrayList<Drink> arrayElement : arraySousCategories) {
                MyAdapter myAdapter = new MyAdapter(getApplicationContext(),
                        arrayElement);
                myAdapters.add(myAdapter);
                publishProgress(myAdapter);
            }
            return null;
        }

        @Override
        protected void onProgressUpdate(MyAdapter... myAdapters) {
            int currViewId = 1;
            LinearLayout ll = (LinearLayout) findViewById(R.id.sousboissons_linearlayout);
            for (MyAdapter myAdapter : myAdapters) {
                TextView sousCategorieTitle = new TextView(
                        getApplicationContext(), null);
                sousCategorieTitle.setText(myAdapter.sousCategory);

                sousCategorieTitle.setBackgroundColor(getResources().getColor(
                        R.color.green));
                sousCategorieTitle.setTextSize(19);
                sousCategorieTitle.setTextColor(getResources().getColor(
                        R.color.white));
                sousCategorieTitle.setGravity(Gravity.CENTER);
                LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
                        LinearLayout.LayoutParams.FILL_PARENT,
                        LinearLayout.LayoutParams.WRAP_CONTENT);
                layoutParams.setMargins(0, 0, 0, 0);
                sousCategorieTitle.setLayoutParams(layoutParams);

                ListView listview = new ListView(getApplicationContext(), null);
                listview.setId(currViewId);
                listview.setAdapter(myAdapter);
                LinearLayout.LayoutParams layoutParams2 = new LinearLayout.LayoutParams(
                        LinearLayout.LayoutParams.FILL_PARENT,
                        LinearLayout.LayoutParams.FILL_PARENT);
                layoutParams2.setMargins(17, 0, 17, 0);
                listview.setLayoutParams(layoutParams2);

                ll.setPadding(15, 15, 15, 0);
                ll.addView(sousCategorieTitle);
                ll.addView(listview);
                currViewId++;
            }
        }

    }

    class MyAdapter extends ArrayAdapter<Drink> {
        LayoutInflater inflat;
        private ArrayList<Drink> items;
        private String sousCategory;

        public MyAdapter(Context context, ArrayList<Drink> objects) {
            super(
                    context,
                    R.layout.activity_sousboissons_list_item_elementsouscategorie,
                    objects);
            this.items = objects;
            this.inflat = LayoutInflater.from(context);
            this.sousCategory = objects.get(0).getType();
        }

        private class ViewHolder {
            public TextView title;
            public TextView prix;
            public TextView desc;
            public TextView size;
            public ImageView img;
            public LinearLayout ll;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            String currentKey = "";
            String keyDialog = "";
            ViewHolder holder = null;
            Drink element = items.get(position);

            // Instantiate Labels and Design
            if (convertView == null) {
                holder = new ViewHolder();
                convertView = inflat
                        .inflate(
                                R.layout.activity_sousboissons_list_item_elementsouscategorie,
                                null);

                holder.title = (TextView) convertView
                        .findViewById(R.id.sousboissons_element_title);
                holder.desc = (TextView) convertView
                        .findViewById(R.id.sousboissons_element_desc);
                holder.prix = (TextView) convertView
                        .findViewById(R.id.sousboissons_element_prix);
                holder.size = (TextView) convertView
                        .findViewById(R.id.sousboissons_element_size);

                if (element.getPrice().size() > 1) {
                    holder.ll = (LinearLayout) convertView
                            .findViewById(R.id.sousboissons_element_firt_layout);
                    holder.img = new ImageView(getApplicationContext(), null);

                    LinearLayout.LayoutParams layoutParams1 = new LinearLayout.LayoutParams(
                            LinearLayout.LayoutParams.WRAP_CONTENT,
                            LinearLayout.LayoutParams.WRAP_CONTENT);
                    layoutParams1.weight = 12;
                    holder.title.setLayoutParams(layoutParams1);

                    LinearLayout.LayoutParams layoutParams2 = new LinearLayout.LayoutParams(
                            LinearLayout.LayoutParams.WRAP_CONTENT,
                            LinearLayout.LayoutParams.WRAP_CONTENT);
                    layoutParams2.gravity = Gravity.RIGHT;
                    layoutParams2.weight = 1;
                    holder.img.setLayoutParams(layoutParams2);
                    holder.img.setImageResource(R.drawable.arrow);
                    holder.img.setPadding(0, 15, 0, 4);

                    // Alert Dialog
                    final LinearLayout alertDialogLayout = new LinearLayout(
                            SousBoissonsActivity.this);
                    ArrayList<Dictionary> dico = element.getPrice();
                    ListView liste = new ListView(SousBoissonsActivity.this);
                    MyAdapterDialog adapt = new MyAdapterDialog(
                            SousBoissonsActivity.this, element.getPrice());
                    liste.setAdapter(adapt);
                    alertDialogLayout.addView(liste);
                    final AlertDialog.Builder alert = new AlertDialog.Builder(
                            SousBoissonsActivity.this);
                    alert.setTitle(element.getName());
                    alert.setCancelable(true);
                    alert.setPositiveButton("Retour",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int id) {
                                    dialog.dismiss();
                                }
                            });
                    alert.setView(alertDialogLayout);

                    holder.img.setOnClickListener(new OnClickListener() {
                        @Override
                        public void onClick(View v) {
                            if (alertDialogLayout.getParent() != null)
                                ((ViewGroup) alertDialogLayout.getParent())
                                        .removeView(alertDialogLayout);
                            alert.show();
                        }
                    });
                    holder.ll.addView(holder.img);
                } else {
                }
                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }

            // Setting Data on Labels
            if (element != null) {
                holder.title.setText(element.getName());
                holder.desc.setText(element.getDescription());

                if (element.getPrice().size() > 1) {
                    holder.prix.setVisibility(View.GONE);
                    holder.size.setVisibility(View.GONE);
                } else {
                    Dictionary dico = element.getPrice().get(0);
                    Enumeration e = dico.keys();
                    while (e.hasMoreElements()) {
                        currentKey = (String) e.nextElement();
                    }
                    if (currentKey.equalsIgnoreCase("0")) {
                        holder.size.setVisibility(View.GONE);
                        holder.prix
                                .setText((String) dico.get(currentKey) + "€");
                    } else {
                        holder.prix
                                .setText((String) dico.get(currentKey) + "€");
                        holder.size.setText(currentKey + "cl");
                    }
                }
            }
            return convertView;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:04:30.200

你不应该嵌套`ListViews`在 a`ScrollView`中，Android 不知道要滚动哪个。也许......您将能够以编程方式为每个 设置固定高度`ListView`，然后它将起作用。

我建议要么使用单个`ListView`, 并在该列表中对所有数据进行分组，要么使用[`ExpandableListView`](https://developer.android.com/reference/android/widget/ExpandableListView.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:52:35.740

`ListView`通常，添加inside是一种不好的做法`ScrollView`。如果你把你的`ListView or any scrollable View inside the`ScrollView `it won't work properly because when you touch the screen ,main focus of your touch is on parent view(`ScrollView `) not the child View (`ListView`）。

不过，如果您想实现它，那么下面是您可以尝试的方法，即`FooterView`在`HeaderView`您的`ListView`.

添加应该在上面的视图`ListView`作为标题：

```
 addHeaderView(View v); 
```

和下面作为页脚：

```
 addFooterView(View v); 
```

把所有应该放在上面`ListView`的东西放在下面`Header`，`ListView`和页脚一样放在下面。

```
LayoutInflater inflater = LayoutInflater.from(this);
mTop    = inflater.inflate(R.layout.view_top, null);
mBottom = inflater.inflate(R.layout.view_bottom, null);

list.addHeaderView(mTop);
list.addFooterView(mBottom);
// add header and footer before setting adapter
list.setAdapter(mAdapter); 
```

结果，您将获得一个可滚动的视图。

# ios - 带有 UITextView 滚动问题的 UITableView

> ID：15680020
> 
> 赞同：2
> 
> 时间：2013-03-28T10:58:36.327
> 
> 标签：ios, xcode, ipad, uitableview

我用一些自定义单元格组成了一个表格视图。一些自定义单元格包含`UIWebView`，一些有`UISlider`加号`UITextField`，一些有`UIButton`。

现在，当我单击底部的 uitableviewcell 子视图的文本字段时`UITableView`，**我无法让我的表格单元格在键盘上方正确可见。**

对我来说，使用 of`UITableViewController`代替`UIViewController`是不可能的。因为我的 UI 结构有些奇怪和动态。简单来说就像

```
UIView -> UIScrollView with paging -> x number of UITableViews -> y number of UITableViewCell ->  z number of UITextFields, UISliders, UIWebViews, UIButtons, UILables, etc. 
```

我还尝试了下面的代码以使其正常工作。

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    UITableViewCell *cell = (UITableViewCell*) [[textField superview] superview];
    [table_Question[pageNumber] scrollToRowAtIndexPath:[table_Question[pageNumber] indexPathForCell:cell] atScrollPosition:UITableViewScrollPositionTop animated:YES];
} 
```

但它不工作:(

谢谢，

**编辑1：**

我已经检查了 textfield、tableviewcell 和 tableview 的引用。所以对象的引用不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:12:49.680

试试这个代码......

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
        UITableViewCell *cell = (UITableViewCell*) [[textField superview] superview];
        NSIndexPath *indexPath = [[table_Question[pageNumber] indexPathForCell:cell];

        int totalRows = 0;
        if([[table_Question[pageNumber] numberOfSections] > 1)
         {
              for(int i = 0; i<([indexPath.section] - 1);i++)
               {
                     totalRows += [[table_Question[pageNumber] numberOfRowsInSection:i];
                }
          }

          totalRows += indexPath.row;

        int  yPosition = totalRows * cell.frame.size.height;
        CGPoint offset = CGPointMake(0, yPosition);
        [[table_Question[pageNumber] setContentOffset:offset animated:YES];
} 
```

这将对您有所帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:21:44.500

根据我的理解，`UITextField`当用户开始`UITextField`编辑`UITableViewCell`. 如果是这种情况，您可以将 的 设置`contentInset`为`UITableView`所需的大小，然后滚动到所需的索引路径。

## 以下是示例代码：

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    @try
    {
        table_Question[pageNumber].contentInset = UIEdgeInsetsMake(CGFloat Req_top, CGFloat Req_left, CGFloat Req_bottom, CGFloat Req_right);
        [table_Question[pageNumber] scrollToRowAtIndexPath:[table_Question[pageNumber] indexPathForCell:cell] atScrollPosition:UITableViewScrollPositionTop animated:YES];

        //Add this to you code to scroll in the tableview gets hidden by keyboard
        CGPoint scrollPoint = CGPointMake(0, Required_Height);
       [yourScrollView setContentOffset:scrollPoint animated:YES];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T12:06:55.147

试试这个代码

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{

    UITableViewCell *aCell = [table_Question[pageNumber] cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:1]];
    CGSize cellSize = aCell.frame.size;
    [table_Question[pageNumber] setContentOffset:CGPointMake(0, cellSize.height*2) animated:YES];
} 
```

# c# - 线程同步问题，3个线程同时运行，第4个必须运行而其他线程正在等待

> ID：15680023
> 
> 赞同：0
> 
> 时间：2013-03-28T10:58:43.517
> 
> 标签：c#, multithreading, .net-3.5, deadlock, thread-synchronization

抱歉标题，我找不到更好的解释我的问题...

我很难在我的应用程序中同步不同的线程。对于对这个问题有新看法的人来说，这可能是一个简单的问题，但是经过数小时对死锁的调查，我的脑袋快要爆炸了，我找不到一个好的和安全的方法来编写我的同步机制:(

基本上，我有一个在多个线程中运行的 .Net 进程（一切都在一个进程中，因此不需要 IPC）。我有 4 个线程：

*   1个线程，说它叫做*SpecificThread*。有一个`System.Timers.Timer`定期执行一些代码。
*   3 个其他线程，每个线程都运行一个定期执行某些代码的服务（`while (true)`循环 + `Thread.Sleep(few ms)`）。

**所有 3 项服务必须同时运行**。我保证它们的并发执行是线程安全的。第四个线程*SpecificThread*必须定期执行其代码，但**它必须阻止其他 3 个服务的执行**。

所以基本上我有*SpecificThread*定期执行代码。当*SpecificThread*想要定期执行其代码时，它必须等待其他服务完成它们的任务。当所有其他 3 个服务完成他们的任务时，它必须执行其*SpecificCode*而其他 3 个服务被阻止。当其*SpecificCode*被执行时，其他3个服务可以再次运行它们的代码。

我有一个`SynchronizationContext`在所有 4 个线程之间共享的对象的共享实例。我可以用它来同步我的线程：

```
public class SynchronizationContext
{
    public void StartService1()
    {
        ...
    }   
    public void StopService1()
    {
        ...
    }
    ...

    public void StartSpecificCode()
    {
        // Some sync here that wait until all 3 services completed their
        // respective tasks
    }
    public void NotifySpecificCodeCompleted()
    {
        // Some sync here that allows services 1 to 3 to execute again
    }
} 
```

3个服务执行机制如下：

```
// Only exits the loop when stopping the whole .Net process
while (myService.IsRunning)
{
    try
    {
        this.synchronizationContext.StartService1();

        // Do some job
    }
    finally
    {
        this.synchronizationContext.EndService1();

        // Avoids too much CPU usage for nothing in the loop
        Thread.Sleep(50);
    }
} 
```

具体*线程*执行机制：

```
// System.Timers.Timer that is instantiated on process start
if (this.timer != null)
{
    this.timer.Stop();
}

try
{
    // Must blocks until computation is possible
    this.synchronizationContext.StartSpecificCode();

    // Some job here that must execute while other 3
    // services are waiting
}
finally
{
    // Notify computation is done
    this.synchronizationContext.NotifySpecificCodeCompleted();

    // Starts timer again
    if (this.timer != null)
    {
        this.timer.Start();
    }
} 
```

我不知道如何使用关键部分，因为只有`SpecificThread`在其他部分等待时才必须运行。我没有找到一种方法，`Semaphore`也没有`AutoResetEvent`（它们的使用在我的代码中引入了难以调试的死锁）。我的想法已经用完了......也许`Interlocked`静态方法会有所帮助？

最后一句话：我的代码必须使用 .Net 3.5 运行，我不能使用任何 TPL 或`CountdownEvent`类...

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:17:42.967

`ReaderWriterLockSlim`听起来正是最能帮助您的工具。让每个服务在其循环体内取出一个读锁：

```
while (true)
{
    try
    {
        lockObject.EnterReadLock();

        //Do stuff
    }
    finally
    {
        lockObject.ExitReadLock();
    }
} 
```

然后你的第四个线程可以在它想要完成它的工作时进入一个**写锁。**读取器/写入器锁的工作方式是任意数量的读取器都可以持有锁，只要没有写入器持有锁，并且一次只能有一个写入器持有锁。这意味着三个工作人员都不会阻塞其他工作人员，但如果第四个线程正在运行，工作人员将阻塞，这*正是*您想要的。

# svn - SVN 在远程位置，大型结账有时会通过 Jenkins 失败

> ID：15680024
> 
> 赞同：3
> 
> 时间：2013-03-28T10:58:44.413
> 
> 标签：svn, jenkins

我在本地机器上运行 Jenkins，但我们的 SVN 存储库位于其他地方。网络流量通过 VPN 隧道。有时，当 Jenkins 必须进行全面结帐时，可能需要长达一个小时（这是正常的）。但是很多时候，由于结帐错误，构建失败，Jenkins 收到以下错误消息：

```
org.tmatesoft.svn.core.SVNException: svn: E210004: Malformed network data 
```

当我在同一网络中的本地计算机上签出时，我还没有收到错误，所以我怀疑它与 Jenkins 有关。我正在使用 Jenkins v. 1.467、Jenkins Subversion Workspace v. 1.4 和 SVN server v. 1.6.11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T12:46:48.310

我在redhat下遇到了同样的问题。

*   Jenkins 无法执行 svn 切换，尽管完整的结帐确实有效。
*   命令行下的 Svn 完全按预期工作。

我怀疑 SVNKit 是原因，但很难找到关于这个错误的资源，所以我会在这个问题上加两分钱。

我们有两个共同点：

1.  网络流量通过 VPN 隧道。
2.  SVN 确实有效，但詹金斯没有。

由于它经常发生在 VPN 隧道中，问题可能来自最大分段大小 (MMS)，导致 SVN 命令永远无法到达主机，从而导致格式错误的网络数据异常。

例如，尝试将与 svn 服务器讨论的界面的 MTU 降低到 600，看看会发生什么。为此，请键入以下命令：

```
ip link set dev eth0 mtu 600 
```

重新启动网络并使用 Jenkins 触发 svn 开关。

# c# - windows phone 8取消语音合成

> ID：15680027
> 
> 赞同：4
> 
> 时间：2013-03-28T10:58:49.797
> 
> 标签：c#, windows-phone-8, text-to-speech

我在我的应用程序中添加了语音合成。它可以工作，但问题是我无法取消语音...例如，当我导航到另一个页面时，语音继续...所以，我调用 CancelAll() 方法来取消当前语音但发生异常我不知道为什么。你知道有什么问题吗？

例外

```
A first chance exception of type 'System.Threading.Tasks.TaskCanceledException' occurred in mscorlib.ni.dll
An exception of type 'System.Threading.Tasks.TaskCanceledException' occurred in mscorlib.ni.dll and wasn't handled before a managed/native boundary
An exception of type 'System.Threading.Tasks.TaskCanceledException' occurred in mscorlib.ni.dll and wasn't handled before a managed/native boundary
The program '[2576] TaskHost.exe' has exited with code -1 (0xffffffff). 
```

我的代码：

```
 private SpeechSynthesizer synth = new SpeechSynthesizer();

    protected override void OnBackKeyPress(CancelEventArgs e)
    {
        //I tried to cancel also here but it's the same exception...
    }

    //method called when I press a button Cancel
    private void ButtonCancelSpeech(object sender, EventArgs eventArgs)
    {
        try
        {
            synth.CancelAll();
        }
        catch (TaskCanceledException)
        {
            //I arrive in this exception
        }
    }

    private async void BtnSpeech_Click(object sender, EventArgs e)
    {
        IEnumerable<VoiceInformation> voices = from voice in InstalledVoices.All
                                                     where voice.Language.Substring(0, 2).Equals(LanguageApp.GetLangage2Characters())
                                                     select voice;
        if (voices.ElementAt(0) != null)
        {
            // Set the voice as identified by the query.
            synth.SetVoice(voices.ElementAt(0));

            await synth.SpeakTextAsync(_place.Description);
        }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T12:13:11.097

由于您想取消异步操作，您可以使用`IAsyncAction`返回的 from`SpeakTextAsync`而不是使用`await`.

```
private SpeechSynthesizer synth = new SpeechSynthesizer();
private IAsyncAction task;

private void ButtonCancelSpeech(object sender, EventArgs eventArgs)
{
    try
    { 
        //cancel the async task itself
        task.Cancel();
    }
    catch (TaskCanceledException)
    {

    }
    }

private void BtnSpeech_Click(object sender, EventArgs e)
{
    IEnumerable<VoiceInformation> voices = from voice in InstalledVoices.All
                                                     where voice.Language.Substring(0, 2).Equals(LanguageApp.GetLangage2Characters())
                                                     select voice;
    if (voices.ElementAt(0) != null)
    {
        // Set the voice as identified by the query.
        synth.SetVoice(voices.ElementAt(0));

        task = synth.SpeakTextAsync(_place.Description);
    }
} 
```

# java - 从 Google App Engine 转发电子邮件

> ID：15680029
> 
> 赞同：2
> 
> 时间：2013-03-28T10:58:55.830
> 
> 标签：java, google-app-engine, jakarta-mail

我的应用程序允许用户发送消息。然后，消息的收件人可以将消息回复到地址 message_id@application_id.appspotmail.com。然后将消息发送给所有其他收件人而不进行修改。

这是使用的代码：

```
public class MailHandlerServlet extends HttpServlet { 
    /**
     * 
     */
    private static final long serialVersionUID = 7353232175365669L;
    static Logger log = Logger.getLogger(MailService.class.getName());

    @Override
    public void doPost(HttpServletRequest req, HttpServletResponse resp) 
        throws IOException, ServletException { 
        Properties props = new Properties(); 
        Session session = Session.getDefaultInstance(props, null);
        //Parse the received email
        MimeMessage messageToSend = new MimeMessage(session, req.getInputStream());
        //Create the new message
        Message msg = new MimeMessage(messageToSend);
        //Add All Recipient to the new Message
        msg.addRecipient(Message.RecipientType.BCC, new InternetAddress(mail));
        //[...]
        //Set From to the last appengine email adresse
        msg.setFrom(new InternetAddress(req.getPathInfo(), "Mail"));
        //Send the email
        Transport.send(msg);
    }
} 
```

此代码适用于许多电子邮件，但对于某些电子邮件，有一个错误：

```
/_ah/mail/5e3698a24927925e9f32cf0050aef84a@[...].appspotmail.com
javax.mail.SendFailedException: Send failure (javax.mail.MessagingException: Converting     attachment data failed)
    at javax.mail.Transport.send(Transport.java:163)
    at javax.mail.Transport.send(Transport.java:48)
    at [...].server.mail.MailHandlerServlet.doPost(MailHandlerServlet.java:178)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at cef.kephas.server.NamespaceFilter.doFilter(NamespaceFilter.java:31)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.JdbcMySqlConnectionCleanupFilter.doFilter(JdbcMySqlConnectionCleanupFilter.java:57)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:466)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:473)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:694)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:470)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679)
Caused by: javax.mail.MessagingException: Converting attachment data failed
    at com.google.appengine.api.mail.stdimpl.GMTransport.sendMessage(GMTransport.java:215)
    at javax.mail.Transport.send(Transport.java:95)
    ... 38 more 
```

问题是什么？我不更改消息。那些不起作用的消息不是我发的，所以我没有消息中包含的手段。是否有人设法提供这样的服务？

谢谢。

# java - 处理 Spring/Tomcat 初始化失败

> ID：15680030
> 
> 赞同：6
> 
> 时间：2013-03-28T10:58:58.407
> 
> 标签：java, spring, tomcat

目前，如果我们托管在 Tomcat 上的 Spring 应用程序的数据库不可用，则上下文初始化失败并且所有请求都返回 404。

什么是克服这个问题的好方法？与其在下一个 Tomcat 之前应用程序不可用，我希望它在不可用时向用户显示错误消息，并在数据库可用时自动恢复（就像在 Tomcat 已经运行时发生数据库故障一样）。

我可以将所有 bean 设置为惰性初始化，但我不确定这是最好的解决方案吗？Tomcat不能每x秒/请求重试一次初始化并同时显示一个不错的错误页面吗？对此有什么想法吗？

DB不可用时启动时引发的错误示例：

```
Caused by: java.sql.SQLException: Connections could not be acquired from the underlying database!
at com.mchange.v2.sql.SqlUtils.toSQLException(SqlUtils.java:106)
at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:529)
at com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getConnection(AbstractPoolBackedDataSource.java:128)
at org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy$LazyConnectionInvocationHandler.getTargetConnection(LazyConnectionDataSourceProxy.java:401)
at org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy$LazyConnectionInvocationHandler.invoke(LazyConnectionDataSourceProxy.java:376)
at com.sun.proxy.$Proxy43.getMetaData(Unknown Source)
at com.googlecode.flyway.core.dbsupport.DbSupportFactory.getDatabaseProductName(DbSupportFactory.java:103)
... 67 more
Caused by: com.mchange.v2.resourcepool.CannotAcquireResourceException: A ResourcePool could not acquire a resource from its primary factory or source.
at com.mchange.v2.resourcepool.BasicResourcePool.awaitAvailable(BasicResourcePool.java:1319)
at com.mchange.v2.resourcepool.BasicResourcePool.prelimCheckoutResource(BasicResourcePool.java:557)
at com.mchange.v2.resourcepool.BasicResourcePool.checkoutResource(BasicResourcePool.java:477)
at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:525)
... 72 more
Mar 28, 2013 11:19:47 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
Mar 28, 2013 11:19:47 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [] startup failed due to previous errors 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:43:35.453

从异常堆栈跟踪中，我看到您正在使用 c3p0 连接池。查看[http://www.mchange.com/projects/c3p0/#configuring_recovery](http://www.mchange.com/projects/c3p0/#configuring_recovery)，您可以在其中配置池以重试连接。

但这将使 http 线程保持活动状态，并想象如果您的系统负载很高，您的系统将会崩溃。

最好向用户显示错误页面。在这种情况下，我会显示 503 错误。您可以通过将 Apache Web 服务器放在托管 503 页面的 Tomcat 前面来做到这一点。也可以有其他方法来实现这一点。

由于您的 webapp 本身不会启动，因此您无法从 webapp 提供错误页面，除非您将其配置为惰性初始化。

您还可以尝试每隔 X 秒在错误页面上自动刷新用户尝试访问的 url。

# php - PHP - 动态填充的选择下拉菜单上的预选择/保存选项

> ID：15680031
> 
> 赞同：0
> 
> 时间：2013-03-28T10:59:03.643
> 
> 标签：php, session, select, option

我有一个包含 1-31 天的下拉框，如果用户返回页面，我想存储/保存用户之前选择的内容。

我生成盒子的功能是：

```
public function fetchDDMMYYYYDropdown($select_d,$session_d) {
        $days = range (1, 31);
        $dropdown .=  '<select name="'.$select_d.'">';
        foreach($days as $key=>$name){
            if($session_d==$name){
                $session = 'selected';
            }
            $dropdown .= '<option value="'.sprintf("%02d", $name).'" selected="'.$session.'">'.sprintf("%02d", $name).'</option>';
        }
        $dropdown .=  '</select>';

        return $dropdown;
    } 
```

我的表格在这个页面上：

```
<?php
session_start();
include("includes/func.class.php");

$dob = $func->fetchDDMMYYYYDropdown('dob_d', $_SESSION['dob_d']);
?>
<form action="t35t_send.php" method="get">
<?php echo $dob;?>
<input type="submit" value="send">
</form> 
```

然后它会保存 SESSION 变量：

```
session_start();
$_SESSION['dob_d'] = $_GET['dob_d'];
$dob = $_SESSION['dob_d'];
echo $dob; 
```

我可以说 $_SESSION['dob_d'] 是正确的并被保存，因为我可以在函数和初始表单页面中输出它 - 所以它只是下面的内容，但现在下拉框只是重置回到第一个值，而不是保存的会话：

```
if($session_d==$name){
    $session = 'selected';
}
$dropdown .= '<option value="'.sprintf("%02d", $name).'" selected="'.$session.'">'.sprintf("%02d", $name).'</option>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:11:37.310

试试这个

```
function fetchDDMMYYYYDropdown($select_d,$session_d) {

    $days = range (1, 31);
    $dropdown .=  '<select name="'.$select_d.'">';
    foreach($days as $key=>$name){
        if($session_d==$name){

            $session = 'selected = selected';
        }
        else
        {
            $session = '';
        }
        $dropdown .= '<option value="'.sprintf("%02d", $name).'"'.$session.'">'.sprintf("%02d", $name).'</option>';
    }
    $dropdown .=  '</select>';

    return $dropdown;
} 
```

问题是，即使“选项”中有“选择”，即使值被选中，并且在您之前的代码中..“选择将在每个日期都存在..所以它很容易显示“31”。我已经更改了代码，以便“selected = selected”得到保存值的回显。

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:08:05.403

粗略猜测您的 if 条件未返回 true，

尝试检查两个变量的值。

只是为了确认您可以替换下面的代码并尝试。

```
if($session_d == sprintf("%02d", $name)){
    $session = 'selected';
}
$dropdown .= '<option value="'.sprintf("%02d", $name).'" selected="'.$session.'">'.sprintf("%02d", $name).'</option>'; 
```

# javascript - 浏览器中tilemap的Javascript分配

> ID：15680034
> 
> 赞同：0
> 
> 时间：2013-03-28T10:59:09.703
> 
> 标签：javascript, jquery, css, performance, dom

我目前正在构建一个小型回合制迷宫游戏。迷宫是 2D 的，由瓷砖组成 - 非常类似于 Zelda 地图游戏。

我至少有 256 种不同的瓷砖可供选择，我将在不同的区域重复使用它们，例如建筑物、树木、墙壁、草、水等。

我的计划是在不使用 jQuery 以外的任何其他框架进行 Ajax 和 DOM 操作的情况下让它尽可能流畅地运行。

游戏引擎是服务器端的，所以客户端浏览器不执行任何人工智能逻辑等。它只是请求游戏的“当前状态”，然后接收对象/敌人等。但它已经下载了关卡图从头开始。关卡可能是 256x256 块，每个块可以是 32x32 像素……还没有决定块的大小，但我认为这是最优化的。不过可能更大。

玩家视口可能会占用大约 9x9 块或 15x15 块。然后您将滚动查看动作并四处走动。

由于它是回合制的，所以不用担心“屏幕闪烁 60 fps”在这里和那里一次闪烁是可以的，但并非一直如此。

**我的问题是：在客户端生成地图的最佳方式是什么？**

*   1）我是否应该将地图作为“数据”（json或类似的）传输，然后使用CSS生成DIV以在客户端构建tilemap。这将最大限度地减少带宽，但我担心当我滚动地图时客户端中的 DOM 会很辛苦？

或者

*   2）我是否应该预先渲染完整的瓷砖地图或地图的较大部分（正方形），以便浏览器处理更少的 DIV。这将扼杀地图的可重用性，因为它们几乎没有图案化，所以它只是“纯图形下载”+游戏碰撞所需的瓷砖地图信息等。它应该更快地滚动浏览器。

我无法弄清楚使用第二种方法下载后是否会占用更多或更少的资源，因为客户端/浏览器将不得不为所有较大的“预渲染”块分配内存。但是，如果它是来自 1) 的“数据最优”解决方案，它还将生成许多带有类的 DIV，并以某种方式在浏览器 DOM 中呈现这些。

SVG 和画布目前不是一个选项，除非有人可以为我提供一种将 alpha 透明 PNG 转换为画布的快速方法，并且仍然能够使用视口滚动（尽管有尽可能多的 FPS，也就是超过 15 fps )

# java - 在 Android 应用程序中将 Jersey 用于 restful api 时，我收到此错误：

> ID：15680035
> 
> 赞同：3
> 
> 时间：2013-03-28T10:59:10.250
> 
> 标签：java, android, rest

1.  这是我正在使用的代码：

    ```
    import android.os.Bundle;
    import android.support.v4.app.Fragment;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;
    import java.io.File;
    import java.io.IOException;
    import java.util.logging.Logger;
    import java.io.FileInputStream;
    import java.io.FileNotFoundException;
    import org.apache.commons.codec.binary.Base64;

     public class Fragment_2 extends Fragment {
    static Logger logger = Logger.getLogger(Fragment_2.class.getSimpleName());

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){

     new Thread(new Runnable() {

        public void run() {

            try {
                 String base64 = null;
                    String imageDataString2 = null;
                    File file = new File("/mnt/sdcard/DCIM/Camera/2013-03-27 00.22.48.jpg");

                    try {
                           // Reading a Image file from file system
                           FileInputStream imageInFile = new FileInputStream(file);
                           byte imageData[] = new byte[(int) file.length()];
                           imageInFile.read(imageData);

                           // Converting Image byte array into Base64 String
                           String imageDataString = new String(Base64.encodeBase64(imageData));

                           imageDataString2 = imageDataString.replace("_", "/");
                           imageDataString2 = imageDataString2.replace("-", "+");

                           System.out.println(imageDataString2);
                           base64 = imageDataString2;
                           System.out.println("Image Successfully Manipulated!");
                       } catch (FileNotFoundException e) {
                           System.out.println("Image not found" + e);
                       } catch (IOException ioe) {
                           System.out.println("Exception while reading the Image " + ioe);
                       }                        
                        ClientConfig config = new DefaultClientConfig();
                        Client client = Client.create(config);
                        WebResource service = client.resource(UriBuilder.fromUri("http://xxxxxx:8080/api").build());//change it to the latest URL 

                        Form f = new Form();                   
                        f.add("img",base64 );    

                        String s = service.post(String.class, f);

            } catch (Exception e) {

            }           
        }

    }).start();                         
     return inflater.inflate(R.layout.fragment_2, container, false);
    }

     } 
    ```

这是错误：

```
03-28 03:50:24.569: W/dalvikvm(20989): Link of class 'Lcom/sun/jersey/core/osgi/OsgiRegistry;' failed
03-28 03:50:24.569: W/dalvikvm(20989): VFY: unable to resolve static method 5977: Lcom/sun/jersey/core/osgi/OsgiRegistry;.getInstance ()Lcom/sun/jersey/core/osgi/OsgiRegistry;
03-28 03:50:24.569: W/dalvikvm(20989): Link of class 'Lcom/sun/jersey/core/osgi/OsgiRegistry;' failed
03-28 03:50:24.569: W/dalvikvm(20989): VFY: unable to find class referenced in signature (Lcom/sun/jersey/core/osgi/OsgiRegistry;)
03-28 03:50:27.379: W/dalvikvm(20989): Exception Ljava/lang/NullPointerException; thrown while initializing Lcom/sun/jersey/core/header/MediaTypes;
03-28 03:50:27.379: W/dalvikvm(20989): threadid=9: thread exiting with uncaught exception (group=0x40018578)
03-28 03:50:27.399: E/AndroidRuntime(20989): FATAL EXCEPTION: Thread-10
03-28 03:50:27.399: E/AndroidRuntime(20989): java.lang.ExceptionInInitializerError
03-28 03:50:27.399: E/AndroidRuntime(20989):    at com.sun.jersey.core.spi.factory.MessageBodyFactory.getMessageBodyWriterMediaTypes(MessageBodyFactory.java:444)
03-28 03:50:27.399: E/AndroidRuntime(20989):    at com.sun.jersey.api.client.RequestWriter.getMediaType(RequestWriter.java:324)
03-28 03:50:27.399: E/AndroidRuntime(20989):    at com.sun.jersey.api.client.RequestWriter.writeRequestEntity(RequestWriter.java:282)
03-28 03:50:27.399: E/AndroidRuntime(20989):    at com.sun.jersey.client.urlconnection.URLConnectionClientHandler._invoke(URLConnectionClientHandler.java:213)
03-28 03:50:27.399: E/AndroidRuntime(20989):    at com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:149)
03-28 03:50:27.399: E/AndroidRuntime(20989):    at com.sun.jersey.api.client.Client.handle(Client.java:648)
03-28 03:50:27.399: E/AndroidRuntime(20989):    at com.sun.jersey.api.client.WebResource.handle(WebResource.java:680)
03-28 03:50:27.399: E/AndroidRuntime(20989):    at com.sun.jersey.api.client.WebResource.post(WebResource.java:251)
03-28 03:50:27.399: E/AndroidRuntime(20989):    at com.example.programming_fragments.Fragment_2$1.run(Fragment_2.java:91)
03-28 03:50:27.399: E/AndroidRuntime(20989):    at java.lang.Thread.run(Thread.java:1019)
03-28 03:50:27.399: E/AndroidRuntime(20989): Caused by: java.lang.NullPointerException
03-28 03:50:27.399: E/AndroidRuntime(20989):    at javax.ws.rs.core.MediaType.valueOf(MediaType.java:119)
03-28 03:50:27.399: E/AndroidRuntime(20989):    at com.sun.jersey.core.header.MediaTypes.<clinit>(MediaTypes.java:65)
03-28 03:50:27.399: E/AndroidRuntime(20989):    ... 10 more 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:04:41.200

我不确定这是正确的解决方案

根据[Jersey deps](http://jersey.java.net/nonav/documentation/latest/chapter_deps.html#d4e1727)，您需要`jersey-json`在依赖项/类路径中有模块。

如果库的名称是 libitv.so 并且在构建 .apk 之前位于应用程序目录的 libs\armeabi 目录中，则该库将被识别。

有时当库没有完全复制（部分复制）时，由于某些系统问题，部分库也将无法识别。

有关更多详细信息，请参阅[此处](http://developer.android.com/reference/java/lang/ExceptionInInitializerError.html)

试试这个[链接](https://groups.google.com/forum/?fromgroups=#!topic/android-ndk/JyhjWs4VvwA)有一些解决方案

**更新：**

```
java.lang.ExceptionInInitializerError 
```

原因：`java.lang.UnsatisfiedLinkError:`找不到库 jniavutil

除了 libsndfile 之外，您还需要安装 libFLAC。您可能可以使用用于安装 libsndfile 的任何方法安装 libFLAC...

您错过了 ddms 日志中的重要信息。查找包含“由”和/或包含更多异常日志的行，以便我们查看它。

您已在启用 CodePro 覆盖的情况下进行编译。把它关掉。

实际上这是我们在 ADT 17 中面临的问题，您必须将 jar 文件放入 libs 文件夹才能克服此异常

所以右键单击您的项目->创建一个名为**libs的文件夹**

并按照此步骤

```
 right click (on libs folder) -->import-->File System-->browse to select your jar file and hit finish and run you project. 
```

在那之后

```
 right click on the project --> Built Path-->java built path-->add jars select your jar file from your libs folder 
```

如果这也不起作用重建所有内容（包含的数据），它将起作用。

# c# - 结合C# Windows Form 应用，主解决方案

> ID：15680037
> 
> 赞同：2
> 
> 时间：2013-03-28T10:59:18.533
> 
> 标签：c#, winforms

与其拥有大量小型桌面应用程序，我想知道是否有一种方法可以将它们组合成一个“主表单”，并带有指向每个应用程序的链接？

我有许多类似的应用程序，理想的情况是几乎像网站层次结构一样，用户可以导航到他们想要的应用程序。

我已经考虑过一种解决方案，它位于其他解决方案之上并以某种方式调用其他解决方案，但我找不到这是否可能，每个单独的应用程序是否有效地独立？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:02:16.700

是的，您可以直接为它设计主表格。

为每个 exe（应用程序）保留菜单，

以以下方式给出命令以在主菜单中单击该菜单>>

```
System.Diagnostics.Process.Start("billing.exe",strCmdText); 
```

或者直接`Process.Start("C:\\");`

# html - 如何减少div标签中的背景图片？

> ID：15680040
> 
> 赞同：2
> 
> 时间：2013-03-28T10:59:26.660
> 
> 标签：html, css

在我的 html 文件中，我使用了 SpryTabbledPanels 插件。其中有三个 div 标签。在一个 div 标签中，我的数据较少，而在另一个 div 标签中，我的数据较多。我为此使用了悬停。当我将鼠标悬停在第一个 div 标签上时，它会显示数据。但底部有很多空白空间，在另一个 div 标签中没有太多空间。那么请问我可以更改div标签中背景图像的高度吗？

以下是背景图片的css：

```
#main-content {
    /*margin:0px 225px;*/
    margin-left:auto;
    margin-right:auto;
    margin-top:35px;
    width:900px;
    /*width:100%;*/
    height:auto;
    /*height:1053px;*/
    /*background: -moz-linear-gradient(top,  #fff , #ccc);
    background: -webkit-gradient(linear, left top, left bottom, (#E5E5E5) to(#ccc));
    background: filter: progid:DXImageTransform.Microsoft.gradient(startColorStr='#ffffff', EndColorStr='#000000.');*/

    border-top-left-radius:48px;
    border-top-right-radius:48px;
    border-bottom-left-radius:48px;
    border-bottom-right-radius:48px;
    padding-bottom:20px;
    min-height:1450px;
    background:url(res/back-img.png) repeat;

    } 
```

以下是截图：

![第一个 div 标签的屏幕截图](../Images/d504cfc34668fceee5db32a4e0970684.png)![第二个 div 标签的屏幕截图](../Images/551fe02cc9b651c9e3890b4c246bf699.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:26:26.593

有一个简单的技巧你可以做你的 html 例如应该看起来像

```
<div id="main-content">
    <img src="res/back-img.png"  />
    <p>some content</p>
</div> 
```

你的CSS应该看起来像：

```
#main-content{
    position: relative;
    /* the  rest of your css */
}
#main-content img{
    width: 100%;
    height: 100%;
    z-index: -10;
    position: absolute;
} 
```

这将使图像像背景图像一样，并根据主内容 div 的宽度和高度进行更改

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T08:35:31.520

您可以创建 2 个示例 CSS 类，它们将定义背景图像的高度和宽度。比方说...

```
 .class1{
         width : x1 px;
         height : y1 px;
     }

     .class2{
        width : x2 px;
        height : y2 px;
     } 
```

所以这里 y1 < y2 意思是 class1 是当你希望背景图像更小时应该应用于背景图像元素的类，即；onclick 第一个 div 标签。此外，当您单击 3 div 标签时（当您希望图像的大小更大时）只需将图像的类切换到类 2。所以图像会更大。在 jQuery 中，你可以很容易地做到这一点，因为..

```
 $("get ur image element here").class("class1"); //whwen u want image to be samller

    $("ur image element").class("class2"); //when u want the image to be larger 
```

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T12:34:44.427

```
div {
    width:50px;
    height:100px;
    background:red;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T12:01:01.880

这是jquery来改变背景图片的高度，我们可以给任意的高度。

```
$(document).ready(function(){
    $("#tab1").hover(function(){
    var height = 1000;
    $('#main-content').height(height);
    });
    $("#tab2").hover(function(){
    var height = 1200;
    $('#main-content').height(height);
    });
    $("#tab3").hover(function(){
    var height = 1400;
    $('#main-content').height(height);
    });
}); 
```

# php - 单选按钮数组获取选定值和相关内容（相同 id 隐藏元素）

> ID：15680047
> 
> 赞同：2
> 
> 时间：2013-03-28T10:59:50.257
> 
> 标签：php, arrays, foreach

我在从单选按钮表单中提取数据时遇到问题。

**它看起来像这样：**

```
<?php
## color
$stripe = 1;
$att_color=mysql_query("SELECT * FROM product_attributes WHERE products_id ='".$row['products_id']."' AND att_head='colors' AND att_show='1' ORDER BY att_order asc");
if(mysql_num_rows($att_color)!=0)
{
echo "
<table>
  <tr>
    <td width=\"90%\" align=\"left\" bgcolor=\"#EDEDED\">Color</td>
<td width=\"10%\" align=\"center\" bgcolor=\"#891531\">
<a href=\"#2\" title=\"Yta / Behandling\"><img src=\"images/info.png\"></a>
</td>
</tr>";

while($color_row=mysql_fetch_array($att_color)){
  if ($color_row['att_standard'] == 1) { $standard = "checked"; }
echo "
<tr class=".(($stripe++%2==1) ? 'odd' : 'even').">
  <td colspan=\"2\" width=\"100%\">
<input name=\"color_name[]\" value=\"".$color_row['att_name']."\" id=\"".$color_row['att_order']."\" type=\"hidden\" />
<input type=\"radio\" name=\"color_selected[]\" id=\"".$color_row['att_order']."\" value=\"".(round($color_row['att_val']*0.85))."\" ".$standard.">
<img src=\"images/colors/".$colorimg."\"> &nbsp;".$color_row['att_name']."</td>
 </tr>";
unset($standard); }
echo "</table>"; }
# END color
?> 
```

只允许一个选项。当有人点击提交时，我*需要从该行获取值和相应的名称。但是我似乎无法弄清楚 foreach 语法。

```
if( isset($_POST['submit']) ) {   
    $c_selected = $_POST['color_selected'];
    $c_name = $_POST['color_name'];
    foreach($c_selected as $key => $n) {
    echo "<br><br>". $c_selected[$key] ." ".$c_name[$key];
 } 
```

当前代码给了我正确的值，但颜色名称错误。（总是第一个选项）我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:08:18.897

这是坏了：

```
<input type=\"radio\" name=\"color_selected[]\" id=\"".$color_row['att_order']."\" value=\"".(round($color_row['att_val']*0.85))."\" ".$standard.">

 name=\"color_selected[]\" should not be an array. 
```

而只是

```
 name=\"color_selected\" will provide the chosen color. 
```

所以单选按钮的值应该是颜色，而不是项目的成本。您应该使用该项目的价值制作另一个隐藏字段，除非每种颜色的价格不同。

我认为问题更复杂，因为您正在尝试发送订单数组而不是简单的表单或其他东西。如果是这种情况，也许你必须重新考虑你这样做的方式。

您似乎有一个产品 ID 字段，它对于每种颜色应该是唯一的，并且可以在另一侧用于从您的数据库中获取所有数据值。

```
<input name=\"att_order\"
       value=\"".$color_row['att_order']."\" 
       type=\"hidden\" />
<input type=\"radio\" 
       name=\"color_selected\" 
       value=\"".$color_row['products_id']."\" 
       ".$standard."> 
```

# php - FPDF 边界线

> ID：15680052
> 
> 赞同：1
> 
> 时间：2013-03-28T11:00:21.820
> 
> 标签：php, border, cell, fpdf

我曾经用这个库 FPDF 制作了一些非常简单的 PDF，现在我正在尝试制作一个“结果页面”，它必须显示类似这张图片的内容，但它周围有一个边框，而不是每个单元格。

![边框必须围绕所有变量](../Images/59ff398c2103498ee284c17cacc952d0.png)

我已经在 FPDF 中得到了它，制作了 Will Cells（不知道这是否是最好的方法），代码是这样的（目前我手动添加了结果，只是为了弄清楚它的样子):

```
//SimpleTable
function SimpleTable() {
    $this->Cell(280,15,"Inscription Number: 1",0);
    $this->Cell(265,15,"Date: 28/03/2008",0);
    $this->Ln();
    $this->Cell(265,15,"Name and Surname: Name Surname ",0);
    $this->Cell(265,15,"",0);
    $this->Ln();
    $this->Cell(280,15,"Address: Address",0);
    $this->Cell(265,15,"",0);
    $this->Ln();
    $this->Cell(280,15,"Zip Code: Zip Code",0);
    $this->Cell(280,15,"City: City",0);
    $this->Ln();
    $this->Cell(280,15,"Year of birth: Birthday",0);
    $this->Cell(280,15,"Age: Age",0);
    $this->Ln();
    $this->Cell(280,15,"VIP: No - First Time: Yes",0);
    $this->Cell(280,15,"School: My school",0);
} 
```

希望您能帮助我如何将所有结果合并为一个，我无法做到这一点，也没有找到任何东西。

再次感谢您的时间，一如既往！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-06T14:50:20.927

您可以使用

```
Rect(StartX, StartY, Width, Height, Options) 
```

选项

*   D - 画线
*   F - 填充
*   DF 或 FD - 画线和填充

例子`$pdf->Rect(0, 0, 210, 100, 'D');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-22T19:27:31.617

```
//The BorderBox
$actual_position_y = $pdf->GetY();
$pdf->SetFillColor(255, 255, 255);
$pdf->SetDrawColor(0, 0, 0);
$pdf->Cell($your_content_width, $your_content_heigth, "", 1, 1, 'C');

//Your actual content
$pdf->SetXY($yourLeftosition, $actual_position_y);
$pdf->Cell($cellwidth, $cellheigth, "Inscription Number", 0, 1, 'C'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-29T07:00:29.023

使用 fpdf 的 FancyRow 插件，给边框或创建框如果你需要检查[这里](http://www.fpdf.org/en/script/script63.php)的链接，它可能会帮助你。您可以在此处使用的另一个插件是带有多单元格的表格，请查看此[链接](http://www.fpdf.org/en/script/script3.php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T11:46:36.677

谢谢你的时间，但我终于找到了办法。在单元格的边框选项上，我添加了“LT”，“RT”......我可以制作一个围绕所有内容的边框线（如果您知道另一种更好的制作方法，可能不是最好的制作方法，我会很感激）。

希望这可以帮助其他希望做同样的人！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-17T09:07:15.397

您应该首先绘制一个带有边框的空单元格，然后您可以存储您的 Y 位置并重置 PDF 位置并开始在您的边框单元格内绘制您的单元格。像这样：

```
//The BorderBox
$actual_position_y = $pdf->GetY();
$pdf->SetFillColor(255, 255, 255);
$pdf->SetDrawColor(0, 0, 0);
$pdf->Cell($your_content_width, $your_content_heigth, "", 1, 1, 'C');

//Your actual content
$pdf->SetXY($yourLeftosition, $actual_position_y);
$pdf->Cell($cellwidth, $cellheigth, "Inscription Number", 0, 1, 'C');
... 
```

希望这可以帮助 ：）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-18T15:04:42.123

以上都不起作用。可以使用 cell() 方法中的第 4 个参数来完成。第 4 个参数可以将边框设置为：

> ```
> L: left
> T: top
> R: right
> B: bottom 
> ```

您可以用逗号分隔以任何顺序提供它们。因此，在您的情况下，您可以将“L,T,R”作为第 4 个参数，如下所示：

```
$this->Cell(280,15,"Inscription Number: 1","L,T,R");
$this->Cell(265,15,"Date: 28/03/2008","L,T,R"); 
```

仅中间部分“L,R”

```
$this->Cell(265,15,"Name and Surname: Name Surname ","L,R");
$this->Cell(265,15,"","L,R"); 
```

和底部的一个

```
$this->Cell(280,15,"VIP: No - First Time: Yes","L,R,B");
$this->Cell(280,15,"School: My school","L,R,B"); 
```

# asp.net - 最佳日期正则表达式 mm/dd/yyyy

> ID：15680054
> 
> 赞同：1
> 
> 时间：2013-03-28T11:00:26.993
> 
> 标签：asp.net, regex, date, date-format

请帮我找到日期格式的最佳正则表达式`mm/dd/yyy`和`m/d/yyyy`.

我尝试了不同的链接，但每个人都有一些问题。所以请帮我解决这个问题。

[什么是 MM/DD/YYYY 正则表达式以及如何在 php 中使用它？](https://stackoverflow.com/questions/2520633/what-is-the-mm-dd-yyyy-regular-expression-and-how-do-i-use-it-in-php)

[http://regexlib.com/DisplayPatterns.aspx?cattabindex=4&categoryId=5](http://regexlib.com/DisplayPatterns.aspx?cattabindex=4&categoryId=5)

[http://www.regular-expressions.info/regexbuddy/datemmddyyyy.html](http://www.regular-expressions.info/regexbuddy/datemmddyyyy.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:04:54.723

使用其中一个[`DateTime.TryParse`](http://msdn.microsoft.com/en-GB/library/system.datetime.tryparse.aspx)重载（或者[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-GB/library/system.datetime.tryparseexact.aspx)如果您想要更多控制）来验证字符串是否是`DateTime`.

```
DateTime dt;
if(DateTime.TryParse(someInputString, out dt)
{
  // it is valid and dt can be used
} 
```

这将是比正则表达式更好的方法 - 它更快、经过良好测试并且会生成有效`DateTime`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:05:39.660

如果你需要一个正则表达式，那么这样的东西会起作用（对于大多数情况，因为它允许 2 月 31 日）。

```
(0?\d|1[012])\/([012]?\d|3[01])\/\d{4} 
```

通常使用 DateTime 解析来验证日期格式要好得多。喜欢`DateTime.TryParseExact`的方法。您可以在浏览器中使用正则表达式（在 JavaScript 中），但您应该在服务器端真正使用 DateTime 解析。

# javascript - 通过鼠标拖动设置选中的复选框，例如在 ms excel 中

> ID：15680056
> 
> 赞同：0
> 
> 时间：2013-03-28T11:00:30.837
> 
> 标签：javascript, jquery, dom, jquery-plugins

嗨，我通过 php 在表格中列出了近 500~ 的值（Sil = Delete）

![桌子](../Images/c6e2fd1b75a39d50694499db4b444d2b.png)

我已经在我的项目中使用 jquery

如果在单击鼠标左键时将鼠标移动到 2 个父 div 上，是否有任何插件允许您在 jquery 中选中多个复选框

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:08:50.583

是的，你可以，像这样：

var mouseIsDown;

```
$(document).on('mousedown', function() {    
    mouseIsDown = true;
});

$(document).on('mouseup', function() {
    mouseIsDown = false;
});

$('td').on('mouseenter', function() {        
    if(mouseIsDown) {
        $(this).find('input[type=checkbox]').prop('checked', true);
    }
}); 
```

查看演示：http: [//jsfiddle.net/nuKEK/](http://jsfiddle.net/nuKEK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:06:34.240

是的，这很容易！并且已经在 SO 上的另一个主题上得到了密切的回答。

为了得到一个想法，下面是下面的简单代码。

PS：这是取自 [mouseover while mousedown](https://stackoverflow.com/questions/2970973/mouseover-while-mousedown)

您只需要将 .node 替换为您的复选框共有的 ha 类，而不是设置 CSS，您必须切换（或检查）您的选择器（即：您的复选框）

享受... ：）

```
$(document).ready(function(){

  var isDown = false;   // Tracks status of mouse button

  $(document).mousedown(function() {
    isDown = true;      // When mouse goes down, set isDown to true
  })
  .mouseup(function() {
    isDown = false;    // When mouse goes up, set isDown to false
  });

  $(".node").mouseover(function(){
    if(isDown) {        // Only change css if mouse is down
       $(this).css({background:"#333333"});
    }
  });
}); 
```

**编辑：**

要选中/取消选中您可以使用的复选框

```
$('.myCheckbox').prop('checked', true); 
```

# android - webview iframe 显示空白或黑屏？

> ID：15680062
> 
> 赞同：1
> 
> 时间：2013-03-28T11:00:45.223
> 
> 标签：android, iframe, webview, mobile-devices

```
webview.setVisibility(View.VISIBLE);
webview.getSettings().setJavaScriptEnabled(true);
//webview.getSettings().setPluginsEnabled(true);
webview.getSettings().setPluginState(PluginState.ON);
webview.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);
webview.getSettings().setAllowFileAccess(true);
webview.getSettings().setBuiltInZoomControls(true);
webview.getSettings().setBlockNetworkLoads(false);
webview.setWebChromeClient(new WebChromeClient() {});

final String mimeType = "text/html";
final String encoding = "UTF-8";
String html = getHTML1();
webview.loadDataWithBaseURL("", html, mimeType, encoding, "");
}

public String getHTML1() {
    Log.d("trailer_2 HTML","ok");
    String html = "<iframe class=\"youtube-player\" style=\"border:0;
    width: 100%; height:96%; padding:0px; 
    margin:0px\"id=\"ytplayer\" type=\"text/html\" src=\"http://www.youtube.com/embed/"
            + "H7Ht-m2QMDY"
            + "?fs=0\" frameborder=\"0\">\n"
            + "</iframe>\n";
 return html;
} 
```

我尝试了很多。它适用于平板设备但不适用于移动设备？我也在`hardwareAcelator=true`清单中提到了 bur 不起作用？

# tridion - 如何使用扩展 XML 配置 Tridion 页面以发布到文件系统并休息到 Broker DB？

> ID：15680065
> 
> 赞同：3
> 
> 时间：2013-03-28T11:01:00.570
> 
> 标签：tridion

我正在尝试配置 cd_storage_conf 文件以获取扩展名为 XML 的页面以发布到文件系统。我不确定应该为 Item 节点中的 typeMapping 属性赋予什么值才能启用此配置。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:18:58.193

将 typeMapping 为“Page”且 itemExtension 属性为“.xml”的 itemType 元素添加到您的 cd_storage_conf.xml。请务必为您的部署程序和应用程序执行此操作，以便您的配置匹配

来自[在线文档](http://sdllivecontent.sdl.com/LiveContent)（需要登录）：[配置内容存储](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_005JJFGGGD8858699HHFHJF)

> 您可以将特定类型的页面（即具有特定文件扩展名的网页）存储在不同的存储介质中。为此，在 ItemTypes 元素中插入一个 Item 元素：
> 
> ```
> <Item typeMapping="Page" itemExtension=".Jsp" cached="CACHE_BEHAVIOR" storageId="STORAGE_ID" /> 
> ```

# symfony - HearsayRequireJSBundle：找不到 Javascript 文件

> ID：15680066
> 
> 赞同：0
> 
> 时间：2013-03-28T11:01:03.653
> 
> 标签：symfony, requirejs, assetic

我正在使用[HearsayRequireJSBundle](https://github.com/hearsayit/HearsayRequireJSBundle)将 RequireJS 实现到我的 Symfony2 项目中。

在我的 Twig 模板中，我初始化如下：

```
{{ require_js_initialize({ 'main' : 'base/main' }) }} 
```

然后正在寻找的文件是：

```
http://myhost.com/app_dev.php/js/base/main.js 
```

但是，这会返回 404 not found 错误。

我的配置如下所示：

```
hearsay_require_js:
    base_directory: %kernel.root_dir%/../src/Acme/Bundle/BaseBundle/Resources/scripts
    require_js_src: bundles/acmebase/assets/scripts/require-2.1.5.min.js
    paths:
        base: '@AcmeBaseBundle/Resources/scripts' 
```

我在这里错过了什么吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:27:26.700

无需两次定义基本目录的路径 -`paths`配置节点用于​​额外路径，`base_directory`默认为。尝试将您的配置更改为：

```
hearsay_require_js:
    base_directory: %kernel.root_dir%/../src/Acme/Bundle/BaseBundle/Resources/scripts
    require_js_src: bundles/acmebase/assets/scripts/require-2.1.5.min.js 
```

并将您的模板更改为此（现在将相对于`base_directory`）：

```
{{ require_js_initialize({ 'main' : 'main' }) }} 
```

# c# - 从不同的线程克隆部分图像非常慢

> ID：15680072
> 
> 赞同：1
> 
> 时间：2013-03-28T11:01:29.013
> 
> 标签：c#, multithreading, image, clone, picturebox

我在从 C# 中的另一个线程克隆部分位图（由矩形定义的区域）时遇到问题。

便于理解：在我的应用程序（Windows 窗体）中，用户可以定义多个区域，在这些区域上执行不同的图像处理功能（例如识别颜色或文本）。图像由图像采集卡 (30fps) 提供。由于某些算法（如 OCR）需要很长时间，它们应该在后台工作程序或线程中计算。

我的问题：当我使用 ((Bitmap)pictureBox1.Image).Clone(rectangle,((Bitmap)pictureBox1.Image).PixelFormat); 在我的主线程中克隆我的位图时

应用程序执行此操作非常快（对于 50x50 的矩形，在 1 毫秒以下）。

当我从不同的线程克隆它时，它需要更多的时间（大约 20 毫秒+）。

当我使用“.Clone()”（没有矩形）克隆整个图像时，调用该方法的线程没有区别。它需要同样的时间。

有人知道为什么当从另一个线程调用该方法作为拥有图像的线程时，克隆图像的一部分确实需要更多时间吗？

先感谢您。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:25:33.420

我没有发现为什么克隆过程不能像从另一个线程调用它那样快，但我终于找到了复制问题的解决方法：

[http://msdn.microsoft.com/en-us/library/aa457087.aspx](http://msdn.microsoft.com/en-us/library/aa457087.aspx)显示了一个复制功能，该功能由不拥有图像的线程快速调用。

我使用此复制功能编写了一个图像包装器。到目前为止工作正常

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Drawing;
using System.Threading;
using System.Diagnostics;

namespace FeatureConfigurator
{
    public class ThreadSafeBitmapWrapper
    {
        public event EventHandler<EventArgs> onImageChanged;
        ReaderWriterLockSlim thisLock;

        Bitmap iImg;

        public ThreadSafeBitmapWrapper()
        {
            this.iImg = new Bitmap(1,1);
            this.thisLock = new ReaderWriterLockSlim(LockRecursionPolicy.NoRecursion);
        }

        public ThreadSafeBitmapWrapper(Bitmap img)
        {
            this.iImg = img;
            this.thisLock = new ReaderWriterLockSlim(LockRecursionPolicy.NoRecursion);
        }

        public Bitmap GetImage()
        {
            Bitmap img;
            this.thisLock.EnterReadLock();
            try
            {
                img = this.iImg;
            }
            finally
            {
                this.thisLock.ExitReadLock();
            }
            return img;
        }

        public void SetImage(Bitmap img)
        {
            bool success = true;
            this.thisLock.EnterWriteLock();
            try
            {
                this.iImg = img;
            }
            catch
            {
                success = false;
            }
            finally
            {
                this.thisLock.ExitWriteLock();
                if (onImageChanged != null && success)
                    onImageChanged(this, new EventArgs());
            }
        }

        public Bitmap CloneImage()
        {
            Bitmap clone;
            this.thisLock.EnterReadLock();
            try
            {
                clone = new Bitmap(iImg);
            }
            finally
            {
                this.thisLock.ExitReadLock();
            }
            return clone;
        }

        internal Bitmap CloneImage(Rectangle rectangle, System.Drawing.Imaging.PixelFormat pixelFormat)
        {
            Bitmap clone;
            this.thisLock.EnterReadLock();
            try
            {
                Stopwatch w = new Stopwatch();
                w.Restart();
                Debug.WriteLine("clone " + w.ElapsedMilliseconds);
                clone = iImg.Clone(rectangle, pixelFormat);
                Debug.WriteLine("new BMP " + w.ElapsedMilliseconds);
            }
            finally
            {
                this.thisLock.ExitReadLock();
            }
            return clone;
        }

        /// <summary>
        /// Code from Microsoft C# Help page: http://msdn.microsoft.com/en-us/library/aa457087.aspx
        /// </summary>
        /// <param name="section">The region on the containing image, which should be copied</param>
        /// <returns></returns>
        public Bitmap CloneImage(Rectangle section)
        {
            // Create the new bitmap and associated graphics object
            Bitmap bmp = new Bitmap(section.Width, section.Height);
            // Sets the lock to protect the copy procedure
            this.thisLock.EnterReadLock();
            try
            {
                using (Graphics g = Graphics.FromImage(bmp))
                {
                    // Draw the specified section of the source bitmap to the new one
                    g.DrawImage(iImg, 0, 0, section, GraphicsUnit.Pixel);
                }
            }
            finally
            {
                this.thisLock.ExitReadLock();
            }
            // Return the bitmap
            return bmp;
        }
    }
} 
```

我希望这会帮助有同样问题的人。

问候

# c# - c#中的继承变量

> ID：15680077
> 
> 赞同：0
> 
> 时间：2013-03-28T11:01:41.170
> 
> 标签：c#, inheritance

只是为了练习，我正在尝试编写一个计算器程序。为了使它变得困难，我尝试使用一些我学过但没有真正使用的高级继承主题。假设您有一个`IMath`使用一种方法命名的接口`string DoMath()`。是否可以在接口中写入一个变量`IMath`，所有实现该接口的类都会看到新值？因此，例如，我的类`Add : IMath`将具有该方法`DoMath()`，并且在该`DoMath()`方法中将更改变量的值`double ITotal`，所有实现 IMath 接口的类都会看到新值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T11:06:11.807

不能在接口中指定变量或字段，只能指定：

*   方法
*   特性
*   索引器
*   活动

有关这方面的更多信息，请参阅[有关接口的 C# 文档。](http://msdn.microsoft.com/en-us/library/87d83y5b%28v=vs.80%29.aspx)

接口规定了预期的行为，而不规定了预期的实现。属性可以理解为“检索 X 值的能力”或“提供 X 值的能力”，而变量则是“存储 X 的能力”。这不是一回事，接口不能保证。

如果你绝对需要强制变量的存在，你应该使用基类。我可能会考虑结合这些东西，使用外部接口的接口（即我的计算器应该如何运行）和基类和继承以避免一遍又一遍地重写相同的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:03:36.243

听起来您正在寻找的是一个[抽象](http://msdn.microsoft.com/en-gb/library/sf985hc5%28v=vs.110%29.aspx)基类。

您所描述的一种可能的实现如下所示。

```
public abstract class MathBase
{
    public double Total { get; protected set; }

    public abstract string DoMath(double value);

    protected double ParseValue(string value)
    {
        double parsedValue;

        if (!double.TryParse(value, out parsedValue))
        {
            throw new ArgumentException(string.Format("The value '{0}' is not a number.", value), "value");
        }

        return parsedValue;
    }
}

public class Add : MathBase
{
    public override string DoMath(string value)
    {
        Total += ParseValue(value);

        return Convert.ToString(Total);
    }
} 
```

如果您希望继承自的每个类的每个实例`MathBase`共享相同的`Total`值，您可以将其声明为`static`：

```
public abstract class MathBase
{
    public static double Total { get; protected set; }

    public abstract string DoMath(string value);
} 
```

（虽然我不太确定你为什么想要这个）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:08:27.233

你可以这样做：

```
interface IMath
{
    string DoMath();
}

abstract class MathBase : IMath
{
    protected double Total { get; set; }

    public abstract string DoMath();
}

class Add : MathBase
{
    public override string DoMath()
    {
        this.Total = 2;

        return "2";
    }
} 
```

# python - 在 python 的日志列表中查找重复的用户及其活动计数

> ID：15680081
> 
> 赞同：0
> 
> 时间：2013-03-28T11:01:52.260
> 
> 标签：python, list, dictionary

我有 python 中的日志列表，例如

```
[{'activity': 'eating', 'time': 800, 'user': 'A'},
 {'activity': 'running', 'time': 900, 'user': 'A'},
 {'activity': 'dancing', 'time': 805, 'user': 'A'},
 {'activity': 'eating', 'time': 1800, 'user': 'A'},
 {'activity': 'eating', 'time': 800, 'user': 'B'},
 {'activity': 'playing', 'time': 1000, 'user': 'B'},
 {'activity': 'playing', 'time': 800, 'user': 'B'}] 
```

现在我需要根据用户找到活动计数，最后返回类似

```
{'A': {'count': 4,
       'logs': [{'activity': 'eating', 'time': 800, 'user': 'A'},
                {'activity': 'running', 'time': 900, 'user': 'A'},
                {'activity': 'dancing', 'time': 805, 'user': 'A'},
                {'activity': 'eating', 'time': 1800, 'user': 'A'}]},
 'B': {'count': 3,
       'logs': [{'activity': 'eating', 'time': 800, 'user': 'B'},
                {'activity': 'playing', 'time': 1000, 'user': 'B'},
                {'activity': 'playing', 'time': 800, 'user': 'B'}]}} 
```

我尝试遍历所有日志并找到，但这很混乱有人可以建议我更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:34:14.443

```
>>> logs = [{'user':'A' , 'activity': 'eating', 'time':'0800'},{'user':'A' , 'activity': 'running', 'time':'0900'}, {'user':'B' , 'activity': 'eating', 'time':'0800'}, {'user':'B' , 'activity': 'playing', 'time':'1000'}, {'user':'A' , 'activity': 'dancing', 'time':'0805'}, {'user':'A' , 'activity': 'eating', 'time':'1800'}, {'user':'B' , 'activity': 'playing', 'time':'0800'}]
>>> user_logs = {}
>>> for log in logs:
        user_log = user_logs.setdefault(log['user'], {})
        user_log['count'] =  user_log.get('count', 0) + 1
        user_log.setdefault('logs', []).append(log)

>>> user_logs
{'A': {'count': 4, 'logs': [{'time': '0800', 'user': 'A', 'activity': 'eating'}, {'time': '0900', 'user': 'A', 'activity': 'running'}, {'time': '0805', 'user': 'A', 'activity': 'dancing'}, {'time': '1800', 'user': 'A', 'activity': 'eating'}]}, 'B': {'count': 3, 'logs': [{'time': '0800', 'user': 'B', 'activity': 'eating'}, {'time': '1000', 'user': 'B', 'activity': 'playing'}, {'time': '0800', 'user': 'B', 'activity': 'playing'}]}} 
```

这可能是一种更好（更简单）的方法：

```
>>> user_logs = {}
>>> for log in logs:
        user_logs.setdefault(log['user'], []).append(log)

>>> user_logs
{'A': [{'time': '0800', 'user': 'A', 'activity': 'eating'}, {'time': '0900', 'user': 'A', 'activity': 'running'}, {'time': '0805', 'user': 'A', 'activity': 'dancing'}, {'time': '1800', 'user': 'A', 'activity': 'eating'}], 'B': [{'time': '0800', 'user': 'B', 'activity': 'eating'}, {'time': '1000', 'user': 'B', 'activity': 'playing'}, {'time': '0800', 'user': 'B', 'activity': 'playing'}]} 
```

计数不再是键，但您可以像这样获得计数

```
>>> len(user_logs['A'])
4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:59:56.837

试试这个：

```
>>> users = {}
>>> for i in logs:
    name = i['user']
    if name not in users:
        users[name] = []
    users[name].append(i) 
```

要获得所需的输出：

```
... the stuff above ...
>>> for user in users:
    users[user] = {'count': len(users[user]), 'logs':users[user]} 
```

或者，如果您只想要一个循环：

```
>>> for i in logs:
    name = i['user']
    if name not in users:
        users[name] = {'count':0, 'logs':[]}
    users[name]['count'] += 1
    users[name]['logs'].append(i) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:08:22.843

使用[itertools.groupby](http://docs.python.org/2/library/itertools.html#itertools.groupby)和 key as [operator.itemgetter('user')](http://docs.python.org/2/library/operator.html#operator.itemgetter)对元素进行分组，然后遍历 groupby 对象并根据组的长度确定计数

# c# - 如何让 gzip 压缩在 WCF 4.5 中工作

> ID：15680087
> 
> 赞同：20
> 
> 时间：2013-03-28T11:02:11.823
> 
> 标签：c#, .net, wcf, self-hosting

WCF 4.5 支持 GZIP，无需第三方库或手写扩展。我通过 TCP 绑定使其工作，但找不到通过 HTTP 绑定使其工作的方法。我的 wcf - 服务自托管在 Windows 服务中。

**插件：我不允许使用 IIS；我无法切换到任何 WCF 替换。**

这适用于 gzip：

```
binding="customBinding" bindingConfiguration="tcpCompressionBinding" name="tcp" 
```

这就是我目前用于http的：

```
binding="basicHttpBinding" bindingConfiguration="httpBinding" name="http" 
```

该文档并没有真正帮助我：http: [//msdn.microsoft.com/en-us/library/dd456789.aspx](http://msdn.microsoft.com/en-us/library/dd456789.aspx)。

但是，据此它应该工作：

> 从 WCF 4.5 开始，WCF 二进制编码器增加了对压缩的支持。压缩类型由 CompressionFormat 属性配置。客户端和服务都必须配置 CompressionFormat 属性。压缩适用于 HTTP、HTTPS 和 TCP 协议。如果客户端指定使用压缩但服务不支持它，则会引发协议异常，指示协议不匹配。有关更多信息，请参阅选择消息编码器

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-07T14:57:20.623

根据要求，我复制了我的评论作为答案：

> “由于此属性仅在 binaryMessageEncodingBindingElement 上公开，因此您需要创建如下自定义绑定才能使用此功能：

```
<customBinding>
  <binding name="BinaryCompressionBinding"> 
    <binaryMessageEncoding compressionFormat="GZip"/> 
    <httpTransport /> 
  </binding>
</customBinding> 
```

> 并接收压缩消息，因此必须在客户端和服务上的 binaryMessageEncoding 元素上配置 compressionFormat 属性。“客户端和服务都需要同意发送

# rabbitmq - 在 RabbitMQ 中，我应该在 Connections、Channels 还是两者上创建一个连接池？

> ID：15680093
> 
> 赞同：5
> 
> 时间：2013-03-28T11:02:28.420
> 
> 标签：rabbitmq

使用 RabbitMQ 的 java 客户端，我创建了一个连接池机制，该机制具有一组已建立和可用的 rabbitmq 连接。一旦客户端租用一个连接，客户端就会创建一个通道。如果我必须发送执行任务并发送 100 条消息，对于这些消息中的每一条，客户端将租用一个连接并使用 API 创建一个通道，例如：

```
rqConnection = MyPoolManager.leaseConnection();
rqChannel = rqConnection.createChannel(); 
```

我是否可以在我的池中预先建立一个通道作为每个连接一个通道，或者始终可以在发送消息之前创建一个通道？**我担心在频道上创建频道可能会消耗资源。**我可以让通道与包含连接和通道的类共存，因此它总是在使用需要之前预先创建。如果通道创建没有资源消耗或泄漏影响，那么我可以继续我目前的方法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-29T12:15:38.440

根据其他团体的额外研究和观察，以下是有关渠道的一些事实：

*   似乎没有文件指定如何计算每个连接的通道数比率，也没有说明运行多个连接与每个连接多个通道的好处
*   运行大量连接似乎比运行大量通道更消耗资源。此外，连接仅限于一定数量的文件描述符，而通道则不是。
*   一些单独的测试表明，池连接与池通道的性能基准测试是相似的

因此，最好的方法似乎是支持在多个通道上拥有一个连接和池，其中每个通道将由不同的线程提供（以防止并发问题）。

# php - 在wordpress中单击页面中的图像时打开带有外部页面的弹出窗口

> ID：15680094
> 
> 赞同：0
> 
> 时间：2013-03-28T11:02:33.377
> 
> 标签：php, wordpress, popupwindow

我有情况在单击页面链接或图像时打开一个弹出窗口，指向位于 wordpress 主题文件夹中的外部 php 文件。我将页面 ID 和永久链接从我单击的页面传递到该外部 php 文件？请帮我..

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T07:25:07.647

试试这个..它可能会帮助你..

下载thickbox js文件并将此代码保留在脚本中

```
$("#id of the image or any button").click(function(){
     var url = "Give the url of the page that you wanna open in the popup";
     tb_show('<h3></h3>', url+'?KeepThis=true&TB_iframe=true&height=150&width=500');
}); 
```

确保将厚盒文件包含在保存上述脚本的文件中

# asp.net - 谷歌地图 API asp.net

> ID：15680096
> 
> 赞同：1
> 
> 时间：2013-03-28T11:02:39.520
> 
> 标签：asp.net, google-maps-api-3

我正在尝试在 ASR.NET mvc 中使用 Google 地图 API。我想使用 DirectionsRenderer。我在[这里](http://developers.google.com)阅读了有关该内容的文档并尝试使用示例但是此地图未在我的站点中呈现。哪里可能有问题？

```
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=MY_KEY&sensor=false">
    </script>
    <script>
        var directionDisplay;
        var directionsService = new google.maps.DirectionsService();

        function initialize() {
            directionsDisplay = new google.maps.DirectionsRenderer();
            var mapOptions = {
                zoom: 7,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                center: new google.maps.LatLng(41.850033, -87.6500523)
            };
            var map = new google.maps.Map(document.getElementById('map-canvas'),
        mapOptions);
            directionsDisplay.setMap(map);
            directionsDisplay.setPanel(document.getElementById('directions-panel'));

            var control = document.getElementById('control');
            control.style.display = 'block';
            map.controls[google.maps.ControlPosition.TOP].push(control);
        }

        function calcRoute() {
            var start = document.getElementById('start').value;
            var end = document.getElementById('end').value;
            var request = {
                origin: start,
                destination: end,
                travelMode: google.maps.DirectionsTravelMode.DRIVING
            };
            directionsService.route(request, function (response, status) {
                if (status == google.maps.DirectionsStatus.OK) {
                    directionsDisplay.setDirections(response);
                }
            });
        }

        google.maps.event.addDomListener(window, 'load', initialize);
    </script>
</head>
<body onload="initialize()">
    <div id="control">
        <strong>Start:</strong>
        <select id="start" onchange="calcRoute();">
            <option value="chicago, il">Chicago</option>
            <option value="st louis, mo">St Louis</option>
        </select>
        <strong>End:</strong>
        <select id="end" onchange="calcRoute();">
            <option value="chicago, il">Chicago</option>
            <option value="st louis, mo">St Louis</option>
        </select>
    </div>
    <div id="map-canvas" style="float: left; width: 70%; height: 100%">
    </div>
    <div id="directions-panel" style="float: right; width: 30%; height: 100%">
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:34:27.733

确保您在脚本中设置了正确的键`src="http://maps.googleapis.com/maps/api/js?key=MY_KEY&sensor=false"`，因为我已经用我自己的键尝试了您的代码并且它可以工作.. 如果您希望`calcRoute();`在页面加载时调用函数，只需在末尾添加这一行初始化函数 `calcRoute();`

# linux - 如何防止Linux上的ksh被局部变量覆盖全局变量？

> ID：15680097
> 
> 赞同：7
> 
> 时间：2013-03-28T11:02:51.170
> 
> 标签：linux, ksh, aix

我参与了将包含多个 ksh 脚本的系统从 AIX 6.1 移植到 SUSE-Linux 的过程。我在两个系统上的 ksh 行为方式上遇到了以下差异：

```
# LocalVar.sh 

test_loc_var()
{ 
typeset -t var 
var=localvariable 
echo "var = $var" 
} 

typeset var=globalvariable 

echo "var = $var" 
test_loc_var 
echo "var = $var" 
```

AIX 上的正确结果是：

```
var = globalvariable 
var = localvariable 
var = globalvariable 
```

Linux 上的错误结果是：

```
var = globalvariable 
var = localvariable 
var = localvariable 
```

我的问题是：

*   是否可以设置一个环境变量来让 Linux 的 ksh 在 AIX 上表现得像？做不到这一点：
*   Linux 的 ksh 上是否有获得所需行为的选项？做不到这一点：
*   为了在 Linux 上获得所需的行为，我需要对代码进行哪些更改？

笔记：

*   我已经尝试用“local”声明变量，但是在 Linux 上返回了一个错误，在 AIX 上它可以工作。

下表总结了这两个系统：

```
uname -s                 |    Linux                    AIX        
uname -r                 |    2.6.16.60-0.54.5-smp     1
which ksh                |    /bin/ksh                 /usr/bin/ksh
rpm -qa | grep -i ksh    |    ksh-93s-59.11.35         -
lslpp -l | grep -i ksh   |    -                        bos.rte.shell 6.1.8.15 APPLIED Shells (bsh, ksh, csh) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T12:44:54.180

**TL;DR**：对于琐碎的情况：将您的函数定义语法从 切换`f() compound-command`到`function f { ...; }`. 对于复杂的情况：仅依赖 ksh93（更灵活），使用以下荒谬的 hack（硬），重写为严格符合 POSIX（可能很难，不灵活），用真实语言重写（但有时 shell 很好）。

没有“Linux ksh”。它在所有系统上的行为都相同，并且仅取决于您使用的版本。

AIX 提供了一个经过修改的 ksh88。ksh88 有一个动态范围系统，类似于 Bash 和所有其他支持本地的 shell，但与 ksh93 不同。为了让本地人在 ksh93 下工作，您必须使用“现代”`function name { ; }`语法，而不是 POSIX 语法来定义函数。这在 ksh88 中可能需要也可能不需要，因为它没有记录并且我无法测试，因为 ksh88 是专有软件，而且很可能甚至不是为在现代 x86 硬件上运行而构建的。

如果以上是正确的，并且您的脚本是为 ksh88 编写的，那么只需切换函数定义语法就足以使局部变量至少起作用。然而，虽然 ksh93 的静态范围远远优于其他 shell 的动态范围，但它确实会导致严重的可移植性问题——这可能是所有 shell 脚本中最难解决的问题之一。

如果您需要便携式本地人，则没有出色的解决方案。我提出了两种“打破” ksh 范围的技术，使其更像 ksh88/bash/mksh/zsh 等。

第一个在未损坏的 POSIX shell 中工作。

```
#!/bin/sh
# (Partially) Working shells: dash, posh, bash, ksh93v, mksh, older zsh
# Broken shells: current zsh, busybox sh, non-bleeding edge alpha ksh93, heirloom

f() {
    if ! ${_called_f+false}; then
        # Your code using "x"
        for x; do
            printf '%s, ' "$x"
        done
    else
        # This hackishly localizes x to some degree
        _called_f= x= command eval typeset +x x 2\>/dev/null \; f '"$@"'
    fi
}

# demonstration code
x='outside f'; printf "$x, "; f 1 2 3; echo "$x" 
```

第二种方法仅适用于类似 ksh 的 shell，涉及通过引用显式传递所有内容并广泛使用间接。

```
#!/usr/bin/env ksh
# bash, ksh93, mksh, zsh
# Breaking things for dash users is always a plus.

# This is crude. We're assuming "modern" shells only here.
${ZSH_VERSION+false} || emulate ksh
${BASH_VERSION+shopt -s lastpipe extglob}
unset -v is_{ksh93,mksh}
case ${!KSH_VERSION} in
    .sh.version) is_ksh93= ;;
    KSH_VERSION) is_mksh=
esac

function f {
    # We want x to act like in dynamic scope shells. (not ksh93)
    typeset x
    g x
    typeset -p x
}

function g {
    # Note mksh and bash 4.3 namerefs kind of suck and are no better than eval.
    # This makes a local of a pointer to the variable arg of the same name.
    # Remember it's up to the programmer to ensure the sanity of any NAME
    # passed through an argument.

    ${is_ksh93+eval typeset -n ${1}=\$1}
    typeset y=yojo

    # mksh... you fail at printf. We'll try our best anyway.
    eval "$(printf %${is_mksh+.s%s=%s%.s }s=%q  "$1" ${is_mksh+"${y@Q}"} "$y")"
}

f 
```

如果您是少数需要编写健壮的库代码且必须可移植的人，我只推荐其中任何一种。

# xsd-validation - Xbrl 验证

> ID：15680101
> 
> 赞同：1
> 
> 时间：2013-03-28T11:02:57.500
> 
> 标签：xsd-validation, xbrl

我有一个`XDocument`需要验证的生成`Xbrl xsd's` 我已经创建了一个自定义`XmlResolver`来加载`xsd`来自外部方的所有文件。

这是`GetEntity`我的解析器的功能，所以我可以得到包含的`xsd's`：

```
Public Overrides Function GetEntity(absoluteUri As Uri, role As String, ofObjectToReturn As Type) As Object

    'If absoluteUri.ToString.Contains("www.xbrl.org") Then
    '    Nothing here yet
    'End If

    Dim nmSpace As String = _assembly.GetName.Name.ToString
    Dim resource = String.Concat(nmSpace, ".", Path.GetFileName(absoluteUri.ToString()))
    Dim result = _assembly.GetManifestResourceStream(resource)

    Return result
End Function 
```

然而，有很多来自 xbrl 命名空间的 xsd，它们没有被加载。

我开始下载它们以将它们包含为资源，但文件太多，所以它似乎不是最好的解决方案。

我希望任何人在验证 Xbrl 文件方面都有一些经验，因为我觉得我在这里错过了重点:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T14:25:14.207

www.Arelle.org

这个开源项目包含一个可用于验证 Xbrl 文件的 Web 服务。这是我现在实施的，它检查所有必需的 Xbrl 规则

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:32:39.880

我正在使用普通的 Xml-Xsd 验证，到目前为止这似乎还可以。

我实现了这样的自定义解析器：

```
Public Class ResourceXmlResolver
Inherits XmlResolver

Private Shared _xmlUrlResolver As XmlUrlResolver = New XmlUrlResolver()
Private _assembly As Assembly

Public Sub New(assembly As Assembly)
    _assembly = assembly
End Sub

Public Overrides Function GetEntity(absoluteUri As Uri, role As String, ofObjectToReturn As Type) As Object

    If absoluteUri.ToString.Contains("www.xbrl.org") Then
        Return _xmlUrlResolver.GetEntity(absoluteUri, role, ofObjectToReturn)
    End If

    Dim nmSpace As String = _assembly.GetName.Name.ToString
    Dim resource = String.Concat(nmSpace, ".", Path.GetFileName(absoluteUri.ToString()))
    Dim result = _assembly.GetManifestResourceStream(resource)

    Return result
End Function
Public Overrides WriteOnly Property Credentials() As System.Net.ICredentials
    Set(value As System.Net.ICredentials)
        Throw New NotImplementedException()
    End Set
End Property 
```

结束类

第三方提供的Xsd文件是嵌入式资源。

我将程序集设置为包含我的 Xsd 文件的程序集，因此当通过设置解析器调用 GetEntity 方法时：

```
Dim schemas As XmlSchemaSet = New XmlSchemaSet()
    schemas.XmlResolver = New ResourceXmlResolver(System.Reflection.Assembly.GetExecutingAssembly) 
```

它们已正确加载。不过，我确实提供了来自 www.xbrl.org 的 xsd 的检查。
在那种情况下，我使用标准的 XmlUrlResolver 从网络上获取它们。

我也通过下载所有 xbrl xsd 并嵌入它们来完成这项工作。

我希望这对 Xbrl 来说是足够的验证，但到目前为止可以正常工作:)

# c# - MV-VM：处理从 XmlSerialized 数据动态生成的模型数据的最佳方法是什么

> ID：15680103
> 
> 赞同：1
> 
> 时间：2013-03-28T11:03:02.147
> 
> 标签：c#, mvvm, observablecollection, inotifypropertychanged, xmlserializer

我既有实际的用户生成的数据，也有依赖于它的数据（例如用于指示网格中的重复值的 UniformGrid 单元格的背景颜色，每次从网格的 ObservableCollection 触发 INotifyPropertyChanged 时都会计算此颜色）。模型中还有其他相互依赖的对象。现在反序列化时，根据模型类中对象的顺序，一些依赖对象会正确更新，而有些则不会。（我来自 MFC 编程，习惯于在加载文件后调用 UpdateData() 并一次设置所有 DDX 控件。）

整个事情很容易在代码的后续更改中出现错误，并且感觉非常笨拙。就像 WPF 的许多事情一样：如果您想完成一项简单的任务，它很快就会完成。如果你想要一些特定的东西，它会变得比它应该的复杂得多。有没有什么好的做法来处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:40:30.057

似乎您的主要问题是正确分离关注点。WPF & MVVM 与更传统的 Windows 开发方法有很大不同。

首先，让我们在这里整理一些东西——这可能只是对术语的混淆，但我会提到它。

在 MVVM 中，模型不用于存储数据。

*可以*用来保存数据吗？是的。 *它应该*用于保存数据吗？不。

保存和转换数据是视图模型的工作。模型的工作是充当管道，它获取数据（即从您的存储库中检索，或控制与 WCF 服务的通信等）。如果您的模型保存数据，则意味着您的视图将绑定到模型，这是错误的。

你所说的一些数据也应该保存在视图中。确定某物是否重复可以在视图模型中确定，甚至可能在模型中确定（模型可以应用业务规则并在数据通过时标记数据）。为副本显示的颜色是视图责任 - 除非该颜色由业务规则确定，否则您可以将其移动到视图模型。

您正在绑定到 ObservableCollection，这表明您正在使用像 DataGrid 这样的中继器类型控件。在这种情况下，每一行都不知道任何其他行。如果您从一行的数据对象触发属性更改事件，另一行将完全不知道它，因此无法根据这些更改更改其呈现方式。在这种情况下，您必须以观察者模式的方式调整相关行的数据。

当你有这样的相互依赖关系时，将每个实际数据对象包装在另一个充当外观的轻量级对象中是正常的，有些人将此称为对每一行的数据对象都有一个视图模型。例如，这是一个简单的 Customer 对象：

```
public class Customer
{
    public string FirstName {get; set;}

    public string Surname {get; set;}
} 
```

当您将其存储在视图模型中的 ObservableCollection 中时，您可以将其包装起来：

```
public class CustomerWrapper
{
    private Customer _customer;
    public CustomerWrapper (Customer customer)
    {
        _customer = customer;
    }

    public bool HasRelation{get;set;}

    public Customer Customer { get {return _customer;}}
} 
```

现在，如果您想指示您的客户对象之间的相互依赖关系，例如，如果它们是一个家庭的一部分，您可以`HasRelation`在创建 CustomerWrapper 对象后简单地设置属性：

```
var myCustomerList = GetMyCustomers();
foreach (var customer in myCustomerList)
{
    myObservableCollection.Add(new CustomerWrapper(customer) 
    { 
        HasRelation = myCustomerList.Where(p => string.Equals(p.Surname, customer.Surname).Count() > 1) 
    }); 
} 
```

现在，当您将转发器控件绑定到 ObservableCollection 时，您可以使用 HasRelation 属性来控制 UI 颜色等。

请记住，我一直保持这是一个人为的例子，我一直保持简单，我故意遗漏了一些东西以保持简短。如果您的视图模型订阅了每个 Customer 对象的属性更改事件，则它可以根据需要更新 CustomerWrapper 对象。相互依赖状态不需要与存储库中的数据一起存储，因为您可以在每次显示数据时确定它。我省略的一件事是包装 FirstName 和 Surname 属性 - 您可以为它们放入一个包装器属性，或者您可以简单地使用 XAML 绑定中的路径来向下钻取到嵌套对象。

# c# - 将多个 DataTables 链接到同一个 DB 表

> ID：15680106
> 
> 赞同：3
> 
> 时间：2013-03-28T11:03:08.503
> 
> 标签：c#, sqlite, datatable, synchronize

我正在用 C# 编写一个应用程序，其中不同计算机上的两个或多个用户具有从通过网络共享的 SQLite 数据库中的同一个表填充的 DataTable。我希望所有用户的数据表保持同步，这样如果用户进行数据库操作（插入、更新或删除），其他用户的数据表保持更新，而无需从数据库重新加载整个表。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:39:35.410

您可以在客户端使用缓存。

这就是这里提出的：[如何在 C# 中将数据从数据库同步/检查到数据表？](https://stackoverflow.com/questions/3210148/how-to-synchronise-check-the-data-from-database-to-datatable-in-c)

您可以使用缓存应用程序块，而不是那里建议的 ASP.NET 缓存：http: [//msdn.microsoft.com/en-us/library/ff649093.aspx](http://msdn.microsoft.com/en-us/library/ff649093.aspx)

您可以在此 SO 线程中找到一个示例：[Microsoft Enterprise Library Caching Application Block not thread safe？](https://stackoverflow.com/questions/1302643/microsoft-enterprise-library-caching-application-block-not-thread-safe)

缓存负责检查数据库中每 X 秒的所有更改，一旦发现有更改，它就会从数据库中重新加载，您必须在应用程序中更新它。

你可以有一个更聪明的方法来做到这一点，仍然使用缓存。

你在你的服务器上创建一个接收所有 INSERT、UPDATE 和 DELETE 命令的服务，它将它们应用到数据库，然后向所有客户端的缓存发送一条失效消息，告诉他们更新他们的数据。

这意味着您的客户端在启动时订阅了失效通知服务，因此在发生更改时会收到通知。

如果你有兴趣看这个，你有一个很好的教程：http: [//www.codeproject.com/Articles/51409/Exploring-Caching-Using-Caching-Application-Enterp](http://www.codeproject.com/Articles/51409/Exploring-Caching-Using-Caching-Application-Enterp)这将有助于充分理解什么是一个缓存以及这个是如何工作的。

# javascript - JavaScript - 包含函数名称的字符串

> ID：15680107
> 
> 赞同：1
> 
> 时间：2013-03-28T11:03:08.897
> 
> 标签：javascript

通常，如果我有一个包含函数名称的字符串，我可以执行类似...

```
window[functionName](arguments); 
```

但是，当使用“jQuery 对象”样式编程（或任何正确的术语）时，这不起作用。例如;

```
(function ($) {
    "use strict";
    $.test = (function () {
        var func1 = function () {
            alert("func1");
        };

        var func2 = function () {
            alert("func2");
        };

        return {
            Test: function (functionName) {
                var fn = window[functionName]; // Need to specify scope here, somehow
                if (typeof fn === 'function') {
                    fn();
                } else {
                    alert("fn() = " + fn);
                }
            }
        }

    } ());
} (jQuery));

$.test.Test("func1");
$.test.Test("func2"); 
```

理想情况下，这将显示 func1 后跟 func2 - 但显然范围是错误的，我不确定在这种情况下如何指示它。

在这种情况下，如何指定我尝试调用的函数的范围？我当然可以使用 eval()，但我试图避免这种情况......

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T11:06:38.433

改为使用对象映射来容纳函数：

```
 var funcs = {
        func1: function () {
            alert("func1");
        },
        func2: function () {
            alert("func2");
        }
    };

    return {
        Test: function (functionName) {
            var fn = funcs[functionName];
            if (typeof fn === 'function') {
                fn();
            } else {
                alert("fn() = " + fn);
            }
        }
    }; 
```

# ruby-on-rails - 为什么 ActiveRecord 会自动验证 has_many 关联

> ID：15680111
> 
> 赞同：6
> 
> 时间：2013-03-28T11:03:15.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, activerecord

给出以下模型：

```
class Question < ActiveRecord::Base
  has_many  :answers
end

class Answers < ActiveRecord::Base
  belongs_to: question
  validates :comment, presence: true
end 
```

打电话时

```
question = Question.new
question.answers.build
question.valid? 
```

`valid?`返回`false`，因为关联的答案无效。写的时候

```
has_many :answers, validate: false 
```

在`Question` `valid?`回报`true`。

这是一个错误还是在使用`has_many`自动验证相关模型时需要？Rails 指南明确解释了`validate_associated`with`has_many`关系的使用：http: [//guides.rubyonrails.org/active_record_validations_callbacks.html#validates_associated](http://guides.rubyonrails.org/active_record_validations_callbacks.html#validates_associated)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T11:50:01.430

这绝对**不是**错误。

*   你创建了一个`Question`
*   你已经告诉 Rails 附加一个新的实例`Answer`并将它与这个新的`Question`
*   然后你问**“Rails，`Question/Answer`我创建的这个模型和关联是否可以保存到数据库中？”**

正如您所发现的，Rails 会在您的情况下说**“不”**。

我从来没用过，也不在乎`validates_associated`。但是，我可以向您指出解释为什么您会看到自己的行为的文档。

*   **[Active Record 自动保存关联](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/autosave_association.rb)**

尽管上述源文件中的文档值得完整阅读，但我会为您提取这一点

> 注意 :autosave => false 与不声明 :autosave 不同。 **当 :autosave 选项不存在时，会保存新的关联。**

*   你没有`:autosave => SOMETHING`在你的`:answers`协会上指定
*   因此，默认情况下，Rails 会尝试将新构建/关联的内容保存`Answer`在新的`Question`
*   保存将失败，因为`Answer`无效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-13T07:04:50.030

`valid?`为了处理验证，我已经在父模型中覆盖了它们的嵌套关联状态：

```
def valid?(context=nil)
  super(context) && self.answers.map(&:valid?).all?
end 
```

# c# - 未实现 WCF 接口

> ID：15680112
> 
> 赞同：1
> 
> 时间：2013-03-28T11:03:19.117
> 
> 标签：c#, .net, wcf, linq, entity-framework

我是 WCF 新手，不知道出了什么问题，我收到以下错误：

> WcfServiceLibrary.ReportServiceCO' 没有实现接口成员'WcfServiceLibrary.IReport.GetAllOrdersForCustomer(int)'

界面：

```
[ServiceContract]
interface IReport 
{
   // [OperationContract]
   // List<ModelData> GetAllCustomer();
    [OperationContract]
    List<ORDER> GetAllOrdersForCustomer(int _customerid);
} 
```

班上：

```
class ReportServiceCO : IReport
{

    public List<ORDER> GetAllORDERsForCustomer(int _customerid)
    {
        List<ORDER> orders = new List<ORDER>();
        TestEntities ent = new TestEntities();
        var orders3 = from x in ent.ORDERs
                      where x.CUSTOMERID == _customerid
                      select new { x.ORDERID, x.DATA, x.CUSTOMERID, x.VALOARE };
        foreach (var i in orders3)
        {
            ORDER o = new ORDER();
            o.ORDERID = i.ORDERID;
            o.CUSTOMERID = i.ORDERID;
            o.DATA = i.DATA;
            o.CUSTOMERID = i.CUSTOMERID;
            o.VALOARE = i.VALOARE;
            orders.Add(o);
        }
        return orders;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T11:07:00.597

方法名称区分大小写：

在`interface`它声明为：

```
GetAllOrdersForCustomer 
```

然而，实现被定义为：

```
GetAllORDERsForCustomer 
```

它需要是：

```
public List<ORDER> GetAllOrdersForCustomer(int _customerid) 
{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:07:03.193

将 GetAllORDERsForCustomer 重命名为 GetAllOrdersForCustomer。

# sitecore - Sitecore Analytics 报告 - 这仅适用于 Analytics 数据库，我可以使用主数据库生成报告吗？

> ID：15680115
> 
> 赞同：0
> 
> 时间：2013-03-28T11:03:25.273
> 
> 标签：sitecore, sitecore6, sitecore-dms

我试图从分析报告中的主数据库创建报告。（Stimulsoft 报表设计器）正如报表食谱中所述，我在参与分析中创建了一个“mrt 文件”（报表 UI）和一个报表定义项。我已将数据源项配置为查询项（/sitecore/system/Settings/Analytics/Reports SQL Queries/Visit Pages）。有效。

但后来我尝试使用主数据库进行查询，在 SQL 查询项中我特别提到数据库为“testProjectMaster”以指向主数据库。它不起作用！

然后我发现在“/sitecore/system/Settings/Analytics/Reports SQL Queries/Visit Pages”项和其他查询项中，它没有指定数据库，这意味着默认情况下sitecore查询分析数据库。

这是站点核心的限制，我们不能查询主数据库以获取报告吗？在创建报告方面有什么好的资源可以参考吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:19:44.023

我建议从访问页面报告中获取 SQL 并在 SQL Server Management Studio 中运行它。在那里，您将能够快速查看阻止查询运行的原因。如果我不得不冒险猜测，我会怀疑您的 SQL 用户帐户没有`db_datareader`访问主数据库的权限。

Sitecore 提供的默认 SQL 查询假定 DMS 被配置为连接字符串中的默认数据库。但是，这不会阻止您查询其他数据库或执行跨数据库连接，如下所示：

```
SELECT TOP 100 * FROM Pages
INNER JOIN Sitecore_Master.dbo.Items AS MasterItems ON Pages.ItemId = MasterItems.ID 
```

提醒一句..根据我的经验，这确实会减慢您的报告速度，因为它没有利用索引，并且创建索引视图不适用于多个数据库。

# javascript - Jquery - 使用空（）选择器后如何恢复默认值

> ID：15680122
> 
> 赞同：0
> 
> 时间：2013-03-28T11:03:49.447
> 
> 标签：javascript, jquery, html

我有桌子，它有 2 个标签。当我单击隐藏按钮时，将使用 $().empty() 消失。但我不知道如何恢复。
我不想使用 $().append 或类似添加新数据的东西。我想恢复它。
我怎样才能做到这一点。谢谢

```
<script type="text/javascript">

$(function(){
    $('#hidden').click(function(){
        $('.hidden').empty();
    });
    $('#restore').click(function(){
        // restore defaults
    });
});
</script>
<table>
    <tr class="hidden">
        <td>a</td>
        <td>b</td>
    </tr>
    <tr>
        <td>c</td>
        <td>d</td>
    </tr>
</table>
<input type = "button" id ='hidden' value="hidden"/>
<input type = "button" id ='restore' value="restore"/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T11:06:10.290

您可以简单地隐藏和显示项目，而不是清空。

```
$('#hidden').click(function(){
    $('.hidden').hide();
});
$('#restore').click(function(){
    $('.hidden').show();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:07:45.297

为什么不直接使用`hide`and `show`：

```
$(function(){
    $('#hidden').click(function(){
        $('.hidden').hide();
    });
    $('#restore').click(function(){
        // restore defaults
        $('.hidden').show();
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T11:07:59.543

如果您不想简单地隐藏它（如前所述），您可以将其保存在对象中。

```
$(function(){
    var data;
    $('#hidden').click(function(){
        data = $('.hidden').html();
        $('.hidden').empty();
    });
    $('#restore').click(function(){
        $('.hidden').html(data);
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T11:08:49.330

empty() 将从 dom 中删除内容，因此它会永远丢失如果您只想隐藏内容，则应使用

```
$.hide() 
```

进而

```
$.show() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T11:17:19.920

调用 .empty() 后无法恢复内容。还有另一个函数： .detach() 将选定元素从 DOM 中分离出来，但不会完全擦除它们。分离后，可以使用 .append() 或 .prepend() 再次附加元素。

# android - 应用内购买完成方法不会触发

> ID：15680124
> 
> 赞同：0
> 
> 时间：2013-03-28T11:03:52.447
> 
> 标签：android, in-app-purchase, in-app-billing

我想在我的应用程序中使用应用程序购买。我的目标是示例。一切正常，直到完成应用内购买。我可以购买产品。它应该在完成该过程后调用处理程序，但它不起作用。所以产品没有提供给用户。  

代码部分如下：

```
BillingHelper.requestPurchase(activity, productId); 
Handler mTransactionHandler = new Handler(){

@Override
public void handleMessage(android.os.Message msg) {
   Log.i(TAG, "Transaction complete");
   Log.i(TAG, "Transaction status: "+BillingHelper.latestPurchase.purchaseState);
   Log.i(TAG, "Item purchased is: "+BillingHelper.latestPurchase.productId);
   if(BillingHelper.latestPurchase.isPurchased()){
            // my code is here
       }     
    };
};

startService(new Intent(activity, BillingService.class));
BillingHelper.setCompletedHandler(mTransactionHandler); 
```

你有什么主意吗？

# perl - 在@INC [Perl] 中找不到 Bench.pm

> ID：15680126
> 
> 赞同：-2
> 
> 时间：2013-03-28T11:03:56.003
> 
> 标签：perl

我在编译我的 perl 程序时遇到了一个问题：它提到：

> 无法在 @INC 中找到 Bench.pm（@INC 包含：/etc/perl /usr/local/lib/perl/5.10.1 /usr/local/share/perl/5.10.1 /usr/lib/perl5 / usr/share/perl5 /usr/lib/perl/5.10 /usr/share/perl/5.10 /usr/local/lib/site_perl .) 在 test.pl 第 4 行。 BEGIN 失败——编译在 test.pl 第 4 行中止.

请问有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:07:35.653

像安装任何其他 CPAN 模块一样安装[Bench](http://p3rl.org/Bench)，例如使用[cpanm](http://p3rl.org/cpanm)、[cpanp](http://p3rl.org/cpanp)或[cpan](http://p3rl.org/cpan)。

您可能希望首先使用[perlbrew](http://perlbrew.pl/)安装本地（和更新）版本的 Perl，这样您就不会接触与系统 Perl 安装相关的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:12:08.673

首先，检查您是否安装了 Bench 模块：

```
%> perl -MBench -e 1 
```

如果您收到错误消息，则必须安装它：

```
%> cpan Bench 
```

# python - 在 django 中找不到已安装的应用程序

> ID：15680129
> 
> 赞同：2
> 
> 时间：2013-03-28T11:03:57.997
> 
> 标签：python, django, django-models, python-2.7

设置 settings.py 文件以识别已安装的“博客”应用程序，

我仍然收到此错误

**没有名为 blog 的模块**

```
Request Method: GET
Request URL:    http //  127dot0dot0dot1:8000 /
Django Version: 1.5
Exception Type: ImportError
Exception Value:    
No module named blog
Exception Location: c:\Python27\lib\site-packages\django\utils\importlib.py in import_module, line 35
Python Executable:  c:\Python27\python.exe
Python Version: 2.7.2
Python Path:    
['c:\\Python27\\Django-1.5\\FirstBlog',
 'c:\\Python27\\lib\\site-packages\\setuptools-0.6c11-py2.7.egg',
 'c:\\Python27\\lib\\site-packages\\pymysql-0.3-py2.7.egg',
 'C:\\Windows\\system32\\python27.zip',
 'c:\\Python27\\DLLs',
 'c:\\Python27\\lib',
 'c:\\Python27\\lib\\plat-win',
 'c:\\Python27\\lib\\lib-tk',
 'c:\\Python27',
 'c:\\Python27\\lib\\site-packages']
Server time:    Thu, 28 Mar 2013 16:27:11 +0530

In the shell: ImportError: No module named blog 
```

但是保存在“blog”文件夹中的模型使用syncdb安装在sqlite3 db上。知道为什么会发生这种情况以及如何解决此错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:46:16.447

您可能需要检查文件中的`INSTALLED_APPS`部分`settings.py`。如果`'blog',`未添加，则应考虑添加。在此之后，您应该继续`python manage.py syncdb`。最后一步检查您的`urls.py`并查看是否存在所有必要的 URL 映射。

# java - 安装没有图标或活动的应用程序

> ID：15680131
> 
> 赞同：9
> 
> 时间：2013-03-28T11:04:10.670
> 
> 标签：java, android, android-activity

我和一位朋友讨论过，他告诉我，一些应用程序可以安装在 android 上，而无需在菜单中显示任何活动或图标。因为我也在学习android，所以我很惊讶，因为我从来没有听说过。

应用程序的名称显示在“管理应用程序”部分，并且很容易卸载。

所以现在我作为程序员问。（如果是的话）如何安装这种应用程序？（没有活动或启动器）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T11:04:50.827

只需从清单中删除以下所有意图过滤器：

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

请记住，尽管从 Android 3.1 开始，如果用户没有手动打开您的应用，您的应用将不会接收任何广播，也不会列在意图过滤器使其可用的任何其他位置（例如在共享菜单中） UI（主活动）至少一次来自启动器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T11:13:06.463

还有另一种方法，即使在 Android3.1+ 上也可以使用。您不能禁用图标本身，但可以禁用应用程序的一个组件。因此禁用应用程序启动器活动将导致其图标从启动器中删除。

执行此操作的代码很简单：

```
ComponentName componentToDisable =
  new ComponentName("com.helloandroid.apptodisable",
  "com.helloandroid.apptodisable.LauncherActivity");

getPackageManager().setComponentEnabledSetting(
  componentToDisable,
  PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
  PackageManager.DONT_KILL_APP); 
```

关于这个解决方案有几点需要了解：

1-禁用的组件将无法以任何方式启动

2-其他非禁用活动将可以从其他应用程序启动

3-一个应用程序只能禁用它自己的组件。有一个权限“android.permission.CHANGE_COMPONENT_ENABLED_STATE”，但它不起作用，第3方复制不能有这个权限

4-图标只会在启动器重新启动时消失，因此很可能在下次手机重新启动时，不建议强制启动器重新启动

这样，应用程序必须至少按时运行。

参考：

[从启动器中删除应用程序图标](http://www.helloandroid.com/tutorials/removing-app-icon-launcher)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T11:06:24.743

是的，这种应用是可能的。您必须在 Manifest 文件中创建一个没有 Launcher Activity 的应用程序。

例如：-您可以在收到的启动时注册广播。因此，当设备启动时，您的应用程序将被调用，尽管它没有任何 UI。你可以看看[这个](https://stackoverflow.com/a/7690600/726863)。

`NOTE`- 这种类型的应用程序只能在 3.1 以下工作。

# r - R中的高级图例：情节

> ID：15680134
> 
> 赞同：6
> 
> 时间：2013-03-28T11:04:13.730
> 
> 标签：r, plot, expression, legend, plotmath

这是此问题的后续问题： [如何在与 `text` 一起使用的 `bquote` 表达式中换行？](https://stackoverflow.com/questions/15663535/r-plot-new-line-in-bquote)

但现在我把它放在了一个传说中，这似乎改变了事情。

我尝试了以下方法：

```
test<-c(10:1)
dummy1<-0.004323423
dummy2<-0.054
dummy3<-0.032
plot(test,c(1:10))
legend("topright", 
 legend=c(bquote(Qua_0,99^normal == .(round(dummy1,4))),bquote(Qua_0,95^normal == .(round(dummy2,4))),bquote(Qua_0,99^t == .(round(dummy3,4)))),
 bty = "n",lwd=2, cex=1, col=c("red","black","darkgreen"), lty=c(1,3,5)) 
```

所以，我想拥有

1.  表达式正确，以便正确写入索引 0,95 以及幂 ^ correclty

2.  等号后的换行符

3.  彩色文本，与 lign 相同，所以第一个是红色的

我试图实现已经存在的帖子的答案，但我没有弄清楚，atop 也不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T13:21:47.557

首先创建一个包含 3 个表达式的向量，并使用它`substitute`来创建适当的虚拟值。请注意，我正在使用`as.expression`它们以便不会立即对它们进行评估，并且使用`atop`用于换行符。然后在调用时使用该向量`legend`：

```
v <- c(
 as.expression(substitute(atop(Qua[0.99]^normal == "", dummy), list(dummy=round(dummy1,4)))),
 as.expression(substitute(atop(Qua[0.95]^normal == "", dummy), list(dummy=round(dummy2,4)))),
 as.expression(substitute(atop(Qua[0.99]^t == "", dummy), list(dummy=round(dummy3,4))))
)
cols <- c("red","black","darkgreen")
legend("topright", legend=v, bty = "n",lwd=2, cex=1, col=cols, text.col=cols, lty=c(1,3,5)) 
```

文本的颜色用 设置`text.col`。 ![在此处输入图像描述](../Images/716a721c63a247695e0232ccdc13f892.png)

如果你想坚持使用`bquote`而不是`substitute`：

```
 v <- c(
  as.expression(bquote(atop(Qua[0.99]^normal == "", .(round(dummy1,4))))),
  as.expression(bquote(atop(Qua[0.95]^normal == "", .(round(dummy2,4))))),
  as.expression(bquote(atop(Qua[0.99]^t == "", .(round(dummy3,4)))))
 ) 
```

要使*正常*和*0.99*粗体，您可以`bold`在表达式中使用：

```
v <- c(
 as.expression(substitute(atop(Qua[bold(0.99)]^bold(normal) == "", dummy), list(dummy=round(dummy1,4)))),
 as.expression(substitute(atop(Qua[bold(0.95)]^bold(normal) == "", dummy), list(dummy=round(dummy2,4)))),
 as.expression(substitute(atop(Qua[bold(0.99)]^bold(t) == "", dummy), list(dummy=round(dummy3,4))))
) 
```

但是*0.99*实际上不会很粗： ![在此处输入图像描述](../Images/893cf44595c740152c61321eb4fa885c.png)

您可以尝试使用正常大小的文本`textstyle`：

```
v <- c(
 as.expression(substitute(atop(Qua[textstyle(0.99)]^textstyle(normal) == "", dummy), list(dummy=round(dummy1,4)))),
 as.expression(substitute(atop(Qua[textstyle(0.95)]^textstyle(normal) == "", dummy), list(dummy=round(dummy2,4)))),
 as.expression(substitute(atop(Qua[textstyle(0.99)]^textstyle(t) == "", dummy), list(dummy=round(dummy3,4))))
) 
```

得到这个： ![在此处输入图像描述](../Images/80c3707ec2ff54d858570ea156ec96bb.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T13:23:52.917

这里需要做几件事，但主要是以合适的格式获取 3 个表达式 - 简单地`c`将它们组合在一起是行不通的。为此，我创建了一个表达式列表，然后创建了该列表上`sapply`的`as.expression`函数以获得“表达式向量”。

我使用 plotmath 函数`atop`来获得“换行符”；这将其论点置于另一个之上。

为了获得`0,95`我认为只是`0.95`在您的语言环境中的部分，在我的机器上，我必须使用`*`带有文字的布局函数`","`来`0`将`95`. 如果这只是为了写一个小数，那么在其他`.`用作小数分隔符的语言环境中，这不是必需的。我怀疑在您的语言环境中，您可以使用下面的第二个版本，但写作`[0,99]`而不是`[0.99]`，但我不知道。

如果你只是把

```
bquote(atop(foo_0.99^normal ==, .round(bar, 4))) 
```

你只会得到一个错误：

```
> bquote(atop(foo_0.99^normal ==, .round(bar, 4)))
Error: unexpected ',' in "bquote(atop(foo_0.99^normal ==," 
```

`==`这是因为缺少函数/运算符的右侧。由于您在`==`（在当前行！）之后不需要任何内容​​，因此您需要使用不会增加额外空间但为`==`. 在这里，我使用`phantom()`which 作为占位符但不留空间（因为我不提供任何参数）。但你也可以用,`== ""`代替`""`.`phantom()`

要获得与线条颜色相同的文本，请使用`text.col`参数。

这是满足您所有要求的完整内容（经过一段时间）：

```
test <- 10:1
dummy1 <- 0.004323423
dummy2 <- 0.054
dummy3 <- 0.032
plot(test, 1:10)

## list of expressions
exprs <-
  list(bquote(atop(Qua_0 * "," * 99^normal == phantom(), .(round(dummy1, 4)))),
       bquote(atop(Qua_0 * "," * 95^normal == phantom(), .(round(dummy2, 4)))),
       bquote(atop(Qua_0 * "," * 99^t == phantom(), .(round(dummy3, 4)))))
## fudge to get them as an expression vector
exprs <- sapply(exprs, as.expression)

cols <- c("red", "black", "darkgreen")
legend("topright", legend = exprs, bty = "n", lwd = 2, cex = 1, col = cols,
       lty=c(1,3,5), text.col = cols) 
```

看起来您正在使用 LaTeX`_`来获取上标。在 plotmath 你需要`[ ]`. 您还会注意到，这在排版上不太好——图例条目之间没有足够的空间，但单个条目中的元素之间有一些空间。这是因为我们滥用`atop`伪造换行符。我们可以使用 的`y.intersp`参数来处理`legend`。增加它以`2`提供足够的空间。

结合这一点，我将执行以下操作来满足您的所有要求：

```
plot(test, 1:10)

## list of expressions
exprs <-
  list(bquote(atop(Qua[0.99]^normal == phantom(), .(round(dummy1, 4)))),
       bquote(atop(Qua[0.95]^normal == phantom(), .(round(dummy2, 4)))),
       bquote(atop(Qua[0.99]^t == phantom(), .(round(dummy3, 4)))))
## fudge to get them as an expression vector
exprs <- sapply(exprs, as.expression)

cols <- c("red", "black", "darkgreen")
legend("topright", legend = exprs, bty = "n", lwd = 2, cex = 1, col = cols,
       lty=c(1,3,5), text.col = cols, y.intersp = 2) 
```

这会产生：

![在此处输入图像描述](../Images/b7abc7adf3c7a4f3b64fbf5840b2bd9c.png)

# c++ - 如何像这样设置Qt按钮

> ID：15680143
> 
> 赞同：3
> 
> 时间：2013-03-28T11:04:55.763
> 
> 标签：c++, qt, user-interface, stylesheet, qpushbutton

我尝试用 Qt 编写一个简单的 Player。

我尝试设置`Play`按钮看起来像这样

![按钮式](../Images/b974bc8f9ea60f707c66f466664f8e59.png)

使用样式表或像按钮一样使用 QPixmap。

我的代码是

```
playCtrl = new QPushButton(this);
playCtrl->setIcon(QIcon(QPixmap(":/icons/icons/play.png")));
playCtrl->setIconSize(QSize(150, 150));
playCtrl->setStyleSheet("QPushButton{background-image:url(:/icons/icons/play.png)}"); 
```

但是当我运行我的代码时，我得到了这个：

![在此处输入图像描述](../Images/a8ba7b5c86d3a2d59a595328fc454c6e.png)

* * *

我很高兴地说，我已经解决了这个问题。

只需使用这个：

```
playCtl = new QPushButton(this);
playCtl->setIcon(QIcon(QPixmap(":/icons/icons/player_play.png")));
playCtl->setIconSize(QSize(32, 32));
playCtl->setStyleSheet("QPushButton{border: none;outline: none;}"); 
```

![在此处输入图像描述](../Images/f04b07430d825695907994d6a4d2a4c9.png)

# tsql - 选择字符串中带有数字的记录

> ID：15680149
> 
> 赞同：0
> 
> 时间：2013-03-28T11:05:12.733
> 
> 标签：tsql

我有一个包含电话号码和相应客户的表 [CLIData]：

```
Number       Customer
01234567890  GeoffLtd
01234567891  FredLtd
01234567892  1JimLtd
01234567893  21DaveLtd
01234567894  297AhmedLtd
01234567895  FrankLtd 
```

以数字开头的客户属于 Group1，以字母开头的客户属于 Group2。

我正在寻找一个将插入另一个表 [CustomerData] 的查询，如下所示：

```
Number       Group
01234567890  Group2
01234567891  Group2
01234567892  Group1
01234567893  Group1
01234567894  Group1
01234567895  Group2 
```

有人可以帮我解决这个问题吗？有没有一种简单的方法来查询第一个字符是数字的位置？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:08:01.017

```
INSERT INTO CustomerData(Number, [Group])
SELECT  Number, 
        CASE WHEN ISNUMERIC(SUBSTRING(Customer, 1, 1)) = 1
            THEN 'GROUP1'
            ELSE 'GROUP2'
        END [GROUP]
FROM    CLIData 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/19ef1/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:09:02.290

试试这个：

```
select 
    * 
    ,gr = case when patindex('[0-9]%',customer)>0 THEN 'Group1' else 'Group2' end
from (
    select '01234567890' as number,'GeoffLtd' as customer union all
    select '01234567891','FredLtd' union all
    select '01234567892','1JimLtd' union all
    select '01234567893','21DaveLtd' union all
    select '01234567894','297AhmedLtd' union all
    select '01234567895','FrankLtd'
) x 
```

# java - EclipseLink JPA 跟踪更改

> ID：15680171
> 
> 赞同：6
> 
> 时间：2013-03-28T11:06:33.777
> 
> 标签：java, jpa, eclipselink, audit, changelog

我尝试记录我的 JPA 实体的任何更改。出于这个原因，每个实体都继承自一个抽象实体类，该实体类具有一个 LogEntry 对象列表。

抽象实体类：

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
@EntityListeners(ChangeListener.class)
public abstract class AbstractEntity implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    @Version
    private Long version;
    @Temporal(TemporalType.DATE)
    private Date validFrom;
    @Temporal(TemporalType.DATE)
    private Date validTo;
    private String name;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "abstractEntity")
    private List<LogEntry> logEntry = new ArrayList<LogEntry>();
    //getter and setter
} 
```

LogEntry 类：

```
@Entity
public class LogEntry extends AbstractEntity {

    @ManyToOne
    @JoinColumn
    protected AbstractEntity abstractEntity;
    @ManyToOne
    @JoinColumn
    protected Person person; // creator or updater
    @Column(updatable=false, insertable=false, columnDefinition="TIMESTAMP DEFAULT   CURRENT_TIMESTAMP")
    @Temporal(TemporalType.TIMESTAMP)
    protected Date changeDate;
    protected String comment;
    //getter and setter
} 
```

我的方法是创建一个新的 LogEntry 对象并将其添加到实体的 LogEntry 列表中，然后再更新或保留实体。

我尝试了以下解决方案：

*   直接在实体类中使用回调注释（@PreUpdate、@PrePersist 等）或在与 AbstractEntity 连接的实体侦听器中分离
*   在实体监听器中使用 EclipsLink 的 DescriptorEvent 和相应的回调方法。这是最有希望的试验。在 preUpdate 中，我可以向受影响的对象添加一个新的 LogEntry。添加的 LogEntry 甚至被正确地持久化了，但是 preUpdate 将被任何数据库操作调用（选择也会导致调用 preUpdate），所以我不能区分更改的对象和没有更改的对象。描述符事件、相关查询或 unitOfWork 提供的变更集在每种情况下都是空的。当前对象和旧对象的比较（由描述符事件提供）恕我直言太复杂了，不是吗？另一方面，在 preUpdateWithChanges 中，我可以轻松检测到更改的实体，但此时添加日志条目显然为时已晚。日志条目不会被持久化。

几乎每个试验都使我能够更改受影响实体的属性（如名称或 validTo）。但是没有解决方案提供创建新 LogEntry 实例的机会，或者更确切地说是持久化这个 LogEntry 实例。我还尝试通过 jndi 查找获取会话 bean 的实例，以手动保存 LogEntry。jndi 查找有效，但调用会话 bean 的创建或更新方法无效。

我当前的实体侦听器如下所示：

```
public class ChangeListener extends DescriptorEventAdapter {

    @Override
    public void preUpdate(DescriptorEvent event) {
        AbstractEntity entity = (AbstractEntity) event.getObject();
        if (!(entity instanceof LogEntry)) {
            LogEntry logEntry = new LogEntry();
            logEntry.setPerson(getSessionController().getCurrentUser());
            logEntry.setAbstractEntity(entity);
            entity.getLogEntries().add(logEntry);
        }
    }
} 
```

由于各种原因，Hibernate Envers 是没有选择的。

EclipseLink 版本是 2.3.2。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T14:43:13.613

在提交过程中的事件期间持久化新对象可能很困难。

您可以在提交之前获取更改并保留您的日志（从 UnitOfWork 获取更改集）。

见， [http://wiki.eclipse.org/EclipseLink/FAQ/JPA#How_to_access_what_changed_in_an_object_or_transaction.3F](http://wiki.eclipse.org/EclipseLink/FAQ/JPA#How_to_access_what_changed_in_an_object_or_transaction.3F)

否则，可以直接从事件内部插入和对象。

IE

```
event.getSession().insertObject(logEntry); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-17T08:20:05.533

我暂时通过比较 preUpdate 中的当前实体和旧实体来解决这个问题。比较是使用 Apache Commons Lang 的EqualsBuilder[完成](http://commons.apache.org/proper/commons-lang/)[的](http://commons.apache.org/proper/commons-lang/javadocs/api-release/index.html)。

```
public class ChangeAbstractEntityListener extends DescriptorEventAdapter {

    @Override
    public void preUpdate(DescriptorEvent event) {
        AbstractEntity originalEntity = (AbstractEntity) event.getOriginalObject();
        AbstractEntity entity = (AbstractEntity) event.getObject();

        if (!EqualsBuilder.reflectionEquals(originalEntity, entity, true)) {
            if (!(entity instanceof LogEntry)) {
                LogEntry logEntry = new LogEntry();
                logEntry.setPerson(getSessionController().getCurrentUser());
                logEntry.setAbstractEntity(entity);
                entity.getLogEntries().add(logEntry);
            }
        }
    }
    //jndi lookup to get the user object
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-03T09:26:15.183

您可以尝试[使用历史记录策略跟踪更改](https://wiki.eclipse.org/EclipseLink/Examples/JPA/History)

> EclipseLink 为跟踪对数据库所做的所有更改提供了扩展支持。EclipseLink HistoryPolicy 可以在 ClassDescriptor 上配置以存储原始镜像表，该镜像表将存储对象在任何时间点的状态。这可用于审计目的，或允许查询过去的时间点，或允许恢复旧数据。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-22T01:29:24.500

如果您想要简单的实体审计，那么 Hibernate 的 Envers 模块就是您的最佳选择。

它适用于 JPA（和 Spring-Data），并且可以存储每个更改的版本以及*谁*更改了它，如果你运行说 Spring Security。

Envers 自 3.6 起成为 Hibernate 的一部分

# android - 为 Android Sqlite 数据库设置密码

> ID：15680173
> 
> 赞同：2
> 
> 时间：2013-03-28T11:06:34.333
> 
> 标签：android, sqlite

我正在设计一个自定义库，在该库中存储机密数据。为了存储数据，我有 2 个选项。

1) 共享偏好。

2) Sqlite3 数据库。

如果，我使用`SharedPreferences`with `MODE_PRIVATE`。使用我的库的应用程序开发人员可以访问它。

第二个选项是 Sqlite3 数据库，在这里我可以存储，但应用程序开发人员仍然可以通过添加我的库来使用数据。

所以，我一直在寻找答案，我们是否可以选择在 Android 中为数据库设置密码。如果是，请指导..

预先感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:13:49.577

嘿，我也有同样的问题......

我有一个解决方案....

解决方案是双重密码：D

在这里，我们所能做的就是加密所有机密数据......

第 1 步：向用户询问两个密码（ Password1 和 Password2 ）而不是用户名和密码...

第 2 步：您可以使用 1 或 2 的密码加密所有数据...

第 3 步：要再次解密该数据，必须使用相同的密码。

已解决的问题：问题是我们如何将密码存储在数据库中。

我们所做的就是用另一个密码加密第一个密码.... 加密和解密参考这个链接

----> **[http://www.androidsnippets.com/encryptdecrypt-strings](http://www.androidsnippets.com/encryptdecrypt-strings)** <----

使用它就像魅力一样

所以最后过程是如何进行的

1.  求两个密码...
2.  将一个与另一个加密，然后将哈希与数据库中的哈希进行比较
3.  继续下一个
4.  在呈现给用户之前请注意解密所有数据.....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T11:10:26.353

SQLite 背后的公司提供了一个您可以使用的[商业解决方案。](http://www.hwaci.com/sw/sqlite/see.html)

但是，[SQLCipher](http://sqlcipher.net/sqlcipher-for-android/)是一个免费（和开源）的替代方案，它允许您加密您的 SQLite 数据库。

# android - 返回图像按钮不可点击？

> ID：15680174
> 
> 赞同：0
> 
> 时间：2013-03-28T11:06:36.340
> 
> 标签：android, android-layout, android-intent, android-widget

我有我的布局 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/screen_background">      

  <ImageButton
android:id="@+id/back_btn"
android:layout_width="30dp"
android:layout_height="190dp"
android:layout_alignParentLeft="true"
android:layout_centerVertical="true"
android:layout_marginLeft="-5dp"
android:background="@drawable/button_movielist_back"
/>

 <LinearLayout
                android:id="@+id/linearLayout1"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:orientation="vertical"
                android:layout_alignBottom="@+id/linearLayout01"
                android:layout_marginBottom="55dp">

<ImageView
                  android:id="@+id/imageView1"
                  android:layout_width="fill_parent"
                  android:layout_height="50dp"
                  android:src="@drawable/tone_movies_banner"
                  android:layout_alignParentTop="true"
                  android:scaleType="fitXY"/>

<HorizontalScrollView
                android:id="@+id/horizontalScroll"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">

                <LinearLayout
                    android:id="@+id/linearLayout3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content">                    

                    <Button
                                android:id="@+id/actionBtn"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:background="@drawable/button_action_movies"                
                                android:onClick="btnClicker"/>

                        <Button
                                android:id="@+id/comedyBtn"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:background="@drawable/button_comedy_movies"              
                                android:onClick="btnClicker" />

                        <Button
                                android:id="@+id/loveBtn"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:background="@drawable/button_love_movies"                
                                android:onClick="btnClicker" />

            </LinearLayout>
       </HorizontalScrollView>

<LinearLayout
            android:id="@+id/linearLayout01"
            android:layout_width="fill_parent"
            android:layout_height="50dp"          
            android:layout_alignParentBottom="true"
            android:layout_marginBottom="5dp">
    </LinearLayout>

</LinearLayout>
</RelativeLayout> 
```

我试图从布局中设置的 BackButton 图像是：

```
<ImageButton
android:id="@+id/back_btn"
android:layout_width="30dp"
android:layout_height="190dp"
android:layout_alignParentLeft="true"
android:layout_centerVertical="true"
android:layout_marginLeft="-5dp"
android:background="@drawable/button_movielist_back"
/> 
```

代码：

```
// Previous Button
                    ImageButton backBtn = (ImageButton) findViewById(R.id.back_btn);
                    backBtn.setOnClickListener(new View.OnClickListener() {

                        public void onClick(View v) {
                             Toast.makeText(v.getContext(), "Hello!! button Clicked", Toast.LENGTH_SHORT).show(); 
                            //Intent i = new Intent(getBaseContext(), SpecificationsActivity.class);
                            //i.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
                            //ShortfilmCategoryviewActivity.this.startActivity(i);

                        }
                    }); 
```

当我点击背景按钮时，它不可点击

我认为问题仍然存在于布局 xml 文件中

谁能告诉我从我的布局文件中放置 imagebutton 是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:09:05.633

我认为您的线性布局位于 imageButton 上方，这就是您无法访问 ImageButton 的原因。

**编辑**

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/screen_background">      

 <LinearLayout
                android:id="@+id/linearLayout1"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:orientation="vertical"
                android:layout_alignBottom="@+id/linearLayout01"
                android:layout_marginBottom="55dp">

<ImageView
                  android:id="@+id/imageView1"
                  android:layout_width="fill_parent"
                  android:layout_height="50dp"
                  android:src="@drawable/tone_movies_banner"
                  android:layout_alignParentTop="true"
                  android:scaleType="fitXY"/>

<HorizontalScrollView
                android:id="@+id/horizontalScroll"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">

                <LinearLayout
                    android:id="@+id/linearLayout3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content">                    

                    <Button
                                android:id="@+id/actionBtn"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:background="@drawable/button_action_movies"                
                                android:onClick="btnClicker"/>

                        <Button
                                android:id="@+id/comedyBtn"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:background="@drawable/button_comedy_movies"              
                                android:onClick="btnClicker" />

                        <Button
                                android:id="@+id/loveBtn"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:background="@drawable/button_love_movies"                
                                android:onClick="btnClicker" />

            </LinearLayout>
       </HorizontalScrollView>

<LinearLayout
            android:id="@+id/linearLayout01"
            android:layout_width="fill_parent"
            android:layout_height="50dp"          
            android:layout_alignParentBottom="true"
            android:layout_marginBottom="5dp">
    </LinearLayout>

</LinearLayout>

 <ImageButton
android:id="@+id/back_btn"
android:layout_width="30dp"
android:layout_height="190dp"
android:layout_alignParentLeft="true"
android:layout_centerVertical="true"
android:layout_marginLeft="-5dp"
android:background="@drawable/button_movielist_back"
/>

</RelativeLayout> 
```

# c++ - 向量和结构 C++

> ID：15680183
> 
> 赞同：1
> 
> 时间：2013-03-28T11:07:04.657
> 
> 标签：c++

我有一个文本文件，

```
猫莫莉
狗本吉
鸟查理（等）

```

在另一个文本文件中，“有一天猫出去躺在阳光下 - 狗已经在花园里......”（等等......）

我应该用它的名字替换动物。目前我正在阅读文件并将动物类型放在一个向量中，将动物名称放在另一个向量中。我的问题是 - 我是否需要将它们放在一个结构中，以便当我循环并找到 cat 时，我可以找到相关的名称 - 或者我是否使用另一种方法。我听说过多维向量，但我觉得它可能超出了我的想象，因为我对编程很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:10:30.107

似乎最适合您使用的结构是地图。它将允许您将动物与名称相关联，并轻松有效地查找动物的名称。

试试这个：

```
std::map<std::string, std::string> animal_names; 
```

第一个模板类型是*键*类型，第二个是*值*类型。在您的情况下，键是动物，值是名称。

然后，您可以插入与此的关联：

```
animal_names["cat"] = "molly"; 
```

非常简单！请注意，如果您现在遍历地图，您将按动物顺序获得它们。那就是`"bird"`先来，然后`"cat"`，然后`"dog"`。

如果您根本不关心订单，则可以改用`std::unordered_map`. 这将改善访问和插入时间。

* * *

既然你说你是一个初学者，我会给你一个我如何阅读你的文件的例子：

```
std::ifstream file("animal_names.txt");
std::string animal, name;
std::map<std::string, std::string> animal_names;

while (file >> animal >> name) {
  animal_names[animal] = name;
} 
```

稍后，如果您想打印出例如猫的名字，只需执行以下操作：

```
std::cout << animal_names["cat"] << std::endl; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T11:10:46.820

要将动物类型*映射*到它们的名称，您需要使用`std::map<std::string, std::string>`，其中键是动物，值是它的名称，例如：

```
std::map<std::string, std::string> animalNames;
animalNames["cat"] = "molly"; 
```

然后稍后当您将迭代时，`std::vector<std::string>`您只需检查您当前正在迭代的单词是否确实作为您的地图中的键存在，并将其替换为它的值。

# ios - 如何在 ios 6 中编写 SLComposeViewController 之前检查用户是否在 iphone 设置中输入了他的 facebook 详细信息

> ID：15680184
> 
> 赞同：1
> 
> 时间：2013-03-28T11:07:07.793
> 
> 标签：ios, facebook, facebook-login, slcomposeviewcontroller

我想在我的应用程序中编写 SLComposeViewController 之前显示一条警报消息，如何在 ios 6 中编写 SLComposeViewController 之前检查用户是否在 iphone 设置中输入了他的 facebook 详细信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T11:09:09.410

```
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook] 
```

返回一个布尔值，指示服务是否可访问以及**是否设置了至少一个帐户**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T07:26:46.250

```
i have figured this out . . . 

self.myStore = [[ACAccountStore alloc] init];
    ACAccountType *acct = [self.myStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
    NSArray *fbAccounts = [self.myStore accountsWithAccountType:acct];

    // Check to make sure the user has a FB account setup, or bail:
    if ([fbAccounts count] == 0) {
        userDoesNotHaveFBAccountSetup = YES;
        self.fbSwitch.enabled = NO;
        [[self fbSwitch] setOn:NO];
        [self viewDidLoad];
    } else {
        userDoesNotHaveFBAccountSetup = NO;
        self.fbSwitch.enabled = YES;
    } 
```

# javascript - 合并两个 jQuery 对象

> ID：15680185
> 
> 赞同：5
> 
> 时间：2013-03-28T11:07:12.827
> 
> 标签：javascript, jquery

我喜欢有一个带有一个或多个 jQuery 对象的返回值，以便将它们添加到 .

```
var f = function() {
    var a = $('<div class="a" />');
    // do someting awesome
    return a;
}; 
```

带有两个 s 的正确示例：

```
var f = function() {
    var ret = $('<div class="a" /><div class="b" />');
    // do something spectecular
    return ret;
}; 
```

问题是我需要在函数内部分离这两个对象，这不是正确的代码：

```
var f = function() {
    var a = $('<div class="a" />'),
        b = $('<div class="b" />'),
        ret = a+b;
    // do something fabulous
    return ret;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T11:08:49.610

您可以使用[jQuery`.add()`方法](http://api.jquery.com/add/)：

```
return a.add(b); 
```

从文档：

> 给定一个表示一组 DOM 元素的 jQuery 对象，.add() 方法从这些元素的并集和传递给该方法的元素构造一个新的 jQuery 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:09:36.570

我刚刚为自己的问题找到了解决方案：

```
var f = function() {
    var a = $('<div class="a" />'),
        b = $('<div class="b" />'),
        ret = $.extend({}, a);
    ret.push(b[0]);
    // do something fabulous
    return ret;
} 
```

也许你有更好的解决方案？它看起来不太好你知道的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-12T12:56:58.623

看一下这个：

```
var $bindDivs = $.merge( $( '#div1' ), $( '#div2' ) ); 
```

# css - CSS正确的类选择器不理解

> ID：15680187
> 
> 赞同：1
> 
> 时间：2013-03-28T11:07:15.820
> 
> 标签：css, class

现在我以这种方式拥有我的代码；

CSS：

```
.dhimage{
 width:25px;
 height:25px;
} 
```

JAVASCRIPT：

```
var image = document.createElement('img');
image.className= 'dhimage'; 
```

如果我像这样格式化 CSS 会发生什么变化：

```
.something .dhimage{
 width:25px;
 height:25px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:08:56.787

这意味着，您新创建的图像必须在具有 class 的容器内`something`，然后才会将 class dhimage 的属性应用于它。IE

```
<div class="something" >
   <img class="dhimage" />
</div> 
```

如果你的标记像上面那样，那么只有在 css 下面才会起作用

```
.something .dhimage
{
   width:25px;
   height:25px; 
} 
```

它被称为[CSS 特异性](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)。

但是，如果您直接定义 css 即

```
.dhimage
{
   width:25px;
   height:25px; 
} 
```

它将独立于父级的 CSS 工作。

现在为什么这样做了。

说你有一个班级名称`menu`。但是您希望页面页脚内的菜单和页面标题内的菜单不同的菜单类，但您仍然希望保留名称`menu`，因为您对网站上的所有菜单也有一些共同的规则像 font-family 或其他什么。那么你可以定义如下：

```
.menu
{
   font-family:'Times';
}
.header .menu
{
  color:Red;
}
.footer .menu
{
  color:Orange;
} 
```

你的标记就像

```
<div class="header">
  <ul class="menu">
  </ul>
</div>

<div class="content">
</div>

<div class="footer">
  <ul class="menu">
  </ul>
</div> 
```

您的页眉和页脚菜单将具有不同的颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:09:39.937

没什么，真的，除了这样一个事实，为了使样式 from`.dhimage`有效，包含该 class 的元素必须在具有 class 的元素内`.something`。

# actionscript-3 - AS3 在按钮单击时加载外部 swf

> ID：15680188
> 
> 赞同：0
> 
> 时间：2013-03-28T11:07:21.890
> 
> 标签：actionscript-3, button, flash

在 AS3 (Flash) 中，我希望在单击特定菜单按钮时加载外部 swf 文件。当我单击另一个按钮时，我还希望 swf 消失，以便可以加载另一个 swf。这段代码显示了我的 swf，但它只是“循环”。它还覆盖了我的菜单（在页面顶部），所以我无法点击任何地方。我可以在代码中更改什么来解决这个问题？

```
var loader_mc : Loader = new  Loader();
   addChild(loader_mc);

bilder_btn.addEventListener(MouseEvent.CLICK,  buttonClick)
function  buttonClick(e:MouseEvent):void
{
     try{
loader_mc.unloadAndStop();
} catch(e:Error) {
}
      var urlRequest : URLRequest = new  URLRequest("flickr.swf");
      loader_mc.load(urlRequest);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:24:55.743

1.  更改`loader_mc`X 和 Y 以使加载的 SWF 不会覆盖您的菜单。
2.  您可以更好地重新初始化它`loader_mc`以加载另一个 SWF，也就是说，创建一个`new Loader()`旧`removeChild()`的加载器，`addChild()`新的加载器，然后加载。

# sql - 如何从前一行插入累积添加？

> ID：15680189
> 
> 赞同：0
> 
> 时间：2013-03-28T11:07:22.773
> 
> 标签：sql, postgresql

在下表中

```
----------------------------
|  id  |    day   | count  |
----------------------------
    1   2013-01-01    10
    1   2013-01-05    20
    1   2013-01-08    45 
```

第二和第三行的计数列是累积的，即 20 =（第一行的 10 + 10 个额外的计数）和 45（第二行的 20 + 25 个额外的计数）。如何在 Postgresql 中使用累积添加插入第二行和第三行（以及更多行）？

注意：附加计数是从程序中的变量中读取的。因此，目的是将这个值存储在 Postgresql 的“计数”列中，但也将它与最后一个条目找到的“计数”按日期升序添加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:16:12.837

由于您没有说*额外计数*来自哪里，我假设有一个*额外的计数*列：

```
select *,
    sum(additional_count) over(order by "day")  "count"
from t
order by "day" 
```

`sum`作为窗口函数的函数进行运行总计。当它使用`over`子句时，它是一个窗口函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:20:52.810

如果问题是带有 select 的插入语句可能如下所示：

```
insert into x(id, day, count) 
select 1, current_timestamp, 
coalesce((select max(count) from x), 0) + 10; 
```

但这不一定是解决问题的最佳方法。

# c++ - #include 之间有什么区别 和#include ?

> ID：15680190
> 
> 赞同：6
> 
> 时间：2013-03-28T11:07:23.070
> 
> 标签：c++, iostream

和有什么区别

`#include <iostream.h>`

和

`#include <iostream>`

?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T11:14:34.857

在 C++ 标准化之前，I/O 库被开发为`<iostream.h>`. 但是，该标头从来都不是标准的 C++ 标头。一些较旧的编译器继续将`<iostream>`头文件分发为`<iostream.h>`. 使用`<iostream>`，因为它是由标准保证存在。

值得注意的是，唯一`.h`以 C 标准库头文件结尾的标准头文件。所有 C++ 标准库头文件都不以`.h`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T11:15:15.780

`<iostream>` 是通常的标题

`<iostream.h>` 是旧的头文件，一些编译器不再支持

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:13:07.223

它仅取决于您的工具链提供的文件的名称。一些（旧）编译器使用`.h`文件。现代编译器通常使用`<iostream>`（不带`.h`扩展名）。

# sonarqube - 编写声纳插件来测量类的使用情况

> ID：15680191
> 
> 赞同：0
> 
> 时间：2013-03-28T11:07:25.173
> 
> 标签：sonarqube

我需要编写一个 Sonar 插件来跟踪项目中使用最多的库类。

到目前为止，我阅读了[Coding a Plugin](http://docs.codehaus.org/display/SONAR/Coding+a+Plugin)指南，但我有点困惑。Sonar 是否提供任何工具来执行分析（例如解析 Java 代码、创建抽象语法树等），还是我应该寻找一个外部工具来执行分析并将 Sonar 仅用作报告工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:24:12.077

Sonar 提供了一个框架，用于将您自己的代码分析结果发布到 Sonar 中，以便将它们放在一个地方。虽然它自己做了一些分析，但它主要依赖于其他静态代码分析工具，只是将它们集成到生命周期中，例如，测试覆盖可以通过 cobertura 或 clover 实现。

听起来对我来说就像你只是为了衡量可以为单个库配置的[传入耦合。](http://docs.codehaus.org/display/SONAR/Metric+definitions)不确定如何管理跨库依赖项，因为大多数插件通过在编译时使用代码检测来工作，这对于 jar 中已经存在的类是不可能的。

如果您只想生成 AST，那么您应该[查看这个问题](https://stackoverflow.com/questions/1967987/how-to-generate-ast-from-java-source-code)。

# agile-processes - 将查询添加到流程模板中的团队收藏夹 - TFS2012

> ID：15680193
> 
> 赞同：3
> 
> 时间：2013-03-28T11:07:26.650
> 
> 标签：agile-processes, tfs-process-template

我们正在使用 TFS2012 的敏捷过程模板（稍作修改），我想在模板中将查询添加到团队收藏夹，以便在创建新团队项目时自动添加它们。我们希望看到每个团队项目的相同查询。

我已经修改了模板，以便创建一个名为“当前”的迭代，而不是创建 3 个迭代（迭代 1、迭代 2 和迭代 3）。然后，我更新了所有查询以指向“当前”迭代而不是迭代 1。现在我需要将这些查询添加到团队收藏夹中，以便它们自动显示在 Web 屏幕上。

这可以做到吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:53:55.940

很确定查询与一个团队项目相关，并且仅与一个项目相关。

可以通过以下步骤在团队收藏夹部分显示查询：

> 1.  在团队主页中，单击查看工作项的链接
>     
>     
> 2.  在工作项页面左窗格中，找到要显示的查询
>     
>     
> 3.  右键单击查询名称
>     
>     
> 4.  选择“添加到团队收藏夹””

另请参阅以下文章，共享查询部分：

```
http://msdn.microsoft.com/en-us/library/dd286695.aspx 
```

# rdf - SPARQL 查询中的错误

> ID：15680198
> 
> 赞同：0
> 
> 时间：2013-03-28T11:07:36.047
> 
> 标签：rdf, sparql, dbpedia

我的 SPARQL 查询出现错误，但找不到：

**询问**

```
PREFIX owl: <http://www.w3.org/2002/07/owl#> 
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> 
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
PREFIX dbpedia-owl: <http://dbpedia.org/ontology/> 
PREFIX : <http://dbpedia.org/resource/> 
PREFIX dbpedia2: <http://dbpedia.org/property/> 
PREFIX dbpedia: <http://dbpedia.org/> 
SELECT DISTINCT ?lat, ?long { 
:Taj_Mahal dbpedia2:latitude ?lat . 
:Taj_Mahal dbpedia2:longitude ?long } 
```

**错误**

```
Encountered " "," ", "" at line 9, column 21.
Was expecting one of:
     ...
     ...
    "from" ...
    "where" ...
    "(" ...
    "{" ... 
```

有什么建议吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:52:21.643

你不应该在和之间`?lat`加逗号`?long`

```
SELECT DISTINCT ?lat ?long { 
    :Taj_Mahal dbpedia2:latitude ?lat . 
    :Taj_Mahal dbpedia2:longitude ?long 
} 
```

[运行查询](http://dbpedia.org/snorql/?query=SELECT%20DISTINCT%20?lat%20?long%20%7B%20%0D%0A%3aTaj_Mahal%20dbpedia2%3alatitude%20?lat%20.%20%0D%0A%3aTaj_Mahal%20dbpedia2%3alongitude%20?long%20%7D%0D%0A)

# c++ - 断点不指向实际代码

> ID：15680199
> 
> 赞同：0
> 
> 时间：2013-03-28T11:07:39.207
> 
> 标签：c++, visual-studio-2010, debugging, doxygen, breakpoints

有没有人知道什么可能导致断点不显示代码在特定文件中的实际位置？

这是我第二次发生这种情况..也许有人可以帮忙，我的参数：

我在视觉工作室 2010 工作。

这个特别是一个静态库，但它也发生在我的 dll 中。

PDB 是在 Z7 中生成的，尽管在我的默认 pdb 生成中也发生了这种情况。

我确信代码是用正确的 lib 编译的（也发生在 dll 中所以..）

我也有一些我最初怀疑导致此问题的 Doxygen 评论（可能是？）

*   附件是一张图片，显示了断点箭头与其实际位置的调用堆栈的比较。

谢谢！ ![错误的调试](../Images/d1a0a1f93678f6c7428ba66cb3a822be.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:10:10.617

如果您调试启用了优化的代码，则该方法可能只是内联。这至少是断点未指向正确位置的一种已证实来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:12:30.203

我通常注意到的一种情况是，由于在调试时从源代码管理中获取文件而导致源文件发生更改。断点使用旧代码的行号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:21:45.433

因此，显然 Visual Studio 文本编辑器不能很好地适应 CR。我发现该文件有一些 CR（而不是 CRLF），这使编译器混淆在一起。当我真的故意犯了编译错误时，它甚至没有指向正确的行...

所以我在每个 CR 之后添加了 LineFeeds(LF) 并且它编译得很好......（使用 notepad++ 来检测它丢失的位置，但我确信 VS 也有办法......）干杯。

# c# - 如何使用存储过程将当前日期插入表中？

> ID：15680202
> 
> 赞同：4
> 
> 时间：2013-03-28T11:07:39.807
> 
> 标签：c#, asp.net, sql-server-2008

我有一个名称为介质的表，并且有一个列名称介质名称和创建日期我创建了存储过程来插入特定的上述两个值。下面是我的存储过程

```
alter procedure insertmediumproc
    @MediumName varchar(50) ,@CreationDate datetime
as 
begin
    insert into medium  (MediumName, CreationDate) values(@MediumName,getdate())
end 
```

当我尝试使用以下命令在表中插入值时：

```
exec insertmediumproc Nepali,getdate() 
```

它在下面显示错误：消息 102，级别 15，状态 1，第 1 行 ')' 附近的语法不正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:12:17.790

如果您始终希望当前日期作为 CreationDate 列的值，您可以在表上使用默认值并修改您的 proc 以仅将 @mediumnamn 作为参数。或者您可以将其修改为：

```
alter procedure insertmediumproc @MediumName varchar(50)
as begin
insert into medium (MediumName, CreationDate) values (@MediumName,getdate())
end 
```

这样您就不必将日期作为参数发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:09:05.900

你忘了周围的报价`Nepali`

```
exec insertmediumproc 'Nepali', getdate() 
```

你的插入语句应该是

```
insert into medium (MediumName, CreationDate) 
values (@MediumName, @CreationDate) 
```

如果您只需要 a`date`那么您可以将参数类型从更改`datetime`为`date`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T11:09:25.020

您有语法错误-您没有传入正确的`VARCHAR`-您需要引用该值：

```
exec insertmediumproc 'Nepali',getdate() 
```

# c - C中的循环崩溃

> ID：15680205
> 
> 赞同：0
> 
> 时间：2013-03-28T11:07:58.083
> 
> 标签：c, do-while

我对 C 很陌生，我仍在学习基础知识。我正在创建一个读取文本文件并单独分解单词的应用程序。我的意图是计算每个单词出现的次数。

无论如何，下面代码中的最后一个 do-while 循环执行得很好，然后崩溃了。此循环将内存地址打印到该字（指针），然后打印该字。它可以很好地完成此操作，然后在最后一次迭代中崩溃。我的意图是将这个内存地址推送到一个单链表中，尽管它一旦停止崩溃。

另外，只是简单地提一下下面的数组大小；我还想出如何设置保存单词字符数组等所需的正确大小，因为您必须在填充数组之前定义大小，而我不知道该怎么做。因此，我将它们设置为 1024。

```
#include<stdio.h>
#include<string.h>

int main (int argc, char **argv) {

    FILE * pFile;
    int c;
    int n = 0;
    char *wp;
    char wordArray[1024];
    char delims[] = " "; // delims spaces in the word array.
    char *result = NULL;
            result = strtok(wordArray, delims);
    char holder[1024];

    pFile=fopen (argv[1],"r");
    if (pFile == NULL) perror ("Error opening file");
    else {
            do {
                c = fgetc (pFile);
                wordArray[n] = c;
                n++;
            } while (c != EOF);
            n = 0;
            fclose (pFile);

            do {
                result = strtok(NULL, delims);
                holder[n] = *result; // holder stores the value of 'result', which should be a word.
                wp = &holder[n]; // wp points to the address of 'holder' which holds the 'result'.
                n++;
                printf("Pointer value = %d\n", wp); // Prints the address of holder.
                printf("Result is \"%s\"\n", result); // Prints the 'result' which is a word from the array.
                //sl_push_front(&wp); // Push address onto stack.
            } while (result != NULL);
    }       
    return 0; 
```

}

请忽略糟糕的程序结构，正如我所提到的，我是新手！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:11:09.903

正如其他人指出的那样，您的第二个循环`result` *在*检查它是否为`NULL`. 重组你的代码如下：

```
result = strtok( wordArray, delims ); // do this *after* you have read data into
                                      // wordArray
while( result != NULL )
{
  holder[n] = *result; 
  ...
  result = strtok( NULL, delims );
} 
```

虽然...

您试图在将文件分解成单词之前将文件的全部内容读入内存；这不适用于大于缓冲区大小（当前为 1K）的文件。如果我可以提出建议，请更改您的代码，以便您在阅读时阅读单个单词。这是一个将输入流分解为由空格（空格、换行符、制表符等）和标点符号（句点、逗号等）分隔的单词的示例：

```
#include <stdio.h>
#include <ctype.h>

int main(int argc, char **argv)
{
  char buffer[1024];
  int c;
  size_t n = 0;

  FILE *input = stdin;

  if( argc > 1 )
  {
    input = fopen( argv[1], "r");
    if (!input)
      input = stdin;
  }

  while(( c = fgetc(input)) != EOF )
  {
    if (isspace(c) || ispunct(c))
    {
      if (n > 0)
      {
        buffer[n] = 0;
        printf("read word %s\n", buffer);
        n = 0;
      }
    }
    else
    {
      buffer[n++] = c;
    }
  }
  if (n > 0)
  {
    buffer[n] = 0;
    printf("read word %s\n", buffer);
  }
  fclose(input);
  return 0;
} 
```

没有任何明示或暗示的保证（在早上 7:00 之前敲定了这一点）。但它应该让您了解如何在执行过程中解析文件。如果不出意外，它会避免使用`strtok`，这*不是*解析输入的最佳工具。您应该能够使这种通用结构适应您的代码。为了获得最佳结果，您应该将其抽象为自己的函数：

```
int getNextWord(FILE *stream, char *buf, size_t bufsize)
{
  int c;
  size_t n = 0;

  while(( c = fgetc(input)) != EOF && n < bufsize)
  {
    if (isspace(c) || ispunct(c))
    {
      if (n > 0)
      {
        buf[n] = 0;
        n = 0;
      }
    }
    else
    {
      buffer[n++] = c;
    }
  }
  if (n > 0)
  {
    buffer[n] = 0;
    printf("read word %s\n", buffer);
  }

  if (n == 0)
    return 0;
  else
    return 1;
} 
```

你会这样称呼它

```
void foo(void)
{
  char word[SOME_SIZE];
  ...
  while (getNextWord(inFile, word, sizeof word))
  {
    do_something_with(word);
  }
  ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:13:23.133

如果您期望在您的`do...while`代码中，那`result`可能是`null`（这是循环中断的条件），您如何看待这个代码行：

`holder[n] = *result;`

必须工作吗？在我看来，这是您的程序崩溃的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T11:15:01.220

`do while`将循环更改为`while`

采用

```
while (condition)
{
} 
```

代替

```
do {
}while(condition) 
```

它正在崩溃，因为您试图`result`在 do while 循环中取消对 NULL 指针的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T11:42:28.463

我主要使用Objective-C，只是为了好玩而看你的问题，但我可能有一个解决方案。

`n=0;`在你的第一个 do-while 循环之后设置之前，创建另一个名为的变量`totalWords`并将其设置为等于 n，totalWords 可以在文件中的任何位置声明（除了在一个 do-while 循环中），但可以在顶部定义else 阻塞，因为它的生命周期很短：

```
totalWords = n; 
```

然后您可以将 n 设置为零：

```
n = 0; 
```

最后一个 do-while 循环的条件应该说：

```
...
} while (n <= ++totalWords); 
```

因此，应用程序背后的逻辑会说，计算文件中的单词数（有 n 个单词，即文件中的总单词数）。当程序将结果打印到控制台时，它将运行第二个 do-while 循环，该循环将一直运行，直到 n 是一个超过 totalWords 值的结果（这确保您打印最后一个单词）。

或者，对于其他程序员来说，使用一个半循环是更好的做法和更清晰的做法：

```
do {
result = strtok(NULL, delims);
holder[n] = *result;
wp = &holder[n];
printf("Pointer value = %d\n", wp);
printf("Result is \"%s\"\n", result);
//sl_push_front(&wp); // Push address onto stack.
if (n == totalWords) break; // This forces the program to exit the do-while after we have printed the last word
n++; // We only need to increment if we have not reached the last word
// if our logic is bad, we will enter an infinite loop, which will tell us while testing that our logic is bad.
} while (true); 
```

# python - Python中的未绑定错误

> ID：15680211
> 
> 赞同：0
> 
> 时间：2013-03-28T11:08:15.847
> 
> 标签：python, tornado, typeerror

我有这个错误：

```
[E 130328 12:04:09 ioloop:481] Error in periodic callback
    Traceback (most recent call last):
      File "/usr/lib/python2.6/site-packages/tornado/ioloop.py", line 479, in _run
        self.callback()
    TypeError: unbound method check_commands_response() must be called with CheckCommandResponse instance as first argument (got nothing instead) 
```

我有这部分代码：

```
class CheckCommandResponse(BaseHandler):
    @tornado.web.authenticated
    @tornado.web.asynchronous
    @tornado.gen.engine
    def check_commands_response(self):
        self.lock_tables("read", ['networks'])
        nets = self.db.query("SELECT DISTINCT netid from networks")
        self.unlock_tables

        for net in nets:
            got_commands_response(net)

    def got_commands_response(netid):
        como_url = "".join("http://131.114.52.207:44444/ztc_config?netid=" \
                   + netid + "&opcode_group=0&opcode=0&start=-10s&end=-1s")

        http_client = AsyncHTTPClient()
        #asynchronous alternative to time.sleep
        yield tornado.gen.Task(tornado.ioloop.IOLoop.instance().add_timeout, time.time() + 5)
        response = yield tornado.gen.Task(http_client.fetch, como_url)

        print response

################################################################################
# Application Entry Point
################################################################################
def main():
    tornado.options.parse_command_line()
    http_server = tornado.httpserver.HTTPServer(Application())
    http_server.listen(options.port)
    periodic = tornado.ioloop.PeriodicCallback(CheckCommandResponse.check_commands_response, 5000)
    periodic.start()
    tornado.ioloop.IOLoop.instance().start() 
```

我必须实例化主类？有什么错误？

**编辑**

BaseHandler 类是这样的：

```
###############################################################################
# Base handler. All the handlers should inherit from it.
###############################################################################
class BaseHandler(tornado.web.RequestHandler):
    @property
    def db(self):
        return self.application.db

    # utility functions for tables LOCK/UNLOCK
    def lock_tables(self, lock_type, tables):
        assert(tables != None)
        assert(lock_type.upper() in ["READ", "WRITE"])
        tables = map(lambda x: x + " " + lock_type, tables)
        self.db.execute("LOCK TABLES " + (", ".join(tables)))

    def unlock_tables(self):
        self.db.execute("UNLOCK TABLES") 
```

# android - ExpandableListView 每行有 2 个项目，获取子值

> ID：15680214
> 
> 赞同：0
> 
> 时间：2013-03-28T11:08:24.863
> 
> 标签：android, expandablelistview, children, expandablelistadapter

我正在`ExpandableListActivity`与`ExpandListAdapter`.

**我的布局：**

```
---------------------------------
|  <TextView>                   |
|                               |
|-------------------------------|
| <ExpandableList>            | |
|  group1                     | |
|   child1: textView editText | |
|   child2: textView switch   | |
|  group2                     | |
|   child1: textView textView | |
|-------------------------------| 
| <footerView>                  |
|  [button]                     |
--------------------------------- 
```

这是我的 child_layout （删除了不必要的部分）：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/tvChild"
        android:layout_width="400px"
        android:layout_height="wrap_content"
        android:focusable="false" />

    <EditText
        android:id="@+id/etChild"
        android:layout_width="400px"
        android:layout_height="wrap_content"
        android:visibility="gone" />

    <TextView
        android:id="@+id/tvChild2"
        android:layout_width="600px"
        android:layout_height="wrap_content"
        android:visibility="gone" />

    <Switch
        android:id="@+id/switchChild"
        android:layout_width="400px"
        android:layout_height="wrap_content"
        android:textOff="NO"
        android:textOn="YES"
        android:visibility="gone" />
</LinearLayout> 
```

这就是我向每个孩子添加按钮、开关或 textView 的方式：

```
 Switch swc = (Switch) view.findViewById(R.id.switchChild);
    EditText etc = (EditText) view.findViewById(R.id.etChild);
    TextView tvc = (TextView) view.findViewById(R.id.tvChild2);

    if (groupPosition == 0) {
        swc.setVisibility(View.GONE);
        tvc.setVisibility(View.GONE);
        etc.setVisibility(View.GONE);
        if (childPosition == 0) 
            etc.setVisibility(View.VISIBLE);
        if (childPosition == 1) 
            etc.setVisibility(View.VISIBLE);
        if (childPosition == 2) {
            tvc.setVisibility(View.VISIBLE);
            tvc.setText(GlobalVariables.currentSelectedCar);
        }
    } 
```

因此，每个孩子都有一个`TextView`不会改变的，加上其中一个`EditText/TextView/Switch`可由用户编辑。当我单击底部的按钮时，我想获得每个孩子的可编辑项目值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:44:54.103

我相信您可以以与获取包含在常规`ListView`. [ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html#setOnChildClickListener%28android.widget.ExpandableListView.OnChildClickListener%29)具有内置方法，可让您找出单击了哪个项目。一旦您知道单击了列表中的哪个项目，您就可以简单地从与该项目关联的各个视图中提取值。我会做以下事情：

(1)`setOnGroupClickListener`为您的`ExpandableListView`. 除了其他事项外，`onGroupClick`侦听器还获得了被选择的视图及其在列表中的位置。

(2) 一旦您知道选择了列表中的哪个项目，您应该能够以两种方式之一提取数据。如果您要查找的数据是固定的，请使用位置指示器从支持列表的适配器检索该数据。如果您正在该选定项目中寻找视图（听起来像您） ，请`findViewById`在返回的视图上使用。例如 - 作为`onGroupClick`提供 View v 作为参数的方法

```
String input = v.findViewById(R.id.etChild).getText().toString(); 
```

调用`findViewById`提供的视图`onGroupClick`应该允许您在该视图中查看您提供的 id 的子视图。这样您就可以从每个列表项的输入字段中提取数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-21T13:17:07.787

来自#Rarw 的想法

```
TextView input = (TextView) v.findViewById(R.id.child_item_elv);
Toast.makeText(getActivity().getApplicationContext(), "child clicked : " + input.getText() , Toast.LENGTH_SHORT).show(); 
```

这个工作，在里面`OnGroupListener`

# iphone - 从 iPhone 应用程序中删除自动更新订阅

> ID：15680219
> 
> 赞同：8
> 
> 时间：2013-03-28T11:08:36.847
> 
> 标签：iphone, ios, in-app-purchase, auto-renewing

我有一个 iPhone 应用程序，它还具有自动更新产品作为应用程序内购买功能。这些产品是我们未来长达 1 年服务的订阅。我们想在下一个版本中从我们的应用程序中删除整个应用内购买和自动更新产品。

为此，我们删除了应用程序中的注册选项，因此新用户应该无法注册。现在我们想禁用所有现有用户的自动续订。

我怎样才能做到这一点？在 iTunes Connect 中删除我们应用的应用内产品是否足够？用户会收到通知吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-06T17:07:12.423

根据 Apple 的说法（请参阅[WWDC 2011 Session 510](https://developer.apple.com/videos/wwdc/2011/)，*In App Purchases for iOS and OS X*，在 48:55 标记处），作为开发人员，您可以做的唯一事情是防止订阅自动续订：

*   抬高价格。
*   从 iTunes Connect 中删除自动续订 IAP 产品。

在这两种情况下，通知电子邮件都会发送给订阅者，但不会立即发送。谈话中说苹果会在（每年）续订前 10 天进行检查，并在那时发送电子邮件。但是，它没有在任何地方记录，因此我将其视为实现细节。

我已经用我自己的（每月）应用程序多次完成了后者（删除产品），它似乎像宣传的那样工作。

一个重要提示：如果您的应用是报亭应用，它必须至少有一个可用的自动续订订阅。如果您删除最后一个，该应用程序将从 App Store 中删除。已经购买的用户仍然可以使用它，并且可以从应用商店的“以前购买的”部分下载副本，但不会出现新的副本以供在 App Store 中购买。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T09:12:26.697

这将取决于您如何实现您的系统。您是从自己的服务器检查收据（并提供数据/服务），还是直接使用 Apple 的服务器在应用程序内完成所有操作？

在 iTunes Connect 中，您可以将产品从销售中删除，立即生效或在将来生效。我怀疑这足以停止续订。（请记住，您可以在沙盒中使用缩短的时间尺度进行测试。）但如果不是：

*   如果您使用自己的服务器来验证收据，请给它一个不正确的共享密钥，以便验证步骤失败。这意味着订阅有效期将返回为 false（尽管出于“错误”原因），因此您的客户将无法续订。

*   如果您在应用程序中执行此操作，请生成一个新的共享密码，这样您现有结构中的密码就会不正确。然后，如上。

*   如果可以的话，我建议向您当前的用户发送通知，通知他们更改，建议他们更改，并让他们知道将来会“失败”，但这没关系。

# c - 如何从字符串中按数字分隔单词

> ID：15680220
> 
> 赞同：0
> 
> 时间：2013-03-28T11:08:37.067
> 
> 标签：c, string, fgets, words

我有一个名为 commands.txt 的文本文件，其中包含一些命令和一些参数。例子：

```
STOP 1 2 4
START 5 2 1 8
MOVE
CUT 0 9 
```

我想从这个文本文件中读取每一行并打印这样的东西

```
STOP: 1 2 3
START: 5 2 1 8
MOVE:
CUT: 0 9 
```

我用 fgets 阅读了每一行，然后我尝试使用 sscanf 但不起作用。

```
char line[100]   // here I put the line
char command[20] // here I put the command
args[10]         // here I put the arguments

 #include<stdio.h>
    int main()
    {
    FILE *f;
char line[100];
char command[20];
int args[10];

f=fopen("commands.txt" ,"rt");
while(!feof(f))
{
fgets(line , 40 , f);
//here i need help
}
fclose(f);
return 0;
} 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:16:28.617

看看[这个](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)，并使用空白字符作为分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:18:49.003

您可以使用`fscanf()`从文件中读取。

如果我们假设在您的文件中，除了换行符之外，每一行的末尾都没有空格（空格、制表符、..），那么您可以使用以下代码。`fgets`它比每次使用和拆分更简单

```
int main()

{
    FILE *f;
    char command[20];
    char args[10];
    f=fopen("commands.txt" ,"rt");
    while(fscanf(f, "%s %[^\n]", command, args)>0)
    {
        printf("%s: %s\n", command, args);
    }
} 
```

# iphone - 我的 iOS App 目标被错误删除

> ID：15680226
> 
> 赞同：6
> 
> 时间：2013-03-28T11:08:50.270
> 
> 标签：iphone, ios, xcode

我错误地在 iOS 中删除了我的 App 目标。它让我得到了旧版本并再次替换了类并构建它，这很危险。有没有一种简单的方法可以将目标添加到应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:12:07.057

检查此 SO 问题的所有**答案**：[如何重新创建已删除的目标？](https://stackoverflow.com/questions/6237006/how-to-recreate-a-deleted-target)

**首选的是Joshua Nozzi**给出的答案。

# wordpress - 限制登录访问 wp？

> ID：15680235
> 
> 赞同：0
> 
> 时间：2013-03-28T11:09:06.737
> 
> 标签：wordpress

我想限制我在 wordpress 上的登录访问。用户只能通过 登录`http://wp.com/admin-login`。除了（即 wp-admin/wp-login.php/whatever），用户将重定向到主页。怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:23:44.647

如果您有权访问文件系统，则可以使用`.htaccess`文件来阻止来自特定 IP 地址或站点的用户。您必须将文件保存`.htaccess`在要阻止访问的文件夹中。

首先，创建一个名为的空白文件`.htaccess`，并确保将其保存为“所有文件”文件类型（如果在 Windows 上使用记事本）。

将以下内容放入文件中：

```
order allow, deny
deny from all
allow your-ip-address-here 
```

保存文件并将其放在相应的文件夹中。现在您只能从 your-ip-address-here 访问该文件夹。

如果您尝试从其他任何地方访问该文件夹，服务器将给出`403 Forbidden`错误。如果您将`.htaccess`文件放在文件系统的根目录中，那么整个站点将只能从该 ip 访问。

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:23:57.500

您可以使用插件[http://wordpress.org/extend/plugins/better-wp-security/](http://wordpress.org/extend/plugins/better-wp-security/)在该插件下激活它有一个选项卡隐藏您可以根据需要更改为所需的登录。希望这对您有用，您可以通过这里获得更多安全性:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-07T21:00:46.513

现有的 Wordpress 并不那么安全。我个人知道，我管理着 10 多个站点，它们经常受到来自世界各地的流氓服务器的攻击。（就像这个来自韩国的可爱人物[http://www.ip-adress.com/ip_tracer/1.234.83.77](http://www.ip-adress.com/ip_tracer/1.234.83.77)）

我强烈推荐[http://wordpress.org/plugins/better-wp-security/](http://wordpress.org/plugins/better-wp-security/)。你不需要推出自己的安全性，使用他们提供的东西，嘿，如果你喜欢它，那就去专业吧！我与公司完全没有关系，但我在他们的插件上取得了很大的成功。

按照所有步骤，锁定所有内容，修复文件权限并交叉手指。如果有人想进去，他们会找到方法的。您只能尝试降低所有风险。

此外，如果您使用自己的 linux 虚拟主机（rackspace/amazon/etc），我建议您使用 linux ufw。

```
sudo aptitude install ufw 
sudo ufw allow 80
sudo ufw allow 22
sudo ufw allow 443
sudo ufw enable
sudo ufw status 
```

最后一个建议fail2ban 是一个很好的资源，不是直接用于wordpress，而是用于任何登录到您的服务器。它将锁定类似于 Better WP Security 的个人。

祝你好运，让我们知道你的决定！

# java - 用户完成后在 EditText 框中格式化文本

> ID：15680239
> 
> 赞同：0
> 
> 时间：2013-03-28T11:09:20.877
> 
> 标签：java, android

我想在用户完成后更改 EditText 框的内容。所以假设用户输入了一行数字，例如 50126057，在他/她完成后，我需要在用户单击我的应用程序上的发送按钮之前或之后添加一些字符。它需要看起来像这样： scn|50126057{) 以便我在 PC 上的应用程序能够理解它。无论如何这可以做到吗？

谢谢，非常感谢任何帮助

PS对不起拼写/语法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:43:29.783

EditText word = (EditText) findViewById(R.id.username);

//内部按钮单击事件
//将编辑文本中输入的单词分配给字符串变量（在本例中为'wordtoformat'）

```
String wordtoformat=word.getText().toString(); 
```

//现在根据需要格式化单词

```
wordtoformat="scn|"+wordtoformat+"{)"; 
```

//现在将格式化的字符串分配回编辑文本

```
word.setText(text); 
```

希望它有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:11:25.787

您可以使用 OnFocus 侦听器，如下所示：

```
EditText et = (EditText)findViewById(*editText id*);
et.setOnFocusChangeListener(new OnFocusChangeListener() {
@Override
public void onFocusChange(View v, boolean hasFocus) {
    if(!hasFocus) {
        String text = et.getText().ToString();
        String newText = "scn|"+text+"{)";
        et.setText(newText);
    }
}); 
```

对不起，如果我不是 100% 准确，但我已经从工作中回答了我这里没有 Android IDE :)

希望对你有帮助！

PS：只有当用户失去 EditText 的焦点然后单击按钮或者通过单击按钮用户不会离开活动时，用户才会看到修改后的文本。但是出于修改文本的目的，应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:15:04.140

在单击 Button 事件时，

```
btn.setOnClickListener(new onClickListener(){
public void onClick(View v){
String data="scn|"+edt.getText().toString()+"{)";
}
}); 
```

# c# - c#中的动态dll引用

> ID：15680243
> 
> 赞同：0
> 
> 时间：2013-03-28T11:09:31.207
> 
> 标签：c#, asp.net, dynamic, dll, dllimport

在我的网络应用程序中，我必须引用两个第三方程序集，一个是为 x86 编译的，另一个是为 x64 编译的。两个 dll 具有相同的名称和版本。

例如：

```
Foo.dll  --x86, used to get data from x86 machines
Foo.dll  --x64, used to get data from x64 machines. 
```

我必须在网络应用程序中引用这两个 dll。在我的网络应用程序中，所有其他 dll 都使用“任何 CPU”选项编译，因为我的网络应用程序可以安装在任何机器（x86 或 x64）中。

在我的网络应用程序中，如果用户告诉从 ServerA（x86 机器）获取数据，那么我的网络应用程序必须参考 Foo.dll(x86) 版本才能从 x86 机器获取数据。如果用户告诉从 ServerB（x64 机器）获取数据，那么我的 Web 应用程序必须参考 Foo.dll(x64) 版本才能从 x64 机器获取数据。

解决此问题的最佳方法是什么？

我正在使用 VS2010。.NET 3.5

# jquery - 输入字符的 Jquery 限制不适用于 IE/Chrome/safari

> ID：15680244
> 
> 赞同：0
> 
> 时间：2013-03-28T11:09:33.973
> 
> 标签：jquery

我使用以下 jquery 代码来显示在 textarea 中输入的剩余字符数，它在所有浏览器上都可以正常工作。
但是当我使用退格键并删除一些字符时，它会显示在 Mozilla 上留下了多少字符，但它不适用于 IE、Chrome、safari。

这是演示链接：http: [//jsfiddle.net/ckWNM/](http://jsfiddle.net/ckWNM/)

```
jQuery(document).ready(function($) {
    var max = 10;
    $('textarea.max').keypress(function(e) {
        $("#counter").html("characters left : " +(10 - this.value.length));
        if (e.which < 0x20) {
            return;   
        }
        if (this.value.length == max) {
            e.preventDefault();
        } else if (this.value.length > max) {
            // Maximum exceeded
            this.value = this.value.substring(0, max);
        }
    });
}); //end if ready(fn) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:16:02.847

更新留下的字符`keyup`也可以在 Chrome 中解决此问题。

[jsFiddle](http://jsfiddle.net/VZCJh/)

```
jQuery(document).ready(function($) {
    var max = 10;
    $('textarea.max')
        .keypress(refreshAmount)
        .keyup(refreshAmount);
}); //end if ready(fn)

function refreshAmount(e) {
    $("#counter").html("characters left : " +(10 - this.value.length));
    if (e.which < 0x20) {
        return;   
    }
    if (this.value.length == max) {
        e.preventDefault();
    } else if (this.value.length > max) {
        // Maximum exceeded
        this.value = this.value.substring(0, max);
    }
} 
```

# logging - Cloudhopper SMPP - 如何更改日志记录选项

> ID：15680248
> 
> 赞同：0
> 
> 时间：2013-03-28T11:09:41.193
> 
> 标签：logging, bind, smpp

我想知道是否可以更改 Cloudhopper 的日志记录设置，以便在每次绑定操作时不记录敏感的登录信息？

希望这是一件容易的事。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:45:45.993

试试这个[解决方案](https://github.com/twitter/cloudhopper-smpp/issues/26)。

> ```
> LoggingOptions loggingOptions = new LoggingOptions();
> loggingOptions.setLogPdu(false);
> csSmppConfig.setLoggingOptions(loggingOptions); 
> ```

# kendo-ui - kendoGrid 2013.1.319 CRUD 一般问题通过 ASP.NET MVC 4 web api 控制器使用 OData

> ID：15680249
> 
> 赞同：0
> 
> 时间：2013-03-28T11:09:44.223
> 
> 标签：kendo-ui

由于我尝试在 kendoui 论坛上写作，但我得到的答案是“购买许可证”以报告错误，我想问是否有人在使用 kendoGrid 2013.1.319 时遇到过同样的问题。由于我在“周日测试应用程序”中使用它，所以一点也不着急！

**我在剑道论坛上的原始信息是：**

你好呀，

我已经用最新版本更新了剑道网格，突然间我的应用程序面临数据操作问题。问题似乎位于客户端，因为我正确接收了对 GET、PUT、POST 和 DELETE 动词的请求，但网格没有更新其状态。

我正在通过 API 服务使用 ASP.NET MVC 4 OData 实现。

例如：如果我删除 2 行并按保存，则会进行 DELETE 调用，客户端网格会隐藏这些行，但如果我再次按保存，则会不断调用删除。

同样的问题是在更新/创建时，单元格仍然带有红色角，保存后，数据仍然像第一次一样提交。

我注意到当我收到关于 dataSource 的回调时：

```
requestEnd: function (e) {
            if (e.type === "update" || e.type === "create") {
                // Refresh data after changes
                this.read();
            }
        } 
```

插入或更新记录时，e.type 始终未定义。

这是我的数据源配置：

```
dataSource: {
            type: 'odata', // <-- Include OData style params on query string
            transport: {
                read: {
                    url: $("#contactsGrid").attr("data-api-crud"),
                    dataType: "json", // <-- The default is "jsonp".
                    type: "GET"
                },
                update: {
                    url: $("#contactsGrid").attr("data-api-crud"),
                    dataType: "json", // <-- The default is "jsonp".
                    type: "POST"
                },
                create: {
                    url: $("#contactsGrid").attr("data-api-crud"),
                    dataType: "json", // <-- The default is "jsonp".
                    type: "PUT"
                },
                destroy: {
                    url: function (data) {
                        return $("#contactsGrid").attr("data-api-crud") + "/" + data.Id;
                    },
                    dataType: "json", // <-- The default is "jsonp".
                    type: "DELETE"
                },
                parameterMap: kendo.data.transports.odata.parameterMap
            },
            schema: {
                // The array of repeating data elements (items)
                data: "Results",
                // The total count of records in the whole dataset. used for paging.
                total: "Count",
                model: {
                    id: "Id",
                    fields: {
                        Dealer: { type: "string", editable: true },
                        Address: { type: "string", editable: true }
                    }
                }
            },
            pageSize: 50,
            serverPaging: true,
            serverFiltering: true,
            serverSorting: true,
            requestEnd: function (e) {
                if (e.type === "update" || e.type === "create") {
                    // Refresh data after changes
                    this.read();
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T12:02:06.047

Kendo UI 团队刚刚发布了一篇博文，如何使用 JayData 库来简化数据源的配置[。](http://www.kendoui.com/blogs/teamblog/posts/13-03-26/introducing-jaydata-and-kendo-ui.aspx)希望它会帮助你。

# jquery - 样式化 CSS 以赋予原生应用程序的感觉

> ID：15680250
> 
> 赞同：0
> 
> 时间：2013-03-28T11:09:48.867
> 
> 标签：jquery, html, css, mobile, jsfiddle

我希望使用 jquerys 手风琴功能进行动画处理的无序列表占据屏幕的整个宽度和高度，从而给人一种原生移动应用程序的感觉。列表元素之一将始终被下拉。

这是jsfiddle

[http://jsfiddle.net/SteveRobertson/Rm66M/5/](http://jsfiddle.net/SteveRobertson/Rm66M/5/)

如何通过严格操作 CSS 来做到这一点？

动画是在 id = celebs, #celebs 我添加的 div 层上完成的

```
 body, celebs, and html styling to remove all margins and padding 
```

如何完全占据我的视图的整个高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:53:06.297

我不确定您正在寻找的*感觉*，但如果您希望您的部分占据 100% 的窗口高度：

```
html, body, #celebs, #accordion, li.active {
    height: 100%;
} 
```

请记住，这将使活动 li 占据窗口的整个高度。*如果您希望它“在显示其他封闭*部分后占用剩余的任何垂直空间”，您需要做一些数学运算。（窗口高度 - 其他 li 的组合高度 = 剩余的用于调整活动 li 的大小）。

如果你愿意，你也可以简单地尝试使用 jQueryUI 的手风琴`heightStyle: "fill"`（[http://jqueryui.com/accordion/#fillspace](http://jqueryui.com/accordion/#fillspace)）

# javascript - 服务器验证后隐藏提交按钮

> ID：15680258
> 
> 赞同：0
> 
> 时间：2013-03-28T11:10:20.360
> 
> 标签：javascript, asp.net

我在网上找到了这个：

```
function submitButtonClick(button) {
        if (typeof (Page_ClientValidate) == 'function') {
            if (Page_ClientValidate() == false) {
                return false;
            }
        }
        button.style.display = 'none';  // disable won't work 
        return true;
    } 
```

我不擅长 Javascript，所以我不知道要更改什么...我有一个带有几个按钮的用户控件，包括一个提交按钮。它们用于我网站的每个页面。在某些页面上，我有自定义验证器。因此，当自定义验证器未验证时，按钮就消失了，没有什么可做的了。我应该在这里改变什么以使事情按我需要的方式工作？谢谢

# sql-server - 在 SQL Server 中解析 XML

> ID：15680259
> 
> 赞同：23
> 
> 时间：2013-03-28T11:10:21.713
> 
> 标签：sql-server, xml, sql-server-2005

XML 如下所示：

```
<GespeicherteDaten>
    <strategieWuerfelFelder Type="strategieWuerfelFelder">
        <Felder X="3" Y="3" Z="3">
            <Feld X="1" Y="1" Z="1">
                <strategieWuerfelFeld Type="strategieWuerfelFeld">
                    <Name>Name</Name>
                    <Beschreibung>Test</Beschreibung>
                </strategieWuerfelFeld>
            </Feld>
            <Feld X="1" Y="1" Z="2">
                <strategieWuerfelFeld Type="strategieWuerfelFeld">
                    <Name>Name2</Name>
                    <Beschreibung>Test2</Beschreibung>
                </strategieWuerfelFeld>
            </Feld>
        </Felder>
    </strategieWuerfelFelder>
</GespeicherteDaten>' 
```

我的结果表应该包含属性 Felder->X、Y、Z、Feld->X、Y、Z 和 Name。

像：

```
Felder_X | Felder_Y | Felder_Z | Feld_X | Feld_Y | Feld_Z | Name 
```

是否可以直接从查询或存储过程中获取这些值？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-28T12:07:28.593

```
DECLARE @xml xml
SET @xml = 
'<GespeicherteDaten>
<strategieWuerfelFelder Type="strategieWuerfelFelder">
    <Felder X="3" Y="3" Z="3">
        <Feld X="1" Y="1" Z="1">
            <strategieWuerfelFeld Type="strategieWuerfelFeld">
                <Name>Name</Name>
                <Beschreibung>Test</Beschreibung>
            </strategieWuerfelFeld>
        </Feld>
        <Feld X="1" Y="1" Z="2">
            <strategieWuerfelFeld Type="strategieWuerfelFeld">
                <Name>Name2</Name>
                <Beschreibung>Test2</Beschreibung>
            </strategieWuerfelFeld>
        </Feld>
    </Felder>
</strategieWuerfelFelder></GespeicherteDaten>'

SELECT 
    b.value('@X', 'int') as X
  , b.value('@Y', 'int') as Y
  , b.value('@Z', 'int') as Z
  , b.value('(./strategieWuerfelFeld/Name/text())[1]','Varchar(50)') as [Name]
  , b.value('../@X','int') as Felder_X
  , b.value('../@Y','int') as Felder_Y
  , b.value('../@Z','int') as Felder_Z  
FROM @xml.nodes('/GespeicherteDaten/strategieWuerfelFelder/Felder/Feld') as a(b) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-28T12:06:10.597

```
declare @XML xml 
set @XML = '
<GespeicherteDaten>
    <strategieWuerfelFelder Type="strategieWuerfelFelder">
        <Felder X="3" Y="3" Z="3">
            <Feld X="1" Y="1" Z="1">
                <strategieWuerfelFeld Type="strategieWuerfelFeld">
                    <Name>Name</Name>
                    <Beschreibung>Test</Beschreibung>
                </strategieWuerfelFeld>
            </Feld>
            <Feld X="1" Y="1" Z="2">
                <strategieWuerfelFeld Type="strategieWuerfelFeld">
                    <Name>Name2</Name>
                    <Beschreibung>Test2</Beschreibung>
                </strategieWuerfelFeld>
            </Feld>
        </Felder>
    </strategieWuerfelFelder>
</GespeicherteDaten>'

select Felder.N.value('@X', 'int') as Felder_X,
       Felder.N.value('@Y', 'int') as Felder_Y,
       Felder.N.value('@Z', 'int') as Felder_Z,
       Feld.N.value('@X', 'int') as Feld_X,
       Feld.N.value('@Y', 'int') as Feld_Y,
       Feld.N.value('@Z', 'int') as Feld_Z,
       Feld.N.value('(strategieWuerfelFeld/Name/text())[1]', 'nvarchar(100)') as Name
from @XML.nodes('/GespeicherteDaten/strategieWuerfelFelder/Felder') as Felder(N)
  cross apply Felder.N.nodes('Feld') as Feld(N) 
```

结果：

```
Felder_X    Felder_Y    Felder_Z    Feld_X      Feld_Y      Feld_Z      Name
----------- ----------- ----------- ----------- ----------- ----------- ---------
3           3           3           1           1           1           Name
3           3           3           1           1           2           Name2 
```

# c# - ASP 更改密码错误信息

> ID：15680270
> 
> 赞同：0
> 
> 时间：2013-03-28T11:11:08.517
> 
> 标签：c#, asp.net, change-password

我正在尝试`<changePassword />`在 C# 上自定义 a ，因此我将其用于测试：

```
ConfirmPasswordRequiredErrorMessage="Need confirmation password"
NewPasswordRequiredErrorMessage="Need new password"
PasswordRequiredErrorMessage="Need password" 
```

结果是我得到了星号来显示错误消息。
有没有办法替换星号，而是显示类似“ChangePasswordFailureText”属性的消息。

我在想是否可以完成，`<ChangePasswordTemplate\>`但我找不到任何好的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T17:21:08.653

为了更精细地控制表单，我建议使用 ChangePasswordTemplate。您可以在此 stackoverflow 帖子中找到基本模板：[ChangePasswordTemplateExample](https://stackoverflow.com/questions/11440545/asp-changepassword-control-customization)

如果您需要在代码隐藏中使用特定控件，您将需要使用：

```
ChangePasswordControl.Controls[0].FindControl("MyControl") 
```

此外，还有两个事件是值得的，onchangedpassword 和 onchangedpassword。ChangePassword 与 Membership 提供商一起使用，您对页面的控制很少，但 onchangepassword 事件可用于对提供商未检查的密码强制执行其他要求（例如确保不包含姓名或电子邮件地址）。

# sql-server-2008 - 无法远程连接 SQL Server 2008

> ID：15680276
> 
> 赞同：0
> 
> 时间：2013-03-28T11:11:21.487
> 
> 标签：sql-server-2008, database-connection

我已经设置了 SQL Server 2008 Developer Edition。它自动包含我的系统名称，即 sipl006 作为服务器名称。我的系统 IP 是 172.27.28.44。我的问题是它没有通过 IP 地址远程连接，因为我的数据库也被不同的域访问，我需要 IP 地址来使用我的数据库对应用程序进行身份验证。我已经用谷歌搜索了这个但没有帮助。

```
服务器名称：sipl006
身份验证：Sql server 身份验证
用户名：sa
密码：blablabla

```

```
我已经检查了以下详细信息

1\. SIPL006 >> 属性 >> 连接 >> 允许的远程连接。
2\. Sql server 配置管理器>>启用命名管道、TCP/IP、via等。
3\. 确认默认端口 1433。
4\. 防火墙已经关闭。

```

我只有 MSSQLServer 实例而不是 SQLExpress。

我观察到实例名称字段为空白的视图连接属性。

所以我需要使用 IP 而不是系统名称访问数据库，因为不同的域无法识别系统名称。它只识别IP地址。

我需要以下详细信息以进行连接。

```
服务器名称：172.27.28.44 或 172.27.28.44\SQLEXPRESS
用户名：sa
密码：blablabla

```

请解决我的问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:26:56.557

确保连接到您的数据库服务器的客户端有 1433 从其位置出站。也像 MicSim 说的，看看你是否可以从你知道有 1433 出站打开的客户端连接。

此外，如果您正在尝试 \SQLEXPRESS，您可能需要验证 UDP 1434 和 SQL Browser 服务和/或验证 \SQLEXPRESS 未使用 1433 以外的端口。

# javascript - 使用 javascript 连接到现有的 sqlite 数据库

> ID：15680278
> 
> 赞同：1
> 
> 时间：2013-03-28T11:11:29.153
> 
> 标签：javascript, database, sqlite

我正在尝试为浏览器构建一个“书签管理器”，它应该从用户机器上的现有数据库中读取数据。

我尝试了 ST2，它是代理，[这里](http://www.sencha.com/forum/showthread.php?146465-SqliteProxy)有解释 ，但是它创建了自己的数据库，我无法让它使用现有的数据库。

我尝试了[sencha sqlite 代理](http://druckit.wordpress.com/2012/11/16/using-the-sencha-touch-2-1-sql-proxy/)，它也一样，它甚至不在他们的文档中，所以我又被卡住了。

有没有办法用 Sencha 做到这一点？

另一个问题是：我可以只使用 Javascript 或 jQuerymobile 或任何其他库来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:13:44.717

您无法连接到现有数据库。如果可以的话，想想安全问题。

编辑：[本地存储](/questions/tagged/local-storage "显示标记为“本地存储”的问题")是一个选项吗？

# jquery - 带有文本的 div 上的 SlideDown 效果

> ID：15680279
> 
> 赞同：3
> 
> 时间：2013-03-28T11:11:29.330
> 
> 标签：jquery, html, css, animation

# [*jsFiddle*](http://jsfiddle.net/9SsUN/)

我正在尝试`slideDown`在元素`<span>`内部`div`

```
<div id='delete'>
    <form id='fform'> 
        <span class='front15'>Enter your name </span>

        <input type='text' id='tf' placeholder='name' />
        <input type='submit' id='get_button' value='Get' text='Get'>
    </form>
</div> 
```

**JS：**

```
 $('body').on('submit', '#fform', function () {
     $('#delete').html("<span class='front'>Processing...</span>").slideDown('slow');
     // ajax call
     return false;
 }); 
```

新的跨度似乎没有`slideDown`，它只是直接显示没有效果

有什么问题 ？

**编辑：** 正如问题的标题所说：**'..with text'** 没有任何答案针对这一点。能否请您使文本与 div 一起滑动（就像我们在垂直选取框中看到的那样）

这就是我想要的：感谢 [adeneo](https://stackoverflow.com/users/965051/adeneo)

# [*小提琴*](http://jsfiddle.net/n6F4D/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:22:59.260

将元素添加为隐藏，然后将其向下滑动：

```
$('body').on('submit','#fform',function(){ 
     var div = $('<div />', {'class': 'front', 
                                text  :'Processing...', 
                                style :'display:none;'
                              }
                );
     $('#delete').html( div );
     div.slideDown('slow');
     return false;
 }); 
```

[**小提琴**](http://jsfiddle.net/9SsUN/3/)

`slideDown()`有时会出现未正确放置的内联元素的问题，因此请使用块元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:19:49.290

新 div 在显示状态下创建，因此在页面上立即可见。

如果将其创建为隐藏，则可以将其向下滑动：

```
$('#delete').html("<span class='front'>Processing...</span>").hide().slideDown('slow'); 
```

[http://jsfiddle.net/ua2GM/](http://jsfiddle.net/ua2GM/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:20:25.213

它没有向下滑动的原因是因为它已经可见。尝试先隐藏它然后向下滑动：

```
$('#delete').html("<span class='front'>Processing...</span>").hide().slideDown('slow'); 
```

演示：http: [//jsfiddle.net/9SsUN/2/](http://jsfiddle.net/9SsUN/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T11:20:42.217

只需将 的内容替换`#delete`为您正在执行的元素即可立即显示该元素。此外，您可能希望稍后访问该表单，因此最好将其隐藏。

这是一个轻微的重组，实现了您想要的 slideDown，并且只隐藏了表单，以便您稍后可以再次显示它。

看到这个jsfiddle：http: [//jsfiddle.net/z2gYZ/](http://jsfiddle.net/z2gYZ/)

# linq - LINQ如何获得最高评分

> ID：15680285
> 
> 赞同：0
> 
> 时间：2013-03-28T11:11:45.413
> 
> 标签：linq, linq-to-entities

我有一个包含以下实体的模型：

```
Game: Id
User: Id
UserRating: Id, UserId, GameId, Value 
```

用户可以给游戏评分。

我想要一个查询，返回评分最高的前 5 场比赛。最高评分应以Value为基础，但当有2个或更多游戏具有相同评分时，还应考虑计数。

如何在查询中表达这一点，使用 lambda 表达式将结果列表作为游戏实体返回？

（使用 EF 4、MVC、SQL Server）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:14:54.180

我假设“最高评分”是指“最高平均评分”？听起来你想要这样的东西：

```
var query = from rating in db.UserRating
            group rating by rating.GameId into ratings
            orderby ratings.Average(x => x.Value) descending,
                    ratings.Count() descending
            join game in db.Game on ratings.Key equals game.Id
            select game;

var top5Games = query.Take(5); 
```

编辑：在非查询表达式形式中，这会更痛苦，但仍然可行：

```
var top5Games = db.UserRating
                  .GroupBy(rating => rating.GameId)
                  .OrderByDescending(ratings => ratings.Average(x => x.Value))
                  .ThenByDescending(ratings => ratings.Count())
                  .Join(db.Game, r => r.Key, g => g.Id, (r, g) => g)
                  .Take(5); 
```

在这种情况下，在 lambda 语法中执行它并不算*太*糟糕，因为您只是让游戏退出连接......但更一般地说，它变得更糟糕。这两种形式绝对值得理解和使用，这取决于手头查询的更简单方法。特别是，当您开始执行多个连接时，lambda 语法会变得很*糟糕*。

请注意，这不会给出该游戏的评分...要获得该评分，您可能需要以下内容：

```
select new { Game = game,
             RatingAverage = ratings.Average(x => x.Value),
             RatingCount = ratings.Count() } 
```

在查询结束时，而不仅仅是`select game`.

另请注意，您*可能*希望排除目前没有足够评分的游戏，否则游戏只有一个“完美”的评分将始终排在首位。

编辑：好的，在“游戏名称”的最后抢七局中，我肯定会使用查询表达式形式：

```
var query = from rating in db.UserRating
            join game in db.Game on ratings.Key equals game.Id
            select new { rating, game } into pair
            group pair by pair.game into pairs
            orderby pairs.Average(x => x.rating.Value) descending,
                    pairs.Count() descending,
                    pairs.Key.Name
            select pairs.Key;

var top5Games = query.Take(5); 
```

# android - 使用 AchartEngine 库在 Bargraph 中添加多个条形 在 Android 中不起作用

> ID：15680288
> 
> 赞同：1
> 
> 时间：2013-03-28T11:11:59.240
> 
> 标签：android, bar-chart, achartengine

在我的代码中，Y2 是年份列表，a2 是包含值的 String 的 arrayList。我需要在条形图中显示与年份相对应的值，不知道我哪里出错了，请帮助我，这是我的代码

```
if(yearSpinner.equals("All")){
        titles = new String[] { "Amount","sasa"};
    values = new ArrayList<double[]>();
    Double[] doubleLat = new Double[a2.size()];
        for(int i = 0; i < a2.size(); i++)
        {
            doubleLat[i] = a2.get(i);
     System.out.println("doubleee=="+doubleLat[i]);
          values.add(new double[] {  doubleLat[i]});
        System.out.println("val=="+values);
        }

        int[] colors = new int[] { Color.parseColor("#77c4d3")};
         renderer = buildBarRenderer(colors);
        renderer.setOrientation(Orientation.HORIZONTAL);
        setChartSettings(renderer, "Yearly Details", "Year", "Earnings", 0.5,
                12.5, 0, yaxis, Color.BLACK, Color.BLACK);
        renderer.setXLabels(1);
        renderer.setYLabels(10);
        for(int i =0;i<y2.size();i++){
            renderer.addXTextLabel(i+1, y2.get(i));
        }
        //renderer.addXTextLabel(1, "yearly");

        int length = renderer.getSeriesRendererCount();
        for (int i = 0; i < length; i++) {
            SimpleSeriesRenderer seriesRenderer = renderer.getSeriesRendererAt(i);
            seriesRenderer.setDisplayChartValues(true);

        }
    }

        final GraphicalView grfv = ChartFactory.getBarChartView(getActivity(), buildBarDataset(titles, values), renderer,Type.DEFAULT);
        return grfv;
}
    protected XYMultipleSeriesRenderer buildBarRenderer(int[] colors) {
        XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
        renderer.setAxisTitleTextSize(16);
        renderer.setChartTitleTextSize(20);
        renderer.setLabelsTextSize(15);
        renderer.setLegendTextSize(15);
        renderer.setBarWidth(30);
        renderer.setPanEnabled(false, false);
        renderer.setMarginsColor(Color.parseColor("#EEEDED"));
        renderer.setXLabelsColor(Color.BLACK);
        renderer.setYLabelsColor(0,Color.BLACK);
        renderer.setApplyBackgroundColor(true);
        renderer.setBackgroundColor(Color.parseColor("#FBFBFC"));
        int length = a2.size();
        for (int i = 0; i < length; i++) {
            SimpleSeriesRenderer r = new SimpleSeriesRenderer();
            r.setColor(Color.parseColor("#77c4d3"));
            //r.setChartvalueAngle(-90);
            r.setChartValuesSpacing(15);

            renderer.addSeriesRenderer(r);
        }
        return renderer;
    }
    protected XYMultipleSeriesDataset buildBarDataset(String[] titles, List<double[]> values) {
        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
        int length = values.size();
        for (int i = 0; i < length; i++) {
            CategorySeries series = new CategorySeries("Amoount");
            double[] v = values.get(i);
            System.out.println("values = ="+values);
            System.out.println("v = ="+v);
            int seriesLength = v.length;
            for (int k = 0; k < seriesLength; k++) {
                series.add(v[k]);
                System.out.println("v [k]= ="+v[k]);
            }
            dataset.addSeries(series.toXYSeries());
        }
        return dataset;
    }

    protected void setChartSettings(XYMultipleSeriesRenderer renderer, String title, String xTitle,
            String yTitle, double xMin, double xMax, double yMin, double yMax, int axesColor,
                int labelsColor) {
        renderer.setChartTitle(title);
        renderer.setYLabelsAlign(Align.RIGHT);
        renderer.setXTitle(xTitle);
        renderer.setYTitle(yTitle);
        renderer.setXAxisMin(xMin);
        renderer.setXAxisMax(xMax);
        renderer.setYAxisMin(yMin);
        renderer.setYAxisMax(yMax);     
        renderer.setMargins(new int[] { 10, 65, 10, 15 });
        renderer.setAxesColor(axesColor);
        renderer.setLabelsColor(labelsColor);
    } 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:36:56.070

该问题是由于您`CategorySeries`为每个数据项创建一个实例而引起的。A`CategorySeries`可以包含同一类别下的多个值。当您在系列中有一个项目时，条形图会显示得很细。

# ios - 我们可以以编程方式注销 facebook

> ID：15680289
> 
> 赞同：5
> 
> 时间：2013-03-28T11:12:06.907
> 
> 标签：ios, iphone, facebook

我在我的 iphone 应用程序中使用 facebook sdk-3.1 登录了 Facebook。登录后它将进入我的应用程序并且我没有给出任何注销按钮。所以，当我们单击按钮登录 facebook 时，我将获得以前的用户 facebook 帐户。

为了解决这个问题，我给出了按钮注销。

如何在单击按钮时以编程方式注销 Facebook

我是这样登录的

```
-(IBAction)Login:(id)sender
{

    appDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];
     appDelegate.getActionForLoginbtn=@"LoginwithFB";
       [appDelegate openSessionWithAllowLoginUI:YES];
}

-(BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI{

    NSArray *permissions=[[NSArray alloc]initWithObjects:@"email", nil];
    return[FBSession openActiveSessionWithReadPermissions:permissions allowLoginUI:allowLoginUI completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
        [self sessionStateChanged:session state:state error:error];
    }];
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-28T11:15:52.973

使用此代码：

```
if (FBSession.activeSession.isOpen)
{
    [FBSession.activeSession closeAndClearTokenInformation];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-01T10:55:02.517

斯威夫特版本

`import FBSDKLoginKit`

```
FBSDKLoginManager().logOut() 
```

使用 FBSDK 4.4

```
#import <FBSDKLoginKit/FBSDKLoginManager.h> 
```

然后使用此代码注销。

```
FBSDKLoginManager *manager = [[FBSDKLoginManager alloc] init];
[manager logOut]; 
```

希望这会有所帮助:)

# jquery - 如何将zClip链接到asp.net中转发器控件内的锚标记

> ID：15680290
> 
> 赞同：1
> 
> 时间：2013-03-28T11:12:08.483
> 
> 标签：jquery, asp.net, repeater, zclip

我正在使用 zClip Jquery 插件将一些 URL 复制到剪贴板。zClip 的示例代码如下。

```
$(document).ready(function () {
    $('a#copy-description').zclip({
        path: 'zClip/ZeroClipboard.swf',
        copy: $('p#description').text()
    });
}); 
```

它作为一个普通的锚标签和一个普通的段落正常工作。但是我需要将锚标记放在转发器中，并且需要将相应的 URL 复制到剪贴板`<%# Eval("URL") %>`。当转发器生成时，将有 n 个锚点和 n 个要复制的 URL。我已经尝试了一些我知道的事情，但我无法让它发挥作用。我该如何解决这个问题？

```
<asp:Repeater ID="rptWebAddress" runat="server" OnItemCommand="rptWebAddress_ItemCommand">
    <ItemTemplate>
        <p>
            <asp:Table runat="server">
                <asp:TableRow ID="TableRow1" runat="server">
                    <asp:TableCell>
                        <asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl='<%# Eval("URL") %>' Target="_blank">Click Here</asp:HyperLink>
                    </asp:TableCell>
                    <asp:TableCell>Web link. Click it. Open in browser. Save as a bookmark.</asp:TableCell>
                </asp:TableRow>
                <asp:TableRow ID="TableRow2" runat="server">
                    <asp:TableCell> <a style="text-decoration: underline;" id="copy-description" href="#">Copy</a> 
                    </asp:TableCell>
                    <asp:TableCell>Web link as text. Copy and paste.</asp:TableCell>
                </asp:TableRow>
            </asp:Table>
        </p>
    </ItemTemplate>
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:44:53.417

您不需要 jQuery 来执行此操作。好的老式javascript会做：

```
<asp:TableCell>
   <a style="text-decoration: underline;" id="copy-description" href="#" onclick="CopyUrl(this, '<%# Eval("URL") %>';">Copy</a>
</asp:TableCell> 
```

您的 javascript 函数将如下所示：

```
function CopyUrl(object, url) {
    object.zclip({
        path: 'zClip/ZeroClipboard.swf',
        copy: url
    });    
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:42:55.663

假设您可以`zcopy`向`Copy`元素添加一个类

```
$(function(){
    $('.zcopy').each(function(i,v){
        var el = $(v);
        el.zclip({
            path: 'zClip/ZeroClipboard.swf',
            copy: el.closest('tr').prev().find('a').attr('href')
        });
    });
}) 
```

# powershell - 'if condition' 的 powershell 结果写入输出文件

> ID：15680292
> 
> 赞同：0
> 
> 时间：2013-03-28T11:12:09.033
> 
> 标签：powershell

在 powershell 中，我正在编写一个使用“if”条件的脚本来检查文件夹中是否有过去 2 小时内收到的文件。代码工作正常，输出被写入屏幕，而不是我希望它写入可以通过电子邮件发送的文件。请求善意帮助。问候阿比吉特

**编辑**：代码

```
$f = 'D:\usr\for_check' 
$files = ls $f 
Foreach ($file in $files) 
{ 
    $createtime = $file.CreationTime 
    $nowtime = get-date 
    if (($nowtime - $createtime).totalhours -le 2) 
    {
        "$file"
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:13:28.320

您可以使用重定向运算符`>`或[Out-File](http://technet.microsoft.com/en-us/library/hh849882.aspx)

例子：

```
"abc" > c:\out.txt

"abc" | Out-File c:\out.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:32:08.380

您将需要使用`>>`运算符而不是`>`或`out-file`运算符，因为它们每次使用时都会覆盖文件。而`>>`操作员将在下一行写入文件。

例子：

`$file >> c:\out.txt`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T11:42:30.387

将每一行写入循环内的文件会导致大量磁盘 I/O。您可以将循环包装在脚本块中，然后在一次写入操作中将所有行输出到文件中。

```
$f = 'D:\usr\for_check' 
$files = ls $f 
&{Foreach ($file in $files) 
  { 
    $createtime = $file.CreationTime 
    $nowtime = get-date 
    if (($nowtime - $createtime).totalhours -le 2) 
    {
        "$file"
    } 
  }
 } | set-content c:\outfile.tx 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T12:13:07.390

你的代码太复杂了。像这样的东西会更 PoSh：

```
$src = "D:\usr\for_check"
$out = "C:\output.txt"

$append = $false

Get-ChildItem $src | ? {
  $_.CreationTime -ge (Get-Date).AddHours(-2)
} | % { $_.Name } | Out-File $out -Append:$append 
```

# javascript - 如何根据 id 删除内部数组完整？

> ID：15680296
> 
> 赞同：0
> 
> 时间：2013-03-28T11:12:19.347
> 
> 标签：javascript

我有这样的数组

```
var curChanges = [
                   {id:1, isChecked:true},
                   {id:2, isChecked:false},
                   {id:3, isChecked:true}
                 ]; 
```

现在，如果我想动态删除第二个数组，即 {id:2, isChecked:false}，我该怎么做？这里 id 是唯一的。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:16:45.320

首先，您有语法错误。对象属性值是用 设置的`:`，而不是用设置的`=`：

```
var curChanges = [
    {
        id: 1,
        isChecked: true
    },
    // etc...
]; 
```

假设数组中元素的顺序不固定，实现您想要做的最简单的方法是使用 ES5`Array.prototype.filter`方法：

```
curChanges.filter(function (elem) {
    return elem.id !== 2;
}); 
```

如果`true`从过滤器函数返回，该元素将保留在数组中。如果您返回`false`，它将被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:16:33.207

首先，无效的数组。应该`:`不是`=`

所以它变成：

```
var curChanges = [ {id:1, isChecked:true}, {id:2, isChecked:false}, {id:3, isChecked:true}]; 
```

使用过滤器根据 id 删除：

```
curChanges.filter(function(i) { return i.id!=2;}) 
```

或者直接删除第二个元素：

```
curChanges.splice(1,1); 
```

# c# - 具有两种按键访问的键-键对字典？

> ID：15680297
> 
> 赞同：1
> 
> 时间：2013-03-28T11:12:22.377
> 
> 标签：c#, dictionary, key-value

传统词典将包含`key-value`对。我需要一些东西来保存两种`key-key`不同类型的对象。例如，`key1``key2`

```
SourceIdentity key1 = dict[key2]; //key2 index gives key1 value
TargetIdentity key2 = dict[key1]; //key1 index gives key2 value 
```

换句话说，两个键都应该产生另一个值，一种双向访问。**我将像其他方式一样添加值：**

dict.Add(s, t);

**不， key1s 和 key2s 不会有任何重复，因为它们是 keys**。

这是我能想到的，但我认为可以有一种更轻松的方式：

```
public class FunnyDictionary
{
  var key1Dict = new Dictionary<SourceIdentity, TargetIdentity>();
  var key2Dict = new Dictionary<TargetIdentity, SourceIdentity>();

  public void Add(SourceIdentity key1, TargetIdentity key2)
  {
      key1Dict[key1] = key2;
      key2Dict[key2] = key1;
  }

  //remaining part..
} 
```

我[在 c# 中看到过这个问题 Multi-key dictionary？](https://stackoverflow.com/questions/1171812/multi-key-dictionary-in-c)但与我现在的情况完全不同。**我想要一本字典，这样我就可以快速访问值，否则我将不得不在每次我觉得可以避免的时候枚举一个集合**。该集合将有超过 10000 个条目。**这是我能拥有的最轻的吗？**以任何其他方式更简单或更好的东西？

# c# - 在 aspx 网页上使用 JsonObject 的内容

> ID：15680301
> 
> 赞同：4
> 
> 时间：2013-03-28T11:12:36.230
> 
> 标签：c#, asp.net, json

我正在尝试使用 HTTP 请求从 google 购物 api 返回 json 字符串的内容。到目前为止我所拥有的似乎正在工作，但我想知道如何使用对象的内容在页面上显示数据。

```
public string HttpGet(string url)
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();
    try
    {
        using (Stream stream = response.GetResponseStream())
        {
            StreamReader reader = new StreamReader(stream);
            return reader.ReadToEnd();
        }
     }
     finally
     {
         response.Close();
     }
 }      

 protected void submit_Click(object sender, EventArgs e)
 {
    string json = HttpGet("https://www.googleapis.com/shopping/search/v1/public/products?key={KEY}4&country=UK&q=BX80637153570K&rankBy=price:ascending&maxResults=1&alt=json");
     dynamic obj = JsonObject.Parse(json);
 } 
```

好的，看看响应，好像我需要一个 C# 类来处理 json 中返回的数据。我使用 json2csharp.com 创建了一个类。这是我需要从 Json 返回并显示在页面上的数据。也许这将有助于更好地解释我的问题。

[https://www.googleapis.com/shopping/search/v1/public/products?key=AIzaSyCC0j59RBeGNtf2W2ft6avhfoTdJ1FQ2c4&country=UK&q=BX80637153570K&rankBy=price:ascending&maxResults=1&alt=json](https://www.googleapis.com/shopping/search/v1/public/products?key=AIzaSyCC0j59RBeGNtf2W2ft6avhfoTdJ1FQ2c4&country=UK&q=BX80637153570K&rankBy=price:ascending&maxResults=1&alt=json)

谁能建议我如何在我的网站上使用这些信息。我现在有点迷失了，因为我对这一切都很陌生并且尝试了几种不同的方法。如果这有什么不同，我不需要所有返回的数据？只是价格和链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:19:40.833

假设动态 obj 被正确填充，您可以在网页中使用它的内容例如，如果 json 是：

```
{
  "error" : {
       "code": 400,
       "message": "Bad Request"
  } 
} 
```

您可以使用如下代码访问对象属性：

```
Response.Write("Error code is" + obj.error.code); 
```

当然 Response.Write 只是关于如何将检索到的数据发送到页面的示例。

**编辑1：**

似乎有问题使用的 json 转换器无法正常工作或无法正常工作。在许多情况下，创建一个具体的类只是为了解析一个 json，特别是因为 C# 4 可以使用 ExpandoObject

这是一个关于如何在动态对象中反序列化而不需要创建具体对象的示例

```
 var url = "http://www.google.com/ig/calculator?hl=en&q=100USD=?EUR";
    string json = HttpGet(url);

    //this is json string:
    //{lhs: "100 U.S. dollars",rhs: "78.1799703 Euros",error: "",icc: true}

    //now convert in a dynamic object
    var jss = new DynamicJsonConverter();

    var serializer = new JavaScriptSerializer();
    serializer.RegisterConverters(new[] { new DynamicJsonConverter() });
    dynamic obj = serializer.Deserialize(json, typeof(object));

    //now you have access to json content
    string text1 = obj.lhs;
    string text2 = obj.rhs; 
```

可以使用您可以在此处找到的代码创建 DynamicJsonConverter 类：

[将 JSON 反序列化为 C# 动态对象？](https://stackoverflow.com/questions/3142495/deserialize-json-into-c-sharp-dynamic-object)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:16:37.013

我认为你需要`deserialize`回应

```
JavaScriptSerializer json_serializer = new JavaScriptSerializer(); 
```

您将需要使用响应产生的属性创建一个类。
说测试课

```
 class Test 
 {
   //define a similar property here 
   // which you suppose it will be return in the response   

 } 
```

然后

```
Test routes_list = (Test)json_serializer.DeserializeObject(yourjson); 
```

## 编辑 1

或者您可以通过此链接
[如何将 JSON 对象转换为自定义 C# 对象？](https://stackoverflow.com/questions/2246694/how-to-convert-json-object-to-custom-c-sharp-object)

# vbscript - Visual Basic 或运算符

> ID：15680304
> 
> 赞同：0
> 
> 时间：2013-03-28T11:12:53.407
> 
> 标签：vbscript

我有一些在 html 页面中搜索和替换文本的 vb 脚本。它看起来像这样：-

```
Const ForReading = 1
Const ForWriting = 2

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.OpenTextFile("", ForReading)

strText = objFile.ReadAll
objFile.Close

strNewText = Replace(strText, "<span>OK</span><!--test-->" , "<span class=""down"">Down</span><!--test-->") 

Set objFile = objFSO.OpenTextFile("", ForWriting)
objFile.WriteLine strNewText
objFile.Close 
```

如果我只有一串文本要替换，这非常有用。但是，我还需要脚本来更改以下内容。这：-

```
<span class=""under-investigation"">Under investigation</span><!--test--> 
```

对此：-

```
<span class=""down"">Down</span><!--test--> 
```

不过，它应该是“要么”“要么”。如果字符串显示“OK”，则将其置于“down”，如果字符串显示“Under Investigation”，则将其置于“down”。有谁知道我如何在其中放置一个 Or 函数来将“OK”替换为“Down”或将“Under Investigation”替换为“Down”？

很难说出我想要什么，如果我不清楚，对不起。欢迎任何问题！

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:35:57.000

只需添加第二`Replace`条指令？

```
strNewText = Replace(strText, "<span>OK</span><!--test-->" , "<span class=""down"">Down</span><!--test-->")
strNewText = Replace(strNewText, "<span class=""under-investigation"">Under investigation</span><!--test-->" , "<span class=""down"">Down</span><!--test-->") 
```

或者做这样的事情：

```
If InStr(strText, "<span>OK</span><!--test-->") > 0 Then
  strNewText = Replace(strText, "<span>OK</span><!--test-->" , "<span class=""down"">Down</span><!--test-->")
Else
  strNewText = Replace(strText, "<span class=""under-investigation"">Under investigation</span><!--test-->" , "<span class=""down"">Down</span><!--test-->")
End If 
```

# scripting - Autohotkey：显示已编译的脚本图标

> ID：15680307
> 
> 赞同：0
> 
> 时间：2013-03-28T11:12:58.023
> 
> 标签：scripting, icons, autohotkey

谁能解释我，如何在自定义窗口中显示我的脚本图标？当我编译我的脚本时，我正在使用 Compile_AHK 并选择我的自定义图标。但我不能让它显示在我的脚本窗口中。我试图像图像一样显示，像图标一样，像资源一样打包它，但仍然没有结果。我找到[了这个教程](http://www.autohotkey.com/board/topic/37699-tutorial-how-to-compile-ahk-files-include-your-own-icons/)，但它的脚本代码是关于窗口的，在图标的地方没有显示任何内容。

了解如何在不使用外部图标的情况下显示某些图标会很有用。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:05:56.750

在例如 C:\Users\Robert\AHK 中创建您的 test.ahk 文件

在同一目录中创建 test.ico 文件 (C:\Users\Robert\AHK)
从 C:\Users\Robert\AHK 打开一个 CMD 窗口（使用`Shift`+ 右键单击​​）
在 CMD 中运行：

```
"C:\Program Files\AutoHotkey\Compiler\Ahk2Exe.exe" /in test.ahk /icon test.ico 
```

# python - 在 Python 中使用变量进行 Xpath 查询

> ID：15680308
> 
> 赞同：2
> 
> 时间：2013-03-28T11:13:04.520
> 
> 标签：python, variables, xpath, expression

[注意我对 Python 和 Xpath 很陌生]

我想执行一个 Xpath 查询并在表达式中使用一个变量来循环使用索引的所有元素。

例如，我希望能够在此表达式中放置一个变量，而不是具有`[1]`,等的特定位置：`[2]``i`

```
for x in root.xpath('/movies/a_movie[i]/studio'):
    print "<studio>" + x.text + "</studio>" 
```

我不确定这是否可能，但我想问一下也无妨！

澄清一下，这就是我想这样做的原因：我正在尝试处理 的所有元素`a_movie[1]`，然后在函数结束时，我想处理 的所有元素`a_movie[2]`，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:22:26.067

您想循环遍历`/movies/a_movie`标签，但仅限于那些*有*`studio`孩子的标签：

```
for a_movie in root.xpath('/movies/a_movie[studio]'):
    name = a_movie.find('name').text
    studio = a_movie.find('studio')
    print "<studio>" + studio.text + "</studio>" 
```

如果您只想将元素的子元素打印`a_movie`为 XML，我只需遍历元素（遍历子元素）并`ElementTree.tostring()`在每个元素上使用：

```
for a_movie in root.xpath('/movies/a_movie'):
    for elem in a_movie:
        print ElementTree.tostring(elem), 
```

# php - 通过 PHP 流式传输大型 (200 MB) zip

> ID：15680313
> 
> 赞同：1
> 
> 时间：2013-03-28T11:13:16.073
> 
> 标签：php, stream, zip

我正在为我的应用程序创建一个服务器端 api。其中一个步骤要求应用程序从我的服务器下载一个非常大的 zip 文件，但不能通过仅下载`http://mydomain.com/file.zip`. **我的应用程序通过了一些身份验证标头和其他必须由 php 脚本处理的**安全内容（例如`http://mydomain.com/download.php?auth=foo&key=value&etc`）

我之前使用图像做过这种事情：

```
<?php

$can_download = /* some complicated auth stuff */

if($can_download) {
    header('Content-Type: image/jpeg');
    echo file_get_contents('image.jpg');
}

?> 
```

我的问题是：**可以用 200+ MB 的 zip 文件完成吗？**我知道我必须以某种方式修改标题，并且可能使用一些高级 php 函数，但是我在这里、Stack Overflow 或其他任何地方都找不到任何教程。

**编辑：**我还必须能够*恢复*下载，因为用户很可能会退出应用程序，尽管它应该能够恢复下载（例如从 47%）。可以做到吗？

* * *

对于那些寻找答案的人：正确的函数是**[readfile并且可以使用](http://www.php.net/manual/en/function.readfile.php)****[这个自定义函数](http://www.php.net/manual/en/function.readfile.php#86244)**来解决“恢复”问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T11:14:23.390

在这种情况下使用的正确函数是[`readfile`](http://www.php.net/manual/en/function.readfile.php).

给定的代码会遇到问题，因为它在将文件内容转发到浏览器之前不必要地将文件内容加载到内存中。这对性能没有帮助，并且很容易导致内存不足。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:14:36.730

是的，但是您想使用类似的东西`readfile`。原因是在`file_get_contents`将整个文件传递给客户端之前将其读入内存。

# javascript - 你可以使用 node.js 和 Forever 一起执行 javascript 代码吗？

> ID：15680314
> 
> 赞同：2
> 
> 时间：2013-03-28T11:13:21.120
> 
> 标签：javascript, node.js, ubuntu, forever

最近发现[永远](https://github.com/nodejitsu/forever)，我完全爱上了它。我喜欢我可以运行任意数量的 node.js 实例，并且可以在需要时重新启动它们。

当我通过 node.js 运行 javascript 时，我会得到 bash，如果需要，我可以在其中执行附加代码。我的问题是，我可以通过 Forever 执行代码以在每个 node.js 实例上执行吗？所以假设我想执行 blah.doit(); 在我运行的每个 .js 文件上？那可能吗？

我可以做类似的事情`forever -c blah.doit();`吗？

# php - Silex，加载自己的类

> ID：15680319
> 
> 赞同：4
> 
> 时间：2013-03-28T11:13:28.943
> 
> 标签：php, autoload, silex

我使用 Silex，PHP 微框架。目前我尝试加载自己的课程，但我没有运气。也许有人可以向我解释一下 Silex 中的加载是如何工作的？

我的项目结构如下所示：

```
app/
vendor/
web/
tests/
bootstrap.php
composer.json
composer.lock 
```

假设我想`Controller\User (namespace here)`从`/app/MainController.php`.

我怎样才能做到这一点？我浏览了一些文章（通过 Composer 或 Symfony 的 UniversalClassLoader 加载），遵循了一些说明，但仍然无法正常工作。

如果有人可以帮我一把，我将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T12:10:44.977

我假设你像这样在 bootstrap.php 中加载你的 Silex 类：

```
// bootstrap.php
require_once __DIR__.'/vendor/autoload.php'; 
```

如果是这样，请将此代码替换为以下内容：

```
// bootstrap.php
$loader = require __DIR__.'/vendor/autoload.php';
$loader->add(YOUR_NAMESPACE, DIRECTORY_OF_THE_NAMESPACE); 
```

例子：

```
// bootstrap.php
$loader = require __DIR__.'/vendor/autoload.php';
$loader->add('Tutorial', __DIR__.'/src'); 
```

您可以根据需要添加多个命名空间，只需为每个命名空间调用 add 方法即可。
在`src/`你将存储你的类文件。为每个命名空间创建一个文件夹，其中包含该命名空间的类文件。该文件应与类同名。

MyNamespace\MyClass => src/MyNamespace/MyClass.php
MyNamespace\SubNamespace\SubClass => src/MyNamespace/SubNamespace/SubClass.php

在每个类文件中，您必须在第一行设置关联的命名空间。

```
// src/Tutorial/DemoController.php
namespace Tutorial;
class DemoController{
// class definition goes here..
} 
```

您现在可以访问包含 bootstrap.php 的每个文件中的类。
在 /app/MainController.php 你现在可以像这样访问你自己的类：

```
// app/MainController.php
use Tutorial\DemoController;
$foo = new DemoController(); 
```

这个解决方案对我有用。希望对你有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-02T12:31:00.963

我也在寻找同样的东西，因为 Silex 文档仍然具有已删除的 registerNamespace 函数。

[在这里](http://alanhollis.com/silex-autoloading-namespaces-with-composer/)找到了一个非常好的答案

简而言之，您所要做的就是在**composer.json的“autoload”部分添加一个“psr-0”**

示例作曲家.json：

```
{
    "require": {
        "silex/silex": "~1.3",
        "doctrine/dbal": "~2.2"
    },

    "autoload": {
        "psr-0": {
            "MyApp": "src/"
        }
    }
} 
```

确保更新 Composer Autoloader（“composer install”或“c​​omposer update”）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-14T11:20:55.647

截至 2014 年 10 月，将您自己的类自动加载到 silex 中的最佳方法是通过在应用程序根目录中使用文件来使用`PSR-4`（而不是`PSR-0`）自动加载：`Composer``composer.json`

```
{
    "require": {
        "silex/silex": "~2.0",
    },
    "autoload": {
        "psr-4": {"Vendor\\Namespace\\": "path/to/src/"}
    }
} 
```

编辑您的后`composer.json`，您需要执行以下操作：

```
composer update 
```

在您的项目根目录上，使用终端。

# regex - 正则表达式在组中向前看以过滤掉特定字符，然后反向引用过滤组？

> ID：15680320
> 
> 赞同：1
> 
> 时间：2013-03-28T11:13:31.553
> 
> 标签：regex, lookahead, backreference

因此，在我的正则表达式中，我有一个组，其内容是带有破折号的数字：

```
00-111-222-333-44 
```

如何使用带有破折号字符的正向前瞻来仅选择该组中的数字，目标是当我稍后反向引用该组时，我希望在我的输出中这样做：

```
0011122233344 
```

像这样，但对于整个字符串，现在表达式只匹配破折号之前的第一个数字，即 00：

```
[0-9]+(?=-) 
```

有没有更简单的方法来选择该组内的所有数字，忽略破折号，所以我可以反向引用该组并获得没有破折号的干净数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:51:13.840

您可以使用以下 perl 命令替换数字之间出现的所有连字符：

```
perl -pe 's#(?<=\d)-(?=\d)##g' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:38:22.170

> 如何在该组中使用带有破折号的正向前瞻，以便稍后反向引用该组时它只包含数字？

这对于正则表达式是不可能的。组只能引用输入字符串的完整子字符串。而不是尝试匹配它，您应该应用两步方法并使用正则表达式替换在匹配之前删除所有破折号。

# c# - 更改菜单条的背景颜色？

> ID：15680323
> 
> 赞同：1
> 
> 时间：2013-03-28T11:13:42.297
> 
> 标签：c#, menustrip

我正在使用 a`Menu Strip`并希望在选择其中一个时更改背景颜色。
如需更多解释，请记住我只想更改主菜单而不更改子项目。
谢谢
，我想更改 item1 和 2 和 3 的背景颜色，当它们被选中时。更多解释：
我想改变`Main Menu Item`（它们是：Item1 & Item2 & Item3）并且没有子项目。

![在此处输入图像描述](../Images/4c6b7fc23109797b444ae6c143294a0e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:28:48.737

如果您想在单击菜单项时更改背景颜色（但不是为其子项），只需处理菜单条的`ItemClicked`事件

```
private void menuStrip1_ItemClicked(object sender, ToolStripItemClickedEventArgs e)
{
    if (e.ClickedItem.BackColor != Color.Blue)
        e.ClickedItem.BackColor = Color.Blue;
} 
```

**注意：**当您将鼠标悬停在项目上时，当鼠标悬停在项目上时，它们的颜色会有所不同。为此，您需要为您的菜单条创建自己`Renderer`的。

# perl - 将参数传递给通过 qsub 执行的 perl 脚本

> ID：15680328
> 
> 赞同：0
> 
> 时间：2013-03-28T11:13:47.990
> 
> 标签：perl, pbs, qsub, torque

您好想将一个参数传递给我的 perl 脚本，该脚本应该通过 qsub 执行。所以我跑：

```
qsub -l nodes=node01 -v "i=500" Test.pl 
```

在 Test.pl 中，我尝试以多种方式调用 i 参数：

```
use Getopt::Long;
$result = GetOptions ("i" => \$num);
open(FILE,">/data/home/FILEout.txt");
    print FILE "$num\n";             
    print FILE "$ARGV[0]";     
close(FILE); 
```

不幸的是 perl 脚本的输出文件总是空的。

你有什么建议吗？我哪里错了？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:18:21.690

根据我能找到的所有文档，`-v`设置了一个环境变量，因此您可以`$ENV{i}`使用`500`. （检查您自己的文档以确认。）

* * *

如果您想实际将 arg 传递给您的脚本，您可以尝试使用

```
qsub ... Test.pl -i=500 
```

但根据我的网络搜索，这可能只适用于某些版本的`qsub`. 其他人会要求你制作一个帮助脚本（比如`Test.sh`）

```
#!/bin/sh
Test.pl "-i=$i" 
```

连同命令

```
qsub ... -v 'i=500' Test.sh 
```

* * *

如果`qsub ... Test.pl ...args...`支持并且您可以更改脚本，最简单的解决方案是

```
qsub ... Test.pl 500 
```

和

```
my ($i) = @ARGV; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:12:11.667

我终于得到了适用于 PBRProfessional 10.4 的解决方案。

有两种方法可以解决它：

第一个是以下

```
echo "perl /path/to/Test.pl -i 500" | qsub -l nodes=node06 
```

二是二用

```
qsub -l nodes=node06 -v i=500 Test.pl 
```

并通过 $ENV{i} 读取 Test.pl 中的参数

# regex - 用于格式化文件的正则表达式

> ID：15680331
> 
> 赞同：0
> 
> 时间：2013-03-28T11:13:57.637
> 
> 标签：regex, visual-studio, regex-negation

我的文件包含每行以特定模式开头的数据

```
1000000179|abcd.....
1000000180|wedwedw...
1000000181|wnewedwed... 
```

我已经在 Visual Studio 中打开了该文件，并且需要一个 RE 来查找任何没有以正确顺序开始的行。像下面的第 3 行和第 4 行是无效的。如何使用 RE 隔离它们

```
1000000179|abcd.....
1000000180|wedwedw...
1000xyadaa|wnewedwed...
%dfgxyadaa|wnewedwed... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:25:16.200

一些简单的东西`^[^0-9]{1,10}[^|].*$`应该检测任何不以十个数字和管道开头的行。

如果您只想选择该行的第一部分，那么`^[^0-9]{1,10}[^|]`

注意：如果您更喜欢该语法，则可以替换`[^0-9]`为`\D`（区分大小写！），例如`^\D{1,10}[^|]`

要反转逻辑（即找到正确的行），请使用`^[0-9]{10}\|.*$` 或`^\d{10}\|`

* * *

**编辑：对于 VS2005 的搜索/替换“正则表达式”：**

要查找不以 10 个数字后跟管道的行：`^~([0-9]^10\|)`

要查找以 10 个数字后跟管道开头的行：`^[0-9]^10\|`

请注意，根据@KennethK. 下面的评论， `\d`and`\D`语法不起作用。`[0-9]`VS 正则表达式中单个数字的等价物是`:d`.

有关 VS2005 中可用的正则表达式列表，请参阅[http://msdn.microsoft.com/en-us/library/2k3te2cs(VS.80).aspx](http://msdn.microsoft.com/en-us/library/2k3te2cs(VS.80).aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:58:29.013

如果我了解您要查找的内容，请尝试以下表达式：

```
^~(1000000).*$ 
```

其中`^`,`.*`和`$`all 的功能与典型的正则表达式相同，并且`~(...)`表示“不匹配”。因此，该模式的总体意图是查找不以字符串“1000000”开头的行。

# html - 为什么这个图像不会留在 div id 中？

> ID：15680333
> 
> 赞同：0
> 
> 时间：2013-03-28T11:14:04.043
> 
> 标签：html, css

```
<div id="admid">
  <a href="#"><img src="http://storage.googleapis.com/support-kms-prod/SNP_2922296_en_v0" /></a>
</div>

#admid {
  height: 80px;
  width: 480px;
  margin: auto;
  border: 1px solid #000;
} 
```

如果您有什么要补充的，请告诉我。我正在尝试边做边学。哎呀！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:16:51.510

试试这个

```
#admid {
    overflow: hidden;
}

#admin img {
    width: 100%;
} 
```

# python - 将矩形的顶点按顺序排列

> ID：15680334
> 
> 赞同：0
> 
> 时间：2013-03-28T11:14:05.110
> 
> 标签：python, algorithm, sorting, math, geometry

我正在尝试在 python(2.7) 中编写一个函数。该函数将采用一个包含 8 个值的列表，这些值表示顶点的坐标。
（输入的形式是 [Ax,Ay,Bx,By,Cx,Cy,Dx,Dy] ）
该函数将确定这些顶点是否被给出以形成一个有效的矩形。

如果不是，它会将它们按顺序排列并返回这些顶点的排序列表。起点或方向（是顺时针还是逆时针）并不重要。

让我说明我想要什么：
如果给定的输入在下面的链接中形成第二或第三个形状；该函数会将其转换为第一个。 [http://i.stack.imgur.com/IsRqr.png](http://i.stack.imgur.com/IsRqr.png)

## 我可以使用哪种算法来做到这一点？

我使用了 Alexey 建议的方式并编写了我的代码。它可能需要一些优化，但对我来说不是必需的。

```
def crossProduct(vector1,vector2) :
    a,b,c = vector1
    d,e,f = vector2
    vector3 = (b*f-c*e , -a*f+c*d , a*e-b*d)
    return vector3

def fixRect(rectList) :
    Ax,Ay,Bx,By,Cx,Cy,Dx,Dy = rectList[:]
    v12 = (Bx-Ax,By-Ay,0)
    v13 = (Cx-Ax,Cy-Ay,0)
    v14 = (Dx-Ax,Dy-Ay,0)
    z1 = crossProduct(v13,v12)[2]
    z2 = crossProduct(v13,v14)[2]
    if z1*z2 < 0 : # if two z values have different sign, they are in order
        return [Ax,Ay,Bx,By,Cx,Cy,Dx,Dy]
    # else swap 2 and 3
    Ax,Ay,Cx,Cy,Bx,By,Dx,Dy = rectList[:]
    # repeat
    v12 = (Bx-Ax,By-Ay,0)
    v13 = (Cx-Ax,Cy-Ay,0)
    v14 = (Dx-Ax,Dy-Ay,0)
    z1 = crossProduct(v13,v12)[2]
    z2 = crossProduct(v13,v14)[2]
    if z1*z2 < 0 : # if two z values have different sign, they are in order
        return [Ax,Ay,Bx,By,Cx,Cy,Dx,Dy]
    # else swap 3 and 4
    Ax,Ay,Bx,By,Dx,Dy,Cx,Cy = rectList[:]
    # repeat
    v12 = (Bx-Ax,By-Ay,0)
    v13 = (Cx-Ax,Cy-Ay,0)
    v14 = (Dx-Ax,Dy-Ay,0)
    z1 = crossProduct(v13,v12)[2]
    z2 = crossProduct(v13,v14)[2]
    if z1*z2 < 0 : # if two z values have different sign, they are in order
        return [Ax,Ay,Bx,By,Cx,Cy,Dx,Dy]
    else: raise Exception("Couldn't fix the rectangle") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:19:17.680

制作从点 1 到点 2 的向量。

制作从点 1 到点 3 的向量。

制作一个从点 1 到点 4 的向量。

计算向量 1->3 和 1->2 的叉积的 z 分量。

计算向量 1->3 和 1->4 的叉积的 z 分量。

如果这两个 z 有不同的符号（一个是负数，另一个是正数），那么你的观点是有序的。

如果它们不按顺序排列，请重复上述所有操作，首先交换点 3 和 2。如果这还不够，则交换原始点列表/数组中的点 3 和 4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-14T11:24:47.437

我知道这有点像僵尸问题，但我找不到相关的新问题。所以我会发布这个以防它对某人有帮助。

这是我使用的算法。它依赖于以下假设：

*   它是一个正方形/矩形：4 个顶点，彼此成 90 度的边
*   顶点已经按顺序排列（顺时针或逆时针）
*   它被 R 旋转，使得 -45 < R < +45 度

注意：它使用[numpy](/questions/tagged/numpy "显示标记为“numpy”的问题")和[scikit-image](/questions/tagged/scikit-image "显示标记为“scikit-image”的问题")坐标约定：(Y,X)，左上角为 (0,0)。

```
import numpy as np
def sorted_rect(vec):
    # returns vec in clockwise order, starting with topleft
    normd = vec - np.average(vec,axis=0) # vertices relative to centroid
    tl_idx = np.argmax(np.dot(normd,np.array([-1,-1]))) #index of top left vertex
    clockwise = np.cross(vec[(tl_idx+1) % 4] - vec[tl_idx],
                         vec[tl_idx] - vec[tl_idx-1]) > 0
    return np.roll(vec,-tl_idx,axis=0) if clockwise else np.roll(vec,-1-tl_idx,axis=0)[::-1] 
```

# jquery - angular-ui select2 tagging 更新数据值

> ID：15680336
> 
> 赞同：2
> 
> 时间：2013-03-28T11:14:11.057
> 
> 标签：jquery, angularjs, angular-ui, jquery-select2

所以这是我的 select2 输入

```
<input type="hidden" ng-model="ProjectTagpr" class="input-large" ui-select2="tagOptions" /> 
```

`tagOptions`在哪里

```
{
    data: [{"id":301,"text":"tag2"},{"id":302,"text":"tag2"},{"id":303,"text":"tag3"},{"id":304,"text":"tag4"}],
    multiple: true,
    createSearchChoice: function(term) {
        var timestamp = new Date().getTime();
        return {id: timestamp, text: term, new: true};
    }
} 
```

并且`ProjectTagpr`是

```
[301, 304]; 
```

它使用标签呈现 select2并`tag1, tag4` **转向** `ProjectTagpr`

```
[{"id":301,"text":"tag2"},{"id":304,"text":"tag4"}] 
```

**现在第一个问题** 我可以让它保持原始`ProjectTagpr`结构（只是一个 id 数组，而不是同时具有 id 和文本的对象）？

**第二个问题**，如果我 添加一个新标签，比如说，`newtag5`它会扩展`ProjectTagpr`为类似从数据库返回 id 而没有那个），我该怎么做？`{id: 1554894854, text: 'newtag5', new: true}``data``new: true`

我试图这样做，`$scope.tagOptions.data = dataReturnedFromHttp;`但显然（或没有）没有工作..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T10:07:14.363

其实很简单

```
data: function() {
   return {'results': $scope.data};
} 
```

然后它几乎是实时绑定的。

只是它以某种方式没有记录，您可以将数据传递给函数..

# multithreading - 多线程死锁 - 使用 pthread 库的生产者和客户模块

> ID：15680339
> 
> 赞同：1
> 
> 时间：2013-03-28T11:14:23.343
> 
> 标签：multithreading, pthreads, deadlock

最近我正在研究 pthread 多线程库并做一些例子。

我尝试编写一个生产者-客户模块：有一个队列来存储生产者的产品，并且可以由客户获取。

我将队列 MAX-SIZE 设置为 20。当队列已满时，Producer 线程将等待，直到 Customer 线程消耗 1 并且他可以开始生产的 Producer 线程。和客户一样，当队列为空时，客户会等到生产者线程产生新的并通知他。:-)

我将客户线程的消耗设置为比生产快，它可以正常工作，因为日志输出确实符合我的预期。但是，当我设置生产者线程消耗比消耗快时，似乎最终导致了**死锁**:-(

我不知道原因，任何人都可以阅读我的代码并给我一些提示或如何修改代码吗？

谢谢！

```
#include "commons.h"

typedef struct tagNode {
    struct tagNode *pNext;
    char *pContent;
}NodeSt, *PNodeSt;

typedef struct {
    size_t  mNodeNum;
    size_t  mNodeIdx;
    PNodeSt mRootNode;
}WorkQueue;

#define WORK_QUEUE_MAX 20

static pthread_cond_t  g_adder_cond  = PTHREAD_COND_INITIALIZER;
static pthread_mutex_t g_adder_mutex = PTHREAD_MUTEX_INITIALIZER;
static WorkQueue g_work_queue = {0};
//------------------------------------------------------------------------
void *customer_thread_runFunc(void *usrdat){
    for( ; ; ) {
pthread_mutex_lock(&g_adder_mutex);{
        while( g_work_queue.mNodeNum == 0 ) {
            pthread_cond_wait(&g_adder_cond, &g_adder_mutex);
        }
/********************** CONSUME NEW PRODUCT ***********************/
        g_work_queue.mNodeNum --;

        if( g_work_queue.mRootNode->pNext != NULL ) {
            PNodeSt pTempNode = g_work_queue.mRootNode->pNext;
            free( g_work_queue.mRootNode->pContent );
            free( g_work_queue.mRootNode );
            g_work_queue.mRootNode = pTempNode;
        } else {
            free( g_work_queue.mRootNode->pContent );
            free( g_work_queue.mRootNode );
            g_work_queue.mRootNode = NULL;
        }
/********************** CONSUME PRODUCT END ***********************/
        // Nofity Producer Thread
        pthread_cond_signal(&g_adder_cond);
}pthread_mutex_unlock(&g_adder_mutex);

        // PAUSE FOR 300ms
        usleep(300); 
    }
    return NULL;
}
//------------------------------------------------------------------------
void *productor_thread_runFunc( void *usrdat ) {
    for( ; ; ) {
pthread_mutex_lock(&g_adder_mutex); {
        char tempStr[64];
        PNodeSt pNodeSt = g_work_queue.mRootNode;

        while( g_work_queue.mNodeNum >= WORK_QUEUE_MAX ) {
            pthread_cond_wait(&g_adder_cond, &g_adder_mutex);
        }

/********************** PRODUCE NEW PRODUCT ***********************/
        g_work_queue.mNodeNum ++;
        g_work_queue.mNodeIdx ++;

        if( pNodeSt != NULL ) {
            for( ; pNodeSt->pNext != NULL; pNodeSt = pNodeSt->pNext );
            pNodeSt->pNext = malloc(sizeof(NodeSt));
            memset(pNodeSt->pNext, 0, sizeof(NodeSt));
            sprintf( tempStr, "production id: %d", g_work_queue.mNodeIdx);
            pNodeSt->pNext->pContent = strdup(tempStr);
        } else {
            g_work_queue.mRootNode = malloc(sizeof(NodeSt));
            memset(g_work_queue.mRootNode, 0, sizeof(NodeSt));
            sprintf( tempStr, "production id: %d", g_work_queue.mNodeIdx);
            g_work_queue.mRootNode->pContent = strdup(tempStr);
        }
/********************** PRODUCE PRODUCT END ***********************/
        // Nofity Customer Thread
        pthread_cond_signal(&g_adder_cond);
}pthread_mutex_unlock(&g_adder_mutex);

        // PAUSE FOR 150ms, faster than Customer Thread
        usleep(150); 
    }
    return NULL;
}
//------------------------------------------------------------------------
int main(void) {

    pthread_t pt1, pt3;
    pthread_attr_t attr;

    pthread_attr_init(&attr);
    pthread_create(&pt1, &attr, customer_thread_runFunc, NULL);
    pthread_create(&pt3, &attr, productor_thread_runFunc, NULL);
    pthread_join(pt1, NULL);
    pthread_join(pt3, NULL);

    printf("MAIN - main thread finish!\n");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:23:38.977

您的生产者正在等待与您的消费者相同的条件吗？这绝对是麻烦的根源。从概念上考虑您的代码。生产者在“生产”之前需要什么前置条件？正如您所提到的，缓冲区需要有空间。

我没有仔细看，但您可能需要一个额外的条件变量，由生产者使用（与消费者不同）。生产者仅在队列已满时才等待。消费者每次成功从队列中检索某些东西时都会发出信号。

编辑：阅读 pthread lib 的文档，两个条件可以使用一个互斥锁

伪代码的想法:)

```
Mutex mqueue
Condition cprod, ccons

produce()
  mqueue.lock
  while the queue is full
     cprod.wait(mqueue)
  end
  do the production on queue
  mcons.signal
  mqueue.unlock
end produce

consume()
  mqueue.lock
  while the queue is empty
      ccons.wait(mqueue)
  end
  do the consumption on the queue
  cprod.signal
  mqueue.unlock
end consume 
```

最好在你有锁时发出信号。在这里，我认为顺序没有什么不同。

# php - 提交后选择框的值

> ID：15680340
> 
> 赞同：1
> 
> 时间：2013-03-28T11:14:25.483
> 
> 标签：php, select

我有简单的代码文件名：newEmptyPHP.php

```
<form method="post" action="newEmptyPHP.php">Title:
    <select name="title">
        <option value="select">Select</option>;
        <option value="Dr" selected=<?php if(isset($_POST[ 'title'])=="Dr" ){ echo "selected"; } ?>>Dr</option>';
        <option value="Prof">Prof</option>';
        <option value="Mr">Mr</option>';
        <option value="Ms">Ms</option>';
        <option value="Miss">Miss</option>';
        <option value="Mrs">Mrs</option>';</select>
    <input type="submit" value="submit">
</form> 
```

我想保留在表单提交之前选择的特定值。但我没有得到理想的输出。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:18:07.080

改变这个

```
<option value="Dr" selected=<?php if(isset($_POST['title']) == "Dr")
{ echo "selected";  } ?> >Dr</option>'; 
```

到

```
<option value="Dr" <?php if(isset($_POST['title']) && $_POST['title'] == "Dr")
{ echo "selected='selected'";  } ?> >Dr</option>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:18:29.763

改变

```
<option value="Dr" selected=<?php if(isset($_POST['title']) == "Dr"){ echo "selected";  } ?> >Dr</option>'; 
```

到 ：

```
<option value="Dr" <?php if(isset($_POST['title']) && $_POST['title'] == "Dr"){ echo 'selected="selected"';  } ?> >Dr</option>'; 
```

1.删​​除`isset`您正在检查它的价值，`isset`将返回`true`或`false`
2.Make`selected="selected`内部`if`条件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:19:14.553

```
<?php if(isset($_POST['title']) == "Dr"){ echo "selected";  } ?> 
```

改成

```
<?php if(isset($_POST['title']) && $_POST['title'] == "Dr"){ echo "selected";  } ?> 
```

但最好使用 JS/jQuery。**jQuery**示例：

```
<?php if(isset($_POST['title']) && $_POST['title'] == "Dr"):?>
    <script type="text/javascript">
    $(function(){
        $('select[name=title]').val('<?php echo html_special_chars($_POST[''title'])?>');
    });
    </script>
<?php endif?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T11:20:21.873

我认为您有静态选项值。如果是这样，您必须检查每个选项，如下所示。

```
<form method="post" action="newEmptyPHP.php">
    Title:<select name="title" > 
                                <option value="select" >Select</option>; 
<?php 
     $selected = ""; 
     if(isset($_POST['title']) &&  $_POST['title'] == "Dr")
     { 
       $selected = 'selected="selected"'; 
     } 
 ?>
 <option value="Dr" <?php echo $selected; ?>>Dr</option> 
 <option value="Prof">Prof</option> 
 <option value="Mr">Mr</option>
 <option value="Ms">Ms</option> 
 <option value="Miss">Miss</option> 
 <option value="Mrs">Mrs</option> 
 </select>
 <input type="submit" value="submit">
</form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T11:20:31.030

```
<?php 
if($_POST['title'] == "Dr")
{ ?>
<option value="Dr" selected>Dr</option>
<?php
}
else
{
?>
<?php
<option value="Dr">Dr</option>
<?php
}
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T11:24:58.360

您的代码中有错误。`isset(Something)`将返回`true`或`false`不会返回`Dr`您正在寻找的。

重试这个

```
<form method="post" action="newEmptyPHP.php">
    Title:<select name="title" > 
              <option value="" >Select</option> 
              <option value="Dr" selected=<?php if(isset($_POST['title']) && $_POST['title'] == "Dr"){ echo "selected";  } ?> >Dr</option>'; 
              <option value="Prof" <?php if(isset($_POST['title']) && $_POST['title'] == "Prof"){ echo "selected";  } ?>>Prof</option>'; 
              <option value="Mr" <?php if(isset($_POST['title']) && $_POST['title'] == "Mr"){ echo "selected";  } ?>>Mr</option>'; 
              <option value="Ms" <?php if(isset($_POST['title']) && $_POST['title'] == "Ms"){ echo "selected";  } ?>>Ms</option>'; 
              <option value="Miss" <?php if(isset($_POST['title']) && $_POST['title'] == "Miss"){ echo "selected";  } ?>>Miss</option>'; 
              <option value="Mrs" <?php if(isset($_POST['title']) && $_POST['title'] == "Mrs"){ echo "selected";  } ?>>Mrs</option>'; 
         </select>
<input type="submit" value="submit"> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-28T11:28:14.307

为此，我宁愿使用此代码

```
$option_array = array('select'=>'select','mr'=>'mr'... other values);

<?php
  $option_string = '';
 foreach($option_array as $key=>$value)
 {
   if($key == $_POST['title'])
   {
     $selected = 'selected';
   }
   else
   {
    $selected = '';
   }
   $option_string .= "<option value='$key' $selected>$value</option>";
}
?>
<form method="post" action="newEmptyPHP.php">Title:
<select name="title">
<?php echo $option_string; ?>    
</select>
<input type="submit" value="submit"> 
```

# php - 使用 phpseclib 通过 PHP 创建 SSH 屏幕

> ID：15680343
> 
> 赞同：0
> 
> 时间：2013-03-23T17:12:20.837
> 
> 标签：php, ssh

我需要通过 PHP 启动一个 SSH 屏幕。我有一个 PHP 脚本，我试图在我的 ssh 服务器上使用 PHP SSH 库 phpseclib 创建一个屏幕。这是我用来尝试创建屏幕的功能：

```
 function startscreen($ssh, $user)
 {
      $ssh->exec("screen -S ".$user);
 } 
```

这就是我调用函数的方式：

```
startscreen($ssh, $user); 
```

我知道我可以通过这种方式创建屏幕，但它不能使用 php 远程工作。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:17:45.343

Screen 需要分配一个实际的 pty/tty 才能像现在一样以附加模式启动。如果您以分离模式启动它会更好（请参阅手册页，如果您有更多编程问题，请参阅堆栈溢出）

# c# - 如何获取复选框列表的值？

> ID：15680346
> 
> 赞同：1
> 
> 时间：2013-03-28T11:14:33.653
> 
> 标签：c#, asp.net

我正在创建一个 CheckBoxList 并动态填充它。我单步执行了代码，它似乎并没有命中以下方法，我认为 selected value 属性的值始终为 false。

```
<form id="form1" action="web_page.aspx">
   <asp:CheckBoxList ID="CheckBoxList1" runat="server" AutoPostBack="True"
           onselectedindexchanged="CheckBoxList1_SelectedIndexChanged" >
   </asp:CheckBoxList>
   <br />
   <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="submit"/>
</form>
<div id="p" runat="server"></div>

protected void CheckBoxList1_SelectedIndexChanged(object sender, EventArgs e)
{
    this.p.InnerHtml = "hello";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:57:50.850

问题可能是您对`page_load`事件具有约束力。

试着把它绑在`page load`里面`!Page.IsPostBack`

```
 if(!Page.IsPostBack)
 {
     //bind here.
 } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T11:31:18.997

您应该能够将发件人转换为复选框列表，然后遍历项目：

```
 Protected Sub test(ByVal sender As Object, ByVal e As EventArgs) Handles check1.SelectedIndexChanged
    Dim myCb As New CheckBoxList
    myCb = Me.check1

    For Each c As ListItem In myCb.Items
        Dim isChecked, value, text As String
        isChecked = c.Selected
        If (isChecked = True) Then
            value = c.Value
            text = c.Text
        End If
    Next
End Sub 
```

# r - 在 R 中绘制没有零值的直方图

> ID：15680350
> 
> 赞同：4
> 
> 时间：2013-03-28T11:14:41.517
> 
> 标签：r, histogram

我想从直方图中排除所有零值。到目前为止，我创建了一个新对象并将所有零值转换为 NA，但我希望有一些更简单的方法而无需创建新对象。

示例代码：

```
set.seed(45)
a<-sample(0:10,500,replace=T)
c<-ifelse(a!=0,a,NA)
hist(c) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T11:17:02.787

您可以像这样使用子集：

```
hist( a[ !a==0 ]) 
```

您可以检查它的工作方式如下：

```
table(is.na(c))
FALSE  TRUE 
 443    57 

length(a[!a==0])
[1] 443 
```

# jquery - 砌体调整大小问题

> ID：15680358
> 
> 赞同：0
> 
> 时间：2013-03-28T11:15:09.053
> 
> 标签：jquery, resize, jquery-masonry

我们正在开发一个响应移动设备的网站。然而，砌体有点小故障，因为当调整窗口大小时，它会移动以允许另一列，但列并没有填满它

[http://tbd.aaronnicholls.co.uk/work](http://tbd.aaronnicholls.co.uk/work)

有谁知道一个很好的解决方法

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T06:37:31.567

不确定这是否会帮助你。这就是我在我的网站上使用的内容，并且调整大小可以正常工作。也许如果你修改你的代码，它也会对你有用。

您的代码中似乎缺少以下功能。#container 是包装所有项目的容器。在您的情况下，它是工作循环 ul。.span1BoxWrapper 是项目的主要包装器。问题似乎与您的主要工作循环包装器及其宽度有关。我在萤火虫中取出了宽度，并且这些物品正确地重新定位了自己。下面缺少的功能应该可以解决这个问题。

注意：如果我将 .js 文件更改为 jquery.masonry.js （就像你一样），布局不再起作用，所以这也可能是你的问题的原因。另一个原因可能是当您调整屏幕大小时框会缩小。

```
<!--boxes arrangement-->
<script src="js/jquery-1.8.2.min.js"></script>
<script src="js/jquery.masonry.min.js"></script>
<script src="js/modernizr-transitions.js"></script>
<script>

  $(function(){

    $('#container').masonry({
      itemSelector: '.span1BoxWrapper',
      //cornerStampSelector: '.corner-stamp',
      columnWidth: 1,
      isAnimated: !Modernizr.csstransitions,
      //isRTL: true,
      isFitWidth: true
    });

  });
</script>
<style>
#container{
    background:#fff;
    padding:10px 10px 0 0;
    border:1px dotted #ccc;
    margin:0 auto 20px;
    overflow:hidden;
    clear: both;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
}
</style> 
```

# excel - Excel数据转换

> ID：15680360
> 
> 赞同：0
> 
> 时间：2013-03-28T11:15:15.457
> 
> 标签：excel

如何根据 A 列在 Excel 中将表 1 转换为表 2？（A列是关键）。

表格1：

```
|A|B|C|
|1|X| |
|1| |Y|
|2|U| |
|2| |V| 
```

表 2：

```
|A|B|C|
|1|X|Y|
|2|U|V| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:22:14.967

老实说，假设数据是这样有规律的，最简单和最快的方法，虽然肯定不是最干净的，但将是间接的。

假设您的数据从 A1:C1 列开始，并且您希望新表从 E1:G1 开始，那么

E1：`=INDIRECT("A"&ROW(D1)*2)`

F1：`=INDIRECT("B"&ROW(D1)*2-1)`

G1：`=INDIRECT("c"&ROW(D1)*2)`

这并不能概括为“将所有空值超出范围”，但对于您的示例，它可以工作。

# webdriver - 如何在 webdriver 中杀死 IE 服务器的命令行服务器

> ID：15680363
> 
> 赞同：4
> 
> 时间：2013-03-28T11:15:31.957
> 
> 标签：webdriver, selenium-webdriver

请指导我如何杀死 IE 驱动程序的实例。在我运行测试并完成后，浏览器正在退出，因为我使用了 driver.quit()。但是在任务管理器中交叉检查时发现实例仍然处于运行状态。

**代码骨架：**

```
driver=new InternetExplorerDriver(); //calling IE driver 
testRun(); // run my test                                                                                          
driver.quit(); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T09:43:22.827

我给你一个方法

```
public void ieKiller() throws Exception
{
  final String KILL = "taskkill /IM ";
  String processName = "IEDriverServer.exe"; //IE process
  Runtime.getRuntime().exec(KILL + processName); 
  Wait(3000); //Allow OS to kill the process
} 
```

[资源](http://bharath-marrivada.blogspot.ch/2012/01/webdriverselenium-killterminate.html)

# go - 为什么我的 Go 代码不运行？

> ID：15680370
> 
> 赞同：-2
> 
> 时间：2013-03-28T11:15:53.867
> 
> 标签：go

```
package main

import (
    "fmt"
    "github.com/ant0ine/go-json-rest"
    "net/http"
)

type App struct {
    Id   string
    Name string
}

func GetApp(w *rest.ResponseWriter, req *rest.Request) {
    user := App{
        Id:   req.PathParam("id"),
        Name: "Antoine",
    }
    w.WriteJson(&user)
}

type MyResourceHandler struct {
    rest.ResourceHandler
}

type ResourceController interface {
    Show(w *rest.ResponseWriter, req *rest.Request)
    Create(w *rest.ResponseWriter, req *rest.Request)
    Update(w *rest.ResponseWriter, req *rest.Request)
    Delete(w *rest.ResponseWriter, req *rest.Request)
}

func (self *MyResourceHandler) AddResource(name string, c ResourceController) error {
    show_func := func(w *rest.ResponseWriter, r *rest.Request) {
        c.Show(w, r)
    }
    create_func := func(w *rest.ResponseWriter, r *rest.Request) {
        c.Create(w, r)
    }
    update_func := func(w *rest.ResponseWriter, r *rest.Request) {
        c.Update(w, r)
    }
    delete_func := func(w *rest.ResponseWriter, r *rest.Request) {
        c.Delete(w, r)
    }

    err := self.ResourceHandler.SetRoutes(
        rest.Route{"GET", fmt.Sprintf("/%s/:id", name), show_func},
        rest.Route{"POST", fmt.Sprintf("/%s", name), create_func},
        rest.Route{"PUT", fmt.Sprintf("/%s/:id", name), update_func},
        rest.Route{"DELETE", fmt.Sprintf("/%s/:id", name), delete_func},
    )
    return err
}

type AppController struct{}

func (self *AppController) Show(w *rest.ResponseWriter, r *rest.Request) {
    app := App{
        Id:   r.PathParam("id"),
        Name: "Antoine",
    }
    w.WriteJson(&app)
}

func (self *AppController) Create(w *rest.ResponseWriter, r *rest.Request) {
    app := App{
        Id:   r.PathParam("id"),
        Name: "Antoine",
    }
    w.WriteJson(&app)
}

func (self *AppController) Update(w *rest.ResponseWriter, r *rest.Request) {
    app := App{
        Id:   r.PathParam("id"),
        Name: "Antoine",
    }
    w.WriteJson(&app)
}

func (self *AppController) Delete(w *rest.ResponseWriter, r *rest.Request) {
    app := App{
        Id:   r.PathParam("id"),
        Name: "Antoine",
    }
    w.WriteJson(&app)
}

func main() {
    handler := MyResourceHandler{}
    controler := AppController{}
    handler.AddResource("app", controler)
    http.ListenAndServe(":9008", &handler)
} 
```

我已经实现了 interface 的所有四种方法`ResourceController`，但它告诉我：

```
./fakeapi.go:93: cannot use controler (type AppController) as type ResourceController in function argument:
    AppController does not implement ResourceController (Create method requires pointer receiver) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T12:24:27.120

它在错误消息中：`(Create method requires pointer receiver)`

您已经定义了 Create on `*AppController`（指向 AppController 的指针），但您尝试使用`AppController`不满足接口的 .

您可能想要的解决方案是更改`controler := AppController{}`为`controler := &AppController{}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T12:39:12.720

正如 cthom06 所说，答案在错误中。

错误消息的原因是您仅`ResourceController`在传递指针而不是值时才实现。

当您实现`Show`,`Create`等时，您使用了

```
func (self *AppController)... 
```

这需要获取指针接收器的方法，但`AddResources`给定的是 的*值* ，`controler`而不是指针。

下面是一些显示问题的示例代码：

```
package main

import "fmt"

type I interface {
    Show(i int)
}

type T struct{}

func (t *T) Show(i int) {
    fmt.Println(i)
}

func CallShow(i I) {
    i.Show(32);
}

func main() {
    obj := T{}

    // CallShow(obj) // This doesn't work unless you change func (t *T) to func (t T)
    CallShow(&obj) // This works because you pass a pointer
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-28T03:38:57.577

也不推荐使用“ResourceHandler”。我建议使用 v3 API：

```
api := rest.NewApi()
api.Use(rest.DefaultDevStack...)
router, err := rest.MakeRouter(
   // your routes here ...
)
if err != nil {
    log.Fatal(err)
}
api.SetApp(router)
log.Fatal(http.ListenAndServe(":8080", api.MakeHandler())) 
```

Antoine - go-json-rest 作者

# sed - 删除所有长度为 3 或 4 的数字字符串 - SED

> ID：15680371
> 
> 赞同：0
> 
> 时间：2013-03-28T11:16:00.453
> 
> 标签：sed

我正在尝试编写一个 sed 命令，该命令将使用文本文件中的“*”屏蔽所有长度为 3/4 数字的实例。我有这个：

```
s/[0-9]\{4\}/\*\*\*\*/g
s/[0-9]\{3\}/\*\*\*/g 
```

这将做到这一点，但也掩盖了任何更长的数字字符串的前 3/4 个字符。

有没有办法屏蔽长度为 3 和 4 的字符串。这些数字也可以是文本的一部分。

我是 sed 的新手，并试图阅读文档，但我正在努力删除我需要的文档。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:23:41.770

你没有给出任何输入示例，试试这个，看看它是否有帮助：

```
sed -r 's/\b[0-9]{3}\b/***/g;s/\b[0-9]{4}\b/****/g' file 
```

例子：

```
kent$  echo "111
1234567
111 1111 12ab 1111a                                        
11 1111 1"|sed -r 's/\b[0-9]{3}\b/***/g;s/\b[0-9]{4}\b/****/g'
***
1234567
*** **** 12ab 1111a
11 **** 1 
```

顺便说一句，你真的想用**3**颗星替换 3 个数字，用**4**颗星替换 4 个数字吗？

**编辑**：

```
sed -r 's/([^0-9]|\b)[0-9]{3}([^0-9]|\b)/\1***\2/g;s/(\b|[^0-9])[0-9]{4}(\b|[^0-9])/\1****\2/g' file 
```

测试（以 OP 为例）

```
kent$  echo "111
1234567
111 1111 12ab 1111a
11 1111 1
 fhdjs777ssaa"|sed -r 's/([^0-9]|\b)[0-9]{3}([^0-9]|\b)/\1***\2/g;s/(\b|[^0-9])[0-9]{4}(\b|[^0-9])/\1****\2/g'    
***
1234567
*** **** 12ab ****a
11 **** 1
 fhdjs***ssaa 
```

请注意，此行将替换`foo123bar`为`foo***bar`，但将`foo123456bar`保持不变。

# r - 提取 PCA 轴以进行进一步分析

> ID：15680375
> 
> 赞同：8
> 
> 时间：2013-03-28T11:16:03.680
> 
> 标签：r, pca, lm

我正在分析有关芦苇场的数据。我测量的变量是水深、芦苇高度、芦苇密度等。由于一些变量是相关的，我执行了 PCA 以将这些变量减少到 2 个 PCA 轴 (N=104)。

为了执行 PCA，我使用了`vegan`R 中的包。我的数据如下所示：

```
row.names   Waterpeil   hoogte_max  Som Leeftijd_riet   PFD oppervlakte onderlaag_num   afst_rand
1   1   5   2.5 51  0.15686274  1.616921    8.127192    2   24.154590
2   3   9   2.5 44  0.13636364  1.564643    9.023642    2   8.349288
3   4   0   2.5 84  0.30952381  1.352548    8.498775    2   26.226896
4   5   0   3.5 58  0.43103448  1.384183    9.301617    1   57.320000
5   6   40  2.5 52  0.42307692  1.361262    10.316058   1   45.470000
6   7   5   3.0 19  0.00000000  1.429287    9.927788    1   36.720000
7   9   0   2.5 64  0.28125000  1.355100    8.029911    2   19.560000
8   11  120 3.5 29  0.03448276  1.336117    11.147484   1   252.630000
9   14  0   2.0 27  0.07407407  1.847756    7.445060    2   1.864342
10  16  20  2.5 57  0.24561404  1.582308    8.425177    2   9.490196
11  17  5   3.0 54  0.01851852  1.348305    9.315008    2   15.960000
12  18  0   1.5 5   1.00000000  1.643657    8.063648    2   6.526300
13  21  0   2.0 18  0.05555556  1.394964    8.752185    2   37.576955
14  22  20  2.0 48  0.16666667  1.617045    8.911028    1   11.592383
15  25  0   2.5 71  0.42253521  1.749114    7.271499    2   6.572772
16  26  0   2.0 50  0.30000000  1.464582    7.349908    2   9.849276
17  27  5   2.5 61  0.34426229  1.511217    8.379012    2   14.082827
18  28  5   2.0 123 0.06504065  1.538188    8.271017    2   11.658142
19  29  100 3.0 75  0.44000000  1.896483    7.968603    1   9.071897
20  30  100 3.0 95  0.55789474  1.768147    8.367626    1   2.300783
21  32  0   3.0 74  0.45945946  1.458793    9.453464    2   57.210000
22  33  15  3.0 66  0.24242424  1.572704    7.620507    1   8.700000
23  34  5   3.0 83  0.38554217  1.436063    11.636262   1   50.613265
24  35  5   2.5 58  0.31034483  1.313440    9.370347    2   52.605041
25  36  20  2.5 91  0.28571429  1.544032    8.451961    1   9.713351
26  37  10  2.5 34  0.23529412  1.524725    9.348687    2   6.920026
27  38  20  2.5 48  0.41666667  1.584892    7.780915    1   11.302639
28  39  40  2.5 51  0.15686274  1.535552    6.994035    1   18.999423
29  40  35  2.5 48  0.45833333  1.460579    9.073331    1   12.869075
30  41  5   3.0 58  0.43103448  1.747669    7.628542    2   3.860225
31  42  25  2.5 36  0.52777778 
```

我已经这样做了，这是前两个轴的输出：

```
y<-rda(nestendca2) 
summary(y)
               PC1       PC2    
Waterpeil     13.816422 -2.312641
hoogte_max     0.094747 -0.014497 
Som            2.955029 10.812549  
Leeftijd_riet  0.016476  0.019629  
PFD            0.007361 -0.003386  
oppervlakte    0.052943  0.039657 
```

现在我想在逻辑回归中实现这两个轴，将其与在这些领域繁殖的猛禽的繁殖成功联系起来。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T12:02:04.000

如果你使用这个`princomp`包，你可以像这样提取负载：

```
PCA <- princomp(data,cor=T)
PCA 
PCA$loadings
Loadings <- as.data.frame(PCA$loadings[,1:2]) 
```

如果你使用`prcomp`你可以这样做：

```
PCA2 <- prcomp(data)
Loadings <- as.data.frame(PCA2$rotation[,1:2]) 
```

如果您使用`vegan`：

```
PCA3 <- rda(data)
Loadings <- as.data.frame(PCA3$CA$v.eig[,1:2]) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-28T12:02:40.160

假设您`prcomp`在 R 中使用。这是一种方法

```
pca <- prcomp(~ Murder + Rape + Assault, data = USArrests, scale = TRUE)

(loadings <- pca$rotation)

##              PC1      PC2      PC3
## Murder  -0.58260  0.53395 -0.61276
## Rape    -0.53938 -0.81798 -0.19994
## Assault -0.60798  0.21402  0.76456

axes <- predict(pca, newdata = USArrests)
head(axes, 4)

##               PC1      PC2       PC3
## Alabama  -1.19803  0.83381 -0.162178
## Alaska   -2.30875 -1.52396  0.038336
## Arizona  -1.50333 -0.49830  0.878223
## Arkansas -0.17599  0.32473  0.071112 
```

如果您愿意，您现在可以在逻辑回归中使用这些新列（轴）。我将向您展示一个使用简单线性模型的示例。

```
dat <- cbind(USArrests, axes)
lm(UrbanPop ~ PC1 + PC2, data = dat)

## Call:
## lm(formula = UrbanPop ~ PC1 + PC2, data = dat)

## Coefficients:
## (Intercept)          PC1          PC2  
##       65.54        -2.58        -7.71 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-14T09:56:04.833

我也在使用素食主义者的 rda。

我尝试了@JT85 建议的 PCA3$CA$v.eig，返回 NULL

应该是 v 而不是 v.eig。像这样为我工作

```
data.rda <- rda(data)
data.rda.coord <- as.data.frame(data.rda$CA$v[,1:2]) 
```

# mysql - MySQL导入CSV转换日期格式

> ID：15680380
> 
> 赞同：0
> 
> 时间：2013-03-28T11:16:16.590
> 
> 标签：mysql, date, csv

我正在将数据从 a 导入`csv`到`MySQL`表中。我需要将日期格式从转换`String`为`Date`. 从开始格式到结束格式：

```
Mon Feb 04 00:00:00 UTC 2011  ---> 2011-02-04 00:00:00 
```

我已经成功地做到了：

```
select str_to_date('Mon Feb 04 00:00:00 UTC 2011', '%a %b %d %k:%i:%s UTC %Y'); 
```

现在我正在编写脚本来执行从 中的所有导入`csv`，有 2 列带有要转换的日期，但我遇到了`MySQL`语法异常`set`。

我的`SQL`脚本：

```
load data local infile 'movimento.csv' into table movimento
fields terminated by ',' lines terminated by '\n'
(id, anno, creditore, @data_pag, @data_spost, descrizione)
set data_pagamento = str_to_date(@data_pag, '%a %b %d %k:%i:%s UTC %Y')
set data_spostamento = str_to_date(@data_spost, '%a %b %d %k:%i:%s UTC %Y')
show warnings; 
```

我遇到了语法异常`set`。错误：

ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 'set data_spostamento = str_to_date(@data_spost, '%a %b %d %k:%i:%s UTC %Y') show' 行附近使用正确的语法5 >

什么是正确的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:20:44.013

语法不正确。试试这个——

```
LOAD DATA LOCAL INFILE 'movimento.csv' INTO TABLE movimento
FIELDS TERMINATED BY ',' LINES TERMINATED BY '\n'
(ID, anno, creditore, @data_pag, @data_spost, descrizione)
SET
  data_pagamento = STR_TO_DATE(@data_pag, '%a %b %d %k:%i:%s UTC %Y'),
  data_spostamento = STR_TO_DATE(@data_spost, '%a %b %d %k:%i:%s UTC %Y') 
```

# asp.net - 如何从 WebForms POST 到外部 URL 并从服务器提供值

> ID：15680382
> 
> 赞同：0
> 
> 时间：2013-03-28T11:16:24.347
> 
> 标签：asp.net, webforms

在过去的几年里，我一直生活在 MVC 世界中，我只是无法回到 WebForms 世界中。

我必须尝试将外部支付通道集成到 4 步流程中。最后一步涉及将一些值发布到给定的 URL。此 URL 需要具有预定义名称的值的预设列表（即，我无法更改它所期望的值）。

我遇到的问题是在我要发布的表单上填充从步骤 1-3 获得的值。

假设我需要发送 3 个值（还有更多但原理相同）：

```
- amount
- returnurl
- name 
```

我可以写一个表格

```
<form action="http://url/goes/here">
    <p>Please confirm the details below</p>
    <asp:TextBox id="amount" runat="server" />
    <asp:TextBox id="returnurl" runat="server" />
    <asp:TextBox id="name" runat="server" />
    <asp:Button id="submitme" />
</form> 
```

并轻松地从代码隐藏中预先填充文本框（或标签，或任何我需要的）`PageLoad`。

但是随后这些值以'ctl00$ContentBottom$WebFormControl$ctl00$'为前缀提交，因此外部url将其丢弃并抱怨没有提供任何值。它看到 'ctl00$ContentBottom$WebFormControl$ctl00$amount' 而不是 'amount'。

无论如何我可以修改发布的值的名称吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:03:52.720

而不是修改值的名称，您可以将它们添加到您的 aspx 页面中，如下所示

```
 <input type="hidden" name="billing_cust_name" value="<%=txtbox1.Text%>"> 
        <input type="hidden" name="billing_cust_address" value="<%=txtbox2.Text%>" > 
        <input type="hidden" name="billing_cust_email" value="<%=txtbox3.Text%>"> 
        <input type="hidden" name="billing_cust_notes" value="<%=txtbox4.Text%>"> 
```

当表单准备好发布时，更改值然后发布。

# c# - c#检测对象过多时

> ID：15680393
> 
> 赞同：3
> 
> 时间：2013-03-28T11:16:52.053
> 
> 标签：c#, memory-management, garbage-collection

我有一个 ac# 应用程序，其中用户通过使用拖放操作使用 wpf 树视图来做一些业务。Undo 堆栈提供了一些用户功能，可以从一开始就回滚所有内容，并且大约限制为大约 500 步。

因此，如果这些对象引用在 undostack 内，则不允许 GC 完成它们，因为用户可能希望它回来。

现在使用复制和粘贴，软件测试人员可以这样做并在彼此内部复制 2 个节点，重复此操作例如 20 次，这意味着对象数从 2、4、8、16、32 克隆到最终 1048576 . 因此，复制操作可能会导致创建例如 1048576 个更多对象，因此 Undo 堆栈将存储 1048576 个对象引用，用于 ONE Undo 步骤。测试人员可以轻松创建此应用程序崩溃：

> 引发了“System.OutOfMemoryException”类型的异常。

所以限制Undo堆栈并不能解决对象过多的问题。

除了没有这么多对象的用例之外，我想只是为了安全起见。

msdn 告诉我：

> 确保您有足够的内存用于内部用途和新的托管对象。

在我的情况下，我怎样才能实现这一点，保持撤消功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:23:33.433

我建议你避免玩 GC。我会考虑改变你的业务逻辑（可能是限制副本？）。此外，您可能可以将撤消步骤存储（持久）在磁盘上的某个位置，让它们从内存中消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:24:55.637

最简单的方法是序列化您的对象并将其保存在磁盘上，以便在需要撤消时可以重新加载它们。

这里的关键概念是序列化。你的对象应该是可序列化的。需要时，您可以反序列化这些对象并加载到内存中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T11:28:06.467

为了选择，您可以考虑使用[MemoryFailPoint](http://msdn.microsoft.com/en-us/library/system.runtime.memoryfailpoint.aspx)来更容易捕获异常。OutOfMemory 异常比其他异常更难处理，您可以使用`MemoryFailPoint`该类来减少发生 OOM 异常的机会。

话虽如此，如其他答案中所述，序列化您的撤消堆栈或更改您的业务逻辑以避免能够无限制地复制/粘贴会更可取。

# dynamics-crm-2011 - 在 CRM2011 的活动表单中禁用状态响应

> ID：15680410
> 
> 赞同：0
> 
> 时间：2013-03-28T11:18:12.860
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-4, dynamics-crm-online

**Microsoft Dynamics CRM中的活动状态为“已批准”时，**如何禁用状态原因控制？如何编写工作流程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:25:19.817

您必须在 onload 事件中使用一些 JavaScript 来执行此操作。要获取当前状态，您需要像这样查找“statecode”属性：

```
Xrm.Page.getAttribute("statecode") 
```

注意：我相信您需要将状态字段添加到表单中（您可能也可以隐藏该字段）才能使用此方法访问它。

接下来，根据用于“已批准”的状态代码，您将进行相应处理。禁用字段的代码如下所示：

```
var control = Xrm.Page.ui.controls.get("YourAttributeName");
control.setDisabled(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:37:20.753

如果你想禁用你需要使用javascript的控件，因为你想要一个UI绑定（连接到他的值的字段的外观）

如果不遵守您的条件，您可以通过插件强制执行此绑定以不更新记录。

# ruby-on-rails - sidekiq 发送类作为 args 给出堆栈级别太深的错误

> ID：15680414
> 
> 赞同：2
> 
> 时间：2013-03-28T11:18:22.127
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, sidekiq

设置[sidekiq](http://mperham.github.com/sidekiq/)后，我观察到关于传递给`Sidekiq::Client.push`方法的参数的奇怪行为

如果我`self.class`作为 args 给出，那么我要么得到一个要么`SystemStackError (stack level too deep)`服务器简单地挂断，然后不接受任何请求。

`Sidekiq::Client.enqueue(ActivityWorker, self.id, self.class)`

```
SystemStackError (stack level too deep):
  actionpack (3.2.12) lib/action_dispatch/middleware/reloader.rb:70

  Rendered /usr/local/rvm/gems/ruby-1.9.3-p194@restro/gems/actionpack-3.2.12/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.0ms)
  Rendered /usr/local/rvm/gems/ruby-1.9.3-p194@restro/gems/actionpack-3.2.12/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.0ms)
  Rendered /usr/local/rvm/gems/ruby-1.9.3-p194@restro/gems/actionpack-3.2.12/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (37.8ms) 
```

但是，如果我给予`self.class.name`，那么它可以正常工作。 `Sidekiq::Client.enqueue(ActivityWorker, self.id, self.class.name)`

我发现参数在传递给工作人员之前已被序列化，但我无法弄清楚这种情况。

这是我的工人班

```
class ActivityWorker
  include Sidekiq::Worker
  sidekiq_options queue: 'high', retry: false

  def perform(res_id, res_class)
    # do some activity
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:05:47.690

您不应该使用类对象之类的参数将作业排入队列。它应该是简单的类型，例如字符串、数字、哈希和它们的数组。

对于大多数类，除了我提到的特殊类和可能的其他类，Sidekiq 将此参数序列化为 redis，就像空哈希一样。因此，无法将其反序列化回您的班级。

我建议您在尝试时传递`self.class.name`给该`enqueue`方法，然后使用`constantize`从字符串中获取一个类。

# html - 在点击的元素下方点击测试

> ID：15680417
> 
> 赞同：0
> 
> 时间：2013-03-28T11:18:32.017
> 
> 标签：html, css, image, mouseevent, transparent

在上一个问题的连续上，我试图找出下一件事是否可能：

让你有一个渲染，就像一个具有透明背景的足球运动员。您将此渲染添加到您的 html 和 css。透明部分现在是图像“盒子”的一部分；您无法单击图像透明部分下的链接，但您可以看到它们。

是否可以使这些链接可点击？因此将图像作为最高 z-index，但仍然具有可点击和工作的链接。

（链接的 z-index 较低，因为它们的背景会停在图像下方，从而提供更好的设计）

（或者另外说：有一个透明背景的 .png 图像不显示为框，但仅显示为彩色像素。仅在 html/css 中更可取）

老实说，我认为这是不可能的。如果你还不明白我的问题，也许我以前的问题会帮助你： [需要帮助修复链接的可点击区域](https://stackoverflow.com/questions/15671622/need-help-fixing-the-links-clickable-area?noredirect=1#comment22245821_15671622)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:20:37.440

您可以使用[`pointer-events`](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)使事件（在本例中为单击）冒泡到下面的图层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:28:10.007

IE 10 提供了非标准的[`msElementsFromPoint`](http://msdn.microsoft.com/en-us/library/ie/hh673523%28v=vs.85%29.aspx#The_msElementsFromPoint_method)方法，允许你“窥视”一个元素；您可以在点击处理程序中执行此操作并确定点击点是否与锚点重叠。如果是这样，触发该元素的单击事件将完成需要完成的操作。

不幸的是，我不知道其他浏览器或早期版本的 IE 的类似功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T11:22:03.717

不，据我所知这是不可能的。但是，您可以执行与您想要的可能有用的类似的事情：

*   使用将区域转换为链接[`<map>`](https://developer.mozilla.org/en-US/docs/HTML/Element/map)
*   使用[`pointer-events:none`](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)以便忽略顶部元素上的点击

# java - WAIT 和 BLOCKED 线程状态的区别

> ID：15680422
> 
> 赞同：130
> 
> 时间：2013-03-28T11:18:45.707
> 
> 标签：java, multithreading, block, wait

线程状态 WAIT 和线程状态 BLOCKED 有什么区别？

[Thread.State](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.State.html)文档：

> **Blocked**
> 被阻塞等待监视器锁的线程处于此状态。
> 
> **Waiting**
> 无限期等待另一个线程执行特定操作的线程处于此状态

没有向我解释差异。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-03-28T11:24:55.280

区别比较简单。

在该`BLOCKED`状态下，一个线程即将进入一个`synchronized`块，但`synchronized`在同一对象上的一个块内当前正在运行另一个线程。然后第一个线程必须等待第二个线程退出它的块。

在该`WAITING`状态下，一个线程正在等待来自另一个线程的信号。这通常通过调用`Object.wait()`或来实现`Thread.join()`。然后线程将保持此状态，直到另一个线程调用`Object.notify()`或死亡。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2013-03-28T11:26:56.313

一旦调用`wait()`对象，线程就会进入等待状态。这称为**等待**状态。一旦一个线程达到等待状态，它就需要等到其他线程调用`notify()`或`notifyAll()`对象上。

一旦通知此线程，它将无法运行。可能是其他线程也被通知（使用`notifyAll()`）或者第一个线程还没有完成他的工作，所以它仍然被阻塞直到它有机会。这称为**阻塞**状态。每当一个线程试图获取对象上的锁并且某个其他线程已经持有该锁时，就会出现阻塞状态。

一旦其他线程离开并且它的这个线程机会，它移动到 Runnable 状态之后，它有资格根据 JVM 线程机制拾取工作并移动到运行状态。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2017-05-07T12:21:46.610

阻塞状态和等待状态之间的重要区别在于对调度程序的影响。处于阻塞状态的线程正在竞争锁；该线程仍然算作调度程序需要服务的东西，可能会考虑到调度程序决定给运行线程多少时间（这样它就可以给阻塞在锁上的线程一个机会）。

一旦线程处于等待状态，它对系统施加的压力就会最小化，调度程序不必担心它。它处于休眠状态，直到收到通知。除了它保持一个操作系统线程被占用之外，它完全不起作用。

这就是为什么使用 notifyAll 不太理想的原因，它会导致一堆以前愉快地处于休眠状态的线程被唤醒，不会给系统带来任何负载，它们中的大多数会阻塞，直到它们可以获取锁，找到它们的条件等待是不真实的，回去等待吧。最好只通知那些有可能取得进展的线程。

（使用 ReentrantLock 而不是内部锁可以让您对一个锁有多个条件，这样您就可以确保通知的线程是一个正在等待特定条件的线程，避免在线程收到通知的情况下丢失通知错误它无法采取行动的东西。）

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2016-02-28T10:17:38.927

解释线程转储的简化视角：

*   **WAIT** - 我在等着得到一些工作，所以我现在很闲。

*   **阻塞**- 我正忙着完成工作，但另一个线程挡住了我的路，所以我现在很空闲。

*   **RUNNABLE** ...(Native Method) - 我要求 RUN 一些本机代码（尚未完成），所以就 JVM 而言，你是 RUNNABLE 并且它不能提供任何进一步的信息。一个常见的例子是用 C 编码的本机套接字侦听器方法，它实际上正在等待任何流量到达，所以我现在很空闲。在这种情况下，这可以看作是一种特殊的等待，因为我们实际上并没有在运行（没有 CPU 消耗），但是您必须使用操作系统线程转储而不是 Java 线程转储来查看它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-03T10:45:42.310

阻塞-您的线程处于线程生命周期的可运行状态并试图获取对象锁。等待 - 您的线程处于线程生命周期的等待状态并等待通知信号进入线程的可运行状态。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-05-07T11:02:50.483

看这个例子：

线程状态的演示。

```
/*NEW- thread object created, but not started.
RUNNABLE- thread is executing.
BLOCKED- waiting for monitor after calling wait() method.
WAITING- when wait() if called & waiting for notify() to be called.
  Also when join() is called.
TIMED_WAITING- when below methods are called:
 Thread.sleep
 Object.wait with timeout
 Thread.join with timeout
TERMINATED- thread returned from run() method.*/
public class ThreadBlockingState{

public static void main(String[] args) throws InterruptedException {
    Object obj= new Object();
    Object obj2 = new Object();
    Thread3 t3 = new Thread3(obj,obj2);
    Thread.sleep(1000);
    System.out.println("nm:"+t3.getName()+",state:"+t3.getState().toString()+
            ",when Wait() is called & waiting for notify() to be called.");
    Thread4 t4 = new Thread4(obj,obj2);
    Thread.sleep(3000);
    System.out.println("nm:"+t3.getName()+",state:"+t3.getState().toString()+",After calling Wait() & waiting for monitor of obj2.");
    System.out.println("nm:"+t4.getName()+",state:"+t4.getState().toString()+",when sleep() is called.");
}

}
class Thread3 extends Thread{
Object obj,obj2;
int cnt;
Thread3(Object obj,Object obj2){
    this.obj = obj;
    this.obj2 = obj2;
    this.start();
}

@Override
public void run() {
    super.run();
    synchronized (obj) {
        try {
            System.out.println("nm:"+this.getName()+",state:"+this.getState().toString()+",Before Wait().");
            obj.wait();             
            System.out.println("nm:"+this.getName()+",state:"+this.getState().toString()+",After Wait().");
            synchronized (obj2) {
                cnt++;
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}
}
class Thread4 extends Thread{
Object obj,obj2;
Thread4(Object obj,Object obj2){
    this.obj = obj;
    this.obj2 = obj2;
    this.start();
}

@Override
public void run() {
    super.run();
    synchronized (obj) {
        System.out.println("nm:"+this.getName()+",state:"+this.getState().toString()+",Before notify().");
        obj.notify();
        System.out.println("nm:"+this.getName()+",state:"+this.getState().toString()+",After notify().");
    }
    synchronized (obj2) {
        try {
            Thread.sleep(15000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}
} 
```

# macos - Sencha Touch Cmd 工具 3.0 安装无法在 Mac 上运行

> ID：15680423
> 
> 赞同：0
> 
> 时间：2013-03-28T11:18:47.750
> 
> 标签：macos, cmd, sencha-touch-2.1

-bash：sencha：找不到命令

我只是花了几个小时试图让这个 Sencha Cmd 在我的 MacBook 上工作，但就是做不到。我卸载了以前的版本，但无法让它再次工作。我总是得到

-bash：sencha：找不到命令

错误。我确实尝试了[这篇文章](https://stackoverflow.com/questions/14399139/install-sencha-touch-2-1-on-mac)中的所有内容，但没有成功......当我打电话时我什至得到了一个错误

.bash_profile

说它没有找到......你知道可能是什么问题吗？

我对 Linux 命令世界还很陌生，所以我可能会在这里漏掉一点。也许我可以使用“sudo”来获得访问 bask_profile 的权限？

编辑：我让它为当前的 bash 会话工作。我将自己定位在用户根 (~/) 并调用`". .bash_profile"`（这里的空间很重要）。但是...它仅适用于当前会话。一旦我关闭终端并重新打开它，我就会失去一切:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:45:45.230

好的，正如您所知，我设法解决了该死的问题，即在文本编辑器中打开和编辑“.bash_profile”文件（对我来说是 TextMate）。这是一个隐藏文件，但您可以将 Mac 配置为在 Finder 中显示这些文件。该文件位于用户的根目录下。在 2013 年必须花费数小时来处理路径和环境变量是相当烦人的……安装程序应该做这些事情并在安装过程中发生某些事情时报告错误。

# java - 当我按下“确定”按钮 SWING 时，了解所有已检查的项目

> ID：15680426
> 
> 赞同：0
> 
> 时间：2013-03-28T11:18:49.533
> 
> 标签：java, jquery, swing, jbutton, jcheckbox

当我单击确定按钮时，它应该打印所有选中的项目。这是我尝试过的。

我尝试了以下代码，但它不起作用。

```
public class FilePermission extends JPanel implements ItemListener {

static String[] videoAvailable = new String[25];
static int j = 0;
JCheckBox[] file_boxes = new JCheckBox[25];
JButton button;
StringBuffer choices;
JLabel pictureLabel;
//static int j = 0;

public FilePermission() {
    super(new BorderLayout());
    JPanel checkPanel = new JPanel(new GridLayout(0, 1));
    //Create the check boxes.
    for (int i = 0; i < videoAvailable.length; i++) {
        if (videoAvailable[i] != null) {
            file_boxes[i] = new JCheckBox(videoAvailable[i]);
            file_boxes[i].addItemListener(this);
            checkPanel.add(file_boxes[i]);
        }
    }
    button = new JButton("ok");
    //Register a listener for the check boxes.
    button.addItemListener(this);
    //Indicates what's on the geek.
    //Set up the picture label
    pictureLabel = new JLabel();
    pictureLabel.setFont(pictureLabel.getFont().deriveFont(Font.ITALIC));
    //Put the check boxes in a column in a panel

    checkPanel.add(button);

    add(checkPanel, BorderLayout.LINE_START);
    add(pictureLabel, BorderLayout.CENTER);
    setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20));
}

/** Listens to the check boxes. */
public void itemStateChanged(ItemEvent e) {
    for (int i = 0; i < videoAvailable.length; i++) {
        if (videoAvailable[i] != null) {
            if (file_boxes[i].isSelected()) {
                System.out.println(file_boxes[i]);
            }
        }
    }
    if (button.isSelected()) {
        System.out.println(button);
    }
}

/**
 * Create the GUI and show it.  For thread safety,
 * this method should be invoked from the
 * event-dispatching thread.
 */
private static void createAndShowGUI() {
    //Create and set up the window.
    JFrame frame = new JFrame("CheckBoxDemo");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Create and set up the content pane.
    JComponent newContentPane = new FilePermission();
    newContentPane.setOpaque(true); //content panes must be opaque
    frame.setContentPane(newContentPane);

    //Display the window.
    frame.pack();
    frame.setVisible(true);
}

public static void main(String[] args) throws IOException {

    File directory = new File("D:\\ims\\");
    parseDir(directory);

    //Schedule a job for the event-dispatching thread:
    //creating and showing this application's GUI.
    javax.swing.SwingUtilities.invokeLater(new Runnable() {

        public void run() {
            createAndShowGUI();
        }
    });
  } 
```

这些方法是从 java 类的 main 方法调用的。如果你不明白，我想回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:02:33.090

请评论“button.addItemListener(this);”。或者使用 ActionListener 作为 OK 按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:17:22.730

我能够找出答案。如下：

```
public class FilePermission extends JPanel implements ItemListener {

static String[] videoAvailable = new String[25];
static int j = 0;
JCheckBox[] file_boxes = new JCheckBox[25];
JButton button;
StringBuffer choices;
JLabel pictureLabel;
static JFrame frame = new JFrame("CheckBoxDemo");

//static int j = 0;

public FilePermission() {
    super(new BorderLayout());
    JPanel checkPanel = new JPanel(new GridLayout(0, 1));
    //Create the check boxes.
    for (int i = 0; i < videoAvailable.length; i++) {
        if (videoAvailable[i] != null) {
            file_boxes[i] = new JCheckBox(videoAvailable[i]);
            file_boxes[i].addItemListener(this);
            checkPanel.add(file_boxes[i]);
        }
    }
    button = new JButton("ok");
    //Register a listener for the check boxes.
    button.addItemListener(this);
    //Indicates what's on the geek.
    //Set up the picture label
    pictureLabel = new JLabel();
    pictureLabel.setFont(pictureLabel.getFont().deriveFont(Font.ITALIC));
    //Put the check boxes in a column in a panel

    checkPanel.add(button);

    add(checkPanel, BorderLayout.LINE_START);
    add(pictureLabel, BorderLayout.CENTER);
    setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20));

    button.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
    for (int i = 0; i < videoAvailable.length; i++) {
        if (videoAvailable[i] != null) {
            if (file_boxes[i].isSelected()) {
                System.out.println(videoAvailable[i]);
            }
        }
    }
                     frame.dispose();

            }
    });
}

/** Listens to the check boxes. */
public void itemStateChanged(ItemEvent e) {
    for (int i = 0; i < videoAvailable.length; i++) {
        if (videoAvailable[i] != null) {
            if (file_boxes[i].isSelected()) {
                System.out.println(file_boxes[i]);
            }
        }
    }
    if (button.isSelected()) {
        System.out.println(button);
    }
}

/**
 * Create the GUI and show it.  For thread safety,
 * this method should be invoked from the
 * event-dispatching thread.
 */
private static void createAndShowGUI() {
    //Create and set up the window.
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Create and set up the content pane.
    JComponent newContentPane = new FilePermission();
    newContentPane.setOpaque(true); //content panes must be opaque
    frame.setContentPane(newContentPane);

    //Display the window.
    frame.pack();
    frame.setVisible(true);
}

public static void main(String[] args) throws IOException {

    File directory = new File("D:\\ims\\");
    parseDir(directory);

    //Schedule a job for the event-dispatching thread:
    //creating and showing this application's GUI.
    javax.swing.SwingUtilities.invokeLater(new Runnable() {

        public void run() {
            createAndShowGUI();
        }
    });
   }

public static void parseDir(File dirPath) {
    try {
        File files[] = null;
        if (dirPath.isDirectory()) {
            files = dirPath.listFiles();

            for (File dirFiles : files) {

                if (dirFiles.isDirectory()) {
                    parseDir(dirFiles);
                } else {
                    if (dirFiles.getName().endsWith(".mkv")) {

                        videoAvailable[j] = dirFiles.getName();
                        j++;

                    }
                }
            }

        } else {
            if (dirPath.getName().endsWith(".mkv")) {
                videoAvailable[j] = dirPath.getName();
                j++;
            }
        }

    } catch (Exception e) {
        e.printStackTrace();
    }

}
 } 
```

# php - facebook 的自定义音频播放器，如 soundcloud.com

> ID：15680429
> 
> 赞同：0
> 
> 时间：2013-03-28T11:18:57.043
> 
> 标签：php, facebook, facebook-graph-api, facebook-sharer

当我在 facebook 中共享 soundcloud.com 音频 mp3 时，它会在 facebook 中显示 soundcloud 的音频播放器。我们可以直接从 facebook 播放 mp3，假设 youtube：当我们分享 youtube 视频链接时，它直接在 facebook 中播放视频

我想知道如何配置这样的音频播放器？

我试图找到很多 facebook 图形文档，但对我的问题没有任何用处。

请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:43:02.320

AFAIK，你不能这样做。视频是另一回事，但我从未在 FB 中看到过可播放的音频。

# javascript - 带画廊的 ColorBox

> ID：15680430
> 
> 赞同：0
> 
> 时间：2013-03-28T11:18:57.990
> 
> 标签：javascript, jquery, gallery, settings, colorbox

我有一个小画廊：

*   大合照
*   底部的小拇指

当用户单击拇指时，大照片会发生变化，太好了。

现在我在大照片上添加了 Colorbox 插件，所以当用户点击大照片时，他会看到更大的照片，这样就可以了。但是当用户第一次点击一些拇指然后他们点击大照片 ColorBox 加载但不加载我添加的设置。

**这是我的js**：

```
$(function() {
$("#wrapper #right #detail #photo #big #image a").colorbox({
    transition: 'elastic',
    speed: 200,
    opacity: 0.4,
    scalePhotos : true,
    maxWidth : '800px'
});

$("#wrapper #right #detail #photo ul li .thumb").click(function() {
    var image = $(this).attr("rel");
    $('#image').hide();
    $('#image').fadeIn('fast');
    $('#image').html('<a href="' + image + '" class="cboxElement" title=""><img src="' + image + '" alt="" /></a>');
    return false;
});
}); 
```

**和 HTML**：

```
<div id="photo">
<div id="big"><div id="image"><a href="gfx/detail/1.jpg"><img src="gfx/detail/1.jpg" border="0"/></a></div></div>

<ul>
    <li><a href="#" rel="gfx/detail/1.jpg" class="thumb"><img src="gfx/detail/1.jpg" alt="" /></a></li>
    <li><a href="#" rel="gfx/detail/2.jpg" class="thumb"><img src="gfx/detail/2.jpg" alt="" /></a></li>
    <li><a href="#" rel="gfx/detail/3.jpg" class="thumb"><img src="gfx/detail/3.jpg" alt="" /></a></li>
</ul>
</div> 
```

有人可以帮助我让颜色框加载设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:45:42.940

```
$("#wrapper #right #detail #photo #big #image a")
$("#wrapper #right #detail #photo ul li .thumb") 
```

不需要这么长的选择器，你会失去性能。`#`是 id 选择器和 id 必须是唯一的，这就是为什么你可以删除`#wrapper #right #detail`

您替换附加颜色框选项的元素，问题在于此级别，作为您可以绑定的解决方案`click`。像这样：

```
$('#image').on('click', 'a', function(e){
   e.preventDefault();
   $.colorbox({
       transition: 'elastic',
       href: this.href,
       speed: 200,
       opacity: 0.4,
       scalePhotos : true,
       maxWidth : '800px'
   });
}); 
```

# android - 谷歌地图 android v2 白屏 - 并非所有设备

> ID：15680434
> 
> 赞同：0
> 
> 时间：2013-03-28T11:19:05.907
> 
> 标签：android, google-maps

我知道对此有一些问题，但没有一个对我有帮助。

我正在使用 Sony Xperia (API 14) 进行调试，但我总是会看到带有缩放按钮（+ 和 -）的白屏。但是我用 Galaxy Nexus 测试了相同的代码，我可以看到地图。

如果它在另一台设备上工作但在我的设备上不工作，我猜这不是 API 密钥问题、权限问题、布局或代码问题。我还检查了 GooglePlayServices 并且总是返回 SUCCEED。

这是布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<fragment 
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.MapFragment"/>

</LinearLayout> 
```

这是java代码：

```
package com.nanonino.realtor;

import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.MapFragment;

import android.app.Activity;
import android.app.Dialog;
import android.app.FragmentTransaction;
import android.content.Intent;
import android.os.Bundle;
import android.os.StrictMode;
import android.support.v4.app.FragmentActivity;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageButton;
import android.widget.ImageView;

public class ByLocation extends Activity {

@Override
protected void onCreate (Bundle savedInstanceState){

    super.onCreate(savedInstanceState);

    //setContentView(R.layout.by_location_list);
    setContentView(R.layout.by_location_map);   

    //if state has a value different from 0...OH OH!!! Problem, you have
    //to tell the user to install GooglePlayService in the device
    int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
    switch (resultCode) {
        case ConnectionResult.SUCCESS: // proceed
            break;
        case ConnectionResult.SERVICE_MISSING:
        case ConnectionResult.SERVICE_VERSION_UPDATE_REQUIRED:
        case ConnectionResult.SERVICE_DISABLED:
            Dialog dialog = GooglePlayServicesUtil.getErrorDialog(resultCode, this, 1);
            dialog.show();
    }

} 
```

我有很多进口，因为我什么都试过了。但现在我知道问题出在设备上，而不是代码上。

任何想法？

# java - 在 changeset.xml 中指定多个 drl 目录

> ID：15680435
> 
> 赞同：0
> 
> 时间：2013-03-28T11:19:06.953
> 
> 标签：java, drools, drools-fusion

```
<change-set xmlns='http://drools.org/drools-5.0/change-set' xmlns:xs='http://www.w3.org/2001/XMLSchema-instance' xs:schemaLocation='http://drools.org/drools-5.0/change-set.xsd' >
<add>
<resource source='file:/opt/rulesRepository' type='DRL'>
</resource>
</add>
<add>
<resource source='file:/opt/systemRules' type='DRL'>
</resource>
</add>
</change-set> 
```

目前使用 drools 5.1.1。如果我尝试使用变更集配置多个带有 drls 的目录。我观察到最后一个目录正在被 drools 扫描。这种行为是否正确？我的要求是我需要配置多个 drl 目录。如果有任何替代方案，请提供一些解决问题的指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:03:13.420

经过以下更改后，它开始工作。

```
<change-set xmlns='http://drools.org/drools-5.0/change-set' xmlns:xs='http://www.w3.org/2001/XMLSchema-instance' xs:schemaLocation='http://drools.org/drools-5.0/change-set.xsd' >
<add>
<resource source='file:/opt/rulesRepository' type='DRL'>
</resource>
<resource source='file:/opt/systemRules' type='DRL'>
</resource>
</add>
</change-set> 
```

# html - 将 html 链接锚与 css 悬停相结合

> ID：15680439
> 
> 赞同：1
> 
> 时间：2013-03-28T11:19:18.413
> 
> 标签：html, css, hyperlink, hover, anchor

为了进一步加深我的 CSS 知识，我一直在尝试这样做，但我什至不确定这是否可能。

我有一个包含 50 个链接的列表，每行 1 个链接。每个链接之间的垂直填充/边距非常少。每个链接都被分配了一个单独的 HTML `id`，例如

```
<a id="test" href="temp.html">blaghblagh</a> 
```

这样访问[http://example.com/temp.html#test](http://example.com/temp.html#test)会将页面焦点更改为特定链接`id`。

我想要的是当访问 temp.html#test url 时，`#test`id 链接锚将通过在链接周围放置填充/边距使链接“突出”。

我一直在尝试将它与`a:hover`各种东西结合起来，但无济于事。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T11:28:27.140

您需要使用`:target`伪选择器：

```
a:target {
    padding-left: 20px;
    color: red;
} 
```

演示：http: [//jsfiddle.net/dfsq/QuFHp/](http://jsfiddle.net/dfsq/QuFHp/)

> 当 URL 中的哈希值和元素的 id 相同时，CSS 中的 :target 伪选择器匹配。( [http://css-tricks.com/on-target/](http://css-tricks.com/on-target/) )

IE 从版本 8 开始支持它。如果您需要支持较旧的浏览器，您必须使用 javascript：

```
var hash = location.hash;
if (hash) {
    document.getElementById(hash.replace('#', '')).className = 'active';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:22:54.307

有一个特定于锚标签的[`:visited`选择器：](http://www.w3.org/TR/selectors/#the-link-pseudo-classes-link-and-visited)

```
a:visited {
    padding:10px; /* Whichever values you wish to use. */
    margin:10px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:23:12.617

您正在寻找的选择器是`:visited`：

```
a:visited {
    padding: 5px;
    margin: 5px;
    /* or whatever you want, really */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T11:23:58.963

这不能用纯 CSS 完成，但可以*用*Javascript/jQuery 实现。

无耻的插件，但我[写了一篇](http://curtistimson.co.uk/js/reading-url-hashtag-values/)关于如何实现这一点的文章，你可能会发现它很有用。

[http://curtisimson.co.uk/js/reading-url-hashtag-values/](http://curtistimson.co.uk/js/reading-url-hashtag-values/)

```
if (window.location.hash){
      var hash = window.location.hash.substring(1); //gets id in URL
      $("#" + hash).css("padding", "10px"); //applies padding to that element
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T11:24:53.450

尝试。`a:visited{ color: red; }`

了解有关[Pseudo-Classes 小文档的更多信息](http://www.w3schools.com/css/css_pseudo_classes.asp)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-28T11:22:41.993

我不认为你可以用 CSS 正常地做到这一点。您必须添加一个 jQuery 函数，该函数检查是否有一个 ID 附加到 URL，如果有，则向该链接添加一个类。

你在哪里错了：悬停？发布一些代码，我将更新我的答案以使其正常工作。

# c++ - 头文件中的全局数组...是否必须指定大小？

> ID：15680440
> 
> 赞同：0
> 
> 时间：2013-03-28T11:19:19.423
> 
> 标签：c++, arrays, global-variables

在某处我读到可以在头文件中声明一个（全局）数组而不指定大小。像这样的东西：

```
 // Header
 extern int MyArray[];

 // CPP file
 int MyArray[] = { 1, 4, 16, 512, 8192 }; 
```

但是当我尝试编译时，我得到了编译器错误`invalid application of 'sizeof' to incomplete type 'double []'`。

我错过了什么吗？在前向声明的情况下，编译器是否强制您指定数组大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:22:24.857

问题不在于您的声明或定义。问题是您试图申请`sizeof`，`MyArray`尽管它的类型不完整（因为它的大小已被忽略）。

有一个 hacky 方式围绕它，使用伴随变量来存储大小：

```
// Header
extern int MyArray[];
extern size_t MyArraySize;

// CPP file
int MyArray[] = { 1, 4, 16, 512, 8192 }; 
size_t MyArraySize = sizeof(MyArray); 
```

现在您可以`MyArraySize`在其他翻译单元中使用来确定`MyArray`.

但是，我建议不要使用这种方法，而是只给出数组的大小（或者避免一起使用全局变量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:23:06.380

如果你不打算指定数组的大小，那么你需要单独跟踪它的当前大小，编译器在编译时不会知道这个大小，因此你不能使用`sizeof()`：

。H：

```
extern int MyArray[];
extern size_t MyArrayLen; 
```

.cpp：

```
int MyArray[] = { 1, 4, 16, 512, 8192 };
size_t MyArrayLen = 5; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T11:34:36.160

谢谢大家......这确实是我的错，我没有注意到错误来自代码的另一部分，其中调用了`sizeof(myArray)`.

# ios - 如何将 XIB iPhone 应用程序转换为故事板 iPhone 应用程序

> ID：15680444
> 
> 赞同：0
> 
> 时间：2013-03-28T11:19:38.680
> 
> 标签：ios

我有一个日历 XIB iPhone 应用程序，它显示了简单的日历，现在我想将该日历用作故事板 iPhone 应用程序，简单我想将该日历应用程序转换为故事板 iPhoe 应用程序，从苹果文档中，我们可以添加故事板在 XIB 应用程序中，但不是转换整个应用程序

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:29:27.390

您可以做的是创建一个故事板将所有组件添加到故事板[使用选项+drg复制]然后进行连接，然后对演示中的操作进行必要的代码更改并继续

# zend-framework2 - Zend Framework 2，仅当路由具有子路由时，带有查询的路由才会失败

> ID：15680449
> 
> 赞同：0
> 
> 时间：2013-03-28T11:19:57.553
> 
> 标签：zend-framework2, zend-route

由于 2.1.4 Query 路由已被弃用，我正在路由到我的博客，如下所示：

```
 'cro-blog' => array(
            'type' => 'Literal',
            'options' => array(
                'route' => '/blog',
                'defaults' => array(
                    'controller' => 'CroBlog\BlogController',
                    'action'     => 'index',
                ),
            ),
        ), 
```

并链接到页码`/blog?p=x`在哪里等`x`页面。在我添加子路由之前，这非常有效。链接到`/blog`仍然有效，但链接到页面会给出 404（更具体的“请求的 URL 无法通过路由匹配。”）。这是我目前的设置：

```
 'cro-blog' => array(
            'type' => 'Literal',
            'options' => array(
                'route' => '/blog',
                'defaults' => array(
                    'controller' => 'CroBlog\BlogController',
                    'action'     => 'index',
                ),
            ),
            'may_terminate' => true,
            'child_routes' => array(
                'post' => array(
                    'type' => 'Segment',
                    'options' => array(
                        'route' => '/:slug',
                        'constraints' => array(
                            'slug' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        ),
                        'defaults' => array(
                            'action' => 'post',
                        ),
                    ),
                ),
            ),
        ), 
```

我正在使用 Segment 子路由，但 Literal 子路由也存在同样的问题。

有什么办法可以保留页面查询和子路由？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:17:52.717

这解决了。如果有人遇到同样的问题，这对我有用。

*   清除所有缓存（EdpSuperluminal、APC 等）
*   删除 Zend 库
*   在没有 Zend 库的情况下运行您的应用程序（当然会产生大量错误，但这对我来说似乎至关重要）
*   重新安装 Zend 库
*   再次运行您的应用程序

我安装了 2.1.5dev 并解决了这个问题。想确定它是否是一个错误，所以用 2.1.4 再次尝试，问题仍然得到解决。所以这是我的结论。缓存可能是一件奇怪的事情。

**编辑**过早地跳到（错误的）结论。启动 Zend Studio 10，现在又出问题了。我认为 Zend Studio 10 正在恢复一些文件（不是所有文件，因为 Query 路由确实被标记为已弃用）。尽管如此，考虑到这个问题已经解决，只需要找到一种方法来告诉 Zend Studio 10 使用 2.1.4。谢谢！

# c# - 将列表转换为 C++/CLI 的非托管数组

> ID：15680459
> 
> 赞同：0
> 
> 时间：2013-03-28T11:20:44.497
> 
> 标签：c#, .net, list, visual-c++, c++-cli

我正在为 C++/CLI 函数创建一个 .NET 包装类。该函数在内部使用整数数组（`int*`），但我想`List<int>^`在 .NET 端公开一个清理。我正在使用以下代码将 C# 列表转换为 C++ 非托管 int 列表。

除了我没有使用 释放分配的内存这一事实之外，`Marshal::FreeHGlobal`该功能是否有任何问题？例如，我应该分配`((count * 4) + 4)`数组长度字节吗？

```
static int* ListToArray(List<int>^ list){

    // new array
    int count = list->Count;
    int* arr = (int*)(Marshal::AllocHGlobal(count * 4).ToPointer());

    // convert list to array
    for(int a = 0; a < count; a++){
        arr[a] = list[a];
    }
    return arr;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:34:37.697

你的代码是正确的。您分配了正确的内存量。而不是`4`我会使用`sizeof int`更具表现力的 .

我很想知道你为什么要使用`AllocHGlobal`. 我认为`new`在 C++ 代码中会更合适。我也想知道你为什么使用原始指针。在 C++ 代码中不会`std::vector<int>`更有意义吗？

# ajax - Highchart 未使用返回的 Ajax 数据对象进行更新

> ID：15680460
> 
> 赞同：0
> 
> 时间：2013-03-28T11:20:49.077
> 
> 标签：ajax, highcharts

我最近开始使用[Highchards](http://www.highcharts.com/)，这确实令人印象深刻，但是我在获取图表以使用从 jQuery Ajax 请求返回的数据进行更新时遇到问题。

我的代码如下：

```
$.ajax({
type: "POST",
url: "scripts/ajax_testDetails.php",
async: true,
cache: false,
dataType: 'json',
timeout: 30000,
data: "TestID=" + TestID,
success: function(data) {

if(data.Status == "Success"){

    document.title = data.FirstName + " " + data.LastName;  // This works fine
    $('input[name=TestDate]').val(data.TestDateFormat); // This works fine too

    console.log("Accuracy2: " + data.Accuracy2);        // This works fine
    console.log("TPR2: " + data.TPR2);          // This works fine too

    var Accur1 = 6;                 // Used to debug, works fine in chart.series[0].setData()
    var NewStuff = new Array(25,15,8,18,5);     // Used to debug, works fine in chart.series[3].setData()
    var Accuracy3 = data.Accuracy2          // Used to debug, returns 'undefined' when used in chart.series[0].setData()

    var chart = $('#HeartGraph').highcharts();

    // Anything that use the data object here shows as 'undefined' in yData and doesn't change the graph
    chart.series[0].setData([randomBetween(1,10),Accur1,data.Accuracy2,Accuracy3,randomBetween(1,10)],false);
    chart.series[3].setData([NewStuff[0],NewStuff[1],randomBetween(1,10),data.TPR2,data.TPR3],false);

    chart.redraw();                 // When redraws, values change except for the ones that use the data. object!

} 
```

});

如您所见，我使用了成功数据对象并确认一切正常，但是当我尝试使用 chart.series[].setData() 函数中的数据时，它不起作用。测试值似乎工作正常。真的很奇怪也很混乱！

任何意见是极大的赞赏。

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:54:00.040

一种可能性是您的 json 数据包含字符串而不是数字。这可能会导致数据系列出现问题。尝试在服务器或 javascript 中转换为数字，如下所示：

```
chart.series[0].setData([
   randomBetween(1,10),
   Accur1 * 1,
   data.Accuracy2 * 1,
   Accuracy3 * 1,
   randomBetween(1,10)],false); 
```

'*1' 将字符串值转换为数字值。

# javascript - 流星集合不更新客户端上的订阅

> ID：15680461
> 
> 赞同：9
> 
> 时间：2013-03-28T11:20:49.547
> 
> 标签：javascript, mongodb, meteor

我对 Meteor 和 Mongo 很陌生，即使我不想要它，我也需要一些关系。

我有一个名为 Feeds 的集合和另一个名为 UserFeeds 的集合，其中我有一个 feedid 和一个 userid，我在服务器上发布用户提要，如下所示：

```
Meteor.publish('feeds', function(){
    return Feeds.find({_id:{$in:_.pluck(UserFeeds.find({user:this.userId}).fetch(),'feedid')}});
}); 
```

我在 UserFeeds 上找到用户，获取它（返回一个数组）并将其提取为只有 feedid 字段，然后在 Feeds 集合中找到这些提要。

并像这样在客户端上订阅：

```
Deps.autorun(function(){
   Meteor.subscribe("feeds");
}); 
```

问题是当我添加一个新的提要和一个新的用户提要时，客户端没有收到更改，但是当我刷新页面时，新的提要确实出现了。

知道我在这里缺少什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-30T12:35:38.307

我也遇到过这种情况。事实证明，服务器上的发布函数不会响应式地重新运行：如果它们返回一个 Collection 游标，就像你正在做的那样（和大多数发布函数一样），那么发布函数将运行一次，Meteor 将存储游标并且仅在光标的内容更改时才发送更新。这里重要的是 Meteor*不会*重新运行发布功能，因此也不会重新运行`Collection.find(query)`, when`query`更改。如果您希望发布函数重新运行，那么到目前为止我所做的方法是设置发布函数以接收参数。这样，其集合*确实会*响应式更新的客户端可以响应式地重新订阅。代码看起来像：

```
// client
Meteor.subscribe('user_feeds');

Deps.autorun(function(){ 
  var allFeeds = UserFeeds.find({user: Meteor.userId()}).fetch();
  var feedIds = _.pluck(allFeeds,'feedid');
  Meteor.subscribe('feeds',feedids);
});

// server
Meteor.publish('feeds',function(feedids) {
  return Feeds.find({_id: {$in: feedids}});
}); 
```

我相信 Meteorite 包[publish-with-relations](https://github.com/erundook/meteor-publish-with-relations)旨在解决这个问题，虽然我没有使用过。

编辑：我相信发布功能*会*在用户 ID 更改时重新运行，这意味着您可以在发布敏感数据之前进行服务器端检查以确保用户已登录。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-28T21:49:58.177

我认为你的问题是你在这里使用的 .fetch() ......</p>

```
UserFeeds.find({user:this.userId}).fetch() 
```

…消除反应性。

.fetch() 返回一个数组而不是游标，并且该数组不会是反应性的。

[http://docs.meteor.com/#fetch](http://docs.meteor.com/#fetch)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T15:24:12.250

尝试这个 ...

```
Meteor.autosubscribe(function(){
    Meteor.subscribe("feeds");
}); 
```

并在模板 JS ...

```
Template.templateName.feeds = function() 
  return Feeds.find() # or any specific call
}; 
```

在 HTML ...

```
{{#each feeds}}
   do some stuff
{{else}}
   no feed
{{/each}} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-03T11:10:58.560

您可以使用[reactive-publish](https://github.com/peerlibrary/meteor-reactive-publish)包（我是作者之一）。它允许您创建依赖于另一个查询结果的发布端点。在您的情况下，查询`UserFeeds`.

```
Meteor.publish('feeds', function () {
    this.autorun(function (computation) {
        var feeds = _.pluck(UserFeeds.find({user: this.userId}, {fields: {feedid: 1}}).fetch(), 'feedid');
        return Feeds.find({_id: {$in: feeds}});
    });
}); 
```

重要的部分是您将`UserFeeds`字段限制为仅以`feedid`确保`autorun`当其他字段更改时不会重新运行`UserFeeds`，您不关心的字段。

# ipython - 更改 IPython/Jupyter notebook 工作目录

> ID：15680463
> 
> 赞同：273
> 
> 时间：2013-03-28T11:20:53.937
> 
> 标签：ipython, jupyter-notebook, jupyter

当我打开 Jupyter 笔记本（以前称为 IPython）时，它默认为`C:\Users\USERNAME`.

如何将其更改为另一个位置？

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2013-03-28T12:55:55.530

`jupyter notebook --help-all`可能会有所帮助：

```
--notebook-dir=<Unicode> (NotebookManager.notebook_dir)
    Default: u'/Users/me/ipynbs'
    The directory to use for notebooks. 
```

例如：

```
jupyter notebook --notebook-dir=/Users/yourname/folder1/folder2/ 
```

如果需要，您当然可以在您的配置文件中设置它，您可能需要在 Windows 中转义反斜杠。

请注意，这将覆盖您在 jupyter_notebook_config.py 文件中设置的任何路径。（您可以在其中设置一个变量，该变量`c.NotebookApp.notebook_dir`将成为您的默认启动位置。）

* * *

## 回答 #2

> 赞同：122
> 
> 时间：2015-07-26T03:05:22.910

```
%pwd  #look at the current work dir
%cd   #change to the dir you want 
```

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2016-02-03T14:48:52.577

正如评论中提到的 MrFancypants 所提到的，如果您使用的是[Jupyter](http://jupyter.org/)（您应该使用 Jupyter，因为它目前取代了较旧的 IPython Notebook 项目），情况会[有所不同](http://jupyter.readthedocs.org/en/latest/migrating.html)。一方面，不再有个人资料。

[安装 Jupyter](http://jupyter.readthedocs.org/en/latest/install.html)后，首先检查您的*~/.jupyter*文件夹以查看其内容。如果没有从默认 IPython 配置文件迁移配置文件（因为在我的情况下不是），请为 Jupyter Notebook 创建一个新配置文件：

```
jupyter notebook --generate-config 
```

这会生成*~/.jupyter/jupyter_notebook_config.py*文件，其中包含一些有用的注释可能选项。要设置默认目录，请添加：

```
c.NotebookApp.notebook_dir = u'/absolute/path/to/notebook/directory' 
```

当我在 Linux 和 OS X 之间切换时，我想使用相对于我的主文件夹的路径（因为它们不同 - */Users/username*和*/home/username*），所以我设置了如下内容：

```
import os
c.NotebookApp.notebook_dir = os.path.expanduser('~/Dropbox/dev/notebook') 
```

现在，每当我运行时`jupyter notebook`，它都会打开我想要的笔记本文件夹。我还在部署到每台新工作机器的[dotfiles 存储库](https://github.com/metakermit/dotfiles/tree/master/jupyter.symlink)中对整个*~/.jupyter*文件夹进行版本控制。

* * *

顺便说一句，您仍然可以使用`--notebook-dir`命令行选项，所以也许一个简单的别名会更好地满足您的需求。

```
jupyter notebook --notebook-dir=/absolute/path/to/notebook/directory 
```

* * *

## 回答 #4

> 赞同：49
> 
> 时间：2013-11-16T21:20:45.187

**对于那些在 Windows 中使用 IPython 的人来说，一个巧妙的技巧**是，您可以在每个项目目录中创建一个 ipython 图标，该图标旨在通过指向所选项目的笔记本打开。这有助于将事物分开。

例如，如果您在 C:\fake\example\directory 中有一个新项目

将 ipython 笔记本图标复制到目录或创建到 Windows“cmd”shell 的新链接。然后右键单击图标和“编辑属性”

将快捷方式属性设置为：

```
Target:
C:\Windows\System32\cmd.exe /k "cd C:\fake\example\directory & C: & ipython notebook --pylab inline"

Start in:
C:\fake\example\directory\ 
```

（注意“start in”末尾添加的斜线）

这将运行 Windows 命令行，更改您的工作目录，并运行指向该目录的 ipython 笔记本。

将其中一个放在每个项目文件夹中，您将让 ipython 笔记本组保持良好和独立，同时仍然只需双击即可。

更新：IPython 已经删除了对 pylab 命令行内联的支持，所以如果你有一个更新的 IPython 版本（或者显然不想要 pylab），用这个技巧来解决这个问题就是消除“--pylab inline”。

JUPYTER 笔记本更新 ~ 版本 4.1.1

在我的测试机器上，正如下面评论中所报告的，最新的 jupyter 构建似乎检查了开始目录并以它作为工作目录启动。这意味着不需要工作目录覆盖。

因此，您的快捷方式可以很简单：

```
Target (if jupyter notebook in path):
    jupyter notebook

Target (if jupyter notebook NOT in path):
    C:\Users\<Your Username Here>\Anaconda\Scripts\jupyter.exe notebook 
```

如果 jupyter notebook 不在您的 PATH 中，您只需在命令前面添加完整的目录引用。如果这不起作用，请尝试从早期版本开始工作。非常方便，现在“开始于：”在我的 4.1.1 及更高版本的测试中可以为空。也许他们在 SO 上阅读了此条目并喜欢它，这么长的投票，没有人需要这个了 :)

* * *

## 回答 #5

> 赞同：45
> 
> 时间：2017-10-31T18:49:43.157

**对于 Windows 10**

1.  在 C:\Users\your_user_name\.jupyter 中查找*jupyter_notebook_config.py*或使用 cortana 查找。

2.  如果没有，请转到 cmd 行并键入：

    `jupyter notebook --generate-config`

3.  打开*jupyter_notebook_config.py*并`ctrl-f`搜索：

    `c.NotebookApp.notebook_dir`

4.  通过删除 # 取消注释它。

5.  将其更改为：

    `c.NotebookApp.notebook_dir = 'C:/your/new/path'`

    注意：您可以`u`在第一个前面加上a `'`，更改`\\\\`为`/`，或更改`'` 为`"`。我不认为这很重要。

6.  转到您的 Jupyter Notebook 链接并右键单击它。选择属性。转到快捷方式菜单并单击目标。查找 %USERPROFILE%。删除它。节省。重新启动 Jupyter。

* * *

## 回答 #6

> 赞同：37
> 
> 时间：2014-02-13T13:36:06.930

在 Windows 上的 iPython Notebook 中，这对我有用：

```
cd d:\folder\ 
```

* * *

## 回答 #7

> 赞同：36
> 
> 时间：2014-04-19T14:38:58.373

除了@Matt 的方法之外，**永久**更改用于笔记本的默认目录的一种方法是更改​​配置文件。首先在命令行中输入：

```
$> ipython profile create 
```

使用默认配置文件初始化配置文件。其次，在 file 中`ipython_notebook_config.py`，取消注释并编辑这一行：

```
# c.NotebookManager.notebook_dir = 'D:\\Documents\\Desktop' 
```

改变`D:\\Documents\\Desktop`你喜欢的任何路径。

这对我有用；）

更新：没有`c.NotebookManager.notebook_dir`了。现在，取消注释和配置的行是这一行： `c.NotebookApp.notebook_dir = 'Z:\\username_example\folder_that_you_whant'`

* * *

## 回答 #8

> 赞同：23
> 
> 时间：2015-03-02T20:28:12.473

通常`$ ipython notebook`会在终端的当前工作目录中启动笔记本和内核。

但是如果要指定启动目录，可以使用`--notebook-dir`如下选项：

`$ ipython notebook --notebook-dir=/path/to/specific/directory`

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2016-11-18T17:47:13.873

# 在运行 ipython 之前：

1.  将目录更改为您的首选目录
2.  运行 ipython

# 运行 ipython 后：

1.  采用 `%cd /Enter/your/prefered/path/here/`
2.  用于`%pwd`检查当前目录

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2014-05-21T07:22:12.553

对上述 Windows 技巧的更简单修改 - 无需对目录进行硬编码。

A）创建一个包含以下内容的批处理文件：（注意：批处理文件是一个简单的文本文件，其中包含可以在 cmd 窗口中运行的命令。它必须有一个 '.bat' 扩展名，因此......你会需要禁用隐藏已知类型扩展的文件夹设置）

```
rem -- start_ipython_notebook_here.bat ---
dir
ipython notebook 
pause 
```

B) 将批处理文件复制并粘贴到您要在其中启动笔记本服务器的任何文件夹中。

（确保它是您有权编辑的文件夹。“C:\”不是一个好的选择。）

C) 在 Windows 资源管理器中双击批处理文件。

笔记本服务器应该正常启动。

* * *

## 回答 #11

> 赞同：13
> 
> 时间：2016-09-20T04:42:02.567

对于 linux 和 Windows：只需修改 1 行，即可更改。

```
1\. Open file 
```

> cwp.py

在

> C:\Users\ [你的计算机名]\Anaconda2

.

```
2\. find the line 
```

> os.chdir(documents_folder)

在文件的末尾。

将其更改为

> os.chdir("你期望的工作文件夹")

例如： os.chdir("D:/Jupyter_folder")

```
3\. save and close. 
```

有效。

* * *

**更新**：

说到 MacOS，我找不到 cwp.py。这是我发现的：

在 Macbook 上打开终端，运行“ **jupyter notebook --generate-config** ”。

它将在*/Users/[your_username]/.jupyter/jupyter_notebook_config.py创建一个配置文件*

打开配置文件，然后将此行**#c.NotebookApp.notebook_dir = ''** 更改为 **c.NotebookApp.notebook_dir = ' *your path* '** 并记住取消注释此行。

例如，我将路径更改为“/Users/catbuilts/JupyterProjects/”

* * *

## 回答 #12

> 赞同：12
> 
> 时间：2017-10-24T21:02:05.467

根据官方 Jupyter Notebook 文档更改

> ％用户资料％

到您的文件夹路径

[文档链接](http://jupyter-notebook-beginner-guide.readthedocs.io/en/latest/execute.html)

3.1.1。更改 Jupyter Notebook 启动文件夹 (Windows)

*   将 Jupyter Notebook 启动器从菜单复制到桌面。
*   右键单击新启动器并更改目标字段，将 %USERPROFILE% 更改为包含所有笔记本的文件夹的完整路径。
*   双击 Jupyter Notebook 桌面启动器（图标显示 [IPy]）以启动 Jupyter Notebook App。笔记本界面将出现在新的浏览器窗口或选项卡中。还将打开一个辅助终端窗口（仅用于错误记录和关闭）。

[![在此处输入图像描述](../Images/8d9f0b212cc19a69b74fe079e6e4b120.png)](https://i.stack.imgur.com/ZKQIr.png)

* * *

## 回答 #13

> 赞同：9
> 
> 时间：2018-11-02T04:02:05.900

操作系统 Windows 10 Python Anaconda 2018 版

通过配置文件更改 JUPYTER 笔记本的工作目录：

1.  打开 cmd 提示符（或 Anaconda Prompt），然后输入“jupyter notebook --generate-config”并按回车键

2.  这会在“C:\Users\username.jupyter\”文件夹中自动创建一个文件“jupyter_notebook_config”

3.  查找创建的文件“jupyter_notebook_config”并进行编辑。

4.  查找 #c.NotebookApp.notebook_dir = ''

5.  把你想要的路径放在双引号内，它变成 ---> c.NotebookApp.notebook_dir = 'D:/my_folder/jupiter'

    *   请注意，使用了正斜杠 (/)，注释 (#) 已被删除。

因此，

```
#c.NotebookApp.notebook_dir = '' 
```

编辑成为

```
c.NotebookApp.notebook_dir = 'D:/your/desired/path' 
```

6.  让我们修改一下 Jupyter Notebook 快捷图标的路径 6.0 在开始菜单上，右键单击快捷方式，打开文件夹位置。6.1 进入文件夹后，建议创建一个 Jupyter 快捷方式的副本， 6.2 右击新建快捷方式图标打开属性，

最后，

6.3 在Target文本框上，去掉路径末尾的**%USERPROFILE% ，很长的路径应该以***jupyter-notebook-script.py结尾*

搜索我的 vid Jupyter Notebook - 将工作文件夹路径从默认更改为所需路径

* * *

## 回答 #14

> 赞同：8
> 
> 时间：2017-02-19T15:36:23.267

只需更改到 CMD 中的首选目录，所以如果你在

```
C:\Users\USERNAME> 
```

像这样改变路径

```
C:\Users\USERNAME>cd D:\MyProjectFolder 
```

然后 CMD 光标将移动到该文件夹

```
D:\MyProjectFolder> 
```

接下来你可以调用 jupyter

```
D:\MyProjectFolder>jupyter notebook 
```

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2014-04-02T23:13:19.287

要在 OS X 中为 Windows 执行下面描述的相同技巧，请创建此 shell 脚本

```
#!/bin/bash
cd $(dirname "$0") && pwd
ipython notebook 
```

将其命名为 ipython-notebook.command 并使其可执行。

把它放在你要工作的目录中，然后双击它。

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2014-07-01T22:20:02.540

从命令行启动时，IPython Notebook 将使用您当前的工作目录。我利用了这一点并创建了上下文菜单条目以直接从 Windows 资源管理器中打开它。无需快捷方式或批处理脚本！

我受到 Git for Windows 创建的基于注册表的“Git GUI Here/Git Bash Here”条目的启发。[此页面](http://web.archive.org/web/20131110010314/http://windowsxp.mvps.org/context_folders.htm)（已链接存档版本）有助于找到正确的密钥。

第一对用于未选择任何内容的上下文菜单（例如目录背景）。笔记本将以当前目录作为工作目录打开。

```
Key: HKCR\Directory\Background\shell\ipythonnb
Value: &IPython Notebook Here

Key: HKCR\Directory\Background\shell\ipythonnb\command
Value: "<full path to IPython notebook>" "%v" 
```

这对用于单击文件夹时显示的上下文菜单。笔记本将以所选文件夹作为其工作目录打开。

```
Key: HKCR\Directory\shell\ipythonnb
Value: &IPython Notebook Here

Key: HKCR\Directory\shell\ipythonnb\command
Value: "<full path to IPython notebook>" "%1" 
```

注意`%v`vs`%1`参数，否则它将不起作用。也不要忘记引号。在我的平台上，IPython Notebook 的完整路径是，`C:\WinPython-32bit-2.7.6.4\IPython Notebook.exe`但这个值显然取决于您的安装。

**编辑：** AFAICT 即使可执行文件位于系统路径上，也需要完整路径。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2015-12-05T23:41:13.877

找到您的 ipython 二进制文件。如果你使用 anaconda 在 mac 上安装 ipython-notebook，它很可能会在`/Users/[name]/anaconda/bin/`目录中

在那个目录中，而不是启动你的笔记本

```
./ipython notebook 
```

添加一个`--notebook-dir=<unicode>`选项。

```
./ipython notebook --notebook-dir=u'../rel/path/to/your/python-notebooks' 
```

我在 ipython bin 目录中使用 bashscript 来启动我的笔记本：

```
DIR=$(dirname $0)
$DIR/ipython notebook --notebook-dir=u'../rel/path/to/your/python-notebooks' 
```

注意 - notebook 目录的路径是相对于 ipython bin 目录的。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2016-06-01T17:38:00.903

只需按照[官方网站上的指南进行操作](http://jupyter-notebook-beginner-guide.readthedocs.io/en/latest/execute.html#change-jupyter-notebook-startup-folder-windows)，下面也复制了。第一步，您可以转到开始菜单并右键单击以打开该位置，而不是复制启动器。

> 1.  将 Jupyter Notebook 启动器从菜单复制到桌面。
>     
>     
> 2.  右键单击新启动器并通过粘贴包含所有笔记本的文件夹的完整路径来更改“开始于”字段。
>     
>     
> 3.  双击 Jupyter Notebook 桌面启动器（图标显示 [IPy]）以启动 Jupyter Notebook 应用程序，该应用程序将在新的浏览器窗口（或选项卡）中打开。另请注意，还将打开一个辅助终端窗口（仅用于错误记录和关闭）。如果只有终端启动，请尝试使用浏览器打开此地址：[http://localhost:8888/](http://localhost:8888/)。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2017-01-03T11:50:19.277

在 Windows 下的 MiniConda2/Anaconda2 上更改 Jupyter 或 iPython 工作目录，您可以修改此文件：

```
C:\Program Files\Miniconda2\cwp.py 
```

并添加您的项目文件夹位置：*development_folder= 'C:\Users\USERNAME\Development'* 这是我的用户名 \ Development 在我的情况下。

也改变：*os.chdir(documents_folder)*到*os.chdir(development_folder)*

```
try:
    documents_folder = get_folder_path(FOLDERID.Documents)
    development_folder= 'C:\Users\USERNAME\Development'
except PathNotFoundException:
    documents_folder = get_folder_path(FOLDERID.PublicDocuments)
os.chdir(development_folder)
subprocess.call(args, env=env) 
```

使用常规的 Jupiter Notebook 快捷方式执行。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2015-12-14T18:16:31.483

我有使用 WinPython 的 32 位和 64 位 python 和 ipython，我希望 32 位和 64 位版本都指向 ipython 笔记本的相同工作目录。

我在这里遵循了上述建议，但仍然无法使我的设置正常工作。

这就是我所做的——以防万一有人需要它：

* * *

看起来 Ipython notebook 使用的配置来自`C:\pythonPath\winpythonPath\settings\.ipython\profile_default`

**即使** `ipython locate`退货`C:\users\Username\.ipython`

结果，修改 ipython_notebook_config.py 文件并没有改变我的工作目录。

另外`ipython profile_create`没有在`C:\pythonPath\winpythonPath\settings\.ipython\profile_default`

**我确信有更好的方法**，但为了快速解决这个问题，我将编辑后的 ​​python 文件从**复制**`C:\users\Username\.ipython\profile_default`到`C:\pythonPath\winpythonPath\settings\.ipython\profile_default`

现在（终于）ipython notebook 64 bit 运行并为我提供了正确的工作目录

请注意，在 Windows 上，我对以下语法没有任何问题：

```
c.NotebookApp.notebook_dir = u'C:/Users/Path_to_working_directory' 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-08-29T05:52:56.227

如果您在 linux 中使用 ipython，请按照以下步骤操作：
`!cd /directory_name/`
您可以尝试在您的 linux 终端中工作的所有命令。
`!vi file_name.py`

只需在您的 linux 命令之前指定感叹号（！）符号。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-03-14T17:55:29.070

```
import sys
sys.path.append('C:/') 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-03-18T19:05:47.557

对于目标目录中有空格的 Mac OS X（跟进@pheon）。因此，在第 2 行的 $(...) 周围添加额外的双引号。请参阅：[https](https://stackoverflow.com/a/1308838) ://stackoverflow.com/a/1308838 （肖恩·布莱特）

```
#!/bin/bash
cd "$(dirname "$0")" && pwd
ipython notebook 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-01-27T19:25:12.513

我有一种非常有效的方法可以将笔记本保存在 Windows 中的所需位置。

1.  一次性活动：确保路径`jupyter-notebook.exe`保存在环境变量下。
2.  从 Windows 资源管理器或从命令提示符通过 cd 打开所需的目录
3.  从所需文件夹上的 Windows 资源管理器中，选择地址栏（以完全选择路径标签的方式）并键入`jupyter-notebook.exe`
4.  瞧！！笔记本从所需文件夹打开，任何新笔记本都将保存在此位置。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-03-12T17:51:51.540

在命令行中键入“ `jupyter notebook`”之前导航到所需的文件夹。

就我而言，我所有的 python 文件都在“D:\Python”中。

然后输入命令“jupyter notebook”就可以了。您已更改工作目录。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2016-04-21T21:01:56.683

当我搜索时，`ipython change pwd`即使我对`notebook`终端或 qtconsole 不感兴趣，这个问题也会不断出现。没有找到我试过的相关配置条目：

```
# lines of code to run at IPython startup.
c.InteractiveShellApp.exec_lines = ['%cd /home/paul/mypy'] 
```

这是基础级别的`shell`类；有可以进一步自定义操作的终端和控制台（可能还有笔记本）条目。

从文档看来，`import`语句在条目中最常见，但似乎许多魔术命令也能正常工作。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2016-06-27T17:14:51.843

如果您在 Windows 中使用 ipython，请按照以下步骤操作：

1.  在程序中导航到 ipython 笔记本并右键单击它并转到属性。
2.  在快捷方式选项卡中，将“开始于”目录更改为您想要的目录。
3.  重启内核。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2016-07-06T16:10:05.340

您还可以使用[AutoHotKey](https://autohotkey.com/)和一个简单的脚本在默认目录 (CTRL+I) 或在资源管理器中突出显示的路径（或在其他地方使用 CTRL+SHIFT+I）打开 Jupyter Notebook 服务器。

```
#SingleInstance Force
#NoTrayIcon

SetTitleMatchMode RegEx

; Press CTRL+ALT+I in a Windows Explorer window to launch a IPython notebook server in the current folder.
^+!i::
; Get the current path.
Send ^l
; Backup the current clipboard.
ClipSaved := ClipboardAll
; Copy and save the current path.
Send ^c
ClipWait
x = %Clipboard%
; Restore the clipboard.
Clipboard := ClipSaved
ClipSaved = ; Free the memory in case the clipboard was very large.
; Now, run the IPython notebook server.
RunWait, ipython notebook --notebook-dir "%x%", , min
return

^i::
; Now, run the IPython notebook server.
RunWait, jupyter notebook --notebook-dir "C:\Path\To\Workspace", , min
return

; Press CTRL+ALT+P to kill all Python processes.
^!p::
Run, taskkill /f /im python.exe, , min
return 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2017-03-10T04:06:30.553

如果您在 Windows 中安装了最新版本的 Python，上解决方案可能不适合您。我已经安装了 Python 3.6.0 :: Anaconda 4.3.0（64 位），我想更改名为 Jupyter 的 iPython Notebook 的工作目录，这就是它对我的工作方式。

**第 1 步：** 打开您的 CMD 并键入以下命令。

[第一步：命令](https://i.stack.imgur.com/DlWiI.png)

**第 2 步：**它现在已经在您的 .jupyter 文件夹中生成了一个文件。对我来说，它是 C:\Users\Admin.jupyter 。在那里你会找到一个名为 jupyter_notebook_config.py 的文件。右键单击并编辑它。添加以下行并设置工作目录的路径。 [设置您自己的工作目录来代替“I:\STUDY\Y2-Trimester-1\Modern Data Science”](https://i.stack.imgur.com/yZPTE.png)

我们完了。现在您可以尝试重新启动 Jupyter Notebook。希望这对你有用。谢谢

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2017-10-16T14:59:20.827

我将在这里添加一长串答案。如果您在 Windows/ 上使用 Anaconda3，我通过转到文件 /Scripts/ipython-script.py 来完成此操作，并添加了这些行

```
import os
os.chdir(<path to desired dir>) 
```

行前

```
sys.exit(IPython.start_ipython()) 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2017-12-10T06:59:38.363

试试[nbopen](https://github.com/takluyver/nbopen)模块。当您安装它并将其与 Windows 资源管理器集成时，您将能够通过双击打开任何笔记本。

# jsp - 在服务器异常期间重定向到jsp中的另一个页面

> ID：15680465
> 
> 赞同：0
> 
> 时间：2013-03-28T11:20:59.373
> 
> 标签：jsp, tomcat

嗨，我是 jsp（apache-tomcat）的新手，我正在 jsp 中做一个小项目，因为在捕获异常期间，我想在 jsp 中重定向一些页面，我写了这样的代码

```
try
{
 //some code..
}
catch(Exception e)
{
System.out.println("error==>"+e);
response.sendRedirect("Servererror.html");
} 
```

在错误或异常期间，我可以使用 System.out.println() 看到错误，但页面没有重定向

我的代码有什么问题还是我做错了什么...请帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:47:54.343

在 catch 块中执行代码不是一个好习惯。

但是，如果您想为用户显示错误页面，您可以在`web.xml`

```
 <error-page>
    <exception-type>java.lang.Exception</exception-type>
    <location>/error.jsp</location>
  </error-page> 
```

如果您想通过错误代码（例如 404,500 等或自定义异常处理）显示错误页面，请[参阅此](http://docs.codehaus.org/display/JETTY/How+to+Create+Custom+Error+Pages)。

[@BalusC](https://stackoverflow.com/questions/7066192/specify-the-default-error-page-in-web-xml-in-servlet)的迷你教程

**编辑：**

你现在不需要对代码做任何事情。你可以简单地写

```
try
{
 //some code..
}
catch(Exception e)
{
System.out.println("error==>"+e);//better to write e.printStacktrace() here.
} 
```

发生错误时，错误页面会自动显示在浏览器中。

# groovy - Groovy“无法在空对象上调用方法 dirset()

> ID：15680468
> 
> 赞同：0
> 
> 时间：2013-03-28T11:21:09.387
> 
> 标签：groovy

当我在 mydirset=getDirset() 作为空指针异常运行以下代码时出现上述错误，但是如果我在 main 中执行 println，它将起作用。关于我错过了什么的任何建议？

```
static final String mydirset = getDirset()

static String getDirset( String baseFolder , String relativePathToFile )
{
    println baseFolder
    println relativePathToFile
    def exclude = ant.dirset(id: "dirset" ,dir: "${baseFolder}")
    {
        present(targetdir: baseFolder)
        {
              mapper(type: "glob", from: "*" , to: "*/" + relativePathToFile)
        }
    }

return "" + exclude
} 
```

# tsung - tsung-recorder 无法捕获浏览器流量

> ID：15680477
> 
> 赞同：1
> 
> 时间：2013-03-28T11:21:44.440
> 
> 标签：tsung, tsung-recorder

我在捕获的 XML 文件中看到的只是一个结束会话标记。我已将手动代理设置为指向 Tsung 端口（9000）并在私有浏览器模式下启动 URL 以避免缓存。

```
ram@saket:~$ tsung-recorder -L 9000 -P 8000 start
Starting Tsung recorder on port 9000
ram@saket:~$ "Record file: /home/ram/.tsung/tsung_recorder20130328-1645.xml"
ram@saket:~$ tsung-recorder stop
[OK]
ram@saket:~$ cat /home/ram/.tsung/tsung_recorder20130328-1645.xml
</session> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:57:11.010

你的主人和你想去的地方之间有代理吗？如果您为父代理设置 -P，您也必须设置 -u，如果您没有父代理，则删除 -P。

# c++ - 编译器的鲁棒性......天真

> ID：15680478
> 
> 赞同：1
> 
> 时间：2013-03-28T11:21:49.287
> 
> 标签：c++, visual-c++, compiler-construction, c++11, visual-studio-2012

我使用 Visual Studio Professional 2012。我成功预编译了一个类（头文件和源代码）。几天后，当编译另一个正在使用前一个类的类（暂时只有头文件）时，编译器发现缺少引用`if(this != &rhs)`和分号`rhs.root = nullptr;.`

也许这是我的天真和对编译器如何工作的知识缺乏了解，但我认为编译器很健壮，可以捕获诸如此类的错误。在我看来，只有在需要特定代码块时，编译器才会觉得需要检查它。

我已经阅读了有关即时编译的内容，并了解了汇编编译器如何先使用符号然后使用语法执行两遍编译。我没有在我的大学上过编译器构建课程，我知道这些课程可以很好地了解解析器等。

未能捕获错误的代码部分是此移动赋值运算符：

```
Tree &operator=(Tree &&rhs) 
{ 
    if(this != rhs)    <--------- no reference to the rhs
    { 
        root = std::move(rhs.root); 
        rhs.root = nullptr      <----------- no semicoln
    } 
    return *this; 
} 
```

这些错误是在编译 boost 变体以及我的访问者类成员时生成的：

```
bool operator() (Tree<std::string>& tree) const {
    return tree.load(tree);
} 
```

以及与提升序列化相关的许多其他错误。当然，修复是为了更正缺少的引用和分号，但我想了解为什么只有在编译器需要接触此代码时才明显捕获它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:36:54.233

它是一个模板类吗？

因为模板的语义分析只有在它们被实例化时才有意义。也就是说，如果它是一个模板，编译器应该在缺少的分号处生成错误（语法错误），而不是在 == 运算符处。

以下代码使用 g++ 编译：

```
template<typename T>
struct A {
        void q(A &a) {
                if (this == a) {}
        }

};

int main(int argc, char **argv) {
        A<int> x;
        //x.q(x);
} 
```

但不编译时

```
 x.q(x); 
```

未注释。

# android - android native 中的地址族不支持错误

> ID：15680481
> 
> 赞同：0
> 
> 时间：2013-03-28T11:21:56.327
> 
> 标签：android, sockets, native

我想创建一个套接字并将其绑定到接口 IP 地址，以便数据包仅在本机层的 android 上通过该接口。但是在 bind() 系统调用中，我得到一个错误地址族不支持。但是，我认为我已将地址族指定为 AF_INET。

```
local = (struct sockaddr_in *)malloc(sizeof(struct sockaddr_in *));
memset(local,'\0',sizeof(sockaddr_in));
local->sin_family = AF_INET;

optval2 = "wlan0";
memset(&ifr, 0, sizeof(struct ifreq));
snprintf(ifr.ifr_name, sizeof(ifr.ifr_name), optval2);
if(ioctl(sock, SIOCGIFADDR, &ifr) == 0) {
    __android_log_print(3, DEBUG_TAG, "ioctl success");
}

ip = inet_ntoa(((struct sockaddr_in *)&ifr.ifr_addr)->sin_addr);
local->sin_addr.s_addr = inet_addr(ip);

local->sin_port = 0;
if(bind(sock, (struct sockaddr*)&local, sizeof(struct sockaddr_in)) < 0 ) {
    __android_log_print(3, DEBUG_TAG, "error %d string %s", errno, strerror(errno));
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:26:05.297

这不应该是`bind`通话的一部分：

```
(struct sockaddr*)&local 
```

是

```
(struct sockaddr*)local 
```

因为 local 已经是一个指针？

# ruby-on-rails - 如何在 Rails 验证错误后保留文件上传字段

> ID：15680484
> 
> 赞同：37
> 
> 时间：2013-03-28T11:22:07.450
> 
> 标签：ruby-on-rails, validation, file-upload

我有一个包含多个文件上传的表单，问题是当我提交表单并发生验证错误时，文件输入字段被重置。

我基本上想将这些文件保留在文件输入字段中以完成整个过程。

我也经历了几个链接

[如何在表单验证错误中“保留”上传的图像？](https://stackoverflow.com/questions/6199072/how-can-i-keep-the-uploaded-image-on-a-form-validation-error)

请让我知道在这种情况下可以遵循的各种选择是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T12:14:40.910

Carrierwave 是处理文件上传的好工具，可以为您处理

[https://github.com/jnicklas/carrierwave#making-uploads-work-across-form-redisplays](https://github.com/jnicklas/carrierwave#making-uploads-work-across-form-redisplays)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-21T22:43:07.913

创建了一个 repo，其中包含在 Rails 上使用 Paperclip 并在发生验证错误时维护文件的示例

[https://github.com/mariohmol/paperclip-keeponvalidation](https://github.com/mariohmol/paperclip-keeponvalidation)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-16T22:16:21.457

我不得不在最近的一个项目中使用 Paperclip Gem 解决这个问题。这有点hacky，但它有效。我尝试在模型中使用 after_validation 和 before_save 调用 cache_images() ，但由于某种我无法确定的原因，它在创建时失败，所以我只是从控制器调用它。希望这可以节省其他人一些时间！

模型：

```
class Shop < ActiveRecord::Base    
  attr_accessor :logo_cache

  has_attached_file :logo

  def cache_images
    if logo.staged?
      if invalid?
        FileUtils.cp(logo.queued_for_write[:original].path, logo.path(:original))
        @logo_cache = encrypt(logo.path(:original))
      end
    else
      if @logo_cache.present?
        File.open(decrypt(@logo_cache)) {|f| assign_attributes(logo: f)}
      end
    end
  end

  private

  def decrypt(data)
    return '' unless data.present?
    cipher = build_cipher(:decrypt, 'mypassword')
    cipher.update(Base64.urlsafe_decode64(data).unpack('m')[0]) + cipher.final
  end

  def encrypt(data)
    return '' unless data.present?
    cipher = build_cipher(:encrypt, 'mypassword')
    Base64.urlsafe_encode64([cipher.update(data) + cipher.final].pack('m'))
  end

  def build_cipher(type, password)
    cipher = OpenSSL::Cipher::Cipher.new('DES-EDE3-CBC').send(type)
    cipher.pkcs5_keyivgen(password)
    cipher
  end

end 
```

控制器：

```
def create
  @shop = Shop.new(shop_params)
  @shop.user = current_user
  @shop.cache_images

  if @shop.save
    redirect_to account_path, notice: 'Shop created!'
  else
    render :new
  end
end

def update
  @shop = current_user.shop
  @shop.assign_attributes(shop_params)
  @shop.cache_images

  if @shop.save
    redirect_to account_path, notice: 'Shop updated.'
  else
    render :edit
  end
end 
```

看法：

```
= f.file_field :logo
= f.hidden_field :logo_cache

- if @shop.logo.file?
  %img{src: @shop.logo.url, alt: ''} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-15T17:29:49.410

好吧-我想对此采取不同的方法；与其将文件临时存储在服务器上，不如在用户修复验证问题时将其返回给客户端以重新提交。

这可能仍需要一些改进，但这是一般概念：

```
# in the controller - save the file and its attributes to params

def create
  # ...
  if params[:doc] # a regular file uploaded through the file form element
    # when the form re-renders, it will have those additional params available to it
    params[:uploaded_file] = params[:doc].read # File contents
    params[:uploaded_file_original_filename] = params[:doc].original_filename
    params[:uploaded_file_headers] = params[:doc].headers
    params[:uploaded_file_content_type] = params[:doc].content_type
  elsif params[:uploaded_file] # a file coming through the form-resubmit
    # generate an ActionDispatch::Http::UploadedFile
    tempfile = Tempfile.new("#{params[:uploaded_file_original_filename]}-#{Time.now}")
    tempfile.binmode
    tempfile.write CGI.unescape(params[:uploaded_file]) #content of the file / unescaped
    tempfile.close

    # merge into the params
    params.merge!(doc: 
       ActionDispatch::Http::UploadedFile.new(
                                :tempfile => tempfile,
                                :filename => params[:uploaded_file_original_filename],
                                :head => params[:uploaded_file_headers],
                                :type => params[:uploaded_file_content_type]
                           )
                 )

  end
  #...
  # params (including the UploadedFile) can be used to generate and save the model object
end

# in the form (haml)
- if !params[:uploaded_file].blank?
  # file contents in hidden textarea element
  = text_area_tag(:uploaded_file, CGI.escape(params[:uploaded_file]), style: 'display: none;') #escape the file content
  = hidden_field_tag :uploaded_file_headers, params[:uploaded_file_headers]
  = hidden_field_tag :uploaded_file_content_type, params[:uploaded_file_content_type]
  = hidden_field_tag :uploaded_file_original_filename, params[:uploaded_file_original_filename] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-21T12:24:30.183

我对这里提供的其他解决方案采取了完全不同的方法，因为我不想切换到 CarrierWave 或使用另一个 gem 来实现一个 hack 来解决这个问题。

基本上，我为验证错误消息定义占位符，然后对相关控制器进行 AJAX 调用。如果验证失败，我只需填充错误消息占位符 - 这会将所有内容保留在客户端，包括准备重新提交的文件输入。

示例如下，展示了一个具有嵌套地址模型和嵌套徽标模型（具有文件附件）的组织 - 为简洁起见，已将其删除：

**组织/_form.html.erb**

```
<%= form_for @organisation, html: {class: 'form-horizontal', role: 'form', multipart: true}, remote: true do |f| %>
  <%= f.label :name %>
  <%= f.text_field :name %>
  <p class='name error_explanation'></p>

  <%= f.fields_for :operational_address do |fa| %>
    <%= fa.label :postcode %>
    <%= fa.text_field :postcode %>
    <p class='operational_address postcode error_explanation'></p>
  <% end %>

  <%= f.fields_for :logo do |fl| %>
    <%= fl.file_field :image %>
    <p class='logo image error_explanation'></p>
  <% end %>
<% end %> 
```

**组织控制器.rb**

```
def create   
  if @organisation.save
    render :js => "window.location = '#{organisations_path}'"
  else
    render :validation_errors
  end
end 
```

**组织/validation_errors.js.erb**

```
$('.error_explanation').html('');
<% @organisation.errors.messages.each do |attribute, messages| %>
  $('.<%= attribute %>.error_explanation').html("<%= messages.map{|message| "'#{message}'"}.join(', ') %>");
<% end %> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T12:34:13.993

一种解决方法而不是彻底的解决方案是使用客户端验证，这样文件就不会因为整个表单持续存在而丢失。

少数未启用 JavaScript 的用户会在请求之间丢失文件，但也许这个 % 对您来说太低以至于可以接受妥协。如果这是您决定走的路线，我会推荐这颗宝石

[https://github.com/bcardarella/client_side_validations](https://github.com/bcardarella/client_side_validations)

这使得整个过程非常简单，并且意味着您不必在 JavaScript 中重写您的验证

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-29T11:18:26.440

> 出于安全原因，浏览器会阻止在输入文件类型时设置 value 属性，这样您就无法在没有用户选择任何文件本身的情况下上传文件。
> 
> [预填充 HTML 表单文件输入](https://stackoverflow.com/questions/16365668/pre-populate-html-form-file-input)

您可以使用carrierwave：[https ://github.com/carrierwaveuploader/carrierwave](https://github.com/carrierwaveuploader/carrierwave)

或者通过js请求验证模型。

# nginx - 在服务器上实施时样式不加载

> ID：15680487
> 
> 赞同：0
> 
> 时间：2013-03-28T11:22:25.650
> 
> 标签：nginx, amazon-ec2, webserver, yesod

在本地（通过`yesod devel`）运行我的网站时，样式会加载并且一切都很好。CSS 文件已正确加载。使用这种[方法](http://www.yesodweb.com/blog/2013/01/adding-css-js)

但是，当上传到我的亚马逊 ec2 服务器样式时，没有正确加载。

我正在使用监听端口 80 的 nginx，然后将其重定向到运行我的 yesod webapp 的端口 3000。我的 nginx.conf 设置。

![在此处输入图像描述](../Images/86293ee7eb074902e1754bd089bf2ad7.png)

所以我可以直接访问[header.css](http://www.finance-web.biz/static/css/header.css)，显示静态文件已传递给用户浏览器。但是，由于某种原因，css 连接不正确。

我注意到的另一件事是，如果我直接访问 IP 和端口 3000，`favicon.ico`则会加载默认图标，而如果我访问域，则不会加载。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:20:09.057

*config/settings.yml中的**approot*设置是否与您用于访问 ec2 服务器的 url 的开头一致？您显示的日志当然可以用错误来解释。Yesod 使用*approot*作为前缀构建完全限定的 url，用于构建页面所需的所有附加部分。（查看页面源代码以查看 Yesod 生成的内容。）

 **如果您现在使用*yesod devel*运行，*approot*设置将是“开发”环境的设置 - 如果您保留*settings.yml*的结构，它将是“默认”部分中的设置。您创建了脚手架站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:09:10.390

在您的 nginx.conf 文件中没有发现任何严重错误。

我点击[http://www.finance-web.biz/static/css/header.css](http://www.finance-web.biz/static/css/header.css)，结果很好。

```
/*!
 * Extra header style
 */

.beta {
    color: #CC3300;
} 
```

也许它是缓存在您的浏览器中的东西。**

# c++ - 移动语义和参数评估顺序

> ID：15680489
> 
> 赞同：28
> 
> 时间：2013-03-28T11:22:27.967
> 
> 标签：c++, c++11, move-semantics, operator-precedence

考虑到以下几点：

```
std::string make_what_string( const std::string &id );

struct basic_foo
{
    basic_foo( std::string message, std::string id );
};

struct foo
    : public basic_foo
{
    foo::foo( std::string id)
        : basic_foo( make_what_string( id ), std::move( id ) ) // Is this valid?
    {
    }
}; 
```

因为 C++ 中的参数评估顺序未指定，所以我想知道该行是否

```
basic_foo( make_what_string( id ), std::move( id ) ) 
```

在上面的代码中是有效的。

我知道这`std::move`只不过是一个演员，但是什么时候执行 std::string move ctor？在评估完所有参数之后，是时候调用基本构造函数了吗？或者这是在评估参数期间完成的？换句话说：

编译器是否这样做：

```
std::string &&tmp2 = std::move(id);
std::string tmp1 = make_what_string(id);
basic_foo(tmp1, tmp2); 
```

这是有效的。或这个：

```
std::string tmp2 = std::move(id);
std::string tmp1 = make_what_string(id);
basic_foo(tmp1, tmp2); 
```

这是无效的。请注意，在这两种情况下，订单都是“意外”订单。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-28T11:43:15.457

请参阅第 1.9 节：

> 除非另有说明，否则单个运算符的操作数和单个表达式的子表达式的求值是无序的。

和

> 调用函数时（无论该函数是否内联），与任何参数表达式或与指定被调用函数的后缀表达式相关的每个值计算和副作用都在执行主体中的每个表达式或语句之前进行排序称为函数。[*注意*：与不同参数表达式相关的值计算和副作用是无序的。——<em>尾注]

我认为问题在于，参数的初始化是否被认为是与参数表达式相关的副作用还不是很清楚。但是，它似乎得到了第 5.2.2 节的支持：

> 每个参数的初始化和销毁​​发生在调用函数的上下文中。

同一段中还有一个注释，使它更清楚一点：

> 调用函数时，每个参数 (8.3.5) 都应使用其对应的参数进行初始化 (8.5, 12.8, 12.1)。[*注意*：此类初始化相对于彼此的顺序是不确定的（1.9）-*结束注释*]

所以是的，参数的初始化相对于彼此是不确定的。初始化可能按以下任一顺序进行：

```
std::string message = make_what_string(id);
std::string id = std::move( id );

std::string id = std::move( id );
std::string message = make_what_string(id); 
```

在第二种情况下，`make_what_string`最终使用移出的字符串。

因此，即使`std::move`实际上没有移动任何东西，重要的是实际*移动*也相对于另一个参数是无序的。

状态移动构造函数的定义`basic_string(basic_string&& str)`：

> [...]`str`处于未指定值的有效状态。

所以你没有未定义的行为，你有未指定的行为。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-28T11:32:00.793

这不是真的有效。未指定函数参数评估的顺序。换句话说，你不知道编译器是否会选择这个序列：

```
tmp1 = make_what_string(id);
tmp2 = std::move(id);
basic_foo(tmp1, tmp2); 
```

或者这个：

```
tmp1 = std::move(id);
tmp2 = make_what_string(id);  //id has already been moved from!
basic_foo(tmp2, tmp1); 
```

# java - EJB 异常 - 尝试使用具有空会话的间接遍历关系。

> ID：15680490
> 
> 赞同：4
> 
> 时间：2013-03-28T11:22:29.060
> 
> 标签：java, jakarta-ee, jpa, ejb, ejb-3.0

这不是一个新的例外。我在堆栈溢出中浏览了很多论坛帖子，并了解为什么会发生这种情况。但我需要帮助来解决我的问题。

我有两个实体豆设备类和设备。以下是代码。

```
public class EquipmentClass implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "id")
    private Integer id;
    @Basic(optional = false)
    @Column(name = "class_name")
    private String className;
    @Column(name = "description")
    private String description;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "equipmentClass")
    private Collection<Equipment> equipmentCollection;

    // getter and setter methods
 } 

public class Equipment implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "id")
    private Integer id;
    @Basic(optional = false)
    @Column(name = "created_on")
    @Temporal(TemporalType.TIMESTAMP)
    private Date createdOn;
    @Basic(optional = false)
    @Column(name = "updated_on")
    @Temporal(TemporalType.TIMESTAMP)
    private Date updatedOn;
    @JoinColumn(name = "equipment_class", referencedColumnName = "id")
    @ManyToOne(optional = false)
    private EquipmentClass equipmentClass;

    // setter and getter methods 

} 
```

在添加设备期间，我设置了设备类并使用`equipmentFacade.create(equipment);` （持久化实体）将其持久化

```
 EquipmentClass ec = equipment.getEquipmentClass();   
 >>> ec.getEquipmentCollection().add(equipment); << 
  equipmentClassFacade.edit(ec); 
```

我在上面标记的 ( >> < ) 行中遇到异常。

正如[这里](http://itechnicalvault.blogspot.co.uk/2012/04/java-ejb-exception-while-trying-to.html)所解释的，我试着去做`ec.getEquipmentCollection().size();`。但我有例外。

我应该如何进行？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:31:57.080

我想如果你`equipment.getEquipmentClass().getEquipmentCollection().size()`在检索`equipment`实例后添加它会解决你的问题。
事实可能是在您调用 getEquipmentCollection() 的地方不再可以访问持久性上下文，但我需要有关您的上下文的其他信息来帮助您（ejb、事务上下文等）。
您可以在引发异常的地方访问 entityManager 实例吗？

# eclipse - Eclipse：在 Eclipse 中安装插件时出现错误，因为找不到 jar 文件

> ID：15680497
> 
> 赞同：5
> 
> 时间：2013-03-28T11:22:47.593
> 
> 标签：eclipse, eclipse-plugin, visualvm

我正在关注以下网站 [http://visualvm.java.net/eclipse-launcher.html](http://visualvm.java.net/eclipse-launcher.html) 用于将 VisualVM 安装到 Eclipse Helios 版本 3.6 中，为此我下载了 visualvm_launcher_u1_eclipse_36 以及在 Eclipse 菜单窗口 ---> 首选项 - --> Installed JRE ---> Pointed JDK Path in JRE Settings C:\Program Files\Java\jdk1.6.0_27

但是当我尝试将这个 VisualVM 安装到 Eclipse 中时

Eclipse Menu ---> Install New Software --->Add -->Archive 选项

我收到以下异常

找不到 jar 文件：file:/D:/VisualVM/visualvm_launcher_u1_eclipse_36.zip！/

请查看与 Exception 相关的图像。

![在此处输入图像描述](../Images/931e0e694f8a975127e31c75cffbc770.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-22T17:04:01.447

这就是我为安装它所做的。

1.  下载并解压到 C:/visualvm_launcher_u1_eclipse_36/

2.  Eclipse 窗口 ---> 首选项 ---> 可用软件站点 --> 添加（名称：VisualVM；位置：文件：/C:/visualvm_launcher_u1_eclipse_36/）

3.  Eclipse Help ---> Install New Software ---> Select VisualVM from drop-down menu ---> Expand Uncategorized ---> Select VisualVM Launcher Feature ---> Next

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T18:37:11.997

您似乎没有按照安装步骤进行操作。你应该：

1.  将 visualvm_launcher_u1_eclipse_36.zip 解压缩到您选择的目录中
2.  添加指向所选目录的本地更新站点
3.  安装 VisualVM 启动器功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-11T14:01:25.507

您尝试添加为存档的文件本身可能已损坏。检查文件的根级别并确保存在正确的组件。现在，我正在尝试以这种方式安装 EPIC。我在根级别的 zip 文件中看到的是：

*   功能（文件夹）
*   插件（文件夹）
*   README.txt（文件）
*   site.xml（文件）

# jquery - 事件中的事件，不断重新加载

> ID：15680498
> 
> 赞同：0
> 
> 时间：2013-03-28T11:22:48.833
> 
> 标签：jquery

我正在使用 jQuery 构建一个电子商务网站，但遇到了一个小问题。我有一个“我的购物车”按钮，它应该列出在 mouseenter 事件中添加的所有产品。问题是我有一个删除特定产品的按钮。一旦我单击该按钮，它就会一遍又一遍地调用第一个 ajax 请求，因此不允许我删除产品。我知道事件的某个地方存在问题，但我无法弄清楚。这是代码：

```
// My cart
$('div#cartButton').mouseenter(function() {
    //var remProduct, notLogedIn, pCartError;
    var language = $.cookie('lang');
    $.ajax({
        type: "GET",
        url: "./locales/lang_js_"+language+".xml",
        dataType: "xml",
        cache:false,
        success: function(xml) {
            var remProduct = $(xml).find('remProduct').text();
            var notLogedIn = $(xml).find('notLogedIn').text();
            var cartEmpty = $(xml).find('cartEmpty').text();
            var pCartError = $(xml).find('error').text();

            // Ajax
            $.ajax({
                type: "GET",
                url: "./ajax/loadcart.php",
                cache:false,
                beforeSend: function() {$('div#cartDPStatus').empty().html('<img src="./images/al_2.gif" />')},
                success: function(response) {
                    var data = $.parseJSON(response);
                    switch(data['status']) {
                        case 'OK':
                            $('div#cartDPStatus').empty();
                            $('div#cartViewDropDown').html(data['products']);
                            // Remove from cart
                            $('span.cqpRemove').click(function() {
                                $(this).parent('div.cartQProduct').hide(200, function() {
                                    $(this).parent('div.cartQProduct').remove();
                                    if($('div.cartQProduct').length <= 0) $('div.cartViewDropDown').empty().html('<div id="cartDPStatus">'+cartEmpty+'</div>');

                                    console.log($('div.cartQProduct').length);
                                });
                            });
                        break;
                        case 'EMPTY':
                            $('div#cartDPStatus').empty().html(cartEmpty);
                        break;
                        case 'BAD':
                            $('div#cartDPStatus').empty().html('<img src="./images/icon_error.png" style="height:24px !important"/>&nbsp;'+pCartError);
                        break;
                        case 'NOTLOGEDIN':
                            $('div#cartDPStatus').empty().html('<img src="./images/icon_error.png" style="height:24px !important"/>&nbsp;'+notLogedIn);
                        break;
                    }
                },
                error: function() {
                    $('div#cartDPStatus').empty().html(pCartError);
                }       
            });
        }
    });
    $('div#cartViewDropDown').slideDown(300);
}); 
```

第一个 ajax 请求用于读取语言 xml 文件，一旦完成，第二个请求会加载产品，然后单击事件应删除该元素。

我希望你明白问题出在哪里。一旦我单击该按钮，当我的鼠标悬停在该 div 元素上时，它就会一次又一次地重新加载。

任何帮助表示赞赏。谢谢。

**编辑：** 我的 html 看起来像这样

```
<div id="cartButton">
   <div id="cartViewDropDown">
       <div id="cartDPStatus">&nbsp;</div>
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:25:11.930

```
$('p.remove').click(function() {
     $(this).hide(); 
}); 
```

每次删除 DOM 元素时都会触发该事件。我不知道为什么，但是如果您使用`hide()`它，它应该可以按您的意愿工作。

看到这个[小提琴](http://jsfiddle.net/VSq9n/7/)。

# android - NDK 预建共享库文件格式无法识别

> ID：15680502
> 
> 赞同：4
> 
> 时间：2013-03-28T11:23:00.453
> 
> 标签：android, libspotify

我一直在尝试按照github 上的[这个示例来获得基本的 spotify 实现工作，我已经按照设置步骤，安装了所有必需的库等，但在本机构建阶段不断收到以下错误。](https://github.com/spotify/psyonspotify)

```
**** Build of configuration Default for project LoginActivity ****

c:\Android-ndk\android-ndk-r8e\ndk-build.cmd NDK_NO_WARNINGS=1 all 
Install        : libspotify.so => libs/armeabi/libspotify.so
c:/Android-ndk/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows-x86_64/bin/arm-linux-androideabi-strip:./libs/armeabi/libspotify.so: File format not recognized
make: *** [libs/armeabi/libspotify.so] Error 1
make: *** Deleting file `libs/armeabi/libspotify.so'

**** Build Finished **** 
```

我下载了 android 特定的库，然后尝试了 Linux ARM 库的各种组合，只是为了看看会发生什么，结果总是一样的。从目录中删除`libspotify.so`时，构建会按预期失败，因为找不到文件，所以我知道脚本正在尝试处理文件。

据我所知，我已经完全按照设置进行了操作，我目前的猜测是问题与运行 64 位版本的 eclipse/java 等有关。任何人都可以解释这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-18T01:42:18.953

你需要找出这个文件的可编译目标是什么。如果您使用 linux，请运行以下命令：

```
$ file libspotify.so 
```

你会看到它是否可以用`armeabi`or编译`x86`。然后，在 中`application.mk`，您需要设置`APP_ABI`to`armeabi`或`APP_ABI:X86`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:30:50.570

事实证明，这个问题是由 .so 文件的损坏存档引起的。

当我重新下载它时，它运行良好。感谢您的帮助。

**编辑**

[我在这里](https://github.com/dajaywang/AndroidWrapperForSpotify/tree/master/jni/libspotify-12.1.51/lib)找到了正确提取的 libspotify.so 文件的一个版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-14T09:14:57.383

我相信你可能不小心提取`libspotify.so (21 bytes)`了，它只是一个指向共享库的 Unix 符号链接`libspotify.so.12.1.51 (1,961,644 bytes)`。

至少那是我刚刚所做的，它把我带到了这里。后者需要重命名为查找名称 (libspotify.so)，然后 NDK 就可以了。

希望这至少可以帮助另一个疲惫的灵魂。:)

# android - 使用视图中心对齐

> ID：15680505
> 
> 赞同：1
> 
> 时间：2013-03-28T11:23:07.697
> 
> 标签：android, alignment, android-relativelayout

我想使用 a 的中心`View`将它与 another 对齐`View`，比如说 a`TextView`在 a 中`RelativeLayout`。我不想让它居中，`RelativeLayout`而是从左下角偏移。目前我对齐`TextView` `ParentLeft`and`ParentBottom`并使用左侧和底部的边距将其从这些侧面移开。但是，因为 my`TextView`设置为`wrap_content`in `width`，它会在内部文本及其`width`更改时“移动”（因为 的边界`TextView`用于偏移）。

我希望中心`TextView`保持在我的偏移位置。这在 中是否可行`xml`，而无需编写管理偏移量的代码或使用其他布局？

这是文本更改时*不需要的行为：* [Screen1](http://i.imgur.com/4AqdZz0)
理想的行为：[Screen2](http://i.imgur.com/0Ahqk5w)
请注意`center`的`TextView`保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-19T08:20:20.053

这里有一个简单的逻辑。如果您想相对于父视图对齐视图，那么对于相对布局，您可以使用 align_parent，其中线性使用 android:layout_gravity。在您的情况下，将 textview 设置为 match_parent 并将重力设置为中心。

# javascript - 如何防止按键十进制数后两位？

> ID：15680506
> 
> 赞同：12
> 
> 时间：2013-03-28T11:23:09.457
> 
> 标签：javascript, html, jquery, textinput

我有一项任务是防止在十进制数字后按下两位数字。我的 jquery 文件是

```
$(function(){ 
    $('#name').bind('paste', function(){
    var self = this;
    setTimeout(function() {
        if(!/^[a-zA-Z]+$/.test($(self).val()))
            $(self).val('');
    }, 0);    
           }); 

        $('#salary').bind('paste', function(){
    var self = this;
    setTimeout(function() {
        if(!/^\d*(\.\d{1,2})+$/.test($(self).val()))
            $(self).val('');
    }, 0);    
           }); 

    $('.decimal').keyup(function(){
        var val = $(this).val();
        if(isNaN(val)){
             val = val.replace(/[^0-9]./g,'');

             if(val.split('.').length>2) 
                 val =val.replace(/\.+$/,"");
        }
        $(this).val(val); 
    });
    }); 
```

我的html页面是

```
<b>Name</b>
<input type="text" id="name"  /><br/>
<b>Salary</b>
<input type="text" id="salary"  class="decimal" /> 
```

在这里我只想写小数点后2位，我该怎么做？[您可以在http://jsfiddle.net/V6s4B/](http://jsfiddle.net/V6s4B/)中查看我的代码

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-28T11:34:23.563

`keyup`您可以在on之前处理按键事件`keypress`，如果输入不符合我们的喜好，我们可以禁止该事件发生。像这样的东西：

## 更新

不幸的是，我在下面的原始答案在某些无法准确表示为浮点数的数字上失败了。这是另一个`'.'`使用方便的辅助函数检查字符位置与字符串长度的解决方案。

[jsFiddle](http://jsfiddle.net/FHhDQ/4/)

```
$('.decimal').keypress(function (e) {
    var character = String.fromCharCode(e.keyCode)
    var newValue = this.value + character;
    if (isNaN(newValue) || hasDecimalPlace(newValue, 3)) {
        e.preventDefault();
        return false;
    }
});

function hasDecimalPlace(value, x) {
    var pointIndex = value.indexOf('.');
    return  pointIndex >= 0 && pointIndex < value.length - x;
} 
```

## 原始答案

[jsFiddle](http://jsfiddle.net/FHhDQ/)

```
$('.decimal').keypress(function (e) {
    var character = String.fromCharCode(e.keyCode)
    var newValue = this.value + character;
    if (isNaN(newValue) || parseFloat(newValue) * 100 % 1 > 0) {
        e.preventDefault();
        return false;
    }
}); 
```

请注意，如果包含超过 2 个小数位的数字，则`parseFloat(newValue) * 100 % 1 > 0`计算结果为 true 。`newValue`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T11:46:13.787

```
$("#salary").keyup(function(){
    var number = ($(this).val().split('.'));
    if (number[1].length > 2)
    {
        var salary = parseFloat($("#salary").val());
        $("#salary").val( salary.toFixed(2));
    }
  }); 
```

[http://jsfiddle.net/calder12/fSQpc/](http://jsfiddle.net/calder12/fSQpc/)

别把信放进盒子里，你得把两个放在一起，我没时间。

```
 if (this.value.match(/[^0-9]./g)) {
      this.value = this.value.replace(/[^0-9]./g, '');
      return false;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:10:06.507

[另一种可能的解决方案（演示）](http://jsfiddle.net/c4Wqn/97/)：

```
Number.prototype.toFixedDown = function(digits) {
  var n = this - Math.pow(10, -digits)/2;
  n += n / Math.pow(2, 53); // added 1360765523: 17.56.toFixedDown(2) === "17.56"
  return n.toFixed(digits);
}
$( function() {
    $('.two-digits').keyup(function(){
        if($(this).val().indexOf('.')!=-1){         
            if($(this).val().split(".")[1].length > 2){                
                if( isNaN( parseFloat( this.value ) ) ) return;
                this.value = parseFloat(this.value).toFixedDown(2);
            }  
         }            
         return this; //for chaining
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-12T21:26:56.070

这可能对某些人有帮助。我混合了这个人的答案，来自[https://stackoverflow.com/a/10514166/5382523](https://stackoverflow.com/a/10514166/5382523)的@Tats_innit 和上面的@Rick Calder。

**也从这个人那里**编辑，来自**[https://stackoverflow.com/a/17289322](https://stackoverflow.com/a/17289322)的 isJustMe 用于带有“|| 0”的 parseFloat。因为如果输入的字段为空或为零，则显示“NaN”并且您无法删除它。**

 ****HTML**

```
<input type="text" name="txt_prod_price" id="txt_prod_price" class="form-control price" maxlength="20" placeholder=""> 
```

**JAVASCRIPT (JQUERY)**

```
$('.price').keypress(function(event) {

          if(event.which < 46 || event.which > 59) {
              event.preventDefault();
          } // prevent if not number/dot

          if(event.which == 46 && $(this).val().indexOf('.') != -1) {
              event.preventDefault();
          } // prevent if already dot

          var number = ($(this).val().split('.'));
          if (number[1].length > 2)
          {
           var price = parseFloat($("#txt_prod_price").val()) || 0;
           $("#txt_prod_price").val(price.toFixed(2));  
          }

      }); 
```

“价格”是预定义的。

注意：仍然有错误的输入，但仍然在踢。(y)

有关 toFixed 的更多信息 - [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-08-25T02:12:04.030

我是这样做的：提供了一个只允许数字的类，然后供您输入：

```
 var numberOfDecimals = 2;
  $(document).on("input", ".allow-only-numbers", function () {
    var regExp = new RegExp('(\\.[\\d]{' + numberOfDecimals + '}).', 'g')    
    this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').replace(regExp, '$1');
}); 
```**

# php - 如何从 gqgrid 获取过滤器数组

> ID：15680508
> 
> 赞同：1
> 
> 时间：2013-03-28T11:23:18.970
> 
> 标签：php, jqgrid

我正在使用这个 php 代码来生成一个网格。

```
<?php

//ini_set("display_errors","1");
require_once 'grid/jq-config.php';
// include the jqGrid Class
require_once "grid/jqGrid.php";
// include the driver class
require_once "grid/jqGridArray.php";

// include the calendar
require_once "grid/jqCalendar.php"; 

// include the document class 
require_once "lib/document.php";
// include heler.php which contain some helper functions
require_once "lib/helper.php";
// create the array connection
$conn = new jqGridArray();
// Create the jqGrid instance
$grid = new jqGridRender($conn);

echo $_REQUEST["filters"]; 
```

当用户通过工具栏搜索时，我希望通过 $_REQUEST 变量进行参数搜索并传递给我的函数并返回新结果。

的结果`echo $_REQUEST["filters"];`

```
{\"groupOp\":\"AND\",\"rules\":[{\"field\":\"BatchNumber\",\"op\":\"bw\",\"data\":\"56\"},{\"field\":\"SenderCode\",\"op\":\"bw\",\"data\":\"string1\"},{\"field\":\"ReceiverCode\",\"op\":\"bw\",\"data\":\"string2\"}]}{"records":0,"page":0,"total":0,"rows":false} 
```

我希望结果像

```
$filter = array("BatchNumber" => 56 , 
"SenderCode" => "string1",
"ReceiverCode" => "string2"
 ) 
```

还有其他字段我想在其中搜索并显示在上面的数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:56:05.897

如果我正确理解您的问题，您应该将[filterToolbar](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3atoolbar_searching)`stringResult`的属性 值从更改为。选项使发送到服务器的信息格式与高级搜索兼容。所以[过滤器](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aadvanced_searching#options)参数将被发送到服务器。`true``false``stringResult: true`

# php - 有人可以解释一下 PHP 迭代器吗？

> ID：15680509
> 
> 赞同：1
> 
> 时间：2013-03-28T11:23:20.573
> 
> 标签：php, iterator

我试图通过这个官方页面上的示例来概述和理解 PHP 迭代器。有人可以向我解释吗？至于它的用途以及结果如何计算，如页面所示。

PHP 迭代器的链接：http: [//php.net/manual/en/class.iterator.php](http://php.net/manual/en/class.iterator.php)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T11:32:51.547

PHP 迭代器本质上是一个可搜索的对象。它的主要特性是它`foreach`具有出色的色彩，并且表现得完全符合它的要求。而不是做类似的事情：

```
foreach (myFunction() as $v) {
   doSomethingWith($v);
} 
```

您可以创建一个迭代器（Seekable、Rewindable 等）来简化工作，并在其中绑定您可能想要的任何其他内容，让您只做一次工作。

创建一个 Iterator 对象并调用`foreach ($object as $r)`执行以下操作（按顺序）：

1.  倒回迭代器（调用`$object->rewind()`）
2.  检查当前操作是否有效`$object->valid()`，如果需要，终止循环
3.  如果循环没有终止，则返回当前项和键，`$object->current()`并使用`$object->key()`and 移动到下一个对象`$object->next()`
4.  转到第 2 步

非常简单的结构，只是因为它是一个 SPL 接口而令人期待。实际上，它的唯一目的是让您的对象通过`foreach`. 不多也不少。您可以将它们用于各种各样的东西——我最近使用了一个来简化循环遍历从 IMAP 服务器产生的消息的过程（并确保我只进行了一次处理）。

PHP 中已经定义了一些迭代器——我最喜欢的是可能`RecursiveDirectoryIterator`的，它极大地减轻了必须递归遍历目录的负担。

希望这有帮助。有任何问题，请随时评论，我会详细说明。

# java - 加密两台服务器之间的会话

> ID：15680513
> 
> 赞同：0
> 
> 时间：2013-03-28T11:23:28.710
> 
> 标签：java, security, rsa

我的系统架构是这样的，mysql 数据库位于特定机器上，而应用程序代码位于另一台机器上。如何加密/保护它们之间传递的数据？

我有一点线索，这可能应该通过 RSA（会话加密）来完成。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:29:44.707

您可以使用 JDBC over SSL 来执行此操作。mysql网站[上有配置 SSL 的指南](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-using-ssl.html)。我最近使用 Oracle 完成了这项工作，效果非常好。它确实会降低性能，因此请仔细考虑您安全发送的内容。

# android - android Intent.ACTION_SEND 过滤器

> ID：15680515
> 
> 赞同：0
> 
> 时间：2013-03-28T11:23:30.777
> 
> 标签：android, filter

我想在调用 Intent.ACTION_SEND 时禁用某些应用意图。当我调用 Intent.ACTION_SEND 时，我不想显示 gmail、电子邮件、蓝牙。有蚂蚁的方式吗？

```
 try
        { Intent i = new Intent(Intent.ACTION_SEND);  
          i.setType("text/plain");
          String sAux = linkok;
          i.putExtra(Intent.EXTRA_TEXT, sAux);  
          startActivity(Intent.createChooser(i, "choose one"));
        }
        catch(Exception e)
        { //e.toString();
        } 
```

# ruby-on-rails - 带有友好 ID 的站点地图生成器仅在 URL 中生成 id 而不是 :name

> ID：15680519
> 
> 赞同：0
> 
> 时间：2013-03-28T11:23:38.337
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, sitemap

我正在使用 kjvarga 的 sitemap_generator gem 和 friendly_id gem

```
gem 'sitemap_generator', '3.4'
gem "friendly_id", "~> 4.0.9" 
```

如果我使用 rake:sitemap:refresh 创建站点地图，我会得到这样的 URL

www.domainname.com/images/45

但是对于friendly_id，我使用 :name 属性来定义 URL，例如：

www.domainname.com/images/image-name

如何使 sitemap_generator 生成具有正确 URL 的 sitemap1.xml.gz？

我的 sitemap.rb 是

```
SitemapGenerator::Sitemap.default_host = "http://www.domainname.com/"

SitemapGenerator::Sitemap.add_links do |sitemap|

  Image.find_each do |image|
    sitemap.add image_path(image), :changefreq => 'monthly'
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:06:14.353

抱歉，生产服务器上的提交存在错误，已更正。现在它可以工作了，所以上面描述的 sitemap_generator 和friendly_id 的原理布局是可以的！

# iphone - iCloud 和 GEOResourceManifestServerRemoteProxy：失去与 geod 警告的连接

> ID：15680524
> 
> 赞同：62
> 
> 时间：2013-03-28T11:23:51.760
> 
> 标签：iphone, ios, warnings, icloud

我正在测试使用`iCloud`. 有时，当我启动应用程序时，我会在控制台中收到以下警告：

```
GEOResourceManifestServerRemoteProxy: Lost connection to geod 
```

一旦我收到此警告，我似乎没有从`iCloud`. 我试过搜索这个问题，但发现的信息很少。

关于如何尝试检测此问题并尝试处理它的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T22:47:34.053

我知道你在三月份问过这个问题，但根据[这个](http://support.getsocialize.com/socialize/topics/authenticate_facebook_failed_social_sdk_2_7_1)，当登录（如连接到 FB）超时时可能会发生这种情况。

如果您进行堆栈跟踪并查看，那么[这](https://stackoverflow.com/questions/12809174/how-to-stop-symbolicate-adding-redacted-pieces-to-ios-crash-log/12854350#12854350)应该会有所帮助。

如果有帮助，[这里](http://developer.limneos.net/?framework=GeoServices.framework&header=GEOResourceManifestServerRemoteProxy.h)是该接口的代码。

# c++ - 如何使用 Visual Studio 2012 c++ 为 VIX API 配置编译器？

> ID：15680525
> 
> 赞同：3
> 
> 时间：2013-03-28T11:23:57.200
> 
> 标签：c++, visual-studio-2012, vmware, vmware-tools, vix

使用 VIX API 配置 Visual Studio 2012 编译器需要指导。我已经在装有 Windows 8 64 位操作系统的计算机上安装了 VIX API。

谁能一步一步告诉我如何：

*   设置编译器
*   编译样本
*   编译我自己的程序

我已经阅读了 VIX API 的[VMWare 参考指南](http://www.vmware.com/products/beta/ws/vix_api/ReferenceGuide/)。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-05T15:08:35.300

我的答案基于[VMWare 参考指南](https://www.vmware.com/support/developer/vix-api/vix16_reference/) 1-您应该考虑的第一件事是您需要使用**包装库**

> 如果不使用包装器，则需要为 Vix 程序连接的 VMware 产品链接适当的 Vix 库。

2-如果你想使用VS2008及更高版本，你必须使用动态库编译。

2.1-右键单击项目>>属性>>配置属性>>c/c++>>代码生成>>运行时库：设置为'多线程（/MT）'

2.2-右键点击项目>>属性>>配置属性>>链接器>>通用>>附加库目录：将vix的安装目录添加到此选项。例如：“C:\VMware_VIX”

2.3-在上述路径中，将“链接库依赖项”和“使用库依赖项输入”选项选中“是”。

2.4-在上面的链接器路径中，链接器>>输入>>附加依赖项，添加这个'.lib'文件。

*   VixAllProductsDyn.lib
*   kernel32.lib
*   用户32.lib
*   advapi32.lib
*   ole32.lib
*   oleaut32.lib
*   ws2_32.lib
*   shell32.lib

现在，单击“确定”。你可以编译并运行你的程序:)

# c# - ASP.net MVC OutputCache 参数优先级 - 持续时间与 SQLDependency

> ID：15680529
> 
> 赞同：3
> 
> 时间：2013-03-28T11:24:04.787
> 
> 标签：c#, asp.net-mvc, outputcache, sqldependency

我正在构建一个负载非常密集的 ASP.net MVC 4 系统，并且希望`OutputCache`在两个关键页面上使用该属性。这`OutputCache`在使页面非常快速方面具有预期的效果，但我需要能够控制它们何时过期，因为数据的更改必须及时反映在网站上。

这是我的代码示例 - 我正在尝试将页面缓存 10 分钟或直到数据库表更改。我的 SQLDependency 工作正常。

```
[OutputCache(Duration = 600, SqlDependency = "myDb:myTable")]
public ActionResult Index()
{
    // Do Stuff                     
    return View();
}

[OutputCache(Duration = 600, SqlDependency = "myDb:myTable", VaryByParam = "id")]
public ActionResult Details(int id)
{
    // Do Stuff                     
    return View();
} 
```

有 54 个不同的详细信息页面。当数据库表中的某些内容发生更改时，我需要索引缓存和所有详细信息页面都将过期。目前缓存正在工作，但没有像我期望的那样过期。

我的问题是

1.  `OutputCache' 属性中不同参数的相对优先级是什么？
2.  我当前的配置应该正常工作吗？

很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T01:09:53.187

看看下面的链接：

[SQL 缓存依赖](http://www.dotnetcurry.com/ShowArticle.aspx?ID=263)

请注意以下 IIS 用户权限：

```
GRANT SUBSCRIBE QUERY NOTIFICATIONS TO "TESTSERVER\ASPNET" 
```

# linux - Bash：从文件中读取标准输入并将标准输出写入文件

> ID：15680530
> 
> 赞同：12
> 
> 时间：2013-03-28T11:24:08.167
> 
> 标签：linux, bash

我正在尝试运行一个应用程序（比方说`top`），因此它将从标准输入文件中读取并从标准输出写入另一个文件。

目前我有

```
mkfifo stdin.pipe
(tail -f stdin.pipe) | top 
```

它按预期工作，因为我可以然后`echo`该文件的某些内容和顶部将接收它。但我无法重定向 top 的输出。我怎样才能做到这一点？

编辑：

好的，让我们从头开始。我正在测试这个：

```
cat test.sh

echo Say something
read something
echo you said $something 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-28T11:44:31.177

让我们忘记`top`，这似乎是一个红鲱鱼。

要将 stdin 或 stdout 映射到文件，可以使用重定向：

```
some_program < input_file          # Redirects stdin

another_program > output_file      # Redirects stdout 
```

甚至：

```
yet_another  < input_file > output_file 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-28T12:49:50.563

> 有没有办法可以将标准输入和标准输出映射到文件并使用它们来控制 cli 应用程序？

听起来您正在寻找[coprocesses](http://www.gnu.org/software/bash/manual/html_node/Coprocesses.html)，在 4.0 中添加到 Bash。

```
coproc cat                    # Start cat in background
echo Hello >&${COPROC[1]}     # Say "Hello" to cat
read LINE <&${COPROC[0]}      # Read response
echo $LINE                    # cat replied "Hello"! 
```

在 4.0 之前，您必须使用两个命名管道来实现这一点。

# php - 如何防止“这有帮助”按钮中的垃圾邮件

> ID：15680536
> 
> 赞同：0
> 
> 时间：2013-03-28T11:24:20.687
> 
> 标签：php, javascript, session, spam

我想在我的评论网站中实现一个“这有帮助吗”按钮。存储已投票用户详细信息的最佳方式是什么。我发现的一种方法是将 IP 地址存储在数据库中。我是否可以采取任何其他保护措施来防止一个用户多次点击。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:30:06.570

你有几种可能性来做到这一点，但我会说使用 IP 地址是最好的方法。

您也可以使用 cookie，但用户仍然可以删除它。

或者您可以同时使用：cookie 和 IP 地址，如果您希望多次发布更安全，但请记住，用户总有办法多次发布（对于匿名用户）

# objective-c - JASidePanel ：需要永久维护左侧的菜单

> ID：15680537
> 
> 赞同：1
> 
> 时间：2013-03-28T11:24:32.983
> 
> 标签：objective-c

我正在研究 JASidePanel stackController。

但我想知道是否有可能独立于 JASidePanel 在屏幕左侧永久保留一个菜单。

为此，我尝试将 JASidePanelController 作为另一个 UIViewController 的子视图插入，如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    // My part ---------------------
    UIViewController *rootViewController = [ [ UIViewController alloc ] init ];
    UIView *rootView = [ [ UIView alloc] initWithFrame:CGRectZero ];
    rootView.autoresizingMask = UIViewAutoresizingFlexibleWidth + UIViewAutoresizingFlexibleHeight;
    [rootView setBackgroundColor:[UIColor yellowColor]];

    rootViewController.view = rootView;
    // ---------------------

    JASidePanelController *sidePanelController =[[JASidePanelController alloc] init];
    sidePanelController.leftFixedWidth = 260;

    self.viewController = sidePanelController;
    self.viewController.shouldDelegateAutorotateToVisiblePanel = NO;

    self.viewController.leftPanel = [[JALeftViewController alloc] init];
    self.viewController.centerPanel = [[UINavigationController alloc] initWithRootViewController:[[JACenterViewController alloc] init]];
    self.viewController.rightPanel = [[JARightViewController alloc] init];

    self.viewController.view.frame = CGRectMake(61, 0, self.viewController.view.frame.size.width, self.viewController.view.frame.size.height );
    [ rootView addSubview:self.viewController.view ];

    // My part ---------------------
    self.window.rootViewController = rootViewController;
    // ---------------------
    [self.window makeKeyAndVisible];
    return YES;
} 
```

它有效，但我并不完全满意。

实际上，当我向左滑动手指以显示右侧面板时，中心面板不会正确地向左移动并覆盖我的个人菜单（黄色）。

结果，右侧面板完全不可见，我的菜单（黄色）不可见。

请看一下我的插图以了解我想要做什么。

有没有人知道如何做到这一点？

非常感谢提前！

![在此处输入图像描述](../Images/6b3043729923fbfd46587070a6f9c848.png) ![在此处输入图像描述](../Images/48937a2573f91a2066a0f12029e197f3.png) ![在此处输入图像描述](../Images/8de9129a12cd5467fbb44bd644a307e6.png)

# ruby-on-rails - 在模型中访问设计 current_user

> ID：15680541
> 
> 赞同：1
> 
> 时间：2013-03-28T11:24:46.633
> 
> 标签：ruby-on-rails, model, devise

嗨，我正在尝试访问模型中的 current_user，以便使用 find_or_create_by 动态创建元素。

以下是我的模型中的方法

```
def opponent_name=(name)
self.opponent = Opponent.find_or_create_by_name_and_team_id(name,current_user.team_id) if name.present?
end 
```

但我得到的错误是

```
NameError in EventsController#create

undefined local variable or method `current_user' for #<Event:0x007fb575e92000> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-09T22:03:06.517

访问模型文件中的 current_user：

```
# code in Applcation Controller:
class ApplicationController < ActionController::Base
  before_filter :global_user

  def global_user
    Comment.user = current_user
  end
end

#Code in your Model File :
class Comment < ActiveRecord::Base
  cattr_accessor :user  # it's accessible outside Comment
  attr_accessible :commenter 

  def assign_user
    self.commenter = self.user.name
  end
end 
```

请原谅我，如果它违反了任何 MVC 架构规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T11:35:31.063

`current_user`不能从 Rails 的模型文件中访问，只能从控制器、视图和助手中访问。

你应该做的是将 传递`current_user.team_id`给这样的`opponent_name`方法：

```
def opponent_name=(name, current_user_team_id)
  self.opponent = Opponent.find_or_create_by_name_and_team_id(name,current_user.team_id) if name.present?
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T11:59:30.797

它不是在模型中访问 c​​urrent_user 的好方法，这个逻辑属于控制器。但是如果你真的找不到解决方法，你应该把它放到一个线程中。但请记住，这不是它应该如何构建的方式。

[https://rails-bestpractices.com/posts/2010/08/23/fetch-current-user-in-models/](https://rails-bestpractices.com/posts/2010/08/23/fetch-current-user-in-models/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-22T11:45:03.130

Rails 5.2 引入了当前属性： [https ://api.rubyonrails.org/classes/ActiveSupport/CurrentAttributes.html](https://api.rubyonrails.org/classes/ActiveSupport/CurrentAttributes.html)

但与往常一样......您必须记住，使用这样的全局状态可能会导致一些不可预测的行为 ‍♀️：

[https://ryanbigg.com/2017/06/current-considered-harmful](https://ryanbigg.com/2017/06/current-considered-harmful)

# php - 保留控制台登录导航

> ID：15680542
> 
> 赞同：0
> 
> 时间：2013-03-28T11:24:46.720
> 
> 标签：php, wordpress, jconsole

我正在为 Wordpress 构建一个插件，每次用户发布新帖子时，它都会将自定义数据保存到自定义表中。当我在调用 publish_post 挂钩后将数据添加到 wordpress 中的自定义表时，我试图在 Chrome 的控制台中回显行 ID。

我看到的问题是在 wordpress 上发布帖子会调用 save_post 函数，一旦发布帖子，它就会重定向到帖子页面。

所以很明显，回声不会显示在屏幕上，但有没有办法让这些回声显示在 Chrome 的控制台中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:38:48.360

如果我很明白你想要什么，答案是否定的。

可以使用 Javascript 访问 Chrome 控制台，因此您必须向浏览器发送数据才能在控制台中显示某些内容。在您的情况下，PHP 正在保存帖子，然后重定向而不向浏览器发送任何内容。

如果要在 Chrome 控制台中获取调试信息，则必须在显示给用户的页面上生成日志。（在您的情况下，它是帖子显示页面）

PS：使用 javascript 记录信息：

```
console.log('Your message'); 
```

# android - 管理android中进度对话框的显示时间

> ID：15680545
> 
> 赞同：1
> 
> 时间：2013-03-28T11:24:47.657
> 
> 标签：android, android-asynctask, progressdialog

问题是，如果用户的互联网连接速度很慢，那么我想在从网站加载数据期间显示进度对话框。我使用 AsyncTask 类来实现这一点。但是当我运行我的代码时，我的对话框会在数据已经加载到屏幕上时显示。在加载期间，我在模拟器上看到黑屏。请提供建议如何在加载开始时显示进度对话框，并在加载结束时自动关闭。我不想在启动时看到黑屏。这是我的主要 java 文件。请帮忙..................

```
package com.androidhive.xmlparsing;

import java.util.ArrayList;
import java.util.HashMap;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.DialogInterface.OnCancelListener;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.ProgressBar;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class AndroidXMLParsingActivity extends ListActivity {

TextView textView;
ArrayList<HashMap<String, String>> menuItems;
// All static variables
static final String URL = "http://feeds.bbci.co.uk/news/rss.xml" ;
// XML node keys
static final String KEY_ITEM = "item"; // parent node
static final String KEY_ID = "id";
static final String KEY_NAME = "title";
//static final String KEY_COST = "cost";
static final String KEY_DESC = "description";
static final String KEY_IMAGE = "media:thumbnail";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    new HeavyWorker(AndroidXMLParsingActivity.this).execute();

System.out.println("you are on print line 1");  
    menuItems = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element
    System.out.println("you are on print line 2");
    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    // looping through all item nodes <item>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
    //  map.put(KEY_COST, "Rs" + parser.getValue(e, KEY_COST));
        map.put(KEY_DESC, parser.getValue(e, KEY_DESC));
        map.put(KEY_IMAGE, parser.getValue(e, KEY_IMAGE));

        // adding HashList to ArrayList
        menuItems.add(map);
    }

    System.out.println("you are on print line 3");

    // Adding menuItems to ListView
    ListAdapter adapter = new SimpleAdapter(this, menuItems,
            R.layout.list_item,
            new String[] { KEY_NAME, KEY_DESC,  KEY_IMAGE}, new int[] {
                    R.id.name, R.id.desciption,   R.id.image });

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
        //  String cost = ((TextView) view.findViewById(R.id.cost)).getText().toString();
            String description = ((TextView) view.findViewById(R.id.desciption)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(KEY_NAME, name);
            //in.putExtra(KEY_COST, cost);
            in.putExtra(KEY_DESC, description);
            startActivity(in);

        }
    });

/*       }
    }).start();

     */    
         }

public class HeavyWorker extends AsyncTask < Void , Integer, Object > {

    ProgressBar progressBar = (ProgressBar)findViewById(R.id.progress);
    int progress_status;

    private ProgressDialog      progressDialog ;
    private Context             targetCtx ;

    public HeavyWorker ( Context context ) {
        this.targetCtx = context ;
      //  this.needToShow = true;
        progressDialog = new ProgressDialog ( targetCtx ) ;
        progressDialog.setCancelable ( false ) ;
        progressDialog.setMessage ( "Retrieving data..." ) ;
        progressDialog.setTitle ( "Please wait" ) ;
        progressDialog.setIndeterminate ( true ) ;
        System.out.println("you are on print line 5");
    }

    @Override
    protected void onPostExecute(Object result) {
         if(progressDialog != null && progressDialog.isShowing()){
                progressDialog.dismiss ( ) ;
            }
        System.out.println("you are on print line 6");
    }
    @Override
    protected Object doInBackground(Void... params) {
        // TODO Auto-generated method stub
       while (progress_status<100)
             {
                 progress_status+=2;
                 setProgress(progress_status);
                 try {
                     Thread.sleep(3000);
                 } catch (InterruptedException e) {
                     e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
                 }
             }
        System.out.println("you are on print line 7");

        return null;
    }
    @Override
    protected void onProgressUpdate(Integer... values) {
        // TODO Auto-generated method stub
        super.onProgressUpdate(values);
        progressBar.setProgress(values[0]);
             textView.setText("downloading " +values[0]+"%");
             System.out.println("you are on print line 8");

    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
         progressDialog.show ( ) ;
        super.onPreExecute();
        System.out.println("you are on print line 9");
    }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:40:58.157

加载大型数据表单服务器时，您必须管理后台线程。看我会尽力解释给你。

[请参阅此处](http://www.javasrilankansupport.com/2012/11/asynctask-android-example-asynctask-in.html)以获取示例链接

**在线程开始之前调用 1 个完成任务。**

```
 @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub

        super.onPreExecute();
// This will call before the loading the URL data. so if you want to get data from locally that logic should be written here.
    }

} 
```

**Call 2 在后台加载数据** @Override protected Object doInBackground(Void... params) { // TODO 自动生成的方法存根

```
 while (progress_status<100)
         {
             progress_status+=2;
             setProgress(progress_status);
             try {
                 Thread.sleep(3000);
             } catch (InterruptedException e) {
                 e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
             }
         }
    System.out.println("you are on print line 7");

    return null;
} 
```

**调用 3 这是 UI 线程，它将根据重试数据更新 UI。**

```
 @Override
    protected void onProgressUpdate(Integer... values) {
        // TODO Auto-generated method stub

// show your dialog here progressDialog.show ( ) ;

        super.onProgressUpdate(values);
        progressBar.setProgress(values[0]);
             textView.setText("downloading " +values[0]+"%");
             System.out.println("you are on print line 8");

    } 
```

**调用 4 结束线程。所以显示最终输出或释放控制。**

```
 @Override
    protected void onPostExecute(Object result) {

         if(progressDialog != null && progressDialog.isShowing()){
                progressDialog.dismiss ( ) ;
            }
        System.out.println("you are on print line 6");
    } 
```

# java - Properties.load() 是否报告无效字节

> ID：15680559
> 
> 赞同：1
> 
> 时间：2013-03-28T11:25:17.740
> 
> 标签：java, properties

该方法是否`Properties.load(InputStream)`在其输入中报告无效字节？

API 规范明确规定`InputStream`必须使用 ISO 8859-1 (Latin-1) 字符编码对文本进行编码。这不允许字节值 0x81-0x9F。因此，如果存在这样的字节，它应该抛出`IOException`（a`CharacterCodingException`将是理想的）。但真的吗？如果没有，它如何*处理*那些无效字节？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:29:32.340

尽管规范声称，提供的实现将这些无效字节视为 Unicode 字符；0x81-0x9F 范围内的字节将被解释为 C1 控制字符。[源代码](http://hg.openjdk.java.net/jdk7/jdk7-gate/jdk/file/e947a98ea3c1/src/share/classes/java/util/Properties.java)有这个：

```
 //The line below is equivalent to calling a
 //ISO8859-1 decoder.
 c = (char) (0xff & inByteBuf[inOff++]); 
```

尽管评论说了什么，但这**并不**等同于调用 ISO8859-1 解码器。

* * *

**编辑**

事实上，它相当于调用一个 ISO-8859-1（注意连字符）解码器。所以有两种可能的解释：

*   提供的实现是错误的。
*   规范 (API) 文档没有正确描述作者的意图；它应该说流使用 ISO-8859-1 编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:09:15.213

属性文件规范说输入流是用 ISO 8859-1 编码的。但是，它并没有明确说明控制字符（例如，在 ISO/IEC 6429 中指定）是非法的。（事实上​​，它们中的某些；例如，空白字符 HT、CR、NL，显然*是*合法的。）并且规范没有说明任何假设的非法字符应该发生什么。

事实上，实际发生的情况是，Property reader 做了一个粗略的映射，将 8 位输入流中的控制代码映射到 Unicode 中的相应控制代码。然后属性加载器将任何没有特定含义的控制代码视为普通的旧字符，并将它们原样包含在键和值中。[（你可以在这里](http://www.docjar.com/html/api/java/util/Properties.java.html)阅读代码......如果你有兴趣。

事实上，如果您查看 Java ISO 8859-1 解码器的源代码（例如[此处），您会发现解码器](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/nio/cs/ISO_8859_1.java)*以完全相同的方式*映射 8 位字符。换句话说，控制字符都被视为有效的 ISO 8859-1 字符......根据 Java 解释。这种解释也被证明是 IANA 首选的解释：

> “在 1992 年，IANA 注册了字符映射 ISO_8859-1:1987，通常以其首选的 MIME 名称 ISO-8859-1（注意 ISO 8859-1 上的额外连字符）而闻名，它是 ISO 8859-1 的超集，用于 Internet。此映射将 C0 和 C1 控制字符分配给未分配的代码值，因此通过每个可能的 8 位值提供 256 个字符。

（引自[http://en.wikipedia.org/wiki/ISO_8859-1](http://en.wikipedia.org/wiki/ISO_8859-1)截至 2013-03-29）

简而言之，“互联网”对“ISO 8859-1”一词的使用并不完全符合 ISO/IEC 8859-1:1998 标准……但这种不匹配实际上使标准更有用。

（如果你认为 Java / IANA 是错误的，想象一下如果 Java 从字面上解释 ISO 规范，并且解码器变成,并变成未映射的字符，那将是多么**痛苦！）**`'\t'``'\n'``'\r'`

# data-structures - 高效实现 Birman-Schiper-Stephenson(BSS) 协议的延迟队列

> ID：15680561
> 
> 赞同：0
> 
> 时间：2013-03-28T11:25:23.737
> 
> 标签：data-structures, queue, distributed-computing

我正在使用分布式系统的[Birman-Schiper-Stephenson](http://www.cse.psu.edu/~gcao/teach/513/read/vsynch2.pdf)协议，当前假设任何节点的对等集都不会改变。正如协议所规定的，必须将不按因果顺序发送到节点的消息放入“延迟队列”中。我的问题是延迟队列的组织，我们必须对消息实施某种顺序。在决定顺序之后，我们将不得不制定一个“唤醒”协议，该协议将在修改当前时间戳后有效地搜索队列，以确定是否可以“唤醒”并接受其中一条延迟消息。

我正在考虑根据向量时间戳与该节点时间戳的差异点将延迟的消息分成垃圾箱。但是垃圾箱的数量可能非常大，维护它们效率不高。

请为此类队列提出一些设计建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T17:23:04.817

抱歉耽搁了——直到现在才看到你的问题。无论如何，如果您查看 Isis2.codeplex.com，您会发现在 Isis2 中，我有一个 causalsend 实现，它采用了我们在 BSS 论文中描述的相同向量时间戳方案。我所做的是将我的消息按部分顺序保存，按 VT 排序，然后当发生传递时，我可以查看延迟的队列并从队列的前面传递，直到找到无法传递的内容。它背后的一切也将无法交付。

但实际上这里有一个更深刻的见解：您实际上永远不想让延迟消息的队列变得很长。如果队列长于几条消息（例如，50 或 100 条），您就会遇到问题，即拥有队列的人可能持有相当多字节的数据，并且可能开始分页或运行缓慢。所以它变成了一个自我延续的循环，因为他有一个队列，他很可能会丢弃消息并因此排队越来越多。再加上无论如何从他的角度来看，当务之急是恢复那条导致其他人出现故障的丢失消息。

这加起来就是您需要一个流控制方案，其中挂起的异步内容的数量保持很小。但是一旦您知道队列很小，搜索每个元素的成本就不会很高！所以这个更深层次的观点说无论如何都需要流量控制，然后因为流量控制（如果你有一个有效的流量控制方案）队列很小，而且因为队列很小，搜索不会很昂贵！

# c# - 如何从列表中删除在同一列表中具有父项的项目

> ID：15680563
> 
> 赞同：1
> 
> 时间：2013-03-28T11:25:30.723
> 
> 标签：c#, linq

我有一个`List<Item>`.

如何使用 LINQ 删除在同一列表中具有父项的项目？

如果可能的话，我更喜欢方法链表达式。

物品定义：

```
public class Item {
        public int Id { get; set; }
        public int ParentId { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:29:40.590

这可能会有所帮助

```
List<Item> items = new List<Item>();
items.Add(new Item() { Id = 1, ParentId = 2 });
items.Add(new Item() { Id = 2, ParentId = 0 });
items.Add(new Item() { Id = 3, ParentId = 0 });
items.Add(new Item() { Id = 4, ParentId = 1 });
items.Add(new Item() { Id = 5, ParentId = 1 });
items.Add(new Item() { Id = 6, ParentId = 4 });
items.Add(new Item() { Id = 7, ParentId = 4 });
items.Add(new Item() { Id = 8, ParentId = 4 });
items.Add(new Item() { Id = 9, ParentId = 4 });
items.Add(new Item() { Id = 10, ParentId = 4 });
items.Add(new Item() { Id = 11, ParentId = 4 });

var shouldBeRemove =
    (from i in items
     where items.Any(input => input.Id == i.ParentId)
     select i).ToList();

items.RemoveAll(input => shouldBeRemove.Contains(input));

//Those who remain
//item with Id = 2
//item with Id = 3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T11:30:54.800

```
var Children = List.Where(child => List.Any(parent => parent.Id == child.ParentID)).ToList();
List.RemoveAll(child => Children.Contains(child)); 
```

# css - 带有幻灯片和寻呼机块和绝对定位的 css

> ID：15680566
> 
> 赞同：0
> 
> 时间：2013-03-28T11:25:43.457
> 
> 标签：css

我的 drupal 网站 (www.terrafirmasouth.co.uk) 有一个 css 问题，与幻灯片标题框和下方的寻呼机块有关。

当您第一次访问我的网站时，幻灯片上的透明标题框（左下角）从下面的寻呼机块的高度开始降低，然后自行调整到正确的位置。按下`Ctrl`-`F5`也会重现问题。

如果我禁用寻呼机块，问题就会消失。

通过添加`position:absolute`到寻呼机块跳跃停止，但我的寻呼机块下方的文本似乎干扰（重叠？）与我的寻呼机块，我不能再点击数字来改变幻灯片。

我希望能够在幻灯片下显示寻呼机（1-6），以便可以单击它们（我已经对此进行了测试，没有`position:absolute`，它工作正常，但我当然有跳跃问题）。

我在下面附上了我最新的 css，但这还没有在我的网站上发布，只是使用 xammp 在我的电脑上运行它。

```
/* my caption box */
.trcaption {
    position: absolute;
    left: 20px;
    bottom: 10px;
    background: #353535;
    opacity: 0.85;
    filter:alpha(opacity=85);
    color: #FFFFFF;
    padding: 10px 10px 10px 10px;
}
/* title inside caption box */
#trtitle {
    font-weight: normal;
    font-size: 18px;
    padding-bottom: 5px;
    color: #FFFFFF;
    font-family: 'LatoLight', Arial, sans-serif;
}
/* read more link inside caption box */

#trlink a {
    color: #008C07;
    float: left;
    font-size : 12px;
}
/* pager block under my slideshow  */

.views-slideshow-controls-bottom {
    display: block;
    position: absolute;
    text-align:center;
    width: 100%;
}
/* pager item i.e. number number */

.views-slideshow-pager-field-item {
    display: inline-block;
    margin-right: 20px;
    padding-left: 10px;
    padding-right: 10px;
    margin-top: 5px;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
}
/* show active pager with grey background */

.views-slideshow-pager-field-item.active {
    background: #E8E8E8;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:08:56.420

如果您要添加绝对的东西，请确保没有其他与绝对属性发生冲突的东西，您可以使用`z-index`将它们分层排列。

这将停止冲突，然后事情应该可以正常工作。:)

如需更多帮助，请添加一些工作代码，除了 CSS 或在 jsfiddle 上创建 fiddel

# ruby-on-rails - 通过给出已知的 td 来解析 id 值？

> ID：15680569
> 
> 赞同：0
> 
> 时间：2013-03-28T11:25:58.780
> 
> 标签：ruby-on-rails, ruby, html-parsing, nokogiri

在firePath的帮助下，我得到了这个：

```
.//*[@id='#table-row-51535240d7037e70b9000062']/td[1] 
```

我的 HTML 的一部分看起来像这样：

```
 <table class="table table-bordered table-striped">
    <tbody>
      <tr>
      <tr>
       <tr id="#table-row-51535240d7037e70b9000062"> #this is the id that i want to get
      <td>             54           </td>            #this is the td that i know
      <td>
      <td>
       <td>Open</td>
    <td/> 
```

我在这里真正想做的是，通过给出 td 值（54），我希望能够获取 id（解析 id），任何提示我该如何实现？

提前致谢。

PS：对不起我的英语，以及我缺乏知识:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:32:21.977

首先，您的 HTML 无效（因为它包含嵌套`<tr>`节点）。Nokogiri 可能能够解析它，但如果可以的话，你应该在此之前修复它。

您可以通过以下 ruby​​ 代码获取该 ID：

```
doc.at_xpath("//td[contains(text(), '54')]/..")['id'] 
```

1.  `//td[contains(text(), '54')]`将抓取所有`<td>`包含`54`,的节点`/..`将转到它们的父节点。
2.  [`Document#at_xpath`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-at_xpath)将仅获取第一个匹配项
3.  `['id']`将获得匹配节点的属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T11:39:10.990

使用 jQuery

```
$(function(){
    // (i dont know if you have id for that td or not, it will be more easy if u do have id for that td)
    console.log($('table tbody tr td:first').closest('tr').attr('id')); // you can remove :first if you want to.
}); 
```

糟糕，我误读了您的问题，还有一件事，您的 tr 标签有问题。

# java - 动画不适用于 ImageView Drawable 的更改

> ID：15680570
> 
> 赞同：0
> 
> 时间：2013-03-28T11:26:06.020
> 
> 标签：java, android, xml, android-animation

嗨，动画有问题，实际上我想在 ImageView 更改资源时淡化它。它不起作用，我可以更改资源但没有任何动画。

```
private void checkX() {
    // TODO Auto-generated method stub
    switch (x) {
    case (1): {
        startingAnimation();
        xImg.setImageResource(R.drawable.test_uno);
        endingAnimation();
        break;
    }
    case (2): {
        startingAnimation();
        xImg.setImageResource(R.drawable.test_due);
        endingAnimation();
        break;
    }
    case (3): {
        startingAnimation();
        xImg.setImageResource(R.drawable.test_tre);
        endingAnimation();
        break;
    }
    case (4): {
        startingAnimation();
        xImg.setImageResource(R.drawable.test_quattro);
        endingAnimation();
        break;
    }
    case (5): {
        x = 1;
        checkX();
        break;
    }
    case (0): {
        x = 4;
        checkX();
        break;
    }
    }
}

private void endingAnimation() {
    // TODO Auto-generated method stub
    ObjectAnimator animation2 = ObjectAnimator.ofFloat(xImg, "alpha", 255);
    animation2.setDuration(1000);
    animation2.start();

}

private void startingAnimation() {
    // TODO Auto-generated method stub
    ObjectAnimator animation = ObjectAnimator.ofFloat(xImg, "alpha", 0);
    animation.setDuration(1000);
    animation.start();
} 
```

每次我按下一个按钮（在 X 上加或减 1）时都会调用 checkX。

我如何使动画和 ImageView 资源都发生变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:31:30.947

**在调用动画的onAnimationEnd**时尝试更改图像源。例如：

```
animation.addListener(new AnimatorListener() {

    @Override
    public void onAnimationStart(Animator animation) { }

    @Override
    public void onAnimationRepeat(Animator animation) { }

    @Override
    public void onAnimationEnd(Animator animation) {
        // change your ImageView's source here
    }

    @Override
    public void onAnimationCancel(Animator animation) { }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:33:55.273

在 ImageView 上应用淡出动画并将 animationListener 设置为它。在动画结束时更改您的视图资源并在其上设置淡入动画

用于淡入动画

```
Animation fadeIn = new AlphaAnimation(0, 1);
            fadeIn.setInterpolator(new DecelerateInterpolator()); 
            fadeIn.setDuration(1000);
            final AnimationSet animation = new AnimationSet(false); 
            animation.addAnimation(fadeIn); 
```

对于淡出动画

```
Animation fadeOut = new AlphaAnimation(1, 0);
                fadeOut.setInterpolator(new AccelerateInterpolator()); 
                fadeOut.setDuration(300);
                final AnimationSet animation = new AnimationSet(false);
                animation.addAnimation(fadeOut); 
```

这就是你如何在动画上实现监听器

```
fadeout.setAnimationListener(new Animation.AnimationListener(){

            @Override
            public void onAnimationStart(Animation arg0) {
            }           

            @Override 
            public void onAnimationRepeat(Animation arg0) {
            }           

            @Override
            public void onAnimationEnd(Animation arg0) {
                //change resource of Imageview here             
            }
        }); 
```

# c# - MVC C# WebGrid，列按升序排序，第一次点击什么都不做

> ID：15680571
> 
> 赞同：0
> 
> 时间：2013-03-28T11:26:09.600
> 
> 标签：c#, asp.net-mvc

我正在使用`WebGrid`with `canSort: true`，当网格首次加载时，如果列已经按升序排序，则*第一次*单击列标题不会执行任何操作。然后第二次单击按降序对列进行排序。

当 WebGrid 加载并且列已经按升序排序时，如何让第*一次单击*按降序对列进行排序？

谢谢！

# ruby - Ruby Enumerable 和 Yield 用法

> ID：15680577
> 
> 赞同：1
> 
> 时间：2013-03-28T11:26:53.283
> 
> 标签：ruby, shoes, enumerator

如果我没有以正确的方式问我的问题，请提前道歉。

试图让这段 Ruby 代码工作。我不明白的是如何让点击在底部调用收益函数（它是一个红绿灯），以便点击将循环通过收益选项。真、假、假将意味着灯是红色的，因为它在顶部，而底部的 2 个是假的。我也很难理解枚举器和产量。

```
class TrafficLight  
  include Enumerable
  include TL

  def each
    yield [true, false, false]
    yield [true, true, false]
    yield [false, false, true] 
    yield [false, true, false] 
  end
end

class Bulb < Shoes::Shape
  attr_accessor :stack
  attr_accessor :left
  attr_accessor :top
  attr_accessor :switched_on

  def initialize(stack, left, top, switched_on = false)    
    self.stack = stack #don't change. 
    self.left = left    
    self.top = top
    self.switched_on = switched_on
    draw left, top, bulb_colour

  end

  # HINT: Shouldn't need to change this method
  def draw(left, top, colour
    )    
    stack.app do
      fill colour

      stack.append do
        oval left, top, 50
      end
    end
  end

  def bulb_colour 
    "#999999"
  end  
end

class GoBulb < Bulb
  def bulb_colour
    "#00FF30"
  end
end

class WaitBulb < Bulb
  def bulb_colour
    "#FFFC00"
  end
end

class StopBulb < Bulb
  def bulb_colour
    "#FF0000"
  end
end

module TL 
  Go = "#00FF30"
  Wait = "#FFFC00"
  Stop = "#FF0000"
end

Shoes.app :title => "My Amazing Traffic Light", :width => 150, :height => 250 do
  background "000", :curve => 10, :margin => 25  
  stroke black    

  @traffic_light = TrafficLight.new
  @top = StopBulb.new self, 50, 40, true     
  @middle = Bulb.new self, 50, 100, true
  @bottom = Bulb.new self, 50, 160, true

  click do #make this switch on/off depending on what you click. Only 1 should be on 

  end
end 
```

我已经用谷歌搜索并搜索过，但我得到的枚举器示例不允许我做我需要做的事情。非常感谢任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:54:13.747

包含当前版本 Shoes 的 Ruby (1.9.1) 在`Enumerator#next`. 调用此方法时会卡住。因此，您不能迭代地从`Enumerator`.

必须重写该类`TrafficLight`以模仿`Enumerator#next`. 如果没有这样的错误`next`，我们可以`TraficLight.new.cycle`在这个循环枚举器上使用并重复调用`next。

```
module TL 
  Go = "#00FF30"
  Wait = "#FFFC00"
  Stop = "#FF0000"
end

class TrafficLight
  include TL
  STATUS = [
    [true, false, false], 
    [true, true, false], 
    [false, false, true],
    [false, true, false]
  ]
  def initialize; @index = 0; end
  def current
    STATUS[@index % STATUS.size]
  end
  def next
    @index += 1
    current
  end
end 
```

更新`Bulb`，添加一个`update(on)`重绘灯泡的方法。

```
def update(on = false)
  self.switched_on = on
  draw self.left, self.top, on ? self.bulb_colour : '#999999'
end 
```

`Shoes.app`并更新使用特定灯泡的主要逻辑：

```
@traffic_light = TrafficLight.new
@top = StopBulb.new self, 50, 40, true     
@middle = WaitBulb.new self, 50, 100, false
@bottom = GoBulb.new self, 50, 160, false

click do #make this switch on/off depending on what you click. Only 1 should be on 
  status = @traffic_light.next
  [@top, @middle, @bottom].zip(status).each do |light, on|
    light.update(on)
  end
end 
```

# javascript - 如果元素没有特定类的父元素

> ID：15680580
> 
> 赞同：15
> 
> 时间：2013-03-28T11:27:03.963
> 
> 标签：javascript, jquery, parent

我正在尝试在 jQuery 中为具有特定类的父元素的元素创建一个 if 语句。

到目前为止，这是我想出的，但这是不对的。

```
if(!$(".myElem").parents(".myDiv")) {
    console.log("test")
}; 
```

谁能指出我正确的方向。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-28T11:28:21.773

用于`length`检查选择器中是否有元素，并且比一旦找到匹配就停止`closest()`会更好：`parents()`

```
if(! $(".myElem").closest(".myDiv").length ) {
    console.log("has no parent with the class .myDiv")
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T11:28:45.393

如果您正在测试具有类的元素是否`myElem`具有类 myDiv 的直接父级，请使用以下测试

```
if(!$(".myElem").parent().hasClass("myDiv")) {
    console.log("test")
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T11:36:33.330

```
if($(".myElem").parent().hasClass(".myDiv")) {
    console.log("has a parent with the class .myDiv")
}
else
{
    console.log("no parent class .myDiv found")
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T11:33:53.010

这应该选择那些具有类 myElem 且其父类具有类 myDiv 的元素：

```
$(".myElem").filter(function(elem) {
    return $(this).parents(".myDiv").length
}); 
```

或者这应该选择那些具有类 myElem 并且没有具有类 myDiv 的父元素的元素：

```
$(".myElem").filter(function(elem) {
    return !$(this).parents(".myDiv").length
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-20T21:08:02.400

如果 $('.myElem') 具有多个元素，则唯一有效的解决方案是 Zoltan 的解决方案

看这里的例子

```
 var takeElements = $('.myElement').filter(function(){
   return $(this).closest('.bannedAncestors').length === 0
 });

 takeElements.css('color','green');

 var bannedElements = $('.myElement').filter(function(){
   return $(this).closest('.bannedAncestors').length !== 0
 });

 bannedElements.css('color','red'); 
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<div class="bannedAncestors">
  <div> number of nested element don't matters
    <div class="myElement">
      don't take this child since it has an ancestor we don't want
    </div>
  </div>
</div>
<div>
  <div>
    <div class="myElement">
      but this one is ok
    </div>
  </div>
</div>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T11:38:41.377

试试这个。

```
 if($("#child").parent("span#parent").length > 0)
   {
          console.log("parent is span");

   }
   else {
          console.log("parent is not span or no parent");
   } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-28T12:01:43.937

`.closest()`如果您知道孩子的类名，则更好的方法是使用。

```
if(!$('yourtag.childClass').closest('yourParentTag').hasClass('classname')){
    console.log('does not exist');
} 
```

# ios - 从给定数字生成随机数

> ID：15680582
> 
> 赞同：3
> 
> 时间：2013-03-28T11:27:11.743
> 
> 标签：ios, objective-c, arc4random

我陷入了一个关于随机数的问题。我正在使用`arc4random()`. 我想首先生成 0-9 之间的随机数。所以我正在使用：

```
int RandomNumber = arc4random() % 9; 
```

很好。现在假设我得到了 8。我不希望我的新随机数是 8。所以我做了以下工作：

```
NSMutableArray *aryTemp = [NSMutableArray new];
for (int i = 0; i < [aryTemp Count] < 9; i++) {
   int RandomNumber;
   do {
      RandomNumber = arc4random() % 9;
   }
   while ([aryTemp containsObject:[NSNumber numberWithInt:RandomNumber]])
   [aryTemp addObject:[NSNumber numberWithInt:RandomNumber]];
} 
```

所以我生成一个随机数，而不是将其添加到数组中，而不是检查下一个随机数是否是上一个生成的随机数？如果不是，则将其添加到数组中。

它适用于少数起始数字，但是当我当时没有多少选择时，我生成所需随机数的机会非常少，而由于冗余随机数，循环过程需要大量时间。

我在找什么我想要0、1、2、3、4、5、6、7、8、9的随机数如果我下次第一次得到6，随机数必须在这些数字中只有0， 1、2、3、4、5、7、8、9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:18:11.133

编辑：上面评论中链接的[答案](https://stackoverflow.com/a/56656/1124373)提出了一个更优雅的解决方案 - 将数组改组，尽管它使用与我天真的方法相同的原则:)

如果我理解正确：您想随机选择 0-9 范围内的所有项目。

我最初的方法是创建一个包含范围内所有项目的包。每次您随机选择一个项目 - 将其从包中取出，这样您就不会再次选择它。

下面的代码片段应该实现这一点：

```
int randomNumber;

// Fill remainingNumbers array with numbers 0-9
NSMutableArray *remainingNumbers = [NSMutableArray array];
for (int i = 0; i < 10; i++) {
    [remainingNumbers addObject:[NSNumber numberWithInt:i]];
}

// Create tempNumbers array to store our random numbers in
NSMutableArray *tempNumbers = [NSMutableArray array];

for (int i = 0; i < 9; i++) {
    // Create a random number in the range of the indexs for remainingNumbers array
    int maxIndex = [remainingNumbers count] -1;
    randomNumber = arc4random() % maxIndex;

    // Add random number to tempNumbers array
    [tempNumbers addObject:[remainingNumbers objectAtIndex:randomNumber]];

    // Remove the number from the remaining numbers so we don't add duplicates
    [remainingNumbers removeObjectAtIndex:randomNumber];
}
// Add final number
[tempNumbers addObject:[remainingNumbers objectAtIndex:0]];

// Print the array of 'randomly selected numbers'
NSLog(@"The array is: %@", tempNumbers); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:34:29.020

试试这个

```
//call method 
int tempvalue = (int) [self randomFloatBetween:0 secondParam:9]; // pass number as per your need

-(float) randomFloatBetween:(int) smallNumber secondParam:(float) bigNumber
{
    float diff = bigNumber - smallNumber;
    return (((float) rand() / RAND_MAX) * diff)
    + smallNumber;
} 
```

希望这会有所帮助，谢谢。

谢谢你。快乐编码

# python - UDP套接字接收数据失败

> ID：15680583
> 
> 赞同：0
> 
> 时间：2013-03-28T11:27:19.887
> 
> 标签：python, sockets, udp, lan, plc

我有一个问题：我创建了一个小的 Python 脚本来从 LAN 上的 Omron PLC 内存中读取数据。Delphi 程序运行批处理文件，定期（每 6 秒）运行 Python 脚本。

该脚本在 2 台 Win 7 PC 和 1 台 Win XP PC 上运行。

我的问题是：Win XP PC和PLC之间没有数据传输一段随机时间（大约1分钟，有时更多），但Win 7 PC与同一个PLC通信没有问题。

我使用UDP协议。

```
def main():
    udpSock = util_socket.utilSocket()
    command = udpSock.read_from_file("udpCommand")
    command = int(command)
    messaggio = mex()
    if command==1:
        msg = messaggio.get_messaggio_lettura()
        udpSock.send_command(msg)
        ricevi_risposta(udpSock)
    if command==2:
        msg = messaggio.get_messaggio_azzeramento()
        udpSock.send_command(msg)
        msg = messaggio.get_messaggio_lettura()
        udpSock.send_command(msg)
        ricevi_risposta(udpSock)
    if command<1 or command>2:
        udpSock.write_to_file("ERROR !!!", "numPezzi")

def ricevi_risposta(udpSock):        
    data, addr = udpSock.recv_socket()
    contaPezzi = udpSock.get_dato_pulito(data)
    udpSock.write_to_file(contaPezzi, "numPezzi")
    stringa = str(datetime.datetime.now().strftime( "%d/%m/%Y %H:%M" )) + " - dato ricevuto: " + str(data) + " // dato convertito: " + str(contaPezzi) + "\n" 
    udpSock.append_to_file(stringa, "numPezzi_Log_" + str(datetime.datetime.now().strftime( "%d/%m/%Y")) )

def recv_socket(self):

    # the public network interface
    #HOST = socket.gethostbyname(socket.gethostname())

    # create a raw socket and bind it to the public interface
    s = socket.socket(socket.AF_INET, socket.SOCK_RAW, socket.IPPROTO_IP)
    self.get_parametri()
    s.bind((self.ipAddressPc, 0))
    # Include IP headers
    s.setsockopt(socket.IPPROTO_IP, socket.IP_HDRINCL, 1)
    data, addr = s.recvfrom(65536)

    return data, addr

def send_command(self, msg):
    self.get_parametri()
    udp_ip = self.ipAddressPlc
    udp_port=9600 #5575

    #print "UDP target IP:", udp_ip
    #print "UDP target port:", udp_port
    #print "message:", msg

    sock = socket.socket( socket.AF_INET, # Internet
                          socket.SOCK_DGRAM ) # UDP
    sock.sendto( msg, (udp_ip, udp_port) ) 
```

LAN 似乎“睡着了”。这是日志文件：(08:41:13 -> 08:42:30。预期 08:41:13 -> 08:41:19, 08:41:25, 08:41:31, ...)

```
27/03/2013 08:41:13 - dato ricevuto (dati non riportabili) dato convertito: 252
27/03/2013 08:42:30 - dato ricevuto (dati non riportabili) dato convertito: 260
27/03/2013 08:42:30 - dato ricevuto (dati non riportabili) dato convertito: 260
27/03/2013 08:42:30 - dato ricevuto (dati non riportabili) dato convertito: 260
27/03/2013 08:42:30 - dato ricevuto (dati non riportabili) dato convertito: 260
27/03/2013 08:42:30 - dato ricevuto (dati non riportabili) dato convertito: 260
27/03/2013 08:42:30 - dato ricevuto (dati non riportabili) dato convertito: 260
27/03/2013 08:42:30 - dato ricevuto (dati non riportabili) dato convertito: 260
27/03/2013 08:42:30 - dato ricevuto (dati non riportabili) dato convertito: 260
27/03/2013 08:42:30 - dato ricevuto (dati non riportabili) dato convertito: 260
27/03/2013 08:42:30 - dato ricevuto (dati non riportabili) dato convertito: 260
27/03/2013 08:42:30 - dato ricevuto (dati non riportabili) dato convertito: 260
27/03/2013 08:42:30 - dato ricevuto (dati non riportabili) dato convertito: 260
27/03/2013 08:42:36 - dato ricevuto (dati non riportabili) dato convertito: 261 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:38:34.377

这可能是由于 LAN 中的网络拥塞造成的。如果它只是发生了一会儿，比如 1 分钟。

# c# - WPF - 根据附加属性的值重用具有不同设置的 UserControl

> ID：15680585
> 
> 赞同：2
> 
> 时间：2013-03-28T11:27:26.767
> 
> 标签：c#, wpf, xaml, wpf-controls, attached-properties

我需要一个自定义的 UserControl（带有标签、文本框、按钮等的 StackPanel）用于事件前后的数据输入（一些治疗）。所以我想把那个 UserControl 两次放在一个窗口上，一个属性说，一些标签的内容应该看起来如何，一些按钮应该如何反应以及 TextBoxes 的绑定应该是什么。

事实上，治疗有五种不同的模式，所以我需要五个自定义的用户控件，它们被放置在五个不同的窗口上两次。我想主要使用 XAML 来实现这一点。

这就是我到目前为止所尝试的：

我创建了一个附加属性：

```
public static class TherapyBeforeAfter
{    
    public static DependencyProperty _BeforeAfter = DependencyProperty.RegisterAttached("BeforeAfter", typeof(string),
        typeof(TherapyBeforeAfter), new FrameworkPropertyMetadata("b", FrameworkPropertyMetadataOptions.AffectsRender,Callback));

    private static void Callback(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        d.SetValue(_BeforeAfter, e.NewValue.ToString());
    }

   [AttachedPropertyBrowsableForType(typeof(DependencyObject))]
   [AttachedPropertyBrowsableForChildren]
   public static string GetBeforeAfter(DependencyObject d)
   {
        return (string)d.GetValue(_BeforeAfter);
   }

   public static void SetBeforeAfter(DependencyObject d, string value)
   {
        d.SetValue(_BeforeAfter, value);
   }
} 
```

在字典中，我使用触发器定义所需的样式，例如标签：

```
<Style x:Key="TherapyLabelHeader" TargetType="Label">
<Setter Property="FontSize" Value="16"/>
<Setter Property="Content" Value="Default" />
<Setter Property="Grid.ColumnSpan" Value="2"/>
<Setter Property="Margin" Value="10,0,0,0"/>
<Setter Property="Foreground" Value="DarkRed"/>
      <Style.Triggers>
         <Trigger Property="Namespace:TherapyBeforeAfter.BeforeAfter" Value="b">
           <Setter Property="Content" Value="Therapy before" />
         </Trigger>
         <Trigger Property="Namespace:TherapyBeforeAfter.BeforeAfter" Value="a">
           <Setter Property="Content" Value="Therapy after" />
        </Trigger>
     </Style.Triggers>
</Style> 
```

在 UserControl 中，我们称之为 cntTherapy，我将 Label 的 Style 设置为上面的 Template：

```
<Label Style="{DynamicResource TherapyLabelHeader}" /> 
```

在 MainWindow 中，我将控件两次放入 XAML-Code 并设置附加属性的值：

```
<Namespace:cntTherapy x:Name="TherapyBefore" Grid.Row="1" Namespace:TherapyBeforeAfter.BeforeAfter="b" />
<Namespace:cntTherapy x:Name="TherapyAfter" Grid.Row="2"   Namespace:TherapyBeforeAfter.BeforeAfter="a" /> 
```

当我运行 Window 时，两个标签都包含附加属性的默认值的内容。因此，当我将默认值设置为“a”时，两个标签的内容都是“Therapy after”，如果我将默认值设置为“b”，两个标签的内容都是“Therapy before”。如果我将默认值设置为其他值（例如“x”），则两个标签都具有默认内容“默认”。当我检查两个用户控件的附加属性的值时，值是正确的，一个用户控件有“a”，另一个有“b”。

我错过了什么？我的 PropertyChangedCallback 方法错了吗？还是有另一种方法可以在 XAML 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T08:06:45.670

找到了问题的解决方案：在字典中，我正在寻找标签中附加属性的值。相反，必须检查画布的附加属性。

```
<Style x:Key="TherapyLabelHeader" 
       TargetType="{x:Type Label}">
    <Style.Triggers>
        <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type StackPanel}}, Path=(Namespace:TherapyBeforeAfter.BeforeAfter)}" 
                     Value="b" >

            <Setter Property="Content" 
                    Value="before" />
        </DataTrigger>

        <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type StackPanel}}, Path=(Namespace:TherapyBeforeAfter.BeforeAfter)}" 
                     Value="a" >
            <Setter Property="Content" 
                    Value="after" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

甚至 DataBinding 也可以这样设置。

# typo3 - TYPO3：将 4.2 升级到 4.5 后，TypoScript 不起作用

> ID：15680587
> 
> 赞同：0
> 
> 时间：2013-03-28T11:27:39.087
> 
> 标签：typo3, typoscript

我正在将typo3 安装从4.2 升级到4.5，之后我的内容在我的页面上不再可见。我用了一个标记

```
<!--###MAINCONTENT###--> 
```

在我的模板文件中，并有以下typoScript代码来填充我的内容：

```
page = PAGE

page.10 {
  template = FILE
  template.file = fileadmin/Templates/clean.tmpl
  marks.MAINCONTENT < styles.content.get
} 
```

但它现在不起作用。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:31:10.863

检查是否包含静态 ts 模板！

# knockout.js - 将 koGrid 与 Durandal/HotTowel 模板集成

> ID：15680588
> 
> 赞同：9
> 
> 时间：2013-03-28T11:27:47.480
> 
> 标签：knockout.js, durandal, hottowel, kogrid

我使用 Durandal 模板开发 asp.net 解决方案。

我尝试使用与淘汰赛兼容的 koGrid ( [https://github.com/Knockout-Contrib/KoGrid )。](https://github.com/Knockout-Contrib/KoGrid)在 Durandal 管理的测试页面中插入此网格时，它不起作用：网格似乎存在但未正确显示。

我们注意到，如果我们调整窗口大小，那么网格会正确调整。

**是否有人已经成功将此 koGrid 集成到 Durandal/HotTowel 模板中？**

重现问题的步骤：

*   创建一个新的 ASP.NET MVC 项目并选择 Durandal 模板
*   在项目中添加 koGrid（在 Nuget 中可用）
*   将此网格放在视图上并添加虚拟数据
*   运行并显示包含网格的视图

这是一个包含一个小的 ASP.NET MVC 项目来重现问题的 zip：[https ://www.dropbox.com/s/15rphyhkqp1h8py/KOGrid-HotTowelTemplate.zip](https://www.dropbox.com/s/15rphyhkqp1h8py/KOGrid-HotTowelTemplate.zip)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T07:21:18.257

这应该只被视为一种解决方法！适用于带有**koGrid-2.1.1.js的****Durandal.Core 1.2**。如果任一更改以修复此行为，我将更新帖子。

 **在您的视图模型中添加一个 viewAttached() 函数（并确保将其添加到您的对象文字中），如下所示：

```
function viewAttached() {
    logger.log('Home View Attached', null, 'home', true);
    $(window).trigger('resize');
    return true;
} 
```

viewAttached 函数发生在组合绑定之后，触发器将导致**koGrid**更新其宽度/高度可观察对象。**koGrid**监听这个事件。

注意：您仍然需要解决与 HotTowel 模板的 CSS 冲突。SPA 在 body 标签上使用 18px 的字体大小。面板复选框也应该被隐藏，这可能与 Bootstrap CSS 冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-28T11:55:13.270

以前的解决方案将确保网格显示，但是，排序至少对我不起作用。正如 mikekidder 在上面评论的那样，问题的核心是“当 KOGrid 在 Durandal/HotTowel 中进行绑定时，KOGrid 元素还不是 DOM 的一部分”。您需要确保 KOGrid 在附加视图之前不会进行绑定。这可以通过以下方式实现：

1) 向视图模型添加一个新的 observable，以保存一个布尔值，用于判断视图是否已被 durandal 附加：

```
isAttachedToView = ko.observable(false) 
```

并暴露它

```
isAttachedToView: isAttachedToView 
```

2) 在调用 viewAttached 函数回调时更新它为真：

```
function viewAttached() {
    isAttachedToView(true);
    logger.log('viewAttached');
    $(window).trigger('resize');
    return true;
} 
```

3) 用 ko if 语句包围您的 HTML，以确保在附加视图之前不会评估该位 HTML（即 kogrid 不执行其绑定）：

```
<!-- ko if: isAttachedToView() -->
    <div data-bind="koGrid: { data: ...

<!-- /ko --> 
```

4) 在停用视图时将 isAttachedToView 重置为 false

```
function deactivate() {
    isAttachedToView(false);
} 
```

并揭露这一点：

```
deactivate: deactivate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-11T11:54:54.590

**此更新适用于 Durandal 2.x**

从 Durandal 2.0 开始，有一种方法可以指定应该推迟到组合完成的绑定。

为了让 kogrid 正常工作，只需要执行这行代码作为 Durandal 框架初始化的一部分：

```
composition.addBindingHandler('koGrid'); 
```

此示例中的`composition`变量是对 Durandal 组合模块的引用。

有关更多信息，请参阅文档：http: [//durandaljs.com/documentation/Interacting-with-the-DOM.html](http://durandaljs.com/documentation/Interacting-with-the-DOM.html)**

# c++ - 在 cpp 文件中设置静态枚举变量的正确方法

> ID：15680589
> 
> 赞同：1
> 
> 时间：2013-03-28T11:27:52.593
> 
> 标签：c++, static-members

设置静态变量时出现以下错误

```
error: expected primary-expression before '.' token 
```

**“游戏场景.h”**

```
#ifndef __GAME_SCENE_H__
#define __GAME_SCENE_H__

class Game {
public:

    enum InteractionMode {
        EDITING,
        PLAYING };
    static Game::InteractionMode mode;
}
#endif // __GAME_SCENE_H__ 
```

**“游戏场景.cpp”**

```
#include "GameScene.h"

Game *Game::singleton() {
    if (_GameSingleton == NULL) {
        _GameSingleton = Game::create();
        Game::mode = Game::InteractionMode.PLAYING;   //error on this line
    }
    return _GameSingleton;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:28:54.827

代替

```
Game::mode = Game::InteractionMode.PLAYING 
```

直接写

```
Game::mode = PLAYING 
```

此外，您必须在类之外定义它，并添加`mode`：`static`

```
Game::InteractionMode Game::mode; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T11:29:17.453

枚举常量在周围对象的范围内，因此您可以执行以下操作：

```
Game::mode = Game::PLAYING; 
```

或者，由于该函数已经在`Game`类的范围内：

```
mode = PLAYING; 
```

或者，如果你真的想使用完整的作用域，你也可以使用 scope-operator`::`进行枚举：

```
Game::mode = Game::InteractionMode::PLAYING; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:31:02.277

在您的情况下，枚举的项目在封闭类型中定义`class Game`。枚举的名称不会成为项目的一部分。您的错误可以通过使用来修复`Game::PLAYING`。

在 C++11 中，也可以包含枚举的名称，所以你可以说`Game::InteractionMode::PLAYING`. 对于 MSVC，这也适用于早期的 C++ 版本，但您会收到有关非标准扩展的警告。在任何情况下，您都必须使用`::`而不是`.`.

如果您使用符合 C++11 的编译器，则可以执行以下操作：

```
enum class InteractionMode {
        EDITING,
        PLAYING };
// [...]
mode = Game::InteractionMode::PLAYING; 
```

包括`class`允许完整的范围。

# ios - 为什么在 iPhone 的 MPMoviePlayer 上播放视频时没有声音

> ID：15680591
> 
> 赞同：0
> 
> 时间：2013-03-28T11:27:57.643
> 
> 标签：ios, video, mpmovieplayer

我正在使用 MPMoviePlayer 在我的应用程序中播放本地视频文件。文件为 .mov 格式。当我在模拟器中运行我的应用程序时，它工作正常。但是当我在 iPhone 中运行它时，视频运行时没有声音。这是我的代码，

```
 self.currUrl = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"Gun_Shot" ofType:@"mov"]];
    if (self.mpc)
     {
       [self.mpc release];
       self.mpc = nil;
     }
    self.mpc =  [[MPMoviePlayerController alloc]
             initWithContentURL:self.currUrl];   
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackDidFinish:) name:MPMoviePlayerPlaybackDidFinishNotification object:self.mpc];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackLoadStateDidChange:) name:MPMoviePlayerLoadStateDidChangeNotification object:self.mpc];   
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackDidEnterFullScreen:) name:MPMoviePlayerDidEnterFullscreenNotification object:self.mpc];    
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackDidExitFullScreen:) name:MPMoviePlayerDidExitFullscreenNotification object:self.mpc]; 
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackNowPlayingContinues:) name:MPMoviePlayerNowPlayingMovieDidChangeNotification object:self.mpc];  
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackStateChanged:) name:MPMoviePlayerPlaybackStateDidChangeNotification object:self.mpc];

    self.mpc.controlStyle = MPMovieControlStyleNone;
    self.mpc.shouldAutoplay = NO;
    self.mpc.view.frame = CGRectMake(0, 0, self.mpView.frame.size.width, self.mpView.frame.size.height);
    [self.mpView addSubview:self.mpc.view];
    [self.mpView bringSubviewToFront:self.topMainView];
    [self.mpView bringSubviewToFront:self.bottomMainView];
    [self.mpc prepareToPlay];
    self.timeLbl.text = [NSString stringWithFormat:@"%f Sec(s)", self.mpc.duration]; 
```

我不明白为什么当应用程序在 iPhone 上运行时视频会静音。任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:50:10.447

无需查看您的代码。一个原因可能是您的 iPhone 处于静音模式。

这个[答案](https://stackoverflow.com/questions/9508039/ios-5-no-audio-when-playing-a-video-with-silent-mode-on-with-a-buzztouch-app)也可能对您有所帮助。

# python - Numpy：具有各种形状的一维数组

> ID：15680593
> 
> 赞同：19
> 
> 时间：2013-03-28T11:28:05.073
> 
> 标签：python, arrays, numpy

我试图了解如何处理`1D`数组（线性代数中的向量）`NumPy`。

在以下示例中，我生成两个`numpy.array` `a`and `b`：

```
>>> import numpy as np
>>> a = np.array([1,2,3])
>>> b = np.array([[1],[2],[3]]).reshape(1,3)
>>> a.shape
(3,)
>>> b.shape
(1, 3) 
```

对我来说，`a`根据`b`线性代数定义具有相同的形状：1 行 3 列，但不是`NumPy`.

现在，`NumPy` `dot`产品：

```
>>> np.dot(a,a)
14
>>> np.dot(b,a)
array([14])
>>> np.dot(b,b)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: objects are not aligned 
```

我有三个不同的输出。

**`dot(a,a)`和有什么区别`dot(b,a)`？为什么点`(b,b)`不起作用？**

我对这些点积也有一些不同之处：

```
>>> c = np.ones(9).reshape(3,3)
>>> np.dot(a,c)
array([ 6.,  6.,  6.])
>>> np.dot(b,c)
array([[ 6.,  6.,  6.]]) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-28T11:38:22.547

请注意，您不仅使用一维数组：

```
In [6]: a.ndim
Out[6]: 1

In [7]: b.ndim
Out[7]: 2 
```

所以，`b`是一个二维数组。您还可以在 的输出中看到这一点`b.shape`： (1,3) 表示二维，因为 (3,) 是一维。

1D 和 2D 数组的行为`np.dot`不同（来自[docs](http://docs.scipy.org/doc/numpy/reference/generated/numpy.dot.html)）：

> 对于二维数组，它相当于矩阵乘法，对于一维数组，它相当于向量的内积

这就是您得到不同结果的原因，因为您混合了 1D 和 2D 数组。由于`b`是 2D 数组，因此`np.dot(b, b)`尝试对两个 1x3 矩阵进行矩阵乘法，但失败了。

* * *

对于一维数组，np.dot 对向量进行内积：

```
In [44]: a = np.array([1,2,3])

In [45]: b = np.array([1,2,3])

In [46]: np.dot(a, b)
Out[46]: 14

In [47]: np.inner(a, b)
Out[47]: 14 
```

对于二维数组，它是矩阵乘法（因此 1x3 x 3x1 = 1x1，或 3x1 x 1x3 = 3x3）：

```
In [49]: a = a.reshape(1,3)

In [50]: b = b.reshape(3,1)

In [51]: a
Out[51]: array([[1, 2, 3]])

In [52]: b
Out[52]:
array([[1],
       [2],
       [3]])

In [53]: np.dot(a,b)
Out[53]: array([[14]])

In [54]: np.dot(b,a)
Out[54]:
array([[1, 2, 3],
       [2, 4, 6],
       [3, 6, 9]])

In [55]: np.dot(a,a)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-55-32e36f9db916> in <module>()
----> 1 np.dot(a,a)

ValueError: objects are not aligned 
```

# git - 在 git 分支中设置批处理文件

> ID：15680600
> 
> 赞同：0
> 
> 时间：2013-03-28T11:28:34.973
> 
> 标签：git, file, batch-file

我们有 2 个 git 分支：

*   dev65（6.5 版开发）
*   prod65（用于 6.5 版的生产）

我们在 dev65 分支中进行所有开发/测试，然后将这些更改合并到 prod65 中。

我想做的是在 dev65 中创建 2 个批处理文件，称为：

*   pulldev65.bat - 从远程拉取最新代码
*   pushdev65.bat - 将我的更改推送到远程

然后在 prod65 分支上，我想创建类似的批处理文件：

*   pullprod65.bat - 从远程拉取最新代码
*   pushprod65.bat - 将我的更改推送到远程
*   mergedev65.bat - 将 dev65 的更改合并到 prod65

问题是我希望将这些批处理文件提交到分支中，以便所有开发人员都可以使用它们，但不希望在合并所有其他开发更改时将 *dev65.bat 文件合并到 prod65 分支中。 .

我知道 git 并不真的想以这种方式工作，那么还有其他建议吗？我的目标是尝试让错误的合并更容易搞砸（如果开发人员养成只使用批处理文件的习惯，他们将无法意外合并错误的方式，等等）.. .

我能想到的唯一方法是让每个开发人员在他们的本地机器上创建这些未版本控制的文件......可行，但并不理想......（我宁愿知道他们使用的批处理文件是正确的）......

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:45:42.143

您可以让这些脚本检查它们是否在正确的分支中运行：

```
if [ "`git symbolic-ref --short HEAD`" != 'master' ]; then
    echo "Call this script from master.'
    exit 10
fi 
```

当两个脚本最终合并到同一个分支时，这避免了问题。

# hadoop - Mahout 0.8 和 hadoop 0.21

> ID：15680606
> 
> 赞同：0
> 
> 时间：2013-03-28T11:28:53.253
> 
> 标签：hadoop, mahout

当我运行 mahout 命令时，会发生以下错误：

> 在 hadoop 上运行，使用 /usr/local/hadoop/bin/hadoop 和 HADOOP_CONF_DIR= MAHOUT-JOB: /home/ubuntu/mahout/examples/target/mahout-examples-0.8-SNAPSHOT-job.jar 线程“main”中的异常java.lang.NoSuchMethodError: org.apache.hadoop.util.ProgramDriver.driver([Ljava/lang/String;)V at org.apache.mahout.driver.MahoutDriver.main(MahoutDriver.java:123) at sun.reflect .NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method.invoke(Method .java:601) 在 org.apache.hadoop.util.RunJar.main(RunJar.java:192)

我有与这里相对相同的问题：[mahout 无法启动。hadoop和mahout之间的兼容版本有什么关系吗？](https://stackoverflow.com/questions/11751763/mahout-wont-start-up-anything-to-do-with-compatible-version-between-hadoop-and) 不同之处在于我使用的是 hadoop 0.21 和 mahout 0.8。在上面的问题中指出，这个错误已经在 mahout 0.8 中修复，但我仍然遇到同样的错误。

[我在http://comments.gmane.org/gmane.comp.apache.mahout.user/14817](http://comments.gmane.org/gmane.comp.apache.mahout.user/14817)找到了关于这个问题的另一个解决方案，作者建议更改 pom.xml 文件。我试图将主 pom 文件中的 hadoopverion 从 1.1.2 更改为 0.21.0，但 maven 存储库没有该依赖项。因此，我更改为 0.20.2 但随后 mvn compile 不起作用（当我使用 hadoop 1.1.2 时 mvn compile 和 mvn install 工作）。

你有什么想法或建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T22:57:24.863

你在运行什么 mahout 命令？

您是否能够成功运行文档中列出的示例命令？

该 mahout 主要方法正在根据您传递给它的参数动态加载类，如果它们格式错误，那么您可能会得到一个像上面这样的 NoSuchMethodError。

# html - 内部样式的媒体查询不会影响设计

> ID：15680615
> 
> 赞同：0
> 
> 时间：2013-03-28T11:29:20.317
> 
> 标签：html, css

我正在使用 HTML5、CSS3 为 iphone 和 android 手机开发屏幕。

无论我在媒体查询中写什么风格，都不会影响我的设计。假设我将这些样式放在媒体查询之外，它工作正常..

请告诉我原因..

在这里，我给出了我的 jsFiddle 示例代码..

```
<body>
<header>
  <div> <img src="images/Uconnect_header.png" width="480" height="114"> </div>
</header>
<section> 
    <div id="headingTxt"><h5>UCONNECT ACCESS SERVICES</h5></div>
    <p class="descriptionTxt">Services intro copy will go here and need to be dynamically filled according to new and existing schemas. This could be larger or smaller then what is displayed here.</p>
    <hr>

body{
    margin:0px;
    padding:0px;
    background-color:#CCC;
    width:480px;
    border:1px solid red;
}
section{
    margin:10px;
}
@media only screen and (max-device-width: 480px) {

    #headingTxt{background-color:#009966;}
    .descriptionTxt{color:red;}
} 
```

[http://jsfiddle.net/prabunivas/dkdRt/](http://jsfiddle.net/prabunivas/dkdRt/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:31:18.450

试试这个`@media (max-width: 480px) { ...`

能够在开发时检查浏览器调整大小。

有关max-width 和 max-device-width 之间的差异，请参阅此[答案](https://stackoverflow.com/questions/6747242/what-is-the-difference-between-max-device-width-and-max-width-for-mobile-web)

# postgresql - 将 Oracle 存储过程转换为 PostgreSQL

> ID：15680616
> 
> 赞同：3
> 
> 时间：2013-03-28T11:29:24.237
> 
> 标签：postgresql

我正面临从 Oracle 到 PostgreSQL 的迁移：我设法转换了表和视图，但是我对存储过程有点卡住了。

我从这个开始，它在 Oracle 中看起来像这样：

```
CREATE OR REPLACE procedure
  update_role_func_def(function_id varchar2)
as
  cursor role_list_cursor is
   select r.id from amm_role r
    for update of r.id
   ;
begin
  for role_record in role_list_cursor
   loop
     insert into AMM_ROLE_FUNC_DEF (RID, FID, GRANT_FUNCT) values (role_record.id,    function_id, 'N');
  end loop;

  commit;
end update_role_func_def; 
```

查看我设法创建这个等价物的文档：

```
CREATE FUNCTION 
  update_role_func_def(function_id varchar)
  returns void 
as
$$
DECLARE
  cursor role_list_cursor is
    select r.id from amm_role r  for update of r.id  ;
begin
  for role_record in role_list_cursor
  loop
    insert into AMM_ROLE_FUNC_DEF (RID, FID, GRANT_FUNCT) values (role_record.id, function_id, 'N');
  end loop;

  commit;
end ;
$$ 
```

但是，在 PgAdmin 中输入此过程会导致“语法错误，意外 CREATE，期望 ';'

我感到有点失落：如果程序在语法上是正确的，是否有任何 Postgres 开发人员可以给我一个线索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T11:53:49.963

除非您告诉我们的内容更多，否则以下内容应该有效：

```
create or replace function update_role_func_def(function_id varchar)
  returns void 
as
$$
  insert into AMM_ROLE_FUNC_DEF (RID, FID, GRANT_FUNCT) 
  select r.id, function_id, 'N'
  from amm_role r;
$$
language sql; 
```

这是一个 SQLFiddle 示例：[http ://sqlfiddle.com/#!12/aed49/1](http://sqlfiddle.com/#!12/aed49/1)

# c# - 将记录和所有相关数据从一个 SQL Server 传输到另一个

> ID：15680621
> 
> 赞同：0
> 
> 时间：2013-03-28T11:29:33.537
> 
> 标签：c#, sql-server, sql-server-2008

我有 2 台服务器运行 SQL Server 2008 Express。两台服务器都托管一个结构相同的数据库（相同的表结构）。每个数据库包含不同的客户数据。现在我需要将一位客户从一台服务器转移到另一台服务器。从客户表中复制记录会很容易，但是我还需要复制大约 50 个带有相关数据（外键关系）的表。

是否有任何工具能够检测依赖关系并相应地导出/导入数据？

我也开始自己用 C# 编写导出代码。这里的问题是我还没有找到一种动态检测依赖关系的方法。因此这将是一个静态导出，每次数据库结构发生变化时我都需要对其进行调整。这里的任何提示也将非常有帮助。（VS 2010 .net 4.0）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:36:19.803

我建议使用某种`ORM`. 这样您就可以轻松找到家属。那么你应该一次移动孔族。

如果您有任何疑问，请告诉我。

# php - PHP如何同时管理请求

> ID：15680623
> 
> 赞同：4
> 
> 时间：2013-03-28T11:29:36.257
> 
> 标签：php, multithreading, security

今天我只是想知道 PHP 如何同时处理请求。由于 PHP 可以同时处理多个请求，我想到了 PHP 脚本中可能存在的安全漏洞或错误，我只是想知道我是否有点太害怕了。

因此，如果同时有 100 个请求，并且 apache 配置为将它们转发到 PHP。PHP 将如何处理以下示例（我已经在某些现实世界的应用程序中以某种方式看到的所有示例）

所有示例彼此相似。（我**不**要求更好的方法来解决这些示例案例）

* * *

**示例 1：创建缓存**

```
<?php
if (!file_exists('my_cache.txt')) {
    // do something slow (taking a second or so)
    file_put_contents('my_cache.txt', $cache);
} 
```

假设我们有大约 100 个请求。缓存是不是生成了100次，在缓存文件中存储了100次？

* * *

**示例 2：将条目写入缓存**

```
<?php
writeItemToDatabase($myItem);

if (countAllItemsInDatabase() > 100) {
    $items = readAllItemsFromDatabase();
    deleteAllItemsFromDatabase();
    // Process items
} 
```

由于“deleteAllItemsFromDatabase”函数，这个例子有点愚蠢。如果此脚本将并行执行，则可能会发生以下情况：

*   两个用户同时处理所有项目
*   有些项目永远不会被处理，因为它们在任何时候被处理之前就被删除了。

* * *

**示例 3：虚拟货币**

```
<?php
if ($user->getMoney() > 100) {
    $user->decreaseMoney(100);
    $user->addItem($itemToBuy);
} 
```

**如果**脚本可能同时运行，则此示例存在很大的安全问题。如果我快速点击此应用程序的“购买”按钮，即使我的用户帐户上没有钱，我也可以购买物品。

* * *

**问题**

我想知道我是否只是有点偏执于编写脚本以防止此类问题，或者这些示例是真正的问题吗？

并且 - 对于极少数情况 - 如果我需要编写一些动作处理序列（如在那些示例中），是否有 PHP 函数/扩展来确保一次只处理一次脚本部分，例如：

```
<?php
$semaphore->lock();
// Do something dangerous
$semaphore->unlock(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:01:11.097

您考虑的事情和代码示例**不是线程安全**的。这不是 PHP 问题，而是一般并发问题。

解决方案是：

*   对于示例 1 和 2 等文件操作，请使用文件锁。

*   对于您的货币交易等操作，请使用数据库**交易**或最终的表锁。

据我所知，PHP 不提供信号量机制。请记住，服务器的内部实现或配置（如 apache prefork/worker）甚至可以在另一个进程中生成每个请求 - 因此您不必担心共享内存。担心资源——文件、数据库等。

您提到的此类信号量不是一个好的解决方案。例如在数据库级别，数据库引擎可以锁定/解锁单个表甚至行，这与“将整个服务器锁定在那段代码”相比非常有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:13:05.030

+1 给killer_PL，除了他的回答：

Memcache`cas()`或`add()`函数对于文件锁定的实现非常方便。

`Add()`仅当服务器上尚不存在此类密钥时，才使用特定密钥存储变量。`Cas()`还执行“检查和设置”操作。基于这些操作之一设计信号量是非常容易的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:51:24.083

对不起我的英语不好。

首先，我将描述一些一般特性：

1.  这是真的=）

    `$semaphore->lock();`

     `// Do something dangerous` 

    `$semaphore->unlock();`

2.  我试图描述基本概念。代码不适合发布

3.  信号量应该有一些类型：**文件**、**数据库**和其他必要的。
4.  每种类型的实现都会有所不同。

首先让我们进行**文件**实现。我们将使用嵌入式函数[flock](http://www.php.net/manual/ru/function.flock.php)（感谢 [Salman A](/users/87015/salman-a)）。

```
<?php
$fname = 'test.txt';

$file = fopen($fname, 'a+');
sleep(5); // long operation
if(flock($file,LOCK_EX|LOCK_NB )){// we get file lock - $semaphore->lock();

  sleep(5); // long operation
  fputs($file, "\n".date('d-m-Y H:i:s')); //something dangerous
  echo 'writed';
  flock($file,LOCK_UN ); // release lock - $semaphore->unlock();
}else{
  // file already locked
  echo 'LOCKED';
}
fclose($file); 
```

其次，让我们进行**数据库**锁定。一般来说，一些数据库可能有锁定单个表记录的机制，在这种情况下你应该使用这种机制。但其他数据库不支持该功能，例如 MySql。对于这种情况，让我们做一些魔术:)

例如我们有简单的表

```
 CREATE TABLE `threading` (
        `id` INT(10) NOT NULL AUTO_INCREMENT,
        `val` INT(10) NOT NULL,
        PRIMARY KEY (`id`)
    )COLLATE='utf8_general_ci'
    ENGINE=InnoDB 
```

让我们添加列，它将模拟“锁定”记录：

```
ALTER TABLE `threading`
    ADD COLUMN `_lock` BIT NOT NULL AFTER `val`; 
```

现在我们可以将 _lock fild 设置为 1 来锁定记录！

**重要提示**：您必须通过这样的单个查询来锁定：`update threading set _lock = 1 where id = 1 AND _lock <> 1 ;`.
注意：`AND _lock <> 1`防止记录在已经被锁定的情况下被锁定，这样可以通过rows_affected机制来解析记录是否被锁定。

```
<?php

// connect
mysql_connect('localhost','root','root');
mysql_selectdb('testing');

// get info
$res = mysql_query('select * from threading where id = 1;');
$row = mysql_fetch_assoc($res);

print_r($row); // debug

if($row['val']>=70){
  sleep(5); // emulate long-long operation =)

  // try to lock
  mysql_query('update threading set _lock = 1 where id = 1 AND _lock <> 1 ;'); // _lock <> 1 - very IMPORTANT!
  sleep(5); // emulate long-long operation =)
  $affected_rows = mysql_affected_rows();
  if($affected_rows!=1){  
    // lock failed -  locked by another instance
    echo '<br> LOCKED!';
  }else{
    // lock succeed
    mysql_query('update threading set val = val-70 where id = 1;');//something dangerous

    mysql_query('update threading set _lock = 0 where id = 1;'); // UNLOCK!
  }

}

// view result
$res = mysql_query('select * from threading where id = 1;');
$row2 = mysql_fetch_assoc($res);

echo '<br>';
print_r($row2);

// disconnect
mysql_close(); 
```

因此，测试非常简单——同时在不同的浏览器中运行文件。对于另一种类型的信号量，您应该使用其他逻辑和功能

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T07:27:18.560

[https://github.com/mpapec/simple-cache/blob/master/example3.php](https://github.com/mpapec/simple-cache/blob/master/example3.php)

```
require "SafeCache.class.php";

// get non blocking exclusive lock
$safe = new SafeCache("exclusive_lock_id");

if ( $safe->getExclusive() ) {
  print "we have exclusive lock now<br>";

  // ...

  print "releasing the lock<br>";
  $safe->doneExclusive();
} 
```

此外，请查看其他安全缓存生成示例。 [https://github.com/mpapec/simple-cache/blob/master/example1.php](https://github.com/mpapec/simple-cache/blob/master/example1.php)

# vb.net - SSRS 报告固定宽度和分栏

> ID：15680624
> 
> 赞同：0
> 
> 时间：2013-03-28T11:29:39.993
> 
> 标签：vb.net, visual-studio-2010, reporting-services, ssrs-2008, ssrs-tablix

我在我的报告中使用带有动态行和列的矩阵，当然更多的列意味着增加宽度，所以有什么方法可以在“N”个列之后有一个分栏符，这样我就可以保持报告宽度可在 A4 纸或我想要的任何尺寸上打印。

请记住，我关注了这个问题的答案： [限制 SSRS 矩阵报告中的列数](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/32f28407-e1ca-457e-92fd-d292e32dde4e/)

在 N 个列之后有一个分栏符，但它仅适用于固定行，动态行不会。

任何想法伙计们，感谢感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:45:02.493

当有更多列时，报告宽度会根据需要自动增加。当您进行打印时，它会自动将多余的列分到另一页上。对此，您真正可以控制的唯一设置是如果可能的话，请在一页上保持在一起，这在这种情况下不适用。CanGrow 选项不适用于列宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-15T08:03:54.940

您可以将矩阵包裹在List中，确保列表大于矩阵，调整好列表的大小。限制行数“=Ceiling(RowNumber(nothing)/x)” - 在这种情况下，它将限制动态列数如果列数超过x，它将下一行。请记住删除组设置内的排序。

# asp.net-mvc - MVC 4 剃刀文件上传

> ID：15680629
> 
> 赞同：254
> 
> 时间：2013-03-28T11:30:03.340
> 
> 标签：asp.net-mvc, file-upload

我是 MVC 4 的新手，我正在尝试在我的网站中实现文件上传控制。我找不到错误。我的文件中出现空值。

控制器：

```
public class UploadController : BaseController
    {
        public ActionResult UploadDocument()
        {
            return View();
        }

       [HttpPost]
       public ActionResult Upload(HttpPostedFileBase file)
       {
           if (file != null && file.ContentLength > 0)
           {
               var fileName = Path.GetFileName(file.FileName);
               var path = Path.Combine(Server.MapPath("~/Images/"), fileName);
               file.SaveAs(path);
           }

           return RedirectToAction("UploadDocument");
        }
    } 
```

看法：

```
@using (Html.BeginForm("Upload", "Upload", FormMethod.Post, new { enctype = "multipart/form-data" }))
{ 
    <input type="file" name="FileUpload" />
    <input type="submit" name="Submit" id="Submit" value="Upload" />
} 
```

* * *

## 回答 #1

> 赞同：345
> 
> 时间：2013-03-28T11:38:26.590

`Upload`方法的参数`HttpPostedFileBase`必须与`file input`.

所以只需将输入更改为：

```
<input type="file" name="file" /> 
```

此外，您可以在以下位置找到文件`Request.Files`：

```
[HttpPost]
public ActionResult Upload()
{
     if (Request.Files.Count > 0)
     {
         var file = Request.Files[0];

         if (file != null && file.ContentLength > 0)
         {
            var fileName = Path.GetFileName(file.FileName);
            var path = Path.Combine(Server.MapPath("~/Images/"), fileName);
            file.SaveAs(path);
         }
     }

     return RedirectToAction("UploadDocument");
 } 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2014-03-11T06:25:07.377

澄清它。模型：

```
public class ContactUsModel
{
    public string FirstName { get; set; }             
    public string LastName { get; set; }              
    public string Email { get; set; }                 
    public string Phone { get; set; }                 
    public HttpPostedFileBase attachment { get; set; } 
```

事后行动

```
public virtual ActionResult ContactUs(ContactUsModel Model)
{
 if (Model.attachment.HasFile())
 {
   //save the file

   //Send it as an attachment 
    Attachment messageAttachment = new Attachment(Model.attachment.InputStream,       Model.attachment.FileName);
  }
} 
```

最后是检查 hasFile 的 Extension 方法

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace AtlanticCMS.Web.Common
{
     public static class ExtensionMethods 
     {
         public static bool HasFile(this HttpPostedFileBase file)
         {
             return file != null && file.ContentLength > 0;
         }        
     }
 } 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-10-15T05:00:11.617

查看页面

```
@using (Html.BeginForm("ActionmethodName", "ControllerName", FormMethod.Post, new { id = "formid" }))
 { 
   <input type="file" name="file" />
   <input type="submit" value="Upload" class="save" id="btnid" />
 } 
```

脚本文件

```
$(document).on("click", "#btnid", function (event) {
        event.preventDefault();
        var fileOptions = {
            success: res,
            dataType: "json"
        }
        $("#formid").ajaxSubmit(fileOptions);
    }); 
```

在控制器中

```
 [HttpPost]
    public ActionResult UploadFile(HttpPostedFileBase file)
    {

    } 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-03-04T11:38:43.517

您只需要更改输入字段的名称，因为参数和输入字段名称中需要相同的名称只需替换此行您的代码工作正常

```
 <input type="file" name="file" /> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-07T10:29:19.650

我认为，更好的方法是在控制器或 API中使用*HttpPostedFileBase 。*在此之后，您可以简单地检测大小、类型等。

您可以在此处找到文件属性：

[MVC3如何检查HttpPostedFileBase是否是图像](https://stackoverflow.com/questions/12120135/mvc3-how-to-check-if-httppostedfilebase-is-an-image)

例如 ImageApi：

```
[HttpPost]
[Route("api/image")]  
public ActionResult Index(HttpPostedFileBase file)  
{  
    if (file != null && file.ContentLength > 0)  
        try 
        {  
            string path = Path.Combine(Server.MapPath("~/Images"),  
               Path.GetFileName(file.FileName));

            file.SaveAs(path);  
            ViewBag.Message = "Your message for success";  
        }  
        catch (Exception ex)  
        {  
            ViewBag.Message = "ERROR:" + ex.Message.ToString();  
        }  
    else 
    {  
        ViewBag.Message = "Please select file";  
    }  
    return View();  
} 
```

希望它有所帮助。

# asp.net-web-api - Web API 和 Unity IoC

> ID：15680636
> 
> 赞同：0
> 
> 时间：2013-03-28T11:30:28.710
> 
> 标签：asp.net-web-api, inversion-of-control, unity-container

我希望能够在我的 Unity 容器中为同一接口注册 2 个类。然后，我想根据一个参数选择当前的实现。

这是我的界面：

```
public interface ICheckService
{
    HttpResponseMessage Validate(string p1, string p2);
}
} 
```

我的服务：

```
public class CheckService1 : ICheckService
{
    public HttpResponseMessage Validate(string p1, string p2)
    {
      /////code
    }
}

public class CheckService2 : ICheckService
{
    public HttpResponseMessage Validate(string p1, string p2)
    {
        ////code
    }
} 
```

在 bootstraper.cs 我声明我的服务：

```
 `container.RegisterType<ICheckService, CheckService1>();`
        `container.RegisterType<ICheckService, CheckService2>();` 
```

我的 API 控制器：

```
public class ServiceController : ApiController
{
    private readonly ICheckService _checkService;

    public ServiceController(ICheckService checkService)
    {
        _checkService = checkService;
    }
    [HttpGet]
    public HttpResponseMessage Validate(string p1, string p2)
    {
        return _checkService.Validate(p1, p2);
    }
 } 
```

现在，当我调用我的 api 时，我想根据 p1 参数选择实现。

如果 p1 等于 Service1，则从 Service1 类调用 Validate 方法，如果 p1 等于 Service2，则从 Service2 类调用 validate 方法。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:33:34.500

You should use a factory and not the container for that. The factory implementation could request the proper implementation from the container internally (i.e. that's just an implementation detail and not nothing that the factory invoker should be aware of).

But the point is that using the IoC directly is not a good fit in your case.

```
public class ServiceController : ApiController
{
    private readonly ICheckServiceFactory _checkFactory;

    public ServiceController(ICheckServiceFactory factory)
    {
        _checkFactory = factory;
    }
    [HttpGet]
    public HttpResponseMessage Validate(string p1, string p2)
    {
        var service = _checkFactory.Create(p1);
        service.Validate(p1, p2);
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-10T16:55:45.730

在您的情况下，CheckService1 和 CheckService2 是验证的实现类/详细信息。您可以创建一个 CheckServiceFactory，它可以在运行时为您创建这些类。注册工厂类而不是实现类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-10T17:49:46.937

另一种选择是使用策略模式。一个类将充当检查服务的工厂。工厂类将初始化 ICheckServices 的字典。工厂（ICheckServiceFactory）将使用选择的 IoC 容器进行注册：

```
public interface ICheckServiceFactory
{
    string Validate(string validationStrategy, string stringToValidate);
}

public class CheckServiceFactory : ICheckServiceFactory
{
    private readonly Dictionary<string, ICheckService> _checkServices;

    public CheckServiceFactory()
    {
        _checkServices = new Dictionary<string, ICheckService>
        {
            {"cash", new CheckService1()},
            {"card", new CheckService2()}
        };
    }

    public string Validate(string validationStrategy, string stringToValidate)
    {
        return  $"Parameter '{stringToValidate}' is Valid equal {_checkServices[validationStrategy].Validate(stringToValidate)} using {_checkServices[validationStrategy].CheckType}";
    }
} 
```

每个检查服务都实现了 ICheckServices：

```
public interface ICheckService
{
    string CheckType { get; }

    bool Validate(string validateMe);
}

public class CheckService2 : ICheckService
{
    public string CheckType { get; }

    public CheckService2()
    {
        CheckType = "CheckService2";
    }

    public bool Validate(string validateMe)
    {
        return true;
    }
}

public class CheckService1 : ICheckService
{
    public string CheckType { get; }

    public CheckService1()
    {
        CheckType = "CheckService1";
    }

    public bool Validate(string validateMe)
    {
        return true;
    }
} 
```

因此，您的服务控制器将类似于您最初希望的样子：

```
public class ServiceController : ApiController
{
    private readonly ICheckServiceFactory _checkServiceFactory;

    public ServiceController(ICheckServiceFactory factory)
    {
        _checkServiceFactory = factory;
    }
    [HttpGet]
    public HttpResponseMessage Validate(string p1, string p2)
    {
        return _checkServiceFactory.Validate(p1, p2);
    }
} 
```

# performance - 如何最小化创建 WCF 客户端的开销？

> ID：15680638
> 
> 赞同：0
> 
> 时间：2013-03-28T11:30:38.487
> 
> 标签：performance, wcf

我目前有以下代码：

```
 public static ICmsDataServiceWcf Data
    {
        get
        {
            if (HttpContext.Current != null && HttpContext.Current.Session != null && HttpContext.Current.Session["DataSevice"] == null)
            {
                HttpContext.Current.Session.Add("DataService", GetDataService());
            }

            if (HttpContext.Current != null && HttpContext.Current.Session != null && HttpContext.Current.Session["DataSevice"] != null)
            {
                return (ICmsDataServiceWcf)HttpContext.Current.Session["DataService"];
            }
            return GetDataService();
        }
    } 
```

这样做的目的是最大限度地减少创建/销毁 WCF 客户端所涉及的开销。它似乎工作得很好。我遇到的一个问题是相当多的请求来自后台的任务。这些显然没有上下文，因此落入返回 GetDataService() 行。

我想做的是创建 WCF 客户端的静态实例并返回它。不过，这种方法让我担心的一件事是，许多任务将通过单个实例发出大量请求。这最终会成为瓶颈吗？如果是这样，那么创建一个由 10 个 WCF 客户端组成的池来分散负载可能是一个更好的主意吗？

谢谢，

乔

# highcharts - Highstock 制作一个有条件的工具提示

> ID：15680641
> 
> 赞同：1
> 
> 时间：2013-03-28T11:30:43.677
> 
> 标签：highcharts, highstock

我试过但没有运气。

如何使用格式化程序制作条件工具提示？我的图表上有 3 条线（超过 3k 点），有一条线只是 0 或 1，就像 0 = Off 和 1 = On。

我想在 1 和 0 的工具提示 On 和 Off 上显示。

问题是，每个系列都有一个个人工具提示来显示小数和后缀。我尝试在那里使用格式化程序，但它根本不起作用。

我试过

```
tooltip: {
    valueSuffix: ' ',
            yDecimals: 0,

                formatter: function() {
                    var s = this.y;

                    if (s == 1)
                        {
                            s = "ON";
                        }
                    else
                        {
                            s = "OFF";
                        }

                    return s;
                }                   
} 
```

我可以做任何事情，比如写“return '4'”，但不起作用。

格式化程序仅适用于默认工具提示:(

对此有什么建议吗？

示例：http: [//jsfiddle.net/cvXZ9/](http://jsfiddle.net/cvXZ9/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:35:30.867

请看一个简单的例子，它是如何工作的。

[http://jsfiddle.net/q5eP3/](http://jsfiddle.net/q5eP3/)

```
 tooltip:{
            formatter:function(){

                if(this.point.y == 0)
                    return 'ON'
                else
                    return 'OFF'

            }
        }, 
```

# android - Android在取消后重新启动计时器

> ID：15680642
> 
> 赞同：15
> 
> 时间：2013-03-28T11:30:46.900
> 
> 标签：android, timer, android-asynctask

我的应用程序中有一个计时器，它每 15 秒启动一个 AsyncTask。

```
Timer timer = new Timer();

public void AsynchTaskTimer() {
    final Handler handler = new Handler();

    TimerTask timertask = new TimerTask() {
        @Override
        public void run() {
            handler.post(new Runnable() {
                public void run() {
                    try {
                        new updateGPSTask().execute();
                    } catch (Exception e) {
                        // TODO Auto-generated catch block
                    }
                }
            });
        }
    };
    timer.schedule(timertask, 0, 15000); // execute in every 15sec
} 
```

这是从`onCreate()`方法启动的。

当我调用另一个活动时，我需要取消这个计时器，我在我的主活动中的方法上使用`timer.cancel()`了这个计时器。`onPause()`

现在，当我返回主活动时，我需要重新启动计时器。我尝试重新启动`AsynchTaskTimer()`in`onRestart()`方法，但我得到了一个`java.lang.IllegalStateException: Timer was canceled`.

如何重新启动计时器？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-28T11:34:08.953

尝试使用：

```
public void AsynchTaskTimer() {
    final Handler handler = new Handler();

    TimerTask timertask = new TimerTask() {
        @Override
        public void run() {
            handler.post(new Runnable() {
                public void run() {
                    try {
                        new updateGPSTask().execute();
                    } catch (Exception e) {
                        // TODO Auto-generated catch block
                    }
                }
            });
        }
    };
    timer = new Timer(); //This is new
    timer.schedule(timertask, 0, 15000); // execute in every 15sec
    } 
```

通过使用它，您可以再次将内存分配给 Timer 并启动它 AFAIK。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-28T11:34:16.077

那么关于**cancel()**方法的文档是怎么说的：

> 请注意，从重复计时器任务的 run 方法中调用此方法绝对保证计时器任务不会再次运行。

这意味着如果您一旦取消（）计时器，您将无法再次运行它。您需要创建 Timer 的新实例，例如在[`onResume()`](http://developer.android.com/reference/android/app/Activity.html#onResume())方法中如果您想再次运行它。

```
@Override
public void onResume() {
   super.onResume();
   // intialise new instance of Timer
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T11:43:23.663

`TimerTask`您可以将代码（用于更新 GPS）移动到[服务](http://developer.android.com/guide/components/services.html)，而不是使用。我认为这更好。你可以打电话[`startService()`](http://developer.android.com/reference/android/content/Context.html#startService%28android.content.Intent%29)进来。请注意，服务在主 UI 线程上运行，因此请确保避免在您的 GPS 更新程序任务中使用。`onCreate()`[`stopService()`](http://developer.android.com/reference/android/content/Context.html#stopService%28android.content.Intent%29)`onDestroy()`[`NetworkOnMainThreadException`](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

# facebook - 无法在 Facebook 页面上分享 URL

> ID：15680643
> 
> 赞同：0
> 
> 时间：2013-03-28T11:30:47.780
> 
> 标签：facebook, dotnetnuke

几天前，此功能运行良好，但是从昨天开始，我似乎无法再将博客的 URL 添加到我的 Facebook 页面。

这是我想在我的 Facebook 页面上分享的 URL：http: [//www.summerfestivalguide.co.uk/Festival_News/EntryId/1303/The-Rolling-Stones-Arctic-Monkeys-Mumford-Sons-to-headline -格拉斯顿伯里.aspx](http://www.summerfestivalguide.co.uk/Festival_News/EntryId/1303/The-Rolling-Stones-Arctic-Monkeys-Mumford-Sons-to-headline-Glastonbury.aspx)

你能看出这个 URL 有什么根本性的错误吗？你知道为什么 FB 不接受它吗？

我也在 Facebook 调试器中尝试过，但它似乎超时了。

我的网站是在 DotNetNuke 中构建的，并且正在使用 DNN 博客模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:12:56.363

最后将 DNN 博客模块迁移到 Ventrian 新闻文章模块，在我看来这是一个更好的博客模块。迁移后，现在一切似乎都正常了。

# c# - 如何获取图像的名称

> ID：15680645
> 
> 赞同：-3
> 
> 时间：2013-03-28T11:30:52.943
> 
> 标签：c#, .net, image, image-processing

我正在使用 Aforge.net 示例，我想获取放置在资源上的图像的名称。我无法这样做，因为 image.tag 出现错误。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:35:21.410

您可以使用 Uri 类加载路径并从 Segments 集合中提取图像名称：

```
Uri uri = new Uri("http://www.XXXX.com/imageName.jpg");
string fileName = uri.Segments.Last(); 
```

编辑

让我们看看这个答案：如果你喜欢它？

[C#如何从图片框中获取位图](https://stackoverflow.com/questions/6996987/c-sharp-how-to-get-a-bitmap-from-a-picturebox)

[获取位图文件名](https://stackoverflow.com/questions/10054136/c-sharp-get-bitmap-file-name)

新编辑

```
System.IO.FileInfo info = new System.IO.FileInfo(Properties.Resources.Stop);
string fileName = info.Name; 
```

# java - 如果响应未在 java 中返回，如何跳过循环

> ID：15680658
> 
> 赞同：2
> 
> 时间：2013-03-28T11:31:23.790
> 
> 标签：java

我的问题是说我的方法`getAllVendorDetails()`将调用另一个方法`getVendordetailsById(int id)`，如果该方法`getVendordetailsById()`在指定时间（如 30 秒）内没有返回响应/答案，我需要移动到下一个供应商或跳过执行并向用户显示错误消息。我们如何在 Java 中实现这个结果。我尝试了下面的代码，但它不起作用。在它进入 之后`getVendordetailsById()`，它没有返回。

公共类测试{

```
public static void main(String[] args) {
    long currentTime=System.currentTimeMillis();
    Date date=new Date(currentTime);
    date.setSeconds(date.getSeconds()+30);
    long end=date.getTime();
    System.out.println("Time="+(end-currentTime));

    List<Integer> vendorId= new ArrayList<Integer>();
    for (int i = 1; i <= 100000; i++) {
        vendorId.add(i);
    }
    boolean isSuccess=false;
    boolean flag=true;

    while(end>System.currentTimeMillis()){

        if(flag){
            flag=false;
            for (int i = 0; i < vendorId.size() && end>System.currentTimeMillis() ; i++) {
                getVendordetailsById(vendorId.get(i));
                isSuccess=true;
            }
        }
        System.out.println("bye");
    }

    if(isSuccess){
        System.out.println("Success");
    }else{
        System.out.println("Errorr");
    }

    System.out.println("Current time="+System.currentTimeMillis());
}

private static void getVendordetailsById(Integer id) {
    System.out.println("vendor number="+id);
    int a=0;
    for (int i = 1; i <= 1000; i++) {
        a=a+i;
    }

    System.out.println("Current value of a="+a);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:36:35.733

您可以使用 java.util.concurrent.Future 来解决您的问题。

首先，您需要使用 java.util.concurrent.Executors 创建一个执行器来提交您未来的工作

如

```
 //suggest that use it out of the loop
   //or in the static field
   java.util.concurrent.ExecutorService es = java.util.concurrent.Executors.newFixedThreadPool(1);
   //...in the loop
   Future<Object> future = es.submit(new Callable<Object>{
       public Object call(){
           getVendordetailsById 
       }
   });
   try{
      Object result = future.get(30, TimeUnit.SECONDS);
   }cache(TimeoutException te){
     break;
   }cache(Exception te){
      //other exception handler
   } 
```

# c# - json 到对象，我的对象应该是怎样的？

> ID：15680662
> 
> 赞同：2
> 
> 时间：2013-03-28T11:31:39.027
> 
> 标签：c#, .net, json, json.net

我有一个这样的json字符串

```
{ "class": "go.GraphLinksModel",
  "nodeDataArray": [ {"key":"CTR:2", "type":"Controller", "devicename":"ACU-1K", "imageUrl":"../../../../Images/ComputerSpeaker_32.png", "loc":"295 97"} ],
  "linkDataArray": [  ]} 
```

我创建了一个这样的类

```
public class FloorplanItem
{
    public string Class { get; set; }
    public string[] NodeDataArray { get; set; }
    public string[] LinkDataArray { get; set; }        
} 
```

我正在使用 newtonsoft.json 将 json 反序列化为一个对象，但我遇到了一些错误

```
JsonConvert.DeserializeObject<FloorplanItem>(json) 
```

错误信息：

```
{"Error reading string. Unexpected token: StartObject. Path 'nodeDataArray[0]', line 2, position 23."} 
```

我对 json 还是很陌生，所以如果这是微不足道的，请原谅我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:34:00.103

使用[http://json2csharp.com/](http://json2csharp.com/)。在那里复制json，您将获得以下类：

```
public class NodeDataArray
{
    public string key { get; set; }
    public string type { get; set; }
    public string devicename { get; set; }
    public string imageUrl { get; set; }
    public string loc { get; set; }
}

public class RootObject
{
    public string @class { get; set; }
    public List<NodeDataArray> nodeDataArray { get; set; }
    public List<object> linkDataArray { get; set; }
} 
```

上述类将与[Json.NET兼容](http://json.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:00:20.710

**您`NodeDataArray`被定义为一个字符串数组，而您的 JSON 文档清楚地将其定义为一个对象。**

此外，使用[Web Essentials 2012](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)，您可以执行名为*Paste JSON As Classes*的特殊粘贴，它将为您生成所需的 CLR 类：

![将 JSON 粘贴为类](../Images/065336ad645b4df4eb908d2c10d5fde5.png)

```
public class FloorplanItem
{
    public string Class { get; set; }
    public NodeDataArray[] NodeDataArray { get; set; }
    public object[] LinkDataArray { get; set; }
}

public class NodeDataArray
{
    public string Key { get; set; }
    public string Type { get; set; }
    public string DeviceName { get; set; }
    public string ImageUrl { get; set; }
    public string Loc { get; set; }
} 
```

反序列化似乎工作得很好（注意我已经修复了属性名称以遵守通用命名准则）。

![手表](../Images/9da4b6ba5d8c904f0c1da737e4d0659d.png)

# java - com.sun.xml.bind.v2.runtime.IllegalAnnotationsException：2 个 IllegalAnnotationExceptions 计数

> ID：15680663
> 
> 赞同：2
> 
> 时间：2013-03-28T11:31:40.187
> 
> 标签：java, web-services, jaxb, cxf

我的 apache cxf 客户端 Web 服务出现异常，如下所示。但是，“XML 类型名称“地址””是我的 WSDL 的soap:address 位置。问题是什么？

```
Caused by: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 2 counts of IllegalAnnotationExceptions
Two classes have the same XML type name "address". Use @XmlType.name and @XmlType.namespace to assign different names to them.
    this problem is related to the following location:
        at com.sun.xml.ws.developer.MemberSubmissionEndpointReference$Address
        at public com.sun.xml.ws.developer.MemberSubmissionEndpointReference$Address com.sun.xml.ws.developer.MemberSubmissionEndpointReference.addr
        at com.sun.xml.ws.developer.MemberSubmissionEndpointReference
    this problem is related to the following location:
        at javax.xml.ws.wsaddressing.W3CEndpointReference$Address
        at private javax.xml.ws.wsaddressing.W3CEndpointReference$Address javax.xml.ws.wsaddressing.W3CEndpointReference.address
        at javax.xml.ws.wsaddressing.W3CEndpointReference
Two classes have the same XML type name "elements". Use @XmlType.name and @XmlType.namespace to assign different names to them.
    this problem is related to the following location:
        at com.sun.xml.ws.developer.MemberSubmissionEndpointReference$Elements
        at public com.sun.xml.ws.developer.MemberSubmissionEndpointReference$Elements com.sun.xml.ws.developer.MemberSubmissionEndpointReference.referenceProperties
        at com.sun.xml.ws.developer.MemberSubmissionEndpointReference
    this problem is related to the following location:
        at javax.xml.ws.wsaddressing.W3CEndpointReference$Elements
        at private javax.xml.ws.wsaddressing.W3CEndpointReference$Elements javax.xml.ws.wsaddressing.W3CEndpointReference.referenceParameters
        at javax.xml.ws.wsaddressing.W3CEndpointReference 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-15T13:25:39.890

这很有趣。这不是一个完整的答案，但这可能会有所帮助。

该类`com.sun.xml.ws.developer.MemberSubmissionEndpointReference.Address`没有注释，也没有`package-info.java`. 所以类型应该是命名的`address`，没有命名空间。

该类`javax.xml.ws.wsaddressing.W3CEndpointReference.Address`也没有注释，但是有一个`package-info.java`：

```
@javax.xml.bind.annotation.XmlSchema(namespace=W3CEndpointReference.NS,
                                     location="http://www.w3.org/2006/03/addressing/ws-addr.xsd")
package javax.xml.ws.wsaddressing; 
```

所以应该命名为`{http://www.w3.org/2005/08/addressing:address`. 所以理论上应该没有冲突。

我建议如下：

*   检查你的类和包。
    *   你有`package-info.java`入`javax.xml.ws.wsaddressing`吗？
    *   你有一个`com.sun.xml.ws.developer`吗？
*   尝试更新库的版本。也许这是版本之间的临时故障。

**更新**

[我在 java.net 上](https://www.java.net/node/685468)发现了完全相同的问题。那里发布的解决方案之一基本上是“更新您的版本”。似乎也以某种方式与 NetBeans 相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-29T14:15:03.083

我遇到了完全相同的问题。**这不是一个解决方案，而是一种解决方法**。

首先，我构建客户端所基于的 wsdl 是一个自动生成的 wsdl。这种类型的 wsdls 通常包含多个 shema，就像在我的例子中一样（4 个模式）。我并不是说这是错误的，但在我的情况下，我所做的是删除最后 3 个模式并将第一个模式中的所有元素连同所需要的内容一起移动（命名空间的更改等）。完成此操作后，我再次构建了我的客户端并解决了错误。

# angularjs - ng-class 未应用

> ID：15680667
> 
> 赞同：26
> 
> 时间：2013-03-28T11:31:45.527
> 
> 标签：angularjs, ng-class

我有一个文本区域，其中包含要发布的消息和一个仍然可用字符数的范围。

```
<textarea name="" cols="" rows="" maxLength="{{maxMessageLength}}" ng-model="messageText"/>
<div id="chatmessage-buttons">              
    <a ng-click="sendMessage()"><span>Invia</span></a>
<span ng-class="{message-length-alert: (messageText.length > messageLengthAlertTreshold), message-length: true}">{{maxMessageLength - messageText.length}}</span>
</div> 
```

`messageText`,`maxMessageLength`并且`messageLengthAlertTreshold`都在 中定义，`$scope`当我在 textarea 中插入文本时，跨度内的计数器会正确更新，从而更改`messageText.length`.

但是，`message-length`无论.`message-length-alert``messageText`

我还尝试删除检查以`message-length-alert`将 ng-class 属性保留为 just `{message-length: true}`，但无论如何它都没有应用。

我错过了什么？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-03-28T11:44:54.163

尝试将类名括在引号中。代替：

```
ng-class="{message-length-alert: (messageText.length > messageLengthAlertTreshold), message-length: true} 
```

尝试：

```
ng-class="{'message-length-alert': (messageText.length > messageLengthAlertTreshold), 'message-length': true} 
```

这是因为哈希键必须是字符串或类似变量的名称。

# map - 如何使用Hashtable转换map、tree map、entry set

> ID：15680669
> 
> 赞同：0
> 
> 时间：2013-03-28T11:31:51.587
> 
> 标签：map, java-me, hashtable, treemap

我完全不知道 JavaME。请告诉我如何使用 Hashtable 转换这段代码，因为 java ME 中没有映射、树映射和条目集概念。

```
Map<String, String> m = new TreeMap<String, String>(); // need to convert this line

        for (int i = 0; i < SignatureKey.size(); i++)
        {
            m.put(SignatureKey.elementAt(i),SignatureValue.elementAt(i));
        }           

    //STEP 5 Formation of parameter string
    StringBuffer Parameter = new StringBuffer();
    for (Map.Entry<String,String> entry : m.entrySet())// need to conver this line

    {
        Parameter.append(entry.getKey());
        if(entry.getValue()!=null)
        {
            Parameter.append("=");
            Parameter.append(entry.getValue());             
        }
        Parameter.append("&");      
    } 
```

提前致谢， ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:15:07.273

正如和[`TreeMap`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/TreeMap.html)不是一样，您将失去自动排序，但从代码片段来看，这可能不是问题。以下是 Java ME 版本。`SortedMap``Hashtable`

```
 Hashtable m = new Hashtable();

    for (int i = 0; i < SignatureKey.size(); i++) {
        m.put(SignatureKey.elementAt(i), SignatureValue.elementAt(i));
    }

    // STEP 5 Formation of parameter string
    StringBuffer Parameter = new StringBuffer();
    Enumeration keys = m.keys();
    while (keys.hasMoreElements()) {
        String key = (String) keys.nextElement();
        String value = (String) m.get(key);

        Parameter.append(key);
        if (value != null) {
            Parameter.append("=");
            Parameter.append(value);
        }
        Parameter.append("&");
    } 
```

# entity-framework - 对嵌套关联进行排序

> ID：15680673
> 
> 赞同：0
> 
> 时间：2013-03-28T11:32:06.723
> 
> 标签：entity-framework

我的数据库

```
[ Departement ] *-* [ Group ] 1-* [ Room ] 
```

一个部门可以有很多组（很多 - 很多），一个组可以有很多房间

我想返回`departement`具有特定 ID 的，获取 group.name 上的`groups`订单并`rooms`从按 room.number 排序的组中获取

到目前为止我所拥有的

```
db.Departement .Include("Group.Room").ToList().First(a => a.Id == idDepartement); 
```

问题是我不知道如何对关联（组和房间）进行排序

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:44:59.423

如果输入`x`是一个`IEnumerable<Department>`然后：

```
x.SelectMany(d => d.Group).OrderBy(g => g.Name) 
```

将导致`IEnumerable<Group>`按名称排序（跨所有部门）。[`Enumerable.SelectMany`](http://msdn.microsoft.com/en-us/library/bb345618.aspx)接受 a`Func<TIn, IEnumerable<TOut>>`并将所有返回的枚举合并为一个枚举；这允许您跟踪从一个或多个起始对象到许多关联对象的关联。

> 想要返回具有特定 ID 的部门 [...] 从按 room.number 排序的组中获取房间

您希望结果是部门、组或房间的集合吗？

> `.ToList().`

这意味着您将从实体源获取所有部门及其所有组和房间，并将它们移动到本地内存中，然后丢弃大部分数据（所有数据都与第一个返回的部门无关）。除非数据相当小，否则最好在实体源（假设是数据库服务器）上执行此操作，而不是浪费时间和带宽在本地复制它。

# php - 如何使 php 在 wordpress 上工作？

> ID：15680680
> 
> 赞同：2
> 
> 时间：2013-03-28T11:32:54.497
> 
> 标签：php, wordpress

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T07:59:28.563

我认为直接在 Post Entry 字段中使用 PHP 代码不是最好的主意。相反，您可以执行以下操作：

复制 page.php 并将其重命名为 page-custom.php

打开 page-custom.php 并替换它：

```
 * The template for displaying all pages. 
```

具有以下内容：

```
* Template Name: Custom Template Justin 
```

您刚刚制作了一个自定义模板。您可以在 page-custom.php 中输入您希望稍后显示的 PHP 代码。

现在...当您从 Wordpress 管理员创建或编辑页面时，您将在右侧看到选项**Template**，从下拉列表中选择*Custom Template Justin*并查看您的页面。

您的 PHP 代码应该在那里执行。

# css - IE8 drill (make transparent) text in submenu

> ID：15680682
> 
> 赞同：1
> 
> 时间：2013-03-28T11:33:12.440
> 
> 标签：css, internet-explorer-8

I have a huge problem with a child template that I make using skeleton wp framework. the website works well on FF and chrome but (obviusly) doesn't work in IE8.

Or better it work but I have a problem with the sub menu that looks like this in IE: ![IE view](../Images/6dfaa42880f976c4203eb0c3c06d8019.png)

While it shoud look like this:

![FF view](../Images/d4a49cfcb6e123f0694e1d0e524affe8.png)

The css menu code is this:

```
 /* MENU DI NAVIGAZIONE
================================================== */

.band.navigation {
    background-color: #EEEFEF;

    background: -moz-linear-gradient(top,  #eeefef 0%, #dddddd 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#eeefef), color-stop(100%,#dddddd)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #eeefef 0%,#dddddd 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #eeefef 0%,#dddddd 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #eeefef 0%,#dddddd 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #eeefef 0%,#dddddd 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeefef', endColorstr='#dddddd',GradientType=0 ); /* IE6-9 */
}

nav.primario ul, nav ul li {
    margin: 0;
}

nav.primario ul li {
    display: inline;
    float: left;
    position: relative;
}

nav.primario ul li a {
    display: inline-block;
    line-height: 49px;
    color: #424242;
    text-decoration: none;
    letter-spacing: 0.08em;
    /*font-weight: bold;*/
    padding: 0 14px;

    text-shadow: 0.05em 0.05em 0.1em rgba(0,0,0, 0.5);
}

nav.primario ul li a:hover{
    background-color: #afd3db;
    cursor: pointer;
    border-radius: 10px;
    color: #fff;

    background: -moz-linear-gradient(top,  #4b9bae 0%, #418697 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#4b9bae), color-stop(100%,#418697)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #4b9bae 0%,#418697 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #4b9bae 0%,#418697 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #4b9bae 0%,#418697 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #4b9bae 0%,#418697 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4b9bae', endColorstr='#418697',GradientType=0 ); /* IE6-9 */

    -webkit-transition: .5s ease-out;
    -moz-transition: .5s ease-out;
    -o-transition: .5s ease-out;
    -ms-transition: .5s ease-out;
    transition: .5s ease-out;
}

/*Menu a tendina per dispositivi mobili nascosto*/
nav.primario select {
    display: none;
    width: 100%;
    height: 28px;
    margin: 21px 0;
}

/*SOTTO MENU*/
nav.primario ul ul{
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
    opacity: 0;

    position: absolute;
    z-index: 999; /*Per farlo apparire sopra il menu*/
    background: #DDDDDD;
    width: 200%;
    min-width: 100%;
    /*Nascondere il menu se non avviene il passaggio del mouse*/
    height: 0px; 
    overflow: hidden;

    -webkit-transition: .5s ease-out;
    -moz-transition: .5s ease-out;
    -o-transition: .5s ease-out;
    -ms-transition: .5s ease-out;
    transition: .5s ease-out;

    -webkit-box-shadow: 2px 2px 2px rgba(0,0,0,0.3);
    box-shadow: 2px 2px 2px rgba(0,0,0,0.3);
}

/*Hover state al menu*/
nav.primario ul li:hover ul {
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=1000)";
    filter: alpha(opacity=1000);
    opacity: 10;

    height: auto;
    overflow: auto;
}

nav.primario ul ul li{
    float: none;
    display: list-item;
}

nav.primario ul ul li a{
    display: block;
    line-height: 35px;
    text-decoration: none;
}

/*fissare il colore al menu principale quando l'hover è attivo nel sottomenu*/
nav.primario ul li:hover > a {
    background-color: #afd3db;
    border-radius: 10px;
} 
```

Please I've try anything but I can't figure out how I can make that submenu look decent on IE... Thanks a lot in advace to all the community

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:36:41.820

```
.band.navigation { 
    background: #EEEFEF; 
    background: -moz-linear-gradient(top,  #eeefef 0%, #dddddd 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#eeefef), color-stop(100%,#dddddd)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #eeefef 0%,#dddddd 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #eeefef 0%,#dddddd 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #eeefef 0%,#dddddd 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #eeefef 0%,#dddddd 100%); /* W3C */
} 
```

不要使用`filter:`它会使 ie 渲染速度变慢，而且不值得。

这应该解决它

# php - preprocessing data for d3.js

> ID：15680685
> 
> 赞同：1
> 
> 时间：2013-03-28T11:33:26.943
> 
> 标签：php, django, d3.js

There are many occasions, where I have just a few data points to be visualized via d3.js. In these cases I thougt it makes sense to send these datapoints already in the main static request, rather than loading them dynamically via ajax later.

This means, i would save the data in a javascript variable like this

```
var data = ... ; 
```

Most of the basic examples of d3.js depend on a data structure like this:

```
{[  
    {"key1" : "val11", "key2" : "val21"},
    {"key1" : "val12", "key2" : "val22"},
    ...
]} 
```

because in each function for processing the data/labels, d3 uses the `.`-notation

```
function(d){return d.key1;} 
```

I achieve this structure by modifying the basic d3.js examples by removing the

```
d3.tsv("data.tsv", function(error, data) {}); 
```

loop, because my data is already in the dom.

The question is now:

**How can use template languages to make sure, that the data is in the appropriate format?**

## Example PhP

My use case on server side is, that I generate an array with values like this:

```
$dbresult = dbqueryfunction();
$respone = array();
foreach($dbresult as $key => $value){
    if(!array_key_exists($value->column1,$response))
        $response[$value->column1] = 0;
    $response[$value->column1] += someMath($value->column2); 
```

which is a grouping over column1\. To output this I do

```
var data = <?php echo json_encode($response); ?> ; 
```

But this means, that I have to iterate over the data once again on client side, to achieve the desired structure (for example with jQuery):

```
var dataJS = new Array();
$.each(dataPHP, function(phpKeys, phpVals){
    dataJS.push({"key1" phpKeys: , "key2" : phpVals});
}) 
```

## Example Django

In Django the problem is different, because the response ist sent in a dictionary, not in an array:

```
response = defaultdict(int)
dbresult = stats.SomeModule.objects.all()
for val in dbresult:
    response[val.c1] += someMath(val.c2) 
```

This means, that I either use

```
return render(request, "someTemplate.html" , {"data" :  repr(response)}) 
```

and in the template

```
 {% autoescape off %}
var data = {{ data }};
{% endautoescape %} 
```

or I use

```
return render(request, "someTemplate.html" , {"data" :  response}) 
```

and in the template again

```
var data = {"content": [
        {% for di,value in data %}
             {"key1": "{{ di }}", "key2": "{{ value }}" },
         {% endfor %}           
        ]
    };
data = data.content; 
```

So as you can see, I tried many things and am still not sure: What is the best way to proceed to achieve the d3.js standard desired data structure?

EDIT:

I also thought about using d3.js functions differently, since one has `function(d,i){};` as well, one could always use the index to access data like:

```
function(d,i){return data.key1[i];} 
```

or is this a bad style?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:33:33.650

如果你只是从模型中获取一些数据，你可以做这样的事情。

# 看法

```
import json

def view(request):

    stats = stats.SomeModule.objects.all().values("id","value")
    # returns a list of dicts => [{"id":__,"value":__},...]

    return render(request, "someTemplate.html" , {"data": json.dumps(stats)}) 
```

# 模板

```
<script>var data = {{ data|safe }}</script> 
```

# refactoring - 抑制字符串中的 resharper 重命名

> ID：15680686
> 
> 赞同：3
> 
> 时间：2013-03-28T11:33:28.573
> 
> 标签：refactoring, resharper

有什么方法可以抑制文件中 Ctr+R、Ctr+R 之后的重命名字符串，类似于：

```
// ReSharper disable InconsistentNaming
private readonly IMyClass NONStandardConvension;
// ReSharper restore InconsistentNaming 
```

但使用如下代码：

```
 [Test]
    public void TestIfNameNotChanged()
    {
        // ReSharper disable ??refactoring??
        var className = typeof (MyClass).Name;
        Assert.AreEqual("MyClass", className);
        // ReSharper restore ??refactoring??
    } 
```

我想测试我的脚本在应用意外重构后是否会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T14:28:46.997

显然，当前 Resharper 版本（7.1.3）中没有这样的功能。[但是，如果您喜欢它，您可以对 Resharper问题跟踪器](http://youtrack.jetbrains.com/issue/RSRP-350720)进行投票。

# jquery - fade image into page on load

> ID：15680691
> 
> 赞同：0
> 
> 时间：2013-03-28T11:33:50.700
> 
> 标签：jquery, fade, pageload

Basically I've been asked to make a website with a logo image fading in before displaying the page ( say 4 seconds display).

From what I can see the best way to do this will be using jQuery. I've seen othe examples where a page fades in after all images are loaded, but how can i do this by specifying an amount of time.

**To Sum up:**

Want to load image in full screen with loading page slightly visible behind (lightbox efect), then fade into fully loaded site content after 4 seconds, regardless of whether the page is loaded or not.

How can I do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:47:57.370

用于`setTimeout`延迟和呼叫`fadeIn`和`fadeOut`

尝试这个

```
$(window).load(function(){
   $('#imageID').fadeIn('slow',function(){
         setTimeout(function(){
            $(this).fadeOut('slow') // $('#imageID')".fadeOut('slow',
         },4000);
   })
}); 
```

你可以使用模态来显示像灯箱效果的标志......并打开和关闭liekwise......

模态链接..

[带有 true 的简单模态](http://www.ericmmartin.com/projects/simplemodal/)
[jquery 对话框](http://jqueryui.com/dialog/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:50:04.803

您可以使用绝对定位在页面上的 div 标签开始页面，宽度和高度为 100%，然后使用 jquery 来“动画化”这个 div 的不透明度，直到到达几乎看不到它的位置，然后隐藏分区。

```
<html>
  ..... header content where javascript and what not goes
  <body>
    <div id='introdiv' style="position:absolute;z-index:9999;width:100%;height:100%;">
      .... image goes here
    </div>
    .... other page content goes here. 
```

使用 jQuery Animate，你只需 $("#introdiv").animate({......

您必须找到一种方法来确保 div 标签在所有其他请求中都保持隐藏状态，否则您的图像每次都会显示。

如果要在页面加载之前显示图像，请将动画放在 jQuery 的 document.ready 函数中。

# android - outofmemoryerror toString("UTF-8") ByteArrayOutputStream in android

> ID：15680694
> 
> 赞同：1
> 
> 时间：2013-03-28T11:33:55.433
> 
> 标签：android, out-of-memory

Here is the log:

```
03-28 19:12:29.083: E/AndroidRuntime(22004): FATAL EXCEPTION: AsyncTask #5
03-28 19:12:29.083: E/AndroidRuntime(22004): java.lang.RuntimeException: An error occured while executing doInBackground()
03-28 19:12:29.083: E/AndroidRuntime(22004):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
03-28 19:12:29.083: E/AndroidRuntime(22004):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
03-28 19:12:29.083: E/AndroidRuntime(22004):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
03-28 19:12:29.083: E/AndroidRuntime(22004):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
03-28 19:12:29.083: E/AndroidRuntime(22004):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-28 19:12:29.083: E/AndroidRuntime(22004):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-28 19:12:29.083: E/AndroidRuntime(22004):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-28 19:12:29.083: E/AndroidRuntime(22004):    at java.lang.Thread.run(Thread.java:856)
03-28 19:12:29.083: E/AndroidRuntime(22004): Caused by: java.lang.OutOfMemoryError
03-28 19:12:29.083: E/AndroidRuntime(22004):    at java.lang.String.<init>(String.java:364)
03-28 19:12:29.083: E/AndroidRuntime(22004):    at java.lang.String.<init>(String.java:223)
03-28 19:12:29.083: E/AndroidRuntime(22004):    at java.io.ByteArrayOutputStream.toString(ByteArrayOutputStream.java:175)
03-28 19:12:29.083: E/AndroidRuntime(22004):    at com.vtube.data.YoutubeAPI.doGetRequest(YoutubeAPI.java:71)
03-28 19:12:29.083: E/AndroidRuntime(22004):    at com.vtube.data.YoutubeAPI.getPopular(YoutubeAPI.java:86)
03-28 19:12:29.083: E/AndroidRuntime(22004):    at com.vtube.data.YoutubeAPI.getPopularEntry(YoutubeAPI.java:97)
03-28 19:12:29.083: E/AndroidRuntime(22004):    at com.vtube.app.BaseFourActivity$PageZeroRefreshTask.doInBackground(BaseFourActivity.java:358)
03-28 19:12:29.083: E/AndroidRuntime(22004):    at com.vtube.app.BaseFourActivity$PageZeroRefreshTask.doInBackground(BaseFourActivity.java:1)
03-28 19:12:29.083: E/AndroidRuntime(22004):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
03-28 19:12:29.083: E/AndroidRuntime(22004):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-28 19:12:29.083: E/AndroidRuntime(22004):    ... 4 more 
```

I don't understand why this go wrong, this app not crash often, only in a few times. This happens when I leave the app for a while. where the code went wrong:

```
public static String doGetRequest(String url) throws IOException{
        HttpClient lClient = new DefaultHttpClient();
        HttpGet lGetMethod = new HttpGet(url);

        HttpResponse lResp = null;
        try {
            lResp = lClient.execute(lGetMethod);
        } catch (ClientProtocolException e1) {
            Log.v(TAG, e1.toString());
            e1.printStackTrace();
        } catch (IOException e1) {
            e1.printStackTrace();
        }

        ByteArrayOutputStream lBOS = new ByteArrayOutputStream();
        String lInfoStr = "";

        if (lResp != null){
            try {
                lResp.getEntity().writeTo(lBOS);
                lInfoStr = lBOS.toString("UTF-8");
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return lInfoStr;
    } 
```

`lInfoStr = lBOS.toString("UTF-8");` this paticular line

How can I solve this? Does `toString()` cost a lot of memory?

# java - does premain class of javaagent work for Web application deployed in tomcat

> ID：15680698
> 
> 赞同：6
> 
> 时间：2013-03-28T11:34:07.713
> 
> 标签：java, tomcat, profiling, profiler, javaagents

i'm learning about javaagent and i created a simple profiler

[http://www.javabeat.net/2012/06/introduction-to-java-agents/](http://www.javabeat.net/2012/06/introduction-to-java-agents/)

I profiled a java application and it works fine. can i use this profiler to profile an web application deployed in tomcat. i tried this setting in CATALINA.bat "SET JAVA_OPTS=%JAVA_OPTS% -javaagent:/path-to-profiler/profiler.jar" and started the server but i didn't find the required output.

# c++ - 在 C++ 中以明智的方式将数据写入文本文件列

> ID：15680707
> 
> 赞同：1
> 
> 时间：2013-03-28T11:34:27.720
> 
> 标签：c++, file, file-io

我是 C++ 的初学者。我已经通过一个对象数组输入了变量的值（属于一个类）。现在我如何将它们写入文本文件列，如下所示？谢谢.........

```
SLNO    NAME      ADDRESS        PHONE NO     TYPE      
   1\.   ABC       xyzagsgshsh    27438927     Mobile
   2\.   QWE       qwhjbbdh       78982338     Landline 
```

这是我存储数据的代码。如何将其制作成内容如下的文本文件？

```
#include<iostream>
#include<string>
#include<fstream>
using namespace std;

class emp
{
    string name,address,phone,type;
    public:
    void getdata();
}obj[5];

void emp::getdata()
{
    cout<<"\nEnter the details:";
    cout<<"\nName: ";cin>>name;
    cout<<"Address:";
    cin>>address;
    cout<<"Phone number: "; cin>>phone;
    cout<<"\nType of phone? (Landline/Mobile) :";
    cin>>type;
}

int main()
{
    ofstream ptr;
    ptr.open("Phone.dat",ios::out);
    cout<<"\nEnter the no.of.records: ";
    int n,i;
    cin>>n;
    for(i=0;i<n;i++)
    {
        obj[i].getdata();
        ptr.write((char*)&obj[i],sizeof(obj[i]));
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:18:15.513

由于您已经创建了一个文件流，您可以利用输出标志（std::left、std::right 和 std::setw）：

[http://www.cplusplus.com/reference/iomanip/setw/](http://www.cplusplus.com/reference/iomanip/setw/)

[http://www.cplusplus.com/reference/ios/left/](http://www.cplusplus.com/reference/ios/left/)

现在，为了确保存储在 emp 类的任何对象中的任何字符串不超过您通过 std::setw 分配给 ofstream/ostream 的大小，您可以使用 string::resize。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:39:44.113

您可以使用字符串/[文件](http://www.cplusplus.com/doc/tutorial/files/)流、换行符和[std::setw](http://www.cplusplus.com/reference/iomanip/setw/)

```
ofstream myfile;
myfile.open ("example.txt");
myfile << "SLNO" << std::setw(10) << "NAME" << std::setw(10) << "ADDRESS" << std::setw(10) << "PHONE NO" << std::setw(10) << "TYPE\n"; 
```

这将用空格分隔所有文本`10-text lenght`并将其放入`example.txt`

记得检查文件的有效性并关闭文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:39:55.783

这取决于上下文。对于控制台窗口的简单输出（或者如果您在其他地方有固定宽度的字体，但这种情况很少见），您可以`std::setw`在每个元素之前使用指定字段的宽度。但是，对于文本 ( `std::string`)，通常更容易使用`resize`，并从一开始就将其设为正确的大小。

# javascript - 视图显示不正确

> ID：15680716
> 
> 赞同：0
> 
> 时间：2013-03-28T11:34:59.233
> 
> 标签：javascript, backbone.js

当我`alert()`在`render`函数内使用时`UserListView`，输出正确显示。如果我发表评论`alert()`，则不会显示该视图。

我坚持这一点。这是为什么？

这是代码：

```
var User = Backbone.Model.extend({
    defaults: {}
});

var UserCollection = Backbone.Collection.extend({
    model: User,
    url: 'http://localhost/cirest/index.php/api/userapi/users'
});

var UserView = Backbone.View.extend({
    tagName: 'thumbnail',
    className: 'span12',
    template: $('#userdetailtemplate').html(),
    render: function () {
        var tmpl = _.template(this.template);
        this.$el.html(tmpl(this.model.toJSON()));
        return this;
    }
});

var UserListView = Backbone.View.extend({
    el: ('#content1'),

    initialize: function () {        
        this.collection = new UserCollection();
        this.collection.fetch();

        this.render();
    },

    render: function () {
        var that = this;

        alert('asdf');

        _.each(this.collection.models, function (item) {
            that.renderUser(item);
        }, this);

    },

    renderUser: function (item) {
        var userview = new UserView({
            model: item
        });

        this.$el.append(userview.render().el);
    }
});

$(function () {
    var uview = new UserListView();
}); 
```

网页：

```
<div id="content1" class="span12"></div>
<script type="text/template" id="userdetailtemplate">
    <%= user_name %> <%= user_email %>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:41:52.203

我通过将 UserListView 中的初始化函数更改为

```
initialize: function() {
        this.collection = new UserCollection();
        this.collection.fetch();
        this.collection.on("reset", this.render, this);
        this.render();
    }, 
```

感谢@nikoshr 也提到了那个链接

# javascript - 我可以从 mocha/phantomjs 单元测试中获取页面截图吗？

> ID：15680725
> 
> 赞同：5
> 
> 时间：2013-03-28T11:35:32.330
> 
> 标签：javascript, unit-testing, phantomjs, mocha.js

我正在使用 grunt-mocha 通过 phantomJS 运行单元测试。

我知道 phantomJS 有很多有用的功能。我可以从 mocha 测试中访问它吗？

我查看了`window`对象等明显的地方，看看我是否可以以某种方式访问​​页面对象，但似乎没有什么明显的。

具体来说，我想呈现被测页面的屏幕截图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:51:38.750

这在文档中称为[“屏幕捕获”](https://github.com/ariya/phantomjs/wiki/Screen-Capture)。

重要的部分是您需要对 的引用`WebPage`，而不是浏览器`window`对象（这只是模拟 JavaScript 通常可以从浏览器内部看到的内容）。

```
var page = require('webpage').create();
page.open('http://github.com/', function () {
    page.render('github.png');
    phantom.exit();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T19:34:03.207

我已经分叉并添加了对 grunt-mocha 的截图支持。[请参阅https://github.com/bjfletcher/grunt-mocha](https://github.com/bjfletcher/grunt-mocha)中的“屏幕截图”部分。

这有望被引入 Kelly 的 grunt-mocha 并最终被引入[npmjs.org：https://github.com/kmiyashiro/grunt-mocha/pull/109](https://github.com/kmiyashiro/grunt-mocha/pull/109)

# c# - c# datetime 列表按相对于当前日期的日期排序

> ID：15680727
> 
> 赞同：-2
> 
> 时间：2013-03-28T11:35:34.153
> 
> 标签：c#, asp.net, linq, list, datetime

我有一个 C# 网页中的事件列表，其中包括属性

1.  日期 ( `DateTime`)
2.  和说明 ( `string`)。

我想使用 LINQ 按日期对这个列表进行排序，但是我想在列表中首先使用下一个最接近的日期（到当前日期），最后一个最远的日期来执行此操作。

例如，如果日期是 1 月 1 日，则列表中的第一个是 1 月 1 日，列表中的最后一个是 12 月 31 日。
日期和月份是相关的，但年份不相关。

我对此进行了研究，但我不确定从哪里开始。
任何帮助将非常感激。

感谢所有的答案，抱歉我的问题含糊不清。我试图生成一个日期事件列表，最近的日期在列表顶部 - 例如生日列表 - 下一个即将到来的生日在顶部，最后一个即将到来的生日在最后。我确信我的代码可以拆开，因为我绝不是专业人士 - 但这可以满足我的需要。

我最后是这样回答的：

我为事件创建了一个类：

```
 public class Events
{
public int ContactId { get; set; }
public string Lastname { get; set; }
public string Firstname { get; set; }
public DateTime EventDate { get; set; }
public string Description { get; set; }
public DateTime Now { get; set; }
public bool Reminder { get; set; }
public TimeSpan Difference { get; set; }
public int SortValue { get; set; }

public Events(int contactId, DateTime date, string lastname, string firstname, string description, bool reminder)
{

    ContactId = contactId;
    EventDate = date;
    Description = description;
    Reminder = reminder;
    Now = DateTime.Now;
    Lastname = lastname;
    Firstname = firstname;

    Difference = EventDate - Now;
    SortValue = Convert.ToInt32(Difference.Days % 365);
    if (SortValue < 0) { SortValue += 365; }

} 
```

}

然后我在我的代码中使用了以下内容：

```
 var upcomingEvents = new List<Events>();

foreach (var eventt in db.Query("SELECT CONTACT_ID, LASTNAME, FIRSTNAME, DATE, DESCRIPTION, REMINDER  FROM CONTACTS INNER JOIN EVENTS ON CONTACTS.ID = EVENTS.CONTACT_ID WHERE CONTACTS.CUSTOMER_ID = @0", WebSecurity.CurrentUserId)){
    var newEvent = new Events(eventt.CONTACT_ID, eventt.DATE, eventt.LASTNAME, eventt.FIRSTNAME, eventt.DESCRIPTION, eventt.REMINDER);
    upcomingEvents.Add(newEvent);   
}
upcomingEvents = upcomingEvents.OrderBy(x => x.SortValue).ThenBy(x=>x.Lastname).ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:49:05.080

在不描述如何唯一地处理过去日期（在“相对”日期之前）的情况下，听起来您只需要按日期排序。我认为你对自己太难了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:40:44.003

Try this:

```
YourOrderedList = YourList.OrderBy(x => DateTime.Now.Subtract(new DateTime(DateTime.Now.Year, x.Month , x.Day)).TotalSeconds); 
```

This solution assumes that you want to sort the list of dates by their linear absolute distance from the current system date.

# c# - 我对会话状态序列化有问题

> ID：15680728
> 
> 赞同：2
> 
> 时间：2013-03-28T11:35:41.800
> 
> 标签：c#, serialization, naudio

我用这段代码序列化一个对象

```
public void play(string url, string i)
    {
      MP3StreamingPanel mp3=new MP3StreamingPanel ( );
      mp3.play ( url );
      HttpContext . Current . Session [ i ] = mp3; 
```

然后当我想得到它时，mp3 属性中的某些值仍然是“空”

```
 MP3StreamingPanel mp3=new MP3StreamingPanel ( );
  mp3 = HttpContext . Current . Session [ i ] as MP3StreamingPanel; 
```

这是 MP3StreamingPanel 类

```
 [Serializable]
    public class MP3StreamingPanel 
        {

        enum StreamingPlaybackState
            {
            Stopped ,
            Playing ,
            Buffering ,
            Paused
            }

[NonSerialized]
public HttpWebRequest webRequest;
[NonSerialized]
public System.Timers.Timer timer1 = new System . Timers . Timer ( );
public SerializableVolumeWaveProvider16 volumeProvider;
delegate void ShowErrorDelegate ( string message );
public string gurl="";
public SerializableBufferedWaveProvider bufferedWaveProvider;
public SerializableWaveOut waveOut;
private  volatile StreamingPlaybackState playbackState;
public volatile bool fullyDownloaded;

public MP3StreamingPanel ( )
    {
    }

public void InitTimer ( )
    {
    timer1 . Elapsed += new ElapsedEventHandler ( timer1_Tick );
    timer1 . Interval = 250; // in miliseconds
    timer1 . Start ( );
    }
public void timer1_Tick ( object sender , ElapsedEventArgs e )
    {
    if ( playbackState != StreamingPlaybackState . Stopped )
        {
        if ( this . waveOut == null && this . bufferedWaveProvider != null )
            {
            Debug . WriteLine ( "Creating WaveOut Device" );
            this . waveOut = CreateWaveOut ( );
            waveOut . PlaybackStopped += waveOut_PlaybackStopped;
            this . volumeProvider = new SerializableVolumeWaveProvider16 ( `enter code here`bufferedWaveProvider );
            waveOut . Init ( volumeProvider );

            }
        else if ( bufferedWaveProvider != null )
            {
            var bufferedSeconds = bufferedWaveProvider . BufferedDuration . TotalSeconds;

            if ( bufferedSeconds < 0.5 && this . playbackState == StreamingPlaybackState . Playing && !this . fullyDownloaded )
                {
                this . playbackState = StreamingPlaybackState . Buffering;
                waveOut . Pause ( );
                Debug . WriteLine ( String . Format ( "Paused to buffer, waveOut.PlaybackState={0}" , waveOut . PlaybackState ) );
                }
            else if ( bufferedSeconds > 4 && this . playbackState == StreamingPlaybackState . Buffering )
                {
                waveOut . Play ( );
                Debug . WriteLine ( String . Format ( "Started playing, waveOut.PlaybackState={0}" , waveOut . PlaybackState ) );
                this . playbackState = StreamingPlaybackState . Playing;
                }
            else if ( this . fullyDownloaded && bufferedSeconds == 0 )
                {
                Debug . WriteLine ( "Reached end of stream" );
                stop ( );
                }
            }

        }
    }

public void StreamMP3 ( object state )
    {
    this . fullyDownloaded = false;
    string url = ( string ) state;
    webRequest = ( HttpWebRequest ) WebRequest . Create ( url );
    HttpWebResponse resp = null;
    try
        {
        resp = ( HttpWebResponse ) webRequest . GetResponse ( );
        }
    catch ( WebException e )
        {
        if ( e . Status != WebExceptionStatus . RequestCanceled )
            {
            Console.WriteLine ( e . Message );
            }
        return;
        }
    byte[] buffer = new byte [ 16384 * 4 ]; 

    IMp3FrameDecompressor decompressor = null;
    try
        {
        using ( var responseStream = resp . GetResponseStream ( ) )
            {
            var readFullyStream = new ReadFullyStream ( responseStream );
            do
                {
                if ( bufferedWaveProvider != null && bufferedWaveProvider . BufferLength - bufferedWaveProvider . BufferedBytes < bufferedWaveProvider . WaveFormat . AverageBytesPerSecond / 4 )
                    {
                    Debug . WriteLine ( "Buffer getting full, taking a break" );
                    Thread . Sleep ( 500 );
                    }
                else
                    {
                    Mp3Frame frame = null;
                    try
                        {
                        frame = Mp3Frame . LoadFromStream ( readFullyStream );
                        }
                    catch ( EndOfStreamException )
                        {
                        this . fullyDownloaded = true;

                        break;
                        }
                    catch ( WebException )
                        {

                        break;
                        }
                    if ( decompressor == null )
                        {
                        WaveFormat waveFormat = new Mp3WaveFormat ( frame . SampleRate , frame . ChannelMode == ChannelMode . Mono ? 1 : 2 , frame . FrameLength , frame . BitRate );
                        decompressor = new AcmMp3FrameDecompressor ( waveFormat );
                        this . bufferedWaveProvider = new SerializableBufferedWaveProvider ( decompressor . OutputFormat );
                        this . bufferedWaveProvider . BufferDuration = TimeSpan . FromSeconds ( 20 ); // allow us to get well ahead of ourselves
                        }
                    int decompressed = decompressor . DecompressFrame ( frame , buffer , 0 );
                     bufferedWaveProvider . AddSamples ( buffer , 0 , decompressed );
                    }

                } while ( playbackState != StreamingPlaybackState . Stopped );
            Debug . WriteLine ( "Exiting" );
            decompressor . Dispose ( );
            }
        }
    finally
        {
        if ( decompressor != null )
            {
            decompressor . Dispose ( );
            }
        }
    }

public void play ( string url )
    {
    if ( playbackState == StreamingPlaybackState . Stopped )
        {
            playbackState = StreamingPlaybackState . Buffering;
            this . bufferedWaveProvider = null;
            ThreadPool . QueueUserWorkItem ( new WaitCallback ( StreamMP3 ) , url );
            gurl = url;
            InitTimer ( );
            timer1 . Enabled = true;
        }
    else if ( playbackState == StreamingPlaybackState . Paused )
        {
             playbackState = StreamingPlaybackState . Buffering;
        }
    }

public void stop ( )
    {

    if ( playbackState != StreamingPlaybackState . Stopped )
        {
        if ( !fullyDownloaded )
            {
            webRequest . Abort ( );
            }
        this . playbackState = StreamingPlaybackState . Stopped;
        if ( waveOut != null )
            {
            waveOut . Stop ( );
            waveOut . Dispose ( );
            waveOut = null;
            }
        timer1 . Enabled = false;
        // n.b. streaming thread may not yet have exited
        Thread . Sleep ( 500 );
         }
    }

public SerializableWaveOut CreateWaveOut ( )
    {
    return new SerializableWaveOut ( );

    }

public void pause ( )
    {
    if ( playbackState == StreamingPlaybackState . Playing || playbackState == StreamingPlaybackState . Buffering )
        {
        waveOut . Pause ( );
        Debug . WriteLine ( String . Format ( "User requested Pause, waveOut.PlaybackState={0}" , waveOut . PlaybackState ) );
        playbackState = StreamingPlaybackState . Paused;
        }
    }

public void buttonStop_Click ( object sender , EventArgs e )
    {
    stop ( );
    }

private void waveOut_PlaybackStopped ( object sender , StoppedEventArgs e )
    {
    Debug . WriteLine ( "Playback Stopped" );
    if ( e . Exception != null )
        {
        MessageBox . Show ( String . Format ( "Playback Error {0}" , e . Exception . Message ) );
        }
    }
} 
```

for`SerializableVolumeWaveProvider16`和是我声明为 [Serializable] 的类`SerializableBufferedWaveProvider`，`SerializableWaveOut` 但在序列化后我无法获得那里的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:02:38.980

## 不要在会话/缓存中存储复杂对象

您在此处存储在会话中的对象很复杂，并且有许多活动部件。人们在使用缓存和会话时犯的主要错误是存储“活动”对象（哎呀，它有一个计时器、一个网络请求等）。您应该只存储（在会话、缓存或文件系统等中）冷硬非活动*数据*。我强烈建议您创建一个仅包含*数据*的单独 DTO 层；例如：

```
public class Something {
    public string Name {get;set;}
    public int SomeNumber {get;set;}
    public byte[] Blob {get;set;}
    // ... more simple data values
} 
```

理想情况下，您会填充存储/检索这种形式的东西；简单，易于理解等。然后根据需要映射到此 DTO 模型和您的*实际*模型。

实际上，一个更好的想法是让 DTO 不可变。如果您的提供程序实际上并未序列化，而是将内容保存在内存中，这将避免复杂化。因为否则以下内容不明确：

```
var obj = session[key] as Something;
if(obj != null) {
    obj.Name = "new name";
} 
```

使用*序列化*提供程序，除非最后再次明确存储，否则通常不会反映该更改；使用*内存*提供程序，所有其他调用者都可以立即看到它（请记住，用户可以有多个并发请求）。

如果您在使用 session/cache/etc 时转向基于 DTO 的模型，您将*被迫*编写易于理解且明显正确的代码。而不是“有时出于没人能猜到的原因而工作”。

# url - JAX-RS：从 url 获取数组

> ID：15680731
> 
> 赞同：0
> 
> 时间：2013-03-28T11:35:47.753
> 
> 标签：url, jax-rs

我尝试从这个 URL 截取参数

http://myapi.com/myobject?filter[0][name]=location&filter[0][value]=FR&filter[1][name]=type&filter[0][value]=real。

我如何在我的方法上声明这个“过滤器”参数来获取所有这些地图值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:42:27.333

我不认为它可以“自动”完成，我会做这样的事情：

```
@Path("/myobject")
@GET
public Response myMethod(@Context UriInfo uriInfo) {
     MultivaluedMap<String, String> queryParams = uriInfo.getQueryParameters(); 
     // parse the map keys
} 
```

在 queryParams 映射中，您将拥有`{"filter[0][name]" => location, filter[0][value] => FR, ...}`需要进一步解析的键值对。解析键可让您从查询中重建原始地图。那不会是一段漂亮的代码，但会起作用。

# java - 谷歌地图 android 获取位置

> ID：15680736
> 
> 赞同：0
> 
> 时间：2013-03-28T11:36:01.950
> 
> 标签：java, android

我想在单击按钮时启动谷歌地图，然后用户将选择地点，我将获得用户选择的用户地址名称和经度和纬度。

我在这里和谷歌上搜索了很多，但没有找到答案。

我想要这样的东西：

```
Button getLocation= (Button) footer.findViewById(R.id.getLocation);
getLocation.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View arg0) {
        //start google maps and let the user choose a place, then return to this
        //activity and get the latitude and longitude and the name of place
        //that was chosen
    }
}); 
```

这是我使用的地图片段：

```
 <fragment
            android:id="@+id/map"
            class="com.google.android.gms.maps.MapFragment"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_marginRight="150dp" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:36:21.663

`coords[]`是一个全局`double`数组变量。

基本上，这个想法是在活动内的地图片段中显示地图。

我为标记设置了一个侦听器，因此当用户移动标记时，它将由`handler`.

`R.id.map`如果您按照[本教程](http://www.vogella.com/articles/AndroidGoogleMaps/article.html)进行设置，则为片段布局。

```
 public class Activity extends FragmentActivity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            this.setContentView(R.layout.activity_layout);

                .......

            //Set up map view
            map = ((SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map)).getMap();

            mHandler = new LocationHandler(this); 
                .......

        OnMarkerDragListener markerDragListener = new OnMarkerDragListener() {

                @Override
                public void onMarkerDragStart(Marker marker) {
                    // Called when the marker drag is started

                }

                @Override
                public void onMarkerDragEnd(Marker marker) {
                    // Called when the marker is dropped down.
                    coords[0] = marker.getPosition().latitude;
                    coords[1] = marker.getPosition().longitude;
                    RestoreUIwithSavedLocation(coords);
                    Log.d(TAG, "Pin Dropped at: " + coords[0] + ", " + coords[1]);
                }

                @Override
                public void onMarkerDrag(Marker marker) {

                }
            };

            map.setOnMarkerDragListener(markerDragListener);
        }
    }

    private void RestoreUIwithSavedLocation(double[] coordsArray) {
        Message.obtain(mHandler, LOAD_COORD, coordsArray).sendToTarget();
    }

    // Write a inner class
    static class LocationHandler extends Handler {
        WeakReference<Activity> mActivity;

        public LocationHandler(Activity activity) {
            mActivity = new WeakReference<Activity>(activity);
        }

        public void handleMessage(Message msg) {
            Activity contextActivity = mActivity.get();
            switch ((int)msg.what) {

            case LOAD_COORD:
                map.clear();
                double[] coordArray = (double[])msg.obj;
                Marker marker = map.addMarker(new MarkerOptions().position(new LatLng(coordArray[0], coordArray[1])));
                map.moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(coordArray[0], coordArray[1]), 18));
                map.animateCamera(CameraUpdateFactory.zoomTo(18), 2000, null);
                marker.setDraggable(true);
                String s = Double.toString(coordArray[0]) + ", " + Double.toString(coordArray[1]);              
                contextActivity.text_location.setText(s);
                break;

            }
        }
    }
} 
```

更多谷歌地图API的参数可以参考这个：[谷歌地图Android API v2 - GoogleMap.OnMarkerDragListener](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.OnMarkerDragListener)

# wpf - 字符串不能转换为长度

> ID：15680737
> 
> 赞同：3
> 
> 时间：2013-03-28T11:36:02.960
> 
> 标签：wpf, visual-studio-2010, grid, xaml-designer

```
<Style x:Key="GridColumnDefaultStyle">
    <Setter Property="ColumnDefinition.Width" Value="1*"/>
</Style> 
```

上面的代码位于一个 generic.xaml 文件中，页面上的网格将在我的整个应用程序中使用该文件。这在 generic.xaml 中给出了一个设计时“异常”，它指出：

> '1*' 字符串不能转换为长度。

但更糟糕的是，我的页面在 WPF 设计器中的格式不正确，并且设计器被禁用（尽管是视觉设计器，而不是 xaml 设计器）。设计页面时非常烦人...

有人经历过同样的行为吗？并有任何解决方案/解决方法？

顺便说一句：运行时-> 没问题，按预期/预期运行...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:06:55.110

这可能会帮助您：

```
<Grid>
    <Grid.Resources>
        <Style x:Key="GridColumnDefaultStyle" TargetType="ColumnDefinition">
            <Setter Property="Width" Value="1*"/>
        </Style>
    </Grid.Resources>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Style="{StaticResource GridColumnDefaultStyle}"/>
        <ColumnDefinition Width="2*"/>
    </Grid.ColumnDefinitions>
</Grid> 
```

# java - Eclipse 不想在新项目中创建 R.java？

> ID：15680739
> 
> 赞同：-3
> 
> 时间：2013-03-28T11:36:10.210
> 
> 标签：java, android, eclipse, r.java-file

我正在使用 Eclipse juno，并且我已经安装了所有插件。一切正常，但是今天早上当我打开我的项目时，没有 R.java。我试图创建新项目，但在新项目中 R.java 也丢失了。我尝试了一切（清理项目，更改为“包装内容”），但没有。没有错误，因为这是没有编写单行代码的新项目，只有一些默认代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:40:19.237

嘿，这是 Eclipse 的一个错误，请参阅线程以获取更多详细信息，但基本上：不要包装您的任何内容，而是检查您的导入以导入 android.R 这已经在此处介绍过 SO [R 无法解决 - Android 错误](https://stackoverflow.com/questions/885009/r-cannot-be-resolved-android-error) 基本上问题是

*注意：Eclipse 有时喜欢在使用资源的文件顶部添加“import android.R”语句，尤其是当您要求 Eclipse 排序或以其他方式管理导入时。这将导致您的制造中断。留意这些错误的导入语句并删除它们。*

# android - 画布大小

> ID：15680744
> 
> 赞同：11
> 
> 时间：2013-03-28T11:36:23.813
> 
> 标签：android

我有一个 Android 应用程序，它有几个片段。

在这些片段之一中，有

1.  一个刻字，
2.  自定义视图，
3.  两个带按钮的面板。

在自定义视图（第 2 项）中，我需要绘制几个图形，其中一个与视图的大小相关，即应该有一个带圆角的矩形，其大小等于画布的大小减去填充。

为此，我需要获取画布的宽度和高度。

我尝试了以下事情：

1.  在方法中获取视图的尺寸`onSizeChanged`（新的宽度/高度）。
2.  在方法中获取视图的尺寸`onLayout`。
3.  `onDraw`在方法 ( `canvas.getWidth()/getHeight(), View.getMeasuredWidth()/getMeasuredHeight()`)中获取视图的尺寸。

所有三种方法都返回相同的宽度和高度，但它们都不起作用 - 图形太窄（仅填充大约 60 % 的可用空间而不是 100 %）并且太高（图形的底部不可见）。

`RectF`确定自定义视图的尺寸（实例）的正确方法是什么？

请注意，我在 Nexus 7 模拟器上以横向模式测试此应用程序。

**更新 1 (28.03.2013 21:42 MSK)**

对应片段的XML文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/simulation_fragment"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Simulation"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <co.mycompany.ccp.android.impl.simulationcanvas.SimulationCanvasView
        android:id="@+id/simulation_canvas_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.8" />

    <LinearLayout
        android:id="@+id/simulationExecutionPanel"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.1" >

        <Button
            android:id="@+id/restartSimulationButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/restart_simulation" />

        <Button
            android:id="@+id/simulationStepButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/simulation_step" />

        <Button
            android:id="@+id/pauseButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/pause" />

        <Button
            android:id="@+id/continueButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/continue_button" />

        <Button
            android:id="@+id/simulateAdInfinitumButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/simulate_ad_infinitum" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/currentCycleLabel" />

        <TextView
            android:id="@+id/currentCycleIndicator"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Cycle"
            android:textAppearance="?android:attr/textAppearanceMedium" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.1" >

        <Button
            android:id="@+id/addCompanyButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/add_company2" />

        <Button
            android:id="@+id/removeCompanyButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/remove_company" />

        <Button
            android:id="@+id/setLabourForceButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/set_labour_force" />
    </LinearLayout>

</LinearLayout> 
```

这是视图（`@+id/simulation_canvas_view`）的代码：

```
import co.mycompany.ccp.android.api.economypartsdimensioncalculator.EconomyPartsDimensionCalculator;
import co.mycompany.ccp.android.api.systemboundary.SystemBoundaryGraphicsCalculator;
import co.mycompany.ccp.android.impl.economypartsdimensioncalculator.DefaultEconomyPartsDimensionCalculator;
import co.mycompany.ccp.android.impl.systemboundary.DefaultSystemBoundaryGraphicsCalculator;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;
import android.graphics.RectF;
import android.util.AttributeSet;
import android.util.Log;
import android.view.View;

/**
 * @author DP118M
 * 
 */
public class SimulationCanvasView extends View {

    private static final int SYSTEM_BOUNDARY_COLOUR = Color.LTGRAY;

    [...]

    private int width = -1;
    private int height= -1;
    private SystemBoundaryGraphicsCalculator systemBoundaryGraphicsCalculator = new DefaultSystemBoundaryGraphicsCalculator();
    [...]
    private Rect systemBoundaryDimensions = new Rect(100, 100, 100 + 100,
            100 + 100);
    private Rect externalEconomyDimensions;

    [...]

    public SimulationCanvasView(final Context aContext) {
        super(aContext);
    }

    public SimulationCanvasView(final Context context, final AttributeSet attrs) {
        super(context, attrs);
    }

    public SimulationCanvasView(final Context context,
            final AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    [...]

    private void updateSystemBoundaryGraphicsCalculatorDimensions() {
        systemBoundaryGraphicsCalculator.setCanvasHeight(height);
        systemBoundaryGraphicsCalculator.setCanvasWidth(width);
        try {
            systemBoundaryGraphicsCalculator.run();
            systemBoundaryDimensions = systemBoundaryGraphicsCalculator
                    .getSystemBoundaryDimensions();
        } catch (final Exception exception) {
            throw new RuntimeException(exception);
        }
    }

    @Override
    protected void onDraw(final Canvas aCanvas) {
        super.onDraw(aCanvas);

        this.width = this.getWidth();
        this.height = this.getHeight();

        updateSystemBoundaryGraphicsCalculatorDimensions();         

        [...]

        drawRectangleWithRoundedEdges(aCanvas, systemBoundaryDimensions,
                SYSTEM_BOUNDARY_COLOUR);

        [...]
    }

    private void drawRectangleWithRoundedEdges(final Canvas aCanvas,
            final Rect aDimensions, int aStrokeColour) {
        final Paint paint = new Paint();

        paint.setColor(aStrokeColour);
        paint.setStrokeWidth(1);
        paint.setStyle(Paint.Style.STROKE);

        aCanvas.drawRoundRect(new RectF(aDimensions), 20, 20, paint);
    }   
} 
```

这是计算圆角矩形尺寸的类：

```
package co.mycompany.ccp.android.impl.systemboundary;

import android.graphics.Rect;
import co.mycompany.ccp.android.api.systemboundary.SystemBoundaryGraphicsCalculator;

/**
 * @author DP118M
 * 
 */
public class DefaultSystemBoundaryGraphicsCalculator implements
        SystemBoundaryGraphicsCalculator {
    private int canvasWidth;
    private int canvasHeight;
    private int xPadding = SYSTEM_BOUNDARY_X_PADDING;
    private int yPadding = SYSTEM_BOUNDARY_Y_PADDING;
    private Rect systemBoundaryDimensions;

    public void setXPadding(final int xPadding) {
        this.xPadding = xPadding;
    }

    public void setYPadding(final int yPadding) {
        this.yPadding = yPadding;
    }

    @Override
    public Rect getSystemBoundaryDimensions() {
        return systemBoundaryDimensions;
    }

    @Override
    public void setCanvasWidth(final int width) {
        this.canvasWidth = width;
    }

    @Override
    public void setCanvasHeight(final int height) {
        this.canvasHeight = height;
    }

    @Override
    public void run() throws Exception {
        this.systemBoundaryDimensions = new Rect(0 + xPadding, 0 + yPadding,
                Math.max(this.canvasWidth - xPadding, 0), Math.max(
                        this.canvasHeight - yPadding, 0));
    }
} 
```

**更新 2**：

这是屏幕截图：

![截屏](../Images/b1a5b408d38f197a298eeda61b14200f.png)

**更新 3（31.03.2013 19:38 MSK）：**`onLayout`如果我从,`onSizeChanged`或报告的宽度中减去 150 `onMeasure`，矩形将正确显示。

**更新 4 (05.04.2013 21:07 MSK)：**这是主要活动的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <fragment
        android:id="@+id/menu_pane"
        android:layout_width="0px"
        android:layout_height="match_parent"
        android:layout_weight="1"
        class="co.altruix.ccp.android.impl.fragments.MenuFragment" />

    <FrameLayout
        android:id="@+id/content_fragment2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        class="co.altruix.ccp.android.impl.fragments.ContentFragment2"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:04:54.750

我看到`android:layout_height="wrap_content"`自定义视图。

在这种情况下，父/容器`ViewGroup`希望在测量此视图时知道内容的高度。

但是，要绘制内容，您依赖于布局测量的尺寸，它仍然不知道内容的高度。

设置`android:layout_height`为`0dp`，这将允许`android:layout_weight`使用属性，然后视图将根据可用空间具有预先测量的高度。

此外，`onSizeChanged()`当再次测量布局时，足以通知您尺寸变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T05:14:06.700

试试这个：

```
view.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener(){
        @Override
        public void onGlobalLayout() {

        //capture view width and height here

    }//end onGlobalLayout()

        }); 
```

请参阅[getViewTreeObserver()。](https://developer.android.com/reference/android/view/View.html#getViewTreeObserver%28%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T11:09:47.190

根据我对这个问题的评论：

您的顶级布局：您已将 content_fragment2 的宽度设置为 fill_parent，因此它的宽度将与其父线性布局相同。您可能希望 menu_pane 具有固定宽度，没有 layout_weight，并且 content_fragment2 具有 layout_width=0px 和 layout_weight=1。

很高兴这有帮助！

# php - TCPDF - 设置页面背景，然后在 1 页上重新启用标题图像

> ID：15680747
> 
> 赞同：1
> 
> 时间：2013-03-28T11:36:34.410
> 
> 标签：php, tcpdf

一直在使用 TCPDF 示例，我已经建立了一个我想运行的报告，4 页，

前几页，从 1-2 只是背景图片，即：（第一页）封面，（背景图片）（第二页）摘要图片（背景图片）（第三页）这是删除背景图片的地方，使用标准页眉（第 4 页）回到使用完整背景图像，

我正在使用示例 example_051.php 中的代码，包括扩展类，我假设它覆盖了 TCPDF 使用的主要 Header 函数，

```
class MYPDF extends TCPDF {
    //Page header
    public function Header() {
        // get the current page break margin
        $bMargin = $this->getBreakMargin();
        // get current auto-page-break mode
        $auto_page_break = $this->AutoPageBreak;
        // disable auto-page-break
        $this->SetAutoPageBreak(false, 0);
        // set bacground image
        if($this->page <= 1){
          $img_file = 'frontcover.jpg';
              $this->Image($img_file, 0, 0, 210, 297, '', '', '', false, 300, '', false, false, 0);
        }
        // restore auto-page-break status
        $this->SetAutoPageBreak($auto_page_break, $bMargin);
        // set the starting point for the page content
        $this->setPageMark();
    }
}

// PAGE 1 - BIG background image
$pdf->AddPage();
$bMargin = $pdf->getBreakMargin();
$auto_page_break = $pdf->getAutoPageBreak();
$pdf->SetAutoPageBreak(false, 0);
$img_file = 'frontcover.jpg';
$pdf->Image($img_file, 0, 0, 210, 297, '', '', '', false, 300, '', false, false, 0);
$pdf->SetAutoPageBreak($auto_page_break, $bMargin);
$pdf->setPageMark();

// PAGE 2 - BIG background image
$pdf->AddPage();
$bMargin = $pdf->getBreakMargin();
$auto_page_break = $pdf->getAutoPageBreak();
$pdf->SetAutoPageBreak(false, 0);
$img_file = 'frontpage-summary.jpg';
$pdf->Image($img_file, 0, 0, 210, 297, '', '', '', false, 300, '', false, false, 0);
$pdf->SetAutoPageBreak($auto_page_break, $bMargin);
$pdf->setPageMark();

// PAGE 3 - SET Header image
$pdf->setPrintHeader(true); // enable header
$pdf->setPrintFooter(false);// disable footer
$pdf->SetMargins(PDF_MARGIN_LEFT, PDF_MARGIN_TOP, PDF_MARGIN_RIGHT);
$pdf->SetHeaderMargin(PDF_MARGIN_HEADER);
$pdf->SetFooterMargin(PDF_MARGIN_FOOTER);
$pdf->SetHeaderData("header.png", PDF_HEADER_LOGO_WIDTH, "image title", "header string");

$pdf->AddPage();
$html.= '<div style="padding:10px;">';
$html.= '<h2>Report Title</h2>';
$html.= '<h3>sub title</h3>';
$html.= '<h2>Other Title</h2>';
$html.= '<h3>sub title</h3>';
$html.= '<h2>Other Title</h2>';
$html.= '<h3>sub title</h3>';
$html.= '</div>';
$pdf->writeHTML($html, true, false, true, false, '');

// PAGE 4
$pdf->AddPage();
$bMargin = $pdf->getBreakMargin();
$auto_page_break = $pdf->getAutoPageBreak();
$pdf->SetAutoPageBreak(false, 0);
$img_file = 'final-page.png';
$pdf->Image($img_file, 0, 0, 210, 297, '', '', '', false, 300, '', false, false, 0);
$pdf->SetAutoPageBreak($auto_page_break, $bMargin);
$pdf->setPageMark();
$pdf->lastPage(); 
```

Iv 尝试使用 resetHeaderTemplate() 函数重置标题，但第 3 页上的标题部分不会显示？

在扩展类中，我有点检查页面是否小于1，

```
if($this->page <= 1){
   $img_file = 'frontcover.jpg';
   $this->Image($img_file, 0, 0, 210, 297, '', '', '', false, 300, '', false, false, 0);
} 
```

我所做的是将整个标头函数从 TCPDF.php 复制到 if else 所以现在它读取

```
if($this->page <= 1){
   $img_file = 'frontcover.jpg';
   $this->Image($img_file, 0, 0, 210, 297, '', '', '', false, 300, '', false, false, 0);
}else{
   // add the entire code from the original function :(
} 
```

这似乎是我可以让我的原始标题回到第 3 页的唯一方法.. 任何其他人对如何设置/重置标题有任何想法？

干杯

# c# - 使用 Http 处理程序时如何防止控制器调用

> ID：15680748
> 
> 赞同：1
> 
> 时间：2013-03-28T11:36:34.627
> 
> 标签：c#, asp.net-mvc, httphandler

我有一个 ASP.NET MVC 应用程序，并在其中使用了 Http 处理程序。

如何防止站点在调用 HttpHandler 之后/之前搜索要调用的控制器？

现在处理程序被调用，然后我得到一个 404 错误代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:48:20.133

`RegisterRoutes`在 global.ascx.cs 文件中更改路由，如下所示：

```
routes.MapRoute(
            "Default1", // Route name
            "{controller}/{action}/{id}/{param}", // URL with parameters
            new { controller = "Account", action = "LogOn", id = UrlParameter.Optional}, // Parameter defaults
            new[] { "YourProjectName.Controllers" }
        ); 
```

**笔记：**

1.  在这里改变`YourProjectName`。
2.  将您的处理程序放在`Controllers`文件夹之外（如果它在那里），它应该可以正常工作。在路由上再做一些谷歌。

# angularjs - 将 ng-grid 数据导出为 CSV 和 PDF 格式

> ID：15680749
> 
> 赞同：4
> 
> 时间：2013-03-28T11:36:34.817
> 
> 标签：angularjs, angularjs-directive

我在 angularjs 中使用 ng-grid 创建了一个网格。我想添加将网格数据导出为 CSV 和 PDF 格式的功能。在 angularjs 中是否有可用的插件？如果没有，那么任何人都可以建议我实现它的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T22:27:28.820

Angular-Grid 有一个插件允许这样做，但作者警告说，此时它主要是一个概念证明：

[https://raw.githubusercontent.com/duro/my-angular-requiejs-example/master/vendor/angular-ui-ng-grid/plugins/ng-grid-csv-export.js](https://raw.githubusercontent.com/duro/my-angular-requiejs-example/master/vendor/angular-ui-ng-grid/plugins/ng-grid-csv-export.js)

从上述存储库加载代码后，您可以将以下行添加到网格的配置中：

```
plugins: [new ngGridCsvExportPlugin()],
showFooter: true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-28T18:59:24.290

确保打开 ng-grid 的页脚，否则您将看不到链接。

```
showFooter: true 
```

另外，我正在使用 jQueryUI，并且我得到了显示更漂亮的链接：

```
//var csvDataLinkHtml = "<div class=\"csv-data-link-span\">";
//csvDataLinkHtml += "<a href=\"data:text/csv;charset=UTF-8,";
//csvDataLinkHtml += encodeURIComponent(csvData);
//csvDataLinkHtml += "\" download=\"Export.csv\">Export to Excel</a></div>" ;

var csvDataLinkHtml = "<a style='float:right;margin:10px;' class=\"csv-data-link-span btn btn-primary\" href=\"data:text/csv;charset=UTF-8,";
csvDataLinkHtml += encodeURIComponent(csvData);
csvDataLinkHtml += "\" download=\"Export.csv\">Export to Excel</a>" ; 
```

# c# - 检查一个整数然后返回一个字符串

> ID：15680752
> 
> 赞同：2
> 
> 时间：2013-03-28T11:36:36.210
> 
> 标签：c#, validation, ternary-operator, conditional-operator

因此，当我想在决定字符串值是什么之前快速检查整数时，我可能会使用一小段代码：

```
string status = (statusID == 0 ? "Inactive" : "Active"); 
```

但是，我不记得这种做法/一段代码被称为什么。我想实现一段类似的代码，但有两个参数检查，检查两个不同的数字，给出三种可能的结果。这可能吗？或者将其扩展为该代码的两种用法，检查某个字符串，或者将功能扩展为方法是否更合适？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T11:38:38.000

`?:`是 c# 中的条件运算符：[`?:`运算符（C# 参考）](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)

只需在第一个`?:`语句的*else*部分添加另一个语句：

```
string status = (statusID == 0 ? "Inactive" : (statusID == 1 ? "Active" : "OtherOne")); 
```

这将为其他人返回“不活动” `statusID == 0`，`statusID == 1`为其他人返回“活动”和“OtherOne”。

# php - 以 UTC 格式转换时间

> ID：15680753
> 
> 赞同：-1
> 
> 时间：2013-03-28T11:36:38.897
> 
> 标签：php, time

我有以下代码：

```
$start_time="6:00 PM";

$end_time="10:00 PM"; 
```

以上时间以国家为准`timezone i.e (Asia/Colombo, Asia/Adelaide...etc)`

我想执行以下计算：

```
date_default_timezone_set("UTC");
$system_time = date('g:i A'); //Getting the system time according to the UTC timezone

    $time_left_for_discussion = $start_time - $system_time;

    if ($system_day < $day) {
        return "Upcoming";
    } else if ($system_day == $day) {
        if ($time_left_for_discussion <= 0 && $system_time <= $end_time) {
            return "Live";
        } else {
            return "NA";
        }
    } else {
        return "NA";
    } 
```

这里的 $system_time 是根据 UTC 时区。现在我想要计算 $time_left_for_discussion 因此我需要将 $start_time 和 $end_time 转换为 UTC 格式以进行正确计算。

希望你明白我的意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:01:22.333

使用可以使用[getOffset函数](http://www.php.net/manual/en/datetimezone.getoffset.php) 对于时区转换你可以以此为例

```
<?php

$userTimezone = new DateTimeZone('America/New_York');
$gmtTimezone = new DateTimeZone('GMT');
$myDateTime = new DateTime('2009-03-21 13:14', $gmtTimezone);
$offset = $userTimezone->getOffset($myDateTime);
echo $offset;

echo date('Y-m-d H:i', $myDateTime->format('U') + $offset)
?> 
```

这会将时间从 GMT 时区转换为纽约时区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:38:29.340

试试 dateTime 类。

```
$date = new DateTime("2010-07-05T06:00:00Z");
$date->setTimeZone(new DateTimeZone("UTC")); 
```

# javascript - 排序 JSON 对象

> ID：15680757
> 
> 赞同：0
> 
> 时间：2013-03-28T11:36:43.010
> 
> 标签：javascript

如何在 javascript 中对 JSON 对象进行排序？

```
obj = JSON.parse(count);   //count is responseText 
```

和

```
count= {"MH_YTML":"Yavatmal H.O","MH_WRDH":"Wardha H.O","MH_SWTW":"Sawantwadi H.O"}  //count{key,value} 
```

我想按升序对计数值（Yavatmal HO、Wardha HO 和 Sawantwadi HO）进行排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:38:58.013

JavaScript 对象（及其相关的 JSON 表示）没有顺序。它们是属性名称和值的无序包。

您可以创建一个包含特定顺序条目的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T11:44:28.053

您无法对对象进行排序。但是，您可以创建一个数组并对其进行排序。像这样的东西：

```
var count= {"MH_YTML":"Yavatmal H.O", "MH_WRDH":"Wardha H.O", "MH_SWTW":"Sawantwadi H.O"},
    countArr = [];

for (var i in count) {
    countArr.push({key: i, val: count[i]});
}
countArr.sort(function(a, b) {
    if (a.val < b.val) return -1;
    if (a.val > b.val) return 1;
    return 0; 
}); 
```

演示[http://jsfiddle.net/dfsq/8S4aD/1/](http://jsfiddle.net/dfsq/8S4aD/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T11:38:43.310

首先将该对象转换为数组，其中每个数组元素将是对象中的一对键和值，然后使用自定义函数按值对该数组进行排序。然后您可以将其转换回对象，但不能保证对象属性顺序将保持不变。

# jboss - JBoss-DataSource 创建和使用

> ID：15680762
> 
> 赞同：0
> 
> 时间：2013-03-28T11:37:09.380
> 
> 标签：jboss

我正在使用 Jboss AS 5.1.x 服务器。当我在我的 java 程序中使用带有 jndi 名称的 DataSource 对象时，我在连接到服务器管理器连接池时遇到错误。请验证下面提到的详细信息，并给我建议为什么它会给出错误。

要将数据源放置到 Jndi，我们必须放置 *-ds.xml 文件，因此我已将 mysql-ds.xml 文件放置在带有以下标签的 default/deploy 文件夹中。

```
 <?xml version="1.0" encoding="UTF-8"?>
  <datasources>
  <local-tx-datasource>
 <jndi-name>MySqlDS</jndi-name>
 <connection-url>jdbc:mysql://localhost:3306/mysql</connection-url>
 <driver-class>org.gjt.mm.mysql.Driver</driver-class>
 <user-name>root</user-name>
 <password>root</password>
<exception-sorter-class-name>org.jboss.resource.adapter.
  jdbc.vendor.MySQLExceptionSorter
  </exception-sorter-class-  name>
    <new-connection-sql>SELECT 1</new-connection-sql>
    <check-valid-connection-sql>SELECT 1</check-valid-connection-sql>
 <metadata>
    <type-mapping>mySQL</type-mapping>
  </metadata>
  </local-tx-datasource>
 </datasources> 
```

将此 xml 文件放入部署文件夹后，当我浏览 Jndiview 时，我在 jnditree 中找到了一个带有 java 中 MySqlDs 的标签：|MySqlDs

为了使用上面绑定的 jndi 名称，我使用了以下 java 程序（独立）。

```
// JndiDsConTest.java
import javax.naming.*; //(jndi api)
import javax.sql.*;
import java.sql.*;
import java.util.*;

public class JndiDsConTest
 {
public static void main(String args[])throws Exception
{

    //Jbosss
     Hashtable ht=new Hashtable();
         ht.put(Context.INITIAL_CONTEXT_FACTORY,
               "org.jnp.interfaces.NamingContextFactory");
    ht.put(Context.PROVIDER_URL,"jnp://localhost:1099");

    // create InitialContext obj
    InitialContext ic=new InitialContext(ht);
                                // represents conectivity with registry s/w

    // get DataSoruce obj ref from registry
    DataSource ds=(DataSource)ic.lookup("java:/MySqlDS");
     //DataSource ds=(DataSource)ic.lookup("java:comp/env/jdbc/MySqlDS");

     // get con obj from Jdbc Con pool
     Connection con=ds.getConnection();

     // write jdbc persistance logic
     Statement st=con.createStatement();
     ResultSet rs=st.executeQuery("select count(*) from  employee");

      if(rs.next())
      {
          System.out.println("count of records :"+rs.getInt(1));
      }

      // close jdbc objs
      rs.close();
      st.close();
      // release con obj back to con pool
      con.close();
      }//main
     }//class 
```

当我在类文件上运行时，我得到以下错误堆栈跟踪。

```
 D:\JAVA DRIVER\JAVA\JNDI>java JndiDsConTest
   Exception in thread "main" javax.naming.CommunicationException: Could not obtain
   connection to any of these urls: MySqlDS and discovery failed with error: javax
   .naming.CommunicationException: Receive timed out [Root exception is java.net.So
   cketTimeoutException: Receive timed out] [Root exception is javax.naming.Communi
  cationException: Failed to connect to server MySqlDS:1099 [Root exception is jav   
  ax.naming.ServiceUnavailableException: Failed to connect to server MySqlDS:1099
  [Root exception is java.net.UnknownHostException: MySqlDS]]]
    at org.jnp.interfaces.NamingContext.checkRef(NamingContext.java:1763)
    at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:693)
    at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:686)
    at javax.naming.InitialContext.lookup(Unknown Source)
    at JndiDsConTest.main(JndiDsConTest.java:25)
  Caused by: javax.naming.CommunicationException: Failed to connect to server MySq
  lDS:1099 [Root exception is javax.naming.ServiceUnavailableException: Failed to
   connect to server MySqlDS:1099 [Root exception is java.net.UnknownHostException:
  MySqlDS]]
    at org.jnp.interfaces.NamingContext.getServer(NamingContext.java:335)
    at org.jnp.interfaces.NamingContext.checkRef(NamingContext.java:1734)
    ... 4 more
   Caused by: javax.naming.ServiceUnavailableException: Failed to connect to server
   MySqlDS:1099 [Root exception is java.net.UnknownHostException: MySqlDS]
    at org.jnp.interfaces.NamingContext.getServer(NamingContext.java:305)
    ... 5 more  
   Caused by: java.net.UnknownHostException: MySqlDS
    at java.net.InetAddress.getAllByName0(Unknown Source)
    at java.net.InetAddress.getAllByName(Unknown Source)
    at java.net.InetAddress.getAllByName(Unknown Source)
    at java.net.InetAddress.getByName(Unknown Source)
    at org.jnp.interfaces.TimedSocketFactory.createSocket(TimedSocketFactory
    .java:81)
    at org.jnp.interfaces.NamingContext.getServer(NamingContext.java:301)
    ... 5 more 
```

请找到错误堆栈跟踪的原因并解决它。

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T18:21:06.920

查看堆栈跟踪消息`java.net.UnknownHostException: MySqlDS`，我会说 JDBC 驱动程序正在寻找一个名为“MySqlDS”的主机，所以我认为它不会从您的 mysql-ds.xml 文件中获取信息，至少不是您的方式在这里进行了描述。

这是我在 JBoss 5.1.0 中工作的一些代码。（我显示的是您的数据源名称，而不是我原来的名称。）

```
javax.naming.Context ic = new javax.naming.InitialContext();
javax.naming.Context ctx = (javax.naming.Context) ic.lookup("java:");
javax.sql.DataSource ds = (javax.sql.DataSource) ctx.lookup("jdbc/mysqlds");
conn = ds.getConnection(); 
```

在我的脑海中，我不知道 JNDI 查找是否区分大小写。我自己一直使用小写字母。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-21T18:31:43.100

@Override protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

```
 PrintWriter out = resp.getWriter();
    resp.setContentType("application/json");

    try {
        DataSourceFactory dataSourceFactory = new DataSourceFactory();
        IDAOFactory dAOFactory = new DAOFactoryImpl(dataSourceFactory);
        IServiceFactory serviceFactory = new ServiceFactoryImpl(dAOFactory);

        IItemService itemService = serviceFactory.getItemService();
        ArrayList<Item> allItems = itemService.getAll();
        Gson gson = new GsonBuilder().create();

        String list = gson.toJson(allItems);

        out.write(list);
    } catch (Throwable ex) {
        ServletException servletException = new ServletException(ex);
        throw servletException;
    } finally {
        if (out != null) {
            out.close();
        }
    }

} 
```

函数加载订单（）{

```
var ajaxConfig = {
    type: "GET",
    url: "getAllOrders",
    async: true,
    contentType: "",
    data: "",
    dataType: "json"
};

$.ajax(ajaxConfig)
        .done(function (response) {
            for (var i = 0; i < response.length; i++) {
                var html = "<tr> \
                            <td>" + response[i].orderId + "</td> \
                            <td>" + response[i].date + "</td>\
                            <td>" + response[i].customerId + "</td> \
                        </tr>";
                $("#tbleOrders tbody").append(html);
            }
        })
        .fail(function (xhr, status, errorMessage) {
            alert("Faild to load data !!");
        }); 
```

}

# arguments - 如何在 LESS mixin 中获得特定的匿名参数

> ID：15680763
> 
> 赞同：1
> 
> 时间：2013-03-28T11:37:19.723
> 
> 标签：arguments, less, mixins

> ***注意****：我不想使用`~"parameters"`符号来提供参数，因为它对用户不友好，开发人员总是必须考虑这一点。我正在使用[这个技巧](https://stackoverflow.com/a/13490523/75642)和 javascript 评估来获取正确格式的参数，可以在下面的 mixin 中看到。*

我有一个 LESS 混合

```
.gradient(...) {
    @def = ~`"@{arguments}".replace(/[\[\]]/g,"")`;

    background-color: mix(/* first and last argument color */)
    background-image: linear-gradient(to bottom, @def);
} 
```

由于渐变可以有多个颜色停止定义，我将其定义为支持任意数量的参数。

现在。我想要得到的只是第一个和最后一个参数的颜色定义。问题是这些可以以不同的方式提供，一些简单的提取其他复杂的：

```
.gradient(#000, #fff); // easy
.gradient(fade(#000, 50) 25%, #ccc 50%, fade(#fff, 90) 80%); // complicated 
```

## 问题

1.  `@arguments`是否可以在不求助于字符串转换的情况下访问单个参数？
2.  如果必须进行字符串转换（as `~'"@{arguments}"'`），我如何拆分单个参数以忽略括号内的逗号（上面的复杂示例将它们转换为`rbga`值）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:56:34.300

## LESS 1.4.0 解决方案

以下是需要 LESS 1.4.0（撰写本文时为测试版）的解决方案，因为它利用了新`extract()`功能。它还假定颜色将始终是每个参数的值集中的第一个值（我相信对于`linear-gradient`css 的正确语法应该是这种情况）。

通过使用`extract()`LESS 1.4.0 的功能，我们可以允许将参数作为非字符串传递，[这可以缓解您在我们讨论的其他问题中遇到的字符串到颜色转换问题](https://stackoverflow.com/questions/15681931/convert-rgba-colour-definition-string-in-less-to-color-instance)（然而，这仍然是一个好问题），同时也允许访问个人价值观。

**较少的**

```
.gradient(...) {

  //setting up your argument definition string
  @def: ~`"@{arguments}".replace(/[\[\]]/g,"")`;

  //getting the number of arguments 
  //(weeding out nested commas in parenthesis to do it)
  @numStops: unit(`"@{arguments}".replace(/\([^)]*\)/g,"").split(',').length`);

  //extracting raw form of first and last arguments
  //which may be more than just a single color
  @rawFirst: extract(@arguments,1);
  @rawLast: extract(@arguments,@numStops);

  //mixins to recursively evaluate the raw arguments down to a color
  .setFirstColor(@color) when (isColor(@color)) {
     @FirstColor: @color;
  }
  .setFirstColor(@color) when not (isColor(@color)) {
     .setFirstColor(extract(@color,1));
  }
  .setLastColor(@color) when (isColor(@color)) {
     @LastColor: @color;
  }
  .setLastColor(@color) when not (isColor(@color)) {
     .setLastColor(extract(@color,1));
  }

  //call mixins to get the first & last color from first & last arguments
  .setFirstColor(@rawFirst);
  .setLastColor(@rawLast);

  //set your css using the extracted and formatted info
  background-color: mix(@FirstColor, @LastColor);
  background-image: linear-gradient(to bottom, @def);
}

.myClass1 {
  .gradient(#000, #fff); 
}

.myClass2 {
  .gradient(fade(#000, 50) 25%, #ccc 50%, fade(#fff, 90) 80%); //complicated
} 
```

**CSS 输出**

```
.myClass1 {
  background-color: #808080;
  background-image: linear-gradient(to bottom, #000000, #ffffff);
}
.myClass2 {
  background-color: rgba(179, 179, 179, 0.7);
  background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.5) 25%, #cccccc 50%, rgba(255, 255, 255, 0.9) 80%);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:52:32.033

> *可以**[在此处找到](http://erraticdev.blogspot.com/2013/03/less-gradient-mixin-with-fallback-for-ie.html)有关此解决方案的详细博客文章。***

## 回答我自己的问题并提供可行的解决方案

****是否可以在不求助于字符串转换的情况下****访问单个参数？**`@arguments`**

 ****如果没有 LESS 1.4（目前处于测试阶段），似乎不可能直接执行此操作并获得实际参数，而无需求助于字符串转换然后操作它们。

**如果必须进行字符串转换（as** `~'"@{arguments}"'`**），我如何拆分单个参数以忽略括号内的逗号（上面的复杂示例将它们转换为** `rgba` **值）？**

答案是立即执行返回所需结果的*匿名函数。*让我们从问题中举个例子：

```
.gradient(fade(#000, 50) 25%, #ccc 50%, fade(#fff, 90) 80%); 
```

在 mixin`@def`中执行第一行后，分配了这个值：

```
@def: "rgba(0, 0, 0, 0.5) 25%, #ccc 50%, rgba(255, 255, 255, 0.9) 80%"; 
```

现在我们要做的是替换那些不应该拆分的逗号。这些是括号内的逗号。使用前瞻正则表达式很容易检测到这一点。所以我们用分号替换这些逗号，然后拆分剩下的逗号：

```
val.replace(/,\s+(?=[\d ,.]+\))/gi, ";").split(/,\s*/g) 
```

这导致了这个字符串数组或单个梯度参数

```
["rgba(0;0;0;0.5) 25%", "#ccc 50%", "rgba(255;255;255;0.9) 80%"] 
```

现在我们有了可以使用的数据。由于也不可能提供`mix`不是`color`对象的 LESS 参数，我们必须手动进行混合。

这是`.gradient`作为第一个和最后一个渐变颜色的结果输出#xxxxxx的结果混合：

```
.gradient (...) {
    @all: ~`"@{arguments}".replace(/[\[\]]/g,"")`;
    @mix: ~`(function(a){a=a.replace(/,\s+(?=[\d ,.]+\))/gi,";").split(/,\s*/g);var f=a[0].split(/\s+/g)[0];var l=a.pop().split(/\s+/g)[0];var c=function(c){var r=[];/rgb/i.test(c)&&c.replace(/[\d.]+/g,function(i){r.push(1*i);return"";});/#.{3}$/.test(c)&&c.replace(/[\da-f]/ig,function(i){r.push(parseInt(i+i,16));return"";});/#.{6}/.test(c)&&c.replace(/[\da-f]{2}/ig,function(i){r.push(parseInt(i,16));return"";});if(r.length)return r;return[100,0,0];};var p=function(v){return("0"+v.toString(16)).match(/.{2}$/)[0];};f=c(f);l=c(l);var r={r:((f.shift()+l.shift())/2)|0,g:((f.shift()+l.shift())/2)|0,b:((f.shift()+l.shift())/2)|0};return"#"+p(r.r)+p(r.g)+p(r.b);})("@{arguments}")`;
    background-color: @mix;
    background-image: -webkit-linear-gradient(top, @all);
    background-image: -moz-linear-gradient(top, @all);
    background-image: -o-linear-gradient(top, @all);
    background-image: linear-gradient(to bottom, @all);
} 
```

我们当然可以进一步复杂化并计算所有渐变颜色的平均值，但对于我的需要，这已经足够了。以下是解析参数以及计算渐变中第一种和最后一种颜色的混合并在上`@mix`变量中缩小的函数：

```
(function(args) {
    args = args.replace(/,\s+(?=[\d ,.]+\))/gi, ";").split(/,\s*/g);
    var first = args[0].split(/\s+/g)[0];
    var last = args.pop().split(/\s+/g)[0];

    var calculateValues = function(color) {
        var result = [];
        /rgb/i.test(color) && color.replace(/[\d.]+/g, function(i) {
            result.push(1*i);
            return "";
        });
        /#.{3}$/.test(color) && color.replace(/[\da-f]/ig, function(i) {
            result.push(parseInt(i+i, 16));
            return "";
        });
        /#.{6}/.test(color) && color.replace(/[\da-f]{2}/ig, function(i) {
            result.push(parseInt(i, 16));
            return "";
        });
        if (result.length) return result;
        return [100,0,0];
    };

    var padZero = function(val) {
        return ("0" + val.toString(16)).match(/.{2}$/)[0];
    };

    first = calculateValues(first);
    last = calculateValues(last);

    var result = {
        r: ((first.shift() + last.shift()) / 2) | 0,
        g: ((first.shift() + last.shift()) / 2) | 0,
        b: ((first.shift() + last.shift()) / 2) | 0
    };
    return "#"+ padZero(result.r) + padZero(result.g) + padZero(result.b);
})("@{arguments}") 
```****

# c# - 以字符串和格式查找电话号码

> ID：15680765
> 
> 赞同：0
> 
> 时间：2013-03-28T11:37:24.253
> 
> 标签：c#, sql-server, regex, formatting

我有带有未格式化电话号码的字符串，有没有办法找到它们并格式化号码并保存？

我拥有的示例字符串是

```
Name: Tippu     
Phone: 408.273.3939
Email: tippu@tippu.com 
```

另一个样本

```
Contact Tippu at (408) 363 2323 
```

在这些示例中，我需要找到电话号码并将其更改为 NNN-NNN-NNNN 格式。数据在 SQL Server 中，我使用的是 c#。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:25:22.393

您可以使用以下伪代码。

```
string.Replace(/\(?(\d{3})[)(-.\s]*(\d{3})[)-.\s]*(\d{4})/, "$1-$2-$3") 
```

它将替换`NNN-NNN-NNNN`格式中提供的两个示例。

让我向您解释一下正则表达式。
`\(?`在开头查找字符串是否以括号开头查找
`(\d{3})`三个数字，并创建一个捕获组。 `[)(-.\s]*`寻找`)` `(` `-` `.`和一个`space`。`*`确保注意括号后跟空格的情况。
`\d{4}`寻找 4 位数字。
这里`$1` `$2`和`$3`是捕获组。您可以根据您的语言使用它们。

我相信，您可能可以`Regex.Replace()`在 C# 中使用函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:53:36.273

可能不是最好的......但这就像我会做的那样。它至少可能会有所帮助。首先，我假设您的字符串中的最后一个数字代表电话号码：

```
x = <your string>.replace(/[^0-9]/g,'');
x = x.substring(x.length-10);
x = x.substring(0,3) +'-'+ x.substring(3,6) + '-' + x.substring(6); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T11:55:24.133

假设您的电话号码采用这种格式 - “408.273.3939”，那么这将对您有所帮助

```
 var stringText = "408.273.3939";
            var phoneArr = stringText.Split('.');
            String.Format("%s-%s-%s", phoneArr[0], phoneArr[1], phoneArr[2]); 
```

而且你的问题我也不清楚。

# c++ - 无法在 Hook 中获取 WM_TOUCH 消息

> ID：15680766
> 
> 赞同：0
> 
> 时间：2013-03-28T11:37:25.320
> 
> 标签：c++, windows, api, touch, hook

我需要让我的应用程序与触控兼容，这就是我这些天潜入 Windows 触控 API 的原因。

Windows API 对我来说很新，这就是为什么我错过了一些东西。

这是我的问题：我下载了 Microsoft [Sample of a simple Gesture App](http://archive.msdn.microsoft.com/WindowsTouch)。它工作得很好，但是手势功能是在绑定到 HWND 创建的 WinProc 中添加处理的。问题是我的“真实”应用程序自己创建了它的 HWND，这就是为什么我想使用挂钩来接收 WM_TOUCH 消息。

我在一个独立的应用程序中尝试过这样的操作（没有像在我的真实应用程序中那样使用 DLL）

```
//Window Parameters (Can't be modified in my original App)
//------Automatically called by an external lib in my "real app"------------
ATOM BaseApp_RegisterClass(HINSTANCE hInstance)
{
    WNDCLASSEX wcex;

    wcex.cbSize = sizeof(WNDCLASSEX);

    wcex.style            = CS_HREDRAW | CS_VREDRAW;
    wcex.lpfnWndProc      = WndProc;
    wcex.cbClsExtra       = 0;
    wcex.cbWndExtra       = 0;
    wcex.hInstance        = hInstance;
    wcex.hIcon            = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_MTGEST));
    wcex.hCursor          = LoadCursor(NULL, IDC_ARROW);
    wcex.hbrBackground    = (HBRUSH)(COLOR_WINDOW+1);
    wcex.lpszMenuName     = MAKEINTRESOURCE(IDC_MTGEST);
    wcex.lpszClassName    = (LPSTR)g_wszWindowClass;
    wcex.hIconSm          = LoadIcon(wcex.hInstance, MAKEINTRESOURCE(IDI_SMALL));

    return RegisterClassEx(&wcex);
}    
//------/Automatically called by an external lib in my "real app"------------

//Create the Window of the Basic App
BOOL InitInstance(HINSTANCE hInstance, int nCmdShow)
{
    //------Automatically called by an external lib in my "real app"------------
    // (....)
    BaseApp_RegisterClass(hInstance);
    // (....)
    //------/Automatically called by an external lib in my "real app"------------

   //------This is what I can add to my "real app"------------
   //Register the Touch Window
   RegisterTouchWindow(hWnd, 0 );
   UpdateWindow(hWnd);

   unsigned long threadId = GetWindowThreadProcessId(hWnd, 0);
    //Hook the SENT Messages
    SetWindowsHookEx(
        WH_GETMESSAGE,
        (HOOKPROC) HookTouchSENT,
        NULL,
        threadId);  

    //Hook the POSTED Messages
   SetWindowsHookEx(
       WH_CALLWNDPROC,
       (HOOKPROC) HookTouchPOSTED,
       NULL,
       threadId);

   //------/This is what I can add to my "real app"------------
}

//------Automatically called by an external lib in my "real app"------------
//Primary WinProc of the Window (Can't be modified in my original App)
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    if(message == WM_TOUCH)LogInConsole("Caught a WM_TOUCH in the Main WndProc\n");   //WM_TOUCH is ALWAYS caught here when touch the screen
    else if(message == WM_GESTURE)LogInConsole("Caught a WM_GESTURE in the Main WndProc\n");

    return DefWindowProc(hWnd, message, wParam, lParam);
}
//------/Automatically called by an external lib in my "real app"------------

//------This is what I can add to my "real app"------------
//Get the 'POSTED' Messages of the Window
LRESULT CALLBACK HookTouchPOSTED(int nCode, WPARAM wParam, LPARAM lParam)  
{
    HWND hWnd = m_hwnd; 

    UINT message = ((PCWPSTRUCT)lParam)->message; 

    if(message == WM_TOUCH)LogInConsole("Caught a WM_TOUCH in HookTouchPOSTED\n");   //WM_TOUCH is NEVER caught here when touch the screen
    else if(message == WM_GESTURE)LogInConsole("Caught a WM_GESTURE in HookTouchPOSTED\n");   

    std::stringstream strStream; strStream<<"Received POSTED Message:"<<message<<", Hex:0x"<<std::hex<<((PCWPSTRUCT)lParam)->message<<std::endl;  //Receive the normals windows messages and although WM_GESTURENOTIFY
    LogInConsole(strStream.str());

    return CallNextHookEx(0,nCode, wParam, lParam);
}

//Get the 'SENT' Messages of the Window
LRESULT CALLBACK HookTouchSENT(int nCode, WPARAM wParam, LPARAM lParam) 
{

    HWND hWnd = m_hwnd; 

    UINT message = ((PCWPSTRUCT)lParam)->message; 

    if(message == WM_TOUCH)LogInConsole("Caught a WM_TOUCH in HookTouchPOSTED\n");   //WM_TOUCH is NEVER caught here when touch the screen
    else if(message == WM_GESTURE)LogInConsole("Caught a WM_GESTURE in HookTouchPOSTED\n");

    std::stringstream strStream; strStream<<"Received POSTED Message:"<<message<<", Hex:0x"<<std::hex<<((PCWPSTRUCT)lParam)->message<<std::endl;
    LogInConsole(strStream.str());

    return CallNextHookEx(0,nCode, wParam, lParam);
}    
//------/This is what I can add to my "real app"------------ 
```

我的问题是 WM_TOUCH 消息从不通过 Hooks，而只在 WinProc 中。事实上，我只在挂钩中收到一条 WM_GESTURENOTIFY 消息，通知手势已经开始，但是以下应该给出值的“WM_TOUCH”消息永远不会被捕获......

以前有人遇到过这个问题吗？

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:21:42.633

感谢雷蒙德的帮助。子类化是解决方案！所以最后我去掉了所有的钩子，做了这样的：

```
BOOL InitInstance(HINSTANCE hInstance, int nCmdShow)
{
    //------Automatically called by an external lib in my "real app"------------
    // (....)
    BaseApp_RegisterClass(hInstance);
    // (....)
    //------/Automatically called by an external lib in my "real app"------------

   //------This is what I can add to my "real app"------------
   //Register the Touch Window
   RegisterTouchWindow(hWnd, 0 );   //If called then receive WM_TOUCH messages. Else receive WM_GESTURE messages

   //----SUBCLASS THE WINDOW
    UINT_PTR uIdSubclass;
    DWORD_PTR dwRefData;

   bool resultsc = SetWindowSubclass(
       hWnd,
       windowProcSubclass,
       uIdSubclass,
       dwRefData
       );
   if (resultsc) LogInConsole("Window Subclassed with success\n");
   //----/SUBCLASS THE WINDOW

   //------/This is what I can add to my "real app"------------
}

//------And the subclass Proc that now catches the WM_TOUCH and WM_GESTURE messages: ------------
LRESULT CALLBACK windowProcSubclass(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam,  UINT_PTR uIdSubclass, DWORD_PTR dwRefData)
{

    switch (message)
    {
    case WM_TOUCH:
        LogInConsole("CATCH A WM_TOUCH!!\n");
        break;
    case WM_GESTURENOTIFY:
        LogInConsole("WM_GESTURENOTIFY!!\n");
        break;      
    case WM_GESTURE:
        LogInConsole("CATCH A WM_GESTURE!!\n");        
        break;
    default:
        return DefWindowProc(hWnd, message, wParam, lParam);
    }
    return DefWindowProc(hWnd, message, wParam, lParam);
} 
```

# iphone - 如果我撤销当前有效的开发证书，那么它的有效期是否与当前证书相同？

> ID：15680772
> 
> 赞同：-4
> 
> 时间：2013-03-28T11:37:46.803
> 
> 标签：iphone, ios

如果我撤销当前有效的开发证书，那么它的到期日期是否与当前证书相同？或者它会有新的到期日（从创建之日起一年）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:58:18.757

它将具有相同的日期。吊销证书将在添加另一个设备后完成。合同只有1年。

# mysql - 从不同的列和两个表中选择数据

> ID：15680774
> 
> 赞同：1
> 
> 时间：2013-03-28T11:37:59.747
> 
> 标签：mysql, select, join

我已经在这里问过（并解决了）一些问题 [，](https://stackoverflow.com/questions/14875360/select-data-from-different-columns) 但现在更复杂了。我有相同的 BID 表：

```
Id_auction        bidder_1      winner_1    bidder_2    winner_2    item
  1                Alice           1          Ben         1          cup
  2               Charles          0          Alice       1          mug
  3                 Ben            1          Charles     1          pen 
```

但现在我想将信息与另一张表 USD

```
Id_auction         USD
1                  100
2                  150
3                   50 
```

如果投标人是赢家，则值为 1，如果不是赢家，则值为 0。因此，在第一次拍卖中，Alice 和 Ben 是赢家，在第二次拍卖中只有 Alice 获胜。我将需要一个 MySQL 查询，因此结果将如下所示：

```
 Id_auction       bidder        item      bidder_number   USD
  1                Alice         cup            1          100
  1                Ben           cup            2          100
  2                Alice         mug            2          150
  3                Ben           pen            1           50
  3                Charles       pen            2           50 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T11:41:46.977

只需`JOIN`这张桌子`USD`：

```
SELECT sub.*, USD.USD
FROM
(
  SELECT 
    t1.id_auction,
    t2.bidder_1 AS bidder,
    t2.item,
    1 AS bidder_number    
  FROM table1 t1
  INNER JOIN table1 t2  ON t1.id_auction = t2.id_auction
                       AND t2.winner_1 = 1
  UNION ALL
  SELECT 
    t1.id_auction,
    t2.bidder_2 AS bidder,
    t2.item,
    2                    
  FROM table1 t1
  INNER JOIN table1 t2  ON t1.id_auction = t2.id_auction
                       AND t2.winner_2 = 1
) AS sub
INNER JOIN USD ON sub.id_auction = USD.id_auction
ORDER BY id_auction, bidder; 
```

[**更新的 SQL Fiddle 演示**](http://www.sqlfiddle.com/#!2/27b6d/1)

```
| ID_AUCTION |  BIDDER | ITEM | BIDDER_NUMBER | USD |
-----------------------------------------------------
|          1 |   Alice |  cup |             1 | 100 |
|          1 |     Ben |  cup |             2 | 100 |
|          2 |   Alice |  mug |             2 | 150 |
|          3 |     Ben |  pen |             1 |  50 |
|          3 | Charles |  pen |             2 |  50 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:44:10.737

```
SELECT
  BID.Id_auction AS Id_auction,
  BID.bidder_1 AS bidder,
  BID.item AS item,
  USD.USD AS USD,
  1 AS bidder_number
FROM BID
INNER JOIN USD ON BID.Id_auction=USD.Id_auction
WHERE BID.winner_1=1

UNION ALL

SELECT
  BID.Id_auction AS Id_auction,
  BID.bidder_2 AS bidder,
  BID.item AS item,
  USD.USD AS USD,
  2 AS bidder_number
FROM BID
INNER JOIN USD ON BID.Id_auction=USD.Id_auction
WHERE BID.winner_2=1

ORDER BY BID.Id_auction, budder_number 
```

# mpi - mpicc/openmp 标志 -Dparallel 有什么影响？

> ID：15680777
> 
> 赞同：0
> 
> 时间：2013-03-28T11:38:08.273
> 
> 标签：mpi, openmp, openmpi

我遇到了标志 -Dparallel 的问题（我们在代码中使用它来启用并行部分）。当我使用它时，我不再获得一个以上的 OpenMP 线程。

备注：我们正在运行 MPI/OpenMP 混合代码。

一个简短的代码示例：

```
#include <stdio.h>
#include "mpi.h"

#ifdef _OPENMP
    #include <omp.h>
#else
    #define omp_get_num_threads() 0
    #define omp_get_thread_num() 0
#endif

int main(int argc, char **argv)
{
  int nthreads, thread_id;
  int rank, size, provided;

  MPI_Init_thread(&argc, &argv, MPI_THREAD_FUNNELED, &provided); /* starts MPI */

  MPI_Comm_rank (MPI_COMM_WORLD, &rank); /* get current process id */
  MPI_Comm_size (MPI_COMM_WORLD, &size); /* get number of processes */

  #pragma omp parallel private(nthreads, thread_id)
  {
    nthreads = omp_get_num_threads();
    thread_id = omp_get_thread_num();

    if (thread_id == 0)
      printf("This is rank %d with %d threads.\n", rank,nthreads);
  }

  MPI_Finalize();
  return 0;
} 
```

如果我用`mpicc -o example -fopenmp example.c`输出显示编译它：

```
$ mpirun -np 2 ./example
This is rank 1 with 6 threads.
This is rank 0 with 6 threads. 
```

正如预期的那样。

如果我使用标志`-Dparallel`（整行`mpicc -Dparallel -o example_parallel -fopenmp example.c`：）

输出说：

```
$ mpirun -np 2 ./example_parallel 
This is rank 0 with 1 threads.
This is rank 1 with 1 threads. 
```

为什么`-Dparallel`将 OpenMP Threadfs 限制为 1？我在哪里可以找到这方面的文档？

为了完整起见：

*   mpirun（开放 MPI）1.4.1
*   gcc (Ubuntu 4.4.3-4ubuntu5.1) 4.4.3

编辑（也许是解决方案）：我只是使用 testet 来编译它：

```
mpicc -Dparallel=parallel -o example_parallel -fopenmp example.c 
```

它按预期工作。所以我猜，-Dparallel 只是把`#pragma omp parallel`. 我对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:04:02.740

对于大多数 C 编译器，`-D`是定义预处理器宏符号值的选项。使用`-Dparallel`您定义一个名为`parallel`但具有空值的预处理器符号。由于预处理总是在编译器进一步解析代码之前完成，因此代码中所有出现的`parallel`都将替换为空字符串并`#pragma omp parallel private(...)`变为`#pragma omp private(...)`. 编译器可能会忽略产生的无效编译指示。

`-Dparallel`从命令行删除。如果您需要能够有条件地编译代码的不同部分，请使用另一个预处理器符号，例如`BUILD_PARALLEL`，例如：

```
#if defined(BUILD_PARALLEL)
 ... parallel code ...
#else
 ... serial code ...
#endif 
```

**切勿**使用名称与语言关键字匹配的预处理器符号。Using`-Dparallel=parallel`是一个**可怕的 hack**，既`parallel`定义了预处理器符号，又保留了它的原始含义。

# r - read.xls - 读取可变长度的工作表列表及其名称

> ID：15680782
> 
> 赞同：6
> 
> 时间：2013-03-28T11:38:26.013
> 
> 标签：r, vectorization, xls, gdata, sapply

给定几个`.xls`具有不同数量表的文件，我正在从包中读取它们以`R`使用它们。我有两个相关的问题（解决第二个问题应该解决第一个问题）： `read.xls``gdata`

1.  事先不知道每个文件将有多少张纸`.xls`，实际上这个值会因文件而异。
2.  我需要捕获工作表的名称，即相关数据

现在，为了解决 (1)，我正在使用`try()`并迭代工作表编号，直到遇到错误。

如何获取工作表名称的列表以便我可以遍历它们？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T11:49:52.997

请参阅 gdata 中的[sheetCount](http://hosho.ees.hokudai.ac.jp/~kubo/Rdoc/library/gdata/html/sheetCount.html)和`sheetNames`函数（在同一帮助页面上）。比如说，如果`xls <- "a.xls"`将电子表格的所有工作表读入一个列表，每个组件一张，就是这样：

```
sapply(sheetNames(xls), read.xls, xls = xls, simplify = FALSE) 
```

请注意，组件将使用工作表的名称命名。根据内容，删除`simplify = FALSE`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-28T11:49:30.790

对于此类任务，我使用 library `XLConnect`。使用它的函数，您可以获取向量中每个工作表的名称，然后确定该向量的长度。

```
#Read your workbook 
wb<-loadWorkbook("Your_workbook.xls")

#Save each sheet's name as a vector
lp<-getSheets(wb)

#Now read each sheet as separate list element
dat<-lapply(seq_along(lp),function(i) readWorksheet(wb,sheet=lp[i])) 
```

## 更新

正如@Martin Studer 所建议的那样，XLConnect 函数已经矢量化，因此无需使用`lapply()`，只需提供工作表名称的向量或使用`getSheets()`内部函数即可`readWorksheet()`。

```
dat <- readWorksheet(wb, sheet = getSheets(wb)) 
```

# css - 溢出隐藏在css中而不是顶部

> ID：15680785
> 
> 赞同：23
> 
> 时间：2013-03-28T11:38:30.143
> 
> 标签：css, overflow

`overflow-y:hidden`将隐藏上部和下部的视图。我们可以只显示上半部分而不显示下半部分吗？现在我喜欢这样`overflow-y-top:visible; overflow-y-bottom:hidden;`
类似`overflow-x-left:visible;overflow-x-right:hidden`
的东西那么我们可以在 css 中做些什么吗？

我的具体问题：

HTML：

```
<div id="main">
   <div id="arrow">▲&lt;/div>
   <div id="content">id="toggle_view">view more</div>
   <div id="content1"> this is any thext</div>
   <div id="content2"> this is any thext</div>
   <div id="content3"> this is any thext</div>
   <div id="content4"> this is any thext</div>
</div> 
```

CSS：

```
#main {overflow-y:hidden;height:100px;position:relative}
#arrow {position:absolute;top:-30px;}
#toggle_view{position:absolute;right:0;bottom:0;} 
```

现在我想让内容隐藏而不是箭头。那么是否有一些技术可以使 div 的下面部分隐藏而不是顶部？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-21T18:56:49.487

您可以将填充添加到元素的顶部，以显示您想要显示的任何内容，然后可以使用 javascript 更改为您需要的任何内容。如果我理解正确，那么您正在寻找的是始终显示箭头/viewmore。所以添加一个`padding-top: 20px;`或任何你喜欢的测量单位应该可以工作

我在这里添加了一些简单的 javascript 以使其正常工作。你可能想要动画和所有这些......

看到这个jsfiddle：http: [//jsfiddle.net/KPbLY/85/](http://jsfiddle.net/KPbLY/85/)

要让背景不进入填充（如评论中所述），请使用另一个嵌套 div，例如：

[http://jsfiddle.net/KPbLY/87/](http://jsfiddle.net/KPbLY/87/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:01:11.063

让我们先看一下 HTML 代码。你要：

```
<div id="arrow">▲ (view less)</div>
<div id="main">
   <div id="content1">text from #content1</div>
   <div id="content2">text from #content2</div>
   <div id="content3">text from #content3</div>
   <div id="content4">text from #content4</div>
</div>
<div id="toggle_view">view more</div> 
```

然后对于 CSS，你想要：

```
#main {overflow-y:hidden;height:100px;position:relative}
#arrow {cursor: pointer;}
#toggle_view{ cursor: pointer;}
.inactive { color: gray; } 
```

如果没有，真的很难说你可以点击一些东西`cursor:pointer`。此外，我们希望在按钮处于非活动状态时向用户指示（例如，如果您已经在查看每个

好吧，让我们来看看 JavaScript。您提到您正在使用一个库，但不是哪个库，所以我将假设 jQuery。首先，我们需要设置我们的变量：

```
var heightOfMain = $('#main').height();
var heightOfContent1 = $('#content1').height();
var differenceInHeight = heightOfMain - heightOfContent1; 
```

然后，当单击 时`#arrow`，我们想要将 的高度更改`#main`为移除`#content2`、`#content3`和`#content4`，只留下`#content1`后面（基本上，我们想要“移除”等于 的高度`differenceInHeight`）。我们还想取消激活`#arrow`，因为如果您已经少看，说“少看”是没有意义的。最后，我们要确保“查看更多”处于活动状态（因为我们稍后会切换它）。

```
$('#arrow').click(function() {

    $('#main').animate({
        height: heightOfContent1 
    });  
     $(this).addClass('inactive');
     $('#toggle_view').removeClass('inactive');
}); 
```

最后，我们要启用`#toggle_view`. 单击它时，我们想重新添加我们起飞的高度（`differenceInHeight`）。然后，由于我们已经查看了所有内容，我们可以禁用“查看更多”。最后，我们需要再次激活“少看”。

```
$('#toggle_view').click(function() {

    //you want to remove contents 2 through 4, which have a combined height
    //of differenceInHeight
    $('#main').animate({
        height: differenceInHeight });  
        $(this).hide();
        $('#arrow').show();

}); 
```

有关所有内容，请参阅[此 jsFiddle](http://jsfiddle.net/4YUYa/13/ "这个jsFiddle")。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T11:39:53.993

试试这个

```
#content {
    display: none;
} 
```

或者

```
#content {
    visibility: hidden;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T11:58:24.740

我认为你想要这样的东西：

```
<div class="show-panel">
   <div class="arrow">&#9650;</div>
   <div class="content">This is some content... 
                        several paragraphs for example.</div>
</div> 
```

使用以下 jQuery 操作：

```
$(".arrow").click(function(){
    $(this).next().toggle();
}); 
```

小提琴参考：http: [//jsfiddle.net/audetwebdesign/bQ8G3/](http://jsfiddle.net/audetwebdesign/bQ8G3/)

如果需要，您可以添加 CSS 样式以最初隐藏内容。最简洁的方法是将要显示/隐藏的元素包装在父元素中，然后显示/隐藏父元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T12:26:30.453

现在你可以习惯`css`

**像这样**

```
#main {overflow-y:hidden;height:100px;position:relative; background:red;}

#toggle_view{position:absolute;right:0;bottom:0;}

#arrow {position:absolute;top:50px;right:0;background:green;padding:5px; cursor:pointer;z-index:2;}
#main > #arrow ~ div{display:none;}
#main > #arrow:focus ~ div, #main > #arrow:hover ~ div{display:block;} 
```

**[演示](http://jsfiddle.net/4mjSK/)**

# c# - 使用三元语句将扩展方法分配给委托

> ID：15680790
> 
> 赞同：4
> 
> 时间：2013-03-28T11:38:38.170
> 
> 标签：c#, methods, extension-methods, ternary

# 假设

假设我们有一个接口，并且为该接口定义了以下扩展方法（*它们的实现并不重要*）

```
public interface IPerson;

public class IPersonExtensionMethods
{
    public static bool SayHello(this IPerson talker, IPerson listener);
    public static bool SayGoodbye(this IPerson talker, IPerson listener);
} 
```

# 问题

我们知道这两种扩展方法本质上是相同的，因为它们接受 2 个 type 参数`IPerson`和 return `bool`。现在，假设我们要将 1 个扩展方法分配给`Func<IPerson, IPerson, bool>`我们可以使用的类型的委托：

```
Func<IPerson, IPerson, bool> whatShouldWeSay;
if (sayHello)
{
    whatShouldWeSay = IPersonExtensionMethods.SayHello;
}
else
{
    whatShouldWeSay = IPersonExtensionMethods.SayGoodbye;
} 
```

但是，如果我们将`if`语句转换为简写形式，如下所示：

```
Func<IPerson, IPerson, bool> whatShouldWeSay = (sayHello)
    ? IPersonExtensionMethods.SayHello
    : IPersonExtensionMethods.SayGoodbye; 
```

我们得到编译错误信息：

> 无法确定条件表达式的类型，因为 'method.group' 和 'method.group' 之间没有隐式转换

# 问题

为什么会出现这个错误？是因为委托的性质是扩展方法吗？还是由于速记`if`语句如何确定结果类型？还是完全不同的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:42:19.220

发生错误是因为在三元语句中，两个结果（真和假）都需要是相同的类型。常规方法也会发生同样的事情，而不仅仅是扩展方法。您需要将它们转换为目标类型：

```
Func<IPerson, IPerson, bool> whatShouldWeSay = (sayHello) 
    ? (Func<IPerson, IPerson, bool>)IPersonExtensionMethods.SayHello
    : (Func<IPerson, IPerson, bool>)IPersonExtensionMethods.SayGoodbye; 
```

在三元语句中使用 null 时，我经历过一些这种情况，将强制转换`null`视为某种可空类型感觉很奇怪。这可以在此处以更简单的方式显示：

```
// Doesn't compile
int? a = true ? 10 : null;

// Compiles
int? a = true ? 10 : (int?)null; 
```

我们得到以下编译器错误：

> 无法确定条件表达式的类型，因为 'int' 和 '<null>' 之间没有隐式转换

# c# - C# DataGridView.Columns.AddRange

> ID：15680797
> 
> 赞同：3
> 
> 时间：2013-03-28T11:38:57.020
> 
> 标签：c#, vb.net, visual-studio-2010

我是一名 Vb.Net 程序员，不熟悉 C#

在 Vb.Net 中，我使用 AddRange 在 DataGridView 中添加多个列

```
dim Col1 As DataGridViewTextBoxColumn()
dim Col2 As DataGridViewTextBoxColumn()
    MyDataGridView1.Columns.AddRange({Col1, Col2}) 
```

这在 VB.Net 中被接受

在c#中我写过

```
DataGridViewTextBoxColumn Col1 = New DataGridViewTextBoxColumn();
DataGridViewTextBoxColumn Col2 = New DataGridViewTextBoxColumn(); 

     MyDataGridView1.Columns.AddRange({Col1, Col2}); 
```

这在 C# 中不被接受。我错在哪里？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T11:43:15.150

从[`DataGridViewColumnCollection.AddRange`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumncollection.addrange.aspx)

> 参数
> 
> 类型：System.Windows.Forms.DataGridViewColumn[]
> 
> 要添加的 DataGridViewColumn 对象数组。

所以，我认为你应该使用；

```
MyDataGridView1.Columns.AddRange(new[] { Col1, Col2 }); 
```

由于您是 C# 新手，我应该解释一下是什么`new[]`意思？

*微软*在*C# 3.0*中引入了称为*[隐式类型数组](http://msdn.microsoft.com/en-us/library/bb384090.aspx)*的概念。有了这个概念，您不必显式定义变量的数据类型，您可以指定编译器应检查数组的元素以确定应应用的类型。

 *数据类型的初始声明被*[`var`](http://msdn.microsoft.com/tr-tr/library/bb383973.aspx)*关键字替换。

```
var numbers = new[] {"one", "two", "three"}; 
```

构建时，编译器会扫描数组的内容并确定每个项目都是`string`. 因此，创建一个**字符串数组**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T11:42:23.987

```
DataGridViewTextBoxColumn Col1 = new  DataGridViewTextBoxColumn();
Col1.HeaderText = "test";
DataGridViewTextBoxColumn Col2 = new DataGridViewTextBoxColumn();
Col2.HeaderText = "test2";

MyDataGridView1.Columns.AddRange(new[] {Col1,Col2}); 
```

请注意，“新”也是小写的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T11:41:27.987

“New”关键字需要小写。

除此之外，前缀`{ Col1, Col2 }`如下：

```
MyDataGridView1.Columns.AddRange(new[] { Col1, Col2 }); 
```

此外，如果数组类型为 ，Resharper 会发出警告`DataGridViewTextBoxColumn`，因此您可能希望将数组类型与参数类型显式匹配，如下所示：

```
MyDataGridView1.Columns.AddRange(new DataGridViewColumn[] { Col1, Col2 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T11:45:17.087

试试这个：

```
MyDataGridView1.Columns.AddRange(new DataGridViewColumn[] { Col1, Col2 }); 
```

希望这可以帮助。*

# google-cloud-endpoints - Google Cloud Endpoints 中 @Named 的用途

> ID：15680799
> 
> 赞同：4
> 
> 时间：2013-03-28T11:39:05.607
> 
> 标签：google-cloud-endpoints

我不清楚 @Named 在 Google Cloud Endpoints 中的用途。文档说：

> 此注解指示在此处注入的请求中的参数名称。未使用 @Named 注释的参数被注入整个请求对象。...此示例显示了@Named 的使用：
> 
> ```
>  @ApiMethod(
>    name = "foos.remove",
>    path = "foos/{id}",
>    httpMethod = HttpMethod.DELETE)   
> public void removeFoo(@Named("id") String id){} 
> ```
> 
> 其中@Named 指定只在请求中注入id 参数。

如果在此示例中未使用 @Named，那么“注入”是什么？与“整个请求”？就此而言，究竟什么是“注入”？什么是“整个请求”？@Named 对象是否总是必须是 @Apimethod 中定义的路径的一部分？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T13:57:09.557

**编辑**：虽然我下面的回答并没有错，但它根本不完整。基本上，当您添加`@Named`注释时，参数将包含在请求 URL 的末尾：

```
http://endpointurl?parameter1=xxx&parameter2=yyy 
```

如果您不使用`@Named`，该参数将被包含（*注入*）在 POST 数据中。通过使用一些命名参数和一些未命名参数创建一个测试端点，并使用一些请求浏览器工具（例如 Firebug），您可以非常清楚地看到它。

显然，支持`@Named`注解的参数类型只有少数（我认为是 int、long、String、Boolean 及其对应的数组）。

我在下面的原始答案中所说的不是错误的，但不是完整的答案...

* * *

**原答案**：据我了解，@Named 的目的是在请求 URL 中指明参数的名称。这样，参数可以在您的应用程序中具有名称，并且在端点中公开其他名称。

这与 GSON 中的 @SerializedName 或 JDO 中的 @Column 几乎相同。所有这些注释都允许为您的参数使用 2 个不同的名称，一个在您的应用程序中，遵循 Java 命名约定，另一个名称遵循其他约定，例如 URL 或 JSON 的...

在您的示例中，您无法注意到差异，但您可以使用以下方法：

```
@ApiMethod(
  name = "remove",
  path = "remove",
  httpMethod = HttpMethod.DELETE) 
public void removeFoo(@Named("my_app_id") String myAppID){} 
```

在这种情况下，URL 中的参数名称将是：

```
https://mygaeappid.appspot.com/_ah/api/yourapi/v1/remove?my_app_id=1234 
```

不，@Named 对象并不总是必须是 ApiMethod 中定义的路径的一部分。

# php - 在 Propel 中使用 EAV 模型

> ID：15680801
> 
> 赞同：0
> 
> 时间：2013-03-28T11:39:08.280
> 
> 标签：php, mysql, orm, propel, entity-attribute-value

我有一个 EAV 结构的数据库，有这个表：

```
Entity (id, name)
Attribute (id, name)
AttributeValue(fk_id_entity, fk_id_attribute, value) 
```

我想要做的是在 Propel 中翻译以下查询：

```
SELECT entity.name, avx.value, avy.value
FROM Entity entity
INNER JOIN AttributeValue avx ON (avx.fk_id_entity = entity.id 
AND avx.name = 'X')
INNER JOIN AttributeValue avy ON (avy.fk_id_entity = entity.id 
AND avy.name = 'Y') 
```

知道我怎么能在 Popel 中做到这一点？谢谢！

LE：想法是每个实体都有两个属性 X 和 Y，我想显示所有实体的列表以及它们的 X 和 Y 属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:37:46.577

因此，这是复制您在 SQL 中的内容的一种方法，但正如我在评论中提到的那样，可能有一种更有效的方法来做到这一点。如果您对我上面的评论问题提供答案，我会看看我是否可以改进这个答案。

首先，您的模式中需要一个[交叉引用表](http://propelorm.org/documentation/04-relationships.html#many-to-many-relationships)。我会假设你这样做，并且它被称为`AttributeValue`. 然后将您的联接添加到`EntityQuery`并添加其他条件。

**不幸的是，Propel 中似乎有一个错误会阻止下面的代码生成正确的 SQL。**

```
$results = EntityQuery::create()
  ->join('Entity.AttributeValue avx')
  ->join('avx.Attribute xa')
  ->addJoinCondition('xa', 'xa.name = ?', 'X')
  ->join('Entity.AttributeValue avy')
  ->join('avy.Attribute ya')
  ->addJoinCondition('ya', 'ya.name = ?', 'Y')
  ->select(array('entity.name', 'avx.value', 'avy.value')); 
```

这**应该**产生以下 SQL：

```
SELECT entity.name AS 'entity.name', 
       avx.value AS 'avx.value', 
       avy.value AS 'avy.value'
  FROM `entity` 
    INNER JOIN `attribute_value` `avx` ON (entity.id = avx.entity_id) 
    INNER JOIN `attribute` `ax` ON (avx.attribute_id = ax.id AND ax.name =  'X') 
    INNER JOIN `attribute_value` `avy` ON (entity.id = avy.entity_id) 
    INNER JOIN `attribute` `ay` ON (avy.attribute_id = ay.id AND ay.name =  'Y') 
```

不幸的是，这是生成的：

```
SELECT entity.name AS 'entity.name', 
       aatribute_value.value AS 'avx.value', 
       aatribute_value.value AS 'avx.value'
  FROM `entity` 
    INNER JOIN `attribute_value` `avx` ON (entity.id = avx.entity_id) 
    INNER JOIN `attribute` `ax` ON (avx.attribute_id = ax.id AND attribute.name =  'X') 
    INNER JOIN `attribute_value` `avy` ON (entity.id = avy.entity_id) 
    INNER JOIN `attribute` `ay` ON (avy.attribute_id = ay.id AND attribute.name =  'Y') 
```

（问题是`SELECT`line 和`INNER JOIN`on `attribute`which uses`attribute.name = 'X'`而不是正确的`ax.name = 'X'`。）

因此，您可以使用手动查询运行**正确**的SQL，或者等待修复错误（我将尝试[在 Guthub 上写一个问题](https://github.com/propelorm/Propel/issues)并进行修复。）

抱歉，我无法提供更多帮助。

[从Propel 文档中](http://propelorm.org/reference/model-criteria.html#joining-tables)收集的关于连接表的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:35:55.267

它实际工作的是以下内容：

```
$result = Entity_EntityQuery::create()
->withColumn('alias1.value', 'xvalue')
->withColumn('alias2.value', 'yvalue')
->innerjoinValue('alias1')
->useValueQuery('alias1')
->filterbyFkAttribute('x attribute id')
->endUse()
->innerjoinValue('alias1')
->useValueQuery('alias1')
->filterbyFkAttribute('y attribute id')
->endUse()
...//conditions
->find() 
```

感谢大家观看和回复！

# visual-studio-2012 - 如何在预构建事件中使用 $(OutDir)？

> ID：15680802
> 
> 赞同：2
> 
> 时间：2013-03-28T11:39:09.383
> 
> 标签：visual-studio-2012, msbuild, tfsbuild

`$(OutDir) = \bin\Release (in local with VS2012)`

`$(OutDir) = C:\\...\BuildDefinition\Binaries (on TFS2010 Team Build)`

如何在 Pre-build 事件中编写在这两种情况下都有效的 XCOPY？

在我的 project2 中，我引用了 project1。所以我需要这样做：

在本地：

`XCOPY /Y $(SolutionDir)Project1\$(OutDir)Project1.dll"`

`"$(SolutionDir)MyProject2\Objects\Assemblies"`

关于团队建设

`XCOPY /Y "$(OutDir)Project1.dll" "$(SolutionDir)Project2\Objects\Assemblies"`

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T11:46:03.720

这是一个有用的构建事件检查：

```
if "$(BuildingInsideVisualStudio)" == "" 
```

这将允许您在 Visual Studio 中定义构建事件，而不是在 TeamBuild(msbuild) 上运行时

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T13:25:05.773

作为最佳实践，您不应从 TFS 构建或 Visual Studio 在预构建目标中调用 XCOPY 以获得所需的 DLL 引用。

在项目 2 中创建对项目 1 的项目引用。这将确保正确编译和引用最新的代码。

TFS 会自动为您移动 dll。如果您将引用设置为复制本地，Visual Studio 也会自动知道如何找到它，并将两个 dll 移动到您的输出文件夹中。

如果您有一个未编译的第 3 方 dll，那么最佳做法是创建一个名为 lib\ 或 dependencies\ 的文件夹并从该位置引用该 dll。

希望这可以帮助。

# php - Magento 销售（特价）CMS 页面

> ID：15680807
> 
> 赞同：0
> 
> 时间：2013-03-28T11:39:22.843
> 
> 标签：php, magento, magento-1.7

我已经尝试了几个在谷歌周围找到的教程......但这些似乎都不适合我。

我需要为具有特殊价格的产品创建一个销售页面，它就像一个普通的类别页面，带有分页等。我认为最好的方法是将它创建为一个 CMS，这样以后我就可以拥有这样的 url ：**myshop.com/sales**。但我没有在 1.7.0.2 上工作

有人可以帮忙吗？

# java - 安装到 C:/Program Files - java.io.FileNotFoundException 时，Java 应用程序无法写入/读取序列化文件：（访问被拒绝）

> ID：15680808
> 
> 赞同：1
> 
> 时间：2013-03-28T11:39:30.570
> 
> 标签：java, serialization, installation, filenotfoundexception, access-denied

我的应用程序使用此代码永久保存 ArrayList，以便在重新启动应用程序时调用它。

```
 private static void storeDevices() {
    // Object serialization
    try {
        FileOutputStream fos = new FileOutputStream("devices.ser");
        ObjectOutputStream oos = new ObjectOutputStream(fos);
        oos.writeObject(devices);
        oos.flush();
        oos.close();
    }
    catch(Exception e) {
        showAlert("Store Devices", "Exception storing devices to file: " + e);
    } 
} 
```

当我从 Netbeans 运行时，一切正常。我已将应用程序包装在安装程序中（使用 Launch4J 和 Inno Setup Compiler），当我将应用程序安装到 C:/Program Files/MyApp（在 Windows 7 上）时，上面的代码给出了以下异常：

> 将设备存储到文件的异常：java.io.FileNotFoundException：devices.ser（访问被拒绝）

但是，当我安装到 C:/MyApp 时，一切正常。

这与从 C:/Program Files 目录继承的读/写权限有关吗？我知道我可以通过在 C:/temp 目录或类似的地方创建文件来解决这个问题，但我不想诉诸于此。那么有什么方法可以在我的 C:/Program Files/MyApp 目录中写入/读取文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:43:03.240

从 windows vista 开始，没有明确的身份验证，任何应用程序都无法访问系统文件夹区域。（程序文件/window32/ 等文件夹......）对于已安装的应用程序，身份验证由 windows-installer 完成。

为了能够访问（读/写），您需要以管理员身份运行，或者您需要更改这些文件夹的权限（不推荐）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:06:26.377

我的解决方案是使用环境变量来获取正确的目录来存储应用程序数据。这是我创建的方法：

```
private String getAppDataDirectory(String subDirectory, boolean create) {

    String appDataDirectory;
    try {
        appDataDirectory = System.getenv("APPDATA"); //Windows
        //todo - could try "ALLUSERSPROFILE"
        if (appDataDirectory != null) {
            appDataDirectory += File.separator + subDirectory + File.separator;
        }
        else { //appDataDirectory is null
            appDataDirectory = System.getenv("HOME"); //Unix
            if (appDataDirectory != null) {
                appDataDirectory +=  File.separator + subDirectory + File.separator;
            }
            else { //appDataDirectory is still null
                throw new Exception("Could not access APPDATA or HOME environment variables");
            }
        }
    }
    catch(Exception e) {
        e.printStackTrace();
        appDataDirectory = "";
    }

    if (create && appDataDirectory != null && appDataDirectory.length() > 0) {
        try {
            File dir = new File(appDataDirectory);
            dir.mkdir();
        }
        catch(Exception e) {
            e.printStackTrace();
        }
    }

    //log("appDataDirectory: " + appDataDirectory);
    return appDataDirectory;
} 
```

# python - 从递归模式中提取事件

> ID：15680809
> 
> 赞同：0
> 
> 时间：2013-03-28T11:39:33.593
> 
> 标签：python

我一直在开发一个基于事件的 AJAX 应用程序，该应用程序以下列格式（Django 模型）将重复事件存储在表中：

```
event_id = models.CharField(primary_key=True, max_length=24)
# start_date - the start date of the first event in a series
start_date = models.DateTimeField()
# the end date of the last event in a series
end_date = models.DateTimeField()
# Length of the occurence
event_length = models.BigIntegerField(null=True, blank=True, default=0)
rec_type = models.CharField(max_length=32) 
```

rec_type 以以下格式存储数据：

```
[type]_[count]_[day]_[count2]_[days]#[extra]

type - the type of repeation: 'day','week','month','year'.
count - the interval between events in the “type” units.
day and count2 - define a day of a month ( first Monday, third Friday, etc ).
days - the comma-separated list of affected week days.
extra - the extra info that can be used to change presentation of recurring details. 
```

例如：

```
day_3___ - each three days
month _2___ - each two month
month_1_1_2_ - second Monday of each month
week_2___1,5 - Monday and Friday of each second week 
```

这工作正常，并允许简洁地传输许多事件，但我现在需要提取在给定范围内发生的所有事件。例如，在特定的日期、星期或月份，我对如何最好地接近有点迷茫。

特别是，我被困在如何检查具有给定重复模式的事件是否有资格出现在结果中。

这里最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:01:54.250

就个人而言，我会从 python-dateutil ( [http://labix.org/python-dateutil](http://labix.org/python-dateutil) ) 存储一个 rrule 对象，而不是发明自己的重复格式。然后，您可以定义一些`rrule. between(after, before)`用于为给定范围生成事件对象实例的方法。

但是有一个问题，dateutil 的 rrule 对象*不能正确腌制*，因此您应该定义自己的将对象序列化到数据库的机制。我通常使用 JSON 表示的关键字参数来实例化规则。恼人的边缘情况是，如果你想存储像“每月第二个星期一”这样的东西，你必须对 MO(2) 做额外的工作，因为它返回的值没有用。这很难解释，但是当你尝试它时你会发现问题。

我不知道有任何有效的方法可以在一个范围内找到所有符合条件的事件，但您必须加载所有可能与该范围重叠的事件模型。因此，您将始终加载可能比最终使用更多的数据。只要确保它相对聪明，以减轻负担。由于没有人自己向数据库添加重复处理，我不知道有什么方法可以改进这一点。

# c# - 如何在Window中获取光标下的单词？

> ID：15680812
> 
> 赞同：1
> 
> 时间：2013-03-28T11:39:46.547
> 
> 标签：c#, mouseevent, onmouseover

我的代码现在只能从文本框中获取文本。我想从窗口中获取文本，例如从网页或文本文件到文本框。我该怎么做？

```
 private void textBox2_MouseMove(object sender, MouseEventArgs e)
    {
        if (!(sender is TextBox)) return;
        var targetTextBox = sender as TextBox;
        if (targetTextBox.TextLength < 1) return;

        var currentTextIndex = targetTextBox.GetCharIndexFromPosition(e.Location);
        var wordRegex = new Regex(@"(\w+)");
        var words = wordRegex.Matches(targetTextBox.Text);
        if (words.Count < 1) return;

        var currentWord = string.Empty;
        for (var i = words.Count - 1; i >= 0; i--)
        {
            if (words[i].Index <= currentTextIndex)
            {
                currentWord = words[i].Value;
                break;
            }
        }

        if (currentWord == string.Empty) return;
        //toolTip1.SetToolTip(targetTextBox, currentWord);
        textBox3.Text = currentWord;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:56:51.613

从表面上看问题，一般来说，能够对所有可能的窗口执行此操作的唯一方法是屏幕抓取并使用 OCR 转换为文本。这是因为没有一个通用接口可供所有程序用来生成文本。

现在，您可以做一些适用于许多程序的事情。您可以使用可访问性或自动化 API。这些技术与屏幕阅读器使用的技术相同。文档可以在这里找到：

*   [UI 自动化 (UIA)](http://msdn.microsoft.com/en-gb/library/ms747327.aspx)。
*   [Microsoft 活动辅助功能 (MSAA)](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373592.aspx)。

据我了解，UIA 是 MSAA 的继承者，在新应用程序中是首选。

# javascript - 监听 Firefox 扩展中的所有传入流量

> ID：15680817
> 
> 赞同：1
> 
> 时间：2013-03-28T11:40:01.773
> 
> 标签：javascript, firefox, firefox-addon

有没有办法使用扩展 api 监听所有传入流量？我尝试使用我尝试使用监听器监听“http-on-examine-response”但是每当我启动它时浏览器都会卡住

帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:00:22.443

简单的方法是使用Firefox addon-sdk，官方文档有示例

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/system/events.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/system/events.html)

# android - Android 作为 ATtiny85 Digispark 的主机

> ID：15680818
> 
> 赞同：4
> 
> 时间：2013-03-28T11:40:05.133
> 
> 标签：android, usb, arduino, atmel

我一直在开发一个 Android 应用程序，它将作为基于 Arduino 的[Digispark](http://www.kickstarter.com/projects/digistump/digispark-the-tiny-arduino-enabled-usb-dev-board?ref=home_popular)开发板的主机。该板的问题之一是它没有专用的 USB 控制器，而是使用低速 USB 总线的软件实现。

话虽如此，当我将 Digispark 连接到我的[Droid Bionic](http://en.wikipedia.org/wiki/Droid_Bionic)时，我可以在我自己的应用程序中使用枚举以及通过使用 USB 主机控制器应用程序来查看设备。这似乎是成功的一半。

我现在坚持的是以下内容。当我连接 Digispark 并尝试运行我的应用程序时，枚举会返回多个匹配相同[VID](http://www.usb.org/developers/vendor/)和[PID](http://en.wikipedia.org/wiki/Universal_Serial_Bus#Device_classes)的设备。我看不出这是怎么可能的，但这是我的代码示例和我得到的输出：

### 代码

```
UsbDevice anyDevice;
while(deviceIterator.hasNext()){
    anyDevice = deviceIterator.next();
    if(anyDevice.getVendorId() == 5824 && anyDevice.getProductId() == 1503){
        device = anyDevice;
        Log.d(TAG, "vid and pid " + anyDevice.getVendorId() + " " + anyDevice.getProductId());
        Log.d(TAG, "? " + anyDevice.getDeviceName());
        Log.d(TAG, "? " + anyDevice.getDeviceId());
        Log.d(TAG, "? " + anyDevice.getInterface(0).getEndpoint(0));
        Log.d(TAG, "DIGI FOUND");
    }
}
Log.i(TAG," No more devices connected."); 
```

### Eclipse 日志输出

```
03-28 19:32:40.773: D/USBTest(6228): vid and pid 5824 1503
03-28 19:32:40.773: D/USBTest(6228): ? /dev/bus/usb/003/003
03-28 19:32:40.773: D/USBTest(6228): ? 3003
03-28 19:32:40.773: D/USBTest(6228): ? UsbEndpoint[mAddress=129,mAttributes=3,mMaxPacketSize=8,mInterval=10]
03-28 19:32:40.773: D/USBTest(6228): DIGI FOUND
03-28 19:32:40.773: D/USBTest(6228): vid and pid 5824 1503
03-28 19:32:40.773: D/USBTest(6228): ? /dev/bus/usb/003/005
03-28 19:32:40.773: D/USBTest(6228): ? 3005
03-28 19:32:40.773: D/USBTest(6228): ? UsbEndpoint[mAddress=129,mAttributes=3,mMaxPacketSize=8,mInterval=10]
03-28 19:32:40.773: D/USBTest(6228): DIGI FOUND
03-28 19:32:40.773: D/USBTest(6228): vid and pid 5824 1503
03-28 19:32:40.773: D/USBTest(6228): ? /dev/bus/usb/003/015
03-28 19:32:40.773: D/USBTest(6228): ? 3015
03-28 19:32:40.773: D/USBTest(6228): ? UsbEndpoint[mAddress=129,mAttributes=3,mMaxPacketSize=8,mInterval=10]
03-28 19:32:40.773: D/USBTest(6228): DIGI FOUND
03-28 19:32:40.773: I/USBTest(6228):  No more devices connected. 
```

这是 Digispark 和 Android 组合的软件问题，还是由于我糟糕的软件技能而导致的错误？

# c# - 如何在 wpf 中打印文件？

> ID：15680819
> 
> 赞同：0
> 
> 时间：2013-03-28T11:40:06.447
> 
> 标签：c#, wpf, printdialog

如何使用 PrintDialog.PrintDocument() 方法在 WPF 中打印指定文件？

我想使用打印对话框打印 html 页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:50:10.130

您需要某种 html 渲染器才能打印它。IEExplorer（查看 shdocvw.dll 和 mshtml.dll）或 Awesomium 等......祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:56:27.043

可以通过使用 C# 中 WebBrowser 类的 Print() 方法来执行此操作。只需将内容放入 WebBrowser 控件，如下所示：

`webBrowser1.DocumentContent = openfiledialog.FileName;`

然后只需调用“webBrowser1.Print();” 方法。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.print.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.print.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T05:29:53.647

参考 MIcrosft.mshtml com 对象

mshtml.IHTMLDocument2 doc = rptPreview.Document as mshtml.IHTMLDocument2; doc.execCommand("打印", true, null);

# c++ - 将结构元素插入有序集合失败

> ID：15680820
> 
> 赞同：2
> 
> 时间：2013-03-28T11:40:10.133
> 
> 标签：c++, insert, set

我需要将元素结构插入到集合中，如下所示：

```
// In hpp file at private part of a class:
struct BestPair {
        unsigned int p1;
        unsigned int p2;
        double goodness;

        bool operator<(BestPair other) const                      // Set descendent order.                                    
        {
            return goodness > other.goodness;
        }
    }; 
```

该集合应按后代顺序排列。

```
// at the cpp file, inside a method of the same class
void Pairs::fillGlobalStack (double *** source, unsigned int sz)
{
    BestPair bp;

    for (unsigned int i = 0; i != sz; ++i) {
        for (unsigned int j = i+1; j != sz; ++j) {
            bp.p1 = i;        
            bp.p2 = j;
            bp.goodness = (* source) [i][j];
            global_stack.insert (bp);                          // Insert into global stack.                                   
            if (debug) {
                cout << "[fillGlobalStack] i: " << i << "  j: " << j << "  goodness: " << bp.goodness << "  global_stack.size\
() " << global_stack.size() << endl;
            }
        }
    }
} 
```

但是在运行时，代码从不插入第三个、第四个等元素，这对我来说似乎很奇怪，因为它们是不同的元素。

```
// The output:
[fillGlobalStack] p1: 0  p2: 1  goodness: 0  global_stack.size() 1
[fillGlobalStack] p1: 0  p2: 2  goodness: 0.794  global_stack.size() 2
[fillGlobalStack] p1: 0  p2: 3  goodness: 0.794  global_stack.size() 2  <-- It should be 3 
```

我究竟做错了什么？如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:42:15.980

如果两个元素相等`goodness`，则认为它们相等，并且不能存储在`set`. `multiset`如果您想允许重复，请改用。

一般来说，如果两者都不相等，则元素被认为是相等的，`a < b`并且`b < a`

如果您不想允许完全重复，但允许`goodness`- 重复，您应该添加任何您想要的排序（如果`goodness`相等），例如

```
bool operator<(const BestPair& other) const
{
    return goodness > other.goodness || goodness == other.goodnes && p1 < other.p1 || goodness == other.goodness && p1 == other.p1 && p2 < other.p2;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:43:05.770

它不应该是三个，因为您的第三个元素等于您的第二个元素（两者的优度均为 0.794）。集合不插入重复项。也许你需要`std::multiset`，但很难确定。我不会认为任何类型的集合都是堆栈的良好实现。

# java - 线程变量不断变化

> ID：15680823
> 
> 赞同：1
> 
> 时间：2013-03-28T11:40:23.567
> 
> 标签：java, multithreading

我有两个线程通过同一个类 BouncingObject 运行。一个 BouncingObject 只是不断地从屏幕边界反弹。在某些时候，我想在主线程中重新定义那些屏幕边界。但由于某种原因，它并不完全有效。当我使用 alterBounceBoundaries 方法更改屏幕边界时，它会更改它们，但不会完全更改。边界值在使用该方法和初始化值的设置边界之间保持变化。为什么？。正如你所看到的，我在线程运行时打印出限制的值，我可以看到 orig_x、orig_y、lim_x、lim_y 的值在更改的值和初始化的值之间切换。这些值是bounceobject 检测屏幕边界的方式。

```
class BouncingObject extends D_Object implements Runnable 
{   
    public int MAX_SPEED = 20;
    public int MIN_SPEED = 10;
    public volatile double orig_x = 0;
    public volatile double orig_y = 0;
    public volatile double lim_x = 0;
    public volatile double lim_y = 0;
    public String rand = "rand";

    BouncingObject(String nm,BufferedImage image, int x,int y, int w, int h, int ox, int oy, int spd){
        super(nm,image,x,y,w,h,ox,oy,spd);
        orig_x = 0;
        orig_y = 0;
        lim_x = 603;
        lim_y = 393;
        Thread new_bounce_thread = new Thread(this); 
        new_bounce_thread.start();
    }

    //run this code in it's own thread
    public void run() {
        while(true){
            //sleep for a short time to create a slower frame rate
            try {Thread.sleep (20); }  
            catch (InterruptedException e){} 
            this.bounceObject(orig_x,orig_y,lim_x,lim_y,"rand");
            System.out.println("orig_x: "+orig_x);
            System.out.println("orig_y: "+orig_y);
            System.out.println("lim_x: "+lim_x);
            System.out.println("lim_y: "+lim_y);
        }
    }

public synchronized void alterBounceBoundaries(double origin_x, double origin_y, double limit_x, double limit_y, String rand_o_no){
        orig_x = origin_x;
        orig_y = origin_y;
        lim_x = limit_x;
        lim_y = limit_y;
        rand = rand_o_no;
        System.out.println("Change Boundaries");
    }

//used to determine when the bouncingobject has reached a little and needs to bounce
public synchronized void bounceObject(double origin_x, double origin_y, double limit_x, double limit_y, String rand_o_no){
        if(obj_x > old_obj_x){
            old_obj_x = obj_x;
.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:52:59.587

如果您有两个线程运行弹跳对象，则可能有两个对象被弹跳。我敢打赌你只是改变了其中一个的限制。

本质上，当您想要更改限制时，请确保更改所有对象的限制。

另一种选择是进行限制`static`，以便对象的所有实例共享它们。

# sql - 将变量与数据库条目进行比较

> ID：15680824
> 
> 赞同：1
> 
> 时间：2013-03-28T11:40:27.067
> 
> 标签：sql, database, variables, compare

我想将一个变量与数据库条目进行比较，如果它们匹配则从该帐户中提取一些信息，如果它们不匹配则结束查询。

```
SELECT
    Account.ID AS ID,
    Account.Fax AS Fax,
    Account.MsgBalance AS MsgBalance
FROM
    Account
WHERE
    Account.ID = '{=Variables("AccountIDPull")}'
    AND Account.Fax LIKE '%{=Variables("NumberPull")}' 
```

（我知道这点不起作用，但我该怎么做？）然后获取 Account.MsgBalance 详细信息 ELSE End 查询

# ruby-on-rails - 为什么 Pygment.rb 不突出显示 tags within properly -i.e. Google Prettify friendly tags?

> ID：15680830
> 
> 赞同：6
> 
> 时间：2013-03-28T11:40:43.480
> 
> 标签：ruby-on-rails, markdown, pygments, redcarpet

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:26:45.397

为了重现该问题，您还可以添加其他内容吗？喜欢question.body的内容？

如果我在控制器上做这样的事情：

```
class HomeController < ApplicationController
  def index
    @data = <<EOF
~~~ cpp
#include <fstream.h>

int main (int argc, char *argv[]) {
return(0);
}
~~~
EOF
  end
end 
```

和观点：

```
<pre class="lang-cpp prettyprint-override">
  <%= markdown @data %>
</pre> 
```

它工作得很好，我可以毫无问题地看到解析的代码。question.body 的内容是什么？你能保存网页的内容（从你的浏览器）并将它保存在一个[要点](https://gist.github.com/)上以便我们调试吗？

谢谢

* * *

关于您的最后一条评论，它是一个简单的 CSS 问题，在您的样式表上，您可以添加：

```
.code {
  color: #DD1144 !important;
} 
```

它会起作用，问题是你有一个写成这样的css规则：

```
pre .code {
  color: inherited;
} 
```

那是使用从 body 类继承的颜色 #333333

* * *

这是一个关于更新 css 后的样子的屏幕：

![在此处输入图像描述](../Images/cf96a062a89791efda7bc756814a9ca1.png)

* * *

带有您的代码的示例应用程序运行良好，我需要一个示例应用程序代码应用程序，或者一个示例代码，我们可以在其中重现您遇到的问题（没有用于格式化代码的正确 css/样式表）。

这是示例应用程序外观的示例：

![在此处输入图像描述](../Images/895f921388dc26dd76bef78724b1bbb5.png)

* * *

![在此处输入图像描述](../Images/e50be490e83dd8dde0b5e4de8b555b03.png)

* * *

最终编辑，问题不在于库，也不是您呈现问题的方式，而是您正在呈现的内容，检查问题的正文，这是我在实际呈现的正文中遇到的问题之一因为库应该呈现，但它没有像您期望的那样呈现:)

```
@data = <<EOF
    <p>I've been messing around with <a href="http://en.wikipedia.org/wiki/JSON">JSON</a> for some time, just pushing it out as text and it hasn't hurt anybody (that I know of), but I'd like to start doing things properly.</p>

    <p>I have seen <em>so</em> many purported "standards" for the JSON content type:</p>

    <pre><code>application/json
    application/x-javascript
    text/javascript
    text/x-javascript
    text/x-json
    </code></pre>

    <p>But which is correct, or best? I gather that there are security and browser support issues varying between them.</p>

    <p>I know there's a similar question, <em><a href="http://stackoverflow.com/questions/404470/what-mime-type-if-json-is-being-returned-by-a-rest-api">What MIME type if JSON is being returned by a REST API?</a></em>, but I'd like a slightly more targeted answer.</p>
EOF 
```

这是我刚刚从 stackoverflow 复制/粘贴的另一个，它呈现的所有语法都突出显示，你注意到区别了吗？因此，更新您的爬虫以获取正确格式的问题，它将起作用

```
@data = <<EOF
Here is a piece of C++ code that shows some very peculiar performance. For some strange reason, sorting the data miraculously speeds up the code by almost 6x:

<!-- language: lang-cpp -->

    #include <algorithm>
    #include <ctime>
    #include <iostream>

    int main()
    {
        // Generate data
        const unsigned arraySize = 32768;
        int data[arraySize];

        for (unsigned c = 0; c < arraySize; ++c)
            data[c] = std::rand() % 256;

        // !!! With this, the next loop runs faster
        std::sort(data, data + arraySize);

        // Test
        clock_t start = clock();
        long long sum = 0;

        for (unsigned i = 0; i < 100000; ++i)
        {
            // Primary loop
            for (unsigned c = 0; c < arraySize; ++c)
            {
                if (data[c] >= 128)
                    sum += data[c];
            }
        }

        double elapsedTime = static_cast<double>(clock() - start) / CLOCKS_PER_SEC;

        std::cout << elapsedTime << std::endl;
        std::cout << "sum = " << sum << std::endl;
    }

 - Without `std::sort(data, data + arraySize);`, the code runs in **11.54** seconds.
 - With the sorted data, the code runs in **1.93** seconds.

----------

Initially I thought this might be just a language or compiler anomaly. So I tried it in Java:

<!-- language: lang-java -->

    import java.util.Arrays;
    import java.util.Random;

    public class Main
    {
        public static void main(String[] args)
        {
            // Generate data
            int arraySize = 32768;
            int data[] = new int[arraySize];

            Random rnd = new Random(0);
            for (int c = 0; c < arraySize; ++c)
                data[c] = rnd.nextInt() % 256;

            // !!! With this, the next loop runs faster
            Arrays.sort(data);

            // Test
            long start = System.nanoTime();
            long sum = 0;

            for (int i = 0; i < 100000; ++i)
            {
                // Primary loop
                for (int c = 0; c < arraySize; ++c)
                {
                    if (data[c] >= 128)
                        sum += data[c];
                }
            }

            System.out.println((System.nanoTime() - start) / 1000000000.0);
            System.out.println("sum = " + sum);
        }
    }

with a similar but less extreme result.

----------

My first thought was that sorting brings the data into cache, but my next thought was how silly that is because the array was just generated.

What is going on? Why is a sorted array faster than an unsorted array? The code is summing up some independent terms, the order should not matter.

EOF 
```

# javascript - 如何在 javascript 中使用名称中的 var

> ID：15680833
> 
> 赞同：-1
> 
> 时间：2013-03-28T11:40:46.870
> 
> 标签：javascript, variables

如何在以下代码中在窗口名称中使用我的 rand：

```
var rand = 185656;
setTimeout("win+rand+2 = window.open('url'+secid , '_blank')",2000); 
```

+rand+ 不工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:44:46.013

不要将字符串传递给`setTimeout`. 而是传递一个函数并在 上显式设置您的全局属性`window`，这将允许您使用方括号表示法：

```
setTimeout(function () {
    window["win" + rand + "2"] = window.open("url" + secid, "_blank");
}, 2000); 
```

不将字符串传递给`setTimeout`(or `setInterval`) 的原因是它是 的别名`eval`，这可能很危险。

您当前拥有的内容将产生参考错误。它实际上就像这样做，这显然永远不会起作用：

```
"a" + "b" = "c"; // ReferenceError: Invalid left-hand side in assignment 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:42:58.753

它必须在引号之外。

```
setTimeout("win"+rand+"2 = window.open('url'+secid , '_blank')",2000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T11:43:12.423

您需要再次“打开”和“关闭”字符串：

```
setTimeout("win" + rand + "2 = window.open('url'" + secid + " , '_blank')",2000); 
```

有关非常基础的信息，请参阅**[这篇文章](http://www.quirksmode.org/js/strings.html)**。

除此之外，您不应该将可执行代码传递给`setTimeout`（它将得到`eval`'d），请使用函数引用或匿名函数来执行此操作。

此外，像这样构造 var 名称也是一个坏主意。为此查看对象和键。

你可以这样做：

```
setTimeout(function(){
    var rand = 185656;
    window['win' + rand + '2'] = window.open('url'+secid , '_blank'); //creates a global variable by adding a property to the global object
}, 2000); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T11:44:51.720

首先，[不要将字符串传递给 setTimeout](https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea)。请改用回调函数。然后变量必须在要连接的字符串（引号）之外：

```
var rand = 185656;
setTimeout(function() {
    window["win" + rand + "2"] = window.open('url'+secid , '_blank');
}, 2000); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T11:44:17.623

可能是报价有问题

```
setTimeout("win"+parseInt(rand)+"2 = window.open('url'+secid , '_blank')",2000); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T11:44:57.513

setTimeout("win" + rand + "2 = window.open('url'+secid , '_blank')",2000);

# python - Netrc in Python

> ID：15680836
> 
> 赞同：0
> 
> 时间：2013-03-28T11:41:07.257
> 
> 标签：python, .netrc

I am trying to run a piece of code using netrc lib in Python. I got examples from the Internet, but they have all failed at the first line.

```
import netrc

info = netrc.netrc()

Traceback (most recent call last):
  File "./netrc.py", line 2, in <module>
    import netrc
  File "/usr/local/etc/xxx/netrc.py", line 5, in <module>
    info = netrc.netrc()
TypeError: 'module' object is not callable 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:03:37.813

问题是您的脚本文件的名称：`netrc.py`它与模块名称相同。重命名它。

提供 filename to`netrc.netrc()`导致仅使用特定的 netrc 文件代替默认的`~\.netrc`.

# java - how to send the text message to multiple numbers in blackberry java applications?

> ID：15680840
> 
> 赞同：0
> 
> 时间：2013-03-28T11:41:20.680
> 
> 标签：java, text, blackberry, sms, blackberry-jde

Send the Text message(SMS) to multiple numbers in blackberry java applications. i tried the program to send the text message with single mobile numbers. how to i do in multiple mobile numbers?

This code is i'm using to send the message to multiple mobile number. Its shows the log as NullPointer Exception.

```
package mypackage;
import java.io.IOException;
import javax.microedition.io.Connector;
import javax.microedition.io.Datagram;
import javax.microedition.io.DatagramConnection;
import javax.wireless.messaging.MessageConnection;
import javax.wireless.messaging.TextMessage;
import net.rim.device.api.system.RadioInfo;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.FieldChangeListener;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.ButtonField;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.component.EditField;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.container.MainScreen;
    public final class MyScreen extends MainScreen
    {
        String[] numbers={"number1","number2","number3"};
        public MyScreen()
        {        
            // Set the displayed title of the screen       
            setTitle("Sending SMS");
            LabelField ph_no_lbl= new LabelField("Enter the Phone Number");
            LabelField msg_lbl= new LabelField("Enter the Message");
            LabelField f_numbers= new LabelField();
            final EditField phone_number_edit= new EditField(Field.EDITABLE|FOCUSABLE);
            final EditField message_edit= new EditField(Field.EDITABLE|FOCUSABLE);
            ButtonField send = new ButtonField(Field.FOCUSABLE);
            send.setLabel("Click Here to Send");
            StringBuffer result = new StringBuffer();
            for (int i = 0; i < numbers.length; i++) {
               result.append( numbers[i]+"\n" );
               //result.append( optional separator );
            }
            String mynewstring = result.toString();;
            phone_number_edit.setText(mynewstring);
            add(ph_no_lbl);
            add(phone_number_edit);
            add(msg_lbl);
            add(message_edit);
            add(send);
            send.setChangeListener(new FieldChangeListener() {

            public void fieldChanged(Field field, int context) {
                // TODO Auto-generated method stub
                final String getNumber= phone_number_edit.getText().toString();
                final String getMessage= message_edit.getText().toString();
                if(getNumber.length()==0 || getNumber.length()<=9 || getMessage.length()==0)
                {
                    Dialog.alert("Enter the Fields CareFully");
                }
                else
                {
                sendSMS(getNumber, getMessage);
                }
            }
        });
    }
//<<<<<<<Method Two>>>>>>>>>>>>>>>>>>>>
public static void sendSMS(final String no, final String msg) {
    // try {
    new Thread() {
        public void run() {

            boolean smsSuccess = false;
            if (RadioInfo.getNetworkType() == RadioInfo.NETWORK_CDMA) {

                DatagramConnection dc = null;
                try {
                    dc = (DatagramConnection) Connector.open("sms://" + no);
                    byte[] data = msg.getBytes();
                    Datagram dg = dc.newDatagram(dc.getMaximumLength());
                    dg.setData(data, 0, data.length);
                    dc.send(dg);
                    // / send successfully
                    smsSuccess = true;
                } catch (Exception e) {
                    System.out.println("Exception 1 : " + e.toString());
                    e.printStackTrace();
                    smsSuccess = false;
                } finally {
                    try {
                        dc.close();
                        dc = null;
                    } catch (IOException e) {
                        System.out.println("Exception 2 : " + e.toString());
                        e.printStackTrace();
                    }
                }
            } else {
                MessageConnection conn = null;
                try {
                    conn = (MessageConnection) Connector
                            .open("sms://" + no);
                    TextMessage tmsg = (TextMessage) conn
                            .newMessage(MessageConnection.TEXT_MESSAGE);
                    tmsg.setAddress("sms://" + no);
                    tmsg.setPayloadText(msg);
                    conn.send(tmsg);
                    smsSuccess = true;
                } catch (Exception e) {
                    smsSuccess = false;
                    System.out.println("Exception 3 : " + e.toString());
                    e.printStackTrace();
                } finally {
                    try {
                        conn.close();
                        conn = null;
                    } catch (IOException e) {
                        System.out.println("Exception 4 : " + e.toString());
                        e.printStackTrace();
                    }
                }
            }
            if(smsSuccess)
            {
                UiApplication.getUiApplication().invokeLater(new Runnable() {

                    public void run() {
                        // TODO Auto-generated method stub
                        Dialog.alert("Message Sending Succcessfully :-)");
                    }
                }); 
            }else
            {
                UiApplication.getUiApplication().invokeLater(new Runnable() {

                    public void run() {
                        // TODO Auto-generated method stub
                        Dialog.alert("Message Sending Failure :-(");
                    }
                }); 

            }

        }
    }.start();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:45:40.570

以编程方式为多个收件人发送短信：[链接](http://supportforums.blackberry.com/t5/Java-Development/Issue-with-sending-SMS-programmatically-for-multiple-recipients/m-p/600756#M124853)

# objective-c - How to like and comment on facebook posts from native ios app?

> ID：15680841
> 
> 赞同：2
> 
> 时间：2013-03-28T11:41:22.743
> 
> 标签：objective-c

I would like to know how to like post of facebook from native ios app and comment on post via native ios app. please provide any kind of sample code from the same.I am newbie.Any kind of help would be appreciated.Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:54:19.690

如果你访问[Ray Wenderlich 的](http://www.raywenderlich.com)网站，他有很多关于如何实现这一点的教程。他还有一本关于在 Facebook 和 twitter 上使用新社交框架的好书。这是一个很好的资源。

# actionscript-3 - AS3 如何设置光标属性移动

> ID：15680842
> 
> 赞同：0
> 
> 时间：2013-03-28T11:41:25.507
> 
> 标签：actionscript-3, cursor, mouse

我无法将我的闪光光标从自动设置为移动，有什么帮助吗？

```
private function itemCursorMove(e:MouseEvent){

Mouse.cursor = "move";

e.currentTarget.addEventListener(MouseEvent.MOUSE_OUT,itemCursorAuto);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:56:25.387

您必须手动`registerCursor()`“移动”光标。为了注册新的鼠标光标，您需要：

1.  包含光标形状的位图图像向量。长度可以为 1，形状单一。最大位图大小为 32x32。
2.  定义的热点（实际与环境交互的点），您可以根据图像手动定义它。
3.  `MouseCursorData`用此数据填充的组合对象。[说明在这里](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/ui/MouseCursorData.html)。您只需创建它，填充其属性并将其传递给...
4.  一个`Mouse.registerCursor()`电话。[手册在这里](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/ui/Mouse.html#registerCursor%28%29)。简而言之，您为它提供一个字符串，该字符串将作为光标的名称，以及一个准备好的对象。

这只需要在初始化时完成一次。一个例子：

```
var mcd:MouseCursorData=new MouseCursorData();
mcd.data=Vector.<BitmapData>([new MyCursorImage().bitmapData]); // a single image
// MyCursorImage is an asset of type Bitmap
mcd.hotSpot=new Point(); // top left corner is action point
Mouse.registerCursor("move",mcd); 
```

# javascript - $.post jQuery 更快还是更慢取决于浏览器？

> ID：15680847
> 
> 赞同：7
> 
> 时间：2013-03-28T11:41:42.370
> 
> 标签：javascript, jquery, performance, browser, jquery-post

我正在尝试提高我的 jQuery 性能，我注意到它在 Chrome 中的运行速度比在其他浏览器中更快。当它只是对 PHP 文件的 AJAX 调用时是否有意义？

为了测试它，我在一个`click`事件中这样做：

```
var startTime = new Date();

$.post("http://"+ document.domain + "action.json",  { data:  data}, 
    function(dat){

        console.log('ending:  ', (new Date() - startTime) / 1000);
    }
}); 
```

以秒为单位的结果是：

*   **铬 25：** 0.148
*   **火狐 19.0.2：** 0.212
*   **Internet Explorer 9：** 0.272
*   **歌剧 12.14：** 0.219

访问每个浏览器上的控制台的开发工具会干扰此结果吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:05:08.327

我想如果你这样做：

```
var startTime = new Date();

var a=0;

for(i=0;i<50000;i++){
    a++;
}
console.log('ending:  ', (new Date() - startTime) / 1000); 
```

你会看到同样的区别。可能只是不同的javascript解析器。

# java - 我可以删除 xml 文件吗？安卓

> ID：15680850
> 
> 赞同：1
> 
> 时间：2013-03-28T11:41:51.603
> 
> 标签：java, android, xml

每当我在 android 中创建活动时，都会自动生成 XML 文件。如果我在 Java 代码中以编程方式进行布局，我可以删除它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:51:13.083

当然......你可以做到。

看这个，[布局](http://developer.android.com/intl/es/guide/topics/ui/declaring-layout.html)。

因此，关于它，我们可以创建我们的 .xml 文件，然后添加到我们的*Project*中。

# html - css动画webkit问题

> ID：15680851
> 
> 赞同：1
> 
> 时间：2013-03-28T11:41:54.183
> 
> 标签：html, css, css-animations

我使用 css 动画创建了一个 3d 旋转立方体，它在 Mozilla 中运行良好，但是当我在 webkit 浏览器中运行它时，我有旋转动画，但 6 个图像没有按应有的方式翻译。但是，如果我禁用动画，则 6 个图像会按要求进行翻译，并且我有一个立方体。有没有人遇到过这个？

```
@-webkit-keyframes rotate{
from {-webkit-transform: rotateX(0deg) rotateZ(0deg);}
to {-webkit-transform: rotateX(360deg) rotateZ(360deg);}
}
@-moz-keyframes rotate{
from {-moz-transform: rotateX(0deg) rotateZ(0deg);}
to {-moz-transform: rotateX(360deg) rotateZ(360deg);}
}

.object{
transform-style:preserve-3d;
width:300px;
height:300px;
top: 150px;
margin:0 auto;
position:absolute;
-moz-animation-name:                rotate; 
-moz-animation-duration:            5s; 
-moz-animation-iteration-count:     infinite;
-moz-animation-timing-function:     linear;
-webkit-animation-name:             rotate; 
-webkit-animation-duration:         5s; 
-webkit-animation-iteration-count:  infinite;
-webkit-animation-timing-function:  linear;} 
```

这是立方体的 jsfiddle [http://jsfiddle.net/timwilks13/SRU34/1/](http://jsfiddle.net/timwilks13/SRU34/1/) 和托管版本[http://www.bettondesignwork.co.uk/tim/css](http://www.bettondesignwork.co.uk/tim/css)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:46:05.163

添加：

```
.object{
    transform-style: preserve-3d;
    -webkit-transform-style: preserve-3d;
    /* ..*/
} 
```

[更新的小提琴](http://jsfiddle.net/ncapito/SRU34/2/)

# java - cursor.getstring() is getting the wrong field in the database

> ID：15680853
> 
> 赞同：5
> 
> 时间：2013-03-28T11:42:00.010
> 
> 标签：java, android, database

So this is my code:

```
public void onItemClick(AdapterView<?> listView, View view, int position, long id)
{
    Cursor cursor = (Cursor) listView.getItemAtPosition(position);

    int _id = cursor.getInt(0);
    String _recipe = cursor.getString(1);
    Intent intent = new Intent(Luzon1Activity.this,RecipeInstruction.class);
    intent.putExtra("id", _id);
    intent.putExtra("recipe", _recipe);
    startActivity(intent);
} 
```

This is my code for the next activity:

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.recipeinstruction);

    dbHelper = new Dbadapter(this);
    dbHelper.open();
    bg = (RelativeLayout) findViewById(R.id.relativeLayout1);

    Bundle extras = getIntent().getExtras();
    if (extras != null) {
        id = extras.getInt("id");   
        recipe = extras.getString("recipe");
    }
    Toast.makeText(this, id+"\n"+recipe, Toast.LENGTH_SHORT).show();
    bg.setBackgroundResource(getImageId(this, recipe));
} 
```

My problem is on this part: `String _recipe = cursor.getString(1)`. It always gives me the wrong data. I tried to change the number but still it gives me the wrong data.

This is my database:

```
package com.pinoycookbook;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class Dbadapter
{
    public static final String ROWID = "_id";
    public static final String NAME = "foodname";
    public static final String ORIGIN = "origin";

    public static final String RECIPE = "recipe";

    public static final String CATEGORY = "category";

    private static final String TAG = "Dbadapter";
    private DatabaseHelper mDbHelper;
    private SQLiteDatabase mDb;

    private static final String DATABASE_NAME = "PinoyCookbook.sqlite";
    public static final String SQLITE_TABLE = "Food";
    private static final int DATABASE_VERSION = 1;

    private final Context mCtx;

    private static final String DATABASE_CREATE =
        "CREATE TABLE if not exists " + SQLITE_TABLE + " (" +
                ROWID + " integer PRIMARY KEY autoincrement," +
                NAME + " TEXT," +
                RECIPE + " TEXT," +
                ORIGIN + " TEXT," + 
                CATEGORY+ " TEXT,"+
                " UNIQUE (" + ROWID +"));";

    private static class DatabaseHelper extends SQLiteOpenHelper
    {

        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            Log.w(TAG, DATABASE_CREATE);
            db.execSQL(DATABASE_CREATE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS " + SQLITE_TABLE);
            onCreate(db);
        }
    }

    public Dbadapter(Context ctx) {
        this.mCtx = ctx;
    }

    public Dbadapter open() throws SQLException {
        mDbHelper = new DatabaseHelper(mCtx);
        mDb = mDbHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        if (mDbHelper != null) {
            mDbHelper.close();
        }
    }

    public long createData(String foodname, String recipe, String origin,  int i) {
        ContentValues initialValues = new ContentValues();
        initialValues.put(NAME, foodname);
        initialValues.put(RECIPE, recipe);
        initialValues.put(ORIGIN, origin);

        initialValues.put(CATEGORY, i);

        return mDb.insert(SQLITE_TABLE, null, initialValues);
    }

    public boolean deleteAllData() {
        int doneDelete = 0;
        doneDelete = mDb.delete(SQLITE_TABLE, null , null);
        Log.w(TAG, Integer.toString(doneDelete));
        return doneDelete > 0;
    }

    public void insertData() {
        createData("Adobong Manok","adobongmanok","Manila",1);
        createData("Lechon","lechon","Cebu",2);
        createData("Crispy Pata","crispypata","Cebu",2);
        createData("Bulalo","bulalo","Batangas",1);
        createData("Taba ng Talangka Rice","talangkarice","Roxas",2);
        createData("Arroz Caldo","arrozcaldo","Roxas",2);
        createData("Sinigang","sinigang","Manila",1);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T11:46:32.600

所以我建议你使用[`getColumnIndex()`](http://developer.android.com/reference/android/database/Cursor.html#getColumnIndex(java.lang.String))方法而不是硬编码它。

```
String _recipe = cursor.getString(cursor.getColumnIndex(Dbadapter.RECIPE)); 
```

它将确保您始终获得正确的字段。如果它仍然得到错误的数据问题是在查询而不是`Cursor`

**注意：**使用包含列名的静态字段始终是最佳实践。

## 更新：

> 我以前试过，它给了我这个错误：java.lang.IllegalArgumentException：列'recipe'不存在

您需要找出您的实际表结构。尝试执行此语句：

```
PRAGMA table_info(Dbadapter.SQLITE_TABLE); 
```

文档（[来源](http://www.sqlite.org/pragma.html#pragma_table_info)）怎么说：

> 此编译指示为命名表中的每一列返回一行。结果集中的列包括列名、数据类型、列是否可以为 NULL，以及列的默认值。对于不属于主键的列，结果集中的“pk”列为零，对于属于主键的列，它是主键中的列的索引。

## 例子：

在这里，我为您创建了通过以下方式获取 tableinfo 的方法`PRAGMA`：

```
public String getTableInfo() {
    StringBuilder b = new StringBuilder("");
    Cursor c = null;
    try {
        db = helper.getReadableDatabase();
        String query = "pragma table_info(" + Dbadapter.SQLITE_TABLE + ")";
        c = db.rawQuery(query, null);
        if (c.moveToFirst()) {
            do {
                b.append("Col:" + c.getString(c.getColumnIndex("name")) + " ");                     
                b.append(c.getString(c.getColumnIndex("type")));
                b.append("\n");
            } while (c.moveToNext());
        }
        return b.toString();
    }
    finally {
        if (c != null) {
            c.close();
        }
        if (db != null) {
            db.close();
        }
    }
} 
```

输出将是这样的：

```
Column: type text
Column: date text 
```

仅供想象，我会给你屏幕：

![Pragram Android 示例截图](../Images/c313bd1a699ae13afc1566c90b1f58d4.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T11:45:35.497

你可以这样试试：

```
cursor.getString(cursor.getColumnIndex("recipe")); 
```

它会返回正确的索引并返回正确的值。

# java - Android PorterDuff.Mode error: PorterDuff cannot be resolved to a variable

> ID：15680855
> 
> 赞同：5
> 
> 时间：2013-03-28T11:42:03.313
> 
> 标签：java, android

I've got a class which extends LinearLayout, can't figure out how to get PorterDuff.Mode working with this piece of code:

```
this.getBackground().setColorFilter(Color.parseColor("#a7d2e3"), PorterDuff.Mode.DARKEN); 
```

"PorterDuff cannot be resolved to a variable"

I've imported porterduff and from what I can see PorterDuff is a static class. Any ideas?

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-05-29T01:20:43.790

将此添加到您的导入中，因为出于某种原因，Eclipse 不会自动为此执行此操作：

`import android.graphics.PorterDuff;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-22T12:26:00.883

仅使用`Mode.DARKEN`，然后导入`android.graphics.PorterDuff.Mode;`

# linux-kernel - 启动 Linux 内核所需的所有必要参数

> ID：15680856
> 
> 赞同：2
> 
> 时间：2013-03-28T11:42:05.317
> 
> 标签：linux-kernel, x86, bootloader, u-boot

我是 linux 内核的新手，尝试从加载到 RAM 的点来理解 Linux 内核的启动，我想知道 Linux 映像加载到 RAM 后，控制权是如何传递给这个映像的，所有必要的参数都需要传递到内核​​，我们可以在不传递任何参数的情况下将控制权传递给 linux 映像吗？

我正在使用“bootm.c”查看 UBOOT 代码，但无法理解将控制权传递给 Linux 映像的位置，哪个函数负责它。

是否 load_zimage() 负责传递控制/

任何人都可以引导我走向正确的方向或建议一些关于从 x86 架构引导的特定部分的好教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T00:43:30.923

我认为这取决于。不同种类的 CPU 架构，它们使用不同的方式将信息传递给 Linux 内核。当然，Linux Kernel 可以在没有 bootloader 传递信息的情况下成功启动，但需要在 Linux Kernel 中进行正确的静态设置，例如 root 设备名称、控制台设备、mem 大小，以及一些参数来启用/禁用Linux 内核中的一些特性。

为什么 bootloader 需要将各种信息（参数）传递给 Linux Kernel，我认为这是灵活的考虑。考虑一下这种情况，可以在两个具有相同 CPU 但不同外围模块的板上共享一个 Linux 内核。

让我展示一些 UBoot 将信息传递给 Linux 内核的示例：

(1) 对于 PowerPC cpu，现在他们使用 DTB(Device Tree Blob) 文件将更多信息从 UBoot 传递到 Linux Kernel。他们将 UBoot 和 DTB 视为固件，并且在 Linux Kernel 中，他们采用了一个开放的固件（OF）基础设施。你可能知道UBoot中的“​​bootm”命令，bootm可以有三个参数，第一个是uImage地址，第二个是initrd地址，第三个是dtb地址。

(2) 早期，他们使用 bootargs 将信息传递给 Linux 内核。你也可能知道 UBoot 中有 gd/bd 结构，它们也可以将信息传递给 Linux Kernel。但是这种方式传递的信息是有限的，不像DTB。

希望以上信息能帮助您理解您的问题。

# php - URL 重定向事件处理程序

> ID：15680868
> 
> 赞同：1
> 
> 时间：2013-03-28T11:42:44.567
> 
> 标签：php, javascript, jquery, node.js, dojo

我正在创建一个使用 http 反向代理来解决跨域问题的网站。我想使用 php curl 或 nodejs。例如[http://my-proxyserver-example.com/www.yahoo.com](http://my-proxyserver-example.com/www.yahoo.com) 会将 www.yahoo.com 加载到 DIV 中，这样做应该没有跨域问题，因为所有流量都通过 www.my -proxyserver-example.com

但是，如果我使用 www.yahoo.com 进行搜索查询并查看结果，然后单击其中一个链接将导致 url 不包含我的代理服务器地址。无论如何，是否可以通过某些事件处理程序捕获 url 请求并将代理地址插入 url 的前面

我知道我可以通过浏览器设置设置代理，但这涉及用户设置网络浏览器来执行此操作，并且我宁愿不采用此解决方案。nodejs可以在收到网页之前做这个服务吗？？？

任何帮助将不胜感激

# asp.net-mvc - 如何使用 MVC 在 ASP.NET 上应用 MVVM？

> ID：15680874
> 
> 赞同：1
> 
> 时间：2013-03-28T11:42:56.060
> 
> 标签：asp.net-mvc, json, mvvm

无论如何在应用程序的客户端实现设计`MVVM`模式？`Asp.net``MVC`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T11:45:22.530

听起来很矛盾。ASP.NET MVC（顾名思义）实现了 MVC 模式。如果您想在 Web 应用程序中使用 MVVM 模式，您可以在 ASP.NET 之上自己实现它，或者使用现有的框架，例如[`ASP.NET MVVM`](http://aspnetmvvm.codeplex.com/).

如果您谈论的是客户端 MVVM，那么您可以使用大量的 javascript 框架（我已经忘记了它们的数量，因为它们每天都像蘑菇一样生长）：[knockoutjs](http://knockoutjs.com/)、[backbonejs](http://backbonejs.org/)、... 例如 ASP.NET MVC 4 与 knockoutjs 捆绑在一起，并将其用于其 SPA 模板。

# android - 为什么应用程序退出后服务中出现 NullPointerException？

> ID：15680883
> 
> 赞同：0
> 
> 时间：2013-03-28T11:43:26.257
> 
> 标签：android

我正在使用 Phonegap 创建一个基于 webview 的 Android 应用程序。为了帮助应用程序，我创建了一个基本上不时获取用户位置并对其进行处理并保存的服务。

这就是发生的事情：

1.  我运行应用程序 - 我`startService()`调用`onCreate()`了 MainActivity。应用程序中没有其他活动（直到现在）。
2.  服务运行，应用程序运行。我可以在 LogCat 中看到所有这些。
3.  现在，当我在应用程序的第一个屏幕上按返回键时，应用程序退出，结果在几秒钟后我看到 LogCat 中的堆栈跟踪和应用程序已停止的消息。错误是`NullPointerException`

我在以下指示行的方法中得到异常：

```
public void GetAvailableLocation(){
    vstore = new VariableStorage(); //Even when I assigned new object to vstore
    if(vstore.load("mobileNumber").equals("0")) // Exception occures here
        return;

    // Get all available providers
    List<String> providers = locationManager.getAllProviders();

    for(String provider: providers) {
        Location newLocation = locationManager.getLastKnownLocation(provider);
    if(isBetter(newLocation, locationListener.location) 
             && newLocation != null) {
             locationListener.location = newLocation;
         }
    }
} 
```

上述方法是`onCreate()`服务中调用的第一个方法。

请帮我解决这个问题。

编辑：这是vstore中的加载方法-

```
public String load(String key){

    Log.d(TAG, "Load key: "+key);
    try{

        if(!loaded){
            this.loadFromFile();
        }

        String result = null;

        if(key.equals("loggedIn"))
            result = Boolean.toString(loggedIn);
        else if(key.equals("mobileNumber"))
            result = Long.toString(mobileNumber);
        else if(key.equals("password"))
            result = password;
        else if(key.equals("gettingService"))
            result = Boolean.toString(gettingService);
        else if(key.equals("providingService"))
            result = Boolean.toString(providingService);
        else if(key.equals("gettingServiceID"))
            result = Integer.toString(gettingServiceID);
        else if(key.equals("providingServiceTo"))
            result = Long.toString(providingServiceTo);
        else if(key.equals("usersName"))
            result = usersName;
        else if(key.equals("currLatitude"))
            result = Double.toString(currLatitude);
        else if(key.equals("currLongitude"))
            result = Double.toString(currLongitude);
        else if(key.equals("prevLatitude"))
            result = Double.toString(prevLatitude);
        else if(key.equals("prevLongitude"))
            result = Double.toString(prevLongitude);
        else if(key.equals("lastLocationUpdateTime"))
            result = Integer.toString(lastLocationUpdateTime);
        else if(key.equals("publicKey"))
            result = publicKey;
        else if(key.equals("notification"))
            result = Integer.toString(notification);
        else if(key.equals("verifyMobileNumber"))
            result = Long.toString(verifyMobileNumber);

        return result;
    }
    catch(Exception e){
        Log.d(TAG, "VSLoad Error: " + e.getMessage());
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:50:10.917

确保 vstore.load("mobileNumber") 返回一些东西

或写类似：

```
if(vstore.load("mobileNumber") == null || vstore.load("mobileNumber").equals("0")) 
    return; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:51:14.397

这是编写该条件的更好方法：

```
if("0".equals(vstore.load("mobileNumber"))) 
```

总是给出“0”。所以如果`load`返回null，你会调用`return;` 这被称为null saved :)

# whitespace - 文本空格更正器

> ID：15680885
> 
> 赞同：0
> 
> 时间：2013-03-28T11:43:31.233
> 
> 标签：whitespace, punctuation

我需要的基本思想是空白校正（但也可以欣赏更多的东西！）：`I am in a park ( with her , not him ) .`=>`I am in a park (with her, not him).`

空格更正可以是正则表达式，但我需要拥有所有**语言特定的规则**（如果能在库中整理出来就好了！）。实际上我需要为法语文本这样做，例如，标点间距规则与英语不同。

例如，我不知道 NLTK (python) 是否可以帮助我做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:59:22.617

也许您可以向母语人士寻求更多帮助，但一本好的完整的法语语法书可能就足够了。

# tsql - 在派生表的选择中提及列名

> ID：15680886
> 
> 赞同：0
> 
> 时间：2013-03-28T11:43:36.083
> 
> 标签：tsql

我有疑问，

```
select *   
from  
(  
     select *  
     (  
         select User_Id,User_Name,Password  
         from <table> T  
         where  IsActive = 1  
     ) k   
) m 
```

在这种情况下，是否需要在其他 2 个选择语句中提及列名，

提及列总是比保留 *

但是，当我们从派生表中获取选定的列时，上述前 2 个选择的实际用途是什么..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:56:34.360

没有必要提及每一列而不是做`SELECT * FROM`. 但是，如果您不需要所有列，则可以通过仅选择您需要的列来优化：`SELECT a, b, c FROM`.

`SELECT *`在没有任何计算的情况下嵌套两个没有任何附加值或优化。这是一篇关于[Transact-SQL 派生表](http://manuals.sybase.com/onlinebooks/group-as/asg1251e/sqlug/@Generic__BookTextView/12932)的文章，我建议您查看**SQL 派生表的优势**部分。里面有一个很好的例子。

# xcode - 如何从一个 ViewController 中获取一个用户输入值以显示在另一个 ViewController 中？（外部/全局变量？）

> ID：15680887
> 
> 赞同：0
> 
> 时间：2013-03-28T11:43:49.213
> 
> 标签：xcode, uitextfield, global-variables, uilabel, extern

我设置了 2 组 Objective-C 类（没有 xib 文件）

1.  AdultTicketCalculatorViewController

//.h 文件

```
#import <UIKit/UIKit.h>

@interface AdultTicketCalculatorViewController : UIViewController {

    IBOutlet UITextField *Quantity;
    IBOutlet UILabel *Pricelabel;
    IBOutlet UILabel *TotalLabel;
}

-(IBAction)calculate;
-(IBAction)clear;

@end 
```

//.m

```
#import "AdultTicketCalculatorViewController.h"

@interface AdultTicketCalculatorViewController ()

@end

@implementation AdultTicketCalculatorViewController

-(IBAction)calculate {

    float x = ([Quantity.text floatValue]);
    float c = x*15;

    TotalLabel.text = [[NSString alloc] initWithFormat:@"$%.2f", c];

}

-(IBAction)clear {

    Quantity.text =@"";
    Pricelabel.text =@"$15.00";
    TotalLabel.text =@"";

}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event

{

    [Quantity resignFirstResponder];

} 
```

1.  AdultPayNowViewController

//。H

```
#import <UIKit/UIKit.h>

@interface AdultPayNowViewController : UIViewController {

    IBOutlet UILabel *Quantity ,*Price ,*QuantitySpace ,*TotalSum ,*TotalSumSpace;
    IBOutlet UIButton *ConfirmPurchase;

}

@end 
```

//.m（我还没有实现任何东西）

我想从 AdultTicketCalculator 中获取一些用户输入和计算值，并以下列方式在 AdultPayNowViewController 中显示它们：

1.  UITextField 'Quantity' (AdultTicketCalculatorViewController) 出现在 UILabel 'QuantitySumSpace (AdultPayNowViewController)
2.  UILabel 'TotalLabel' (AdultTicketCalculatorViewController) 出现在 UILabel 'TotalSumSpace'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:48:25.030

您可以通过使用两种不同的方式来实现这一目标。

1.将您想要的数据保存在`AdultTicketCalculatorViewController`此类中`NSUserDefaults`并检索数据`AdultPayNowViewController`。

像这样 ：

```
whenever pushing your view place this code or in 
- (void)viewDidDisappear:(BOOL)animated{
//place here
} 
```

在 AdultTicketCalculatorViewController

```
NSUserDefaults *defaults=[NSUserDefaults standardUserDefaults];
    [defaults setObject: TotalLabel.text forKey:@"TotalLabel"];
    [defaults setObject: Quantity.text forKey:@"Quantity"];
    [defaults synchronize]; 
```

并在 viewWillAppear 方法中重新分配文本字段值。

```
AdultPayNowViewController: 
```

在 viewWillAppear 方法中放置以下代码。

```
NSUserDefaults *defaults=[NSUserDefaults standardUserDefaults];
   TotalSumSpace.text= [defaults  valueForKey:@"TotalLabel"];
   QuantitySumSpace.text= [defaults  valueForKey:@"Quantity"]; 
```

2.从 中合成字符串对象`AdultPayNowViewController`并分配值`AdultTicketCalculatorViewController`。

# c# - 时间和 DISTINCT 列之间的 sql 查询

> ID：15680890
> 
> 赞同：3
> 
> 时间：2013-03-28T11:43:53.277
> 
> 标签：c#, sql, sql-server, tsql

我的汽车桌子看起来像

```
vehNo   tTime                     odo     
ABC     2013-02-13 10:30:00       80       
ABC     2013-02-12 10:30:00       10      
ABC     2013-02-12 12:30:00       30      
ABC     2013-02-13 01:30:00       40      
ABC     2013-02-13 02:30:00       40 
ABC     2013-02-13 03:30:00       40 
XYZ     2013-02-13 03:33:00       44
ABC     2013-02-13 04:30:00       60 
ABC     2013-02-13 11:30:00       100 
```

我可以在 2013 年 2 月 12 日 10:30:00 到 2013 年 2 月 13 日 10:30:00 之间给出（按时间排序），但我如何获得 DISTINCT odo like

```
ABC     2013-02-12 10:30:00       10 
ABC     2013-02-12 12:30:00       30 
ABC     2013-02-13 03:30:00       40         (time being latest, ignoring 1:30 & 2:30)
ABC     2013-02-13 04:30:00       60
ABC     2013-02-13 10:30:00       80 
```

我在 MSSql 服务器 2005 上运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:47:10.273

```
select vehNo, max(tTime) as [tTime], odo
from vehicles
group by vehNo, odo
order by vehNo, odo 
```

显然，对于“2013-02-12 10:30:00 和 2013-02-13 10:30:00”之间，您可以`where`在中间添加一个子句：

```
select vehNo, max(tTime) as [tTime], odo
from vehicles
where tTime between @start and @end
group by vehNo, odo
order by vehNo, odo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:46:10.007

SQL Server 2005 已经支持`Common Table Expression`和`Window Function`. 在它的帮助下`ROW_NUMBER()`，通过指定记录的顺序对组中的记录进行排序。

```
WITH latestDate
AS
(
    SELECT vehNo, tTime, odo,
            ROW_NUMBER() OVER (PARTITION BY vehNo, odo
                                ORDER BY tTime DESC) rn
    FROM    tableName
)
SELECT  vehNo, tTime, odo
FROM    latestDate
WHERE   rn = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/adb37/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T11:50:20.303

试试这样；

```
select vehNo, max(tTime) as tTime, odo
from myTable
group by vehNo, odo
order by vehNo, odo 
```

* * *

```
| VEHNO |               TTIME | ODO |
-------------------------------------
|   ABC | 2013-02-12 10:30:00 |  10 |
|   ABC | 2013-02-12 12:30:00 |  30 |
|   ABC | 2013-02-13 03:30:00 |  40 |
|   ABC | 2013-02-13 04:30:00 |  60 |
|   ABC | 2013-02-13 10:30:00 |  80 |
|   ABC | 2013-02-13 11:30:00 | 100 | 
```

这里是[`SQL Fiddle DEMO`](http://www.sqlfiddle.com/#!3/2bf35/5/0)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T12:05:07.890

好的@mark我将我的解决方案扩展为

```
select vehNo, max(tTime) as [tTime], odo
from Table_1
where vehNo = 'ABC' and tTime between '2013-02-12 10:30:00' and '2013-02-13 10:30:00'
group by vehNo, odo
order by vehNo, odo 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T11:46:07.720

我想你可能想要 GROUP BY odo 并选择 MAX(tTime)。听起来对吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T11:46:32.653

```
SELECT
  vehNO, 
  MAX(tTime) AS tTime,
  MAX(odo) AS odo
FROM vehicle
WHERE ...
GROUP BY ... 
```

# android - 添加 MapFragment 时应用程序闪烁

> ID：15680892
> 
> 赞同：3
> 
> 时间：2013-03-28T11:44:00.133
> 
> 标签：android, google-maps

我有一个多窗格主要活动。它的布局是

```
<LinearLayout
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_margin="@dimen/multipane_half_padding"
    android:layout_weight="2"
    android:background="@drawable/grey_frame"
    android:orientation="vertical" >

    <fragment
        android:id="@+id/fragment_navigation"
        android:name="com.armsoft.mtrade.fragments.NavigationFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</LinearLayout>

<FrameLayout
    android:id="@+id/fragment_container_detail"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_margin="@dimen/multipane_half_padding"
    android:layout_weight="5"
    android:background="@drawable/grey_frame" /> 
```

然后我将另一个片段添加到 fragment_container_detail 与

```
<FrameLayout
    android:id="@+id/planned_routes_map_container"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:visibility="gone" />
<com.armsoft.mtrade.widget.BidirectionalDatePicker
    android:id="@+id/bidirectional_date_picker"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

<FrameLayout
    android:id="@+id/planned_routes_container"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

布局。

当按下菜单项时，我将 MapFragment 添加到planned_routes_map_container 并且我的应用程序开始闪烁。我该如何解决这个问题？

# ios - 在 iOS 错误中创建 plist 文件

> ID：15680898
> 
> 赞同：1
> 
> 时间：2013-03-28T11:44:13.683
> 
> 标签：ios, objective-c, iphone, cocoa-touch, plist

我想编写应该为编写 plist 文件而创建的方法。我在网上得到了示例代码，但不明白它有什么问题。首先，当我尝试调用此方法时 - 我在日志中收到一条消息：

```
2013-03-28 15:33:47.953 ECom[6680:c07] Property list invalid for format: 100 (property lists cannot contain NULL)
2013-03-28 15:33:47.954 ECom[6680:c07] An error has occures <ECOMDataController: 0x714e0d0> 
```

为什么这条线返回（null）？

```
 data = [NSPropertyListSerialization dataWithPropertyList:plistData format:NSPropertyListXMLFormat_v1_0 options:nil error:&err]; 
```

最后一个问题 - 如何删除同一行的警告消息？

```
Incompatible pointer to integer conversion sending 'void *' to parameter of type 'NSPropertyListWriteOptions' (aka 'insigned int') 
```

h文件

```
 #import <Foundation/Foundation.h>

@interface ECOMDataController : NSObject
{
    CFStringRef trees[3];
    CFArrayRef treeArray;
    CFDataRef xmlValues;
    BOOL fileStatus;
    CFURLRef fileURL;
    SInt32 errNbr;
    CFPropertyListRef plist;
    CFStringRef errStr;
}

@property(nonatomic, retain) NSMutableDictionary * rootElement;
@property(nonatomic, retain) NSMutableDictionary * continentElement;
@property(nonatomic, strong) NSString * name;
@property(nonatomic, strong) NSString * country;
@property(nonatomic, strong) NSArray * elementList;
@property(nonatomic, strong)  id plistData;
@property(nonatomic, strong) NSString * plistPath;
@property(nonatomic, strong) NSData * data;
@property(nonatomic, strong) id filePathObj;

-(void)CreateAppPlist;

@end 
```

m文件

```
 #import "ECOMDataController.h"

@implementation ECOMDataController

@synthesize rootElement, continentElement, country, name, elementList, plistData, data, plistPath;

- (void)CreateAppPlist {

    // Get path of data.plist file to be created

    plistPath = [[NSBundle mainBundle] pathForResource:@"data" ofType:@"plist"];

    // Create the data structure

    rootElement = [NSMutableDictionary dictionaryWithCapacity:3];
    NSError *err;
    name = @"North America";
    country = @"United States";

    continentElement = [NSMutableDictionary dictionaryWithObjects:[NSArray arrayWithObjects:name, country, nil] forKeys:[NSArray arrayWithObjects:@"Name", @"Country", nil]];

    [rootElement setObject:continentElement forKey:@""];

    //Create plist file and serialize XML

    data = [NSPropertyListSerialization dataWithPropertyList:plistData format:NSPropertyListXMLFormat_v1_0 options:nil error:&err];
    if(data)
    {
        [data writeToFile:plistPath atomically:YES];
    } else {
        NSLog(@"An error has occures %@", err);
    }

    NSLog(@"%@   %@    %@", plistPath, rootElement, data);

}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T11:50:23.697

看来您正在序列化错误的元素，替换为`plistData`（`rootElement`和）`nil``0`

```
data = [NSPropertyListSerialization dataWithPropertyList:plistData format:NSPropertyListXMLFormat_v1_0 options:nil error:&err]; 
```

# c# - 将主体添加到应该被覆盖的虚拟方法

> ID：15680901
> 
> 赞同：1
> 
> 时间：2013-03-28T11:44:20.190
> 
> 标签：c#, coding-style, notimplementedexception

我有一个类是其他一些类的基础。该类有一个虚方法，它应该在派生类中被覆盖。这是它的定义方式：

```
protected virtual TableFormat GetFormat()
{
    throw new NotImplementedException("Implement the format generator in derived class.");
} 
```

这是好习惯吗？我的老板告诉我这`NotImplementedException`应该只用于自动生成的代码，但我拒绝遵守，直到他给出理由。

此外，这似乎是在非抽象类中拥有抽象方法的好地方。为什么不允许这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:45:58.697

> 这是一个好习惯吗？：

IMO，最好扔，`NotImplementedException`因为你还会返回什么，如果你 return `null`，你的类的用户永远不会知道这个方法必须被覆盖。所以我不同意你老板的观点。

> 这似乎是在非抽象类中拥有抽象方法的好地方。为什么不允许这样做？

您可能会看到讨论：[非抽象类中的抽象方法](https://stackoverflow.com/questions/12581070/abstract-method-in-non-abstract-class)

> 我有一个类是其他一些类的基础。该类有一个虚方法，它应该在派生类中被覆盖。

为什么不将方法定义为[`abstract`](http://msdn.microsoft.com/en-us/library/sf985hc5%28v=vs.110%29.aspx)而不是虚拟的。

> 在方法或属性声明中使用 abstract 修饰符来指示该方法或属性不包含实现。

但

> *   抽象方法隐含地是虚拟方法。
> *   抽象方法声明**只允许在抽象类**中。
> *   因为抽象方法声明没有提供实际的实现，所以没有方法体；方法声明仅以分号结尾，并且 签名后
>     没有大括号 ({ }) 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:46:43.143

如果将方法标记为`abstract`此类的任何实现，则必须定义主体。您也需要标记课程`abstract`。

```
public abstract class MyClass 
{
    protected abstract TableFormat GetFormat();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:49:01.167

此类方法是强制覆盖该方法的有效方法。我认为这应该被允许，但你的老板可能不同意我的观点。

事实上，如果这个你的类将被实例化，但方法不会被调用，这种做法比制作抽象类要好。您也可以尝试在这种方法中进行严格的类型检查，以便如果当前实例恰好属于此类但不是子类（当然，如果可能的话），则不会引发异常。

# java - 使用 java 客户端与 spdy 服务器对话

> ID：15680905
> 
> 赞同：1
> 
> 时间：2013-03-28T11:44:33.450
> 
> 标签：java, jetty, spdy

我已经使用 jetty9 启动了一个 spdy 代理服务器。

码头-spdy-proxy.xml：

```
<New id="sslContextFactory" class="org.eclipse.jetty.util.ssl.SslContextFactory">
  <Set name="KeyStorePath"><Property name="jetty.home" default="." />/etc/keystore</Set>
  <Set name="KeyStorePassword">OBF:1vny1zlo1x8e1vnw1vn61x8g1zlu1vn4</Set>
  <Set name="KeyManagerPassword">OBF:1u2u1wml1z7s1z7a1wnl1u2g</Set>
  <Set name="TrustStorePath"><Property name="jetty.home" default="." />/etc/keystore</Set>
  <Set name="TrustStorePassword">OBF:1vny1zlo1x8e1vnw1vn61x8g1zlu1vn4</Set>
</New>

<New id="tlsHttpConfig" class="org.eclipse.jetty.server.HttpConfiguration">
  <Arg><Ref refid="httpConfig"/></Arg>
  <Call name="addCustomizer">
    <Arg><New class="org.eclipse.jetty.server.SecureRequestCustomizer"/></Arg>
  </Call>
</New>

<Call name="addConnector">
  <Arg>
    <New class="org.eclipse.jetty.server.ServerConnector">
      <Arg name="server"><Ref id="Server" /></Arg>
      <Arg name="factories">
        <Array type="org.eclipse.jetty.server.ConnectionFactory">
          <Item>
            <New class="org.eclipse.jetty.server.HttpConnectionFactory">
              <Arg name="config"><Ref id="httpConfig" /></Arg>
            </New>
          </Item>
        </Array>
      </Arg>
      <Set name="host"><Property name="jetty.host" /></Set>
      <Set name="port"><Property name="jetty.port" default="9090" /></Set>
      <Set name="idleTimeout">30000</Set>
    </New>
  </Arg>
</Call> 
```

http/1.1 本地主机 http/1.1 127.0.0.1 9090

8080 8443

此服务器已正常启动。

```
2013-03-28 17:49:02.623:INFO:oejsh.ContextHandler:main: started o.e.j.w.WebAppContext@4a734beb{/test,file:/tmp/jetty-0.0.0.0-8443-test.war-_test-any-/webapp/,AVAILABLE}{/test.war}
2013-03-28 17:49:02.911:WARN::main: async-rest webapp is deployed. DO NOT USE IN PRODUCTION!
2013-03-28 17:49:02.990:INFO:oejsh.ContextHandler:main: started o.e.j.w.WebAppContext@28245558{/async-rest,[file:/tmp/jetty-0.0.0.0-8443-async-rest.war-_async-rest-any-/webapp/, jar:file:/tmp/jetty-0.0.0.0-8443-async-rest.war-_async-rest-any-/webapp/WEB-INF/lib/example-async-rest-jar-9.0.0.v20130308.jar!/META-INF/resources/],AVAILABLE}{/async-rest.war}
2013-03-28 17:49:03.061:INFO:oejsh.ContextHandler:main: started o.e.j.s.h.MovedContextHandler@b102b93{/oldContextPath,null,AVAILABLE}
2013-03-28 17:49:03.159:INFO:oejsh.ContextHandler:main: started o.e.j.s.h.ContextHandler@36858c07{/javadoc,file:/home/sankuai/jetty/jetty9/javadoc,AVAILABLE}
2013-03-28 17:49:03.669:INFO:oejsh.ContextHandler:main: started o.e.j.w.WebAppContext@646dee9f{/proxy,file:/tmp/jetty-0.0.0.0-8443-xref-proxy.war-_xref-proxy-any-/webapp/,AVAILABLE}{/xref-proxy.war}
2013-03-28 17:49:03.913:INFO:oejs.ServerConnector:main: Started ServerConnector@4456cd93{SSL-npn}{0.0.0.0:8443} 
```

在我看来，这个代理服务器可以将 spdy 转换为 http 并将其代理到目标服务器。

我现在无法测试它，因为我不知道如何使用 java 客户端（不在浏览器中）与代理服务器通信。我用谷歌搜索了我的问题，但什么也没找到，这里有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T12:56:47.483

使用原始 SPDY 不同于您以前可能做过的任何事情。

但话虽如此，Jetty 9 中有单元测试使用 Jetty 的[SPDYClient](http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/spdy/client/SPDYClient.html)来测试它自己对 SPDY 的支持。他们可能会帮助你。

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-spdy/spdy-http-server/src/test/java/org/eclipse/jetty/spdy/服务器/代理/ProxySPDYToHTTPTest.java](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-spdy/spdy-http-server/src/test/java/org/eclipse/jetty/spdy/server/proxy/ProxySPDYToHTTPTest.java)

# php - 当只有一条记录时从数组中获取键而不循环

> ID：15680910
> 
> 赞同：0
> 
> 时间：2013-03-28T11:44:52.100
> 
> 标签：php, arrays

```
$array['2']['21'] = null; 
```

我想`21`从上面的数组中获取而不循环，有可能吗？我想为那些**只有 1 条**记录的数组执行此操作。显然，我将不得不对其他人使用循环。

```
foreach ($array['2'] as $key => $value)
{
   echo $key;
   //I know this does the job wondering if there is simple function
} 
```

我查看了[extract()](http://php.net/extract)但没有完成我的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:46:19.797

试试这个 ：

```
$arr_keys  = array_keys($array['2']);

echo "<pre>";
print_r($arr_keys); 
```

参考： http: [//php.net/manual/en/function.array-keys.php](http://php.net/manual/en/function.array-keys.php)

# ios - 构建 nsmutablearray 后，我应该将其转换为 nsarray 以获得性能优势吗？

> ID：15680912
> 
> 赞同：8
> 
> 时间：2013-03-28T11:44:56.820
> 
> 标签：ios, objective-c

想知道，在构建 nsmutablearray 之后，我应该将其转换为 nsarray 以获得性能优势吗？如果我要保留并使用该数组很长一段时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T11:46:42.463

不会。转换本身会耗费时间和 CPU 周期，而且您不会从转换中获得任何收益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:00:49.967

我实际上会说这取决于。如果我在一个方法中创建一个 NSMutableArray 并需要返回它，那么通常除非调用者需要能够直接修改数组值，否则为了简单起见，我会将 NSMutableArray 作为 NSArray 返回，并减少应用。

但是，如果我在当前方法中创建 NSMutableArray 以供直接使用，那么我认为将其转换为 NSArray 没有任何好处。

# excel - Excel 比较表格

> ID：15680916
> 
> 赞同：0
> 
> 时间：2013-03-28T11:45:05.477
> 
> 标签：excel, excel-2007, ms-office

我有 2 个 2 列的 excel 数据透视表，但行数不同。

每个表的第一列得到一个数字，第二列得到一个值。

我想比较两个表，在每个表的第 1 列上找到相同的数字，然后对第 2 列的值求和。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:11:51.663

最简单的方法是将数据透视表复制并粘贴（作为值）到新工作表，然后使用 vlookup 比较值[Ref Vlookup](http://office.microsoft.com/en-us/excel-help/vlookup-HP005209335.aspx)。有更复杂和可重用的解决方案，但您需要定义是否要使用宏或其他工具。

# c# - 提取资源中嵌入的文件

> ID：15680917
> 
> 赞同：0
> 
> 时间：2013-03-28T11:45:07.017
> 
> 标签：c#, embedded-resource

我正在使用以下方法在可执行文件中嵌入任意数量的文件

```
 private void EmbedFiles(IEnumerable<string> files)
    {
        const string exePath = @"C:\SimpleApp.exe";

        foreach (var file in files)
            WriteFileToResource(exePath, file);
    }

    [DllImport("kernel32.dll", EntryPoint = "BeginUpdateResourceW", SetLastError = true, CharSet = CharSet.Unicode, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
    internal static extern IntPtr BeginUpdateResource(string pFileName, bool bDeleteExistingResources);

    [DllImport("kernel32.dll", EntryPoint = "UpdateResourceW", SetLastError = true, CharSet = CharSet.Unicode, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
    internal static extern bool UpdateResource(IntPtr hUpdate, string lpType, string lpName, short wLanguage, byte[] lpData, int cbData);

    [DllImport("kernel32.dll", EntryPoint = "EndUpdateResourceW", SetLastError = true, CharSet = CharSet.Unicode, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
    internal static extern bool EndUpdateResource(IntPtr hUpdate, bool fDiscard);

    internal static void WriteFileToResource(string path, string file)
    {
        var resourceName = Path.GetFileName(file);
        using (var binaryStream = new FileStream(file, FileMode.Open, FileAccess.Read))
        {
            byte[] data = null;
            var resourceLanguage = MakeLanguageID();
            try
            {
                data = new byte[binaryStream.Length];
                binaryStream.Read(data, 0, (int)binaryStream.Length);
            }
            catch (Exception ex)
            {
                throw new Exception(string.Format("Error reading {0}: {1}", file, ex.Message), ex);
            }

            var h = BeginUpdateResource(path, false);
            Write(h, "File", resourceName, resourceLanguage, data);
        }
    }

    internal static void Write(
        IntPtr h,
        string resourceType,
        string resourceName,
        short resourceLanguage,
        byte[] buffer)
    {
        try
        {
            if (UpdateResource(h, resourceType, resourceName, resourceLanguage, buffer, buffer.Length))
                EndUpdateResource(h, false);
            else
                throw new Win32Exception(Marshal.GetLastWin32Error());
        }
        catch (Exception ex)
        {
            throw new Exception(string.Format("Error writing {0}: {1}", resourceName, ex.Message), ex);
        }
    }

    static short MakeLanguageID()
    {
        return (short)CultureInfo.CurrentUICulture.LCID;
    } 
```

在下面的代码中，我要做的是从目标 exe 中提取嵌入的文件，以便将它们保存在选定的目录中，但我无法读取这些文件。

```
 var assembly = Assembly.GetExecutingAssembly();

        var names = Assembly.GetExecutingAssembly().GetManifestResourceNames();

        foreach (string filename in names)
        {
            var stream = assembly.GetManifestResourceStream(filename);
            var rawFile = new byte[stream.Length];

            stream.Read(rawFile, 0, (int)stream.Length);

            using (var fs = new FileStream(filename, FileMode.Create))
            {
                fs.Write(rawFile, 0, (int)stream.Length);
            }
        } 
```

任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:23:18.633

似乎 GetManifestResourceStream() 仅显示与 .resx 文件对应的 .Net 资源。

我使用 UpdateResource 系列中的其他功能让它工作。

```
ResourcesManager.GetResourceFromExecutable(assembly.ManifestModule.FullyQualifiedName, "PACKAGES.TXT", ResourcesManager.RT_RCDATA);
public static class ResourcesManager
{
    public const uint RT_RCDATA = 0x10;

    [DllImport("kernel32.dll")]
    public static extern IntPtr LoadLibraryEx(string lpFileName, IntPtr hFile, uint dwFlags);

    [DllImport("Kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    public static extern IntPtr LoadLibrary(string lpFileName);

    [DllImport("kernel32.dll")]
    public static extern IntPtr FindResource(IntPtr hModule, string lpName, uint lpType);
    //  public static extern IntPtr FindResource(IntPtr hModule, int lpName, uint lpType);

    [DllImport("kernel32.dll", SetLastError = true)]
    public static extern IntPtr LoadResource(IntPtr hModule, IntPtr hResInfo);

    [DllImport("kernel32.dll")]
    public static extern IntPtr LockResource(IntPtr hResData);

    [DllImport("kernel32.dll", SetLastError = true)]
    public static extern uint SizeofResource(IntPtr hModule, IntPtr hResInfo);

    public static string GetResourceFromExecutable(string lpFileName, string lpName, uint lpType)
    {
        IntPtr hModule = LoadLibrary(lpFileName);
        if (hModule != IntPtr.Zero)
        {
            IntPtr hResource = FindResource(hModule, lpName, lpType);
            if (hResource != IntPtr.Zero)
            {
                uint resSize = SizeofResource(hModule, hResource);
                IntPtr resData = LoadResource(hModule, hResource);
                if (resData != IntPtr.Zero)
                {
                    byte[] uiBytes = new byte[resSize];
                    IntPtr ipMemorySource = LockResource(resData);
                    Marshal.Copy(ipMemorySource, uiBytes, 0, (int)resSize);
                    //....
                }
            }
        }
    }
} 
```

}

# jquery - jquery ajax 获得成功

> ID：15680919
> 
> 赞同：1
> 
> 时间：2013-03-28T11:45:14.830
> 
> 标签：jquery, ajax

有人可以告诉我如何确保以下代码仅在`msg`不为空时返回成功。

`success`即使`msg.Text`未定义，它有时也会触发该函数。

```
$.ajax({
    async: true,
    url: url,
    type: "GET",
    data: params,
    success: function (msg) {
        if (msg.Text != undefined) {
            $('#mediumText').val(msg.Text).blur();
        } else {
            console.log("failed to load");
            return false;
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:03:57.000

如果 msg.Text 未定义，并不代表调用不成功，所以调用success函数是完全可以的。您必须在成功回调中检查 msg.Text。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:58:30.563

你可以检查长度和它的空不是。

```
$.ajax({
async: true,
url: url,
type: "GET",
data: params,
success: function (msg) 
{
      if (msg.Text != null && msg.Text.Length > 0) 
      {
           $('#mediumText').val(msg.Text).blur();
      }
      else
      {
          console.log("failed to load");
          return false;
      }
}
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T12:00:50.930

您可以只检查[虚假](http://james.padolsey.com/javascript/truthy-falsey/) 值：

```
 if (msg.Text) {
     ...
  } else {
     ...
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T11:47:52.997

您可以检查响应的长度：

```
$.ajax({
    async: true,
    url: url,
    type: "GET",
    data: params,
    success: function (msg) {
        if (msg.Text != undefined) {
            if (msg.Text.Length > 0) {
                $('#mediumText').val(msg.Text).blur();
            } else {
                console.log("failed to load");
                return false;
            }
        } else {
            console.log("failed to load");
            return false;
        }
    }
}); 
```

# mysql - 将表引擎 MyISAM 转换为 INNODB 错误号：150

> ID：15680923
> 
> 赞同：0
> 
> 时间：2013-03-28T11:45:24.563
> 
> 标签：mysql, innodb, myisam

我有这张桌子：

```
CREATE TABLE IF NOT EXISTS `interlocuteur_fonction` (
  `id_interlocuteur_fonction` int(11) NOT NULL AUTO_INCREMENT,
  `id_interlocuteur` int(11) NOT NULL,
  `id_fonction_interlocuteur` int(11) NOT NULL,
  `defaut` varchar(1) NOT NULL,
  PRIMARY KEY (`id_interlocuteur_fonction`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2227 ; 
```

当我尝试这个查询时：

```
ALTER TABLE `interlocuteur_fonction` engine=InnoDB 
```

我收到一条错误消息：

```
#1025 - Error on rename of './preprod_test/#sql-457_210' to './preprod_test/interlocuteur_fonction' (errno: 150) 
```

SHOW ENGINE INNODB STATUS 的输出：

```
LATEST FOREIGN KEY ERROR
------------------------
130328 12:00:36 Error in foreign key constraint of table 
ilang2_test/interlocuteur_fonction:
there is no index in the table which would contain
the columns as the first columns, or the data types in the
table do not match the ones in the referenced table
or one of the ON ... SET NULL columns is declared NOT NULL. 
Constraint:
,
CONSTRAINT "interlocuteur_fonction_id_interlocuteur_id_interlocuteur" FOREIGN KEY 
("id_interlocuteur") REFERENCES "interlocuteurs" ("id_interlocuteur")
InnoDB: Renaming table `preprod_test`.`#sql-457_1bb` to 
`preprod_test`.`interlocuteur_fonction` failed! 
```

任何想法都受到高度赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:54:12.793

当外键的列与它指向的列不完全匹配时，我遇到了这个错误。（类型，有符号/无符号）

**编辑**第二次阅读您的帖子后，我认识到真正的错误：您的 interlocuteurs 表需要一个以 id_interlocuteur 作为第一列的索引。

# multithreading - 如何获取在jmeter中失败的用户数

> ID：15680924
> 
> 赞同：0
> 
> 时间：2013-03-28T11:45:26.033
> 
> 标签：multithreading, jmeter

我在 Jmeter 中设置了以下内容：

```
Number of threads = 10
Ramp period = 100
Loop count = 100 
```

测试计划中有 5 个 http 请求。

当我运行测试时，我在说第 153 个用户时遇到错误。
如何在 Jmeter 中获取数字（153）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T06:29:13.290

您可以使用错误列表器，它会告诉您第 153 个用户的测试失败的详细信息。

[https://github.com/balajiciyer/JMeter-Error-Listener?goback=%2Egde_2017104_member_212501240](https://github.com/balajiciyer/JMeter-Error-Listener?goback=%2Egde_2017104_member_212501240)

您可以在上面的链接中获取详细信息。

# html - Html 和 Css：图像菜单链接

> ID：15680925
> 
> 赞同：0
> 
> 时间：2013-03-28T11:45:27.033
> 
> 标签：html, css

我正在尝试创建一个使用图像按钮的菜单栏。在我的菜单栏上，我可以看到我的图像，但我无法单击它们。我使用 text-indent: 100%; 空白：nowrap；溢出：隐藏；在我的 css 文件中隐藏链接文本。我的链接文本被隐藏，但链接变得无效。此外，我尝试了 text-indent:-9999px; 但结果是一样的。我找不到问题，可能是我的 html 或 css 结构错误。你能检查一下吗？

我在 jsfiddle 上更新了 html 和 css 文件

```
 <a href="http://jsfiddle.net/kt2hL/8/"> jsfiddle</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:05:22.560

试试这个：

```
nav ul li a{display: block} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:11:41.177

它的工作

```
nav ul li a
{ 
    display: block
} 
```

# scikit-learn - 如何处理 scikit-learn 中每个实体有多个数据的实体？

> ID：15680926
> 
> 赞同：0
> 
> 时间：2013-03-28T11:45:29.680
> 
> 标签：scikit-learn

我有一个基于 SVM 的分类器，可以将一大块数据分类为某些类别。现在，我想将一些实体分类，每个实体都有多个这些数据块，可能使用多数投票或类似的方式将它们分类为相同的类别，然后生成诸如精度/召回/混淆矩阵等报告。

scikit-learn 是否提供了轻松做到这一点的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:55:04.430

所有 scikit-learn 模型都期望每个样本都有一个平面特征向量。因此，要处理更结构化的输入（或输出），您将不得不提出自己的包装器。根据您对任务的简洁描述，多数投票方案似乎是一种合理的方法。

# java - 按大小在多个线程中分配文件以平衡工作负载

> ID：15680927
> 
> 赞同：-1
> 
> 时间：2013-03-28T11:45:30.940
> 
> 标签：java

我被问到以下问题

```
There are X number of compressed files of different sizes in a single folder.
Where X is 1 to 250.
File size ranges from 1MB to 65MB. The compression ratio varies from 9 to 11.

There are Y number of parser threads. Where Y is between 1 to 8.

Write an application that distributes the files so each thread receives the same amount of data ( or as close as possible ).
Please follow all best coding practices and standards you are familiar with.

For example

If X is 5 and Y is 3 and the files are
File 1 is 1MB, File 2 is 2MB, File 3 is 3MB, File 4 = 4MB, File 5 = 5MB.

Uncompressed File 1,2,5 = compressed file * 9\. Files 3,4 = compressed file * 10

Output
Thread <thread number> = Files <file number...> = <total size of all files uncompressed>
...
Data skew = ((max size - min size) / max size ) * 100 
```

我是否认为这是一个不可能回答的问题，它似乎很模糊。在我看来，这是一个很难在 1 小时内回答的问题。

我认为分布并非微不足道。

* * *

**编辑**

我所知道的问题就是上面所说的。

对我来说，这似乎是一个非常模糊的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:54:53.857

因此，根据我的评论，我认为这是传统的[装箱问题](http://en.wikipedia.org/wiki/Bin_packing_problem)的一个实例，除非在这种情况下，您提前知道一定数量的箱（线程）并且箱可以增长，这需要一些计算关闭。把它想象成有 X 个盒子，你必须用 Y 个项目填充，但盒子可以变得更高。

首先，我认为您需要预先计算未压缩的文件大小。未压缩的文件大小就像装箱问题中的“体积”。

接下来，我认为您根据未压缩的值对文件进行排序。这使得搜索列表更快。

为了实际将它们整理出来，请将线程视为装箱问题中的“垃圾箱”。我认为有很多方法可以做到这一点，在我确定一种特定方法之前，我会提出一个问题：你是否更关心首先使用所有线程，但让它们的大小尽可能接近可能，或者您是否更关心使结果尺寸尽可能接近，您不能使用比分配线程更多的东西？

如果关注的是使用所有线程，我认为我的方法看起来像：

1.  从最大的文件开始，填满垃圾箱，使它们尽可能小。继续这样做，直到您不能再放入任何垃圾箱而不超过最大的垃圾箱（其中包含最大文件的垃圾箱）
2.  将最小的物品放在最小的箱子里。这是你新的“水印”
3.  与第 1 步一样，继续将最大的文件放在最大的垃圾箱中，以便在不超过水印的情况下接受它。继续这样做，直到你用完文件或者你不能在不超过的情况下再放入。如果是前者，你就完成了，如果是梯子，回到第 2 步。

相反，如果关注的是匹配大小，那么我的方法会有所不同。

1.  把最大的物品放在最小的箱子里。这是你的“水印”。把它放在一边
2.  抓住最小的垃圾箱。这是您当前工作的垃圾箱。
3.  在不超过“水印”的情况下，找到适合您正在处理的垃圾箱的下一个最大的项目。
4.  重复 #3 直到你无法填满当前的 bin
5.  将最小的文件放在最小的 bin 中。这是你的新“水印”
6.  只是为了#2

这里的好处是我认为你会得到一个非常均匀的分布，因为你总是让“箱子”尽可能地接近彼此的大小。问题在于它与垃圾箱的大小有关，而不是全部用完。

# wpf - 使用 ConverterParameter 与使用许多转换器

> ID：15680931
> 
> 赞同：1
> 
> 时间：2013-03-28T11:45:40.683
> 
> 标签：wpf, performance, valueconverter

我有 2 种不同`ProgressBars`的 2 种不同的自定义样式。在它们中的每一个中，颜色的`ProgressBar`计算基于`Maximum`和`Value`（使用 2 个不同的公式）。

我看到`ConverterParameter`转换器中的类型是`String`. 现在我想知道我应该`MultiValueConverters`为每个人写2个不同的，还是用a写一个`MultiValueConverter`，`Parameter`让`Parameter`决定应该执行哪个公式。

这两个`ProgressBars`可能是我的 MVVM 视图的瓶颈，所以我需要知道哪一个在性能上更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:05:00.577

编写一个转换器 - 为同一目的使用多个转换器是没有意义的。

使用枚举指示要使用的公式 - 可以在 XAML 中明确提及该值。

如果要将外部值绑定到转换器，则需要从 DependencyObject 派生，并且属性必须是依赖属性。

# php - PHP 执行 svn 导出

> ID：15680937
> 
> 赞同：0
> 
> 时间：2013-03-28T11:45:46.820
> 
> 标签：php, svn, export, exec

我正在尝试运行这个 exec

```
exec('svn export -r '.$rev2.' '.$repourl.'/'.$dir.$parts[$j].' cache/diff/'.$dir.$parts[$j]); 
```

这等于：

```
svn export -r 1192 file:///var/svn/Repo/folder/file.xml cache/diff/folder/file.xml 
```

当我尝试脚本时，它根本不会导出文件（文件夹是用另一个函数创建的，所以有一个。）

但如果我尝试以用户 www-data （从命令行）运行 svn 导出，它可以工作。

所以我不明白为什么它不应该从 php.. 也许一些配置？希望有人可以提供帮助，在此先感谢

**编辑** 还尝试了 svn (which svn) exec 的完整路径：

```
exec('/usr/bin/svn export -r '.$rev2.' '.$repourl.'/'.$dir.$parts[$j].' 
```

结果

```
/usr/bin/svn export -r 1192 file:///var/svn/Repo/folder/file.xml cache/diff/folder/file.xml 
```

仍然没有变化，文件没有被导出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:54:06.110

这不是配置。或者更确切地说，不是直接的。您的 PHP 实例似乎设置为无法写入您指定的文件夹的用户。PHP运行的用户可以写入的任何一个`chmod`或它。`chown`

旁注：我为 laravel 编写了一个 SVN 库。但是，它是独立的。您可能想通过使用它来减轻负担 - 它本身使用 PECL SVN 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:45:02.070

找到了解决方案，问题与不允许执行运行的全局变量有关。

# windows-phone-7 - 保存状态和 MVVM

> ID：15680945
> 
> 赞同：0
> 
> 时间：2013-03-28T11:46:06.047
> 
> 标签：windows-phone-7, mvvm-light

如何保存状态（例如通过 PhoneApplicationService）并且不违反 mvvm 原则。

当应用程序进入“停用”状态时，我想保留模型对象（例如，绑定到表单）并在应用程序恢复时恢复它。

我应该在哪里放置“保存状态机制”的逻辑。在视图或视图模型中？

viewmodel 中的缺点：我想在其他平台（Win8）上使用我的 mvvm，并且我想让我的 mvvm 最大程度地独立于平台。

我一直在考虑 viewmodel 中的一个事件，在该事件中，可以在创建模型对象的时刻处理视图并将其保存在特定于平台的存储中。

或者

使服务根据接口保存状态并在 ViewModelLocator 中注册。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:52:21.887

我最近写了一篇关于这个的文章，我为此创建了一个 NuGet 包：

文章：[http ://www.kenneth-truyers.net/2013/03/13/tombstoning-made-easy-in-windows-phone-mvvm/](http://www.kenneth-truyers.net/2013/03/13/tombstoning-made-easy-in-windows-phone-mvvm/)

NuGet：安装包 WindowsPhone.MVVM.Tombstone

您可以阅读文章以了解如何使用该软件包。

该包基本上允许您应用属性以在墓碑时保存所有属性并自动恢复它们。您只需要处理两个页面事件。

# hadoop - 使用 Hive ODBC 时出错

> ID：15680951
> 
> 赞同：1
> 
> 时间：2013-03-28T11:46:27.747
> 
> 标签：hadoop, odbc, hive

我一直在努力使用 Hive ODBC 运行一个示例，但到目前为止没有成功。

我正在使用 Hortonworks 的 Hive ODBC 驱动程序从 Win64 运行我的 java 程序。我一直以以下错误告终。

```
Exception in thread "main" java.sql.SQLException: [Microsoft][ODBC Driver Manager] Invalid string or buffer length
at sun.jdbc.odbc.JdbcOdbc.createSQLException(JdbcOdbc.java:6957)
at sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7114)
at sun.jdbc.odbc.JdbcOdbc.SQLGetDataString(JdbcOdbc.java:3907)
at sun.jdbc.odbc.JdbcOdbcResultSet.getDataString(JdbcOdbcResultSet.java:5698)
at sun.jdbc.odbc.JdbcOdbcResultSet.getString(JdbcOdbcResultSet.java:354)
at sun.jdbc.odbc.JdbcOdbcConnection.buildTypeInfo(JdbcOdbcConnection.java:1503)
at sun.jdbc.odbc.JdbcOdbcConnection.initialize(JdbcOdbcConnection.java:381)
at sun.jdbc.odbc.JdbcOdbcDriver.connect(JdbcOdbcDriver.java:174)
at java.sql.DriverManager.getConnection(DriverManager.java:582)
at java.sql.DriverManager.getConnection(DriverManager.java:207)
at inverika.training.hive.HiveODBCClient.main(HiveODBCClient.java:30) 
```

我从搜索中收集到的是这与 microsoft ODBC 驱动程序问题有关，但没有找到任何合适的解决方案。有人对这个问题有任何想法吗？感谢是否有人可以提供指针。

或者，我想直接从我的 Linux VM 尝试 ODBC。为此，我需要用于 Linux Ubuntu 的 Hive ODBC。我不擅长编译和生成所需的库。如果有人之前做过这个，请分享一下。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:59:19.190

我不清楚你的问题。您包含的错误消息来自哪里？您使用的是 JDBC 驱动程序还是 ODBC 驱动程序？

假设您使用的是 HDP，Linux ODBC 驱动程序可在此处获得：

[http://hortonworks.com/download/download-archives/](http://hortonworks.com/download/download-archives/)

# c# - 在gridview中合并结果

> ID：15680952
> 
> 赞同：1
> 
> 时间：2013-03-28T11:46:27.897
> 
> 标签：c#, asp.net, linq, list, datatable

我有一个应用程序，我想从应用程序下载不同用户的推文：

```
DataTable dt = obj.GetTableSP("GetAllBioOrderByNewest");

foreach (DataRow dr in dt.Rows)
{
    WebClient wb = new WebClient();
    Uri myUri = new Uri("http://api.twitter.com/1/statuses/user_timeline.xml?include_entities=true&include_rts=true&count=10&screen_name=" + dr["TwitterHandle"].ToString());
    wb.DownloadStringAsync(myUri);
    wb.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wblastID_DownloadStringCompleted);
} 
```

在这里我如何在gridview中绑定结果：

```
public void wblastID_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs args)
{
    try
    {
        XElement xmlTweets = XElement.Parse(args.Result);
        GridView1.DataSource = (from tweet in xmlTweets.Descendants("status")
                                select new Tweet
                                {
                                    ID = tweet.Element("id").Value,
                                    Message = tweet.Element("text").Value,
                                    UserName = tweet.Element("user").Element("screen_name").Value,
                                    TwitTime = tweet.Element("created_at").Value
                                }).ToList();

        GridView1.DataBind();
        if (GridView1.Rows.Count < 10)
        {
            viewmore.Visible = false;
        }
    }
    catch
    {
        MessageBox.Show("Error downloading tweets");
    }
} 
```

但这里的问题是，我只从数据表中获取最后一个用户的推文。

我想要的是，所有用户的组合结果`dt`并将其显示在 gridview 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:51:39.680

不要在`wblastID_DownloadStringCompleted`事件中绑定你的网格，因为你在循环中调用它，`foreach` 所以在每次迭代中它都绑定了新的细节。您必须创建一个新集合（`list`或`datatable`），然后在`foreach` 循环之后将您的 gridview 与新集合绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:57:34.297

我将从您的 wblastID_DownloadStringCompleted 方法中删除所有 gridview 调用。相反，拥有一个作为数据表的公共属性。由于 for each 语句调用 wblastID_DownloadStringCompleted 方法，只需附加数据表即可。for 语句完成后，即绑定数据源。一些伪代码：

```
someMethod
 for each twitterName as strin in myTable
     dim myFoundTweets as datatable
     dim myTweetName as string = "Your API Call To Get The name"

     myFoundTweets = addMe(myFoundTweets , myTweetName )

 next

  'now bind the source
end Metod

private sub addMe(byval myTweetName as string, byVal myTable as table)
   'parse the string here
   'add the values to a table or list of object
   'return it
end sub 
```

如果您需要更具体的示例，请告诉我

# php - 我想要结束 substr

> ID：15680963
> 
> 赞同：-2
> 
> 时间：2013-03-28T11:46:48.473
> 
> 标签：php, substring, substr

所以这是我的代码：我想从[http://example.com?agm=12345](http://example.com?agm=12345) end substr agm 获取 agm 以获取 12

```
 echo $_GET["agm"] if substr(["agm"], 0, -3); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:51:36.367

您的代码中有很多错误。

```
echo $_GET["agm"] // you should end it with ;

if substr(["agm"], 0, -3); 
```

你应该：

1.  使用括号作为标准，所以`if(...)`
2.  你应该使用`$_GET["agm"]`而不是`["agm"]`

您可以使用`substr($_GET["agm"],0,2)`前两个字符。

请参阅[`substr()`函数](http://www.php.net/manual/en/function.substr.php)的手册示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:50:47.827

您想获取...文本的值`agm`还是仅获取...文本？如果只是文本“agm”，只需将其写为字符串...

```
$str = "agm";
echo $str; // agm 
```

否则，获取“agm”的内容

```
$data = $_GET['agm'];
echo $data; // 12345 
```

如果这不是你所追求的，我真的不知道你在问什么。

# c# - 评估两个列表之间序列差异的算法

> ID：15680966
> 
> 赞同：3
> 
> 时间：2013-03-28T11:46:57.670
> 
> 标签：c#, algorithm, sequence

我正在寻找一种算法来比较两个序列。

序列 A - 将是一个以最佳顺序排列的整数 ID 列表

序列 B - 将是相同 ID 的列表，其顺序可能不同。

我想检测两个列表之间的顺序差异。

因此，我正在寻找一种算法来做到这一点。我想知道这是否是以前已解决的常见问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-01-15T00:39:02.963

正如 Julián Urbano 建议的那样，Kendall Tau Correlation 是一个很好的衡量标准。我决定使用 Linq 在 .Net 中实现它。这是我的代码，它同时实现了 Tau-A（用于没有联系的数据）和 Tau-B（允许联系）。该代码假设您的数据尚未排序，因此它根据 Measure1 对其进行排序以获得第一组排名值，然后根据 Measure2 对其进行排序以获得第二组排名。相关的是排名，而不是原始数据。（如果 measure lambda 函数返回原始对象不变，那么您可以将其应用于您已有的排名。）

```
using System;
using System.Collections.Generic;
using System.Linq;
using static System.Math;

namespace Statistics
{
    /// <summary>
    /// Compute the Kendall Tau Correlation of two orderings of values, a non-parametric correlation that compares the ranking
    /// of value, not the values themselves.
    /// 
    /// The correlation of the measures is one if all values are in the same order when sorted by two different measures.
    /// The correlation is minus one if the second ordering is the reverse of the first.
    /// The correlation is zero if the values are completely uncorrelated.
    /// 
    /// Two algorithms are provided: TauA and TauB. TauB accounts properly for duplicate values (ties), unlike TauA.
    /// </summary>
    public class KendallTauCorrelation<T, C> where C : IComparable<C>
    {
        private Func<T, C> Measure1 { get; }
        private Func<T, C> Measure2 { get; }

        public KendallTauCorrelation(Func<T, C> measure1, Func<T, C> measure2)
        {
            Measure1 = measure1;
            Measure2 = measure2;
        }

        /// <summary>
        /// Compute the Tau-a rank correlation, which is suitable if there are no ties in rank.
        /// </summary>
        /// <returns>A value between -1 and 1\. 
        /// If the measures are ranked the same by both measures, returns 1.
        /// If the measures are ranked in exactly opposite order, return -1.
        /// The more items that are out of sequence, the lower the score.
        /// If the measures are completely uncorrelated, returns zero.
        /// </returns>
        /// <param name="data">Data to be ranked according to two measures and then correlated.</param>
        public double TauA(IList<T> data)
        {
            var ranked = data
                     .OrderBy(Measure1)
                     .Select((item, index) => new { Data = item, Rank1 = index + 1})
                     .OrderBy(pair => Measure2(pair.Data))
                     .Select((pair, index) => new { pair.Rank1, Rank2 = index + 1 })
                     .ToList();
            var numerator = 0;

            var n = ranked.Count;
            var denominator = n * (n - 1) / 2.0;
            for (var i = 1; i < n; i++)
                for (var j = 0; j < i; j++)
                {
                    numerator += Sign(ranked[i].Rank1 - ranked[j].Rank1) 
                               * Sign(ranked[i].Rank2 - ranked[j].Rank2);
                }
            return numerator / denominator;
        }

        /// <summary>
        /// Compute the Tau-b correlation, which accounts for ties.
        /// 
        ///             n  - n
        ///              c    d
        ///  τ  = -----------------------
        ///   b    _____________________
        ///       / (n  -  n )(n  -  n )
        ///      √    0     1   0     2
        /// 
        /// where:
        ///        n0 = n(n-1)/2
        ///               
        ///        n1 =  Σ  t (t - 1)/2
        ///              i   i  i
        /// 
        ///        n2 =  Σ  t (t - 1)/2
        ///              j   j  j
        /// 
        ///      t[i] = # of ties for the ith group according to measure 1.
        ///      t[j] = # of ties for the jth group according to measure 2.
        ///        nc = # of concordant pairs
        ///        nd = # of discordant pairs
        /// </summary>
        /// <returns>A correlation value between -1 (perfect reverse correlation)
        ///  and +1 (perfect correlation). 
        /// Zero means uncorrelated. </returns>
        /// <param name="data">Data.</param>
        public double TauB(IEnumerable<T> data)
        {
            // Compute two Ranks by sorting first by Measure1 and then by Measure2.
            // Group by like values of each in order to handle ties.
            var ranked = data.Select(item => new { M1 = Measure1(item), M2 = Measure2(item) })
                .GroupBy(measures => new { measures.M1 })
                .OrderBy(@group => @group.First().M1)
                .ThenBy(@group => @group.First().M2)
                .AsEnumerable()
                .Select((@group, groupIndex) => new
                {
                    Measure1Ranked = @group.Select((measure, index) => new { measure.M1, measure.M2 }),
                    Rank = ++groupIndex
                })
                .SelectMany(v => v.Measure1Ranked, (s, i) => new
                {
                    i.M1,
                    i.M2,
                    DenseRank1 = s.Rank
                })
                .GroupBy(measures => new { measures.M2 })
                .OrderBy(@group => @group.First().M2)
                .ThenBy(@group => @group.First().M1)
                .AsEnumerable()
                .Select((@group, groupIndex) => new
                 {
                     Measure2Ranked = @group.Select((measure, index) => new { measure.M1, measure.M2, measure.DenseRank1 }),
                     Rank = ++groupIndex
                 })
                .SelectMany(v => v.Measure2Ranked, (s, i) => new { i.M1, i.M2, i.DenseRank1, DenseRank2 = s.Rank })                          
                .ToArray();
            if (ranked.Length <= 1)
                return 0; // No data or one data point. Impossible to establish correlation.

            // Now that we have ranked the data, compute the correlation.
            var n = ranked.Count();
            var n0 = n * (n - 1) / 2;
            var n1 = 0;
            var n2 = 0;
            var numerator = 0; // Stores nc - nd as a single value, rather than computing them separately.
            for (var i = 1; i < n; i++)
                for (var j = 0; j < i; j++)
                {
                    var iRanked = ranked[i];
                    var jRanked = ranked[j];
                    numerator += Sign(iRanked.DenseRank1 - jRanked.DenseRank1)
                               * Sign(iRanked.DenseRank2 - jRanked.DenseRank2);
                    // Keep track of ties. Because we are running the indices in a triangle,
                    // we automatically get this for n1 and n2: ties * (ties - 1) / 2
                    if (iRanked.M1.CompareTo(jRanked.M1) == 0)
                        n1++;
                    if (iRanked.M2.CompareTo(jRanked.M2) == 0)
                        n2++;
                }
            if (n0 == n1 || n0 == n2)
                return 0; // All ties, so everything as the same rank.
            // Observe that if n1 = n2 = 0, that this formula is identical to Tau-a.
            return numerator / Sqrt((double)(n0 - n1)*(n0 - n2));
        }
    }
} 
```

以下是 NUnit 中的单元测试：

```
using System;
using NUnit.Framework;
using static System.Math; // New C# 6.0 feature that allows one to import static methods and call them without their class name.

namespace Statistics
{

    [TestFixture]
    public class KendallTauCorrelationTests
    {
        public static int[] OneToTen = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };

        #region Tau-a

        [Test]
        public void TauA_SameOrder()
        {
            var kendall = new KendallTauCorrelation<int, int>(
                (int value) => value,
                (int value) => value * 10
            );
            Assert.AreEqual(
                1.0,
                kendall.TauA(OneToTen),
                "Numbers that sort in the same order should be perfectly correlated."
            );
        }

        [Test]
        public void TauA_ReverseOrder()
        {
            var kendall = new KendallTauCorrelation<int, int>(
                (int value) => value,
                (int value) => value * -10
            );
            Assert.AreEqual(
                -1.0,
                kendall.TauA(OneToTen),
                "Numbers that sort in reverse order should be perfectly anti-correlated."
            );
        }

        [Test]
        public void TauA_OneSwap()
        {
            var reordered = new[] { 1, 2, 3, 5, 4, 6, 7, 8, 9, 10 };
            var kendall = new KendallTauCorrelation<int, int>(
                (int value) => value,
                (int value) => reordered[value - 1]
            );
            Assert.AreEqual(
                43.0 / 45.0,
                kendall.TauA(OneToTen),
                0.00001,
                "If a single number is out of place the sequences should be almost perfectly correlated."
            );
        }

        #endregion

        #region Tau-b

        [Test]
        public void TauB_SameOrder()
        {
            var kendall = new KendallTauCorrelation<int,int>(
                (int value) => value, 
                (int value) => value * 10
            );
            Assert.AreEqual(
                1.0, 
                kendall.TauB(OneToTen), 
                "Numbers that sort in the same order should be perfectly correlated."
            );
        }

        [Test]
        public void TauB_ReverseOrder()
        {
            var kendall = new KendallTauCorrelation<int, int>(
                (int value) => value,
                (int value) => value * -10
            );
            Assert.AreEqual(
                -1.0,
                kendall.TauB(OneToTen),
                "Numbers that sort in reverse order should be perfectly anti-correlated."
            );
        }

        [Test]
        public void TauB_OneSwap_NoTies()
        {
            var reordered = new[] { 1,2,3,5,4,6,7,8,9,10 };
            var kendall = new KendallTauCorrelation<int, int>(
                (int value) => value,
                (int value) => reordered[value-1]
            );
            Assert.AreEqual(
                43.0/45.0,
                kendall.TauB(OneToTen),
                0.00001,
                "If a single number is out of place the sequences should be almost perfectly correlated."
            );
        }

        [Test]
        public void TauB_Ties()
        {
            var reordered = new[] { 1, 1, 1, 4, 5, 6, 7, 8, 9, 10 };
            var kendall = new KendallTauCorrelation<int, int>(
                (int value) => value,
                (int value) => reordered[value - 1]
            );
            Assert.AreEqual(
                42.0 / Sqrt(42.0*45.0),
                kendall.TauB(OneToTen),
                0.00001,
                "Adding a few ties should be almost perfectly correlated."
            );
        }

        #endregion
    }
} 
```

注意：这使用详尽的 O(N^2) 算法。有一种更有效的方法是使用经过修改的合并排序，即我听说过的 N Log N，但我还没有看到它是如何完成的。

注意：这个泛型类假定两个度量返回相同的数据类型。使类具有两种通用度量类型是一个简单的更改。它们只需要是 IComparables。它们不需要相互比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:10:27.637

如果您只是想衡量它们之间的*差异*，但您不关心差异发生在哪里，您可以使用[Kendall 的相关系数](http://en.wikipedia.org/wiki/Kendall_tau_rank_correlation_coefficient)。它为您提供从 -1（列表顺序相反）到 +1（列表顺序相同）的分数。

它基本上计算两个列表中顺序相同的元素对的数量，然后除以对的总数：

```
int[] a = { 1, 2, 3, 4, 5, 6, 7, 8 };
int[] b = { 3, 4, 1, 8, 6, 7, 2, 5 };

double numer = 0;
for (int i = 0; i < (a.Length - 1); i++)
  for (int j = i + 1; j < a.Length; j++)
    numer += Math.Sign(a[i] - a[j]) * Math.Sign(b[i] - b[j]);

double tau = numer / (a.Length * (a.Length - 1) / 2); 
```

# c# - System.Runtime.Serialization.InvalidDataContractException Windows Phone 8

> ID：15680967
> 
> 赞同：2
> 
> 时间：2013-03-28T11:47:03.303
> 
> 标签：c#, object, serialization, windows-phone-8

我正在尝试将对象保存到隔离存储中但收到`A first chance exception of type 'System.Runtime.Serialization.InvalidDataContractException' occurred in System.Runtime.Serialization.ni.dll`

我的对象类

```
[DataContract]
public class NoteContent : IEnumerable
{
    [DataMember] 
    public Microsoft.Phone.Controls.SupportedPageOrientation SupportedOrientation{ get; set; }
    [DataMember] 
    public List<Character> NoteCharacterList { get; set; }
    [DataMember] 
    public string NoteFileName { get; set; }

    private List<Character> notecontent = new List<Character>();

    public void Add(Character charObj)
    {
        notecontent.Add(charObj);
        NoteCharacterList = notecontent;
    }

    public void Clear()
    {
        notecontent.Clear();
    }

    public Character this[int id]
    {
        get { return notecontent[id]; }
    }

    public IEnumerator<Character> GetEnumerator()
    {
        return notecontent.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
} 
```

我用来序列化和保存对象的代码。在这一行引发了错误`_mySerializer.WriteObject(targetFile, sourceData);`

```
 public void SaveMyData(NoteContent sourceData, String targetFileName)
    {
        string TargetFileName = String.Format("{0}/{1}.dat", TargetFolderName, targetFileName);

        using (IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication())
        {

            if (!store.DirectoryExists(TargetFolderName))
                store.CreateDirectory(TargetFolderName);
            try
            {
                using (var targetFile = store.CreateFile(TargetFileName))
                {
                    _mySerializer.WriteObject(targetFile, sourceData);
                }
            }
            catch (Exception e)
            {
                store.DeleteFile(TargetFileName);
            }
        }

    } 
```

该对象包含对象和控件的列表。

![在此处输入图像描述](../Images/05a8b94aafcd9625494adc3b78760fc3.png)

要保存的主对象内的对象列表 ![在此处输入图像描述](../Images/cdddfd074c28f43a5e32634605fcc222.png)

是因为我无法序列化图像控件和画布控件等对象吗？将此类对象保存到隔离存储中的最佳方法是什么？

**更新 1**

我已将对象简化为仅包含以下属性，但仍然出现相同的错误。Points 和 Char 可以序列化吗？

```
 public Point ImagePosition { get; set; }
    public Char CharText { get; set; }
    public double ImageDegree { get; set; }
    public double ImageScale { get; set; }
    public int ImageZOrder { get; set; }
    public bool IsResizeCancel { get; set; }
    public double MaxSliderValue { get; set; }
    public double CurrentWidth { get; set; }
    public double CurrentHeight { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:57:26.077

设法解决了它。我通过删除可能未使用[将对象复制到另一个对象但删除某些属性 Windows Phone 8序列化的属性来简化我的对象](https://stackoverflow.com/questions/15681809/copying-object-to-another-object-but-remove-certain-properties-windows-phone-8/15681831#15681831)

简化类

```
[DataContract]
public class CharacterClone
{
    [DataMember] 
    public Point ImagePosition { get; set; }
    [DataMember] 
    public Char CharText { get; set; }
    [DataMember] 
    public double ImageDegree { get; set; }
    [DataMember] 
    public double ImageScale { get; set; }
    [DataMember] 
    public int ImageZOrder { get; set; }
    [DataMember] 
    public bool IsResizeCancel { get; set; }
    [DataMember] 
    public double MaxSliderValue { get; set; }
    [DataMember] 
    public double CurrentWidth { get; set; }
    [DataMember] 
    public double CurrentHeight { get; set; }

    public CharacterClone(Character original)
    { 
        ImagePosition = original.ImagePosition;
        CharText = original.CharText;
        ImageDegree = original.ImageDegree;
        ImageScale = original.ImageScale;
        ImageZOrder = original.ImageZOrder;
        IsResizeCancel = original.IsResizeCancel;
        MaxSliderValue = original.MaxSliderValue;
        CurrentWidth = original.CurrentWidth;
        CurrentHeight = original.CurrentHeight;
    }
} 
```

另一个需要注意的重要事项是文件路径。在 WP8 中，分隔符应该`\\`代替`/`诸如

```
string TargetFileName = String.Format("{0}\\{1}.dat", TargetFolderName, targetFileName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T08:16:32.363

我使用这个类并在保存时抛出相同的异常

System.Runtime.Serialization.ni.dll 中发生“System.Runtime.Serialization.InvalidDataContractException”类型的异常，但未在用户代码中处理

```
 [DataContract]
class UserInfo :SerializationException
{
    //  Constructors: 
    public UserInfo() { }
    public UserInfo(String username,String password) {
        Username = username;
        Password = password;
    }
   [DataMember] 
    public String Username
    {
        get;
        set;
    }
   [DataMember] 
    public String Password
    {
        get;
        set;
    }
} 
```

# android - 在Android中的活动上绘制位图

> ID：15680969
> 
> 赞同：1
> 
> 时间：2013-03-28T11:47:07.393
> 
> 标签：android, bitmap, adb

是否可以在手机上运行的应用程序上绘制位图或图像。问题是无法访问该应用程序源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:56:57.120

您可以通过 获取正在运行的应用程序列表。因此，`ActivityManager`如果您知道所需应用程序的名称，您可以创建一个服务来定期检查正在运行的应用程序列表，如果它正在运行，则显示您的图像。向您显示图像将很容易：创建一个 Activity 并为其设置一个包含您的图像的布局，然后在运行所需的应用程序时从您的服务启动它。

# r - R中的data.frame

> ID：15680975
> 
> 赞同：1
> 
> 时间：2013-03-28T11:47:44.433
> 
> 标签：r, dataframe, xlsx

我是 R 的初学者，我想从 R 创建一个 xlsx 文件。我的数据框定义为：

```
SP : List of 8
 $ WL          : num [1:1201] 200 200 201 202 202 ...
 $ t           : num [1:872, 1] 0.499 0.999 1.499 1.999 2.499 ...
 $ SP          : int [1:872, 1:1201, 1] 380 405 447 431 419 436 439 434 422 447 ...
 $ TF          : int [1:872, 1] 0 1 2 3 4 5 6 7 8 9 ...
 $ SpectraCount: num 872
 $ TStamp      : chr "12/01/2011 03:09:32PM"
 $ IT          : int 100
 $ SourceCount : num 1 
```

我想将 转换`data.frame`为一个表，其中 的每个值一列， 的每个值`WL`一行，表内的值作为和`t`的组合的 SP 。结果表如下所示：`WL``t`

```
 WL 1,.......... 1201
            t
            1         (SP values)
            .
            827 
```

* * *

如果我把

```
write.csv(SP1, file="SP1.csv", row.names = FALSE) 
```

然后我在data.frame中有错误（WL = c（200、200.5、201、201.5、202、202.5、203、203.5，：参数暗示不同的行数：1201、872、1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:57:32.823

也许生成一个 csv 文件就足够了。Excel 可以读取 csv 文件。看[`write.csv`](http://help.r-enthusiasts.com/library/utils/html/write.table.html)这个。

否则，有[`write.xls`](http://help.r-enthusiasts.com/library/dataframes2xls/html/write.xls.html)从`dataframes2xls`包，或[`write.xlsx`](http://help.r-enthusiasts.com/library/xlsx/html/write.xlsx.html)从`xlsx`包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:44:17.357

据我所知，没有任何 Excel 界面可以处理参差不齐的列表——您需要将其转换为矩形数据结构。

您当然可以遍历列表的列并编写它们，但我认为您最好将列表填充到 data.frame 中：

```
> l <- list(a="foo", b=c(1,2,3), d=(1.0,2.0,3.0,4.0))
> rows <- max(unlist(lapply(l, length)))
> padded <- lapply(l, function(col) c(col, rep(NA, rows-length(col))))
> as.data.frame(padded)
     a  b d
1  foo  1 1
2 <NA>  2 2
3 <NA>  3 3
4 <NA> NA 4 
```

然后，您可以将任何 Excel 包与我最喜欢的[XLConnect 一起使用](http://cran.r-project.org/web/packages/XLConnect/index.html)：

```
> library(XLConnect)
> writeWorksheetToFile(file="out.xlsx", data=as.data.frame(padded), sheet="Output") 
```

# java - 为什么这没有意义？移除节点

> ID：15680981
> 
> 赞同：0
> 
> 时间：2013-03-28T11:47:55.647
> 
> 标签：java, linked-list, nodes

我有代码可以接受用户输入并增加一个计数器以用于打印和删除目的。我添加了一些打印行来查看链表和当前位置之间的计数差异，这就是我得到的：

```
Enter a command from the list above (q to quit): 
2
Deleted: e                e                5                $5.0
 Current record is now first record.
4
5
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 4, Size: 4
        at java.util.LinkedList.entry(LinkedList.java:365)
        at java.util.LinkedList.get(LinkedList.java:315)
        at bankdata.command(bankdata.java:158)
        at bankdata.main(bankdata.java:314)
Java Result: 1
BUILD SUCCESSFUL (total time: 18 seconds) 
```

输入命令2，删除当前节点命令。当前节点是链表中的最后一个节点，其大小为 5，从技术上讲是 0-4。

那么当我运行这段代码时怎么会：

```
//currentAccount is a static int that was created at the start of my code.
//It got it's size because the int is saved every time a new node is made.
//The most recent size correlates with the last position in the linked list.
            int altefucseyegiv = accountRecords.size();
            System.out.println("Deleted: " + accountRecords.get(currentAccount)
                    + "\n Current record is now first record.");
            System.out.println(currentAccount);
            System.out.println(accountRecords.size());
            accountRecords.remove(currentAccount);
            System.out.println("Deleted: " + accountRecords.get(currentAccount)
                    + "\n Current record is now first record.");
            if(altefucseyegiv == 1)
            {
                currentAccount = -1;
            }
            else
            {
                currentAccount = 0;
            }
            records.currentAcc(currentAccount, accountRecords);
            return; 
```

我得到这个错误？？？

我很困惑！因为我要删除 .get(4)th，这意味着我只是删除了第 5 个元素，我不是说爱。有人可以解释一下并可能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T11:54:57.413

IOFB 异常由行抛出

```
System.out.println("Deleted: " + accountRecords.get(currentAccount)
                + "\n Current record is now first record."); 
```

您已经删除了第 5 个元素，所以现在没有第 5 个元素要显示（请记住数组位置从 0 开始）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T11:55:32.377

尝试

```
Object obj = accountRecords.remove(currentAccount);
System.out.println("Deleted: " + obj + "\n Current record is now first record."); 
```

我假设您已初始化`currentAccount`为`accountRecords.size() - 1`并`accountRecords`有 5 个节点。

然后`currentAccount`有一个值 4 并且您正在从列表中删除第 4 个元素，`accountRecords`只留下 4 个元素。

然后，您尝试从只有 4 个元素且有效元素索引为`accountRecords.get(4)`的列表中获取，这就是您收到错误的原因。`accountRecords``0..3`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T11:53:53.067

我认为你的错误是你的 println：

```
System.out.println("Deleted: " + accountRecords.get(currentAccount)
                + "\n Current record is now first record."); 
```

<- 你得到 IndexOutOfBoundsException 是因为你删除了列表的最后一个条目，还是我错了？也许试试：
System.out.println("Deleted: " + accountRecords.get(currentAccount-1) + "\n 当前记录现在是第一条记录。");

# javascript - jQuery 问卷滑块

> ID：15680984
> 
> 赞同：3
> 
> 时间：2013-03-28T11:48:04.980
> 
> 标签：javascript, jquery, html, slider

我希望在我的 Intranet 上创建一份问卷，通过一次只显示一个“部分”来简化用户，并允许用户在表单中前进和后退。

我没有描述我的想法，而是制作了一个小 GIF ![滑块](../Images/8c7c6ac7cad8f87119a28ab018cb69f4.png)

在我盲目地陷入困境之前，我真的很感激一些关于解决这个问题的最佳方法的建议。一些问题/想法

*   与其重新发明轮子，有什么东西可以做到这一点吗？（找不到合适的）
*   这最好是作为一个带有滑动 DIV 的 HTML 文档，还是使用 AJAX 以某种方式加载每个部分？
*   有些问题需要用户做出相当长的响应。我希望 PREV 和 NEXT 按钮异步保存他们的进度，以避免在他们“意外”关闭表单或用户倾向于做的任何事情时浪费时间。
*   我喜欢 jQuery，所以可能更喜欢 jQuery 解决方案

任何可以帮助我指出正确方向的建议将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:51:40.333

我认为`RhinoSlider`这正是你想要的：

教程：[http ://www.1stwebdesigner.com/css/create-multi-step-form-rhinoslider/](http://www.1stwebdesigner.com/css/create-multi-step-form-rhinoslider/)

演示：[http ://www.1stwebdesigner.com/wp-content/uploads/2012/07/multi-step-rhino/](http://www.1stwebdesigner.com/wp-content/uploads/2012/07/multi-step-rhino/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:18:50.310

你应该试试html5。链接在这里。希望能帮助到你 ...

[http://slides.html5rocks.com/#controls-slide](http://slides.html5rocks.com/#controls-slide)

# node.js - 处理Mongodb连接的正确方法是什么？

> ID：15680985
> 
> 赞同：21
> 
> 时间：2013-03-28T11:48:07.087
> 
> 标签：node.js, mongodb

我使用 10gen 的本机 node.js 驱动器将 node.js 与 mongodb (2.2.2) 一起尝试。

起初一切都很顺利。但是当来到并发基准测试部分时，出现了很多错误。频繁连接/关闭 1000 个并发可能会导致 mongodb 拒绝任何进一步的请求，错误如下：

```
Error: failed to connect to [localhost:27017]

Error: Could not locate any valid servers in initial seed list

Error: no primary server found in set 
```

此外，如果许多客户端在没有明确关闭的情况下关闭，则需要 mongodb 分钟来检测并关闭它们。这也会导致类似的连接问题。（使用 /var/log/mongodb/mongodb.log 查看连接状态）

我已经尝试了很多。根据手册，mongodb 没有连接限制，但**poolSize**选项似乎对我没有影响。

由于我只在 node-mongodb-native 模块中使用它，我不太确定最终导致问题的原因。其他语言和驱动程序的性能如何？

PS：目前，使用自维护池是我想出的唯一解决方案，但使用它并不能解决副本集的问题。根据我的测试，副本集似乎比独立 mongodb 需要更少的连接。但不知道为什么会这样。

并发测试代码：

```
var MongoClient = require('mongodb').MongoClient;

var uri = "mongodb://192.168.0.123:27017,192.168.0.124:27017/test";

for (var i = 0; i < 1000; i++) {
    MongoClient.connect(uri, {
        server: {
            socketOptions: {
                connectTimeoutMS: 3000
            }
        },
    }, function (err, db) {
        if (err) {
            console.log('error: ', err);
        } else {
            var col = db.collection('test');
            col.insert({abc:1}, function (err, result) {
                if (err) {
                    console.log('insert error: ', err);
                } else {
                    console.log('success: ', result);
                }
                db.close()
            })
        }
    })
} 
```

通用池解决方案：

```
var MongoClient = require('mongodb').MongoClient;
var poolModule = require('generic-pool');

var uri = "mongodb://localhost/test";

var read_pool = poolModule.Pool({
    name     : 'redis_offer_payment_reader',
    create   : function(callback) {
        MongoClient.connect(uri, {}, function (err, db) {
            if (err) {
                callback(err);
            } else {
                callback(null, db);
            }
        });
    },
    destroy  : function(client) { client.close(); },
    max      : 400,
    // optional. if you set this, make sure to drain() (see step 3)
    min      : 200, 
    // specifies how long a resource can stay idle in pool before being removed
    idleTimeoutMillis : 30000,
    // if true, logs via console.log - can also be a function
    log : false 
});

var size = [];
for (var i = 0; i < 100000; i++) {
    size.push(i);
}

size.forEach(function () {
    read_pool.acquire(function (err, db) {
        if (err) {
            console.log('error: ', err);
        } else {
            var col = db.collection('test');
            col.insert({abc:1}, function (err, result) {
                if (err) {
                    console.log('insert error: ', err);
                } else {
                    //console.log('success: ', result);
                }
                read_pool.release(db);
            })
        }
    })
}) 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-28T17:41:40.870

由于 Node.js 是单线程的，因此您不应该在每个请求上打开和关闭连接（就像您在其他多线程环境中所做的那样。）

这是编写 MongoDB node.js 客户端模块的人的引述：

> “当你的应用程序启动并重用 db 对象时，你打开 do MongoClient.connect 一次。它不是一个单例连接池，每个 .connect 都会创建一个新的连接池。所以打开它一次，[d] 在所有请求中重用。” - christkv [https://groups.google.com/forum/#!msg/node-mongodb-native/mSGnnuG8C1o/Hiaqvdu1bWoJ](https://groups.google.com/forum/#!msg/node-mongodb-native/mSGnnuG8C1o/Hiaqvdu1bWoJ)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T03:28:00.473

在听取了赫克托的建议后。我发现 Mongodb 的连接与我曾经使用过的其他一些数据库完全不同。主要区别是nodejs中的本机驱动器：MongoClient对于每个打开的MongoClient都有自己的连接池，池大小由定义

```
server:{poolSize: n} 
```

因此，使用 poolSize:100 打开 5 个 MongoClient 连接，意味着总共 5*100=500 个到目标 Mongodb Uri 的连接。在这种情况下，频繁的打开和关闭 MongoClient 连接肯定会给主机带来巨大的负担，最终导致连接问题。这就是为什么我一开始就遇到这么多麻烦。

但是由于我的代码是这样编写的，所以我使用连接池来存储具有每个不同 URI 的单个连接，并使用与 poolSize 大小相同的简单并行限制器，以避免负载峰值获取连接错误。

这是我的代码：

```
/*npm modules start*/
var MongoClient = require('mongodb').MongoClient;
/*npm modules end*/

// simple resouce limitation module, control parallel size
var simple_limit = require('simple_limit').simple_limit; 

// one uri, one connection
var client_pool = {};

var default_options = {
    server: {
        auto_reconnect:true, poolSize: 200,
        socketOptions: {
            connectTimeoutMS: 1000
        }
    }
}

var mongodb_pool = function (uri, options) {
    this.uri = uri;
    options = options || default_options;
    this.options = options;
    this.poolSize = 10; // default poolSize 10, this will be used in generic pool as max

    if (undefined !== options.server && undefined !== options.server.poolSize) {
        this.poolSize = options.server.poolSize;// if (in)options defined poolSize, use it
    }
}

// cb(err, db)
mongodb_pool.prototype.open = function (cb) {
    var self = this;
    if (undefined === client_pool[this.uri]) {
        console.log('new');

        // init pool node with lock and wait list with current callback
        client_pool[this.uri] = {
            lock: true,
            wait: [cb]
        }

        // open mongodb first
        MongoClient.connect(this.uri, this.options, function (err, db) {
            if (err) {
                cb(err);
            } else {
                client_pool[self.uri].limiter = new simple_limit(self.poolSize);
                client_pool[self.uri].db = db;

                client_pool[self.uri].wait.forEach(function (callback) {
                    client_pool[self.uri].limiter.acquire(function () {
                        callback(null, client_pool[self.uri].db)
                    });
                })

                client_pool[self.uri].lock = false;
            }
        })
    } else if (true === client_pool[this.uri].lock) {
        // while one is connecting to the target uri, just wait
        client_pool[this.uri].wait.push(cb);
    } else {
        client_pool[this.uri].limiter.acquire(function () {
            cb(null, client_pool[self.uri].db)
        });
    }
}

// use close to release one connection
mongodb_pool.prototype.close = function () {
    client_pool[this.uri].limiter.release();
}

exports.mongodb_pool = mongodb_pool; 
```

# extjs - 一旦我的搜索文本字段为空，如何在实时搜索中将原始商店重新加载到网格

> ID：15680987
> 
> 赞同：1
> 
> 时间：2013-03-28T11:48:18.907
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

我已经使用 Extjs 完成了应用程序。我正在向用户显示网格记录，这里添加了 livesearch 的功能。通过在搜索字段中输入一些文本，可以根据属性名称和值很好地进行过滤。但问题是一旦我从搜索字段中删除文本，当搜索字段变为空/空白时，原始存储数据未填充到网格中。**一旦搜索文本字段为空，如何将原始商店数据填充到网格中？** 欣赏。

**我的代码在这里：** incode *newValue*是搜索文本字段值，我正在检查其他部分。如果*newValue* null 意味着需要加载原始存储，否则它将过滤存储并显示记录。我添加了以下代码以重新加载原始商店不起作用。

```
{
    xtype: 'textfield',
    name: 'searchField',
    hideLabel: true,
    width: 200,
    listeners: {
        change: {
            fn: this.onTextFieldChange,
            scope: this,
            buffer: 100
        }
    }
},

onTextFieldChange: function (field, newValue, oldValue, options) {
    if (newValue == '') {
        //grid.setStore(store);
        Ext.getCmp('grid').getStore().load();
        here grid is id of my Grid
        Ext.getCmp('grid').getView().refresh();
    } else {
        grid.store.load().filter([{
            id: 'name',
            property: "name",
            value: newValue,
            anyMatch: true
        }]);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T04:27:56.313

我添加了**grid.store.clearFilter();** 一旦搜索文本字段为空，清除过滤器。工作正常。干杯:)

# php - SimpleHTML 循环返回未定义的索引

> ID：15680993
> 
> 赞同：0
> 
> 时间：2013-03-28T11:48:53.377
> 
> 标签：php

我曾使用 SIMPLE HTML DOM 来捕获三个不同的元素。我想一一展示。但是，它向我显示了有关使用 for 循环的错误消息：

> 未定义索引：i。

怎么了？请帮我。

```
include('simple_html_dom.php');

$html = file_get_html('http://....');

$a=$html->find('div.briefimage');
echo $a[0];

$b = $html->find('span.briefcitTitle');
echo $b[15];
$c = $html->find('table.bibItems td');
echo $c[0]; 

for ($i = 0; $i <= 10; ++$i) {
    echo $a[i]->plaintext . '<br>';
    echo $b[i]->outertext . '<br>';
    for ($j = i; $i <= 2; $j++) {
    echo $c[i]->innertext . '<br>';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:52:50.197

你应该使用`$i`而不是仅仅`i`......所以改变

```
for ($i = 0; $i <= 10; ++$i) {
    echo $a[i]->plaintext . '<br>';
    echo $b[i]->outertext . '<br>';
    for ($j = i; $i <= 2; $j++) {
    echo $c[i]->innertext . '<br>';
    }
} 
```

到

```
for ($i = 0; $i <= 10; ++$i) {
    echo $a[$i]->plaintext . '<br>';
    echo $b[$i]->outertext . '<br>';
    for ($j = $i; $i <= 2; $j++) {
       echo $c[$i]->innertext . '<br>';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:52:42.153

在遍历 lop 检查是否每个数组都已设置。或者尝试使用`isset`来检查是否设置了数组。还可以使用 print_r() 或 var_dumb 你的数组来检查你是否在数组中获取值。你收到通知是因为你的数组之一不包含值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:52:55.933

这意味着您的数组之一`$a`，`$b`或者`$c`缺少您尝试访问的密钥`$i`：

```
$foo = array('a', 'b');
$i = 3;
echo $foo[$i]; # Error because there is no third key in $foo 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T11:56:25.060

只是快速浏览了一下，尝试`$i++`而不是`++$i`

如果这不起作用 var_dump $a, $b & $c

# ruby-on-rails - URL 不是持久的

> ID：15680995
> 
> 赞同：0
> 
> 时间：2013-03-28T11:49:01.110
> 
> 标签：ruby-on-rails, actioncontroller, static-pages

我创建了一个静态的“谢谢”页面。但每次我去`/thanks`它时，都会将我转发到这样的 URL：`/thanks#.UVQswKt-WyK`

我在我的`routes.rb`：

```
match '/thanks',  to: 'static_pages#thanks' 
```

并且静态页面中的文件被称为`thanks.html.erb`

我所有的其他静态页面都可以正常工作，如果我转到 eg `/services`，则 url 保持原样。

我错过了一些东西，但我不确定是什么......

# asp.net - 如何在表格中加载用户控件

> ID：15680997
> 
> 赞同：0
> 
> 时间：2013-03-28T11:49:03.097
> 
> 标签：asp.net

我想在每次按下按钮时将 usercontrl 添加到表控件，我已经在 Click Event 中完成了此代码，我在 First Click 中获得了控件，但是在此控件消失之后，可以提出解决方案吗？谢谢。

```
if (Session["tbl"] == null)
    {
        Session["tbl"] = Table1;
    }
    else
    {
        Table1 = (Table)Session["tbl"];
    }
    TimeSheetRow tr= LoadControl ("TimeSheetRow.ascx") as TimeSheetRow ;
    tr.ID = "tr" + Table1.Rows.Count;

Session.Add((Session.Count + 1).ToString(), tr);

    Table1.Rows.Add(new TableRow());
    Table1.Rows[Table1.Rows.Count -1].Cells.Add(new TableCell());
    Table1.Rows[Table1.Rows.Count - 1].Cells[0].Controls.Add(tr);

    Session["tbl"] = Table1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:21:26.193

每当您将控件动态添加到控件集合时，在回发时您必须将该控件重新添加到控件树中。所以所有旧的用户控件都需要在页面初始化时重新添加。另外，我强烈建议不要使用 session 来存储对表行的引用；如果您将表行重新添加到表中，viewstate 将重新加载其中的数据。