# StackOverflow 问答 16055000-16055999

# firefox - GreaseMonkey 不执行带有 GM_* 系列函数的脚本

> ID：16055004
> 
> 赞同：1
> 
> 时间：2013-04-17T08:18:45.700
> 
> 标签：firefox, greasemonkey

我决定在我的 GM 脚本中添加一段记忆。我添加了一个对 GM_setValue 的调用，突然脚本停止被调用。我尝试将@grant 行添加到元数据块，尝试重新安装和重命名脚本 - 不走运。

此外，用 GM_* 函数注释行也无济于事。必须删除它们才能使脚本再次起作用。即使在没有实际调用的情况下在@grant 行中提及它们也会阻止脚本启动。

我在 Ubuntu-12.04、Firefox-19.0.2 和 GreaseMonkey-1.8 上遇到过这种情况

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:30:29.790

没有[记录此类问题的错误](https://github.com/greasemonkey/greasemonkey/issues)。 **您需要展示您的脚本**或演示问题[的 SSCCE](http://sscce.org/)。

您在错误控制台 ( ) 上看到了哪些错误`Ctrl``Shift``J`？

可能发生的情况是您的脚本正在使用页面范围对象，利用 Greasemonkey 奇怪的新沙盒禁用功能。当脚本尝试使用`GM_`函数或设置`@grant`值（除了`none`）时，沙箱会作为副作用重新打开。因此，如果您的脚本使用页面范围对象，它现在会抛出错误。

# php - 当你有一个 id 段时，如何使用路由隐藏控制器名称？

> ID：16055006
> 
> 赞同：0
> 
> 时间：2013-04-17T08:18:50.680
> 
> 标签：php, codeigniter, url, routing, segments

我有一个这样的网址：

```
http://kees.een-site-bouwen.nl/home/categorie/11 
```

显示特定类别的工厂。

我想要一个这样的网址：

```
http://kees.een-site-bouwen.nl/categorie/11 
```

但是当我在我的 config/routes 文件中使用 url 路由时，如下所示：

```
$route['categorie'] = 'home/categorie'; 
```

这没用。我错过了什么吗？

该页面的工作链接是：

```
echo '<a href="'.base_url().'home/categorie/'.$value->idcategorieen.' ">' .$value->Categorie. '</a>'; 
```

不起作用的链接是：

```
echo '<a href="'.base_url().'categorie/'.$value->idcategorieen.' ">' .$value->Categorie. '</a>'; 
```

希望可以有人帮帮我 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:25:19.490

```
$route['categorie/(:num)'] = 'home/categorie/$1'; 
```

这是一条简单、快速和干净的路线:)

请在询问之前阅读文档.. [CI 路由](http://ellislab.com/codeigniter/user-guide/general/routing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:26:22.253

你没有提到论点，即 11 喜欢这个

```
$route['categorie/(:num)'] 
```

# ios - UI 端和子项目中的 CoreData 最佳实践实施

> ID：16055008
> 
> 赞同：1
> 
> 时间：2013-04-17T08:18:55.700
> 
> 标签：ios, objective-c, cocoa-touch, core-data

应用场景：在 UI 上，点击一个按钮从服务器获取联系人列表。请求转到子项目，该子项目进行下载和解析，并通过其委托将结果返回给 UI。到目前为止一切正常。假设没有互联网连接，我们不能有联系人列表。为了解决这个问题，我想缓存核心数据中的数据。如果没有互联网，缓存的数据将被返回。现在困扰我的问题是，是否可以创建一个数据模型并在子项目中使用它来保存数据，以及在从同一数据模型中提取和编辑数据的 UI 中使用它？所以基本上我想从不同的子项目和 UI 访问核心数据。我找不到有关此问题的提示或教程。有任何想法吗？

提前致谢！

编辑：

添加到父项目“a”的项目“b”。项目“b”实际上是一个静态库。

如果我让库保存数据并将数据返回到 UI，那么从核心数据中获取所有数据然后将其发送到 UI 会不会效率低下？

我实际上希望有一种方法可以在 UI 和库中使用相同的数据模型。我想防止 UI 有大量数据。最好有核心数据来处理包括在内。内存管理。我仍在阅读一些资料并尝试在测试项目中实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:06:23.137

我认为只有主项目应该处理持久性，因为你总是可以决定以不同的方式处理它——是否永久保存它，使用核心数据或自制的 sql 包装器……。因此，由代表决定如何处理更多数据。
但是与委托协议一起，您可以决定维护不同的模型协议，这些协议定义了您的模型可以保存的内容。这将独立于实施。如果该对象符合协议，则委托现在可以将对象（无论是否核心数据模型）返回给委托人。子模块中的委托人现在可以检查服务器和/或缓存中的值。

# typo3 - 在 HMENU 中获取页面内容

> ID：16055011
> 
> 赞同：0
> 
> 时间：2013-04-17T08:18:56.557
> 
> 标签：typo3, typoscript

我正在使用 Typoscript 中的 HMENU 创建一个菜单。现在我的问题是：是否有可能检查链接的分页是否为任何内容。如果没有，我该如何禁用链接？

我使用以下代码生成菜单

```
 NAV = HMENU
  NAV{
  entryLevel = 0
  wrap = <ul class="nav">|</ul>
  1 = TMENU
  1.NO {
    allWrap = <li class="nav-button"><p class="title">|</p></li>
  }
  1.ACT = 1
  1.ACT {
    allWrap = <li class="nav-button selected"><p class="title">|</p></li>
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:08:23.073

未经测试！

如果该页面上有任何 tt_content 记录，您可以使用 numRows 检查（如果您只想检查特定记录，可以[使用](http://docs.typo3.org/typo3cms/TyposcriptReference/Functions/Numrows/Index.html)WHERE ）[。](http://docs.typo3.org/typo3cms/TyposcriptReference/Functions/Select/Index.html)使用[required](http://docs.typo3.org/typo3cms/TyposcriptReference/Functions/Stdwrap/Index.html)您定义，仅当 numRows 大于 1 时才会呈现此菜单项。

```
NAV.1.NO.allStdWrap.required.numRows {
  table = tt_content
  select {
    # uid of this page, is the pid of the records to look for
    pidInList.field = uid
  }
}
NAV.1.ACT.allStdWrap < NAV.1.NO.allStdWrap 
```

# c# - 自定义工作日日期验证需要实施或识别文化

> ID：16055015
> 
> 赞同：0
> 
> 时间：2013-04-17T08:19:25.183
> 
> 标签：c#, javascript, jquery, asp.net-mvc

这**与**我昨天的问题类似，因为它与`Date`浏览器的格式和格式有关。

[日期验证允许无效日期](https://stackoverflow.com/questions/16040773/date-validation-allows-invalid-dates)

我正在掌握`jQuery`，这可能就是为什么我经常撞到砖墙的原因，因为我不知道下一步该做什么`Javascript`。`MVC`我正在创建一个简单的假期请求应用程序。请求日期必须是工作日。

我昨天完成了[这个](http://www.codeproject.com/Articles/422573/Model-Validation-in-ASP-NET-MVC)，这就是我所拥有的。

```
public class WeekdayAttribute : ValidationAttribute, IClientValidatable
{
  public override bool IsValid(object value)
  {
    DateTime dt;
    if (DateTime.TryParse(value.ToString(), out dt))
      return dt.DayOfWeek != DayOfWeek.Saturday && dt.DayOfWeek != DayOfWeek.Sunday;
    else
      return false;
  }

  public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
  {
    yield return new ModelClientValidationRule()
    {
      ErrorMessage = ErrorMessage,
      ValidationType = "weekdaydate"
    };
  }
} 
```

然后我有以下内容`jQuery.validate.unobtrusive`

```
$jQval.addMethod("weekdaydate", function(value, element, params) {
  var day = new Date(value).getDay();
  return day != 0 && day != 6;
}); 
```

从某种意义上说，如果我输入了无效的`US`日期，它的功能可以正常工作，它会很好地验证并显示一条消息。然而，忽略我的机器和浏览器是`UK`，类似于我之前问题中的验证（这似乎只允许`*/*/*`* 是一个数字）。

我的问题是，有没有办法强制我的日期`UK`在整个 MVC 网站上格式化？如何强制`UK`格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:01:00.993

`@jbl's`评论是一个伟大的呼喊。我已将`date`验证修改`jquery.validation.js`为如下：

```
$jQval.addMethod("weekdaydate", function(value, element, params) {
  var day = new moment(value, "DD-MM-YYYY").day();
  return day != 0 && day != 6;
}); 
```

# html - 如何跟踪 HTML 文件中的图像（插入和删除）

> ID：16055016
> 
> 赞同：0
> 
> 时间：2013-04-17T08:19:32.500
> 
> 标签：html

我有一个内容可编辑的 HTML 文件，一个编辑器。每当我将图像插入编辑器或从编辑器中删除图像时，我都想显示警报。我怎样才能做到这一点？我必须处理的任何事件。我可以跟踪插入图像，但如何跟踪删除的图像？我想在我的编辑器中计算图像的总大小 - 预加载图像的大小（如果有）+ 插入的图像大小，以及图像的总数。

```
 <html>
    <head>
    <script type="text/javascript">
     function InsertImage() {
      var imagePath = "D:/\images/\Desert.jpg";
        var imageInfo = "<img src='" + imagePath + " ' width='200' height='200'>";
        document.execCommand('InsertHTML',false,imageInfo); 
     }
    </script>
    </head>
    <body>    
    <input type="submit" value="Image"  onClick="InsertImage()" />
    <div id="EditBox" contentEditable="true"  
            style="border: solid 1px red; width: 600px; height: 300px; 
            overflow-y: scroll; overflow-x: scroll;">
            </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:37:09.303

通过您自己的功能进行添加或删除，并在该功能中显示警报。

# perl - Gearman（perl 扩展）：从工作人员向客户端发送消息

> ID：16055020
> 
> 赞同：1
> 
> 时间：2013-04-17T08:19:33.530
> 
> 标签：perl, gearman

我正在使用 gearman（perl 扩展）开发分布式作业执行系统。当工作检索前台工作时，我希望客户端能够获取工作人员机器的主机名，这需要一种从工作人员向客户端发送消息的方法。我认为这是可能的，因为我们已经有了`Gearman::Job->set_status`方法，但是它只能处理数值。我做了一些研究，发现[了这个](https://stackoverflow.com/questions/7982450/gearman-sending-data-from-a-background-worker-to-the-client)，但它是用于 Gearman PHP 扩展的。Perl 有类似的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T09:15:04.997

~~最后我发现，即使我们`send_data`在 CPAN 上没有得到 Gearman::Worker 包，也存在另一个`Gearman::XS::Worker`提供[此功能](http://search.cpan.org/~dschoen/Gearman-XS-0.12/lib/Gearman/XS/Job.pm#%24job-%3Esend_data%28%24data%29)的包，并且可以解决问题。~~

编辑：我试过`Gearman::XS::Worker`了，但似乎有些方法不适用于我的 Gearman 0.33。所以我回到，并根据 gearman 的协议向这个包`Gearman::Worker`添加了方法，你可以[在这里](https://github.com/duskast/Gearman)克隆它（克隆 repo 并覆盖 Gearman 目录）。`send_data`

# python - 在基于 Flask 的 Python Web 应用程序中从外部更改全局变量

> ID：16055024
> 
> 赞同：6
> 
> 时间：2013-04-17T08:19:57.200
> 
> 标签：python, global-variables, flask

我不明白在使用烧瓶扩展烧瓶脚本时如何更改全局变量。为了演示我的问题，我开发了以下小型烧瓶应用程序，它将为每个请求调用增加一个全局计数器变量。此外，它还提供了重置全局计数器的重置功能：

```
# -*- coding: utf-8 -*-

import sys
reload(sys)
sys.setdefaultencoding("utf-8")

from flask import Flask
from flask.ext.script import Manager
app = Flask(__name__)
app.debug = True

manager = Manager(app)

counter = 0

@manager.command
@app.route("/reset")
def reset():
    global counter
    print "Counter before reset:", counter
    counter = 0
    print "Counter after reset:", counter
    return str(counter) 

@app.route("/")
def add():
    global counter
    print "Counter before adding:", counter
    counter +=1
    print "Counter after adding:", counter
    return str(counter)

if __name__ == "__main__":
    manager.run() 
```

我使用启动我的烧瓶应用程序`python counter.py runserver`

当我访问地址 127.0.0.1:5000 时，我看到计数器在增加

```
Counter before adding: 0
Counter after adding: 1
127.0.0.1 - - [17/Apr/2013 10:09:35] "GET / HTTP/1.1" 200 -
127.0.0.1 - - [17/Apr/2013 10:09:35] "GET /favicon.ico HTTP/1.1" 404 -
Counter before adding: 1
Counter after adding: 2
... 
```

当我访问地址 127.0.0.1:5000/reset 时，我看到计数器已重置

```
Counter before reset: 4
Counter after reset: 0
127.0.0.1 - - [17/Apr/2013 10:10:39] "GET /reset HTTP/1.1" 200 -
127.0.0.1 - - [17/Apr/2013 10:10:39] "GET /favicon.ico HTTP/1.1" 404 - 
```

但是，当我尝试使用烧瓶脚本扩展提供的管理接口从命令行调用重置方法时，全局计数器变量不会重置：

```
> python counter.py reset
Counter before reset: 0
Counter after reset: 0
0 
```

我究竟做错了什么？如何使用烧瓶脚本访问和操作全局变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T08:45:42.793

Python 全局变量就像`counter`活在操作系统进程内存空间中一样。每个启动和停止的进程（应用程序、命令等）都有自己的内存块。

当您运行`python counter.py reset`它时，它会使用自己的内存空间和变量启动一个新进程。变量 reset 是针对这个进程运行的，而不是针对运行 Web 服务器的进程。

正确重置变量

*   将变量保留在进程内存空间之外（例如在 memcached、数据库中）

*   使用 wget、curl、urllib 等创建一个通过特殊视图 URL 调用 Web 服务器进程的命令，该视图将重置进程内存空间内的变量

# javascript - 添加/删除/替换 html 元素的类

> ID：16055025
> 
> 赞同：0
> 
> 时间：2013-04-17T08:19:57.907
> 
> 标签：javascript, jquery

我很好奇如何向 html 元素添加/删除类？这似乎是一个非常简单的操作。但事实证明，由于某种原因，没有找到方法 removeClass。

所以我需要做的是替换或删除一个旧的并向元素添加一个新的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:23:11.947

使用`addClass`和`removeClass`

```
<div class="firstClass" id="uniqeId"></div>

$("div#uniqeId").removeClass("firstClass");
$("div#uniqeId").addClass("Some_Other_Class"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:23:49.590

```
$('#elementId').addClass('className');
$('#elementId').removeClass('className'); 
```

请参阅：[http ://api.jquery.com/category/manipulation/class-attribute/](http://api.jquery.com/category/manipulation/class-attribute/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T08:26:14.720

由于您的问题带有[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")标记，因此您可以使用两个函数：

1.  [`$(element).removeClass('oldclass')`](http://api.jquery.com/removeclass/)

2.  [`$(element).addClass('newclass')`](http://api.jquery.com/addclass/)

如果没有 jQuery，并且在现代浏览器上，您可以使用该[`classList`](https://developer.mozilla.org/en-US/docs/DOM/element.classList)属性：

```
element.classList.remove('oldclass')

element.classList.add('newclass') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T08:35:56.793

您可以使用[`.toggleClass()`](http://api.jquery.com/toggleClass/)同时添加/删除，我的意思是从一个类切换到另一个：

### 来自文档的描述

> 根据类的存在或 switch 参数的值，从匹配元素集中的每个元素中添加或删除一个或多个类。

如果这是您的 html：

```
<div class="aaa">Some text.</div> 
```

然后这个脚本：

```
$('div.aaa').toggleClass('bbb'); 
```

将输出如下：

```
<div class="aaa bbb">Some text.</div> 
```

* * *

或者，如果您这样做：

```
$('elem').toggleClass('aaa bbb');
     //--------------------^^^---here this class will be added/removed 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T08:21:27.233

用于`AddClass`添加类，`removeClass`删除，`toggleClass`切换（如果存在则删除类，如果不存在则添加）:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-17T08:21:36.490

如果您使用 jQuery，请确保它在您的脚本之前加载，然后像这样使用：

```
$('p').removeClass('myClass yourClass') // remove class
$("p").addClass("myClass yourClass");   // add class 
```

如果你想在这里使用纯 JS，你是：[如何将类添加到给定元素？](https://stackoverflow.com/questions/507138/how-do-i-add-a-class-to-a-given-element)

```
var d = document.getElementById("div1");
d.className = d.className + " otherclass"; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-17T08:22:20.757

该`removeClass`方法包含在 jQuery 中，除非您已覆盖它。

`$("#someElement").removeClass("someclass");`

# tomcat - Tomcat AccessLogValve 模式重新加载而不重新启动

> ID：16055030
> 
> 赞同：1
> 
> 时间：2013-04-17T08:20:27.570
> 
> 标签：tomcat, reload, server.xml

是否可以在不重新启动 Tomcat 的情况下重新加载 server.xml 中的更改？

我想在许多服务器上对我的 access_log 格式（在 org.apache.catalina.valves.AccessLogValve -> pattern='...'）进行几处更改，但我不想为服务器中的每个更改重新启动 Tomcat .xml。是否可以让 Tomcat 在不重新启动的情况下重新加载模式中的配置更改？

（雄猫 7.0.29）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T07:11:38.263

恐怕看起来答案是否定的。在Tomcat 7 文档中[定义上下文：](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Defining_a_context)

> **不建议将元素直接放在 server.xml 文件中。**这是因为它使修改**Context**`conf/server.xml`配置更具侵入性，因为如果不重新启动 Tomcat 就无法重新加载 主文件。

那里有很多粗体字。当然，他们一定是认真的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T07:42:53.510

首先，我完全同意 Michael Scheper 的观点，当 tomcat 说他们不喜欢直接放置在 server.xml 中的元素时，他们是认真的。话虽如此，可能会有一个肮脏的黑客攻击，您可以自担风险尝试。tomcat 中的 AccessLogValve 类似乎具有用于“目录”和“格式”的公共设置方法。忘记我曾经说过。

# javascript - 如何隐藏 Highslide 媒体查看器中的控件？

> ID：16055036
> 
> 赞同：0
> 
> 时间：2013-04-17T08:20:53.463
> 
> 标签：javascript, css, highslide

是否可以完全隐藏 Highslide 中的控件？

我正在寻找类似的东西

```
hs.showControls = false; 
```

但当然任何其他解决方案也可以。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:30:01.053

在您的 Highslide JS 配置中，在 hs.addSlideshow 部分中，设置**useControls: false**。

# c# - 如何减小特定格式字符串的大小？

> ID：16055039
> 
> 赞同：0
> 
> 时间：2013-04-17T08:21:08.433
> 
> 标签：c#, .net, string, hex, byte

我为我的项目设计了一个 2 Pass 汇编器。输出为十六进制形式，即 15 为 0F。

我正在使用 ComPort 并通过应该作为字符串发送的线路发送“0F”。但问题是我只能在另一端接收 1 个字节和`sizeOf("0F") > 1`byte 。没有办法在另一端解压缩数据，我需要在我的一端完成所有工作，但我仍然想在另一端接收“0F”。如果可以，我可以这样做吗？

我这样做是为了得到十六进制字符串：

```
String.format("{0:X2}",15); 
```

* * *

此外，

```
using System.IO.Ports; 
private SerialPort comPort = new SerialPort(); 
comPort.Write("0F"); 
```

在接收端，我有一个 8 位处理器，它有一个 1byte * 256 个块，即 256 个字节。接收时的“0F”作为 2 个字节接收，不能存储在 1 个字节的单个块中。所以我希望“0F”为 1 个字节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:33:01.537

看起来你需要这样的东西：

```
 // create buffer
    byte[] buffer = new byte[256];

    // put values you need to send to buffer
    buffer[0] = 0x0f;

    // ... add another bytes if you need...

    // send them
    var comPort = new SerialPort();
    comPort.Write(buffer, 0, 1); // 0 is buffer offset, 1 is number of bytes to write 
```

# ipad - 在编辑框的 Go Button 上隐藏键盘

> ID：16055043
> 
> 赞同：0
> 
> 时间：2013-04-17T08:21:20.173
> 
> 标签：ipad, keyboard, xpages

我正在开发一个 xpages 移动表单来进行全文搜索。如何在 iPad 上隐藏键盘，完成在编辑框中写入文本并执行提交操作后单击“执行”按钮？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:17:22.803

可以使用输入框的*blur()方法隐藏键盘：*

```
XSP.getElementById('view:_id1:inputText1').blur(); 
```

view:_id1:inputText1 是你输入框的客户端id

# javascript - 可重用的 javascript 对象、原型和范围

> ID：16055046
> 
> 赞同：11
> 
> 时间：2013-04-17T08:21:21.390
> 
> 标签：javascript, scope, prototype

```
MyGlobalObject;

function TheFunctionICanUseRightAwaySingleForAllInstansesAndWithoutInstanse() {
    function() {
        alert('NO CONSTRUCTOR WAS CALLED');
    }
}; 
```

Long-named 函数必须可从 调用，而在加载脚本后，该函数必须始终`MyGlobalObject`作为全局 (to) 变量可用。`window`它应该支持符合最新标准的可扩展性。

我处于如何为应用程序构建 JS 基础的架构困境（几乎 100% JS）。

我们需要一个对象，即`window.MyObject`（像一个模块，像 jQuery）所以

它可以用

**VAR1**

```
 var MyGlobalObjConstructor = function(){
     this.GlobalFunctionInObject = function(){
        alert('called with MyGlobalObj.GlobalFunctionInObject()');
        }        
};
window.MyGlobalObj = new MyGlobalObjConstructor(); 
```

`MyGlobalObj`可扩展吗？我可以创建子对象，它们将继承`MyGlobalObj`（扩展函数/属性，`MyGlobalObj.NewFunc`例如）的当前状态吗？使用原型（VAR3）的主要区别是什么？

我`GlobaldFunction`的意思是所有初始化/实例化（可能实例化）实例的单个实例..

或与

**VAR2**

```
var MyGlobalObj = {
    GlobalFunctionInObject: function...
    GlobalFunctionInObject2: function...
};
MyGlobalObj.GlobalFunctionInObject();
// here I lose all hierarchy elements, no prototype, 
// can I use GlobalFunctionInObject2 in GlobalFunctionInObject? 
```

或与

**VAR3**

```
var MyGlobalConstuctor = function(){} // already 'well-formed' object
MyGlobalConstuctor.prototype.GlobalFunctionInObject = function...
};
var MyGlobalObj = new MyGlobalConstuctor();

// so I'm sceptical to NEW, because I have ALREADY wrote my functions 
// which I expect to be in memory, single instance of each of them, 
// so creating MyObject2,3,4 with NEW MyGC() makes no sense to me.
// DO I REALLY HAVE TO USE "MyGlobalConstuctor.prototype." FOR EACH FUNCTION?!!!! 
```

定义`MyGlobalObj`为函数和对象（func 或 VAR2 的结果）有什么区别？

**还是 VAR4？**

我在 Chrome 调试器中看到了原型和`__proto__`特殊字段。我读过没关系，但为什么它们没有保存在一个原型中？

那么，什么是正确/最佳的实施方式`window.MyObject`，那么`MyObject.MyFunction();`变体 1 2 和 3 有什么区别（赞成/反对）？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-17T11:14:03.987

## 变体 1 - Mixin

```
function SomeType() {
    var priv = "I'm private";
    this.publ = "I'm public";
    this.action = function() {
        return priv + this.publ;
    };
}

var obj = new SomeType(); 
```

使用此方法，您每次调用时都会创建一个新对象`new SomeType()`，创建其所有方法并将所有此方法添加到新对象中。每次创建对象时。

### 优点

*   它看起来像经典继承，因此对于 Java-C#-C++ 等人来说很容易理解。
*   每个实例可以有私有变量，因为每个创建的对象都有一个函数[闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)
*   它允许多重继承，也称为 Twitter-mixins 或[函数式 mixins](http://javascriptweblog.wordpress.com/2011/05/31/a-fresh-look-at-javascript-mixins/)
*   `obj instanceof SomeType`将返回真

### 缺点

*   随着您创建的对象越多，它会消耗更多的内存，因为对于每个对象，您都在创建一个新的闭包并再次创建它的每个方法。
*   私有属性是`private`，不是`protected`，子类型不能访问它们
*   没有简单的方法可以知道一个对象是否有某个类型作为超类。

### 遗产

```
function SubType() {
    SomeType.call(this);
    this.newMethod = function() {
        // can't access priv
        return this.publ;
    };
}

var child = new SubType(); 
```

`child instanceof SomeType`将返回 false 没有其他方法可以知道孩子是否有 SomeType 方法，而不是一一查看它是否有它们。

## 变体 2 - 带有原型的对象字面量

```
var obj = {
    publ: "I'm public",
    _convention: "I'm public too, but please don't touch me!",
    someMethod: function() {
        return this.publ + this._convention;
    }
}; 
```

在这种情况下，您正在创建一个对象。如果您只需要这种类型的一个实例，它可能是最好的解决方案。

### 优点

*   它快速且易于理解。
*   高性能

### 缺点

*   没有隐私，每个财产都是公共的。

### 遗产

你可以继承一个对象原型。

```
var child = Object.create(obj);
child.otherMethod = function() {
    return this._convention + this.publ;
}; 
```

如果您使用的是旧浏览器，则需要保证`Object.create`作品：

```
if (!Object.create) {
    Object.create = function(obj) {
        function tmp() { }
        tmp.prototype = obj;
        return new tmp;
    };
} 
```

要知道一个对象是否是另一个对象的原型，您可以使用

```
obj.isPrototypeOf(child); // true 
```

## 变体 3 - 构造函数模式

**更新：这是模式 ES6 类是**. 如果您使用 ES6 类，您将在后台遵循此模式。

```
class SomeType {
    constructor() {
        // REALLY important to declare every non-function property here
        this.publ = "I'm public";
        this._convention = "I'm public too, but please don't touch me!";
    }
    someMethod() {
        return this.publ + this._convention;
    }
}

class SubType extends SomeType {
    constructor() {
        super(/* parent constructor parameters here */);
        this.otherValue = 'Hi';
    }
    otherMethod() {
        return this._convention + this.publ + this.otherValue;
    }
} 
```

* * *

```
function SomeType() {
    // REALLY important to declare every non-function property here
    this.publ = "I'm public";
    this._convention = "I'm public too, but please don't touch me!";
}

SomeType.prototype.someMethod = function() {
    return this.publ + this._convention;
};

var obj = new SomeType(); 
```

如果您不继承并记住重新分配构造函数属性，则可以重新分配原型而不是添加每个方法：

```
SomeType.prototype = {
    constructor: SomeType,
    someMethod = function() {
        return this.publ + this._convention;
    }
}; 
```

如果页面中有下划线或 jquery，则使用 _.extend 或 $.extend

```
_.extend(SomeType.prototype, {
    someMethod = function() {
        return this.publ + this._convention;
    }
}; 
```

引擎盖下的`new`关键字只是这样做：

```
function doNew(Constructor) {
    var instance = Object.create(Constructor.prototype);
    instance.constructor();
    return instance;
}

var obj = doNew(SomeType); 
```

你拥有的是一个没有方法的函数；它只有一个`prototype`带有函数列表的属性，`new`操作符的意思是创建一个*新*对象并使用这个函数的原型（`Object.create`）和`constructor`属性作为初始值设定项。

### 优点

*   高性能
*   原型链将让您知道一个对象是否从某种类型继承

### 缺点

*   两步继承

### 遗产

```
function SubType() {
    // Step 1, exactly as Variation 1
    // This inherits the non-function properties
    SomeType.call(this);
    this.otherValue = 'Hi';
}

// Step 2, this inherits the methods
SubType.prototype = Object.create(SomeType.prototype);
SubType.prototype.otherMethod = function() {
    return this._convention + this.publ + this.otherValue;
};

var child = new SubType(); 
```

您可能会认为它看起来像是 Variation 2 的超集……您是对的。类似于变体 2，但具有初始化函数（构造函数）；

`child instanceof SubType`并将`child instanceof SomeType`返回`true`

*好奇心：*幕后`instanceof`操作员所做的是

```
function isInstanceOf(obj, Type) {
    return Type.prototype.isPrototypeOf(obj);
} 
```

## 变体 4 - 覆盖`__proto__`

当你`Object.create(obj)`在引擎盖下这样做时

```
function fakeCreate(obj) {
    var child = {};
    child.__proto__ = obj;
    return child;
}

var child = fakeCreate(obj); 
```

该`__proto__`属性直接修改对象的隐藏`[Prototype]`属性。由于这可能会破坏 JavaScript 行为，因此它不是标准的。并且首选标准方式（`Object.create`）。

### 优点

*   快速高效

### 缺点

*   非标
*   危险的; 你不能有一个哈希图，因为`__proto__`键可以改变对象的原型

### 遗产

```
var child = { __proto__: obj };
obj.isPrototypeOf(child); // true 
```

## 评论问题

### 1\. var1: SomeType.call(this) 中发生了什么？“呼叫”有特殊功能吗？

哦，是的，函数是对象，所以它们有方法，我会提到三个： .call( [)](https://developer.mozilla.org/es/docs/JavaScript/Reference/Global_Objects/Function/call)、[.apply()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)和[.bind()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

当你在函数上使用 .call() 时，你可以传递一个额外的参数，*上下文*，`this`函数内部的值，例如：

```
var obj = {
    test: function(arg1, arg2) {
        console.log(this);
        console.log(arg1);
        console.log(arg2);
    }
};

// These two ways to invoke the function are equivalent

obj.test('hi', 'lol');

// If we call fn('hi', 'lol') it will receive "window" as "this" so we have to use call.
var fn = obj.test;
fn.call(obj, 'hi', 'lol'); 
```

因此，当我们这样做时，`SomeType.call(this)`我们将对象传递`this`给函数`SomeCall`，正如您所记得的，该函数将向对象添加方法`this`。

### 2\. var3：您的“真正定义属性”是指我是否在函数中使用它们？是公约吗？因为获得 this.newProperty 而不将它与其他成员函数定义在同一级别不是问题。

我的意思是您的对象将具有的任何不是函数的属性都必须在构造函数上定义，而不是在原型上定义，否则您将面临更令人困惑的 JS 问题之一。你可以[在这里看到它](http://jsfiddle.net/8XvzT/2/)，但它超出了这个问题的重点。

### 3\. Var3：如果我不重新分配构造函数会怎样？

实际上，您可能看不到差异，这就是使其成为危险错误的原因。每个函数的原型对象都有一个`constructor`属性，因此您可以从实例访问构造函数。

```
function A() { }

// When you create a function automatically, JS does this:
// A.prototype = { constructor: A };

A.prototype.someMethod = function() {
    console.log(this.constructor === A); // true
    this.constructor.staticMethod();
    return new this.constructor();  
};

A.staticMethod = function() { }; 
```

这不是最佳实践，因为不是每个人都知道它，但有时它会有所帮助。但是如果你重新分配原型......

```
A.prototype = {
    someMethod = function() {
        console.log(this.constructor === A); // false
        console.log(this.constructor === Object); // true
        this.constructor.staticMethod();
        return new this.constructor();  
    }
}; 
```

`A.prototype`是一个**新**对象，`Object`比原型的一个实例，`Object.prototype`并且`Object.prototype.constructor`是`Object`. 令人困惑，对吧？:P

因此，如果您覆盖原型并且不重置“constructor”属性，它将引用`Object`而不是`A`，并且如果您尝试使用“constructor”属性访问某些静态方法，您可能会发疯。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T08:38:50.373

我通常会返回一个具有函数作为属性的对象：

```
var newCat = function (name) {
return {name: name, purr: function () {alert(name + ' purrs')}};
};

var myCat = newCat('Felix');
myCat.name; // 'Felix'
myCat.purr(); // alert fires 
```

您可以通过调用 newCat 函数来继承并扩展您获得的对象：

```
var newLion = function (name) {
    var lion = newCat(name);
    lion.roar = function () {
        alert(name + ' roar loudly');
    }
    return lion;
} 
```

如果你想要一个全局猫对象：

```
var cats = (function () {

var newCat = function (name) {
    return {
        name: name,
        purr: function () {
            alert(name + ' is purring')
        }
    };
};

return {
    newCat: newCat
};
}()); 
```

现在您可以致电：

```
var mySecondCat = cats.newCat('Alice'); 
```

# c++ - 布尔函数不能正常工作

> ID：16055049
> 
> 赞同：0
> 
> 时间：2013-04-17T08:21:25.710
> 
> 标签：c++, arrays, function, char, boolean

我很难想出作业所期望的布尔函数。我只需要一些解释，因为我想编写自己的代码。我应该编写一个 MIPS 代码，它实际上计算字符串中大写、小写、元音、辅音和数字的数量。我正在用 C++ 编写代码，然后我将翻译成 MIPS 程序集。我粘贴了下面的要求，然后是函数 bool consonant(char c) 的样子（我的教授给出的想法）。问题是我似乎遗漏了一些信息来使该功能正常工作。谁能向我提供有关该功能的更多信息？我不需要代码，只需要缺少的细节。您的帮助将不胜感激。

//下面的赋值要求

要确定 ASCII 字符 c 是元音还是辅音，请编写两个函数 bool vowel(char c) 和 bool consonant(char c)。使用堆栈将字符参数传递给这些函数。在测试一个字符是否为元音和辅音时，避免使用长的条件表达式。相反，使用两个包含布尔标志的全局数组（表）来实现元音（）和辅音（）。例如，名为 is_vowel 的数组对于字符“a”和“A”将具有 true，但对于“b”和“B”将具有 false。

```
// function that returns 0 if c is a consonant, or 1 if c is not a consonant
bool consonant(char c)
{
const bool is_conson[30]={0,0,...1,1,1,0,0...};

return is_conson[c];

}

//Here is The Code (C++) that I wrote for testing purpose only using Dev-C++

#include <iostream>
#include <math.h>
#include <cstdlib>

using namespace std;

bool consonant(char c)
{
const bool is_conso[30]= {1,1,1,1,0,0,0,0,0,1,0,1,1,0,0,0,1,0,1,0,1,1,1,1,0,1,0,1,0,1};

return is_conso[c];

}

int main()
{
int i;
 bool result;
char c;
char sentence[]="aaaabbbbb";

cout<<"the array: ";
cout<<sentence<<endl;
for (i=0; i<9; i++)
{
    c=sentence[i];

    result=consonant(c);
    if (result==0)

        cout<<c<<"  is a Consonant"<<endl;      
}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:30:13.017

如果要调用`bool consonant(char c)`like `consonant('a')`，则需要先转换`c`为索引（因为`'a'`!= `0`）或使用其他方法。

在可移植的 C++ 中，你可以用一个大的来做到这一点`switch`：

```
switch(c) {
case 'b': case'B': case 'c': case 'C': .... return true;
default: return false;
} 
```

在非便携式 C++ 中，您可以偏移`c`：

```
c = lower_case(c); // <-- left as exercise
const auto array_size = std::end(is_conson) - std::begin(is_conson);
if (c>=0 && c<array_size)
    return is_conson[c - 'a']

throw std::logic_error(...); 
```

这是不可移植的，因为 C++ 标准不要求字符`[a..z]`是连续的。我不知道你手头的编译器是否支持这个。

第三种，不可移植的变体需要单独的一些特殊初始化，但允许直接索引：

```
std::array<bool,std::numeric_limits<char>::max()> meh() {
    std::array<bool,std::numeric_limits<char>::max()> ret;
    ret['a'] = true;
    ret['A'] = true;
    ...
    return ret;
}

....

    static const auto is_conson = meh();
    if (c >= begin(is_conson) && c<= end(is_conson))
        return is_conson[c];
    throw std::logic_error(....); 
```

不可移植，因为它假定所有辅音都是正面的。但是，它比以前的变体更便携。您还可以通过引入`std::numeric_limits<char>::min()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:33:14.450

Letters are represented by values 65 through 90 (uppercase) and 97 through 122 (lowercase) in ASCII. You're using the array as if they were starting at index 0\. Do something like this:

```
if (c >= 'A' && c <= 'Z')
    return is_conson[c-'A'];
if (c >= 'a' && c <= 'z')
    return is_conson[c-'a'];
return false; 
```

Also, you should declare the `is_conson` array as `static`, so that it's only constructed once and not each time the function is called.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:29:19.823

就目前而言，您的函数将不起作用，因为 ASCII A 为 65，您需要增加数组以覆盖所有 ASCII 字符或减去“A”（它给出 A 的 ASCII 值）以将数字缩放到您的数组。ASCII a 是 97，所以小写字母必须通过减去 'a' 来缩放

# c++ - 如何在 C++ 中创建动态 DLL 库，以替代旧版 Fortran DLL

> ID：16055051
> 
> 赞同：4
> 
> 时间：2013-04-17T08:21:28.500
> 
> 标签：c++, dynamic, dll, fortran, backwards-compatibility

我必须在 C++ 中创建一个动态 DLL 库，以替换用 Fortran 编写的旧 DLL 库，而无需更改主机应用程序（因此函数和参数必须保持不变）。

我对该库中的所有 Fortran 函数都有完整的规范，但是我需要使用哪些工具（编译器），以及在这种情况下编码 DLL 的方式是什么（stdcall、cdecl、dllexport 等）——这些线索并没有说太多对我来说，我以前从未创建过 DLL）。

这是旧版 DLL 中的示例 Fortran 函数声明：

```
SUBROUTINE SetBoundaries(MaxFlow, MinFlow)
cDEC$ ATTRIBUTES DLLEXPORT :: SetBoundaries
cDEC$ ATTRIBUTES ALIAS: "SetBoundaries" :: SetBoundaries

REAL MaxFlow
REAL MinFlow 
```

我试图编译 VC2008 DLL 但出现错误：

> “InitAllPublicVars”运行时错误 453 中的未处理错误：在 SomeLib.DLL 中找不到 DLL 入口点 DLLVersion

此 DLL 的来源（定义名为 DLLVersion 的函数没有帮助）：

```
void __stdcall SetBoundaries( float *min , float *max ) {
} 
```

DLLVersion 是一些特殊的 DLL 程序还是我的文档中缺少我应该创建这样的函数？

我不知道有关原始 Fortran DLL 源/编译过程的详细信息，但有一些提取的信息：

![一般的](https://i.stack.imgur.com/IIjZf.png) ![一些选项](https://i.stack.imgur.com/985C4.png) ![进口](https://i.stack.imgur.com/PAPsH.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T01:15:23.023

运行时库使 Fortran DLL 看起来像是使用 Compaq 或 Digital Fortran 编译器构建的。默认情况下，这些编译器使用 stdcall 调用约定。对于您的具体示例，两个参数（C 端的参数）等效于`float *`, 子例程等效于 void 函数。您需要使用支持 stdcall 的 C++ 编译器。如何指定函数在 DLL 中导出取决于您的 C++ 编译器或个人偏好，但某种 dllexport 关键字是典型的。

从变更管理的角度来看，在 Fortran 中编写替换 DLL 并使用英特尔 Fortran 编译器之类的东西要简单得多，它是 CVF 编译器的后代，具有适当的传统支持。然后可以以渐进方式对 DLL 源代码进行更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T10:30:29.483

我找到了解决方案。DLL 函数应该这样声明：

```
extern "C" void __declspec(dllexport) SetBoundaries( int min , int max ) {

} 
```

请注意，参数不是指针。我记录了函数调用，并且 DLL 在放置时从主机应用程序获取有效数字，而不是原始 Fortran DLL。使用 Visual Studio 2008 编译。

# javascript - window.parent.opener 给予 Permission Denied

> ID：16055052
> 
> 赞同：-1
> 
> 时间：2013-04-17T08:21:30.703
> 
> 标签：javascript, internet-explorer-8, dynamics-crm-2011, dynamics-crm-4

我在其中一个 crm 表单上使用 window.parent.opener。我的情况如下。我在服务和设置区域中显示了一个实体 e。现在我尝试从服务创建记录。i 打开 e 的创建表单。然后我导航到设置并打开 e 的现有记录。现在我导航回我已经打开的 e 的新表单。我使用了 window.parent.opener，它在这个创建表单上给了我一个权限被拒绝的错误。你能告诉我我应该怎么做才不会因为功能中断而出现这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:58:10.870

知道了。window.opener.parent 正在刷新，因为我正在使用 javascript 在 crm 中加载自定义页面。所以当我回到以前打开的页面时 window.opener.parent 更改并引用了我的自定义页面，因此权限被拒绝错误。需要小心使用javascript。

# mysql - Mysql - 从一个查询中选择多个别名

> ID：16055056
> 
> 赞同：1
> 
> 时间：2013-04-17T08:21:42.217
> 
> 标签：mysql, alias

我有个问题。

我正在使用这个查询：

```
...
(SELECT TXTVALUE
FROM table 
WHERE
    EXTID = 2
)AS A,

(SELECT TXTVALUE 
FROM table 
WHERE
    EXTID = 4
)AS B
... 
```

所以最后我的目标只是调用一个查询并为每个条件创建一个别名。现在我有几个查询（比如这个例子）调用同一个表，我只需要根据条件有一个不同的别名。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:25:01.643

我认为您可能需要使用`UNION`或`UNION ALL`为此：

```
SELECT TXTVALUE, EXTID 
FROM table 
WHERE  EXTID = 2
UNION ALL
SELECT TXTVALUE, ECTID
FROM table 
WHERE  EXTID = 4
UNION ALL
.... 
```

这将让您指定一个列，以便它根据同一列下的条件具有不同的值。

```
SELECT TXTVALUE, EXTID AS 'Types' -- For example
FROM table 
WHERE  EXTID = 2
UNION ALL
SELECT TXTVALUE, ECTID
FROM table 
WHERE  EXTID = 4
UNION ALL
.... 
```

# android - 如何使用 TMX 地图对象属性来更改对象行为

> ID：16055059
> 
> 赞同：0
> 
> 时间：2013-04-17T08:21:46.187
> 
> 标签：android, andengine

我正在使用 TMX 地图中的平铺地图在 andEngine 中开发游戏我有河流对象，我希望玩家在落入河流后会死

但我不知道如何实现这个

我只能使用以下代码创建墙对象：

```
private void createUnwalkableObjects(TMXTiledMap map)
    {
        // Loop through the object groups
         for(final TMXObjectGroup group: this.mTMXTiledMap.getTMXObjectGroups()) 
         {
             if(group.getTMXObjectGroupProperties().containsTMXProperty("wall", "true"))
             {
                 // This is our "wall" layer. Create the boxes from it
                 for(final TMXObject object : group.getTMXObjects()) 
                 {
                    final Rectangle rect = new Rectangle(object.getX(), object.getY(),object.getWidth(), object.getHeight());
                    final FixtureDef boxFixtureDef = PhysicsFactory.createFixtureDef(0, 0, 1f);
                    PhysicsFactory.createBoxBody(mPhysicsWorld, rect, BodyType.StaticBody, boxFixtureDef);
                    rect.setVisible(false);
                    mScene.attachChild(rect);
                 }
             }
         }
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T03:36:00.943

Use the same code. In your TMX editor, create a new layer and add a property "danger" to it. You can then create any objects there (e.g. rectangles over your river tiles). Then add another if:

```
...
else if(group.getTMXObjectGroupProperties().containsTMXProperty("danger", "true"))
{
    // This is layer with dangerous objects (river etc)
    for(final TMXObject object : group.getTMXObjects()) 
    {
        // create sensor physics body and register collision detection
        // on collision, make the user die
    }
} 
```

# tmux - Tmux 的某些设置不起作用

> ID：16055060
> 
> 赞同：4
> 
> 时间：2013-04-17T08:21:47.320
> 
> 标签：tmux

在 Mac Mountain lion 上，通过 Homebrew 安装 tmux。

像下面这样的一些设置不起作用：

```
setw -g pane-base-index 1
set -g mouse-resize-pane on
set -g mouse-select-pane on
set -g mouse-select-window on 
```

然后报错：

```
/Users/millisami/.tmux.conf: 52: unknown option: pane-base-index
/Users/millisami/.tmux.conf: 53: unknown option: mouse-resize-pane
/Users/millisami/.tmux.conf: 55: unknown option: mouse-select-window 
```

怎么了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-10-23T16:37:57.987

正如 rado 所说，tmux 2.1 不支持单独的鼠标设置。它用一个设置替换了它们，`mouse`可以`set -g mouse on`在你的*~/.tmux.conf*中设置。

至于`pane-base-index`设置，Mark Nichols 建议：

```
# set window and pane index to 1 (0 by default)
set-option -g base-index 1
setw -g pane-base-index 1 
```

在 OS X 10.10.5 上为我工作，运行通过 iTerm 2.1.4 中的 brew 安装的 tmux 2.1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T16:26:16.793

```
# set window and pane index to 1 (0 by default)
set-option -g base-index 1
setw -g pane-base-index 1

set -g mode-mouse on
setw -g mouse-select-window on
setw -g mouse-select-pane on 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-04T21:14:55.690

可能是您正在使用 tmux 2.1，它不再支持这些。

# html - div 填充/背景颜色在 Outlook 中不起作用

> ID：16055062
> 
> 赞同：0
> 
> 时间：2013-04-17T08:21:52.380
> 
> 标签：html, css, outlook, html-email

```
<div align="center" style="background:#bfcfe4;"><font face="Arial, Helvetica, sans-serif" style="font-size: 13px;"><br /><div style="width:666px; background-color:#ffffff; margin:10px auto 40px; padding:10px 34px 34px;"><table width="670" cellspacing="0" cellpadding="0" border="0" bgcolor="#ffffff" style="font-family: Arial,Helvetica,sans-serif; font-size: 12px; color:#000000;"><tr><td>some html here...</td></tr></table></div></div> 
```

![在此处输入图像描述](https://i.stack.imgur.com/lKYii.jpg)

上图来自浏览器，下图来自 Outlook。如您所见，底部的填充不起作用。我不确定为什么会发生这种情况，请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T17:41:20.993

您的代码中发生了一些古怪的事情。这可能是以下三个问题之一：

*   边距（您应该避免电子邮件中的边距，因为支持参差不齐）
*   填充缺失的第 4 个值（Outlook 可能将其视为 0，导致左侧没有填充）
*   你的宽度不加起来。div 应该是表格的宽度 + 左填充 + 右填充。

使用嵌套表也比使用 div 更好，因为它们引起的头痛要少得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:45:29.620

现在习惯了这个**只适用于前景**

```
<div style="padding-left:34px;padding-right:34px;padding-top:10px;" bgcolor="#bfcfe4"> 
```

# neo4j - 通过聚合进行密码排序

> ID：16055064
> 
> 赞同：1
> 
> 时间：2013-04-17T08:22:04.913
> 
> 标签：neo4j, cypher, sql-order-by, aggregate-functions

我需要在查询期间聚合数据，然后按此数据排序。

根据密码文档：

> 如果要使用聚合对结果集进行排序，则聚合必须包含在 RETURN 中才能在 ORDER BY 中使用。

我有以下密码查询：

```
START profile=node(31) MATCH (profile)-[r:ROLE]->(story)
WHERE r.role="LEADER" and story.status="PRIVATE" 
WITH story MATCH (story)<-[r?:RATED]-() 
RETURN distinct story ,sum(r.rate) as rate ORDER BY rate DESCENDING 
```

上面的查询工作正常，问题是我必须在我的结果集中包含***sum(r.rate)***。

当查询响应应该是故事列表/页面时，我正在通过存储库（我的存储库扩展 CypherDslRepository ）使用**Cypherdsl ...**

我可以使用聚合函数排序而不将其包含在结果集中吗？
有什么解决方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T11:15:03.647

您可以使用中间的 `WITH`

```
START profile=node(31) MATCH (profile)-[r:ROLE]->(story)
WHERE r.role="LEADER" and story.status="PRIVATE" 
WITH story 
MATCH (story)<-[r?:RATED]-() 
WITH story ,sum(r.rate) as rate 
ORDER BY rate DESCENDING
RETURN story 
```

`DISTINCT`如果您已经有聚合，请不要这样做。

并且可选关系很慢，所以如果遇到性能问题，请使用路径表达式并从那里获取 rel。

```
START profile=node(31) MATCH (profile)-[r:ROLE]->(story)
WHERE r.role="LEADER" and story.status="PRIVATE" 
with story, extract(p in (story)<-[r?:RATED]-() : head(rels(p)) as rated
WITH story , reduce(sum = 0, r in rated : sum + r.rate)  as rate 
ORDER BY rate DESCENDING
RETURN story 
```

# java - 如何修复 Hibernate 的配置文件？

> ID：16055067
> 
> 赞同：2
> 
> 时间：2013-04-17T08:22:18.260
> 
> 标签：java, xml, hibernate

执行我的 java 代码后出现以下错误。似乎只有 XML 文件有问题。所以，我没有发布Java代码。错误后给出了 XML 代码。我照原样从我的书中复制它，但它会导致错误。我该如何纠正这个恼人的 xml 错误？

```
"Some value of time" org.hibernate.cfg.annotations.Version <clinit>
INFO: Hibernate Annotations 3.3.1.GA
[main] INFO org.hibernate.cfg.Environment - Hibernate 3.3.2.GA
[main] INFO org.hibernate.cfg.Environment - hibernate.properties not found
[main] INFO org.hibernate.cfg.Environment - Bytecode provider name : javassist
[main] INFO org.hibernate.cfg.Environment - using JDK 1.4 java.sql.Timestamp handling
[main] INFO org.hibernate.cfg.Configuration - configuring from resource:     
/hibernate.cfg.xml
[main] INFO org.hibernate.cfg.Configuration - Configuration resource:     
 /hibernate.cfg.xml
[main] ERROR org.hibernate.util.XMLHelper - Error parsing XML:     
/hibernate.cfg.xml(3)     
The markup in the document preceding the root element must be well-formed.
Exception in thread "main" org.hibernate.HibernateException: Could not parse     
configuration: /hibernate.cfg.xml
at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1542)
at org.hibernate.cfg.AnnotationConfiguration.doConfigure
    (AnnotationConfiguration.java:990)
at org.hibernate.cfg.AnnotationConfiguration.doConfigure
    (AnnotationConfiguration.java:69)
at org.hibernate.cfg.Configuration.configure(Configuration.java:1476)
at org.hibernate.cfg.AnnotationConfiguration.configure
    (AnnotationConfiguration.java:972)
at org.hibernate.cfg.AnnotationConfiguration.configure
    (AnnotationConfiguration.java:69)
at org.hibernate.cfg.Configuration.configure(Configuration.java:1462)
at org.hibernate.cfg.AnnotationConfiguration.configure
    (AnnotationConfiguration.java:966)
at com.examscam.model.User.persist(User.java:47)
at com.examscam.model.User.main(User.java:57)
    Caused by: org.dom4j.DocumentException: Error on line 3 of document  : The markup  
    in the document preceding the root element must be well-formed. Nested exception:
    The markup in the document preceding the root element must be well-formed.
at org.dom4j.io.SAXReader.read(SAXReader.java:482)
at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1532)
... 9 more 
```

XML文件如下 -

```
<?xml version = '1.0' encoding='UTF-8' ?>

<!Doctype hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
<session-factory>

<property name = "connection.url">
jdbc:mysql://localhost/examscam
</property>

<property name = "connection.username">
root
</property>

<property name = "connection.password">
password
</property>

<property name = "connection.driver_class">
com.mysql.jdbc.Driver
</property>

<property name = "dialect">
org.hibernate.dialect.MySQLDialect
</property>

<property name = "transaction.factory_class">
org.hibernate.transaction.JDBCTransactionFactory
</property>

<property name = "current_session_context_class">
thread
</property>

<property name = "hibernate.show_sql">
true
</property>

</session-factory>
</hibernate-configuration> 
```

**编辑**

```
org.hibernate.cfg.annotations.Version <clinit>
INFO: Hibernate Annotations 3.3.1.GA
[main] INFO org.hibernate.cfg.Environment - Hibernate 3.3.2.GA
[main] INFO org.hibernate.cfg.Environment - hibernate.properties not found
[main] INFO org.hibernate.cfg.Environment - Bytecode provider name : javassist
[main] INFO org.hibernate.cfg.Environment - using JDK 1.4 java.sql.Timestamp handling
[main] INFO org.hibernate.cfg.Configuration - configuring from resource:
 /hibernate.cfg.xml
[main] INFO org.hibernate.cfg.Configuration - Configuration resource: 
/hibernate.cfg.xml
[main] INFO org.hibernate.cfg.Configuration - Reading mappings from resource : 
com/xx  /portal/db/User.hbm.xml
Exception in thread "main" org.hibernate.MappingNotFoundException: resource: com/xx
/portal/db/User.hbm.xml not found
at org.hibernate.cfg.Configuration.addResource(Configuration.java:610)
at org.hibernate.cfg.AnnotationConfiguration.addResource
(AnnotationConfiguration.java:912)
at org.hibernate.cfg.AnnotationConfiguration.parseMappingElement
(AnnotationConfiguration.java:617)
at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1603)
at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1582)
at org.hibernate.cfg.AnnotationConfiguration.doConfigure
(AnnotationConfiguration.java:1002)
at    org.hibernate.cfg.AnnotationConfiguration.doConfigure
(AnnotationConfiguration.java:69)
at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1556)
at org.hibernate.cfg.AnnotationConfiguration.doConfigure
(AnnotationConfiguration.java:990)
at org.hibernate.cfg.AnnotationConfiguration.doConfigure
(AnnotationConfiguration.java:69)
at org.hibernate.cfg.Configuration.configure(Configuration.java:1476)
at org.hibernate.cfg.AnnotationConfiguration.configure
(AnnotationConfiguration.java:972)
at org.hibernate.cfg.AnnotationConfiguration.configure
(AnnotationConfiguration.java:69)
at org.hibernate.cfg.Configuration.configure(Configuration.java:1462)
at org.hibernate.cfg.AnnotationConfiguration.configure
(AnnotationConfiguration.java:966)
at com.examscam.model.User.persist(User.java:45)
at com.examscam.model.User.main(User.java:55) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:28:17.810

这是我的休眠配置文件，只需检查如下：

```
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<!-- Generated by MyEclipse Hibernate Tools.                   -->
<hibernate-configuration>

    <session-factory>
        <property name="dialect">
            org.hibernate.dialect.MySQLDialect
        </property>
        <property name="connection.url">
            jdbc:mysql://127.0.0.1:3306/test
        </property>
        <property name="connection.username">root</property>
        <property name="connection.password">123456</property>
        <property name="connection.driver_class">
            com.mysql.jdbc.Driver
        </property>
        <!-- disable cache  -->
        <property name="hibernate.cache.use_second_level_cache">
            false
        </property>

        <!-- UTF8 to database -->
        <property name="connection.useUnicode">true</property>
        <property name="connection.characterEncoding">UTF-8</property>

        <!-- C3P0 Session Manager  -->
        <property name="hibernate.connection.provider_class">
            org.hibernate.connection.C3P0ConnectionProvider
        </property>
        <property name="hibernate.c3p0.min_size">1</property>
        <property name="hibernate.c3p0.max_size">2</property>
        <property name="hibernate.c3p0.timeout">1800</property>
        <property name="hibernate.c3p0.max_statements">50</property>
        <property name="hibernate.c3p0.idle_test_period">300</property>

        <!-- Entity Mappings -->
        <mapping resource="com/xx/portal/db/User.hbm.xml" />

    </session-factory>

</hibernate-configuration> 
```

# android - 在Android的通知中将Drawable或Bitmap设置为图标

> ID：16055073
> 
> 赞同：19
> 
> 时间：2013-04-17T08:22:40.413
> 
> 标签：android, android-notifications, android-notification-bar

我从服务器下载图像作为位图并将其转换为可绘制现在我想将此可绘制用作通知图标。但我无法做到这一点。这是我的代码：

```
 Notification notification = new NotificationCompat.Builder(context)

    .setContentTitle(title)

    .setContentText(message)

    .setContentIntent(intent)

    .setSmallIcon(bitmap)

    .setWhen(when)

    .build(); 
```

但图标是资源 int 值，所以当我使用它时它会出错。任何帮助

编辑：

现在我更新我的代码，现在我正在这样做：

```
 Notification notification = new NotificationCompat.Builder(context)

        .setContentTitle(title)

        .setContentText(message)

        .setContentIntent(intent)

        .setSmallIcon(icon)

        .setLargeIcon(bitmap)

        .setWhen(when)

        .build(); 
```

但它在左侧给出大图标，在右侧给出小图标。我不想要这个所以为此我删除了 setSmallIcon 行并运行我的代码，但它没有向我显示通知

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-17T08:38:08.030

如果您阅读特定于您的开发人员文档，[`Notification.Builder`](http://developer.android.com/reference/android/app/Notification.Builder.html)您会看到[`setSmallIcon(int icon)`](http://developer.android.com/reference/android/app/Notification.Builder.html#setSmallIcon)需要*在可绘制应用程序包中使用 A 资源 ID*。

下载图像，转换为位图，然后将其设置`setSmallIcon()`为 仍然会给您一个错误。

即使您要将 转换为`Bitmap`这样`Drawable`的，例如：

```
Drawable d = new BitmapDrawable(getResources(), bmpFinal); 
```

它仍然会给您一个错误，因为您的应用程序包`Drawable`中不**存在该错误。**

唯一可能的解决方案是使用`Drawable`您存在的资源`package`并将其设置为`setSmallIcon()`方法。典型用法：

```
builder.setSmallIcon(R.drawable.ic_launcher); 
```

或者，[`setLargeIcon (Bitmap icon)`](http://developer.android.com/reference/android/app/Notification.Builder.html#setLargeIcon)需要一个 Bitmap 实例。无需对您当前的代码进行任何额外的更改（因为您已经有一个`Bitmap`），如果它符合您的要求，您可以按原样使用它。

如果没有，您几乎必须使用其中一个文件夹`Drawable`中已经存在的资源。`drawable`

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-09-27T23:03:14.167

您可以尝试使用此方法

```
 builder.setLargeIcon(BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher)); 
```

[http://javatechig.com/android/android-notification-example-using-notificationcompat](http://javatechig.com/android/android-notification-example-using-notificationcompat)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-07-29T10:40:38.097

这个问题有几点，主要和API 23+有关，如果你只对setSmallIcon感兴趣，请去第二和第三主题。

第一个：

您可以从 Drawable（而不是 Resource id）设置 LargeIcon，如下所示

```
Drawable drawable= ContextCompat.getDrawable(this,R.drawable.your_drawable);

            Bitmap bitmap = ((BitmapDrawable)drawable).getBitmap();

            NotificationCompat.Builder mBuilder =
                    new NotificationCompat.Builder(context)
                            .setLargeIcon(bitmap)
                            .setContentTitle("hahah")
                            .setContentText("Tap to stop")
                            .setOngoing(true); 
```

第二：

如果需要在 API 中设置 23 以下的小图标，则需要设置资源 id，如`R.drawable.your_resource`. `NotificationCompat.Builder`不允许您在`setSmallIcon()`.

第三：

幸运的是，使用 Notification.Builder 已将支持扩展到`Icon`23+`setSmallIcon()`版本，如下所示：

```
 Drawable drawable = ContextCompat.getDrawable(this,R.drawable.your_drawable);

            Bitmap bitmap = ((BitmapDrawable)drawable).getBitmap();

            Notification.Builder mBuilder =
                    new Notification.Builder(context)
                            .setSmallIcon(Icon.createWithBitmap(bitmap))
                            .setLargeIcon(bitmap)
                            .setContentTitle("hahah")
                            .setContentText("Tap to stop")
                            .setOngoing(true); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-07-27T06:23:00.170

更好的选择获取应用程序图标

```
 Drawable drawable=getApplicationInfo().loadIcon(getPackageManager());
 Bitmap bitmap = ((BitmapDrawable)drawable).getBitmap();

.setSmallIcon(getApplicationInfo().icon)
.setLargeIcon(bitmap) 
```

# google-maps - 如何在 Zurb Foundation 中制作响应式谷歌地图

> ID：16055075
> 
> 赞同：6
> 
> 时间：2013-04-17T08:22:52.433
> 
> 标签：google-maps, zurb-foundation

我已经尝试使用 zurb Foundation 3。但是谷歌地图有一些问题。当我使用谷歌地图时，这些列不想响应。

```
<div class="row">
<div class="six columns">short description</div>
<div class="six columns"><iframe>GOOGLE MAPS CODE</iframe></div>
</div> 
```

任何人都可以帮助我，请。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-21T03:10:15.023

试着把它包起来

```
<div class="flex-video"> </div> 
```

[http://foundation.zurb.com/docs/components/flex-video.html](http://foundation.zurb.com/docs/components/flex-video.html)

> 如果您要嵌入来自 YouTube、Vimeo 或其他使用 iframe、embed 或 >object 元素的网站的视频，您可以将视频包装在 div.flex-video ## Heading ##以创建一个>将正确的内在比率在任何设备上缩放您的视频。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T18:40:34.310

我在 Zurb Foundation 中使用了谷歌地图，它对我有用。而且我没有使用 iframe。

```
<div id="map_canvas" class="six columns" style="height: 800px"></div>

<div class="six columns" style="height: 800px"></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T08:48:23.957

您需要将地图包含在一个带有 id 的元素中`map_canvas`。

```
<div class="row">
    <div class="six columns">short description</div>
    <div class="six columns">
        <div id="map_canvas" ><iframe>GOOGLE MAPS CODE</iframe></div>
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-17T19:59:54.507

问题通常是百分比不起作用，当我从

```
<div id="map_canvas" style="height: 40%;"></div> 
```

至

```
<div id="map_canvas" style="height: 400px;"></div> 
```

它工作得很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-07T23:03:53.520

到目前为止，“Flex Video”类是最好的方法，尽管它在 div 的底部添加了一个主要的填充。所以它是一个六分之一的另一个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-10T19:25:37.777

只需添加 style="max-width:100%;" 到您的 iframe 代码。只要 iframe 在 Foundation 的列之一内，它就会缩放以适应。请注意，这已经用 Foundation 3 进行了测试，而不是 4 或 5。但是，它也应该适用于那些。

# solr - AWS EC2 机器上的 Solrcloud 配置

> ID：16055076
> 
> 赞同：4
> 
> 时间：2013-04-17T08:22:52.617
> 
> 标签：solr, amazon-web-services, amazon-ec2, apache-zookeeper, solrcloud

我在 AWS EC2 机器上设置 SolrCloud 时遇到问题。剧情如下，

我为 zookeeper 和 solr 提供了三台服务器。

每台服务器上都运行着 zookeeper。当我使用 zookeeper 主机信息启动 Solr 时，它会按预期启动并工作。

问题是zookeeper在生成集群信息时使用服务器的私有IP，因此我无法使用无法识别私有IP的Solrj查询它。例如 server1。私有 IP ip-a,b,c,d 公共 IP : u,v,w,x Zookeeper 通过私有 IP 识别 solr 实例（显然从外部 EC2 机器看不到）

```
The cluster information looks something like this:
live nodes:[10.165.15.104:8983_solr] collections:{vicon=DocCollection(vicon)={
  "shards":{"shard1":{
      "range":"80000000-7fffffff",
      "state":"active",
      "replicas":{"10.165.15.104:8983_solr_vicon":{
          "shard":"shard1",
          "state":"down",
          "core":"vicon",
          "collection":"vicon",
          "node_name":"10.165.15.104:8983_solr",
          "base_url":"http://10.165.15.104:8983/solr",
          "leader":"true"}}}},
  "router":"compositeId"}, collection1=DocCollection(collection1)={
  "shards":{"shard1":{
      "range":"80000000-7fffffff",
      "state":"active",
      "replicas":{"10.165.15.104:8983_solr_collection1":{
          "shard":"shard1",
          "state":"down",
          "core":"collection1",
          "collection":"collection1",
          "node_name":"10.165.15.104:8983_solr",
          "base_url":"http://10.165.15.104:8983/solr",
          "leader":"true"}}}},
  "router":"compositeId"}, collections=DocCollection(collections)={
  "shards":{"shard1":{
      "range":"80000000-7fffffff",
      "state":"active",
      "replicas":{
        "10.165.15.104:8983_solr_collections":{
          "shard":"shard1",
          "state":"active",
          "core":"collections",
          "collection":"collections",
          "node_name":"10.165.15.104:8983_solr",
          "base_url":"http://10.165.15.104:8983/solr",
          "leader":"true"},
        "10.147.129.56:8983_solr_collections":{
          "shard":"shard1",
          "state":"down",
          "core":"collections",
          "collection":"collections",
          "node_name":"10.147.129.56:8983_solr",
          "base_url":"http://10.147.129.56:8983/solr"}}}},
  "router":"compositeId"}} 
```

活动节点 IP 是私有 IP 而不是公共 IP

有什么方法可以让zookeeper将集群信息存储为主机名而不是ip。如果无法做到这一点，我该如何在 AWS EC2 机器上运行 solr Cloud？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T04:10:46.993

我想出了解决办法。我们可以使用 zookeeper 将使用的主机名启动 solr 服务器

只需在启动 solr 实例时给一个 -Dhost=xycom 就可以了

# c# - C# 加载程序集和实时更新表单

> ID：16055079
> 
> 赞同：1
> 
> 时间：2013-04-17T08:23:04.683
> 
> 标签：c#, dll, .net-assembly, dynamic-loading, createinstance

我已经尝试过搜索和搜索这个，但也许我正在寻找错误的东西。

我正在制作一种控制面板，我可以在其中添加一些动态加载的 DLL。加载 DLL 对我来说没问题，让它运行也没问题 - 我现在正在使用“Activator.CreateInstance”来执行此操作。

该方法正在做我想要它做的事情。

但是......我需要一些帮助来做几件事：

1：当我执行 DLL 时，即使我在线程中运行，表单也会冻结 - 我该如何避免这种情况？

2：我需要能够实时读取 DLL 的当前状态 - DLL 文件是使用超类制作的，因此我可以读取“CurrentStatus”-属性。是否可以读取正在运行的文件的这种状态？在我看来，因为程序正在等待 DLL 完成，这使它冻结。

希望你们中的一些人可以帮助我。

提前致谢 ：）

编辑：添加一些代码

```
 string path = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, curJob.Scheduler_JobAssemblyName + ".dll");
                Assembly assembly = Assembly.LoadFile(path);

                GenericSchedulerJob o = (GenericSchedulerJob)Activator.CreateInstance(Type.GetType(curJob.Scheduler_JobAssemblyName + "." + curJob.Scheduler_JobAssemblyName + ", " + curJob.Scheduler_JobAssemblyName, true));
                Thread thread = new Thread(() => ExecuteDLL(ref o, "RunJob", row));
                thread.Start();
                while (!o.JobFinished)
                {
                    // Do something (update status, etc.)
                }

    private string ExecuteDLL(ref GenericSchedulerJob job, string methodName, DataGridViewRow row)
    {
        string returnVal;
        if (job != null)
        {
            // Get method
            MethodInfo mi = job.GetType().GetMethod(methodName); // Get method info
            if (mi != null)
            {
                // Let's start ...
                returnVal = (string)mi.Invoke(job, null); // Execute method with parameters
            // job is the SuperClass, where I can read the status from
            }
            else
            {
                returnVal = "Method <" + methodName + "> not found in class."; // Error .. 
            }
        }
        else
        {
            returnVal = "Class not found in external plugin."; // Error .. 
        }

        return "";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:54:47.423

好吧，表格正在暂停，因为这段代码

```
 while (!o.JobFinished)
            {
                // Do something (update status, etc.)
            } 
```

正在强制它等待，即使实际的 dll 代码正在另一个线程上运行。

您需要让该方法完成。（或者我想`Application.DoEvents()`如果它不会在你的嘴里留下不好的味道，你可以使用它。

要获取状态信息，您应该使用在创建 dll 后可以连接的事件。这样，您的应用程序可以在 dll 更改其状态时收到通知。

或者，您可以使用第二个计时器并轮询每个正在运行的作业的状态，但事件会更好。

# java - 比较两个相似的 xml 文件时 JUnit 测试失败

> ID：16055082
> 
> 赞同：3
> 
> 时间：2013-04-17T08:23:11.587
> 
> 标签：java, encoding, junit, dbunit

我试图用 dbunit 实现测试，但我失败了。

总结一下

*   我有一个用于我的假数据库的导入 xml 文件*inputFlatXmlDataSet.xml*和
*   我生成一个导出文件*outputFlatXmlDataSet.xml*
*   最后的测试是确保两个文件相等

但他们不是。肉眼没有区别，即使与 eclipse 或 notepad++ 的差异也不显示任何内容。

我遵循了本教程：[http ://www.scub-foundation.org/accueil/tutorialaux/tutorial-dbunit/](http://www.scub-foundation.org/accueil/tutoriaux/tutorial-dbunit/)

我警告你这是一个法语教程，我怀疑第二个文件的编码不是 UTF-8，但我没有设法强制使用 UTF-8 编写。

*除了TestDBUnit.java*之外，所有文件和代码都与教程中的相同。
这是代码：

```
 public void testExportData() throws Exception {
    // On récupère le jeu de données du fichier XML
    IDataSet dataSet = getDatabaseDataSet();

    // Fichier XML du jeu de données d'import
    File inputFile = new File(INPUT_DATA_SET_FILENAME);
    // On vérifie que le fichier existe
    assertNotNull(inputFile);
    // Fichier XML du jeu de données d'export
    File outputFile = new File(OUTPUT_DATA_SET_FILENAME);
    FileOutputStream(outputFile), "UTF-8")));
    FlatXmlDataSet.write(dataSet, new OutputStreamWriter(new FileOutputStream(outputFile), "UTF-8"));
    // On compare les deux fichiers XML pour vérifier qu'ils sont identiques
    String inputDataSetString = FileUtils.readFileToString(inputFile/*,
            "UTF-8"*/).replace("  ", "\t").trim();
    String outputDataSetString = FileUtils.readFileToString(outputFile/*,
            "UTF-8"*/).replace("  ", "\t").trim();
    assertEquals(inputDataSetString, outputDataSetString);//The failure 
```

我只是添加一个`OutputStreamWriter`as Wrapper 来强制编码，但它没有改变任何东西。

如果您想了解更多详情，请不要犹豫。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T09:04:27.337

使用字符串相等来比较 XML 文件是不明智的，除非您正在测试 XML 生成库并关心漂亮的打印。

在所有其他情况下，您可能关心两个文件的*语义*相等性（即*它们是否包含相同的数据？*）。为了帮助进行此类比较，请考虑使用[XMLUnit](http://xmlunit.sourceforge.net)。这将比较文件的内容，而无需担心空格或编码。

# timer - 流星 setInterval - 每秒更新一个字符串

> ID：16055088
> 
> 赞同：1
> 
> 时间：2013-04-17T08:23:36.387
> 
> 标签：timer, push, meteor

我正在尝试创建一个计时器，我的 javascript 文件是：

```
function timer(){
  var date = new Date();
  Template.pomodoro.timer = function() { return date};
  Template.pomodoro.message = function() { return "test message"};

} 

if (Meteor.isClient) {
      Meteor.setInterval( timer(), 1000 );
}

if (Meteor.isServer) {
  Meteor.startup(function () {
    // code to run on server at startup

  });
} 
```

我想将相同的计时器（计算服务器端）推送到所有浏览器，以使它们同步。

模板只更新第一次，为什么不是每秒更新一次？

谢谢弗朗西斯科

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T09:16:22.467

这是对我有用的关于客户端的方法。我发现将服务器时间推送到客户端是最容易实现的，方法是将当前时间放入集合中并在客户端上简单地使用该值。

```
if (Meteor.isClient) {
    Template.pomodoro.timer= function () {
        return Session.get("dateval");
    };
    Template.pomodoro.message= function () {
        return "My Message";
    };

    Meteor.setInterval( function () {
        Session.set("dateval",Date());
        console.log(Session.get("dateval")); 
    }, 1000 );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:40:10.790

**尝试：**

```
if (Meteor.isClient) {
      Meteor.setInterval( function(){timer()}, 1000 );
} 
```

**或者：**

```
if (Meteor.isClient) {
      Meteor.setInterval( timer, 1000 );
} 
```

这是因为 setInterval 的第一个参数必须是函数指针，而您正在使用`()`这意味着您正在执行函数而不是传递它。

# c - libev ev_io_stop() 不关闭套接字

> ID：16055092
> 
> 赞同：0
> 
> 时间：2013-04-17T08:23:40.760
> 
> 标签：c, sockets, libev

我有一个使用 libev 的服务器每当客户端套接字中断时，使用这样的代码停止套接字连接

```
ev_io_stop(loop, watcher); 
```

我是否需要专门调用 shutdown() 或 close()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:56:17.187

调用 close() 解决了这个问题。

我想如果记录在案会有所帮助

# java - java.util.Date 有两个不同的输出？

> ID：16055095
> 
> 赞同：-1
> 
> 时间：2013-04-17T08:23:49.477
> 
> 标签：java, date, tostring

我有这个方法：

```
void updatePet(String userid, int index, int happiness, Date lastUpdated, PetLifePhase state, Date created) 
```

所有对它的调用都会被记录（通过反射`Proxy`）。参数是`String.valueOf()`'d 并连接起来的：

```
updatePet(xxxxxxxx,18,-96,Wed Apr 17 08:10:11 UTC 2013,ACTIVE,2013-04-10 08:01:12.442) 
```

注意两个`Date`参数的输出：

*   `lastUpdated`: `Wed Apr 17 08:10:11 UTC 2013`( 遵循 的 Javadoc `Date.toString()`)
*   `created`：`2013-04-10 08:01:12.442`

怎么，为什么，什么时候，嗯？为什么同一个方法输出两种不同的格式？我查看了 this 的源代码`toString()`，但是输出第一种格式的代码非常硬，没有`if`其他可能决定的 s 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:29:22.487

我的猜测是`created`属于 Timestamp 的子类，其格式为`yyyy-mm-dd hh:mm:ss.fffffffff`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:29:31.960

您确定您的两个`Date`s 实际上是同一类型的 s`Date`吗？

它们可能是以不同方式`Date`覆盖`toString()`方法的子类型（例如`Timestamp`哪些覆盖`toString()`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:30:14.187

几乎可以肯定的是，您有一个参数是 的实例，`java.util.Date`而另一个参数是`java.sql.Date`or的实例`java.sql.Timestamp`

# css - IE 9 Quirks 文档模式的浮动菜单不起作用

> ID：16055097
> 
> 赞同：0
> 
> 时间：2013-04-17T08:23:52.063
> 
> 标签：css, menu

我有以下CSS：

```
<style type="text/css">
#menu {
  position: fixed;
  right: 0;
  top: 50%;
  width: 8em;
  margin: -2.5em 0 0 0;
  z-index: 5;
  background: hsla(80, 90%, 40%, 0.7);
  color: white;
  font-weight: bold;
  font-size: large;
  text-align: left;
  border: solid hsla(80, 90%, 40%, 0.5);
  border-right: none;
  padding: 0.5em 0.5em 0.5em 2.5em;
  box-shadow: 0 1px 3px black;
  border-radius: 3em 0.5em 0.5em 3em;
}
#menu li { margin: 0 }
#menu a { color: inherit }

/* Make menu absolute, not fixed, on IE 5 & 6 */
#menu { position: absolute }
*>#menu { position: fixed }

p.stb { text-indent: 0; margin-top: 0.83em }
p.mtb { text-indent: 0; margin-top: 2.17em }
p.ltb { text-indent: 0; margin-top: 3.08em }
</style> 
```

我在我的 HTML 代码中使用了以下内容：

```
<ul id=menu>
  <li><a href="#L384">Section 1</a>

  <li><a href="#details">Section 2</a>

  <li><a href="#FAQ">Section 3</a>
</ul> 
```

它不能在 IE 9 Quirks 文档模式下工作。但是，当我更改为 IE 9 标准文档模式时，它可以完美运行。

如何使我的上述代码在 IE 9 Quirks 文档模式下工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:57:19.177

Quirks 模式是一种*非常*古老的模式。它基本上是模拟 IE5 的向后兼容模式。

IE5 很久以前就发布了，从那时起 CSS 发生了很大的变化。IE9 有一个很好的渲染引擎，可以处理现代 CSS 代码。但当然，Quirks 模式试图模仿 IE5，因此它故意删除了对所有新 CSS 功能的支持。

您引用的大约一半的 CSS 代码在 Quirks 模式下不受支持。你永远不会让现代 CSS 代码在 quirks 模式下工作。

所以问题是你为什么要使用怪癖模式？

对此有两个可能的答案：出于某种向后兼容性的原因，您需要使用 quirks 模式，或者您无意中进入了 quirks 模式。

如果你真的*需要*使用 quirks 模式，那么对不起，你不能使用现代 CSS。

但是如果你不小心进入了怪癖模式，那么答案就是在你的 html 代码的顶部放置一个有效的 doctype。这将告诉浏览器不要使用怪癖模式。最好使用的文档类型是这个：

```
<!DOCTYPE html> 
```

只需确保这是 HTML 页面中的第一行代码，IE 就会进入标准模式而不是怪癖模式。

希望有帮助。

（ps - 你可能想阅读我最近写的关于这个主题的[这篇博文）](http://spudley.com/blog/keeping-ie-in-standards-mode)

# php - perl cgi 不会访问 /tmp 中的 php 会话数据

> ID：16055101
> 
> 赞同：0
> 
> 时间：2013-04-17T08:24:01.010
> 
> 标签：php, perl, session, cgi

我正在尝试从 perl 脚本访问现有的 php 会话。我可以看到 php 到 perl 的示例，但不能看到 perl 到 php。我最大的问题是正确访问 /tmp 目录。我拥有所有适当的权限，只是找不到如何捕获会话。我看到了所有 /tmp/sess~ 文件，但我找不到任何接近工作示例的东西来告诉我如何使用它。

```
#!/usr/bin/perl
# Script to launch the vncserver service and capture output
# Runs, displays $pid to STDOUT, but opened
# files are empty.

use strict;
use warnings;
use CGI qw();
use CGI::Session qw();

my %vars = (
    COOKIE_NAME => '_SESSION',
    SESSION_DIR => '/tmp',
);
my $q = CGI->new;
print $q->header;
CGI::Session->name($vars{COOKIE_NAME});
my $session = CGI::Session->new('id:md5', $q, {Directory=>$vars{'/tmp/'}});

print $session->header(-type => 'text/plain');

my $system_name  = $session->param("_SESSION_ATIME");
print $system_name->output(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:28:26.127

有很多方法可以存储会话数据。PHP 使用一种方式。`CGI::Session`使用另一个。你不能`CGI::Session`用来阅读 PHP 会话。改为使用[`PHP::Session`](https://metacpan.org/module/PHP%3a%3aSession)。

# c# - 为什么我的网格中没有显示数据？

> ID：16055104
> 
> 赞同：1
> 
> 时间：2013-04-17T08:24:22.420
> 
> 标签：c#, gridview, data-binding, desktop-application

我正在使用一个网格来限制其列在设计时定义的代码。

我在 form_load() 中绑定网格的代码是：

```
private void SearchForm_Load(object sender, EventArgs e)
{
     dataGridView1.AutoGenerateColumns = false;
     try
     {
         cn = db.createConnection();
         if (cn.State == System.Data.ConnectionState.Open)
            cn.Close();
            cn.Open();
            cmd = new OleDbCommand("Select BillNo,PartyName,City,State,FORMAT(BillDt,'dd-mm-yyyy')as BillDt from BillMaster", cn);
            da = new OleDbDataAdapter(cmd);
            ds = new DataSet();
            da.Fill(ds);
            cn.Close();
     }
     catch (Exception ex)
     {
            MessageBox.Show(ex.Message.ToString());

     }
     dataGridView1.AutoGenerateColumns = false;
     dataGridView1.DataSource = ds.Tables[0];
     for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
     {
         dataGridView1.Rows[i].Cells[0].Value = ds.Tables[0].Rows[i]["BillNo"].ToString();
         dataGridView1.Rows[i].Cells[1].Value = ds.Tables[0].Rows[i]["PartyName"].ToString();
         dataGridView1.Rows[i].Cells[2].Value = ds.Tables[0].Rows[i]["City"].ToString();
         dataGridView1.Rows[i].Cells[3].Value = ds.Tables[0].Rows[i]["State"].ToString();
         dataGridView1.Rows[i].Cells[4].Value = ds.Tables[0].Rows[i]["BillDt"].ToString();
     }

     ds.Dispose();
     cmd.Dispose();
     da.Dispose();
     cn.Close();
} 
```

我调试了程序，数据被分配给调试时从即时窗口观察到的每个字段，但是当显示表单时，数据没有出现。并创建从数据集中获取的空白行数。

我该如何解决这个问题？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:44:01.433

试试这个：dataGridView1.DataSource = ds; // 数据集dataGridView1.DataMember = "TableName";//TableName

希望它会奏效。

# c# - 从 C# 调用 C++ DLL

> ID：16055106
> 
> 赞同：3
> 
> 时间：2013-04-17T08:24:28.237
> 
> 标签：c#, c++, dll

我正在制作一个程序来控制激光，但要做到这一点，我需要将一个 dll 导入 c# 并用它调用函数。原始程序是用 C++ 编写的，我只是不知道该怎么做。所以我的问题是：

1.  如何在c#中导入dll
2.  如何在 C# 中从 C++ 调用函数

为了让您更清楚一点，我添加了 C++ 程序中的代码。

```
#include "MarkEzdDll.h"

class CDemoEzdDlg : public CDialog
{
// Construction
public:
    CDemoEzdDlg(CWnd* pParent = NULL);  // standard constructor

    HINSTANCE m_hEzdDLL;//DLLµ÷ÓÃ¾ä±ú

    LMC1_INITIAL       lmc1_Initial;
    LMC1_CLOSE         lmc1_Close;
    LMC1_LOADEZDFILE   lmc1_LoadEzdFile;
    LMC1_MARK          lmc1_Mark;
    LMC1_MARKENTITY    lmc1_MarkEntity;
    LMC1_GETPREVBITMAP lmc1_GetPrevBitmap;

    LMC1_READPORT  lmc1_ReadPort;
    LMC1_WRITEPORT lmc1_WritePort;

    LMC1_SETDEVCFG     lmc1_SetDevCfg; 
    LMC1_SETHATCHPARAM lmc1_SetHatchParam;
    LMC1_SETFONTPARAM  lmc1_SetFontParam;
    LMC1_GETPENPARAM   lmc1_GetPenParam;
    LMC1_SETPENPARAM   lmc1_SetPenParam;
    LMC1_CLEARENTLIB   lmc1_ClearEntLib;
    LMC1_ADDTEXTTOLIB  lmc1_AddTextToLib;
    LMC1_ADDFILETOLIB  lmc1_AddFileToLib;
    LMC1_ADDBARCODETOLIB   lmc1_AddBarCodeToLib;
    LMC1_CHANGETEXTBYNAME  lmc1_ChangeTextByName;
    LMC1_AXISMOVETO        lmc1_AxisMoveTo; 
    LMC1_AXISCORRECTORIGIN lmc1_AxisCorrectOrigin;  
    LMC1_GETAXISCOOR       lmc1_GetAxisCoor;
    LMC1_SAVEENTLIBTOFILE  lmc1_SaveEntLibToFile; 
```

在对话框中，有一个附有此代码的按钮：

```
void CDemoEzdDlg::OnButtonRun() 
{
    // TODO: Add your control notification handler code here
    UpdateData();

    if(lmc1_Mark==NULL)
    {
        return;
    }

    lmc1_Mark(FALSE);
    UpdatePrevBmp();
    AfxMessageBox(_T("Mark file finish!")); 
} 
```

这是激光应该启动的时候。

如何在 c# 中得到这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T08:45:34.157

（你的帖子不是很清楚，但我猜你想从你的代码中调用`C++`函数。）`C#`

`PInvoke`非常适合这个。这是一个很好的教程：[点击](http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx)。

您没有在项目设置中导入 DLL；相反，您从源代码中调用它。当然，您必须确保 DLL 与项目的输出 ( `.exe`) 文件位于同一文件夹中。

简而言之，如果您在以下位置定义这样的 C 方法`foo.dll`：

```
extern "C" __declspec(dllexport) bool __stdcall GetTrue()
{
    return true;
} 
```

然后你的 C# 程序可以像这样声明它：

```
[DllImport("foo.dll")]
static public extern bool GetTrue(); 
```

并简单地使用`GetTrue()`来调用它。（您还需要`using System.Runtime.InteropServices;`在同一个文件中添加）

当然，当您使用 C# 和 C++ 之间不同的数据类型（如字符串、对象等）时，它会变得更加复杂，但本教程很好地涵盖了这一点。

# c# - 在 C# 函数中获取 HTML 表 ID？

> ID：16055109
> 
> 赞同：0
> 
> 时间：2013-04-17T08:24:43.713
> 
> 标签：c#, html

在 HTML 页面中，我有 ID = "week1" 的表格，在 C# 函数中，我将其用作

```
week1.Rows.Add(TableCell); 
```

我想在表 ID 中转换字符串。假设我有字符串

```
for(int i=0; i<5; i++)
{
  String abc = "week" + i;
   /*
     How to do cast this string in table ID
     like above to add rows and cell in table but above is hardcoded and I want
     to make this dynamic.
   */
} 
```

如何在 HTML 表 ID 中转换上面的字符串?????

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:36:48.807

如果您的表格位于面板中，您可以像这样查找它们。请注意，ofc 您将需要 runat=server 。我假设您在表单中使用 HtmlTable ()

```
for (int i = 0; i < 5; i++)
        {
            var table = (HtmlTable)pnlTables.FindControl("week" + i);

            if (table != null)
            {
                //do stuff with your table
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:31:51.303

确保 .aspx 中的表有`runat="server"`( `<table id="week1" runat="server">`)，然后，在后面的代码中，你可以简单地做

```
week1.ID 
```

或`week1.ClientID`（对于您的 DOM 中的完整 ID）-您想要的任何一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:17:16.127

你的表应该有 runat="server" 属性。只有这样你才能从后面的代码中访问它。

# asp.net-mvc-3 - 我想在 mvc3 中使用不同的按钮以及 mvc3 中的 javascript 处理单个视图上的 crud 操作

> ID：16055112
> 
> 赞同：0
> 
> 时间：2013-04-17T08:24:47.770
> 
> 标签：asp.net-mvc-3

我想在 mvc3 中使用不同的按钮以及 mvc3 中的 javascript 处理单个视图上的 crud 操作。

实际上我有一个帐户代码和描述字段的视图。我想通过使用 wcf 服务在 sql server 2008 r2 数据库中添加、编辑和删除记录。我想使用 javascript 进行客户端脚本。我想通过 javascript 按钮单击事件调用控制器的方法。

请告诉我我是怎么做的。

目前我有以下 javascript 功能。

```
$(document).ready(function () {
var today = new Date();
var dd = today.getDate();

$('#sve').click(function () {
    var person = { AcCode: $('#AcCode').val(), Descrip: $('#Descrip').val(), AddOn: dd };
    $.ajax({
        url: '/Home/Save',
        type: "POST",
        data: JSON.stringify(person),
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function (result) {
            //   $('#message').html('Record saved successfully' + result).fadeIn();
            alert("Record saved successfully");
        },
        error: function () {
            //    $('#message').html('Error Occurred').fadeIn(); 
            alert("Record not saved successfully");
        }
    });
    return false;
});
}); 
```

下面是我保存按钮的控制器代码

```
 [Authorize]
     // [Authorize(Roles = "Administrators")] 
     [HttpPost]
     [MultiButton(MatchFormKey = "action", MatchFormValue = "Save")]
            public ActionResult Save(AccntBD model)
     {
         CBSWCF.Account useInfo = new CBSWCF.Account();
         if (ModelState.IsValid)
         {
             if (!model.IsAcCodeExist(model.AcCode))
             {
                 string ObjUser = User.Identity.Name;
                 string ObjUid = string.Empty;
                   AcntEnt.AcCode = model.AcCode;
                 AcntEnt.Descrip = model.Descrip;
                  objSvc.ACodeSave2(AcntEnt);
                              }
             else
             {
                 ModelState.AddModelError("CustomError", "Account Code Already Exist");
             }
         }
         else
         {
             ModelState.AddModelError("", "");
         }
         return View(model);
     } 
```

我使用以下代码在单个视图中使用多个按钮。[AttributeUsage(AttributeTargets.Method, AllowMultiple = false, Inherited = true)] 公共类 MultiButtonAttribute : ActionNameSelectorAttribute { public string MatchFormKey { get; 放; } 公共字符串 MatchFormValue { 获取；放; }

```
 public override bool IsValidName(ControllerContext controllerContext, string actionName, MethodInfo methodInfo)
    {
        return controllerContext.HttpContext.Request[MatchFormKey] != null &&
            controllerContext.HttpContext.Request[MatchFormKey] == MatchFormValue;
    }
} 
```

现在的问题是我的保存功能没有从 javascript 中命中，并且没有成功保存的消息显示给我。谁能帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:42:12.827

如果您通过 JavaScript 提交表单，则无需将 MultiButton 属性添加到控制器操作，当您希望将提交按钮映射到特定控制器操作时创建 MultiButtonAttribute，这是可能的，因为当您通过提交提交表单时button 提交按钮名称属性被添加到帖子正文中，并带有其提交按钮特定值，例如

```
<input type="submit" name="ButtonName" value="ButtonOne"/> <!-- would post ButtonName=ButtonOne -->
<input type="submit" name="ButtonName" value="ButtonTwo"/> <!-- would post ButtonNAme=ButtonTwo --> 
```

如果您希望通过 javascript 提交表单，该表单将根据提交按钮路由到不同的操作，您需要将按钮名称和值添加到请求的查询字符串中

```
url: '/Home/Save?ButtonName=ButtonOne' 
```

# javascript - 如何将对象指向 Box2DJS + Cocos2DJS 中的某个点

> ID：16055113
> 
> 赞同：0
> 
> 时间：2013-04-17T08:24:49.823
> 
> 标签：javascript, cocos2d-iphone, box2d, mousemove

我正在尝试模拟射箭射击游戏，并且我想为弓设置动画以指向鼠标所在的位置。我怎样才能做到这一点？我已经尝试绑定一个关节并将其用于鼠标跟随：

```
this.bow.SetTransform(new b2Vec2(x/30, y/30), this.bow.GetAngle()); 
```

但它总是会出现错误：

未捕获的类型错误：对象 [object Object] 没有方法“GetAngle”

我已经搜索了该错误，但在 Google 中没有找到。有没有办法解决这个问题或其他方式来实现弓鼠标跟随？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:15:08.700

该`SetTransform`方法的源代码如下所示：

```
 b2Body.prototype.SetTransform = function (xf) {
      this.SetPositionAndAngle(xf.position, xf.GetAngle());
 } 
```

尝试打电话`SetPositionAndAngle`而不是`SetTransform`

# java - 如何检查一个类是否扩展了另一个类

> ID：16055118
> 
> 赞同：8
> 
> 时间：2013-04-17T08:25:06.303
> 
> 标签：java, class, object, inheritance, methods

我见过这个问题的变体，但没有一个能真正解决我的问题。

可以说我正在建立一支有班级的军队。在我的继承结构的顶部，我有一个抽象的“**单元**”类。然后是扩展单元的抽象“ **Flying** ”、“ **Ground** ”和“ **Building** ”类。然后是扩展 Flying 的具体“**直升机**”和“**喷气机**”类。以及扩展地面的具体“**士兵**”和“**坦克**”类。最后是扩展建筑的“**总部**”和“**供应”。**

下面是“**士兵**”类下的一个方法：

```
public void attack(Unit enemy){
if(enemy.getSuperclass().equals(Flying)){
    System.out.print("Soldiers cant attack flying units");
}
else{
    //Code to attack enemy here
} 
```

我希望*敌人*是任何形式的单位。这是因为士兵应该能够攻击建筑物和其他地面单位，但是我不希望士兵能够攻击飞行物体。

明显的问题是，因为我将*敌人*声明为**Unit**，它不知道它属于哪个子类，因此试图为不存在的 Unit 找到 SuperClass。

我敢肯定，我可以为每个手动设置单元类型的单元设置一个吸气剂……但这需要更多的工作，而且似乎效率不高。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-17T08:28:50.930

改变

```
if(enemy.getSuperclass().equals(Flying)){ 
```

至

```
if(enemy instanceof Flying){ 
```

这将检查是否`enemy`是派生自 的任何类的实例`Flying`，而不是*专门*检查`Flying`该类（我们知道`enemy`不会`Flying`是抽象的）。

`instanceof`很方便，但是每当我使用它（有时我会这样做）时，我都会退后一步，看看我的结构，希望我能找到一些方法来重构以避免它（也许可以被士兵攻击的东西有一些共同的特征并且可以实现一个抽象`Unit`子类——`GroundBased`或其他东西——你可以将其用于参数而不是`Unit`)。在这种情况下您可能无法做到，但值得仔细检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:33:43.957

You can use instanceof for this. This also works i.e. for interfaces.

Take also care that the variable may not be null when using instanceof.

class B extends A

```
 public class test
   {
    public static void main(String[] args)
    {
        A a = new B();
        B b = new B();
        if(a instanceof A)
            System.out.println("B derived from A");
        if(b instanceof A)
            System.out.println("B derived from A");
    }
   } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T08:29:35.927

尝试使用[instanceof](http://docs.oracle.com/cd/E15919_01/wlp.1032/e14255/com/bea/p13n/expression/operator/Instanceof.html)运算符。

```
 if(enemy instanceof Flying){
        System.out.print("Soldiers cant attack flying units");
    }
    else{
        attack(enemy);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T08:31:01.680

尝试`if(enemy instanceof Flying) {}`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T08:29:10.953

```
if (enemy instanceof Flying)
   ... 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-17T08:29:16.557

你试过了吗：

```
if (enemy instanceof Flying) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-17T08:30:16.427

我认为您正在寻找`instanceof` [operator](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)。

> 运算符将`instanceof`对象与指定类型进行比较。您可以使用它来测试对象是类的实例、子类的实例还是实现特定接口的类的实例。

所以你可以更新你的功能，如下所示：

```
if(enemy instanceof Flying){
   System.out.print("Soldiers cant attack flying units");
}
else{
    attack(enemy);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-17T08:49:31.737

这是一种设计气味。基本要求是[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)的一项工作，但在访问访问者之前，您还应该寻找比这更好的多态性。

# php - 如何通过javascript发布图像数据

> ID：16055119
> 
> 赞同：0
> 
> 时间：2013-04-17T08:25:18.693
> 
> 标签：php, javascript, ajax, post

我有一个将 POST 数据发送到我的 PHP 脚本的 html 表单

它还使用 AJAX 在他们完成表单时提供预览

但是表单使用 onsubmit=""

我遇到的问题是 html 输入之一是图像。

表格如下给你一个想法：

```
<form method="post" action="scripts/test.php" enctype="multipart/form-data">
<input type="hidden" name="size" id="size" value="small" />
<input type="hidden" name="type" id="type" value="1" />
<input type="hidden" name="pos" id="pos" value="front" />
<input type="hidden" name="number" id="number" value="none" />
<input type="hidden" name="name" id="name" value="none" />
<label>Choose Your First Shirt Colour</label><br /> <input class="color" value="ff3300" id="colour1" name="colour1" onchange="change()">
<br /><br />
<label>Choose Your Second Shirt Colour</label><br />
<input class="color" value="FFFFFF" id="colour2" name="colour2" onchange="change()">
<br /><br /><label>Add Your Logo: <br />
<span style="font-size:11px;color:#FF0000;">(if you are having trouble adding your logo please contact us on 0845 6018370)</span></label>
<br />
<input type="file" name="logo" id="logo" onchange="change()"/><br /><br />
<label>Add Your Text:</label><br />
<textarea name="text" cols="30" id="text" rows="5" onchange="change()"></textarea><br />
<label><span style="color:#000000;">Quantity: </span></label>
<input type="text" id="quantity" name="quantity" value="1" style="width:40px;height:20px;"/><br /><br />
<input type="button" name="preview" value="Preview" onclick="MyPreview()"/><br />
<input type="submit" name="submit" value="Submit" />
</form> 
```

我在用

> var logo =document.getElementById("logo").value;

对于图像，但是当我将徽标值发送到 PHP 时，它会破坏图像，因为它不是发送到 PHP 脚本所需的正确帖子值，就好像您正在提交表单一样。

有谁知道如何简单地通过使用 onchange 和 javascript 为 logo html 字段获取相同的 post 值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:33:05.290

如果您不能使用 html5 功能，我认为您也必须将文件上传到您的服务器进行预览

(f) 打开您的`$_FILES['userfile']['tmp_name']`并将其发送回原始内容，请参阅：[如何使用 $.ajax 将图像 src 设置为动态图像/png 数据？](https://stackoverflow.com/questions/7045491/how-can-i-use-ajax-to-set-image-src-to-dynamic-image-png-data). 您可以在发回数据之前调整图像大小，然后删除图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:45:15.793

如果我理解正确，您只想在文件输入的值更改时显示图像的预览，对吗？

如果是这样，我想你想做的只是从用户的本地驱动器加载图像的预览，而不是真正上传到你的服务器。当用户已经提交表单时，可以完成实际的文件上传。

要执行上述过程（加载图像文件的预览），HTML5 的`FileReader API`.

使用`FileReader API`其实很简单，可以这样做：

**Javascript**

```
var logo = document.getElementById("logo").files[0]; // will return a File object containing information about the selected file
// File validations here (you may want to make sure that the file is an image)

var reader = new FileReader();
reader.onload = function(data) {
  // what you want to do once the File has been loaded
  // you can use data.target.result here as an src for an img tag in order to display the uplaoded image
  someImageElement.src = data.target.result; // assume you have an image element somewhere, or you may add it dynamically
}
reader.readAsDataURL(logo); 
```

您可以将此代码放在您的`onchange`事件处理程序中，我猜您在这里不需要 AJAX。

然后当表单被提交时，图像数据可以在它通常的位置，在`$_FILES`数组中获取。

# javascript - 更新依赖于计算的 observable 中的 observable

> ID：16055127
> 
> 赞同：0
> 
> 时间：2013-04-17T08:25:34.097
> 
> 标签：javascript, knockout.js

我需要在 ajax 请求（异步 ajax 请求）之后更新计算的 observable 中的 observable 值（过滤器），但是当我在计算中更新 observable 时，计算的 observable（filterChanged）依赖于这个 observable（过滤器），在计算中发生了无限循环？

如何在计算的可观察对象中更新依赖的可观察对象？

```
function vm(){
    var self = this;
    self.filter = ko.observable();
    self.isOpenFilter = ko.observable(false);

    self.result = ko.obseravableArray([]);

    self.filterChanged = ko.computed(function(){
            var data = {filter:self.filter(),isOpen:self.isOpenFilter()}

        $.ajax("/service",data,function(response){
            self.result(ko.mappings.fromJS(response.results);
            self.filter(response.filter);   // infinite loop
                    self.isOpenFilter(response.isOpen);
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:34:17.370

I'm not sure why you're using `ko.computed`. Something like this makes more sense:

```
function vm() {
    var self = this;
    self.filter = ko.observable("default filter");
    self.result = ko.observableArray([]);

    self.updateFilter = function() {
        var filter = self.filter();

        $.ajax("/service",
               {filter:filter},
               function(response){
                   self.result(ko.mappings.fromJS(response.results));
                   self.filter(response.filter);
               });
    };
} 
```

If you call `updateFilter` to get an update from the server, it will change the `filter` computed property and if your View is bound to that property it should update automatically.

For an example, see [this jsfiddle](http://jsfiddle.net/uDFHn/2/).

# excel - VBA - 如何在按列号设置范围时设置开始行和结束行

> ID：16055129
> 
> 赞同：1
> 
> 时间：2013-04-17T08:25:38.567
> 
> 标签：excel, vba, range

假设我按列号设置多个不同列的范围，如下所示：

```
Set rngData = shtData.Range(Columns(1), Columns(2), Columns(5)) 
```

但我只希望范围从第 5 行开始，到第 10 行结束。

我可以在 Set rngData 语句中指定这个吗？感谢任何帮助

编辑。

感谢 KazJaw，这是对我有用的解决方案：

```
 Dim shtData, rngData
    Set shtData = Worksheets("Data")
    Set rngData = Union(shtData.Columns(1), shtData.Columns(2), shtData.Columns(5))
    Set rngData = Intersect(rngData, shtData.Rows("5:10")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:48:21.060

可能的方法很少，但我不确定哪种方法最适合您。我的第一个可能也是最简单的建议如下：

```
Set rngData = shtData.Range(Columns(1), Columns(2), Columns(5))
set rngData = Intersect(rngData, shtData.Rows("5:10")) 
```

但是，您当前的范围无论如何都不起作用。你可以改用这样的东西：

```
Set rngData = shtData.Range("A:B, E:E") 
```

或者，如果您需要保留列的数字索引，则可以采用这种方式（完整代码）：

```
Set rngData = Union(shtData.Columns(1), shtData.Columns(2), shtData.Columns(5))
set rngData = Intersect(rngData, shtData.Rows("5:10")) 
```

**编辑-扩展和解释：**见下面的子程序和里面的注释

```
Sub Test_Selection()
'Variant A- select range from column 1 to 5
    ActiveSheet.Range(Columns(1), Columns(5)).Select

'Variant B- select range of columns: 1, 2 and 5
    With ActiveSheet
        Union(.Columns(1), .Columns(2), .Columns(5)).Select
    End With
'This will not work
    ActiveSheet.Range(Columns(1), Columns(2), Columns(5)).Select
End Sub 
```

因此，上面的变体 B 能够像这样选择不连续的范围：

![在此处输入图像描述](https://i.stack.imgur.com/Nsxii.jpg)

**对于所有感兴趣的人，关于 Intesect 的最终解释。**此过程将给出如下图所示的结果：

```
Sub Final_Combination()
    Dim shtData As Worksheet
        Set shtData = ActiveSheet
    Dim rngData As Range
    Set rngData = Union(shtData.Columns(1), shtData.Columns(2), shtData.Columns(5))

    Set rngData = Intersect(rngData, shtData.Rows("5:10"))

'or simply combined in one line of code
    Set rngData = Intersect(Union(shtData.Columns(1), _
                                shtData.Columns(2), _
                                shtData.Columns(5)), _
                            Rows("5:10"))
        rngData.Select
End Sub 
```

![在此处输入图像描述](https://i.stack.imgur.com/kwTG8.jpg)

# wpf - 鼠标单击扩展器 + 在列表视图中选择项目问题

> ID：16055134
> 
> 赞同：2
> 
> 时间：2013-04-17T08:26:04.733
> 
> 标签：wpf, listview, expander

我有一个列表视图，其中每个列表视图项都是扩展器控件。现在，当我单击扩展器打开或关闭它时，我也希望选择该项目。但它没有发生。只有扩展器扩展。

看起来我的扩展器中的事件没有到达列表视图。

知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T20:58:03.457

在“ListView”里面设置容器样式是这样的......

```
 <ListView.ItemContainerStyle>
      <Style TargetType="{x:Type ListViewItem}">
           <Style.Triggers>
               <Trigger Property="IsKeyboardFocusWithin" Value="True">
                     <Setter Property="IsSelected" Value="True"/>
               </Trigger>
           </Style.Triggers>
      </Style>
 </ListView.ItemContainerStyle> 
```

得到答案： [链接](https://stackoverflow.com/questions/12193534/how-to-update-listviewitem-selecteditem-whenever-the-listview-child-control-gets)

# java - 使用单个图像按钮通过 WiFi 将字符串从 android 发送到计算机

> ID：16055145
> 
> 赞同：0
> 
> 时间：2013-04-17T08:26:50.653
> 
> 标签：java, android, button, wifi, imagebutton

在我的android项目中，我使用两个简单的按钮（button1和button2）通过我的android（使用WiFi）成功地将字符串/文本发送到计算机。但我想使用“仅单个图像按钮（作为切换）”而不是我的两个简单按钮（按钮 1 和按钮 2）。这是我的代码。

```
 import java.io.IOException;
   import java.io.PrintWriter;
   import java.net.Socket;
   import java.net.UnknownHostException;
   import android.os.Bundle;
   import android.app.Activity;
   import android.view.View;
   import android.view.View.OnClickListener;
   import android.widget.Button;
   import android.widget.EditText;

   public class MainActivity extends Activity {

  private Socket client;
  private PrintWriter printwriter;
  private EditText etMsg;       //, etIP, etPort;
  private Button button;
  private Button button1;
  private String messsage;
  int port = 0; //

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

   //   etIP = (EditText) findViewById(R.id.editText1);
   //  etPort = (EditText) findViewById(R.id.editText2);
    etMsg = (EditText) findViewById(R.id.editText3);
    button = (Button) findViewById(R.id.button1);
    button1 = (Button) findViewById(R.id.button2);
    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            messsage = "TV ON" ; //etMsg.getText().toString();
            etMsg.setText("");
           // port = Integer.parseInt(etPort.getText().toString());

            new Thread(new Runnable() 
            {

                @Override
                public void run() {
                    // TODO Auto-generated method stub
                    try 
                    {
                      //  client = new Socket(etIP.getText().toString(), port);
                        client = new Socket("1.2.3.4",2000);

                        printwriter = new     
                        PrintWriter(client.getOutputStream(),true);
                        printwriter.write(messsage);
                        printwriter.flush();
                        printwriter.close();
                        client.close();
                    }

                    catch (UnknownHostException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }       
                }
            }).start();

        }
      });

      button1.setOnClickListener(new OnClickListener() {

      @Override
      public void onClick(View v) {
          // TODO Auto-generated method stub

        messsage = "TV OFF" ; //etMsg.getText().toString();
        etMsg.setText("");
       // port = Integer.parseInt(etPort.getText().toString());

        new Thread(new Runnable() 
        {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                try 
                {
                  //  client = new Socket(etIP.getText().toString(), port);
                    client = new Socket("1.2.3.4",2000);

                    printwriter = new PrintWriter(client.getOutputStream(),true);
                    printwriter.write(messsage);
                    printwriter.flush();
                    printwriter.close();
                    client.close();
                }

                catch (UnknownHostException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }       
            }
        }).start();

    }
    });
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:37:18.233

正如您所说，您想使用**切换按钮**来打开和关闭命令。这些是使用切换按钮的一些代码：

```
toggleButton1 = (ToggleButton) findViewById(R.id.toggleButton1);
toggleButton2 = (ToggleButton) findViewById(R.id.toggleButton2);
btnDisplay = (Button) findViewById(R.id.btnDisplay);

btnDisplay.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {

       StringBuffer result = new StringBuffer();
       result.append("toggleButton1 : ").append(toggleButton1.getText());
       result.append("\ntoggleButton2 : ").append(toggleButton2.getText());

       Toast.makeText(MyAndroidAppActivity.this, result.toString(),
        Toast.LENGTH_SHORT).show();

    } 
```

完整的教程，你可以在这里得到它：[Android 切换按钮示例](http://www.mkyong.com/android/android-togglebutton-example/)。

# c# - 如何使用反射创建或调用抽象类的受保护构造函数？

> ID：16055147
> 
> 赞同：4
> 
> 时间：2013-04-17T08:26:52.697
> 
> 标签：c#

我正在尝试使用反射调用或创建抽象类的实例。这可能吗。这是我尝试过的，但我收到一条错误消息“无法创建抽象类的实例”。

```
Type dynType = myTypes.FirstOrDefault(a => a.Name == "MyAbstractClass");
ConstructorInfo getCons = 
dynType.GetConstructor(BindingFlags.NonPublic | BindingFlags.Instance, null, new Type[0], null);
object dynamicInstance = getCons.Invoke(null); 
```

**编辑：**我可以使用反射访问这个抽象类的属性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:30:04.557

在抽象类上调用构造函数相当于试图实例化一个抽象类，这是不可能的（不能创建抽象类的实例）。

您需要做的是创建派生类的实例并声明其构造函数，以便它调用基构造函数，如下所示：

```
public class DerivedClass : AbstractClass
{
    public DerivedClass() : base()
    {
        ....
    }
} 
```

完整示例：

```
public abstract class Abstract
{
    public Abstract()
    {
        Console.WriteLine("Abstract");
    }
}

public class Derived : Abstract
{
    public Derived() : base()
    {
        Console.WriteLine("Derived");
    }
}

public class Class1
{
    public static void Main(string[] args)
    {
        Derived d = new Derived();
    }
} 
```

这个的输出是

```
Abstract
Derived 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:42:29.283

正如之前所有答案中已经提到的：实例化抽象类是不可能的。

另一个重要注意事项：要通过反射实例化实例，您应该使用[Activator.CreateInstance](http://msdn.microsoft.com/ru-ru/library/system.activator.createinstance%28v=vs.95%29.aspx)而不是构造函数调用。

```
object dynamicInstance = Activator.CreateInstance(yourType, yourArguments); 
```

对象创建是一个比简单地调用构造函数稍微复杂的过程。它需要分配必要的内存量，然后才通过调用构造函数来设置对象本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:29:31.867

你不能实例化一个抽象类，甚至不能使用反射。

如果您需要一个实例，可以：

*   从类中删除`abstract`修饰符。
*   如果您不能这样做（例如，如果该类位于封闭库中），请定义一个从抽象类继承的子类并实例化该类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T08:30:04.200

您不能创建`abstract`类的实例。但是，您可以使用*继承*并使用*隐式转换*

```
Derived derived = new Derived();
Abstract abstract = derived; 
```

通过隐式转换，您可以将派生实例视为基类实例。

来自 MSDN

```
The abstract modifier indicates that the thing being modified 
has a missing or incomplete implementation. 
```

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/sf985hc5%28v=vs.110%29.aspx)以获取参考。

# python - Python : Win32 : 获取 Word 文档中的标题信息

> ID：16055150
> 
> 赞同：1
> 
> 时间：2013-04-17T08:27:00.887
> 
> 标签：python, ms-word, pywin32, win32com

我正在尝试使用带有 win32 组件的 Python 自动化 Microsoft Office Word 2010 文档。在那里，我需要阅读并获取 WORD 文档的 Header 信息。我查看了 MSDN 库（并认为 getFieldNames 可以帮助我），甚至查看[了@Editing MS Word header with win32com](https://stackoverflow.com/questions/14148531/editing-ms-word-header-with-win32com)（使用它我只能编辑标题信息），但没有一个对我有用。

我的代码片段是：

..//

```
#tell word to open the document
word.Documents.Open (IP_Directory_Dest + "\\" + name)

#open it internally
doc = word.Documents(1)

### get the header of file - using this gives me Attribute Error
## header = doc.getFieldNames() 
## print ('Header = ', header) 
```

..//

此外，当我使用 getFieldNames() 时，它会给出错误“AttributeError: '' object has no attribute 'getFieldNames'”，这让我相信对象库中没有像 getFieldNames 这样的属性。

非常欢迎对此提出任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:05:58.903

知道了。它应该是这样的：

...///

```
#tell word to open the document
word.Documents.Open (IP_Directory_Dest + "\\" + copied_IR_file)

# store the header information
header_string = word.ActiveDocument.Sections(1).Headers(win32com.client.constants.wdHeaderFooterPrimary).Range.Text 
```

...///

# backbone.js - BackboneJS MarionetteJS - 等待收集完成获取

> ID：16055153
> 
> 赞同：1
> 
> 时间：2013-04-17T08:27:05.620
> 
> 标签：backbone.js, coffeescript, marionette

我有一个 BackboneJS 和 MarionetteJS 应用程序

```
class MyApp extends Marionette.Application

app = new MyApp
app.addRegions
  tag_container    :"#tag_container"
  item_container   :"#item_container"

app.addInitializer( =>
  app.items = new ItemCollection()
  app.item_container.show(new ItemListView({collection:app.items}))
) 
```

在我的 ItemCollection 中，

```
class ItemCollection extends Backbone.Collection
  model :ItemModel
  url   :"/get_items"

  initialize: =>
    @search()

  search: =>
    @reset()
    @fetch() 
```

上面的代码立即显示 ItemListView 并在获取项目时添加项目。

如何等到集合完成获取然后在“item_container”中显示 ItemListView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:34:01.437

要么使用监听器来了解集合何时完成他的工作。`reset`如果您正在重置它（不是 Backbone 0.9.10 的默认行为）或`sync`（始终完成） ，您可以收听。
或者您可以使用`success`回调。
[来源](http://backbonejs.org/#Collection-fetch)

第三种解决方案是进行同步获取：

```
@fetch async: false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:26:41.507

fetch 返回一个 jquery 承诺。所以你可以做

```
collection.fetch().done(function() { 
 // create & show the view
}); 
```

# regex - 使用 WCF 项目的数据限制为 WAF 生成 XSD sheme

> ID：16055154
> 
> 赞同：0
> 
> 时间：2013-04-17T08:27:12.440
> 
> 标签：regex, wcf, soap

我正在尝试为 waf（Web 应用程序防火墙）生成一个 xsd 模式，以在来自用户端的请求作为第二道防线到达服务之前对其进行验证。

在我的 Web 服务中，我使用 DataAnnotations 来严格输入，并且我正在寻找一种方法来将其反映在为服务生成的 xsd 文件中。

例如我有以下 DataAnnotation

```
[DataMember]
[StringLength(50)]
[RegularExpression(@"^[a-zA-Z]")] 
```

但是在 XSD 生成的类型中，这些限制是不存在的。

我正在使用 VS2010、.NET 4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:26:50.123

我认为要为 wcf 使用 DataAnnotation，您应该使用[WCF Data Annotations](http://wcfdataannotations.codeplex.com/)之类的东西，而不是直接使用 DataAnnotation（为 asp 页面引入）

# arduino - 使用 GSM 接收短信并使用 Arduino 控制 LED

> ID：16055156
> 
> 赞同：0
> 
> 时间：2013-04-17T08:27:18.327
> 
> 标签：arduino, gsm, at-command

有人想出解决上述问题的方法吗？

我们正在使用 Arduino Duemilanove 和 SIM 900 GSM 模块（[http://robokits.co.in/shop/index.php?main_page=product_info&products_id=303](http://robokits.co.in/shop/index.php?main_page=product_info&products_id=303)）

当我们发送短信#aibicidi 时，我们尝试解决端口 9-12 的闪电 LED 的类似问题，其中 i = 0 或 1，0 = 关闭，1 = 开启。例如 #a1b1c1d1 将打开所有 LED。

当我们上传代码并通过串口监视器运行它并在串口监视器中输入#a1b1c1d1 时，我们可以看到所有的 LED 都亮了。但是，如果我们发送内容为“#a1b1c1d1”的短信，我们看不到 LED 的任何功能。

如果有人可以提供一些相同的指导，那就太好了。

```
 char inchar; //Will hold the incoming character from the Serial Port.

 int led1 = 9;
 int led2 = 10;
 int led3 = 11;
 int led4 = 12;

 void setup()
 {
 // prepare the digital output pins
 pinMode(led1, OUTPUT);
 pinMode(led2, OUTPUT);
 pinMode(led3, OUTPUT);
 pinMode(led4, OUTPUT);
 digitalWrite(led1, LOW);
 digitalWrite(led2, LOW);
 digitalWrite(led3, LOW);
 digitalWrite(led4, LOW);
 //Initialize GSM module serial port for communication.

 Serial.begin(9600);
 delay(3000); // give time for GSM module to register on network etc.
 Serial.println("AT+CMGF=1"); // set SMS mode to text
 delay(200);
 Serial.println("AT+CNMI=3,3,0,0"); // set module to send SMS data to serial out upon receipt 
 delay(200);
 }

 void loop() 
 {
 //If #a1b1c1d1 comes as sms, all LEDs should light up.
 if(Serial.available() >0)
 {
 inchar=Serial.read(); 
 if (inchar=='#')
   {
   delay(10);
   inchar=Serial.read(); 

 //first led
   if (inchar=='a')
     {
   delay(10);
   inchar=Serial.read();

 if (inchar=='0')
   {
   digitalWrite(led1, LOW);
   } 
 else if (inchar=='1')
   {
   digitalWrite(led1, HIGH);
   }
 delay(10);

 //Second led
 inchar=Serial.read(); 

 if (inchar=='b')
   {
   inchar=Serial.read();
 if (inchar=='0')
 {
 digitalWrite(led2, LOW);
 } 

 else if (inchar=='1')
 {
 digitalWrite(led2, HIGH);
 }
 delay(10);

 // Third led
 inchar=Serial.read(); 
 if (inchar=='c')
 {
 inchar=Serial.read();
 if (inchar=='0')
 {
 digitalWrite(led3, LOW);
 } 
 else if (inchar=='1')
 {
 digitalWrite(led3, HIGH);
 }
 delay(10);

 //Fourth led

 inchar=Serial.read(); 
 if (inchar=='d')
 {
 delay(10);
 inchar=Serial.read();
 if (inchar=='0')
 {
 digitalWrite(led4, LOW);
 } 
 else if (inchar=='1')
 {
 digitalWrite(led4, HIGH);
 }
 delay(10);
 }
 }
 Serial.println("AT+CMGD=1,4"); // delete all SMS
 }
 }
 }
 }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T18:13:02.463

## 首先不要使用延迟

```
Serial.begin(9600);
delay(3000); // give time for GSM module to register on network etc. 
```

这既没有必要也不可靠。`AT+CFUN`您可以使用和/或检查网络状态，而不是等待一些随机时间`AT+COPS`。如果打开串口时GSM模块已经连接到网络，那么等待是浪费时间。如果未附加，您应该明确等待它发生（轮询 CFUN/COPS 或启用`AT+CREG`），否则您可能等待的时间太短。有关这些命令的更多信息，请参阅[27.007](http://www.3gpp.org/ftp/Specs/html-info/27007.htm)规范。

## 二不使用延迟

```
Serial.println("AT+CMGF=1"); // set SMS mode to text
delay(200); 
```

请不要写这样的代码。请参阅[此答案](https://stackoverflow.com/a/16404193/23118)，了解为什么使用延迟是一个坏主意，以及有关如何正确处理的建议的[答案。](https://stackoverflow.com/a/16446523/23118)

# javascript - 如何在浏览器中更改 JavaScript，然后在修改后运行它？

> ID：16055162
> 
> 赞同：1
> 
> 时间：2013-04-17T08:27:50.420
> 
> 标签：javascript, google-chrome, browser

我正在尝试编译两个`<select></select>`框之间可能存在的所有链接的列表。这包括在新窗口中打开的链接和发生在当前页面的重定向。实际站点上还有更多选项，几乎有 2000 种可能性，所以手动操作是不可能的......

我正在寻找接近此输出的任何地方，而不是格式，只是数据：

产品1 + AL：

*   新窗口：/product1.asp
*   重定向：无

产品1 + AK：

*   新窗口：[http ://affiliate.com/product1.asp](http://affiliate.com/product1.asp)
*   重定向：/results.asp?st=AK&pr=product1

产品1 + AR：

*   新窗口：[http ://affiliate.com/product1.asp](http://affiliate.com/product1.asp)
*   重定向：/results.asp?st=AR&pr=product1

产品2 + AL：

*   ...

产品2 + AK：

*   ...

等等。

我会使用 cURL 但表单并没有真正提交到任何地方，它只使用 JS 打开新窗口和/或重定向当前页面。

这是我正在尝试使用的一个小样本：

```
<HTML>
    <HEAD>
        <SCRIPT LANGUAGE="JavaScript">
            function submit()
            {
                if (product == "product1"){
                    if (state == "AL"){
                        openWindow('/product1.asp');
                    }
                    else{
                        openWindow('http://affiliate.com/product1.asp');
                        return(window.location="/results.asp?st=" + state + "&pr=product1");
                    }
                }
                if (product == "product2"){
                    openWindow('/product2.asp');
                }
                if (product == "product3"){
                    if (state == "AR") { 
                        openWindow('http://affiliate.com/product3.asp'); 
                    }
                    else{
                        openWindow('/product3'); 
                        return (window.location = "/results.asp?st=" + state + "&pr=product3"); 
                    }
                }
                return(true);
            }

            function openWindow(url)
            {
              window.open(url, '', 'type=fullwindow,fullscreen,scrollbars=yes,toolbar=1,menubar=1');
            }
        </script>
    </HEAD>
    <BODY>
        <form onsubmit="" action="javascript:submit()" method="post" id="form1" name="form1">
            <select name="state" tabindex="1">
                <option value="">Select</option>
                <option value="AK">Alaska</option>
                <option value="AL">Alabama</option>
                <option value="AR">Arkansas</option>
            </select>

            <select name="productType" tabindex="2">
                <option value="">Select</option>
                <option value="product1">Product One</option>
                <option value="product2">Product Two</option>
                <option value="product3">Product Three</option>
            </select>
        </form>
    </BODY>
</HTML> 
```

我想我可以在 Chrome 的控制台窗口中使用 JavaScript，但我无法让 Chrome 停止重定向或打开另一个窗口。

我尝试选择页面上的所有 HTML，运行字符串替换（使用 JS）以替换为`window.location`变量名，然后将 HTML 重新写入文档，然后调用，它有点工作，它可以获取 URL，但是 Chrome 仍然使用原始的 JS 重定向，我无法访问或查看数据。我什至尝试打开一个新窗口并编写整个页面的 HTML 并在那里替换，但没有...`window.location = "/results.asp"``redirectLink = "/results.asp"``submit()`

这是我必须替换它的 JS 代码：

```
var script = document.getElementsByTagName('script')[0];
var html = scripts[i].innerHTML;
html = html.replace(/window.location/gmi, "redirectLink"); // the "/string/gmi" is to replace globally, on multi-lines, and ignores case
script.innerHTML = html; 
```

在 Chrome 的 Inspect Element 工具中，它**确实**显示了替换已经完成，但是当调用`submit()`它时仍然会重定向/打开窗口......我有循环设置来更改选定的值和所有其他东西，它们都可以工作，但是我无法阻止它使用原始 JS 重定向/新窗口废话...

我一直在努力让它连续工作 5 个小时，此时我会因为拔掉所有的头发而秃顶！

是否有可能在浏览器中更改 JavaScript，然后通过修改运行它？有没有更好的方法来解决这个问题？我完全失去了想法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-29T11:41:30.663

您将不得不为此找到一个插件

# arrays - Z3求解器中的二维数组

> ID：16055165
> 
> 赞同：2
> 
> 时间：2013-04-17T08:28:04.723
> 
> 标签：arrays, z3

我想使用 C API 使用 z3 求解器定义一个二维数组，如下所示

a[3][3] = { {0,0,0},{0,0,0},{0,0,0}}

如何使用 Z3 求解器 C API 定义它，其中我需要添加约束，例如每行的总和等于 1，并且每个列的总和应该 <= 100。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T15:37:52.083

Z3 支持数组理论，但通常用于编码无界数组或非常大的数组。此问题已在其他帖子中讨论过（请参阅：[创建具有固定大小的数组并对其进行初始化](https://stackoverflow.com/questions/11068561/how-to-create-an-array-with-fixed-size-and-initialize-it)）。如果我们搜索`[z3] array`，我们会发现许多其他帖子。对于预定义大小的数组，创建“Z3 表达式数组”更容易（也更有效）。[Z3 教程](http://rise4fun.com/Z3Py/tutorial/guide)中的数独示例展示了如何做到这一点。这是您帖子中描述的问题的 Python 代码（也可[在此处](http://rise4fun.com/Z3Py/h1R)在线获得）。

```
# 3x3 matrix of integer variables
A = [ [ Int("a_%s_%s" % (i+1, j+1)) for j in range(3) ] 
      for i in range(3) ]
print A

# Rows constraints
rows_c = [ Sum(r) == 1 for r in A ]
print rows_c

# Columns constraints
A_transpose = [ [ A[i][j] for i in range(3) ] for j in range(3) ]
cols_c = [ Sum(c) <= 10 for c in A_transpose ]
print cols_c

s = Solver()
s.add(rows_c)
s.add(cols_c)
# solve constraints
print s.check()
# print solution
m = s.model()
print m
# printing the solution in a nicer way
r = [ [ m.evaluate(A[i][j]) for j in range(3) ] for i in range(3) ]
print_matrix(r) 
```

# .net - 强制 .NET Windows 应用程序。以英文形式显示数字

> ID：16055174
> 
> 赞同：2
> 
> 时间：2013-04-17T08:28:45.173
> 
> 标签：.net, windows, vb.net, culture

我正在构建一个特定于文化的 .NET Windows 应用程序，最近我遇到了一个数字形状的问题，它根据操作系统文化而改变。例如，如果操作系统文化是英语（美国）并运行应用程序，则显示的数字将是英文形状（我们以前通常使用的），但如果我将 windows 文化更改为阿拉伯语-沙特阿拉伯，则将显示数字在不同的形状。

我想强制此应用程序仅以英语形式显示数字，无论文化是什么。

我在互联网上搜索并厌倦了许多尝试更改应用程序文化和 UICulture 的解决方案而没有任何结果。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:01:21.337

您可以在进行字符串转换时指定要使用的文化，例如：

```
Dim i As Integer = 5
Dim s As String = i.ToString(CultureInfo.InvariantCulture) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-21T18:32:54.080

在后面的代码中使用下面的代码：

```
CultureInfo ci = CultureInfo.CreateSpecificCulture(Thread.CurrentThread.CurrentCulture.Name);
        ci.NumberFormat.DigitSubstitution = DigitShapes.None;
        Thread.CurrentThread.CurrentCulture = ci; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:22:47.947

尝试

`culture.NumberFormat.DigitSubstitution=System.Globalization.DigitShapes.None;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-29T09:44:38.373

直接在注册表中更改它。
就像英文形状一样：

```
Microsoft.Win32.Registry.SetValue("HKEY_CURRENT_USER\Control Panel\International", "sNativeDigits", "0123456789") 
```

对于阿拉伯形状：

```
Microsoft.Win32.Registry.SetValue("HKEY_CURRENT_USER\Control Panel\International", "sNativeDigits", "٠١٢٣٤٥٦٧٨٩")
Microsoft.Win32.Registry.SetValue("HKEY_CURRENT_USER\Control Panel\International", "NumShape", "2") 
```

# c++ - 将 MPI 与 c++11 和 CUDA 相结合

> ID：16055176
> 
> 赞同：4
> 
> 时间：2013-04-17T08:28:53.697
> 
> 标签：c++, c++11, cuda, mpi

我正在编写分子动力学模拟，一些内核将使用 CUDA 计算。我使用一些 c++11 特性从一个普通的 CPU 实现开始我的代码。现在我必须添加一些 CUDA 代码，我必须使用不支持 c++11 功能的编译器（gcc <= 4.6）。

在我的 makefile 中，我分别从所有 cpp 文件创建对象，最后将它们全部链接在一起。此外，我的代码以这样一种方式进行拆分，即可以使用“现代”编译器编译没有 CUDA 的部分，而使用较旧的编译器编译其余部分（使用 CUDA）。

我现在的问题是，这是否可以，或者我是否会/可能会遇到这种方式的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T19:07:43.777

我不了解 Cuda，但我知道将 C++98 和 C++11 目标文件链接在一起是非常危险的，因为模板实例化只在最终可执行文件中发出一次。关键是，ABI 可能已经改变。

`std::complex<double>::real()`我曾经和 g++遇到过这个问题。两个实例之一返回一个指向 a 的指针`double`，另一个返回`double`istelf。链接器仅将两个实例中的一个（直接返回双精度数的）发射到最终的可执行文件中，然后调用的 C++98 代码将双精度数误认为是指针，从而导致段错误。

对于为什么会发生这种情况，只需查看`<complex>`：取决于`__cplusplus >= 201103L`是否`real()`以这种方式声明：

```
constexpr _Tp real(); 
```

或者这样：

```
const _Tp& real() const { return _M_real; } 
```

`std::complex`我怀疑除了周围还有更多的例子。

# javascript - Toastr 未定义

> ID：16055183
> 
> 赞同：0
> 
> 时间：2013-04-17T08:29:04.100
> 
> 标签：javascript, jquery, asp.net, toastr

我正在尝试在我的解决方案中实现 toastr。

我从[添加 toastr 的帖子中制作了一个扩展方法：webforms](https://stackoverflow.com/questions/15544908/adding-toastr-javascript-asp-net-webform/15549015#15549015)

并得到错误：`SCRIPT5009: 'toastr' is undefined`

我在我的和我正在使用的项目中有参考资料，`master page`一切都很好。`jQuery``Foundation`

```
public static class MyExtensions
{
    public static void ShowToastr(this Page page, string message, string title, string type = "error")
    {
        page.ClientScript.RegisterStartupScript(page.GetType(), "toastr_message",
            String.Format("toastr.{0}('{1}','{2}');", type.ToLower(), message, title), addScriptTags: true);
    }

} 
```

当用户尝试插入空字符串时，我在代码中调用错误。

```
if (txt_CentreName.Text == "")
{
   this.ShowToastr("Hello World", "Hello");
} 
```

我所做的唯一更改是将 toastr.css 移出`content folder`并将其移动到我的样式文件夹中。我已经查看了`toastr.js`它是否在代码中引用它，但看不到`contents folder`任何地方。这是我出错的地方吗。

我刚刚打开 chrome 并在控制台窗口中输入`toastr`，它在页面上。

```
Object {clear: function, error: function, getContainer: function, info: function,        options: Object…}
clear: function ($toastElement) {
error: function (message, title, optionsOverride) {
getContainer: function getContainer(options) {
info: function (message, title, optionsOverride) {
options: Object
success: function (message, title, optionsOverride) {
version: "1.2.2"
warning: function (message, title, optionsOverride) {
__proto__: Object 
```

在`toastr.js`第一行`; (function (define) { define(['jquery'], function ($) {` 中，因为我的文件夹在我的根目录上并且我`toatsr`在子文件夹中使用，我是否需要在前面放置一个反斜杠。`toatsr`我认为这可能是问题所在，怎么知道在哪里可以找到 jquery？

# javascript - javascript - 如何制作多个可拖动的克隆？

> ID：16055184
> 
> 赞同：0
> 
> 时间：2013-04-17T08:29:07.463
> 
> 标签：javascript, clone, draggable, droppable

现在我正在尝试制作一个简单的拖放游戏。

我第一次拖放克隆时效果很好，但它不允许我再拖动克隆。

所以我想创建尽可能多的克隆，因为我拖动......我不知道该怎么做。

请先看看我的代码。

```
 function init(){
    var xCoordinate;
    var yCoordinate;
    var itemName;

    $('#burger, #chicken, #fries, #hotdog, #soda').draggable({
        containment: '#screen',
        start: getPosition,
        helper: 'clone',
        stop: dragStop,
        revert: 'invalid'
    });

    $('#A, #B, #C').droppable({
        drop: itemDrop
    });
}

function getPosition(event, ui){
    xCoordinate = ui.offset.left;
    yCoordinate = ui.offset.top;
}; 
```

“function getPosition”只是简单的获取原始可拖动项目的x和y坐标，以便克隆可以放置在相同的位置。

我知道我必须命令“复制克隆！！” 在droppable功能下，但不知道怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:49:49.640

代码应该为该`drop`属性提供一个函数。此函数应克隆帮助程序并将其附加到`droppable`. 我提供了一个基本示例，您可以将其应用于您的实现。

**HTML**

```
<ul>
    <li>Item 1</li>
    <li>Item 2</li>
</ul>
<div id="drop"></div> 
```

**Javascript**

```
$("li").draggable(
    {helper: "clone"}
);

$("#drop").droppable({
    accept: "li",
    drop: function(event,ui){
        console.log(ui.helper);
       $(this).append($(ui.helper).html());    
    }
}); 
```

**工作示例** [http://jsfiddle.net/2W4jA/](http://jsfiddle.net/2W4jA/)

# alfresco - Alfresco 本地化编码

> ID：16055190
> 
> 赞同：1
> 
> 时间：2013-04-17T08:29:17.617
> 
> 标签：alfresco, alfresco-share

尝试为 Alfresco 创建自定义类型、方面和属性时，我遵循了[Alfresco 开发人员系列](http://ecmarchitect.com/images/articles/alfresco-content/content-article-2ed.pdf)指南。当我到达**本地化**部分时，我发现 Alfresco 不处理您创建的 .properties 文件中的 UTF-8 编码。希腊字符在 Share 中显示不正确。

检查其他内置的 .properties 文件（/opt/alfresco-4.0.e/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/messages）我注意到在日语中，例如，字符是这个符号: \u3059\u3079\u3066\u306e...

所以，问题是：我是否必须转换上述符号中的希腊词才能正确显示它们，还是有另一种更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:59:18.107

The \u#### form is the Java form of the [Unicode Escape Sequence](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.1), and is used to reference unicode characters without having to worry about the encoding of the file storing them.

[This question](https://stackoverflow.com/questions/6230190/convert-international-string-to-u-codes-in-java) has some information on how to create and decode them

Another way, which is what Alfresco developers tend to use, is the [Native2ASCII tool](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/native2ascii.html) which ships with Java itself. With that, you can initially write your strings in a UTF-8 (for example) file, then use the tool to turn them into their escaped form.

# pic - PIC18F 复位导致 WDT_FROM_SLEEP

> ID：16055198
> 
> 赞同：0
> 
> 时间：2013-04-17T08:29:30.663
> 
> 标签：pic, microchip

我使用 PIC18F6622 和 PICC 编译器。

我使用看门狗定时器定期从睡眠模式中唤醒。数据表指出，在电源管理模式下看门狗会退出该模式，通常它工作得很好。

但是，有时我会看到意外的重置。使用 PICC 的**reset_cause()**我发现原因是**WDT_FROM_SLEEP**。这意味着什么？为什么它会导致重置而不是唤醒？

非常感谢，

卡纳布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-15T15:45:34.700

中断事件可能唤醒了 PIC，然后 WDT 可能在运行模式期间溢出，这将导致看门狗复位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:40:51.110

您正在让 MCPU 进入 SLEEP 模式。在这种模式下，MCPU 等待事件从睡眠中唤醒。在程序进入 SLEEP 模式之前，您没有解释启用了哪种事件/中断。假设您正在等待 OnPinChange（EEPROM 写入，ADC 转换 ...）事件，并且永远不会发生（或迟到），因此看门狗时间到期并重置 MCPU。

一种解决方案：尝试增加Watch Dog Timer 时间间隔。

# ruby - 如何从 watir 中的 td 获取看起来像“状态”的数据

> ID：16055217
> 
> 赞同：3
> 
> 时间：2013-04-17T08:30:21.653
> 
> 标签：ruby, watir

```
<td align="Left">

<font color="navy">

<b>Status &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
     &nbsp;&nbsp; : </b>

</font>

<font color="red"><b>Registered</b>
</font>

</td> 
```

我想做这个

```
if(cell.text==like(status))
  puts "yes"
end 
```

实际上在我的表中有随机的 tr 和 td ，所以我想获取其中包含状态文本的 td 文本。因为它是固定的，并且“注册”文本可能会发生变化。所以在 %status% 的基础上，我想选择 td。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T08:56:25.440

您可以通过正则表达式定位元素：

```
browser.td(:text => /^Status/) 
```

# android - 使用 Eclipse 和 ADT 为我的 android 活动提供动画背景

> ID：16055218
> 
> 赞同：0
> 
> 时间：2013-04-17T08:30:23.197
> 
> 标签：android, background, adt, animated

我想创建一个覆盖整个活动屏幕的背景。就像：

```
 android:background="@drawable/background" 
```

但我希望这个背景是`animated`（60 帧），循环并以尽可能多的设备分辨率为目标。

我试图做一个`drawble` `.jpg`序列，但问题是我使用 1920x1080，而 logcat 在尝试在模拟器上测试它时，应用程序崩溃了，并且 LogCat 给了我一个错误说，`not enough memory`

然后我尝试导入`video`我的序列并将其设置为在后台播放。但是我不知道将 放在`video`我的`res`文件夹中的哪个位置并从那里用 调用它`SetVideoPath()`，以便播放它。

覆盖具有不同分辨率的多个设备的动画背景的最佳方法是什么？

@Arun C 托马斯

我仍然在 logcat 中遇到错误，

内存不足错误

我的代码是这样的：

```
package combiolab.biolab;

import android.app.Activity;
import android.graphics.drawable.AnimationDrawable;
import android.opengl.GLSurfaceView;
import android.opengl.GLSurfaceView.Renderer;
import android.os.Bundle;
import android.view.WindowManager;

public class MainActivity extends Activity {

    private Renderer graphicsRenderer;

    //public static String gl;
    AnimationDrawable anim;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
       getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

       GLSurfaceView myGLSurfaceView = (GLSurfaceView) findViewById(R.id.gl);
       myGLSurfaceView.setEGLConfigChooser(true);         
       myGLSurfaceView.setRenderer(graphicsRenderer);
    }

    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:paddingBottom="@dimen/activity_vertical_margin"
        android:paddingLeft="@dimen/activity_horizontal_margin"
        android:paddingRight="@dimen/activity_horizontal_margin"
        android:paddingTop="@dimen/activity_vertical_margin"
        tools:context=".MainActivity" >

         <android.opengl.GLSurfaceView 
            android:id="@+id/gl" 
            android:layout_width="fill_parent" 
            android:layout_height="fill_parent">
        </android.opengl.GLSurfaceView>

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:37:05.490

您需要创建一个[OpenGL](http://developer.android.com/guide/topics/graphics/opengl.html) 视图，然后像这样添加它

```
 <android.opengl.GLSurfaceView 
        android:id="@+id/gl" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent">
    </android.opengl.GLSurfaceView> 
```

在`onCreate()`实现 Renderer 之类的

```
GLSurfaceView myGLSurfaceView = (GLSurfaceView) findViewById(R.id.gl);
    myGLSurfaceView.setEGLConfigChooser(true);         
    myGLSurfaceView.setRenderer(graphicsRenderer); 
```

# magento - 添加其他商店地址

> ID：16055221
> 
> 赞同：1
> 
> 时间：2013-04-17T08:30:28.963
> 
> 标签：magento

Magento 允许您在商店管理员中设置五个电子邮件地址：

*   一般联系人
*   销售代表
*   客户支持
*   自定义电子邮件 1
*   自定义电子邮件 2

如果我想要更多，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:02:25.907

您需要创建一个新模块（或扩展本地代码池中的现有模块）并添加一个`system.xml`文件。

这是一个简单的例子。假设您要添加“技术支持”和“人力资源部门”电子邮件地址。您的`system.xml`文件将如下所示：

```
 <config>
    <sections>
        <trans_email>
            <groups>
                <ident_technical translate="label">
                    <label>Technical Support</label>
                    <frontend_type>text</frontend_type>
                    <sort_order>10</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>
                    <fields>
                        <email translate="label">
                            <label>Sender Email</label>
                            <frontend_type>text</frontend_type>
                            <backend_model>adminhtml/system_config_backend_email_address</backend_model>
                            <validate>validate-email</validate>
                            <sort_order>2</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </email>
                        <name translate="label">
                            <label>Sender Name</label>
                            <frontend_type>text</frontend_type>
                            <backend_model>adminhtml/system_config_backend_email_sender</backend_model>
                            <validate>validate-emailSender</validate>
                            <sort_order>1</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </name>
                    </fields>
                </ident_technical>
                <ident_hr translate="label">
                    <label>HR department</label>
                    <frontend_type>text</frontend_type>
                    <sort_order>20</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>
                    <fields>
                        <email translate="label">
                            <label>Sender Email</label>
                            <frontend_type>text</frontend_type>
                            <backend_model>adminhtml/system_config_backend_email_address</backend_model>
                            <validate>validate-email</validate>
                            <sort_order>2</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </email>
                        <name translate="label">
                            <label>Sender Name</label>
                            <frontend_type>text</frontend_type>
                            <backend_model>adminhtml/system_config_backend_email_sender</backend_model>
                            <validate>validate-emailSender</validate>
                            <sort_order>1</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </name>
                    </fields>
                </ident_hr>
            </groups>
        </trans_email>
    </sections>
</config> 
```

在您的代码中，您可以通过以下方式获得例如技术支持数据

```
Mage::getStoreConfig('trans_email/ident_technical/email');
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-27T18:04:25.493

我找到了一个关于这个的博客。也许这很有用

[http://www.excellencemagentoblog.com/magento-sending-custom-emails](http://www.excellencemagentoblog.com/magento-sending-custom-emails)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-14T12:30:54.837

您可以创建一个新模块并在 etc 文件夹中创建一个 adminhtml 文件夹。在这里，创建一个 system.xml 并添加以下代码：

```
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Config:etc/system_file.xsd">
    <system>
        <section id="trans_email" translate="label" type="text" sortOrder="90" showInDefault="1" showInWebsite="1" showInStore="1">
            <tab>general</tab>
            <group id="ident_custom3" translate="label" type="text" sortOrder="6" showInDefault="1" showInWebsite="1" showInStore="1">
                <label>Custom Email 3</label>
                <field id="email" translate="label" type="text" sortOrder="2" showInDefault="1" showInWebsite="1" showInStore="1" canRestore="1">
                    <label>Sender Email</label>
                    <validate>validate-email</validate>
                    <backend_model>Magento\Config\Model\Config\Backend\Email\Address</backend_model>
                </field>
                <field id="name" translate="label" type="text" sortOrder="1" showInDefault="1" showInWebsite="1" showInStore="1" canRestore="1">
                    <label>Sender Name</label>
                    <backend_model>Magento\Config\Model\Config\Backend\Email\Sender</backend_model>
                    <validate>validate-emailSender</validate>
                </field>
            </group>
        </section>
    </system>
</config> 
```

这将在商店 -> 配置 -> 常规 -> 商店电子邮件地址中添加自定义电子邮件 3 部分。

# mysql - 我怎样才能得到我的表的最新记录

> ID：16055222
> 
> 赞同：3
> 
> 时间：2013-04-17T08:30:29.940
> 
> 标签：mysql

我如何从表格中获取最新日期。如果我告诉你我的意思，也许会更好。

这是我当前的表格输出

```
TransactionID          Title           Date
23132                  Locaton         2013-05-17 10:02:04
23131                  Novuel          2013-05-16 16:26:45
23130                  Novuel          2013-05-16 11:41:21
23129                  Locaton         2013-05-15 15:02:47
23128                  Mama Rosa       2013-05-15 14:42:44
23127                  Locaton         2013-05-14 18:21:32
23126                  Rohan           2013-05-14 12:46:56 
```

这是所需的输出：

```
TransactionID          Title           Date
23132                  Locaton         2013-05-17 10:02:04
23131                  Novuel          2013-05-16 16:26:45
23128                  Mama Rosa       2013-05-15 14:42:44
23126                  Rohan           2013-05-14 12:46:56 
```

如您所见，我只想要mysql中每个标题的最新日期。

这就是我迄今为止尝试获得所需输出的方式：

```
 ("SELECT t.transactionid,
       ct.title,
       max(t.transactiontime)
FROM exp_channel_titles AS ct
LEFT JOIN transactions AS t ON (ct.entry_id = t.restaurant_id)
WHERE t.transactiontime IN
    (SELECT max(t.transactiontime)
     FROM transactions AS t)
GROUP BY ct.entry_id
ORDER BY t.transactiontime DESC"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:57:55.953

```
select * from t t1
where 
NOT EXISTS (select transactionID 
                from t where t.Title=t1.title
                         and t.date>t1.date) 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!8/1c8bb/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:59:48.217

```
SELECT MAX(t.transactionid) AS TRANSACTION_ID, ct.title, MAX(t.transactiontime)
FROM exp_channel_titles as ct
LEFT JOIN transactions as t 
on (ct.entry_id = t.restaurant_id)
GROUP BY CT.TITLE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:23:32.530

试试这个：[w3schools](http://www.w3schools.com/sql/sql_func_last.asp)

不知道是不是你的意思

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T08:55:13.497

你可以试试这个：

```
SELECT t1.transactionid, ct.title, t1.transactiontime
FROM exp_channel_titles as ct
LEFT JOIN
(Select t.* from transactions as t 
INNER join (SELECT max(TransactionID) FROM transactions group by Title having     transactiontime=max(transactiontime) ) temp
ON temp.TransactionID= t.TransactionID) as t1
on ct.entry_id = t1.restaurant_id 
```

# extjs - 如何在设置记录数据时屏蔽 Extjs 网格并在设置后取消屏蔽？

> ID：16055223
> 
> 赞同：3
> 
> 时间：2013-04-17T08:30:35.407
> 
> 标签：extjs, grid, extjs4, extjs4.1

我在一个有 5 列的网格内一次显示 1500 到 2000 条记录。工具栏上有一个组合框。当会有组合更改时，我需要更新 2 列数据。为此，我正在阅读商店并设置每条记录的值（2 列）。为 2 列设置的任何值都来自另一个 JsonStore。

由于有超过 1000 条记录，它需要一些时间来更新 2 列数据。现在，我试图在组合更改和 unmsak() 设置所有记录后屏蔽网格。

设置所有记录值后如何取消屏蔽网格？

提前致谢！！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T08:42:50.440

您可以为此使用 setLoading() 方法：

```
grid.setLoading(true); // <-- show default load mask to grid
grid.setLoading('some text'); // <-- show load mask with your text
grid.setLoading(false); // <-- hide load mask 
```

# dictionary - Dictionary keys in python

> ID：16055224
> 
> 赞同：0
> 
> 时间：2013-04-17T08:30:51.057
> 
> 标签：dictionary, python-2.7, count

I am having trouble writing python code to print how many available seats there are in a row. I have a simple set of nested dictionaries - what I need to add is a test to see how many consecutive `keys == available`. the output needs to be something like, 'there is a block of 4 seats available together'.

```
seats = {'A': ['available', 'unavailable','available','available','available'],
         'B': ['unavailable', 'unavailable','available','available','available'],
         'C': ['available', 'unavailable','unavailable','available','available'],
         'D': ['available', 'unavailable','available','unavailable','unavailable']} 
```

Is there a very simple method of counting how many items in a row have the same value? I am literally brand new to programming, so I really need explanation of how code is working as well.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:37:40.263

One way -- which may seem over-powered for this problem, but it's a handy tool to learn -- is to use [itertools.groupby](http://docs.python.org/2/library/itertools.html#itertools.groupby). Its job is to group consecutive terms of a sequence together, which is exactly what you want to do here. For example, if we had a list made of up `1` and `2`:

```
>>> from itertools import groupby
>>> groupby([1,2,2,1,2,2,2,1,1,2])
<itertools.groupby object at 0x8ee793c>
>>> [(key, list(group)) for key, group in groupby([1,2,2,1,2,2,2,1,1,2])]
[(1, [1]), (2, [2, 2]), (1, [1]), (2, [2, 2, 2]), (1, [1, 1]), (2, [2])] 
```

We can make a list of key-value pairs where the groups are the value. (Really they're an iterable grouper object, so we have to take the `list` to materialize them to see them.)

So in your case:

```
>>> groupby(seats["A"])
<itertools.groupby object at 0x8ee7e64>
>>> [(k, list(g)) for k,g in groupby(seats["A"])]
[('available', ['available']), ('unavailable', ['unavailable']), ('available', ['available', 'available', 'available'])]
>>> [len(list(g)) for k,g in groupby(seats["A"]) if k == 'available']
[1, 3]
>>> max(len(list(g)) for k,g in groupby(seats["A"]) if k == 'available')
3 
```

With a little more work we could get the locations too, if those were significant. We can use `enumerate` to give the seats numbers:

```
>>> list(enumerate(seats["A"]))
[(0, 'available'), (1, 'unavailable'), (2, 'available'), (3, 'available'), (4, 'available')] 
```

And then group these instead, using the `key` parameter to groupby to tell it we want to group on the second term (index #1), the available/unavailable state, not the number:

```
>>> grouped = groupby(enumerate(seats["A"]), key=lambda x: x[1]) 
```

and then extract the contiguous available seats:

```
>>> avail = [list(g) for k,g in grouped if k == 'available']
>>> avail
[[(0, 'available')], [(2, 'available'), (3, 'available'), (4, 'available')]] 
```

From this we can do all sorts of things.

```
>>> min(avail, key=len) # one of the smallest groups
[(0, 'available')]
>>> max(avail, key=len) # one of the largest groups
[(2, 'available'), (3, 'available'), (4, 'available')]
>>> max(avail, key=len)[0][0] # start of largest
2
>>> next(g for g in avail if len(g) >= 2)
[(2, 'available'), (3, 'available'), (4, 'available')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:03:56.160

Here's a quick and dirty code block that should help get you started:

```
if rowChoice not in seats:  
    # Tell the user they entered a bad row and keep prompting them for input until it works

max_available = 0
available = 0  
for chair in seats[rowChoice]:  
    # When a seat is taken, update the maxium number of available seats and reset our counter  
    if chair != "available":  
        if available > max_available:  
            max_available = available  
        available = 0

    else:
        available += 1  

print "There is a maximum block of %d seats available" % (max_available) 
```

# php - 从 1 个表格插入 2 个表格。mysql事务？

> ID：16055225
> 
> 赞同：4
> 
> 时间：2013-04-17T08:30:51.570
> 
> 标签：php, mysql, database

用户将创建一篇文章并提交一张图片。

+文章将转到文章表。

+图像将转到图像表（以便可以在网站的其他区域使用）。

**有人建议我使用 TRANSACTIONS，但我遇到了错误。**

```
 $sql ='BEGIN INSERT INTO articles(article_title, article_text, article_date)
            VALUES (?, ?, NOW())
            INSERT INTO images(article_id, image_caption)
            VALUES(LAST_INSERT_ID(),?);
            COMMIT';

 $stmt = $conn->stmt_init();
    if ($stmt->prepare($sql)) {
    $stmt->bind_param('sss', $_POST['article_name'], $_POST['description'], $_POST['image_caption']);

        $OK = $stmt->execute();

        printf("%d Row inserted.\n", $stmt->affected_rows);

        $stmt->free_result();

    } else{
        echo "Failure- article not uploaded";
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T08:33:29.427

```
$mysqli->query("START TRANSACTION");
$stmt = $mysqli->prepare('INSERT INTO articles(article_title, article_text, article_date) VALUES (?, ?, NOW())');
$stmt->bind_param('ss', $_POST['article_name'], $_POST['description']);
$stmt->execute();
$stmt = $mysqli->prepare('INSERT INTO images (article_id, image_caption) VALUES(LAST_INSERT_ID(),?)');
$stmt->bind_param('s', $_POST['image_caption']);
$stmt->execute();
$stmt->close();
$mysqli->query("COMMIT"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:37:09.840

看起来您正在使用 PDO（很好！）。使用 PDO，您可以使用[beginTransaction()](http://php.net/manual/en/pdo.begintransaction.php)和[commit()轻松获取事务](http://www.php.net/manual/en/pdo.commit.php)

您的代码如下所示：

```
$pdo->beginTransaction();
// .. fire your 'normal' queries.
// .. and yet some more queries
$pdo->commit(); 
```

然后，我会亲自`INSERT`在两个单独的语句中编写单独的查询。在我看来更具可读性。

例子：

```
$pdo->beginTransaction();

$first = $pdo->prepare('INSERT INTO table (field, otherField) VALUES(?,?)');
$second = $pdo->prepare('INSERT INTO table (field, otherField) VALUES(?,?)');

$first->execute(array( .. your data (values) .. ));
$second->execute(array( .. your data (values) .. ));

$pdo->commit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:09:14.270

```
$sql ='START TRANSACTION;
       INSERT INTO articles (article_id,article_title, article_text, article_date) VALUES (NULL,?, ?, NOW());
       INSERT INTO images (article_id, image_caption) VALUES(LAST_INSERT_ID(),?);
       COMMIT;'; 
```

# c# - 如何在数据网格中获取 2 行或在 Winforms 中使用哪个控件。所以代替 1 行使用 2 行

> ID：16055226
> 
> 赞同：1
> 
> 时间：2013-04-17T08:30:52.463
> 
> 标签：c#, winforms

我喜欢在数据网格中有 2 行（行），它们是在一起的。所以通常在网格中，每行有 1 行，下一行/行是独立的......但我喜欢有 2 行。例如，第一行名称、地址和第二行一些金额或日期..所以每 2 行都在一起..

我需要在 Winforms 中使用什么控件来实现这一点......我是新手，所以我更喜欢简单的解决方案......

例如下面我喜欢使用（金额字段应显示在 Datagrid 的下一行）

```
DocNumber   DocType     DueDate        SupplierNo      SupplierName

Amount     VATAmount   Total Amount

10000       SA          01-05-2012       1025          Supplier-A

12.25       0.25        12.25

10001       SA          12-12-2014       1095          Supplier-B

42.25       5.25        47.00

10002       SB          31-11-2012       1099          Supplier-C

152.25      55.25       192.00 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:44:03.860

您可以在指定行顺序的数据（例如 DataTable）中添加一个额外的列，然后将其隐藏在您的控件中（例如 DataGridView）。然而，这有几个缺点，首先想到的是，如果您单击列标题对网格内容进行排序，它将不会保留行的顺序。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:07:23.800

好吧，在我看来，如果我没看错的话，您需要“分组”您的数据。但是，如果是这种情况，就我的理解而言，恐怕 Winforms DGV 默认不支持此功能。我找到了这个链接，但没有尝试过，看起来是一个可能的解决方法/破解它。

[Winforms Datagridviews 的组功能](http://blogs.vbcity.com/hotdog/archive/2008/12/19/9226.aspx)

从好的方面来说，有很多第 3 方选项，例如：

[Telerik 控制](http://www.telerik.com/developer-productivity-tools.aspx?gclid=CKfFj-HU0bYCFc3HtAodqVUAvA)

或者我最喜欢的人事：

[DevExpress 控件](http://www.devexpress.com/)

请注意，尽管您可以进行试用，但您可能需要为发布付费，但值得一看！

希望这可以帮助！

# c# - “从数据库更新模型”向导正在删除重命名的 POCO 类的映射

> ID：16055227
> 
> 赞同：0
> 
> 时间：2013-04-17T08:31:01.680
> 
> 标签：c#, oracle, entity-framework, visual-studio-2012, ef-database-first

我正在使用 EF 5 构建一个应用程序来与现有的 Oracle 数据库通信。我不允许更改数据库架构的任何部分。我已经使用 VS2012 向导从数据库中生成了我的模型，并且所有类都以其对应的 Oracle 命名。

数据库中对象的命名是 QUITE_UGLY_AND_INCONSISTENT，所以我想重命名 POCO 类和属性。我可以通过 EDM Designer 轻松做到这一点。结果，我得到了整齐命名的类和属性名称，它们映射到数据库中的 UGLY_NAMED 表。我可以成功执行查询，一切顺利。正是我想要的。

但是，当我需要向模型添加新表时，我会运行“从数据库更新模型”向导并检查要导入的其他表。它突然在“删除”选项卡下列出了我重命名（但仍然正确映射）的类，说它在数据库中找不到它们。当我单击完成时，我现有的类未映射，我必须手动将每个属性重新映射到其相应的 DB 列...或者从版本控制回滚到 EDMX 文件的先前版本。

我正在寻找*您*认为对这个问题最优雅的解决方案，因为我需要应用程序尽可能地可维护。我强烈支持一种方法，它可以让我从数据库中自动生成新类，同时保留现有的重命名对象及其映射。

*   我是否忽略了一些阻止更新模型向导删除我现有映射的方法？
*   我应该使用不同的方法来重命名生成的类吗？
*   我是否应该让生成的类保持不变，而是构造一个命名合理的包装类，这些包装类会暴露给我的应用程序的其余部分？
*   我应该避免自动生成，而是采用代码优先的方法吗？这是一个非常不利的选择，因为我需要尽可能少地花费在手动模型编码和映射上的时间。添加对象将是一项非常频繁的任务。
*   我是否应该完全使用不同的 ORM..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:31:34.590

I discovered the culprit myself: running the "Generate Database from Model" wizard due to a recommendation in an article I read somewhere. It changed all the model's underlying table and column names to SQL Server standard names ([dbo].[Customers].[CustomerID] etc.).

# php - 如何使用 PHP 在 FTP 上下载最新的文件？

> ID：16055235
> 
> 赞同：9
> 
> 时间：2013-04-17T08:31:19.050
> 
> 标签：php, ftp

在 FTP 服务器上有一些文件。此服务器上的任何时间都在上传新文件。我想下载最后一个文件。如何从该服务器获取最后上传的文件？所有文件都有不同的名称。

我使用以下脚本下载一个文件。

```
$conn = ftp_connect("ftp.testftp.com") or die("Could not connect");
ftp_login($conn,"user","pass");
ftp_get($conn,"target.txt","source.txt",FTP_ASCII);
ftp_close($conn); 
```

提前致谢 ！！！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T09:13:44.583

没有办法确定哪个文件是最新的，因为没有“上传时间”属性之类的东西。您没有过多提及 FTP 服务器，但如果您对上传有一定程度的管理，您可以确保在上传时设置上次修改时间。这是否最终起作用取决于您的 FTP 服务器和可能的客户端。

假设您的修改时间等于上传时间，您可以执行以下操作：

```
// connect
$conn = ftp_connect('ftp.addr.com');
ftp_login($conn, 'user', 'pass');

// get list of files on given path
$files = ftp_nlist($conn, '');

$mostRecent = array(
    'time' => 0,
    'file' => null
);

foreach ($files as $file) {
    // get the last modified time for the file
    $time = ftp_mdtm($conn, $file);

    if ($time > $mostRecent['time']) {
        // this file is the most recent so far
        $mostRecent['time'] = $time;
        $mostRecent['file'] = $file;
    }
}

ftp_get($conn, "target.txt", $mostRecent['file'], FTP_ASCII);
ftp_close($conn); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T08:40:01.587

```
ftp_rawlist($conn); 
```

提取最新的文件名并获取它。

# unix - 请帮助修复 awk 脚本

> ID：16055238
> 
> 赞同：0
> 
> 时间：2013-04-17T08:31:23.597
> 
> 标签：unix, awk

我需要在编辑我的 awk 脚本时寻求您的帮助。这是原始版本：

```
BEGIN { printf ("CRYST1 200.000 200.000 200.000 90.00 90.00 90.00 P 1 1\n")
maxatoms=1000
natom=0
found_struct = 0
found_bond = 0
}
{
if( NF == 5 )
{
foundff=0
natom++
fftype[natom]="UNKNOWN"
if ($1 ~ /CT/)
{
fftype[natom] = "C"
foundff=1
}
else if ($1 ~ /OH/)
{
fftype[natom] = "O"
foundff=1
}
else if ($1 ~ /HC/)
{
fftype[natom] = "H"
foundff=1
}
else if ($1 ~ /N/)
{
fftype[natom] = "N"
foundff=1
}

else if ($1 ~ /H1/)
{
fftype[natom] = "H"
foundff=1
}
else if ($1 ~ /HO/)
{
fftype[natom] = "H"
foundff=1
}
else if ($1 = "C")
{
fftype[natom] = "C"
foundff=1
}
else if ($1 = "O")
{
fftype[natom] = "O"
foundff=1
}

next

x[natom] = $1
y[natom] = $2
z[natom] = $3

if (foundff == 0)
printf("PROBLEM : Atom ff type %s not known\n", $6)
}

}

END {
for (iatom=1; iatom <= natom; iatom++)
{
printf("HETATM %d %2s %d %14.9f %14.9f %14.9f\n" ,
iatom, fftype[iatom], iatom, x[iatom], y[iatom], z[iatom])
}
printf ("END\n")
} 
```

这是我正在使用的文件类型。

```
0 3 186 200 75202
timestep 500 186 0 3 0.002000 1.000000
40.0000000000 0.0000000000 0.0000000000
-0.0000000034 40.0000000000 0.0000000000
-0.0000000034 -0.0000000034 40.0000000000
CT_1 1 12.011000 0.061000 1.087513
-1.961325738 1.828501682 -8.933652557
CT_1 2 12.011000 0.061000 0.789711
-3.851025437 3.495427316 -10.05849230
CT_1 3 12.011000 0.061000 0.581330
-5.804493575 4.589489777 -8.369482861 
```

等

我想把它作为输出：

```
CRYST1 200.000 200.000 200.000 90.00 90.00 90.00 P 1 1
HETATM 1 C 1 -1.961325738 1.828501682 -8.933652557
HETATM 2 C 2 -3.851025437 3.495427316 -10.05849230
HETATM 3 C 3 -5.804493575 4.589489777 -8.369482861 
```

等

但是坐标并没有很好地恢复（CT_1 1 12.011000 0.061000 1.087513 之后的下一行）。您能否看一下并提出任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:41:13.580

我不会`getline`尝试这个：

```
awk '/^(H[1C0]|N|C|O)/{printf "HETATM %d %s %d ",++i,substr($1,1,1),i;p=1;next}p' file
HETATM 1 C 1 -1.961325738 1.828501682 -8.933652557
HETATM 2 C 2 -3.851025437 3.495427316 -10.05849230
HETATM 3 C 3 -5.804493575 4.589489777 -8.369482861 
```

只需添加`BEGIN`块以打印标题，您就应该被排序。

```
BEGIN { print "CRYST1 200.000 200.000 200.000 90.00 90.00 90.00 P 1 1" } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:11:20.850

不太清楚您想如何处理“原子”，但`getline`如果找到 a ，我可能会建议使用该命令获取下一行`CT_1`。因此，如果找到一行，您可以立即处理。从描述中不清楚第一个字段是否包含 a`_`和其后的数字。我假设其中有一个`_`。

像这样的东西：

```
awk 'BEGIN { print "CRYST1 200.000 200.000 200.000 90.00 90.00 90.00 P 1 1" }
NR < 6 {next}
/^(CT|OH|HC|N|H1|HO|C|O)_/{a=$1;getline;++n;print "HETATM",n,substr(a,1,1),n,$1,$2,$3;next}
{ print "Bad line! ("$0")" }
' <<EOT
0 3 186 200 75202
timestep 500 186 0 3 0.002000 1.000000
40.0000000000 0.0000000000 0.0000000000
-0.0000000034 40.0000000000 0.0000000000
-0.0000000034 -0.0000000034 40.0000000000
CT_1 1 12.011000 0.061000 1.087513
-1.961325738 1.828501682 -8.933652557
CT_1 2 12.011000 0.061000 0.789711
-3.851025437 3.495427316 -10.05849230
CT_1 3 12.011000 0.061000 0.581330
-5.804493575 4.589489777 -8.369482861
OH_1 3 12.011000 0.061000 0.581330
-5.804493575 4.589489777 -8.369482861
HC_1 3 12.011000 0.061000 0.581330
-5.804493575 4.589489777 -8.369482861
QW_1 3 12.011000 0.061000 0.581330
-5.804493575 4.589489777 -8.369482861
EOT 
```

输出：

```
CRYST1 200.000 200.000 200.000 90.00 90.00 90.00 P 1 1
HETATM 1 C 1 -1.961325738 1.828501682 -8.933652557
HETATM 2 C 2 -3.851025437 3.495427316 -10.05849230
HETATM 3 C 3 -5.804493575 4.589489777 -8.369482861
HETATM 4 O 3 -5.804493575 4.589489777 -8.369482861
HETATM 5 H 3 -5.804493575 4.589489777 -8.369482861
Bad line! (QW_1 3 12.011000 0.061000 0.581330)
Bad line! (-5.804493575 4.589489777 -8.369482861) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:28:15.687

```
 perl -ane ' if ($printNow == 1) {printf("HETATM %d %2s %d %14.9f %14.9f %14.9f\n" ,$i,$type,$i,$F[0],$F[1],$F[2]);$printNow =0;}; if (scalar @F == 5 and (/^CT/ or /^OH/ or /^HC/ or /^N/)) {$i++; $printNow =1 ; $type =substr($_,0,1)}' filename 
```

希望这有效 +

# android - 如何从 Api 获取数据到列表视图中？

> ID：16055240
> 
> 赞同：4
> 
> 时间：2013-04-17T08:31:29.470
> 
> 标签：android, android-activity

当我试图从另一个 Api 类调用主要活动的方法“刷新”时，该方法被调用并且它还显示了一些致命错误。并且它没有更改适配器值。任何人都可以给出任何想法来清除它。 ?

```
package com.example.hotspot;

import com.example.hotspot.HotspotApi;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.ListView;
import android.widget.TextView;

public class HotSpot extends Activity {
    TextView textview;
    ListView listview;
    HotspotAdapter adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.hot_spot);
        textview = (TextView) findViewById(R.id.textView1);
        listview = (ListView) findViewById(R.id.listView1);
        adapter = new HotspotAdapter(this);
        listview.setAdapter(adapter);
        new HotspotApi(adapter).execute();

    }

    public void refresh() {

        System.out.println("refresh() is called");
        adapter.notifyDataSetChanged();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.hot_spot, menu);
        return true;
    }

} 
```

热点.java

```
package com.example.hotspot;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import com.example.hotspot.HotspotModel;
import com.example.hotspot.HotspotAdapter;

import android.os.AsyncTask;

public class HotspotApi extends AsyncTask<Void, Integer, Void> implements
        Icommon {

    public Boolean IsServerErr = false;
    private JSONArray response_array;
    String url = "some url";
    HotspotAdapter adapter;
    HotSpot hot;

    public HotspotApi(HotspotAdapter adapter) {

        this.adapter = adapter;
    }

    @Override
    protected Void doInBackground(Void... arg0) {
        // TODO Auto-generated method stub
        getresult();
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub

        hot=new HotSpot();
        hot.refresh();
        super.onPostExecute(result);

    }

    void getresult() {

        InternetManager manager = new InternetManager(url);
        String category_jsonresponse = manager.URLRequest();
        if (!manager.IsServerConn) {
            IsServerErr = true;
        }
        if (category_jsonresponse != null) {
            System.out.println("Hotspot_jsonresponse" + category_jsonresponse);
            try {
                response_array = new JSONArray(category_jsonresponse);
                for (int i = 1; i < response_array.length(); i++) {
                    JSONObject image_object = response_array.getJSONObject(i);
                    HotspotModel h = new HotspotModel();
                    h.setId(image_object.getString("id") == null ? ""
                            : image_object.getString("id"));
                    h.setContent(image_object.getString("content") == null ? ""
                            : image_object.getString("content"));
                    h.setImg(image_object.getString("img") == null ? ""
                            : image_object.getString("img"));
                    h.setName(image_object.getString("name") == null ? ""
                            : image_object.getString("name"));
                    arraylist.add(h);

                }
                System.out.println("HotspotModelsize() is " + arraylist.size());

            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    }

} 
```

热点适配器.java

```
package com.example.hotspot;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class HotspotAdapter extends BaseAdapter implements Icommon{
    private TextView textview;
    private View view;
    ImageView imageview;
    private LayoutInflater inflater;

    public HotspotAdapter(Context context ){
        inflater = LayoutInflater.from(context);

    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return arraylist.size();
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return arraylist.get(arg0);
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int arg0, View arg1, ViewGroup arg2) {

        if (arg1 == null) {
            view = inflater.inflate(R.layout.custom_layout, null);
        } else {
            view = arg1;
        }

        textview = (TextView) view.findViewById(R.id.txt_content);
        textview.setText(arraylist.get(arg0).getName());

        return view;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:26:17.627

热=新热点（）；?? 你不能那样用！HotSpot 是一个activity，应该被Framework 调用，例如activitymanager。或者使用 startActivity() 来显示一个活动。

刷新方法 (adapter.notifyDataSetChanged();) 将导致 UI 刷新。但是，hot = new HotSpot() 不会调用 onCreated() 方法，这意味着 UI 没有创建。所以它肯定会导致致命错误。

我永远不会看到有人用 new 运算符调用 Activity。

您应该参考有关如何使用活动和适配器的通用流程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:26:42.093

在您的`HotSpotApi`班级中，您正在创建一个新`HotSpot`活动，这似乎是错误的。我猜你是从互联网上获取 json 数据并将其加载到`listview`.

解决方案：

在 HotspotApi 中更改以下而不是调用活动方法：

```
@Override
    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
       super.onPostExecute(result);
       adapter.notfiyDatasetChanged();
    } 
```

希望这会帮助你。

# umbraco - 发布时出错

> ID：16055244
> 
> 赞同：0
> 
> 时间：2013-04-17T08:31:37.897
> 
> 标签：umbraco

从客户端检测到潜在危险的 Request.Form 值 (ctl00$body$prop_bodytext="

Dit kontoudtog vi...")。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.ArgumentException：从客户端检测到潜在危险的 Request.Form 值（ctl00$body$prop_bodytext="

Dit kontoudtog vi...")

有人知道这个错误是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:06:46.270

这与`requestValidation`您的 web.config 中的设置有关。

`<httpRuntime requestValidationMode="2.0"/>`在 web.config 中设置 的值。

有关更多信息，请参阅[此链接](http://www.codeproject.com/Tips/297679/A-potentially-dangerous-Request-Form-value-was-det)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:35:39.873

正如另一个问题所暗示的，快速解决方法是更改​​验证模式，允许提交任何值。

您应该了解这很可能是因为您的控件提交的值。ASP.NET 将其检测为可能的[脚本注入攻击](http://en.wikipedia.org/wiki/Code_injection)。

此错误是为捕获此类攻击而生成的异常，因此禁用它可能不是最佳策略。相反，请尝试找出导致异常的提交字符串值的部分。这样，您可以将其捕获在表单回发中。

在 ASP.NET 的早期，这种攻击是留给开发人员来陷阱的。但是，这会导致不良的安全情况，从而损害 ASP.NET 的声誉。

# c# - 使用 c# JSON.NET 将 Javascript JSON.stringfy 字符串转换为对象

> ID：16055245
> 
> 赞同：0
> 
> 时间：2013-04-17T08:31:41.457
> 
> 标签：c#, json, windows-8, json.net

我正在开发一个 Windows 8 应用程序，并且我有一些将序列化对象存储到漫游设置中的 javascript，即：

```
var object = [{"id":1}, {"id":2}]
roamingSettings.values["example"] = JSON.stringify(object); 
```

我也有应用程序的 ac# 部分（用于运行后台任务），它需要读取该 JSON，并将其转换为一个对象，以便我可以对其进行迭代。这就是我遇到一些问题的地方，我正在使用 JSON.NET 来完成这项工作，但是我遇到的每一件事都出现了错误：

```
// this looks like "[{\"id\":1},{\"id\":2}]"
string exampleJSON = roaming.Values["example"].ToString();
// dont know if this is correct:
List<string> example = JsonConvert.DeserializeObject<List<string>>(exampleJSON ); 
```

这给出了一个错误：

> 读取字符串时出错。意外标记：StartObject。路径“[0]”，第 1 行，位置 2。

所以我不知道该怎么做，过去几个小时我一直在研究它，而且我对 c# 很不熟悉，所以求助于 stackoverflow ;D

在此先感谢您的帮助:)

安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:50:06.067

Json.Net 有一个不错的方法`DeserializeAnonymousType`。无需声明临时类。

```
string json = "[{\"id\":1},{\"id\":2}]";
var anonymous = new []{new{id=0}};
anonymous = JsonConvert.DeserializeAnonymousType(json,anonymous);

foreach (var item in anonymous)
{
    Console.WriteLine(item.id);
} 
```

您甚至可以使用`dynamic`关键字

```
dynamic dynObj = JsonConvert.DeserializeObject(json);
foreach (var item in dynObj)
{
    Console.WriteLine(item.id);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:40:52.967

您正在尝试将 JSON 数组解析为字符串列表，但这是行不通的。您提供的 JSON 对象实际上是一个对象列表，其中包含一个名为“id”的整数属性。

也许尝试只使用该属性创建一个类（例如 MyClass），然后反序列化为 List。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T08:44:32.583

您的 json 包含具有`id`属性的对象集合，如下所示：

```
class IdObject {
    public int id { get; set; }
} 
```

然后你可以这样做：

```
JsonConvert.DeserializeObject<List<IdObject>>(exampleJSON); 
```

因为这个`IdObject`类有一个属性`id`来匹配你的 json 序列化值，所以它会被映射回来。

# vb.net - 如何在记事本中从流中打开文件

> ID：16055246
> 
> 赞同：0
> 
> 时间：2013-04-17T08:31:42.127
> 
> 标签：vb.net, stream, xmldocument, openprocess

要打开一个文件，我可以这样做

```
Process.Start(fileName) 
```

为此，该文件必须存在于文件系统中。现在我使用一个 XmlDocument 对象，并希望在记事本等外部程序中打开内容。我将 xml 内容保存在流中，但不知道如何在另一个程序中显示它。

```
Dim MyXmlDocument As New XmlDocument

'do something with the document

MyXmlDocument.Save(MyXmlStream) 
```

如果不可能，我必须先保存它，然后在第二步打开它。我只想避免将文件保存在文件系统中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:56:11.970

我认为有必要保存在文件系统中。但是，您可以创建一个临时文件并在完成文件后执行删除命令。这样它就不会弄乱`FileSystem`. 该`AppData`文件夹是一个很好的起点。

# android - Android 4 模拟器中的日历

> ID：16055247
> 
> 赞同：2
> 
> 时间：2013-04-17T08:31:41.903
> 
> 标签：android, android-emulator, sync, google-calendar-api

对于开发，我想在 Android 4 模拟器中使用日历，但“要显示的日历”选项为空，我无法添加带有日历的帐户。

我找到了几种解决方案，但都没有奏效：

## m.google.com

[就像将m.google.com 的](https://stackoverflow.com/questions/7959847/how-to-use-and-test-the-android-4-0-calendar-api-in-the-emulator)帐户添加为服务器一样，但它一直告诉我“您无权同步此服务器。请联系您的服务器管理员以获取更多信息。” 因为它对[新设备禁用](https://productforums.google.com/forum/#!category-topic/gmail/iphone-ipad-or-ipod/oGeHuvTPtRM)。

## 卡尔达夫

在上面的链接中，他们正在谈论使用 CalDAV，但是没有 appstore 怎么办？我安装了[caldav4j](https://code.google.com/p/caldav4j/) apk 来使用 CalDAV，但它没有运行。logcat 告诉我`java.lang.NoClassDefFoundError: android.provider.Calendar$Events`。

## 添加谷歌帐户

如果我添加一个普通的 Google 帐户，我只能选择要同步的邮件，日历会丢失。

## 安卓 x86

也许我可以通过使用这里建议的[Android x86](http://www.android-x86.org/)作为[性能增强器](https://stackoverflow.com/a/6058689/956397)来避免这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:12:01.400

让它使用[AndroVM](http://androvm.org/blog/)工作。

1.  下载[VirtualBox](https://www.virtualbox.org/wiki/Downloads)和带有gapps 的[AndroVM 映像](http://androvm.org/blog/download/)。喜欢`androVM_vbox86p_4.1.1_r6.1-20130222-gapps-houdini-flash.ova`。`vbox86p`用于电话和`vbox86tp`具有电话功能的桌子。
2.  按照[配置教程](http://androvm.org/blog/blog/2012/11/14/androvm-configuration-tutorial/)：导入虚拟机，激活网络
3.  启动 VM 并在设置过程中输入您的 gmail 帐户。
4.  使用 Eclipse 进行调试：运行 AndroVM Config 应用程序（在移动桌面上）以获取 IP 并在主机上：`adb connect [IP]`

硬件键：ESC = 返回，F1 = 菜单，Pos1 = 主页/解锁，End = 锁定

顺便说一句：与普通模拟器相比，AndroVM 的速度令人震惊。

# java - 如何使用 TreeCursor 在 SWT 树中选择单个单元格

> ID：16055251
> 
> 赞同：0
> 
> 时间：2013-04-17T08:31:58.583
> 
> 标签：java, eclipse, swt

首先，我很惊讶`TreeCursor.setSelection(TreeItem row, int column)`没有选择任何东西。然后我查看了这个方法的来源，发现他们调用了`Tree.indexOf()`. 当然，如果它不是树的直接子项，它就不会找到树项。我不明白这个类的用法吗？是否可以选择不是树的直接子级的树项？我几乎不相信选择功能是如此有限。我的意思是一棵树就是一棵树，通常有一个根和深层次......

```
import org.eclipse.debug.internal.ui.viewers.model.TreeCursor;
import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Tree;
import org.eclipse.swt.widgets.TreeColumn;
import org.eclipse.swt.widgets.TreeItem;

public class Test {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Display display = new Display();
        Shell shell = new Shell(display);
        shell.setLayout(new FillLayout());

        Tree tree = new Tree(shell, SWT.V_SCROLL | SWT.H_SCROLL | SWT.BORDER | SWT.SINGLE | SWT.FULL_SELECTION);

        tree.setHeaderVisible(true);
        TreeColumn column1 = new TreeColumn(tree, SWT.LEFT);
        column1.setText("Column 1");
        column1.setWidth(200);
        TreeColumn column2 = new TreeColumn(tree, SWT.CENTER);
        column2.setText("Column 2");
        column2.setWidth(200);
        TreeColumn column3 = new TreeColumn(tree, SWT.RIGHT);
        column3.setText("Column 3");
        column3.setWidth(200);
        TreeColumn column4 = new TreeColumn(tree, SWT.RIGHT);
        column4.setText("Column 4");
        column4.setWidth(200);

        TreeItem root = new TreeItem(tree, SWT.NONE);
        root.setText(new String[] { "root", "a1", "b1", "c1" });

        TreeItem rootChild1 = new TreeItem(root, SWT.NONE);
        rootChild1.setText(new String[] { "rootChild1", "a2", "b2", "c2" });

        TreeItem rootChild2 = new TreeItem(root, SWT.NONE);
        rootChild2.setText(new String[] { "rootChild2", "a2", "b2", "c2" });

        TreeCursor cursor = new TreeCursor(tree, SWT.NONE);
//      cursor.setSelection(root, 2);
        cursor.setSelection(rootChild1, 2);

        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
        display.dispose();
    }
} 
```

如果取消注释“cursor.setSelection(root, 2);”行 您将看到选择按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:50:07.393

好的，我找到了解决方案。我从 to 切换`org.eclipse.debug.internal.ui.viewers.model.TreeCursor`到`org.eclipse.swt.custom.TreeCursor`（自 Eclipse 3.8 起就存在）并且问题得到了解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:55:11.483

我不太确定我是否理解您的问题，但此代码适用于我并选择一个`TreeItem`不是根的直接子级的代码：

```
public static void main(String[] args)
{
    Display display = Display.getDefault();
    final Shell shell = new Shell(display);
    shell.setText("StackOverflow");
    shell.setLayout(new FillLayout());

    Tree tree = new Tree(shell, SWT.NONE);

    TreeItem parent = new TreeItem(tree, SWT.NONE);
    parent.setText("root");

    for(int i = 0; i < 10; i++)
    {
        TreeItem child = new TreeItem(parent, SWT.NONE);
        child.setText("child " + i);

        parent = child;
    }

    tree.setSelection(parent);

    shell.pack();
    shell.open();
    while (!shell.isDisposed())
    {
        if (!display.readAndDispatch())
            display.sleep();
    }
    display.dispose();
} 
```

运行时是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/wG3L2.png)

# android - 如何测试 Android Facebook 移动安装广告

> ID：16055252
> 
> 赞同：2
> 
> 时间：2013-04-17T08:31:58.957
> 
> 标签：android, facebook, mobile, installation, ads

我们可以测试我们为我的 android 应用程序设置的 Facebook 移动安装广告是否真的有效？有沙箱可以测试吗？

如果设置后我们获得了 1000 次点击而没有安装，那是不是我们的设置有问题，我们如何确定哪里出了问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-05T12:23:34.080

您从 Facebook Audience Network 生成 Facebook 广告 ID。因此，您使用 Facebook 帐户为您的广告生成 ID。您需要将该 Facebook 帐户登录到您的移动 Facebook 应用程序，然后在您的移动设备中测试移动应用程序。您将在您的应用程序中看到 Facebook 广告。

这将起作用。

# javascript - 如何更改按钮单击时的图像

> ID：16055253
> 
> 赞同：0
> 
> 时间：2013-04-17T08:32:03.093
> 
> 标签：javascript, jquery, html, css

我想通过按按钮更改图像。我有两个按钮，一个是下一个，另一个是上一个。当下一个按钮按下新图像时必须显示，上一个按钮按下最后一个图像应该再次出现。但我不能这是正确的。如何使用 jquery 做到这一点？

```
$(document).ready(function () {
$('#image2').hide();
$('#image3').hide();
$(".arrow").click(function () {
        $('#image1').hide();
        $('#image2').show();
    });
}); 
```

html是

```
<div class="imageDiv">
   <div><img src="potraits.jpg" class="image" id="image1"/></div>
   <div><img src="pot.jpg" class="image" id="image2"/></div>
   <div><img src="potri.jpg" class="image" id="image3"/></div>
   <div><input type="image" src="arrow.gif" class="arrow"/></div>
   <div><input type="image" src="leftarrow.gif" class="leftarrow"/></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:14:23.877

[http://jsfiddle.net/S6t9R/4/](http://jsfiddle.net/S6t9R/4/)

```
$(document).ready(function () {
    $('img:not(:first)').hide();
    $(".arrow").click(function () {
        $('img:not(:last):visible').
        hide().
        parent().
        next().
        children().
        show();
    });
    $(".leftarrow").click(function () {
        $('img:not(:first):visible').
        hide().
        parent().
        prev().
        children().
        show();
    });
}); 
```

基本上，可见的图像现在被隐藏了，下一个/上一个图像现在是可见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:37:23.607

如何更改图像 src？

JavaScript：

```
var images = [
    "alpha.jpg",
    "beta.jpg",
    "gamma.jpg"
];
var actImg = 0; // index of actual image

$(document).ready(function () {
    $(".leftarrow").click(function () {
        if (actImg <= 0) { // if first image is displayed, jump to last
            actImg = images.length - 1;
        }
        else {
            actImg--;
        }
        $('#onlyimage').attr('src', images[actImg]);
    });
    $(".rightarrow").click(function () {
        if (images.length <= actImg) { // if last image is displayed, jump to first
            actImg = 0;
        }
        else {
            actImg++;
        }
        $('#onlyimage').attr('src', images[actImg]);
    });
}); 
```

HTML：

```
<div class="imageDiv">
    <div><img src="alpha.jpg" class="image" id="onlyimage"/></div>
    <div><input type="image" src="leftarrow.gif" class="leftarrow"/></div>
    <div><input type="image" src="rightarrow.gif" class="rightarrow"/></div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:37:44.377

也许在这种情况下，您可以隐藏/显示图像周围的 div 元素。如果您以您的方式隐藏图像，则 div 本身在文档中仍然是“可见的”，这可能会给您带来不想要的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T08:40:37.557

```
Change your script,

 $(document).ready(function () {
  $('#secondimage').hide();
  $('#thirdimage').hide();
 $(".arrow").click(function () {
    $('#firstimage').hide();
    $('#secondimage').show();
  });
$(".leftarrow").click(function () {
    $('#firstimage').show();
    $('#secondimage').hide();
  });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T09:13:38.097

```
$(document).ready(function () {
    that = this;
    this.arrayImages = $('.image');
    this.currentPosition = 0;
    $('#secondimage').hide();
    $('#thirdimage').hide();
    $(".arrow").click(function () {
        if (that.currentPosition < that.arrayImages.length) {
            that.arrayImages[that.currentPosition].hide();
            that.arrayImages[that.currentPosition+1].show();
            that.currentPosition++;
        }
    });
}); 
```

对于左箭头，它只是另一种方式（：

# python - 如何在 PyCharm Django 项目中轻松切换到另一个 SVN 分支

> ID：16055254
> 
> 赞同：0
> 
> 时间：2013-04-17T08:32:04.520
> 
> 标签：python, django, svn, version-control, pycharm

我有一个 PyCharm Django 项目，使用 SVN 进行版本控制。项目本身是通过“Checkout from version control”功能创建的，项目的根是存储库的根，所以它包括主干和分支。
我的问题是：
- 如何在功能分支之间轻松切换？
- 也许我错过了一些东西 - 在这种情况下，使用 PyCharm 和 SVN 的好风格是什么？

ps
在我的例子中，经常创建分支——为每个特定的功能集创建一个新的分支，并且通过完整性它们重新集成到主干中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:32:39.043

以这种风格结束：

*   首先，我创建了一个目录，我将在其中放置我打算使用的项目版本
*   然后我在该目录中签出一个分支或主干
*   做需要的改变
*   犯罪
*   然后，如果我需要切换到另一个分支或主干，我在“VCS”菜单（[链接到文档](http://www.jetbrains.com/pycharm/webhelp/update-project-dialog-subversion.html)）中调用“更新项目”，然后在更新/切换字段中指定另一个分支。对于完全切换，“深度”必须是“无穷大”，对于文件的全面递归扫描，并且必须检查选择器“强制更新”是否拒绝本地修改。
    ![在此处输入图像描述](https://i.stack.imgur.com/MYBLZ.png)
*   如果我需要合并 - 我切换到中继，然后在“VCS”菜单中使用“合并自”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:14:43.490

您可以使用多个 pycharm 窗口打开主干/分支。项目根目录应该是主干/分支根目录。

通常情况下，您不需要经常在分支之间切换。

# sql-server-2008 - 复制 2008 发布者到 2008r2 订阅者

> ID：16055261
> 
> 赞同：0
> 
> 时间：2013-04-17T08:32:27.853
> 
> 标签：sql-server-2008, sql-server-2008-r2, replication, database-replication

复制机制是否可以处理这种拓扑，其中 SQL SRV 2008 是发布者，并将向 2008 r2 订阅者提供发布？

提前谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:57:42.630

是的，此拓扑将与事务复制一起使用。它不适用于合并复制。

在复制拓扑[中使用多个版本的 SQL Server](http://technet.microsoft.com/en-us/library/ms143241%28v=sql.105%29.aspx)：

> 对于所有类型的复制，Distributor 版本不得早于 Publisher 版本。（通常，分发者与发布者是同一个实例。）
> 
> 对于事务复制，事务发布的订阅者可以是发布者版本的两个版本中的任何版本。例如，SQL Server 2000 发布者可以有 SQL Server 2008 订阅者，而 SQL Server 2008 发布者可以有 SQL Server 2000 订阅者。
> 
> 对于合并复制，合并发布的订阅服务器可以是不晚于发布服务器版本的任何版本。有关早期版本兼容性的详细信息，请参阅本主题后面的“合并出版物的兼容性级别”。有关 SQL Server 各个版本支持的复制功能的详细信息，请参阅 SQL Server 2008 R2 版本支持的功能。

# bash - 如何控制 xargs 参数的放置？

> ID：16055262
> 
> 赞同：0
> 
> 时间：2013-04-17T08:32:31.227
> 
> 标签：bash, xargs

我有一个 Bash 脚本，它接受一个带有源代码的输入文件夹和一个输出目录作为参数。我希望能够编译源文件夹中的文件，然后将它们发送到输出文件夹。问题是`xargs`在参数末尾添加了读取的源文件，我希望在其中添加输出文件夹。如何控制`xargs`参数的位置？这就是我想要做的：`find $source -name '*.c' | xargs gcc <files> $output`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:28:32.143

这可以通过以下方式实现：

```
find $source -name '*.c' | xargs gcc -o $output 
```

这指定了`gcc`在给它源文件列表之前的输出。

这个问题不能通过改变 xargs 参数的位置来解决，就像你这样做：

```
find $source -name '*.c' | xargs -I source gcc source -o $output 
```

假设您从以下位置获取`source/a.c`和`source/b.c`返回，将会运行的`find`内容是：

```
gcc source/a.c -o $output
gcc source/b.c -o $output 
```

我不相信这是你所追求的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:40:32.170

此任务也可以仅使用 Bash 来解决：

```
#!/bin/sh

if [ $# -ne 2 ]; then
    echo "usage: $0 [srcdir] [bindir]"
    exit 1
fi

src_dir="${1%/}"
bin_dir="${2%/}"

for src in "$src_dir"/*.c; do
    bin="$(basename "${src%.c}")"
    gcc "$src" -o "$bin_dir/$bin"
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:14:41.357

使用 GNU 并行：

```
find $source -name '*.c' | parallel gcc {} -o $output/{.} 
```

或者，如果您想要 {} 中的所有文件：

```
find $source -name '*.c' | parallel -Xj1 gcc {} -o $output 
```

了解有关 GNU Parallel 的更多信息：[https ://www.youtube.com/playlist?list=PL284C9FF2488BC6D1](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)

10秒安装：

```
wget pi.dk/3 -qO - | sh -x 
```

# python - Python 3 mySQL.connector frozen import lib

> ID：16055274
> 
> 赞同：1
> 
> 时间：2013-04-17T08:33:14.507
> 
> 标签：python, mysql

I am new to Python 3 and still learning but I need help. The first part of the script is:

`import mysql.connector #this is failing as a .py but works in the shell`

`cnx = mysql.connector.connect(user='root', password='mypassword', host='my_ip_address', database'name_of_database') #this works in the shell`

`cursor = cnx.cursor()`

I have tried the above line by line in the Python shell which works fine: I can import the connector to connect to my database and fetch back data. But when I save the script as a .py the `import mysql` connector does not work. I do have the Path variable setup and when I installed the mySQL connector it placed the relevant files in my Python install path \Lib\site-pacakges folder.

I get the following error:

```
>Traceback (most recent call last):
> File "<frozen importlib._bootstrap>", line 1518, in _find_and_load_unlocked
AttributeError: 'module' object has no attribute '__path__' 
```

During handling of the above exception, another exception occurred:

```
>Traceback (most recent call last):
>  File "C:\Users\Paul\Desktop\scripts\mysql.py", line 2, in <module>
>    import mysql.connector
>  File "C:\Users\Paul\Desktop\scripts\mysql.py", line 2, in <module>
>    import mysql.connector
>ImportError: No module named 'mysql.connector'; mysql is not a package 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-11T07:48:52.487

我和你有同样的问题，我在另一个你问同样问题的网站上找到了答案。我在这里粘贴答案作为参考。

> 发生上述情况是因为您的脚本名为“mysql.py”，实际上与“mysql”包的名称相同。Python 正确报告 ImportError。只需将您的“mysql.py”重命名为其他名称，例如“mysqlhacks.py”。

取自[https://answers.launchpad.net/myconnpy/+question/226992](https://answers.launchpad.net/myconnpy/+question/226992)

# javascript - HTML 模板 JavaScript polyfills

> ID：16055275
> 
> 赞同：19
> 
> 时间：2013-04-17T08:33:14.590
> 
> 标签：javascript, html, w3c, polyfills, html5-template

我正在寻找最符合标准/面向未来的前端 HTML 模板方法。

HTML 模板存在一个相对较新的[W3C 草案规范](https://dvcs.w3.org/hg/webcomponents/raw-file/tip/spec/templates/index.html)，例如：

```
<template id="mytemplate">
    <img src="" alt="great image">
    <div class="comment"></div>
</template> 
```

有谁知道是否已经存在任何好的[JavaScript polyfills](http://remysharp.com/2010/10/08/what-is-a-polyfill/)以使 `<template>`元素以跨浏览器的方式可用？最好符合本标准。

* * *

### 困难

根据[HTML5Rocks 指南](http://www.html5rocks.com/en/tutorials/webcomponents/template/)，这些模板具有以下属性：

*   “它的内容在被激活之前实际上是惰性的”
*   “脚本不运行，图像不加载，音频不播放，”
*   “内容被认为不在文档中”
*   "模板可以放置在`<head>`, `<body>`, 或`<frameset>`"

我认为完全使用 JavaScript polyfill 实现所有这四个属性是不可能的，所以任何解决方案都只是部分的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-10-15T02:49:55.463

Xotic750 提供了一个可靠的 polyfill，它通过改变 HTML 元素来工作——但是如果以后将任何新模板添加到 DOM 中，它就会失败，并且越来越不鼓励改变（在可以避免的情况下）。

相反，我建议在您使用模板时引入“polyfill”行为。将此函数添加到您的 JS：

```
function templateContent(template) {
    if("content" in document.createElement("template")) {
        return document.importNode(template.content, true);
    } else {
        var fragment = document.createDocumentFragment();
        var children = template.childNodes;
        for (i = 0; i < children.length; i++) {
            fragment.appendChild(children[i].cloneNode(true));
        }
        return fragment;
    }
} 
```

使用对模板元素的引用调用该函数。它将提取内容，并返回一个 documentFragment，然后您可以将其附加到另一个元素（或对模板内容执行任何其他操作）。像这样：

```
var template = document.querySelector("template#my-template");
var content = templateContent(template);
someElm.appendChild(content); 
```

现在，另一个答案没有提到它，但你可能想要一些 CSS 来隐藏`<template>`元素。

```
template { display: none; } 
```

这是一个将所有内容组合在一起的[CodePen](http://codepen.io/anon/pen/YyrEpv)。

现在，这将在原生支持该元素的浏览器和不支持该`<template>`元素的浏览器中正常工作。与另一个答案类似，它不是一个完美的 polyfill，因为它不会使模板变得惰性（这将是复杂、缓慢且容易出错的）。但它足以让我在生产中使用。

如果您有任何疑问或问题，请发表评论，我会相应地进行修改。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-17T09:08:37.560

有一个[jsfiddle](http://jsfiddle.net/brianblakely/h3EmY/)演示了这样的 polyfill。

```
<script>
    // Shim so we can style in IE6/7/8
    document.createElement('template');
</script>

<template id="example">
    <h1>
        This is template content.
    </h1>
    <p>
        It's really great.
    </p>
</template>

<div id="target">
    <p>
        This is regular old content.
    </p>
</div>

/* POLYFILL */
(function templatePolyfill(d) {
    if('content' in d.createElement('template')) {
        return false;
    }

    var qPlates = d.getElementsByTagName('template'),
        plateLen = qPlates.length,
        elPlate,
        qContent,
        contentLen,
        docContent;

    for(var x=0; x<plateLen; ++x) {
        elPlate = qPlates[x];
        qContent = elPlate.childNodes;
        contentLen = qContent.length;
        docContent = d.createDocumentFragment();

        while(qContent[0]) {
            docContent.appendChild(qContent[0]);
        }

        elPlate.content = docContent;
    }
})(document);

/* EXAMPLE */
var elExample = document.getElementById('example'),
    elTarget = document.getElementById('target');

elTarget.appendChild(elExample.content.cloneNode(true)); 
```

至于库，我不知道他们是否支持它，但尝试一下[Modernizr](http://modernizr.com/)和[Initializr](http://www.initializr.com/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-29T15:38:53.933

另一种可能性是[Web Components polyfills](https://github.com/webcomponents/webcomponentsjs)，其中包含一个用于`<template>`标签的 polyfill。请记住，*webcomponents.js 不仅*包含`<template>`标签，还包含 polyfill。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-17T13:43:23.350

另一种可能性是 Neovov 的[Template-Element-Polyfill](https://github.com/neovov/template-element-polyfill)。

这是一个专用的`<template>`polyfill，你可以在 Github 上找到。

# php - 从 mink 访问 Symfony 2 的 DI 容器

> ID：16055277
> 
> 赞同：0
> 
> 时间：2013-04-17T08:33:19.723
> 
> 标签：php, symfony, behat, mink

我正在使用 behat 和 mink 扩展来运行功能测试。我有一个 FeatureContext，扩展了 MinkContext。

我正在尝试将自定义参数传递给我的上下文，但我不确定如何。我的想法是将它们放在 behat.yml 中，然后使用 Symfony 的容器访问它们，但我不知道如何从我的 FeatureContext 访问它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:48:37.040

[正如文档所说](http://docs.behat.org/guides/7.config.html#context)：

> parameters 是一个简单的数组，在实例化时将传递给上下文类的构造函数，这发生在每个场景之前。

这意味着在您定义的参数`behat.yml`：

```
default:
    context:
        parameters:
            my_parameter: my_value 
```

通过构造函数传递给您的上下文：

```
class FeatureContext extends RawMinkContext
{
    private $parameters = array();

    public function __construct(array $parameters)
    {
        $this->parameters = $parameters;
    }
} 
```

如果您打算更改 Symfony 容器中的参数，您应该在 Symfony 配置文件之一中进行（您应该在测试环境中运行 behat，这样配置与 dev 和 prod 是分开的）。

# javascript - 在集合中更改 div 类

> ID：16055278
> 
> 赞同：0
> 
> 时间：2013-04-17T08:33:21.817
> 
> 标签：javascript, jquery

我有以下 html，我想更改 onclick 周围的 div。例如：

最初的

```
<div class="box1">Story 1</div>
<div class="box2">Story 2</div>
<div class="box2">Story 3</div> 
<div class="box2">Story 4</div> 
```

当我点击故事 2 时，它变成

```
<div class="box2">Story 1</div>
<div class="box1">Story 2</div>
<div class="box2">Story 3</div> 
<div class="box2">Story 4</div> 
```

所以 .. 无论哪个 div 被点击，都会获得 box1 的属性，而其他的将成为 box2。可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T08:37:01.240

使用方法的另一种可能的解决方案[`toggleClass()`](http://api.jquery.com/toggleClass/)：

```
$("div").on("click", function() {
    $(this)
        .siblings(".box1")
        .andSelf()
        .toggleClass("box1 box2");
}); 
```

**演示：http:** [//jsfiddle.net/x8vxh/](http://jsfiddle.net/x8vxh/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:35:42.243

可能是这样的：

```
$('.box1, .box2').click(function() {
    $('.box1').addClass('box2').removeClass('box1');
    $(this).addClass('box1').removeClass('box2');
}); 
```

`box`为所有框设置一个类，添加和删除一个类可能会更整洁，`active`而后一个类可以覆盖前者的属性。可以省去切换两个不同课程的麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:37:51.297

尝试这个

```
$("div").on("click",function(){
  $(".box1").prop("class","box2");
  $(this).prop("class","box1");
}); 
```

[http://jsbin.com/igugop/3/edit](http://jsbin.com/igugop/3/edit)

# hadoop - 在 NFS 上安装 Hadoop

> ID：16055279
> 
> 赞同：1
> 
> 时间：2013-04-17T08:33:22.490
> 
> 标签：hadoop

首先，我安装了 Hadoop (0.15.2) 并设置了一个包含 3 个节点的集群：NameNode、DataNode 和 JobTracker 各一个。所有守护程序都已启动并正在运行。但是当我发出任何命令时，都会出现上述错误。例如，当我执行 copyFromLocal 时，我收到以下错误：

我错过了什么吗？

更多详细信息：我正在尝试在 NFS 文件系统上安装 Hadoop。我已经安装了 1.0.4 版本并尝试运行它但无济于事。1.0.4 版本不启动数据节点。并且数据节点的日志文件是空的。因此我切换回 0.15 版本，它至少启动了所有守护进程。

我相信问题是由于底层 NFS 文件系统，即所有数据节点和主节点使用相同的文件和文件夹。但我不确定是否真的如此。但是我看不出有什么理由不能在 NFS 上运行 Hadoop（在适当地设置了配置参数之后）。

目前我正在尝试并弄清楚是否可以根据各个机器名称为不同的机器设置不同的名称和数据目录。

配置文件：（hadoop-site.xml）

```
 <property>
 <name>fs.default.name</name>
 <value>mumble-12.cs.wisc.edu:9001</value>
 </property>
 <property>
 <name>mapred.job.tracker</name>
 <value>mumble-13.cs.wisc.edu:9001</value>
 </property>
 <property>
 <name>dfs.replication</name>
 <value>1</value>
 </property>
 <property>
 <name>dfs.secondary.info.port</name>
 <value>9002</value>
 </property>
 <property>
 <name>dfs.info.port</name>
 <value>9003</value>
 </property>
 <property>
 <name>mapred.job.tracker.info.port</name>
 <value>9004</value>
 </property>
 <property>
 <name>tasktracker.http.port</name>
 <value>9005</value>
 </property> 
```

使用 Hadoop 1.0.4 时出错（DataNode 未启动）：

```
2013-04-22 18:50:50,438 INFO org.apache.hadoop.ipc.Server: IPC Server handler 7 on     9001, call addBlock(/tmp/hadoop-akshar/mapred/system/jobtracker.info, DFSClient_502734479, null) from 128.105.112.13:37204: error: java.io.IOException: File /tmp/hadoop-akshar/mapred/system/jobtracker.info could only be replicated to 0 nodes, instead of 1
java.io.IOException: File /tmp/hadoop-akshar/mapred/system/jobtracker.info could only be replicated to 0 nodes, instead of 1 
```

使用 Hadoop 0.15.2 时出错：

```
[akshar@mumble-12] (38)$ bin/hadoop fs -copyFromLocal lib/junit-3.8.1.LICENSE.txt input

13/04/17 03:22:11 WARN fs.DFSClient: Error while writing.
java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:189)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at java.net.SocketInputStream.read(SocketInputStream.java:203)
    at java.io.DataInputStream.readShort(DataInputStream.java:312)
    at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.endBlock(DFSClient.java:1660)
    at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.close(DFSClient.java:1733)
    at org.apache.hadoop.fs.FSDataOutputStream$PositionCache.close(FSDataOutputStream.java:49)
    at org.apache.hadoop.fs.FSDataOutputStream.close(FSDataOutputStream.java:64)
    at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:55)
    at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:83)
    at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:140)
    at org.apache.hadoop.fs.FileSystem.copyFromLocalFile(FileSystem.java:826)
    at org.apache.hadoop.fs.FsShell.copyFromLocal(FsShell.java:120)
    at org.apache.hadoop.fs.FsShell.run(FsShell.java:1360)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
    at org.apache.hadoop.fs.FsShell.main(FsShell.java:1478)
13/04/17 03:22:12 WARN fs.DFSClient: Error while writing.
java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:189)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at java.net.SocketInputStream.read(SocketInputStream.java:203)
    at java.io.DataInputStream.readShort(DataInputStream.java:312)
    at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.endBlock(DFSClient.java:1660)
    at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.close(DFSClient.java:1733)
    at org.apache.hadoop.fs.FSDataOutputStream$PositionCache.close(FSDataOutputStream.java:49)
    at org.apache.hadoop.fs.FSDataOutputStream.close(FSDataOutputStream.java:64)
    at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:55)
    at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:83)
    at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:140)
    at org.apache.hadoop.fs.FileSystem.copyFromLocalFile(FileSystem.java:826)
    at org.apache.hadoop.fs.FsShell.copyFromLocal(FsShell.java:120)
    at org.apache.hadoop.fs.FsShell.run(FsShell.java:1360)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
    at org.apache.hadoop.fs.FsShell.main(FsShell.java:1478)
13/04/17 03:22:12 WARN fs.DFSClient: Error while writing.
java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:189)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at java.net.SocketInputStream.read(SocketInputStream.java:203)
    at java.io.DataInputStream.readShort(DataInputStream.java:312)
    at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.endBlock(DFSClient.java:1660)
    at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.close(DFSClient.java:1733)
    at org.apache.hadoop.fs.FSDataOutputStream$PositionCache.close(FSDataOutputStream.java:49)
    at org.apache.hadoop.fs.FSDataOutputStream.close(FSDataOutputStream.java:64)
    at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:55)
    at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:83)
    at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:140)
    at org.apache.hadoop.fs.FileSystem.copyFromLocalFile(FileSystem.java:826)
    at org.apache.hadoop.fs.FsShell.copyFromLocal(FsShell.java:120)
    at org.apache.hadoop.fs.FsShell.run(FsShell.java:1360)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
    at org.apache.hadoop.fs.FsShell.main(FsShell.java:1478)
copyFromLocal: Connection reset 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T23:16:36.367

我能够使用 1.1.2 版让 Hadoop 在 NFS 上运行。它可能适用于其他版本，但我不能保证任何事情。

如果您有 NFS 文件系统，那么每个节点都应该有权访问该文件系统。fs.default.name 告诉 Hadoop 要使用的文件系统 URI，因此它应该指向本地磁盘。我假设您的 NFS 目录安装在 /nfs 的每个节点上。

在 core-site.xml 你应该定义：

```
<property>
  <name>fs.default.name</name>
  <value>file:///</value>
</property>

<property>
  <name>hadoop.tmp.dir</name>
  <value>/nfs/tmp</value>
</property> 
```

在 mapred-site.xml 你应该定义：

```
<property>
  <name>mapred.job.tracker</name>
  <value>node1:8021</value>
</property>

<property>
  <name>mapred.local.dir</name>
  <value>/tmp/mapred-local</value>
</property> 
```

由于 hadoop.tmp.dir 指向 nfs 驱动器，因此 mapred.system.dir 和 mapreduce.jobtracker.staging.root.dir 的默认位置指向 nfs 驱动器上的位置。它可能会在保留 mapred.local.dir 的默认值的情况下运行，但它应该指向本地文件系统，因此为了安全起见，您可以将其放在 /tmp 中。

您不必担心 hdfs-site.xml。此配置文件在您启动 namenode 时使用，但所有内容都分布在 nfs 驱动器上，您不应该运行 HDFS。

现在您可以在 jobtracker 节点上运行 start-mapred.sh 并运行 hadoop 作业。不要运行 start-all.sh 或 start-dfs.sh，因为它们会启动 HDFS。如果您运行多个指向同一个 NFS 目录的 DataNode，那么一个 DataNode 将锁定该目录，而其他 DataNode 将因为无法获得锁定而关闭。

我测试了配置：

```
bin/hadoop jar hadoop-examples-1.1.2.jar wordcount /nfs/data/test.text /nfs/out 
```

请注意，您需要指定输入和输出位置的完整路径。

我也试过：

```
bin/hadoop jar hadoop-examples-1.1.2.jar grep /nfs/data/loremIpsum.txt /nfs/out2 lorem 
```

它给了我与我在 Standalone 中运行它时相同的输出，所以我认为它执行正确。

以下是有关 fs.default.name 的更多信息：http: [//www.greenplum.com/blog/dive-in/usage-and-quirks-of-fs-default-name-in-hadoop-filesystem](http://www.greenplum.com/blog/dive-in/usage-and-quirks-of-fs-default-name-in-hadoop-filesystem)

# linux - How to make find -name to return error if no file found

> ID：16055281
> 
> 赞同：2
> 
> 时间：2013-04-17T08:33:31.170
> 
> 标签：linux, unix, command, find, execvp

I have tried really hard but could not figure out a way to print an error if

`find -name \"filename"`

does not find any file. The code I am using so far is as follows:

```
 char *argv[];
       argv[0]="find";
       argv[1]="-name";
       argv[2]=strcat(str,"\abc.txt"); 
       argv[3]=NULL;
       pid_t pid;
       pid= fork();

   if(pid==0)
   {
    execvp(argv[0],argv);
   printf("file does not exist");
    } 
```

But I can't print my print statement because `find -name \"filename"` never returns an error.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-22T22:10:38.857

您可以使用shell条件，例如：

```
[ "$(find /opt -name '*.txt')" ] && echo Found || echo Not found 
```

这基本上与以下内容相同：

```
[ "$(find /opt -name '*.txt')" '!=' '' ] && echo Found || echo Not found 
```

如果您使用的是 GNU find，请尝试使用`-quit`.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-17T09:48:17.693

尝试使用：

```
find -f PATTERN 
```

使用此构造后，您将获得结果代码：

```
echo $? 
```

如果 PATTERN 不存在，则此结果代码必须为 1（或在某些情况下不等于 0）

# svg - svg 上的 Smil 动画

> ID：16055285
> 
> 赞同：1
> 
> 时间：2013-04-17T08:33:37.880
> 
> 标签：svg, svg-animate

向大家问好，

我最近发现自己正在阅读以下文章 ( [http://apike.ca/prog_svg_smil.html](http://apike.ca/prog_svg_smil.html) )，更具体地说，是“动画元素 - animateMotion”。

有没有办法“告诉”移动的“标记”在路径的特定部分（段）上加速或减速，或者它的速度总是由“dur”属性定义（以秒为单位）？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:13:22.257

控制动画时间是由 svg 动画元素的`calcMode`、和 属性提供的`keyTimes`，例如. 基本上，您在规范化时间线上指定点，并告诉 svg 如何将它们映射到规范化时间线上测量的进度。您还可以指定如何在给定的支持点之间进行插值。对于流畅的动画，您会选择.`keySplines``keyPoints``animateMotion``calcMode="spline"`

相关参考资料是：

*   [SVG（动画运动）](http://www.w3.org/TR/SVG/animate.html#AnimateMotionElement)
*   [SVG（关键点）](http://www.w3.org/TR/SVG/animate.html#KeyPointsAttribute)
*   [微笑（计算模式）](http://www.w3.org/TR/2001/REC-smil-animation-20010904/#AnimFuncCalcMode)
*   [微笑（关键时间）](http://www.w3.org/TR/2001/REC-smil-animation-20010904/#KeyTimesAttribute)

出于演示目的，请查看动画线跟踪演示（在线[here](http://stackx.collapsar.bplaced.net/data/sx/so/smil/so.smil.svg)，单击黑条；示例取自[here](http://apike.ca/prog_svg_smil.html)，添加了时序控制）：

```
<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
    "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve"
         width="200" height="200"
         viewBox="0 0 200 200"  >

    <!-- Matthew Bystedt http://apike.ca 2012 -->

    <!-- Pattern Definition -->
    <defs>
        <pattern id="rulerPattern" patternUnits="userSpaceOnUse"
                x="0" y="0" width="10" height="10"
                viewBox="0 0 10 10" >

            <line x1="0" y1="0" x2="10" y2="0" stroke="lightblue" fill="none" stroke-dasharray="2,2" />
            <line x1="0" y1="0" x2="0" y2="10" stroke="lightblue" fill="none" stroke-dasharray="2,2" />
        </pattern>

        <marker id="marker2" viewBox="0 0 10 10" refX="1" refY="5" 
            markerUnits="strokeWidth" orient="auto"
              markerWidth="4" markerHeight="3">
            <polyline points="0,0 10,5 0,10 1,5" fill="darkgreen" />
        </marker>

    </defs>

    <!-- Background -->
    <rect x="0" y="0" width="100%" height="100%" fill="url(#rulerPattern)" stroke="black" />

    <!-- Path Line Example -->

    <path id="myAniPath" d="M10,150 A15 15 180 0 1 70 140 A15 25 180 0 0 130 130 A15 55 180 0 1 190 120 A15 10 170 0 1 10 150" stroke="lightgreen" stroke-width="2" fill="none" marker-mid="url(#marker2)"  />

    <rect x="-10" y="-5" width="20" height="10" fill="none" stroke="black" >
        <animateMotion  begin="startButton.click" dur="10s" calcMode="spline" keyTimes="0; 1" keySplines=".75 0 .25 1" repeatCount="1" rotate="auto" fill="freeze">
            <mpath xlink:href="#myAniPath" />
        </animateMotion>
    </rect>

    <rect id="startButton" x="20" y="20" width="60" height="20" fill="green" />

    <line stroke="black" stroke-width="2" x1="20" y1="20" x2="20" y2="40" >
        <animate begin="startButton.click" attributeName="x1" from="20" to="80" dur="10s" repeatCount="1" fill="freeze" />
        <animate begin="startButton.click" attributeName="x2" from="20" to="80" dur="10s" repeatCount="1" fill="freeze" />
    </line>
</svg> 
```

# mysql - Finding record that has MAX time-stamp on inner join

> ID：16055286
> 
> 赞同：1
> 
> 时间：2013-04-17T08:33:38.123
> 
> 标签：mysql

I may be looking at this all wrong, but I have this problem in MySQL: I have a table that can have multiple results and I want to get the max timestamp.

I have this query at present:

```
LEFT JOIN heartbeat_activity hbco ON jid.field_application_job_id_nid = hbco.nid_target
AND hbco.uid_target = n.uid
AND hbco.message_id = 'heartbeat_call_in_confirm'
LEFT JOIN heartbeat_activity hbci ON jid.field_application_job_id_nid = hbci.nid_target
AND hbci.uid_target = n.uid
AND hbci.message_id = 'heartbeat_call_in_requested'
LEFT JOIN heartbeat_activity hbrj ON jid.field_application_job_id_nid = hbrj.nid_target
AND hbrj.uid_target = n.uid
AND hbrj.message_id = 'heartbeat_call_in_rejected' 
```

On the above, `joins` through `heartbeat_activity` can have multiple records with differing timestamps, so I would like to do something like:

```
SELECT DISTINCT MAX(TIMESTAMP) AS TIMESTAMP,
                nid_target,
                uid_target
FROM heartbeat_activity
WHERE message_id = 'heartbeat_call_in_confirm'
GROUP BY uaid 
```

But doing this on each join is expensive, as it's selecting on all the records. What's the best way of going about this?

# windows - Windows Batch file for checking if a file exists

> ID：16055288
> 
> 赞同：0
> 
> 时间：2013-04-17T08:33:44.020
> 
> 标签：windows, file, batch-file

I have tried to find an answer to my question on StackOverflow but I can only find partial answers and I can't glue them together. :)

I have tried to put a short easy batch together but I can't seem to get it to work quite as I'd like to.

```
for /f %%i in (hosts.txt) do (

IF not EXIST "\\%%i\c$\installer\install.bat" echo %%i >> c:\e\nofile.txt) 
```

I have a hosts.txt filled with IPs, and I know that on about 50% of the computers that file is on that computer. But all the same all of the IPs turn up in my nofile.txt. What am I missing?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:20:43.137

如果您在权限和访问权限方面遇到问题，您可以尝试以其他用户身份运行批处理文件。有关更多信息，请参阅 superuser.com 上的此帖子：[https ://superuser.com/questions/105913/run-as-for-a-bat-file](https://superuser.com/questions/105913/run-as-for-a-bat-file)

# delphi - Delphis ZLib Interface not initialized

> ID：16055296
> 
> 赞同：1
> 
> 时间：2013-04-17T08:34:18.540
> 
> 标签：delphi, delphi-xe2, indy, zlib

When working with Delphi XE2 I have the following problem:

When I try to compress a response from `IdHTTPServer` that should be sent to a client, I am not able to do this. The `IdCompressorZLib.CompressHTTPDeflate` or `IdCompressorZLib.CompressStream` functions always stop with the error `ZLib Error (-6)`. This means that Delphi does not find a library with the expected version. `ZLIB_VERSION` is set to 1.2.5 in my environment.

My question is what I have to do to get it working?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:10:26.920

好的，我已经启动了 XE2 并且可以重现您报告的内容。Embarcadero 在为 XE2 构建 Indy 时似乎犯了错误。链接对象的 zlib 版本与传递给 zlib 初始化函数的 zlib 版本不匹配。你不能用他们发货的东西来解决这个缺陷。

在我看来，您的选择：

1.  修复随 XE2 提供的 Indy 版本。这将涉及修改 Indy 源文件并修复版本不匹配。然后将修改后的 Indy 单元链接到您的应用程序。不是不可能，但可能有点尴尬。
2.  使用从 Indy 项目 repo 获得的最新版本的 Indy。然后，您将拥有最新和最伟大的 Indy。
3.  使用不同的 zlib 库。例如，众所周知，Delphi 附带的 zlib 库可以工作。当我在评论中提出建议时，我知道您对此有疑问，但是我已经毫无问题地使用了它。
4.  使用不同版本的 Delphi。不是一个很好的选择，但为了完整起见，我将其包括在内。

# c++ - 编译器生成的移动构造函数的行为是什么？

> ID：16055297
> 
> 赞同：35
> 
> 时间：2013-04-17T08:34:24.887
> 
> 标签：c++, c++11, move-semantics

是否`std::is_move_constructible<T>::value == true`暗示`T`有一个可用的移动构造函数？如果是这样，它的默认行为是什么？

考虑以下情况：

```
struct foo {
    int* ptr;
};

int main() {
    {       
        std::cout << std::is_move_constructible<foo>::value << '\n';
        foo f;
        f.ptr = (int*)12;
        foo f2(std::move(f));
        std::cout << f.ptr << ' ' << f2.ptr << '\n';
    }
    return 0;
} 
```

输出是：

```
1
0000000C 0000000C 
```

我认为`f.ptr`应该是`nullptr`。所以在这种情况下，

1.  `f2`移动构建了吗？
2.  如果是这样，不应该使右值无效吗？
3.  我怎么知道一个类的实例是否可以正确移动构造（使旧实例无效）？

（我正在使用 VS11。）

## 更新

移动构造函数的默认行为与复制构造函数相同，是否正确？如果是真的，

1.  我们总是期望一个移动 ctor 窃取被移动对象的资源，而默认的行为并不像预期的那样，那么拥有一个默认的移动 ctor 有什么意义呢？
2.  我怎么知道一个类是否有一个自定义的移动构造函数（可以保证行为正确）？

当我声明一个时，它似乎`foo f2(std::move(f));`调用了复制 ctor，请参阅：

```
struct foo {
    int* ptr;
    foo() {}
    foo(const foo& other) {
        std::cout << "copy constructed\n";
    }
};

int main() {
    {       
        std::cout << std::is_move_constructible<foo>::value << '\n';
        foo f;
        foo f2(std::move(f));
    }
    system("pause");
    return 0;
} 
```

现在输出是：

```
1
copy constructed 
```

如果`foo`有一个移动构造函数，那么不会`foo f2(std::move(f))`调用它吗？

所以现在我的问题是：如何知道一个类是否有一个移动 ctor，如果有，我该如何明确地调用它？

## 我想做的是……</h2>

```
template<typename T, bool has_move_ctor>
struct MoveAux;

template<typename T>
struct MoveAux<T, true> {
    static void doMove(T* dest, T* src) {
        new(dest) T(std::move(*src)); //move ctor
    }
};

template<typename T>
struct MoveAux<T, false> {
    static void doMove(T* dest, T* src) {
        new(dest) T(*src); //copy ctor
        src->~T();
    }
};

template<typename T>
inline doMove(T* dest, T* src) {
    MoveAux<T,/*a trait*/>::doMove(dest, src);
} 
```

所以我认为`std::is_move_constructible<T>::value`可以传递给模板，而现在我看到这个特征只关心是否`T t(T())`是一个有效的表达式，它可能会调用`T::T(const T&)`. 现在假设这`T`是一个自定义类，那么我希望上面的模板表现得像：

1.  如果我不声明移动 ctor，我希望该模板方法调用`MoveAux<T,false>::doMove`.
2.  如果我声明了一个，我需要它调用`MoveAux<T,true>::doMove`.

有可能完成这项工作吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-17T08:38:32.553

> 是否`std::is_move_constructible<T>::value == true`暗示`T`有一个可用的移动构造函数？

移动构造函数或复制构造函数。请记住，复制构造的操作满足操作移动构造的所有要求，甚至更多。

在标准术语中，`MoveConstructible`对象是一个对象，其表达式的评估：

```
T u = rv; 
```

`u`相当于`rv`建造前的价值；移出`rv` *后*的状态*未指定*。但是由于它是未指定的，这意味着状态甚至可能与被移动`rv`之前*的*状态相同：换句话说，`u`可能*是*`rv`.

事实上，标准将概念定义为对概念`CopyConstructible`的*改进*`MoveConstructible`（所以一切都是`CopyConstructible`，`MoveConstructible`但反之亦然）。

> 如果是这样，它的默认行为是什么？

隐式生成的移动构造函数的行为是对生成它的类型的数据成员执行逐个成员移动。

根据 C++11 标准的第 12.8/15 段：

> 非联合类的隐式定义的复制/移动构造函数`X`执行**其基类和成员的成员复制/移动**。[注意：非静态数据成员的*大括号或等号初始化器被忽略。*另见 12.6.2 中的示例。——尾注]

而且：

> 1 -`f2`移动构建？

是的。

> 2 - 如果是这样，不应该使右值无效吗？

移动*指针*与复制指针相同。所以没有失效发生，也不应该发生。如果您想要一个移动构造函数，使移动对象处于特定状态（即将指针数据成员设置为`nullptr`），您必须编写自己的 - 或将此责任委托给某些智能指针类，例如`std::unique_ptr`.

请注意，“*无效*”一词在这里并不完全正确。移动构造函数（以及移动赋值运算符）旨在使移出对象处于*有效*（但未指定）状态。

换句话说，需要尊重类不变量 - 并且应该可以在从对象上调用对其状态没有任何先决条件的操作（通常是销毁和赋值）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T08:38:53.170

> std::is_move_constructible::value == true 是否暗示 T 有一个可用的移动构造函数？

不，它声明您可以[采用对象类型的右值表达式并从中构造一个对象](http://en.cppreference.com/w/cpp/concept/MoveConstructible)。这是否使用移动构造函数或复制构造函数与此特征无关。

> f2 move 构造了吗？

是的。

> 如果是这样，不应该使右值无效吗？

不，这不是运动的运作方式。

> 我怎么知道一个类的实例是否可以正确移动构造（使旧实例无效）？

这不是存在的“正确移动构造”的任何定义。如果你想“使旧的无效”，那么你必须自己做。

移动构造通常*不*保证旧对象的状态。它将处于有效但未定义的状态。这种状态很可能“和以前一样”。指针的移动构造与复制指针相同。

如果您想在移动后“无效”，那么您需要编写自己的移动构造函数来明确执行此操作。

> （我正在使用 VS11）

*那么你根本*就没有编译器生成的移动构造函数。没关系，因为指针的移动和复制构造函数都做同样的事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T13:08:50.320

> 移动构造函数的默认行为与复制构造函数相同，是否正确？如果这是真的

不，这是错误的。这仅适用于基元。它类似于复制构造函数。

默认生成的复制构造函数按照声明的顺序调用其所有成员的**复制构造函数**

但是默认生成的move构造函数会按照声明的顺序调用其所有成员的**move构造函数**

现在下一个问题是，原语`int`s `float`s的复制/移动构造函数`pointer`是做什么的？

答：他们只是复制值（复制和移动构造函数）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T08:54:30.110

请注意，Visual Studio 2012 / VC++11 不*支持*编译器生成的移动构造函数；事实上，请考虑[*“Visual C++ 11 中的 C++11 特性”*](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)博客文章（强调我的）中的这句话：

> 右值引用 v3.0 添加了新规则，可以在特定条件下自动生成移动构造函数和移动赋值运算符。这**不会在 VC11 中实现**，它将继续遵循 VC10**从不自动生成移动构造函数/移动赋值运算符**的行为。

使用**raw pointers**，您必须自己定义移动构造函数，手动清除旧的“moved-from”指针：

```
class Foo 
{
public:

    // Move constructor
    Foo(Foo&& other)
        : m_ptr(other.m_ptr) // copy pointer value
    {
        // Clear out old "moved-from" pointer, to avoid dangling references
        other.m_ptr = nullptr;
    }

private:
    int* m_ptr;
}; 
```

相反，如果您使用类似的智能**指针**`std::unique_ptr`，则正确定义了移动构造函数，您可以调用`std::move`：

```
class Foo 
{
public:

    // Move constructor
    Foo(Foo&& other)
        : m_ptr(std::move(other.m_ptr)) // move from other, 
                                        // old pointer automatically cleared
    {
    }

private:
    std::unique_ptr<int> m_ptr;
}; 
```

使用*自动生成的*移动构造函数，您不必显式定义自定义移动构造函数，如果您可以按*成员*移动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T08:39:15.090

n3376 12.8/15

> 非联合类 X的隐式定义的复制/**移动构造函数执行其基类和成员的按****成员**复制/**移动** 。

> 每个基本或非静态数据成员都以适合其类型的方式复制/移动：
> 
> — 如果成员是一个数组，每个元素直接用 x 的对应子对象初始化；
> 
> — 如果成员 m 具有右值引用类型 T&&，则使用 static_cast(xm) 直接初始化它；
> 
> — 否则，基数或成员直接用 x 的相应基数或成员初始化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-29T19:41:15.987

> 如果 foo 有一个移动构造函数，那么 foo f2(std::move(f)) 不会调用它吗？当您提供复制构造函数时，您不会获得默认的移动构造函数。添加以下行以获取它（并注意更改）。foo(foo&& ifm)=默认值；

# jsf-2 - Wrong JSF 2 ID Chaining

> ID：16055299
> 
> 赞同：9
> 
> 时间：2013-04-17T08:34:32.720
> 
> 标签：jsf-2

**Situation**

JavaServer Faces Version: 2.1.6

I got a parent composite component with two nested cc. One of them contains a HtmlPanelGroup, which has a component binding. I use that binding to programmatically add HtmlCommandLink-Objects to the HtmlPanelGroup.

Let's call some IDs:

*   PARENT for the parent cc
*   CHILD_FIRST for the first child cc, nested in PARENT
*   CHILD_SECOND for the second child cc, nested in PARENT
*   GROUP for the PanelGroup, nested in CHILD_SECOND
*   LINK_1 for the first HtmlCommandLink-Object, progammatically added to GROUP

**Expectation**

I expect the following ID Chaining (with default javax.faces.SEPARATOR_CHAR):

```
PARENT (Composite Component, declarative)
  PARENT:CHILD_FIRST (Composite Component, declarative)
  PARENT:CHILD_SECOND (Component Component, declarative)
    PARENT:CHILD_SECOND:GROUP (HtmlPanelGroup, declarative)
      PARENT:CHILD_SECOND:GROUP:LINK_1 (HtmlCommandLink, programmatically) 
```

**Problem**

The ID of the HtmlCommandLink-Object is wrong at the first page visit. Instead of "PARENT:CHILD_SECOND:GROUP:LINK_1" the ID is only "CHILD_SECOND:GROUP:LINK_1". After I refresh the page the ID is correctly "PARENT:CHILD_SECOND:GROUP:LINK_1". In fact every component in the second composite component ("CHILD_SECOND") is missing the first part of the ID ("PARENT"). After refresh all IDs are correctly.

**Solution**

I might automatically refresh the page after the first visit. But I don't want to.

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-08-21T14:39:33.833

浏览器解释后的 id 和你想的不一样。据我所知不超过3级。例如：

```
 <h:form id="form">
    <h:panel id="panel">
        <h:panel id="panel1">
            <h:label id="lab"/>
        </h:panel>
        <h:panel id="panel2">
        </h:panel>    
    </h:panel>
</h:form> 
```

那么标签的 id 将不是 form:panel:panel1:lab 而是 form:panel:lab。如果您想要获取 id 的小部件更深，那么我无法判断，但它不会超过 3 个级别。我可以告诉你如何找到身份证。您可以只编写页面，然后在 chrome 或 firefox 上查看它，您可以在其中看到解释后的源代码。所以你可以得到你想要的id。

祝你好运！

# facebook-graph-api - AppFog - 未经授权的源 IP 地址

> ID：16055301
> 
> 赞同：1
> 
> 时间：2013-04-17T08:34:33.163
> 
> 标签：facebook-graph-api, oauth, facebook-access-token, appfog, facebook-authorization

我在 AppFog 上托管了一个 Facebook 应用程序 ( [https://apps.facebook.com/igoaltip/ )。](https://apps.facebook.com/igoaltip/)突然它停止工作了。[当我尝试使用用户访问令牌 ( https://graph.facebook.com/me](https://graph.facebook.com/me) )获取有关用户的信息时，Facebook 返回 OAuthException (#5) 未经授权的源 IP。

我在带有 facebook-node-sdk 的服务器上使用 Node.JS。

我没有在服务器 IP 白名单中指定 IP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T02:50:56.093

在 Heroku 中，我遇到了同样的问题，简单的重启解决了我的问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:40:31.643

目前在 Appfog 上遇到关于 Facebook 请求的相同问题。AppFog 可能已收到来自 Facebook 的阻止。

我们将 appfog 的美国东部 IP 添加到我们的白名单中，但是超过半小时我们仍然收到相同的错误。奇怪的是，我们仍然可以使用来自其他 IP 的应用程序令牌。这让我相信 Facebook 需要很长时间才能强制执行白名单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:34:07.457

将支持票发送至 support@appfog.com，他们将帮助您将您的应用列入 Facebook 白名单。将 Facebook 和白名单放在主题中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T06:11:10.203

根据 appfog 的说法，这是他们需要处理的事情，您只能通过克隆应用程序来解决它，对我来说这不是 SoA 架构应用程序的解决方案来源：[https ://groups.google.com/forum/m /#!topic/appfog-users/K4UCWhvxGZU](https://groups.google.com/forum/m/#!topic/appfog-users/K4UCWhvxGZU)

# javascript - 为什么我不能通过 Object.defineProperties() 在原型上定义属性或函数？

> ID：16055302
> 
> 赞同：3
> 
> 时间：2013-04-17T08:34:33.767
> 
> 标签：javascript, prototype, prototypal-inheritance

我想一次在我的对象的原型上设置多个属性，因为 Object.defineProperties() 需要一个对象（并且原型是一个对象）和描述符，而我的对象 obj 已经有一个原型，因为它随每个对象一起提供，我我试图修改我的对象的原型如下

```
var obj = document.createElement(tn);

obj.prototype = Object.defineProperties(obj.prototype,{
    getName:{
        value:function(){
            alert("I have the tag"+this.tagName);
        },
        configurable:true
        }
    }); 
```

但我收到一个错误：

```
Object.defineProperties called on non-object 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:43:26.630

这是因为，`obj.prototype`未定义。

您将其指向其他对象，属性将被添加到它。

JS 有一个基于原型的继承模型，其中一个对象从另一个对象继承，如果它没有属性或方法，它会查看它的原型对象，它只是另一个具有属性和方法的对象，它又可能有自己的原型对象.

您收到错误`Object.defineProperties called on non-object`只是因为`obj.prototype`它不是对象并且未定义。

将其设置为 window 或 empty `{}`，它应该适合您。

# ruby-on-rails - 停止 Rails 检查 URL 中的参数？

> ID：16055304
> 
> 赞同：1
> 
> 时间：2013-04-17T08:34:58.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, routes, params, nested

## 应用理念：

我目前正在构建一个 Ruby on Rails [3.2] 应用程序，它由 2 个非常基本`accounts`的控制器组成 - 用于用户身份验证，并且`messages`属于帐户。

```
# app/models/account.rb
class Account < ActiveRecord::Base
  has_many :messages
end

# app/models/message.rb
class Message < ActiveRecord::Base
  belongs_to :accounts
end 
```

然后，我粗略地设置我`routes.rb`以允许用户查看嵌套在帐户下的消息：

```
# config/routes.rb
resources :accounts do
  resources :messages
end 
```

## 问题：

我希望用户在不使用 URL 中的 ID 参数的情况下访问他们的帐户，如下所示：`example.com/accounts/`，它工作得很好。

每当我尝试去：`example.com/accounts/messages`但是，rails 将“消息”视为`accounts_controller`! 我现在可以访问消息的唯一方法是：`/accounts/5236/messages`- 这不是我想要的。

我的问题是，有没有办法阻止/屏蔽 rails 检查我的帐户控制器上的参数，以便我可以像上面的示例一样访问我的消息？我真的对此感到困惑，所以请分享您的想法和想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:00:35.870

只是为了解决这个问题，我决定在我的`routes.rb`文件中使用这个解决方案：

```
get "/accounts/messages" => "messages#index", :as => :message 
```

这很好用，但唯一的缺点是，如果您在帐户名称空间下添加控制器，则每次都必须手动添加。那好吧。

ForgetTheNorm 下面还有一个很棒的替代解决方案，如果这对您不起作用，请试一试！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:39:52.390

您定义的路线

```
resources :accounts do
  resources :messages
end 
```

意味着您只能拥有这样的 URL：

```
/accounts/
/accounts/:id
/accounts/:id/:action
/accounts/:id/messages/
/accounts/:id/messages/:id
/accounts/:id/messages/:id/:action 
```

如果要指定 URL `/accounts/messages/`，则必须在路由中指定

```
resources :accounts, :collection => { :messages => :get } do
  resource :messages
end 
```

# c# - 接受多种枚举类型的方法

> ID：16055305
> 
> 赞同：3
> 
> 时间：2013-04-17T08:34:59.910
> 
> 标签：c#, enums

我有一个有 3 种枚举类型的类

我想要一个可以将所有 3 个枚举作为参数并获取枚举的整数值的方法。

```
public enum Enum1
{
    Fire = 0,
    Hour_24 = 1,
    Key_Switch = 2,
    Follower = 3,
    Entry_Delay1 = 4,
    Entry_Delay2 = 5,
    Intertior = 6,
    Local_Only = 7,
}

public enum Enum2
{
    Faulted = 0,
    Tampered = 1,
    Trouble = 2,
    Bypassed = 3,
    Inhibited = 4, 
    Low_Battery = 5,
    Loss_Supervision = 6,
    Reserved,
    Alarm_Memory = 8,
    Bypass_Memory = 9
}

private void BuildMessage ()
{
     List<Enum1> Enum1List = new List<Enum1>();
     FillBits(Enum1List);  // => Here I get an error.
}

// This method should accept Enum1 and Enum2
private Byte[] FillBits(List<Enum> EnumList)
{
     foreach (Enum e in EnumList)
     {
        int value = Convert.ToInt32(e);
     }
} 
```

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T08:45:15.283

只需使用泛型：

```
private Byte[] FillBits<T>(List<T> EnumList)
        where T : struct, IConvertible
{
    if (!typeof(T).IsEnum) 
    {
        throw new ArgumentException("T must be an enumerated type");
    }
    foreach (var e in EnumList)
    {
        int value = Convert.ToInt32(e);
    }
} 
```

请参阅此问题以同时使用泛型和枚举：

[创建将 T 限制为枚举的通用方法](https://stackoverflow.com/questions/79126/create-generic-method-constraining-t-to-an-enum)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:36:48.967

既然枚举已经有一个 int 值，为什么不直接将它转换为 int 呢？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T08:40:22.400

尝试使用对象也许？

```
private void BuildMessage()
{
    var enum1List = new List<object>();
    FillBits(enum1List);  // => Here I get an error.
}

// This method should accept Enum1 and Enum2
private Byte[] FillBits(IEnumerable<object> enumList)
{
    foreach (Enum e in enumList)
    {
        int value = Convert.ToInt32(e);
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T08:43:57.410

这应该有效（没有检查或任何添加，只是基本功能）：

```
private void BuildMessage()
{
    List<Enum1> Enum1List = new List<Enum1>();
    Enum1List.Add(Enum1.Fire);
    Enum1List.Add(Enum1.Follower);
    FillBits(Enum1List);
}

private Byte[] FillBits<T>(List<T> enumList)
{
    foreach (var e in enumList)
    {
        int value = Convert.ToInt32(e);
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-17T08:50:40.697

```
private Byte[] FillBits<T>(List<T> EnumList) where T: struct, IConvertable
{
     foreach (Enum e in EnumList)
     {
        int value = Convert.ToInt32(e);
     }
} 
```

因为您不能使用 Enums 继承，所以您没有真正的方法来确保只能使用 a或`List<Enum1>`在编译级别调用该函数。你有两个真正的选择`List<Enum2>``List<Enum3>`

1) 运行时类型检查

```
private Byte[] FillBits<T>(List<T> EnumList) Where T:struct, IConvertable
{
     if (typeof(T) != typeof(Enum1) && 
         typeof(T) != typeof(Enum2) && 
         typeof(T) != typeof(Enum3)) {

         throw new <EXCEPTION OF YOUR CHOICE!>;
     }

     foreach (Enum e in EnumList)
     {
        int value = Convert.ToInt32(e);
     }
} 
```

或者移动`FillBits<T>`到一个基类中，这样它就不能被直接调用并提供受保护的重载。

```
private Byte[] PrivateFillBits<T>(List<T> EnumList) where T: struct, IConvertable
{ ... }

protected Byte[] FillBits(List<Enum1> EnumList) {
   return this.PrivateFillBits(EnumList);
}

protected Byte[] FillBits(List<Enum2> EnumList) {
   return this.PrivateFillBits(EnumList);
}

protected Byte[] FillBits(List<Enum3> EnumList) {
   return this.PrivateFillBits(EnumList);
} 
```

# c# - How to set img tag src in MVC 4?

> ID：16055308
> 
> 赞同：0
> 
> 时间：2013-04-17T08:35:18.107
> 
> 标签：c#, jquery, asp.net, asp.net-mvc-4

I have a file input control:

```
<input type="file" id="fileUploadControl" /> 
```

On selecting an image file using this file control the selected image `src` has to be updated in `img` tag:

```
<img id="profileImage" width="80%" height="80%" /> 
```

I used the folowing jQuery code to update the `src`:

```
$("#fileUploadControl").on('change', function(){
     $("#profileImage ").attr('src', 'url(file://' + $(this).val() + ')');
}) 
```

The above code works in ordinary HTML page but when I use this code inside the MVC 4 .cshtml file it didn't work.

What is the reason and how do I overcome this problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:46:21.810

我已经在我的一个 asp.net 项目中做到了这一点，这对你有帮助吗

文件上传控件

```
<asp:FileUpload ID="screenUpload" runat="server" onchange="readURL(this);"/> 
```

图像控制

```
<img width="100" id="imgProjImage" runat="server" src=""/> 
```

功能

```
function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function(e) {
                    $('#imgProjImage').attr('src', e.target.result);
                }

                reader.readAsDataURL(input.files[0]);
            }
        } 
```

# jsp - 小型项目的 JSP

> ID：16055318
> 
> 赞同：0
> 
> 时间：2013-04-17T08:35:48.750
> 
> 标签：jsp

我想组织我自己的网站。这意味着我最多可以花费 30 美元进行托管。游客呢？让我们希望在半年内每天达到 3000 个。

这是我第一次接触网络。该站点将包含文章、论坛和维基。我必须选择一种语言和一个 Web 框架。不知何故，我害怕动态语言（如 Python 或 Ruby）。我很乐意使用 Java。但据我所知，Java 不是共享主机的合适解决方案。也许我落后于时代。好吧，让我们从静态和动态类型开始。这是最困扰我的。动态类型并不那么安全。他们说你可以使用测试。嗯，是。但这意味着发展速度不会高多少。然后是可维护性问题。我认为用 Java 维护项目更容易。当然，用脚本语言制作一个简单的网站要容易得多。但是，要制造出强大而可行的产品更加困难。他们说Java会消耗资源并且需要重新启动虚拟机。现在有问题吗？

他们说Java仅适用于企业级。但另一方面，任何网络项目都是企业级的。然后。如果是 JSF，我能找到任何现成的 wiki 模块吗？还有论坛？你能告诉我这些网站的例子吗？

我只是不明白为什么大多数 Web 项目都是用脚本语言编写的。与静态类型的好处相比，这些语言的简单性在某种程度上是一个弱论点。然后是社区问题。PHP、Ruby 或 Python 的社区非常庞大。但是文档不是那么好。好的文档通常可能比任何社区都好。

如果你在银行工作，你会经常用谷歌搜索别人的代码或寻求建议，这很奇怪。

好吧，我只是想听听你的意见。如果你说 JSP 不适合你，我会对 Python 或其他东西感到满意。

# html - 调整浮动 div 以填充容器宽度

> ID：16055320
> 
> 赞同：0
> 
> 时间：2013-04-17T08:35:57.987
> 
> 标签：html, css

我在容器中有一些浮动 div：

```
+----------+
| [] [] [] |
| [] [] [] |
| []       |
+----------+ 
```

这些 div 有一个特定的宽度（300 像素），我想尽可能多地排成一行。

但是 div 也应该填满剩余的空间，例如：容器宽度 1050px = 3 个 div 适合，div 应该调整大小以填满剩余的 150px（div 宽度 = 350px），直到容器宽度达到 1200px（= 连续 4 个 div ）。

```
+---------+
| [ ] [ ] |
| [ ] [ ] |
| [ ]     |
+---------+ 
```

所以我想要某种最小宽度。是否有任何 jQuery 插件来执行此操作或一些简单的 css？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:58:32.940

实际上这可以很容易地完成`float`

**HTML**

```
<div class="parent">
    <div class="child"></div>
    <div class="child"></div>
    <div class="child"></div>
    <div class="child"></div>
    <div class="child"></div>
    <div class="child"></div>
    <div class="child"></div>
    <div class="clear"></div>
</div> 
```

**CSS**

```
.parent {
    border :1px solid red;
    width:105px;
    height:auto;
}
.child{
    float:left;
    width:30px;
    height:10px;
    border:1px solid blue;
}
.clear{
    clear:both;
} 
```

这是[小提琴](http://jsfiddle.net/m9eFm/)

但是为了获得良好的实践，您可以了解[Flex Layout](http://www.w3.org/TR/css3-flexbox/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:20:41.597

我相信这更接近您正在寻找的内容：

HTML：

```
<div class="container">
    <div class="innercell">Something</div>
    <div class="innercell">Something</div>
    <div class="innercell">Something</div>
    <div class="innercell">Something</div>
    <div class="innercell">Something</div>
    <div class="innercell">Something</div>
    <div class="innercell">Something</div>
    <div class="innercell">Something</div>
</div> 
```

CSS：

```
.container {
    border :3px solid red;
    width:1000px; /* Change to 100% and drag the frame to see the 'cells' grow */
    display: -webkit-flex;
    padding: 5px 5px 5px 5px;
    -webkit-flex-direction: row;
    -webkit-flex-wrap: wrap;
    -webkit-justify-content: space-around;
    -webkit-align-items: center;
}

.innercell {
    float:left;
    width:300px;
    border:2px solid green;
    -webkit-order: 2;
    -webkit-flex-grow: 1;
    -webkit-flex-shrink: 1;
    margin: 5px 5px 5px 5px;
} 
```

[http://jsfiddle.net/pAmfj/3/](http://jsfiddle.net/pAmfj/3/)

**div 将随着更大的容器 div 增长。**

供参考： [http ://www.vanseodesign.com/blog/demo/flexbox/flex.html](http://www.vanseodesign.com/blog/demo/flexbox/flex.html)

# python - 如果小数不为 0，则 Python 舍入到小数点后 1 位

> ID：16055321
> 
> 赞同：2
> 
> 时间：2013-04-17T08:36:00.783
> 
> 标签：python

所以会发生以下四舍五入：

```
1.0  => 1
1.1  => 1.1
1.01 => 1
1.09 => 1.1 
```

如果留给我自己的设备，我可能只会查看字符串，但这感觉很脏，有没有更优雅的方法？

# mysql - Hibernate / MySQL 并发问题

> ID：16055324
> 
> 赞同：5
> 
> 时间：2013-04-17T08:36:09.470
> 
> 标签：mysql, multithreading, hibernate, concurrency, transactions

Hibernate (4.1.9.Final) 和 MySQL (14.14 Distrib 5.5.29, InnoDB table)我得到了一个**非常奇怪的结果：**

当我使用一个线程将某些内容保存到数据库并尝试使用另一个线程获取它时，Hibernate 并不总是找到该实体。（尽管我在打开加载会话之前正确地提交了事务并关闭了持久会话。）

一些观察：

*   我**无法**使用单线程程序重现这一点。

*   我**可以**在数据库中看到“丢失”的实体，并且

*   如果我重新启动应用程序 Hibernate**可以**成功加载实体。

这是一个说明问题的 SSCCE。（为简洁起见，省略了进口）：

```
public class StressTest {

    static SessionFactory sessionFactory;

    public static void main(String[] args) throws InterruptedException,
                                                     ExecutionException {

        // Configure Hibernate
        Configuration conf = new Configuration();
        conf.setProperty("hibernate.dialect",
                         "org.hibernate.dialect.MySQLInnoDBDialect");
        conf.configure();

        ServiceRegistry serviceRegistry = new ServiceRegistryBuilder()
                .applySettings(conf.getProperties())
                .buildServiceRegistry();        

        sessionFactory = conf.buildSessionFactory(serviceRegistry);

        // Set up producer / consumer
        BlockingQueue<Long> queue = new LinkedBlockingQueue<Long>();

        new Consumer(queue).start();
        new Producer(queue).start();
    }

}

class DummyEntity {
    long id;
    public long getId() { return id; }
    public void setId(long id) { this.id = id; }
} 
```

生产者类（创建`DummyEntities`并持久化它们）。

```
class Producer extends Thread {

    BlockingQueue<Long> sink;

    public Producer(BlockingQueue<Long> sink) {
        this.sink = sink;
    }

    @Override
    public void run() {
        try {
            while (true) {

                Session session = StressTest.sessionFactory.openSession();

                DummyEntity entity = new DummyEntity();
                entity.setId(new Random().nextLong());

                session.beginTransaction();
                session.save(entity);
                session.getTransaction().commit();
                session.close();

                sink.put(entity.getId());
            }
        } catch (InterruptedException ignore) {
            System.exit(-1);
        }
    }
} 
```

`DummyEntities`消费者类（从数据库加载）：

```
class Consumer extends Thread {

    BlockingQueue<Long> source;

    public Consumer(BlockingQueue<Long> source) {
        this.source = source;
    }

    @Override
    public void run() {

        try {
            while (true) {

                long entityId = source.take();

                Session session = StressTest.sessionFactory.openSession();
                Object entity = session.get(DummyEntity.class, entityId);
                session.close();

                if (entity == null) {
                    System.err.printf("Entity with id %d NOT FOUND", entityId);
                    System.exit(-1);
                }
            }
        } catch (InterruptedException ignore) {
            System.exit(-1);
        }
    }
} 
```

最后，这是`DummyEntity`.

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping
    default-cascade="all"
    default-lazy="false">

    <class name="se.stresstest.DummyEntity">

        <id name="id" type="long">
            <generator class="assigned"/>
        </id>

    </class>

</hibernate-mapping> 
```

结果输出总是以类似以下内容结束：

```
Entity with id -225971146115345 NOT FOUND 
```

任何想法为什么？

^(（这是上一个[问题](https://stackoverflow.com/questions/15806893/threading-issues-with-hibernate)的精炼版本。）)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T18:02:14.263

这种行为可以与 REPEATABLE READ 的事务隔离模式一致，这恰好是 InnoDB 的默认事务隔离模式：

[http://dev.mysql.com/doc/refman/5.5/en/set-transaction.html#isolevel_repeatable-read](http://dev.mysql.com/doc/refman/5.5/en/set-transaction.html#isolevel_repeatable-read)

如果您的应用程序逻辑依赖于能够在当前事务启动*后*查看其他事务中提交的数据- 以可重复读取为代价（数据可以/将由于其他事务中的操作而更改） - 您应该设置事务隔离阅读提交：

[http://dev.mysql.com/doc/refman/5.5/en/set-transaction.html#isolevel_read-committed](http://dev.mysql.com/doc/refman/5.5/en/set-transaction.html#isolevel_read-committed)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T04:31:56.353

改为使用`MySQL5InnoDBDialect`。

# android - 动态列表视图 - 设计模式

> ID：16055326
> 
> 赞同：4
> 
> 时间：2013-04-17T08:36:11.923
> 
> 标签：android, performance, algorithm, listview, design-patterns

[我必须在这个Mockup](http://oi46.tinypic.com/rkszdh.jpg)中实现设计，我的 List 将从服务器获取实时数据并缓存它。

该列表将包含**大图像**和多达**1000 个项目**。

*   用户将设置限制。
*   图像可以是任何大小（以 MB 为单位）或任何分辨率。
*   如果太大，我肯定会重新调整图像大小。

在向上和/或向下滚动时，列表应加载本地缓存（存储）或从服务器下载的数据。

由于如此庞大的列表将需要大量内存和处理（这在移动设备上不可用），我需要应用非常优化的设计模式。

**问题**

任何人都可以为此建议任何设计模式吗？

你将如何实现这一点？

**相关问题：** [列表视图设计模式](https://stackoverflow.com/questions/3595697/list-view-design-pattern)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:15:44.043

Commonsguy (Mark Murphy) 在这里实现了一个非常好的无尽列表视图：

[https://github.com/commonsguy/cwac-endless](https://github.com/commonsguy/cwac-endless)

它避免了为您的列表视图加载大型数据集，并允许用户在滚动时滚动越来越多的元素。我对其进行了测试，它非常简洁：到达底部时添加的元素数量，异步加载等。您必须处理回滚部分，因为实际上，当您向下滚动时滚动会动态增加（不是向上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:00:25.970

在你的情况下，因为你有很多数据，特别是图像，你应该使用加载器类概念，正如 rominGuy 在[谷歌 IO-2010](https://www.youtube.com/watch?v=wDBM6wVEO70)中解释的那样， 当每一行不在视野中时，你会重用每一行，而另一行进入可见性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:57:15.910

您可以将图像和数据存储在数据库中，您可以使用缓存并使用后台进程（如服务）填充数据库。

# java - Android - AlarmManager 实例不会重复执行

> ID：16055329
> 
> 赞同：1
> 
> 时间：2013-04-17T08:36:19.940
> 
> 标签：java, android, android-intent, service, alarmmanager

我有一个警报的工作实例 - 但是当我尝试创建第二个警报时 - 第一个和第二个意图都不会重复执行，我真的不确定为什么会发生这种情况。

我为每个活动/服务添加了一个 toast 用于测试目的，这样我就可以判断它们是否成功执行（每个活动/服务每 10 秒运行一次）。

当我单击“确定”启动这两项服务时——我看到了我的第一项服务的祝酒词——但第二项服务最初从未出现——之后什么也没有发生。

非常感谢任何建议/意见！

AlarmManager 报警服务：

```
 Calendar cal = Calendar.getInstance();
        cal.add(Calendar.SECOND, 10);
        Intent intent = new Intent(Rules.this, LMW.class);
        PendingIntent pintent = PendingIntent.getService(Rules.this, 0, intent,
                0);
        AlarmManager alarm = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        alarm.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                100000000 * 1000, pintent); 
```

警报管理器活动：

```
 //  Calendar cal = Calendar.getInstance();
      //  cal.add(Calendar.SECOND, 10);
        Intent intent2 = new Intent(Rules.this, KillTimer.class);
        PendingIntent pintent2 = PendingIntent.getActivity(Rules.this, 0, intent2,
                0);
        AlarmManager alarm2 = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        alarm.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                30 * 1000, pintent2); // here    

    // click listener for the button to start service
    Button btnStart = (Button) findViewById(R.id.button1);
    btnStart.setOnClickListener(new View.OnClickListener() { 
```

完整来源：

```
public class Rules extends Activity {
    private String password;
    private  PendingIntent mPendingIntent;

TextView textSsid, textSpeed, textRssi;
private static final int NOTIFY_ME_ID=1337;
private int count=0;
private NotificationManager notifyMgr=null;
    public Handler mHandler = new Handler();
    public long mStartRX = 0;
    public long mStartTX = 0;
    public long txBytes;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.rules);
    Parse.initialize(this, "7gjqmUcoqu1IZPJSSxXLdE4L8efAugCXA7snLSH6", "5NckF83MUBumQ8L8zL7Akc4p07beMRnmvgCfhZdH");

    ParseUser.enableAutomaticUser();
    ParseACL defaultACL = new ParseACL();

    // If you would like all objects to be private by default, remove this line.
    defaultACL.setPublicReadAccess(true);

    ParseACL.setDefaultACL(defaultACL, true);

textSsid = (TextView) findViewById(R.id.Ssid);
textSpeed = (TextView) findViewById(R.id.Speed);
textRssi = (TextView) findViewById(R.id.Rssi);
Long.toString(mStartTX);
Long.toString(mStartRX);
Long.toString(txBytes);
ParseObject testObject = new ParseObject("TestObject");
testObject.put("DataO", String.valueOf(mStartTX));
testObject.put("DataI", String.valueOf(mStartRX));

testObject.saveInBackground();

ParseAnalytics.trackAppOpened(getIntent());

mStartRX = TrafficStats.getTotalRxBytes();
mStartTX = TrafficStats.getTotalTxBytes();
if (mStartRX == TrafficStats.UNSUPPORTED || mStartTX == TrafficStats.UNSUPPORTED) {
    AlertDialog.Builder alert = new AlertDialog.Builder(this);
    alert.setTitle("Uh Oh!");
    alert.setMessage("Your device does not support traffic stat monitoring.");
    alert.show();
} else {
    mHandler.postDelayed(mRunnable, 1000);
}

}

private final Runnable mRunnable = new Runnable() {
public void run() {
    TextView RX = (TextView)findViewById(R.id.RX);      TextView TX = (TextView)findViewById(R.id.TX);

        long rxBytes = TrafficStats.getTotalRxBytes()- mStartRX;
        RX.setText(Long.toString(rxBytes));
        long txBytes = TrafficStats.getTotalTxBytes()- mStartTX;
        TX.setText(Long.toString(txBytes));
        mHandler.postDelayed(mRunnable, 1000);

        final Chronometer myChronometer = (Chronometer)findViewById(R.id.chronometer);
        myChronometer.start();

        DisplayWifiState();
        this.registerReceiver(this.myWifiReceiver, new IntentFilter(
                ConnectivityManager.CONNECTIVITY_ACTION));

    }

    private void registerReceiver(BroadcastReceiver myWifiReceiver2,
            IntentFilter intentFilter) {
        // TODO Auto-generated method stub

    }

    private BroadcastReceiver myWifiReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context arg0, Intent arg1) {
            // TODO Auto-generated method stub
            NetworkInfo networkInfo = (NetworkInfo) arg1
                    .getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
            if (networkInfo.getType() == ConnectivityManager.TYPE_WIFI) {
                DisplayWifiState();
            }
        }
    };

    public void DisplayWifiState() {

        ConnectivityManager myConnManager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
        NetworkInfo myNetworkInfo = myConnManager
                .getNetworkInfo(ConnectivityManager.TYPE_WIFI);
        WifiManager myWifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
        WifiInfo myWifiInfo = myWifiManager.getConnectionInfo();

        if (myNetworkInfo.isConnected()) {

            textSsid.setText(myWifiInfo.getSSID());

            textSpeed.setText(String.valueOf(myWifiInfo.getLinkSpeed()) + " "
                    + WifiInfo.LINK_SPEED_UNITS);
            textRssi.setText(String.valueOf(myWifiInfo.getRssi()));
        } else {
            textSsid.setText("---");

            textSpeed.setText("---");
            textRssi.setText("---");
        };

    // Start service using AlarmManager

        Calendar cal = Calendar.getInstance();
        cal.add(Calendar.SECOND, 10);
        Intent intent = new Intent(Rules.this, LMW.class);
        PendingIntent pintent = PendingIntent.getService(Rules.this, 0, intent,
                0);
        AlarmManager alarm = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        alarm.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                100000000 * 1000, pintent);

        // Start 2nd service using AlarmManager

      //  Calendar cal = Calendar.getInstance();
      //  cal.add(Calendar.SECOND, 10);
        Intent intent2 = new Intent(Rules.this, KillTimer.class);
        PendingIntent pintent2 = PendingIntent.getActivity(Rules.this, 0, intent2,
                0);
        AlarmManager alarm2 = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        alarm.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                30 * 1000, pintent2); // here    

    // click listener for the button to start service
    Button btnStart = (Button) findViewById(R.id.button1);
    btnStart.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            startService(new Intent(getBaseContext(), LMW.class));            
            Intent startMain = new Intent(Intent.ACTION_MAIN);
            startMain.addCategory(Intent.CATEGORY_HOME);
            startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(startMain);

        }        

});

    // click listener for the button to stop service
    Button btnStop = (Button) findViewById(R.id.button2);
    btnStop.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            stopService(new Intent(getBaseContext(), LMW.class));
            Intent startMain = new Intent(Intent.ACTION_MAIN);
            startMain.addCategory(Intent.CATEGORY_HOME);
            startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(startMain);

        }
    });

}};} 
```

KillTimer.java

```
 public class KillTimer extends Activity {

    @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.killtimer);
      Toast.makeText(getApplicationContext(), "KillWifi Running!", Toast.LENGTH_SHORT).show();
      WifiManager wifiManager = (WifiManager) getApplicationContext().getSystemService(Context.WIFI_SERVICE);
      int networkId = wifiManager.getConnectionInfo().getNetworkId();
      wifiManager.removeNetwork(networkId );
      wifiManager.saveConfiguration();

  }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:17:44.677

更改第二个警报中的 PendingIntent。而不是 pintent 使用 pintent2。

```
Calendar cal = Calendar.getInstance();
    cal.add(Calendar.SECOND, 10);
    Intent intent = new Intent(Rules.this, LMW.class);
    PendingIntent pintent = PendingIntent.getService(Rules.this, 0, intent,
            0);
    AlarmManager alarm = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    alarm.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
            100000000 * 1000, pintent);

    // Start 2nd service using AlarmManager

  //  Calendar cal = Calendar.getInstance();
  //  cal.add(Calendar.SECOND, 10);
    Intent intent2 = new Intent(Rules.this, KillTimer.class);
    PendingIntent pintent2 = PendingIntent.getActivity(Rules.this, 1, intent2,
            0);
    AlarmManager alarm2 = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    alarm.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
            30 * 1000, pintent2); // here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:03:31.607

请尝试使用此代码。

```
// context variable contains your `Context`
AlarmManager mgrAlarm = (AlarmManager) context.getSystemService(ALARM_SERVICE);
ArrayList<PendingIntent> intentArray = new ArrayList<PendingIntent>();

for(i = 0; i < 10; ++i)
{
   Intent intent = new Intent(context, OnAlarmReceiver.class);
   // Loop counter `i` is used as a `requestCode`
   PendingIntent pendingIntent = PendingIntent.getBroadcast(context, i, intent, 0);
   // Single alarms in 1, 2, ..., 10 minutes (in `i` minutes)
   mgrAlarm.set(AlarmManager.ELAPSED_REALTIME_WAKEUP, 
                SystemClock.elapsedRealtime() + 60000 * i, 
                pendingIntent); 

   intentArray.add(pendingIntent);
} 
```

# c# - TextBox 文本上的 GridView 更新已更改

> ID：16055332
> 
> 赞同：1
> 
> 时间：2013-04-17T08:36:28.247
> 
> 标签：c#, asp.net, gridview, webforms

我想为`GridView`数据创建实时搜索，所以我尝试了这些代码：

我在`aspx`文件中有这个：

```
 <asp:ScriptManager ID="DateManager" runat="server" />
            <asp:UpdatePanel ID="setDate" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="true">
                <ContentTemplate>
                <asp:TextBox ID="gro" runat="server" Width="73px" />&nbsp;
                <asp:TextBox ID="job" runat="server" Width="94px" />&nbsp;
                <asp:TextBox ID="username" runat="server" Width="98px" />&nbsp;
                <asp:TextBox ID="lname" runat="server" Width="123px" />&nbsp;
                <asp:TextBox ID="fname" runat="server" Width="78px" 
                        ontextchanged="fname_TextChanged" AutoPostBack="True" />
            <asp:GridView ID="res" runat="server" AutoGenerateColumns="False" 
                CellPadding="4" ForeColor="#333333" GridLines="None" Width="600px" 
                        AllowPaging="True" DataKeyNames="id">
                <AlternatingRowStyle BackColor="White" />
                <Columns>
                <asp:CommandField SelectText="selectIt" ShowSelectButton="True" />
                    <asp:BoundField DataField="fname" HeaderText="First Name" />

                </Columns>
                <EditRowStyle BackColor="#2461BF" />
                <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
                <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
                <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
                <RowStyle BackColor="#EFF3FB" />
                <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
                <SortedAscendingCellStyle BackColor="#F5F7FB" />
                <SortedAscendingHeaderStyle BackColor="#6D95E1" />
                <SortedDescendingCellStyle BackColor="#E9EBEF" />
                <SortedDescendingHeaderStyle BackColor="#4870BE" />
            </asp:GridView>

            </ContentTemplate>
                <Triggers>
                   <asp:AsyncPostBackTrigger ControlID="fname" EventName="TextChanged"  />
                </Triggers>
            </asp:UpdatePanel> 
```

在后面的代码中：

```
 protected void fname_TextChanged(object sender, EventArgs e)
    {
        using (HotelEntities h = new HotelEntities())
        {
            UserHandle me = new UserHandle();

            var re = me.SearchFName(h, fname.Text);

            if (re != null)
            {
                DataTable d = Converter.UserForSearch(re);
                res.DataSource = d;
                res.DataBind();
            }

        }
    } 
```

当我输入时`fname`，`GridView`没有改变，但是当我点击 selectIt 时，`GridView`它会显示搜索结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:05:00.860

尝试这个

```
if (re != null)
            {

                res.DataSource = re;
                res.DataBind();
            } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T11:00:35.003

尝试这个

设置网格视图的属性`EnableViewState="false"`

```
<asp:GridView ID="res" runat="server" EnableViewState="False" > 
```

# python - 使用 python POST xml 请求

> ID：16055334
> 
> 赞同：-3
> 
> 时间：2013-04-17T08:36:33.753
> 
> 标签：python, xml, post, request

我是 python 新手，我想使用 python 使用对目标 URL 的 POST xml 请求来自动化 API。

目前我在我的程序中遇到了一些错误，我无法执行该活动。

我当前的代码如下：

```
 #!/usr/bin/python
# Post XML to a web service and get XML results.
# For more robust HTTP error handler use FancyURLOpener
# E Begoli
import urllib
import httplibimport
import httplib
from xml.dom.minidom import parse, parseString
target_url = "http://TestLocation&pagesize=50"
xml_request = """\
<?xml version='1.0' encoding='UTF-8' ?>
      <<criteria>
    <includeFilterSets>
        <filterSet>
            Test
        <filterSet> 
```

""" # 发送 xml 请求到 url # 带参数 request # def send_xml(): result = urllib.urlopen( target_url, urllib.urlencode( {'request':xml_request} ) ) #解析结果并打印 xml # 或者做无论如何 dom = parse( result ) print dom.toprettyxml() result.close() def main(): send_xml() if **name** == " **main** ": main()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:36:30.893

在 Python 中学习的第一件事几乎就是识别。

```
def send_xml():
    result = urllib.urlopen( target_url, urllib.urlencode( {'request':xml_request} ) )
    #parse results and print the xml
    # or do whatever with it
    dom = parse( result )
    print dom.toprettyxml()
    result.close()

def main():
    send_xml()

if __name__ == "__main__":
    main() 
```

# c# - ASP.NET MasterPage，不显示我的 <%=CodeBehindVar %>

> ID：16055335
> 
> 赞同：1
> 
> 时间：2013-04-17T08:36:37.677
> 
> 标签：c#, master-pages, webforms

这是我想做的一个例子：

内容方面（Structure.master）：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="Structure.master.cs" Inherits="Structure" %>

<!DOCTYPE HTML>
<html>
<head runat="server">
    <title>Bienvenue sur</title>
    <meta charset="utf-8" content="" />
    <link runat="server" href="App_Themes/Global/Metro.css?v=22" rel="stylesheet" type="text/css" />
    <link runat="server" href="App_Themes/Global/Site.css?v=<%=Version %>" rel="stylesheet" type="text/css" />
    <link runat="server" href="App_Themes/Global/Structure.css?v=22" rel="stylesheet" type="text/css" /> 
```

和代码隐藏（Structure.master.cs）：

```
using System;
using System.Linq;
using BaseInstanceEntity = Library.Common.Entities.BaseEntities.BaseInstanceEntity;
using BaseInstanceManager = Library.Manager.BaseInstanceManager;

public partial class Structure : System.Web.UI.MasterPage
{
    public string Version { get; set;}

    protected void Page_Load(object sender, EventArgs e)
    {
        Version = System.Configuration.ConfigurationManager.AppSettings["Version"].Replace(".", ""); 
```

如图所示，我想将`Version`var 显示到标题中，作为缓存控件。当我执行上面的代码时，该行的结果是：

```
<link href="../App_Themes/Global/Site.css?v=&lt;%=Version %>" rel="stylesheet" type="text/css" /> 
```

就像代码没有被解释一样。我无法找到解释。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T23:29:38.693

好吧，我迟到了这个问题，但是当我需要动态创建 CSS 链接时，我只需在后面的代码上生成整个标签，然后将其植入标记上，如下所示：

```
public partial class WebForm1 : System.Web.UI.Page
{
    public string link;
    protected void Page_Load(object sender, EventArgs e)
    {
        string ver = "1.0.0";
        link = "<link rel=\"stylesheet\"  href=\"../App_Themes/Global/Site.css?v=" + ver + "\"/>";
    }
} 
```

然后标记

```
 <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
<%= link %>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script> 
```

希望这将帮助其他来到此页面的人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:47:18.643

也许它应该是这样的：

```
<link runat="server" 
      href='<%# string.Format("{0}?v={1}", Page.ResolveUrl("~/App_Themes/Global/Site.css"), Version)%>' 
      type="text/css" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-08T13:18:11.063

```
 public static string Version
    {
        get
        {
            Assembly asm = Assembly.GetExecutingAssembly();
            FileVersionInfo fvi = FileVersionInfo.GetVersionInfo(asm.Location);
            return String.Format("{0}.{1}", fvi.ProductMajorPart, fvi.ProductMinorPart);
        }
    } 
```

# sql - 将不规则字符串转换为整数

> ID：16055336
> 
> 赞同：0
> 
> 时间：2013-04-17T08:36:38.350
> 
> 标签：sql, sql-server

现在我正在使用一个遗留数据库，其中一列（外键）是一个 nVarChar，它由例如 '23 +abcde' 形式的单元格组成，其中 '23' 是实际键，其余的是某种属性（ ？）。

所以我需要的是这样的：

```
SELECT * FROM table WHERE bad_column = 23; 
```

将 '23 +abc' 转换为 23 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:52:12.217

试试这个

```
SELECT * from table_name
WHERE (CASE WHEN PatIndex('%[0-9]%', bad_column) > 0 
THEN CONVERT(INT,LEFT(bad_column,LEN(bad_column)-PatIndex('%[0-9]%',REVERSE(bad_column))+1))
ELSE 0 END) = 23 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:43:08.380

试试这个——

```
SELECT * 
FROM table 
WHERE CAST(SUBSTRING(bad_column, 1, CHARINDEX('+', bad_column)) AS INT) = 23; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:45:05.357

要选择那种数据，你需要类似的东西

```
SELECT *
FROM table
WHERE bad_column LIKE '23%'; 
```

这不是强制转换，而是转换。

```
SELECT substring (bad_column, 1, patindex(' ', bad_column))
FROM table
WHERE bad_column LIKE '23%'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:08:45.390

试试这个，`<key>`在这种情况下 = 23：

```
SELECT * 
FROM TABLE 
WHERE SUBSTRING(bad_column,1,LEN(<key>)) NOT LIKE '[a-zA-Z]'
AND SUBSTRING(bad_column,1,LEN(<key>)) = <key> 
```

通过这种方式，在比较时不需要强制转换（该`NOT LIKE`子句避免使用文字，您必须提供其他字符规则），并且您确保只保留完全包含您的键的列。

**编辑：**您也不需要`CHARINDEX`规范。

# java - Java JDBC 线程安全

> ID：16055339
> 
> 赞同：3
> 
> 时间：2013-04-17T08:36:46.103
> 
> 标签：java, multithreading, jdbc

如果我在函数中有以下序列

```
void UpdateDatabase(conn) {
    createStatement
    executeStaement
    getResult
} 
```

这个调用序列在多线程中是否安全`Java`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:20:13.827

假设您的线程不共享任何状态或以其他方式正确同步共享状态，则在查看 JVM 内部发生的情况时，执行仅是线程安全的。然而，更重要的是您的数据是否仍然可能被损坏。

每个 JDBC 连接一次只能由一个线程使用，您正在这样做。然而，数据库系统定义了四个隔离级别，定义了并发事务可以看到的数据状态。如果您的并发交易没有触及相同的数据，您就可以了。如果是这样，请查看数据库的隔离级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:59:22.443

如果你稍微改变一下

```
void updateDatabase() {
    getConnection
    createStatement
    executeStaement
    getResult
} 
```

这绝对是线程安全的

# iphone - 如何在 ipad 应用程序的文档文件夹中播放视频文件

> ID：16055347
> 
> 赞同：1
> 
> 时间：2013-04-17T08:37:07.860
> 
> 标签：iphone, ipad, video, mpmovieplayercontroller, document

我正在录制视频并将其保存到文档文件夹中，我想稍后使用视频路径再次播放，但它没有播放我正在使用以下代码获取文档文件夹中文件的路径，然后播放它

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
      NSString *documentsDirectory = [paths objectAtIndex:0];

      NSDateFormatter *dateFormat = [[[NSDateFormatter alloc] init] autorelease];
        [dateFormat setDateFormat:@"dd-MM-yyyy||HH:mm:SS"];
      NSDate *now = [[[NSDate alloc] init] autorelease];
      NSDate* theDate = [dateFormat stringFromDate:now];
      NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"Default Album"];
     if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath])
            [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:nil];
     NSString *videopath= [[[NSString alloc] initWithString:[NSString stringWithFormat:@"%@/%@.mov",documentsDirectory,theDate]] autorelease];
     NSLog(@"Vide Path %@",videopath);
     NSString *path = [[NSBundle mainBundle] pathForResource:videopath ofType:@"mov" inDirectory:nil];
     NSURL *movieURL = [NSURL fileURLWithPath:path];
     player= [[ MPMoviePlayerViewController alloc] initWithContentURL:movieURL];
     [self presentMoviePlayerViewControllerAnimated:player]; 
```

你能帮帮我吗谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:43:31.937

而不是这个

```
NSString *videopath = [[[NSString alloc] initWithString:[NSString stringWithFormat:@"%@/%@.mov",documentsDirectory,theDate]] autorelease]; 
```

您可以尝试不`.mov`扩展。因为你会在这一行告诉扩展。

```
NSString *path = [[NSBundle mainBundle] pathForResource:videopath ofType:@"mov" inDirectory:nil]; 
```

**注意：**在这一行

```
player = [[MPMoviePlayerViewController alloc] initWithContentURL:movieURL]; 
```

如果播放器有保留属性，会导致内存泄漏..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:10:08.087

首先您需要在项目中添加媒体播放器框架，然后添加导入语句

```
#import <MediaPlayer/MediaPlayer.h> 
```

然后按照下面的代码

```
 MPMoviePlayerViewController *playerVC = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:aVideoUrl]];

        // Register this class as an observer instead
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(movieFinishedCallback:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:playerVC.moviePlayer];

        // Set the modal transition style of your choice
        //playerVC.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

        [self presentMoviePlayerViewControllerAnimated:playerVC];
        [playerVC.moviePlayer prepareToPlay];
        [playerVC.moviePlayer play];
        [playerVC.moviePlayer setControlStyle:MPMovieControlStyleFullscreen];

- (void)movieFinishedCallback:(NSNotification*)aNotification
{
    // Obtain the reason why the movie playback finished
    NSNumber *finishReason = [[aNotification userInfo] objectForKey:MPMoviePlayerPlaybackDidFinishReasonUserInfoKey];

    // Dismiss the view controller ONLY when the reason is not "playback ended"
    if ([finishReason intValue] != MPMovieFinishReasonPlaybackEnded)
    {
        MPMoviePlayerController *moviePlayer = [aNotification object];

        // Remove this class from the observers
        [[NSNotificationCenter defaultCenter] removeObserver:self
                                                        name:MPMoviePlayerPlaybackDidFinishNotification
                                                      object:moviePlayer];

        // Dismiss the view controller
        [self dismissModalViewControllerAnimated:YES];
    }
} 
```

# ruby-on-rails - 耙子测试失败 - RunTimeError

> ID：16055359
> 
> 赞同：1
> 
> 时间：2013-04-17T08:37:31.607
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, error-handling, rake

我跑了`rake test`，得到以下错误：

```
/Users/username/.rvm/gems/ruby-2.0.0-p0/gems/activerecord-3.2.7/lib/active_record/connection_adapters/postgresql_adapter.rb:1213:in `initialize': could not connect to server: Permission denied (PG::Error)
Is the server running locally and accepting
connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"?
.
.
. (many filenames)
.
.
Errors running test:units! #<PG::Error: could not connect to server: Permission denied
Is the server running locally and accepting
connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"?
>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [/Users/username/.rvm/rubies/ruby-2.0.0-p0/bin/...]> 
```

这是什么意思？我应该怎么做才能解决这个问题？此外，它似乎与 PostgresSql 有关，但我相信我不使用那个数据库。（在哪里可以检查？）所以这没有意义......

更新：我错了，有postgresql。这是我的`config/database.yml`文件：

```
test:
   adapter: postgresql
   encoding: unicode
   database: db_test
   pool: 5
   username: db
   password: 

production:
  adapter: postgresql
  encoding: unicode
  database: db_production
  host: xx.xxx.xxx.xxx
  pool: 5
  username: xxxxx
  password: xxxxxxx 
```

这是我的 Gemfile 中的数据：

```
#Running a Postgres Database
gem 'pg'

#And using redis for KVS
gem 'redis'

#Behind a Thin Server
gem 'thin' 
```

我现在正在本地机器上工作，这是我拉的一个项目。也许我的本地机器有一个特定的数据库（我相信我正在使用 mysql）但应用程序期待另一个？

更新：我的本地机器（Mac os）确实有 postgresql，我可以使用`which psql`. 如何配置数据库并使其正常运行而不会出错？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:10:57.120

如果您在本地计算机中没有 psql。继续mysql本身。

在你的 gemfile 中删除**gem 'pg'**并给**gem 'mysql2'**

给 bundle install rake db:create rake db:migrate

在此之前在 database.yml 文件中提供您的 mysql 数据库密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:18:33.707

这可能是由于几个问题：

*   数据库`db_test`不存在
*   用户`db`不存在
*   用户`db`有密码
*   必须`host`指定

换句话说，花点时间配置你的`database.yml`,`test`部分，并运行 a`rake db:test:prepare`来初始化你的数据库。

来自 rake 的所有 DB 可用命令：`rake -T | grep db`

# python - Django模板中的日期格式

> ID：16055365
> 
> 赞同：0
> 
> 时间：2013-04-17T08:37:47.087
> 
> 标签：python, django

我有一个从 REST 方法中得到的日期。

`2013-04-11 15:03:01.0` 我直接渲染到模板中。

但我想更改日期格式。所以我这样写。

```
 <td>{{x.dateCreated|date:"F j, Y"}}</td> 
```

不幸的是，当我使用它时，它没有显示任何内容。

请告诉我我在这里做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:44:38.583

你需要有一个`datetime`实例才能工作。用于[`datetime.datetime.strptime()`](http://docs.python.org/2/library/datetime.html#datetime.datetime.strptime)将您的字符串解析为这样的对象：

```
datetime.datetime.strptime(restdate, '%Y-%m-%d %H:%M:%S.%f') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:44:16.797

Django 处理模板中“日期”格式的方式是通过以可识别的日期格式解析字符串。如果我没记错的话，您传递给“日期”默认模板标签的字符串似乎不是 Django 默认安装的有效日期。因此，它无法解析和输出自定义日期格式。

您可以通过修改“日期格式”设置来添加其他日期格式。 [https://docs.djangoproject.com/en/dev/ref/settings/#date-format](https://docs.djangoproject.com/en/dev/ref/settings/#date-format)

希望有帮助！

# android - Android - 加载图像 URL 并在 ImageView 中显示

> ID：16055375
> 
> 赞同：2
> 
> 时间：2013-04-17T08:38:20.730
> 
> 标签：android, android-imageview, android-image

我有这个代码来加载图像。服务器是安全的。我得到了回应：200，这意味着好的。然后也将加载正确的 url。问题是当我运行我的应用程序时，图像不会被加载。

```
try {
        Bitmap bitmap=null;
        URL imageUrl = new URL(url);
        String userPass = username+":"+password;
        String encode = Base64.encodeToString(userPass.getBytes(), Base64.DEFAULT);
        HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
        conn.setRequestProperty("Authorization", "Basic " + encode);
        conn.setConnectTimeout(10000);
        conn.setReadTimeout(10000); 
        conn.setInstanceFollowRedirects(true);
        int res = conn.getResponseCode();

        System.out.println("Response: " + res);
        System.out.println("Image Loader URL: " + url);

        InputStream is=conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        os.close();
        bitmap = decodeFile(f);
        return bitmap;

    } catch (Throwable ex){
       ex.printStackTrace();
       if(ex instanceof OutOfMemoryError)
           memoryCache.clear();
       return null;
    }

private Bitmap decodeFile(File f){
    try {
        //decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE=360;
        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        Log.d("IMAGE SIZE?  ", +width_tmp+ " x " + height_tmp);
        int scale=1;
        while(true){
            if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                break;
            width_tmp/=2;
            height_tmp/=2;
            scale*=2;
        }

        //decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}
    return null;
}
/// . . . . . and so on...\ 
```

在我的 logcat..one 中，它应该 SKImageDecoder::Factory 返回 null

但是后来，也许我做了什么……这就是我在 logcat 中看到的……

```
04-17 16:18:57.936: D/libEGL(5216): loaded /system/lib/egl/libGLES_android.so
04-17 16:18:57.940: D/libEGL(5216): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
04-17 16:18:57.952: D/libEGL(5216): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
04-17 16:18:57.955: D/libEGL(5216): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
04-17 16:18:58.087: D/OpenGLRenderer(5216): Enabling debug mode 0 
```

我猜我的图像在我登录后被解码`IMAGE SIZE?`：然后它记录了我要加载的图像的正确图像大小。

是 ImageLoader 还是渲染部分的问题？

请有任何见解。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:57:15.073

尝试使用此类，它会在后台下载图像并存储在缓存中：

```
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.Collections;
import java.util.HashMap;
import java.util.LinkedList;
import java.util.Map;
import java.util.WeakHashMap;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

import android.graphics.drawable.Drawable;
import android.os.Handler;
import android.os.Message;
import android.widget.ImageView;

/**
 * This Class is for download images and assign the drawable to an ImageView.
 * 
 */
public class DrawableBackgroundDownloader {    

private final Map<String, Drawable> mCache = new HashMap<String, Drawable>();   
private final LinkedList <Drawable> mChacheController = new LinkedList <Drawable> ();
private ExecutorService mThreadPool;  
private final Map<ImageView, String> mImageViews = Collections.synchronizedMap(new WeakHashMap<ImageView, String>());  
public static int MAX_CACHE_SIZE = 80; 
public int THREAD_POOL_SIZE = 3;

/**
 * Constructor
 */
public DrawableBackgroundDownloader() {  
    mThreadPool = Executors.newFixedThreadPool(THREAD_POOL_SIZE);  
}  

/**
 * Clears all instance data and stops running threads
*/ 
public void Reset() {
    ExecutorService oldThreadPool = mThreadPool;
    mThreadPool = Executors.newFixedThreadPool(THREAD_POOL_SIZE);
    oldThreadPool.shutdownNow();

    mChacheController.clear();
    mCache.clear();
    mImageViews.clear();
}  

/**
 * Load the drawable associated to a url and assign it to an image, you can set a placeholder to replace this drawable.
 * @param url Is the url of the image.
 * @param imageView The image to assign the drawable.
 * @param placeholder A drawable that is show during the image is downloading.
 */
public void loadDrawable(final String url, final ImageView imageView,Drawable placeholder) {  
    if(!mImageViews.containsKey(url))
        mImageViews.put(imageView, url);  
    Drawable drawable = getDrawableFromCache(url);  

    // check in UI thread, so no concurrency issues  
    if (drawable != null) {  
        //Log.d(null, "Item loaded from mCache: " + url);  
        imageView.setImageDrawable(drawable);  
    } else {  
        imageView.setImageDrawable(placeholder);  
        queueJob(url, imageView, placeholder);  
    }  
} 

/**
 * Return a drawable from the cache.
 * @param url url of the image.
 * @return a Drawable in case that the image exist in the cache, else returns null.
 */
public Drawable getDrawableFromCache(String url) {  
    if (mCache.containsKey(url)) {  
        return mCache.get(url);  
    }  

    return null;  
}

/**
 * Save the image to cache memory.
 * @param url The image url
 * @param drawable The drawable to save.
 */
private synchronized void putDrawableInCache(String url,Drawable drawable) {  
    int chacheControllerSize = mChacheController.size();
    if (chacheControllerSize > MAX_CACHE_SIZE) 
        mChacheController.subList(0, MAX_CACHE_SIZE/2).clear();

    mChacheController.addLast(drawable);
    mCache.put(url, drawable);

}  

/**
 * Queue the job to download the image.
 * @param url Image url.
 * @param imageView The ImageView where is assigned the drawable.
 * @param placeholder The drawable that is show during the image is downloading. 
 */
private void queueJob(final String url, final ImageView imageView,final Drawable placeholder) {  
    /* Create handler in UI thread.  */
    final Handler handler = new Handler() {  
        @Override  
        public void handleMessage(Message msg) {  
            String tag = mImageViews.get(imageView);  
            if (tag != null && tag.equals(url)) {
                if (imageView.isShown())
                    if (msg.obj != null) {
                        imageView.setImageDrawable((Drawable) msg.obj);  
                    } else {  
                        imageView.setImageDrawable(placeholder);  
                        //Log.d(null, "fail " + url);  
                    } 
            }  
        }  
    };  

    mThreadPool.submit(new Runnable() {  
        public void run() {  
            final Drawable bmp = downloadDrawable(url);
            // if the view is not visible anymore, the image will be ready for next time in cache
            if (imageView.isShown())
            {
                Message message = Message.obtain();  
                message.obj = bmp;
                //Log.d(null, "Item downloaded: " + url);  

                handler.sendMessage(message);
            }
        }  
    });  
}  

/**
 * Method that download the image
 * @param url The url image.
 * @return Returns the drawable associated to this image.
 */
private Drawable downloadDrawable(String url) {  
    try {  
        InputStream is = getInputStream(url);

        Drawable drawable = Drawable.createFromStream(is, url);
        putDrawableInCache(url,drawable);  
        return drawable;  

    } catch (MalformedURLException e) {  
        e.printStackTrace();  
    } catch (IOException e) {  
        e.printStackTrace();  
    }  

    return null;  
}  

/**
 * This method manage the connection to download the image.
 * @param urlString url of the image.
 * @return Returns an InputStream associated with the url image.
 * @throws MalformedURLException
 * @throws IOException
 */
private InputStream getInputStream(String urlString) throws MalformedURLException, IOException {
    URL url = new URL(urlString);
    URLConnection connection;
    connection = url.openConnection();
    connection.setUseCaches(true); 
    connection.connect();
    InputStream response = connection.getInputStream();

    return response;
}
} 
```

易于使用，只需声明：

```
 DrawableBackgroundDownloader drawableDownloader = new DrawableBackgroundDownloader(); 
```

你想在哪里使用：

```
drawableDownloader.loadDrawable(String urlImage, ImageView iView,Drawable drawable); 
```

其中 drawable 是在图像下载期间显示的 Drawable。

# batch-file - 如何为 pkcs ftp 上传编写批处理？

> ID：16055377
> 
> 赞同：0
> 
> 时间：2013-04-17T08:38:31.000
> 
> 标签：batch-file, ftp, cryptography, private-key

我正在尝试编写一个脚本，它会自动连接到 ftp 服务器并上传两个简单的文件。我在互联网上找到了许多通过批处理文件将文件上传到 ftp 服务器的指南，而且效果很好。

我的问题是，我需要使用 PKCS 证书连接到服务器。甚至可以用批处理编写这样的脚本吗？

如果没有，还有其他可能吗？

系统：Windows 7.7601

当前脚本：

```
set tempftp=fileserver.ftp
:# create ftp-script
echo OPEN xxx.xx.xx.xx > %tempftp%
echo USER username pwd >> %tempftp%

rem not working:
echo cd FTP

echo send %1 >> %tempftp%
echo disconnect >> %tempftp%
echo quit >> %tempftp%
:# execute
ftp.exe -n -i -s:%tempftp%
del %tempftp%
pause
exit 
```

亲切的问候马里奥

*“英语不是我的母语，请为清楚起见进行编辑，然后删除此评论！”*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:16:18.263

我会看一下[cUrl](http://curl.haxx.se/)，因为它有更多选项，包括用于身份验证的选项。

# extjs - 如何永久禁用按钮

> ID：16055381
> 
> 赞同：0
> 
> 时间：2013-04-17T08:38:33.253
> 
> 标签：extjs, sencha-touch, sencha-touch-2, sencha-touch-2.1

我有一个按钮，可以将联系人保存到设备，然后将按钮设置为禁用，这很好，但是每次重新打开应用程序时，按钮都会再次启用，如何永久禁用按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:59:56.363

当 en 应用程序再次启动时，它是一个新会话，因此您必须存储按钮的状态，并在每次启动时再次禁用它。

有很多方法可以存储或多或少的状态数据，选择的方法取决于您想要什么样的状态。

例如：您希望新用户启用按钮吗？如果在另一台设备上使用，您是否希望同一用户禁用该按钮？状态应该存储在不同的浏览器中，还是用户清除浏览器缓存？

您的问题并不精确，您希望或需要存储状态多长时间，但您可能需要查看 localStorage 如果您只需要存储一个或几个数据项，您可以创建一个具有一个字段的新模型每个你需要存储的数据，并给模型一个 Ext.data.proxy.LocalStorage 代理。

然后，当单击并禁用该按钮时，您还将创建一条记录并存储在浏览器中。在应用程序启动时，您必须检查记录是否存在以及 buttonShouldBeDisabled 字段的值，并据此决定是否应禁用按钮。

另一种方法是服务器端存储，但是您需要某种用户身份验证，您可以将状态/首选项等与使用用户信息一起存储，并在登录后接收。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:46:14.423

```
disabled: true 
```

在按钮配置中。

# wpf - 内容控制 VisualStateManager

> ID：16055384
> 
> 赞同：0
> 
> 时间：2013-04-17T08:38:47.173
> 
> 标签：wpf, visualstatemanager, contentcontrol

我有一个 ContentControl 将它内容绑定到一个变量

```
 <ContentControl x:Name="MyContentControl" Content="{Binding MyContent}" /> 
```

ContentControl 在我的视图中'MainPage.xaml' 当我点击一个按钮时，我的ContentControl 的内容被设置为一个新的视图，即'FirstPage.xaml'。所以我有 MainPage.xaml，它包含一个 ContentControl，内容为“FirstPage.xaml”。

问题是我在 MainPage.xaml 和 FirstPage.xaml 中设置了 VisualStateManager。

如果我在 Xaml-Editor 中测试两者的 VisualState 'Snapped'，它工作正常。问题 -> MainPage.xaml 包括 ContentControl = FirstPage.xaml。如果 MainPage.xaml 为 Snapped，则仅应用 MainPage 的 VisualState，但 ContentControl 仍将相同（ContentControl 中的 VisualState 未更改）。

那么如何在 ContentControl 中应用 VisualState？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:24:05.043

问题解决了。我必须把它放在代码隐藏中：

```
 public MainPage()
    {
        this.InitializeComponent();
        Window.Current.SizeChanged += Current_SizeChanged;  
    }

    void Current_SizeChanged(object sender, Windows.UI.Core.WindowSizeChangedEventArgs e)
    {
        VisualStateManager.GoToState(this, ApplicationView.Value.ToString(), true);
    } 
```

# python - 通过套接字进行通信的最佳方式是什么？

> ID：16055387
> 
> 赞同：2
> 
> 时间：2013-04-17T08:38:49.467
> 
> 标签：python, multithreading, sockets

我正在使用 python 套接字和线程编写应用程序。传输数据后委托数据的最佳方式是什么？我的第一个想法是为不同类型的线程使用不同的套接字，但由于某种原因，我认为这可能不是一个好主意。所以现在我在每次传输中添加一个标识字符串，然后服务器/客户端使用它来决定应该将数据添加到哪个队列。

我的问题是，最好的技术是什么？

重要的是要注意，对于我的应用程序，在主循环的每次迭代中，一些变量在所有客户端之间保持同步是至关重要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:28:45.727

如您所描述的，最简单的方法就是这样做。对于一个我必须做的涉及网络的项目，我们事先确定了一个合适的“数据包”结构，并用它来构建和处理两端的数据。

例如，我们的类似

```
COMMAND || SENDER || DATA_ASSOCIATED_WITH_COMMAND 
```

因此，当我们在客户端或服务器端收到数据时，我们能够使用分隔符将其分解。

编辑：这可能不是最好的方法，可能不是很长，但它相当基本且易于实施

# javascript - 使用 javascript 将数据写入本地文本文件

> ID：16055391
> 
> 赞同：9
> 
> 时间：2013-04-17T08:39:04.843
> 
> 标签：javascript, jquery, html, file-io, hta

我创建了一个将内容写入本地计算机中的文本文件的过程。

```
<form id="addnew">
    <input type="text" class="id">
    <input type="text" class="content">
    <input type="submit" value="Add">
</form>
<script>
    jQuery(function($) {
        $('#form_addjts').submit(function(){
            writeToFile({
                id: $(this).find('.id').val(), 
                content: $(this).find('.content').val()
            });
            return false;
        }); 
        function writeToFile(data){
            var fso = new ActiveXObject("Scripting.FileSystemObject");
            var fh = fso.OpenTextFile("D:\\data.txt", 8);
            fh.WriteLine(data.id + ',' + data.content);
            fh.Close(); 
        } 
    }); 
</script> 
```

这工作正常，并且能够将我的新数据附加到文件中。

但我想根据我传递的 ID 更新特定的行内容。
我搜索了很多，但找不到任何东西。

如何根据 ID 更新文件中的特定行？

注意：- 我没有使用任何这样的服务器。我有一个 html 文件（包含所有功能），我将在本地机器上运行它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-10T00:33:26.547

我们的 HTML：

```
<div id="addnew">
    <input type="text" id="id">
    <input type="text" id="content">
    <input type="button" value="Add" id="submit">
</div>

<div id="check">
    <input type="text" id="input">
    <input type="button" value="Search" id="search">
</div> 
```

JS（写入txt文件）：

```
function writeToFile(d1, d2){
    var fso = new ActiveXObject("Scripting.FileSystemObject");
    var fh = fso.OpenTextFile("data.txt", 8, false, 0);
    fh.WriteLine(d1 + ',' + d2);
    fh.Close();
}
var submit = document.getElementById("submit");
submit.onclick = function () {
    var id      = document.getElementById("id").value;
    var content = document.getElementById("content").value;
    writeToFile(id, content);
} 
```

检查特定行：

```
function readFile(){
    var fso = new ActiveXObject("Scripting.FileSystemObject");
    var fh = fso.OpenTextFile("data.txt", 1, false, 0);
    var lines = "";
    while (!fh.AtEndOfStream) {
        lines += fh.ReadLine() + "\r";
    }
    fh.Close();
    return lines;
}
var search = document.getElementById("search");
search.onclick = function () {
    var input   = document.getElementById("input").value;
    if (input != "") {
        var text    = readFile();
        var lines   = text.split("\r");
        lines.pop();
        var result;
        for (var i = 0; i < lines.length; i++) {
            if (lines[i].match(new RegExp(input))) {
                result = "Found: " + lines[i].split(",")[1];
            }
        }
        if (result) { alert(result); }
        else { alert(input + " not found!"); }
    }
} 
```

将这些放在一个`.hta`文件中并运行它。在 W7、IE11 上测试。它正在工作。另外，如果您要我解释发生了什么，请说出来。

# mysql - 如何将空值与mysql表中几列的非空值合并？

> ID：16055400
> 
> 赞同：1
> 
> 时间：2013-04-17T08:39:52.283
> 
> 标签：mysql

我有以下示例表：

```
 || *Column 1* || *Column 2* || *Column 3* || *Column 4* || 
 ||     a      ||   null     ||     b      ||     a      || 
 ||     b      ||     f      ||    null    ||     f      ||
 ||   null     ||     a      ||     a      ||     b      || 
```

结果表必须是：

```
 || *Column 1* || *Column 2* ||
 ||     a      ||     b      ||
 ||     b      ||     f      ||
 ||     a      ||     b      || 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T08:49:07.397

```
SELECT one,
    CASE WHEN one != two THEN two
        WHEN one != three THEN three
        WHEN one != four THEN four END AS two
FROM (  SELECT COALESCE(col1, col2, col3, col4) AS one,
            COALESCE(col2, col3, col4, col1) AS two,
            COALESCE(col3, col4, col1, col2) AS three,
            COALESCE(col4, col1, col2, col3) AS four
        FROM four_columns) AS h 
```

考虑到您希望在示例中得到什么结果，想不出更简单的解决方案。

由于仅存在 2 列，这显然已经过时了这 4 列具有超过 2 个不同字母的情况。但它不会显示重复，也不会显示`NULL`是否至少有 2 个唯一字母。

*   **[MySQL 合并（）](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:46:27.827

如果我理解你，你想要做的是将第 3 列与第 1 列合并，将第 4 列与第 2 列合并。

[这篇文章](https://stackoverflow.com/questions/5410166/merge-columns-in-mysql-select/5410259#5410259)已经回答了以下问题。

# python - Setuptools 平台特定依赖项

> ID：16055403
> 
> 赞同：12
> 
> 时间：2013-04-17T08:39:58.283
> 
> 标签：python, setuptools

有没有办法告诉 setuptools 或分发需要特定平台上的包？

在我的具体情况下，我使用`readline`的是 Unix 系统标准库的一部分，但在 Windows 上，我需要该`pyreadline`模块来替换该功能（参见[这个问题](https://stackoverflow.com/questions/6024952/readline-functionality-on-windows-with-python-2-7)）。如果我只是把它放在要求它也安装在完全没用的Unix系统上。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-10-05T18:36:06.040

虽然 Martijn Pieters 给出的[答案](https://stackoverflow.com/a/16055603/1154610)在当时是完全有效的，但 Python 封装从那时起发生了很大变化。

分发包的首选格式是使用[轮子](https://wheel.readthedocs.org/en/latest/)*. 使用轮子在安装期间无法运行 Python 代码。

[Wheel 使用PEP 0427](https://www.python.org/dev/peps/pep-0426/)中指定的元数据版本二。[环境标记](https://www.python.org/dev/peps/pep-0426/#environment-markers)可用于指定特定于平台的依赖项。

Setuptools 允许将这些环境标记指定为`extras_require`键。以下示例脚本依赖于`pyreadline`Windows 系统和`pyxdg`Linux 发行版。

```
#!/usr/bin/env python
from setuptools import setup

setup(
    name='spam',
    version='0.0.1',
    extras_require={
        ':sys_platform == "win32"': [
            'pyreadline'
        ],
        ':"linux" in sys_platform': [
            'pyxdg'
        ]
    }) 
```

*同时发布一个sdist，所以不能使用wheel的平台仍然可以安装你的包。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-17T08:49:50.777

2013 年，当我第一次在这里写答案时，我们还没有[PEP 496 – *Environment Markers*](https://www.python.org/dev/peps/pep-0496/)和[PEP 508 – *Dependency specification for Python Software Packages*](https://www.python.org/dev/peps/pep-0508/)。既然我们这样做了，答案是：将环境标记放在您的`setup_requires`:

```
setup_requires = [
    'foo',
    'bar',
    'pyreadline; sys_platform == "win32"',
]

setup(
    # ...
    setup_requires=setup_requires,
) 
```

[`setuptools`从 2016 年 5 月发布的20.6.8 开始](https://setuptools.readthedocs.io/en/latest/history.html#v20-6-8)支持此功能（支持在[20.5 版本](https://setuptools.readthedocs.io/en/latest/history.html#id401)中引入，但在中间版本中被短暂禁用）。

请注意，setuptools 将在执行时用于安装这些需求，这在用于安装项目`easy_install`时很难配置。`pip`

最好*不要*使用 setuptools 来处理构建时依赖项，并使用遵循[PEP 518 –](https://www.python.org/dev/peps/pep-0518/)[*指定 Python 项目的最低构建系统要求*](https://www.python.org/dev/peps/pep-0518/)`pyproject.toml`的建议的文件。使用带有内置依赖项的 PEP 518 构建系统，意味着创建一个看起来像这样的文件：[](https://www.python.org/dev/peps/pep-0518/)*`pyproject.toml`*

 *```
[build-system]
requires = [
    "setuptools",
    "wheel",
    "foo",
    "bar",
    "pyreadline; sys_platform == "win32",
] 
```

这是相同的列表，`setup_requires`但添加`setuptools`和`wheel`添加。从 2018 年 3 月发布的`pip`10.0.0[版本](https://pip.pypa.io/en/stable/news/#b1-2018-03-31)开始支持此语法。

从 2013 年开始，我的旧答案如下。

* * *

`setup.py`只是一个python脚本。您可以在该脚本中创建动态依赖项：

```
import sys

setup_requires = ['foo', 'bar']

if sys.platform() == 'win32':
    setup_requires.append('pyreadline')

setup(
    # ...
    setup_requires=setup_requires,
) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-01-07T11:30:28.170

如果需要支持旧版本，其他答案是有效的并且可能更方便`setuptools`，但已经有了一些进步：

最新版本的 setuptools 接受[PEP 508](https://www.python.org/dev/peps/pep-0508/)样式依赖规范：

```
setup(
    # ...
    install_requires=[
        'pyreadline; platform_system == "Windows"',
    ],
) 
```

选择正确的参数：

*   `install_requires`：当前发行版需要哪些其他发行版才能正常工作
*   `extras_require`：将可选功能的名称映射到其要求列表的字典
*   `setup_requires`：安装脚本正确运行需要*存在*`setup_requires`的其他发行版 注意：不会自动安装中列出的项目。如果它们在本地不可用，它们只需下载到 ./.eggs 目录。

还有另一种通过`setup.cfg`文件提供这些参数的方法。[有关更多信息，请参阅文档](http://setuptools.readthedocs.io/en/latest/setuptools.html#configuring-setup-using-setup-cfg-files)。

[PEP 518](https://www.python.org/dev/peps/pep-0518/)引入了一种新的、更强大的`setup_requires`在`pyproject.toml`文件中指定的方法：

```
[build-system]
# Minimum requirements for the build system to execute.
requires = ['setuptools>"38.3.0"', 'wheel']  # PEP 508 specifications. 
```

该功能在[pip 10.0.0b1](https://pip.pypa.io/en/stable/news/#b1-2018-03-31)中实现。使用它可以自动安装和更新构建系统要求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-08T02:12:23.520

```
from setuptools import setup

setup(
    install_requires=(['pymsgbox', 'PyTweening>=1.0.1', 'Pillow', 'pyscreeze']
                    + ["python3-xlib; sys_platform == linux"]
                    + ["python-xlib; sys_platform == linux2"]
                    + ["pyobjc-core; sys_platform == darwin"]
                    + ["pyobjc; sys_platform == darwing"]
                    ),
) 
```

这将安装特定版本的库，具体取决于它是`linux2`（对于使用 的 linux 系统`python2`）、`linux`（对于使用 的 linux 系统`python3`）、`darwin`（对于 MacOS 系统）*

# backbone.js - 如何在我的路线中使用模型中的过滤器

> ID：16055419
> 
> 赞同：1
> 
> 时间：2013-04-17T08:40:50.703
> 
> 标签：backbone.js

如果我在我的集​​合中定义了一个过滤器，如下所示：

```
filterByEveryday: function(){
    return this.models.filter(
      function(c) { 
        return c.Everyday == true; 
      })
   } 
```

如何在我的路线中使用该过滤器来选择每天的早餐？

我的路线看起来像这样（目前正在获取所有食物）

```
 products: function(type){
    console.log('product' + type );
    Breakfast.foods = new Breakfast.Collections.Foods()

    new Breakfast.Views.Foods({ collection: Breakfast.foods }); 
    Breakfast.foods.fetch();
    console.log(Breakfast.foods.filterByEveryday().length)
  }, 
```

这里有几个问题。
1\. Breakfast.foods.filterByEveryday().length 返回 0。即使我将测试更改为 true。我想我用错了吗？2\. 路由中好像有很多逻辑，这对主干来说正常吗？似乎它应该在视图中，但我不确定如何重构它并拥有每个路由过滤器。
3.尝试将过滤后的集合传递给视图，如下所示：

```
collection: Breakfast.foods.filterByEveryday() 
```

给我

```
TypeError: Object [object Array] has no method 'bind' 
```

所以我想那也是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:12:20.123

我会回答你的第一个和第三个问题。关于逻辑，我会说做你想做的事；）请记住，尽管您这样做的方式是，如果有人两次导航到同一条路线，您将两次获取您的收藏，依此类推...

所以让我们开始吧。您可能认为您的过滤器调用有问题。错误的。您的问题来自之前的一行：`Breakfast.foods.fetch();`. AJAX 调用默认是**异步的。**有些，当您调用时`filter`，您的数据还没有从服务器返回。因此，长度为 0（集合本身的长度为 0）。我邀请你看看我刚刚回答的[那个问题，看看在这里做什么。](https://stackoverflow.com/questions/16055153)

现在，关于原因`collection: Breakfast.foods.filterByEveryday()`给你一个错误。问题本质上并不来自 Backbone。问题是你在你创建的对象中做了什么。`Breakfast.foods.filterByEveryday()`将返回一个**数组**，而不是一个集合。因此，当（我假设）你在`this.collection.bind(...)`之后做一个时，你试图将一个监听器绑定到一个没有 bind 方法的**数组。**我会让你在众多监听子集合的事件中找到一个解决方案。尽管如此，我还是想坚持使用[Events#listenTo](http://backbonejs.org/#Events-listenTo)方法（从 Backbone 0.9 开始），它（可以说，但从我的角度来看）更好地绑定侦听器（删除它们并设置上下文更容易）。

最后，我想说过滤器在你使用它的方式上没有用。[Collection#where](http://backbonejs.org/#Collection-where)和[Collection#findWhere](http://backbonejs.org/#Collection-findWhere)是在这种情况下使用的方法。

# c++ - 线程中的 getline 访问冲突 + boost::function

> ID：16055420
> 
> 赞同：3
> 
> 时间：2013-04-17T08:40:52.837
> 
> 标签：c++, boost, getline

我打算编写一个`std::cin`在线程中读取并在输入内容时调用回调的类。回调是一个`boost::function`. 如果我只有 ，则代码运行`std::getline (std::cin, command);`，但如果我添加行，则会因“访问冲突”而崩溃`if(this->m_receiveHandler != NULL)`。我真的找不到发生了什么，所以我将问题简化为以下测试。

问题不是完全确定的，有时我可以输入一两行，有时它会立即崩溃。程序输出的最后一件事始终是“访问接收器处理程序”。

```
class InputReader
{
private:
    boost::function<void (const char*, unsigned int) > m_receiveHandler;
    boost::thread m_receiveThread;

    void receiveLoop(void)
    {

        while(true)
        {
            std::string command;
            std::getline (std::cin, command);
            std::cout << "access receiver handler" << std::flush;               
            if(this->m_receiveHandler != NULL)
            {
            }           
        }

    }

public:
    InputReader()
    {
        m_receiveThread = boost::thread(boost::bind(&InputReader::receiveLoop, this));
    }

};

TEST(InputReaderTest, WaitInfinite)
{
    InputReader reader;
    while (true) {};
} 
```

你觉得这段代码有什么问题吗？

编辑：我在带有 Boost 1.49 的 Suse Linux 上使用 GCC 4.3.2 进行编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:11:48.153

我刚刚在 OSX 上用 clang 试过这个，它可以工作（虽然用 std 代替了 boost）。当您在不同的公共成员函数中启动线程时会发生什么？boost 函数变量实际上是两个线程之间的共享变量，应该受到一些并发原语的保护。线程实际上可能会看到“this”对象的不完整快照。它没有解释为什么它在失败之前工作了两次。如果您知道在构造时接收处理器将是什么并且您不需要更改它，您可以选择将 boost::function 作为参数传递给线程（复制甚至移动都可以）。

# javascript - javascript将html div中的内容复制到我创建的另一个页面中

> ID：16055423
> 
> 赞同：0
> 
> 时间：2013-04-17T08:40:54.983
> 
> 标签：javascript, jquery, html, webpage

我需要用 javascript 或 jquery 编写的东西来复制页面的内容（例如，有一个带有 html 表格的页面，其中有很多关于我所在城市天气的字段，我想复制这些字段（早上：10°C，下午：15°C，晚上：11°C），在我将创建的网页中）。显然，必须每 X 分钟（例如 30 分钟）重新加载字段，因为包含天气的字段每 X 分钟在其数据库中重新加载。

我希望我的英语不是很差，所以你可以帮助我解决这个问题。谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:48:47.363

[由于Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)，您无法使用 JavaScript 执行此操作。您需要使用 PHP 下载此页面，然后解析您的值。您可以使用例如[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)来处理下载的页面，例如使用 JavaScript（他们的网站上有示例，所以我不在这里附加示例代码）...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:52:42.290

我猜你要问的是[web Scraping](http://en.wikipedia.org/wiki/Web_scraping)。

有一个名为[PJScrape](http://nrabinowitz.github.io/pjscrape/)的 Javascript 框架来处理这个问题，可能还有其他框架，G* 搜索应该对您有所帮助。

[在stackexchange](https://stackoverflow.com/questions/5667880/simple-screen-scraping-using-jquery)上还有一个关于简单抓取的问题。

# sql-server-2008 - 从备忘录运行复杂的 SQL 脚本（多行）

> ID：16055425
> 
> 赞同：0
> 
> 时间：2013-04-17T08:41:08.347
> 
> 标签：sql-server-2008, delphi, ado

我在使用 ADO 和 MSSQL server 时执行 sql 脚本。在[这里](https://stackoverflow.com/questions/3829271/how-can-i-clone-an-sql-server-database-on-the-same-server-in-sql-server-2008-exp/3830948#3830948)，您将找到多行 sql 语句的第一个示例，例如：

```
 use master;
 go;
 EXEC sp_detach_db
     @dbname=N'DATABASENAME';
 go; 
```

我将这些行从 Tmemo 复制到我的 TADOQuery.sql.text 但失败，因为 go 语句已经无法识别并且我得到 mssql 服务器的关键字错误。我可以将整个 sript 作为一个 TQquery 运行，还是将我的查询分成几部分，用分号分隔并遍历整个文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:43:20.407

您必须在不发送的情况下拆分每个语句`go`。SQL-Server 不解释 GO，这是由 MSSMS 完成的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T09:06:34.960

起初您的代码无效（否 ; 之后`GO`）并且必须是这样的

```
USE master;
GO
EXEC sp_detach_db
    @dbname=N'DATABASENAME';
GO 
```

实际上`GO`是 MSSMS 用来分隔 SQL 语句的分隔符。

如果您想使用与 MSSMS 相同的脚本，则必须像 MSSMS 一样使用。

1.  通过分隔符将脚本拆分为单个部分`GO`
2.  将每个部分发送到数据库

# html - 使用 XML 数据岛时没有记录

> ID：16055427
> 
> 赞同：1
> 
> 时间：2013-04-17T08:41:17.870
> 
> 标签：html, xml

有简单的 html 里面有 xml：

```
<html>
<head>
    <title>XML Data Islands</title>
    <link href="styles.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <h2>
        Binding XML Data Islands to Elements</h2>

    <xml id="#myXmlDataSource">
        <items>
            <item id="item1">
                <name>Mocha</name>
                <type>Coffee</type>
                <photo>photos/candles.jpg</photo>
            </item>
            <item id="item2">
                <name>Decaf</name>
                <type>Coffee</type>
                <photo>photos/teacup.jpg</photo>
            </item>
        </items>

    </xml>
    <table datasrc="#myXmlDataSource" border="1">
        <thead>
            <tr>
                <th>
                    Photo</th>
                <th>
                    Description</th>
                <th>
                    Type</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <img datafld="photo"/>
                </td>
                <td>
                    <span title=  "name"/>
                </td>
                <td>
                    <span datafld="type"/>
                </td>
            </tr>
        </tbody>
    </table>

</body>
</html> 
```

不幸的是，记录没有显示在表格中。没有图片也没有文字。问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:56:19.083

[XML 数据岛](http://msdn.microsoft.com/en-gb/library/ie/hh801224%28v=vs.85%29.aspx)是 Internet Explorer 独有的功能，已在 IE10 中删除。例如，以目前的形式，这将**永远无法**在 Chrome 或 Firefox 中运行。

但是，您可能想看看[在 Mozilla 中使用 XML 数据岛，](https://developer.mozilla.org/en/docs/Using_XML_Data_Islands_in_Mozilla)它解释了它如何使用 HTML5“数据块”工作。这将是更跨浏览器兼容的解决方案。

我没有 IE9，但如果以下更改对您不起作用，[使用 IE9 更新 XML 数据岛可能会有所帮助。](https://stackoverflow.com/questions/11552366/updating-xml-data-islands-with-ie9)我已经在 IE8 中成功地测试了这些。

您的代码中有两个小错误。

一个元素`id`不应该包含`#`（这就是属性`id`所表示的）

```
<xml id="#myXmlDataSource">
         ^
         remove this 
```

`<span title= "name"/>`应该是`<span datafld="name"/>`。

# java - 在二叉搜索树上实现 trie

> ID：16055431
> 
> 赞同：0
> 
> 时间：2013-04-17T08:41:53.997
> 
> 标签：java, algorithm, binary-search-tree, trie

我正在尝试使用 BST（二叉搜索树）数据结构之一来构建一个 trie。

**我的问题是二叉搜索树会是什么样子？我的意思是正常的 BST 将具有 right node 、 left node 和一个值的引用。**

**如果我尝试构建 trie，结构会改变吗？**

# delphi - 如何从物理内存中读取？

> ID：16055432
> 
> 赞同：3
> 
> 时间：2013-04-17T08:41:57.967
> 
> 标签：delphi, assembly

我想在Delphi，Assembly中从Windows 7 64位的物理内存中读取。如何从物理内存中读取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:42:38.300

由于 Windows 上的虚拟内存保护，您无法从用户空间读取物理内存。为了从物理内存中读取，您需要在内核空间中执行代码。

# jquery - 在jquery中获取json的元素值

> ID：16055433
> 
> 赞同：0
> 
> 时间：2013-04-17T08:41:58.353
> 
> 标签：jquery, json

见下面我的 json 数组

```
[{'message_id':'1'}{'message_id':'2'}] 
```

如何进入`message_id`jQuery 请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:03:21.920

```
var json_arr = [{'message_id':'1'},{'message_id':'2'}];
for(var i = 0; i < json_arr.length; i++){
  alert(json_arr[i].message_id);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:43:38.210

像这样循环json数组

```
var jsondata = [{'message_id':'1'},{'message_id':'2'}];
for(i=0; i<jsondata.length;i++) {
   console.log(jsondata[i].message_id);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:43:45.847

您需要使用索引器，两个对象之间也缺少逗号。

```
yourobjArr = $.parseJSON("[{'message_id':'1'}, {'message_id':'2'}]");
yourobjArr[0].message_id 
```

遍历所有数组元素

```
for(i=0; i< yourobjArr.length;i++) 
{
    message_id =  yourobjArr[i].message_id;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T08:44:14.050

为此，您不需要 jQuery：

```
var arr = [{'message_id':'1'}, {'message_id':'2'}];
var ids = [];
arr.map(function (item) {
   ids.push(item["message_id"]);
});
console.log(ids); //all ids will be stored here. 
```

**或者**

```
var arr = [{'message_id':'1'}, {'message_id':'2'}];
var firstId = arr[0]["message_id"]; //access the particular id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T08:53:07.823

尝试使用这个：

```
arr = [{'message_id':'1a'},{'message_id':'2a'}];
for(var j = 0; j < arr.length; j++){
    alert(arr[j]['message_id']);
} 
```

`[**JSFIDDLE**](http://jsfiddle.net/arulmr/3b2Qg/)`

# excel - 将 MS Access 2010 表导出到 Excel 2010

> ID：16055437
> 
> 赞同：2
> 
> 时间：2013-04-17T08:42:02.243
> 
> 标签：excel, export

我在使用一些代码以 Excel 2010 格式从 MS Access 2010 导出表格时遇到问题。代码在 Access 中运行良好并创建了文件。但是，当我尝试在 Excel 2010 中打开文件时，我收到如下错误消息：

Excel 无法打开文件，因为文件格式或文件扩展名无效。

这是代码

```
 DoCmd.TransferSpreadsheet transfertype:=acExport, _
      spreadsheettype:=acSpreadsheetTypeExcel12, _
      TableName:="Table1", FileName:="C:\MyDocuments\Myfile.xlsx" 
```

提前谢谢了

米

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T09:13:26.673

改为使用`acSpreadsheetTypeExcel12Xml`，因为`acSpreadsheetTypeExcel12`可能会导致版本问题（不一致）...

# iphone - 如何使用 monotouch 框架在 ipad 上绘制渐变线

> ID：16055439
> 
> 赞同：1
> 
> 时间：2013-04-17T08:42:09.990
> 
> 标签：iphone, ios, ipad, xamarin.ios

我正在使用“DrawLinearGradient”函数使用 monotuch 框架在 ipad 上绘制渐变线。但是我使用的 2 种颜色并没有在一条线上平均划分。

```
CGColor[] colors = {UIColor.Red.CGColor,UIColor.Green.CGColor};
CGColorSpace colorSpace = CGColorSpace.CreateDeviceRGB();
float dWidth = 2*width;

float[] locations = {0.0f,0.5f,1.0f} ;
CGGradient gradient = new CGGradient(colorSpace,colors,locations);
ColorMessage.FontSize = width;
context.SetLineWidth(width);
context.SaveState();
context.Clip();
    context.DrawLinearGradient(gradient,penVertices[i],penVertices[i+1],0);
context.StrokePath();
gradient.Dispose();
colorSpace.Dispose();
context.RestoreState(); 
```

任何人都可以帮助解决这个问题。

# java - 计算方法调用堆栈大小以检查 StackOverflowException

> ID：16055441
> 
> 赞同：11
> 
> 时间：2013-04-17T08:42:16.833
> 
> 标签：java, recursion, stack, callstack, stack-size

今天早上我回答了一个与 StackoverflowException 相关的问题。该人已询问何时发生 Stackoverflow 异常

请参阅此链接[在 C#、C++ 和 Java 中导致堆栈溢出的最简单方法](https://stackoverflow.com/questions/16053559/simplest-ways-to-cause-stack-overflow-in-c-c-and-java/16053616#16053616)

所以我的问题是，是否有任何方法可以在我们的程序中动态计算方法调用堆栈的大小，然后在调用方法之前应用检查，检查方法调用堆栈是否有空间来容纳它以防止 StackOverflowException。

因为我是一个 java 人，所以我在寻找 java，但也在寻找与这个概念相关的解释，不受任何编程语言的限制。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-20T03:54:12.260

对于 32 位 JVM，JVM 可用的总内存约为 2-4GB，对于 64 位 JVM（约 4-16EB）。JVM 将其内存拆分为：

1.  堆内存**（分配通过 JVM 选项 -Xms 和 -Xmx 控制）**

    *   构造对象和数组实例
    *   静态类和数组数据（包括包含的对象/数组实例）
    *   线程实例（对象实例、运行时数据和元数据，包括线程对象监视器锁引用）
2.  非堆内存

    *   聚合堆栈内存
        *   每线程堆栈内存**（通过 JVM 选项 -Xss 控制的每线程分配）**：方法调用帧、参数、返回值、本地声明的原语和对对象的引用
    *   静态常量（原语）
    *   字符串实例池
    *   java代码：加载的类和元数据
    *   JVM 内部使用内存（JVM 代码和数据结构）

请参阅[http://docs.oracle.com/javase/7/docs/api/java/lang/management/MemoryMXBean.html](http://docs.oracle.com/javase/7/docs/api/java/lang/management/MemoryMXBean.html)和[http://www.yourkit.com/docs/kb/sizes.jsp](http://www.yourkit.com/docs/kb/sizes.jsp)

> ***是否有任何方法可以在我们的程序中动态计算方法调用堆栈大小***

1.  Java SE/Java EE 中没有包含标准方法来获取每个线程堆栈的实际内存使用情况。
2.  获取聚合非堆内存的标准方法是：[MemoryMxBean.getNonHeapMemoryUsage()](http://docs.oracle.com/javase/7/docs/api/java/lang/management/MemoryMXBean.html#getNonHeapMemoryUsage%28%29)。引用 this 不允许您做出动态的代码内决策以避免`StackOverflow`异常
3.  有一些标准方法可以在不占用内存的情况下获取调用堆栈： [Thread.getStackTrace()](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#getStackTrace%28%29) [ThreadMxBean.getThreadInfo()](http://docs.oracle.com/javase/7/docs/api/java/lang/management/ThreadMXBean.html#getThreadInfo%28long,%20int%29) & [ThreadInfo.getStackTrace()](http://docs.oracle.com/javase/7/docs/api/java/lang/management/ThreadInfo.html#getStackTrace%28%29)

**我建议您不要执行问题中的建议，因为：**

*   如果没有一些复杂的特定于 JVM 的 API 来检测/内省动态线程堆栈内存使用情况，你就无法做到这一点——你在哪里可以找到这样的 API？
*   **相对于整个 JVM，每个线程堆栈通常会消耗少量内存，因此通常很容易分配足够的内存以适合您的算法**（例如，Windows 64 位 JVM 的默认堆栈大小为 128KB，而 2GB 的内存可能已被预算用于整个JVM）
*   它的功能非常有限：如果您的逻辑确实需要调用一个方法，但由于内存不足而无法调用，那么您的程序就会在那时被破坏。`StackOverflow`例外实际上是最好的回应。
*   您尝试做的可能是**反设计反模式**。
    “正确”的方法是指定程序要求，指定所需的运行时环境（包括最小/需要的内存！），并相应地设计您的程序以获得最佳性能和内存使用。

    一个反模式是在设计和开发过程中不适当地考虑这些事情，只是想象一些运行时内省魔法可以解决这个问题。可能存在一些（罕见！）高性能要求的应用程序，它们需要在运行时彻底重新排列算法以完全匹配发现的资源 - 但这是复杂、丑陋且昂贵的。

    即便如此，从“-Xss”参数在宏观层面上驱动动态算法更改可能会更好，而不是在代码中某个位置的确切堆栈内存消耗的微观层面上。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-26T13:10:52.843

我希望我猜到你真正在问什么。起初我以为你在问你的电话要打多少电话。换句话说，我认为您想知道根据您当前的方法环境触发此异常的可能性有多大。然后我决定你真的想知道你必须玩多少筹码深度。在这种情况下，这里还有另一个堆栈溢出问题似乎可以解决这个问题。 [java调用栈的最大深度是多少？](https://stackoverflow.com/questions/4734108/what-is-the-maximum-depth-of-the-java-call-stack)

这告诉您如何将其设置为 java 命令行参数（对于 java，而不是您的程序）。

无论哪种方式，我想指出堆栈溢出主要发生在我有无休止的递归时。我已经编写了调用自己的方法（当然是错误的），并且本应在问题解决时停止，但不知何故从未达到终止条件。这会一遍又一遍地将方法调用放到堆栈上，直到超过最大值。不是我想的那样。

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-20T04:04:28.180

据我所知，Java 中的堆栈限制是非常抽象的，不适合测量。事实上，我怀疑堆栈大小会因机器而异，这取决于内存等几个因素。

除了无限循环/递归之外，我从来没有让程序抛出堆栈溢出异常。我正在挠头，试图弄清楚如何在没有无限循环的情况下抛出堆栈溢出异常。如果你的程序调用了这么多方法，那么它很可能同时创建对象，与没有无限循环的堆栈溢出异常相比，你更有可能收到 OutOfMemory 错误。

事实上，堆栈限制到底有什么意义，可能会限制你正常运行的能力？Java 有内存限制来照顾你过度使用资源。堆栈溢出的目的是捕获已经运行异常并需要捕获的循环/递归。

我想说的是：如果堆栈溢出异常困扰您的单元测试，您应该检查那些循环/递归函数是否有一些失控的行为。调用堆栈非常非常长，我怀疑您是否自然而然地到达了它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T08:45:20.437

我认为您可以使用`StackTrace` 以下方法获取方法调用堆栈大小

```
 StackTraceElement[] stacktrace = Thread.currentThread().getStackTrace(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-21T05:56:23.060

好吧，您可以使用类似于 C 中存在的东西和 Microsoft C++ 编译器：一个特定的函数（我不记得名字），它在每个开始和结束函数上自动调用。

此外，您可以通过在 start 函数之后和 end 函数之前递增和递减全局计数器来计算调用和子调用的数量。

例如，使用 Microsoft .NET，您可以插入一些函数调用来在每次调用时递增和递减全局计数器。它是 JIT 设计的。

您还可以使用 nosql 数据库来存储您的呼叫。

此外，还有另一件事：使用自动跟踪您的呼叫的日志系统。

此外，当您的调用堆栈已满时，有时它是由递归函数引起的。只需几行代码和一个对象，您就可以在每次调用时在每个函数上存储一些传播。该解决方案还可用于在任何功能中检测一个特殊的东西：“谁在打电话给我？”

此外，由于 Java 是生成的字节码，因此您可以检测函数调用的字节码，并在另一个函数调用之前和另一个函数调用之后插入，以添加您的自定义堆栈。

# asp.net-mvc - ASP.NET MVC。如何禁止在 URL 中显示默认文化？

> ID：16055444
> 
> 赞同：3
> 
> 时间：2013-04-17T08:42:19.630
> 
> 标签：asp.net-mvc, localization, asp.net-mvc-routing

这是问题。我有一个本地化的 asp.net mvc 网站。后续步骤完成的本地化： 1\. 对于每条路线，我自动添加一个 {culture} url 段，默认值为“ru”。

我希望我的网址仅适用于外国文化。例如：

```
http://mysite.com/ua/contacts - ukrainian
http://mysite.com/fr/contacts - francis
http://mysite.com/contacts - russian 
```

我无法做到这一点，因为@Url.Action 方法总是返回带有文化的url，即使它是默认文化。请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:25:46.760

```
 routes.MapRoute(
                "Default",                                              // Route name
                "{controller}/{action}/{id}",                           // URL with parameters
                new { controller = "Home", action = "Index", id = "" }  // Parameter defaults
            ); 
```

作为基础，您可以在这里找到解决方案
[http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs) 和 msdn
[http:// msdn.microsoft.com/en-us/library/cc668201(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/cc668201(v=vs.100).aspx)

# android - 如何在 5 分钟内获取一次 gps 位置 android？

> ID：16055447
> 
> 赞同：7
> 
> 时间：2013-04-17T08:42:25.343
> 
> 标签：android, gps, background-process

嗨，任何人都可以给我一个示例代码，以每五分钟获取一次位置，请我尝试过，我可以通过单击按钮获取一次位置，但我需要它显示一次五分钟。

谢谢你

这是我的代码：

```
public void checkLocation(View v) {

        //initialize location manager
        manager =  (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        //check if GPS is enabled
        //if not, notify user with a toast
        if (!manager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
            Toast.makeText(this, "GPS is disabled.", Toast.LENGTH_SHORT).show();
        } else {

            //get a location provider from location manager
            //empty criteria searches through all providers and returns the best one
            String providerName = manager.getBestProvider(new Criteria(), true);
            Location location = manager.getLastKnownLocation(providerName);

            TextView tv = (TextView)findViewById(R.id.locationResults);
            if (location != null) {
                tv.setText(location.getLatitude() + " latitude, " + location.getLongitude() + " longitude");
            } else {
                tv.setText("Last known location not found. Waiting for updated location...");
            }
            //sign up to be notified of location updates every 15 seconds - for production code this should be at least a minute
            manager.requestLocationUpdates(providerName, 15000, 1, this);
        }
    }

    @Override
    public void onLocationChanged(Location location) {
        TextView tv = (TextView)findViewById(R.id.locationResults);
        if (location != null) {
            tv.setText(location.getLatitude() + " latitude, " + location.getLongitude() + " longitude");
        } else {
            tv.setText("Problem getting location");
        }
    }

    @Override
    public void onProviderDisabled(String arg0) {}

    @Override
    public void onProviderEnabled(String arg0) {}

    @Override
    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {}

    // Find the closest Bart Station
    public String findClosestBart(Location loc) {
        double lat = loc.getLatitude();
        double lon = loc.getLongitude();

        double curStatLat = 0;
        double curStatLon = 0;
        double shortestDistSoFar = Double.POSITIVE_INFINITY;
        double curDist;
        String curStat = null;
        String closestStat = null;

        //sort through all the stations
        // write some sort of for loop using the API.

        curDist = Math.sqrt( ((lat - curStatLat) * (lat - curStatLat)) +
                        ((lon - curStatLon) * (lon - curStatLon)) );
        if (curDist < shortestDistSoFar) {
            closestStat = curStat;
        }

        return closestStat;

        } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-17T08:55:45.040

这是获取位置的代码并设置gps的侦听器以在几分钟和距离内获取当前位置，我也使用可运行对象每隔几分钟获取位置。

```
Location gpslocation = null;

private static final int GPS_TIME_INTERVAL = 60000; // get gps location every 1 min
private static final int GPS_DISTANCE= 1000; // set the distance value in meter

/*
   for frequently getting current position then above object value set to 0 for both you will get continues location but it drown the battery
*/

private void obtainLocation(){
if(locMan==null)
    locMan = (LocationManager) getSystemService(LOCATION_SERVICE);

    if(locMan.isProviderEnabled(LocationManager.GPS_PROVIDER)){
        gpslocation = locMan.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if(isLocationListener){
             locMan.requestLocationUpdates(LocationManager.GPS_PROVIDER, 
                        GPS_TIME_INTERVAL, GPS_DISTANCE, GPSListener);
                }
            }
        }
} 
```

现在使用此方法获取当前位置，并在每 1 分钟和 1000 米距离发生位置变化时调用侦听器。

为了每 5 分钟获取一次，您可以使用此处理程序和 runnable 在设定好的时间段内获取此位置：

```
private static final int HANDLER_DELAY = 1000*60*5;

Handler handler = new Handler();
handler.postDelayed(new Runnable() {
        public void run() {
            myLocation = obtainLocation();
            handler.postDelayed(this, HANDLER_DELAY);
        }
    }, START_HANDLER_DELAY); 
```

这是位置更改事件的 GPS 侦听器：

```
private LocationListener GPSListener = new LocationListener(){
    public void onLocationChanged(Location location) {
        // update location
        locMan.removeUpdates(GPSListener); // remove this listener
    }

    public void onProviderDisabled(String provider) {
    }

    public void onProviderEnabled(String provider) {
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
}; 
```

您可以为获取 GPS 位置的侦听器和处理程序设置相同的间隔时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:52:07.157

嗨使用下面的计时器代码。

您可以使用以下选项 **选项 1** ，如果移动设备移动 100 米，这将获得位置。

```
 captureFrequencey=3*60*1000;   
LocationMngr.requestLocationUpdates(LocationManager.GPS_PROVIDER, captureFrequencey, 100, this); 
```

看看这个链接[http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.location.LocationListener%29](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.location.LocationListener%29)

**选项 2**

```
 TimerTask refresher;
        // Initialization code in onCreate or similar:
        timer = new Timer();    
        refresher = new TimerTask() {
            public void run() {
              handler.sendEmptyMessage(0);
            };
        };
        // first event immediately,  following after 1 seconds each
        timer.scheduleAtFixedRate(refresher, 0,1000); 
        //=======================================================

final Handler handler = new Handler() {

        public void handleMessage(Message msg) {
              switch (msg.what) {
              case REFRESH: 
                  //your code here 

                  break;
              default:
                  break;
              }
          }
        }; 
```

Timer 将在您的持续时间内调用处理程序（将 1000 更改为您需要的时间）。

希望这会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T08:50:46.170

我用 runnable 来做这个，

```
 final Runnable r = new Runnable() {
        public void run() {
    //Here add your code location listener call
    handler.postDelayed(this, 300000 );
        }
    };

    handler.postDelayed(r, 300000 ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T08:53:16.973

试试这样：

```
 private Handler handler = new Handler(); 

 handler.postDelayed(runnable, 300000);

 private Runnable runnable = new Runnable() {   
    public void run() {
        if (location != null) {

            onLocationChanged(location);
        } else {
            System.out.println("Location not avilable");
        }

        handler.postDelayed(this, 300000);
    } 
}; 
```

# angularjs - AngularJS：指令中的缩小问题

> ID：16055449
> 
> 赞同：32
> 
> 时间：2013-04-17T08:42:37.370
> 
> 标签：angularjs, angularjs-directive, minify

我还有另一个关于缩小的问题。这一次是因为 $scope 服务传递给了指令的控制器。见下面的代码：

```
angular.module('person.directives').
directive("person", ['$dialog', function($dialog) {
return {
    restrict: "E",
    templateUrl: "person/views/person.html",
    replace: true,
    scope: {
        myPerson: '='
    },     
    controller: function ($scope)
    {                   
        $scope.test = 3;                   
    }
}
}]); 
```

如果我注释掉控制器部分，那么它工作正常。

正如你所看到的，我已经为指令使用了数组声明，所以 $dialog 服务即使在缩小之后也是 Angular 已知的。但是我应该如何为控制器上的 $scope 服务做呢？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-04-17T09:02:45.287

您需要声明一个控制器，如下所示：

```
controller: ['$scope', function ($scope)
    {                   
        $scope.test = 3;                   
    }] 
```

完整的例子在这里：

```
angular.module('person.directives').
directive("person", ['$dialog', function($dialog) {
return {
    restrict: "E",
    templateUrl: "person/views/person.html",
    replace: true,
    scope: {
        myPerson: '='
    },     
    controller: ['$scope', function ($scope)
    {                   
        $scope.test = 3;                   
    }]
}
}]); 
```

@Sam 提供的解决方案可以解决，但这意味着将指令的控制器暴露给整个应用程序，这是不必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:47:17.067

好的，我最终在一个单独的文件中创建了控制器：

```
angular.module('person.controllers').controller('personCtrl', ['$scope', function ($scope) {
$scope.test = 3;
}]); 
```

然后在指令中，我按名称分配控制器：

```
controller: 'personCtrl' 
```

不确定这是最好的方法。不过看起来很干净。你怎么看 ？

# javascript - 从网页安装 URI 方案的服务处理程序

> ID：16055458
> 
> 赞同：19
> 
> 时间：2013-04-17T08:43:05.880
> 
> 标签：javascript, google-chrome, gmail, uri, uri-scheme

从 Chrome 访问 Google Mail 或 Google Calendar 时，地址栏中会出现小图标，允许为 URI 方案安装自定义服务处理程序（图中用红色方块标记）。

![用于安装自定义服务处理程序的图标](https://i.stack.imgur.com/cT6Ch.png)

图标的工具提示是：`This page wants to install a service handler`。当我单击图标并允许 Google Mail 处理`mailto:`链接时，所有`mailto:`链接都在 Chrome 中打开。

是否可以像 Google Mail 一样创建能够为我的自定义 URI 方案安装自定义处理程序的网页？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-21T14:04:24.200

对于 Chrome (13+)、Firefox (3.0+) 和 Opera (11.60+)，可以使用 JavaScript API 将 Web 应用程序注册为自定义 URI 方案的服务处理程序：

```
window.navigator.registerProtocolHandler(protocol, uri, title); 
```

*   `protocol`是站点希望处理的协议，指定为字符串。
*   `uri`是作为字符串的处理程序的 URI。您可以包含“%s”以指示在何处插入要处理的文档的转义 URI。
*   `title`是以字符串形式呈现给用户的处理程序的标题。

特别是对于 Chrome 有一个限制，不允许使用不以前缀开头的自定义方案（`web+`标准方案除外：`mailto`、`mms`、`nntp`和）。因此，如果您想像 GMail 一样将您的 Web 应用程序注册为服务处理程序，您应该编写如下内容：`rtsp``webcal`

```
navigator.registerProtocolHandler("mailto", "https://www.example.com/?uri=%s", "Example Mail"); 
```

或者

```
navigator.registerProtocolHandler("web+myscheme", "https://www.example.com/?uri=%s", "My Cool App"); 
```

注意 URI 模式，它必须包含`%s`将替换为用户点击的链接的实际 URI。例如：

```
<a href="web+myscheme:some+data">Open in "My Cool App"</a> 
```

将触发`GET`请求`http://www.example.com/?uri=web%2Bmyscheme%3Asome%20data`

以下是一些有用的链接：

*   标准[http://www.whatwg.org/specs/web-apps/current-work/#custom-handlers](http://www.whatwg.org/specs/web-apps/current-work/#custom-handlers)
*   MDN [https://developer.mozilla.org/en-US/docs/DOM/navigator.registerProtocolHandler](https://developer.mozilla.org/en-US/docs/DOM/navigator.registerProtocolHandler)
*   HTML5ROCKS [http://updates.html5rocks.com/2011/06/Registering-a-custom-protocol-handler](http://updates.html5rocks.com/2011/06/Registering-a-custom-protocol-handler)

# jsp - 如何在以下jsp中使用JSTL

> ID：16055459
> 
> 赞同：0
> 
> 时间：2013-04-17T08:43:05.973
> 
> 标签：jsp, jstl

我制作了一个jsp页面并在其中使用了以下语句：

```
<% if(cm.getSessionData("User")!=null && cm.getSessionData("User").toString().equalsIgnoreCase("U")) { %> 
```

其中 cm 是 CacheManager 的对象。

我只是想知道这个jsp语句是否可以使用JSTL变得更好。如果是，我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:56:42.510

尝试这个：

```
<c:if test="${not empty cm.sessionData and fn:toLowerCase(cm.sessionData)=='u'}">
...
</c:if> 
```

# php - Beanstalkd 职位的顺序

> ID：16055463
> 
> 赞同：1
> 
> 时间：2013-04-17T08:43:17.093
> 
> 标签：php, queue, message-queue, beanstalkd

我有一份只有一名工人的豆茎工作。

第一个问题：作业的处理顺序是否与放入试管中的顺序相同？

第二：如果我将使用多个工人，我该如何管理两个工作之间的依赖关系？假设job1和job2可以同时处理，但是job3必须在job1之后处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T21:05:29.700

没有具体保证会按照收到的相同顺序处理作业，但假设这将是来自同一管的一般情况并非不合理 - 除非您使用不同的优先级。

至于如何确保在“job1”或“job2”之后运行“job3”，如果唯一可以创建 job3 的代码位于 job1 或 2 的末尾 - 这将解决该问题。

# magento - 在模块观察器文件中找不到产品集合

> ID：16055466
> 
> 赞同：-1
> 
> 时间：2013-04-17T08:43:23.120
> 
> 标签：magento, magento-1.7

我创建了一个模块。它工作正常，但是当我们在 Observer.php 文件中获取产品集合时，它不会返回任何对象和集合。它是空的，也不会创建任何期望或日志文件。请帮我。

我在observer.php 文件中有这段代码

```
class GWB_ClearOrphan_Model_Observer
{
    public function disableProducts(Varien_Event_Observer $observer)
    {
        try{
            $collection = Mage::getModel('catalog/product')->getCollection();

        }
        catch(Exception $e) {
            Mage::log($e->getMessage(), null, 'collection.log');
        }
    }
} 
```

我也在尝试两种产品收集模型方法，但未找到收集。

1.  `$collection = Mage::getResourceModel('catalog/product_collection');`
2.  `$collection = Mage::getModel('catalog/product')->getCollection()->load();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:51:19.443

使用

```
$collection = Mage::getModel('catalog/product')->getCollection();
```

不会加载任何东西。您必须调用`load()`方法，如下所示：

```
$collection = Mage::getModel('catalog/product')->getCollection()->load();
```

最好知道您想要实现什么，您观察哪个事件以及为什么要将所有产品加载到您的观察者中？您没有在收集时使用任何过滤器，因此实际上上面的语句将加载所有产品，这可能会杀死您的请求。

# python - pep8 这行代码的首选方式

> ID：16055468
> 
> 赞同：2
> 
> 时间：2013-04-17T08:43:24.737
> 
> 标签：python, pep8

我对强制 python 代码成为 PEP8 有点陌生，PEP8 这行代码的首选方法是什么：

```
emissionprob = preprocessing.normalize(self.random_state.rand(self.n_components, self.n_symbols), norm='l1', axis=1, copy=False) 
```

我个人有点奇怪，喜欢这样，这算PEP8吗？

```
emissionprob = preprocessing.normalize(
    self.random_state.rand(
        self.n_components, 
        self.n_symbols
    ), 
    norm='l1', 
    axis=1, 
    copy=False
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:57:22.057

我将发布我将如何做到这一点，我认为这看起来更干净，但正如我之前所说，一旦你遵守 PEP-8 的基础知识，剩下的只是个人风格的问题：

```
emissionprob = preprocessing.normalize(
    self.random_state.rand(self.n_components, self.n_symbols),
    norm='l1',
    axis=1,
    copy=False) 
```

恕我直言，您使用了太多额外的行，看起来您似乎太过分了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:51:39.307

我和你有同样的偏好，pep8 验证器认为它没有错：[https ://pypi.python.org/pypi/pep8](https://pypi.python.org/pypi/pep8)

通常我认为建议这样做，但是我发现它的可读性较差：

```
emissionprob = preprocessing.normalize(self.random_state.rand(self.n_components, 
                                                              self.n_symbols), 
                                       norm='l1', 
                                       axis=1, 
                                       copy=False) 
```

我个人是这样做的（注意后面的逗号无处不在）：

```
emissionprob = preprocessing.normalize(
    self.random_state.rand(
        self.n_components, 
        self.n_symbols,
    ), 
    norm='l1', 
    axis=1, 
    copy=False,
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T09:01:35.873

我认为您这样做的方式很好，但我会尝试使其与现有代码保持一致。

在这种特殊情况下，我可能会将第一个参数分配给临时变量。

```
rand = self.random_state.rand(self.n_components, self.n_symbols)
emissionprob = preprocessing.normalize(rand, norm='l1', axis=1, copy=False) 
```

# c# - Sitecore：修补其他包含文件？

> ID：16055471
> 
> 赞同：0
> 
> 时间：2013-04-17T08:43:29.507
> 
> 标签：c#, asp.net, .net, sitecore, config

Sitecore 具有修补包含文件的机制（[http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/05/All-About-web-config-Include-Files -with-the-Sitecore-ASPNET-CMS.aspx](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/05/All-About-web-config-Include-Files-with-the-Sitecore-ASPNET-CMS.aspx)）但我想在分析配置中修补一些东西，它本身已经使用了这种机制。

与其将我的行添加到 Analytics 包含文件中，不如将其留在我自己的小配置中似乎更干净；但它似乎没有被应用（我的断点没有被击中）。

我想知道是否有办法控制在 Sitecore 中处理包含文件的顺序，或者这只是简单的不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T10:53:57.573

这是可能的并且确实有效 - 您只需要记住以下几点：

1.  您不能**将**新元素**添加**到使用另一个补丁添加的其他元素。示例：在补丁 A 中，您添加了一个新`<database />`元素，而在补丁 B 中，您希望将新子元素添加到新`<database />`元素中。更新属性有效！

2.  当您需要打补丁时，文件的命名很重要。示例：您可以通过创建一个名为*AnalyticsPatch.config的新配置文件来修补**Analytics.config* ，该文件随后将包含在原始 Analytics.config 之后的最终 web.config 部分中。

 *这是在 Sitecore 版本 6.4.1 到 6.6.0 Update-4 的生产环境中测试和使用的。

快乐修补:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T09:10:28.647

您可以通过查看 live-config 来检查您对配置文件的修改是否已应用：

```
www.yoursite.com/sitecore/admin/showconfig.aspx 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-08T10:45:11.097

仅供参考，并让 ppl 保持最新：

似乎，至少对于较新的 Sitecore（使用 Sitecore 7.0 的 testet），它会将子文件夹纳入计算。这意味着首先处理根文件夹 /app_config/include 中的所有文件。

接下来它从子文件夹中获取配置文件，即/app_config/include/myfolder，myfolder 中的内容将覆盖根包含文件夹中配置的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:45:54.830

我遇到了一种情况，即我的自定义包含文件在另一个包含文件之前应用，这导致了意外问题。我发现将我自己的配置文件重命名为类似`zz.MySettings.config`的东西就可以了。*

# scala - 通过 Scala 测试周期提高生产力

> ID：16055477
> 
> 赞同：1
> 
> 时间：2013-04-17T08:43:43.943
> 
> 标签：scala, scalatest, specs2

只要有代码更改，就可以通过自动触发测试来提高测试驱动的开发效率。

这就是我所希望的。

1.  每当保存 Scala 文件时，SBT（或 shell 脚本）都应该执行 ScalaTest 或 Specs2 规范。
2.  如果测试完成，系统应播放提示成功或失败的声音

我目前正在使用 Scala IDE 进行开发，并使用 SBT 来运行我的测试规范，因此只需优化上述步骤就可以避免人们切换到控制台、运行测试规范并等待结果。

任何自动触发测试并播放“成功”或“失败”声音的想法都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:57:08.077

为什么不创建一个依赖于任务的自定义 SBT`test`任务。您可以将播放声音的代码添加到构建定义中。

请参阅[此处](https://stackoverflow.com/questions/7820939/run-custom-task-automatically-before-after-standard-task)如何在另一个任务之后运行自定义任务。

要自动重新运行测试，只需`~`在 SBT shell 中为新定义的任务添加前缀，然后再运行它。

# html - 如何用 cocos2D-html5 绘制彩色圆圈

> ID：16055479
> 
> 赞同：1
> 
> 时间：2013-04-17T08:43:46.297
> 
> 标签：html, cocos2d-iphone, html5-canvas

我在官方文档上找不到任何提示，几乎什么都没有。我搜索 iphone 解决方案，但在 html5 中找不到相关解决方案。我试图创建一个圆形作为精灵，但我不知道如何填充它，有人可以给我任何想法（除了外部图片之外），请，示例代码非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:06:17.330

这是示例代码，如下所示：

```
//------------------------------------------------------------------
//
// Draw New API Test
//
//------------------------------------------------------------------
var DrawNewAPITest = DrawTestDemo.extend({
    _title : "cc.DrawNode",
    _subtitle : "Testing cc.DrawNode API",

    ctor:function() {
        this._super();

        var draw = cc.DrawNode.create();
        this.addChild( draw, 10 );

        //
        // Circles
        //
        for( var i=0; i < 10; i++) {
            draw.drawDot( cc.p(winSize.width/2, winSize.height/2), 10*(10-i), cc.c4f( Math.random(), Math.random(), Math.random(), 1) );
        }

        //
        // Polygons
        //
        var points = [ cc.p(winSize.height/4,0), cc.p(winSize.width,winSize.height/5), cc.p(winSize.width/3*2,winSize.height) ];
        draw.drawPoly(points, cc.c4f(1,0,0,0.5), 4, cc.c4f(0,0,1,1) );

        // star poly (triggers bugs)
        var o=80;
        var w=20;
        var h=50;
        var star = [
            cc.p(o+w,o-h), cc.p(o+w*2, o),                  // lower spike
            cc.p(o + w*2 + h, o+w ), cc.p(o + w*2, o+w*2),  // right spike
            cc.p(o +w, o+w*2+h), cc.p(o,o+w*2),             // top spike
            cc.p(o -h, o+w), cc.p(o,o)                     // left spike
        ];
        draw.drawPoly(star, cc.c4f(1,0,0,0.5), 1, cc.c4f(0,0,1,1) );

        // star poly (doesn't trigger bug... order is important un tesselation is supported.
        o=180;
        w=20;
        h=50;
        star = [
            cc.p(o,o), cc.p(o+w,o-h), cc.p(o+w*2, o),       // lower spike
            cc.p(o + w*2 + h, o+w ), cc.p(o + w*2, o+w*2),  // right spike
            cc.p(o +w, o+w*2+h), cc.p(o,o+w*2),             // top spike
            cc.p(o -h, o+w)                                 // left spike
        ];
        draw.drawPoly(star, cc.c4f(1,0,0,0.5), 1, cc.c4f(0,0,1,1) );

        //
        // Segments
        //
        draw.drawSegment( cc.p(20,winSize.height), cc.p(20,winSize.height/2), 10, cc.c4f(0, 1, 0, 1) );
        draw.drawSegment( cc.p(10,winSize.height/2), cc.p(winSize.width/2, winSize.height/2), 40, cc.c4f(1, 0, 1, 0.5) );
    }
}); 
```

您可以在示例/测试/DrawPrimitivesTest 中找到它。

# google-ads-api - 使用其 API 阻止来自 Google Adwords 的 IP 地址

> ID：16055481
> 
> 赞同：5
> 
> 时间：2013-04-17T08:43:52.173
> 
> 标签：google-ads-api

有谁知道如何使用 Google API 从我们的 Google Adwords 帐户中阻止某些 IP 地址？

在[本文中](http://support.google.com/adwords/answer/2456098?hl=en)，您可以看到如何手动执行此操作，但我找不到以编程方式执行此操作的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-28T15:52:20.993

我知道已经晚了。但我也需要它。
我在[这里](https://developers.google.com/adwords/api/docs/reference/v201506/CampaignCriterionService.IpBlock)`IpBlock`找到了Google AdWords 上的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-20T22:45:42.730

这是我找到的一些示例代码，并稍微改进了 require_once 此代码，然后为您想要禁止 IP 的每个活动进行此调用

```
YourNameSpace\BlockedIP::add($campaignId, $ip); 
```

瞧

```
<?php
/*
    ...
*/

namespace YourNameSpace;

use Google\AdsApi\AdWords\AdWordsServices;
use Google\AdsApi\AdWords\AdWordsSession;
use Google\AdsApi\AdWords\AdWordsSessionBuilder;
use Google\AdsApi\Common\OAuth2TokenBuilder;
use Google\AdsApi\AdWords\v201802\cm\CampaignCriterionService;
use Google\AdsApi\AdWords\v201802\cm\IpBlock;
use Google\AdsApi\AdWords\v201802\cm\NegativeCampaignCriterion;
use Google\AdsApi\AdWords\v201802\cm\CampaignCriterionOperation;
use Google\AdsApi\AdWords\v201802\cm\Operator;

class BlockedIP {
  public static function runExample(AdWordsServices $adWordsServices,
        AdWordsSession $session,
        $campaignId,
        $ip) {

    $campaignCriterionService =
        $adWordsServices->get($session, CampaignCriterionService::class);

    $campaignCriteria = [];

    // Add a negative campaign criterion.
    $ipBlock = new IpBlock();
    $ipBlock->setIpAddress($ip);
    $negativeCriterion = new NegativeCampaignCriterion();
    $negativeCriterion->setCampaignId($campaignId);
    $negativeCriterion->setCriterion($ipBlock);

    $operation = new CampaignCriterionOperation();
    $operation->setOperator(Operator::ADD);
    $operation->setOperand($negativeCriterion);
    $operations[] = $operation;

    $result = $campaignCriterionService->mutate($operations);

    // Print out some information about added campaign criteria.
    foreach ($result->getValue() as $campaignCriterion) {
      printf(
          "Campaign targeting criterion with ID %d and type '%s' was added.\n",
          $campaignCriterion->getCriterion()->getId(),
          $campaignCriterion->getCriterion()->getType());
    }
  }

  public static function add($campaignId, $ip) {
    // Generate a refreshable OAuth2 credential for authentication.
    $oAuth2Credential = (new OAuth2TokenBuilder())
        ->fromFile()
        ->build();

    // Construct an API session configured from a properties file and the OAuth2
    // credentials above.
    $session = (new AdWordsSessionBuilder())
        ->fromFile()
        ->withOAuth2Credential($oAuth2Credential)
        ->build();

    self::runExample(new AdWordsServices(), $session, $campaignId, $ip);
  }
} 
```

# ruby-on-rails-3 - Rails：将日期增加一或明天

> ID：16055482
> 
> 赞同：0
> 
> 时间：2013-04-17T08:43:54.383
> 
> 标签：ruby-on-rails-3, datetime

我知道这非常简单，但不知道该怎么做。

```
end_time = Time.new(Date.today.year, Date.today.month, Date.today.day, 8, 00, 00).strftime("%H:%M:%S") 
```

但在上面的代码中，我想要明天而不是今天，即“+1 天”。我该怎么做？

我试过了：

```
end_time = Time.new(Date.today.year, Date.today.month, Date.today.day, 8, 00, 00).strftime("%H:%M:%S") + 1.day 
```

或者

```
end_time = Time.new(Date.tomorrow.year, Date.tomorrow.month, Date.tomorrow.day, 8, 00, 00).strftime("%H:%M:%S") 
```

但是没有用。有人可以回答吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T08:48:22.467

在 Rails 中，您可以使用 :`end_time + 1.day`或`1.day.from_now`

添加了具体案例：

```
if @order.delievery_time.between?(start_time, end_time + 1.day)
   @time = @order.delievery_time.strftime("%H:%M:%S")
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-01T14:03:57.050

如果您想要日期字段中的日期只需使用：-

= date_field_tag :date_of_journey, Date.tomorrow

或者，如果您想将其保存在变量中，请使用：-

日期 = 日期.明天

# c# - 比较相等的日期时间返回 false

> ID：16055484
> 
> 赞同：11
> 
> 时间：2013-04-17T08:44:00.543
> 
> 标签：c#, datetime

我有一个关于如何在 C# 中比较/存储日期时间的查询。考虑以下代码：

```
var createdDate = DateTime.Now;
using (cr = new LanguageDictionaryRepository(ds)) {
    cr.Add(new Sybrin10.Data.DTO.LanguageDictionary() {
        Active = true,
        CreatedDate = createdDate,
        CultureCode = cultureCode,
        Data = new System.Text.UTF8Encoding().GetBytes("Test")
    });
    cr.Save();

    var y = cr.FindBy(x => x.CultureCode == cultureCode && x.CreatedDate == createdDate).FirstOrDefault();
    Assert.IsNotNull(y); 
```

由于`Assert.IsNotNull`日期时间检查而失败。我希望，由于 LanguageDictionary 实例是使用变量值创建的，因此两者将相等。这是使用 Telerik.OpenAccess 和 MSSQL 作为数据库层，所以我假设问题出在那儿。谁能告诉我我是否缺少任何东西以及如何正确比较这些值。

编辑：刻度值不同，但我不知道为什么，因为它们都来自同一个变量，我只分配一次。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-17T08:54:24.400

尝试使用`DateTime.Equals(x.CreatedDate, createdDate)`，它可能会有所帮助。

除此之外，正确的`DateTime`比较是一个非常复杂的主题，包括时区、偏移量、UTC、当地时间等等。`==`对于两个看似相同的日期之间的简单比较以返回 false，我一点也不感到惊讶。

如果`Ticks`写入和读取的值不同，您可能会遇到一个`DateTimeKind`问题，即您正在将 a 写入`DateTimeKind.Local`数据库，但返回一个`DateTimeKind.Unspecified`.

另一种选择可能是（如果差异足够小）`DateTime`数据库中的字段不足以存储与 .net 相同的毫秒数`DateTime`：

> 一个滴答表示一百纳秒或百万分之一秒。一毫秒内有 10,000 个滴答声。

根据您的数据存储，它可能没有这么详细。您的`DateTime`值不是来自同一来源，一个是从内存中读取的，另一个是从数据库中读取的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T09:20:31.850

SqlServer以（大约）3 毫秒为增量存储[日期时间。](http://msdn.microsoft.com/en-us/library/ms187819.aspx)

> 日期时间值四舍五入为 0.000、0.003 或 0.007 秒的增量

因此，通过数据库的 DateTime 往返可能会延迟几毫秒。

所以你不应该测试“完全相等”，而应该测试“足够接近”

```
var y = cr.FindBy(x => x.CultureCode == cultureCode && 
                    x.CreatedDate >= createdDate.AddMilliseconds(-5) && 
                    x.CreatedDate <= createdDate.AddMilliseconds(5))
     .FirstOrDefault(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:53:46.717

我认为在存储数据时使用 DateTime.UtcNow 可能会更好，这样您就不必担心夏令时问题等。然后您可以稍后使用您选择的文化以您想要的方式显示它。

# python - 文件上传和存储，然后与远程工作者一起处理

> ID：16055489
> 
> 赞同：0
> 
> 时间：2013-04-17T08:44:18.023
> 
> 标签：python, django, ironmq

我的问题是关于 Web 应用程序架构的。

我有一个网站，我的用户可以上传文件，我需要从这些文件中为用户创建某种报告。当用户上传文件时，它存储在我托管网站的服务器上。存储在 Django 模型字段中的文件路径。工人在另一台服务器上，我需要访问我的数据库并处理该文件。我知道如何在没有 URL 和 django 其他部分的情况下使用 django ORM 本身。

我的问题：如果我需要在另一台服务器上创建工作人员，它使用我网站上的不同 django 模型，我需要将所有模型复制到每个工作人员中？

例如，一个工作进程文件，它需要模型“报告”和“用户”。其他工作人员执行其他操作并需要“用户”和“链接”模型。每次我在我的主网站上更改模型时，我都需要在我的工作人员中更改相同的模型，不同的工作人员也可以有相同的重复模型。我认为从架构的角度来看它并不好。

关于如何组织我的网站和工作人员有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:21:22.940

您说您正在使用 IronWorker，因此只需在 .worker 文件中的每个工作人员中包含您需要的模型。例如，假设您有一个名为 的工人`report_worker.py`，它需要“报告”和“用户”，指向`report_worker.worker`文件中的每一个：

```
file '../models/user.py'
file '../models/report.py' 
```

或者由于您使用的是 Django，您可能会将所有模型都放在 models.py 中，因此：

```
file 'models.py' 
```

然后，当其中任何一个更改时，只需使用 cli 重新上传工作人员：

```
iron_worker upload report_worker 
```

然后，您可以使用与您的应用程序使用的模型相同的模型。希望有帮助！

有关 .worker 文件的更多信息：http: [//dev.iron.io/worker/reference/dotworker/](http://dev.iron.io/worker/reference/dotworker/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:59:37.187

为什么你的工人真的*需要*完全相同的模型？您可以将工作人员设计为具有不同的模型来对您的数据执行自己的操作。只需为您的数据设计 API 并从您的主站点单独访问它。

如果确实有必要，可以跨多个项目共享 Django 应用程序。所以你可以把一些通用代码放在一个单独的应用程序中（比如你的共享模型），然后把它们放在源代码控制中。在您的主网站更新后，您也可以轻松地更新工作人员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T16:12:09.510

很少有有趣的选择。

例如，您可以`reupload workers`为部署过程添加额外的步骤。它将保证部署的应用程序和工作人员之间的一致性。

使用自己的 (rest) api 是个好主意，我喜欢它甚至比在不同生物之间共享模型更重要

# java - 短期对象中的长静态字符串

> ID：16055490
> 
> 赞同：11
> 
> 时间：2013-04-17T08:44:25.287
> 
> 标签：java

这可能是一个愚蠢的问题（或者只是让我看起来很愚蠢:)），但是我会对如何在短期对象的上下文中使用长字符串对象感兴趣。

想想 cron 作业或匿名、命令或类似函数的类中的长 SQL 查询。这些是非常短暂的类，甚至在它们的生命周期中大部分时间都会使用这些长字符串。什么是更好的？构造一个内联字符串并让它与实例一起收集，还是让它成为静态最终的，让它们在内存中无用，直到类下一次实例化？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T08:50:00.773

好吧，您只能对 String 发生的事情进行如此多的控制。

即使您内联创建它，该 String 也很可能会添加到 JVM 的 String 常量池中，并且在您再次声明它时将被重用，因此在实践中，您可能会重用相同的 String 对象。

除非字符串太大以至于对应用程序的性能产生影响，否则我不会担心它并选择对我来说更具可读性的选项。

如果该字符串仅用于代码的一个特定点，在一个方法中，我会将其声明为内联，我更喜欢将我的变量放在我可以的最小范围内，但这里的意见可能会有所不同。如果没有任何变化，并且在您的特定用例中似乎有意义，那么无论如何将 String 声明为静态，我怀疑它会影响性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:50:31.260

字符串常量进入一个类的常量池，并且不能被优化掉，即处理得足够好。

创建长字符串不是静态的。对于 SQL，请使用带有占位符的预**准备语句。**`?`带占位符的字符串也是如此：使用**MessageFormat**。

要明确。以下内容无需任何额外费用：

```
static final String s = "... long string ..."; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-17T08:53:14.690

当剩余内存有限时，JVM 通常会进行 perm gen 空间清理并卸载未使用/未引用的类。因此，在我看来，将长字符串作为静态变量不会造成太大伤害

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-17T08:57:07.817

如果您觉得您的字符串会占用大量内存，请不要将它们设为静态或使用字符串文字声明它们。由于这两个都将存储在 permgen 空间中并且几乎会被垃圾收集[有机会但很渺茫，如果你还没有创建自己的类加载器，静态可能永远不会被垃圾收集]。因此，使用 new 运算符创建字符串，以便在堆中创建并且可以轻松地进行垃圾收集，即

```
String str = new String("long string"); 
```

编辑：

如何存储字符串：http: [//www.ntu.edu.sg/home/ehchua/programming/java/J3d_String.html](http://www.ntu.edu.sg/home/ehchua/programming/java/J3d_String.html)

编辑：

下面就新字符串的工作原理进行了长时间的讨论。提出的论点是 new String 将创建 2 个对象，一个在堆中，一个在池中。这是错误的，默认情况下不是这样，您可以通过调用 intern 方法强制 java 执行此操作。为了支持我的论点，下面是来自 Strin 类的 intern 方法的 javadoc：

> 实习生
> 
> public String intern() 返回字符串对象的规范表示。一个字符串池，最初是空的，由 String 类私下维护。
> 
> 当调用 intern 方法时，如果池中已经包含一个等于该 String 对象的字符串，该字符串由 equals(Object) 方法确定，则返回池中的字符串。否则，将此 String 对象添加到池中并返回对该 String 对象的引用。
> 
> 由此可见，对于任何两个字符串 s 和 t，当且仅当 s.equals(t) 为真时，s.intern() == t.intern() 才为真。
> 
> 所有文字字符串和字符串值的常量表达式都是实习的。字符串文字在 Java 语言规范的 §3.10.5 中定义

从上面的文档可以看出，如果 new String 总是在池中创建一个对象，那么 intern 方法将完全没用！！同样从逻辑上讲，它没有任何意义。

编辑：

另请阅读这篇文章的答案：[字符串池在 Java 中为相同的字符串创建两个字符串对象](https://stackoverflow.com/questions/12037288/string-pool-creating-two-string-objects-for-same-string-in-java)

# database - Zend/Db/Select.php 中的 Zend 框架未定义的类常量 ''

> ID：16055491
> 
> 赞同：0
> 
> 时间：2013-04-17T08:44:30.057
> 
> 标签：database, zend-framework, fatal-error, class-constants, isnullorempty

我的 Apache 日志中有一个奇怪的错误：

PHP致命错误：未定义的类常量''

这是 de library (Zend framework 1.11) library/Zend/Db/Select.php 的第 814 行

看一下代码：

> `if ($type == self::FROM) {
> // append this from after the last from joinType
> $tmpFromParts = $this->_parts[self::FROM];
> $this->_parts[self::FROM] = array();
> // move all the froms onto the stack
> while ($tmpFromParts) {
> $currentCorrelationName = key($tmpFromParts);
> if ($tmpFromParts[$currentCorrelationName]['joinType'] != self::FROM) {
> break;
> }
> $lastFromCorrelationName = $currentCorrelationName;
> $this->_parts[self::FROM][$currentCorrelationName] = array_shift($tmpFromParts);
> } }`

这很奇怪，因为未定义的常量是空的。这个致命错误有时会出现，但不是在每次加载页面时都会出现。难道是zend框架的发布BUG？

# python - 关于widget="selection"的解释

> ID：16055492
> 
> 赞同：1
> 
> 时间：2013-04-17T08:44:29.887
> 
> 标签：python, xml, openerp

我需要知道 OpenERP 7 中带有小部件选项的实际场景是什么。当我们在表单视图中使用它时，它是否作为只读字段工作？

我在我的一个表单中使用了它。当我在表单中保存记录时，不会保存小部件值。

```
<field name="job_position" placeholder="Finance Manager" widget="selection" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:23:10.800

使用小部件，可以更改字段的外观。在 OpenERP 中，可以使用许多小部件，例如 widget="selection"/"statusbar"/"monetory"/"progressbar"/"html"/"email"/"image" 等，但它不能用作只读字段。

widget="selection" 表示它将在选择框中显示所有位置（many2one）的记录。这意味着如果您不希望任何用户编辑/修改它的记录，widget="selection" 很有用。

关于您的问题，问题是由于您使用的占位符属性造成的。占位符将在选择框中显示该值，该值可能不会存储在您的 many2one 表中，这就是为什么在保存记录时，值会消失。尝试删除那里的占位符。如果您希望在 selection 中默认任何值，请在类中使用 _defaults 属性。

# eclipse - Spring 3.1 NoClassDefFoundError ListableBeanFactory

> ID：16055496
> 
> 赞同：1
> 
> 时间：2013-04-17T08:44:32.367
> 
> 标签：eclipse, spring, build, eclipse-rcp

我正在尝试将旧项目从 Spring 2.5.6 升级到 Spring 3.1.0。该项目不是用 Maven 构建的，所以我不得不手动将 jar 添加到构建路径中。

该应用程序使用 Eclipse RAP 以及 Spring。

我在构建路径中添加了所有 Spring 3.1 jar：

```
lib/org.springframework.aop-3.1.0.RELEASE.jar
lib/org.springframework.asm-3.1.0.RELEASE.jar
lib/org.springframework.aspects-3.1.0.RELEASE.jar
lib/org.springframework.beans-3.1.0.RELEASE.jar
lib/org.springframework.context-3.1.0.RELEASE.jar
lib/org.springframework.context.support-3.1.0.RELEASE.jar
lib/org.springframework.core-3.1.0.RELEASE.jar
lib/org.springframework.expression-3.1.0.RELEASE.jar
lib/org.springframework.instrument-3.1.0.RELEASE.jar
lib/org.springframework.instrument.tomcat-3.1.0.RELEASE.jar
lib/org.springframework.jdbc-3.1.0.RELEASE.jar
lib/org.springframework.jms-3.1.0.RELEASE.jar
lib/org.springframework.orm-3.1.0.RELEASE.jar
lib/org.springframework.oxm-3.1.0.RELEASE.jar
lib/org.springframework.test-3.1.0.RELEASE.jar
lib/org.springframework.transaction-3.1.0.RELEASE.jar
lib/org.springframework.web-3.1.0.RELEASE.jar
lib/org.springframework.web.portlet-3.1.0.RELEASE.jar
lib/org.springframework.web.servlet-3.1.0.RELEASE.jar
lib/org.springframework.web.struts-3.1.0.RELEASE.jar 
```

我还在 MANIFEST.MF 中列出了它们。

该项目构建良好，但在运行时尝试登录时出现以下错误：

```
java.lang.NoClassDefFoundError: org/springframework/beans/factory/ListableBeanFactory 
```

我看了看豆子罐，班肯定在那里。我还搜索了该项目，并且该类在任何地方都没有明确使用。

什么可能导致这种情况？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:23:51.537

Spring 3.1.0 中不存在此类。见[http://www.jarfinder.com/index.php/java/info/org.springframework.beans.factory.ListableBeanFactory](http://www.jarfinder.com/index.php/java/info/org.springframework.beans.factory.ListableBeanFactory)

# coded-ui-tests - 编码的 UI：通过自定义代码执行时具有记录操作的测试用例失败

> ID：16055503
> 
> 赞同：0
> 
> 时间：2013-04-17T08:44:50.440
> 
> 标签：coded-ui-tests

```
 public void RecordedMethod_Sample(int x)
    {
        #region Variable Declarations
        HtmlCell uISALESREVENUECell = this.UIDashboardWindowsInteWindow1.UIDashboardDocument.UITblWrapperOnlineStorTable.UISALESREVENUECell;
        HtmlImage uIImagegifbase64R0lGODImage = this.UIDashboardWindowsInteWindow1.UIDashboardDocument.UIImagegifbase64R0lGODImage;
        HtmlHyperlink uIPostPurchase4Hyperlink = this.UISalesRevenueandGrossWindow.UISalesRevenueandGrossDocument.UIPostPurchase4ReturnsCustom.UIPostPurchase4Hyperlink;
        HtmlDiv uISalesRevenueByDataSoPane = this.UISalesRevenueandGrossWindow.UISalesRevenueandGrossDocument.UISalesRevenueByDataSoPane;
        #endregion

        // Set flag to allow play back to continue if non-essential actions fail. (For example, if a mouse hover action fails.)
        Playback.PlaybackSettings.ContinueOnError = true;

        // Mouse hover 'SALES REVENUE' cell at (82, 27)
        Mouse.Hover(uISALESREVENUECell, new Point(82, 27));

        // Reset flag to ensure that play back stops if there is an error.
        Playback.PlaybackSettings.ContinueOnError = true;

        // Click 'image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAA...' image
        Mouse.Click(uIImagegifbase64R0lGODImage, new Point(139, 64));

        // Set flag to allow play back to continue if non-essential actions fail. (For example, if a mouse hover action fails.)
        Playback.PlaybackSettings.ContinueOnError = true;

        // Mouse hover 'Post Purchase4' link at (144, 19)
        Mouse.Hover(uIPostPurchase4Hyperlink, new Point(144, 19));

        // Reset flag to ensure that play back stops if there is an error.
        Playback.PlaybackSettings.ContinueOnError = true;

        // Move 'Sales Revenue By Data Source' pane
        Mouse.StartDragging(uISalesRevenueByDataSoPane, new Point(79, 15));
        Mouse.StopDragging(uISalesRevenueByDataSoPane, 224, -4);
        string title = uISalesRevenueByDataSoPane.InnerText.ToString();
        if (title == "Sales Revenue By Data Source")
        {

        } 
```

同时执行 Mouse.Hover(uISALESREVENUECell, new Point(82, 27)); 它给出以下错误不支持指定的方法。每当我尝试将其作为测试用例执行时，在通过自定义代码执行时一切都按预期工作，它给出了上述错误，任何人都可以帮助我...提前感谢您的所有输入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:30:26.897

“自定义代码”是什么意思？如果这意味着自定义控件，则错误很可能是因为自定义控件尚未编写为支持编码 UI。对于要与编码 UI 一起使用的自定义控件，它必须支持 MSAA 或 UIA 接口，或者具有来自较新代理机制的支持。

有关更多详细信息，请尝试通过 Web 搜索 Coded UI、MSAA 和 UIA。也看看这个博客[http://blogs.msdn.com/b/visualstudioalm/archive/2012/05/24/coded-ui-test-new-extensibility-qfe.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2012/05/24/coded-ui-test-new-extensibility-qfe.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T13:11:39.840

我有这个确切的问题。

最好的办法是尽可能多地使用记录器，然后仅在需要动态执行时才将内容从 UI 映射中移开，并且仅用于那些位。

让录音机为您完成所有工作，您将在播放过程中获得更好的可靠性。

# iphone - Corona SDK：真正的拖拽碰撞

> ID：16055504
> 
> 赞同：2
> 
> 时间：2013-04-17T08:44:54.837
> 
> 标签：iphone, sdk, box2d, physics, coronasdk

几个星期以来，我一直在使用 Corona SDK，但还没有成功地在可拖动对象和动态对象之间创建真正的碰撞。

我的意思是：就像贾斯汀史密斯的现实夏季运动模拟器，或者手指平衡 -> [http://www.youtube.com/watch?v=8_iGFsBUsV8](http://www.youtube.com/watch?v=8_iGFsBUsV8)

当被拖动对象被拖到上方并立即停止时，被拖动对象顶部的对象仍然有一点力到上方，就像自然界一样。但是在 Corona SDK 的 Drag Physics Sample 中，没有这样的力，当它应该跳跃一点时，对象只是粘在被拖动的对象上。我希望你能理解我要解释的内容，英语不是我的母语。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-19T16:04:35.000

一旦你让物理子系统管理一个对象，你就不能“手动”改变它的坐标。那时物理学至少会打嗝。

但是您可以对对象施加力或通过 applyForce 和 setLinearVelocity 设置它的速度。

如果要拖动物理对象，可以使用所谓的“触摸关节”。如果您想要更多控制，请尝试以下操作：

```
function drag(e)
  if e.phase == 'moved' then
     e.target:setVelocity( (e.x-e.target.x)*c, (e.y-e.target.y)*c )   
  end
end 
```

# php - 如何获取所选选项的名称并将其发送到其他 php 脚本？

> ID：16055513
> 
> 赞同：0
> 
> 时间：2013-04-17T08:45:16.250
> 
> 标签：php, jquery, yii

这是我的 jQuery 代码

```
<script>
$(document).ready(function() {
   $('#countries').change(function(){
      $('#countriesForm').submit();
   });
});
</script> 
```

我的 php 代码看起来像这样

```
<form action="<?php echo $this->createUrl($this->id."/".$this->action->id); ?>" id="countriesForm" method='POST'>
<?php echo CHtml::dropDownList('countries', $select = array(),
 CHtml::listData($countries, 'code', 'name'));
?>
<form>
<div class='description'></div> 
```

有人可以帮助我如何将所选国家/地区的回显/打印名称或代码放入 div .description 中。以及如何将选定的代码发送到其他 php 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:51:43.350

它可以像

```
<div class='description'><?php
if( isset($_POST['countries']) ) {
    echo CHtml::encode($_POST['countries']);
}
?></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:58:23.060

```
<?php
    $controller = Yii::app()->controller->id;
    $action =  Yii::app()->controller->action->id;
?> 
```

使用它，您可以执行控制器和操作。

```
<li <?php 
    if ($controller=="site"&&$action=="index"){
        echo 'class="active"'; } ?> >
    <?php echo CHtml::link('Home',array('site/index')); ?>
</li> 
```

# c# - 如何避免在构造函数中调用虚函数？

> ID：16055519
> 
> 赞同：19
> 
> 时间：2013-04-17T08:45:23.993
> 
> 标签：c#, .net, entity-framework, entity-framework-5

我的大多数（如果不是全部）实体框架 POCO 都具有虚拟功能。我需要这些函数是虚拟的，以便可以延迟加载实体。

如果我在构造函数中初始化`Accommodations`，那么我将在构造函数中调用虚函数，这是不好的做法。

`Accommodations`但是如果不在构造函数中，我该如何初始化？

```
public class Venue
{
    public Venue()
    {
        Accommodations = new HashSet<Accommodation>();
    }

    public virtual ICollection<Accommodation> Accommodations { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-05-28T16:20:06.277

另一种选择是将设置器标记为私有。这将消除在构造函数中调用虚拟成员的问题。

完成此操作后，您需要为调用者（EF 除外）提供根据您的设计需要设置该属性的方法。您可以使用重载的构造函数来传递住宿列表，或者可以选择封装您的集合（域驱动设计）并使用方法来添加/删除项目（注意，使用 EF 这会变得“骇人听闻”，因为它缺乏对完全封装的支持集合，与 NHibernate 不同）：

```
public class Venue
{
    public Venue()
    {
        Accommodations = new HashSet<Accommodation>();
    }

    public Venue(ICollection<Accommodation> accommodations)
    {
        Accommodations = new List<Accommodation>(accommodations);
    }

    public virtual ICollection<Accommodation> Accommodations { get; private set; }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-17T08:49:22.867

```
public class Venue
{
    private accommodations_ = new HashSet<Accommodation>();

    public Venue()  { }

    public virtual ICollection<Accommodation> Accommodations 
    {
        get { return accommodations_; }
        set { accommodations_ = value; }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-11-07T10:12:44.097

使用 C# 6.0 默认初始化，可以在不使用私有变量的情况下对其进行简化：

```
public class Venue
{
    public virtual ICollection<Accommodation> Accommodations {get; set; } = new HashSet<Accommodation>();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T08:47:23.880

使用延迟加载，您甚至不会初始化它，`Accommodations`直到它第一次被访问，所以离开它`null`。

您可以按如下方式进行包装以使其自动初始化：

```
private ICollection<Accommodation> _accommodations;

public virtual ICollection<Accommodation> Accommodations { 
    get { 
        if (_accommodations == null)
        {
             // Initialize or load data here.
             _accommodations = new HashSet<Accommodation>();
        }
        return _accomodations;
    } 
    set {
        _accommodations = value;
    } 
} 
```

* * *

**请务必阅读以下有关此解决方案的评论！**

# javascript - 如何从引导程序中删除一个 js 文件？

> ID：16055522
> 
> 赞同：0
> 
> 时间：2013-04-17T08:45:31.107
> 
> 标签：javascript, jquery, ruby-on-rails-3, twitter-bootstrap

如何从 gem 中阻止一个 JavaScript 文件？我正在使用**twitter-bootstrap gem**。当 rails 应用程序加载时，gem 将加载所有 JS 文件，所以我想阻止**scrollspy.js**运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:24:53.003

只需导入您想要的文件`@import 'File name'`

# ios - iCarousel - 动态更改中心项目 iOS

> ID：16055527
> 
> 赞同：3
> 
> 时间：2013-04-17T08:45:46.433
> 
> 标签：ios, ipad, icarousel

我在我的 iPad 应用程序中使用 iCarousel，我想知道是否有办法在选择时动态更改中心项目的视图。简而言之，我想实现这样的目标，![在此处输入图像描述](https://i.stack.imgur.com/k2uze.png) 我设法将第一个索引（项目 - 0）设置为红色，但我想不出一种方法来执行以下操作：

When 1 is selected i wish to change the image of 0 to plain white and 1 to red.

2 的东西也是如此。

任何帮助或建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T09:20:16.140

如果要选择项目然后更改颜色，则只需使用：

```
- (void)carousel:(iCarousel *)carousel didSelectItemAtIndex:(NSInteger)index{
//change the view of current index
} 
```

如果您希望当前项目颜色为红色而不选择，那么您需要做更多的事情：

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view{
//Here you need to check current index
    if (index == self.carousel.currentItemIndex) {
    //change the view
    }
} 
```

而且您还需要使用此方法检查索引是否更改：

```
- (void)carouselCurrentItemIndexDidChange:(iCarousel *)carousel{
//you need to reload carousel for update view of current index
[self.carousel reloadData];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:04:23.357

iCarousel 有一个委托方法

```
- (void)carousel:(iCarousel *)carousel didSelectItemAtIndex:(NSInteger)index 
```

每当您选择一个项目时都会调用它，并且**index**会为您提供当前所选项目的索引。您可以使用此索引更改视图的颜色。您还可以将先前视图的索引保存在任何整数变量中，并使用它来重置该图块的颜色。

# php - 如何在 MAMP 上运行后台 php 进程？

> ID：16055528
> 
> 赞同：0
> 
> 时间：2013-04-17T08:45:55.817
> 
> 标签：php, mamp, background-process

我正在尝试使用以下代码在 MAMP 上触发后台 php 进程：

```
exec("php /Users/Joe/sandbox/getnew.php?artist=".$artistID." > error_log &"); 
```

或者：

```
shell_exec("nohup /usr/bin/php /Users/Joe/sandbox/getnew.php?artist=".$artistID." > error_log &"); 
```

即使使用 php 文件的直接路径，它似乎也不会触发？当它被触发时，它将从 API 收集一些信息并将其写入数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:15:30.063

你有没有尝试做类似的事情：

```
exec("php /Users/Joe/sandbox/getnew.php?artist=".$artistID, $output); 
```

之后：

```
file_put_contents($file, implode("\n", $output), FILE_APPEND) 
```

# jquery - 使用 jquery-mobile 无限滚动

> ID：16055533
> 
> 赞同：1
> 
> 时间：2013-04-17T08:46:11.483
> 
> 标签：jquery, jquery-mobile, jquery-plugins, infinite-scroll

我在我的网站上使用无限滚动，想在我的移动网站上使用它，但是，一旦我包含 jquery-mobile，它就会停止工作。

没有它它工作正常。任何指针？

详细信息：我正在使用 Paul Irish 的无限卷轴。初始化似乎没有给出任何错误，但同时，它不会加载下一页（当我到达页面底部时不会进行 ajax 调用）。

我在[这里建立了一个裸骨站点](http://m.clipr.in)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T10:19:05.947

我知道为时已晚，但迟到总比没有好。
您可以使用以下 setInfiniteScroll() 函数在页面上设置无限滚动。您可以直接在文档就绪函数中调用此函数或复制函数代码

```
$(document).ready(function(){
    setInfifniteScroll(scrollingDivId); // Here instead of scrollingDivId you can pass window object
}); 
```

Paulirish 无限滚动 js 有一些预定义的算法来计算下一页 url，如果你的 url 与它不匹配，那么它不会调用下一页。因此我修改了网址以调用下一页。
在这里您为第一页加载内容，然后无限滚动将从第二页开始工作。请注意，您为每一页都维护了一个特定的路径。下面给出的示例将 ?page=pageNumber 附加到我的网址。

```
function setInfifniteScroll(scrollingDivId){
    $('#scrollingDivId').infinitescroll({
        state: {
           currPage: 2 ,
           isDestroyed: false,
           isDone: false     
       },  
       loading: {
          finishedMsg: "<em>No more content to load. You have reached to end.</em>",
          img: "image/loader.gif",
          speed: 'fast',
          msgText: "<em>Loading the next set of content...</em>",
          delay  : 1
       },
       navSelector      : "#navId",
       nextSelector     : "#navId a",
       itemSelector     : ".itemselector", // it is element class to catch from your response
       debug            : false,
       dataType     : 'html',
       path: function(pageNumber) {
          var url = $("#navId a").attr("href");
          pageNumber = parseInt(url.substring(url.lastIndexOf("page=")+5, url.length)) + 1;
          $("#navId a").attr("href","nextPageUrl_append with?page=" + pageNumber);
          return url;
       },
    }, function(newElements, data, url){
       // You can perform operations on data
    });
} 
```

# wpf - 在WPF中，当向左收缩扩展器时，内容向左移动

> ID：16055539
> 
> 赞同：0
> 
> 时间：2013-04-17T08:46:27.500
> 
> 标签：wpf, expander

就像 Office 2010 中的选项卡一样，当我们双击一个选项卡时，菜单会缩小，内容会向上移动。如下所示： ![在此处输入图像描述](https://i.stack.imgur.com/1S6pc.png)

html中的另一个示例：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=gb2312">
    <title>html example</title>
    <style type="text/css">
    .box{width:300px;border:1px solid #ccc;font-size:12px}
    .box dt{line-height:24px;text-align:right;margin:0;padding:0 10px;background:#CCC}
    .box dd{line-height:20px;margin:0}
    #holder2{height:200px}
    </style>
    </head>
    <body>
    <dl class="box">
        <dt id="title">Click to expand/shrink</dt>
        <dd id="holder">
            content
        </dd>
    </dl>
    <br>
    <dl class="box">
        <dt id="title2">Click to expand/shrink</dt>
        <dd id="holder2">
            content
        </dd>
    </dl>
    <script type="text/javascript">

        var Toggle = function(id, minH, maxH, expand, rate, speed){
            this.minH = minH;
            this.maxH = maxH;
            this.tempH = 0;
            this.rate = rate;
            this.speed = speed;
            this.moving = false;
            this.moveT = null;
            this.holder = document.getElementById(id);
            this.expand = expand;
        }
        Toggle.prototype = {
            start : function(){
                if(this.moving) return;
                this.moving = true;
                this.tempH = this.expand ? this.minH : this.maxH;
                var t = this;
                this.moveT = setInterval(function(){t.move()}, this.speed);
            },
            move : function(){
                if(this.expand){
                    if(this.tempH >= this.maxH){
                        this.moving = false;
                        this.expand = false;
                        clearInterval(this.moveT);
                    }else{
                        var h = Math.round((this.maxH - this.tempH) * this.rate);
                        if(h <= 1){
                            h = 1;
                        }
                        this.tempH += h;
                    }
                }else{
                    if(this.tempH <= this.minH){
                        this.moving = false;
                        this.expand = true;
                        clearInterval(this.moveT);
                    }else{
                        var h = Math.round((this.tempH - this.minH) * this.rate);
                        if(h <= 1){
                            h = 1;
                        }
                        this.tempH -= h;
                    }
                }
                this.holder.style.height = this.tempH + "px";
            }
        }
        //module1（default:have shrunk)
        var obj = new Toggle("holder",20,200,true, 0.2, 10);
        document.getElementById("title").onclick = function(){
            obj.start();
        }
        //module1（default:have expanded)
        var obj2 = new Toggle("holder2",20,200,false, 0.2, 10);
        document.getElementById("title2").onclick = function(){
            obj2.start();
        }
    </script>
</body>
</html> 
```

我想把Expander向左收缩，那么右边的内容就会向左移动。你能帮助我吗？

这是我的代码：</p>

```
<ribbon:RibbonWindow x:Class="WpfRibbonApplication5.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ribbon="clr-namespace:Microsoft.Windows.Controls.Ribbon;assembly=RibbonControlsLibrary"
    Title="MainWindow"
    x:Name="RibbonWindow"
    Width="640" Height="480">

<Grid x:Name="LayoutRoot">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <Expander Grid.Row="1" Height="300" HorizontalAlignment="Left" Name="expander1" VerticalAlignment="Top" Width="155" ExpandDirection="Right" Margin="12,57,0,0" BorderBrush="Black">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="150*" />
                <RowDefinition Height="148*" />
            </Grid.RowDefinitions>
            <TextBlock Height="23" HorizontalAlignment="Left" Margin="36,99,0,0" Name="textBlock1" Text="There're sth." VerticalAlignment="Top" />
        </Grid>
    </Expander>
    <Calendar Grid.Row="1" Height="170" HorizontalAlignment="Left" Margin="173,57,0,0" Name="calendar1" VerticalAlignment="Top" Width="180" />
</Grid> 
```

**修改后的代码：**

```
<Grid x:Name="LayoutRoot">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>

    <Expander Grid.Column="0" Height="300" HorizontalAlignment="Left" Name="expander1"
          VerticalAlignment="Top" ExpandDirection="Right" Margin="12,57,0,0" BorderBrush="Black" Expanded="expander1_Expanded">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="150*" />
                <RowDefinition Height="148*" />
            </Grid.RowDefinitions>
            <TextBlock Height="23" HorizontalAlignment="Left" Margin="6,99,0,0" 
                   Name="textBlock1" Text="There're sth." VerticalAlignment="Top" Width="128" />
        </Grid>
    </Expander>
    <Calendar Grid.Column="1" HorizontalAlignment="Left" Margin="0,57,0,0" 
          Name="calendar1" VerticalAlignment="Top" />
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:44:59.513

*我发现当收缩扩展器时，扩展器也占据了原来的区域。*- 那是因为扩展器不在`Height=Auto`. 以下应该工作。

```
<Grid x:Name="LayoutRoot">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <Expander Grid.Row="0" Height="300" HorizontalAlignment="Left" Name="expander1"
              VerticalAlignment="Top" Width="155" ExpandDirection="Right" Margin="12,57,0,0" BorderBrush="Black">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="150*" />
                <RowDefinition Height="148*" />
            </Grid.RowDefinitions>
            <TextBlock Height="23" HorizontalAlignment="Left" Margin="36,99,0,0" 
                       Name="textBlock1" Text="There're sth." VerticalAlignment="Top" />
        </Grid>
    </Expander>
    <Calendar Grid.Row="1" Height="170" HorizontalAlignment="Left" Margin="173,57,0,0" 
              Name="calendar1" VerticalAlignment="Top" Width="180" />
</Grid> 
```

**编辑**

```
<Grid x:Name="LayoutRoot">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>

    <Expander Grid.Column="0" Height="300" HorizontalAlignment="Left" Name="expander1"
              VerticalAlignment="Top" Width="155" ExpandDirection="Right" Margin="12,57,0,0" BorderBrush="Black">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="150*" />
                <RowDefinition Height="148*" />
            </Grid.RowDefinitions>
            <TextBlock Height="23" HorizontalAlignment="Left" Margin="36,99,0,0" 
                       Name="textBlock1" Text="There're sth." VerticalAlignment="Top" />
        </Grid>
    </Expander>
    <Calendar Grid.Column="1" Height="170" HorizontalAlignment="Left" Margin="173,57,0,0" 
              Name="calendar1" VerticalAlignment="Top" Width="180" />
</Grid> 
```

# java - 如何在主类中引用菜单类

> ID：16055542
> 
> 赞同：0
> 
> 时间：2013-04-17T08:46:42.120
> 
> 标签：java, android, menu

我创建了一个 Android 应用程序，为了清理我的主类，我想将与菜单选项相关的代码放在另一个类中，然后在我的主类中引用它。我想知道我怎么能做到这一点！这是我的代码：

```
package com.behzadmoradi.farnooshandbehzad;

import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.Toast;

public class ActivityMenu extends Activity {

// Reference to the menus

public static final int menuExit = 1;
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(0, menuExit, 1, "Exit").setIcon(
            android.R.drawable.star_big_off);
    return super.onCreateOptionsMenu(menu);

}

// Reference to the menu items
@Override
public boolean onMenuItemSelected(int featureId, MenuItem item) {
    switch (item.getItemId()) {
        case menuExit :
            finish();
            Toast.makeText(this, "Good Bye", Toast.LENGTH_LONG).show();
    }
    return super.onMenuItemSelected(featureId, item);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:09:26.793

我认为您在这里混合了概念。如果你想清理你的主类，你应该将其他更通用的方法移动到外部类，而不是 Activity！

如果您在许多活动中使用相同的菜单，您还可以创建一个通用活动来声明该方法，然后从其他活动继承。

如果这不是您的情况，并且查看此代码，我会将代码留在您的主 Activity 中以使代码清晰。

# c++ - C ++：将数据写入富文本框Text属性时获取字符代码而不是字母

> ID：16055547
> 
> 赞同：0
> 
> 时间：2013-04-17T08:46:49.860
> 
> 标签：c++, string, vector, char, ascii

我是 C++ 新手，正在 Visual Studio 中开发一个相对雄心勃勃的 Win32 应用程序。我遇到的问题是，当从字符串“写入”时，主窗口中的文本字段显示的是数字而不是字母。

我正在将矢量读入富文本框，但文本框显示的不是 AA，而是 6565。我知道 65 是“A”的字符代码，但无法找到如何获取窗口显示字母。

这是创建向量的代码。调试这块显示数据正确加载。这段代码是“投资组合”类的一部分。

```
vector<string> tickers;
string cell;
string line;

ifstream d ("file.csv"); //The file contents look like: AA,AAPL,BAC and so on

if (d.is_open()) {

    getline(d,line);
    stringstream line2(line);

    for (ci=0; ci<c; ci++) { //c is known and is the number of 'columns' in the file I am reading.
      getline(line2,cell,',');
      tickers.push_back(cell);
    }
} 
```

富文本框的名称是“Results2”。设置富文本框的Text属性的代码是：

```
portfolio p;
int n = p.tickers.size();

for (int i=0; i<n; i++) {
    for (int j=0; j<p.tickers[i].size(); j++) {
        Results2->Text += p.tickers[i][j];
    }
    Results2->Text += "\n";
} 
```

我知道“Results2->Text”位是正确的，因为数据到达那里就好了。问题是，我最终得到：

6565 65658076

代替：

AA AAPL

我究竟做错了什么？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:00:26.507

您正在操作的 C++/STL 字符串与 RichTextBox 正在使用的 C++/CLI 字符串之间可能存在编组问题。

**编辑**

问题是您将字符一个接一个地放在 中`RichTextBox::Text`，或者该字段需要 a `System::String`，因此它将每个字符作为整数值转换为 a `String`，然后再将其放入文本框中，这就是为什么您得到 ASCII 数字而不是字符串的原因。

由于`portfolio::tickers`is a `vector<std::string>`正如您在评论中指定的那样，您可以在将其提供给之前将每个转换`std::string`为 a ：`char*``RichTextBox::Text`

```
portfolio p;
for (int i=0; i<p.tickers.size(); i++) {
    Results2->Text += gcnew String(p.tickers[i].c_str());
    Results2->Text += "\n";
} 
```

你也可以使用`marshal_as`VC2008 中介绍的：

```
Results2->Text += marshal_as<String^>(p.tickers[i].c_str()); 
```

# java - Websphere 应用程序级环境变量

> ID：16055552
> 
> 赞同：4
> 
> 时间：2013-04-17T08:47:03.237
> 
> 标签：java, jakarta-ee, websphere

是否可以在 websphere的**应用程序级别**设置**环境变量？**

 **Websphere 服务器可以托管多个应用程序。在服务器级别应用的任何环境变量都适用于该服务器上的**所有**应用程序。是否可以创建仅适用于单个应用程序的变量？

例如：假设我们有一个**SpreadsheetApp**和一个**DocsApp**在同一台服务器上运行。它们都共享一些可以通过名为**DocStorageLocation**的环境变量配置的通用代码。是否可以为两个应用程序设置不同的**DocStorageLocation**？

或者，是否有另一种方法可以配置在**同一台服务器**上运行的**多个应用程序**？

 *** * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T13:45:14.930

**问题 1**

> 是否可以为两个应用程序设置不同的 DocStorageLocation？

我不认为这是可能的。Websphere 的环境变量旨在供服务器本身使用。一个变量只有三个可能的作用域，分别是 Server、Cluster 和 Node。

例如，server1 上的**ORACLE_JDBC_DRIVER_PATH**环境变量*，node1*范围可用于 node1 上的 JDBC 提供程序*(* classPath = ${ORACLE_JDBC_DRIVER_PATH}/ojdbc14.jar)。

问题是：“为什么我不能只为我的应用程序设置不同的值”？但我的猜测是，只要启动了服务器、集群和节点，为已部署的应用程序覆盖这个值是没有意义的。

虽然我觉得不可能，但我还是尝试了。但是我没有设法覆盖为 websphere 服务器设置的环境变量。

**问题2**

> 或者，是否有另一种配置在同一服务器上运行的多个应用程序的方法？

***环境入口***

您可以将环境条目添加到您的 web.xml 部署描述符，这是您可以查找的变量。

```
<env-entry>
    <env-entry-name>DocStorageLocation</env-entry-name>
    <env-entry-type>java.lang.String</env-entry-type>
    <env-entry-value>C:/DocStorage</env-entry-value>
</env-entry> 
```

然后测试，在java类中查找这个变量：

```
//TEST
Object l_test = null;
try {
    Context l_ctx = new InitialContext();
    l_test = l_ctx.lookup("java:comp/env/DocStorageLocation");
} catch (NamingException e1) {
    // TODO
    e1.printStackTrace();
} 
```

***.properties 文件的 URL 资源***

您可以创建 URL 资源。它将链接到本地​​主机或任​​何服务器上设置的 .properties 文件，因此可以根据环境将每个属性设置为不同的值。

例如，JNDI 名称**url/environmentJndiName**在 server1 上的值为*file:///server1/environment.properties ，在 server2 上的值为 file:///server2/environment.properties。*

然后在服务器 1 上，您可以在 environment.properties 文件中设置*docStorageLocation=value1 ，在 server2 上设置**docStorageLocation=value2*。

在您的部署描述符 web.xml 中，资源的引用将是相同的。您不必在 java 源代码中更改此引用：

```
 <resource-ref>
         <res-ref-name>url/environment</res-ref-name>
         <res-type>java.net.URL</res-type>
         <res-auth>Application</res-auth>
         <res-sharing-scope>Shareable</res-sharing-scope>
   </resource-ref> 
```

然后使用此资源读取属性。

```
try {
    Context l_ctx = new InitialContext();
    URL l_url = (URL) l_ctx.lookup("java:comp/env/url/environment");
    // New properties
    Properties l_properties = new Properties();
    // Load properties
    this.loadProps(l_properties, l_url.getPath());

} catch (NamingException e1) {
    // TODO
    e1.printStackTrace();
} catch (IOException e) {
    // TODO Bloc catch auto-généré
    e.printStackTrace();
}

    ...

private void loadProps(final Properties p_properties, final String p_fileLocation)
    throws IOException
{
    // Open stream
    BufferedInputStream l_is = new BufferedInputStream(
            new FileInputStream(
                    new File(p_fileLocation)));

    p_properties.load(l_is);
    // Close stream
    l_is.close();
} 
```

您需要将 web.xml 的资源引用**url/环境**绑定到 websphere 服务器上为此资源设置的 JNDI 名称**url/environmentJndiName 。**用websphere修改ibm-web-bnd.xml文件，用glassfish修改sun-web.xml文件等。

**谢谢**

如果有更好的解决方案，或者没有回答问题，请告诉我。我仍在学习，但我使用 websphere 已经有一段时间了——即使我更喜欢其他解决方案。谢谢，@+。****

# activex - Techart + activeX + 垂直滚动

> ID：16055554
> 
> 赞同：0
> 
> 时间：2013-04-17T08:47:04.113
> 
> 标签：activex, teechart

我正在尝试将滚动工具添加到我的图表中，但无法做到这一点。下面是代码

```
{
m_chart1.ClearChart();
m_chart1.GetPage().SetMaxPointsPerPage(5);  
wchar_t tmp[30]={0};
wchar_t t[10] = L"T%d";
int i = 0;
m_chart1.AddSeries(1);
wsprintf(tmp,t,i);
m_chart1.Series(i).SetColor(RGB(rand(),rand(),rand()));
m_chart1.Series(i).SetLegendTitle(tmp);  
m_chart1.Series(i).FillSampleValues(100);
m_chart1.Series(i).GetMarks().SetVisible(false);
m_chartNavigation.SetChartLink(m_chart1.GetChartLink());
m_chart1.GetAspect().SetView3D(false);
m_chart1.GetTools().Add(22);
_variant_t vardata;
VariantInit (&vardata);
vardata.vt = VT_BYREF;
vardata.byref = &m_chart1.GetAxis().GetBottom();
m_chart1.GetTools().GetItems(0).GetAsAxisScroll().SetAxis(vardata);
m_chart1.GetTools().GetItems(0).SetActive(true);
} 
```

代码编译正确，但箭头未显示在 Axis 上。谢谢阿克谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:33:40.393

> 代码编译正确，但箭头未显示在轴上

我不确定`m_chartNavigation`你的代码是什么。是`ChartPageNavigator`吗？请注意，此组件添加了一个与图表分开的导航栏。

如果要显示一些箭头来滚动图表，则应使用 AxisArrow 工具，而不是 AxisScroll 工具，即 2，而不是 22。

```
m_chart1.GetTools().Add(2);
m_chart1.GetTools().GetItems(0).GetAsAxisArrow().SetAxis(vardata); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:13:05.423

我已经修改了您的代码，因此 AxisArrow 工具以正确的方式工作，并允许您根据需要滚动轴。因此，请查看下一个代码并考虑指示，因为您可以毫无问题地使用该代码。

**注意事项：**

1.-检查文件夹中是否有项目时的所有类。如果您没有所有类，则必须从文件夹 Uitilities\New VC Classes 中复制它们，在您安装 TeeChartActivex 的文件夹中。该文件夹类似于下一个***C:......\TeeChart Pro v2012 ActiveX Control\Utilities\New VC Classes***

2.- 在您的代码中使用下一个包含：

```
#include "stdafx.h"
#include "XXXXX.h"
#include "XXXXX.h"

#include "series.h"
#include "axes.h"
#include "axis.h"
#include "TeeChartDefines.h"
#include "aspect.h"
#include "zoom.h"
#include "scroll.h"
#include "environment.h"
#include "marks.h"
#include "page.h"
#include "lineseries.h"
#include "axisarrowtool.h"
#include "toollist.h"
#include "tools.h"
#include "comutil.h"
#include "afxdisp.h" 
```

3.- 在项目的 OnInitDialog() 上编写了代码。

**代码：**

你能告诉我们下一个代码是否对你有用吗？

```
{
.
.
.
// TODO: Add extra initialization here
    m_tChart1.ClearChart();
    long index = m_tChart1.AddSeries(scLine);
    m_tChart1.GetAspect().SetView3D(false);
    m_tChart1.GetPage().SetMaxPointsPerPage(5);
    m_tChart1.Series(index).SetColor(RGB(rand(),rand(),rand()));
    m_tChart1.Series(index).SetLegendTitle("Hello");  
    m_tChart1.Series(index).FillSampleValues(100);
    m_tChart1.Series(index).GetMarks().SetVisible(false);
    long index1 = m_tChart1.GetTools().Add(tcAxisArrow); 
    //SetAxisArrow Tool to do scroll.
    m_tChart1.GetTools().GetItems(index1).GetAsAxisArrow().SetAxis(COleVariant(short(atBottom))); 
 // TODO: Add extra initialization here
    return TRUE;  // return TRUE  unless you set the focus to a control
} 
```

我希望会有所帮助。

谢谢，桑德拉。

# java - 读取整个 XML 行并将其保存到数组中？JDOM

> ID：16055555
> 
> 赞同：1
> 
> 时间：2013-04-17T08:47:08.340
> 
> 标签：java, xml, jdom

我有一个非常简单的问题，但我无法解决，希望你能帮助我。

如何使用 JDOM 读取整行 XML 文件？我需要标签和属性，并希望将其保存在一个数组中。我怎样才能做到这一点？

```
 package converter;

import java.io.FileReader;
import java.io.FileWriter;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

import javax.swing.JOptionPane;

import au.com.bytecode.opencsv.CSVReader;
import au.com.bytecode.opencsv.CSVWriter;

import org.jdom2.Document;
import org.jdom2.input.*;
import org.jdom2.output.*;

public class Converter {

    public List<Entry> xmlconvert(String pfad, String pfad2, String bitmask){
        List<Entry> entry = new ArrayList<Entry>();
        List<Entry> wrongEntries = new ArrayList<Entry>();
        String wrongEntryIndexes = "";

        String[] languages = {"en", "pt", "it", "fr", "es", "de", "zh"};

        try{

        SAXBuilder builder = new SAXBuilder();
        Document doc = builder.build(pfad);

        JOptionPane.showMessageDialog(null, "Converting successful.");
        return entry; 
```

如您所见，这只是一个开始>.<

对于 CSV 文件，我是这样做的：

```
public List<Entry> convert(String pfad, String pfad2, String bitmask) {

    List<Entry> entry = new ArrayList<Entry>();
    List<Entry> wrongEntries = new ArrayList<Entry>();
    String wrongEntryIndexes = "";

    String[] languages = {"en", "pt", "it", "fr", "es", "de", "zh"};

    try {

        CSVReader reader = new CSVReader(new FileReader(pfad), ';', '\"', 1);

        String [] nextLine;

        while ((nextLine = reader.readNext()) != null) {
            Entry entryi = new Entry();
            entryi = new Entry();
            entryi.termEntryID = nextLine[0];
            entryi.termEntryUUID = nextLine[1];
            entryi.termID = nextLine[2];
            entryi.termUUID = nextLine[3];
            entryi.term = nextLine[4];
            entryi.status = nextLine[5];
            entryi.language = nextLine[6];
            entryi.domains = nextLine[7];
            entryi.morphosyntacticRestriction = nextLine[8];
            entryi.variantsConfiguration = nextLine[9];
            entryi.isHeadTerm = nextLine[10];
            entryi.checkInflections = nextLine[11];
            entryi.frequency = nextLine[12];
            entryi.createdBy = nextLine[13];
            entryi.createdOn = nextLine[14];
            entryi.changedBy = nextLine[15];
            entryi.changedOn = nextLine[16];
            entryi.context = nextLine[17];
            entryi.crossReference = nextLine[18];
            entryi.definitionDE = nextLine[19];
            entryi.definitionEN = nextLine[20];
            entryi.example = nextLine[21];
            entryi.externalCrossReference = nextLine[22];
            entryi.gender = nextLine[23];
            entryi.geographicalUsage = nextLine[24];
            entryi.imageURL = nextLine[25];
            entryi.note = nextLine[26];
            entryi.numerus = nextLine[27];
            entryi.partOfSpeech = nextLine[28];
            entryi.processStatus = nextLine[29];
            entryi.sourceOfDefinition = nextLine[30];
            entryi.sourceOfTerm = nextLine[31];
            entryi.termType = nextLine[32];
            entry.add(entryi);
        } 
```

但是对于 CSV 文件，很容易以相同的结构再次编写它。我将所有变量保存在不同的数组中，然后检查它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:05:34.923

如果您谈论 XML，您不应该谈论行，只有开始和结束标记很重要。除了人类可读性之外，行在 XML 中没有任何意义。如果您有想要的`Element`实例，您可以致电`getName()`并`getAttributes()`收集您的所有信息。然后，您可以将它们推到任何类型上，然后再将`List`其转换为 a `String[]`。

然而，这并没有多大意义，因为 XML 通常具有树结构，而您正试图将其强制为扁平结构。此外，如果您想查看 a`Map`或 a的平面结构`Set`，则可以将键（元素或属性的名称）和值保存为一对。

也许一些 XML 示例显示您的文件的 gernal 模式以及您迄今为止用于读取 XML 的代码将是有用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T19:00:00.230

在不知道 XML 的结构的情况下很难说，但根据您的评论，我猜您有这样的事情：

```
<parentElement>
    <childElement>
        <attr1>XXX</attr1>
        ....
    </childElement>
   ... more childElements
</parentElement> 
```

您已经拥有 Document，因此您需要遍历 childElement 标记。为了那个原因：

```
Element root = doc.getRootElement();
List<Element> childElements = root.getChildren("childElement"); 
```

只需遍历 childElements

# android - 使用 Facebook SDK 3 在多个活动中管理 Android 应用程序中的 Facebook 会话

> ID：16055561
> 
> 赞同：3
> 
> 时间：2013-04-17T08:47:26.337
> 
> 标签：android, facebook, facebook-android-sdk

我已经开始使用 Facebook SDK 3.0。我正在使用 LoginButton 小部件登录 Facebook。我指的是这样做的美味样本。在此示例中，一个 Activity（正在初始化会话的位置）正在托管多个 Fragment。

但在我的应用程序中，多个活动托管多个片段。**首先，启动器活动（正在初始化会话的位置）使用 LoginButton 小部件进行登录操作。当我转移到其他活动时，我该如何处理会议？？？**

我在 StackOverFlow 中发现了相同类型的问题，但已针对*deprecated Facebook object*回答了该问题。但**我需要关于 LoginButton 小部件、 UiLifecycleHelper 和 Session.StatusCallback 的答案**。

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T14:23:16.047

您必须始终引用唯一的**Session**类。每个活动都必须从**Session**类中获取一个已经打开的会话，或者，如果没有找到有效的会话，则创建一个新的会话。执行此操作的方法是*Session.getActiveSession()*。
然后，在每个活动中，添加定义与会话状态更改相关的逻辑的回调。

UiLifecycleHelper是一个非常有用的类，可以帮助您管理活动生命周期中的会话状态（例如，该类的 onPause() 方法处理删除在调用它的活动中添加的回调[）](http://developers.facebook.com/docs/reference/android/3.0/UiLifecycleHelper/)

# sql - 在 SQLite 中插入多行

> ID：16055566
> 
> 赞同：14
> 
> 时间：2013-04-17T08:47:54.553
> 
> 标签：sql, sqlite

我正在尝试在 SQLite（最新版本）表中插入多行但抛出错误

从[这里](https://stackoverflow.com/questions/1609637/is-it-possible-to-insert-multiple-rows-at-a-time-in-an-sqlite-database)得到了这个想法，这是我的 sql 查询：

```
INSERT INTO "Track"
SELECT "Leonard Collections" AS "Album",
       "Instrumental" AS "Artist",
       "00:02:59.3800000" AS "Duration",
       "1/1/0001 12:00:00 AM" AS "ReleasedDate",
       "If You Love Me" AS "Title",
       "False" AS "IsPlayableOnLocal"
UNION
SELECT "Leonard Collections",
       "Instrumental",
       "00:02:56.6930000",
       "1/1/0001 12:00:00 AM",
       "Espoir",
       "False",
UNION
SELECT "Leonard Collections",
       "Instrumental",
       "00:03:51.6770000",
       "1/1/0001 12:00:00 AM",
       "Don't Cry For My Argentina",
       "False" 
```

但它抛出

```
SQL logic error or missing database

near "UNION": syntax error 
```

这是我的表结构

```
CREATE TABLE Track 
(
    ID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL , 
    Album VARCHAR(100) NULL , 
    Artist VARCHAR(255) NOT NULL DEFAULT "Artist Unknown", 
    Duration VARCHAR(255) NOT NULL , 
    LocalPath VARCHAR(255) NULL , 
    ReleasedDate DATE NOT NULL , 
    Title VARCHAR(255) NULL , 
    IsPlayableOnLocal INTEGER NOT NULL , 
    Rating VARCHAR(255) NULL
) 
```

我的查询有问题吗？

任何帮助，将不胜感激。

TIA

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-17T08:55:14.320

由于您提到了最新版本的 SQLite，您应该使用多值插入（SQLite 自 3.7.11 版起支持），如下所示：

```
INSERT INTO mytable (col1, col2, col3) VALUES
    (1, 2, "abc"),
    (2, 4, "xyz"),
    (3, 5, "aaa"),
    (4, 7, "bbb"); 
```

这更短，更快，更不容易出错。其他一些数据库（至少 MySQL 和 PostgreSQL）也支持这种语法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T08:54:08.673

在您的第二个联合声明中，您在“False”之后有多余的 ',' 字符。这很可能是问题所在。

# codeigniter - 跨模块视图文件加载codeigniter

> ID：16055571
> 
> 赞同：0
> 
> 时间：2013-04-17T08:48:08.913
> 
> 标签：codeigniter, module, hmvc

我在 codeigniter hmvc 中有两个模块。

1- 访问 2- 显示

这是我的访问模块控制器

```
class Access extends MX_Controller
{

    public function __contstruct()
    {
        parent::__construct();
        $this->load->module('display');
    }
    public function index()
    {

        echo modules::run('display/login');
    }
    public function logout()
    {
        //$this->load->view('login');
        echo modules::run('display/test');
    }
} 
```

这是我的显示模块控制器

```
class Display extends MX_Controller
{
    public function login()
    {
        $this->load->view('header');
        $this->load->view('login'); // This file resides in Access module view folder
        $this->load->view('footer');
    }
} 
```

因此，当访问控制器接触时，从技术上讲，它应该访问控制器中的显示模块登录功能，作为回报应该显示登录表单以及页眉和页脚。

这里的问题是 login.php 被放置在从显示模块控制器访问的访问模块视图文件中。所以，我想每个人的问题都非常清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:42:08.793

加载视图时，您只需在视图名称之前添加模块名称即可。所以 $this->load->view('login'); 将变为 $this->load->view('access/login');

那应该行得通。

# c++ - 在 MPI 如何广播 c++ 向量？

> ID：16055572
> 
> 赞同：5
> 
> 时间：2013-04-17T08:48:14.020
> 
> 标签：c++, vector, mpi

我想使用 MPI 广播 C++ 向量。

我不允许使用 boost.mpi

现在我使用[MPI(C++) 中 Vector Usage 中](https://stackoverflow.com/questions/2546298/vector-usage-in-mpic)最受好评的答案，但它不起作用..

好的，代码如下：

```
// declaration of variables (ParsedData object will contain these variables)
int generators_count, intervals_count;
std::vector<float> mean_arr, variance_arr, interval_begins_arr, interval_ends_arr;
std::vector<int> amount_of_numbers_to_generate_arr;

// load data into parsed_data object
if (process_id == 0) {
  ParsedData parsed_data = load_input_data(filename);
  intervals_count = parsed_data.intervals_count;
  generators_count = parsed_data.generators_count;
  mean_arr = parsed_data.mean_arr;
  variance_arr = parsed_data.variance_arr;
  interval_begins_arr = parsed_data.interval_begins_arr;
  interval_ends_arr = parsed_data.interval_ends_arr;
  amount_of_numbers_to_generate_arr = parsed_data.amount_of_numbers_to_generate_arr;
}

// send size of vectors to all processes - that MPI code works
MPI_Bcast(&intervals_count, 1, MPI_INT, 0, MPI_COMM_WORLD);
MPI_Bcast(&generators_count, 1, MPI_INT, 0, MPI_COMM_WORLD);

// reserve memory for vectors
if (process_id != 0) {
  mean_arr.reserve(generators_count);
  variance_arr.reserve(generators_count);
  amount_of_numbers_to_generate_arr.reserve(generators_count);

  interval_begins_arr.reserve(intervals_count);
  interval_ends_arr.reserve(intervals_count);
}

// stolen from https://stackoverflow.com/questions/2546298/vector-usage-in-mpic
// broadcast each vector, following code compiles but not works properly
MPI_Bcast(&mean_arr[0], mean_arr.size(), MPI_FLOAT, 0, MPI_COMM_WORLD);
MPI_Bcast(&variance_arr[0], variance_arr.size(), MPI_FLOAT, 0, MPI_COMM_WORLD);
MPI_Bcast(&interval_begins_arr[0], interval_begins_arr.size(), MPI_FLOAT, 0, MPI_COMM_WORLD);
MPI_Bcast(&interval_ends_arr[0], interval_ends_arr.size(), MPI_FLOAT, 0, MPI_COMM_WORLD);
MPI_Bcast(&amount_of_numbers_to_generate_arr[0], amount_of_numbers_to_generate_arr.size(), MPI_FLOAT, 0, MPI_COMM_WORLD); 
```

当我只是简单地将结果放在不同的过程中时，我得到了错误的答案：

```
 cout << "process ID " << process_id << endl << "amount_of_numbers_to_generate_arr[0] " << amount_of_numbers_to_generate_arr[0] << endl; 
```

结果：

```
using process 0
process ID 0
amount_of_numbers_to_generate_arr[0] 100000000
using process 1
process ID 1
amount_of_numbers_to_generate_arr[0] -423989576
using process 2
process ID 2
amount_of_numbers_to_generate_arr[0] 1741864632 
```

它应该是：

```
using process 0
process ID 0
amount_of_numbers_to_generate_arr[0] 100000000
using process 1
process ID 1
amount_of_numbers_to_generate_arr[0] 100000000
using process 2
process ID 2
amount_of_numbers_to_generate_arr[0] 100000000 
```

无论如何如何解决这个问题？

或者也许有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T08:55:46.733

当您“为向量保留内存”时，您实际上并没有调整向量的大小。在`MPI_Bcast`随后的调用中，向量的大小仍然是`0`，因此没有收到任何值。

要实际调整向量的大小，请调用`resize`而不是`reserve`.

# jasper-reports - HTML 5 图表与社区 iReport 的集成

> ID：16055579
> 
> 赞同：0
> 
> 时间：2013-04-17T08:48:38.547
> 
> 标签：jasper-reports, integration, ireport

我正在使用 JasperReport Server 4.5 和 iReport 4.5 社区版，而在社区版中，我们没有像 iReport 中的企业版那样的任何 HTML 5 图表库。

[HTML 5 图表](http://community.jaspersoft.com/wiki/advanced-formatting-new-html5-charts)

有没有办法将这些 HTML 5 图表与社区版 iReport 集成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T21:40:16.507

“iReport Professional version5.0 引入了 Jaspersoft 新的 HTML5 图表库。”

如果您需要此功能，则需要购买 JasperReports Professional。 [https://www.jaspersoft.com/store/jaspersoft-professional-developer-edition](https://www.jaspersoft.com/store/jaspersoft-professional-developer-edition)

此致。

# c# - 在 C# 中输入到控制台应用程序

> ID：16055580
> 
> 赞同：0
> 
> 时间：2013-04-17T08:48:40.523
> 
> 标签：c#, .net, matlab, dll, console-application

我为我的 matlab 程序创建了一个 dll 文件。我将它集成到 C# 控制台应用程序中，现在我必须从 php 调用这个控制台应用程序。用户选择一个图像，其图像路径应作为 C# 控制台应用程序中的输入传递。

我检查了定义图像路径的控制台应用程序，它工作正常我如何对其进行编程以接受来自 php 应用程序的输入，以便我可以在 php 中调用 exec(exepath imgpath)。我也必须将图像路径传递给 matlab dll 文件。我的控制台应用程序是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using shoesddl;
using MathWorks.MATLAB.NET.Arrays;
using MathWorks.MATLAB.NET.Utility;

namespace shoes_describe
{
    class Program
    {
        static void Main(string[] args)
        {
            shoesddl.shoes_describe obj = new shoesddl.shoes_describe();

            MWArray img= "C:/Users/adithi.a/Desktop/dressimages/T1k5aHXjNqXXc4MOI3_050416.jpg";
            obj.shoes(img);
        }
    }    
} 
```

我需要来自 php 的上述程序中的 imgpath 即 img。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:53:14.887

使用[命令行参数](http://msdn.microsoft.com/en-us/library/aa288457%28v=vs.71%29.aspx)。您的方法接受`string[] args`. `exe`您可以从 PHP 代码中传递图像路径和名称。

```
> exepath imgpath 
```

那`imagepath`将在`args[0]`

# node.js - 在 node.js 中更改上传文件的名称

> ID：16055595
> 
> 赞同：0
> 
> 时间：2013-04-17T08:49:32.640
> 
> 标签：node.js, file-upload, formidable

我正在使用`node.js`上传文件。但它会`/tmp`以随机的类似名称（例如：）上传文件夹中的文件`132d439bb31ee13daaf6ce02e223738f`。我希望节点将文件上传到具有给定名称的给定目录中。我怎样才能做到？这是我的代码：

```
var http = require("http"),
    url = require("url"),
    sys = require("sys"),
    events = require("events"),
    fs = require("fs"),
    formidable = require('formidable'),
    util = require('util');

var server = http.createServer(function(req, res) {
    switch (url.parse(req.url).pathname) {
        case '/':
            display_form(req, res);
            break;
        case '/upload':
            upload_file(req,res);
            break;
        default:
            show_404(req, res);
            break;
    }
});

server.listen(8124);

function display_form(req, res) {
    //displays an html form with an upload and a submit button
}

function upload_file(req, res) {
    if (req.url == '/upload' && req.method.toLowerCase() == 'post') {

      // Instantiate a new formidable form for processing.

      var form = new formidable.IncomingForm();

      // form.parse analyzes the incoming stream data, picking apart the different fields and files for you.

      form.parse(req, function(err, fields, files) {
        if (err) {

          // Check for and handle any errors here.

          console.error(err.message);
          return;
        }
            form.on('fileBegin', function(name, files) {
                files.name="./guake.up";
            });
        res.writeHead(200, {'content-type': 'text/plain'});
        res.write('received upload:\n\n');

            console.log(files.name);

        // This last line responds to the form submission with a list of the parsed data and files.

        res.end(util.inspect({fields: fields, files: files}));
      });
      return;
    }
}

function show_404(req, res) {
    //shows a 404 page
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:18:12.077

我找到了答案，我只需要在我的`form.parse`方法之前添加以下代码：

```
form.on('error', function(err) {
             throw err;
             })

       /* this is where the renaming happens */
     .on ('fileBegin', function(name, file){
             //rename the incoming file to the file's name
             file.path = form.uploadDir + file.name;
      }); 
```

问题就解决了

# .net - 通过 RDP 脚本自动部署

> ID：16055597
> 
> 赞同：1
> 
> 时间：2013-04-17T08:49:35.140
> 
> 标签：.net, deployment, rdp

我必须将`deploy`我的.NET 软件放在几个`RDP Servers`（MS Srv）上。由于安全原因，没有可用的 Networkshare。

是否可以使用`script`（powershell）或类似的东西来自动化这个过程？

此刻我在

*   创建部署包（单击一次发布通过`VS2012`）
*   开始`RDP`
*   将应用程序复制到远程文件系统
*   对每台服务器重复此步骤

我想以某种方式使这个过程更简单......

直到现在我才发现这个线程，我不知道这是否对我有帮助： [使用脚本通过 RDP 将文件复制到远程服务器](https://stackoverflow.com/questions/1867180/copy-files-to-a-remote-server-via-rdp-using-a-script) 有人对这个主题有过经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:49:07.920

RDP 文件传输通过一个相当复杂的隧道过程进行，您的计算机最终会作为 tsclient 暴露给服务器。编写脚本并不可行，因为它涉及交互式会话。

您是否考虑过自动化工具？Inedo 的 BuildMaster[可以](http://inedo.com/buildmaster)轻而易举地处理此文件传输（而且它比 RDP 更安全/更强大）。将其设置为直接从源代码管理构建 ClickOnce 项目非常简单。听上去，BuildMaster 的免费版可以满足您的要求。

（免责声明：我为 Inedo 工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-29T15:08:36.580

您可以通过组合 cmdkey.exe 和 mstsc.exe 来自动启动 RDP 连接：

通过执行以下命令存储您的服务器凭据：

```
cmdkey.exe /generic:servername /user:username /pass:pass 
```

之后，您可以通过以下方式自动登录服务器：

```
mstsc.exe /v:servername 
```

您还可以通过在 mstsc 的连接设置中选择“保存”将自定义 RDP 设置保存到 rdp 文件。然后，您可以通过以下方式启动连接：

```
mstsc.exe myfile.rdp 
```

现在的问题是，您究竟如何将文件传送到远程计算机。如果您能够通过 \tsclient 共享获取文件，那么您可能会幸运地在连接到 RDP 服务器后尝试使用该选项执行程序。为此，您可以在 rdp 文件中添加以下两行：

```
 remoteapplicationname:s:C:\windows\system32\cmd.exe
    remoteapplicationcmdline:s:C:\windows\system32\cmd.exe /C deployMyStuff.bat 
```

另一种选择是在连接后找出 RDP 会话 ID，并尝试使用 sysinternals 中的 psexec 在远程计算机上执行批处理。在此处查看获取活动会话的示例：

[如果 RDP 从未连接到 Jenkins 从站，则使用 IE 的 Selenium 悬停操作不起作用](https://stackoverflow.com/questions/42555772/selenium-hover-action-with-ie-doesnt-work-if-rdp-never-connected-to-jenkins-sla/45941959#45941959)

然后，您可以使用 sysinternals 中的 psexec 从本地 PC 启动活动会话中的进程：

```
 psexec \\servername -i %SESSION% -d CMD.exe /C mydeployment.bat 
```

# mysql - MySQL汇总..

> ID：16055598
> 
> 赞同：0
> 
> 时间：2013-04-17T08:49:41.700
> 
> 标签：mysql, group-by, rollup

我有这个 SQL 代码

如果不存在则创建模式测试；使用测试；

```
drop table if exists contas;
create table if not exists contas (
    id_conta integer not null AUTO_INCREMENT,
    tipo enum('D', 'C') not null,
    valor decimal(10,2) not null,
    data timestamp not null default current_timestamp,
    primary key(id_conta));

insert into contas(tipo,valor,data) 
    values 
        ('C', 1000, date_add(NOW(), interval 20 minute)),
        ('C', 340, date_add(NOW(), interval 23 minute));

insert into contas(tipo,valor,data) 
    values
        ('D', 199, date_add(NOW(), interval 1 minute)),
        ('D', 200, date_add(NOW(), interval 2 minute)),
        ('D', 14, date_add(NOW(), interval 3 minute));

(select data.* from (select
        id_conta,
        tipo, 
        date(data) as vencimento,
        sum(valor) as valor
    from 
        contas
    group by tipo, data 
    with rollup
) as data
-- -- where (data.tipo and data.vencimento) is not null
order by data.tipo, data.vencimento desc);

insert into contas(tipo,valor,data) values('D', 234.49, date_add(NOW(), interval 1 minute));
insert into contas(tipo,valor,data) values('D', 334.00, date_add(NOW(), interval 2 minute));

insert into contas(tipo,valor,data) values('C', 49.50, date_add(NOW(), interval 1 minute));
insert into contas(tipo,valor,data) values('C', 42.00, date_add(NOW(), interval 2 minute));
insert into contas(tipo,valor,data) values('C', 100.00, date_add(NOW(), interval 3 minute));

insert into contas(tipo,valor,data) values('C', 10.00, '2013-04-30 23:59:59');
insert into contas(tipo,valor,data) values('C', 20.00, '2013-04-30 23:59:59');
insert into contas(tipo,valor,data) values('C', 50.00, '2013-04-30 23:59:59');

insert into contas(tipo,valor,data) values('D', 10.00, '2013-05-02 23:59:59');
insert into contas(tipo,valor,data) values('D', 20.00, '2013-05-02 23:59:59');
insert into contas(tipo,valor,data) values('D', 60.00, '2013-05-02 23:59:59'); 
```

这将产生一些数据，我执行 SELECT 并获得以下输出：

```
+----------+------+------------+---------+
| id_conta | tipo | vencimento | valor   |
+----------+------+------------+---------+
|       14 | NULL | NULL       | 3677.47 | --> This guy
|       14 | C    | 2013-04-30 |   80.00 |
|       22 | C    | 2013-04-17 |  100.00 |
|        2 | C    | 2013-04-17 |  340.00 |
|        9 | C    | 2013-04-17 |   49.50 |
|       10 | C    | 2013-04-17 |   42.00 |
|       11 | C    | 2013-04-17 |  100.00 |
|        1 | C    | 2013-04-17 | 1000.00 |
|       20 | C    | 2013-04-17 |   49.50 |
|       21 | C    | 2013-04-17 |   42.00 |
|       14 | C    | NULL       | 1803.00 |
|       15 | D    | 2013-05-02 |   90.00 |
|        3 | D    | 2013-04-17 |  199.00 |
|        4 | D    | 2013-04-17 |  200.00 |
|        5 | D    | 2013-04-17 |   14.00 |
|        6 | D    | 2013-04-17 |  234.49 |
|        7 | D    | 2013-04-17 |  234.49 |
|        8 | D    | 2013-04-17 |  334.00 |
|       18 | D    | 2013-04-17 |  234.49 |
|       19 | D    | 2013-04-17 |  334.00 |
|       15 | D    | NULL       | 1874.47 |
+----------+------+------------+---------+
21 rows in set (0.00 sec) 
```

第一行是所有的总和，但是，有没有办法让它的值作为所有 C 的总和并减去 D（C = 贷方，D = 借方）

在 SQL 中？纯SQL我已经搜索过了，没有找到任何东西。

# html - CSS 页脚不会向下移动到页面底部

> ID：16055599
> 
> 赞同：0
> 
> 时间：2013-04-17T08:49:42.437
> 
> 标签：html, css

我有这个 CSS：

```
body,html {
    width:100%;
    height:100%;
    font-family:Calibri;
    position: relative;
    margin:0;
    padding:0;
}

#wrap {
    min-height: 100%;
    height: auto !important; 
    height: 100%; 
    margin: 0 auto -580px; /* the bottom margin is the negative value of the footer's height */
}

.push {
    height: 100px; /* .push must be the same height as .footer */
}

/* header stuff */
#header-topbar {
    width:100%;
    height:30px;
    padding:10px 10px 10px 10px;
    background-color:#a79494;
}
#phone-tel {
    position:block;
    float:right;
    margin-right:16%;
    margin-top:5px;
    font-size:20px;
}
#logo {
    position:absolute;
    float:left;
    margin-left:15%;
    margin-top:-20px;
}

/* main body/content */
#body-content {
    width:70%;
    margin:120px auto 0 auto;
    padding:10px 10px 10px 10px;
    border:solid 1px #a79494;
    border-top:solid 4px #a2cd3a;
}

/*footer */ 
```

对于我的网站，由于某种原因，页脚不会位于页面底部。

我尝试添加 Push`div`以使其向下移动到页面底部，但由于某种原因这不起作用。

有什么想法我能做什么？我也创建了一个小提琴：http: [//jsfiddle.net/cGGMS/](http://jsfiddle.net/cGGMS/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:54:37.813

`#wrap`的边距必须是`0 auto -100px`

[http://jsfiddle.net/cGGMS/3/](http://jsfiddle.net/cGGMS/3/)

"底部边距是页脚高度的负值"
你的页脚高度是 100px

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:53:13.453

删除这样的负边距`#wrap`：

```
#wrap {
    min-height: 100%;
    height: auto !important; 
    height: 100%; 
    margin: 0 auto; /* the bottom margin is the negative value of the footer's height */
} 
```

JSFiddle：http: [//jsfiddle.net/cGGMS/2/](http://jsfiddle.net/cGGMS/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:57:39.887

请评论这一行并使用它。

```
#wrap {
min-height: 100%;
height: auto !important; 
height: 100%; 
/* margin: 0 auto -580px; */ 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T08:55:46.163

您没有正确关闭 wrap div。它应该在页脚 div 之后关闭。这是工作代码[http://jsfiddle.net/cGGMS/4/](http://jsfiddle.net/cGGMS/4/)

```
 <div id="footer">
    <div id="footer-inner">
          &copy; Copyright <?php echo date("Y"); ?> All Rights Reserved.<br /><br />
     </div>
  </div>
  </div> <!--wrap should end here not at the top of footer --> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T08:52:40.130

尝试使用样式`postition:fixed;`和`bottom:0;`页脚。

# c# - 在设计模式下在 Visual Studio 2012 中使用报表查看器时出错

> ID：16055601
> 
> 赞同：3
> 
> 时间：2013-04-17T08:49:45.833
> 
> 标签：c#, visual-studio-2012, reportviewer, report-viewer2010

我正在使用 Visual Studio 2012 开发 MVC 应用程序。我在我的项目中添加了一个 ascx 页面来放置报表查看器。当我从页面的工具箱中拖放 ReportViewer 组件时，它没有正确显示 ReportViewer 并在其上显示此错误：

`Failed to create designer 'Microsoft.Reporting.WebForms.ReportViewer, Microsoft.Reporting.WebForms version 10.0.0.0, Culture=natural, PublicKeyToken=b03f5f7f11d50a3a'`

我还在项目引用中添加了 Microsoft.ReportViewer.WebForms 程序集。Visual Studio 2012 中的reportviewer 有什么问题吗？提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T10:51:24.960

SOLVED!

1.  I downloaded and installed Report Viewer 2010 version.
2.  Then I added Microsoft.ReportViewer.WebForms.DLL assembly file from `C:\Windows\assembly\GAC_MSIL\Microsoft.ReportViewer.WebForms\11.0.0.0__89845dcd8080cc91`.
3.  And finally I added the following line to the .ascx file. `<%@ Register assembly="Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" namespace="Microsoft.Reporting.WebForms" tagprefix="rsweb" %>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-13T20:02:05.927

> 请参阅解决方案探索和探索参考链接并删除 ReportViewer Forms 和 WindowReportViewer 然后简单地从工具箱中添加报表查看器，它对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-12T19:11:28.177

我希望这对某人有所帮助，因为我找到了解决此问题的非常简单的方法...

去[这里](https://www.microsoft.com/en-us/download/details.aspx?id=35747) 下载 Reportviewer v11。

然后从工具箱中右键单击general...单击Choose Items 并从.NET Framework 组件中浏览`C:\Windows\assembly\GAC_MSIL\Microsoft.ReportViewer.WebForms\11.0.0.0__89845dcd8080cc91`

这会将 ReportViewer 添加到您的工具箱中！

# java - 使用带有注释的 GlassFish 上的 GenericJMSRA 部署 MDB？

> ID：16055609
> 
> 赞同：0
> 
> 时间：2013-04-17T08:50:05.197
> 
> 标签：java, annotations, message-driven-bean, glassfish-2.x, ejb-jar.xml

在 GlassFish Server 2.1 上，我创建了一个用于与 ActiveMQ 连接的 GenericJMSRA，如本指南中所述：http: [//activemq.apache.org/sjsas-with-genericjmsra.html](http://activemq.apache.org/sjsas-with-genericjmsra.html)

我已经成功地使用 ejb-jar.xml 注入上下文的经典方式来部署 MDB：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE ejb-jar PUBLIC '-//Sun Microsystems, Inc.//DTD Enterprise JavaBeans 2.0//EN'     'http://java.sun.com/dtd/ejb-jar_2_0.dtd'>
<ejb-jar>
  <enterprise-beans>
    <message-driven>
      <ejb-name>QueueListener</ejb-name>
      <ejb-class>foo.QueueListenerMDB</ejb-class>
      <transaction-type>Container</transaction-type>
    </message-driven>
  </enterprise-beans>
</ejb-jar> 
```

和 sun-ejb-jar.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sun-ejb-jar PUBLIC '-//Sun Microsystems, Inc.//DTD Application Server 8.1 EJB 2.1//EN' 'http://www.sun.com/software/appserver/dtds/sun-ejb-jar_2_1-1.dtd'>
<sun-ejb-jar>
  <enterprise-beans>
    <ejb>
      <ejb-name>QueueListener</ejb-name>
        <mdb-connection-factory>
          <jndi-name>jms/amqQueueConnectionFactory</jndi-name>
        </mdb-connection-factory>
        <mdb-resource-adapter>
        <resource-adapter-mid>activemqra</resource-adapter-mid>
        <activation-config>
          <activation-config-property>
            <activation-config-property-name>DestinationType</activation-config-property-name>
            <activation-config-property-value>javax.jms.Queue</activation-config-property-value>
          </activation-config-property>
          <activation-config-property>
          <activation-config-property-name>destination</activation-config-property-name>
            <activation-config-property-value>qRequest</activation-config-property-value>
          </activation-config-property>
        </activation-config>
      </mdb-resource-adapter>
    </ejb>
  </enterprise-beans>
</sun-ejb-jar> 
```

我将如何继续以注释驱动的 EJB 3.0 样式注入上述配置？更具体地说，我不知道如何注入以下属性：

```
<resource-adapter-mid>activemqra</resource-adapter-mid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:50:14.147

终于让它工作了。

我完全删除了 ejb-jar.xml 并保持 sun-ejb-jar.xml 不变。然后我将类 foo.QueueListenerMDB 注释如下：

```
@MessageDriven(name = "QueueListener", mappedName = "QueueListener")
public class QueueListenerMDB implements MessageListener {
    ...
} 
```

# ms-access - 自动合并拆分 ms 访问数据库

> ID：16055612
> 
> 赞同：2
> 
> 时间：2013-04-17T08:50:11.257
> 
> 标签：ms-access

在工作中，我们有一个拆分 ms 访问数据库。后端位于本地映射的驱动器上（因此对于每个人来说都是相同的路径）。我知道想在前端创建一个按钮，单击该按钮会自动创建数据库的合并版本。此版本对于特定的备份/历史记录需求是必需的。我对 VBA 编程知之甚少，因此不胜感激。

要创建合并版本，代码只需执行以下操作： 创建重复的前端 (?) 删除重复中的所有现有表 从后端导入表到重复

（我知道合并拆分数据库并不是一个好主意，但在这种情况下，对于许多完全不了解 CS 的用户来说，这是最有用的解决方案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:35:33.493

使用以下函数在前端数据库中创建一个模块

```
Public Function ImportLinkedTables()
Dim cdb As DAO.Database, tbd As DAO.TableDef
Dim tablesToLink As Collection, item As Variant, a() As String
Const LinkPrefix = ";DATABASE="
Set cdb = CurrentDb

Set tablesToLink = New Collection
For Each tbd In cdb.TableDefs
    If tbd.Connect Like (LinkPrefix & "*") Then
        '' tab-delimited list: TableDef name [tab] Source file [tab] Source table
        tablesToLink.Add tbd.Name & vbTab & Mid(tbd.Connect, Len(LinkPrefix) + 1) & vbTab & tbd.SourceTableName
    End If
Next
Set tbd = Nothing

For Each item In tablesToLink
    a = Split(item, vbTab, -1, vbBinaryCompare)
    DoCmd.DeleteObject acTable, a(0)
    Debug.Print "Importing [" & a(0) & "]"
    DoCmd.TransferDatabase acImport, "Microsoft Access", a(1), acTable, a(2), a(0), False
Next
Set tablesToLink = Nothing

Set cdb = Nothing
DoCmd.Quit
End Function 
```

只需一步即可创建名为“ImportLinkedTables”的宏：

```
RunCode
    Function Name  ImportLinkedTables() 
```

启动该过程的表单按钮背后的代码是

```
Private Sub Command0_Click()
Dim fso As FileSystemObject
Dim wshShell As wshShell
Dim accdbName As String, command As String

Const SourceFolder = "Y:\_dev\"
Const DestFolder = "C:\Users\Gord\Desktop\"

accdbName = Application.CurrentProject.Name

'' copy front-end file to new location
Set fso = New FileSystemObject
fso.CopyFile SourceFolder & accdbName, DestFolder & accdbName, True
Set fso = Nothing

Set wshShell = New wshShell
command = """"
command = command & wshShell.RegRead("HKLM\Software\Microsoft\Office\" & Application.Version & "\Common\InstallRoot\Path")
command = command & "MSACCESS.EXE"" """ & DestFolder & accdbName & """ /x ImportLinkedTables"
wshShell.Run command, 7, False
Set wshShell = Nothing

End Sub 
```

# ruby - 带有命令的 ruby 脚本生成一个 DOS shell 而不是 msysgit 一个

> ID：16055614
> 
> 赞同：2
> 
> 时间：2013-04-17T08:50:20.637
> 
> 标签：ruby, msysgit

我已经安装了最新的 Git Bash (msysgit)。如果我创建一个名为 test.rb 的简单 ruby​​ 文件，其内容如下：

```
#!/usr/bin/env ruby

puts `dir`
puts `ls -al` 
```

运行`ruby test.rb`将在第一个上打印目录，但在第二个`puts`上找不到。它显然是在生成一个 DOS shell 而不是 msysgit shell。`ls``puts`

如何指定子进程应在 msysgit shell 下运行？

此外，子 shell 应该从调用 shell 继承环境变量（特别是 PATH）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T07:24:28.617

截至发稿时的答案是不可能的。msysgit 中的 spawn 进程是一个 CMD 进程。然而，我们可以让 CMD 进程调用一个 ruby​​ 脚本来解决这个限制。

# c++ - 允许“朋友”类只访问一些私人成员

> ID：16055616
> 
> 赞同：40
> 
> 时间：2013-04-17T08:50:30.267
> 
> 标签：c++, friend

假设我有三个 C++ 类 FooA、FooB 和 FooC。

FooA 有一个名为 的成员函数`Hello`，我想在 FooB 类中调用这个函数，但我不希望 FooC 类能够调用它。我能想出实现这一点的最好方法是将 FooB 声明为 FooA 的朋友类。但是只要我这样做，*所有*FooA 的私有成员和受保护成员都会暴露出来，这对我来说是非常不可接受的。

所以，我想知道 C++（03 或 11）中是否有任何机制比`friend`类更好，可以解决这个困境。

我认为如果可以使用以下语法会很好：

```
class FooA
{
private friend class FooB:
    void Hello();
    void Hello2();
private:
    void Hello3();
    int m_iData;
};

class FooB
{
    void fun()
    {
        FooA objA;
        objA.Hello()  // right
        objA.Hello2() // right
        objA.Hello3() // compile error
        ojbA.m_iData = 0; // compile error
    }
};

class FooC
{
    void fun()
    {
        FooA objA;
        objA.Hello()  // compile error
        objA.Hello2() // compile error
        objA.Hello3() // compile error
        ojbA.m_iData = 0; // compile error
    }
}; 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-17T08:53:57.343

没有什么可以让一个类成为一个特定函数的朋友，但是你可以让`FooB`一个具有私有构造函数的“关键”类成为朋友，然后`FooA::Hello`将该类作为一个被忽略的参数。`FooC`将无法提供参数，因此无法调用`Hello`：

[这种面向密钥的访问保护模式是已知的惯用语吗？](https://stackoverflow.com/questions/3220009/is-this-key-oriented-access-protection-pattern-a-known-idiom)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-04-17T08:54:49.137

我认为您可以在这里使用[Attorney-Client](http://en.wikibooks.org/wiki/More_C++_Idioms/Friendship_and_the_Attorney-Client)。

在您的情况下，示例应该是这样的

```
class FooA
{
private:
    void Hello();
    void Hello2();
    void Hello3();
    int m_iData;

    friend class Client;
};

class Client
{
private:
   static void Hello(FooA& obj)
   {
      obj.Hello();
   }
   static void Hello2(FooA& obj)
   {
      obj.Hello2();
   }
   friend class FooB;
};

class FooB
{
    void fun()
    {
        FooA objA;
        Client::Hello(objA);  // right
        Client::Hello2(objA); // right
        //objA.Hello3() // compile error
        //ojbA.m_iData = 0; // compile error
    }
};

class FooC
{
    void fun()
    {
        /*FooA objA;
        objA.Hello()  // compile error
        objA.Hello2() // compile error
        objA.Hello3() // compile error
        ojbA.m_iData = 0; // compile error*/
    }
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-27T13:02:52.787

您可以通过从接口类继承类的接口将其部分公开给指定的客户端。

```
class FooA_for_FooB
{
public:
    virtual void Hello() = 0;
    virtual void Hello2() = 0;
};

class FooA : public FooA_for_FooB
{
private: /* make them private */
    void Hello() override;
    void Hello2() override;
private:
    void Hello3();
    int m_iData;
};

class FooB
{
    void fun()
    {
        FooA objA;
        FooA_for_FooB &r = objA;
        r.Hello()  // right
        r.Hello2() // right
        objA.Hello3() // compile error
        objA.m_iData = 0; // compile error
    }
};

class FooC
{
    void fun()
    {
        FooA objA;
        objA.Hello()  // compile error
        objA.Hello2() // compile error
        objA.Hello3() // compile error
        objA.m_iData = 0; // compile error
    }
}; 
```

这里的访问控制由基类增强`FooA_for_FooB`。通过引用类型`FooA_for_FooB`，`FooB`可以访问其中定义的成员`FooA_for_FooB`。但是，`FooC`无法访问这些成员，因为它们已被覆盖为`FooA`. 你的目的可以不使用 inside 的类型`FooA_for_FooB`，也可以不使用`FooC`除 以外的任何地方`FooB`，不用太注意就可以保留。

这种方法不需要`friend`，使事情变得简单。

类似的事情可以通过将基类中的所有内容设为私有，并在派生类中选择性地将一些成员封装并公开为公有来完成。不过，这种方法有时可能需要丑陋的沮丧。（因为基类将成为整个程序中的“货币”。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T08:55:21.003

不，这并不是真正的限制。在我看来，限制是`friend`——一种绕过设计缺陷的钝器——首先存在。

*你的班级`FooA`不知道`FooB`和`FooC`*“哪一个应该能够使用它”。它应该有一个公共接口，而*不在乎*谁可以使用它。这就是界面的重点！在该接口中调用函数应该*始终保持*良好`FooA`、安全、快乐、一致的状态。

如果您担心您可能会不小心`FooA`从您不想使用的地方使用该界面，那么请不要那样做；C++ 不是一种适合防止此类用户错误的语言。在这种情况下，您的测试覆盖率应该足够了。

严格来说，我相信你可以通过一些极其复杂的“设计模式”获得你想要的功能，但老实说，我不会打扰。

如果这是您程序设计语义的问题，那么我礼貌地建议您的设计存在缺陷。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T10:01:47.697

最安全的解决方案是使用另一个类作为两个类的“中间人”，而不是让其中一个类成为`friend.`@ForEveR 的答案中建议的一种方法，但您也可以对代理进行一些搜索类和其他可以应用的设计模式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-13T12:20:21.053

你需要继承。尝试这个：

```
// _ClassA.h
class _ClassA
{
  friend class ClassA;
private:
  //all your private methods here, accessible only from ClassA and _ClassA.
}

// ClassA.h
class ClassA: _ClassA
{
  friend class ClassB;
private:
  //all_your_methods
} 
```

这样你就有： `ClassB`是唯一能够使用`ClassA`. `ClassB`无法访问`_ClassA`私有的方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-17T08:57:30.990

整个想法`friend`是将您的课程暴露给朋友。

有两种方法可以让您更具体地了解您所公开的内容：

1.  继承自`FooA`，这样只会暴露受保护的和公共的方法。

2.  仅与某个方法成为朋友，这样只有该方法才能访问：

.

```
 friend void FooB::fun(); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-03-27T01:43:41.277

我最近不得不这样做，我不喜欢这些解决方案让类类型在当前命名空间中徘徊而没有任何目的的方式。如果您真的只是希望此功能可用于单个类，那么我将使用与上述不同的模式。

```
class Safety {
protected:
   std::string _Text="";
public:
   Safety(const std::string& initial_text) {
      _Text=initial_text;
   }
   void Print(const std::string& test) {
      std::cout<<test<<" Value: "<<_Text<<std::endl;
   }
};

class SafetyManager {
protected:
   // Use a nested class to provide any additional functionality to 
   // Safety that you want with protected level access. By declaring
   // it here this code only belongs to this class. Also, this method
   // doesn't require Safety to inherit from anything so you're only
   // adding weight for the functionality you need when you need it.
   // You need to be careful about how this class handles this object
   // since it is really a Safety cast to a _Safety. You can't really 
   // add member data to this class but static data is ok.
   class _Safety : Safety {
   public:
      void SetSafetyText(const std::string& new_text) {
         _Text=std::string(new_text);
      }
   };

public:
   static void SetSafetyText(Safety* obj, const std::string& new_text) {
      if(obj==nullptr) throw "Bad pointer.";
      _Safety& iobj=*(_Safety*)obj;
      iobj.SetSafetyText(new_text);
   }
}; 
```

然后在 main （或其他任何地方）中，您无法通过 Safety 修改 _Text 但您可以通过 SafetyManager （或其后代）。

```
#include "Safety.h"

int main() {
   Safety t("Hello World!");
   t.Print("Initial");
   SafetyManager::SetSafetyText(&t, "Brave New World!");
   t.Print("Modified");
/*
   t._Text;                         // not accessible
   Safety::SetSafetyText(&t, "ERR");// doesn't exist
   t.SetSafetyText(&t, "ERR");      // doesn't exist
   _Safety _safety;                 // not accessible
   SafetyManager::_Safety _safety;  // not accessible
*/
} 
```

有人会说这比友元类遵循更好的 OOP 实践，因为它更好地封装了杂乱的部分，并且不会将任何东西传递到安全继承链中。您也不需要为这种技术修改 Safety 类，使其更加模块化。这可能是许多较新的语言允许嵌套类但几乎没有其他任何东西都借用了朋友概念的原因，即使这*只是*添加了仅对单个类可用的功能（并且如果 Safety 标记为 final 或标记为重要则不起作用它的部分代码是私有的）。

# sql - 插入后如何在SQL中输出参数的值？

> ID：16055622
> 
> 赞同：0
> 
> 时间：2013-04-17T08:50:42.163
> 
> 标签：sql, delphi, parameters, nexusdb, elevatedb

是否可以在设置并插入 SQL 组件后检索带有参数值的 SQL 语句？

SQL 语句：

```
SELECT * FROM SomeTable
WHERE SomeColumn = :pSomeValue; 
```

代码：

```
procedure LoadParams(aValue: string);
begin
  Qry.Close;
  Qry.ParamByName('pSomeValue').AsString := aValue;
  MessageDlg(Qry.SQL.Text, mtInformation, [mbOK], 0); // this does not show the value but the parameter name.     
  Qry.Open;
end; 
```

我希望能够在打开语句之前看到它，但是当我现在尝试这个时，我得到的是参数名称而不是值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T08:54:14.060

查询参数通常在 DBMS 中被替换，即这些值是通过连接单独发送的，而不是作为 SQL 语句的一部分。如果您希望同时查看 SQL 和值，数据库的日志可能会帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:04:02.973

您可以做的一件事是复制参数并将其放入 SELECT 中：

```
SELECT :pSomeValueDuplicate AS paraminput, * FROM SomeTable
WHERE SomeColumn = :pSomeValue;

Qry.ParamByName('pSomeValue').AsString := aValue;
Qry.ParamByName('pSomeValueDuplicate').Value := Qry.ParamByName('pSomeValue').Value; 
```

然后您可以检查字段： paraminput 以获取您用作输入的内容。不知何故，我无法让 Delphi 在 1 个查询中两次使用相同的参数。

```
SELECT 'SELECT * FROM SomeTable WHERE SomeColumn ='+ :pSomeValueduplicate AS thesqlinput,* FROM SomeTable WHERE SomeColumn = :pSomeValue; 
```

实际上，您只需一个参数即可：

```
SELECT 'SELECT * FROM SomeTable WHERE SomeColumn ='+ SomeColumn AS thesqlinput,* FROM SomeTable WHERE SomeColumn = :pSomeValue; 
```

# oracle - 找不到文件名时关闭 Adob e Acrobat 4（通过批处理执行）

> ID：16055633
> 
> 赞同：0
> 
> 时间：2013-04-17T08:51:15.750
> 
> 标签：oracle, batch-file, plsql, acrobat, dbms-scheduler

我开发了一个解决方案，其中 PL/SQL Oracle API 生成需要打印的 PDF（包括完整文件路径）的文件名（参数 1），然后使用 DBMS_SCHEDULER 传递该文件名和打印机名称（参数 2 ) 到以下批处理文件：

```
 "C:\Program Files (x86)\Adobe\Acrobat 4.0\Reader\AcroRd32.exe" /t %1 %2 
```

但是，有时传递给批处理文件的文件名不存在。因为该文件不存在 Adob​​e 继续运行（在后台）。这会阻止 API 再次执行，直到有人手动结束 Windows 进程，因为 DBMS 作业已连接到 Adob​​e 实例。

不幸的是（除非 Oracle 中有办法检查文件是否存在于目录中）我无法在 Oracle 端解决这个问题，因此我需要在 Windows 端解决它。

因此，是否有任何其他逻辑可以添加到批处理文件或任何其他脚本中，以验证文件是否存在，如果文件不存在，则结束该过程。该解决方案必须高效，因为 PDF 文件的打印对时间很敏感。

如果有人确实有针对此问题的 Oracle 端解决方案，那么我将很乐意提供相关代码。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:18:14.663

不启动 Acrobat 比尝试关闭它更容易。您可以使用以下[`IF EXIST`命令](https://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/if.mspx?mfr=true)检查批处理文件中的文件是否存在：

```
@IF EXIST %1 (
    "C:\Program Files (x86)\Adobe\Acrobat 4.0\Reader\AcroRd32.exe" /t %1 %2
) ELSE (
    REM optionally report error?
) 
```

有一些方法可以从 Oracle 中检查文件，但这可能更简单，因为您已经有一个批处理文件，除非您想在此过程的早期测试和报告错误。

# python - 正则表达式 Python 提取信息

> ID：16055641
> 
> 赞同：-3
> 
> 时间：2013-04-17T08:51:40.860
> 
> 标签：python, regex, python-2.x

我想知道 python 中是否有一种方法可以从下面的示例中提取信息并将其放入表中：

```
table = [ Time: 01:09:25.258, O:Localhost, R:192.168.1.1 id:62 ] 

data = "01:09:25.258 mta   Messages  I Doc O:Localhost   R:192.168.1.1   id:62 " 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:01:28.663

对于这项任务，我认为使用字典是个好主意。你可以这样做：

```
import re

data = "Time:01.09.25.258 O:Localhost R:192.168.1.1 id:62 "

result = {}
for i in data.split():
    j, k = re.findall(r'[^: ]+', i)
    result[j] = k

print(result) #Prints {'id': '62', 'O': 'Localhost', 'Time': '01.09.25.258', 'R': '192.168.1.1'} 
```

# java - 从相机获得更好质量的图片

> ID：16055642
> 
> 赞同：0
> 
> 时间：2013-04-17T08:51:41.033
> 
> 标签：java, android, android-camera

我通过在 Android 中拍照

```
Intent takePicture = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(takePicture, CAMERA_REQUEST); 
```

并通过显示/保存

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {
            Bitmap photo = (Bitmap) data.getExtras().get("data");
            ImageView theImage = (ImageView) findViewById(R.id.preview);
            theImage.setImageBitmap(photo);

            // try to save its
            try {
                File testFile = new File(Environment.getExternalStorageDirectory(), "test.png");
                testFile.createNewFile();
                FileOutputStream out = new FileOutputStream(testFile);
                   photo.compress(Bitmap.CompressFormat.PNG, 90, out);
            } catch (Exception e) {
                   e.printStackTrace();
            } 
```

这很好用，但是图像质量很差。我不知道为什么，因为我用 8 兆像素拍照。

有没有办法在不需要手动相机的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:55:37.940

仔细看看[这篇](http://developer.android.com/training/camera/photobasics.html)文章：有两种方法可以在 Android 中捕获图像。第一个是为拍摄小而轻的照片而设计的——这是您使用的方法，第二个是捕获全尺寸的照片并将它们写入存储。这篇文章描述了完成这项任务的两种方法。

# c# - 将 Amazon SNS 与 ServiceStack 集成

> ID：16055643
> 
> 赞同：3
> 
> 时间：2013-04-17T08:51:41.967
> 
> 标签：c#, json, servicestack, webhooks, amazon-sns

我正在开发一套 ETL 风格的应用程序，它将使用[Amazon SNS](http://aws.amazon.com/sns/)和[Amzazon SQS](http://aws.amazon.com/sqs/)以及一些宁静的服务将基于云的系统与本地系统连接起来。SNS 允许您将 HTTP 端点设置为订阅者，并且您的应用程序可以将消息发布到 SNS，这些消息将被分派到您的 HTTP 端点（作为 json 消息），以及 SQS 队列、电子邮件、短信等。

我想做的是处理来自我的本地应用程序的 HTTP 响应，该应用程序已经包含了 servicestack 框架的某些部分。然而，大多数 servicestack 和其他 RESTful 框架的文档都以典型的请求/响应模式描述了它们的用法。但在这种情况下，我只是在等待来自 SNS 的响应。我仍然可以使用任何 servicestack 代码来处理仅响应消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T22:23:08.963

Amazon SNS 使用常规 POST 请求将通知推送到您的应用程序，您可以像处理任何其他传入的 POST 请求一样处理它。

端点只是您应用程序中的一个常规 url，它将接收[JSON 格式](http://docs.aws.amazon.com/sns/latest/dg/json-formats.html)的 POST 请求。

Webhook 只是一个花哨的名字，不要被它弄糊涂了。

# php - 安装 pear 以安装 phpunit 时如何修复错误？

> ID：16055656
> 
> 赞同：0
> 
> 时间：2013-04-17T08:52:17.940
> 
> 标签：php, phpunit

我不太确定这个问题是否属于这个论坛，所以如果不是，并且你即将关闭这个问题，请提出在哪里问这个问题的建议。

基本上，我需要`phpunit`在 Ubuntu 12.04 上安装。通过使用数据包管理器这样做，我在运行时遇到错误`phpunit`：

```
PHP Fatal error:  require_once(): Failed opening required 'PHP/CodeCoverage/Filter.php' (include_path='.:/usr/share/php:/usr/share/pear') in /usr/bin/phpunit on line 38 
```

有[解决方案](https://stackoverflow.com/questions/1528717/phpunit-require-once-error)，即`phpunit`安装`pear`。

按照我下载并运行的[梨安装说明](http://pear.php.net/manual/en/installation.getting.php)`go-pear.phar`，它本身会产生错误

```
PHP Notice:  Uninitialized string offset: 0 in phar:///home/alexander/opt/src/go-pear.phar/Console/Getopt.php on line 145 
```

任何建议如何从这里开始？我也只需要`phpunit`，所以`pear`只用于这种情况一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:33:14.410

安装`phpunit`真的似乎非常复杂和间接，但这里是解决方案：

*   至于 Ubuntu 12.04`pear`应该已经安装
*   但是，`pear`应该使用最新版本的
*   并且`phpunit`需要在重新安装之前删除

整个过程和每个步骤都[在 symfony-world 上](http://symfony-world.blogspot.ch/2012/10/phpunit-install-on-ubuntu-problem-fix.html)进行了描述，可能需要给定注释中显示的附加步骤。这是 Ubuntu 12.04 完整过程的复制粘贴：

```
sudo apt-get remove phpunit
sudo apt-get upgrade pear
sudo pear channel-discover pear.phpunit.de
sudo pear channel-discover pear.symfony-project.com
sudo pear channel-discover components.ez.no
sudo pear channel-discover pear.symfony.com
sudo pear update-channels
sudo pear upgrade-all
sudo pear install --alldeps phpunit/PHPUnit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:54:13.980

如果您只需要 phpunit，请使用[composer](http://getcomposer.org/) .. 例如 composer.json 可能如下所示：

```
{
    "require-dev": {
        "phpunit/phpunit": "3.7.*"
    }
} 
```

# css - CSS 和飞碟标头

> ID：16055657
> 
> 赞同：3
> 
> 时间：2013-04-17T08:52:18.160
> 
> 标签：css, flying-saucer

我工作的公司使用飞碟已经有一段时间了。最近，他们已将标头格式更改为如下所示的复杂格式：

```
 THE COMPANY NAME
_____________________________________________________________________________
This is the name of the article                          |    Date:04/17/2013
_____________________________________________________________________________ 
```

遗憾的是，我无法让它看起来像上面那样。我可以让它看起来像顶线比底线短的地方：

```
 THE COMPANY NAME
____________________________________________________________________
This is the name of the article                   |  Date:04/17/2013
_____________________________________________________________________________ 
```

这是代码：

```
 @page {
        size:letter;
        margin-top: 0.8in;
        margin-bottom: 0.5in;
        padding: 5px;
        border-top:#90aac5 solid 1px;
        @top-left {content: element(leftHeader);}
        @top-center{content: element(centerHeader);}
        @top-right {content: element(rightHeader);}
        }

    #page-thisheader-center {
    position:running(centerHeader);
    border-bottom:#90aac5 1px solid;
    font-size:9px;
    height:52px;
    color:#7e7f7f;
    padding:2px;

     }

   #page-header-right {
    position:running(rightHeader);
    border-top:#90aac5 1px solid;
    height: 25px;
    font-size:9px;
    color:#7e7f7f;
    white-space:nowrap;
    float:right;
    padding-top:5px;

     }

    #page-header-left {
    position:running(leftHeader);
    border-top:#90aac5 1px solid;
    height: 25px;
    font-size:9px;
    color:#7e7f7f;
    float:left;
    padding-top:5px;

     }
    .date {
     height: 15px;
     border-left: #90aac5 solid 1px;
     float:right;
     width:75px; 
```

对于上面的 ids 和 classes，标签看起来像这样：

```
 <div id ="page-header-left" align="left">
       <div> <xsl:call-template name="get.title"/></div>
      </div>

     <div id ="page-header-right" align="right">
       <div class="date"> <xsl:call-template name="get.date"/></div>
      </div>

    <div id ="page-thisheader-center">
       <div> <xsl:call-template name="get.company.name"/></div>
      </div> 
```

我想这就是全部。我希望有人能帮帮忙。我完全不知道如何纠正顶线。谢谢！！

***更新*** 短线是由于较长的标题换行。有没有办法将@top-left、@top-center 和@top-right 边距固定为固定宽度，以便标题可以换行而不会导致整个标题根据标题滑动更小/更大？顺便说一句：我试过 whitespace: nowrap; 在@top-left 边距上，但这只会导致整个标题从页面的右侧滑出，标题很长。

我希望这有助于解决问题。提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T06:06:52.510

我不知道是否可以使用`@top-left`,`@top-center`和`@top-right`. 当我尝试您的示例代码时，我得到如下信息：

```
 THE COMPANY NAME
____________________________________________________________________

_____                                               ____                    
title                                               date 
```

获得所需内容的一种解决方案是使用单个`@top-center`标题，其中包含标题的三个部分。

@top-center 组件将跨越页面的整个宽度，您可以在其中布局三个 div。

例如 ：

```
@page {
    size: letter;
    margin-top: 0.8in;
    margin-bottom: 0.5in;
    @top-center {content: element(centerHeader);}
}

#page-thisheader-center {
    position: running(centerHeader);
}

#company {
    border-bottom: #90aac5 1px solid;
    text-align:center;
}
#line2 {
    border-bottom: #90aac5 1px solid;
}
#article{
    float:left;
}
#date {
    border-left: #90aac5 solid 1px;
    margin-left: 6in;
} 
```

和 ：

```
 <div id="page-thisheader-center">
    <div id="company">THE COMPANY NAME</div>
    <div id="line2">
      <div id="article">Name of the article</div>
      <div id="date">Date : 04/07/2013</div>
    </div>
  </div> 
```

# php - 强制 TinyMCE 保留原始源代码格式

> ID：16055659
> 
> 赞同：1
> 
> 时间：2013-04-17T08:52:32.910
> 
> 标签：php, html, tinymce, wysiwyg

我有一个数据库，其中从 CMS 系统存储了几个页面。这些页面有**HTML**、**JavaScript**和几个**PHP**调用。一般来说，代码看起来像这样（只是有点长）：

```
<div style="width:603px;height:446px;position:relative;">
    <div style="position:absolute;width:567px;border-bottom:1px solid rgb(200,200,200);">
        SOME TEXT GOES HERE
    </div>
    <?php somePhpCall(); ?>
    <script>hoverImages()</script>
</div> 
```

我需要的是一个所见即所得的编辑器，它允许我修改代码并保持元素的完整。TinyMCE 使格式如下：

```
<p>SOME TEXT GOES HERE</p> 
```

并丢失所有 CSS、JS 和 PHP 代码。

我可以配置**TinyMCE**以保持原始源代码格式吗？如果不能 - 我可以使用什么替代的 WYSIWYG 编辑器。

**PS**：我已经下载了最新版本，它不断将我的`<?php`标签更改为`<!--?php`or`&lt;?php`并将我的`<script>`标签更改为`<script type="text/javascript">// <![CDATA[`. 我试过使用`apply_source_formatting : true`

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:35:22.043

你 TinyMCE 配置只使用 java 脚本。另一个所见即所得编辑器 url 链接集成您的程序自动配置所见即所得编辑器示例代码

```
 <script src="http://js.nicedit.com/nicEdit-latest.js" type="text/javascript"></script>
    <script type="text/javascript">bkLib.onDomLoaded(nicEditors.allTextAreas);</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-12T10:20:06.270

我通过使用 portect 选项找到了一个更好的解决方案：

```
tinymce.init({
    protect: [
        /\<\/?(if|endif)\>/g, // Protect <if> & </endif>
        /\<xsl\:[^>]+\>/g, // Protect <xsl:...>
        /<\?php.*?\?>/g // Protect php code
    ]
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T09:08:26.123

**您应该阅读TinyMCE 文档**的这一部分 ：[http ://www.tinymce.com/wiki.php/Configuration3x:Cleanup/Output](http://www.tinymce.com/wiki.php/Configuration3x:Cleanup/Output)

# android - 更改选项卡时重叠片段？

> ID：16055664
> 
> 赞同：1
> 
> 时间：2013-04-17T08:52:42.583
> 
> 标签：android, android-actionbar, actionbarsherlock, android-tabs

我的片段相互重叠时遇到问题。我有一个 Android ActionBar 选项卡，我正在使用`ActionBarSherlock`. 当我选择其他选项卡时，来自的片段`ListFragment`被放置在我的`HomeFragment`. 就像它没有正确分离一样。

下面是代码`HomeFragment`：

```
public class HomeFragment extends SherlockFragment
                          implements ActionBar.TabListener {

    private View homeView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
                                                     Bundle savedInstanceState) {
        homeView = inflater.inflate(R.layout.homefragment, container, false);
        return homeView;
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.add(android.R.id.content, this,"apple");
        ft.attach(this);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {}

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {}

} 
```

代码`HerbFragment`：

```
public class HerbsFragment extends SherlockListFragment 
                           implements ActionBar.TabListener {

    /** An array of items to display in ArrayList */
    String apple_versions[] = new String[]{
            "Pancreas",
            "Blood"
    };

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
                                                  Bundle savedInstanceState) {
        /** Creating array adapter to set data in listview */
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(
            getActivity().getBaseContext(), 
            android.R.layout.simple_list_item_1, 
            apple_versions);

        /** Setting the array adapter to the listview */
        setListAdapter(adapter);
        View v = inflater.inflate(R.layout.activity_main, container, false);
        return super.onCreateView(inflater, container, savedInstanceState);
    }

    @Override
    public void onStart() {
        super.onStart();
        /** Setting the multiselect choice mode for the listview */
        getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.add(android.R.id.content, this,"apple");
        ft.attach(this);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.detach(this);
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:13:59.453

我认为 HerbFragment 中的代码放错了位置，因为您应该处理具有选项卡的活动/片段中的选项卡内容，而不是在选项卡中。您可以通过两种不同的方式在 HomeFragment 中处理它：

-当用户单击选项卡时，替换当前片段：只需将其更改为 a `ft.replace`（并删除该`ft.attach`行）：

```
ft.add(android.R.id.content, this,"apple");
ft.attach(this); 
```

- 附加新片段并分离前一个片段：如果您知道它是哪个片段，只需从附加片段中获取引用，并以与附加新片段相同的方法分离它。

# php - 想通过修改htaccess来隐藏url末尾的page.html

> ID：16055666
> 
> 赞同：0
> 
> 时间：2013-04-17T08:52:51.810
> 
> 标签：php, .htaccess, mod-rewrite

有人可以帮我重定向 htaccess 中的 url。就像下面的链接一样，它最后显示 page.html，我不想出现，是否可以通过更改 htaccess 中的任何内容，也在许多 url 中显示很多，我也想将其更改为/ 或任何其他看起来合适的字符。

```
http://www.domain.com/98-three-wheelers/listings.html
http://www.domain.com/63-we-are-currently-looking-for-customer-care-executive-for-a-call-center-in-ahmedabad/details.html 
```

我正在使用的 htaccess 如下：

```
RewriteRule ^index.html index.php [nc]
RewriteRule ^recent_ads.html recent_ads.php [nc]
RewriteRule ^register.html register.php [nc]
RewriteRule ^pre-register.html pre-register.php [nc]
RewriteRule ^login.html login.php [nc]
RewriteRule ^logout.html logout.php [nc]
RewriteRule ^favorites.html favorites.php [nc]
RewriteRule ^contact.html contact.php [nc]
RewriteRule ^listings.html listings.php [nc]
RewriteRule ^pre-submit.html pre-submit.php [nc]
RewriteRule ^refine.html refine.php [nc]
RewriteRule ^([0-9]+)-([^\/]+)?/content.html$ content.php?id=$1 [nc,qsa]
RewriteRule ^([0-9]+)-([^\/]+)?/index.html$ index.php?category=$1 [nc,qsa]
RewriteRule ^([0-9]+)-([^\/]+)?/details.html$ details.php?id=$1 [nc,qsa]
RewriteRule ^([^\/]+)/([^\/]+)/([^\/]+)/recent_ads.html$ recent_ads.php?page=$1&order=$2&order_way=$3 [nc,qsa]
RewriteRule ^([^\/]+)/recent_ads.html$ recent_ads.php?page=$1 [nc,qsa]
RewriteRule ^([0-9]+)-([^\/]+)?/user_listings.html$ user_listings.php?id=$1 [nc,qsa]
RewriteRule ^([0-9]+)-([^\/]+)?/contact_details.html$ contact_details.php?id=$1 [nc,qsa]
RewriteRule ^([0-9]+)-([^\/]+)?/([^\/]+)/([^\/]+)/([^\/]+)/user_listings.html$ user_listings.php?id=$1&page=$3&order=$4&order_way=$5 [nc,qsa]
RewriteRule ^([0-9]+)-([^\/]+)/([^\/]+)/user_listings.html$ user_listings.php?id=$1&page=$3 [nc,qsa]
RewriteRule ^([^\/]+)/([^\/]+)/([^\/]+)/favorites.html$ favorites.php?page=$1&order=$2&order_way=$3 [nc,qsa]
RewriteRule ^([0-9]+)-([^\/]+)?/store.html$ store.php?id=$1 [nc,qsa]
RewriteRule ^([0-9]+)-([^\/]+)?/([^\/]+)/([^\/]+)/([^\/]+)/store.html$ store.php?id=$1&page=$3&order=$4&order_way=$5 [nc,qsa]
RewriteRule ^([0-9]+)-([^\/]+)/([^\/]+)/store.html$ store.php?id=$1&page=$3 [nc,qsa] 
```

还可以在下面的链接中看到太多 % percenta 在 url 中使用，我可以将其更改为 / 而不改变 url 的动机，是否可以单独在 htaccess 中进行更改以实现这一切？

```
.com/147-apartments-for-rent/no_of_rooms-1%20BHK/area_sq_ft-SQFT%20Less%20than%20500/condition_vehicles-New/listings.html
```

假设这一切都被用来构造url

```
{capture name=some_content assign=constructed_url}{$live_site}/listings.php?page=1{foreach from=$post_array key=k item=x name=construct_url}{if $x!='' && $k!= $v.depending.caption2 && $k!=$v.depending.caption3 && $k!=$v.depending.caption4 && $k!="page" && $k!="show" && (!$settings. enable_locations || (!in_array($k, $location_fields) && $k!="crt_city"))}{$separator}{$k}={$x|replace:'/':'--'|urlencode} {assign var="separator" value="&"}{/if}{/foreach}{/capture}
```

代码中需要更改的内容..请不要介意我是编程新手，刚刚开始学习这些东西....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:07:58.653

你有这些规则

```
RewriteRule ^([0-9]+)-([^\/]+)?/content.html$ content.php?id=$1 [nc,qsa]
RewriteRule ^([0-9]+)-([^\/]+)?/index.html$ index.php?category=$1 [nc,qsa]
RewriteRule ^([0-9]+)-([^\/]+)?/details.html$ details.php?id=$1 [nc,qsa]
RewriteRule ^([0-9]+)-([^\/]+)?/user_listings.html$ user_listings.php?id=$1 [nc,qsa]
RewriteRule ^([0-9]+)-([^\/]+)?/contact_details.html$ contact_details.php?id=$1 [nc,qsa]
RewriteRule ^([0-9]+)-([^\/]+)?/store.html$ store.php?id=$1 [nc,qsa] 
```

当你删除`content.html`, `index.html`, `details.html`, `user_listings.html`,你将`contact_details.html`只有`store.html`

```
RewriteRule ^([0-9]+)-([^\/]+)?/$ ... [nc,qsa] 
```

你如何决定，什么是正确的要求？是，`content.html`还是`index.html`，也许`details.html`。但它也可能是`store.html`。

所以，我不明白如何删除`listing.html`and`details.html`等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:54:59.447

`%20`当您将链接中的空格替换为其他内容时，您可以阻止URL 中的 。您必须查看创建 URL 的源代码（`href=...`、`src=...`或[`urlencode`](http://www.php.net/manual/en/function.urlencode.php)其他一些 URL 创建函数）并使用[`str_replace`](http://www.php.net/manual/en/function.str-replace.php)例如

```
$url = str_replace(' ', '-', $url); 
```

在回显`<a href="$url">`标签之前。

# c# - Graphics.DrawImage：内存不足异常

> ID：16055667
> 
> 赞同：12
> 
> 时间：2013-04-17T08:52:51.943
> 
> 标签：c#, asp.net, system.drawing

即使在对各种网站和论坛进行了大量研究之后，我仍然无法弄清楚为什么我会在这里出现内存不足异常。有没有人能够在这段代码中阐明所有邪恶的根源？调用 Graphics.DrawImage() 方法引发异常，第 79 行。

```
[HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult EditImage(FileModel model)
    {
        var fileData = new MySite.Models.File(model.FileID, model.ClientID, ConfigurationManager.ConnectionStrings["MySite"].ConnectionString).Data;
        Image image = null;

        using (var memStream = new MemoryStream())
        {
            memStream.Write(fileData, 0, fileData.Length);
            image = Image.FromStream(memStream);
        }

        using (var graphics = Graphics.FromImage(image))
        {
            graphics.DrawImage(image, model.x1, model.y1, (model.x2 - model.x1), (model.y2 - model.y1));
            graphics.Save();
        }

        using (var memStream = new MemoryStream())
        {
            image.Save(memStream, System.Drawing.Imaging.ImageFormat.Jpeg);
            return File(memStream.ToArray(), "image/jpeg");
        }
    } 
```

堆栈跟踪：

```
[OutOfMemoryException: Out of memory.]
System.Drawing.Graphics.CheckErrorStatus(Int32 status) +1143476
System.Drawing.Graphics.DrawImage(Image image, Int32 x, Int32 y, Int32 width, Int32 height) +141
ProPilot.Controllers.DocumentsController.EditImage(FileModel model) in C:\DEV\Web\Controllers\DocumentsController.cs:79
lambda_method(Closure , ControllerBase , Object[] ) +104
System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +14
System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +211
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
System.Web.Mvc.Async.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41() +28
System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +10
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +57
System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult) +48
System.Web.Mvc.Async.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33() +57
System.Web.Mvc.Async.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49() +223
System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult) +10
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +57
System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult) +48
System.Web.Mvc.Async.<>c__DisplayClass2a.<BeginInvokeAction>b__20() +24
System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) +102
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +57
System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +43
System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +14
System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +57
System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +47
System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10
System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +25
System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +47
System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9629296
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T09:05:29.440

@Sayse 上面的评论一针见血。

使用 Image.FromStream 时：

> 您必须在图像的生命周期内保持流打开。

来源：http: [//msdn.microsoft.com/en-AU/library/93z9ee4x.aspx](http://msdn.microsoft.com/en-AU/library/93z9ee4x.aspx)

```
using (var memStream = new MemoryStream())
{
    memStream.Write(fileData, 0, fileData.Length);
    using(Image image = Image.FromStream(memStream))
    {
        using (var graphics = Graphics.FromImage(image))
        {
            graphics.DrawImage(image, model.x1, model.y1, (model.x2 - model.x1), (model.y2 - model.y1));
            graphics.Save();
        }

        using (var outStream = new MemoryStream())
        {
            image.Save(outStream, System.Drawing.Imaging.ImageFormat.Jpeg);
            return File(outStream.ToArray(), "image/jpeg");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-01T18:09:04.463

如果你使用`Bitmap`or`Image`类，你会发现几个问题。

如果您使用`Image.FromFile()`框架加载图像，则在加载图像后不会关闭文件句柄。该文件保持打开状态，直到垃圾收集器重新收集图像。这是 GDI+ 中的严重错误设计。图像已读入内存后，无需保持文件打开。

所以我试图通过使用来解决这个问题`Image.FromStream()`。但这不是解决方案，因为当流关闭时`DrawImage()`，对该图像的操作将因“内存不足”而失败。

因此，如果您想从文件中读取例如位图，并且想确保文件句柄已关闭，则必须使用如下丑陋的解决方法：

```
Bitmap ReadBitmapFromFile(String s_Path)
{
    using (FileStream i_Stream = new FileStream(s_Path, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
    {
        using (Bitmap i_Bmp = new Bitmap(i_Stream))
        {
            return new Bitmap(i_Bmp);
        }
    }
} 
```

顺便说一句：`Image.Clone()`产生类似的问题。

代替

```
Bitmap i_Clone = (Bitmap)i_Bmp.Clone() 
```

我不得不使用：

```
Bitmap i_Clone = new Bitmap(i_Bmp); 
```

# php - PDO lastInsertId() 返回 0

> ID：16055671
> 
> 赞同：0
> 
> 时间：2013-04-17T08:53:02.787
> 
> 标签：php, pdo

我一直在寻找其他相同的问题，但无法弄清楚为什么我的查询不会像它应该的那样运行。

我的查询：

```
$stmt = db()->prepare("INSERT INTO conversations (user1, user2) VALUES (?, ?)");
$stmt->execute(array($_SESSION['user']['userId'], $user));
echo db()->lastInsertId(); 
```

当我这样做时，lastInsertId(); 一直返回 0。

我的 db() 函数：

```
function db()
{
    $dsn = 'mysql:host=localhost;dbname=message_board';
    $username = 'root';
    $password = 'root';

    try {
        $db = new PDO($dsn, $username, $password);
    } catch(PDOException $e) {
        // exceptions handles here
    }
    return $db;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T08:55:30.890

```
function db()
{
    static $db;

    $dsn = 'mysql:host=localhost;dbname=message_board';
    $username = 'root';
    $password = 'root';

    if (!$db) {
       $db = new PDO($dsn, $username, $password);
    }
    return $db;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:56:54.333

您正在每行创建一个新的数据库连接。

尝试：

```
$db = db();
$stmt = $db->prepare("INSERT INTO conversations (user1, user2) VALUES (?, ?)");
$stmt->execute(array($_SESSION['user']['userId'], $user));
echo $db->lastInsertId(); 
```

# linux - 如何测试程序无法连接到互联网时的行为？

> ID：16055674
> 
> 赞同：0
> 
> 时间：2013-04-17T08:53:11.737
> 
> 标签：linux, testing, python-2.7, internet-connection

我正在写一个 RSS 阅读器，我想优雅地处理互联网连接不可用的情况。什么是在没有互联网的情况下测试程序行为的好方法（在 linux 上），而无需拉线和/或 RF 杀死一切？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:20:02.917

正如用户在评论中留下的那样，您可以通过模拟您的网络访问库来测试这一点。在库正常访问网络时，您修改行为以获取本地文件。[这篇文章](http://agiletesting.blogspot.com/2006/12/mock-testing-examples-and-resources.html)更详细地描述了该技术，并包含 Python 和 urllib 的代码示例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T13:57:52.823

来自[https://bbs.archlinux.org/viewtopic.php?id=83384](https://bbs.archlinux.org/viewtopic.php?id=83384)：

> ifconfig eth0 向下/向上？（或其他接口而不是 eth0）

我无法对此进行测试，因为我正在工作并且需要互联网来获取当前正在运行的东西，但是希望这至少为您指明了正确的方向。

# java - ftp4j 客户端下载文件时 FTP 服务器死机

> ID：16055681
> 
> 赞同：1
> 
> 时间：2013-04-17T08:53:21.277
> 
> 标签：java, ftp, ftp-client, ftp4j

我使用**sauronsoftware.ftp4j.FTPClient**从 FTP 服务器进行预定的文件下载。我的问题是当客户端从它下载文件时 FTP 服务器突然死掉了。这就是我所做的：

```
 for (FTPFile remoteFile : remoteFiles) {

                String remoteFileName = remoteFile.getName();
                String localPath = ftpDir.getLocalPath() + remoteFileName;
                log.debug("Downloading remote file {} to local path {}", remoteFileName, localPath);
                try {
                    client.download(remoteFileName, new File(localPath));

                    if (!ftpDir.isLeaveFilesOnServer()) {
                        //Delete remote file
                        client.deleteFile(remoteFileName);                            
                    }

                } catch (IllegalStateException e) {

                    log.error("FTPException ",e);

                    fcr.addErrorFile(remoteFileName);

                } catch (IOException e) {

                    log.error("FTPException ",e); 
```

问题是 download(...) 由单独的线程运行，并且当 FTP 服务器死机时，该线程将继续运行，就像永远一样。有没有办法解决这个问题，或者我应该使用另一个可以处理这种情况的 FTP 客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:15:47.940

我不确定您的问题是否是您的 FTP 连接突然中断，或者问题是主线程在文件下载之前完成了执行。如果我们谈论的是第二种情况，那么也许您可以使用同一个 FTPClient 类的其他方法：

```
public void download(java.lang.String remoteFileName,
                 java.io.File localFile,
                 FTPDataTransferListener listener) 
```

然后让主线程等到所有下载完成后再结束

# android - 一个新的请求比在android中通过listview传递参数更好吗？

> ID：16055683
> 
> 赞同：0
> 
> 时间：2013-04-17T08:53:28.123
> 
> 标签：android, json, listview, httprequest

我正在Android中做一个列表视图，它从带有一些信息的json中获取日期，我想知道用一个项目的所有数据创建一个新活动的最快方法。

什么是更有效地传递意图中的项目和id并在新活动中发出新请求或传递意图中新活动的所有数据？

我想发出两个请求比发出一个请求并在意图中传递数据更糟糕，但也许这些信息太大而无法传递到意图中。putextra();

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:02:53.740

如果列表视图中的信息与活动中的信息相同，那么传递该信息应该比发出另一个请求更快。

不过，如果您只在 ListView 中显示一小部分信息（这也会使其更平滑），然后在单击元素时显示完整的项目，那么第一种方法会更好。

**例子：**

我有一个包含我的联系人姓名的列表，当我选择一个时，我会打开一个新活动，请求并显示该联系人的所有数据。

这将比在我的 ListView 中包含所有未使用的信息要快。

# php - 文件不存在错误

> ID：16055688
> 
> 赞同：0
> 
> 时间：2013-04-17T08:53:37.467
> 
> 标签：php, joomla, joomla1.5

你好，

我正在使用 joomla，我已启用 SEF，站点工作正常，但在访问日志中获取文件不存在错误。我没有修改 .htaccess 文件中的任何内容，我只是使用了下面的代码。

代码：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/index.php
RewriteCond %{REQUEST_URI} (/|\.php|\.html|\.htm|\.feed|\.pdf|\.raw|/[^.]*)$  [NC]
RewriteRule (.*) index.php
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L] 
```

# wso2 - WSO2 CEP 代理代理（KPI 分析器）示例不适用于聚合查询

> ID：16055692
> 
> 赞同：1
> 
> 时间：2013-04-17T08:53:43.783
> 
> 标签：wso2, complex-event-processing, broker

我正在研究 Apache WSO2 CEP，我正在尝试做一些符合我要求的场景。

首先，我执行此链接[KPI Analyzer](http://docs.wso2.org/wiki/display/CEP210/KPI+Analyzer)中解释的示例，我成功并正确查看了结果。在那之后，我想从这里稍微改变一下那个样本中的桶

```
from phoneRetailStream[totalPrice>2500 and quantity>3]
insert into highPurchaseStream
buyer, brand, quantity, totalPrice; 
```

对此

```
from phoneRetailStream#window.length(5)
insert into highPurchaseStream
sum(quantity) as quantitySum, sum(totalPrice) as totalpriceSum
group by  brand; 
```

并相应地更改了元组映射。但是这个配置总是给我错误

```
 [java] Wrongly formatted event sent for carbon.super
 [java] org.wso2.carbon.databridge.core.exception.EventConversionException: Error when converting org.wso2.high.purchase.buyers.new:1.6.0 of event bundle with events 4
 [java]     at org.wso2.carbon.databridge.receiver.thrift.converter.ThriftEventConverter.createEventList(ThriftEventConverter.java:126)
 [java]     at org.wso2.carbon.databridge.receiver.thrift.converter.ThriftEventConverter.toEventList(ThriftEventConverter.java:88)
 [java]     at org.wso2.carbon.databridge.core.internal.queue.QueueWorker.run(QueueWorker.java:72)
 [java]     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
 [java]     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
 [java]     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
 [java]     at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
 [java]     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
 [java]     at java.lang.Thread.run(Thread.java:662)
 [java] Caused by: java.lang.NullPointerException
 [java]     at org.wso2.carbon.databridge.receiver.thrift.converter.ThriftEventConverter.toObjectArray(ThriftEventConverter.java:49)
 [java]     at org.wso2.carbon.databridge.receiver.thrift.converter.ThriftEventConverter.createEventList(ThriftEventConverter.java:116)
 [java]     ... 8 more 
```

除了 jmsbroker 之外，我无法在这些示例中使用 siddhi 语言的聚合函数（sum、avg 等）。这种情况可能有什么问题？

@Mohanadarshan

这是我的存储桶 xml 文件的最后一个版本

```
<bucket name="KPIAnalyzer" xmlns="http://wso2.org/carbon/cep">
    <description>
Notifies when a user purchases more then 3 phones for the total price higher than $2500.
    </description>
    <engineProviderConfiguration engineProvider="SiddhiCEPRuntime">
        <property name="siddhi.persistence.snapshot.time.interval.minutes">0</property>
        <property name="siddhi.enable.distributed.processing">false</property>
    </engineProviderConfiguration>
    <input topic="org.wso2.phone.retail.store/1.2.0" brokerName="localAgentBroker">
        <tupleMapping stream="phoneRetailStream" queryEventType="Tuple">
            <property name="brand" inputName="brand" inputDataType="payloadData"
                      type="java.lang.String"/>
            <property name="quantity" inputName="quantity" inputDataType="payloadData"
                      type="java.lang.Integer"/>
            <property name="totalPrice" inputName="total" inputDataType="payloadData"
                      type="java.lang.Integer"/>
            <property name="buyer" inputName="buyer" inputDataType="payloadData"
                      type="java.lang.String"/>
        </tupleMapping>
    </input>
    <query name="KPIQuery">
        <expression>
from phoneRetailStream#window.length(5)
insert into highPurchaseStream
sum(quantity) as quantitySum, sum(totalPrice) as totalpriceSum
group by  brand;
        </expression>
        <output topic="org.wso2.high.purchase.buyers.new/1.6.0" brokerName="externalAgentBroker">
            <tupleMapping>
                <metaData>
                </metaData>
                <correlationData/>
                <payloadData>
                    <property name="quantity" valueOf="quantitySum" type="java.lang.Integer"/>
                    <property name="purchasePrice" valueOf="totalpriceSum" type="java.lang.Integer"/>
                </payloadData>
            </tupleMapping>
        </output>
    </query>
</bucket> 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:29:23.933

我检查了您的 siddhi 查询，它与 siddhi 引擎一起正常工作，并且查询没有任何问题...

我已经检查了 KPI 分析器示例，它对于您的查询也没有任何问题...请确保您是否有正确的输出元组映射配置..

我需要再次提及，“存储桶可编辑 UI”存在一些问题。请验证/repository/deployment/server/cepbuckets/中的bucket xml文件是否正确...（有时删除属性时，它不会正确删除）

**改变**

```
<property name="quantity" valueOf="quantitySum" type="java.lang.Long"/>
<property name="purchasePrice" valueOf="totalpriceSum" type="java.lang.Long"/> 
```

谢谢，

莫汉

# python - 如何使用 uwsgi 部署两个 web.py 应用程序？

> ID：16055693
> 
> 赞同：0
> 
> 时间：2013-04-17T08:53:45.570
> 
> 标签：python, web.py, uwsgi

我将使用 web.py 进行一些工作，我不知道在使用 uwsgi 部署时如何处理两个应用程序。下面是我的工作。

我的目录树，两个最简单的应用程序：

```
├── index
│   └─── index.py   
└── index2
    └─ index2.py 
```

和我原来的uwsgi.ini：

```
[uwsgi]
plugin = python27
http = :8080
master = true
module = index 
```

当只处理一个应用程序时，我可以在'index'目录中cp uwsig.ini，然后运行“uwsgi ./uwsgi.ini”，这样我就可以访问端口8080上的应用程序，但是如果有两个或更多怎么办应用程序，有什么例子吗？

index.py 和 index2.py 几乎相同。

索引.py：

```
# -*- coding: UTF-8 -*-
import web

urls = (
    '/index', 'Index',
)

class Index:
    def GET(self):
        return 'index'

app = web.application(urls, globals())
application = app.wsgifunc() 
```

索引2.py：

```
# -*- coding: UTF-8 -*-
import web

urls = (
    '/index2', 'Index',
)

class Index:
    def GET(self):
        return 'index2'

app = web.application(urls, globals())
application = app.wsgifunc() 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:05:53.687

我建议为此目的使用 webpy 的子应用程序。

看看这里：[http ://webpy.org/cookbook/subapp](http://webpy.org/cookbook/subapp)

您的另一个选择是通过让几个 uwsgi 进程在不同的套接字上侦听并让 nginx 管理请求的去向来配置反向代理 (nginx)。在 nginx conf 中是这样的：

```
location /index {
    uwsgi_pass  unix:/path/to/uwsgi1.sock;
    include uwsgi_params;
}
location /index2 {
    uwsgi_pass  unix:/path/to/uwsgi2.sock;
    include uwsgi_params;
} 
```

# templates - 将 Joomla 2.5 模板转换为 3.0

> ID：16055707
> 
> 赞同：8
> 
> 时间：2013-04-17T08:54:14.817
> 
> 标签：templates, joomla3.0

我有一个自定义 joomla 2.5 模板，我希望将其转换为 Joomla 3.0。目前我发现的唯一方法是如何将 Joomla 1.5 转换为 2.5。请在这里指导我，因为我已经花了将近一个月的时间。我找到了一种方法[http://docs.joomla.org/J3.1:Converting_A_Previous_Joomla!_Version_Template](http://docs.joomla.org/J3.1:Converting_A_Previous_Joomla!_Version_Template)但我不明白如何去做。如果您还可以就如何实施我发布的链接中的步骤给出一个明确的程序，这将对我有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-20T12:59:14.710

这个答案可能不是很详细，但在这里你可以采取一些步骤：

1.  从 Joomla 2.5 模板中识别纯 HTML。暂时将其保存在单独的文件中。
2.  在 Joomla 3.x 中不推荐使用许多函数和常量，例如用于在 Joomla 2.5 中提供“/”的 DS 常量。您需要将其替换为“/”。
3.  获取站点名称、徽标等常用功能需要更改代码。您可以从 Protostar 模板中获取参考。您可以看到他们如何从代码中检索站点名称的值。一开始似乎很难，但是当你逐渐前进时，你就会熟悉 Joomla 3 模板引擎。
4.  一切完成后，您可以继续编辑 XML 文件。您可以从 Protostar 模板复制和粘贴 templateDetails.xml。确保更改文件名、文件夹等重要元素。

压缩整个模板文件夹并将其安装在您的网站上，使其成为默认值。如果您发现任何错误，请继续并在 PHP 中打开[错误报告。](https://stackoverflow.com/questions/845021/how-to-get-useful-error-messages-in-php)解决这些错误并使您的模板在 Joomla 3 上工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:42:46.193

这不是我可以为您提供的绝对指南，但以下是基本步骤：

*   这真的取决于它是基本模板还是基于 RocketTheme 或 YOOtheme 等模板框架

*   检查 Joomla 中的默认模板，它称为 Protostar。仔细看看，了解他在做什么

*   检查清单文件（将其与 Protostar 进行比较）

*   也许不是那么重要，但还要检查[Joomla 3.0 和 Joomla Platform 12.1 中的潜在向后兼容性问题](http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_3.0_and_Joomla_Platform_12.1#CMS)

*   如果您在安装/使用模板时遇到问题，请发布具体问题

# mysql - Ireport：防止明细拆分会影响页面总数

> ID：16055714
> 
> 赞同：3
> 
> 时间：2013-04-17T08:54:40.313
> 
> 标签：mysql, jasper-reports, ireport

当我试图阻止细节拆分时，它会影响页面总数。这就是正在发生的事情：摘要在当前页面完成，额外的行显示在下一页。但我希望在出现转发行的页面上计算总和。

例如：

在第 1 页：我有 V1+V2+V3+V4 的余额，但 V4 出现在第 2 页

通常我应该在第 1 页有 V1+V2+V3 的平衡，在第 2 页有 V4+V5+V6 的平衡。

有人可以帮我吗 ！ ![在此处输入图像描述](https://i.stack.imgur.com/Ncch7.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T11:57:19.610

> 如果我有美好的回忆，这是 ireport 错误计算转发行的情况。每当一行分布在两个连续页面上时，ireport 就会变得混乱。不要使用 split type= prevent 作为 detail band 中的选项，而是将其设置为 split type= Stretch。然后创建一个虚拟组（通过行的主键），启用组页眉和页脚，它将充当每行的容器。虚拟组选项是：重新打印标题=true，新开始的最小高度=细节带高度的值，页脚位置=正常，保持在一起=true。
> 
> 现在，如果将每一行作为组处理并将被转发到下一页，则它不能适合当前行。希望能帮助到你

您在哪个频段添加了“总页数”？我有同样的问题，我尝试了你的解决方案，但是问题仍然存在，总数随着下一页的值而增加。

我的报告：

![在此处输入图像描述](https://i.stack.imgur.com/Nha34.png)

# android - 更改 repo 初始化文件夹

> ID：16055716
> 
> 赞同：0
> 
> 时间：2013-04-17T08:54:46.767
> 
> 标签：android, git, repository

我希望 repo 将源代码同步到“~/home/username/android/device/”文件夹，目前 repo 同步检出到“~/home/username/”文件夹

我曾尝试将 repo 初始化为 /android/device 文件夹两次，然后再次同步，但它不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:45:51.223

您是否尝试使用 git remote set-url？如果没有，您可能会发现这篇文章很有帮助：[https ://help.github.com/articles/changeing-a-remote-s-url](https://help.github.com/articles/changing-a-remote-s-url)

# google-analytics - 谷歌分析：重写对活动的推荐

> ID：16055725
> 
> 赞同：0
> 
> 时间：2013-04-17T08:55:14.950
> 
> 标签：google-analytics

是否可以改写对活动（活动名称）的推荐？我在关联公司修改我网站的链接时遇到了一些问题，因此这被视为推荐流量而不是活动流量。唯一真正重要的是活动名称和推荐位置（在活动报告部分）。

是否可以使用过滤器（搜索和替换或高级）来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:52:08.230

您可以使用几个选项。

1）见这里[https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiCampaignTracking#_gat.GA_Tracker_._setCampSourceKey](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiCampaignTracking#_gat.GA_Tracker_._setCampSourceKey)

2）您可以编写一些代码来将访问您网站的访问者从附属公司重定向到具有 GA 跟踪的 url

3）附属登陆页面链接应保持您发送它们的原始结构。如果他们正在修改它，您应该联系您使用的联盟网络。你甚至可以不付钱给他们，因为他们没有使用你发送的链接。

# ios - 通过 Xcode 自动刷新团队配置文件中的 IOS 设备

> ID：16055728
> 
> 赞同：3
> 
> 时间：2013-04-17T08:55:21.953
> 
> 标签：ios, xcode, provisioning-profile

我每周都有一些 IOS 设备，我必须在开发期间将我的应用程序发送到这些设备以进行测试。这些设备无法连接到我的计算机上，因为它们离我很远，而且在这种情况下，它们不会被带到我的本地计算机上。如果插电可用，我的生活会容易得多。但事实并非如此。

现在我不得不手动做很多烦人的事情：添加它，重新生成它，从本地机器中删除它，添加到新的等等等等。

在 Apple 开发人员门户中将设备添加到我的设备后，我想在 XCode 中使用它而不重新生成证书、删除、下载到我的本地计算机。应该有一些自动刷新过程。

在 XCode 4.5 之前，管理器中有一个选项可以让 Xcode 自动刷新它。

在当前的 XCode 版本中呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T09:02:38.723

在 Xcode 4.5 中，可以使用相同的刷新选项。

步骤 创建在上述过程完成之前要遵循的临时配置文件。检查[这个](http://agilewarrior.wordpress.com/2012/04/02/how-to-distribute-ad-hoc-build-with-xcode-4/)。

刷新配置文件的步骤。1.在开发者门户添加设备。2.通过将设备添加到配置文件来更新开发人员配置文件。3.打开 Xcode> Organizer >Devices 4.删除旧的配置文件

您会在按钮单击刷新处找到一个刷新按钮。清理项目并将其存档。将其发送给用户，它将在新设备上运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-05T01:17:45.047

@TechFanatic 的解决方案对我不起作用。

对我有用的是：

1.  从 XCode 中，选择 XCode > 首选项。
2.  单击“帐户”选项卡。
3.  选择您的帐户。
4.  单击“查看详细信息...”按钮。
5.  单击左下角的刷新按钮。

这来自Apple 文档中的[“Refreshing Provisioning Profiles in Xcode”部分。](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/MaintainingProfiles/MaintainingProfiles.html)

* * *

**编辑：**这在 XCode 7 中不再有效。我在 XCode 7 的任何地方都没有找到“刷新”按钮。如果你找到了，请提供该答案。与此同时，有一种[解决方案](https://stackoverflow.com/a/32812455/2105930)- 您删除并重新创建托管配置文件。

具体来说，如果您正在进行 Ad Hoc 构建：

1.  在[会员中心](https://developer.apple.com/account/ios/profile/profileList.action)，为您的应用删除“iOS Team Provisioning Profile”。**不要**删除“XC Ad Hoc”配置文件。
2.  在 XCode 中，在 XCode > Preferences 菜单中，在“Accounts”选项卡中，在您的帐户的“View Details...”下，通过右键单击并选择“Move to Trash”删除您的应用程序的“iOS Team Provisioning Profile” ”。
3.  在您的目标的“常规”选项卡中，将有一个“修复问题”按钮。点击它。
4.  不要担心会员中心现在说您的 XC Ad Hoc 配置文件现在无效。这将在稍后的步骤中自行修复。
5.  构建您的应用程序。
6.  归档您的应用程序。
7.  从“组织者”中导出您的应用程序。
8.  选择“保存以供临时部署”。
9.  XCode 会抱怨您的配置文件不匹配或类似的。单击“重置”按钮，然后单击“重试”。
10.  XCode 应该继续并创建一个 .ipa 文件。
11.  在会员中心，您的 XC Ad Hoc 配置文件将再次显示为活动状态。

很简单，对吧？

# android - 使用 AmrInputStream 将 PCM 转换为 AMR-WB

> ID：16055731
> 
> 赞同：1
> 
> 时间：2013-04-17T08:55:23.943
> 
> 标签：android, android-audiorecord, amr

我的 Android 应用程序需要将 WAV 中录制的音频转换为 AMR-NB 和 AMR-WB。我完成了使用**AmrInputStream转换为****AMR-NB**的工作。

 **在 AmrInputStream 中， SAMPLES_PER_FRAME 的值被硬编码为**8000 * 20 / 1000** ，即使将 SAMPLES_PER_FRAME 更改为**(16000*20/1000)** ，音频也没有变化。

是否可以使用 AmrInputStream将 PCM 转换为**AMR-WB（16 khz） ？****

# cvs - 如何在 CVS 中获取最后一天提交文件的内容？

> ID：16055739
> 
> 赞同：3
> 
> 时间：2013-04-17T08:55:50.907
> 
> 标签：cvs, cvsnt

我需要的是检查所有最后一天 CVS 提交文件的内容是否在代码中出现某些表达式，并将其报告给它的提交者。

为此，我必须获取文件的内容，但我只能获取具有其他明显属性的已提交文件的列表。我用的命令是

`cvs history -a -c -D <today's date> > cvs_history.txt`

有什么办法，我可以修改命令，所以我可以得到我需要的东西？还是我必须解析历史输出文件并签出所有提到的文件，以便我可以搜索它们？什么是最有效的方法？

注意。我正在用 Ant 脚本编写它（如果这会让事情变得更容易的话）。

谢谢你，雅库布

**编辑：**

我需要每天晚上为公司的所有提交（用户列表不断变化）做这件事。

在对 CVS 命令进行了一些研究之后，我可能不得不获取`history`列表并`rdiff`从列表中获取每个文件（只对添加的代码感兴趣）。并且要调用`rdiff`，我必须知道修订：最后一个修订来自`history`，它是以前的来自`rlog`- 这有点困难，因为我还需要考虑分支修订。所有这些都必须使用正则表达式与 Perl 脚本粘合在一起，最终将其组合到我需要的输出中。

我认为这样做可以，但是大量提交可能需要很长时间。会不会更容易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:24:51.307

如果您有一组有限的用户，您可以为每个用户运行历史命令并组合输出。

```
cvs history -u username .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:45:38.877

所以，为了回答我的问题，当我唯一需要的是最后一天提交的内容时，我确实创建了一个 Perl 脚本来调用

`cvs history -a -c -D $today`

并将输出保存到 commit-log.txt 文件中（可能不需要，但我这样做只是为了节省内存）。然后我只处理 commit-log.txt 文件并从我的域中只选择 efiles。在这些我打电话

`cvs rdiff -r $prevRev -r $revision -u $repoName/$file`

其中 $prevRev 只是 lastDigit($revision) - 1。这只是给我一个差异内容，所以我将它附加到报告中并根据需要进行处理（搜索不需要的表达式......）。

如果我想要文件的全部内容，我会在上面的命令中使用第一个 $firstRevision（可能是 1.1 或 1.0）而不是 $prevRev。

此外，出于兴趣，我们希望在报告中看到分支的名称而不是修订号。因此，我以与上述类似的方式使用“rlog”输出，并提取与提交的修订号相关的分支名称。

感谢大家的兴趣和建议；o)

# flex4 - 这是从 xml 文件中获取用户名和密码的代码，但它不获取数据？

> ID：16055740
> 
> 赞同：0
> 
> 时间：2013-04-17T08:56:03.720
> 
> 标签：flex4, flex3, flash-cs5, flash

这是从 xml 文件中获取用户名和密码的代码，但它不获取数据？

```
private var myXML: XML = new XML();
private function connect(event: Event): void {
  var str1: String = username.text.toString();
  trace(str1);
  var str2: String = password.text.toString();
  trace(str2);
  var str3: String = myXML.authentication.username;
  Alert.show(str3);
  var str4: String = myXML.authentication.password;
  if (str1 == str3 && str2 == str4) {
    Alert.show("sucessfully Connected")
  } else {
    Alert.show("invalid username password");
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:22:59.857

您在哪里为 myXML 分配数据，您的 xml 是什么？

```
var settingFile:File;
var stream:FileStream;
var resultXML:XML;
settingFile = settingFile.resolvePath("setting.xml");
        stream = new FileStream;
        if(settingFile.exists)
        {
            stream.open(settingFile,FileMode.READ);
          resultXML = XML(stream.readUTFBytes(stream.bytesAvailable));
         stream.close();
         var xmlDoc:XMLDocument = new XMLDocument(resultXML.toString());
         var decoder:SimpleXMLDecoder = new SimpleXMLDecoder(true);
         var resultObj:Object = decoder.decodeXML(xmlDoc);
} 
```

从那个 resultObj 你可以访问用户名和密码

如果您使用的是 FlexApplication，则将 xml 文件转换为 xmlDocument 并对其进行解码。然后从解码的对象中您可以获得用户名和密码。

```
 var xmlDoc:XMLDocument = new XMLDocument(myXML.toString());
     var decoder:SimpleXMLDecoder = new SimpleXMLDecoder(true);
     var resultObj:Object = decoder.decodeXML(xmlDoc); 
```

你可以试试这样。

```
private var myXML: XML = new XML();

private function connect(event: Event): void {

var xmlDoc:XMLDocument = new XMLDocument(myXML.toString());
var decoder:SimpleXMLDecoder = new SimpleXMLDecoder(true);
var resultObj:Object = decoder.decodeXML(xmlDoc);

var str1: String = username.text.toString();
trace(str1);
var str2: String = password.text.toString();
trace(str2);
var str3: String = resultObj.authentication.username;
Alert.show(str3);
var str4: String = resultObj.authentication.password;
if (str1 == str3 && str2 == str4) {
  Alert.show("sucessfully Connected")
} else {
  Alert.show("invalid username password");
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:45:10.807

为什么不尝试使用 URL 加载器加载 XML 文件并捕获 COMPLETE 事件以获取数据？

# xml - XML 文件 - 折叠 - Perl

> ID：16055746
> 
> 赞同：0
> 
> 时间：2013-04-17T08:56:27.553
> 
> 标签：xml, perl

我已经创建了一个`XML::Simple`使用`XMLout`. 当我在 IE 中打开文件时，所有 XML 标记都被展开。由于文件很大，很难解释。是否有可能在 Perl 中（在创建 XML 时）然后所有标签都应该折叠而不是展开。如果没有，这可以通过一些批处理脚本来处理，或者我需要为此使用一些 XML 编辑器/查看器，我可以手动选择折叠/展开。 `use XML::Simple;
my $xml = XMLout($hashref, RootName => 'Data');`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:11:02.143

XML 的展开/折叠视图是查看器的属性，而不是 XML 的一部分。Internet Explorer 可以按元素折叠和展开 XML 视图 - 用于切换它的控件很小，但应该在每个元素的开始标记的左侧可见。

其他 XML 编辑器和查看器可能会给您更多控制权，例如默认视图开始折叠到某个级别。

# unit-testing - QUnit-chain 异步测试

> ID：16055750
> 
> 赞同：0
> 
> 时间：2013-04-17T08:56:48.270
> 
> 标签：unit-testing, asynchronous, qunit, method-chaining

我想编写如下工作的测试：

*   启动*异步*测试
*   本次测试完成后，开始下一个*异步*测试
*   对任意数量的测试执行此操作

设置`QUnit.config.reorder`为`false`不会阻止在前一个测试完成之前开始测试。

```
asyncTest('test1',function(){}); // all tests are started back on back
asyncTest('test2',function(){}); // but I would like to start them
asyncTest('test3',function(){}); // one after the other 
```

我知道测试应该是原子的，但在这种情况下会导致一个巨大的测试，它本身可能容易出错，所以我想把它分开。

现在我正在将每个测试“打包”到一个包装函数中，并在一个测试完成后调用这个函数，但这有点尴尬，我想知道为此存在什么样的最佳实践。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T01:44:14.047

> 我找到了重置这些全局变量的解决方案，方法是在每次测试之前重新加载整个脚本，因此我使用了 Qunit.testStart() 方法。所以现在我在每个测试中都有原子测试和新初始化的变量

# ios - 如何在 iphone 中为推送通知生成 pem 文件？

> ID：16055756
> 
> 赞同：13
> 
> 时间：2013-04-17T08:57:01.900
> 
> 标签：ios, push-notification, apple-push-notifications, ssl-certificate

使用此[链接](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ProvisioningDevelopment/ProvisioningDevelopment.html)为推送通知生成 pem 文件，但我无法理解以下步骤...

> **在服务器上安装 SSL 证书和密钥**
> 
> 您应该在运行提供程序代码的服务器计算机上安装您之前获得的 SSL 分发证书和私有加密密钥，并从该服务器计算机与沙盒或 APN 的生产版本连接。为此，请完成以下步骤：
> 
> 1.  打开钥匙串访问实用程序，然后单击左侧窗格中的我的证书类别。
>     
>     
> 2.  找到您要安装的证书并公开其内容。您将看到证书和私钥。
>     
>     
> 3.  选择证书和密钥，选择文件 > 导出项目，然后将它们导出为个人信息交换 (.p12) 文件。
>     
>     
> 4.  以 Ruby 和 Perl 等语言实现的服务器通常能够更好地处理个人信息交换格式的证书。要将证书转换为此格式，请完成以下步骤：
>     
>     
>     *   在 KeyChain Access 中，选择证书并选择 File > Export Items。选择个人信息交换 (.p12) 选项，选择保存位置，然后单击保存。
>         
>         
>     *   启动终端应用程序并在提示后输入以下命令：openssl pkcs12 -in CertificateName.p12 -out CertificateName.pem -nodes。
>         
>         
> 5.  将 .pem 证书复制到新计算机并安装在适当的位置。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-04-27T04:00:34.227

最后我喜欢生成推送通知证书

生成推送通知证书的完整步骤.....

1）打开钥匙链并请求证书如下图所示。

![在此处输入图像描述](https://i.stack.imgur.com/4fxhR.png)

2）将通用名称更改为您的项目名称。

![在此处输入图像描述](https://i.stack.imgur.com/EW6CK.png)

3）在钥匙串开放密钥中，您可以显示两个密钥公钥和私钥

![在此处输入图像描述](https://i.stack.imgur.com/YSfkg.png)

4）写点击私钥并导出。

![在此处输入图像描述](https://i.stack.imgur.com/qtsho.png)

5) 命名 project_name_key.p12

6) 添加密码 ex-1234

7) 输入系统登录密码并保存。现在你有以下证书。

![在此处输入图像描述](https://i.stack.imgur.com/g10Ca.png)

8）现在转到开发者帐户（[https://developer.apple.com/devcenter/ios/index.action](https://developer.apple.com/devcenter/ios/index.action)）和转到标识符创建新的，如果不退出。和编辑设置。

![在此处输入图像描述](https://i.stack.imgur.com/Awst3.png) ![在此处输入图像描述](https://i.stack.imgur.com/ljUbH.png)

如果推送通知禁用，则从编辑中启用它。

![在此处输入图像描述](https://i.stack.imgur.com/mOMxD.png)

9) 对于开发，您可以创建第一个，而分发您可以选择最后一个。

![在此处输入图像描述](https://i.stack.imgur.com/IvFHd.png) ![在此处输入图像描述](https://i.stack.imgur.com/H0vGK.png)

10）选择并生成下载apns证书并放入桌面并双击它。

11）然后打开钥匙链并转到证书。你可以显示你的推送服务打开然后你显示私钥。

用1234密码导出。

![在此处输入图像描述](https://i.stack.imgur.com/Dw3uK.png)

12）现在你有以下文件。

![在此处输入图像描述](https://i.stack.imgur.com/w0Xm3.png)

13）打开终端并转到桌面。

![在此处输入图像描述](https://i.stack.imgur.com/z6bWu.png)

14) 使用以下行为 push_cert.p12 文件生成 .pem 文件

```
openssl pkcs12 -clcerts -nokeys -out apns-dev-cert.pem -in push_cert.p12 
```

然后输入密码：-1234

![在此处输入图像描述](https://i.stack.imgur.com/ndFga.png)

15) 使用以下行为 project_name_key.p12 文件生成 .pem 文件

```
openssl pkcs12 -nocerts -out apns-dev-key.pem -in project_name_key.p12 
```

然后输入密码：-1234 输入 PEM 密码：1234 验证 - 输入 PEM 密码：1234

![在此处输入图像描述](https://i.stack.imgur.com/uupiZ.png)

16）在终端输入以下3行

```
openssl rsa -in apns-dev-key.pem -out apns-dev-key-noenc.pem 
```

输入 apns-dev-key.pem:1234 的密码短语

```
cat apns-dev-cert.pem apns-dev-key-noenc.pem > apns-dev.pem 
```

![在此处输入图像描述](https://i.stack.imgur.com/vsnGA.png)

17）您有以下证书。

![在此处输入图像描述](https://i.stack.imgur.com/45PlL.png)

18) apns-dev.pem 文件发送到服务器，通过是 1234

19) 对于开发，您必须使用 gateway.sandbox.push.apple.com 服务器。和分发你可以使用 gateway.push.apple.com 服务器。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-01-06T13:14:03.400

为了 **

*   **生产推送通知**

**

我参考了[这个链接](https://stackoverflow.com/a/21253261/4720315)

要为您的 iOS 应用程序启用推送通知，您需要创建 Apple 推送通知证书（.pem 文件）并将其上传给我们，以便我们能够代表您连接到 Apple 推送服务器。

（带有更新屏幕截图的更新版本在这里[http://www.apptuitions.com/generate-pem-file-for-push-notification/](http://www.apptuitions.com/generate-pem-file-for-push-notification/)）

**第一步：**登录iOS Provisioning Portal，点击左侧导航栏的“证书”。然后，单击“+”按钮。

[![在此处输入图像描述](https://i.stack.imgur.com/f1pCF.png)](https://i.stack.imgur.com/f1pCF.png)

[![在此处输入图像描述](https://i.stack.imgur.com/2OjRp.png)](https://i.stack.imgur.com/2OjRp.png)

[![在此处输入图像描述](https://i.stack.imgur.com/GH8D8.png)](https://i.stack.imgur.com/GH8D8.png)

**第 2 步：**选择分发部分下的 Apple Push Notification service SSL (Production) 选项，然后单击“继续”按钮。 [![在此处输入图像描述](https://i.stack.imgur.com/KHVSW.png)](https://i.stack.imgur.com/KHVSW.png)

**第 3 步：**选择您要用于 BYO 应用程序的应用程序 ID（如何创建应用程序 ID），然后单击“继续”进入下一步。

[![在此处输入图像描述](https://i.stack.imgur.com/usEWY.png)](https://i.stack.imgur.com/usEWY.png)

**第 4 步：**按照“关于创建证书签名请求 (CSR)”的步骤创建证书签名请求。 [![在此处输入图像描述](https://i.stack.imgur.com/4eD6H.png)](https://i.stack.imgur.com/4eD6H.png)

补充 Apple 提供的说明。以下是一些额外的屏幕截图，可帮助您完成所需的步骤：

**第 4 步补充屏幕截图 1**：导航到 Mac 上钥匙串访问的证书助手。

[![在此处输入图像描述](https://i.stack.imgur.com/UuVkG.png)](https://i.stack.imgur.com/UuVkG.png)

**步骤 4 补充截图 2：**填写证书信息。单击继续。

[![在此处输入图像描述](https://i.stack.imgur.com/qraiX.png)](https://i.stack.imgur.com/qraiX.png)

**第五步：**上传第四步生成的“.certSigningRequest”文件，然后点击“生成”按钮。 [![在此处输入图像描述](https://i.stack.imgur.com/7LjQz.png)](https://i.stack.imgur.com/7LjQz.png)

**Step 6:**点击“Done”完成注册，iOS Provisioning Portal 页面将刷新，如下图所示： [![在此处输入图像描述](https://i.stack.imgur.com/UinIU.png)](https://i.stack.imgur.com/UinIU.png)

然后单击“下载”按钮下载您刚刚创建的证书（.cer 文件）。- 双击下载的文件将证书安装到 Mac 上的 Keychain Access 中。

**第 7 步：**在您的 Mac 上，转到“钥匙串”，查找您刚刚安装的证书。如果不确定哪个证书是正确的，它应该以“Apple Production IOS Push Services:”开头，后跟您的应用程序的捆绑 ID。 [![在此处输入图像描述](https://i.stack.imgur.com/ZYTHX.png)](https://i.stack.imgur.com/ZYTHX.png)

**第 8 步：**展开证书，您应该会看到带有您的姓名或公司名称的私钥。使用键盘上的“选择”键选择这两个项目，右键单击（如果使用单键鼠标，则单击 cmd），选择“导出 2 个项目”，如下所示： [![在此处输入图像描述](https://i.stack.imgur.com/9xHuW.png)](https://i.stack.imgur.com/9xHuW.png)

然后将名为“pushcert.p12”的 p12 文件保存到您的桌面 - 现在将提示您输入密码以保护它，您可以单击 Enter 跳过密码或输入您想要的密码。

**第 9 步：**现在最困难的部分 - 在 Mac 上打开“终端”，然后运行以下命令：

```
cd
cd Desktop
openssl pkcs12 -in pushcert.p12 -out pushcert.pem -nodes -clcerts 
```

**第 10 步：**通过使用[此链接（单击此处）](http://apns-gcm.bryantan.info/)

您可以检查 .PEM 文件是否有效 ---> 如果有效，您将收到成功消息，通知如下： [![在此处输入图像描述](https://i.stack.imgur.com/yEhCQ.png)](https://i.stack.imgur.com/yEhCQ.png)

为了 **

*   **开发推送通知**

**

只需观看以下 Youtube 链接[单击此处](https://www.youtube.com/watch?v=3HGPnuiLHM0)并享受..

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-18T17:52:21.170

这是您在第 3 步中必须选择的内容的屏幕截图。这不是两个证书。这是证书+密钥。

![在此处输入图像描述](https://i.stack.imgur.com/Qp4qs.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-11-29T11:49:20.940

我会建议一个更简单的解决方案。只需使用[Certifire](http://certifire.io)。
[Certifire](http://certifire.io)是一个 macOS 应用程序，只需单击几秒钟即可生成 Apple 推送通知证书。

以下是步骤：
1\. 下载应用程序。
2\. 使用您的 Apple Developer Account 凭据登录。
3\. 选择 App-ID
4\. 点击“生成”按钮
5\. 大功告成！

您将获得 .pem 格式和 .p12 格式的 APN 证书。更重要的是，您还将获得 .pem 和 .p12 的组合（密钥+证书）！
更重要的是，您还将获得所有这些证书的无密码版本！

[![在此处输入图像描述](https://i.stack.imgur.com/wCvPH.png)](https://i.stack.imgur.com/wCvPH.png)

[![在此处输入图像描述](https://i.stack.imgur.com/SCqlt.png)](https://i.stack.imgur.com/SCqlt.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-04T10:17:04.243

只是为了添加@Nitin 描述得很好的答案。`openssl s_client -connect gateway.sandbox.push.apple.com:2195 -cert MyKey.pem -key MyKey.pem` 创建 pem 后，您可以使用其中 MyKey 是您的 pem 文件的名称来验证它 。

将 gateway.sandbox.push.apple.com 替换为 gateway.push.apple.com，以连接到实时 APNS。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-06T11:02:02.840

1.  右键单击您的 APNs 证书，然后单击导出。这将在桌面上生成 .p12 证书
2.  打开终端 cd 桌面并使用以下命令将 .p12 转换为 .pem

    openssl pkcs12 -in Certificates.p12 -out Certificates.pem -nodes -clcerts

    [![如图所示](https://i.stack.imgur.com/3YHCO.png)](https://i.stack.imgur.com/3YHCO.png)

# perl - 求三个浮点数中的最小值

> ID：16055759
> 
> 赞同：0
> 
> 时间：2013-04-17T08:57:11.827
> 
> 标签：perl

我没有意识到这个看起来很简单的问题会如此难以破解。

无论如何，我有一个包含 3 个浮点数的数组。我需要找出所有三个中最小的（在这种情况下是三个中最小的，我的实际代码将包含超过 3 个浮点数）

这是我的代码：

```
#!/usr/bin/perl -w
use strict;
use List::Util qw /min/;
my @array = ("2.7.4", "2.7.0", "2.7.0");
print min(@array); 
```

输出：

```
Argument "2.7.4" isn't numeric in subroutine entry at min.pl line 6.
Argument "2.7.0" isn't numeric in subroutine entry at min.pl line 6.
Argument "2.7.0" isn't numeric in subroutine entry at min.pl line 6.
2.7.4 
```

所以它抛出了很多错误以及输出数是错误的。

我拍摄的另一张照片是对数组 ( `sort {$a <=> $b} @array`) 进行排序，然后找到最小的一个，但它再次未能完成这项工作。

我可以逐个进行比较，但如果数组中的元素数量超过三个，代码看起来会很糟糕。

你能帮忙吗。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T09:12:49.283

这些不是浮点数，因为它们有不止一个小数分隔符！它们看起来像版本号。你想要[Sort::Naturally](http://p3rl.org/Sort%3a%3aNaturally)或[version](http://p3rl.org/version)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T20:58:44.707

你可以使用[版本](https://metacpan.org/module/version "perldoc 版本")。

```
#!/usr/bin/perl
use strict;
use warnings;
use version 0.77 (); # disable importing qv

use List::Util qw'min';
my @array = map{
  version->parse($_)
} qw' 2.7.4  2.7.0  2.7.0 ';

print min(@array), "\n"; 
```

* * *

或者您可以将其转换为[vstring](http://perldoc.perl.org/perldata.html#Version-Strings "perldoc perldata")，并使用字符串比较（不推荐）。

要么手动

```
#!/usr/bin/perl
use strict;
use warnings;

sub to_vstring{
  # join '', map chr, split /[.]/, shift
  pack 'U*', split /[.]/, shift;
}

sub from_vstring{
  # join '.', map ord, split //, shift
  join '.', unpack 'U*', shift;
}

use List::Util qw'minstr'; # not min
my @array = map{
  to_vstring($_)
} qw' 2.7.4  2.7.0  2.7.0 ';

print from_vstring( minstr(@array) ), "\n"; 
```

或使用字符串[eval](http://perldoc.perl.org/functions/eval.html "perldoc -f 评估")

```
sub to_vstring{
  my $c = shift;
  die "invalid vstring '$c'" unless $c =~ /^v?[0-9]+(?:[.][0-9]+)*$/;
  $c = 'v'.$c unless substr($c,0,1) eq 'v';
  eval $c;
}

sub from_vstring{
  my $c = shift;
  die "not a vstring '$c'" unless ref(\$c) eq 'VSTRING';
  # join '.', map ord, split //, shift
  join '.', unpack 'U*', shift;
} 
```

如果您打算走这条路线，您可能需要随身携带原始字符串。

```
my @array = map{
  [ to_vstring($_), $_ ]
} qw' 2.7.4  2.7.0  2.7.0 ';

my $min_pair = sort {$a->[0] cmp $b->{0]} @array;

my $min = $min_pair->[1];

print $min, "\n" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T09:17:37.007

您收到的消息不是错误，而是警告。你得到这些是因为你用`-w`开关启用了它们，我建议你用 替换它`use warnings;`，因为当你用`-w`.

无法对列表进行排序的原因`min`是那些不是浮点数，而是字符串。在数字上下文中比较字符串时，perl 提取它认为是数字的内容。`"2.7.4"`在is`2.7`和 for的情况下`"2.7.0"`也是`2.7`。

如果您的格式没有改变，字符串比较（如其他答案所建议的）可能会起作用。但是字符串比较看起来`"12"`比，`"9"`因为它从左到右比较字符串的字符，并通过第一对不同的字符来决定哪个字符串更大或更小。

如果您要比较的那些数字类似于版本号，则该数字`"2.10.1"`可能会出现，并且通过字符串比较将被视为小于`"2.7.0"`. 一种解决方法是`split`将字符串分成三个单独的数字并分别比较它们（如何做到这一点留给读者作为练习）。

# javascript - node-dirty 不会在运行之间持续存在

> ID：16055760
> 
> 赞同：0
> 
> 时间：2013-04-17T08:57:12.140
> 
> 标签：javascript, node.js, node-dirty

我有以下模块：

```
// vote.js
var db = require(./dirty-wrapper);

module.exports = function vote() {

  var obj = {};

  // increase the score
  obj.inc = function(key) {
    var pval = db.get(key);
    if (!pval) pval = 0;
    db.set(key, pval + 1);
  };

  // decrease the score
  obj.dec = function(key) {
    var pval = db.get(key);
    if (!pval) pval = 0;
    db.set(key, pval - 1);
  };

  // reset the score to 0
  obj.reset = function(key) {
    db.set(key, 0);
  };

  obj.get = function(key) {
    return db.get(key);
  };
  return obj;
}; 
```

它使用这个简单的包装器来处理脏：

```
// dirty-wrapper.js
var dirty = require('dirty');
var db = dirty('vote.db');

module.exports = db.on('load', function() {

  var obj = {};

  obj.set = function(key, val, callback) {
    db.set(key, val);
    return callback();
  };

  obj.get = function(key, callback) {
    return callback(db.get(key));

  };

  obj.reset = function(callback) {
    db.forEach(function(key, val) {
     val = 0;
   });
    return callback();
  };
  return obj;
}); 
```

这是我的简单客户：

```
// client.js
var vote = require('./vote.js')();

vote.inc('michael');
vote.inc('michael');
vote.inc('michael');
vote.inc('michael');

console.log('michael: ' + vote.get('michael')); // output = michael: 4 
```

问题是当运行停止并且我再次启动客户端时，输出又是`michael: 4`

第二次运行后，`vote.db`包含以下内容：

```
$ cat vote.db
{"key":"michael","val":1}
{"key":"michael","val":4}
{"key":"michael","val":4}
{"key":"michael","val":4}
{"key":"michael","val":1}
{"key":"michael","val":4}
{"key":"michael","val":4}
{"key":"michael","val":4} 
```

`append-only`首先，如果有人能解释该策略，那就太好了。其次，我想了解为什么 node-dirty 不会持续存在，即使它每次运行都会写入磁盘。

谢谢 ;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:32:18.957

您在加载数据库之前就在使用它，并且基本上每次都从 0 开始。 `module.exports`立即运行，但`load`事件必须等待磁盘 io。
在从数据库中获取值之前，您必须等待文件被加载和解析。

从[自述文件](https://github.com/felixge/node-dirty#dirty-event-load-length)：

> 脏事件：'load'（长度）
> 
> 数据库文件完成加载后发出。在此事件触发之前访问记录是不安全的。不过写记录应该没问题。

您可以删除该`dirty-wrapper`文件，并仅用`vote`作包装器。对你使用它的方式做一个小的改变，记住你必须等待加载事件。

您的投票界面：

```
// vote.js
var events = require('events');
var dirty = require('dirty');
var db = dirty('vote.db');

var obj = new events.EventEmitter();

// increase the score
obj.inc = function(key) {
  var pval = db.get(key);
  if (!pval) pval = 0;
  db.set(key, pval + 1);
};

// decrease the score
obj.dec = function(key) {
  var pval = db.get(key);
  if (!pval) pval = 0;
  db.set(key, pval - 1);
};

// reset the score to 0
obj.reset = function(key) {
  db.set(key, 0);
};

obj.get = function(key) {
  return db.get(key);
};

db.on('load', function() {
  obj.emit('load');
});

module.exports = obj; 
```

你的主要脚本：

```
// client.js
var vote = require('./vote.js');

vote.on('load', function() {

  vote.inc('michael');
  vote.inc('michael');
  vote.inc('michael');
  vote.inc('michael');

  console.log('michael: ' + vote.get('michael')); // output = michael: 4  

}); 
```

这将在每次运行时多输出 4 票。

# wpf - 当应用程序不在焦点时，WPF Listview 不滚动（使用鼠标滚轮）

> ID：16055764
> 
> 赞同：0
> 
> 时间：2013-04-17T08:57:15.993
> 
> 标签：wpf, listview, focus, mousewheel, low-level

我有一个 WPF 应用程序（用 C# 编写），它有一个 Listview 控件，当应用程序处于焦点时，它可以用鼠标滚轮完美滚动。但是，当应用程序不在焦点上时，即使鼠标指针位于应用程序和列表视图区域上，Listview 也不会滚动。我继续在应用程序上看到与鼠标悬停相关的效果，但没有收到鼠标滚轮事件。这与大多数其他应用程序在我的桌面上的工作方式是一致的，但是其中一些（如 Facebook Messenger）支持无焦点滚动，我想在我的 WPF 应用程序中模仿。

我搜索了 MSDN 论坛和 Stackoverflow 并看到了 Windows 窗体的多种解决方案，但是它们是 5 年前提出的问题，我想知道是否有人在 .net 4.5 上相对容易地做到了，并且可以指出可能的解决方案。

- -编辑 - -

[由于这个线程C# ListView mouse wheel scroll without focus](https://stackoverflow.com/questions/87134/c-sharp-listview-mouse-wheel-scroll-without-focus?rq=1)，我能够在某种程度上取得进展

这是接收鼠标滚轮的函数的外观

```
private static IntPtr HookCallback(
int nCode, IntPtr wParam, IntPtr lParam)
{
if (nCode >= 0 &&
MouseMessages.WM_MOUSEWHEEL == (MouseMessages)wParam)
        {
            MSLLHOOKSTRUCT hookStruct = (MSLLHOOKSTRUCT)Marshal.PtrToStructure(lParam, typeof(MSLLHOOKSTRUCT));
            Console.WriteLine(hookStruct.pt.x + ", " + hookStruct.pt.y);
            Console.WriteLine((short)((hookStruct.mouseData)>>16));                
            MouseWheelEventArgs myArgs = new MouseWheelEventArgs(System.Windows.Input.Mouse.PrimaryDevice, (int)hookStruct.time, (short)((hookStruct.mouseData)>>16));
            myMainFrame.SidePanelControl.ScrollTheListView(myArgs);
            }
        return CallNextHookEx(_hookID, nCode, wParam, lParam);
    } 
```

如您所见，我正在初始化一个 MouseWheelEventArgs 实例并具有时间、增量和鼠标设备属性。

如何将此鼠标滚轮事件传递给我的列表视图滚动查看器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:20:23.873

设法得到这个工作。这是我的课。使用该类所需要做的就是

1.  初始化 InterceptMouse，将其传递给 app/listview/etc 指针
2.  当应用不在焦点上但发生了相应的 mouseenter 事件时开始拦截鼠标。
3.  只要事件是mousewheel，listview 的scrollviewer 就会被发送mouseWheel 事件。
4.  当应用程序被激活或 mouseleave 被调用时停止拦截鼠标。

* * *

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;
using System.Windows.Interop;
using System.Windows.Forms;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;
using System.Windows.Input;
using System.Diagnostics;
using System.Windows.Forms.Integration;
namespace myApp.HelperClasses
{
    public class InterceptMouse
    {
        public static System.Windows.Controls.ListView myListview;
        private static LowLevelMouseProc _proc = HookCallback;
        private static IntPtr _hookID = IntPtr.Zero;

        public InterceptMouse(System.Windows.Controls.ListView myListviewParam)
        {
            myListview = myListviewParam;
        }

        public static void StartIntercepting()
        {
            _hookID = SetHook(_proc);
        }
        public static void StopIntercepting()
        {
            UnhookWindowsHookEx(_hookID);
        }

        private static IntPtr SetHook(LowLevelMouseProc proc)
        {
            using (Process curProcess = Process.GetCurrentProcess())
            using (ProcessModule curModule = curProcess.MainModule)
            {
                return SetWindowsHookEx(WH_MOUSE_LL, proc,
                    GetModuleHandle(curModule.ModuleName), 0);
            }
        }

        private delegate IntPtr LowLevelMouseProc(int nCode, IntPtr wParam, IntPtr lParam);

        private static IntPtr HookCallback(
            int nCode, IntPtr wParam, IntPtr lParam)
        {
            if (nCode >= 0 &&
                MouseMessages.WM_MOUSEWHEEL == (MouseMessages)wParam)
            {
                MSLLHOOKSTRUCT hookStruct = (MSLLHOOKSTRUCT)Marshal.PtrToStructure(lParam, typeof(MSLLHOOKSTRUCT));
                //Console.WriteLine(hookStruct.pt.x + ", " + hookStruct.pt.y + "," + hookStruct.mouseData);

                var delta = (short)((hookStruct.mouseData) >> 16);
                var mouse = InputManager.Current.PrimaryMouseDevice;
                var args = new MouseWheelEventArgs(mouse, Environment.TickCount, delta);
                args.RoutedEvent = WindowsFormsHost.MouseWheelEvent;

                Decorator border = VisualTreeHelper.GetChild(myListview, 0) as Decorator;
                // Get scrollviewer
                ScrollViewer scrollViewer = border.Child as ScrollViewer;
                scrollViewer.RaiseEvent(args);
            }
            return CallNextHookEx(_hookID, nCode, wParam, lParam);
        }

        private const int WH_MOUSE_LL = 14;

        private enum MouseMessages
        {
            WM_LBUTTONDOWN = 0x0201,
            WM_LBUTTONUP = 0x0202,
            WM_MOUSEMOVE = 0x0200,
            WM_MOUSEWHEEL = 0x020A,
            WM_RBUTTONDOWN = 0x0204,
            WM_RBUTTONUP = 0x0205
        }

        [StructLayout(LayoutKind.Sequential)]
        private struct POINT
        {
            public int x;
            public int y;
        }

        [StructLayout(LayoutKind.Sequential)]
        private struct MSLLHOOKSTRUCT
        {
            public POINT pt;
            public uint mouseData;
            public uint flags;
            public uint time;
            public IntPtr dwExtraInfo;
        }

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr SetWindowsHookEx(int idHook,
            LowLevelMouseProc lpfn, IntPtr hMod, uint dwThreadId);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool UnhookWindowsHookEx(IntPtr hhk);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr CallNextHookEx(IntPtr hhk, int nCode,
            IntPtr wParam, IntPtr lParam);

        [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr GetModuleHandle(string lpModuleName);
    }
} 
```

# iphone - iPhone Map - MKPolyLine 中的实际最大点数

> ID：16055769
> 
> 赞同：2
> 
> 时间：2013-04-17T08:57:25.083
> 
> 标签：iphone, mapkit, mkpolyline

我正在使用 MKPolyLine 在地图上显示路线 - 这很好用。我不确定，也找不到与 SO 相关的任何内容，当我有大量积分时，最好的方法是什么？例如，如果我有 60000 个点，如果整个路线都在屏幕上，那么每 100 个点中只取 1 个点，并在每次用户平移/缩放地图时重新计算是个好主意吗？还是 Map Kit 会根据当前的缩放级别和可见的路线自动优化？我听说过“最小二乘”优化，我目前也在研究。

目前对我来说困难在于我的测试设备非常新，内存很大，所以我无法在功能较弱的设备上进行测试。模拟器似乎能够应付任何数量的点。

# java - Java 字符串拆分给出了意想不到的结果

> ID：16055770
> 
> 赞同：2
> 
> 时间：2013-04-17T08:57:25.343
> 
> 标签：java, string, split

我有这个字符串

```
String x = "2013-04-17T08:00:00.001,41.14806,-9.58972,-13.0,0.0,0.0,-20.0,4|2013-04-17T08:00:00.001,41.14806,-9.58972,-22.0,0.0,0.0,-20.0,4|2013-04-17T08:00:00.001,41.14806,-9.58972,-31.0,0.0,0.0,-20.0,4|2013-04-17T08:00:00.001,41.14806,-9.58972,-40.0,0.0,0.0,-20.0,4|2013-04-17T08:00:00.001,41.14806,-9.58972,-49.0,0.0,0.0,-20.0,4|2013-04-17T08:00:00.001,41.14806,-9.58972,-58.0,0.0,0.0,-20.0,4|2013-04-17T08:00:00.001,41.14806,-9.58972,-64.0,0.0,0.0,-20.0,4"; 
```

如果我像这样进行拆分`String vec2 [] = x.split(",");`，输出将是这样

```
2013-04-17T08:00:00.001
41.14806
-9.58972
-13.0
0.0
0.0
-20.0 
```

等等。

如果我像这样进行拆分`String vec2[] = x.split("|");`，则输出是这样的：

```
2
0
1
3
-
0
4
-
1
7
T
0
8
:
0
0
: 
```

等等。

我希望有类似的东西：

```
 2013-04-17T08:00:00.001,41.14806,-9.58972,-13.0,0.0,0.0,-20.0,4
    2013-04-17T08:00:00.001,41.14806,-9.58972,-22.0,0.0,0.0,-20.0,4
    and so on 
```

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T08:59:24.143

你需要逃避`|`：

```
String vec2[] = x.split("\\|"); 
```

那是因为[split()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)的参数是一个**正则表达式**而不是一个字符串。

在正则表达式中，某些字符具有特殊含义。竖线`|`表示交替。所以如果你想根据 进行拆分`|`，你需要写`\\|`which like tell：“*不要* `|` *作为特殊字符，将其作为符号* `|`”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:59:55.083

split 的参数是正则表达式和“|” 字符具有特殊含义。尝试逃避它`\\|`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T09:00:36.587

`String.split(String)`在正则表达式上拆分，而不是在字符上。正如您在[Java 正则表达式构造的摘要中](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#sum)看到的那样，`|`函数作为`or`构造。

如果要拆分`|`字符，可能需要使用`\|`. 请注意，要在 Java 中转义它`String`，您还需要转义反斜杠：`\\|`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T09:00:50.200

问题是它[`split(String regex)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)需要一个*正则表达式*作为参数。管道 ( `|`) 是正则表达式中的特殊字符，因此必须转义：

```
 String x = "2013-04-17T08:00:00.001,41.14806,-9.58972,-13.0,0.0,0.0,-20.0,4|2013-04-17T08:00:00.001,41.14806,-9.58972,-22.0,0.0,0.0,-20.0,4|2013-04-17T08:00:00.001,41.14806,-9.58972,-31.0,0.0,0.0,-20.0,4|2013-04-17T08:00:00.001,41.14806,-9.58972,-40.0,0.0,0.0,-20.0,4|2013-04-17T08:00:00.001,41.14806,-9.58972,-49.0,0.0,0.0,-20.0,4|2013-04-17T08:00:00.001,41.14806,-9.58972,-58.0,0.0,0.0,-20.0,4|2013-04-17T08:00:00.001,41.14806,-9.58972,-64.0,0.0,0.0,-20.0,4";
        String[] arr = x.split("\\|");
        for(String str : arr)
        {
            System.out.println(str);
        } 
```

产量：

```
2013-04-17T08:00:00.001,41.14806,-9.58972,-13.0,0.0,0.0,-20.0,4
2013-04-17T08:00:00.001,41.14806,-9.58972,-22.0,0.0,0.0,-20.0,4
2013-04-17T08:00:00.001,41.14806,-9.58972,-31.0,0.0,0.0,-20.0,4
2013-04-17T08:00:00.001,41.14806,-9.58972,-40.0,0.0,0.0,-20.0,4
2013-04-17T08:00:00.001,41.14806,-9.58972,-49.0,0.0,0.0,-20.0,4
2013-04-17T08:00:00.001,41.14806,-9.58972,-58.0,0.0,0.0,-20.0,4
2013-04-17T08:00:00.001,41.14806,-9.58972,-64.0,0.0,0.0,-20.0,4 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T09:00:58.080

试试这个

```
 String vec2[] = x.split("\\|"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-17T09:01:00.853

您需要转义`|`字符，因为它是正则表达式或模式。

```
String x = "2013-04-17T08:00:00.001,41.14806,-9.58972,-13.0,0.0,0.0,-20.0,4|2013-04-17T08:00:00.001,41.14806,-9.58972,-22.0,0.0,0.0,-20.0,4|2013-04-17T08:00:00.001,41.14806,-9.58972,-31.0,0.0,0.0,-20.0,4|2013-04-17T08:00:00.001,41.14806,-9.58972,-40.0,0.0,0.0,-20.0,4|2013-04-17T08:00:00.001,41.14806,-9.58972,-49.0,0.0,0.0,-20.0,4|2013-04-17T08:00:00.001,41.14806,-9.58972,-58.0,0.0,0.0,-20.0,4|2013-04-17T08:00:00.001,41.14806,-9.58972,-64.0,0.0,0.0,-20.0,4";
String[] arr = x.split("\\|");
for(String s: arr){
    System.out.println(s);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-17T09:01:06.777

您是否尝试过这样逃避角色

```
x.split("\\|"); 
```

# android - android：使用上下文菜单时出现 ClassCastException？

> ID：16055772
> 
> 赞同：0
> 
> 时间：2013-04-17T08:57:36.420
> 
> 标签：android, android-actionbar

在我的应用程序类 ProjectFragActivtiy 遇到异常，如

```
java.lang.ClassCastException: com.actionbarsherlock.internal.view.menu.MenuBuilder 
at com.oj.bs.ProjectFragActivity.onCreateOptionsMenu
(ProjectFragActivity.java:49). 
```

在应用程序菜单按钮用于注销操作但遇到异常。是否有另一种方法来实现 actionbarsherlock 中的菜单。有人对此有解决方案吗？提前致谢。

以下是 ProjectFragActivtiy 类

```
 package com.oj.bs;

import android.os.Bundle;
import android.view.View;
import android.widget.Toast;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.view.Menu;

public class ProjectFragActivity extends SherlockFragmentActivity {

    SessionManager sessionMngr ;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        sessionMngr = new SessionManager(getApplicationContext());

        Toast.makeText(getApplicationContext(), "User Login Status: " + sessionMngr .isLoggedIn(), 
                Toast.LENGTH_LONG).show();
        sessionMngr.checkLogin();

        ActionBar actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        actionBar.setDisplayShowTitleEnabled(true);

        Tab tab = actionBar.newTab().
                setText("Residential").
                setTabListener(new ResidentialFragActivity()).
                setIcon(R.drawable.residential);
        actionBar.addTab(tab);

        tab = actionBar.newTab().
              setText("Commercial").
              setTabListener(new  CommercialFragActivity()).
              setIcon(R.drawable.commercial);

        actionBar.addTab(tab);

    }
    public void Logout(View v) {
        sessionMngr.logoutUser();
    }
    @Override
    public boolean onCreateOptionsMenu(Menu m) {
        getMenuInflater().inflate(R.menu.menu_logout, (android.view.Menu) m);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:02:50.253

更改`onCreateOptionsMenu()`如下

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
   com.actionbarsherlock.view.MenuInflater inflater = getSupportMenuInflater();
   inflater.inflate(R.menu.menu_logout, (com.actionbarsherlock.view.Menu) menu);
   return true;
} 
```

**笔记 ：**

为了从 XML 扩充您的菜单，您应该调用`getSupportMenuInflater()`您的活动。片段回调已经有一个充气器的实例作为参数。

# javascript - 使用 jquery 选择后从 mvc ajax 下拉列表中删除焦点

> ID：16055775
> 
> 赞同：0
> 
> 时间：2013-04-17T08:57:44.900
> 
> 标签：javascript, jquery, asp.net-mvc-3, asp.net-mvc-3-areas

`onchange`我有一个 AjaxDropDown 并且每当下拉值更改时我都会调用该事件。在`ajaxstop`函数中，我将数据绑定到下拉列表并选择一些值。因此，当我使用`select`. 之后，每当我单击页面上的任何位置时，都会`onchange`调用该事件。有没有办法在使用 select 后将该下拉菜单的焦点设置为 false？

这是我的代码：

```
$(document).ajaxstop(function(){
    var dropDown=$('#ddlDropDown').data('tDropDownList');
    dropDown.select(0);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:37:13.993

为什么不把重点放在别的东西上，最好是有用的东西：

```
$('#other').click(function() {
  $('#target').focus();
}); 
```

# android - Android listview onItemClickListener 不起作用

> ID：16055776
> 
> 赞同：0
> 
> 时间：2013-04-17T08:57:45.937
> 
> 标签：android, listview, listener

请原谅我的英语，我是法国人！

我有一个列表视图，我想在单击某个项目时显示其他活动。但是 onItemClickListener 似乎不起作用......我在谷歌上搜索，但我什么也没找到。

这是我的代码：

**XML listView（自定义）：**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/activity_advert_list_listview"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@color/background" >

<RelativeLayout
    android:id="@+id/advertBackground"
    android:layout_width="339dp"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="7.5dp"
    android:layout_marginTop="7.5dp"
    android:background="@drawable/background_advert_list" >

    <RelativeLayout
        android:id="@+id/advertImageLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="8dp" >

        <RelativeLayout
            android:id="@+id/advertBackgroundLayout"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@color/grey" >

            <ImageView
                android:id="@+id/advertImage"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/advertPriceLayout"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/advertImage"
            android:layout_marginTop="-30.5dp"
            android:background="@color/white_50" >

            <TextView
                android:id="@+id/advertPriceText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerHorizontal="true"
                android:hint="@string/Price"
                android:paddingBottom="5dp"
                android:paddingLeft="7dp"
                android:paddingRight="7dp"
                android:paddingTop="3dp"
                android:textSize="14dp"
                android:textStyle="bold" />
        </RelativeLayout>
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/advertInfosLayout"
        android:layout_width="305dp"
        android:layout_height="47dp"
        android:layout_below="@+id/advertImageLayout"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="10dp"
        android:layout_marginTop="10dp" >

        <RelativeLayout
            android:id="@+id/advertInfosLayoutLayout"
            android:layout_width="225dp"
            android:layout_height="wrap_content"
            android:layout_below="@+id/advertImageLayout" >

            <TextView
                android:id="@+id/advertTitleText"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:hint="@string/Product_name"
                android:textColor="@color/grey_blue"
                android:textSize="15sp"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/advertSizeText"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/advertTitleText"
                android:hint="@string/Product_infos"
                android:textColor="@color/b4b5b6"
                android:textSize="15sp" />
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/advertBookmarkLayout"
            android:layout_width="74dp"
            android:layout_height="45dp"
            android:layout_toRightOf="@+id/advertInfosLayoutLayout" >

            <Button
                android:id="@+id/advertBookmarkIcon"
                android:layout_width="26dp"
                android:layout_height="26dp"
                android:layout_centerVertical="true"
                android:background="@drawable/bookmark" />
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/advertDistanceLayout"
            android:layout_width="50dp"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true" >

            <Button
                android:id="@+id/advertDistanceIcon"
                android:layout_width="26dp"
                android:layout_height="26dp"
                android:layout_centerHorizontal="true"
                android:background="@drawable/distance" />

            <TextView
                android:id="@+id/advertDistanceText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/advertDistanceIcon"
                android:layout_centerHorizontal="true"
                android:text="13 km"
                android:textColor="@color/grey_midark"
                android:textSize="11sp" />
        </RelativeLayout>
    </RelativeLayout>
</RelativeLayout> 
```

**Java代码：**

```
 list.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        // Start new detail activity
        Intent intent = new Intent(activity, AdvertDetailActivity.class);
        startActivity(intent);

        Log.w("AdvertList", "Item clicked");
    }
}); 
```

你有想法吗？非常感谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T09:23:05.393

如果要将按钮/复选框添加到 ListView 行，则应在 xml 中将其添加到它们：

```
 android:focusable="false" 
```

为什么？因为你有 2 个点击区域，按钮和行本身，所以你必须把你的行作为主要的触摸区域。

试试看它是否有效。

另一方面，您的 xml 中有太多的 ViewGroups（RelativeLayouts），这会使绘制过程变慢。只有一个（如果你真的需要，也许还有一些 LinearLayouts）就足够了。

# php - Magento XML RPC 错误

> ID：16055778
> 
> 赞同：0
> 
> 时间：2013-04-17T08:57:54.203
> 
> 标签：php, magento, zend-framework, xml-rpc

我创建了一个 XML-RPC 用户，并从管理面板分配了一个角色（具有所有资源）：系统/Web 服务/XML-Rpc 用户和角色。

现在我想转储所有购物车产品并将它们发送到外部服务器。

我在 app/design/frontend/default/theme/template/catalog/product/view.phtml 中使用此代码：

```
$client = new Zend_XmlRpc_Client('http://mysite/api/xmlrpc/', 80);
$session = $client->call('login', array('myuser', 'myapi'));
$filterData = array('type' => array('in' => 'simple'));
$product = $client->call('call', array($session, 'category_product.list', array($filterData)));
var_dump($product);
$server = new Zend_XmlRpc_Client('/xmlServer.php','www.server-site.com', 80);
$result = $server->send($product); 
```

问题是我收到此错误：

```
Fatal error: Call to a member function getUri() on a non-object in /var/www/html/zzz/lib/Zend/XmlRpc/Client.php on line 265 
```

这是第 265 行的代码：

```
if($http->getUri() === null) {
        $http->setUri($this->_serverAddress);
    } 
```

我认为问题来自这里：

```
$session = $client->call('login', array('myuser', 'myapi')); 
```

但是用户和api是有效的。所以我不知道会是什么。我的代码有什么问题？

期待感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:17:31.027

问题是我的服务器配置。如果我尝试这个 php 命令，它会返回 false： file_get_contents 所以主机不能在端口 80 上访问。这是因为防火墙或其他一些设置。

# android - 如何从 Drive 应用程序数据文件夹中读取？

> ID：16055781
> 
> 赞同：0
> 
> 时间：2013-04-17T08:58:05.437
> 
> 标签：android, file, google-api, google-drive-api

[这是这个问题](https://stackoverflow.com/questions/15966480/how-to-write-into-drive-application-data-folder)的后续。我已经在 Drive 应用程序文件夹中写入了我的数据文件，现在创建这些文件的同一个应用程序需要检索它们。

这不起作用（我得到文件列表，但文件下载请求返回 401 错误）：

```
private ArrayList<File> listFilesInApplicationDataFolder(Drive service) throws IOException {
  ArrayList<File> result = new ArrayList<File>();
Files.List request = service.files().list();
request.setQ("'appdata' in parents");

do {
  try {
    FileList files = request.execute();

    result.addAll(files.getItems());
    request.setPageToken(files.getNextPageToken());
  } catch (IOException e) {
    System.out.println("An error occurred: " + e);
    request.setPageToken(null);
  }
} while (request.getPageToken() != null &&
         request.getPageToken().length() > 0);

for (File file:result){
    System.out.println("##### "+file.getOriginalFilename()+ " "+file.toPrettyString());

    if (file.getDownloadUrl() != null && file.getDownloadUrl().length() > 0) {
          try {
            HttpResponse resp =
                service.getRequestFactory().buildGetRequest(new GenericUrl(file.getDownloadUrl()))
                    .execute();
            InputStream in= resp.getContent();
            FileOutputStream fos = openFileOutput("pinmemo",
                    Context.MODE_PRIVATE);
            while(in.available()>0)
                fos.write(in.read());
            fos.close();
          } catch (UserRecoverableAuthIOException e) {
              startActivityForResult(e.getIntent(), REQUEST_AUTHORIZATION);
              return null;
          } catch (IOException e) {
            // An error occurred.
            e.printStackTrace();
            return null;
          }
        } else {
          // The file doesn't have any content stored on Drive.
          return null;
        }

}

return result; 
```

}

我应该怎么办？

编辑：

我收到此错误消息：

```
04-17 11:19:30.614: W/System.err(2022): com.google.api.client.http.HttpResponseException: 401 Unauthorized
04-17 11:19:30.614: W/System.err(2022): at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1095) 
```

编辑：新的谷歌玩游戏服务基本上满足了我的需求（唯一的问题是我的应用不是游戏......），因此这个问题现在已经部分过时了。当然，谷歌玩游戏使用“云保存”而不是“驱动器”，但对于我的需求来说就足够了。但是，我应该将 Google 玩游戏用于非游戏应用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:05:48.097

确保您的访问令牌具有 appdata 范围的权限：

```
https://www.googleapis.com/auth/drive.appdata 
```

# c# - 在 TextBlock 的 CoerceValueCallback 中添加内联时出现 FatalExecutionEngineError

> ID：16055782
> 
> 赞同：2
> 
> 时间：2013-04-17T08:58:06.183
> 
> 标签：c#, wpf

我正在尝试创建一个`TextBlock`控件，以某种方式格式化它绑定的文本。为此，我尝试使用派生自 TextBlock 的类的 CoerceValueCallback 添加必要的内联，然后忽略文本。就像是：

```
public class BuggyTextBlock : TextBlock
{
    static BuggyTextBlock()
    {
        TextProperty.OverrideMetadata(typeof(BuggyTextBlock),
                      new FrameworkPropertyMetadata((PropertyChangedCallback)null,
                                                    CoerceText));
    }

    private static object CoerceText(DependencyObject sender, object value)
    {
        BuggyTextBlock tb= (BuggyTextBlock)sender;                       
        tb.Inlines.Add(new Run("Hello World")); // FatalExecutionEngineError here
        return string.Empty;
    }
} 
```

现在，当我在更改 Text 属性（直接或通过数据绑定）后立即使用此控件时，我得到了 FatalExecutionEngineError。不管我`tb.Inlines.Clear()`之前是否使用过，或者我是否尝试返回`null`或`string.Empty`.

这真的是一个 CLR 错误（就像错误文本所暗示的那样）还是我在这里做了一些愚蠢的事情？

编辑：

MDA 消息显示

> 检测到 FatalExecutionEngineError 消息：运行时遇到致命错误。错误地址位于线程 0x156c 上的 0xe7376797。错误代码为 0x80131623。此错误可能是 CLR 中的错​​误或用户代码的不安全或不可验证部分中的错误。此错误的常见来源包括 COM 互操作或 PInvoke 的用户封送错误，这可能会损坏堆栈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:33:03.427

主窗口

**XAML**

```
xmlns:obj='clr-namespace:Jens' 
Height="350" Width="525" Loaded="Window_Loaded">

<obj:BuggyTextBlock Background="Gray" Width="100" Height="50" x:Name="myBug">

</obj:BuggyTextBlock> 
```

**代码隐藏**

```
 public MainWindow()
    {
        InitializeComponent();
        myBug.Text = "blubb";
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {

        myBug.Text = "new blubb";
    } 
```

**你的代码**

```
public class BuggyTextBlock : TextBlock
{
    static BuggyTextBlock()
    {
        TextProperty.OverrideMetadata(typeof(BuggyTextBlock),
                      new FrameworkPropertyMetadata((PropertyChangedCallback)null,
                                                    CoerceText));
    }

    private static object CoerceText(DependencyObject sender, object value)
    {
        // 1\. value == blubb
        // 2\. value == new blubb
        // and here it comes i don't know why but it get called 3 Times
        // 3\. value == Hello WorldHello World <-- FatalExecutionEngineError here

        BuggyTextBlock tb = (BuggyTextBlock)sender; 
        tb.Inlines.Add(new Run("Hello World")); // FatalExecutionEngineError here
        return string.Empty;
    }
} 
```

**如果你这样做也**编辑****

 **```
 private static object CoerceText(DependencyObject sender, object value)
    {
        BuggyTextBlock tb = (BuggyTextBlock)sender; 

        tb.Text = value //<- watch here you will get a StackOverflowException

        return string.Empty;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-18T02:48:15.233

您可以使用以下方法解决这种情况：

```
class HighlightTextBlock : TextBlock
{
    static HighlightTextBlock()
    {
        TextProperty.OverrideMetadata(
            typeof(HighlightTextBlock),
            new FrameworkPropertyMetadata("", null, (d, e) => ((HighlightTextBlock)d).OnCoerceTextPropertyValue(e)));
    }

    private bool _isUpdating;

    private object OnCoerceTextPropertyValue(object baseValue)
    {
        if (_isUpdating)
        {
            return string.Empty;
        }

        // TODO if it is possible to modify baseValue directly, return that modified value here

        var condition = SomeLogicToDetermineWhetherWeShouldUpdate();

        _isUpdating = true;

        Inlines.Clear();

        // TODO add inlines here

        _isUpdating = false;

        return baseValue;
    }
} 
```

这将在大多数情况下自动触发。如果您需要随时手动强制该值（例如响应另一个属性更新），只需使用：

```
InvalidateProperty(TextProperty); 
```**

# php - 这段代码使用 PDO 安全吗？

> ID：16055785
> 
> 赞同：1
> 
> 时间：2013-04-17T08:58:10.900
> 
> 标签：php, security, pdo, sql-injection

我是 PDO 的新手。听说 PDO 可以防止 SQL 注入攻击。

这是我写的：

```
$db = new PDO('mysql:host=192.168.57.36; dbname=somedb; charset=UTF8', 'user1', 'pass1');
$sql = "SELECT * FROM table1 WHERE id = ?";
$stmt = $db->prepare($sql);
$stmt->execute(array($tid)); 
```

它是安全代码吗？我猜prepared应该做一些安全操作，但是变量被传递给它之后的查询。

我应该在执行方法之前使用 addParam 吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:00:22.053

> 我应该在执行方法之前使用 addParam 吗？

不。

将变量传递给 execute 的作用几乎相同。

不过可能还有其他问题，您可以在[此处阅读它们](https://stackoverflow.com/tags/pdo/info)

# c++ - 无法在 Mac OS X 上抑制特定的 clang 警告

> ID：16055791
> 
> 赞同：8
> 
> 时间：2013-04-17T08:58:33.260
> 
> 标签：c++, macos, clang, compiler-warnings

我已经设置了 -Wno-unused-parameter （和其他一些）编译器标志，它确实被传递给编译器，但我仍然收到这个警告：

```
clang++ -c -pipe -Wno-self-assign -Wno-unused-parameter -Wno-unused-variable -g -gdwarf-2 -arch x86_64 -fPIC -Wall -W F/Library/Frameworks -o ../build/cobject.o src/cobject.cpp                                                     ^
src/cobject.cpp:102:68: warning: unused parameter 'client' [-Wunused-parameter]
void cobject::processNetMsg( int type, CNetMsg& msg, CClient& client )
                                                                   ^ 
```

是因为`-Wall`也指定了吗？不`-Wno-...`应该优先吗？如何告诉 clang 显示除某些警告之外的所有警告？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T09:00:55.440

警告参数的作用类似于切换。例如，当您这样做时`-Wno-unused-parameter`，您会关闭该警告，但是稍后在命令行上您会`-Wall`再次将其重新打开。论点的顺序很重要。

因此，要解决它，请在打开参数*后*放置参数。

# spring - 使用 Spring Security 保护 GWT servlet

> ID：16055798
> 
> 赞同：1
> 
> 时间：2013-04-17T08:59:01.933
> 
> 标签：spring, security, gwt, spring-security, web.xml

我正在编写一个使用 Spring 安全性保护的 GWT 应用程序。登录工作正常，但授权没有。

我尝试在我的方法上使用 @Secured 和 @PreAuthorize 注释，但也没有用。

例如，这是来自 AppUserServiceImpl 的代码片段

```
@Secured("ROLE_ADMINISTRATOR")
    @Override
    public List<AppUser> fetch(Integer startRow, Integer endRow, Map criteria) {
        return appUserManagerBean.getUsers(criteria);
    } 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<beans:beans xmlns="http://www.springframework.org/schema/security"
             xmlns:beans="http://www.springframework.org/schema/beans"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.0.xsd">

<http auto-config="true">
    <intercept-url pattern="/testapplication/**" access="ROLE_USER"/>
    <intercept-url pattern="/gwt/**" access="ROLE_USER"/>
    <intercept-url pattern="/**/*.html" access="ROLE_USER"/>
    <intercept-url pattern="/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <intercept-url pattern="/security/*" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <intercept-url pattern="/testapplication/appUserService*" access="ROLE_ADMIN"/>

    <form-login
            login-page="/login.jsp"
            authentication-failure-url="/security/error.html"
            login-processing-url="/j_spring_security_check"
            />
</http>
<beans:bean id="appUserService" class="com.test.testapplication.server.admin.appuser.AppUserServiceImpl"/>

<beans:bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
[DATASOURCE CONFIGURATION]
</beans:bean>
<global-method-security pre-post-annotations="enabled" secured-annotations="enabled" />
<authentication-manager>
    <authentication-provider>
        <password-encoder hash="sha" />
        <jdbc-user-service data-source-ref="dataSource"
                           users-by-username-query="select username,password,DECODE(enabled,'Y',1,'N',0) as enabled from APP_USER where username=?"

                           authorities-by-username-query="select u.username, ur.role from APP_USER u, APP_USER_ROLE ur
                                                          where u.id = ur.APP_USER_ID and u.username =?  "

                />
    </authentication-provider>
</authentication-manager> 
```

为了测试，我正在尝试保护“appUserService”。

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
          http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
           version="2.5">

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/applicationContext.xml
        </param-value>
    </context-param>
    <servlet>
        <servlet-name>appUserService</servlet-name>
    <servlet-class>com.test.testapplication.server.admin.appuser.AppUserServiceImpl</servlet-class>
</servlet>

<!-- Spring security filter -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<!-- Spring listener -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<!-- Default page to serve -->
<welcome-file-list>
    <welcome-file>testapplication.html</welcome-file>
</welcome-file-list> 
```

我正在寻找最简单的解决方案，我不想使用 AspectJ，非常感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:41:24.973

您在哪里将您的 servlet 映射到特定路径？

我正在使用[gwt-sl](http://code.google.com/p/gwt-sl/)来集成 RemoteServiceServlets 和 Spring。在 web.xml 中定义 Dispatcher servlet：

```
<servlet>
    <servlet-name>gwtservice</servlet-name>
    <servlet-class> org.springframework.web.servlet.DispatcherServlet </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

以及您的 gwt-servlet 的声明和映射：

```
<bean name="DeviceListenerServlet" class="your.package.your.SomeService"/>
<bean id="urlMappingGWT" class="org.gwtwidgets.server.spring.GWTHandler">
    <property name="mappings">
        <map>
            <entry key="/service" value-ref="DriverServiceImpl"/>
        </map>
    </property>
</bean> 
```

并更改 RemoteService 类中的注释（在我的示例中，它将是 @RemoteServiceRelativePath("gwtservice/service")）。

现在您可以使用 @Secured 注释（如果您添加了）

希望这有帮助。

# java - 如何在 Webview 中自动输入密码

> ID：16055800
> 
> 赞同：4
> 
> 时间：2013-04-17T08:59:05.547
> 
> 标签：java, android, authentication, passwords, webclient

我是 Java 和 Android 的新手，我有一个问题。我认为解决方案可能很容易，但我无法解决。

我用 WebView 创建了一个应用程序，事情是我希望 webview 自动输入用户名和密码，以便用户在启动应用程序时已经登录。我用谷歌搜索并找到了类似的东西，但它不起作用

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    webView = (WebView) findViewById(R.id.webView1);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.loadUrl("https://euterpe.webuntis.com/WebUntis/index.do#main");

webView.setWebViewClient(new WebViewClient ());

class MyWebViewClient extends WebViewClient {
@Override
public void onReceivedHttpAuthRequest(WebView view,
        HttpAuthHandler handler, String host, String realm) {

    handler.proceed("Username", "password");

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T13:16:56.350

虽然这是一个老问题，但我想我会发布我的解决方案：

```
 webView.getSettings().setJavaScriptEnabled(true);   

    webView.loadUrl("http://your.url");

    webView.setWebViewClient(new WebViewClient() {

        public void onPageFinished(WebView view, String url) {
            view.loadUrl("javascript:document.getElementsByName('school')[0].value = 'schoolname'");
            view.loadUrl("javascript:document.getElementsByName('j_username')[0].value = 'username'");
            view.loadUrl("javascript:document.getElementsByName('j_password')[0].value = 'password'");

            view.loadUrl("javascript:document.forms['login'].submit()");
        }
    }); 
```

它看起来很像本杰明的答案。唯一的区别是**[0]**部分，选择第一个找到的元素，加上我的实现在触发 javascript 之前等待页面加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:03:54.330

你好，请试试这个：

```
webView.getSettings().setJavaScriptEnabled(true);

webView.loadUrl("javascript:document.getElementsByName('school').value = 'schoolname'");
webView.loadUrl("javascript:document.getElementsByName('j_username').value = 'username'");
webView.loadUrl("javascript:document.getElementsByName('j_password').value = 'password'");

webView.loadUrl("javascript:document.forms['login'].submit()"); 
```

第一行启用 javascript

所有其他行填写表格并最终提交表格。

请查看字符串撇号，我编辑了我的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-07T10:24:42.553

代替

```
webView.setWebViewClient(new WebViewClient ()); 
```

和

```
webView.setWebViewClient(new MyWebViewClient ()); 
```

只有这样，覆盖方法`onReceivedHttpAuthRequest`才会被调用。

此处理仅适用于 HTTP 身份验证请求。

# ios - UITableView 部分中的背景图像隐藏部分标题

> ID：16055801
> 
> 赞同：1
> 
> 时间：2013-04-17T08:59:07.067
> 
> 标签：ios, objective-c, uitableview, tableview

我正在使用以下方法在 UITableView 的部分标题中设置标题，效果很好。

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSString *sectionHeader = nil;

    if (section == 0)
    {
        sectionHeader = nil;
    }
    if(section == 1)
    {
        sectionHeader = @"Categories";
    }
    if (section == 2) {
        sectionHeader = @"General";
    }
    return sectionHeader;
} 
```

使用以下方法，我在部分中设置标题的高度，工作正常。

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 20;
} 
```

但是，一旦我使用以下方法在部分标题中设置背景图像，部分标题中的标题就会消失并变为空，但当然是图像位置。

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{

    UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 20)];
    UIImageView *headerImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"section_background.png"]];

    headerImage.frame = CGRectMake(0, 0, tableView.bounds.size.width, 20);

    [headerView addSubview:headerImage];

    return headerView;
} 
```

如何在节标题中设置标题而不删除其中的背景图像。有没有好心人指出来。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:11:56.263

发生这种情况是因为您与**Header 的标题**`headerView`重叠。所以最好的方法是......也添加到你的. 并在部分中将标签文本作为标题 os 标题。**`UILabel``headerView`**

 **我尝试使用以下代码..将其用作您的方式，可能对您的情况有所帮助。

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{

    UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 20)];
    UIImageView *headerImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"1.png"]]; //set your image/

    UILabel *headerLbl = [[UILabel alloc] initWithFrame:CGRectMake(15, 0, 205, 15)];//set as you need
    headerLbl.backgroundColor = [UIColor clearColor];
    headerLbl.text = [self.listOfHeader objectAtIndex:section];
    [headerImage addSubview:headerLbl];

    headerImage.frame = CGRectMake(0, 0, tableView.bounds.size.width, 20);

    [headerView addSubview:headerImage];

    return headerView;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T14:17:01.150

另一种方法是直接从图像 H、W 设置 CGRect 的尺寸，

```
 - (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

 UIImage *myImage = [UIImage imageNamed:@"header.png"];
 UIView *tempView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, myImage.size.width, myImage.size.height)];

 UIImageView *imageView = [[UIImageView alloc] initWithImage:myImage];
 imageView.frame = CGRectMake(0,0,myImage.size.width, myImage.size.height);

  headerLabel = [[UILabel alloc] initWithFrame:CGRectMake(15, 5, 300, 25)];
  headerLabel.font = [UIFont fontWithName:@"TrebuchetMS-Bold" size:15.0];
  headerLabel.backgroundColor = [UIColor clearColor];

  NSString *myString = [NSString stringWithFormat:@"This is Header ;)"];
  NSLog(@" headerLabel.text: %@", myString);
  headerLabel.text = myString;
 [imageView addSubview:headerLabel];

 [tempView addSubview:imageView];

 return tempView ;

 }

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
 return 50;
 } 
```**

# php - 面向对象的 PHP 和数据库包装器

> ID：16055803
> 
> 赞同：1
> 
> 时间：2013-04-17T08:59:21.813
> 
> 标签：php, oop, dependency-injection

我正在为 PHP 中的预订系统编写一个小班。我自己承认，OOP 根本不是我的事——但我想在这个项目中使用它，假设我能收集到足够的理解来正确使用它。

这是我到目前为止所拥有的一些东西（大部分是伪的）：

```
class bookingSystemDbWrapper
{
    public $db;
    function __construct()
    {
        $this->db = mysqli_connect(..., ..., ..., ...);    
    }
}

class bookingSystemAvailabilityManager extends bookingSystemDbWrapper
{
    function checkAvailability($date, $roomID)
    {
        /**
         * check availability for a given room on a given date 
         */

        $query = mysqli_real_escape_string("SELECT SOMETHING FROM SOMEWHERE");
        $result = mysqli_query($this->db, $query);
        return $result; 
    }        
} 
```

这种方法适用于上面的小而简单的类。但是当我需要一个类来创建预订、基于位置进行搜索等时，为每个类扩展数据库包装器似乎是个坏主意。所以我需要另一种方法来使我的数据库包装类可用于我的其他类，以便它们可以运行数据库查询。

我在这里阅读了关于 nettuts 的依赖注入：http://net.tutsplus.com/tutorials/php/dependency-injection-huh/[但这](http://net.tutsplus.com/tutorials/php/dependency-injection-huh/)有点超出了我对 OOP 的有限理解，所以我不确定是什么采取的方法，或如何正确实施。

**TL;博士**

我应该如何在不违反任何 OOP 原则的情况下使一个类的公共变量可供其他类使用，并保持我的代码可读？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:09:18.317

我建议一个`static class`，像这样：

```
<?php
class dbms
    {
        const HOST     = 'localhost';
        const LOGIN    = 'login';
        const PASSWORD = 'myB!GevU1PwD';
        const SCHEMA   = 'mydb';
        const CHARSET  = 'utf8';
        const PORT     = 3306;

        protected static $instance;

        public static function connect()
            {
                if(is_object(static::$instance) && (static::$instance instanceof mysqli))
                    { return static::$instance->ping(); }

                static::$instance = new mysqli(static::HOST, static::LOGIN, static::PASSWORD, static::SCHEMA, static::PORT);

                if(static::$instance->connect_errno)return false;

                static::set_charset(static::CHARSET);
            }

        public static function disconnect()
            {
                static::$instance->close();

                static::$instance = null;
            }

        public static function &getInstance(){ return static::$instance; }
    }
?> 
```

应该易于扩展，并且随处可见：

1.  静态实例只有一个共享连接；
2.  它可能很容易通过改变用途`extend`而不会失去性能；
3.  它可以从您需要的任何地方访问，因为它是一个`static class`.

# python - django表单存储模型的下拉列表

> ID：16055808
> 
> 赞同：17
> 
> 时间：2013-04-17T08:59:32.830
> 
> 标签：python, html, django, forms

我正在尝试为图书馆创建一个表单，用户可以在其中执行 2 个操作：添加新书或打开现有书的存储信息。书籍有 2 个字段（标题和作者）。每次创建新书时，都会将其存储在数据库中。任何以前创建的书都显示为下拉列表中的一个选项（只有名称）。我希望当用户从下拉列表中选择一个选项时，所选书籍的信息会出现在屏幕上。

我一直在尝试两种不同的方法，但没有一个能满足我的要求。一方面，按照这个问题[django form dropdown list of numbers](https://stackoverflow.com/questions/8859504/django-form-dropdown-list-of-numbers)我可以创建一个下拉列表，并使用类似这样的代码在视图中获取选定的值：

```
class CronForm(forms.Form):
    days = forms.ChoiceField(choices=[(x, x) for x in range(1, 32)])

def manage_books(request):
    d = CronForm()
    if request.method == 'POST':
        day = request.POST.get('days') 
```

但我希望我的选项是以前存储在数据库中的书籍，而不是预定义的值。

我尝试过的另一种方法是从 html 模板中进行。在那里我创建了以下表格：

```
<form>
    {% for book in list %} 
        <option value="name">{{ book.name }}</option>
    {% endfor %}   
</form> 
```

本书在此视图中呈现的位置：

```
l = Books.objects.all().order_by('name') 
```

在第二种情况下，下拉列表中显示的信息是我想要的，但我不知道如何获取所选值并在视图中使用它。也许使用javascript函数？

所以我的两个要求是：在列表中显示正确的信息（用户存储在数据库中）并能够知道选择了哪一个。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-17T09:44:22.200

您应该使用[ModelChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelchoicefield)。

```
class CronForm(forms.Form):
    days = forms.ModelChoiceField(queryset=Books.objects.all().order_by('name')) 
```

然后你的意见，应该是这样的：

```
def show_book(request):
   form = CronForm()
   if request.method == "POST":
      form = CronForm(request.POST)
      if form.is_valid:
         #redirect to the url where you'll process the input
         return HttpResponseRedirect(...) # insert reverse or url
   errors = form.errors or None # form not submitted or it has errors
   return render(request, 'path/to/template.html',{
          'form': form,
          'errors': errors,
   }) 
```

要添加一本新书或编辑一本，您应该使用[ModelForm](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)。然后在该视图中，您将检查它是否是新表单

```
book_form = BookForm() # This will create a new book 
```

或者

```
book = get_object_or_404(Book, pk=1)
book_form = BookForm(instance=book) # this will create a form with the data filled of book with id 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-05T18:14:23.977

补充 J. Ghyllebert 的回答，以解决评论中的渲染问题。模板渲染：

```
<form action="" class="YourFormClass" method="post">
    {% csrf_token %}
    {{ form.as_p }}
</form> 
```

或单个字段：

```
<form action="" class="YourFormClass" method="post">
    {% csrf_token %}
    <label class="YourLabelClass">{{ form.days.label }}</label>
    <div class="YourSelectClass">
        {{ form.days }}
    </div>
</form> 
```

文档：[https ://docs.djangoproject.com/en/3.1/topics/forms/#the-template](https://docs.djangoproject.com/en/3.1/topics/forms/#the-template)

# sqlite - 将前缀匹配放在首位的 SQLite 排序

> ID：16055810
> 
> 赞同：0
> 
> 时间：2013-04-17T08:59:41.217
> 
> 标签：sqlite, android-sqlite

我想知道如何制定一个 SQLite ORDER 作为它的第一个标准，它将根据搜索字符串是否匹配列的前缀或中缀来分隔匹配项。第二个排序将是简单的 ASC。

例如，搜索“st”并简单地按该列排序将产生：

*   天体物理学家
*   贝克街
*   尤达大师
*   堆栈溢出
*   星际迷航
*   剑龙
*   系统冲击
*   韦斯特伍德

我想这样订购：

*   堆栈溢出
*   星际迷航
*   剑龙
*   天体物理学家
*   贝克街
*   尤达大师
*   系统冲击
*   韦斯特伍德

所以前缀匹配首先出现，然后是其余的。二级排序只是 ASC。

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:54:36.890

假设您有一个名为**Products**的表，让我们简单地说它只有一个名为**Productname**的字段。您想搜索以**Co**开头或中间有**Co**的产品名称。

因此，查询将是这样的：

```
SELECT Productname FROM Products
WHERE Productname LIKE 'Co%'
UNION ALL
SELECT Productname FROM (
SELECT Productname FROM Products
WHERE Productname LIKE '%Co%'
ORDER BY Productname) B 
```

所以，如果你有以下记录

```
Coco Crunch
Lucky Cow
Coffee
Sweet Corn
Cookies
Corn Puff 
```

现在会变成这样

```
Coco Crunch
Coffee
Cookies
Corn Puff
Lucky Cow
Sweet Corn 
```

使用您自己的字段和表格进行尝试。

# asp.net - 即使结果为空，也显示 gridview 的标题 ASP.NET

> ID：16055811
> 
> 赞同：0
> 
> 时间：2013-04-17T08:59:44.400
> 
> 标签：asp.net, gridview

我有一个 GridView，它工作正常。但是当我没有结果时，标题就会消失。有没有办法在没有代码隐藏的情况下显示它？

我正在使用 3.5

```
 <asp:DropDownList ID="DropDownList1" 
runat="server" 
AutoPostBack="True" 
DataSourceID="SqlDataSource1" 
DataTextField="Categorie" 
DataValueField="Cat_ID"
AppendDataBoundItems="True">

</asp:DropDownList>
<asp:SqlDataSource ID="SqlDataSource1" 
runat="server" 
ConnectionString="<%$ ConnectionStrings:Goed %>" 
SelectCommand="SELECT * FROM [tbl_Cat]">
</asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:17:34.673

设置 ShowHeaderWhenEmpty 属性：

```
<asp:GridView runat="server" ShowHeaderWhenEmpty="true" ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:22:43.563

在gridview中使用属性

```
ShowHeaderWhenEmpty="True" 
```

你用改变编码

```
<asp:DropDownList ID="DropDownList1" 
runat="server" 
AutoPostBack="True" 
DataSourceID="SqlDataSource1" 
DataTextField="Categorie" 
DataValueField="Cat_ID"
ShowHeaderWhenEmpty="True" 
AppendDataBoundItems="True"> 
```

对于 3.5，请点击此链接 [http://www.aspdotnet-suresh.com/2010/12/v-behaviorurldefaultvmlo.html](http://www.aspdotnet-suresh.com/2010/12/v-behaviorurldefaultvmlo.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:23:05.013

更新您的 sql 查询以在 null 的情况下返回某些内容。

```
if not exists (SELECT * FROM [tbl_Cat])
 select ' ' as Categorie,' ' as catid
 else
 select SELECT * FROM [tbl_Cat] 
```

将适用于所有框架版本

另一种选择是覆盖数据绑定方法，您可以在其中检查数据表。如果表行数为 0，您可以手动插入空白值，然后进行数据绑定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:06:17.907

在gridview中设置Below Property......

```
EmptyDataText="There are no crecords." 
```

或设置此模板

```
<EmptyDataTemplate>
    No data found!
</EmptyDataTemplate> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T09:56:13.520

对于 .net 3.5 使用

```
<EmptyDataTemplate>
<table>
<tr>
<th>Column 1</th>
<th>Column 2</th>
</tr>
<tr>
<td colspan="2">No Data found..</td>
</tr>    
</table>
</EmptyDataTemplate> 
```

就我而言，这将是最简单的方法。

# sql - 当 [新列不为空] 时来自 [表]

> ID：16055815
> 
> 赞同：1
> 
> 时间：2013-04-17T09:00:06.373
> 
> 标签：sql, sql-server-2012, select-query

我编写了一个查询，用于从不同的表中选择一些结果，并使用 union all。在from之后你可以使用where。在那我想使用我在查询中“制作”的列。我怎样才能做到这一点？

例子

```
 SELECT    
    [column1] AS 'K1', 
    ISNULL([column2], 'else')  + ' ' + ISNULL([column3], 'else') AS 'K2'    
 FROM 
    [table]  
 FULL JOIN
    [table] ON A.Name = C.AccountIdName 
 WHERE
    A.Name IS NOT NULL  
    AND K1 IS NOT NULL 
```

有没有可能把K1放在哪里？还是有其他选择？

* * *

更新：新示例

```
SELECT    
        [column1] AS 'K1', 
        ISNULL([column2], 'else')  + ' ' + ISNULL([column3], 'else') AS 'K2'    
     FROM 
        [table]  
     FULL JOIN
        [table] ON A.Name = C.AccountIdName 
     WHERE
        A.Name IS NOT NULL  
        **AND K1 IS NOT NULL
        AND K3 IS NOT NULL**

UNION ALL

SELECT    
        [column1] AS 'K1', 
        ISNULL([column2], 'else')  + ' ' + ISNULL([column3], 'else') AS 'K2'    
     FROM 
        [table]  
     FULL JOIN
        [table] ON A.Name = C.AccountIdName 
     WHERE
        A.Name IS NOT NULL  
        **AND K2 IS NOT NULL 
        AND K4 IS NOT NULL** 
```

如您所见，我想要在第一个选择 K1 en K3 中，在第二个中我想要 K2 end K4

我希望你也能解决这个问题，这是一个很好的解决方案。

```
SELECT * FROM 
(
 SELECT [column1] as 'K1' , ISNULL([column2], 'else') + ' ' + ISNULL([column3], 'else') as 'K2' 
 FROM [table] full join [table] on A.Name = C.AccountIdName where A.Name IS NOT NULL
) 
res WHERE res.K1 IS NOT NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:03:53.223

不幸的是，您不能使用在同一级别上创建`ALIAS`的子句。`WHERE`有两个选项可以做到：

使用原始列：

```
SELECT  [column1] as 'K1' , 
        ISNULL([column2], 'else') + ' ' + ISNULL([column3], 'else') as 'K2' 
FROM    [table] full join [table] 
          on A.Name = C.AccountIdName 
where   A.Name IS NOT NULL AND [column1] IS NOT NULL 
```

或者用子查询包装它：

```
SELECT K1, K2
FROM
(
    SELECT  [column1] as 'K1' , 
            ISNULL([column2], 'else') + ' ' + ISNULL([column3], 'else') as 'K2' 
    FROM    [table] full join [table] 
              on A.Name = C.AccountIdName
    where   A.Name IS NOT NULL
) s
WHERE K1 IS NOT NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:04:05.757

您需要使用子查询或 CTE：

```
;WITH CTE AS
(
 SELECT    
    [column1] AS 'K1', 
    ISNULL([column2], 'else')  + ' ' + ISNULL([column3], 'else') AS 'K2'    
 FROM 
    [table]  
 FULL JOIN
    [table] ON A.Name = C.AccountIdName 
 WHERE
    A.Name IS NOT NULL
) 
SELECT    
   K1, K2
FROM 
   CTE
WHERE
   K1 IS NOT NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:04:44.230

您可以检查`Column1`而不是`K1`因为`K1`是别名，因此不能在 where 条件下使用。喜欢：

```
SELECT 
    [column1] as 'K1' , 
    ISNULL([column2], 'else') + ' ' + ISNULL([column3], 'else') as 'K2' 
FROM [table] full join [table] on A.Name = C.AccountIdName 
where 
    A.Name IS NOT NULL AND 
    [column1] IS NOT NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:02:51.553

您可以使用它，但由于您的子查询

```
SELECT * FROM 
(
 SELECT [column1] as 'K1' , ISNULL([column2], 'else') + ' ' + ISNULL([column3], 'else') as 'K2' 
 FROM [table] full join [table] on A.Name = C.AccountIdName where A.Name IS NOT NULL
) 
res WHERE res.K1 IS NOT NULL 
```

**更新**

```
SELECT * FROM 
(
   SELECT [column1] as 'K1' , ISNULL([column2], 'else') + ' ' + ISNULL([column3], 'else') as 'K2' 
   FROM [table] full join [table] on A.Name = C.AccountIdName where A.Name IS NOT NULL
) 
res1 WHERE res1.K1 IS NOT NULL AND res1.K3 IS NOT NULL
UNION ALL
SELECT * FROM 
(
   SELECT [column1] as 'K1' , ISNULL([column2], 'else') + ' ' + ISNULL([column3], 'else') as 'K2' 
   FROM [table] full join [table] on A.Name = C.AccountIdName where A.Name IS NOT NULL
) 
res2 WHERE res2.K2 IS NOT NULL AND res2.K4 IS NOT NULL //BUT DOES IT HAS K4??? 
```

# mongodb - Mongo shell 选项卡补全

> ID：16055818
> 
> 赞同：8
> 
> 时间：2013-04-17T09:00:22.147
> 
> 标签：mongodb, shell, autocomplete, tab-completion

我想知道是否可以在 mongo shell 中配置选项卡完成的行为？我见过的两种行为是：

1.  tab 键的第一次点击完成，只要没有歧义，第二次点击显示可能的选项列表。
2.  根据第一个可能的选项，按 Tab 键完成完整的表达式。

我个人更喜欢第一种选择。我已经在不同的环境中看到了这两种行为（都是 mongo 版本 2 及更高版本），并且无法弄清楚它是可配置的还是由环境引起的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:43:27.640

`mongo`shell 自动完成行为绝对不是一个可配置的选项。根据您使用的 MongoDB 版本，shell 编辑行为存在一些差异。

这些差异不仅限于自动完成，还包括行编辑、历史记录和键盘快捷键……但要确认您的自动完成观察：

*   MongoDB 1.8.x 及更早版本有行为 #1
*   在 MongoDB 2.0.x 中，shell 编辑库从 readline 更改为 linenoise ( [SERVER-2792](https://jira.mongodb.org/browse/SERVER-2792) ) 并导致一些更改，包括选项卡完成（行为 #2）
*   从 MongoDB 2.2.x 开始，原始的 readline 样式完成已恢复（[SERVER-3809](https://jira.mongodb.org/browse/SERVER-3809)）以及对 shell 交互的其他改进（例如：[SERVER-4321](https://jira.mongodb.org/browse/SERVER-4312)、[SERVER-3787、..](https://jira.mongodb.org/browse/SERVER-3787)）。

如果您更喜欢给定 shell 的行为，当然可以使用`mongo`与 MongoDB 服务器版本不同的 shell 版本。要利用所有服务器功能和记录的 shell 帮助程序，您通常需要一个`mongo`与版本相同或更新的主要版本的 shell`mongod`版本。

# android - 从 ExpandableListView 检索 ChildItem？

> ID：16055819
> 
> 赞同：4
> 
> 时间：2013-04-17T09:00:23.917
> 
> 标签：android, expandablelistview, expandablelistadapter

当用户单击 ExpandableListView 的子项时，我试图检索子项。为此，我的 Activity 和 ListAdapter 类如下..

**主要活动：-**

```
public class MainActivity extends Activity {

    NewAdapter mNewAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ExpandableListView expandbleLis = (ExpandableListView) findViewById(R.id.expandableListView);
        expandbleLis.setDividerHeight(2);
        expandbleLis.setGroupIndicator(null);
        expandbleLis.setClickable(true);

        setGroupData();
        setChildGroupData();

        mNewAdapter = new NewAdapter(groupItem, childItem);
        mNewAdapter
                .setInflater(
                        (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE),
                        this);
        expandbleLis.setAdapter(mNewAdapter);
        expandbleLis.setOnGroupClickListener(new OnGroupClickListener() {

            @Override
            public boolean onGroupClick(ExpandableListView parent, View v,
                    int groupPosition, long id) {
                Toast.makeText(MainActivity.this,
                        "GroupItem Clicked" + groupItem.get(groupPosition),
                        Toast.LENGTH_LONG).show();
                return false;
            }
        });
        expandbleLis.setOnChildClickListener(new OnChildClickListener() {

            @Override
            public boolean onChildClick(ExpandableListView parent, View v,
                    int groupPosition, int childPosition, long id) {
                Toast.makeText(MainActivity.this, "ChildItem Clicked",
                        Toast.LENGTH_LONG).show();

                return false;
            }
        });

    }

    public void setGroupData() {
        groupItem.add("TechNology");
        groupItem.add("Mobile");
        groupItem.add("Manufacturer");
        groupItem.add("Extras");
    }

    ArrayList<String> groupItem = new ArrayList<String>();
    ArrayList<Object> childItem = new ArrayList<Object>();

    public void setChildGroupData() {
        /**
         * Add Data For TecthNology
         */
        ArrayList<String> child = new ArrayList<String>();
        child.add("Java");
        child.add("Drupal");
        child.add(".Net Framework");
        child.add("PHP");
        childItem.add(child);

        /**
         * Add Data For Mobile
         */
        child = new ArrayList<String>();
        child.add("Android");
        child.add("Window Mobile");
        child.add("iPHone");
        child.add("Blackberry");
        childItem.add(child);
        /**
         * Add Data For Manufacture
         */
        child = new ArrayList<String>();
        child.add("HTC");
        child.add("Apple");
        child.add("Samsung");
        child.add("Nokia");
        childItem.add(child);
        /**
         * Add Data For Extras
         */
        child = new ArrayList<String>();
        child.add("Contact Us");
        child.add("About Us");
        child.add("Location");
        child.add("Root Cause");
        childItem.add(child);
    }

} 
```

**列表适配器：-**

```
public class NewAdapter extends BaseExpandableListAdapter {

    public ArrayList<String> groupItem, tempChild;
    public ArrayList<Object> Childtem = new ArrayList<Object>();
    public LayoutInflater minflater;
    public Activity activity;

    public NewAdapter(ArrayList<String> grList, ArrayList<Object> childItem) {
        groupItem = grList;
        this.Childtem = childItem;
    }

    public void setInflater(LayoutInflater mInflater, Activity act) {
        this.minflater = mInflater;
        activity = act;
    }

    @Override
    public Object getChild(int groupPosition, int childPosition) {
        return null;
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        return 0;
    }

    @Override
    public View getChildView(int groupPosition, final int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
        tempChild = (ArrayList<String>) Childtem.get(groupPosition);
        TextView text = null;
        if (convertView == null) {
            convertView = minflater.inflate(R.layout.childrow, null);
        }
        text = (TextView) convertView.findViewById(R.id.textView1);
        text.setText(tempChild.get(childPosition));
        return convertView;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        return ((ArrayList<String>) Childtem.get(groupPosition)).size();
    }

    @Override
    public Object getGroup(int groupPosition) {
        return null;
    }

    @Override
    public int getGroupCount() {
        return groupItem.size();
    }

    @Override
    public void onGroupCollapsed(int groupPosition) {
        super.onGroupCollapsed(groupPosition);
    }

    @Override
    public void onGroupExpanded(int groupPosition) {
        super.onGroupExpanded(groupPosition);
    }

    @Override
    public long getGroupId(int groupPosition) {
        return 0;
    }

    @Override
    public View getGroupView(final int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {
        // isExpanded = false;
        if (convertView == null) {
            convertView = minflater.inflate(R.layout.grouprow, null);
        }
        ((CheckedTextView) convertView).setText(groupItem.get(groupPosition));

        ((CheckedTextView) convertView).setChecked(isExpanded);

        return convertView;
    }

    @Override
    public boolean hasStableIds() {
        return false;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }

} 
```

我已经用谷歌搜索过[，](https://stackoverflow.com/questions/6884031/like-to-know-how-to-get-selected-item-in-expandable-list-android)但没有用，我没有从中得到子项目。请帮忙做这件事。

在尝试了许多可能的解决方案之后，我发布了这个，如果你投反对票，请尝试帮助我不要投反对票，说可能的解决方案，那么我会同意..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:12:03.427

多个问题：

*   子项必须是可选择的，点击才能起作用。将您的适配器更改`isChildSelectable()`为 return `true`。

*   `android:clickable="true"`从你的`childrow.xml`根目录中删除`LinearLayout`。（或者，向`LinearLayout`自身添加一个点击处理程序。）

*   实现`getGroup()`并`getChild()`返回实际对象，而不是返回`null`本地唯一标识符。也就是说，组内的子 ID 需要是唯一的，但它们不需要跨组是唯一的。在您的情况下，将子/组位置作为 id 返回即可。`getGroupId()``getChildId()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:50:59.390

在你的`ListAdapter`,

改变`return`值

`public Object getGroup(int groupPosition)`

和

`getGroupId(int groupPosition)`

至

`return groupPosition;`

# java - 获取服务器实例的异常：此实例没有有效的实例 ID

> ID：16055821
> 
> 赞同：7
> 
> 时间：2013-04-17T09:00:28.180
> 
> 标签：java, google-app-engine

当我在我的本地 Google App Engine 应用程序中将日志记录级别更改`FINE`为时，我开始在我的跟踪堆栈中看到这些：

```
Apr 17, 2013 4:54:20 PM com.google.appengine.tools.development.DevAppServerServersFilter getCurrentServerInstance
FINE: Exception getting server instance
com.google.appengine.api.labs.servers.ServersException: No valid instance id for this instance.
    at com.google.appengine.api.labs.servers.ServersServiceImpl.getCurrentInstanceId(ServersServiceImpl.java:75)
    at com.google.appengine.tools.development.DevAppServerServersFilter.getCurrentServerInstance(DevAppServerServersFilter.java:210)
    at com.google.appengine.tools.development.DevAppServerServersFilter.isServerLoadBalancingServerRequest(DevAppServerServersFilter.java:185)
    at com.google.appengine.tools.development.DevAppServerServersFilter.getRequestType(DevAppServerServersFilter.java:174)
    at com.google.appengine.tools.development.DevAppServerServersFilter.doFilter(DevAppServerServersFilter.java:112)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:421)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

任何想法这是什么以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-10T18:50:45.507

这是开发服务器中的一个已知问题：
[https ://code.google.com/p/googleappengine/issues/detail?id=10412](https://code.google.com/p/googleappengine/issues/detail?id=10412)

已经知道有一段时间了，所以我不确定他们是否会修复它。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-17T09:02:37.567

我认为当您将日志记录设置为 FINE 时，您应该期待一些虚假的日志消息。我只为您的代码将日志记录级别设置为 FINE，并将其余部分保留为默认级别。

# php - 实时服务器状态和信息

> ID：16055823
> 
> 赞同：-1
> 
> 时间：2013-04-17T09:00:33.900
> 
> 标签：php, node.js, webserver, dashboard

上周，我在 WrapBootstrap 上找到了一个管理面板，其中包含一个仪表板页面。这个页面很棒，因为它包含一些关于负载和状态的服务器信息。

有一个清单：

*   服务器负载（实时，30ms）
*   磁盘空间使用
*   带宽
*   内存使用情况（实时）
*   网络使用情况
*   正常运行时间（包括秒数）
*   系统日志
*   操作系统信息
*   每个核心的 CPU 使用率（实时）
*   其他 CPU 信息
*   等等

我知道很多这不能使用 PHP 完成，但我很乐意使用 Node.js 或 Python，如果有人帮助我......我可以使用 PHP 做一些事情，但不幸的是这些......

如果有人知道我如何创建它，那就太棒了！

注意：我在 EC2 实例上有 Ubuntu 12.04 LTS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T20:27:01.267

您可以在 php.ini 中完成所有这些操作。

[http://rk4an.github.io/phpsysinfo](http://rk4an.github.io/phpsysinfo)

您可能还想查看 MRTG、Nagios 等所有监控和服务器状态的东西

# visual-studio-2012 - NuGet 是否适合下载运行时二进制文件？

> ID：16055827
> 
> 赞同：1
> 
> 时间：2013-04-17T09:00:39.283
> 
> 标签：visual-studio-2012, nuget

NuGet 是否适合下拉编译不需要但在运行时的程序集？我有一个 Visual Studio 解决方案，其中包含许多编译所需的 NuGet 包——这些包没有保存在源代码管理中。在运行时有几个额外的 dll 是必需的。创建一个调用 NuGet.exe 下载这些包然后将二进制文件复制到所需位置的 VS 构建后步骤是否是不好的做法？它看起来不像 NuGet 的预期用途，但我看不出这种方法有任何明显的缺陷。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T06:37:34.593

我不确定这是否是一个好方法，但它可能会解决您的问题：

创建一个 NuGet 包，将有问题的 DLL 作为*content*。您的 nuspec 文件中应该有以下内容：

```
<files>
    <file src="path\to\dll\one.dll" target="content\dlls\one.dll" />
    <file src="path\to\dll\two.dll" target="content\dlls\two.dll" />
</files> 
```

在您的项目中安装此 NuGet 包时，您将获得一个文件夹*dlls*添加到项目根目录。然后，您可以转到所有包含文件的属性选项卡并将*Always*设置为*Copy to Output Directory*。

# algorithm - 行进立方体效率 - 您可以减少 3/4rs 的边缘计算？

> ID：16055829
> 
> 赞同：3
> 
> 时间：2013-04-17T09:00:40.980
> 
> 标签：algorithm, marching-cubes

正常行进立方体每个立方体找到 12 条边，但您可以为每个立方体做 3 条边，将边保存在数组中，然后再次遍历立方体，参考相邻立方体的边而不是计算它们。

Internet 上并未明确讨论引用相邻立方体的过程，因此欢迎使用行进立方体的任何人帮助查找解决方案的详细信息。你知道一个实现吗？

这是一张图片，显示了每个立方体所需的 3 个黄色边缘，而不是 12 个。

![图片](https://i.stack.imgur.com/7TfYhm.jpg)

编辑-我刚刚找到了这个解决方案，尽管它只是其中的一部分：

想象一下来自坐标最低的立方体角的 3 条边。然后所有其他边只属于其他立方体。如果我们的立方体有坐标 (x,y,z)，相邻的立方体有坐标 (x+1,y,z), (x,y+1,z), (x,y,z+1), (x +1,y+1,z), (x+1,y,z+1), (x,y+1,z+1)。你可以把边缘想象成一个向量。然后立方体的角有边缘（1,0,0），（0,1,0），（0,0,1）。坐标为 (x+1,y,z) 的立方体具有属于我们立方体的边 (0,1,0) 和 (0,0,1)。立方体 (x+1,y+1,z) 只有一条边 (0,0,1) 属于我们的立方体。因此，如果您为多维数据集存储 4 个元素，您可以像这样访问它们：

```
edge1 = cube[x][y][z][0];
edge2 = cube[x][y][z][1];
edge3 = cube[x][y][z][2];
edge4 = cube[x+1][y][z][1];
edge5 = cube[x+1][y][z][2];
edge6 = cube[x][y+1][z][0];
edge7 = cube[x][y+1][z][2];
edge8 = cube[x][y][z+1][0];
edge9 = cube[x][y][z+1][1];
edge10 = cube[x+1][y+1][z][2];
edge11 = cube[x+1][y][z+1][1];
edge12 = cube[x][y+1][z+1][0]; 
```

现在 edge7 连接哪些点？答案是 (x,y+1,z) 和 (x,y+1,z)+(0,0,1)=(x,y+1,z+1)。

现在哪些立方体 edge7 连接？它更难。我们看到坐标 z 是沿边缘变化的，这意味着 neibour 立方体具有相同的 z 坐标。现在所有其他坐标都发生了变化。在我们有 +1 的地方，立方体有很大的坐标。在我们有 +0 的地方，立方体的坐标更小。所以边连接立方体 (x,y,z) 和 (x-1,y+1,z)。其他 2 个具有相同边的立方体是 (x,y+1,z) 和 (x-1,y,z)。

-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-=-=-=--=-=

EDIT2-所以我正在这样做，它并不是那么简单。我有一个循环，它同时计算 8 个点、12 条边、边的插值、位值和边的值的顶点，所有这些都在一个循环中。

所以我在它之前做了一个新的循环来尽可能多地计算并将它放在数组中以在复杂的循环中使用。

我可以在数组中回收沿边缘的交点的插值，尽管我将不得不在复杂的循环中再次重新计算所有点，因为我用来决定引用顶点中值的位数的点的值桌子。这让我很困惑！我认为一旦我有了边缘交点值，我可以直接使用它们来获取三角形表，而无需重新计算点！

事实上没有。无论如何，这里有一些已经做过的人的信息，只要它是可读的！ [http://www.new-npac.org/projects/sv2all/sv2/vtk/patented/vtkImageMarchingCubes.cxx](http://www.new-npac.org/projects/sv2all/sv2/vtk/patented/vtkImageMarchingCubes.cxx) 滚动到这一行：立方体负责其最小面上的边缘。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-18T23:48:20.517

以您建议的方式减少边缘计算的一种简单方法是一次计算一个轴对齐平面的立方体。

如果您将所有立方体及其边保存在内存中，则只需计算每条边一次并通过索引找到相邻边会很容易。但是，由于空间要求，您通常不希望一次将所有多维数据集保存在内存中。

一个解决方案是一次计算一个立方体平面。即轴对齐的横截面，从一侧开始，向另一侧发展。然后，您一次只需要在内存中最多保留两个完整的立方体平面。当您穿过每个平面时，您可以参考前一个平面中的共享边和当前平面中先前计算的立方体。当您移动到下一个飞机时，您可以取消分配您不再需要的飞机。

**编辑**：本文讨论了我的建议： [http ://alphanew.net/index.php?section=articles&site=marchoptim&lang=eng](http://alphanew.net/index.php?section=articles&site=marchoptim&lang=eng)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T13:21:04.003

有趣，因为当我实现自己的 MC 时，我想出了类似的解决方案。

当您开始使用 MC 时，您将它们视为不同的立方体，但如果您想获得高性能，您需要将整个网格作为一个整体创建，而创建顶点索引等在这里并不容易。当您想要添加平滑的逐顶点法线时，它会变得更加有趣:)。

为了解决这个问题，我创建了一个简单的索引缓存机制来存储每个边的顶点索引。然后，对于每个计算的边缘，我有立方体位置 x、y、z 和边缘索引，我执行以下操作：

```
For each axis:
    if the edge is on '+' side of axis:
        replace edge index with its '-' side sibling
        increment cube position along axis 
```

这个简单的操作为我提供了正确的立方体位置和 0、1、2 的边缘索引。然后我通过简单的位旋转从 x,y,z,edgeIndex 值计算总缓存索引。

当我有缓存索引时，我检查它是否大于*-1*。如果是，那么在这个边缘已经有一个计算的顶点，我可以重用它。如果它是*-1*，我需要创建一个新顶点并将其索引存储在缓存中。这样，您将只计算每个顶点一次，您甚至可以添加一个在包含您的顶点的每个三角形之间共享的法线值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-02T14:03:01.643

是的，我认为我这样做类似于 kolenda。我有一个包含 5 个整数的结构：（立方体）索引和 4 个顶点索引（A、B、C、D）。

对于最内部的循环 (x)，我只有 lastXCache 和 nextXCache。在指向 -x 方向的 4 条边上，我询问是否 lastXCache.A != -1，如果是，则分配先前计算的值等。在 +x 方向上，我将计算的顶点存储在 nextXCache 中。当多维数据集完成时：lastXCache = nextXCache; 对于 y 和 z 方向，它需要是一个列表（可变数组的统一术语），下一个 y 是下一行（所以 sizex），下一个 z 是下一个平面（所以 sizex * sizey）

唯一的缺点是，这样它必须逐个运行立方体，如此连续地运行。但是您可以并行计算不同的块。

我认为可能更平行的另一种方法需要2遍：1.计算每个立方体的3条边，当1完成时-> 2.绘制三角形。

真的不知道什么更好，但它实际工作的方式似乎足够快。与统一工作更好。为 1 个块/网格创建一个 IJob。

# ios - @property objective-c 的自定义设置器/获取器

> ID：16055830
> 
> 赞同：0
> 
> 时间：2013-04-17T09:00:41.697
> 
> 标签：ios, objective-c, cocoa-touch

有一个自定义属性：

```
@property (nonatomic, readwrite) SIListVCDisplayType displayType; 
```

当我提到它时，它必须是 via `displayType`，而不是`_displayType`。为什么？我认为实例变量需要`_`在他们的名字之前有？

例如，如果我写：

```
@property (nonatomic, strong) NSArray *test; 
```

然后它工作....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:58:59.170

I would say in any case you should use self.displayType IF you use @synthesize. If not (as it would seem from the title) you should ALWAYS create your own SIListVCDisplayType in your class and name it as you please.

If you create a property called NAME, you will seem to get a _NAME parameter in class as well in most cases. This is because of how objective C works, not how you should use it. Create your own and bind it to. I see no reason at all that this type of naming and creating variables behind the scene will stay the same, so unless you find some documentation saying otherwise it might happen your code will not even compile after some update.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:10:36.563

您确定可以使用它访问属性**ivar**`displayType`吗？我试图重现您的问题，并且我使用了带有枚举类型的@property ，但我无法使用`UAProducStatus`它来访问它`displayType`，但我可以使用`_displayType`.

我能猜到的是你要么定义了局部变量或同名的 ivar，要么你有 `@synthesize displayType = displayType;`

# php - 在现有页面上使用 Socket.io 和 Node.js（使用 nginx）？

> ID：16055832
> 
> 赞同：0
> 
> 时间：2013-04-17T09:00:47.793
> 
> 标签：php, node.js, nginx, socket.io

我正在尝试使用提供一些额外数据（例如，页内聊天）的实时 API 来扩展现有网页（NGINX + PHP5 + MySQL）。

在经历了一些独立的测试脚本等之后，我实际上已经在设置一个简单的聊天示例时遇到了麻烦：Socket.io 不想工作，显然是因为依赖关系。

我试图**仅**使用 NodeJS/Socket.io作为 fdajax 的替代品——我从未打算在 nodejs 上构建我的整个（已经存在的）页面。所以，我的主要问题是，我怎样才能“实现”这两个库，并且仍然让它们工作（即使`socket.io.js`不是由 提供`nodejs`）

我当前的错误是`ReferenceError: require is not defined`，`ReferenceError: io is not defined`当包括`socket.io.js`. 显然，原因是该函数`require()`可能无法正常工作，因为 - 好吧，nodejs 没有提供整个页面，但 PHP 提供了（所以，我猜，整个 require() 的东西都不见了）。

**有人知道我如何开始`socket.io`工作，而没有让 nodejs 提供整个页面，而是仍然使用现有的 NGINX+PHP 设置吗？**

我尝试了几件事，但还没有找到好的提示。目标基本上是，仅包含`socket.io.js`（和其他必需的东西），通过指定端口（8080 或其他）连接到 nodejs 网络服务器，然后编写一些代码。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:05:34.550

**这是来自另一个答案/问题的完整示例** [https://stackoverflow.com/a/14709236/1489655](https://stackoverflow.com/a/14709236/1489655)

* * *

您可以为 websocket 流量设置代理。

```
tcp {
    upstream websockets {
        ## node processes
        server 127.0.0.1:8001;
        server 127.0.0.1:8002;
        server 127.0.0.1:8003;
        server 127.0.0.1:8004; 

        check interval=3000 rise=2 fall=5 timeout=1000;
    }   

    server {
        listen 127.0.0.1:80;
        server_name _;

        tcp_nodelay on;
        proxy_pass websockets;
    }
} 
```

来源： http: [//www.letseehere.com/reverse-proxy-web-sockets](http://www.letseehere.com/reverse-proxy-web-sockets)

这应该允许您通过以下方式连接到 socket.io

```
var socket = new io.Socket('ws://localhost'); 
```

# c# - 在工作线程中运行进程 (C#)

> ID：16055833
> 
> 赞同：0
> 
> 时间：2013-04-17T09:00:48.260
> 
> 标签：c#, shell, cmd

我正在尝试从我的应用程序内部运行几个外部应用程序。假设我想运行一个名为 LongtimeRun.exe 的应用程序 10 次，每次运行此应用程序，大约需要 30 秒才能完成（总时间为 300 秒或 5 分钟！）。我还想给用户一些进度指示（例如应用程序运行了多少次）。

我可以创建一个批处理文件并在那里运行 LongTimeRun.exe 10 次，但是我无法显示任何进度报告。

我有这个有效的代码：

```
using System.Diagnostics;
using System.IO;

public class CommandProcessor
{
        private readonly string binDirectory;
    private readonly string workingDirectory;
    public CommandProcessor(string workingDirectory, string binFolderName)
    {
        binDirectory = Path.Combine(FileSystem.ApplicationDirectory, binFolderName);
        this.workingDirectory = workingDirectory;
    }
    public int RunCommand(string command, string argbase, params string[] args)
    {
        var commandPath = Path.Combine(binDirectory, command);
        var formattedArgumets = string.Format(argbase, args);

        var myProcess = new Process();
        myProcess.EnableRaisingEvents = false;
        myProcess.StartInfo.FileName = commandPath;
        myProcess.StartInfo.Arguments = formattedArgumets;
        myProcess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
        myProcess.StartInfo.WorkingDirectory = this.workingDirectory;
        myProcess.Start();
        myProcess.WaitForExit();
    }
} 
```

当我以这种方式调用它时：

```
private void RunCommands()
{
  var command = "LongRunCommand.exe";
  string binDirectory = Path.Combine(FileSystem.ApplicationDirectory, binFolderName);
  var cp = new CommandProcessor(this.workingDirectory, binDirectory);
  for(int i=0;i<10;i++)
  {
       cp.RunCommand(Command, "-i {0}", i);
  }
 } 
```

上面的代码作为直接调用的一部分被调用并阻塞了应用程序（应用程序似乎在此过程中挂起。

为了解决挂起问题，我使用了一个后台工作者，如下所示：

```
 var worker = new BackgroundWorker();
   worker.DoWork += this.WorkerDoWork;
   worker.RunWorkerCompleted += this.workerRunWorkerCompleted;
   worker.RunWorkerAsync(); 
```

并在 WorkerDoWork 中调用 runco​​mmand。

现在应用程序在调用此行后退出：

```
 myProcess.WaitForExit(); 
```

没有调试信息，退出代码为 -1。

问题是什么，如何解决？

有没有更好的方法可以在不使用 BackgroundWorker 的情况下实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:30:16.027

您遇到的问题是因为您的`BackgroundWorker`线程仍在运行，但您的应用程序完成了它的生命周期并结束（它没有被它们阻塞，因此它的路径很清楚结束）因此杀死了这些线程。

您需要通知应用程序**不要**在后台线程仍在运行时退出。您可以有一个计数器，在每个线程启动时递增，然后当它们完成时，它们可以递减计数器。

在您的主应用程序线程中，您可以等到计数器达到零后再结束应用程序。

显然，您需要考虑锁定（即两个线程同时尝试递减计数器），但这应该给您一个入门。

# php - 在 MySQL 数据库中保存唯一的随机订单号

> ID：16055836
> 
> 赞同：-2
> 
> 时间：2013-04-17T09:00:52.690
> 
> 标签：php, mysql, sql, database

我有这个 PHP 代码，它将生成一个随机的 6 个字母的订单号：

```
<?php 
$random = mt_rand(100000,999999); 
echo $random;
?> 
```

我可以在我的数据库中插入这个号码，但我如何确保没有重复，并且订单号是唯一的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:03:43.977

您可以将数据库列设为唯一。还可以在插入检查该列是否已经具有该值之前进行仔细检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:04:26.900

您应该在数据库中的该字段上简单地创建 UNIQUE INDEX。生成数字，检查它是否存在于db中，如果存在，重试直到不存在。

您应该确保随机密钥的地址空间没有太多填充，否则生成没有冲突的新密钥将变得太慢。

只要行数少于可能的地址空间的 10%，这种方法就可以正常工作。但是如果达到 50% 或更多，那将是相当糟糕的。

您还可以创建一些创造性的方案来尝试保留迄今为止未使用的密钥列表，但这可能太复杂了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:07:21.527

将数字设置为唯一索引，并在发现重复项时捕获错误。或者只是使用 MySQL 函数 RAND() 来生成数字，然后检索该值。

您可以在单个 INSERT 语句中执行此操作。像这样的东西（虽然这个特定的例子随着行数的增加而显着减慢）

```
INSERT INTO numbers (SomeNumber)
SELECT aNum
FROM (SELECT a.i+b.i*10+c.i*100+d.i*1000+e.i*10000 AS aNum
FROM integers a, integers b, integers c, integers d, integers e) Sub1
LEFT JOIN Numbers ON Sub1.aNum = Numbers.SomeNumber
WHERE Numbers.SomeNumber IS NULL
ORDER BY RAND()
LIMIT 1 
```

或者效率更高，但可能不会插入任何行（它会生成 10 个随机数并选择一个未插入的随机数），因此您需要检查受影响的行，如果为 0，请重试：-

```
INSERT INTO numbers (SomeNumber)
SELECT aNum
FROM (SELECT ROUND(RAND() * 899999) + 100000 AS aNum
UNION SELECT ROUND(RAND() * 899999) + 100000 AS aNum
UNION SELECT ROUND(RAND() * 899999) + 100000 AS aNum
UNION SELECT ROUND(RAND() * 899999) + 100000 AS aNum
UNION SELECT ROUND(RAND() * 899999) + 100000 AS aNum
UNION SELECT ROUND(RAND() * 899999) + 100000 AS aNum
UNION SELECT ROUND(RAND() * 899999) + 100000 AS aNum
UNION SELECT ROUND(RAND() * 899999) + 100000 AS aNum
UNION SELECT ROUND(RAND() * 899999) + 100000 AS aNum
UNION SELECT ROUND(RAND() * 899999) + 100000 AS aNum) Sub1
LEFT JOIN Numbers ON Sub1.aNum = Numbers.SomeNumber
WHERE Numbers.SomeNumber IS NULL
LIMIT 1 
```

通过这两个示例，您可以检索插入行的 id，然后从中选择插入的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:08:03.607

```
<?php 
$random = mt_rand(100000,999999); 
echo $random;
$sql ="SELECT FROM table where ordernumber=$random";
$result = mysqli_query($conn,$sql);
if(mysqli_num_rows($result)>0){
// regenerate random number 
}
else{
//insert here
}
?> 
```

但这不是好方法，而是使用自动增量

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-17T09:05:43.643

在插入之前检查该数字是否存在于数据库中。如果是，则生成另一个随机数并再次进行检查，依此类推。但我建议您使用该`auto increment`功能来做同样的事情

# javascript - 如果使用 Jquery 检查了 Aleady，需要帮助取消选中单选按钮

> ID：16055839
> 
> 赞同：4
> 
> 时间：2013-04-17T09:00:56.587
> 
> 标签：javascript, jquery, html, forms, radio-button

如果按钮已选中，我需要帮助取消选中或选中相同的单选按钮吗？我有用于启用或禁用其他单选按钮的 jquery 功能，如果现在已经选中我想添加一些用于检查或取消选中相同单选按钮的功能？

```
(function ($) {
  $(document).ready(function () {
    $('input:radio').click(function(){
      var $inputs = $('input:radio')

      if($(this).is(':checked')){
        $inputs.not(this).prop('disabled',true);
      }else{
        $inputs.prop('disabled',false); 
      }
    })

  });
})(jQuery);

<input type="radio" value="Test1" />Test1
<input type="radio" value="Test2" />Test2
<input type="radio" value="Test1" />Test1
<input type="radio" value="Test2" />Test2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-10-02T04:46:17.670

虽然现在回答为时已晚，但它可以帮助
我尝试过这个解决方案的其他人。
对我来说效果很好！

```
$("input[type='radio'].myClass").click(function(){
        var $self = $(this);
        if ($self.attr('checkstate') == 'true')
        {
            $self.prop('checked', false);
            $self.each( function() {
                $self.attr('checkstate', 'false');
            })  
        }
        else
        {
            $self.prop('checked', true);
            $self.attr('checkstate', 'true');
            $("input[type='radio'].myClass:not(:checked)").attr('checkstate', 'false');
        }
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T09:02:31.377

只需替换`disabled`为`checked`：

```
$input.prop("checked", false); 
```

或`this`元素：

```
this.checked = false; 
```

但是，如果您正在寻找可以选中和不选中的表单元素，也许`input type="checkbox" />`就是您所需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:03:47.320

```
$inputs.filter(':checked').prop('checked', false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T10:23:10.667

我认为您需要复选框而不是单选按钮来取消选中选中：

```
<input class="checkDisable" type="checkbox" value="Test1" />Test1
<input class="checkDisable" type="checkbox" value="Test2" />Test2
<input class="checkDisable" type="checkbox" value="Test3" />Test3
<input class="checkDisable" type="checkbox" value="Test4" />Test4

(function ($) {
$(document).ready(function () {
 $('input:checkbox.checkDisable').change(function(){
    var $inputs = $('input:checkbox.checkDisable')
    if($(this).is(':checked')){
        $inputs.not(this).prop('disabled',true);
    }else{
        $inputs.prop('disabled',false); 
        $(this).prop('checked',false);
    }
 })

});
})(jQuery); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-01T08:49:27.610

[Pablo Araya](https://stackoverflow.com/a/52602175/2359227)的回答很好，但是......

```
$self.prop('checked', true); 
```

在这里是多余的。单选按钮在每次点击时都处于选中状态。

# arduino - Arduino Nano：是否支持 SPI？

> ID：16055842
> 
> 赞同：5
> 
> 时间：2013-04-17T09:01:00.920
> 
> 标签：arduino, spi

可以使用 Arduino Nano 上的 SPI 硬件吗？

在[Nano 页面上](http://arduino.cc/en/Main/ArduinoBoardNano)，它说：

> SPI：10（SS）、11（MOSI）、12（味噌）、13（SCK）。这些引脚支持 SPI 通信，虽然由底层硬件提供，但目前不包含在 Arduino 语言中。

然而有一个[SPI 库](http://arduino.cc/en/Reference/SPI)。

请问有人能解释一下这个矛盾吗？我想，要么

*   纳米页面已过时
*   Nano SPI 硬件不支持 SPI 库，但在其他板上受支持
*   SPI 库仅在软件中为 Nano 实现

它是哪一个？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T02:36:52.840

正确答案是“以上的某种组合”：

*   Arduino Nano 基于 ATmega168/328 芯片，在硬件上支持 SPI。
*   SPI 库仅支持硬件 SPI（无论 Arduino 型号如何）。请注意，您可以 bitbang（相对）慢速 SPI 没有任何问题，这将是一个相对简单的软件实现。
*   SPI 库的状态应被视为与[Wire 库](http://wiring.org.co/reference/libraries/Wire/index.html)的状态相同：不是核心 Arduino 服务的一部分（与 PWM、ADC 和数字 GPIO 相比），但仍然得到广泛支持。

因此，您的多项选择题中最接近的答案可能是“过时”。SPI 的状态应该与 I2C 的状态相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-31T15:51:43.060

*这应该是评论，但我没有代表。*

正如 angelatlarge 所说，SPI 库对 Nano 的支持与对任何其他 Arduino 的支持一样。除了：

Nano（与所有 Arduino 一样）有一个连接到数字引脚 13 的 LED。由于对于 Nano，引脚 13 也是 SPI 的 SCLK，因此您很可能会遇到高波特率的麻烦。如果这对您来说是个问题，请尝试移除 LED。

来自 Nano 的页面：*[来源](http://arduino.cc/en/Main/arduinoBoardNano)*

> ...
> 
> *   SPI：10（SS）、11（MOSI）、12（味噌）、13（SCK）。这些引脚支持 SPI 通信，虽然由底层硬件提供，但目前不包含在 Arduino 语言中。
>     
>     
> *   LED：13。有一个内置LED连接到数字引脚13。当引脚为高电平时，LED亮，当引脚为低电平时，它关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-20T14:05:54.740

Nano 的产品页面已经过时，但它与其他基于 ATmega168/ATmega328p 的 Arduino 具有相同的硬件**和软件SPI 支持。**

Wayback 机器中的一些考古显示，在 2010 年 9 月 15 日至 26 日期间，功能类似的 Duemilanove 的产品页面已从提及硬件而非软件更改为提及 SPI 库支持。当 Uno 出现时，其产品页面是基于 Duemilanvoe 当时的状态，所以它一直声称支持。

Nano 页面应该进行了相应的更新，但这似乎被忽略了。

# c# - 使用 C# 处理 - 完整实现

> ID：16055843
> 
> 赞同：2
> 
> 时间：2013-04-17T09:01:01.550
> 
> 标签：c#, dispose, using

在实现 IDisposable 的类中的 MemoryStream 对象上使用“使用”后，如何实现 Dispose 方法？

```
public class ControlToByte :IDisposable
{
    public static byte[] GetByte(object control)
    {
        using (System.IO.MemoryStream memoryStream = new System.IO.MemoryStream())
        { //do something here  } 
public void Dispose()
    {
       //how do you dispose of memorystream object?
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T09:02:45.957

您不必实现`IDispose`，也不必`Dispose`显式调用。该[`using`](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.110%29.aspx)块将确保在完成`MemoryStream`后将被处置。`using`块实际上像`try/finally`块一样工作。就像是：

```
{
    System.IO.MemoryStream memoryStream = null;

    try
    {
        memoryStream = new System.IO.MemoryStream();
        //....your code
    }
    finally
    {
        if (memoryStream != null) //this check may be optmized away
            memoryStream.Dispose();
    }
} 
```

[使用 C#](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.110%29.aspx)

> using 语句可确保**调用 Dispose，即使在**调用对象上的方法时发生异常也是如此。您可以通过将对象放在 try 块中，然后**在 finally 块中调用 Dispose**来获得相同的结果；事实上，这就是编译器翻译 using 语句的方式。

在您当前的代码中，您正在`IDisposable`您的类上实现`ControlToByte`，如果您想在`ControlToByte`. 如图所示，您不需要`IDisposable`为您的类实现。

# spring - 基于属性文件中配置的Spring动态服务提供者注入

> ID：16055845
> 
> 赞同：1
> 
> 时间：2013-04-17T09:01:08.137
> 
> 标签：spring, spring-mvc

我有多个互斥数据源，我想根据配置文件中定义的属性配置将哪个实现注入/自动装配到控制器中。

我正在考虑类似@Qualifier 的东西，但我不是弹簧专家，所以无法弄清楚机制。

目的是避免产生复杂的 if/else。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:14:16.853

您可以使用`context:property-placeholder`and来解决问题`@Qualifier`。

它将如下所示：

**应用程序属性**

```
some.implementation=com.example.MyServiceImpl 
```

**弹簧上下文文件**

```
<context:property-placeholder
        location="classpath:/app.properties"/>

<bean id="myService" class="${some.implementation}" /> 
```

**控制器**

```
@Autowired
@Qualifier("myService")
private MyService myService; 
```

作为相反的解决方案：您可以将bean ID保存在属性文件中，并在其中使用它`@Qualifier`

```
@Qualifier("${some.implementation.bean.id}") 
```

但是如果您使用的是 Spring 3.1+，那么您可能需要查看[Profiles](http://blog.springsource.com/2011/02/14/spring-3-1-m1-introducing-profile/)机制。

# matlab - Matlab GUI：绘制从它们应该的位置偏移的线

> ID：16055847
> 
> 赞同：0
> 
> 时间：2013-04-17T09:01:12.330
> 
> 标签：matlab, matlab-guide

我有一个关于我的 GUI 的问题已经困扰了我几个小时，但我无法修复它。功能：我加载图像，对其进行子集化并将其绘制为冲浪图。然后我启动一个 GUI，它让我可以选择矩形的左上角和右下角坐标。矩形被绘制到冲浪图上。

我有两个问题：我想用红色小块表示鼠标点击，用红线表示矩形。

1）小红块工作正常，除了第一个非常大并且几乎填满了整个绘图窗口。一旦我为第一个坐标选择第二个点，一切都会恢复正常，并且补丁会以我希望它们的小方式绘制。我调试了代码以查看坐标是否有问题，但它们似乎没问题！

2）线条的绘制不准确！尤其是前几行，鼠标点击最多偏移 100 个像素，通常在左侧。有时它们甚至在添加下一行时会四处移动。以这种方式放置几个矩形后，它们通常会变得更好并且就位。知道这是为什么吗？这是代码：

```
function resampdem
clc;clear;clear all

%% read DEMs and header
img1 = imread('srtm_55_06.tif');

% subset
img1 = img1(1:500,1:500);
[x y] = meshgrid(1:500,1:500);

%%
f = figure;
imageHandle = surfl(x,y,img1);
colormap jet
shading interp
view(0,90);
set(imageHandle,'ButtonDownFcn',@ImageClickCallback)
hold on

a = axes;
set(a, 'Visible', 'off');

%# Create controls.
uicontrol('Parent', f, 'Style', 'edit', 'String', 'Input...');

m = 1;
bin = [];

%%%  Funktion zur Auswertung des Mouseklicks
helpdlg('Corner: Upper Left');
    function ImageClickCallback ( objectHandle , eventData )

%         if mod(m,2) == 0
%             string = 'Upper Left';
%         else
%             string = 'Lower Right';
%             
%         end
%         message = sprintf('Corner: %s',string);
%         helpdlg(message);

        axesHandle  = get(objectHandle,'Parent');
        coordinates = get(axesHandle,'CurrentPoint');
        coordinates = coordinates(1,1:2);

        bin(m,1) = coordinates(1)

        bin(m,2) = coordinates(2)

        patch([bin(m,1)-3 bin(m,1)+3 bin(m,1)+3 bin(m,1)-3], [bin(m,2)+3 bin(m,2)+3 bin(m,2)-3 bin(m,2)-3],'r','Parent',a);

        if mod(size(bin,1),2) == 0
            resamp_area(bin,m);
        end
        m = m+1
    end

%%%  Funktion zum Zeichnen der Rechtecke
    function resamp_area(coords,m)

        x1 = coords(m-1,1);
        x2 = coords(m,1);
        y1 = coords(m-1,2);
        y2 = coords(m,2);

        patch([x1 x1+20 x1+20 x1], [y1 y1 y1-20 y1-20],'w','Parent',a);
        %horizontal lines
        line([x1, x2], [y1, y1], 'Parent', a, 'Color',[1 0 0], 'LineWidth',2.0);
        line([x1, x2], [y2, y2], 'Parent', a, 'Color',[1 0 0], 'LineWidth',2.0);
        %vertical lines
        line([x1, x1], [y1, y2], 'Parent', a, 'Color',[1 0 0], 'LineWidth',2.0);
        line([x2, x2], [y1, y2], 'Parent', a, 'Color',[1 0 0], 'LineWidth',2.0);
        %get(t)

    end    

end 
```

# php - PHP - 包含文件时使路径相对

> ID：16055848
> 
> 赞同：0
> 
> 时间：2013-04-17T09:01:12.557
> 
> 标签：php, include, relative-path

在站点根目录中，我有以下文件夹和文件：

![在此处输入图像描述](https://i.stack.imgur.com/DjX2P.jpg)

文件包含/scripts.php 包含指向其余页面运行所需的所有 css/js 文件的链接。从站点根目录中的任何文件（例如 cart.php）中包含 scripts.php 时，所有路径都可以正常工作。但是，当从文件夹（例如 /admin）中包含时，路径不正确，显然是因为 /admin 中没有 /js 或 /css 目录。

我尝试了几件事，例如将 scripts.php 中的路径从 '../css/styles.css' 更改为 ./css/styles.css 或只是 /css/styles.css ，但这没有用。也试过`include($_SERVER["DOCUMENT_ROOT"] . "includes/scripts.php");`但也没有成功。

如何在 scripts.php 中设置相对路径，以便无论它来自何处，所有 css/js 路径都是正确的并且与站点根目录相关？

这是 scripts.php 中一些链接文件的示例：

```
<script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.9.2.custom.min.js"></script>
<script type="text/javascript" src="js/jquery.alerts.js"></script> 
<script type="text/javascript" src="js/cookie.js"></script> 
<link rel="stylesheet" type="text/css" href="css/styles.css">
<link rel="stylesheet" type="text/css" href="css/layout.css"> 
```

ETC...

**编辑：**我看到大多数答案都理所当然地认为文件托管在 UNIX 环境中，这是不正确的，它是在 Windows/Apache 设置上开发的，完成后将托管在 UNIX 服务器上。所以我需要一个适用于两个系统的解决方案，这样我在编辑/上传文件到实时服务器时都不需要更改代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T09:03:55.437

## 包含在 PHP 中

### 方法 1 - 使用常量

`ROOTDIR`在包含任何其他文件之前，在您的一个根文件（例如 index.php，或创建一个始终在任何其他包含之前相对包含的文件）中创建一个常量（例如）：

```
//Place this in a file you always include relatively
define("ROOTDIR", dirname(__FILE__) . "/"); 
```

无论您在哪里包含东西：

```
//Place this in whatever file
require_once(ROOTDIR . "admin/panels/users.php"); 
```

* * *

### 方法 2 - 使用 set_include_path

或者，在同一个文件中，您可以[`set_include_path`](http://php.net/manual/en/function.set-include-path.php)这样使用，而不是常量：

```
//Place this in a file you always include relatively
set_include_path(dirname(__FILE__) . "/"); 
```

当你包括东西时：

```
//Place this in whatever file
require_once("admin/panels/users.php"); 
```

* * *

### 方法 3 - 通过 PHP 配置

如果您宁愿没有常量并且`set_include_path`可以访问 PHP 配置文件，您也可以[`include_path`](http://www.php.net/manual/en/ini.core.php#ini.include-path)将配置更改为例如。`/var/www/`，然后`require_once`在包含文件时简单地使用上面。[更多关于这里](http://www.php.net/manual/en/ini.core.php#ini.include-path)的信息。

* * *

## 但是包含脚本和样式表呢，h2ooooooo？

好吧，我知道你会参与其中。我通常倾向于做的是通过以以下方式启动相对于 root 的路径`/`：

```
<script type="text/javascript" src="/js/jquery-1.8.0.min.js"></script>
<!--                                ^                     --> 
```

或者您也可以[`<base>`](https://developer.mozilla.org/en/docs/HTML/Element/base)在 HTML 中设置路径：

```
<head>
    <base href="http://www.mydomain.com/" />
    <script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>
</head> 
```

***注意：**设置`<base>`路径时，它还指定所有链接也将相对于基本路径，因此如果您在管理文件夹中有指向`subdir/`它的链接，则链接将链接到`http://www.mydomain.com/subdir/`而**不是** `http://www.mydomain.com/admin/subdir/`.*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:07:20.443

请进行以下更改，而不是 include($_SERVER["DOCUMENT_ROOT"] . "includes/scripts.php");

```
<script type="text/javascript" src="<?php echo $_SERVER["DOCUMENT_ROOT"];?><js/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="<?php echo $_SERVER["DOCUMENT_ROOT"];?>js/jquery-ui-1.9.2.custom.min.js"></script>
<script type="text/javascript" src="<?php echo $_SERVER["DOCUMENT_ROOT"];?>js/jquery.alerts.js"></script> 
<script type="text/javascript" src="<?php echo $_SERVER["DOCUMENT_ROOT"];?>js/cookie.js"></script> 
<link rel="stylesheet" type="text/css" href="<?php echo $_SERVER["DOCUMENT_ROOT"];?>css/styles.css">
<link rel="stylesheet" type="text/css" href="<?php echo $_SERVER["DOCUMENT_ROOT"];?>css/layout.css"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:27:43.400

**解决方案 1：**`base`在您的 html 中 使用标签`<head>`，注意：这将影响所有相关链接

```
<base href="http://yoursite.com/" /> 
```

**解决方案 2：** 在 htaccess 文件中定义环境变量

```
SetEnv MYSITE_URL http://yoursite.com/ 
```

然后在您的 html 中回显该环境变量

```
<script type="text/javascript" src="<?php echo getenv('MYSITE_URL'); ?>js/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="<?php echo getenv('MYSITE_URL'); ?>js/jquery-ui-1.9.2.custom.min.js"></script>
... 
```

**解决方案 3：** 与解决方案 2 类似，但使用您的站点 url 创建一个 php 常量并将其回显到您的 html

**解决方案 4：** 从您的资产路径开始`/`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-19T16:00:49.073

尝试使用这些功能，但你需要将它放在根文件夹中，如果你需要它

```
function($_file){
php_uname();
$server_info = PHP_OS; // get host os info
$os = strtoupper(substr(PHP_OS, 0, 3));
if($os === 'WIN'){
    $path = dirname( $file );
    $p = explode(':',$path);
    return str_replace(array('\\','\\'), array('/','/'), $p[1]); //return the absolute path
}else{
    return dirname( $file );
}
} 
```

例子：

```
include get_path(__DIR__).path/to/asset/file.js 
```

# postgresql - 如何在 PostgreSQL / pgAdmin III 中将 bytea 数据打印为十六进制字符串？

> ID：16055849
> 
> 赞同：45
> 
> 时间：2013-04-17T09:01:17.563
> 
> 标签：postgresql, hex, pgadmin

我的数据库中有一个相当短的（14 字节）`bytea`数据列。我想将其打印为十六进制字符串。

我怎么做？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-04-17T09:01:17.563

基于[**这个答案**](https://stackoverflow.com/a/3103416/900130)，我发现我的解决方案是

```
SELECT encode(my_column::bytea, 'hex') FROM my_table; 
```

# html - 如何将 CSS 应用于 2x2 类？

> ID：16055852
> 
> 赞同：0
> 
> 时间：2013-04-17T09:01:20.967
> 
> 标签：html, css, html-table

我有`HTML`5x5 单元格的表格。当悬停在任何`<td>`我需要更改 4 个单元格的 2x2 块的背景时。这是更改当前行背景的代码。

```
td.1:hover, td.1:hover + td.1 {
    background:#eee;
} 
```

我不知道如何像这样更改行中的背景：

![http://i.stack.imgur.com/pezGA.png](https://i.stack.imgur.com/YGvGM.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:11:48.313

仅使用 CSS，您只能影响 TD 的孩子或下一个兄弟姐妹。即，您可以将背景扩展到您悬停的那个旁边的 TD，但不能在另一行上。

为了做你想做的事，你必须使用 JavaScript，因为你需要在 DOM 上来回走动，这是 CSS 不允许你做的事情。

例如，要使用 jQuery 执行此操作，请尝试以下操作：

```
$('td').hover(function () {
    var t = $(this),
        index = t.index(); // the position of the TD in the row, so you can find the one below it
    t.addClass('hovered'); // apply hovered class to this TD...
    t.next().addClass('hovered'); // ...and to the TD next to it...
    t.closest('tr').next().find('td:eq(' + index + ')').addClass('hovered').next().addClass('hovered'); // ...and to the 2 below
}, function () {
    // remove the hovered class when no longer hovering
    $(this).closest('table').find('td').removeClass('hovered');
}); 
```

在您的 CSS 中，为您想要的“悬停”类提供任何样式。

[**演示 1**](http://jsfiddle.net/FXy5J/)

**但是，如果您希望每次将鼠标悬停在表格中的任何 TD 上时都更改完全相同的 4 个 TD 的背景，则可以纯粹使用 CSS 来完成**。只需为要突出显示的 4 个单元格命名。例如，我们称这个类为“block2x2”。那么你的CSS是：

```
table:hover .block2x2 {
    background: #eee; // whatever background style you want
} 
```

[**演示 2**](http://jsfiddle.net/tycZL/)

# cuda - openacc 在拆分大数据时说分段错误

> ID：16055859
> 
> 赞同：0
> 
> 时间：2013-04-17T09:01:42.117
> 
> 标签：cuda, bigdata, openacc

由于我在 GPU 中有要 malloc 的大数据，因此我必须将其拆分。如下所示，将 temp1 和 temp2 从头到尾拆分一次：

```
for (int start = 0; start < total; start += step) {
    int end = start + step > total?total:start+step;
    fprintf(stderr, "total %ld start :%ld end :%ld\n", total, start, end);

    #pragma acc data pcopyin(sum[0:n_sample], num[0:n_sample*total], lognn[0:preFact])
    #pragma acc data copy(temp1[start*n_array1:end*n_array1], temp2[start*n_array2:end*n_array2])
    #pragma acc kernels loop independent
    for (int index = start; index < end; ++index) {
                unsigned long long * t1 = temp1 + index * n_array1;
                unsigned long long * t2 = temp2 + index * n_array2;
               // fprintf(stderr, "use %d\t", index*n_array1);
                int k = count / 32;
                int l = count / 64;
                t1[k] <<= 2;
                t2[l] <<= 1;
                int x = num[index * n_sample + i];
                int y = num[index * n_sample + j];
     }
} 
```

但是当第一个循环完成并开始运行第二个循环时，我总是被告知分段错误。索引 var 应该是 [0:end-start] 吗？还是应该在循环完成时进行一些同步？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:15:18.383

数据子句不必**是**[0:end-start]。下界和上界可以是表达式。但是，您必须确保 lower_bound < upper_bound

# dynamic - 以编程方式添加的复合组件内的数据表

> ID：16055863
> 
> 赞同：1
> 
> 时间：2013-04-17T09:02:01.530
> 
> 标签：dynamic, jsf-2, primefaces, facelets, composite-component

参考我之前的问题（以[编程方式在支持 bean 中创建和添加复合组件](https://stackoverflow.com/questions/15828540/programmatically-create-and-add-composite-component-in-backing-bean)），我已经成功地能够从支持 bean 添加复合组件。现在我有一个新问题，因为其中包含惰性数据表的复合组件根本不调用 load() 方法。有关于此的错误报告（[https://code.google.com/p/primefaces/issues/detail?id=3258](https://code.google.com/p/primefaces/issues/detail?id=3258)）但被标记为与 PF3.0.RC1 相关，我不知道是否是修复了我正在使用的 3.5 版。

我正在使用完全相同的代码 BalusC，可以将值表达式添加到复合组件：

```
public void includeCompositeComponent(UIComponent parent, String libraryName, String resourceName, String id, Map<String, String> valueExpressions) {
    ...
    if (!valueExpressions.isEmpty()) {
        ExpressionFactory factory = application.getExpressionFactory();
        ELContext ctx = context.getELContext();
        for (Map.Entry<String, String> entry : valueExpressions.entrySet()) {
            ValueExpression expr = factory.createValueExpression(ctx, entry.getValue(), String.class);
            composite.setValueExpression(entry.getKey(), expr);
        }
    } 
    ...
} 
```

这是我的复合组件 testDatatable.xhtml：

```
<cc:interface>
    <composite:attribute name="model" required="true" type="org.primefaces.model.LazyDataModel"/>
    <composite:attribute name="id" default="dataTable"/>
</cc:interface>
<cc:implementation>
    <h:form id="dataTableForm">    
        <p:dataTable id="#{cc.attrs.id}" value="#{cc.attrs.model}" var="test" paginator="true" rows="10"
                     paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                     rowsPerPageTemplate="5,10,15,20" lazy="true">
            <p:column>
                <h:outputText value="#{test.car.model}"/>
            </p:column>
         </p:dataTable>
    </h:form>
</cc:implementation> 
```

这是从支持 bean 创建复合组件的过程：

```
Map<String, String> v = new HashMap<String, String>();
v.put("model", "#{testBean.lazyModel}");
addCompositeComponent(rootPanel, "comp", "testDatatable.xhtml", "table", v); 
```

这是我在@PostConstruct 中加载的惰性数据模型

```
pulic class TestBean {
    private TestLazyDataModel<TestClass> lazyModel;

    @PostConstruct
    public void init() {
        lazyModel = new TestLazyDataModel();
    }

    public TestLazyDataModel<TestClass> getLazyModel() {
        return lazyModel;
    }

    class TestLazyDataModel extends LazyDataModel<TestClass> {
        @Override
        public List<TestClass> load(int first, int pageSize, String sort, SortOrder sortOrder, Map<String, String> filters) {
            List<TestClass> ret = new ArrayList<TestClass>();
            TestClass t = new TestClass();
            Car c = new Car("Volvo");
            t.setCar(c);
            ret.add(t);
            return ret;
        }
    }
} 
```

还有一些辅助类：

```
public class TestClass {
    private Car car;

    public void setCar(Car car) {
        this.car = car;
    }

    public Car getCar() {
        return car;
    }
}

public class Car {
    public String model;

    public Car(String model) {
        this.model = model;
    }

    public String getModel() {
        return model;
    } 
} 
```

总之，现在打开页面：

1.  bean 创建惰性数据模型 ok
2.  从复合组件中正确获取惰性数据模型
3.  当数据表尝试遍历其中的项目时，错误：类'java.lang.String'没有属性'car'

也将其更改`<h:outputText value="#{test.car.model}"/>`为`<h:outputText value="#{test.class.name}"/>`java.lang.String 但这次不会崩溃。调试时，永远不会调用 TestLazyDataModel 的 load() 方法。

更奇怪的是，如果我使用来自任何其他 xhtml 页面的相同复合组件，例如：

```
<comp:testDatatable model="#{anotherBean.model}"> 
```

它工作正常。我错过了什么？这是否与组件的渲染顺序有关？非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:46:34.813

刚刚开始工作.. 更改复合组件值表达式包含代码以使用 Object.class 而不是 String.class：

```
public void includeCompositeComponent(UIComponent parent, String libraryName, String resourceName, String id, Map<String, String> valueExpressions) {
    ...
    if (!valueExpressions.isEmpty()) {
        ExpressionFactory factory = application.getExpressionFactory();
        ELContext ctx = context.getELContext();
        for (Map.Entry<String, String> entry : valueExpressions.entrySet()) {
            ValueExpression expr = factory.createValueExpression(ctx, entry.getValue(), Object.class);
            composite.setValueExpression(entry.getKey(), expr);
        }
    } 
    ...
} 
```

成功了。希望这对其他人也有帮助！

# php - Wordpress：使用页面作为“块”来调用模板

> ID：16055867
> 
> 赞同：0
> 
> 时间：2013-04-17T09:02:19.237
> 
> 标签：php, wordpress

有时我需要在模板中插入一个文本（和图像）的“块”，这些文本（和图像）必须可由后端的客户端编辑（他们显然无法编码）。为了解决我曾经在后端创建一个新页面并简单地在模板中调用它：

```
<?php
$block = get_page( $id ); 
echo '<h3>'. $block->post_title .'</h3>';
echo apply_filters('the_content', $block->post_content);
?> 
```

然后，由于该页面不是不能作为单页显示的标准页面，因此我将其设置为`Visibility=Private`SEO`no index`插件。

这是做我需要的正确方法吗？还是有更好的？告诉我，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:13:22.807

与所有的 Wordpress 一样，有不同的方法可以做到这一点，具体取决于您在定制客户体验方面想要走多远。解决此问题的一种简单方法是[将模板的该区域转换为接受小部件的区域，](http://codex.wordpress.org/Widgetizing_Themes#Another_complete_example)然后添加一个[插件以提供支持富文本编辑的小部件](http://wordpress.org/extend/plugins/black-studio-tinymce-widget/)。然后，您的客户可以通过小部件界面简单地编辑文本和图像。

听起来您已经在编辑模板文件，所以上面的链接直接将您带到 functions.php 和您的模板文件中需要的代码。但是，如果您需要更多背景知识，还请阅读有关[子主题](http://codex.wordpress.org/Child_Themes)的文档。

# mongodb - 与 skip() 和 limit() 一起使用的 Distinct() 命令

> ID：16055868
> 
> 赞同：6
> 
> 时间：2013-04-17T09:02:20.250
> 
> 标签：mongodb, mongodb-java, spring-data-mongodb

我的 MongoDB 集合中有这些项目：

```
{x: 1, y: 60, z:100}
{x: 1, y: 60, z:100}
{x: 1, y: 60, z:100}
{x: 2, y: 60, z:100}
{x: 2, y: 60, z:100}
{x: 3, y: 60, z:100}
{x: 4, y: 60, z:100}
{x: 4, y: 60, z:100}
{x: 5, y: 60, z:100}
{x: 6, y: 60, z:100}
{x: 6, y: 60, z:100}
{x: 6, y: 60, z:100}
{x: 7, y: 60, z:100}
{x: 7, y: 60, z:100} 
```

我想查询 x 的不同值（即**[1, 2, 3, 4, 5, 6, 7]**）......但我只想要其中的一部分（类似于我们可以使用 skip(a)和限制（b））。

我如何使用 MongoDB 的 java 驱动程序（或者如果可能的话使用 spring-data-mongodb）来做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T09:16:29.693

在 mongo shell 中使用聚合框架很简单：

```
db.collection.aggregate([{$group:{_id:'$x'}}, {$skip:3}, {$limit:5}]) 
```

对于 java 外观：[在 java 中使用聚合框架](http://docs.mongodb.org/ecosystem/tutorial/use-aggregation-framework-with-java-driver/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-07T17:29:53.390

根据您的用例，您可能会发现这种方法比聚合更高效。这是一个 mongo shell 示例函数。

```
function getDistinctValues(skip, limit) {

    var q = {x:{$gt: MinKey()}}; // query
    var s = {x:1};               // sort key

    var results = [];

    for(var i = 0; i < skip; i++) {
        var result = db.test.find(q).limit(1).sort(s).toArray()[0];
        if(!result) {
            return results;
        }
        q.x.$gt = result.x;
    }

    for(var i = 0; i < limit; i++) {
        var result = db.test.find(q).limit(1).sort(s).toArray()[0];
        if(!result) {
            break;
        }
        results.push(result.x);
        q.x.$gt = result.x;
    }

    return results;

} 
```

我们基本上只是一次找到一个值，使用查询和排序来跳过我们已经看到的过去的值。您可以通过添加更多参数来轻松改进这一点，以使函数更加灵活。此外，在要为其查找不同值的属性上创建索引将提高性能。

一个不太明显的改进是一起跳过“跳过”阶段并指定一个要继续的值。这是一个 mongo shell 示例函数。

```
function getDistinctValues(limit, lastValue) {

    var q = {x:{$gt: lastValue === undefined ? MinKey() : lastValue}}; // query
    var s = {x:1};               // sort key

    var results = [];

    for(var i = 0; i < limit; i++) {
        var result = db.test.find(q).limit(1).sort(s).toArray()[0];
        if(!result) {
            break;
        }
        results.push(result.x);
        q.x.$gt = result.x;
    }

    return results;

} 
```

如果您决定使用聚合技术，请确保在 $group 阶段之后添加一个 $sort 阶段。否则，您的结果将不会以可预测的顺序显示。

# javascript - 转换属性 jquery

> ID：16055869
> 
> 赞同：0
> 
> 时间：2013-04-17T09:02:23.930
> 
> 标签：javascript, jquery, html, css

```
$(document).ready(function(){
      $('#space').css({
            '-webkit-transform': 'scale(2,3)',
        });
        $('#space').css({
            '-webkit-transform': 'skew(30deg,20deg)',
        });
      });

CSS
 #space{transition:duration:20s;} 
```

使用上面的 Jquery，我希望 scale 属性在前 20 秒内运行，然后在接下来的 20 秒内运行 skew 属性，但在这里它只会倾斜。我想为下一条语句提供 20 秒的延迟，但是还有其他简单的方法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:27:49.237

您不能`.delay()`用于 CSS 属性。相反，您可以尝试使用该`setInterval()`函数根据您想要的一组预定义转换逐步向您的元素添加转换。我在这里做了一个小提琴 - [http://jsfiddle.net/teddyrised/5AqCm/](http://jsfiddle.net/teddyrised/5AqCm/)

这个答案是在您最终想要缩放*和*倾斜元素的最终状态的假设下做出的。

让我稍微解释一下我的代码：

```
$(document).ready(function () {
    var $spce = $("#space"),
        trsfm = [],            // Declare empty array for transforms
        delay = 1000,          // Set delay in ms
        count = 0;             // Set iteration count

    // Declare a stepwise array where you want the transform to occur
    trsfm = ['scale(2,3)', 'skew(30deg,20deg)'];

    var timer = window.setInterval(function () {
        if(count < trsfm.length) {
            // Increase count by 1
            count += 1;

            // Stepwise addition of transforms
            var trsfmStep = trsfm.slice(0, count).join(' ');
            $spce.css({
                '-moz-transform': trsfmStep,
                '-o-transform': trsfmStep,
                '-webkit-transform': trsfmStep,
                'transform': trsfmStep
            });

            // Log in the console, just for fun
            console.log(trsfmStep);

        } else {
            // If you have iterated through all the transforms, clear interval
            window.clearInterval(timer);   
            console.log('Timer cleared.');
        }
    }, delay);
}); 
```

我已经定义了延迟，1000 毫秒（当然你可以改变它），并且还使用了一个数组来存储你想要应用的所有转换。变换以从左到右的逐步方式应用，从比例开始，然后到倾斜。

设置定时器，开始计数。每次达到间隔时，脚本都会检查您是否已经遍历了变换数组。如果不是，它将逐步添加变换，方法是从一开始就加入数组中的项目，但在您所处的任何一步停止（使用`.slice()`）方法:)

# jquery - 选择悬停无背景

> ID：16055870
> 
> 赞同：5
> 
> 时间：2013-04-17T09:02:29.447
> 
> 标签：jquery, css

我有一个带有无序列表的 div。

如果我点击一个项目，我会添加所选的类。

所以选定的项目总是像

```
 <li class="selected"> 
```

对于我使用的所有 li 项目。

```
 li:hover
{
    background-color:#CECEC8;
} 
```

这行得通。

对于我使用的选定项目

```
.selected
{
    background-color:#8B8BFF;   
}
.selected :hover
{
    background-color:#8B8BFF;
} 
```

但是，当我单击所选项目并且鼠标仍在其上（因此它悬停在其上）时，颜色不会改变，但仍然是来自 li:hover 的 #CECEC8 而不是来自.selected :hover 的 #8B8BFF。

**我如何在单击时否决 li:hover 以便具有 class=selected 的列表项的背景颜色始终为 #8B8BFF，即使在悬停时也是如此。**

现在的问题是如果您单击它不会立即可见，颜色不会从正常悬停改变。

例子

[http://jsfiddle.net/FCGtc/1/](http://jsfiddle.net/FCGtc/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:11:48.383

**编辑：由于解决方案与您的小提琴中的问题不同，我会给您两种解决方案，一种用于问题中的代码，一种用于您的 Fiddle**

**有问题的代码：**

你的声明之间有一个空格`:hover`，删除它。此外，它与**特异性**有关。`li:hover`比因为更**具体**。`.selected:hover``li`

使用以下方法来保持相同级别的特异性：

```
li:hover
{
    background-color:#CECEC8;
}

li.selected
{
    background-color:#8B8BFF;   
}

li.selected:hover
{
    background-color:#8B8BFF;
} 
```

演示：http: [//jsfiddle.net/FCGtc/8/](http://jsfiddle.net/FCGtc/8/)

**小提琴中的代码：**

这是因为您的初始悬停选择器比您的类选择器**更具体匹配**（同时删除 之间的空格`:hover`）。

使用这些，不需要那个**可怕的上帝** `important`：

```
#browsecat li.selectedcat
{
    background-color:#8B8BFF;   
} 
```

演示：http: [//jsfiddle.net/FCGtc/9/](http://jsfiddle.net/FCGtc/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:01:09.003

要覆盖 :hover 你需要更具体，并使用 :hover

```
li.selected:hover {
  background-color:#8B8BFF;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:13:49.117

我认为你有这种行为是因为`ID`总是有**更高的特异性**tan `class`。在您的小提琴中，如果我将所有更改`id`为`class`，它将按您的预期工作。

如果您喜欢《星球大战》，可以[在此处](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)检索有关 CSS 特异性的更多信息。

或者，如果不是，这是[一个严重的问题](http://www.adobe.com/devnet/dreamweaver/articles/css_specificity.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:15:00.973

你应该简单地使用：

```
#browsecat li:hover
{
    background-color:#CECEC8;
}
#browsecat li.selectedcat
{
    background-color:#8B8BFF;   
} 
```

无需使用`!important`.

[http://jsfiddle.net/8vYqM/](http://jsfiddle.net/8vYqM/)

PS：您应该了解 css 特异性：[http ://www.w3.org/TR/CSS2/cascade.html#specificity](http://www.w3.org/TR/CSS2/cascade.html#specificity)

# c++ - 具有输出长度限制和特殊参数的 C++ 排列

> ID：16055871
> 
> 赞同：1
> 
> 时间：2013-04-17T09:02:31.093
> 
> 标签：c++, recursion, permutation

我是 C++ 新手，我正在开发一个程序，该程序将生成一个字符串的所有排列的列表，但是我需要能够将输出的长度限制为 5 个字符（这很可能会变成用户设置的变量号）。我一直在寻找大约一周的时间来寻找这样的东西，而我得到的最接近的是以下代码。

## 源.cpp：

```
#include <iostream>;

using namespace std;

void swap(char *fir, char *sec)
{
  char temp = *fir;
  *fir = *sec;
  *sec = temp;
}

/* arr is the string, curr is the current index to start permutation from and size is sizeof the arr */
void permutation(char * arr, int curr, int size)
{
  if(curr == size-1)
  {
    for(int a=0; a<size; a++)
        cout << arr[a] << "";
    cout << endl;
  }

  else
  {
    for(int i=curr; i<size; i++)
    {
        swap(&arr[curr], &arr[i]);
        permutation(arr, curr+1, size);
        swap(&arr[curr], &arr[i]);
    }
  }
}

int main()
{
  string next;
  char str[] = "abcdefghijklmnopqrstuvwxyz1234567890-";

  permutation(str, 0, sizeof(str)-1);
  cin.get();
  cin.get();
} 
```

此代码有效，但它不限制输出的长度。它将输出长度设置为给定字符串的长度。看起来它可能不会在输出中解释多个相同的字母/数字（这我不是 100% 确定）。

此外，我需要设置特殊规则，例如连字符不能是输出中的第一个或最后一个字符。

我试图通过将*sizeof(str)-1*替换为*5*来修改上述代码，但是它只会“循环”字符串中的前 5 个字符，因此不会处理“e”之外的任何内容。

如果有人可以在这方面提供帮助，将不胜感激。

# 编辑：

感谢大家的出色帮助，我现在将发布我的最终产品，以防其他人尝试做同样的事情。

## 最终来源：

```
#include <iostream>
#include <string>
#include <sstream>
#include <fstream>

using namespace std;

void swap(char *fir, char *sec)
{
  char temp = *fir;
  *fir = *sec;
  *sec = temp;
}

void permutation(char * arr, int size, char* result, int depth, int limit)
{
  ofstream myfile ("permutation.txt", fstream::app);
  if(depth == limit)
  {
    for(int a=0; a<limit; a++){
      myfile << result[a] << "";
      cout << result[a] << "";
    }
    myfile << "\n";
    cout << endl;
  }
  else
  {
    for(int i=0; i<size; i++)
    {
      result[depth] = arr[i];
      permutation(arr, size, result, depth + 1, limit);
    }
  }
  myfile.close();
}

int main()
{
  ofstream myfile ("permutation.txt");
  myfile << "";
  myfile.close();
  string answer;
  char *rArray;
  string startProcess = "N";
  std::cout << "Welcome to permutation v1" << endl;
  std::cout << "-------------------------" << endl;
  std::cout << "Please enter how long the string should be: ";
  std::getline (std::cin,answer);
  int result = atoi(answer.c_str());
  rArray = new char[result];
  std::cout << "\n\nThank You!\n" << endl;
  std::cout << "Please wait, generating possible character array for length of " << result << "." << endl;
  std::cout << "Would you like to proceed? Y = yes & N = no: ";
  std::getline (std::cin,startProcess);
  char str[] = "abcdefghijklmnopqrstuvwxyz1234567890";
  if(startProcess == "Y")
  {
    permutation(str, sizeof(str)-1, rArray, 0, result); 
  }
  else
  {
    std::cout << "\n\nOperation Terminated. No permutations being generated..." << endl;
  }
  cin.get();
  return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:05:33.340

您需要限制递归的深度

**要给出字符串中字符的排列，每个只使用一次：**

```
void permutation(char * arr, int currsize, intchar* sizeresult, int depth, int limit)
{
  if(depth == limit)
  {
    for(int a=0; a<limit; a++)
        cout << arr[a]result[a] << "";
    cout << endl;
  }
  else
  {
    for(int i=curr;i=0; i<size; i++)
    {
        swap(&arr[curr],result[depth] &arr[i]);= arr[i];
        permutation(arr, curr+1size, sizeresult, depth + 1, limit);
        swap(&arr[curr], &arr[i]);
    }
  }
} 
```

像这样打电话

```
permutation(str, 0, sizeof(str)-1, result, 0, 5); 
```

**要给出字符串中字符的排列，请无限次使用每个字符：**

```
void permutation(char * arr, int size, char* result, int depth, int limit)
{
  if(depth == limit)
  {
    for(int a=0; a<limit; a++)
        cout << result[a] << "";
    cout << endl;
  }
  else
  {
    for(int i=0; i<size; i++)
    {
        result[depth] = arr[i];
        permutation(arr, size, result, depth + 1, limit);
    }
  }
} 
```

像这样打电话

```
 char result[5];
  permutation(str, sizeof(str)-1, result, 0, sizeof(result)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:20:23.580

这实际上并不是一项艰巨的工作。如果您可以在该函数中使用递归和循环，则可以解决它。我建议使用[`next_permutation`](http://en.cppreference.com/w/cpp/algorithm/next_permutation)标准库中的函数。

事实就是时间。在 3 秒内，您只能处理 8 个字符的排列。并且条件将取决于要求。假设在您的示例中，如果您需要在开始或结束时省略连字符，您可以修剪回来。

我的实现的伪代码：

```
 char array[] = "abcdee";
    char eachPerm[6];
    bool usedmatrix[6][6];
    Recur(int depth, int n)
    {
       // you can return from here if this is not the right path, suppose '-'
       // in first or last place.
       if(depth == n)
       {
          print;
       }
       else
       {
          int i;
          for(i= 0 to array.length)
          {
               if(array[i] is not used before)
               eachPerm[depth] = array[i];
               recur(depth+1, n);
          }
       }
    } 
```

最初调用此函数`recur(0, 5)`

# python - 在 python 上的函数之间传递参数

> ID：16055874
> 
> 赞同：1
> 
> 时间：2013-04-17T09:02:37.833
> 
> 标签：python

我尝试使用另一个函数的参数。我更喜欢不使用全局变量。我尝试以下一个，但我有一个错误。我在谷歌和这里搜索，但我没有找到可以帮助我的东西

```
class MainHandler(BaseHandler):
    def get(self):
        ******
        all_list = *a list*  
        ******

    def post(self):
        for i in self.all_list:
           if i[0] == something:
                   **** 
```

我有这个错误：`AttributeError: 'MainHandler' object has no attribute 'all_list'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:03:28.227

你需要设置

```
self.all_list = *a list* 
```

`self`是传递给函数的实例，你现在所做的只是为函数设置一个局部变量。

# php - php hive thrift 客户端多条语句

> ID：16055879
> 
> 赞同：1
> 
> 时间：2013-04-17T09:02:46.503
> 
> 标签：php, hadoop, hive

我是 hadoop/hive 的新手。我正在尝试一次运行多个配置单元语句，这些语句在终端上有效，但在使用节俭客户端时无效。

我已经按照这个 [http://nousefor.net/55/2011/12/php/hbase-and-hive-thrift-php-client/](http://nousefor.net/55/2011/12/php/hbase-and-hive-thrift-php-client/) 连接到 hive thrift 服务器。它适用于像“ `select * from sdf`”这样的单个语句，但不适用于“ `use default; select * from sdf`;”

它给出以下错误：

> “错误：查询返回非零代码：11，原因：失败：解析错误：第 1:11 行不匹配输入';' 期待接近'默认'的EOF”

请帮助如何运行多个语句

# asp.net - 404 在 ASP.Net 中使用 httphandler

> ID：16055884
> 
> 赞同：1
> 
> 时间：2013-04-17T09:02:53.917
> 
> 标签：asp.net, iis-7, httphandler

我使用 httphandler 将浏览器 URL 重新映射到我网站中的文件。这工作正常，但我无法访问我在新目录下创建的文件。网址如下所示：

```
http://mobile.mysite.com/monitoring/help/help.aspx 
```

然而 404 错误中返回的信息显示它无法在以下位置找到文件：

```
D:\Sites\Website\monitoring\help\help.aspx 
```

然而，该文件实际上位于：

```
D:\Sites\Website\mobile\monitoring\help\help.aspx 
```

我的 http 处理程序通常会识别“移动”子域。事实上，如果我放弃实际文件而只使用目录，我的处理程序确实会被调用。即使我在代码中设置了断点，VS 也永远不会被调用。为什么 IIS 访问一个不存在的目录下的 help.aspx？为什么我的 httphandler 没有被调用。正如我所提到的，httphandler 确实适用于几乎所有其他文件。我可以调用位于其他域下的 aspx 文件。

这是我的处理程序在 web.config 文件中的外观：

```
<add name="FileServerHandler-Files" path="*.*" verb="*" type="FileServerHandler" modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Either" requireAccess="Read" allowPathInfo="false" preCondition="" responseBufferLimit="4194304" /> 
```

在 IIS7 上运行 ASP.NET 4.0

子域“mobile”实际上映射到与主站点相同的 IP 地址。这有关系吗？如果是这样，它没有解释为什么处理程序可以访问移动域下的文件夹但不能访问 aspx 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:48:54.763

While I had an entry in the web.config for the handler to handle directories, I tried moving it up in the list. This worked. Why it stopped working is a mystery as the web.config hasn't changed for a very long time. This is what the entries now look like:

```
 <add name="FileServerHandler-Dir" path="*" verb="*" type="FileServerHandler" modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Unspecified" requireAccess="Read" allowPathInfo="false" preCondition="" responseBufferLimit="4194304" />
    <add name="FileServerHandler-Files" path="*.*" verb="*" type="FileServerHandler" modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Either" requireAccess="Read" allowPathInfo="false" preCondition="" responseBufferLimit="4194304" /> 
```

# php - Php 访问电子邮件收件箱以获取电子邮件地址

> ID：16055891
> 
> 赞同：5
> 
> 时间：2013-04-17T09:03:27.477
> 
> 标签：php, imap, gmail-imap

我需要在收件箱中获取我从中获取/接收电子邮件的电子邮件地址！我该怎么办，我此时有以下代码

```
<?php
    $mbox = imap_open("{imap.gmail.com:993/imap/ssl}INBOX", "address@gmail.com", "passw0rd")
      or die("can't connect: " . imap_last_error());

    $status = imap_status($mbox, "{imap.gmail.com:993/imap/ssl}INBOX", SA_MESSAGES);
    if ($status) {
      echo $status->messages;
    }
?> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T09:28:24.660

```
<?php
/* connect to gmail */
$hostname = '{imap.gmail.com:993/imap/ssl}INBOX';
$username = 'davidwalshblog@gmail.com';
$password = 'davidwalsh';

/* try to connect */
$inbox = imap_open($hostname,$username ,$password) or die('Cannot connect to Gmail: ' . imap_last_error());

/* grab emails */
$emails = imap_search($inbox,'ALL');

/* if emails are returned, cycle through each... */
if($emails) {

    /* begin output var */
    $output = '';

    /* put the newest emails on top */
    rsort($emails);

    /* for every email... */
    foreach($emails as $email_number) {

        /* get information specific to this email */
        $overview = imap_fetch_overview($inbox,$email_number,0);

        $output.= 'Name:  '.$overview[0]->from.'</br>';
            $output.= 'Email:  '.$overview[0]->message_id.'</br>';

    }

    echo $output;
} 

/* close the connection */
imap_close($inbox);
?> 
```

链接：[更新代码来自](http://davidwalsh.name/gmail-php-imap)

**编辑**

```
subject - the messages subject
from - who sent it
to - recipient
date - when was it sent
message_id - Message-ID
references - is a reference to this message id
in_reply_to - is a reply to this message id
size - size in bytes
uid - UID the message has in the mailbox
msgno - message sequence number in the mailbox
recent - this message is flagged as recent
flagged - this message is flagged
answered - this message is flagged as answered
deleted - this message is flagged for deletion
seen - this message is flagged as already read
draft - this message is flagged as being a draft 
```

# javascript - 在没有回发的图像点击事件中打开对话框

> ID：16055893
> 
> 赞同：0
> 
> 时间：2013-04-17T09:03:30.020
> 
> 标签：javascript, jquery, asp.net, html, image

我需要在 img onclick 事件中打开一个 jquery 对话框。但是当我单击图像时，它会完全回发到我不需要的服务器。我需要在没有回发的情况下打开它。

```
<img src='../../images/Cancel1.png' id='img' alt='Image'  onclick='open()'  /> 
```

[脚本]

```
function open() {
        $('#dialog').dialog();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:13:25.067

您只需要在调用 OnClientClick 时返回 false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:07:16.367

您需要`return false`在调用 onclick 后添加。所以，在你的 ASP 代码的某个地方：

```
<asp:... OnClientClick="open(); return false;" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:09:42.857

```
$('#img').click(function(e) {
         e.preventDefault();
         $('#dialog').dialog();
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:10:02.053

你可以这样做，如下所示

```
function open() {
        $('#dialog').dialog();
        e.preventDefault();
    } 
```

# c# - 如何在asp.net中处理大量数据

> ID：16055896
> 
> 赞同：1
> 
> 时间：2013-04-17T09:03:36.193
> 
> 标签：c#, mysql, asp.net, large-data

我在 asp.net/C#/Mysql 中有一个 Web 项目，其中的数据最多可以处理大约 30,000 行数据。它是一个报告工具，我必须在多个级别显示计数和总和等统计数据。

我想知道哪个是解决这个问题的更好方法。

我可以将我的数据过滤到可以查询的有限列中。

1.  **现在，Is 是将数据（所有行）加载**到我的应用程序的好方法，每当用户查询时，我都可以过滤该数据并**在代码中进行计算**并显示我的统计信息。

2.  或者我可以让**存储过程**完成所有计算，并且每次用户查询时我都可以调用存储过程并获取我的统计信息。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:08:30.533

数据库经过优化以执行这种数据操作。而且由于您也减少了网络负载，因此我会投票支持第二个选项。

另一种可能性是考虑某种 OLAP 解决方案，其中事务数据已经合并为更小的数据块，这些数据块又可以轻松查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:22:03.693

我肯定会选择第二种选择。您正在谈论一个 Web 应用程序，如果您想在加载时获取所有数据，那么您必须将其存储在某个地方以在回发期间保留它。如果您选择将其存储在会话状态中，您最终将消耗 Web 服务器内存，因为您有多个用户访问您的站点。

如果你把它存储在视图状态，那么你最终会得到一个非常大的客户端响应，这会使你的页面在客户端加载非常慢，并且会导致网络流量。

选项 2 是最好的，因为存储过程是预编译的，这意味着它们在性能方面要好得多。您还将减少网络流量。

# eclipse - 使用 maven 和 glassfish 的 Web 服务

> ID：16055901
> 
> 赞同：0
> 
> 时间：2013-04-17T09:03:50.883
> 
> 标签：eclipse, maven, glassfish, java-ee-6

我已经使用 maven 创建了一个 Web 服务，对其进行编译并将其部署在 glassfish 服务器上。我的问题是：如何访问该网络服务？到目前为止我所做的：

*   使用 mvn package 编译项目 -> 构建成功
*   启动 glassfish 服务器 -> 检查，localhost:8080 正常，服务器启动
*   部署应用程序： asadmin deploy myapp.war -> 没关系，我在输入 asadmin list-components 时可以看到它

我想做的是访问网络服务......因为当我输入 localhost:8080/myapp/ 时，我遇到了 404 错误。我必须创建一个 web.xml 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:40:20.277

所以，问题出在其他地方。我忘记创建作为 weh 服务“入口”的文件扩展应用程序（类似这样：

```
import javax.ws.rs.ApplicationPath;
import javax.ws.rs.core.Application;

@ApplicationPath( "/restapi" )
public class ApplicationConfig extends Application {} 
```

）。所以现在问题解决了，我通过这种方式从网络服务中获取信息

```
localhost:8080/myapp/restapi/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:05:48.893

“访问”对您意味着什么？

在 Web 服务的上下文中，这通常意味着请求 WSDL，以便您的客户端或类似 SOAP UI 的东西可以制定适当的 POST 请求并获得响应。

# javascript - 使链接目标取决于表单值

> ID：16055909
> 
> 赞同：0
> 
> 时间：2013-04-17T09:04:15.387
> 
> 标签：javascript, jquery, django

我有一个 django 视图，其中包含一个简单的表单和一个链接表。表单有一个下拉框，链接的查询参数应该包含下拉框的值。因此，例如，如果下拉列表有选项 1、2 和 3，并且选择了 2，则表格前三行中的链接目标应该是这样的：

```
/preview/first?other_arg=somevalue&choice=2
/preview/second?different=argument&choice=2
/preview/third?choice=2 
```

除了 之外的所有`arg=2`内容都是为每一行预定义的。

在我看来，有两种方法可以做到这一点。我可以在下拉值更改时重新创建所有链接，或者我可以在单击链接时创建链接。我一直在尝试通过第二种方法来做到这一点，但我无法让它工作（即当我点击链接时没有任何反应）。我创建了一个显示我的测试代码的小提琴：http: [//jsfiddle.net/LcY8c/4/](http://jsfiddle.net/LcY8c/4/)

这是最好的方法吗，谁能指出我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:26:20.680

我稍微改变了你的小提琴。将 id 更改为 class，并将 jQuery 从 click 事件更改为 change 事件。这是你要找的吗？

[http://jsfiddle.net/Grevling/LcY8c/17/](http://jsfiddle.net/Grevling/LcY8c/17/)

```
<div>
<select id="choiced">
    <option choice="1">1</option>
    <option choice="2">2</option>
    <option choice="3">3</option>
</select>
</div>
<div>

<a class="link" base="/link1" href="#">link1</a>
<a class="link" base="/link2?arg1=1" href="#">link2</a>
<a class="link" base="/link3?arg1=other" href="#">link3</a>

</div> 
```

脚本：

```
 $(document).ready(function () {
    $("#choiced").change(function () {
        var reportType = $('#choiced').val();
        var link = $('a').attr('base') + '&choice=' + reportType;

        $("a").each(function (index) { 
            $(this).attr("base", $(this).attr("base") + '&choice=' + reportType);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:13:30.350

您正在使用具有相同值的 id 属性 3 次。id 属性应该是唯一的。

```
<a id="link" base="/link1" href="#">link1</a>
<a id="link" base="/link2?arg1=1" href="#">link2</a>
<a id="link" base="/link3?arg1=other" href="#">link3</a> 
```

# javascript - 为什么在本地为全局 javascript 对象赋值有区别？

> ID：16055910
> 
> 赞同：0
> 
> 时间：2013-04-17T09:04:17.180
> 
> 标签：javascript, global-variables, javascript-objects, local-variables

请解释为什么在本地范围内更改全局对象字符串属性会影响全局范围内的属性，但为整个对象赋予新值不会。

在我的示例中，第一次运行 changeMyName 函数时，我得到了我所期望的 - my_global_object.name 值的变化。

但是为什么我第二次运行该函数时没有将 my_global_object 对象更改为 my_global_object.children.first_child 对象？

```
var my_global_object=new Object();
my_global_object.name='my parent name'
my_global_object.children=new Object();
my_global_object.children.first_child=new Object();
my_global_object.children.first_child.name='my first child name';

function changeMyName(child_name,new_name){
    var my_local_object;
    my_local_object=my_global_object;
    if(child_name) my_local_object=my_local_object.children[child_name];
    my_local_object.name=new_name;  
}

changeMyName(false,'new parent name'); 

changeMyName('first_child','new first child name'); 
```

为什么这个“=”赋值

```
if(child_name) my_local_object=my_local_object.children[child_name]; 
```

不同于这个“=”？

```
my_local_object.name=new_name; 
```

是否存在某种“给予价值”和“通过参考”的区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:28:35.437

```
 my_local_object=my_global_object; 
```

将变量引用的对象的引用分配给这里`my_global_object`的变量`my_local_object`。所以现在两个变量都引用同一个对象。

```
my_local_object.name=new_name; 
```

更新`name`由两个变量引用的对象的属性`my_global_object`，`my_local_object`因此`my_global_object.name`将与`my_local_object.name`.

```
my_local_object=my_local_object.children[child_name]; 
```

将变量`my_local_object`引用分配给 引用的对象`my_local_object.children[child_name]`。所以现在`my_local_object`variable 不指向由`my_global_object` variable 引用的对象。

# sql - 如何从一个表复制或更新到另一个表

> ID：16055912
> 
> 赞同：0
> 
> 时间：2013-04-17T09:04:24.773
> 
> 标签：sql, sql-server

我有两张桌子。`user`并且`user_new` 包含`user`旧数据。包含`user_new`新数据。我想同步`user_new`到`user`.

1.  如果数据存在于`user_new`，不存在于`user`，则插入到`user`。
2.  如果数据存在于`user`and中`user_new`，则更新。（与列比较`id`）

什么是快速的 sql 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:09:33.137

这适用于任何服务器版本 -

```
 -- 1) Insert new record

        INSERT INTO old_table(id, column)
        SELECT n.id, n.column
        FROM new_table n
        LEFT JOIN old_table o ON n.id = o.id
        WHERE o.id IS NULL

   -- 2) Update existed record

        UPDATE o
        SET column = n.column
        FROM old_table o
        JOIN new_table n ON n.id = o.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:14:19.480

从 Sql Server 2008 起，您可以使用`Merge`语法

```
MERGE user target
USING user_new source
ON taget.ID = source.ID
WHEN MATCHED THEN
UPDATE
SET target.Column= source.Column1,target.column2=source.column2
WHEN NOT MATCHED BY TARGET THEN
INSERT (ID,Column1,Column2)
VALUES (source.ID,source.column1,source.column2); 
```

或者您可以使用以下查询

```
INSERT INTO user(ID,column1,column2) 
SELECT ID,column1,column2 FROM user_new  AS source
WHERE NOT EXISTS (SELECT * FROM user WHERE ID = source.ID);

UPDATE target SET ...
FROM user AS target
INNER JOIN user_new AS source
ON target.ID = source.ID; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:12:56.303

如果您有 sql server 2008+，听起来您可能需要[合并。](http://technet.microsoft.com/en-us/library/bb510625.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:10:26.467

你不能这样做`insert`，并且`update`在一个查询中你必须单独做

```
select * from user where user_id not in (select user_new.user_id from user_new ) 
```

此查询会导致插入查询的数据类似地您必须通过替换`not in`来更新`in`

# shell - 排序编号以及与之关联的语句

> ID：16055915
> 
> 赞同：-1
> 
> 时间：2013-04-17T09:04:27.570
> 
> 标签：shell, sorting

我有一个文件，其中第一行包含数字，第二行包含与之关联的语句，依此类推，如下例所示

```
 12
     stat1
     18
     stat2
     15
     stat3 
```

但是我需要打印输出，例如按数字反向排序，因此与之相关的语句并像这样打印

```
 Time = 18
     Stat = stat2
     Time = 15
     Stat = stat3
     Time = 12
     Stat = stat1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:21:54.247

这是我的驱魔：

```
cat <yourfile> | awk '{s[NR]=$0} END {for(i=1;i<NR;i=i+2) print s[i], s[i+1]}' | sort -r | awk '{printf "Time = %s\nStat = %s\n",$1,$2}' 
```

输出也：

```
 # cat test.dat
    12
    stat1
    18
    stat2
    15
    stat3

   # cat test.dat | awk '{s[NR]=$0} END {for(i=1;i<NR;i=i+2) print s[i], s[i+1]}' | sort -r | awk '{printf "Time = %s\nStat = %s\n",$1,$2}'
    Time = 18
    Stat = stat2
    Time = 15
    Stat = stat3
    Time = 12
    Stat = stat1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:23:10.080

```
perl -lne 'if(/^\s+\d+/){$k=$_}else{$x{$k}=$_}END{for(sort {$b<=>$a} keys %x){print "time=$_\nStat=$x{$_}";}}' your_file 
```

测试如下：

```
> cat t6emp
     12
     stat1
     18
     stat2
     15
     stat3
> perl -lne 'if(/^\s+\d+/){$k=$_}else{$x{$k}=$_}END{for(sort {$b<=>$a} keys %x){print "time=$_\nStat=$x{$_}";}}' t6emp
time=     18
Stat=     stat2
time=     15
Stat=     stat3
time=     12
Stat=     stat1 
```

# android - SOAP 响应不是 XML 格式

> ID：16055916
> 
> 赞同：1
> 
> 时间：2013-04-17T09:04:41.810
> 
> 标签：android, web-services, parsing, soap, saxparser

我正在开发一个使用 SOAP Web 服务的应用程序。

当我在文本视图或 log-cat 中得到响应时，它的格式如下：

```
anyType{Results=anyType{Row=anyType{NAME=Demo; EMAIL=m.m@gmail.com; PHONENO=98607xxxxx; }; }; } 
```

但在浏览器上的响应是这样的：

```
<env:Envelope
    xmlns:env="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ns0="http://testing.oi.com/">
    <env:Body>
        <ns0:getDetailsResponse>
            <ns0:return>
                <Results>
                    <Row>
                        <NAME>Demo</NAME>
                        <EMAIL>m.m@gmail.com</EMAIL>
                        <PHONENO>98607xxxxx</PHONENO>
                    </Row>
                </Results>
            </ns0:return>
        </ns0:getDetailsResponse>
    </env:Body>
</env:Envelope> 
```

我调用 SOAP Web 服务的代码如下：

```
String NAMESPACE = "http://testing.oi.com/";
String URL = "http://192.168.1.xxx:8888/Testing-DemoTest-context-root/TestDemoSoapHttpPort";
String SOAP_ACTION = "http://testing.xx.com/getDetails";
String METHOD_NAME = "getDetails";

//Initialize soap request + add parameters
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);  

//Declare the version of the SOAP request
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);
envelope.implicitTypes = false;

HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

try {              
    androidHttpTransport.debug = true;
//this is the actual part that will call the  
androidHttpTransport.call(SOAP_ACTION, envelope);
// Get the SoapResult from the envelope body.
SoapObject result = (SoapObject)envelope.bodyIn;
//Xml.parse(result.toString(), dataHandler);
hotelDetails = result.getProperty(0).toString();
Log.d("Rsp",Details);
} catch (Exception e) {
    e.printStackTrace();
}

tv.setText(hotelDetails); 
```

我的 Java Web 服务代码如下：

```
public class Test {
    public Test() {
    }
    // Global Variable
    Connection con;
    CallableStatement cst;
    String response;
    ResultSet rs;
    Statement stmt;

    //DataBase Connection
    public static Connection getConnection(){
        Connection con;
        con = null;

        try {
            Class.forName("oracle.jdbc.driver.OracleDriver");
        } catch (ClassNotFoundException e) {
            System.out.println("Server Connection Failed");
        }

        String url="jdbc:oracle:thin:@abc.def.com:PortNo:SID";
        try {
            con=DriverManager.getConnection(url,"UserName","Password");
            if(con!=null){
                System.out.println("Connection Success"+"\n");
            }
        } catch (SQLException e) {

        System.out.println("Connection Failed");
    }
    return(con);
}

//XML Document Creation.
public static Document createXMLDocument(ResultSet resultset, Document doc){
    ResultSetMetaData rsmd;     
    DocumentBuilderFactory factory;
    DocumentBuilder builder;
    doc = null;
    Element results;
    int colCount;
    Connection con = getConnection();        

    try{
        factory = DocumentBuilderFactory.newInstance();
        builder= factory.newDocumentBuilder();
        doc= builder.newDocument();
        results = doc.createElement("Results");
        doc.appendChild(results);
        rsmd = resultset.getMetaData();
        colCount = rsmd.getColumnCount();

        while (resultset.next()){
            Element row = doc.createElement("Row");
            results.appendChild(row);

            for (int i = 1; i <= colCount; i++){
                String columnName = rsmd.getColumnName(i);
                Object value = resultset.getObject(i);
                if(value==null){
                    value=" ";
                }

                Element node = doc.createElement(columnName);
                if(columnName.equalsIgnoreCase("BEGIN_DATE")){
                    String date= resultset.getString(i);
                    node.appendChild(doc.createTextNode(date));
                    row.appendChild(node);
                }else{
                    node.appendChild(doc.createTextNode(value.toString()));
                    row.appendChild(node);
                }
            }
        }
    }catch (Exception e) {
        e.printStackTrace();
    }
    try {
        con.close();
    } catch (SQLException e) {
        e.printStackTrace();
    }
    return(doc);
}

// Call Details
@WebMethod
public Document getDetails(){
    Document doc;
    doc = null;
    con=getConnection();
    try {
        cst= con.prepareCall("{call callDetails (?)}");
        cst.registerOutParameter(1,OracleTypes.CURSOR);
        cst.execute();
        rs = (ResultSet)cst.getObject(1);
        doc = createXMLDocument(rs,doc);
    }catch (SQLException e) {
        System.out.println("No Such Record");
    }

    try {
        con.close();
    } catch (SQLException e) {
        e.printStackTrace();
    }
    return(doc);
} 
```

我希望响应就像它在浏览器中的字符串一样，以便我可以使用 sax 解析和解析数据。我不明白为什么我会得到这样的回应是什么问题。

请在这个问题上指导我或建议我现在应该做什么。我在应用程序的中间，无法移动更远。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:08:45.747

我解决了获得响应的问题。我所做的是：

我只是添加：

```
androidHttpTransport.debug = true; 
```

前 ：

```
androidHttpTransport.call(SOAP_ACTION, envelope); 
```

通话后我补充说：

```
String xml = androidHttpTransport.responseDump; 
```

通过这个，我得到了字符串中的浏览器响应。

# axis2 - 在axis2的响应中封装了两次Soap和Body标签

> ID：16055921
> 
> 赞同：0
> 
> 时间：2013-04-17T09:05:12.233
> 
> 标签：axis2

我正在尝试运行 apache axis2 webservice 客户端，但我得到了一个如下所示的异常

***org.apache.axis2.AxisFault: org.apache.axis2.databinding.ADBException: Unexpected subelement { [http://schemas.xmlsoap.org/soap/envelope/](http://schemas.xmlsoap.org/soap/envelope/) }body at org.apache.axis2.AxisFault.makeFault(AxisFault.爪哇：430）***

这是 web 服务的 wsdl

```
<?xml version="1.0" encoding="UTF-8"?> 
- 
<wsdl:definitions targetNamespace="http://wtp" 
xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:xs="http://www.w3.org/2001/XMLSchema" 
xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" 
xmlns:ns="http://wtp" xmlns:ns1="http://org.apache.axis2/xsd" 
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"> 
<wsdl:documentation> Please Type your service description here 
</wsdl:documentation> 
- 
<wsdl:types> 
- 
<xs:schema targetNamespace="http://wtp" elementFormDefault="qualified" 
attributeFormDefault="qualified"> 
- 
<xs:element name="authenticate"> 
- 
<xs:complexType> 
- 
<xs:sequence> 
<xs:element name="loginname" type="xs:string" nillable="true" 
minOccurs="0" /> 
<xs:element name="password" type="xs:string" nillable="true" 
minOccurs="0" /> 
</xs:sequence> 
</xs:complexType> 
</xs:element> 
- 
<xs:element name="authenticateResponse"> 
- 
<xs:complexType> 
- 
<xs:sequence> 
<xs:element name="return" type="xs:int" minOccurs="0" /> 
</xs:sequence> 
</xs:complexType> 
</xs:element> 
</xs:schema> 
</wsdl:types> 
- 
<wsdl:message name="authenticateRequest"> 
<wsdl:part name="parameters" element="ns:authenticate" /> 
</wsdl:message> 
- 
<wsdl:message name="authenticateResponse"> 
<wsdl:part name="parameters" element="ns:authenticateResponse" /> 
</wsdl:message> 
- 
<wsdl:portType name="LoginPortType"> 
- 
<wsdlperation name="authenticate"> 
<wsdl:input wsaw:Action="urn:authenticate" message="ns:authenticateRequest" /> 
<wsdlutput wsaw:Action="urn:authenticateResponse" 
message="ns:authenticateResponse" /> 
</wsdlperation> 
</wsdl:portType> 
- 
<wsdl:binding name="LoginSoap11Binding" type="ns:LoginPortType"> 
<soap:binding style="document" 
transport="http://schemas.xmlsoap.org/soap/http" /> 
- 
<wsdlperation name="authenticate"> 
<soapperation style="document" soapAction="urn:authenticate" /> 
- 
<wsdl:input> 
<soap:body use="literal" /> 
</wsdl:input> 
- 
<wsdlutput> 
<soap:body use="literal" /> 
</wsdlutput> 
</wsdlperation> 
</wsdl:binding> 
- 
<wsdl:binding name="LoginSoap12Binding" type="ns:LoginPortType"> 
<soap12:binding style="document" 
transport="http://schemas.xmlsoap.org/soap/http" /> 
- 
<wsdlperation name="authenticate"> 
<soap12peration style="document" soapAction="urn:authenticate" /> 
- 
<wsdl:input> 
<soap12:body use="literal" /> 
</wsdl:input> 
- 
<wsdlutput> 
<soap12:body use="literal" /> 
</wsdlutput> 
</wsdlperation> 
</wsdl:binding> 
- 
<wsdl:binding name="LoginHttpBinding" type="ns:LoginPortType"> 
<http:binding verb="POST" /> 
- 
<wsdlperation name="authenticate"> 
<httpperation location="authenticate" /> 
- 
<wsdl:input> 
<mime:content type="text/xml" part="parameters" /> 
</wsdl:input> 
- 
<wsdlutput> 
<mime:content type="text/xml" part="parameters" /> 
</wsdlutput> 
</wsdlperation> 
</wsdl:binding> 
- 
<wsdl:service name="Login"> 
- 
<wsdl:port name="LoginHttpSoap11Endpoint" binding="ns:LoginSoap11Binding"> 
<soap:address 
location="http://localhost:8080/Navigato/services/Login.LoginHttpSoap11Endpoint/" /> 
</wsdl:port> 
- 
<wsdl:port name="LoginHttpSoap12Endpoint" binding="ns:LoginSoap12Binding"> 
<soap12:address 
location="http://localhost:8080/Navigato/services/Login.LoginHttpSoap12Endpoint/" /> 
</wsdl:port> 
- 
<wsdl:port name="LoginHttpEndpoint" binding="ns:LoginHttpBinding"> 
<http:address 
location="http://localhost:8080/Navigato/services/Login.LoginHttpEndpoint/" /> 
</wsdl:port> 
</wsdl:service> 
</wsdl:definitions> 
```

以下是来自soap ui的soap请求和响应包

## 肥皂请求

```
<?xml version='1.0' encoding='utf-8'?> 
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"> 
<soapenv:Body> 
<ns1:authenticate xmlns:ns1="http://wtp"> 
<ns1:loginname>john</ns1:loginname> 
<ns1:password>123</ns1:password> 
</ns1:authenticate> 
</soapenv:Body> 
</soapenv:Envelope> 
```

## 肥皂响应

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"> 
<soapenv:Body> 
<ns:authenticateResponse xmlns:ns="http://wtp"> 
<ns:return>1</ns:return> 
</ns:authenticateResponse> 
</soapenv:Body> 
</soapenv:Envelope> 
```

但是当响应到达客户端存根时，存根接收它如下

```
<?xml version='1.0' encoding='utf-8'?> 
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"> 
<soapenv:Body> 
<soapenv:Envelope> 
<soapenv:Body> 
<ns:authenticateResponse xmlns:ns="http://wtp"> 
<ns:return>1</ns:return> 
</ns:authenticateResponse> 
</soapenv:Body> 
</soapenv:Envelope> 
</soapenv:Body> 
</soapenv:Envelope> 
```

这里的肥皂和身体被封装了两次

因此，客户端存根无法解析并引发以下错误。

***org.apache.axis2.AxisFault: org.apache.axis2.databinding.ADBException: Unexpected subelement { [http://schemas.xmlsoap.org/soap/envelope/](http://schemas.xmlsoap.org/soap/envelope/) }body at org.apache.axis2.AxisFault.makeFault(AxisFault.爪哇：430）***

## 客户代码

```
public class LoginClient 
{
    public static void main(String args[])
    {
        try {
            LoginStub stub = new LoginStub();
            Authenticate auth = new Authenticate();
            auth.setLoginname("john");
            auth.setPassword("123");
            AuthenticateResponse res = stub.authenticate(auth);
            System.out.println(res.get_return());
        } catch (AxisFault e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (RemoteException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:40:09.427

您的客户端代码是如何编写的？..您是否正确设置了消息的内容类型.. 在某些时候，axis2 认为该消息不是肥皂消息并再次用肥皂信封包装.. 当您收到响应时axis2 检查它的内容类型..它应该是 text/xml

# javascript - Node.js：打包客户端 Web 应用程序

> ID：16055922
> 
> 赞同：0
> 
> 时间：2013-04-17T09:05:13.623
> 
> 标签：javascript, html, node.js, mobile, ubuntu

我目前正在尝试找到一种多平台解决方案，使用 node.js 和 Linux 终端（Ubuntu）将 HTML5 Web 应用程序（无服务器依赖项）打包到单个可执行应用程序中。

我尝试使用 wkpdftohtml 和 phantomjs 来生成 pdf，但它们不支持 html5 视频或音频标签（尽管现代 pdf 确实支持这些）。

是否有任何库或 Linux 二进制文件可以满足这些要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:29:37.163

如果您添加一个充当简单 Web 服务器的 node.js 组件，那么您可以使用[node-webkit](https://github.com/rogerwang/node-webkit)打包资产 + Web 服务器。包含节点 + Chromium。

# c# - ActionResult 将参数基类转换为派生类

> ID：16055923
> 
> 赞同：0
> 
> 时间：2013-04-17T09:05:14.860
> 
> 标签：c#, asp.net-mvc, casting, derived-class

我写了一个基类和一些派生自它的类。

我想在一个 ActionResult 中使用这些类，但如果我试图将 PSBase 转换为 PS1，我会得到一个 PSBase 类型无法转换为 PS1 的 System.InvalidCastException。

课程：

```
public class PSBase
{
      public int stationId { get; set; }
      public string name { get; set; }
}

public class PS1 : PSBase
{
      public string reference { get; set; }
}

public class PS2 : PSBase
{
} 
```

行动结果：

```
 [HttpPost]
    public ActionResult ProductionStep(PSBase ps)
    {
        if (ModelState.IsValid)
        {
            var product = db.Product.FirstOrDefault(.........);

            switch (ps.stationId )
            {
                case 1:
                    {
                        product.Reference = ((PS1)ps).reference;
                        db.SaveChanges();
                        break;
                    }
            }
        }
        return View();
    } 
```

因为我不想为每个类都有一个自己的 ActionResult（多次重复很多相同的代码），所以我想把所有这些都放在一个 ActionResult 中。有什么想法可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:51:49.023

如果没有自定义 ModelBinder，您尝试做的事情将永远无法工作（即使那样，我也不建议实施它会造成巨大的混乱），抱歉。

只有当您将模型从 Controller 传递到 View 时，它才会记住它最初的类型（包括继承等），因为此时您仍然在页面的服务器端，并且您只是在传递一个对象。

一旦你进入一个视图并提交一个表单，它会创建一些 POST 请求，其正文包含基于输入名称的值列表。

在您的情况下，如果您有一个基于 PS1 的表单并使用所有字段作为输入，您将得到如下内容：

```
POST:
stationId = some value
name = some value
reference = some value 
```

（没有提及原始类型、控制器、方法等）

现在，MVC 所做的是检查您在方法的标头中使用的参数（在您的情况下为 ProductionStep(PSBase ps)）。

根据参数，它称为模型绑定器。默认模型绑定器所做的是它创建该类的新实例（在您的情况下为 PSBase）并通过该类的所有属性进行反射并尝试从 POST 正文中获取它们。

如果 POST 正文中有一些额外的值，这些值会被遗忘。

除非您为此默认 MVC 实现编写自定义模型绑定器，否则无法帮助您。

我建议创建两个单独的方法，每个方法接受不同的 PSBase 实现。

如果您想了解更多关于模型绑定器的信息，请查看[http://msdn.microsoft.com/en-us/magazine/hh781022.aspx](http://msdn.microsoft.com/en-us/magazine/hh781022.aspx)

编辑：

通过创建两个单独的方法，我的意思是这样的：

```
[HttpPost]
public ActionResult ProductionStepA(PS1 ps)
{
    if (ModelState.IsValid)
    {

    }
    return View();
}

[HttpPost]
public ActionResult ProductionStepB(PS2 ps)
{
    if (ModelState.IsValid)
    {

    }
    return View();
} 
```

那么您必须通过不同的表单操作在视图中区分它们。

# jquery-ui - 获取在选择的 JQUERY 中显示的另一个值对象

> ID：16055924
> 
> 赞同：0
> 
> 时间：2013-04-17T09:05:17.700
> 
> 标签：jquery-ui, knockout.js, jquery-chosen

如何从选定的单个 DropDown 中获取选定的 ID 值？

前任：

`$("#select-id").chosen().val()`

我得到了一个国家（名称）的值，但我需要 ID 与另一个 DropDown 链接。这个ID是States数组的索引，所以当我在另一个DropDown中选择一个Country时，会出现包含所有State项的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:17:14.393

查看 JsFiddle[演示](http://jsfiddle.net/gurkavcu/snS2P/)。我为你创建了一个简单的例子。那是你需要的吗？

```
ko.bindingHandlers.chosen = {
            init: function(element, valueAccessor, allBindingsAccessor, viewModel) {
                $(element).chosen();            
            },
            update: function(element, valueAccessor, allBindingsAccessor, viewModel) {
                $(element).trigger("liszt:updated");         
            }
};

var viewModel = {
    sample : ko.observableArray([{"name": "Sample Option 1" , "value" : 1 } , {"name": "Sample Option 2" , "value" : 2 }, {"name": "Sample Option 3" , "value" : 3 }]),
    selectedItemOne : ko.observable(),
    selectedItemTwo : ko.observable(),
    showOne : function(){ alert(this.selectedItemOne()) },
    showTwo: function(){ alert(this.selectedItemTwo()) }
};

ko.applyBindings(viewModel); 
```

# php - 带有 PHP MYSQL 的 Jquery Flot 馅饼

> ID：16055928
> 
> 赞同：0
> 
> 时间：2013-04-17T09:05:25.643
> 
> 标签：php, jquery, mysql, flot, pie-chart

我有一些问题。对不起我的英语。

我会显示数据但什么都没有！

我不知道问题出在哪里。我没找到。谢谢你的帮助。

代码html

```
<div id="pie2" style="height:300px"></div> 
```

代码 javascript

```
jQuery(document).ready(function ($){
var options = {
        series: {
            pie: { 
                show: true,
                radius: 1,
                    label: {
                        show: true,
                        radius: 2 / 3,
                        tilt:0.5,
                        formatter: function(label, series) 
                        {
                            return '<div style="font-size:8pt;text-align:center;padding:2px;color:white;">' + label + '<br/>' + Math.round(series.percent) + '% (' + series.data[0][1] + ')</div>';
                        },

                        background: 
                        {
                            opacity: 0.8
                        }
                    }
            }
        },
        legend: {
            show: true
        }
    };
var dataset1 = <?php echo json_encode($pie);?>;
var data = [
            {
                "label": "Random Values",
                "data": dataset1
            }
        ]; 
var plotarea = $("#pie2");
$.plot( plotarea , data); 
```

});

代码 PHP (source_pie.php)

```
$sql = "SELECT COUNT(rne) AS rne, dept FROM anuetab GROUP BY dept";
$result = mysql_query($sql);
while($row = mysql_fetch_assoc($sql)){
$pie[] = array(
    'label'=>$row['dept'],
    'data'=>$row['rne']
    );
echo '<pre>';
print_r($pie);
echo '</pre>';
}
echo json_encode($pie); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:31:11.543

尝试使用 mysql_fetch_row 而不是 mysql_fetch_assoc

# ios - 如何使 UITableview 与 iPhone 5 屏幕尺寸相匹配？

> ID：16055932
> 
> 赞同：1
> 
> 时间：2013-04-17T09:05:36.263
> 
> 标签：ios, uitableview, iphone-5

我已经尝试了这篇[文章](https://stackoverflow.com/questions/7678910/uitableviewcontroller-last-row-cut-off)中图像的解决方案。但是，它仅在第一次加载屏幕时起作用，当应用程序从屏幕的子级再次返回该屏幕时，它会返回切断 tableview。

在我 NSLog viewWillAppear 中的 tableview 高度之后：

```
340.00 (tableview first loaded)
245.00 (tableview re-appeared) 
```

有什么我想念的吗？

我也尝试添加

```
tableResult.autoresizingMask &= ~UIViewAutoresizingFlexibleBottomMargin; 
```

和

```
tableResult.autoresizingMask = UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleHeight ; 
```

但它们都不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:07:21.007

您应该将表格的高度设置为灵活：

```
tableResult.autoresizingMask = UIViewAutoresizingFlexibleHeight; 
```

# php - 通过 10 个 mysql 表填充日历循环

> ID：16055938
> 
> 赞同：-1
> 
> 时间：2013-04-17T09:05:55.907
> 
> 标签：php, javascript, mysql, pdo

我有一个关于如何进行以下操作的问题：

我想创建一个输入框以在 php、mysql 和 javascript 中输入开始日期。然后我在一个数据库中有 10 个表，我想在接下来的 90 天内使用来自日期设置的表数据“填充”。

所以它会是，第 1 天到第 10 天 = 表 1 到 10，然后第 20 天到第 30 天 = 表 1 到 10 等等。所以它一遍又一遍地循环。

这将特定于数据库中的每个用户，因此每个用户都可以有一个单独的开始日期。

所以最终，当用户登录时，我会使用 jQuery datepicker 之类的东西，并且当用户单击开始日期之后和结束日期之前的日期时，该特定表格将显示该特定日期。

创建一个更高级的版本也很好，用户可以选择跳过当天，然后将剩余的日子向前移动一天。（如果可能的话）

这有点难以解释，但如果至少有人能指出我正确的方向，我将不胜感激:)

真诚的 OmiCron

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:23:25.343

您的数据库设置错误。

*   制作**一张**桌子
*   仅存储实际事件，不要使用空事件预先填充它
*   使用 SQL 查询选择给定期间的所有事件

就这样

如果您需要将用户分配给事件，则需要另一个交叉表。仅包含 2 列 - 用户 ID 和事件 ID。它可以让您将任意数量的用户分配给任何事件并轻松选择它们

# algorithm - 交付分配算法

> ID：16055941
> 
> 赞同：0
> 
> 时间：2013-04-17T09:06:16.327
> 
> 标签：algorithm

我有一个场景，应该通过优化路线正确管理交付。

让我详细解释一下场景；

我们正在与一家从事家具销售的公司打交道。每天可能有超过 4000 到 5000 次交付，他们很难将每次交付分配给每辆车，燃料成本也无法控制。加班津贴也很高，因为他们没有正确安排交货。所以他们需要一个可以处理这些情况的应用程序。

应用程序应处理以下场景；

1.  所有的交付都要做。
2.  系统应通过以下输入参数找出交付物品所需的车辆数量。

    输入 1：交货地点（纬度和经度）。

    输入 2：车辆中物品使用的空间百分比

    输入 3：修复时间（对于拆卸的物品；将在交货地点重新修复）

3.  根据上述参数，系统应计算需要多少车辆以及将哪些所有交付分配给哪些所有车辆。

4.  车辆工作时间应为 8 小时（旅行时间 + 固定时间）。

我在匈牙利算法的帮助下尝试过这个，但未能获得正确的输出。

请建议我哪种算法适合我的场景。

* * *

神努拉尔

# css - 哪个 CSS 代码片段在可维护性和性能方面更好

> ID：16055945
> 
> 赞同：2
> 
> 时间：2013-04-17T09:06:22.787
> 
> 标签：css

我有 2 个代码片段。

这是片段1：

```
#question-title-1 {
 cursor:pointer;
 color:blue;
 padding:10px;
}

#question-title-2 {
 cursor:pointer;
 color:red;
 padding:10px;
} 
```

片段 2：

```
#question-title-1 , #question-title-2 {
  cursor:pointer;
  color:blue;
  padding:10px;
}

#question-title-2 {
  color:red;
} 
```

哪个更好，为什么？我更喜欢 2，因为它需要更少的代码行。另一方面，我认为重新定义颜色属性会导致浏览器重新绘制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:08:17.147

我会使用 3 个 CSS 声明，这样你就不会做任何覆盖或复制属性：

```
#question-title-1,
#question-title-2 {
   cursor:pointer;
   padding:10px;
}

#question-title-1 { 
 color:blue; 
}

#question-title-2 {
 color:red;
} 
```

这是更多的行，但减少行不应该成为结构化 CSS 的头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:10:29.623

对我来说更好的是第二个，也许，但我相信第三种选择是最好的：

```
#question-title{
  cursor:pointer;
  padding:10px;
}

#title-question{
  color:red;
}

#title-answer{
  color:red;
} 
```

然后使用：

```
<div class="question-title title-question"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:08:28.853

我会说第二个。而不是重复相同的代码。当有反映两者的更改时，您只需更改一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:14:07.523

第二个选项是最好的。这是因为就 CSS 而言，DRY 方法总是更好，无论是可维护性还是性能。然而，在这个例子中（在大多数情况下，当您处理 CSS 时）性能提升实际上是微不足道的，因此您选择最容易维护的选项。

# c# - Streamwriter 不抛出异常

> ID：16055946
> 
> 赞同：0
> 
> 时间：2013-04-17T09:06:29.943
> 
> 标签：c#

在下文中，如果文件不存在，streamwriter 不会抛出异常。我希望它会引发异常，为什么不会，我怎样才能让它这样做？

```
var fileName = HttpContext.ApplicationInstance.Server.MapPath("~/App_Data/emails.txt");
FileStream fs = new FileStream(fileName, FileMode.Append);
StreamWriter sw = new StreamWriter(fs);
sw.WriteLine(String.Format("{0}\t{1}", email, name));
sw.Flush();
sw.Close();
fs.Close(); 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:08:48.383

```
FileStream fs = new FileStream(fileName, FileMode.Append); 
```

如果文件不存在，这将创建文件（如果存在，则附加到它）。

假设从您的帖子（其中没有问题！）您不希望它首先创建文件调用`File.Exists`以确保文件存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T09:31:00.663

如果您想确保附加到现有文件，请在写入之前使用`FileMode.Open`然后`Seek`到末尾。在`File.Exists`检查之后但在构建`FileStream`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T09:21:17.863

尝试这个：

```
try
{
    var fileName = HttpContext.ApplicationInstance.Server.MapPath("~/App_Data/emails.txt");
    if (System.IO.File.Exists(fileName ))
    {
        FileStream fs = new FileStream(fileName, FileMode.Append);
        StreamWriter sw = new StreamWriter(fs);
        sw.WriteLine(String.Format("{0}\t{1}", email, name));
        sw.Flush();
        sw.Close();
        fs.Close();
    }
    else
    {
       //Throw error here
    }
}
catch()
{

} 
```

# matlab - 计算图像中前景和背景像素的数量

> ID：16055949
> 
> 赞同：0
> 
> 时间：2013-04-17T09:06:34.803
> 
> 标签：matlab, image-processing

以字母“B”的图像为例：

![](https://i.stack.imgur.com/15xHP.png).
如果我们在字母“B”的 4 侧绘制直线，那么它将创建一个矩形框。我必须在上图中的这个边界框（Recangle Box）中找到前景和背景像素的数量。我没有得到结果。请帮助我。谢谢你。

这是我的代码：

```
 E = imread('1.jpg');
 label = graythresh(E);
 BW = im2bw(E, label);
 imshow(BW)
 L = bwlabel(E);
 z = regionprops(L,'BoundingBox');
 nBlackpixel = sum(z(:))
 nWhitepixel = numel(z) - nBlack 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:35:38.777

仅使用`'BoundingBox'`属性

```
z = regionprops( L, 'BoundingBox' );
nFG = zeros(1,numel(z)); % pre-allocate
nBG = zeros(1,numel(z));
for ii=1:numel(z), % in case there are more than one object in the image
    bb = imcrop( E, z(ii).BoundingBox ); % crop the mask according to BoundingBox
    nFG(ii) = nnz(bb); % count number of FG pixels
    nBG(ii) = numel( bb ) - nFG(ii); % nBG = tot number in BB minus num of FG
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:39:08.130

尝试使用不同的属性

```
z = regionprops( L, 'Image' );
nFG = zeros(1,numel(z)); % pre-allocate
nBG = zeros(1,numel(z));
for ii=1:numel(z), % in case there are more than one object in the image
    nFG(ii) = nnz(z(ii).Image); % count number of FG pixels
    nBG(ii) = numel( z(ii).Image ) - nFG(ii); % nBG = tot number in BB minus num of FG
end 
```

# java - java eclipse-fileReader 虽然抛出 FileNotFoundException .exists() 返回真

> ID：16055952
> 
> 赞同：0
> 
> 时间：2013-04-17T09:06:40.500
> 
> 标签：java, filenotfoundexception

当我尝试使用工作区中的文本文件创建 BufferedReader 时，“新的 bufferedreader 语句中的 FileReader 会引发 filenotfoundexception。但是 .exists() 和 .canRead() 都为该文件返回 true

```
public static void main(String[] args) {
    File fighter0 = new File("resources/fighter0.txt");
    //BufferedReader reader = new BufferedReader(new FileReader(fighter0));
    System.out.println(fighter0.exists());
    System.out.println(fighter0.canRead());
} 
```

这是代码

```
true
true 
```

和输出

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
Unhandled exception type FileNotFoundException

at main.Core.main(Core.java:21) 
```

以及当我取消注释 bufferedreader 行时引发的异常

我发现了一个与此类似的封闭线程，但在其中找不到任何明确的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:08:47.903

这是编译器错误，而不是运行时故障：

> 未处理的异常类型 FileNotFoundException

编译器声明该异常必须由客户端代码捕获。可以通过执行 a `try/catch`around the use`FileReader`或声明 that来纠正它`main()` `throws FileNotFoundException`。

研究检查和未经检查的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:10:54.210

您的错误是编译错误。它说你还没有处理`FileNotFoundException`异常。尝试`public static void main(String[] args) throws Exception`

# c# - 覆盖@Display

> ID：16055953
> 
> 赞同：0
> 
> 时间：2013-04-17T09:06:40.767
> 
> 标签：c#, views, orchardcms, models

我有不同的模型类型，它们是抽象模型的子类。我以这种方式渲染它：

```
<ul>
    @foreach(dynamic model in @Model.ModelList)
    {
        <li>
            @Display(model)
        </li>
    }
</ul> 
```

如何为每种类型定义“显示”（我希望每种模型类型有不同的 cshtml）？我认为它与形状有关。如何为每种类型定义一个形状和视图？这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:17:05.933

我已经找到了解决方案（这并不容易，因为如果它是关于果园的，我完全是新手）创建新形状：

```
 public void Discover(ShapeTableBuilder builder)
    {
        builder.Describe("MyModel").OnDisplaying(
            displaying =>
                {
                    var elementObject = displaying.Shape;
                    var elementId = elementObject.Id;
                    elementObject.Metadata.Alternates.Add("MyModel__" + EncodeAlternateElement(elementId));
                });
    }

    private string EncodeAlternateElement(string alternateElement)
    {
        return alternateElement.Replace("-", "__").Replace(".", "_");
    } 
```

在视图中使用它：

```
<ul>
@foreach (var model in @Model)
{
    <li>

        @Display(@New.MyModel(Id: model.Id, modelInstance: model))

    </li>
}
</ul> 
```

# arrays - AS3循环创建多个数组

> ID：16055954
> 
> 赞同：0
> 
> 时间：2013-04-17T09:06:41.553
> 
> 标签：arrays, actionscript-3, loops, random, for-loop

我正在尝试制作六个数组，所以我都是手工创建的。我知道有一种方法可以让整个混乱变得更短，但它让我失去了理智。

```
var variant_1:Array = new Array
                    (rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), 
                     "", "",  "", "",  "", "", "", "", "", "", "", "");

var variant_2:Array = new Array
                    (rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), 
                     "", "",  "", "",  "", "", "", "", "", "", "", "");

var variant_3:Array = new Array
                    (rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), 
                     "", "",  "", "",  "", "", "", "", "", "", "", "");

var variant_4:Array = new Array
                    (rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), 
                     "", "",  "", "",  "", "", "", "", "", "", "", "");

var variant_5:Array = new Array
                    (rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), 
                     "", "",  "", "",  "", "", "", "", "", "", "", "");

var variant_6:Array = new Array
                    (rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), 
                     "", "",  "", "",  "", "", "", "", "", "", "", ""); 
```

**注意**：*getNum()*是一个函数，它为我提供 1 到 90 之间的随机数字范围，然后我将它们分配给动态创建的表。

**注意 2**：数组中的空值是表中的空单元格，因为在 9x3 的表中我需要 15 个数字和 12 个空格。

**注 3**：是的，这是一个宾果游戏。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:27:05.150

我想这就是你想要的

```
var iVariantCount:int = 6;//number of variants
var arrVariants:Array = new Array();//this will hold your variants array (variant_1,variant_2,etc)
var iVariantLength:int = 27;//total no fo elements in a variant array
var iRandomNumCount:int = 15;//no of random numbers in a variant array

for (var i:int = 0;  i<iVariantCount ; i++) 
{
    var arrVariant:Array = new Array();
    for (var j:int = 0;  j < iVariantCount ; j++) 
    {
        if (i < iRandomNumCount)
        {
            arrVariant.push(rp.getNum());
        }
        else
        {
            arrVariant.push("");
        }
        arrVariants.push(arrVariant);
    }   
}

//Check the result
for (i = 0;  i<arrVariants.length ; i++) 
{
    trace("Variant_" + i + ": " + arrVariants[i]);
} 
```

试试这个，告诉我它是否适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:34:11.140

您可以使用 for 循环，例如。

```
for(var i:int=0; i<10; i++) {
  trace(i);       
} 
```

对于您要执行的操作，您可以将其包装在一个返回新数组的函数中

```
function createArray(){
   var a = [];//new array

   for(var i:int=0; i<??; i++) {
      //some conditions
      if(i < ??)  {
         //push to array
      }  
      else {
         //push to array
      }  
   } 

  return a;
}

var myNewArray:Array = createArray(); 
```

查看[http://www.adobe.com/devnet/actionscript/learning/as3-fundamentals/loops.html](http://www.adobe.com/devnet/actionscript/learning/as3-fundamentals/loops.html)了解循环的良好介绍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T09:55:26.377

根据 Paul 的回答，您还可以使用 2d 数组来存储每个数组，其好处是能够使用循环来创建所需数量的数组变体（成本将是必须维护 2d 数组的额外复杂性）。

使用二维数组可能像：

```
function createArrayVarient(){
    var result:Array = new Array();
    var counter:int;

    // 15 as there are 15 numbers added first
    for(counter = 0; counter < 15; counter++){
        result.push(rp.getNum());
    }

    // 12 for the number of "" added
    for(counter = 0; counter < 12; counter++){
        result.push("");
    }
    return result;
}

var arrayVarients:Array = new Array();

// 6 as you have 6 array variants in your sample
for(var counter = 0; counter < 6; counter++){
    arrayVarients.push(createArrayVarient());
} 
```

那么如果您以前没有使用过二维数组，要访问“arrayVarients”中的每个数组变量，它会：

```
arrayVarients[0] // the first array variant
arrayVarients[1] // the second array variant
arrayVarients[2] // the third array variant
...etc 
```

要访问数组变体中的每个值，它会去（使用 2 个索引）：

```
arrayVarients[0][0] // the first value in the first variant array
arrayVarients[2][7] // the eight value in the third variant array 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T09:49:31.800

```
var variants = createVariants(6, 15, 12); 
```

// 使用你的变体： // variables[0][0] 与你的 variant_1[0] 相同

```
function createVariants(numVariants : int, numPrefilled : int, numEmpty : int) : Array{
  var variants : Array = [];
  for(var i : int = 0;i<numVariants;i++){
    var variant : Array = [];
    for(var j : int = 0;j<numPrefilled ;j++){
      variant.push(rp.getNum());
    }
    for(var j : int = 0;j<numEmpty ;j++){
      variant.push("");
    }
    variants.push(variant);
  }
  return variants;
} 
```

# caliburn.micro - 带有 MainMenu 和 SubMenu 的 Caliburn 微导航

> ID：16055955
> 
> 赞同：1
> 
> 时间：2013-04-17T09:06:41.957
> 
> 标签：caliburn.micro

首先感谢 Charleh 的 caliburn.micro 导航解决方案。如果导航其他页面，如何激活 SubMenu 导航到 Page2 和 Deactive？

ShellView.xaml

```
 <Window x:Class="Navigation.ShellView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:cal="clr-namespace:Caliburn.Micro;assembly=Caliburn.Micro"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600" WindowStartupLocation="CenterScreen" Width="800" Height="600">

    <Grid x:Name="LayoutRoot">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!--Header-->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <RowDefinition Height="40"/>
            </Grid.RowDefinitions>
            <ContentControl Grid.Column="1" Grid.Row="0" x:Name="MainMenuRegion" HorizontalContentAlignment="Stretch" HorizontalAlignment="Right" Margin="0,9,17,0" />
            <ContentControl Grid.Column="1" Grid.Row="1" x:Name="SubMenuRegion" HorizontalContentAlignment="Stretch" HorizontalAlignment="Right" Margin="0,0,17,0" />
        </Grid>    

        <!--Content-->
        <ContentControl Grid.Row="2" x:Name="ActiveItem"
                        HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch">
        </ContentControl>
    </Grid>
</Window> 
```

ShellViewModel.cs

```
 namespace Navigation
    {
        public class ShellViewModel : Conductor<object>.Collection.OneActive, IShellViewModel, IHandle<NavigationEventMessage>
        {
            public ShellViewModel(IEventAggregator eventAggregator, INavigationService navigationService, IPage1ViewModel page1ViewModel, IPage2ViewModel page2ViewModel,IMainMenuViewModel mainMenuViewModel, ISubMenuViewModel subMenuViewModel)
            {
                _eventAggregator = eventAggregator;
                _eventAggregator.Subscribe(this);

                navigationService.Navigate(typeof(IPage1ViewModel), null);

                _page1ViewModel = page1ViewModel;
                _page2ViewModel = page2ViewModel;

                Items.Add(_page1ViewModel);
                Items.Add(_page2ViewModel);
                ActiveItem = _page1ViewModel;            
            }

            private readonly IEventAggregator _eventAggregator;
            private readonly IPage1ViewModel _page1ViewModel;
            private readonly IPage2ViewModel _paage2ViewModel;

            public IMainMenuViewModel MainMenuRegion { get; set; }
            public ISubMenuViewModel SubMenuRegion { get; set; }         

            public void Handle(NavigationEventMessage message)
            {
                ActivateItem(message.ViewModel);
            }
        }
    }
public interface IShellViewModel
{
}

public interface INavigationService
{
    void Navigate(Type viewModelType, object modelParams);
}

public class NavigationEventMessage
{
    public IScreen ViewModel { get; private set; }

    public NavigationEventMessage(IScreen viewModel)
    {
        ViewModel = viewModel;
    }
}

public class NavigationService : INavigationService
{
    // Depends on the aggregator - this is how the shell or any interested VMs will receive
    // notifications that the user wants to navigate to someplace else
    private IEventAggregator _aggregator;

    public NavigationService(IEventAggregator aggregator)
    {
        _aggregator = aggregator;
    }

    // And the navigate method goes:
    public void Navigate(Type viewModelType, object modelParams)
    {
        // Resolve the viewmodel type from the container
        var viewModel = IoC.GetInstance(viewModelType, null);

        // Inject any props by passing through IoC buildup
        IoC.BuildUp(viewModel);

        // Check if the viewmodel implements IViewModelParams and call accordingly
        var interfaces = viewModel.GetType().GetInterfaces()
               .Where(x => typeof(IViewModelParams).IsAssignableFrom(x) && x.IsGenericType);

        // Loop through interfaces and find one that matches the generic signature based on modelParams...
        foreach (var @interface in interfaces)
        {
            var type = @interface.GetGenericArguments()[0];
            var method = @interface.GetMethod("ProcessParameters");

            if (type.IsAssignableFrom(modelParams.GetType()))
            {
                // If we found one, invoke the method to run ProcessParameters(modelParams)
                method.Invoke(viewModel, new object[] { modelParams });
            }
        }

        // Publish an aggregator event to let the shell/other VMs know to change their active view
        _aggregator.Publish(new NavigationEventMessage(viewModel as IScreen));
    }
}

// This is just to help with some reflection stuff
public interface IViewModelParams { }

public interface IViewModelParams<T> : IViewModelParams
{
    // It contains a single method which will pass arguments to the viewmodel after the nav service has instantiated it from the container
    void ProcessParameters(T modelParams);
}

public class ViewInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        // The 'true' here on the InSameNamespaceAs causes windsor to look in all sub namespaces too

        container.Register(Component.For<IShellViewModel>().ImplementedBy<ShellViewModel>().LifestyleSingleton());

        container.Register(Component.For<IPage1ViewModel>().ImplementedBy<Page1ViewModel>().LifestyleSingleton());

        container.Register(Component.For<IPage2ViewModel>().ImplementedBy<Page2ViewModel>().LifestyleSingleton());

        container.Register(Component.For<IMainMenuViewModel>().ImplementedBy<MainMenuViewModel>().LifestyleSingleton());

        container.Register(Component.For<ISubMenuViewModel>().ImplementedBy<SubMenuViewModel>().LifestyleSingleton());

    }
}

public class NavigationInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container.Register(Component.For<INavigationService>().ImplementedBy<NavigationService>());
    }
}

public class CaliburnMicroInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        // Register the window manager
        container.Register(Component.For<IWindowManager>().ImplementedBy<WindowManager>());

        // Register the event aggregator
        container.Register(Component.For<IEventAggregator>().ImplementedBy<EventAggregator>());
    }
} 
```

MainMenuView.xaml

```
<UserControl x:Class="Navigation.Views.MainMenuView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"   
             xmlns:cal="clr-namespace:Caliburn.Micro;assembly=Caliburn.Micro"
             mc:Ignorable="d">

    <Grid x:Name="LayoutRoot">
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top">
            <RadioButton IsChecked="True" Content="Page1" cal:Message.Attach="[Event Checked]=[Action Page1Checked]"/>
            <RadioButton Content="Page2" cal:Message.Attach="[Event Checked]=[Action Page2Checked]"/>
        </StackPanel>    
    </Grid>

</UserControl> 
```

MainMenuViewModel.cs

```
namespace Navigation.ViewModels
{
    public class MainMenuViewModel : Conductor<object>.Collection.OneActive, IMainMenuViewModel
    {
        private readonly IEventAggregator _eventAggregator;
        private bool _isAssemblyManagementModule;

        public MainMenuViewModel(IEventAggregator eventAggregator)
        {
            _eventAggregator = eventAggregator; 
        }      

        public void Page1Checked()
        {
            NavigationService navigationService = new NavigationService(_eventAggregator);
            navigationService.Navigate(typeof(IPage1ViewModel), null);

        }

        public void Page2Checked()
        {    
            NavigationService navigationService = new NavigationService(_eventAggregator);
            navigationService.Navigate(typeof(IPage2ViewModel), null);

        }
    }

    public interface IMainMenuViewModel
    {
    }
} 
```

子菜单视图.xaml

```
<UserControl x:Class="Navigation.Views.SubMenuView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"   
             xmlns:cal="clr-namespace:Caliburn.Micro;assembly=Caliburn.Micro"
             mc:Ignorable="d">

    <Grid x:Name="LayoutRoot">
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top">
            <RadioButton IsChecked="True" Content="SubPage1" cal:Message.Attach="[Event Checked]=[Action SubPage1Checked]"/>
            <RadioButton Content="SubPage2" cal:Message.Attach="[Event Checked]=[Action SubPage2Checked]"/>
        </StackPanel>    
    </Grid>     
</UserControl> 
```

子菜单视图模型.cs

```
namespace Navigation.ViewModels
{
    public class SubMenuViewModel : Conductor<object>.Collection.OneActive, ISubMenuViewModel
    {
        private readonly IEventAggregator _eventAggregator;
        private bool _isAssemblyManagementModule;

        public SubMenuViewModel(IEventAggregator eventAggregator)
        {
            _eventAggregator = eventAggregator; 
        }      

        public void SubPage1Checked()
        {
            NavigationService navigationService = new NavigationService(_eventAggregator);
            navigationService.Navigate(typeof(ISubPage1ViewModel), null);

        }

        public void SubPage2Checked()
        {    
            NavigationService navigationService = new NavigationService(_eventAggregator);
            navigationService.Navigate(typeof(ISubPage2ViewModel), null);

        }
    }

    public interface ISubMenuViewModel
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:58:10.667

不是对实际问题的真正答案，而是更多警告：您对 IoC 容器以及如何使用它还有一些其他问题

您正在为视图模型中的每个命令创建一个新的导航服务实例……这不遵循 IoC 或服务方法。

导航服务应由容器解析，因此您的视图模型构造函数应包含一个`INavigationService`参数

例如，您的构造函数`MainMenuViewModel`应该如下所示：

```
private INavigationService _navigationService;

public MainMenuViewModel(INavigationService navigationService)
{
    _navigationService = navigationService;
} 
```

...和用法：

```
public void Page1Checked()
{
    _navigationService.Navigate(typeof(IPage1ViewModel), null);
} 
```

这是因为容器会自动将`INavigationService`实现注入到您的虚拟机中。您不需要对`IEventAggregator`实现的引用（除非您的 VM 依赖于它，但它似乎并不依赖）并且您不应该手动实例化`NavigationService`实例，因为这是容器的工作

这是您第一次使用 IoC 或 MVVM 吗？你能发布更多关于你正在经历什么和你期望什么的信息（可能带有屏幕截图）吗？

编辑：

好的，这就是我能告诉你的所有内容，直到我知道你对你发给我的项目做了什么（棱镜或转移到 CM？）

Caliburn.Micro`IConductor<T>`用作所有可以执行/管理活动屏幕/项目的窗口的基础。这`Conductor<T>`是此接口的标准实现，通常用于管理`IScreen`基于混凝土的。

IConductor接口

[http://caliburnmicro.codeplex.com/SourceControl/changeset/view/ae25b519bf1e46a506c85395f04aaffb654c0a08#src/Caliburn.Micro.Silverlight/IConductor.cs](http://caliburnmicro.codeplex.com/SourceControl/changeset/view/ae25b519bf1e46a506c85395f04aaffb654c0a08#src/Caliburn.Micro.Silverlight/IConductor.cs)

和实施

[http://caliburnmicro.codeplex.com/SourceControl/changeset/view/ae25b519bf1e46a506c85395f04aaffb654c0a08#src/Caliburn.Micro.Silverlight/Conductor.cs](http://caliburnmicro.codeplex.com/SourceControl/changeset/view/ae25b519bf1e46a506c85395f04aaffb654c0a08#src/Caliburn.Micro.Silverlight/Conductor.cs)

默认指挥管理 1 个屏幕。有几个嵌套类实现了多个屏幕 -`Conductor<T>.Collection.OneActive`并`Conductor<T>.Collection.AllActive` 允许其一个或所有项目一次处于活动状态 - （例如，`OneActive`带有选项卡的 Internet Explorer 窗口的示例和`AllActive`Visual Studio 2010 工具窗口的示例)

为了使用此导体实现，您应该理想地使用`IScreen`（或具体`Screen`类）

屏幕界面

[http://caliburnmicro.codeplex.com/SourceControl/changeset/view/ae25b519bf1e46a506c85395f04aaffb654c0a08#src/Caliburn.Micro.Silverlight/IScreen.cs](http://caliburnmicro.codeplex.com/SourceControl/changeset/view/ae25b519bf1e46a506c85395f04aaffb654c0a08#src/Caliburn.Micro.Silverlight/IScreen.cs)

和实施

[http://caliburnmicro.codeplex.com/SourceControl/changeset/view/ae25b519bf1e46a506c85395f04aaffb654c0a08#src/Caliburn.Micro.Silverlight/Screen.cs](http://caliburnmicro.codeplex.com/SourceControl/changeset/view/ae25b519bf1e46a506c85395f04aaffb654c0a08#src/Caliburn.Micro.Silverlight/Screen.cs)

基本上，通过这些实现，如果主窗口被停用，很容易将“停用”消息冒泡到所有孩子及其孩子等等。这也意味着屏幕会收到已激活的通知（OnActivate 等）

例如

```
class ParentWindow : Conductor<IScreen>
{

    void DoSomething() 
    {
        ActivateItem(ItemToActivate); // Previous item is automatically deactivated etc
    }

    override OnActivate() 
    {
        // Activate children or whatever

    }
}

class SomeChildWindow : Screen
{
} 
```

重要的是要注意`Conductor<T>`子类`Screen`，因此可以有子导体和孙导体，它们都将遵守生命周期。

我不确定是否有 Prism 等价物

有一些关于屏幕和生命周期的优秀 Caliburn Micro 文档：

[http://caliburnmicro.codeplex.com/wikipage?title=Screens%2c%20Conductors%20and%20Composition&referringTitle=Documentation](http://caliburnmicro.codeplex.com/wikipage?title=Screens%2c%20Conductors%20and%20Composition&referringTitle=Documentation)

如果您仍在使用 Prism 而不是 Caliburn.Micro 并且没有 Prism 等效项，那么至少 Caliburn.Micro 实现将为您提供一些指导

# css - 中心垂直对齐内部

> ID：16055960
> 
> 赞同：0
> 
> 时间：2013-04-17T09:06:51.320
> 
> 标签：css

像标题一样，我想在`<a>`里面垂直对齐中心`<ul><li>`。这里是[jsfiddle](http://jsfiddle.net/trongcuong1710/gvTLw/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:11:34.973

更改 的行高`a`以匹配 的行高`li`。

```
a {
    /*...preceding styles */
    line-height: 3em; /* Elements line-height set to match parents */
    height: 2em;
    width: 5em;     
    text-align: center;
} 
```

**或者**

`vertical-align:middle`在上设置属性`a`。

```
a{
   /*...Other styles ommitted*/
   vertical-align: middle;
} 
```

**示例** [http://jsfiddle.net/gvTLw/5/](http://jsfiddle.net/gvTLw/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:12:10.217

由于您在两个元素上都指定了高度，因此可以通过添加`margin-top: 0.5em`到`a`.

[像这样](http://jsfiddle.net/gvTLw/3/)

这是因为 的`li`高度为 3em， 的`a`高度为 2em，所以顶部需要半个 em 才能看起来垂直居中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:14:02.747

您需要更改元素的高度和行高`a`以匹配的高度`li`：

```
li {
    height: 3em;
}

a {
    line-height: 3em;
    height: 3em;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:15:24.303

与 Kevin 的响应类似，将锚点上的 line-height 设置为`inherit`将做同样的事情，而无需手动匹配该值

[小提琴](http://jsfiddle.net/IckleChris/rnNMJ/1/)

# less - 预期 ')' 得到 '.' ！！！如何检测有错误的文件？

> ID：16055961
> 
> 赞同：0
> 
> 时间：2013-04-17T09:06:52.163
> 
> 标签：less

我最近升级less到1.3.3v开始遇到这个错误

```
 expected ')' got '.' 
```

在少到 css 编译期间...

这是错误跟踪

> 在错误 (/.rvm/gems/ruby-1.9.3-p286/gems/less-2.3.2/lib/less/js/lib/less/parser.js:198:15) 在期望 (/.rvm/ gems/ruby-1.9.3-p286/gems/less-2.3.2/lib/less/js/lib/less/parser.js:190:13）在对象。(/.rvm/gems/ruby-1.9.3-p286/gems/less-2.3.2/lib/less/js/lib/less/parser.js:884:25) 在 $ (/.rvm/gems/ ruby-1.9.3-p286/gems/less-2.3.2/lib/less/js/lib/less/parser.js:133:24) 在 Object.primary (/.rvm/gems/ruby-1.9.3 -p286/gems/less-2.3.2/lib/less/js/lib/less/parser.js:527:32) 在 $ (/.rvm/gems/ruby-1.9.3-p286/gems/less- 2.3.2/lib/less/js/lib/less/parser.js:133:24) 在 Object.block (/.rvm/gems/ruby-1.9.3-p286/gems/less-2.3.2/lib /less/js/lib/less/parser.js:1121:42) 在 $ (/.rvm/gems/ruby-1.9.3-p286/gems/less-2.3.2/lib/less/js/lib/ less/parser.js:133:24) 在 Object.ruleset (/.rvm/gems/ruby-1.9.3-p286/gems/less-2.3.2/lib/less/js/lib/less/parser.js :1144:`block in to_css' /.rvm/gems/ruby-1.9.3-p286/gems/less-2.3.2/lib/less/java_script/v8_context.rb:90:in`阻塞在 do_lock' /.rvm/gems/ruby-1.9.3-p286/gems/less-2.3.2/lib/less/java_script/v8_context.rb:88:in `do_lock' /.rvm/gems/ruby-1.9.3-p286/gems/less-2.3.2/lib/less/java_script/v8_context.rb:60:in`lock' /.rvm/gems/ruby-1.9 .3-p286/gems/less-2.3.2/lib/less/java_script/v8_context.rb:30:in `exec' /.rvm/gems/ruby-1.9.3-p286/gems/less-2.3.2/lib/less/java_script.rb:26:in`exec' /.rvm/gems/ruby-1.9.3-p286/gems/less-2.3.2/ lib/less/parser.rb:103:in `to_css'

猜猜它的一些语法错误......我的问题是如何检测文件和错误的行号？？？不知道怎么调试？？？有什么建议么 ？？？？

PS：升级前没遇到过

# shell - 比较文件名模式

> ID：16055965
> 
> 赞同：0
> 
> 时间：2013-04-17T09:07:00.867
> 
> 标签：shell, unix, grep, tar

我在 tar.gz 存档中有一些 server.log."date" 和 data.log."date" 类型的文件，其中 date 是文件创建的日期。

现在我需要检索 server.log.* 类型的文件并在其中搜索字符串模式。

目前我正在使用以下脚本。

```
tar -ztf file.tar.gz | while read FILENAME
do
        if tar -zxf file.tar.gz "$FILENAME" -O | grep "string"
        then
            echo "$FILENAME contains string"
        fi
done 
```

问题是，当使用上面的“if”条件时，我在 server.log.* 和 data.log.* 文件中得到字符串模式匹配

在“if”语句中，我需要添加一个条件，以便将每个 FILENAME 与模式 server.log.* 进行比较，并且仅对 server.log.* 文件执行 grep

欢迎任何帮助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:05:09.750

您可以`if`在循环内部之前应用如下内容：

```
[[ "$FILENAME" != server.log.* ]] && continue 
```

当然你也可以在 if 条件之前添加

```
if [[ "$FILENAME" == server.log.* ]] && tar -zxf file.tar.gz "$FILENAME" -O | grep "string" 
```

也许`-q`可以在 grep 中添加一个 arg，而不是向标准输出写入行。

# asp.net-mvc - 单击提交按钮后，在 MVC 3.0 Web 应用程序中将日期设置为 01/01/0001 00:00:00

> ID：16055969
> 
> 赞同：2
> 
> 时间：2013-04-17T09:07:15.447
> 
> 标签：asp.net-mvc, datetime, postback

我为我的 MVC Web 应用程序设计了一个表单，用户可以使用它输入详细信息。其中一个细节是他/她可以从日期时间选择器中选择的日期。

输入包括 Date 在内的所有详细信息后，我提交了表单，但没有转到下一页，而是**重新加载相同的表单，并在 Date 字段上显示验证错误并将 01/01/0001 00:00:00 设置为日期。**

解决办法是什么 ？

我已经像这样声明了我的日期时间变量-

```
[Required]
[DisplayFormat(DataFormatString = "{0:dd-MM-yyyy}", ApplyFormatInEditMode = true)]
public DateTime ShipmentDate { get; set; } 
```

这里面有什么遗漏吗？

技术细节 ：

我已经在**Windows Server 2012 上部署了我的 MVC 应用程序。数据库是 SQL Server 2012 和 Web 服务器是 IIS 8 。**

当我从我的开发版本运行时，它运行良好，即 - 从 Visual Studio 2012- Db SQL Server 2012 - IIS 7.5。但是上面的行是我想要使用的实时版本。

请帮助解决混乱。

一种可能的解决方案是脱离上下文的 DateTimePicker 文件。当我测试应用程序时，通过输入日期，例如：2013 年 4 月 17 日 .. 它起作用了。

我为 datetimePicker 使用了一个外部 .js 文件。该文件的操作系统要求是 Windows 7 、 Windows Vista。

我已经在 Windows Server 2012 上部署了我的应用程序（甚至是服务器上的 datepickerFile）。因此，我认为，文件的 JQuery Logic 没有得到实现，因此即使在表单的 textBox 中设置后日期仍然为空。

最终，当我们进行回发时，将 null 值返回给我的模型，并检查 Model.IsValid 的条件是否为 null ，但失败，并重新创建视图。由于 Datetime 的默认值为 01/01/0001 00:00:00 ，因此该值在 dateTime 字段中被初始化。

问候，

曼格什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-04-18T14:03:48.767

当文化信息不正确时会发生这种情况，您需要配置 web.conf

```
<system.web>    
    <globalization culture="en-US" />
</system.web> 
```

[这](https://msdn.microsoft.com/es-es/library/system.globalization.cultureinfo%28VS.80%29.aspx)是一个不同文化信息的列表，这些信息取决于您所在的国家/地区。

这是 IIS 8.0 和更新版本的问题。

# algorithm - 分布式系统：Leader 选举

> ID：16055973
> 
> 赞同：7
> 
> 时间：2013-04-17T09:07:20.603
> 
> 标签：algorithm, protocols, distributed-system

我目前正在研究一个分布式系统，我们必须在其中实施某种[领导人选举](http://en.wikipedia.org/wiki/Leader_election)。问题是我们希望避免所有计算机都必须相互了解——但只有领导者。有没有一种快速的方法可以让我们使用例如广播来实现我们想要的？

还是我们只需要知道至少一个，就可以进行一次好的领导人选举？

假设所有计算机都在同一个子网上。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-04-13T23:59:59.167

> 问题是我们希望避免所有计算机都必须相互了解——但只有领导者。

领导者选举是从一组潜在领导者候选人中挑选一个领导者的问题。将其视为具有两个必需的属性：*liveness*和*safety*。在这里，*活跃*性意味着“大多数时候，有一个领导者”，而*安全性*意味着“有零个或一个领导者”。让我们考虑如何在您的示例中使用广播解决此安全属性。

让我们选择一个简单的（损坏的）算法，假设每个节点都有一个唯一的 ID。每个节点广播其 ID 并进行侦听。当收到比自己更高的 ID 时，它会停止参与。如果它接收到比它自己的 ID 低的 ID，它会再次发送它自己的广播。假设一个同步网络，每个人收到的最后一个 ID 是领导者的 ID。现在，介绍一个网络分区。该协议将愉快地在分区的任何一侧继续，并且将选出两个领导者。

这个损坏的协议确实如此，但所有可能的协议也是如此。如果您不知道（至少）存在多少个节点，您如何区分无法通信的节点和不存在的节点？所以有第一个*安全*结果：您需要知道存在多少个节点，否则您无法确保只有一个领导者。

现在，让我们将*安全*约束放宽为概率约束：“可以有零个或多个领导者，但大多数时候只有一个”。这使得问题易于处理，一个广泛使用的解决方案是八卦（流行病协议）。例如，请参阅[A Gossip-Style Failure Detection Service](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.20.5411)，其中讨论了这个确切问题的一个变体。该论文主要关注概率正确的故障检测和枚举，但如果你能做到这一点，你也可以进行概率正确的领导者选举。

据我所知，如果不至少枚举参与者，就无法在一般网络中进行安全的非概率领导者选举。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:31:13.883

作为我上次看到的有趣的“分布式机制”解决方案之一，我推荐 Apache [zookeeper](http://zookeeper.apache.org/)项目。这是开源解决方案，因此至少您应该能够从那里获得一些想法。此外，它正在密集开发，因此您可能可以将其作为解决方案的一部分重用。

> ZooKeeper 是一个集中式服务，用于维护配置信息、命名、提供分布式同步和提供组服务。所有这些类型的服务都以某种形式被分布式应用程序使用。每次实施它们时，都会进行大量工作来修复不可避免的错误和竞争条件。由于实现这些服务的难度，应用程序最初通常会忽略它们，这使得它们在发生变化时变得脆弱并且难以管理。即使正确完成，这些服务的不同实现也会在部署应用程序时导致管理复杂性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-03T03:44:51.017

我会推荐 JGroups 来解决这个问题——假设你正在 JVM 之上构建一个系统。

[http://www.jgroups.org/](http://www.jgroups.org/)

使用 LockService 确保集群中只有 1 个节点是领导者。JGroups 可以设置为使用 Peer Lock 或 Central Lock - 两者都应该适用于您的情况。

有关Clojure 实现，请参见[http://withmeta.blogspot.com/2014/01/leader-election-problem-in-elastic.html ，或](http://withmeta.blogspot.com/2014/01/leader-election-problem-in-elastic.html)[http://javabender.blogspot.com.au/2012/01/jgroups-用于 Java 的lockservice-example.html](http://javabender.blogspot.com.au/2012/01/jgroups-lockservice-example.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-22T11:28:50.980

一个实用的解决方案是使用数据库作为“会面”点。

如果您已经在使用 SQL DB，这个解决方案非常方便，只需要一个新表。如果您使用的是数据库集群，则可以利用其高可用性。

这是我的实现使用的表格：

```
CREATE TABLE Lease (
  ResourceId varchar(64),
  Expiration datetime,
  OwnerId varchar(64),
  PRIMARY KEY(ResourceId)
); 
```

这个想法是每个共享资源都有一行。领导者将竞争同一行。

我的过度简化的 C# 实现如下所示：

```
class SqlLease {
  private ISqlLeaseDal _dal;
  private string _resourceId;
  private string _myId;

  public SqlLease(ISqlLeaseDal dal, string resourceId) {
    _dal = dal;
    _resourceId = resourceId;
    _myId = Guid.NewGuid().ToString();
  }

  class LeaseRow {
      public string ResourceId {get; set;}
      public string OwnerId {get; set;}
      public Datetime Expiration {get; set;}
      public byte[] RowVersion {get; set;}
  }

  public bool TryAcquire(Datetime expiration) {
    expiration = expiration.ToUniversalTime();
    if (expiration < DateTime.UtcNow) return false;
    try {
      var row = _dal.FindRow(_resourceId);
      if (row != null) {
        if (row.Expiration >= DateTime.UtcNow && row.OwnerId != _myId) {
          return false;
        }
        row.OwnerId = _myId;
        row.Expiration = expiration;
        _dal.Update(row);
        return true;
      }
      _dal.Insert(new LeaseRow {
        ResourceId = _resourceId,
        OwnerId = _myId,
        Expiration = expiration,
      });
      return true;
    } catch (SqlException e) {
      if (e.Number == 2601 || e.Number == 2627) return false;
      throw e;
    } catch (DBConcurrencyException) {
      return false;
    }
  }
} 
```

该类`ISqlLeaseDal`封装了 SQL 连接和对表的低级访问。

使用合理的截止日期。请记住，如果当前领导者失败，资源将被锁定直到到期结束。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-08T19:11:37.527

@Marc 已经很好地描述了它。我想在上面补充几点。

如果所有参与系统必须不知道彼此，则广播 ID（或说时间戳）不会显示其状态，除非它被选为领导者。一旦被选为领导者，它现在可以广播机器的状态以供集群中的所有其他节点连接。

如果参与的系统根本不能透露它们的存在，那么必须有一个系统来进行通信，例如一个 DB（如 Igor 所提到的）、一个基于 TCP 的系统或一个安装位置（zookeeper 选择的方式），所有机器状态都是存储但最少（或第一个具有读取权限）并且领导者不断将其状态更新到该系统。如果领导者宕机，则系统通过使其可供其他节点读取来选择下一个节点作为领导者，从而清理最后一个领导者条目。

Zookeeper 创建一个可用于所有节点读取的临时节点。每当集群状态发生变化时，可以通过仅使顶部节点可供读取来覆盖此行为。

仅当大量节点同时启动（以毫秒为单位）并且中间系统需要很长时间才能返回微不足道的结果时，并发才会成为问题。

# c# - 用 int 替换 TextBox

> ID：16055977
> 
> 赞同：0
> 
> 时间：2013-04-17T09:07:34.540
> 
> 标签：c#, string, textbox, int

我有以下内容，并且有效：

我的玩家等级：

```
 public Player(string Str, string SP)
    {
        Strength = Str;
        StatPoints = SP;
    }
    public string StatPoints
    {
        get;
        set;
    }
    public string Strength
    {
        get;
        set;
    } 
```

现在在我的 form1 上，我有一个文本框和一个按钮。只要 SP 文本框中的值大于 0，该按钮就会将文本框中的值加一。问题是，我声明了六个变量来管理两个值，因为我必须将字符串转换为整数和所有这些废话。有没有办法用本质上是 int 的东西替换文本框？到目前为止，这是我的字符表代码。

```
 private void AddButton_Click(object sender, EventArgs e)
    {

        Player PCStats = new Player(StrBox.Text, SPBox.Text);
        int IntPCSP = Convert.ToInt16(PCStats.StatPoints);
        int IntPCStr = Convert.ToInt16(PCStats.Strength);

        if (IntPCSP >= 1 && IntPCStr <= 7)
        {
            IntPCStr++;
            IntPCSP--;
            PCStats.Strength = IntPCStr.ToString();
            PCStats.StatPoints = IntPCSP.ToString();
            StrBox.Text = PCStats.Strength;
            SPBox.Text = PCStats.StatPoints;
        }
        else
        {
            MessageBox.Show("Earn more experience!");
        }
        /*
        MessageBox.Show("PCStats.StatPoints equals" + PCStats.StatPoints);
        MessageBox.Show("PCStats,Strength equals" + PCStats.Strength);
        MessageBox.Show("IntPCSP Equals" + IntPCSP.ToString());
        MessageBox.Show("IntPCStr Equals" + IntPCStr.ToString());
        */
    } 
```

或者有没有更简单的方法可以做到这一点，我完全忽略了。经过大量的试验和错误后，我终于可以开始工作了，我非常兴奋，但我愿意重做。但是，我宁愿只替换文本框，这样我就不会到处转换变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:23:42.983

这是快速的，不是在装有 Visual Studio 的计算机上，但应该让你开始。此外，尝试命名你的变量等以具有更多意义。此外，这是为了修复您所拥有**的内容，**但请参阅我的更新/建议，进一步了解将逻辑移入`Player`课堂......

**我的玩家等级：**

```
public Player(int strength, int statPoints)
{
    this.Strength = strength;
    this.StatPoints = statPoints;
}

public int StatPoints { get; set; }

public int Strength { get; set; } 
```

**我的表格：**

```
private void AddButton_Click(object sender, EventArgs e)
{
    Player thePlayer = new Player(int.Parse(StrBox.Text), int.Parse(SPBox.Text));

    if (thePlayer.StatPoints > 0 && thePlayer.Strength < 8)
    {
        thePlayer.Strength++;
        thePlayer.StatPoints--;
        StrBox.Text = thePlayer.Strength.ToString();
        SPBox.Text = thePlayer.StatPoints.ToString();
    }
    else
    {
        MessageBox.Show("Earn more experience!");
    }
} 
```

显然，您需要检查文本框中的值是否为整数。您可以使用另一个控件，屏蔽文本框等，或者在代码替换`int.Parse`上`int.TryParse`进行转换之前可以进行的检查。只需几个想法即可助您一臂之力！

**- 更新 -**

您可以做的另一件事是将更多的逻辑融入`Player`课堂。这样做更好，因为它将逻辑包含在一个地方，这样您就可以看到 a`Player`可以**做**什么，而不必搜索整个程序：

**新玩家等级：**

```
// The Player class
public class Player
{
    // Constructor
    public Player(int strength, int statPoints)
    {
        this.Strength = strength;
        this.StatPoints = statPoints;
    }

    // Method to gain strength if enough StatPoints
    public bool GainStrength()
    {        
        bool playerHasEnoughStatPoints = true;

        if (this.StatPoints < 1)
        {
            playerHasEnoughStatPoints = false;
        }
        else if (this.Strength < 8)
        {
            this.Strength++;
            this.StatPoints--;
        }

        return playerHasEnoughStatPoints;
    }

    // Property for StatPoints
    public int StatPoints { get; set; }

    // Property for Strength
    public int Strength { get; set; }
} 
```

**新形式：**

```
// The Form or similar
public class MyFormOrSimilar
{   
    // When button pressed try and add strength to the player
    protected void AddButton_Click(object sender, EventArgs e)
    {
        // Create new INSTANCE of the player and try to give them strength
        Player thePlayer = new Player(int.Parse(StrBox.Text), int.Parse(SPBox.Text));
        if (thePlayer.GainStrength())
        {
            StrBox.Text = thePlayer.Strength.ToString();
            SPBox.Text = thePlayer.StatPoints.ToString();
        }
        else
        {
            MessageBox.Show("Earn more experience!");
        }
    }
} 
```

# c - Msvc 及其输出控制台

> ID：16055981
> 
> 赞同：0
> 
> 时间：2013-04-17T09:07:54.137
> 
> 标签：c, visual-c++, visual-studio-2010

当我尝试在 MSVC 中运行应用程序时，它会在未附加到 MSVC 窗口的控制台上提供输出。

是否可以将输出附加到 MSVC，就像它在称为“输出”的窗口上提供构建详细信息一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:03:01.857

已经有一些像你这样的问题，找到它们并不是很棘手。

[在 Visual Studio 2005 输出窗口中捕获 cout？](https://stackoverflow.com/questions/73286/capturing-cout-in-visual-studio-2005-output-window)

[如何使用 STL IO 将文本输入 Visual Studio 输出窗口？](https://stackoverflow.com/questions/1721134/how-do-i-get-text-into-visual-studio-output-window-using-stl-io)

[如何在 Visual C++ 中保持控制台窗口打开？](https://stackoverflow.com/questions/454681/how-to-keep-the-console-window-open-in-visual-c)

# python - 如何找到由完全面对面的字母组成的单词？（Python）

> ID：16055985
> 
> 赞同：0
> 
> 时间：2013-04-17T09:08:06.480
> 
> 标签：python

我尝试了很多方法来制作这个功能，但总是失败。

举些例子：

> “他就是那个男孩。”
> 
> “欺负他”

问题的第一件事是找到与“boy”配对的单词，“b”将与“y”配对，“o”未配对，如果“bully”，“b”与“y”配对" 和 "u" 与 "l" 但第一个 "l" 未配对

那么，单词中的第一个字母和单词中的最后一个字母必须满足这个要求：

```
word1= ('a','b','c','d','e','f','g','h','i','j','k','l','m')
word2= ('z','y','x','w','v','u','t','s','r','q','p','o','n') 
```

“a”只能与“z”配对，“b”只能与“y”配对，依此类推

所以“he is the boy”的输出只有“boy”，因为“h”不与“e”配对，“i”不与“s”配对，“t”不与“e”配对

但是，对于“bully”，虽然包括了“b”和“y”，但不包括“u”和“l”，所以不会有“bully him”的输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:11:42.340

```
>>> tr = str.maketrans('abcdefghijklm', 'zyxwvutsrqpon')
>>> def isPalindromyWord(word):
        t = word.translate(tr)
        return t == t[::-1]
>>> s = 'he is the boy'
>>> list(filter(isPalindromyWord, (word for word in s.split(' '))))
['boy'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:19:02.707

这是一个尝试：

```
>>> word1= ('a','b','c','d','e','f','g','h','i','j','k','l','m')
>>> word2= ('z','y','x','w','v','u','t','s','r','q','p','o','n')
>>> [w for w in s.split() if w[0] in word1 and w[-1] in word2 and word1.index(w[0]) == word2.index(w[-1])]
['boy'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T11:45:21.527

将你的`word1`and压缩`word2`成一个名为的字符串`alphabets`

```
alphabets = 'abcdefghijklmnopqrstuvwxyz' 
```

下面的函数会做你想做的（它不是很漂亮）

```
def find_match(s): 
    split_s=s.lower().split(' ')
    matches = []
    for word in split_s: 
        found = 0
        sum = 0
        for i in xrange(0,len(word)//2):
            sum += 1
            if alphabets.index(word[i])+alphabets.index(word[len(word)-i-1]) == 25:
                found += 1
        if found == sum: 
            matches.append(word)
    return matches 
```

输出

```
>>> find_match('bully him')
[]
>>> find_match('the boy wants ')
['boy']
>>> find_match('the boy wants aazz')
['boy', 'aazz']
>>> find_match('the boy wants abayz')
['boy', 'abayz']
>>> find_match('the boy wants abasz')
['boy'] 
```

拆分您的输入字符串以提取单词。然后对于每个单词，将第一个和最后一个字母（等等）与它们在字母表中的实际位置进行比较（它们的索引总和`alphabet`应该是`25`，即最大索引 in `alphabets`）。如果单词的每个字母都匹配，则将该单词添加到匹配单词列表中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:13:07.473

```
>>> from string import punctuation
>>> text = "he is the boy."
>>> word1 = ('a','b','c','d','e','f','g','h','i','j','k','l','m')
>>> word2 = ('z','y','x','w','v','u','t','s','r','q','p','o','n')
>>> d = dict(zip(word1 + word2, word2 + word1))
>>> words = (w.strip(punctuation) for w in text.split())
>>> [w for w in words if d[w[0]] == w[-1]]
['boy'] 
```

# javascript - jquery在复选框上触发更改事件

> ID：16055990
> 
> 赞同：32
> 
> 时间：2013-04-17T09:08:15.560
> 
> 标签：javascript, jquery

是否可以使用 javascript/jquery 在复选框上触发更改事件？

像这样的东西（我点击一个按钮运行 triggerChange ）：

```
<label><input type="checkbox" id="chk"/>Label for chk</label>

<script>
function triggerChange(){
    $("#chk").trigger("change");
}
</script> 
```

当我运行上面的代码时，我得到这个错误：“**触发器不是函数**”。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-17T09:14:22.933

该`trigger is not a function`错误消息表明还有其他事情在起作用。根据这个SO问题：

[找不到 jQuery 选择器时会发生什么？](https://stackoverflow.com/questions/5705067/what-happen-when-the-selector-didnt-find-in-jquery)

`no.good.at.coding`说：

> 但是请注意，您必须确保选择器是一个 jQuery 对象！否则，您可能会收到指示“触发器不是函数”的错误。

您可能忘记了 jQuery？

* * *

至于你的实现，你应该很好地使用它。但`trigger`应该用于触发已经通过 jQuery 附加的元素上的事件方法。查看我的演示：

**小提琴：**
有点击事件：http: [//jsfiddle.net/fS4R5/1/](http://jsfiddle.net/fS4R5/1/)
没有点击事件：http: [//jsfiddle.net/fS4R5/2/](http://jsfiddle.net/fS4R5/2/)

**HTML：**

```
<label><input type="checkbox" id="chk"/>Label for chk</label> 
```

**JS：**

```
function triggerChange(){
    $("#chk").trigger("change");
}

$("#chk").change(function() {
   alert("triggered!"); 
});

triggerChange(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-17T09:12:16.533

在 jQuery 中，您通常可以通过调用它的 eventhandler 方法来触发事件，而无需任何函数参数。

例如，点击处理程序可以这样分配：

`$('#mything').click(function(e){dostuff});`

点击事件本身可以通过简单的运行来触发： `$('#mything').click();`

我怀疑这可以为 jQuery 中的每个现有事件完成。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-08-20T08:18:39.923

确保启用输入类型复选框，以防禁用触发器不会触发事件

```
//fire event 
$('#ceckBoxId').click();
$('#ceckBoxId').trigger('click'); 
```

或更改复选框`checked`值

```
$('#ceckBoxId').prop('checked', true);
$('#ceckBoxId').prop('checked', false); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T09:13:52.090

我认为自 1.9.1 以来的首选方法是“开”。特别是如果您使用动态添加的复选框。

假设你有一个 id='divCONntent' 的 div 并且上面有一个 id='cballaut' 的复选框，你可以这样做

```
$('#divcontent').on('click', '#cballaut', function (e) {
                    alert(this.checked);
                }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-03T03:14:22.497

使用道具方法。

```
$('#myCheck').prop('checked', true);
$('#myCheck').prop('checked', false); 
```

# mips - sscanf 在 mips 平台上无法正常工作

> ID：16055991
> 
> 赞同：1
> 
> 时间：2013-04-17T09:08:15.780
> 
> 标签：mips, scanf

以下代码适用于 x86，但不适用于 mips 平台。

* * *

```
 char *str = "11111111-22222222 r-xp 00000000 00:0e 1843624    /lib/libdl.so.0";
  unsigned long long start_addr, stop_addr, offset;
  char* access = NULL;
  char* filename = NULL;
  sscanf(str, "%llx-%llx %m[-rwxp] %llx %*[:0-9a-f] %*d %ms",
           &start_addr, &stop_addr, &access, &offset, &filename);

  printf("\n start : %x, stop : %x, offset : %x\n",start_addr,stop_addr,offset);
  printf("\n Permission : %s\n",access);
  printf("\n Filename : %s\n",filename); 
```

* * *

## 在 x86 中，它输出：

```
 start : 11111111, stop : 22222222, offset : 0
 Permission : r-xp
 Filename : /lib/libdl.so.0 
```

## 但在 mips 中显示：

```
 start : 7ff20f5b, stop : 11111111, offset : 0
 Permission : (null)
 Filename : (null) 
```

我使用 mipsel-linux-uclibc 工具链进行编译。有人可以帮忙吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T21:10:34.463

C 代码在 SunOS 上生成分段错误。所以它适用于 Linux，但不适用于 RISC 架构，比如 MIPS（？）。您应该调查为什么使用`gdb`调试器，所以使用命令`man gdb`或运行 gdb 并插入断点，否则我将作为练习来做。

# batch-file - 转义和登录批处理命令行参数

> ID：16055998
> 
> 赞同：0
> 
> 时间：2013-04-17T09:08:35.343
> 
> 标签：batch-file

我使用这个批处理文件 test.bat：

```
setlocal EnableDelayedExpansion
set var=%*
md "c:\testfolder\!var!" 
```

这运行得很好，例如“test.bat 这是一个测试”，但是当使用特殊字符时它不起作用。所以“test.bat test & go”只创建文件夹“c:\testfolder\test”。如何转义所有特殊字符？

我尝试使用 test.bat “this a & test”，但是当我回显时！var！然后它与双引号相呼应，我不希望那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:52:23.520

```
FOR %%d IN (%*) DO md "u:\testfolder\%%~d" 
```

应该可以工作（不需要 ENABLEDELAYEDEXPANSION）

它也适用于制作多个目录

```
yourbatch "test & go" nospecial "oranges & lemons" 
```

创造`test & go` `nospecial`和`oranges & lemons`

现在你必须在批量 lynch mob 让你创建愚蠢的目录名称之前离开城镇......

* * *

修改新要求。

```
@ECHO OFF
SETLOCAL
FOR %%d IN (%*) DO SET "var=%%~d"
SET var
ECHO =========
ECHO %var:&=^&%
ECHO ++++++++++
SET "var=%var:&=^&%"
ECHO %var% 
```

`&`通过替换`^&`，转义`&`