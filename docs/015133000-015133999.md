# StackOverflow 问答 15133000-15133999

# android - 如何将 SQLite 数据库文件从 Android 设备下载/复制到桌面？

> ID：15133004
> 
> 赞同：3
> 
> 时间：2013-02-28T10:21:49.923
> 
> 标签：android, sqlite, android-sqlite

我有我的 Android 应用程序，我在其中使用 SQLite 数据库。一切正常。但我想下载 .db 文件来检查我的数据库架构和数据库中的数据。但我不知道如何从 android 设备复制 SQLite .db 文件。我使用 Google Nexus 7 进行开发。请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T10:25:43.207

您可以使用 adb pull 命令将文件从连接的设备读取到您的桌面。

例如`adb pull /data/data/com.foo.bar/databases/MyDatabase`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T10:33:29.403

您好，您想要 o 下载 SQLite 数据库浏览器**[单击此处](http://sourceforge.net/projects/sqlitebrowser/)**下载，然后在 Eclipse 中选择您的项目并转到**DDMS**窗口，您将找到一个由选项卡组成的子窗口，单击**文件资源管理器** ，然后单击数据文件夹，将出现一个下拉文件夹再来一次点击数据文件夹现在你可以看到你在eclipse中加载的所有项目然后选择你的项目如果它包含数据库意味着它会显示你的数据库文件夹点击你会找到你的数据库选择你想要的数据库点击**保存图标**（从设备中提取文件）然后保存您的数据库。现在打开下载的 SQLite db 浏览器并浏览 .db 扩展文件，您可以查看 Database 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:23:44.840

使用此方法将数据库复制到设备的外部数据存储

```
private void copyDbToExternal(Context context) {
    try {
        File sd = Environment.getExternalStorageDirectory();
        File data = Environment.getDataDirectory();

        if (sd.canWrite()) {
            String currentDBPath = "//data//data//" + context.getApplicationContext().getPackageName() + "//databases//"
                                    + DB_NAME;
            String backupDBPath = DB_NAME;
            File currentDB = new File(data, currentDBPath);
            File backupDB = new File(sd, backupDBPath);

            FileChannel src = new FileInputStream(currentDB).getChannel();
            FileChannel dst = new FileOutputStream(backupDB).getChannel();
            dst.transferFrom(src, 0, src.size());
            src.close();
            dst.close();
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

# wpf - 单击wpf中的按钮时如何避免TextBox失去焦点？

> ID：15133005
> 
> 赞同：6
> 
> 时间：2013-02-28T10:21:53.957
> 
> 标签：wpf, textbox

![在此处输入图像描述](../Images/0a805255b5a280ca489dfca7b4236f0b.png)

现在光标聚焦在 TextBox 中。如果我点击按钮 (RemoveLostFocus)，TextBox 的 Lost focus 事件会被触发。但我需要的是，TextBox 的 Lost Focus 事件不应该触发。有什么办法吗？

```
private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        txtUserName.Focus();
    }

private void UserName_LostFocus(object sender, RoutedEventArgs e)
    {
        if (txtUserName.Text.Length < 1)
        {
            MessageBox.Show("UserName should not be empty");
        }
    }

    private void btnCancel_Click(object sender, RoutedEventArgs e)
    {
        this.Close();
                    anotherWindow.Show();
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T20:55:59.553

您将希望使用`FocusManager`附加的属性将焦点应用于焦点更改`TextBox`时`Button`

例子：

```
<StackPanel>
    <TextBox Name="txtbx" />
    <Button Content="Click Me!" FocusManager.FocusedElement="{Binding ElementName=txtbx}"/>
</StackPanel> 
```

使用此解决方案，`TextBox`即使`Button`按下 并且`TextBox` `LostFocus`不会触发事件，The 也将始终保持焦点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-29T22:17:04.167

您可以在按钮上设置 Focusable="False"。这是答案的[链接 在此处输入链接描述](https://stackoverflow.com/questions/2010826/is-it-possible-to-click-a-button-without-ever-losing-focus-on-a-textbox)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T10:33:44.923

设置[焦点属性](http://msdn.microsoft.com/en-us/library/system.windows.uielement.focusable.aspx)

```
<Button Focusable="False" /> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-28T10:39:57.620

在您的按钮的 Click-Event 中，您可以执行类似的操作

```
this.textBox.Focus(); 
```

如果你的 lostfocus-method 看起来像这样：

```
private void UserName_LostFocus(object sender, RoutedEventArgs e){ ... } 
```

您可以使用以下代码防止丢失焦点：

```
this.textBox.LostFocus -= UserName_LostFocus; 
```

# c# - ToolStripButton 工具提示位置错误

> ID：15133007
> 
> 赞同：2
> 
> 时间：2013-02-28T10:21:57.703
> 
> 标签：c#, .net, winforms, toolstrip, toolstripbutton

我有一个带有几个`ToolStripButtons`工具提示的 ToolStrip。当我突出显示任何按钮时，工具提示显示得很好，但它的位置离光标有点远。

我不知道为什么会发生这种情况，我试图解决它但无济于事。我附上了一个屏幕截图来显示问题。

![在此处输入图像描述](../Images/a87220d737c1524850850b6621d08e2d.png)

# mysql - 如何限制每个用户在一个mysql表中有1000条记录

> ID：15133009
> 
> 赞同：0
> 
> 时间：2013-02-28T10:22:08.470
> 
> 标签：mysql, sql, architecture

我有 1,000,000 个用户，我想存储用户最近的 1000 个历史记录。

所以我想将我们的数据始终限制为 1,000,000 * 1000，并且我将创建多个带有用户 ID 的表。

而且我有更多的用户，我不想在后台扫描每个用户的记录限制，我认为这很丑陋。

有一些特点：

> *   该表是存储用户的历史记录
> *   限制每个用户在表中只有 1000 行
> *   如果用户的新数据要插入一行，丢弃最旧的行
> *   始终为 1000，允许非实时
> *   1,000,000 名用户
> *   它很社交，插入速度必须快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:29:36.123

创建一个触发器，该触发器将在插入新行时截断最旧的行。

[http://dev.mysql.com/doc/refman/5.5/en/triggers.html](http://dev.mysql.com/doc/refman/5.5/en/triggers.html)

# ios - 在 Objective-c 中折叠部分

> ID：15133013
> 
> 赞同：3
> 
> 时间：2013-02-28T10:22:14.503
> 
> 标签：ios, objective-c, cocoa-touch

我在我的应用程序中做一个应用程序表单，我想做出一些有创意的事情，所以我想到了将表单组件分成几个部分（如下图），并对它们进行折叠和扩展影响。

![倒塌](../Images/29b7ee8ec487f9a26d27d6c950e582da.png) ![展开](../Images/533afdc8b665d8c104624850a0a7ae55.png)

是否有任何课程或其他东西可以帮助我实现这一点，或者我必须手动完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:36:53.237

我曾经利用 UITableView 和方法

```
- (void)insertRowsAtIndexPaths:(NSArray *)indexPaths 
  withRowAnimation:(UITableViewRowAnimation)animation 
```

和

```
- (void)deleteRowsAtIndexPaths:(NSArray *)indexPaths 
  withRowAnimation:(UITableViewRowAnimation)animation 
```

模拟和展开/折叠行为。

有关更多详细信息，请参阅[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)。

我使用了可选择的部分标题（通过 UIButton 或手势识别器）让用户展开/折叠。

还有很多教程非常解释性，使用不同的技术：

*   [iOS 的可折叠表格视图](http://www.codeproject.com/Articles/240435/Collapsable-Table-View-for-iOS)
*   [适用于 iOS 的可扩展/可折叠表格](http://blog.paxcel.net/blog/expandablecollapsible-table-for-ios/)

最后，您可以查看此控件，该控件应提供您正在搜索的功能：

[UIExpandableTableView](https://github.com/OliverLetterer/UIExpandableTableView)

# salesforce - 显示未知 SOQL 查询的结果

> ID：15133014
> 
> 赞同：2
> 
> 时间：2013-02-28T10:22:24.083
> 
> 标签：salesforce, apex-code, visualforce

我有一个要求，我想知道它是否可能。我有 visualforce 页面，它将显示 SOQL 查询的结果，但是 SOQL 查询是动态的，可能是对自定义对象或标准对象的查询。我目前正在将 SOQL 查询硬编码到控制器类中，同时试图弄清楚它是如何工作的。我打算在 Apex 的 pageBlockTable 或 dataTable 中显示 SOQL 查询的结果。

这在 Salesforce 中是否可行，如果可以的话，谁能给我一个例子，说明它在 Visualforce 和 Apex 中如何工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:47:26.753

您应该阅读“动态引用”（也称为“动态绑定”）。一个好的起点： http: [//www.salesforce.com/us/developer/docs/pages/Content/pages_dynamic_vf_sample_standard.htm](http://www.salesforce.com/us/developer/docs/pages/Content/pages_dynamic_vf_sample_standard.htm)

基本上如果你有`String fieldName = 'AccountNumber';`，稍后在 Visualforce 中你可以直接引用它：

`<apex:outputField value="{!a.AccountNumber}">`或动态：

`<apex:outputField value="{!a[fieldName]}">`.

这类似于拥有`a.AccountNumber`或`a.get('AccountNumber')`在 Apex 中。如果您从未见过，请查看例如[在 apex salesforce 中按名称获取字段的值。](https://stackoverflow.com/questions/15114586/getting-value-of-a-field-by-its-name-in-apex-salesforce)

* * *

您必须小心它们，因为如果您的基础对象不是帐户，它将失败（例如，没有`Contact.AccountNumber`字段）。上面的示例仅涉及帐户，但无论如何它都是一个很好的介绍。

一旦您熟悉了基本概念，您就可以探索字段集的世界[-](http://www.salesforce.com/us/developer/docs/pages/Content/pages_dynamic_vf_field_sets.htm)应该组合在一起的预定义字段组 - 您可以将它们用于显示和查询数据，基本上它们比带有字段名称的硬编码字符串列表更强大（就像在第一个链接中一样）但仍然是相同的想法。

至少您现在会知道要查找哪些关键字；）

# google-chrome-extension - Chrome 扩展程序，onbeforerequest，哪个页面正在调用？

> ID：15133017
> 
> 赞同：6
> 
> 时间：2013-02-28T10:22:32.743
> 
> 标签：google-chrome-extension

我正在制作一个小型 google chrome 扩展程序，它正在监视页面正在进行的所有调用。这个想法是记录页面的行为方式以及进行了多少外部调用。除了我需要获取发起呼叫的页面的源 URL 的部分之外，一切正常。

例如，我在浏览器中访问 www.stackoverflow.com，然后我的 onbeforerequest 列表器启动并给我所有的调用。到目前为止，一切都很好。但我仍然想要进行调用的页面的名称，在这种情况下我想要：“www.stackoverflow.com”和调用的所有者。

我尝试从选项卡中获取它，但 chrome.tabs.get 使用回调，并且在它全部结束之前没有调用它，我处理了所有调用。

关于如何获取源网址的任何想法？

**编辑** 我现在使用此代码获取 url，但它一直返回“未定义”：

```
var contentString = "";
chrome.webRequest.onBeforeRequest.addListener(
  function (details) {
      var tabid = details.tabId;      
      var sourceurl = "N/A";
      if (tabid >= 0) {
          chrome.tabs.get(parseInt(tabid), function (tab) {
              sourceurl = tab.url;
              alert(sourceurl);
          });
      }      
      }); 
```

发出警报时，我对每个请求都未定义

**编辑 2 - 这对我有用**

```
chrome.tabs.get(parseInt(tabid), function (tab) {
              if (tab != undefined) {
                  alert(tab.url);
              }
          }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:27:07.053

`onBeforeRequest` [返回一个 TabID](https://developer.chrome.com/extensions/webRequest.html#event-onBeforeRequest)，然后您可以使用[选项卡 API](http://developer.chrome.com/extensions/tabs.html)`get`的方法来获取对选项卡的引用，从而获取页面的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-24T07:05:52.953

您可以使用从 Chrome 63 版本开始支持的**details.initiator**（有关详细信息，请参阅[此处）。](https://developer.chrome.com/extensions/webRequest#event-onBeforeRequest)下面你可以看到[Chrome APIs 页面](https://developer.chrome.com/extensions/webRequest#event-onBeforeRequest)上提到的关于启动器的内容。

> 发起请求的来源。这不会通过重定向而改变。如果这是一个不透明的来源，将使用字符串“null”。

# .htaccess - .htaccess 中的“哈希”url 重写

> ID：15133023
> 
> 赞同：19
> 
> 时间：2013-02-28T10:23:04.007
> 
> 标签：.htaccess, mod-rewrite

我想`http://example.com/articles.html#first-article`重写`http://example.com/articles/first-article`

是否可以重写？

我尝试使用以下但对我不起作用：

```
RewriteRule ^articles/(.+)$ /articles\.html\#$1 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-28T12:05:32.813

`#`可以在替换 URL 中添加 NE 标志。查看：

*   [这个 Apache 链接](http://httpd.apache.org/docs/2.2/rewrite/advanced.html#redirectanchors)专门描述了如何`redirect anchors`.

*   [这个 W3C 协议链接](http://www.w3.org/Protocols/HTTP/Fragment/draft-bos-http-redirect-00.txt)和[这个](http://www.w3.org/TR/cuap#uri).

*   [SO中的这个答案非常完整](https://stackoverflow.com/questions/2286402/url-fragment-and-302-redirects)。

*   [SO 中的另一个答案](https://stackoverflow.com/questions/15106056/mod-rewrite-in-htaccess-with-paging-system)。

*   [SO](https://stackoverflow.com/questions/15033757/mod-rewrite-keeps-anchor-link/15034083#15034083)（我的）中的另一个答案。

所以，你可以试试这个：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}  !articles\.html      [NC]
RewriteCond %{REQUEST_URI}  ^/articles/([^/]+)/? [NC]
RewriteRule .*       /articles.html#%1           [R,NE,L] 
```

重定向

`http://example.com/articles/parameter`

到

`http://example.com/articles.html#parameter`

假设字符串`articles`是固定的，而`parameter`假设是可变的。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-28T10:27:47.917

不，这是不可能的。*URL 片段*（从开始的所有`#`内容）甚至都不会发送到服务器。

也许您想考虑一个基于 JavaScript 的解决方案，其中实际内容将通过依赖于片段的 AJAX 加载。您将在此处找到有关此方法的一些有用信息：[Facebook 和新 Twitter URL 中的 shebang/hashbang (#!) 有什么用？](https://stackoverflow.com/questions/3009380/whats-the-shebang-hashbang-in-facebook-and-new-twitter-urls-for)

# maven - Maven 无法在本地 repo 中找到依赖项

> ID：15133024
> 
> 赞同：3
> 
> 时间：2013-02-28T10:23:08.953
> 
> 标签：maven

我已经在 pom 类型的项目中声明了所有 spring 依赖项并安装了它。

我的项目使用公共依赖pom的pom如下。但似乎 maven 没有使用/无法找到依赖项 pom

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.bookme</groupId>
    <artifactId>portal</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>war</packaging>

    <name>portal</name>

    <properties>
        <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>com.bookme.common</groupId>
            <artifactId>common-dependencies</artifactId>
            <version>1.0</version>
            <type>pom</type>
        </dependency>    
    </dependencies>
    </dependencyManagement>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArguments>
                        <endorseddirs>${endorsed.dir}</endorseddirs>
                    </compilerArguments>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.6</version>
                <executions>
                    <execution>
                        <phase>validate</phase>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${endorsed.dir}</outputDirectory>
                            <silent>true</silent>
                            <artifactItems>
                                <artifactItem>
                                    <groupId>javax</groupId>
                                    <artifactId>javaee-endorsed-api</artifactId>
                                    <version>6.0</version>
                                    <type>jar</type>
                                </artifactItem>
                            </artifactItems>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

</project> 
```

谁能告诉我我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:34:33.170

1.  您是否已将依赖项 pom 安装到本地 m2 存储库？

2.  添加`scope`到`import`您的依赖项 pom.xml 中。看[这里](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)了解更多详情

> ```
> <dependencyManagement>
> <dependencies>
>     <dependency>
>         <groupId>com.bookme.common</groupId>
>         <artifactId>common-dependencies</artifactId>
>         <version>1.0</version>
>         <type>pom</type>
>         <scope>import</scope>
>     </dependency>    
> </dependencies>
> </dependencyManagement> 
> ```

还要考虑以下事实

*   不要尝试导入在当前 pom 的子模块中定义的 pom。尝试这样做将导致构建失败，因为它无法找到 pom.xml 文件。

*   永远不要将导入 pom 的 pom 声明为目标 pom 的父级（或祖父级等）。没有办法解决循环，并且会抛出异常。

*   当引用其 pom 具有传递依赖项的工件时，项目将需要将这些工件的版本指定为托管依赖项。不这样做将导致构建失败，因为工件可能没有指定版本。（在任何情况下，这都应该被视为最佳实践，因为它可以防止工件的版本从一个构建更改为下一个构建）。

# iphone - ABPeoplePickerNavigationController 导航栏Style BlackTranslucent 错位布局

> ID：15133025
> 
> 赞同：1
> 
> 时间：2013-02-28T10:23:16.907
> 
> 标签：iphone, ios, abpeoplepickerview, peoplepicker

`BlackOpaque`我的人员选择器看起来像 条形样式：![在此处输入图像描述](../Images/6fd3c1c661a10a5ff4622bc40c33a6fb.png)

但是当我希望 barStyle 为 时`BlackTranslucent`，它看起来像这样： ![在此处输入图像描述](../Images/f200f0eb477414d28e809eaaaa419bf9.png)

我已经尝试从[这里解决](https://stackoverflow.com/questions/7287672/uinavigationcontroller-barstyle-property-changes-layout)

代码：

```
- (void)showPeoplePickerController
{
    ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
picker.peoplePickerDelegate = self;

NSArray *displayedItems = [NSArray arrayWithObjects:[NSNumber numberWithInt:kABPersonPhoneProperty],
                           [NSNumber numberWithInt:kABPersonEmailProperty],
                           [NSNumber numberWithInt:kABPersonBirthdayProperty],[NSNumber numberWithInt:kABPersonAddressProperty],nil];

picker.displayedProperties = displayedItems;
picker.navigationBar.barStyle = UIBarStyleBlack;

//  picker.navigationBar.translucent = YES; //uncommented for translucent bar

[self.navigationController presentModalViewController:picker animated:YES];

} 
```

但是我如何从 PeoplePicker 下移东西呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:14:11.713

好的代替这个：

`[self.navigationController presentModalViewController:picker animated:YES];`

显示您的 ABPeoplePickerNavigationController，如下所示：

```
[self.navigationController presentViewController:picker animated:YES completion:nil]; 
```

对于条形颜色，请检查此行：`picker.navigationBar.tintColor=[UIColor blackColor];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:28:11.960

你为什么首先使用半透明的导航栏？人员选择器视图控制器不适合与半透明导航栏一起使用。

如果您有充分的理由这样做，您需要做一些修改以使内容正确显示：
您必须修改`contentInset`显示的表格视图的属性，以便内容从导航栏下方开始。

**但是：**抱歉，无法访问显示的表格视图。

# jquery - 如何从 /dev/console 上传数据到 DataTables 插件

> ID：15133041
> 
> 赞同：0
> 
> 时间：2013-02-28T10:24:01.687
> 
> 标签：jquery, c++, c, ajax, embedded-linux

看来我需要你的专家意见。

我有安装了 Linux 的嵌入式系统。我想使用这个系统在 DataTables 插件（[http://datatables.net/](http://datatables.net/)）中显示具有动态内容的网页。我想在 DataTables 中显示的日期将在控制台端口上接收（通过向控制台发送数据请求，结果数据将被接收到此端口）。当我使用嵌入式系统时，由于根 fs 太小，我无法在我的系统中包含 peyton/perl 等解释器。

建议的解决方案是使用用 C 编写的守护程序。它将每秒向控制台端口发送数据请求，接收数据，解析并使用 JSON 数据更新文件。此数据将用作我网页上 DataTables 插件的 AJAX 源。

但我认为这不是优雅的方式。也许有一些现有的解决方案，如何从控制台端口动态获取数据并将其上传到 DataTables 插件？

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-28T10:42:44.983

我认为其他机器连接到嵌入式系统。在这种情况下，最简单的可能是使用简单的程序（`cat`如果可用！）简单地将原始数据发送到控制台，然后`DataTables`在收集数据的机器上将其转换为格式。

# xaml - Windows Phone：如何以编程方式更改应用程序样式

> ID：15133047
> 
> 赞同：4
> 
> 时间：2013-02-28T10:24:38.593
> 
> 标签：xaml, windows-phone-8, windows-phone

在我的 Windows Phone 8 应用程序中，我在**/Styles/DefaultStyles.xaml位置的 xaml 文件中定义了一些隐式样式**

**我有一个类似的文件，但在/Styles/GreenStyles.xaml**中定义了不同的颜色、字体等。

我在 App.xaml 中引用了默认样式文件，如下所示：

```
<Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary   Source="Styles/DefaultStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources> 
```

我想让我的应用程序以编程方式从其他样式文件（GreenStyles）切换其隐式样式。

我怎样才能做到这一点？

**

> **更新：**

我设法更改资源字典的来源，如下所示：

```
ResourceDictionary style = App.Current.Resources.MergedDictionaries.ToList()[0];
            string source = String.Format("/ApplicationName;component/Styles/GreenStyles.xaml");
            style.Source = new Uri(source, UriKind.Relative); 
```

**注意：** component这个词一定要这样写，以免出现异常

现在我有一个问题：当字典的源发生变化时，只有**隐式样式**（没有**x:Key**属性的样式）被切换。

具有指定键并在两个文件中定义两次（具有不同属性）的任何其他样式将不会反映在 UI 中。

所以如果我有这些文件： **DefaultStyles.xaml：**

```
 <Style x:Key="MainGrid" TargetType="Grid">
        <Setter Property="Background" Value="Red"/>
    </Style>

    <Style  TargetType="TextBlock">
        <Setter Property="Foreground" Value="Red"/>
        <Setter Property="FontSize" Value="24"/>
    </Style>
</ResourceDictionary> 
```

**并且：GreenStyles.xaml：**

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone">

    <Style x:Key="MainGrid" TargetType="Grid">
        <Setter Property="Background" Value="Green"/>
    </Style>

    <Style  TargetType="TextBlock">
        <Setter Property="Foreground" Value="Green"/>
        <Setter Property="FontSize" Value="24"/>
    </Style>
</ResourceDictionary> 
```

并且我将源切换为指向**GreenStyles.xaml**，任何具有**MainGrid**样式的 Grid仍将其背景为**Red**。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T17:29:32.927

您可以尝试使用此处描述的方法 Jeff Wilcox：http: [//www.jeff.wilcox.name/2012/01/phonethememanager/](http://www.jeff.wilcox.name/2012/01/phonethememanager/)

此处描述了 Silverlight 的替代方法，我不确定这是否适用于 Windows Phone（尽管它们共享一些代码库）： [http ://silverlightips.wordpress.com/2010/04/29/change-themestyle-using-合并字典/](http://silverlightips.wordpress.com/2010/04/29/change-themestyle-using-merged-dictionaries/)

如果你有一个大型应用程序，这两种方法都不容易，你可以考虑另一种选择，比如（叫我疯了）

```
<Button Style="{Binding Locator.Theme, Converter={StaticResource StyleThemeConverter}, ConverterParameter=RefreshButtonStyle}" 
```

希望这可以帮助。

# blackberry - 写入 Eclipse 控制台输出

> ID：15133048
> 
> 赞同：0
> 
> 时间：2013-02-28T10:24:38.513
> 
> 标签：blackberry, java-me, blackberry-eclipse-plugin

我正在使用 System.out.println() 将输出打印到 Eclipse 控制台。

```
System.out.println("test");
System.out.println("test1");
System.out.println("test2");
System.out.println("test3"); 
```

我得到以下信息：

```
[2785.375] test
[2785.382] test1
[2785.382] test2
[2785.382] test3 
```

如何删除时间戳值之前的行号？有时会变得烦人。

谢谢，

# python - Django @login_required 使用 nginx 和 fastcgi 时导致重定向循环

> ID：15133052
> 
> 赞同：4
> 
> 时间：2013-02-28T10:24:43.233
> 
> 标签：python, django, nginx, fastcgi

我在settings.py中这样设置LOGIN_URL：

> ```
> LOGIN_URL = '/login/' 
> ```

在 urls.py 我和这个 URLConf 中：

> ```
> (r'^$', 'agent.index.redirect'),
> (r'^login/$', 'django.contrib.auth.views.login', {'template_name':'login.html'}), 
> ```

agent.index.redirect 视图是这样的：

> ```
> @login_required
> def redirect(request):
>     ... 
> ```

我像这样运行我的 Django 网站：

> ```
> python manage.py runfcgi host=127.0.0.1 port=8090 --settings=settings 
> ```

nginx.conf 是这样的：

> ```
> user nobody nobody;
> worker_processes  5;
> #error_log /var/log/nginx/error_log info;
> 
> events {
>     worker_connections  1024;
>     use epoll;
> }
> 
> http {
>     include         mime.types;
>     default_type    application/octet-stream;
> 
>     log_format main
>         '$remote_addr - $remote_user [$time_local] '
>         '"$request" $status $bytes_sent '
>         '"$http_referer" "$http_user_agent" '
>         '"$gzip_ratio"';
> 
>     client_header_timeout   10m;
>     client_body_timeout     10m;
>     send_timeout            10m;
> 
>     connection_pool_size            256;
>     client_header_buffer_size       1k;
>     large_client_header_buffers     4 2k;
>     request_pool_size               4k;
> 
>     gzip on;
>     gzip_min_length 1100;
>     gzip_buffers    4 8k;
>     gzip_types      text/plain;
> 
>     output_buffers  1 32k;
>     postpone_output 1460;
> 
>     sendfile        on;
>     tcp_nopush      on;
>     tcp_nodelay     on;
> 
>     keepalive_timeout       75 20;
> 
>     ignore_invalid_headers  on;
>     index index.html;
> 
>     server {
>         listen 80;
>         server_name localhost;
>         root /web/agent;
> 
>         location /static  {
>             alias /web/agent/media;
>             access_log   off;
>             expires      30d;
>         }
> 
>         location /media  {
>             alias /web/agent/admin_media;
>             access_log   off;
>             expires      30d;
>         }
> 
>         location / {
>             # host and port to fastcgi server
>             fastcgi_pass 127.0.0.1:8090;
>             fastcgi_param PATH_INFO $fastcgi_script_name;
>             fastcgi_param REQUEST_METHOD $request_method;
>             fastcgi_param QUERY_STRING $query_string;
>             fastcgi_param CONTENT_TYPE $content_type;
>             fastcgi_param CONTENT_LENGTH $content_length;
>             fastcgi_pass_header Authorization;
>             fastcgi_param  SCRIPT_NAME        $fastcgi_script_name;
>             fastcgi_param  REQUEST_URI        $request_uri;
>             fastcgi_param  DOCUMENT_URI       $document_uri;
>             fastcgi_param  DOCUMENT_ROOT      $document_root;
>             fastcgi_param  SERVER_PROTOCOL    $server_protocol;
>             fastcgi_param  HTTPS              $https if_not_empty;
>             fastcgi_param  GATEWAY_INTERFACE  CGI/1.1;
>             fastcgi_param  SERVER_SOFTWARE    nginx/$nginx_version;
>             fastcgi_param  REMOTE_ADDR        $remote_addr;
>             fastcgi_param  REMOTE_PORT        $remote_port;
>             fastcgi_param  SERVER_ADDR        $server_addr;
>             fastcgi_param  SERVER_PORT        $server_port;
>             fastcgi_param  SERVER_NAME        $server_name;
>             fastcgi_connect_timeout 30s;
>             fastcgi_send_timeout 30s;
>             fastcgi_read_timeout 30s;
>             fastcgi_buffer_size 128k;
>             fastcgi_buffers 8 128k;#8 128
>             fastcgi_busy_buffers_size 256k;
>             fastcgi_temp_file_write_size 256k;
>             fastcgi_intercept_errors on;
>         }
>         #access_log     /usr/local/nginx/logs/access_log main;
>         #error_log      /usr/local/nginx/logs/error_log;
>     }
> } 
> ```

当我访问 [http://localhost] 时，会有一个重定向循环。而nginx的access.log是这样的：

> ```
> 127.0.0.1 - - [28/Feb/2013:18:13:51 +0800] "GET / HTTP/1.1" 302 5 "-" "Mozilla/5.0 (X11; Linux i686; rv:17.0) Gecko/20130220 Firefox/17.0"
> 127.0.0.1 - - [28/Feb/2013:18:13:51 +0800] "GET /login/?next=// HTTP/1.1" 302 5 "-" "Mozilla/5.0 (X11; Linux i686; rv:17.0) Gecko/20130220 Firefox/17.0"
> 127.0.0.1 - - [28/Feb/2013:18:13:51 +0800] "GET /login/?next=/login//%3Fnext%3D// HTTP/1.1" 302 5 "-" "Mozilla/5.0 (X11; Linux i686; rv:17.0) Gecko/20130220 Firefox/17.0"
> 127.0.0.1 - - [28/Feb/2013:18:13:51 +0800] "GET /login/?next=/login//%3Fnext%3D/login//%253Fnext%253D// HTTP/1.1" 302 5 "-" "Mozilla/5.0 (X11; Linux i686; rv:17.0) Gecko/20130220 Firefox/17.0"
> 127.0.0.1 - - [28/Feb/2013:18:13:51 +0800] "GET /login/?next=/login//%3Fnext%3D/login//%253Fnext%253D/login//%25253Fnext%25253D// HTTP/1.1" 302 5 "-" "Mozilla/5.0 (X11; Linux i686; rv:17.0) Gecko/20130220 Firefox/17.0"
> ...and so on. 
> ```

任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T07:20:59.893

啊哈，原因是：

> Django 使用 PATH_INFO 来匹配 urlpatterns。Nginx 的 fastcgi_params 包含没有设置。它确实设置了 SCRIPT_NAME。如果 PATH_INFO 和 SCRIPT_NAME 都设置为 $fastcgi_script_name，Django 似乎会为所有请求获取一个空路径。只需设置 PATH_INFO！

[在http://aftnn.org/2009/jan/23/nginx-django-fastcgi/](http://aftnn.org/2009/jan/23/nginx-django-fastcgi/)上查看更多信息。

所以解决方案只是删除这一行：`fastcgi_param SCRIPT_NAME $fastcgi_script_name;`
非常感谢@Alasdair。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:28:36.947

这通常表明您有另一个与请求的 URL（可能是所有 url）匹配并重定向到登录页面的 URL 模式。例如：

```
(r'^', 'agent.index.redirect'),
    ^ left out the end-of-string $ 
```

这会导致像您正在经历的重定向循环。除了您的问题中列出的那些之外，您还有其他 url 模式吗？

# vba - 奇怪的是cscript不会将xlsx保存为xlExcel8并默默失败

> ID：15133053
> 
> 赞同：2
> 
> 时间：2013-02-28T10:24:47.007
> 
> 标签：vba, vbscript, ms-office

我正在使用 MSOffice2010 和 cscript（Windows 脚本版本 5.8），尝试做一些简单的事情：

```
 1\. Open a native xlsx file 
  2\. Save it as xls file (xlExcel8) 
```

我所做的是：

# xcx.vbs

' [http://msdn.microsoft.com/en-us/library/ff198017(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/ff198017(v=office.14).aspx)

```
 Const xlExcel8 = 56

  Set wdo = CreateObject("Excel.Application")

  Set wdoc = wdo.Workbooks.Open("c:\path\to\foo.xlsx")

  wdoc.SaveAs "c:\path\to\bar.xls", xlExcel8

  wdoc.Close

  wdo.Quit 
```

要运行它：

> cscript xcx.vbs

然后，脚本完成，没有任何错误。但我根本找不到`c:\path\to\bar.xls`。

如果有人能告诉我正确的方法，我将不胜感激，谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:50:57.123

It's strange that you have not error on the first line. Maybe you have `On Error Resume Next` above this code? Try this:

```
Const xlExcel8 = 56 
```

But if that constant is already defined, you'll get error too like "Name redefined", and if so, just remove that line.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:05:48.970

This really drove me crazy! The counterpart simlar code for docx<->doc and pptx<->ppt just worked smoothly.

And I found a phenomenon (rather than workround) that the file will be saved if an extra *wasted* line is added ahead the target 'SaveAs' line. (see the commented code below).

Besides:

1.  The wasted SaveAs doesn't really have function to save things(as the original problem)

2.  The target SaveAs doesn't work if the wasted SaveAS is trying to save as a file of same format as the target.

I am really dizzy now and tend to consider a MS Excel bug, how's that sound?

```
Const xlExcel8          = 56
Const xlOpenXMLWorkbook = 51

Set wdo = CreateObject("Excel.Application")

Set wdoc = wdo.Workbooks.Open("c:\path\to\foo.xlsx")

' This works, but only to save as bar.xls, which "resolved" my original problem
wdoc.SaveAs "c:\path\to\bar.xlsx", xlOpenXMLWorkbook 'Sacrificed line to *activate* the following line of saving ...
wdoc.SaveAs "c:\path\to\bar.xls",  xlExcel8

' This works, but only to save as bar.xlsx, 
' wdoc.SaveAs "c:\path\to\bar.xls",  xlExcel8  'Sacrificed line to *activate* the following line of saving ...
' wdoc.SaveAs "c:\path\to\bar.xlsx", xlOpenXMLWorkbook

' While this doesn't work at all
' wdoc.SaveAs "c:\path\to\bar.xls",  xlExcel8 
' wdoc.SaveAs "c:\path\to\bar.xls",  xlExcel8

wdoc.Close

wdo.Quit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T22:49:50.927

```
Const xlExcel8 = 56

wdoc.ActiveWorkbook.SaveAs "c:\path\to\bar.xls", xlExcel8 
```

# grails - 使用“分类器”添加依赖项的 Grails 不起作用

> ID：15133054
> 
> 赞同：5
> 
> 时间：2013-02-28T10:24:48.567
> 
> 标签：grails

首先，我想告知这里提出了同样的问题 [grails plugin dependencies with classifiers](https://stackoverflow.com/questions/12939189/grails-plugin-dependencies-with-classifiers)但他们没有答案。

我正在尝试将 jar "json-lib.jar" 及其依赖项添加到 BuildConfig.groovy 文件中。此依赖项具有调用元素，因此我无法下载依赖项。

```
 dependencies {runtime group:'net.sf.json-lib', name:'json-lib',  classifier:'jdk15',version:'2.4'} 
```

但这无济于事。

我也试过这样

`依赖{运行时'net.sf.json-lib:json-lib:2.4:jdk15'}

这个也无济于事

甚至尝试创建一个 maven pom 文件并将“json-lib.jar”依赖项添加到 pom 文件但得到相同但如果尝试在我的 java maven 项目中使用相同的依赖项它工作正常

```
<dependency>
<groupId>net.sf.json-lib</groupId>
<artifactId>json-lib</artifactId>
  <version>2.4</version>
    <type>jar</type>
    <classifier>jdk15</classifier>
    <scope>compile</scope>
</dependency> 
```

但这也没有帮助。

我尝试刷新依赖项的错误消息（在 STS 中）

```
WARNINGS
    [FAILED     ] net.sf.json-lib#json-lib;2.4!json-lib.jar:  (0ms)

==== grailsHome: tried

  C:\Users\Target\.grails\2.1.1\cached-installed-plugins/json-lib-2.4.jar

==== grailsHome: tried

  C:\Users\Target\Software\Groovy -STS\Installed Directory\grails-2.1.1/plugins/json-lib-2.4.jar

==== grailsCentral: tried

  http://grails.org/plugins/grails-json-lib/tags/RELEASE_2.4/grails-json-lib-2.4.jar

==== http://repo.grails.org/grails/core: tried

  http://repo.grails.org/grails/core/net/sf/json-lib/json-lib/2.4/json-lib-2.4.jar

==== localMavenResolver: tried

  C:\Users\Target/.m2/repository/net/sf/json-lib/json-lib/2.4/json-lib-2.4.jar

==== mavenCentral: tried

  http://repo1.maven.org/maven2/net/sf/json-lib/json-lib/2.4/json-lib-2.4.jar

==== ebrRelease: tried

  http://repository.springsource.com/maven/bundles/release/net/sf/json-lib/json-lib/2.4/json-lib-2.4.jar

==== ebrExternal: tried

  http://repository.springsource.com/maven/bundles/external/net/sf/json-lib/json-lib/2.4/json-lib-2.4.jar

==== http://download.java.net/maven/2/: tried

  http://download.java.net/maven/2/net/sf/json-lib/json-lib/2.4/json-lib-2.4.jar

==== localMavenResolver: tried

  C:\Users\Target/.m2/repository/net/sf/json-lib/json-lib/2.4/json-lib-2.4.jar

    ::::::::::::::::::::::::::::::::::::::::::::::

    ::              FAILED DOWNLOADS            ::

    :: ^ see resolution messages for details  ^ ::

    ::::::::::::::::::::::::::::::::::::::::::::::

    :: net.sf.json-lib#json-lib;2.4!json-lib.jar

    ::::::::::::::::::::::::::::::::::::::::::::::

     :: problems summary ::
     :::: WARNINGS
    [FAILED     ] net.sf.json-lib#json-lib;2.4!json-lib.jar:  (0ms)

==== grailsHome: tried

  C:\Users\Target\Software\Groovy -STS\Installed Directory\grails-2.1.1/lib/net.sf.json-lib/json-lib/jars/json-lib-2.4.jar

  C:\Users\Target\Software\Groovy -STS\Installed Directory\grails-2.1.1/lib/net.sf.json-lib/json-lib/bundles/json-lib-2.4.jar

==== grailsHome: tried

  C:\Users\Target\Software\Groovy -STS\Installed Directory\grails-2.1.1\src\libs/json-lib-2.4.jar

==== grailsHome: tried

  C:\Users\Target\Software\Groovy -STS\Installed Directory\grails-2.1.1\dist/json-lib-2.4.jar

==== grailsHome: tried

  C:\Users\Target\.grails\2.1.1\cached-installed-plugins/json-lib-2.4.jar

==== grailsHome: tried

  C:\Users\Target\Software\Groovy -STS\Installed Directory\grails-2.1.1/plugins/json-lib-2.4.jar

==== grailsCentral: tried

  http://grails.org/plugins/grails-json-lib/tags/RELEASE_2.4/grails-json-lib-2.4.jar

==== http://repo.grails.org/grails/core: tried

  http://repo.grails.org/grails/core/net/sf/json-lib/json-lib/2.4/json-lib-2.4.jar

==== localMavenResolver: tried

  C:\Users\Target/.m2/repository/net/sf/json-lib/json-lib/2.4/json-lib-2.4.jar

==== mavenCentral: tried

  http://repo1.maven.org/maven2/net/sf/json-lib/json-lib/2.4/json-lib-2.4.jar

==== ebrRelease: tried

  http://repository.springsource.com/maven/bundles/release/net/sf/json-lib/json-lib/2.4/json-lib-2.4.jar

==== ebrExternal: tried

  http://repository.springsource.com/maven/bundles/external/net/sf/json-lib/json-lib/2.4/json-lib-2.4.jar

==== http://download.java.net/maven/2/: tried

  http://download.java.net/maven/2/net/sf/json-lib/json-lib/2.4/json-lib-2.4.jar

==== localMavenResolver: tried

  C:\Users\Target/.m2/repository/net/sf/json-lib/json-lib/2.4/json-lib-2.4.jar

    ::::::::::::::::::::::::::::::::::::::::::::::

    ::              FAILED DOWNLOADS            ::

    :: ^ see resolution messages for details  ^ ::

    ::::::::::::::::::::::::::::::::::::::::::::::

    :: net.sf.json-lib#json-lib;2.4!json-lib.jar

    ::::::::::::::::::::::::::::::::::::::::::::::

| Error Failed to resolve dependencies (Set log level to 'warn' in BuildConfig.groovy for more information):

- net.sf.json-lib:json-lib:2.4 
```

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:52:51.247

以下应该有效，请参见此处： http: [//mvnrepository.com/artifact/net.sf.json-lib/json-lib/2.4#gradle](http://mvnrepository.com/artifact/net.sf.json-lib/json-lib/2.4#gradle)

```
dependencies {
  runtime 'net.sf.json-lib:json-lib:2.4'
} 
```

另外，检查您是否启用了 MavenLocal 和 MavenCentral 存储库：

```
repositories {
    grailsPlugins()
    grailsHome()
    grailsCentral()

    // uncomment the below to enable remote dependency resolution
    // from public Maven repositories

    mavenLocal()
    mavenCentral()
    //mavenRepo "http://snapshots.repository.codehaus.org"
    //mavenRepo "http://repository.codehaus.org"
    //mavenRepo "http://download.java.net/maven/2/"
    //mavenRepo "http://repository.jboss.com/maven2/"
} 
```

# python - 使用服务帐户在 Google 的 SMTP 服务上使用 XOAUTH2 时出现“错误请求”(400)

> ID：15133055
> 
> 赞同：1
> 
> 时间：2013-02-28T10:24:48.693
> 
> 标签：python, smtp, google-oauth

我想使用 Google 的 SMTP 服务从我的 Google 帐户发送电子邮件。

所以我去谷歌API控制台创建了一个服务账户，即`...@developer.gserviceaccount.com`，下载了私有证书。

使用 Python，您可以使用[oauth2client](https://pypi.python.org/pypi/oauth2client)库来获取此类对的凭据对象：`SignedJwtAssertionCredentials`. 您提供`"https://mail.google.com"`SMTP 服务的范围。

它在 Google 的[OAuth2 with Python](https://code.google.com/p/google-mail-oauth2-tools/wiki/OAuth2DotPyRunThrough) run-through 文档中进行了解释，除了那里的示例假设您有一个“已安装的应用程序”，并且您将使用网络流来提示用户授权发送电子邮件他们的帐户。

就我而言，这是来自我自己的帐户，所以我已经设置了一个服务帐户，并附有一个私有证书，我可以使用它来授权凭据。

这个 Python 脚本演示了这个问题：

```
import httplib2
import smtplib
import base64
import datetime

from oauth2client.client import SignedJwtAssertionCredentials

http = httplib2.Http()

google_user = "some-account@developer.gserviceaccount.com"
google_cert = open('some-private-cert.p12', 'rb').read()

credentials = SignedJwtAssertionCredentials(
    google_user, google_cert,
    scope='https://mail.google.com/',
)

credentials.refresh(http)

# To demonstrate that we've got a valid access token, let's make a
# couple of assertions:
#
# 1\. The credentials have been refreshed:
assert credentials.access_token is not None
#
# 2\. The access token hasn't expired (and isn't about to):
assert (credentials.token_expiry - datetime.datetime.utcnow()).total_seconds() > 60

auth_string = 'user=%s\1auth=Bearer %s\1\1' % (
    google_user, credentials.access_token
)

smtp_conn = smtplib.SMTP('smtp.gmail.com', 587)
smtp_conn.set_debuglevel(True)
smtp_conn.ehlo()
smtp_conn.starttls()
smtp_conn.ehlo()

# Now, authenticate (but this fails):
smtp_conn.docmd('AUTH', 'XOAUTH2 ' + base64.b64encode(auth_string)) 
```

错误响应是（base64-decoded）：

```
{"status":"400",
 "schemes":"Bearer",
 "scope":"https://mail.google.com/"} 
```

我不知道它应该工作，但我不明白为什么不工作。

# c# - 在 .NET 4.5 中序列化继承属性时出错

> ID：15133063
> 
> 赞同：0
> 
> 时间：2013-02-28T10:25:02.227
> 
> 标签：c#, .net, serialization

这是一个后续问题：

[.NET 4.5 中的序列化中断](https://stackoverflow.com/questions/14689305/serialization-breaks-in-net-4-5)

我在遗留代码中有一个属性，这让我对 .NET 4.5 的序列化感到悲痛。

这是属性：

```
 [EditorBrowsable(EditorBrowsableState.Never), Browsable(false), DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
    private new object Value
    {
        get
        {
            return base.Value;
        }
        set
        {
            base.Value = value;
        }
    } 
```

这可能是为了尝试隐藏基类的“Value”属性而引入的。到目前为止唯一有效的解决方案是让序列化程序知道我想在 .NET4 中序列化。但这对我来说是个问题。（只有在 traget 计算机上安装了 .NET 4.5 时才应设置此配置，否则会引发异常）。

我想我可以一起删除该属性，但是由于我正在处理一个庞大而复杂的遗留系统，我不确定可能会产生什么副作用。

所以我的问题是双重的：

1.  为什么继承的属性会破坏 .NET 4.5 序列化？

2.  如果我删除继承的属性，我应该期待什么讨厌的副作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:58:29.763

正如优素福在[相关帖子](https://stackoverflow.com/questions/14689305/serialization-breaks-in-net-4-5)中回答的那样：

在 4.5 中，XmlSerializer 的实现被替换为不依赖于 C# 编译器的实现。虽然它提供了更好的启动性能和稳定性，但您可能会遇到实现之间的兼容性问题。

使用 legacySerializer 的配置设置在 4.0 机器上不起作用，因为相应的强类型 Xml 配置节类不包含此设置的占位符。

这两个问题都将在即将到来的更新中得到解决。在此之前，您可以通过在 4.5 中设置配置开关来解决此问题，并移除 4.0 上的开关。

# android - ListView 在不重新创建的情况下更新项目

> ID：15133070
> 
> 赞同：0
> 
> 时间：2013-02-28T10:25:28.530
> 
> 标签：android, listview, checkbox

我希望我的 ListView 工作如下：当我按下一个按钮（可能来自上下文菜单）时，我希望用户能够从 ListView 中选择一个以上的项目（可能使用复选框），但是那些检查-boxes 在此之前不应该是可见的。所以，关键是，在用户按下按钮（比如说“删除更多项目”）后，列表视图应该更新自身，并出现在列表的每一行上，应该出现一个复选框（允许我选择项目 ID将它们传递给服务器）。

我怎样才能做到这一点，而不必从零重新创建列表？（如何 setVisibility ON，保持 ListView 的其他内容不变，而不向服务器发出另一个请求）。

PS。如果你们有另一个更好的想法，实现删除更多项目，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:31:46.487

这只是一个想法，我自己没有尝试过：您在列表项布局中构建一个复选框。通常，在适配器的 getView 中，使用 checkBox.setVisibility(8) 将其设置为不可见；

当你想显示它们时，你设置一些布尔值

```
showBoxes 
```

将您的适配器设置为 true，然后在 getView oyu 中不要隐藏复选框。然后

```
notifyDataSetChanged 
```

在适配器上。

希望我的意思很清楚。

# ruby-on-rails - 如何在 FreeBSD 9.1 上搭建 rails 运行环境

> ID：15133075
> 
> 赞同：2
> 
> 时间：2013-02-28T10:25:44.630
> 
> 标签：ruby-on-rails, rubygems, gem, installation, freebsd

我知道两种方法：

### 方法一：安装带端口的导轨，步骤如下：

1.  安装 ruby​​,lang/ruby19

2.  安装 gem, devel/ruby-gems

3.  安装导轨，www/rubygem-rails

### 方法 2：使用 gem 安装 rails（在 Mac OS X 上相同）：

1.  安装 ruby​​,lang/ruby19

2.  安装 gem, devel/ruby-gems

3.  安装导轨，宝石安装导轨

方法1效果很好，但我想尝试方法2，完成方法2的所有步骤，我尝试使用命令创建我的第一个应用程序`rails new hello`，但失败了，错误如下：

**在 FreeBSD 9.1 上构建 rails 开发/运行环境的最佳方法是什么？**

```
/usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/vendor/net/http/persistent/ssl_reuse.rb:70:in `connect': SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (OpenSSL::SSL::SSLError)
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/vendor/net/http/persistent/ssl_reuse.rb:70:in `block in connect'
    from /usr/local/lib/ruby/1.9/timeout.rb:54:in `timeout'
    from /usr/local/lib/ruby/1.9/timeout.rb:99:in `timeout'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/vendor/net/http/persistent/ssl_reuse.rb:70:in `connect'
    from /usr/local/lib/ruby/1.9/net/http.rb:755:in `do_start'
    from /usr/local/lib/ruby/1.9/net/http.rb:750:in `start'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/vendor/net/http/persistent.rb:628:in `start'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/vendor/net/http/persistent.rb:570:in `connection_for'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/vendor/net/http/persistent.rb:930:in `request'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/fetcher.rb:195:in `fetch'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/fetcher.rb:169:in `use_api'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/source/rubygems.rb:223:in `block in remote_specs'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/source/rubygems.rb:223:in `select'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/source/rubygems.rb:223:in `remote_specs'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/source/rubygems.rb:162:in `fetch_specs'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/source/rubygems.rb:66:in `specs'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/definition.rb:192:in `block (2 levels) in index'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/definition.rb:189:in `each'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/definition.rb:189:in `block in index'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/index.rb:9:in `build'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/definition.rb:185:in `index'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/definition.rb:179:in `resolve'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/definition.rb:114:in `specs'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/definition.rb:109:in `resolve_remotely!'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/installer.rb:83:in `run'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/installer.rb:14:in `install'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/cli.rb:247:in `install'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/vendor/thor/task.rb:27:in `run'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/vendor/thor/invocation.rb:120:in `invoke_task'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/vendor/thor.rb:344:in `dispatch'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/vendor/thor/base.rb:434:in `start'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/bin/bundle:20:in `block in <top (required)>'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/lib/bundler/friendly_errors.rb:4:in `with_friendly_errors'
    from /usr/local/lib/ruby/gems/1.9/gems/bundler-1.3.0/bin/bundle:20:in `<top (required)>'
    from /usr/local/bin/bundle:23:in `load'
    from /usr/local/bin/bundle:23:in `<main>' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-19T22:52:10.180

不要从你的包管理器安装 Ruby，更喜欢[RBEnv](https://github.com/rbenv/rbenv)来处理这个工作。在 FreeBSD 上使用它：

```
# as root
pkg_add -r bash curl git libxml2 libxslt node-devel sqlite3 sudo wget

# as user

# rbenv
git clone https://github.com/rbenv/rbenv.git ~/.rbenv
git clone https://github.com/rbenv/ruby-build.git ~/.rbenv/plugins/ruby-build
git clone https://github.com/rbenv/rbenv-gem-rehash.git ~/.rbenv/plugins/rbenv-gem-rehash
echo 'export PATH="$HOME/.rbenv/bin:$PATH"' >> ~/.profile
echo 'eval "$(rbenv init -)"' >> ~/.profile
source ~/.profile

# ruby and rails
rbenv install 2.4.4
rbenv global 2.4.4
gem install rails 
```

我希望这能帮到您 ：）

资料来源：[http ://chatchan.us/bsdonrails.pdf](http://chatchan.us/bsdonrails.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:42:19.737

无法重现。更新您的端口树并重试，也许您需要新版本的 devel/ruby-gems。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T06:44:55.373

哈巴克斯击中了它的头部。我会支持你，但这是一个新帐户。对不起！

因为我使用 bash shell：.profile = .bash_profile

最新的 ruby​​ 版本正确安装。不过安装需要5分钟左右。

```
rbenv install 2.0.0-p247 
```

为了兼容性和稳定性，我们使用 rails 3.2.13 而不是 4.0.0。

```
gem install rails -v 3.2.13 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-09T19:28:48.753

以 root 身份安装预构建的软件包：

```
pkg install ruby27-gems rbenv
gem install rails 
```

# media-manager - 如何在分发 URL 上加载特定语言？

> ID：15133079
> 
> 赞同：2
> 
> 时间：2013-02-28T10:26:03.033
> 
> 标签：media-manager

一个发行版可以有一套字幕和画外音语言。如何在我的网页中加载分发 URL 并告诉它使用另一种字幕和画外音语言？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:47:23.483

可以在分发 URL 中设置字幕、画外音和倒影语言。这样同一个分发 URL 可以在多个网站中使用，网站会在分发 URL 中添加参数来设置语言。

分发 URL 如下所示，其中 GUID 是分发的 GUID。`http://INSTANCEURL/vms/distribution/?o=GUID&sl=EN`

sl、nl 和 bl 参数可以设置为使用特定的语言。字幕、倒影和画外音。`http://INSTANCEURL/vms/distribution/?o=GUID&sl=EN&vl=NL&bl=EN`

另见手册

*   [本地化查询字符串参数](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_MediaManager_23/task_57487540759344709C37D58C073093A7)（需要登录）
*   [语言代码](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_MediaManager_23/concept_A9F20DF9433C46FF8FED8FA11A29FAA0)（需要登录）

# c# - Winforms .NET 4.5 应用程序在新机器上崩溃

> ID：15133085
> 
> 赞同：2
> 
> 时间：2013-02-28T10:26:23.757
> 
> 标签：c#, .net, winforms, .net-4.5, chilkat

在我的开发机器上，我有 VS2010 和 VS2012，使用 VS2012 开发了一个应用程序，使用 .NET 4.5 和用于 .NET 4 的 Chilkat 组件，平台目标是 x32，在开发机器上运行良好。

现在，当我在 Windows 7 Home Basic 32 位虚拟机上移动这个应用程序时，应用程序崩溃了，经过调查发现，当应用程序试图运行 chilkat 组件时它失败了，但不知道到底出了什么问题，因为我正在应对32 位 dll 以及 bin 文件夹中的应用程序，但仍然抱怨别的东西。请帮忙。

这是我得到的错误。

> 问题签名：问题事件名称：CLR20r3 问题签名 01：testing.exe 问题签名 02：1.0.0.0 问题签名 03：512e7778 问题签名 04：测试问题签名 05：1.0.0.0 问题签名 06：512e7778 问题签名 07：4 问题签名 08：e 问题签名 09：System.IO.FileNotFoundException 操作系统版本：6.1.7601.2.1.0.768.2 区域设置 ID：1033 附加信息 1：0a9e 附加信息 2：0a9e372d3b4ad19135b953a78882e789 附加信息 3：0a9e 附加信息 4：0a829e3792d3378b748
> 
> 在线阅读我们的隐私声明：http:
> [//go.microsoft.com/fwlink/ ?linkid=104288&clcid=0x0409](http://go.microsoft.com/fwlink/?linkid=104288&clcid=0x0409)
> 
> 如果在线隐私声明不可用，请离线阅读我们的隐私声明：C:\Windows\system32\en-US\erofflps.txt

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T15:28:21.763

Chilkat .NET 程序集是一个混合模式程序集，这意味着内部实现是用 C++ 编写并编译为本机代码。

如果我没记错的话，它是使用 Visual Studio 2010（使用 VC++）创建的。**这就是为什么目标**计算机上需要存在 Microsoft VC++ 2010 运行时库的原因。

2.0/3.5 .Net Frameworks 没有问题，因为每台 Windows 操作系统计算机都已经安装了相关的 VC++ 运行时。

您可以尝试安装 Microsoft 提供的以下 VC++ 软件包吗？您可以自行在 MS 网站上轻松找到下载链接。

*   x86 Microsoft Visual C++ 2010 可再发行包
*   x64 Microsoft Visual C++ 2010 可再发行包

如果 2010 包不起作用，请尝试 2​​008 包：

*   x86 Microsoft Visual C++ 2008 可再发行包
*   x64 Microsoft Visual C++ 2008 可再发行包

# javascript - 在backbone.js 源代码中实现的所有事件在哪里？

> ID：15133086
> 
> 赞同：-1
> 
> 时间：2013-02-28T10:26:24.410
> 
> 标签：javascript, backbone.js

因此，我正在阅读 Backbone 源代码，并且正在查看 on 功能-

```
on: function(name, callback, context) {
  if (!(eventsApi(this, 'on', name, [callback, context]) && callback)) return this;
  this._events || (this._events = {});
  var list = this._events[name] || (this._events[name] = []);
  list.push({callback: callback, context: context, ctx: context || this});
  return this;
}, 
```

我没有看到“所有”事件的任何特殊情况 - 这是在哪里实现的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:28:52.427

当你调用`on('all' ,...)`你的回调被推入`this.events.all`数组：

```
var list = this._events[name] || (this._events[name] = []);//-> this._events.all = [] 
```

然后当它`trigger`被触发时，它会检查：

```
var allEvents = this._events.all 
```

# c# - 计算增值税助手方法

> ID：15133091
> 
> 赞同：-2
> 
> 时间：2013-02-28T10:26:39.020
> 
> 标签：c#, helper

正在网上寻找一种计算增值税的方法，但似乎找不到。

```
decimal subTotal = FinalInvoice.Hold_Back_Value;
decimal VAT = //calculate vat at 20% for subtotal using helper method
decimal TOTAL = subtotal + VAT; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T10:29:05.870

我建议您通过简单的数学将 20% 添加到网络中：

```
decimal vat = 0.2;
decimal tot = net * (1 + vat); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T10:30:12.763

简单的百分比计算。

```
public decimal CalculateVat(decimal value)
{
  return (value / 100) * 20;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T10:30:50.687

```
decimal subTotal = FinalInvoice.Hold_Back_Value;
decimal vat  = 1.2;
decimal Total = vat * subTotal; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T10:30:43.410

您只需乘以 20%（以分数表示）：

```
decimal vat = subTotal * 0.2; 
```

# c# - 数据类型 text 和 varchar 在 equal to 运算符中不兼容

> ID：15133094
> 
> 赞同：5
> 
> 时间：2013-02-28T10:26:56.050
> 
> 标签：c#, database, winforms, sqldatareader

我正在尝试访问数据网格视图上的数据库中的所有记录，具体取决于用户的类型，该用户通过具有两个文本框的表单登录，分别为用户名和密码，并显示提交按钮记录。但是我编写的代码给了我以下错误：数据类型 text 和 varchar 在等于运算符中不兼容。请提出更改建议。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Configuration;
using System.Data.SqlClient;

namespace Login_form
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void button1_Click(object sender, EventArgs e)
        {

            string str = ConfigurationSettings.AppSettings["constring"].ToString();
            SqlConnection sqlcon = new SqlConnection(str);

            try
            {
                sqlcon.Open();
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }

            SqlCommand sqlcmd = new SqlCommand("select user_type from employee where user_name='" + textBox1.Text + "'and pwd= '" + textBox2.Text + "' ;", sqlcon);

            SqlDataReader myReader = sqlcmd.ExecuteReader();

            string user_type=string.Empty;

            while(myReader.Read())
            {
            user_type= myReader["user_type"].ToString();
            }

            sqlcon.Close();

            sqlcon.Open();
            SqlCommand sqlcmd2 = new SqlCommand("select * from employee where user_type= '" +user_type + "'", sqlcon);
            SqlDataReader myReader2 = sqlcmd2.ExecuteReader();

          /*  SqlDataAdapter sqladapter = new SqlDataAdapter(sqlcmd2);
            DataSet ds = new DataSet();
            sqladapter.Fill(ds);
            dataGridView1.DataSource = ds.Tables[0];*/

            DataTable dt = new DataTable();
            dt.Columns.Add("ID", typeof(string));
            dt.Columns.Add("Name", typeof(string));
            dt.Columns.Add("Email_ID", typeof(string));
            dt.Columns.Add("Contact", typeof(string));
            dt.Columns.Add("Address", typeof(string));

            while (myReader2.Read())
            {
                DataRow dr = dt.NewRow();
                dr["ID"] = myReader2["ID"];
                dr["Name"] = myReader2["user_name"];
                dr["Email_ID"] = myReader2["Email_ID"];
                dr["Contact"] = myReader2["Contact"];
                dr["Address"] = myReader2["Address"];
                dt.Rows.Add(dr);
            }

            dataGridView1.DataSource = dt;

            sqlcon.Close();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T10:31:48.910

这是一个简单的数据库问题。

在数据库生成脚本更改中：

```
columnname text NULL, 
```

到：

```
columnname varchar(number of chars) NULL, 
```

在您的情况下，列名将是“user_name”或“user_type”

出现此问题，因为 SQL-Type 文本**不兼容与字符串比较！**

一旦您将类型从 text 更改为 varchar() 操作就应该起作用

# javascript - Backbone 和 RequireJS 共享集合不是持久的

> ID：15133099
> 
> 赞同：2
> 
> 时间：2013-02-28T10:27:19.283
> 
> 标签：javascript, backbone.js, requirejs

我有一个骨干网 + requireJS 应用程序，我在其中使用名为 Globals 的 AMD 模块将一些集合存储在 Global 命名空间中。这是这样设置的：

**globals.js**

```
define([
  'config',
  'underscore'
], function(config) {

  var globals = {
    collections : {}
  };

  _.extend(globals, config);

  return globals;

}); 
```

**myview.js**

```
define([
  'jquery',
  'underscore',
  'backbone',

  'globals',

  'collections/MyCollection',

  'views/myOtherView',
], function($, _, Backbone, Globals, MyCollection, MyOtherView) {
     Globals.collections.myCollection = new MyCollection([]);

     console.log(Globals.collections);

     _.each(Globals.collection.models, function(myModel){
         var myOtherView = new MyOtherView({ model : myModel });
     });
}); 
```

**myOtherView.js**

```
define([
  'jquery',
  'underscore',
  'backbone',

  'globals',

  'collections/MyCollection',
], function($, _, Backbone, Globals, MyCollection) {

    var MyOtherView = Backbone.View.extend({
      initialize : function(options){
        console.log(Globals.collections);
      }
    });
}); 
```

我的问题是为什么我的 Globals.collections 在 myOtherView.js 对象中是一个空对象，即使它是在 myView.js 中设置的。console.log 的结果是：

`Object { myCollection: d }`

`Object {}`

我简化了上面的代码，但情况保持不变，由于某种原因，全局对象属性不会在模块之间保持持久性。

关于为什么会发生这种情况的任何提示？（*我觉得这与_.each方法有关？*）

注意：我已经阅读了这些文章，但是虽然它确实清楚地说明了如何设置这样的东西，但并没有清楚地说明为什么我的集合对象是空的

*   [骨干共享集合](https://stackoverflow.com/questions/11275790/backbone-shared-collections)

# android - 在android中访问形状文件？

> ID：15133101
> 
> 赞同：0
> 
> 时间：2013-02-28T10:27:24.770
> 
> 标签：android, map, shapefile

如何在android中访问shape文件，请提供任何教程或库？

# google-maps-api-3 - 将折线捕捉到道路

> ID：15133107
> 
> 赞同：1
> 
> 时间：2013-02-28T10:27:51.063
> 
> 标签：google-maps-api-3, geolocation, polyline

所以我正在尝试使用 WALKING 出行模式将我的折线捕捉到道路上，目前我有一条 WORKING 折线，当用户的地理位置移动时会更新，然后从旧位置删除旧折线并从新位置绘制一条新折线从始发地到目的地，但这是一条直线，“乌鸦飞”。

```
function polyLine(myPos){

    var start;
    if (!start){
        start = geoMarker.position;
    }else{
        start = myPos;
    }
    var end = marker.position;

    var pathCoords = [start, end];
    var pathGo = new google.maps.Polyline({
        path: pathCoords,
        map: googleMap,
        strokeColor: "#FF0000",
        strokeOpacity: 0.7,
        strokeWeight: 2
    });
    polyLineArray.push(pathGo);
} 
```

我还尝试尝试通过此处的其他线程找到的各种代码片段，但无法正常工作。这就是我目前正在玩的。

```
function calcDist(myPos) {
var start;
if (!start){
    start = geoMarker.position;
}else{
    start = myPos;
}
var end = marker.position;

    var request = {
    origin: start,
    destination: end,
    travelMode: google.maps.TravelMode.WALKING
    };

directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK)
    {

        var steps = response.routes[0].legs[0].steps;

        for(var step = 0; step < steps.length; step++)
        {
            polylineOptions = {
                    map: googleMap,
                    strokeColor: "#FF0000",
                    strokeOpacity: 0.7,
                    strokeWeight: 2,
                    path: steps[step].path
            }
        drawPoly = new google.maps.Polyline(polylineOptions);
        }

        drawPoly.getPath().push(ble);

    }

});
} 
```

所以我想知道我的语法对于步行方向是否正确，该函数成功地拉过所有坐标，因为它使用与 polyLine() 相同的变量，但在 calcDist 上根本没有画线谢谢。

**编辑**

做类似于谷歌地图文档的事情，仍然没有运气

```
var directionsDisplay;
var directionsService = new google.maps.DirectionsService();

function calcDist(myPos) {
var start;
if (!start){
    start = geoMarker.position;
}else{
    start = myPos;
}
var end = marker.position;

    var request = {
        origin:start,
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.WALKING
    };

directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    });
} 
```

# c# - REST 和 SOAP Web 服务之间的身份验证

> ID：15133109
> 
> 赞同：2
> 
> 时间：2013-02-28T10:28:00.337
> 
> 标签：c#, web-services, azure, saml, simple-web-token

我们有一个 REST Web 服务，它充当我们的 SOAP Web 服务的网关。我意识到我可以在现有的 Web 服务中再添加一个端点，但由于要求我不能。

现在我正在处理身份验证过程。因此，我想对 REST Web 服务使用 SWT 身份验证，对 SOAP Web 服务使用 SAML 令牌身份验证。

所以看来我必须实现以下几点：

1.  客户端使用 STS 服务器（为简单起见，Azure 访问控制服务）来获取 SWT 令牌。
2.  将其作为请求的一部分发送到 REST 服务。
3.  Rest Web Service 将其转换为 SAML 令牌
4.  Rest Web Service 调用 SOAP 服务。

我错过了什么，或者它会起作用吗？

# c# - pdf水平滚动

> ID：15133111
> 
> 赞同：1
> 
> 时间：2013-02-28T10:28:02.787
> 
> 标签：c#, .net, pdf, horizontal-scrolling

我需要一个用于 c# 的组件，包括商业许可，它只能查看具有水平页面更改的 pdf 文件（不打印、不保存、不复制、仅用于阅读），就像一本书一样。我尝试了许多组件，但没有一个能够让我使用水平滚动鼠标或触摸屏界面更改页面。我尝试使用 axAcroPdf，试图识别手势滚动，但不幸的是，该组件似乎不支持 mousemove 和 mouseclick 事件。有没有人找到解决方案？

提前致谢

# c# - label.visible = true 不工作

> ID：15133114
> 
> 赞同：0
> 
> 时间：2013-02-28T10:28:15.770
> 
> 标签：c#, asp.net

可见功能不起作用，但为什么呢？不允许回调中的真实集合吗？当我在 page() 顶部将 visible 设置为 true 时，`_Default : System.Web.UI.Page`它​​正在工作。

```
information_remedyID.Visible = true;
information_remedyID.Text = inquiryId; 
```

顶级：

```
public partial class _Default : System.Web.UI.Page
{
.......
    private static string inquiryId;     

......

private void InsertIncidentCallback(server3.ILTISAPI api, IAsyncResult result, string username, string msg_id)
        {
            string message;
            api.EndInsertIncident(result, out message);

            if (message == null)
            {
                string responseXML;
                api.REMEDY_ReadResponseXML(username, out responseXML, out msg_id);
                XDocument doc = XDocument.Parse(responseXML);
                inquiryId = (string)doc.Root.Element("inquiry_id");

                if (inquiryId == null | inquiryId == "")
                {
                    information_text.Text = "....";
                }
                else
                {
                    information_remedyID.Visible = true;
                    information_remedyID.Text = inquiryId;
                    //create_LanDesk(computer_idn, swidn_choice, swName_choice, inquiryId);
                }
            }
            else
            {
                information_text.Visible = true;
                information_text.Text = "...";
            }
        }
} 
```

ASP：

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head id="Head1" runat="server">
    <title>Willkommen im BISS</title>
</head>
<body>
    <form id="form1" runat="server">
        <span style="font-size: 16pt"><strong>BISS<br />
        </strong><span style="font-size: 12pt">
            <br />
            Angemeldet als:
            <asp:Label ID="user_id" runat="server" Text="user_id"></asp:Label><br />
            Hostname:
            <asp:Label ID="hostname_id" runat="server" Text="hostname_id"></asp:Label>
            <br />
            CI Nummer:
            <asp:Label ID="CI_NR" runat="server" Text="CI_NR"></asp:Label></span></span>
        <br />
        <br />
        <asp:DropDownList ID="softwarelist" runat="server" DataTextField="SoftwareName" DataValueField="SoftwareName">
        <asp:ListItem Text="Bitte Software auswählen" Value=""></asp:ListItem>
        </asp:DropDownList>&nbsp; 
            <asp:Button ID="requestbt" runat="server" OnClick="Button1_Click" Text="Software zuweisen" /><br />

            <asp:Label ID="information_text" runat="server" Text="information_text" Visible="False"></asp:Label><br />
        <asp:Label ID="information_remedyID" runat="server" Text="information_remedyID" Visible="False"></asp:Label>
        <br />
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:34:22.563

您是否使用 UpdateMode="Conditional" 的 UpdatePanel

```
<asp:UpdatePanel ID="ProfileEditingUpdatePanel" runat="server" UpdateMode="Conditional"> 
```

* * *

如果您使用 WPF

```
information_remedyID.Visibility = Visibility.Visible; 
```

*   对不起，过度阅读 ASP！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:30:36.673

使用 UpdatePanel，如下所示：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title>Willkommen</title>
</head>
<body>

<form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>    
    <asp:UpdatePanel ID="MyUpdatePanel" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <span style="font-size: 16pt">
            <strong>
                BISS<br />
            </strong>
            <span style="font-size: 12pt">
                <br />
                Angemeldet als:
                <asp:Label ID="user_id" runat="server" Text="user_id"></asp:Label><br />
                Hostname:
                <asp:Label ID="hostname_id" runat="server" Text="hostname_id"></asp:Label>
                <br />
                CI Nummer:
                <asp:Label ID="CI_NR" runat="server" Text="CI_NR"></asp:Label></span></span>
            <br />
            <br />
            <asp:DropDownList ID="softwarelist" runat="server" DataTextField="SoftwareName" DataValueField="SoftwareName">
                <asp:ListItem Text="Bitte Software auswählen" Value=""></asp:ListItem>
            </asp:DropDownList>&nbsp; 
                <asp:Button ID="requestbt" runat="server" OnClick="Button1_Click" Text="Software zuweisen" /><br />

            <asp:Label ID="information_text" runat="server" Text="information_text" Visible="False"></asp:Label><br />
            <asp:Label ID="information_remedyID" runat="server" Text="information_remedyID" Visible="False"></asp:Label>
            <br />
        </ContentTemplate>
    </asp:UpdatePanel>
</form>

</body>
</html> 
```

在您的代码中，更改可见性后：

```
MyUpdatePanel.Update(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:41:07.837

```
if (inquiryId == null | inquiryId == "") 
```

如果这应该是或将其更改为双条纹：

```
if (inquiryId == null || inquiryId == "") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-16T21:09:26.083

我也无法让它工作。一种解决方法是使用`Style="display: none;"`而不是`Visible="False"`. 然后你可以用 `information_remedyID.Style["display"] = "initial";`

# jquery - 使 JQuery 对话框内容的宽度和高度为 100%

> ID：15133117
> 
> 赞同：5
> 
> 时间：2013-02-28T10:28:25.333
> 
> 标签：jquery, css, dialog, height, width

我创建了一个 div，然后在对话框中打开它。我尝试设计这个 div 以实现内容在两个方向上都扩展为 100%。

到目前为止我尝试了什么：设置 div 样式

```
#content {
    width:auto !important;
    height:auto !important;
    background-color:red !important;
    display:block !important;
} 
```

并设置默认的 div 样式

```
$(div).dialog({ dialogClass: 'someStyle' });

.someStyle .ui-dialog-content 
{
    height:auto !important;
    display:block !important;
} 
```

似乎没有任何效果！我覆盖了宽度属性，但不能覆盖高度属性。如何破解这个？

我想实现这样的目标：http: [//jsfiddle.net/S3FQv/](http://jsfiddle.net/S3FQv/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-28T10:40:57.917

您可以使用 jQuery`width`和`height`属性来获取视口的像素宽度并将它们作为样式应用到 div

```
var w = $(window).width();
var h = $(window).height();

//Set up the dialog with the width and height set above.
$('#myDialog').dialog({
    title: 'My Dialog',
    height: h,
    width: w
}); 
```

看到这个小提琴：http: [//jsfiddle.net/URpmR/2/](http://jsfiddle.net/URpmR/2/)

如果用户更改浏览器的大小，您还应该添加一些额外的代码来重新执行该函数：

```
$(window).resize(myFunction()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:32:04.717

为了使内容具有 100% 的高度，必须在`html`and`body`标签上指定此高度：

```
html, body { height:100%; margin:0; padding:0; } 
```

此外，设置`auto`并不一定意味着宽度和/或高度将为 100%。同样，旧版本的 IE 不支持`width: auto;`和`height: auto;`

如果可能的话，你也不应该用它`!important`来覆盖现有的样式。

[JSFiddle 示例](http://jsfiddle.net/Ryg5y/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-06T23:33:58.893

将`width`选项设置`'auto'`为在此[答案中找到](https://stackoverflow.com/questions/2231446/automatically-resize-jquery-ui-dialog-to-the-width-of-the-content-loaded-by-ajax)

# jquery - 将 Kendo 与 Backbone 和 RequireJS 一起使用

> ID：15133118
> 
> 赞同：1
> 
> 时间：2013-02-28T10:28:25.793
> 
> 标签：jquery, backbone.js, kendo-ui, requirejs

如何在使用 Require.JS 的模块化 Backbone 应用程序中初始化 Kendo.observable？这对我来说是全新的，感觉就像在泥泞中游泳。

我的 MAIN.JS 文件如下所示：

```
require.config({
    paths: {
        jquery: 'libs/jquery/jquery-min',
        underscore: 'libs/underscore/underscore-min',
        backbone: 'libs/backbone/backbone-optamd3-min',
        kendo: 'libs/kendo/kendo.web.min',
        text: 'libs/require/text',
        templates: '../templates'
    },
    shim: {
        kendo: {
            deps: ["jquery"],
            exports: "kendo"
        },
    }
});

require([ 'kendo', 'app' ], function(kendo, App){
    App.initialize();
}); 
```

在我的一个观点中，我正在尝试创建一个 Kendow.observable：-

```
define([
    'jquery',
    'underscore',
    'backbone',
    'kendo',
    'text!templates/newUser.html',
], function($, _, Backbone, kendo, newUserTemplate){
    var newUserView = Backbone.View.extend({
...
            var viewModel = kendo.observable({
... 
```

我需要垫剑道吗？我有 jQuery、Underscore 和 Backbone 的 AMD 版本，所以我认为我不需要填充这些。

我需要在视图中定义 kendo.observable 吗？如果是这样，定义应该是什么样的？

以及如何实例化 Kendo 控件？

谢谢 - 我非常感谢我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T13:07:12.177

好吧，我还没有使用过 Backbone，所以我不太了解它。我确实使用了很多 Kendo，而且我知道 GitHub 上的 Kendo-Backbone 集成项目引起了一些关注，所以也许这会有所帮助？

[https://github.com/kendo-labs/kendo-backbone](https://github.com/kendo-labs/kendo-backbone)

更新：至于剑道和要求，我以与您相同的方式对其进行填充，所以应该没问题。

# android - 将ArrayList 传递给 Activity

> ID：15133121
> 
> 赞同：33
> 
> 时间：2013-02-28T10:28:31.247
> 
> 标签：android, arraylist, parcelable

我搜索了一些主题，但没有找到解决问题的方法。

```
public class Series implements Parcelable {
private String name;
private int numOfSeason;
private int numOfEpisode;

/** Constructors and Getters/Setters have been removed to make reading easier **/

public Series(Parcel in) {
    String[] data = new String[3];
    in.readStringArray(data);
    this.name = data[0];
    this.numOfSeason = Integer.parseInt(data[1]);
    this.numOfEpisode = Integer.parseInt(data[2]);
}

@Override
public int describeContents() {
    return 0;
}

@Override
public void writeToParcel(Parcel dest, int flags) {
    dest.writeStringArray(new String[] { this.name,
            String.valueOf(this.numOfSeason),
            String.valueOf(this.numOfEpisode) });

}

private void readFromParcel(Parcel in) {
    name = in.readString();
    numOfSeason = in.readInt();
    numOfEpisode = in.readInt();
}

public static final Parcelable.Creator CREATOR = new Parcelable.Creator() {
    @Override
    public Series createFromParcel(Parcel in) {
        return new Series(in);
    }

    @Override
    public Series[] newArray(int size) {
        return new Series[size];
    }
}; 
```

}

在我的 MainActivity 中，我有一个 ArrayList。为了使列表动态可编辑，我需要将它传递给另一个我可以编辑它的活动。

```
ArrayList<Series> listOfSeries = new ArrayList<Series>();

    public void openAddActivity() {
    Intent intent = new Intent(this, AddActivity.class);
    intent.putParcelableArrayListExtra(
            "com.example.episodetracker.listofseries",
            (ArrayList<? extends Parcelable>) listOfSeries);
    startActivity(intent);
} 
```

我需要强制转换列表，否则 Eclipse 会给我以下错误消息。 **Intent 类型中的 putParcelableArrayListExtra(String, ArrayList) 方法不适用于参数 (String, List)**

这是正确的方法吗？

```
 ArrayList<Series> list = savedInstanceState
            .getParcelableArrayList("com.example.episodetracker.listofseries"); 
```

这是我尝试在另一个活动中读取数据的方式。

它在上面的线上崩溃了。即 getParcelableArrayList 部分。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-28T14:36:02.623

*   **问题在于写出包裹并从包裹中读取......**

    ```
    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(name);
        dest.writeInt(numOfSeason);
        dest.writeInt(numOfEpisode);
    }

    private void readFromParcel(Parcel in) {
        name = in.readString();
        numOfSeason = in.readInt();
        numOfEpisode = in.readInt();
    } 
    ```

*   你写出的内容必须与你读入的内容相匹配……

    ```
    @Override
     protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Intent i = new Intent(this,SecondActivity.class);

    ArrayList<testparcel> testing = new ArrayList<testparcel>();

    i.putParcelableArrayListExtra("extraextra", testing);
    startActivity(i);
    }

        /**********************************************/

    public class SecondActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ArrayList<testparcel> testing = this.getIntent().getParcelableArrayListExtra("extraextra");
     }
    } 
    ```

*   上面的代码有来自两个不同活动的 onCreate() 。第一个启动第二个；它工作正常我能够毫无问题地拉出包裹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T10:33:57.840

您应该在类上使用该[`putParcelableArrayListExtra()`](http://developer.android.com/reference/android/content/Intent.html#putParcelableArrayListExtra)方法。`Intent`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T22:58:52.453

我用过`putParcelableArrayList(<? extends Parcelable>)`一个`Bundle`对象。不是直接来自意图对象。（我真的不知道有什么区别）。但我习惯以这种方式使用：

```
ArrayList<ParcelableRow> resultSet = new ArrayList<ParcelableRow>();
resultSet = loadData();

Bundle data = new Bundle();
data.putParcelableArrayList("search.resultSet", resultSet);
yourIntent.putExtra("result.content", data);
startActivity(yourIntent); 
```

稍后在您的新活动中，您可以填充最近插入 Bundle 对象的数据，如下所示：

```
Bundle data = this.getIntent().getBundleExtra("result.content");
ArrayList<ParcelableRow> result = data.getParcelableArrayList("search.resultset"); 
```

请记住，您`ArrayList<>`必须只包含可包裹的对象。并且只是为了确保您已经传递了数据，您可以检查收到的数据是否为空，以避免出现问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-25T13:46:50.863

也许这对某人有帮助.. 否则我的问题是我使用了 write 和 readValue 但它应该匹配 writeInt、readInt writeString、readString 等类型

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-13T11:51:23.583

我这样做是这样的：

```
var intent = Intent(this@McqActivity,ResultActivity::class.java)
intent.putParcelableArrayListExtra("keyResults", ArrayList(resultList)) 
// resultList  is of type mutableListOf<ResultBO>()  
 startActivity(intent) 
```

并用于制作**Parcelable 类**。我只是`two operation`首先在我的数据类上方使用**@Parcelize** `Annotation`，然后我`Parcelable`像下面这样继承它..

```
import kotlinx.android.parcel.Parcelize
import android.os.Parcelable

@Parcelize // Include Annotion 
data class ResultBO(val questionBO: QuestionBO) : Parcelable {
    constructor() : this(QuestionBO())
} 
```

**在接收端**

```
if (intent != null) {
     var results = intent.getParcelableArrayListExtra<Parcelable>("keyResults")
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-08T18:08:52.650

你可以通过 Parcelable ArrayList

发件人活动 ->

`startActivity(Intent(this, SenderActivity::class.java).apply { putExtra("getList",list)})`

接收器活动 ->

`private lateinit var list: ArrayList<List>`

`list = this.intent.extras?.getParcelableArrayList("getList")!!`

您将获得列表中的所有 Arraylist。

# forms - Symfony2 子表单名称

> ID：15133125
> 
> 赞同：0
> 
> 时间：2013-02-28T10:28:40.960
> 
> 标签：forms, post, symfony, subform

如何为子表单命名，以便它将数据发送到相应的 post 键中？在以下示例中，主表单的名称是“form”，两个子表单的名称也是“form”，这导致只显示一个子表单。帖子数据如下所示：

```
form[form][amount]=
form[form][value]= 
```

在此示例代码`$mainForm`中，`$subForm1`和`$subForm2`是`FormBuilder`.

```
$subForm1->add('amount', 'text');
$subForm1->add('value', 'text');
$mainForm->add($subForm1);

$subForm2->add('amount', 'text');
$subForm2->add('value', 'text');
$mainForm->add($subForm2); 
```

那么如何更改它发送帖子数据，如下所示？

```
form[subForm1][amount]=
form[subForm1][value]=
form[subForm2][amount]=
form[subForm2][value]= 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:16:34.567

你是如何创建你的`FormBuilders`？

如果您使用的是`FormFactory`，则可以使用工厂上的`createNamed()`或`createNamedBuilder()`方法来设置名称。

或者，您可以调用`$mainForm->create($name)`创建一个命名表单（请注意，所做的只是调用`$mainForm`'s Factory 并且不会自动将其添加到`$mainForm`.

# asp.net-mvc-4 - asp.net mvc 4 本地化资源路径太长

> ID：15133127
> 
> 赞同：0
> 
> 时间：2013-02-28T10:28:42.850
> 
> 标签：asp.net-mvc-4, localization

我创建了一个类库，我在其中存储了我的资源文件，用于我的 asp.net mvc4 本地化。我一直遵循与我的视图相同的文件夹结构。

我最终不得不引用字符串，例如：

```
@Resource.QuoteArea.Quote.Auto.DriverInfo 
```

打字很长而且很乏味。另外，它使我的观点难以阅读。在 mvc 4 中进行本地化是否有更好（更整洁）的方法？也许使用第三方库？我已经使用 mvccontrib 进行模型本地化，所以已经排序。但是对于非模型相关的事情，我面临着上述问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:55:07.203

您可以在资源属性中更改资源命名空间，使其更短。这篇博文对我很有帮助，也对你有用。

[http://adamyan.blogspot.co.uk/2010/02/aspnet-mvc-2-localization-complete.html](http://adamyan.blogspot.co.uk/2010/02/aspnet-mvc-2-localization-complete.html)

# javascript - KineticJS 转换图层以进行滚动

> ID：15133130
> 
> 赞同：1
> 
> 时间：2013-02-28T10:28:48.173
> 
> 标签：javascript, scroll, kineticjs

我一直在尝试按照 Kinetic 关于 API 的教程将滚动条放入我的 KineticJS 应用程序中。我有滚动条本身应该出现，但我不确定如何处理事件侦听器以实际让舞台或每个图层移动，以便滚动条实际移动视图。

```
var hscrollArea = new Kinetic.Rect({
    x: 10,
    y: $(window).height() - 30 - 80, // 80 to account for the fixed footer
    width: $(window).width() - 40,
    height: 20,
    fill: "gray",
    opacity: 0.3
});

var hscroll = new Kinetic.Rect({
    x: 10,
    y: $(window).height() - 30 - 80,// 80 to account for the fixed footer
    width: 130,
    height: 20,
    fill: "orange",
    draggable: true,
      dragBoundFunc: function(pos) {
        // TODO: Move stage or layers at this point
        console.log("dragBoundFunc: " + this);
        return {
            x: pos.x,
            y: this.getAbsolutePostion().y
        };
      },
    opacity: 0.9,
    stroke: "black",
    strokeWidth: 1
});

var vscrollArea = new Kinetic.Rect({
    x: $(window).width() - 30,
    y: 10,
    width: 20,
    height: $(window).height() - 40 - 80,
    fill: "gray",
    opacity: 0.3
});

var vscroll = new Kinetic.Rect({
    x: $(window).width() - 30,
    y: 10,
    width: 20,
    height: 70,
    fill: "orange",
    draggable: true,
    dragBoundFunc: function(pos) {
        // TODO: Move stage or layers at this point
        console.log("dragBoundFunc: " + this);
        return {
            x: this.getAbsolutePosition().x,
            y: pos.y
        };
    },
    opacity: 0.9,
    stroke: "black",
    strokeWidth: 1
}); 
```

任何帮助将不胜感激:) 谢谢，贝基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:09:17.747

拖动滚动条（矩形）时，您可以移动舞台或图层。IE，

```
stage.move(50,50);
stage.draw();

stage.move(-50,-50);
stage.draw(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-02T03:38:33.163

我建议将您希望滚动的对象放入它们自己的组中并相应地定位组，而不是尝试定位层或舞台。组的大小将是组内所有对象的（轴对齐）边界框。您可以使用组的大小并将其与舞台的大小进行比较，以获得宽度和高度的比率。这些比率将用于帮助计算水平和垂直滚动条的大小（这些条被拖动以创建滚动效果）。该比率还将用于确定何时显示和隐藏滚动条区域。大小的差异将有助于确定如何在舞台内定位该组。

# android - Android webview在某些情况下不显示网页

> ID：15133132
> 
> 赞同：2
> 
> 时间：2013-02-28T10:28:52.287
> 
> 标签：android, android-webview, html5-video

我有一个基于 alfresco android sdk 的应用程序。用户登录到服务器后 MainActivity 启动。MainActivity 本身几乎没有片段。一个片段包含 webview、一些按钮和 textview。这是xml布局的代码：

```
 <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/prop"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:gravity="center" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:orientation="vertical" >

            <LinearLayout
                android:id="@+id/video_layout"
                android:layout_width="match_parent"
                android:layout_height="192dp"          
                android:orientation="horizontal"
                android:gravity="center" >

                <WebView
                    android:id="@+id/video_web_view"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" /> 

            </LinearLayout>
                .
                .
                . 
        </LinearLayout>
 </ScrollView> 
```

当显示布局时，webview 应该加载带有 HTML5 视频的页面的 url，但只显示空白页面。一段时间后空白页变为灰色。我观察到这意味着页面已加载，并在用户滚动布局后显示带有 html5 视频的页面。我尝试过的每个网址都会发生这种情况。

在测试活动中，我使用相同的布局，并且正确加载并显示了带有视频的页面。

在片段和测试活动中，我使用相同的代码来设置 webview 和加载 url。Javascript 已启用，我使用 WebChromeClient，就像 WebView 文档中推荐的那样。我在应用程序清单中也有 INTERNET 权限。

这是来自测试活动的 onCreate 方法的代码：

```
protected void onCreate(Bundle savedInstanceState){         
        super.onCreate(savedInstanceState);     
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.web_video);
            web = (WebView)findViewById(R.id.video_web_view);
                .
                .
                .
            web.setWebChromeClient(new WebChromeClient());
            WebSettings webSettings = web.getSettings();
        webSettings.setJavaScriptEnabled(true);
        webSettings.setJavaScriptCanOpenWindowsAutomatically(true);
        webSettings.setAllowContentAccess(true);
        webSettings.setAllowFileAccess(true);
            webSettings.setPluginState(PluginState.ON);
        webSettings.setDomStorageEnabled(true);
        web.setHorizontalScrollBarEnabled(false);
        web.setVerticalScrollBarEnabled(false);
        webSettings.setRenderPriority(RenderPriority.HIGH);     
        webSettings.setUseWideViewPort(false);
        webSettings.setCacheMode(WebSettings.LOAD_DEFAULT);
            web.loadUrl(someUrl);
} 
```

相同的代码在片段中包含 onCreateView。唯一的区别是用户必须登录到服务器才能显示片段。

我几乎忘记了 Logcat 的错误：

```
02-28 09:34:20.832: V/chromium(9079): external/chromium/net/host_resolver_helper/host_resolver_helper.cc:66: [0228/093420:INFO:host_resolver_helper.cc(66)] DNSPreResolver::Init got hostprovider:0x5354b220
02-28 09:34:20.832: V/chromium(9079): external/chromium/net/base/host_resolver_impl.cc:1515: [0228/093420:INFO:host_resolver_impl.cc(1515)] HostResolverImpl::SetPreresolver preresolver:0x018ee018
02-28 09:34:21.182: V/WebRequest(9079): WebRequest::WebRequest, setPriority = 1
02-28 09:34:21.382: V/chromium(9079): external/chromium/net/disk_cache/hostres_plugin_bridge.cc:52: [0228/093421:INFO:hostres_plugin_bridge.cc(52)] StatHubCreateHostResPlugin initializing...
02-28 09:34:21.392: V/chromium(9079): external/chromium/net/disk_cache/hostres_plugin_bridge.cc:57: [0228/093421:INFO:hostres_plugin_bridge.cc(57)] StatHubCreateHostResPlugin lib loaded
02-28 09:34:21.392: V/chromium(9079): external/chromium/net/disk_cache/hostres_plugin_bridge.cc:63: [0228/093421:INFO:hostres_plugin_bridge.cc(63)] StatHubCreateHostResPlugin plugin connected
02-28 09:34:21.392: V/chromium(9079): external/chromium/net/http/http_cache.cc:1167: [0228/093421:INFO:http_cache.cc(1167)] HttpCache::OnBackendCreated HostStat created
02-28 09:34:21.392: E/chromium(9079): external/chromium/net/disk_cache/stat_hub.cc:213: [0228/093421:ERROR:stat_hub.cc(213)] StatHub::Init - App org.alfresco.mobile.android.samples isn't supported.
02-28 09:34:21.392: E/chromium(9079): external/chromium/net/disk_cache/stat_hub.cc:213: [0228/093421:ERROR:stat_hub.cc(213)] StatHub::Init - App org.alfresco.mobile.android.samples isn't supported.
02-28 09:34:22.222: D/skia(9079): notifyPluginsOnFrameLoad not postponed 
```

有谁知道我做错了什么？有人有什么建议可以帮助我吗？

感谢您的回答，并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T12:32:39.723

所以我弄清楚我做错了什么。它与加速有关。我只是在我的代码中添加了以下行：

```
mWebView.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

它解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T06:05:52.157

我有同样的问题。下面的代码段解决了这个问题

```
 WebView webView = (WebView) findViewById(R.id.webview);
    webView.getSettings().setJavaScriptEnabled(true);     
    webView.getSettings().setLoadWithOverviewMode(true);
    webView.getSettings().setUseWideViewPort(true);   
    webView.setWebChromeClient(new WebChromeClient());
    webView.loadUrl(url); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:34:59.087

检查您是否已在 AndroidManifest 文件中包含 INTERNET PERMISSION。

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-16T14:10:46.460

在看了这篇文章并做了一些其他研究之后，我终于弄清楚了我的问题是什么。我的清单是正确的，我的布局和 webview 设置都是正确的。但是，我传递给 WebViewActivity 类的 URL 格式不正确。差别非常微妙……

我的 URL 以某种方式格式化：

格式：“方案：//www.websitename.com//”

示例：“ [http://www.awebsite.com//](http://www.awebsite.com//) ”

然而事实证明，有些网站的格式并不完全如此，浏览器的工作就是为您填补空白。例如，您只需在浏览器中输入“google.com”，它就会知道将您带到“ [https://www.google.com/](https://www.google.com/) ”。Android WebView 不这样做。

解决方法：访问您尝试在桌面浏览器中加载的网站，并在网站加载后复制 URL。

将其直接粘贴到您的 Java 代码中：

```
final String websiteURL = "http://awebsite.com//"; 
```

请注意，没有“www”。在这个网址上。有些网站需要“www”。有些没有。再次，从您的桌面网络浏览器复制 URL 以确定“www.”是否存在。是需要的。另一个需要注意的是，在这个 URL 的末尾有一个双斜杠“//”。

最重要的是，Android WebView 很挑剔，它要求字符串 URL*完全*正确，否则它将开始抛出类似这样的错误：

```
12-16 13:40:26.518: E/chromium(13869): external/chromium/net/disk_cache/stat_hub.cc:216: [1216/134026:ERROR:stat_hub.cc(216)] StatHub::Init - App com.nucitrus.thestory isn't supported. 
```

我希望这有帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T12:49:20.733

please add

```
android:hardwareAccelerated="true" 
```

in your webview activity class file. because in android 3.0+ its supports only if we add this line in android manifest file.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-27T22:11:59.787

我有同样的问题。但是当我在移动wifi或互联网上时它会修复

# python - 如何在 Scrapy 中更改用户代理和延迟时间？

> ID：15133134
> 
> 赞同：0
> 
> 时间：2013-02-28T10:28:56.400
> 
> 标签：python, scrapy

我正在使用 Scrapy 0.16.4

我已使用此代码更改下载延迟和用户代理：

```
DOWNLOAD_DELAY = 2
USER_AGENT = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.97 Safari/537.22 AlexaToolbar/alxg-3.1" 
```

我不确定这是否有效，但是，我仍然无法完全抓取该站点的所有页面。它总是给我一个随机刮掉的物品。有时，我得到 13 个，有时我得到 30 个，有时我得到 52 个报废物品。

可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-06T08:34:58.380

某些网站的每个 ip 可能存在访问限制。他们很可能不会为不同的用户代理（如 chrome、firefox、ie 或 safari 等）积累访问号码，因此您可以尝试使用动态用户代理池来减轻大量访问。

[这](http://tangww.com/2013/06/UsingRandomAgent/)是如何“在 Scrapy 中使用随机用户代理”的链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:25:23.890

也许该站点使用验证码阻止了您，您可以打印 response.url 并查看您是否获得了推荐人，尝试将 DOWNLOAD_DELAY 设置为 10，您可以将其设置到蜘蛛并打印 url，如果需要 10 秒打印它的工作。

# php - 如何使用 Javascript 获取 URL 变量

> ID：15133141
> 
> 赞同：0
> 
> 时间：2013-02-28T10:29:32.367
> 
> 标签：php, javascript, redirect, login

我正在使用 PHP、mySQL 和 Javascript 编写登录系统。我的网站实际上是一个用 javascript 编写的 1 页应用程序 - 只有 1 个 html 页面。所有交互和导航都是通过 javascript 完成的。

当用户注册时，我在激活列中使用 32 位密钥在数据库中创建他们的记录。我将此作为激活链接通过电子邮件发送给注册人。这会将他们带到一个激活他们帐户的 php 文件（如果有错误，则不会）。一切都很好。

激活（或错误）后，我可以将他们带到一个 html 页面（例如 header('somesite.com/success.html') 告诉他们他们的帐户是否已激活，但我更愿意将他们带回特定功能在我的 1 页 javascript 网站中。我该怎么做？

我可以将它们带到该站点，但是如何将消息从我的 php 重定向传递到该站点，以便它知道是显示成功消息还是错误消息？

我是否将其放在重定向的 URL 中，例如[http://somesite.com?activation=success](http://somesite.com?activation=success)？如果是这样，我如何将此变量放入我的 javascript 中？

我可以从 php 激活脚本中设置一个会话变量并在我的代码中检查它，但这似乎很笨拙。

我可以在 URL 中设置一个哈希并在代码中选择它，但如果可以的话，我会避免使用哈希导航。关于实现这一目标的方法的任何想法？

以下帮助和网站其他地方的最终答案：

```
function getURLParameter(name) {
return decodeURIComponent(
    (RegExp(name + '=' + '(.+?)(&|$)').exec(location.search)||[,null])[1]
);
} 
```

然后重定向注册，例如 somesite.com?email=somebody%40else@somewhere.com&key=7da93f78cb4942555863c161f50f258d

我可以像 getURLParameter('email') 和 getURLParameter('key') 一样简单地获取这些变量

感谢大家的帮助。一定会喜欢这个网站

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:33:06.443

由于您的单页应用程序中包含所有内容，因此您也可以将其用于激活 - 将激活链接转到`http://homesite.com?activation=<32characterkey>`，当您的应用程序检测到 GET 参数时，使用 AJAX 调用 PHP 激活，并通知用户结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:34:43.017

您可以使用 Javascript 从 URL 获取变量：

我实际上问了一个类似的问题（我找不到）关于使用 Javascript 获取 URL 变量，有人非常有帮助地给了我这个函数：

```
function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {vars[key] = value});
    return vars;
} 
```

因此，要获得一个名为 'activation' 的 GET 变量，您可以像这样简单地调用函数：

```
getUrlVars()['activation'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:31:32.397

您应该使用 AJAX 登录并在 AJAX 成功/错误回调中调用您的函数。

`$.ajax()`您可以使用 jQuery函数轻松做到这一点

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# php - 未捕获的 ReferenceError：未定义 add_chamber

> ID：15133143
> 
> 赞同：1
> 
> 时间：2013-02-28T10:29:39.027
> 
> 标签：php, javascript, jquery, html, codeigniter

这是我的 codeigniter 项目中的视图文件。

```
<script type="text/javascript">
        $(document).ready(function(){
            // find the input fields and apply the time select to them.
            $('#sample1 input').ptTimeSelect();
        });
    </script>
    <script type="text/javascript">

function add_chamber() {

    $.ajax({
      url: "<? echo base_url("doctormain/add_chamber");?>",
        type: "POST",
     data: {
            name :  $("input#name").val()
            address :  $("input#address").val()
            city :  $("input#city").val()
            locality :  $("input#locality").val()
            State: :  $("input#state").val()
            landline :  $("input#landline").val()
            mobile :  $("input#mobile").val()
            email :  $("input#email").val()
            days :  $("input#mon").val()+$("input#tue").val()+$("input#wed").val()+$("input#thur").val()+$("input#fri").val()+$("input#sat").val()+$("input#sun").val()
            start :  $("input#start").val()
            end :  $("input#end").val()
            comments :  $("input#comments").val()

                    }
    })
   .success (function(response) { $('#sucess').html(response)})
    .error   (function()     { alert("Error")   ; });

}
</script>

<div class="content">
<div class="content-left">
<div  class="row1">
<h2>Welcome <? echo $username ?></h2>
<h1> Add Chamber </h1>
<h2><div id="sucess"></div></h2>

   <?php echo form_open_multipart('doctormain/add_chamber');?>

      <table width="100%">

<tr><td> Name:</td><td> <input name="name" type="text" id="name"></td></tr>
<tr><td> Address:</td><td>  <input name="address" type="text" id="address"></td></tr>
<tr><td> City:</td><td>  <input name="city" type="text" id="city"></td></tr>
<tr><td> Locality:</td><td> <input name="locality" type="text" id="locality"></td></tr>
<tr><td> State:</td><td>  <input name="state" type="text" id="state"></td></tr>
<tr><td> Landline:</td><td>  <input name="landline" type="text" id="landline"></td></tr>
<tr><td> Mobile:</td><td>  <input name="mobile" type="text" id="mobile"></td></tr>
<tr><td> Email:</td><td>  <input name="email" type="text" id="email"></td></tr>
<tr>
  <td> Days Of Availability:</td><td>
  Mon:<input name="mon" type="checkbox" id="mon" value="1" checked>
  Tue:<input name="tue" type="checkbox" id="tue" value="2"  checked>
  Wed:<input name="wed" type="checkbox" id="wed" value="3" checked>
  Thur:<input name="thur" type="checkbox" id="thur" value="4" checked>
  Fri:<input name="fri" type="checkbox" id="fri" value="5" checked>
  Sat:<input name="sat" type="checkbox"  id="sat" value="6" checked>
  Sun:<input name="sun" type="checkbox" id="sun" value="7" checked>
  </td></tr>
  <tr><td> Time Of Availability</td><td>

  <div id="sample1" class="ui-widget-content" style="padding: .5em;">
        <p>
            <label>Start</label>
            <input name="s1Time2" id="start" value="" /> 
            <label>End</label>
            <input name="s1Time2" id="end" value="" />
        </p>
        </div>

  </td></tr>
<tr><td> Comments:</td><td> <input name="comments" type="testbox" id="comments" ></td></tr>

<tr><td> </td><td> <input name="submit" id="submit" class="button" type="button" value="Save" onclick="add_chamber()">
</td></tr>
<? echo form_close();?>
      </table>

   <div id="results">
   </div>
   </div>

</div>

<div class="content-right">
<div class="mainmenu">
<h2 class="sidebar1">My Menu</h2>
<p><ul>
  <li><a href="#">this is a dummy link 1</a></li>
  <li><a href="#">this is a dummy link 2</a></li>
  <li><a href="#">this is a dummy link 3</a></li>
  <li><a href="#">this is a dummy link 4</a></li>
  <li><a href="#">this is a dummy link 5</a></li>
  <li><a href="#">this is a dummy link 6</a></li>
  <li><a href="#">this is a dummy link 7</a></li>
  <li><a href="#">this is a dummy link 8</a></li>
  <li><a href="#">this is a dummy link 9</a></li>
  <li><a href="#">this is a dummy link 10</a></li>
</ul></p>
</div>

</div>
</div> 
```

但是当我单击保存以执行所需的数据库输入工作时，我给了我一个错误

> 未捕获的 ReferenceError：未定义 add_chamber

我找不到错误在哪里，任何人都可以帮助我解决这个错误。是否有任何关于范围或其他我无法指出的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:32:45.727

试试这个

```
url: '<? echo base_url("doctormain/add_chamber");?>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:33:32.587

你的ajax调用都是错误的。

尝试

```
$.ajax({
 url : url,
 success : function(response){  },
 error   : function(){  }
});

function add_chamber()
{
    $.ajax(
    {
        url: "<? echo base_url("doctormain/add_chamber");?>",
        type: "POST",
        data: 
        {
            name :  $("input#name").val(),
            address :  $("input#address").val(),
            city :  $("input#city").val(),
            locality :  $("input#locality").val(),
            State: :  $("input#state").val(),
            landline :  $("input#landline").val(),
            mobile :  $("input#mobile").val(),
            email :  $("input#email").val(),
            days :  $("input#mon").val()+$("input#tue").val()+$("input#wed").val()+$("input#thur").val()+$("input#fri").val()+$("input#sat").val()+$("input#sun").val(),
            start :  $("input#start").val(),
            end :  $("input#end").val(),
            comments :  $("input#comments").val()
        },
        success (function(response) { $('#sucess').html(response)}),
        error   (function()     { alert("Error"); }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:34:49.220

逃脱`"`

```
url: "<? echo base_url(\"doctormain/add_chamber\");?>", 
```

或者

```
url: "<? echo base_url('doctormain/add_chamber');?>", 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T10:36:49.333

您在连接和 ajax 中的函数顺序中有错误，将您的函数替换为：

```
 function add_chamber() {
    $.ajax({
        url: "<? echo base_url("doctormain/add_chamber"); ?>",
        type: "POST",
        data: {
            name :  $("input#name").val(),
            address :  $("input#address").val(),
            city :  $("input#city").val(),
            locality :  $("input#locality").val(),
            State:$("input#state").val(),
            landline :  $("input#landline").val(),
            mobile :  $("input#mobile").val(),
            email :  $("input#email").val(),
            days :  $("input#mon").val() +$("input#tue").val()+$("input#wed").val()+$("input#thur").val()+$("input#fri").val()+$("input#sat").val()+$("input#sun").val(),
            start :  $("input#start").val(),
            end :  $("input#end").val(),
            comments :  $("input#comments").val()
        },
        success :function(response) {
            $('#sucess').html(response)
        },
        error: function(){
            alert("Error");
        }
    });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T10:39:09.987

您的函数中有一些语法错误，请替换此代码

功能 add_chamber() {

```
$.ajax({
  url: "<? echo base_url('doctormain/add_chamber');?>",
    type: "POST",
 data: {
        name :  $("input#name").val(),
        address :  $("input#address").val(),
        city :  $("input#city").val(),
        locality :  $("input#locality").val(),
        State:   $("input#state").val(),
        landline :  $("input#landline").val(),
        mobile :  $("input#mobile").val(),
        email :  $("input#email").val(),
        days :  $("input#mon").val()+$("input#tue").val()+$("input#wed").val()+$("input#thur").val()+$("input#fri").val()+$("input#sat").val()+$("input#sun").val(),
        start :  $("input#start").val(),
        end :  $("input#end").val(),
        comments :  $("input#comments").val()

                }
}) 
```

.success (function(response) { $('#sucess').html(response)}) .error (function() { alert("Error") ; });

}

# powershell - 如何从模块本身获取磁盘上的二进制模块位置？

> ID：15133155
> 
> 赞同：1
> 
> 时间：2013-02-28T10:30:20.017
> 
> 标签：powershell

我正在开发的二进制 PowerShell 模块需要知道它在安装它的机器上的磁盘上的物理位置。

是否有可能从`Cmdlet`课堂上得到它？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:41:57.330

任何 .NET 程序集（并且 PowerShell 二进制模块是 .NET 程序集）都具有包含此信息的属性。在 C# 中：

```
var myPath = Assembly.GetExecutingAssembly().CodeBase; 
```

脚本模块`$PSScriptRoot`中还有当前脚本的位置；在 V3 中，这似乎是在任何脚本中设置的。

# xml - 如果属性或元素不存在，有没有办法让 XSLT 抛出错误？

> ID：15133164
> 
> 赞同：2
> 
> 时间：2013-02-28T10:30:53.557
> 
> 标签：xml, xslt

当我尝试访问源 XML 中不存在的属性（或元素）时，我正在寻找一种使 XSLT 抛出错误的简单方法。目前我所做的是首先检查属性是否存在，如果不存在则手动抛出错误 - 例如：

```
<xsl:if test="not(attribute_to_use)">

 <xsl:message terminate="yes">

  <xsl:text>error message</xsl:text>                    

 </xsl:message>

</xsl:if>

<!-- do something -->

<xsl:attribute name="new_attribute"><xsl:value-of select="attribute_to_use" /></xsl:attribute> 
```

我发现有很多代码来检查一个属性——特别是如果你对所有属性都这样做。在 XSLT 中有没有其他方法可以做到这一点 - 例如通过设置一个指令，如“对不存在的属性中止”？

我知道这样做的一种方法也是使用 DTD 或模式，如果没有直接的 XSLT 方式，我会这样做。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:56:49.020

如您所知，XSLT 1.0 基于模板来匹配节点，因此您可以编写一个模板来匹配所有没有特定属性的元素。

例如，以下模板将匹配所有没有@id 属性的元素。

```
<xsl:template match="*[not(@id)]">
    <xsl:message terminate="yes">
        <xsl:value-of select="concat('Attribute @id does not exist in element ', name())" />
    </xsl:message>
</xsl:template> 
```

因此，如果您想强制某些元素具有特定属性，您可以在匹配表达式中使用类似：Element[not(@id)]|Element2[not(@a)] 等。然后为每个元素编写一个不同的模板元素来处理它们，以防它们具有这些属性：

```
<xsl:template match="Element[not(@id)]|Element2[not(@a)]">
     <!-- Throw error message -->
</xsl:template>

<xsl:template match="Element">
     <!-- Process Elements which have an @id attribute -->
</xsl:template>

<xsl:template match="Element2">
     <!-- Process Elements which have an @a attribute -->
</xsl:template> 
```

您可以根据需要编写复杂的模板（这不应该很复杂），以在某些元素具有某些属性（例如“具有属性”、“属性的值无效”、“子项数为 5）时引发错误'， ETC。

希望这能让您了解如何以一般方式实现您想要实现的目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T14:45:56.143

在 XPath 2.0 中，当您想使用节点 $N 并且如果它不存在则失败时，只需将对 $N 的引用包装在一个函数调用中，exactly-one($N) 或 one-or-more($N) .

# arrays - 如何将一个结构数组传递给另一个结构数组？

> ID：15133169
> 
> 赞同：5
> 
> 时间：2013-02-28T10:31:27.103
> 
> 标签：arrays, matlab, struct

我试图将一个结构数组传递给另一个没有成功。

```
s(1).f = (1:3);
s(2).f = (4:6);
s(3).f = (7:9);

q(1).n = 'nameA';
q(2).n = 'nameB';
q(3).n = 'nameC';
q(3).f = [];

q.f = s.f 
```

`n`不应修改该字段。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:32:10.807

怎么样[`arrayfun`](http://www.mathworks.com/help/matlab/ref/arrayfun.html)

```
q = arrayfun( @(x,y) setfield( x, 'f', y.f ), q, s ); 
```

显然[`setfield`](http://www.mathworks.com/help/matlab/ref/setfield.html)仅用于在结构数组中设置一个结构元素 - 因此`arrayfun`.

**编辑：**[Dan](https://stackoverflow.com/a/15135536/1714410)
给出了一个更好的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T12:25:47.027

您可以将结构数组的每个字段直接分配给元胞数组，然后可以使用`deal`将结构转换为元胞数组：

```
s(1).f = (1:3);
s(2).f = (4:6);
s(3).f = (7:9);

q(1).n = 'nameA';
q(2).n = 'nameB';
q(3).n = 'nameC';

c = cell(3,1);
[c{:}] = deal(s.f);
[q.f] = c{:}; 
```

[这是一篇关于这类事情的好文章](http://blogs.mathworks.com/loren/2008/01/24/deal-or-no-deal/#9)

**编辑：** 或者正如[Shai](https://stackoverflow.com/users/1714410/shai)指出的那样，你可以去

```
[q.f] = s.f 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T03:02:02.020

我想让 Shai 的这个建议更明显，因为它更容易阅读。

`[q.f] = s.f`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-28T18:37:06.440

虽然我会说[@Dan 的回答](https://stackoverflow.com/questions/15133169/matlab-how-to-pass-a-struct-array-to-another-struct-array/15135536#15135536)对于这个问题来说是相当经典的，但我想提出一个替代方案：

```
s(1).f = (1:3);
s(2).f = (4:6);
s(3).f = (7:9);

[q(1:length(s)).f] = s.f; 
```

虽然比语法稍微冗长一些`[q.f] = s.f`，但它具有按预期运行的优点，即使`q`没有预先分配到正确的大小以作为`s`.

例如：

```
s(1).f = (1:3);
s(2).f = (4:6);
s(3).f = (7:9);

[q.f] = s.f; 
```

返回等于`q.f`_`1x1 struct``s(1).f`

# asp.net-mvc - 为 img 标签创建强类型自定义助手

> ID：15133172
> 
> 赞同：0
> 
> 时间：2013-02-28T10:31:34.900
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, html-helper

我正在尝试在我的示例 MVC 项目中创建自定义 Html Helpers。

这是我到目前为止所做的：

```
public static MvcHtmlString ImageFor<TModel,TValue>(this HtmlHelper<TModel> htmlHelper,
            Expression<Func<TModel,TValue>> expression,
            string alternateText,
            object htmlAttributes) 
        {
            ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);
            string name = ExpressionHelper.GetExpressionText(expression);

            TagBuilder tagBuilder = new TagBuilder("img");
            tagBuilder.MergeAttribute("src", metadata.Model.ToString());
            tagBuilder.MergeAttribute("alt", alternateText);
            tagBuilder.MergeAttribute("name", name);

            return MvcHtmlString.Create(tagBuilder.ToString(TagRenderMode.SelfClosing));
        } 
```

在我的控制器中，我将图像路径传递给属性（imgUrl）。

当我尝试为其创建标签时，它不会给我`image`打开浏览器，而是始终显示替代文本。

这是它的渲染标记。

```
<img name="imageUrl" alt="alernate" src="C:\Users\Administrator\Desktop\down.png"/> 
```

虽然我已经完成了松散类型的帮助程序`@Html.Image`，但它完美无缺！

我的代码出了什么问题。

我搜索了很多有关创建`Strongly Typed Helpers`的内容，但是没有一个教程向我解释当我们访问强类型帮助器时发生了什么。

我还看到过 SO 中的帖子，当有人发布有关助手的代码时，它只是一段代码，没有任何解释。

如果有人有创建强类型自定义助手的教程，请分享链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:34:07.957

您的`src`属性指向您的本地驱动器。那是行不通的。您的浏览器显示替代文本，因为它找不到图像。您应该改用图像的*URL*。例如`src="/images/down.png"`.

# c# - 设置 OpenFileDialog 限制

> ID：15133181
> 
> 赞同：2
> 
> 时间：2013-02-28T10:31:50.127
> 
> 标签：c#, openfiledialog

我有一个`Windows Form`应用程序，我使用一个自定义控件，允许用户选择和保存图像。但是我需要插入一些限制。最简单的方法是只选择`jpg`文件，但现在我需要限制用户只能查看和选择`jpg`名称中具有特定模式的图像，如果可能的话（我想我已经在其他 Windows 应用程序中看到了这一点）我想要此模式保留在该`File Name`字段中，用户无法删除它。

我到目前为止所做的：

我有限制设置：

```
 fileNameFilter = "All files (*.jpg)|" + ImageNameFilter + "*.jpg";
    openFileDialog1.Filter = fileNameFilter; 
```

我可以向用户展示他需要寻找的模式：

```
openFileDialog1.FileName = fileNameFilter; 
```

但是，有两件事我仍然无法完成。这是一个打印屏幕，可以清楚地说明：

![在此处输入图像描述](../Images/65a276d02244686c9257c590aeaaae3e.png)

首先 - 显示了模式，但是当它像这样制作时我可以将其删除，并且我想要该`File name`字段是否可能，`Read only`或者换句话说，用户不应该能够删除我放在那里的内容。

第二 - 这是先前打开的文件的列表，即使文件与名称限制/过滤器不匹配，用户仍然可以从列表中选择并保存该文件。如果可能的话，我需要再次清理这个列表，`File Dialog`或者以某种方式阻止用户保存这个文件，但我认为第二个需要太多额外的业务逻辑，所以我更喜欢只清理列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:51:18.330

试图通过过滤器或文件名模式严格控制文件对话框中显示的内容是行不通的。用户可以随时在文件名编辑框中键入自己的模式。

您需要做的是使用文件对话框的工具来控制显示的对象。不幸的是，C# 包装器没有公开底层 Win32 控件提供的此功能。

如果你需要支持 XP，那么你需要监听[`CDN_INCLUDEITEM`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms646862.aspx)通知。这是为文件夹中的每个项目发送的。因此，您有机会允许或拒绝包含每个项目。

对于 Vista 和更高版本中使用的对话框，情况有所不同。这些对话框使用[`IFileDialog`](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb775966.aspx). 您需要调用该[`SetFilter`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761826.aspx)方法来添加过滤器。该过滤器是您的实现，[`IShellItemFilter`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761090.aspx)它再次使用该[`IncludeItem`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761088.aspx)方法控制包含。

从 C# 实现这一切会有点混乱，但这是按照您的要求做的正确方法。完成此操作后，甚至无需考虑尝试将文件名编辑框设为只读。因为对话框只会提供您允许包含的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T10:36:17.340

[没有](https://stackoverflow.com/questions/13772222/how-to-restrict-filename-modification-in-openfiledialog-in-c-sharp)。

两种解决方案：在单击打开后检查文件名（无论如何您都应该这样做），或者创建您自己的控件来显示与您的文件名模式匹配的文件。

# ios - NSData / setHTTPBody 的最大参数大小？

> ID：15133189
> 
> 赞同：2
> 
> 时间：2013-02-28T10:32:13.733
> 
> 标签：ios, iis-7, http-post, nsdata, maxrequestlength

我的 iPad 应用程序将文件列表作为字符串参数`fileList`发送到如下 Web 方法：

```
NSString *post = [NSString stringWithFormat:@"sessionID=%@&fileList=%@&dateTime=%@&userID=%@", sessionID, fileList, timeOpened, userID];    
NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *comparisonURLString = SERVER_COMPARE_URL_STRING;
NSURL *comparisonURL = [NSURL URLWithString:comparisonURLString];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:comparisonURL];

NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

[request setHTTPMethod:@"POST"];
[request addValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:postData]; 
```

当文件列表超过一定大小时，它似乎被截断了。[我在苹果文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)中找不到关于最大尺寸的任何信息。此外，无论如何，后续参数似乎都可以收到，但在我将其视为问题的可能根源之前，我想知道是否有人知道是否有这样的限制？

服务器运行 IIS7，webConfig`maxRequestLength`设置为 1048576。

-编辑-

**问题的根源：**

我创建了一个 webmethod，它只将整个`POST`作为参数，并在 & 符号之后删除所有内容，所以我认为这可能是问题所在，而不是参数大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:49:27.847

我*认为*问题可能是缺少`Content-Type`HTTP 请求标头字段：

```
[request setValue:@"application/x-www-form-urlencoded; charset=UTF-8" forHTTPHeaderField:@"Content-Type"]; 
```

还使用 UTF-8 对有效负载进行编码：

```
NSData *postData = [post dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES]; 
```

# matlab - 将循环中的每个数据保存为matlab中的文本文件

> ID：15133191
> 
> 赞同：1
> 
> 时间：2013-02-28T10:32:18.430
> 
> 标签：matlab, loops, text-files

我正在做一个操作来获得一个矩阵 M_T。该矩阵将保存到文本文件中。并且这个文本文件将被再次用作主要数据文件。这必须重复 100 次。最后，我想将生成的 100 个文本文件中的所有数据保存到一个名为 final_result.txt 的文本文件中。我无法弄清楚如何在循环中以不同的名称保存不同的文本文件。我尝试编写以下代码。但它显示错误。

```
for k=1:100

fid = fopen('data1.txt'); 
A =  textscan(fid, '%f %f %f ') ;
%read the file
a = A{1};
b = A{2};
c = A{3};
p=[a b c];
p_t=p.';
M=rotationMatrix*p_t;
M_T=M.';

fid = fopen('data1.txt', 'wt');
fprintf(fid,' %f\t %f\t %f\n',M_T);
fclose(fid);

textfilename = ['result' num2str(k) '.txt'];
fid1 = fopen('result'k '.txt', 'wt');
fprintf(fid1,' %f\t %f\t %f\n',M_T);
fclose(fid1);

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:47:31.077

试试这个

```
textfilename = ['result' num2str(k) '.txt'];
fid1 = fopen(textfilename, Write);
... 
```

这应该生成一个单独的文件`resultk.txt`，其中 k = 1,...,100。此外，您打开输入文件两次，但只关闭一次。我认为在打开文件进行阅读之前关闭文件会更好，然后再打开文件进行写入。如果这不能解决问题，请尝试发布您收到的特定错误消息。

要将所有文件输出到主文件，请在循环开始之前执行此操作

```
fidresult = fopen('final_result.txt', Write); 
```

然后在每次迭代

```
fprintf(fidresult,' %f\t %f\t %f\n',M_T); 
```

然后在循环完成后

```
fclose(fidresult) 
```

除了为每个循环迭代创建一个单独的文件之外，这应该在每次迭代时将您的矩阵输出到主结果文件

# tridion - 同步器 - 无法获取客户端资源

> ID：15133193
> 
> 赞同：2
> 
> 时间：2013-02-28T10:32:25.397
> 
> 标签：tridion, tridion2009

我已经把它放到旧论坛上，所以我希望这会很好。

突然在一个位置，CMS 端的用户现在遇到了错误。如果他们在其他地方工作，就没有问题。我知道论坛的使用率很低，但如果我要把网络人打傻，我需要一些指点。

用户在加载主页过程中遇到几个错误。

错误 1：几次：JavaScript 警报 - [同步器] 无法获取 ID 为 xxxx 的客户端资源

错误 2：有时：未指定的错误。在 /library/javascript/mdvc.js

Err 3：多次：出现 GUI 系统错误。详细信息：[CmdsHTTPDone]

```
<tcmapi:Response xmlns:tcmapi="http://www.tridion.com/ContentManager/5.0/TCMAPI" success="false" actionWF="false" ID="WebGUIResponder.aspx"><tcmapi:Error><tcm:Line Cause="true"  mlns:tcm="http://www.tridion.com/ContentManager/5.0"><![CDATA[Request message cannot be empty. ]]></tcm:Line></tcmapi:Error></tcmapi:Response> 
```

错误 4：有时我们还会在 TaskBarControl.js 或其他脚本上收到“权限被拒绝”错误。

最后..所有视图都是空的。

尝试使用 Web 代理工具 (Fiddler2) 查看发送/接收的内容时；用户不会遇到任何问题。可以毫无问题地登录和使用 CMS。只要使用本地网络代理工具，用户对 CMS 没有任何问题。一旦工具关闭，同样的问题就会再次出现。

所以使用这个工具，我们甚至无法调试，因为我们不知道 fiddler 对连接的影响使其工作。只是在一个位置进行生产和测试（相同的问题），但 DEV 仍然很好..所以我的推论是..“本地网络中的某些规则”是错误的 - 但是如何继续？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:42:45.500

加载在浏览器中的 CME GUI 会定期与 CME 服务器核对。这看起来像浏览器无法与 CME 服务器建立连接。为了进一步排除故障，您可以尝试完全重新加载（CTRL-F5）网络浏览器以查看它是否确实存在连接问题。

如果是连接问题，它可能根本与 Tridion 无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:09:58.617

这可能是一个代理问题 - 特别是因为您说您无法使用 Fiddler 重现它。Fiddler 通过充当代理来工作，因此可以解释使用它时没有症状。

您可以尝试仅使用浏览器的开发人员工具（按 F12）。然后注意任何返回的状态码与 200 或 304 不同的请求。然后，您可以将其展示给您的网络团队，希望他们可以从那里解决问题。

# android - 如何将二维数组从一个活动传递到另一个活动？

> ID：15133195
> 
> 赞同：3
> 
> 时间：2013-02-28T10:32:40.360
> 
> 标签：android, android-intent, android-activity, bundle, multidimensional-array

我在将**二维字符串**数组从一个**活动**传递到**另一个活动**时遇到问题 我尝试了一些代码......但它们显示了一些错误

**我的字符串数组是**：

```
String[][] commuterDetails=new String[2][5];

commuterDetails=
{
   { "a", "b","c", "d","e" },
   {"f", "g","h", "i","j" }
}; 
```

我尝试了一些代码

**在第一个活动中**

```
Intent summaryIntent = new Intent(this, Second.class);
Bundle b=new Bundle();
b.putSerializable("Array", commuterDetails);
summaryIntent.putExtras(b);
startActivity(summaryIntent); 
```

**在第二个活动**

```
Bundle b = getIntent().getExtras();
String[][] list_array = (String[][])b.getSerializable("Array"); 
```

**但它显示错误**

```
Caused by: java.lang.ClassCastException: [Ljava.lang.Object; 
```

我是android新手，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:38:40.257

您可以定义一个自定义类，该类实现`Parcelable`并包含从 Parcel 读取和写入二维数组的逻辑。之后，将那个可打包的对象放入 Bundle 中进行运输。

**更新**

```
public class MyParcelable implements Parcelable{

public String[][] strings;

public String[][] getStrings() {
    return strings;
}

public void setStrings(String[][] strings) {
    this.strings = strings;
}

public MyParcelable() {
    strings = new String[1][1];
}

public MyParcelable(Parcel in) {
    strings = (String[][]) in.readSerializable();
}

@Override
public int describeContents() {
    return 0;
}

@Override
public void writeToParcel(Parcel dest, int flags) {
    dest.writeSerializable(strings);

}
public static final Parcelable.Creator<MyParcelable> CREATOR = new Parcelable.Creator<MyParcelable>() {

    @Override
    public MyParcelable createFromParcel(Parcel in) {
        return new MyParcelable(in);
    }

    @Override
    public MyParcelable[] newArray(int size) {
        return new MyParcelable[size];
    }
};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:36:18.687

使您的 commuterDetails**静态**并像这样访问其他活动

`FirstActivity.commuterDetails[][]`

# scala - Scala 匿名函数 - 不符合我的预期

> ID：15133199
> 
> 赞同：1
> 
> 时间：2013-02-28T10:32:47.260
> 
> 标签：scala

我是一个斯卡拉新手。

我想了解为什么这段代码的行为不像我预期的那样

```
def invokeFunc( myFunc: () => String ){
    println(myFunc())
  }

  def callInvoker(){
     invokeFunc({ return "this is a string" })
  } 
```

当我调用“callInvoker”时，我什么也得不到。我期望打印“这是一个字符串”，但没有返回。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:37:32.697

这是因为`return`不会从您的匿名函数返回，而是从封闭方法返回。因此，当您执行此操作时，`invokeFunc({ return "this is a string" })`您实际上是从`callInvoker`（使用 value `"this is a string"`，它只是按`callInvoker`type丢弃`Unit`）返回。

更正后的代码是：

```
def invokeFunc( myFunc: () => String ){
  println(myFunc())
}

def callInvoker(){
   invokeFunc{() => "this is a string" }
}

callInvoker() 
```

现在您的匿名函数实际上返回`"this is a string"`（任何函数/方法都返回其最后一个表达式，除非`return`遇到显式，但正如我所解释的那样`return`适用于封闭方法，而不适用于匿名函数）。

# php - 如何调试永远不会完成加载的 PHP 脚本？

> ID：15133200
> 
> 赞同：8
> 
> 时间：2013-02-28T10:32:52.810
> 
> 标签：php, debugging

我的任务是为不同的评估阶段（dev/test/staging/etc）建立一个关于各种环境的网站。

然而，在我们的暂存环境中，似乎有一些差异会阻止 PHP 脚本完成，因此页面永远不会传递到浏览器。

我想知道是否有一种方法可以在断开连接时输出记录某种堆栈跟踪或回溯，或者是否有其他方法可以找出 PHP 在脚本生命周期中的任何给定点到底在做什么？

这是一个 Drupal 站点，因此它涉及很多我不熟悉的代码，并且可能需要几个小时才能`die;`在整个过程中散布命令以查看脚本加载到的位置。

我知道我可能应该查看环境中的差异，但是所有环境都应该具有非常相似的配置（Ubuntu 11.04），并且登台环境似乎非常乐意为其他 PHP 站点提供服务，而这个特定站点拒绝完成。如果有的话，这个登台站点比其他没有问题的环境有更多的可用资源。

**更新**：对不起，最后发现了问题。暂存环境位于不允许通过公共 IP 访问自身的 VLAN 上，并且无论出于何种原因（仍然对此感到困惑），它试图将自身作为页面加载的一部分进行访问，并且从未完成请求。为 127.0.0.1 设置主机文件条目可解决此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:04:33.903

使用像 xDebug 这样的工具逐步调试这样的问题是一种选择，但可能需要很长时间 - 找到放置断点的位置将与计算放置`die`语句的位置大致相同围绕代码。调试器选项是一种更好的方法，但相比之下不会节省太多，当你遇到这样的问题时，你在大量未知代码的某个地方有一个未知的阻止程序。

但是 xDebug 也有一个分析器工具，它可以显示在程序运行期间调用了哪些函数，它们花费了多长时间，并突出显示瓶颈所在。这可能是一个更好的起点。只需配置 xDebug 以生成分析器跟踪，然后使用 kCacheGrind 在图形环境中查看跟踪。

如果您的程序卡在一个循环中或某些特定的事情需要很长时间才能完成，这将几乎立即查明问题；您将能够准确地看到哪个函数正在花费时间，以及调用链看起来像什么。

很有可能一旦你看到了，你就可以通过查看相关代码来找到问题所在。但如果不能，您可以使用 xDebug 的 step-thru 调试器在函数运行时对其进行分析，并查看变量设置为什么以了解其循环的原因。

xDebug 可以在这里找到：[http ://www.xdebug.org/](http://www.xdebug.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-05T05:10:04.983

使用 xDebug。

它非常易于安装和使用。它有几个选项，如断点，并在完成加载之前逐步跟踪 PHP 脚本的状态

你可以从这里下载xDebug [http://www.xdebug.org/](http://www.xdebug.org/)

设置 xdebug 的分步教程可在[sachithsays.blogspot.com/ 获得](http://sachithsays.blogspot.com/)

# vb.net - 用于检测 pendrive 的 Visual Basic 代码

> ID：15133202
> 
> 赞同：0
> 
> 时间：2013-02-28T10:32:57.397
> 
> 标签：vb.net

我有这个 vb 代码，它检测何时插入 pendrive。任何人都可以帮助我以我的形式访问 pendrive 的内容吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:42:19.670

使用`IO.Directory.GetDirectories()`和`IO.Directory.GetFiles()`从pendrive的路径。您可以分别[在此处](http://msdn.microsoft.com/en-us/library/system.io.directory.getdirectories%28v=vs.71%29.aspx)和[此处](http://msdn.microsoft.com/en-us/library/07wt70x2%28v=vs.80%29.aspx)查看 MSDN 文档。

改进您的问题以获得更具体的答案。

**编辑：**

将文件名添加到 ListBox 中：

```
Dim allFiles() As String = Directory.GetFiles(penDrivePath)

For Each file As String in allFiles
    ListBox1.Items.Add(file)
Next 
```

# java - 如何以编程方式禁用“省电”模式。（安卓）

> ID：15133203
> 
> 赞同：1
> 
> 时间：2013-02-28T10:33:00.557
> 
> 标签：java, android, mobile, opengl-es, power-management

目前我正在尝试**使用 OpenGL ES**为 Android设备开发**2D 游戏**，但 Android OS 使其尽可能痛苦。

 **通过消耗它可以消耗的所有电池，它看起来非常**漂亮并且以 60FPS 平稳运行。**然后我突然意识到了这一点。启用“**省电**”模式（**Galaxy S III**等）**会导致 FPS 下降到 40**。

所以我**决定提高游戏速度并将计时器限制为 40FPS**，这样就可以流畅地玩 40FPS 了。

另一个问题来了。这一次，即使最大值设置为 30 并且计算/绘图在同一个线程上**，移动的对象也会随机闪烁。**当“**省电**”被禁用（从设备菜单中禁用）时，它会保持平稳运行。

简而言之，“**省电**”模式会**通过随机减慢 OpenGL ES 功能来减慢应用程序的速度，即使将 FPS 降至 40 并不是必需的**。（有时一个函数需要 2-3ms 执行，需要 13-14ms 并且其他的运行正常）

**我想知道是否有办法在代码中禁用“省电”模式并在退出时重新启用它。**

PS：为了保持屏幕显示，我正在使用下一行：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

final PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
this.mWakeLock = pm.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK, "DoNotDimScreen");
    this.mWakeLock.acquire(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:51:23.273

May be this helps you :

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```**

# jquery - 如何在javascript中为菜单添加图片

> ID：15133205
> 
> 赞同：3
> 
> 时间：2013-02-28T10:33:13.093
> 
> 标签：jquery, css

我有一个水平菜单。这个菜单有孩子，这些孩子有子孩子。这些菜单来自一个 json 文件。在这里，我想为孩子添加一个箭头图像以显示，这些孩子有子孩子。如何添加此图像？我的 javascript 页面是

```
$(function() {
for(var i = 0, j = data[0].menu.length; i<j; i++) {
    var root_menu = data[0].menu[i];
    if(root_menu.hasOwnProperty("MenuId")) {
        $("#menu").append('<li><a href="#" class="parent-menu">' + root_menu.MenuName + '</a>');
        if(root_menu.hasOwnProperty("Menus") && root_menu.Menus.length > 0) {
            $("#menu li").last().append("<ul class='child-list' id='menu_" + root_menu.MenuId + "'>");
            for(var n = 0, m = root_menu.Menus.length; n<m; n++) {
                var sub_menu = root_menu.Menus[n]; 
                if(sub_menu.hasOwnProperty("MenuId")) {
                    $("#menu_" + root_menu.MenuId).append("<li class='menu-child'><a href='#'>" + sub_menu.MenuName + "</a></li>");
                    if(sub_menu.hasOwnProperty("Menus") && sub_menu.Menus.length > 0){
                        $("#menu_" + root_menu.MenuId + " li").last().append("<ul class='subchild-list' id='menu_" + sub_menu.MenuId + "'>");
                        for(var oo = 0, pp = sub_menu.Menus.length; oo<pp; oo++){
                            var subsub_menu = sub_menu.Menus[oo];
                            $("#menu_" + sub_menu.MenuId).append('<li class="nav-subchild"><a href="#">' + subsub_menu.MenuName + '</a>');
                        }
                        $("#menu_" + root_menu.MenuId + " li").last().append("</ul>");
                    }
                }
            }

        }
 $("#menu").append("</ul></li>");

    }
}
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:41:23.773

只需在 css 中完成。特殊类的元素`sub-menu`在背景中有一个箭头图标。

**编辑：** 当您从 json 构建菜单时，您已经可以向具有子菜单的菜单项添加一个特殊类，因为您已经在检查那里

```
 ...   
   if(sub_menu.hasOwnProperty("Menus") && sub_menu.Menus.length > 0){
     $("#menu_" + root_menu.MenuId + " li").last().addClass('hassub');
 ... 
```

然后将图标添加到带有 class 的元素的 css 中`hassub`。我将此添加到您的小提琴中：http: [//jsfiddle.net/ucpcA/18/](http://jsfiddle.net/ucpcA/18/)

**编辑：** 或者，您可以在添加元素时在完全相同的步骤中将一个字符附加到字符串`ul` （这一步您可以做任何方式）。正如我已经在对 roXon 答案的评论中所写的那样，但我也会在这里添加它：

```
 ...   
   if(sub_menu.hasOwnProperty("Menus") && sub_menu.Menus.length > 0){
     $("#menu_" + root_menu.MenuId + " li").last().append(" ▼ <ul class='subchild-list' id='menu_" + sub_menu.MenuId + "'>");
 ... 
```

然后没有额外的css代码=）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T10:39:17.880

**你可以这样做：** `**[LIVE DEMO](http://jsfiddle.net/ucpcA/17/)**`

```
$("#menu li:has(ul) > a").append('▼'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T10:41:11.060

我不清楚你想要箭头的位置，但你可以做类似的事情

```
 #nav > ul > li:hover {
 background: url(images/dropdown_arrow.png) no-repeat scroll 0 0 #FFFFFF;
 border-color: #ccc #ccc #FFFFFF;
 border-style: solid;
 border-width: 1px;
 padding-bottom: 0;
 border-radius:1px;
 } 
```

在此处查看小提琴更新 [http://jsfiddle.net/ucpcA/15/](http://jsfiddle.net/ucpcA/15/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T10:46:17.637

您可以在测试后在代码中添加图像，如果它有`sub-menu`

`anchor tag`通过在 li 类中添加箭头图像`menu-child`

就像在您的代码中一样：`<a href="#">Masters <img src="arrow.png" align="right" width:10px /></a>`

# asp.net - 如何在单击按钮时将 Google Apps 脚本用于我的网站？

> ID：15133206
> 
> 赞同：-2
> 
> 时间：2013-02-28T10:33:16.147
> 
> 标签：asp.net, google-apps-script

我有一个谷歌应用脚​​本，我想在我的网页上调用这个谷歌应用脚​​本？我怎样才能做到这一点？这是我的谷歌应用脚​​本代码，用于在我的驱动器上创建一个谷歌文档。

```
function createAndSendDocument() {   
  var doc = DocumentApp.create('Hello World');  
  doc.appendParagraph('This document was created by my first Google Apps Script.');
  doc.saveAndClose(); 
  var url = doc.getUrl();  
  var emailAddress = Session.getActiveUser().getEmail();  
  GmailApp.sendEmail(emailAddress,
                     'Hello '+ url);
} 
```

当我单击网页上的按钮时，我想调用此函数。但我不知道如何在单击按钮时调用此函数。还有一件事我还保存了这个脚本并更改了这个版本号并部署作为网络应用程序并获取此 Google 应用程序脚本的 URL。

**更新：（**在答案中添加错误）实际上我正在使用这样的行。

```
btnClick.addEventListener("click", function () {
    Page.ClientScript.RegisterStartupScript(this.GetType(), "GoogleFunction", "createAndSendDocument()", true); 
```

那么现在请告诉我这有什么问题？当我运行我的应用程序时，它会向我显示一个错误，例如“页面未定义”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:09:57.677

还要看看[这个文档](https://developers.google.com/apps-script/execution_gadgets?hl=fr-FR)和[这个](https://developers.google.com/apps-script/html_service?hl=fr-FR)文档，一切都清楚地解释了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:39:07.117

您可以根据需要在页面中添加 div 和代码。如果它存在，你还需要在你的头脑中添加 javascript 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:14:11.543

嗨，您可以在表单中添加脚本管理器后在按钮单击时使用此代码

```
Page.ClientScript.RegisterStartupScript(this.GetType(),"GoogleFunction","createAndSendDocument()",true); 
```

# extjs - Sencha - 在同一视图中将数据视图与按钮相结合

> ID：15133210
> 
> 赞同：0
> 
> 时间：2013-02-28T10:33:37.317
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我对 Sencha 很陌生，我试图在面板中的 DataView 下获得一个按钮。我尝试过不同的场景。

**风景**

```
Ext.define('MyApp.view.Profile', {
extend : 'Ext.Panel',
xtype : 'profileview',

requires : ['MyApp.store.UserStore', 'Ext.List', 'Ext.DataView', 'Ext.data.Store'],

initialize : function() {
    var me = this;
    var record = 1;
    //Create the instance of the store and load it
    var userStore = Ext.create('MyApp.store.UserStore');
    userStore.load();

    //Create the dataview
    var view = Ext.create('Ext.DataView', {
        store : userStore,
        itemTpl : ['<h1>Mijn Profiel</h1>', '<h2>{USERNAME}</h2>', '<p>{EMAIL}</p><br/>', '<img src="http://www.MyApp.nl/{AVATAR_PATH}" />', '<br/>'].join()
    });
    //Add the dataview to the panel
    me.add(view);

    /**
     var button = Ext.create('Ext.Button', {
     text : 'Edit',
     handler : function() {
     Ext.Msg.alert('You clicked the button');
     }
     });
     */
    //me.add(button);

},

config : {
    title : 'Profiel',
    iconCls : 'user3',
    scrollable : true,
    styleHtmlContent : true,
    items : [{
        xtype : 'button',
        text : 'Edit',
        handler : function() {
            Ext.Msg.alert('You clicked the button');
        }
    }]
}
}); 
```

上面的视图只显示了按钮，而不是 Dataview。我需要添加

```
layout : 'fit' 
```

配置以使其显示 DataView。但是结合按钮它使按钮全屏并且不再显示数据视图（???）。

我尝试了两种情况，在其中添加一个 Button 作为配置项并使用处理程序。

如何获得数据视图下方的按钮？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:16:48.100

不要使用布局适合，它是为了适合您的画布中的一个组件。我会使用 vbox 布局。这会自动将项目垂直放置在彼此之下。

尝试这个：

```
layout: {
   type: 'vbox',
   align: 'stretch' //this tells to take the full width
} 
```

弯曲您的数据视图

```
var view = Ext.create('Ext.DataView', {
    flex: 1, //Use the remaining space.
    store : userStore,
    itemTpl : ['<h1>Mijn Profiel</h1>', '<h2>{USERNAME}</h2>', '<p>{EMAIL}</p><br/>', '<img src="http://www.MyApp.nl/{AVATAR_PATH}" />', '<br/>'].join()
}); 
```

# javascript - 是否可以使用 Modernizr 检测视口/窗口宽度？

> ID：15133211
> 
> 赞同：3
> 
> 时间：2013-02-28T10:33:39.297
> 
> 标签：javascript, modernizr

我发现使用该`Modernizr.mq()`函数检查媒体查询是一种基于视口宽度运行 Javascript 的更准确的方法，因为它与我的 CSS 相匹配。

但是，是否可以从 Modernizr 获得宽度值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-08T00:42:01.113

使用内置测试，不，这是不可能的。至少，在[Modernizr 文档](http://modernizr.com/docs/)中没有提及。

但是，您不需要 Modernizr 来获取浏览器的尺寸。您可以使用纯 javascript 来做到这一点：

```
var width = document.documentElement.clientWidth;
var height = document.documentElement.clientHeight; 
```

[原始答案](https://stackoverflow.com/a/8876069/2083599)

# javascript - Javascript 对象与 XML 同步

> ID：15133217
> 
> 赞同：0
> 
> 时间：2013-02-28T10:34:02.857
> 
> 标签：javascript

我有一个网络应用程序，它将在浏览器 javascript 中完成大部分工作。当应用程序加载时，我需要反序列化 XML 文档并将 xml 元素转换为 javascript 对象。然后，我需要定期轮询这个 XML 文档，以使我的对象保持最新。

我的问题是……我可以在这里使用一个框架来帮助我吗？我希望能够智能地做到这一点，就像每次轮询 XML 文件时不必丢弃内存中的所有对象一样。只得到新的......或改变的等等。谢谢。

微风之类的？[http://www.breezejs.com/](http://www.breezejs.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:38:42.607

MVC 风格的 Javascript 框架将是一种可能。

示例：http: [//javascriptmvc.com/](http://javascriptmvc.com/)

# php - 正确的文件上传文件夹权限

> ID：15133221
> 
> 赞同：2
> 
> 时间：2013-02-28T10:34:17.913
> 
> 标签：php, codeigniter, file-upload, permissions

在[CI 用户指南](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)中有这样一行：

> 您需要为上传的图像设置一个目标文件夹。在 CodeIgniter 安装的根目录下创建一个名为 uploads 的文件夹，并将其文件权限设置为 777。

当我开发真正的 Web 应用程序时，它有多安全？例如：社交网络，我想上传用户的个人资料图片。我想当用户想要上传私人图片时，我会遇到隐私问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:39:07.827

根据您想要的安全级别，777 可能不是最佳选择（它是最简单的）。网络服务器运行的用户对文件夹有 rwx，如果你想真正安全，该文件夹不应该在你的 webroot 下。

这意味着，如果 Web 文件位于 /home/mysite/ 中（例如 /home/mysite/index.html 映射到[http://mydomain.com/index.html](http://mydomain.com/index.html)），那么上传文件夹应该是 /home/uploads 。

您的应用程序可以使用代码通过系统路径 ( /home/uploads ) 访问文件，但互联网上的任何人都无法直接访问它。

或者，如果您不能执行上述操作（例如，因为您在共享主机上），您可以使用`.htaccess`（放置在上传文件夹中）获得相同的效果，方法是放置以下规则：

```
Deny from all
Options None
Options +FollowSymLinks 
```

（再次注意，您的应用程序将需要使用系统路径，因为 Apache 无法直接提供这些文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T05:40:29.297

您还可以使用 .htaccess 拒绝对您允许的文件夹以外的文件夹的访问。至少我对我的和 .htaccess 中未列出访问权限的目录做了同样的事情，用户无法使用。

另一种安全的方法是使用 /public_html/ 外部的文件夹 外部几乎无法访问该文件夹外部的目录。

# multithreading - 死锁应用性能影响

> ID：15133224
> 
> 赞同：-1
> 
> 时间：2013-02-28T10:34:25.970
> 
> 标签：multithreading, performance, deadlock

我了解什么是死锁，但是我正在寻找它可能导致哪些类型的应用程序含义以及为什么有如此多的研究来研究如何避免它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:48:29.913

好吧，.net 中有可用的选项。Moniter.TryEnter 方法，您可以指定时间限制，直到 CLR 等待获取锁，如果不能这样做，将抛出异常。这是最常见的死锁检测技术。

另一种是使用资源依赖图，如果在图中找到一个循环，那么它很可能会导致死锁。

# java - 当我尝试解析 XML 时出错

> ID：15133227
> 
> 赞同：0
> 
> 时间：2013-02-28T10:34:44.683
> 
> 标签：java, android

我的 XMLParser 有一些问题，它在应用程序打开之前就崩溃了。我得到的错误是：

**错误：** `org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)`

**这是我的 XMLParser 代码：**

```
public class XMLParser {

    public XMLParser(){
    }

    public String getXmlFromUrl(String url){
        String xml = null;

        try{
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);
        } catch (UnsupportedEncodingException e){
            e.printStackTrace();
        } catch (ClientProtocolException e){
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return xml;
    }

    public Document getDomElement(String xml){
        Document doc = null;

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

        try{
            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is);
        } catch(ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
    }

    public final String getElementValue(Node elem) {
        Node child;

        if(elem != null){
            if(elem.hasChildNodes()){
                for(child = elem.getFirstChild(); child != null; child = child.getNextSibling()){
                    if(child.getNodeType() == Node.TEXT_NODE){
                        return child.getNodeValue();
                    }
                }
            }
        }

        return "";
    }

    public String getValue(Element item, String str){
        NodeList n = item.getElementsByTagName(str);
        return this.getElementValue(n.item(0));
    }

} 
```

**在我的主要活动中，我这样称呼它：**

```
XMLParser parser = new XMLParser();
String xml = parser.getXmlFromUrl(URL);
Document doc = parser.getDomElement(xml); 
```

所以，如果你能帮助我，是什么导致了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:45:13.003

stacktrace 告诉你到底出了什么问题：你不应该在 UI 线程上做网络事情。

好的解决方法：不要在 UI 线程上做网络工作，使用 AsyncTask 或其他。

快速修复：在您的网络内容之前添加此内容：

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

见[http://www.techblogistech.com/2011/11/how-to-fix-the-android-networkonmainthreadexception/](http://www.techblogistech.com/2011/11/how-to-fix-the-android-networkonmainthreadexception/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:45:58.753

你得到一个`android.os.NetworkOnMainThreadException`？您不能`httpClient.execute()`在主活动线程上调用网络 API（即）。相反，您需要在`AsyncTask`. 如果您需要有关如何完成此操作的帮助，请单击[此处。](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)

# asp.net - ASP Validator：仅验证小写和大写字母

> ID：15133228
> 
> 赞同：0
> 
> 时间：2013-02-28T10:34:44.777
> 
> 标签：asp.net, validation, requiredfieldvalidator

```
<asp:Label ID="lblDriving" runat="server" CssClass="lblDriving">Driving (y/n)</asp:Label>
<asp:TextBox ID="tbDriving" runat="server" CssClass="tbDriving"></asp:TextBox> 
<asp:RequiredFieldValidator ID="rfvDriving" runat="server" CssClass="errorAsterik" ErrorMessage="Please enter y or n in lowercase only" ControlToValidate="tbDriving">*</asp:RequiredFieldValidator>
<asp:RangeValidator ID="rvDriving" runat="server" CssClass="errorAsterik" ErrorMessage="Please enter n or y in lower case" ControlToValidate="tbDriving" MinimumValue="n" MaximumValue="y">*</asp:RangeValidator> 
```

如何验证它以便用户可以使用 ASP.NET 验证器输入小写的 y/n 或大写的 Y/N？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:53:55.177

您可以使用正则表达式验证器：

```
<asp:RegularExpressionValidator ID="rvDriving" runat="server" 
   CssClass="errorAsterik" ErrorMessage="Please enter n or y" 
   ControlToValidate="tbDriving" 
   ValidationExpression="[yYnN]">*</asp:RegularExpressionValidator> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:41:09.140

您将不得不使用 a[`CustomValidator`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.aspx)因为`CompareValidator`with`Type=String`比较区分大小写。

```
<asp:CustomValidator id="ValidDriving"
       ControlToValidate="tbDriving"
       ErrorMessage="Enter y/Y or n/N"
       OnServerValidate="ValidateDriving"
       ClientValidationFunction="ValidateDriving_JS" 
       runat="server"/> 
```

服务器验证：

```
protected void ValidateDriving(object source, ServerValidateEventArgs args)
{
    args.IsValid = StringComparer.OrdinalIgnoreCase.Equals("y", args.Value) ||
                   StringComparer.OrdinalIgnoreCase.Equals("n", args.Value);
} 
```

如果您还想提供客户端验证功能：

```
function ValidateDriving_JS(sender, args){
    var upperVal = args.Value.toUpperCase();
    args.IsValid = upperVal  == "Y" || upperVal == "N";
    return;      
} 
```

# android - 我们可以在清单文件中有多个检测目标包吗？

> ID：15133232
> 
> 赞同：3
> 
> 时间：2013-02-28T10:34:51.177
> 
> 标签：android

我们可以在清单文件中有多个检测目标包吗？我想为 android 本机应用程序和 Web 创建一个测试

# css - SASS Variables converting to Hex Codes

> ID：15133236
> 
> 赞同：1
> 
> 时间：2013-02-28T10:35:10.333
> 
> 标签：css, sass, osx-mountain-lion, compass-sass, codekit

I have been using SASS for a month, love it.

However, when I create a variable such as:

```
$darkgrey:rgb(82,81,83); 
```

Then decide re-use the variables, say in a specific p tag? In the body:

```
body{
    p.ahh-whatever{
        color:$darkgrey;
    }
} 
```

However it always seems to come up as a HEX in all browsers. Is there a reason for this? Do I need to use RGBA with 1 Opacity...

Software Being Used:

I also use Foundation 3 inline with Compass-Style. In addition to CodeKit to compile my code, and Sublime Text 2 for my editor. Operating System is OSX 10.8 (New IMac 27").

Any help would be great!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:40:30.460

SASS will output hex whenever possible, because almost all browsers will understand it. (Not all browsers will "get" RGB values or RGBA values.)

if you do specify a an rgba value, SASS will output it as such

for instance :

```
rgba(blue, 0.2) 
```

will output :

```
rgba(0, 0, 255, 0.2) 
```

see : [Sass RGBA instances documentation](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#rgba-instance_method)

# html - 粘在页面底部的页脚

> ID：15133237
> 
> 赞同：0
> 
> 时间：2013-02-28T10:35:16.490
> 
> 标签：html, css, footer

嗨，我有一个 CSS 问题，因为我试图将页脚粘贴到页面底部，但它只会将其粘贴到视口的下方，而不是文档的底部。

有人可以帮我理解为什么会这样吗？

我的 css 和 html 非常简单，尽管在阅读了大量示例并尝试之后，我仍然无法让它工作。我不想让我的页脚在包装器内，而不是在它之外，我也不想在包装器上设置 height:100%。

我的 html 如下所示：

```
<div class="wrapper">
... some content
</div>
<div class="footer">

</div> 
```

我的CSS：

```
html {
   height: 100%;
   margin: 0;
   padding: 0;
   position:relative;
}

body {
    position:relative;
    height: 100%;
    background-color: #D8D8D8;
    margin: 0;
    padding: 0;
    font-family: "Trebuchet MS", Verdana, tahoma, arial, serif;
    font-size: 12pt;
}

.wrapper {
  position:relative;           
  margin-left: auto;
  margin-right: auto;
  width: 1024px;
  padding: 6px;
  margin-bottom: 30px;

}

.footer {
    position: absolute;
    bottom:0;
    left: 50%;
    margin-left: -512px;
    height: 25px;        
    background-color: #E6E6E6;
    width: 1024px;
    padding: 6px;
    clear:both; 
```

}

是否可以使用包装器外部的页脚执行此操作？

我认为在页脚上设置绝对位置意味着它将基于 body 或 html 定位，因为它们是带有 position:relative 的下一个元素，但 bottom:0 似乎只是视口的底部，即使包装器div 远远超出了这个范围，有很多内容。

这样做的结果是，当包装器中有很多内容时，页脚实际上会停留在页面的中间，因为底部被计算为视口的底部。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:44:32.600

不需要一直使用定位。该属性仅适用于特定情况，用于特别“定位”内容。

我认为删除

```
position: absolute; 
```

从

```
 .footer 
```

应该解决问题。

# php - utf8_encode 和 hypens

> ID：15133238
> 
> 赞同：2
> 
> 时间：2013-02-28T10:35:20.580
> 
> 标签：php, encoding, utf-8, character-encoding, json

在我的 php 文件中：

```
foreach ($output[0] as $key => $value){
    $output[0][$key] = utf8_encode(strip_tags($output[0][$key]));       
}
echo (json_encode($output)); 
```

我在 utf8 中进行编码以避免`null`当带有变音符号的字符妨碍时，我发现了一个连字符，这是我得到表单输出的文本：

```
H\u00f6rbuch-CDs 
```

然后在做 json_encode 我得到`null`. 原始文本`Hörbuch-CDs`基本上是 utf8 编码工作，但由于某种原因它跳过了连字符，我什至[找到](http://www.cs.tut.fi/~jkorpela/dashes.html)了 utf 转换的代码（我认为）应该是`U+002D`，我不确定，因为有很多连字符，如符号，意味着存在转换。

我的问题是，为什么 utf8_encoding 不是...编码？我该如何解决这个问题？我应该解析文本并手动替换每个连字符吗？

额外的一点，输出中的文本是从带有排序规则的数据库中检索的`latin1_german1_ci`，不知道这是否会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:41:50.597

您是否尝试过使用 iconv 而不是 utf8_encode？

```
iconv('LATIN1','UTF-8',strip_tags($output[0][$key])); 
```

# ruby - Net::HTTP 的客户端证书问题（PUB key 和 PRIV key:: nested asn1 错误）

> ID：15133239
> 
> 赞同：1
> 
> 时间：2013-02-28T10:35:20.767
> 
> 标签：ruby, https, openssl, client-certificates, net-http

我正在使用 Cucumber 测试系统，其中一部分涉及使用 SSL 客户端证书在远程 .NET 服务器上进行身份验证。此 .NET 系统的开发人员以 .pem 文件的形式向我提供了此证书，如下所示：

```
 -----BEGIN CERTIFICATE-----
    MIIFzTCCBLWgAwIBAgIKHNfvKAAAAAAAFDANBgkqhkiG9w0BAQUFADBKMRMwEQYK
    ...more lines...
    aaG0c6enKQJiVcA4myLkBkN/wxiZsnBy/zGdj+u4RurxcS717FKm7oYY3JsuRSRH
    Ow==
    -----END CERTIFICATE----- 
```

我用来连接的代码看起来像这样（取自[http://www.rubyinside.com/nethttp-cheat-sheet-2940.html](http://www.rubyinside.com/nethttp-cheat-sheet-2940.html)）：

```
 uri = URI.parse("https://secure.com/")
    pem = File.read("/path/to/my.pem")
    http = Net::HTTP.new(uri.host, uri.port)
    http.use_ssl = true
    http.cert = OpenSSL::X509::Certificate.new(pem)
    http.key = OpenSSL::PKey::RSA.new(pem)
    http.verify_mode = OpenSSL::SSL::VERIFY_NONE

    request = Net::HTTP::Get.new(uri.request_uri) 
```

但是，'http.key = OpenSSL::PKey::RSA.new(pem)' 行会引发以下异常：

```
 Neither PUB key nor PRIV key:: nested asn1 error (OpenSSL::PKey::RSAError) 
```

我最初使用 HTTParty 发出请求，但遇到了相同的问题，我在 HTTParty 本身中追踪到基本相同的行。

看来我得到的这个证书可以很高兴地传递到 OpenSSL::X509::Certificate.new 以创建证书对象，但它不能用于创建 OpenSSL::PKey::RSA 的实例。我尝试删除设置密钥的行，但随后身份验证失败。有可能这实际上是我应该做的，并且身份验证由于其他原因而失败，但是在我开始挖掘其他地方的问题之前，我需要更清楚地了解这里发生了什么。

从这个 SO 问题：[在 ruby​​ 中构建公钥时，是什么导致“既不是 PUB 密钥也不是 PRIV 密钥:: 嵌套 asn1 错误”？](https://stackoverflow.com/questions/2293608/what-causes-neither-pub-key-nor-priv-key-nested-asn1-error-when-building-a-p) ...看起来好像私钥应该以某种方式包含在 pem 文件中，但 .NET 开发人员似乎认为这没有必要。

确定 .NET 开发人员以清楚地了解他们的身份验证如何工作是很困难的，而且我似乎也无法在网上找到明确的信息。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:12:46.487

好的，在发布此消息后的 34 分钟内，我已经弄清楚了。

我使用的 pem 文件也应该包含一个私钥。我从 .NET 人员那里获得了一个受密码保护的 .pfx 文件，并生成了我自己的 pem，如下所示：

```
openssl pkcs12 -in cert.pfx -out cert.pem -nodes 
```

该文件包含证书和私钥，现在一切正常。

# sql - 如何在 sql 中创建查询以透视数据？

> ID：15133240
> 
> 赞同：1
> 
> 时间：2013-02-28T10:35:21.950
> 
> 标签：sql, sql-server, pivot

我有两个名为`PRODUCT`和`DETAIL`

```
TABLE: PRODUCT
slno  product
1          x    
2          y
3          z

TABLE: DETAIL
product    detail
x          good
y          bad
z          worse
x          bad 
```

我需要得到输出

```
TABLE
X      Y       Z
good   bad     worse
bad 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T10:56:02.937

这种数据转换称为 a[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)并且从 SQL Server 2005 开始，有一个函数可以将数据从行转换为列。

有几种方法可以做到这一点，具体取决于您是否有静态数量的值要转置到列中。所有这些都涉及向`row_number()`数据添加 a，以便您可以返回任何产品的多行。

您可以将聚合函数与`CASE`表达式一起使用：

```
select 
  max(case when product = 'x' then detail end) x,
  max(case when product = 'y' then detail end) y,
  max(case when product = 'z' then detail end) z
from
(
  select p.product, d.detail,
    row_number() over(partition by p.product order by p.slno) rn
  from product p
  inner join detail d
    on p.product = d.product
) src
group by rn 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/b228e/5)

您可以使用以下`PIVOT`功能：

```
select x, y, z
from
(
  select p.product, d.detail,
    row_number() over(partition by p.product order by p.slno) rn
  from product p
  inner join detail d
    on p.product = d.product
) src
pivot
(
  max(detail)
  for product in (x, y, z)
) piv 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/b228e/3)。

如果您有未知数量的值（在这种情况下为产品）转换为列，那么您将需要使用动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(product) 
                    from product
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT ' + @cols + ' from 
             (
                select p.product, d.detail,
                  row_number() over(partition by p.product order by p.slno) rn
                from product p
                inner join detail d
                  on p.product = d.product
            ) x
            pivot 
            (
                max(detail)
                for product in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/b228e/7)

所有查询的结果是：

```
|    X |      Y |      Z |
--------------------------
| good |    bad |  worse |
|  bad | (null) | (null) | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:49:03.970

```
This is your query.
    select p.product, d.detail from product p
inner join detail d on  p.product = d.product 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:37:44.277

查看 SQL Join 语句。[这篇博文](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)很好地解释了它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T10:39:11.410

```
select d.product, d.detail from detail d
join product p on d.product = p.product 
```

# razor - cshtml 在 DropdownList 中隐藏溢出，但在鼠标悬停时显示

> ID：15133241
> 
> 赞同：0
> 
> 时间：2013-02-28T10:35:29.927
> 
> 标签：razor, drop-down-menu

我的 cshtml 视图中有一个下拉列表。但是有些字符串太长而不能在一行中显示。如下图所示：

![在此处输入图像描述](../Images/33e18073381186d5de860959adabd85f.png)

我需要设置它，以便在下拉列表中只显示一定数量的字符，并且当鼠标悬停在整个字符串上时应该是场景，类似于工具提示文本。

```
<div class="span11">
        @Html.DropDownList("specificationList", new SelectList(ViewBag.Specifications, "SpecificationId", "Name", ViewBag.SpecificationId), new { @class = "dropdown-toggle" })
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:41:34.617

使用 css 文本溢出：省略号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:39:45.163

这里的困难在于 DropDownListFor 助手不允许在`<option>`标签上设置自定义属性。为了使您的工具提示起作用，您需要生成以下标记：

```
<select name="specificationId">
    <option value="1" title="some very long description">item 1</option>
    <option value="2" title="some very long description 2">item 2</option>
    <option value="3" title="some very long description 3">item 3</option>
    ...
</select> 
```

为了实现这一点，您可以在视图中编写意大利面条代码以手动循环遍历模型的值（完全不推荐），或者编写一个自定义 HTML 帮助程序来允许您输出此标记。我已经展示了一个这样的助手的例子[`this post`](https://stackoverflow.com/questions/7936579/fun-with-linq-expressions-in-extension-methods/7938038#7938038)。还有[`here`](https://stackoverflow.com/a/8208384/29407). 您当然可以调整帮助程序，以便如果项目的文本长于一定数量的字符，它将生成截断它。

# android - 如何在android的中心画一条线和一些文字？

> ID：15133242
> 
> 赞同：2
> 
> 时间：2013-02-28T10:35:32.560
> 
> 标签：android

我对 android 很陌生，我必须实现一个看起来像这样的视图：

```
-------------Some Text---------------------- 
```

我知道我可以`View`使用以下代码在我的 xml 中画一条线：

```
<View
android:layout_width="100dp"
 android:layout_height="1dp"
 android:background="#00ff00" /> 
```

这将最终绘制：

```
----------------------- 
```

但在此之后，我希望放置文本并再次绘制线的另一端。

我试过了，但我得到了这样的东西：

```
----------------------
text 
```

当我在代码`TextView`后添加一些。`View`

这有可能做我的目标吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:51:06.370

可能这会帮助你得到你想要的。赋予观看权重是关键。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="center"
android:orientation="horizontal" >

<View
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:layout_weight="1"
    android:background="#00ff00" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/hello_world" />

<View
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:layout_gravity="center"
    android:layout_weight="1"
    android:background="#00ff00" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T11:03:41.397

尝试`FrameLayout`在这种情况下使用或`RelativeLayout`防止深层视图层次结构并提高性能

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#fff" >

<View
    android:layout_width="200dp"
    android:layout_height="1dp"
    android:layout_gravity="center"
    android:background="#555" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:background="#fff"
    android:text="Hello world" />

</FrameLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T11:00:23.423

试试这个..

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <View
        android:id="@+id/view1"
        android:layout_width="60dp"
        android:layout_height="4dp"
        android:layout_marginTop="5dp"
        android:background="#00ff00" />

    <TextView
        android:id="@+id/tv1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="2dp"
        android:layout_marginRight="2dp"
        android:layout_toRightOf="@+id/view1"
        android:text="My Text" />

    <View
        android:id="@+id/view2"
        android:layout_width="60dp"
        android:layout_height="4dp"
        android:layout_marginTop="5dp"
        android:layout_toRightOf="@+id/tv1"
        android:background="#00ff00" />

</RelativeLayout> 
```

希望对你有帮助..

让我知道它是否有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T10:38:28.643

好吧，最简单的可能就是有一个RelativeLayout或水平LinearLayout，你的线宽的一半并将它创建为;

视图 (50dp) - 文本视图 - 视图 (50dp)

# android - 最新 ADT Bundle 的最低硬件要求是什么？

> ID：15133245
> 
> 赞同：2
> 
> 时间：2013-02-28T10:35:43.047
> 
> 标签：android, eclipse, adt

我使用`Eclipse Indigo`插件`ADT`和`Android SDK`. `Athlon X2 64`它曾经在我的`2 GB RAM`办公室工作得很好。

最近我下载了新发布的`ADT`捆绑包。它安装方便，可以立即开始开发。但是`IDE`and`Emulator`似乎吃掉了我的东西，`RAM`并且需要很长时间才能加载。

有什么建议么？

# eclipse - 为 Eclipse 安装了谷歌插件，但看不到 Web 应用程序项目菜单项

> ID：15133247
> 
> 赞同：0
> 
> 时间：2013-02-28T10:35:49.353
> 
> 标签：eclipse, eclipse-plugin

我在linux上使用独立的eclipse。我从 Eclipse 站点（不是从我的发行版的存储库）下载了它，并将其解压缩到主文件夹。为 Eclipse 安装了谷歌插件（使用帮助->安装新软件）。但是看不到新的 Web 应用程序项目菜单项。当我创建新的 Java 项目时，我可以在项目属性中选择 Google 选项卡上的“使用谷歌应用引擎”复选框。但我必须创建 war 文件夹、web.xml、appengine-web.xml 等。所以我想获得新的 Web 应用程序项目模板。如何打开它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:48:02.640

您需要确保下载了“Eclipse IDE for Java EE Developers”。[请删除您当前的 Eclipse 安装并从http://eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/indigosr2](http://eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/indigosr2)下载新存档

# api - Paymill：创建交易

> ID：15133252
> 
> 赞同：0
> 
> 时间：2013-02-28T10:36:12.387
> 
> 标签：api, paymill

直到几天前，我还使用这个 url 来创建交易：

[https://api.paymill.de/v2/transactions?token=XXXX&amount=XXXX¤cy=EUR&client=client_XXXX](https://api.paymill.de/v2/transactions?token=XXXX&amount=XXXX&currency=EUR&client=client_XXXX)

现在我收到一个错误：

返回信息

> 调用 API 时出错：远程服务器返回错误：(403) Forbidden。

我认为这与数据格式有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:44:10.977

您必须将此作为 POST 请求发送到 Paymill API。请参阅以下示例：[https ://www.paymill.com/de-de/dokumentation/referenz/api-referenz/#create-new-transaction-with](https://www.paymill.com/de-de/dokumentation/referenz/api-referenz/#create-new-transaction-with)

还要检查您的凭据（私有 API 密钥）是否有效。

马蒂亚斯

# css - 如何在 JavaFX 中调整字母间距

> ID：15133256
> 
> 赞同：6
> 
> 时间：2013-02-28T10:36:20.647
> 
> 标签：css, javafx-2, letter-spacing

使用 JavaFX2 时，如何调整 Text 对象的字符之间的字母间距？

欢迎使用代码或 css 中的示例。

# javascript - ajax 发布后更新 div 列表

> ID：15133258
> 
> 赞同：0
> 
> 时间：2013-02-28T10:36:25.907
> 
> 标签：javascript, asp.net, ajax, asp.net-mvc

我有这段代码可以加载一些`div`

```
<input class="input-large" placeholder="Notat" id="txtNewNote" type="text">
        <button class="btn" id="btnAddNote" type="button">Lagre</button>

@foreach (var item in Model.UserNotes)
    {
        <div class="alert" id="divNote-@item.UserNoteID">
        <button type="button" class="close" onclick="NoteDeleteClicked(@item.UserNoteID)" id="btnCloseNote">&times;</button>
        <strong>@item.User.Name - @item.Added</strong><br />
            @item.Text
        </div>
    } 
```

然后当用户输入更多文本时我运行这个javascript：

```
 var Text = $("#txtNewNote").val();
  var Added = Date.now();
  vvar UserID = $("#hiddenUserID").text();
  $.post("/api/apiUserNotes",{ Text : Text, Added: Added, UserID: UserID }, function()        { //need functianality for updating the list of divs above }); 
```

任何人都可以在这里为我指明正确的方向。我不能在帖子完成后创建 div，因为我需要从数据库中获取数据，以便其中的信息`div`正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:41:19.427

您可以通过以下方式访问上面的 Divs，并根据您的要求进行更新。

```
 $.post("/api/apiUserNotes",{ Text : Text, Added: Added, UserID: UserID },
 function()
  { 
   //need functianality for updating the list of divs above 
   $("div.alert").each(....)
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:50:02.753

主要有两种做法：

1.  **`apiUserNotes`返回 HTML** - 这种方法更易于维护，因为您只有一个模板。但它也有更多限制，因为 HTML 有利于显示，但不利于操作它。

2.  **`apiUserNotes`返回 JSON** - 这更灵活，因为 JSON API 几乎可以被任何东西使用，从 HTML 到原生 iOS 或 Android 应用程序，因为它更容易操作。不过，这也需要更多的工作，因为您在服务器端（您的 Razor 视图）和客户端（您的 HTML/JavaScript）上都有模板。

这或多或少是#1 的样子：

您首先制作一个局部视图以显示用户注释：

_UserNotes.cshtml：

```
<div id="user-notes">
    @foreach (var item in Model.UserNotes)
    {
        <div class="alert" id="divNote-@item.UserNoteID">
            <button type="button" class="close" onclick="NoteDeleteClicked(@item.UserNoteID)" id="btnCloseNote">&times;</button>
            <strong>@item.User.Name - @item.Added</strong><br />
                @item.Text
        </div>
    }
</div> 
```

一旦你有了这个局部视图，你就可以从你的视图中使用它：

```
<input class="input-large" placeholder="Notat" id="txtNewNote" type="text">
<button class="btn" id="btnAddNote" type="button">Lagre</button>
@Html.Partial("_UserNotes") 
```

从你的`apiUserNotes`行动来看：

```
public PartialViewResult apiUserNotes(string text, DateTime added, int userID)
{
    // TODO: save new note
    var notes = yourRepo.GetUserNotes(userID);
    return PartialView("_UserNotes", notes);
} 
```

最后，您的客户端脚本简单地覆盖包含所有用户注释的 div：

```
var data = {
    text = $("#txtNewNote").val(),
    added = Date.now(),
    userID = $("#hiddenUserID").text()
};

$.post("/apiUserNotes", data, function (result) {
    $('#user-notes').html(result);
}); 
```

当然有更有效的方法来做到这一点。例如，您不需要重新加载*所有*用户注释；只有你刚刚添加的那个。但希望这能让你开始。

# c++ - BOOST_CHECK_NO_THROW 如何打印异常消息

> ID：15133259
> 
> 赞同：10
> 
> 时间：2013-02-28T10:36:30.777
> 
> 标签：c++, unit-testing, boost-test

当我使用

```
BOOST_CHECK_NO_THROW( method_to_test() ); 
```

并抛出异常，它显示*抛出*异常，但绝不会像这样的*异常消息*：

```
test.cpp(14): error in "test": incorrect exception my_exception is caught 
```

是否也可以打印异常消息，即返回的字符串`my_exception.what()`？`my_exception`派生自`std::exception`和 重载`what()`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T23:12:00.707

我发现自己对`BOOST_REQUIRE_NO_THROW`. 我通过简单地删除它来解决它`BOOST_REQUIRE_NO_THROW`。这导致输出如下：

```
unknown location(0): fatal error in "TestName": std::runtime_error: Exception message 
```

并中止测试（但继续下一个文本），这就是我想要的。但是，如果您想使用 BOOST_CHECK_NO_THROW 或 BOOST_WARN_NO_THROW，这并没有多大帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-22T21:00:06.803

我在 boost headers 中阅读了一些内容，并在我自己的头文件中重新定义了 BOOST_CHECK_NO_THROW_IMPL，我在项目中使用它来重新定义 boost 行为。现在看起来像这样：

```
#ifndef _CATCH_BOOST_NO_THROW_H_
#define _CATCH_BOOST_NO_THROW_H_  

#include <boost/test/unit_test.hpp>
#include <sstream>
#include <string>

#define BOOST_CHECK_NO_THROW_IMPL( S, TL )                                                      \
    try {                                                                                       \
    S;                                                                                          \
    BOOST_CHECK_IMPL( true, "no exceptions thrown by " BOOST_STRINGIZE( S ), TL, CHECK_MSG ); } \
    catch( const std::exception & e ) {                                                         \
    std::stringstream ss;                                                                       \
    ss << std::endl                                                                             \
    << "-----------------------------------------------" << std::endl                           \
    << "test case: " << boost::unit_test::framework::current_test_case().p_name << std::endl    \
    << std::endl << "exception message: " << e.what() << std::endl;                             \
    BOOST_TEST_MESSAGE(ss.str());                                                               \
    BOOST_CHECK_IMPL( false, "exception thrown by " BOOST_STRINGIZE( S ), TL, CHECK_MSG );      \
    }                                                                                           \
    catch( ... ) {                                                                              \
    std::stringstream ss;                                                                       \
    ss << std::endl                                                                             \
    << "-----------------------------------------------" << std::endl                           \
    << "test case: " << boost::unit_test::framework::current_test_case().p_name << std::endl    \
    << std::endl << "exception message : <unknown exception>" << std::endl;                     \
    BOOST_TEST_MESSAGE(ss.str());                                                               \
    BOOST_CHECK_IMPL( false, "exception thrown by " BOOST_STRINGIZE( S ), TL, CHECK_MSG );      \
    }                                                                                           \
    /**/

#define BOOST_WARN_NO_THROW( S )            BOOST_CHECK_NO_THROW_IMPL( S, WARN )
#define BOOST_CHECK_NO_THROW( S )           BOOST_CHECK_NO_THROW_IMPL( S, CHECK )
#define BOOST_REQUIRE_NO_THROW( S )         BOOST_CHECK_NO_THROW_IMPL( S, REQUIRE )

#endif // _CATCH_BOOST_NO_THROW_H_ 
```

缺点是：只要 BOOST_*_NO_THROW 没有变化，它就可以工作

和

异常消息将在测试输出中标记为错误之前打印。这首先看起来有点可怜，这就是为什么我通过将“---”写入 outstream 来对输出进行分组以增强阅读效果。但是 BOOST_CHECK_IMPL 之后的代码永远不会到达。

上面的解决方案对我来说非常好。随意使用，如果你有同样的愿望 =)

（使用CDash进行ctest输出，不要忘记增加测试输出限制，或者简单禁用限制：[http](http://web.archiveorange.com/archive/v/5y7PkVuHtkmVcf7jiWol) ://web.archiveorange.com/archive/v/5y7PkVuHtkmVcf7jiWol ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-24T07:47:56.207

## 解决方案 1。

使用捕获异常的包装器方法，然后打印错误消息，然后重新抛出以便`BOOST`可以报告它：

```
void method_to_test(int s)
{
    if(s==0)
        throw std::runtime_error("My error message");
}

void middle_man(int x)
{
    try
    {
        method_to_test(x);
    }catch(std::exception& e)
    {
        std::stringstream mes;
        mes << "Exception thrown: " << e.what();
        BOOST_TEST_MESSAGE(mes.str());// BOOST_ERROR(mes.str());
        throw;
    }
} 
```

然后您的测试用例将显示为：

```
BOOST_AUTO_TEST_CASE(case1)
{
    BOOST_CHECK_NO_THROW( middle_man(0) );
} 
```

这种方法的一个缺点是您需要`middle_man`为每个`method_to_test`.

## 解决方案 2。

使用*装饰器*，看到这个[答案](https://stackoverflow.com/a/30679917/7470967)，来做之前解决方案中的包装器会做的事情。

```
template <class> struct Decorator;

template<class R,class ... Args>
struct Decorator<R(Args ...)>
{
    std::function<R(Args ...)> f_;

    Decorator(std::function<R(Args ...)> f):
        f_{f} 
    {}

    R operator()(Args ... args)
    {
        try
        {
            f_(args...);
        }catch(std::exception& e)
        {
            std::stringstream mes;
            mes << "Exception thrown: " << e.what();
            BOOST_TEST_MESSAGE(mes.str());
            throw;
        }
    }
};

template<class R,class ... Args>
Decorator<R(Args...)> makeDecorator(R (*f)(Args ...))
{
    return Decorator<R(Args...)>(std::function<R(Args...)>(f));
} 
```

那么您的测试用例将如下所示：

```
BOOST_AUTO_TEST_CASE(case2)
{
    BOOST_CHECK_NO_THROW( makeDecorator(method_to_test)(0) );
    BOOST_CHECK_NO_THROW( makeDecorator(another_method_to_test)() );
} 
```

# ruby-on-rails - 将环境变量传递给 Procfile 中的 sh

> ID：15133267
> 
> 赞同：1
> 
> 时间：2013-02-28T10:36:52.467
> 
> 标签：ruby-on-rails, environment-variables, sh, foreman, procfile

我有一个 Procfile 包含：

```
someprocess: sh -c 'cd /Users/someuser/path/to/sinatra/app && rackup -p 4567' 
```

我需要打破这条路径，以便通过环境变量对其进行配置。因此，我将此路径添加到存储在 .env 文件中的环境变量中：

```
SOME_DIR=/Users/someuser/path/to/sinatra/app 
```

我告诉工头在运行时加载这些环境：

```
$ foreman start -f Procfile.dev -e .env 
```

但是，这会导致错误，因为此环境变量在 shell 命令中不可用：

```
someprocess: sh -c SOME_DIR && rackup -p 4567' 
```

产生错误：

```
sh: line 0: cd: SOME_DIR: No such file or directory 
```

**那么如何将环境变量传递给 shell 命令呢？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T11:38:40.213

我认为您缺少用于访问变量的 $ 符号

```
cd $SOME_DIR 
```

# javascript - Mediaelement.js 简单的音频播放列表皮肤

> ID：15133270
> 
> 赞同：1
> 
> 时间：2013-02-28T10:36:55.410
> 
> 标签：javascript, jquery, html, audio, mediaelement.js

我一直在搜索 mediaelement.js 的文档以查找播放列表皮肤（或至少具有上一个和前进按钮的皮肤）这样的东西存在吗？我在网上看到有上一个和下一个按钮的例子。我的目标是这样的。

![在此处输入图像描述](../Images/776a8cac3828701a1c8011266223733b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-11T11:25:09.550

您可以通过 hark.com 扩展此插件

[https://github.com/hark/mediaelement-plugins](https://github.com/hark/mediaelement-plugins)

例子：

上一个按钮：

```
(function($){
  MediaElementPlayer.prototype.buildprevious = function(player, controls, layers, media){
    var loop = $('<div class="mejs-button mejs-previous-button">' +      
      '</div>')
      // append it to the toolbar
      .appendTo(controls)
      // add a click toggle event
      .click(function(){
        // window.open(player.options.logo.link, '_blank');
        player.options.prevFunc.apply(this);
      });
  };
})(jQuery); 
```

然后您可以将其添加到 mediaelement.js 中的选项中

```
prevFunc: function(){
    // add previous functionality here
    alert("Previous!");
}, 
```

# mysql - 如果值存在 x 次，则复制行

> ID：15133272
> 
> 赞同：0
> 
> 时间：2013-02-28T10:37:02.013
> 
> 标签：mysql, sql

我有两个结构相同的表 Board1 和 Board2。它们都有一个主索引列`id`。我有一个名为 Table1 的第三个表，它有一个非索引列，其中多次出现`board_id`相同的情况。始终对应于 Board1 中的一个。Board2 目前是空的，我想从 Board1 添加行，但仅在 Table1 中至少出现六次的情况下添加行。Table1 将定期更改，因此我将需要在将来进行查询，但不会将Board2 中已经存在的行加倍。`board_id``board_id``id``board_id``id`

回顾一下：

共有三个表：Board1、Board2 和 Table1。我想将行从 Board1 复制到 Board2，但仅在`id`Board1 中作为“board_id”在 Table1 中出现（至少）六次的地方。

我会很感激任何帮助！

编辑：我非常抱歉，但我意识到我在我的问题中犯了一个巨大的错误。我重写了它以反映我真正需要的东西。我真的很抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:50:17.407

You can do it like this

```
INSERT INTO Table2

SELECT
  id,
  board_id
FROM (SELECT
    b.id,
    b.board_id,
    bl.Count
      FROM board as b
    LEFT JOIN (SELECT
             board_id,
             COUNT(board_id) as `Count`
           FROM board
           GROUP BY board_id) as bl
      on bl.board_id = b.board_id
      group by b.id
      having bl.Count >= 6) as L 
```

If you need more columns you can select them in inner and outer queries.

[Fiddle Demo for Select](http://sqlfiddle.com/#!2/833f2/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:58:43.107

尝试以下方法：

*   在指定的位置添加列名（不包括任何 ID 列），因为我假设每一行都有一个唯一的 ID，因此您将无法通过执行 GROUP 和 COUNT`SELECT * FROM Table1`

**您可能需要对此进行测试/验证**

```
INSERT INTO Board2 (Your Column Names)
SELECT (Your Column Names)    
FROM Board1 
WHERE id (IN (SELECT board_id 
                    FROM  Table1 
                    GROUP BY (board_id) 
                    HAVING (COUNT(*) >= 6))    
AND board_id NOT IN(SELECT DISTINCT board_id FROM Board2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:59:17.683

这是你的要求，用[小提琴](http://sqlfiddle.com/#!2/9a49db/3)

```
INSERT Table2
SELECT
            *
    FROM
            Table1
        JOIN
            (
            SELECT
                    Board_Id,
                    count(*) cnt
                FROM
                    Table1
                GROUP BY
                    Board_Id
            ) BoardIds
                ON BoardIds.Board_Id = Table1.Board_Id
    WHERE
             BoardIds.cnt > 5
        AND
             NOT EXISTS (SELECT id FROM Table2 WHERE Table2.id = Table1.id) 
```

# actionscript-3 - AS3：一个接口实现另一个接口

> ID：15133273
> 
> 赞同：2
> 
> 时间：2013-02-28T10:37:11.190
> 
> 标签：actionscript-3, oop, actionscript, flash-builder

我很惊讶这段代码可以编译，但这是什么意思？

```
public interface IBar {}
public interface IFoo implements IBar {} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:44:00.340

它无法编译，因为接口不能`implement`其他接口但可以`extends`：

```
public interface IFoo extends IBar {} 
```

您的代码必须导致错误：

```
1084：语法错误：在实现之前需要左大括号。

```

# java - BoxLayout.X_AXIS 中 JPanel 上的 EmptyBorders

> ID：15133274
> 
> 赞同：2
> 
> 时间：2013-02-28T10:37:14.207
> 
> 标签：java, swing, layout-manager, margins, boxlayout

我有一个自定义的 JPanel，它的paintComponent 方法被覆盖以绘制图像。

我想在容器中垂直居中插入几个这样的自定义面板。为此，我创建了一个以 BoxLayout.X_AXIS 作为布局管理器的 jpanel。

![表示](../Images/6f916cd598515117a82ac81628258bdf.png)

这很好用，显示了我想要的，但我想在自定义面板之间添加边距。

EmptyMargins 只是被忽略了，棘手的部分是我不能（或不想......）在它们之间添加支柱或框，因为我需要从循环中获取每个自定义面板，该循环需要容器的所有组件并将它们投射到 CustomPanel 中。

看到问题了吗？如果我在面板之间添加支柱，则会出现演员表异常并且 EmptyBorders 不起作用......欢迎任何想法！

注意：我对其他布局管理器提议持开放态度！;-)

这是代码：

```
public class StackExemple {

public StackExemple() {

    JFrame frame = new JFrame();
    frame.setPreferredSize(new Dimension(600, 300));

    JPanel container = new JPanel();
    container.setPreferredSize(new Dimension(600, 300));
    container.setLayout(new BoxLayout(container, BoxLayout.X_AXIS));

    CustomPanel customPanel1 = new CustomPanel();
    CustomPanel customPanel2 = new CustomPanel();
    CustomPanel customPanel3 = new CustomPanel();

    container.add(customPanel1);
    container.add(customPanel2);
    container.add(customPanel3);

    frame.getContentPane().add(container);
    frame.pack();
    frame.setVisible(true);

    //Loop which takes the custompanels
    for(Component comp : container.getComponents()) {
        CustomPanel panel = (CustomPanel)comp;
        //DO SOMETHING

        System.out.println("Hello World");
    }
}

private class CustomPanel extends JPanel{

    private BufferedImage image;

    public CustomPanel() {
        setPreferredSize(new Dimension(100, 100));
        setMinimumSize(getPreferredSize());
        setMaximumSize(getPreferredSize());
        setBorder(BorderFactory.createEmptyBorder(0,50,0,0));
        setBackground(Color.RED);

//      try {
//          image = ImageIO.read(ClassLoader.getSystemClassLoader().getResource("Ressources/img.png"));
//      } catch (IOException ex) {
//           System.out.println("Ooops... ");
//      }
    }

    @Override
    protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);
//      int x = (this.getWidth() - image.getWidth()) / 2;
//      int y = (this.getHeight() - image.getHeight()) / 2;
//      g.drawImage(image, x, y, null);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:06:00.353

*   [边框是正确的，必须从父级获取背景以获取 LineBorders](http://docs.oracle.com/javase/tutorial/uiswing/components/border.html)

*   覆盖[BoxLayout 的 Min / Max / PreferredSize](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)

*   `BoxLayout``Min / Max / PreferredSize`默认接受

![在此处输入图像描述](../Images/e98abd48cc2c32b51e4bc0b6c70d9a9f.png)

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.image.BufferedImage;
import javax.swing.BorderFactory;
import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class StackExemple {

    public StackExemple() {
        JFrame frame = new JFrame();
        JPanel container = new JPanel();
        container.setLayout(new BoxLayout(container, BoxLayout.X_AXIS));
        CustomPanel customPanel1 = new CustomPanel(Color.blue);
        CustomPanel customPanel2 = new CustomPanel(Color.red);
        CustomPanel customPanel3 = new CustomPanel(Color.green);
        container.add(customPanel1);
        container.add(customPanel2);
        container.add(customPanel3);
        frame.getContentPane().add(container);
        frame.pack();
        frame.setVisible(true);
        for (Component comp : container.getComponents()) {
            CustomPanel panel = (CustomPanel) comp;
            System.out.println("Hello World");
        }
    }

    private class CustomPanel extends JPanel {

        private BufferedImage image;

        @Override
        public Dimension getMinimumSize() {
            return new Dimension(100, 80);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 160);
        }

        @Override
        public Dimension getMaximumSize() {
            return new Dimension(400, 320);
        }

        public CustomPanel(Color c) {
            setBorder(BorderFactory.createCompoundBorder(
                    BorderFactory.createEmptyBorder(10, 10, 10, 10), 
                    BorderFactory.createLineBorder(Color.black, 1)));
            //setBorder(BorderFactory.createCompoundBorder(
            //BorderFactory.createLineBorder(Color.black, 1), 
            //BorderFactory.createEmptyBorder(10, 10, 10, 10)));
            setBackground(c);
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                StackExemple stackExemple = new StackExemple();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T11:25:38.570

*边框似乎*不受尊重的根本原因是默认情况下面板是不透明的，即它保证用完全纯色的背景颜色填充其区域的每个像素。边框覆盖的区域是面板区域的一部分，因此也必须填充面板的背景。

由于您似乎无论如何都在进行自定义绘画，您可能会考虑将其不透明性报告为错误，并且仅在边界区域内绘制背景（和/或背景图像）：

```
// in constructor
setOpaque(false);

@Override
protected void paintComponent(Graphics g) {
    // take over background filling inside the border
    Insets insets = getInsets();
    g.setColor(getBackground());
    g.fillRect(insets.left, insets.top, 
            getWidth() - insets.left - insets.right, 
            getHeight() - insets.top - insets.bottom);

    super.paintComponent(g);
    // for a background image, you would need to take the insets
    // into account as well 
    // int x = (this.getWidth() - image.getWidth()) / 2;
    // int y = (this.getHeight() - image.getHeight()) / 2;
    // g.drawImage(image, x, y, null);
} 
```

# javascript - 使用 JavaScript 将网站转发到另一台服务器上的 pdf 文件

> ID：15133280
> 
> 赞同：0
> 
> 时间：2013-02-28T10:37:33.357
> 
> 标签：javascript, html, ajax, xmlhttprequest, httprequest

我对 html、js 等比较陌生。直到现在我在“包含”环境中的网站上工作，我只访问我自己的资源，或者如果我访问其他资源，我总是有一个硬编码的链接。

我的大学使用课程和日期的输入提供在线课程表。pdf 始终以以下格式保存../onxx-yyyy-ww.pdf

我想创建一个网站，该网站曾经要求上课，然后将其保存在 cookie 中，从那时起，每次您访问该网站时，它都会将您转发到当前时间表的 pdf 文件。我发现这可以通过一种叫做 AJAX 的东西来实现，我对此一无所知。这就是我已经走了多远：

js 部分（不包括 Nick Baicoianu 的 getWeek()）：

```
window.onload = function(){
            checkCookie();
        }

        function checkCookie(){
            if(document.cookie!=''){
                forwarding();
            }
        }

        function forwarding(){
            alert('Forwarding...');
            if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            }
            else{// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }

            xmlhttp.onreadystatechange=function(){
              if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    alert(xmlhttp.responseText);
                }
              }

            var todayDate = new Date();
            var weekDate = todayDate.getWeek();
            a = document.cookie;
            cookiename = a.substr(0,a.search('='));
            cookiewert = a.substr(a.search('=')+1,a.search(';'));
            if(cookiewert == '')
            {cookiewert = a.substr(a.search('=')+1,a.length);} 
            if(cookiewert<10){
            cookiewert= "0" + cookiewert;
            }

            for (var w=weekDate;w>0;w--){
            xmlhttp.open("GET","http://pollux.dhbw-mosbach.de/cmos_extern_kurs_ext/"+cookiewert+"-"+todayDate.getFullYear()+"-"+w+".pdf",true);
            xmlhttp.send();
            }
        }

        function run(){
            var d = new Date();
            d = new Date(d.getTime() +1000*60*60*24*365*5); // 5 Jahre Cookie

            document.cookie = 'class='+document.getElementById('class').value+'; expires='+d.toGMTString()+';'; 

            forwarding();
        } 
```

html:

```
<body>
    <select id="class">
        <option value="on09">on09</option>
        <option value="on10">on10</option>
        <option value="on11a">on11a</option>
        <option value="on11b">on11b</option>
        <option value="on12">on12</option>
    </select> 
    <button onclick="run()">Weiter</button>
</body> 
```

显示了我的转发警报，但随后什么也没有发生，我一无所知。如果您对我的代码有反馈，除了我的问题，我很乐意接受。

我要去吃午饭了，所以我需要一段时间才能回复。谢谢你的帮助！

编辑：

我得到了使用 jQuery 的所有东西，直到它可以检索信息（如果请求的文件存在）。没发生什么事。也许我的代码中有错误，但在控制台中它什么也没说。我还在 jQuery API get() [http://api.jquery.com/jQuery.get/中找到了](http://api.jquery.com/jQuery.get/)

> 由于浏览器安全限制，大部分“Ajax”请求都受同源策略的约束；请求无法从不同的域、子域或协议成功检索数据。

这也是我的新转发（）：

```
function forwarding(){
            alert('Forwarding...');

            var todayDate = new Date();
            var weekDate = todayDate.getWeek();

            a = document.cookie;
            cookiename = a.substr(0,a.search('='));
            cookiewert = a.substr(a.search('=')+1,a.search(';'));
            if(cookiewert == '')
            {cookiewert = a.substr(a.search('=')+1,a.length);} 
            alert('http://pollux.dhbw-mosbach.de/cmos_extern_kurs_ext/'+cookiewert+'-'+todayDate.getFullYear()+'-'+singleWeek(weekDate)+'.pdf');

            for (var w=weekDate;w>0;w--){
                $.ajax({
                    type: 'HEAD',
                    url: 'http://pollux.dhbw-mosbach.de/cmos_extern_kurs_ext/'+cookiewert+'-'+todayDate.getFullYear()+'-'+singleWeek(weekDate)+'.pdf',
                    crossDomain: true,

                    success: function () {
                        document.location = "http://pollux.dhbw-mosbach.de/cmos_extern_kurs_ext/"+cookiewert+"-"+todayDate.getFullYear()+"-"+singleWeek(weekDate)+".pdf";
                    },

                    error: function () {
                        alert("Unable to connect to secure checkout.");//TODO: remove when success is working
                        return false;
                    }
                });
            }

            function singleWeek(weekDate){
                if (weekDate<10){
                    weekDate = "0"+weekDate;
                }
            return weekDate;
            }
        } 
```

如果文件存在，我想要的只是任何方法/功能给我反馈，在这种情况下，状态应该向我发送成功或错误。如果可行的话，我可以使用它...我看不出我的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:04:28.243

但这就是你得到答案时所做的一切：警觉！
您的回复是 html 格式的文本吗？您想重定向用户或在您的页面上显示内容？
基本上，你最常对你的回应做一些事情。替换 div 的内容，例如

```
document.getElementById("mydiv").innerHTML = xmlhttp.responseText 
```

或者，您可以更改文档的位置（用于重定向），或创建指向 pdf 的链接（我不确定您如何使用浏览器插件“显示”pdf 作为可下载对象，或者库从 pdf 自动生成 html 并提供此服务而不是pdf文件？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T15:09:44.630

由于相同的来源政策，这似乎用 JavaScript 是不可能实现的。

# php - 如何强制 file_get_contents 工作

> ID：15133281
> 
> 赞同：0
> 
> 时间：2013-02-28T10:37:34.257
> 
> 标签：php, file-get-contents

有一段时间我使用该功能`file_get_contents`从网站获取 html 数据。但今天没有，看看我为什么使用：

```
$html = @file_get_contents('http://www.thewebsite.com/');
if(!$html)
   exit( "Oops. Error :)" ); 
```

这向我显示了错误消息。所以也许他们以某种方式阻止了这种联系。

请高手如何强制该功能获取内容？

编辑 ：

这给出了这个错误：

```
Warning: file_get_contents(http://www.thewebsite.com/) 
       [<a href='function.file-get-contents'>function.file-get-contents</a>]: 
       failed to open stream: HTTP request failed! 
```

**PS** 我试过另一个网站，这工作正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:40:24.483

1.  移除警告抑制
2.  开启错误报告
3.  检查 error_log 中的消息 您应该会看到详细的错误消息，而不是“糟糕。错误”。然后你就会知道为什么它不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:41:19.973

根据手册页。如果启用了 fopen 包装器，则 URL 可以用作此函数的文件名。您是否真的检查过每个 url 是否返回 false 并给出错误。那么显然你需要检查设置。

# c# - 为什么非托管代码会将内存增加到特定限制？

> ID：15133282
> 
> 赞同：2
> 
> 时间：2013-02-28T10:37:40.037
> 
> 标签：c#, memory-management, garbage-collection, unmanaged

我使用一个用 .NET 编写的流控制系统，该系统通过 TCP 连接与外部系统交互，并在不同端点之间路由事务。

**我的问题：**

在启动/初始化时，私有工作集内存级别约为 25000KB。在系统处于空闲状态时初始化后，私有工作集以大约每秒 50-100KB 的速度递增，直到达到大约 57000KB 的限制。

**信息：**

系统在增量期间生成页面错误。

当达到限制时，当我连接 +300 个客户端并交换几个小时的高频事务时，私有工作集保持非常稳定并以几 MB 上下波动，垃圾收集的逻辑非常有效。

我已经使用 Redgate 的一个名为“Memory Profiler”的工具对这个系统进行了分析，它告诉我在初始化后内存增加是由非托管代码分配的，不幸的是，这个分析器不支持对非托管代码分配的内存的洞察，所以我很难找出分配的内存包含什么，分配的原因以及分配内存的代码。

整个代码库是用 C# 开发的，没有对 COM+ 程序集的引用，也没有与本机 Windows API 的通信（在此内存的增量期间）。

**我的问题：**

我需要指出正确的方向，以找出为什么内存在初始化后以小块连续递增到特定级别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:30:52.837

如果页面不在工作集中，这并不意味着该页面仅存储在磁盘上或根本存储在磁盘上。Windows 上的页面可以进入*待机列表*。如果他们这样做了，他们就会离开 WS 并需要一个*软故障*才能将他们带回来。（我从来不明白为什么会有这种机制，但确实如此）。软故障很便宜。

使用 Process Explorer 的系统信息窗口，您可以查看每秒硬故障和软故障的数量。可能也可以使用 perfmon。我建议你检查你是否有硬故障（我相信你没有，所以你没有问题，你可以结束调查）。

此外，WS 与内存使用无关，但我想你已经知道了。

# javascript - 如何在 cakephp 的视图文件中调用函数？

> ID：15133287
> 
> 赞同：0
> 
> 时间：2013-02-28T10:37:49.070
> 
> 标签：javascript, jquery, ajax, cakephp, cakephp-2.0

我想在输入字段的视图文件中调用 javascript 函数，我该怎么做？

```
 <script>
  function new(){
  // code
 }
 </script>

<?php echo $this->FormManager->input('search',array('label'=>'Search'));?> 
```

我想在这个输入字段中调用函数，我该怎么做？

任何人都可以帮忙吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:42:43.843

您需要向该输入和绑定`focus`事件添加和 ID：

```
<?php echo $this->FormManager->input('search',array('label'=>'Search', 'id'=>'searchBtn'));?>

<script type="text/javascript">
$(document).ready(function(){
    $('#searchBtn').on('focus', function(){
        // your function
    });
});
</script> 
```

每次输入它`focus`或您想要的任何内容时，都会调用该函数。

# .htaccess - 隐藏 URL 中的参数

> ID：15133288
> 
> 赞同：1
> 
> 时间：2013-02-28T10:37:50.447
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我已经成功地从 URL 中删除了参数（htaccess）：

```
RewriteCond %{QUERY_STRING} id=1
RewriteRule (.*) http://www.website.com/? [R=301,L]

RewriteCond %{QUERY_STRING} id=2
RewriteRule (.*) http://www.website.com/contact-us? [R=301,L] 
```

但是在根目录中有一个名为“mobile”的文件夹，它包含与根目录相同的页面，除了它们是为移动设备设计的，我还需要从那里删除参数。现在移动页面重定向到非移动页面，因为它们具有相同的参数：

```
//non-mobile
http://www.website.com/index.html?id=1
//mobile
http://www.website.com/mobile/index.html?id=1 
```

我显然需要他们重定向到“移动”文件夹，但我不知道该怎么做。

顺便说一句，如果有人想知道为什么会有 html 扩展名，那是因为我复制了一个网站，其中包含一个名为 HTTrack 的程序。它将页面保存为 index.html、index4352.html 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:45:53.550

将单独的 .htaccess 文件也放入移动文件夹中，在其中重定向到移动 index.html。

# android - 通过代码在另一个 XML 布局中获取 XML 布局 [Android]

> ID：15133294
> 
> 赞同：2
> 
> 时间：2013-02-28T10:38:06.117
> 
> 标签：android, xml, view

我有一个 xml 文件 main_layout.xml，在这个文件中我有另一个 xml 布局 popup_layout.xml，它是由以下内容添加的：

```
 <include
    android:id="@+id/popup"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    layout="@layout/popup_layout" /> 
```

在 MainActivity.java 文件中，我想获取弹出对象，以便可以更改它的文本字段等。我要写什么？

我测试过

```
 View v = findViewById(R.id.popup);
    TextView tv= (TextView) v.findViewById(R.id.ip_answer); 
```

但它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:07:03.523

include 的 id 属性不是必需的。将 id 属性添加到要包含的布局中，然后通过该 id 查找视图并相应地收集它作为布局类型，
例如：

```
RelativeLayout/LinearLayout= findViewById(id); 
```

然后找到文本视图。
这应该工作

# ios - 无法在 iOS 6 中删除 QLPreviewController 中的导航项

> ID：15133297
> 
> 赞同：0
> 
> 时间：2013-02-28T10:38:17.557
> 
> 标签：ios, qlpreviewcontroller

我将 QLPreviewController 子类化并使用

[[self navigationItem] setRightBarButtonItem:nil];

但 navigationItem 仅在 iOS 5 中被删除，而不是 iOS6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:05:34.693

我设法通过创建一个计时器来检查导航项并将其删除来做到这一点

这是代码：

```
[self inspectSubviewsForView:self.view];

- (void)inspectSubviewsForView:(UIView *)view
{
    for (UIView *subview in view.subviews)
    {
        NSLog(@"class detected %@",[subview description]);
        if ([subview isKindOfClass:[UINavigationBar class]])
        {
            UINavigationBar *bar = (UINavigationBar *)subview;
            if ([[bar items] count] > 0)
            {
                UINavigationItem *navItem = [[bar items] objectAtIndex:0];
                [navItem setRightBarButtonItem:nil];
                {
                }

                if ([subview isKindOfClass:[UIView class]] && [[subview subviews] count] > 0)
                {
                    [self inspectSubviewsForView:subview];
                }
            }
        }
        [self inspectSubviewsForView:subview];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-30T08:01:56.963

```
Simple solution for this is add one dummy view to current viewController and Add QLPreviewController.view to dummy view . 

 previewController = [[QLPreviewController alloc] init];
 previewController.dataSource = self;
 previewController.delegate = self;
 previewController.currentPreviewItemIndex = 0;

[self.ContentView addSubview:previewController.view];

- (IBAction)removeQPView:(id)sender {

    [previewController.view removeFromSuperview];
} 
```

# c# - 二进制序列化和自动属性

> ID：15133298
> 
> 赞同：3
> 
> 时间：2013-02-28T10:38:23.793
> 
> 标签：c#, deserialization, .net-4.5, binaryformatter, binary-serialization

我有这样的课：

```
public class Foo
{
    public IBar {get;set;}
    //tons of other properties
}

public interface IBar
{
    //whatever
} 
```

该类用于二进制序列化（BinaryFormatter 的标准使用）。IBar 的实现标有 [Serializable]，因此一切正常。

现在我不想序列化 Bar 并保持向后兼容性（无论如何都没有在代码中引用它）。 [NonSerialized](http://msdn.microsoft.com/en-us/library/system.nonserializedattribute.aspx)属性似乎就足够了。但是，它只能应用于字段，不能应用于自动属性。所以我尝试了这个：

```
public class Foo
{
    private IBar _bar;
    [NonSerializable]
    public IBar Bar 
    {
        get { return _bar; }
        set { _bar = value; }
    }
} 
```

令人惊讶的是它运作良好 - 我可以反序列化旧的 Foos 和新的。

我的问题是：如果这些是序列化的字段并且自动属性的支持字段的名称中可能包含一些非 C# 字符，它怎么可能工作？

换句话说：

老 Foo 的 IBar 字段名称（我的猜测）：k__BackingField

新 Foo 的 IBar 字段名称：_bar

显然它们不匹配，那么 BinaryFormatter 如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:20:26.480

我认为您的示例中有一些奇怪的地方。BinaryFormatter 不应该能够处理这个问题（据我所知，除非我怀疑在 4.5 中对此进行了更改），这就是为什么如果需要向后兼容使用它是非常危险的。您确定该值是从旧版本序列化并反序列化到新版本吗？你能验证反序列化的数据是否匹配，并且不为空？

有关验证其不工作的程序的完整示例*，*请参见此处。 [http://www.infragistics.com/community/blogs/josh_smith/archive/2008/02/05/automatic-properties-and-the-binaryformatter.aspx](http://www.infragistics.com/community/blogs/josh_smith/archive/2008/02/05/automatic-properties-and-the-binaryformatter.aspx)

您不会看到任何异常，但名为 xyz__backingfield 的字段中的旧值将丢失，并在新类中替换为默认值。

如果您想向后兼容，请避免使用自动属性，否则您很快就会陷入困境。事实上，这并不重要，因为默认（自动）模式下的 BinaryFormatter 只有在您想在同一个应用程序中序列化对象并再次反序列化它们时才真正有用，例如复制和粘贴或类似操作。在这种情况下，您没有版本控制问题，因为它将是执行序列化和反序列化的相同代码。

为了使序列化向后兼容而不会失去理智，请确保您完全控制模式。DataContractSerializer、Json.NET 或协议缓冲区（例如 protobuf-net）是很有可能避免麻烦的序列化程序的好例子。

作为最后一种可能性，您可以实现 ISerializable 并使用 BinaryFormatter 的字典存储，但是无论如何您都会遇到手动滚动序列化的所有缺点。

在旁注中，如果您想将属性应用于支持字段，请尝试 [field:AttriuteType] 这对于将事件的支持字段标记为非序列化非常有用，例如。

# linux - 升级特定的 Linux 内核子系统？

> ID：15133302
> 
> 赞同：0
> 
> 时间：2013-02-28T10:38:27.427
> 
> 标签：linux, module, linux-kernel, i2c

是否可以只升级 Linux 内核的特定子系统，比如 I2C。

例如：是否可以在内核版本 2.6.31.1 中包含“支持多路复用 I2C 总线拓扑（在内核 2.6.36 中引入）”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:45:01.070

不，这是不可能的。

内核模块或“子系统”（例如 i2c 模块）是为特定内核映像构建的，您不能组合不同的内核（模块）版本。

如果您感到幸运（取决于您的内核技能），您可以：

1.  下载内核的源代码
2.  安装编译器和朋友
3.  添加更新的 ic2 驱动程序
4.  尝试为您的内核版本编译模块
5.  交叉手指并将其加载到您自己的内核中...\

我没有这方面的经验，所以我不知道这是否有效。当然，如果 ic2 模块需要其他（更新的）模块，您最终可能会更新（几乎）完整的内核......

# javascript - 在chrome浏览器中打开一个JS弹窗，窗口太小？

> ID：15133310
> 
> 赞同：0
> 
> 时间：2013-02-28T10:38:42.990
> 
> 标签：javascript

我编写了一个脚本来打开一个弹出窗口，与 Firefox 和 Internet Explorer 相比，chrome 浏览器中的窗口太小了。

这是我的脚本，

```
function openPopup(sId,tId)
{
    window.open ("index.php?sid=" + sid+"&tid="+tid, "test", "fullscreen,scrollbars,hotkeys=no");
} 
```

有什么帮助吗？感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:40:32.130

您可以在弹出窗口中使用固定`width`和`height`

```
window.open('','','width=200,height=100'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:42:16.673

您可以在调用 window.open() 时设置宽度和高度。查看[这篇文章](http://www.javascript-coder.com/window-popup/javascript-window-open.phtml)了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:42:28.367

据我所知，全屏不是窗口选项的参数。尝试使用 height 和 width 属性来设置大小

# android - 指定的孩子已经有一个父母。填充表格行时，您必须在孩子的父母上调用 removeChild()

> ID：15133311
> 
> 赞同：1
> 
> 时间：2013-02-28T10:38:46.603
> 
> 标签：android, android-layout, exception, android-view, android-tablelayout

您好，尝试将视图添加到 TableRow 时出现以下错误。添加第二个视图时，我收到错误消息：“指定的孩子已经有父母。您必须在孩子的父母上调用 removeChild()”。这是我正在使用的代码：

```
TableLayout table2 = new TableLayout(this);
table2.setLayoutParams(new TableLayout.LayoutParams(TableLayout.LayoutParams.WRAP_CONTENT, 
            TableLayout.LayoutParams.WRAP_CONTENT));

for(int count = 0; count < films.size() ; count++){

        TableRow tableRow = new TableRow(this);

        Film film = films.get(count);
        count++;

        Film film2 = new Film();
        if(count != films.size()){
            film2 = films.get(count);
            count++;
        }

        tableRow.addView(flim.getPhoto());

        if(!film2.getName().contentEquals("")){
            //tableRow.addView(film2.getPhoto());
        }

        table2.addView(tableRow); // Add the new row to our tableLayout
    }
    LinearLayout l2 = (LinearLayout)findViewById(R.id.root);
    l2.addView(table2);
} 
```

当我尝试添加 2° 胶片时，出现以下异常：

```
?:??: W/?(?): FATAL EXCEPTION: main
?:??: W/?(?): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.pipoca/com.vista.MainActivity}: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
?:??: W/?(?):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
?:??: W/?(?):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
?:??: W/?(?):   at android.app.ActivityThread.access$600(ActivityThread.java:130)
?:??: W/?(?):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
?:??: W/?(?):   at android.os.Handler.dispatchMessage(Handler.java:99)
?:??: W/?(?):   at android.os.Looper.loop(Looper.java:137)
?:??: W/?(?):   at android.app.ActivityThread.main(ActivityThread.java:4745)
?:??: W/?(?):   at java.lang.reflect.Method.invokeNative(Native Method)
?:??: W/?(?):   at java.lang.reflect.Method.invoke(Method.java:511)
?:??: W/?(?):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
?:??: W/?(?):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
?:??: W/?(?):   at dalvik.system.NativeStart.main(Native Method)
?:??: W/?(?): Caused by: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
?:??: W/?(?):   at android.view.ViewGroup.addViewInner(ViewGroup.java:3378)
?:??: W/?(?):   at android.view.ViewGroup.addView(ViewGroup.java:3249)
?:??: W/?(?):   at android.view.ViewGroup.addView(ViewGroup.java:3194)
?:??: W/?(?):   at android.view.ViewGroup.addView(ViewGroup.java:3170)
?:??: W/?(?):   at com.vista.MainActivity.armarTabla(MainActivity.java:264)
?:??: W/?(?):   at com.vista.MainActivity.onTabSelected(MainActivity.java:200)
?:??: W/?(?):   at com.actionbarsherlock.internal.app.ActionBarWrapper$TabWrapper.onTabSelected(ActionBarWrapper.java:344)
?:??: W/?(?):   at com.android.internal.app.ActionBarImpl.selectTab(ActionBarImpl.java:570)
?:??: W/?(?):   at com.android.internal.app.ActionBarImpl.setSelectedNavigationItem(ActionBarImpl.java:356)
?:??: W/?(?):   at com.android.internal.app.ActionBarImpl.setNavigationMode(ActionBarImpl.java:1158)
?:??: W/?(?):   at com.actionbarsherlock.internal.app.ActionBarWrapper.setNavigationMode(ActionBarWrapper.java:204)
?:??: W/?(?):   at com.vista.MainActivity.showTabsNav(MainActivity.java:190)
?:??: W/?(?):   at com.vista.MainActivity.onCreate(MainActivity.java:63)
?:??: W/?(?):   at android.app.Activity.performCreate(Activity.java:5008)
?:??: W/?(?):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
?:??: W/?(?):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
?:??: W/?(?):   ... 11 more
?:??: W/?(?): [ 02-28 07:34:23.878   417: 2107 W/ActivityManager ]
?:??: W/?(?):   Force finishing activity com.pipoca/com.vista.MainActivity
?:??: W/?(?): [ 02-28 07:34:24.378   417:  430 W/ActivityManager ]
?:??: W/?(?): Activity pause timeout for ActivityRecord{415eaff0 com.pipoca/com.vista.MainActivity}
?:??: W/?(?): [ 02-28 07:34:24.388   417:  430 D/WindowManager ] 
```

谁能告诉我我做错了什么？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:51:50.787

异常表明`ImageView`您的方法返回的 View （我想它是一个 ）`getPhoto()`之前已经添加到父级。

只需使用您的 IDE 查找所有用法，`getPhoto()`以确定发生这种情况的位置。

# c# - 如何在 Visual Studio 2010 中检查附加属性

> ID：15133314
> 
> 赞同：0
> 
> 时间：2013-02-28T10:38:51.150
> 
> 标签：c#, .net, wpf, vb.net, visual-studio-2010

我需要知道如何在 QuickWatch 中检查附加属性 (WPF) 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:44:09.480

```
AttachedPropertyClassName.GetAttachedPropertyName(dependencyObject) 
```

具体例子：

```
Grid.GetRow(someGrid) 
```

# java - Java嵌套类问题

> ID：15133317
> 
> 赞同：3
> 
> 时间：2013-02-28T10:39:00.357
> 
> 标签：java, oop, class, inner-classes

由于我最近开始编程，所以我有点卡在这个编码领域。

有一个名为嵌套类的编程课程。但是当我想使用它时，它实际上并没有做功课想要的。这是我需要实现的示例：

```
public class Zoo {
    ...
    public static class monkey {
        ...
    }
} 
```

主要是

```
Zoo zoo1 = new Zoo();
...
zoo1.monkey.setage(int);
... 
```

但是这里有一个问题，每当我想从zoo1调用monkey时，调试器说这是不可能的。（记住我想在不创建monkey实例的情况下这样做）

提前致谢

更新：我只是想知道这是否是一种语言限制，那么 oracle 本身如何使用 system.out.printf 轻松地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:50:24.760

您不能通过 Zoo 的实例访问猴子类，这样做实际上没有任何意义。如果你想从 main 访问猴子的静态方法，你可以使用下面的例子

```
public class Zoo {

    public static void main(String[] args) {
        // Example 1
        monkey.setage(3);
        // Example 2
        Zoo.monkey.setage(3);
    }

    public static class monkey {
        private static int age;

        public static void setage(int age) {
            monkey.age = age;
        }
    }
} 
```

但是你实际上想要完成什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:43:54.387

编辑：我没有看到您注意到“（请记住，我想在不创建猴子实例的情况下执行此操作）”

[有时在询问之前，搜索可能会帮助您节省一些时间。来自此地址的直接报价： http](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html) ://docs.oracle.com/javase/tutorial/java/javaOO/nested.html

> 内部类
> 
> 与实例方法和变量一样，内部类与其封闭类的实例相关联，并且可以直接访问该对象的方法和字段。此外，由于内部类与实例相关联，它本身不能定义任何静态成员。
> 
> 作为内部类实例的对象存在于外部类的实例中。考虑以下类：
> 
> 类外部类 { ... 类内部类 { ... } }
> 
> InnerClass 的实例只能存在于 OuterClass 的实例中，并且可以直接访问其封闭实例的方法和字段。下图说明了这个想法。
> 
> InnerClass 的实例存在于 OuterClass 的实例中
> 
> 要实例化内部类，您必须先实例化外部类。然后，使用以下语法在外部对象中创建内部对象：
> 
> OuterClass.InnerClass innerObject = outerObject.new InnerClass();
> 
> 此外，还有两种特殊的内部类：本地类和匿名类（也称为匿名内部类）。这两个将在下一节中简要讨论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T10:44:47.493

`monkey`在我看来是静态的。但是，它们应该`public`代替`Public`。

我会说这`setage()`不是静态方法。如果是这样，并且如果年龄是猴子的属性，那么静态地调用它是没有意义的——你会设置谁的年龄？

但问题是您似乎无法通过外部类类型的变量访问静态内部类。

所以它应该`Zoo.monkey`代替`zoo1.monkey`.

如果您只想控制范围或命名，可以使用[packages](http://en.wikipedia.org/wiki/Java_package)。

例如，您可能有以下内容：

```
package com.example.application.feature;

public class MyClass {
    public void f() {
        System.out.println("Hello");
    }
} 
```

在一个名为`com/example/application/feature/MyClass.java`.

# php - 将相同的数据同时插入 PostgreSQL 和 MySQL

> ID：15133319
> 
> 赞同：1
> 
> 时间：2013-02-28T10:39:00.580
> 
> 标签：php, mysql, ruby-on-rails, postgresql

对于同一个项目，我将 ROR 与 postgreSQL（用于 Ipad 应用程序）和 PHP 与 MySQL（用于 Web 应用程序）一起使用。如何同时将值插入这两个数据库？我的意思是，当用户注册 Ipad App 时，数据应该同时插入 PostgreSQL 和 MySQL 数据库，反之亦然。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:44:16.603

当你从 rails 更新数据库时，让你的 rails 脚本在服务器上运行一个 php 脚本，这只是一个插入数据的模型。您可以使用 http 请求调用 php 脚本并发布您需要的值。我就是这样做的，我不确定是否有更好的方法，因为据我所知，每个带有 rails 的项目只能使用 1 个 db 驱动程序。

或者，您可以更改您的 rails 项目以使用与 PHP 脚本相同的数据库，但您需要使用`rails new ProjectName -d mysql`

# c# - 表单身份验证 - 无需注销

> ID：15133321
> 
> 赞同：0
> 
> 时间：2013-02-28T10:39:03.490
> 
> 标签：c#, asp.net, asp.net-mvc

通常我有：

```
<authentication mode="Forms">
<forms loginUrl="Login.aspx"
   timeout="30"
   slidingExpiration="true"
</authentication> 
```

其中（恕我直言）意味着 cookie 在 30 分钟不活动后过期 - 滑动过期意味着任何活动都将 cookie 的过期时间设置回 30 分钟。

现在我有一个要求，我希望 cookie 无限期地存储，除非用户明确注销。这意味着，即使浏览器关闭并重新打开并且用户转到需要身份验证的一侧，也不需要登录。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:42:44.700

你所描述的听起来相当于强制*记住我*复选框总是被选中。为此，请执行您的`Login`操作，并执行以下操作：

```
FormsAuthentication.SetAuthCookie(username, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:41:36.590

使用`SetAuthCookie`方法。 [SetAuthCookie](http://msdn.microsoft.com/en-us/library/twk5762b.aspx)

```
FormsAuthentication.SetAuthCookie(UserID, false); // not persisting cookie accross the browser session. 
```

FormsAuthentication.SignOut().// 用于注销

# javascript - moment.js - UTC 无法按我的预期工作

> ID：15133326
> 
> 赞同：8
> 
> 时间：2013-02-28T10:39:09.740
> 
> 标签：javascript, node.js, utc, momentjs

在节点控制台中测试：

```
var moment = require('moment');

// create a new Date-Object
var now = new Date(2013, 02, 28, 11, 11, 11);

// create the native timestamp
var native = Date.UTC(now.getFullYear(), now.getMonth(), now.getDate(), now.getHours(), now.getMinutes(), now.getSeconds());

// create the timestamp with moment
var withMoment = moment.utc(now).valueOf()
// it doesnt matter if i use moment(now).utc().valueOf() or moment().utc(now).valueOf()

// native: 1364469071000
// withMoment: 1364465471000
native === withMoment // false!?!?! 

// this returns true!!!
withMoment === now.getTime() 
```

为什么原生的时间戳与 withMoment 不同？为什么 withMoment 返回从当前本地时间计算的时间戳？我怎样才能实现那个moment.utc（）返回与Date.UTC（）相同的结果？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T11:26:07.063

呼叫`moment.utc()`方式与您呼叫的方式相同`Date.UTC`：

```
var withMoment = moment.utc([now.getFullYear(), now.getMonth(), now.getDate(), now.getHours(), now.getMinutes(), now.getSeconds()]).valueOf(); 
```

我认为调用`moment.utc(now)`会使其假定`now`生活在当地时区，它会首先将其转换为 UTC，因此存在差异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T17:14:52.913

你所做的基本上就是这个。

```
var now    = new Date(2013, 02, 28, 11, 11, 11);
var native = Date.UTC(2013, 02, 28, 11, 11, 11);

console.log(now === utc); // false
console.log(now - utc); // your offset from GMT in milliseconds 
```

因为`now`是在当前时区`native`构建的并且是在 UTC 中构建的，所以它们会因您的偏移量而有所不同。太平洋标准时间上午 11 点！= 格林威治标准时间上午 11 点。

# compiler-errors - 使用 CMake 忽略/仅显示来自特定目录的错误/警告

> ID：15133332
> 
> 赞同：21
> 
> 时间：2013-02-28T10:39:31.067
> 
> 标签：compiler-errors, cmake, qt-creator, compiler-warnings

**主要问题：** cmake 是否有配置，仅显示或忽略来自某个目录的编译器警告/错误？

**替代解决方案：**如何在 QtCreator 中切换它？

**背景/动机**：我正在开发一个更大的 CMake 项目，并且只想关注来自我的子项目的警告和错误。我正在与 QtCreator 合作，在一堆外国错误/警告下寻找“我的”错误/警告让我很恼火。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-01T06:20:05.623

您至少可以在 CMake 中为某些*目标*或某些*文件*设置编译器警告选项。

```
# For target
set_target_properties(your_project_name PROPERTIES COMPILE_FLAGS "...")

# For files
set_source_files_properties(
  ${list_of_your_files}
  PROPERTIES
  COMPILE_FLAGS "..."
) 
```

也可以通过将项目分隔为子项目来设置每个文件夹的选项，使用添加它`add_subdirectory(your_project)`并在项目中使用 CMakeLists.txt `add_definitions(...)`。

来自 CMake 文档：

> [add_definitions](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command:add_definitions) 为当前目录及以下目录中的源代码添加标志到编译器命令行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-11-21T01:53:24.380

与@ronkot 的回答基本相同。但不需要`add_subdirectory`特定目录，使用`set_source_files_properties`with`file(GLOB_RECURSE ...)`也可以。

```
file(GLOB_RECURSE SRC_DIR "SRC_DIR/*.c" "SRC_DIR/*.h")

set_source_files_properties(
  ${SRC_DIR}
  PROPERTIES
  COMPILE_FLAGS "-w"
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-05T11:28:35.600

扩展@ronkot 答案，推荐的基于目标的方法是：

```
target_compile_options(your_target SCOPE compiler-warning-options) 
```

其中和`SCOPE`是实际的编译器警告选项，例如. 有关更多信息，请参阅[cmake 的文档](https://cmake.org/cmake/help/v3.19/command/target_compile_options.html?highlight=target_compile_options)。`PUBLIC|INTERFACE|PRIVATE``compiler-warning-options``-Wall`

一般来说，更喜欢使用现代 CMake (3.0+) 的基于目标的方法，而不是基于目录的方法。

# android - Android：哪个更好，viewpager，gallery，水平滚动视图.....还是？

> ID：15133333
> 
> 赞同：7
> 
> 时间：2013-02-28T10:39:33.170
> 
> 标签：android, android-viewpager, android-gallery, android-scrollview

我有一个片段，想为其添加一个画廊，但我看到该画廊已被弃用.....

更具体地说，我实际上想要一个水平列表视图，因为我想自定义视图（在每一行中包括一个图像和文本）并允许它是 srcollable。

“行”的数量（如果是水平的，那么它是列......）随着数据库的变化而变化，所以它不是静态的，我不想限制“行”的数量

谷歌帮我找到了一些解决方案：viewpager 和其他附加库

但是哪一个会更好呢？

我希望将来我不需要一直修复代码！谢谢！！！！

# ios - FlurrySDK 与 cocoapods

> ID：15133335
> 
> 赞同：3
> 
> 时间：2013-02-28T10:39:33.187
> 
> 标签：ios, objective-c, flurry, cocoapods

我正在尝试使用 Cocoapods 将 FlurrySDK 框架集成到我的应用程序中（正如我已经使用很多框架所做的那样），但由于某种原因，xcode 不断抛出这个编译错误：

```
Undefined symbols for architecture armv7:
"_OBJC_CLASS_$_Flurry", referenced from:
  objc-class-ref in AppDelegate.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我在 Podfile 中添加了这一行：

```
pod 'FlurrySDK' 
```

我运行了一个 pod 更新，成功更新了我的 Pods 项目（我可以在我的 pod 中看到 FlurrySDK）。

我的 AppDelegate.m 如下：

```
#import <FlurrySDK/Flurry.h>
@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    [Flurry startSession:FLURRY_API_KEY];
    ...
}
@end 
```

我在这里真的很绝望，我想将我的依赖项保留在它们所属的地方，但 FlurrySDK podspec 似乎无法正常工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:53:39.273

我终于找到了问题所在，它与我正在使用的库中的错误 podspec 文件相关联。`pod update`尽管指定库的行已损坏，但podspec 在制作时没有造成任何问题。我变了 ：

```
 s.framework    = 'CoreLocation, MapKit' 
```

到

```
 s.framework    = 'CoreLocation', 'MapKit' 
```

（注意单引号：是一个字符串，编辑为两个字符串的列表），现在一切都回到了正轨。

# format - Fortran：格式化读取

> ID：15133337
> 
> 赞同：1
> 
> 时间：2013-02-28T10:39:52.040
> 
> 标签：format, fortran

我有一个看起来像这样的文件：

```
startSpecifier

(  251)-0.0110365 (  168)-0.0110365 ( 1267) 0.0108601 (  980) 0.0108601 (

(  251)-0.0110365 (

endSpecifier 
```

我不知道格式在 infile 中每行重复的频率。

我需要得到看起来像这样的数组（对于上面的例子）：

```
a=[251, 268, 1267, 980, 251]
b=-0.0110365, -0.0110365, 0.0108601,...] 
```

关于如何解决问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:23:17.967

在我看来，您基本上有两种选择：

*   您在 Fortran 中编写一个链表，逐行读取文件，解析行并将提取的元素附加到链表中。读取完成后，将链表转换为数组。[在DFTB+](http://www.dftb-plus.info)中读取未知长度的用户数据时，我们正在这样做，但不幸的是，这需要大量的编程。

*   或者，您可以使用脚本语言从输入文件中提取数据并以更适合 Fortran 的格式存储。下面是一个 Python 示例，但您可以使用您选择的任何其他脚本语言：

    ```
    from __future__ import print_function
    import sys
    import re

    PAT1 = re.compile(r"\(\s*(?P<int>\d+)\)")
    PAT2 = re.compile(r"\)\s*(?P<float>-?\d+\.\d+)\s*\(")

    txt = sys.stdin.read()
    ints = PAT1.findall(txt)
    floats = PAT2.findall(txt)

    print(len(ints))
    print(" ".join(ints))
    print(" ".join(floats)) 
    ```

    将脚本存储为 convert.py 并像这样运行它：

    ```
    python convert.py < mydata.dat > newdata.dat 
    ```

    我假设您的数据存储在`mydata.dat`. 新文件`newdata.dat`
    将如下所示：

    ```
    5
    251 168 1267 980 251
    -0.0110365 -0.0110365 0.0108601 0.0108601 -0.0110365 
    ```

    通过读取第一行中的整数，您可以轻松地使用 Fortran 进行解析，将整数和浮点数组分配给其中给定的大小，并使用两个读取语句读取两个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:14:11.400

我会用

```
do line = 1,nlines  !or just do and exit on end of file, it's up to you
    lower = (line-1)*items_per_line + 1
    upper = line*items_per_line
    read (unit,fmt='(999(tr1,i5,tr1,f11))') (a(i),b(i),i=lower,upper)
end do 
```

添加任何其他`read(unit,*)`以跳过适当的行。

如果字段宽度确实是固定的，从您的示例中可以看出。

# ios - Ipad App 照片保存在照片文件夹中

> ID：15133339
> 
> 赞同：0
> 
> 时间：2013-02-28T10:40:01.070
> 
> 标签：ios, ipad

我已经开发了 ipad 应用程序。在那我有下载照片选项。当我们点击下载按钮时，我需要将照片保存在 ipad Photos 文件夹中。任何人都可以请帮助我解决如何从 ipad 应用程序 yo ipad 设备相册保存照片。

谢谢，普拉巴斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:43:42.693

有一种最短的方法（在 ios 模拟器和 ios 设备上测试过）

1.  您可以使用此功能：

    UIImageWriteToSavedPhotosAlbum(UIImage *image, id completionTarget, SEL completionSelector, void *contextInfo);

如果要在图像保存完成时收到通知，则只需要 completionTarget、completionSelector 和 contextInfo，否则可以传入 nil。

如果您想将其保存到自定义相册中，您可以阅读我在以下位置找到的一个很好的教程

> [http://www.touch-code-magazine.com/ios5-saving-photos-in-custom-photo-album-category-for-download/](http://www.touch-code-magazine.com/ios5-saving-photos-in-custom-photo-album-category-for-download/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:42:01.387

首先添加`#import <QuartzCore/QuartzCore.h>`

```
-(void)buttonMethod:(UIButton *) Sender
{
                UIGraphicsBeginImageContext(self.imageView.frame.size);
                [self.imageView.layer renderInContext:UIGraphicsGetCurrentContext()];
                UIImage *attachimage = [[UIImage alloc]initWithData:[NSData data]];
                UIImage *viImage=UIGraphicsGetImageFromCurrentImageContext();
                UIGraphicsEndImageContext();
                attachimage = viImage;
                UIImageWriteToSavedPhotosAlbum(viImage, nil, nil, nil);
} 
```

# c - C Makefile 问题：“gcc：-lm：链接器输入文件未使用，因为链接未完成 mpicc -lm 3D-ELM.o -o 3D-ELM.exe”

> ID：15133343
> 
> 赞同：5
> 
> 时间：2013-02-28T10:40:06.770
> 
> 标签：c, makefile

我在使用 C Makefile 时遇到了一些问题。

以下是 Makefile 的内容：

```
PROJECT = 3D-ELM
MPICC = mpicc
CLAGS = -g -O3
LIBS = -lm
SRC = src_el
OBJECTS = $(PROJECT).o

$(PROJECT).exe : $(OBJECTS)
        $(MPICC) $(CFLAGS) $(LIBS) $(OBJECTS) -o $(PROJECT).exe

$(PROJECT).o : $(SRC)/$(PROJECT).c
        $(MPICC) $(CFLAGS) $(LIBS) -c $(SRC)/$(PROJECT).c

clean:
        rm -rf *o $(PROJECT) 
```

当我制作时，这是错误：

> gcc：-lm：链接器输入文件未使用，因为链接未完成

有谁知道出了什么问题？

提前谢谢了，

* * *

编辑：明白了。制作目标文件时，我不需要传递库... Doh！*刘海离开办公桌*

谢谢大家的帮助，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T10:53:38.033

问题来自makefile的这一部分：

```
$(PROJECT).o : $(SRC)/$(PROJECT).c
        $(MPICC) $(CFLAGS) $(LIBS) -c $(SRC)/$(PROJECT).c 
```

在这一步，您只调用编译器。该`-c`开关告诉编译器只编译为目标文件，链接器根本不参与。由于没有要链接的内容，因此该`$(LIBS)`部分是不必要的。

实际链接在以下阶段完成：

```
$(PROJECT).exe : $(OBJECTS)
        $(MPICC) $(CFLAGS) $(LIBS) $(OBJECTS) -o $(PROJECT).exe 
```

这是将各个目标文件与库合并在一起以生成可执行文件的地方。此时不会调用编译器本身，因为源文件已经转换为目标文件。

# java - 检查字符串中的每个字符是否属于给定的字符集（JAVA）

> ID：15133345
> 
> 赞同：1
> 
> 时间：2013-02-28T10:40:09.360
> 
> 标签：java

所以我需要创建一个方法 isValidDNA ，它的工作原理如下：

> 公共布尔 isValidDNA()
> 
> 如果 DNA 有效，即仅包含字母 A、T、C、G（大写）和这些字符中的至少一个，则返回 true。

我能想到的就是这个，这显然行不通：

```
 public boolean isValidDNA(){
    for (int i=0;i<dna.length();i++){
        if (dna.charAt(i)=='A' || dna.charAt(i)=='T' || dna.charAt(i)=='C' || dna.charAt(i)=='G' ){
            return true;
        }
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:44:19.163

您可以使用此正则表达式：-`[ATCG]+`在代码中，这可能如下所示：

```
public boolean isValidDNA(){
    return dna.matches("^[ATCG]+$")
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:43:34.433

您立即创建一个 return 语句，它将在第一次迭代期间退出并且只检查第一个字符。

您需要将此信息存储在布尔值中，并在检查整个字符串后将其返回：

```
public boolean isValidDNA(String dna){
  Boolean result = true;
  // Add an extra check for the "at least one character" thing.
  for (int i=0; i<dna.length(); i++){
    if (dna.charAt(i)!='A' && dna.charAt(i)!='T' && dna.charAt(i)!='C' && dna.charAt(i)!='G' ){
        result = false;
    }
  }
  return result;
} 
```

但是，您最好使用[正则表达式](http://www.vogella.com/articles/JavaRegularExpressions/article.html)来解决这些问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T10:43:54.323

试试这种方式：

```
public boolean isValidDNA(){
    boolean res = true;
    for (int i=0;i<dna.length();i++){
        if ((dna.charAt(i) != 'A') && (dna.charAt(i)!='T') && (dna.charAt(i)!='C') && (dna.charAt(i)!='G') ){
            res = false;
            break;  
        }
    }
    return res;
} 
```

如果您的出发点是 DNA 是有效的，那么测试它是否真的有效会容易得多。您只需要测试您的每个字符，`dna`并且可以在第一个不满足您的 if 语句的条目处停止。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T10:44:54.733

用你的方式，你几乎得到它。

现在，`true`如果你找到一个没问题的，你就会回来，只有`false`在一切都错了的时候才会回来。你可以否定你的`if`条件，`false`一旦发现有问题就返回，只有在一切正常的**情况**下才能返回`true`。

我将把编码部分留给你。

正如其他人指出的那样，正则表达式将是一个更清洁的解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T10:55:12.010

你可以试试这个实现。

首先声明一个常量：

```
private static final String bases = "ATCG"; 
```

然后在这样的方法中使用它：

```
public boolean isValidDNA() {
    boolean isValid = true;
    for (char c : dna.toCharArray()) {
        if (bases.indexOf(c) < 0) {
            isValid = false;
            break;
        }
    }
    return isValid;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-20T03:19:15.437

```
Scanner sc = new Scanner(System.in);
System.out.print("Enter a DNA sequence: ");
seq=sc.nextLine();    
    if(seq.matches(".*[^ATCG].*")){
        System.out.println("Not a valid sequence.");
        System.exit(0);
} 
```

此正则表达式有效，因此仅包含 A、C、T 或 G 且不包含其他字符、空格等的序列将继续

# java - Java Velruse 等效于 Open Identification (OpenId, Google, Facebook, Yahoo, ...)

> ID：15133346
> 
> 赞同：0
> 
> 时间：2013-02-28T10:40:10.577
> 
> 标签：java, openid, openid-selector

我一直在寻找一段时间，但只找到了与此目的相关的旧项目或不完整项目。

[Velruse](https://velruse.readthedocs.org)是用于识别的 Python 库，这要归功于 OpenId、Google 帐户、Facebook 连接等。我没有找到 Java 的等价物，但我想它可能存在我只是没有朝着好的方向寻找！

如果有人以前经历过这种情况，他可以分享他的知识。

* * *

我发现了什么：

[OpenID4Java](https://code.google.com/p/openid4java/)：似乎只适用于 openID

[JOpenID](https://code.google.com/p/jopenid/wiki/JOpenId?tm=6)：似乎只适用于 openId

[OpenId Selector](https://code.google.com/p/openid-selector/)：提供 openID 的 Javascript 客户端实现，可以与服务器端的以前的 java 库之一耦合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T09:23:05.157

您可以将[Velruse 用作服务](http://velruse.readthedocs.org/en/latest/usage.html#as-a-service)，无需了解 python。您只需要连接，velruse 就会为您创造奇迹:)

# java - java.lang.ClassCastException: org.hibernate.type.StringType 不能转换为 org.hibernate.type.VersionType

> ID：15133348
> 
> 赞同：8
> 
> 时间：2013-02-28T10:40:14.757
> 
> 标签：java, hibernate

我正在开发一个数据库连接器，以便从 Oracle 数据库中检索数据。我使用 Eclipse 中作为插件包含的 Hibernate 工具来生成 Hibernate 映射文件，因为我有很多类和表要映射。但是，当我运行应用程序时，我刚刚得到以下异常：

```
java.lang.ClassCastException: org.hibernate.type.StringType cannot be cast to org.hibernate.type.VersionType
    at org.hibernate.tuple.PropertyFactory.buildVersionProperty(PropertyFactory.java:107)
    at org.hibernate.tuple.entity.EntityMetamodel.<init>(EntityMetamodel.java:181)
    at org.hibernate.persister.entity.AbstractEntityPersister.<init>(AbstractEntityPersister.java:485)
    at org.hibernate.persister.entity.SingleTableEntityPersister.<init>(SingleTableEntityPersister.java:133)
    at org.hibernate.persister.PersisterFactory.createClassPersister(PersisterFactory.java:84)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:286)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1845)
    at eu.cartif.dwhconn.database.DBManager.checkDWHStatus(DBManager.java:57)
    at eu.cartif.dwhconn.database.DBManager.main(DBManager.java:24) 
```

我认为问题可能是 hbm 文件的属性类型：

```
<hibernate-mapping>
<class name="eu.cartif.dwhconn.database.Ifcactorrole" table="IFCACTORROLE">
    <id name="role" type="string">
        <column name="ROLE" length="50" />
        <generator class="assigned" />
    </id>
    <property name="userdefinedrole" type="string">
        <column name="USERDEFINEDROLE" />
    </property>
    <property name="description" type="string">
        <column name="DESCRIPTION" length="3000" />
    </property>
    <set name="ifcpersons" table="IFCPERSON" inverse="true" lazy="true" fetch="select">
        <key>
            <column name="ROLES" length="50" />
        </key>
        <one-to-many class="eu.cartif.dwhconn.database.Ifcperson" />
    </set>
    <set name="ifcpersonandorganizations" table="IFCPERSONANDORGANIZATION" inverse="true" lazy="true" fetch="select">
        <key>
            <column name="ROLES" length="50" />
        </key>
        <one-to-many class="eu.cartif.dwhconn.database.Ifcpersonandorganization" />
    </set>
</class>
</hibernate-mapping> 
```

但是，我不确定，如果这不是解决方案，我不想更改所有 hbms 中的所有类型。任何人都可以帮助我，请。

非常感谢您，祝您有美好的一天

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-03-03T09:55:03.337

就我而言，我从数据库生成实体，并且某些实体列名具有“版本”。此名称的生成器添加“@Version”注释，但此列类型为字符串 - 对于 @Version 注释不可接受

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-04-19T10:31:51.600

出现此类问题

*   如果在任何表中都有列名作为“VARCHAR”（字符串）类型的“版本”，则意味着在休眠中“属性”变为“版本”，“类型”变为“字符串”，如 -

    *在 .hbm.xml 文件中*

    ```
    <version name="xyz" type="string">
        <column name="xyz" length="30" not-null="true" />
    </version> 
    ```

*   如果特定属性缺少任何 getter 或 setter 方法。

*   如果*.hbm.xml*文件和*POJO*类文件不匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T12:54:55.100

我已经检查了好几次所有的映射类。最后，问题来自一个映射类，它的属性类型不正确...... :(谢谢您的回复

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T10:44:35.373

缺少长度字段

```
<property name="userdefinedrole" type="string">
    <column name="USERDEFINEDROLE" />
</property> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-12T19:01:24.520

我在使用古老的 hibernate3 软件时遇到了这个问题。

解决方案是这样的：在 hibernate3.5 之前，`StringType`是`NullableType`.

在hibernate 3.6中，这种关系就结束了。

因此，只能在休眠 3.5 之前`StringType`转换为 a `NullableType`，而从休眠 3.6 则不再如此。

最简单的解决方案是，现在距离未来还有几十年：切换回休眠 3.5。

# iphone - iPhone 5 和 iPhone 4 用户界面问题

> ID：15133351
> 
> 赞同：0
> 
> 时间：2013-02-28T10:40:25.760
> 
> 标签：iphone, ios, ios6

我正在从 Github ( [Link](https://i.stack.imgur.com/LIi6y.png) ) 制作一个类似 Facebook 菜单的项目。因为它不支持 iPhone5 屏幕，所以我重新创建了项目，但 iPhone 3.5 英寸屏幕存在一些问题。
在 iPhone 5 屏幕（即 4 英寸屏幕）上也可以正常工作。
请参阅随附的屏幕截图。
有人知道出了什么问题吗？

![在此处输入图像描述](../Images/df301b34b67a4e87e4b0605e0626ab78.png) ![在此处输入图像描述](../Images/65a7e46f5c799325df4543a279d30906.png)

![在此处输入图像描述](../Images/6a78ad218e1b97df00fb58a8c2a7ad84.png) ![在此处输入图像描述](../Images/167fb131a494f2cae3881f5313423d4e.png)

虽然您可以看到上面的屏幕截图，但第一个和第二个屏幕截图是 iPhone 3.5 英寸屏幕，两个屏幕的问题是我在底部看到绿色表格视图。而 iPhone 4 英寸屏幕的第 3 和第 4 则没有问题。任何帮助将不胜感激

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:43:00.347

尝试关闭自动布局（如果您使用的是 Interface Builder）。

# ios - 了解 og:url

> ID：15133355
> 
> 赞同：3
> 
> 时间：2013-02-28T10:40:34.603
> 
> 标签：ios, facebook-opengraph

我正在完成 iOS 的 Facebook 教程，在使用 Publish Open Graph Story 进入最后一部分时遇到了麻烦。我已经按照我的理解完成了所有设置。当我尝试使用对象调试器进行测试时，我得到“缺少必需的属性：'og:url' 属性是必需的，但不存在。” 有人可以帮我解释一下这个标签以及它应该如何设置吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T13:59:43.233

看看[ogp.me](http://ogp.me/)他们将 og:url 定义为：

> og:url - 对象的规范 URL，将在图中用作其永久 ID，例如“ [http://www.imdb.com/title/tt0117500/](http://www.imdb.com/title/tt0117500/) ”。

基本上正如 facebook 的 jeff sherlock 在这篇文章中解释的那样：[https ://stackoverflow.com/a/7831012/228741](https://stackoverflow.com/a/7831012/228741)

当您提供操作的网址（包含元标记的网址）时，facebook 会忽略该页面上的所有内容（不呈现它）。但它会呈现您在 og:url 中给出的任何内容。

我通常做的是让我的 og:url 使用参数调用同一页面。所以facebook为我呈现了相同的页面。如果您想呈现其他页面，请在 og:url 中提供链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T07:40:31.447

这在该部分中设置为元标记`<head>`。

例子 ：

```
<meta property="og:url" content="your url"> 
```

# ios - 在 ios 中使用人脸检测标记图像中的名称

> ID：15133357
> 
> 赞同：0
> 
> 时间：2013-02-28T10:40:41.813
> 
> 标签：ios, xcode

在 Facebook 中，我们可以选择在照片中标记名称。同样有任何选项可以在 ios 图像中标记名称。请帮助

# ruby-on-rails - 如何在 Mac OS 中浏览 MongoDB 中的数据？

> ID：15133370
> 
> 赞同：0
> 
> 时间：2013-02-28T10:41:09.677
> 
> 标签：ruby-on-rails, macos, mongodb, mongoid

当我使用 PostgreSQL 时，我习惯于使用终端来浏览存储在 DB 表中的数据。

MongoDB有没有类似的方法？我已经使用[这个主题](https://stackoverflow.com/questions/9204296/how-to-check-if-mongodb-is-properly-installed)在 Mac 上安装 MongoDB。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:19:51.277

MongoDB bin 目录包含一个名为“mongo”的可执行文件，它是一个交互式 shell（类似于 PostgreSQL 中的“psql”）

[您可以在此处](http://docs.mongodb.org/manual/mongo/)阅读有关如何使用它的更多信息。

要开始，您可以键入

```
> help 
```

要切换到特定数据库，只需键入：

```
> use db-name
      ^^^^^^^ replace with your db name.

> db.help()
> db.collectionName.help()
     ^^^^^^^^^^^^^^ replace with your collection name 
```

您可以在任何机器上执行此操作，而不仅仅是运行一个 mongod，然后您可以通过以下方式连接：

```
mongo hostname:port/dbname 
```

例如

```
mongo myMongoDBserver:27017/foobardb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:49:53.933

command 'mongo' will open mongo shell for you, there you can use database commands

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:22:56.007

首先`mongod`在终端选项卡中启动进程。在其他终端选项卡或窗口中只需启动`mongo`.

`mongod`是 mongo 守护进程，它建立连接并监听请求。`mongo`是 javascript shell，您可以在其中进行交互式 mongodb 查询。

最好在他的答案中提供的链接@Asya Kamsky 中解释休息。

# ios - 使用 Team Provisioning 配置文件的 Ad-Hoc 分发

> ID：15133372
> 
> 赞同：1
> 
> 时间：2013-02-28T10:41:11.860
> 
> 标签：ios, provisioning-profile, ios-provisioning

根据 Apple 文档，必须创建和使用分发证书和分发配置文件来分发临时应用程序。

> “要使用 ad hoc 分发，请创建一个分发配置文件，将 Ad Hoc 指定为分发方法，并包含最多 100 个授权运行该应用程序的设备的列表。”

[http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandDownloadingaDistributionProvisioningProfile/CreatingandDownloadingaDistributionProvisioningProfile.html](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandDownloadingaDistributionProvisioningProfile/CreatingandDownloadingaDistributionProvisioningProfile.html)

好吧，我发现这不是必需的。您可以使用开发人员证书和团队配置文件轻松分发临时应用程序。使用团队证明是一个坏主意吗？个人资料，只是开发人员证书？

我为什么要创建一个临时 dist。如果只使用团队证明更容易，则配置文件。轮廓？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:45:33.277

分发版本具有无法调试的属性（这就是`get-task-allow`权利 plist 中的属性的用途）。这意味着其他人无法将调试器附加到您的代码并获得不希望的结果。

如果您希望允许远程用户通过 App Store（Apple 或企业）下载应用程序，则需要分发构建。

# asp.net-mvc-4 - 如何在 MVC4 Razor 中提交后获取所选 DropDownList vale 的 ID

> ID：15133374
> 
> 赞同：0
> 
> 时间：2013-02-28T10:41:19.397
> 
> 标签：asp.net-mvc-4

```
 'public string Country;
    public List<SelectListItem> DdlCountryList { get; set; }
    public string State;
    public List<SelectListItem> DdlStateList { get; set; }
    private List<SelectListItem> _listItems;
    public string District = "District";
    public List<SelectListItem> DdlDistrictList { get; set; }
    public string Village = "Village";
    public IEnumerable<SelectListItem> DdlVillageList { get; set; }
    public string Crop = "Crop";
    public IEnumerable<SelectListItem> DdlCropList { get; set; }
    public string Year = "Year";
    public IEnumerable<SelectListItem> DdlYearList { get; set; }
    public string ProductionCode = "ProductionCode";
    public IEnumerable<SelectListItem> DdlProductionList { get; set; }
    public string Season = "Season";
    public IEnumerable<SelectListItem> DdlSeasonList { get; set; }'

> Tha Above is My Model GlobalSearchModel
> on load Iam filling Values,.. and By using Jquery change function i am calling Values how    to get the Id's of Selected DropDownValues

public ActionResult Index()
    {

        GlobalSearchModel objGlobalSearchModel = new GlobalSearchModel();
        return View(objGlobalSearchModel);
    } 
```

> 这是我的控制器的 Action 方法，我在 GlobalSearchModel() 的构造函数上填充 DropDownList 的默认值；像“选择”

```
[HttpPost]
    public ActionResult FilterMapDetails(GlobalSearchModel objGlobalSearchModel)
    {
        //Logic GoesHere then i will return values

        return View("Index", objGlobalSearchModel);

    } 
```

> 以上是我提交时调用的 PostMethod，在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:46:53.320

在您的视图模型中，您应该为每个下拉列表设置相应的属性，这些下拉列表将绑定到 DropDownList 并保存选定的值。

例如：

```
public string SelectedCountry { get; set; }
public List<SelectListItem> DdlCountryList { get; set; } 
```

然后在你的视野内：

```
@Html.DropDownListFor(x => x.SelectedCountry, Model.DdlCountryList) 
```

最后在您的发布操作中，只需使用`SelectedCountry`模型中的属性：

```
[HttpPost]
public ActionResult FilterMapDetails(GlobalSearchModel objGlobalSearchModel)
{
    // objGlobalSearchModel.SelectedCountry will contain the selected value

    return View("Index", objGlobalSearchModel);
} 
```

# c# - 如何测试 web.config 中的自定义配置部分？

> ID：15133379
> 
> 赞同：3
> 
> 时间：2013-02-28T10:41:27.223
> 
> 标签：c#, .net, asp.net-mvc-4, asp.net-web-api

我的 MVC Web API 应用程序有一个自定义配置部分，应用程序将其用于配置值。

我想测试填充在 web.config 文件中的自定义配置部分值是否正确并且`GetSection`能够正确读取它们。有没有办法在不为 nunit 创建另一个具有完全相同值的配置文件的情况下对此进行测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:55:14.927

> 有没有办法在不为 nunit 创建另一个具有完全相同值的配置文件的情况下对此进行测试？

是的，您可以按以下方式执行此操作：

```
Configuration OpenWebConfiguration(string configurationFilePath)
{
    var configurationFileInfo = new FileInfo(configurationFilePath);
    var vdm = new VirtualDirectoryMapping(configurationFileInfo.DirectoryName, true, configurationFileInfo.Name);
    var wcfm = new WebConfigurationFileMap();
    wcfm.VirtualDirectories.Add("/", vdm);
    return WebConfigurationManager.OpenMappedWebConfiguration(wcfm, "/");
}

...
var c = OpenWebConfiguration(pathToWebConfigFile);
var section = c.GetSection(sectionName);
... etc ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:43:20.690

> 有没有办法在不为 nunit 创建另一个具有完全相同值的配置文件的情况下对此进行测试？

不，没有。您需要有一个配置文件才能测试自定义部分。还有什么比单元测试项目更好的地方呢？这似乎是一个完美的地方。

例如，您的解决方案中可能有以下项目：

*   MyApp.Configuration（包含自定义部分和元素）
*   MyApp.Configuration.Tests（包含一个`app.config`允许测试您的自定义配置部分的文件）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T13:00:24.953

除了接受的答案之外，以防万一您正在寻找有关如何避免将单独的配置文件添加到您的测试项目然后将主配置文件与您的测试文件同步的答案，[**这里有一个链接**](http://www.jaylee.org/post/2012/09/26/VS2012-Create-multiple-file-links-with-a-drag-and-drop-between-two-projects.aspx)描述了一种简洁的方式将原始 app/web.config 添加为测试项目中的链接。您实际上是在处理一个配置文件。 **[此博客](http://www.cookcomputing.com/blog/archives/000589.html)**讨论了使用[TestConigurationSection](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testconfiguration.configurationsection.aspx) 和 ExeConfigurationFileMap 的替代方法（您可以使用等效的[WebConfigurationFileMap](http://msdn.microsoft.com/en-us/library/system.web.configuration.webconfigurationfilemap%28v=vs.110%29.aspx)）

# python - 安装 Python 映像库 (PIL) 的问题

> ID：15133387
> 
> 赞同：0
> 
> 时间：2013-02-28T10:41:55.737
> 
> 标签：python, installation, python-imaging-library

我正在尝试安装 Python Imaging Library，在 Mac OS X 10.6.8 Python 版本 2.6 上运行

一切都很顺利，直到我跑了

```
python setup.py build_ext -i 
```

我在终端上收到以下错误

```
unable to execute gcc-4.2: No such file or directory
error: command 'gcc-4.2' failed with exit status 1 
```

- 如果我需要在运行此安装之前安装一些其他库，您能否建议？ - - 非常感谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-28T11:07:01.133

看起来你没有安装 GCC。在终端中验证类型 gcc --version。

[尝试从这里GCC 包](https://github.com/kennethreitz/osx-gcc-installer)安装 10.6 的 gcc 包

安装后尝试使用 PIP 安装 PIL

# android - 查明是否启用了省电模式 - Android SDK

> ID：15133392
> 
> 赞同：10
> 
> 时间：2013-02-28T10:42:03.507
> 
> 标签：android

我有一个在 Android 上运行的应用程序，它只使用一个 webview 来显示一个移动 web 应用程序，并且在某些时候使用设备的 GPS 来获取他们的位置。

我有一个自定义的 ChromeWebClient 等，它很好地获得了它们的位置，除了在启用省电模式的设备上？SDK/API 中有没有让我能够确定用户是否启用了此功能并相应地建议他们？我在文档中找不到任何东西，所以我假设不值得但值得一试，

干杯，

李

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T08:19:04.577

*重温评论后*

根据我的经验，三星和 HTC 都是以最不可预测的方式修改 Android 操作系统的制造商之一。他们添加了新的功能和模式，例如 4G 切换启动器小部件和“省电模式”。他们修改了记录在案的 SDK 方法的权限要求，即在三星设备上打开蓝牙，您的应用程序需要拥有额外的`android.permission.BLUETOOTH`权限，而普通的 Android 只需要`android.permission.BLUETOOTH_ADMIN`. 还有更多。

长话短说，正如@RaghavSood 所指出的，“省电模式”不是官方的 AOSP 功能，也无法通过官方 SDK 检测到它。不过，有一种可能的方法可以解决它。我相信您的应用程序很可能在省电模式下行为不端，因为此模式会关闭 GPS。您可以通过在设置中配置省电模式来禁用 GPS 禁用来确认这一点（无法更好地表达这一点，抱歉） -[来自 google 的第一个链接和步骤](http://www.techrepublic.com/blog/tablets/let-power-saving-mode-keep-your-battery-from-draining-too-quickly/1334)。然后测试应用程序。它有效吗？如果是，那么您就是问题的根源，现在您的工作是让用户知道您的应用在没有 GPS 的情况下将无法运行。您可以将一些代码放入您的应用程序以检测是否启用了 GPS 服务，如果未启用则显示警报对话框。您的活动中的代码可能如下所示：

```
LocationManager lm = getSystemService(Context.LOCATION_SERVICE);
if(!lm.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
    //Show a notification prompting user to switch on GPS.
} 
```

您可以更加精细，让您的应用程序检测设备制造商以在所有三星设备上显示自定义消息。

# video - FFmpeg 的 AAC（“libfaac”）编解码器选项？

> ID：15133393
> 
> 赞同：0
> 
> 时间：2013-02-28T10:42:07.170
> 
> 标签：video, ffmpeg, video-processing, video-encoding

对于 AAC（“libfaac”）音频编码器，如何通过 FFmpeg 的命令将“MPEG 版本”指定为“MPEG-4”或“MPEG-2”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:35:34.497

使用 libfaac 时，FFmpeg 将 MPEG 版本硬编码为 MPEG-4。`libfaac.c`您可以在第 118 行中观察到这一点。

```
faac_cfg->mpegVersion = MPEG4; 
```

如果您想更改它，您将下载 FFmpeg 源代码，修改此行以使用`MPEG2`，然后使用适当的配置（包括`--enable-libfaac`）重新编译 FFmpeg。这可以工作并生成一个可播放的文件，但是您现在显然必须使用比特流过滤器来为 MPEG-4 容器创建一个有效的比特流：

```
ffmpeg -i in.wav -c:a libfaac -absf aac_adtstoasc out.m4a 
```

如果您直接使用 FAAC API，您当然可以根据需要更改此参数。

* * *

理想情况下，应该为 FFmpeg 提交一个补丁，以包含一个允许您手动设置此选项的新选项，但鉴于 MPEG-4 被选为硬编码默认值，我认为没有令人信服的理由来实现这一点。

# php - 从数据库查询和显示帖子（Wordpress）

> ID：15133395
> 
> 赞同：0
> 
> 时间：2013-02-28T10:42:09.290
> 
> 标签：php, sql, wordpress

我的问题：我想要我的 wordpress 博客的存档页面。找到了足够的模板，但我想自己做。它应该看起来如何：我有一些带有年份的选项卡，每年都有一个带有月份的列表，每个月都有一个带有每个帖子的子列表。MySQL级别我有点......初学者！我设法查询了帖子，但我不知道如何在列表下显示它们。

“foreach”让我头疼！:(

我的代码

```
global $wpdb;
$posts = $wpdb ->get_results("
                SELECT 
                     post_title as post, year(post_date) as year
                FROM wp_posts
                ORDER BY year");

foreach($posts as $post)
    $post=$post_title;

echo $post; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:49:04.307

您的代码发生的情况是您在`$post`每次迭代 post 对象时进行设置。那么会发生什么，手动编写，是这样的：`$post = "title1"; $post="title2";`等等。然后在最后你回显它只会显示“title100”。

如果您将代码更改为：

```
foreach($posts as $post)
{
    $post=$post_title;
    echo $post;
} 
```

它会设置`$post = "title1"; echo $post;`哪个会给你title1、title2等。

您也可以只删除 $post 的变量声明。

```
foreach($posts as $post)
    echo $post_title; 
```

这就是 foreach 循环的理论，现在你似乎不知`$post_title`从何而来。也许它应该更多`$post->post;`或可能`$post['post'];`虽然我不完全知道 wordpress 是如何做到这一点的。

编辑：我检查`$wpdb`了一下，虽然它仍然有点模糊，我认为应该是`$post['post'];`

# xml - 在 xslt 节点中除法并选择值

> ID：15133397
> 
> 赞同：0
> 
> 时间：2013-02-28T10:42:11.590
> 
> 标签：xml, xslt

我有带有节点的 xml 文件

```
<air:AirAvailInfo ProviderCode="1G">
  <air:BookingCodeInfo BookingCounts="C4|Z4|I4|D4|Y4|W4|Q4|E4|G4|T4|N4|B4|X4|U4|O4|V4|H4|L4|K4"/>
</air:AirAvailInfo> 
```

它是 xslt 1.0 中的代码。如何仅更改节点中的一个扇区？我怎样才能做到这一点？

```
<info>
  <code>H</code>
  <status>4</status>
</info> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:48:17.537

我的回答假设如下：

*   BookingCounts 中列表的所有元素都是由 LETTER 和 NUMBER 串联而成的。数字的长度始终为 1。

*   列表中的所有元素都是唯一的，其中唯一关系仅由字母的唯一性定义。所以我们无法在同一个列表中找到元素 H2 H5。

*   OP 只需要检索列表中的 H 元素。

遵循这些假设的解决方案可能是：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:air="http://airnamespace.com" version="1.0">
    <xsl:output method="xml" indent="yes"/>

    <!-- Match the attribute BookingCounts inside air:BookingCodeInfo -->
    <xsl:template match="air:BookingCodeInfo">
        <info>
            <code>H</code>
            <status><xsl:value-of select="substring(substring-after(@BookingCounts, 'H'), 1, 1)" /></status>
        </info>
    </xsl:template>

</xsl:stylesheet> 
```

如果其中一些假设不正确，请告诉我，我将更改代码。

# python - 如何在 MYSQL 中插入多个值？

> ID：15133401
> 
> 赞同：1
> 
> 时间：2013-02-28T10:42:21.260
> 
> 标签：python, mysql

我有以下查询

```
INSERT INTO `min01_aggregated_data_800` (`datenum`,`Timestamp`,`QFlag_R6_WYaw`)  VALUES ('734970.002777778','2012-04-11 00:04:00.000','989898') ON DUPLICATE KEY UPDATE `datenum`=VALUES(`datenum`);
INSERT INTO `min01_aggregated_data_100` (`datenum`,`Timestamp`,`QFlag_R6_WYaw`)  VALUES ('734970.002777778','2012-04-11 00:04:00.000','989898') ON DUPLICATE KEY UPDATE `datenum`=VALUES(`datenum`);
INSERT INTO `min01_aggregated_data_300` (`datenum`,`Timestamp`,`QFlag_R6_WYaw`)  VALUES ('734970.002777778','2012-04-11 00:04:00.000','989898') ON DUPLICATE KEY UPDATE `datenum`=VALUES(`datenum`); 
```

我正在使用`mysql.connector`包将数据插入 MySQL

```
self.db = mysql.connector.Connect( host = self.m_host, user = self.m_user, password = self.m_passwd, \
        database = self.m_db, port = int( self.m_port ) )
self.con = self.db.cursor( cursor )

self.con.execute( query ) 
self.db.commit()  
self.db.close()
self.con.close() 
```

但我收到以下错误`Use multi=True when executing multiple statements`

我尝试使用`multi=True`在这种情况下我没有得到任何异常，但数据不会被插入到 MySQL 中。如何插入多行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:44:06.170

您有三个单独的查询，因此每个查询都应单独运行，即：

```
self.con.execute(query1)
self.con.execute(query2)
self.con.execute(query3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:48:11.963

我看到三个选项：

1.  将每个查询分别发送到数据库：

    ```
    [...]
    self.con.execute(query1)
    self.con.execute(query2)
    self.con.execute(query3)
    [...] 
    ```

2.  [已删除，因为它不适用于此处]

3.  但是，我对此不是很熟悉`multi=True`；可能有一个解决方案可以`self.con.nextset()`反复调用。根据文档，这仅适用于多个结果集，但也许在多查询请求中也需要它。

# jquery - jQuery 移动样式未应用于动态加载的内容

> ID：15133408
> 
> 赞同：1
> 
> 时间：2013-02-28T10:42:41.567
> 
> 标签：jquery, cordova, jquery-mobile, mobile-application

我有 jQuery 移动应用程序，当用户成功登录时，我必须显示通过 Ajax 和 json 动态解析加载的多页模板内容。所以有两个问题

1.这些方法是否正确在文档就绪功能上调用 ajax 以生成动态内容。

2.当内容被动态生成时，jQuery mobile Styles 不会出现。

这是我的代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
    href="http://jquerymobile.com/demos/1.3.0-beta.1/css/themes/default/jquery.mobile-1.3.0-beta.1.css" />
<script src="cordova-2.4.0.js"></script>
<script src="js/jquery-1.8.2.min.js"></script>
<script src="js/jquery.mobile-1.3.0.min.js"></script>
<script>
$(document).ready(function() {
        $
                .ajax({
                    url : "demourl.com",
                    type : "GET",
                    success : function(data) {
                        var msgData = $.parseJSON(data);                

                            $("<div data-role='page'>").appendTo("#pageData")
                                    .trigger("create");
                            $("<div data-role='header'>").appendTo("#pageData")
                                    .trigger("create");
                            $("<h1>Page Title</h1>").appendTo("#pageData")
                                    .trigger("create");
                            $("<div>").appendTo("#pageData").trigger("create");
                            $("<div>").appendTo("#pageData").trigger("create");                     

                    }
                });

    });
</script>
<title>Message list</title>
</head>
<body>

    <div id="pageData"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:14:56.873

不幸的是，这行不通。

jQuery Mobile 至少需要一个预定义的页面才能正常工作。

无论您是使用 trigger('create') 还是 trigger('pagecreate') 来增强新页面标记，除非至少有一个常规 jQM 页面，否则这些功能都会失败。

但是你可以作弊，而不是让 jQM 增强你的第一个动态页面，你自己做：http: [//jsfiddle.net/Gajotres/smsnP/](http://jsfiddle.net/Gajotres/smsnP/)

```
$(document).ready(function() {
    $('<div id="index" data-role="page" data-url="index" tabindex="0" class="ui-page ui-body-c ui-page-active" style="min-height: 386px;"><div data-role="header" class="ui-header ui-bar-a" role="banner"><h3 class="ui-title" role="heading" aria-level="1">First Page</h3></div></div>').appendTo("body");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:49:30.823

尝试在您的页面上执行此操作：

```
 $('#pageData').page('refresh', true); 
```

它应该触发元素以呈现 jquery 移动样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:25:45.767

试试这个，它对我有用：
-首先，使用 ajax ($.ajax, $.post,..) 加载您需要的
数据 - 收到数据后，加载 jquery 移动脚本

此代码对我有用：

```
<head>
  <link rel="stylesheet" href="css/jquery.mobile-1.2.0.css" />
  <link rel="stylesheet" href="css/jqm-docs.css" />
  <script src="js/jquery.js"></script>
  <script>
  $(document).ready(function() {
     $.post(url,
         {param: var},
         function(data){
            if( data.success )
            {
               $("#total_marcatges").append(data.total);
               $("#marcatges").append(data.marcatges);
               $.getScript('js/jquery.mobile-1.2.0.js', function() {
                   $("#sortir span span.ui-btn-text").append("&nbsp;&nbsp;");
               });
            }else
            {
               alert("error");
            }
        },
        "json"
); 
```

之后，为我应用了 jquery 移动样式

# wcf - 将新对象添加到域数据源

> ID：15133415
> 
> 赞同：0
> 
> 时间：2013-02-28T10:42:54.780
> 
> 标签：wcf, silverlight, domaindatasource

它让我疯狂。我正在使用 Silverlight 5 业务应用程序并使用 WCF Ria 服务（域数据源）。在一个简单的 ChildControl 中，我加载了定义的（参见下面的代码）域数据源“ddsTerminKonfiguration”。查询方法返回一个通用的 IQueryable<TerminKonfiguration> 列表。如果此列表没有项目（...DataView.Count == 0），我想添加一个“TerminKonfiguration”的新对象。当我尝试执行 ddsTerminKonfiguration.DataView.Add(new TerminKonfiguration()); 我遇到了一个错误“这个 ICollectionView 不支持'添加'”（我只知道德语错误消息......所以我希望每个人都能理解我的翻译:-D）。该项目中的可比代码片段（由其他开发人员编写）工作正常......我不知道如何解决这个问题。

有人对我的问题有想法或解决方案吗？

我的域数据源...

```
<riaControls:DomainDataSource Name="ddsTerminKonfiguration"
                              Width="0"
                              Height="0"
                              AutoLoad="False"
                              d:DesignData="{d:DesignInstance my1:TerminKonfiguration, CreateList=true}"
                              LoadedData="ddsTerminKonfiguration_LoadedData"
                              SubmittedChanges="ddsTerminKonfiguration_SubmittedChanges"
                              QueryName="GetTerminKonfigurationQuery">
    <riaControls:DomainDataSource.DomainContext>
        <my:RRPDomainContext />
    </riaControls:DomainDataSource.DomainContext>
    <riaControls:DomainDataSource.QueryParameters>
        <riaControls:Parameter ParameterName="param01" />
        <riaControls:Parameter ParameterName="param02" />
        <riaControls:Parameter ParameterName="param03" />
        <riaControls:Parameter ParameterName="param04" />
    </riaControls:DomainDataSource.QueryParameters>
</riaControls:DomainDataSource> 
```

命名空间“my”引用“Project”.Web.Services，“my1”引用“Project”.Web.Models。

查询方法...

```
 public IQueryable<TerminKonfiguration> GetTerminKonfiguration(string param01, string param02, int param03, int param04) {
        return this.ObjectContext.TerminKonfiguration.Where(d => (d.MandantenNr == param01) && (d.WorkflowNr == param02) && (d.WfAufgabeId == param03) && (d.WfAufgabeIdGlobal == param04));
    } 
```

片段，我尝试将新对象添加到 DataView ...

```
if (this.ddsTerminKonfiguration.DataView.Count == 0) {
    TerminKonfiguration tmpConfig = new TerminKonfiguration();
    /*
        define the new object
    */

    this.ddsTerminKonfiguration.DataView.Add(tmpConfig); // problematic line
}

this.ddsTerminKonfiguration.SubmitChanges(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:56:18.830

DataView 是一个DataView 这就是原因。DataView 是数据的视图。

使用数据源，您可以过滤订单等，然后您会看到对 DataView 的影响。

```
 this.ddsTerminKonfiguration.DataView.Add is not a valid operation. 
```

[http://msdn.microsoft.com/en-us/library/ee707363(v=vs.91).aspx](http://msdn.microsoft.com/en-us/library/ee707363(v=vs.91).aspx)

基本用法是

```
<Grid x:Name="LayoutRoot" Background="White">
<riaControls:DomainDataSource x:Name="source" QueryName="GetProductsByColor" AutoLoad="true">
    <riaControls:DomainDataSource.DomainContext>
        <domain:ProductDomainContext />
    </riaControls:DomainDataSource.DomainContext>
    <riaControls:DomainDataSource.QueryParameters>
        <riaData:Parameter ParameterName="color" Value="Black" />
    </riaControls:DomainDataSource.QueryParameters>
</riaControls:DomainDataSource>

 <data:DataGrid ItemsSource="{Binding Data, ElementName=source}" />

  </Grid> 
```

如您所见，DataGrid 绑定到 Data 而不是 DataView。

```
{Binding Data, ElementName=source}" 
```

# linux - sed 两个模式搜索并在第二个模式的最后一次出现后追加行

> ID：15133419
> 
> 赞同：2
> 
> 时间：2013-02-28T10:43:07.557
> 
> 标签：linux, unix, sed, awk, grep

`sed`在过去的两天里，以下问题让我很头疼。

我有以下文件*（iptables）*：

```
someline

someline

*filter

:INPUT ACCEPT [0:0]

:FORWARD ACCEPT [0:0]

:OUTPUT ACCEPT [0:0]

someline 
```

我想用来`sed`搜索模式`*filter`，如果匹配，则搜索第二个模式`[0:0]`，然后在第二个模式的最后一次出现之后添加一行。

这将（理想情况下）导致：

```
someline

someline

*filter

:INPUT ACCEPT [0:0]

:FORWARD ACCEPT [0:0]

:OUTPUT ACCEPT [0:0]

TESTLINEADDEDBYSED

someline 
```

这里的论坛给了我一个好的开始，但我就是无法破解这个特定的问题。

到目前为止，我有以下解决方案，但它在第一次出现第二个模式之后添加了该行`[0:0]`：

```
sed -n '/\*filter/{:a;N;/^\n/s/^\n//;/\[0:0\]/{!ba;p;s/.*/TESTLINEADDEDBYSED/;};ba}; p' file 
```

我假设`.*`在第二个分支中我会消耗（阅读：跳过？）第一次出现`[0:0]`？我在这里有什么误解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:08:19.347

这个怎么样：

```
fgrep -q '*filter' file && tac file|awk '!f&&/\[0:0\]/{$0="FOO\n\n"$0;f=1}1'|tac
someline

someline

*filter

:INPUT ACCEPT [0:0]

:FORWARD ACCEPT [0:0]

:OUTPUT ACCEPT [0:0]

FOO

someline 
```

首先`fgrep`是固定字符串`*filter`，`file`如果找到，则`FOO`在最后一行包含`[0:0]`. `tac`用于反向读取文件，因此您无需读取文件两次或缓冲即可找到最后一次出现，因为更容易找到第一次出现。

* * *

如果文件的大小不是很大，则使用两遍方法`awk`：

```
awk 'FNR==NR{if($0~/*filter/)a=1;if(a&&$0~/\[0:0\]/)b=NR;next}FNR==b{$0=$0"\n\nFOO"}1' file file

someline

someline

*filter

:INPUT ACCEPT [0:0]

:FORWARD ACCEPT [0:0]

:OUTPUT ACCEPT [0:0]

FOO

someline 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:02:48.777

略有不同的方法，因为`sed`换行很糟糕......

基本上，我将所有内容放在一行中，用 a 替换换行符，`@`使用贪婪匹配进行替换，最后将换行符重新放回......

```
$ cat input | tr '\n' '@' | sed s'/\(\*filter.*\[0:0\]\)/@@\1@TESTLINEADDEDBYSED/' | tr '@' '\n'
someline

someline

*filter

:INPUT ACCEPT [0:0]

:FORWARD ACCEPT [0:0]

:OUTPUT ACCEPT [0:0]

TESTLINEADDEDBYSED

someline 
```

如果文件中的行数很大，这是一种不好的方法！

# mapreduce - MapReduce - 发出文档中出现频率最高的 20% 的单词

> ID：15133420
> 
> 赞同：0
> 
> 时间：2013-02-28T10:43:08.193
> 
> 标签：mapreduce

[我在这里](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/iw//archive/mapreduce-osdi04.pdf)阅读了有关 MapReduce的信息，他们给出的第一个示例是计算文档中每个单词的出现次数。我想知道，假设你想获得文档中出现频率最高的 20% 的单词，你怎么能做到这一点？这似乎不自然，因为集群中的每个节点都看不到整个文件，只能看到单个单词所有出现的列表。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:27:44.533

是的，您当然可以做到这一点：通过强制 hadoop 只有一个 reducer（尽管使用这种方法，您会失去分布式计算本身的优势）。

这可以按如下方式完成：

```
// Configuring mapred to have just one reducer
conf.setInt("mapred.tasktracker.reduce.tasks.maximum", 1);
conf.setInt("mapred.reduce.tasks", 1); 
```

现在，由于您只有一个减速器，您可以跟踪前 20% 并将它们排放到`run()`减速器`cleanup()`中。请参阅[此处](https://stackoverflow.com/questions/15048013/sharing-data-between-master-and-reduce/15073701#15073701)了解更多信息。

# ruby-on-rails - 使用 simple_form，如何对多个输入进行分组并仍然具有正确的验证错误处理

> ID：15133438
> 
> 赞同：3
> 
> 时间：2013-02-28T10:44:00.923
> 
> 标签：ruby-on-rails, forms, simple-form

我经常遇到需要多个表单元素出现在一个地方的情况。例如：

```
<%= simple_form_for @user do |f| %>
  <%= f.input :active_from do %>
    <%= f.input_field :active_from %>
    to
    <%= f.input_field :active_to %>
  <% end %>
<% end %> 
```

这就是我目前的做法。但是这个解决方案有两个问题：

1.  对于包装输入，要传递哪个字段名称？在这个例子中，我只拿了第一个，但实际上我想通过两个（即`f.input [:active_from, :active_to] do`）。但是，如果问题 2) 可以通过其他方式解决，这更像是一种装饰性的事情。

2.  比如说，这两个字段都是必需的，如何获取这两个字段的错误消息？不知何故，父元素需要知道至少有一个子输入有错误，并且必须有某种显示消息的方式。也许是这样的：

    ```
    <%= simple_form_for @user do |f| %>
      <%= f.input :active_from do %>
        <%= f.input_field :active_from %>
        <%= f.errors_for :active_from %>
        to
        <%= f.input_field :active_to %>
        <%= f.errors_for :active_to %>
      <% end %>
    <% end %> 
    ```

# ios - UIBarButtonItem 在按钮旁边注册点击事件，而不是在按钮上

> ID：15133440
> 
> 赞同：0
> 
> 时间：2013-02-28T10:44:01.917
> 
> 标签：ios, objective-c, xcode, ipad, uibarbuttonitem

我得到了弹出窗口，在我的应用程序中的 2 个位置使用，一次在导航控制器中，一次在没有导航控制器的情况下，我在 uitoolbar （选择按钮）中有一个按钮，但是这个按钮由于某种原因有它自己的生命

导航控制器中的那个工作正常。

但是没有导航控制器调用的那个会调整这个弹出窗口的大小，所以我在代码中调整了它的大小，比如

```
 - (void)showModal:(UIViewController *)controller
    {
        [controller setModalPresentationStyle:UIModalPresentationFormSheet];
        [self presentViewController:controller animated:NO completion:nil]; //Method used without navigationcontroller
        [controller.view setBounds:CGRectMake(0,0, 600, 748)]; //resize => button doesn't work at all
        //[controller.view setFrame:CGRectMake(0, 0, 600, 748)]; //resize => button only registers click event left from the actual button
        //[[NSNotificationCenter defaultCenter] postNotificationName:@"show modal" object:controller]; // Method used within navigationcontroller
    } 
```

我一直在谷歌上寻找，但我找不到关于这个问题的任何东西。希望我在这里有更多的运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:03:19.230

解决这个问题的简单方法可能是将它放在 UINavigationController 中并使用它来弹出。然后你不必使用 UIToolBar。

```
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:viewControllerToPopUp];
    [viewController setModalPresentationStyle:UIModalPresentationFormSheet];
    [self presentModalViewController:navController animated:YES]; 
```

这样，您呈现的 viewController 将保持简单，并且您已经知道该按钮在作为导航控制器时可以工作:)

# algorithm - 同步，通过广播传递锁

> ID：15133442
> 
> 赞同：1
> 
> 时间：2013-02-28T10:44:05.017
> 
> 标签：algorithm, synchronization, operating-system

最近在课堂上学习了同步，对信号和广播的区别有点疑惑。我知道信号，当它发生时，它会唤醒等待列表中的第一个线程。该线程将在信号线程解锁后申请锁。那么广播会发生什么？当广播被调用时，所有等待线程都被唤醒。那么当广播线程解锁时，这些线程中的哪一个会获得那个锁呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:00:00.850

所有线程都未阻塞。他们都试图获得锁。无论哪个成功，首先从其`wait`持有锁的函数中返回。当该线程稍后释放锁时，仍在尝试获取它的线程之一将获得它。

在实践中，我怀疑在广播中，操作系统将直接移动等待列表并将其添加到等待获取锁的线程列表中（如果它按优先级对此类列表进行排序，则考虑优先级）。但这是一个实现细节。

# android - iOS App Artwork PNG - 我应该剥离元数据吗？

> ID：15133443
> 
> 赞同：1
> 
> 时间：2013-02-28T10:44:05.950
> 
> 标签：android, ios, png, design-guidelines

[Android 开发者图标设计](http://developer.android.com/guide/practices/ui_guidelines/icon_design.html)指南指出

> 保存图像资产时，删除不必要的元数据

在 Apple iOS 指南中，我找不到任何类似的声明。

是否建议为我的 iOS 应用程序剥离我的 PNG 艺术作品的元数据，例如优化带宽，或者这是一个小问题？你这样做吗？如果是这样，我可以使用什么工具进行批处理？

# javascript - jQuery - 通过选择选项加载图像

> ID：15133456
> 
> 赞同：1
> 
> 时间：2013-02-28T10:44:35.743
> 
> 标签：javascript, jquery, image, select

我正在尝试为使用 jQuery 选择的每个选项显示不同的图像（带有 DIV `<div id="Couleur13"></div>`），当我选择另一个选项（但不适用于预选的选项）时它会起作用，并且它会在加载后一秒钟消失。

这是 HTML（我不能修改这部分）：

```
<select class="PB" name="PDTOPTVALUEID0" size="1" OnChange="OnChangeOption();">
    <option value="504031" selected="selected" >NATUREL - BRUT</option>
    <option value="504032">CIRE - TEINTE MOYEN</option>
    <option value="504033">CIRE - TEINTE FONCE</option>
    <option value="504034">COULEUR - NOIR</option>
    <option value="504035">COULEUR - BLANC</option>
    <option value="504036">COULEUR - GRIS SOURIS CLAIR</option>
    <option value="504037">COULEUR - GRIS SOURIS FONCE</option>
    <option value="504038">COULEUR - GRIS PASTEL</option>
    <option value="504041">COULEUR - GRIS ANTHRACITE</option>
    <option value="504043">COULEUR - IVOIRE</option>
    <option value="504044">COULEUR - BEIGE</option>
    <option value="504045">COULEUR - CREME</option>
    <option value="504046">COULEUR - TAUPE</option>
    <option value="504047">COULEUR - JAUNE DOUX</option>
    <option value="504048">COULEUR - ROUGE CARMIN</option>
    <option value="504049">COULEUR - BORDEAUX</option>
    <option value="504050">COULEUR - CHOCOLAT</option>
    <option value="504051">COULEUR - WENGE CLAIR</option>
    <option value="504052">COULEUR - WENGE</option>
    <option value="504053">COULEUR - BLEU AZUR</option>
</select> 
```

这是 jQuery 代码：

```
<script type="text/javascript">
$(document).ready(function(){
    $('select[name=PDTOPTVALUEID0]').change(function() {
        $("#Couleur13").html($("<img />", { src: "http://www.unmeubleenpin.com/" + $(this).val() + ".jpg" }));
    });
});
</script> 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:47:32.210

尝试

```
$('select[name=PDTOPTVALUEID0]').on("change",function() {
         $("#Couleur13").html("<img src='"+$(this).val() + ".jpg'/>");
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:47:59.017

尝试这个：

```
<div id="Couleur13">
    <img src="default.png"/>
</div>

$(document).ready(function(){
    $('select[name=PDTOPTVALUEID0]').change(function() {
        var val = this.options[this.selectedIndex].value;
        $("#Couleur13 > img").attr('src', val + ".jpg");
    });
}); 
```

但我建议您更改图像的 src，而不是整个图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:48:45.163

`delegate`它

```
$('body').delegate("select[name=PDTOPTVALUEID0]","change",function() {
         $("#Couleur13").html($("<img src='"+$(this).val() + ".jpg'/>");
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T10:56:24.770

触发`change`这样的`doc ready`变化：

```
$('select[name=PDTOPTVALUEID0]').removeAttr('OnChange');
$('select[name=PDTOPTVALUEID0]').change(function() {
   $("#Couleur13").html($("<img />", { src: $(this).val() + ".jpg" }));
}).change(); // <------------trigger it this way here 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T10:58:49.313

为什么需要两个 onchange 函数？，我想它会在你的情况下产生问题。尝试执行一个

```
1- OnChange="OnChangeOption(); 
2- $('select[name=PDTOPTVALUEID0]').change(); 
```

# asp.net - 无法访问 IE9 中的复选框值

> ID：15133457
> 
> 赞同：0
> 
> 时间：2013-02-28T10:44:38.870
> 
> 标签：asp.net, checkbox

我有一个 asp.net 网页，其中我在 gridview 控件中有一个复选框控件，如下所示

```
 <asp:GridView ID="grdMergeCoverage" runat="server" AutoGenerateColumns="false">

     <Columns>
          <asp:TemplateField>
             <ItemTemplate>
                <input type="checkbox" id="chkSelectStream" onclick="OnSelectionChanged(this);"          
testrunid='<%#DataBinder.Eval(Container.DataItem,"TestRunId") %>'
checked='<%#DataBinder.Eval(Container.DataItem,"CodeCoverageRequired") %>' 
servername='<%#DataBinder.Eval(Container.DataItem,"ServerName") %>'
  runat="server" />
            </ItemTemplate>
         </asp:TemplateField>
    </Columns>
    </asp:GridView> 
```

**OnSelectionChanged**函数如下

```
function OnSelectionChanged(id) 
{            
        alert(id.testrunid);
        alert(id.servername);
        alert(id.checked);
} 
```

在 IE8 中，我可以获取 testrunid,servername 的值，而在 IE 9 中，它是 NULL。

有什么问题，我怎样才能在所有情况下获得价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:51:00.737

要获取自定义属性，您应该使用该[`getAttribute`](https://developer.mozilla.org/en/docs/DOM/element.getAttribute)方法。

像这样：`id.getAttribute("servername")`。

您以前获取值的方式是非标准的，并不总是受支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:52:28.803

您可以添加 asp 复选框并在 gridview rowitembound 事件中添加属性。它会火……

# sql - 更新许多特定行上的相同数据

> ID：15133462
> 
> 赞同：0
> 
> 时间：2013-02-28T10:44:57.107
> 
> 标签：sql, database, postgresql, postgresql-9.1

我想更新多行。我有很多 id 指定要更新的行（大约 12k id）。

实现这一目标的最佳方法是什么？

我知道我能做到

```
UPDATE table SET col="value" WHERE id = 1 OR id = 24 OR id = 27 OR id = ....repeatx10000 
```

但我认为这会带来糟糕的表现，对吧？那么有没有更好的方法来指定要更新的 id 呢？

Postgresql 版本是 9.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:49:08.547

在严格的更新性能方面不会有太大变化。必须找到并更新具有给定 ID 的所有行。

可以简化您的通话的一件事是使用`in`关键字。它是这样的：

`UPDATE table SET col="value" WHERE id in ( 1,24,27, ... );`

我还建议确保 ID 的顺序与 id 上的索引建议的顺序相同，可能是升序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T10:51:32.627

把你的身份证放在一张桌子上。然后做这样的事情：

```
UPDATE table SET col="value" WHERE id in (select id from table_of_ids_to_update) 
```

或者，如果您的 id 的来源是其他查询，请使用该查询来获取您要更新的 id。

```
UPDATE table SET col="value" WHERE id in (
       select distinct id from some_other_table
           where some_condition_for_updating is true
           ... etc. ...
    ) 
```

对于基于另一个表的更复杂的更新案例，[这个问题](https://stackoverflow.com/a/7869611/1919238)给出了一个很好的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:53:49.823

UPDATE table SET col="value" WHERE id in (select id from table);

还要对您的 id 字段进行索引，这样您将获得更好的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-21T18:41:26.310

值得注意的是，如果您*确实*按照@dan1111 的建议引用了一张表格，请不要使用`in (select ..)`，当然要避免使用`distinct`！相反，使用`exists`-

```
update table
set col = value
where exists (
        select from other_table
        where other_table.id = table.id
      ) 
```

这确保了仅在需要时扫描参考表。

# playframework - 使用多个 Play 版本的好设置是什么？

> ID：15133463
> 
> 赞同：4
> 
> 时间：2013-02-28T10:44:57.947
> 
> 标签：playframework

我现在有几个不同的项目使用不同的 Play 版本，我需要不断地在它们之间进行上下文切换。

我的 Windows 机器有什么好的设置？

1.  我应该将两个文件夹都添加到 PATH 并将 play.bat 重命名为 play1 和 play2 吗？库之间的顺序重要吗？
2.  我应该准备一个切换路径变量的批处理脚本吗？

有没有人这样做并且可以推荐一个工作设置？具体来说，我使用的是 1.2.4 和 2.1.0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T11:28:27.257

第一种方法应该按预期工作，我在我的 unix 站/服务器上使用了类似的方法，但在`/usr/bin`ie: `play200`,`play204`等中使用了符号链接`play210`。

当然，对于最新版本，您可以只保留一个`play`:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T23:33:24.653

你应该试试[Play Version Manager](https://github.com/kaiinkinen/pvm)。我知道这是针对 Unix/Linux 系统的，但我认为它值得额外的计算机配置工作，因为你不能改变你的操作系统。

# javascript - 如何从元素中删除所有 jQuery 验证引擎类？

> ID：15133464
> 
> 赞同：0
> 
> 时间：2013-02-28T10:44:57.990
> 
> 标签：javascript, jquery, css, jquery-validation-engine

我有一个插件，它正在克隆一个可能绑定或不绑定 jQuery 验证引擎的输入。

因此，它的类可能包含例如`validate[required,custom[number],min[0.00],max[99999.99]]`jQuery 验证引擎验证器或任何组合。

唯一可以确定的是类以 开头`validate[`和结尾`]`，但为了使其更复杂，如上例所示，可以嵌套`[]`.

所以，我的问题是，如何使用 jQuery 删除这些类（不知道完整的类）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:56:58.250

这是我的实现，它不是使用正则表达式，而是呃，谁说它也有？

```
//'first validate[ required, custom[number], min[0.00], max[99999.99] ] other another';
var testString = $('#test')[0].className; 

function removeValidateClasses(classNames) {
    var startPosition = classNames.indexOf("validate["),
        openCount     = 0, 
        closeCount    = 0,
        endPosition   = 0;

    if (startPosition === -1) {
        return;
    }

    var stringStart     = classNames.substring(0, startPosition),
        remainingString = classNames.substring(startPosition),
        remainingSplit  = remainingString.split('');

    for (var i = 0; i < remainingString.length; i++) {
        endPosition++;
        if (remainingString[i] === '[') {
            openCount++;
        } else if (remainingString[i] === ']') {
            closeCount++;
            if (openCount === closeCount) {
                break;
            }
        }
    }

    //concat the strings, without the validation part
    //replace any multi-spaces with a single space
    //trim any start and end spaces
    return (stringStart + remainingString.substring(endPosition)) 
           .replace(/\s\s+/g, ' ')
           .replace(/^\s+|\s+$/g, '');
}
$('#test')[0].className = removeValidateClasses(testString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:11:54.723

如果没有 JQuery，这样做实际上可能更简单。使用 className 属性，您可以使用 split() 获取类列表，并检查该类是否包含“validate[”。

```
var classes = $('#test')[0].className.split(' ');
var newClasses = "";

for(var i = 0; i < classes.length; i++){
    if(classes[i].indexOf('validate[') === -1){
        newClasses += classes[i];
    }
}

$('#test')[0].className = newClasses 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T06:39:46.953

我认为这个解决方案更加简单。您只需要替换`field_id`该`id`元素的 ，如果该元素具有类似`some_class different_class validate[...]`的类，则只会使用 validate 删除该类，而将其他类留在后面。

```
var that ='#"+field_id+"';
  var classes = $(that).attr('class').split(' ');
  $.each(classes, function(index, thisClass){
 if (thisClass.indexOf('validate') !== -1) {
$(that).removeClass(classes[index])
}
 }); 
```

# facebook - 不同的身份验证对话框取决于用户

> ID：15133468
> 
> 赞同：4
> 
> 时间：2013-02-28T10:45:14.737
> 
> 标签：facebook

我创建了一个新应用程序并配置了一个“Facebook 上的应用程序”。根据尝试访问应用程序的用户，身份验证对话框看起来会有所不同。

问题似乎是针对不同用户的不同设置，但原因是什么？我希望每个用户都能看到第一个对话框。

![默认身份验证对话框](../Images/4c65210690bcc1d80afb6fc5c6d18165.png)

![紧凑的身份验证对话框](../Images/b79000824cf8a941924d98c50f3661f2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:34:04.740

Stackoverflow 的 Facebook 登录现在也显示第二种类型。我看到的一个问题是，如果您在获得第二个对话框后触发发布帖子，则无论您的应用设置中设置了什么，权限始终设置为“仅限我”。

Facebook 有在随机用户之间测试新变化的习惯，因此这可能是某些用户看到一个对话框或另一个对话框的原因。

事实上，在我办公室接受测试的人中有一半收到了一个对话，而另一半收到了另一个。

这可能是相关的： http: [//allfacebook.com/separate-screens-mobile-app-permission-requests_b115132](http://allfacebook.com/separate-screens-mobile-app-permission-requests_b115132)

# scala - Scala anonymous function syntax

> ID：15133471
> 
> 赞同：2
> 
> 时间：2013-02-28T10:45:29.183
> 
> 标签：scala

I am a scala newbie.

What is the difference between

```
 invokeFunc(() => { "this is a string" } ) 
```

and

```
 invokeFunc({ () => "this is a string" }) 
```

If you have a good resource for small scala nuances I would appreciate it.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T11:05:55.620

**TL;DR**: those two code snippets are equivalent.

In `() => { "this is a string" }` the curly brackets introduce a *block* of code. As this block of code contains only one expression, it is essentially useless and you could just have written `() => "this is a string"`.

Also, scala will almost always let you choose whether you use parentheses or curly brackets when calling a method. So `println("hello")` is the same as `println{"hello"}`. The reason scala allows curly bracket is so that you can define methods that you can use like it was a built-in part of the language. By example you can define:

```
def fromOneToTen( f: Int => Unit ) { 
  for ( i <- 1 to 10 ) f(i) 
} 
```

and then do:

```
fromOneToTen{ i => println(i) } 
```

The curly braces here make it look more like a control structure such as scala's built-in `while`.

So `invokeFunc(() => { "this is a string" } )` is the same as `invokeFunc{() => { "this is a string" } }`

As a last point, parentheses can always be used anywhere around a single expression, so `(5)` is the same as `5`. And curly braces can always be used to define a block containing a series of expressions, the block returning the last expression. A special case of this is a block of a single expression, in which case curly braces play the same role as parentheses. All this means that you can always add superfluous parentheses or curly brackets around an expression. So the following are all equivalent: `123`, `{123}`, `(123)`, `({123})`and so on.

Which also means that:

```
invokeFunc(() => "this is a string") 
```

is the same as

```
invokeFunc({ () => "this is a string" }) 
```

which is the same as

```
invokeFunc({( () => "this is a string" )}) 
```

and so on.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T11:02:52.040

To my understanding, the first has an anonymous function, while the second has a block. However, the last element of a block returns in Scala, and so the block returns the same anonymous function, which then becomes the parameter of the method.

# javascript - 在 iframe onload 上调用父函数？

> ID：15133472
> 
> 赞同：0
> 
> 时间：2013-02-28T10:45:30.787
> 
> 标签：javascript, html, iframe

如何从新动态创建的 iframe 中调用父函数？

```
function PARENTS_TEST() {
}

function on_something_clicked() {
  $('#somediv').html("<iframe src='somehtml.html' ONLOAD?='PARENTS_TEST()'></iframe>");
} 
```

当我根本不想修改 somehtml.html 时..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:31:49.017

试试这个代码

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
function game()
{
alert("hiii");
}
function pfun()
{
$("#div1").html('<iframe id="if1" src="www.google.com" onload="game();">');

}
</script>
</head>
<body onload="pfun();">
<div id="div1">
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:56:41.113

尝试这个。

```
function PARENTS_TEST() {
}

function on_something_clicked() {
  $('#somediv').html("<iframe src='somehtml.html' ONLOAD?='parent.PARENTS_TEST()'></iframe>"); 
```

# bash - 如何在 Bash 脚本中使用 Expect

> ID：15133474
> 
> 赞同：5
> 
> 时间：2013-02-28T10:45:35.717
> 
> 标签：bash, expect

这是我在[以下](http://codepad.org/4qE7qP5X)Bash 脚本中使用的代码片段：

```
 for user_input in `awk '{print}' testfile_$$.txt`
    do
    ipaddress=`echo $user_input | cut -d';' -f 1`
    command="${config_mode}`echo $user_input | cut -d';' -f 2-`"
            ping -w 1 $ipaddress 1> /dev/null 2> $ERR_LOG_FILE 1> $LOG_FILE
    if [ $? -eq 0 ];then
            ssh "$USERNAME@$ipaddress" "$command"
                                                  >> $LOG_FILE

    fi
    done 
```

如何使用 Expect 自动在此脚本中进行 SSH 登录？

我对 Expect 很陌生，并开始测试它（它失败了）：

```
#!/usr/bin/bash

set force_conservative 0  ;# Set to 1 to force conservative mode even if
                          ;# script wasn't run conservatively originally
if {$force_conservative} {
        set send_slow {1 .1}
        proc send {ignore arg} {
                sleep .1
                exp_send -s -- $arg
        }
}

#

set timeout -1
spawn ssh auto21@10.38.227.229 {uname -a; df -h}
match_max 100000
expect "*?assword: "
send -- "bar01\r"
expect eof 
```

我需要在 Expect 脚本中重新编写 Bash 脚本，还是可以在 Bash 脚本中使用 Expect？

如果可以做到：

此外，我需要获取 Bash 变量**$command**、**$username**、**$password**和**$ipaddress**并在 Expect 部分使用它。

你会建议什么解决方案？

或者我可以创建一个 Expect 脚本并从 Bash 脚本中调用它，仅用于登录、错误处理、执行和日志文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T11:13:43.673

那么，您将需要运行两个单独的脚本，一个调用 Expect 脚本的 shell 脚本：

```
#!/usr/bin/bash

set force_conservative 0  ; 
```

将上述更改为

```
#!/usr/bin/expect

set force_conservative 0  ; 
```

或者，在您的 shell 脚本中，我不确定格式，但您可以发送`expect -c`执行命令：

```
expect -c "send \"hello\n\"" -c "expect \"#\""
expect -c "send \"hello\n\"; expect \"#\"" 
```

实际上，还有另一种选择：

```
#!/bin/bash

echo "shell script"

/usr/bin/expect<<EOF

set force_conservative 0  ;# Set to 1 to force conservative mode even if
                          ;# script wasn't run conservatively originally
if {$force_conservative} {
        set send_slow {1 .1}
        proc send {ignore arg} {
                sleep .1
                exp_send -s -- $arg
        }
}

#

set timeout -1
spawn ssh auto21@10.38.227.229 {uname -a; df -h}
match_max 100000
expect "*?assword: "
send -- "bar01\r"
expect eof
EOF 
```

# c++ - 指针在发布版本中丢失

> ID：15133480
> 
> 赞同：0
> 
> 时间：2013-02-28T10:45:47.893
> 
> 标签：c++, pointers, visual-studio-2005

问题如下：

有一个构造函数的调用，其中指针是一个参数

```
 m_pszBuf= new char[260];
//Still valid , to prove i'm printing the address
    std::cout <<"Address "<< (void*)m_pszBuf <<std::endl;
    device = new Device(m_pszBuf);

Device::Device(char* _ptr){
strcpy(dest,_ptr);
} 
```

有趣的是，在调用构造函数之前，指针仍然有效，并且有地址和值，但是一进入ctor，就变成了一个坏指针（0x0000005c）。此外，它在调试模式下工作，而不是在发布模式下工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T11:17:12.147

你这样初始化`m_pszBuf`：

```
m_pszBuf = new char[260]; 
```

然后你像这样调用`Device`构造函数：

```
device = new Device(m_pszBuf); 
```

在`Device`构造函数内部，有一个`strcpy`来自`m_pszBuf`源的调用：

```
Device::Device(char* _ptr) // _ptr == m_pszBuf
{
    strcpy(dest, _ptr);
} 
```

但是如果`m_pszBuf`不是 NUL 终止的，`strcpy`则不会在分配的缓冲区结束时停止，并且它可以从越界内存中复制垃圾，并且您可以溢出`dest`缓冲区。

因此，在传递`m_pszBuf`给`Device`构造函数之前，请确保它是**NUL 终止的**并且`strcpy`目标指针**足够大**。

*注意*：此分析仅基于您显示的代码片段。（我不知道在您省略显示的实际代码中是否存在其他问题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:57:21.040

很好的输入，但我已经用别的方法解决了。我有一些用于库的头文件“不同步”。我只需要更新它们。奇怪这如何影响其他事情。

# c# - 如何在多个请求中保持可变内容？

> ID：15133490
> 
> 赞同：0
> 
> 时间：2013-02-28T10:46:23.387
> 
> 标签：c#, asp.net-mvc

我想使用 a 在内存中构建一个日志文件`StringBuilder`，所以我有一个

```
private StringBuilder logFile = new StringBuilder(); 
```

在我的控制器类中。之后我将日志行附加到该对象。

但是在每次请求之后它都会被清除。如何在多次请求/查看期间保留内容？最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:49:10.490

您可以使用`Session`or`Cache`来存储请求之间的数据，例如：

```
Session["data"] = logFile; 
```

然后检索它：

```
logFile = Session["data"] as StringBuilder; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:48:41.417

我建议使用[log4Net](http://www.codeproject.com/Articles/140911/log4net-Tutorial)来满足任何日志记录需求，它的工作方式与 cham 一样，并且完全符合您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:48:51.870

您可以使用静态字段（确保正确同步对它的访问）或直接将值附加到文件中。或者简单地使用专门为此目的设计的日志框架。您不需要使用第 3 方，.NET 已经内置了出色的日志记录工具（查看[`System.Diagnostics`](http://msdn.microsoft.com/en-us/library/15t15zda.aspx)命名空间）。

# c#-4.0 - SAS 令牌在 Blob 下载时到期

> ID：15133491
> 
> 赞同：1
> 
> 时间：2013-02-28T10:46:28.113
> 
> 标签：c#-4.0, azure-blob-storage, blobstorage

我有一个 SAS 令牌，它将在 2 分钟内到期。

```
SAS = AzureClient.GetCloudContainer().GetSharedAccessSignature(new SharedAccessPolicy()
{
    SharedAccessExpiryTime = DateTime.UtcNow + TimeSpan.FromMinutes(1)
}, "readonly");
var sasCreds = new StorageCredentialsSharedAccessSignature(SAS);
CloudStorageAccount _storageAccount = AzureClient.GetCloudStorageAccount();
CloudBlobClient sasBlobClient = new CloudBlobClient(_storageAccount.BlobEndpoint, sasCreds);

CloudBlob sasBlob = sasBlobClient.GetBlobReference("blobname"); 
```

其中 readonly 是策略名称。

现在我正在执行以下操作：

```
using (BlobStream stream = sasBlob.OpenRead())
{                       
    using (FileStream fileStream = File.OpenWrite(@"Smething.txt"))
    {
        BlobStreamReader(stream,fileStream);
    }
}

private void BlobStreamReader(BlobStream blob,Stream OutputStream)
{
    int buffersize = 4194304; // 4MB 
    byte[] data = new byte[buffersize];
    do
    {
        int bytesRead = blob.Read(data,0,buffersize);
        if (bytesRead == 0) break;
        OutputStream.Write(data,0,bytesRead);
    }
    while (true);            
} 
```

问题是 SAS 过期时下载失败。我的理解是，SAS 令牌仅用于身份验证，如果在到期时间开始下载，那么即使 SAS 到期，下载也会继续。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T19:55:46.883

SAS 令牌仅用于身份验证是正确的。但是，在您的情况下，BlobStream 将在需要来自服务器的更多数据时发出新请求。因为每个请求都需要单独进行身份验证，并且您的 SAS 令牌在整个下载完成之前过期，所以预计会失败。

如果要下载整个 blob，[DownloadToStream](http://msdn.microsoft.com/en-us/library/windowsazure/ee741754.aspx)实际上是更好的选择，因为它只会向服务器发出单个请求，然后下载整个 blob。

# php - 如何使用 JS 脚本立即显示 PHP 循环结果

> ID：15133492
> 
> 赞同：0
> 
> 时间：2013-02-28T10:46:31.087
> 
> 标签：php, javascript, loops, output

这是我希望每秒打印消息的代码示例。

```
set_time_limit(60);

foreach($array as $key => $value)
{
    echo $value;

    sleep(5);
} 
```

我想知道 JS 脚本应该如何在循环的每个步骤中立即输出 $value 的结果而不等到它停止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:59:50.330

您不能使用 JavaScript 访问 PHP 变量。JavaScript 在浏览器中运行，而 PHP 在服务器上运行。

您必须使用 fab 的解决方案并使用*echo*和[*flush()*](http://php.net/manual/de/function.flush.php)将当前输出缓冲区发送到浏览器。但是一旦你这样做了，就不再需要使用 JavaScript，因为无论如何文本都会显示出来。

```
foreach($array as $key => $value)
{
    echo $value;
    flush();

    sleep(5);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:02:30.040

Javascript 可以（并且应该）为您完成所有计时工作，将数组输出为编码的 JSON 字符串会更明智，该字符串可以作为 javascript 变量打印到您的 HTML 中。

```
<script>
var array = "<?php echo json_encode($array); ?>";
</script> 
```

然后，您可以轻松地使用 javascript 解析数组，并使用浏览器以 1 秒的间隔显示每条消息。将数组从 JSON 字符串转换回类似...的数组后

```
var clearInterval = setInterval(deliver_message,1000); // Run a function every second

function deliver_message() {
    document.write(array.shift()); //This could be a Jquery append, or similar
    if (array.length == 0)
        clearInterval(loop);
} 
```

您的服务器端处理将所有信息传递给浏览器，它是客户端......javascript......在那里操纵它的显示方式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T10:49:01.763

为什么选择 JavaScript？

您可以在脚本完成之前随时发送输出[`flush()`](http://php.net/flush)：

```
set_time_limit(60);

foreach($array as $key => $value)
{
    echo $value;
    flush();

    sleep(5);
} 
```

# http - 推荐的 HTTP POST 内容长度是多少？

> ID：15133494
> 
> 赞同：2
> 
> 时间：2013-02-28T10:46:33.467
> 
> 标签：http, rest, http-post, load-balancing

我有几个客户端不断将数据发布到 REST 服务。REST 服务位于网络负载均衡器之后。每个客户端每天发送 100 - 500 MB，我需要支持 500 多个客户端。

我可以发布非常大的数据包，这将减少 TCP/IP 会话设置和 HTTP 标头的开销。但是，这会将一个客户端牢固地绑定到特定服务器并限制我的可扩展性选项。或者，我可以发送小的 HTTP 数据包，我可以很好地进行负载平衡，但我将获得更多的 TCP/IP 会话设置和 HTTP 标头的开销。

**HTTP POST 的推荐数据包大小是多少？或者我怎样才能为我的环境计算一个？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:24:05.397

没有推荐的尺寸。

虽然 HTTP POST 的大小不受 RFC 的限制，但由于 HTTP 是一种实现请求/响应类型消息传递的商品协议，因此大多数基础设施都是围绕 TCP 连接不是特别持久/不携带大量数据的想法进行配置的。即，将有一些超出您控制范围的因素可能会影响服务 - 尽管 HTTP 支持响应范围请求，但请求没有必然结果。

您可以通过使用 HTTPS 来解决其中的很多问题（尽管不是全部）。但是，您仍然需要考虑如何检测/管理中断 - 您是否乐意等待 TCP 超时？

由于可能有 500 多个客户端大量使用该系统，因此拥塞避免限制应该不是问题 - TCP 窗口缩放是否可能成为问题取决于系统的使用方式。HTTP 握手不应该成为问题，除非您将请求大小限制在一些愚蠢的范围内。

如果该服务高度依赖于将大量数据推送到您的服务器的客户端，那么我鼓励您查看解析客户端上的数据（考虑到数量，大概它来自文件 - 暗示已签名的 Java 小程序或 javascript具有 UniversalBrowserRead 权限）然后通过双向通信通道（例如 websocket）发送它。

暂且不说，找出客户端和服务器之间的路由支持的唯一方法是测量它 - 并监控它。我希望 2Mb 的上传大小几乎可以在任何地方使用，而 10Mb 的大小在美国或欧洲的大部分时间都可以使用 - 只要没有移动客户端，您就可以将其增加到 50Mb。

但是，如果您想保持服务的有效性，您将需要监控带宽、数据包丢失和丢失的连接。

# delphi - 为什么将单分配给变体会导致 varDouble 变体？

> ID：15133496
> 
> 赞同：9
> 
> 时间：2013-02-28T10:46:41.120
> 
> 标签：delphi, variant

```
uses
  SysUtils, Variants;

var
  VariantSingle: Variant;
  VTSingle: TVarType;
  SingleTest: Single;
  VariantDouble: Variant;
  DoubleTest: Double;
  VTDouble: TVarType;

begin
  SingleTest := 1.234;
  VariantSingle := SingleTest;
  VTSingle := VarType(VariantSingle) and varTypeMask;

  DoubleTest := 1.23456;
  VariantDouble := DoubleTest;
  VTDouble := VarType(VariantDouble) and varTypeMask;

  WriteLn(Format('VarType: Single: %d, Double %d', [VTSingle, VTDouble]));
end. 
```

上面的代码将输出：

> VarType：单：5，双 5

来自 System.pas

```
varSingle   = $0004; { vt_r4           4 }
varDouble   = $0005; { vt_r8           5 } 
```

因此，我希望 VTSingle 为**4** - 而不是 5
我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T10:57:03.413

Delphi 库选择通过调用`_VarFromReal`. 该函数如下所示：

```
procedure _VarFromReal(var V: TVarData; const Value: Real);
begin
  if (V.VType and varDeepData) <> 0 then
    VarClearDeep(V);
  V.VType := varDouble;
  V.VDouble := Value;
end; 
```

请注意，这使用了一种`varDouble`. 并且包括一个隐式转换，`Real`它是 . 的别名`Double`。我不确定设计师为什么选择那条特定的路线，但这种选择的结果就是你观察到的行为。

一种制作`varSingle`变体的简单方法可以使用：

```
VariantSingle := VarAsType(SingleTest, varSingle); 
```

虽然这会转换`SingleTest`为`Double`，然后再返回`Single`。

为避免这种不必要的转换，请编写您自己的助手：

```
function VarFromSingle(const Value: Single): Variant;
begin
  VarClear(Result);
  TVarData(Result).VSingle := Value;
  TVarData(Result).VType := varSingle;
end; 
```

你可以这样称呼它：

```
VariantSingle := VarFromSingle(SingleTest); 
```

在我看来，后一种方法是正确的解决方案。

# postgresql - 如何找到并正确配置 MS Team Foundation 服务器？

> ID：15133498
> 
> 赞同：0
> 
> 时间：2013-02-28T10:46:50.630
> 
> 标签：postgresql, tfs, port

我有一个安装了 postgresql 的 win7 虚拟机。我的 localhost:8080 上有一个 (apache) Enterprise DB。

我已成功安装 MS Team Foundation Server，我可以从管理控制台看到我的“DefaultCollection”在线。

浏览 localhost:8080/tfs 或 localhost:8080/tfs/DefaultCollection 会返回 404 not found 错误。我对我想使用哪个端口没有发言权，

你能帮我找到这个团队基础服务器的正确地址吗？或者告诉我如何正确配置它。（我对这个服务器配置世界不熟悉，请提供详细的命令或资料。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:00:16.903

听起来您必须使用 Windows 的一键式安装程序安装 PostgreSQL，然后运行 ​​StackBuilder 并使用 StackBuilder 安装 Apache。

如果是这样，它只是一个普通的 Apache 安装，您可以像平常一样配置它。您需要在“服务”控制面板 ( `services.msc`) 中停止和禁用任何正在运行的 Apache 服务。

或者，如果您希望在不同的端口上继续使用它，请编辑 Apache 配置以将`Listen`指令设置为其他内容，`8080`并更改任何`NameVirtualHost`和`VirtualHost`指令以使用新端口，例如：

```
Listen 8080
NameVirtualHost *:8080
<VirtualHost *:8080>
  ... blah blah ...
</VirtualHost> 
```

会成为：

```
Listen 8181
NameVirtualHost *:8181
<VirtualHost *:8181>
  ... blah blah ...
</VirtualHost> 
```

看：

*   [Apache - 虚拟主机](http://httpd.apache.org/docs/current/vhosts/)
*   [阿帕奇 -`Listen`](http://httpd.apache.org/docs/current/mod/mpm_common.html#listen)

您可以通过检查用于运行 Apache 的命令来找到 Apache 配置文件的位置。这可能是启动和停止它的批处理文件，或者是服务控制面板中的服务命令。它可能会被调用`httpd.conf`或`apache2.conf`..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:33:02.577

它们是“正确”地址，但除非尝试打开网页的人拥有有效的 TFS 帐户，否则您将无法通过该网站访问 TFS。

你可以访问：`http://localhost:8080/tfs/web`？

您的 Windows 登录是否允许访问 TFS 服务器？

正如克雷格所说，您没有任何信息可以帮助诊断您想要实现的目标。您为什么要尝试通过其 Web 端点访问 TFS？你确定机器上安装了 MSSQL 和 IIS 吗？为什么将 apache 和 postgresql 安装在不需要它们的 ALM 服务器上？

TFS 是一个非常复杂的产品，尽管开发团队在使其易于安装方面取得了长足的进步，但让服务器正常工作并非易事。

# python - cvs2svn 迁移

> ID：15133503
> 
> 赞同：0
> 
> 时间：2013-02-28T10:46:59.457
> 
> 标签：python, unix, cvs2svn

我们想将项目从 CVS 存储库移动到 SVN 存储库？

为此，我们在我们的 unix tomcat 服务器中安装了 cvs2svn-2.4.0。我们在 /usr/local/bin 下有 python 实用程序 2.3.3，在 /usr/local/lib 下有 libstdc++.so.6。

现在，当我们从 cvs2svn-2.4.0 运行 cvs2svn 命令时，我们收到以下错误：- **ld.so.1: python: fatal: libstdc++.so.5: open failed: No such file or directory**。

我的问题是：-

1.  是否只需要 CVS2SVN 的 python 2.4 或任何更高版本的 Python 也可以安装？

2.  目前 Python 2.3.3 存在于 /usr/local/bin 下，是否要放在 /usr/bin 下？路径 /usr/local/bin 和 /usr/bin 都设置为 PATH 环境变量？

3.  libstdc++.so.6 是否与 python 2.4 或更高版本兼容，还是我们必须安装 libstdc++.so.5 ？

4.  libstdc++.so.6放在usr/local/lib下，是不是一定要放在/usr/lib下才行？

5.  在 Env Variable PATH 中，/usr/local/lib 和 /usr/lib 都不存在，我们是否必须在 Env Path Variable 下导出这些目录？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:48:07.010

cvs2svn 所需的 Python 版本记录在 cvs2svn 文档[的需求部分](http://cvs2svn.tigris.org/cvs2svn.html#reqs)：

> Python 2，版本 2.4 或更高版本。请参阅[http://www.python.org/](http://www.python.org/)。（cvs2svn 不适用于 Python 3.x。）

同一部分还描述了您将需要的一些其他要求。

Python 解释器可以放在你的 PATH 中，或者你可以使用一个显式的 Python 解释器来调用 cvs2svn，比如

```
/path/to/my/python /path/to/my/cvs2svn [args] 
```

你剩下的问题不是关于 cvs2svn 而是关于如何在你的平台上安装一个工作的 Python，你甚至没有指定。

# actionscript-3 - 如何从外部 xml 设置高级数据网格列？

> ID：15133504
> 
> 赞同：0
> 
> 时间：2013-02-28T10:47:00.820
> 
> 标签：actionscript-3, apache-flex, flex4.5, advanceddatagrid

我有一个xml文件

```
<Column id="first name" headerLabel="first name" dataField="first name" />
<Column id="regionName" headerLabel="Region" dataField="region_name" />" 
<Column id="lastname" headerLabel="last_name" dataField="last_name"/> 
```

我希望将此列名分配给我的数据网格，因为我成功地从后端获取数据并保存在一个变量中，现在我只想在我的高级数据网格中显示它，任何人都可以指导我如何做到这一点有书面的例子吗？

```
<mx:AdvancedDataGrid 
  id="list"
  dataProvider="{data}"                      
  columns = ?/> 
```

我正在使用此代码假设我的 xml 文件名位于 assets/config/rumpy.xml 中，我想使用标题字段从中检索列名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:22:37.947

我建议您将此 XML 转换为 XMLList 并在遍历其元素时将列添加到数据网格。

默认情况下，您应该确定一组空的数据网格列。在我的示例中，如果您不这样做，您将获得两倍的列，因为网格可以根据数据提供者的结构自动定义列。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           minWidth="955" minHeight="600" creationComplete="init(event)">

<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import mx.controls.advancedDataGridClasses.AdvancedDataGridColumn;
        import mx.events.FlexEvent;
        private var columnList:XMLList;

        [Bindable]private var data:ArrayCollection = new ArrayCollection([
            {first_name:"John",     last_name:"Busch",  region_name:"CA"},
            {first_name:"Mike",     last_name:"Harris", region_name:"DC"},
            {first_name:"Linda",    last_name:"Brucks", region_name:"CA"}]);

        protected function init(event:FlexEvent):void
        {
            loadXML();
        }

        private function loadXML():void
        {
            var loader:URLLoader = new URLLoader();
            loader.addEventListener(Event.COMPLETE, onXMLComplete);
            loader.load(new URLRequest("assets/config/rumpy.xml"));
        }

        private function onXMLComplete(evt:Event):void
        {
            var xmlData:XML = XML((evt.currentTarget as URLLoader).data);
            columnList = xmlData.Column;

            var cols:Array = list.columns;

            for each (var item:XML in columnList)
            {
                var adgc:AdvancedDataGridColumn = new AdvancedDataGridColumn(item.@dataField);
                adgc.headerText = item.@headerText;

                cols.push(adgc);    
            }

            list.columns = cols;
        }
    ]]>
</fx:Script>

<mx:AdvancedDataGrid id="list" x="10" y="10" dataProvider="{data}" width="360" height="120">
    <mx:columns/>
</mx:AdvancedDataGrid>

</s:Application> 
```

//rumpy.xml

```
<Columns>
        <Column id="first_name" headerText="First Name"     dataField="first_name"/>
        <Column id="regionName" headerText="Region"         dataField="region_name"/> 
        <Column id="lastname"   headerText="Last Name"      dataField="last_name"/>
</Columns> 
```

# html - 如何在不使用任何图像的情况下在 div 中设计以下效果

> ID：15133508
> 
> 赞同：0
> 
> 时间：2013-02-28T10:47:06.837
> 
> 标签：html, css, tooltip

![在此处输入图像描述](../Images/084543c7af47a40e4ece0c2e7cdd5229.png)

我们如何在不使用任何图像的情况下像上面一样在底部设计提示。以下是我的跟踪代码：

```
<div id="coverImageToolTip"><p><font color="white">TIP:</font> UPLOAD YOUR<br/> COVER IMAGE HERE
    <div id="tail1"></div>
    <div id="tail2"></div>

#coverImageToolTip {
    position: absolute;
    z-index: 10;
    padding: 0px 4px;
    background-color: gray;
    bottom: 100px;
    left: 20%;
    border-radius: 10px;
    font-weight: bold;
    border-bottom: 5px solid black;
}

/* #tail1 {
    position:absolute;
    bottom:100px;
    left:20px;
    width:0;height:0;
    border-color:#a0c7ff transparent transparent transparent;
    border-width:10px;
    border-style:solid;
} */

#tail2 {
    position:absolute;
    bottom:-18px;
    left:20px;
    width:0;height:0;
    border-color: red transparent transparent  red  ;
    border-width:10px;
    border-style:solid;
    transform:rotate(90deg);
    -ms-transform:rotate(90deg); /* IE 9 */
    -moz-transform:rotate(90deg); /* Firefox */
    -webkit-transform:rotate(90deg); /* Safari and Chrome */
    -o-transform:rotate(90deg); /* Opera */
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:38:35.043

最小标记版本：

# [***演示***](http://codepen.io/thebabydino/pen/knAdu)

**HTML**：

```
<div class='tooltip'>
  <span class='highlight'>tip:</span> upload your cover image here
<div> 
```

相关**CSS**：

```
.tooltip {
  position: relative;
  margin: 1em auto;
  padding: .5em .2em;
  width: 10.5em; height: 3em;
  border-radius: .25em;
  box-shadow: 0 .2em 0 black;
  background: #999;
  font: 700 1.6em/1.5 sans-serif;
}
.tooltip:before {
  position: absolute;
  top: -.75em; right: -.75em;
  border: solid .2em;
  width: 1.5em; height: 1.5em;
  border-radius: 50%;
  background: black;
  color: #999;
  font: 900 .65em/1.5 sans-serif;
  content: 'x';
}
.tooltip:after {
  position: absolute;
  z-index: -1;
  right: 25%; bottom: -.75em;
  width: 2em; height: 2em;
  box-shadow: 0 .35em 0 black;
  transform: rotate(30deg) skewY(-60deg);
  background: inherit;
  content: '';
}
.highlight:after, .highlight:before {
  position: absolute;
  top: 100%; right: 31.025%;
  width: 1.725em; height: .2em;
  transform: skewX(-30deg);
  background: #999;
  content: '';
}
.highlight:after {
  right: 30.65%;
  transform: skewX(-60deg);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:51:38.637

请参阅[Pure css 关闭按钮](https://stackoverflow.com/questions/10019797/pure-css-close-button)（CSS 中的关闭按钮）和[http://v2.desandro.com/resources/css-speech-bubble-icon/](http://v2.desandro.com/resources/css-speech-bubble-icon/)以了解实际轨迹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:57:40.927

您可以在 css 中执行关闭按钮和箭头，但箭头的阴影是不可能的。

看看下面的代码

**HTML**

```
 <div id="coverImageToolTip">
    <div class="close"><a href="#">X</a></div>
    <p>
    <font color="white">TIP:</font> UPLOAD YOUR<br/> COVER IMAGE HERE
    </p>
    <div id="tail1"></div>
    <div id="tail2"></div>
</div> 
```

**CSS**

```
 .close a{
    position:absolute;
    right:-5px; top:-8px;
    display:inline-block;
    background:black;
    padding:2px 6px;
    color:white;
    border:solid grey 3px;
    border-radius:22px;
    font-size:12px; 
    text-decoration:none
}
        #tail2 {
            position:absolute;
            bottom:-19px;
            left:80px;
            width:0;height:0;
            border-color: grey transparent transparent  grey  ;
            border-width:10px;
            border-style:solid;
            transform:rotate(90deg);
            -ms-transform:rotate(90deg); /* IE 9 */
            -moz-transform:rotate(90deg); /* Firefox */
            -webkit-transform:rotate(1deg); /* Safari and Chrome */
            -o-transform:rotate(90deg); /* Opera */
        } 
```

**[演示](http://jsfiddle.net/FgdSE/5/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T11:24:11.373

您可以使用`before`和`after`模拟接近您的箭头图像的形状。看看这个演示：http: [//jsfiddle.net/j34um/3/](http://jsfiddle.net/j34um/3/)

# java - 对空结果集的非法操作

> ID：15133509
> 
> 赞同：1
> 
> 时间：2013-02-28T10:47:07.503
> 
> 标签：java, exception, operation

我正在尝试在杂货店建立一个付款台，而我的代码实际上执行了我打算让它做的事情，但只是为了一件事。

在我要求用户输入他们想要的项目数量后，产品信息被收集并且工作正常，但是当它应该要求用户输入下一个产品的产品 ID 时，该行重复，我得到以下我的捕获中的异常：“对空结果集的非法操作”。同样，所有的计算和一切都很好，除了重复那条线。关于可能是什么问题的任何想法？

重复的输出是这样的：

> 输入产品（或退出）：
> 
> ERROR1：对空结果集的非法操作。
> 
> 输入产品（或退出）：

这是代码。

```
try {
  Class.forName("com.mysql.jdbc.Driver");
  String connection = "jdbc:mysql://myDB?";
  connection = connection + "user=xxx&password=xxxxxx";
  Connection conn = DriverManager.getConnection(connection);
  // MATA IN PRODUKTNUMMER
  System.out.println("\nEnter product (or Exit):");
  GroceryStore.input = GroceryStore.scan.nextLine();

  PreparedStatement stmt = conn.prepareStatement(
          "SELECT * "+
          "FROM Products "+
          "WHERE productNo = ?");
          stmt.setString(1, GroceryStore.input); 

          ResultSet rs = stmt.executeQuery();
          rs.next();

    pName = rs.getString("productName");
    System.out.println("Product: " + pName);

    // MATA IN ANTAL
    System.out.println("\nEnter amount:");
    GroceryStore.amount = GroceryStore.scan.nextInt();

    pPrice = rs.getDouble("productPrice");
    priceRounded = new BigDecimal(pPrice).setScale(2, BigDecimal.ROUND_FLOOR);
    amountRounded = new BigDecimal(GroceryStore.amount).setScale(0);
    priceRounded = priceRounded.multiply(amountRounded);
    GroceryStore.sum = GroceryStore.sum.add(priceRounded);

    inOut.output();  
    inOut.input();
    conn.close();
    }
    catch (Exception e) {
         System.out.println("ERROR1: " + e.getMessage());
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T10:51:04.070

您没有检查结果集中是否有任何数据或行。

```
ResultSet rs = stmt.executeQuery();
rs.next();
...
... 
```

您应该检查结果是否为空或有任何行：

```
ResultSet rs = stmt.executeQuery();
if(rs.next()){
.....
your code
.....
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T10:59:13.837

在实际从结果集中检索值之前，您尚未检查结果集是否为空...

如果结果集中有数据，next() 返回 true，如果光标位置没有数据，则返回 false 像这样放置代码

```
While(rs.next())
{
    pName = rs.getString("productName");
    System.out.println("Product: " + pName);

    // MATA IN ANTAL
    System.out.println("\nEnter amount:");
    GroceryStore.amount = GroceryStore.scan.nextInt();

    pPrice = rs.getDouble("productPrice");
} 
```

# mysql - 从表 2 等效的 mongodb 中插入表选择变量

> ID：15133511
> 
> 赞同：0
> 
> 时间：2013-02-28T10:47:15.260
> 
> 标签：mysql, mongodb, insert

我在互联网上搜索，但我一无所获。我想知道这个 mysql 命令在 mongodb 中是否有等价物：

```
insert into table1 select variables from table2; 
```

我想要做的是选择一个文档并将其作为子文档插入到另一个文档中。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:29:28.080

没有办法在单个数据库命令中执行此操作。

无论您是在 shell 中执行此操作，还是使用 MongoDB 驱动程序在您选择的脚本语言中执行此操作，您都必须从 collection1 查询文档，然后使用查询结果对 collection2 进行适当的更新。

例如：

```
var doc = db.coll1.findOne( {_id:12345} );
db.coll2.update( {_id:98765}, {$push: {subs:doc} }, {upsert:1} ) 
```

更新所说的是匹配第一个参数的文档在第二个参数中更新（推入 doc 中的 subs 数组值），最后一个参数说如果它不存在则创建此文档（即如果 _id: 98765 不在 collection2 中它将被创建）。

# java - JCombobox根据真/假调整文本

> ID：15133519
> 
> 赞同：1
> 
> 时间：2013-02-28T10:47:42.447
> 
> 标签：java, swing, jdbc, boolean, jcombobox

我有一个`JComboBox`值`No`& `Yes`。这就是我将其存储到数据库中的方式：

```
jdto.setPlacement("Yes".equals(comboPlace.getSelectedItem())); 
```

然后将其传递`jdto`到我的创建方法中。选择yes 会给出true。我现在正在努力以反向逻辑工作。

我希望能够`Yes or No`根据数据库中的真/假值自动填充组合框。

atm 我有以下

```
fieldPlace.setSelectedItem(jdto.getPlacement()); 
```

我尝试了带有字符串的 if else 语句，但无法这样做。

有人可以演示如何实现这一目标。

这是 getPlacement()

```
public Boolean getPlacement() {
        return placement;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:32:22.733

*   将 Item 添加到 DefaultComboBoxModel，可以从 JComboBox API 中实现的适当数组中自动初始化

*   您可以使用 setSelectedItem 或硬编码 setSelectedIndex

例如

```
import java.awt.event.ActionEvent;
import java.util.Vector;
import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class ComboBoxBooleanModel {

    private javax.swing.Timer timer = null;
    private Vector<Boolean> comboBoxItems;
    private JComboBox box;

    public ComboBoxBooleanModel() {
        comboBoxItems = new Vector<Boolean>();
        comboBoxItems.add(Boolean.TRUE);
        comboBoxItems.add(Boolean.FALSE);
        box = new JComboBox(comboBoxItems);
        JFrame frame = new JFrame("");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(box);
        frame.setLocationRelativeTo(null);
        frame.pack();
        frame.setVisible(true);
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                box.setSelectedIndex(1);
            }
        });
        start();
    }

    private void start() {
        timer = new javax.swing.Timer(1250, updateCol());
        timer.start();
    }

    public Action updateCol() {
        return new AbstractAction("text load action") {
            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                if (box.getSelectedItem() == (Boolean) false) {
                    box.setSelectedItem((Boolean) true);
                } else {
                    box.setSelectedItem((Boolean) false);
                }
            }
        };
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                ComboBoxBooleanModel comboBoxModel = new ComboBoxBooleanModel();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T12:15:24.217

将布尔值存储在模型中，而不是它们的字符串表示 - 项目的自定义渲染是......自定义渲染器的任务。

```
 public class BooleanListCellRenderer extends DefaultListCellRenderer {

     public Component getListCellRendererComponent( ... Object value, ...) {
          if (Boolean.TRUE.equals(value) { 
             value = "Yes";
          } else if (Boolean.FALSE.equals(value)) {
             value = "No";
          }
          return super.getListCellRendererComponent(... value....);   
     }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T11:25:45.417

看起来您的`JComboBox`模型包含 的实例`String`，因此请编写一个辅助方法来翻译：

```
public String getPlacementString() {
    if (getPlacement()) {
        return "Yes";
    } else {
        return "No";
    }
} 
```

然后使用该方法`setSelectedItem()`：

```
fieldPlace.setSelectedItem(jdto.getPlacementString()); 
```

# c++ - 构造函数中的数组设置意味着稍后会失败

> ID：15133520
> 
> 赞同：7
> 
> 时间：2013-02-28T10:47:49.670
> 
> 标签：c++, arrays, constructor

我遇到了一个问题，即我的代码在尝试使用列表的 size() 函数时出现段错误。根据 stackoverflow 的建议 :-) 我构建了一个发生段错误的最小情况（在下面的调用 inventory.size() 上）。这是：

```
#include <list>

class Thing {};

class Player {
private:
  int xpCalcArray[99];
  std::list<Thing*> inventory;

public:
  Player();

  int addToInv(Thing& t); // return 1 on success, 0 on failure
};

Player::Player() {
  // set up XP calculation array
  for (int i=1; i<100; i++) {
    if (i<=10) {
      xpCalcArray[i] = i*100;
    }
    if (i>10 && i<=50) {
      xpCalcArray[i] = i*1000;
    }
    if (i>50 && i<=99) {
      xpCalcArray[i] = i*5000;
    }
  }
}

int Player::addToInv(Thing& t) {
  if (inventory.size() == 52) {
  return 0;
  } else {
      inventory.push_back(&t);
  }
  return 1;
}

int main(int argc, char *argv[]) {
  Thing t;
  Player pc;
  pc.addToInv(t);
  return 1;
} 
```

我注意到，当我删除 Player cosntructor 中的数组设置时，它工作正常，所以这看起来是问题所在。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:49:28.503

您正在越界访问数组，这会导致**未定义的行为**。此数组的有效索引范围

```
int xpCalcArray[99]; 
```

是 0 到 98。您在此处访问索引 99：

```
if (i>50 && i<=99) {
  xpCalcArray[i] = i*5000;
} 
```

你的外循环应该是

```
for (int i=0; i<99; i++) { ... } 
```

请注意，我从 0 开始，尽管假设您实际上想要访问第一个元素。

然后您的最终条件可以简化为

```
if (i>50) {
  xpCalcArray[i] = i*5000;
} 
```

如果您打算使用大小为 100 的数组，那么您需要

```
int xpCalcArray[100]; 
```

然后在`int i=0; i<100;`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T10:50:06.273

您正在访问数组范围之外。这样做会导致未定义的行为，因此对于之后发生的任何事情都没有合乎逻辑的解释。数组的大小是 99，因此最后一个索引是 98。`for`但是，您的循环会上升到 99。

要么让你的数组大小为 100：

```
int xpCalcArray[100]; 
```

或将您的`for`条件更改为`i < 99`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T10:51:42.293

您`int`通过尝试修改第 2 个→第 100 个元素（而不是第 1 个→第 99 个）来覆盖您的 99 数组。

在您的情况下，这恰好覆盖了其中的一些内存`std::list<Thing*>`（它直接存在于数组之后的内存中 -*并非总是*如此，但今天显然对您而言），因此，当您尝试使用列表时，当它的内部成员时，一切都会崩溃数据不再是它想象的那样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T10:52:00.223

您`xpCalcArray`的定义范围为 0 到 98（即 99 个大元素）。

您的循环从 0 到 99，需要 100 步。

最后一个循环周期，`xpCalcArray`在不存在的位置 99 处写入。这（间接）导致您的分段错误，如[轨道中的 Lightness Races 的答案](https://stackoverflow.com/questions/15133520/array-setup-in-constructor-means-failure-later-on/15133604#15133604)所示。

因此，将 的大小增加`xpCalcArray`1：

```
int xpCalcArray[100]; 
```

# iphone - 如何从对象链中获取对象

> ID：15133523
> 
> 赞同：0
> 
> 时间：2013-02-28T10:47:55.510
> 
> 标签：iphone, objective-c

我有一个根据树结构的对象列表。这是示例代码。

```
Model  model1 = [[Model alloc]init];
model1.name = @"ABC";

Model *model2 = [[Model alloc]init];
model2.name = @"DEF";

Model *model3 = [[Model alloc]init];
model3.name = @"GHI";

Model *model4 = [[Model alloc]init];
model4.name = @"JKL";

[model3.arr addObject:model4];
[model2.arr addObject:model3];
[model1.arr addObject:model2]; 
```

有没有办法在不循环每个其他对象的情况下获取特定对象。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:53:51.710

与其使用数组（我假设是这样`Model.arr`）来保存子模型，不如使用字典，因为这样可以快速查找对象，而无需遍历整个集合。

但是，为了使用字典，您需要提供唯一键才能访问对象。

我还建议**不要**公开`arr`，因为这意味着实现更改会破坏依赖代码；而是提供添加、获取和删除子模型的方法：

```
- (void)addModel:(Model *)model forKey:(NSString *)key;
- (Model *)modelForKey:(NSString *)key;
- (void)removeModelWithKey:(NSString *)key; 
```

# visual-studio - Visual Studio 2012 Express 是 SharePoint 2013 的良好开发环境吗

> ID：15133528
> 
> 赞同：1
> 
> 时间：2013-02-28T10:48:13.887
> 
> 标签：visual-studio, sharepoint, tfs

我需要为 SharePoint 2013 设置开发环境。因此 VS 2012 express 版本是否合适，否则它将缺乏对 SharePoint 模板的支持，如此 MSDN 链接中所述：-

[http://msdn.microsoft.com/en-us/library/ms349441.aspx](http://msdn.microsoft.com/en-us/library/ms349441.aspx)。

如果我获得了 VS 专业版，我是否仍然可以使用 Team Foundation Server Express 版本，或者 TFS Express 将不支持此链接中提到的 SharePoint 集成：-

[http://lajak.wordpress.com/2013/01/09/tfs-2012-versions-of-team-foundation-server/](http://lajak.wordpress.com/2013/01/09/tfs-2012-versions-of-team-foundation-server/)

# upload - SDB上传优化

> ID：15133532
> 
> 赞同：0
> 
> 时间：2013-02-28T10:48:31.687
> 
> 标签：upload, jena

我需要每 3 小时在 Jena SDB 中加载大约 10000 个实体，但第一次上传本身需要 2 小时左右的大量时间。我正在使用 Jena API 上传数据，我的 SDB 由 MySql 支持

我确定我做错了什么。

请告诉我如何提高上传速度。

我正在使用以下命令

```
 store.startbulkUpdate();
 store.getDataset.getdefaultmodel.add(modelWithData);
 store.finishbulkUpdate(); 
```

我需要指定块大小等吗？还有什么是mysql的最佳配置？

# python - pydoc.render_doc() 添加字符 - 如何避免这种情况？

> ID：15133537
> 
> 赞同：3
> 
> 时间：2013-02-28T10:48:53.703
> 
> 标签：python, character-encoding, pydoc

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T11:01:37.623

In python 2, you can remove the boldface sequences with `pydoc.plain`:

```
pydoc.plain(pydoc.render_doc(help)) 
```

```
>>> help(pydoc.plain)
Help on function plain in module pydoc:

plain(text)
    Remove boldface formatting from text. 
```

In python 3 `pydoc.render_doc` accepts a `renderer`:

```
pydoc.render_doc(help, renderer=pydoc.plaintext) 
```

# javascript - 如何在 Ace 编辑器中实现拖放？

> ID：15133540
> 
> 赞同：0
> 
> 时间：2013-02-28T10:49:02.323
> 
> 标签：javascript, ace-editor

我有一个[“ace 编辑器”](http://ace.ajax.org/)和一个缩略图调色板。我的客户想将这些缩略图拖到编辑器上，并在放置位置插入一些文本，例如全尺寸图像的 url。但是，我无法在 API 的任何位置找到 drop 事件。

有没有办法在 Ace API 中做到这一点？

如果不是，将我自己的 javascript 函数绑定到鼠标事件是否是一个合理的解决方案，鼠标事件将从源（拖动的）元素中的数据属性插入文本？如果有任何例子，我在这里或通过谷歌没有找到它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:41:28.563

看起来没有发出拖动事件[https://github.com/ajaxorg/ace/blob/master/lib/ace/mouse/dragdrop.js#L99](https://github.com/ajaxorg/ace/blob/master/lib/ace/mouse/dragdrop.js#L99) 您可以添加自己的拖放侦听器或更好地从 dragstart 侦听器设置文本

```
imageContainer.addEventListener("dragstart", function(e) {
    // find image data from e.target
    e.dataTransfer.setData("Text", imageText);
}) 
```

# php - 使用 Symfony DomCrawler 获取元素的原始 HTML 代码

> ID：15133541
> 
> 赞同：3
> 
> 时间：2013-02-28T10:49:02.197
> 
> 标签：php, symfony, goutte

html结构：

```
 <div id="product">
     <p>some text</p>
     <p>some text2</p>
   </div> 
```

我的PHP代码：

```
$client = new Client();
$crawler = $client->request('GET', $url);
echo $crawler->filter('#product')->text(); 
```

返回：

```
some text some text2 
```

但是我需要：

```
<p>some text</p>
<p>some text2</p> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T10:52:26.007

好吧，有一种但丑陋的方式 - 通过迭代其节点：

```
$html = '';

foreach ($crawler as $domElement) {
    $html.= $domElement->ownerDocument->saveHTML();
} 
```

或者，在您的情况下，您应该迭代过滤的元素：

```
$html = '';     
$product = $crawler->filter('#produkt');

foreach ($product as $domElement) {
    foreach($domElement->childNodes as $node) {
        $html .= $domElement->ownerDocument->saveHTML($node);
    }
} 
```

从[文档](http://symfony.com/doc/current/components/dom_crawler.html#component-dom-crawler-dumping)

# iphone - 如何在应用程序图标下的应用程序名称中设置小图像符号？

> ID：15133542
> 
> 赞同：6
> 
> 时间：2013-02-28T10:49:03.570
> 
> 标签：iphone, ios, objective-c, ipad

![如图所示，我已经安装了 ipad 应用程序。 还有一个问题，如何使用图像设置特殊的符号应用程序名称？ 如图所示。 知道如何制作它会很好。](../Images/4bbbb74fa07aa94cdc7f9a70a03df1e3.png)

如图所示，我已经安装了 ipad 应用程序。还有一个问题，如何使用图像设置特殊的符号应用程序名称？如图所示。知道如何制作它会很好。谢谢，KD

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-28T11:59:04.310

我只是研究它并在您的 Info.plist 文件中获得了解决方案 --> BundulDisplayName--> DoubleClickOn Right-side 如下图所示：-

![在此处输入图像描述](../Images/0b8a8e2e458b46785e919aa1db31cb36.png)

现在只需清除`${PRODUCT_NAME}`并在上方工具栏选择编辑，如下图所示：-

![在此处输入图像描述](../Images/5bac4702146aea3cdd9cd3fe3795faf7.png)

那么现在你可以看到像这样的窗口： -

![在此处输入图像描述](../Images/4dd51f56b56ccdd02a87c71273219c3a.png)

现在`Drag` `symbol`从字符窗口到`BundulDisplayName`放置此特殊符号时，然后放置您想要的应用程序的显示名称，然后在名称放置第二个符号后再次拖动第二次相同的过程。

就是这样，现在保存并运行您的项目，您的图标如下所示：-

![在此处输入图像描述](../Images/b6f5278bf8c5cd1d5ca4220c5385411f.png)

希望你得到你想要的:)

# ruby-on-rails - 将计数器缓存添加到 Rails 中的自联接表

> ID：15133545
> 
> 赞同：4
> 
> 时间：2013-02-28T10:49:05.473
> 
> 标签：ruby-on-rails, self-join, counter-cache

我正在尝试在自联接关联的 aa 列上添加计数器缓存。我有两个模型用户和追随者。用户有来自用户表本身的关注者和关注者。

```
User.rb

  has_many :followings
  has_many :followers, :through => :followings
  has_many :followees, :through => :followings

Following.rb

class Following < ActiveRecord::Base
  attr_accessible :followee_id, :follower_id
  belongs_to :follower, :class_name => "User" 
  belongs_to :followee, :class_name => "User"
end 
```

现在我想在`follower`and上添加计数器缓存`followees`。我在表中有`followers_count`和`followees_count`列`user`。

我试过了

```
belongs_to :follower, :class_name => "User" , :counter_cache => true 
```

但这不会返回用户表中的任何数据。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-11T00:52:08.387

很久很久以前，但是

**用户.rb**

```
class User < ActiveRecord::Base
  has_many :followings_as_follower, class_name: 'Following', foreign_key: 'follower_id', dependent: :destroy
  has_many :followings_as_followee, class_name: 'Following', foreign_key: 'followee_id', dependent: :destroy
  has_many :followers, through: :followings_as_followee, source: :follower
  has_many :followees, through: :followings_as_follower,  source: :followee

  def follow?(user)
    followees.reload.include? user
  end

  def follow(user)
    return if follow?(user)
    followings_as_follower.create(followee: user)
  end

  def unfollow(user)
    return unless follow?(user)
    followings_as_follower.where(followee: user).first.destroy
  end
end 
```

**关注.rb**

```
class Following < ActiveRecord::Base
  belongs_to :follower, class_name: 'User', counter_cache: :followees_count
  belongs_to :followee, class_name: 'User', counter_cache: :followers_count
  validates :follower, presence: true
  validates :followee, presence: true
  validates :followee, uniqueness: { scope: [:follower, :followee] }
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T11:01:25.733

尝试这个，

```
belongs_to :follower, foreign_key: 'the_id_of_foreign_key', class_name: 'User', counter_cache: :followers_count 
```

您可以使用`column_name`代替`true`in `counter_cache`。

# ios - NSDateFormatter 中 'YYYY' 和 'yyyy' 的区别

> ID：15133549
> 
> 赞同：85
> 
> 时间：2013-02-28T10:49:15.623
> 
> 标签：ios, objective-c, nsdate, nsdateformatter

'YYYY' 和 'yyyy' 之间的确切区别是什么。[我在这个链接](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW1)中读到，它指出

> 一个常见的错误是使用 YYYY。yyyy 指定日历年，而 YYYY 指定年份（“一年中的一周”），用于 ISO 年-周日历。在大多数情况下，yyyy 和 YYYY 产生相同的数字，但它们可能不同。通常，您应该使用日历年。

但是当我尝试使用

```
NSString *stringDate = @"Feb 28, 2013 05:30pm";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"MMM dd, yyyy hh:mma"];
NSDate *date=[dateFormatter dateFromString:stringDate];
NSLog(@"Date 1 : %@",date); //2013-02-28 12:00:00 +0000

NSString *stringDatee = @"Feb 28, 2013 05:30pm";
NSDateFormatter *dateFormatterr = [[NSDateFormatter alloc] init];
[dateFormatterr setDateFormat:@"MMM dd, YYYY hh:mma"];
NSDate *datee=[dateFormatterr dateFromString:stringDatee];
NSLog(@"Date 2 : %@",datee); //2013-01-05 12:00:00 +0000

NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"MMM dd, YYYY hh:mma"];
NSString *dateString = [dateFormat stringFromDate:datee];
NSLog(@"date 3 : %@", dateString); //Jan 05, 2013 05:30PM 
```

在这里，结果`date`和`datee`不同，我理解，但为什么日期 2 和日期 3 的结果不同？当我从字符串创建日期并再次将其反转为字符串时，但输出不匹配？

有没有人知道同样的原因？虽然它指定了一年中的一周，但我仍然应该得到相同的结果。

谢谢..

编辑 ：-

如果我编码

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"MMM dd, YYYY hh:mma"];
NSString *dateString = [dateFormatterr stringFromDate:[NSDate date]];
NSLog(@"date: %@", dateString); //Feb 28, 2013 04:37PM 
```

如果结果是正确的，但与我作为字符串传递给我得到的日期相同`2013-01-05 12:00:00 +0000`，请检查 NSLog 的日期 2，奇怪的结果，为什么？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-02-28T10:52:18.343

此外，在使用日期格式字符串时，使用正确的格式也很重要。

@"YYYY" 是基于周的日历年。

@"yyyy" 是普通日历年。

可以浏览整个博客，看看就好

[![在此处输入图像描述](../Images/d014d557d2938ba5dfc8a7d40f0b9a98.png)](https://i.stack.imgur.com/904Pz.png)

[https://web.archive.org/web/20150423093107/http://realmacsoftware.com/blog/working-with-date-and-time](https://web.archive.org/web/20150423093107/http://realmacsoftware.com/blog/working-with-date-and-time)

[http://realmacsoftware.com/blog/working-with-date-and-time](http://realmacsoftware.com/blog/working-with-date-and-time)（死链接）

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-02-28T10:54:19.837

> 一个常见的错误是使用 YYYY。yyyy 指定日历年，而 YYYY 指定年份（“一年中的一周”），用于 ISO 年-周日历。在大多数情况下，yyyy 和 YYYY 产生相同的数字，但它们可能不同。通常，您应该使用日历年。

来自[Apple 文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-13T09:47:44.240

```
dd/MMM/YYYY - e.g.:1 01/Jan/2000; answer : 19/dec/1999
              (see weekly calendar December month last Monday
              suppose leaf year + 1 day)
dd/MMM/yyyy - eg: ordinary - no problem. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-06T20:20:57.293

所有答案都有区别`yyyy`，并且`YYYY`是另一个问题的正确答案。这个问题本身指的是另一件事。

为什么这两个值不同？（从问题中提取）

```
NSLog(@"Date 2 : %@",datee); //2013-01-05 12:00:00 +0000
NSLog(@"Date 3 : %@", dateString); //Jan 05, 2013 05:30PM 
```

@PJ 的答案是它们的价值并没有真正的不同。当您记录 NSDate （即日期 2）时，您将获得恰好位于 UTC **Timezone**上的对象的完整描述。记录日期 3 时不会发生此逻辑，因为它已经转换为字符串并应用了您的时区。

要以与获取日期 2 的“相同方式”打印日期 3。您应该为日期 3 指定 UTC 时区。像这样：

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"MMM dd, YYYY hh:mma"];
[dateFormat setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]];
NSString *dateString = [dateFormat stringFromDate:datee];
NSLog(@"date 3 : %@", dateString); 
```

希望这可以帮助。

tl;博士时区

# c# - CPU使用率正在增加

> ID：15133550
> 
> 赞同：0
> 
> 时间：2013-02-28T10:49:23.780
> 
> 标签：c#, performance

我正在开发一个 Windows 服务，它从 sql server 获取数据并将它们以 xml 格式发送到其他一些应用程序。我使用 .NET3.5 开发。

我面临的问题是，当我在 Windows 7 操作系统机器上运行此进程时，CPU 使用率将在 2% 左右，这是预期的，但当我在 Widows server 2008 R2 VM 机器上运行相同进程时，CPU 使用率约为 95%。

我已经使用进程资源管理器分析了这个过程，我发现我的服务器 VM 机器（windows 2008 R2）的一个区别是我的窗口服务正在使用这个线程“mscorwks.dll！CoUninitializeEE+0x18cf8”。此线程正在使用更多 CPU。当我挂起这个线程时，我的进程 CPU 使用率约为 2%，并且我的进程运行正常。在我的开发机器（Windows 7）中，我没有看到这个线程。所以我认为这是导致问题的原因。

为什么这会发生在服务器机器上？如何解决这个问题？

显示这些详细信息的计算机属性：（均为 64 位操作系统）

我的开发机器配置是：Intel Core i5 2400 CPU @ 3.10GHz 3.10GHz 我的服务器机器配置是：Intel Xeon x5560 @ 2.80GHz 2.79GHz（2 个处理器）

我google了很多，但我没有找到任何有用的信息。

# c# - 当我点击它时如何使文本框文本消失

> ID：15133552
> 
> 赞同：1
> 
> 时间：2013-02-28T10:49:27.457
> 
> 标签：c#, plsql, textbox, runtime

我设法在 C# 中动态创建文本框。当a`textbox`有文字时，我可以让它在我点击它时消失吗？

我需要在文本框中输入一个词，这是 Oracle 中选择的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:55:39.327

为 TextBox 的 Text 属性赋值。然后您可以订阅 GotFocus 事件，并将文本值设置为空字符串。

```
// Holds a value determining if this is the first time the box has been clicked
// So that the text value is not always wiped out.
bool hasBeenClicked = false;

private void TextBox_Focus(object sender, RoutedEventArgs e)
{
    if (!hasBeenClicked)
    {
        TextBox box = sender as TextBox;
        box.Text = String.Empty;
        hasBeenClicked = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:04:25.733

javascript 适用于删除。

```
onclick="$(this).val('');" 
```

或者，您可以使用 HTML5[占位符](http://www.w3schools.com/tags/att_input_placeholder.asp)

# cordova - Mobile development :Native VS Cross Platform

> ID：15133557
> 
> 赞同：3
> 
> 时间：2013-02-28T10:49:35.677
> 
> 标签：cordova, mobile, cross-platform, phonegap-plugins

I'm new to cross platform development world, and in my final study project i have to design and develop a cross platform mobile application (android,iphone,windows phone).

I will have to implement these functionalities:

*   Making calls
*   Sendins sms/mms
*   USSD commands

I did some research about phoneGap,titanium and some other tools. I found that for example, with phoneGap i will have to use additional plugins in native language of the os to be able to send sms or making calls. So i'm wondering if an app that will have these features should be developped in native language.

So what do you think? What tool should i choose?

Is a cross platform app with these features can be scalable and efficient?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T11:06:26.337

如果您的目标是原生和跨平台应用程序，您将需要学习 Java（适用于 android）、Objective-C（适用于 ios）和 C#（适用于 windows phone）。如果你不想学习这三种编程语言，但又需要开发一个跨平台的应用程序，你可以试试 PhoneGap 或其他相关工具。但最好选择原生开发，因为它更高效、更稳定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T14:44:13.910

虽然您肯定会通过本机获得最佳性能，但您必须维护多个应用程序。然而，在大多数情况下，如果您知道自己在做什么并且不依赖于 jQuery mobile 等笨拙笨拙的库，那么 Web 技术解决方案可以满足您对大多数问题的需要。

不利于 phonegap 作为选择的事情：

*   UI 非常复杂，你对 Web 技术知之甚少
*   UI 比较复杂，需要支持 3 年以上的手机，但对 Web 技术不太了解
*   你讨厌 JavaScript

如果这只是一个带有基本 UI 的简单 2-3 页应用程序，我想不出任何不使用 phonegap 的充分理由。本机应用程序可用的大多数功能都可用于 phonegap。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-26T05:47:47.040

我知道这是一个老问题，也许已经解决了，但我提供我的想法，希望它也能帮助其他人..

这取决于您的应用程序是选择 Native App 还是基于 Web 的 App（使用 PhoneGap 等）。以下文章将帮助您做出决定：

[http://public.dhe.ibm.com/common/ssi/ecm/en/wsw14182usen/WSW14182USEN.PDF](http://public.dhe.ibm.com/common/ssi/ecm/en/wsw14182usen/WSW14182USEN.PDF)

Native Apps 将为大中型应用程序提供更好的稳定性和性能效率。

对于 Native Apps，我认为 Xamarin 是目前可用的最佳工具。您为所有平台开发一个通用的基本代码（访问数据库）。每个平台都有不同的 UI 层，您的 UI 层将调用公共基础。因此您只需维护不同平台的 UI 层。

# checkbox - 与子元素的角度双向绑定

> ID：15133561
> 
> 赞同：3
> 
> 时间：2013-02-28T10:49:54.297
> 
> 标签：checkbox, angularjs, model-binding, angularjs-directive

我的问题是创建一个角度指令。

我想用一个 ng-model 创建一组复选框。它就像一个位域或标志，即复选框的值从 0、1、2、3 到 n，但对于 ng-model，我只想添加所有选中复选框的 2^value。然后要添加的值是 1, 2, 4, 8, 16, ...

我想知道是否有更好、更正确或更简单的解决方案来解决我的问题。

[http://plnkr.co/edit/9h7EkEpDohXTniIDHdc5](http://plnkr.co/edit/9h7EkEpDohXTniIDHdc5)

在示例中，您可以更改文本框中的值并且检查将被更新，但不是其他方式。有点疯狂，代码在我的开发机器上运行，但不在 Plnkr 中！

```
app.directive('ngCheckboxFlags', function () {
return {
    restrict: 'A',
    require: 'ngModel',
    link: function (scope, element, attrs, ctrls) {
        var flagSum;
        var checkboxes = [];

        // trigger changes of the ngModel
        scope.$watch(attrs.ngModel, function (value) {
            flagSum = value;
            for (var i = 0, ii = checkboxes.length; i < ii; ++i) {
                var checkbox = checkboxes[i];
                checkbox.checked = flagSum & (1<<checkbox.value);
            }
        });

        for (var i = 0, inputs = element.find('input[type=checkbox]'), ii = inputs.length; i < ii; ++i) 
        {
            var checkbox = inputs[i];
            checkboxes.push(checkbox);
            // trigger changes of HTML elements
            $(checkbox).bind('change', function () {
                flagSum = ctrls.$viewValue ^ (1<<this.value);
                console.log(flagSum);

                //ERROR: Change not happening, textbox shows old value
                scope.$apply(function () {
                    ctrls.$setViewValue(flagSum);
                });
            });
        }
    }
};
}); 
```

thnx提前knut

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T11:43:19.460

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:17:38.543

找到了一种更优雅、更短的方法： http: [//plnkr.co/edit/9h7EkEpDohXTniIDHdc5](http://plnkr.co/edit/9h7EkEpDohXTniIDHdc5)

我的问题是

*   没有意识到，每个元素都会调用 link()
*   因此每次创建一个新的“范围”（对于每个元素）
*   我只需要在我的变量（现在称为复选框；在第一个版本中是一个数组）中存储对实际元素的引用，以便在模型更改时更新它（scope.$watch）
*   我不需要“全局”flagSum，只是复选框绑定中的一个 lokal 用于将值传输到 scope.$apply

    ```
    app.directive('ngCheckboxFlags', function () {
      return {
        restrict: 'A',
        require: 'ngModel',
        link: function (scope, element, attrs, ctrls) {
            var checkbox = element.find('input[type=checkbox]')[0];
            if (typeof checkbox === "undefined")
              return;

            // trigger changes of the ngModel
            scope.$watch(attrs.ngModel, function (value) {
                checkbox.checked = value & (1<<checkbox.value);
            });

            $(checkbox).bind('change',  function () {
                var flagSum = ctrls.$viewValue ^ (1<<this.value);

                scope.$apply(function () {
                    ctrls.$setViewValue(flagSum);
                });
            });
        }
      };
    }); 
    ```

# html - 为响应式布局修复 Google PageSpeed 的“提供缩放图像”

> ID：15133562
> 
> 赞同：5
> 
> 时间：2013-02-28T10:50:02.117
> 
> 标签：html, twitter-bootstrap, responsive-design, pagespeed

我的布局是响应式的，所以我需要将缩放的图像放入模板中，例如，当使用移动设备时，`span3`可能`Boostrap`会占据一整行，因此宽度会增加。

但在 Google PageSpeed 中，它被标记为问题。

是否有任何解决方法或更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:21:59.950

您是否启用了压缩 gzip 或 deflate 模式？它告诉我们，因为要么我们没有使用缓存（浏览器或代理）。把它写在你的 header/.htaccess 文件中。

```
<FilesMatch "\.(ico|jpg|jpeg|png|gif|js|css|swf|svg|pdf|flv|mp3)$">
<IfModule mod_expires.c>
 ExpiresActive on
 ExpiresDefault "access plus 1 month 2 days 3 hours" //example you can change it
 Header set Cache-Control "public"
</IfModule>
</FilesMatch> 
```

如果浏览器仍然忽略它，那是一回事。您还可以使用[Adaptive-Images](http://adaptive-images.com)方法根据较少的 DNS 查找来切断您的资产，并针对小型设备进行缩减。

如果您使用其中一种方法，则不必担心图像是否缩放。我已经尝试了所有[这些事情](https://developers.google.com/speed/docs/best-practices/payload#ScaleImages)，并且在**100**页速度中获得了**98**个。

 **如果您查看此[页面](http://scaledrop.com)的页面速度，您可以相信。希望你也修复它。**

# php - CURL post request works whereas PHP(Magento) Varien_Http_Client does not

> ID：15133563
> 
> 赞同：2
> 
> 时间：2013-02-28T10:50:02.043
> 
> 标签：php, json, magento, curl, jackson

I am trying to call a Java based service that uses a Jackson object mapper from a PHP(Magento) application. In both of them I am sending the same headers and same parameters, but the CURL call works fine where as PHP call fails with following message,

```
'No content to map to Object due to end of input' 
```

My curl is as follows,

```
curl -v -k -X POST -H "Content-Type:application/json;charset=UTF-8" -d '{"name":"john","email":"john@doe.com"}' https://localhost:8080/webapps/api/ 
```

The PHP Request is code is as follows,

```
 $iClient = new Varien_Http_Client();
                 $iClient->setUri('https://localhost:8080/webapps/api/')
        ->setMethod('POST')
        ->setConfig(array(
                'maxredirects'=>0,
                'timeout'=>30,
        ));
    $iClient->setHeaders($headers);
    $iClient->setParameterPost(json_encode(array(
                    "name"=>"John",
                    "email"=>"john@doe.com"
                    )));    
    $response = $iClient->request(); 
```

I am not the owner of the java service that uses jackson object mapper so I have no idea what happens on other side

Any suggestions on debugging or fixing this would be appreciated

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:13:58.003

好吧，这终于奏效了。如果您参考`Zend_Http_Client`. 请参考以下来自 Zend_Http_Client 的方法，

```
/**
 * Set a POST parameter for the request. Wrapper around _setParameter
 *
 * @param string|array $name
 * @param string $value
 * @return Zend_Http_Client
 */
public function setParameterPost($name, $value = null)
{
    if (is_array($name)) {
        foreach ($name as $k => $v)
            $this->_setParameter('POST', $k, $v);
    } else {
        $this->_setParameter('POST', $name, $value);
    }

    return $this;
}

/**
 * Set a GET or POST parameter - used by SetParameterGet and SetParameterPost
 *
 * @param string $type GET or POST
 * @param string $name
 * @param string $value
 * @return null
 */
protected function _setParameter($type, $name, $value)
{
    $parray = array();
    $type = strtolower($type);
    switch ($type) {
        case 'get':
            $parray = &$this->paramsGet;
            break;
        case 'post':
            $parray = &$this->paramsPost;
            break;
    }

    if ($value === null) {
        if (isset($parray[$name])) unset($parray[$name]);
    } else {
        $parray[$name] = $value;
    }
} 
```

所以 setParameterPost 以某种方式只尊重数组参数（键值对），而我的 POST 有效负载是一个 json 字符串。所以为了解决这个问题，我修改了如下代码，

```
$iClient = new Varien_Http_Client();
             $iClient->setUri('https://localhost:8080/webapps/api/')
    ->setMethod('POST')
    ->setConfig(array(
            'maxredirects'=>0,
            'timeout'=>30,
    ));
$iClient->setHeaders($headers);
$iClient->setRawData(json_encode(array(
                "name"=>"John",
                "email"=>"john@doe.com"
                )), "application/json;charset=UTF-8");    
$response = $iClient->request(); 
```

这解决了这个问题。我不确定更好的方法，但如果有更好的方法，我会很高兴使用它。

# ruby - 在 ruby 中通过引用更改值

> ID：15133564
> 
> 赞同：0
> 
> 时间：2013-02-28T10:50:03.323
> 
> 标签：ruby

我实现了异步线程管理器，我想传递对线程的引用，它应该保存他的工作结果。然后当所有线程完成时，我将处理所有结果。

我需要知道如何使用“参考”。

假设我有变量`result`（或`hash[:result1]`），我想将它传递给线程

```
def test_func
 return 777;
end

def thread_start(result)
 Thread.new do
  result = test_func;
 end
end 
```

我想要的是得到以下结果

```
result = 555
thread_start(result);
#thread_wait_logic_there
result == 777; #=> true

hash = {:res1 => 555};
thread_start(hash[:res1])
#thread_wait_logic_there
hash[:res1]==777 #=> true 
```

我应该在我的代码中更改什么以使其工作？

Ruby 版本是 1.9.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:59:43.560

您可以将整个哈希传递给函数：

```
def test_func
  return 777;
end

def thread_start(hash, key)
  Thread.new do
    hash[key] = test_func;
  end
end 
```

然后这将起作用：

```
hash = {:res1 => 555};
thread_start(hash, :res1)
hash[:res1]==777 #=> true 
```

此外，如果您想确保在计算完成后获得结果，您必须等待线程，如下所示：

```
hash = {:res1 => 555};
thread_start(hash, :res1).join
hash[:res1]==777 #=> true 
```

编辑：添加密钥，加入

# jquery - jQuery滚动到div然后暴露

> ID：15133566
> 
> 赞同：1
> 
> 时间：2013-02-28T10:50:05.817
> 
> 标签：jquery, scrollto

我想滚动到一个div，然后当它到达div时使用expose突出显示它。

目前，我可以让卷轴自行工作，并自行曝光，但很难将它们组合在一起。

到目前为止我所拥有的：

```
$(function() {

  $("a.link").click(function() {

$.scrollTo('#test', 800);

  $("#test").expose();

  });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:55:38.587

scrollto 函数具有滚动完成时要执行的函数的设置。在该功能中进行公开。

```
$.scrollTo('#test', 800, {
  'onAfter': function() {
    $("#test").expose();
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:56:24.953

```
$("a.link").click(function(e) {
     e.preventDefault();
     var $test = $('#test'), o = $test.offset().top;
     $('html, body').animate({ scrollTop: o }, 800, function(){
         $test.expose();
     })
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:57:06.870

这是因为..在发生`expose`之前被调用`scroll`......使用`onAfter`选项......这个函数在滚动结束后被调用

> onAfter：滚动结束后调用

```
$.scrollTo('#test', 800, {onAfter:function(){ $("#test").expose(); } } ); 
```

# matlab - K-means clustering Matlab

> ID：15133567
> 
> 赞同：0
> 
> 时间：2013-02-28T10:50:09.733
> 
> 标签：matlab, cluster-analysis, k-means

My problem is that it is difficult to get the optimal cluster number by using k-means, so I thought of using a hierarchical algorithm to find the optimal cluster number. After defining my ideal classification I want to use this classification to find the centroids with k-means, without iteration.

```
data= rand(300,5);
D = pdist(data);
Z = linkage(D,'ward');
T = cluster(Z,'maxclust',6); 
```

Now I want to use the clusters defined in vector `T` and the positions in to k-means algorithm without iterations. Can anyone give a tip how to do?

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:38:51.840

If you are looking for the centroids given that you already clustered them in `T`, then you only need to compute the `mean` of `data` grouped according to `T`.

# sql - 如何从两个表 SQL 中获取列

> ID：15133571
> 
> 赞同：2
> 
> 时间：2013-02-28T10:50:18.493
> 
> 标签：sql

我创建了一个包含多个表的数据库。

与我的问题相关的表格：

配置文件表 [http://imageshack.us/photo/my-images/838/profileqw.jpg/](http://imageshack.us/photo/my-images/838/profileqw.jpg/) 存储所有 porfiles

SalaryGroup 表 [http://imageshack.us/photo/my-images/255/salarygroup.jpg/](http://imageshack.us/photo/my-images/255/salarygroup.jpg/) 存储所有工资

ProfileSalaryGroups [http://imageshack.us/photo/my-images/138/profileandsalary.jpg/](http://imageshack.us/photo/my-images/138/profileandsalary.jpg/) 存储连接的个人资料和薪水

我有几个插入配置文件/薪水等的存储过程。我有一个连接配置文件和薪水并将它们存储在“profileSalaryGroups”表中的过程。我还有一个程序可以获取与特定配置文件相关的所有薪水。

这些过程执行以下操作：

连接个人资料和工资程序（完美运行）：

```
ALTER PROCEDURE [dbo].[ConnectProfileAndSalary]
    -- Add the parameters for the stored procedure here
    @ProfileName varchar(50) = '', 
    @Salaryname varchar(50) = ''
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    DECLARE @pId int
    DECLARE @sId int
    SELECT @pId =  Id from [Profile] where Name = @ProfileName
    SELECT @sId =  Id from SalaryGroup where Name = @Salaryname

    -- If the Id number already exists
    IF ((SELECT COUNT(*) FROM ProfileSalaryGroups WHERE SalaryGroupId = @sId) > 0 OR
        (SELECT COUNT(*) FROM ProfileSalaryGroups WHERE ProfileId = @pId) > 0)  
        RAISERROR ('Connection Exists', -- Message text.
                    16, -- Severity.
                    1 )
    ELSE
    INSERT INTO ProfileSalaryGroups (SalaryGroupId,ProfileId ) VALUES (@sId, @pId)
END 
```

获取与特定配置文件相关的所有薪水（完美运行）：

```
ALTER PROCEDURE [dbo].[GetConnectedSalaries]
    -- Add the parameters for the stored procedure here
    @ProfId int
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    SELECT SalaryGroupId, s.Name from ProfileSalaryGroups ps
    INNER JOIN SalaryGroup as s on s.Id = ps.SalaryGroupId
    Where ps.ProfileId = @ProfId
END 
```

**问题：**

我正在尝试创建一个程序来获取所有未连接到个人资料的工资 ID 和姓名。

我已经尝试了几种方法，例如：

```
SELECT SalaryGroupId, s.Name from ProfileSalaryGroups ps
    INNER JOIN SalaryGroup as s on s.Id = ps.SalaryGroupId
    Where ps.ProfileId != @ProfId 
```

这让我得到了我想要的一半。我想获取所有未连接到此配置文件的薪水，但此代码返回我所有与配置文件有连接但不与我作为参数发送的薪水 ID 和名称，它不包括所有“SalaryGroup”表中存在的薪水

```
SELECT s.Id, s.Name from SalaryGroup s
    where NOT EXISTS (SELECT SalaryGroupId, s.Name, s.Id from ProfileSalaryGroups ps
    INNER JOIN SalaryGroup as s on s.Id = ps.SalaryGroupId
    Where ps.ProfileId = 17
    ) 
```

这什么也没返回。

我已经有一段时间了，并尝试了其他几种方法（在某些情况下可笑），但我被困住了，如果需要更多信息，请询问，我会尽力提供。

如果标题不正确，我很抱歉，但我不知道该问题的标题是什么。如果@Admin 有更好的标题，请随时更改它。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:07:18.663

您可以使用左连接来执行此操作，并查找连接右侧没有结果的位置：

```
SELECT 
  s.Id, 
  s.Name 
from SalaryGroup  s
left JOIN ProfileSalaryGroups as ps 
on s.Id = ps.SalaryGroupId
Where ps.SalaryGroupId is null 
```

这应该得到*所有*的工资 id 和名称，但删除 SalaryGroup 中匹配记录的位置（即 s.profileId 不为空的位置）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:10:21.790

左外连接应该做你想做的事：

```
select * 
   from SalaryGroup sal
   left outer join ProfileSalaryGroups prof on
        prof.Id = sal.Id
   where prof.Id is null or prof.ProfileId != @ProfId 
```

**说明：** where`prof.Id is null`选择完全没有 profile 的，while`prof.ProfileId != @ProfId`选择有 profile 但与当前不匹配的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:10:40.637

从简单开始，解决您的问题。

首先，获取所有的salaryID

```
select * 
from SalaryGroup s
left join ProfileSalaryGroup ps on ps.salaryGroupID=s.ID 
```

现在，您不想要所有这些，因此请考虑消除其中一些的方法。
要消除与参数匹配的组，请添加 where 子句

```
where ps.profileID <> @parameter 
```

现在，如果您想在不匹配 Profiles 和以下内容的情况下消除薪金组

```
and ps.ProfileID is NULL 
```

左连接（而不是 INNER JOIN）告诉 SQL 总是返回一行，无论第二个表中是否有匹配的数据。如果 SQL 未找到匹配项，则第二个表中的数据列将全部为 NULL。WHERE 子句的第一部分只返回与参数不匹配的行。第二部分返回没有 Profile Salary 数据的行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T11:17:37.213

将您的参数作为 LEFT JOIN 的条件并签`ps.SalaryGroupId IS NULL`入 WHERE 子句

```
SELECT s.Id, s.Name 
FROM SalaryGroup as s LEFT JOIN ProfileSalaryGroups ps on s.Id = ps.SalaryGroupId
                                  AND ps.ProfileId = @ProfId
WHERE ps.SalaryGroupId IS NULL 
```

# photo - 谷歌照片集上传相册公开

> ID：15133576
> 
> 赞同：0
> 
> 时间：2013-02-28T10:50:28.697
> 
> 标签：photo

使用java api创建时如何将谷歌相册设置为公开

我正在使用 AlbumEntry 使用 PicasawebService 类创建相册

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:53:56.047

您可以使用

```
AlbumEntry.setAccess(String access) 
```

方法

默认情况下，创建的 ablum 将是私有的。要明确公开专辑，您可以使用**public**作为方法参数。

所以你需要打电话

```
 albumEntryObject.setAccess("public"); 
```

在调用之前

```
picasawebService.insert(..) 
```

方法。

# c# - LINQ List<> 上下移动元素

> ID：15133577
> 
> 赞同：3
> 
> 时间：2013-02-28T10:50:39.377
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, linq

是否有可能告诉我`List<>`上下移动元素的最佳方式。

例如，我有一个名为 Building 的类，而 Building 有一个 Rooms 对象列表`List<Room>`。房间按名称添加到建筑物中，但我使用此结构生成树视图。用户可以选择在建筑物内上下移动房间。

我试图使用`.Reverse(index, count)`，但这似乎没有做任何事情：

```
// can this item actually be moved up (is it at the first position in it's current parent?)
if (moveDirection == MoveDirection.UP)
{
    int roomIndex = parentBuilding.Rooms.IndexOf(room);

    if (roomIndex == 0)
    {
        return;
    }
    else
    {
        // move this room up.                            
        parentBuilding.Rooms.Reverse(roomIndex, 1);
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T10:56:55.020

创建一个列表扩展。调用为`List<T>.Move(1, MoveDirection.Up)`.

```
public static class ListExtensions
{
    public static void Move<T>(this IList<T> list, int iIndexToMove, 
        MoveDirection direction)
    {

        if (direction == MoveDirection.Up)
        {
            var old = list[iIndexToMove - 1];
            list[iIndexToMove - 1] = list[iIndexToMove];
            list[iIndexToMove] = old;
        }
        else
        {
            var old = list[iIndexToMove + 1];
            list[iIndexToMove + 1] = list[iIndexToMove];
            list[iIndexToMove] = old;
        }
    }
}

public enum MoveDirection
{
    Up,
    Down
} 
```

**需要考虑的事项**

*   异常处理——如果你试图向下移动底部元素或向上移动顶部元素怎么办？你会得到一个超出范围的索引，因为你不能向上或向下移动它们。

*   您可以通过将功能扩展到将顶部元素移动到底部元素并将底部元素向下移动到顶部元素等来改进这一点并防止处理异常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T10:57:37.547

只需进行交换：

```
int roomIndex = parentBuilding.Rooms.IndexOf(room);

if (roomIndex == 0)
{
    return;
}
else
{
    // move this room up.                            
    var temp = parentBuilding.Rooms[index-1];
    parentBuilding.Rooms[index-1] = parentBuilding.Rooms[index];
    parentBuilding.Rooms[index] = temp;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T10:58:54.153

就个人而言，我会做扩展方法：

```
static void Swap<TSource>(this IList<TSource> source, int fromIndex, int toIndex)
{
    if (source == null)
        throw new ArgumentNullExcpetion("source");

    TSource tmp = source[toIndex];
    source[toIndex] = source[fromIndex];
    source[fromIndex] = tmp;
} 
```

用法：

```
if (moveDirection == MoveDirection.UP)
{
    int roomIndex = parentBuilding.Rooms.IndexOf(room);

    if (roomIndex == 0)
    {
        return;
    }
    else
    {
        // move this room up.                            
        parentBuilding.Rooms.Swap(roomIndex, roomIndex - 1);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T10:53:37.680

如何使用`SortedDictionary<int, Room>`而不是列表。您可以将索引存储为字典的键，并在需要时交换值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T10:55:22.680

与上面的房间交换位置应该这样做：

```
int roomIndex = parentBuilding.Rooms.IndexOf(room);

if (roomIndex == 0)
{
    return;
}

var wasAbove = parentBuilding.Rooms[roomIndex - 1];
parentBuilding.Rooms[roomIndex - 1] = room;
parentBuilding.Rooms[roomIndex] = wasAbove; 
```

也就是说，我不确定这是否是适合这种情况的最佳对象模型；目前尚不清楚列表中房间的顺序是否起作用，也不清楚如何“向上移动”房间——这是什么意思？

最好有一个`RoomPlacement`类来聚合一个房间和足够的信息来定位它，并使用它来代替。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T10:55:59.867

试试这个：

```
int newIndex = whateverIndexYouWantItAt;

int oldIndex = parentBuilding.Rooms.IndexOf(room);
var item = parentBuilding.Rooms[oldIndex];

list.RemoveAt(oldIndex);

if (newIndex > oldIndex) newIndex--; 

parentBuilding.Rooms.Insert(newIndex, item); 
```

# google-chrome - Display arabic text correctly on chrome

> ID：15133579
> 
> 赞同：1
> 
> 时间：2013-02-28T10:50:48.860
> 
> 标签：google-chrome, browser, encoding, arabic, fusioncharts

![Arabic display on browsers](../Images/66a27c85cdd6592ccd424fd83ae913e5.png)

(link for the picture [http://d.pr/i/SCks](http://d.pr/i/SCks) just in case..)

On the three browsers above, the arabic text is well displayed.

On Chrome (V 15) bellow, it's a bit not well organized.

What seems to be the problem ?

PS: i'm using Fusioncharts

EDIT:

That's how I'm writing it:

```
echo '<set label="' .  addslashes($label) . ' - \' + value_' . $i . ' + \'% (' . $label_value . ') " value="' . $data_pie['nb'] . '" />\';' . "\n"; 
```

# android - CSS3 Text Gradient on Android not working

> ID：15133585
> 
> 赞同：1
> 
> 时间：2013-02-28T10:50:59.953
> 
> 标签：android, css, webkit, gradient

I'm trying to use a text gradient, and it works on Chrome & Safari but on Android it applies the gradient to the content rather than the text (so instead of seeing text with a gradient, you see a box with a gradient — not ideal, especially since the text is important).

Here's my SASS mixin:

```
@mixin text-gradient($from : #2bd2f2, $to : #218bb2) {
    text-shadow: none;
    background: -webkit-gradient(linear, left top, left bottom, from($from), to($to));
    -webkit-background-clip: text;
    -moz-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    color: transparent;
} 
```

Any idea as to why this doesn't work?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T15:30:20.157

这应该适合你。在您的脚本中实现这一点，并根据需要更改您拥有的所有变量。如果一切都失败了，你可以使用它，因为它在 mixin 之外。

该脚本在 Android Chrome 上进行了测试并且可以运行。

```
h1 {
        text-shadow: none;
        background: #2bd2f2;  /* Failsafe color */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #2bd2f2), color-stop(99%, #218bb2));
        background: -webkit-linear-gradient(top, #2bd2f2 0%, #218bb2 99%);
        background: linear-gradient(to bottom, #2bd2f2 0%, #218bb2 99%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
} 
```

您可能已经发现这种方法与许多浏览器不太兼容。这就是为什么我可能会推荐 html5 中的 canvas 选项来绘制带有渐变的文本。这些链接可以帮助您一路走来。

[https://www.inkling.com/read/html5-canvas-fulton-fulton-1st/chapter-3/text-and-the-canvas-context](https://www.inkling.com/read/html5-canvas-fulton-fulton-1st/chapter-3/text-and-the-canvas-context)

[https://www.inkling.com/read/html5-canvas-fulton-fulton-1st/chapter-3/text-with-gradients-and-patterns](https://www.inkling.com/read/html5-canvas-fulton-fulton-1st/chapter-3/text-with-gradients-and-patterns)

# android - android：图标和微调器之间的间隙

> ID：15133590
> 
> 赞同：2
> 
> 时间：2013-02-28T10:51:17.390
> 
> 标签：android, android-actionbar, spinner, space, gaps-in-visuals

我想问一下 gmail 应用程序中的操作栏。

在主活动中，操作栏（收件箱、已发送等）中有一个微调器，并且没有标题。

我在我的应用程序中尝试过，但应用程序图标和微调器之间的差距比在 gmail 应用程序中更大。

我使标题既不可见又空洞，但差距仍然更大。

我是否必须为操作栏制作自己的视图定义才能达到相同的效果？

非常感谢，马丁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T07:54:26.840

谢谢大家的回答。*matthias*的回答让我想到了下面这个很有魅力的解决方案：

```
public class ZeroPaddingArrayAdapter<T> extends ArrayAdapter<T> {

    public InboxTypeAdapter(Context context, int textViewResourceId, T[] objects) {
        super(context, textViewResourceId, objects);
    }

    public static ArrayAdapter<CharSequence> createFromResource(Context context,
                                                                int textArrayResId, int textViewResId) {
        CharSequence[] strings = context.getResources().getTextArray(textArrayResId);
        return new ZeroPaddingArrayAdapter<CharSequence>(context, textViewResId, strings);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = super.getView(position, convertView, parent);
        view.setPadding(
                0,
                    view.getPaddingTop(),
                0,
                view.getPaddingBottom()
        );
        return view;
    }

} 
```

对于旋转器：

`getView()`- 获取当前选定项目的视图。 `getDropDownView()`- 获取微调器打开时显示的视图。

我们只需要减少`getView()`.

只需使用此适配器而不是简单的`ArrayAdapter`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T12:12:54.683

创建一个具有正确填充的可绘制对象作为您的操作栏图标。

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list
    xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:drawable="@drawable/logo"
          android:right="10dp"/>

</layer-list> 
```

然后只需将其设置为清单中的图标。您应该能够以这种方式调整填充。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T15:51:25.263

减少 的填充`Spinner`，更准确地说是`View`在. 我刚刚在一个示例项目中尝试过，它显着缩小了差距。`getView()``Adapter`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-01T12:57:09.223

添加这一行 spinner.setPadding(0,0,0,0); 打开下拉菜单时隐藏向下箭头图像。

# uml - 用例泛化与扩展

> ID：15133595
> 
> 赞同：24
> 
> 时间：2013-02-28T10:51:30.013
> 
> 标签：uml, use-case

UML 用例图允许两种看似等效的方式来显示给定的用例可能以几种不同的方式实现，即[用例泛化](https://i.stack.imgur.com/VThNF.png)而不是[用例扩展](https://i.stack.imgur.com/Xc0hU.png)。我已经看到以下基本示例使用相同频率的任何一种方法建模，有时在单个源中。

![用例概括图像](../Images/b4101ee1f409eb65b55417ad7a2f175c.png)

![用例扩展图片](../Images/4eb6c32b606983573344ec24db71bd31.png)

在我看来，扩展是比泛化更弱的关系，因为在泛化中必须可以直接替换基本用例的专用用例，但不一定在扩展中。

在我看来，泛化意味着需要多态实现，而扩展意味着要使用一些分支结构。

```
void makePayment(const PaymentDetails* pd)
{
   pd->pay();
} 
```

与

```
void makePayment(const PaymentDetails* pd)
{
   switch(pd->type)
   {
       case EFT:
                payViaEFT(pd); 
                break;
       case PAYPAL:
                payViaPayPal(pd); 
                break;
       case CREDITCARD:
                payViaCreditCard(pd); 
                break;
   }
} 
```

用例阶段是否还为时过早，无法对这种实现特定的关注点进行建模？有更合适的 UML 图。关于使用两者中的哪一个，是否有硬性规定？如果是，那是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-28T12:43:02.963

> 在我看来，扩展是比泛化更弱的关系，因为在泛化中必须可以直接替换基本用例的专用用例，但不一定在扩展中。

那是真实的。

> 在我看来，泛化意味着需要多态实现，而扩展意味着要使用一些分支结构。

该图没有规定任何实现。不过，您可以自己解释图表中的提示。UML 仍然独立于那里的语言和解决方案。

> 用例阶段是否还为时过早，无法对这种实现特定的关注点进行建模？

好吧，如上所述，UML 不强制执行任何特定类型的实现。但是，您在这里收集了一些重要的功能需求，这些需求可能会极大地影响您的时间安排和工作量。（“用信用卡付款”比“通过银行转账预付款”处理起来要复杂得多）。因此，您将努力捕捉这一点，但仍对不同的解决方案持开放态度。

> 有更合适的 UML 图。

您可以真正并行使用它们:)，因为它们是对同一主题的不同观点。

> 关于使用两者中的哪一个，是否有硬性规定？如果是，那是什么？

在这种情况下，我更喜欢概括，因为实际上扩展错误地暗示可能有一种付款方式，而无需使用三个命名选项中的任何一个。正如你自己指出的那样。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-28T14:59:20.447

使用扩展关系建模时，如果扩展用例（付款）位于精确位置（由扩展点、付款类型给出），则执行扩展用例（通过 xxx 付款），如果这种扩展关系的条件成立（例如，对于“通过 Paypal 付款”，条件是 payment_type=PAYPAL）。在该模型中，“Pay via Paypal”只处理通过Paypal完成支付交易的细节，而“Make Payment”则指定了所有与支付方式无关的行为（如计算总金额、保存交易执行后的结果）。

另一方面，泛化（不仅为用例定义，还为任何分类器定义）是一个更广泛的概念，因为它没有详细说明（在图表级别）何时以及如何执行专门行为的细节。如果“通过 Paypal 付款”是“付款”的一种特殊形式，它将重新定义“付款”的行为，这可能与“通过信用卡付款”的行为大不相同。

作为一个扩展用例并不意味着必须对替代方案进行硬编码。实际上，您的第一个示例也是扩展关系的有效实现，因为`pd->pay(pd)`将根据所选支付类型调用不同的行为。实际上，用例图*对系统应该做什么进行*建模，而在活动图中更好地指定低级实现细节。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-10T00:15:41.137

扩展的一个示例是“输入折扣码”用例。输入折扣代码与付款有关，但您无需输入折扣代码即可付款。

您可以查看“是”关系来确定使用哪个。Pay by PayPal“是一种”付款方式，一种特定的付款方式。输入折扣码不是。这是您在付款时可以做的额外事情。

# theorem-proving - 在 Isabelle 中一起调用 Nitpick 和 Sledgehammer

> ID：15133597
> 
> 赞同：7
> 
> 时间：2013-02-28T10:51:32.750
> 
> 标签：theorem-proving, isabelle

*当我在Isabelle*中陈述引理时，我经常输入`nitpick`，如果这没有给我一个反例。然后我键入`sledgehammer`以尝试自动查找证明。

我想知道：是否可以调用*Nitpick*和*Sledgehammer*以便它们同时运行？既然*Sledgehammer已经将我的引理发送给了一堆自动证明者，那么这些证明者中的一个难道不能成为像**Nitpick*这样的反例发现者吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T12:05:50.403

您可以尝试使用`try`Isabelle 中的命令；它并行运行`sledgehammer`、`nitpick`和`quickcheck`许多其他求解器（例如`auto`、`simp`、`force`等），为您提供第一个完成的求解器的结果。

例如，运行以下命令：

```
lemma "(a * (b + 1)) = (a * b + a)"
  try 
```

将从 中返回一个反例`nitpick`，表明该定理一般不成立。添加类型约束：

```
lemma "((a :: nat) * (b + 1)) = (a * b + a)"
  try 
```

现在将返回一条消息，告诉您`simp`能够解决目标。

最后，将类型约束更改为更具挑战性的`32 word`类型（可从`Word`in 获得`HOL-Word`）：

```
lemma "((a :: 32 word) * (b + 1)) = (a * b + a)"
  try 
```

将从大锤返回一个结果。

# java - 执行包含来自 Java 的多行的“.bat”文件

> ID：15133602
> 
> 赞同：0
> 
> 时间：2013-02-28T10:51:38.857
> 
> 标签：java, cmd, runtime.exec

我有一个名为**A**的文件夹，其中包含一个`.bat`文件：**a.bat**。如果我想写一个`.bat`文件，我可以写：

```
cd A/
call a.bat 
```

我会看到结果，但是如果我想从中运行它，`Java`我会遇到问题。

我正在尝试这样做：

```
String command = "cmd.exe /c start cd A/\ncall a.bat";
try {
    Runtime.getRuntime().exec(command); 
} catch (IOException e) { } 
```

我试图`\n`用`;`和用`\r`和用替换，`&&`但没有奏效。（它不承认存在两条线）。

如何从`.bat`from运行多行`Java`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:16:13.170

您可以在生成点从 Java 端设置进程的工作目录`cmd`，而不需要`cd`命令：

```
ProcessBuilder pb = new ProcessBuilder("cmd.exe", "/c", "a.bat");
pb.directory(new File("path\\to\\A"));
Process p = pb.start(); 
```

# javascript - 打开新窗口而不关注它

> ID：15133605
> 
> 赞同：34
> 
> 时间：2013-02-28T10:51:46.100
> 
> 标签：javascript, jquery, html, dom

我有这样的情况。我尝试`window.open`在主窗口的前面打开一个具有新窗口功能的窗口，我如何在主窗口的背景中打开它，而不关注新窗口。有可能做这样的事情吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-28T10:58:59.487

您所寻求的称为[“弹出式”窗口](http://www.javascriptkit.com/script/script2/popunder.shtml)

*   使用打开一个新窗口[`let handle = window.open()`](https://developer.mozilla.org/en-US/docs/Web/API/Window/open)
*   通过使用失去新窗口的焦点[`handle.blur()`](https://developer.mozilla.org/en-US/docs/Web/API/Window/blur)
*   使用将焦点返回到现有窗口[`window.focus()`](https://developer.mozilla.org/en-US/docs/Web/API/Window/focus)

但是，这不是保证，因为用户浏览器设置可能会覆盖此行为，尤其是弹出窗口阻止程序。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-28T10:58:14.790

不，你不能在主窗口后面打开窗口。如果您正在使用，`window.open()`那么它将位于主窗口的顶部。这就是弹出窗口的工作原理。
或者你可以这样做

```
Window.open(); 
yourMainWindow.focus(); 
```

* * *

## 回答 #3

> 赞同：-15
> 
> 时间：2013-02-28T11:02:02.040

尝试使用以下

```
window.open("http://localhost/123", '_blank'); 
```

# mysql - Using GROUP_CONCAT in Mysql Queries

> ID：15133606
> 
> 赞同：0
> 
> 时间：2013-02-28T10:51:46.713
> 
> 标签：mysql, sql

I have five tables in my database that I am working with. Everything works well till I start selecting states from the database using group concat.

These are my tables:

*   main_jobs
*   sub_jobs
*   category
*   state
*   state_job_relationship

Snippet of my table creation

```
create table if not exists category (
    id int(3) not null auto_increment,
    parent int(5) not null,
    name varchar(255) not null,
    description text,
    slug varchar(255),
    level int (3),
    PRIMARY KEY (id, slug));

create table if not exists state (
        id int(4) not null auto_increment,
        country_id int(11) not null,
        name varchar(255) not null,
        PRIMARY KEY (id),
        FOREIGN KEY (country_id) REFERENCES country (id))";

create table if not exists state_job_relationship (
        id int(4) not null auto_increment,
        state_id int(4) not null, FOREIGN KEY (state_id) REFERENCES state (id),
        job_id int(11) not null, FOREIGN KEY (job_id) REFERENCES sub_jobs (id),
        PRIMARY KEY (id));

create table if not exists main_jobs (
            id int not null auto_increment, primary key(id),
            company_name varchar(255),
            job_title varchar(255));

create table if not exists sub_jobs (
            id int not null auto_increment, primary key(id),
            parent_id int(11) not null, FOREIGN KEY (parent_id) REFERENCES main_jobs (id),
            title varchar(255),
            description text not null,
            category int (3), FOREIGN KEY (category) REFERENCES category (id)
            ); 
```

This is what I want to select:

The job titles from the sub jobs tables, with the corresponding company name and other details from main_jobs and category table.

All worked well till I needed to select the states each sub_job falls in this format: State1, State2, State3

```
select sub_jobs.id as kid, main_jobs.id as parentid, 
  company_name, sub_jobs.description, sub_jobs.title, 
  job_title, category.name as ind, 
  DATE_FORMAT($column_date,'%a, %e %b %Y %T') as d, 
  (select group_concat(name seperator ', ') 
   from state_job_relationship, state 
   where job_id= kid 
     and state.id=state_job_relationship.state_id 
   group by state.id) states 
from sub_jobs, category, main_jobs 
where category.id=sub_jobs.category 
  and main_jobs.id=sub_jobs.parent_id 
order by featured desc , $table.id desc 
limit 100; 
```

Tried the query above but it displays this error:

> You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'seperator ', ') from state_job_relationship, state where job_id= kid and state.i' at line 1

Please what am I not getting right?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:28:18.910

看起来您的错误是因为您`kid`在相关子查询中使用了 alais。您应该将 替换`kid`为`sub_jobs.id`。

你也`seperator`拼错了。

所以你的代码将是：

```
select s.id as kid, 
  m.id as parentid, 
  company_name, 
  s.description, 
  s.title, 
  job_title, 
  c.name as ind, 
  DATE_FORMAT($column_date,'%a, %e %b %Y %T') as d, 
  (select group_concat(name SEPARATOR ', ') 
   from state_job_relationship
   inner join state 
     on state.id=state_job_relationship.state_id 
   where job_id= s.id 
   group by state.id) states 
from sub_jobs s
inner join category c
  on c.id=s.category 
inner join main_jobs m
  on m.id=s.parent_id 
order by featured desc , $table.id desc 
limit 100; 
```

您会注意到我将您的语法更改为使用 ANSI JOIN 语法，并且我为表使用了别名。

我的另一个建议是使用子查询并加入子查询：

```
select s.id as kid, 
  m.id as parentid, 
  company_name, 
  s.description, 
  s.title, 
  job_title, 
  c.name as ind, 
  DATE_FORMAT($column_date,'%a, %e %b %Y %T') as d, 
  st.states 
from sub_jobs s
inner join category c
  on c.id=s.category 
inner join main_jobs m
  on m.id=s.parent_id 
left join
(
  select job_id, state.id, group_concat(name SEPARATOR ', ') states
  from state_job_relationship
  inner join state 
    on state.id=state_job_relationship.state_id 
  group by state.id, job_id
) st
  on st.job_id= s.id
order by featured desc , $table.id desc 
limit 100; 
```

# regex - 如何使用 sed 删除非 ascii 字符

> ID：15133607
> 
> 赞同：10
> 
> 时间：2013-02-28T10:51:46.007
> 
> 标签：regex, linux, unix, sed, non-ascii-characters

我想从某个文件中删除非 ascii 字符。我已经尝试过这么多的正则表达式。

```
sed -e 's/[\d00-\d128]//g'  # not working

cat /bin/mkdir | sed -e 's/[\x00-\x7F]//g' >/tmp/aa 
```

但是这个文件包含一些非 ascii 字符。

```
[root@asssdsada ~]$ hexdump /tmp/aa |more
          00 01 02 03 04 05 06 07 - 08 09 0A 0B 0C 0D 0E 0F  0123456789ABCDEF

00000000  45 4C 46 B0 F0 73 38 C0 - C0 BC BC FF FF 61 61 61  ELF..s8......aaa
00000010  A0 A0 50 E5 74 64 50 57 - 50 57 50 57 D4 D4 51 E5  ..P.tdPWPWPW..Q.
00000020  74 64 6C 69 62 36 34 6C - 64 6C 69 6E 75 78 78 38  tdlib64ldlinuxx8
00000030  36 36 34 73 6F 32 47 4E - 55 42 C8 C0 80 70 69 42  664so2GNUB...piB
00000040  44 47 BA E3 92 43 45 D5 - EC 46 E4 DE D8 71 58 B9  DG...CE..F...qX.
00000050  8D F1 EA D3 EF 4B 86 FC - A9 DA 79 ED 63 B5 51 92  .....K....y.c.Q.
00000060  BA 6C FC D1 69 78 30 ED - 74 F1 73 95 CC 85 D2 46  .l..ix0.t.s....F
00000070  A5 B4 6C 67 DA 4A E9 9A - 4B 58 77 A4 37 80 C0 4F  ..lg.J..KXw.7..O
00000080  F3 E9 B2 77 65 97 74 F9 - A2 C0 F2 CC 4A 9C 58 A1  ...we.t.....J.X. 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-28T11:36:05.273

这似乎不适用于`sed`. 也许`tr`会做？

```
tr -d '\200-\377' 
```

或者用补语：

```
tr -cd '\000-\177' 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-18T15:33:11.643

你试过了吗

```
cat /bin/mkdir | tr -cd "[:print:]" 
```

我认为它解决了问题？

如果您只对文本内容感兴趣，您也可以使用

```
cat /bin/mkdir | strings 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T10:56:49.417

你知道文件当前使用的是什么编码吗？如果是这样，您可以使用 iconv 对其进行转换。它是一种从一种字符编码转换为另一种字符编码的实用程序。因此，如果原始文件是 UTF-8 并且您想转换为 ASCII，您可以使用以下内容：

```
iconv -f utf8 -t ascii <inputfile> 
```

输入文件上的 file 命令可能会告诉您当前的编码。

有趣的是，如果您知道文件内容的语言，有一个名为[enca](http://linux.die.net/man/1/enca)的命令会尽力确定所使用的字符编码。

[另一个问题](https://stackoverflow.com/questions/3337936/remove-non-ascii-characters-from-csv)可能就是答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-22T00:20:41.983

这里提供的解决方案对我不起作用。也许我的问题不同，但我需要从纯 ASCII 文本中去除 ASCII 颜色和其他字符。

但是，以下内容对我有用：

从 ASCII 文本中去除转义码

```
sed -E 's/\x1b\[[0-9]*;?[0-9]+m//g' 
```

在上下文中（BASH）：

```
$ printf "\e[32;1mhello\e[0m\n"
hello

$ printf "\e[32;1mhello\e[0m\n" | cat -vet
^[[32;1mhello^[[0m$

$ printf "\e[32;1mhello\e[0m\n" | sed -E 's/\x1b\[[0-9]*;?[0-9]+m//g' | cat -vet
hello$ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-12T14:07:32.657

尝试使用**sed -i**选项，例如。

```
sed -i 's/[\d128-\d255]//g' MYFILE.txt 
```

它将替换文件中的所有非ASCII字符。

# java - Maven类后处理

> ID：15133609
> 
> 赞同：3
> 
> 时间：2013-02-28T10:51:54.623
> 
> 标签：java, maven, maven-plugin, aggregate

我开发了一个带有 @aggregator 注释的 maven 插件。

如果我跑

```
mvn clean compile my:artifact:task package 
```

然后它编译2次。

所以我将这个片段插入我的 pom

```
<plugin>
   <groupId>my</groupId>
   <artifactId>artifact</artifactId>
   <version>1.0.0-SNAPSHOT</version>
   <executions>
       <execution>
           <id>post-classes</id>
           <phase>process-classes</phase>
           <goals>
              <goal>task</goal>
           </goals>
      </execution>
   </executions>
</plugin> 
```

但随后它将在每个模块上运行（@aggregator 似乎被忽略了）。

编译后如何让插件运行一次？

**编辑：** 我的问题是指 eclipse tycho 的默认生命周期。但是有一个[重大错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=388909)，所以我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:30:44.653

从此：[_](http://docs.codehaus.org/display/MAVEN/Aggregator+Plugins)

> 对于直接从 CLI 执行的 mojo，mojo 只会执行一次，而不是针对反应器中的每个项目执行。对于绑定到生命周期阶段的 mojo，将为存在生命周期绑定的每个项目执行 mojo。

你有两个选择：

*   如果你坚持使用聚合器注解：移除生命周期绑定并通过命令行运行，例如“mvn clean compile my:artifact:task jar:jar”。与[assembly:assembly](http://www.sonatype.com/books/mvnref-book/reference/assemblies-sect-basics.html)类似，它被设计为直接从命令行调用，并且永远不应绑定到构建生命周期阶段。

*   如果您坚持将插件绑定到生命周期，请删除聚合器注释并遵循[本文](http://www.sonatype.com/people/2009/05/how-to-make-a-plugin-run-once-during-a-build/)。这个想法是检查 maven*当前*运行的项目属性。

# vb.net-2010 - my datagridview2 shows the same data with my datagridview1

> ID：15133615
> 
> 赞同：0
> 
> 时间：2013-02-28T10:52:14.347
> 
> 标签：vb.net-2010

I have this 2 datagridview one is in form 2 and the other is in from3\. And I have this log in in form 1.

If a user logs in and his position is pharmacist he will then proceed to form2 and datagridview1 should display all the data of my table pharmacy in my database. After that he logged out.

If a new user logged for example the admin he will then proceed to form 3 and datagridview2 should show him data of the list of employees from table employees in my database.

The problem is datagridview2 shows the lists of all the medicines which is the content of my datagridview1.

here is my code

here is my code for my datagridview1

```
Call main()
        sql = "SELECT * FROM PHARMACY"
        con.Open()
        da = New SqlDataAdapter(sql, con)
        cmd = New SqlCommandBuilder(da)
        da.Fill(mytable)
        MyBind.DataSource = mytable
        MyGrid.DataSource = MyBind
        con.Close()

and here is my code for my datagridview2

        Call main()
        con.Open()
        sql = "SELECT * FROM ACCOUNTS WHERE ASTATUS = 'Pending' "
        da = New SqlDataAdapter(sql, con)
        cmd = New SqlCommandBuilder(da)
        da.Fill(mytable)
        myBind3.DataSource = mytable
        myGrid3.DataSource = myBind3
        con.close() 
```

# javascript - 如何在openlayers中获取线的经度和纬度

> ID：15133616
> 
> 赞同：0
> 
> 时间：2013-02-28T10:52:15.730
> 
> 标签：javascript, openlayers

我得到线的纬度和经度

线串（1491215.4689647 6893983.2031826,1494163.0718675 6894785.7919795）

看到这个解决方案后。 [如何从 OpenLayers.Control.DrawFeature 获取积分返回](https://stackoverflow.com/questions/12967967/how-to-get-points-return-from-openlayers-control-drawfeature/12976920#comment21229373_12976920)

现在我想做的是我想在我的网页上显示起点和终点。那么如何从这里提取纬度和经度，以便在我的页面中显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:08:53.603

那是 WKT 格式，你正在看。如果它们不在同一个投影中，您可能需要将这些坐标重新投影到目标投影。之后，您应该能够使用基本几何功能向 openlayers 询问任何给定几何的点。从线串实例中获取点数组并对其进行迭代。确保您知道投影/数据模型的正确坐标顺序。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:19:54.177

如果您的线串已经在 OpenLayers 中，则没有理由将其转换为 WKT。线串几何包含点数组。您可以通过多种方式访问​​几何组件，例如：

```
drawControls[key].events.register('featureadded', drawControls[key], function(f) {

    // First point
    var firstPointGeom = f.feature.geometry.components[0].clone();

    // Last point
    var secondPointGeom = f.feature.geometry.components[f.feature.geometry.components.length - 1].clone();

    // Now you got geometries, let's create features from them...
    var firstPointFeat = new OpenLayers.Feature.Vector(firstPointGeom);
    var secondPointGeom = new OpenLayers.Feature.Vector(secondPointGeom);

    yourVectorLayer.addFeatures([firstPointFeat, secondPointGeom]);

}); 
```

注意 - 这适用于 LineStrings。可能没有必要详细介绍`clone()`，这取决于特定的用例，无论您是否需要它，或者您可以只使用`var firstPointGeom = f.feature.geometry.components[0];`

# jquery - HTML 图像未在 chrome 中显示，并且 jQuery 更改在 IE 中不起作用

> ID：15133622
> 
> 赞同：0
> 
> 时间：2013-02-28T10:52:27.767
> 
> 标签：jquery, html, css, image

正如标题所说，我有两个问题，第一个很奇怪，另一个可能是我对 jQuery 不够了解。

这是第一个：

我有一张图片没有在谷歌浏览器中显示，它可以在本地工作，它可以在 Firefox 和 IE 7 上在线工作，但不能在谷歌浏览器上工作。这是HTML代码：

```
<div class="advert">
    <a href="#">
        <img src="img/advert.png" alt="publicité">
    </a>
</div> 
```

当然，我还决定为 CSS 中的所有这些元素添加 float:left、显示块、高度和宽度。不过，Google chrome 检查器甚至不显示 HTML 标记。

第二个问题是（对不起，如果不允许 2 个问题，如果是这样，我将创建另一个主题）：

我有一个 jQuery 代码来使用选项框更改 div 的内容，它适用于 Firefox、Chrome、IE8。但不是在 IE7 上。这是HTML代码：

```
<div class="styled-select">
    <select id="bloc">
       <option value="france">Régions administratives</option>
       <option value="meunerie">Régions meunières</option>
    </select>
</div>
<div class="cartes-choix">
    <div class="france">
        //Image here
    </div>
    <div class="meunerie">
        //Image here
    </div>
</div> 
```

这是jQuery代码：

```
$(document).ready(function(){
     $('#bloc').change(function(){
            $('.france').hide();
            $('.meunerie').hide();
            $('.' + $(this).val()).show();
     });
}); 
```

我提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:03:49.713

对于第一个问题。

请检查您是否没有在 chrome 中安装任何添加阻止程序扩展程序？如果您已安装，请禁用它，然后尝试。

或者只是禁用 chrome 中的所有扩展并尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:59:36.437

您忘记了 img 标签中的结束“/”：

```
<div class="advert">
<a href="#">
    <img src="img/advert.png" alt="publicité" />
</a>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:03:31.210

[您可以在http://jsfiddle.net/](http://jsfiddle.net/)中发布您的代码， 这可能是使用 Photoshop 更改图像位或颜色方案的问题

# sql - 查询以跨数据库行获取匹配多个值的数据

> ID：15133624
> 
> 赞同：0
> 
> 时间：2013-02-28T10:52:30.427
> 
> 标签：sql, oracle

嗨，我需要有关 sql 查询的帮助。结果必须与行中单个列的值匹配。这是一个例子。我需要找出必须出售所有这些物品的商店：书籍、文具和玩具。

```
Store Items
----- --------
AA     PERFUMES
AA     TOYS
BB     STATIONERY
BB     BOOKS
BB     TOYS 
```

在上面的示例中，“BB”是唯一匹配我们所有条件的存储，因此是查询的预期结果。

我尝试使用 AND 运算符 ( `select store from storeitem where items = 'books' and items ='toys' and items='stationery';`) 进行查询，但它没有工作，因为它期望同一行中的所有值和 in 运算符 ( `select store from storeitem where items in ('books','stationery','toys');`) ，这不遵循必须匹配所有值标准。在这方面需要你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:43:17.673

您可以一起跳过使用子查询并使用`HAVING DISTINCT`子句返回您需要的商店。

```
SELECT  store, COUNT(*)
FROM    your_table
WHERE   items in ('STATIONAIRY', 'BOOKS', 'TOYS')
GROUP BY
        store
HAVING  COUNT(DISTINCT items) = 3
; 
```

**例子**

```
WITH your_table as (
  SELECT 'AA' as Store, 'PERFUMES' as Items FROM dual UNION ALL
  SELECT 'AA', 'TOYS' FROM dual UNION ALL
  SELECT 'BB', 'STATIONAIRY' FROM dual UNION ALL
  SELECT 'BB', 'BOOKS' FROM dual UNION ALL
  SELECT 'BB', 'TOYS' FROM dual
)
SELECT  store, COUNT(*)
FROM    your_table
WHERE   items in ('STATIONAIRY', 'BOOKS', 'TOYS')
GROUP BY
        store
HAVING  COUNT(DISTINCT items) = 3
; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T11:11:19.017

```
select store
from (
  select distinct store, items
  from your_table
  where items in ('books','stationery','toys')
)
group by store
having count(0) = 3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T11:02:14.657

这是应该工作的一般方法（未专门在 Oracle 上测试）：

```
select store from (
  select store,
         max(case when items = 'stationery' then 1 else 0 end) as has_stationery,
         max(case when items = 'books'      then 1 else 0 end) as has_books,
         max(case when items = 'toys'       then 1 else 0 end) as has_toys
    from your_table
    group by store
  ) as stores_by_item
  where has_stationery = 1 and has_books = 1 and has_toys = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T12:05:16.937

如果我正确理解您的问题，您需要该查询：

从 storeitem where store 中选择 store（从 storeitem where items = 'books' 中选择 store）

并存储在（从 item ='toys' 的 storeitem 中选择存储）

并存储在（从 item='stationairy' 的 storeitem 中选择存储）

# c# - 在 ZipArchive C# .Net 4.5 中创建目录

> ID：15133626
> 
> 赞同：38
> 
> 时间：2013-02-28T10:52:32.037
> 
> 标签：c#, .net, zip, .net-4.5

ZipArchive 是 ZipArchiveEntries 的集合，添加/删除“条目”效果很好。但似乎没有目录/嵌套“档案”的概念。理论上，该类与文件系统分离，因为您可以完全在内存流中创建存档。但是，如果您希望在存档中添加目录结构，则必须在条目名称前加上路径。

**问题：**您将如何扩展 ZipArchive 以创建更好的界面来创建和管理目录？

例如，当前将文件添加到目录的方法是使用目录路径创建条目：

```
var entry = _archive.CreateEntry("directory/entryname"); 
```

而沿着这些思路的东西对我来说似乎更好：

```
var directory = _archive.CreateDirectoryEntry("directory");
var entry = _directory.CreateEntry("entryname"); 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-09-25T12:16:45.660

您可以使用以下内容，换句话说，手动创建目录结构：

```
using (var fs = new FileStream("1.zip", FileMode.Create))
using (var zip = new ZipArchive(fs, ZipArchiveMode.Create))
{
    zip.CreateEntry("12/3/"); // just end with "/"
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2018-07-25T08:43:49.490

我知道我迟到了（7.25.2018），

即使使用递归目录，这对我来说也完美无缺。

首先，记得安装 NuGet 包：

`Install-Package System.IO.Compression`

然后，扩展文件`ZipArchive`：

```
 public static class ZipArchiveExtension {

     public static void CreateEntryFromAny(this ZipArchive archive, string sourceName, string entryName = "") {
         var fileName = Path.GetFileName(sourceName);
         if (File.GetAttributes(sourceName).HasFlag(FileAttributes.Directory)) {
             archive.CreateEntryFromDirectory(sourceName, Path.Combine(entryName, fileName));
         } else {
             archive.CreateEntryFromFile(sourceName, Path.Combine(entryName, fileName), CompressionLevel.Fastest);
         }
     }

     public static void CreateEntryFromDirectory(this ZipArchive archive, string sourceDirName, string entryName = "") {
         string[] files = Directory.GetFiles(sourceDirName).Concat(Directory.GetDirectories(sourceDirName)).ToArray();
         archive.CreateEntry(Path.Combine(entryName, Path.GetFileName(sourceDirName)));
         foreach (var file in files) {
             archive.CreateEntryFromAny(file, entryName);
         }
     }
 } 
```

然后你可以打包任何东西，无论是文件还是目录：

```
using (var memoryStream = new MemoryStream()) {
    using (var archive = new ZipArchive(memoryStream, ZipArchiveMode.Create, true)) {
        archive.CreateEntryFromAny(sourcePath);
    }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-10-21T16:19:30.597

如果您正在开发一个可以使用完整 .NET 的项目，您可以尝试使用 ZipFile.CreateFromDirectory 方法，如下[所述](http://msdn.microsoft.com/en-us/library/hh485721(v=vs.110).aspx%5C)：

```
using System;
using System.IO;
using System.IO.Compression;

namespace ConsoleApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            string startPath = @"c:\example\start";
            string zipPath = @"c:\example\result.zip";
            string extractPath = @"c:\example\extract";

            ZipFile.CreateFromDirectory(startPath, zipPath, CompressionLevel.Fastest, true);

            ZipFile.ExtractToDirectory(zipPath, extractPath);
        }
    }
} 
```

当然，这仅在您基于给定目录创建新 Zip 时才有效。

根据评论，以前的解决方案不保留目录结构。如果需要，那么下面的代码可能会解决这个问题：

```
 var InputDirectory = @"c:\example\start";
    var OutputFilename = @"c:\example\result.zip";
    using (Stream zipStream = new FileStream(Path.GetFullPath(OutputFilename), FileMode.Create, FileAccess.Write))
    using (ZipArchive archive = new ZipArchive(zipStream, ZipArchiveMode.Create))
    {
        foreach(var filePath in System.IO.Directory.GetFiles(InputDirectory,"*.*",System.IO.SearchOption.AllDirectories))
        {
            var relativePath = filePath.Replace(InputDirectory,string.Empty);
            using (Stream fileStream = new FileStream(filePath, FileMode.Open, FileAccess.Read))
            using (Stream fileStreamInZip = archive.CreateEntry(relativePath).Open())
                fileStream.CopyTo(fileStreamInZip);
        }
    } 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-28T11:15:54.830

这是一种可能的解决方案：

```
public static class ZipArchiveExtension
{
    public static ZipArchiveDirectory CreateDirectory(this ZipArchive @this, string directoryPath)
    {
        return new ZipArchiveDirectory(@this, directoryPath);
    }
}

public class ZipArchiveDirectory
{
    private readonly string _directory;
    private ZipArchive _archive;

    internal ZipArchiveDirectory(ZipArchive archive, string directory)
    {
        _archive = archive;
        _directory = directory;
    }

    public ZipArchive Archive { get{return _archive;}}

    public ZipArchiveEntry CreateEntry(string entry)
    {
        return _archive.CreateEntry(_directory + "/" + entry);
    }

    public ZipArchiveEntry CreateEntry(string entry, CompressionLevel compressionLevel)
    {
        return _archive.CreateEntry(_directory + "/" + entry, compressionLevel);
    }
} 
```

并使用：

```
var directory = _archive.CreateDirectory(context);
var entry = directory.CreateEntry(context);
var stream = entry.Open(); 
```

但我可以预见嵌套问题，也许。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-04-30T06:09:59.047

我也在寻找类似的解决方案，发现@Val 和@sDima 的解决方案对我来说更有希望。但我发现代码存在一些问题，并修复了它们以与我的代码一起使用。

和@sDima 一样，我也决定使用 Extension 为 ZipArchive 添加更多功能。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.IO.Compression;
using System.IO;

namespace ZipTest
{
   public static class ZipArchiveExtensions
   {
      public static void CreateEntryFromAny(this ZipArchive archive, string sourceName, string entryName, CompressionLevel compressionLevel = CompressionLevel.Optimal)
    {
        try
        {
            if (File.GetAttributes(sourceName).HasFlag(FileAttributes.Directory))
            {
                archive.CreateEntryFromDirectory(sourceName, entryName, compressionLevel);
            }
            else
            {
                archive.CreateEntryFromFile(sourceName, entryName, compressionLevel);
            }
        }
        catch
        {
            throw;
        }
    }

    public static void CreateEntryFromDirectory(this ZipArchive archive, string sourceDirName, string entryName, CompressionLevel compressionLevel)
    {
        try
        {
            var files = Directory.EnumerateFileSystemEntries(sourceDirName);
            if (files.Any())
            {
                foreach (var file in files)
                {
                    var fileName = Path.GetFileName(file);
                    archive.CreateEntryFromAny(file, Path.Combine(entryName, fileName), compressionLevel);
                }
            }
            else
            {
                //Do a folder entry check.
                if (!string.IsNullOrEmpty(entryName) && entryName[entryName.Length - 1] != '/')
                {
                    entryName += "/";
                }

                archive.CreateEntry(entryName, compressionLevel);
            }
        }
        catch
        {
            throw;
        }
      }
    }
  } 
```

您可以使用下面给出的简单方法尝试扩展，

```
 class Program
 {
    static void Main(string[] args)
    {
        string filePath = @"C:\Users\WinUser\Downloads\Test.zip";
        string dirName = Path.GetDirectoryName(filePath);

        if (File.Exists(filePath))
            File.Delete(filePath);

        using (ZipArchive archive = ZipFile.Open(filePath, ZipArchiveMode.Create))
        {
            archive.CreateEntryFromFile( @"C:\Users\WinUser\Downloads\file1.jpg", "SomeFolder/file1.jpg", CompressionLevel.Optimal);
            archive.CreateEntryFromDirectory(@"C:\Users\WinUser\Downloads\MyDocs", "OfficeDocs", CompressionLevel.Optimal);
            archive.CreateEntryFromAny(@"C:\Users\WinUser\Downloads\EmptyFolder", "EmptyFolder", CompressionLevel.Optimal);
        };

        using (ZipArchive zip = ZipFile.OpenRead(filePath))
        {
            string dirExtract = @"C:\Users\WinUser\Downloads\Temp";
            if (Directory.Exists(dirExtract))
            {
                Directory.Delete(dirExtract, true);
            }

            zip.ExtractToDirectory(dirExtract);
        }
     }
   } 
```

我试图从 .Net 框架中为扩展方法保留标准 CreateEntryFromFile 的确切行为。

要使用给出的示例代码，请添加对 System.IO.Compression.dll 和 System.IO.Compression.FileSystem.dll 的引用。

以下是这个扩展类的优点

1.  递归添加文件夹内容。
2.  支持空文件夹。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-04-13T17:38:12.993

我的回答是基于 Val 的回答，但在性能方面有所改进，并且不会在 ZIP 中生成空文件。

```
public static class ZipArchiveExtensions
{
    public static void CreateEntryFromAny(this ZipArchive archive, string sourceName, string entryName = "")
    {
        var fileName = Path.GetFileName(sourceName);
        if (File.GetAttributes(sourceName).HasFlag(FileAttributes.Directory))
        {
            archive.CreateEntryFromDirectory(sourceName, Path.Combine(entryName, fileName));
        }
        else
        {
            archive.CreateEntryFromFile(sourceName, Path.Combine(entryName, fileName), CompressionLevel.Optimal);
        }
    }

    public static void CreateEntryFromDirectory(this ZipArchive archive, string sourceDirName, string entryName = "")
    {
        var files = Directory.EnumerateFileSystemEntries(sourceDirName);
        foreach (var file in files)
        {
            archive.CreateEntryFromAny(file, entryName);
        }
    }
} 
```

使用示例：

```
// Create and open a new ZIP file
                using (var zip = ZipFile.Open(ZipPath, ZipArchiveMode.Create))
                {
                    foreach (string file in FILES_LIST)
                    {
                        // Add the entry for each file
                        zip.CreateEntryFromAny(file);
                    }
                } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-01-12T14:15:36.010

一个更优化的`ZipArchive`扩展，它添加了文件夹结构，包括所有子文件夹和文件到 zip。已解决`IOException`（*进程无法访问文件...*），如果文件在压缩时刻正在使用，则抛出该文件，例如某些记录器

```
public static class ZipArchiveExtensions
{
    public static void AddDirectory(this ZipArchive @this, string path)
    {
        @this.AddDirectory(path, string.Empty);
    }

    private static void AddDirectory(this ZipArchive @this, string path, string relativePath)
    {
        var fileSystemEntries = Directory.EnumerateFileSystemEntries(path);

        foreach (var fileSystemEntry in fileSystemEntries)
        {
            if (File.GetAttributes(fileSystemEntry).HasFlag(FileAttributes.Directory))
            {
                @this.AddDirectory(fileSystemEntry, Path.Combine(relativePath, Path.GetFileName(fileSystemEntry)));
                continue;
            }

            var fileEntry = @this.CreateEntry(Path.Combine(relativePath, Path.GetFileName(fileSystemEntry)));

            using (var zipStream = fileEntry.Open())
            using (var fileStream = new FileStream(fileSystemEntry, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
            using (var memoryStream = new MemoryStream())
            {
                fileStream.CopyTo(memoryStream);

                var bytes = memoryStream.ToArray();
                zipStream.Write(bytes, 0, bytes.Length);
            }
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-02-13T22:36:32.387

@Andrey 的非常好的方法有一点变化

```
public static void CreateEntryFromDirectory2(this ZipArchive archive, string sourceDirName, CompressionLevel compressionLevel = CompressionLevel.Fastest)
    {
        var folders = new Stack<string>();

        folders.Push(sourceDirName);

        do
        {
            var currentFolder = folders.Pop();

            foreach (var item in Directory.GetFiles(currentFolder))
            {
                archive.CreateEntryFromFile(item, item.Substring(sourceDirName.Length + 1), compressionLevel);
            }

            foreach (var item in Directory.GetDirectories(currentFolder))
            {
                folders.Push(item);
            }
        } 
        while (folders.Count > 0);
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-01-25T20:02:36.867

对带有子文件夹的 Zip 文件夹使用递归方法。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.IO.Compression;

public static async Task<bool> ZipFileHelper(IFolder folderForZipping, IFolder folderForZipFile, string zipFileName)
{
    if (folderForZipping == null || folderForZipFile == null
        || string.IsNullOrEmpty(zipFileName))
    {
        throw new ArgumentException("Invalid argument...");
    }

    IFile zipFile = await folderForZipFile.CreateFileAsync(zipFileName, CreationCollisionOption.ReplaceExisting);

    // Create zip archive to access compressed files in memory stream
    using (MemoryStream zipStream = new MemoryStream())
    {
        using (ZipArchive zip = new ZipArchive(zipStream, ZipArchiveMode.Create, true))
        {
            await ZipSubFolders(folderForZipping, zip, "");
        }

        zipStream.Position = 0;
        using (Stream s = await zipFile.OpenAsync(FileAccess.ReadAndWrite))
        {
            zipStream.CopyTo(s);
        }
    }
    return true;
}

//Create zip file entry for folder and subfolders("sub/1.txt")
private static async Task ZipSubFolders(IFolder folder, ZipArchive zip, string dir)
{
    if (folder == null || zip == null)
        return;

    var files = await folder.GetFilesAsync();
    var en = files.GetEnumerator();
    while (en.MoveNext())
    {
        var file = en.Current;
        var entry = zip.CreateEntryFromFile(file.Path, dir + file.Name);                
    }

    var folders = await folder.GetFoldersAsync();
    var fEn = folders.GetEnumerator();
    while (fEn.MoveNext())
    {
        await ZipSubFolders(fEn.Current, zip, dir + fEn.Current.Name + "/");
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-07-08T14:57:23.323

我不喜欢@Val、@sDima、@Nitheesh 提出的递归。由于堆栈的大小有限，它可能会导致[StackOverflowException 。](https://docs.microsoft.com/en-us/dotnet/api/system.stackoverflowexception?view=netframework-4.5)所以这是我的两分钱树遍历。

```
public static class ZipArchiveExtensions
{
    public static void CreateEntryFromDirectory(this ZipArchive archive, string sourceDirName, CompressionLevel compressionLevel = CompressionLevel.Fastest)
    {
        var folders = new Stack<string>();
        folders.Push(sourceDirName);

        do
        {
            var currentFolder = folders.Pop();
            Directory.GetFiles(currentFolder).ForEach(f => archive.CreateEntryFromFile(f, f.Substring(sourceDirName.Length+1), compressionLevel));
            Directory.GetDirectories(currentFolder).ForEach(d => folders.Push(d));
        } while (folders.Count > 0);
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-08T05:34:43.847

它对我有用。

静态类

```
public static class ZipArchiveExtension
{

    public static void CreateEntryFromAny(this ZipArchive archive, string sourceName, string entryName = "")
    {
        var fileName = Path.GetFileName(sourceName);            
        if (File.GetAttributes(sourceName).HasFlag(FileAttributes.Directory))
        {
            archive.CreateEntryFromDirectory(sourceName, Path.Combine(entryName, fileName));
        }
        else
        {
            archive.CreateEntryFromFile(sourceName, Path.Combine(entryName, fileName), CompressionLevel.Fastest);
        }
    }

    public static void CreateEntryFromDirectory(this ZipArchive archive, string sourceDirName, string entryName = "")
    {
        string[] files = Directory.GetFiles(sourceDirName).Concat(Directory.GetDirectories(sourceDirName)).ToArray();

        if (files.Any())
        {

            foreach (var file in files)
            {
                archive.CreateEntryFromAny(file, entryName);
            }
        }
        else
        {
            if (!string.IsNullOrEmpty(entryName) && entryName[entryName.Length - 1] != '/')
            {
                entryName += "\\";
            }
            archive.CreateEntry(entryName);
        }

    }
} 
```

像这样调用方法

```
 byte[] archiveFile;

            using (var memoryStream = new MemoryStream())
            {
                using (var archive = new ZipArchive(memoryStream, ZipArchiveMode.Create, true))
                {
                        archive.CreateEntryFromAny(file.Path);

                }
                archiveFile = memoryStream.ToArray();
            } 
```

# iphone - How to increment a label value when click a button

> ID：15133627
> 
> 赞同：0
> 
> 时间：2013-02-28T10:52:32.617
> 
> 标签：iphone, ios, objective-c, xcode, ipad

In my iPad app.i want to increment a label value when click a button.

![enter image description here](../Images/b171ca39eb63259f76ef05af1d88eb15.png)

actually label values are sending from previous view. so now i clicked a button but the last label value was incremented. see the below picture.

in the above picture i want to increment the label value in between the minus(-) and plus(+) buttons. but when i clicked plus button in first view but the label value is incremented on the third view.

```
 **  the above three views shown on the picture are sub viewed the scroll view ** 
```

i'm using this code......

```
-(IBAction)plusbutton:(id)sender
{
    val = [sender tag];
    NSLog(@"the_tag %d",val);
    itemref.countVal++;
    [self createOrderView];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:31:19.320

根据您的拳头，在该单个视图中为 - 和 + 按钮和标签提供相同的标签值，因此当单击按钮操作中的按钮时

```
 NSArray *subviews=[self.scrollview subviews];  
            for(UIView *sb_local in subviews)  
                    {  
                            if(sb_local.tag==[sender tag])
                            {    

                                 if([sb_local isKindOfClass:[UILabel class]])
                                {    
                                      UILabel *new_label=(UILabel *)[sb_local viewWithTag:pictag];  
                                      new_label.text = @"your value";
                                 //[new_label.text intValue]you get int value from that label.Increment or decrement that int value according your (+,-)button actions and assign again it to that label.
                                }

                             }
                    } 
```

请将此代码放在 ibaction + 和 - 按钮中 请为每个视图中的 + 和 - 按钮提供不同的操作

# wpf - Bind Images in ComboBox using DataTemplate

> ID：15133628
> 
> 赞同：0
> 
> 时间：2013-02-28T10:52:33.923
> 
> 标签：wpf, xaml, .net-4.0, combobox, datatemplate

I am working on an existing code. This thing has got a ComboBox with a few ComboBoxItems. Each items has got a StackPanel withing which there is an Image control and a TextBlock.

Now the source property of the Image control is set to different vector images stored in XAML files whereas the Text property of the TextBlock is set to a localized string.

I want to implement this not by having separate ComboBoxItems but by using DataTemplate. I can create a List of the strings for the TextBlock but I am not able to figure out as to how can I bind the images to the respective Image Controls.

I am open to any other better possible solution. Also, if you think that the right way to do it is the existing one, please let me know.

This might be a duplicate question but I couldn't find one that caters to my issue. If it is, a link to the other question would suffice.

EDIT: Code Added

```
<ComboBox x:Name="imageInfoLevelsComboBox" SelectedIndex="1" 
          Style="{DynamicResource ComboBoxToolBarStyle}" 
          Margin="6,6,6,0" Width="50" 
          ToolTip="{x:Static Viewing:ViewingTexts.ImageInformationLevels}" 
          SelectionChanged="OnImageInfoLevelsComboBoxSelectionChanged" >
    <ComboBoxItem x:Name="showAllComboBoxItem" 
                  Style="{DynamicResource ComboBoxItemToolBarStyle}">
        <StackPanel Orientation="Horizontal">
            <Image x:Name="ImageInfoAllImage" 
                   Source="{StaticResource ImageInfoFullIcon}" 
                   Margin="0,0,4,0" 
                   Width="24" Height="24"/>
            <TextBlock 
                Text="{x:Static Viewing:ViewingTexts.ImageInformationFull}"
                Margin="10,0,0,0" 
                VerticalAlignment="Center"/>
        </StackPanel>
    </ComboBoxItem>
    <ComboBoxItem x:Name="showImportantComboBoxItem" 
        Style="{DynamicResource ComboBoxItemToolBarStyle}">
        <StackPanel Orientation="Horizontal">
            <Image x:Name="ImageInfoImportantImage" 
                   Source="{StaticResource ImageInfoLimitedIcon}" 
                   Margin="0,0,4,0" 
                   Width="24" Height="24"/>
            <TextBlock 
                Text="{x:Static Viewing:ViewingTexts.ImageInformationIntermediate}"
                       Margin="10,0,0,0" 
                       VerticalAlignment="Center"/>
        </StackPanel>
    </ComboBoxItem>
    <ComboBoxItem x:Name="showNotificationsComboBoxItem" 
        Style="{DynamicResource ComboBoxItemToolBarStyle}">
        <StackPanel Orientation="Horizontal">
            <Image x:Name="ImageInfoNotificationsImage" 
                Source="{StaticResource ImageInfoNoneIcon}" 
                Margin="0,0,4,0" Width="24" Height="24"/>
            <TextBlock Text="{x:Static Viewing:ViewingTexts.ImageInformationNone}"
                       Margin="10,0,0,0" VerticalAlignment="Center"/>
        </StackPanel>
    </ComboBoxItem>
</ComboBox> 
```

What I think I can do is create a class with 2 objects, one of type string and the other as Image. And then create a list and bind it with the combobox, but the issue is that I am nto sure how to use the vector image as an object.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:03:51.120

将 ComboBox 的 ItemsSource 绑定到具有表示文本和图像的属性的对象集合。然后，您需要创建一个 IValueConverter 并在您的图像绑定上指定它的一个实例，该实例可以将您对象上的属性值转换为图像源。

这是一个例子： http: [//www.codewrecks.com/blog/index.php/2010/07/23/bind-an-image-to-a-property-in-wpf/](http://www.codewrecks.com/blog/index.php/2010/07/23/bind-an-image-to-a-property-in-wpf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:22:00.503

我认为您需要绑定具有至少两个属性的对象列表，而不仅仅是字符串列表。一个属性将包含文本块的字符串，另一个属性将是图像的 urisource。

有关 urisource 定义的示例，请参阅此链接[Wpf - 相对图像源路径](https://stackoverflow.com/questions/1444699/wpf-relative-image-source-path)

# cascade - BB-z10 投递箱应用

> ID：15133629
> 
> 赞同：0
> 
> 时间：2013-02-28T10:52:35.880
> 
> 标签：cascade, blackberry-10, blackberry-cascades

我开发了一个应用程序，它遍历“/accounts/”文件夹中的所有文件并打开文件以满足某些特定需求，但是当我尝试运行该应用程序时，它开始从盒子应用程序下载图像，为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:15:47.647

Dropbox 和 Box 云文件夹似乎挂载到本地 BB10 文件系统中 shared/Dropbox 和 shared/Box 下的文件夹中。我假设这些文件夹的内容是在访问它们的那一刻下载的。

# asp.net - 使用应用程序主题时，如何最好地处理移动和桌面 CSS 检测

> ID：15133630
> 
> 赞同：0
> 
> 时间：2013-02-28T10:52:37.190
> 
> 标签：asp.net, css, mobile, themes, app-themes

我目前有一个使用主题将其作为 SkinA 或 SkinB 皮肤的 Web 应用程序。到目前为止，这一直是一个没有以任何方式专注于移动设备的 Web 应用程序，因此 site.css 文件（在两个 Theme 文件夹中）针对的是普通桌面设备。

但是，在不更改整个项目中的任何 Web 表单 aspx 文件的情况下，我现在需要创建这个 site.css 文件的移动版本（对于两个主题），它将改变布局，以便在查看时看起来更干净一点移动设备。

我在一篇听起来很合乎逻辑的文章中找到了以下片段，但是，由于使用了 Themes 文件夹（根据我对主题的了解，我认为所有 CSS 文件都会自动包含在内），我不确定我将如何完成这个。

摘自：http: [//mobile.smashingmagazine.com/2010/11/03/how-to-build-a-mobile-website/#mobile-stylesheets](http://mobile.smashingmagazine.com/2010/11/03/how-to-build-a-mobile-website/#mobile-stylesheets)

首先，定义两个样式表：screen.css 包含普通浏览器的所有内容，antiscreen.css 覆盖移动设备上不需要的任何样式。将这两个样式表绑定在另一个样式表 core.css 中：

```
@import url("screen.css");
@import url("antiscreen.css") handheld;
@import url("antiscreen.css") only screen and (max-device-width:480px); 
```

最后，为移动浏览器定义另一个带有额外样式的样式表held.css 并将它们链接到页面上：

```
<link rel="stylesheet" href="core.css" media="screen"/>
<link rel="stylesheet" href="handheld.css" media="handheld, only screen and (max-device-width:480px)"/> 
```

或者也许有更好的方法来实现这一点，同时保留主题的使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:40:33.520

我在我目前正在做的一个项目中遇到了这个问题。

一种方法是使用 Modernizr。

这是一个 JavaScript 库，您可以在 modernizr.com 上获得。

它将测试目标浏览器，如果它支持触摸事件，它将为您的网页元素添加一种“触摸”样式。一般来说，如果 Modernizr 这样做，它要么是平板电脑，要么是手机。然后，您在手机/平板电脑 css 的每种样式前加上“.touch”。

将此与媒体查询相结合，您应该能够处理大多数（可能不是全部）设备。

# c# - 使用 AjaxControlToolkit 运行网站时出错

> ID：15133631
> 
> 赞同：0
> 
> 时间：2013-02-28T10:52:42.167
> 
> 标签：c#, asp.net, ajax, ajaxcontroltoolkit, htmleditorextender

我在我的网站中使用 AjaxControlTookit。在我添加 HTMLEditorExtender 之前，该网站运行良好。然后出现的异常是

> 无法修改 Controls 集合，因为该控件包含代码块（即 <% ... %>）

我仅使用关于 stackoverflow.com 上的一个问题的建议解决了它。解决方案是从工具箱中删除 ajax control kit 选项卡，然后再次添加选项卡和项目并更新 dll 文件。

我更新了 DLL 文件并执行了那里给出的步骤。但是现在编译时错误来了。如下

> 错误 4 无法加载文件或程序集 'AjaxControlToolkit, Version=4.1.60501.0, Culture=neutral, PublicKeyToken=28f01b0e84b6d53e' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

请告诉我这个问题的解决方案是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:02:38.810

![在此处输入图像描述](../Images/e8f71459af27933a86c5d3b86e5d21e3.png)

在程序集文件夹中查找 System.Web.Extensions.Design 并相应地参考您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:11:59.670

确保在使用任何控件之前将脚本管理器添加到页面。此外，如果您使用的是 javascript，请尝试将您的代码移动到页面底部。我发现如果我从代码隐藏中动态地将内容添加到应用程序的头部，我会收到类似的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T10:15:01.447

谢谢大家，我通过将其重置为以前的错误情况解决了这个难题，即

> 无法修改 Controls 集合，因为该控件包含代码块（即 <% ... %>）

您可以在此处查看解决方案：[添加 AjaxControlToolkit 的 HTMLEditorExtender 后出错，](https://stackoverflow.com/questions/15171985/error-after-adding-ajaxcontroltoolkits-htmleditorextender)这是我对这个错误的另一个问题。

# java - 如何创建具有扩展权限的 Facebook 会话

> ID：15133633
> 
> 赞同：2
> 
> 时间：2013-02-28T10:52:51.293
> 
> 标签：java, android, facebook

如何在 facebook sdk 3.0 for android 中创建具有扩展权限的 facebook 会话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T14:28:07.807

你必须先登录用户。然后当您需要扩展权限时，请执行以下操作：（我已将其用于发布权限）

```
private static final List<String> PERMISSIONS = Arrays.asList("publish_actions");
private static final int REAUTH_ACTIVITY_CODE = 100;
// Check for publish permissions    
List<String> permissions = session.getPermissions();
if (!isSubsetOf(PERMISSIONS, permissions)) {
    Session.ReauthorizeRequest reauthRequest = new Session
           .ReauthorizeRequest(this, PERMISSIONS)
           .setRequestCode(REAUTH_ACTIVITY_CODE);
    session.reauthorizeForPublish(reauthRequest);
    return;
} 
```

`isSubsetOf()`：

```
private boolean isSubsetOf(Collection<String> subset, Collection<String> superset) {
  for (String string : subset) {
     if (!superset.contains(string)) {
         return false;
     }
  }
  return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:25:18.097

如果您使用 SDK（3.0 版）提供的 facebook [LoginButton](https://developers.facebook.com/docs/reference/android/3.0/LoginButton/)，它将为您处理大部分会话管理，您可以轻松地请求权限，如下所示：

```
 authButton.setReadPermissions(Arrays.asList("user_location", 
                               "user_birthday", "user_likes")); 
```

请参阅[文档](https://developers.facebook.com/docs/howtos/androidsdk/3.0/fetch-user-data/)以获取完整的教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T07:46:18.943

您可以设置权限：请参阅此[Graph api 不返回用户电子邮件 ID](https://stackoverflow.com/questions/17081621/graph-api-is-not-returning-user-email-id/17082098#17082098 "图形 api 不返回用户电子邮件 ID") 并[设置从 Facebook 登录获取用户电子邮件 ID 的权限](https://stackoverflow.com/questions/16332283/set-permission-for-getting-users-email-id-from-facebook-login "设置从 Facebook 登录获取用户电子邮件 ID 的权限")

# android - 循环列表视图android

> ID：15133637
> 
> 赞同：0
> 
> 时间：2013-02-28T10:53:21.917
> 
> 标签：android, listview

我正在处理我的循环列表视图。我实现了几乎所有的功能，但我有一些问题。当我的活动开始时，我的 listView 看起来像：[https ://dl.dropbox.com/u/44444463/Screenshot_2013-02-28-14-37-17.png](https://dl.dropbox.com/u/44444463/Screenshot_2013-02-28-14-37-17.png)

但这是不对的。它应该看起来像：[https ://dl.dropbox.com/u/44444463/Screenshot_2013-02-28-14-37-44.png](https://dl.dropbox.com/u/44444463/Screenshot_2013-02-28-14-37-44.png)

**这是我的问题。** 当活动开始时，它看起来像第一个屏幕截图。如果我触摸 listView 中的任何元素，或者滚动它（如果有很多元素），它就像在 screenshot2 中一样。正是我需要的。如何在活动开始时拍摄像 scrennshot 2 中的图像？

我在我的 listView 的 OnScrollListener 中重写了方法 @Override public void onScroll(..)，我在其中应用了所有填充：

```
 // int x = 30;
    for (int i = 0; i < visibleItemCount; ++i)
    {
        View v = listView.getChildAt(i);

        if (v != null)
        {

            LinearLayout rl = (LinearLayout) v.findViewById(R.id.rl);

            float sin = (float) (v.getTop() + v.getHeight() / 2 - centerOfCircle) / radius;
            double angle = Math.asin(sin);

            int x = (int) (-dXRow + radius * Math.cos(angle));

            if (x < 0)
                x = 0;

            Log.d("MN", "setPadding: " + x);

            rl.setPadding(x, 0, 0, 0);

        }
    } 
```

真的对不起我的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:56:41.103

您应该在 listView 的适配器的 getView() 方法中设置起始 peddings。然后根据需要重新计算它们 onScroll() 。

当 listView 出现时，不会调用 OnScroll 方法，只有在您滚动它时才会调用它。

# java - 长数字到日期/时间转换或逻辑？

> ID：15133641
> 
> 赞同：0
> 
> 时间：2013-02-28T10:53:25.983
> 
> 标签：java, android, numbers

我有一个 xml 文件，它以数字格式表示时间，例如

**1361988590126**代表日期/时间**27/02/2013 19:09**

通过搜索，我了解到这个日期/时间正在使用一些由 13 个数字组成的 java / javascript 代码转换为毫秒。

我需要知道这个逻辑是如何工作的，以及我如何能够解释这些数字以将它们转换为时间，反之亦然。

如果有人可以请给我一些关于如何从那个标准年份开始将这个时间转换为十进制的公式。1970

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:16:48.877

首先，看看这里：http: [//xkcd.com/1179/](http://www.roseindia.net/java/java-conversion/MillisecondToDate.shtml) :)

据我所知，它只是自 01.01.1970 以来的毫秒数，并且 Date 对象有一个构造函数，它知道如何处理它。您应该能够使用正确的`SimpeDateFormat`.

```
public class MillisecondToDate {
    public static void main(String[] args)throws Exception {
        long yourmilliseconds = 1119193190;
        SimpleDateFormat sdf = new SimpleDateFormat("MMM dd,yyyy HH:mm");

        Date resultdate = new Date(yourmilliseconds);
        System.out.println(sdf.format(resultdate));  
    } 
} 
```

可以通过谷歌轻松找到示例，例如[http://www.roseindia.net/java/java-conversion/MillisecondToDate.shtml](http://www.roseindia.net/java/java-conversion/MillisecondToDate.shtml) 和[http://www.java-examples.com/convert-date-milliseconds-example](http://www.java-examples.com/convert-date-milliseconds-example)

# mysql - 如何指定 GROUP BY 的顺序？

> ID：15133643
> 
> 赞同：0
> 
> 时间：2013-02-28T10:53:28.260
> 
> 标签：mysql

当我 GROUP BY QID 时，如何确保只返回最近的行？

```
ID, QID, VALUE, TIMESTAMP
45,1,Male,1362044759
58,1,Female,1362045122
59,1,Male,1362045149
60,1,Female,1362045153
82,1,Female,1362045863
83,1,Female,1362045887
92,1,Male,1362046012
101,1,Female, 1362046401

SELECT ID, QID, VALUE, TIMESTAMP FROM table GROUP BY ID 
```

...返回第一行。我不能简单地做一个 LIMIT 1，因为这只是一个例子，表中有很多 QID，它们都是分组的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:54:44.297

我在这里假设您想要每个`QID`. 您通常会使用派生表子查询来获取每个`QID`的最新`TIMESTAMP`值，然后加入：

```
SELECT ...
FROM myTable AS t
INNER JOIN (SELECT QID, MAX(`TIMESTAMP`) AS MaxT FROM myTable GROUP BY QID) l
    ON t.QID = l.QID AND l.maxT = t.`TIMESTAMP` 
```

这也是假设您的`TIMESTAMP`列随着时间的推移而增加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:58:16.233

您可以使用“GROUP_CONCAT”来提取分组数据。

```
SELECT GROUP_CONCAT(ID ORDER BY TIMESTAMP DESC) AS latest_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:58:33.230

如果要返回最新记录：

```
SELECT *
FROM TBL
ORDER BY `TIMESTAMP` DESC
LIMIT 1; 
```

否则，如果您想获取每组 QID 的最新记录，请查看此[Stack Overflow 帖子](https://stackoverflow.com/questions/1313120/retrieving-the-last-record-in-each-group)，该帖子以最佳解决方案处理您的相同问题。

# c++ - 为什么 decltype(*this) 不返回正确的类型？

> ID：15133644
> 
> 赞同：8
> 
> 时间：2013-02-28T10:53:31.543
> 
> 标签：c++, c++11, compiler-errors, overloading, decltype

以下代码使用 VC++ Nov 2012 CTP 编译。但是编译器给出了警告。

我只是想知道这是否是 VC++ Nov 2012 CTP 的错误。

```
struct A
{
    int n;

    A(int n)
        : n(n)
    {}

    int Get() const
    {
        return n;
    }

    int Get()
    {
        //
        // If using "static_cast<const A&>(*this).Get();" instead, then OK.
        //
        return static_cast<const decltype(*this)&>(*this).Get(); // Warning!
    }
};

int main()
{
    A a(8);

    //
    // warning C4717: 'A::Get' : recursive on all control paths,
    // function will cause runtime stack overflow
    //
    a.Get(); 
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-28T11:00:51.433

`decltype`应用于不是 id-expression 的表达式会给你一个参考，所以`decltype(*this)`is already `A&`，你不能再做`const`一次。如果你真的想使用`decltype`，你可以这样做：

```
static_cast<std::decay<decltype(*this)>::type const &>(*this) 
```

甚至这样：

```
static_cast<std::add_lvalue_reference<
                 std::add_const<
                      std::decay<decltype(*this)>::type
                 >::type
            >::type
>(*this) 
```

当然，直接说要简单得多`static_cast<A const &>(*this)`。

# php - 如何在 SQL 查询中根据一个条件更新 2 列

> ID：15133645
> 
> 赞同：0
> 
> 时间：2013-02-28T10:53:36.977
> 
> 标签：php, mysql, sql, tsql

我已经使用以下查询来更新我在 mysql 中的用户表

```
update users set user_likes = 
(CASE WHEN like_by_users NOT LIKE '%user_name%' 
AND dislikes_by_users NOT LIKE '%user_name%' 
THEN (user_likes +1) ELSE user_likes END)
WHERE post_id = '2221' 
```

这对我来说很好，但我也想像这样更新 likes_by_users

```
likes_by_users = CONCAT(likes_by_users,' ','user_name') 
```

我试过这样做

```
update users set user_likes = 
(CASE WHEN like_by_users NOT LIKE '%user_name%' 
AND dislikes_by_users NOT LIKE '%user_name%' 
THEN (user_likes +1), likes_by_users = CONCAT(likes_by_users,' ','user_name')  
ELSE user_likes END)
WHERE post_id = '2221' 
```

但它根本不起作用。我不想再次检查条件，但如果上述条件为真，那么它不仅应该更新 (user_likes) 和 (likes_by_users) 两列 (user_likes)，如果条件为假，那么它不应该更新任何列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:09:22.640

像这样试试

```
update users
Set user_likes = IF(like_by_users NOT LIKE '%user_name%' AND dislikes_by_users NOT LIKE '%user_name%',(user_likes + 1), user_likes),
  likes_by_users = IF(like_by_users NOT LIKE '%user_name%' AND dislikes_by_users NOT LIKE '%user_name%', CONCAT(likes_by_users,' ','user_name'), user_likes)
WHERE post_id = 2221 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:02:23.347

您可以在 WHERE 子句的帮助下做到这一点。

```
UPDATE `users`
SET `user_likes` = `user_level` + 1, `likes_by_users` = CONCAT(`likes_by_users`, ' ', 'user_name')
WHERE `post_id` = '2221'
AND `like_by_users` NOT LIKE '%user_name%' 
AND `dislikes_by_users` NOT LIKE '%user_name%' 
```

# haskell - Haskell Parsec 解释语法中的多个表达式出现

> ID：15133648
> 
> 赞同：0
> 
> 时间：2013-02-28T10:53:46.717
> 
> 标签：haskell, parsec

我一直在尝试使用以下[教程中的详细信息创建解析器](http://www.haskell.org/haskellwiki/Parsing_a_simple_imperative_language)

大部分代码是直接从教程中复制的，只更改了几个名称。

```
import qualified Text.ParserCombinators.Parsec.Token as P 

reserved   = P.reserved   lexer  
integer    = P.integer    lexer
whiteSpace = P.whiteSpace lexer
identifier = P.identifier lexer

data Express = Seq [Express]
          | ID String
          | Num Integer
          | BoolConst Bool
          deriving (Show)

whileParser :: Parser Express
whileParser = whiteSpace >> expr7

expr7 = seqOfStmt 
    <|> expr8        

seqOfStmt =         
    do list <- (sepBy1 expr8 whiteSpace)
    return $ if length list == 1 then head list else Seq list

expr8 :: Parser Express
expr8 = name 
    <|> number
    <|> bTerm

name :: Parser Express
name = fmap ID identifier

number :: Parser Express
number = fmap Num integer

bTerm :: Parser Express
bTerm = (reserved "True"  >> return (BoolConst True ))
    <|> (reserved "False" >> return (BoolConst False)) 
```

我知道这段代码可能很可笑，但我真的很想了解更多关于我哪里出错的信息。我也认为这应该提供足够的信息，但如果不让我知道。

```
Error:
parse error on input `return' 
```

我相信该错误与不同的返回类型有关，这很奇怪，因为我尝试使用文章开头的教程作为我所尝试的所有内容的基础。

提前致谢，

肖恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:19:26.680

如果您对布局规则不满意，您也可以使用不同的语法：

```
seqOfStmt =         
   do { list 
 <- (sepBy1 expr8 whiteSpace);
       return $ if length 
            list == 1 
        then head list else Seq list;} 
```

但是，没有大括号和分号的布局被认为是优越的，原因有两个：

1.  你不需要输入丑陋的; 和大括号
2.  它迫使你编写（大部分）可读的代码，不像我上面给出的扭曲的废话。

规则非常简单：

1.  不要使用制表符，使用空格。总是。（你的编辑可以这样做，如果没有，就把它扔掉，这是垃圾软件。）
2.  属于一起的事物必须在同一列中对齐。

例如，您有 2 个属于**do**块的语句，因此它们必须在同一列中对齐。但是您已将 与 对齐`return`，`do`因此编译器将其视为：

```
do { list <- sepBy1 expr8 whiteSpace; };
return $  ....; 
```

但你想要的是这样的：

```
do {
    list <- sepBy1 ....;
    return $ .....;
} 
```

（请注意，您可以省略大括号和分号，只要您保持缩进完好无损就可以了。

# android - 在列表视图上应用平滑滚动

> ID：15133654
> 
> 赞同：2
> 
> 时间：2013-02-28T10:54:13.940
> 
> 标签：android, android-listview, android-animation, smooth-scrolling

我正在按照此[链接](https://stackoverflow.com/questions/4432261/list-view-snap-to-item)上的答案在屏幕上一次跨越一项列表视图。它对我有用，但是项目向上移动并适合屏幕的滚动和动画运行不顺畅。

我搜索并发现**setSelectionFromTop**方法导致了这种情况。

但是，如果我使用**smoothScrollToPosition**，那么我无法满足在屏幕上放置一个项目的要求。

请帮我解决这个问题。我应该做什么才能实现两者

1.  在屏幕上一次适合一项列表视图
2.  滚动应该流畅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T00:15:02.707

首先，要一次只在屏幕上显示一个项目，您需要将每个项目的高度设置为与 ListView 的高度相匹配。

```
public View getView(int position, View convertView, ViewGroup parent) {
    ...
    int totalHeight = listView.getHeight();
    int rowHeight = totalHeight / getCount();
    // Set the row height for each of the rows
    ... 
```

一次只显示一个项目，在您使用 setSelectionFromTop() 或 smoothScrollToPosition() 的情况下，它最终会得到相同的结果。所以你现在可以使用 smoothScrollToPosition()。

另一种方法是尝试设置选择。

```
listView.setSelection(position)
listView.setSelectionAfterHeaderView() 
```

setSelectionAfterHeaderView 会将 ListView 滚动到正确的位置。

希望这可以帮助。

# php - 上传图像并为该图像创建缩略图？

> ID：15133655
> 
> 赞同：0
> 
> 时间：2013-02-28T10:54:16.440
> 
> 标签：php

我正在使用此代码从文章表单中获取数据，以保存文章的图像并将它们显示在新闻滑块中：

```
if(isset($_POST['submit']))
{
unset($_SESSION['firsttitle']);
unset($_SESSION['firstcontent']);
unset($_SESSION['title']);
unset($_SESSION['content']);
unset($_SESSION['thirdcontent']);

$_SESSION['title']=mysql_real_escape_string(trim($_POST['title']));
$_SESSION['content']=mysql_real_escape_string(trim($_POST['content']));
$weight=htmlentities(trim($_REQUEST['weight']),ENT_QUOTES);
$id=$_REQUEST['id'];
$time=mktime();

if($_FILES['picture']['name'])
    {
    $select="select * from ".$prev."news where id='$id'";
    $re_select=mysql_query($select);
    $d_select=mysql_fetch_array($re_select);

    if($d_select['picture']!='')
    {
    unlink("../".$d_select['picture']);
    }
    $picture="upload/".$time.$_FILES['picture']['name'];
    $path="../".$picture;

    move_uploaded_file($_FILES['picture']['tmp_name'],$path);
}
else
{
    $picture=$_POST['picturepath'];
}

if($id=='0' || !$_REQUEST['id'])
{
    $insert="insert into ".$prev."news (title,content,weight,picture,status,postedtime) values('".$_SESSION['title']."','".$_SESSION['content']."','$weight','$picture','Y','$time')";

    mysql_query($insert);
    $lastid=mysql_insert_id();
    unset($_SESSION['title']);
    unset($_SESSION['content']);
    @header("location:news-addnew.php?id=$lastid");
}
else
{
    $update="update ".$prev."news set  title='".$_SESSION['title']."',content='".$_SESSION['content']."',weight='$weight',picture='$picture',status='$status',postedtime='$time' where id='$id'";

    mysql_query($update);
    unset($_SESSION['title']);
    unset($_SESSION['content']);
    @header("location:news-addnew.php?id=$id");
}
} 
```

如何添加一个函数来将图像的缩略图保存在此代码保存原始图像的同一目录中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:12:48.357

看看这个链接： http: [//www.white-hat-web-design.co.uk/blog/resizing-images-with-php/](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/)

这里只是调整大小功能：

```
function resize($filename, $newfile, $width,$height) { 
    // open the original file
    $image = imagecreatefromjpeg($filename);

    // create a new blank image
    $new_image = imagecreatetruecolor($width, $height); 

    // copy the original, according to the specified width and height
    imagecopyresampled($new_image, $image, 0, 0, 0, 0, $width, $height, imagesx($image), imagesy($image)); 

    // save the new file to $newfile
    imagejpeg ($new_image, $newfile); 
} 
```

该链接中的更多详细信息。您可能应该使用 SimpleImage 类，它比我在这里提供的功能强大得多

# .htaccess - 301 重定向目录中不遵循当前规则的所有 404 页面

> ID：15133657
> 
> 赞同：0
> 
> 时间：2013-02-28T10:54:30.183
> 
> 标签：.htaccess, mod-rewrite

我目前在我的 .htaccess 文件中有此代码

```
RewriteCond %{QUERY_STRING} !product_id=(.*)
RewriteRule ^(.*)$ http://www.myurl.com/index.php [R=301] 
```

这个 301 根据产品 ID 将产品 URL 重定向到我的根目录。（我不是从别人那里得到的）

我需要做的是保持这个规则，同时将同一目录中的任何 404 页面重定向到主页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:01:06.903

您可以尝试在已有规则*之前添加这些规则：*

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ /? [L,R=301] 
```

这假设您正在谈论的主页是文档根目录。因此，例如，如果`/blah`不存在并且通常会导致 404，`http://yourdomain.com/blah`那么将重定向到`http://yourdomain.com/`.

# scala - 从响应中排除特定的 HEADERS

> ID：15133662
> 
> 赞同：1
> 
> 时间：2013-02-28T10:54:43.287
> 
> 标签：scala, playframework-2.0

如何从响应中删除标头（SimpleResult）

代码示例：

```
def NoCache[A](action: Action[A]): Action[A] = Action(action.parser) { request =>
    action(request) match {
        case s: SimpleResult[_] =>
            s.withHeaders(PRAGMA -> "no-cache")
            // remove all headers with name "ETAG" HERE ??
        case result => result
    }
} 
```

我在文档中没有找到这个功能。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:07:36.333

由于`SimpleResult`和`ResponseHeader`都是案例类，您可以复制它们来修改标题：

```
...
val headers = s.header.headers - ETAG + (PRAGMA -> "no-cache")
s.copy(header = s.header.copy(headers = headers))
... 
```

# android - 从广播接收器调用活动

> ID：15133664
> 
> 赞同：0
> 
> 时间：2013-02-28T10:54:46.133
> 
> 标签：android, android-activity, android-networking, android-broadcast

我是 android 的初学者，我正在开发一个应用程序，只要用户拨打电话，BrocastReceiver 就会启动...我正在尝试监视广播接收器内的网络状态...并且我正在尝试在用户启动活动挂断电话...但不幸的是它给了我一个错误...请让我知道该怎么做...

当用户拨打电话时，我的广播接收器正常启动......但我不知道如何在用户通话时监控 BroadcastReceiver 内的网络......并在用户挂断电话时从 BroadcastReceiver 调用活动。 ..

请让我知道如何实现这一目标......提前致谢...... :-)

我的代码...

1.  **广播接收器代码**

    ```
     public class MoniterNetworkStatus extends BroadcastReceiver{

    private ConnectivityManager connectivityManager;
    private NetworkInfo info;

    @Override
    public void onReceive(Context context, Intent intent) {

        Toast.makeText(context, "Monitering Network Status !!!", Toast.LENGTH_LONG).show();

        boolean networkStatus = false;
        TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
        connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);

        Intent activityIntent = new Intent(context, NetworkStatusActivity.class);

                // I am monitoring the network status as long as user is on call...
        while(telephonyManager.getCallState()!= TelephonyManager.CALL_STATE_IDLE){

            info = connectivityManager.getActiveNetworkInfo();
            if(info == null){
                networkStatus =  false;
            }else if(info.getType() == ConnectivityManager.TYPE_MOBILE){

                networkStatus = info.isConnected();
            }else{
                networkStatus = false;
            }
        }

        //Putting the network details in to the activity.   
        activityIntent.putExtra("operatorName", telephonyManager.getNetworkOperatorName());
        activityIntent.putExtra("networkStatus", networkStatus);

                // starting the activity
        context.startActivity(activityIntent);
        abortBroadcast();

        }
    } 
    ```

    **我的清单文件**

    ```
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="8" />

     <uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" />
     <uses-permission android:name="android.permission.READ_PHONE_STATE" />
     <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
     <!-- <uses-permission android:name="android.permission.INTERNET"/> -->

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

         <activity android:name="com.abc.activity.NetworkStatusActivity"></activity>

        <receiver android:name="com.abc.broadcastreceiver.MoniterNetworkStatus"
            android:enabled="true" >
            <intent-filter>
                <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
                <action android:name="android.intent.action.ANSWER" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </receiver>

    </application> 
    ```

当用户拨打电话时，我的广播接收器正常启动......但我不知道如何在用户通话时监控网络......并在用户挂断电话时调用活动......

请让我知道如何实现这一目标......提前致谢...... :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:59:01.887

您需要注册另一个接收器以接受 ACTION_PHONE_STATE_CHANGED。这可能是[Detecting去电和通话挂断事件在android中的重复](https://stackoverflow.com/questions/5497061/detecting-outgoing-call-and-call-hangup-event-in-android)

# javascript - 正则表达式验证逗号分隔的年份范围

> ID：15133670
> 
> 赞同：4
> 
> 时间：2013-02-28T10:55:08.243
> 
> 标签：javascript, regex

我想出了这个正则表达式：

```
(?:[0-9]{4}-([0-9]{4}|[?]))+ 
```

对于这个文本：

```
1993-2000,2004-? 
```

要在块上捕获的正则表达式 =`[0-9]{4}-([0-9]{4}|[?])`

我有如下变化：

```
1993-?
1993-2000
1993-2000,2004-?
1993-2000,2004-2010

```

等等。

我的正则表达式捕获块`[1993-2000]`和`[2004-?]`，但不是逗号。

我发现很难声明逗号应该在第二次、第三次等出现时是强制性的。

所以不应该允许的是：

```
1993-2000,
1993-20002007-?
?-2000

```

可能这可以被允许为0：`1993-2000,2004,2007,2010-?`

有人可以帮助我对第二次和后续事件的条件逗号进行最后的了解吗？

我发现了这个我改编了一下的正则表达式：

```
^([0-9]{4}(-([0-9]{4}|[?]))?)(,([0-9]{4}(-([0-9]{4}|[?]))?))*$ 
```

似乎可以解决问题，但这是最好的版本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:04:25.163

您的正则表达式（最后一个）看起来足够好。过度拒绝或过度接受应该没有问题。但是，有 2 个不必要的分组：

```
^[0-9]{4}(-([0-9]{4}|[?]))?(,[0-9]{4}(-([0-9]{4}|[?]))?)*$ 
```

您可以使所有组不捕获，因为您正在验证并且不会捕获任何文本：

```
^[0-9]{4}(?:-(?:[0-9]{4}|[?]))?(?:,[0-9]{4}(?:-(?:[0-9]{4}|[?]))?)*$ 
```

`\d`可以用来代替`[0-9]`，但我认为明确声明它并没有什么坏处。

# windows-phone-7.1 - wp7.5工具包中的自动完成框显示错误

> ID：15133675
> 
> 赞同：2
> 
> 时间：2013-02-28T10:55:21.430
> 
> 标签：windows-phone-7.1, autocompletebox

我正在使用 windowsphone7.5 版本的自动完成框工具包。它在 wp7.1 工具包中运行良好。

如果我使用带有内部控制边距的自动完成，它不能正常工作，它会在顶部显示结果，

在这里，我附上了自动完成错误的屏幕截图。

![在此处输入图像描述](../Images/0cc38c1cc9da5f322bae8b8ca5f47804.png)

这是代码：

```
<Grid Grid.Row="1" Height="76" VerticalAlignment="Top">
  <toolkit:AutoCompleteBox VerticalAlignment="Bottom" Width="400" ValueMemberBinding="{Binding Title}" HorizontalAlignment="Left" Grid.Row="0" x:Name="acBox" Margin="10,0,10,0" ItemsSource="{Binding CategoryListitems}">
    <toolkit:AutoCompleteBox.ItemTemplate>
      <DataTemplate>
        <TextBlock Text="{Binding Title}"/>
      </DataTemplate>
    </toolkit:AutoCompleteBox.ItemTemplate>
  </toolkit:AutoCompleteBox>
</Grid> 
```

# uitableview - iOS 6.x 中 UITableViewCell 中的 UITextField 键盘未显示

> ID：15133678
> 
> 赞同：2
> 
> 时间：2013-02-28T10:55:31.463
> 
> 标签：uitableview, ios6, keyboard, uitextfield, uitextfielddelegate

在 iPhone/iPad 应用程序上工作， **问题：iOS 6.x 中 UITableViewCell 中的 UITextField 键盘没有显示，但相同的代码在 iOS 5.x 上工作正常**

我们开发了一个 UIViewController，我们在其中创建了 tableview。在这个表格视图中，我们添加了文本字段单元格。所以 textfield 显示光标，但它不会调出键盘，光标也不会移动。（在 iOS 5.x 上一切正常）

```
UITableView *localTable=[[UITableView alloc]initWithFrame:tableFrame style:UITableViewStyleGrouped];
    self.tblScheduleBasicInfo=localTable;
    [localTable release];  //release the localTable
enter code here

@interface CustomTextFieldCell : UITableViewCell {
    UITextField *cellTextField;     
}

    CustomTextFieldCell *tfCell2;

    tfCell2=(CustomTextFieldCell *)[tableView dequeueReusableCellWithIdentifier:textFieldIdentifier1];

    if(tfCell2==nil)
     {
          tfCell2=[[[CustomTextFieldCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:textFieldIdentifier1]autorelease];
       }
                tfCell2.cellTextField.delegate=self;  //set the delegate to self to implement textField delegate methods in self
                tfCell2.userInteractionEnabled=YES; 
```

委托被调用，但键盘没有出现。

我们已经尝试过 SO 中提到的以下选项，但还没有运气

[所以链接 1](https://stackoverflow.com/questions/12503764/cant-type-text-into-uitextfield-or-uitextview-in-ios6)

[所以链接 2](https://stackoverflow.com/questions/12585463/some-uitextfields-dont-respond-in-ios6)

[所以链接 3](https://stackoverflow.com/questions/12447875/keyboard-and-cursor-show-but-i-cant-type-inside-uitextfields-and-uitextviews)

欢迎所有建议.. 提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-16T11:31:24.213

在您点击单元格之前，您的表格单元格将成为事件响应者。要使键盘出现在文本字段上，您需要使您的文本字段消费事件响应为：

在`tableView:didSelectRow:atIndex`方法中：

```
[self.cellTextField becomeFirstResponder] 
```

# c# - 如何将 UTC 日期时间转换为本地日期时间？

> ID：15133681
> 
> 赞同：-1
> 
> 时间：2013-02-28T10:55:36.660
> 
> 标签：c#, visual-studio-2008, datetime

我需要将 UTC 日期时间转换为本地日期时间。

它应该看起来像这样：

```
private DateTime localdate (DateTime UTC_DateTime)
{

DateTime local =  new DateTime();
local  = UTC_DateTime .....         ??? 

return local;

} 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:56:57.640

这样做：

```
private DateTime Localdate (DateTime utc_DateTime)
{

    DateTime local =  new DateTime();
    local  = utc_DateTime.ToLocalTime();

    return local;

 } 
```

但该方法本身“有点”多余。只是一个建议：尝试尊重 C# 所采用的“Pascal-case 约定”，该约定指出方法名称是大写的，而参数名称不是（除其他外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:57:06.503

使用方法`DateTime.ToLocalTime()`

# python - 它如何在黑色像素轮廓上计算 opencv 中的 Solidity？

> ID：15133687
> 
> 赞同：0
> 
> 时间：2013-02-28T10:55:54.210
> 
> 标签：python, opencv, computer-vision, feature-extraction

Solidity 它的计算类似于面积/凸包面积之间的比率：

```
#calculating area from contour
area = cv2.contourArea(unicocnt)

#calculating hull and hull area
hull = cv2.convexHull(unicocnt) 
hull_area = cv2.contourArea(hull)

#solidity
solidity = float(area)/hull_area 
```

计算圆形图像我得到的所有值都接近 1 所以我想当我计算轮廓面积时我计算圆圈内的面积而不考虑内部是否是白色像素（轮廓是黑色的）

图片示例：[https ://docs.google.com/file/d/0ByS6Z5WRz-h2b0JITFB4aHR0OWc/edit?usp=sharing](https://docs.google.com/file/d/0ByS6Z5WRz-h2b0JITFB4aHR0OWc/edit?usp=sharing)

代码：

```
nomeimg = 'Riscalate2/JPEG/e (5).jpg'

img = cv2.imread(nomeimg)

gray = cv2.imread(nomeimg,0)#convert grayscale adn binarize

element = cv2.getStructuringElement(cv2.MORPH_CROSS,(6,6)) 
graydilate = cv2.erode(gray, element) #imgbnbin

cv2.imshow('image',graydilate)
cv2.waitKey(0)

ret,thresh = cv2.threshold(graydilate,127,255,cv2.THRESH_BINARY_INV)   # binarize

imgbnbin = thresh
cv2.imshow('bn',thresh)
cv2.waitKey()

#element = cv2.getStructuringElement(cv2.MORPH_CROSS,(2,2))
#element = np.ones((11,11),'uint8')

contours, hierarchy = cv2.findContours(imgbnbin, cv2.RETR_TREE ,cv2.CHAIN_APPROX_SIMPLE)
print(len(contours))

# Take only biggest contour basing on area
Areacontours = list()
calcarea = 0.0
unicocnt = 0.0
for i in range (0, len(contours)):
    area = cv2.contourArea(contours[i])
    #print("area")
    #print(area)
    if (area > 90 ):  #con 90 trova i segni e togli puntini
        if (calcarea<area):
            calcarea = area
            unicocnt = contours[i]

#calculating area from contour
area = cv2.contourArea(unicocnt)

#calculating hull and hull area
hull = cv2.convexHull(unicocnt) 
hull_area = cv2.contourArea(hull)

#solidity
solidity = float(area)/hull_area 
```

**更新**

我是这样做的：

```
ColoredArea = 0
for i in range(0,len(imgbnbin)):
    a = imgbnbin[i]
    for j in range (0, len(a)):
        if (cv2.pointPolygonTest(hull, unicocnt) >= 0):        
            if (getPixel(x,y) == black):
                ColoredArea = ColoredArea +1; 
```

出现此错误：

```
if (cv2.pointPolygonTest(hull, unicocnt) >= 0):
TypeError: Required argument 'measureDist' (pos 3) not found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:01:28.730

尝试以下算法（伪代码）：

```
int ColoredArea = 0;
for (x=MinX to MaxX)
   for (y=MinY to MaxY)
        if (cv2.pointPolygonTest(hull, pt(x,y)) >= 0)
           if (getPixel(x,y) == black)
               ColoredArea++; 
```

# uinavigationcontroller - 导航控制器内的标签栏控制器（故事板！）

> ID：15133689
> 
> 赞同：2
> 
> 时间：2013-02-28T10:56:02.587
> 
> 标签：uinavigationcontroller, uitabbarcontroller, storyboard

我知道这个问题在这里和其他网站上讨论过几次，但是帖子很旧（从 2009 年或 2011 年开始），因此他们无法说明 Apple 环境的变化。

所以我开始首先使用导航控制器构建应用程序。在第二个视图中，我需要切换到标签栏。现在，我发现帖子说这是不好的方法，而好的方法是将导航控制器嵌入**标签**栏，反之亦然。更重要的是我的方法是有效的（从导航控制器到标签栏控制器）并且这些帖子很旧。iOS 6.0 有什么变化吗？哪种方法是正确的？

图片链接：http: [//i.imgur.com/f6kICKu.png](http://i.imgur.com/f6kICKu.png)

# ssl - https 与 jython2.7 + 信任所有证书不起作用。结果：httplib.BadStatusLine

> ID：15133691
> 
> 赞同：3
> 
> 时间：2013-02-28T10:56:03.680
> 
> 标签：ssl, https, jython

> **更新**：与 jython 2.7b1 中的错误相关的问题。请参阅错误报告：[http](http://bugs.jython.org/issue2021) ://bugs.jython.org/issue2021 。jython-coders 正在努力修复！

从 Jython2.5.3 更改为 jython2.7beta1 后，我不再能够使用 SSL、http 和“信任所有证书”读取网页内容。https 页面的响应始终为空字符串，从而导致 Jython 中 httplib.py 的 httplib.BadStatusLine 异常。

我需要能够从需要身份验证的网页中读取，并且不想设置任何证书存储，因为我必须具有可移植性。因此我的解决方案是使用[http://tech.pedersen-live.com/2010/10/trusting-all-certificates-in-jython/提供的优秀实现](http://tech.pedersen-live.com/2010/10/trusting-all-certificates-in-jython/)

下面详细介绍示例代码。Twitter 可能不是最好的例子，因为它不需要证书信任；但无论有没有装饰器，结果都是一样的。

```
#! /usr/bin/python

import sys
from javax.net.ssl import TrustManager, X509TrustManager
from jarray import array
from javax.net.ssl import SSLContext

class TrustAllX509TrustManager(X509TrustManager):

    # Define a custom TrustManager which will blindly
    # accept all certificates
    def checkClientTrusted(self, chain, auth):
        pass

    def checkServerTrusted(self, chain, auth):
        pass

    def getAcceptedIssuers(self):
        return None

# Create a static reference to an SSLContext which will use
# our custom TrustManager
trust_managers = array([TrustAllX509TrustManager()], TrustManager)
TRUST_ALL_CONTEXT = SSLContext.getInstance("SSL")
TRUST_ALL_CONTEXT.init(None, trust_managers, None)

# Keep a static reference to the JVM's default SSLContext for restoring
# at a later time
DEFAULT_CONTEXT = SSLContext.getDefault()

def trust_all_certificates(f):
    # Decorator function that will make it so the context of the decorated
    # method will run with our TrustManager that accepts all certificates

    def wrapped(*args, **kwargs):
        # Only do this if running under Jython
        if 'java' in sys.platform:
            from javax.net.ssl import SSLContext
            SSLContext.setDefault(TRUST_ALL_CONTEXT)
            print "SSLContext set to TRUST_ALL"
            try:
                res = f(*args, **kwargs)
                return res
            finally:
                SSLContext.setDefault(DEFAULT_CONTEXT)
        else:
            return f(*args, **kwargs)

    return wrapped

#@trust_all_certificates
def read_page(host):
    import httplib 
    print "Host: " + host
    conn = httplib.HTTPSConnection(host)
    conn.set_debuglevel(1)
    conn.request('GET', '/example')
    response = conn.getresponse()
    print response.read()

read_page("twitter.com") 
```

这导致：

```
Host: twitter.com
send: 'GET /example HTTP/1.1\r\nHost: twitter.com\r\nAccept-Encoding: identity\r\n\r\n'
reply: ''
Traceback (most recent call last):
  File "jytest.py", line 62, in <module>
    read_page("twitter.com")
  File "jytest.py", line 59, in read_page
    response = conn.getresponse()
  File "/Users/erikiveroth/Workspace/Procera/sandbox/jython/jython2.7.jar/Lib/httplib.py", line 1030, in getresponse
  File "/Users/erikiveroth/Workspace/Procera/sandbox/jython/jython2.7.jar/Lib/httplib.py", line 407, in begin
  File "/Users/erikiveroth/Workspace/Procera/sandbox/jython/jython2.7.jar/Lib/httplib.py", line 371, in _read_status
httplib.BadStatusLine: '' 
```

改回 jython2.5.3 为我提供了来自 twitter 的可解析输出。

你们中有人见过吗？在 jython 项目页面上找不到任何关于此的错误票，我也无法理解哪些更改可能导致此行为（可能超过 #1309，但我不明白它是否与我的问题有关）。

干杯

# c# - 从列表中删除相似字符

> ID：15133694
> 
> 赞同：0
> 
> 时间：2013-02-28T10:56:06.213
> 
> 标签：c#

我正在制作一个应用程序来生成密码

现在我有一个字符列表，当生成密码的所有选项都为空时，它使用以下字符：

```
 chars = "$%#@!*abcdefghijklmnopqrstuvwxyz1234567890?;:ABCDEFGHIJKLMNOPQRSTUVWXYZ^&".ToCharArray(); 
```

接下来我有一个其他选项，例如标点符号和符号，所以他没有使用标准字符：

```
var listOfCharacters = string.Empty;

foreach (var currentOption in options)
{
    switch (currentOption)
    {

        case GenOptions.Punctuation:
             listOfCharacters += "&@.#%!*?;:,";
             break;
        case GenOptions.Symbols:
             listOfCharacters += "^$";
             break;       
        default:
             break; 
    }
}

chars = listOfCharacters.ToCharArray();

listOfCharacters.Remove('i'); listOfCharacters.Remove('!');  
listOfCharacters.Remove('l'); listOfCharacters.Remove('1'); 
listOfCharacters.Remove('O'); listOfCharacters.Remove('o'); 
listOfCharacters.Remove('0'); listOfCharacters.Remove('q');
listOfCharacters.Remove('p'); listOfCharacters.Remove('g');    
listOfCharacters.Remove('I'); 
```

现在我想建立一个选项来删除相似的字符，所以字符几乎是彼此的副本，比如 o 和 0。我想用 listofcharacter.remove 来做到这一点，但是当我像上面那样使用它时，它给了我一个错误，因为它的空/空。现在我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:07:04.610

不确定`null/empty`错误消息。

您正在尝试使用[String.Remove](http://msdn.microsoft.com/en-us/library/9ad138yc.aspx)，它将字符索引作为参数。因此，当您传递时，`'i'`它首先转换为 int，然后`String.Remove`尝试删除具有该索引的字符。据我了解，这不是您想要的。

您可以使用[String.Replace](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)代替：

```
String.Replace('!',String.Empty); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T11:17:05.183

尝试这个：

```
listOfCharacters.Replace('i',' '); 
```

# objective-c - 在 Windows 上与 iOS 设备共享 iTunes 文件

> ID：15133704
> 
> 赞同：2
> 
> 时间：2013-02-28T10:56:30.117
> 
> 标签：objective-c, ios6, file-sharing

我已经用“应用程序支持 iTunes 文件共享”= YES 修改了我的 info.plist。

使用 Mac 机器时文件共享工作得非常好，但如果我在 Windows 机器上保存文件，它会给我一个空白文件（0 kb 数据）。iTunes 显示文件的正确大小。我正在使用最新版本的 iTunes。

关于如何解决这个问题的任何想法？

# c# - 选择列表默认值

> ID：15133709
> 
> 赞同：0
> 
> 时间：2013-02-28T10:56:43.623
> 
> 标签：c#, html.dropdownlistfor, selectlist

我的项目中有一个下拉列表，此代码提供列表值

`CrawlIntervalList = new SelectList(new[] {1,2,3,4,5,6,7,8,9,10}, 2);`

我正在尝试设置默认值`2`。我认为这是默认值是否正确 ^，如果是，它似乎不起作用，如果不是，这个值是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:04:55.733

这里的问题是它`SelectList`不是通用的，所以它`object`用作项目类型。当您将 an 传递`int`给期望 an 的方法`object`时，它`int`会自动装箱。该装箱操作将其值包装`int`在一个新的`object`并将其放在堆上。每次您将值类型（如`int`）分配给 type 的变量时`object`，或者如果您尝试将值类型传递给期望`int`.

第二个参数似乎是默认值，但是`2`您传递的参数是被**装箱**的，这会创建一个新的`object`. 同时，您的数组中的数字也被装箱（也`IEnumerable`可以与 一起使用`object`）。但是，这两个装箱操作是分开发生的，并且`2`您的数组中的 和`2`您作为第二个参数传递的 最终`object`在堆上的不同位置作为不同的 s 。因此，`SelectList`无法发现这两个`2`s 是指同一个对象。

解决方案是让这个装箱操作只发生一次。

您可以通过手动选择默认元素或使用以下方法来解决此问题`object[]`：

```
object[] values = new object[] {1,2,3,4,5,6,7,8,9,10};
CrawlIntervalList = new SelectList(values, values[1]); 
```

并不是说，通过创建`object[]`，其中的所有整数都被装箱到`object`，从而创建引用。通过`values[1]`作为第二个参数传递，您可以确保将正确的引用传递给构造函数。

更多关于拳击的信息：http:
[//msdn.microsoft.com/en-us/library/yz2be5wk.aspx](http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx)

# x86 - _mm_set_epi8 - “设置”是什么意思？

> ID：15133715
> 
> 赞同：9
> 
> 时间：2013-02-28T10:56:56.283
> 
> 标签：x86, sse, simd

做什么的`_mm_set_epi8`？

我正在阅读[文档](http://msdn.microsoft.com/en-us/library/x0cx8zd3%28v=vs.100%29.aspx)，但我无法理解，r0..r15 是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T11:13:43.607

`_mm_set_epi8`只是一个便利宏，它将 128 位 SSE`__m128i`向量初始化为一组指定的值（在这种情况下为 16 x 8 位值），例如

```
__m128i v = _mm_set_epi8(15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0); 
```

将设置`v`为 128 位值：`0x000102030405060708090a0b0c0d0e0f`.

对于不同的矢量元素类型，还有其他类似的宏，例如`_mm_set_epi16`, `_mm_set_epi32`,`_mm_set_ps`等。

（注意：您在问题中链接到的文档不是很好，但 r0..r15 显然只是指返回向量中的各个 8 位字段）。

# c - 如何在`GCC`中获取`c`程序的抽象语法树

> ID：15133718
> 
> 赞同：4
> 
> 时间：2013-02-28T10:57:02.303
> 
> 标签：c, gcc, openmp, abstract-syntax-tree

如何在 gcc 中获取 ac 程序的抽象语法树？
我正在尝试将 OpenMP 编译指示自动插入到输入 c 程序中。
我需要分析嵌套`for`循环以查找依赖项，以便插入适当的 OpenMP 编译指示。
所以基本上我想做的就是遍历分析输入c程序的抽象语法树。
我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:02:39.613

您需要完整的数据流来查找“依赖项”。然后您将需要实际*插入*OpenMP 调用。

你想要的是一个程序转换系统。GCC 可能有依赖信息，但众所周知，它很难用于自定义项目。其他人提到了 Clang 和 Rose。Clang 可能是一个不错的选择，但自定义分析/转换不是它的主要目的。Rose 旨在支持自定义工具，但恕我直言，在实践中使用的方案相当复杂，因为它使用了 EDG 前端，而该前端并非旨在支持转换。

[以下文字已被版主删除。我已经把它放回去了，因为它是这个任务的有效转换系统之一。我对此负责的事实绝不会降低其作为对 OP 的有用答案的价值。]

我们的 DMS Software Reengineering Toolkit 及其 C 前端被明确设计为程序转换系统。它以合理的方式与 AST 相关联的完整数据流分析（包括点分析、调用图构建和范围分析）。它提供了源到源的重写规则，可以改变以表面语法形式表达的 AST；您可以阅读转换而不是检查一堆程序代码。使用修改后的 AST，DMS 可以重新生成源代码，包括可编译形式的注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:03:32.903

不完全是 AST，但 GCCXML 可能会有所帮助[http://linux.die.net/man/1/gccxml](http://linux.die.net/man/1/gccxml)

编辑：正如 Ira Baxter 所说，gccxml 不输出有关函数/方法主体的信息。这是一个似乎可以解决缺少[http://sourceforge.net/projects/gccxml-bodies/的叉子](http://sourceforge.net/projects/gccxml-bodies/)

# eclipse - jhall.jar 的 MANIFEST.MF 问题

> ID：15133723
> 
> 赞同：1
> 
> 时间：2013-02-28T10:57:07.883
> 
> 标签：eclipse, manifest.mf

我在名为“program-jar”的文件夹中使用 Eclipse 创建了一个 jar 文件（DicoDB.jar）。在子目录“javahelp”内有以下 jar 文件：jhall.jar、hsviewer.jar、jh.jar 和 dicoDBHelp.jar（这是我的 jar 文件，其中包含我的帮助应用程序）。在顶级目录“program-jar”中还有以下 jar：jgraph.jar、gnujpdf.jar。

这是我的 MANIFEST.MF：（该文件是手动创建的）

Manifest-Version: 1.0
Main-Class: gui.DicoDB
Class-Path: jgraph.jar
gnujpdf.jar
javahelp/jhall.jar
javahelp/hsviewer.jar
javahelp/jh.jar
javahelp/dicoDBHelp.jar

文件末尾是一个空行。

现在我在终端中执行 DicoDB.jar。一切正常，直到我想打开我的帮助文件（dicoDBHelp.jar）。

我得到以下异常：
java.lang.NoClassDefFoundError: javax/help/JHelp

JHelp 类包含在 jhall.jar 中。
现在我不明白为什么程序找不到课程。

所以我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:33:01.347

只是一个想法：尝试将所有罐子与 Class-Path: .... 放在同一行，用空格分隔。

# java - 有什么建议为什么 > 运算符不起作用？

> ID：15133725
> 
> 赞同：0
> 
> 时间：2013-02-28T10:57:25.667
> 
> 标签：java, imagej

我正在为 ImageJ 编写一个插件，在我的代码的这一部分中，我希望在数组中找到包含最大数字的索引。

```
int index1 =0;

    for(int k=1; k<array.length; k++)
    {
    IJ.showMessage("array[k] "+array[k]+" value "+value);    

    if (array[k]>value);
        {
                value = array[k];

                index1=k;

        }
    } 
```

array[] 是一个 20 索引整数数组。

代码编译，当我运行它时，一系列消息窗口说：

1.  “数组[k] 6037 值 2030”
2.  “数组 [k] 11544 值 6037”
3.  “数组 [k] 12287 值 11544”
4.  “数组[k] 7369 值 12287”，最后：
5.  “数组 [k] 2873 值 7369”

如果我的 > 运算符工作正常，那么为什么语句 5 显示相反？

感谢您的时间

贝特曼

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T10:59:55.313

改变

```
if (array[k]>value); 
```

至

```
if (array[k]>value) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T11:00:28.297

去除 ”;” 排队

> 如果（数组[k]>值）{

这 ”;” 是在条件为真时执行的空语句。下面的花括号块永远执行。
在 Eclipse 中使用 checkstyle 插件，这应该警告空语句。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T11:00:33.460

你有一个尾随 ; 在你的如果之后。

# php - 使用自定义标头进行 PHP 重定向

> ID：15133728
> 
> 赞同：0
> 
> 时间：2013-02-28T10:57:33.730
> 
> 标签：php

我很确定这是不可能的，我需要在 login.php `if $_GET['reason']`isset 上设置标题，但有人可以澄清我不能设置响应代码然后更改位置吗？

```
header('HTTP/1.1 403 Forbidden');
header("Location: http://domain.com/login.php?reason=ipbanned"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:59:42.750

对，这是不可能的。“Location”标头将 HTTP 响应代码设置为`302 Found`（或另一个 3xx 重定向代码），您不能一次发送两个响应代码。

**更新：**

做你想做的事情的正确方法是在*重定向*页面上发送禁止的标头，即在`login.php`if中`$_GET['readon']=='ipbanned'`，而不是在*重定向*页面上。

# php - 使用 php Pretsashop 的新产品或类别

> ID：15133737
> 
> 赞同：0
> 
> 时间：2013-02-28T10:58:12.060
> 
> 标签：php, function, object, prestashop

我正在学习开发到 prestashop，我喜欢使用 php 脚本将类别或产品添加到 prestashop。

我知道有可能将其写入数据库，但我认为使用函数会更容易。

但我没有找到添加产品或类别的功能。

可能是一个如此善良的人，他给我写了函数的名称和简单的示例热使用它吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:23:45.340

对于类别，请查看 /classes/Category.php ：

```
$cat = new Category();
$cat->name = 'category name';
$cat->active = 1;
$cat->link_rewrite = Tools::link_rewrite($cat->name);
$cat->id_parent = Configuration::get('PS_HOME_CATEGORY');
$cat->add(); 
```

产品的同上，在 /classes/Product.php

# r - 替换元素类动物园中的值

> ID：15133739
> 
> 赞同：0
> 
> 时间：2013-02-28T10:58:15.307
> 
> 标签：r, zoo, na

我有两个相同长度的类动物园的时间序列。其中一个作为某些日期的 NA 值，而另一个则完全由值填充。由于我需要绘制一些饼图，因此我也需要忽略其他时间序列中具有 NA 值的日期。

这就是我所做的：

```
 ind.pos <- which(is.na(a1[,1]) == 'TRUE')

  for (i in ind.pos  ) {
  b1[[i]] <- NA
} 
```

哪个工作正常。我只是想知道是否有更有效的方法来实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:18:08.917

不知道我是否错过了一些观点，但这会起作用：

```
b1[is.na(a1)]<-NA 
```

在这里，您的时间序列是`a1`并且`b1`a1 包含 NA。

# asp.net - ASP.NET 页面/MasterPage 生命周期

> ID：15133742
> 
> 赞同：1
> 
> 时间：2013-02-28T10:58:23.957
> 
> 标签：asp.net, master-pages, lifecycle, page-lifecycle

试图了解`MasterPage`渲染后如何`Page`HtmlTextOutput 中已经存在的内容？

ASP.NET，首先调用Page.Render，然后Page渲染它的子控件，MasterPage理论上是页面的“子控件”。如果是这样，那么在 MasterPage.Render 完成后如何包含 Page 的所有其他子控件的输出？Master.Render 如何“调用”页面本身及其子控件的渲染？

示例：母版页：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="MAIN.master.cs" Inherits="Demo.MAIN" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        ContentPlaceHolder - BEFORE
        <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">

        </asp:ContentPlaceHolder>
        ContentPlaceHolder - AFTER
    </div>
    </form>
</body>
</html>
public partial class MAIN : System.Web.UI.MasterPage
{
    protected override void Render(HtmlTextWriter writer)
    {
        base.Render(writer);
        //At this point HtmlTextWriter already contains the output of all page child controls...how it's happen?
    } 
```

页：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MAIN.Master" AutoEventWireup="true" CodeBehind="MAIN_PAGE.aspx.cs" Inherits="Demo.MAIN_PAGE" %>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
CONTENT
<TL:MyButton id="ServerControl" Text="btn" runat="server"/>
</asp:Content>
public partial class MAIN_PAGE : MyPage
{
    protected override void Render(HtmlTextWriter writer)
    {
        base.Render(writer);
    }
} 
```

# iphone - 前置摄像头每次都不会在 iPad 的 Pop over 控制器中打开

> ID：15133743
> 
> 赞同：0
> 
> 时间：2013-02-28T10:58:27.957
> 
> 标签：iphone, objective-c, ios4

在我的 iPad 应用程序中，我试图在 UIPopOverController 中打开前置摄像头。它的行为很奇怪。当我第一次单击按钮打开摄像头时，它打开前置摄像头，第二次打开后置摄像头，同样重复。一次前置摄像头和第二次后置摄像头。虽然我也将前置摄像头设置为摄像头设备。这是我的代码，请帮忙。

```
UIImagePickerController *imagePickerController = [[UIImagePickerController alloc] init];

    imagePickerController.sourceType = UIImagePickerControllerSourceTypeCamera;
    imagePickerController.delegate = self;
    imagePickerController.allowsEditing = YES;
    [imagePickerController setCameraCaptureMode:UIImagePickerControllerCameraCaptureModePhoto];
    [imagePickerController setCameraDevice:UIImagePickerControllerCameraDeviceFront];

 UIPopoverController *popoverController=[[UIPopoverController alloc] initWithContentViewController:imagePickerController];
[popoverController presentPopoverFromRect:((UIButton *)sender).bounds inView:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:22:37.207

我自己得到了答案。我没有发布 imagePickerController。释放它后，我每次都会得到前置摄像头。;)

# .net - 单击该行中的图像按钮时，如何在网格中隐藏一行？

> ID：15133745
> 
> 赞同：0
> 
> 时间：2013-02-28T10:58:38.397
> 
> 标签：.net, gridview, datagridview

我有几列网格，其中一列是图像。单击该图像时，我希望该行隐藏。

![在此处输入图像描述](../Images/5954085845762488becb7d28c161ef8f.png)

在这里，当我单击最后一列时，我的行必须被隐藏，

我怎样才能使它成为可能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:44:12.407

为图像单元格的单击事件编写事件处理程序。该事件的发送者将是图像单元格。您可以获取发送者并将其转换回一个单元格，然后获取该单元格的父级（这将是行）并将父行的 Visible 属性设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:28:08.113

> 这几个步骤将对您有所帮助。

1.  确保您单击的图像列是 ImgaeButton
2.  Imgaebutton 将具有 CommandName 和 CommandArguement 属性
3.  使用 gridview 的 RowCommand 事件，这将为您解决问题。

> 像这样的东西。

```
<asp:GridView ID="GridView1" runat="server" Width="100%" AutoGenerateColumns="False" OnRowCommand="GridView1_RowCommand">
    <Columns>
        <asp:TemplateField>
        <ItemTemplate>
            <asp:ImageButton runat="server" id="gvibtn"
                             CommandName="HideRow" 
                             CommandArgument='<%# Container.DisplayIndex %>'
                             Text='<%# Bind("Text") %>'>       
            </asp:ImageButton>
        </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

> 后面的代码看起来像这样。

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if(e.CommandName == "HideRow")
    {
        int rowIndex = Convert.ToInt32(e.CommandArgument);
        // now you got the rowindex, run your hiding logic here.
    }
} 
```

# javascript - angularJs 中的“$add”功能是什么？

> ID：15133746
> 
> 赞同：1
> 
> 时间：2013-02-28T10:58:38.567
> 
> 标签：javascript, arrays, angularjs

我是 angularJs 的新手，并且正在将 0.9 版本的 angularJs 应用程序迁移到 1.0.5 版本。我被困在一个名为“$add”的函数上，该函数在一个数组上调用。我已经在文档中搜索了几个小时，但没有用。任何人都可以启发我吗？也将更好地理解 '$xxx' 关键字在 Angular 中使用的重要性/特殊性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:21:07.410

我相信该`$add`功能已被删除。您可以将其替换为原生 Array`push()`函数（它们基本相同）。

关于 的用法`$`，angularjs[文档](http://docs.angularjs.org/guide/concepts#angular_namespace)指出：

> 为了防止意外的名称冲突，Angular 会为可能与 $ 冲突的对象的名称添加前缀。请不要在代码中使用 $ 前缀，因为它可能会意外地与 Angular 代码发生冲突。

# vim - vim中换行符的对面

> ID：15133748
> 
> 赞同：4
> 
> 时间：2013-02-28T10:58:43.953
> 
> 标签：vim

在 vim 中，是否有删除换行符和光标后面所有空格的命令？

假设我在插入模式下站在文本中间并按 Enter，什么命令会与我刚才所做的相反？

一）一个例子：

```
"some code{ in here }" 
```

B) 按 Enter 后：

```
"some code{
   in here }" 
```

现在按退格键将删除缩进的一个空格。我宁愿让它删除所有缩进，然后跳回A。

这可以在命令中完成还是通过重新映射到退格键来完成？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T11:15:38.690

可悲的是，`J`命令是多么未知。它以正常模式连接线。

在插入模式下，可以按`<C-U>`两次；首先，它会删除光标前的缩进，然后它会加入上一行。请注意，这需要

```
:set backspace=indent,eol,start 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T11:03:53.080

你试过了`J (uppercase)`吗？它会给出你想要的。

`"some code{`光标在这一行，按`J`

`in here }"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T12:30:59.080

一种简单的方法是向上一行，到该行的末尾并删除。只要您仍处于插入模式，它就会与`J`在最后一个位置删除时执行相同的操作 - 就像大多数其他编辑器一样。对我来说，这是最快的选择，因为我已经习惯了其他编辑。

那是：`↑</kbd>, `End`, `Delete` (when still in insert mode)`

一种快速的替代方法（VIM 方式）是（仍处于插入模式时）：
`↑</kbd>, `Ctrl`+`o`, `J` (when still in insert mode)`

（在插入模式下使用`Ctrl`+`o`来输入一个普通模式命令。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T11:01:52.460

你可以做`ᴇꜱᴄ</kbd>, `K`, `Shift`+`J`.`

`K`跳到上一行，`Shift`+`J`加入这两行。

但是，使用正确配置的缩进和语法，退格不只是删除一个空格，它会删除完整的前一个缩进块。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-09T03:44:36.867

也可以使用退格键的重新映射：

```
inoremap <expr> <bs> getline('.')[:col('.')-2]=~'^\s\+$' ? "<c-u><c-u>" : "<bs>" 
```

请注意，此映射**完全覆盖**退格键的正常行为。这仅在您不打算使用其正常行为时才有用。如果您可以轻松访问其他选项（cu 或 J），则不建议这样做

但是，（据我所知）没有办法区分手动添加的前导空格和自动缩进。如果您使用`noexpandtab`，您可以编辑正则表达式以仅匹配选项卡。

这在某些自动缩进模式下也不起作用（例如，在 C 中的块注释中，vim 自动开始一个以 开头的新行`*`）

# javascript - JavaScript 函数返回 AJAX 响应（没有 jQuery）？

> ID：15133753
> 
> 赞同：1
> 
> 时间：2013-02-28T10:58:55.590
> 
> 标签：javascript, ajax

我需要一个纯 JavaScript 函数（抱歉，没有 jQuery），它将从成功的 AJAX 调用返回响应。这是到目前为止我得到的函数，我想`HTMLobject`从响应中返回带有 HTML 的函数：

```
function getHtml(url) {
    var httpRequest;
    var HTMLobject;

    if (window.XMLHttpRequest) {
        httpRequest = new XMLHttpRequest();
    } else if (window.ActiveXObject) {
        try {
            httpRequest = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try {
                httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e) {}
        }
    }

    if (!httpRequest) {
        console.error('Cannot create an XMLHTTP instance');
        return false;
    }

    httpRequest.onreadystatechange = function() {
        if (httpRequest.readyState === 4) {
            if (httpRequest.status === 200) {
                // OK, turn the string into HTML.
                var div = document.createElement('div');
                div.innerHTML = httpRequest.responseText;
                // Assign the converted HTML to HTMLobject.
                HTMLobject = div.childNodes[0];
            } else {
                console.debug('There was a problem with the request.');
            }
        }
    };

    httpRequest.open('GET', url);
    httpRequest.send();

    return HTMLobject;
} 
```

我知道*为什么*，`HTMLobject`返回未定义，但我需要它工作。有没有办法让函数在 AJAX 完成后返回对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:00:13.047

不，解决方案是这种情况是使用回调函数。

前任：

```
function getHtml(url, callback) {
    ....
    ....
    callback(HTMLobject); //instead of returning the HTMLobject, call a callback function as pass the `HTMLobject` as a argument.
} 
```

用法：

```
getHtml('url', function(HTMLobject){
    //Do something with HTMLobject
}); 
```

代替

```
var HTMLobject = getHtml('url');
//Do something with HTMLobject 
```

*发出请求`async: false`是个坏主意，因为它会阻塞页面直到请求完成（UI 不会被重绘，UI 交互也不会发生）*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:03:09.043

使请求同步，只需执行以下操作

```
httpRequest.open('GET', url,false);//false make request synchronous 
 httpRequest.send(); 
```

“false”选项表示调用是同步的，这意味着代码将挂起，直到响应返回

# c# - Visualstudio 2012 Ultimate -> 网站的编码 Ui 测试

> ID：15133754
> 
> 赞同：0
> 
> 时间：2013-02-28T10:58:57.797
> 
> 标签：c#, visual-studio-2012, coded-ui-tests

我正在使用 Visualstudio 2012 Ultimate 进行网站编码 Ui 测试。我需要在录制的过程中进行自定义更改。但是当我录制新的编码 Ui 测试时，我会自动删除自定义更改。

请帮我。我将非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:38:17.433

我猜您的“自定义更改”是指在**uimap.designer.cs**文件中进行的编辑。每当记录新动作和使用 uimap 编辑器时，都会从**uimap.uitest文件重新生成此文件。****uimap.designer.cs**文件顶部有一条注释警告更改将丢失。

**uimap.designer.cs**文件所需的许多更改实际上可以使用 Visual Studio 中的 uimap 编辑器进行（它也可在 Visual Studio 2010 功能包 1 中使用）。在解决方案资源管理器中双击**uimap.uitest**文件。通过右键单击或通过“UI 操作”面板上方的 9 个图标可以进行一些编辑操作。可以通过所有 UI 操作及其步骤的属性以及 UI 控件的属性进行更多更改。

如果无法在 uimap 编辑器中进行所需的更改，则选择“将代码移动到**uimap.cs** ”（右键单击或它是 9 个图标之一）。退出 uimap 编辑器，保存更改。然后根据需要在**uimap.cs**文件中编辑代码。

请注意，**uimap.designer.cs**和**uimap.cs**文件都属于同一个类，它们都表示为**partial class**。

# javascript - 在 Backbone 中实现 ListenTo

> ID：15133762
> 
> 赞同：4
> 
> 时间：2013-02-28T10:59:14.180
> 
> 标签：javascript, backbone.js

所以我不确定这条线是做什么的

```
 obj.on(name, typeof name === 'object' ? this : callback, this); 
```

在listenTo 的Backbone.js 实现中。我也明白，listenTo 是一种让一个对象在另一个对象响应事件时采取行动的方式，我还看到 Backbone 网站说使用 listenTo 的优点是，如果我破坏原始对象，那么其他事件作用于可以删除其他对象。在listenTo中是如何实现的？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T21:03:47.413

这是 的函数签名[`on`](http://backbonejs.org/#Events-on)：

> object.on（事件，回调，[上下文]）

`event`是像“click”这样的事件名称或像这样的事件映射：

```
{
    'click .button': 'handler1',
    'keydown': function(){}
} 
```

因此，在`listenTo`您发布的代码中，第一个参数是事件名称或事件映射。如果它是事件名称（类型“字符串”），您希望将指定的回调作为第二个参数传递给 on。如果`name`是一个事件映射（类型“对象”） 骨干传递`this`- 它最终将用作上下文，即使它是作为回调传递的。

看看这个`eventsApi`函数以及它是如何被调用的`on`：

```
function(obj, action, name, rest) {
    if (!name) return true;
    if (typeof name === 'object') {
      for (var key in name) {
        obj[action].apply(obj, [key, name[key]].concat(rest));
      }
    }
// ... code in `on`:
eventsApi(this, 'on', name, [callback, context]) && callback) 
```

假设`name`是一个事件映射（因此`typeof name ==='object'`是真的）。`on`对于我们使用以下参数调用的事件映射的每个成员： `[key, name[key]].concat(rest)`. 因为`rest`是`[callback, context]`我们得到四个参数。

但这比`on`接受的要多 - 最后一个需要是上下文，而不是`callback`. 这就是为什么`listenTo`将`this`对象作为回调传递，这使它成为事件处理程序的上下文。

`listenTo`是一种相当新的方法，所以我假设这就是变量名没有意义的原因。

* * *

当视图被移除时——可能是在模型被删除之后——该`remove`方法调用`stopListening`视图。`off`如果您不向它传递任何参数，该函数只会调用所有处理程序：

```
for (var id in listeners) {
    listeners[id].off(null, null, this);
} 
```

# .net - IList 上的 Linq 查询 字符串成员

> ID：15133765
> 
> 赞同：0
> 
> 时间：2013-02-28T10:59:19.230
> 
> 标签：.net, vb.net, string, linq

我有以下模型，我将其加载到 IList 集合中并针对其运行 Linq 查询。我遇到的问题是 Linq 查询将 OPCServer 成员作为 IEnumerable(of Char) 返回。这是否有理由不返回基础字符串？

如果我用 a 迭代集合，`For Each`那么它会按预期返回字符串。

我是否必须手动将其转换回工作代码部分中的显示？

**模型**

```
Friend Class OpcDataTags

    Public Property Host As String
    Public Property HostLive As Boolean
    Public Property OpcServer As String
    Public Property OpcChannel As String
    Public Property PlcDns As String
    Public Property PlcIP As String
    Public Property Zone As String
    Public Property DataBlock As String
    Public Property StartByte As Int16
    Public Property ByteSize As Int16
    Public Property DataType As String
    Public Property Subscribed As Boolean
    Public Property Description As String
    Public Property ArraySize As Nullable(Of Int32)
    Public Property Abbreviation As String
    Public Property PlcID As Int32

End Class 
```

**收藏**

```
Friend Property OpcTags As IList(Of OpcDataTags) 
```

**查询**

```
Dim server = From o In OpcTags.First.OpcServer 
```

**工作代码**

```
Dim result = From o In OpcTags.First.OpcServer
Dim server As String = New String(result.ToArray) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:04:00.160

你真正想要实现的是：

```
' From LINQ's point of view, OpcTags is an IEnumerable< OpcDataTags >
Dim serverQuery = From o In OpcTags Select o.OpcServer
' And now you've narrowed it down to an IEnumerable< String >

Dim firstOne = serverQuery.First
' And now you're selecting the first String from that enumeration of strings 
```

另请注意，如果枚举不产生字符串，这可能会引发异常。

如果这种情况是可能的，而且效果也会令人不快，您可以`FirstOrDefault`改用

```
Dim firstOne_OrNothingIfNone = serverQuery.FirstOrDefault 
```

String 类实现`IEnumerable< Char >`了，您实际上是在强迫它看起来像更多值的来源（因此隐式将其强制转换为最佳`IEnumerable`匹配，即`IEnumerable< Char >`）

# codeigniter - 传递两个查询结果以在 codeigniter 中查看

> ID：15133778
> 
> 赞同：0
> 
> 时间：2013-02-28T10:59:52.907
> 
> 标签：codeigniter

我有两个查询 $q1 和 $q2。从query1我得到多条记录，每条记录都有id，我想在where条件下使用这个id进行第二次查询。

我在控制器中这样做。我试过以下代码。在 foreach 中，我试图存储 id 并传递给 $q2 where 条件。

```
//Query 1
    $q1 = $this->db->select(array(
                                 'spf.id as id' ,
                                  'spf.name',
                                'spf.added_on'
                                ))->from('sp_form spf')->where($where)->order_by('spf.id desc')->limit(10, $page * 10)->get();
                   $data['data'] = $q1->result_array();

                foreach($data as $rec)
                {
                   $id = $rec['id']; // here how i catch id for each row

                 //Query 2

                    $q2 = $this->db->select("count('id') as count ")->from('sp_topic spft')->where('spft.formid',$id)->get();
                      $data['count'] =  $q1->row_object();
                }
                // pass combine result to view

                 $this->load->view('myview', $data,true); 
```

编辑：

```
This is my view.

I have try Nishant answer and i get resultq1 using foreach but how can i get result of resultq2.

    <table width="100%">
      <tr>
        <td class="th"> Details</td>
        <td width="5%" class="th"> Answer</td>
        <td width="15%" class="th">Started by</td>
        <td  width="15%" class="th">Created on</td>
      </tr>
      <?php foreach($resultq1 as $row):?>
       <tr>
        <td><?php echo $row['name'] ;?></td>

         <td >---- </td> // here i want to use resultq2

         <td><?php echo $row['added_by'] ;?></td>
        <td ><?php echo $row['added_on'];?></td>
      </tr>
      <?php endforeach;?>
    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:26:18.453

你可以这样做。

```
$resultq1= $q1->result_array();
$data['resultq1'] = $resultq1;

$resultq2 = array();$i=0;
foreach($resultq1 as $row){
   $id = $row['id'];
   $q2 = $this->db->select("count('id') as count ")->from('sp_topic spft')>where('spft.formid',$id)->get();
   $resultq2[$i]['count'] =  $q1->row_object();
   $i++; 
}
$data['resultq2'] = $resultq2;
$this->load->view('myview', $data,true); 
```

或者

您可以使用 array_merge

喜欢

```
$data = array_merge($resultq1, $resultq2); 
```

然后在 myview 中，您将在变量 $resultq1 和 $resultq2 中获得结果。

您可以通过 $data['variable_name'] 将任意数量的变量从控制器传递到视图文件，并且可以像简单变量 $variable_name 一样在视图文件中检索它。

一些可能有帮助的示例链接：- [在 codeigniter 视图文件中传递 2 种类型的数组变量](https://stackoverflow.com/questions/3501258/passing-2-types-of-array-variables-in-codeigniter-view-files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:29:43.227

```
$data['count'] =  $q1->row_object(); 
```

更改如下：

```
foreach($data as $rec)
       {
          $id = $rec['id']; // here how i catch id for each row
          $q2 = $this->db->select("count('id') as count ")->
          from('sp_topic spft')->where('spft.formid',$id)->get();
          $data[$id]['count'] =  $q2->result_array();
       }

$this->load->view('myview', $data,true); 
```

# magento - 以编程方式复制类别

> ID：15133783
> 
> 赞同：0
> 
> 时间：2013-02-28T11:00:11.527
> 
> 标签：magento, magento-1.4

我在 Magento 1.4.1.1 上。如何使用其 ID 号以编程方式复制类别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-02T22:55:40.853

```
<?php set_time_limit(0); ?>
    <?php ob_end_flush(); ?>
    <?php ob_implicit_flush(); ?>

    <?php require_once 'app/Mage.php'; ?>
    <?php Mage::app(); ?>

    <?php define('STARTTIME', microtime(true)); ?>

    <?php $availSortBy = array() ?> 
    <?php foreach (Mage::getSingleton('catalog/config')->getAttributeUsedForSortByArray() as $key => $value){$availSortBy[] = $key;} ?>
    <?php define('AVAILSORTBY', implode(",",$availSortBy)); ?>
    <?php var_dump(AVAILSORTBY) ?>

    <?php
        function buildTree($category,$return=array()){
            if($category->getChildrenCount() !== "0"){
                $return[$category->getId()] = array();
                foreach($category->getChildrenCategories() as $child){
                  $return[$category->getId()][$child->getId()] = buildTree($child);

                }
            }else{
              $return = $category->getId();
            }
            return $return;
        }
        function processTree($tree,$parentId){
          $first=false;
          foreach ($tree as $catId => $data) {
            if($first){
              $newParentId = $parentId;
              $first = false;
            }else{
              // EXCLUDE COLLECTION
              $newParentId = createCategory($catId,$parentId);
              // INCLUDE COLLECTION
              // $newParentId = createCategory($catId,$parentId,true);
            }
            if(is_array($data)){
              processTree($data,$newParentId);
            }
          }
        }
        function createCategory($oldCategoryId,$parent_id,$includeCollection=false){
           try{
              // LOAD MODELS
              $oldCategory = Mage::getModel('catalog/category')->load($oldCategoryId);

              // SET VALUES
              $newData = $oldCategory->getData();
              foreach (array('entity_id','parent_id','created_at','updated_at','path','children_count') as $unset) {
                unset($newData[$unset]);
              }
              foreach (array('available_sort_by'=>AVAILSORTBY,'default_sort_by'=>'name','include_in_menu'=>'0','is_active'=>'1','name'=>'Unnamed Category') as $req=>$default) {
                $newData[$req] = empty($newData[$req]) ? $default : $newData[$req];
              }
              $newId = Mage::getSingleton('catalog/category_api')->create($parent_id,$newData);
              $newCategory = Mage::getModel('catalog/category')->load($newId);

              // COLLECTION
              if($includeCollection){
                $collectionCount = 0;
                foreach ($oldCategory->getProductCollection() as $_product) {
                  $collectionCount++;
                  Mage::getSingleton('catalog/category_api')->assignProduct($newCategory->getId(),$_product->getId());
                }
                $collectionString = "<p>".$collectionCount." Products Added</p>";
              }else{
                $collectionString = "";
              }

              // RUN TIME
              $duration = number_format(((microtime(true)-STARTTIME)/60),4);

              // OUTPUT
              echo "<p>New Category: <strong>".$newCategory->getName()."</strong> (".$newCategory->getUrlPath().")</p>".$collectionString."<small>DURATION:".$duration." mins</small><hr>";
              ob_flush();

              return $newCategory->getId();
          } catch(Exception $e) {
              print_r($e);
          }
          return false;
        }
    ?>

    <?php if(!empty($_REQUEST['category-id']) && !empty($_REQUEST['target-parent-id'])):?>
      <?php $oldCategory  = Mage::getModel('catalog/category')->load($_REQUEST['category-id']); ?>
      <?php if($oldCategory): ?>
        <?php $catTree = buildTree($oldCategory); ?>
        <?php processTree($catTree,$_REQUEST['target-parent-id']); ?>
        <script>
          var iFrequency = 500; // expressed in miliseconds
          var interval = 0;
          function startLoop() {
              if(interval > 0) clearInterval(interval);  // stop
              interval = setInterval( "window.scrollTo(0,document.body.scrollHeight)", iFrequency ); 
          }
          startLoop();
        </script>
      <?php else: ?>
        <h1>Invalid Category</h1>
      <?php endif; ?>
    <?php else: ?>
      <h1>Missing Parameters</h1>
    <?php endif; ?> 
```

Check out the attached script. If you upload it to your root folder and access it, including the URL params:

*   category-id={ID OF THE CATEGORY YOU WOULD LIKE TO COPY}
*   target-parent-id={ID OF THE TARGET CATEGORY}

NOTE: I included (but commented out) an alternate function call that would include the product collection as well in the category but because we use a dynamic script at my company it wasn't necessary for me to include the collection data. You can uncomment line 39 and comment out line 37 to include the category product collection.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:09:28.383

```
$category_to_duplicate = Mage::getModel('catalog/category')->load($cat_id);
$category_new = Mage::getModel('catalog/category');
$category_new->setStoreId(0); // 0 = default/all store view. 
$category_new->addData($category_to_duplicate->getData());
try {
$category->save();
    echo "Success! Id: ".$category_new->getId();
}
catch (Exception $e){
    echo $e->getMessage();
} 
```

# c# - 如何实现相等方法？

> ID：15133786
> 
> 赞同：0
> 
> 时间：2013-02-28T11:00:21.203
> 
> 标签：c#

鉴于以下示例，我将如何`clientList`在第二个示例中包含 5 个客户端？

我希望该`list.Contains()`方法仅检查`FName`and`LName`字符串并在检查相等性时忽略年龄。

```
struct client
{
    public string FName{get;set;}
    public string LName{get;set;}
    public int age{get;set;}
} 
```

示例 1：

```
List<client> clientList = new List<client>();

for (int i = 0; i < 5; i++)
{
    client c = new client();
    c.FName = "John";
    c.LName = "Smith";
    c.age = 10;

    if (!clientList.Contains(c))
    {
        clientList.Add(c);
    }
}

//clientList.Count(); = 1 
```

示例 2：

```
List<client> clientList = new List<client>();

for (int i = 0; i < 5; i++)
{
    client c = new client();
    c.FName = "John";
    c.LName = "Smith";
    c.age = i;

    if (!clientList.Contains(c))
    {
        clientList.Add(c);
    }
}

//clientList.Count(); = 5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:03:02.477

创建一个实现 IEqualityComparer 的类，并在 list.contains 方法中传递对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:04:31.533

```
public class Client : IEquatable<Client>
{
  public string PropertyToCompare;
  public bool Equals(Client other)
  {
    return other.PropertyToCompare == this.PropertyToCompare;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T11:22:30.973

覆盖[`Equals`](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)并[`GetHashCode`](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)在您的结构中：

```
struct client
{
    public string FName { get; set; }
    public string LName { get; set; }
    public int age { get; set; }

    public override bool Equals(object obj)
    {
        if (obj == null || !(obj is client))
            return false;
        client c = (client)obj;

        return
            (string.Compare(FName, c.FName) == 0) &&
            (string.Compare(LName, c.LName) == 0);
    }

    public override int GetHashCode()
    {
        if (FName == null)
        {
            if (LName == null)
                return 0;
            else
                return LName.GetHashCode();
        }
        else if (LName == null)
            return FName.GetHashCode();
        else
            return FName.GetHashCode() ^ LName.GetHashCode();
    }
} 
```

此实现处理所有边缘情况。

阅读[此问题](https://stackoverflow.com/questions/3103308/overridding-equals-and-gethash)以了解为什么您还应该覆盖[`GetHashCode()`](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T11:18:21.940

假设您使用的是 C# 3.0 或更高版本，请尝试以下操作：

（以下代码未经测试，但应该差不多）

```
List<client> clientList = new List<client>();

for (int i = 0; i < 5; i++)
{
    client c = new client();
    c.FName = "John";
    c.FName = "Smith";
    c.age = i;

    var b = (from cl in clientList
             where cl.FName = c.FName &&
                   cl.LName = c.LName
             select cl).ToList().Count() <= 0;

    if (b)
    {
        clientList.Add(c);
    }
} 
```

# c# - exe之间的通信？

> ID：15133791
> 
> 赞同：4
> 
> 时间：2013-02-28T11:00:37.063
> 
> 标签：c#, vb.net, tcp, named-pipes

我在一个 Windows Server 2012 上有几个用户（他们正在使用远程桌面）。

我有两个（vb.net）程序，需要相互通信 - 也就是说......每个用户都有两个需要通信的应用程序。

当多个实例在同一个盒子上运行时（每个 RDS 用户的实例上），让两个应用程序进行通信的最简单（也是最可行）的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:06:58.973

有很多选择：

*   消息队列（例如[MSMQ](http://msdn.microsoft.com/en-us/library/ms978430.aspx)）。
*   [ASP.NET WebAPI 自托管](http://www.asp.net/web-api/overview/hosting-aspnet-web-api/self-host-a-web-api)
*   [WCF 自托管](http://msdn.microsoft.com/en-us/library/ee939340.aspx).
*   ...

也许，在你的情况下，我会去使用消息队列。而且，由于 MSMQ 随 Windows 一起提供（要安装它，请转到控制面板中的添加/删除 Windows 功能）并且 .NET Framework 对其提供开箱即用的支持，因此它可能是一个不错的选择。

## 边注

*当我提到 WCF/WebAPI 自托管时，我的意思是每个进程都可以有一个非常小的 REST 或 SOAP（或其他）API，这可能允许整个进程中的任何一个都可以充当客户端和/或服务器。这是进行进程间消息传递的好方法*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:04:14.637

你可以：

1) 使用 SendMessage api - [http://msdn.microsoft.com/en-gb/library/windows/desktop/ms644950(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms644950(v=vs.85).aspx)

2) 运行客户端-服务器[http://www.codeproject.com/Articles/12318/Building-Client-Server-applications-with-VB-NET-fo](http://www.codeproject.com/Articles/12318/Building-Client-Server-applications-with-VB-NET-fo)

3）使用UDP广播[http://www.solidautomation.com/bryon/Using_UDP_and_Winsock_in_Visual_Basic_6.htm](http://www.solidautomation.com/bryon/Using_UDP_and_Winsock_in_Visual_Basic_6.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T04:12:30.593

***进程间通信***的可用选项是：
[WCF](http://msdn.microsoft.com/en-us/library/system.servicemodel.netnamedpipebinding.aspx)
[Remoting](http://www.codeproject.com/KB/threads/process_communication.aspx/process_communication.aspx)
[ASP.Net WebServices](http://msdn.microsoft.com/en-us/library/t745kdsh%28v=vs.90%29.aspx)
[WM_COPYDATA](http://msdn.microsoft.com/en-us/library/ms649011.aspx)
[套接字编程](http://www.codeproject.com/Articles/301275/Chatting-using-CSocket)

[MSDN 上的进程间通信](http://msdn.microsoft.com/en-us/library/aa365574%28v=vs.85%29.aspx)将是资源

# scala - 在 Play 2.1 和 Scala 中为文件上传编写测试用例

> ID：15133794
> 
> 赞同：10
> 
> 时间：2013-02-28T11:00:51.213
> 
> 标签：scala, testing, playframework-2.0, specs2

我找到了以下问题/答案：

[在 Play 2.0 FakeRequest 中测试 MultipartFormData](https://stackoverflow.com/questions/10890381/test-multipartformdata-in-play-2-0-fakerequest)

但似乎在 Play 2.1 中情况发生了变化。我试过像这样调整这个例子：

```
"Application" should {

"Upload Photo" in {
  running(FakeApplication()) {
    val data = new MultipartFormData(Map(), List(
        FilePart("qqfile", "message", Some("Content-Type: multipart/form-data"), 
            TemporaryFile(getClass().getResource("/test/photos/DSC03024.JPG").getFile()))
        ), List())
    val Some(result) = routeAndCall(FakeRequest(POST, "/admin/photo/upload", FakeHeaders(), data)) 
    status(result) must equalTo(CREATED)
    headers(result) must contain(LOCATION)
    contentType(result) must beSome("application/json") 
```

但是，每当我尝试运行请求时，都会收到一个空指针异常：

```
[error] ! Upload Photo
[error]     NullPointerException: null (PhotoManagementSpec.scala:25)
[error] test.PhotoManagementSpec$$anonfun$1$$anonfun$apply$3$$anonfun$apply$4.apply(PhotoManagementSpec.scala:28)
[error] test.PhotoManagementSpec$$anonfun$1$$anonfun$apply$3$$anonfun$apply$4.apply(PhotoManagementSpec.scala:25)
[error] play.api.test.Helpers$.running(Helpers.scala:40)
[error] test.PhotoManagementSpec$$anonfun$1$$anonfun$apply$3.apply(PhotoManagementSpec.scala:25)
[error] test.PhotoManagementSpec$$anonfun$1$$anonfun$apply$3.apply(PhotoManagementSpec.scala:25) 
```

如果我尝试仅用路由替换已弃用的 routeAndCall（并删除结果周围的选项），我会收到一个编译错误，指出它无法将 MultipartFormData[TemporaryFile] 的实例写入 HTTP 响应。

在使用 Scala 的 Play 2.1 中设计此测试的正确方法是什么？

* * *

**编辑**：尝试修改代码以仅测试控制器：

```
"Application" should {

"Upload Photo" in {

   val data = new MultipartFormData(Map(), List(
   FilePart("qqfile", "message", Some("Content-Type: multipart/form-data"), 
    TemporaryFile(getClass().getResource("/test/photos/DSC03024.JPG").getFile()))
), List())

   val result = controllers.Photo.upload()(FakeRequest(POST, "/admin/photo/upload",FakeHeaders(),data))

   status(result) must equalTo(OK)
   contentType(result) must beSome("text/html")
   charset(result) must beSome("utf-8")
   contentAsString(result) must contain("Hello Bob")
  } 
```

但是我现在在结果周围的所有测试条件上都出现类型错误，如下所示：

```
[error]  found   : play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result]
[error]  required: play.api.mvc.Result 
```

我不明白为什么要获取映射到结果的字节数组的交互器。这可能与我使用自定义正文解析器的方式有关吗？我的控制器的定义如下所示：

```
def upload = Action(CustomParsers.multipartFormDataAsBytes) { request =>

  request.body.file("qqfile").map { upload => 
```

使用这篇文章中的表单解析器：[Pulling files from MultipartFormData in memory in Play2 / Scala](https://stackoverflow.com/questions/15036121/pulling-files-from-multipartformdata-in-memory-in-play2-scala)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-07-08T00:40:57.420

Play 2.3 包含更新版本的 httpmime.jar，需要进行一些小的更正。使用 Play 的 Writeable 机制构建 Marcus 的解决方案，同时保留我的 Play 2.1 解决方案中的一些语法糖，这就是我想出的：

```
import scala.language.implicitConversions

import java.io.{ByteArrayOutputStream, File}

import org.apache.http.entity.ContentType
import org.apache.http.entity.mime.MultipartEntityBuilder
import org.apache.http.entity.mime.content._
import org.specs2.mutable.Specification

import play.api.http._
import play.api.libs.Files.TemporaryFile
import play.api.mvc.MultipartFormData.FilePart
import play.api.mvc.{Codec, MultipartFormData}
import play.api.test.Helpers._
import play.api.test.{FakeApplication, FakeRequest}

trait FakeMultipartUpload {
  implicit def writeableOf_multiPartFormData(implicit codec: Codec): Writeable[MultipartFormData[TemporaryFile]] = {
    val builder = MultipartEntityBuilder.create().setBoundary("12345678")

    def transform(multipart: MultipartFormData[TemporaryFile]): Array[Byte] = {
      multipart.dataParts.foreach { part =>
        part._2.foreach { p2 =>
          builder.addPart(part._1, new StringBody(p2, ContentType.create("text/plain", "UTF-8")))
        }
      }
      multipart.files.foreach { file =>
        val part = new FileBody(file.ref.file, ContentType.create(file.contentType.getOrElse("application/octet-stream")), file.filename)
        builder.addPart(file.key, part)
      }

      val outputStream = new ByteArrayOutputStream
      builder.build.writeTo(outputStream)
      outputStream.toByteArray
    }

    new Writeable[MultipartFormData[TemporaryFile]](transform, Some(builder.build.getContentType.getValue))
  }

  /** shortcut for generating a MultipartFormData with one file part which more fields can be added to */
  def fileUpload(key: String, file: File, contentType: String): MultipartFormData[TemporaryFile] = {
    MultipartFormData(
      dataParts = Map(),
      files = Seq(FilePart[TemporaryFile](key, file.getName, Some(contentType), TemporaryFile(file))),
      badParts = Seq(),
      missingFileParts = Seq())
  }

  /** shortcut for a request body containing a single file attachment */
  case class WrappedFakeRequest[A](fr: FakeRequest[A]) {
    def withFileUpload(key: String, file: File, contentType: String) = {
      fr.withBody(fileUpload(key, file, contentType))
    }
  }
  implicit def toWrappedFakeRequest[A](fr: FakeRequest[A]) = WrappedFakeRequest(fr)
}

class MyTest extends Specification with FakeMultipartUpload {
  "uploading" should {
    "be easier than this" in {
      running(FakeApplication()) {
        val uploadFile = new File("/tmp/file.txt")
        val req = FakeRequest(POST, "/upload/path").
          withFileUpload("image", uploadFile, "image/gif")
        val response = route(req).get
        status(response) must equalTo(OK)
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-02T05:35:05.557

根据各种邮件列表建议，我设法让它与 Play 2.1 一起工作。这是我的做法：

```
import scala.language.implicitConversions

import java.io.{ ByteArrayOutputStream, File }

import org.apache.http.entity.mime.MultipartEntity
import org.apache.http.entity.mime.content.{ ContentBody, FileBody }
import org.specs2.mutable.Specification

import play.api.http.Writeable
import play.api.test.{ FakeApplication, FakeRequest }
import play.api.test.Helpers._

trait FakeMultipartUpload {
  case class WrappedFakeRequest[A](fr: FakeRequest[A]) {
    def withMultipart(parts: (String, ContentBody)*) = {
      // create a multipart form
      val entity = new MultipartEntity()
      parts.foreach { part =>
        entity.addPart(part._1, part._2)
      }

      // serialize the form
      val outputStream = new ByteArrayOutputStream
      entity.writeTo(outputStream)
      val bytes = outputStream.toByteArray

      // inject the form into our request
      val headerContentType = entity.getContentType.getValue
      fr.withBody(bytes).withHeaders(CONTENT_TYPE -> headerContentType)
    }

    def withFileUpload(fileParam: String, file: File, contentType: String) = {
      withMultipart(fileParam -> new FileBody(file, contentType))
    }
  }

  implicit def toWrappedFakeRequest[A](fr: FakeRequest[A]) = WrappedFakeRequest(fr)

  // override Play's equivalent Writeable so that the content-type header from the FakeRequest is used instead of application/octet-stream  
  implicit val wBytes: Writeable[Array[Byte]] = Writeable(identity, None)
}

class MyTest extends Specification with FakeMultipartUpload {
  "uploading" should {
    "be easier than this" in {
      running(FakeApplication()) {
        val uploadFile = new File("/tmp/file.txt")
        val req = FakeRequest(POST, "/upload/path").
          withFileUpload("image", uploadFile, "image/gif")
        val response = route(req).get
        status(response) must equalTo(OK)
      }
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-12T12:50:41.360

我修改了 Alex 的代码以充当可更好地集成到 Play 2.2.2 中的 Writable

```
package test

import play.api.http._
import play.api.mvc.MultipartFormData.FilePart
import play.api.libs.iteratee._
import play.api.libs.Files.TemporaryFile
import play.api.mvc.{Codec, MultipartFormData }
import java.io.{FileInputStream, ByteArrayOutputStream}
import org.apache.commons.io.IOUtils
import org.apache.http.entity.mime.MultipartEntity
import org.apache.http.entity.mime.content._

object MultipartWriteable {

  /**
   * `Writeable` for multipart/form-data.
   *
   */
  implicit def writeableOf_multiPartFormData(implicit codec: Codec): Writeable[MultipartFormData[TemporaryFile]] = {

    val entity = new MultipartEntity()

    def transform(multipart: MultipartFormData[TemporaryFile]):Array[Byte] = {

      multipart.dataParts.foreach { part =>
        part._2.foreach { p2 =>
            entity.addPart(part._1, new StringBody(p2))
        }
      }

      multipart.files.foreach { file =>
        val part = new FileBody(file.ref.file, file.filename,     file.contentType.getOrElse("application/octet-stream"), null)
        entity.addPart(file.key, part)
      }

      val outputStream = new ByteArrayOutputStream
      entity.writeTo(outputStream)
      val bytes = outputStream.toByteArray
      outputStream.close
      bytes
    }

    new Writeable[MultipartFormData[TemporaryFile]](transform, Some(entity.getContentType.getValue))
  }
} 
```

这样就可以写出这样的东西：

```
val filePart:MultipartFormData.FilePart[TemporaryFile] = MultipartFormData.FilePart(...)
val fileParts:Seq[MultipartFormData.FilePart[TemporaryFile]] = Seq(filePart)
val dataParts:Map[String, Seq[String]] = ...
val multipart = new MultipartFormData[TemporaryFile](dataParts, fileParts, List(), List())
val request = FakeRequest(POST, "/url", FakeHeaders(), multipart)

var result = route(request).get 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-03T03:23:43.963

按照 EEColor 的建议，我得到了以下工作：

```
"Upload Photo" in {

    val file = scala.io.Source.fromFile(getClass().getResource("/photos/DSC03024.JPG").getFile())(scala.io.Codec.ISO8859).map(_.toByte).toArray

    val data = new MultipartFormData(Map(), List(
    FilePart("qqfile", "DSC03024.JPG", Some("image/jpeg"),
        file)
    ), List())

    val result = controllers.Photo.upload()(FakeRequest(POST, "/admin/photos/upload",FakeHeaders(),data))

    status(result) must equalTo(CREATED)
    headers(result) must haveKeys(LOCATION)
    contentType(result) must beSome("application/json")      

  } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-31T02:54:40.757

这是我的 Writeable[AnyContentAsMultipartFormData] 版本：

```
import java.io.File

import play.api.http.{HeaderNames, Writeable}
import play.api.libs.Files.TemporaryFile
import play.api.mvc.MultipartFormData.FilePart
import play.api.mvc.{AnyContentAsMultipartFormData, Codec, MultipartFormData}

object MultipartFormDataWritable {
  val boundary = "--------ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"

  def formatDataParts(data: Map[String, Seq[String]]) = {
    val dataParts = data.flatMap { case (key, values) =>
      values.map { value =>
        val name = s""""$key""""
        s"--$boundary\r\n${HeaderNames.CONTENT_DISPOSITION}: form-data; name=$name\r\n\r\n$value\r\n"
      }
    }.mkString("")
    Codec.utf_8.encode(dataParts)
  }

  def filePartHeader(file: FilePart[TemporaryFile]) = {
    val name = s""""${file.key}""""
    val filename = s""""${file.filename}""""
    val contentType = file.contentType.map { ct =>
      s"${HeaderNames.CONTENT_TYPE}: $ct\r\n"
    }.getOrElse("")
    Codec.utf_8.encode(s"--$boundary\r\n${HeaderNames.CONTENT_DISPOSITION}: form-data; name=$name; filename=$filename\r\n$contentType\r\n")
  }

  val singleton = Writeable[MultipartFormData[TemporaryFile]](
    transform = { form: MultipartFormData[TemporaryFile] =>
      formatDataParts(form.dataParts) ++
        form.files.flatMap { file =>
          val fileBytes = Files.readAllBytes(Paths.get(file.ref.file.getAbsolutePath))
          filePartHeader(file) ++ fileBytes ++ Codec.utf_8.encode("\r\n")
        } ++
        Codec.utf_8.encode(s"--$boundary--")
    },
    contentType = Some(s"multipart/form-data; boundary=$boundary")
  )
}

implicit val anyContentAsMultipartFormWritable: Writeable[AnyContentAsMultipartFormData] = {
  MultipartFormDataWritable.singleton.map(_.mdf)
} 
```

它改编自（并修复了一些错误）：[https ://github.com/jroper/playframework/blob/multpart-form-data-writeable/framework/src/play/src/main/scala/play/api/http/可写.scala#L108](https://github.com/jroper/playframework/blob/multpart-form-data-writeable/framework/src/play/src/main/scala/play/api/http/Writeable.scala#L108)

如果您有兴趣，请在此处查看整个帖子：http: [//tech.fongmun.com/post/125479939452/test-multipartformdata-in-play](http://tech.fongmun.com/post/125479939452/test-multipartformdata-in-play)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-19T17:10:28.530

对我来说，这个问题的最佳解决方案是[Alex Varju one](https://stackoverflow.com/a/15171144/2431728)

这是为 Play 2.5 更新的版本：

```
object FakeMultipartUpload {
  implicit def writeableOf_multiPartFormData(implicit codec: Codec): Writeable[AnyContentAsMultipartFormData] = {
    val builder = MultipartEntityBuilder.create().setBoundary("12345678")

    def transform(multipart: AnyContentAsMultipartFormData): ByteString = {
      multipart.mdf.dataParts.foreach { part =>
        part._2.foreach { p2 =>
          builder.addPart(part._1, new StringBody(p2, ContentType.create("text/plain", "UTF-8")))
        }
      }
      multipart.mdf.files.foreach { file =>
        val part = new FileBody(file.ref.file, ContentType.create(file.contentType.getOrElse("application/octet-stream")), file.filename)
        builder.addPart(file.key, part)
      }

      val outputStream = new ByteArrayOutputStream
      builder.build.writeTo(outputStream)
      ByteString(outputStream.toByteArray)
    }

    new Writeable(transform, Some(builder.build.getContentType.getValue))
  }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-20T13:55:46.910

在 Play 2.6.x 中，您可以通过以下方式编写测试用例来测试文件上传 API：

```
class HDFSControllerTest extends Specification {
  "HDFSController" should {
    "return 200 Status for file Upload" in new WithApplication {

      val tempFile = SingletonTemporaryFileCreator.create("txt","csv")
      tempFile.deleteOnExit()

      val data = new MultipartFormData[TemporaryFile](Map(),
      List(FilePart("metadata", "text1.csv", Some("text/plain"), tempFile)), List())

      val res: Option[Future[Result]] = route(app, FakeRequest(POST, "/api/hdfs").withMultipartFormDataBody(data))
      print(contentAsString(res.get))
      res must beSome.which(status(_) == OK)
   }
  }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-05T19:15:21.513

使 Alex 的版本与 Play 2.8 兼容

```
import akka.util.ByteString
import java.io.ByteArrayOutputStream
import org.apache.http.entity.mime.content.StringBody
import org.apache.http.entity.ContentType
import org.apache.http.entity.mime.content.FileBody
import org.apache.http.entity.mime.MultipartEntityBuilder
import play.api.http.Writeable
import play.api.libs.Files.TemporaryFile
import play.api.mvc.Codec
import play.api.mvc.MultipartFormData
import play.api.mvc.MultipartFormData.FilePart
import play.api.test.FakeRequest

trait FakeMultipartUpload {

  implicit def writeableOf_multiPartFormData(
    implicit codec: Codec
  ): Writeable[MultipartFormData[TemporaryFile]] = {
    val builder = MultipartEntityBuilder.create().setBoundary("12345678")

    def transform(multipart: MultipartFormData[TemporaryFile]): ByteString = {
      multipart.dataParts.foreach { part =>
        part._2.foreach { p2 =>
          builder.addPart(part._1, new StringBody(p2, ContentType.create("text/plain", "UTF-8")))
        }
      }
      multipart.files.foreach { file =>
        val part = new FileBody(
          file.ref.file,
          ContentType.create(file.contentType.getOrElse("application/octet-stream")),
          file.filename
        )
        builder.addPart(file.key, part)
      }

      val outputStream = new ByteArrayOutputStream
      builder.build.writeTo(outputStream)
      ByteString(outputStream.toByteArray)
    }

    new Writeable(transform, Some(builder.build.getContentType.getValue))
  }

  /** shortcut for generating a MultipartFormData with one file part which more fields can be added to */
  def fileUpload(
    key: String,
    file: TemporaryFile,
    contentType: String
  ): MultipartFormData[TemporaryFile] = {
    MultipartFormData(
      dataParts = Map(),
      files = Seq(FilePart[TemporaryFile](key, file.file.getName, Some(contentType), file)),
      badParts = Seq()
    )
  }

  /** shortcut for a request body containing a single file attachment */
  case class WrappedFakeRequest[A](fr: FakeRequest[A]) {
    def withFileUpload(key: String, file: TemporaryFile, contentType: String) = {
      fr.withBody(fileUpload(key, file, contentType))
    }
  }
  implicit def toWrappedFakeRequest[A](fr: FakeRequest[A]) = WrappedFakeRequest(fr)
} 
```

# python - 使用 Python 创建 WPA 消息完整性代码 (MIC)

> ID：15133797
> 
> 赞同：3
> 
> 时间：2013-02-28T11:00:54.900
> 
> 标签：python, encryption, wireless, wireshark, wpa

我试图计算 WPA 握手数据包的 MIC，但不幸的是它失败了。更准确地说，我采用了 802.1x 数据包（如规范所述）。

```
MIC = HMAC_MD5(MIC Key, 16, 802.1x data) 
```

这是相关的代码：

```
mic = hmac.new(ptk[0:16],data)
print "mic: " + mic.hexdigest()  + "\n" 
```

其中 hmac.new 取自 hmac 库：

```
import hmac,hashlib,binascii 
```

加密的密钥显然由 Pairwise Transcient Key（所谓的密钥确认密钥）的前 16 个字节组成。PTK 由名为 cowPatty 的程序确认。所以我可以排除这两个因素是错误的。这是我的 802.1x 数据，由十六进制值 0103 引入：

```
01030077fe010a001000000000000000
01ae11df37f5fb100665ce0c849f5950
c0e7901da3224ddfc9e9434babad5512
73000000000000000000000000000000
00000000000000000000000000000000
00e8b4b90bfc3fd97b657afeb66262ae
940018dd160050f20101000050f20201
000050f20401000050f202 
```

Wireshark 计算的 MIC 为：

```
e8b4b90bfc3fd97b657afeb66262ae94 
```

我计算的 MIC 是：

```
5492624bb538b52d6aa6261c692bd595 
```

不幸的是，我做什么都没关系，我永远无法计算相同的 MIC。也许一些专家有宝贵的意见，那真的很感激！

Best regards!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-26T09:36:03.207

Here is the EAPOL data (starting right after the Logical-Link Control) from the second message in a 4 way handshake:

```
unsigned char eapol[] =
{
    '\x01',        // Version
    '\x03',        // Type
    '\x00','\x77', // Length
    '\xfe',        // Key Descriptor Type
    '\x01','\x0a', // Key information
    '\x00','\x10', // Key length
    // Replay counter
    '\x00','\x00','\x00','\x00','\x00','\x00','\x00','\x01',
    // WPA Key Nounce
    '\x77','\xd6','\x54','\xad','\x0c','\x1f','\xea','\x2f',
    '\x20','\x99','\xf1','\xdd','\x1c','\xae','\xdb','\xd8',
    '\xf7','\xe8','\x86','\xb0','\x81','\x60','\xed','\x7f',
    '\x70','\xdd','\xbb','\x33','\xb6','\xf1','\xd9','\x98',
    // Key IV
    '\x00','\x00','\x00','\x00','\x00','\x00','\x00','\x00',
    '\x00','\x00','\x00','\x00','\x00','\x00','\x00','\x00',
    // Key RSC
    '\x00','\x00','\x00','\x00','\x00','\x00','\x00','\x00',
    // Key ID
    '\x00','\x00','\x00','\x00','\x00','\x00','\x00','\x00',
    // MIC **************** CHANGE HERE ********************
//  '\x0a','\x62','\x24','\x07','\x11','\x36','\xd5','\x67',
//  '\x87','\xc0','\x7b','\x82','\x6b','\x06','\xf7','\xff',
    '\x00','\x00','\x00','\x00','\x00','\x00','\x00','\x00',
    '\x00','\x00','\x00','\x00','\x00','\x00','\x00','\x00',
    // Key Data Length
    '\x00','\x18',
    // Key Data
    '\xdd','\x16','\x00','\x50','\xf2','\x01','\x01','\x00',
    '\x00','\x50','\xf2','\x04','\x01','\x00','\x00','\x50',
    '\xf2','\x04','\x01','\x00','\x00','\x50','\xf2','\x02'
}; 
```

Make sure you replace the 16 bytes of MIC field by '\x00' and you'll have a valid EAPOL data ready to be calculated against Michael algorithm.

Also, make sure you're using the right algorithm based on WPA version. WPA1 uses HMAC with MD5 hash function, WPA2 uses HMAC with SHA1 hash, as you can see in aircrack-ng source:

```
if (ap->wpa.keyver == 1)
    HMAC(EVP_md5(), ptk[j], 16, ap->wpa.eapol, ap->wpa.eapol_size, mic[j], NULL);
else
    HMAC(EVP_sha1(), ptk[j], 16, ap->wpa.eapol, ap->wpa.eapol_size, mic[j], NULL); 
```

I think python uses MD5 by default in HMAC object.

# c# - 向 Web 服务对象提供 SSL 证书时出现异常

> ID：15133798
> 
> 赞同：2
> 
> 时间：2013-02-28T11:00:55.520
> 
> 标签：c#, winforms, web-services, soap, ssl

我正在使用使用 Web 服务的应用程序的窗口。该 Web 服务要求客户​​端与其对象一起传递 SSL 证书。但我收到异常“加密异常未处理未指定错误”。

这是我的代码：

```
Property24ListingService _service = new Property24ListingService();

            // 告诉您的应用程序您对自签名 SSL 证书没有问题的代码
            ServicePointManager.ServerCertificateValidationCallback = 委托（对象 obj，X509Certificate 证书，X509Chain 链，SslPolicyErrors 错误）
            {
                返回（真）；
            };

                webRef1.CredentialsHeader 标头 = 新的 webRef1.CredentialsHeader();
                header.EMail = 电子邮件；
                header.Password = pwd;

                _service.CredentialsHeaderValue = 标头；
              // _service.ClientCertificates.Add(X509Certificate.CreateFromCertFile(cerPath));
                X509Certificate cer = new X509Certificate(X509Certificate.CreateFromCertFile(cerPath));
                _service.ClientCertificates.Add(cer);

                MessageBox.Show(_service.EchoAuthenticated("hi"));

                var 代理 = _service.FetchAgent(94);
                MessageBox.Show(agent.ToString());

```

我在创建“X509Certificate”对象的地方遇到了异常。

任何帮助都会很棒！

# backbone.js - RequireJS 和 Backbone 视图 - 这在初始化中没有正确的范围

> ID：15133799
> 
> 赞同：1
> 
> 时间：2013-02-28T11:01:01.370
> 
> 标签：backbone.js, requirejs

初始化主干视图时出现以下错误：

```
this.collection.on is not a function 
```

我有以下观点：

```
define([
    'jquery',
    'underscore',
    'backbone',
    'events',
    'utils',
    'text!../../templates/vehicles-template.html'
],
function (
    $,
    _,
    Backbone,
    vent,
    utils,
    vehiclesTemplate) {

    var VehiclesView = Backbone.View.extend({
        template: vehiclesTemplate,
        initialize: function () {
            this.collection.on('reset', this.render, this); //error:  this.collection.on is not a function
            utils.log('Vehicles view initialized');
        },
        render: function() {
            this.$el.empty().html(this.template({ vehicles: this.collection.toJSON() }));
            return this;
        }
    });

    return VehiclesView;
}); 
```

**这**将返回视图，但在尝试绑定到事件时不会在集合或模型上失败。

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:18:22.983

如问题评论中所述，您需要将`collection`属性传递给视图：

```
 var view = new VehiclesView({collection:collection}); 
```

# css - CSS 显示：表格单元格，表格内有 div

> ID：15133803
> 
> 赞同：1
> 
> 时间：2013-02-28T11:01:12.567
> 
> 标签：css, html

如果具有样式 table-row 的 div 在表格单元格内，如何使 display:table-cell 样式有效（或看起来相似的替代方案）？（见链接）

[http://jsfiddle.net/ELKQg/460/](http://jsfiddle.net/ELKQg/460/)

我希望 container1 div 的行为类似于 container2。

代码：（如果链接无法访问）

html:

```
<div id="container1" class="container">
    <table>
        <tr>
            <td>
    <div class="row">
        <div class="cell">aaaa</div>
        <div class="cell expand">b</div>
        <div class="cell">c</div>
    </div>
            </td>
        </tr>
        <tr>
            <td>
    <div class="row">
        <div class="cell">d</div>
        <div class="cell expand">eeeee</div>
        <div class="cell">f</div>
    </div>
            </td>
        </tr>
    </table>
</div>

<div id="container2" class="container">
    <div class="row">
        <div class="cell">aaaa</div>
        <div class="cell expand">b</div>
        <div class="cell">c</div>
    </div>
    <div class="row">
        <div class="cell">d</div>
        <div class="cell expand">eeeee</div>
        <div class="cell">f</div>
    </div>
</div> 
```

**CSS：**

```
.container{width: 500px;overflow:hidden; /* instead of clearfix div */}  
 div { border:1px solid;padding: 1px;}    
.row {display:table-row;}
.cell {display:table-cell;}
.expand{overflow:hidden;width:100%;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:51:39.023

1.  `<table>`包含你`<div>`的 s的额外内容`.container1`需要有`width: 100%`
2.  `display: table-cell`元素不一定需要包含`display: table-row`，只要父元素是`display: table`. 设置`.row`为那个（理想情况下你会重新命名它，因为规则不再有意义）

修复并分叉您的演示：http: [//jsfiddle.net/barney/ahMg8/](http://jsfiddle.net/barney/ahMg8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:22:54.447

使用`display: table`前用于父表`display:table-cell`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:24:19.313

在里面使用`td`'s 而不是 divs `tr`：

```
<div id="container1" class="container">
    <table>
        <tr>
            <td class="cell">aaaa</td>
            <td class="cell expand">b</td>
            <td class="cell">c</td>
        </tr>
        <tr>
            <td class="cell">d</div>
            <td class="cell expand">eeeee</td>
            <td class="cell">f</td>
        </tr>
    </table>
</div> 
```

[工作小提琴](http://jsfiddle.net/ELKQg/462/)

# php - 检查条件，然后更新 Magento

> ID：15133804
> 
> 赞同：0
> 
> 时间：2013-02-28T11:01:13.757
> 
> 标签：php, magento

如果条件为真，则需要在 magento 中更新价目表，如果为假则跳过。

问题是不知道为什么函数 _checkIfSkuInStock 全部返回 1。

我将一种产品设置为有货，另一种设置为缺货。

如果 sku 存在，下面是更新价目表的代码，如果产品有库存，我还想添加条件，否则跳过。

```
function _getConnection($type = 'core_read'){
    return Mage::getSingleton('core/resource')->getConnection($type);
}

function _getTableName($tableName){
    return Mage::getSingleton('core/resource')->getTableName($tableName);
}

function _getAttributeId($attribute_code = 'special_price'){
    $connection = _getConnection('core_read');
    $sql = "SELECT attribute_id
                FROM " . _getTableName('eav_attribute') . "
            WHERE
                entity_type_id = ?
                AND attribute_code = ?";
    $entity_type_id = _getEntityTypeId();
    return $connection->fetchOne($sql, array($entity_type_id, $attribute_code));
}

function _getEntityTypeId($entity_type_code = 'catalog_product'){
    $connection = _getConnection('core_read');
    $sql        = "SELECT entity_type_id FROM " . _getTableName('eav_entity_type') . " WHERE entity_type_code = ?";
    return $connection->fetchOne($sql, array($entity_type_code));
}

function _getIdFromSku($sku){
    $connection = _getConnection('core_read');
    $sql        = "SELECT entity_id FROM " . _getTableName('catalog_product_entity') . " WHERE sku = ?";
    return $connection->fetchOne($sql, array($sku));

}

function _checkIfSkuExists($sku){
    $connection = _getConnection('core_read');
    $sql        = "SELECT COUNT(*) AS count_no FROM " . _getTableName('catalog_product_entity') . " WHERE sku = ?";
    $count      = $connection->fetchOne($sql, array($sku));
    if($count > 0){
        return true;
    }else{
        return false;
    }
}

function _checkIfSkuInStock($sku){
    $connection = _getConnection('core_read');
    $sql        = "SELECT COUNT(*) AS count_no FROM " . _getTableName('cataloginventory_stock_item') . " WHERE is_in_stock = 1";
    $count      = $connection->fetchOne($sql, array($sku));
    if($count > 0){
        return true;
    }else{
        return false;
    }
}

function _updatePrices($data){
    $connection     = _getConnection('core_write');
    $sku            = $data[0];
    $newspecial_price       = $data[1];
    $productId      = _getIdFromSku($sku);
    $attributeId    = _getAttributeId();

    $sql = "UPDATE " . _getTableName('catalog_product_entity_decimal') . " cped
                SET  cped.value = ?

               WHERE  cped.attribute_id = ?
                AND cped.entity_id = ?";
        $connection->query($sql, array($newspecial_price, $attributeId, $productId));
    }

$csv                = new Varien_File_Csv();
$data               = $csv->getData('special_price.csv'); //path to csv
array_shift($data);    

    $message = '';
$count   = 1;
foreach($data as $_data){
    if(_checkIfSkuExists($_data[0]) and _checkIfSkuInStock($_data[0]) == 0){
        try{
            _updatePrices($_data);
            $message .= $count . '> Success:: (' . $_data[1] . ') product code  (' . $_data[0] . '). <br />';

        }catch(Exception $e){
            $message .=  $count .'> Error:: While Upating  Price (' . $_data[1] . ') of Sku (' . $_data[0] . ') => '.$e->getMessage().'<br />';
        }
    }else{
        $message .=  $count .'> Error:: Product code   (' . $_data[0] . ')  not in database<br />';
    }
    $count++;
}
echo $message; 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:16:23.217

在这段代码中：

```
function _checkIfSkuInStock($sku){
$connection = _getConnection('core_read');
$sql        = "SELECT COUNT(*) AS count_no FROM " . _getTableName('cataloginventory_stock_item') . " WHERE is_in_stock = 1";
$count      = $connection->fetchOne($sql, array($sku));
if($count > 0){
    return true;
}else{
    return false;
} 
```

}

您尝试使用 sku 填充： $connection->fetchOne($sql, array($sku)); 但是您的请求中没有任何准备好的字段 (?)。

添加类似这样的内容：

```
"SELECT COUNT(*) AS count_no FROM " . _getTableName('cataloginventory_stock_item') . " WHERE is_in_stock = 1 AND product_id=?" 
```

然后使用

```
$connection->fetchOne($sql, array($this->_getIdFromSku($sku))); 
```

它应该工作得更好；）

# git - Git仅将图像推送到非源远程

> ID：15133810
> 
> 赞同：1
> 
> 时间：2013-02-28T11:01:39.687
> 
> 标签：git, push, gitignore

我已经设置了一个 git 存储库，但我想创建另一个远程存储库/分支，仅将图像文件推送到（在 Amazon S3 cdn 上）。还需要推送包含图像的子文件夹。

关于我如何做到这一点的任何想法？

我可以有一个看起来像这样的 .gitignore 文件： * ！*/ ！*.jpg !*.png 等

但是在 origin/master 和新的图像远程之间推送时，我必须将它与常规的 .gitignore 文件交换。也许我可以有一个带有自己的 .gitignore 文件的分支，每次我想更新图像远程存储库时切换到该分支并推送？

这个问题解释了如何设置存储库，而不是如何完成仅图像推送到远程：[使用 Git 发布到 S3？](https://stackoverflow.com/questions/7031729/publish-to-s3-using-git)

如果您有任何建议，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:32:14.987

撇开二进制文件不适合像 git 这样的*分布式*版本控制这一事实不谈，我建议将它们保存在自己的 git repo 中（您可以将它们作为一个整体推送）。

您当前的存储库可以[使用符号链接](https://stackoverflow.com/questions/954560/what-does-git-do-to-files-that-are-a-symbolic-link)引用这些文件（具有从一个存储库到另一个存储库的相对路径）。

# spring-mvc - 使用 Spring MVC 和 Jackson Mapper 进行 HTML 转义

> ID：15133811
> 
> 赞同：1
> 
> 时间：2013-02-28T11:01:44.103
> 
> 标签：spring-mvc, jackson, html-escape-characters

我将使用 Jackson Mapper 在 Spring MVC 中转义 HTML 以避免 XSS 攻击。

我寻找独自与杰克逊一起逃跑以及如何在春季配置杰克逊。
我尝试使用 "<" ">" 之类的文本导出 json，我希望将它们转义到`&#60;`，`&#62;`

例如，我添加了一些用 "bold tag" 括起来的文本`<b>`，我希望在前端 html 中看到纯粗体标签文本，但最终文本在前端 html 页面中以粗体显示。

以下是我的方法，我不知道为什么它没有成功。

任何人都可以帮忙吗？

提前致谢！

```
public class CustomObjectMapper extends ObjectMapper {  
    public CustomObjectMapper() {
        this.getJsonFactory().setCharacterEscapes(new CustomCharacterEscapes());
    }
}

public class CustomCharacterEscapes extends CharacterEscapes {
    private final int[] asciiEscapes;

    public CustomCharacterEscapes() {
        int[] esc = CharacterEscapes.standardAsciiEscapesForJSON();
        esc['<'] = CharacterEscapes.ESCAPE_STANDARD;
        esc['>'] = CharacterEscapes.ESCAPE_STANDARD;
        esc['&'] = CharacterEscapes.ESCAPE_STANDARD;
        esc['\''] = CharacterEscapes.ESCAPE_STANDARD;
        asciiEscapes = esc;
    }

    @Override
    public int[] getEscapeCodesForAscii() {
        return asciiEscapes;
    }

    @Override
    public SerializableString getEscapeSequence(int ch) {
        return null;
    }
} 
```

```
 ```
<bean
    class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="messageConverters">
        <array>
            <bean id="jsonConverter"
                class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
                <property name="objectMapper">
                    <bean class="x.y.z.CustomObjectMapper" />
                </property>
            </bean>
        </array>
    </property>
</bean> 
``` 
            回答 #1

赞同：0

时间：2013-03-01T14:13:25.720

我从未尝试过编写自己的 HttpMessageConverter，但我确实发现[这篇文章](https://stackoverflow.com/questions/5019162/custom-httpmessageconverter-with-responsebody-to-do-json-things)似乎与您想要做的事情非常相关。在查看他们的解决方案与您在此处发布的内容时，我可以说我注意到的最大差异是您似乎没有实现/覆盖以下内容：

1.  受保护的布尔支持（Class clazz），它指示您支持哪种类类型（如果您希望它足够通用以处理每种可能性，或者某些特定于您的域对象的类，我会在您的情况下进行侦察，这将是 Object 或 Serializable )
2.  protected Object readInternal(Class clazz, HttpInputMessage inputMessage)，看起来它是用于请求端的
3.  protected void writeInternal(Object t, HttpOutputMessage outputMessage)，看起来像是用于响应端

Another approach might be to simple create a custom Jackson serializer in conjunction with @ResponseBody.  Or, better yet, if you have a value that is user-driven, and your storing it in a database, escape the values prior to insertion.  That way you don't need to do anything at all, and the value(s) in question would be "safe" from end-to-end.  If you wanted to get crazy-fancy, you could write a custom java.beans.PropertyEditor that escapes Strings for HTML and plug that into the mix using the InitBinder.

Finally, I would like to recomend that, instead of trying to replace the characters on your own, you use something like [Apache Commons-Lang](http://commons.apache.org/proper/commons-lang/)'s [StringEscapeUtils](http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringEscapeUtils.html) to escape the values.

```

# android - Android - 带有单选单选按钮的列表视图

> ID：15133814
> 
> 赞同：1
> 
> 时间：2013-02-28T11:01:53.070
> 
> 标签：android, listview, radio-button

我有一个包含 2 个单选按钮项目的列表视图。当从布局中膨胀它时，即使有很多空间，它也可以滚动，如下所示。![在此处输入图像描述](../Images/a4e55f5fda888d8caa2856c3afb42a29.png) 如屏幕截图所示，我有 2 个单选按钮。1\. 距离 2\. 评分

但是“评级”单选按钮不可见，我必须滚动才能看到它。为什么会这样。我尝试将布局高度设置为包装内容、填充父级和匹配父级。但这并没有解决问题。知道为什么会这样吗？

我在这里引用列表视图：

```
ListView radio_list = (ListView) view.findViewById(R.id.RadioList);
radio_list.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_single_choice,
                radio_list_items));

radio_list.setItemsCanFocus(true);
radio_list.setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

我的xml：

```
<LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#ffffff"
                android:paddingLeft="10dp"
                android:text="SEARCH"
                android:textColor="#FF3300"
                android:textSize="20dp" >
            </TextView>
        </LinearLayout>

        <RelativeLayout
            android:id="@+id/searchTextLayout"
            android:layout_width="match_parent"
            android:layout_height="50dip"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginBottom="20dip"
            android:layout_marginLeft="20dip"
            android:layout_marginRight="20dip"
            android:layout_marginTop="20dip"
            android:orientation="horizontal" >

            <ImageButton
                android:id="@+id/searchTextButton"
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:layout_alignParentLeft="true"
                android:background="#685E5C"
                android:contentDescription="Sample"
                android:scaleType="fitCenter"
                android:src="@drawable/abs__ic_search" />

            <EditText
                android:id="@+id/searchText"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_toRightOf="@id/searchTextButton"
                android:background="@drawable/background_black_border_full"
                android:padding="8dp"
                android:textColor="@android:color/white" />
        </RelativeLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#ffffff"
                android:paddingLeft="10dp"
                android:text="SORT BY"
                android:textColor="#FF3300"
                android:textSize="20dp" >
            </TextView>
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <ListView
                android:id="@+id/RadioList"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
               />
        </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:34:54.603

你的布局 xml 文件很奇怪，

首先你应该简化它：

在 LinearLayout 中有一个元素是没有意义的 => 这意味着相应的线性布局是无用的。

第二点：如果线性布局中有 2 个子元素，并且第一个子元素的高度为“match_parent”而没有设置任何 layout_weight，则第二个子元素将被推出，因为没有剩余空间。（这可能是你的问题）

第三点：您正在使用相对布局作为线性布局，证明是您尝试在其上使用的 android:orientation 参数。这是没用的。相对布局子级的位置由它们之间的相对定位给出。在您的情况下，您可以使用具有水平方向的 LinearLayout 而不是 RelativeLayout

帮助您的最佳建议：简化您的布局 xml。

[更多关于这个话题。](http://developer.android.com/training/improving-layouts/optimizing-layout.html)

# r - 向量中与给定日期最近的日期

> ID：15133815
> 
> 赞同：21
> 
> 时间：2013-02-28T11:02:01.210
> 
> 标签：r, date, closest

我想在给定日期的向量中确定最接近的日期。假设我有以下日期向量（有 5 个随机日期）：

```
coldate= as.Date(c("2013-08-03", "2013-09-04", "2013-09-08", "2013-09-12", "2013-11-01")); 
```

现在，我想找到最接近`x = as.Date("2013-10-01")`这个向量内部的日期。

这是我的代码：

```
> which((coldate-x) == min(coldate-x))
  [1] 1 
```

结果应该是 4，因为日期`"2013-09-12"`是最接近的。但是，我有 1... 我的代码有什么问题？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-28T11:05:38.933

你错过了`abs`照顾负值：

```
which(abs(coldate-x) == min(abs(coldate - x)))
[1] 4 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-28T12:49:55.110

另见`which.min`函数：

```
R> which.min(abs(x-coldate))
[1] 4 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-02-26T17:03:02.180

包中的`which.closest()`功能`birk`是一个简单的选项。

```
coldate= as.Date(c("2013-08-03", "2013-09-04", "2013-09-08", "2013-09-12", "2013-11-01"))
x = as.Date("2013-10-01")

which.closest(coldate, x)
[1] 4 
```

# c# - IMul tiValueConverter 的行为

> ID：15133821
> 
> 赞同：0
> 
> 时间：2013-02-28T11:02:25.093
> 
> 标签：c#, wpf, devexpress

我有一个带有样式模板的 DevExpress GridControl，它有一个转换器，提供单元格的背景画笔属性，但它不能正常工作。

在我的 GridControl 中，我想显示客户是否参加了研讨会，因此我为客户提供了一个专栏，并且根据所选月份，28 到 31 列带有 checkits，如果有研讨会，转换器将返回蓝色画笔如果没有研讨会，则在该日期或白色刷子。

选择月份后，GridControl 的源将更新，并且仅包含希望在该特定月份参加研讨会的客户，但是当我在 convert 方法中开始调试时，我看到它还会检查不应再出现在源集合中的客户而且我绝对确定在更新源集合后会调用转换方法，因为我通过为每一列提供一个新标题然后重置标题来触发转换方法。

奇怪的是，这有时有效，但并非每次都有效。

```
<dxg:GridControl x:Name="seminarGrid" ItemsSource="{Binding CustomerList}">
    <dxg:GridControl.Resources>
        <Style x:Key="customCellStyle" 
               BasedOn="{StaticResource {dxgt:GridRowThemeKey ResourceKey=CellStyle}}"
               TargetType="grid:CellContentPresenter">
            <Setter Property="Background">
                <Setter.Value>
                    <MultiBinding Converter="{converter:CellColorConverter}">
                        <Binding />
                        <Binding Path="Column.Header" />
                    </MultiBinding>
                </Setter.Value>
            </Setter>
        </Style>
     </dxg:GridControl.Resources>
     <dxg:GridControl.Columns>
         <dxg:GridColumn FieldName="Customer" Header="Customer" AllowEditing="False"/>
         <dxg:GridColumn x:Name="d0" FieldName="d0" Header="1." Width="27" 
                         CellStyle="{StaticResource customCellStyle}" 
                         EditSettings="{dxe:CheckSettings}"/>
         <dxg:GridColumn x:Name="d1" FieldName="d1" Header="2." Width="27" 
                         CellStyle="{StaticResource customCellStyle}" 
                         EditSettings="{dxe:CheckSettings}"/>
         [...]
         <dxg:GridColumn x:Name="d30" FieldName="d30" Header="2." Width="27" 
                         CellStyle="{StaticResource customCellStyle}" 
                         EditSettings="{dxe:CheckSettings}"/>
    </dxg:GridControl.Columns>
</dxg:GridControl> 
```

转换方法：

```
public object Convert(object[] value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value[1].ToString().Equals(string.Empty))
            return Brushes.White;

        var cellData = value[0] as EditGridCellData;
        var customer = cellData.RowData.Row as Customer;

        if (customer == null)
            return Brushes.White;

        var date = int.Parse(value[1].ToString().Split('.')[0], NumberStyles.Integer);
        var result = Brushes.BlueViolet;
        var viewTag = cellData.View.Tag is int
                          ? int.Parse(cellData.View.Tag.ToString(), NumberStyles.Integer)
                          : 0;
        var elements = customer.BookingRelation.Where(p => p.Value.Datum.Day == date && p.Value.Datum.Month == viewTag);

        if (elements.Count() == 1)
            result = Brushes.CornflowerBlue;

        return customer.BookingRelation.Any(item => item.Value.Date.Day == date && item.Value.Date.Month == viewTag) ? result : Brushes.White;
    } 
```

我怎么解决这个问题？我能想到的唯一解决方案是每次用户选择一个月时在代码隐藏中生成 GridControl ，但这比仅更新源集合要慢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:18:16.830

很难说没有看到转换器的代码，但我倾向于摆脱不必要的 MultiBinding 并简化为：

```
<Setter Property="Background" Value="{Binding Path=Column.Header, Converter={converter:CellColorConverterAmended} }" /> 
```

# maven - 无法在 maven-pmd-plugin 5.0.2 中使用自定义规则集

> ID：15133822
> 
> 赞同：6
> 
> 时间：2013-02-28T11:02:25.377
> 
> 标签：maven, customization, maven-plugin, pmd

我希望 maven-pmd-plugin 包含我指定的规则集并排除一些规则（特别是 UselessParentheses）

就像[文档](http://maven.apache.org/plugins/maven-pmd-plugin/examples/usingRuleSets.html)中描述的那样，我将以下内容放在所有模块的父级 pmd.xml 中：

```
 <reporting>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-pmd-plugin</artifactId>
        <version>3.0</version>
        <configuration>
          <rulesets>
            <ruleset>/home/ubuntu/ruleset.xml</ruleset>
          </rulesets>
        </configuration>
      </plugin>
    </plugins>
  </reporting> 
```

并准备了一个这样的自定义规则集：

```
 <!-- We'll use the entire rulesets -->
  <rule ref="rulesets/java/basic.xml"/>
  <rule ref="rulesets/java/imports.xml"/>
  <rule ref="rulesets/java/codesize.xml"/>
  <rule ref="rulesets/java/design.xml"/>
  <rule ref="rulesets/java/strings.xml"/>
  <rule ref="rulesets/java/unusedcode.xml"/>

  <!-- We want everything from this except some -->
  <rule ref="rulesets/java/unnecessary.xml">
    <exclude name="UselessParentheses"/>
  </rule> 
```

作为主要部分。

然而，当我运行时，我`mvn clean jxr:jxr pmd:check`在报告中有“UselessParentheses”。此外，用`-X`节目运行它

```
[DEBUG] Preparing ruleset: java-basic
[DEBUG] Before: java-basic After: java-basic.xml
[DEBUG] The resource 'rulesets/java/basic.xml' was found as jar:file:/home/ubuntu/.m2/repository/net/sourceforge/pmd/pmd/5.0.2/pmd-5.0.2.jar!/rulesets/java/basic.xml.
[DEBUG] Preparing ruleset: java-unusedcode
[DEBUG] Before: java-unusedcode After: java-unusedcode.xml
[DEBUG] The resource 'rulesets/java/unusedcode.xml' was found as jar:file:/home/ubuntu/.m2/repository/net/sourceforge/pmd/pmd/5.0.2/pmd-5.0.2.jar!/rulesets/java/unusedcode.xml.
[DEBUG] Preparing ruleset: java-imports
[DEBUG] Before: java-imports After: java-imports.xml
[DEBUG] The resource 'rulesets/java/imports.xml' was found as jar:file:/home/ubuntu/.m2/repository/net/sourceforge/pmd/pmd/5.0.2/pmd-5.0.2.jar!/rulesets/java/imports.xml. 
```

所以看起来 pmd 忽略了我的自定义规则集。

我希望自定义规则集起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T08:04:50.120

您已将***maven-pmd-plugin***配置为[报告](http://maven.apache.org/pom.html#Reporting)，即

> 报告包含专门针对***站点生成阶段***的元素。某些 Maven 插件可以生成在报告元素下定义和配置的报告。

这意味着您应该使用以下命令执行：-

```
mvn clean site 
```

如果您想按照您提到的方式执行，请将您的配置复制到[builds](http://maven.apache.org/pom.html#Build)，例如

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-pmd-plugin</artifactId>
            <version>3.0</version>
            <configuration>
                <rulesets>
                    <ruleset>/home/ubuntu/ruleset.xml</ruleset>
                </rulesets>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

然后当你执行

```
mvn clean jxr:jxr pmd:check 
```

结果应该如你所料。[您可以在此处](http://maven.apache.org/pom.html)找到有关 Maven Pom 的更多信息。

我希望这可能会有所帮助。

问候，

查理·Ch。

# facebook-graph-api - 喜欢表没有用户完成的所有喜欢

> ID：15133837
> 
> 赞同：1
> 
> 时间：2013-02-28T11:03:09.377
> 
> 标签：facebook-graph-api, facebook-like

我正在尝试获取用户所做的所有喜欢。我正在使用以下*fql*查询来获取喜欢的内容。

```
SELECT object_type, post_id, object_id FROM like WHERE user_id=me() 
```

我将用户的访问令牌与此查询一起传递。

一些用户的点赞活动没有反映在点赞表中。做了一些测试，发现缺少的是某些特定朋友的帖子上的点赞。

我还没有弄清楚类似表中是否缺少用户的任何其他类似活动。

用户的点赞活动记录在点赞表中的规则是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-28T13:40:04.003

Facebook好像没有给出准确的Like结果，起初以为是用户隐私设置造成的，但是和自己的朋友做了一些测试，API仍然显示like total_count和返回的like objects数量之间存在差异。这要么是一个错误，要么是 Facebook 的一个神秘的深思熟虑的决定。

请检查这些其他人问类似的问题：

*   [帖子的点赞数和点赞数据之间的区别？](https://stackoverflow.com/questions/8043467/difference-between-a-posts-likes-count-and-the-likes-data)
*   [Facebook Graph API 和 FQL 之类的对照片的计数都不正确？](https://stackoverflow.com/questions/7808391/facebook-graph-api-and-fql-like-count-on-photos-both-incorrect)
*   [Facebook 墙贴赞不计入 fql 查询](https://stackoverflow.com/questions/12342421/facebook-wall-post-likes-are-not-counted-in-fql-query)

# html - 保证金自动变为负值

> ID：15133843
> 
> 赞同：-1
> 
> 时间：2013-02-28T11:03:28.793
> 
> 标签：html, css, margin

我的边距有问题：自动 - 垂直居中 `#something { width: 97%; height: 300px; border: 1px solid red; position: absolute; top: 0; bottom: 0; margin: auto; }`

这适用于每个现代浏览器 - 当页面（视口）高于 300px 时，它垂直居中，但是，当页面（视口）低于 300px 时，它在任何地方都可以工作，除了在 firefox 中......在 firefox 中运行它很好（也许它是不好的功能，但它的逻辑功能）在其他浏览器中，居中元素的顶部消失在视口的顶部。

[http://jsfiddle.net/LhHed/2/](http://jsfiddle.net/LhHed/2/)这是上帝的例子 - 当你调整结果窗口的大小时，在 Firefox 中工作得很好，在其他浏览器中没有。可以修吗？或者它的Firefox功能不好？

编辑：现场示例[http://dev8.newlogic.cz](http://dev8.newlogic.cz)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:35:50.420

据我所知，您希望分隔线的顶部显示在页面顶部。这目前没有发生，因为您将位置设置为`top:0; bottom:0;`，该`top`属性与该属性冲突`bottom`，最终将分隔线定位到页面底部。只需删除该`bottom`属性即可防止元素的顶部出现在视口之外：

```
#something {
    width: 97%;
    height: 300px;
    border: 1px solid red;
    position: absolute;
    top: 0;
    margin: auto;
} 
```

[JSF](http://jsfiddle.net/LhHed/3/)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:46:23.927

当我使用`position: relative`body 元素时，我删除了浏览器中的问题。现在它也可以在 Firefox 和其他浏览器中使用。[http://dev8.newlogic.cz](http://dev8.newlogic.cz)上的实时示例

# android - 我可以将数值常量存储在值文件夹中吗？

> ID：15133851
> 
> 赞同：2
> 
> 时间：2013-02-28T11:03:45.087
> 
> 标签：android

对于字符串常量，*values*文件夹已经可以用来存储全局值。可以对数值做同样的事情吗？还是我必须在单例（或`Application`实现）中声明所有常量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:21:04.230

如果您需要存储整数值，您仍然可以使用[Integer Resource Style](http://developer.android.com/guide/topics/resources/more-resources.html#Integer)。不幸的是，不支持浮点值作为资源类型。查看[官方文档](http://developer.android.com/guide/topics/resources/available-resources.html)以获取更多信息。最终，如果符合您的需要，您始终可以使用一个充满静态字段的简单类。

# asp.net-mvc - 如何获取 DropDownListFor 的选中项？

> ID：15133853
> 
> 赞同：0
> 
> 时间：2013-02-28T11:03:50.010
> 
> 标签：asp.net-mvc, dropdownlistfor

如何获取 DropDownListFor 的选中项？这是我的下拉列表：

```
 <div class="drop-down-list">
        <%: Html.DropDownListFor(model => model.StageId, ViewBag.StagesList as SelectList,new { id="stageOne"})%>
        <%: Html.ValidationMessageFor(model => model.StageId) %>
    </div> 
```

我试过了，但它不工作：

```
<script>
    var e = $('#stageOne').val();
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:06:22.220

试试这个 .. 从这里：[使用 jQuery 从下拉列表（选择框）中获取选定的文本](https://stackoverflow.com/questions/1643227/get-selected-text-from-dropdownlist-using-jquery)

```
$("#yourdropdownid option:selected").text()
$("#yourdropdownid option:selected").val() 
```

# node.js - Node.js：跟踪目录中的新文件

> ID：15133854
> 
> 赞同：1
> 
> 时间：2013-02-28T11:03:52.180
> 
> 标签：node.js, fs

我想跟踪目录中的新文件。我使用了文档中给出的脚本：[http ://nodejs.org/api/fs.html#fs_fs_watch_filename_options_listener](http://nodejs.org/api/fs.html#fs_fs_watch_filename_options_listener)

```
var fs = require('fs');
fs.watch('mydir/', function (event, filename) {
    console.log('event is: ' + event);
    if (filename) {
        console.log('filename provided: ' + filename);
    } else {
        console.log('filename not provided');
    }
}); 
```

例如，我添加了要`mydir/`使用`touch hello.txt`的文件。

运行脚本时，我没有得到新的文件名，因为发出的事件是`rename`!! 这是控制台输出。

```
event is: rename
filename not provided 
```

如何获取文件新名称`hello.txt`？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T11:49:22.780

同一页面还描述了您的问题：

> 并非每个平台都支持在回调中提供文件名参数（目前仅在 Linux 和 Windows 上支持）。即使在受支持的平台上，也不总是保证提供文件名。

我认为你最好的选择是切换到另一个提供类似功能的模块，比如[手表](https://github.com/mikeal/watch)（我自己没有任何经验）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-10T14:00:47.840

```
fs.watch('somedir', (event, filename) => {
})
```

这里`filename`有效，您只需要跟踪第二个参数。

Mac 10.11.3，节点 v5.9

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-14T22:32:45.810

**[https://github.com/paulmillr/chokidar](https://github.com/paulmillr/chokidar)上的**chokidar**很容易设置。按照自述文件中的说明进行设置。这是我用来检测视频文件何时在相对于我的 Node.js 应用程序的根目录的 /video 子文件夹中生成的一个快速示例：**

 ***   安装 Node.js（包括 NPM）
*   生成 package.json`npm init`
*   将 Chokidar 库安装到 /node_modules 子文件夹中并将依赖项保存到 package.json`npm install chokidar --save`
*   创建一个示例程序文件（即 touch `video.js`）
*   创建一个文件夹来观看（即`mkdir videos`）
*   将以下代码添加到 video.js（如 README 中所述，它将监视 /videos 子文件夹中的更改并忽略以句号为前缀的文件名）： `var chokidar = require('chokidar'); chokidar.watch('./videos', {ignored: /[\/\\]\./}).on('all', function(event, path) { console.log(event, path); });`

*   启动`node video.js`打印到输出的程序，指示正在观看 /videos 子目录及其内容，即 `$ node video.js addDir ./videos`

*   将文件（即 test.mov）复制/保存到 /videos 子目录会在终端的标准输出中打印以下内容： `add videos/test.mov`
*   删除文件会将以下内容打印到终端： `unlink videos/test.mov`**

# java - What are the go-to data structures in Java?

> ID：15133856
> 
> 赞同：0
> 
> 时间：2013-02-28T11:03:54.203
> 
> 标签：java, list, data-structures, dictionary, set

In Python, you can get pretty far if you know about the standard 'list', 'tuple', 'set' and 'dictionary'. These are the basic data structures any decent Python programmer should know about.

What are the Java equivalents to these data structures, and are there other data structures worth noting?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:07:03.607

Sadly there is no native Tuple in Java, most of the time you go with:

*   List: ArrayList (is a List and a List is a Collection)
*   Set: HashSet (is a Set and a Set is a Collection)
*   Dictionary: HashMap (is a Map, but a Map is not a Collection)

Have a look at Java Collections in general: [http://docs.oracle.com/javase/tutorial/collections/index.html](http://docs.oracle.com/javase/tutorial/collections/index.html) For concurrency: [http://docs.oracle.com/javase/tutorial/essential/concurrency/collections.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/collections.html)

There are a lot of external libraries (Guava, Apache, ...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:09:18.470

You can do a lot with LinkedList, HashMap, HashSet, and we have a dictionary [http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Dictionary.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Dictionary.html) too.

The best way to learn any new language is to read code. GitHub hosts a ton of open source Java applications. You can check on the latest here: [https://github.com/languages/Java](https://github.com/languages/Java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:11:01.473

Does [this](https://stackoverflow.com/questions/1274711/java-data-structures-reference) help?

Java has all its data structures, including set, list, [HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html), defined in the [Java Collections Framework](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html). A HashMap is essentially equivalent to a dictionary.

As for a tuple equivalent, look into [unmodifiableList](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html?is-external=true#unmodifiableList%28java.util.List%29).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T11:11:16.030

In Java he have a one-size-fits-all tool: a *class*. For most problems you solve in Python with a tuple or a dictionary, in Java you write a custom class, with instance variables, constructors, getters, and setters. So when in Java, be prepared to write some boilerplate.

As far as data structures, the default ones are `ArrayList`, `HashSet`, and `HashMap`. There are sorted versions: `TreeSet` and `TreeMap`—when you need them, they are very useful.

When you need close-to-the-metal performance, you'll resort to arrays.

In Java you also enjoy the built-in concurrency, and then it gets complicated: there are performant options like `ConcurrentHashSet/Map` and also synchronized wrappers around plain collections: `Collections/synchronizedSet/Map/List` (these are methods that return a wrapping object).

# android - 使用 Android SIP 库从 INVITE 请求中提取信息

> ID：15133858
> 
> 赞同：2
> 
> 时间：2013-02-28T11:04:08.680
> 
> 标签：android, sip

您好我正在使用 ANDROID 的 SIP API 在 Android 上开发一个 SIP 客户端。我从 ANDROID 提供的示例开始，并对其进行了修改。

我使用 Asterisk 作为 SIP 服务器，它使用一个扩展

扩展 => 111,SIPAddHeader(X-ABC:192.168.8.3)

相同 => n,Dial(SIP/user1,15,tT)

这会生成一个带有附加 SIP 标头的 INVITE 请求，

是否有任何可用的机制可以让我使用 Android 的 SIP API 提取 INVITE 请求中包含的附加信息？

或者无论如何提取整个邀请请求？

# android - 什么网络服务器支持安卓应用程序？

> ID：15133864
> 
> 赞同：0
> 
> 时间：2013-02-28T11:04:20.953
> 
> 标签：android, webserver

我制作了一个能够获取一些用户输入（例如文本、照片等）并将其发布到 Web 服务器的 android 应用程序。什么是推荐的网络服务器类型来支持这样的安卓应用程序？我的意思是像 joomla、java 或 spring 服务器或任何其他？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:21:04.993

如果您愿意尝试新的东西，那么我建议您查看[https://parse.com/](https://parse.com/)或[https://www.stackmob.com/](https://www.stackmob.com/)。它们是使您的应用程序启动和运行变得异常容易的平台。

对于您想要完成的事情，有很多可能性。我会选择最符合您现有技能的一项。我真的很喜欢 node.js/MongoDB 作为一个堆栈，但其他人更喜欢运行传统的 JAX-RS MySQL 后端。

这实际上取决于您想在托管上花费多少以及您知道/愿意学习什么。您没有做任何需要特殊或独特技术堆栈的事情。

# heroku - Heroku：IOError - HTTP 会话已打开：保存 Amazon S3 时

> ID：15133875
> 
> 赞同：1
> 
> 时间：2013-02-28T11:05:00.937
> 
> 标签：heroku, amazon-s3, ioerror

有时，当应用程序写入图像文件 Amazon S3 时，我的 heroku 应用程序会出现 IOError（HTTP 会话已打开）。我不知道为什么有时会发生这种情况。这是否取决于服务器容量？实际上，我的应用程序仅在 Heroku 的一个 Worker 上运行。

```
app[web.1]: IOError - HTTP session already opened:
app[web.1]:     /usr/local/lib/ruby/1.9.1/net/http.rb:623:in `start'
app[web.1]:     /app/vendor/bundle/ruby/1.9.1/gems/sauberia-aws-s3-0.6.2.1254423624/lib/aws/s3/connection.rb:53:in `request'
app[web.1]:     /app/vendor/bundle/ruby/1.9.1/gems/sauberia-aws-s3-0.6.2.1254423624/lib/aws/s3/base.rb:72:in `request'
app[web.1]:     /app/vendor/bundle/ruby/1.9.1/gems/sauberia-aws-s3-0.6.2.1254423624/lib/aws/s3/base.rb:101:in `put'
app[web.1]:     /app/vendor/bundle/ruby/1.9.1/gems/sauberia-aws-s3-0.6.2.1254423624/lib/aws/s3/object.rb:249:in `store'
app[web.1]:     /app/server.rb:601:in `block (2 levels) in <top (required)>'
app[web.1]:     /app/server.rb:556:in `each'
app[web.1]:     /app/server.rb:556:in `block in <top (required)>' 
```

# android - 当我单击 Onback 按钮时，警报对话框和进度对话框关闭

> ID：15133877
> 
> 赞同：1
> 
> 时间：2013-02-28T11:05:02.183
> 
> 标签：android, android-alertdialog

在我的 android 应用程序中，我显示了警报对话框。当我单击 OnBack 按钮时，警报对话框被取消。我的问题是当用户单击该 onBack 按钮时。我必须显示该对话框。如何处理这个问题。提前致谢。

```
AlertDialog.Builder alertbox = new AlertDialog.Builder( HomeScreenActivity.this);
alertbox.setMessage("Please select a Favorite Business"); 
alertbox.setNeutralButton("Nearby", new DialogInterface.OnClickListener() 
   { 
    public void onClick(DialogInterface arg0, int arg1) { } }) 
    .setNegativeButton("Search",new DialogInterface.OnClickListener() 
       { public void onClick(DialogInterface dialog,int id) { } }); 
alertbox.show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:30:42.653

尝试这个

```
 public void onBackPressed() {
AlertDialog.Builder alertbox = new AlertDialog.Builder( HomeScreenActivity.this);
  alertbox.setMessage(""Please select a Favorite Business")
        .setCancelable(false)
         .setNuetralButton("Nearby", new DialogInterface.OnClickListener() {
             public void onClick(DialogInterface dialog, int id) {

             }
         })
         .setNegativeButton("Search", new DialogInterface.OnClickListener() {
             public void onClick(DialogInterface dialog, int id) {

             }
         });
 alertbox.create();
 alertbox.show();

        }         
  }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:14:22.837

尝试这个。它不会关闭对话框`onBackPress`

```
alertbox.setCancelable (false) 
```

设置此对话框是否[`Cancelable`](http://developer.android.com/reference/android/app/Dialog.html#setCancelable%28boolean%29)与`BACK key.`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T12:03:59.543

你需要这样的东西：

```
dialog.setOnKeyListener(new OnKeyListener(){
@Override
                    public boolean onKey(DialogInterface dialog, int keyCode,
                            KeyEvent event) {
                        // TODO Auto-generated method stub
                        if(keyCode == KeyEvent.KEYCODE_BACK){
                                return true;
                            }
                            return false;
                        }}); 
```

# javascript - 在 Require.js 中填充一个使用 module.exports 的模块？

> ID：15133879
> 
> 赞同：12
> 
> 时间：2013-02-28T11:05:04.220
> 
> 标签：javascript, requirejs, amd

我有一个想要包含在 Require.js 链中的模块。（更具体地说：[https](https://github.com/component/emitter) ://github.com/component/emitter ）

在浏览器上我得到： `uncaught reference error: module is not defined`

对于模块导出，它定义： `module.exports = Emitter;`

我猜这被称为 AMD / Node 方式。如有错误请指正。

无论如何，我希望 require.js 能够以某种方式在浏览器中进行模块。我认为 Require.js 的声明性填充选项可以帮助我，但我仍然看到上述错误。

如果不手动修补模块，如何解决这个问题？（因为我想保留我设置的自动构建过程）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-28T19:54:40.643

# 组件是 CommonJS 模块

Components 框架是一个以 CommonJS 模块格式编写的组件的集合。一个模块的预期值被简单地分配给一个名为 的“神奇属性” `module.export`，旨在由 JS 运行时提供。

这不是 Web JS 运行时的工作方式，因为 CommonJS 模块对特定的工作流程做出假设。如果无法同步保证文件已加载（或未加载时发生灾难性失败），浏览器将无法支持与独立环境相同的工作流程。因此，必须包装以 CommonJS 格式编写的任何内容以考虑到这一点。

为了将 CommonJS 模块与 AMD 样式的模块加载器（如 RequireJS）一起使用，您可以自己包装您需要的模块，也可以使用 r.js 构建工具。

### 手动包装 CommonJS 模块

```
define(function(require, exports, module) {
  //Put traditional CommonJS module content here
}); 
```

*来自*：[CommonJS 笔记](http://requirejs.org/docs/commonjs.html#manualconversion)

### 使用 r.js 自动包装

```
r.js -convert path/to/commonjs/modules path/to/converted/modules 
```

鉴于您已经安装`r.js`了`npm -g i requirejs`.

# 解决具体问题

然而，这一切只是解决了“如何在异步工作流中使用 CommonJS 模块？”这个更普遍的问题。看起来您实际上想要实现的只是能够在不自己编写事件系统的情况下获得它。

由于您是在客户端加载它，因此有很多客户端库已经提供了此功能。提供此功能的最受欢迎的库可能是[Backbone.js 的 Events](http://backbonejs.org/#Events)。使用 Backbone 事件的好处是 Backbone 得到了很好的支持，并且有据可查。缺点是 Backbone 是另一个必须加载的依赖项（包括它自己的依赖项，Underscore）。此外，Backbone 导出到全局变量，因此您需要声明一个 RequireJS shim 配置才能使用`require()`它。

## 真正的 AMD

圣杯将是一个小型且与 AMD 兼容的 EventEmitter 类型库。为此，您可以尝试使用[pubsub.js](https://github.com/federico-lox/pubsub.js)或[nbd.js 之](https://github.com/behance/nbd.js)类的微型库（披露：我是 nbd.js 的作者）。

如果您确实使用 nbd.js，它提供的不仅仅是 pubsub 功能。但是您可以专门`require()`只使用 pubsub 模块。

如果您使用 git 进行源代码控制，最简单的方法是将其用作子模块。

```
git submodule add git@github.com:behance/nbd.js.git path/to/nbd 
```

然后，`require`pubsub 模块，做你想做的事！

```
require(['nbd/trait/pubsub'], function(pubsub) { /* do whatever */ }); 
```

# windows-7 - 批处理文件 - 查找字符串并将文件名写入另一个文件

> ID：15133889
> 
> 赞同：0
> 
> 时间：2013-02-28T11:05:40.617
> 
> 标签：windows-7, batch-file, dos

我有 100 个文本文件，我需要在所有 100 个文本文件中找到一个字符串，如果在任何文件中找到该字符串，那么我想将该文件名写入日志，并且我有很多字符串可以在一个单独的文本文件，请提供一个批处理代码来实现这一点。字符串位于文本文件中，如下例所示，

my_strings.txt

测试1

测试2

测试3

请帮助使用批处理文件实现上述目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:09:44.033

这里有几点可以让你开始自己解决这个问题。

### 搜索文件和打印文件名见`Findstr`

`findstr /?`在命令行中键入并输入。请特别注意`/M`选项标志。

[`SS64`](http://ss64.com/nt/findstr.html) [`Technet`](http://technet.microsoft.com/en-us/library/bb490907.aspx)

### 捕获输出见`>>`重定向

[`Rob`](http://www.robvanderwoude.com/battech_redirection.php)

# c# - 列表框重复项

> ID：15133891
> 
> 赞同：2
> 
> 时间：2013-02-28T11:05:45.053
> 
> 标签：c#, asp.net, button, textbox, listbox

我在使用列表框时遇到问题。
如果我有一个文本框和一个将数据放入列表框中的添加按钮。
不小心输入了两次相同的名字。
如何防止列表框中的重复项？
我是在按钮部分还是在列表框下输入代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:09:03.343

您可以在添加之前检查它是否已经存在，例如使用 Linq：

```
bool contains = lbName.Items.Cast<ListItem>()
    .Any(li => li.Text.Equals(txtName.Text, StringComparison.OrdinalIgnoreCase));
if(!contains)
{
    lbName.Items.Add(new ListItem(txtName.Text));
} 
```

假设您要不区分大小写地进行比较。

**编辑**由于您实际上想要添加完整的文件路径，`ListBox`但您想防止添加具有相同文件名的第二个文件，您可以使用[`Path`](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)该类：

```
string fullFilePath = .... 
string fileName = Path.GetFileName(fullFilePath);
bool contains = lbName.Items.Cast<ListItem>()
    .Any(li => Path.GetFileName(li.Text).Equals(fileName, StringComparison.OrdinalIgnoreCase));
if (!contains)
{
    lbName.Items.Add(new ListItem(fullFilePath));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:07:32.853

在你的按钮点击中，你可以有这样的东西：

```
 if (this.listBox.Items.Contains(this.txtCustomerName.Text) == false)
  {
     this.listBox.Items.Add(this.txtCustomerName.Text);
  } 
```

或者，如果您使用 ListItems：

```
ListItem item = new ListItem(this.txtCustomerName.Text);

if (listBox.Items.Contains(item) == false)
{
   listBox.Items.Add(item);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:07:53.990

在按钮中添加代码，您甚至可以将代码添加到文本框的事件中，实时检查输入的文本是否正确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-25T06:49:33.727

```
 foreach (ListItem item in yourListITem.Items)
{
    if (item.Text == yourNewListITemText.SelectedItem.Text)
    {
        empAdd = 0;
    }
}
if(empAdd==0)
{
//Item Exist....
}
else
{
//New Add
 yourListBox.Items.Add(new ListItem(yourlistbox.SelectedItem.ToString(), yourlistbox.SelectedValue.ToString()));
} 
```

# php - 向 CSV 导出添加报价

> ID：15133892
> 
> 赞同：4
> 
> 时间：2013-02-28T11:05:46.760
> 
> 标签：php, csv

我正在使用`fputcsv`. 我有正在写入的字符串，但是我要求数据用双引号引起来。

```
foreach ($orderDetails['lines'] as $line) {
     fputcsv($orderImportCsv, $line);
} 
```

这在编辑器中打开时会创建以下内容（崇高）

> L,M3344,,100
> 
> L,M3356,,50

我需要将这些字段中的每一个都用双引号括起来。

所以我试过这个：

```
foreach ($lines as &$line) {
    foreach ($line as &$column) {
        $column = '"' . $column . '"';
    }
} 
```

所以基本上这应该通过每一行字段并将其包装在“”中。但是在运行之后，我得到以下输出：

> """L""","""M3344""","""""","""100"""
> 
> """L""","""M3356""","""""","""50"""

它现在在变量周围放置了 2 组双引号！

有一个更好的方法吗？

**更新**

我知道`fputcsv`有两个可选参数。分隔符和外壳。但是我相信附件默认为“”，但仅当字符串被拆分为单独的单词时。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T11:24:19.157

由于您自己插入了附件，因此您必须指示 PHP 不使用任何附件。似乎没有记录的方法可以做到这一点，但使用空格似乎有效：

```
<?php
foreach($orderDetails['lines'] as $line){
    foreach ($line as &$column) {
        $column = '"' . $column . '"';
    }
    unset($column);

    fputcsv($orderImportCsv, $line, ',', ' ');
} 
```

或者您可以避免[fputcsv()](http://php.net/manual/en/function.fputcsv.php)并自己编写所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:24:58.427

如果你*必须*在每个领域都有报价，那`fputcsv`恐怕还不够好。它只在它认为需要它们的字段周围加上引号——即那些有空格或逗号等的字段。

您尝试通过在执行之前将引号添加到值中来强制引号`fputcsv`将不起作用，因为 PHP 将这些引号视为字段值的一部分，因此需要转义（通过添加更多引号）。

为了在每个字段上强制引用，您需要手动生成 CSV 记录。这样的事情应该可以解决问题：

```
$quoteCSV = function($field) {
    return '"'.$field.'"';
}

foreach ($lines as $line) {
    fputs($file, implode(',',array_walk($field, $quoteCSV)));
} 
```

注意： 1\. 由于使用了 lambda 函数，此代码需要 PHP 5.3 或更高版本。2\. 我没有尝试处理实际包含引号的字段，因为您没有指定应该如何转义它们。如果任何数据包含引号，上述代码将生成损坏的 CSV 文件。我会留给你根据需要解决这个问题。

希望有帮助。

然而，我想说的是，在每个字段中添加引号的要求是非常不寻常的。尽管它会被识别为 CSV 文件，但大多数生成 CSV 的程序将执行 PHP 所做的工作，并且仅在必要时添加引号。几乎我遇到的每个读取 CSV 文件的程序都对这种安排非常满意。可能值得仔细检查为什么存在此要求 - 这听起来像是另一端软件的问题，而不是您应该在端做的任何事情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T11:33:36.797

这很正常，如果您使用 Excel 创建 CSV 文件并用双倍配额包围一个单元格，那么它会将其他单元格添加到源文件中，例如：

这是 CSV 在 Microsoft Office Excel 2007 中的显示方式：

```
"
""
"""
""""
""""" 
```

源代码：

```
"""",
"""""",
"""""""",
"""""""""",
"""""""""""", 
```

然后没有任何问题，您可以在[文档](http://php.net/manual/en/function.fputcsv.php)中看到第一个示例：

```
<?php

$list = array (
    array('aaa', 'bbb', 'ccc', 'dddd'),
    array('123', '456', '789'),
    array('"aaa"', '"bbb"')
);

$fp = fopen('file.csv', 'w');

foreach ($list as $fields) {
    fputcsv($fp, $fields);
}

fclose($fp);
?> 
```

上面的示例将以下内容写入 file.csv：

```
aaa,bbb,ccc,dddd
123,456,789
"""aaa""","""bbb""" 
```

# sorting - coreutils join 和 sort 的正确用法

> ID：15133894
> 
> 赞同：0
> 
> 时间：2013-02-28T11:05:57.777
> 
> 标签：sorting, join, command-line

我正在尝试使用标准命令行工具`join`来连接两个文件。根据文档，两个输入文件都需要为此进行排序。最初我只是通过管道`sort`来实现这一点，但这仍然导致诸如“加入：文件 2 未按排序顺序”之类的错误。然后我更仔细地研究了一下，发现我应该使用`sort -k 1b,1`，但这似乎也没有帮助。我什至玩弄了语言环境（设置`LANG=C`或`LANG=EN_en`），但似乎没有任何效果。

到目前为止，我尝试过：

*   `cat x | sort | join -j 1 a -`
*   `cat x | sort -k1b,1 | join -j 1 a -`
*   `cat x | LANG=C sort -k1b,1 | join -j 1 a -`
*   `cat x | LANG=EN_en sort -k1b,1 | join -j 1 a -`

那么，如何在未排序的文件上正确使用 join 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:09:05.727

基本上 ：

```
join <(sort file1) <(sort file2) 
```

# dynamic - 如何在ffpmeg中制作动态时间戳，而不是静态的？

> ID：15133895
> 
> 赞同：4
> 
> 时间：2013-02-28T11:05:58.620
> 
> 标签：dynamic, time, batch-file, ffmpeg, timestamp

我正在使用 ffmpeg (windows pc) 和我的网络摄像头来记录我不在家时发生的事情。它工作正常，但我无法在屏幕上制作动态时钟和日期。我努力了

```
-vf "[in]drawtext=fontsize=12:fontfile=arial.ttf:text='%date%':x=10:y=25,  
drawtext=fontsize=12:fontfile=arial.ttf:text="%TIME:~0,2%-%TIME:~3,2%-%TIME:~6,2%" 
```

它可以工作，但它只显示开始时刻的时间，而不是在视频录制过程中改变。
它看起来像：![在此处输入图像描述](../Images/065394287b903bb35180206d3eff46e8.png)
有什么方法可以在屏幕上超时？
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T14:13:23.180

I've [read](http://betterlogic.com/roger/2012/08/ffmpeg-add-timestamp-windows/) that the `drawtext` video filter in Windows ffmpeg supports [printf style time syntax](http://msdn.microsoft.com/en-us/library/fe06s4ak%28v=vs.71%29.aspx).

# java - 我可以将 awt 图像转换为 gwt 图像吗？

> ID：15133900
> 
> 赞同：0
> 
> 时间：2013-02-28T11:06:17.060
> 
> 标签：java, image, gwt, awt, transform

有没有办法将 AWT 图像转换为 GWT 图像？在服务器端，我将字节数组转换为图像：

```
public Image getImageData(byte[] imageByteArray)
{
     String base64 = Base64Utils.toBase64(imageByteArray);
     base64 = "data:image/png;base64," + base64;
     byte[] byteArray = base64.getBytes();
     //byte[] byteArray = BASE64Decoder.decode(imageByteArray);
     Image image = Toolkit.getDefaultToolkit().createImage(byteArray);
     image = createNewImage(image);
     return image;
}

private Image createNewImage(Image image)
{
    try
    {
        Label l = new Label();
        MediaTracker tracker = new MediaTracker(l);
        tracker.addImage(image, 0);
        tracker.waitForAll();
        return image;
    }
    catch (InterruptedException e)
    {
        e.printStackTrace();
    }
    return null;
} 
```

现在我通过 RPC 将它发送到客户端，我想将它添加到我的 UiBinder 类中。但它需要一个 GWT 图像和

```
Toolkit.getDefaultToolkit().createImage(byteArray) 
```

需要 AWT 图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:40:49.200

GWT 不支持`java.awt.anything`. 你必须使用`GWT Image class`.

```
GWT != Java 
```

[https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/wBryd0GbBT8](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/wBryd0GbBT8)

# objective-c - 创建类似 Xcode 的大纲视图标题

> ID：15133902
> 
> 赞同：3
> 
> 时间：2013-02-28T11:06:25.500
> 
> 标签：objective-c, xcode, cocoa, nsoutlineview

好的，这就是我要复制的内容：

![在此处输入图像描述](../Images/e81f01dd5bf9a80b200aac412c363edf.png)

我想那实际上是`NSOutlineView`一个“源列表”类型。我以前和`NSOutlineView`s 一起工作`ImageAndTextCell`。

*   它是基于视图的`NSOutlineView`还是我仍然应该使用`ImageAndTextCell`？
*   我如何为这个特定的“标题”元素绘制不同的背景？
*   你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:05:23.427

如何使用基于视图并为**标题**行和**项目**`NSTableView`行返回不同的视图（让我们称之为..）？

 ****我想你可以有一个`NSTableViewDelegate`取决于需要什么类型的方法从它的`tableView:viewForTableColumn:row:`方法返回一个标题类型或项目类型视图原型，具体取决于行（索引）？

不确定该方法返回的视图是否允许具有不同的高度，或者您是否必须单独处理。如果基于视图的表格视图不够聪明，无法自行完成，您可能还必须实现`- (CGFloat)tableView:(NSTableView *)tableView heightOfRow:(NSInteger)row`为标题/项目适当地设置行高。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T11:19:52.233

使用不带标签的 NSTabView 内容，因为按钮只使用 NSButtons 但没有背景，只有整个单元格的图像并将它们设置为单选按钮，确保它们在 NSMatrix 中。然后，您可以在选项卡视图面板中使用 NSOutlineView。****

# kendo-ui - 客户端模板中的剑道数字文本框 - 名称中的点问题

> ID：15133911
> 
> 赞同：1
> 
> 时间：2013-02-28T11:06:59.830
> 
> 标签：kendo-ui, grid, kendonumerictextbox, kendo-template, client-templates

我在剑道网格中进行以下操作：

```
columns.Bound(x => x.Item.Equity)
    .Format("{0:f2}")
    .Width(100)
    .HeaderTemplate("Equity<br/>Meta")
    .ClientTemplate(Html.Kendo().NumericTextBox()
        .Name("mp_#=Item.Id#")
        .Min(0)
        .HtmlAttributes(new { value = "#=Item.Equity#" })
        .ToClientTemplate()
        .ToHtmlString()); 
```

并为 NumericTextBox 获取此客户端模板：

```
<input class="k-input" id="mp_#=Item.Id#" min="0" name="mp_#=Item.Id#" type="number" value="#=Item.Equity#" /><script>
    jQuery(function(){jQuery("\#mp_#=Item\\.Id#").kendoNumericTextBox({});});
<\/script> 
```

然后我在控制台：错误：无效的模板

我认为问题出在

```
jQuery("\#mp_#=Item\\.Id#").kendoNumericTextBox({}); 
```

因为项目\.Id

拜托，有人可以帮我解决为 numerictextbox 分配正确名称的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:47:32.960

我还没有看到它是这样完成的。通常 ClientTemplate 是一个脚本块的 id 字符串。

这可能会有所帮助：[Kendo Grid Column 的 ClientTemplate 可以像 ListView 这样的另一个 kendo 对象吗？](https://stackoverflow.com/questions/13712515/can-a-kendo-grid-columns-clienttemplate-to-another-kendo-object-like-a-listview)

# android - android中CPU使用率高，如何降低？

> ID：15133913
> 
> 赞同：1
> 
> 时间：2013-02-28T11:07:01.147
> 
> 标签：android, performance, android-asynctask

在我的应用程序中，我使用从服务器获取数据`JSON`。每次使用`doInBackground`如下代码的过程获取数据。像这样，我使用`doInBackground`不同链接的三个过程来获取单个类中的数据。我的应用程序使用 CPU 超过 25% 如何纠正它。

```
protected String doInBackground(String... params) {

        try {

            HttpClient client = new DefaultHttpClient();
            HttpResponse response;

            HttpPost post = new HttpPost(
                    "http://www.qwerty.in/foodnew/customer/viewFav?json=");

            json.put("cus", "" + CUTOMER_ID);

            post.setHeader("json", json.toString());
            StringEntity se = new StringEntity(json.toString());

            se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,
                    "application/json"));
            post.setEntity(se);
            response = client.execute(post);

            // get a data
            InputStream in = response.getEntity().getContent();
            String a = convertStreamToString(in);
            // Log.v("id", ""+a);

            try {

                jsonarray = new JSONArray("[" + a + "]");
                json = jsonarray.getJSONObject(0);
                String menus = (json.getString("favous"));
                viewfavouriteSuccess = json
                        .getString("viewfavccess");

                try {

                    jsonarray = new JSONArray(menus);
                    for (int i = 0; i < jsonarray.length(); i++) {
                        json = jsonarray.getJSONObject(i);
                        String id = json.getString("faem_id");
                        String name = json.getString("fav");
                        String price = json.getString("fae");
                        String stock = json.getString("fack");
                        // String fav_success =
                        // json.getString("viewfavouess");

                        HashMap<String, String> map = new HashMap<String, String>();
                        map.put(FAV_PRODUCT_ID, id);
                        map.put(FAV_ITEM_NAME, name);
                        map.put(FAV_PRICE, price);
                        map.put(FAV_STOCK, stock);
                        fav_alist.add(map);
                        // Log.v("fav_list", ""+fav_alist);
                    }

                } catch (Exception e) {
                    // TODO: handle exception
                }

            } catch (Exception e) {

                Toast.makeText(getApplicationContext(),
                        "You are a new user, No favourite items", 700)
                        .show();

            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        return viewfavouriteSuccess;
    } 
```

# ios - 从 iOS 6 在 Twitter 上发帖

> ID：15133919
> 
> 赞同：0
> 
> 时间：2013-02-28T11:07:12.953
> 
> 标签：ios, twitter, ios6, sharing

我想配置发送数据到 facebook 和 twitter。我有一篇大文章。在 facebook 上运行良好，但 Twitter 是空的。我理解这是因为数据量超过 140 个字符。

如何检查要发送到 facebook 的数据是否发送所有文章。而如果将数据发送到 Twitter，则只发送了 140 个字符。

非常感谢你

```
 NSArray *activityItems;
    NSString *myText = [self.webview stringByEvaluatingJavaScriptFromString:@"document.documentElement.innerText"];
    NSLog(@"my text -> %@",myText);
    NSString *path = ([self.data isKindOfClass:[NSArray class]]?[NSString stringWithFormat:@"%@-%d",self.key,selectedCategory]:self.key);
    NSString *string = [NSString stringWithFormat:@"%@.jpg", path];
    UIImage *image = [UIImage imageNamed:string];
        activityItems = @[myText, image];
   UIActivityViewController* activityViewController =
    [[UIActivityViewController alloc] initWithActivityItems:activityItems
                                      applicationActivities:nil];
    [self presentViewController:activityViewController animated:YES completion:^{}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:22:12.623

一个非常简单/快速和肮脏的检查是只计算字符串中的字符数，如下所示：

```
if ([string length] <= 140) {
   // Good for Twitter
} else {
   // Too long
} 
```

Twitter 确实会缩短 URL，这意味着有时您可能会被允许超过 140 个字符的推文。如果您直接展示社交表，您可以使用该`setInitialText`方法检查它是否是可接受的长度，但您使用的是活动视图控制器。

# java - 如何将图像向左（或向右）移动？

> ID：15133925
> 
> 赞同：2
> 
> 时间：2013-02-28T11:07:35.370
> 
> 标签：java, image, awt, bufferedimage

我正在编写一个处理图像的 Java 程序。

现在我需要将图像向左移动`n pixels`。我可以使用函数裁剪图像，但`Graphics.setClip(Shape)`我无法将其移动到左对齐。

[编辑] 抱歉上述问题的信息不足。

我有一个图像，并将其绘制在这样的画布上：

```
@Override
public void paint(Graphics g){
    g.drawImage(image, 0, 0, this);
} 
```

我需要在画布上将图像向左移动`n pixels`（这样我可以在移动后在右侧的位置绘制新的东西）。

![换挡前的图](../Images/9b0f4e4462be003d98c9b7bc5ea1bafe.png) ![在此处输入图像描述](../Images/a03ae0490a333aa65fe230192e44b690.png)

这是一个例子。图一是原图，图二是移位后的图。请告诉我我该怎么做。

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:49:53.367

一种方法是使用[`BufferedImage.getSubimage(x,y,w,h)`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html).

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.*;

class ImageCrop {

    public static void main(String[] args) throws Exception {
        URL url = new URL("http://i.stack.imgur.com/enifS.jpg");
        final BufferedImage image = ImageIO.read(url);
        int x = 43;
        final Image crop = image.getSubimage(x, 0, image.getWidth()-x, image.getHeight());
        Runnable r = new Runnable() {

            @Override
            public void run() {
                JPanel gui = new JPanel(new BorderLayout(4,4));

                gui.add(new JLabel(new ImageIcon(image)), BorderLayout.LINE_START);
                gui.add(new JLabel(new ImageIcon(crop)), BorderLayout.LINE_END);

                JOptionPane.showMessageDialog(null, gui);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

当然，更简单的方法是改变：

```
@Override
public void paint(Graphics g){
    g.drawImage(image, 0, 0, this);
} 
```

到：

```
@Override
public void paint(Graphics g){
    g.drawImage(image, -43, 0, this);
} 
```

# android - 如何更改 EditText 选择句柄/锚点的颜色/外观？

> ID：15133926
> 
> 赞同：24
> 
> 时间：2013-02-28T11:07:41.127
> 
> 标签：android, android-edittext, android-theme

所以我用[Holo Colors Generator](http://android-holo-colors.com)和[Action Bar Style Generator](http://jgilfelt.github.com/android-actionbarstylegenerator/)将 Holo Theme 的样式更改为我自己的颜色。但是当我在编辑文本中选择文本时，所选位置的“标记”仍然是蓝色的。我怎样才能改变它？

![剩下](../Images/a8cbb647b81a8d4bc795f2ca836c43b3.png)![中间](../Images/88e4452c5a84de9a33f23709e5e240d4.png)![正确的](../Images/8f20ea129eae49ef7753d5fa7f07a31d.png)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-28T11:07:41.127

这里最糟糕的部分是找到该项目的“名称”以及如何在主题中调用它。所以我查看了android SDK文件夹中的每个drawable，最后找到了名为“text_select_handle_middle”、“text_select_handle_left”和“text_select_handle_right”的drawable。

所以解决方案很简单：将这些具有自定义设计/颜​​色的可绘制对象添加到您的可绘制文件夹中，并将它们添加到您的主题样式定义中，例如：

```
<style name="MyCustomTheme" parent="@style/MyNotSoCustomTheme">
        <item name="android:textSelectHandle">@drawable/text_select_handle_middle</item>
        <item name="android:textSelectHandleLeft">@drawable/text_select_handle_left</item>
        <item name="android:textSelectHandleRight">@drawable/text_select_handle_right</item>
</style> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-12-05T00:53:22.290

如何从代码中做到这一点：

```
try {
    final Field fEditor = TextView.class.getDeclaredField("mEditor");
    fEditor.setAccessible(true);
    final Object editor = fEditor.get(editText);

    final Field fSelectHandleLeft = editor.getClass().getDeclaredField("mSelectHandleLeft");
    final Field fSelectHandleRight =
        editor.getClass().getDeclaredField("mSelectHandleRight");
    final Field fSelectHandleCenter =
        editor.getClass().getDeclaredField("mSelectHandleCenter");

    fSelectHandleLeft.setAccessible(true);
    fSelectHandleRight.setAccessible(true);
    fSelectHandleCenter.setAccessible(true);

    final Resources res = context.getResources();

    fSelectHandleLeft.set(editor, res.getDrawable(R.drawable.text_select_handle_left));
    fSelectHandleRight.set(editor, res.getDrawable(R.drawable.text_select_handle_right));
    fSelectHandleCenter.set(editor, res.getDrawable(R.drawable.text_select_handle_middle));
} catch (final Exception ignored) {
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-11-28T16:57:42.573

我意识到这真的很晚了，但是如果您只想更改句柄的颜色，您只需将以下内容添加到您的 styles.xml 文件中。

```
<style name="ColoredHandleTheme">
    <item name="colorControlActivated">@color/colorYouWant</item>
</style> 
```

然后只需将主题设置在`EditText`您想要影响的任何活动上。

或者，如果您想在应用范围内设置它，您可以执行以下操作：

```
<style name="ColoredHandleThemeForWholeApp">
    <item name="colorAccent">@color/colorYouWant</item>
</style> 
```

并为整个应用程序设置该主题。

问题解决了！

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-01-26T11:10:05.703

为了更改选择句柄的颜色，您必须在应用主题中覆盖激活的颜色：

```
<style name="MyCustomTheme" parent="@style/Theme.AppCompat.Light.NoActionBar">
    <item name="android:colorControlActivated">@color/customActivatedColor</item>
</style> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-08T16:44:07.327

[您可以在http://androiddrawables.com/Other.html](http://androiddrawables.com/Other.html)中看到这些属性。

更改您的 values/styles.xml，例如：

```
<style name="AppTheme.Cursor" parent="AppTheme">
    <item name="colorAccent">@color/cursor</item>
</style> 
```

其中@color/cursor 添加在values/color.xml 中。之后将样式应用于活动：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setTheme(R.style.AppTheme_Cursor);
    ... 
```

访问[如何更改 EditText 指针颜色（不是光标）](https://stackoverflow.com/questions/33929552/how-to-change-edittext-pointer-color-not-cursor/34161273#34161273)以获取其他解决方案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-27T18:42:50.560

对于那些尝试通过代码处理此问题的人，您可以使用 Jared Rummler 提供的 API 版本小于或等于 28 的答案，但从 Android Q(API 29) 开始，他们添加了 @UnsupportedAppUsage(maxTargetSdk = Build.VERSION_CODES.P ) 注释，它似乎不适用于 Q+。相反，添加到 EditText 的新方法：

```
setTextSelectHandle(R.drawable.test);
setTextSelectHandleLeft(R.drawable.test);
setTextSelectHandleRight(R.drawable.test); 
```

因此，要使其正常工作，您可以执行以下操作：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.Q) {
                setTextSelectHandle(R.drawable.test);
                setTextSelectHandleLeft(R.drawable.test);
                setTextSelectHandleRight(R.drawable.test);
            } else {
                try {
                    final Field fEditor = TextView.class.getDeclaredField("mEditor");
                    fEditor.setAccessible(true);
                    final Object editor = fEditor.get(this);

                    final Field fSelectHandleLeft = editor.getClass().getDeclaredField("mSelectHandleLeft");
                    final Field fSelectHandleRight =
                            editor.getClass().getDeclaredField("mSelectHandleRight");
                    final Field fSelectHandleCenter =
                            editor.getClass().getDeclaredField("mSelectHandleCenter");

                    fSelectHandleLeft.setAccessible(true);
                    fSelectHandleRight.setAccessible(true);
                    fSelectHandleCenter.setAccessible(true);

                    final Resources res = getResources();

                    fSelectHandleLeft.set(editor, res.getDrawable(R.drawable.test, null));
                    fSelectHandleRight.set(editor, res.getDrawable(R.drawable.test, null));
                    fSelectHandleCenter.set(editor, res.getDrawable(R.drawable.test, null));
                } catch (final Exception ignored) {
                }
            } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-18T14:24:34.850

如果您只想在一个 EditText 上隐藏指针，您可以仅为它设置主题：

样式.xml

```
<style name="TransparentPointerEditText">
    <item name="colorControlActivated">@android:color/transparent</item>
</style> 
```

用法

```
<EditText
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:theme="@style/TransparentPointerEditText" /> 
```

# javascript - 有没有办法在按下“enter”键时禁用表单提交？

> ID：15133929
> 
> 赞同：0
> 
> 时间：2013-02-28T11:07:46.870
> 
> 标签：javascript, jquery, events

我正在用 JavaScript 为学校创建一个简单的程序，它将 1 和用户通过简单表单提交的值之间的数字随机化。在提交值时，我通过 jQuery 隐藏表单并动态附加一个文本提示，其中包含随机化结果和一个重置按钮。

此时，我在使用回车键时遇到问题，因为表单（与重置按钮相反）仍然响应按下回车键，造成破坏，因为我的重置按钮设置为触发点击一下。那么有什么办法可以禁止回车键触发提交事件呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:11:42.420

应该看起来像

```
<form name="" id="" action="" onsubmit="javascript:return false;">
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:42:34.983

if (window.event.keyCode) = 13; 返回假

禁用返回键

[禁用键盘 <enter> 键](https://stackoverflow.com/questions/1235716/disable-keyboard-enter-key) - 如果您先尝试一些事情，您将获得更好的答案，如果不是这样，人们可以更好地了解您要做什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:11:55.453

这是您可以使用 jQuery 禁用表单提交的方法：

```
$('form').submit(function(event){ // on form submisson
    event.preventDefault(); // prevent default action
}); 
```

**编辑：**[jsFiddle](http://jsfiddle.net/RFkUT/)中的代码

# javascript - JS 不作用于 .load()-ed html

> ID：15133931
> 
> 赞同：0
> 
> 时间：2013-02-28T11:07:55.857
> 
> 标签：javascript, jquery

我有一个令人费解的难题：

我有这个 JS： *编辑更新的 JS*

```
 $(".img-thumb").on("click", function(){ // exhibiting the same behaviour as .click()
    thumbID = $(this).attr("id");
    console.log(thumbID);
    $(".gal-act").removeClass("gal-act");
    $(this).addClass("gal-act"); // as suggested below
}); 
```

这意味着使用 .load() jquery 函数对插入页面的一段 html 进行操作。令人困惑的是，当它显示为原始文件时，它可以在 html 上工作（如下所示：http: [//keithneilson.co.uk/experimental/products/Data/prod-data.html](http://keithneilson.co.uk/experimental/products/Data/prod-data.html)，是的，我知道缺少图像，但没有人打算单独查看此页面）。正如您从该链接中看到的那样，该代码只是为了更改缩略图的左边框以指示目前选择哪个，一旦我解决了这个难题，我将添加其他功能。

这是在最后一页中作为弹出窗口插入的相同 html（单击幻灯片下方的红色框）： http: [//keithneilson.co.uk/experimental/products/](http://keithneilson.co.uk/experimental/products/)。如您所见，图像现在可以正常工作，但如果您再次单击缩略图，您将看到脚本没有运行（也没有日志输出）。

现在，它是相同的 html 和相同的 javascript，但它不起作用。我的问题是为什么，是否有已知的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:08:25.107

使用`.on()`or`.live()`而不是`.click()`取决于 jQuery 版本。

**编辑：**更多关于这个[jquery .live('click') vs .click()](https://stackoverflow.com/questions/4944293/jquery-liveclick-vs-click)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:21:06.883

让我回答为什么。

当您使用 click 函数绑定事件时，它仅将 click 事件绑定到当前存在于 DOM 中的元素上，因此当注册 ciick 事件时，您的 html 在稍后加载时不存在于 DOM 中。所以事件没有绑定到你的元素。

试试@hexblot 提供的建议。

**更新：**

```
$('body').on('click', '.img-thumb', function(){
    thumbID = $(this).attr("id");
    console.log(thumbID);
    $(".gal-act").removeClass("gal-act");
    $("#"+thumbID).addClass("gal-act");
}); 
```

# ruby - 检查字符串是否包含来自特定集合的唯一字符

> ID：15133932
> 
> 赞同：1
> 
> 时间：2013-02-28T11:08:01.367
> 
> 标签：ruby, regex, string

我希望字符串由集合 [a,i,b,w] 中的唯一字符组成。字符串应仅由该集合中的至少 1 个和最多 4 个字符组成，但字符不能重复，并且允许任何排列。因此，例如 aa 或 bwaw 是不允许的。我可以使用正则表达式来测试它还是我需要自己在代码中解析它？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:12:55.060

对于（数学）字符集（一个字符集中没有两次出现相同的字符，而不是允许多次出现的多重集），您可以基于以下模板构造正则表达式：

```
^(?!.*(.).*\1)[<set_of_characters>]{1,<cardinality_of_character_set>}$ 
```

例如，在您的情况下：

```
^(?!.*(.).*\1)[abiw]{1,4}$ 
```

`(?!.*(.).*\1)`是*零宽度*负前瞻，检查是否可以在前面的文本中找到任何重复的字符`.*(.).*\1`。这使用了上述假设，即字符不能在输入字符串中出现两次。

`[abiw]{1,4}`只是简单地出现任何字符 1 到 4 次`[abiw]`。由于我们已经通过上面的否定前瞻检查了字符串不包含任何重复字符，因此这部分仅检查字符串是否*仅*包含指定集合中的字符。

# javascript - 将规则应用于文本但不在 div 或元素内

> ID：15133937
> 
> 赞同：2
> 
> 时间：2013-02-28T11:08:21.203
> 
> 标签：javascript, jquery, html, regex, str-replace

所以我基本上想在包含文本区域的 html 中操作**特定标签**（仅使用 javascript）而不触及其余部分，例如：

```
<textarea>    
    some stuff here
    random new line

    <i>this can be treated as
    per other text and manipulated</i>

    <b>
    BUT something 
    in bold 
    should be ignored / overlooked</b>

    and some
    other stuff,
    right here

</textarea> 
```

假设我想替换`\n`这个 textarea 中的所有新行（用 a `<br/>`），但想忽略 中的文本`<b>`（并且只是`<b>`标签，而不仅仅是任何 HTML 标签），我该怎么做呢？

我在想某种正则表达式可以工作，但不确定如何将规则放在一起......虽然通过正则表达式解析 html 并不理想 - 如果它有效，那么它解决了我的问题。我还认为某种 jquery 可以在两者之间进行杂耍，`.text()`并且`.html()`可以与一些人一起工作`:not()`，`.filter()`也许但我什至不知道从哪里开始……

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:19:09.873

我并不是说这是正确或最好的方法，但这里有一个正则表达式可以满足您的要求。

如果字符串 a中没有出现在 a之前，则以下内容将替换 any `\n`——这将阻止内部的任何替换。`<br/>``</b>``<b>``<b></b>`

```
text = text.replace( /\n(?!((?!<b>)[\s\S])*<\/b>)/g , '<br/>' ); 
```

例子

```
$('textarea').val( function ( index, old ) {
    return old.replace( /\n(?!((?!<b>)[\s\S])*<\/b>)/g , '<br/>' );
}); 
```

# business-objects - 业务对象找不到 JDBC 驱动程序

> ID：15133939
> 
> 赞同：0
> 
> 时间：2013-02-28T11:08:22.480
> 
> 标签：business-objects

我安装了 BO XI 3.1 Client Suite**。

我开始创建一个宇宙，但首先我需要创建与数据库的连接。

在这种情况下，它是一个 Netezza DB，我通过 JDBC 进行连接。我已经输入了详细信息，但是当我尝试测试连接时，出现以下错误：

```
DBD: No suitable driver 
```

我的 C:\ 驱动器上有 netezza jdbc 驱动程序 jar。我如何才能将业务对象在 Universe 方面指向驱动程序的类路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:20:23.500

找到解决方案，将 BO 指向 Netezza jdbc 驱动程序（或任何其他非安装驱动程序），必须编辑文件：

```
jdbc.sbo 
```

在目录下：

```
\Business Objects\BusinessObjects Enterprise 12.0\win32_x86\dataAccess\connectionServer\jdbc 
```

寻找合适的线路

```
 <DataBase Active="Yes" Name="Netezza Server">
  <JDBCDriver>
    <ClassPath><Path>C:\Netezza Jar\nzjdbc3.jar</Path></ClassPath>
    <Parameter Name="JDBC Class">org.netezza.Driver</Parameter>
    <Parameter Name="URL Format">jdbc:netezza://$DATASOURCE$/$DATABASE$</Parameter>
  </JDBCDriver> 
```

将 C:\Netezza Jar\nzjdbc3.jar 替换为您的 jar 位置。

希望对大家有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:25:11.067

只是一个想法：您是否尝试将 c:\ 添加到环境变量（路径）？

# php - 使用 PDO 并根据用户组获取链接

> ID：15133940
> 
> 赞同：0
> 
> 时间：2013-02-28T11:08:23.590
> 
> 标签：php, mysql, pdo

目前使用 PHP 编码的 CMS，我遇到了一个小的“障碍”。

我正在使用 PDO(mysql) 连接，并且我有两个表。

`Navigation_links`具有以下列 :和这些列 :`id`和`title``pageid` `Navigation_links_usergroups_relations``linkid``usergroupid`

首先，我正在尝试创建一个查询，该查询采用关系表中未表示的所有链接。这对我来说非常困难。我尝试过这样的事情：

```
SELECT navigation_links.id ,navigation_links.title, navigation_links.pageid 
  FROM navigation_links, navigation_links_usergroups 
 WHERE navigation_links.id != navigation_links_usergroups.linkid 
```

在我看来，这意味着“显示关系表中不存在的所有链接”，因为任何人都应该可以看到不存在的链接。

有什么建议或想法吗？我很确定有办法做到这一点。但也许我从错误的角度解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:17:23.933

```
SELECT n.id, n.title, n.pageid
    FROM navigation_links n, navigation_links_usergroups nl 
        WHERE 
            n.id <> nl.linkid 
```

告诉我进展如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:18:21.717

您需要使用相关子查询，如下所示：

```
SELECT l.id, l.title, l.pageid
  FROM navigation_links AS l
 WHERE NOT EXISTS(
           SELECT lug.* 
             FROM navigation_links_usergroups AS lug
            WHERE lug.linkid = l.id
       ) 
```

# ruby-on-rails - 如何弃用 Rails 中的静态方法？

> ID：15133942
> 
> 赞同：4
> 
> 时间：2013-02-28T11:08:28.580
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

根据 Ruby on Rails API Docs，您可以在方法[#deprecate](http://api.rubyonrails.org/classes/Module.html#method-i-deprecate)的帮助下弃用方法。这一切都很好。

我的问题是；是否可以弃用静态方法 - 如果可以，如何？

对于常规方法，您可以执行以下操作：

```
deprecate :my_method
def my_method
  # ...
end 
```

Bot 这让我很头疼（而且它不起作用）：

```
deprecate :"self.my_method"
def self.my_method
  # ...
end 
```

Ps：我知道我可以从这样的方法发出警告：

```
def self.my_method
  ActiveSupport::Deprecation.warn "the warning..."
  # ...
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:17:45.493

您应该在元类上调用 deprecate ：

```
class Test1
  def self.hello
    puts "Test1"
  end
  singleton_class.deprecate :hello
  # or
  class << self ; deprecate :hello ; end
end 
```

# android - 如何在我的代码中使用 onUserInteration 方法？

> ID：15133943
> 
> 赞同：0
> 
> 时间：2013-02-28T11:08:32.010
> 
> 标签：android

在我需要的示例应用程序中，找到用户不活动，即如果用户在 5 分钟内不做任何事情，我需要显示一个警报对话框。为此，最初我`onStart()`在这个方法中编写了我的代码，我包含了一个延迟 5 分钟运行的线程，但它不符合确切要求，我在 Google 中搜索我得到了预定义的方法`onUserInteracation()`，不幸的是我无法理解为什么这个方法（当我与屏幕交互时调用这个方法）。是否可以通过代码找出用户不活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:06:08.310

onUserInteraction 是检查任何类型的用户活动的正确函数。您可以设置一个在调用 onUserInteraction 时随时重置的计时器，或者您可以运行一个后台线程来检查各种约束。我可能会选择一个依赖于用户交互的静态计时器实例。

```
@Override
public void onUserInteraction(){
    //your static timer
    CustomTimer.getInstance().resetTimer();
} 
```

在这里查看一个冗长的讨论：[如何在 android 中检测 USER INACTIVITY](https://stackoverflow.com/questions/4208730/how-to-detect-user-inactivity-in-android)。

# c++ - C++ 对象以字符串形式输出属性名称

> ID：15133944
> 
> 赞同：0
> 
> 时间：2013-02-28T11:08:31.767
> 
> 标签：c++, class

```
class myFun(Employee obj, String attribute)
{
   //return proper attribute value without using conditions like If-Else, ternary or     
   // conditional operators like && etc.
} 
```

现在如果我打电话：

```
myFun(obj, “name”); 
```

那么这个函数应该从作为参数传递的对象“obj”中返回员工的名字。因此，根据属性值的名称，它应该返回该对象的属性值。

有什么方法可以在不使用 if 条件或 switch 语句的情况下在 c++ 中做到这一点？我知道在python中我们可以使用getattr。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:11:14.280

您将需要实现自己的类似[反射](http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29)的行为。例如，您可以在对象内部有一个映射，您可以在其中注册每个属性的名称，也许还有一个函子来获取值（或其他东西）。

换句话说，它是可行的，但该语言不支持它，因此它不会简短、简单、自动或对您的代码的其他读者来说不一定非常直观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:09:36.063

不，C++ 没有反射，所以没有条件它是不可行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:16:24.543

如果不改变班级的结构，这是不可能的。如果性能不重要，这里有一个解决方法：

```
class Employee{
    std::map<std::string, std::string> attributes;
    /*SNIP*/
    public:
    void addAttr(std::string attr, std::string value){ attributes[attr] = value; }
    std::string getValue(std::string attr){ return attributes[attr]; }
    //Use this function if you are using c++11 compiler: std::string getValue(std::string attr){ return attributes.at(attr); }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T11:22:21.133

反射在 C++ 中是可能的，虽然是间接的；）

一些与此相关的文章...

[http://lcgapp.cern.ch/project/architecture/ReflectionPaper.pdf](http://lcgapp.cern.ch/project/architecture/ReflectionPaper.pdf) [http://replicaisland.blogspot.co.il/2010/11/building-reflective-object-system-in-c.html](http://replicaisland.blogspot.co.il/2010/11/building-reflective-object-system-in-c.html) [http:// www.vollmann.com/pubs/meta/meta/meta.html](http://www.vollmann.com/pubs/meta/meta/meta.html)

因此，您可以通过反思实现这种行为！当然，这些文章包含您可以开始使用的示例，请随时分享任何问题。

您也可以尝试 BOOST_FUSION_ADAPT_STRUCT [http://boost-spirit.com/dl_more/fusion_v2/libs/fusion/doc/html/fusion/extension/macros/adapt_struct.html](http://boost-spirit.com/dl_more/fusion_v2/libs/fusion/doc/html/fusion/extension/macros/adapt_struct.html)

# ruby-on-rails - 将空格附加到字符串

> ID：15133946
> 
> 赞同：2
> 
> 时间：2013-02-28T11:08:38.577
> 
> 标签：ruby-on-rails, ruby, string, whitespace

我有一个字符串：

```
str="Myname" 
```

我想在字符串后添加四个空格。我所做的是：

```
str=str+"    "+"somename" 
```

当我打印`str`as`<%= str %>`时，输出只显示一个空格。我怎样才能使这项工作？我也试过：

```
str=str+" "*4+"somename" 
```

这也给出了与上面给出的相同的输出。我不想打印这个。该字符串用作更多其他操作的 Ruby 变量。我可以在 Ruby 中实现，但在 RoR 中不行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T11:14:11.580

这与 HTML 如何处理空格有关。我假设您使用的是基于您使用的类似 Erb 的语法。如果您真的必须输出空格，请使用`&nbsp;`.

但我建议你尝试用 CSS 来解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-08T19:51:25.173

按照您的相同结构，它将是

`str = raw(str + "&nbsp;&nbsp;&nbsp;&nbsp;" + "somename")`

在 HTML 中，无论有多少，都只计算一个空格。所以你必须使用 HTML Entity `&nbsp;`（意味着 Non Breaking SPace）来显示多个空格。

这`raw`部分是必需的，因为默认情况下，Rails 不允许 HTML 实体或任何实际的 HTML 通过字符串输出，因为它们可以被恶意用户用来攻击您的站点和/或用户。

因此，您必须在 Rails 中使用`raw`和使用。`&nbsp;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:18:42.520

如果您在控制台中尝试以下代码，您会发现问题出在您的 html 上；

```
str="Myname"
str=str+"    "+"somename"

=> "Myname    somename" 
```

尝试如下

```
<pre>
  <%= str %>
</pre> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T11:59:28.947

您可以用 html 编码字符串替换空格，然后用 html_safe 或 raw 之类的渲染，

```
<%= raw "Myname    somename".gsub(/\s/, "&nbsp;") %> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T11:14:54.817

您的变量中可能有 4 个空格，但浏览器会在 1 个空格后截断多余的空格，因此您可能无法查看它们。尝试关注

```
<pre>
<%= str %>
</pre> 
```

您将看到空格已添加到您的代码中。为了实现你想要做的事情，放置而不是空白

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-01T15:42:18.950

```
<pre>I am a bad web programmer</pre> 
```

存在的祸根的预标签，应不惜一切代价避免。在你的erb中使用它。

```
<%= raw(CGI.escapeHTML(str).gsub(/\s/, '&nbsp;')) %> 
```

# git - 获取可构建的 git-tfs

> ID：15133949
> 
> 赞同：1
> 
> 时间：2013-02-28T11:08:46.857
> 
> 标签：git, github, git-submodules, git-tfs

我正在尝试修改[git-tfs](https://github.com/git-tfs/git-tfs)。但是，我似乎无法构建它。

我做了什么：

```
1\. Read the readme which states for building: 
    1a. Update submodules. git submodule update to get the libgit2sharp dependencies.
    1b. Build with msbuild GitTfs.sln /p:Configuration=debug for the default debug build.
2\. clone git-tfs: git clone git@github.com:git-tfs/git-tfs.git
3\. git submodule update 
```

然而，子模块更新似乎没有完成它的工作——它没有获取任何来源。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:08:49.207

您必须在更新前运行 init：

```
git submodule init
git submodule update 
```

之后要运行 git-tfs 的集成测试，您需要启动并运行 XUnit：

[https://github.com/git-tfs/git-tfs/wiki/Running-the-Unit-Tests](https://github.com/git-tfs/git-tfs/wiki/Running-the-Unit-Tests)

VS2012 的 XUnit 测试运行器：http: [//visualstudiogallery.msdn.microsoft.com/463c5987-f82b-46c8-a97e-b1cde42b9099](http://visualstudiogallery.msdn.microsoft.com/463c5987-f82b-46c8-a97e-b1cde42b9099)

要运行集成测试，您必须为 VS2008、2010 和 2012 安装 TFS 插件（Team Explorer）。但如果您不安装这些项目（GitTfs.Vs2008、GitTfs.Vs2010 和 GitTfs.Vs11），则可以卸载想要运行它们。GitTfs.VSFake 对于不同的 Visual Studio 版本是假的，它可以让你运行大部分测试。

# mysql - MySQL：从其他表中检索 id

> ID：15133958
> 
> 赞同：0
> 
> 时间：2013-02-28T11:09:15.117
> 
> 标签：mysql

一个简单的 MySQL 问题：

我有 2 个表，分别称为“接口”和“开关”。

**表“开关”：**

```
create table switch (
      name varchar(15), 
      swversion varchar(15), 
      bootversion varchar(15), 
      serialnumber varchar(30), 
      rootbridge varchar(10), 
      address varchar(20), 
      switch_id MEDIUMINT NOT NULL AUTO_INCREMENT, 
      PRIMARY KEY(switch_id)); 
```

**表“接口”：**

```
create table interfaces (
      port varchar(15), 
      type varchar(20), 
      duplex varchar(15), 
      speed varchar(5), 
      neg varchar(20), 
      flowctrl varchar(5), 
      linkstat varchar(5), 
      backpres varchar(20), 
      mdixmode varchar(5), 
      switch_id int(11), 
      PRIMARY KEY(port)); 
```

我想将“Switch”表中的 switch_id 获取到“Interfaces”表中的 switch_id 中。

在这个例子中：每个带有端口的交换机：“Switch2_...”应该得到 Switch_id:1”，“Switch5_...”应该得到 Switch_id:2，依此类推。

[http://img51.imageshack.us/img51/4470/switchid.png](http://img51.imageshack.us/img51/4470/switchid.png)

“Interfaces”中的 switch_id 应该使用“Switch”表中的 switch_id 自动更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:14:07.230

试试这个

```
INSERT INTO Interfaces(switch_id)
SELECT switch_id
FROM Switch WHERE...... 
```

[http://dev.mysql.com/doc/refman/5.0/en/insert-select.html](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:17:13.140

这将是模棱两可的——您有两个名为“switch2”的开关：id 值 1 和 4。那么您希望 id 1 或 id 4 与名为“switch2”的开关相关联吗？

更好的方法是让您更改填充表格的方式。首先创建一个交换机，使用 last_insert_id() 找出它的 id，然后在添加接口的所有记录时将该值用作 switch_id。然后，您不必稍后再返回修复问题 - 您从一开始就在正确的位置获得正确的值。

# html - html、pdf文件要另存为，不能直接打开

> ID：15133962
> 
> 赞同：0
> 
> 时间：2013-02-28T11:09:30.250
> 
> 标签：html, css

我正在做一个项目，我必须保留下载 pdf 的选项。当我点击下载按钮[图片]时，它直接打开了pdf文件。

相反，我希望出现“另存为”对话框，该对话框仅在要下载的文件为 .doc 或 docx 格式时才会出现。

pdf格式还有其他选择吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:41:11.820

## HTML5方式：

将[`download`](http://www.w3.org/html/wg/drafts/html/master/links.html#downloading-resources)属性添加到您的下载链接：

> 在某些情况下，资源旨在供以后使用，而不是立即查看。为了指示资源打算被下载以供以后使用，而不是立即使用，可以在创建到该资源的超链接的or元素`download` 上指定该属性。`a``area`
> 
> 该属性还可以被赋予一个值，以指定用户代理在将资源存储在文件系统中时要使用的文件名。该值可以被`Content-Disposition`HTTP 标头的文件名参数覆盖。[RFC6266]
> 
> 在跨域情况下，下载属性必须与 Content-Disposition HTTP 标头（特别是附件处置类型）结合使用，以避免警告用户可能存在恶意活动。（这是为了防止用户在没有完全理解的情况下下载敏感的个人或机密信息。）

这意味着您可以编写：

```
<a href="/path/to/file.pdf" download>Download the file</a>

<a href="/path/to/export-as-pdf.php?id=1" download="report.pdf">Download the file</a> 
```

## 老套：

您可以告诉网络服务器添加`Content-Disposition: attachment`导致（正常）浏览器弹出“另存为...”对话框的标题。如果您使用的是 Apache 并`mod_headers`已安装，则在`.htaccess`文件中添加以下行：

```
<Files *.pdf>
    Header set Content-Disposition attachment
</Files> 
```

此处对此进行了更详细的讨论：
[How to send Content-Disposition headers in apache for files](https://serverfault.com/questions/101948/how-to-send-content-disposition-headers-in-apache-for-files)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:12:13.890

如果您可以修改 HTTP 标头，则应在提供 PDF 时添加以下内容：

`Content-Disposition: attachment;filename=xxxxxx.pdf`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T11:17:18.380

**在火狐中**

工具 -> 选项 -> 常规 -> 选择总是询问我保存文件的位置

**在 Chrome 中**

打开设置->选择高级设置->在下载前检查每个文件的保存位置

**在歌剧中**

转到 Opera 菜单 -> 设置 -> 首选项 -> -> 高级下载 -> 高级 -> 编辑所需的 mime 类型并选择显示下载对话框

**在 IE 中**

打开 Adob​​e Reader 程序 -> 首选项 -> Internet -> 取消勾选在浏览器中显示 PDF

**下载**

如果您不确定 PDF 保存到哪里，您可以使用 Ctrl+J 从任何浏览器访问您的下载文件夹，在浏览器中打开的任何 PDf 将转到一个临时文件夹，但下载的将转到您选择的任何下载目录。

**HTML 5 属性解决方法**

您可以使用这个 HTML 属性来强制链接，jquery 也支持同样的事情（感谢 Austin）

```
<a href="path/to/file" download>Click here to download</a> 
```

# coldfusion - 未评估 ColdFusion 语句，而是显示原始代码

> ID：15133966
> 
> 赞同：3
> 
> 时间：2013-02-28T11:09:35.770
> 
> 标签：coldfusion

我正在尝试完成 Cold Fusion 网站上的“一周内学习 ColdFusion”教程。我已经设置了 mySQL 5.5（在 C:/ 驱动器上）并安装了 ColdFusion 10（在 E:/ 驱动器上）。我完成了所有设置步骤，安装脚本 ( [http://www.learncfinaweek.com/week1/Installing_Sample_Files/](http://www.learncfinaweek.com/week1/Installing_Sample_Files/) ) 成功完成。

我浏览了 Hands on 的第一部分，但是当我使用 CF 创建变量时，测试页面呈现为原始代码而不是 HTML 和 CF。示例文件中提供的解决方案也呈现为原始代码。我认为这是一个非常简单的修复，但我不知道它会是什么。我已经超出了我的深度。我不知道我可以提供哪些更多信息可以使故障排除变得更容易，但如果您知道一些事情，请告诉我。

摘要：当我将 CF 语句添加到 HTML 文档时，页面显示为原始代码。我有 CF 10 和 mySQL 5.5。

![在此处输入图像描述](../Images/6437d1200d75b872bc1c83893e904eee.png)

![在此处输入图像描述](../Images/a826d9ecbfff8778cf4af66cc940260b.png)

![在此处输入图像描述](../Images/a7e4d0074678e2fe86c99d3f65f9b3e7.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T01:03:08.900

您在上面说过，您调用的网址是 file:///E:/​​ColdFusion10/cfusion/wwwroot/learncfinaweek/www/index.cfm 这就是为什么当您直接从计算机打开文件时它不起作用的原因不使用网址。因此，从不使用冷融合。您需要使用指向您网站的网址，例如查看 your.cfadmim 网址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:57:45.460

通常的答案是：

1.  ColdFusion 未安装或安装不正确。
2.  ColdFusion 已安装，但包含独立的 Web 服务器，并且您正在使用另一个 Web 服务器。
3.  Web 服务器未设置为将 .HTML 文件作为 .cfm 处理（如上面 Evik 所述。）

安装 CF 后，它通常会启动到管理控制台。您还记得安装时是否有效吗？您是否曾经能够运行 CF 页面（管理控制台在 CF 中）？你在运行什么网络服务器？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T11:52:39.803

在我看来，您并没有要求 ColdFusion 服务器处理您的代码。要让 ColdFusion 服务器处理您的 ColdFusion 代码，您需要确保您的页面使用 CFM 扩展。

`index.CFM`不使用`index.HTML`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-08T19:49:33.030

这是您需要在浏览器中输入的地址（假设您使用相同的端口）： [http://localhost:8500/learncfinaweek/www/index.cfm](http://localhost:8500/learncfinaweek/www/index.cfm)

该文件位于您的计算机上的 E:\ColdFusion11\cfusion\wwwroot\learncfinaweek\www\index.cfm 但为了让您在本地安装的 ColdFusion 服务器对其进行解析，您需要通过 localhost 访问它，因为是您的服务器所在的位置。您会注意到您的 CF 管理员登录以相同的方式启动： [http://localhost:8500/CFIDE/administrator/](http://localhost:8500/CFIDE/administrator/)

该文件也有相应的位置：E:\ColdFusion11\cfusion\wwwroot\CFIDE\administrator

如果 localhost 之后有不同的数字，则使用它而不是 8500。

# azure - 具有多个查询点的 Azure 存储表设计

> ID：15133968
> 
> 赞同：1
> 
> 时间：2013-02-28T11:09:40.610
> 
> 标签：azure, nosql, azure-storage, azure-table-storage

我有以下 Azure 存储表。

**位置数据表：**

```
PartitionKey: ClientID + VehicleID 
RowKey: GUID 
Properties:  ClientID, VehicleID, DriverID, Date, GPSPosition 
```

每辆车每年将为每位客户记录多达 1,000,000 个实体。每个客户可能拥有数千辆汽车。因此，我决定按`ClientID`+进行分区，`VehicleID`以便拥有更小的、可管理的分区。通过`ClientID`and进行查询时`VehicleID`，操作执行得很快，因为我们将搜索范围缩小到一个分区。

**问题：**

这里的问题是，有时我只需要查询`ClientID`and `DriverID`。因为不可能执行部分 PartitionKey 比较，所以需要扫描每个单独的分区。这会扼杀性能。

我不能有 all 的 PartitionKey ，`ClientID`因为查询只会查询OR ，永远不会同时查询。`VehicleID``DriverID``VehicleID``DriverID`

**解决方案 1：**

我考虑过将一个值存储在其他地方，它代表一个 VehicleID 和 DriverID 对，然后有一个`ClientID + VehicleDriverPairID`PartitionKey，但这会导致数十万个分区，并且在我的代码中分区之间会有很多数据联合。

**解决方案 2：**

有一个分区`Client + VehicleID`和另一个分区`Client + DriverID`。这意味着更新表的工作量是两倍（两次更新），但两个查询都会很快。也会有冗余数据。

这些解决方案中的任何一个听起来可行吗？其他解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T12:31:46.517

您应该复制记录，如解决方案 2 中所示。我建议保留一份副本，其中每条记录都位于其自己的分区中，因此也由 VehiculeId 分区，这将使更新所有副本更容易，从 vehicleid 开始并传播到其他。

存储数据真的很便宜，除非您预先正确存储它，否则查询是一个皮塔饼。所以我的建议是：重复！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:44:41.050

> 因为不可能执行部分 PartitionKey 比较，所以需要扫描每个单独的分区。

不是真的。例如，如果您的分区键是 (literally) `ClientID$VehicleID`，您可以扫描`PartitionKey gt 'ClientID$' and PartitionKey lt 'ClientID%'`(works because `(Char)($+1)`is `%`。这将仅扫描以 ClientID 开头的分区。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T16:45:24.673

这里似乎 RowKey 是一个无意义的 GUID，只是为了唯一性，可以替换/增强它并提出以下内容。

每个插入都是一个 2 实体插入到同一个分区中，因此可以批处理，这样既成功又失败，确保一致性。[] 中的注释值是可选的。

```
PartitionKey = ClientID  
RowKey = [Prefix] + VehicleID + [Suffix] 
```

和

```
PartitionKey = ClientID  
RowKey = [Prefix] + DriverID + [Suffix] 
```

如果`VehicleID`an`DriverID`在它们之间不是唯一的，则可以通过添加前缀使其唯一，例如“V”和“D”。

如果需要 RowKey 上的唯一性，则可以在日期后加上日期（如果足够）或当前完成的 GUID。

# javascript - 在 IE9 脚本控制台中运行 JQuery

> ID：15133969
> 
> 赞同：0
> 
> 时间：2013-02-28T11:09:41.310
> 
> 标签：javascript, jquery, internet-explorer, development-environment

我想使用 IE9 附带的 Developer Tool 将一些数据发布到我们的 Web 服务器。步骤是：单击 F12，然后单击控制台选项卡以打开控制台，然后运行以下脚本：

```
jQuery.ajax ({
url: myurl,
type: "POST",
data: JSON.stringify({data:"test"}),
dataType: "json",
contentType: "application/json; charset=utf-8",
success: function(){
    alert ("success")
}}); 
```

但我总是得到：{

```
readyState : 1,
setRequestHeader : function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},
getAllResponseHeaders : function(){return s===2?n:null},
getResponseHeader : function(a){var c;if(s===2){if(!o){o={};while(c=bH.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},
overrideMimeType : function(a){s||(d.mimeType=a);return this},
abort : function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this},
done : function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this},
fail : function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this},
progress : function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this},
state : function(){return e}
... 
```

}

有人能告诉我它是什么吗？我怎么知道我的代码执行成功与否？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T01:10:08.650

jQuery.ajax 方法返回一个[jqXHR](http://api.jquery.com/jQuery.ajax/#jqXHR)对象，而不是成功回调的结果。为成功回调使用命名函数来测试结果：

```
function foo()
  {
  console.log(arguments.statusText);
  }

var bar = 
{
  "filter": "default",
  "included_fields": [
    ".backoff",
    ".error_id",
    ".error_message",
    ".error_name",
    ".has_more",
    ".items",
    ".quota_max",
    ".quota_remaining",
    "access_token.access_token",
    "access_token.account_id",
    "access_token.expires_on_date",
    "access_token.scope",
    "account_merge.merge_date",
    "account_merge.new_account_id",
    "account_merge.old_account_id",
    "answer.answer_id",
    "answer.community_owned_date",
    "answer.creation_date",
    "answer.is_accepted",
    "answer.last_activity_date",
    "answer.last_edit_date",
    "answer.locked_date",
    "answer.owner",
    "answer.question_id",
    "answer.score",
    "badge.award_count",
    "badge.badge_id",
    "badge.badge_type",
    "badge.link",
    "badge.name",
    "badge.rank",
    "badge.user",
    "badge_count.bronze",
    "badge_count.gold",
    "badge_count.silver",
    "closed_details.by_users",
    "closed_details.description",
    "closed_details.on_hold",
    "closed_details.original_questions",
    "closed_details.reason",
    "comment.comment_id",
    "comment.creation_date",
    "comment.edited",
    "comment.owner",
    "comment.post_id",
    "comment.reply_to_user",
    "comment.score",
    "error.description",
    "error.error_id",
    "error.error_name",
    "event.creation_date",
    "event.event_id",
    "event.event_type",
    "filter.filter",
    "filter.filter_type",
    "filter.included_fields",
    "flag_option.count",
    "flag_option.description",
    "flag_option.has_flagged",
    "flag_option.option_id",
    "flag_option.requires_comment",
    "flag_option.requires_question_id",
    "flag_option.requires_site",
    "flag_option.sub_options",
    "flag_option.title",
    "inbox_item.answer_id",
    "inbox_item.comment_id",
    "inbox_item.creation_date",
    "inbox_item.is_unread",
    "inbox_item.item_type",
    "inbox_item.link",
    "inbox_item.question_id",
    "inbox_item.site",
    "inbox_item.title",
    "info.answers_per_minute",
    "info.api_revision",
    "info.badges_per_minute",
    "info.new_active_users",
    "info.questions_per_minute",
    "info.total_accepted",
    "info.total_answers",
    "info.total_badges",
    "info.total_comments",
    "info.total_questions",
    "info.total_unanswered",
    "info.total_users",
    "info.total_votes",
    "migration_info.on_date",
    "migration_info.other_site",
    "migration_info.question_id",
    "network_user.account_id",
    "network_user.answer_count",
    "network_user.badge_counts",
    "network_user.creation_date",
    "network_user.last_access_date",
    "network_user.question_count",
    "network_user.reputation",
    "network_user.site_name",
    "network_user.site_url",
    "network_user.user_id",
    "notice.body",
    "notice.creation_date",
    "notice.owner_user_id",
    "notification.body",
    "notification.creation_date",
    "notification.is_unread",
    "notification.notification_type",
    "notification.post_id",
    "notification.site",
    "original_question.accepted_answer_id",
    "original_question.answer_count",
    "original_question.question_id",
    "original_question.title",
    "post.creation_date",
    "post.last_activity_date",
    "post.last_edit_date",
    "post.link",
    "post.owner",
    "post.post_id",
    "post.post_type",
    "post.score",
    "privilege.description",
    "privilege.reputation",
    "privilege.short_description",
    "question.accepted_answer_id",
    "question.answer_count",
    "question.bounty_amount",
    "question.bounty_closes_date",
    "question.closed_date",
    "question.closed_reason",
    "question.community_owned_date",
    "question.creation_date",
    "question.is_answered",
    "question.last_activity_date",
    "question.last_edit_date",
    "question.link",
    "question.locked_date",
    "question.migrated_from",
    "question.migrated_to",
    "question.owner",
    "question.protected_date",
    "question.question_id",
    "question.score",
    "question.tags",
    "question.title",
    "question.view_count",
    "question_timeline.comment_id",
    "question_timeline.creation_date",
    "question_timeline.down_vote_count",
    "question_timeline.owner",
    "question_timeline.post_id",
    "question_timeline.question_id",
    "question_timeline.revision_guid",
    "question_timeline.timeline_type",
    "question_timeline.up_vote_count",
    "question_timeline.user",
    "related_site.api_site_parameter",
    "related_site.name",
    "related_site.relation",
    "related_site.site_url",
    "reputation.on_date",
    "reputation.post_id",
    "reputation.post_type",
    "reputation.reputation_change",
    "reputation.user_id",
    "reputation.vote_type",
    "reputation_history.creation_date",
    "reputation_history.post_id",
    "reputation_history.reputation_change",
    "reputation_history.reputation_history_type",
    "reputation_history.user_id",
    "revision.comment",
    "revision.creation_date",
    "revision.is_rollback",
    "revision.last_tags",
    "revision.last_title",
    "revision.post_id",
    "revision.post_type",
    "revision.revision_guid",
    "revision.revision_number",
    "revision.revision_type",
    "revision.set_community_wiki",
    "revision.tags",
    "revision.title",
    "revision.user",
    "search_excerpt.answer_count",
    "search_excerpt.answer_id",
    "search_excerpt.body",
    "search_excerpt.creation_date",
    "search_excerpt.excerpt",
    "search_excerpt.is_accepted",
    "search_excerpt.is_answered",
    "search_excerpt.item_type",
    "search_excerpt.last_activity_date",
    "search_excerpt.question_id",
    "search_excerpt.score",
    "search_excerpt.tags",
    "search_excerpt.title",
    "shallow_user.accept_rate",
    "shallow_user.display_name",
    "shallow_user.link",
    "shallow_user.profile_image",
    "shallow_user.reputation",
    "shallow_user.user_id",
    "shallow_user.user_type",
    "site.aliases",
    "site.api_site_parameter",
    "site.audience",
    "site.closed_beta_date",
    "site.favicon_url",
    "site.high_resolution_icon_url",
    "site.icon_url",
    "site.launch_date",
    "site.logo_url",
    "site.markdown_extensions",
    "site.name",
    "site.open_beta_date",
    "site.related_sites",
    "site.site_state",
    "site.site_type",
    "site.site_url",
    "site.styling",
    "site.twitter_account",
    "styling.link_color",
    "styling.tag_background_color",
    "styling.tag_foreground_color",
    "suggested_edit.approval_date",
    "suggested_edit.comment",
    "suggested_edit.creation_date",
    "suggested_edit.post_id",
    "suggested_edit.post_type",
    "suggested_edit.proposing_user",
    "suggested_edit.rejection_date",
    "suggested_edit.suggested_edit_id",
    "suggested_edit.tags",
    "suggested_edit.title",
    "tag.count",
    "tag.has_synonyms",
    "tag.is_moderator_only",
    "tag.is_required",
    "tag.name",
    "tag.user_id",
    "tag_score.post_count",
    "tag_score.score",
    "tag_score.user",
    "tag_synonym.applied_count",
    "tag_synonym.creation_date",
    "tag_synonym.from_tag",
    "tag_synonym.last_applied_date",
    "tag_synonym.to_tag",
    "tag_wiki.body_last_edit_date",
    "tag_wiki.excerpt",
    "tag_wiki.excerpt_last_edit_date",
    "tag_wiki.tag_name",
    "top_tag.answer_count",
    "top_tag.answer_score",
    "top_tag.question_count",
    "top_tag.question_score",
    "top_tag.tag_name",
    "top_tag.user_id",
    "user.accept_rate",
    "user.account_id",
    "user.age",
    "user.badge_counts",
    "user.creation_date",
    "user.display_name",
    "user.is_employee",
    "user.last_access_date",
    "user.last_modified_date",
    "user.link",
    "user.location",
    "user.profile_image",
    "user.reputation",
    "user.reputation_change_day",
    "user.reputation_change_month",
    "user.reputation_change_quarter",
    "user.reputation_change_week",
    "user.reputation_change_year",
    "user.timed_penalty_date",
    "user.user_id",
    "user.user_type",
    "user.website_url",
    "user_timeline.badge_id",
    "user_timeline.comment_id",
    "user_timeline.creation_date",
    "user_timeline.detail",
    "user_timeline.post_id",
    "user_timeline.post_type",
    "user_timeline.suggested_edit_id",
    "user_timeline.timeline_type",
    "user_timeline.title",
    "user_timeline.user_id",
    "write_permission.can_add",
    "write_permission.can_delete",
    "write_permission.can_edit",
    "write_permission.max_daily_actions",
    "write_permission.min_seconds_between_actions",
    "write_permission.object_type",
    "write_permission.user_id"
  ],
  "filter_type": "safe"
};

jQuery.ajax 
(
  {
  url: "https://api.stackexchange.com/2.1/filters/create",
  type: "POST",
  data: JSON.stringify(bar),
  dataType: "json",
  contentType: "application/json; charset=utf-8",
  success: foo 
  }
); 
```

**参考**

*   [如何使用 filter/create 从头开始​​创建过滤器？](https://stackapps.com/questions/4973/22384)

# c# - 通过计算其 MD5 获取重复文件列表

> ID：15133970
> 
> 赞同：7
> 
> 时间：2013-02-28T11:09:51.737
> 
> 标签：c#, linq, md5

我有一个包含文件路径的数组，我想列出一个基于 MD5 重复的文件。我这样计算他们的MD5：

```
private void calcMD5(Array files)  //Array contains a path of all files
{
    int i=0;
    string[] md5_val = new string[files.Length];
    foreach (string file_name in files)
    {
        using (var md5 = MD5.Create())
        {
            using (var stream = File.OpenRead(file_name))
            {
                md5_val[i] = BitConverter.ToString(md5.ComputeHash(stream)).Replace("-", "").ToLower();
                i += 1;
            }
        }
    }                
} 
```

从上面我可以计算出他们的 MD5，但是如何只获取那些重复的文件的列表。如果还有其他方法可以做同样的事情，请告诉我，我也是 Linq 的新手

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T11:16:29.270

`1.`重写您的`calcMD5`函数以获取*单个*文件路径并*返回*MD5。
`2.`如果可能，将文件名存储在`string[]`or`List<string>`中，而不是无类型数组中。
`3.`使用以下 LINQ 获取具有相同哈希的文件组：

```
var groupsOfFilesWithSameHash = files
  // or files.Cast<string>() if you're stuck with an Array
   .GroupBy(f => calcMD5(f))
   .Where(g => g.Count() > 1); 
```

`4.`您可以使用嵌套`foreach`循环访问组，例如：

```
foreach(var group in groupsOfFilesWithSameHash)
{
    Console.WriteLine("Shared MD5: " + g.Key);
    foreach (var file in group)
        Console.WriteLine("    " + file);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T11:22:14.477

```
 static void Main(string[] args)
    {
        // returns a list of file names, which have duplicate MD5 hashes
        var duplicates = CalcDuplicates(new[] {"Hello.txt", "World.txt"});
    }

    private static IEnumerable<string> CalcDuplicates(IEnumerable<string> fileNames)
    {
        return fileNames.GroupBy(CalcMd5OfFile)
                        .Where(g => g.Count() > 1)
                        // skip SelectMany() if you'd like the duplicates grouped by their hashes as group key
                        .SelectMany(g => g);
    }

    private static string CalcMd5OfFile(string path)
    {
        // I took your implementation - I don't know if there are better ones
        using (var md5 = MD5.Create())
        {
            using (var stream = File.OpenRead(path))
            {
                return BitConverter.ToString(md5.ComputeHash(stream)).Replace("-", "").ToLower();
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:12:57.313

```
var duplicates = md5_val.GroupBy(x => x).Where(x => x.Count() > 1).Select(x => x.Key); 
```

这将为您提供在数组中重复的哈希列表。

要获取名称而不是哈希：

```
var duplicates = md5_val.Select((x,i) => new Tuple<string, int>(x, i))
                        .GroupBy(x => x.Item1)
                        .Where(x => x.Count() > 1)
                        .SelectMany(x => files[x.Item2].ToList()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T11:28:48.593

```
 private void calcMD5(String[] filePathes)  //Array contains a path of all files
    {
        Dictionary<String, String> hashToFilePathes = new Dictionary<String, String>();
        foreach (string file_name in filePathes)
        {
            using (var md5 = MD5.Create())
            {
                using (var stream = File.OpenRead(file_name))
                {
                    //This will get you dictionary where key is md5hash and value is filepath
                    hashToFilePathes.Add(BitConverter.ToString(md5.ComputeHash(stream)).Replace("-", "").ToLower(), file_name);
                }
            }
        }
        // Here will be all duplicates
        List<String> listOfDuplicates = hashToFilePathes.GroupBy(e => e.Key).Where(e => e.Count() > 1).SelectMany(e=>e).Select(e => e.Value).ToList();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T11:17:48.627

不要返回所有文件 MD5 哈希的数组，而是这样做：

*   有一个“calculateFileHash()”方法。
*   创建要测试的文件名数组。
*   做这个：

    var dupes = Filenames.GroupBy(fn => calculateFileHash(fn)).Where(gr => gr.Count > 1);

这将返回一个组数组，每个组都是一个可枚举，其中包含彼此具有相同内容的文件名。

# asp.net - 网址重写不起作用

> ID：15133972
> 
> 赞同：0
> 
> 时间：2013-02-28T11:09:55.683
> 
> 标签：asp.net, url-rewriting

我试图重写 URL，但如果我在
localhost 上运行我的应用程序，它们不会改变

```
<system.web>
        <urlMappings enabled="true">
          <clear/>
          <!--Account-->
          <add url="~/Paswoord" mappedUrl="~/Account/ChangePassword.aspx"/>
          <!--Admin-->
          <add url="~/AddUsers" mappedUrl="~/Admin/AddUser.aspx"/>
          <add url="~/DeleteUsers" mappedUrl="~/Admin/DeleteUser.aspx"/>
    </urlMappings>
    <system.web> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:14:54.813

我认为你应该试试这个

[http://www.urlrewriting.net/160/en/documentation.html](http://www.urlrewriting.net/160/en/documentation.html)

并下载给出的文档并相应地尝试....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:15:33.780

我认为问题在于`url`没有指向 aspx 页面。尝试

```
 <!--Account-->
  <add url="~/Paswoord.aspx" mappedUrl="~/Account/ChangePassword.aspx"/>
  <!--Admin-->
  <add url="~/AddUsers.aspx" mappedUrl="~/Admin/AddUser.aspx"/>
  <add url="~/DeleteUsers.aspx" mappedUrl="~/Admin/DeleteUser.aspx"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:52:02.437

这适用
于 Default.aspx：

```
 <asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl="~/Password">HyperLink</asp:HyperLink>
  <asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl="~/AddUsers">HyperLink</asp:HyperLink>
  <asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl="~/DeleteUsers">HyperLink</asp:HyperLink> 
```

网络配置：

```
 <system.web>
            <urlMappings enabled="true">
              <clear/>
              <!--Account-->
              <add url="~/Password" mappedUrl="~/Account/ChangePassword.aspx"/>
              <!--Admin-->
              <add url="~/AddUsers" mappedUrl="~/Admin/AddUser.aspx"/>
              <add url="~/DeleteUsers" mappedUrl="~/Admin/DeleteUser.aspx"/>
        </urlMappings>
    <system.web> 
```

# sql - 我哪里错了？选择不在子查询中的结果

> ID：15133973
> 
> 赞同：0
> 
> 时间：2013-02-28T11:09:56.507
> 
> 标签：sql, sql-server

```
SELECT * 
FROM dbo.tbl_inspectors 
WHERE user_id NOT IN 
(Select user_id FROM dbo.vw_alerts WHERE alertID=1) 
```

我试图返回尚未读取特定警报的检查员列表，user_id 是公共字段，该语句的逻辑似乎有效，但没有返回任何结果。尽管如果单独运行子查询确实会返回结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T11:15:47.873

如果你想使用`NOT IN`，那么你应该只包含不为空的值，因为`not in`处理`null`值的方式不同：

```
SELECT * 
FROM dbo.tbl_inspectors 
WHERE user_id NOT IN (Select user_id 
                      FROM dbo.vw_alerts 
                      WHERE alertID=1
                        AND user_id is not null) 
```

请参阅[NOT IN vs. NOT EXISTS vs. LEFT JOIN / IS NULL：SQL Server](http://explainextended.com/2009/09/15/not-in-vs-not-exists-vs-left-join-is-null-sql-server/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:19:28.410

但是子查询结果是您不想要的。因此，如果子查询返回所有用户，那么您的查询将不会返回任何结果。您确定它应该返回行吗？有些用户没有响应警报。

# svg - 如何从旋转/平移/缩放值计算 SVG 变换矩阵？

> ID：15133977
> 
> 赞同：38
> 
> 时间：2013-02-28T11:10:10.793
> 
> 标签：svg, coordinate-transformation

我有以下详细信息：

```
<g transform="translate(20, 50) scale(1, 1) rotate(-30 10 25)"> 
```

需要将上面的行更改为：

```
<g transform="matrix(?,?,?,?,?,?)"> 
```

谁能帮我实现这一目标？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-02-28T11:59:18.870

Translate(tx, ty) 可以写成矩阵：

```
1  0  tx
0  1  ty
0  0  1 
```

Scale(sx, sy) 可以写成矩阵：

```
sx  0  0
0  sy  0
0   0  1 
```

Rotate(a) 可以写成矩阵：

```
cos(a)  -sin(a)  0
sin(a)   cos(a)  0
0        0       1 
```

Rotate(a, cx, cy) 是 (-cx, cy) 的平移、a 度的旋转和返回 (cx, cy) 的平移的组合，它给出：

```
cos(a)  -sin(a)  -cx × cos(a) + cy × sin(a) + cx
sin(a)   cos(a)  -cx × sin(a) - cy × cos(a) + cy
0        0       1 
```

如果你只是将它与翻译矩阵相乘，你会得到：

```
cos(a)  -sin(a)  -cx × cos(a) + cy × sin(a) + cx + tx
sin(a)   cos(a)  -cx × sin(a) - cy × cos(a) + cy + ty
0        0       1 
```

对应于 SVG 变换矩阵：

`(cos(a), sin(a), -sin(a), cos(a), -cx × cos(a) + cy × sin(a) + cx + tx, -cx × sin(a) - cy × cos(a) + cy + ty)`.

在你的情况下是：`matrix(0.866, -0.5 0.5 0.866 8.84 58.35)`。

如果包含比例 (sx, sy) 变换，则矩阵为：

`(sx × cos(a), sy × sin(a), -sx × sin(a), sy × cos(a), (-cx × cos(a) + cy × sin(a) + cx) × sx + tx, (-cx × sin(a) - cy × cos(a) + cy) × sy + ty)`

请注意，这假设您正在按照编写它们的顺序进行转换。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-28T11:21:53.747

首先使用 document.getElementById 获取 g 元素，如果它具有 id 属性或其他一些适当的方法，然后调用[consolidate](http://www.w3.org/TR/SVG/coords.html#__svg__SVGTransformList__consolidate)例如

```
var g = document.getElementById("<whatever the id is>");
g.transform.baseVal.consolidate(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-20T09:28:32.780

也许有帮助：

1.  [现场演示](https://jsfiddle.net/Kolosovsky/rkqfzttk/)如何找到变换点的实际坐标

2.  已接受答案的实现：

    ```
    function multiplyMatrices(matrixA, matrixB) {
        let aNumRows = matrixA.length;
        let aNumCols = matrixA[0].length;
        let bNumRows = matrixB.length;
        let bNumCols = matrixB[0].length;
        let newMatrix = new Array(aNumRows);

        for (let r = 0; r < aNumRows; ++r) {
            newMatrix[r] = new Array(bNumCols);

            for (let c = 0; c < bNumCols; ++c) {
                newMatrix[r][c] = 0;

                for (let i = 0; i < aNumCols; ++i) {
                    newMatrix[r][c] += matrixA[r][i] * matrixB[i][c];
                }
            }
        }

        return newMatrix;
    }

    let translation = {
        x: 200,
        y: 50
    };
    let scaling = {
        x: 1.5,
        y: 1.5
    };
    let angleInDegrees = 25;
    let angleInRadians = angleInDegrees * (Math.PI / 180);
    let translationMatrix = [
        [1, 0, translation.x],
        [0, 1, translation.y],
        [0, 0, 1],
    ];
    let scalingMatrix = [
        [scaling.x, 0, 0],
        [0, scaling.y, 0],
        [0, 0, 1],
    ];
    let rotationMatrix = [
        [Math.cos(angleInRadians), -Math.sin(angleInRadians), 0],
        [Math.sin(angleInRadians), Math.cos(angleInRadians), 0],
        [0, 0, 1],
    ];
    let transformMatrix = multiplyMatrices(multiplyMatrices(translationMatrix, scalingMatrix), rotationMatrix);

    console.log(`matrix(${transformMatrix[0][0]}, ${transformMatrix[1][0]}, ${transformMatrix[0][1]}, ${transformMatrix[1][1]}, ${transformMatrix[0][2]}, ${transformMatrix[1][2]})`); 
    ```

# java - 如何清除 JXDatePicker 字段

> ID：15133981
> 
> 赞同：1
> 
> 时间：2013-02-28T11:10:22.340
> 
> 标签：java, swing, netbeans, datepicker, swingx

我正在使用 Java 和 NetBeans 7 开发一个简单的桌面应用程序我有一个 textfield 和一个 textarea 以及一个 jxdatepicker 我有一个 CLEAR 按钮，可以在需要时清除这些字段

我用

```
jtextfield.setText("") and 
  jtextArea.setText("") 
```

按照指示清除文本字段和文本区域。但我的问题是，当单击清除按钮时，如何清除日期选择器以显示一个干净的字段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T11:35:28.720

基本上：

```
picker.setDate(null); 
```

附录：

深入研究选择器的内部并设置其编辑器的文本是*错误*的，因为文本仅在编辑器中更新，但未提交给底层模型：

```
picker.getEditor().setText("");
System.out.println(picker.getDate());

// output
Thu Feb 28 00:00:00 CET 2013 

// output after nulling the date with the appropriate api
null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-29T07:32:25.063

1.像这样设置属性。datePicker.getModel().setValue(null);;

# php - 反转`mysqli_real_escape_string`的效果

> ID：15133984
> 
> 赞同：0
> 
> 时间：2013-02-28T11:10:35.447
> 
> 标签：php, mysql, function

我正在开发一个应用程序，用户可以在其中创建 HTML 模板并将它们保存到数据库中。模板由不同的组件组成，如文本、图像等。当我尝试用**撇号** `'`保存文本时，它给了我`mysql_error`（显然）。所以我试图`mysqli_real_escape_strings`取消它。它有效，但我想取回保存的内容以用于**编辑目的**，并且撇号使用`\`（斜杠）进行转义。因此内容在内部被修改，不再是有效的 html 来编辑，浏览器抛出一个语法错误。
我还尝试搜索其他功能以进行转义并遇到`json_encode`但mysql不接受。
有人可以指出我可以在 php 中执行此操作的任何函数吗？请建议任何可以为我执行任务的函数！

**更新：**

```
 function saveContent(){   
    var $getContent = $('#mainWrap').clone();
    $getContent.find('.textBox, .pictureBox').removeAttr('id');
    var saveContent  = $getContent.wrap('<div></div>').html();
    console.log(saveContent);
    var getBodyStyle=$('body').attr('style');
    console.log('this is body style'+getBodyStyle);
    var auto="auto";
    $.ajax({
        url:"auto_save.php",
        type:"POST",
        dataType:"text",
        //data:"txtComp="+saveContent+"&auto="+auto+"&pageId="+pageId+"&webId="+webId+"&userId="+userId+"&bodyStyle="+getBodyStyle,
        data: {txtComp: saveContent, auto: auto, pageId: pageId,webId:webId,userId:userId,bodyStyle:getBodyStyle}
    }); 
 } 
```

我`mysql_real_escape_string`在我的`auto_save.php`. 现在，当我从 DB 取回它时，我必须将它传递给这样的 javascript 变量。

```
 var getSavedContent = <?php echo json_encode($IdLessContent); ?>; 
```

这会是个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:12:15.740

`stripslashes()`将从任何字符串中删除斜杠，并且在输出转义数据时很有用。

我相信你需要使用这个：

`json_encode($IdLessContent, JSON_UNESCAPED_SLASHES);`

使用 UNESCAPED_SLASHES 部分，您的数据应该正确返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-04T04:38:38.297

对于最新版本的 PHP，monkeymatrix 的答案是不正确的（我在 7.3 上对其进行了测试）。 `mysqli_real_escape_string()`只转义某些字符。这是一个将反转它的函数：

```
function reverse_mysqli_real_escape_string($str) {
    return strtr($str, [
        '\0'   => "\x00",
        '\n'   => "\n",
        '\r'   => "\r",
        '\\\\' => "\\",
        "\'"   => "'",
        '\"'   => '"',
        '\Z' => "\x1a"
    ]);
 } 
```

在一个正确编写的应用程序中，应该很少需要这个函数。您应该使用带有参数绑定的 PDO 来自动处理任何转义。我只创建了这个函数来处理一些遗留代码，这些代码在输入上转义了所有内容，我需要一种方法来返回原始数据。

# cluster-computing - 在预算有限的情况下构建集群电脑的最佳配置是什么？

> ID：15133987
> 
> 赞同：0
> 
> 时间：2013-02-28T11:10:46.633
> 
> 标签：cluster-computing

我正在寻找构建计算机集群的最佳计算机配置。这个计算机集群将用于一个使用大量快速访问 I/O 操作的搜索引擎，所以我的首要任务是 I/O。当然，我想使用 SSD，最好在一台 PC 上使用大量 SSD 以实现最高性能，但我想避免使用外部 RAID 控件，因为我目前的预算有点低（大约 4,500美元）。我的另一个选择是（我认为）使用具有常规配置的多台 PC 并在网络中使用它们。

我不熟悉用于此目的的最新技术，所以我求助于你，我想利用你在这方面的专业知识。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:13:50.693

一个答案中有太多变量无法解决。请查看[Nutch](https://wiki.apache.org/nutch/)及其关于设置实例集群的文档：[https ://wiki.apache.org/nutch/NutchHadoopTutorial](https://wiki.apache.org/nutch/NutchHadoopTutorial)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:15:05.177

SSD 不太适合集群，选择 SAS 硬盘，它会以更低的成本提供更稳定的延迟和更多的磁盘空间。但是您仍然可以将 SSD 用作闪存缓存以进一步提高性能

# c - 将长值转换为日期？

> ID：15133989
> 
> 赞同：0
> 
> 时间：2013-02-28T11:10:56.547
> 
> 标签：c, date, time

我有一个以长值存储的日期，即 20130228，我需要对其执行操作，例如添加 30 天或 50 天等。关于如何将其转换为更合适的内容的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T11:22:02.030

如果这样存储

```
unsigned long d = 20130228; 
```

你必须先用简单的算术把它分割成一个[`struct tm`](http://pubs.opengroup.org/onlinepubs/009695299/basedefs/time.h.html)

```
struct tm tm;
tm.tm_year = d / 10000 - 1900;
tm.tm_mon = (d % 10000) / 100 - 1;
tm.tm_mday = d % 100;
tm.tm_hour = tm.tm_min = tm.tm_sec = 0;
tm.tm_isdst = -1; 
```

然后你可以`30`为`tm.tm_mday`. 如果您使用[`mktime()`](http://pubs.opengroup.org/onlinepubs/009695299/functions/mktime.html)，您将收到一个`time_t`as[秒，因为纪元](http://pubs.opengroup.org/onlinepubs/009695299/basedefs/xbd_chap04.html#tag_04_14)和字段`tm`将被规范化

```
time_t t = mktime(&tm); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:02:34.877

您可以提取年、月和日，然后在考虑每个月有多少天并考虑闰年的情况下添加您的天数。

```
#include <stdio.h>

unsigned long AddDays(unsigned long StartDay, unsigned long Days)
{
  unsigned long year = StartDay / 10000, month = StartDay / 100 % 100 - 1, day = StartDay % 100 - 1;

  while (Days)
  {
    unsigned daysInMonth[2][12] =
    {
      { 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 }, // 365 days, non-leap
      { 31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 }  // 366 days, leap
    };

    int leap = !(year % 4) && (year % 100 || !(year % 400));

    unsigned daysLeftInMonth = daysInMonth[leap][month] - day;

    if (Days >= daysLeftInMonth)
    {
      day = 0;
      Days -= daysLeftInMonth;
      if (++month >= 12)
      {
        month = 0;
        year++;
      }
    }
    else
    {
      day += Days;
      Days = 0;
    }
  }

  return year * 10000 + (month + 1) * 100 + day + 1;
}

int main(void)
{
  unsigned long testData[][2] =
  {
    { 20130228, 0 },
    { 20130228, 1 },
    { 20130228, 30 },
    { 20130228, 31 },
    { 20130228, 32 },
    { 20130228, 365 },
    { 20130228, 366 },
    { 20130228, 367 },
    { 20130228, 365*3 },
    { 20130228, 365*3+1 },
    { 20130228, 365*3+2 },
  };

  unsigned i;

  for (i = 0; i < sizeof(testData) / sizeof(testData[0]); i++)
    printf("%lu + %lu = %lu\n", testData[i][0], testData[i][1], AddDays(testData[i][0], testData[i][1]));

  return 0;
} 
```

输出（[ideone](http://ideone.com/9F88ow)）：

```
20130228 + 0 = 20130228
20130228 + 1 = 20130301
20130228 + 30 = 20130330
20130228 + 31 = 20130331
20130228 + 32 = 20130401
20130228 + 365 = 20140228
20130228 + 366 = 20140301
20130228 + 367 = 20140302
20130228 + 1095 = 20160228
20130228 + 1096 = 20160229
20130228 + 1097 = 20160301 
```

另一种选择是提取年、月和日，并将它们转换为`epoch`使用后的秒数`mktime()`或类似功能，将表示从给定日期开始的那些天的秒数添加到该秒数，然后将生成的秒数转换回来使用`gmtime()`or`localtime()`或类似函数输入日期，然后构造长整数值。我选择不使用这些功能来避免时区和夏令时之类的事情。我想要一个简单而包含的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:01:19.293

通过将日期转换为“从 X 开始的时间单位”，对日期进行“数学运算”往往要容易得多——`time_t`标准库中的“从 1970 年 1 月 1 日午夜开始的秒数”。因此，使用`mktime`from a`struct tm`将是一种解决方案。

如果由于某种原因您不想这样做，那么将您的日期转换为“自（例如）2000 年 1 月 1 日以来的天数”将起作用。在处理整年（应该涵盖这一点）时，您必须考虑闰年`year % 4 == 0 && (year % 100 != 0 || year %400 == 0)`，当然在一年内您必须注意每月的天数。到日期的转换类似但相反。

# swt - 滚动画布内容

> ID：15133999
> 
> 赞同：3
> 
> 时间：2013-02-28T11:11:28.667
> 
> 标签：swt, eclipse-rcp, mouseevent, eclipse-plugin

我在画布上绘制了一些文本和矩形。

```
 package com.cavium.test.views;

    import org.eclipse.swt.SWT;
    import org.eclipse.swt.events.PaintEvent;
    import org.eclipse.swt.events.PaintListener;
    import org.eclipse.swt.graphics.Point;
    import org.eclipse.swt.graphics.Rectangle;
    import org.eclipse.swt.layout.FillLayout;
    import org.eclipse.swt.widgets.Canvas;
    import org.eclipse.swt.widgets.Display;
    import org.eclipse.swt.widgets.ScrollBar;
    import org.eclipse.swt.widgets.Shell;

    public class Test2 {
        protected static final int Y_STEP = 20;
        static int shellStyle = SWT.NO_REDRAW_RESIZE | SWT.NO_BACKGROUND
                | SWT.H_SCROLL | SWT.CLOSE | SWT.V_SCROLL | SWT.RESIZE;
        static int canvasStyle = SWT.NO_REDRAW_RESIZE;// | SWT.H_SCROLL |

        // SWT.V_SCROLL;

        public static void main(String[] args) {
            final Display display = new Display();
            final Shell shell = new Shell(display, shellStyle);
            shell.setLayout(new FillLayout());
            shell.setBackground(display.getSystemColor((SWT.COLOR_CYAN)));
            shell.setText("Canvas Test");
            shell.setSize(300, 200);

            final Canvas canvas = new Canvas(shell, canvasStyle);
            canvas.setLayout(new FillLayout());
            canvas.setBackground(display.getSystemColor(SWT.COLOR_WHITE));

            final Point origin = new Point(10, 20);
            final ScrollBar hBar = shell.getHorizontalBar();
            Rectangle size = canvas.getBounds();
            hBar.setMaximum(size.width);
            hBar.setMinimum(0);

            final ScrollBar vBar = shell.getVerticalBar();
            hBar.setMaximum(size.height);
            hBar.setMinimum(0);

            // Create a paint handler for the canvas
            canvas.addPaintListener(new PaintListener() {
                @Override
                public void paintControl(PaintEvent e) {
                    // Do some drawing
                    e.gc.drawString("Rows", origin.x, origin.y);
                    e.gc.drawString("Data", 120, 20);
                    for (int i = 0; i < 10; i++) {
                        e.gc.drawString("Row Header" + (i + 1), origin.x, origin.y
                                + (i + 1) * Y_STEP);
                        for (int j = 0; j < 10; j++) {
                            e.gc.drawRectangle(origin.x + 110 + (j * 20), origin.y
                                    + (i + 1) * Y_STEP, 20, 20);
                            e.gc.drawString("C" + (j + 1), origin.x + 110 + 2
                                    + (j * 20), origin.y + (i + 1) * Y_STEP + 1);
                        }
                    }

                }

            });

            shell.open();
            while (!shell.isDisposed()) {
                if (!display.readAndDispatch()) {
                    display.sleep();
                }
            }
            display.dispose();

        }
    } 
```

是否可以在拖动水平滚动条时仅滚动单元格（C1、C2...），保持行标题 1、行标题 2 ...等保持不变。请参阅下面的快照

![在此处输入图像描述](../Images/d0ef6370da2c5913b22022b8a7eb5dc6.png)

还让我知道我们如何检测滚动条上的鼠标事件，即当用户单击上/下或左箭头/右箭头按钮时，单击并拖动拇指，单击拇指和右箭头或左箭头按钮之间的区域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:15:56.483

是的，您可以这样做，但就像您完全自定义绘制表格一样，您还必须管理滚动效果。您可以向滚动条添加侦听器，并使用 侦听用户对滚动位置所做的任何更改`hBar.addSelectionListener()`。您需要在滚动条（垂直和水平）上设置最小、最大、页面增量和拇指大小，以确保获得真实的体验。