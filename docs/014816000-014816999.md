# StackOverflow 问答 14816000-14816999

# android - 活动为空

> ID：14816000
> 
> 赞同：1
> 
> 时间：2013-02-11T16:07:06.780
> 
> 标签：android, nullpointerexception

我的程序流程是

1.  活动开始服务。
2.  服务启动 TimerTask 以获取 html
3.  当 TimerTask 获取新的 html 时， sendBroadcast();
4.  广播类接收“字符串 html”
5.  onReceive 被调用并在 Activity 中启动 change(html) 方法。
6.  change(String html) 方法将 html 放入活动中的 textview。

我的问题是 5：“活动实例为空”

我的代码是

```
public class MainActivity extends Activity {
    static MainActivity Iinstance;
    private String ServiceName = myService.class.getCanonicalName();
    ServiceStatus servicestatus = new ServiceStatus();
    static Handler handler = new Handler();
    TextView tv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.getWindow().setSoftInputMode(
            LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
        setContentView(R.layout.activity_main);
        tv = (TextView)findViewById(R.id.textView1);
        Iinstance = this;

        Button B;
        //there is clicklistener for B to start service.
    }

class AA{
    void A(String html){
        tv.setText(html);
    }
} 
```

和服务代码是

```
public class myService extends Service {
    //fields

    public int onStartCommand(Intent i, int flags, int startId) {
        //code to start TimerTask.
    }

    //register the receiver.
        CancelReceiver receiver = new CancelReceiver();
        intentFilter = new IntentFilter();
        intentFilter.addAction("MY_ACTION");
        registerReceiver(receiver, intentFilter);  
        return START_REDELIVER_INTENT;
    }

    class task extends TimerTask{
        @Override
        public void run() {
            try {//get html from webviewClient

                handlers.post(new Runnable(){
                    @Override   
                    public void run() {    
                        //webView load URL.I have two doubts around this.

                        WebView webView = new WebView(myService.this);
                        webView.getSettings().setJavaScriptEnabled(true);
                        webView.setWebViewClient(new HogeWebViewClinet());
                        webView.addJavascriptInterface(new WebViewLogger(), "webViewLogger");
                        String Url = (String) map.get("URL");
                        webView.loadUrl(Url);
                    }   
                });

            }
        }

        class HogeWebViewClinet extends WebViewClient {
            @Override public void onPageFinished(WebView view, String url) {
                //throw the html from webview to "class WebViewLogger"as "String str"by loading javascript.
                view.loadUrl("javascript:window.webViewLogger.log(document.documentElement.outerHTML);");
            }    
        }

        class WebViewLogger {
            public void log(String str) {
                Intent broadcastIntent = new Intent();
                broadcastIntent.putExtra("Status", str);
                broadcastIntent.setAction("MY_ACTION");
                sendBroadcast(broadcastIntent);
            }
        }
    } 
```

然后去广播课。公共类接收器扩展广播接收器{

```
 String serviceResult = null;

    @Override
    public void onReceive(Context arg0, Intent intent) {
        AA aa = MainActivity.Iinstance.new AA(); //threw error in this line.
        aa.a(intent.getStringExtra(Status);
    } 
```

就这样。

为什么“MainActivity.Iinstance.new AA();”为空？

我猜为什么活动为空

1.  因为 webview 不是 setcontentview。所以现在，没有看到 webview，工作背景。它对我有好处。但。不可见的 webview 覆盖了所有的 UI 和活​​动 UI 被扔掉了。
2.  因为 Handler 没有正确使用。不可见的 webview 使用 Handler？

毕竟，我无法解决这个问题，但是我尝试了很多解决方案。

请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:28:08.053

## 活动/服务沟通

您**不能**保留活动的**静态**变量，这会导致泄漏和错误！

Android 系统会根据各种情况（需要内存资源、配置更改等）重新创建和删除您的活动。

您应该使用 Intent 实现 Activity 和 Service 之间的通信。

如果您不想每次都创建新活动，请将活动设置[`launchMode`](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)为。`singleTop`然后，您需要在[`onNewIntent(Intent)`](http://developer.android.com/reference/android/app/Activity.html#onNewIntent%28android.content.Intent%29)活动的方法中处理意图

## 从服务加载 url

您不能在服务中使用 webView。你必须使用像 `HttpUrlConnection`. 有关详细信息，请参阅[连接和下载数据](http://developer.android.com/training/basics/network-ops/connecting.html#download)

# c++ - 容器及其内容的 const 与非 const

> ID：14816001
> 
> 赞同：15
> 
> 时间：2013-02-11T16:07:09.233
> 
> 标签：c++, constants, containers

对于容器类，例如`std::vector`，有两个不同的常量概念：容器的概念（即它的大小）和元素的概念。似乎`std::vector`混淆了这两者，因此以下简单代码将无法编译：

```
struct A {
  A(size_t n) : X(n) {}
  int&x(int i) const { return X[i]; }    // error: X[i] is non-const.
private:
  std::vector<int> X;
}; 
```

请注意，即使调用 its 的*数据成员*（指向数据开始和结束的三个指针以及分配的缓冲区的结尾）`std::vector`没有更改，**但**`operator[]`该成员不会`const`- 这不是一个奇怪的设计吗？

另请注意，对于原始指针，这两个常量概念被巧妙地分开，因此相应的原始指针代码

```
struct B {
  B(size_t n) : X(new int[n]) {}
  ~B() { delete[] X; }
  void resize(size_t n);                 // non-const
  int&x(int i) const { return X[i]; }    // fine
private:
  int*X;
}; 
```

工作得很好。

`std::vector`那么在使用（不使用）时处理这个问题的正确/推荐方法是什么`mutable`？

是`const_cast<>`一个

```
int&A::x(int i) const { return const_cast<std::vector<int>&>(X)[i]; } 
```

被认为是可以接受的（`X`已知是 non- `const`，所以这里没有 UB）？

**编辑**只是为了防止进一步混淆：我确实想修改元素，即容器的*内容，而不是容器本身*（大小和/或内存位置）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-11T16:43:23.837

C++ 只支持一个级别的`const`. 就编译器而言，它是按位常量：对象中的实际“位”（即计入`sizeof`）不能在不玩游戏（`const_cast`等）的情况下进行修改，但其他任何事情都是公平的游戏。在 C++ 的早期（1980 年代末，1990 年代初），关于按位 const 与逻辑 const（也称为 Humpty-Dumpty const，因为正如 Andy Koenig 曾经告诉我的那样，当程序员使用 `const`，它的意思正是程序员想要的意思）。共识最终一致支持逻辑常量。

这确实意味着容器类的作者必须做出选择。容器的元素是容器的一部分，还是不是。如果它们是容器的一部分，那么如果容器是 const，它们就不能被修改。没有办法提供选择；容器的作者必须选择其中一个。在这里，似乎也有一个共识：元素是容器的一部分，如果容器是 const 的，它们就不能被修改。（也许与 C 样式数组的平行在这里起了作用；如果 C 样式数组是 const，那么您不能修改它的任何元素。）

和你一样，我也曾遇到过想要禁止修改向量大小（也许是为了保护迭代器）而不是元素大小的情况。没有真正令人满意的解决方案；我能想到的最好的方法是创建一个包含 a 的新类型，并提供与 我在这种特定情况下需要`mutable std::vector`的含义相对应的转发功能。`const`如果要区分三个级别（完全 const、部分 const 和非常量），则需要推导。基类仅公开完全 const 和部分 const 函数（例如 a`const int operator[]( size_t index ) const;`和`int operator[]( size_t index );`，但不公开`void push_back( int );`); 允许插入和删除元素的函数仅在派生类中公开。不应插入或删除元素的客户端仅传递对基类的非常量引用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T16:19:26.537

不幸的是，与指针不同，你不能做类似的事情

```
std::vector<int> i;
std::vector<const int>& ref = i; 
```

这就是为什么`std::vector`不能在这两种`const`可能适用的情况下消除歧义，而且必须保守。我个人会选择做类似的事情

```
const_cast<int&>(X[i]); 
```

编辑：正如另一位评论者准确指出的那样，迭代器*确实*模拟了这种二分法。如果您将 a 存储`vector<int>::iterator`在开头，则可以在 const 方法中取消引用它并取回 non-const `int&`。我认为。但是你必须小心失效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T16:18:28.920

这不是一个奇怪的设计，这是一个非常深思熟虑的选择，而且是正确的恕我直言。

你的`B`例子不是一个很好的类比 a `std::vector`，一个更好的类比是：

```
struct C {
   int& get(int i) const { return X[i]; }
   int X[N];
}; 
```

但有一个非常有用的区别是可以调整数组的大小。上面的代码由于与原始代码相同的原因无效，数组（或`vector`）元素在概念上是包含类型的“成员”（技术上的子对象），因此您不应该能够通过`const`成员函数修改它们。

我会说这`const_cast`是不可接受的，`mutable`除非作为最后的手段，否则也不会使用。您应该询问为什么要更改 const 对象的数据，并考虑将成员函数设为非 const。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-11T16:39:49.760

我建议使用`std::vector::at()`方法而不是`const_cast`.

# php - php_pdf.dll 和 WAMP

> ID：14816003
> 
> 赞同：0
> 
> 时间：2013-02-11T16:07:11.297
> 
> 标签：php, dll, wamp

我已经放置了文件，我在这个链接中找到了：[http ://www.dlldll.com/php_pdf.dll_download.html](http://www.dlldll.com/php_pdf.dll_download.html)

进入我的 php ext 文件夹。

我在两个配置位置都添加了延长线。我已经重新启动了我的网络服务。

我有同样的错误：致命错误：

> 调用未定义函数 pdf_new()

对找到实际有效的 php_pdf.dll 有任何帮助吗？

:(

除了我所做的上述之外，我真的不太了解安装扩展程序。

这是针对 WAMP 的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:23:51.920

您提到设置配置，但最好仔细检查您的 php.ini 并确保您有正确的加载 dll 的路径：

```
extension_dir = <your_path_to_extension_directory> 
```

和

```
extension=php_pdf.dll 
```

并检查目录是否可读。但是，尚不清楚您正在下载的 dll 是否真的是 PDFlib 的，因此如果其他所有设置正确，这可能是它无法正常工作的原因之一。

有关 PDFlib 的一些替代方案，请参阅[此问题](https://stackoverflow.com/questions/4108361/pdflib-for-php-is-there-an-alternative)。

# ruby-on-rails - 无法在表单中显示用户数据，获取未定义的方法“user_path”（使用设计和simple_form）

> ID：14816006
> 
> 赞同：0
> 
> 时间：2013-02-11T16:07:23.567
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, simple-form

我正在尝试通过表单显示来自用户的数据，以便他能够编辑任何字段。我为此使用 simple_form，并设计用于身份验证。我不断收到`undefined method user_path`错误。

这是我的控制器

```
class HomeController < ApplicationController
 before_filter :authenticate_user!
 def index
 #Mostramos menu de opciones
 end

 def perfil
   @user = User.find(current_user.id)
 end

 def editar
   @user = User.find(current_user.id)
 end 
```

结尾

perfil.html.erb 的视图

```
<h1>showing user data</h1>
<%= simple_form_for @user do |f| %>
  <%= f.input :nombre %>
  <%= f.input :username %>
  <%= f.input :rut %>
  <%= f.input :ciudad %>
  <%= f.input :direccion %>
  <%= f.input :groupId %>
  <%= f.button :submit %>
<% end %>

<%= link_to "Editar datos", :action => :editar %>
<br>
<%= link_to "Volver", :action => :index %> 
```

还有我的路线文件

```
devise_for :users
match "perfil" => "home#perfil"
match "editar" => "home#editar" 
```

`<%= simple_form_for @user do |f| %>` 在我一直在寻找关于我做错了什么的指南或见解的视图中，错误出现在这一行附近（我几乎可以肯定在 routes.rb 中做错了什么或遗漏了一些事情）。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:45:27.977

如果@user 是现有用户，则

```
<%= simple_form_for @user do |f| %> 
```

使用 PUT/PATCH http 请求类型将表单发布到 user_path(@user)。请注意，您需要创建此路由。从您的代码中不清楚此更新操作在哪里，但是如果您使用了资源丰富的模式，那么：

```
resources :users 
```

处理它（通过 路由`UsersController#edit`），包括您的`perfil`和`editar`操作。顺便说一句，他们看起来也一样：打开一个页面来提交配置文件更改，通常通过`UsersController#edit`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:24:58.927

更改您的路线如下并尝试，

```
 devise_for :users
    match "perfil" => "home#perfil", :as => :user
    match "editar" => "home#editar", :as => :user 
```

该`:as`参数告诉路由器将路由命名为什么（然后您可以添加`_path`或添加`_url`到任何`:as`参数）。

此外，任何时候您直接链接到 ActiveRecord 模型（例如`link_to user.email, user`），它都会尝试`user`变成`user_path`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T16:30:00.010

```
<%= simple_form_for @user do |f| %> 
```

`users_controller`这将根据上下文将表单发布到控制器和操作。`devise_for :users`不会为您生成该控制器，而是您有`registrations_controller`可用的，事实上，您不需要创建编辑表单，`users/edit`当前用户的 url 已经有一个可用的。

要自定义默认模板，`rails generate devise:views`请运行并查看`app/views/devise`.

# iphone - 将自定义类对象添加到数组

> ID：14816008
> 
> 赞同：0
> 
> 时间：2013-02-11T16:07:26.240
> 
> 标签：iphone, xcode

我尝试将我创建的自定义对象类添加到 nsuserdefaults 数组，但它始终保持为空。我得到的日志是：

“请注意，属性列表中的字典和数组也必须只包含属性值”

我的代码是：

```
-(void)addProgramWithName:(NSString *)nameOfProgram andWithArrayOfIntervals:(NSMutableArray *)arrayOfIntervals{

    Program *tempProgram = [[Program alloc] init];
    tempProgram.nameOfProgram = nameOfProgram;
    tempProgram.arrayOfIntervals = arrayOfIntervals;

    NSMutableArray *tempArrayOfPrograms = [NSMutableArray arrayWithArray: [[NSUserDefaults standardUserDefaults] arrayForKey: @"arrayOfPrograms"]];

    [tempArrayOfPrograms addObject:tempProgram];

    [defaults setObject:tempArrayOfPrograms forKey:@"arrayOfPrograms"];

    [defaults synchronize];

} 
```

可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:25:41.270

问题的原因是日志消息所说的 - 对于属性列表，您添加到数组（或字典）的任何对象都必须是属性值（字符串、数字、日期和数组/字典）。

因此，在您的情况下，您似乎已经从用户默认值中读取了值，现在您想要将一些自定义对象添加到您读取的值中。

如果您不打算将修改后的数组写回用户默认值，那么这种方法没有任何问题（尽管它让我觉得它是一种对数据结构有些狂热的方法）。

另一方面，如果您需要将数据写回，您应该只将属性值存储在数组中。对于更复杂的对象，可以通过将其编码到带有键和值的字典对象中来实现。

不过，根据您的需求，Core Data 可能更适合您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:27:27.130

当您将数组或字典存储到 NSUserDefaults 中时，它会被压缩为磁盘上的 plist。这意味着您的自定义对象需要转换为可以存储在 plist 中的格式。有很多方法可以做到这一点，具体取决于您的对象所持有的数据类型，但此方法几乎适用于任何自定义对象，并且应该非常健壮。

感谢 Apple 精心设计的框架，实现起来非常简单:)

在您`Program.h`添加`<NSCoding>`协议。

```
@interface Program : NSObject <NSCoding> 
```

然后在你`Program.m`确保你实现以下方法。

```
#pragma mark - NSCoding

-(void)encodeWithCoder:(NSCoder *)encoder
{
    // For each of the Program's properties that needs to be stored.
    [encoder encodeObject:self.property forKey:@"PropertyKey"];
}

-(id)initWithCoder:(NSCoder *)decoder
{
    if (self=[super init]) {
        self.property = [decoder decodeObjectForKey:@"PropertyKey"];
    }

    return self;
} 
```

此协议及其方法允许您的自定义对象动态编码和解码。这很重要，因此我们可以将您的对象转换为正确的格式。

接下来，我们将在存储阵列之前对其进行归档。所以用这个替换你的代码：

```
// Old Line
// [defaults setObject:tempArrayOfPrograms forKey:@"arrayOfPrograms"];

// New Lines
id archivedObject = [NSKeyedArchiver archivedDataWithRootObject:tempArrayOfPrograms];
[defaults setObject:archivedObject forKey:@"arrayOfPrograms"]; 
```

现在最后一步是确保您在退出时取消归档。因此，无论您从何处加载阵列，`NSUserDefaults`请确保将其取消归档。

```
// Get the archived array.
id archivedObject = [[NSUserDefaults standardUserDefaults] objectForKey:@"arrayOfPrograms"];

// Unarchive the array.
NSArray *unarchivedArray = [NSKeyedUnarchiver unarchiveObjectWithData:archivedObject];

// Its already a mutable array if you put a mutable array in but just to be safe.
NSMutableArray *arrayFromDefaults = [NSMutableArray arrayWithArray:unarchivedArray]; 
```

# c# - 从 exe 文件中获取解决方案

> ID：14816009
> 
> 赞同：2
> 
> 时间：2013-02-11T16:07:27.133
> 
> 标签：c#, .net, reflection

我丢失了一个非常重要的 .NET 4.0 C# 项目，剩下的只是 exe 文件。

为了让项目回来，我试过这个： http: [//mrdublin.net/2008/07/31/retrieve-c-code-out-of-exe-assembly/](http://mrdublin.net/2008/07/31/retrieve-c-code-out-of-exe-assembly/)

当前的 .NET Reflector 看起来不一样，但我已尽我所能遵循指南，并且我确实得到了一个项目。在 Visual Studio 2010 中打开它时，我首先必须将项目转换为当前版本和构建。

问题是：

1.  我必须将 .NET 从 2.0 更改为 4.0（从一开始就是这样），为什么反射器将其设置为 2.0？
2.  此代码是否与原始代码完全相同，没有替代解决方案或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:11:21.880

我对 Reflector 不太熟悉了，但我想它只是默认为 .net 2.0，可能有一个选项可以在某处更改它。作为替代方案，您可以查看[JetBrains dotPeek](http://www.jetbrains.com/decompiler/)。

关于问题 2：不，代码可能看起来一点也不像原始源代码（除非您有 PDB 文件）。您将丢失所有注释、变量名等。所有反编译的源代码都将非常通用，因为编译后的代码不包含此类细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:50:37.037

我使用了常规的 reflector.net，即使它没有重新生成 exect 代码，也总比没有好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T16:20:45.723

我最近不得不从程序集中恢复代码。我使用[了 JetBrains 的 dotPeek](http://www.jetbrains.com/decompiler/)。它完成了这项工作。你可以试试这个，而不是 Reflector。

至于您的问题：您遵循的说明是从 2008 年开始的（！）。当时的最新版本是 3.0/3.5，与 2.0 兼容。.NET 4.0 于 2010 年发布。也许 Reflector 不会将版本设置为无法验证的版本。

第二个更直接：我不确定您所说的“替代解决方案”是什么意思，但您会得到将 exe 的 IL 翻译回 c#。这意味着恢复的代码将与原始代码不同。另一方面，您没有原始文件，那么您将如何验证呢？我们的变量名称将不同，您将丢失注释、测试以及exe外部的所有其他内容。查看您是否还有可执行文件的[PDB](http://msdn.microsoft.com/en-us/library/ms241903%28v=vs.100%29.aspx)文件，这将有助于变量名称和实际编写的 C# 代码。

# ruby - ruby popen4 命令通过 shell 运行，当参数包含空格时会导致问题

> ID：14816010
> 
> 赞同：0
> 
> 时间：2013-02-11T16:07:31.610
> 
> 标签：ruby, regex, popen

我有一个使用 popen4 的自定义启动器应用程序。该脚本将末尾的双连字符“--”之后的所有内容传递到 popen4，我使用标准输出功能进行一些客户管道和统计数据收集。

当我们启动的脚本采用包含空格的参数时，就会出现问题。

```
my_launcher.rb --keep-alive --log-file /path/file.log -- /launch/this/script.rb --foo "param with spaces" 
```

shell 去掉了“带空格的参数”周围的引号，因为 popen4 只接受字符串，所以如果不做一些我担心会引入错误的正则表达式工作，就无法重新添加这些引号。

'regular' popen 提供了一种将命令作为数组传递并因此绕过 shell 的方法，但这似乎在 popen4 中没有实现。

* * *

来自 ruby​​ IO 的 rdoc

[http://www.ruby-doc.org/core-1.9.3/IO.html](http://www.ruby-doc.org/core-1.9.3/IO.html)

如果 cmd 是字符串“-”，则启动一个新的 Ruby 实例作为子进程。

如果 cmd 是一个字符串数组，那么它将被用作绕过 shell 的子进程的 argv。

* * *

有没有办法访问popen使用的“绕过外壳”功能并将该对象传递给popen4？

或者，有没有办法获取字符串数组，并在适当的情况下使用包含引号的格式对其进行格式化，以便将包含空格的参数识别为一个参数？然后我可以将此字符串传递给popen4。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:50:35.590

我通过使用 shellwords 模块解决了这个问题

```
 require 'shellwords'
 args = [ '/launch/this/script.rb', '--foo', 'param with spaces' ]
 popen4( Shellwords.join( args ) ) 
```

# javascript - jsf和javascript，不兼容吗？

> ID：14816011
> 
> 赞同：0
> 
> 时间：2013-02-11T16:07:31.943
> 
> 标签：javascript, jsf

我正在将 html 迁移到 jsf 文件，但脚本失败，该脚本在安装在 wamp 服务器中的 html 中工作。

代码：

```
> <h:head>
>         <meta charset="utf-8"/>
>         <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
>         <title></title>
>         <meta name="description" content=""/>
>         <meta name="viewport" content="width=device-width, initial-scale=1"/>
>         <link rel="stylesheet" href="../css/media-queries.css" media="screen" />
>         <script type="" src="../js/vendor/modernizr.2.6.2.min.js"></script>
>         <script type="" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
>         <script type="text/javascript">window.jQuery || document.write('<script
> src="../js/vendor/jquery-1.8.0.min.js"><\/script>')</script> <!--  This is the line 21 -->
>         <script type="" src="../js/jquery.mobile.min.js"></script>
>         <script type="" src="../js/jquery.dataTables.min.js"></script>
>         <script type="" src="../js/jquery.formCharmer.js"></script>
>         <script type="">if(Modernizr.csstransitions){document.write('<link
> rel="stylesheet" href="../css/charmerAnimation.css"/>')}</script>
>         <!--[if (gte IE 6)&(lte IE 8)]>
>             <script src="../js/selectivizr.min.js"></script>
>         <![endif]-->
>         <!--[if lte IE 9]>
>             <script src="../js/css3-mediaqueries.js"></script>
>         <![endif]-->
>     </h:head> 
```

错误：

> HTTP 状态 500 - 解析错误 /content/contentA.xhtml：错误跟踪 [行：21] 元素的内容必须由数据标记或正确的格式组成。

这是 HTML 代码：

```
<head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="../css/media-queries.css" media="screen" />
        <script src="../js/vendor/modernizr.2.6.2.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="../js/vendor/jquery-1.8.0.min.js"><\/script>')</script>
        <script src="../js/jquery.mobile.min.js"></script>
        <script src="../js/jquery.dataTables.min.js"></script>
        <script src="../js/jquery.formCharmer.js"></script>
        <script>if(Modernizr.csstransitions){document.write('<link rel="stylesheet" href="../css/charmerAnimation.css">')}</script>     
        <!--[if (gte IE 6)&(lte IE 8)]>
            <script src="../js/selectivizr.min.js"></script>
        <![endif]-->
        <!--[if lte IE 9]>
            <script src="../js/css3-mediaqueries.js"></script>
        <![endif]-->
    </head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:18:07.623

Facelets 是一种基于 XML 的视图技术。`<`和`>`是XML 中的[保留字符](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML)，表示元素的开始和结束。但是，您尝试将其作为 JavaScript 字符串变量的一部分输出。您需要将它们表示为`&lt;`and `&gt;`。

```
<script>window.jQuery || document.write('&lt;script src="../js/vendor/jquery-1.8.0.min.js"&gt;&lt;\/script&gt;')</script> 
```

这同样适用于`&`代码中更下方的字符，它表示实体的开始。顺便说一句，一旦您解决了这个问题，您就遇到了 IE 条件注释的新问题，这里得到了回答：[<!--[if IE]> 条件注释在 Facelets 中呈现 HTML 转义](https://stackoverflow.com/questions/8574588/if-ie-doesnt-work-with-facelets)。

# ajax - "Name=AJAXREQUEST", "Value=_viewRoot" 设置 ajax 字段的元素值？

> ID：14816012
> 
> 赞同：0
> 
> 时间：2013-02-11T16:07:32.980
> 
> 标签：ajax, loadrunner

查看一些旧脚本以了解一点，我在 web_submit_data 中观察到这一点：“Name=AJAXREQUEST”、“Value=_viewRoot”和“Name=thenameoftheelementIwantToSet”、“Value=thevalueIwantToSet”（以及更多名称-值对）

如果元素名称是 'thenameoftheelementIwantToSet' 并且值是 'thevalueIwantToSet' ，这是实际设置值的一种方式吗？'AJAXREQUEST' 这个名字是一个保留字，实际上说明这个元素操作是在 AjaxElemnt 上完成的，还是可以说什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:56:00.077

这些名称/值对的处理是在您的应用程序或网页运行的服务器上完成的。至于什么是有效的，完全取决于应用程序。从 LoadRunner 的角度来看，您只是传递了一对字符串。

# list - Mathematica 中的条件以接受具有数字输入的对列表

> ID：14816013
> 
> 赞同：1
> 
> 时间：2013-02-11T16:07:35.487
> 
> 标签：list, wolfram-mathematica, conditional-statements

我正在尝试在 Mathematica 中创建一个函数，该函数接受一个数字对列表，并输出该对的第一个元素的列表，该列表被提升到第二个元素的反幂，例如 {{1,3},{2, 2}....} -> {1^(1/3),2^(1/2),...}。

这是我到目前为止所得到的：

```
pairsToRoots3[list : {{_, _} ..}] := 
list /. {p_Real, q_Real} :> p^(1/q) 
```

它似乎不适用于 p_Real 但如果我输入 p_Integer 它可以正常工作。不知道为什么。理想情况下，我希望将条件表达为

```
 pairsToRoots3[list : {{_Real, _Real} ..}] 
```

或类似的东西，但我尝试的一切似乎都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:25:09.053

如果您的号码有 head ，则此方法有效`Real`：

```
pairsToRoots[list : {{_Real, _Real} ..}] :=  #^(1/#2) & @@@ list

pairsToRoots[{{1`, 3`}, {2`, 2`}}] 
```

> ```
> {1., 1.41421} 
> ```

但是这些数字没有 head `Real`：

```
Head /@ {1, 2, Pi 7/8} 
```

> ```
> {Integer, Integer, Integer, Symbol, Rational} 
> ```

因此，您可能希望`NumericQ`使用乔治：

```
pairsToRoots[list : {{_?NumericQ, _?NumericQ} ..}] :=  #^(1/#2) & @@@ list

pairsToRoots[{{1, 3}, {2, 2}}] 
```

> ```
> {1, Sqrt[2]} 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:55:56.313

```
f[{x_,y_}/;NumericQ[x]&&NumericQ[y]&&x>0&&y!=0]:=x^(1/y)
h[list_List]:=f/@list

h[{{1,2},{3,4}}]->{1,3^1/4} 
```

我个人不会费心定义“h”，而是根据需要简单地应用 f ..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T16:18:38.890

就像是 ：

```
p2R[listOfPairs_] := #[[1]]^(1/#[[2]]) & /@ listOfPairs

p2R[{{a1, a2}, {b1, b2}, {c1, c2}}]
(* {a1^(1/a2), b1^(1/b2), (c1^((1/c2)))} *) 
```

或者 ：

```
MapThread[#1^(1/#2) &, Transpose[{{a1, a2}, {b1, b2}, {c1, c2}}]] 
(* {a1^(1/a2), b1^(1/b2), c1^(1/c2)} *) 
```

# visual-studio-2008 - C# 对象保持打开状态

> ID：14816015
> 
> 赞同：1
> 
> 时间：2013-02-11T16:07:46.507
> 
> 标签：visual-studio-2008, c#-3.0, registry

在 C# 2008 windows 应用程序中，我收到以下错误消息：

进程 9528 (\Device\HarddiskVolume2\Program Files (x86)\red\sampleclient.exe) 已打开密钥 \REGISTRY\USER\S-1-5-21-11-222-333\Software\Microsoft\SystemCertificates\TrustedPeople Process 8880 (\Device\HarddiskVolume2\Program Files (x86)\red\sampleclient.exe) 已打开密钥 \REGISTRY\USER\S-1-5-21-11-222-333\Software\Microsoft\SystemCertificates\TrustedPeople Process 9528 (\Device\HarddiskVolume2\Program Files (x86)\red\sampleclient.exe) 已打开密钥 \REGISTRY\USER\S-1-5-21-11-222-333\Software\Microsoft\SystemCertificates\My Process 8880 ( \Device\HarddiskVolume2\Program Files (x86)\red\sampleclient.exe) 已打开密钥 \REGISTRY\USER\S-1-5-21-11-222-333\Software\Microsoft\SystemCertificates\My Process 9528 (\设备\HarddiskVolume2\Program Files (x86)\red\sampleclient.exe) 已打开密钥 \REGISTRY\USER\S-1-5-21-11-222-333\Software\Microsoft\SystemCertificates\Disallowed Process 8880 (\Device\HarddiskVolume2\Program Files (x86)\red\sampleclient.exe ) 已打开密钥 \REGISTRY\USER\S-1-5-21-11-222-333\Software\Microsoft\SystemCertificates\Disallowed

应用程序中没有使用注册表的代码，因此我认为唯一可能出错的是与数据库的连接字符串有关的内容。

这是数据库中到 sql server 2008 r2 数据库的连接字符串：

正在使用的帐户是通过使用 sql server 登录为应用程序设置的。该帐户还具有某种 Windows 权限。

因此，您能告诉我您认为我可以如何更改与数据库的连接字符串和/或告诉我您认为可能出错的地方吗？

# c# - 带有“-符号”的多行文本

> ID：14816016
> 
> 赞同：0
> 
> 时间：2013-02-11T16:07:48.470
> 
> 标签：c#, parsing

如何为字符串提供带有“-signs in as value”的多行文本？

我想将文件的内容声明为测试的静态字符串，问题是内容使用“”作为其值。

它看起来像这样：

```
PLCPort = "1" 
PLCBaudRate = "11600"
PLCDataBits = "8" 
PLCStopBit = "0" 
```

我已经尝试使用`@""`多线，但是“-标志”毁了我的一天。有没有办法在使用时逃避“-标志” `@""`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:08:40.280

您可以`"`通过编写将字符放在逐字字符串文字中`""`：

```
@"I have a single double quote: ""!" 
```

# c++ - Qt调整窗口大小以适应滚动区域问题中的纵横比

> ID：14816019
> 
> 赞同：3
> 
> 时间：2013-02-11T16:07:57.047
> 
> 标签：c++, qt, widget, preview

我使用 Qt 制作了一个预览对象，它是一个容器，里面有屏幕小部件。为了使其纵横比正确，当屏幕宽度改变时，高度也需要改变。

这会导致一个问题，因为屏幕在滚动区域内，当它的高度超过某个点时，滚动条就会进入。这会减小宽度，因此需要减小高度，这可能会导致滚动条出现循环不断进出。

我尝试解决此问题的一种方法是获取所需的大小并对负责计算和设置大小的函数的多次迭代进行平均，如果平均值与所需大小没有显着差异，则大小不会改变. 这已经解决了这个问题，但在我看来不是最佳的......

我想知道是否有人知道如何解决这个问题？

```
//********************************************************************************
/// \brief Called to make the size of the preview pane the correct size
void PreviewDisplayWidget::SetSizeOfScreen()
{
  double aspect_ratio = _preview_controls->_video_settings.getVideoFormat().GetAspectRatio();

  // Calculate the new minimum size
  int minimum_size = _container->width()/aspect_ratio;

  // HACK TO FIX ISSUE WITH RESIZING:
  // The preview sets its height from the width, if the width is changed, so will the height.
  // This causes an issue with the scroll area as it can be in a situation that will cause the
  // scroll area to get thinner (due to scroll bars being added), causing the width of the widget
  // to change, therefore causing the height to change. Which can be enough to make the scroll bar go
  // away. This can loop and cause a stack overflow.
  //
  // Store the last 10 sizes.
  _previous_sizes.push_back(minimum_size);

  const int sizes_to_scan = 10;
  if (_previous_sizes.size() > sizes_to_scan)
  {
    _previous_sizes.pop_front();
  }

  int sum = 0;
  for (auto i =_previous_sizes.begin(); i != _previous_sizes.end(); i++)
  {
    sum += *i;
  }

  double average = (double) sum / (double) _previous_sizes.size();

  std::cout << "Average " << average << std::endl;

  bool change_in_average = false;
  // Significant change in average means a size change should occur
  if (average > minimum_size + 5 || average < minimum_size - 5)
  {
    change_in_average = true;
  }

  if (change_in_average || _previous_sizes.size() < sizes_to_scan - 1)
  {
    _preview_frame->setMinimumHeight(minimum_size);
    std::cout << "Preview sizes " << minimum_size << std::endl;
    _preview_frame->updateGeometry();
  }

  SetPreviewSize();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:01:32.793

这行得通吗？

```
int minimum_size;

if(scrollArea->verticalScrollBar())
minimum_size = (_container->width()+scrollArea->verticalScrollBar()->width())/aspect_ratio;
else
minimum_size = _container->width()/aspect_ratio; 
```

# javascript - 我可以用不同的方式组织路径吗？

> ID：14816022
> 
> 赞同：0
> 
> 时间：2013-02-11T16:08:03.100
> 
> 标签：javascript, angularjs

我正在开发一个 AngularJS 应用程序，我是 Angular 的新手，我正在设置一个大对象，以便在需要时`$rootScope`随时可用`$scope`。

此时它看起来像这样：

```
Application.run(['$rootScope', function($rootScope) {

    $rootScope.Envato = {

        API : {

            Path : {
                Private : "/api/private/",
                Public : "/api/public/"
            },

            Methods : {

                Private : {

                    User : {

                        Vitals : $rootScope.Envato.API.Path.Private + "get-user-vitals.php",
                        Transactions : $rootScope.Envato.API.Path.Private + "get-earnings-and-sales-by-month.php",
                        Statement : $rootScope.Envato.API.Path.Private + "get-statement.php",
                        Sales : $rootScope.Envato.API.Path.Private + "get-recent-sales.php",
                        Account : $rootScope.Envato.API.Path.Private + "get-account-information.php"
                    },

                    Item : {

                        Purchase : {
                            Information : $rootScope.Envato.API.Path.Private + "get-purchase-information.php",
                            Download : $rootScope.Envato.API.Path.Private + "get-item-download-url.php"
                        }
                    }
                },

                Public : {

                    API : {

                        Releases : $rootScope.Envato.API.Path.Public + "get-api-releases.php"
                    },

                    Blog : {

                        Posts : $rootScope.Envato.API.Path.Public + "get-blog-posts.php",
                        Threads : {

                            Active : $rootScope.Envato.API.Path.Public + "get-active-threads.php",
                            Status : $rootScope.Envato.API.Path.Public + "get-thread-status.php"
                        },
                    },

                    Collections : $rootScope.Envato.API.Path.Public + "get-collections.php",

                    Items : {

                        Count : $rootScope.Envato.API.Path.Public + "get-number-of-items.php",
                        Popular : $rootScope.Envato.API.Path.Public + "get-popular-items.php",
                        Featured : $rootScope.Envato.API.Path.Public + "get-featured-items.php",

                        New : {

                            Marketplace : $rootScope.Envato.API.Path.Public + "get-new-items-from-market.php",
                            User : $rootScope.Envato.API.Path.Public + "get-new-items-from-user.php",
                            Random : $rootScope.Envato.API.Path.Public + "get-random-new-items.php"
                        },

                        Information : $rootScope.Envato.API.Path.Public + "get-item-information.php",
                        Prices : $rootScope.Envato.API.Path.Public + "get-item-prices.php"
                    },

                    Users : {

                        Total : $rootScope.Envato.API.Path.Public + "get-total-users-count.php",
                        Information : $rootScope.Envato.API.Path.Public + "get-user-information.php",
                        Items : {
                            Count : $rootScope.Envato.API.Path.Public + "get-user-items-by-site.php"
                        }
                    },

                    Search : $rootScope.Envato.API.Path.Public + "get-search-results.php"
                }
            }
        }
    };

    $rootScope.$safeApply = function($scope, fn) {

        fn = fn || function() {};

        if($scope.$$phase) {
            fn();
        } else {
            $scope.$apply(fn); 
        };
    };

}]); 
```

但这是一团糟，我想知道是否有更好的方法，或者 AngularJS 有一些其他很棒的东西可以帮助我做类似的事情:)

**编辑：**显然，类似的东西`$rootScope.Envato.API.Path.Private`不起作用，但我添加了它，因为它更容易理解我想要做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:37:49.187

看起来您正在寻找服务。在 AngularJS 网站上查看[本指南](http://docs.angularjs.org/guide/dev_guide.services.creating_services)以了解如何创建它们。

```
Application.factory('Envato', function() {
  return {
    API: {
      Path: { ... },
    }
  };
});

Application.controller('SomeController', function($scope, Envato) {
  $scope.thing = Envato.API...;
}); 
```

# assembly - 布尔代数中的恒等元素是什么意思？

> ID：14816025
> 
> 赞同：1
> 
> 时间：2013-02-11T16:08:17.953
> 
> 标签：assembly, boolean, algebra

我正在阅读 Randa Hyde 的 The Art of Assembly Programming ( [http://www.ic.unicamp.br/~pannain/mc404/aulas/pdfs/Art%20Of%20Intel%20x86%20Assembly.pdf](http://www.ic.unicamp.br/~pannain/mc404/aulas/pdfs/Art%20Of%20Intel%20x86%20Assembly.pdf) )在书中达到了以下陈述：“P4 关于 • 的单位元是一，+ 是零。关于逻辑非，没有单位元。” 但我不完全明白它在说什么。有人可以帮我理解这句话吗？英语是我的第一语言，我通常可以阅读任何内容，但这有点令人困惑。我也知道普通代数，所以大部分对我来说并不新鲜。我知道普通代数中的加法和乘法恒等式是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:10:18.813

当您执行将标识元素作为操作数之一的操作（加法、乘法）时（0 表示加法，1 表示乘法），您会得到第二个操作数作为结果

```
x + 0 = x
y * 1 = y 
```

所以对于布尔代数

```
x OR 0 <=> x

truth table
x | 0 | x or 0 | x OR 0 <=> x
1 | 0 |    1   |         1
0 | 0 |    0   |         1

y AND 1 <=> y

truth table
y | 1 | y and 1 | y and 1 <=> y
1 | 1 |    1    |          1
0 | 1 |    0    |          1 
```

布尔否定是一元运算符（只有一个操作数），因此它没有标识值，因为它没有任何意义。

# android - froyo 开始出现问题

> ID：14816026
> 
> 赞同：-1
> 
> 时间：2013-02-11T16:08:27.593
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-2.2-froyo

做学徒时，一家公司告诉我为 Jelly-bean 开发一个应用程序，但现在他们突然想把我的一些工作移植到 froyo 上。

我想重新开始，但我什至无法开始，更改`TextView`文本会让我失望`nullPointerException`：

```
package com.videopleyer22ics;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.TextView;

    public class MainActivity extends Activity
    {
        TextView tv1;

        @Override
        protected void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);

            tv1 = (TextView) findViewById(R.id.texto1);

            setContentView(R.layout.activity_main);

            tv1.setText("Text changed");
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }

} 
```

这是 Logcat 转储

```
02-11 14:52:34.058: E/AndroidRuntime(510): FATAL EXCEPTION: main
02-11 14:52:34.058: E/AndroidRuntime(510): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.videopleyer22ics/com.videopleyer22ics.MainActivity}: java.lang.NullPointerException
02-11 14:52:34.058: E/AndroidRuntime(510):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
02-11 14:52:34.058: E/AndroidRuntime(510):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-11 14:52:34.058: E/AndroidRuntime(510):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-11 14:52:34.058: E/AndroidRuntime(510):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-11 14:52:34.058: E/AndroidRuntime(510):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-11 14:52:34.058: E/AndroidRuntime(510):  at android.os.Looper.loop(Looper.java:123)
02-11 14:52:34.058: E/AndroidRuntime(510):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-11 14:52:34.058: E/AndroidRuntime(510):  at java.lang.reflect.Method.invokeNative(Native Method)
02-11 14:52:34.058: E/AndroidRuntime(510):  at java.lang.reflect.Method.invoke(Method.java:521)
02-11 14:52:34.058: E/AndroidRuntime(510):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-11 14:52:34.058: E/AndroidRuntime(510):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-11 14:52:34.058: E/AndroidRuntime(510):  at dalvik.system.NativeStart.main(Native Method)
02-11 14:52:34.058: E/AndroidRuntime(510): Caused by: java.lang.NullPointerException
02-11 14:52:34.058: E/AndroidRuntime(510):  at com.videopleyer22ics.MainActivity.onCreate(MainActivity.java:54)
02-11 14:52:34.058: E/AndroidRuntime(510):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-11 14:52:34.058: E/AndroidRuntime(510):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
02-11 14:52:34.058: E/AndroidRuntime(510):  ... 11 more 
```

我只是不知道该怎么做，因为它在 ICS 上运行良好，我需要帮助。您知道将 ICS 项目移植到 froyo 的方法吗？我不介意从头再来一次。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T16:10:43.160

`setContentView()`交换和的顺序`findViewById()`。您正试图`TextView`在主布局膨胀之前找到。

# java - 非单调插值方法

> ID：14816027
> 
> 赞同：1
> 
> 时间：2013-02-11T16:08:27.783
> 
> 标签：java, algorithm, interpolation, spline

我目前正在尝试通过多个维度对曲线进行插值（仅涉及在每个维度上单独使用插值方法），并且我对 PCHIP（分段三次厄米插值多项式）有点困惑。PCHIP 是否仅适用于单调数据？我感兴趣的数据一定是非单调的，所以我使用了 Catmull-Rom 样条，但 PCHIP 似乎更适合我的数据，但现成的 PCHIP im 使用仅适用于严格增加/减少数据. 我想编写自己的 PCHIP 插值算法（在 java 中），但我似乎无法在网络上的任何地方找到底层算法。我想我的问题是

1) PCHIP 是否适用于非单调数据？

2）如果没有，是否有任何其他通过控制点的插值方法可以使用？

3) 有谁知道我在哪里可以找到 PCHIP 背后的算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:21:55.963

我不知道 PCHIP 是一个既定术语，但对我来说，这个名字暗示了*任何* [使用三次 Hermite 多项式进行插值](https://en.wikipedia.org/wiki/Cubic_Hermite_spline)，即一个更通用的术语，其中包括 Catmull-Rom 等。[与普通样条插值](https://en.wikipedia.org/wiki/Spline_interpolation)的主要区别似乎是明确计算的切线。两者都可能适用于您的情况，因为两者都将通过定义点，并且都不会强制执行单调性。如果这些是您心中的概念，维基百科会为您提供一些描述和一些参考资料。如果不是，您应该更具体地了解您阅读该术语的上下文，因为该上下文可能会提供更具体的定义。

# python - TCP 服务器选项在 RPi 上运行的程序中不起作用

> ID：14816028
> 
> 赞同：1
> 
> 时间：2013-02-11T16:08:28.530
> 
> 标签：python, tcp, raspberry-pi, tcpserver, ais

我在我的 RPi 上运行了这个程序（sudo ais_rx.tcp -d --tcp）：

[https://github.com/chgans/gr-ais](https://github.com/chgans/gr-ais)

我已经让它运行并可以创建一个输出文件。我无法使 TCP 服务器选项正常工作。Netstat --tcp 什么也没显示。Telnet in...连接被拒绝。我认为可能存在代码错误：

```
conns = [] #active connections
if options.tcp is True:
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.bind(('', 9987))
    s.listen(1)
    s.setblocking(0)
try:
    while 1:
        if options.tcp is True:
            try:
                conn, addr = s.accept()
                conns.append(conn)
                print "Connections: ", len(conns)
            except socket.error:
                pass

        if not queue.empty_p():
            while not queue.empty_p():
                msg = queue.delete_head() # Blocking read
                sentence = msg.to_string()
                if options.tcp is True:
                    for conn in conns[:]:
                        try:
                        conn.send(sentence + "\n")
                        except socket.error:
                        conns.remove(conn)
                            print "Connections: ", len(conns)
                else:
                    print sentence
                    sys.stdout.flush()

        elif runner.done:
            if options.tcp is True:
                s.close()
            break
        else:
            time.sleep(0.1) 
```

我能想到的唯一另一个错误是，如果没有数据（我的办公室里没有），那么套接字永远不会被绑定。我已经尝试手动输入 ip 引号，引号外，为其分配一个变量...如果它在数据可用之前无法连接，我将如何更改它？我正在考虑删除：

```
if not queue.empty_p():
            while not queue.empty_p(): 
```

这样无论队列中是否有数据，它都会做其他事情？我只是在这一点上随机猜测。谢谢。任何帮助将不胜感激。

# java - yammer @Timed 使值为零

> ID：14816029
> 
> 赞同：7
> 
> 时间：2013-02-11T16:08:28.673
> 
> 标签：java, spring, annotations, metrics, yammer

这是我使用 yammer 计时注释的斗争的后续行动，如此处[所述](https://stackoverflow.com/questions/14739159)。

我的弹簧上下文文件很简单：

```
<metrics:annotation-driven /> 
```

我有以下课程：

```
import com.yammer.metrics.annotation.ExceptionMetered;
import com.yammer.metrics.annotation.Metered;
import com.yammer.metrics.annotation.Timed;

...

@Component
public class GetSessionServlet extends HttpServlet {

  private final static Logger log = LoggerFactory.getLogger(GetSessionServlet.class);

  @Override
  public void init(final ServletConfig config) throws ServletException {
    super.init(config);
    SpringBeanAutowiringSupport.processInjectionBasedOnServletContext(
            this, config.getServletContext());
  }

  @Override
  @Timed(name = "get-session", rateUnit = TimeUnit.MILLISECONDS)
  @Metered
  @ExceptionMetered(name = "get-session-failures", rateUnit = TimeUnit.MILLISECONDS)
  public void doGet(final HttpServletRequest req,
          final HttpServletResponse resp) throws ServletException, IOException {
    final String sessionId = req.getParameter("sessionId");
    final String fields = req.getParameter("fields");
    final String format = req.getParameter("format");
    if (StringUtils.isEmpty(sessionId)) {
      resp.getWriter().write("sessionId parameter missing!\n");
      return;
    }
    ...
  } 
```

我在本地运行我的应用程序`mvn clean tomcat7:run`，然后连接 jconsole。

在 MBeans 选项卡中，我可以看到一个条目，其中包含我的`GetSessionServlet`类的包名称以及三个子文件夹`doGet`（用于 @Metered 数字）、get-session 和 get-session-failures。

但是，无论我调用多少次 servlet，上面子文件夹中的所有值都保持为零。我错过了什么？此外，*任何*有关这些计量指标的文档比[官方文档](http://metrics.codahale.com/manual/spring/)更详细，我们将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T03:10:06.093

我想我得到了这个工作。

我注意到的第一件事是示例 spring 上下文文件的 schemaLocation 属性中的 URI： [http](http://www.yammer.com/schema/metrics/metrics.xsd) ://www.yammer.com/schema/metrics/metrics.xsd 返回 404 错误。

我用谷歌搜索了这个问题，看看是否有人抱怨架构无法访问并找到了这个线程，github.com/codahale/metrics/issues/322，其中用户评论说metrics-spring模块已从核心指标存储库中删除并移至：github.com/ryantenney/metrics-spring。

按照该网站上的示例，我从我的 pom 中删除了旧的 metrics-spring 依赖项并添加了以下内容：

```
 <dependency>
      <groupId>com.ryantenney.metrics</groupId>
      <artifactId>metrics-spring</artifactId>
      <version>2.1.4</version>
  </dependency> 
```

然后我更新了 spring-context.xml 文件中的 xmlns 声明：

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:metrics="http://www.ryantenney.com/schema/metrics"
       xsi:schemaLocation="
           http://www.ryantenney.com/schema/metrics 
           http://www.ryantenney.com/schema/metrics/metrics.xsd 
           ...other schemas..."> 
```

添加了注释驱动元素：

```
<metrics:annotation-driven proxy-target-class="true" /> 
```

我启用了 proxy-target-class 以使基于类的自动装配工作。

在 bean 中，我想 Time 添加了 @Timed 注释和 @PostConstruct 方法，以使 ConsoleReporter 每 10 秒转储一次统计信息：

```
@PostConstruct
public void init() {
    ConsoleReporter.enable(10, TimeUnit.SECONDS);    
} 

@Timed
public void doService(...) {
    .... do stuff ....
} 
```

然后我启动了我的 webapp .... 并从 sax 解析器解析 spring context.xml 文件中得到了一个令人讨厌的错误。

似乎 www.ryantenney.com/schema/metrics/metrics.xsd 404s 也是如此！

解决方法很简单，但是，我从 github 存储库下载了 xsd： [https ://github.com/ryantenney/metrics-spring/blob/master/src/main/resources/com/ryantenney/metrics/spring/配置/metrics-3.0.xsd](https://github.com/ryantenney/metrics-spring/blob/master/src/main/resources/com/ryantenney/metrics/spring/config/metrics-3.0.xsd)

然后在我的 maven 项目的 src/main/resources/META-INF 目录中添加以下文件：

```
META-INF/
    - spring.schemas
    - xsd/
         - metrics.xsd 
```

其中metrics.xsd是从github下载的xsd文件，spring.schemas是一个文本文件，包含：

```
http\://www.ryantenney.com/schema/metrics/metrics.xsd=META-INF/xsd/metrics.xsd 
```

spring.schemas 文件在启动时由 spring 读取，并告诉它从本地文件中拉下 xsd。

完成上述操作后，我能够成功启动我的应用程序并点击使用服务方法的端点。

看着控制台，我确实看到每 10 秒转储一次以下内容：

```
com.sample.service.MyServiceClass:
doService:
    count = 8
    mean rate = 0.27 calls/s
    1-minute rate = 0.23 calls/s
    5-minute rate = 0.21 calls/s
    15-minute rate = 0.20 calls/s
    min = 0.13ms
    max = 19.59ms
    mean = 2.59ms
    stddev = 6.87ms
    median = 0.18ms 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T18:19:33.997

[我在这里](https://groups.google.com/forum/#!topic/metrics-user/CJ4CberZu9Y)发布了一个类似的问题，并没有进一步深入。有人向我指出，我可能得到 0 个数字，因为“当从类本身调用该方法时，Spring 无法拦截带注释的方法。” 虽然我之前读过那条评论，但我并没有意识到我处于这种情况，但是查看 HttpServlet 的源代码，我确实看到了像 doHead 这样调用 doGet 的方法。

虽然这个限制本身就是一个挫折，但我继续从我的 doGet 调用另一个类中的方法，看看我是否可以以这种方式执行计时（麻烦但愿意尝试一下）：

```
import org.springframework.stereotype.Component;
import com.yammer.metrics.annotation.Metered;
import com.yammer.metrics.annotation.Timed;

@Component
public class Delay {
  //      @Metered
  @Timed
  public void time() {
    System.out.println("Timing...");
    try {
      Thread.sleep(1000);
    } catch (final InterruptedException e) {
      e.printStackTrace();
    }
  }
} 
```

然而，从我的 servlet getter 调用这个方法如下：

```
public void doGet(final HttpServletRequest req,
      final HttpServletResponse resp) throws ServletException, IOException {

  final Delay delay = new Delay().time(); 
```

无论我执行多少次，Delay.time 方法仍然没有显示任何非空数字。

**在这一点上，我将采取挑衅性的立场，即由于这些注释带来的任何限制以及缺乏完整的文档和有用的代码示例，这些注释没有用处，至少在计时 servlet 的上下文中是这样。**

我确实希望被证明是错误的，并且很乐意改变我的投票以接受另一个答案，因为这些注释看起来很有希望并且比 Metrics.newTimer 和类似方法更实用。

# javascript - 禁用 iPad Safari 浏览器中的“复制”功能

> ID：14816031
> 
> 赞同：7
> 
> 时间：2013-02-11T16:08:39.173
> 
> 标签：javascript, jquery, ios, ipad, mobile-safari

在 Safari`iPad`中`iOS6`，我想选择文本，然后使用 JavaScript 突出显示它（更改背景颜色）。但是，当我进行文本选择时，会自动弹出“复制”选项。我将如何禁用此“复制”选项？我可以在除`iPad`Safari 之外的所有其他浏览器上使用它。

这可能吗？我应该怎么办？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-11T16:26:57.763

> 如果要禁用通过在 iPhone 或 iPad 上的 Safari 中按住元素调用的“剪切/复制/粘贴”，请使用 css：

```
-webkit-user-select: none; 
```

来自[移动 Safari 上禁用“保留复制”的](http://bencollier.net/2010/04/disabling-hold-to-copy-on-mobile-safari/)信息，由 Ben Collier 发布

* * *

> -webkit-tap-highlight-color 属性接受任何标准 CSS 颜色值，但您可能需要提供 rgba 值以控制 alpha 透明度。禁用点击突出显示就像将 alpha 值设置为 0 一样简单，如下所示：

```
container {
  -webkit-tap-highlight-color: rgba(0,0,0,0);
} 
```

来自快速提示的信息：自定义由 Ryan Grove 发布[的 Mobile Safari 点击突出显示颜色](http://www.yuiblog.com/blog/2010/10/01/quick-tip-customizing-the-mobile-safari-tap-highlight-color/)

* * *

所以我会使用 css 而不是 javaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-29T13:41:00.920

除了接受的答案；

将提到的属性仅提供给载体 div 或 body 元素，持有一些对象（图像和 SVG 元素等）仍然会显示工具提示。

```
* {
-webkit-user-select: none;
-webkit-tap-highlight-color: rgba(0,0,0,0);
} 
```

将属性赋予所有元素 (*) 对我有用。

* * *

另外我猜用户选择的文本输入有问题/错误，所以你可能想排除它。

```
input {
-webkit-user-select: auto;
} 
```

# html - 使用单个复选框切换多个密码输入

> ID：14816034
> 
> 赞同：0
> 
> 时间：2013-02-11T16:08:44.070
> 
> 标签：html, css, forms, checkbox, radio-button

好的，我想做的是用一个复选框切换 3 个密码输入框...单击复选框时，我希望在输入框中显示所有 3 个密码。反正有适应这个吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!--
  Created using jsbin.com
  Source can be edited via http://jsbin.com/opafo3/1/edit
-->
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<title>Sandbox</title>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<style type="text/css" media="screen">
body { background-color: #000; font: 16px Helvetica, Arial; color: #fff; }
</style>

<style id="jsbin-css">

</style>
</head>
<body>
  <p><input id="show" type="checkbox" /><label for="show">show password</label></p>
  <p><input id="txtpassword" type="password" /></p>
<script>
$(function(){
  $("#show").click(function(){
    if( $("#show:checked").length > 0 ){
      var pswd = $("#txtpassword").val();
      $("#txtpassword").attr("id","txtpassword2");
      $("#txtpassword2").after( $("<input id='txtpassword' type='text'>") );
      $("#txtpassword2").remove();
      $("#txtpassword").val( pswd );
    }
    else{
      var pswd = $("#txtpassword").val();
      $("#txtpassword").attr("id","txtpassword2");
      $("#txtpassword2").after( $("<input id='txtpassword' type='password'>") );
      $("#txtpassword2").remove();
      $("#txtpassword").val( pswd );
    }
  });
})
</script>

</body>
</html> 
```

我已经尝试了几件事，但一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:43:05.097

我遇到了同样的问题，并编写了一个简单的 jQuery 插件来处理它并将其发布到[github](https://github.com/cbaigorri/password-toggle)。

在您的情况下，用法类似于：

```
<input type="password" id="inputGroup1">
<input type="password" id="inputGroup2">
<label>
  <input type="checkbox" class="input-mask" data-toggle='["inputGroup1", "inputGroup2"]'>Toggle Password
</label>
<script>
$('.input-mask').passwordToggle();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:29:30.730

令人惊讶的是，您无法通过互联网获得该信息。但是，是的，这是使用 Jquery 1.9.1 的代码

```
<html>
    <head>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                $("#show").bind("click",function(){
                    $(".txtPassword").each(function(e){
                        if($($(".txtPassword")[e]).attr("type")=="password"){
                            $($(".txtPassword")[e]).attr("type","text");
                        }
                        else if($($(".txtPassword")[e]).attr("type")=="text"){
                            $($(".txtPassword")[e]).attr("type","password");
                        }
                    })
                })

            });
        </script>
    </head>
    <body>
        <p><input id="show" type="checkbox" /><label for="show">show password</label></p>
        <p><input class="txtpassword" type="password" /></p>
        <p><input class="txtpassword" type="password" /></p>
        <p><input class="txtpassword" type="password" /></p>
    </body>
</html> 
```

将您的密码的 id 更改为 class。此代码可以处理所有类型为 txtpassword 的密码/文本类型的元素

# android - Android：AsyncTask，onPostExecute 在 doInBackground 完成之前启动

> ID：14816035
> 
> 赞同：0
> 
> 时间：2013-02-11T16:08:45.123
> 
> 标签：android, camera, android-asynctask

几个小时前我遇到了这个问题（[Android：AsyncTask，当其他任务启动时我的第一个任务还没有完成](https://stackoverflow.com/questions/14811810/android-asynctask-my-1st-task-has-not-finished-when-the-other-starts)）我把它当作解决但后来我意识到我有一个类似的问题。

这是我的主要课程“GameActivity”

```
 public void mainmethod()
                    Log.w("GAMEACTIVITY","actionup");
                    myAsyncRunnable mar = new myAsyncRunnable(GameActivity.this);
                    mar.execute("fire");

public void doPhotoTask() {
    PhotoTask photoTask = new PhotoTask(camera,surfaceCamera,isPreview,holder,GameActivity.this);
    photoTask.execute(null);
} 
```

在 myAsyncRunnable.fire() 中，我有一个循环改变了 gameActivity 中 ImageView 图像的 10 倍以上。我希望在更改最后一张图像时启动 photoTask 这里 myAsyncRunnable 中的代码扩展了 AsyncTask

```
@Override
protected Void doInBackground(String... params) {
fire();
return null;
}

public void fire() {
        final ImageView image3 = (ImageView) gameactivity.findViewById(R.id.imageView3);
        final int drawables[] = new int[] {R.drawable.fire1,R.drawable.fire2,R.drawable.fire3,R.drawable.fire4,R.drawable.fire5,R.drawable.fire6,R.drawable.fire7,R.drawable.fire8,R.drawable.fire9,R.drawable.fire10,R.drawable.fire11,R.drawable.fire12,R.drawable.fire13,R.drawable.fire14,R.drawable.fire15,R.drawable.fire16};
        for (int i=0;i<drawables.length;i++) {
            final int j=i;
            Runnable runnable = new Runnable() {
                @Override
                public void run() {
                    image3.setImageResource(drawables[j]);
                     Log.w("GAMEACTIVITY","image"+j);
                }
            };
            gameactivity.handler.postDelayed(runnable, 200*j);
        }
    }

@Override
protected void  onPostExecute(Void result)  {
    Log.w("GAMEACTIVITY","ONPOSTEXECUTE");
    gameactivity.doPhotoTask();
} 
```

在 PhotoTask

```
@Override
    protected Void doInBackground(Boolean... params) {
         camera.takePicture(null,null, myPictureCallback_JPG);
            Log.w("GAMEACTIVITY","TAKEPICTURE");

            return null;
    } 
```

我的原木猫

```
02-11 16:03:32.920: W/GAMEACTIVITY(7750): actionup
02-11 16:03:33.010: W/GAMEACTIVITY(7750): image0
02-11 16:03:33.010: W/GAMEACTIVITY(7750): ONPOSTEXECUTE
02-11 16:03:33.030: E/QualcommCameraHardware(99): takePicture(479)
02-11 16:03:33.100: E/QualcommCameraHardware(99): rawsize = 460800 cbcr offset =307200
02-11 16:03:33.110: E/QualcommCameraHardware(99): takePicture: X
02-11 16:03:33.110: W/GAMEACTIVITY(7750): TAKEPICTURE
02-11 16:03:33.120: E/mm-camera(99): camera_ops_start, CAMERA_OPS_CAPTURE_AND_ENCODE mode 1
02-11 16:03:33.350: W/GAMEACTIVITY(7750): image1
02-11 16:03:33.490: W/GAMEACTIVITY(7750): image2
02-11 16:03:33.780: W/GAMEACTIVITY(7750): image3
02-11 16:03:33.880: W/GAMEACTIVITY(7750): image4
02-11 16:03:34.110: W/GAMEACTIVITY(7750): image5
02-11 16:03:34.250: W/GAMEACTIVITY(7750): image6
02-11 16:03:34.490: W/GAMEACTIVITY(7750): image7
02-11 16:03:34.680: W/GAMEACTIVITY(7750): image8
02-11 16:03:34.880: W/GAMEACTIVITY(7750): image9
02-11 16:03:35.050: W/GAMEACTIVITY(7750): image10
02-11 16:03:35.110: E/QualcommCameraHardware(99): receiveRawPicture: E
02-11 16:03:35.280: W/GAMEACTIVITY(7750): image11
02-11 16:03:35.440: W/GAMEACTIVITY(7750): image12
02-11 16:03:35.500: E/QualcommCameraHardware(99): address of Jpeg 0 encoded buf 1085800448 Jpeg Heap base 1085800448
02-11 16:03:35.500: W/GAMEACTIVITY(7750): FIRST
02-11 16:03:36.470: W/GAMEACTIVITY(7750): INTENT
02-11 16:03:36.580: W/GAMEACTIVITY(7750): image13
02-11 16:03:36.710: W/GAMEACTIVITY(7750): image14
02-11 16:03:36.800: W/GAMEACTIVITY(7750): image15
02-11 16:03:37.320: W/GAMEACTIVITY(7750): SURFACEDESTROYED 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:38:07.367

所以问题是你正在为未来的执行计时未来的可运行，然后从 doInBackground 返回 - 这会立即激活你的 onPostExecute 函数。

解决您的问题的方法不是使用 onPostExcute 而是使用您想要在所有其他人之后运行的代码对另一个 Runnable 计时，因为它们都在同一个线程上运行，这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:21:45.680

试试这个小小的改变，它可能会对你有所帮助。

```
Runnable runnable = new Runnable() {
                @Override
                public void run() {
                    image3.setImageResource(drawables[j]);
                     Log.w("GAMEACTIVITY","image"+j);
            gameactivity.handler.postDelayed(this, 200*j);
                }
            };
          gameactivity.handler.postDelayed(runnable, 10); 
```

# vba - 在没有 .Select 的情况下在 Word 2010 中复制形状？

> ID：14816041
> 
> 赞同：3
> 
> 时间：2013-02-11T16:09:13.987
> 
> 标签：vba, ms-word, copy-paste, word-2010

是否可以在不使用 Word 2010 的情况下复制形状`.Select`？根据[开发中心](http://msdn.microsoft.com/en-us/library/office/ff835500.aspx)的说法，该`Anchor`属性返回形状的锚定范围。这可能是前进的道路吗？但是，下面的代码会返回错误。

```
Sub createShape()
    Set myShape = ActiveDocument.Shapes.AddShape(msoShapeRectangle, 1, 1, 1, 1)
    myShape.Anchor.Copy
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:21:34.820

虽然似乎无法在不选择形状的情况下复制形状，但可以在不选择形状的情况下*复制*形状（这是我首先想要复制它的原因）。下面的代码给了我我正在寻找的东西：

```
Sub createShape()
    Set myshape = ActiveDocument.Shapes.AddShape(msoShapeRectangle, 100, 100, 100, 100)
    Set anothershape = myshape.Duplicate
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:36:47.370

如果你有你要找的东西，那就太好了，但你可以通过复制形状锚定到的段落（或范围）来复制形状。例如：

```
Sub createShape()
   Dim myShape As Shape, myRange As Range

   Set myShape = ActiveDocument.Shapes.AddShape(msoShapeRectangle, 10, 10, 10, 10)
   Set myRange = myShape.Anchor.Paragraphs(1).Range
   myRange.Copy
End Sub 
```

然而，这样做的问题是它会复制段落中的任何文本，你已经将它锚定到*或者*你的锚点可能在一个表格中，这可能会导致奇怪的事情发生。

您还可以在插入后将形状更改为内联形状，使其适合文本并具有更明显的范围，因为锚点有移动的习惯并且通常不可预测。

# c# - CRM 2011 LINQ：“位置”条件无效。实体成员正在调用无效的属性或方法

> ID：14816046
> 
> 赞同：4
> 
> 时间：2013-02-11T16:09:34.513
> 
> 标签：c#, linq, c#-4.0, dynamics-crm-2011, dynamics-crm

我正在运行以下 LINQ 查询，但它抛出一个错误，提示“无效的 'where' 条件。实体成员正在调用无效的属性或方法。”

谁能建议我为什么会这样。如果我从中删除`conn.Record2Id.LogicalName.Equals("account")`它`WHERE`会返回结果，但我可以看到 LogicalName = account in `quick view`。

```
var connections = (from conn in context.CreateQuery<Connection>()                              
                  where (conn.Record1Id.Id.Equals(incidentId) 
                  && conn.Record2Id.LogicalName.Equals("account") 
                  && conn.StateCode == 0)
                  select conn).FirstOrDefault(); 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T16:11:08.983

CRM 的 LINQ 转换器无法处理该`.Equals()`方法。

将其更改为`conn.Record2Id.LogicalName == "account"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:31:48.357

尝试这个：

```
var connections = (from conn in context.CreateQuery<Connection>()                              
              where conn.Record1Id != null 
              && conn.Record1Id.Id == incidentId 
              && conn.Record2Id != null 
              && conn.Record2Id.LogicalName == "account" 
              && conn.StateCode.Value == 0
              select conn).FirstOrDefault(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-07T16:07:52.263

有趣但试试这个:)

```
var connections = (from conn in context.CreateQuery<Connection>()                              
                  where (conn.Record1Id == new EntityReference("account",incidentId) 
                  && conn.StateCode == 0)
                  select conn).FirstOrDefault(); 
```

# mysql - MySQL 5.6 工作台和 my.ini

> ID：14816048
> 
> 赞同：1
> 
> 时间：2013-02-11T16:09:36.393
> 
> 标签：mysql

我最近在 Windows 7 PC 上安装了 MySQL 5.6。它确实有 5.5 版。当我打开 Workbench 并单击选项文件时，它告诉我它仍在查看我的 MySQL 5.5 文件夹中的 my.ini。我如何告诉 5.6 它的 my.ini 在它自己的文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:40:08.783

创建一个新的服务器实例并将其指向正确的文件夹。

# mysql - 插入整数，mysql

> ID：14816051
> 
> 赞同：0
> 
> 时间：2013-02-11T16:09:54.957
> 
> 标签：mysql, numbers, int

我试图插入一个数字，但遇到了一些麻烦。

我从一个不同的网站获得了这个数字，所以我认为它是一个字符串，但我尝试作为字符串插入，但没有结果......

```
$ljuga_in = "INSERT INTO lplayer VALUE( now(), '{$player[$m][2]}','{$player[$m][3]}', '{$player[$m][1]}' );"; 
```

当我`echo player[$m][2];`

我得到了下一个：`160.000`

但这不是 160，是 160000，所有能拯救我的都是 1，即使我将字段作为具有 15 个数字的数字放在数据库中，我也得到 1 作为结果。我不知道如何解决这个问题，任何帮助都会考虑。

谢谢转发！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:32:11.033

也许你的字符串不是你想要的：尝试回显查询，看看它是否有意义。考虑将查询字符串更改为以下内容：

我假设你使用 php？

```
$ljuga_in = "INSERT INTO lplayer VALUE( now(), '".$player[$m][2]."','".$player[$m][3]."', '".$player[$m][1]."' );"; 
```

还要确认 mysql 表中字段的数据类型。如果您尝试将字符串（非数字）写入数据类型 int 的字段，您将无法获得想要保存在表中的内容

最后，你的查询容易受到 mysql 注入攻击......你应该修复它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:32:14.003

如果你用这个替换你的字符串，它会起作用吗？

```
$ljuga_in = 'INSERT INTO lplayer VALUE( now(), "'.$player[$m][2].'","'.$player[$m][3].'", "'.$player[$m][1].'" )'; 
```

# c# - LINQ合并两个列表并按时间戳分组

> ID：14816053
> 
> 赞同：0
> 
> 时间：2013-02-11T16:09:56.477
> 
> 标签：c#, asp.net, linq

早上好，我有两个列表需要合并在一起并从中创建一个数据表，我有以下代码块：

```
private static DataTable GetDataTable(IList<DataValue> listOneDataValues,
                                            IList<DataValue> listTwoDataValues)
      {
         var dataTable = new DataTable();
         dataTable.Columns.Add("ColumnFromListOne");
         dataTable.Columns.Add("ColumnFromListTwo");
         dataTable.Columns.Add("TimeStamp");

         //Group the lists together
         var query = (from listOne in listOneDataValues
                      from listTwo in listTwoDataValues
                      let columnFromListOne= listOne.DoubleValue
                      let columnFromListTwo= listTwo.DoubleValue
                      let timestamp = listOne.TimeStamp
                      where listOne.TimeStamp == listTwo.TimeStamp
                      select new {ColumnFromListTwo = columnFromListOne, ColumnFromListOne = columnFromListTwo, Timestamp = timestamp});

         foreach(var q in query)
            dataTable.Rows.Add(q.ColumnFromListOne, q.ColumnFromListTwo, q.TimeStamp);

         return dataTable;
      } 
```

问题是这两个列表包含的时间戳相差几秒钟，而且它们根本不对齐，所以即使每个列表包含 200 多条记录，我的最终结果也会在数据表中出现一条或零条记录。我对 LINQ 很不满意，希望能在正确的方向上有所帮助。我想我需要在分组之前插入时间戳，但我想知道做这样的事情的最佳实践模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T16:14:19.870

您可以将您的`where`声明更改为

`where Math.Abs((listOne.TimeStamp - listTwo.TimeStamp).TotalSeconds) < 5`

这会将两次相差 5 秒的时间视为“相同”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T16:19:07.460

您需要确定将两个时间戳称为“相等”的适当阈值 - 知道阈值太大会导致误报，阈值太小会阻止某些记录加入。

从那里只需将您的查询更改为

```
 int threshold = 5;
     //Group the lists together
     var query = (from listOne in listOneDataValues
                  from listTwo in listTwoDataValues
                  where Math.Abs(
                                    (listOne.TimeStamp - listTwo.TimeStamp)
                                     .TotalSeconds
                                ) <= threshold
                  select new {
                                 ColumnFromListTwo = listTwo.DoubleValue,
                                 ColumnFromListOne = listOne.DoubleValue, 
                                 Timestamp = listOne.TimeStamp
                             }); 
```

# html - 如何在css中设置垂直标签的高度？

> ID：14816056
> 
> 赞同：0
> 
> 时间：2013-02-11T16:10:04.070
> 
> 标签：html, css, menu, tabs

我有一个包含垂直选项卡的菜单，但我希望它具有固定大小，无论内部内容的长度如何。现在选项卡会根据选项卡内的内容自动调整大小，使其看起来不均匀。

**html:**

```
 <ul class="sf-menu sf-vertical" id="example">
            <li class="current">
             <a href="#a">EMPLOYEE INFROMATION</a>
             <ul>
              <li>
               <a href="#aa">menu item that is quite long</a>
                      </li>
              <li class="current">
                <a href="#ab">menu item</a>
             <ul>
             <li class="current"><a href="#">menu item</a></li>
               <li><a href="#aba">menu item</a></li>
               <li><a href="#abb">menu items</a></li>
               <li><a href="#abc">menu item</a></li>
             <li><a href="#abd">menu item</a></li>
            </ul>
            </li>
            <li>
            <a href="#">menu item</a> 
```

**CSS：**

```
/*** ESSENTIAL STYLES ***/
      .sf-menu, .sf-menu * {
            margin:         0;
            padding:        0;
            list-style:     none;
       }
       .sf-menu {
            line-height:    1.0;
       }
       .sf-menu ul {
            position:       absolute;
            top:            -999em;
            width:          10em; /* left offset of submenus need to match (see             below) */
       }
       .sf-menu ul li {
            width:          100%;
        }
       .sf-menu li:hover {
            visibility:     inherit; /* fixes IE7 'sticky bug' */
       }
       .sf-menu li {
            float:          left;
            position:       relative;
        }
       .sf-menu a {
            display:        block;
            position:       relative;
        }
        .sf-menu li:hover ul,
        .sf-menu li.sfHover ul {
            left:           0;
            top:            2.5em; /* match top ul list item height */
            z-index:        99;
         }
         ul.sf-menu li:hover li ul,
         ul.sf-menu li.sfHover li ul {
         top:           -999em;
         }
         ul.sf-menu li li:hover ul,ul.sf-menu li li.sfHover ul {
         left:          10em; /* match ul width */
         top:           0;
          }
          ul.sf-menu li li:hover li ul,ul.sf-menu li li.sfHover li ul {
          top:          -999em;
          }
          ul.sf-menu li li li:hover ul,ul.sf-menu li li li.sfHover ul {
          left:         10em; /* match ul width */
          top:          0;
          }

/*** DEMO SKIN ***/
          .sf-menu {
          float:            left;
          margin-bottom:    1em;
           }
          .sf-menu ul {
          box-shadow: 2px 2px 6px rgba(0,0,0,.2);
          }
          .sf-menu a {
            border-left:    1px solid #fff;
            border-top:     1px solid #CFDEFF;
            padding:        .75em 1em;
            text-decoration:none;
           }
           .sf-menu a, .sf-menu a:visited  { /* visited pseudo selector so IE6 applies text colour*/
            color:          #13a;
           }
           .sf-menu li {
            background:     #BDD2FF;
           }
           .sf-menu li li {
            background:     #AABDE6;
           }
           .sf-menu li li li {
            background:     #9AAEDB;
           }
           .sf-menu li:hover, .sf-menu li.sfHover,.sf-menu a:focus, .sf-menu a:hover, .sf-menu a:active {
            background:     #CFDEFF;
            outline:        0;
           }

/*** arrows **/
        .sf-menu a.sf-with-ul {
            padding-right:  2.25em;
            min-width:      1px; /* trigger IE7 hasLayout so spans position accurately */
         }
       .sf-sub-indicator {
            position:       absolute;
            display:        block;
            right:          .75em;
            top:            1.05em; /* IE6 only */
            width:          10px;
            height:         10px;
            text-indent:    -999em;
            overflow:       hidden;
            background:     url('../images/arrows-ffffff.png') no-repeat -10px -100px; /* 8-bit indexed alpha png. IE6 gets solid image only */
           }
           a > .sf-sub-indicator {  /* give all except IE6 the correct values */
            top:            .8em;
            background-position: 0 -100px; /* use translucent arrow for modern browsers*/
           }
       /* apply hovers to modern browsers */
       a:focus > .sf-sub-indicator,
       a:hover > .sf-sub-indicator,
       a:active > .sf-sub-indicator,
       li:hover > a > .sf-sub-indicator,
       li.sfHover > a > .sf-sub-indicator {
       background-position: -10px -100px; /* arrow hovers for modern browsers*/
       }

     /* point right for anchors in subs */
       .sf-menu ul .sf-sub-indicator { background-position:  -10px 0; }
       .sf-menu ul a > .sf-sub-indicator { background-position:  0 0; }
       /* apply hovers to modern browsers */
       .sf-menu ul a:focus > .sf-sub-indicator,
       .sf-menu ul a:hover > .sf-sub-indicator,
       .sf-menu ul a:active > .sf-sub-indicator,
       .sf-menu ul li:hover > a > .sf-sub-indicator,
       .sf-menu ul li.sfHover > a > .sf-sub-indicator {
    background-position: -10px 0; /* arrow hovers for modern browsers*/
      } 
```

任何帮助，将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:18:02.440

我在这里为您创建了一个 jFiddle：http: [//jsfiddle.net/persianturtle/RfURY/](http://jsfiddle.net/persianturtle/RfURY/)

答案其实很简单。

我刚刚添加了一个类：

```
.current li {
height:50px;
} 
```

这控制所有菜单列表项的高度。

请用复选标记感谢我！

# php - 使用 PHP 使用从 Linux 上托管的 MySQL DB 查询的数据生成 .doc 格式的报告

> ID：14816058
> 
> 赞同：0
> 
> 时间：2013-02-11T16:10:08.360
> 
> 标签：php, mysql, export, .doc

我需要将Linux平台上运行的MySQL db中的查询数据导出为.doc和其他格式（如PDF）。为此，我需要一个像 FPDF 这样具有良好文档的类。已经尝试探索几个类，如 PHPWord、MsDocGenerator 等。然而，这些类的大量文档以及其中的可用方法不可用，我发现很难以 .doc 格式导出报告。

任何指向有据可查的类的指针，并且可能是关于它们的使用的很好的教程，对我都有很大的帮助。

（PS> 我没有使用任何 PHP 框架来构建这个应用程序。开发和部署环境将由 Linux 上的 PHP 5.x/MySQL/Apache 组成。因此可用的解决方案如[http://www.phplivedocx.org/articles/ Brief-introduction-to-phplivedocx/](http://www.phplivedocx.org/articles/brief-introduction-to-phplivedocx/)将无用，因为它们的先决条件是适应 Zend 框架）

谢谢，萨蒂亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:45:06.477

这看起来很有希望：[http ://www.phpdocx.com/](http://www.phpdocx.com/)

有据可查，已建立，多种格式。

# f# - 用于查找标签的自定义功能

> ID：14816059
> 
> 赞同：0
> 
> 时间：2013-02-11T16:10:11.460
> 
> 标签：f#, vim

当我按下 Ctrl+] 时，我可以使用 Vim 用来查找定义的机制吗？该文档似乎假设我设置了一个标签文件。我想提供类似的东西：给定当前缓冲区中的一行和一列，在那里获取单词，并返回定义该单词的文件名、行和列。

作为背景，我正在添加到 Vim F# 插件。我通过omnifunc和balloonexpr工作了omnicompletion和气球，现在我希望Ctrl+]在F#源文件中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:11:08.587

*您可以使用F#*`<C-]>`文件类型在缓冲区中本地重载映射并调用您自己的查找函数，但这只是部分和 hacky 解决方案，因为它忽略了所有其他与标​​签相关的功能（如等）更好地集成到 (可扩展和开放）标签系统。*`:tag`*

 *您需要为 F# 源代码生成*标签数据库。*格式很简单，见`:help tags-file-format`。默认标签程序*Exuberant Ctags*可以使用正则表达式进行扩展，但这可能只会产生对 F# 等复杂语言的近似解析。最好为它编写一个专用的可执行文件。（有先例，例如Java 的*jtags*，许多*标签侧边栏*插件也可以配置为使用自定义标签程序。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:22:01.243

嗯，最直接和最可靠的解决方案可能是[向 ctags 添加 F# 支持](http://ctags.sourceforge.net/EXTENDING.html)。

同时，您可以使用`:vim`递归搜索任意路径`<cword>`并使用`:copen`.*

# gwt - GWT - 如何有效地堆叠元素以使顶部的元素可点击？

> ID：14816060
> 
> 赞同：1
> 
> 时间：2013-02-11T16:10:16.250
> 
> 标签：gwt, z-index, visibility

我有一个带有一些按钮的 layoutPanel 和一个带有更多按钮的第二个布局面板。两个布局面板在位置上部分重叠。我希望能够隐藏一个并让另一个可见，以便可见的元素/小部件是可点击的。我怎样才能有效地做到这一点？该页面预计将在移动设备上查看，因此对于大量此类按钮/面板，效率很重要。

`setVisible()`首先，我尝试使用应该隐藏的面板上的内置。不幸的是，这只是隐藏了顶部面板。虽然您不再激活顶部面板上的按钮，但顶部面板仍会阻止您单击底部面板。

接下来，我尝试将 z-index与面板上的`widget.getElement().getStyle().setZIndex(indexInt)`一起使用。`setVisible(false)`这里只有面板的 z-index 发生了变化，但按钮没有。再次，底部面板被阻止被点击。我会将 z-index 设置传递给孩子，但这会导致许多 z-index 重新计算，我想避免任何性能损失。

最后，我考虑调整/移动面板的大小。把它排除在外。这里的问题是您必须让面板记住它的位置或大小。此外，简单地调整面板大小或移动面板可能会产生看不见的后果。

虽然最后两种方法**可以**工作，但我猜还有一种更高效、更优雅的方法。有什么建议么？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:17:10.723

假设 a `LayoutPanel`，您应该使用来[`setWidgetVisible`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/LayoutPanel.html#setWidgetVisible%28com.google.gwt.user.client.ui.Widget,%20boolean%29)隐藏小部件**及其***层*。

# plsql - 过程和打开游标

> ID：14816061
> 
> 赞同：0
> 
> 时间：2013-02-11T16:10:17.547
> 
> 标签：plsql

```
DECLARE
PROCEDURE create_rule(
      p_rule_type_key   IN VARCHAR2,
      p_key             IN VARCHAR2,
      p_activation      IN DATE,
      p_termination     IN DATE,
      p_description     IN VARCHAR2
    )
IS
   CURSOR cur_rules (pc_rule_type_key IN VARCHAR2, pc_key IN VARCHAR2)
   IS
      SELECT rule_type_key
      FROM ino_offers.rules
      WHERE rule_type_key = pc_rule_type_key
      AND key             = pc_key;
BEGIN
   OPEN cur_rules (p_rule_type_key, p_key);
   p_description2     IN VARCHAR2;
   FETCH cur_rules INTO p_description2;
   IF (cur_rules%NOTFOUND) THEN
      INSERT
      INTO rules
         (
            RULE_TYPE_KEY,
            KEY,
            ACTIVATION,
            TERMINATION,
            DESCRIPTION,
            CHANGED
         )
         VALUES
         (
            p_rule_type_key,
            p_key,
            p_activation,
            p_termination,
            p_description,
            SYSDATE
         );
   END IF;
   CLOSE cur_rules;
END;
BEGIN
   create_rule(?, ?, ?, ?, ?);
END; 
```

但我得到：

```
PLS-00103: Encountered the symbol "IN" when expecting one of the following:

   := . ( @ % ;
The symbol ":= was inserted before "IN" to continue. 
```

问题在这里：

```
OPEN cur_rules (p_rule_type_key, p_key);
       p_description2     IN VARCHAR2; 
```

什么是正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:06:02.760

嗨，你在开始后声明了 p_description2 IN VARCHAR2。你得到了以下错误。你将游标记录提取到 p_description2 变量中，所以它应该是 cur_rules 类型。所以尝试像这样使用 p_description2 cur_rules%ROWTYPE;

```
DECLARE
PROCEDURE create_rule(
      p_rule_type_key   IN VARCHAR2,
      p_key             IN VARCHAR2,
      p_activation      IN DATE,
      p_termination     IN DATE,
      p_description     IN VARCHAR2
    )
IS
   CURSOR cur_rules (pc_rule_type_key IN VARCHAR2, pc_key IN VARCHAR2)
   IS
      SELECT rule_type_key
      FROM ino_offers.rules
      WHERE rule_type_key = pc_rule_type_key
      AND key             = pc_key;
 p_description2 cur_rules%ROWTYPE;
BEGIN
   OPEN cur_rules (p_rule_type_key, p_key);
   FETCH cur_rules INTO p_description2;
   IF (cur_rules%NOTFOUND) THEN
      INSERT
      INTO rules
         (
            RULE_TYPE_KEY,
            KEY,
            ACTIVATION,
            TERMINATION,
            DESCRIPTION,
            CHANGED
         )
         VALUES
         (
            p_rule_type_key,
            p_key,
            p_activation,
            p_termination,
            p_description,
            SYSDATE
         );
   END IF;
   CLOSE cur_rules;
END;
BEGIN
   create_rule(?, ?, ?, ?, ?);
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:15:35.263

```
 p_description2     IN VARCHAR2; 
```

你到底想用那条线做什么？如果你想声明一个变量`p_description2`，你需要在`DECLARE`部件内部，就在`BEGIN`. 在声明它时，不要使用 a `VARCHAR2`，而是使用 a `CUR_RULES%ROWTYPE`，这就是 pl/sql 强大的原因。

# iphone - 自定义 UIPickerController

> ID：14816063
> 
> 赞同：2
> 
> 时间：2013-02-11T16:10:19.323
> 
> 标签：iphone, ios, custom-controls, uipickerviewcontroller

我有一个项目，我有一个要添加到`UIPickerView`.

我正在尝试将其`UIPickerView`从屏幕顶部延伸到屏幕底部，但是当我设置框架时，它不会超过大约一半屏幕的最大高度。

我已经研究了几个自定义`UIPickerView`类，但还没有找到任何可以让我这样做的东西。我能够更改选择器的背景图像并更改选择的图像，这非常重要。

我在哪里可以找到这个？任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:18:45.080

试试[SBTableAlert](http://github.com/simonb/SBTableAlert)，我正在寻找和你类似的东西，发现这是一个很好的替代品。我在联系人编辑视图中寻找类似电话号码类型选择器列表的东西，但找不到任何类似的东西，而且似乎需要相当长的时间来开发。SBTableAlert 恕我直言是一个不错的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:22:59.863

Apple 没有在 UIPickerView 上提供太多自定义。但我认为您绝对可以为此目的依赖 tableview。

看看[这些](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=picker)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T16:21:37.630

可以在此站点上找到一些自定义[类](http://www.cocoacontrols.com/platforms/ios/controls)：

**例如，在我的搜索中[，](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=UIPickerView)我发现了 15 种不同的习俗`UIPickerViews`：**

*   [适用于 iOS 的 PickerTableViewCell](http://www.cocoacontrols.com/platforms/ios/controls/pickertableviewcell)
*   [iOS 的 ALPickerView](http://www.cocoacontrols.com/platforms/ios/controls/alpickerview)
*   [AFPickerView for iOS](http://www.cocoacontrols.com/platforms/ios/controls/afpickerview)

试试这些，AFPickerView 可能是最有可能工作的。

* * *

你也可以通过调用一个比`iOSDevice's`屏幕大的子视图来做到这一点，它包含一个`UIPickerView`，这样你就可以做一个黑客动作来允许`UIPickerView`你想要的最大。

# perl - 为一系列 Perl 参数转义“$”

> ID：14816068
> 
> 赞同：0
> 
> 时间：2013-02-11T16:10:27.780
> 
> 标签：perl

我想做相当于：

```
for (int i = 0; i < 10; i++)
{
   arg[i] = arg[i].Replace("$", @"\$");
} 
```

在 Perl 中。这在 Perl 中会是什么样子？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T16:15:12.367

```
for ( @arg ) {
    s/\$/\\\$/g;
} 
```

应该做的伎俩。如果您坚持只处理前 10 个参数，请将第一行更改为：

```
for ( @arg[0..9] ) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T16:24:41.287

如果它*只是*您希望逃脱的美元符号`$`，我会使用[depesz 的](https://stackoverflow.com/users/80168/depesz)解决方案进行简单的替换。然而，perl 有一个内置函数来处理转义元字符`quotemeta`：

```
@arg = map quotemeta, @arg; 
```

Note that this escapes all meta characters, which may not be what you want.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T16:15:33.033

在 Perl 中，您可以使用`map`将一个列表转换为另一个列表。所以你可以说

```
@arg = map { s{\$}{\\\$}g; $_; } @arg; 
```

您也可以使用 的后缀形式`for`，因为默认循环变量是原始值的别名。

```
s{\$}{\\\$}g for @arg; 
```

这相当于：

```
foreach my $thing( @arg ) { 
    $thing =~ s{\$}{\\\$}g;
} 
```

如果你想超级冗长，你可以做 C 风格的循环：

```
for ( my $i = 0; $i < @arg; $i++ ) { 
    $arg[$i] =~ s{\$}{\\\$}g;
} 
```

...但这并不是特别 Perlish。

# python - 使用 py2exe 包含文件夹

> ID：14816071
> 
> 赞同：0
> 
> 时间：2013-02-11T16:10:28.033
> 
> 标签：python, py2exe

我为我的脚本使用 python-pptx 包。这个包有一个像这样的子文件夹

```
pptx/
     templates/
               default.pptx
     py files 
```

我使用 py2exe 生成一个 windows 可执行文件，但是当我执行它时，我得到了这个错误，它解释了 'templates' 目录没有放在生成的 library.zip 中：

```
pptx.exc.PackageNotFoundError: Package not found at 'C:\Documents and Settings\rke99878\Mes documents\pptx_fusion\dist\library.zip\pptx\templates\default.pptx' 
```

这个包的 python 文件很好，但不是这个文件夹，我试图在 py2exe 选项中添加 package={'pptx/*'} ，但同样的问题。如果我在 library.zip 中手动添加这个文件夹，我会得到同样的错误。

我怎样才能告诉 py2exe 拿走这个文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T00:43:18.223

解决了这个问题。

复制`\pptx\templates\default.pptx`项目中的文件夹，并在创建 pptx 时使用此表单：

```
prs = Presentation(r'C:\Documents and Settings\rke99878\Mes documents\pptx_fusion\dist\pptx\templates\default.pptx') 
```

# jquery - 带有 jQ uery 和 CSS 过渡的脉动效果

> ID：14816077
> 
> 赞同：6
> 
> 时间：2013-02-11T16:10:37.947
> 
> 标签：jquery, css, css-transitions

我正在尝试实现一种效果，当条件是我时，背景颜色会脉动。所以我有：

```
<div class="box">...</div>

.box {
    background-color: #fff;
    transition: background-color 0.5s ease-out;
}
.box.active {
    background-color: #ccc;
} 
```

所以现在我想使用 jQuery 来添加和删除该类几次，以创建背景颜色的脉动效果。就像是：

```
$('.box').addClass('active').delay(1000).removeClass('active').delay(1000).addClass('active'); 
```

从理论上讲，这应该会产生脉动效应，但事实并非如此。发生的情况是添加了“活动”类，并且永远不会删除或再次添加。这几乎就像第一个'removeClass'从未被触发。

我错过了一些东西，但不确定是什么。也许它与 CSS 过渡时间有关，但它们应该相互独立，对吧？

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-11T16:25:05.640

延迟仅适用于动画，不适用于添加和删除类。此外，您可以使用 CSS 中的关键帧来跳动：

```
@keyframes pulse { 
  50% { background-color: #ccc }
}

.box {
  animation: pulse .5s ease-out 2;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T16:25:40.257

尝试使用 CSS3 动画来实现此效果。

```
@-webkit-keyframes pulsate
{
      0%   {background-color: #fff;}
      50%  {background: #ccc;}
      100% {background: #fff;}
} 
```

然后将关键帧应用于`box`元素

```
.box{
  animation: pulsate 2s infinite;
} 
```

[http://jsfiddle.net/taltmann/jaQmz/](http://jsfiddle.net/taltmann/jaQmz/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T16:33:41.413

基本上，如果您希望它永远脉动，您应该使用 setInterval() 我在这里为您设置了一个示例[http://jsfiddle.net/UftRT/](http://jsfiddle.net/UftRT/)

```
function pulssate() {
if ( $('.box').hasClass('active') ) {
    $('.box').removeClass('active')
} else {
    $('.box').addClass('active')
}
}
window.setInterval(function() { pulssate(); },1000); 
```

如果你想让它停止，只需在变量中设置间隔，然后调用 window.clearInterval(int)，就像这样 `int = window.setInterval(function() { pulssate(); },1000);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T16:25:45.450

该`delay`函数实际上仅用于动画。添加和删​​除一个类不是动画，但是你可以使用`queue`方法或`setTimeout`函数来实现你想要的。

[这个问题在另一个线程](https://stackoverflow.com/a/4954872/1495728)上有很多很好的回复，可能会让你读起来很有趣。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T16:24:56.290

我认为这就是您需要的，一个每隔 x 秒调用一次并更改 css 属性的函数，[请参见 live demo](http://jsfiddle.net/epTnw/2/)。

```
var state = true;
function changeColor() {
    state = !state;
    if(state){
        $("div").css("background","red");
    }else{
        $("div").css("background","blue");
    }
    setTimeout(function () {
        changeColor();
    }, 1000);
}

changeColor(); 
```

# linux - 将哈希传递给 puppet/erb 中定义的类型

> ID：14816078
> 
> 赞同：2
> 
> 时间：2013-02-11T16:10:39.173
> 
> 标签：linux, erb, puppet

我第一次尝试在 puppet 中使用哈希，所以在我的 nodes.pp 中我将使用它：

```
node test1.example.com {
    netset::int::vconf {"servers" :
        label1 => { 'comment' => 'VIP Test1', 'ipaddress' => '192.168.1.10', 'netmask' => '255.255.255.0', 'int_label' => 'TEST1' },
        label2 => { 'comment' => 'VIP Test2', 'ipaddress' => '192.168.1.11', 'netmask' => '255.255.255.0', 'int_label' => 'TEST2' },
    }
} 
```

在我正在编写的文件 /etc/puppet/modules/netset/int/vconf.pp 中，我正在创建一个定义的类型：

```
define netset::int::vconf ($comment,$ipaddress){...do somethings...} 
```

我的问题是如何将散列的每个键传递给定义的类型？不知何故，我想我将不得不在某个地方创建一个循环，任何帮助都会有很大帮助。

谢谢丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-24T16:33:47.927

Puppet（还）不支持循环。所以你基本上想要的是创建一个哈希并将其传递给木偶函数“create_resources()”。所以，在你的情况下，它看起来像：

```
$my_hash = {
  'label1' => {
    'comment'   => 'VIP Test1',
    'ipaddress' => '192.168.1.10',
    'netmask'   => '255.255.255.0',
    'int_label' => 'TEST1'
  },
  'label2' => {
    'comment'   => 'VIP Test2',
    'ipaddress' => '192.168.1.11',
    'netmask'   => '255.255.255.0',
    'int_label' => 'TEST2'
   },
} 
```

在那之后：

```
create_resources(::netset::int::vconf, $my_hash) 
```

所以，基本上就像你写了这样的东西：

```
::netset::int::vconf { 'label1' :
  'comment'   => 'VIP Test1',
  'ipaddress' => '192.168.1.10',
  'netmask'   => '255.255.255.0',
  'int_label' => 'TEST1'
},

::netset::int::vconf  { 'label2' :
  'comment'   => 'VIP Test2',
  'ipaddress' => '192.168.1.11',
  'netmask'   => '255.255.255.0',
  'int_label' => 'TEST2'
} 
```

# python - 用 Google App Engine 图片替换布尔值

> ID：14816081
> 
> 赞同：0
> 
> 时间：2013-02-11T16:10:42.740
> 
> 标签：python, django, google-app-engine

我在 Django 表单类中有一些布尔字段。我去查询数据，一切正常，但我想用文本或图像替换布尔值。因此，它不是“Item: False”，而是一段自定义文本，或者理想情况下，还有图像或缺少一个来表示 T/F。我四处搜索，看到 Django 的“是”，但 Djangop Forms 没有，哦 GAE。有没有人有这方面的经验？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:48:08.633

每个 django 表单都使用默认的 Widget 将表单呈现为 HTML。您可以创建自己的自定义小部件来生成 HTML 以显示您想要的图像。

[https://docs.djangoproject.com/en/1.4/ref/forms/widgets/](https://docs.djangoproject.com/en/1.4/ref/forms/widgets/)

# jquery - colorbox Jquery插件，试图打开第二个弹出窗口

> ID：14816087
> 
> 赞同：0
> 
> 时间：2013-02-11T16:11:14.933
> 
> 标签：jquery, colorbox

我正在使用颜色框打开弹出窗口#1：

```
<li class="getquotebtn"><a href="<?php bloginfo ('template_directory'); ?>/get-quote.php?productID=<?php echo $post->ID; ?>">Get Quote</a></li> 
```

和jQuery：

```
$('.getquotebtn a').colorbox(); 
```

这工作正常。但是我在 get-quite.php 的内容中有另一个按钮，我想打开另一个弹出窗口......

```
<form name="getquotedata" action="" method="post">
        <input type="text" name="nameandsurname" id="popupnamefield" onblur="this.value=!this.value?'<?php _e('Name and Surname','medishop'); ?>':this.value;" onfocus="this.select()" onclick="if (this.value=='<?php _e('Name and Surname','medishop'); ?>'){this.value='';}" value="<?php _e('Name and Surname','medishop'); ?>">
        <input type="text" name="email" id="popupemailfield" onblur="this.value=!this.value?'youremail@domain.com':this.value;" onfocus="this.select()" onclick="if (this.value=='youremail@domain.com'){this.value='';}" value="youremail@domain.com">
        <input type="hidden" name="prod_ID" value="<?php echo $productID_from_url; ?>">
        <input type="hidden" name="prod_name" value="<?php echo get_the_title($productID_from_url); ?>">
        <input type="hidden" name="prod_url" value="<?php echo get_permalink($productID_from_url); ?>">
            <input type="submit" value="Get Quote" id="popupsbmt" onclick="$.colorbox({href:'<?php bloginfo('template_directory'); ?>/get-quote-sendmail.php'}); return false;">
    </form> 
```

这就是问题的开始！

我得到错误：`This content failed to load.`

任何想法如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:42:20.757

当您将颜色框放入另一个颜色框时，一切似乎都正常，请参见[此处的实时示例](http://jsfiddle.net/JFdsX/1/)。

```
<a class='inline' href="#inline_content">Inline HTML</a>
<div style='display:none'>
    <div id='inline_content' style='padding:10px; background:#fff;'>
        <a class='inline2' href="#inline_content2">open second</a>
    </div>
</div>
<div style='display:none'>
    <div id='inline_content2' style='padding:10px; background:#fff;'>hi second</div>
</div> 
```

js：

```
$(".inline").colorbox({inline:true, width:"50%"});
$(".inline2").colorbox({inline:true, width:"50%"}); 
```

# c - 需要帮助为 Pandoc 构建 libpandoc、Haskell + C 和 .NET 绑定

> ID：14816088
> 
> 赞同：5
> 
> 时间：2013-02-11T16:11:15.353
> 
> 标签：c, haskell, pandoc

我很想在我正在编写的实用程序（C# 控制台应用程序）中使用 Pandoc，我在 GitHub 上找到了这个绑定项目[libpandoc](https://github.com/toyvo/libpandoc)，并且通过扩展，它是 .NET 绑定项目[libpandoc-dotnet](http://github.com/toyvo/libpandoc-dotnet/)。

我希望作者已经包含了构建的 DLL，但我想他想让它对未来的 Pandoc 版本开放。

**我没有任何 Haskell 经验**，我只想要最终的 .NET 绑定。我正在尝试通过安装依赖项，`cabal`但我不明白错误消息，粗略的搜索让我相信安装`base`是不行的，所以我不知道该怎么做。

`C:\Development\Contrib\libpandoc>cabal install base-4.1.0.0 Resolving dependencies... cabal: Could not resolve dependencies: next goal: base (user goal) rejecting: base-3.0.3.2, 3.0.3.1, 4.6.0.1, 4.6.0.0, 4.5.1.0/installed-7c8..., 4.5.1.0, 4.5.0.0, 4.4.1.0, 4.4.0.0, 4.3.1.0, 4.3.0.0, 4.2.0.2, 4.2.0.1, 4.2.0.0 (global constraint requires ==4.1.0.0) rejecting: base-4.1.0.0 (only already installed instances can be used) rejecting: base-4.0.0.0 (global constraint requires ==4.1.0.0)`

如果一个善良的灵魂甚至可以*建造该死的东西*（叉子？上传到某个地方？）我会永远爱你。或者，告诉我如何正确构建它，我认为我可以从那里处理它。虽然现在我想了想，但不确定我是否安装了 C 编译器。

**更新：**

好的。因此，这一切都归结为 libpandoc 已有 3 年历史且其依赖项已过时这一事实。我没有运气尝试让所有旧的 Haskell 工具安装和工作，我可能不知道我在做什么。我已经安装了一些依赖项，但是一些依赖项没有版本化，所以我必须专门跟踪每个版本，最终我放弃了。

然后我刚刚更新了*libpandoc*本身的依赖版本，现在我已经构建并链接了所有依赖项。

唯一剩下的问题是 libpandoc 需要更新以适用于最新的 Pandoc 版本 (1.10)。

# php - 如何安全地输出包含 HTML 标签的内容？

> ID：14816089
> 
> 赞同：2
> 
> 时间：2013-02-11T16:11:17.267
> 
> 标签：php, html

我有一个博客系统，用户必须将内容输入到 html 文本区域，包括 html 标签，例如`<p>`. 这存储在数据库中。如果此输入随后使用 php 回显到网页，我如何转义输出以防止 XSS，但保留 html 标记的含义，以便博客文章的格式正确？如果我使用`htmlentities($blog_content)`它从字面上将 html 标记打印到页面，那么您会看到`<p>hello this is a blog</p>`.

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:22:19.297

您想要的是选择性过滤或清理。换句话说，您希望允许*一些*HTML，但不允许其他可能是恶意的标签。这是一项非常棘手的工作，特别是因为 HTML 语法非常复杂，而且过于简单的清理尝试很容易出错，从而允许通过格式错误的 HTML 注入标签。

如果可能，您应该远离让您的用户提交 HTML。使用特殊的标记语言，如 Wiki 标记、Markdown、BBcodes 或类似语言。

如果你确定你在做什么，你应该选择一个好的、经过良好测试的、健壮的库来提供这样的清理功能。[HTML Purifier](http://htmlpurifier.org)是我所知道的唯一符合此描述的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T16:19:11.150

好吧，你可以去掉`<script>`标签，使用`strip_tags()` **这不是一个防弹的解决方案**，但你可以通过允许一些标签（基本上是粗体、斜体、链接等等）来提高安全性......

然后，您可以轻松打印您的内容并避免执行 javascript。

```
$text = '<p>Test paragraph.</p><!-- Comment --> <a href="#fragment">Other text</a>';
echo strip_tags($text);
echo "\n";

// Allow <p>, <a> and some formatting
echo strip_tags($text, '<p><a><i><em><b><strong>'); 
```

# hadoop - Hadoop - 如何从实现可写接口切换到使用 Avro 对象？

> ID：14816092
> 
> 赞同：2
> 
> 时间：2013-02-11T16:11:21.880
> 
> 标签：hadoop, mapreduce, avro, writable

我正在使用 Hadoop 将 JSON 转换为 CSV 文件，以便使用 Hive 访问它们。

目前，映射器正在填充自己的数据结构，用 JSON-Smart 解析 JSON。然后，reducer 读取该对象并将其写入文件，以逗号分隔。为了使这更快，我已经在数据结构中实现了可写接口......

现在我想将 Avro 用于数据结构对象以具有更大的灵活性和性能。如何更改我的类以使它们交换 Avro 对象而不是可写对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T01:25:53.697

Hadoop 通过[`SerializationFactory`](http://hadoop.apache.org/docs/r1.1.1/api/org/apache/hadoop/io/serializer/SerializationFactory.html).

默认情况下，Hadoop 使用[`WritableSerialization`](http://hadoop.apache.org/docs/r1.1.1/api/org/apache/hadoop/io/serializer/WritableSerialization.html)该类来处理实现`Writable`接口的类的反序列化，但您可以[`Serialization`](http://hadoop.apache.org/docs/r1.1.1/api/org/apache/hadoop/io/serializer/Serialization.html)通过设置 Hadoop 配置属性`io.serializations`（实现序列化接口的类的 CSV 列表）注册实现接口的自定义序列化程序。

Avro`Serialization`在类中实现了接口[`AvroSerialization`](http://avro.apache.org/docs/current/api/java/org/apache/avro/hadoop/io/AvroSerialization.html)- 所以这将是您在`io.serializations`属性中配置的类。

Avro 实际上有一大堆帮助类，可以帮助您编写 Map / Reduce 作业以使用 Avro 作为输入/输出 -[源代码中有一些示例（Git 副本）](https://github.com/apache/avro/tree/trunk/doc/examples/mr-example/src/main/java/example)

目前我似乎找不到任何关于 Avro 和 Map Reduce 的好的文档，但我确信还有其他一些好的例子。

# actionscript-3 - Actionscript 3 让角色跳跃

> ID：14816094
> 
> 赞同：1
> 
> 时间：2013-02-11T16:11:24.530
> 
> 标签：actionscript-3

我正在制作一个平台游戏。但是我遇到了问题，因为每当我按下空格键跳跃时，角色都会卡在半空中。但是，我可以通过按住空格键来解决问题，并且角色会着陆。

问题出`mainJump()`在`Boy`课堂内。

我看到很多人通过使用动作时间线来解决问题，但我的主要问题是，无论如何我可以通过使用外部类来解决问题吗？

主班

```
package 
{
import flash.display.*;
import flash.text.*;
import flash.events.*;
import flash.utils.Timer;
import flash.text.*;

public class experimentingMain extends MovieClip 
{
    var count:Number = 0;
    var myTimer:Timer = new Timer(10,count);

    var classBoy:Boy;

    //var activateGravity:gravity = new gravity();

    var leftKey, rightKey, spaceKey, stopAnimation:Boolean;

    public function experimentingMain() 
    {
        myTimer.addEventListener(TimerEvent.TIMER, scoreUp);
        myTimer.start();

        classBoy = new Boy();
        addChild(classBoy);

        stage.addEventListener(KeyboardEvent.KEY_DOWN, pressTheDamnKey);
        stage.addEventListener(KeyboardEvent.KEY_UP, liftTheDamnKey);
    }

    public function pressTheDamnKey(event:KeyboardEvent):void
    {
        if (event.keyCode == 37)
        {
            leftKey = true;
            stopAnimation = false;
        }

        if (event.keyCode == 39)
        {
            rightKey = true;
            stopAnimation = false;
        }

        if (event.keyCode == 32)
        {
            spaceKey = true;
            stopAnimation = true;
        }
    }

    public function liftTheDamnKey(event:KeyboardEvent):void
    {
        if (event.keyCode == 37)
        {
            leftKey = false;
            stopAnimation = true;
        }

        if (event.keyCode == 39)
        {
            rightKey = false;
            stopAnimation = true;
        }

        if (event.keyCode == 32)
        {
            spaceKey = false;
            stopAnimation = true;
        }
    }

    public function scoreUp(event:TimerEvent):void 
    {
        scoreSystem.text = String("Score : "+myTimer.currentCount);
    }

}
    } 
```

男生班

```
package 
{
import flash.display.*;
import flash.events.*;

public class Boy extends MovieClip
{
    var leftKeyDown:Boolean = false;
    var upKeyDown:Boolean = false;
    var rightKeyDown:Boolean = false;
    var downKeyDown:Boolean = false;
    //the main character's speed
    var mainSpeed:Number = 5;
    //whether or not the main guy is jumping
    var mainJumping:Boolean = false;
    //how quickly should the jump start off
    var jumpSpeedLimit:int = 40;
    //the current speed of the jump;
    var jumpSpeed:Number = 0;

    var theCharacter:MovieClip;

    var currentX,currentY:int;

    public function Boy()
    {
        this.x = 600;
        this.y = 540;

        addEventListener(Event.ENTER_FRAME, boyMove);
    }

    public function boyMove(event:Event):void
    {
        currentX = this.x;
        currentY = this.y;

        if (MovieClip(parent).leftKey)
        {
            currentX +=  mainSpeed;
            MovieClip(this).scaleX = 1;
        }

        if (MovieClip(parent).rightKey)
        {
            currentX -=  mainSpeed;
            MovieClip(this).scaleX = -1;
        }

        if (MovieClip(parent).spaceKey)
        {
            mainJump();
        }

        this.x = currentX;
        this.y = currentY;
    }

    public function mainJump():void
    {
        currentY = this.y;

        if (! mainJumping)
        {

            mainJumping = true;
            jumpSpeed = jumpSpeedLimit * -1;
            currentY +=  jumpSpeed;
        }
        else
        {
            if (jumpSpeed < 0)
            {
                jumpSpeed *=  1 - jumpSpeedLimit / 250;
                if (jumpSpeed > -jumpSpeedLimit/12)
                {
                    jumpSpeed *=  -2;
                }
            }
        }
        if (jumpSpeed > 0 && jumpSpeed <= jumpSpeedLimit)
        {
            jumpSpeed *=  1 + jumpSpeedLimit / 120;
        }
        currentY +=  jumpSpeed;

        if (currentY >= stage.stageHeight - MovieClip(this).height)
        {
            mainJumping = false;
            currentY = stage.stageHeight - MovieClip(this).height;
        }
    }
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:36:13.190

首先，将您的代码形式化，消除诸如“pressTheDamnKey”之类的时髦的东西，它甚至不能很好地描述函数，因为函数不能按键。那是一个事件处理程序，应该命名为 keyDownHandler 或 onKeyDown，仅此而已。

其次，除了直接关注事件数据之外，您很少希望在事件处理程序中做任何实际工作。而是调用执行实际工作的函数。处理程序处理事件，然后调用执行工作的代码。当您希望其他*东西*也能够使小男孩除了 enterFrameHandler 动画时，这很好地分离了关注点，比如鼠标。

我可以想象您的跟踪日志很快就会被“分数”行填满，因为您的计时器每秒触发 100 次（每次 10 毫秒）。我会将其更改为不在计时器上触发，而是在分数实际更改时刷新。

除了意大利面条代码之外，跳跃的问题在于，您通过将按键状态保存在变量中并让他不断检查它来根据是否按下按键来确定他的动作。这有几个原因是不好的：1.他不应该向他的环境寻求信息，它应该由拥有他的任何对象或负责告诉他的对象提供给他和 2\. 它需要你持续按住空格键，否则他将停止移动，因为他会检查它是否被按住（参见问题 1）。

我将在下面解决所有这些问题，而忽略评分，这完全是另一回事。

```
package 
{
    import flash.display.*;
    import flash.events.*;
    import flash.text.*;
    import flash.utils.*;

    //  Sprite is preferred if you are not using the timeline
    public class Application extends Sprite 
    {
        private var boy:Boy;

        public function Application() 
        {
            boy = new Boy();
            addChild(boy);
            boy.x = 600;    //  set these here, not in the boy
            boy.y = 540;
            stage.addEventListener(KeyboardEvent.KEY_DOWN, keyDownHandler);
            stage.addEventListener(KeyboardEvent.KEY_UP,   keyUpHandler  );
        }

        public function keyDownHandler(event:KeyboardEvent):void
        {
            switch(event.keyCode)
            {
                case 32: boy.jump();
                         break;
                case 37: boy.moveLeft();
                         break;
                case 39: boy.moveRight();
                         break;
                default:
                    // ignored
                    break;
            }
        }

        public function keyUpHandler(event:KeyboardEvent):void
        {
            switch(event.keyCode)
            {
                //  ignored for jumping (32)
                case 37: //  fall through
                case 39: boy.stop();
                         break;
                default:
                    // ignored
                    break;
            }
        }

    }//class
}//package

package 
{
    import flash.display.*;
    import flash.events.*;

    //  It is assumed that there is an asset in the library
    //  that is typed to a Boy, thus it will be loaded onto
    //  the stage by the owner
    public class Boy extends Sprite
    {
        private var horzSpeed   :Number = 0;
        private var vertSpeed   :Number = 0;
        private var floorHeight :Number;
        private var jumpHeight  :Number;
        private var amJumping   :Boolean = false;

        public function Boy()
        {
            addEventListener(Event.ENTER_FRAME, enterFrameHandler);
        }

        public function moveLeft():void
        {
            horzSpeed = -1;
        }

        public function moveRight():void
        {
            horzSpeed = 1;
        }

        public function stop():void
        {
            horzSpeed = 0;
        }

        public function jump():void
        {
            if (amJumping)  return;
            floorHeight = y;
            jumpHeight = floorHeight + 20;
            vertSpeed = 2;
            amJumping = true;
            animateJump();
        }

        private function enterFrameHandler(event:Event):void
        {
            animate();
        }

        private function animate():void
        {
            x += horzSpeed;
            if( amJumping )
            {
                animateJump();
            }
        }

        //  Doing a simple version for this example.
        //  If you want an easier task of jumping with gravity,
        //  I recommend you employ Greensock's superb
        //  TweenLite tweening library.
        private function animateJump():void
        {
            y += vertSpeed;
            if( y >= jumpHeight )
            {
                y = jumpHeight;
                vertSpeed = -2;
            }
            else if( y <= floorHeight )
            {
                y = floorHeight;
                amJumping = false;
            }
        }

    }//class
}//package 
```

解决这个问题的另一种方法，可能是长期更好的方法，是让男孩甚至不负责移动自己。相反，您将在父级、他的所有者或一些特殊的 Animator 类中处理该问题，该类负责按计划对事物进行动画处理。在这个更加封装的范例中，男孩只负责根据外部世界告诉他发生在他身上的事情来更新他自己的内部外观。他将不再处理内部跳跃，而是负责做一些事情，比如动画他拥有的东西，比如他的胳膊和腿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:23:25.123

您有一个`mainJumping`仅在跳转运行时才为真的变量。为什么不直接使用它？

```
if (MovieClip(parent).spaceKey || mainJumping)
{
    mainJump();
} 
```

# java - 'this' 关键字：将其用作参数

> ID：14816096
> 
> 赞同：0
> 
> 时间：2013-02-11T16:11:40.913
> 
> 标签：java

我已经启动了 JAVA 并使用 RxTx 进行串行通信。

参考： [http:](http://rxtx.qbang.org/wiki/index.php/Event_based_two_way_Communication) [//rxtx.qbang.org/wiki/index.php/Event_based_two_way_Communication http://henrypoon.wordpress.com/2011/01/01/serial-communication-in-java-with-example-program/](http://henrypoon.wordpress.com/2011/01/01/serial-communication-in-java-with-example-program/)

在第二个链接中，我无法破译**“this”的**用法：谁能解释一下：

**Communicator.java**

```
public class Communicator implements SerialPortEventListener
{
  GUI window = null;
   ..
   ..
 public Communicator(GUI window)
    {
        this.window = window;
    }

...
..
} 
```

**在 GUI.java 中**

```
public class GUI extends javax.swing.JFrame {
Communicator communicator = null;
Communicator communicator = null;
    //KeybindingController object
    KeybindingController keybindingController = null;

    /** Creates new form GUI */
    public GUI() {
        initComponents();
        createObjects();
        communicator.searchForPorts();
        keybindingController.toggleControls();
        keybindingController.bindKeys();
    }

    private void createObjects()
    {
        **communicator = new Communicator(this);**
        keybindingController = new KeybindingController(this);
    }
...
..} 
```

我很困惑如何使用它来创建 Communicator 类的对象，如上面的代码中突出显示的那样（出现**communicator = new Communicator(this);**）

另一个困惑是： **Communicator.java**

```
public class Communicator implements SerialPortEventListener
{ 
...
...
 public void connect()
    {
        String selectedPort = (String)window.cboxPorts.getSelectedItem();
        selectedPortIdentifier = (CommPortIdentifier)portMap.get(selectedPort);

        CommPort commPort = null;

        try
        {
            //the method below returns an object of type CommPort
            commPort = selectedPortIdentifier.open("TigerControlPanel", TIMEOUT);
            //the CommPort object can be casted to a SerialPort object
            serialPort = (SerialPort)commPort;
....
...}

 public void initListener()
    {
        try
        {
            **serialPort.addEventListener(this);**
            serialPort.notifyOnDataAvailable(true);
        }
        catch (TooManyListenersException e)
        {
            logText = "Too many listeners. (" + e.toString() + ")";
            window.txtLog.setForeground(Color.red);
            window.txtLog.append(logText + "\n");
        }
    }
....
} 
```

我再次对这里使用“this”感到困惑（**serialPort.addEventListener(this);**）

我与 [http://rxtx.qbang.org/wiki/index.php/Event_based_two_way_Communication上的代码进行了比较](http://rxtx.qbang.org/wiki/index.php/Event_based_two_way_Communication)

它在那里暗示

```
...
InputStream in = serialPort.getInputStream();
**serialPort.addEventListener(new SerialReader(in));**
...

 public static class SerialReader implements SerialPortEventListener 
    {
        private InputStream in;
        private byte[] buffer = new byte[1024];

        public SerialReader ( InputStream in )
        {
            this.in = in;
        }

        public void serialEvent(**SerialPortEvent arg0**) {
            int data;

            try
            {
                int len = 0;
                while ( ( data = in.read()) > -1 )
                {
                    if ( data == '\n' ) {
                        break;
                    }
                    buffer[len++] = (byte) data;
                }
                System.out.print(new String(buffer,0,len));
            }
            catch ( IOException e )
            {
                e.printStackTrace();
                System.exit(-1);
            }             
        }

    } 
```

addEventListener 的描述 [http://docs.oracle.com/cd/E17802_01/products/products/javacomm/reference/api/](http://docs.oracle.com/cd/E17802_01/products/products/javacomm/reference/api/)

添加事件监听器

public abstract void addEventListener(SerialPortEventListener lsnr) throws java.util.TooManyListenersException 注册一个 SerialPortEventListener 对象以侦听 SerialEvents。可以使用 notifyOnXXX 调用来表达对特定事件的兴趣。将使用描述事件的 SerialEvent 对象调用 SerialPortEventListener 的 serialEvent 方法。

我想知道它的用法，因为它是如何将“SerialPortEventListener lsnr”作为参数传递给上述代码中的 addEventListener 的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:22:14.550

`this`关键字是对正在执行代码的当前实例的引用。因此，既然`this`是参考，您可以将其用作任何其他参考。没有问题。

现在让我们看一下您的用法：-

```
new Communicator(this); 
```

由于这个语句是在类的方法内部使用的`GUI`，所以，`this`指的是`instance of GUI`当前正在执行的代码。现在，通过将它传递给构造函数，您只是将当前实例的引用传递给它。这是非常有效的，因为`Communicator`构造函数采用类型的引用`GUI`：-

```
public Communicator(GUI window)
{
    this.window = window;
} 
```

* * *

现在让我们继续下一条语句：

```
serialPort.addEventListener(this); 
```

在这里，您正在向.引用`serialPort`的. 因为，这是在类 - 中使用的，它实现了，所以基本上你正在注册一个实例，它只不过是一个. 因此，您正在注册该活动。`EventListener``this``Communicator``SerialPortEventListener``Communicator``SerialPortEventListener`

就您的其他代码而言：

```
serialPort.addEventListener(new SerialReader(in)); 
```

在这里，您刚刚使用了 new`instance`而不是`this`，因为您不在`SerialReader`课堂上。因此，您没有`this`对任何`SerialReader`实例的引用，因此您需要手动创建该类的对象。

所以，没有区别。因为，在任何情况下，您都在注册`SerialPortEventListener`只实现的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:14:18.197

`this`是一个伪变量，意思是“调用此方法的对象”（或在构造函数中：“当前正在构造的对象”）。我不知道您发布的代码有什么问题，因为它包含许多显然与问题无关的代码，我不会开始猜测您的问题到底出在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T16:14:34.750

这里有很多要消化的东西来回答你原来的问题，我不确定这一切都相关，但让我们具体解决这个问题。以下代码演示了使用`this`来消除当前范围内的歧义：

```
public Communicator(GUI window)
{
    this.window = window;
} 
```

`this`表示当前类的当前实例。因此，在您的第一个混淆实例中，`this`是一个实例，`Communicator`因此`this.window`存在。在第二种情况下`this`是 的一个实例`GUI`，因此可以作为参数传递给`Communicator`，因为这是它接受的。

在 for 的构造函数中`Communicator`，因为存在两个具有相同名称的事物，并且要在相同的范围内使用，所以我们需要明确我们正在做的事情。我们通过说“将外国`window`事物分配给我们当地的、已知的、拥有`window`的事物”来做到这一点。

想想一群人，有无数个约翰，而你只是喊着那个名字。谁会期待回应？如果你指了指点，或者有一些其他指标，比如当他们都看的时候，约翰认出了你，该怎么办？`this`是那个指标，给出了使某物与众不同所需的特异性。

否则想象一下尝试分配`window`到的混乱`window`。我们是指将本地版本分配给本地版本，将参数分配给参数，将参数分配给本地版本，还是将本地版本分配给参数？

# wcf - WCF路由后如何保留客户端IP地址？

> ID：14816098
> 
> 赞同：3
> 
> 时间：2013-02-11T16:11:46.893
> 
> 标签：wcf, routing, ip-address

我目前有一个能够使用以下代码获取客户端 IP 地址的 WCF 服务；

```
 private static string GetClientIPAddress()
    {
        RemoteEndpointMessageProperty clientEndpoint =
            OperationContext.Current.IncomingMessageProperties[
            RemoteEndpointMessageProperty.Name] as RemoteEndpointMessageProperty;

        return clientEndpoint.Address;
    } 
```

但是，当我们将 WCF 路由服务放在现有服务前面时，我们现在发现报告的 IP 地址是托管路由服务的服务器的 IP 地址。

客户端IP地址是否可以一直保留？

# javascript - 将文本预测脚本 [Markov Chain] 从 javascript 转换为 python

> ID：14816100
> 
> 赞同：5
> 
> 时间：2013-02-11T16:11:50.317
> 
> 标签：javascript, python, markov-chains

最近几天我一直在尝试[将此 js 脚本](http://blog.javascriptroom.com/2013/01/21/markov-chains/)转换为 python 代码。

到目前为止，我的实现（主要是盲目的 cp，一些小修复）：

```
import random
class markov:
    memory = {}
    separator = ' '
    order = 2

    def getInitial(self):
        ret = []
        for i in range(0, self.order, 1):
            ret.append('')
        return ret

    def breakText(self, txt, cb):
        parts = txt.split(self.separator)
        prev = self.getInitial()
        def step(self):
            cb(prev, self.next)
            prev.shift()#Javascript function.
            prev.append(self.next)
        #parts.forEach(step) # - step is the function above.
        cb(prev, '')

    def learn(self, txt):
        mem = self.memory
        def learnPart(key, value):
            if not mem[key]:
                mem[key] = []
            mem[key] = value
            return mem
        self.breakText(txt, learnPart)

    def step(self, state, ret):
        nextAvailable = self.memory[state] or ['']
        self.next = nextAvailable[random.choice(nextAvailable.keys())]
        if not self.next:
            return ret
        ret.append(next)
        nextState = state.slice(1)
        return self.step(nextState, ret)

    def ask(self, seed):
        if not seed:
            seed = self.genInitial()
        seed = seed + self.step(seed, []).join(self.separator)
        return seed 
```

问题：

1.  我完全不了解javascript。

2.  当我尝试向“markov”类对象“学习”一些文本时[例如：a=markov(); a.learn("sdfg");] 我收到以下错误：“TypeError: unhashable type: 'list'”，对于“learnPart”函数中的“mem”字典，“learn”函数的成员。

    所以到目前为止我的问题是为什么会出现这个异常 [TypeError for a list object, falsely refer to a dictionary object (which is hashable)]？

在此先感谢您的任何建议、方向、要点和帮助：D

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-25T17:38:18.633

写这篇文章的人说话。很高兴你发现它有用！现在，我的马尔可夫链的第一个实现实际上是在 Python 中，所以这个答案将集中在如何以更 Pythonic 的方式编写它。我将展示如何制作一个 2 阶马尔可夫链，因为它们很容易讨论，但您当然可以通过一些修改使其成为 N 阶。

### 数据结构

在 js 中，两个突出的数据结构是泛型对象和数组（它是泛型对象的扩展）。然而，在 Python 中，您还有其他选项可以进行更细粒度的控制。以下是两种实现的主要区别：

*   我们链中的状态实际上是一个元组 - 一个不可变的有序结构，具有固定数量的元素。我们总是想要`n`元素（在本例中为`n=2`），并且它们的顺序是有意义的。

*   [如果我们使用包装列表的defaultdict](http://docs.python.org/2/library/collections.html#collections.defaultdict)操作内存会更容易，因此我们可以跳过“检查状态是否不存在，然后执行 X”，而只执行 X。

因此，我们将 a`from collections import defaultdict`放在顶部并更改`markov.memory`定义方式：

```
memory = defaultdict(list) 
```

现在我们更改`markov.getInitial`为返回一个元组（记住这解释了一个 order-2 链）：

```
def getInitial(self):
    return ('', '') 
```

（如果你想进一步扩展它，你可以使用一个非常简洁的 Python 技巧：`tuple([''] * 2)`将返回相同的东西。你可以使用 代替空字符串`None`）

我们将稍微改变一下用途`genInitial`。

### 产量和迭代

一个在 js 中不存在但在 Python 中确实存在的强大概念是`yield`运算符（[请参阅此问题](https://stackoverflow.com/questions/231767/the-python-yield-keyword-explained)以获得很好的解释）。

Python 的另一个特性是它的通用`for`循环。你几乎可以很容易地浏览任何东西，包括生成器（使用 的函数`yield`）。将两者结合起来，我们可以重新定义`breakText`：

```
def breakText(self, txt):
    #our very own (ε,ε)
    prev = self.getInitial()

    for word in txt.split(self.separator):
        yield prev, word
        #will be explained in the next paragraph
        prev = (prev[1], word)

    #end-of-sentence, prev->ε
    yield prev, '' 
```

上面的神奇部分`prev = (prev[1], word)`可以通过示例进行最好的解释：

```
>>> a = (0, 1)
>>> a
(0, 1)
>>> a = (a[1], 2)
>>> a
(1, 2) 
```

这就是我们在单词列表中前进的方式。现在我们继续讨论用途`breakText`，重新定义`markov.learn`：

```
def learn(self, txt):
    for part in self.breakText(txt):
        key = part[0]
        value = part[1]

        self.memory[key].append(value) 
```

因为我们的记忆是 a `defaultdict`，所以我们不必担心 key 不存在。

### 在路边小便

好的，我们已经实现了一半的链条，是时候看看它的实际效果了！到目前为止我们有什么：

```
from collections import defaultdict

class Markov:
    memory = defaultdict(list)
    separator = ' '

    def learn(self, txt):
        for part in self.breakText(txt):
            key = part[0]
            value = part[1]

            self.memory[key].append(value)

    def breakText(self, txt):
        #our very own (ε,ε)
        prev = self.getInitial()

        for word in txt.split(self.separator):
            yield prev, word
            prev = (prev[1], word)

        #end-of-sentence, prev->ε
        yield (prev, '')

    def getInitial(self):
        return ('', '') 
```

（我将班级名称从 更改为`markov`，`Markov`因为每次班级以小写字母开头时我都会畏缩）。我将其保存为`brain.py`并加载了 Python。

```
>>> import brain
>>> bob = brain.Markov()
>>> bob.learn('Mary had a little lamb')
>>> bob.memory
defaultdict(<class 'list'>, {('had', 'a'): ['little'], ('Mary', 'had'): ['a'], ('', ''): ['Mary'], ('little', 'lamb'): [''], ('a', 'little'): ['lamb'], ('', 'Mary'): ['had']}) 
```

成功！让我们更仔细地看一下结果，看看我们做对了：

```
{ ('', ''): ['Mary'],
  ('', 'Mary'): ['had'],
  ('Mary', 'had'): ['a'],
  ('a', 'little'): ['lamb'],
  ('had', 'a'): ['little'],
  ('little', 'lamb'): ['']} 
```

*拉上拉链*准备好开车了吗？我们还是得用*这个*链子！

### 改变`step`功能

我们已经遇到了我们需要重新制作的东西`step`。我们有defaultdict，所以我们可以`random.choice`马上使用，而且我可以作弊，因为我知道链的顺序。我们也可以摆脱递归（有点遗憾），如果我们将其视为一个通过链单步执行的函数（我在原始文章中的错误 - 一个命名错误的函数）。

```
def step(self, state):
    choice = random.choice(self.memory[state] or [''])

    if not choice:
        return None

    nextState = (state[1], choice)
    return choice, nextState 
```

我很遗憾地添加了`or ['']`因为`random.choice`对空列表的抱怨。最后，我们将大部分逻辑移到`ask`（句子的实际构造）：

```
def ask(self, seed=False):
    ret = []

    if not seed:
        seed = self.getInitial()

    while True:
        link = self.step(seed)

        if link is None:
            break

        ret.append(link[0])
        seed = link[1]

    return self.separator.join(ret) 
```

是的，有点恶心。我们本可以给`step`它起一个更好的名字，把它改成发电机，但我和怀孕的妻子会面要迟到了，她即将生下一个婴儿，她把火炉放在我被拖走的车里着火了！我最好快点！

### 大结局

但首先，与鲍勃交谈：

```
from collections import defaultdict
import random

class Markov:
    memory = defaultdict(list)
    separator = ' '

    def learn(self, txt):
        for part in self.breakText(txt):
            key = part[0]
            value = part[1]

            self.memory[key].append(value)

    def ask(self, seed=False):
        ret = []

        if not seed:
            seed = self.getInitial()

        while True:
            link = self.step(seed)

            if link is None:
                break

            ret.append(link[0])
            seed = link[1]

        return self.separator.join(ret)

    def breakText(self, txt):
        #our very own (ε,ε)
        prev = self.getInitial()

        for word in txt.split(self.separator):
            yield prev, word
            prev = (prev[1], word)

        #end-of-sentence, prev->ε
        yield (prev, '')

    def step(self, state):
        choice = random.choice(self.memory[state] or [''])

        if not choice:
            return None

        nextState = (state[1], choice)
        return choice, nextState

    def getInitial(self):
        return ('', '') 
```

并加载它：

```
>>> import brain
>>> bob = brain.Markov()
>>> bob.learn('Mary had a little lamb')
>>> bob.ask()
'Mary had a little lamb'
>>> bob.learn('Mary had a giant crab')
>>> bob.ask(('Mary', 'had'))
'a giant crab' 
```

当然，这个概念还有改进和扩展的空间。但是，如果我只是给您答案，那将没有任何乐趣。

希望这在 4 个月后仍然会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:41:34.163

**复杂的答案**

这里的问题`learnPart`是试图使用 getInitial 的返回值，它是一个列表，作为字典的键。列表是可变的，因此不可散列，这意味着它们不能用作字典的键。

您可以尝试将此行添加到`learnPart`：

```
def learnPart(key, value):
    key = tuple(key) #<-----Try adding this line
    if not mem[key]:
        mem[key] = []
    mem[key] = value
    return mem 
```

但我认为这不会解决所有问题。

**简单的答案**

那里有很多用 Python 编写的马尔可夫链实现。在 Github 上快速搜索得到 168 个项目： [https ://github.com/search?l=Python&q=markov+chain](https://github.com/search?l=Python&q=markov+chain)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-30T11:42:16.497

我做了一个简化版本的代码：

```
import re
class Brain():
    H = ''
    def learn(self, txt):
        self.H = txt
    def ask(self,ask):
        H=self.H
        ask = re.compile(r"%s(.*)"%(ask),re.I|re.DOTALL)
        m = ask.search(H)
        print m.group(1) 
```

这是执行：

```
>>> import brain
>>> bob = brain.Brain()
>>> bob.learn('Mary had a little lamb' )
>>> bob.ask('Mary had')
'a little lamb' 
```

我同意这不完全是马尔可夫链算法。但它有几个优点：

一世。您可以提供`ask()`如上所示的原始文本。

ii. 它的代码行数更少。

iii. 希望它更容易理解。

# c# - 什么是用于 Mac OS 的 LibUsbDotNet 2.2.8 Analog。

> ID：14816101
> 
> 赞同：0
> 
> 时间：2013-02-11T16:11:54.533
> 
> 标签：c#, windows, vb.net, macos, usb

有一个**libusbdotnet.dll**可用于连接 vb.net 中的设备，引用用 C# 编写的 dll。

如果我使用[Mono](http://www.mono-project.com/Mono_on_MacOS_X)在 MAC 中使用 vb.net 可以做什么？

有什么可用的，或者解决方案是在 C# 中编写所有的东西，因为**libusbdotnet 在 C# 中**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:14:06.283

libusbdotnet 是用什么语言编写的并不重要，只要您在 Mono VB.NET 项目中包含 DLL，您就可以使用它。

# r - Matlab中的采样

> ID：14816102
> 
> 赞同：1
> 
> 时间：2013-02-11T16:11:55.213
> 
> 标签：r, matlab, sampling

因此，让我首先说我没有 Matlab 的统计工具箱，所以我试图找到一种方法来解决这个问题。无论如何，我想要做的是复制 R`sample`函数。例如，在 R

```
> x = sample(1:5,20,replace=T,prob=c(.1,.1,.1,.1,.6))
> x
 [1] 5 5 5 4 5 2 5 5 1 5 5 5 5 5 5 3 5 1 5 5 
```

所以我用替换对整数 1,2,3,4,5 进行采样。但此外，我以一定的比例对每个整数进行采样，即整数 5 应该在大约 60% 的时间内被采样。

所以我想找到解决方案的问题是如何在 Matlab 中实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T16:33:51.257

以下是如何执行带替换的加权采样（Matlab`randsample`不支持，顺便说一句）；

```
function r = sample(pop,n,weights)
%# each weight creates a "bin" of defined size. If the value of a random number
%# falls into the bin, we pick the value

%# turn weights into a normed cumulative sum
csWeights = cumsum(weights(:))/sum(weights);
csWeights = [0;csWeights(1:end-1)];

%# for each value: pick a random number, check against weights
idx = sum(bsxfun(@ge,rand(1,n),csWeights),1);

r = pop(idx); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T16:27:00.583

未加权的情况很容易使用`randi`。

```
function r = sample(pop, n)

imax = length(pop);
index = randi(imax, n, 1);
r = pop(index);

end 
```

在加权的情况下，这样的事情应该可以解决问题：

```
function r = sample(pop, n, prob)

cumprob = cumsum(prob);
r = zeros(1, n);
for i = 1:n
  index = find(rand < cumprob, 1, 'last');
  r(i) = pop(index);
end

end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T16:37:01.107

这是制作自己的`sample`功能的一种方法：

```
function x = sample(v, n, p)

pc = cumsum(p) / sum(p);
r = rand(1,n);
x = zeros(1,n);
for i = length(pc):-1:1
    x(r<pc(i)) = v(i);
end 
```

它并不完全有效，但它可以满足您的需求。像这样称呼它：

```
v = [1 2 3 4 5];
p = [.1 .1 .1 .1 .6];
n = 20;
x = sample(v,n,p); 
```

# java - 使用 PDFBox 设置背景图像

> ID：14816112
> 
> 赞同：1
> 
> 时间：2013-02-11T16:12:25.410
> 
> 标签：java, pdf-generation, pdfbox

有没有办法在 PDFBox 生成的 PDF 中设置背景图片？我还想在上面设置图片和文字...

我尝试了使用文档大小的图像。当我在文字之后设置图片时，我想要的文字在图片上是不可见的，但可以选择（是在图片下吗？）。当我在文本之前设置它时，背景图像完全消失，一切看起来好像我从未设置它。

有任何想法吗 ？

# jquery - 需要 用 JS/CSS删除

> ID：14816121
> 
> 赞同：0
> 
> 时间：2013-02-11T16:12:58.887
> 
> 标签：jquery, twitter-bootstrap, popover

这是我遇到问题的代码

```
<script type="text/javascript">

    //<![CDATA[

        $('#blocked_file_extensions').popover({
      'placement': 'bottom',
      "title": "Blocked Extensions",
      "content": "These filetypes will be blocked:`<br>` exe, vbs, pif, scr, bat, cmd, com, cpl, mp3, avi"
    });

    //]]>
    </script> 
```

在这句话“这些文件类型将被阻止：”之后，您会注意到一个`<br>`标签。我正在尝试删除`<br>`with JS，但我似乎无法定位它。我无权访问这部分代码，我只能使用 JS 或 CSS 来更改/删除项目。

我尝试了一些删除和替换功能，但没有成功。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:23:31.467

您似乎正在使用[twitter 引导程序`.popover`](http://twitter.github.com/bootstrap/javascript.html#popovers)

您可以销毁弹出框并使用您想要的选项重新定义它..

```
<script type="text/javascript">
//<![CDATA[

$('#blocked_file_extensions').popover('destroy');
$('#blocked_file_extensions').popover({
      'placement': 'bottom',
      "title": "Blocked Extensions",
      "content": "whatever content you want ..."
    });

//]]>
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:10:01.217

以下是您将如何解决此问题...

从原始脚本创建修改后的脚本并删除原始脚本。

**代码**

```
<script type="text/javascript">
    function fixScript() {
        // Get all the scripts in the page
        var scripts = document.getElementsByTagName( 'script' );

        for(var i = 0; i < scripts.length; i++) {
            // Find the script we need
            if(scripts[i].childNodes[0] != undefined) {
                if(scripts[i].childNodes[0].textContent.indexOf("<br>") !== -1) {
                    // Get the code from the script
                    newData = scripts[i].childNodes[0].textContent.replace("<br>", "");

                    // Remove the old script
                    scripts[i].parentNode.removeChild(scripts[i]);

                    // Create a new script with fixed data
                    var s1 = document.createElement("script");
                    s1.type = "text/javascript"; 
                    s1.textContent = newData;
                    var s = document.getElementsByTagName("script")[0];
                    s.parentNode.insertBefore(s1, s);

                    // Stop
                    break;
                }
            }
        }   
    }
</script> 
```

**输出**

```
<script type="text/javascript">
    //<![CDATA[

        $('#blocked_file_extensions').popover({
      'placement': 'bottom',
      "title": "Blocked Extensions",
      "content": "These filetypes will be blocked:`` exe, vbs, pif, scr, bat, cmd, com, cpl, mp3, avi"
    });

    //]]>
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T16:21:02.430

我会看看尝试覆盖您的 js 代码中的选项。以前没有使用过popover，但是[根据文档，您可以执行以下操作](http://daveyijzermans.nl/jquery/popover/demo.html#methods_setOption)：

```
$("#blocked_file_extensions").popover(
    'setOption'
    , 'content'
    , "These filetypes will be blocked: exe, vbs, pif, scr, bat, cmd, com, cpl, mp3, avi"
); 
```

# php - 侧边栏位置错误

> ID：14816123
> 
> 赞同：0
> 
> 时间：2013-02-11T16:13:10.533
> 
> 标签：php, css, wordpress, templates, sidebar

我试图在正确的位置在 php 中获得一个侧边栏。我在 php 中制作了一个模板并使用响应式 css。但是每次我尝试将侧边栏放在我发布的第一篇文章的最后一个水平位置时

请参阅下面的示例

[http://profesorprofesor.net63.net/error.png](http://profesorprofesor.net63.net/error.png)

有没有办法正确刷新或移动粉色侧边栏？

请帮助我，我整天都在尝试解决问题。

这是php代码：

```
 <div class="post">
      <article>
      <header class="wp">
      <h2><a href=" <?php the_permalink(); ?>">   
      <?php the_title(); ?> </a></h2>            
      <div class="entry">
      <p>   <?php the_content(); ?> </p>
      <p class="postmetadata">
      <?php _e('Filed under&#58;'); ?> 
      <?php the_category(', ') ?> 
      <?php _e('by'); ?> 
     <?php  the_author(); ?>    <br/>
    <?php comments_popup_link('No Comments &#187;', '1 Comment &#187;', '% Comments &#187;'); ?> 
    <?php edit_post_link('Edit', ' &#124; ', ''); ?>
    </p> 

    </div>
    </header>
    </article>
     </div>

    <?php endwhile; ?>  
    <?php endif; ?>

<div class="alado" > gola</div>

<aside>
     <h3>Ignacio Nieto, </h3>
    <p> </aside> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:39:44.280

如果我正确理解您的问题，无论有多少帖子，您都希望始终将右侧导航栏保持在页面的右上角。正确的？如果是这样，你为什么不绝对定位这个div？这样它的位置将保持不变。如果这不是您想要实现的目标，请您让您的问题更清楚。

# sql-server - SQL Server 2008 未显示默认实例名称

> ID：14816125
> 
> 赞同：2
> 
> 时间：2013-02-11T16:13:24.800
> 
> 标签：sql-server, sql-server-2008

我正在运行以下代码来安装所有版本的 SQL Server 并安装实例。

```
Dim sqldatasourceenumerator1 As SqlDataSourceEnumerator = SqlDataSourceEnumerator.Instance
datatable1 = sqldatasourceenumerator1.GetDataSources 
```

代码工作正常。我安装了 SQL Server 2005 Express 和 2008。

它显示的实例

```
Server Name:   Instance     Is Clustered  Version
SUPERCOMPUTER  SQLEXPRESS      No          9.00.3042.00
SUPERCOMPUTER  CBE             No          9.00.5000.00
SUPERCOMPUTER  SQL2008TEST     No         10.50.1600.1 
```

我想知道为什么它不显示 SQL Server 2008 的默认实例，就像它在 2005 中显示的那样（`SQLEXPRESS`）

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T16:27:04.723

确保：

1.  您正在查找的实例已实际安装（请参阅 SQL Server 配置管理器 > SQL Server 服务）
2.  实例已启动（同一个地方）
3.  SQL Browser 服务正在运行（控制面板 > 管理工具 > 服务）
4.  运行 SQL Server 的端口未被防火墙或其他方式阻止
5.  实例未设置为隐藏（您可以在 SQL Server 配置管理器 > SQL Server 网络配置 > 右键单击​​“[实例名称] 的协议”中查看此内容）：

![在此处输入图像描述](../Images/f9f8c6b94571c821ca34317f1210919f.png)

# mysql - 从MYSQL中的3个表中选择数据

> ID：14816128
> 
> 赞同：0
> 
> 时间：2013-02-11T16:13:35.967
> 
> 标签：mysql, sql, select

我正在尝试根据 login_id 进行查询以从 3 个表中获取用户名和他/她的 code_number。我有 4 个名为登录、导师、机构和学生的表。

这是我的表的结构。

> **登录表**
> login_id
> login_type
> 
> **导师表 导师**
> ID
> login_id导师
> 姓名导师
> 代码
> 
> **学院表**
> 学院
> _id login_id
> 学院_名称
> 学院_代码
> 
> **学生表**
> student_id
> login_id
> student_name
> student_code

当用户登录到站点 login_id 保存在 SESSION 上时，我需要检查登录的用户类型，识别用户后需要登录用户名和代码。

我的问题是我如何检查哪个用户（在这种情况下是导师、学院、学生）登录到网站，我怎样才能得到它的名称和代码？

希望有人帮助我...谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:18:42.247

如果你想返回`name`and `code`，那么你可以`JOIN`在桌子上。您的查询将与此类似：

```
select l.login_id,
  l.login_type,
  coalesce(t.tutor_name, i.institute_name, s.student_name) Name,
  coalesce(t.tutor_code, i.institute_code, s.student_code) Code
from login l
left join tutor t
  on l.login_id =t.login_id
left join institute i
  on l.login_id = i.login_id
left join student s
  on l.login_id = s.login_id 
```

将`COALESCE`返回第一个非空值。如果登录名只能属于其中一个表，那么即使用户是 a或`tutor`，使用它也会返回正确的值。`institute``student`

如果您想在单独的列中返回它，那么您可以使用：

```
select l.login_id,
  l.login_type,
  t.tutor_name,
  t.tutor_code,
  i.institute_name,
  i.institute_code,
  s.student_name,
  s.student_code
from login l
left join tutor t
  on l.login_id =t.login_id
left join institute i
  on l.login_id = i.login_id
left join student s
  on l.login_id = s.login_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T16:22:41.760

Here's one way to do it with `CASE` by checking the Login_Type:

```
SELECT 
    CASE Login_Type
        WHEN 'Tutor' THEN Tutor_Name
        WHEN 'Institute' THEN Institute_Name
        WHEN 'Student' THEN Student_Name
    END Name, 
    CASE Login_Type
        WHEN 'Tutor' THEN Tutor_Code
        WHEN 'Institute' THEN Institute_Code
        WHEN 'Student' THEN Student_Code
    END Code
FROM Login L
    LEFT JOIN Tutor T ON L.Login_Id = T.Login_Id
    LEFT JOIN Institute I ON L.Login_Id = I.Login_Id
    LEFT JOIN Student S ON L.Login_Id = S.Login_Id 
```

Good luck.

# ruby - 有没有办法懒惰地初始化哈希值？

> ID：14816130
> 
> 赞同：0
> 
> 时间：2013-02-11T16:13:37.057
> 
> 标签：ruby, hash, lazy-evaluation

我有一个像这样的哈希：

```
h = {
  a: '/users/sign_up',
  b: "/user/#{@user.id]}"
} 
```

后来我做`h[:b]`。

哈希值在哈希本身被初始化时被初始化。但是我希望`@user.id`每次被调用时`h[:b]`都被调用。

似乎不可能用 Ruby 的散列来做到这一点。但是有一些解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:19:16.870

您可以将 lambdas 用于哈希值，并在需要实际值时调用 lambda，例如：

```
h = {
  a: ->{'/users/sign_up'},
  b: ->{"/user/#{@user.id}"}
}

h[:b].call 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T16:23:14.040

```
h = {}
h.default_proc = proc do |hash, key|
  key == :b ? "/user/#{@user.id}" : nil
end
h[:a] #=> nil
h[:b] #=> "/user/<id>" 
```

# ruby - 为什么排序或宇宙飞船（飞碟）运算符（<=>）不能在 Ruby 中处理布尔值？

> ID：14816131
> 
> 赞同：15
> 
> 时间：2013-02-11T16:13:42.877
> 
> 标签：ruby, spaceship-operator

在“ [Is it possible to sort a list of objects based on if the individual object's response to a method?](https://stackoverflow.com/questions/14814966/is-it-possible-to-sort-a-list-of-objects-depending-on-if-the-individual-objects) ”中，我发现飞碟不适用于布尔值。

考虑：

红宝石 1.8.7：

```
[true, false].sort # => undefined method `<=>' for true:TrueClass (NoMethodError)
true <=> false     # => undefined method `<=>' for true:TrueClass (NoMethodError) 
```

红宝石 1.9.3：

```
[true, false].sort # => comparison of TrueClass with false failed (ArgumentError)
true <=> false     # => nil
true <=> true      # => 0
false <=> true     # => nil 
```

它可能与 true 和 false 没有规范的排序顺序有关，因为哪个先出现？但是，这对我来说听起来很弱。

这是一个错误`sort`吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-11T16:29:27.860

### 布尔值没有自然顺序。

Ruby 语言设计者可能认为为布尔值发明一种排序方式会让开发人员感到意外，因此他们故意省略了比较运算符。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-11T16:17:07.657

所谓的飞碟需要所有比较运算符（`<`, `>`, `==`）才能工作（技术上不是，但理论上肯定是这样）。 `true`并且`false`不小于或大于彼此。对于`nil`. 对于实际的解决方法，您可以“强制转换”为整数（0 表示假，1 表示真）。就像是：

```
[true, false, true].sort_by{|e| e ? 1 : 0} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-03T12:08:16.917

布尔值没有自然顺序。与 C 不同，false 不小于 true，它们只是等效且同样有效的状态。但是，可以使用块以任何您喜欢的方式配置排序，例如：

```
ary = [true, false, false, true]
ary.sort {|a,b|  a == b ? 0 : a ? 1 : -1 }

# => [false, false, true, true] 
```

颠倒顺序也很简单：

```
ary.sort {|a,b|  a == b ? 0 : a ? -1 : 1 }

# => [true, true, false, false] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-21T10:23:03.487

我知道这已经很老了，但最近这让我有点吃惊。但它是鲁比，对吧？做这个猴子补丁怎么样？

```
#! /usr/bin/env ruby

class TrueClass
  include Comparable

  def <=>(other)
    if other.class == FalseClass
      1
    elsif other.class == TrueClass
      0
    else
      nil
    end
  end
end

class FalseClass
  include Comparable

  def <=>(other)
    if other.class == TrueClass
      -1
    elsif other.class == FalseClass
      0
    else
      nil
    end
  end
end

puts "true <=> false: #{true <=> false}"
puts "false <=> true: #{false <=> true}"
puts "true <=> true: #{true <=> true}"
puts "false <=> false: #{false <=> false}"
puts "true <=> 13: #{true <=> 13}"
puts "true > false: #{true > false}"
puts "true < false: #{true < false}"
puts "true == false: #{true == false}"
puts "true == true: #{true == true}"
puts "false == false: #{false == false}"
puts "false < true: #{false < true}"
puts "[false, true, false].max: #{[false, true, false].max}"
puts "[false, true, false].min: #{[false, true, false].min}" 
```

# javascript - jQuery (JavaScript) 3 > 10 = 真

> ID：14816134
> 
> 赞同：0
> 
> 时间：2013-02-11T16:13:53.223
> 
> 标签：javascript, jquery

从输入值中检索整数值时，jQuery 似乎存在一些剥离问题。

我的代码：

```
 // Control the rating input field to only accept numeric values
    // -else set the values back to 0
    // For the highest value:
    $('.dsListItem .firstItem').keyup(function(){
        if (isNumber($(this).val()) && $(this).val() < $('.dsListItem .lastItem').val()) {
            console.log('FIRST: ' + $(this).val() + ' >>> ' + $('.dsListItem .lastItem').val());
            $(this).val($('.dsListItem .lastItem').val());
        }
    });
    // For the lowest value:
    $('.dsListItem .lastItem').keyup(function(){
        if (isNumber($(this).val()) && $(this).val() > $('.dsListItem .firstItem').val()) {
            console.log('LAST: ' + $(this).val() + ' >>> ' + $('.dsListItem .firstItem').val());
            $(this).val($('.dsListItem .firstItem').val());
        }
    }); 
```

Safari Inspector 告诉我：

最后: 11 >>> 10

最后：2 >>> 10

最后：1 >>> 10

只有 0 和 1 有效。如果 10 被验证为“1”，它也不应该通过 1 > 1，但它确实通过了。

我不明白为什么 console.log() 打印显示正确的整数，但是当我用它计算时，10 get 转换为 1。

我尝试用 ($(this).val() * 1) 转换数字，但这并没有改变任何东西，无论如何；该值已被检查为有效的数值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:43:19.767

如果您确定您使用的是数值，那么您必须使用 parseInt 转换它们，因此您可以确定 Javascript 也将与数字进行对话，而不是将数字与字符串进行比较！

我认为使用 parseInt 进行强制转换比通过 *1 指令进行强制转换...

# vba - Excel SUMPRODUCT 与基于 VBA 的条件

> ID：14816136
> 
> 赞同：1
> 
> 时间：2013-02-11T16:14:01.867
> 
> 标签：vba, excel

有谁知道如何在基于***工作表***的 SUMPRODUCT 调用中使用 VBA 函数？

这很好用，将 N 列中的值相加，其中 L 列包含“Y”，A 列包含与 K 列不同的值...

```
=SUMPRODUCT(--(Input!L1:L100="Y"), --(Input!A1:A100<>Input!K1:K100), Input!N1:N100) 
```

但我希望能够在我的第二个标准中应用更多的逻辑，而不仅仅是 A<>K，就像这样......

```
=SUMPRODUCT(--(Input!L1:L100="Y"), --(MatchNames(Input!A1:A100,Input!K1:K100)), Input!N1:N100) 
```

我的 VBA 中有一个名为 MatchNames 的函数，但我无法确定它需要返回什么才能工作。我尝试返回一个布尔整数数组（设置为 0 或 1），我尝试在返回结果之前转置结果，但没有任何效果。我已经通过 MatchNames 函数进行了调试，它确实返回了一些“有用”的东西（即布尔数组），所以并不是该函数在中途被炸毁，但我得到了#VALUE！当我尝试在 SUMPRODUCT 中使用它时。

这是我的 VBA 函数...

```
Public Function MatchNames(ByVal rng1 As Range, rng2 As Range) As Boolean()
    Dim blnOut() As Boolean
    Dim k As Long

    ReDim blnOut(rng1.Rows.Count - 1)

    For k = 1 To rng1.Rows.Count
        If rng1.Cells(k, 1).Value <> "" Then
            If rng1.Cells(k, 1).Value <> rng2.Cells(k, 1).Value Then
                blnOut(k - 1) = True
            End If
        End If
    Next

    MatchNames = blnOut
End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:31:10.613

我认为您的 MatchNames 数组需要按照您的建议进行**转置**（因为它似乎返回了相当于一行值的值 - 这不适用于 SUMPRODUCT 中的其他值列）。

我不知道你如何在 VBA 中转置它，但如果你不能这样做，那么在 SUMPRODUCT 中转置

`=SUMPRODUCT(--(input!L1:L100="Y"),--TRANSPOSE(MatchNames(input!A1:A100,input!K1:K100)), input!N1:N100)`

但是使用 TRANSPOSE 意味着公式现在需要“输入数组”`CTRL+SHIFT+ENTER`

...或者您可以使用 MMULT 将 1x100 范围乘以 100x1，即

`=MMULT(MatchNames(input!A1:A100,input!K1:K100)+0,input!N1:N100*(input!L1:L100="Y"))`

为了使后一个公式起作用，总和范围 - 输入！N1：N100 - 必须全部为数字

# javascript - 使用 jquery 或 qjax 显示和隐藏 div 元素的动画

> ID：14816147
> 
> 赞同：0
> 
> 时间：2013-02-11T16:14:22.507
> 
> 标签：javascript, jquery, ajax

我在stackoverflow上搜索了很多类似的问题，但无济于事。

我与你们的帮助人员成功地实现了一个代码，我感谢你们的帮助.. 现在我需要学习如何为 div 的隐藏设置动画..

我有一些在页面加载时显示的 div.. 现在这些 div 是基于一些单选按钮的值.. 单击一个按钮时有一个特定的 div 现在我有两个问题。

1.  我使用了 id 属性，因此它不会显示重复的内容（我该如何解决？）
2.  我想为 div 的隐藏设置动画.. 我该怎么做？

这是小提琴 [http://jsfiddle.net/qudT2/](http://jsfiddle.net/qudT2/)

jQuery代码：

```
$(document).ready(function() {
$("input[name$='type']").click(function() {
    var test = $(this).val();
    $("div.imgDisp").hide();
    $("#" + test).show();
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:28:51.747

```
$(document).ready(function() { 
    $("div.imgDisp").hide();
    $('[id="' + $(":radio:checked").val()+'"]').show();
    $(":radio").click(function() {      
        $("div.imgDisp").fadeOut('slow');
        $('[id="' + $(this).val()+'"]').fadeIn('slow');
    });
}); 
```

用于[演示](http://jsfiddle.net/nanoquantumtech/qudT2/3/)

# file - System.IO.File 缺少程序集引用

> ID：14816149
> 
> 赞同：0
> 
> 时间：2013-02-11T16:14:34.207
> 
> 标签：file, .net-4.5, .net

我正在尝试使用`System.IO.File.ReadAllLines`-method 读取文本文件，但弹出一个错误说

> 命名空间“System.IO”中不存在类型或命名空间“文件”（您是否缺少程序集引用？

我正在使用 .Net Framework 4.5 和 VS2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-21T00:36:42.037

构建 Windows 应用商店 (UWP) 应用程序时，您无法使用该程序集。

相反，[您必须使用不同的机制](https://docs.microsoft.com/en-us/windows/uwp/files/)。这种机制鼓励采用更现代的文件 I/O 视图，包括异步（非阻塞）访问使用缓冲区和库，以及支持可能不使用传统文件路径的更多类型的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:50:44.857

首先转到**解决方案资源管理器**并展开**引用**并检查列表中是否存在**系统**程序集。

如果那里没有，请右键单击引用并单击**添加引用**，然后从**.NET**选项卡中添加**系统**程序集

现在您应该在 References 列表中有**System 。**

现在您可以将命名空间 System.IO 导入为

```
using System.IO; 
```

注意**File** 是命名空间**System.IO中的一个类**

所以只需在代码中使用 File 类，如下所示。

```
File f = new File();//or whatever 
```

我知道最后一行就足够了，但为了完成而放下整件事。;)

# asp.net-mvc - ASP.Net MVC 捆绑和缩小

> ID：14816151
> 
> 赞同：14
> 
> 时间：2013-02-11T16:14:38.653
> 
> 标签：asp.net-mvc, asp.net-mvc-4

从开发环境转移到生产环境时，我在缩小 javascript 文件的方式上遇到了一些问题。似乎有些没有正确缩小，所以我一直在寻找一种不缩小特定捆绑包的方法。

```
 public static void RegisterBundles(BundleCollection _bundles)
    {
        _bundles.Add(new ScriptBundle("~/bundles/toNotMinify").Include(
            "~/Scripts/xxxxxx.js"
            ));

        _bundles.Add(new ScriptBundle("~/bundles/toMinify").Include(
            "~/Scripts/yyyyy.js"
            ));
        etc.. 
```

这是我的捆绑配置类中的基本布局。我想找到一种方法来缩小我的所有捆绑包，除了第一个。这可能吗？到目前为止，我发现实现类似目标的唯一解决方案是在全局范围内关闭缩小。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-11T16:23:41.943

您有几个选项，您可以使用以下示例替换您的`ScriptBundle`使用`Bundle`：

```
_bundles.Add(new Bundle("~/bundles/toNotMinify").Include(
    "~/Scripts/xxxxxx.js"
)); 
```

.. 或者您可以禁用新创建的捆绑包上的所有转换，如下所示：

```
var noMinify = new ScriptBundle("~/bundles/toNotMinify").Include(
    "~/Scripts/xxxxxx.js"
);
noMinify.Transforms.Clear();
_bundles.Add(noMinify); 
```

显然第一个解决方案更漂亮:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T16:25:22.180

您只需要声明一个通用的 Bundle 对象并指定您需要的转换：

```
var dontMinify = new Bundle("~/bundles/toNotMinify").Include(
                                        "~/Scripts/xxxxx.js");
            bundles.Add(dontMinify);

            var minify = new Bundle("~/bundles/toNotMinify").Include(
                "~/Scripts/yyyyyy.js");
            minify.Transforms.Add(new JsMinify());
            bundles.Add(minify); 
```

# c# - jQuery AJAX 调用返回空响应时间

> ID：14816164
> 
> 赞同：4
> 
> 时间：2013-02-11T16:15:14.610
> 
> 标签：c#, jquery, asp.net

我的页面上有一个链接，它创建一个 AJAX 调用页面本身并返回一个值。成功创建的服务器生成的响应变为空或有时AJAX的错误功能。我几乎尝试了所有方法，但无法提出解决方案。

这是我的 AJAX 函数：

```
var Ajax = {
    AjaxCall: function (uri, jsonData, callBack, postParams) {
        $.ajax({
            cache: false,
            type: "POST",
            url: uri + ((uri.indexOf("?") > -1) ? "&" : "?") + "rand=" + new Date().format("ssmmHHddMMyyyy"),
            data: JSON.stringify(jsonData),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                Ajax.AjaxCall_CallBack(msg, callBack, postParams);
            },
            error: function (msg) {
                Ajax.AjaxCall_CallBack_Error(msg);
            }
        });
    },

    AjaxCall_CallBack: function (msg, callBack, postParams) {
        callBack(msg, postParams);
    },

    AjaxCall_CallBack_Error: function (msg) {
        alert(msg.responseText);
    }
} 
```

并且该函数进行 AJAX 调用

```
Ajax.AjaxCall('dummypage.aspx?ajax=6&edit=1&uID=' + uID, null, callback_func, [uID, 'Test Text', 0]) 
```

从服务器生成的值是这样的：

```
Table tbl;
TableRow tr;
TableCell tc;
Label lbl;
DropDownList ddl;

tbl = new Table();
tr = new TableRow();

tc = new TableCell();
lbl = new Label();
lbl.Text = "Choose one"
tc.Controls.Add(lbl);
tr.Cells.Add(tc);

tc = new TableCell();
ddl = new DropDownList();
ddl.Items.Add("Choose", "-1"));
ddl.Items.Add("First", "1");
ddl.Items.Add("Second", "2");
ddl.ID = "ddlContentType";

tc.Controls.Add(ddl);
tr.Cells.Add(tc);

tbl.Rows.Add(tr);

StringBuilder sb = new StringBuilder();
StringWriter tw = new StringWriter(sb);
HtmlTextWriter hw = new HtmlTextWriter(tw);

tbl.RenderControl(hw);
string renderedValue = sb.ToString();
hw.Close();

return HttpUtility.JavaScriptStringEncode(renderedValue, true); 
```

我不明白为什么具有相同程序的同一页面上完全相同的结构有效，但不是这个？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:08:30.163

正如@gaurav 在[jQuery AJAX Call Returns null Response Time to Time](https://stackoverflow.com/questions/14816164/jquery-ajax-call-returns-null-response-time-to-time/14829052#comment20777020_14829052)中提到的那样，在某些浏览器上无法正确处理空数据。我处理空数据如下：

```
function RunAjaxCall(uri, jsonData, callBack, postParams) {
        $.ajax({
            type: "POST",
            url: uri + ((uri.indexOf("?") > -1) ? "&" : "?") + "rand=" + new Date().getTime(),
            **data: jsonData != null ? JSON.stringify(jsonData) : {},**
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            cache: "false",
            success: function (msg) {
                Success(msg, callBack, postParams);
            },
            error: function (msg) {
                Error(msg);
            }
        });
    }, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T09:14:17.963

当你有像这样奇怪的 ajax/WCF/webservice 行为时，唯一可以帮助你的是[Fiddler](http://www.fiddler2.com/fiddler2/)

它有助于查看正在发生的事情并分析请求和响应。

无论如何，作为最佳实践，您应该只传递数据以用 ajax 填充 html，而不是整个 html

# android - 将相机预览旋转到人像 Android OpenCV 相机

> ID：14816166
> 
> 赞同：40
> 
> 时间：2013-02-11T16:15:20.997
> 
> 标签：android, opencv, android-camera

我正在尝试使用 OpenCV 2.4.3.2 创建相机应用程序并进行一些 opencv 处理。我希望它能够有多个 UI 方向，而不仅仅是横向。

问题是当我将方向更改为纵向时，图像会侧向显示。

我知道[我可以在进行图像处理之前旋转输入图像](https://stackoverflow.com/questions/12949793/rotate-videocapture-in-opencv-on-android)（因此仅将方向保留为横向），这很好并且有效，但不能解决我的 UI 的其余部分将处于错误方向的问题.

我也尝试使用[此代码](https://stackoverflow.com/questions/3841122/android-camera-preview-is-sideways)将相机旋转 90 度，但它似乎不起作用。

```
mCamera.setDisplayOrientation(90); 
```

它要么没有效果，要么有时只是导致预览变黑

有没有人用 OpenCV 成功地做到了这一点？我的课程从 JavaCameraView 扩展而来。 ![带有横向预览的纵向图像](../Images/c333f24dd50ed464cd38549491379d55.png)

# 编辑

我做了一个改进，那就是我在 OpenCV 中旋转了图像，因为它显示在 CameraBridgeViewBase.java 类中。

在交付和并条方法中：

```
if (canvas != null) {
            canvas.drawColor(0, android.graphics.PorterDuff.Mode.CLEAR);
            //canvas.drawBitmap(mCacheBitmap, (canvas.getWidth() - mCacheBitmap.getWidth()) / 2, (canvas.getHeight() - mCacheBitmap.getHeight()) / 2, null);
            //Change to support portrait view
            Matrix matrix = new Matrix();
            matrix.preTranslate((canvas.getWidth() - mCacheBitmap.getWidth()) / 2,(canvas.getHeight() - mCacheBitmap.getHeight()) / 2);

            if(getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT)
                matrix.postRotate(90f,(canvas.getWidth()) / 2,(canvas.getHeight()) / 2);
            canvas.drawBitmap(mCacheBitmap, matrix, new Paint()); 
```

...基本上，这只是像这样旋转输入图像

![输入图像旋转 90](../Images/553da3890b6a376fab60cfe58915fa7c.png)

这更好，但我显然希望这是全屏的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-10-06T23:37:18.797

我在尝试实现 OpenCV 时遇到了同样的问题。我能够通过对 DeliverAndDrawFrame 方法进行以下更改来修复它。

1.  旋转画布对象

    ```
    Canvas canvas = getHolder().lockCanvas();
    // Rotate canvas to 90 degrees
    canvas.rotate(90f, canvas.getWidth()/2, canvas.getHeight()/2); 
    ```

2.  在绘制之前调整位图大小以适应画布的整个大小

    ```
    // Resize
    Bitmap bitmap = Bitmap.createScaledBitmap(mCacheBitmap, canvas.getHeight(), canvas.getWidth(), true);
    // Use bitmap instead of mCacheBitmap
    canvas.drawBitmap(bitmap, new Rect(0,0,bitmap.getWidth(), bitmap.getHeight()), new Rect(
        (int)((canvas.getWidth() - mScale*bitmap.getWidth()) / 2),
        (int)((canvas.getHeight() - mScale*bitmap.getHeight()) / 2),
        (int)((canvas.getWidth() - mScale*bitmap.getWidth()) / 2 + mScale*bitmap.getWidth()),
        (int）((canvas.getHeight() - mScale*bitmap.getHeight()) / 2 + mScale*bitmap.getHeight()
      )), null);

    // Unlock canvas
    getHolder().unlockCanvasAndPost(canvas); 
    ```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-02-28T07:54:20.960

实际上，您可以使宽度或高度匹配父级（全屏）。

```
if (canvas != null) {
        Bitmap bitmap = Bitmap.createScaledBitmap(mCacheBitmap, canvas.getHeight(), canvas.getWidth(), true);
        canvas.rotate(90,0,0);
        float scale = canvas.getWidth() / (float)bitmap.getHeight();
        float scale2 = canvas.getHeight() / (float)bitmap.getWidth();
        if(scale2 > scale){
            scale = scale2;
        }
        if (scale != 0) {
            canvas.scale(scale, scale,0,0);
        }
        canvas.drawBitmap(bitmap, 0, -bitmap.getHeight(), null); 
```

...

此外，您可以使预览尺寸大于屏幕。只需修改比例。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-05-26T08:18:06.837

我修改了 CameraBridgeViewBase.java 如下：

```
protected Size calculateCameraFrameSize(List<?> supportedSizes, ListItemAccessor accessor, int surfaceWidth, int surfaceHeight) {
    int calcWidth = 0;
    int calcHeight = 0;

    if(surfaceHeight > surfaceWidth){
        int temp = surfaceHeight;
        surfaceHeight = surfaceWidth;
        surfaceWidth = temp;
    } 
```

在函数“deliverAndDrawFrame”中：

```
 if (mScale != 0) {
                if(canvas.getWidth() > canvas.getHeight()) {
                canvas.drawBitmap(mCacheBitmap, new Rect(0,0,mCacheBitmap.getWidth(), mCacheBitmap.getHeight()),
                     new Rect((int)((canvas.getWidth() - mScale*mCacheBitmap.getWidth()) / 2),
                     (int)((canvas.getHeight() - mScale*mCacheBitmap.getHeight()) / 2),
                     (int)((canvas.getWidth() - mScale*mCacheBitmap.getWidth()) / 2 + mScale*mCacheBitmap.getWidth()),
                     (int)((canvas.getHeight() - mScale*mCacheBitmap.getHeight()) / 2 + mScale*mCacheBitmap.getHeight())), null);
                } else {
                    canvas.drawBitmap(mCacheBitmap, rotateMe(canvas, mCacheBitmap), null);
                } 
```

其中 rotateMe 定义如下：

```
private Matrix rotateMe(Canvas canvas, Bitmap bm) {
    // TODO Auto-generated method stub
    Matrix mtx=new Matrix();
    float scale = (float) canvas.getWidth() / (float) bm.getHeight();
    mtx.preTranslate((canvas.getWidth() - bm.getWidth())/2, (canvas.getHeight() - bm.getHeight())/2);
    mtx.postRotate(90,canvas.getWidth()/2, canvas.getHeight()/2);
    mtx.postScale(scale, scale, canvas.getWidth()/2 , canvas.getHeight()/2 );
    return mtx;
} 
```

与横向模式相比，预览 FPS 较慢，因为计算开销较大。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-02-10T11:48:02.203

不幸的是 Opencv4Android 不支持人像相机。但是有一种方法可以克服它。1）编写您的自定义相机并将其方向设置为纵向。2）注册它的预览回调。3）在`onPreviewFrame(byte[]data, Camera camera)`创建`Mat`预览字节时：

```
Mat mat = new Mat(previewSize.height, previewSize.width, CvType.CV_8UC1);
mat.put(0, 0, data);

Core.transpose(mat, mat);
Core.flip(mat, mat, -1); // rotates Mat to portrait 
```

`CvType`取决于您的相机使用的预览格式。

PS。完成后不要忘记释放您创建的所有 Mat 实例。

聚苯乙烯。最好在单独的线程上管理您的相机，以免在进行某些检测时使 UI 线程过载。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-03-17T10:40:27.593

我也有同样的问题，已经解决了！！还有我的解决方案：

作为第一部分，在`CameraBridgeViewBase.Java`两个构造函数中，添加WindowManager的初始化：

```
public CameraBridgeViewBase(Context context, int cameraId) {  
   super(context);  
   mCameraIndex = cameraId;  
   getHolder().addCallback(this);  
   mMaxWidth = MAX_UNSPECIFIED;  
   mMaxHeight = MAX_UNSPECIFIED;  
   windowManager = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);  
}  

public CameraBridgeViewBase(Context context, AttributeSet attrs) {  
   super(context, attrs);  
   int count = attrs.getAttributeCount();  
   Log.d(TAG, "Attr count: " + Integer.valueOf(count));  

   TypedArray styledAttrs = getContext().obtainStyledAttributes(attrs, R.styleable.CameraBridgeViewBase);  
   if (styledAttrs.getBoolean(R.styleable.CameraBridgeViewBase_show_fps, false))  
       enableFpsMeter();  

   mCameraIndex = styledAttrs.getInt(R.styleable.CameraBridgeViewBase_camera_id, -1);  

   getHolder().addCallback(this);  
   mMaxWidth = MAX_UNSPECIFIED;  
   mMaxHeight = MAX_UNSPECIFIED;  
   windowManager = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);  
   styledAttrs.recycle();  
} 
```

然后，您需要替换功能`deliverAndDrawFrame(CvCameraViewFrame frame)`如下，

```
protected void deliverAndDrawFrame(CvCameraViewFrame frame) {  
  Mat modified;  

  if (mListener != null) {  
      modified = mListener.onCameraFrame(frame);  
  } else {  
      modified = frame.rgba();  
  }  

  boolean bmpValid = true;  
  if (modified != null) {  
      try {  
          Utils.matToBitmap(modified, mCacheBitmap);  
      } catch (Exception e) {  
          Log.e(TAG, "Mat type: " + modified);  
          Log.e(TAG, "Bitmap type: " + mCacheBitmap.getWidth() + "*" + mCacheBitmap.getHeight());  
          Log.e(TAG, "Utils.matToBitmap() throws an exception: " + e.getMessage());  
          bmpValid = false;  
      }  
  }  

  if (bmpValid && mCacheBitmap != null) {  
      Canvas canvas = getHolder().lockCanvas();  
      if (canvas != null) {  
          canvas.drawColor(0, android.graphics.PorterDuff.Mode.CLEAR);  
          int rotation = windowManager.getDefaultDisplay().getRotation();  
          int degrees = 0;  
          // config degrees as you need  
          switch (rotation) {  
              case Surface.ROTATION_0:  
                  degrees = 90;  
                  break;  
              case Surface.ROTATION_90:  
                  degrees = 0;  
                  break;  
              case Surface.ROTATION_180:  
                  degrees = 270;  
                  break;  
              case Surface.ROTATION_270:  
                  degrees = 180;  
                  break;  
          }  

          Matrix matrix = new Matrix();  
          matrix.postRotate(degrees);  
          Bitmap outputBitmap = Bitmap.createBitmap(mCacheBitmap, 0, 0, mCacheBitmap.getWidth(), mCacheBitmap.getHeight(), matrix, true);  

          if (outputBitmap.getWidth() <= canvas.getWidth()) {  
              mScale = getRatio(outputBitmap.getWidth(), outputBitmap.getHeight(), canvas.getWidth(), canvas.getHeight());  
          } else {  
              mScale = getRatio(canvas.getWidth(), canvas.getHeight(), outputBitmap.getWidth(), outputBitmap.getHeight());  
          }  

          if (mScale != 0) {  
              canvas.scale(mScale, mScale, 0, 0);  
          }  
          Log.d(TAG, "mStretch value: " + mScale);  

          canvas.drawBitmap(outputBitmap, 0, 0, null);  

          if (mFpsMeter != null) {  
              mFpsMeter.measure();  
              mFpsMeter.draw(canvas, 20, 30);  
          }  
          getHolder().unlockCanvasAndPost(canvas);
      }  
   }  
} 
```

并额外添加此功能，

```
private float getRatio(int widthSource, int heightSource, int widthTarget, int heightTarget) {  
   if (widthTarget <= heightTarget) {  
       return (float) heightTarget / (float) heightSource;  
   } else {  
       return (float) widthTarget / (float) widthSource;  
   }  
} 
```

没关系，如果此答案对您有用，请标记“已接受”帮助声誉

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-07-24T10:49:30.487

与其他答案一样，我编写了个人版本的***DeliverAndDrawFrame***（我还通过注释通知了我的代码开始和结束的位置）：

```
protected void deliverAndDrawFrame(CvCameraViewFrame frame) {
    Mat modified;

    if (mListener != null) {
        modified = mListener.onCameraFrame(frame);
    } else {
        modified = frame.rgba();
    }

    boolean bmpValid = true;
    if (modified != null) {
        try {
            Utils.matToBitmap(modified, mCacheBitmap);
        } catch(Exception e) {
            Log.e(TAG, "Mat type: " + modified);
            Log.e(TAG, "Bitmap type: " + mCacheBitmap.getWidth() + "*" + mCacheBitmap.getHeight());
            Log.e(TAG, "Utils.matToBitmap() throws an exception: " + e.getMessage());
            bmpValid = false;
        }
    }

    if (bmpValid && mCacheBitmap != null) {
        Canvas canvas = getHolder().lockCanvas();
        if (canvas != null) {
            canvas.drawColor(0, android.graphics.PorterDuff.Mode.CLEAR);
            if (BuildConfig.DEBUG) {
                Log.d(TAG, "mStretch value: " + mScale);
            }

            // Start of the fix
            Matrix matrix = new Matrix();
            matrix.preTranslate( ( canvas.getWidth() - mCacheBitmap.getWidth() ) / 2f, ( canvas.getHeight() - mCacheBitmap.getHeight() ) / 2f );
            matrix.postRotate( 90f, ( canvas.getWidth()) / 2f, canvas.getHeight() / 2f );
            float scale = (float) canvas.getWidth() / (float) mCacheBitmap.getHeight();
            matrix.postScale(scale, scale, canvas.getWidth() / 2f , canvas.getHeight() / 2f );
            canvas.drawBitmap( mCacheBitmap, matrix, null );

            // Back to original OpenCV code
            if (mFpsMeter != null) {
                mFpsMeter.measure();
                mFpsMeter.draw(canvas, 20, 30);
            }

            getHolder().unlockCanvasAndPost(canvas);
        }
    }

} 
```

预览现在处于纵向模式，如您所见：

[![纵向预览](../Images/2ed74ce7b639b2c9ee4e13897d390f97.png)](https://i.stack.imgur.com/HDwPk.jpg)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-05-19T10:33:57.863

这里的所有答案都是黑客。我更喜欢这个解决方案：

JavaCameraView 代码的变化：

```
mBuffer = new byte[size];
mCamera.setDisplayOrientation(90); //add this
mCamera.addCallbackBuffer(mBuffer); 
```

第二个变化：

```
//                    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
//                        mSurfaceTexture = new SurfaceTexture(MAGIC_TEXTURE_ID);
//                        mCamera.setPreviewTexture(mSurfaceTexture);
//                    } else
//                       mCamera.setPreviewDisplay(null);
                    mCamera.setPreviewDisplay(getHolder()); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-08-08T03:03:30.970

似乎新的 OpenCV`CameraBridgeViewBase.java`类太高级了，没有对相机预览的布局提供足够的控制。看看我的[示例代码](https://stackoverflow.com/questions/17682345)，它基于一些较旧的 OpenCV 示例并使用纯 Android 代码。要使用传入的字节数组`onPreviewFrame`，`put()`将其转换为 Mat 并从 YUV 转换为 RGB：

```
mYuv = new Mat(previewHeight + previewHeight/2, previewWidth, CvType.CV_8UC1);
mYuv.put(0, 0, mBuffer);
Imgproc.cvtColor(mYuv, mRgba, Imgproc.COLOR_YUV420sp2RGBA, 4); 
```

您可能可以在 Internet 上找到旧的 OpenCV4Android 示例，尽管它们是在几个版本之前取出的。但是，链接的示例代码和上面的代码片段应该足以让您入门。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-02-19T05:42:56.047

如果您使用的是 openCV 2.4.9 ，请尝试： 1) 在您的代码中复制 opencv 教程混合处理的内容；2）纠正不匹配的错误（活动名称和可能的布局参考）；`android:screenOrientation ="landscape"` 3）通过添加4）更正未成年人错误并运行来修改您的清单！！！！bbaamm（现在应该可以正常工作了）

注意：使用此方法，当手机处于纵向位置时，状态栏会出现在右侧。由于我们正在开发相机项目，我建议您从预览中删除状态栏。

希望能帮助到你 ！！！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-04-14T12:44:37.787

你必须考虑几件事情：

*   onPreviewFrame() 始终在其组装的旋转中提供原始相机数据
*   getSupportedPreviewSizes() 给出相应的纵横比
*   算法需要分析纵向框架以正确检测对象。
*   为存储结果帧而创建的位图（Java 端）也需要正确的纵横比

因此，为了获得快速和高分辨率的解决方案，我更改了 JavaCameraView.java 和我的 JNI 部分。在 JavaCameraView.java 中：

```
...

      if (sizes != null) {
         /* Select the size that fits surface considering maximum size allowed */
         Size frameSize;
         if(width > height)
         {
            frameSize = calculateCameraFrameSize(sizes, new JavaCameraSizeAccessor(), width, height);
         }else{
            frameSize = calculateCameraFrameSize(sizes, new JavaCameraSizeAccessor(), height, width);
         }
...

         mCamera.setParameters(params);
         params = mCamera.getParameters();

         int bufFrameWidth, bufFrameHeight;
         bufFrameWidth = params.getPreviewSize().width;
         bufFrameHeight = params.getPreviewSize().height;

         if(width > height) {
             mFrameWidth = params.getPreviewSize().width;
             mFrameHeight = params.getPreviewSize().height;
         }else{
             mFrameWidth = params.getPreviewSize().height;
             mFrameHeight = params.getPreviewSize().width;
         }
...

         mFrameChain = new Mat[2];
         mFrameChain[0] = new Mat(bufFrameHeight + (bufFrameHeight/2), bufFrameWidth, CvType.CV_8UC1);
         mFrameChain[1] = new Mat(bufFrameHeight + (bufFrameHeight/2), bufFrameWidth, CvType.CV_8UC1);

         AllocateCache();

         mCameraFrame = new JavaCameraFrame[2];
         mCameraFrame[0] = new JavaCameraFrame(mFrameChain[0], bufFrameWidth, bufFrameHeight);
         mCameraFrame[1] = new JavaCameraFrame(mFrameChain[1], bufFrameWidth, bufFrameHeight); 
```

通过这些更改，我们确保我们使用可用于纵向的最高结果（在 calculateCameraFrameSize 中切换高度/宽度）。我们仍然将横向作为 onPreviewFrame() 的输入处理，但创建了一个位图以纵向绘制 (AllocateCache)。

最后，我们需要为算法提供纵向框架，以便让他检测“站立”对象并将其返回以保存和渲染位图。因此，对您的活动进行以下修改：

```
public Mat rot90(Mat matImage, int rotflag){
    //1=CW, 2=CCW, 3=180
    Mat rotated = new Mat();
    if (rotflag == 1){
        rotated = matImage.t();
        flip(rotated, rotated, 1); //transpose+flip(1)=CW
    } else if (rotflag == 2) {
        rotated = matImage.t();
        flip(rotated, rotated,0); //transpose+flip(0)=CCW
    } else if (rotflag ==3){
        flip(matImage, rotated,-1);    //flip(-1)=180
    } else if (rotflag != 0){ //if not 0,1,2,3:
       Log.e(TAG, "Unknown rotation flag("+rotflag+")");
    }
    return rotated;
}

public Mat onCameraFrame(CvCameraViewFrame inputFrame) {

    mRgba = rot90(inputFrame.rgba(), 1);
    mGray = rot90(inputFrame.gray(), 1);
... 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-21T12:09:26.357

我已经使用 CameraBridgeViewBase 进行纵向定位，但我必须在 OpenCV 中更改 JavaCameraView.java :( 下一步是这个想法：在相机初始化之后，执行下一步

```
setDisplayOrientation(mCamera, 90);
mCamera.setPreviewDisplay(getHolder()); 
```

和 setDisplayOrientation 方法

```
protected void setDisplayOrientation(Camera camera, int angle){
    Method downPolymorphic;
    try
    {
        downPolymorphic = camera.getClass().getMethod("setDisplayOrientation", new Class[] { int.class });
        if (downPolymorphic != null)
            downPolymorphic.invoke(camera, new Object[] { angle });
    }
    catch (Exception e1)
    {
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-04-05T00:57:40.897

也许这对任何人都有帮助。使用 opencv343 在 android 9 上测试。现在这个全屏和检测人脸在纵向和横向模式下。CameraBridgeViewBase 类的小改动：

```
private final Matrix matrix = new Matrix(); 
```

......改变deliverAndDrawFrame()方法：

```
protected void deliverAndDrawFrame(CvCameraViewFrame frame) {
    Mat modified;

    if (mListener != null) {
        modified = mListener.onCameraFrame(frame);
    } else {
        modified = frame.rgba();
    }

    boolean bmpValid = true;
    if (modified != null) {
        try {
            Utils.matToBitmap(modified, mCacheBitmap);
        } catch(Exception e) {
            Log.e(TAG, "Mat type: " + modified);
            Log.e(TAG, "Bitmap type: " + mCacheBitmap.getWidth() + "*" + mCacheBitmap.getHeight());
            Log.e(TAG, "Utils.matToBitmap() throws an exception: " + e.getMessage());
            bmpValid = false;
        }
    }

    if (bmpValid && mCacheBitmap != null) {
        int currentOrientation = getResources().getConfiguration().orientation;
        if (currentOrientation == Configuration.ORIENTATION_LANDSCAPE) {
            Canvas canvas = getHolder().lockCanvas();
            if (canvas != null) {
                canvas.drawColor(0, android.graphics.PorterDuff.Mode.CLEAR);
                if (BuildConfig.DEBUG)
                    Log.d(TAG, "mStretch value: " + mScale);

                if (mScale != 0) {
                    canvas.drawBitmap(mCacheBitmap, new Rect(0,0,mCacheBitmap.getWidth(), mCacheBitmap.getHeight()),
                            new Rect((int)((canvas.getWidth() - mScale*mCacheBitmap.getWidth()) / 2),
                                    (int)((canvas.getHeight() - mScale*mCacheBitmap.getHeight()) / 2),
                                    (int)((canvas.getWidth() - mScale*mCacheBitmap.getWidth()) / 2 + mScale*mCacheBitmap.getWidth()),
                                    (int)((canvas.getHeight() - mScale*mCacheBitmap.getHeight()) / 2 + mScale*mCacheBitmap.getHeight())), null);

                } else {
                    canvas.drawBitmap(mCacheBitmap, new Rect(0,0,mCacheBitmap.getWidth(), mCacheBitmap.getHeight()),
                            new Rect((canvas.getWidth() - mCacheBitmap.getWidth()) / 2,
                                    (canvas.getHeight() - mCacheBitmap.getHeight()) / 2,
                                    (canvas.getWidth() - mCacheBitmap.getWidth()) / 2 + mCacheBitmap.getWidth(),
                                    (canvas.getHeight() - mCacheBitmap.getHeight()) / 2 + mCacheBitmap.getHeight()), null);
                }

                if (mFpsMeter != null) {
                    mFpsMeter.measure();
                    mFpsMeter.draw(canvas, 20, 30);
                }
                getHolder().unlockCanvasAndPost(canvas);
            }
        } else {
            Canvas canvas = getHolder().lockCanvas();
            if (canvas != null) {
                int saveCount = canvas.save();
                canvas.setMatrix(matrix);
                mScale = Math.max((float) canvas.getHeight() / mCacheBitmap.getWidth(), (float) canvas.getWidth() / mCacheBitmap.getHeight());
                canvas.drawColor(0, android.graphics.PorterDuff.Mode.CLEAR);

                if (mScale != 0) {
                    canvas.drawBitmap(mCacheBitmap, new Rect(0,0,mCacheBitmap.getWidth(), mCacheBitmap.getHeight()),
                            new Rect((int)((canvas.getWidth() - mCacheBitmap.getWidth()) - mCacheBitmap.getWidth())/2,
                                    (int)(canvas.getHeight() - mScale*mCacheBitmap.getHeight() - mScale*mCacheBitmap.getHeight()/2),
                                    (int)((canvas.getWidth() - mScale*mCacheBitmap.getWidth()) / 2 + mScale*mCacheBitmap.getWidth()),
                                    (int)((canvas.getHeight() - mCacheBitmap.getHeight()) / 2 + mScale*mCacheBitmap.getHeight())), null);

                } else {
                    canvas.drawBitmap(mCacheBitmap, new Rect(0, 0, mCacheBitmap.getWidth(), mCacheBitmap.getHeight()),
                            new Rect((canvas.getWidth() - mCacheBitmap.getWidth()) / 2,
                                    (canvas.getHeight() - mCacheBitmap.getHeight()) / 2,
                                    (canvas.getWidth() - mCacheBitmap.getWidth()) / 2 + mCacheBitmap.getWidth(),
                                    (canvas.getHeight() - mCacheBitmap.getHeight()) / 2 + mCacheBitmap.getHeight()), null);
                }
                canvas.restoreToCount(saveCount);

                if (mFpsMeter != null) {
                    mFpsMeter.measure();
                    mFpsMeter.draw(canvas, 20, 30);
                }
                getHolder().unlockCanvasAndPost(canvas);
            }
        }
    }
} 
```

在 MainActivity 中：

```
public Mat rotateMat(Mat matImage) {
    Mat rotated = matImage.t();
    Core.flip(rotated, rotated, 1);
    return rotated;
}

@Override
public Mat onCameraFrame(CameraBridgeViewBase.CvCameraViewFrame inputFrame) {
    MatOfRect faces = new MatOfRect();
    int currentOrientation = getResources().getConfiguration().orientation;
    if (currentOrientation == Configuration.ORIENTATION_LANDSCAPE) {
        mRgba = inputFrame.rgba();
        mGray = inputFrame.gray();
        int height = mGray.rows();
        if (Math.round(height * 0.2) > 0) {
            mFaceSize = (int) Math.round(height * 0.2);
        }

        cascadeClassifier.detectMultiScale(mGray, faces, 1.1, 3, 2,
                new Size(mFaceSize, mFaceSize));
        Rect[] facesArray = faces.toArray();
        for (int i = 0; i < facesArray.length; i++) {
            rectangle(mRgba, facesArray[i].tl(), facesArray[i].br(), FACE_RECT_COLOR, 3);
        }
    } else {

        mRgba = inputFrame.rgba();
        mGray = rotateMat(inputFrame.gray());

        if (mFaceSize == 0) {
            int height = mGray.cols();
            if (Math.round(height * 0.2) > 0) {
                mFaceSize = (int) Math.round(height * 0.2);
            }
        }
        Mat newMat = rotateMat(mRgba);
        if(!isBackCameraOn){
            flip(newMat, newMat, -1);
            flip(mGray, mGray, -1);
        }
        if (cascadeClassifier != null)
            cascadeClassifier.detectMultiScale(mGray, faces, 1.1, 3, 2, new Size(mFaceSize, mFaceSize));
        mGray.release();

        Rect[] facesArray = faces.toArray();
        for (int i = 0; i < facesArray.length; i++) {
            rectangle(newMat, facesArray[i].tl(), facesArray[i].br(), FACE_RECT_COLOR, 3);
        }

        Imgproc.resize(newMat, mRgba, new Size(mRgba.width(), mRgba.height()));

        newMat.release();
    }

    if(!isBackCameraOn){
        flip(mRgba, mRgba, 1);
        flip(mGray, mGray, 1);
    }

    return mRgba;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-08-29T19:58:58.550

感谢@Kaye Wrobleski 的回答。我已将其扩展为允许横向和纵向。这基本上只是一个额外的代码，允许在提供横向方向的默认代码和他的纵向代码之间轻松切换。

将他的代码作为新方法插入 CameraBridgeViewBase.java

```
protected void deliverAndDrawFramePortrait(CvCameraViewFrame frame) {
        Mat modified;

        if (mListener != null) {
            modified = mListener.onCameraFrame(frame);
        } else {
            modified = frame.rgba();
        }

        boolean bmpValid = true;
        if (modified != null) {
            try {
                Utils.matToBitmap(modified, mCacheBitmap);
            } catch(Exception e) {
                Log.e(TAG, "Mat type: " + modified);
                Log.e(TAG, "Bitmap type: " + mCacheBitmap.getWidth() + "*" + mCacheBitmap.getHeight());
                Log.e(TAG, "Utils.matToBitmap() throws an exception: " + e.getMessage());
                bmpValid = false;
            }
        }

        if (bmpValid && mCacheBitmap != null) {
            Canvas canvas = getHolder().lockCanvas();
            // Rotate canvas to 90 degrees
            canvas.rotate(90f, canvas.getWidth()/2, canvas.getHeight()/2);
            if (canvas != null) {
                canvas.drawColor(0, android.graphics.PorterDuff.Mode.CLEAR);
                Log.d(TAG, "mStretch value: " + mScale);

                if (mScale != 0) {
                    // Resize
                    Bitmap bitmap = Bitmap.createScaledBitmap(mCacheBitmap, canvas.getHeight(), canvas.getWidth(), true);
                    // Use bitmap instead of mCacheBitmap
                    canvas.drawBitmap(bitmap, new Rect(0,0,bitmap.getWidth(), bitmap.getHeight()), new Rect(
                            (int)((canvas.getWidth() - mScale*bitmap.getWidth()) / 2),
                            (int)((canvas.getHeight() - mScale*bitmap.getHeight()) / 2),
                            (int)((canvas.getWidth() - mScale*bitmap.getWidth()) / 2 + mScale*bitmap.getWidth()),
                            (int)((canvas.getHeight() - mScale*bitmap.getHeight()) / 2 + mScale*bitmap.getHeight())), null);
                } else {
                    Bitmap bitmap = Bitmap.createScaledBitmap(mCacheBitmap, canvas.getHeight(), canvas.getWidth(), true);
                    // Use bitmap instead of mCacheBitmap
                    canvas.drawBitmap(bitmap, new Rect(0,0,bitmap.getWidth(), bitmap.getHeight()), new Rect(
                            (int)((canvas.getWidth() - bitmap.getWidth()) / 2),
                            (int)((canvas.getHeight() - bitmap.getHeight()) / 2),
                            (int)((canvas.getWidth() - bitmap.getWidth()) / 2 + bitmap.getWidth()),
                            (int)((canvas.getHeight() - bitmap.getHeight()) / 2 + bitmap.getHeight())), null);
                }

                if (mFpsMeter != null) {
                    mFpsMeter.measure();
                    mFpsMeter.draw(canvas, 20, 30);
                }
                getHolder().unlockCanvasAndPost(canvas);
            }
        }
    } 
```

然后修改JavaCameraView.java

添加一个新变量来跟踪我们是处于纵向还是横向模式

`private boolean portraitMode;`

添加两种设置方向模式的方法

```
public void setLandscapeMode() {
        portraitMode = false;
    }
    public void setPortraitMode() {
        portraitMode = true;
    } 
```

现在在 JavaCameraView CameraWorkerClass, run() 方法中替换这些行

```
if (!mFrameChain[1 - mChainIdx].empty())
                        deliverAndDrawFrame(mCameraFrame[1 - mChainIdx]); 
```

使用这些行：

```
if (!mFrameChain[1 - mChainIdx].empty()) {
                        if (!portraitMode) {
                            deliverAndDrawFrame(mCameraFrame[1 - mChainIdx]);
                        } else {
                            deliverAndDrawFramePortrait(mCameraFrame[1 - mChainIdx]);
                        }
                    } 
```

要在方向之间切换，只需在 JavaCameraView 对象上调用 setLandscapeMode() 或 setPortraitMode()。

请注意，反向纵向和反向横向仍然是颠倒的。您需要将它们旋转 180 度以使它们正面朝上，这可以通过 OpenCV 的 warpAffine() 方法轻松完成。请注意，使用后置摄像头 (LENS_FACING_BACK) 时，人像模式会将图像上下翻转。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-04-08T04:00:35.430

另一种解决方案。我认为这更好

```
protected void deliverAndDrawFrame(CvCameraViewFrame frame) {
    Mat modified;

    if (mListener != null) {
        modified = mListener.onCameraFrame(frame);
    } else {
        modified = frame.rgba();
    }

    boolean bmpValid = true;
    if (modified != null) {
        try {
            Utils.matToBitmap(modified, mCacheBitmap);
        } catch(Exception e) {
            Log.e(TAG, "Mat type: " + modified);
            Log.e(TAG, "Bitmap type: " + mCacheBitmap.getWidth() + "*" + mCacheBitmap.getHeight());
            Log.e(TAG, "Utils.matToBitmap() throws an exception: " + e.getMessage());
            bmpValid = false;
        }
    }

    if (bmpValid && mCacheBitmap != null) {
        Canvas canvas = getHolder().lockCanvas();
        if (canvas != null) {
            canvas.drawColor(0, android.graphics.PorterDuff.Mode.CLEAR);
            if (BuildConfig.DEBUG)
                Log.d(TAG, "mStretch value: " + mScale);

            int currentOrientation = getResources().getConfiguration().orientation;
            if (currentOrientation == Configuration.ORIENTATION_LANDSCAPE) {
                if (mScale != 0) {
                    canvas.drawBitmap(mCacheBitmap, new Rect(0,0,mCacheBitmap.getWidth(), mCacheBitmap.getHeight()),
                            new Rect((int)((canvas.getWidth() - mScale*mCacheBitmap.getWidth()) / 2),
                                    (int)((canvas.getHeight() - mScale*mCacheBitmap.getHeight()) / 2),
                                    (int)((canvas.getWidth() - mScale*mCacheBitmap.getWidth()) / 2 + mScale*mCacheBitmap.getWidth()),
                                    (int)((canvas.getHeight() - mScale*mCacheBitmap.getHeight()) / 2 + mScale*mCacheBitmap.getHeight())), null);
                } else {
                    canvas.drawBitmap(mCacheBitmap, new Rect(0,0,mCacheBitmap.getWidth(), mCacheBitmap.getHeight()),
                            new Rect((canvas.getWidth() - mCacheBitmap.getWidth()) / 2,
                                    (canvas.getHeight() - mCacheBitmap.getHeight()) / 2,
                                    (canvas.getWidth() - mCacheBitmap.getWidth()) / 2 + mCacheBitmap.getWidth(),
                                    (canvas.getHeight() - mCacheBitmap.getHeight()) / 2 + mCacheBitmap.getHeight()), null);
                }
            } else {

                if (mScale != 0) {
                    Bitmap bitmap = Bitmap.createScaledBitmap(mCacheBitmap, canvas.getHeight(), canvas.getWidth(), true);
                    canvas.drawBitmap(bitmap, new Rect(0,0,bitmap.getWidth(), bitmap.getHeight()), new Rect(
                            (int)((canvas.getWidth() - mScale*bitmap.getWidth()) / 2),
                            (int)(0),
                            (int)((canvas.getWidth() - mScale*bitmap.getWidth()) / 2 + mScale*bitmap.getWidth()),
                            (int)((canvas.getHeight()))), null);
                } else {
                    Bitmap bitmap = Bitmap.createScaledBitmap(mCacheBitmap, canvas.getHeight(), canvas.getWidth(), true);
                    canvas.drawBitmap(bitmap, new Rect(0,0,bitmap.getWidth(), bitmap.getHeight()), new Rect(
                            (int)((canvas.getWidth() - bitmap.getWidth()) / 2),
                            (int)(0),
                            (int)((canvas.getWidth() - bitmap.getWidth()) / 2 + bitmap.getWidth()),
                            (int)(canvas.getHeight())), null);
                }
            }

            if (mFpsMeter != null) {
                mFpsMeter.measure();
                mFpsMeter.draw(canvas, 20, 30);
            }
            getHolder().unlockCanvasAndPost(canvas);
        }
    }
} 
```

和...

```
@Override
public Mat onCameraFrame(CameraBridgeViewBase.CvCameraViewFrame inputFrame) {
    MatOfRect faces = new MatOfRect();
    int currentOrientation = getResources().getConfiguration().orientation;
    if (currentOrientation == Configuration.ORIENTATION_LANDSCAPE) { 
        mRgba = inputFrame.rgba();
        mGray = inputFrame.gray();

        int height = mGray.rows();
        if (Math.round(height * 0.2) > 0) {
            mFaceSize = (int) Math.round(height * 0.2);
        }

        cascadeClassifier.detectMultiScale(mGray, faces, 1.1, 3, 2,
                new Size(mFaceSize, mFaceSize));
        Rect[] facesArray = faces.toArray();
        for (int i = 0; i < facesArray.length; i++) {
            Point center = new Point(facesArray[i].x + facesArray[i].width / 2,
                    facesArray[i].y + facesArray[i].height / 2);
            rectangle(mRgba, facesArray[i].tl(), facesArray[i].br(), FACE_RECT_COLOR, 3);
        }

    } else {
        mRgba = inputFrame.rgba();
        mGray = inputFrame.gray();

        Mat rotImage = Imgproc.getRotationMatrix2D(new Point(mRgba.cols() / 2,
                mRgba.rows() / 2), 90, 1.0);

        Imgproc.warpAffine(mRgba, mRgba, rotImage, mRgba.size());
        Imgproc.warpAffine(mGray, mGray, rotImage, mRgba.size());

        Core.flip(mRgba, mRgba, 1);
        Core.flip(mGray, mGray, 1);

        int height = mGray.rows();
        if (Math.round(height * 0.2) > 0) {
            mFaceSize = (int) Math.round(height * 0.2);
        }

        cascadeClassifier.detectMultiScale(mGray, faces, 1.1, 3, 2,
                new Size(mFaceSize, mFaceSize));
        Rect[] facesArray = faces.toArray();
        for (int i = 0; i < facesArray.length; i++) {
            Point center = new Point(facesArray[i].x + facesArray[i].width / 2,
                    facesArray[i].y + facesArray[i].height / 2);
            rectangle(mRgba, facesArray[i].tl(), facesArray[i].br(), FACE_RECT_COLOR, 3);
        }
    }

    return mRgba; 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-12-28T07:35:00.837

经过大量搜索，我发现了这个-

[https://answers.opencv.org/question/23972/face-detect-with-portrait-mode-and-front-camera/](https://answers.opencv.org/question/23972/face-detect-with-portrait-mode-and-front-camera/)

这行得通。

另外，请确保您在 AndroidManifest.xml 中设置了纵向模式

```
 android:screenOrientation="portrait" 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-02-23T13:23:06.580

**如果没有一些像素操作，我认为没有办法做到这一点。但是，如果我们简单地修改所有这些像素被绘制到的矩阵。答案部分在于 CameraBridgeViewBase.java 文件**

**1.进入CameraBridgeViewBase类**

**2.制作函数更新矩阵**

```
private final Matrix mMatrix = new Matrix();
private void updateMatrix() {
float mw = this.getWidth();
float mh = this.getHeight();

float hw = this.getWidth() / 2.0f;
float hh = this.getHeight() / 2.0f;

float cw  = (float)Resources.getSystem().getDisplayMetrics().widthPixels; //Make sure to import Resources package
float ch  = (float)Resources.getSystem().getDisplayMetrics().heightPixels;

float scale = cw / (float)mh;
float scale2 = ch / (float)mw;
if(scale2 > scale){
    scale = scale2;
}

boolean isFrontCamera = mCameraIndex == CAMERA_ID_FRONT;

mMatrix.reset();
if (isFrontCamera) {
    mMatrix.preScale(-1, 1, hw, hh); //MH - this will mirror the camera
}
mMatrix.preTranslate(hw, hh);
if (isFrontCamera){
    mMatrix.preRotate(270);
} else {
    mMatrix.preRotate(90);
}
mMatrix.preTranslate(-hw, -hh);
mMatrix.preScale(scale,scale,hw,hh);
} 
```

**3.覆盖onMeasure和layout函数**

```
@Override
public void layout(int l, int t, int r, int b) {
  super.layout(l, t, r, b);
  updateMatrix();
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
  super.onMeasure(widthMeasureSpec, heightMeasureSpec);
  updateMatrix();
} 
```

**4.替换现有的deliverAndDrawFrame函数**

```
protected void deliverAndDrawFrame(CvCameraViewFrame frame) { //replaces existing deliverAndDrawFrame
Mat modified;

if (mListener != null) {
    modified = mListener.onCameraFrame(frame);
} else {
    modified = frame.rgba();
}

boolean bmpValid = true;
if (modified != null) {
    try {
        Utils.matToBitmap(modified, mCacheBitmap);
    } catch(Exception e) {
        Log.e(TAG, "Mat type: " + modified);
        Log.e(TAG, "Bitmap type: " + mCacheBitmap.getWidth() + "*" + mCacheBitmap.getHeight());
        Log.e(TAG, "Utils.matToBitmap() throws an exception: " + e.getMessage());
        bmpValid = false;
    }
}

if (bmpValid && mCacheBitmap != null) {
    Canvas canvas = getHolder().lockCanvas();
    if (canvas != null) {
        canvas.drawColor(0, android.graphics.PorterDuff.Mode.CLEAR);
        int saveCount = canvas.save();
        canvas.setMatrix(mMatrix);

        if (mScale != 0) {
            canvas.drawBitmap(mCacheBitmap, new Rect(0,0,mCacheBitmap.getWidth(), mCacheBitmap.getHeight()),
                    new Rect((int)((canvas.getWidth() - mScale*mCacheBitmap.getWidth()) / 2),
                            (int)((canvas.getHeight() - mScale*mCacheBitmap.getHeight()) / 2),
                            (int)((canvas.getWidth() - mScale*mCacheBitmap.getWidth()) / 2 + mScale*mCacheBitmap.getWidth()),
                            (int)((canvas.getHeight() - mScale*mCacheBitmap.getHeight()) / 2 + mScale*mCacheBitmap.getHeight())), null);
        } else {
            canvas.drawBitmap(mCacheBitmap, new Rect(0,0,mCacheBitmap.getWidth(), mCacheBitmap.getHeight()),
                    new Rect((canvas.getWidth() - mCacheBitmap.getWidth()) / 2,
                            (canvas.getHeight() - mCacheBitmap.getHeight()) / 2,
                            (canvas.getWidth() - mCacheBitmap.getWidth()) / 2 + mCacheBitmap.getWidth(),
                            (canvas.getHeight() - mCacheBitmap.getHeight()) / 2 + mCacheBitmap.getHeight()), null);
        }

        //Restore canvas after draw bitmap
        canvas.restoreToCount(saveCount);

        if (mFpsMeter != null) {
            mFpsMeter.measure();
            mFpsMeter.draw(canvas, 20, 30);
        }
        getHolder().unlockCanvasAndPost(canvas);
    }
}
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-03-09T08:13:03.630

“jaiprakashgogi”开发人员回答对我有用。但问题是预览仍然只保存为横向。这意味着如果我们将预览设置为 imageview，那么它将显示为横向。

上述解决方案可以将预览显示为纵向，但不会永久保存为纵向。

我通过以下方式解决了这个问题。

1.  将字节或mat数据转换为位图
2.  将矩阵旋转 90 度并应用于位图
3.  将位图转换为字节数组并保存。

请在此处查看我的代码...

```
 public String writeToSDFile(byte[] data, int rotation){

    byte[]  portraitData=null;

   if(rotation==90){
       Log.i(TAG,"Rotation is : "+rotation);
       Bitmap bitmap= BitmapFactory.decodeByteArray(data,0,data.length);
       Matrix matrix = new Matrix();

       matrix.postRotate(90);

       Bitmap rotatedBitmap = Bitmap.createBitmap(bitmap , 0, 0, bitmap.getWidth(), bitmap.getHeight(), matrix, true);
   portraitData=bitmapToByte(rotatedBitmap);

   }

    File dir=getDirectory();
    String imageTime=""+System.currentTimeMillis();

    String fileName=Constants.FILE_NAME+imageTime+"."+Constants.IMAGE_FORMAT;
    File file = new File(dir, fileName);

    try {
        FileOutputStream f = new FileOutputStream(file);

        if(rotation==90){
            f.write(portraitData);
        }else {
            f.write(data);
        }

        f.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
        Log.i(TAG, "******* File not found. Did you" +
                " add a WRITE_EXTERNAL_STORAGE permission to the   manifest?");
    } catch (IOException e) {
        e.printStackTrace();
    }
    Log.i(TAG,"\n\nFile written to "+file);

    return fileName;
}

 // convert bitmap to Byte Array

  public byte[] bitmapToByte(Bitmap bitmap){

    ByteArrayOutputStream outputStream=new ByteArrayOutputStream();
  bitmap.compress(Bitmap.CompressFormat.JPEG,100,outputStream);

    byte[] array=outputStream.toByteArray();
   return array;
} 
```

它完全解决了我的问题。

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2019-03-15T03:04:09.057

我不太清楚，但相机尺寸是由屏幕宽度决定的。由于屏幕宽度低，相机高度也由纵向的低决定。因此，相机分辨率也由低决定。并放置预览图像（预览图像旋转由CameraBridgeViewBase.java中相机图像的宽度和高度决定）。

作为解决方案，使用横向（将 manifest.xml 中的横向模式决定为 Activity）。结果，因为屏幕宽度很高，所以高度也会很高，你的应用决定了高分辨率。此外，您不必旋转相机图像并始终全屏模式。但缺点是原点不同。我尝试了将高分辨率图像作为纵向方向的各种方法，但我找不到方法。

我的应用程序：纵向

我的相机图像是 720、480 / 横向 1280、1080。

* * *

## 回答 #19

> 赞同：-3
> 
> 时间：2019-11-26T13:54:01.870

`JavaCameraView.java`按照[本页](https://codeday.me/ko/qa/20190519/579792.html)所述修改您的代码

这真的很容易修复。

# 前

```
Log.d(TAG, "startPreview");

mCamera.startPreview(); 
```

# 后

```
Log.d(TAG, "startPreview");

setDisplayOrientation(mCamera, 90);

mCamera.setPreviewDisplay(getHolder());

mCamera.startPreview(); 
```

# php - HTACCESS 500 内部错误

> ID：14816173
> 
> 赞同：0
> 
> 时间：2013-02-11T16:15:56.693
> 
> 标签：php, .htaccess

我不太了解 PHP，但我让自由职业者为我开发了一个网站，但现在一旦我将它上传到我的主机，我就无法让它工作（数据库和一切都设置正确）。当我尝试访问域时，我收到 500 Internal Server 错误，但是如果我在它之后键入 /index.php，我可以访问该站点。网站上的类别也是如此，一旦点击它们就会显示错误。这是 HTaccess 代码，这是网站网址：[http ://tinyurl.com/vvcheft](http://tinyurl.com/vvcheft)

```
RewriteEngine on
RewriteCond $1 !^(index\.php|uploads|assets|robots\.txt)
RewriteRule ^(.*)$ /.../index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:44:25.863

明白了，它工作得很好，我用这个替换了我的 htaccess 文件：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^(.*)$ /index.php/$1 [NC,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:21:45.723

无需在 RewriteCond 行中引用 $1 所在的位置。在第 2 行，删除您在上面发布的代码的 $1。我相信这应该可以按您的预期工作。如果没有，请更新并告诉我。

# java - JSP Cookie 变量被检测为 Boolen 而不是 Cookie

> ID：14816175
> 
> 赞同：1
> 
> 时间：2013-02-11T16:16:06.003
> 
> 标签：java, jsp

我在 Servlet 中设置 Cookie，如下所示

```
 Cookie NameCookie = new Cookie("Name", "Mugil Vannan");         
  NameCookie.setMaxAge(30*60);
  response.addCookie(NameCookie);

  Cookie LocationCookie = new Cookie("Location", "India");
  LocationCookie.setMaxAge(30*60);
  response.addCookie(LocationCookie); 
```

设置 cookie 后，我正在尝试访问名称下的特定 cookie 集

```
Cookie[] cookies = request.getCookies();            

  for (int i = 0; i < cookies.length; i++) 
  {
        Cookie cookie = cookies[i].getName().equals("Name");

        String cookieName  = cookie.getName();
        String cookieValue = cookie.getValue();
        out.print(cookieValue);
  } 
```

现在它显示为**TypeMismatch:Cannot Convert Boolean to Cookie** at

cookies[i].getName().equals("姓名");

知道为什么会这样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:20:47.203

我认为这是你的问题`Cookie cookie = cookies[i].getName().equals("Name");`

你的意思是：

```
Cookie cookie = cookies[i];
if (cookie.getName().equals("Name")) {
    String cookieName  = cookie.getName();
    String cookieValue = cookie.getValue();
    out.print(cookieValue);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-28T12:26:08.263

一旦您在 cookie 上完成声明，您无需再次声明即可访问您所写的键为“名称”的 cookie。

```
if(cookie[i].getName().equals("Name")){
    String cookieName  = cookie.getName();
    String cookieValue = cookie.getValue();
    out.print(cookieValue);
} 
```

这将显示 cookie 值 where key(name) = "Name"

# jquery - 在 Twitter Bootstrap 模式中加载远程 URL

> ID：14816176
> 
> 赞同：0
> 
> 时间：2013-02-11T16:16:05.893
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

我想在引导模式中打开时事通讯注册表单的外部 url。

这是时事通讯注册表单：

```
<form action="external-action.html" id="newsletter-form" class="newsletter-form">
<label for="newsletter-input">label:</label>
<input type="text" value="newsletter" onfocus="this.value='';" name="newsletter-input">
<input type="submit" class="save-button" value="submit" data-toggle="modal" data-
target="#myModal">
</form> 
```

知道我该如何解决这个问题吗？

# c# - 为什么此代码不替换文本文件中的数据？

> ID：14816177
> 
> 赞同：0
> 
> 时间：2013-02-11T16:16:09.693
> 
> 标签：c#, ansi

我正在开发一个小应用程序，它应该读取文件（ANSI 835）并用通用数据替换某些位置的数据。基本上我试图从文件中删除一个人的名字和姓氏。

我正在搜索的包含名称的行如下所示：

```
NM1*QC*1*Doe*John*R***MI*010088307    01~ 
```

我的代码如下所示：

```
string[] input_file = (string[])(e.Data.GetData(DataFormats.FileDrop));
string output_file = @"c:\scrubbed.txt";

foreach (string file in input_file)
{
    string[] lines = File.ReadAllLines(file);

    foreach (string line in lines)
    {
        if (line.StartsWith("NM1*QC"))
        {
            line.Split('*')[1] = "Lastname";
            line.Split('*')[2] = "Firstname";
        }
    }

    File.WriteAllLines(output_file, lines);
} 
```

有效，`File.WriteAllLines`但数据没有改变。我试图让任何开头的行`NM1*QC`看起来像这样：

```
NM1*QC*1*Lastname*Firstname*R***MI*010088307    01~ 
```

文件中有很多行以`NM1*QC`. 在这种情况下“查找和替换”然后创建新文件的正确方法是什么？

一如既往，感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:24:48.230

您既不捕获也不使用的返回变量的调用`String.Split`不会更改基础字符串。所以你的代码等同于：

```
 if (line.StartsWith("NM1*QC"))
 {
     string[] split1 = line.Split('*')[1] = "Lastname";
     string[] split2 = line.Split('*')[2] = "Firstname";
 } 
```

您需要获取并使用这些结果`split1`来`split2`重新创建您的字符串。以下是我将如何重写您的代码：

```
string[] input_file = (string[])(e.Data.GetData(DataFormats.FileDrop));
string output_file = @"c:\scrubbed.txt";
foreach (string file in input_file)
{
    string[] lines = File.ReadAllLines(file);

    for (int i=0; i < lines.length; i++)
    {
        string line = lines[i];
        if (line.StartsWith("NM1*QC"))
        {
            string[] values = line.Split('*');
            values[1] = "Lastname";
            values[2] = "Firstname";
            lines[i] = String.Join("*", values);
        }
    }

    File.WriteAllLines(output_file, lines);
} 
```

请注意，我正在使用该`String.Join`方法重新组合各个值，并将新字符串插入回行数组中。然后将按照您的预期写出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T16:18:26.283

在这里，您正在创建一个临时数组：

```
line.Split('*') 
```

你正在改变它的内容：

```
line.Split('*')[1] = "Lastname"; 
```

执行完该行后，对该临时数组的引用将丢失，随之而来的是您的更改。

为了保持更改，您需要直接写入`lines`：

```
for (var i = 0; i < lines.Length; ++i)
{
    var line = lines[i];

    if (!line.StartsWith("NM1*QC"))
    {
        continue;
    }

    var parts = line.Split('*');
    parts[3] = "Lastname";
    parts[4] = "Firstname";

    lines[i] = string.Join("*", parts);
} 
```

# java - 在Java中四舍五入到最接近的整数？

> ID：14816178
> 
> 赞同：-3
> 
> 时间：2013-02-11T16:16:12.980
> 
> 标签：java, double, rounding

如何将我的数字四舍五入`output += Math.pow(baseUno, powernumber)+ " ";`到最接近的整数？

他们总是给我一个`output`，例如**1.0 或 2.0**。您如何将这些四舍五入，以便它们简单地生成**1 和 2**？

```
import javax.swing.*;
import java.text.*;
import java.util.*;

public class level7Module1
{

public static void main(String[] args)
{

String base, power, output = " "; //user inputs, and the output variable
double baseUno, powerUno, basenum = 0, powernum = 0; //user inputs parsed so they can be used in mathematical equations

DecimalFormat noDigits = new DecimalFormat("0");

 // oneDigit.format(variablename)

base = JOptionPane.showInputDialog(null,"Enter your prefered base, a number between 1 and 14: \nPress 'q' to quit."); //User input
    if (base.equals("q"))
    {
    JOptionPane.showMessageDialog(null,"Goodbye!");
    System.exit(0); //quits
    }

baseUno = Integer.parseInt(base);
// basenum = noDigits.format(baseUno);

if (baseUno <= 0)
{
JOptionPane.showMessageDialog(null,"Really? Why would you try to trick me? ):");
System.exit(0);
}
if (baseUno > 14)
{
JOptionPane.showMessageDialog(null,"That wasn't cool. Take some time to think about this \nand\nthen\ntry\nagain.\n\n\n\n\n\n\n\nJerk.");
System.exit(0);
}

//I chose 0 and 14 because on my monitor the combination of 14 and 14 filled up the entire screen, so I limited to things
 //that would fit on my monitor :)

power = JOptionPane.showInputDialog(null, "How many numbers of this base would you like? Between 1 and 14 again, please.\nPress 'q' to quit.");

if (power.equals("q"))
    {
    JOptionPane.showMessageDialog(null,"Goodbye!");
    System.exit(0);
    }

powerUno = Integer.parseInt(power);
// powernum = noDigits.format(powerUno);

if (powerUno <= 0)
    {
    JOptionPane.showMessageDialog(null,"Really? Why would you try to trick me? ):");
    System.exit(0);
    }
if (powerUno > 14)
    {
    JOptionPane.showMessageDialog(null,"That wasn't cool. Take some time to think about this \nand\nthen\ntry\nagain.\n\n\n\n\n\n\n\nJerk.");
    System.exit(0);
    }

for (int powernumber=0; powernumber!=powerUno; powernumber++) //Set the number of powers done to 0, then until it's "powernum" input, it keeps going.
{
output += Math.pow(baseUno, powernumber)+ " "; //Output is the basenum to the power of powernum plus a space, then repeats condition above.
}

JOptionPane.showMessageDialog(null,"Your numbers are: " + output); //Giving the users their outputs

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:21:52.287

以最简单的方法更改此行：
`JOptionPane.showMessageDialog(null,"Your numbers are: " + output);`
只需
`JOptionPane.showMessageDialog(null,"Your numbers are: " + (int)output);`
键入 caste 结果为`int`

# javascript - 在 Backbone.js 视图中等待 Infinite Scroll 结果

> ID：14816180
> 
> 赞同：0
> 
> 时间：2013-02-11T16:16:28.150
> 
> 标签：javascript, backbone.js, infinite-scroll, backbone-views

我遇到了 InfiniteScrolls 调用的问题，这是“朋友”中代码的一部分，例如：

```
var InfiniteScrollView = Backbone.View.extend({
    el : window,
    container : '#profile-friends',
    triggerHeight : 10, //px
    events : {
      'scroll' : 'throttledDetectBottomPage'
    },
    initialize : function() {
      this.throttledDetectBottomPage = _.throttle(this.detectBottomPage, 1000);
    },
    detectBottomPage : function() {
      var self = this;
      var offset = $(this.container).height() - this.$el.height() - this.triggerHeight;

      if (this.$el.scrollTop() >= offset) {
        self.nextPage();
      }
    },
    stop : function() {
      this.$el.unbind('scroll');
    },
    nextPage : function() {
      if (this.collection.activeScroll == true) {
        this.collection.nextPage();
        if (!this.collection.isPaginated) {
          if (this.collection.length == 0) {
            this.renderNotFoundPage();
            this.stop();
            return false;
          }
        } else {
          if (this.collection.length == 0) {
            this.renderNotFoundMoreResults();
            this.stop();
            return false;
          }
        }
      }
    },
    renderNotFoundMoreResults : function() {
      $('#profile-friends').append('No more results');
    },
    renderNotFoundPage : function() {
      var container = $(this.container);
      container.html('0 results');
    }
  }); 
```

在 this.collection.nextPage() 中称为 'api/friends/pag'，pag = 页码。这里是集合的代码：

```
// profile friends collection
define(
    ['underscore', 
     'backbone', 
     'models/user'],
    function(_, Backbone, User){
    var PFriendsCollection = Backbone.Collection.extend({

        // Reference to this collection's model.
        model: User,
        initialize: function(){
          this.isPaginated = false;
          this.active = false;
        },
        //Call in render
        search: function() {
          this.page = 1;
          this.isPaginated = false;
          this.active = true;
          this.fetch();
        },
        //Call in Infinite Scroll view NextPage
        nextPage: function() {
          if(this.active) {
            this.isPaginated = true;
            this.page = parseInt(this.page) + 1;

            this.fetch({update: true});
          }
        },
        // Url, points to the server API
        url: function() {
          return  'api/pfriends/' + this.page;
        },
        // Url, points to the server API
        // ATM it is just a json test file
        parse: function(response){
        // extract items from response. 
        return response.items;
        }

    });
    return new PFriendsCollection;
  }); 
```

我在 FriendsView 的 render() 函数中创建了这个视图，然后我发现了一个问题：我走到底部并触发启动，但是如果我移动滚动条，他会启动很多次，他调用 api/pfriends/2、api/ pfriends/3, api/friends/4 （例如，是随机的调用次数）在同一时刻，因为他不哀号第一个响应和启动触发器:(

我不知道在哪里放置触发器、结果或阻止滚动触发器执行的东西，只要有挂起的获取响应。

谢谢 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:05:12.467

`fetch`返回延迟的 jQuery，因此您可以在集合的 nextPage 中尝试此操作：

`return this.fetch({update: true});`

那么在你看来：

```
nextPage : function() {
      if (this.collection.activeScroll == true && !this.updating) {
        var self = this;
        this.updating = true;
        // function passed to 'always' is called whether the fetch succeeded or failed
        this.collection.nextPage().always(function(){
            self.updating = false;
            if (!self.collection.isPaginated) {
              if (self.collection.length == 0) {
                self.renderNotFoundPage();
                self.stop();
                return false;
              }
            } else {
              if (self.collection.length == 0) {
                self.renderNotFoundMoreResults();
                self.stop();
                return false;
              }
            }
          }
       }
    }, 
```

您可能想要实际使用`done`and`fail`而不是`always`. 查看[文档](http://api.jquery.com/category/deferred-object/)以获取更多信息。

# java - 是否可以将列附加到java中的文本文件？

> ID：14816181
> 
> 赞同：-1
> 
> 时间：2013-02-11T16:16:32.533
> 
> 标签：java, text, awk, append

我知道

```
FileOutputStream out = new FileOutputStream(file_name, true); 
```

允许将行附加到文件。有没有办法将数据列附加到从第一行开始的非空文本文件中？

例如，file.txt 包含：

```
Name    Address
ABC     OtherLand 
```

我们可以稍后将 file.txt 修改为：

```
Name   Address   PhoneNumber
ABC    OtherLand 3333333333 
```

我听说过 Unix 中的 awk 命令。如果没有办法直接在 java 编程语言中执行此操作，如果有人可以在使用 java 系统调用调用 awk 时共享代码位，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:19:59.777

不，你不能。没有这样的选择。您始终可以打开文件来读取、写入或附加内容。

为此，您需要

1.  读取文件的每一行
2.  将内容附加到每一行。
3.  写入临时文件

# c# - 针对 BindingList 执行 LINQ 的最快方法？

> ID：14816183
> 
> 赞同：0
> 
> 时间：2013-02-11T16:16:36.223
> 
> 标签：c#, winforms, performance, linq, datagridview

我正在编写一个包含这样一个简单对象的 WinForms 应用程序：

```
public class MyObject : INotifyPropertyChanged //  for two-way data binding
{
    public event PropertyChangedEventHandler PropertyChanged;

    private void RaisePropertyChanged([CallerMemberName] string caller = "")
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(caller));
        }
    }

    private int _IndexValue;
    public int IndexValue
    {
        get { return Value; }
        set
        {
            if (value != Value)
            {
                Value = value;
                RaisePropertyChanged();
            }
        }
    }

    private string _StringValue;
    public string StringValue
    {
        get { return _StringValue; }
        set
        {
            if (value != _StringValue)
            {
                _StringValue = value;
                _Modified = true;
                RaisePropertyChanged();
            }
        }
    }

    private bool _Modified;
    public bool Modified
    {
        get { return _Modified; }
        set
        {
            if (value != _Modified)
            {
                _Modified = value;
                RaisePropertyChanged();
            }
        }
    }

    public MyObject(int indexValue)
    {
        IndexValue = indexValue;
        StringValue = string.Empty;
        Modified = false;
    }
} 
```

我有一个 BindingList，它将包含我的对象的固定数量 (100,000) 以及一个 BindingSource。这两个都是这样定义的：

```
BindingList<MyObject> myListOfObjects = new BindingList<MyObject>();
BindingSource bindingSourceForObjects = new BindingSource();
bindingSourceForObjects .DataSource = myListOfObjects; 
```

最后，我有了我的 DataGridView 控件。它有单列（“STRINGVALUECOLUMN”），它显示我的对象的 StringValue 属性，它绑定到我刚刚提到的 BindingSource：

```
dataGridViewMyObjects.DataSource = bindingSourceForObjects; 
```

当我的应用程序启动时，我将 100,000 个对象添加到 myListOfObjects。由于我的 DGV 中只有一列，并且它显示的属性初始化为 string.Empty，因此我基本上有一个包含 100,000 个“空白”行的 DGV。此时，我的用户可以开始编辑行以输入字符串。他们不必按任何顺序编辑它们，因此他们可能会在第一行中放置一个字符串，在第 17 行中放置下一个字符串，在第 24581 行中放置下一个字符串等。有时，我的用户会想要从文本文件中导入字符串. 由于我有固定数量的对象 (100,000)，并且可能已经输入了一些现有字符串，也可能没有输入，因此在添加新字符串之前，我需要在导入过程中执行一些检查。在下面的代码中，我删除了这些检查，但它们似乎不会影响我的应用程序的性能。但是，如果我使用下面的代码导入数万个字符串，它会非常慢（比如导入 50k 行需要 4 或 5 分钟）。我已将其范围缩小到此代码块中的某些内容：

```
// this code is inside the loop that reads each line from a file...

// does this string already exist?
int count = myListOfObjects.Count(i => i.StringValue == stringFromFile);
if (count > 0)
{
    Debug.WriteLine("String already exists!"); // don't insert strings that already exist
}
else
{   
    // find the first object in myListOfObjects that has a .StringValue property == string.Empty and then update it with the string read from the file
    MyObject myObject = myListOfObjects.FirstOrDefault(i => i.StringValue == string.Empty);
    myObject.StringValue = stringFromFile;
} 
```

我的理解是我需要双向绑定，因此我可以更新基础数据并将其反映在 DGV 控件中，但我也读到 INotifyPropertyChanged 有时可能会很慢。有没有人遇到过这个问题？如果是这样，您是如何解决的？

--**更新**--

仅出于测试目的，我替换了：

```
// does this string already exist?
int count = myListOfObjects.Count(i => i.StringValue == stringFromFile);
if (count > 0)
{
    Debug.WriteLine("String already exists!"); // don't insert strings that already exist
}
else
{   
    // find the first object in myListOfObjects that has a .StringValue property == string.Empty and then update it with the string read from the file
    MyObject myObject = myListOfObjects.FirstOrDefault(i => i.StringValue == string.Empty);
    myObject.StringValue = stringFromFile;
} 
```

带有一个 for 循环，其中包含：

```
myListOfObjects[counter].StringValue = "some random string"; 
```

即使有 100,000 个对象，这也非常快。但是，我现在失去了以下能力：1）在分配之前检查我从文件中读取的字符串是否已经分配给列表中的对象，以及 2）在列表中找到其 StringValue 的第一个可用对象property == string.Empty 然后相应地更新该值。所以看起来：

```
int count = myListOfObjects.Count(i => i.StringValue == stringFromFile); 
```

和

```
MyObject myObject = myListOfObjects.FirstOrDefault(i => i.StringValue == string.Empty); 
```

...是我的性能问题的根源。是否有更快、更有效的方法来针对我的 BindingList 执行这两个操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:11:30.050

Linq 的问题在于它实际上只是标准循环，当然优化了，但仍然是常规的旧循环，回到后面的代码中。

可以加快您的代码速度的一件事是：

```
myListOfObjects.Any(i => i.StringValue.Equals(stringFromFile)); 
```

这返回一个简单的布尔值，X 是否存在。它会提前退出，因此如果不需要，它不会扫描整个集合。 `.Count()`不仅需要扫描整个事物，还需要保持运行计数。

需要指出的另一件事是，由于您使用的是`FirstOrDefault`，这表明结果可能为空。`myobject`在尝试使用它之前，请确保您有一个空检查。

最后，按照 Saunders 先生的建议，检查事件堆栈并确保运行的代码没有超出您的想象。在这样的操作中这是一个危险。您可能需要从初始化引擎中借用一些代码并使用`this.SuspendLayout()`和`this.ResumeLayout()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:18:31.420

问题可能是当您更新基础数据时，会触发事件以导致网格更新。大量数据更改 == 大量更新。

自从我对 Windows 窗体做了很多工作以来已经有很长时间了，但请查看该[`SuspendLayout`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.suspendlayout.aspx)方法。

# javascript - 使用 javascript 检查是否选择了单选按钮并根据选择返回特定答案

> ID：14816186
> 
> 赞同：0
> 
> 时间：2013-02-11T16:16:45.043
> 
> 标签：javascript, radio-button

我正在寻找能够以最简洁的方式回答一个简单的是或否的问题并测试选择了哪个答案。

例如，在这种情况下，如果“是”，我希望它将“继续”的值返回到指定区域（第一个有问题的 3 列表，第二个有单选按钮，我希望它更新并在第三部分显示答案）。

到目前为止，我的 JS 代码：

```
<script type="text/javascript">

var answer = 'place-holder';

var user_input;

function checkForm() 
{
    var substanceab = document.getElementById('Sub');
    for (i = 0; i < substanceab.length; i++)
    {
        if(substanceab.length[i].checked)
        {
            user_input = substanceab.length[i].value;
        }
    }

    if (user_input ="yes")
    {
        return answer = "Continue";
    }
    else if (user_input ="no")
    {
        return answer = "Provide Alternate Referral";
    }
    else
    {
        return;
    }   
};
function writeAns()
{
    document.getElementById('answerwrite').innerHTML = checkForm[user_input];
};

</script> 
```

和正文（减去实际问题）：

```
<table class="table table-bordered">
 <tr>
  <td width="58%"><center><strong>Required:</strong></center></td>
  <td width="19%"></td>
  <td width="23%"><center><u><strong>___________</strong></u></center></td>
  </tr>
  <tr>
   <td> <span class="sub depend"> <strong><i>_________</i> </strong></span></td>
   <td> <span class="sub depend ans">
     <form name="Substance">
      <label class="radio inline">
        <input type="radio" value="yes" name="substance" onclick="writeAns()">
          yes </label>
      <label class="radio inline">
        <input type="radio" value="no" name="substance" onclick="writeAns()">
          no </label> </form></span></td>
          <div id="answerwrite"></div>
      <script type="text/javascript">
document.write("<td>" + writeAns() + "</td>")
</script>

</tr></table> 
```

好的，修复了“funk”，但就像我说的，比 javascript 更习惯于 java，语法更严格。我同意，我只使用了 ID 来尝试让它使用不同的方法，但它从来没有这样做过。现在有了一些建议，它只是让我到处都不确定。虽然我同意这最终会转向 jquery，但我不知道如何使用它，因此首先在 javascript 中弄清楚这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:39:49.393

如果您使用的是 JQuery，则非常容易。

确保您的元素具有相同的“名称”属性并使用：

```
var RadioGroupResult = $('input[name="MyRadioGroupNameHere"]:checked').val(); 
```

很好很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:34:29.167

一些东西：

```
document.getElementByID() 
```

将始终返回第一个元素，因为 ID 应该是唯一的。相反，使用：

```
document.getElementsByName('substance'); 
```

接下来，在您的循环中，您使用 .length 属性不正确地引用了数组的成员。试试这个：

```
 for (i = 0; i < substanceab.length; i++)
    {
        if(substanceab[i].checked)
        {
            user_input = substanceab[i].value;
        }
    } 
```

最后，在 javascript 中，'=' 运算符始终是一个赋值语句。要进行比较，请始终使用 '=='：

```
 if (user_input == "yes")
    {
        return answer = "Continue";
    }
    else if (user_input =="no")
    {
        return answer = "Provide Alternate Referral";
    }
    else
    {
        return;
    } 
```

此外，尽可能避免使用全局变量。这是工作代码，稍作重构：

```
<input type="radio" value="no" id= "Sub" name="substance" onclick="writeAns()">

function checkForm() 
{
    var user_input;

    var substanceab = document.getElementsByName('substance');
    for (i = 0; i < substanceab.length; i++)
    {
        if(substanceab[i].checked)
        {
            user_input = substanceab[i].value;
        }
    }

    if (user_input == "yes")
    {
        return "Continue";
    }
    else if (user_input =="no")
    {
        return "Provide Alternate Referral";
    }
    else
    {
        return;
    }   
};
function writeAns()
{
    document.getElementById('answerwrite').innerHTML = checkForm();
}; 
```

# drupal - 从另一个模块修改 hook_menu() 中给出的标题

> ID：14816190
> 
> 赞同：1
> 
> 时间：2013-02-11T16:16:56.083
> 
> 标签：drupal, drupal-7, drupal-routes

如何将 /user/[uid] 页面的标题从*Your account*更改为*Welcome [user name]* for login user，其中*[user name]*是当前登录用户的用户名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T04:59:50.123

使用[hook_menu_alter](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu_alter/7)。

> 调用 hook_menu 后更改保存到 {menu_router} 表的数据。

代码示例：

```
function MYMODULE_menu_alter()
{
    global $user;
    if($user->uid != 0)
        $items['user']['title'] = 'Welcome ' . $user->name;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-29T19:51:10.413

您应该能够使用[**菜单令牌**模块](https://drupal.org/project/menu_token)完成此操作：

> Menu Token 模块提供了可以在菜单项（链接）的标题或路径中使用的标记。

（它需要流行的[**Token**模块](https://drupal.org/project/token)。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-29T19:45:07.073

请注意，在 Drupal 7.23 中，user.module 包含一个“标题回调”来确定用户是否登录，并以相应的标题进行响应。

对我有用的代码（通过主题模板，而不是自定义模块）：

```
 function YOURTHEME_menu_alter(&$items) { 
      $items['user']['title callback'] = 'YOURTHEME_user_menu_title';
}

    function YOURTHEME_user_menu_title() {
      global $user;
      return user_is_logged_in() ? t($user->name) : t('User account');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-29T19:58:34.720

[String Overrides](https://drupal.org/project/stringoverrides)模块应该使这变得容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-14T11:09:38.093

在 Drupal 7 中，`hook_menu()`仅`hook_menu_alter()`在需要刷新从模块实现的路由数据时调用，例如在启用、禁用、安装或卸载模块时。在标题中使用当前登录用户的名称的实现`hook_menu_alter()`将为不同的用户显示相同的用户名。
不同的是，每次呈现与该路由关联的页面时，都会调用与该路由关联的标题回调。

正确的代码将类似于以下代码。

```
function mymodule_menu_alter(&$items) { 
  $items['user']['title callback'] = 'mymodule_user_profile_title';
}

function mymodule_user_profile_title() {
  global $user;
  return user_is_logged_in() ? t('Welcome, @name', array('@name' => format_username($user))) : t('User account');
} 
```

请注意，第一个参数`t()`需要是文字字符串，而不是动态值，`t($user->name)`因为包含字符串翻译的数据库表不会包含站点中使用的每个用户名的翻译。这也是错误的，因为显示的用户名在网站上使用的语言是不变的：例如，在意大利网站中，像*Albert*这样的用户名不会被翻译成*Alberto*，*Vincent*也不会被翻译成*Vincenzo*。

在 UI 中显示用户名时，最好使用[`format_username()`](https://api.drupal.org/api/drupal/includes%21common.inc/function/format_username/7.x)，它允许第三方模块更改显示为用户名的内容。（例如，模块可以显示用户字段的内容，而不是显示登录用户名。）

如果您不愿意编写自定义代码，可以使用[String Overrides](https://www.drupal.org/project/stringoverrides)模块。如果您不想使用任何模块来更改用户配置文件页面的标题，您可以在用于站点的 settings.php 文件中添加以下代码。

```
$conf['locale_custom_strings_en'][''] = array(
  'My account' => 'Welcome to my site'
); 
```

请注意，无论是使用*String Overrides*模块还是`$conf['locale_custom_strings_en']['']`在 settings.php 文件中添加数组，您都不能：

*   提供一个根据登录用户更改的字符串（这是问题所要求的）
*   提供仅在特定页面上使用的字符串

后一种情况可能是有利的，也可能是不利的。如果需要更改的字符串足够通用，即使不应该替换它也会被替换。

# google-apps-script - 从 Google Apps 脚本获取 TextBox 值

> ID：14816195
> 
> 赞同：3
> 
> 时间：2013-02-11T16:17:16.617
> 
> 标签：google-apps-script

我是 Google Apps 脚本领域的新​​手，我正在尝试为我的最终用户创建一个基本的 UI 来查询数据（存储在 google 电子表格中）并以格式化/用户友好的方式显示数据。

因为我想从简单开始并在学习 Apps 脚本时添加组件，所以我决定创建一个基本表单，允许我在文本框中输入文本，然后将该值分配给标签（我认为这将是一个简单的练习创建基本表单组件和检索/分配值）。

不幸的是，我遇到的绊脚石是没有 getText() 或 TextBox.getValue() 函数。我尝试通过在线论坛/谷歌等搜索以找出解决方法，但我尝试的任何方法似乎都不起作用（之前的搜索让我尝试在事件处理程序中解决这个问题）。

我的问题是这个。如果我有一个文本框（'textBox1'）和一个按钮（'button1'）和一个标签（'label1'）。当我单击button1时，如何让我的Web应用程序将我在textBox1中输入的值分配给label1？

我意识到这可能是最基本的问题，而且我知道以前有人问过它……但是无论我多么努力地阅读这些旧帖子，我似乎都无法弄清楚什么应该是简单的代码.

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:26:18.927

假设您的代码如下所示：

```
var textbox = app.createTextBox().setName("textboxName");
var buttonHandler = app.createServerHandler("updateLabelText").addCallbackElement(textbox);
var button = app.createButton("Click me").addClickHandler(buttonHandler);
var label = app.createLabel().setId("label"); 
```

然后在你的函数中：

```
function updateLabelText(e) {
  var app = UiApp.getActiveApplication();
  app.getElementById("label").setText(e.parameter.textboxName);
  return app;
} 
```

所以要注意的事项：

1.  按钮处理程序被赋予了您在代码中其他地方定义的函数的名称。
2.  按钮处理程序也必须被赋予一个“回调元素”。如果您想在函数中读取该元素的值，这是必需的。您可以将面板添加为回调元素，该面板上的任何内容都将添加到回调中。
3.  回调元素的值通过`e.parameter`. 属性名称是元素的名称。示例：`e.parameter.textboxName`。
4.  标签需要一个 ID，以便您可以从其他函数中引用它。

# java - 如何在android中启动和停止多个文件的下载

> ID：14816214
> 
> 赞同：0
> 
> 时间：2013-02-11T16:18:28.927
> 
> 标签：java, android, multithreading

我有一个带有按钮和标签的活动。在按钮上单击我的应用程序必须下载几个文件（大约 9000 个）。如果用户再次单击按钮，下载必须停止，再次单击时必须从头开始。

所以这就是我要做的：

活动中：

```
 file.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Button b = (Button)v;
            if(canFile){
                b.setText("Stop download");
                changeLabelInfo("Getting file list...");
                labelFile.setVisibility(View.VISIBLE);
                fileTask.start();
            }else{
                b.setText("Download files");
                if(fileTask.isAlive()){  
                   fileTask.interrupt();
                   fileTask = null;
                   fileTask = new UpdateFilesThread(this);
                }
                labelFile.setVisibility(View.INVISIBLE);
                Kernel.setManualUpdate("file",false);
            }
            canFile = !canFile;
        }
    }); 
```

必须下载文件的线程是`UpdateFilesThread`：

```
public class UpdateFilesThread extends Thread{
    private MainActivity activity;
    private final String rootPath = "/mnt/local/";
    public UpdateFilesThread(MainActivity activity){
        this.activity = activity;
    }

    public void run(){
        String json = getFilesURL();
        JSONObject a = (JSONObject)JSONValue.parse(json);
        boolean isZip = false,canDownload = true;
        String[] keys = new String[]{"key1","key2","key3","key4"};

        for(String key:keys){
            Object folder = (Object)a.get(key);
            if(folder instanceof JSONObject){
                JSONObject fold = (JSONObject)folder;
                for(Object path_o:fold.keySet()){
                    path = path_o.toString().replace(" ", "%20");
                    if(local.endsWith(".php")){
                        isZip = true;
                        try {
                            Jsoup.connect(mywebserviceURL).data("path",path).timeout(0).post(); // If php generate zip containing php file
                        } catch (IOException e) {
                            canDownload = false;
                        }
                    }
                    if(canDownload){
                        try{
                            if(downloadFromUrl(path,isZip))
                                //SAVE URL DOWNLOADED
                        }catch(Exception e){
                            e.printStackTrace();
                        }
                    }
                    canDownload = true;
                    isZip = false;
                }
            }
        }
        a.remove(key);
    }

    private String getFilesURL(){
        try {

            MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
            entity.addPart("type", new StringBody("all"));
            HttpPost post = new HttpPost("mywebserviceURL");
            post.setEntity(entity);
            HttpClient client = new DefaultHttpClient();
            HttpResponse response = client.execute(post);

            return EntityUtils.toString(response.getEntity());
        } catch (UnsupportedEncodingException e) {
            Support.writeError(e, null);
            e.printStackTrace();
            return "";
        } catch (ClientProtocolException e) {
            Support.writeError(e, null);
            e.printStackTrace();
            return "";
        } catch (ParseException e) {
            Support.writeError(e, null);
            e.printStackTrace();
            return "";
        } catch (IOException e) {
            Support.writeError(e, null);
            e.printStackTrace();
            return "";
        }
    }
    public boolean downloadFromUrl(String path,boolean isZip){
        InputStream is = null;
        FileOutputStream fos = null;
        String localFilename = rootPath+path;
        String local = isZip?rootPath+"tmp.zip":localFilename;

        boolean return_ = false;
        try {
            URL url = new URL(isZip?mywebserviceURLZip:mywebserviceURLZip+path);
            URLConnection urlConn = url.openConnection();
            urlConn.setReadTimeout(0);
            is = urlConn.getInputStream();
            fos = new FileOutputStream(local);

            byte[] buffer = new byte[51200];
            int len;

            while ((len = is.read(buffer)) > 0) {
                fos.write(buffer, 0, len);
            }
            fos.close();
            is.close();
            if(isZip){
                ZipFile zip = new ZipFile(local);
                zip.extractAll(rootPath);
                new File(local).delete();
            }

            return_= true;
        }catch(Exception e){
            e.printStackTrace();
            return false;
        }
        return return_;
    }
} 
```

当用户单击两次按钮（停止下载并重新开始）时，我的问题就出现了。提示错误说线程已经启动并正在运行..我该如何解决？我知道 asyncTask 应该更好，但我有问题，因为在我的应用程序中有这么多线程正在运行，并且设备性能很差.. 有可能完全停止一个线程吗？还有其他更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:01:24.643

尝试实现[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。当用户第一次点击按钮时，调用任务的[`execute (Params... params)`](http://developer.android.com/reference/android/os/AsyncTask.html#execute%28Params...%29). 在第二次点击时调用任务的[`cancel (boolean mayInterruptIfRunning)`](http://developer.android.com/reference/android/os/AsyncTask.html#cancel%28boolean%29). 将下载功能放在任务的[`doInBackground (Params... params)`](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:40:37.850

您的运行线程需要偶尔检查 isInterrupted() 并在返回 true 时退出。否则线程将永远不会被取消。

我认为你的整个架构是错误的。将9000个文件下载到手机上？即使每个文件只有 1KB，这对于移动应用程序来说也是巨大的内存量。至少你应该压缩这些数据并下载一个压缩包，为了你自己的理智。

# ms-access - 如何在访问中组合这两列

> ID：14816218
> 
> 赞同：0
> 
> 时间：2013-02-11T16:18:31.087
> 
> 标签：ms-access, ms-access-2010

我正在尝试根据表中其他 2 列的值（在本例中为学期和学生名称）在访问查询中组合两列（来自单独的表），例如，如果我有以下内容： ![在此处输入图像描述](../Images/906066770cfe06f577a08b787df68ff6.png)

和

![在此处输入图像描述](../Images/6432e3ceffdbd634ec8be2129aa7bdbe.png)

我怎样才能进行查询以获得最终结果：

![在此处输入图像描述](../Images/3006e15d0e1ed4b2d1520212a4deb00f.png)

其中 some_data 的第三和第四学期（仅第三和第四）部分已根据 student_name 组合（可能有一些名称在一个表中，但不在另一个表中，等等，尽管这些示例中没有显示） . 目前我对访问查询不是很有经验，所以我很难做到这一点。非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:14:48.833

```
UPDATE Sheet1 INNER JOIN Sheet2 
ON Sheet1.semester = Sheet2.semester
And  Sheet1.Student_name = Sheet2.Student_name
SET Sheet2.Some_data = Sheet1.Some_Data
Where Sheet1.semester in (3,4) 
```

如果您只想在应用结果之前查看结果，您可以单击`Datasheet View`按钮而不是`Run`按钮。

如果你想保持你的两个表完好无损并且只有一个视图，你可以这样做：

```
Select Sheet2.semester
, Sheet2.student_name
, Nz(Sheet2.some_data,Sheet1.some_data)
From Sheet1 INNER JOIN Sheet2 
ON Sheet1.semester = Sheet2.semester
And  Sheet1.Student_name = Sheet2.Student_name 
```

带有可选`where`子句

```
Where Sheet1.semester in (3,4) 
```

此处的[`Nz`](http://www.techonthenet.com/access/functions/advanced/nz.php)函数使用来自第一个参数的数据，除非该参数为空，在这种情况下，它使用来自第二个参数的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:53:10.850

就像是

```
select semester, student_name, max(some_data) from
(select semester, student_name, some_data from sheet1
union all
select semester, student_name, some_data from sheet2)
group by semester, student_name 
```

# c++ - 如何优雅地从 COM 错误中恢复？

> ID：14816226
> 
> 赞同：6
> 
> 时间：2013-02-11T16:19:01.440
> 
> 标签：c++, com, mfc

我有一个第三方 COM 组件，它的 c++ 接口在 VC++ 中。我在下面的调用中遇到崩溃，这导致我的应用程序崩溃。我怎样才能从这个不是我的应用程序的一部分的函数中优雅地恢复？

```
inline _RecordsetPtr IGLibMgr::GetLibInfo ( _bstr_t LibPath ) {
    struct _Recordset * _result = 0;
    HRESULT _hr = raw_GetLibInfo(LibPath, &_result);
    if (FAILED(_hr)) _com_issue_errorex(_hr, this, __uuidof(this));
    return _RecordsetPtr(_result, false);
} 
```

它在最后一行崩溃。我不认为我可以修改此代码，因为它是第三方 COM 的东西。我真的有什么选择？我只想向用户显示消息框并优雅地返回。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T16:25:24.267

如果您尚未在代码中执行此操作，则需要来自调用方：

```
try
{   // setup your invoke for your object...
    IGLibMgrPtr spMgr = ....
    bstr_t bstrPath = ....

    // invoke your call.
    _RecordsetPtr spRS = spMgr->GetLibInfo(bstrPath);

    ... continue normal processing ...
}
catch(const _com_error& ce)
{
    // handle your error here.
} 
```

这在多个层面上都很重要。最明显的是，不仅您的`IGLibMgr`成员可以抛出异常，`bstr_t`分配等也可以。当使用`#import`来自 COM DLL 的代码时，如果使用从 MSVC 的 comutil 库生成的智能指针，请习惯这种格式。

注意：`_com_error`该类提供了几个成员来获取错误发生的原因，包括 HRESULT、错误描述字符串等。它甚至可以访问`IErrorInfo`由错误返回对象创建的对象，如果提供该级别的详细信息的话.

# asp.net-mvc-3 - 会话变量 MVC3

> ID：14816229
> 
> 赞同：0
> 
> 时间：2013-02-11T16:19:07.447
> 
> 标签：asp.net-mvc-3, visual-studio, session

是否有一种简单的方法可以使用在调试模式下运行 MVC3 应用程序的 Visual Studio 查看存在哪些会话变量及其值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:59:40.153

您可以输出如下内容：-

```
foreach (string key in Session.Keys)
{
    Response.Write(key + " - " + Session[key] + "<br />");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:30:36.620

当然，这是一个“普通”的 ASP.NET 应用程序：试试`Request.RequestContext.HttpContext.Session`

通常你可以直接使用“Session”，例如

```
Session["key"] 
```

您可以在调试模式下的即时窗口中尝试它...

# perl - 在 Perl 中编写 OLE 代码的干净方法？

> ID：14816236
> 
> 赞同：1
> 
> 时间：2013-02-11T16:19:26.387
> 
> 标签：perl, ms-word, interop, ole

我正在通过[Win32::OLE](http://search.cpan.org/~jdb/Win32-OLE-0.1709/lib/Win32/OLE.pm)在 Perl 中自动创建 Word 文档。我当前的代码如下所示，它将 WINWORD.EXE 的实例留在内存中：

```
my $range = $select->Range;
my $table = $doc->Tables->Add( $range, scalar @rows, scalar @{ $rows[0] } );
for my $rownum ( 0 .. $#rows ) {
    for my $colnum ( 0 .. $#{ $rows[$rownum] } ) {
        my @cellpos = ( $rownum + 1, $colnum + 1 );
        my $data = $rows[$rownum][$colnum];
        $table->Cell(@cellpos)->Range->{'Text'} = $data;
        1;
    }
} 
```

但是，如果我按照[Microsoft 对 Visual Studio .NET 的建议](http://support.microsoft.com/kb/317109)重构我的代码，它看起来像这样：

```
my $range = $select->Range;
my $tables = $doc->Tables;
my $table = $tables->Add( $range, scalar @rows, scalar @{ $rows[0] } );
for my $rownum ( 0 .. $#rows ) {
    for my $colnum ( 0 .. $#{ $rows[$rownum] } ) {
        my @cellpos = ( $rownum + 1, $colnum + 1 );
        my $data = $rows[$rownum][$colnum];
        my $cell = $table->Cell(@cellpos);
        my $cell_range = $cell->Range;
        $cell_range->{'Text'} = $data;
    }
} 
```

该代码完成了这项工作，但在我看来它非常“嘈杂”。有没有更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:22:24.613

它可以稍微改进。不需要`@cellpos`and`$data`变量，提取对当前元素的引用以`@rows`在内部循环中使用更简洁。

```
my $range = $select->Range;
my $tables = $doc->Tables;
my $table = $tables->Add( $range, scalar @rows, scalar @{ $rows[0] } );
for my $rownum ( 0 .. $#rows ) {
    my $cols = $rows[$rownum];
    for my $colnum ( 0 .. $#$cols ) {
        my $cell = $table->Cell($rownum + 1, $colnum + 1);
        my $cell_range = $cell->Range;
        $cell_range->{Text} = $cols->[$colnum];
    }
} 
```

# java - 摆动添加图像不起作用

> ID：14816241
> 
> 赞同：0
> 
> 时间：2013-02-11T16:19:29.497
> 
> 标签：java, image, swing, paintcomponent

所以我做了这门课

```
public class ImagePanel extends JPanel {
BufferedImage lionImage;

public ImagePanel(){
    try {
         lionImage = ImageIO.read (new File ("imgres.jpg"));
    } catch (IOException e) {
        e.printStackTrace();
    }

}

@Override
public void paintComponent(Graphics g){
    super.paintComponent(g);
    if (lionImage != null) {
       g.drawImage(lionImage, 0, 0, this);
    }
}

public BufferedImage getLionImage() {
    return lionImage;
}

public void setLionImage(BufferedImage lionImage) {
    this.lionImage = lionImage;
}
} 
```

然后我做了一个测试课

```
public class test {

public static void main (String [] args) throws Exception {
ImagePanel test = new ImagePanel();
JFrame frame = new JFrame ("Image");

frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
frame.getContentPane ().setLayout (new BorderLayout ());

frame.add(test);

frame.pack ();
frame.setVisible (true);
}
} 
```

一切正常，简单地制作一个框架制作一个 ImagePanel，将其添加到框架中。

然后我在我的实际工作中尝试了它。

```
public class Enviroment implements Runnable, ActionListener{ 
private JFrame frame;
private JPanel enviromentPanel,totalGUI,enviromentButtonPanel;
private JButton newFrogButton, resetButton, hungryButton;
private JTextField enterName;
private JLabel hungryLabel;
private ArrayList<Frog> frogs = new ArrayList<Frog>();
private ArrayList<Fly> flys = new ArrayList<Fly>();

public Enviroment(){
 JFrame.setDefaultLookAndFeelDecorated(true);
    JFrame frame = new JFrame("[=] Hungry Cyber Pet [=]");

    frame.setContentPane(runEnviroment());

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(740, 800);
    frame.setVisible(true);

}

public JPanel runEnviroment(){

JPanel totalGUI = new JPanel();
totalGUI.setLayout(null);

JPanel enviromentPanel = new JPanel();
enviromentPanel.setLayout(null);
enviromentPanel.setLocation(10, 10);
enviromentPanel.setSize(700, 700);
enviromentPanel.setBackground(Color.WHITE);
totalGUI.add(enviromentPanel);

JPanel enviromentButtonPanel = new JPanel();
FlowLayout experimentLayout = new FlowLayout();
enviromentButtonPanel.setLayout(experimentLayout);
enviromentButtonPanel.setLocation(10, 710);
enviromentButtonPanel.setSize(700, 50);
totalGUI.add(enviromentButtonPanel);

newFrogButton = new JButton("New Frog");
newFrogButton.setLocation(0, 0);
newFrogButton.setSize(120, 30);
newFrogButton.addActionListener(this);
enviromentButtonPanel.add(newFrogButton);

enterName = new JTextField("Enter name");
enterName.setLocation(140,0);
enterName.setSize(120,30);
enviromentButtonPanel.add(enterName);

hungryButton = new JButton("Hungry!");
hungryButton.setLocation(280, 0);
hungryButton.setSize(120, 30);
hungryButton.addActionListener(this);
enviromentButtonPanel.add(hungryButton);

resetButton = new JButton("Reset");
resetButton.setLocation(420, 0);
resetButton.setSize(120, 30);
resetButton.addActionListener(this);
enviromentButtonPanel.add(resetButton);

totalGUI.setOpaque(true);

return totalGUI;
}
 public void draw(){
 ImagePanel frogImage = new ImagePanel();
 enviromentPanel.add(frogImage);
}
public void actionPerformed(ActionEvent e) {
 if(e.getSource() == newFrogButton){
     Frog frog = new Frog(enterName.getText());
     frogs.add(frog);
     draw();
     System.out.println(frogs);
     Fly fly = new Fly();
     flys.add(fly);
     System.out.println(flys);
  }
  else if(e.getSource() == hungryButton){
  }
  else if(e.getSource() == resetButton){
      frogs.clear();
      flys.clear();
      System.out.println(frogs);
      System.out.println(flys);

  }
} 
```

这在执行 draw() 方法时会显示错误。

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at Enviroment.draw(Enviroment.java:91)
at Enviroment.actionPerformed(Enviroment.java:97)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

在任何人说话之前，图像就在那里并且工作正常。怎么了？

Frog 和 Fly 类很简单。

```
public class Fly {
private int xPosition;
private int yPosition;
private boolean eaten;

public Fly(){
    Random randomGenerator = new Random();
    xPosition = randomGenerator.nextInt(100);
    yPosition = randomGenerator.nextInt(100);
    eaten = false;
}

public int getxPosition() {
    return xPosition;
}

public void setxPosition(int xPosition) {
    this.xPosition = xPosition;
}

public int getyPosition() {
    return yPosition;
}

public void setyPosition(int yPosition) {
    this.yPosition = yPosition;
}

public boolean isEaten() {
    return eaten;
}

public void setEaten(boolean eaten) {
    this.eaten = eaten;
}

public void move(){
      Random randomGenerator = new Random();

        int xChange = -10 + randomGenerator.nextInt(20);
        int yChange = -10 + randomGenerator.nextInt(20);
        xPosition = xPosition + xChange;
        yPosition = yPosition + yChange;
        move();
}

@Override
public String toString() {
    return "Fly [xPosition=" + xPosition + ", yPosition=" + yPosition
            + ", eaten=" + eaten + "]";
}
}

 public class Frog {
@Override
public String toString() {
    return "Frog [xPosition=" + xPosition + ", yPosition=" + yPosition
            + ", name=" + name + ", hungry=" + hungry + "]";
}
private int xPosition;
private int yPosition;
private BufferedImage lionImage=null;
private String name;
private boolean hungry;

public Frog(String newName){
    Random randomGenerator = new Random();
    xPosition = randomGenerator.nextInt(100);
    yPosition = randomGenerator.nextInt(100);
    name = newName;
    hungry = false;
    getImage();
}
public void getImage(){
    try{
    lionImage =ImageIO.read(new File("imgres.jpg"));
    }catch (IOException e){}
    }
public void move(){
    Random randomGenerator = new Random();

    int xChange = -10 + randomGenerator.nextInt(20);
    int yChange = -10 + randomGenerator.nextInt(20);
    xPosition = xPosition + xChange;
    yPosition = yPosition + yChange;
    move();
}
public void moveHungry(){

}
public void eat(){

}
public int getxPosition() {
    return xPosition;
}
public void setxPosition(int xPosition) {
    this.xPosition = xPosition;
}
public int getyPosition() {
    return yPosition;
}
public void setyPosition(int yPosition) {
    this.yPosition = yPosition;
}
public BufferedImage getLionImage() {
    return lionImage;
}
public void setLionImage(BufferedImage lionImage) {
    this.lionImage = lionImage;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public boolean isHungry() {
    return hungry;
}
public void setHungry(boolean hungry) {
    this.hungry = hungry;
}
public void bounce(){

}
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:51:24.797

您将环境面板创建为局部变量，类变量为空。

您的代码应该是：

```
//  JPanel enviromentPanel = new JPanel();
enviromentPanel = new JPanel();
enviromentPanel.setLayout(null);
enviromentPanel.setLocation(10, 10);
enviromentPanel.setSize(700, 700); 
```

另外，不要使用空布局。使用适当的布局管理器来布局您的组件。

# dynamic - 如何访问匿名类型的属性？

> ID：14816243
> 
> 赞同：0
> 
> 时间：2013-02-11T16:19:42.153
> 
> 标签：dynamic, ironpython, invoke, anonymous-types

考虑到这个 IronPython 脚本

```
def SensorEvent(d):
    print d
    print d.Message 
```

...我如何访问的属性`d`？

SensorEvent 方法的第一行成功打印

> { 消息 = 废话 }

但是第二行抛出异常：

> '<>f_anonymousType[str]' 对象没有属性 'Message'

* * *

**解释**

`d`是由 C# 方法的调用提供的匿名类型的实例。我这样调用它：

```
 public static async void ExecutePyFunc(string name, dynamic data)
    {
        try
        {
            var f = strategyScope.GetVariable<Action<object>>(name);
            if (f != null)
            {
                await Task.Run(() => f((object)data));
            }
        }
        catch (Exception x)
        {
            StaticLog("[Callback Exception] Fehler beim Ausführen einer Python Funktion: {0}", x.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:22:46.050

d 是字典。像这样访问它：

```
d['Message'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T17:15:11.193

**我使用 DynamicObject 的解决方案：**我引入了一个类，该类通过反射复制其属性来将匿名类型转换为已知类型（除了属性我不需要任何东西，但它可能会被增强以与字段、方法、函数一起使用以及）。

这是我想出的：

```
public class IronPythonKnownType : DynamicObject
{
    public IronPythonKnownType(dynamic obj)
    {
        var properties = obj.GetType().GetProperties();
        foreach (PropertyInfo prop in properties)
        {
            var val = prop.GetValue(obj);
            this.Set(prop.Name, val);
        }
    }

    private Dictionary<string, object> _dict = new Dictionary<string, object>();
    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        if (_dict.ContainsKey(binder.Name))
        {
            result = _dict[binder.Name];
            return true;
        }
        return base.TryGetMember(binder, out result);
    }

    private void Set(string name, object value)
    {
        _dict[name] = value;
    }

    public override bool TrySetMember(SetMemberBinder binder, object value)
    {
        _dict[binder.Name] = value;
        return true;
    }
} 
```

它有效地将匿名对象转换为 IronPython 可以处理的东西。

现在我可以这样做了：

```
def Blubb(a):
    print a.Message 
```

没有得到提到的例外。

# javascript - 使用javascript取消ajax modalpopupextender

> ID：14816259
> 
> 赞同：2
> 
> 时间：2013-02-11T16:20:47.173
> 
> 标签：javascript, asp.net, ajaxcontroltoolkit

我有一个带有 targetcontrolid = buttCopyFormula 的 modalpopupextender。buttCopyFormula 被包裹在一个 span 标签中，供用户验证他们想要继续。该按钮还具有一个 javascript 函数，可验证其中一个字段中是否存在文本，如果存在则将其放置在 modalpopup 内的文本框中。

如果该字段中没有文本，我想取消弹出窗口并显示一条消息。

我在按钮周围有一段时间了，但我只是添加了验证功能。我想有一个更好的方法可以做到这一点，但只是不确定它是什么。

执行此功能的最佳方法是什么？

# 目标控制按钮

```
<span onclick="return confirm('Copy the selected formula?')">
   <asp:ImageButton ID="buttCopyFormula" ImageAlign="AbsBottom" OnClientClick="transferName()" runat="server" ImageUrl="~/images2020/copy_32.png" /> 
   <b style="color:White">Copy</b>
</span> 
```

# 模态弹出窗口

```
 <asp:ModalPopupExtender ID="ModalPopupExtender2" Y="20" runat="server" 
        BackgroundCssClass="modalBackground" CancelControlID="buttFormulaCancel" 
        PopupControlID="Panel2" TargetControlID="buttCopyFormula">
 </asp:ModalPopupExtender>

 <asp:Panel ID="Panel2" runat="server" CssClass="modalQuestionBackground" 
        Style="display:none"><br />
        <h5>Enter a Name for the Formula</h5>
        <br /><br />
        Formula Name:&nbsp;
        <asp:TextBox ID="txtFormulaNameNew" CssClass="controltext" Width="65%" runat="server" Text=""></asp:TextBox><br /><br />
           <center>
               <asp:Button ID="buttFormulaSaveNew" runat="server" CssClass="button" 
               OnClick="buttFormulaSaveNew_Click" Text="Save Formula" />
               &nbsp;&nbsp;
               <asp:Button ID="buttFormulaCancel" runat="server" CssClass="button" 
               Text="Cancel" />
           </center>
        <br />
      </asp:Panel> 
```

# JavaScript 函数

```
 function transferName() {
       var v = document.getElementById("ctl00_ContentPlaceHolder1_txtFormulaNameNew").value;
       var f = document.getElementById("ctl00_ContentPlaceHolder1_txtFormulaName");
       if (v === "") {
           alert("Please select the formula you want to copy before proceeding");
           return false;
       }
       f.value = v
   } 
```

我一直在处理这个问题，首先删除了按钮周围的跨度，为模式弹出窗口放置了一个假超链接，并在弹出窗口中添加了一个行为 ID。我还更改了javascript如下...

# 新的 Javascript

```
 function transferName() {

       var v = document.getElementById("ctl00_ContentPlaceHolder1_txtFormulaNameNew").value;
       var f = document.getElementById("ctl00_ContentPlaceHolder1_txtFormulaName");
       if (f === "") {
           alert("Please select the formula you want to copy before proceeding");
           return false;
       } else {
           if (confirm('Copy selected formula?')) {
               f.value = v;
               var mod = $find("ModalPopupExtender2");
               alert(mod.id.toString);
               mod.show;
               return false;}
       }
   } 
```

我仍然无法显示 modalpopup。我想这是因为它包含在更新面板中。有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:42:05.670

您可以订阅`showing`ModelPopupExtender 的事件并根据某些条件取消显示。**将脚本放在ScriptManager 控件之后的**页面下方

 **```
Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(pageLoadedHandler);

function pageLoadedHandler(sender, args){
    var popupExtender = $find("ModalPopupExtender2"); // BehaviorId of popup extender
    popupExtender.remove_showing(onPopupShowing);
    popupExtender.add_showing(onPopupShowing);
}

function onPopupShowing(sender, args) {
    var txtFormulaNameNew;
    var txtFormulaName = $get("<%= txtFormulaName.ClientID %>");

    if (formulaTextBox.value.length === 0) {
        alert("Please select the formula you want to copy before proceeding");
        args.set_cancel(true);
    } else {
        if (confirm('Copy selected formula?')) {
            txtFormulaNameNew = $get("<%= txtFormulaNameNew.ClientID %>");
            txtFormulaNameNew.value = txtFormulaName.value;
        }
    }
} 
```**

# php - 使用 curl 将名称值对发布到 URL

> ID：14816261
> 
> 赞同：1
> 
> 时间：2013-02-11T16:20:54.067
> 
> 标签：php, post, curl

我已经注册了一个基于 Web 的短消息服务来发送文本消息以确认 Web 表单提交。我正在使用 CURL，我的 PHP 代码如下

```
$url = "http://www.mysmservice.co.uk/smsgateway/sendmsg.aspx?";
$param = "username=" . $username . "&password=" . $password . "&to=" . $diner_mobile . "&text=";
$smsmessage = "Hello, your table booking for " . $bookingdate . " at " . $booking_time . " is confirmed " , " Myrestaurant";

$ch = curl_init() or die(curl_error()); 
curl_setopt($ch, CURLOPT_POST,1); 
curl_setopt($ch, CURLOPT_POSTFIELDS,$param); 
curl_setopt($ch, CURLOPT_PORT, 80);
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
$data1=curl_exec($ch) or die(curl_error());
curl_close($ch); 
```

但它似乎没有向 URL 发布任何内容（mysmsservice 告诉我日志不指示任何传入请求）。但是，如果我访问以下 URL 并替换适当的变量，该服务将起作用。

[http://www.mysmsservice.co.uk/smsgateway/sendmsg.aspx?username=MyUsername](http://www.mysmsservice.co.uk/smsgateway/sendmsg.aspx?username=MyUsername) &password=MyPassword&to=44771012345,44771054321&text=TheMessage

不确定我是否正确使用了 CURL 调用。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:54:35.400

如果您说如果您访问在地址栏中直接输入所有参数（作为 GET 参数）的页面，它就可以工作，那么这意味着您不需要进行 POST 调用。

在这种情况下，您甚至不需要使用 cURL：

```
$base = 'http://www.mysmservice.co.uk/smsgateway/sendmsg.aspx';
$params = array(
    'username' => $username,
    'password' => $password,
    'to'       => $diner_mobile,
    'text'     => 'Your booking has been confirmed',
);
$url = sprintf('%s?%s', $base, http_build_query($params));
$response = file_get_contents($url); 
```

但是，如果您确实需要使用 POST，这应该可以：

```
$curl = curl_init();
curl_setopt_array($curl, array(
    CURLOPT_URL            => $base,
    CURLOPT_POST           => 1,
    CURLOPT_POSTFIELDS     => $params,
    CURLOPT_RETURNTRANSFER => 1,
    CURLOPT_SSL_VERIFYHOST => 0, // to avoid SSL issues if you need to fetch from https
    CURLOPT_SSL_VERIFYPEER => 0, // same ^
));
$response = curl_exec($curl); 
```

*注意：我显然没有测试过代码，但这就是我通常发出 cURL 请求的方式。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:25:04.083

或许 SMS 服务在消息丢失时表示没有有效的请求。如果您在这里查看您的代码：

```
$param = "username=" . $username . "&password=" . $password . "&to=" . $diner_mobile . "&text="; 
```

您永远不会将消息添加到 $param。不过，您可以在变量 $smsmessage 中构建它。您应该将代码修改为：

```
$smsmessage = "Hello, your table booking for " . $bookingdate . " at " . $booking_time . " is confirmed, " . " Myrestaurant";
$param = "username=" . $username . "&password=" . $password . "&to=" . $diner_mobile . "&text=" . $smsmessage; 
```

# ruby-on-rails - 在 Rails 中应用 titleize 之前检查破折号

> ID：14816268
> 
> 赞同：4
> 
> 时间：2013-02-11T16:21:17.897
> 
> 标签：ruby-on-rails

我对 Ruby 和 Rails 非常陌生，需要知道如何在应用 titlelize 之前检查字符串是否包含破折号。

```
@city = City.first :conditions => { :title => params[:city].titleize } 
```

我需要做的是：

```
@city = City.first :conditions => { :title => params[:city] } 
```

然后编写仅在`@city`变量不包含破折号时才应用标题化的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-06T14:55:35.743

我喜欢几周前 zachrose 添加的这个解决方案：[https ://gist.github.com/varyonic/ccda540c417a6bd49aec](https://gist.github.com/varyonic/ccda540c417a6bd49aec)

```
def nice_title(phrase)
  return phrase if phrase =~ /^-+$/
  phrase.split('-').map { |part|
    if part.chars.count == part.bytes.count
      part.titleize
    else
      part.split(' ').map { |word| word.mb_chars.titleize }.join(' ')
    end
  }.join('-')
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:27:09.353

```
if params[:city] =~ /-/
  @city = City.first :conditions => { :title => params[:city] }
else
  @city = City.first :conditions => { :title => params[:city].titleize }     
end 
```

我不知道您为什么要使用它，但我相信它不适用于所有情况。应该有更好的方法。

# c# - 在 WPF 工具包图表上绘制自定义标记

> ID：14816272
> 
> 赞同：0
> 
> 时间：2013-02-11T16:21:24.027
> 
> 标签：c#, wpf, .net-4.0, charts

我有使用 WPF Toolkit DataVisualisation Chart 的简单 (x,y) 图表。

这是面积图，但可以是折线图或方框图。

我需要在图表上显示 - 最后更新了哪个数据点。我想为该数据点画一条线或显示一条粗网格线。

可以做些什么来实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:22:14.097

我不得不更改工具包类中的代码。`OrientedAxisGridLines`在经历了 4 个小时后，我终于通过将一些代码添加到：（画线），`LinearAxis`（计算线的像素位置），`DataPointSeriesWithAxes`（让 dep 道具绑定到用户数据）中完成了继承的 khaos 。

代码很尴尬，是为了完成工作而编写的，所以我不分享它。

如果有想看的人-留下评论我可能会稍后再做...

# nsmutablearray - 如何通过编程生成的字符串更改可变数组的名称

> ID：14816278
> 
> 赞同：0
> 
> 时间：2013-02-11T16:21:35.323
> 
> 标签：nsmutablearray, nsarray

我是论坛的新手，也许我问了一个愚蠢的问题，但我想知道我是否陷入了死胡同。

我想通过以编程方式生成的字符串更改可变数组的名称。这可能吗？

我试图从数组中获取空​​的可变数组以防用户需要一些，但我认为这不是很好的解决方案。

我没有找到任何参考，对它做出一些评论，比如 .name、.label.text 或类似的可能对我有帮助的东西。

代码很简单

*   rowNumber 是一个以编程方式生成的字符串
*   zeroRow 是一个可变数组，它将其值传输到新的可变数组。

    NSString *newMutableArrayName = [@"row" stringByAppendingString:rowNumber]; NSMutableArray *newMutableArray = zeroRow;

此时我想将可变数组的名称更改为 newMutableArrayName 给定的名称。

我在要求一件不可能的事情吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:57:04.607

如果您想更改名称意味着您可以将所有对象更改为另一个 NSMutableArray 数组，就像

```
NSmutableArray *array = [[NSMutableArray alloc]initWithArray:@"arrayName"]; 
```

# android - GeoPoint 和当前位置

> ID：14816280
> 
> 赞同：0
> 
> 时间：2013-02-11T16:21:41.523
> 
> 标签：android, location, geopoints

如何从我的位置获取当前的 GeoPoint。我在：经度：21.760029 纬度：54.035795

但是当我使用 getLatitude() 时，我有 54.0 但我想要 54.035795。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:24:27.910

这是将纬度、经度对转换为`GeoPoint`对象的方法：

```
public static GeoPoint convert(double latitude, double longitude)
{
    int lat = (int)(latitude * 1E6);
    int lng = (int)(longitude * 1E6);

    return new GeoPoint(lat, lng);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T18:50:33.367

我用这个：

```
LocationGpsListener mGPS = new LocationGpsListener(this);
currentLocation = mGPS.getLocation(); 
```

和听众：

```
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.provider.Settings;
import android.util.Log;

public final class LocationGpsListener implements LocationListener {

        private final Context mContext;
        public boolean isGPSEnabled = false;
        boolean isNetworkEnabled = false;
        boolean canGetLocation = false;

        Location location;
        Double latitude;
        Double longitude;

        private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10;
        private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1;

        protected LocationManager locationManager;

        public LocationGpsListener(Context context) {
            this.mContext = context;
            getLocation();
        }

        public Location getLocation() {
            try {
                locationManager = (LocationManager) mContext.getSystemService(Context.LOCATION_SERVICE);
                isGPSEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
                Log.v("isGPSEnabled", "=" + isGPSEnabled);

                isNetworkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
                Log.v("isNetworkEnabled", "=" + isNetworkEnabled);

                if (isGPSEnabled == false && isNetworkEnabled == false) {

                } else {
                    this.canGetLocation = true;
                    if (isNetworkEnabled) {
                        locationManager.requestLocationUpdates(
                                LocationManager.NETWORK_PROVIDER,
                                MIN_TIME_BW_UPDATES,
                                MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                        if (locationManager != null) {
                            location = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                            if (location != null) {
                                latitude = location.getLatitude();
                                longitude = location.getLongitude();
                            }
                        }
                    }
                    if (isGPSEnabled) {
                        if (location == null) {
                            locationManager.requestLocationUpdates(
                                    LocationManager.GPS_PROVIDER,
                                    MIN_TIME_BW_UPDATES,
                                    MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                            Log.d("GPS Enabled", "GPS Enabled");
                            if (locationManager != null) {
                                location = locationManager
                                        .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                                if (location != null) {
                                    latitude = location.getLatitude();
                                    longitude = location.getLongitude();
                                }
                            }
                        }
                    }
                }

            } catch (Exception e) {
                e.printStackTrace();
            }

            return location;
        }

        public void stopUsingGPS() {
            if (locationManager != null) {
                locationManager.removeUpdates(LocationGpsListener.this);
            }
        }

        public double getLatitude() {
            if (location != null) {
                latitude = location.getLatitude();
            }
            return latitude;
        }

        public double getLongitude() {
            if (location != null) {
                longitude = location.getLongitude();
            }
            return longitude;
        }

        public boolean canGetLocation() {
            return this.canGetLocation;
        }

        public void showSettingsAlert() {
            AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

            alertDialog.setTitle("Ustawienia GPS");
            alertDialog.setMessage("GPS jest wyłączony. Przejść do ustawień GPS?");

            alertDialog.setPositiveButton("Settings",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            Intent intent = new Intent(
                                    Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                            mContext.startActivity(intent);
                        }
                    });

            alertDialog.setNegativeButton("Cancel",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            dialog.cancel();
                        }
                    });
            alertDialog.show();
        }

        @Override
        public void onLocationChanged(Location location) {
            this.location = location;
        }

        @Override
        public void onProviderDisabled(String provider) {
        }

        @Override
        public void onProviderEnabled(String provider) {
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
        } 
```

# alm - Rational ClearQuest 是否已被 Team Concert 取代？

> ID：14816285
> 
> 赞同：1
> 
> 时间：2013-02-11T16:21:48.270
> 
> 标签：alm, clearquest, rational-team-concert

根据与 IBM Rational ClearQuest 相关的[Wikipedia 详细信息](http://en.wikipedia.org/wiki/IBM_Rational_ClearQuest)，该产品的“最新”版本于 2011 年 10 月发布。

假设 IBM 不再积极开发它，并且他们的替代 Rational Team Concert 是他们在这个领域的首选产品，我是否正确？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T18:15:49.550

请允许我自我介绍一下，我是 Howie Bernstein，ClearCase 和 ClearQuest 产品经理。现在，我们处于公开测试阶段，其中包含 ClearCase 和 ClearQuest 的两个重要特性。ClearCase 处于测试阶段，带有用于 ClearCase 元素的基于角色的访问控制列表，而 ClearQuest 处于测试阶段，带有 ClearQuest Web 中的多记录更新（以及一些其他特性）。如果您目前是 ClearCase 或 ClearQuest 客户，您可以在此处访问公开测试版：[https ://www14.software.ibm.com/iwm/web/cc/earlyprograms/rational/cacv801/](https://www14.software.ibm.com/iwm/web/cc/earlyprograms/rational/cacv801/)

将 RTC 视为 ClearCase 和 ClearQuest 的替代品是错误的。这将完全取决于您的组织所依赖的 ClearCase 和 ClearQuest 的哪些特性。对于在 ClearCase 中很少使用动态视图、流程触发器、构建审计（和其他）的组织，那么切换到 RTC SCM 可能是一个合理的考虑。ClearQuest 也是如此。如果您的组织利用了 ClearQuest 的高级定制功能并依赖这些功能来执行您的定制工作流程，那么 RTC 可能不是您的好解决方案。

在我们的开发组织中，我们一起使用所有这三个。我们将 ClearQuest 用于外部 RFE 和 APAR 提交和工作流程，我们将 ClearCase 用于我们的 SCM（在 ClearCase 和 ClearQuest 团队以及整个 IBM 的其他团队中），我们将 RTC 用于我们的工作项目规划和执行。我们在 CC/CQ 和 RTC 之间拥有出色的桥接和同步功能，使这成为可能。

至于未来，我们有开发团队致力于 ClearCase 和 ClearQuest 的新特性，我们计划在未来推出新版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T16:39:01.100

像 ClearQuest 这样的 ClearCase 仍然被“维护”，但没有任何新的突出特性。

RTC 更像是三个工具的集合：

*   工作项管理（替换 ClearQuest）
*   源代码控制管理（Jazz 源代码控制，替代 ClearCase）
*   构建引擎（类似于 BuildForge，但也能够使用 RTC4 与 Hudson/Jenkins 通信）

因此，RTC 不仅仅是 ClearQuest 的替代品，而是一种在应用程序开发生命周期中确保可追溯性的方法：

*   从初始请求（工作项）
*   代码更改（源代码控制）
*   从特定版本的代码构建（构建引擎）

# python - 在 Mountain Lion Server 上查看文件源时出现 Gitlab 500 错误

> ID：14816286
> 
> 赞同：2
> 
> 时间：2013-02-11T16:21:50.687
> 
> 标签：python, osx-mountain-lion, gitlab

还有另一个问题。

如果我尝试在“文件”选项卡中查看文件的内容，则不会显示任何内容。

快速查看 production.log 后，我发现以下内容：

```
Completed 500 Internal Server Error in 149ms

ActionView::Template::Error (Failed to get header.):
    9:   .file_content.code
    10:     - unless blob.empty?
    11:       %div{class: user_color_scheme_class}
    12:         = raw blob.colorize(formatter: :gitlab)
    13:     - else
    14:       %p.nothing_here_message Empty file
  app/models/tree.rb:6:in `colorize'
  app/views/tree/blob/_text.html.haml:12:in `_app_views_tree_blob__text_html_haml__2117416289591340656_70112288282740'
  app/views/tree/_blob.html.haml:9:in `_app_views_tree__blob_html_haml__810415587318185235_70112333949220'
  app/views/tree/_tree.html.haml:19:in `_app_views_tree__tree_html_haml___380187574798250597_70112300103920'
  app/views/tree/show.js.haml:3:in `_app_views_tree_show_js_haml__4018035125126620215_70112300060420' 
```

经过一番谷歌搜索后，我发现了一些 Github 问题，将其描述为 python 版本错误。

我通过 安装了 python `brew install python`，它应该是正确的 python 安装。至少我从控制台得到了正确的版本。

```
Python 2.7.3 (default, Feb 11 2013, 16:34:20) 
[GCC 4.2.1 Compatible Apple LLVM 4.2 (clang-425.0.24)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> 
```

我只是仔细检查了`bundle exec rake gitlab:check RAILS_ENV=production`

我认为一切都很好，期待一些与 OS X 相关的东西，比如 init 脚本的东西。

```
Checking Environment ...

gitlab user is in gitg group? ... yes
Has no "-e" in ~gitolite/.profile ... yes
Git configured for gitlab user? ... yes
Has python2? ... yes
python2 is supported version? ... yes

Checking Environment ... Finished

Checking Gitolite ...

Using recommended version ... no
  Try fixing it:
  We strongly recommend using the version pointed out in the installation guide.
  For more information see:
  doc/install/installation.md in section "Gitolite"
Repo umask is 0007 in .gitolite.rc? ... yes
Allow all Git config keys in .gitolite.rc ... yes
Config directory exists? ... yes
Config directory owned by gitolite:gitg ... yes
Config directory access is drwxr-x---? ... yes
Repo base directory exists? ... yes
Repo base directory is a symlink? ... no
Repo base owned by gitolite:gitg? ... yes
Repo base access is drwxrws---? ... yes
Can clone gitolite-admin? ... yes
Can commit to gitolite-admin? ... yes
post-receive hook exists? ... yes
post-receive hook up-to-date? ... yes
post-receive hooks in repos are links: ... 
Some-Customer / Some Repo ... ok
Some-Customer / Some Repo ... ok
Some-Customer / Some Repo ... ok
Git config in repos: ... 
Some-Customer / Some Repo ... ok
Some-Customer / Some Repo ... ok
Some-Customer / Some Repo ... ok

Checking Gitolite ... Finished

Checking Sidekiq ...

Running? ... yes

Checking Sidekiq ... Finished

Checking GitLab ...

Database config exists? ... yes
Database is SQLite ... no
All migrations up? ... yes
GitLab config exists? ... yes
GitLab config outdated? ... no
Log directory writable? ... yes
Tmp directory writable? ... yes
Init script exists? ... no
  Try fixing it:
  Install the init script
  For more information see:
  doc/install/installation.md in section "Install Init Script"
  Please fix the error above and rerun the checks.
Init script up-to-date? ... can't check because of previous errors
Projects have satellites? ... 
Some-Customer / Some Repo ... yes
Some-Customer / Some Repo ... yes
Some-Customer / Some Repo ... yes

Checking GitLab ... Finished 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:45:54.067

这可能不仅仅是一个 python 版本，如“ [Issue 2214](https://github.com/gitlabhq/gitlabhq/issues/2214) ”或“ [Issue 2272](https://github.com/gitlabhq/gitlabhq/issues/2272) ”。

最近的错误（例如[问题 2817](https://github.com/gitlabhq/gitlabhq/issues/2817)）仍未解决。

如“[问题 2410](https://github.com/gitlabhq/gitlabhq/issues/2410) ”中所述，仔细检查检查：

```
sudo -u gitlab -H bundle exec rake gitlab:check RAILS_ENV=production 
```

# excel - 如何在 VBA 中以编程方式将饼图标签格式设置为单元格格式

> ID：14816289
> 
> 赞同：0
> 
> 时间：2013-02-11T16:22:05.550
> 
> 标签：vba将值格式化为单元格中的值, excel, vba

我正在从一组数据生成一个饼图。

*   图表标签具有值和百分比。
*   我想使用[vba将值格式化为单元格中的值](/questions/tagged/vba "显示标记为“vba”的问题")

我不知道从哪里开始......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:47:55.323

您可以将标签的数字格式链接到单元格的数字格式。通过用户界面，您可以通过格式化标签并在数字选项卡上选择“链接到源”来执行此操作。

如果您在此期间运行宏记录器，您将获得相应的 VBA，即链接

```
ActiveChart.SeriesCollection(1).DataLabels.NumberFormatLinked = -1 
```

并取消链接

```
ActiveChart.SeriesCollection(1).DataLabels.NumberFormatLinked = 0 
```

# android - Android：拥有 targetSDK > BuildTarget 的后果

> ID：14816292
> 
> 赞同：18
> 
> 时间：2013-02-11T16:22:13.053
> 
> 标签：android

我想知道拥有的后果`targetSDK > buildTarget`。

我最近观察到，如果我保留平板电脑上的`buildTarget=16`和选项卡（正在运行，API 级别 16），则会移动到操作栏的中心。我无法合理化这种行为。有人可以解释为什么会这样吗？`targetSDK=17``4.1.1`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-11T16:56:30.470

好问题！前段时间我也有类似的行为，当时 buildTarget 和 targetSDK 在所描述的方式上有所不同。我花了一些时间来弄清楚，但我会尝试总结我的理解。

您必须区分三个重要值：

1.  `minSdkVersion`：

    这是应用程序将（或应该！）运行的最低可用版本。将 .apk 安装到 Android 上时，将检查该值，如果您运行的 Android 版本低于指定版本，则不会安装。

2.  `buildTarget`：

    这是编译应用程序的 .apk 的 SDK（Eclipse 也将作为该值的目标，用于检查编译错误）。如果`buildTarget`高于`minSdkVersion`，即使您的 Android 版本不支持所有方法，您也可以安装该应用程序。默认情况下，这设置为您的 SDK 中可用的最新版本的 Android。您仍然可以构建您的应用程序以支持旧版本，但将构建目标设置为最新版本允许您启用新功能并优化您的应用程序，以便在最新设备上获得出色的用户体验。

    如果在较低的 API 级别上运行，您需要检查您正在使用的方法在运行时是否存在，否则应用程序可能会崩溃！

3.  `targetSdkVersion`：

    指定您的`targetSdkVersion`应用应在哪个 SDK 平台上正常运行。因此，如果您针对 API 17 进行测试，您可以将 API 17 添加为`targetSdkVersion`. 如果使用 Android 版本 > `targetSdkVersion`，Android 系统将进入某种前向兼容模式以确保对应用程序的支持。将输入此兼容性行为以确保您的应用程序继续按照您期望的方式运行，因为在非 API 级别之间的行为可能会发生一些变化（[这里是一些最重要的变化](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html)）。因此，为较低 API 级别开发的任何应用程序都将能够在较高版本上运行，因为旧行为（如过时值）可能会在兼容模式下“模拟”。

    例如：

    如果您设置`targetSdkVersion`为 HONEYCOMB (API 11)，默认主题将更改为`Theme_Holo`（即深色全息 UI）。设置`targetSdkVersion`为较低的值将影响系统保持默认的轻主题，无论您将使用哪个构建 API！

    在您的情况下，API 16 和 17 之间似乎没有太多明显的变化，这应该会影响设计更改，但我想，更高版本`targetSdkVersion`会在编译时影响一些额外的变化（比如包括额外的类、主题, values, ...)，这将影响不同的行为，就像上面的主题示例一样。

我希望这对您有所帮助，以找出奇怪的行为。这里有一些更多相关信息可以在[Android 开发者文档](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)中阅读。

*PS：有一种前向后向地狱：Android系统是向后兼容的，这样就保证了Android应用程序的前向兼容。这意味着：如果您通过 OTA 更新您的 Android 版本，所有旧应用程序都应该保持运行（因此它们将保持向前兼容）。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T17:54:25.117

构建目标用于应用程序开发，目标 SDK 用于应用程序兼容性。

构建**目标**指定您在实现应用程序时可以访问的 API。就像如果您将构建标记设置为 android API 级别 10，那么就您的代码而言，没有 ActionBar 之类的东西。您在开发过程中使用的 API 只是 Android 的一个存根实现，这是必须在真实设备上模拟或运行的方式。因此，构建目标定义（对编译器和您的 IDE）您正在使用的 Android 接口。编译后，基于构建目标应该没有区别（Android系统看不到构建目标，它是一个编译时标志）。这是您与 android 编译器（和您的 IDE）之间的严格约定，它定义了您可以在应用程序中使用的 Android 组件，

**目标**SDK**是您与 Android 系统签订的合同，以确保您的应用程序已准备好从您的最小 SDK 到目标 SDK 正常工作（有效的最大 SDK，因为通常应避免使用最大 SDK 设置）。我相信有一些东西没有向前兼容，比如一些安全变化（可能变化来自应用程序开发之外并且是系统范围的）。本合同是一项协议，意味着您已采取措施确保您的应用能够处理该范围内 Android API 的任何更改，以便在所有情况下都能提供您期望的行为。合同的另一端来自Android系统，它同意使用不超过你目标SDK的Android实现，**

 **关于前向兼容性的说明意味着您的构建目标应始终至少与您的目标 SDK 匹配。您是说您已经测试了您的应用程序以在您的目标 SDK 上运行，那么为什么要针对较低的 API 级别构建它呢？

构建目标和目标 SDK 的实际示例： [ActionBarSherlock](http://actionbarsherlock.com/faq.html)提供向后兼容的 ActionBar。以下是目前使用该库的要求引用。

> 库本身必须针对 Android 4.0（API 级别 14）构建。您的项目应尽可能使用最新版本的 SDK 构建，只要它是 4.0 或更高版本。
> 
> 需要以 API 级别 11 或更高版本为目标，因为它会导致 Android 在较新的设备上运行时自动添加本机操作栏。由于您将针对新的 API 进行编译，但您的应用程序可能会在具有旧版本 Android 的设备上运行，因此必须特别注意避免使用或正确检查和调用在您的最低 SDK 版本之后引入的任何方法。

第一段显示需要包含 4.0 ActionBar API 的**构建目标**，因为库使用它并且没有它就无法编译。第二段显示需要包含 3.0 ActionBar API 的**目标 SDK**，因为该库在此类设备上使用本机 ActionBar，但如果您的目标 SDK 低于 3.0，Android 系统将不会提供 ActionBar，因为这告诉它不使用比您的目标更新的任何东西（如 3.0 ActionBar）。

一些参考资料：

[构建目标](http://developer.android.com/tools/projects/projects-cmdline.html "构建目标")

[目标 SDK](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html#fc "目标 SDK")**

# mysql - 基于多个日期列和排序结果进行选择的查询

> ID：14816299
> 
> 赞同：0
> 
> 时间：2013-02-11T16:22:46.233
> 
> 标签：mysql

我有一个 MYSQL 数据库，其中包含以下字段（简化为显示问题）：

```
id | courseID | date1      | date2      | date 3     | date 4 
-----------------------------------------------------------------
1  | 10       | 2013-01-01 | 2013-02-05 | 0000-00-00 | 0000-00-00
2  | 23       | 2013-03-02 | 2013-05-04 | 2013-07-05 | 0000-00-00
3  | 35       | 2013-02-01 | 0000-00-00 | 0000-00-00 | 0000-00-00 
```

我的问题是我可以使用什么查询在按日期降序排序的四个字段之一中查找日期小于或等于今天的所有课程。所以对于我上面的数据库，查询会给我：

```
id  | courseID | date
---------------------------
1   | 10       | 2013-02-05
3   | 35       | 2013-02-01
1   | 10       | 2013-01-01 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:27:04.470

如果您无法规范化您的表，您可以使用 UNION 查询，如下所示：

```
SELECT id, courseID, date1 date
FROM yourtable
WHERE date1>'0000-00-00' and date1<=curdate()
UNION
SELECT id, courseID, date2 date
FROM yourtable
WHERE date2>'0000-00-00' and date2<=curdate()
UNION
SELECT id, courseID, date3 date
FROM yourtable
WHERE date3>'0000-00-00' and date3<=curdate()
UNION
SELECT id, courseID, date4 date
FROM yourtable
WHERE date4>'0000-00-00' and date4<=curdate()
ORDER BY date 
```

[在这里](http://sqlfiddle.com/#!2/fecc8/2)看小提琴。

由于我使用的是 UNION，所有重复项都将被删除。如果您不想删除重复项，则可以改用 UNION ALL。

# python - 使用完整矩阵模拟 scipy 中的 ode（对象对于所需数组而言太深）

> ID：14816300
> 
> 赞同：2
> 
> 时间：2013-02-11T16:22:47.893
> 
> 标签：python, numpy, scipy, ode

我在 am*m 矩阵 S 中有一个 diff eqs 系统。 S[i,j] 是一个特定的物种浓度，受 S[i-1,j] 和 S[i,j-1] 的影响

我可以在每个步骤中获取每个条目的 dx/dt（由 update_matrix 返回），但随后我需要将其整合以更新我的初始浓度（x 与 x_counts 相同）。但是 scipy 的Integrate.odeint 不接受矩阵作为输入（或返回值并引发对象太深错误。

有什么办法可以调整它以使用矩阵上的积分器？我提供了一段代码：diffeq 为每个条目返回 dx/dt。update_matrix 返回矩阵 B，其中 B[ij]=dx[i,j]/dt

```
def diffeq(x,i,j,coeffs):
    if (i==1 and j==0):
        return (-(coeffs.M(1,0)-coeffs.L(1,0)))+coeffs.d(1,0)-coeffs.get_phi()*x[1][0]
    elif j==0:
        return (-(coeffs.M(i,0)+coeffs.L(i,0)))*x[i][0]+coeffs.L(i-1,0)*x[i-1][0]+coeffs.d(i,j)-coeffs.get_phi()*x[i][0]
    elif (i>1 and j>0):
        return (-(coeffs.M(i,j)+coeffs.L(i,j)))*x[i][j]+coeffs.M(i,j-1)*x[i][j-1]+coeffs.L(i-1,j)*x[i-1][j]+coeffs.d(i,j)-coeffs.get_phi()*x[i][j]
    elif i==1 and j>0:
        return (-(coeffs.M(1,j)+coeffs.L(1,j)))*x[1][j]+coeffs.M(1,j-1)*x[1][j-1]+coeffs.d(1,j)-coeffs.get_phi()*x[1][j]
    elif i==0 and j==1:
        return -x[0][1]+coeffs.d(0,1)-coeffs.get_phi()*x[0][1]
    elif i==0 and j>1:
        return -j*x[0][j]+(j-1)*x[0][j-1]+coeffs.d(0,j)-coeffs.get_phi()*x[0][j]

def update_matrix(x,coeffs,m):
    update_matrix=numpy.zeros((m,m))
    for i in range(m+1):
        for j in range(m+1-i):
            update_matrix[m][m]=diffeq(x,i,j,coeffs)
    return update_matrix

def run_simulation_R2(a,q,m):

    x_counts=numpy.zeros((m,m))
    x_counts[1][0]=1
    x_counts[0][1]=1
    coeffs=R2(a,q,m,x_counts)
    t=range(0,100)
    output = integrate.odeint(update_matrix, x_counts, t, args=(coeffs, m)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:48:48.023

如果`odeint`需要一个向量，而不是一个矩阵，你将不得不给它一个向量。如果您不想过多地更改代码的逻辑，则可以通过在需要的任何地方自由应用来在函数外部创建`x`一个`(m**2,)`向量，但在内部仍然是一个矩阵。您没有向我们提供足够的信息来对其进行全面测试，但这样的事情可能会奏效：`(m, m)``.reshape(-1)`

```
def update_matrix(x,coeffs,m):
    x = x.reshape(m, m)
    update_matrix=numpy.zeros((m,m))
    for i in range(m+1):
        for j in range(m+1-i):
            update_matrix[m][m]=diffeq(x,i,j,coeffs)
    return update_matrix.reshape(-1)

def run_simulation_R2(a,q,m):
    x_counts=numpy.zeros((m,m))
    x_counts[1][0]=1
    x_counts[0][1]=1
    coeffs=R2(a,q,m,x_counts)
    t=range(0,100)
    output = integrate.odeint(update_matrix, x_counts.reshape(-1), t,
                              args=(coeffs, m))
    return output.reshape(m, m) 
```

# matlab - Matlab如何提示使用VS10 64位编译器

> ID：14816301
> 
> 赞同：1
> 
> 时间：2013-02-11T16:22:54.690
> 
> 标签：matlab, compiler-construction, 64-bit

我正在尝试使用 Visual Studio 2010 Professional 编译器在 MATLAB 中编译和运行 64 位应用程序。我知道程序和编译器都能正常工作，因为当我从 Visual Studio x64 命令提示符启动 matlab 时，我能够毫无问题地运行程序。

我已经运行 mex -setup 并选择了 2010 编译器，如下所示：

```
mex -setup Please choose your compiler for building external interface (MEX) files:

Would you like mex to locate installed compilers [y]/n? y

Select a compiler: 
  [1] Microsoft Visual C++ 2010 in C:\Program Files (x86)\Microsoft Visual Studio 10.0  
  [2] Microsoft Visual C++ 2008 Express in C:\Program Files (x86)\Microsoft Visual Studio 9.0   
  [0] None

Compiler: 1

Please verify your choices:

Compiler: Microsoft Visual C++ 2010 Location: C:\Program Files (x86)\Microsoft Visual Studio 10.0

Are these correct [y]/n? y

************************************************************************* Warning: MEX-files generated using Microsoft Visual C++ 2010 require that Microsoft Visual Studio 2010 run-time libraries be available on the computer they are run on. If you plan to redistribute your MEX-files to other MATLAB users, be sure that they have the run-time libraries. *************************************************************************

Trying to update options file: C:\Users\OEM\AppData\Roaming\MathWorks\MATLAB\R2010a\mexopts.bat From template: C:\PROGRA~1\MATLAB\R2010a\bin\win64\mexopts\msvc100opts.bat

Done . . . 
```

不幸的是，这似乎不允许我运行 64 位应用程序。我收到有关 cl 预处理器命令的错误，这表明我没有使用 64 位编译器。有谁知道我可以如何配置它，这样我就不需要从 Visual Studio 2010 命令行运行 Matlab？我将不胜感激这方面的任何帮助。

提前非常感谢！

大学教师

# android - Flash 视频不会使用 ViewFlipper 滑动

> ID：14816306
> 
> 赞同：0
> 
> 时间：2013-02-11T16:23:15.937
> 
> 标签：android, flash, viewflipper

您好，我已经为此工作了一段时间。我正在使用 GestureListener 和 ViewFlipper 在两个不同的 WebView 之间滑动。一个 webview 是聊天，另一个是 flash 流。steam是全屏的，滑动时不会离开屏幕。聊天滑动但是当我向后滑动时它不会返回。当我改变方向时，我可以看到下面的聊天。请帮忙。

手势有效，但视频不会移动。我怎样才能把它移到后面？

```
public class WebViewPager extends Activity implements SimpleGestureListener {

private FrameLayout holder;
private WebView streamView;
private WebView chatView;
private ViewFlipper flipView;
private ProgressDialog pDialog;
private String url = "http://www.justin.tv/dbz_hd2/popout";
private String url2 = "http://www.justin.tv/chat/embed?channel=dbz_hd2";
private SimpleGestureFilter filter;
private Animation slideLeft;
private Animation slideRight;

final Activity activity = this;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_layout);
    holder = (FrameLayout) findViewById(R.id.streamViewHolder);
    streamView = (WebView) findViewById(R.id.streamView);
    StreamClientSettings();

    flipView = (ViewFlipper) findViewById(R.id.mainFlipper);
    flipView.setDisplayedChild(1);
    this.filter = new SimpleGestureFilter(this, this);
    this.filter.setMode(SimpleGestureFilter.MODE_TRANSPARENT);

    slideLeft = AnimationUtils.loadAnimation(this, R.anim.translate);
    slideRight = AnimationUtils.loadAnimation(this, R.anim.translate);

    new ManageViews().execute();
}

private class ManageViews extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... args) {
        // TODO Auto-generated method stub

        chatView = (WebView) findViewById(R.id.chatView);
        ChatClientSettings();

        return null;
    }

}

@Override
public boolean dispatchTouchEvent(MotionEvent me) {
    this.filter.onTouchEvent(me);
    return super.dispatchTouchEvent(me);    
}

public void StreamClientSettings() {

//      streamView = new WebView(this);
//      streamView.setLayoutParams(new ViewGroup.LayoutParams(
//              LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
    streamView.getSettings().setPluginState(PluginState.ON);
    streamView.getSettings().setJavaScriptEnabled(true);
    streamView.setWebViewClient(new StreamClient() {
        @Override
        public boolean shouldOverrideUrlLoading(WebView v, String url) {
            return false;
        }
    });
    streamView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
    streamView.getSettings().setLoadsImagesAutomatically(true);
    streamView.getSettings().setUseWideViewPort(true);
    streamView.getSettings().setLoadWithOverviewMode(true);
    String s = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:8.0.1)";
    streamView.getSettings().setUserAgentString(s);
//      streamView.requestFocus(View.FOCUS_DOWN);
    streamView.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
//              switch (event.getAction()) {
//              case MotionEvent.ACTION_DOWN:
//              case MotionEvent.ACTION_UP:
//                  if (!v.hasFocus()) {
//                      v.requestFocus();
//                  }
//                  break;
//              }
            return false;
        }
    });
    streamView.loadUrl(url);

}

public void ChatClientSettings() {

    //chatView = new WebView(this);
//      chatView.setLayoutParams(new ViewGroup.LayoutParams(
//              LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
    chatView.getSettings().setPluginState(PluginState.ON);
    chatView.getSettings().setJavaScriptEnabled(true);
    chatView.setWebViewClient(new StreamClient() {
        @Override
        public boolean shouldOverrideUrlLoading(WebView v, String url) {
            return false;
        }
    });
    chatView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
    chatView.getSettings().setLoadsImagesAutomatically(true);
    chatView.getSettings().setUseWideViewPort(true);
    chatView.getSettings().setLoadWithOverviewMode(true);
    String s = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:8.0.1)";
    chatView.getSettings().setUserAgentString(s);
    chatView.requestFocus(View.FOCUS_DOWN);
    chatView.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
            case MotionEvent.ACTION_UP:
                if (!v.hasFocus()) {
                    v.requestFocus();
                }
                break;
            }
            return false;
        }
    });
    chatView.loadUrl(url2);

}

private void setStreamView() {

    if (flipView.getDisplayedChild() != 0) {
        flipView.setDisplayedChild(0);
        flipView.setInAnimation(slideRight);
        //flipView.setOutAnimation(slideLeft);
    }

}

private void setChatView() {

    if (flipView.getDisplayedChild() != 1) {
        flipView.setDisplayedChild(1);
        flipView.setInAnimation(slideLeft);
        //flipView.setOutAnimation(slideRight);
    }
}

@Override
public void onSwipe(int direction) {
    // TODO Auto-generated method stub

    switch (direction) {

    case SimpleGestureFilter.SWIPE_RIGHT:
        if (flipView.getDisplayedChild() == 0) {
            //flipView.setDisplayedChild(1);
            setChatView();
        }
        break;

    case SimpleGestureFilter.SWIPE_LEFT:
        if (flipView.getDisplayedChild() == 1) {
            //flipView.setDisplayedChild(0);
            setStreamView();
        }
        break;
    }
} 
```

我的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

<ViewFlipper
    android:id="@+id/mainFlipper"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <FrameLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/streamViewHolder"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@null" >

        <WebView
            android:id="@+id/streamView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />
    </FrameLayout>

    <WebView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/chatView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
</ViewFlipper>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:15:20.643

原来flash video player是某种不能被java控制的父级。通过从布局持有者中删除视图，它会产生滑动的效果。花了很多的试验和错误，但它的工作原理！

```
 @Override
public void onSwipe(int direction) {
    // TODO Auto-generated method stub

    switch (direction) {

    case SimpleGestureFilter.SWIPE_RIGHT:
        if (flipView.getDisplayedChild() == 1) {
            //flipView.setDisplayedChild(1);
            setStreamView();
            holder.addView(streamView);
        }
        break;

    case SimpleGestureFilter.SWIPE_LEFT:
        if (flipView.getDisplayedChild() == 0) {
            //flipView.setDisplayedChild(0);
            setChatView();
            holder.removeAllViews();
        }
        break;
    } 
```

# java - 如何组织这些抽象页面对象方法？

> ID：14816310
> 
> 赞同：1
> 
> 时间：2013-02-11T16:23:27.980
> 
> 标签：java, webdriver, abstract

这确实是一个一般的 Java 问题，但我认为用它产生的特定 Webdriver 角度来解释会更容易。

我有一个复杂的页面对象，现在我想对其进行抽象，因为我发现另一个页面非常相似，但在关键方面有所不同。现在，我的许多返回页面对象实例的方法都被破坏了。我想将这些方法的大部分代码保留在抽象类中，并且仍然让它们返回新子类的实例；这些方法应该返回调用它们的任何子类的新实例。

这是一个包含两个子类通用的 navNextPage 方法的示例。这似乎有效，但感觉不对：

```
public abstract class PresContentPage {
     protected PresContentPage navNextPage() {
          // code to navigate to the next page goes here
          return null;
     }
}

public class MainContent extends PresContentPage {
     public MainContent navNextPage() {
          super.navNextPage();
          return new MainContent(...);
     }
}

// And so on with another subclass... 
```

所以，这就是我想要的：`navNextPage`方法的代码被隔离在抽象类中，但是被调用的版本将返回调用该方法的类型的页面对象。

我只是觉得我的受保护方法（它不是也不能是无效的）返回 null 是错误的。但是由于它是受保护的，而且它是一个抽象类，所以无论如何都没有人能够调用它，对吧？这样可以吗？有没有更好的方法来做到这一点，而我从来没有学过？

我想到的另一个选择是创建一个具有不同名称的 void 方法，`navNextPageVoid`并让子类调用它而不是`super.navNextPage`, 但是......这似乎以不同的方式令人毛骨悚然。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:03:29.287

通常，如果您想强制一个方法在专业化中实现，您可以[在泛化中将其抽象化](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)。所以

> 公共抽象类 PresContentPage { 抽象 PresContentPage navNextPage(); }

# python - 如何比较两个嵌套数据结构以进行单元测试？

> ID：14816312
> 
> 赞同：6
> 
> 时间：2013-02-11T16:23:31.967
> 
> 标签：python, unit-testing, python-3.x, nested, data-comparison

对于那些了解 perl 的人，我正在寻找类似于[`Test::Deep::is_deeply()`](http://search.cpan.org/~rjbs/Test-Deep-0.110/lib/Test/Deep.pm)Python 的东西。

在[Python 的 unittest](http://docs.python.org/release/3.2.3/library/unittest.html)中，如果我希望它们相等，我已经可以方便地比较嵌套数据结构：

```
self.assertEqual(os.walk('some_path'),
                 my.walk('some_path'),
                 "compare os.walk with my own implementation") 
```

但是，在想要的测试中，元组的各个子列表中的文件顺序无关紧要`os.walk`。

如果只是这个测试，那么编写一个简单的解决方案就可以了。但我设想对不同结构的嵌套数据进行几个测试。我希望有一个通用的解决方案。

我检查了 Python 自己的[unittest 文档](http://docs.python.org/release/3.2.3/library/unittest.html)，查看了[pyUnit](http://pyunit.sourceforge.net/)，并查看了[nose 和它的 plugins](https://nose.readthedocs.org/en/latest/plugins/builtin.html)。主动维护也是使用的一个重要方面。

我的最终目标是拥有一组描述性类型，如`UnorderedIterable`, `SubsetOf`,`SupersetOf`等，可以调用它们来描述嵌套数据结构，然后使用该描述来比较两组实际数据。

在 os.walk 示例中，我想要类似的内容：

```
comparison = OrderedIterable(
               OrderedIterable(
                 str,
                 UnorderedIterable(),
                 UnorderedIterable()
               )
             ) 
```

`list(os.walk())`上面描述了将返回的数据结构类型。为了比较单元测试中的数据`A`和数据`B`，当前路径名将被转换为 a `str()`，并且将比较目录和文件列表而忽略顺序：

```
self.assertDeep(A, B, comparison, msg) 
```

外面有什么吗？还是人们自己编写的一项微不足道的任务？我觉得这样做很舒服，但我不想重新发明，特别是不想编写完整的正交类型集、对这些类型的测试等。简而言之，我不会发布它，因此下一个有再次重写...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T11:17:45.480

[Python Deep](http://code.google.com/p/python-deep/)似乎是一个重新实现 perl 的 Test::Deep 的项目。是Test::Deep的作者自己写的。最后一次开发发生在 2016 年初。

更新（2018/Aug）：最新版本（2016/Feb）位于[PyPi/Deep](https://pypi.org/project/deep)

我[在 github 上做了一些 P3k 移植工作](https://github.com/cfi/python-deep)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:08:55.797

不是解决方案，而是当前实施的解决问题中列出的特定示例的解决方法：

```
 os_walk = list(os.walk('some_path'))
    dt_walk = list(my.walk('some_path'))
    self.assertEqual(len(dt_walk), len(os_walk), "walk() same length")
    for ((osw, osw_dirs, osw_files), (dt, dt_dirs, dt_files)) in zip(os_walk, dt_walk):
        self.assertEqual(dt, osw, "walk() currentdir")
        self.assertSameElements(dt_dirs, osw_dirs, "walk() dirlist")
        self.assertSameElements(dt_files, osw_files, "walk() fileList") 
```

正如我们从这个示例实现中看到的那样，这是相当多的代码。我们还可以看到，Python 的 unittest*具有*大部分所需的成分。

# c# - 在 Windows 窗体中显示 EXR 文件

> ID：14816314
> 
> 赞同：0
> 
> 时间：2013-02-11T16:23:47.753
> 
> 标签：c#, picturebox, freeimage

我在 FreeImage 上苦苦挣扎，文档对我帮助不大！

我需要使用 C# 在图片框中显示 tif、exr 或 HDR 图像，但我没有成功，我想知道我该怎么做...我收到错误：只有 FIT_BITMAP 类型的位图可以转换。...

任何人都可以帮我吗？我想我必须将 tiff 转换为位图，但我已经尝试过，但我不知道我应该怎么做......这是我的代码：

```
 FIBITMAP imageToDisplay = new FIBITMAP();
    imageToDisplay = FreeImage.Load(FREE_IMAGE_FORMAT.FIF_TIFF, i, FREE_IMAGE_LOAD_FLAGS.TIFF_CMYK);
    Bitmap bitmap = FreeImage.GetBitmap(imageToDisplay);
    pictureBox.Image = (Image)new Bitmap(bitmap); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:37:33.420

为了显示 TIFF，`PictureBox.Image`需要一个`System.Drawing.Image`对象 - 并[`System.Drawing.Image.FromFile()`](http://msdn.microsoft.com/en-gb/library/stf701f5.aspx)支持 TIFF 图像。

我看不出有任何需要在这里涉及任何第三方依赖项。这一切都内置在框架中。

```
pictureBox.Image = Image.FromFile(someImage); 
```

如果您的 TIFF 不是文件（例如，如果它只是一个字节数组或 MemoryStream） - 也没关系 - 使用[`Image.FromStream()`](http://msdn.microsoft.com/en-gb/library/93z9ee4x.aspx).

对于不受支持的文件格式，您的工作是将它们转换为`System.Drawing.Image`. 如果这是不可能的，您可能无法使用该`PictureBox`控件来完成这项工作。

也许您的问题的标题应该是“从 EXR 文件构造图像对象”或“在 Windows 窗体中显示 EXR 文件”或类似名称。

# python - 从 CSV 文件复制列的 Pythonic 方法

> ID：14816317
> 
> 赞同：4
> 
> 时间：2013-02-11T16:24:11.747
> 
> 标签：python, csv, python-3.x, import-from-csv

我正在寻找一种pythonic 和简洁的方法来选择.csv 文件中的列并将列的所有单元格存储在例如列表中。

```
import csv    

with open("/path/to/file.csv","r") as csvfile:
    reader = csv.DictReader(csvfile, delimiter=";")
    # TODO: select column for key "foo"
    # TODO: select column for key "bar"
    # TODO:store "foo" data in list
    # TODO: store "bar" data in list 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T16:40:31.107

在纯 Python 中从 DictReader 行字典中获取列很简单，其他人现在可能正在写一个关于这种效果的答案，所以我不会重复这种努力，而是展示如何在我最喜欢的 Python 库之一中做到这一点数据操作，[熊猫](http://pandas.pydata.org/)：

```
>>> import pandas as pd
>>> df = pd.read_csv("somefile.csv", sep=";")
>>> df
   foo  bar      apple
0    1  100       pear
1    2  200     orange
2    3  300  tangerine
3    4  400      peach
>>> df["foo"]
0    1
1    2
2    3
3    4
Name: foo
>>> df["bar"]
0    100
1    200
2    300
3    400
Name: bar
>>> df["foo"] * df["bar"]
0     100
1     400
2     900
3    1600
>>> list(df["foo"] * df["bar"])
[100, 400, 900, 1600] 
```

在黑暗的前`pandas`几天，我有自己的手工制作的库来进行这种数据访问。`pandas`几年前大约十五分钟后，我把它扔了..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T18:21:51.330

如果您想分别访问文件中的每一列，循环`csv` *一次*收集列数据是最有效的：

```
import defaultdict
import csv

columns = defaultdict(list)

with open("/path/to/file.csv","r") as csvfile:
    reader = csv.DictReader(csvfile, delimiter=";")
    for row in reader:
        for key, value in row.iteritems():
            defaultdict[key] = value 
```

现在`columns`是一个字典，每列都有一个列表：

```
for value in columns['foo']:
    # do something with the `foo` column
# etc. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T16:38:00.173

```
bash-3.2$ cat tcsv.py
import csv
def get_col(filename, col=0):
    for row in csv.reader(open(filename), delimiter=';'):
        yield row[col]
print list(get_col("tar.data")) 
```

* * *

```
bash-3.2$ python tcsv.py
['1.0', '4.7', '4.7'] 
```

* * *

```
bash-3.2$ cat tar.data
1.0;2.3;4.5;512
4.7;9.2;6.7;240
4.7;1.8;4.3;912 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T18:58:08.940

```
import csv

def col_selector(table, column_key):
    return [row[column_key] for row in table]

with open("/path/to/file.csv","r") as csvfile:
    reader = csv.DictReader(csvfile, delimiter=";")
    table = [row for row in reader]
    foo_col = col_selector(table, "foo")
    bar_col = col_selector(table, "bar") 
```

这是在单独的函数中使用列表推导式的直接方法。当然，您可以变得更花哨并使用`__getitem__`已实现的表格对象（就像 Pandas 的答案一样），但这似乎适合您的目的。

# powershell - Azure 客户端 IP 地址

> ID：14816319
> 
> 赞同：0
> 
> 时间：2013-02-11T16:24:21.413
> 
> 标签：powershell, azure

我无法找到任何有关如何预测 Azure 将您视为 IP 地址的文档。

这是我指的IP，红色：

![Windows Azure Server SQL 数据库服务器配置面板](../Images/1099ec48f544876255d42ce1867876e3.png)

我正在尝试以编程方式实现当前客户端 IP 地址 xxx.xxx.xxx.xxx 添加到允许的 IP 地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:51:05.457

您的 IP 地址由您所在网络的 NAT 决定，除非您来自具有固定公共 IP 地址的机器。除非您有客户端计算机从同一网络连接，并且您详细了解网络，否则您不太可能可靠地预测客户端 IP 地址。唯一的解决方案是添加一个从 86.0.0.0 到 86.255.255.255 的范围，并希望它覆盖您连接的网络 - 但是很多“不受欢迎的”也会落在该范围内。

客户端 IP 地址功能不应用于直接管理员访问以外的任何其他用途，可以根据需要不时手动设置。也可以使用本地防火墙规则将其锁定，方法是将端口 1433 上的访问限制为特定的本地网络机器。任何更一般的访问都应仅限于某种服务——例如 OData 样式、[移动服务](http://www.windowsazure.com/en-us/develop/mobile/)或使用某种[端口桥接](http://vasters.com/clemensv/CommentView.aspx?guid=3e35d8bd-b755-453f-8c63-1a57c570eb4c)，这可以通过 VPN、VM 和其他 IaaS 服务来促进。

我建议您首先认真考虑您的用例 - 直接 SQL 访问不是云计算的可行模式。存在许多更快、更安全和更易于管理的替代方案。此外，至少你正在进入一个痛苦的世界，试图让安全人员在他们的防火墙中为 SQL 端口戳洞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:05:18.163

这对我有用：有一个“AutoDetectClientIP”管理 API 调用将现有的防火墙异常更新为调用者的 IP 地址。

但是您需要访问对给定订阅有效的管理证书、订阅 ID、SQL Azure 服务器的名称和防火墙例外的名称。

```
public static bool SetFirewallRuleAutoDetect(string certFilename, string certPassword, string subscriptionId, string serverName, string ruleName)
{
    try
    {
       string url = string.Format("https://management.database.windows.net:8443/{0}/servers/{1}/firewallrules/{2}?op=AutoDetectClientIP",
                                  subscriptionId, 
                                  serverName, 
                                  ruleName);

       HttpWebRequest webRequest = HttpWebRequest.Create(url) as HttpWebRequest;

       webRequest.ClientCertificates.Add(new X509Certificate2(certFilename, certPassword));
       webRequest.Method = "POST";
       webRequest.Headers["x-ms-version"] = "1.0";
       webRequest.ContentLength = 0;

       // call the management api
       // there is no information contained in the response, it only needs to work
       using (WebResponse response = webRequest.GetResponse())
       using (Stream stream = webResponse.GetResponseStream())
       using (StreamReader sr = new StreamReader(stream))
       {
           Console.WriteLine(sr.ReadToEnd());
       }

       // the firewall was successfully updated
       return true;
   }
   catch
   {
       // there was an error and the firewall possibly not updated
       return false;
   }
} 
```

# internet-explorer - IE 中的 z-index 不起作用

> ID：14816320
> 
> 赞同：0
> 
> 时间：2013-02-11T16:24:24.120
> 
> 标签：internet-explorer, z-index

我在这里有一个简单的例子：http: [//jsfiddle.net/V97TF/1/](http://jsfiddle.net/V97TF/1/)。基本上我需要在图像上绝对定位链接，但由于某种原因，z-index 在任何 IE 中都不起作用 :( 可以请人帮忙吗？

提前致谢！

代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <style>
        #map {
            float:left;
            position:relative;
        }
        #map img {
            position:relative;
            z-index:9;
        }
        #map .links {
            position:absolute;
            width:100%;
            height:100%;
            z-index:10;
            top:0;
            left:0;
        }
        #map .links li {
            width:60px;
            height:25px;
            position:absolute;
        }
        #map .links a {
            display:block;
            height:100%;
            width:100%;
        }
        .karlovy-vary { left:41px; top:87px; }
        .plzen { left:60px; top:143px; }
        .usti-nad-labem { left:110px; top:42px; }
        .ceske-budejovice { left:130px; top:226px; }
        .liberec { left:193px; top:34px; }
        .hradec-kralove { left:243px; top:88px; }
        .pardubice { left:244px; top:132px; }
        .jihlava { left:241px; top:183px; }
        .brno { left:314px; top:210px; }
        .olomouc { left:353px; top:156px; }
        .zlin { left:397px; top:204px; }
        .ostrava { left:400px; top:134px; }
       </style>
</head>
<body>
    <div id="map">
       <img src="http://placekitten.com/501/291">
       <ul class="links map1">
            <li class="karlovy-vary"><a href="#"></a></li>
            <li class="plzen"><a href="#"></a></li>
            <li class="usti-nad-labem"><a href="#"></a></li>
            <li class="ceske-budejovice"><a href="#"></a></li>
            <li class="liberec"><a href="#"></a></li>
            <li class="hradec-kralove"><a href="#"></a></li>
            <li class="pardubice"><a href="#"></a></li>
            <li class="jihlava"><a href="#"></a></li>
            <li class="brno"><a href="#"></a></li>
            <li class="olomouc"><a href="#"></a></li>
            <li class="zlin"><a href="#"></a></li>
            <li class="ostrava"><a href="#"></a></li>
        </ul>
    </div>   
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:33:17.617

我能够通过`background-image`hack 使其在 Internet Explorer 8 中运行（请参阅[此问题](https://stackoverflow.com/q/6914822/237244)的答案）。在这种特殊情况下，透明背景图像似乎不起作用。我喜欢[mdmullinax 的解决方案](https://stackoverflow.com/a/6915405/237244)：

```
background-color: #fff;
filter: alpha(opacity=0); 
```

但是如果你需要让锚的内容可见，你可以使用[Dio F 的解决方案](https://stackoverflow.com/a/10557354/237244)之一：

```
background-image: url("about:blank"); 
```

但请注意，如果您使用此解决方案，Dio F 表示由于`about:blank`文档的 MIME-Type 错误，它会在 Chrome 中发出 MIME-Type 警告。

我还应该说，至少在 Internet Explorer 8 中，在两者上加一个边框`#map .links li`并`#map .links a`显示链接与列表项的位置不完全相同。这可以通过添加`position: absolute;`来解决`#map .links a`。

# java - 如何从另一个类中的函数在图形上绘制点，该函数返回一个填充了要绘制的值的数组

> ID：14816323
> 
> 赞同：0
> 
> 时间：2013-02-11T16:24:36.500
> 
> 标签：java, jfreechart

我有我的第一堂课

```
public class GetResults{

public double[] tableOfresults() {
double[] outputArray = new double[100];
double time;
double results

for(time = 0; time<outputArray.length; i++) {
  //Some values are calculated and then stored in an array as below
  outputArray[(int)Time] = Results
}
return outputarray; 
```

这个类只是计算一些我想在图表上绘制的值并将它们存储在数组中。

下一节课实际上是在我的图表上绘制点。我不确定一种简单的方法可以在我的 X 轴上绘制点，这些点是时间值（时间是数组索引 0、1、2、3 等），我的 Y 轴是我的结果。我目前不得不把所有的职位都放在自己身上。

```
public class graph{
GetResults gr = new GetResuts();
public XYSeries inputOutputGraph() {
    XYSeries graph = new XYSeries("My graph");      
    XYDataset xyDataset = new XYSeriesCollection(graph);

    graph.add(1, gr.tableOfResults()[1]); 
    graph.add(2, gr.tableOfResults()[2]);
    graph.add(3, gr.tableOfResults()[3]);
    graph.add(4, gr.tableOfResults()[4]); 
```

在这里，我必须自己添加值（我有 1000 个要做）。我需要看起来像这样的东西 graph.add(gr.tableOfResults()[gr.Time], gr.tableOfResults()[gr.Results]); 因此，随着我的时间增加 0,1,2,3，它将绘制我的结果，该结果存储在该位置的索引 0,1,2,3 处。我怎么能这样做？我已经尝试过该代码^^并且我的数组索引超出了我的数组大小设置为的值

```
 JFreeChart chart = ChartFactory.createXYLineChart(
        "Graph", "Time", "results",
        xyDataset, PlotOrientation.VERTICAL, true, true, false);
    ChartFrame graphFrame = new ChartFrame("XYLine Chart", chart);
    graphFrame.setVisible(true);
    graphFrame.setSize(300, 300);
    return graph;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:54:19.083

您可以将计算值直接放在 an 中`XYSeries`，然后让`GetResults`一个方法返回该系列。

```
class GetResults {

    public XYSeries getSeries() {
        XYSeries series = new XYSeries("Series");
        for (int i = 0; i < 10; i++) {
            series.add(i, Math.pow(2, i));
        }
        return series;
    }
} 
```

以下是您`getSeries()`在此[示例](https://stackoverflow.com/a/14790187/230513)中的使用方法。

```
dataset.addSeries(new GetResults().getSeries()); 
```

![图片](../Images/2c011b53a059b0620d9fd835c3c79546.png)

# javascript - 正则表达式将所有双引号替换为侧括号中的单引号

> ID：14816325
> 
> 赞同：1
> 
> 时间：2013-02-11T16:24:47.137
> 
> 标签：javascript, regex

我正在寻找一个单行正则表达式，它应该将所有双引号转换为括号内的单引号。

**前任：**

`<span onclick="javascript:myfunction("param(s)1", "param(s)2")"`

我希望将上面的转换为

`<span onclick="javascript:myfunction('param(s)1', 'param(s)2')"`

我是正则表达式的新手。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:40:03.960

执行此操作的函数是：

```
function replaceQuotes(inputString)
{
    var output = '';
    var inbrackets = 0;
    for (i = 0; i < inputString.length; i++)
    {
        var currentChar = inputString.charAt(i);
        switch (currentChar)
        {
            case '\"':
                if (inbrackets > 0)
                    output += '\'';
                else
                    output += '\"';
                break;

            case '(':
                inbrackets++;
                output += '(';
                break;

            case ')':
                inbrackets--;
                output += ')';
                break; 

            default:
                output += currentChar;
                break;
        }
    }
    return output;

} 
```

如果您想处理完整的 HTML，您将需要比这更复杂的东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T16:39:10.527

看来您真的想在双引号内替换双引号，那又如何：

```
function replace_inside_quotes(str) {
  var regex_quotes = /"(.*)"(.*)"(.*)"/;
  while(regex_quotes.test(str)) {
    str = str.replace(regex_quotes, '"$1\'$2\'$3"');
  }
  return str;
} 
```

# objective-c - 如何引用特定标签

> ID：14816326
> 
> 赞同：0
> 
> 时间：2013-02-11T16:24:47.053
> 
> 标签：objective-c, uilabel

我正在尝试创建将数字输入标签的键盘界面。沿着输入 4 位数密码的小键盘进行思考会更容易，就像打开锁定的 iOS 设备时一样。

我有四个标签，一旦输入就会显示数字。我有 12 个包含数字的按钮（加上一个取消和删除按钮）。每个按钮都有一个分配给它的标签。单击按钮时，我希望将该标签作为文本输入到下一个空标签。

我需要做的是在 setPin 函数中引用下一个空标签。我是不是走错了路，还是我错过了一点？我的代码的精简版本如下。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [[self view] setBackgroundColor:[UIColor whiteColor]];
    [self setCurrField:1];

    // BUILD A VIEW TO CONTAIN THE LOGIN PANEL
    UIView *pinView = [[UIView alloc] initWithFrame:CGRectMake(10, 10, 400, 500)];
    pinView.backgroundColor = [UIColor lightGrayColor];

    // CREATE BUTTONS
    int nPos = 1;
    int leftPos;
    int topPos = 134;

    while (nPos <= 12) 
    {
        leftPos = (nPos%3 == 1) ? 19 : leftPos + 113 + 12;
        topPos = (nPos%3 == 1) ? topPos + 61 + 10 : topPos;

        // BUILD THE BUTTONS AND ADD TO THE PAGE
        UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
        [btn setTag:nPos];
        [btn addTarget:self action:@selector(setPin:) forControlEvents:UIControlEventTouchUpInside];
        [btn setFrame:CGRectMake(leftPos, topPos, 113, 61)];
        [btn setBackgroundColor: [UIColor darkGrayColor]];

        NSString *btnLabel;
        if(nPos <= 9)
        {
            btnLabel = [NSString stringWithFormat:@"%i", nPos];
        }
        else
        {
            switch (nPos) {
                case 10:
                    btnLabel = @"Cancel";
                    break;

                case 11:
                    btnLabel = @"0";
                    break;

                case 12:
                    btnLabel = @"Delete";
                    break;

                default:
                    break;
            }
        }
        [btn setTitle: btnLabel forState:UIControlStateNormal];

        [pinView addSubview:btn];

        nPos++;
    }

    // CREATE THE TEXTBOXES
    UILabel *char1Label = [[UILabel alloc] initWithFrame:CGRectMake(19, 65, 83, 91)];
    UILabel *char2Label = [[UILabel alloc] initWithFrame:CGRectMake(113, 65, 83, 91)];
    UILabel *char3Label = [[UILabel alloc] initWithFrame:CGRectMake(207, 65, 83, 91)];
    UILabel *char4Label = [[UILabel alloc] initWithFrame:CGRectMake(301, 65, 83, 91)];

    [pinView addSubview:char1Label];
    [pinView addSubview:char2Label];
    [pinView addSubview:char3Label];
    [pinView addSubview:char4Label];

    [[self view] addSubview:pinView];

}

-(void)setPin:(UIButton *)sender
{
    if(sender.tag <= 9 || sender.tag == 11)
    {
        [--charLabel[self currField]Label-- setText:[sender tag]];
        [self currField++];
    }
    elseif(sender.tag == 12) 
    {
        [self currField--];
        [--charLabel[self currField]Label-- setText:@""];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:35:39.047

您需要保留对 textLabels 的引用，可能作为您所在类的属性。

```
@property (nonatomic) NSArray* textLabels; // Choose a more descriptive name than this

...

self.textLabels = @[ char1Label, char2Label, char3Label, char4Label ];

...

- (UILabel*) nextEmptyLabel {

    for (UILabel* label in self.TextLabels) 
    {
         NSString* trimmedText = [label.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
         if ([trimmedText length] == 0) {
             return label;
         }
    }

    return nil;  // No non empty label found
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:34:47.587

一种方法是将每个标签放入 NSMutableArray 中（以及您的视图中）。然后要获取每个标签，`setPin`您可以执行以下操作：

```
UILabel *label = [labelArray objectAtIndex:currField];
[label setText:[NSString stringWithFormat:@"%i", sender.tag]];
currField++; 
```

# sql - 在 IBM Data Studio 中运行 SQL 查询的简单方法

> ID：14816329
> 
> 赞同：7
> 
> 时间：2013-02-11T16:24:49.860
> 
> 标签：sql, ibm-data-studio

如何运行一个简单的查询，例如：

```
select current timestamp from sysibm.sysdummy1 
```

在旧的“命令中心”中，如果能够简单地运行这样的命令，而无需创建脚本/项目、使用查询构建器等。但是旧的命令中心在更新期间被新的 Data Studio 替换。

我正在尝试重现使用我通常使用的 Aqua Data Studio 时不会弹出的错误。但是，使用 JDBC 和/或 Data Studio 运行该过程会引发异常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-09T08:30:04.277

1）在数据工作室中打开“数据库管理”透视图

2) 要启动 SQL 编辑器，请转到左侧面板上的 Administration Explorer，然后单击 New > New SQL Script（请参阅下面的屏幕截图）

![打开 Sql 编辑器的屏幕截图](../Images/7c793fa00f184af289a3019faac86e45.png)

这样您就可以在不创建脚本/项目等的情况下运行正常的 sql 查询。有关更多详细信息，请参阅 IBM 官方[网站](http://www.ibm.com/developerworks/data/library/techarticle/dm-1201migctrlctrdatastudio/)。

# rust - Rust 泛型中的常量值

> ID：14816336
> 
> 赞同：8
> 
> 时间：2013-02-11T16:25:06.450
> 
> 标签：rust, rust-obsolete

Rust 语言是否支持类似于 c++ 方式的通用代码中的常量值？似乎语言[概述](http://static.rust-lang.org/doc/tutorial.html#generics)没有宣传它。在 C++ 中使用常量参数化类型允许创建具有不同大小的预分配缓冲区的对象，具体取决于客户端的需要（类型如 stlsoft:: [auto_buffer](http://www.stlsoft.org/doc-1.9/classstlsoft_1_1auto__buffer.html)）。
如果不是，那么在 Rust 中实现类似设计的最佳实践是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T01:20:26.477

不，这不受类型安全的支持。为此，我们需要类型级别的数字文字，例如最近添加的 GHC。

但是，您可以使用 Rust 宏。使用宏，您可以创建在任意表达式（包括常量）上参数化的“模板”，这将允许您在这里做您想做的事情。请注意，如果您现在尝试此操作，您可能会在宏系统中发现错误和限制。

# javascript - 如何使用 Jquery 从复选框中收集值的 JSON 对象？

> ID：14816337
> 
> 赞同：2
> 
> 时间：2013-02-11T16:25:08.230
> 
> 标签：javascript, jquery, json

我正在尝试为用户创建某种小型联系表，他们可以在其中选择何时更舒适地联系他们。我有 7 天和 3 个条件 - 早上/下午/晚上。

我正在尝试收集这种对象，将其发送到服务器 -

```
{"SUNDAY":["MORNING"],"MONDAY":["EVENING","MORNING"]} 
```

我有以下 HTML 结构：

```
<tr>
<td class="table-headline">Morning</td>
<td>                                
    <label class="label-check">
        <input id="morning1" name="morning" type="checkbox" value="SUNDAY">
</label>   
</td>
<td>                                
    <label class="label-check">
        <input id="morning2" name="morning" type="checkbox" value="MONDAY">
</label>   
</td>
<td>                                
    <label class="label-check">
        <input id="morning3" name="morning" type="checkbox" value="TUESDAY">
</label>   
</td>
<td>                                
    <label class="label-check">
        <input id="morning4" name="morning" type="checkbox" value="WEDNESDAY">
</label>   
</td>
<td>                                
    <label class="label-check">
        <input id="morning5" name="morning" type="checkbox" value="THURSDAY">
</label>   
</td>
<td>                                
    <label class="label-check">
        <input id="morning6" name="morning" type="checkbox" value="FRIDAY">
</label>   
</td>
<td>                                
    <label class="label-check">
        <input id="morning7" name="morning" type="checkbox" value="SATURDAY">
</label>   
</td> 
```

对于每种情况，我都有三个相似的行。检测是否选中复选框不是问题，我不知道如何在检查后以 JSON 格式收集这些数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T16:37:28.883

应该这样做（假设复选框包含在表单元素中）：

```
var data = $('form').serializeArray(),
    obj = {};

for(var i = 0; i < data.length; i++){
   obj[data[i].name] = obj[data[i].name] || [];
   obj[data[i].name].push(data[i].value);
}    

// your JSON string
console.log(JSON.stringify(obj)); 
```

**编辑：**我看到您的示例字符串中的名称和值颠倒了。如果这是有意的而不是拼写错误，只需使用上面代码中的属性进行交换`name`即可`value`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:52:03.723

仅供参考，我为此创建了我的输入。它[在这里](http://jsfiddle.net/Qpirate/HqJSS/)

JS代码如下

```
$('#btnsubmit').click(function () {

    var obj = [];
    obj.push({
        "MONDAY": GetDetails("MONDAY"),
        "TUESDAY": GetDetails("TUESDAY"),
        "WEDNESDAY": GetDetails("WEDNESDAY"),
        "THURSDAY": GetDetails("THURSDAY"),
        "FRIDAY": GetDetails("FRIDAY"),
        "SATURDAY": GetDetails("SATURDAY"),
        "SUNDAY": GetDetails("SUNDAY"),
    });
$('#output').text(JSON.stringify(obj));
});

function GetDetails(day) {
    var arr = new Array();
    $(':input[value="' + day + '"]').each(function () {
        if (this.checked) {
            arr.push($(this).attr('name'));
        }
    });
        return arr;
} 
```

输出如下

```
[{
"MONDAY":["afternoon"],
"TUESDAY":[],
"WEDNESDAY":["morning","afternoon"],
"THURSDAY":[],
"FRIDAY":["morning","afternoon"],
"SATURDAY":[],
"SUNDAY":[]
}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T16:31:18.257

```
$('input').on('click',function(){
  // selectors that are checked => $('input:checked').length
  console.log($('input:checked').length)
}) 
```

# iphone - 新安装应用程序后触发本地通知（重复）

> ID：14816338
> 
> 赞同：0
> 
> 时间：2013-02-11T16:25:14.937
> 
> 标签：iphone, ios, local, uilocalnotification, repeat

在我的应用程序中，我正在使用本地通知，并且它们通常设置了重复间隔。

问题是，当用户删除应用程序并重新安装它时，重复通知再次开始触发。有解决这个问题的方法吗？其他用户的以下建议是否有效？：

> 你可以使用 [[UIApplication sharedApplication] cancelAllLocalNotifications]; 仅在首次启动时，因此“旧”通知将被取消....（我没有尝试过）

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:06:53.223

> 你可以使用 [[UIApplication sharedApplication] cancelAllLocalNotifications]; 仅在首次启动时，因此“旧”通知将被取消...

这不是你的解决方案。每次调用 didFinishLaunching 方法时，这将取消所有已安排的通知。因此，在应用上述解决方案之前，应该再进行一次检查。在 NSUserDefauls 中存储一个值，用于检查您是否在删除后再次安装应用程序。

```
if(![[NSUserDefaults standardUserDefaults]objectForKey:@"Notification"]){
    [[UIApplication sharedApplication] cancelAllLocalNotifications]
    [[NSUserDefaults standardUserDefaults]setBool:Yes ForKey:@"Notification"];
} 
```

这将防止每次都取消所有通知。

# python - 使用不可变键但可变值定义 python 字典

> ID：14816341
> 
> 赞同：15
> 
> 时间：2013-02-11T16:25:30.660
> 
> 标签：python, dictionary, key, immutability

好吧，问题就在标题中：如何定义具有不可变键但可变值的 python 字典？我想出了这个（在python 2.x中）：

```
class FixedDict(dict):
    """
    A dictionary with a fixed set of keys
    """

    def __init__(self, dictionary):
        dict.__init__(self)
        for key in dictionary.keys():
            dict.__setitem__(self, key, dictionary[key])

    def __setitem__(self, key, item):
        if key not in self:
            raise KeyError("The key '" +key+"' is not defined")
        dict.__setitem__(self, key, item) 
```

但在我看来（不出所料）相当草率。特别是，这是安全的还是存在实际更改/添加一些键的风险，因为我是从 dict 继承的？谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-11T16:31:19.173

考虑代理`dict`而不是子类化它。这意味着只允许您定义的方法，而不是回退到`dict`'s 的实现。

```
class FixedDict(object):
        def __init__(self, dictionary):
            self._dictionary = dictionary
        def __setitem__(self, key, item):
                if key not in self._dictionary:
                    raise KeyError("The key {} is not defined.".format(key))
                self._dictionary[key] = item
        def __getitem__(self, key):
            return self._dictionary[key] 
```

此外，您应该使用字符串格式而不是`+`生成错误消息，否则它会因任何不是字符串的值而崩溃。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-11T16:40:46.077

直接继承的问题`dict`是很难遵守 full`dict`的合同（例如，在您的情况下，`update`方法不会以一致的方式运行）。

你想要的是扩展[`collections.MutableMapping`](http://docs.python.org/2/library/collections.html#collections-abstract-base-classes)：

```
import collections

class FixedDict(collections.MutableMapping):
    def __init__(self, data):
        self.__data = data

    def __len__(self):
        return len(self.__data)

    def __iter__(self):
        return iter(self.__data)

    def __setitem__(self, k, v):
        if k not in self.__data:
            raise KeyError(k)

        self.__data[k] = v

    def __delitem__(self, k):
        raise NotImplementedError

    def __getitem__(self, k):
        return self.__data[k]

    def __contains__(self, k):
        return k in self.__data 
```

请注意，原始（包装的）dict 将被修改，如果您不希望发生这种情况，请使用[`copy`or`deepcopy`](http://docs.python.org/2/library/copy.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T16:38:11.827

如何阻止某人添加新密钥完全取决于为什么有人会尝试添加新密钥。正如评论所述，大多数修改键的字典方法都不会通过`__setitem__`，因此`.update()`调用将添加新键就好了。

如果您只希望有人使用`d[new_key] = v`，那么您`__setitem__`就可以了。如果他们可能使用其他方式来添加密钥，那么您必须投入更多的工作。当然，无论如何，他们总是可以使用它来做到这一点：

```
dict.__setitem__(d, new_key, v) 
```

你不能在 Python 中让事情真正不可变，你只能停止特定的更改。

# makefile - Makefile：隐式规则先决条件不起作用？

> ID：14816345
> 
> 赞同：3
> 
> 时间：2013-02-11T16:25:44.697
> 
> 标签：makefile, gnu-make

如果我创建一个带有先决条件的隐式规则（但没有配方），那么似乎不会尊重依赖关系。另一方面，如果我在定义配方的块中定义了先决条件，或者如果我指定了目标特定实例的依赖关系，它似乎确实有效。我有以下 Makefile (GNU make 3.81)

```
all:  foo.a foo.b bar.b bar.c

dep1:
    @echo "running $@"

%.a: dep1

%.a:
    @echo "running $@ (depends on: $^)"

bar.b: dep1

%.b: dep1
    @echo "running $@ (depends on: $^)"

bar.c: dep1

bar.c:
    @echo "running $@ (depends on: $^)" 
```

如果我运行 make，我会得到：

```
~/tmp/tmp5> make
running foo.a (depends on: )
running dep1
running foo.b (depends on: dep1)
running bar.b (depends on: dep1)
running bar.c (depends on: dep1) 
```

似乎即使我有`%.a`依赖`dep1`，也`foo.a`可以在不构建的情况下`dep1`构建。这是make中的错误，还是有这种行为的原因？

谢谢，

约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:37:50.983

具有相同目标的模式规则不会像非模式规则那样组合成单个规则。当您有两个针对同一目标的非模式规则时，它们会组合成一个规则，其中包含两个规则的所有依赖项以及具有操作的规则中的操作（两个规则都有操作是错误的） . 对于模式规则，这不会发生——它们被视为两个完全独立的规则，其中任何一个都可用于更新目标。

当您想到内置模式规则时，其原因非常明显——有多个规则`%.o`可以根据这些规则编译各种语言的源文件。如果它们都组合成一个规则，那根本行不通。

# drupal-7 - 产品未出现在 Drupal Commerce 的管理员内容下

> ID：14816349
> 
> 赞同：0
> 
> 时间：2013-02-11T16:25:53.727
> 
> 标签：drupal-7, drupal-commerce

我正在使用 Commerce Feed 导入产品。产品在前端和管理中的商店 > 产品中显示得很好。但是，在管理区域的内容下没有产品出现。我试过清除数据库、重新导入、重新索引、刷新缓存 - 没有任何效果。

这也很奇怪，看似无关，但是我注意到它大约在我意识到我的产品没有出现在管理中的同时——我的管理菜单栏上方有一个奇怪的空白——它只出现在内容页面上（也巧合的是该页面给我带来了麻烦。） ![菜单栏上方的空白](../Images/61845c9234e9d793759f9c07132feeed.png)

使用 Commerce Kickstart (commerce_kickstart-7.x-2.0-rc1)（很想升级到最新版本，但我不确定如何在不损失大量工作的情况下做到这一点。我还没有找到好的升级文档 - 请敲响如果你知道我不知道的事情！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:33:40.800

我现在觉得有点傻。我编辑了管理/内容视图，发现有一个过滤条件导致它不显示“product_display”类型的节点。显然这是故意的行为。我猜你应该只在商店标签中管理产品。仍然希望我能找出顶部幻影空白的原因。

# google-maps - 无法阻止所有标记叠加层重叠标记谷歌地图 api v3

> ID：14816353
> 
> 赞同：3
> 
> 时间：2013-02-11T16:26:11.610
> 
> 标签：google-maps, label, overlays

我有一个使用 api 版本 3 的谷歌地图。我想创建带有自定义图标和编号标签的标记。我一直在尝试使用似乎是最被接受的方法，即我在下面提供的“labels.js”解决方案。但是，无论我尝试什么，所有编号的叠加层都会与所有标记重叠（尽管我将标记和标签设置为相同的 zIndex）。请参阅提供的屏幕截图以了解我在说什么。如果您查看屏幕中的标记 14 和 15，您会看到 15 标签与 14 标记重叠，但它不应该重叠，它应该位于 14 标记下方。

[http://i.imgur.com/QoYqcHJ.jpg](http://i.imgur.com/QoYqcHJ.jpg)

许多关于与自定义叠加层正确重叠的讨论都围绕代码行展开：

```
var pane = this.getPanes().overlayImage; 
```

但是，我有这个。我将每个标签覆盖和标记对设置为相同的 zIndex，正确重叠的标记证明这个 zIndex 增量是有效的。我在下面提供了我的所有代码，并且遇到了砖墙。我已经尝试了所有可能的方法，但没有运气。假设所有变量都已正确声明。

标签.js：

```
/* START label.js */

// Define the overlay, derived from google.maps.OverlayView
function Label(opt_options) {
    // Initialization
    this.setValues(opt_options);

    // Here go the label styles
    var span = this.span_ = document.createElement('span');
    span.style.cssText = 'position: relative;' +
                          'white-space: nowrap;color:#666666;' +
                          'font-family: Arial; font-weight: bold;' +
                          'font-size: 11px;';

    var div = this.div_ = document.createElement('div');
    div.appendChild(span);
    div.style.cssText = 'position: absolute; display: none;';
};

Label.prototype = new google.maps.OverlayView;

Label.prototype.onAdd = function () {
    var pane = this.getPanes().overlayImage;
    pane.appendChild(this.div_);

    // Ensures the label is redrawn if the text or position is changed.
    var me = this;
    this.listeners_ = [
          google.maps.event.addListener(this, 'position_changed',
               function () { me.draw(); }),
          google.maps.event.addListener(this, 'text_changed',
               function () { me.draw(); }),
          google.maps.event.addListener(this, 'zindex_changed',
               function () { me.draw(); })
     ];
};

// Implement onRemove
Label.prototype.onRemove = function () {
    this.div_.parentNode.removeChild(this.div_);

    // Label is removed from the map, stop updating its position/text.
    for (var i = 0, I = this.listeners_.length; i < I; ++i) {
        google.maps.event.removeListener(this.listeners_[i]);
    }
};

// Implement draw
Label.prototype.draw = function () {
    var projection = this.getProjection();
    var div = this.div_;

    // Some custom code to properly get the offset for the numbered label for each marker
    var labelOffset;
    if (parseInt(this.get('text').toString()) < 10) labelOffset = new google.maps.Point(6, -35);
    else labelOffset = new google.maps.Point(9, -35);

    var point1 = this.map.getProjection().fromLatLngToPoint(
                    (this.get('position') instanceof google.maps.LatLng) ? this.get('position') : this.map.getCenter()
                );
    var point2 = new google.maps.Point(
                    ((typeof (labelOffset.x) == 'number' ? labelOffset.x : 0) / Math.pow(2, map.getZoom())) || 0,
                    ((typeof (labelOffset.y) == 'number' ? labelOffset.y : 0) / Math.pow(2, map.getZoom())) || 0
                );
    var offSetPosition = this.map.getProjection().fromPointToLatLng(new google.maps.Point(
                    point1.x - point2.x,
                    point1.y + point2.y
                ));

    var position = projection.fromLatLngToDivPixel(offSetPosition);
    // End custom code

    div.style.left = position.x + 'px';
    div.style.top = position.y + 'px';
    div.style.display = 'block';
    div.style.zIndex = this.get('zIndex'); //ALLOW LABEL TO OVERLAY MARKER
    this.span_.innerHTML = this.get('text').toString();
};

/* END label.js */ 
```

使用标记创建地图的代码：

```
var mapOptions = {
    zoom: myZoom,
    center: myLatLng,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    streetViewControl: false
};

map = new google.maps.Map(document.getElementById("gmap"), mapOptions);

/* Insert logic here to iterate and add each marker */

// This function is called for every marker, i increases by 1 each call
function addMarker(latlng, mylabel, isShowroom, data, type, i) {
    var markerImage;
    var labelColor = '#666666';

    if (isShowroom) {
        markerImage = 'http://www.subzero-wolf.com/common/images/locator/pin-showroom.png';
    } else {
        if (type == 'service') {
            markerImage = '/common/images/locator/pin-dealer.png';
        } else if (type == 'parts') {
            markerImage = '/common/images/locator/pin-parts.png';
        } else {
            markerImage = '/common/images/locator/pin-dealer.png';
        }
    }

    var myMarker = new google.maps.Marker({
        position: latlng,
        draggable: false,
        clickable: true,
        map: map,
        icon: markerImage,
        zIndex: isShowroom ? 9999 : i
    });

    var html = "test content"

    myMarker['isShowroom'] = isShowroom;
    myMarker['infowindow'] = new google.maps.InfoWindow({
        content: html
    });

    google.maps.event.addListener(myMarker, 'click', function() {
        this['infowindow'].open(map, this);
    });

    // Dont show a label for the showroom because this is the marker with the star icon, no number needed
    if (!isShowroom) {
        var label = new Label({
            map: map
        });
        label.set('zIndex', i);
        label.bindTo('position', myMarker, 'position');
        label.set('text', mylabel);
    }

    markerArray.push(myMarker);

} 
```

# google-bigquery - 将数据存储区备份数据加载到 BigQuery writeDisposition

> ID：14816357
> 
> 赞同：0
> 
> 时间：2013-02-11T16:26:31.880
> 
> 标签：google-bigquery

我们正在使用大查询 v2 api 将数据存储备份加载到大查询中。我们正在指定这个 JSON 配置：

```
{'configuration': {
    'load': {
        'sourceFormat'     : 'DATASTORE_BACKUP',
        'writeDisposition' : 'WRITE_TRUNCATE',
        'sourceUris'       : sourceUris,
        'destinationTable' : {
            'projectId': settings.PROJECT_ID,
            'datasetId': datasetId,
            'tableId'  : entityKind
            }
        }
    }
} 
```

我们已经将该实体加载到 BigQuery 中一次，现在期待进一步加载以用新数据替换现有表。我们没有看到这一点，但插入作业请求中出现错误：

```
u'status': {
u'state': u'DONE',
u'errors': [
  {
    u'reason': u'invalid',
    u'message': u'Cannot import a datastore backup to a table that already has a schema.'
  }
],
u'errorResult': {
  u'reason': u'invalid',
  u'message': u'Cannot import a datastore backup to a table that already has a schema.'
} 
```

},

这是否预期 writeDisposition == 'WRITE_TRUNCATE' 不适用于 DATASTORE_BACKUP？

谢谢，

布雷登

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:21:22.050

是的，目前，使用 Datastore 管理员备份作为源文件的提取作业目前仅支持创建新的 BigQuery 表（或替换现有 BigQuery 表的全部内容） - 目前无法追加到现有表。

请注意，此功能处于早期实验阶段，在我们计划此功能的新迭代时，我们感谢您的反馈。

# symfony - Symfony 2.1 的弹性负载均衡器

> ID：14816358
> 
> 赞同：7
> 
> 时间：2013-02-11T16:26:38.133
> 
> 标签：symfony, amazon-web-services

在 symfony 2.1 上，有一个额外的字段`trusted_proxies`，告诉框架它应该信任哪些代理。**亚马逊的弹性负载均衡器**告诉你不要依赖它分配的 IP，因为它可以改变。

您如何`trusted_proxies`在这样的环境中设置指令？目前我正在使用`trust_proxy_data`，但它已被弃用并在 Symfony 2.3 中被标记为删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:26:24.660

我不是 AWS 方面的专家，但我很确定他们为您提供了一个永远不会为负载均衡器更改的 DNS 名称，所以您应该使用该名称而不是 IP 地址吗？这里有一些有趣的东西：http: [//nickhills.com/wp/2012/02/aws-elastic-load-balancing-with-a-static-ip-address/](http://nickhills.com/wp/2012/02/aws-elastic-load-balancing-with-a-static-ip-address/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T09:19:04.747

在 symfony 2.2 上，他们添加了允许 IP 范围的选项，这确实解决了这个问题。遗憾的是，在 2.1 上，您只能设置`trusted_proxies`为 true，让所有代理修改客户端 IP。

# javascript - 如何停止将 www.html.com 附加到 URL 开头的 Rails

> ID：14816362
> 
> 赞同：1
> 
> 时间：2013-02-11T16:26:50.177
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, coffeescript

我已经实现了一些可以让我的表格行成为链接的咖啡脚本。

然而，我遇到的问题是我的应用程序似乎添加`http.com//`到了我的工作 URL 的开头，所以`www.google.com`我不会得到`www.http.com//www.google.com`

我有当前的设置：

```
#Coffeescript

$ ->
  $('tr[href]').click -> window.open 'http://' + $(this).attr('href');

#View
    <% @jobs.each do |job| %>
        <tr href='<%= job.job_url %>'>
            <td><strong><%= job.title %></strong></td>
            <td><%= job.company %></td> 
            <td><%= job.city %>, <%= job.country %></td>
        </tr>
    <% end %> 
```

存储在我的数据库中的 URL 都`www.`作为 URL 的一部分，但不是`http://`.

任何关于这里可能发生的事情的建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:44:00.573

`job_url`返回一个完整的 url，例如

```
http://www.example.com/jobs/1234 
```

而`job_path`返回相对路径，例如

```
'/jobs/1234' 
```

如果您要使用`job_url`，则不应在您的咖啡脚本中附加协议，因为您的 URL 将被破坏，因为它们将附加协议两次。

作为最佳实践，您还可以考虑将其`data-href`用作`<tr>`. 我尝试这样做，它使 HTML 和 Javascript 之间的链接更加明确。我花了很多小时来追踪设计人员删除或重命名我的 Javascript 所依赖的类或属性元素的错误！

因此，在您的 ERB 中：

```
<tr data-href='<%= job.job_url %>'> 
```

在咖啡脚本中：

```
$ ->
  $('tr[data-href]').click -> window.open 'http://' + $(this).attr('data-href'); 
```

# caching - jsoup.connect().get() 是否返回缓存的文档？

> ID：14816370
> 
> 赞同：1
> 
> 时间：2013-02-11T16:27:08.170
> 
> 标签：caching, jsoup, connect

我使用`jsoup`并遵循代码来获取网站的 HTML 内容`Document doc = Jsoup.connect(this.getUrl()).get();`。

我可以获得网站的缓存版本吗？是否可以请求非缓存版本？我知道我可以设置一个标头请求。就像是：

```
header("Cache-control", "no-cache");  
header("Cache-store", "no-store"); 
```

但我不确定这是否有效。我只知道这些标签用于客户端浏览器。

如果有人能澄清一下，那就太棒了。问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:10:17.003

您正确（HTTP 规范）指定的任何标头都将通过 java.net.URLConnection.addRequestProperty(String, String) 发送到目标主机。如果服务器端到端支持此标头，您应该获得页面的缓存版本。jSoup 只是提供标头作为它发出的请求，当我查看源代码时，它没有做出任何明确的努力来缓存响应内容。

# c# - 如何在 C# wcf 中构建由多个模型组成的 JSON 响应

> ID：14816373
> 
> 赞同：0
> 
> 时间：2013-02-11T16:27:15.263
> 
> 标签：c#, arrays

我在 Visual Studio 2010 中使用 C# 并创建 WCF 服务。

```
[
    {
        "QuizCategory":"Basic Skills",
        "QuizID":["1","2"],
        "QuizShortName":["Career","Beginner"]
    },
    {
        "QuizCategory":"General",
        "QuizID":["3","4"],
        "QuizShortName":["General","General # 2"]
    }
] 
```

我在 json 结果中得到上述结果，但我需要显示如下结果，如字典字典：

```
[
    {
        "QuizCategory":"Basic Skills", 
        Subclasses: 
        [
            {
                "QuizID":1,"QuizShortName":"Career"
            },
            {
                "QuizID":2,
                "QuizShortName":"Beginner"
            }
        ]
    },
    {
        "QuizCategory":"General",      
        Subclasses: 
        [
            {
                "QuizID":3,
                "QuizShortName":"General"
            },
            {
                "QuizID":4,
                "QuizShortName":"General#2"
            }
        ]
    }
] 
```

StringBuilder jsonResult = new StringBuilder(); 列表 lstCNAInfo = new List();

```
 using (RestDataContext dc = new RestDataContext())
        {
            CNAClassInfo objCNAInfo;
            var records = dc.GetCNAClasses(Status);

            foreach (var rec in records)
            {
                ArrayList listQID = new ArrayList();
                ArrayList listQSN = new ArrayList();
                String[] splitQID = rec.QuizId.Split(',');
                String[] splitQSN = rec.QuizShortName.Split('$');
                foreach (var varlist in splitQSN)
                {
                    listQSN.Add(varlist);
                }
                foreach (var varlist in splitQID)
                {
                    listQID.Add(varlist);
                }
                objCNAInfo = new CNAClassInfo();
                objCNAInfo.QuizCategory = rec.QuizCat;
                objCNAInfo.QuizID = listQID;
                objCNAInfo.QuizShortName = listQSN;                                        
                lstCNAInfo.Add(objCNAInfo);
            }
        }
        //Json serialzer
        DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(List<CNAClassInfo>));
        MemoryStream ms = new MemoryStream();
        serializer.WriteObject(ms, lstCNAInfo);
        jsonResult.Append(Encoding.Default.GetString(ms.ToArray()));
        ms.Close();
        return jsonResult.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:39:15.127

如果它像您显示的那样序列化响应仅仅是因为这就是您的类结构的样子。

如果您想获得预期的输出，请确保您的结构如下所示：

```
public class Category
{
    public string QuizCategory {get;set;}
    public List<Subclasses> {get;set;}
}

public class Subclasses
{
     public int QuizID {get;set;}
     public string QuizShortName  {get;set;}

} 
```

当你序列化它时，你序列化一个`List<Category>`，每个测验类别将包含一个类别对象。

# python - 确保 statsmodels predict 中的一致时间索引

> ID：14816384
> 
> 赞同：1
> 
> 时间：2013-02-11T16:27:53.883
> 
> 标签：python, pandas, time-series, statsmodels

我正在尝试将 AR(1) 模型拟合到 Pandas 时间序列并向前推进。数据为年度数据，每年从 4 月 1 日开始。当我使用`statsmodels.tsa.ar_model.AR.predict`估计模型进行预测时，输出是 Pandas 时间序列，年度预测以 12 月 31 日为中心。

代码：

```
mod1 = sm.tsa.AR(ser['1972-01-04':'2007-01-04'], freq='A')
res1 = mod1.fit(order=1)
fcast1 = res1.predict('2007-01-04', '2018-01-04')
print fcast1 
```

输出：

```
2007-12-31     988.121031
2008-12-31    1035.640294
2009-12-31    1081.584720
... 
```

我可以获得 predict 方法来创建索引于 4 月 1 日的时间序列，还是必须在创建预测序列后重新索引它？我希望能够将它与数据框中的其他系列进行比较，因此索引非常重要。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:47:57.573

不，目前不是，但您应该能够在下一个版本中使用。修复应该相当简单。与我编写 TSA 基础架构时相比，pandas 时间序列的东西相对较新，我只是没有机会赶上。要做的太多了。

[https://github.com/statsmodels/statsmodels/issues/319](https://github.com/statsmodels/statsmodels/issues/319)

# javascript - 为什么实例变量未定义？

> ID：14816388
> 
> 赞同：0
> 
> 时间：2013-02-11T16:28:04.690
> 
> 标签：javascript

我不明白一件事：

```
 var comein = document.getElementById("comein");

 var enter = new Expand({ elem : comein });

function Expand (options) {
    this._elem = options.elem;
    console.log(this._elem); // i have a div element    
}

Expand.prototype = {        
    check : function () {

        var comInClassName = this._elem.className; // i have an error: this._elem is undefined

        if (comInClassName == "open"){
          this.close();
        }
        if (comInClassName == "close"){
          this.open();
        }
    }
}
log_in.addEventListener("click",  enter.check, false); 
```

如果在扩展中我有一个普通元素，为什么我在原型方法中有错误？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T16:32:05.850

这完全取决于您如何*调用* `check`. 如果你这样称呼它：

```
enter.check(); 
```

....然后在调用中，`this`将引用该`enter`对象并且它将具有一个`_elem`属性。另一方面，如果您将其设置为这样调用：

```
enter._elem.addEventListener('click', enter.check, false); 
```

...然后在调用中（当事件发生时），`this`不会引用，而是*引用*，因此它没有属性。`enter``this._elem``_elem`

发生这种情况是因为在 JavaScript（目前）中，`this`函数调用完全由函数的调用方式定义，而不是函数的定义位置。如果您将其作为从对象中检索函数引用的表达式的一部分来调用：

```
enter.check(); 
```

...然后`this`是指您从中获得函数引用的对象。但是如果你单独调用它，就像`addEventListener`上面的调用一样，它不会。

如果您在启用 ECMAScript5 的环境中（或者如果您有一个不错的 ES5 垫片），您可以使用以下方法修复它[`Function#bind`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.3.4.5)：

```
enter._elem.addEventListener('click', enter.check.bind(enter), false); 
```

`bind`返回一个函数，当被调用时，它将转身并使用给定的`this`值调用底层函数（`enter`在我们的例子中）。

更多探索（在我的博客上）：

*   [*神话方法*](http://blog.niftysnippets.org/2008/03/mythical-methods.html)
*   [*你必须记住`this`*](http://blog.niftysnippets.org/2008/04/you-must-remember-this.html)

# android - 如何使用带有 android 应用程序的传单更有效地加载地图图块？

> ID：14816390
> 
> 赞同：1
> 
> 时间：2013-02-11T16:28:12.267
> 
> 标签：android, cordova, map, tiles, leaflet

我目前正在开发一个 android 应用程序，该应用程序具有使用 phonegap、cloudmade 和传单的地图。有没有办法以某种方式缓存安卓手机上的地图图块？每次从服务器加载地图图块都很慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:56:01.203

这只是理论上的考虑，我不知道传单的工作实现。但是我有一些问题，但现在没有时间解决它。

**Web 和 phonegap 存储：**

1.  `loacalstorage`- 同步，易于使用 base64 url​​ 实现，小尺寸 2.5-5MB（可能 phonegap 解决`localstorage`小尺寸问题）。
2.  `indexed db`和`web sql`- 异步，大小 50 MB（也许更多）。
3.  phonegap 文件存储 - 异步。

**如何实现：**

编写可以与您的存储一起使用的自己的层，对于异步 API 来说可能会很困难。

您始终可以使用 base64 编码将 tile 存储为数据 url。您可以使用 JS 和画布将服务器 url 的图像转换为数据 url。

如果您可以使用磁贴预加载最简单的方式来使用文件存储，因为您可以只使用指向文件系统上磁贴的链接。

对于异步 API，您始终可以通过以下方式检测您的图块`zoom`，`latitude`并且`longitude`：插入带有`zoom_lat_lng`id 和 fake的假`src`图块，通过此 id 检查存储中的图块，如果找到图块 - 加载它，否则从带有缓存的服务器加载。

**UPD**：请参阅我的带有索引数据库和 web sql 的缓存解决方案，例如： [https](https://github.com/tbicr/OfflineMap/tree/master/leaflet_idb_sql_site) ://github.com/tbicr/OfflineMap/tree/master/leaflet_idb_sql_site和示例[http://tbicr.github.com/OfflineMap/leaflet/index。 html](http://tbicr.github.com/OfflineMap/leaflet/index.html)（现在在 android 上不快）。

# c# - 在 expando 对象上定义计算属性

> ID：14816391
> 
> 赞同：7
> 
> 时间：2013-02-11T16:28:18.367
> 
> 标签：c#, dynamic, expandoobject

我正在使用 expando 对象，并且正在尝试定义计算属性。

我知道我可以通过执行以下操作来定义一个简单的属性：

```
dynamic myExpando = new ExpandoObject();
myExpando.TheAnswerToLifeTheUniverseAndEverything= 42; 
```

同样，我也可以定义一个方法：

```
myExpando.GetTheQuestion = ((Func<string>)(() =>
        {
            return "How many road must a man walk down before we can call him a man?";
        })); 
```

使用标准对象时，我们可以定义计算属性，即定义将返回自定义方法/计算结果的属性。不需要举例。

我需要在我的 expando 上做类似的事情——拥有一个实际上调用“Func”的属性（或其他形式的委托，只要我可以调用自定义方法并具有自定义返回类型，任何事情都会发生）。所以基本上我需要调用第二个示例中的方法，但让它像属性一样工作。

基本上我需要能够使用**myExpando.GetTheQuestion**而不是**myExpando.GetTheQuestion()**来调用它，同时保持将自定义委托定义为属性主体的能力。

有没有办法做到这一点？我相信我*可以*通过使用表达式树来做到这一点，但我承认我有点迷路了。任何人都可以就如何实现这一目标提供一些指导吗？

* * *

**编辑**

做了更多的研究。除非有一些我不知道的非常具体的类/接口/sintax，否则我开始认为上述是不可能的。据我所知，ExpandoObject 类通过定义一些执行后台管道的方法来工作 - TryGetMember、TrySetMember 等。现在，当在动态 objetc 上“访问属性”时，TryGetMember 是被调用的成员。该成员从某种内部字典返回一个值（是的，我知道......这有点简化，但应该给出这个想法）......没有对返回的值类型进行测试。这意味着在我的示例中*myExpando.GetTheQuestion*将返回原始 Func。

似乎由于 TryGetMember 只是返回一个值，因此没有办法让它“执行”属性代码。为了实现这一点，您需要某种表达式/lambda/func/action 代理项，其值实际上是方法的结果。这似乎是不可能的（除非我错过了什么，否则也没有多大意义——基本上你会有一个设置为“委托”的值，然后作为委托返回值获取？？？）。我是正确的还是这个或者我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:05:06.410

`DynamicObject`您需要通过继承和覆盖来制作自己的 ExpandoObject

`public override bool TryGetMember(GetMemberBinder binder, out object result)`和`public override bool TrySetMember(SetMemberBinder binder, object value)`

实现`TrySetMember`将值存储在私有`Dictionary<string,object>`下`binder.Name`并用于`TryGetMember`从该字典中检索它，这将为您提供一个基本的 ExpandoObject。然后给它你需要的功能，添加一个 check in `TryGetMember`，在你拉对象之后，看看它是否`is Delagate`，然后使用反射来看看它是否不接受任何参数。如果两者都为真，只需强制转换为`dynamic`并不添加 arg 调用括号并将其分配给`result`.

```
public override bool TryGetMember(GetMemberBinder binder, out object result)
{
      if (_dictionary.TryGetValue(binder.Name, out result)){
           if(result is Delegate && /* some reflection check on args*/){
                result = ((dynamic)result)();
           }
      }
} 
```

我有一个开源框架 ImpromptuInterface（在 nuget 中），它有一个*非密封* `ImpromptuDictionary`的，你可以从它开始`ExpandoObject`，特别是如果你需要任何更细微的特性，`ExpandoObject`比如 gui 绑定支持。它还具有更多您可能会觉得有用的[dlr 管道功能。](http://code.google.com/p/impromptu-interface/wiki/UsageReallyLateBinding)

# jquery - 如果默认情况下未选中，则 jQuery Mobile 收音机禁用

> ID：14816400
> 
> 赞同：0
> 
> 时间：2013-02-11T16:28:45.833
> 
> 标签：jquery, jquery-mobile, radio-button

我在提交时将表单的结果返回给用户。此表单包括单选按钮的字段集。POST 后的结果视图以默认选中状态返回他们的选择。如何禁用所有未选中的单选按钮？

给出代码示例：

```
<input id="1-4" name="section[1]" value="3" type="radio" checked="checked"/>
<input id="1-5" name="section[1]" value="4" type="radio" /> 
```

因此，我需要 jQuery (mobile) 来禁用所有单选框，这很容易，但可以识别选中状态并启用该特定状态，以便从 DOM 中放置或删除正确的标记。

所有这些代码都是在系统中动态生成的。为了尽可能多地重用代码，最好是操作 DOM，而不是编写代码来进一步将表单与视图分开。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:33:58.130

我建议：

```
$('input:radio').prop('disabled', function(){ return !this.checked; }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ayB3d/)。

或者：

```
$('input:radio').prop('disabled', function(){ return !this.defaultChecked; }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ayB3d/1/)。

参考：

*   [`HTMLInputElement`](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement).
*   [`prop()`](http://api.jquery.com/prop/).

# mysql - 对每个不存在值的 GROUP BY 进行计数

> ID：14816402
> 
> 赞同：0
> 
> 时间：2013-02-11T16:29:05.557
> 
> 标签：mysql, sql

我有下表

```
id  rid     eId     vs  isN
24  3   22  2   1
25  3   21  2   1
26  60  21  2   1
27  60  21  2   1
28  60  21  2   1
29  60  21  2   1
30  60  21  2   1
31  60  21  2   1
32  81  21  2   1
35  60  22  2   1
36  81  22  2   1
37  0   22  2   1
38  60  22  2   1
39  81  22  2   1
40  0   22  2   1
41  60  22  2   1
42  81  22  2   1
43  3   22  2   1 
```

在`eId`我有 8 个不同的数字上，我想计算这八个不同的 eid，甚至算作“0”我想要得到的是一个包含 8 个值的数组，键应该是八个不同的名称。"vs" 是 3 个不同的数字，每次我在 "rid" = %d 和 "vs" = %d 上计算我想要的这个（具体的摆脱和具体的 vs）

```
SELECT count(*) as count FROM notification 
WHERE rid = 60 AND vs = 2 AND isN = 1 GROUP BY eId 

rid=>60,21=>6,22=>3,vs=>2,isN=>1 
```

（这就是我从上面得到的）

```
rid=>60,21=>6,22=>3,23=>0,33=>0,34=>0,35=>0,36=>0,41=>0,42=>0,vs=>2,isN=>1 
```

（这就是我想要的。计数了八个，当然这个计数的数字在 eId 上不存在，所以我想返回为零）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:31:14.893

您需要的是一个包含您想要输出的所有值的驱动程序表。然后，您可以将其从外部连接到实际数据：

```
SELECT count(notification.eid) as count
FROM (select distinct eid
      from notification
     ) drivers left outer join
     (select *
      from notification
      WHERE rid = %d AND vs = %d AND isN = 1
     ) n
     on driver.eid = notification.eid
GROUP BY driver.eId 
```

您还应该`eid`在`select`子句中包含 ，除非您依赖于输出的最终顺序（MySQL，与任何其他数据库不同，确实保证在 a 之后的结果顺序`group by`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:05:18.377

这是获取指定结果集的一种方法：

```
 SELECT d.rid           AS `rid`
      , SUM(n.eid<=>21) AS `21`
      , SUM(n.eid<=>22) AS `22`
      , SUM(n.eid<=>23) AS `23`
      , SUM(n.eid<=>33) AS `33`
      , SUM(n.eid<=>34) AS `34`
      , SUM(n.eid<=>35) AS `35`
      , SUM(n.eid<=>36) AS `36`
      , SUM(n.eid<=>41) AS `41`
      , SUM(n.eid<=>42) AS `42`
      , d.vs            AS `vs`
      , d.isN           AS `isN`
   FROM ( SELECT %d AS rid, %d AS vs, 1 AS isN ) d
   LEFT
   JOIN notification n
     ON n.rid = d.rid
    AND n.vs  = d.vs
    AND n.isN = d.isN
  GROUP
     BY d.rid
      , d.vs
      , d.isN 
```

注意：表达式`(n.eid<=>21)`是 的简写`IF(n.eid=21,1,0)`，或者更符合 ANSI 标准`CASE WHEN n.eid = 21 THEN 1 ELSE 0 END`。这给出了 0 或 1，然后可以将其与`SUM`函数聚合。

您可以使用以下任何形式获得等效结果：

```
 , SUM(n.eid<=>21)                             AS `21`
     , COUNT(IF(n.eid=22,1,NULL))                  AS `22`
     , SUM(IF(n.eid=23,1,0))                       AS `23`
     , COUNT(CASE WHEN n.eid = 33 THEN 1 END)      AS `33`
     , SUM(CASE WHEN n.eid = 34 THEN 1 ELSE 0 END) AS `34` 
```

* * *

我们在这里使用的“技巧”是我们保证别名为 as 的内联视图`d`将返回一行。然后我们使用 LEFT JOIN 运算符从`notification`表中提取所有“匹配”的行。这`GROUP BY`将强制所有这些行被折叠（聚合）回单行。我们正在对每一行使用条件测试来查看它是否包含在给定的计数中，“技巧”是为每一行返回一个 0 或 1，然后将所有 0 和1s 进行计数。

注意：如果您使用`COUNT(expr)`聚合，您希望`expr`当该行包含在计数中时返回非 NULL，并且当该行不包含在计数中时返回 NULL。

如果您使用 a `SUM(expr)`，那么您希望`expr`在该行包含在计数中时返回 1，而在不包含时返回 0。（我们想要一个 0 而不是 NULL，这样我们就可以保证`SUM(expr)`在没有要包含的行时返回“零计数”（即 0 而不是 NULL）。（当然，我们可以使用`IFNULL`函数用 0 替换 NULL，但在这种情况下，它很简单，无需这样做。）

* * *

请注意，这种“计数”方法的一个优点是它可以轻松扩展以获得“组合”计数，或者在几个不同的计数中包含一行。例如

```
 , SUM(IF(n.eid IN (41,42),1,0)) AS `total_41_and_42` 
```

将使我们得到 eid=41 和 eid=42 行的总数。（这不是一个很好的例子，因为我们可以通过将两个计数相加来轻松地在客户端计算它。但是如果您进行更精细的计数，并且想要将单行计数为多个，这确实会成为一个优势列 ...

```
 , SUM(IF(n.eid=42,1,0))            AS eid_42
   , SUM(IF(n.eid=42 AND foo=1,1,0)   AS eid_42_foo_1
   , SUM(IF(n.eid=42 AND foo=2,1,0))  AS eid_42_foo_2 
```

我们只需“一次通过”`notification`表格即可获得所有这些单独的计数。如果我们尝试在 WHERE 子句中进行这些检查，我们可能需要多次通过表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T17:17:43.617

所以，基本上你要找的是这个？...

```
 SELECT rid,eid,vs, COUNT(*) FROM notification GROUP BY rid,eid,vs;
 +-----+-----+----+----------+
 | rid | eid | vs | COUNT(*) |
 +-----+-----+----+----------+
 |   0 |  22 |  2 |        2 |
 |   3 |  21 |  2 |        1 |
 |   3 |  22 |  2 |        2 |
 |  60 |  21 |  2 |        6 |
 |  60 |  22 |  2 |        3 |
 |  81 |  21 |  2 |        1 |
 |  81 |  22 |  2 |        3 |
 +-----+-----+----+----------+
 7 rows in set (0.11 sec) 
```

# hadoop - hadoop：FileSystem copyToLocalFile 方法无法复制整个文件

> ID：14816403
> 
> 赞同：0
> 
> 时间：2013-02-11T16:29:08.283
> 
> 标签：hadoop, hdfs

我需要集群的每个节点从 hdfs 检索一个 1GB 的文件。我使用 FileSystem 的 copyToLocalFile 方法。但不是整个文件（1GB），每个节点检索大约 50MB 的文件，然后代码继续。结果我的工作失败了。为什么会这样？有没有办法“等待”直到整个文件被复制到本地 fs？

编辑：我的映射器类检查文件是否存在于节点的本地 fs 中，如果不存在，则检索它。这是在 setup() 函数中完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:01:38.187

从您上次编辑：

> 编辑：我的映射器类检查文件是否存在于节点的本地 fs 中，如果不存在，则检索它。这是在 setup() 函数中完成的。

您所描述的正是 DistributedCache 的设计用途——它将确保在您的任何 map / reduce 任务在该节点上运行之前将文件复制到每个任务跟踪器。

# php - 关于 wordpress 问题的 Bootstrap 流体布局

> ID：14816404
> 
> 赞同：0
> 
> 时间：2013-02-11T16:29:17.773
> 
> 标签：php, html, css, wordpress, twitter-bootstrap

嗨，有没有人可以在这方面为我提供帮助。我正在我的 wordpress 网站上尝试引导程序的流畅布局。显然无法正常工作。我创建了一个 .span 12 列，它没有占据浏览器的整个宽度。相反，它的宽度缩小了。有没有解决的办法？

这是我使用自定义页面模板创建的实验

```
<?php
/*
Template Name: page-work
*/
?>
<?php get_header(); ?>    
<h1><?php the_title(); ?></h1>

<style type="text/css">

.span12{
    background:black;
    color:white;
    padding:20px 0;
    text-align:center;
    margin-top:15px;
}

.span6{
    background:blue;
    color:white;
    padding:20px 0;
    text-align:center;
        margin-top:15px;
}

</style>

<div class="container-fluid">

   <div class="row-fluid">

     <div class="span12">span 12</div>

</div>

   <div class="row-fluid">

     <div class="span6">span 6</div>
     <div class="span6">span 6</div>

   </div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-05T14:13:02.073

我建议升级到 Bootstrap 3，因为它以更好的方式处理流体容器，而且你一开始就不会遇到这个问题。

.span12 变为 col-xx-12 （xx 是 xs、sm、md 和 lg...请阅读！）并且宽度为 100%。BS3 使用百分比宽度而不是上述答案中提到的固定宽度。从BS2转移到3也不是太难。

*   [http://getbootstrap.com/](http://getbootstrap.com/) - 在这里下载
*   [http://getbootstrap.com/getting-started/](http://getbootstrap.com/getting-started/) - 文档

作为一般规则，wordpress 不会真正改变您网站的外观。这是您在它周围放置的样式，因此在这种情况下，Wordpress 是无关紧要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T23:09:21.353

这是因为 bootstrap 的固定宽度 span12 为

```
.span12 {
    width: 1170px;
  } 
```

对于更大的屏幕。

如果你仍然想要，你可以试试这个：

```
@media (min-width: 1200px) {
    .span12 {
        width: 100%;
    }
} 
```

始终创建一个子 css 文件并将其放在引导文件下方。

# .htaccess - mod_rewrite 转发任何传入的域

> ID：14816405
> 
> 赞同：0
> 
> 时间：2013-02-11T16:29:18.223
> 
> 标签：.htaccess, mod-rewrite

有没有办法将任何带有 www 和不带 www 的传入域转发到特定域？

我尝试过这样的事情，但它可能无法正常工作

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.domain.com/$1 [R=301,L] 
```

# c++ - 将对象移动到地图中

> ID：14816409
> 
> 赞同：32
> 
> 时间：2013-02-11T16:29:32.000
> 
> 标签：c++, c++11

这样做的问题是巨大的物体将被复制到地图中

```
Huge huge1(some,args);
Huge huge2(some,args);

std::map<int,Huge> map1;
std::map<Huge,int> map2;

map1.insert({0,huge1});
map2.insert({huge2,0}); 
```

我怎么能保证搬家？这会起作用还是还有更多？

```
map1.insert({0,std::move(huge1)});
map2.insert({std::move(huge2),0}); 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-11T16:33:33.620

`std::map::insert`对 R 值有重载：

`std::pair<iterator,bool> insert(value_type&&);`

任何绑定到此重载的表达式都将调用 R 值构造函数。因为`std::map<K,V>::value_type`is `std::pair<const key_type, mapped_type>`，并且`std::pair`有一个构造函数，它采用 R 值：

```
template<class U1, class U2> 
pair(U1&& x, U2&& y); 
```

那么只要您使用创建 R 值的表达式插入该对，就可以保证在创建对象和插入映射时都会调用`key_type`和的 R 值构造函数，例如：`mapped_type``pair`

```
map1.insert(std::make_pair(0, Huge()); 
```

或者

```
map1.insert(std::make_pair(0, std::move(huge1)); 
```

当然，所有这一切都依赖于`Huge`有一个合适的 R 值构造函数：

```
Huge(Huge&& h)
{
  ...
} 
```

`std::map::emplace`最后，如果您只是想`Huge`在地图中构造一个新对象作为元素 ，您也可以使用。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-11T16:34:47.327

你可以这样做（`{0,std::move(huge1)}`部分）。但是你也可以像这样跳过中间人（假设你在函数中构造对象）：

```
map1.emplace(std::piecewise_construct, 0, std::forward_as_tuple(some, args));
map2.emplace(std::piecewise_construct, std::forward_as_tuple(some, args), 0); 
```

或者，如果为您的函数提供了对象，您仍然可以使用`emplace`：

```
map1.emplace(0, std::move(huge1));
map2.emplace(std::move(huge1), 0); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-11T16:35:39.520

避免复制和移动的替代方法是使用[`std::map::emplace()`](http://en.cppreference.com/w/cpp/container/map/emplace). 从链接的参考页面：

> 向容器中插入一个新元素。**元素是就地构造的，即不执行复制或移动操作。**元素类型（value_type，即std::pair）的构造函数被调用，参数与提供给函数的参数完全相同，用std::forward(args)转发。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-19T09:34:51.770

除了上述之外，您还可以依赖`std::unique_ptr<>`' 缺少复制构造函数，尽管这会稍微改变接口。

```
#include <iostream>
#include <map>
#include <memory>

class Huge {
 public:
  Huge(int i) : x{i} {}
  int x;
};

using HugePtrT = std::unique_ptr<Huge>;
using MyMapT = std::map<int, HugePtrT>;

int
main() {
  MyMapT myMap;
  myMap[42].reset(new Huge{1});
  std::cout << myMap[42]->x << std::endl;
  myMap[43] = std::move(myMap[42]);
  if (myMap[42])
    std::cout << "42: " << myMap[42]->x << std::endl;
  if (myMap[43])
    std::cout << "43: " << myMap[43]->x << std::endl;
} 
```

产生预期的输出：

```
1
43: 1 
```

如果省略`std::move()`调用，程序将无法编译。同样，您可以使用`.reset()`来分配指针。

这样做的好处是它可以在没有 R 值构造函数的类上工作，重量非常轻，内存所有权明确定义，并为您提供类似`boost::optional<>`的语义。可以使用`std::unique_ptr`比通过 R 值构造函数移动的对象更轻的参数，因为 R 值移动的对象需要分配（但公平地说，我使用的所有 C++11 编译器知道支持返回值优化或复制省略），即使对象的内脏被移动。

之所以这样`std::unique_ptr<>`工作是因为`std::unique_ptr<>`没有复制构造函数，它只有一个移动构造函数。

# android - 我的 GameView (SurfaceView) 上的 GridView

> ID：14816410
> 
> 赞同：2
> 
> 时间：2013-02-11T16:29:45.473
> 
> 标签：android, gridview, grid, surfaceview, tetris

我有以下问题。

我正在尝试为 Android 编写俄罗斯方块游戏。因此，我需要在 GameView 上放置一个 Grid（一个自编码类，它扩展了 SurfaceVieW）。

不幸的是，我不知道如何在 GameView 上绘制网格。

我已经实现了一个 Grid 类，它设置行和列的宽度和高度。

我的网格课

```
 package com.example.tetris;

    import android.content.Context;
    import android.graphics.Paint;
    import android.widget.GridView;

    public class Grid extends GridView
{
    private int rowsWidth;
    private int columnsHeight;
    private int rowsNum;
    private int columnsNum;
    private Paint gridcolor;
    private GameView gameview;

    public Grid(Context context)
    {
        super(context);
    }

    public void drawGrid(GameView gameview)
    {
        this.gameview = gameview;

        rowsWidth = gameview.getWidth() / 10;

        rowsNum = gameview.getWidth() / rowsWidth;

        columnsHeight = gameview.getHeight()/rowsWidth;

        columnsNum = gameview.getHeight() / columnsHeight;

        setHorizontalSpacing(1);

        setColumnWidth(rowsWidth);
        setNumColumns(columnsNum);
    }

} 
```

我的游戏视图类

```
 package com.example.tetris;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.widget.GridView;

public class GameView extends SurfaceView {

    private SurfaceHolder surfaceHolder;

    private Tetriminos[] tetriminos[];

    private GridView grid;

    public GameView(Context context)
    {
        super(context);

        final GameLoopThread gameloop = new GameLoopThread(this); // warum er final erzwingt, ka

        surfaceHolder = getHolder();

        surfaceHolder.addCallback(new SurfaceHolder.Callback()
        {
            @Override
            public void surfaceChanged(SurfaceHolder holder, int format,
                    int width, int height) {
                // TODO Auto-generated method stub      
            }

            @Override
            public void surfaceCreated(SurfaceHolder holder) {

                gameloop.setRunning(true);
                gameloop.start();
            }

            @Override
            public void surfaceDestroyed(SurfaceHolder holder) {
                gameloop.setRunning(false);
            }
        });

    }

    protected void onDraw(Canvas canvas) {

        canvas.drawColor(Color.BLACK);
        drawBorders(canvas);
        // grid.drawGrid(this);

    }

    public boolean onTouchEvent(MotionEvent event) {

        return false;

    }

    public void drawBorders(Canvas canvas)
    {
        int borderwidth = 10;
        int screenWidth = getWidth();
        int screenHeight = getHeight();
        Paint bordercolor = new Paint();
        bordercolor.setARGB(255, 236, 27, 36);

        canvas.drawRect(0, 0, borderwidth, getHeight(), bordercolor);
        canvas.drawRect(0, getHeight()-borderwidth, getWidth(), getHeight(), bordercolor);
        canvas.drawRect(getWidth()-borderwidth, 0, getWidth(), getHeight(), bordercolor);
        canvas.drawRect(0, 0, getWidth(), borderwidth, bordercolor);
    }

} 
```

# iphone - NSURLConnection 不返回 dataWithContentsOfURL 的数据

> ID：14816411
> 
> 赞同：0
> 
> 时间：2013-02-11T16:29:46.130
> 
> 标签：iphone, json, nsurlconnection, nsdata

我有一个应用程序，我曾经使用`dataWithContentsOfURL`.
但是因为我需要让它成为一种异步方式。
现在我`NSURLConnection`用来处理这个问题，我没有收到任何有用的数据，我得到的只是`didReceiveResponse`方法中的状态码 200，但从`didReceiveData`未被调用。而在`connectionDidFinishDownloading` `destinationURL`回报`null`。

我不知道 wat couses 这个问题，我真的很感激一些帮助。

代表

```
#import "NetWorkToGuiDelegate.h"

@implementation NetWorkToGuiDelegate
@synthesize data;
@synthesize caller;

- (id) init: (SEL) pointer :(NSObject *) c;
{
    doWhenDone = pointer;
    self.caller = c;
    data = [[NSMutableData alloc]init];
    return self;
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSString *responseText = [[NSString alloc] initWithData:self.data encoding:NSUTF8StringEncoding];

    NSLog(@"%@",responseText);

}

- (void)connectionDidFinishDownloading:(NSURLConnection *)connection destinationURL:(NSURL *)destinationURL
{
    NSLog(@"post download finished");
    data = [NSData dataWithContentsOfURL:destinationURL];
    NSLog(@"data: %@",data);
    NSLog(@"URLconnection %@", connection.currentRequest);

    #pragma clang diagnostic push
    #pragma clang diagnostic ignored "-Warc-performSelector-leaks"
    [caller performSelector:doWhenDone withObject:data];
    #pragma clang diagnostic pop
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [self.data setLength:0];
    NSHTTPURLResponse *resp= (NSHTTPURLResponsae *) response;
    NSLog(@"got responce with status %d",[resp statusCode]);
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)d
{
    NSLog(@"data recieved %@",d);
    [self.data appendData:d];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    [[[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Error", @"")
                                message:[error localizedDescription]
                               delegate:nil
                      cancelButtonTitle:NSLocalizedString(@"OK", @"")
                      otherButtonTitles:nil] show];
    NSLog(@"failed");
}

// Handle basic authentication challenge if needed
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
    NSString *username = @"username";
    NSString *password = @"password";

    NSURLCredential *credential = [NSURLCredential credentialWithUser:username
                                                             password:password
                                                          persistence:NSURLCredentialPersistenceForSession];
    [[challenge sender] useCredential:credential forAuthenticationChallenge:challenge];
}

@end 
```

通话

```
NetWorkToGuiDelegate *nwgd = [[NetWorkToGuiDelegate alloc] init:@selector(login:) :self];
    NSString *stringURL = [NSString stringWithFormat:@"%@%@%@%@", dk.baseURL, @"menu?code=",dk.loginCode,@"&v=1"];
    NSURL *url = [NSURL URLWithString:stringURL];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    NSURLConnection *urlConnection = [[NSURLConnection alloc] initWithRequest:request delegate:nwgd];
    [urlConnection start]; 
```

我只是补充一点，调用发生在主线程上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:47:39.400

实际上有很多要点可以回答这个问题，而且[关于 SO](https://stackoverflow.com/search?q=nsurlconnection%20asynchronous)本身的问题也很多

浏览这个不错[的帖子](http://cocoaintheshell.com/2011/04/nsurlconnection-synchronous-asynchronous/)

并且必须阅读来自苹果本身的[文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)。（包含代码示例和解释）

希望这会为您解决问题。

**编辑**

```
-(void)startAConnection
{
    // Create the request.
    NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.apple.com/"]
                                              cachePolicy:NSURLRequestUseProtocolCachePolicy
                                          timeoutInterval:60.0];
    // create the connection with the request
    // and start loading the data
    NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
    if (theConnection) {
        // Create the NSMutableData to hold the received data.
        // receivedData is an instance variable declared elsewhere.
        receivedData = [NSMutableData data];
    } else {
        // Inform the user that the connection failed.
    }
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    // This method is called when the server has determined that it
    // has enough information to create the NSURLResponse.

    // It can be called multiple times, for example in the case of a
    // redirect, so each time we reset the data.

    // receivedData is an instance variable declared elsewhere.
    [receivedData setLength:0];
}
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    // Append the new data to receivedData.
    // receivedData is an instance variable declared elsewhere.
    [receivedData appendData:data];
}

- (void)connection:(NSURLConnection *)connection
  didFailWithError:(NSError *)error
{
    // inform the user
    NSLog(@"Connection failed! Error - %@ %@",
          [error localizedDescription],
          [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
}
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"Succeeded! Received %d bytes of data",[receivedData length]);

} 
```

调用 startAConnection 启动进程

注意：不要忘记`<NSURLConnectionDelegate>`在 .h

# java - LibGdx - 瓷砖游戏碰撞检测

> ID：14816413
> 
> 赞同：1
> 
> 时间：2013-02-11T16:29:52.933
> 
> 标签：java, libgdx, collision-detection

我正在开发一款瓷砖 2d 端平台游戏。到目前为止，我已经做了一些事情。我正在使用 libgdx 的矩形进行基本的碰撞检测，所以考虑到我现在只有草块，我在 Java 中制作了一个单块世界（文件阅读器尚未准备好）问题是我的检测只在第一次工作，换句话说如果我将碰撞产生到一个块上，它会检测到碰撞并这样做。尽管如果我在没有碰撞的情况下将我的玩家生成在街区顶部，那么玩家将永远坠落。

这是代码`world.update();`=>

```
public void update() {

    Iterator<block> cb = Blocks.iterator();
    while (cb.hasNext()) {

        block b = cb.next();
        if (b.getBounds().overlaps(player.getBounds())) {

            if (player.getPosition().x >= b.getPosition().x + 32) {
                //RIGHT
                player.getVelocity().x = 0;
            } else if (player.getPosition().x + 32 <= b.getPosition().x) {
                //Left
                player.getVelocity().x = 0;
            }
            //All Y
            player.getVelocity().y = 0;
        }
        if (!b.getBounds().overlaps(player.getBounds())) {
            player.getVelocity().y = -gravity;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:03:53.283

您的 while 循环正在为您的玩家不相交的每个块应用重力。所以如果你有 10 个方块，而玩家只与 1 个相交，你仍然会应用重力 9 次。您应该只对玩家应用一次重力变化。

`boolean hitSomething = false`在循环之前设置一个标志 ( )，`hitSomething = true`如果玩家击中任何方块，则将其设置为 true ( )。然后，在循环之后，如果`hitSomething`为 false，则对玩家施加重力。

在这种情况下，使用调试器逐步执行更新方法是了解代码在做什么的好方法。它也应该比等待 Stack Overflow 来调试您的代码更快。

# java - 使用 java 使用 XMLWorker 将损坏的 html 转换为 pdf

> ID：14816423
> 
> 赞同：0
> 
> 时间：2013-02-11T16:30:19.183
> 
> 标签：java, html, itext, xmlwriter

几天来，我一直在学习 iText 及其美妙之处。

我成功地将 HTML 源代码转换为 PDF。但是，我一直想知道是否可以将损坏的 html（缺少标签等）转换为 PDF 而不会像 HTMLWorker 过去那样抛出异常。我知道 XMLWorker 是非常明智的，并且只适用于正确编写的 HTML 或 (X)HTML，但是因为我从第二方获取 html，这很可能会破坏 HTML。

我想知道是否有一种方法可以转换可能的内容并让错误像浏览器一样浮动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:32:00.717

在将损坏的 HTML 传递给 iText 之前使用[TagSoup 。](http://ccil.org/~cowan/XML/tagsoup/)它将清理损坏的 HTML 并返回有效的 X(HT)ML。

TagSoup 实现了 SAX 解析器接口。有[一些](http://htmlparsing.com/java.html) 关于如何使用它的例子，但它[缺乏](http://www.jezuk.co.uk/cgi-bin/view/jez?id=2643)[一些“真实”的文档](https://groups.google.com/forum/?fromgroups=#!topic/tagsoup-friends/Y2qA29CM4n4)。

可能您将不得不再次序列化 XML 并将其转储到文件中以将其提供给 iText，我不知道它的接口。

可以使用[XMLWriter](http://www.megginson.com/downloads/xml-writer-0.2.zip)序列化 SAX 流。碰巧它已经包含在 TagSoup 中，因此您不需要添加额外的依赖项。

```
final Parser parser = new Parser();
final StringWriter writer = new StringWriter();

parser.setContentHandler(new XMLWriter(writer));
parser.parse(new InputSource(
        new URL("http://oregonstate.edu/instruct/phl302/texts/hobbes/leviathan-c.html")
                .openConnection().getInputStream()));
System.out.println(writer.toString()); 
```

根据 iText 的 API 决定是将`writer`的输出转储到文件还是以其他方式传递。

# c# - 如何等到 File.Exists？

> ID：14816425
> 
> 赞同：16
> 
> 时间：2013-02-11T16:30:21.550
> 
> 标签：c#, multithreading, file, sleep, exists

我有一个应用程序，正在侦听所选文件夹中的 *.log 文件。我用过`FileSystemWatcher`。

但有一个问题。负责制作该文件的其他应用程序采取以下步骤：

1.  制作 *.gz 文件
2.  解压成txt文件（随机文件名）
3.  将 *.txt 名称更改为带有 *.log 扩展名的正确名称。

而且我无法改变这种行为。

所以我`FileSystemWatcher`为 *.gz 和 *.txt 文件制作了 2 s。为什么？因为这个app有时不会解压gz文件，有时也不会把txt文件重命名为最终的*.log文件。

`FileSystemWatcher2`捕获 txt 文件，然后（在大多数情况下，它被重命名为在接下来的 1000 毫秒内登录）我需要等待一段时间来检查 txt 文件是否存在（如果不存在，它似乎被重命名为最终的 *.log 文件）。

问题是，如何在不`Thread.Sleep()`防止 UI 冻结的情况下检查文件是否存在？

我希望它很清楚，如果不是，我会尝试更好地描述它。我认为这是一个复杂的问题。

一些代码示例：

gz 文件的观察者：

```
private void fileSystemWatcher_Created(object sender, FileSystemEventArgs e)
{
   //this is for gz files in case if gz file is not unpacked automatically by other app
   //I need to wait and check if gz was unpacked, if not, unpack it by myself,
   //then txt watcher will catch that
   Thread.Sleep(5000);
   if (File.Exists(e.FullPath))
   {
      try
      {
         byte[] dataBuffer = new byte[4096];
         using (System.IO.Stream fs = new FileStream(e.FullPath, 
                                                     FileMode.Open, 
                                                     FileAccess.Read))
         {
            using (GZipInputStream gzipStream = new GZipInputStream(fs))
            {                            
               string fnOut = Path.Combine(path_to_watcher, 
                                           Path.GetFileNameWithoutExtension(e.FullPath));

               using (FileStream fsOut = File.Create(fnOut))
               {
                  StreamUtils.Copy(gzipStream, fsOut, dataBuffer);
               }                            
            }
         }
      }
      catch { //Ignore }
   }
} 
```

txt 文件的观察者：

```
private void fileSystemWatcher2_Created(object sender, FileSystemEventArgs e)
{
   //this is for txt file
   Thread.Sleep(3500);
   if (File.Exists(e.FullPath))
   {
      //make my actions
   }
   else
   {
      //make my actions
   }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-14T04:03:41.620

Actually FileSystemWatcher *Created event called in separate thread by .NET itself*.. So basically **you need to do absolutely nothing**. Your code is OK as it is.

Here is the proof:

```
class Program
{
    static void Main(string[] args)
    {
        FileSystemWatcher fw = new FileSystemWatcher(@"C:\temp");
        fw.Created += fileSystemWatcher_Created;

        Console.WriteLine(Thread.CurrentThread.ManagedThreadId);

        fw.EnableRaisingEvents = true;

        Console.ReadLine();
    }

    static void fileSystemWatcher_Created(object sender, FileSystemEventArgs e)
    {
        Console.WriteLine(Thread.CurrentThread.ManagedThreadId);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T16:36:29.847

您可以使用[BackGroundWorker](http://www.dotnetperls.com/backgroundworker)来监控文件系统 - 并避免冻结您的 UI

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T16:33:44.297

您可以在不锁定 UI 线程的情况下使用睡眠，您实际上是在睡眠一个单独的线程。

```
public event EventHandler FileCreated;
public void CheckFileExists()
{
  while(!File.Exists(""))
  {
    Thread.Sleep(1000); 
  }
  FileCreated(this, new EventArgs());
} 
```

然后将其称为：

```
Thread t = new Thread(CheckFileExists);
this.FileCreated += new EventHandler(somemethod);
t.Start();

public void SomeMethod(object sender, EventArgs e)
{
  MessageBox.Show("File Created!");
} 
```

或者正如另一篇文章中提到的，使用 a`BackGroundWorker`代替单独的线程，将我提到的代码放入`DoWork`并监听`OnFinish`事件，但看到没有太多工作要做，这两种方法都可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-12T06:50:20.723

```
int i = 0;
while (!File.Exists && i < 30) //limit the time to whait to 30 sec
{
    Threed.Sleep(1000);
    File.Refresh();
    i++;
} 
```

# ajax - Ajax 和 Highcharts - 在检索到数据之前显示“正在加载”，然后填充图表

> ID：14816426
> 
> 赞同：4
> 
> 时间：2013-02-11T16:30:21.373
> 
> 标签：ajax, highcharts

我有一些 php 脚本，它们基本上需要很长时间才能检索数据。因此，这会影响 highcharts 加载时间，因为当前代码仅在检索到所有数据后才写入图表，因为只有在所有处理完成后才会回显 highcharts 代码。

这会导致页面在检索数据之前基本上什么都不显示。目标是让 highcharts 立即加载，然后使用 php 脚本返回的数据写入系列。

所以，我想要的是让所有图表立即加载并显示没有数据的“加载”，然后在 php 脚本完成后使用 setData 将数据传递给图表系列。

我只是想知道是否有人有任何这样做的例子？我遇到的另一个问题是只能在 $(document).ready(function() 函数中设置数据。例如

作品： http: [//preview.tinyurl.com/b724bxo](http://preview.tinyurl.com/b724bxo)

休息： http: [//preview.tinyurl.com/a7mqqkc](http://preview.tinyurl.com/a7mqqkc)

非常感谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T19:24:14.463

不知道你是否还在寻找这个，但要显示“加载”消息，可以在图表上使用“setLoading()”方法。

```
pipeline_by_sales_stage_highchart.setLoading("Loading...") 
```

检查这个小提琴：http: [//jsfiddle.net/QSfEJ/](http://jsfiddle.net/QSfEJ/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T16:42:23.613

您不能访问范围外的变量、将其移动到该范围内或使变量成为全局变量。

*   [http://jsfiddle.net/M2jv7/33/](http://jsfiddle.net/M2jv7/33/) - 范围内

*   [http://jsfiddle.net/M2jv7/34/](http://jsfiddle.net/M2jv7/34/) -全局变量

    ```
    var pipeline_by_sales_stage_highchart;
    $(document).ready(function () {
                pipeline_by_sales_stage_highchart = new Highcharts.Chart({
    });

    ...

    // somewhere:
    pipeline_by_sales_stage_highchart.series[0].setData(data); 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-06T16:23:00.517

在这里查看我的答案：[Highchart series update in javascript](https://stackoverflow.com/questions/16407901/highchart-series-update-in-javascript/39353204#39353204)

* * *

概括 ：

用空系列初始化图表，然后`addSeries`在循环中使用来更新图表，如下所示：

```
this.dataFromApi.forEach(function(serie) { // for each row of data, add a series
  this.chart.addSeries(serie, false); // false is to prevent redrawing
}.bind(this));
this.chart.redraw(); // manually redraw
this.chart.hideLoading(); // stop loading if showLoading() was call before 
```

jsFiddle在这里：[https ://jsfiddle.net/qyh81spb/](https://jsfiddle.net/qyh81spb/)

# c# - 更改服务名称后窗口服务无法启动

> ID：14816427
> 
> 赞同：1
> 
> 时间：2013-02-11T16:30:23.933
> 
> 标签：c#, visual-studio, windows-services

我有一个在 Visual Studio 中编写的 Windows 服务。我被要求更改服务名称，因此我进入 ServiceInstaller 属性并更改了 DisplayName 和 ServiceName 属性。当我通过 Windows 管理器启动服务时，我收到以下错误：

> 'server name' 上的 'servicename' 服务启动然后停止。如果某些服务正在被其他服务或程序使用，它们会自动停止。

日志文件说：

> 无法启动服务。System.Security.SecurityException：找不到源，但无法搜索部分或全部事件日志。要创建源，您需要读取所有事件日志的权限，以确保新的源名称是唯一的。

任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:48:11.210

显然您没有注册事件源。您的事件源的名称很可能是从服务名称派生的，并且当您更改时，您的服务正在尝试使用未注册的新事件源。

签入您正在注册事件源的服务安装程序——它必须在安装服务时注册，因为它需要提升的管理员权限。有关如何注册的示例，请参阅[此 SO 问题](https://stackoverflow.com/questions/2667248/windows-event-log-how-to-register-an-event-source)中的代码片段。

# javascript - jQuery切换div不起作用

> ID：14816430
> 
> 赞同：1
> 
> 时间：2013-02-11T16:30:43.890
> 
> 标签：javascript, jquery, html

我正在尝试制作两个 div，当单击一个时，它会隐藏另一个。这是我的代码：

```
<head>

    <script src="jquery-1.9.1.min.js"></script>
    <script>
        $("#top").click(function {
            $("#box").toggle();
        })
    </script>

</head>
<body>

    <div id="top"></div>
    <div id="box"></div>

</body> 
```

但是当我点击时`top`，什么也没有发生。

编辑：我将其更改为：

```
$(document).ready(function(){
    $("#top").click(function {
        $("#box").toggle();
    })
}); 
```

它仍然无法正常工作

Edit2：原来我在 click(function) 中缺少括号

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T16:31:42.483

您错过了函数后的括号。我认为您需要放入[document.ready](http://api.jquery.com/ready/)以便元素在被`javasscript`.

```
$("#top").click(function (){
                         ^^ 
```

**[现场演示](http://jsfiddle.net/5Ux8L/)**

```
$(document).ready(function(){
  $("#top").click(function (){
        $("#box").toggle();
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T16:36:45.397

你缺少括号

```
$("#top").click(function() {
                        ^^ 
```

由于 jQuery 位于 HTML 之上，因此您需要将 jQuery 包装在*document.ready*包装器中，例如：

```
$(function(){
    // your code
}); 
```

或者，将 jQuery 脚本标签移动到 HTML 下方，例如：

```
<div id="top">one</div>
<div id="box">two</div>
<script>
    $("#top").click(function() {
        $("#box").toggle();
    })
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T16:32:54.107

您需要将代码放入`document.ready`

```
$(document).ready(function() {
   // do stuff when DOM is ready
 }); 
```

在此处阅读有关[jquery 入门的信息](http://docs.jquery.com/Tutorials%3aGetting_Started_with_jQuery)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T16:45:55.603

这是可以工作的编写代码。

```
$(document).ready(function(){
  $('#top').click(function(){
     $("#box").toggle(500);
  });
}); 
```

您可以在此处查看示例[http://jsfiddle.net/deepp2887/Pnamj/](http://jsfiddle.net/deepp2887/Pnamj/)。您可以根据需要更改 .toggle(500) 动画速度。

# c++ - C ++中构造函数中的分段错误

> ID：14816431
> 
> 赞同：1
> 
> 时间：2013-02-11T16:30:47.140
> 
> 标签：c++, constructor, segmentation-fault

所以我有 cl_Page 类：

```
class cl_Page{
    public:
    cl_Page(cl_LessonMoment *parent_param);
    cl_Page(cl_SoftRoot *parent_param);
    int parent_type;
    cl_LessonMoment *parent_lmoment;
    cl_SoftRoot *parent_softroot;

    char id[256];

    //<content>
    //Backgrounds.
    str_Color bgcolor;
    cl_Image bgimage;

    //Actual content
    vector<cl_Textbox> textboxes;
    vector<cl_Button> buttons;
    vector<cl_Image> images;
    //</content>

    cl_Textbox* AddTextbox();
    cl_Button* AddButton();
    cl_Image* AddImage(char *filename = nullptr);
}; 
```

和 cl_Page 构造函数：

```
cl_Page::cl_Page(cl_LessonMoment *parent_param) : bgimage(nullptr){ //here is the segfault
    parent_lmoment = parent_param;
    parent_type = 1;
    id[0] = '\0';
    SetColor(bgcolor, 0xffffffff);
}

cl_Page::cl_Page(cl_SoftRoot *parent_param): bgimage(nullptr){ // or here if i call this constructor
    /*parent_softroot = parent_param;
    parent_type = 2;
    id[0] = '\0';
    SetColor(bgcolor, 0xffffffff);*/
} 
```

发生的情况是，**无论我如何调用构造函数，或者无论我调用哪个构造函数（第二个都被注释掉了；所以基本上是空的），全局的、局部的或动态的，在函数中或作为成员对象**，我得到一个分段错误，似乎就`cl_Page::cl_Page(cl_LessonMoment *parent_param) : bgimage(nullptr){`在线上。调用堆栈如下所示：

```
#0 77C460CB strcat() (C:\WINDOWS\system32\msvcrt.dll:??)
#1 0022F168 ?? () (??:??)
#2 00401905 cl_Page::cl_Page(this=0x22fbe8, parent_param=0x0) (F:\Scoala\C++\EduSoftViewer_Parser\sources\classes\soft_tree\page.cpp:10)
#3 00402B8A main() (F:\Scoala\C++\EduSoftViewer_Parser\sources\main.cpp:11) 
```

在我写这篇文章之前的一些构建中，（具有完全相同的问题）调用堆栈上的 #1 位置，现在`?? () (??:??)`是`ntdll!RtlDosApplyFileIsolationRedirection_Ustr() (C:\WINDOWS\system32\ntdll.dll:??)`.

所以我的问题是：有人知道是什么原因造成的吗？我真的需要让这个工作。

如果有任何不清楚的地方，请询问，我会提供更多信息。

编辑：澄清一下：我在 Windows XP SP2 下并使用 gcc 运行 Code::Blocks。

编辑 2： cl_Image 构造函数：

```
cl_Image::cl_Image(char *filename_param){
    if (filename == nullptr){
        filename[0] = '\0';
    }
    else{
        strcpy(filename, filename_param);
    }
    SetPosition(position, 0, 0);
    id[0] = '\0';
    visible = 1;
    z_index = 0;
} 
```

此类不包含任何对象成员，POD 结构除外，`position`

编辑 3： cl_Image 类：

```
class cl_Image{
public:
    cl_Image(char* filename_param = nullptr);

    str_Position position;
    char filename[256];
    char id[256];
    bool visible;
    int z_index;
}; 
```

`str_Position`只是 2 个整数的结构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T16:43:13.930

很确定这是你的问题：

```
cl_Image::cl_Image(char *filename_param){
    if (filename == nullptr){  // <<==== filename??? try using the param.
        filename[0] = '\0';
    } 
```

尝试这个：

```
cl_Image::cl_Image(char *filename_param){
    if (filename_param == nullptr){
        filename[0] = '\0';
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:36:55.053

我猜这`bgimage`不能用 nullptr 初始化。

# sql - 删除 SQL 中的“重复”组

> ID：14816434
> 
> 赞同：0
> 
> 时间：2013-02-11T16:30:54.143
> 
> 标签：sql, oracle

我试图摆脱 SQL 中的重复组，但问题是它们并不是*真正*的重复组。

我有一张这样的桌子：

```
a  |  b

0  |  1
2  |  3 
```

但是，该表还添加了 B、A，因此我最终将其作为决赛桌：

```
a  |  b

0  |  1
2  |  3
--------
1  |  0
3  |  2 
```

我想要做的是返回不同的对（第一个表），我遇到了问题。任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:34:14.390

试试这个：

```
select distinct (case when a < b then a else b end) as First,
       (case when a < b then b else a end) as Second
from t 
```

如果您使用的是 Oracle（这是 SQLPlus 的假设），您可以将其简化为：

```
select distinct least(a, b), greatest(a, b)
from t 
```

# android - 保存到 SQLDb，在 onPause() 或 onStop() 中更可靠？

> ID：14816436
> 
> 赞同：0
> 
> 时间：2013-02-11T16:31:02.643
> 
> 标签：android, android-sqlite

我在尝试将值保存到 SQLiteDatabase 时有点困惑。我希望我的应用能够无缝地保存状态和数据，所以我首先将“保存到 SQLDb (AsyncTask)”代码放入 onStop()，并将“从 SQLDb 加载”代码放入 onStart()。但是，我注意到这是不可靠的：按下后退或主页按钮会调用 onPause()，*有时还会*调用 onStop()，当应用程序回到前台时，Spinner 项目有时会出现，有时会是空的，并且由于是否调用了 onStop()/onStart()，其余的视图/内容也是不可预测的。

所以我将“保存”代码移至 onPause()，将“加载”代码移至 onResume()。现在，我在文档中读到这种方法不应该在这些方法中完成，但在大多数情况下，它比 onStop() 和 onStart() 效果更好。然而，它仍然不完全可靠：有时 AsyncTask 似乎永远不会结束。如果用户在 AsyncTask 完成之前将应用程序带回前台，则会导致上述不可预测的 Views。

我应该在哪里保存这些东西？

注意：我有两个 Spinner，用户可以向其中动态添加项目，还有一个 GridView，它必须基于其中一个 Spinner（每个 Spinner 项目一个 gridChild）重新填充自身。据我所知，这类东西无法通过 SharedPreferences 或类似的状态保存技术轻松保存，必须由数据库完成（特别是因为要保存的对象数量不定，具体取决于用户输入的内容）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:20:17.610

通常，您保留数据`onPause()`并恢复它`onResume()`。

这是因为`onStop()`如果系统需要终止您的应用程序，则不保证会被调用。

# c# - 与接口一起使用的最佳 OR/M

> ID：14816439
> 
> 赞同：1
> 
> 时间：2013-02-11T16:31:09.330
> 
> 标签：c#, entity-framework, nhibernate, orm, llblgenpro

在我们的下一个项目中，我们需要使用这样的接口（示例代码）

```
public interface IFoo
{
    string Name {get; set;}
    IList<IBar> Bars {get; set;}
}

public interface IBar
{
    string Name {get;set;}
    IList<IFoo> Foos {get;set;
}

public class Foo : IFoo
{
    public string Name {get; set;}
    public IList<IBar> Bars {get; set;}
}

public class Bar : IBar
{
    public string Name {get; set;}
    public IList<IFoo> Foos {get;set;}
} 
```

显然，在应用层，我们希望使用接口，而对实现类一无所知。

我一直在看一些 OR/M - 我们目前拥有 LLBLGen，我尝试过 EntityFramework，这是一场噩梦，也没有让它工作，查看了 NHibernate，但事实上入门过程是如此相对于 LLBLGen 的复杂性把我吓跑了（但如果 NHibernate 支持我的需求，我仍然对它开放）。

所以，我正在寻找：一个简单的 OR/M，我可以使用最少的设置要求（LLBLGen，你只需使用他们的工具对你的数据库进行逆向工程，生成源代码，然后你就可以开始编码了），它支持结构以上。

附带说明：谁能告诉我我正在寻找的模式叫什么？（除了超懒惰的；））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:30:59.783

```
// mappings
public class FooMap : ClassMap<Foo>
{
    public FooMap()
    {
        Map(f => f.Name);
        HasMany(f => f.Bars).KeyColumn("foo_Id");
    }
}

public class BarMap : ClassMap<Bar>
{
    public BarMap()
    {
        Map(f => f.Name);
    }
}

// query
var john = session.Query<IFoo>()
    .Where(f => f.Name == "John")
    .Fetch(f => f.Bars)
    .Single();

Console.Writeline(john.Bars.Count); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:24:18.167

LLBLGen Pro v3.x 可以为你生成实体类上的接口（你可以用宏指定名称，在项目级别定义，根本没用），用简单的模板就可以生成接口也是如此。

但是，您是否在多个实体上重复使用接口？在这种情况下，您可能希望通过接口查询并获取所有实现该接口的类型的所有实例。并非所有 ORM 都支持（我认为 NHibernate 支持，我们自己的运行时和 EF 不支持）

# jquery - 原型中的内部高度等效项

> ID：14816445
> 
> 赞同：1
> 
> 时间：2013-02-11T16:31:18.180
> 
> 标签：jquery, height, prototypejs

我有这段代码可以计算元素的高度：

```
//resize bar
var outer_container_id = "workspace_container";
var inner_container_id = "listing_data_container";
var constant_px = 45 + 26 + 25 + 60;

window.onresize = function() {
    var new_height = $(outer_container_id).getHeight() - constant_px;
    if($(inner_container_id) != null){
        $(inner_container_id).setStyle({ 'height' : new_height + 'px'});
    }

}; 
```

但它留下了一个空白，因为我认为它不包括填充等。jQuery 的原型是`innerHeight`什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:49:02.607

看看[Element.Layout](http://api.prototypejs.org/dom/Element/Layout/)方法。

在这种情况下，您正在寻找

```
var layout = $(outer_container_id).getLayout();
var new_height = layout.get('border-box-height') - constant_px; 
```

# terminal - 我是谁——RPM-SPEC

> ID：14816447
> 
> 赞同：0
> 
> 时间：2013-02-11T16:31:19.723
> 
> 标签：terminal, centos, rpm-spec

我只是想弄清楚谁调用了 root 或 sudo，因为我不想在 root 的主文件夹中设置一些东西，当我在终端中尝试它时它的工作完美，但不适用于规范，我做错了什么？

### 终端：

```
[Mcfly@Mcfly ~]$ whoami=$(who am i | awk '{print $1}')
[Mcfly@Mcfly ~]$ echo $whoami
Mcfly 
```

### 规格

```
%define whoami %(who am i | awk '{print $1}')
echo "The user that built this is %{whoami}"
the user that built this is '%{whoami}' 
```

你能帮助我吗 ？

或者有一种简单的方法可以了解 rpm-spec 中的用户路径，我的意思是 /home/mcfly/ 没有 /root？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T02:22:15.773

你想要的是`$SUDO_USER`，一个方便为你设置的变量`sudo`。

如果您想确保`root`不进行安装，请将其放在您的`%pre`：

```
if [ -z "$SUDO_USER" ]; then echo "Please use sudo to ensure configuration files are installed in proper location."; exit 99; fi
if [ z"$SUDO_USER" == "zroot" ]; then echo "Please use sudo from a non-root account to ensure configuration files are installed in proper location."; exit 99; fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:38:19.597

我不是 Linux 专家，您也没有解释您当前的方法是如何失效的，但是[id](http://linux.about.com/library/cmd/blcmdl1_id.htm)命令看起来是一个更简单的替代方案。

# javascript - 用 JavaScript 绘图

> ID：14816456
> 
> 赞同：0
> 
> 时间：2013-02-11T16:31:50.393
> 
> 标签：javascript, jquery, html, image, drawing

我正在尝试写一些在图像上绘制的东西。我有一个 .png 格式的流程图，我想根据用户所在的页面在图表中的特定步骤周围画一个圆圈。我通常会直接使用 HTML5 并使用该`<canvas>`元素，但它必须在不支持`<canvas>`. 我可以使用 jQuery，但这是我可以使用的唯一外部库。此外，用户可以上下滚动页面，所以我看到的使用绝对定位的东西最终看起来很糟糕，因为我并不总是希望图像在那里。有小费吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:53:18.053

一个包含流程图的 DIV 作为背景图像，另一个图像（这将是一个透明的圆形轮廓图像）位于 DIV 内，绝对定位（相对于它的父 DIV），它被移动到基于 div 内的正确位置用户在哪个页面。应该足够简单。

# c# - 每页结果

> ID：14816457
> 
> 赞同：1
> 
> 时间：2013-02-11T16:31:51.077
> 
> 标签：c#, pagination, webforms

每当我在特定页面（例如第 6 页）并从“每页结果”下拉列表中选择（例如从 20 到 50）时，总页数将从（例如 9 到 3）更改。

然而！我当前所在的特定页面（第 6 页）超出了总页面的范围（例如，总页面 = 3，我的当前页面 = 6）。然后它不会显示任何内容，我必须向后单击按钮才能到达新的每页结果列表的最后一页。

我创建了一个代码来指定 Session["curr_page"] 在发生这种情况时应该在哪里。但是，我无法确定将这段代码放在哪里，因为每当我更改每页的结果下拉列表时它都不会触发。这是我制作的代码。

```
if (Convert.ToInt16(Session["curr_page"]) > Convert.ToInt16(Session["total_page"]))
    {
        Session["curr_page"] = Session["total_page"];
    } 
```

这是示例源代码。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        LoadPageSizer();
        LeadStatusDDL();
        Session["curr_page"] = 1;
        BindAndPage();
    }
    OnPageLoad();
}

private void BindAndPage()
    {
        rptLeadsPager.DataSource = ListLeads(ddlLStatus.Text.ToString(), Convert.ToInt16(Session["curr_page"]), Convert.ToInt16(ddlPageSize.Text));
        rptLeadsPager.DataBind();
        BuildPagination(Convert.ToInt16(Session["total_page"]), Convert.ToInt16(Session["curr_page"]), 10);
    }
private void OnPageLoad()
    {
        rptLeadsPager.DataSource = ListLeads(ddlLStatus.Text.ToString(), Convert.ToInt16(Session["curr_page"]), Convert.ToInt16(ddlPageSize.Text));
        rptLeadsPager.DataBind();
        BuildPagination(Convert.ToInt16(Session["total_page"]), Convert.ToInt16(Session["curr_page"]), 10);
    }
#region SQL Stored Procedure
private DataTable ListLeads(string leadStatus, int pageNumber, int pageSize)
{
    int searchResultsCount;
    DataSet dsSearchResults;

    using (SqlConnection sqlConnection = new SqlConnection(ConfigurationManager.AppSettings["sqlConnection"]))
    {
        using (var sqlCommand = new SqlCommand("LeadsPager", sqlConnection))
        {
            sqlCommand.CommandType = CommandType.StoredProcedure;

            //add parameters
            sqlCommand.Parameters.AddWithValue("@LeadsStatus", leadStatus);
            sqlCommand.Parameters.AddWithValue("@PageNumber", pageNumber);
            sqlCommand.Parameters.AddWithValue("@ResultsPerPage", pageSize);

            var resultsCountParam = new SqlParameter("@SearchResultsCount", SqlDbType.Int);
            resultsCountParam.Direction = ParameterDirection.Output;
            sqlCommand.Parameters.Add(resultsCountParam);

            using (var sqlDataAdapter = new SqlDataAdapter(sqlCommand))
            {
                dsSearchResults = new DataSet();
                sqlDataAdapter.Fill(dsSearchResults);

                searchResultsCount = int.Parse(resultsCountParam.Value.ToString());
            }
        }
    }

    if (searchResultsCount == 0)
    {
        ResultHeader.Visible = false;
        ResultFooter.Visible = false;
    }
    else
    {
        Session["total_page"] = GetTotalPage(pageSize, searchResultsCount);
        lblTotalPage.Text = Session["total_page"].ToString();
        ResultHeader.Visible = true;
        ResultFooter.Visible = true;
    }

    RenderToolbar();

    if (dsSearchResults.Tables.Count > 0)
        return dsSearchResults.Tables[0];
    else
        return null;
}
#endregion 
```

谢谢你。

# java - 删除方法排序字典java

> ID：14816461
> 
> 赞同：0
> 
> 时间：2013-02-11T16:32:01.767
> 
> 标签：java, dictionary

我正在尝试使用二进制搜索方法编写排序字典的删除方法。我的字典是一个位置列表、基于序列的字典。搜索方法如下：

```
private Entry<Integer, V> binarySearch(int key, int low, int high) {
    int mid = (high + low) / 2;
    if(low > high){
        return null;
    }
    else if(sortedList.get(mid).getKey() == key){
        return sortedList.get(mid);
    }
    else if(sortedList.get(mid).getKey() > key){
        return binarySearch(key, low, mid-1);
    }
    else{
        return binarySearch(key, mid+1, high);
    }
} 
```

到目前为止，我的代码是：

```
@Override
public Entry<Integer, V> remove(Entry<Integer, V> e)
        throws InvalidEntryException { 
if(e == null){
    throw new InvalidEntryException("");
}
Entry<Integer, V> entry = binarySearch(e.getKey(), 0, size());
if(entry != e){
    boolean found = false;
    int i = getLocation(entry.getKey());
    while(!found && i < size()-1){
        entry = binarySearch(e.getKey(), i+1, size());
        if(entry == e){
            found = true;
            sortedList.remove(i);
        }
        i++;
    }
}
else{
    sortedList.remove(getLocation(entry.getKey()));
}
if(entry == null){
    throw new InvalidEntryException("");
}
else{
    return entry;
}
} 
```

任何人都可以帮助任何输入吗？我真的不知道该怎么做，我非常沮丧。如果条目与参数是相同的实例，我基本上需要删除。与字典一样，可能有多个条目具有相同的键，但只有当条目与参数的实例相同时，我才需要删除。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:38:49.173

> 可能有多个条目具有相同的键，但只有当条目与参数的实例相同时，我才需要删除。

您对 java 中实例的相等性感到困惑。您需要覆盖该[`equals()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)方法并定义相等性如何在您的对象上运行。有了这个你还需要看看[`hashcode()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)。

并且您尝试比较的实例永远不能与传递的 param 实例相同。

# sql - 这个存储过程中回车/制表符序列的目的是什么？

> ID：14816464
> 
> 赞同：0
> 
> 时间：2013-02-11T16:32:10.847
> 
> 标签：sql, sql-server, dynamic-sql

在存储过程中。我正在学习，我一直看到这样的行：

```
IF @IsSupplierUser = 0
    SET @SQL += CHAR(13) + CHAR(9) + N' ,cs.FEDSurveyName as ''Complete Survey Name''' 
```

当默认情况下SQL只会输出一个标准的单元格表时，放置制表符/回车的目的是什么？默认情况下，输出不是已经是 CSV 文件了吗？

我错过了一些非常明显的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:37:18.930

看起来存储过程正在使用动态 SQL，也许最初编写它的人可能会这样做以便于阅读。甚至可能有一个注释掉（或没有）的语句`PRINT(@SQL)`。

除了那里的简短片段之外，我认为没有理由将空格/换行符放在那里。

# security - 想知道 ssl 在 magento 中是否有效

> ID：14816470
> 
> 赞同：0
> 
> 时间：2013-02-11T16:32:23.773
> 
> 标签：security, magento, ssl

我已经为我的站点购买了 SSL 证书，并在管理员中将安全基本 URL 设置为 https，将不安全基本 URL 设置为 http 并为前端启用。现在我不确定它是否工作正常。当我来结帐时，它会转移到 https。这是我的网站 [http://majorcomfort.com/index.php/](http://majorcomfort.com/index.php/)的链接，请告诉我还好还是我必须做其他事情....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:42:42.350

一切似乎都很好，结帐步骤和客户区域位于安全 URL 下，这是 Magento 的“为前端启用 SSL”的标准设置。

前端的 SSL 保护在节点下的 XML 配置中定义 `<config><frontend><secure_url>path</secure_url></frontend></config>`

其中 path 是所需的 URL，例如`/customer/`对于客户区域，或者`/checkout/onepage`对于结帐

# kendo-ui - kendoEditor 没有出现

> ID：14816473
> 
> 赞同：0
> 
> 时间：2013-02-11T16:32:36.103
> 
> 标签：kendo-ui

这是我的代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="kendo_UI.WebForm1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link href="~/Styles/kendo/kendo.common.min.css" rel="stylesheet" />
    <link href="~/Styles/kendo/kendo.default.min.css" rel="stylesheet" />
    <script type="text/javascript" src="~/Scripts/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="~/Scripts/kendo/kendo.all.min.js"></script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <textarea id="editor" rows="10" cols="30"> </textarea>
        <script type="text/javascript">
            $(document).ready(function () {
                $("#editor").kendoEditor();
            });
        </script>
    </div>
    </form>
</body>
</html> 
```

但是 textarea 出现时没有 kendoEditor :-(

怎么了？

谢谢！

没有更多细节;-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:03:04.207

[Kendo UI 不适用于 jQuery 1.9.x。](https://stackoverflow.com/questions/14382884/issues-with-kendoui-and-jquery-1-9-0)您需要包含 jQuery 1.8.2。更多信息可以在[文档](http://docs.kendoui.com/getting-started/javascript-dependencies#jquery-version)中找到。

# c# - 为什么从控制台应用程序调用时 EF 不会更新对象？

> ID：14816474
> 
> 赞同：0
> 
> 时间：2013-02-11T16:32:41.480
> 
> 标签：c#, asp.net-mvc, entity-framework, console-application, entity-framework-5

我的解决方案由几个项目组成，包括一个 MVC 3 网站和一个控制台应用程序。

我正在使用 EF 遵循存储库模式。

MVC 应用程序一切正常，但是当我尝试通过控制台应用程序更新对象时，没有任何反应。

我能够从控制台应用程序中检索对象并更改其属性，但是当我保存更改时，该行没有更新。没有错误或任何东西。我在这里错过了什么吗？

我在 MVC 应用程序和控制台应用程序配置文件中配置的数据库具有相同的连接字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:15:53.403

我的问题与在控制台应用程序中未正确重用数据库上下文有关。基本上，正在为读取和写入创建一个新的上下文。我需要配置我的 DI(Ninject) 以在正确的范围内创建我的上下文。

# android - Android 谷歌地图 v2 相机动画

> ID：14816475
> 
> 赞同：8
> 
> 时间：2013-02-11T16:32:44.360
> 
> 标签：android, animation, camera, google-maps-api-2

所以我不确定这是否是一个错误......可能是或者我可能错过了一些东西。

无论如何，这里是 Google Maps V2 Camera Controls 的链接。[https://developers.google.com/maps/documentation/android/views#moving_the_camera](https://developers.google.com/maps/documentation/android/views#moving_the_camera)

问题 ：

动画到已经动画到的位置不会调用 onFinish();

如何复制：

```
mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(mLocation.getLatLng(), zoomLevel), 200, new GoogleMap.CancelableCallback() {

                    @Override
                    public void onFinish() {
                        //DO some stuff here!
                    Log.d("animation", "onFinishCalled");

                    }

                    @Override
                    public void onCancel() {
                    Log.d("animation", "onCancel");

                    }
                }); 
```

当用户双击调用相同动画的内容时，即使间隔很长时间，也可能会出现此问题，onFinish 只会被调用以获取成功的动画。当相机已经定位时，不会调用 onFinish 方法！

我可以在做任何相机动画之前四处检查，但我不喜欢这样做，因为它很浪费。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-04T15:22:24.740

当我想将相机移动到相同的位置时，我遇到了同样的问题，这似乎是一个错误。即使新旧位置不一样，差异很小，例如：旧位置.latitude = 94.54284009112，新位置.latitude = 94.54284003451，它也不起作用。我的解决方案是截断值以仅获取 old_position.latitude = new_position.latitude = 94.54，然后我进行测试。

移动相机并同时滚动地图还有另一个问题，因为我在移动之前禁用滚动手势并在 onFinish() 和 onCancel() 上启用它。

```
public void animateCameraTo(final double lat, final double lng)
{
    _googleMap = getMap();
    CameraPosition camPosition = _googleMap.getCameraPosition();
    if (!((Math.floor(camPosition.target.latitude * 100) / 100) == (Math.floor(lat * 100) / 100) && (Math.floor(camPosition.target.longitude * 100) / 100) == (Math.floor(lng * 100) / 100)))
    {
        _googleMap.getUiSettings().setScrollGesturesEnabled(false);
        _googleMap.animateCamera(CameraUpdateFactory.newLatLng(new LatLng(lat, lng)), new CancelableCallback()
        {

            @Override
            public void onFinish()
            {
                _googleMap.getUiSettings().setScrollGesturesEnabled(true);

            }

            @Override
            public void onCancel()
            {
                _googleMap.getUiSettings().setAllGesturesEnabled(true);

            }
        });
    }

} 
```

希望这可以帮助你;）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-07T11:28:55.593

您应该检查像素距离，而不是地理距离：

```
LatLngBounds myBounds = YOUR_BOUNDS;
LatLngBounds visibleBounds = map.getProjection().getVisibleRegion().latLngBounds;
Point myCenter = map.getProjection().toScreenLocation(myBounds.getCenter());
Point visibleCenter = map.getProjection().toScreenLocation(visibleBounds.getCenter());
int dist = (int) Math.sqrt(Math.pow(myCenter.x - visibleCenter.x, 2) + Math.pow(myCenter.y - visibleCenter.y, 2));
if (dist > YOUR_THRESHOLD) {
    map.animateCamera(CameraUpdateFactory.newLatLngBounds(myBounds, YOUR_PADDING), new GoogleMap.CancelableCallback() {
        @Override
        public void onFinish() {
            // do something
        }

        @Override
        public void onCancel() {
            // do something
        }
    });
} else {
    // do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T07:45:14.110

我发现的唯一解决方案是进行浪费的像素值检查，设置一个虚假（但关闭）CameraUpdate 对象并首先使用虚假 CameraUpdate 进行嵌套 animateCamera() 调用，然后在第一个 onFinish() 中调用另一个 cameraUpdate()使用正确的 CameraUpdate。我今天安装了 Google MAP v2 更新，但没有帮助。这对我来说是设备旋转的问题。我正在显示边界矩形，并且质心在旋转时不会改变，因此 animateCamera() 不起作用，并且当设备旋转时，选定的矩形可能部分离开屏幕。

你找到另一个解决方案了吗？谢谢

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-26T09:04:11.093

这是另一种解决方法：

您确实知道地图动画的动画持续时间。所以你可以发布一个延迟的可运行的动画持续时间+一些偏移量，你可以在那里检查是否调用了完成/取消的监听器......如果没有，你可以在那里获取它并调用适当的监听器

# php - 需要 isset 和 !='

> ID：14816479
> 
> 赞同：2
> 
> 时间：2013-02-11T16:32:55.707
> 
> 标签：php, if-statement, isset

我需要这两种情况，如果我不使用`isset`它会发出警告，我需要其他情况。所以我需要同时使用`!=''``isset``!=''`

下面的代码运行良好，但不返回 else，但是当我更改`isset($array['1']['name']`为`($array['1']['name'] !=''`then 时，它返回 else 条件。

```
if(isset($array['1']['name'] )) { 
    $this->output('<li class="name">',$array['1']['name'],'</li>'); 
}
else{ 
    $this->output('<li class="name">',$other,'</li>'); 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T16:34:31.740

结合`isset()`使用运算[`empty()`](http://www.php.net/manual/en/function.empty.php)符`&&`

```
if(isset($array['1']['name']) && !empty($array['1']['name'])) { 
```

# javascript - 选定的选项在 append() 后未显示为选定的选项

> ID：14816482
> 
> 赞同：0
> 
> 时间：2013-02-11T16:33:10.897
> 
> 标签：javascript, jquery, html, dom

我正在构建一个基于 JSON 数据的 HTML 字符串。在 HTML 中是 a`<select>`和它`<option>`的 s。如果`<option>`'s 的值与某些 JSON 数据相同，则它也包含`selected="selected"`选项标签的属性。在那之后，整个shebang被`.append()`编辑到一个显示器上。

除了未选择所选选项之外，所有这些似乎都可以正常工作。检查 Chrome 的 Web 开发工具中的代码显示该`selected="selected"`属性存在。做一个`console.log()`选项`:selected`可以选择它们。但是，当我深入到一个特定的`<option>`并查看它时，它显示的`selected`属性设置为`false`.

世界卫生大会...？

我已经尝试在事后使用`.select()`和jQuery 方法来强制解决问题，但两者都没有产生任何影响。`.attr("selected","selected")`

其他人能弄清楚这里发生了什么吗？这可能只是我的无知，但这在我看来应该是可行的。

代码供参考。 `dataArray`是一个对象数组。 `$display`是 jQuery 包装`<table>`的 HTML 是`.append()`ing 到：

```
$orderNumberField = jQuery("#orderNumber");
_orderNumberArray = $.parseJSON( $orderNumberField.val() );

for( n in dataArray ) {
    var _displayString = "";

        // ... other table data cells ...

    _displayString += "<td><select class='orderNumSelect'>";
    _displayString += " <option value=''></option>";
    for( i in _orderNumberArray ){
        _displayString += "<option value='" + _orderNumberArray[i] + "'";
        if( dataArray[n].orderNum == _orderNumberArray[i] ) _displayString += " selected='selected'";
        _displayString += ">" + _orderNumberArray[i] + "</option>";
    }
    _displayString += "</select></td>";

        // ... still other table data cells ...

    $display.append( _displayString );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:59:41.587

我不确定您的代码有什么问题，但您可以尝试生成元素而不是附加文本。我用这段代码进行了测试，它工作正常

```
<script>
    var dataArray=["test","testm2","Tasat3"];
        function append(){
            var td=document.createElement("td");
            var sel=document.createElement("select");
            var o=document.createElement("option");
            sel.appendChild(o);
            for (n in dataArray){
                o=document.createElement("option");
                o.value=dataArray[n];
                o.text=dataArray[n];
                if (n==1) o.selected=true;
                sel.appendChild(o);
            }
            td.appendChild(sel);

            document.getElementById("display").appendChild(td);
        }
        append();
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:53:37.323

事实证明，上面概述的代码对我描述的行为没有错。在它之后执行其他代码来重置表单输入。其他代码中的 jQuery 选择器写得太笼统了，并且在不应该的时候也选择了生成的选择字段。

感谢所有评论者。我最终重写了代码以使用 DOM 元素而不是生成字符串，这更容易阅读。万岁的意外副作用。

# joomla - 将“活动”类添加到 K2 内容模块项

> ID：14816483
> 
> 赞同：1
> 
> 时间：2013-02-11T16:33:13.640
> 
> 标签：joomla, joomla-k2

我已经搜索到互联网的尽头，找不到答案，而我有限的 php 知识使这个看似简单的任务变得非常困难。

该文件是第 22 行左右的 modules/mod_k2_content/templates/default/default.php

这是代码：

```
<li id="" class="<?php echo ($key%2) ? "odd" : "even";  if(count($items)==$key+1) echo ' lastItem'; ?>"> 
```

**如果**li 是我当前正在查看的页面，我只需在类区域中添加一个“活动” ，以便使用 CSS 突出显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:58:57.933

您应该能够检查标准的 joomla 路由变量来进行一些检查。我不经常使用 K2，因此您可能必须使用这些值才能使其在您的情况下起作用：

```
$jinput = JFactory::getApplication()->input;

$option = $jinput->get('option');
$view = $jinput->get('view');
$id = $jinput->get('id'); 
```

然后，我会将这些值与链接中的项目进行比较，这些项目可能直接在您包含的代码之后的代码中。如果所有三个都匹配，那么您就在该页面上！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:05:39.180

大卫的回答是正确的，您需要检查选项、视图和 ID，然后将类添加到 li 这里是其余代码 -

```
<?php
    $jinput = JFactory::getApplication()->input;
    $option = $jinput->get('option');
    $view = $jinput->get('view');
    $id = $jinput->getInt('id'); ?>
    <?php foreach ($items as $key=>$item):  
        $liclass = '';
        if(($option=='com_k2') && ($view=='item') && ($id==$item->id)){
            $liclass = 'active ';
        });
        ?>
        <li class="<?php echo $liclass?><?php echo ($key%2) ? "odd" : "even"; if(count($items)==$key+1) echo ' lastItem'; ?>"> 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T19:39:28.790

这是正确的代码：

```
<?php $id = JRequest::getVar('id'); ?>
<li class="<?php echo ($key%2) ? "odd" : "even"; if(count($items)==$key+1) echo ' lastItem'; echo ($id == $item->id)?" active":""; ?>"> 
```

# .htaccess - Rewrite Rule 自定义索引文件 Drupal 安装

> ID：14816485
> 
> 赞同：0
> 
> 时间：2013-02-11T16:33:22.160
> 
> 标签：.htaccess, drupal, mod-rewrite, rewrite, directoryindex

这是我的 htaccess 文件中设置的 Drupal 的当前重写规则：

```
 RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteCond %{REQUEST_URI} !=/index.html
  RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

这很好用，但问题是我想要一个自定义页面，当人们浏览网站时会打开它。更详细：

www.company.com/ 应该打开 index.html 所有其他页面应该使用 Drupal 的默认重写规则。

我尝试编辑 DirectoryIndex，但随后所有页面都被重定向到 index.html。

```
DirectoryIndex index.html index.php 
```

我也尝试添加不同的重写规则，但我还没有运气。Htaccess 不是我最好的技能。

```
 RewriteCond %{REQUEST_URI} ^/$ [NC]
  RewriteRule ^/$ /index.html [L] 
```

可能会有一个简单的解决方案，但我不知道该怎么做。

有谁知道如何解决我的问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:53:35.307

尝试将 301 代码添加到规则中，这意味着永久移动。

```
RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteRule ^/$ /index.html [L,R=301] 
```

# android - 表布局资源未找到

> ID：14816488
> 
> 赞同：0
> 
> 时间：2013-02-11T16:33:40.450
> 
> 标签：android, tablelayout

安卓 2.3.3

我有一个表，其中有 12 列和任意数量的行。我是第一次使用 TableLayout。我看过几个例子并写了一个代码（不多）。只是为了动态填充一行 12 列。但是我遇到了一个例外..这是详细信息..

例外 ：：：

```
02-11 21:57:21.569: E/AndroidRuntime(465): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.xx.xxx/com.xx.xxx.Portfolio}: android.content.res.Resources$NotFoundException: Resource ID #0x7f070037 type #0x12 is not valid
02-11 21:57:21.569: E/AndroidRuntime(465):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-11 21:57:21.569: E/AndroidRuntime(465):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-11 21:57:21.569: E/AndroidRuntime(465):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-11 21:57:21.569: E/AndroidRuntime(465):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-11 21:57:21.569: E/AndroidRuntime(465):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-11 21:57:21.569: E/AndroidRuntime(465):  at android.os.Looper.loop(Looper.java:123)
02-11 21:57:21.569: E/AndroidRuntime(465):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-11 21:57:21.569: E/AndroidRuntime(465):  at java.lang.reflect.Method.invokeNative(Native Method)
02-11 21:57:21.569: E/AndroidRuntime(465):  at java.lang.reflect.Method.invoke(Method.java:507)
02-11 21:57:21.569: E/AndroidRuntime(465):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-11 21:57:21.569: E/AndroidRuntime(465):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-11 21:57:21.569: E/AndroidRuntime(465):  at dalvik.system.NativeStart.main(Native Method)
02-11 21:57:21.569: E/AndroidRuntime(465): Caused by: android.content.res.Resources$NotFoundException: Resource ID #0x7f070037 type #0x12 is not valid
02-11 21:57:21.569: E/AndroidRuntime(465):  at android.content.res.Resources.loadXmlResourceParser(Resources.java:1874)
02-11 21:57:21.569: E/AndroidRuntime(465):  at android.content.res.Resources.getLayout(Resources.java:731)
02-11 21:57:21.569: E/AndroidRuntime(465):  at android.view.LayoutInflater.inflate(LayoutInflater.java:318)
02-11 21:57:21.569: E/AndroidRuntime(465):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
02-11 21:57:21.569: E/AndroidRuntime(465):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
02-11 21:57:21.569: E/AndroidRuntime(465):  at android.app.Activity.setContentView(Activity.java:1657)
02-11 21:57:21.569: E/AndroidRuntime(465):  at com.xx.xxx.Portfolio.dummy(Portfolio.java:47)
02-11 21:57:21.569: E/AndroidRuntime(465):  at com.xx.xxx.Portfolio.onCreate(Portfolio.java:28)
02-11 21:57:21.569: E/AndroidRuntime(465):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-11 21:57:21.569: E/AndroidRuntime(465):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-11 21:57:21.569: E/AndroidRuntime(465):  ... 11 more 
```

活动 ：：：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:orientation="vertical">

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <HorizontalScrollView
                android:id="@+id/horizontalScrollView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal" >

                    <TableLayout
                        android:id="@+id/tableLayoutPorfolio"
                        android:layout_width="wrap_content"
                        android:layout_height="match_parent" >

                    </TableLayout>

                </LinearLayout>
            </HorizontalScrollView>

        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

Java 文件 :::

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;

public class Portfolio extends Activity{

    TableLayout tblPorfolio;
    TableRow trScript;
    TextView txtV;

    String[] dummy = {"1","12345","XYZABC","10000","10000","10000","10000","10000","10000","10000","10000","10000","10000"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_portfolio);

        tblPorfolio = (TableLayout) findViewById(R.id.tableLayoutPorfolio);

        trScript = new TableRow(this);

        dummy();

    }

    private void dummy() {
        // TODO Auto-generated method stub

        int i = 0;
        txtV = new TextView(this);
        while(i < dummy.length)
        {

            txtV.setText(dummy[i]);
            trScript.addView(txtV);

            i++;
        }

        tblPorfolio.addView(trScript);
        setContentView(R.id.tableLayoutPorfolio);
    }
} 
```

我必须在一行中显示 12 列和一些 N 行。所有这些值都将从数据库中检索并填充。

有人可以告诉我，我做错了什么（如果我一开始做对了）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:44:47.650

删除这一行：

```
setContentView(R.id.tableLayoutPorfolio); 
```

因为如果你想做这样的事情，你需要创建一个 layoutinflater 并在你可以将它设置为 setContentView(view) 的参数之前对其进行充气。

# php - 在 Mac 上使用 Asp.net MVC 后端开发网站前端

> ID：14816496
> 
> 赞同：1
> 
> 时间：2013-02-11T16:33:57.203
> 
> 标签：php, asp.net, web-applications

我是一名在 Windows 上使用 Visual Studio 的 Asp.net 后端开发人员，我与一个都使用 Mac 的前端团队合作。我正在尝试锻炼我们一起工作的最佳方式，而不必重复将前端集成到 Asp.net 站点中。即手动将前端更改添加到 *.csHTML 视图中

我提议……

*   完全放弃使用 Asp.net MVC Views，让前端团队将网页构建为普通的旧 *.htm 文件，就像静态网站构建一样

*   从前端到后端的任何通信都是通过 Ajax 调用完成的。因此，当他们在 Mac 上开发时，他们可以将 Ajax 调用指向 Windows 机器上的后端。这将实质上使 Asp.net 站点只是一个 Web 服务站点。

*   任何需要从后端拉到前端的配置设置都是通过 Ajax 调用完成的。

注意-我们的网站将只支持启用 javascript 的浏览器（我知道这并不理想，但这就是我所处的情况）。

以这种方式开发 Asp.net 站点是否有任何明显的问题？我

随着前端变得越来越丰富和 ajax 越来越重，我感觉这是 Web 开发的新趋势。

我想这不是 Asp.net 特定的问题，因为它可以应用于 Web 语言，例如 PHP。

# ruby - 如何阻止 Padrino 将已编译的 SASS 放入我的 public/ 目录？还是我应该？

> ID：14816499
> 
> 赞同：4
> 
> 时间：2013-02-11T16:34:00.593
> 
> 标签：ruby, sinatra, padrino

我正在玩 Padrino，目前正在尝试一个非常小的站点，没有 DB，app/ 目录下只有几个 HAML 和 SASS 文件。

我注意到，每次我渲染一个链接到 .sass 文件中定义的样式表的页面时，它都会将样式表编译为 .css 并将其存储在 public/ 下。

这一切都很好，但我也有一些静态资产存储在 public/ 中，包括图像和其他一些手写的 .css 文件。

这意味着我的 public/ 目录变成了我放在那里的东西和 Padrino 编译的东西的混合。因此，查看那里会显示一堆 .css 文件，其中一些是已编译的 .sass 文件，其中一些是我实际的主要静态资产。这令人困惑。

有没有办法可以阻止 Padrino（或 Sinatra，或 Rack，或其他正在做的事情）在开发过程中保存这些编译文件，并保持我的公共/干净？

或者，有人可以解释为什么我要求的是一个坏主意/设计/我应该学会爱它吗？:-)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:38:20.513

使用 padrino-sprockets gems 我还想将默认的 /public/stylesheets 目录更改为 /assets/stylesheets sprockets 拾取它们的位置。我发现使用 -c sass 选项生成的我的 padrino 项目有一个 /lib/sass_plugin.rb 文件，其中包含以下内容：

```
# Enables support for SASS template reloading for rack.
# Store SASS files by default within 'app/stylesheets/sass'
# See http://nex-3.com/posts/88-sass-supports-rack for more details.

module SassInitializer
  def self.registered(app)
    require 'sass/plugin/rack'
    Sass::Plugin.options[:template_location] = File.join(Padrino.root, "app/stylesheets")
    Sass::Plugin.options[:css_location] = File.join(Padrino.root, "public/stylesheets")
    app.use Sass::Plugin::Rack
  end
end 
```

编辑 :css_location 路径并重新启动 Padrino 就成功了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:31:04.553

我不知道如何为 Padrino 设置 SASS 设置，我看了看也找不到任何有用的东西。我也会对以这种方式运行它感到有点紧张，它很容易让人感到困惑和无益，如果资产名称发生冲突怎么办？

您可以做的*不是*通过 Padrino 添加 SASS，然后通过`--watch`交换机或通过类似[Guard](https://github.com/guard/guard)之类的东西自己运行它。这样，您还可以在公共目录（images/css/js 等）中指定不同的子文件夹，这就是我所做的（尽管这确实意味着您需要记住在描述链接时将子文件夹添加为路径的一部分）。该应用程序甚至不需要知道您正在使用 SASS，并且预编译，当它如此简单时，肯定比您目前拥有的那种按需编译（IMO）更好。

您可以尝试通过[Padrino 邮件列表](https://groups.google.com/forum/?fromgroups#!forum/padrino)获取有关设置的帮助。

# c# - 使用 WebBrowser 下载提示文件，同时保持登录会话

> ID：14816501
> 
> 赞同：0
> 
> 时间：2013-02-11T16:34:05.810
> 
> 标签：c#, iframe, browser

概述：
我正在使用 Visual Studios 的 WebBrowser 构建一个应用程序，该应用程序需要在登录到站点后下载一个文件。

最初我认为事件没有触发，但它们确实触发了。实际问题是在保留会话 cookie 的同时下载文件。最初我试图在 WebBrowser 的导航事件中使用 WebClient 下载文件。

问题是该站点有一个 iframe，它使用该 iframe 发布数据以创建下载对话框。

所以基本上是下载 URL，加载一个页面，然后在大约 5 秒左右后，它将运行一些带有会话 cookie 和其他数据的 javascript，并发布到一个下载 URL，该 URL 将在页面中的 iframe 内触发，然后将提示用户下载文件。

如何进入正常的网络浏览器下载？我可以覆盖提示的出现方式吗？而不是提示用户，我可以设置一个路径到我想要存储文件的位置，以及文件的名称。

# javascript - 在我的第一页 100% 完成加载后，如何为后续页面加载图像？

> ID：14816502
> 
> 赞同：0
> 
> 时间：2013-02-11T16:34:13.243
> 
> 标签：javascript, html, css

我的网站有一个启动页面，内容非常少，而且几乎立即出现。

用户登录后，他们会看到一个加载 jQuery、一些 javascript 和一些图像的页面。为了让第二个屏幕更快地出现，我想在第一个屏幕上预加载一些图像，但在所有内容出现后执行此操作，以免以任何方式减慢屏幕速度。

有没有办法可以做这个预加载。也许是 javascript（但不是 jQuery）。我只是想确保下面的所有图片都是在其他所有内容之后下载的？

```
document-globe.png
control-000-small.png
home.png
folder-open.png
arbo-points-v-end.gif
arbo-points-v.gif
breadcrumb-sep.png 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:37:55.837

目前尚不清楚您要做什么。您可以执行以下操作：

1.  您可以在启动页面中侦听该`window.onload`事件，该事件表示启动页面的 HTML 中指定的所有资源现在都已加载。然后，您可以预加载将在其他地方使用的图像，稍后在此页面中使用动态 javascript 或在后续页面中。为其他页面预加载只会导致图像位于这些页面的浏览器缓存中（这将加快它们的加载速度）。

2.  您可以从 HTML 中取出图像并通过 javascript 插入它们。如果这样做，您可以让 HTML 中的图像先加载，然后使用上述`window.onload`事件，然后您可以加载第二组图像并将它们插入页面中。这是优先考虑哪些图像首先/何时加载的一种方法。

3.  您可以将 onload 处理程序附加到页面中的七个特定图像并使用这些 onload 处理程序中的代码，您可以知道这七个特定图像现在何时加载，然后在您的 javascript 代码中执行其他操作（例如开始加载或预加载其他图片）。因为在您的 HTML 中指定的图像在任何 javascript 可以附加事件处理程序之前开始加载，您必须在实际 HTML 中指定这些类型的 onload 处理程序，以便它们立即生效。

您不能在 HTML 中指定 N 个图像，然后神奇地告诉浏览器先加载其中的七个，然后再加载其他任何一个。浏览器/HTML 没有这种能力。

# javascript - 测量可见屏幕分辨率

> ID：14816507
> 
> 赞同：1
> 
> 时间：2013-02-11T16:34:29.873
> 
> 标签：javascript, html, css, screen-resolution

考虑这种情况 - 我正在开发用于电视的 Web 应用程序，它们将始终全屏显示。您可能知道也可能不知道，每台电视都有不同的“安全区域”，因为大多数电视会在一侧或两侧切断一定量。我想使用一个显示某种视觉标尺的网页，以便我可以轻松地看到电视的“可见”屏幕，找到这个“安全区域”。像这样的网页是否存在于某个地方？

如果没有，什么是一种简单的方法（我猜是javascript）来绘制一个可用于查找“安全区域”的屏幕标尺？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:40:05.663

在新显示器上，电视安全区域距屏幕边缘约 5%。

当我做涉及这种分辨率的项目时，我只需在主容器上添加一个通用的 5% 边距。

并非所有显示器都具有相同的安全区域……但对于所有现代人来说，5% 就足够了。

* * *

编辑：

看看这个：[http ://dev.opera.com/articles/view/creating-web-content-for-tv/#safe-areas](http://dev.opera.com/articles/view/creating-web-content-for-tv/#safe-areas)

它准确地说明了我之前写的内容。

# character-encoding - 用于从 SQL 开发人员导出的字符集

> ID：14816511
> 
> 赞同：0
> 
> 时间：2013-02-11T16:34:38.133
> 
> 标签：character-encoding, oracle-sqldeveloper

从 Oracle SQL Developer 导出时，我主要使用“Macroman”，但是当我想进一步使用 Python 操作数据或将 CSV 文件导入 Excel 时，这会导致一些问题。由于某些字符是挪威字符和特殊符号，我经常不得不通过查找替换或其他繁琐的方法来替换它们。我尝试过选择我通常更喜欢的“unicode”和“utf-8”，但没有任何好的效果。在 python 中，我最终得到如下符号：'\xc3\xb8r'，而在 Excel 中'¢'。

是否有一个好的经验法则可以做到这一点？哪种编码最普遍，哪种编码最适合 SQL Developer？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T13:32:24.700

问题不是在 SQL Developer 中，而是在 Excel 中。我最终使用 SQL Developer 使用 UTF-8 导出数据集，然后使用 Google Refine 将其转换为 excel。

# javascript - JQuery $.post() 是否不适用于 document.onbeforeunload 事件？

> ID：14816512
> 
> 赞同：1
> 
> 时间：2013-02-11T16:34:39.900
> 
> 标签：javascript, dom, onbeforeunload, jquery-post

如果用户尝试离开页面而不提交表单，我正在尝试使用 $.post 将表单数据发送到服务器端脚本以保存。我正在使用附加到保存按钮的相同功能，并将 setInterval 设置为每 2 分钟一次，它工作正常。但是当我将该函数附加到 document.onbeforeunload 时，它不起作用。在萤火虫中，我看到请求正在发送，但看起来它在返回状态代码并且页面继续卸载之前被停止。我对 Javascript 和 Jquery 还是很陌生，我不确定 $.post 是否可能是在 onbeforeunload 事件上不起作用的函数之一。如果这是真的，如果用户试图离开页面而不保存，还有其他方法可以发送数据吗？

```
This is the function I am calling from the onbeforeunload event:

           function ajaxSubmit(){
                var blogtitle = $("#title").val();
                var publishedstate = 0;
                var blogid = $("#blogID").val();
                var blogbody = CKEDITOR.instances['body'].getData();

                var postdata = {ajaxSubmit:true,title:blogtitle,body:blogbody,published:publishedstate,blog_id:blogid};
                $.post('ajaxblog.php',postdata,function(data){
                    $("#autosaveMessage").html(data);
                    $("#autosaveMessage").show();
                    setTimeout(function(){$("#autosaveMessage").hide();},5000);
                });
            } 
```

这就是我调用函数的方式：

```
 var post_clicked = false;
            $("#postButton").click(function(){
                post_clicked = true;
            });

            function leaveEditor(){
                if(post_clicked==false){
                    ajaxSubmit();
                }
                else{
                    //Do Nothing
                }
            }

window.onbeforeunload = leaveEditor; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:09:13.697

不，这是设计使然。如果一个页面可以`onbeforeunload`用来无限期地延迟浏览离开，以某种方式保持它的存在等等，那将是非常麻烦的。对于网络浏览器的用户来说，最重要的能力之一就是*离开*的能力。

只需使用字符串返回值——它的全部意义在于提醒用户他/她所做的更改将会丢失。就像在 SO :)

# git - Jenkins 从远程 Git 存储库签出问题

> ID：14816515
> 
> 赞同：0
> 
> 时间：2013-02-11T16:34:46.030
> 
> 标签：git, ssh, jenkins

我在 Windows 7 Pro 机器上安装了 Jenkins v1.500 以及 Git v1.8.1.msysgit.1

我们最近在远程 Linux 机器上安装了 Git v1.7.1，

SSH 已设置并在远程连接到 Git 机器时工作。

Jenkins 使用 git.exe 失败并出现以下错误；

```
Caused by: hudson.plugins.git.GitException: Command "git clone --progress -o origin ssh:///git@10.200.47.202:/home/git/vc_vnv.git D:\Jenkins\jobs\Compile_JBoss_Crawler\workspace" returned status code 128:
stdout: Cloning into 'D:\Jenkins\jobs\Compile_JBoss_Crawler\workspace'...

stderr: Using username "git-upload-pack '/git".
fatal: Could not read from remote repository. 
```

我注意到那里有一个额外的 /，如果我在没有额外 / 的情况下从 CMD 运行命令，我们就会得到 repo！

**有没有人知道额外“/”的原因，或者我该如何解决？**

我将不胜感激任何建议或提示！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:31:52.400

啊！此时 Jenkins 和 Git 正在合作！我似乎在为 SSH 使用腻子时遇到了问题。我读过 Git 打包的东西是有问题的，应该用 putty 代替它。但是，在删除指向 putty 的 GIT_SSH 环境变量后，作业又开始构建了！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-30T07:07:57.413

在我们的例子中，我们将服务器通过以太网和 wifi 连接到网络。

停用 WiFi 解决了这个问题，尽管以太网在网络/首选项 (Mac mini OS X) 下的优先级更高。

# html - 我们如何在我们的网站上显示日语（平假名）？

> ID：14816519
> 
> 赞同：1
> 
> 时间：2013-02-11T16:34:57.323
> 
> 标签：html, iis-7, coldfusion, windows-server-2008, sql-server-2012

我们正在我们的网站上举办一场向国际社会开放的比赛。我们的一小部分用户是日本人，他们要求能够使用平假名在我们的网站上发表评论。

目前，他们的评论显示为字符串?????? 问号。

我们使用的是运行 IIS 7 和 Coldfusion 10 的 Win 2008 服务器。存储评论的数据库（也显示为??????问号）是 SQL Server 2012。

该站点当前使用 UTF-8 字符集：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

不确定我需要在哪里进行更改。D B？CF？视窗？IIS？网站代码？有任何想法吗？

我发现了其他类似的问题，但它们通常与 WordPress、Joomla 或完全是日语的网站有关。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:40:10.737

您可能声称您使用的是 UTF-8，但您真的是这样吗？如果您的数据库、字符串（可能需要告知编程语言将字符串作为 UTF-8 处理）和实际输出编码不是 UTF-8，那么您将无法获得正确的结果。

然后是字体问题；许多字符并未包含在每种字体中，因此不适用于很多计算机。

也尝试将这样的标题设置为实际标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:26:03.207

排序规则与此无关，字体也没有（您的 unicode 数据正在进入数据库中）。所以...

您应该通过 JDBC 驱动程序之一而不是 ODBC 与您的数据库交谈。

您的数据库应该支持 unicode 并且您必须使用支持 unicode 的数据类型来保存数据（例如，对于 sql server，请使用“N”数据类型，如 Nvarchar 等）。

我假设您使用的是 cfqueryparam（毕竟它是面向用户的表单），因此您需要在 cfadmin 中为该数据源启用“启用高位 ASCII 字符”...选项（在高级菜单下）。

# facebook - 使用提要对话框示例 c# api 发布到朋友时间轴

> ID：14816520
> 
> 赞同：-1
> 
> 时间：2013-02-11T16:35:02.497
> 
> 标签：facebook, facebook-c#-sdk, friend, facebook-timeline

我正在尝试在我朋友的时间线上发布一些内容，但每次我尝试这样做时都会出现错误。我正在使用的代码如下。我想知道代码是否正确？因为它对我不起作用。你能帮我吗？

```
dynamic parameters = new ExpandoObject();
if (!string.IsNullOrEmpty(action.Post.PictureLocalSource))
{
     var pictureTracking = GetNextPhotoFromFolder(action.Post.PictureLocalSource);
     if (pictureTracking != null)
     {
         //  action.Post.Picture = pictureTracking.FBPictureRef; // org
         action.Post.Link = pictureTracking.FBPictureRef;
         action.Post.Picture = pictureTracking.TrackingFileName;
         parameters.type =  "";
      }
}
parameters.to = action.FacebookPostTargetID;
//parameters.Add("from", MyFacebookID);
parameters.message=action.Post.Message.Trim();
parameters.link = action.Post.Link;
parameters.picture = action.Post.Picture;
parameters.source = action.Post.Source;
parameters.name  = action.Post.Name;
string caption = action.Post.Caption;
if (caption.Length > 200)
    caption = caption.Substring(0, 200);
parameters.caption = caption.Trim(); // "Σχετικά με το asfame.gr";
parameters.description=action.Post.Description;
string feedtype = "";
if (action.Type == ActionType.Comments)
    feedtype = "comments";
else
    feedtype = "feed";
parameters.method = feedtype;
result = Client.Post(parameters); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:17:50.027

Facebook 从 2013 年 2 月 6 日起取消了在朋友墙上发帖的功能。在这里查看官方文档[http://developers.facebook.com/roadmap/completed-changes/](http://developers.facebook.com/roadmap/completed-changes/)在2013 年 2 月 6 日更改**通过 Graph API 删除发布到朋友墙的**小节下。希望能帮助到你。

# javascript - jQuery：动画到div的高度

> ID：14816524
> 
> 赞同：1
> 
> 时间：2013-02-11T16:35:07.683
> 
> 标签：javascript, jquery

我有这个功能：

```
function fixedFeeSize(i){
    var num1 = $('#num' + i);
    if (num1.hasClass("extended")) {
      num1.stop(true, true).animate({height: '59px'},500);
      num1.removeClass("extended");
    }else{
      var height = 0;
      num1.animate({height: '360px'},500);
      num1.addClass("extended");
    }
    return null;
} 
```

哪个扩展/收缩一个 div，但是我正在努力让它扩展到 div 的高度，因为每个 div（将有 10 个以上）将是不同的高度。

我试过`num1.animate({height: 'auto'},500);`了，但没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:42:44.057

这是你想要的效果吗？

```
jQuery(".menu a").mouseenter(function(){
    jQuery(this).stop().animate({
  height: 200, opacity: 0.5
}, 1000, "linear");
});
jQuery(".menu a").mouseleave(function(){
    jQuery(this).stop().animate({
  height: 18, opacity: 1
}, 1000, "linear");
}); 
```

这是一个jsfiddle：http: [//jsfiddle.net/kKAZx/1/](http://jsfiddle.net/kKAZx/1/)

如需进一步阅读，请查看 .animate 函数的完整文档：http: [//api.jquery.com/animate/](http://api.jquery.com/animate/)

您可以组合效果来制作各种奇妙的、符合标准的效果。

# jquery - jQuery .show('slide', { direction: 'right' }) 不起作用，但 .show('slide') 可以

> ID：14816525
> 
> 赞同：6
> 
> 时间：2013-02-11T16:35:08.927
> 
> 标签：jquery, show, slide

我在顶部菜单（ListItems）的开头插入一个菜单选项并使用

```
$('#newMenuItem').show('slide'); 
```

成功地。但是，我不喜欢它从左上角滑入的方式，所以我将其更改为

```
$('#newMenuItem').show('slide', { direction: 'right' }); 
```

不幸的是，一旦我改变了它，我就再也得不到新的东西了。实际上，不再执行低于上述行的代码。

有一个明显的原因为什么这不起作用？我正在使用 Visual Studio 2012 附带的 jquery-1.7.1。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-11T16:55:58.320

向特定方向滑动的效果并没有与 vanilla jQuery 捆绑在一起，而是[jQuery UI](http://jqueryui.com/)的一部分；在您的项目中包含 jQuery UI（除了 jQuery）应该可以使用它。[另请参阅此处](http://docs.jquery.com/UI/Effects/Slide)的效果文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-11T02:36:54.910

你可以试试`$('#newMenuItem').slideDown()`；

# javascript - 从 Youtube 页面获取嵌入代码

> ID：14816528
> 
> 赞同：0
> 
> 时间：2013-02-11T16:35:31.817
> 
> 标签：javascript, html, windows-8, youtube

我正在使用一个返回 youtube 页面 HTML 的链接。从这里我想获取视频的 id 或整个 youtube 嵌入代码（因为我可以从另一个制作一个）

我现在的代码不起作用，我不确定为什么，但我只是第一次学习 JS 的学生。然后将在 Windows 8 应用程序中使用该代码。

```
//This Contains the HTML DATA from the website.
 var str = response.responseText;
var str1 = str.search("http://www.youtube.com/embed/");
var str2 = str.search("\" frameborder=\"0");
var str3 = str2 - str1;
var ans = str.substr(str1 + 29, str3);
document.getElementById("frame1").src = "";
var n = str.split("=");
var url = "http://www.youtube.com/embed/" + n[1];
document.getElementById("frame1").src = url; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:39:59.303

同源策略可防止主机页面看到来自不同域的 iframe 的内容。这是浏览器内置的安全功能，可防止跨域脚本攻击。

# r - 寻找两个变量之间的相关性

> ID：14816529
> 
> 赞同：0
> 
> 时间：2013-02-11T16:35:36.310
> 
> 标签：r, correlation

我怎么知道以下变量是相关的（通常是任意两个变量）？

下面，x 和 y 之间存在明显的关系，但是，“cor”函数给了我“0”。R中是否有任何函数可以检测线性和非线性关系？

```
> x <- c(-2, -1, 0, 1, 2)
> y <- c(4,   1, 0, 1, 4)
> 
> cor(x,y)
[1] 0
> 
```

编辑：尽管顶级统计学家对该算法提出了许多批评，但我仍在考虑使用 MIC/MINE 算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:59:42.400

看看我的[（](http://www.exploredata.net/) 1）。它们还为 R 提供了一个包装器。

(1) Reshef、DN、YA Reshef、HK Finucane、SR Grossman、G. McVean、PJ Turnbaugh、ES Lander、M. Mitzenmacher 和 PC Sabeti。“检测大数据集中的新关联。” 科学 334，没有。6062（2011）：1518–1524。

# javascript - 引导模式关闭时，Firefox 18 中的 Transitionend 事件未触发

> ID：14816530
> 
> 赞同：1
> 
> 时间：2013-02-11T16:35:37.780
> 
> 标签：javascript, jquery, css, twitter-bootstrap, transition

我在 Firefox 上遇到此问题，在我的网站上，单击“发布您的活动”按钮，然后关闭模式。正如您所看到的模态背景，它仍然存在并阻止用户交互。这是 div

```
<div class="modal-backdrop fade"></div> 
```

我读过firefox有一些过渡问题，但我发现主要是CSS问题/修复，而这看起来更像是一个js错误。实际上问题是ff永远不会触发transitionend事件。

有什么建议吗？

# javascript - 用于选择 DOM 元素的非特定 JS

> ID：14816534
> 
> 赞同：0
> 
> 时间：2013-02-11T16:35:42.103
> 
> 标签：javascript, jquery, html, dom

我通过 cors 从 AJAX 获取 HTML 响应，响应是一个表格。每个类别都有其标题和子元素。标题名称变化很大，将来可能会发生变化。每个标题中的子元素几乎每天都在变化，但 DOM 结构不会。

有没有办法我可以摆脱这个 if 语句并用不是特定元素的代码替换它？选择我不知道的 DOM 元素的某种方式？

**相关 JS**

```
 classifiedFilter: function( response ) {
            var Classified = {
                ClaAdministrative: [],
                Paraeducator: [],
                Clerical: [],
                Custodial: [],
                NonRep: [],
                Maintenance: [],
                ClaSubstitute: [],
                Coaching: []
            },
                response = $(response).find("table tbody tr td").html();
            $(response).find("#isHeadType").remove();
            $(response).find("font:contains(Open to all)").parent().parent().remove();

            //Filter each span title and classify sub items
            $(response).find("span").parents("tr").each( function() {

                //Find categories and separate by class
                var rowtext = $(this).find("span").text(),
                    position = "";

                position = rowtext.replace(/-/gi, "").replace(/\s/g, "");

                $(this).nextAll("tr").addClass(position);

                //Push content into Classified
                ((position === "Administrative") ? $(this).nextUntil(".Paraeducator").each( function() {
                    Classified.ClaAdministrative.push( $.trim( "<tr>" + $(this).html() + "</tr>" ) );
                }) :
                ((position === "Paraeducator") ? $(this).nextUntil(".Clerical").each( function() {
                    Classified.Paraeducator.push( $.trim( "<tr>" + $(this).html() + "</tr>" ) );
                }) :
                ((position === "Clerical") ? $(this).nextUntil(".Custodial").each( function() {
                    Classified.Clerical.push( $.trim( "<tr>" + $(this).html() + "</tr>" ) );
                }) :
                ((position === "Custodial") ? $(this).nextUntil(".NonRep").each( function() {
                    Classified.Custodial.push( $.trim( "<tr>" + $(this).html() + "</tr>" ) );
                }) :
                ((position === "NonRep") ? $(this).nextUntil(".Maintenance").each( function() {
                    Classified.NonRep.push( $.trim( "<tr>" + $(this).html() + "</tr>" ) );
                }) :
                ((position === "Maintenance") ? $(this).nextUntil(".Substitute").each( function() {
                    Classified.Maintenance.push( $.trim( "<tr>" + $(this).html() + "</tr>" ) );
                }) :
                ((position === "Substitute") ? $(this).nextUntil(".Coaching").each( function() {
                    Classified.ClaSubstitute.push( $.trim( "<tr>" + $(this).html() + "</tr>" ) );
                }) :
                ((position === "Coaching") ? $(this).nextAll().each( function() {
                    Classified.Coaching.push( $.trim( "<tr>" + $(this).html() + "</tr>" ) );
                }) : [] ) ) ) ) ) ) ) );
            });

            //remove title from array
            Certificated.Elementary.shift();
            Certificated.MiddleSchool.shift();
            Certificated.HighSchool.shift();
            Certificated.K12.shift();
            Certificated.Substitute.shift();
    } 
```

**总结 HTML GET 响应**（为视觉辅助添加了空格）

```
 <table border="0" cellspacing="0" cellpadding="0" style="MARGIN-TOP: 10px;">
    <tr>
        <td>
            <font class="HeadTitle">External Positions: Open to all applicants.</font><br>
        </td>
    </tr>

        <tr>
            <td height="20" nowrap="nowrap">
                <i><span id="ExternalJobs__ctl1_BargainGroup" class="BodyText">Administrative</span></i>
                <br/><br/>
            </td>
        </tr>

                <tr>
                    <td nowrap="nowrap" style="padding-left:20px;" class="BodyText">
                          <b><a href='jobs.aspx?id=3660&type=2&int=External'>Administrative Assistant I, Health Tech-Leave Replacement-2 hours  -   ME1214</a></b>
                    </td>
                </tr>

        <tr>
            <td height="20" nowrap="nowrap">
                <i><span id="ExternalJobs__ctl2_BargainGroup" class="BodyText">Paraeducator</span></i>
                <br/><br/>
            </td>
        </tr>

                <tr>
                    <td nowrap="nowrap" style="padding-left:20px;" class="BodyText">
                          <b><a href='jobs.aspx?id=3544&type=2&int=External'>Paraeducator, SpEd IP/ELL-6.5hours -   MC1223</a></b>
                    </td>
                </tr>

                <tr>
                    <td nowrap="nowrap" style="padding-left:20px;" class="BodyText">
                          <b><a href='jobs.aspx?id=3603&type=2&int=External'>Special Ed Paraeducator, School Adjustment Program (SA-)-6.5 hours -   MK1215</a></b>
                    </td>
                </tr>

        <tr>
            <td height="20" nowrap="nowrap">
                <i><span id="ExternalJobs__ctl3_BargainGroup" class="BodyText">Clerical</span></i>
                <br/><br/>
            </td>
        </tr>               
                <tr>
                    <td nowrap="nowrap" style="padding-left:20px;" class="BodyText">
                          <b><a href='jobs.aspx?id=3481&type=2&int=External'>Admin Assistant IV-8 hours -   IT1209</a></b>
                    </td>
                </tr>   

        <tr>
            <td height="20" nowrap="nowrap">
                <i><span id="ExternalJobs__ctl5_BargainGroup" class="BodyText">Non-Rep</span></i>
                <br/><br/>
            </td>
        </tr>

                <tr>
                    <td nowrap="nowrap" style="padding-left:20px;" class="BodyText">
                          <b><a href='jobs.aspx?id=2732&type=2&int=External'>Licensed Practical Nurse (Pool position)   -   2012LPNPool</a></b>
                    </td>
                </tr>

                <tr>
                    <td nowrap="nowrap" style="padding-left:20px;" class="BodyText">
                          <b><a href='jobs.aspx?id=3472&type=2&int=External'>Certified Occupational/Physical Therapist Assistant- POOL  -   COTA2012Pool</a></b>
                    </td>
                </tr>

        <tr>
            <td height="20" nowrap="nowrap">
                <i><span id="ExternalJobs__ctl7_BargainGroup" class="BodyText">Substitute</span></i>
                <br/><br/>
            </td>
        </tr>

                <tr>
                    <td nowrap="nowrap" style="padding-left:20px;" class="BodyText">
                          <b><a href='jobs.aspx?id=26&type=2&int=External'>Substitute Food Service Helpers  -   FSSub</a></b>
                    </td>
                </tr>

                <tr>
                    <td nowrap="nowrap" style="padding-left:20px;" class="BodyText">
                          <b><a href='jobs.aspx?id=28&type=2&int=External'>Substitute Custodians    -   MTSub</a></b>
                    </td>
                </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:51:37.967

这似乎等同于您当前代码的核心：

```
$(this).each( function() {
    Classified[position].push( $.trim( "<tr>" + $(this).html() + "</tr>" ) );
}); 
```

[编辑]我看不到你在哪里声明你的数组，你可能真的需要这个：

```
$(this).each( function() {
    Classified[position]=Classified[position]||[];
    Classified[position].push( $.trim( "<tr>" + $(this).html() + "</tr>" ) );
}); 
```

[更新] 根据评论，此循环在达到跨度时更新**位置：**

```
var position = "";
$(response).find("tr").each( function() {
    var currentTR=$(this);
    // catch span if any
    var rowtext = currentTR.find("span").text().replace(/-/gi, "").replace(/\s/g, "");
    if (rowtext) {
        position = rowtext;
        Classified[position]=[];
    }
    // Collect rows
    Classified[position].push( "<tr>" + $.trim($(this).html()) + "</tr>" );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:42:27.217

我认为，您可以在 find 函数中使用 CSS 类名而不是标签名。

# java - 在 Java 中编译期间预计算纹理

> ID：14816535
> 
> 赞同：0
> 
> 时间：2013-02-11T16:35:52.127
> 
> 标签：java, pre-compilation

我有一个生成纹理的[程序纹理](http://en.wikipedia.org/wiki/Procedural_texture)生成算法。纹理只是一个`BufferedImage`.

这个纹理基本上映射到 Java3D 中的一个对象。现在由于纹理在程序执行期间不会改变，我想在编译期间预先计算纹理，以便在执行期间使用预先计算的纹理。

如果纹理是在运行时生成的，则会导致程序启动延迟。

我的问题是，

是否可以在编译阶段本身预先计算纹理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:42:00.813

我不这么认为，但是您可以编写一个单独的 Java 程序来计算纹理并将 BufferedImages 保存到文件中，以供游戏 Java 程序读取。

由您决定节省的时间是否值得存储空间。

编辑补充：大多数游戏要么让你在纹理计算期间观看视频，要么告诉你他们正在计算纹理。还有人记得“[网状样条](http://en.wikipedia.org/wiki/SimCity_2000)”吗？

# maven - 如何在使用 maven 从 XSD 1.1 生成源时使用 Xerces

> ID：14816544
> 
> 赞同：2
> 
> 时间：2013-02-11T16:36:23.607
> 
> 标签：maven, xsd, xerces

我有一个带有断言标签的 XSD 文件。我读过 Xerces 支持带有这些标签的 XML Schema 1.1 草案。

如何在我的 Maven 构建中使用实际的 Xerces 版本，而不是标准的 Java 实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:05:01.940

使用 Xerces 版本的一种旧方法是添加这些参数。我不知道它是否仍然可以工作。

```
-Djavax.xml.parsers.SAXParserFactory=org.apache.xerces.jaxp.SAXParserFactoryImpl
-Djavax.xml.parsers.DocumentBuilderFactory=org.apache.xerces.jaxp.DocumentBuilderFactoryImpl
-Djavax.xml.parsers.SAXParser=org.apache.xerces.jaxp.SAXParserImpl 
```

# email - png 显示在浏览器中，但不显示在电子邮件客户端中

> ID：14816551
> 
> 赞同：-1
> 
> 时间：2013-02-11T16:36:31.697
> 
> 标签：email, png, rgb, adobe-illustrator

这是一个奇怪的问题，我以前没有遇到过。我在 AI 中为电子邮件模板创建了一个标题 img，并将其导出为 RGB png-8。当我在浏览器中查看模板时，它和电子邮件中的所有其他图像都显示得很好。但是当我将电子邮件发送到我的 Outlook 时，我创建的标题不会显示，即使所有其他图像（也是 png-8s）都会显示。我已经对照其他图像检查了新图像的颜色配置文件，它们是相同的。

有没有其他人遇到过这个问题？有没有专家从 AI 那里保存网络 ping 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:43:01.760

问题已解决。奇怪的缓存问题 - 图像驻留在不同的服务器上。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T02:22:45.767

确保您的图像是 RGB 而不是 CMYK。

# php - Wordpress 获取类别链接

> ID：14816552
> 
> 赞同：4
> 
> 时间：2013-02-11T16:36:44.043
> 
> 标签：php, wordpress

我想问一下如何获取每个有相关帖子的类别的链接。我只有一些只显示父类别的代码。任何帮助将非常感激。谢谢！

`<?php`

`$categories = get_categories();`

```
foreach ($categories as $cat){
   if($cat->parent < 1){
      echo $cat->cat_name ;
   }
} 
```

`?>`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-11T16:51:33.453

听起来你可能想要[get_category_link](http://codex.wordpress.org/Function_Reference/get_category_link) - 类似于

```
$categories = get_categories();
foreach ($categories as $cat) {
   $category_link = get_category_link($cat->cat_ID);
   echo '<a href="'.esc_url( $category_link ).'" title="'.esc_attr($cat->name).'">'.$cat->name.'</a>';
} 
```

应该为您打印出类别的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:12:38.817

根据[`Function Reference/get category link`](http://codex.wordpress.org/Function_Reference/get_category_link)

```
<?php get_category_link( $category_id ); ?> 
```

例子：

```
<?php
// Get the ID of a given category
$category_id = get_cat_ID( 'Category Name' );

// Get the URL of this category
$category_link = get_category_link( $category_id );
?>

<!-- Print a link to this category -->
<a href="<?php echo esc_url( $category_link ); ?>" title="Category Name">Category Name</a> 
```

# java - java命名空间冲突

> ID：14816554
> 
> 赞同：1
> 
> 时间：2013-02-11T16:36:47.630
> 
> 标签：java, namespaces, scope

我发现自己经常犯以下错误。

```
public class Foo{

  Bar bar;

  public void doSomething(){
    Bar bar = makeNewBar();
    // bla bla
  }

} 
```

错误是我想设置 Foo 的酒吧，而不是本地酒吧。即，我应该说`bar = makeNewBar()`，不是`Bar bar = makeNewBar()`。是否有编译器警告标志或可以检测到这样的“命名空间冲突”的东西？如果没有，有什么好的方法可以避免这种情况（除了不犯错误，这显然是最好的选择=p）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T16:39:56.200

这不是编译器的真正工作，但如果您隐藏变量，大多数 IDE 会警告您正确设置。

使用 Eclipse，转到`Preferences / Java / Compiler / Error/Warnings`并查找`Name shadowing and conflicts`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T16:39:15.193

你不能用

```
this.bar = makeNewBar(); 
```

（这也不会让课堂上的读者感到困惑......）

* * *

（或者）

此 URL 显示 Eclipse 可以配置为警告隐藏类成员的声明：

[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fpreferences%2Fjava%2Fcompiler%2Fref-preferences-errors-warnings.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fpreferences%2Fjava%2Fcompiler%2Fref-preferences-errors-warnings.htm)

请参阅“字段声明隐藏另一个字段或变量”部分

该文档指出此警告默认（在 ECLIPSE 中）为 IGNORE，因此您是对的，必须明确设置它。

# android - logcat 中的错误

> ID：14816556
> 
> 赞同：0
> 
> 时间：2013-02-11T16:36:58.643
> 
> 标签：android

每次我运行我的应用程序时，Null Pointer 都会在 logcat 上投射，我怎么知道错误在哪里？

这是最初的logcat错误我发现的错误是不存在这样的列我已经修复了它现在这是错误：

```
02-12 00:16:40.837: D/AndroidRuntime(360): Shutting down VM
02-12 00:16:40.837: W/dalvikvm(360): threadid=1: thread exiting with uncaught exception                (group=0x40015560)
02-12 00:16:40.868: E/AndroidRuntime(360): FATAL EXCEPTION: main
02-12 00:16:40.868: E/AndroidRuntime(360): java.lang.RuntimeException: Unable to start     activity ComponentInfo{com.example.database/com.example.database.AndroidSQLite}:     java.lang.NullPointerException
02-12 00:16:40.868: E/AndroidRuntime(360):  at   android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-12 00:16:40.868: E/AndroidRuntime(360):  at     android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-12 00:16:40.868: E/AndroidRuntime(360):  at     android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-12 00:16:40.868: E/AndroidRuntime(360):  at     android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-12 00:16:40.868: E/AndroidRuntime(360):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-12 00:16:40.868: E/AndroidRuntime(360):  at android.os.Looper.loop(Looper.java:123)
02-12 00:16:40.868: E/AndroidRuntime(360):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-12 00:16:40.868: E/AndroidRuntime(360):  at     java.lang.reflect.Method.invokeNative(Native Method)
02-12 00:16:40.868: E/AndroidRuntime(360):  at     java.lang.reflect.Method.invoke(Method.java:507)
02-12 00:16:40.868: E/AndroidRuntime(360):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-12 00:16:40.868: E/AndroidRuntime(360):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-12 00:16:40.868: E/AndroidRuntime(360):  at dalvik.system.NativeStart.main(Native     Method)
02-12 00:16:40.868: E/AndroidRuntime(360): Caused by: java.lang.NullPointerException
02-12 00:16:40.868: E/AndroidRuntime(360):  at     com.example.database.AndroidSQLite.onCreate(AndroidSQLite.java:58)
02-12 00:16:40.868: E/AndroidRuntime(360):  at     android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-12 00:16:40.868: E/AndroidRuntime(360):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-12 00:16:40.868: E/AndroidRuntime(360):  ... 11 more
02-12 00:16:42.977: I/Process(360): Sending signal. PID: 360 SIG: 9 
```

**这是我的代码：**

```
 package com.example.database;

     import android.content.ContentValues;
     import android.content.Context;
     import android.database.Cursor;
     import android.database.sqlite.SQLiteDatabase;
     import android.database.sqlite.SQLiteOpenHelper;
     import android.database.sqlite.SQLiteDatabase.CursorFactory;

     public class SQLiteAdapter {

      public static final String MYDATABASE_NAME = "SCORING";
      public static final String MYDATABASE_TABLE = "SCORING_TABLE";
      public static final int MYDATABASE_VERSION = 3;
      public static final String KEY_ID = "_id";
      public static final String KEY_CONTENT1 = "Content1";
      public static final String KEY_CONTENT2 = "Content2";
      public static final String KEY_CONTENT3 = "Content3";

      //create table SCORING (ID integer primary key, Content text not null);
      private static final String SCRIPT_CREATE_DATABASE =
       "create table " + MYDATABASE_TABLE + " ("
       + KEY_ID + " integer primary key autoincrement, "
       + KEY_CONTENT1 + " text not null, "
       + KEY_CONTENT2 + " text not null, "
       + KEY_CONTENT3 + "text not null);";

      private SQLiteHelper sqLiteHelper;
      private SQLiteDatabase sqLiteDatabase;

      private Context context;

      public SQLiteAdapter(Context c){
       context = c;
      }

      public SQLiteAdapter openToRead() throws android.database.SQLException {
       sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null,                                  MYDATABASE_VERSION);
          sqLiteDatabase = sqLiteHelper.getReadableDatabase();
        return this; 
            }

       public SQLiteAdapter openToWrite() throws android.database.SQLException {
        sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null,             MYDATABASE_VERSION);
        sqLiteDatabase = sqLiteHelper.getWritableDatabase();
        return this; 
       }

       public void close(){
        sqLiteHelper.close();
       }

       public long insert(String content1, String content2, String content3){          

        ContentValues contentValues = new ContentValues();
        contentValues.put(KEY_CONTENT1, content1);
        contentValues.put(KEY_CONTENT2, content2);
        contentValues.put(KEY_CONTENT3, content3);
        return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);
       }

       public int deleteAll(){
        return sqLiteDatabase.delete(MYDATABASE_TABLE, null, null);
       }

       public Cursor queueAll(){
        String[] columns = new String[]{KEY_ID, KEY_CONTENT1, KEY_CONTENT2,    KEY_CONTENT3};
        Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns,
          null, null, null, null, null);

        return cursor;
       }

       public class SQLiteHelper extends SQLiteOpenHelper {

        public SQLiteHelper(Context context, String name,
          CursorFactory factory, int version) {
         super(context, name, factory, version);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
         // TODO Auto-generated method stub
         db.execSQL(SCRIPT_CREATE_DATABASE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
         // TODO Auto-generated method stub
        // If you need to add a column
    if (newVersion > oldVersion) {
        db.execSQL("ALTER TABLE SCORING_TABLE ADD COLUMN Content4 TEXT");
    }
        }
       } 
      } 
```

现在我在这部分遇到了第二个错误

```
02-12 00:54:03.516: D/AndroidRuntime(359): Shutting down VM
02-12 00:54:03.516: W/dalvikvm(359): threadid=1: thread exiting with uncaught exception     (group=0x40015560)
02-12 00:54:03.546: E/AndroidRuntime(359): FATAL EXCEPTION: main
02-12 00:54:03.546: E/AndroidRuntime(359): java.lang.ArrayIndexOutOfBoundsException
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.widget.SimpleCursorAdapter.bindView(SimpleCursorAdapter.java:130)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.widget.CursorAdapter.getView(CursorAdapter.java:186)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.widget.AbsListView.obtainView(AbsListView.java:1430)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.widget.ListView.makeAndAddView(ListView.java:1745)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.widget.ListView.fillDown(ListView.java:670)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.widget.ListView.fillFromTop(ListView.java:727)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.widget.ListView.layoutChildren(ListView.java:1584)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.widget.AbsListView.onLayout(AbsListView.java:1260)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.view.View.layout(View.java:7175)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.view.View.layout(View.java:7175)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.view.View.layout(View.java:7175)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.view.View.layout(View.java:7175)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.view.View.layout(View.java:7175)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1140)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.os.Looper.loop(Looper.java:123)
02-12 00:54:03.546: E/AndroidRuntime(359):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-12 00:54:03.546: E/AndroidRuntime(359):  at java.lang.reflect.Method.invokeNative(Native Method)
02-12 00:54:03.546: E/AndroidRuntime(359):  at     java.lang.reflect.Method.invoke(Method.java:507)
02-12 00:54:03.546: E/AndroidRuntime(359):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-12 00:54:03.546: E/AndroidRuntime(359):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-12 00:54:03.546: E/AndroidRuntime(359):  at dalvik.system.NativeStart.main(Native Method)
02-12 00:54:05.646: I/Process(359): Sending signal. PID: 359 SIG: 9 
```

及其类：

```
 package com.example.database;

    import com.example.database.R;
    import android.app.Activity;
    import android.content.Intent;
    import android.database.Cursor;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.ListView;
    import android.widget.SimpleCursorAdapter;
    import android.widget.TextView;
    import android.widget.Toast;

    public class AndroidSQLite extends Activity {

     EditText  inputContent2;
     TextView textView1, textView2;
     Button buttonAdd, buttonDeleteAll;

     private SQLiteAdapter mySQLiteAdapter;
     ListView listContent;

     SimpleCursorAdapter cursorAdapter;
     Cursor cursor;

       /** Called when the activity is first created. */
       @Override
       public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);
           setContentView(R.layout.main);

           textView1 = (TextView)findViewById(R.id.textView1);
           textView2 = (TextView)findViewById(R.id.textView2);
           inputContent2 = (EditText)findViewById(R.id.content2);
           buttonAdd = (Button)findViewById(R.id.add);
           buttonDeleteAll = (Button)findViewById(R.id.deleteall);
          listContent = (ListView)findViewById(R.id.contentlist);

           mySQLiteAdapter = new SQLiteAdapter(this);
           mySQLiteAdapter.openToWrite();

           cursor = mySQLiteAdapter.queueAll();
           String[] from = new String[]{SQLiteAdapter.KEY_ID, SQLiteAdapter.KEY_CONTENT1,         SQLiteAdapter.KEY_CONTENT2};
           int[] to = new int[]{R.id.id, R.id.text1, R.id.text2, R.id.text3};
           cursorAdapter =
            new SimpleCursorAdapter(this, R.layout.row, cursor, from, to);
           listContent.setAdapter(cursorAdapter);

           buttonAdd.setOnClickListener(buttonAddOnClickListener);
           buttonDeleteAll.setOnClickListener(buttonDeleteAllOnClickListener);

       }

       Button.OnClickListener buttonAddOnClickListener
       = new Button.OnClickListener(){

      @Override
      public void onClick(View arg0) {
       // TODO Auto-generated method stub 
             int a=Integer.parseInt(textView1.getText().toString());
             int  b=a+2;
          String s1 = String.valueOf(b);
          textView1.setText(s1);
         Toast.makeText(getApplicationContext(), "Wrong",
                    Toast.LENGTH_SHORT).show();

       String data1 = textView1.getText().toString();
       String data2 = inputContent2.getText().toString();
       String data3 = textView2.getText().toString();
       mySQLiteAdapter.insert(data1, data2, data3);
       updateList();

      }

       };

       Button.OnClickListener buttonDeleteAllOnClickListener
       = new Button.OnClickListener(){

      @Override
      public void onClick(View arg0) {
       // TODO Auto-generated method stub
       mySQLiteAdapter.deleteAll();
       updateList();
      }

       };

     @Override
     protected void onDestroy() {
      // TODO Auto-generated method stub
      super.onDestroy();
      mySQLiteAdapter.close();
     }        

     private void updateList(){
      cursor.requery();
       }

    } 
```

至于这里的xml布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   >

<TextView 
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:text="hello"
   />
<TextView 
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:text="Enter content of column 1"
   />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="0"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView 
       android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:text="Enter content of column 2"
   />
<EditText
   android:id="@+id/content2"
   android:layout_width="fill_parent"
       android:layout_height="wrap_content"
   />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<Button
   android:id="@+id/add"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:text="Add"
   />

<Button
   android:id="@+id/deleteall"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:text="Delete All"
   />
<ListView
 android:id="@+id/contentlist"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:08:36.600

很简单，您的`from`数组中有三个值，但`to`. 这两个数组必须匹配（具有一对一的关系）：

```
String[] from = new String[]{SQLiteAdapter.KEY_ID, SQLiteAdapter.KEY_CONTENT1, SQLiteAdapter.KEY_CONTENT2};
int[] to = new int[]{R.id.id, R.id.text1, R.id.text2, R.id.text3}; 
```

# git - Git 阶段并使用一个命令提交

> ID：14816570
> 
> 赞同：34
> 
> 时间：2013-02-11T16:37:36.337
> 
> 标签：git

Git 有没有办法在一个命令中暂存和提交文件？例如，在我的本地存储库中，我创建了位于 css 文件夹中的文件 index.html、styles.css 和位于 js 文件夹中的 script.js。现在我想运行一个命令来暂存并提交所有这些文件。我尝试了下面的代码，但没有成功

```
git commit -a -m "my commit message" 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2017-08-01T14:41:18.643

你想做的是：

```
git commit -am "Message for my commit" 
```

这将自动添加所有跟踪的文件，您可以在一个命令中输入您的消息。

> -a --all
> 告诉命令自动暂存已修改和删除的文件，但未告诉 Git 的新文件不受影响。

> -m <msg> --message=<msg>
> 使用给定的作为提交消息。如果给出了多个 -m 选项，它们的值将连接为单独的段落。

> https://git-scm.com/docs/git-commit

如果要暂存和提交未跟踪的文件，您可以：

```
git add -A && git commit -am 'message' 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-11T16:45:40.260

`git commit -a ...`将自动添加和提交之前已经提交的文件，现在被修改或删除。正如您发现的那样，它不会影响新文件。

您可以使用别名将`git add ...`and组合`git commit ...`成一个命令行。但是，如果您这样做，请花时间编写不需要使用的脚本，否则`git add .`将`git add -A`不可避免地导致提交您真的不想要的文件。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-11T16:42:43.173

您可以通过使用别名来做到这一点。

像这样定义一个别名：

`git config --global alias.your-alias '!git add -A && git commit'`

然后你可以像普通的 git 命令一样使用它：`git your-alias -m 'commit message'`

# powershell - PowerShell：从变量中删除或替换引号

> ID：14816571
> 
> 赞同：21
> 
> 时间：2013-02-11T16:37:37.593
> 
> 标签：powershell, blat

我正在使用 Get-EventLog 设置一个变量，然后使用事件 ID 描述设置另一个变量。然后我使用 blat.exe 将此信息通过电子邮件发送给一个组。

描述包含引号。引号导致 blat 退出并出现错误。

有没有办法从 event.Message 中删除引号并用空格或其他东西替换它们？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-11T16:44:59.040

如果变量是 String 对象，那么您可以执行以下操作：

```
$Variable.Replace("`"","") 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-11T16:44:13.907

我其实刚收到。引号和双引号的数量让我感到困惑，但这已经奏效并且没有错误。

```
$var -replace '"', "" 
```

这些引号是：单，双，单，逗号，双，双。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-07-29T02:05:53.327

根据具体情况，使用[Trim(Char[]) 方法](https://msdn.microsoft.com/en-us/library/system.string.trim(v=vs.110).aspx)可能更简单：
*...删除所有前导和尾随事件...*

```
e.g. $your_variable.Trim('"') 
```

它只会从 $your_variable 的开头和结尾删除引号。它将保留 $your_variable 文本中的任何引号，无论是否转义：

```
PS C:\> $v.Trim('"') # where $v is: "hu""hu"hu'hu"
hu""hu"hu'hu 
```

您可以使用`Trim('"')`, `Trim("'")`，也可以同时使用：`Trim("`"'")`

请注意，Trim() 不关心引号是否是孤立的，这意味着它会删除结束或开始的引号，无论它在字符串的另一侧是否有成对的引号。

```
PS C:\Users\Papo> $hu = "A: He asked `"whos this sofa?`" B: She replied: `"Chris'`""
PS C:\Users\Papo> $hu
A: He asked "whos this sofa?" B: She replied: "Chris'"
PS C:\Users\Papo> $hu.trim('"')
A: He asked "whos this sofa?" B: She replied: "Chris'
PS C:\Users\Papo> # and even worse:
PS C:\Users\Papo> $hu.trim("'`"")
A: He asked "whos this sofa?" B: She replied: "Chris 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-11T16:52:00.787

如果您使用 Powershell 的内置（需要 2.0），则无需编辑事件日志中的描述`send-mailmessage`即可消除对该问题的依赖并正确处理此问题。`blat.exe`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-11-27T11:20:46.517

问题是简单的替换会清除**每个**引号字符，即使转义（加倍）也是如此。以下是我为自己使用而创建的功能：

*   一种仅删除孤引号的方法。
*   逃脱他们的人

我还使用可选的 $charToReplace 参数使它们通用以管理其他字符

```
#Replaces single occurrences of characters in a string.
#Default is to replace single quotes
Function RemoveNonEscapedChar {
    param(
        [Parameter(Mandatory = $true)][String] $param,
        [Parameter(Mandatory = $false)][String] $charToReplace
    )

    if ($charToReplace -eq '') {
        $charToReplace = "'"
    }
    $cleanedString = ""
    $index = 0
    $length = $param.length
    for ($index = 0; $index -lt $length; $index++) {
        $char = $param[$index]
        if ($char -eq $charToReplace) {
            if ($index +1 -lt $length -and $param[$index + 1] -eq $charToReplace) {
                $cleanedString += "$charToReplace$charToReplace"
                ++$index ## /!\ Manual increment of our loop counter to skip next char /!\
            }
            continue
        }
        $cleanedString += $char
    }
    return $cleanedString
}
#A few test cases : 
RemoveNonEscapedChar("'st''r'''i''ng'")                               #Echoes st''r''i''ng
RemoveNonEscapedChar("""st""""r""""""i""""ng""") -charToReplace '"'   #Echoes st""r""i""ng
RemoveNonEscapedChar("'st''r'''i''ng'") -charToReplace 'r'            #Echoes 'st'''''i''ng' 
```

```
#Escapes single occurences of characters in a string.  Double occurences are not escaped.  e.g.  ''' will become '''', NOT ''''''.
#Default is to replace single quotes
Function EscapeChar {
    param(
        [Parameter(Mandatory = $true)][String] $param,
        [Parameter(Mandatory = $false)][String] $charToEscape
    )

    if ($charToEscape -eq '') {
        $charToEscape = "'"
    }
    $cleanedString = ""
    $index = 0
    $length = $param.length
    for ($index = 0; $index -lt $length; $index++) {
        $char = $param[$index]
        if ($char -eq $charToEscape) {
            if ($index +1 -lt $length -and $param[$index + 1] -eq $charToEscape) {
                ++$index ## /!\ Manual increment of our loop counter to skip next char /!\
            }
            $cleanedString += "$charToEscape$charToEscape"
            continue
        }
        $cleanedString += $char
    }
    return $cleanedString
}
#A few test cases : 
EscapeChar("'st''r'''i''ng'")                              #Echoes ''st''r''''i''ng''
EscapeChar("""st""""r""""""i""""ng""") -charToEscape '"'   #Echoes ""st""r""""i""ng""
EscapeChar("'st''r'''i''ng'") -charToEscape 'r'            #Echoes 'st''rr'''i''ng' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-19T22:28:08.227

以上答案都不适合我。所以我创建了以下解决方案......

搜索并替换字符单引号 "'" ascii Character (39) with a space " " ascii Character (32)

```
$strOldText = [char] 39
$strNewText = [char] 32

$Variable. = $Variable..Replace($strOldText, $strNewText).Trim() 
```

# ruby - 使用 var 来完成 wir 代理

> ID：14816581
> 
> 赞同：1
> 
> 时间：2013-02-11T16:38:14.290
> 
> 标签：ruby, internet-explorer, google-chrome, watir-webdriver

我正在研究一种共享 Ruby 程序的方法。这是我的测试代码。

```
require 'rubygems'
require 'watir-webdriver'
require 'headless'
require 'google_drive'

@browsertype =""
@name =""
@champsname = ""
@date = DateTime.now

file = File.exists?("temp.txt")
if file == true
   input = IO.read("temp.txt")
   input_hash = Hash[*input.gsub(/"/,"").split(/\s*[\n=]\s*/)]
     browsertype = input_hash.shift
     name  = input_hash.shift
     champsname  = input_hash.shift

  @browsertype = browsertype[1]
  @name  = name[1]
  @champ = champsname[1]

end
if file == false
f = File.new("temp.txt", "w")

  # processing
    puts "What browser will you be using? "
      browsertype = gets
      f.write("browser = :")
      f.write(@browsertype)
    puts  "What is your name? "
     name = gets
       f.write("name = ")
       f.write(@name)
     puts "what is your champs name"
      champsname = gets
       f.write("champion = ")
       f.write(@champsname)

     @browsertype = browsertype
     @name  = name
     @champ = champsname

   end
     puts @browsertype
     puts @name
     puts @champ
     puts @date

#@b = "Watir::Browser.new :"+@browsertype

 agent = Watir::Browser.new
 @b = agent+@browsertype

#b = @b

#b.goto 'https://docs.google.com/spreadsheet/ccc?key=0AncPM9_7wL02dHVaSWg5eklfYW5jdTE3NGtJSGJPb3c' 
```

我用这个问题作为参考来制作 var out of files、[Variables magic 和 read from file](https://stackoverflow.com/questions/1577542/variables-magic-and-read-from-file)。我希望我的朋友能够通过使用 orca[从我的 Ruby 应用程序构建 Windows 可执行文件来使用成品？](https://stackoverflow.com/questions/348919/building-a-windows-executable-from-my-ruby-app). 我一直遇到的问题是 Watir 在您使用时默认运行 Firefox

```
agent = Watir::Browser.new 
```

但不是每个人都使用 Firefox，所以这就是我在文件中创建浏览器类型的原因。但是当我使用

```
@b = "Watir::Browser.new :"+@browsertype 
```

我收到一条错误消息，提示`+string`无效，而符号也一样。有人对我如何拥有用户定义的浏览器类型有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:08:37.057

您应该将浏览器类型传递给浏览器的初始化。：

```
@b = Watir::Browser.new @browsertype 
```

这假设`@browsertype`类似于`'firefox'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-18T23:08:55.123

Watir 接受一小部分特定的“符号”，例如浏览器类型的 :chrome。如果接受来自用户的输入，我将使用 case 语句根据他们的输入设置一个包含特定符号（：firefox、：chrome 等）的变量，并在用户不输入值时向用户提供反馈符合您的预期。

或者，您也可以在字符串上使用 .to_sym 将其转换为符号.. 所以

```
@browser_type = "chrome"
@b = Watir::Browser.new @browser_type.to_sym 
```

# javascript - 将 JSON 对象列表重构为嵌套列表

> ID：14816585
> 
> 赞同：0
> 
> 时间：2013-02-11T16:38:29.173
> 
> 标签：javascript, python, json

我有一个 JSON 对象数组，我想从中创建一个“单个 JavaScript 对象”。我很欣赏 Python 或 JavaScript 中的想法。事实上，我什至不确定描述（或谷歌）这类问题的正确术语是什么。谢谢！

原始列表如下所示：

```
[
{
    "State_Code": "01",
    "County_Code": "000",
    "State_Abbrv": "AL",
    "County_Name": "ALABAMA",
    "DATA": "12345"

},
{
    "State_Code": "01",
    "County_Code": "001",
    "State_Abbrv": "AL",
    "County_Name": "AUTAUGA COUNTY",
    "DATA": "123"

},
{
    "State_Code": "01",
    "County_Code": "003",
    "State_Abbrv": "AL",
    "County_Name": "BALDWIN COUNTY",
    "DATA": "321"

},
{
    "State_Code": "02",
    "County_Code": "000",
    "State_Abbrv": "AK",
    "County_Name": "ALASKA",
    "DATA": "98765"

},
{
    "State_Code": "02",
    "County_Code": "013",
    "State_Abbrv": "AK",
    "County_Name": "ALEUTIANS EAST BOROU",
    "DATA": "456"

},

..............  ] 
```

我希望它看起来像这样：

```
{
    "name": "USA",
    "children": [
        {
            "name": "ALABAMA",
            "children": [
                {
                    "name": "AUTAUGA COUNTY",
                    "DATA": 123
                },
                {
                    "name": "BALDWIN COUNTY",
                    "DATA": 321
                }
            ]
        },
        {
            "name": "ALASKA",
            "children": [
                {
                    "name": "ALEUTIANS EAST BOROU",
                    "DATA": 456
                }
            ]
        }
        .............
    ]
} 
```

我正在尝试使用类似这种想法的 Python 循环（对任何错别字表示歉意，今晚将修复）：

```
runningListCounty = []
tempD = defaultdict(dict)
tempDCounty = defaultdict(dict)
i = 0
for l in listOfJson:
  if l['County_Code'] == '000'
      tempD['name'] = l['County_Name']
      if i > 0: #only do this after the first loop
         tempD['children'] = runningListCounty 
         runningList.append(tempD)       
         runningListCounty = []
         tempD = defaultdict(dict)
  else:
      tempDCounty = defaultdict(dict)
      tempDCounty['name'] = l['County_Name']
      tempDCounty['DATA'] = l['DATA']
      runningListCounty.append(tempDCounty)
  i = i + 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:06:26.553

尝试使用猜测工作。

```
data = [
{
    "State_Code": "01",
    "County_Code": "000",
    "State_Abbrv": "AL",
    "County_Name": "ALABAMA",
    "DATA": "12345"

},
{
    "State_Code": "01",
    "County_Code": "001",
    "State_Abbrv": "AL",
    "County_Name": "AUTAUGA COUNTY",
    "DATA": "123"

},
{
    "State_Code": "01",
    "County_Code": "003",
    "State_Abbrv": "AL",
    "County_Name": "BALDWIN COUNTY",
    "DATA": "321"

},
{
    "State_Code": "02",
    "County_Code": "000",
    "State_Abbrv": "AK",
    "County_Name": "ALASKA",
    "DATA": "98765"

},
{
    "State_Code": "02",
    "County_Code": "013",
    "State_Abbrv": "AK",
    "County_Name": "ALEUTIANS EAST BOROU",
    "DATA": "456"

}
]

roots = [ d for d in data if d['County_Code'] == '000']

def crawl(data, roots):
    for root in roots:
        yield {
            'name' : root['County_Name'],
            'children' : [{ 'name' : d['County_Name'], 'DATA' : d['DATA'] }
                for d in data if d['County_Code'] != '000' and d['State_Code'] == root['State_Code']]
        }

final = { 'name' : 'USA', 'children' : [ x for x in crawl(data, roots)]}

import pprint

pprint.pprint(final) 
```

给出：

```
{'children': [{'children': [{'DATA': '123', 'name': 'AUTAUGA COUNTY'},
                            {'DATA': '321', 'name': 'BALDWIN COUNTY'}],
               'name': 'ALABAMA'},
              {'children': [{'DATA': '456', 'name': 'ALEUTIANS EAST BOROU'}],
               'name': 'ALASKA'}],
 'name': 'USA'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:20:13.857

Javascript解决方案：

**[演示](http://jsfiddle.net/JhyK3/)**

```
var data = [
{
    "State_Code": "01",
    "County_Code": "000",
    "State_Abbrv": "AL",
    "County_Name": "ALABAMA",
    "DATA": "12345"

},
{
    "State_Code": "01",
    "County_Code": "001",
    "State_Abbrv": "AL",
    "County_Name": "AUTAUGA COUNTY",
    "DATA": "123"

},
{
    "State_Code": "01",
    "County_Code": "003",
    "State_Abbrv": "AL",
    "County_Name": "BALDWIN COUNTY",
    "DATA": "321"

},
{
    "State_Code": "02",
    "County_Code": "000",
    "State_Abbrv": "AK",
    "County_Name": "ALASKA",
    "DATA": "98765"

},
{
    "State_Code": "02",
    "County_Code": "013",
    "State_Abbrv": "AK",
    "County_Name": "ALEUTIANS EAST BOROU",
    "DATA": "456"

}
];

var newData = { name : 'USA', children : [] };

for(var i=0; i<data.length; i++) {
    if(data[i].County_Code == "000") {
        newData.children.push({ name : data[i].County_Name, state_code : data[i].State_Code, children : [] });
    }
}

for(var i=0; i<data.length; i++) {
    if(data[i].County_Code != "000") {
        for(var x=0; x<newData.children.length; x++) {
            if(data[i].State_Code == newData.children[x].state_code) {
                newData.children[x].children.push({ name : data[i].County_Name, data : data[i].DATA });
            }
        }
    }
}

console.log(newData); // or convert to JSON with  JSON.stringify(newData) 
```

结果`newData`是：

```
{
    "name": "USA",
    "children": [
        {
            "name": "ALABAMA",
            "state_code": "01",
            "children": [
                {
                    "name": "AUTAUGA COUNTY",
                    "data": "123"
                },
                {
                    "name": "BALDWIN COUNTY",
                    "data": "321"
                }
            ]
        },
        {
            "name": "ALASKA",
            "state_code": "02",
            "children": [
                {
                    "name": "ALEUTIANS EAST BOROU",
                    "data": "456"
                }
            ]
        }
    ]
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-11T17:13:28.403

## Javascript 解决方案

这是小提琴： **[JSFIDDLE](http://jsfiddle.net/tivie/5c6v3/1/)**

这是代码：

```
var statesObj = JsonSource,
    finalObj = {
        USA : {
            name: "USA",
            children: []
        }
    };
for (var st = 0; st < statesObj.length; ++st) {
    // First the states
    if( statesObj[st].County_Code === "000") {
        var newState = {
            name: statesObj[st].County_Name,
            abbrv: statesObj[st].State_Abbrv,
            children: []
        };
        finalObj.USA.children.push(newState);
    }
}

for (var st = 0; st < statesObj.length; ++st) {
    // Now the rest
    if( statesObj[st].County_Code !== "000") {
        var newChild = {
            name: statesObj[st].County_Name,
            data: statesObj[st].DATA
        };
        for (var sub in finalObj.USA.children) {
            if (finalObj.USA.children.hasOwnProperty(sub) &&
                finalObj.USA.children[sub].abbrv === statesObj[st].State_Abbrv) {
                finalObj.USA.children[sub].children.push(newChild);
                break;
            }
        }
    }
}

var finalJson = JSON.stringify(finalObj);
console.log(finalJson); 
```

# sql - 创建一个随机名称（数字）临时表

> ID：14816596
> 
> 赞同：0
> 
> 时间：2013-02-11T16:39:23.257
> 
> 标签：sql, sql-server, dynamic-sql

我一直在使用动态 SQL 来尝试实现这一点，这有点可能，但不是最顺利的方式。

所以我想知道是否有办法创建一个随机名称临时表（##show101、##show24、##show576）。

我想要实现的是创建一个临时表，其中包含来自不同表的某些数据。然后我只是操作临时表中的数据并给出输出。

我正在使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:51:51.117

您的示例是使用*全局*临时表。这些在被删除之前一直保留，并且可以在不同的连接之间共享。这就是为什么它们是“全球性的”。在您的情况下，它们可以在动态语句的执行和外部语句之间共享。

我建议看起来更像这样的代码：

```
create table #MyTempTable . . . <as whatever>

declare @sql nvarchar(max) = '
    select <whatver>
    into #temp1

    . . .

    do some more work on #temp1 if you like

    --Finally
    select * from temp1
   ';

insert into #MyTempTable
    exec(@sql); 
```

这会将数据从动态范围“移动”到外部范围，您可以将其用于其他目的。您现在可以在#MyTempTable 中访问它。

# json - 动画 JSON 数据？

> ID：14816599
> 
> 赞同：0
> 
> 时间：2013-02-11T16:39:35.830
> 
> 标签：json, api, animation, mustache

愚蠢的提问时间。我试图使用 Mustache 模板系统将我的 JSON 数据与翻书插件集成。不用说，这根本行不通。

我是一个 jQuery noobie，所以有什么简单的方法可以将 JSON 数据绑定到/使用插件（带有或不带有 Mustache 标签）并为其设置动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:18:45.793

从你的问题很难推断出你想要什么，但我觉得你已经把所有的部分都放在一起了。首先是您在评论中链接到的示例： [https ://github.com/blasten/turn.js/wiki/Making-pages-dynamically-with-Ajax](https://github.com/blasten/turn.js/wiki/Making-pages-dynamically-with-Ajax)

这会通过 Ajax 获取尚未加载的页面，并且示例代码假定 Ajax 调用从服务器获取 HTML，如代码片段中所示（在添加缺少的“}”之后：

```
$.ajax({url: "app?method=get-page-content&page="+page})
  .done(function(data) {
     element.html(data);
}); 
```

在这里，该`done`函数通过将其直接注入到预期包含当前页面的 中来处理`data`它从服务器返回的内容。`element`

接下来我假设您确实有一个服务器端方法，但该方法返回 JSON。让我暂时假设它返回以下结构：

```
{ "title" : "the title of page N", 
  "text"  : "here is some text for the page N." } 
```

接下来是在函数中将此 JSON 渲染为 html `done`，然后将结果插入页面。[查看README.md](https://github.com/janl/mustache.js)上的简短教程可能如下所示：

```
$.ajax({url: "app?method=get-page-content&page="+page})
  .done(function(data) {
     var pageHtml = Mustache.render("<h2>{{title}}</h2><p>{{text}}</p>", data);
     element.html(pageHtml);
}); 
```

如果服务器返回正确的`data`，您现在应该看到一个

```
<h2>the title of page N</h2><p>here is some text for the page N.</p> 
```

出现在页面上。

# java - Java String Regex Divide - 总是相同的模式

> ID：14816602
> 
> 赞同：0
> 
> 时间：2013-02-11T16:39:45.907
> 
> 标签：java, regex, string

我从来不明白如何制作正确的正则表达式来划分我的字符串。我有这种类型的字符串`example = "on[?a, ?b, ?c]";` 有时我有这个，字符串`example2 = "not clear[?c]";`

对于第一个示例，我想分为：

```
[on, a, b, c] 
```

或者

```
String name = "on";
String [] vars = [a,b,c]; 
```

对于第二个例子，我想分为这种类型：[not clear, c] 或

```
String name = "not clear";
String [] vars = [c]; 
```

非常感谢你们；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:09:09.470

如果您知道标识符的字符集，您可以简单地对*不在*该集中的所有文本进行拆分。例如，如果您的标识符仅由单词字符 ( `[a-zA-Z_0-9]`) 组成，您可以使用：

```
String[] parts = "on[?a, ?b, ?c]".split("[\\W]+");
String name = parts[0];
String[] vars = Arrays.copyOfRange(parts, 1, parts.length); 
```

如果您的标识符只有 AZ（上下），您可以将`\\W`上面替换为`^A-Za-z`.

我觉得这比使用复杂的正则表达式更优雅。

*编辑：*我意识到你的第二个例子“不清楚”会有问题。如果您没有选择使用下划线代替空格之类的东西，您可以在`[?`（或子字符串）上进行一次拆分以获取“名称”，然后在其余部分上进行另一次拆分，如下所示：

```
String s = "not clear[?a, ?b, ?c]";
String[] parts = s.split("\\[\\?"); //need the '?' so we don't get an extra empty array element in the next split
String name = parts[0];
String[] vars = parts[1].split("[\\W]+"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T17:08:17.253

这很接近，但问题是第三个记住的组实际上是重复的，所以它只捕获最后一个匹配项。

```
(.*?)\[(?:\s*(?:\?(.*?)(?:\s*,\s*\?(.*?))*)\s*)?] 
```

例如，您列出的第一个`on[?a, ?b, ?c]`将给 group 1 as `on`, 2 as `a`3 as `c`。如果您使用的是 perl，您可以使用该`g`标志多次将正则表达式应用于一行并使用它：

```
my @tokens;
while ( my $line =~ /\s*(.*?)\s*[[,\]]/g ) {
    push( @tokens, $1 );
} 
```

*请注意，我实际上并没有测试 perl 代码，只是在我的脑海中。它应该给你这个想法*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T17:33:23.660

```
 String[] parts = example.split("[^\\w ]");
    List<String> x = new ArrayList<String>();
    for (int i = 0; i < parts.length; i++) {
        if (!"".equals(parts[i]) && !" ".equals(parts[i])) {
            x.add(parts[i]);
        }   
    } 
```

只要您没有多个空格分隔非空格字符，这将起作用。可能有一种更聪明的方法可以过滤掉 null 和 " " 字符串。

# c# - 如何显示标准 Windows 数据源 (ODBC) 对话框

> ID：14816607
> 
> 赞同：3
> 
> 时间：2013-02-11T16:39:55.840
> 
> 标签：c#, windows, winforms, dialog, odbc

是否有任何简单的方法可以从 winforms 应用程序显示标准 Windows 数据源对话框？

![在此处输入图像描述](../Images/c76bf25e8ed95d177d1fea2974521e65.png)

我想向用户展示它并选择一个系统 dsn 或创建一个新的并返回一个数据源名称。我没有在 .net 中找到对现有包装器的任何引用，所以我想我只能为此使用 win API。任何现有的解决方案或代码片段将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:03:30.900

似乎无法从此对话框中获取选定的数据源名称。这是可用于调用此对话框（[链接](http://msdn.microsoft.com/en-us/library/ms714116%28v=vs.85%29.aspx)）的 winapi 函数：

```
BOOL SQLManageDataSources(HWND hwnd); 
```

这是一个片段：

```
[DllImport("ODBCCP32.dll", CharSet = CharSet.Unicode, SetLastError = true)]
private static extern bool SQLManageDataSources(IntPtr hwnd);

private void ShowDataSourceDialog()
{
    SQLManageDataSources(Handle);
} 
```

参数 hwnd 是父窗口句柄。对话框仅针对有效的窗口句柄显示。尽管我不能以这种方式选择数据源，但我至少可以提供使用现有标准工具添加、更改或删除数据源的能力。否则我需要创建一个自定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:18:19.400

也许您可以为其创建一个自定义窗口，用户可以在其中插入/选择 DSN。
有一些关于如何手动插入新 DSN 并列出机器上已配置的 DSN 的示例：

[检查系统 DSN 并在不存在时创建系统 DSN（iSeries Access ODBC 驱动程序）](https://stackoverflow.com/questions/9256368/check-for-system-dsn-and-create-system-dsn-if-not-existing-iseries-access-odbc)[从 .NET](https://stackoverflow.com/questions/6457973/odbc-driver-list-from-net)
[动态添加 DSN 名称ODBC 驱动程序列表](http://www.codeproject.com/Articles/7652/Dynamically-adding-DSN-names)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:22:09.560

由于这是存储在注册表中的所有数据，您可以在此处获得可用的 ODBC 连接列表：

```
HKEY_CURRENT_USER\Software\ODBC\ODBC.INI 
```

把它包起来，但是你想让它变得漂亮。

[这里](http://www.codeproject.com/Articles/4808/All-you-wanted-to-know-about-the-Registry-with-C-P)有一些关于查询注册表的好信息

# regex - URL正则表达式中的大括号()代表什么？

> ID：14816617
> 
> 赞同：0
> 
> 时间：2013-02-11T16:40:41.330
> 
> 标签：regex

例如，在

```
r'^articles/(\d{4})/$', 'news.views.year_archive' 
```

我理解除 (\d{4}) 之外的所有正则表达式。四位数，但为什么是大括号？

（python/django 示例）

另一个例子：

```
r'^articles/(\d{4})/(\d{2})/(\d+)/$', 'news.views.article_detail' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:41:57.423

大括号用于分组，可用于提取匹配的子集。它们也可用于指示子集重复（或可选），尽管您的正则表达式不以这种方式使用它们。

见[http://www.regular-expressions.info/brackets.html](http://www.regular-expressions.info/brackets.html)

根据使用情况，我敢打赌与此 URL 匹配的代码使用方括号来提取年份，以便可以在查询中使用它。[查看Match 对象](http://docs.python.org/2/library/re.html#match-objects)的分组功能

* * *

Django 自动提取分组的子表达式并将它们用作视图的参数：

> 视图被传递一个 HttpRequest 作为它的第一个参数，并且在正则表达式中捕获的任何值作为剩余参数。
> ...
> 请求`/articles/2005/03/`将匹配列表中的第三个条目。Django 会调用该函数`news.views.month_archive(request, '2005', '03')`。

[https://docs.djangoproject.com/en/dev/topics/http/urls/](https://docs.djangoproject.com/en/dev/topics/http/urls/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T16:42:56.810

除了将正则表达式的一部分组合在一起之外，圆括号还会创建“反向引用”。[反向引用](http://www.regular-expressions.info/brackets.html)存储与括号内的正则表达式部分匹配的字符串部分。

# regex - .htaccess 如果 URL 不好做某事

> ID：14816625
> 
> 赞同：3
> 
> 时间：2013-02-11T16:41:08.353
> 
> 标签：regex, apache, .htaccess, mod-rewrite, redirect

我正在制作我的个人[CMS](http://en.wikipedia.org/wiki/Content_management_system)。我想在其中使用酷（友好）的 URL。这是我的 .htaccess 文件代码：

```
RewriteEngine on
RewriteBase /
DirectoryIndex index.php

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^([a-zA-Z-_0-9_/]+)/?$ index.php?args=$1 [L] 
```

我看到在 Stack Overflow 上也使用了友好的 URL。今天我试图在 Stack Overflow 上出错。到（例如）这个 URL `http://stackoverflow.com/questions/5469955/htaccess-url-rewrite-if-file-not-exists`。我补充说`.php`。但我没有看到 404 错误。我们的论坛以一种神奇的方式删除了我的后记，并将我重定向回正确的站点 URL。**我怎样才能在我的 CMS 中做同样的事情**？

我试图将此 ( `RewriteRule ^([a-zA-Z-_0-9_/]+)/?$ index.php?args=$1 [L]`) 行更改为 ( `RewriteRule ^([a-zA-Z-_0-9_/]+)/([a-zA-Z-_0-9)$ index.php?args=$1 [L]`)，但这没有帮助，然后我看到了`500 Internal Server Error`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:53:23.957

如果您需要与 Stack Overflow 相同的行为，那么您还必须有一些服务器端支持（例如 PHP、ASP 等）。考虑以下代码片段：

### .ht 访问：

```
RewriteRule ^([^/]+)/([^/]+)/?$ /index.php?id=$1&title=$2 [L,NC,QSA] 
```

### 索引.php：

```
<?php
   $id    = $_GET['id'];
   $title = $_GET['title'];

   $dbTitle = // Get title from Database query using $id
   ...
   if ($title != $dbTitle) {
      // Redirect with 301 to correct /<id>/<title> page
      header ('HTTP/1.1 301 Moved Permanently');
      header('Location: /' . $id . '/' . $dbTitle);
      exit;
   }
   // The rest of your script
?> 
```

# eclipse - 是否有任何 Eclipse 插件可以在调试模式下显示可视对象图？

> ID：14816627
> 
> 赞同：3
> 
> 时间：2013-02-11T16:41:11.453
> 
> 标签：eclipse, debugging, eclipse-plugin

Eclipse 是否有任何此类工具可以在调试模式下为给定对象绘制可视图形作为根？类似于[Stan4J](http://stan4j.com/dependencies/dependency-analysis.html)的东西，但更专注于对象和字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:20:52.917

好吧，有[DoodleDebug](http://scg.unibe.ch/wiki/projects/DoodleDebug)。它不是一个调试器扩展，而是一个与`System.out.prinln()`. 您可以将它安装为 Eclipse 插件，它附带一个简短的教程。非标准 Java 对象的默认表示是打印它们的类名和包含的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:25:53.160

还有[java蜘蛛](http://sourceforge.net/projects/javaspider/)。不是很用户友好，但你可以得到一种对象图。（顺便说一句。这是来自 Kent Beck 和 Erich Gamma 的插件......）

# ios - CGImageCreateWithMask 图像编码与 alpha 通道倒置

> ID：14816629
> 
> 赞同：3
> 
> 时间：2013-02-11T16:41:16.127
> 
> 标签：ios, uiimage, alpha

/*注意，我已经修复了代码.. 查找编辑注释*/

对于 iOS 5.0+，为了在 iPad 上运行，我创建了一个函数来允许用户屏蔽输入图像，生成两个新图像，一个前景图像和一个背景图像。当我将这些添加到 UIImageView 并在设备或模拟器上显示时，我得到了我所期望的。

但是，当我通过将数据编码为会话数据来保存这些图像时，生成的图像是向后的（即图像遮罩已被反转）。我们两个人跑过代码，没有任何地方是颠倒的，没有复制/粘贴错误。我认为 kCGImageAlphaPremultipliedFirst 与 kCGImageAlphaPremultipliedLast 可能存在一些问题。当我对乱码图像进行编码时，它们从 kCGImageAlphaPremultipliedFirst 开始，当它们被加载时，它们是 kCGImageAlphaPremultipliedLast。

![保存前](../Images/d4a64494e8ba99e02baa0fd75943a5f7.png)

![保存后](../Images/a3b30af7b164c40bc1f87c50f7ba1953.png) 任何帮助或想法将不胜感激。

艾米@InsatiableGenius

下面的函数被调用：

```
[self createMask]; 
[self addImageAndBackground:foregroundImg backgroundImg:backgroundImg];

- (UIImage*)maskImage:(UIImage *)image withMask:(UIImage *)maskImage {
    CGImageRef maskRef = maskImage.CGImage;
    CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef),
                                        CGImageGetHeight(maskRef),
                                        CGImageGetBitsPerComponent(maskRef),
                                        CGImageGetBitsPerPixel(maskRef),
                                        CGImageGetBytesPerRow(maskRef),
                                        CGImageGetDataProvider(maskRef), NULL, false);

    CGImageRef sourceImage = [image CGImage];
    CGImageRef imageWithAlpha = sourceImage;
      if ((CGImageGetAlphaInfo(sourceImage) == kCGImageAlphaNone)
         || (CGImageGetAlphaInfo(sourceImage) == kCGImageAlphaNoneSkipFirst)
        || (CGImageGetAlphaInfo(sourceImage) == kCGImageAlphaNoneSkipLast)) {
         imageWithAlpha = CopyImageAndAddAlphaChannel(sourceImage);
     }

    CGImageRef masked = CGImageCreateWithMask(imageWithAlpha, mask);
    CGImageRelease(mask);

    if (sourceImage != imageWithAlpha) {
        CGImageRelease(imageWithAlpha);
    }

    UIImage* retImage = [UIImage imageWithCGImage:masked];
    CGImageRelease(masked);

    /* EDIT STARTS HERE return retImage; */

//Added extra render step to force it to save correct alpha values (not the mask)
UIImage* retImage = [UIImage imageWithCGImage:masked];
CGImageRelease(masked);

UIGraphicsBeginImageContext(retImage.size);
[retImage drawAtPoint:CGPointZero];
UIImage *newImg = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
retImage = nil;

return newImg;

}

-(void)createMask{

    //take whole screen uiimage from paintview
    //user painted black for mask, set rest of window to white
    [paintView setWhiteBackground:YES];
    //get user painted mask
    UIImage *maskFromPaint  = [paintView allocNormalResImageWithBlur:NO/*blur?*/];
     [self dumpTestImg:maskFromPaint name:@"maskFromPaint"];
    UIImage *maskNoAlpha = [maskFromPaint resetImageAlpha:1.0];
    [self dumpTestImg:maskNoAlpha name:@"maskFromPaintNoAlpha"];

    //mask has to be gray
    UIImage *maskFromPaintGray = [self convertImageToGrayScale:maskNoAlpha];
     [self dumpTestImg:maskFromPaintGray name:@"maskFromPaintGray"];

    //Had to call this normalize function because some pngs are not compatiable (8 bit)
    UIImage *disp_original = [[UIImage alloc] initWithCGImage:[[original normalize] CGImage] ];
    //Resize original to screen size (alternatively we could upscale the paint... not sure which for now)
    disp_original = [disp_original resizedImageWithContentMode:UIViewContentModeScaleAspectFit bounds:inputImageView.frame.size interpolationQuality:kCGInterpolationHigh] ;

   CGSize imageInViewSize = disp_original.size;

    //use size of displayed original to crop the paintview
    CGRect overlayRect = CGRectMake((int)(inputImageView.frame.size.width - imageInViewSize.width) / 2,
                                    (int)(inputImageView.frame.size.height - imageInViewSize.height) / 2, 
                                    (int)imageInViewSize.width, 
                                    (int)imageInViewSize.height);

    //here is the actual crop
    //get rectangle from paint that is the same size as the displayed original
    CGImageRef maskFromPaintimageRef = CGImageCreateWithImageInRect([maskFromPaintGray CGImage], overlayRect);

    UIImage *invertedMaskFromPaint = [UIImage imageWithCGImage:maskFromPaintimageRef];

     self.maskImg  = [self invertImage:invertedMaskFromPaint];

     [self dumpTestImg:self.maskImg name:@"maskFromPaintCropped"];

    self.backgroundImg = [self    maskImage:disp_original withMask:self.maskImg];
    self.foregroundImg = [self    maskImage:disp_original withMask:invertedMaskFromPaint];

    foregroundImgView.image = foregroundImg;
    backgroundImgView.image = backgroundImg;

    foregroundImgView.hidden =NO;
    backgroundImgView.hidden =NO;
    [container bringSubviewToFront:foregroundImgView];
    [container bringSubviewToFront:backgroundImgView];

    [self dumpTestImg:foregroundImg name:@"foregroundImg"];
    [self dumpTestImg:backgroundImg name:@"backgroundImg"];
    //cleanup
    CGImageRelease(maskFromPaintimageRef);
    maskFromPaint = nil;
    maskFromPaintGray = nil;
    maskNoAlpha = nil;
    disp_original = nil;

    //put things back
    [paintView setWhiteBackground:NO];

}

CGImageRef CopyImageAndAddAlphaChannel(CGImageRef sourceImage) {

    CGImageRef retVal = NULL;

    size_t width = CGImageGetWidth(sourceImage);

    size_t height = CGImageGetHeight(sourceImage);

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    CGContextRef offscreenContext = CGBitmapContextCreate(NULL, width, height,

                                                          8, 0, colorSpace,   kCGImageAlphaPremultipliedLast );  

    if (offscreenContext != NULL) {

        CGContextDrawImage(offscreenContext, CGRectMake(0, 0, width, height), sourceImage);

        retVal = CGBitmapContextCreateImage(offscreenContext);

        CGContextRelease(offscreenContext);

    }

    CGColorSpaceRelease(colorSpace);

    return retVal;

}

- (UIImage*)invertImage:(UIImage *)sourceImage {
    CIContext *context = [CIContext contextWithOptions:nil];
    CIFilter *filter= [CIFilter filterWithName:@"CIColorInvert"];
    CIImage *inputImage = [[CIImage alloc] initWithImage:sourceImage];
    [filter setValue:inputImage forKey:@"inputImage"];
    return [UIImage imageWithCGImage:[context createCGImage:filter.outputImage fromRect:filter.outputImage.extent]];

}

-(void)addImageAndBackground:(UIImage *)foregroundImgIn backgroundImg:(UIImage *)backgroundImgIn{
    UIImageView *tmpIV;

    UIImageView *imgVF = [[UIImageView alloc] initWithImage:  foregroundImgIn];
    imgVF.userInteractionEnabled = YES;
    [self dumpTestImg:foregroundImgIn name:@"foregroundIn"];

    UIImageView *imgVB = [[UIImageView alloc] initWithImage:  backgroundImgIn];
    imgVB.userInteractionEnabled = YES;
    [self dumpTestImg:backgroundImgIn name:@"backgroundIn"];

} 
```

# c# - 如何创建一个常量静态数组？

> ID：14816636
> 
> 赞同：0
> 
> 时间：2013-02-11T16:41:37.283
> 
> 标签：c#, class

我的数据库有一个静态字符串类，所以我总是按照他们设计的方式拼写表格和列。

我目前在这一类中有大约 500 行代码，但这里有一个简短的示例：

```
public const string PURCHASING = "PURCHASING";
public const string SCHED_PURCH = "SCHED/PURCH";
public const string SCHEDULING = "SCHEDULING"; 
```

为了创建“职员”部门的**只读静态字符串数组，我使用了这个静态声明：**

```
public static string[] CLERK_DEPT {
  get {
    return new string[] { PURCHASING, SCHEDULING, SCHED_PURCH };
  }
} 
```

在我的数据库字符串类中有很多这样的代码行。

今天，我偶然发现了这个活跃的帖子，其中有人在做非常相似的事情：

[如何防止修改类中的私有字段？](https://stackoverflow.com/q/14809293/153923)

那里的答案提供了一种方法来提供我以前没有考虑过的只读字符串数组：

> 您必须返回数组的**副本**。

```
public String[] getArr() {
  return arr == null ? null : Arrays.copyOf(arr, arr.length);
} 
```

这让我想知道这里是否有人知道一种更有效的方法来传回我的只读字符串数组。

我必须承认，我一直厌恶`return new string[]`我的代码中的想法。

那么，有吗？...一种更有效、更清洁的方法，还是我已经创建了最佳解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T16:44:47.053

基本上没有不可变数组这样的东西。

如果你信任所有的调用者，你*可以*告诉他们不要改变数组。另一种方法是提供只读包装器：

```
private static readonly ReadOnlyCollection<string> clerkDepartments =
    new ReadOnlyCollection<string>(
        new[] { "PURCHASING", "SCHED/PURCH", "SCHEDULING" });

public static readonly ReadOnlyCollection<string> ClerkDepartments
    { get { return clerkDepartments; } } 
```

请注意，虽然`ReadOnlyCollection<T>`它不是一个*完全*不可变的集合，但只有可以访问底层集合的代码才能更改它 - 因为唯一“知道”数组的代码是将它传递给构造函数的初始化程序，所以你基本上是安全的除非有人破解反射:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T16:43:21.383

也许使用 ReadOnlyCollection？

[http://msdn.microsoft.com/en-us/library/ms132474.aspx](http://msdn.microsoft.com/en-us/library/ms132474.aspx)

# ios - Phonegap 重定向到 Safari

> ID：14816637
> 
> 赞同：-1
> 
> 时间：2013-02-11T16:41:38.267
> 
> 标签：ios, cordova, redirect

我正在尝试使用 Phonegap 通过 github 构建 iOS 应用程序。我的目录中只有一个 html 文件和一张图片。html 基本上将它们重定向到我的网站，该网站针对移动设备进行了优化。但是，它不会在应用程序内重定向它们，而是打开一个 safari 窗口并尝试在其中加载我的网站。如何让它在应用内加载网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:59:37.190

我认为更正youut代码是没有用的，因为Apple不允许您将此应用程序带入商店。不允许只创建一个浏览器。但这可能会回答您的问题：[Stop iframe redirect/opening mobile safari in phonegap project](https://stackoverflow.com/questions/11271020/stop-iframe-redirect-opening-mobile-safari-in-phonegap-project)

# java - 如何将本地 GIT/Maven 项目/文件夹导入 Eclipse？

> ID：14816644
> 
> 赞同：6
> 
> 时间：2013-02-11T16:42:07.857
> 
> 标签：java, eclipse, git, maven, egit

所以我做了 git clone 从远程 git 存储库获取一个 maven 项目。伟大的！我一直在命令行工作，做 git pull、commit 等。太好了！现在我想把这个项目导入到 eclipse 中，并能够通过安装的 egit 在 eclipse 中使用 git。所以我做了一个：

```
mvn eclipse:eclipse -Dwtpversion=2.0 
```

之后，我可以通过常规将项目导入 Eclipse：

```
Import -> General -> Existing Projects into Workspace 
```

但是 GIT 选项没有出现在 Team 下！！！:( :( :(

如何导入这个项目并同时拥有 git 选项？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T16:47:26.923

首先，您要做的是直接将项目作为 Maven 项目导入。然后，您不必执行所有随机命令行操作，此外，您还可以在 Eclipse 中将 Maven 集成到您的依赖项中并`pom.xml`保持最新状态。（您需要为此安装 m2e。）转到 Import 并选择“Existing Maven Projects”：

![在此处输入图像描述](../Images/54ff8ad9ed0b1ef9d7896e121e270718.png)

然后，您应该在项目上启用 eGit。右键单击项目的根目录，然后选择“团队”下的“共享项目”。

![在此处输入图像描述](../Images/3c90b6608b180f73f8929ed355bbf557.png)

选择 Git，它会告诉你可以使用现有的 repo。瞧，你完成了。

![在此处输入图像描述](../Images/a501d53a76607a6d1f97e7364d033861.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:43:33.620

团队 > 共享项目 -> 选择 git 项目。

# javascript - Javascript Google Chrome 扩展，寻找域名，而不是 APP ID

> ID：14816646
> 
> 赞同：0
> 
> 时间：2013-02-11T16:42:14.410
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension

我尝试使用获取域名`alert(document.domain);`但是当我在我的 chrome 扩展工具栏上安装应用程序并在站点中对其进行测试时，我没有获得正确的域，

我不断收到“hiecjmnbal ...（长值）”，我认为它代表了我的谷歌应用程序的 ID。

我也在清单中添加了这个

```
 "content_scripts": [
        {
        "js": ["inject.js"]

        }
  ], 
```

`alert(document.domain);`是里面唯一的一行文字`inject.js`。

我还使用`window.top.location`了它显示的 chrome 扩展 url：`chrome-extension://hiecjmnbal...(long value)/popup.html`

之后我将其合并`<script type="text/javascript" src="inject.js"> </script>`到主 html 文件中`popup.js`

关于为什么我没有得到正确的域 URL 并且只得到谷歌浏览器的扩展 URL 的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:43:44.190

你有没有尝试过：

```
alert(location.href); 
```

# ember.js - 避免 Ember.js 和其他 js 库之间的竞争条件

> ID：14816648
> 
> 赞同：2
> 
> 时间：2013-02-11T16:42:21.983
> 
> 标签：ember.js

我在少数地方遇到了这个问题，但最近它是 Highcharts 的问题。我有一个包含三个 div 的布局，分别称为 #leftdiv、#maindiv 和 #rightdiv。#maindiv 中有一个 highcharts 图表。leftdiv 和 rightdiv 可以隐藏我点击一个按钮。

现在，单击 leftdiv 的那个按钮会调用一个操作处理程序，它将一个名为 showLeft 的属性设置为 false。div 的类绑定到基于 showLeft 的计算机属性，如下所示：

```
leftClass: function() {
    if (this.get('showLeft')) {
        return "span3"
    } else {
        return "span0" 
    }
}.property('showLeft') 
```

和

```
mainClass: function() {
    if (this.get('showLeft') && this.get('showRight')) {
        return "span6"
    } else if (this.get('showLeft') || this.get('showRight')) {
        return "span9" 
    } else {
        return "span11"
    }
}.property('showLeft', 'showRight'), 
```

这可以隐藏左侧栏。但是，一旦 maindiv 的大小发生变化，我需要重新绘制 highcharts 图表以适应新的 div。

但是，当我的重绘图表函数观察到 showLeft 时，它的行为无法预测，因为属性可能会在观察者触发后更新并通过 DOM 传播。

Ember 中是否有一些通用结构可以让我避免这个问题？这是需要明确构建运行循环的情况吗？是否有规范的方法来做到这一点？

谢谢，

——马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T01:48:35.507

您可以尝试观察来自`View`、调用`rerender()`和使用的值`didInsertElement`来处理重新绘制 Highchart

例如

```
App.MyController = Ember.Controller.extend({
    ...
});
App.MyView = Ember.View.extend({
    templateName: 'whatever-template',
    resize_observer: (function() {
         this.rerender();
    }).observes('controller.showLeft', 'controller.showRight'),
    didInsertElement: function() {
        /* Refresh your charts here */
    }
}); 
```

# bash - Bash 运行时间优化

> ID：14816652
> 
> 赞同：0
> 
> 时间：2013-02-11T16:42:27.687
> 
> 标签：bash, optimization

我正在尝试解决优化问题并找到执行以下命令的最有效方法：

`whois -> sed -> while (exit while) ->perform action`

while 循环目前看起来像

```
while [x eq smth]; do
x=$((x+1))
done

some action 
```

在 if 内部（if 子句与 while 相同）中使用 while true 可能更有效。此外，使用 bash 评估每一步所需时间的最佳情况是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:36:01.683

Bash 中迄今为止最大的性能损失和最常见的性能问题是不必要的分叉。

```
while [[ something ]]
do
    var+=$(echo "$expression" | awk '{print $1}')
done 
```

将比慢数千倍

```
while [[ something ]]
do
    var+=${expression%% *}
done 
```

因为前者每次迭代会导致两次分叉，而后者不会导致。

导致分叉的因素包括但不限于`pipe | lines`, `$(command expansion)`, `<(process substitution)`, `(explicit subshells)`, 以及使用未列出的任何命令`help`（`type somecmd`将标识为“内置”或“shell 关键字”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:30:13.197

对于初学者来说，您可以删除`$(`，这会创建一个子shell，并且肯定会稍微减慢任务速度

```
while [ x -eq smth ]
do
  (( x++ ))
done 
```

# c++ - 是否可以使用 Visual Studio 6.0 C++ 打开并执行 Visual Studio C++ Win32 控制台应用程序项目？

> ID：14816656
> 
> 赞同：-2
> 
> 时间：2013-02-11T16:42:36.980
> 
> 标签：c++, winapi, console

我的学校仍然使用 MS VS 6.0 C++，不要问为什么......提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:34:11.673

VS 6 无法直接打开 VS 2010 项目文件。

您可以在 VS 6 中创建一个新工作区，并将现有文件添加到其中。

然而，代码可能无法编译——VC++ 6 已经很老了（早于 1998 年标准），所以很多现代代码无法使用它。根据您编写代码的方式，将其移植到 VC++ 6 上工作可能很简单，也可能从头开始完全重写。

# java - 如何把这个程序分成几个类

> ID：14816661
> 
> 赞同：0
> 
> 时间：2013-02-11T16:42:55.260
> 
> 标签：java, swing, class

我使用 Java Swing 框架在 Java 中找到了一个简单计算器的实现。

源代码在这里：

```
//Imports are listed in full to show what's being used
//could just import javax.swing.* and java.awt.* etc..
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.BorderLayout;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.JButton;
import java.awt.Container;

public class SimpleCalc implements ActionListener{

    JFrame guiFrame;
    JPanel buttonPanel;
    JTextField numberCalc;
    int calcOperation = 0;
    int currentCalc;

    //Note: Typically the main method will be in a
    //separate class. As this is a simple one class
    //example it's all in the one class.
    public static void main(String[] args) {

         //Use the event dispatch thread for Swing components
         EventQueue.invokeLater(new Runnable()
         {

            @Override
             public void run()
             {

                 new SimpleCalc();         
             }
         });

    }

    public SimpleCalc()
    {
        guiFrame = new JFrame();

        //make sure the program exits when the frame closes
        guiFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        guiFrame.setTitle("Simple Calculator");
        guiFrame.setSize(300,300);

        //This will center the JFrame in the middle of the screen
        guiFrame.setLocationRelativeTo(null);

        numberCalc = new JTextField();
        numberCalc.setHorizontalAlignment(JTextField.RIGHT);
        numberCalc.setEditable(false);

        guiFrame.add(numberCalc, BorderLayout.NORTH);

        buttonPanel = new JPanel();

        //Make a Grid that has three rows and four columns
        buttonPanel.setLayout(new GridLayout(4,3));   
        guiFrame.add(buttonPanel, BorderLayout.CENTER);

        //Add the number buttons
        for (int i=1;i<10;i++)
        {
            addButton(buttonPanel, String.valueOf(i));
        }

        JButton addButton = new JButton("+");
        addButton.setActionCommand("+");

        OperatorAction subAction = new OperatorAction(1);
        addButton.addActionListener(subAction);

        JButton subButton = new JButton("-");
        subButton.setActionCommand("-");

        OperatorAction addAction = new OperatorAction(2);
        subButton.addActionListener(addAction);

        JButton equalsButton = new JButton("=");
        equalsButton.setActionCommand("=");
        equalsButton.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent event)
            {
                if (!numberCalc.getText().isEmpty())
                {
                    int number = Integer.parseInt(numberCalc.getText()); 
                    if (calcOperation == 1)
                    {
                        int calculate = currentCalc  + number;
                        numberCalc.setText(Integer.toString(calculate));
                    }
                    else if (calcOperation == 2)
                    {
                        int calculate = currentCalc  - number;
                        numberCalc.setText(Integer.toString(calculate));
                    }
                }
            }
        });

        buttonPanel.add(addButton);
        buttonPanel.add(subButton);
        buttonPanel.add(equalsButton);
        guiFrame.setVisible(true);  
    }

    //All the buttons are following the same pattern
    //so create them all in one place.
    private void addButton(Container parent, String name)
    {
        JButton but = new JButton(name);
        but.setActionCommand(name);
        but.addActionListener(this);
        parent.add(but);
    }

    //As all the buttons are doing the same thing it's
    //easier to make the class implement the ActionListener
    //interface and control the button clicks from one place
    @Override
    public void actionPerformed(ActionEvent event)
    {
        //get the Action Command text from the button
        String action = event.getActionCommand();

        //set the text using the Action Command text
        numberCalc.setText(action);       
    }

    private class OperatorAction implements ActionListener
    {
        private int operator;

        public OperatorAction(int operation)
        {
            operator = operation;
        }

        public void actionPerformed(ActionEvent event)
        {
            currentCalc = Integer.parseInt(numberCalc.getText()); 
            calcOperation = operator;
        }
    }
} 
```

我想将 OperatorAction 类放入一个单独的类中，我已经尝试过，但是从 JTextField 获取文本时出现问题，因为该新类中不可用。那么如何做到这一点呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:46:36.340

您只需要另一个构造函数参数（和匹配的实例字段）：

```
class OperatorAction implements ActionListener
{
    private int operator;
    private SimpleCalc calc;

    public OperatorAction(SimpleCalc c, int operation)
    {
        calc = c;
        operator = operation;
    }

    public void actionPerformed(ActionEvent event) {
      calc.setCurrentCalc(Integer.parseInt( 
          ((JTextField)event.getSource()).getText()));
      calcOperation = operator;
    }
} 
```

`SimpleCalc#currentCalc`并通过设置器公开属性。

不过，这不是很简洁的设计，因为你在`OperatorAction`and之间仍然有紧密的耦合`SimpleCalc`，但这对你来说可能是一个开始。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T16:51:15.683

看起来您需要使用模型视图控制器（MVC）模式！MVC 是许多语言和系统不可或缺的一部分，因此学习非常重要！您要做的是将程序分成 3 层类，* *M* *odels、* *V* *iews 和 * *C* *ontrollers（在这种情况下，该项目可能很简单，只需使用其中的一个。 )

**模型**将存储您的数据，这些可以是几个类，也可以是整个数据库，具体取决于项目的大小。

**视图**将显示您的数据。

**控制器**将管理其余部分。

所以你在这里要做的是有一个模型，它只存储计算器的输入，一个控制器，它接受输入，进行实际的数学运算，并将输出推送到视图。

# html - 如何并排显示图像和表格

> ID：14816664
> 
> 赞同：5
> 
> 时间：2013-02-11T16:42:56.553
> 
> 标签：html

我似乎无法将徽标和桌子并排放置，但彼此之间的距离不是很近。我能够做到这一点的唯一方法是使用表格，但是图像和表格变得非常接近。我想在页面中间的表格，以及表格和左侧屏幕远端之间的标志。

像这样

徽标表

这就是现在的样子

标识

- -桌子

```
<div id="header" style="height:15%;width:100%;">
    <img src="/e-com/images/logo.jpg" style="margin-left:15%;margin-top:5%"/>
    <table border="1" width="44" style="margin-left:30%;float:top;"> 
    <tr>
            <td><h1><a href="home">Home</a></h1></td>
            <td><h1><a href="home">Home</a></h1></td>
            <td><h1><a href="home">Home</a></h1></td>
    </tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T16:45:34.607

使用两个 div 并设置为向左浮动

```
<div id="header" style="height:15%;width:100%;">
    <div style='float:left'>
        <img src="/e-com/images/logo.jpg" style="margin-left:15%;margin-top:5%"/>
    </div>
    <div style='float:leftt'>
        <table border="1" width="44" style="margin-left:30%;float:top;"> 
            <tr>
                <td><h1><a href="home">Home</a></h1></td>
                <td><h1><a href="home">Home</a></h1></td>
                <td><h1><a href="home">Home</a></h1></td>
            </tr>
        </table>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:47:11.363

1) 不要使用表格进行布局。了解如何使用浮点数。

2) 为您的徽标使用 CSS 背景图像。UI 元素（不是页面内容）应该是 CSS 背景，而不是内联图像。

假设您的徽标是 100 x 100（相应调整）：

```
.logoContainer {
      background-image:url(../yourimage.png);
      background-repeat:no-repeat
      padding-left:100px;
      min-height:100px;      
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T16:49:00.027

这应该是让你为你想要实现的目标而努力的简单方法。

[http://jsfiddle.net/8NDZP/](http://jsfiddle.net/8NDZP/)

```
<div style='float:left'>
    <img src='http://upload.wikimedia.org/wikipedia/commons/thumb/d/d6/Moscow_July_2011-7a.jpg/325px-Moscow_July_2011-7a.jpg'>
</div>
<div style='float:right'>
    <table border="1" width="44" style="margin-left:30%;float:top;">
        <tr>
            <td>
                 <h1><a href="home">Home</a></h1>

            </td>
            <td>
                 <h1><a href="home">Home</a></h1>

            </td>
            <td>
                 <h1><a href="home">Home</a></h1>

            </td>
        </tr>
    </table>
</div> 
```

# css - 我在哪里可以找到 Firefox 的默认 CSS？

> ID：14816665
> 
> 赞同：5
> 
> 时间：2013-02-11T16:43:03.197
> 
> 标签：css, firefox, settings, default

我想为某些 <div> 使用与 Firefox 的 <pre> 相同的字体。显然这不是 Courier New；他们看起来不同。我在哪里可以找到包含所有 Firefox 默认 CSS 的文件？我查看了安装文件夹，但在那里找不到单个 CSS 文件，也找不到子文件夹。

# node.js - 我如何在本地机器窗口 xp 中使用 node.js

> ID：14816666
> 
> 赞同：1
> 
> 时间：2013-02-11T16:43:08.437
> 
> 标签：node.js, socket.io

我想通过使用 PHP、node.js 和 socket.io 来集成聊天系统。为此，我在本地 windows xp (node-v0.8.19-x86.msi) 中安装了 node.js，当我从开始栏中单击 node.js 图标时，它显示就像带有“>”的命令模式一样。我的问题是下一步是什么，我应该在哪里编写代码以及它如何与 php 连接以及如何嵌入 socket.io。还是需要更多步骤来完成 node.js 安装过程？

请帮帮我，我是 node.js 和 socket.io 的第一名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:53:22.210

> 当我从开始栏中单击 node.js 图标时，它显示就像带有“>”的命令模式一样。

这是 node.js 解释器，你不需要运行它来运行 node.js 服务器。

首先，创建一个你想编写服务器代码的文件夹，从命令行访问这个文件夹并使用 NPM 安装 Socket.IO

例如，假设您创建了文件夹“MyNodeServer”：

`C:\MyNodeServer> npm install socket.io`

这将`node_modules`在您的项目文件夹中创建文件夹并将最新版本的 socket.io 安装到其中。

现在你可以开始构建你的服务器了，实际上，如果你想从你的客户端连接到你的 node/socket.io 服务器，你实际上并不需要 PHP，Socket.IO 正在为你的客户端提供它的套接字对象文件。如果你想建立一个聊天服务器，这是我几个月前写的一个教程，在客户端使用 node.js、socket.io 和 jquery：

[http://udidu.blogspot.co.il/2012/11/chat-evolution-nodejs-and-socketio.html](http://udidu.blogspot.co.il/2012/11/chat-evolution-nodejs-and-socketio.html)

在这里你可以下载这个聊天项目：

[https://github.com/uditalias/chat-nodejs](https://github.com/uditalias/chat-nodejs)

祝你好运！

# perl - perl 新手；遇到一些我不确定的错误

> ID：14816672
> 
> 赞同：-2
> 
> 时间：2013-02-11T16:43:26.540
> 
> 标签：perl

我似乎无法弄清楚为什么在尝试运行我的 .pl 脚本时会出现此错误。

这是脚本：

```
# mini script for creating diff files in a single directory

# directory of patch files
$patchDir = "c:\oc\Patch Files";

if ($#ARGV != 1 && $#ARGV != 2)
{
    print "Usage: diff <file name> [-s]\n";
    print "Example:  \n";
    print "   |Diff relative to Index (staged)|  :  diff MOM00123456_1.patch \n";
    print "   |Diff Staged|                      :  diff MOM00123456_1.patch -s \n";
    exit;
}

$fileName = $ARGV[0];

if ($#ARGV == 2)
    $stagedArg = $ARGV[1];

if ($stagedArg)
    if ($stagedArg == "-s" || $stagedArg == "-S")
        system("git diff --staged --full-index > $fileName $patchDir");
    else
    {
        print "Unknown argument:  $stagedArg\n";
        exit;
    }
else
    system("git diff --full-index > $fileName $patchDir"); 
```

测试：

> diff.pl test.patch -s

输出：

> 标量在 C:\utils\diff.pl 第 18 行附近的运算符预期位置找到
> 
> ")
> 
> $stagedArg"
> 
> （在 $stagedArg 之前缺少运算符？） C:\utils\diff.pl 第 18 行，“附近”的语法错误）
> 
> $stagedArg " C:\utils\diff.pl 第 21 行的语法错误，靠近 ")
> 
> 如果” C:\utils\diff.pl 的执行由于编译错误而中止。
> 
> 由于编译错误，C:\utils\diff.pl 的执行中止。

有人可以阐明一下吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T16:46:07.017

Perl`if`语法是：

```
if (condition) {
    statements;
} 
```

你不能省略花括号。

* * *

你可能会觉得`use diagnostics;`有用。给定一个简单的测试脚本：

```
use strict;
use warnings;
use diagnostics;
if (1) 
    print 1; 
```

我们得到：

```
syntax error at - line 5, near ") 
    print"
Execution of - aborted due to compilation errors (#1) 
```

> (F) 可能意味着您有语法错误。常见原因包括：
> 
> *   关键字拼写错误。
> *   缺少一个分号。
> *   缺少一个逗号。
> *   缺少左括号或右括号。
> *   **缺少左大括号或右大括号。**
> *   缺少结束引号。
> 
> 通常会有另一条与语法错误相关的错误消息，提供更多信息。（有时打开 -w 会有所帮助。）错误消息本身通常会告诉您当它决定放弃时它在哪里。有时实际错误是在此之前的几个标记，因为 Perl 擅长理解随机输入。有时，行号可能会产生误导，而一旦在一个蓝月亮上，找出触发错误的唯一方法就是反复调用 perl -c ，每次都砍掉一半的程序，看看错误是否消失了。20 个问题的控制论版本。

```
Uncaught exception from user code:
    syntax error at - line 5, near ") 
        print"
    Execution of - aborted due to compilation errors. 
```

# iphone - 如何隐藏 UIView 的子框架？

> ID：14816674
> 
> 赞同：6
> 
> 时间：2013-02-11T16:43:28.063
> 
> 标签：iphone, ios, objective-c, uiview

假设我有一个带有框架 (0,0,100,30) 的 UIImageView。该 imageView 被分配了一个图像。

只显示部分图像的最简单方法是什么？

例如：仅出现在点 30-60（宽度）和 0-30（高度）中的内容。这意味着应该隐藏图像的左右边缘。

只是为了澄清，我不想移动视图也不想改变它的大小，我只想隐藏它的框架的一个子区域。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T16:49:13.407

你总是可以设置一个面具。

```
CALayer *maskLayer = [CALayer layer];
maskLayer.backgroundColor = [UIColor blackColor].CGColor;
maskLayer.frame = CGRectmake(30.0, 0.0, 30.0, 30.0);

view.layer.mask = maskLayer; 
```

蒙版可以是任何类型的图层，因此您甚至可以将 a`CAShapeLayer`用于复杂的蒙版并做一些非常酷的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-15T16:47:36.647

我发现这个解决方案对我有用，[https://stackoverflow.com/a/39917334/3192115](https://stackoverflow.com/a/39917334/3192115)

```
func mask(withRect rect: CGRect, inverse: Bool = false) {
    let path = UIBezierPath(rect: rect)
    let maskLayer = CAShapeLayer()

    if inverse {
        path.append(UIBezierPath(rect: self.view.bounds))
        maskLayer.fillRule = kCAFillRuleEvenOdd
    }

    maskLayer.path = path.cgPath
    imageView?.layer.mask = maskLayer
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T16:48:23.913

我相信掩盖图像是最好的选择。但是，如果您要旋转、变换、动画或想要清晰的背景，您可以执行以下操作：

创建一个子视图，它是您要显示的图像的大小。确保它必须`clipsToBounds`正确并相应地定位图像。

```
UIView *mainView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 30)];

//this is the part of the image you wish to see
UIView *imageWindow = [[UIView alloc] initWithFrame:CGRectMake(30, 0, 30, 30)];
imageWindow.clipsToBounds = YES;

//your image view is the height and width of mainView and x and y is imageWindow - mainView. You can do this manually or put in calculations.
UIImageView *myImage = [[UIImageView alloc] initWithFrame:CGRectMake(imageWindow.frame.origin.x - mainView.frame.origin.x, imageWindow.frame.origin.y - mainView.frame.origin.y, mainView.frame.size.width, mainView.frame.size.height)];
myImage.image = [UIImage imageNamed:@"1024x1024.png"];

[imageWindow addSubview:myImage];
[mainView addSubview:imageWindow];
[self.view addSubview:mainView]; 
```

查看我的代码，我认为没有`mainView`必要，您可以`imageWindow`直接添加到 self.view。

# sql - JOIN - 获取一张完整的桌子和另一张桌子的其余部分

> ID：14816675
> 
> 赞同：1
> 
> 时间：2013-02-11T16:43:32.017
> 
> 标签：sql, oracle, join

大家好，这是我的架构：[http ://sqlfiddle.com/#!4/82771](http://sqlfiddle.com/#!4/82771)

```
CREATE TABLE t1
(
Age INT,
 Name VARCHAR(20)
);

CREATE TABLE t2
(
 Age INT,
 Name VARCHAR(20)
);

INSERT INTO t1(Age, Name) VALUES(31, NULL);
INSERT INTO t1(Age, Name) VALUES(32, NULL);
INSERT INTO t1(Age, Name) VALUES(33, NULL);
INSERT INTO t1(Age, Name) VALUES(34, NULL);

INSERT INTO t2(Age, Name) VALUES(31, 'Panos'); 
```

我需要一个 Join 查询，它会给我这个结果：

```
Age    Name
31    'Panos'
32     Null
33     Null
34     Null 
```

我已经在 Age 上尝试了 LEFT JOIN 和 RIGHT JOIN，但我无法得到我需要的东西。它应该很简单，但它只是不来找我......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:45:36.743

也许你在做的时候错过了一些东西`LEFT JOIN`。也可以使用 coalesce 返回第一个*非空*值。

```
SELECT  t1.Age, COALESCE(t2.name, t1.Name) Name
FROM    t1 
        LEFT JOIN t2
            ON t1.Age = t2.Age 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!4/82771/7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:47:11.250

一种方法是使用 union all 然后检查第二个表中是否不存在：

```
select *
from t1
union all
select *
from t2
where Not exists (select 1 from t1 where t1.age = t2.age) 
```

# windows - 通过 WCF 数据服务 (Silverlight) 获取 Windows 用户名

> ID：14816684
> 
> 赞同：0
> 
> 时间：2013-02-11T16:43:46.800
> 
> 标签：windows, wcf

我正在尝试使用 WCF 数据服务为我的 silverlight 4 应用程序获取 Windows 用户名。当我从本地计算机调试应用程序时，我看到了用户名。但是当我从 Web 服务器运行应用程序时，用户名显示为空。如果您需要任何其他详细信息，请告诉我。任何帮助是极大的赞赏。

**这是我用来获取用户名的方法：**

```
[OperationContract]
public string GetWindowsUsername()
{
    string usr = HttpContext.Current.User.Identity.Name;
    return usr.ToString();
} 
```

**这是我的 Web.Config ：**

```
 <system.web>
        <compilation debug="true" targetFramework="4.0" />
      <httpRuntime maxRequestLength="2147483647" />
      <authentication mode="Windows" />
      <!--<anonymousIdentification enabled="true"/>-->
      <authorization>
        <allow users="*"/>
      </authorization>
      <!--<identity impersonate="false" />-->
    </system.web>
 <system.serviceModel>
        <behaviors>
            <serviceBehaviors>
                <behavior name="">
                    <serviceMetadata httpGetEnabled="true" />
                    <serviceDebug includeExceptionDetailInFaults="false" />
                    <dataContractSerializer maxItemsInObjectGraph="2147483647" />
                </behavior>
            </serviceBehaviors>
        </behaviors>
        <bindings>
            <basicHttpBinding>
                <binding name="OrderTrackingSystem.Web.OTSService.customBinding0"
                    maxBufferPoolSize="2147483647" maxBufferSize="2147483647"
                    maxReceivedMessageSize="2147483647" transferMode="Streamed">
                    <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
                        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
                  <security>
                    <transport clientCredentialType="Ntlm" />
                  </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
        <services>
            <service name="OrderTrackingSystem.Web.OTSService">
                <endpoint address="" binding="basicHttpBinding" bindingConfiguration="OrderTrackingSystem.Web.OTSService.customBinding0"
                    name="OTSServiceCustom" contract="OrderTrackingSystem.Web.OTSService" />
            </service>
        </services>
    </system.serviceModel> 
```

**这是我的服务配置：**

```
<configuration>
  <system.serviceModel> 
    <bindings>
      <basicHttpBinding>
        <binding name="OTSServiceCustom" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" />
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:49458/OTSService.svc" binding="basicHttpBinding"
        bindingConfiguration="OTSServiceCustom" contract="OTSProxy.OTSService"
        name="OTSServiceCustom" />
    </client>
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:01:53.270

我试图创建一个演示应用程序来测试东西，以下对我有用..

```
[OperationContract]
public string GetWindowsUsername()
{
    string usr = ServiceSecurityContext.Current.WindowsIdentity.Name;
    return usr;
} 
```

但是为了完成这项工作，您必须将绑定配置为：

```
<bindings>
   <basicHttpBinding>
        <binding name="OTSServiceCustom">
           <security mode="TransportCredentialOnly">
                <transport clientCredentialType="Ntlm" proxyCredentialType="None" />
           </security>
    </binding>
  </basicHttpBinding>
</bindings> 
```

希望这可以帮助...

# c# - .NET 2 个数据表在一个数据集中

> ID：14816685
> 
> 赞同：0
> 
> 时间：2013-02-11T16:43:47.697
> 
> 标签：c#, asp.net, .net, datatable, dataset

我有一个填充网格视图的数据集。网格视图必须填充一个数据集和多个查询（或本例中的数据表）。

正如您在代码中看到的那样，我使用了 2 个数据表。这些数据表是从数据库（使用 sql server）中填充的。数据表被添加到一个数据集中。在 ASP 代码中，您可以看到 gridview 中有 3 个标签和 3 个列。前 2 列来自第一个数据表或第一个查询。第二个查询填充最后一列或第三列。

当我运行此代码时，它在数据集中找不到`lblThree`。`LblThree`在数据集中，但在第二个表中，.NET 不知道我猜。你们知道这个错误的解决方案，所以我可以用一个数据集填充我的gridview吗？

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.Data.SqlClient;

namespace TwoDatatableToDataset
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

            if (!IsPostBack)
            {
                loadAll();
            }
        }

        private void loadAll()
        {   // STEP ONE Put one sql output in an empty dataset: (works well)
            //DataSet ds = new DataSet();
            //DataTable dt2 = new DataTable();
            //string sql = "select SID1 as lblOne, Charge_Amount as lblTwo from [xxx].[xxxx].[xxxx]";
            //SqlConnection Scon = new SqlConnection(ConfigurationManager.ConnectionStrings["testserver"].ConnectionString);
            //SqlCommand Scmd = new SqlCommand(sql, Scon);
            //Scmd.CommandType = CommandType.Text;
            //SqlDataAdapter adp = new SqlDataAdapter(Scmd); // all data in adapter
            //Scon.Open();
            //adp.Fill(ds); //Adapter in dataset
            //GridView1.DataSource = ds; //dataset in gridview
            //GridView1.DataBind();

            //STEP TWO Make 2 datatables set them in one dataset
            DataSet ds = new DataSet();
            DataTable dt = new DataTable();
            DataTable dt2 = new DataTable();

            string sql = "select SID1 as lblOne, Charge_Amount as lblTwo from [xxxx].[xxxx].[xxxx]";            
            SqlConnection Scon = new SqlConnection(ConfigurationManager.ConnectionStrings["testserver"].ConnectionString);
            SqlCommand Scmd = new SqlCommand(sql, Scon);
            Scmd.CommandType = CommandType.Text;
            SqlDataAdapter adp = new SqlDataAdapter(Scmd); // all data in adapter
            Scon.Open();
            adp.Fill(dt); //Adapter in dataset

            sql = "select Currency as lblThree from [xxx].[dbo].[tbl_xx_NI]";            
            Scmd = new SqlCommand(sql, Scon);
            Scmd.CommandType = CommandType.Text;
            adp = new SqlDataAdapter(Scmd); // all data in adapter
            adp.Fill(dt2); //Adapter in dataset

            ds.Tables.Add(dt); //add data table to data set
            ds.Tables.Add(dt2);

            GridView1.DataSource = ds; //dataset in gridview
            GridView1.DataBind(); // ERROR: A field or property with the name 'lblThree' was not found on the selected data source.

            Scon.Close();
        }
    }
}

    <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="TwoDatatableToDataset._Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
                    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
                    AutoGenerateDeleteButton="False" AutoGenerateEditButton="False">
                     <Columns>
                        <asp:BoundField DataField="lblOne" HeaderText="One" SortExpression="lblOne">
                            <ItemStyle Width="20%"/>
                        </asp:BoundField>
                        <asp:BoundField DataField="lblTwo" HeaderText="Two" SortExpression="lblTwo">
                            <ItemStyle Width="20%" />
                        </asp:BoundField>
                        <asp:BoundField DataField="lblThree" HeaderText="Three" SortExpression="lblThree">
                            <ItemStyle Width="20%" />
                        </asp:BoundField>   
                     </Columns>       
                </asp:GridView>    
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:48:14.080

您可能会调用`Merge`.

```
DataTable dt1 = ds.Tables[0];
DataTable dt2 = ds.Tables[1];
dt1.Merge(dt2); 
```

似乎这是您本质上要绑定的表。无论如何，试试这个并断点合并方法。走过去看看是什么`dt1`样子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:05:02.673

也许您可以像这样在 sql 命令中使用 UNION：

选择 SID1 作为 lblOne，Charge_Amount 作为 lblTwo from [xxxx].[xxxx].[xxxx] UNION 选择货币作为 lblThree from [xxxx].[dbo].[tbl_xx_NI]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T17:33:47.877

正确的解决方案实际上取决于您要做什么。不过，您可能需要考虑两个主要选项：

1.  以编程方式查询`DataSet`，并使用 LINQ 合并结果
2.  使用嵌套的`GridView`or`ListView`生成预期的输出

就个人而言，我会选择 LINQ 选项，但这取决于你。下面的文章应该可以帮助您指出正确的方向。

[http://geekswithblogs.net/shahed/archive/2009/02/11/129310.aspx](http://geekswithblogs.net/shahed/archive/2009/02/11/129310.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T18:03:50.700

或者，您不能在数据库中创建一个视图，使用您将在查询中使用的过滤器，以便它表示一个包含您需要的所有信息的数据集，以便您可以查询视图并存储结果是一个数据表？

# mysql - MySQL 中的触发器

> ID：14816686
> 
> 赞同：1
> 
> 时间：2013-02-11T16:43:52.137
> 
> 标签：mysql, triggers

我有房地产数据库。因为我想在特定时间事件后删除记录，比如 22 天。我想写一个触发器，它会在 22 天后自动从表中删除记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:54:42.877

像这样的东西：

```
CREATE EVENT CheckDeletes
ON SCHEDULE 
EVERY 1 DAY 
DO 
  DELETE FROM YourTable WHERE DATEDIFF(NOW(), YourField) > 22 
```

[http://dev.mysql.com/doc/refman/5.1/en/create-event.html](http://dev.mysql.com/doc/refman/5.1/en/create-event.html)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:56:33.200

触发器会根据数据库中的某些特定操作立即触发。您可能需要做的是创建一个脚本，您可以按预定时间间隔（通过 cron 或类似方法）运行该脚本，以查找超过 22 天或其他任何时间的记录并删除它们。

# c# - Datagrid selectedItem 和数据绑定

> ID：14816687
> 
> 赞同：5
> 
> 时间：2013-02-11T16:43:53.283
> 
> 标签：c#, wpf, xaml, wpf-controls, wpfdatagrid

我的 UI 上显示了两个数据网格。当我在数据网格 1 上选择特定行时，我想在数据网格 2 上显示数据网格 1 的详细信息。我正在从数据库中填充数据网格数据。这里是两个数据库表结构。

注意：这两个表都是由数据库中的personid映射的

![人表](../Images/d9a0b8e5d5a4a580081cfee9a94f35bb.png)

![人员详细信息表](../Images/72dbd751acafb12482211290b28645a0.png)

这是到目前为止我尝试过的代码

基类.cs

```
public class Baseclass
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected void SetProperty<T>(ref T member, T value, [CallerMemberName] string propertyName = null)
    {
        member = value;
        this.RaiseNotification(propertyName);
    }

    protected void RaiseNotification(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged.Invoke(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

个人.cs

```
public class person : Baseclass
{

    private int personID;
    public int PersonID
    {
        get { return personID; }
        set { this.SetProperty<int>(ref this.personID, value); }
    }

    private string firstName;
    public string FirstName
    {
        get { return firstName; }
        set { this.SetProperty<string>(ref this.firstName, value); }
    }

    private string lastName;
    public string LastName
    {
        get { return lastName; }
        set { this.SetProperty<string>(ref this.lastName, value); }
    }

    Model _personModel = new Model();
    private ObservableCollection<person> _person = new ObservableCollection<person>();
    public ObservableCollection<person> Getpersons
    {
        get { return _person; }
        set { _person = value; OnPropertyChanged("GetPersons"); }
    }

    public person()
    {
        initializeload();
    }

    private void initializeload()
    {
        try
        {
            DataTable table = _personModel.getData();

            for (int i = 0; i < table.Rows.Count; ++i)
                Getpersons.Add(new person
                {
                 PersonID = Convert.ToInt32(table.Rows[i][0]),
                 FirstName = table.Rows[i][1].ToString(),
                 LastName = table.Rows[i][2].ToString(),
                });
        }

        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }
    }
    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propertyname)
    {
        var handler = PropertyChanged;
        if (handler != null)
            handler(this, new PropertyChangedEventArgs(propertyname));
    }

    public class Model
    {
        public DataTable getData()
        {
            DataTable ndt = new DataTable();
            SqlConnection sqlcon = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
            sqlcon.Open();
            SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM [Person].[dbo].[persons]", sqlcon);
            da.Fill(ndt);
            da.Dispose();
            sqlcon.Close();
            return ndt;
        }
    }

} 
```

PersonDetail 类

```
public  class PersonDetails : Baseclass
{
    private int personID;
    public int PersonID
    {
        get { return personID; }
        set { this.SetProperty<int>(ref this.personID, value); }
    }

    private string address;
    public string Address
    {
        get { return address; }
        set { this.SetProperty<string>(ref this.address, value); }
    }

    private string pos;
    public string Position
    {
        get { return pos; }
        set { this.SetProperty<string>(ref this.pos, value); }
    }

    DetailsModel _detailModel = new DetailsModel();
    private ObservableCollection<PersonDetails> _details = new ObservableCollection<PersonDetails>();
    public ObservableCollection<PersonDetails> GetDetails
    {
        get { return _details; }
        set { _details = value; OnPropertyChanged("GetDetails"); }
    }
    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propertyname)
    {
        var handler = PropertyChanged;
        if (handler != null)
            handler(this, new PropertyChangedEventArgs(propertyname));
    }

    public PersonDetails()
    {
        initializeload();
    }

    private void initializeload()
    {
        try
        {
            DataTable table = _detailModel.getData();

            for (int i = 0; i < table.Rows.Count; ++i)
                GetDetails.Add(new PersonDetails
                {
                    PersonID = Convert.ToInt32(table.Rows[i][0]),
                    Address = table.Rows[i][1].ToString(),
                    Position = table.Rows[i][2].ToString(),                        
                });
        }

        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }
    }
    public class DetailsModel
    {
        public DataTable getData()
        {
            DataTable ndt = new DataTable();
            SqlConnection sqlcon = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
            sqlcon.Open();
            SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM [Person].[dbo].[personDetails]", sqlcon);
            da.Fill(ndt);
            da.Dispose();
            sqlcon.Close();
            return ndt;
        }
    }
} 
```

主视图模型.cs

```
 public class MainViewModel : Base, INotifyPropertyChanged
{
    public MainViewModel()
    {
    }

    private ObservableCollection<person> personValues;
    public ObservableCollection<person> Persons
    {
        get { return personValues; }
        set
        {
            this.SetProperty<ObservableCollection<person>>(ref this.personValues, value);
        }
    }

    private ObservableCollection<PersonDetails> detailsValues;
    public ObservableCollection<PersonDetails> Details
    {
        /* This is correct below ?? I have an error as 
        'PersonDemo.MainViewModel' does not contain a definition for 'GetDetails' and no extension method 'GetDetails' accepting a first argument of type 'PersonDemo.MainViewModel' could be found (are you missing a using directive or an assembly reference?)*/
        get { return this.GetDetails(this.Selectedperson.PersonID); }
    }

    private person selectedValue;
    public person Selectedperson
    {
        get { return selectedValue; }
        set
        {
            this.SetProperty<person>(ref this.selectedValue, value);
            this.RaiseNotification("Details");
        }
    }

} 
```

XAML

```
 <Grid>
  <DataGrid Margin="100,20,116,211" ItemsSource="{Binding Persons}" SelectedItem="{Binding Selectedperson}"  />
  <DataGrid Margin="100,130,116,101" ItemsSource="{Binding Details}" />
  </Grid> 
```

任何人都可以帮助继续编写 MainViewModel 吗？几个星期以来我都被困在这里。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T19:58:10.127

首先，我建议使用`INotifyPropertyChanged`基类中的接口。也许您使用它并忘记在示例代码中编写它。为了使用 MVVM 模式实现这一点，您需要为两个数据网格实现一个 ViewModel。让我们在我们的示例`BothGridViewModel`中调用它，您可以随意调用它。然后在这个视图模型中你需要所有人的集合，我们称之为它`AllPerson`，然后你需要有一个`Person`类型的属性，当你在网格中有选定的人时，我们称之为它`SelectedPerson`。它会是这样的：

```
public class BothGridViewModel:INotifyPropertyChanged
{
    ...
    public ObservableCollection<Person> AllPersons {...}
    public Person SelectedPerson {...}
    ...
} 
```

您只需要在 View 的 DataContext 中设置它。和绑定：

```
<YourView DataContext={Binding SomeBothGridViewModelClass}>
    <Grid>
     <DataGrid Margin="100,20,116,211" ItemsSource="{Binding AllPersons}" SelectedItem="{Binding SelectedPerson}"  />
     <DataGrid Margin="100,130,116,101" ItemsSource="{Binding SelectedPerson.Getpersons}" /> <!--Or some SelectedPerson.PersonDetails.GetDetails-->
  </Grid>
</YourView DataContext={Binding SomeBothGridViewModelClass}> 
```

我认为这是制作您想要的东西的良好视图模型结构。希望这可以帮助你...

* * *

编辑

* * *

我现在明白你的意思了，你有两个数据库表，一个用于主要属性，另一个用于详细信息。我看到了这样做的两种好方法：1）第一种方法是，我不相信第二个数据网格对于每个没有详细信息集合的人都是必要的。相反，您可以使用网格和其他控件来显示属性。另外我认为你必须为这个人实现一个视图模型，例如：

```
public class PersonViewModel:INotifyPropertyChanged
{
     public string FirstName {...}
     public string LastName {...}
     //Other properties

     public PersonDetails Details {...}
} 
```

然后在网格中，您可以将项目源绑定到一个集合，`PersonViewModel`然后您可以绑定到网格的选定项目，例如：

```
<Grid>
    <DataGrid x:Name="dataGrid" ItemsSource={Binding AllPersonViewModels}/>
    ...
    <!--Then some combo box, text block or text box binding to a property of the selected item's details-->
          ...
          <TextBox Text={Binding SelectedItem.Details.Address, ElementName=dataGrid}/>
          ...
<Grid> 
```

2）我认为可以完成的第二种方法是在同一个数据网格中显示所有数据。为此，您需要以`PersonViewModel`这种方式上课：

```
public class PersonViewModel:INotifyPropertyChanged
{
     public string FirstName {...}
     public string LastName {...}
     //Other properties

     //Then the Details properties
     public string Address {...}
     //...
     //Note this class is like a wrapper for person, and person details
} 
```

这种方式稍微简单一些，但可能会导致不需要的数据库过度访问。

* * *

编辑 2

* * *

在看了你的代码之后，我不得不说几件事：在`PersonViewModel`and`PersonDetailViewModel`你应该使用 a`DispatcherTimer`而不是 a `Timer`，因为我们在 Wpf 中。另一件事，也许您应该使用存储库模式来创建一个`PersonRepository`和一个`PersonDetailRepository`放置所有数据库通信的位置，实际上，`PersonViewModel`并且`PersonDetailViewModel`在某种程度上是一个存储库，但是现在您不需要更改它，它应该工作。我将在这里向您展示 的代码`MainViewModel`，我将其修改为具有 SelectedPersonDetail 属性，这样，您所需要做的就是在 View 中进行绑定：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using tryout13022013.PersonViewModels;
using System.ComponentModel;
using tryout13022013.DetailsViewModel;
using tryout13022013.PersonModel;

namespace tryout13022013
{
    public class MainViewModel
    {
        private PersonViewModel _subPerson = new PersonViewModel();
        public PersonViewModel SubPerson
        {
            get 
            {
                return _subPerson;
            }
            set
            {
                if (_subPerson != value)
                {
                    _subPerson = value; OnPropertyChanged("SubPerson");

                }
            }
        }

        private PersonDetailsViewModel _subDetail = new PersonDetailsViewModel();
        public PersonDetailsViewModel SubDetail
        {
            get { return _subDetail; }
            set 
            {
                _subDetail = value; OnPropertyChanged("SubDetail");
            }

        }

        private Person _selectedPerson;
        public Person SelectedPerson
        {
            get { return _selectedPerson; }
            set {
                if (_selectedPerson != value)
                {
                    _selectedPerson = value;
                    OnPropertyChanged("SelectedPerson");
                    OnPropertyChanged("SelectedPersonDetail");  //In this way when Change the Selected Person, the Selected Detail will be changed again...
                    //if (this.SelectedPerson != null && this.SubDetail != null)
                    //{
                       // I dont know how to call the PersonDetailsViewModel class like a method here in order to load its data. kindly help
                       //this.SubDetail.MethodforLoadingPersonDetails(this.SelectedPerson);
                    //}
                }
            }

        }

        public PersonDetails SelectedPersonDetail
        {
            get
            {
                if (SubDetail == null || SelectedPerson ==null)
                    return  null;
                return SubDetails.DetailsData.FirstOrDefault(detail => detail.PersonID == SelectedPerson.PersonID);
            }           

        }

        public event PropertyChangedEventHandler PropertyChanged;

        private void OnPropertyChanged(string propertyname)
        {
            var handler = PropertyChanged;
            if (handler != null)
                handler(this, new PropertyChangedEventArgs(propertyname));
        }
    }
} 
```

这是您可以在视图中进行的绑定的一个实例，在这种情况下用于选择第二个网格中的项目：

```
<Window x:Class="tryout13022013.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:person="clr-namespace:tryout13022013.PersonViewModels"
    xmlns:details="clr-namespace:tryout13022013.DetailsViewModel"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <DataGrid ItemsSource="{Binding SubPerson.PersonData}"  SelectedItem="{Binding SelectedPerson, Mode=TwoWay}"
        AutoGenerateColumns="False" Height="77" HorizontalAlignment="Left"
        Margin="101,26,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="auto" >
        <DataGrid.DataContext>
            <person:PersonViewModel/>
        </DataGrid.DataContext>
        <DataGrid.Columns>
            <DataGridTextColumn Header="ID" Width="auto" Binding="{Binding PersonID}"/>
            <DataGridTextColumn Header="First Name" Width="auto" Binding="{Binding FirstName}"/>
            <DataGridTextColumn Header="Last Name" Width="auto" Binding="{Binding LastName}"/>     
        </DataGrid.Columns>
    </DataGrid>

    <DataGrid ItemsSource="{Binding SubDetail.DetailsData}" 
        AutoGenerateColumns="False" Height="77" HorizontalAlignment="Left" 
        Margin="101,135,0,0" Name="dataGrid2" VerticalAlignment="Top" Width="255" SelectedItem="{Binding SelectedPersonDetail, Mode=OneWayToSource}">
        <DataGrid.DataContext>
            <details:PersonDetailsViewModel/>
        </DataGrid.DataContext>
        <DataGrid.Columns>
            <DataGridTextColumn Header="ID" Width="auto" Binding="{Binding PersonID}"/>
            <DataGridTextColumn Header="Address" Width="auto" Binding="{Binding Address}"/>
            <DataGridTextColumn Header="Position" Width="auto" Binding="{Binding Description}"/>
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

我忘记了，你需要绑定到`SubPerson.PersonData`and `SubDetail.DetailsData`，这些是集合。一探究竟...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T11:51:40.307

Having had a chat with Buba1947 in [WPF](https://chat.stackoverflow.com/rooms/18165/wpf) room, I've concluded that she's actually got a 1-1 relation split table in database that she's actually trying to show as such in the split data grids.

I've proposed her to create a `PersonViewModel` on top of `Person` & `PersonDetails` tables so her `MainViewModel` contains only one `ObservableCollection<PersonViewModel>` under the `Persons` property to which we shall bind the two `DataGrids`.

so MainViewModel.cs (the DataContext) has:

```
private ObservableCollection<PersonViewModel> personValues; 
public ObservableCollection<PersonViewModel> Persons 
{ 
    get { return personValues; } 
    set { this.SetProperty<ObservableCollection<PersonViewModel>>(ref this.personValues, value); } 
} 
```

The data adaptor is changed to bring the data in using an inner join with relevant query being something along the lines of this (which fills the Persons property above):

```
"SELECT * FROM [Person].[dbo].[persons] INNER JOIN [Person].[dbo].[personDetails] ON [Person].[dbo].[persons].[Id] = [Person].[dbo].[personDetails].[Id]" 
```

Next we shall bind a `CollectionViewSource` to Persons in Xaml:

```
<Window.Resources>
    <CollectionViewSource x:Key="PersonsData" Source={Binding Persons} />
</Window.Resources> 
```

and bind `DataGrids` to this with individual columns:

```
<DataGrid ItemsSource={Binding Source={StaticResource PersonsData}} AutoGenerateColumns="false">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Person Id" Content={Binding PersonId} />
        <DataGridTextColumn Header="First Name" Content={Binding FirstName} />
        <DataGridTextColumn Header="Last Name" Content={Binding LastName} />
    </DataGrid.Columns>
</DataGrid>

<DataGrid ItemsSource={Binding Source={StaticResource PersonsData}} AutoGenerateColumns="false">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Person Id" Content={Binding PersonId} />
        <DataGridTextColumn Header="Address" Content={Binding Address} />
        <DataGridTextColumn Header="Position" Content={Binding Position} />
    </DataGrid.Columns>
</DataGrid> 
```

Note: there may be typo in here as I haven't got VS to hand, please let me know if I need to fix something. I've written all of this from memory.

# ajax - 在我使用 Ajax 时导航离开并返回主页后，Nivo Slider 中断

> ID：14816691
> 
> 赞同：1
> 
> 时间：2013-02-11T16:44:05.683
> 
> 标签：ajax, jquery, nivo-slider

我在使用 Ajax 加载其内容的网站中使用 Nivo Slider。它使用户免于在每次单击链接时加载新页面。

我的问题是，当我最初加载主页时，滑块工作正常；但是如果我离开那个页面然后回到它，它只会在循环中加载 gif。任何人都可以帮忙吗？

我`index.php`的是这样的：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>I.C.T - St. Patrick's Academy, Lisburn</title>
    <script type="text/javascript" src="assets/js/jqmin.js"></script>
    <link rel="stylesheet" type="text/css" href="assets/css/style.css" media="all" />
    <script type="text/javascript" src="assets/js/js.js"></script>
    <link rel="stylesheet" type="text/css" href="assets/css/nivo.css" media="all" />
    <script type="text/javascript" src="assets/js/sliderpack.js"></script>
    <script type="text/javascript" src="assets/js/slide.js"></script>
  </head>
  <body>
    <div id="wrap">
      <div id="head">
        <div id="links">
          <ul>
            <li><a href="includes/home.php" class="left">Home</a></li>
            <li><a href="includes/about.php">About</a></li>
            <li><a href="includes/contact.php">Contact</a></li>
            <li><a href="includes/learn.php" class="right">Learn</a></li>
          </ul>
        </div>
        <img src="assets/images/logo.png" alt="logo" />
      </div>
      <div id="screen">
        <div id="pad"></div>
        <div id="cont_wrap">
          <div id="cont">
            <h2>Home</h2>
            <div class="slider-wrapper">
              <div id="slider" class="nivoSlider">
                <img src="assets/images/slide1.jpg" alt="1" />
                <img src="assets/images/slide2.jpg" alt="2" />
                <img src="assets/images/slide3.jpg" alt="3" />
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="foot">
        <p align="center"><i>Copyright 2013 - Finbar Maginn - St. Patrick's Academy, Lisburn</i></p>
      </div>
    </div>
  </body>
</html> 
```

（请注意，我的 Nivo Slider 初始化在里面`slide.js`，看起来像这样：）

```
$(window).load(function() {
  $('#slider').nivoSlider({
    effect: 'random', // Specify sets like: 'fold,fade,sliceDown'
    slices: 16, // For slice animations
    boxCols: 6, // For box animations
    boxRows: 3, // For box animations
    animSpeed: 1000, // Slide transition speed
    pauseTime: 5000, // How long each slide will show
    startSlide: 0, // Set starting Slide (0 index)
    directionNav: false, // Next & Prev navigation
    controlNav: false, // 1,2,3... navigation
    controlNavThumbs: false, // Use thumbnails for Control Nav
    pauseOnHover: false, // Stop animation while hovering
    manualAdvance: false, // Force manual transitions
    prevText: 'Prev', // Prev directionNav text
    nextText: 'Next', // Next directionNav text
    randomStart: false, // Start on a random slide
    beforeChange: function(){}, // Triggers before a slide transition
    afterChange: function(){}, // Triggers after a slide transition
    slideshowEnd: function(){}, // Triggers after all slides have been shown
    lastSlide: function(){}, // Triggers when last slide is shown
    afterLoad: function(){} // Triggers when slider has loaded
  });
}); 
```

我正在使用的 Ajax jQuery 文件是这样的：

```
$(document).ready(function() {
  var hash = window.location.hash.substr(1);
  var href = $('#links li a').each(function(){
    var href = $(this).attr('href');
    if(hash==href.substr(0,href.length-3)){
      var toLoad = hash+'.php #cont';
      $('#cont').load(toLoad)
    }
  });
  $('#links li a').click(function(){
    var toLoad = $(this).attr('href')+' #cont';
    $('#cont').fadeOut('fast',loadContent);
    $('#load').remove();
    $('#wrap').append('<span id="load">LOADING...</span>');
    $('#load').fadeIn('fast');
    window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-4);
    function loadContent() {
      $('#cont').load(toLoad,'',showNewContent());
    }
    function showNewContent() {
      $('#cont').fadeIn('fast',hideLoader('fast'));
    }
    function hideLoader() {
      $('#load').fadeOut('fast');
    }
    return false;
  });
}); 
```

这是我的CSS：

```
body {
  font-size:95%;
  font-family:georgia;
  line-height:1.576;
}
h2 {
  padding:0;
  margin:0;
}
#wrap {
  margin:0 auto;
  width:784px;
}
#head {
  width:100%;
  height:175px;
}
#links {
  width:300px;
  height:30px;
  padding:140px 0 0 0;
  float:right;
  text-align:right;
}
#links ul {
  margin:0;
  padding:0;
}
#links ul li {
  display:inline;
  margin:0 -2px 0 -2px;
}
#links ul li a {
  font-size:1em;
  -webkit-transition: 0.1s;
  -moz-transition: 0.1s;
  -ms-transition: 0.1s;
  -o-transition: 0.1s;
  text-decoration:none;
  color:black;
  background:-webkit-linear-gradient(bottom, white, #74b998);
  background:-o-linear-gradient(bottom, white, #74b998);
  background:-ms-linear-gradient(bottom, white, #74b998);
  background:-moz-linear-gradient(bottom, white, #74b998);
  padding:3px 5px 3px 5px;
}
#links ul li a:hover {
  background:-webkit-linear-gradient(top, white, #74b998);
  background:-o-linear-gradient(top, white, #74b998);
  background:-ms-linear-gradient(top, white, #74b998);
  background:-moz-linear-gradient(top, white, #74b998);
  padding:7px 5px 7px 5px;
}
.left {
  border-bottom-left-radius:10px;
  -webkit-border-bottom-left-radius:10px;
  -moz-border-bottom-left-radius:10px;
  -ms-border-bottom-left-radius:10px;
  -o-border-bottom-left-radius:10px;
  border-top-left-radius:10px;
  -webkit-border-top-left-radius:10px;
  -moz-border-top-left-radius:10px;
  -ms-border-top-left-radius:10px;
  -o-border-top-left-radius:10px;
}
.right {
  border-bottom-right-radius:10px;
  -webkit-border-bottom-right-radius:10px;
  -moz-border-bottom-right-radius:10px;
  -ms-border-bottom-right-radius:10px;
  -o-border-bottom-right-radius:10px;
  border-top-right-radius:10px;
  -webkit-border-top-right-radius:10px;
  -moz-border-top-right-radius:10px;
  -ms-border-top-right-radius:10px;
  -o-border-top-right-radius:10px;
}
.radius {
  border-radius:10px;
  -webkit-border-radius:10px;
  -moz-border-radius:10px;
  -ms-border-radius:10px;
  -o-border-radius:10px;
}
#screen {
  width:100%;
  height:480px;
  background-image:url(../images/bckgrnd.png);
}
#pad {
  width:100%;
  height:29px;
}
#cont_wrap {
  overflow:auto;
  margin:0 auto;
  width:724px;
  height:335px;
  padding: 0 0 0 6px;
}
#load {
  display: none;
  position: absolute;
  top: 150px;
  left: 950px;
  text-indent: -9999em;
  width: 16px;
  height: 16px;
  background: url(../images/load.gif) no-repeat;
}
#cont {
}
#foot {
  width: 100%;
  font-size:90%;
  color:gray;
}
#slider {
  margin: 0 auto;
  width: 700px;
  height: 273px;
}
.nivoSlider {
  position: relative;
  background: url(../images/load.gif) no-repeat 50% 50%;
}
.nivoSlider img {
  position: absolute;
  top: 0px;
  left: 0px;
  display: none;
}
.nivoSlider a {
  border: 0;
  display: block;
} 
```

# sql-server - 在表值函数中使用命名参数

> ID：14816692
> 
> 赞同：5
> 
> 时间：2013-02-11T16:44:09.723
> 
> 标签：sql-server, tsql, function, sql-server-2012

有没有办法将命名参数与表值函数一起使用？我的用户坚持将它们与我的数据库对象的接口一起使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-11T10:32:15.383

No, you can't do that. Unlike stored procedures where you can use named parameters the parameters in table valued functions are strictly position-based.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-13T13:41:42.437

SQL-Server 2016 似乎已经改变了。SQL Server 2016 支持 T-SQL 函数中的命名参数[https://scribnasium.com/2017/01/named-parameters-in-t-sql-functions/](https://scribnasium.com/2017/01/named-parameters-in-t-sql-functions/)

# ruby-on-rails - 创建一个新的数据库记录然后将 id 发送到 Resque 返回 nil（找不到 id）

> ID：14816695
> 
> 赞同：0
> 
> 时间：2013-02-11T16:44:16.483
> 
> 标签：ruby-on-rails, mongoid, resque

我有一个用户对象，我从 twitter/facebook 获取用户数据，然后点击保存，最后将和`user_id`发送`avatar_url`到`Resque.enqueue`.

```
self.save!

Resque.enqueue(AvatarPull, {user_id: self.id, url: user[:avatar] }) if user[:avatar] and self.avatar.blank? 
```

然后在`self.perform`我只是使用 find 通过 id 获取用户然后设置头像然后保存。

```
@queue = :paperclip

def self.perform(options={})

    user = User.find(options[:user_id])
    user.avatar = URI.parse(options[:url].sub("_normal", ""))
    user.save!
end 
```

问题是我因为没有按 id 找到用户而收到此错误

```
(Job{paperclip} | AvatarPull | [{"user_id"=>"51191a5e0eae9cfccf000006", "url"=>"http://source"}]) failed: #<Mongoid::Errors::InvalidFind: 

Problem:
Calling Document.find with nil is invalid.

Summary:
Document.find expects the parameters to be 1 or more ids, and will return a single document if 1 id is provided, otherwise an array of documents if multiple ids are provided.

Resolution:
Most likely this is caused by passing parameters directly through to the find, and the parameter either is not present or the key from which it is accessed is incorrect.> 
```

我认为这是因为进入队列所花费的时间少于将记录保存在数据库中所花费的时间。有没有办法解决这个问题，可能会增加延迟或者还有其他什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:01:16.747

Resque 作业存储为 JSON 包。这意味着传递给 perform 方法的选项哈希现在具有字符串而不是符号的键。请注意错误中“user_id”周围的引号。使用键的字符串表示应该可以工作：

```
user = User.find(options["user_id"]) 
```

# javascript - 如何绕过这个“script-source 'self'” Chrome 扩展错误

> ID：14816696
> 
> 赞同：0
> 
> 时间：2013-02-11T16:44:17.013
> 
> 标签：javascript, json, jquery, google-chrome-extension

所以我正在开发一个通过 goo.gl 缩短 URL 的 chrome 扩展

这是我的实际代码，如果它可能有帮助：

```
 $("#ajaxfiller").text("");
 //Get URL entered
 var longUrl = $("#input2").val();
 longUrl = '"' + longUrl + '"';

 function googlurl(url, cb) {
     jsonlib.fetch({
         url: 'https://www.googleapis.com/urlshortener/v1/url',
         header: 'Content-Type: application/json',

         // Just a static URL for shortening:

         data: JSON.stringify({
             longUrl: "https://google.com"
         })
     }, function (m) {
         var result = null;
         try {
             result = JSON.parse(m.content).id;
             if (typeof result != 'string') result = null;
         } catch (e) {
             result = null;
         }
         cb(result);
     });

 }

 googlurl(longUrl, function (s) {
     alert(s);
     $("#kinchyj").show();
     $("#ajaxfiller").val(s);
 }); 
```

![错误](../Images/fecc4ac98dc8ccf2eb271ddc9711cfe4.png)

注意：当我将扩展程序加载`popup.html`为常规网页时，它确实有效。

看来此错误是 Chrome 安全措施。无论如何我可以在清单中将其列入白名单吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:16:10.830

`manifest.json`您可以使用[此处](http://developer.chrome.com/extensions/contentSecurityPolicy.html)`content_security_policy`详细说明的方式修改安全策略。你需要的是：

```
"content_security_policy": "script-src 'self' https://www.googleapis.com/urlshortener/v1/url; object-src 'self'" 
```

如果没有看到 HTML，我无法判断，但最好将所有 JavaScript 移动到通过标签包含的*本地*外部文件中。`<script>`

# html - 在移动设备上查看和测试正在开发的纯 HTML 和 CSS

> ID：14816697
> 
> 赞同：0
> 
> 时间：2013-02-11T16:44:25.947
> 
> 标签：html, css

非常简单的前端开发问题。过去，当我们的前端承包商为我们的非移动 web 项目开发 html 和 css 时，他会创建一个 html/css 模型页面，并在开发时直接在他的浏览器中打开文件，例如 file:///Users/me/code/proj/file.html 。一旦模型文件看起来不错，他就会将它们传递给我们，后端开发人员，我们调整它们以处理真实数据并在我们的平台上运行。

现在，我们正在开发一个专门针对移动设备的网站，并且我们正在尝试调整我们的开发流程。我希望他仍然能够开发简单的 html/css 模型文件，但他不确定如何在开发过程中对其进行测试。让他运行我们的核心开发人员使用的完整 Web 应用程序开发平台并不是一个直接的选择。

那么，对于移动设备（android 和 ios，atm），在实际设备或模拟器上持续查看正在开发的简单 html/css 的最简单方法是什么？我看不到在 iOS 模拟器中打开文件系统文件的方法。我应该让他运行一个简单的网络服务器吗？（如果是，那是哪一个？）您的前端人员通常会做什么来有效地为移动设备开发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:54:49.573

我是技术作家，而不是开发人员。我们最近开始为移动设备创建帮助。初始测试是这样完成的：

*   我们有一个本地 Apache Tomcat 安装（我们使用 Windows，但 Tomcat 也可以在 Mac 上运行）。
*   我们在 Tomcat Web 目录中创建一个子文件夹。这是我们的帮助文件所在的位置。
*   当我们调用 myhost:8080/myfolder 或类似的东西时，会显示我们输出的 index.html 页面。
*   [然后我们使用http://www.responsinator.com/](http://www.responsinator.com/)粗略检查输出在移动设备上的样子。

# .net - 将元素拖放到新区域

> ID：14816698
> 
> 赞同：0
> 
> 时间：2013-02-11T16:44:26.613
> 
> 标签：.net, drag-and-drop, webforms

我正在从事一个爱好项目，以加强我的应用程序开发技能。有一件特别的事情给我带来了一些麻烦。

我的项目是用于 D&D 的字符生成器。在一个部分中，我正在生成属性分数。我有一个打开“生成”面板的按钮。生成面板有 6 个属性区域，当它们满足某些要求（从列表中选择生成方法并单击按钮）时，它们会以编程方式填充。

每种生成方法都允许用户将六个分数分配给他们的六个属性。

我可以很容易地让这些可点击的按钮打开一个对话框（或模式，或类似的）来选择在哪里分配选定的分数，但这不会教给我任何新东西。

相反，我想做的是让用户将属性分数（当前是面板中的一个文本框）拖放到他们想要分配给它的属性（当前每个属性都是由一个文本框组成的，一个标签和另一个文本框，我希望用户能够将值放入这三个区域中的任何一个）。

我还想允许用户在属性分数之间拖放值，但这应该很容易从第一部分的答案中遵循。

简而言之，**如何使用户能够将控件的值拖动到应用程序中的另一个控件**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:50:15.857

经过大量搜索，我找到[了这篇](http://codebetter.com/petervanooijen/2007/07/07/basic-drag-and-drop-in-winforms/)描述 .NET webforms 中拖放的要点的文章。

复制以下是要点：

在要拖放的 MouseDown 事件中，触发“DoDragDrop”事件，传入要拖放的数据和要实现的 DragDropEffects 值。

在可以接受拖放的对象的 MouseEnter 事件中，运行如下代码：

```
if ((e.AllowedEffect & DragDropEffects.Link) != 0

    && e.Data.GetDataPresent(typeof(string)))

    e.Effect = DragDropEffects.Link; 
```

e.AllowedEffect 是按位的，可以匹配多个效果。

设置 e.Effect 表示控件可以接受丢弃的数据。您设置为“.Effect”的效果决定了鼠标的外观。

最后，在任何控件接受丢弃数据的“DragDrop”事件中，您可以使用“e.Data.GetData”访问移动的数据——这将返回一个可转换对象。

这并不能解决我的一些问题（值得注意的是，鼠标没有携带数据的“影子”），但这是一个很好的第一步。

# ruby-on-rails - 服务器重启后乘客启动 Rails 应用程序

> ID：14816699
> 
> 赞同：2
> 
> 时间：2013-02-11T16:44:33.653
> 
> 标签：ruby-on-rails, nginx, passenger

如何告诉乘客，它必须在重新启动后启动，然后启动 rails 应用程序......现在我手动执行此操作：

```
passenger start 
```

但是如何以及在 ngnix + 乘客中配置什么，我的应用程序在服务器重新启动后自动启动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-04-23T12:48:02.687

现在已经晚了。但可能对其他人有用。将命令添加到 cron。

```
crontab -e
@reboot /bin/bash -l -c 'cd /path/to/app && passenger start' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:07:18.683

假设您使用的是 Ubuntu 或类似的 Linux 发行版，您需要一个 init.d 脚本在启动时启动乘客。请参阅： [在启动时启动独立乘客](https://groups.google.com/forum/?fromgroups=#!topic/phusion-passenger/2W0Z-mRabq4)

# python - Yappi 返回奇怪的结果

> ID：14816700
> 
> 赞同：2
> 
> 时间：2013-02-11T16:44:38.487
> 
> 标签：python, profiling, yappi

我在多线程进程中运行 yappi python profiler，使用 yappi.print_stats() 打印时得到奇怪的结果。有些方法重复不止一次，在每一行中它们都显示不同的`ttot`和`ncalls`。有些方法出人意料地显示`tsub`等于 0，而它们当然不应该。你能解释一下这些现象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-25T12:33:30.783

此问题可能已在最新的存储库头中修复。除此之外，如果在 CPU 时钟模式下运行，yappi 不会累积 time.sleep() 或任何其他阻塞调用时序输出。参见 yappi 的 get_clock_type() api。

# windows - 我想在计算机上映射网络共享

> ID：14816702
> 
> 赞同：0
> 
> 时间：2013-02-11T16:44:45.810
> 
> 标签：windows, powershell-2.0, powershell-3.0

我想在我的电脑上映射一个远程硬盘

假设我有一台计算机 A，它在 F 上有一个外部硬盘：

我想在我的电脑 B 上挂载 F:

我试过 net use \ComputerA\F$ /user:UsernameA PasswordA 我怎么能用powershell呢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:48:59.357

如果您有权访问远程计算机，则可以使用[psexec](http://technet.microsoft.com/en-gb/sysinternals/bb897553.aspx)命令在远程计算机上共享驱动器，然后使用 net use 将其映射到本地计算机

```
psexec \\remotePC net share f$=f:
net use \\remotePC\f$ 
```

# .net - 我什么时候需要 TransactionScopeOption.Supress？

> ID：14816706
> 
> 赞同：1
> 
> 时间：2013-02-11T16:44:53.747
> 
> 标签：.net, transactionscope

[MSDN](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscopeoption.aspx)将此选项定义为

> 创建范围时，环境事务上下文被抑制。范围内的所有操作都是在没有环境事务上下文的情况下完成的。

我什么时候需要这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:51:01.310

这在您在服务器中有多个事务时很有用。[这是](https://stackoverflow.com/a/851530/1080742)一个很好的解释和关于[`.Supress`](http://blogs.msdn.com/b/drnick/archive/2008/01/11/suppressing-transactions-during-an-operation.aspx).

# android - SimpleCursorAdapter 替代品

> ID：14816714
> 
> 赞同：12
> 
> 时间：2013-02-11T16:45:26.320
> 
> 标签：android, android-listview, android-cursoradapter

我正在使用已弃用的 SimpleCursorAdapter 将数据从 Cursor 显示到 ListView。我添加了额外的参数`0`，它删除了不推荐使用的警告，但我想使用更好的方式来显示数据。我已经阅读了一些关于的内容`Loader`，但不知道如何实现它。下面的代码有什么更好的替代方法？如何将这段代码翻译为使用 Loader？

```
Cursor c = mDbHelper.getAllRecords();
    startManagingCursor(c); //this is also deprecated

    String[] from = new String[] { "Name" };
    int[] to = new int[] { R.id.text1 };

    SimpleCursorAdapter names =
        new SimpleCursorAdapter(this, R.layout.names_row, c, from, to, 0);
    setListAdapter(names); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-09T10:07:58.040

`adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_2, cursor, from, to, 1);`

这将执行自动重新查询。1 设置为真，0 设置为假。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T17:33:36.353

SimpleCursorAdapter 没有被弃用，只是构造函数。

请参阅[API 版本 15 中已弃用 SimpleCursorAdapter？](https://stackoverflow.com/questions/8790659/simplecursoradapter-deprecated-in-api-version-15)

# spring - 春季会话管理问题

> ID：14816719
> 
> 赞同：0
> 
> 时间：2013-02-11T16:45:39.430
> 
> 标签：spring, hibernate, jsf-2, spring-transactions

我在我的演示应用程序中使用 Hibernate+Spring+Jsf 我希望 Spring 将处理事务管理所以我在 application-context.xml 文件中创建了这些条目..

```
 <beans xmlns="http://www.springframework.org/schema/beans"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns:tx="http://www.springframework.org/schema/tx"
            xmlns:context="http://www.springframework.org/schema/context"
            xsi:schemaLocation="http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                    http://www.springframework.org/schema/tx 
                    http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
                    http://www.springframework.org/schema/context 
                    http://www.springframework.org/schema/context/spring-context-3.0.xsd">

        <!-- Beans Declaration -->
        <bean id="User" class="com.otv.model.User"/>

        <!-- User Service Declaration -->
        <bean id="UserService" class="com.otv.user.service.UserService">
            <property name="userDAO" ref="UserDAO" />
        </bean>

        <!-- User DAO Declaration -->
        <bean id="UserDAO" class="com.otv.user.dao.UserDAO">
            <property name="sessionFactory" ref="SessionFactory" />
        </bean>

        <!-- Data Source Declaration -->
        <bean id="DataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
            <property name="driverClass" value="org.postgresql.Driver" />   
            <property name="jdbcUrl" value="jdbc:postgresql://localhost:5432/postgres" />   
            <property name="user" value="postgres" />   
            <property name="password" value="hariom" /> 
            <property name="maxPoolSize" value="10" />
            <property name="maxStatements" value="0" />
            <property name="minPoolSize" value="5" /> 
        </bean>

        <!-- Session Factory Declaration -->
        <bean id="SessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
            <property name="dataSource" ref="DataSource" />
            <property name="annotatedClasses">
                <list>
                    <value>com.otv.model.User</value>
                </list>
            </property>
            <property name="hibernateProperties">
                <props>
                    <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                    <prop key="hibernate.show_sql">true</prop>
<prop key="hibernate.connection.autocommit">false</prop>
                </props>
            </property>
        </bean>

        <!-- Enable the configuration of transactional behavior based on annotations -->
        <tx:annotation-driven transaction-manager="txManager"/>

        <!-- Transaction Manager is defined -->
        <bean id="txManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
           <property name="sessionFactory" ref="SessionFactory"/>
        </bean>

    </beans> 
```

和 UserService.java 类

```
package com.otv.user.service;

import java.util.List;

import org.springframework.transaction.annotation.Transactional;

import com.otv.model.User;
import com.otv.user.dao.IUserDAO;

/**
 * 
 * User Service
 * 
 * @author onlinetechvision.com
 * @since 25 Mar 2012
 * @version 1.0.0
 *
 */
@Transactional(readOnly = true)
public class UserService implements IUserService {

    // UserDAO is injected...
    IUserDAO userDAO;

    /**
     * Add User
     * 
     * @param  User user
     */
    @Transactional(readOnly = false)
    public void addUser(User user) {
        getUserDAO().addUser(user);
    }

    /**
     * Delete User
     * 
     * @param  User user
     */
    @Transactional(readOnly = false)
    public void deleteUser(User user) {
        getUserDAO().deleteUser(user);
    }

    /**
     * Update User
     * 
     * @param  User user
     */
    @Transactional(readOnly = false)
    public void updateUser(User user) {
        getUserDAO().updateUser(user);
    }

    /**
     * Get User
     * 
     * @param  int User Id
     */
    public User getUserById(int id) {
        return getUserDAO().getUserById(id);
    }

    /**
     * Get User List
     * 
     */
    public List<User> getUsers() {  
        return getUserDAO().getUsers();
    }

    /**
     * Get User DAO
     * 
     * @return IUserDAO - User DAO
     */
    public IUserDAO getUserDAO() {
        return userDAO;
    }

    /**
     * Set User DAO
     * 
     * @param IUserDAO - User DAO
     */
    public void setUserDAO(IUserDAO userDAO) {
        this.userDAO = userDAO;
    }

} 
```

现在我在做我的豆子

```
@ManagedProperty(value="#{UserService}")
    IUserService userService;

     */
    public IUserService getUserService() {
        return userService;
    }

    /**
     * Set User Service
     * 
     * @param IUserService - User Service
     */
    public void setUserService(IUserService userService) {
        this.userService = userService;
    }

    public String addUser() {
        try {
            User user = new User();
            user.setId(getId());
            user.setName(getName());
            user.setSurname(getSurname());
            userService = getUserService();
            userService.addUser(user);
            userService.deleteUser(null);
            return SUCCESS;
        } catch (DataAccessException e) {
            e.printStackTrace();
        }   

        return ERROR;
    } 
```

在这段代码中`userService.deleteUser(null);` ，我强行通过异常但仍将数据保存在数据库中？如果出现异常，为什么不回滚数据，为什么不处理这种情况？

**UserDAO 类**

```
package com.otv.user.dao;

import java.util.List;

import com.otv.model.User;

import org.hibernate.SessionFactory;

public class UserDAO implements IUserDAO {

    private SessionFactory sessionFactory;

    /**
     * Get Hibernate Session Factory
     * 
     * @return SessionFactory - Hibernate Session Factory
     */
    public SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    /**
     * Set Hibernate Session Factory
     * 
     * @param SessionFactory - Hibernate Session Factory
     */
    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    /**
     * Add User
     * 
     * @param  User user
     */
    public void addUser(User user) {
        getSessionFactory().getCurrentSession().save(user);
    }

    /**
     * Delete User
     * 
     * @param  User user
     */
    public void deleteUser(User user) {
        getSessionFactory().getCurrentSession().delete(user);
    }

    /**
     * Update User
     * 
     * @param  User user
     */
    public void updateUser(User user) {
        getSessionFactory().getCurrentSession().update(user);
    }

    /**
     * Get User
     * 
     * @param  int User Id
     * @return User 
     */
    public User getUserById(int id) {
        List list = getSessionFactory().getCurrentSession()
                                            .createQuery("from User where id=?")
                                            .setParameter(0, id).list();
        return (User)list.get(0);
    }

    /**
     * Get User List
     * 
     * @return List - User list
     */
    public List<User> getUsers() {
        List list = getSessionFactory().getCurrentSession().createQuery("from User").list();
        return list;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:53:04.517

似乎事务边界是 UserService 类上的每个方法。当您说`userService.addUser(user)`这是一项交易的开始和完成时。因此，当您说`userService.deleteUser(null)`这是另一个事务时——尽管它失败了，但前一个事务并没有回滚，因为它已经被提交了。

如果您想在一个事务中完成所有操作，请使用 @Transactional 注释您的 addUser() （或包含在程序化事务中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:53:49.343

方法上的`@Transactional`注释定义了事务的边界（除非其他人已经在运行“外部事务”）。同样，类的`@Transactional`注释使对该类实例的（公共）方法的所有*单个*调用都具有事务性，但不会**使**对同一实例的*连续*方法调用被包装在单个事务中。相反，每个方法调用都在其自己的事务中运行，如果方法正常返回，则提交事务。（默认情况下，如果抛出已检查的异常，它甚至会被提交，尽管您可以使用`rollbackFor`and`noRollbackFor`参数更改它。）

因此，在您的情况下，您有两笔交易；一个用于此呼叫：

```
userService.addUser(user); 
```

它成功创建了一个用户并在调用`addUser`完成后提交，第二个：

```
userService.deleteUser(null); 
```

当 NullPointerException 从方法调用中引发时，它会回滚。（我猜你在这里得到了一个 NPE，因为这是 RuntimeExcepotion 的一个子类，它会导致回滚。）

如果您想在单个事务中包含两个语句，则需要将事务置于更高级别。这里的 '@Transactional` 注释不会有什么坏处，但它们不是你想要的。

# javascript - 来自 Google 电子表格的更快查询

> ID：14816725
> 
> 赞同：3
> 
> 时间：2013-02-11T16:45:56.387
> 
> 标签：javascript, ajax, google-sheets, google-fusion-tables

我有一个包含 7000 行和 12 列的 Google 电子表格。我想使用基本的 AJAX 查询来获取数据。

```
url = "https://spreadsheets.google.com/feeds/cells/"+key+"/od6/public/basic?alt=json-in-script&callback=?";
$.getJSON(url, function(resp) {  
    console.log(resp)
}); 
```

问题是这个查询需要我超过 8 秒才能完成。但是，如果我将数据上传到 Google Fusion Tables，我会在一秒钟内使用相应的 AJAX 查询检索数据。

![在此处输入图像描述](../Images/1964a4f920cf5301b7d9b0bba7441c69.png)

来自 Google 电子表格的查询大小让我感到困惑。19MB？有什么方法可以以合理的效率从大型电子表格中获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:25:39.263

并不真地。据我所知，你做得对。

# c - x86 汇编中“imul”指令的不熟悉语法

> ID：14816726
> 
> 赞同：5
> 
> 时间：2013-02-11T16:46:02.217
> 
> 标签：c, assembly, x86

我编写了一个非常基本的 C 函数，称为“multby22”，它的功能正是它的名字所暗示的：它需要一个 long 并返回 long 乘以 22。（我知道这是一个毫无意义的函数，但我写它是为了尝试和帮助我使用 x86 程序集。）所以：

```
long multby22(long x) {
    return 22 * x;
} 
```

当我编译程序并在可执行文件上运行“objdump”时，我发现“multby22”的反汇编代码如下：

```
080483ff <multby22>:
   80483ff:       55                    push   %ebp              
   8048400:       89 e5                 mov    %esp,%ebp         // Create the stack frame.
   8048402:       8b 45 08              mov    0x8(%ebp),%eax    // Grab the argument and put it into the %eax register.
   8048405:       6b c0 16              imul   $0x16,%eax,%eax   // ???
   8048408:       5d                    pop    %ebp              // Pop the buffer pointer and return.
   8048409:       c3                    ret 
```

我知道“imul”用于整数乘法，但我找不到任何可以帮助我使用这种语法的东西！我发现的最接近的是：

```
imul [reg] [reg] [const] 
```

...其中第二个和第三个参数相乘，然后放入第一个参数，它必须是一个寄存器。在我生成的程序集中，第一个参数是一个常数！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T16:48:44.970

你找到了正确的指示。AT&T 汇编语法恰好与其他人的做法“倒退”。目标寄存器在右侧。

您的代码将 EAX 乘以 22 (0x16) 并将结果放入 EAX。

如果您尝试将说明与文档进行比较，您可能应该查看可以输出 Intel 语法反汇编的反汇编程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:51:13.353

0x16 = 22（十进制）。编译器在那里以十六进制表示法编写它。所以第一个将与第二个相乘并存储到第三个中。

# iphone - 在 Core Data 中懒惰地实例化关系？

> ID：14816730
> 
> 赞同：1
> 
> 时间：2013-02-11T16:46:09.957
> 
> 标签：iphone, objective-c, core-data, lazy-loading

我有一个具有健壮关系属性的托管对象，这意味着关系与本质上是属性但本身具有描述性属性（如“类型”）的对象的关系。我想懒惰地实例化关系，这样我就可以填写描述性属性，而不必确保我从服务器获取的数据已经填写了这些内容。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:20:00.117

Core Data 通过一种他们称之为“故障”的机制来延迟加载关系。这是在 SQLite 存储类型中实现的。您可以在自己的自定义 NSPersistentStore 中实现它。

[http://developer.apple.com/library/mac/#documentation/DataManagement/Conceptual/IncrementalStorePG/Implementing/Implementing.html#//apple_ref/doc/uid/TP40010706-CH2-SW2](http://developer.apple.com/library/mac/#documentation/DataManagement/Conceptual/IncrementalStorePG/Implementing/Implementing.html#//apple_ref/doc/uid/TP40010706-CH2-SW2)

# java - 在java中比较Class是个好主意吗 使用 == 运算符的对象？

> ID：14816732
> 
> 赞同：0
> 
> 时间：2013-02-11T16:46:20.107
> 
> 标签：java, reflection

在 .NET 中，我可以在比较 Type 对象时摆脱 == 。可以使用相同的运算符来比较 Java 中的 Class 对象还是应该始终使用 equals() 方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T16:50:33.093

`Class`不会覆盖`equals`，所以没关系。如果你调用`equals`类，默认实现只会做一个参考比较。这是来自 的默认实现`Object`，它`Class.equals`调用：

```
public boolean equals(Object obj) {
    return (this == obj);
} 
```

话虽如此，唯一一次您将拥有`Class`同一个类的两个实例是当它们共享名称但在代码中的两个不同位置加载时，此时它们不一定相等。如果您有多个 ，则可能会发生这种情况`ClassLoader`，但这些类不一定相等，因为它们可能具有不同的字节码。如果您可以提供帮助，我还建议避免使用多种`ClassLoader`情况，因为这会导致类解析不必要的复杂性，并且某些库不支持它。只有在应用程序启动后必须动态加载类的代码才应该这样做，例如 JNLP 客户端、基于插件的应用程序等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T16:58:26.550

如果逻辑问题是价值平等之一，那么我将始终使用等于。这样做的原因是它避免了任何人需要阅读代码来检查 == 在特定情况下是否合适。

如果像 Class 的情况一样，具有给定值的实例永远不会超过一个，则该类的 equals 的正确实现是引用相等。这正是 Class 所做的，通过继承 Object 的 equals 和 hashCode 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T16:50:25.157

的实例`Class`是规范化的，所以是的，在 . 的情况下引用相等应该没问题`Class`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T16:50:29.523

一般来说，使用`equals()`.

在 Java 中，`equals`大致意思是“这个对象在语义上是否等同于那个对象？”。`==`另一方面，运算符的意思是“这个对象和那个对象*是同一个*对象吗？” 有关更多详细信息，请参见[此处](https://stackoverflow.com/questions/7520432/java-vs-equals-confusion)。

编辑：类不会覆盖 Object.equals()。仍然使用 .equals()，但在这种特殊情况下它与 == 相同。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-02-11T17:16:00.037

当您使用 == 比较两个实例时，您实际上是在比较它们的内存地址以查看它们是否是对同一对象的引用。

假设如果您创建两个对象，如下所示，

对象 ob1 = 新对象（）；对象 ob2 = 新对象（）；

现在 ob1 == ob2 返回 false。因为 ob1 和 ob2 指的是不同的内存地址。

但如果你指定如下 ob1 = ob2，那么 (ob1 == ob2) 返回 true。因为两者都指的是同一个内存地址。

如果您使用 equals() 比较两个对象，那么 JVM 会检查您是否覆盖了 equals 方法。如果不是，它会调用 Object 的 equals 方法并相应地返回布尔值。

如果您覆盖 equals()，则 jvm 根据实现返回布尔值。

您的 Vehicle 类如下所示，

```
public class Vehicle {

    private int modelNo;
    private String color;

    /**
     * @return the modelNo
     */
    public int getModelNo() {
        return modelNo;
    }

    /**
     * @param modelNo
     *            the modelNo to set
     */
    public void setModelNo(int modelNo) {
        this.modelNo = modelNo;
    }

} 
```

现在您创建两个 Vehicle 实例，如下所示并调用 equal()

```
Vehicle vehicle1 = new Vehicle();
vehicle1.setModelNo(111);

Vehicle vehicle2 = new Vehicle();
vehicle2.setModelNo(111);

System.out.println(vehicle1.equals(vehicle2)); 
```

输出应该是假的，因为我们没有覆盖 equals() 并且它调用对象的 equals() 并且它检查内存地址并返回假。

现在我们修改 Vehicle 类如下，

```
public class Vehicle {

    private int modelNo;
    private String color;

    /**
     * @return the modelNo
     */
    public int getModelNo() {
        return modelNo;
    }

    /**
     * @param modelNo
     *            the modelNo to set
     */
    public void setModelNo(int modelNo) {
        this.modelNo = modelNo;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((color == null) ? 0 : color.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (!(obj instanceof Vehicle))
            return false;
        Vehicle other = (Vehicle) obj;
        if (color == null) {
            if (other.color != null)
                return false;
        } else if (!color.equals(other.color))
            return false;
        return true;
    }

} 
```

现在我们创建两个具有相同 modelNo 的 Vehicle 实例，并在其中一个实例上调用 equals()，如下所示，

```
Vehicle vehicle1 = new Vehicle();
vehicle1.setModelNo(111);

Vehicle vehicle2 = new Vehicle();
vehicle2.setModelNo(111);

System.out.println(vehicle1.equals(vehicle2)); 
```

现在输出应该是真的。因为我们重写了 Vehicle 类中的 equals 方法。因此，当我们在任何 Vehicle 实例上调用 equals 方法时，将调用覆盖的 equals()。它比较两个 Vehicle 实例中的 modelNo 并相应地返回布尔值。

注意：如果您覆盖了 equals()，那么最好的做法也是覆盖 hashcode()。

# c# - C# - Windows 窗体本地化（语言）在运行时更改 - ListView 列标题不会更改语言

> ID：14816735
> 
> 赞同：2
> 
> 时间：2013-02-11T16:46:29.423
> 
> 标签：c#, listview, localization, runtime

我目前正在开发一个必须支持 6 种不同语言的项目。我已经有了一个工作实现，使用字符串的资源文件和控件的表单本地化。实现的最后一部分涉及在程序运行时实时更改语言。我已经看到了有关如何执行此操作的建议，最终我使用了 ApplyResources 方法的修改版本。一般来说，我说的是这样的事情：

```
ComponentResourceManager resources = new ComponentResourceManager(typeof(Form1));
CultureInfo culture = new CultureInfo("fr-FR");

resources.ApplyResources(_mybutton, _mybutton.Name, culture); 
```

因此，按钮“_mybutton”文本将更改为法语本地化版本。这适用于我所有的表单和控件，除了特定的 ListView 控件。此 ListView 有 5 列对象类型 ColumnHeader。我正在尝试使用 ApplyResources 将列标题的文本更改为新语言。我已经在 .fr.resx 资源文件中为列标题添加了适当的法语文本，当我将表单本地化切换为法语时，Designer View 会向我显示法语翻译版本，正如预期的那样。

更进一步，我尝试在构造函数中表单的 InitializeComponent() 方法之前将全局线程 currentUICulture 属性更改为法语。我验证这将为列表视图中的列标题加载正确的法语资源。

但是，当我尝试手动将区域性应用于 ColumnHeader/ListView 资源时，就会出现问题。例如，我会说代码看起来大致如下：

```
ComponentResourceManager resources = new ComponentResourceManager(typeof(myUserControl));
CultureInfo culture = new CultureInfo("fr-FR"); 
resources.ApplyResources(_myListView, _myListView.Name, culture);
resources.ApplyResources(_myColumnHeader1, _myColumnHeader1.Name, culture);
this.Refresh(); 
```

无论我尝试什么，我都无法将法语资源应用于列标题文本。我也试过：

```
 resources.ApplyResources(_myListView.Columns[0], _myListView.Columns[0].Name, culture); 
```

在 stackoverflow 上搜索解决方案后，我尝试了类似的方法：

```
 var lv = (ListView)_myListView;
 foreach (ColumnHeader col in lv.Columns)
 {
     resources.ApplyResources(col, col.Name, culture);
 } 
```

相同的效果 - 没有语言变化。我查看了 Designer.cs 代码，看看是否有任何关键的差异或我遗漏的行，看起来我做得正确。所有其他控件都正确更改语言，但我的列表视图中的列标题拒绝动态更改文本。有没有人见过这个？我在这里做错了什么？

在最坏的情况下，我可以将列标题的文本移动到外部资源文件，然后手动设置每个列标题的文本，但我发现这很麻烦，特别是如果我必须处理列表视图以后有很多列，或者如果文本需要为每种语言提供多个值。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:05:39.720

我对自己的问题进行了更多研究，似乎 .NET Framework 中实际上存在一个错误，即 ColumnHeader 对象的 .Name 方法实际上并未正确返回对象名称。这就是为什么我尝试将资源应用于对象失败的原因。

我能够通过硬编码 ColumnHeaders 的更改来解决问题。例如：

```
resources.ApplyResources(_myHeader, "_myHeader", culture); 
```

您基本上只需用名称的文字字符串替换对 .Name 的调用。我已经对此进行了测试，并且可以正常工作。不幸的是，这意味着它不适合作为我用来更改所有控件的代码的一部分。我必须为需要更改的每个 ColumnHeader 对象添加一行。幸运的是，我没有使用具有可变列数的列表视图，因为这可能会变得很棘手。

另一种选择是创建本地化的资源文件。您可能已经将它们用于消息框文本和其他字符串等内容。然后，您可以在资源文件中添加一个条目，例如“columnHeader_myHeader”，并为每种语言设置适当的语言文本。最后，您可以使用以下方法手动将文本更改为列标题：

```
_myHeader.Text = myResourceFileName.columnHeader_myHeader; 
```

这将根据当前线程文化选择适当的语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-03T11:16:24.023

似乎列标题的名称属性仍然没有显示列标题的名称。像这样，循环遍历所有列不起作用：

```
foreach (ColumnHeader col in lv.Columns)
{
     resources.ApplyResources(col, col.Name, culture);
} 
```

# mule - Mule 中是否有任何设置可以使一个流程中的错误不会导致 Mule 完全关闭？

> ID：14816737
> 
> 赞同：1
> 
> 时间：2013-02-11T16:46:36.103
> 
> 标签：mule

每当 Mule 流程出现问题时，例如在 HTTP 连接器中使用 HTTPS url，Mule 就会抛出致命错误并关闭。有什么方法可以配置 Mule，使其不会启动错误流，而是启动所有其他流并且不会完全关闭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:38:29.873

我认为没有办法让 Mule 忽略配置错误。如果你问我，我会说这是件好事。您的配置应始终有效。

当然，这与让 Mule 以失败的连接启动（例如即使远程 JMS 代理关闭也启动）无关。在这种情况下，您需要配置重新连接策略以让 Mule 启动并尝试重新连接直到成功。

但是如果配置错误，最终重新连接是没有希望的，所以 IMO Mule 在启动时过早死亡是最理智的方法。

# code-coverage - OpenCover 在使用符号链接时找不到 PDB？

> ID：14816741
> 
> 赞同：2
> 
> 时间：2013-02-11T16:46:45.617
> 
> 标签：code-coverage, symlink, pdb, opencover

在我们的输出树中，Test 目录仅包含指向各种构建目录中的 DLL 的符号链接 (Win7 x64)。实际构建目录中的每个 DLL 旁边都有一个相应的 PDB 文件。但是，在测试目录中的 DLL 上运行 OpenCover 时，它以“无结果 - 未检测到与提供的过滤器匹配的程序集这可能是由于缺少与过滤器匹配的程序集的 PDB，请查看输出文件并参考使用指南（Usage.rtf）”

我正在使用的命令行是：

```
D:\tools\opencover.4.5\OpenCover.console -target:d:\tools\nunit-2.5.10\nunit-console.exe -targetargs:"d:\temp\Test\Test.Mixed.dll /nologo / noshadow /labels /xml=d:\temp\Test\output\Test.Mixedatp_results.xml" -output:d:\temp\Test\Results\coverage\Test.Mixed.xml -filter:+[*]* -register ：用户

```

如果我将适用的 PDB 复制到测试目录中，则覆盖范围确实有效。有没有办法让它与符号链接一起工作？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:48:26.477

尝试使用`-targetdir:`参数指向二进制文件+pdbs 所在的文件夹，即您的符号链接文件夹？

# pdf - wkhtmltopdf 行在两页之间撕裂

> ID：14816744
> 
> 赞同：3
> 
> 时间：2013-02-11T16:46:55.383
> 
> 标签：pdf, unicode, wkhtmltopdf, multipage

我对 wkhtmltopdf 有疑问。我有一个`<article>`跨越多个页面的元素。它没有在 CSS 中定义，宽度是固定的。然而，当元素跨页中断时，有时部分文本会卡在上一页和下一页上。

你知道是什么原因造成的吗？

还有第二个问题。在下面的屏幕截图中，您还可以看到一个奇怪的方形字符，就在单词“Empfindung”之后，它出现在某些（不是全部）行尾（但它不是行尾，它应该是一个常规空格）。我尝试再次用常规空间替换它，但它保持不变。源网站（和内容）的编码是 utf-8。

非常感谢您！

![在此处输入图像描述](../Images/a20abe7c33db47e9d05460ee575570ec.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T20:22:33.557

分页是 wkhtmltopdf 的一个已知问题，您对此无能为力，但添加一个强制分页的特殊 div。

也许还可以看看这个：[wkhtmltopdf 自动分页符](https://stackoverflow.com/questions/11629661/wkhtmltopdf-automatic-page-breaks?rq=1)

关于方形字符：通常这是字体问题。如果您想了解实际情况，那么明智的做法是通过使用 wkhtmltopdf（如 htm2pdf.co.uk）的在线转换器运行它和/或发布您正在使用的实际 HTML。

从 wkhtmltopdf 问题列表 ( [http://code.google.com/p/wkhtmltopdf/issues/detail?id=9](http://code.google.com/p/wkhtmltopdf/issues/detail?id=9) ) 更新：

创建一种禁止在类中创建分页符的样式

```
<style>
.nobreak {
    page-break-inside: avoid;
}
</style> 
```

并把你所有的表格单元格，段落，......不应该被撕成一个

```
<div>:

...<tr><td><div class="nobreak">This cell spans several <br> lines but<br> needs to be on the same page</div></td><td><div class="nobreak"> the second cell<br>that is not broken ... 
```

# eclipse - Flyway 的 P2 存储库

> ID：14816746
> 
> 赞同：0
> 
> 时间：2013-02-11T16:47:08.647
> 
> 标签：eclipse, repository, tycho, p2, flyway

我正在使用 Eclipse 产品，我们使用 maven/tycho 构建系统和 OSGI: Equinox 的组合来构建我们的产品。我想知道 flyway-core jar 文件是否有专用的 p2 存储库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:53:39.530

没有。

但是您可以将其作为 pom 依赖项添加到 eclipse-repository 项目或可部署的功能项目中。这两种项目类型都构建 P2 存储库。然后，您可以将该存储库添加到您的目标平台。

我在这里写了一个关于使用第三方捆绑包和第谷的问题的更一般的[答案](https://stackoverflow.com/a/13268638/611182)。

顺便说一句，我发现 flyway-core 2.0.3 在 OSGi 容器中不能很好地工作，特别是在 Eclipse 中。例如，它使用 TCCL（线程上下文类加载器）来查找您的迁移及其内部脚本。如果不创建一个 URLClassLoader，该 URLClassLoader 配置了带有迁移的我的包的 URL 和 flyway-core 包的 URL，我找不到让它工作的方法。由于使用了 commons-logging，日志也很难以一种不会影响其他 OSGi 包的健壮方式进行配置。

我的印象是，现在在 OSGi 环境中，flyway 付出的努力多于其价值。我在 Google Code 项目中看到了这些问题。看起来类加载问题可能会得到解决，但不接受日志记录作为问题。

# csv - 如何从我的 CSV 中选择哪些列以使用 HighChart 绘制图表？

> ID：14816749
> 
> 赞同：3
> 
> 时间：2013-02-11T16:47:12.380
> 
> 标签：csv, highcharts

我正在尝试从包含每个时间值的多个数据值的 CSV 文件创建图表。我想绘制其中两个数据点，但无法弄清楚如何将 CSV 文件导入数组。

这是我的 CSV 示例

```
Year,Month,Day,Hour,Time,kWh,Savings,Total kWh
2013,02,06,11,11:00,0,0,308135
2013,02,06,11,11:59,15,1.875,308150
2013,02,06,12,12:59,27,3.375,308177
2013,02,06,13,13:59,34,4.25,308211
2013,02,06,14,14:59,32,4,308243 
```

我想在 y 轴上绘制**kWh**和**Savings**，在 x 轴上绘制 Time。任何帮助，将不胜感激。我正在使用标准代码为 Highcharts 导入 CSV 文件，但我确信我需要以某种方式对其进行更改。谢谢！

```
 var options = {
        chart: {
            renderTo: 'container',
            defaultSeriesType: 'column'
        },
        title: {
            text: 'Wind Turbine Hourly Production'
        },
        xAxis: {
            categories: []
        },
        yAxis: {
            title: {
                text: 'kWh'
            }
        },
        series: []
    };

    /*
     Load the data from the CSV file. This is the contents of the file:

        Apples,Pears,Oranges,Bananas,Plums
        John,8,4,6,5
        Jane,3,4,2,3
        Joe,86,76,79,77
        Janet,3,16,13,15

     */ 
    $.get('medford-hour.csv', function(data) {
        // Split the lines
        var lines = data.split('\n');
        $.each(lines, function(lineNo, line) {
            var items = line.split(',');

            // header line containes categories
            if (lineNo == 0) {
                $.each(items, function(itemNo, item) {
                    if (itemNo > 0) options.xAxis.categories.push(item);
                });
            }

            // the rest of the lines contain data with their name in the first position
            else {
                var series = { 
                    data: []
                };
                $.each(items, function(itemNo, item) {
                    if (itemNo == 0) {
                        series.name = item;
                    } else {
                        series.data.push(parseFloat(item));
                    }
                });

                options.series.push(series);

            }

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:56:43.740

您需要编写自己的解析器。这是一个简单的例子：

```
var lines = data.split('\n');
$.each(lines, function (lineNo, line) {
    var items = line.split(',');
    if(lineNo !== 0) {
       var x = + new Date(items[1]+'/'+items[2]+'/'+items[0]+' '+items[4]),
           kwh = parseFloat(items[5]),
           savings = parseFloat(items[6]);
        if(!isNaN(kwh) && !isNaN(savings)){
            options.series[0].data.push([x,kwh]);
            options.series[1].data.push([x,savings])
        }
    }
} 
```

和 jsfiddle：http: [//jsfiddle.net/3bQne/36/](http://jsfiddle.net/3bQne/36/)

# php - php监听页面

> ID：14816750
> 
> 赞同：-1
> 
> 时间：2013-02-11T16:47:13.377
> 
> 标签：php, listener

因此，我已经为此苦苦挣扎了两天，但并没有取得很大的成功。

我得到的是由网页生成的 http POST，该网页被发送到我正在服务器上创建的 php 文件。所以基本上我正在尝试创建一个 php 侦听器脚本，当发生 http 帖子时，它将运行脚本将 xml 数据保存到 SimpleXMLElement 中，以便我可以编写一个 MYSQL 查询将数据导入我们的数据库。一旦我将数据放入 SimpleXMLElement，我就可以从那里接管，我遇到的问题是我无法让 listener.php 文件监听 HTTP POST 并将数据读入本地文件。

```
<?php
public void RunServer()
{
    var prefix = "http://*:4333/";
    HttpListener listener = new HttpListener();
listener.Prefixes.Add(prefix);
try
{
    listener.Start();
}
catch (HttpListenerException hlex)
{
    return;
}
while (listener.IsListening)
{
    var context = listener.GetContext();
    ProcessRequest(context);
}
listener.Close();
}

private void ProcessRequest(HttpListenerContext context) 
{
// Get the data from the HTTP stream
var body = new StreamReader(context.Request.InputStream).ReadToEnd();
$data = body
byte[] b = Encoding.UTF8.GetBytes("ACK");
context.Response.StatusCode = 200;
context.Response.KeepAlive = false;
context.Response.ContentLength64 = b.Length;

var output = context.Response.OutputStream;
output.Write(b, 0, b.Length);
context.Response.Close();
}
?> 
```

This code is the closest I've gotten to what I need and I get a 500 error when I try to access the page. I'm not going to lie I'm pretty new to php and am having issues understanding function definitions. (Also I did get this code from a StackOverflow ticket that was closed)

I'm currently using php5 and apache on my server for my web hosting. ] I have a php.info() file setup and can post it if need be.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:39:53.363

If you want to save data into a SimpleXMLElement that will do it:

```
<?php
$xml = new SimpleXMLElement($_POST['xml-value-field']);
//insert into mysql db...
//write to local file...
?> 
```

# r - Rscript 不支持换行符？

> ID：14816752
> 
> 赞同：1
> 
> 时间：2013-02-11T16:47:25.193
> 
> 标签：r, bash

我尝试将 R 脚本合并到 bash 脚本中，例如

```
 #!/bin/bash
  ...some bash command
  Rscript -e 'a=1;
  print(a)'; 
```

但它抱怨

```
ARGUMENT 'print(a)' __ignored__ 
```

如何在 Rscript 中包含换行符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:08:46.360

我能够通过以下方式获得我认为理想的行为：

```
 Rscript -e 'print(123)' -e '
         print(234)' 
```

因此，重复使用 -e 标志，并且由于前导单引号，第二个参数不完整。重复行是可能的：

```
Rscript -e 'print(123)' -e '
print(234)' -e '
a=2222222' -e '
print(a)'
##------ 2013-02-11 ------##
[1] 123
[1] 234
[1] 2222222 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T02:34:46.477

我还认为最好的方法是编写一个 R 脚本。考虑到这一点，您可以在缓存中创建一个：只需替换`-e 'code'`为`<(echo 'code')`：

```
Rscript <(echo 'a=1;
  print(a);') 
```

# ruby-on-rails - Ruby Rails：将文本框值传递给控制器

> ID：14816753
> 
> 赞同：0
> 
> 时间：2013-02-11T16:47:25.937
> 
> 标签：ruby-on-rails

在 Ruby Rails 中，我想显示一个文本框，您可以在其中输入值，旁边有一个按钮可以根据您在文本框中键入的内容执行搜索。我的代码：

```
<%= number_field_tag :user_search_id, params[:user_search_id] %>

<%= button_to 'Search by user id', {:controller=>"posts", :action=>"search", :user_id => params[:user_search_id]} %> 
```

但是，无论在文本框中输入了什么，它都不会放在参数哈希中，我最终什么也没传递给控制器​​。

这是控制器代码：

```
def search

@post = Post.find(params[:user_id])

  respond_to do |format|
    format.html { redirect_to posts_url }
    format.json { render json: @post }
  end

  #redirect_to posts_url

end 
```

注意我试图同时传递:user_id 和:user_search_id，都没有正确传递。但是，如果我传递一个文字（数字 1），它会正确传递，所以看起来 :user_search_id 值永远不会与该键相关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:55:12.763

你需要一个表格...

```
<%= form_tag({:controller=>"posts", :action=>"search"}, method: :get) do %>
  <%= number_field_tag :user_search_id %>
  <%= submit_tag 'Search by user id', name: nil %>
<% end %> 
```

在您的控制器中，您可以使用：

```
params[:user_search_id] 
```

**编辑**- 使用上面的表格，您将能够访问`params[:user_search_id]`您的控制器。现在您可以使用它`where`来查找正确的帖子。

```
@post = Post.where(:id => params[:user_search_id]) 
```

# java - 如果语句在执行期间被跳过

> ID：14816755
> 
> 赞同：0
> 
> 时间：2013-02-11T16:47:31.440
> 
> 标签：java, android, eclipse

我对这段代码有疑问。第 6 行的 if 语句在执行期间被忽略。我已经逐步完成了代码，变量 file[position] 的值是“subjects.dat”。但是，它会跳过此步骤并转到相关的 else 语句。任何想法为什么？

```
dialogButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                if (markComplete.isChecked()) {
                    String toDelete;
                    String[] files = fileList();
                    if (files[position] == "subjects.dat") { //the error occurs at this line
                        toDelete = files[position + 1];
                        boolean deleted = deleteFile(toDelete);
                        if (deleted) {
                            dialog.dismiss();
                        } else {
                            // Do nothing
                        }
                    } else {                            
                        toDelete = files[position];                     
                        boolean deleted = deleteFile(toDelete);
                        if (deleted) {
                            dialog.dismiss();
                        } else {
                            //Do nothing
                        }   
                    }

                }                   
            } 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T16:48:11.743

您需要使用`.equals()`来比较两个字符串的实际值 - 否则您正在检查它们是否是同一个对象。

```
if (files[position].equals("subjects.dat")) { 
    // do stuff
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:48:33.723

始终使用 . 检查字符串是否相等`equals() method`。`==`运算符检查两个引用变量是否指向同一个对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T16:53:46.977

字符串是java中的对象，当您使用“==”时，您会比较引用（指针），它们通常是不同的（通常是因为对于短字符串进行了一些优化）。长话短说，使用

```
string.equals(anotherString) 
```

代替

```
string == anotherString 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T16:54:59.267

字符串 - 使用 .equals()。== 永远不会给你真实的，因为对象是不同的。

而不是 files[position] == "subjects.dat" 使用 files[position].equals("subjects.dat")

# delphi - 如何声明一个长度在运行时指定的数组？

> ID：14816758
> 
> 赞同：3
> 
> 时间：2013-02-11T16:47:43.810
> 
> 标签：delphi

我需要声明一个具有用户定义维度的数组。这个数组在一个非常大的程序中，更改为列表可能是一个很大的问题。

现在我的数组声明如下：

```
Buffer: array[0..myCostant * 2] of Byte; 
```

并且`myCostant`就像它所说的那样，是一个已经定义的常量。现在我需要使用一个变量，得到这样的东西：

```
Buffer: array[0..myVar * 2] of Byte; 
```

但我不能在数组定义中使用变量。

我如何在不改变我的数组的情况下解决这个问题？这个变量是上限的，所以我可以用这个最大大小声明数组并用另一条指令减少它吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T16:49:05.177

您应该使用[动态数组](http://docwiki.embarcadero.com/RADStudio/XE3/en/Structured_Types#Dynamic_Arrays)：

```
var
  Buffer: array of Byte;

begin
  SetLength(Buffer, myVar*2 + 1); 
```

或者，您可以使用已知上限长度的静态数组，并将数组的当前“有意义”长度记录在变量中，例如`CurrentLength`.

然后你可以替换，例如，

```
for i := 0 to Length(Buffer) - 1 do
  SomethingWith(Buffer[i]); 
```

经过

```
for i := 0 to CurrentLength - 1 do
  SomethingWith(Buffer[i]); 
```

# c# - 如何使用 ASP.NET 动态创建文本框，然后将它们的值保存在数据库中？

> ID：14816760
> 
> 赞同：6
> 
> 时间：2013-02-11T16:47:52.687
> 
> 标签：c#, asp.net

我正在创建一个调查网站。我想动态添加文本框，然后在数据库中获取它们的值。

现在假设我从下拉列表中选择 4 个文本框以动态显示。

**下拉选择代码：**

```
 protected void NumDropDown_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (DropDownList1.SelectedValue == "TextBox")
        {

            int j;
            i = int.Parse(NumDropDown.SelectedValue);
            Session["i"] = i;
            switch (i)
            {
                case 1:
                    t = new TextBox[i];
                    Session["textBox"] = t;
                    for (j = 0; j < i; j++)
                    {
                        t[j] = new TextBox();
                        t[j].ID = "txtCheckbox" + j.ToString();
                        Panel1.Controls.Add(t[j]);

                    }
                    break;
                case 2:
                    t = new TextBox[i];
                    Session["textBox"] = t;
                    for (j = 0; j < i; j++)
                    {
                        t[j] = new TextBox();
                        t[j].ID = "txtCheckbox" + j.ToString();
                        Panel1.Controls.Add(t[j]);

                    }
                    break;

                case 3:
                    t = new TextBox[i];
                    Session["textBox"] = t;
                    for (j = 0; j < i; j++)
                    {
                        t[j] = new TextBox();
                        t[j].ID = "txtCheckbox" + j.ToString();
                        Panel1.Controls.Add(t[j]);

                    }
                    break;
                case 4:
                    t = new TextBox[i];
                    List<TextBox> MyTextBoxes;
                    for (j = 0; j < i; j++)
                    {
                        t[j] = new TextBox();
                        t[j].ID = "txtCheckbox" + j.ToString();
                        Panel1.Controls.Add(t[j]);
                        try
                        {
                            MyTextBoxes = (List<TextBox>)Session["AddedTextBox"];
                            MyTextBoxes.Add(t[j]);
                            Session["AddedTextBox"] = MyTextBoxes;
                        }
                        catch
                        {
                            MyTextBoxes = new List<TextBox>();
                            MyTextBoxes.Add(t[j]);
                            Session["AddedTextBox"] = MyTextBoxes;
                        }
                    }
                    break;
            }

        }
    } 
```

2）然后在这里我在文本框中输入值，如a，b，c，d，然后单击添加：

**点击代码在添加点击：**

1）首先我检查了 Page_Init 上的会话：

```
 protected void Page_Init(object sender, EventArgs e)
    {
        if (Session["AddedTextBox"] != null)
        {
            string a;
            string b;
            string c;
            string d;

            int listCount = ((List<TextBox>)Session["AddedTextBox"]).Count;
            foreach (TextBox t in ((List<TextBox>)Session["AddedTextBox"]))
            {
                if (listCount == 1)
                {

                }
                if (listCount == 2)
                {

                }
                if (listCount == 3)
                {

                }
                if (listCount == 4)
                {
                    if (t.ID == "txtCheckbox0")
                    {
                        a = t.Text;
                    }
                    if (t.ID == "txtCheckbox0")
                    {
                        b = t.Text;
                    }
                    if (t.ID == "txtCheckbox0")
                    {
                        c = t.Text;
                    }
                    if (t.ID == "txtCheckbox0")
                    {
                        d = t.Text;
                    }

                }
            }
        } 
```

但这里的问题是我没有得到文本值，它们似乎是空的。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:55:32.890

这听起来像是 asp.net 向页面动态添加控件的古老经典问题。

问题在于视图状态和回发控件的重建。

您需要***在页面生命周期的正确时间***运行在回发时生成控件的相同代码，以确保回发值与服务器端控件匹配。

当然，如果您想要一个 hacky 快捷方式，请`Request.Form["textCheckbox" + index]`直接访问这些值

[关于该主题的有用文章。](http://www.4guysfromrolla.com/articles/092904-1.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:09:00.130

正如@jenson-button-event 提到的，您可以通过以下示例访问这些`TextBox`值：`Request.Form`

**ASPX：**

```
<asp:DropDownList ID="ddlTextBoxes" runat="server">
    <asp:ListItem Value="1" Text="1" />
    <asp:ListItem Value="5" Text="5" />
</asp:DropDownList>
<asp:Button ID="btnAdd" runat="server" Text="Add" OnClick="Add" /><br />
<asp:PlaceHolder ID="container" runat="server" Visible="false">
    <asp:Button ID="btnSubmit" runat="server" Text="Submit" OnClick="Submit" />
</asp:PlaceHolder> 
```

**后面的代码：**

```
 protected void Add(object sender, EventArgs e)
    {
        int numOfTxt = Convert.ToInt32(ddlTextBoxes.SelectedItem.Value);
        var table = new Table();

        for (int i = 0; i < numOfTxt; i++)
        {
            var row = new TableRow();
            var cell = new TableCell();

            TextBox textbox = new TextBox();
            textbox.ID = "Textbox" + i;
            textbox.Width = new Unit(180);

            cell.Controls.Add(textbox);
            row.Cells.Add(cell);
            table.Rows.Add(row);
        }

        container.Controls.AddAt(0,table);
        container.Visible = true;
    }

    protected void Submit(object sender, EventArgs e)
    {
        var textboxValues = new List<string>();
        if (Request.Form.HasKeys())
        {
            Request.Form.AllKeys.Where(i => i.Contains("Textbox")).ToList().ForEach(i =>
                {
                    textboxValues.Add(Request.Form[i]);
                });
        }

        //Do something with the textbox values
        textboxValues.ForEach(i => Response.Write(i + "<br />"));
        container.Visible = false;
    } 
```

# sql-server - SQL Server 2012 从表创建特定 XML

> ID：14816762
> 
> 赞同：1
> 
> 时间：2013-02-11T16:47:59.913
> 
> 标签：sql-server, xml, sql-server-2012

我有一张`Table`有一列的表`ID`。它包含简单的字母，假设 Table = 'A', 'B', 'C'。

我需要创建一个看起来像这样的 xml 文件

```
<Table>
  <ID>A</ID>
  <ID>B</ID>
  <ID>C</ID>
</Table> 
```

所以我尝试了

```
select * from Table for XML AUTO, ELEMENTS 
```

但这会产生

```
<Table>
  <ID>A</ID>
</Table>
<Table>
  <ID>B</ID>
</Table>
<Table>
  <ID>B</ID>
</Table> 
```

据我了解，内部节点集合代表表的一条记录（在这种情况下，由单个字段/节点组成），周围的标签表示记录本身。但这不是我希望看到的。

我的（相当脏的）解决方案将 xml 转换为字符串，删除

```
</Table><Table> 
```

配对然后重建 XML

```
declare @x nvarchar(max)
set @x = (select id from Table for xml auto, elements)
set @x = replace(@x, '</Table><Table>', '')
select cast(@x as xml) 
```

我的问题很简单：是否有正确的方法来实现我的目标，还是我必须接受这个丑陋的“解决方案”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:58:05.083

如果您想要特定的输出格式并改用 PATH，我认为您想避免使用 AUTO 。未经测试，但如何：

```
SELECT * 
FROM Table 
FOR XML PATH('ID'), ROOT('Table') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:26:41.183

@Dave Sexton 给了我正确的一脚：

上述解决方法如下：

```
select ID 
  from Table 
   for XML Path(''), Root('Table') 
```

# c# - 正则表达式 - 包括冒号

> ID：14816763
> 
> 赞同：1
> 
> 时间：2013-02-11T16:48:08.410
> 
> 标签：c#, regex, visual-studio-2008, .net-3.5

我想使用正则表达式来匹配我收到的字符串的前十二个字符。我正在接收字符串，我想验证要丢弃哪个字符串以及保留哪个字符串。一旦我验证了字符串，我就会根据字符串中的信息实例化一个对象。

在我的示例中，我想检查一个特定的字符 (A)、八个数字、一个冒号，然后是 B|C，后跟一个 D。此模式标识了我想要使用的字符串。但是以下模式不匹配，我怀疑这是由于冒号

```
if(Regex.IsMatch(my_string,"A[0-9]{8,}:(B|C)D")) 
```

我希望它匹配，其中零是 0-9 的任意数字，并且 B 可以与 C 互换。我需要验证冒号是否存在，因为在某些情况下字符串可能格式错误。

应该通过正则表达式模式的字符示例；

```
A00000000:BD 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:55:39.317

该正则表达式应该可以工作。几点建议：

*   `{8,}`匹配 8 个或更多字符。
*   整个正则表达式还将匹配较长字符串（即`"XYZA12345678:CDEFG"`）的子字符串。如果你不想要那个，锚定你的正则表达式。
*   `(B|C)`可以替换为`[BC]`

所以试试这个：

```
if (Regex.IsMatch(my_string,"^A[0-9]{8}:[BC]D")) 
```

# eclipse - juno 不识别泛型子类的属性

> ID：14816769
> 
> 赞同：0
> 
> 时间：2013-02-11T16:48:16.790
> 
> 标签：eclipse, jsf, generics, el

由于我添加了参数化类，Juno 将我的属性引用突出显示为无效。

```
public abstract class AbstractBaseAction<viewDataClass extends AbstractViewData>

    protected viewDataClass viewData;

    public viewDataClass getViewData(){
       return viewData;
    }
    ....
}

public class SomeAction extends AbstractBaseAction<SomeViewData>
{
    public AbstractMaturingOptionsAction()
    {
        super(new SomeViewData());
    }

    @PostConstruct
    public void setupViewData(){
        ....
    }
    ....
}

public class SomeViewData extends AbstractViewData

    String someProperty;

    public String getSomeProperty(){
        return someProperty;
    }
    ....
}

....

property="#{SomeAction.viewData.someProperty}" 
```

朱诺正在突出一些属性

“someProperty 无法解析为 viewData 的成员”

这值得调查，还是我应该以另一种方式编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:46:29.497

Eclipse 内置的 EL 验证/自动完成确实是缺点。

考虑安装[JBoss 工具](http://www.jboss.org/tools)。它正确识别超类中的属性。这是一个屏幕截图，作为它为我完成这项工作的证据。

![在此处输入图像描述](../Images/45fb37eeb17a2b1494c90c6a24444fff.png)

顺便说一句，您的`viewDataClass`命名约定很糟糕。您应该使用单个大写字母 like `V`or so。

# sql-server - 如何修改列在平面文件中的显示顺序？

> ID：14816772
> 
> 赞同：0
> 
> 时间：2013-02-11T16:48:24.500
> 
> 标签：sql-server, ssis

我的 SSIS 2008 OLE DB 源中有以下 SELECT 语句：

```
SELECT      dbo.Inventory.VendorFullSKU AS SKU
        ,   Product.Name AS 'Title'
        ,   dbo.ProductVariant.Price
        ,   dbo.ProductVariant.SalePrice
        ,   dbo.Inventory.Color AS Meta1
        ,   dbo.Inventory.[Size] AS Meta2
FROM        dbo.Inventory 
INNER JOIN  dbo.ProductVariant 
ON          dbo.Inventory.VariantID = ProductVariant.VariantID 
INNER JOIN  dbo.Product ON ProductVariant.ProductID = Product.ProductID
WHERE       (dbo.Inventory.VendorFullSKU <> N'')
ORDER BY    SKU 
```

运行包后，我生成的平面文件没有按照我期望的顺序排序。没有对数据进行任何转换。

平面文件包含下面提到的顺序的列。

```
Price, Title .. followed by other fields 
```

但是，我希望列在查询中定义的平面文件中按此顺序排列。

```
SKU, Title, Price, SalesPrice, Meta1, Meta2 
```

如何确保平面文件中的字段的顺序与我上面的选择语句相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:03:23.437

### 您必须在平面文件连接管理器编辑器上重新定义列顺序。

假设您的平面文件连接管理器定义为选项卡*`FILE_Items`*上包的底部`Connection Managers`。

![连接管理器](../Images/5d803dbad1387bf7762ea0e1e8d2d269.png)

双击连接管理器*`FILE_Items`*打开*`Flat File Connection Manager Editor`*. 点击*`Advanced`*标签页。

要根据查询生成文件，列应定义**`order`**如下所示。如果列不按此顺序，则生成的平面文件将不符合您的要求。

您**`cannot`**重新排列列的顺序，因为没有类似`move up`或的选项，`move down`但您可以*`Add`*/*`Delete`*它们根据您的偏好使用按钮修改顺序，*`New`*并*`Delete`*显示在下面。

新按钮还具有 和 等`Insert Before`选项`Insert After`。

### 警告：

确保在重新排列列时还适当地设置了正确的数据类型和其他属性。

![平面文件连接管理器编辑器 - 高级](../Images/73badf5e45b124e16af348210ccba851.png)

# iis-7 - 即使使用 URL 重写，IIS 也会强制使用斜线来删除它

> ID：14816776
> 
> 赞同：9
> 
> 时间：2013-02-11T16:48:26.080
> 
> 标签：iis-7, url-rewriting, trailing-slash

即使从以下网址重写网址，我也无法删除我网站网址的尾部斜杠： [http://ruslany.net/2009/04/10-url-rewriting-tips-and-tricks/](http://ruslany.net/2009/04/10-url-rewriting-tips-and-tricks/)。

真的很令人沮丧，因为它应该如此简单，但我的尝试没有产生任何结果。

我什至创建了一个测试目录并添加了名为 desktops.aspx 的文件和名为 desktops 的子文件夹。

没有子目录“/test/desktops”加载很好，因为我将默认文档设置为查看 desktops.aspx。

创建了一个子文件夹并仍然引用“/test/desktops”，它会强制使用斜杠并查看子目录。

为什么 IIS 会这样做，因为它应该首先查找文件然后子目录正确？服务器端是否有任何设置会强制反斜杠？

**URL重写片段：**

```
<rule name="SEO - Remove trailing slash" stopProcessing="false">
<match url="(.+)/$" />
<conditions logicalGrouping="MatchAll" trackAllCaptures="false">
<add input="{HTTP_METHOD}" pattern="GET" />
<add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
<add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
</conditions>
<action type="Rewrite" url="_{R:1}" />
</rule> 
```

欢迎任何帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T17:16:50.763

您正在使用类型的操作，`Rewrite`但您想要一个`Redirect`.

将您的配置更改为：

```
<rule name="SEO - Remove trailing slash" stopProcessing="false">
  <match url="(.*)/$" />
  <conditions>
    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
  </conditions>
  <action type="Redirect" url="{R:1}" />
</rule> 
```

您还需要更改`url="(.+)/$"`为`url="(.*)/$"`.

**提示：**

测试模式的最佳方法是使用 IIS 测试模式工具。
在您网站的根目录 -> URL 重写 -> 创建空白规则 -> 单击测试模式：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-09T00:29:10.553

我遇到了同样的问题，这就是我发现的。

我的意图是在 MVC 网站上使用此规则，但我不想在生产中进行测试，所以我在一个已经设置好的网站上测试了该规则，该网站恰好是 web 表单 asp.net。

我遇到了和你一样的问题。即使规则到位，导航到 www.example.com/test 也会重定向到 www.example.com/test/。

所以我注意到检查请求的 url 是文件还是目录的条件，我删除了它们。

现在将 www.example.com/test/ 重定向到 www.example.com/test。耶！不会。IIS 自动将另一个重定向添加回 www.example.com/test/ 导致重定向循环。嘘。

然后我发现这篇文章[https://support.microsoft.com/en-us/kb/298408](https://support.microsoft.com/en-us/kb/298408)与 IIS 6 相关，但显然仍然是一个问题。

因此，因为我在一个 asp.net Web 表单站点中，在我的情况下 /test 是一个物理目录，并且 IIS 中有一些东西会强制目录的尾部斜杠。很遗憾地说，但我找不到一种方法可以轻松地将其关闭。

然而！我的要求是 MVC 和配置的不是目录的路由。因此，我在 MVC 网站上再次尝试了它，并且删除尾部斜杠的重定向效果很好。

我最终得出的规则是：

```
<rule name="RemoveDatSlash" stopProcessing="true">
    <match url="(.*)/$" />
    <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    </conditions>
    <action type="Redirect" redirectType="Permanent" url="{R:1}" />
</rule> 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-18T15:14:35.927

我遇到的问题是指向带有斜杠的 PDF 文件的链接，所以在运行 IIS 6.1 的 Windows Server 2008 R2 中对我有用的是：

单击需要规则的网站并在`Features`视图中打开`URL Rewrite`，然后在`Actions`部分（右窗格）上选择`Add Rule(s)`并选择`Append or Remove the trailing slash symbol`。在下一个窗口的下拉菜单中选择`remove if exists`。

希望这可以帮助。

# c# - 取消订阅静态方法（扩展方法）内的匿名事件处理程序

> ID：14816777
> 
> 赞同：7
> 
> 时间：2013-02-11T16:48:28.127
> 
> 标签：c#, event-handling, extension-methods, static-methods

我有一个扩展方法来订阅`PropertyChanged`实现的对象的事件`INotifyPropertyChanged`。

我希望事件只触发一次。不多。

这是我的方法。

```
public static void OnPropertyChanged<T>(this  INotifyPropertyChanged target, string    propertyName, Action action)
{
    if (target == null)
    {
        return;
    }

    PropertyChangedEventHandler handler = (obj, e) =>
    {

        if (propertyName == e.PropertyName)
        {
            action();
        }

    };

    target.PropertyChanged -= handler;
    target.PropertyChanged += handler;

} 
```

但它不起作用。我无法删除事件处理程序，因此每次调用此方法时都会触发事件。

我尝试了不同的方法。而不是使用匿名方法，而是使用更传统的方法，例如：

```
public static void OnPropertyChanged<T>(this  INotifyPropertyChanged target, string    propertyName, Action action)
{
    if (target == null)
    {
        return;
    }

    target.PropertyChanged -= target_PropertyChanged;
    target.PropertyChanged += target_PropertyChanged;

}

static void target_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        //do stuff here
    } 
```

它工作正常。该事件只触发一次，但我还需要 Action 参数。我不能用这种方法使用它。

任何解决方法或不同的方法来解决这个问题？静态方法中的匿名方法有什么奇怪的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:49:49.560

这是使用匿名方法作为事件处理程序的限制。它们不能像普通方法（技术上是通过方法组转换自动创建的委托实例）那样被删除，因为匿名方法被编译到编译器生成的容器类中，并且每次都会创建该类的新实例。

为了保留 action 参数，您可以创建一个容器类，其中包含事件处理程序的委托。该类可以在您正在使用的其他类的内部声明为私有 - 或设为内部，可能在“Helpers”命名空间中。它看起来像这样：

```
class DelegateContainer
{
    public DelegateContainer(Action theAction, string propName)
    {
         TheAction = theAction;
         PopertyName = propName;
    }

    public Action TheAction { get; private set; }
    public string PropertyName { get; private set; }

    public void PropertyChangedHandler(object sender, PropertyChangedEventArgs e)
    {
        if(PropertyName == e.PropertyName)
            TheAction();
    }
} 
```

然后，在您的类中创建并存储对容器的引用。您可以创建一个静态成员`currentContainer`，然后像这样设置处理程序：

```
private static DelegateContainer currentContainer;

public static void OnPropertyChanged<T>(this  INotifyPropertyChanged target, string    propertyName, Action action)
{
   if (target == null)
   {
       return;
   }

   if(currentContainer != null)         
       target.PropertyChanged -= currentContainer.PropertyChangedHandler;

   currentContainer = new DelegateContainer(action, propertyName);
   target.PropertyChanged += currentContainer.PropertyChangedHandler;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T16:52:08.643

*如果您从*事件处理程序本身中取消订阅，您可以让您的第一个示例工作。

```
public static void OnPropertyChanged<T>(this  INotifyPropertyChanged target, string    propertyName, Action action)
{
    if (target == null)
    {
        return;
    }

    // Declare the handler first, in order to create
    // a concrete reference that you can use from within
    // the delegate
    PropertyChangedEventHandler handler = null;  
    handler = (obj, e) =>
    {
        if (propertyName == e.PropertyName)
        {
            obj.PropertyChanged -= handler; //un-register yourself
            action();
        }

    };
    target.PropertyChanged += handler;
} 
```

上面的代码用作“一劳永逸”的事件处理程序。您可以注册无限数量的这些，并且每个在取消注册之前只会执行一次。

请记住，如果您在多个线程中短时间连续引发事件，则这些处理程序之一可能会多次执行。为了防止这种情况，您可能需要创建一个静态[Dictionary(T,T)](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)映射对象实例到“锁定对象”，并添加一些哨兵代码以确保处理程序只执行一次。但是，这些实现细节似乎有点超出您当前编写的问题的范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T16:51:20.707

从技术上讲，这与您尝试取消订阅的匿名方法不同。.NET 每次`OnPropertyChanged`调用时都会创建该方法的新实例。这就是为什么取消订阅不起作用的原因。

# html - 绝对定位的 div 与相对子级的高度相同

> ID：14816778
> 
> 赞同：0
> 
> 时间：2013-02-11T16:48:29.067
> 
> 标签：html, css

我有一个以渐变为背景的网站。.main div 是绝对定位的。我希望它与其中的内容具有相同的高度，但我该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:54:35.263

绝对不要让你的 main/container/wrapper div 绝对定位。有**相对定位**。

```
 <div class = "main">

    <div class = "content">....</div>

 </div> 
```

然后你有你的CSS：

```
.main {
  position: relative;
  margin: 0 auto;
}

.content {
  height: 100%;
} 
```

看看这个 jFiddle：http: [//jsfiddle.net/persianturtle/3eJGr/](http://jsfiddle.net/persianturtle/3eJGr/)

可以在[这里找到一篇关于绝对定位真正作用的精彩文章](http://dev.opera.com/articles/view/37-css-absolute-and-fixed-positioning/)

一个片段：

> 绝对定位的元素完全从文档流中删除。这意味着它们对其父元素或源代码中出现在它们之后的元素完全没有影响。因此，绝对定位的元素将与其他内容重叠，除非您采取措施阻止它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:54:44.560

如果绝对定位的 div 中的元素是相对定位的并且具有宽度和高度，则可以将此 css 应用于您的`.main`div：

```
height:auto; 
```

这将根据里面所有内容的高度计算高度

# c# - asp.net中的treeview控件加载节点非常慢

> ID：14816779
> 
> 赞同：1
> 
> 时间：2013-02-11T16:48:30.367
> 
> 标签：c#, asp.net

在我的 asp.net 网页上，treeview 控件有数千个节点，并且树的加载速度非常慢。节点数据来自使用以下代码的 sql 数据库。我们可以做些什么来优化或提高性能。

```
public partial class TaxonomyAllTermsTree : System.Web.UI.Page
  {
  protected void Page_Load(object sender, EventArgs e)
  {

    if (!this.IsPostBack)
    {
        this.AddNodes(this.TreeView1.Nodes, 0, this.LoadData());
        TreeView1.CollapseAll();
    }

  }

  private void AddNodes(TreeNodeCollection nodes, int level, System.Data.DataTable dt)
  {
    string filterExp = string.Format("ParentID='{0}'", level);
    foreach (System.Data.DataRow r in dt.Select(filterExp))
    {
        TreeNode item = new TreeNode()
        {
            Text = r[2].ToString(),
            Value = r[1].ToString(),
            NavigateUrl = "SomeURL.aspx?TermID=" + r[0].ToString()
        };
        this.AddNodes(item.ChildNodes, int.Parse(r[0].ToString()), dt);
        nodes.Add(item);
    }
  }

  private System.Data.DataTable LoadData()
  {
    DataTable dt = new DataTable();
    string connectionString = System.Configuration.ConfigurationManager.ConnectionStrings["ThesaurusConnectionString"].ConnectionString;

    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        connection.Open();
        SqlCommand cmd = new SqlCommand("GetFullTree", connection);
        cmd.CommandType = CommandType.StoredProcedure;

        SqlDataAdapter da = new SqlDataAdapter(cmd);

        da.Fill(dt);

        return dt;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:46:46.167

**1)**如@Azhar 所述，将 ExpandDepth 设置[为](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treeview.expanddepth%28v=vs.100%29.aspx)0

`ExpandDepth`- 获取或设置第一次显示 TreeView 控件时展开的级别数。

**2)**使用 ASP.NET 缓存将 DataTable 存储在缓存中一段时间​​，以避免不必要的数据库行程，这绝对会提高性能。

以下是一些关于缓存的有用文章：

1.  [如何将项目添加到缓存](http://msdn.microsoft.com/en-us/library/18c1wd61%28v=vs.85%29.aspx)
2.  [如何从缓存中删除项目](http://msdn.microsoft.com/en-us/library/edfcywt6%28v=vs.85%29.aspx)

这是一个例子

```
//The item will be in the cache for 10 minutes
DataTable table = LoadData();
Cache.Insert("TreeView", table, null, DateTime.Now.AddMinutes(10), TimeSpan.Zero); 
```

检查键是否存在于缓存中，如果它确实从缓存中加载数据，否则从数据库中加载数据并将其插入缓存：

```
if (Cache["TreeView"] != null)
{
    var table = Cache["TreeView"] as DataTable;
    //Do something with the DataTable
}
else
{
    DataTable table = LoadData();
    Cache.Insert("TreeView", table, null, DateTime.Now.AddMinutes(1), TimeSpan.Zero);
} 
```

希望这些示例对您有所帮助！

# android - 我可以使用 adb 更改默认启动程序吗？

> ID：14816780
> 
> 赞同：12
> 
> 时间：2013-02-11T16:48:32.117
> 
> 标签：android

我将其中一个程序设置为默认启动程序和默认设置程序，因此我现在无法更改默认程序，我可以从`android-sdk\android-sdk\platform-tools\adb.exe`远程 shell 更改默认程序吗？

我怎样才能做到这一点？

我可以删除 Java 代码中程序的默认值吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-10-22T16:10:49.573

对于无法卸载的系统应用程序，请使用 pm disable ，如

`adb shell pm disable com.android.launcher`

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-11T16:54:26.543

您可以通过执行以下操作删除（卸载）您使用**ADB**设置的默认程序：

```
adb uninstall app.package  ..... //for example (com.example.homeapp) 
```

如果您不想删除该应用程序..这里有一个快速破解方法：

*   亚行外壳
*   我开始 -a android.intent.action.MAIN

这样，您将拥有一个包含设备上所有应用程序的选择器，这些应用程序会监听*Main* Action

*   选择您想要的任何主屏幕应用程序。然后转到设置并将其设置为默认值。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-10-25T01:13:52.587

adb shell cmd 包 set-home-activity "包/活动"

亚行重启

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T19:06:51.133

关键是亚行。一旦您知道要为其清除数据的应用程序的包名称，请尝试：

```
adb shell pm clear package.name.of.app 
```

它将清除应用程序的所有数据，但我不知道只有清除默认值的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-27T05:46:56.783

您可以通过使用检查和更改默认短信应用程序`adb shell settings get secure sms_default_application`，然后使用`adb shell settings put secure sms_default_application <package name>`. 我不确定其他默认应用程序，但这只是找到它的问题`adb shell settings list <secure/system/global>`

# ruby-on-rails - Rails 多个连接返回空集。为什么？

> ID：14816781
> 
> 赞同：0
> 
> 时间：2013-02-11T16:48:33.293
> 
> 标签：ruby-on-rails, associations, rails-activerecord

我在使用 .joins 处理多个关联时遇到问题。这是我的模型设置：

```
class Article
  has_many :comments
  has_many :tags
end

class Comment
  belongs_to :article
end

class Tag
  belongs_to :article
end 
```

我正在尝试查找所有带有特定评论正文的评论或带有特定标签文本的标签的文章。这是我的查询：

```
Article.joins(:tags, :comments).where("(\"tags\".\"tag\" = 'awesome') OR (\"comments\".\"body\" = 'hello') 
```

它总是返回一个空的结果。最奇怪的是，这将起作用：

```
Article.joins(:tags).where(:tags => {:tag => "awesome:}) 
```

但是当我添加其他连接符号时，没有返回任何内容：

`Article.joins([:tags, :comments]).where(:tags => {:tag => "awesome"})`

这有道理吗？我在做傻事吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T17:02:46.870

`joins`在 Rails 中使用数组或符号参数总是[`INNER JOIN`](http://dev.mysql.com/doc/refman/5.0/en/join.html)在 sql 中执行，即使在连接多个表时也是如此。

因此，当您没有同时具有标签和评论的文章（或者那些同时具有标签和评论的文章与您的条件不匹配）时，您将收到一个空结果，因为您仅将这些条件与具有两者的文章的横截面匹配评论*和*标签。

要获得所有带有标签和评论的文章，​​请`LEFT JOIN`自己做

```
Article.joins("LEFT JOIN tags ON tags.article_id = articles.id 
               LEFT JOIN comments ON comments.article_id = articles.id") 
```

然后应用你的条件。

# php - JSON_ENCODE 试图逃避双重

> ID：14816787
> 
> 赞同：0
> 
> 时间：2013-02-11T16:48:48.140
> 
> 标签：php, symfony, escaping, json

我正在使用这个控制器从我的数据库中获取数据，然后将它们作为有效的 JSON 数据发回，但我的 http 响应虽然有有效的 JSON，但它是 text/html 而不是 application/json，所以 getJSON 不起作用。（除非 getJSON 无论如何都应该工作？）

```
 public function sendjsonAction()
  {
$encoders = array(new XmlEncoder(), new JsonEncoder());
$normalizers = array(new GetSetMethodNormalizer());
$serializer = new Serializer($normalizers, $encoders);

    $message = $this->getDoctrine()
    ->getRepository('AcmeStoreBundle:Message')
    ->findAll();
    $serializer = $serializer->serialize($message, 'json');
    return new Response($serializer);
} 
```

**这是我访问 json url 时得到的：**

[{"id":1,"iam":1,"youare":2,"lat":50.8275853,"lng":4.3809764,"msgbody":"我在那边看到你怎么了！"},{" id":2,"iam":1,"youare":2,"lat":50.8275853,"lng":4.3809764,"msgbody":"我在那边看到你怎么了！"},{"id": 3,"iam":1,"youare":2,"lat":50.8275853,"lng":4.3809764,"msgbody":"我在那边看到你怎么了！"},{"id":4," iam":1,"youare":2,"lat":50.8275853,"lng":4.3809764,"msgbody":"我在那边看到你怎么了！"},{"id":5,"iam": 1,"youare":2,"lat":50.8275853,"lng":4.3809764,"msgbody":"我在那边看到你怎么了！"},{"id":6,"iam":1,"youare":2,"lat":50.8275853,"lng":4.3809764,"msgbody":"我看到你了那边怎么了！"}]

所以我有另一个页面，称为“showall”，其中包含以下 Javascript：

```
$.getJSON('/app_dev.php/sendjson', function(data) {
  var items = [];

  $.each(data, function(key, val) {
    items.push('<li id="' + key + '">' + val + '</li>');
  });

  $('<ul/>', {
    'class': 'my-new-list',
    html: items.join('')
  }).appendTo('body');
}); 
```

该JS的结果是这个html：

```
<ul class="my-new-list">
<li id="0">[object Object]</li>
<li id="1">[object Object]</li>
<li id="2">[object Object]</li>
<li id="3">[object Object]</li>
<li id="4">[object Object]</li>
<li id="5">[object Object]</li>
</ul> 
```

**如果我尝试使用 json_encode，那么事情会变得更加混乱。这是我得到的答案：**

```
"[{\"id\":1,\"iam\":1,\"youare\":2,\"lat\":50.8275853,\"lng\":4.3809764,\"msgbody\":\"I saw you over there what's up!\"},{\"id\":2,\"iam\":1,\"youare\":2,\"lat\":50.8275853,\"lng\":4.3809764,\"msgbody\":\"I saw you over there what's up!\"},{\"id\":3,\"iam\":1,\"youare\":2,\"lat\":50.8275853,\"lng\":4.3809764,\"msgbody\":\"I saw you over there what's up!\"},{\"id\":4,\"iam\":1,\"youare\":2,\"lat\":50.8275853,\"lng\":4.3809764,\"msgbody\":\"I saw you over there what's up!\"},{\"id\":5,\"iam\":1,\"youare\":2,\"lat\":50.8275853,\"lng\":4.3809764,\"msgbody\":\"I saw you over there what's up!\"},{\"id\":6,\"iam\":1,\"youare\":2,\"lat\":50.8275853,\"lng\":4.3809764,\"msgbody\":\"I saw you over there what's up!\"}]" 
```

转义双引号...！我应该向 json_encode 添加一个选项，以便它不会转义这些双引号吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:51:56.590

如果您依赖`Content-Type`，请使用[`header()`](http://php.net/manual/en/function.header.php)设置适当的：

```
header('Content-type: application/json'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:17:58.593

改变：

```
items.push('<li id="' + key + '">' + val + '</li>'); 
```

到：

```
items.push('<li id="' + key + '">' + val.msgbody + '</li>'); 
```

使用时不需要设置 Content-type `$.getJSON`-- 它假定输出为 JSON。如果您使用更通用的方法，如`$.get`、`$.post`或，则需要它`$.ajax`。它们都允许您指定一个`dataType: 'json'`选项来告诉它输出也是 JSON，但是如果您忽略该选项，它们会查看`Content-type`来决定如何解析它。

# node.js - nodejs立即退出而没有错误消息

> ID：14816795
> 
> 赞同：8
> 
> 时间：2013-02-11T16:49:11.700
> 
> 标签：node.js

我已经为 Windows x64 (0.8.19) 安装了最新的 Node.js。当我运行它时，无论有没有脚本文件参数，它都会退出而没有错误消息。

我尝试过的事情：

*   我在 JetBrains Webstorm 下运行 node.exe，这报告了退出代码 -1073740791
*   我使用 VS2010 编译了 0.8.19 的源代码，这在发布时有同样的问题，但在调试时它报告错误：运行时检查失败 #2 - 变量“buf”周围的堆栈已损坏。在调试中继续此操作允许程序启动。
*   我在家里的 PC 上安装了 node.js，它也是 Win 7 x64 并且运行良好。

其他人有同样的问题吗？

# c - 通过 mmap 配置焊盘

> ID：14816798
> 
> 赞同：1
> 
> 时间：2013-02-11T16:49:14.797
> 
> 标签：c, linux, posix, mmap, beagleboard

我有一个 beagleboard-xm rev C 板。处理器的 TRM。我在网上看到了一些如何进行焊盘配置的示例。这是其中一个例子：

```
 int fd = open("/dev/mem", O_RDWR | O_SYNC);
if (fd < 0) {
  printf("Could not open memory\n");
  exit(1);
}

// Pad configuration
volatile ulong *pinconf;
pinconf = (ulong*) mmap(NULL, 0x10000, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0x48000000);
if (pinconf == MAP_FAILED) {
  printf("Pinconf Mapping failed\n");
  close(fd);
  exit(1);
}
// configure expansion header
pinconf[0x2174/4] = 0x001A001A; //
close(fd); 
```

我的问题是除以`0x2174`4 的目的是什么？

我看到 0x2174 代表我想在[http://www.ti.com/lit/ug/spruf98x/spruf98x.pdf](http://www.ti.com/lit/ug/spruf98x/spruf98x.pdf) page778上配置的引脚（ `CONTROL_PADCONF_UART2_CTS[15:0]`） 。我看到它是一个 32 位寄存器。但是我无法在该寄存器的低 16 位 4 点处获得功能 0x2174？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:56:20.193

这是因为指针的类型是“ulong”，在这个平台上似乎是 4 个字节。假设 pinconf 的寄存器地址为 0x12174，您必须将偏移量除以 0x10000 除以 4 以获得 ulongs 数组的正确索引（以及正确的字节地址）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T16:55:21.387

C 中的地址算术以这样一种方式工作，即 的地址`pinconf[n]`是`pinconf`加 n*乘以`sizeof(ulong)`*的地址。这就是为什么当`sizeof(ulong)`是 4 时，你将目标单词的原始偏移量除以 4 以获得单词在`pinconf`数组中的索引。

# c++ - 一个角度的“无限”增加/减少

> ID：14816801
> 
> 赞同：-1
> 
> 时间：2013-02-11T16:49:35.227
> 
> 标签：c++, geometry

我需要通过值**d**无限增加/减少**phi角。**（**d**可以是负数或正数）。

 ****“无限”意味着循环变化可以发生尽可能长的时间。但为了避免溢出，有必要“丢弃”值，依赖于 sin() 和 cos() 的周期性。（0 <=> 2*pi <=> 2*n*pi）。

它如何在功能上实现？（例如双 stepAngle（双 phi，双 d））。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:02:02.830

标准库函数只是为值 > 2*pi “做正确的事”，你不必做任何事情：

```
int main() {
  double pi = 3.14159265359;
  double x = 2.5;
  cout << sin(x) << endl;
  cout << sin(x + 2*pi) << endl;
  cout << sin(x - 8*pi) << endl;
} 
```

这些都将打印相同的值；试试看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T17:07:08.907

这`fmod`很容易做到。

```
 double stepAngle(double phi, double d)
 {
    double newPhi = phi += fmod(2*pi, d);
    if(newPhi > 2*pi)
    {
      newPhi -= 2*pi;
    }
    if(newPhi < 0)
    {
      newPhi += 2*pi;
    }

    return newPhi; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T16:51:51.717

一种方法是重新归一化到所需的范围：

```
while (d > 2*pi) d -= 2*pi;
while (d < 0) d += 2*pi; 
```

只要`d`不在 0..2*pi 范围之外，这将是有效的。****

# pubnub - Pubnub 回调存在延迟

> ID：14816804
> 
> 赞同：1
> 
> 时间：2013-02-11T16:49:41.373
> 
> 标签：pubnub

我使用我的出席回调方法来显示加入或离开我的聊天室的用户，但在用户注销或登录后，此操作似乎非常延迟。是什么原因，我该如何快速响应。

# api - Node.js Provider Rest API 和 angular.js WEB APP

> ID：14816808
> 
> 赞同：0
> 
> 时间：2013-02-11T16:50:02.177
> 
> 标签：api, node.js, rest, angularjs

我正在 Node.js / express 中开发一个Rest *API**来*公开资源（到后端）。还有另一个管理会话并与*Rest API*（到前端）交互的*Web 应用程序。*API 和 WEB_APP，在同一个域中，在两者中都有子域：

 ***> *   后端：api.example.com
> *   2 前端：www.example.com

使用*angular.js*从客户端访问*Web 应用程序*。 该架构将适用于两种情况：

 *> Main_Rest_API <-> WEB_APP <-> Browser_User
> Main_Rest_API <-> Rest_SDK <-> 客户端

**我的问题是：** 这种架构是一致的吗？实施该计划的最佳方式是什么？

**更新：**

> 我还必须实现此架构以通过 OAuth2 向第三方客户端提供 Restfull

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T17:39:46.547

我真的不明白你的问题，

您确定需要单独的服务器来为 Web 应用程序和 API 提供服务吗？您需要以这种方式处理跨域请求。

如果您实际上不需要两台服务器，那么拥有一个应用程序会更简单，其中 /api/ 路由（例如）是 REST API。那么您的 AngularJS 应用程序可以向 /api/ 发出 AJAX 请求，并且 / 将为 JavaScript Web 应用程序提供服务。

再说一次，我不明白你的问题，因为你确实需要两台单独的服务器。****

# java - spring - 基于参数的函数解析器？

> ID：14816809
> 
> 赞同：0
> 
> 时间：2013-02-11T16:50:02.570
> 
> 标签：java, spring

我在基于弹簧配置的示例之后，根据参数的值，调用不同的函数。

我一直在谷歌搜索“弹簧功能解析器”或类似的东西，但可惜我似乎在网上找不到任何东西。

所以基本上，所有函数都会以某种方式存储在某个地方，并根据这个参数的值调用不同的函数。

例如“PameterISA”-> 调用 A()

“ParameterISB”-> 调用 B()

ETC....

这很容易用 Spring 完成吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:37:07.183

面向对象的处理方式如果`PameterISA`并且`PameterISB`可以是实现公共接口的不同类的实例，那么您可以使用[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)：

```
interface Strategy {
    void doIt();
}

class ClassA implements Strategy {
    @Override
    public void doIt() {
        // execute the code that corresponds to A()
    }
}

class ClassB implements Strategy {
    @Override
    public void doIt() {
        // execute the code that corresponds to B()
    }
} 
```

现在，你所要做的就是

```
Strategy PameterISA = new ClassA();
Strategy PameterISB = new ClassB();

// ...

Strategy strategy = // an instance of either ClassA or ClassB
strategy.doIt();    // will call the correct method. 
```

* * *

或者，如果参数是 a `byte`, `short`, `char` `int`（或它们的盒装对应物）`enum`或（从 Java 7 开始）`String`，您可以使用普通的旧[switch](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)语句：

```
switch (parameter) {
    case "PameterISA":
        A();
        break;
    case "PameterISB":
        B();
        break;
    default:
        throw new IllegalArgumentException(parameter);
} 
```

* * *

最后，您可以使用程序`if`- `else if`-`else`模式。

# java - JTable中arraylists的arraylist

> ID：14816810
> 
> 赞同：1
> 
> 时间：2013-02-11T16:50:08.693
> 
> 标签：java, swing, static, compilation, jtable

我有一个名为 Database 的类，其中包含一个名为 applications 的 arrayList。arrayList 申请人中的每条记录都是申请人详细信息的arrayList。（所以 Database 类包含 arrayLists 的 arrayList）。

我还有一个名为 GUI 的类，其中包含一个 JTable：

```
String[] columnNames = {"Application number",
                                "Program",
                                "Name",
                                "Date",
                                "Accepted?"};

Object[][] data = {Database.applicants}; 
```

每当我编译时，它都会说：“不能从静态上下文中引用非静态变量申请者”

任何关于我可能需要做什么的指示都将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:30:40.503

尝试考虑 Vector 的；它们更具动态性，您可以向它们添加 String[] 或 List 行。尝试这个：

```
public class Database {

    private static Vector columnsName;
    private static Vector data;

    public static Vector getColumnsNames() {
        if (null == columnsName) {
            columnsName = new Vector();
            columnsName.add("Program Number");
            columnsName.add("Program Name");
            columnsName.add("Program Date");
        }
        return columnsName;
    }

    public static Vector getData() {
        if (null == data) {
            populateData();
        }
        return data;
    }

    private static void populateData() {
        data = new Vector();
        String[] firstRow = {
            "22", "Program", "Name", "12/12/2012", "yes"
        };
        data.add(firstRow);
    }
} 
```

然后从 GUI 中，您可以准备模型：

```
 JTable table = new JTable();
        table.setModel(new DefaultTableModel(Database.getColumnsNames(), Database.getData())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:52:08.107

摆脱错误

```
public static List applicants ... 
```

但这可能不是您想要做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:25:12.500

> 我需要将arrayList 转换为List 吗？

您正在尝试将 ArrayList 分配给 Array，因此您需要将 ArrayList 中的数据复制到 Array。

或者另一种选择是创建一个使用 ArrayList 保存模型数据的自定义 TableModel。请参阅 Swing 教程中有关[创建表模型](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)的部分。

# mysql - 重命名 MySQL 上的主键约束

> ID：14816811
> 
> 赞同：2
> 
> 时间：2013-02-11T16:50:17.343
> 
> 标签：mysql, constraints, primary-key

我认为这可能是 MySQL 的一个错误，但我不确定。任何人都可以告诉我如何为表创建主键然后重命名主约束？如果可能的话，在创建表的过程中已经使用所需的名称创建了主键。

我创建的所有主键都以名称“Primary”结尾。在添加 PK 之前已尝试使用所需名称创建索引，并使用 MySQL Workbench 重命名 PK。他们都没有工作。

任何人都知道出了什么问题，为什么我不能重命名 PK 名称？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T17:21:23.240

我不确定 MySQL 一开始就允许给主键命名。虽然似乎有它的语法：

```
CREATE TABLE test (
    test_id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
    CONSTRAINT my_test_pk PRIMARY KEY (test_id)
)
ENGINE=InnoDB; 
```

......它没有出现在`information_schema.TABLE_CONSTRAINTS`我能发现的任何其他地方，所以我觉得它只是默默地丢弃了。

~~您看到的名称可能是您的 GUI 客户端赋予所有主键的硬编码名称。~~

**编辑：这**[是手册中](http://dev.mysql.com/doc/refman/5.5/en/create-table.html#idp63345728)的引述：

> **a 的名称`PRIMARY KEY`总是`PRIMARY`**，因此不能用作任何其他类型索引的名称。

# c# - 限制对需要从另一个程序集分配的属性的访问的正确方法是什么？

> ID：14816815
> 
> 赞同：4
> 
> 时间：2013-02-11T16:50:27.380
> 
> 标签：c#, .net

例如，我在程序集 A 中定义了以下代码：

```
public abstract class Message
{
    public int ID { get; internal set; }
    public Message Parent { get; internal set; }
} 
```

从程序集 B，我需要执行以下操作：

```
instanceOfMessage.ID = MethodToGetUniqueIDNumber();
instanceOfMessage.Parent = MethodToGetParent(); // Returns null /w no parent 
```

目前，我正在使用[InternalsVisibleTo](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)编译器选项来解决这个问题：

```
[assembly:InternalsVisibleTo ("AssemblyB")]

// Namespace stuff here

public class Message
{
    public int ID { get; internal set; }
} 
```

不得不弄乱编译器选项来完成这项工作，这有点令人讨厌。所以，我的问题是：

*   在这种情况下可以使用 InternalsVisibleTo 吗？
*   我应该只公开财产并希望没有人改变任何东西吗？
*   我什至应该这样做吗？

~~我的最终目标是某个人，可能只是我和我的团队，应该能够使用消息，但强制诸如 ID 之类的属性永远不会从管理它们的类之外更改。但是，我们仍然需要创建消息等实例。~~

我的最终目标是我和我的团队应该能够在第三个程序集（程序集 C）中从 Message 继承。程序集 C 只知道程序集 A。程序集 B 稍后会动态加载。C 将使用 A 提供的接口向 B 发送消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T16:54:10.317

> 我的最终目标是某个人，可能只是我和我的团队，应该能够使用消息，但强制诸如 ID 之类的属性永远不会从管理它们的类之外更改。但是，我们仍然需要创建消息等实例。

在这种情况下，一种常见的方法是实际使用消息接口，然后在 AssemblyB 中实现该接口。

这允许您创建消息，但以后不能修改，因为您仍然可以完全控制实现。

```
public interface IMessage
{
    int ID { get; }
    IMessage Parent { get;  }
} 
```

然后你的其他程序集可以用一个私有类来实现它，并返回适当的消息，而不用担心它会被修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:01:16.900

为什么不在调用构造函数时使用`private set`和定义`ID`and`Parent`呢？

```
public class Message
{
    public Message(int id, Message parent) // Message constructor taking in ID and parent from external
    {
        ID = id;
        Parent = parent;
    }

    public int ID { get; private set; }
    public Message Parent { get; private set; }
} 
```

下面这个电话来自你的`Message`课外。

```
Message instanceOfMessage = new Message(MethodToGetUniqueIDNumber(), MethodToGetParent()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T17:18:56.017

我可能会更进一步，创建一个静态工厂方法：

```
public class Message
{
    public static Message CreateInstance(int id, Message parent)
    {
        // Add code here to check security of caller

        return new Message(id, parent);
    }

    private Message(int id, Message parent)  
    {
        ID = id;
        Parent = parent;
    }

    public int ID { get; private set; }
    public Message Parent { get; private set; }
} 
```

要创建消息的实例，您现在将调用：

```
Message instanceOfMessage = Message.CreateInstance(MethodToGetUniqueIDNumber(), MethodToGetParent()); 
```

现在我可以完全控制对象实例的创建，并且一旦创建就不能修改。

# mysql - 将枚举值从 1 更新为 0 mysql？

> ID：14816818
> 
> 赞同：0
> 
> 时间：2013-02-11T16:50:40.063
> 
> 标签：mysql

我试图让这个脚本更新我的“ptb_messages”表中的枚举列“read_message”，但它什么也没做。脚本的其余部分工作正常，但它只是忽略了将 'read_message 从 1 更新为 0 的请求。

有人可以告诉我我哪里出错了吗？谢谢

```
<?php 

        session_start();

        include 'includes/_config/connection.php'; 

        $subject = $_POST['subject'];

        $message_id=$_GET['to'];

        $textarea = $_POST['textarea'];

        $query = mysql_query("SELECT content FROM ptb_messages WHERE id='".$message_id."'");

     $results=mysql_fetch_array($query);

     $result=$results['0'];

        if($result && $textarea) {

            $sql = mysql_query("UPDATE ptb_messages SET content ='".addslashes($textarea)."' WHERE id='".$message_id."'"); 

              $sql = mysql_query("UPDATE ptb_messages SET date_sent = LOCALTIME WHERE id='".$message_id."'");

            $query = mysql_query("SELECT suibject FROM ptb_messages WHERE id='".$message_id."'");

            $sql = mysql_query("UPDATE ptb_messages SET subject = IF(subject LIKE '%:reply', subject, CONCAT(subject, ':reply'))  WHERE id='".$message_id."'"); 

            $sql = mysql_query("UPDATE ptb_messages SET read_message = '0' WHERE id=".$message_id.""); 

      $_SESSION['message_sent']="<div class=\"message_sent\"></div>"; 
    header("Location: {$_SERVER['HTTP_REFERER']}#confirm");
        }

        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:53:25.043

你在 MySQL 中遇到了一个极端情况。枚举字段的值可以由实际值或允许值列表中的索引来引用。您正在尝试使用`0`，MySQL 将其解释为列表的索引 0，在内部是空字符串。

例如

```
 myfield ENUM('one', 'two', 'three')

 myfield = 'two' => 'two'
 myfield = 1 => 'one'
 myfield = 0 => '', not in list, ignore... 
```

如果您只需要一个字段的 0/1 值，为什么不使用已经是 0/1/null-only 的实际 BIT 字段？对纯数值使用枚举只会遇到这个值与索引的问题。

# c# - 为什么我的 bing 地图上看不到建筑物？

> ID：14816822
> 
> 赞同：1
> 
> 时间：2013-02-11T16:50:51.663
> 
> 标签：c#, windows-store-apps, bing-maps

我不明白为什么我的 bing 地图不显示建筑物。
ShowBuildings 是真的。

您可以比较 2 个屏幕截图，差异很大。
[第一个](http://firepic.org/images/2013-02/11/umpz0hxwb7te.png)- Windows 应用商店应用程序的 Bing 地图（我的应用程序）
[第二个](http://firepic.org/images/2013-02/11/sbp807nyfugb.png)- Windows 8 Pro 内的本机 Bing 地图

我的 xaml 非常简单。

```
<MapsCore:Map x:Name="PART_Map"
                      Credentials="STRING_KEY"
                      ShowBuildings="True"
                      ShowBreadcrumb="True"
                      ShowNavigationBar="True"
                      /> 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:21:18.367

据[该](http://msdn.microsoft.com/en-us/library/ee681884.aspx)网站称，Bing Maps API 的某些功能（如 BirdsEye Imagery）尚未用于公开测试，只能通过[Extended Modes](https://connect.microsoft.com/silverlightmapcontrolctp) SDK 获得。这可能是您的问题所在。

# android - Android sdk 3.0：使用 UiLifecycleHelper.java 时如何设置 applicationId？

> ID：14816825
> 
> 赞同：2
> 
> 时间：2013-02-11T16:50:59.907
> 
> 标签：android, facebook, session

我最近从 FB for Android 2.0 迁移到 3.0。

而不是使用

`<meta-data android:name="com.facebook.sdk.ApplicationId" android:value="@string/app_id"/>`

在我的 AndroidManifest.xml 中，我想以编程方式将我的应用程序 ID 设置为会话。

我知道我可以在创建会话对象时使用 Session.Builder.setApplicationId() 。但是，当我使用**UiLifecycleHelper.java**时，它会在不使用 session.Builder 的情况下创建会话。它只使用它的构造函数（session = new Session(activity)）。似乎它假设我已经在清单文件中为应用程序 ID 定义了元数据。但是，我希望 UiLifecycleHelper.java 通过使用 Session.Builder 并以编程方式在其 onCreate() 中应用我的应用程序 ID 来创建会话。

我该怎么做？我谷歌它，但还没有找到任何解决方案。使用元数据在清单文件中设置 FB 应用程序 ID 是一种常见的做法吗？我真的不想通过将其放在 xml 文件中来显示我的应用程序 ID。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:06:52.387

Your Application ID is NOT considered a secret (just like how a person's profile ID is not a secret).

但是如果你真的不想使用xml方法，你可以复制或子类化UiLifecycleHelper并更改相应的方法以使用你自己的方式创建一个Session。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-20T06:15:56.570

如果您想在代码中设置它，您可以**`getMetadataApplicationId()`**从**Utility.Java**更改方法并添加代码以将应用程序 ID 设置为您喜欢的任何内容。

# php - 排除任何与 MYSQL 全文搜索无关的内容

> ID：14816828
> 
> 赞同：0
> 
> 时间：2013-02-11T16:51:05.850
> 
> 标签：php, mysql, full-text-search

我有一个看起来像这样的搜索查询：

```
 $sql="SELECT *, 
  MATCH(item_tags, item_name, item_description) AGAINST('$serchQuery' IN BOOLEAN MODE) AS score 
  FROM item_list 
  WHERE  `item_display`='1' OR `item_display`='3' AND MATCH(item_tags, item_name, item_description) AGAINST('$serchQuery' IN BOOLEAN MODE) ORDER BY score DESC LIMIT 0, 24"; 
```

它工作正常（大部分时间），但我注意到的问题是，当您搜索一个结果有限的主题（比如说两个）时，它会首先显示这两个，然后显示一堆不相关的，直到达到限制。

我想知道是否有办法更改评分系统，以便确定顶部的两个是最相关的，其余的不相关，因此不应显示它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:08:23.133

那么你可以尝试：

```
$sql = "SELECT *,
MATCH (item_tags, item_name, item_description) AGAINST ($serchQuery IN BOOLEAN MODE) AS score 
FROM item_list 
WHERE MATCH(item_tags, item_name, item_description) AGAINST('$serchQuery' IN BOOLEAN MODE)  
HAVING score >= 1
ORDER BY score DESC LIMIT 0, 24"; 
```

# java - MVP 多个视图组合形成一个整体视图

> ID：14816830
> 
> 赞同：0
> 
> 时间：2013-02-11T16:51:05.550
> 
> 标签：java, gwt, mvp

该`GWT`文档附带一个关于如何在[此处](https://developers.google.com/web-toolkit/articles/mvp-architecture)`MVP`使用该模式的教程。在此示例中，有两个视图，每个视图都根据用户操作替换另一个视图。

`view`在这些相当简单的视图中，将所有仅包含在一个类 ( ) 中的小部件塞入其中并没有太大的坏处`view`。但是对于一个复杂的`view`，人们想为组件创建单独的 s（每个这样的组件`view`都有一个对应的），然后将这些s 组合成整体s（这个组合可能有也可能没有单独的组合，因为所有子视图已经有对应的)。有点类似于在扩展的单独类中创建单独的小部件，调用它们，并像在主面板中一样使用它们。`presenter``view``view``view``view``presenter``presenters``Composite``initWidget``mainPanel.add(new subPanel())`

那么有可能在`MVP`模式中做这样的事情`GWT`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:35:55.093

`DOM`不，如果你一次性完成整个负载，即使你`if else`在里面设置了条件。

在使用 MVP 构建大型应用程序时`GWT`，必须使用 MVP 和代码拆分——否则，整个应用程序（即 JavaScript 包）会在应用程序的初始加载时以一个块的形式下载，这对于沮丧的用户来说是一个好方法！

通过使用标准 MVP，您可以

```
Isolate of User Interface from Business tier

Easily interchangeable Views (user interfaces)

Ability to test all code more effectively 
```

我想你期待如下

```
public class MainPageView extends ViewImpl implements MainPagePresenter.MyView {

    @UiField
    public HTMLPanel mainMenuPanel;

    @UiField
    public HTMLPanel mainContentPanel;

    @UiField
    public HTMLPanel mainFooterPanel;

.
.
.
.
.etc 
```

是的，除了上面显示的面板，您还可以使用内部包含一些元素的类。

更新：

你`mainMenuPanel` 可以像 mainMenuPanel.add(new MyheaderClass()) 这样添加你的类。where `MyheaderClass`extends of `Panel`or `Widget`.So 将 Class 中的所有元素添加到 `mainMenuPanel`

Inside your `MyheaderClass` class you may add `labels`, `buttons` ...etc by using `this.add(mybutton)`..etc

# ios - 当只有一个被实例化时，两个 UISearchBars 显示在视图控制器中

> ID：14816833
> 
> 赞同：0
> 
> 时间：2013-02-11T16:51:18.320
> 
> 标签：ios, objective-c, uisearchbar, uisearchdisplaycontroller

我在视图控制器中显示了两个搜索栏。这很奇怪，因为我在另一个 vc 中有相同的确切代码并且它工作正常。（后台的搜索栏不应该在那里）

这是一个屏幕截图：

![在此处输入图像描述](../Images/dc3674aec982f10f630eeb114cb7857c.png)

我添加了代表：`<UISearchBarDelegate, UISearchDisplayDelegate>`

然后在.h中：

```
@property (nonatomic,retain) IBOutlet UISearchBar *searchBar; 
```

在他们中：

```
@synthesize searchBar; 
```

在 viewDidLoad 中：

```
 self.searchBar.frame = CGRectMake(204, 11, 107,44);
    self.searchBar.delegate = self;

    //customize the searchbar
    UITextField *searchField = [self.searchBar valueForKey:@"_searchField"];
    [searchField setBackground:[UIImage imageNamed:@"search_panel.png"]];

    [self.searchBar setTintColor:[UIColor redColor]];
    UIImage *searchimg = [UIImage imageNamed:@"searchfield_bg.png"];

    for (UIView *subview in self.searchBar.subviews) {
        if ([subview isKindOfClass:NSClassFromString(@"UISearchBarBackground")]) {
            UIView *bg = [[UIView alloc] initWithFrame:subview.frame];
            bg.backgroundColor = [UIColor colorWithPatternImage:searchimg];
            [self.searchBar insertSubview:bg aboveSubview:subview];
            [subview removeFromSuperview];
            break;
        }
    }

    [self.view addSubview:self.searchBar]; 
```

就是这样。我与 Storyboard 视图控制器 xib 中的 searchBar 无关，它是在 viewDidLoad 方法中以编程方式添加的

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:54:22.873

如果您使用的是插座，您`UISearchBar`很可能也存在于情节提要或 xib 中。由于您也在 中创建它，因此`viewDidLoad`您正在制作它的第二个副本。再看看你的故事板。

# mysql - Mysql、InnoDB 到 MyISAM 的全文索引

> ID：14816841
> 
> 赞同：0
> 
> 时间：2013-02-11T16:51:42.917
> 
> 标签：mysql, innodb, myisam, fulltext-index

实际上，我想切换表的引擎。InnoDB 中有，因此我想将它们设置为 MyISAM

```
ALTER TABLE `xxx_db`.`yyy` ADD FULLTEXT `ft_modele` (
    `anno_modele`
) 
```

错误：文档 #1214 - 使用的表类型不支持 FULLTEXT 索引

所以......我这样做：

```
ALTER TABLE `annonce` ENGINE = MYISAM 
```

但我也有一个错误：

```
#1217 - Cannot delete or update a parent row: a foreign key constraint fails 
```

我理解这个错误......但我真的不想杀死我所有的引用索引，然后重新创建它们。太长。

有人有将 innoDB 转换为 MyISAM 的想法吗？我读到 MySQL 5.6.4 支持全文......不幸的是，我有 5.5.28 并且我在 Plesk 11 上。我担心如果我进行升级，我的服务器会崩溃。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:56:58.247

全文索引或外键约束（MyISAM 不支持这些）你只能选择一个（直到 MySQL 5.6）。

无论如何，更改数据库引擎将导致整个表重写（创建新的、移动数据、删除旧的）。

如果我是你，我会去升级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T16:58:35.513

不幸的是，您不能在 MySQL 5.5 中拥有同时支持外键约束和全文索引的表。正如您已经注意到的那样，MySQL 5.6 确实[支持 InnoDB 的全文索引](http://www.drdobbs.com/database/full-text-search-with-innodb/231902587)。

如果可能，我建议更新 MySQL。MySQL 5.6 稳定。

或者使用外部全文索引，如[Sphinx](http://www.sphinxsearch.com)或[Lucene](http://lucene.apache.org)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:56:03.743

不幸的是，对我来说没有好的选择。虽然没有使用新版本的 mysql 升级 plesk，但我无法在不造成不稳定的情况下升级服务器。

所以，我只是 mysqldump 我的数据库并编辑表和键。

坦克寻求帮助。祝你今天过得愉快

# java - PowerMockito 测试遗留代码

> ID：14816843
> 
> 赞同：0
> 
> 时间：2013-02-11T16:51:48.243
> 
> 标签：java, testing

我正在尝试测试一些严重依赖静态方法调用的遗留代码。

基本上，我有一个类 A，带有方法 b() 和 c()。Ab() 返回 void，Ac() 返回一个值。

如果真正的 Ab() 被调用，被测类会抛出异常，所以我需要它什么都不做。但是，如果我使用：

```
 PowerMockito.spy(A.class);
    PowerMockito.doNothing().when(A.class); 
```

然后我不能模拟 Ac() 来返回我需要的值。这是因为线

```
PowerMockito.when(A.c()).thenReturn(value); 
```

抛出异常：`Only void methods can doNothing()`.

有没有办法让 Ab() 什么都不做并“覆盖” Ac() 以返回正确的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:17:12.503

我找到了解决问题的解决方法：

要模拟 Ac()，请使用：

```
PowerMockito.mockStatic(A.class);
PowerMockito.when(A.c()).thenReturn(value); 
```

然后，不做任何事情`A.b()`，添加以下行：

```
PowerMockito.suppress(PowerMockito.method(A.class, "b")); 
```

我觉得好脏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:58:22.657

我认为你错过了你的方法调用之后`when()`。

从 PowerMockito API 开始尝试`PowerMockito.doNothing().when(A.class); A.b();`

# javascript - 如果将RequireJS R.js分配给嵌套需求中的变量，则看不到依赖的需求文件

> ID：14816854
> 
> 赞同：2
> 
> 时间：2013-02-11T16:52:15.860
> 
> 标签：javascript, requirejs, r.js

我在 r.js 查找嵌套 require 调用的文件依赖项时遇到问题。

如果我通过需要一个字符串数组，则压缩器工作正常，并且找到所有文件依赖项。

```
define([
    'jquery', 
    'underscore', 
    'backbone'
], function() {
    require(['views/MobileNavView']);   // Works fine!
}); 
```

如果我通过 require 分配给变量的字符串数组，则压缩器找不到文件依赖项。

```
var requiredFiles = [
    'views/MobileNavView'
];

define([
    'jquery', 
    'underscore', 
    'backbone'
], function() {
    require(requiredFiles); // Doesn't Work!
}); 
```

如果我将字符串数组分配给变量，什么可能导致压缩器找不到文件依赖项？

这是我的 app.build.js

```
({
    baseUrl: '.',
    findNestedDependencies: true,
    mainConfigFile: 'Main.js',
    name: 'Main',
    out: 'Core.js',
    optimize: 'none'
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:48:55.130

这实际上是在`r.js` [文档页面上提到和解释的](http://requirejs.org/docs/optimization.html)

> (...) 因此，它不会找到通过变量名加载的模块：

```
var mods = someCondition ? ['A B C D'];
 需要（模组）；
```

那是因为`r.js`将脚本扫描为文本，它实际上并没有评估它们。看看它的源代码，你会发现有很多正则表达式匹配正在进行。

# google-chrome-extension - 带有 webSocket 的 Chrome 扩展

> ID：14816859
> 
> 赞同：1
> 
> 时间：2013-02-11T16:52:38.423
> 
> 标签：google-chrome-extension, websocket, pusher

我想创建使用 Pusher 服务 ( [http://pusher.com/](http://pusher.com/) ) 向客户端发送消息的扩展，我收到以下错误消息：端口错误：无法建立连接。接收端不存在。当我在简单的 html 页面上尝试相同的代码时，它可以工作。

```
Pusher.log = function(message) {
  if (window.console && window.console.log) window.console.log(message);
};

// Flash fallback logging - don't include this in production
WEB_SOCKET_DEBUG = true;

var pusher = new Pusher('key');
var channel = pusher.subscribe('channel');
channel.bind('event', function(data) {
  alert("test");
}); 
```

我是否需要更改任何内容才能使其运行？

谢谢。

# amazon-ec2 - 消除对 amazon(EC2) 和 rackspace 的误解

> ID：14816860
> 
> 赞同：0
> 
> 时间：2013-02-11T16:52:47.347
> 
> 标签：amazon-ec2, rackspace-cloud, rackspace

我是一家小型创意企业（有多个部门）的所有者的朋友，到目前为止，他们一直在使用专用服务器（通过第 3 方）进行许多内部项目，并且众所周知，他们会 iframe为他们的一些客户（一些有高流量网站）断断续续地开发项目（如照片库、单页网站等）。

他们希望从专用服务器切换到云环境。所有者迷恋亚马逊的云服务，但仍然想要一些替代选项，他们还希望新环境尽可能地反映当前环境（linux/centOS、PHP 5.3、mysql 数据库），但能够在需要时进行扩展。

所以我需要澄清的误解和我的问题是：

1) 我一直认为亚马逊的云服务更适合高端高流量复杂的网络应用程序（Netflix、pinterest、instagram 等），而不是上面列出的典型服务器使用。它是否正确？

2) 是否可以在亚马逊上镜像他们当前的设置？

3）如果数字 1 不是真的，而是他们选择了 rackspace，他们是否可以在 rackspace 云服务器上运行像 Netflix、pinterest、instagram 这样的重型网络应用程序，如果他们决定做一些高级的事情（机架空间是否可以像 ec2 一样可扩展？是）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:56:11.480

1) Amazon AWS 也适用于这种环境，甚至更小的环境（它们提供像“Micro”一样小的实例，这些实例的能力远远低于您所描述的一直到 GPU 计算集群的能力）。

2) 是的。对于基于 AWS 的解决方案，这是一个非常常见的设置。事实上，我最近将类似的东西从 Rackspace 迁移到 AWS。

3) #1 是真的。但是，您当然可以混合在 Rackspace 和 AWS 云中运行的内容。如果两个组件解决方案需要相互通信，请记住延迟和安全问题。Rackspace 也有云产品，但不如亚马逊成熟。

# itextsharp - iTextSharp 等效于 XPdfFontOptions

> ID：14816862
> 
> 赞同：0
> 
> 时间：2013-02-11T16:52:55.220
> 
> 标签：itextsharp, pdfsharp

我正在将使用 PdfSharp 的 C# 应用程序页面转换为 iTextSharp 并找到了一行我看不到明显替代品的代码。

现有代码是

```
PdfSharp.Drawing.XPdfFontOptions options = new  PdfSharp.Drawing.XPdfFontOptions(PdfFontEncoding.Unicode, 
PdfFontEmbedding.Always); 
```

另外，如果我想使用其他非基本字体怎么办？我可以从文档中看到如何创建 16 种类型中的一种，但是如果我想要“Frutiger LT 45 Light”怎么办？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:52:13.647

[查看iText in Action — 第 2 版](http://itextpdf.com/book/) 第 11 章中的示例[：选择正确的字体](http://itextpdf.com/book/chapter.php?id=11)；.Net 版本可[在此处](http://kuujinbo.info/iTextInAction2Ed/index.aspx)获得。

您将看到可以像这样选择、配置和使用字体：

```
public const string FONT = "c:/windows/fonts/arialbd.ttf";
BaseFont bf = BaseFont.CreateFont(FONT, BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
Font f = new Font(bf, 12);
document.Add(new Paragraph("Text", f));

Font garamondItalic = FontFactory.GetFont(
  "Garamond", BaseFont.WINANSI, BaseFont.EMBEDDED, 12, Font.ITALIC
);
document.Add(new Paragraph("Garamond-Italic", garamondItalic)); 
```

因此，您在字体创建中明确输入编码和嵌入选项，而不是通过某些字体选项对象。

顺便说一句，这里`BaseFont`并不是指符合 ISO 32000-1:2008 标准的读者可以使用的标准[14](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)*种*字体*（*我假设您在谈论*16 种类型*时指的是那些字体），而是来自创建给定大小的字体。

# mysql - 从 MySQL 表中删除重复值的最佳方法是什么？

> ID：14816863
> 
> 赞同：1
> 
> 时间：2013-02-11T16:53:05.580
> 
> 标签：mysql, sql, duplicates

我有以下 SQL 来删除表中的重复值，

```
DELETE p1 
FROM `ProgramsList` p1, `ProgramsList` p2  
WHERE p1.CustId = p2.CustId 
    AND p1.CustId = 1 
    AND p1.`Id`>p2.`Id` 
    AND p1.`ProgramName` = p2.`ProgramName`; 
```

`Id`
对于给定的自动增量`CustId` `ProgramName`必须是唯一的（目前不是）
上面的 SQL 大约需要 4 到 5 小时才能完成大约 1,000,000 条记录

任何人都可以建议一种从表中删除重复项的更快方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:58:45.627

首先，如果您还没有索引，您可以尝试将索引添加到 ProgramName 和 CustID 字段。

**去重复**

您可以对记录进行分组以识别受骗者，并在执行此操作时获取每个组的最小 ID 值。然后，只需删除 ID 不是 MinID 之一的所有记录。

**条款内方法**

```
delete from
 ProgramsList
where
 id not in 
    (select min(id) as MinID
      from ProgramsList
      group by ProgramName, CustID) 
```

**连接方法**

如果每个组有很多成员，您可能需要多次运行此操作。

```
DELETE P
FROM ProgramsList as P
INNER JOIN 
    (select count(*) as Count, max(id) as MaxID
     from ProgramsList
     group by ProgramName, CustID) as A on A.MaxID = P.id
WHERE A.Count >= 2 
```

有些人对 In-Clause 有性能问题，有些人则没有。这在很大程度上取决于您的索引等。如果一个太慢，请尝试另一个。

相关：[https ://stackoverflow.com/a/4192849/127880](https://stackoverflow.com/a/4192849/127880)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T09:20:40.943

这将一次性删除所有重复项。

从内部查询中得到一个没有被删除的 ID，其余的被每个程序删除。

```
delete p from ProgramsList as p
INNER JOIN (select ProgramName as Pname, max(id) as MaxID
     from ProgramsList
     group by ProgramName, CustID order by null) as A on  Pname=P.ProgramName
    where A.MaxID != P.id 
```

# c - 位图到 Avi 使用 Video for Windows, C

> ID：14816864
> 
> 赞同：1
> 
> 时间：2013-02-11T16:53:14.450
> 
> 标签：c, windows, bitmap, video-streaming, avi

我需要一些帮助来创建位图的 avi 文件。问题是最后我得到了一个损坏的 avi 文件。如果我用 HEX_Editor 阅读它，整个 avi 标题是 0...

我使用 Borland C++ Builder 6 和 Windows 7 64bit

AVIINFO 结构：

```
typedef struct
{
  PAVISTREAM aviStream;
  PAVISTREAM aviStreamCompressed;
  PAVIFILE aviFile;
  AVISTREAMINFO avistInfo;
  AVICOMPRESSOPTIONS avistComprOpts;
  unsigned long framenumber;    // which frame will be added next
} AVIINFO, *PAVIINFO; 
```

pstBmpInfo 已经像这样填充了：

```
biSize = 40
biWidth = 800
biHeight = 600
biPlanes = 1
biBitcount = 24
biSizeImage = 1440000
others are 0

int initAvi(AVIINFO *aviInfo, BMPINFOHEADER *pstBmpInfo)
    {   
            /* AVIFile Library initialisieren */
            AVIFileInit();

        /* File erstellen */
        if (AVIFileOpen(&(aviInfo->aviFile), "avistream.avi", OF_CREATE|OF_WRITE, NULL) != 0)
        {
                printf("Error creating AVIFile...\n%s\n", strerror(errno));
                return -1;
        }

        memset(&(aviInfo->avistInfo), 0, sizeof(aviInfo->avistInfo));
        memset(&(aviInfo->avistComprOpts), 0, sizeof(aviInfo->avistComprOpts));

        /* AVISTREAMINFO Optionen setzen */
        aviInfo->avistInfo.fccType = streamtypeVIDEO;
        aviInfo->avistInfo.fccHandler = mmioFOURCC('M','S','V','C');
        aviInfo->avistInfo.dwRate = STREAM_FPS;   // 10
        aviInfo->avistInfo.dwScale = 1;
        aviInfo->avistInfo.dwSuggestedBufferSize = pstBmpInfo->biSizeImage;
        aviInfo->avistInfo.rcFrame.bottom = pstBmpInfo->biHeight;
        aviInfo->avistInfo.rcFrame.right = pstBmpInfo->biWidth;
        aviInfo->avistInfo.dwQuality = -1;   // default quality

        /* Stream erstellen */
        if (AVIFileCreateStream(aviInfo->aviFile ,&(aviInfo->aviStream), &(aviInfo->avistInfo)) != 0)
        {
                printf("Error creating Stream...\nErrorcode: %s\n", strerror(errno));
                return -1;
        }

        /* AVICOMPRESSOPTIONS Optionen setzen */
        aviInfo->avistComprOpts.fccType = streamtypeVIDEO;
        aviInfo->avistComprOpts.fccHandler = mmioFOURCC('M','S','V','C');

        /*  */
        if (AVIMakeCompressedStream(&(aviInfo->aviStreamCompressed), aviInfo->aviStream,
                &(aviInfo->avistComprOpts), NULL) != AVIERR_OK)
        {
                printf("Error creating compressed Stream...\nErrorcode: %s\n", strerror(errno));
                return -1;
        }

        /* Streamformat für Bitmaps */
        if (AVIStreamSetFormat(aviInfo->aviStreamCompressed, 0, pstBmpInfo, sizeof(*pstBmpInfo)) != 0)
        {
                printf("Error setting new Streamformat...\nErrorcode: %s\n", strerror(errno));
                return -1;
        }

        aviInfo->framenumber = 0;
        return 0;
} 
```

这就是我写入文件的方式：

pucBitmapDataBuffer 保存 Bitmapdata

```
.
.
.
.

if ((AVIStreamWrite(aviInfo->aviStreamCompressed, aviInfo->framenumber, 1, pucBitmapDataBuffer,
                        sizeof(pucBitmapDataBuffer), AVIIF_KEYFRAME, NULL, NULL)) != 0)
                {
                        streamErrorCnt++;
                        printf("Could not write Data to Stream...\n%s", strerror(errno));
                        aviInfo->framenumber++;
                        free(pucBitmapDataBuffer);
                        fclose(FileSource);
                        stDirEp = readdir(DirSource);
                        continue; // get next BMP
                }
                else
                {
                        streamErrorCnt = 0;
                        aviInfo->framenumber++;
                }
.
.
.
. 
```

我不知道如何填写 AVICOMPRESSOPTIONS，或者我使用的功能是否正确......

PS：这是我在这里的第一篇文章，如果您需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:25:19.493

前段时间，但这里是解决方案：

如果流式传输完成，您必须使用 AVIStreamRelease() 关闭 Stream。只有这样 Header 才会生成并写入文件。

# ms-access - MS Access：单击按钮将表单数据保存到 2 个表中

> ID：14816865
> 
> 赞同：2
> 
> 时间：2013-02-11T16:53:16.017
> 
> 标签：ms-access, ms-access-2010

我正在创建一个包含 2 个表（Assets 和 AssetMovements）和一个表单（Assets）的资产管理数据库。我需要保留每次资产移动的记录，因此每次将新资产添加到 Assets 表或修改现有资产记录的“位置”值时，都应将记录保存到 AssetMovements 表中。AssetMovements 表只是用来记录交易。

我怎样才能做到这一点？我会很感激我能得到的任何指示，或者如果有人能提出更好的方法来保存运动记录。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T19:43:02.337

[看到您使用的是 Access 2010，这看起来像是数据宏](http://office.microsoft.com/en-ie/access-help/create-a-data-macro-HA010378170.aspx)的一个很好的借口即使从 MS Access 外部更新数据，数据宏也会运行。

我创建了一个 Assets 表和一个 AssetMovements 表，AssetMovements 表有一个带有默认值 Now() 的字段 ActionDate，它设置动作发生的日期。

您将需要资产表上的两个宏：

![插入后](../Images/f4fb2307dd2e7f8daa8074d7ed06938f.png) ![更新后](../Images/cca5795132e7c642d2bca3718c1e7b34.png)

这就是您需要做的所有事情，如下所示。

添加或更改记录后，数据会自动记录在 AssetMovements 表中：

![添加或更改记录后](../Images/7b8086fb9afcc2c4be65448593aa68af.png)

您可以运行一个小示例 VBScript ...

```
strCon = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=z:\docs\demo.accdb" 

Set cn = CreateObject("ADODB.Connection")
Set rs = CreateObject("ADODB.Recordset")

cn.Open strCon
sSQL="INSERT INTO Assets (Asset,Location) Values ('Printer',7)"
cn.Execute sSQL

sSQL="Update Assets Set Location=5 Where Asset='Printer'"
cn.Execute sSQL 
```

要查看这也会更新 AssetMovements 表。

![VBScript 之后](../Images/5b3489e3fdc5044d7e0f0af1bbe2c988.png)

还有一个 LogEvent 数据宏，用于更完整地记录更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:41:59.043

该按钮有一个单击事件，当您单击它时会触发该事件。使用 VBA 编写一些在单击按钮时执行的代码。
当您单击该按钮时，您会将记录保存到资产。然后使用查询将该记录复制到 AssetMovements 表。因此，代码将如下所示：

```
Dim OldLocation As String    

Private Sub CmdSave_Click()
   DoCmd.RunCommand acCmdSaveRecord
End Sub

Private Sub Form_AfterUpdate()
   Dim strSQL
   If OldLocation <> Location.Value Then
      strSQL = "INSERT INTO AssetMovements SELECT T1.* FROM Assets WHERE Assets.ID = "
      strSQL = strSQL & Me.ID
      CurrentDb.Execute strSQL
   End If
End Sub

Private Sub Form_BeforeUpdate(Cancel As Integer)
   OldLocation = Me.Location.OldValue
End Sub

Private Sub Form_Current()
   OldLocation = Me.Location.Value
End Sub 
```

然后，这将使用唯一 ID（我猜是 AssetID）将表单的当前记录复制到 AssetMovement 表中。

# java - 如何检查（Google 地图 API）地图是否已加载？

> ID：14816873
> 
> 赞同：1
> 
> 时间：2013-02-11T16:53:39.760
> 
> 标签：java, android, google-maps, google-maps-android-api-2

我已经开始构建一个 android 应用程序，该应用程序专注于来自 google-play-services-libs 的地图。当我启动应用程序时，地图从灰色网格加载到显示地图图像需要一段时间。

当地图完全加载当前屏幕上的部分时，我想移动/玩一下地图。但是，我一直无法找到以编程方式检查地图是否已加载的方法。

我怎样才能做到这一点？

简而言之：从 的实例中`GoogleMap`，我如何确定它是否实际显示了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T16:57:36.900

您可以尝试在地图上使用 OnCameraChangeListener。最初加载地图的瓦片时将调用 onCameraChange 调用。

```
 this.map.setOnCameraChangeListener(new OnCameraChangeListener() {

    public void onCameraChange(CameraPosition arg0) {
      isMapReady = true;
      map.setOnCameraChangeListener(null);
    }
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:23:18.943

**chckReady()**函数检查地图是否准备好

```
public class MapView extends android.support.v4.app.FragmentActivity {

        private GoogleMap mMap;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.ui_settings_demo);
            setUpMapIfNeeded();
        }

        @Override
        protected void onResume() {
            super.onResume();
            setUpMapIfNeeded();
        }

        private void setUpMapIfNeeded() {
            if (mMap == null) {
                mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                        .getMap();
            }
        }

        private boolean checkReady() {
            if (mMap == null) {
                return false;
            }
        }
} 
```

# jquery - jQuery mouseenter mouseleave 工具提示

> ID：14816874
> 
> 赞同：0
> 
> 时间：2013-02-11T16:53:42.077
> 
> 标签：jquery, mouseenter, mouseleave

**我尝试了以下两种方法来显示每个具有类名avatar**的 div 附带的隐藏内容。

```
<div class="avatar"><a><img src="avatar.png" width="36" height="36"><div class="profile">Users Profile with Link</div></a></div> 
```

当我在页面上有多个头像元素时，第一个使用**悬停并完美运行。**

不幸的是，工具提示内置了一个可点击的链接，并且悬停不允许我点击该链接。

```
 $('.avatar a').hover(function () {
        $(this).contents('div:last-child').css({
            display : 'inline'
        });
    }, function () {
        $(this).contents('div:last-child').css({
            display : 'none'
        });
    }); 
```

不幸的是，工具提示内置了一个可点击的链接，并且悬停不允许我点击该链接。

然后我拼凑了我在这里找到的使用**mouseenter**和**mouseleave**的编码。这也有效，它允许我单击链接。

```
 var hover = null;
    $('.avatar a').bind('mouseleave', function() {
        var $this = $(this).contents('div:last-child');
        hover = setTimeout(function() {
            $this.fadeOut(400);
        }, 800);
    });

    $('.avatar a').bind('mouseenter', function() {
        $(this).contents('div:last-child').css({display:'block'});
        if (hover !== null) {
            clearTimeout(hover);
        }
    }); 
```

不幸的是，如果您将鼠标悬停在多个这些化身上，则只有最后一个会被删除，而其他人则始终保留。

我的问题是如何使用第二个，当我转到另一个时，它会**淡出任何活动的工具提示？**

我错过了什么吗？还是完全做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:30:08.587

问题出在你的超时功能上。你为什么还要使用它？ [http://jsfiddle.net/24MYq/9/](http://jsfiddle.net/24MYq/9/) 删除：

```
 if (hover !== null) {
    clearTimeout(hover);
} 
```

这不是你需要的还是你需要延迟？如果你真的需要它，我会编辑我的帖子并给你一些工作延迟。

E：对于延迟，或者在 fadeOut() 内的数字更高，或者在 number 是一个 int 值（500 -> 半秒）之后添加一个 .delay(number)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:30:18.337

如果您希望在鼠标移开时将它们全部删除，可以通过更改 `var $this = $(this).contents('div:last-child')` 为 `var $this = $('.profile');`

所有工具提示将同时消失，但是，只要您将鼠标悬停在另一个头像图像上，超时就会重置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T17:54:54.707

如果我理解正确，我认为您想要的是在每个提示上都有一个超时。您可以`.data`通过将超时与每个提示相关联来完成此操作。

```
$('.avatar a').on('mouseleave', function() {
    var $tip = $(this).contents('div:last-child');
    $tip.data('hover', setTimeout(function() {
        $tip.fadeOut(400);
        $tip.removeData('hover');
    }, 800));
});

$('.avatar a').on('mouseenter', function() {
    var $tip = $(this).contents('div:last-child').show();
    var hover = $tip.data('hover');
    if (hover) {
        clearTimeout(hover);
        $tip.removeData('hover');
    }
}); 
```

[jsfiddle 上的现场演示](http://jsfiddle.net/john_s/BSJgG/1/)

注意：我也更改`.bind()`为`.on()`因为`.bind()`已弃用，我将其更改为使用`.show()`.

原始代码中发生的情况是，当您将鼠标悬停在第二个提示上时，第一个提示的超时被清除，因为它们都共享相同的“悬停”变量。

编辑：在我匆忙中，我错误地清除了这些`.data`值。我应该一直在使用`.removeData()`. 我已经修复了上面的代码。

[更新了 jsfiddle 上的演示](http://jsfiddle.net/john_s/BSJgG/2/)

# c# - 如何设置类型为 List 的通用约束？

> ID：14816880
> 
> 赞同：6
> 
> 时间：2013-02-11T16:53:56.377
> 
> 标签：c#, generics

```
private static void PrintEachItemInList<T>(T anyList) 
Where T:System.Collections.Generic.List<T>
{    
    foreach (var t in T)
    {
        //Do whatever
    }
} 
```

在上面的代码（这是错误的）中，我想做的只是设置`T`一个 List 的约束。

目的不是让这个示例工作，目的是了解如何设置类型为列表的约束？我是仿制药的业余爱好者，正在努力解决问题:(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T16:56:50.587

也许你想要*两个*类型参数，如：

```
private static void PrintEachItemInList<TList, TItem>(TList anyType) 
  where TList : System.Collections.Generic.List<TItem> 
```

如果您使用实际派生自`List<>`. 如果您想要任何*充当*列表的东西，请考虑改为限制到*界面* `IList<>`。然后它将适用于`List<>`、一维数组和实现接口的自定义类（但不一定派生自`List<>`）。

**编辑：**正如评论所指出的，这种方法使用起来很麻烦，因为编译器不会推断这两个类型参数，所以在调用方法时必须明确给出它们。

考虑只使用：

```
private static void PrintEachItemInList<TItem>(List<TItem> anyType) 
```

因为从 a 派生的任何东西都`List<>`可以分配给`List<>`，所以可以使用派生类作为参数调用该方法，并且在许多情况下`TItem`，编译器可以自动推断类型。

还是考虑用接口`IList<>`。

如果您想要做的只是从列表中*读取*，请使用`IReadOnlyList<TItem>`而不是`IList<TItem>`. 这向来电者发出信号，表明您不会更改他的列表。调用时仍然不需要强制转换语法，例如：`PrintEachItemInList(new[] { 2, 3, 5, 7, });`. 该类型`IReadOnlyList<>`是 .NET 4.5 版中的新类型。

如果您只想从列表中读取，并且您不想使用索引器（否`anyType[idx]`），并且您不想使用`.Count`属性，实际上您只想`foreach`通过列表, 使用`IEnumerable<TItem>`. 再次，您表示您不会更改人员列表。

两者`IReadOnlyList<>`和在它们的通用参数（类型参数）中`IEnumerable<>`都是*协变的。*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T16:55:19.540

将您的输入参数声明为`IList<T>`. 如果你想让你的输入序列尽可能抽象 - 使用`IEnumerable<T>`而不是`IList<T>`

```
private static void PrintEachItemInList<T>(IList<T> sequence)
{
    foreach (T element in sequence)
    {
        //Do whatever
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T16:55:30.537

您的函数应该只接受一个列表，并且您不需要约束：

```
private static void PrintEachItemInList<T>(IList<T> list) 
{
    foreach (var t in list)
    {
        //Do whatever
    }
} 
```

但是，如果您只想迭代列表，则可以通过将参数类型更改为以下基本接口之一来使代码更通用：

*   `IEnumerable<T>`- 允许`foreach`
*   `IReadOnlyCollection`- 与上面相同，并提供集合中元素的数量
*   `IReadOnlyList`- 与上面相同，并允许通过索引访问元素
*   `ICollection<T>`-`IEnumerable<T>`提供元素计数和添加和删除元素的方法
*   `IList<T>`- 与上面相同，允许您按索引添加和删除元素

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T17:03:18.870

如果您想使用参数多态性来表达该约束，则在 c# 中您需要两个类型参数（因为您没有获得高阶类型）：

```
private static void PrintEachItemInList<X, T>(X anyType) where X:System.Collections.Generic.List<T>
{

             foreach (var t in anyType)
            {
                Console.WriteLine(t.ToString());
            }
} 
```

但是你需要这样调用：

```
PrintEachItemInList<List<string>,string>(new List<string>() {"a", "b"}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T16:55:26.430

你通常会这样写：

```
private static void PrintEachItemInList<T>(List<T> anyType)
{
  // do work
} 
```

但是，在这种情况下，我建议`IEnumerable<T>`改用：

```
private static void PrintEachItemInList<T>(IEnumerable<T> anyType)
{
  // do work
} 
```

这仍然允许您使用`foreach`，但允许您的方法更加灵活，因为它可以工作`List<T>`，而且任何其他实现`IEnumerable<T>`. 如果您必须在方法中包含列表语义，则可以使用`IList<T>`，但您的示例代码（和方法名称）建议`IEnumerable<T>`会更合适。

# javascript - 显示 2 个日期选择器日期之间的天数？

> ID：14816881
> 
> 赞同：1
> 
> 时间：2013-02-11T16:54:08.423
> 
> 标签：javascript, jquery, twitter-bootstrap, datepicker

我正在尝试计算 2 个日期选择器字段之间的天数，并在输入字段中显示该值。我已经搜索了很多不同的方法，但似乎没有任何工作。我正在使用 boostrap-datepicker.js

我在这里创建了一个 JS 小提琴[http://jsfiddle.net/KLpq7/201/](http://jsfiddle.net/KLpq7/201/)所以你可以看到我到目前为止的努力

我的 JS 如下

```
function days() {
        var a = $("#datepicker_start").datepicker('getDate').getTime(),
            b = $("#datepicker_end").datepicker('getDate').getTime(),
            c = 24*60*60*1000,
            diffDays = Math.round(Math.abs((a - b)/(c)));
        $("#totaldays").val(diffDays)
}

$('.datepicker')
.datepicker({format: 'DD, dd.mm.yyyy'})
.on('changeDate', function(ev){
$(this).datepicker('hide').blur();
}); 
```

在第一部分中，我试图实现这一目标，但它不起作用！

寻求帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T17:07:28.333

我已经修改了正确计算差异的[jsfiddle](http://jsfiddle.net/Deif/KLpq7/211/)。我注意到的一个想法是您使用`dd/mm/yyyy`格式，默认情况下 JS 希望日期为`mm/dd/yyyy`. 最好以“美国”方式处理日期差异计算，但如果您必须使用“正确”样式，`dd/mm/yyyy`那么我建议您查看[Globalize](https://github.com/jquery/globalize)库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:59:34.650

```
function DateDiff(var date1, var date2) {
    return date1 - date2;
} 
```

如果您在 Javascript 中传入两个 Date 对象，应该可以工作。返回的结果将是两者之间的毫秒数，可以很容易地转换为天、小时或周等。

# windows-phone-8 - Visual C++中的字节数组参数

> ID：14816887
> 
> 赞同：0
> 
> 时间：2013-02-11T16:54:29.257
> 
> 标签：windows-phone-8, c++-cx, visual-c++-2012

我是 Visual c++ 的新手。我在 .h 文件中有一个方法，如下所示：

```
 public:
   void DoSomething(); 
```

在这里，我需要将字节数组作为参数传递，并且我需要在 .cpp 文件中实现它。我正在使用 Windows Phone 8，为此我需要包含 Windows Phone 运行时组件的 Visual C++ 项目。我需要在 c# 类中使用此方法并从那里传递字节数组。但我不知道如何在 C++ 中声明一个字节数组方法。任何人都可以帮我找到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T00:01:22.820

在 C++/CX 中，您用于运行时组件的签名将如下所示（假设您有`ref class`）：

`void DoSomething(const Platform::Array<uint8>^ something);`

这可以通过传入一个`byte[]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:02:17.860

```
public:
   void DoSomething(Byte *); 
```

或者

```
public:
   void DoSomething(unsigned char *); 
```

举个例子。

# redis - 如何保持redis服务器运行

> ID：14816892
> 
> 赞同：91
> 
> 时间：2013-02-11T16:54:44.173
> 
> 标签：redis

我在 nodejs 应用程序中使用 redis 来支持会话。我已经安装了 redis 服务器，当我运行 redis-server 时它可以工作，但是当我关闭终端时，redis 停止并且不起作用。关闭终端后如何保持redis服务器运行？

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2015-12-23T13:20:19.673

而且，如果您想要一个快速的选项，请运行：`redis-server --daemonize yes`。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2013-02-11T21:51:26.600

将 Redis 作为守护程序启动的最简单方法是编辑配置文件并更改以下行：

```
# By default Redis does not run as a daemon. Use 'yes' if you need it.
# Note that Redis will write a pid file in /var/run/redis.pid when daemonized.
daemonize yes 
```

启动时请务必在 redis-server 命令行上提供配置文件。

Redis 发行版中提供了配置文件的示例。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2015-08-19T10:15:14.553

正如@DidierSpezia 在他的回答中提到的，

`daemonize yes`在 Redis conf 文件中设置。`daemonize yes`在 Redis conf 文件中设置，`/path/to/redis.conf`通常它应该在`/etc/`.

和 ：

然后以 conf 文件作为参数触发 redis-server：

```
./redis-server /etc/redis.conf 
```

**更新**`demonize`您也可以直接运行带有标志 的redis

```
redis-server --daemonize yes 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-03-31T15:25:29.243

接受的答案*大多是过时*的。虽然这个问题*很老*，但谷歌仍然排名很高，所以请允许我更正一下。

OP 没有提供任何关于他的设置的细节，但你可以假设它是一个 linux，而且他没有提到容器，所以你也可以假设他在没有容器的情况下运行 redis。

三个细节使**接受的答案成为忘记的事情**

*   大多数（流行）发行版默认带有 systemd
*   大多数（流行的）发行版在其官方存储库中都有 redis
*   该官方redis包为redis安装systemd服务

所以

*   它将`supervised systemd`在其默认配置中
*   开始：redis 守护进程用`sudo systemctl start redis@instanceName`你替换“instanceName”的地方。也`sudo systemctl enable redis@instanceName`用于在启动时自动启动。（顺便说一句，已经忘记了`service start`和 init 脚本！这些现在比直接调用更不便携`systemctl`）。
*   不要设置为，这会干扰 systemd 监督 redis *！*`daemonize: yes`

Systemd 将监督，重新启动您的 redis，并且您可以为其设置服务依赖关系和服务前提条件，即使对于自定义可执行文件也不是那么难，搜索 systemd 单元文件（您需要大约 10 行配置文件） . 很有可能，你会想要的。

如果三个细节（使 systemd 成为正确答案）没有得到满足/不相关，您很可能正在运行 redis 容器化。对于 docker/podman/etc.，这完全是另一个问题......（内部 linux 中没有 systemd，但您必须（或已经这样做）监督（d）容器守护进程本身）

# android - Android中的复杂导航、视图堆栈

> ID：14816894
> 
> 赞同：0
> 
> 时间：2013-02-11T16:54:48.240
> 
> 标签：android, views, stack

有人可以在管理Android应用程序中的复杂导航流方面为我指出正确的方向。
**用例如下**：用户可以单击缩略图网格中的缩略图，这将用户带到图像的“详细”视图。除了特定图像的详细信息之外，此详细视图还具有与图像“相关”图像的列表/轮播。用户单击其中一个相关并进入该图像的“详细”视图。等等等等。这基本上会创建一个无限/未知长度的堆栈。通过点击“返回”按钮，用户将被带到上一个视图。
**任务**：我希望能够对视图堆栈设置一些限制。因此，例如，如果用户已导航到第 10 个“详细”视图 - 他们只需点击“返回”3 次即可到达他们开始整个流程的缩略图网格。

我在我的应用程序中使用片段。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:58:18.733

我会使用 2 个活动。一项活动显示网格，另一项活动显示详细视图。详细视图维护一堆以前的图像，最大长度为 3。当按下相关图像时，您将当前图像压入堆栈，如果需要，丢弃最旧的图像。然后重新显示新图像。覆盖 onBackPressed 以从堆栈中弹出图像。如果栈是空的，调用finish()，你会回到网格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:00:10.230

我要说的一个建议不是为“详细”视图打开一个新的活动。而是用新的支持数据刷新活动。这样你的活动堆栈中只有 2 个活动。如果你想要至少最后 3 个详细信息页面然后覆盖后退按钮并维护一组 3 张图像以显示详细信息页面。

# ruby-on-rails - 如何直接从 Ruby 查询 MongoDB 而不是使用 Mongoid？

> ID：14816900
> 
> 赞同：30
> 
> 时间：2013-02-11T16:55:02.187
> 
> 标签：ruby-on-rails, mongodb, mongoid

我正在为使用 MongoDB 和 Mongoid 的 Rails 应用程序编写迁移。我的迁移目前使用我的模型，这些模型使用 Mongoid 来查询和更新记录，但性能低于标准。我本质上是在更新大型集合中的所有记录并进行 n+20 次查询。我花了一个小时在本地运行（但没有完成）后终止了迁移。我希望能够毫不费力地对 mongo 运行原始查询。我假设有一些方法可以从 Mongoid 访问 mongo 驱动程序，因为 Mongoid 已经加载了与数据库的连接。如何访问数据库以直接运行我的更新查询？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-07-08T23:42:30.530

如果您使用的是 Mongoid 3，它可以轻松访问其 MongoDB 驱动程序：[Moped](http://mongoid.org/en/moped/)。这是一个在不使用模型访问数据的情况下访问一些原始数据的示例：

```
db = Mongoid::Sessions.default

# inserting a new document
collection = db[:collection_name]
collection.insert(name: 'my new document')

# finding a document
doc = collection.find(name: 'my new document').first

# iterating over all documents in a collection
collection.find.each do |document|
  puts document.inspect
end 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-09-27T18:24:21.297

对于 Mongoid 5：

```
db = Mongoid::Clients.default

collection = db[:collection_name] 
```

现在我们可以对集合执行查询

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-13T08:01:43.683

在这里你是怎么做的（这也适用于 2+ 和 3+）

1）您的所有模型都表现出这种行为，您在所有模型中都**包含 Mongoid::Document**，因此从技术上讲，每个文档都通过 moped 或 mongodb-ruby 驱动程序通过 mongoid 映射到 monogodb

所以如果你有模型喜欢

```
class PerformerSource 
  include Mongoid::Document
  ## Definition

end 
```

现在您可以像这样使用驱动程序（Moped 或 Mongodb-ruby 驱动程序）运行 Mongo Query

```
PerformerSource.collection.insert("something")
## where something is json document you want to insert 
```

这将为您提供该文档的轻便摩托车（如果使用 mongoid 3）连接

2）你也可以这样做

```
 Mongoid::Sessions.default.collections.find { |document| document.name == "performer_sources"}.insert("something") 
```

How to more on mongo query and how mongoid map those using moped 你可以按照查询的[这一](http://mongoid.org/en/mongoid/docs/querying.html)部分来描述如何通过 moped 在内部实现查询

希望这有帮助

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-04-23T12:27:47.347

对于 Mongoid 6：

```
db = Mongoid::default_client
collection = db[:collection_name] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T17:21:57.097

简短的回答是[轻便摩托车](http://mongoid.org/en/moped/)。这是构建 Mongoid 的较低级别的 API，如果您已经使用 Mongoid，它将可用。Moped API 是原始 MongoDB 操作的精简包装器。这里的文档：http: [//mongoid.org/en/moped/docs/driver.html](http://mongoid.org/en/moped/docs/driver.html)应该很有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-14T03:20:28.110

就像这里提到的任何人一样，您的答案是助力车。这是我的 ruby​​ 脚本示例（简单文件 test.rb）

1.  定义一个 mongoid.yml（在本例中，在 localhost）

```
development:
  sessions:
    default:
      database: test_development
      hosts:
        - localhost:27017
      options: 
```

2.  设置加载配置和测试集合

    #!/usr/bin/env ruby​​ 需要 'mongoid'

    Mongoid.load!("path/to/file/mongoid.yml",:development) # :development 对应mongoid.yml 第一行环境 db = Mongoid::Sessions.default puts "Collection documents count :> #{db[ :collection].find.count}"

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-24T02:35:19.417

如果您使用 mongoid 5(5)，我建议您使用它。

```
Item.collection.update_one({_id:  BSON::ObjectId('55512b7070722d22d3050000')}, '$set' => { 'category_name': 'Test' }) 
```

诀窍是 BSON::ObjectID。如果您想搜索单个 id，这就像在 mongo 查询中一样。

```
db.items.update({ '_id': ObjectId("55512b7070722d22d3050000") }, { $set: {'category_name': 'Test' } }) 
```

以上是查询的 mongo 版本。我发现将 ruby​​ 代码翻译成 mongo 代码是困难的部分，因为在文档中有些部分很难找到。

[http://www.rubydoc.info/gems/mongo/Mongo%2FCollection%3Aupdate_one](http://www.rubydoc.info/gems/mongo/Mongo%2FCollection%3Aupdate_one)

# node.js - grunt grunt-s3 上传错误 ECONNREFUSED 问题

> ID：14816912
> 
> 赞同：4
> 
> 时间：2013-02-11T16:55:31.390
> 
> 标签：node.js, amazon-s3, amazon-ec2, gruntjs

我正在使用 grunt 进行构建，我正在使用的一个插件是 grunt-s3 将文件（如果测试成功）推送到云端。

但是，我得到：

```
Running "s3" task

>> Error: Upload error: /header/dist/js/lib/json2.min.js.gz (Error: connect ECONNREFUSED)
>> Error: Upload error: /header/dist/js/lib/modernizr.custom.js.gz (Error: connect ECONNREFUSED)
>> Error: Upload error: /header/dist/js/master.menu.min.js.gz (Error: connect ECONNREFUSED) 
```

有人知道我可以检查/更改什么吗？我的亚马逊凭证没问题，因为我可以在同一台机器/连接上通过 cloudberry explorer 使用我的密钥/秘密登录到我的存储桶，所以一定是节点/咕噜相关的东西吗？

**编辑**

阅读 npm 文档是这样说的：

“我经常被 ECONNREFUSED。怎么了？

... 或者节点的 DNS 无法访问。”

这听起来很有趣，但我不知道要检查什么或如何解决，因为我是 node.js 的新手

# oracle - 将 oracle 日期字符串转换为数字

> ID：14816916
> 
> 赞同：2
> 
> 时间：2013-02-11T16:55:38.693
> 
> 标签：oracle

我需要将日期字符串 -'2013-01-01' 转换为数字 --20130101 类型。如何在 Oracle 中有效地完成它？

```
 My Input-

'2013-01-01'

   My Output

    Output-20130101 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T17:16:54.550

```
select to_number(replace('2013-01-01', '-')) from dual; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-29T17:04:35.390

您可以将字符串转换为日期并使用您想要的格式转换回来：

```
select to_char(to_date('2013-01-01', 'YYYY-MM-DD'), 'YYYYMMDD'); 
```

有关日期时间格式的更多信息：

[http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements004.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements004.htm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T16:57:36.677

```
 to_char(your_date,'YYYYMMDD') 
```

这里只是使用带有日期的 to_char 的基础知识。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T21:12:22.470

您还可以“利用”格式掩码：

```
select to_number('2013-01-01', '9999G99G99', 'nls_numeric_characters=,-')
from dual 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/d41d8/7225)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-02T18:12:21.813

要将日期字符串转换为数字：

始终先将其转换为 char，然后再转换为数字：

```
Select TO_NUMBER(TO_CHAR(to_date('2013-01-01', 'YYYY-MM-DD'),'YYYYMMDD')) from dual 
```

如果您的列数据类型是 DATE，则在下面使用您的列名代替 sysdate：

```
Select TO_NUMBER(TO_CHAR(sysdate,'YYYYMMDD')) from dual 
```

# iphone - 需要在 UIImageView 上显示 UITableView

> ID：14816918
> 
> 赞同：-1
> 
> 时间：2013-02-11T16:55:49.333
> 
> 标签：iphone, ios5

我在 UIImageView 中显示了 UITableView。但我无法使用在 indexpath 处选择行。

谁能帮我解决这个问题。

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:11:35.460

默认情况下，UIImageView 没有启用交互。这可能就是您没有收到表格视图的触摸事件的原因。尝试添加：

```
[imageView setUserInteractionEnabled:YES]; 
```

# jquery - 服务器和客户端代码的不舒服混合 - 我怎样才能同时满足这两个要求

> ID：14816919
> 
> 赞同：0
> 
> 时间：2013-02-11T16:55:53.607
> 
> 标签：jquery, asp.net

我正在使用中继器控件-中继器上的每个项目都有一个图像和一个链接按钮。

从功能方面来说，单击链接按钮会触发一个 itemcommand（提供一个命令参数）。然后，此 item 命令运行一些服务器端代码，以将与第一个转发器相关的数据作为子列表填充另一个转发器。

从 UI 方面来看，中继器上的每个项目的图像不透明度都会降低，但单击的链接按钮图像除外。

这是我遇到麻烦的地方：

```
$('.showSubCats').click(function (e) {
    e.preventDefault();
                $(".myImages").animate({ opacity: 0.2 }, 300);
                $(this).parent().children('img').animate({ opacity: 1.0 }, 300);

}); 
```

这显示了当前单击的图像并巧妙地隐藏了其余图像。但是我不得不引入 e.preventdefault() 因为 itemcommand 上的回发显然取消了 jquery 刚刚对图像所做的工作。

通过引入 .preventdefault()，我现在丢失了 itemcommand，因为它被阻止了。啊。

以为我有：

*   我尝试使用 registerstartupscript 从后面的代码中运行一些 jquery，但它在 DOM 完成之前运行并且我的图像恢复到 1.0 不透明度
*   我在我的 jquery 中尝试了一个 ajax 调用以这种方式运行服务器端脚本 - 但我无法获得可行的解决方案
*   我尝试添加 {return: true};

我是用这个想法鞭打一匹死马，还是我可以尝试其他方法？

这是我的项目命令代码：

```
 protected void showSubCat_itemCommand(object sender, CommandEventArgs e)
    {

            using (var db = new ps.data.Entities1())
            {

                int id = int.Parse(e.CommandArgument.ToString());
                var subCats = (from sc in db.vwSubCategories
                               where sc.primaryCategoryID == id
                               select sc).ToList();

                SubCategories.DataSource = subCats;
                SubCategories.DataBind();
                currentCatChosen.Value = id.ToString();
            }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:34:03.360

*我尝试使用 registerstartupscript 从后面的代码中运行一些 jquery，但它在 DOM 完成之前运行并且我的图像恢复到 1.0 不透明度*

IMO，这是正确的方法。至于图像恢复...您是否尝试将代码包装在其中`$(document).ready()`？

# c - 如何在 ubuntu 12.04 下为 libnet 安装手册页

> ID：14816921
> 
> 赞同：0
> 
> 时间：2013-02-11T16:55:58.397
> 
> 标签：c, gcc, libnet

命令 sudo apt-get install libnet1-doc 没有任何效果，有人知道这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:59:49.027

至少在 Debian 上，联机帮助页`libnet`位于`libnet1-dev`.

库通常被分成一个包含共享库的包（因此可执行文件取决于库可以运行）和一个包（`-dev`在基于 Debian 的发行版上带有后缀），其中包含头文件、静态库、`libNAME.so`到共享的未版本化符号链接库，即根据库*构建*程序可能需要什么。联机帮助页通常在后一个开发包中。

# jquery - JQuery Object to String（带有Object元素）并将其写入cookie

> ID：14816922
> 
> 赞同：1
> 
> 时间：2013-02-11T16:56:01.087
> 
> 标签：jquery, string, object, cookies

我有一个包含一些图像的列表，想要重新排序列表元素（这适用于可排序的 jquery ui），然后以正确的顺序将图像的 scr 写入 cookie。

```
$("#sortable").sortable({
         cursor: "move",
         update: function() { 

        var reordered = $('#sortable li img').each(function(index, value){
                        console.log = ($(this).attr('src'));
                        }); 

        cookie.set('pdfbilder', reordered, {
        duration : 1,
        path : '/',
        secure : false
        });

         } 
```

我知道console.log 只是为了检查输出并且这有效，但是“重新排序”变量，所以cookie值是[object Object]

我真的搜索并尝试过，但找不到解决方案......
（老实说，我对 jquery 很陌生）
有人有想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:00:13.907

我建议使用`map()`迭代选择器匹配的元素，返回“当前迭代”节点/对象的属性`this.src`（`$(this).attr('src')`不必要地昂贵），然后形成这些返回属性的数组并将它们连接在一起形成一个字符串，使用`join()`：

```
var reordered = $('#sortable li img')
                    .map(function(){ return this.src; })
                    .get().join(' '); 
```

[概念证明](http://jsfiddle.net/davidThomas/t2QFC/)。

如果没有将分隔符传递给`join()`方法，则默认为逗号分隔的字符串；在给定的代码示例中，我选择使用单个空格字符，但可以根据需要进行修改。

参考：

*   [`get()`](http://api.jquery.com/get/).
*   [`join()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join).
*   [`map()`](http://api.jquery.com/map/).

# java - 干扰线程

> ID：14816926
> 
> 赞同：1
> 
> 时间：2013-02-11T16:56:19.313
> 
> 标签：java, multithreading

我在理解这段代码时遇到了问题，我的问题是为什么两个线程在执行方法中的语句时不会相互干扰`run`？

我的意思是总是先做所有的陈述然后再来第二个线程做陈述。

第一个线程执行部分语句然后第二个线程执行部分语句然后第一个线程继续其任务是不可能的......

注意：我知道这两个线程使用不同的`OutputStream`对象

线程代码在这里

```
class Printer extends Thread
{
   private String ThreadName;

   public Printer(String name)
   {
       this.ThreadName=name;
   }

   public void run()
   {
       PrintStream out=new PrintStream(System.out);

       out.println(this.ThreadName+" : a");
       out.println(this.ThreadName+" : b");
       out.println(this.ThreadName+" : c");
       out.println(this.ThreadName+" : d");
       out.println(this.ThreadName+" : e");
       out.println(this.ThreadName+" : f");
       out.println(this.ThreadName+" : g");
       out.println(this.ThreadName+" : h");
       out.println(this.ThreadName+" : i");
       out.println(this.ThreadName+" : j");
       out.println(this.ThreadName+" : k");    
   }
} 
```

进入代码：

```
class Main 
{
    public static void main(String[] args)
    {
        Thread t1 = new Printer("thread 1");
        Thread t2 = new Printer("thread 2");

        t1.start();
        t2.start();
    }
} 
```

尝试替换`System.out` 并`out`比较结果，然后您将确切知道我要的是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:15:12.267

在解释之前有几件事：

不需要扩展`Thread`，只需实现更容易`Runnable`，它提供了`run`您正在实现的方法。在这一点上，你可以给`Runnable`a`Thread`或更有用的是 an `Executor`（对于 Java 中的多线程非常有用）。

此外，包装[`System.out`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html)在 a`PrintStream`中是多余的，因为a本身`System.out`已经是多余的。`PrintStream`

最后，您的代码没有共享任何内容，这就是它们不会相互干扰的原因。每个人所做的只是打印出他们的名字和一个独特的字母，以便您找到它。 `System.out`在 Sun 实现中是线程安全的（正如 Andre 所指出的，这在技术上不是 JVM 实现所要求的），因此您将无法分解输出，但这不会阻止您潜在地交织输出。

例如，如果你运行得足够多，那么你可以很容易地看到：

```
thread 1 a
thread 2 a
thread 1 b
thread 2 b 
```

但是，我怀疑您看到的是：

```
thread 1 a
    .
    .
    .
thread 1 k
thread 2 a
    .
    .
    .
thread 2 k 
```

这不是因为某些东西被破坏了，而是因为线程执行得如此之快以至于它就是这样发生的。由于您正在学习，最好`Thread.sleep`在输出之间添加一些随机延迟的调用，这样您就可以希望观察到交织。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T17:13:52.023

In`System.out.println()` `out`也是参考，`PrintStream` 因此您在两种方式中都调用相同`println()`的方法。

但是你得到不同的输出。虽然 println 函数有同步实现。

```
public void println(String x) {
    synchronized (this) {
        print(x);
        newLine();
    }
} 
```

现在想想，`out`in`System.out.println`是静态的，而`PrintStream out`不是。

```
PrintStream out=new PrintStream(System.out); 
```

在上面的声明中，新的引用`out`是非静态的。

> 如果方法不是静态的，那么添加 synchronized 关键字将同步类的实例，而不是 Class 对象。

所以为了得到你想要的结果，请`PrintStream out`静态

# windows - Visual Studio 2010 x64 __setReg 等效编译器内部

> ID：14816928
> 
> 赞同：1
> 
> 时间：2013-02-11T16:56:22.587
> 
> 标签：windows, visual-studio-2010, assembly, x86-64, intrinsics

我有一个用 C 语言编写的应用程序，我确实需要在调用函数之前修改其中一个处理器寄存器的值。通常我会使用内联汇编来执行此操作，但众所周知，对于 64 位应用程序已将其删除。由于某些项目限制，我也无法在使用 ml64 编译的单独 .asm 文件中执行此操作。所以基本上我需要执行以下内联代码的等价物：

```
_asm mov r10d, 0xDEADBEEF 
```

有谁知道 x64 固有的创造性方法或其他编译器可以让您修改内联寄存器的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:19:26.723

不幸的是，在查看了可能的解决方法之后，Hans 似乎是对的，根本不可能修改内联寄存器的内容。没有编译器内在函数可以做到这一点，唯一的选择是将整个函数在 64 位汇编中编写为单独的 .asm 文件并使用 ml64 编译，或者按照 Alexey 的建议执行并在之前分配一个可执行的内存块手并将操作码写入它。然后，您可以创建一个函数指针并直接调用此代码。例如，如果我想做相当于：

```
mov r10d, ecx
ret 
```

只需创建一个数组来存储操作码：

```
BYTE copyValueToR10[] = "\x44\x8B\xD1\xC3"; 
```

然后，您可以为这个带有 PAGE_EXECUTE 保护的小功能分配 VirtualAlloc 内存。接下来只需创建一个函数指针，您就可以开始了。绝对是一种肮脏的方法，但考虑到没有内联汇编或想要使用 ml64 编译的限制，这似乎是唯一的另一种方法。

# python - 以自动化方式获取蛋白质单体

> ID：14816932
> 
> 赞同：-1
> 
> 时间：2013-02-11T16:56:34.027
> 
> 标签：python, biopython

对于来自 PDB 数据库的一组给定的 pdb 格式的蛋白质结构，我想找到一些自动化的方法来检查每个结构是否是单体、二聚体、三聚体等，所以我只得到每种情况下的单元结构或单体。我头关于 biopython，但我不确定并想知道是否还有其他方法可以解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:32:15.440

看起来第一步是访问 PDB 数据库。我不熟悉 biopython，但从文档看来，它只内置了以下数据库连接器：

*   ExPASy
*   SCOP
*   来自 NCBI 的 Entrez（和 Pubmed）

您知道如何连接到 PDB 数据库吗？

# ember.js - Ember Pre4：如何检查插座是否已连接？

> ID：14816933
> 
> 赞同：1
> 
> 时间：2013-02-11T16:56:40.367
> 
> 标签：ember.js

如何检查我的应用程序模板中是否已连接插座？在 renderTemplate() 我想检查插座是否真的需要连接（出于性能原因）。最终代码应类似于以下内容：

```
renderTemplate: function(controller, model) {
    var isMyOutletConnected =  //how to do that?

    if(!isMyOutletConnected){
        this.render('someTemplate', {   // the template to render
          into: 'application',          // the template to render into
          outlet: 'someOutlet',       // the name of the outlet in that template
          controller: "someController"  // the controller to use for the template
        });
    }
} 
```

我尝试使用容器通过以下方式查找应用程序视图：`container.lookup("view:application)` 但这实例化了一个新视图，而不是返回现有视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:56:15.247

感谢您的输入。这是我想出的解决方案：

1 -**为我的单例视图创建视图注册表。**视图注册表驻留在应用程序实例中，其属性由 didInsertElement 中的视图设置。

```
var App = Ember.Application.create({
    viewRegistry : {
        applicationView : null
    }
});

App.ApplicationView = Ember.View.extend({
    templateName : 'application',
    didInsertElement : function(){
        App.set("viewRegistry.applicationView", this);
    }
}); 
```

2 - 现在我可以**访问此注册表以检查**我的路线中连接的插座：

```
isOutletOfApplicationViewConnected : function(outletName){
    var applicationView = App.viewRegistry.applicationView;
    if(applicationView){
        return applicationView.get("_outlets." + outletName) != undefined;
    }else{
        return false;
    }
},
renderTemplate: function(controller, model) {
    var isMyOutletConnected =  this.isOutletOfApplicationViewConnected("someOutlet");

    if(!isMyOutletConnected){
        this.render('someTemplate', {   // the template to render
          into: 'application',          // the template to render into
          outlet: 'someOutlet',       // the name of the outlet in that template
          controller: "someController"  // the controller to use for the template
        });
    }
} 
```

这个解决方案可能更通用，因为方法“isOutletOfApplicationViewConnected”是硬连线到我的应用程序视图的，但这是一个好的开始，对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:35:45.857

当您的元素插入 dom 时，使用`Jquery`插件注册回调。`livequery`这可以在视图本身中完成

看到[这个问题](https://stackoverflow.com/questions/3900151/is-there-a-jquery-event-that-fires-when-a-new-node-is-inserted-into-the-dom)

# java - 为什么 Java 中的 LinkedList 不是真正的 Linked List？

> ID：14816936
> 
> 赞同：10
> 
> 时间：2013-02-11T16:56:59.777
> 
> 标签：java, linked-list

根据定义，链接列表是一个列表，它的每个元素都指向下一个元素（如果我们谈论的是双链表，则是前一个元素。） [http://en.wikipedia.org/wiki/Linked_list](http://en.wikipedia.org/wiki/Linked_list)

然而，在 Java LinkedList 中实现了 List、Queue、Deque 等。 [http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)

您无法在 LinkedList 中找到为您提供列表中的下一个或上一个对象的方法，您能做的最好的事情就是获取一个迭代器并获取对象。我的问题是为什么 Java 将这种数据结构称为 LinkedList，而它并不是真正的链表？链表可以像这样在 Java 中实现：

```
Public class MyLinkedList{
 public int value;
 public MyLinkedList next;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T16:59:24.437

> 您无法在 LinkedList 中找到为您提供列表中下一个或上一个对象的方法

不，这是完全合适的。*“列表中的下一项”的想法在列表*中没有意义。*这对于列表中的节点*非常有意义，但这不是 Java API 所公开的。当然，它存在于内部 - 只是没有暴露。如果要遍历列表，请使用迭代器。您仍然可以在开头或结尾添加，从开头或结尾删除，以及从迭代器中添加/删除。

虽然您当然*可以*像建议的示例代码那样将“节点”和“列表”的概念混为一谈，但我认为这通常不是一个好主意。

换句话说：你想*达到*什么目的导致你出现问题？我相信你应该能够使用公共 API 做你想做的事——你可能只是没有注意到这一切。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T16:58:09.783

> 我的问题是为什么 Java 将这种数据结构称为 LinkedList，而它并不是真正的链表？

因为它的*实现*是一个链表。从[文档中](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html)：

> `List`和`Deque`接口的双向链表实现。实现所有可选列表操作，并允许所有元素（包括`null`）。

`LinkedList`是`List`通过链表实现的，`ArrayList`是`List`使用数组实现的，等等。您选择哪一个取决于运行时特性。例如，来自`LinkedList`文档：

> 所有操作都按照双向链表的预期执行。索引到列表中的操作将从开头或结尾遍历列表，以更接近指定索引的为准。

所以你知道，例如，`next`你`Iterator`从那里得到`iterator`或`listIterator`将非常有效，但`get`按索引将涉及遍历。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-11T16:58:27.817

集合是链表还是数组列表与它的契约无关，而与它的实现有关。`LinkedList`确实是一个实现的链表，一个`java.util.List`契约的链表。

它展示的不是它的 API，而是它的空间/时间复杂性特征，任何熟悉链表的人都可以很容易地预料到。

作为参考，这是一个`LinkedList`节点的实际实现，非常符合您的期望：

```
957  私有 静态 类Node<E> { 
958       E 项；
959      节点<E> 下一个；
960      节点<E> 上一页; 
962      节点（节点<E>上一个，E元素，节点<E>下一个）{ 
963          这个.item =元素；第
964          章 第
965          章 
966       } 
967   }

```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T17:48:00.307

当我阅读您的问题时，我感觉您没有很好地区分链表的概念和链表的实现。

您的示例代码很好地展示了链表的概念，但这并不意味着它是实现链表的唯一方法或最佳方法。我相信您可以使用内置类执行标准链表所需的任何操作`LinkedList`，尽管您可能会在数据结构类或教科书中看到一组不熟悉的 API。

所以基本上就是一个链表，只要能做到及时的插入操作、`O(1)`及时的删除操作、`O(1)`及时的搜索操作`O(n)`等等，对比其他数据结构比如数组的时间复杂度。

内置`LinkedList`没有`next`直接提供操作，而是通过它的迭代器。这只是 Java 语言的设计决策，因为您可能会从[迭代器模式](http://en.wikipedia.org/wiki/Iterator_pattern)中受益。

而Java是一种典型的面向对象语言，其主要特点之一就是[抽象](http://en.wikipedia.org/wiki/Abstraction_%28computer_science%29)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T17:00:22.660

除了其他人的正确答案外，如果接口的底层实现是一个Linked List，那么实现对象将有一个方法来获取列表中的下一项。该方法只是没有作为合同的一部分公开。

实现是一个链表这一事实会影响 List 合约的各种方法的 Big-O 性能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T17:04:15.590

> 然而，在 Java LinkedList 中实现了 List、Queue、Deque 等。

根据 API，LinkedList 实现了这些接口，因此可以使用任何这些结构。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-12T15:08:26.353

所以我不知道@Marko 从哪里读取该实现，但 1.8 jdk 中的实现有很大不同。

首先，声明的第一个变量是：

```
 transient int size = 0; 
```

每当将节点添加到列表中时，该值就会增加。这意味着列表中存在 Integer.MAX_VALUE (2147483647) 节点的固有限制。在现代世界，这个数字并不像看起来那么大。问题不在于我们没有真正的链表（创建它们很简单），而是对于所有 3rd 方库，他们很可能不会考虑到这一点，然后整个库就会被淘汰.

# c++ - XML（C++）中的真正二进制块？

> ID：14816940
> 
> 赞同：5
> 
> 时间：2013-02-11T16:57:15.243
> 
> 标签：c++, xml, encoding, binary

是否可以将真实的（未以字符编码的）二进制块（最好具有定义的字节顺序和字长）集成到 XML 文件中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T17:38:02.240

不，在保持 xml 标准的同时，这是不可能的。

已解析的 XML 实体中允许的字符集是制表符、回车符、换行符和有效的 Unicode 字符。有许多字节超出了这个允许的范围，最突出的是 0x0，但也有 0x1 - 0x8、0xB - 0xC 和 0xE - 0x1F（即，大多数值是典型的 ASCII 控制字符）。

您甚至不能将它们作为数字实体包含在内，因为它们不是有效字符。即，以下内容将无效：

```
<test>
    Testing ^A: &#x1;
</test> 
```

见[http://www.w3.org/TR/2006/REC-xml11-20060816/#charsets](http://www.w3.org/TR/2006/REC-xml11-20060816/#charsets)

# javascript - 无法让我的引导轮播运行 - jQuery 行禁用其余代码

> ID：14816942
> 
> 赞同：2
> 
> 时间：2013-02-11T16:57:22.797
> 
> 标签：javascript, jquery, html, twitter-bootstrap, carousel

我一直在为这个 Bootstrap 轮播而苦苦挣扎。我搜索了整个论坛，但无法正常工作。这是代码：

```
<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8">
    <title>Sindicato de Hot&eacute;is, Bares, Restaurantes e Similares do Litoral Norte do RS</title>
    <link href="assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen" />
    <link href="css/index.css" rel="stylesheet" />
    <script type="text/javascript" src="assets/bootstrap/js/bootstrap.js"></script>
    <script type="text/javascript" src="assets/js/jquery.js"></script>
    <script type="text/javaScript">
      <!--
        $(document).ready(function(){
          $("#about").hide();
          $("#drop").click(function(){
            $("#about").toggle(200);
          });
          $('.carousel slide').carousel('cycle');
          //Conteúdos
          $("#body").load("home.html");
          $("#home").click(function(){
            $("#body").load("home.html");
          });
          $("#historia").click(function(){
            $("#body").load("historia.html");
          });
          $("#diretoria").click(function(){
            $("#body").load("diretoria.html");
          });
          $("#base").click(function(){
            $("#body").load("base.html");
          });
          $("#associe").click(function(){
            $("#body").load("associe.html");
          });
          $("#documentos").click(function(){
            $("#body").load("documentos.html");
          });
          $("#contato").click(function(){
            $("#body").load("contato.html");
          });
        });
      //-->
    </script>
  </head>
  <body>
    <div class="container">
      <div class="row-fluid">
        <div id="header" class="span12">
          <div class="span2"><img src="img/logo_small.png" /></div>
          <div class="span10">
            <div id="carousel" class="carousel slide">
              <div class="carousel-inner">
                <div class="active item">
                  <img src="img/carrousel1.jpg" alt="" />
                  <div class="carousel-caption">
                  <p>Torres: A Mais Bela Praia Ga&uacute;cha</p>
                </div>
              </div>
              <div class="item">
                <img src="img/carrousel2.jpg" alt="" />
                <div class="carousel-caption">
                  <p>Mostardas: uma carrada de passarinhos</p>
                </div>
              </div>
              <div class="item">
                <img src="img/carrousel3.jpg" alt="" />
                <div class="carousel-caption">
                  <p>Tr&ecirc;s Cachoeiras: t&atilde;o sem gra&ccedil; que a &uacute;nica atracao eh uma arvore</p>
                </div>
              </div>
            </div>
            <!-- Carousel nav -->
            <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
            <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
          </div>
        </div>
        <div id="main" class="row-fluid">
          <div class="span12"><img src="img/header_orange.png" /></div>
        </div>
      </div>
      <div id="main" class="row-fluid">
        <div id="menu" class="span2">
          <div id="header_menu"><img src="img/top_menu.png" alt=""></div>
          <div id="options_menu">
            <ul class="unstyled">
              <li><label id="home">Home</label></li>
              <li><img src="img/line.png"></li>
              <li><label id="drop">Sindicato</label></li>
              <img src="img/line.png">
              <div id="about">
                <ul class="unstyled">
                  <li><label id="historia">Hist&oacute;ria</label></li>
                  <img src="img/line.png">
                  <li><label id="diretoria">Diretoria</label></li>
                  <img src="img/line.png">
                </ul>
              </div>
              <li><label id="base">Base territorial</label></li>
              <li><img src="img/line.png"></li>
              <li><label id="associe">Associe-se</label></li>
              <li><img src="img/line.png"></li>
              <li><label id="documentos">Documentos</label></li>
              <li><img src="img/line.png"></li>
              <li><label id="contato">Contato</label></li>
            </ul>
          </div>
          <div id="bottom_menu"><img src="img/top_menu.png" alt=""></div>
        </div>
        <div id="body" class="span10"></div>
      </div>
      <div id="footer">
        <strong>Sindicato de Hot&eacute;is, Bares, Restaurantes e Similares do Litoral Norte - RS</strong></br>
        <span>Rua Fernandes Bastos, 100 - sala 16 :: Tramanda&iacute;/RS :: CEP: 95590-000 :: 
            Fone: (51) 8116.9669 :: E-mail: <a href="mailto:#">contato@sindlitoralnorters.com.br</a></span></br>
      </div>
    </div>
  </div>
</body>
</html> 
```

问题是，不仅轮播不起作用，之后的所有代码`$('.carousel).carousel()`都被禁用。我想这可能是一个 jQuery 问题，但我没有发现任何错误 - .js 文件是正确的，它们的位置是正确的。如果我注释掉该 jQuery 行，代码将再次起作用。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:00:27.313

需要在Bootstrap**之前包含 jQuery... 更改**

```
<script type="text/javascript" src="assets/bootstrap/js/bootstrap.js"></script>
<script type="text/javascript" src="assets/js/jquery.js"></script> 
```

到

```
<script type="text/javascript" src="assets/js/jquery.js"></script>
<script type="text/javascript" src="assets/bootstrap/js/bootstrap.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:00:29.670

您需要在加载其他 .js 文件之前加载 jQuery。

# php - php：从联系人发送邮件不断抛出错误

> ID：14816947
> 
> 赞同：0
> 
> 时间：2013-02-11T16:57:56.533
> 
> 标签：php

我正在尝试使用以下代码通过我的网站处理客户联系。它不工作并且错误被捕获。我收到消息“抱歉，出现意外错误。请稍后再试”。

html 表单和 php 处理程序包括在下面。两者都在单独的页面中，分别是contact.php 和contact_handle.php。

形式：

```
 <div id="contact-form">
                <form method="post" action="contact_handle.php">

                    <div class="field">
                        <label>Name:</label>
                        <input type="text" name="name" class="text" />
                    </div>

                    <div class="field">
                        <label>Email: <span>*</span></label>
                        <input type="text" name="email" class="text" />
                    </div>

                    <div class="field">
                        <label>Subject: <span>*</span></label>
                        <input type="text" name="subject" class="text" />
                    </div>

                    <div class="field">
                        <label>Mobile No: <span>*</span></label>
                        <input type="text" name="mobile" class="text" />
                    </div>

                    <div class="field">
                        <label>Message: <span>*</span></label>
                        <textarea name="message" class="text textarea" ></textarea>
                    </div>

                    <div class="field">
                        <input type="button" id="send" value="Send Message"/>
                        <div class="loading"></div>
                    </div>

                </form>
</div 
```

现在处理程序是：

```
<?php

//Retrieve form data. 
//GET - user submitted data using AJAX
//POST - in case user does not support javascript, we'll use POST instead
$name = ($_GET['name']) ? $_GET['name'] : $_POST['name'];
$email = ($_GET['email']) ?$_GET['email'] : $_POST['email'];
$subject = ($_GET['subject']) ?$_GET['subject'] : $_POST['subject'];
$mobile = ($_GET['mobile']) ?$_GET['mobile'] : $_POST['mobile'];
$message = ($_GET['message']) ?$_GET['message'] : $_POST['message'];

//flag to indicate which method it uses. If POST set it to 1
if ($_POST) $post=1;

//Simple server side validation for POST data, of course, you should validate the email
if (!$name) $errors[count($errors)] = 'Please enter your name.';
if (!$email) $errors[count($errors)] = 'Please enter your email.'; 
if (!$subject) $errors[count($errors)] = 'Please enter your subject.';
if (!$mobile) $errors[count($errors)] = 'Please enter your mobile No.';
if (!$message) $errors[count($errors)] = 'Please enter your message.'; 

//If the errors array is empty, send the mail
if (!$errors) {

    // ====== Your mail here  ====== //
    $to = 'fsa@gmail.com';

    // Sender
    $from = $name . ' <' . $email . '>';

    //subject and the html message
    $subject = 'Message from www.iso.com contact form'; 
    $message = '
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head></head>
    <body>
    <table>
        <tr><td>Name:</td><td>' . $name . '</td></tr>
        <tr><td>Email:</td><td>' . $email . '</td></tr>
        <tr><td>Subject:</td><td>' . $subject . '</td></tr>
        <tr><td>Mobile No.:</td><td>' . $mobile . '</td></tr>
        <tr><td>Message:</td><td>' . nl2br($message) . '</td></tr>
    </table>
    </body>
    </html>';

    // Send the mail
    $result = sendmail($to, $subject, $message, $from);

    //if POST was used, display the message straight away
    if ($_POST) {
        if ($result) echo 'Thank you! We have received your message.';
        else echo 'Sorry, unexpected error. Please try again later';

    //else if GET was used, return the boolean value so that 
    //ajax script can react accordingly
    //1 means success, 0 means failed
    } else {
        echo $result;   
    }

// If the errors array has values
} else {}

// Simple mail function with HTML header
function sendmail($to, $subject, $message, $from) {
    $headers = "MIME-Version: 1.0" . "\r\n";
    $headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
    $headers .= 'From: ' . $from . "\r\n";

    $result = mail($to,$subject,$message,$headers);

    if ($result) return 1;
    else return 0;
}

?> 
```

我希望你能帮助发现我错过的错误。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:04:59.307

该`mail()`功能仅与安装在服务器上的邮件传输一样可靠。在这种情况下，您应该检查服务器的邮件日志以获取有关邮件未被接受的原因的信息。

此外，如果您不确定信息是否会通过，`$_GET`或者`$_POST`您可以简单地使用`$_REQUEST`两者的混搭，再加上`$_COOKIE`记忆对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:06:01.593

检查服务器的 PHP 错误日志（具体位置取决于您的服务器设置）。它将为您提供更多信息。

也就是说，根据您在这里的信息，我敢猜测您的呼叫`sendmail()`失败了。最可能的原因是您的服务器上未安装 PHP 使用的邮件发送器。

您需要确保设置了邮件发送程序，或者将 SMTP 与另一个邮件客户端（例如 gmail 帐户）一起使用来进行发送。

# vb.net - Odbc 错误 指定的 DSN 包含架构不匹配？

> ID：14816948
> 
> 赞同：0
> 
> 时间：2013-02-11T16:58:02.350
> 
> 标签：vb.net, odbc, database-connection

我安装了 64 位 Progress OpenEdge 10.2A 驱动程序。当我在数据源 (ODBC) 管理员中设置连接并对其进行测试时，连接工作正常。

当我尝试使用 VB.NET (System.Data.Odbc) 连接到它时，出现错误：

> 错误 [IM014][Microsoft][ODBC Driver Manager] 指定的 DSN 包含驱动程序和应用程序之间的体系结构不匹配。

我尝试手动配置注册表项以允许使用 SysWOW6432 进行访问。但是，当我尝试设置 DSN 时，这一切都会导致另一个错误。我从进度中收到错误 #193。

还有什么可能导致这个问题？据我所知，我有正确的驱动程序，并且我使用 VB.NET 脚本的应用程序也配置正确。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T17:11:38.973

我在 System.Data.Odbc 尝试连​​接到 64 位机器上的 32 位 DSN 时遇到了同样类型的问题（虽然是 C#，而不是 VB）。我将目标平台设置为 x86 并重新编译项目并解决了问题。看来，如果您不指定构建，它将自动尝试连接到默认值 - 64 位机器上的 64 位 DSN，32 位机器上的 32 位 DSN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:59:39.210

我正在使用不同的驱动程序调查类似的问题，并遇到了这篇文章：[http](http://www.easysoft.com/support/kb/kb01028.html) ://www.easysoft.com/support/kb/kb01028.html 不确定它是否能给您进一步的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-18T09:15:57.800

转到项目属性
**编译：**

*   配置更改为所有配置*   取消选中首选 32 位

## 重建并完成！！

# java - Java中的东西（类似于）参数

> ID：14816957
> 
> 赞同：-3
> 
> 时间：2013-02-11T16:58:27.250
> 
> 标签：java, parameters

在 Windows 中，您可以使用某些参数启动 .exe 文件来执行某些任务，例如：

```
shutdown.exe -s 
```

在 Java 中是否有类似的东西，我知道我可以使用 Scanner 功能进行终端输入，但是如果我想在终端不可见/不启动应用程序但仍然能够告诉应用程序一些东西怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:07:05.947

看看这个程序：

```
public class Example {
    public static void main(String[] args) {
        for (int i = 0; i < args.length; i++) {
            System.out.println(args[i]);
        }
    }
} 
```

并这样称呼它：

```
java Example foo bar baz 
```

输出将是

```
foo
bar
baz 
```

您还可以在 Eclipse 下设置传递给程序的命令行参数`Run`> `Run Configurations`>`Arguments`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:04:47.697

我建议使用[args4j](http://weblogs.java.net/blog/kohsuke/archive/2005/05/parsing_command.html)。

所有 Java 程序都允许通过 main 方法进行命令行输入：

```
public void main(String[] args) 
```

但是 args4j 允许您轻松地创建一个类并解析标志`something.exe -f flag1`：

```
public class MyOptions {

    @Option(name="-r",usage="recursively run something")
    private boolean recursive;

    @Option(name="-o",usage="output to this file")
    private File out;

    @Option(name="-str")        // no usage
    private String str = "(default value)";

    @Option(name="-n",usage="usage can have new lines in it\n and also it can be long")
    private int num;

    // receives other command line parameters than options
    @Argument
    private List arguments = new ArrayList();
} 
```

你只需要从你的 main 方法中调用这个类：

```
public void main(String[] args) throws IOException {
    MyOptions bean = new MyOptions()
    CmdLineParser parser = new CmdLineParser(bean);
    parser.parseArgument(args);
    // ...
} 
```

# routing - 为什么我的 Laravel+OneAuth Twitter 登录失败？

> ID：14816959
> 
> 赞同：1
> 
> 时间：2013-02-11T16:58:28.283
> 
> 标签：routing, twitter-oauth, laravel

我正在用 Laravel 和 Oneauth 捆绑包来通过 twitter 登录。

我一直在关注 Michael Calkin 的教程：http: [//youtu.be/xlUFiZhwFiE](http://youtu.be/xlUFiZhwFiE)

*   我已经通过工匠安装了 OneAuth
*   运行迁移
*   创建了我的推特应用
*   创建了一个带有 id、social_uid、social_provider、username、email 的 User 表
*   创建了一个控制器 connect.php：`class Connect_Controller extends OneAuth\Auth\Controller {}`
*   路由到连接：`Route::controller( 'connect' );`
*   复制了视频中的功能（如下），这对我来说有点意义
*   清除了我的浏览器缓存

所以，在测试中：

*   我访问了链接`mysite.dev/connect/session/twitter`
*   单击按钮导致 twitter 请求身份验证（创建了一个新帐户进行测试）
*   授权推特
*   被退回`users/social_register`
*   一个新用户被添加到表中`oneauth_client`
*   下面的代码片段应该只显示返回的用户数据，但实际发生的是，虽然 URL 读取 /users/social_register，但视图 users.index 被显示！

控制器：users.php

```
...
public function get_social_register()
{
    $user_data = Session::get( 'oneauth' );

    dd( $user_data );
} 
```

（完整代码在这里：[https](https://gist.github.com/ptim/a29bb86b3fb7455c19ba) ://gist.github.com/ptim/a29bb86b3fb7455c19ba ）

啊，还有我的路线：

```
Route::controller( 'connect' );
Route::get('users/(:any)', 'users@index' );
Route::controller(Controller::detect()); 
```

那里有一些冗余......不确定这是否重要

任何建议表示赞赏！德克萨斯州，蒂姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:32:45.600

您正在将 users/(:all) 查询重定向到用户控制器的索引功能：

```
Route::get('users/(:any)', 'users@index' ); 
```

试试这个而不是 up：

```
Route::any('users/(:any?)', array('uses' => 'users@(:1)', 'defaults'=>'index')); 
```

# android - Android - 在国际字符上使用 LIKE 和 UPPER 进行 Sqlite 搜索

> ID：14816960
> 
> 赞同：3
> 
> 时间：2013-02-11T16:58:30.837
> 
> 标签：android, sqlite, android-contacts, android-cursor

我目前正在尝试在联系人数据库上运行搜索，并且我传入的值与联系人中的显示名称匹配，我想返回一个带有匹配联系人数量的光标。

目前，除了国际字符外，这工作正常，这是我的代码当前的外观，约束是从 EditText 获取的 CharSequence：

```
String[] PROJECTION = new String[] {
                ContactsContract.Contacts._ID,
                ContactsContract.Contacts.DISPLAY_NAME,
                ContactsContract.Contacts.HAS_PHONE_NUMBER,
        };

String sortOrder = ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";

public Cursor runQuery(CharSequence constraint) {

        String SELECTION = "UPPER(" + ContactsContract.Contacts.DISPLAY_NAME + ")" 
            + " LIKE UPPER('%" + constraint+ "%') " + "and " + ContactsContract.Contacts.DISPLAY_NAME + " IS NOT NULL"
         + " AND " + ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '1'";
            Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, 
                    PROJECTION, SELECTION, null, sortOrder);

    return cur; 
} 
```

正如我所说，这很好用，因为我希望搜索不区分大小写，因此用户不必输入确切的名称，使用正常的英文名称可以正常工作，但是一旦引入国际字符，搜索就会区分大小写。

我做了一些研究，表明 sqlite 需要一个 ICU 插件才能完成 Android 中缺少的这项工作。或者在插入数据库时​​使用排序规则。但是，由于我只从联系人内容提供者那里阅读，这对我来说不是一个选择。

有谁知道在不区分大小写的情况下在上面的代码中进行搜索以使用国际字符的方法？

# php - 使函数变量可用于其他 php 文件

> ID：14816964
> 
> 赞同：1
> 
> 时间：2013-02-11T16:58:43.443
> 
> 标签：php

我有一个 paging.php 文件，它有一个函数`latest($imagesPerPage, $site) {`.

在该函数内部，我有一个变量 $lastPage：

```
$catResult->data_seek(0); 
$totalComics = 0;
while ($row = $catResult->fetch_assoc()) {
    $totalComics++;
}

global $lastPage;
$lastPage = ceil($totalComics/$imagesPerPage); 
```

我有另一个文件 homepage.php，它需要使用`$lastPage`上面定义的 paging.php 文件的“latest()”函数。

* * *

在 homepage.php 的顶部，我包含了页面文件：`include 'scripts/paging.php';`

然后我打电话`<?php echo latest(15, $site); ?>`显示一些图像......

下面，我要处理页码和导航，需要使用 $lastPage 变量：

```
 for($i = 1; $i <= $lastPage; $i++) {
        echo '<li><span class=navItems><a href="?site=' . $site . '&cat=' . $cat . '&page=' . $i .'">' . $i . '</a></span></li>';
    } 
```

homepage.php 一直抱怨 $lastPage 未定义...我试过了`global $lastPage`，`$GLOBALS[$lastPage]`...但它仍然不可用。

* * *

我的问题是：

1.  我怎样才能使`$lastPage`函数之外的 homepage.php 文件可用？

2.  如何使`$lastPage`paging.php 中的其他功能可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:59:50.293

您需要做的就是包含包含该函数的文件。

如果该文件包含您不想包含在其他文件中的其他代码，则制作一个函数文件；专用于住房功能的文件，您可以将其包含在其他页面中。

看看[PHP 的 include 函数](http://www.php.net/manual/en/function.include.php)。

**例如，如果您的函数位于名为的文件中`functions.inc.php`：**

```
include("functions.inc.php");

// Here you can use the function 
```

**关于`$lastPage`无法访问的变量，请尝试以下操作：**

```
// Inside imageDisplay.php -- OUTSIDE OF THE FUNCTION ---
$lastPage = "Whatever it's value needs to be"; // If we declare it outside the function we can use it on any page which includes this file

function paging() {
    global $lastPage; // This now means you can use the $lastPage variable inside the function
    ...
} 
```

希望这有助于解释如何`$lastPage`在函数外部、包含的页面以及函数内部使用变量。

# c++ - C++ 从 8 位位图构建像素数据并访问 bmiColor 表信息

> ID：14816968
> 
> 赞同：1
> 
> 时间：2013-02-11T16:59:06.637
> 
> 标签：c++, windows, bitmap, opensuse

我是一个 n00b，过去几天一直在研究这个问题，我只是被卡住了。我在 OpenSuse Linux 中工作，试图解释 Windows 位图图像以使用 Cairo 图形库进行显示。简单地说，我只需要将每个像素的颜色信息放入一个数组中并将其提供给 Cairo，例如 pixeldata[i] = someColor，用于图像中的所有像素。到目前为止，我已经弄清楚了如何解析位图标头，并让它非常适合显示 24 位位图。

但是，现在我正在努力让 8 位位图也显示出来，这只是一个笨拙、不直观的野兽。我能够显示图像，但显示的颜色是错误的......不仅如此，每次运行程序时它们都会改变！:PI 认为我正在错误地访问和解释 bmiColors 调色板数组。这是我从构建像素数组的冗长 Internet 研究中拼凑的相关代码（注意，在代码中的这一点上，标头信息已经被解析并且在对象 m_bmpInfoHeader 和 m_bmpHeader 中可用）：

```
#define RGB(r, g, b) ((long)(((char)(r) | ((char)((short)(g)) << 8)) | (((char)(b)) << 16 )))

#pragma pack (2)
typedef struct tagRGBQUAD {
  long rgbBlue;
  long rgbGreen;
  long rgbRed;
  int rgbReserved;
} RGBQUAD;

typedef struct
{
  char verifier[2];
  unsigned int size;
  unsigned short int reserved1, reserved2;
  unsigned int offset;
} BITMAPHEADER;

typedef struct
{
  unsigned int size;               /* Header size in bytes      */
  signed int width, height;        /* Width and height of image */
  unsigned short int planes;       /* Number of colour planes   */
  unsigned short int bits;         /* Bits per pixel            */
  unsigned int compression;        /* Compression type          */
  unsigned int imagesize;          /* Image size in bytes       */
  int xresolution,yresolution;     /* Pixels per meter    */
  unsigned int ncolors;            /* Number of colors         */
  unsigned int importantcolors;    /* Important colors   */
  RGBQUAD bmiColors [1];
} BITMAPINFOHEADER; 
#pragma pack()

// Function sets up and returns color index for bitmap.
long BitmapDef::GetColorInx (int numbits, char* data, long offset)
{
  long inx;

  switch (numbits)
  {
    case 1:
      inx = data[offset >> 3];
      offset &= 7;
      inx >>= offset;
      inx &= 0x01;
      break;
    case 2:
      inx = data[offset >> 2];
      offset &= 3;
      offset <<= 1;
      inx >>= offset;
      inx &= 0x03;
      break;
    case 4:
      inx = data[offset >> 1];
      if (!(offset & 1))
      {
        inx >>= 4;
      }
      inx &= 0x0f;
      break;
    case 24:
    {
      offset *= 3;
      inx = *((long*) &data[offset]);
      char r = GetBValue(inx);
      char g = GetGValue(inx);
      char b = GetRValue(inx);
      inx = ((r << 16) + (g << 8) + b);
      break;
    }
    case 8:
    default:
      inx = data[offset] & 0xff;
      break;
  }
  return inx;
}

void BitmapDef::Build8BitPixelData()
{
  m_PixelData = new unsigned int[m_bmpInfoHeader.width * m_bmpInfoHeader.height];

  FILE * pFile;
  long lSize;
  char * buffer;
  size_t result;

  pFile = fopen ((const char *)m_Filename, "rb" );
  if (pFile==NULL)
  {
    fputs ("File error", stderr);
    exit (1);
  }

  // obtain file size:
  fseek (pFile , 0 , SEEK_END);
  lSize = ftell (pFile);
  rewind (pFile);

  // allocate memory to contain the whole file:
  buffer = (char*) malloc (sizeof(char) * lSize);
  if (buffer == NULL) {fputs ("Memory error", stderr); exit (2);}

  // copy the file into the buffer:
  result = fread (buffer, 1, lSize, pFile);
  if (result != lSize) {fputs ("Reading error",stderr); exit (3);}

  BITMAPHEADER* bmfh = (BITMAPHEADER*) (&(buffer[0]));

  char* bmp = (char*) &buffer[m_bmpHeader.offset];

  BITMAPINFOHEADER * bmi = (BITMAPINFOHEADER*) &buffer[sizeof(*bmfh)];
  std::cout<<"\nsize: "<<bmi->size<<std::endl;
  std::cout<<"width: "<<bmi->width<<std::endl;
  std::cout<<"height: "<<bmi->height<<std::endl;
  std::cout<<"planes: "<<bmi->planes<<std::endl;
  std::cout<<"bits: "<<bmi->bits<<std::endl;
  std::cout<<"annnd compression: "<<bmi->planes<<std::endl;

  int ix, iy;

  int position = 0;

  for (iy = 0; iy < bmi->height; ++iy)
  {
    for (ix = 0; ix < bmi->width; ++ix)
    {
      int offset = (m_bmpInfoHeader.height - 1 - iy) * m_bmpInfoHeader.width;
      offset += ix;
      //std::cout<<"offset: "<<offset<<" bmp[offset]: "<<bmp[offset] << " " ;

      long inx = GetColorInx (m_bmpInfoHeader.bits, dataBuf, offset);
      //std::cout<<inx<<" ";

      m_PixelData[position] = RGB(bmi->bmiColors[inx].rgbRed, bmi->bmiColors[inx].rgbGreen, bmi->bmiColors[inx].rgbBlue);

      position++;
    }
  }

  fclose (pFile);
  free (buffer);
} 
```

有任何想法吗？请注意，我在非 Windows 环境中工作，因此我必须翻译许多以 Windows 为中心的函数才能在 C++ 中工作。任何帮助表示赞赏，谢谢！

**更新：**

感谢 cbranch 的建议，我将 RGBQUAD 修改为具有 char 属性而不是 long/int，以便它保持 4 字节结构。这解决了颜色不断变化的问题。然而，奇怪的是颜色仍然没有。目前，我正在尝试在黑色背景上显示绿色钻石的简单图像，但由于某种原因，钻石显示为黄色。有任何想法吗？

另外，我刚刚注意到我不小心将“#pragma pack()”指令从原始帖子中的结构周围遗漏了，现在刚刚将它们添加到帖子中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:38:50.873

RGBQuad 应该是四个字节。

这个宏：

```
#define RGB(r, g, b) ((long)(((char)(r) | ((char)((short)(g)) << 8)) | (((char)(b)) << 16 ))) 
```

是有问题的。你可能会得到符号扩展。一个完整的绿色像素将具有 g == 0xFF。您将其转换为 (signed) short，因此您可能会得到符号扩展 (0xFFFF)，然后移位。现在您已将红色和绿色设置为完整值，因此它看起来是黄色的。

在进行按位操作时，您几乎总是希望使用无符号值。

# r - 比较两个不同数据框中的列

> ID：14816969
> 
> 赞同：1
> 
> 时间：2013-02-11T16:59:06.747
> 
> 标签：r

所以我有两个数据框，我想将第一个数据框中的一列与另一个数据框中的第二列匹配。

```
df = data.frame(source=c("XRHxl8gq","2b790Qqv","mrgapJpQ","EsMfIbv1","ujOBob24","ujOBob24","EsMfIbv1"),
                conv=c(362,247,222,160,86,65,34), all=c(19,17,26,12,22,25,11), intent=c(47,47,74,31,58,60,0))

df2 = data.frame(name=c("Bob","David","Mark","Sara","Alice","Cara","Chad","Donna","Elaine","Gary"),
                 source_id=c("XRHxl8gq","sr354136FH","2b790Qqv","myx645TH","mrgapJpQ","EsMfI546",
                             "ujOBob24","EsMfIbv1","fMHL45ts","sefihn")) 
```

我想要结束的是将源与 source_id 匹配，以便我可以在 df 中插入一个带有名称的新列。

```
> df
    source conv all intent   who
1 XRHxl8gq  362  19     47   Bob
2 2b790Qqv  247  17     47  Mark
3 mrgapJpQ  222  26     74 Alice
4 EsMfIbv1  160  12     31  Cara
5 ujOBob24   86  22     58  Chad
6 ujOBob24   65  25     60  Chad
7 EsMfIbv1   34  11      0  Cara

# find what values in both columns are similar.
both = intersect(df[,1], df2[,2]) # IN BOTH COLUMNS

# create a new column in the original data frame.
df$who = c("")

# match up source with source_id.
str(df2)
df2$name = as.character(df2$name)
df$who[df$source %in% df2$source_id] <- df2$name
df

df$who[which(df$source %in% df2$source_id)]<-as.character(df2$name)
df 
```

不幸的是，我似乎无法匹配列，以便每个源都与与每个 source_id 关联的名称匹配。

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T17:00:30.797

您正在寻找`merge`：

```
merge(df,df2, by.x="source", by.y="source_id", sort=F)

#     source conv all intent  name
# 1 XRHxl8gq  362  19     47   Bob
# 2 2b790Qqv  247  17     47  Mark
# 3 mrgapJpQ  222  26     74 Alice
# 4 EsMfIbv1  160  12     31 Donna
# 5 EsMfIbv1   34  11      0 Donna
# 6 ujOBob24   86  22     58  Chad
# 7 ujOBob24   65  25     60  Chad 
```

# c# - 调用一个引用指针的非托管库函数

> ID：14816970
> 
> 赞同：6
> 
> 时间：2013-02-11T16:59:08.653
> 
> 标签：c#, c++, pinvoke, marshalling, dllimport

假设我们有一个具有以下原型的 C++ 函数：

```
int myFunction(int someNumber, int &arraySize, signed char *&array)
// Extra function to free allocated memory:
int freePointer(void* myPointer) 
```

此函数需要一些数字，并根据该数字创建一个数组。所以我们传递一个数字并得到一个数组。在 C# 中调用它的最佳方法是什么？

**我的第一种方法：**

```
[DllImport(...)]
internal static int myFunction(int someNumber, out int arraySize, [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 1)] out byte[] array)

// ...

byte[] myArray;
int discard;
int myNumber = 100;

myFunction(myNumber, discard, myArray); 
```

但问题是，我需要释放非托管库分配的内存，不知道如何传递 to 的`myArray`地址`freePointer()`。而且，我不知道 的地址`myArray`是否等于非托管库创建的数组的地址。

然后**我的第二种方法**是：

```
[DllImport(...)]
internal static int myFunction(int someNumber, out int arraySize, out IntPtr array)

// ...

byte[] myArray;
int myArraySize
IntPtr pointerToArray;
int myNumber = 100;

myFunction(myNumber, myArraySize, pointerToArray);

Marshal.Copy(pointerToArray, myArray, 0, myArraySize);
FreePointerHandler(pointerToArray.ToPointer()); 
```

但同样，我不确定通过`IntPtr`使用方法发送地址是否正确`.ToPointer()`。

我不想介绍内存泄漏，你会建议做什么？（不使用不安全的代码。）

**编辑：**我应该使用`ref`而不是`out`，因为参数是对指针的引用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T17:44:32.700

你的第二种方法对我来说似乎是正确的。你在哪里：

```
FreePointerHandler(pointerToArray.ToPointer()); 
```

我认为你可以：

```
FreePointerHandler(pointerToArray); 
```

我正在写一个测试并将发布一个编辑。

### `ref`对比`out`

至于`ref`vs. `out`，这并不完全映射到 C++ 参考。C#调用C#时，`out`需要被调用的函数设置一个参数。对于互操作调用，这不能被强制执行，对于文档价值，我更喜欢`out`在这种情况下。

### 真正的问题

真正的问题是，如果您没有使用 .Net pinvoke 的经验，那么在调用没有任何直接可见副作用的函数时很难有信心。

@Hans Passant 建议“通过调用它一百万次来测试它”，以使任何内存泄漏变得明显。虽然这种方法在这种情况下可能是最简单的，但它并不能推广到没有关联的内存资源并且如果它失败它不会提供任何额外信息的情况。如果我有 .dll 的源代码，我更喜欢通过 pinvoke 调用进行调试，如果没有，我更喜欢编写模拟 API 实现。这样，当您尝试新的 pinvoke 功能时，您可以准确地看到正在发生的事情。如果出现问题，调试器中的跟踪可以帮助您查看哪里出错了。

### 一个完整的 pinvoke 示例

这是基于原始问题的完整示例。没有记录返回值，也没有记录 myFunction 的详细信息。该示例仅使用 (0, 1, 2) 填充长度为 3 的已分配数组。

这是DLL的头文件：

```
// testlib.h

#ifdef TESTLIB_EXPORTS
#define TESTLIB_API __declspec(dllexport)
#else
#define TESTLIB_API __declspec(dllimport)
#endif

extern "C" {
    TESTLIB_API int myFunction(int someNumber, int &arraySize, signed char *&array);
    TESTLIB_API int freePointer(void* myPointer);
} 
```

.DLL 的 .cpp 源文件：

```
// testlib.cpp : Defines the exported functions for the DLL application.
//

#include "stdafx.h"
#include "testlib.h"
#include <iostream>

using namespace std;

TESTLIB_API int myFunction(int someNumber, int &arraySize, signed char *&array)
{
    #ifdef _DEBUG
        cout << "myFunction enter " << someNumber << ", " << arraySize << ", 0x"  << &array << endl;
    #endif
    arraySize = 3;

    array = (signed char*)malloc(arraySize);

    #ifdef _DEBUG
        cout << "myFunction array: 0x" << (void *)array << endl;
    #endif

    for (int i = 0; i < arraySize; ++i)
    {
        array[i] = i;
    }

    #ifdef _DEBUG
        cout << "myFunction exit " << someNumber << ", " << arraySize << ", 0x"  << &array << endl;
    #endif

    return 0;
}

TESTLIB_API int freePointer(void* myPointer)
{
    #ifdef _DEBUG
        cout << "freePointer: 0x" << myPointer << endl;
    #endif

    free(myPointer);
    return 0;
} 
```

C# 源代码：

```
using System;
using System.Runtime.InteropServices;

namespace InteropTest
{
    class InteropTest
    {
        [DllImport("testlib.dll")]
        private static extern int myFunction(int someNumber, out int arraySize, out IntPtr array);

        [DllImport("testlib.dll")]
        public static extern int freePointer(IntPtr pointer);

        public static byte[] myFunction(int myNumber)
        {
            int myArraySize;
            IntPtr pointerToArray;
            int iRet = myFunction(myNumber, out myArraySize, out pointerToArray);
            // should check iRet and if needed throw exception

            #if (DEBUG)
                Console.WriteLine();
                Console.WriteLine("InteropTest.myFunction myArraySize: {0}", myArraySize);
                Console.WriteLine();
            #endif

            byte[] myArray = new byte[myArraySize];
            Marshal.Copy(pointerToArray, myArray, 0, myArraySize);
            freePointer(pointerToArray);

            #if (DEBUG)
               Console.WriteLine();
            #endif

            return myArray;
        }

        static void Main(string[] args)
        {
            #if (DEBUG)
                Console.WriteLine("Start InteropTest");
                Console.WriteLine();
            #endif
            int myNumber = 123;

            byte[] myArray = myFunction(myNumber);

            for (int i = 0; i < myArray.Length; ++i)
            {
                Console.WriteLine("InteropTest myArray[{0}] = {1}", i, myArray[i]);
            }
        }
    }
} 
```

调试版本打印状态消息。它们显示`myFunction`的`array`价值是传递给`freePointer`.

我还为`myFunction`. 当 pinvoke 调用很重要时，您通常希望一次性计算出细节并将其封装到一个函数中以供重用。

# java - Jboss 6.x 是否支持 TLS1.2？

> ID：14816971
> 
> 赞同：1
> 
> 时间：2013-02-11T16:59:14.733
> 
> 标签：java, jboss, security, jboss6.x

Jboss 6.x 是否支持 TLS1.2（传输层安全）？

如果是这样，在哪里配置以及如何配置。我从 Jboss 那里得到了一些信息，但没有具体信息是否支持 TLS1.2

[http://docs.jboss.org/jbosssecurity/docs/6.0/security_guide/html_single/index.html](http://docs.jboss.org/jbosssecurity/docs/6.0/security_guide/html_single/index.html)

因为映射是这样的。

```
<!-- SSL/TLS Connector with encrypted keystore password configuration  -->
<Connector protocol="HTTP/1.1" SSLEnabled="true"
port="8443" address="${jboss.bind.address}"
scheme="https" secure="true" clientAuth="false"
SSLPassword="KAaxoMQCJH30GZWb96Mov"
securityDomain="encrypt-keystore-password"
SSLCertificateFile="server.crt"
SSLCertificateKeyFile="server.pem" SSLProtocol="**TLSv1**" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:12:59.803

JBoss 6.x 使用的 JBoss web 是 Tomcat 的一个分支，所以根据这个[tomcat 答案](https://stackoverflow.com/questions/9749339/does-tomcat-supports-tls-v1-2)，如果你升级到 Java 7，你应该可以使用 1.2。

去测试

*   在服务器上使用 Java 7（这可以在 JBoss 启动参数中看到）
*   在 server.xml 中将 SSLProtocol 参数更改为 TLSv1.2
*   使用浏览器浏览您的服务器，并检查 SSL 连接详细信息 - 它应该显示 TLS 1.2

（未来的读者请注意，Wildfly 不再基于 Tomcat fork，而是基于 Undertow。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-08T14:55:04.050

在 Jboss 版本上无关紧要。重要的是您使用的是哪个 JDK 版本。

如果您使用的是 JDK 7，那么它支持。如果您使用的是 JDK 6，则使用支持 TLS1.2 的 110 以上的次要版本。

以下是需要做的事情。

*   如果需要，升级 JDK 版本。
*   在 server.xml 中将 SSLProtocol 参数更改为 TLSv1.2
*   在文件 /apps_01/webapps/JBoss/conf/XXXXXXXX_server0/security/java.security 中添加以下行

jdk.tls.disabledAlgorithms=SSLv2Hello, SSLv3, TLSv1, TLSv1.1

验证。如果返回密码，则运行以下每个命令，然后启用协议。如果它返回 0000 密码，则它被禁用。

```
openssl s_client -connect <IP>:<port>
SSL-Session:
    Protocol  : TLSv1.2
    Cipher    : AES128-SHA
openssl s_client -connect <IP>:<port> -tls1_2
SSL-Session:
    Protocol  : TLSv1.2
    Cipher    : AES128-SHA
openssl s_client -connect <IP>:<port> -ssl3
SSL-Session:
    Protocol  : SSLv3
    Cipher    : 0000
openssl s_client -connect <IP>:<port> -tls1
SSL-Session:
    Protocol  : TLSv1
    Cipher    : 0000
openssl s_client -connect <IP>:<port> -tls1_1
SSL-Session:
    Protocol  : TLSv1.1
    Cipher    : 0000 
```

# c# - 使用 Google Drive API 更新转换后的文档

> ID：14816974
> 
> 赞同：0
> 
> 时间：2013-02-11T16:59:22.730
> 
> 标签：c#, google-drive-api

我正在使用 Google Drive API (C#) 创建和更新文档。它们在本地作为打开文档 (.odt) 进行编辑。当我使用转换创建文档时，一切正常。当我尝试更新现有文档时，出现了问题，最终在服务器上出现了乱码。事实上，in 看起来很像原始 odt 文件的文本渲染。有没有人经历过这种情况，他们可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:10:22.660

请确保您传递`convert=true`给更新方法。

[https://developers.google.com/drive/v2/reference/files/update](https://developers.google.com/drive/v2/reference/files/update)

# paymill - Paymill：如何检索客户的最后 10 笔交易？

> ID：14816977
> 
> 赞同：1
> 
> 时间：2013-02-11T16:59:35.783
> 
> 标签：paymill

Paymill：假设我有一个有多个订阅的客户，我如何为客户返回最近的 10 笔交易？

我知道下面会给我属于我客户的交易，但我想以相反的日期顺序返回最后 10 笔交易。

`curl https://api.paymill.de/v2/transactions?client=client_1b6b8b4003603f1f3cbd -u my_private_paymill_key:`*

这似乎**不起作用**，但我希望它：

`curl https://api.paymill.de/v2/transactions?client=client_1b6b8b4003603f1f3cbd&order=created_at_desc&count=10 -u my_private_paymill_key:`

* * *

**我认为`client`参数是无证的；我是从[另一个问题](https://stackoverflow.com/questions/14322840/paymill-how-do-i-view-transactions-for-a-subscription)中了解到的。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:09:44.017

不幸的是，目前无法检索订阅的最后交易。我们将把它作为一个功能请求，以便您可以按交易描述（包含订阅 ID）过滤交易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T23:28:27.507

`curl "https://api.paymill.de/v2/transactions?client=client_1b6b8b4003603f1f3cbd&order=created_at_desc&count=10" -u my_private_paymill_key:`

（需要在 URL 周围加上额外的引号！）

# ruby-on-rails - 如果 Rails 4.0 中没有父模型，如何处理基于键的集合过期？

> ID：14816992
> 
> 赞同：2
> 
> 时间：2013-02-11T17:00:11.820
> 
> 标签：ruby-on-rails, fragment-caching, ruby-on-rails-4

由于动作和页面缓存以及清扫器将从 Rails 4.0 中删除，我开始`cache_digests`在我的 Rails 3.2 应用程序中使用，因为我正遭受整个手动过期的噩梦。

但即使在阅读了一些教程（[如何基于键的缓存过期工作](http://37signals.com/svn/posts/3113-how-key-based-cache-expiration-works)、[缓存摘要](https://github.com/rails/cache_digests#cache-digests%29)、[#387 缓存摘要](http://railscasts.com/episodes/387-cache-digests)、...）之后，我也找不到一种好方法来处理没有可以提供时间戳的父对象的视图或类似的东西。

例如，如果`Document`并`Todolist`使用关联`touch`上的选项，这可以完美地工作。`Project`

```
# app/views/projects/show.html.erb
<% cache @project do %>
  <%= render @project.documents %>
  <%= render @project.todolists %>
<% end %> 
```

但是`index`行动呢？

```
# app/views/projects/index.html.erb
<% cache ??? do %>
  <% @projects.each do |project| %>
    ...
  <% end %>
<% end %> 
```

当然，我可以使用任意密钥`project_index`，例如在项目模型发生任何更改时使其过期，但这需要清扫者或观察者并摆脱它们，包括显式过期是基于密钥过期的主要原因之一。

**Rails 4.0**的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:37:49.330

```
# app/views/projects/index.html.erb
<% cache @projects.scoped.maximum(:updated_at) do %>
  <% @projects.each do |project| %>
    ...
  <% end %>
<% end %> 
```

更新项目时，会创建一个新的缓存页面....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T17:09:33.423

只需这样做：

```
# app/views/projects/index.html.erb
<% cache @projects do %>
  <% @projects.each do |project| %>
    ...
  <% end %>
<% end %> 
```

项目集合将创建缓存键，集合中在顺序或对象方面的任何更改都将创建不同的键。

如果您的视图显示与来自较低级别协会的项目相关的数据，它确实有一些限制，但是这是可以处理的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T21:20:43.563

我没有考虑太多，我自己也从未尝试过，但是您可以执行以下操作：

```
class TimestampAsCacheKey
  def initialize(prefix,timestamp)
    @key = prefix + timestamp.to_s
  end
  def cache_key # This is what Rails calls to get a key from object for caching
    @key
  end
end

...
# in your model:
ts = ... # somehow get the most recent timestamp of your projects, like
         # 1) either @projects.to_a.map(&:updated_at).max 
         #    or from `projects` table, like 
         #      Project.order("updated_at DESC").first.updated_at
         #      (you should further optimize the query, of course, but you get the idea)
         #    but probably not, since the whole point is to avoid hitting db
         # 2) or, better yet, from storing it in a global var, special DB table, etc
         #    (just update it there each time you save a project, 
         #    e.g. through after_save / after_commit)
@projects_last_updated_time = TimestampAsCacheKey.new("projects-timestamped-list-",ts) 
```

然后在你看来：

```
<% cache @projects_last_updated_time do %>
  <% @projects.each do |project| %>
    ...
  <% end %>
<% end %> 
```

# python - 如何在 Django 中翻译表单的标签和验证消息

> ID：14816995
> 
> 赞同：3
> 
> 时间：2013-02-11T17:00:18.100
> 
> 标签：python, django, django-forms, translation

每当我跑步时：

```
$ ./manage.py makemessages -a -l es -e .py 
```

它只包括翻译，在`locale/es/LC_MESSAGES/django.po`我在**我**的应用程序中标记的字符串中，但我想翻译标记为 django 表单中可翻译的字符串，比如这个：[https ://github.com/django/django/blob/master/django /contrib/auth/forms.py#L64-L84](https://github.com/django/django/blob/master/django/contrib/auth/forms.py#L64-L84)

有什么方法可以`makemessages`翻译 Django 中的标签和验证错误消息，`Forms`而不必覆盖这些表单？

提前感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T17:07:40.590

这些字符串的翻译已经由 django 项目完成：[https ://github.com/django/django/blob/master/django/contrib/auth/locale/es_MX/LC_MESSAGES/django.po#L42](https://github.com/django/django/blob/master/django/contrib/auth/locale/es_MX/LC_MESSAGES/django.po#L42)

您无需自己进行翻译。

您应该已经在您的应用程序中翻译了它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T12:22:02.993

如上所述，翻译是 Django 自带的。但是，如果您想要的语言的翻译不完整或不符合您的意愿，您始终可以复制字符串以翻译到您的项目，您的翻译将优先于 Django 附带的翻译。

要实现这一点，只需创建文件并包含这些要翻译的字符串。例如`app/i18n.py`：

```
'''
Fake file to translate messages from django.contrib.auth.
'''

def _(text):
    return text

def fake():
    _(u'This username is already taken. Please choose another.') 
```

现在`makemessages`将拿起这些字符串，您将能够翻译它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-30T08:33:07.763

如果您使用的是 ModelForm，请查看[此答案](https://stackoverflow.com/a/21762860/544059)以自定义标签和错误消息：

```
class AuthorForm(ModelForm):
    class Meta:
        model = Author
        fields = ('name', 'title', 'birth_date')
        labels = {
            'name': _('Writer'),
        }
        help_texts = {
            'name': _('Some useful help text.'),
        }
        error_messages = {
            'name': {
                'max_length': _("This writer's name is too long."),
            },
        } 
```

# mysql - Rails - 第一个应用程序 Mysql 错误

> ID：14816997
> 
> 赞同：0
> 
> 时间：2013-02-11T17:00:26.510
> 
> 标签：mysql, ruby-on-rails, aptana

我试图将我的 aptana rails 应用程序连接到 mysql。但一条错误消息显示 llibmysql 丢失。请帮帮我

这是我的步骤，如果我错过了什么，请告诉我。

1- 打开 aptana 并创建新的铁路项目 2- aptana 自动创建所有文件夹，

```
 $ bundle install 
```

3-然后我将database.yml配置为

```
 adapter: mysql2
  encoding: utf8
  reconnect: false
  database: blog_development
  pool: 5
  username: root
  password: root
  host: localhost 
```

4- 在 gem 文件中添加 mysql2 5- 下载 mysql-connector-c-noinstall-6.0.2-win32.zip 并将其解压缩到桌面

5- `$ gem install mysql --platform=ruby -- --with-mysql-dir=D:\Software-backup\mysqlconnecter`

6- 然后再次捆绑安装 7- 然后 rake db:create

但似乎错误信息这里是错误信息

```
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing mysql:
        ERROR: Failed to build gem native extension.

        c:/RailsInstaller/Ruby1.9.3/bin/ruby.exe extconf.rb --with-mysql-dir=C:UsersasusDesktopabc
checking for main() in -llibmysql... no
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

我不知道如何解决这个..请帮助..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:46:22.577

我遇到了同样的问题，我所做的是将文件 libmysql.dll（通过提取下载的连接器获得）复制到我的 Ruby 安装文件夹内的文件夹 bin 中。在您的情况下，您应该将 libmysql.dll 复制到 C:/RailsInstaller/Ruby1.9.3/bin 中。