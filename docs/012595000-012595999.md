# StackOverflow 问答 12595000-12595999

# angularjs - 角度 $resource POST

> ID：12595001
> 
> 赞同：1
> 
> 时间：2012-09-26T05:21:22.547
> 
> 标签：angularjs

我得到了以下使用 GET 的示例。但是“doSave”不适用于 POST。我忽略了一些吗？

* * *

```
 $scope.obj1 = $resource('http://localhost:port/srv/:id',
            {port: '\:8080', id:'2', callback: 'JSON_CALLBACK'},
            {get:{method:'JSONP'}, save:{'POST'});

    $scope.doSearch = function () {
    $scope.Result = $scope.obj1.get({id:$scope.term});
    }

    $scope.doSave = function () {
    $scope.Result.save();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:48:11.810

除了查询/获取方法之外，其余的都以 $ 为前缀调用（$resource.$save()、$resource.$remove() 等）

所以在 doSave 你需要

```
$scope.Result.$save(); 
```

更多细节在[官方文档](http://docs.angularjs.org/api/ngResource.%24resource)

# ios - yuv转jpeg iOS

> ID：12595003
> 
> 赞同：4
> 
> 时间：2012-09-26T05:21:29.220
> 
> 标签：ios, image

我想在 iOS 中将 yuv 420SP 图像（直接从相机捕获，YCbCr 格式）转换为 jpg。我发现的是 CGImageCreate() 函数[https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CGImage/Reference/reference.html#//apple_ref/doc/uid/TP30000956-CH1g-F17167](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CGImage/Reference/reference.html#//apple_ref/doc/uid/TP30000956-CH1g-F17167)，它接受一些参数，包括包含并应该返回一些 CGImage 的字节数组，其 UIImage 在输入到 UIImageJPEGRepresentation() 时返回 jpeg 数据，但这并没有真正发生输出图像数据与所需的数据相差甚远。至少输出不是零。

作为 CGImageCreate() 的输入，我将每个组件的位数设置为 4，将每个像素的位数设置为 12，以及一些默认值。

它真的可以转换 yuv YCbCr 图像广告而不仅仅是 rgb 吗？如果是，那么我认为我在 CGImageCreate 函数的输入值中做错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-19T12:50:19.953

从我[在这里](https://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/CGColorSpace/Reference/reference.html)可以看到，该`CGColorSpaceRef colorspace`参数只能指 RGB、CMYK 或灰度。

所以我认为首先你需要将你的 YCbCr420 图像转换为 RGB，例如，使用 IPP 函数`YCbCr420toRGB`（[doc](http://software.intel.com/sites/products/documentation/hpc/ipp/ippi/ippi_ch6/functn_YCbCr420ToRGB.html#functn_YCbCr420ToRGB)）。或者，您可以编写自己的转换例程，这并不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-10T20:10:43.807

`captureOutput:didOutputSampleBuffer:fromConnection`下面是转换方法返回的样本缓冲区的代码`AVVideoDataOutput`：

```
- (void)captureOutput:(AVCaptureOutput *)output didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection
{
    CVPixelBufferRef pixelBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
    CVPixelBufferLockBaseAddress(pixelBuffer, 0);
    GLubyte *rawImageBytes = CVPixelBufferGetBaseAddress(pixelBuffer);
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(pixelBuffer); //2560 == (640 * 4)
    size_t bufferWidth = CVPixelBufferGetWidth(pixelBuffer);
    size_t bufferHeight = CVPixelBufferGetHeight(pixelBuffer);  //480
    size_t dataSize = CVPixelBufferGetDataSize(pixelBuffer); //1_228_808 = (2560 * 480) + 8
CGColorSpaceRef defaultRGBColorSpace = CGColorSpaceCreateDeviceRGB();

    CGContextRef context = CGBitmapContextCreate(rawImageBytes, bufferWidth, bufferHeight, 8, bytesPerRow, defaultRGBColorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
    CGImageRef image = CGBitmapContextCreateImage(context);

    CFMutableDataRef imageData = CFDataCreateMutable(NULL, 0);
    CGImageDestinationRef destination = CGImageDestinationCreateWithData(imageData, kUTTypeJPEG, 1, NULL);
    NSDictionary *properties = @{(__bridge id)kCGImageDestinationLossyCompressionQuality: @(0.25),
                                 (__bridge id)kCGImageDestinationBackgroundColor: (__bridge id)CLEAR_COLOR,
                                 (__bridge id)kCGImageDestinationOptimizeColorForSharing : @(TRUE)
                                 };
    CGImageDestinationAddImage(destination, image, (__bridge CFDictionaryRef)properties);

    if (!CGImageDestinationFinalize(destination))
    {
        CFRelease(imageData);
        imageData = NULL;
    }
    CFRelease(destination);

    UIImage *frame = [[UIImage alloc] initWithCGImage:image];
    CGContextRelease(context);
    CGImageRelease(image);

    renderFrame([self.childViewControllers.lastObject.view viewWithTag:1].layer, frame);

    CVPixelBufferUnlockBaseAddress(pixelBuffer, 0);
} 
```

以下是像素格式类型的三个选项：

```
kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange
kCVPixelFormatType_420YpCbCr8BiPlanarFullRange
kCVPixelFormatType_32BGRA 
```

如果`_captureOutput`是对我的实例的指针引用`AVVideoDataOutput`，这就是您设置像素格式类型的方式：

```
[_captureOutput setVideoSettings:@{(id)kCVPixelBufferPixelFormatTypeKey: @(kCVPixelFormatType_32BGRA)}]; 
```

# javascript - 为什么 jquery.ui.all.css 用于选项卡

> ID：12595006
> 
> 赞同：1
> 
> 时间：2012-09-26T05:21:58.427
> 
> 标签：javascript, jquery, html, css, jquery-ui

我想知道做`jquery.ui.all.css`什么`Tabs`

我删除的那一刻

```
<link rel="stylesheet" href="jquery/dev/themes/base/jquery.ui.all.css"> 
```

我的标签不起作用..

我的问题是：

`jquery.ui.all.css stylesheet`对标签实际上做了什么？

我可以为选项卡创建自己的样式表吗？如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:28:49.470

所有与选项卡相关的样式都在 jquery.ui.all.css 样式表中。

选项卡实际上是普通的 html 元素，如 div 和 span，它们被封装在包装器中。如果您删除样式表，实际元素将显示在屏幕上。

这些包装器与为选项卡提供样式的类名相关联。

如果您想编写自己的样式，则需要覆盖或设置包含这些样式的每个包装器。

有一种更简单的方法可以通过使用

[主题滚轮](http://jqueryui.com/docs/Theming/Themeroller)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:46:55.360

如果您[打开文件](https://github.com/jquery/jquery-ui/blob/master/themes/base/jquery.ui.all.css)，您会看到以下内容：

```
/*!
 * jQuery UI CSS Framework 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Theming
 */
@import "jquery.ui.base.css";
@import "jquery.ui.theme.css"; 
```

`@import`当包含此文件时，这两个语句会加载这两个单独的文件。这是一条捷径，它在 2010 年 2 月[取代了以下](https://github.com/jquery/jquery-ui/blob/d8841a752b594921ab88a14fd92d8a6c3e19e0f8/themes/base/ui.all.css)( [**DIFF**](https://github.com/jquery/jquery-ui/blob/828bcdd2f0befbf450dcd1d7c387388acd7a191b/themes/base/jquery.ui.all.css) )：

```
@import "ui.core.css";
@import "ui.accordion.css";
@import "ui.datepicker.css";
@import "ui.dialog.css";
@import "ui.progressbar.css";
@import "ui.resizable.css";
@import "ui.slider.css";
@import "ui.tabs.css"; 
```

因此，如果您删除该包含，我会假设不仅仅是 jQuery UI 选项卡将停止工作，除非这是您正在使用的唯一基于 UI 的效果。

# cuda - 使用 GPU 值得吗？

> ID：12595009
> 
> 赞同：3
> 
> 时间：2012-09-26T05:22:24.893
> 
> 标签：cuda, gpu, simulation

我想计算受某些势能影响的粒子的轨迹，这是一个典型的 N 体问题。我一直在研究利用 GPU（例如 CUDA）的方法，它们似乎有利于大 N（20000）的模拟。这是有道理的，因为最昂贵的计算通常是找到力。

但是，我的系统将具有“低”N（小于 20）、许多不同的潜力/因素和许多时间步长。将此系统移植到 GPU 是否值得？

根据[Fast N-Body Simulation with CUDA 一](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCIQFjAA&url=http://http.developer.nvidia.com/GPUGems3/gpugems3_ch31.html&ei=_45iULbDKKHQiwLL5oDQDA&usg=AFQjCNEP47RtfA4wOGtIRlXebmPU50tCJg)文，对于不同的计算（例如加速度和力）使用不同的内核似乎是有效的。对于具有低 N 的系统，似乎从设备复制到/从设备的成本实际上是巨大的，因为对于每个时间步，必须为每个内核从设备复制和检索数据。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:53:15.730

如果需要并行模拟的实体少于 20 个，我只会在普通的多核 CPU 上使用并行处理，而不用担心使用 GPU。

使用多核 CPU 将更容易编程，并且避免将所有操作转换为 GPU 操作的步骤。

此外，正如您已经建议的那样，使用 GPU 的性能增益将很小（甚至为负），而进程数量如此之少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:29:06.930

无需在时间步之间将结果从设备复制到主机并返回。只需在 GPU 上运行整个模拟，然后仅在计算了几个时间步后将结果复制回来。

运行模拟需要多少种不同的电位？仅使用 N 体示例中的结构并仍然加载整个 GPU 就足够了吗？

如果不是，并且假设潜在的计算很昂贵，我认为最好为每*对*粒子使用一个线程，以使问题充分并行。如果每个潜在设置使用一个块，则可以将力写入共享内存 __syncthreads()，并使用块线程的子集（每个粒子一个）来对力求和。__syncthreads() 再次，并继续下一个时间步。

如果潜在的计算成本不高，则可能值得首先探索模拟的主要成本在哪里。

# php - 使用 curl_init 获取网页内容不适用于某些链接

> ID：12595012
> 
> 赞同：-1
> 
> 时间：2012-09-26T05:22:53.790
> 
> 标签：php, curl

我正在使用此代码获取输入的 url 的内容：-

```
class MetaTagParser
{
    public $metadata;
    private $html;
    private $url;

    public function __construct($url)
    {
        $this->url=$url;

        $this->html=  $this->file_get_contents_curl();

        $this->set_title();
        $this->set_meta_properties();
    }

    public function file_get_contents_curl()
    {
        $ch = curl_init();

        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_URL, $this->url);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

        $data = curl_exec($ch);
        curl_close($ch);

        return $data;
    }

    public function set_title()
    {
        $doc = new DOMDocument();
        @$doc->loadHTML($this->html);
        $nodes = $doc->getElementsByTagName('title');

        $this->metadata['title'] = $nodes->item(0)->nodeValue;
    } 
```

这个类适用于某些页面，但适用于像这样的一些 url - [http://www.dnaindia.com/india/report_in-a-first-upa-govt-tweets-the-press_1745346](http://www.dnaindia.com/india/report_in-a-first-upa-govt-tweets-the-press_1745346) 当我尝试获取数据时我得到了这个错误：-“警告：get_meta_tags（http://www.dnaindia.com/india/report_in-a-first-upa-govt-tweets-the-press_1745346）：未能打开流：HTTP请求失败！HTTP/1.1 403禁止在 C:\xampp\htdocs\prac\index.php 第 52 行"

它不起作用，任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:57:24.463

有时网站管理员并不愚蠢，并且知道如何保护页面不被吞食和获取，因此您必须欺骗他的保护并呈现来自普通浏览器的用户代理。添加这一行：

```
CURLOPT_USERAGENT => "Mozilla/5.0 (Windows NT 6.1; rv:15.0) Gecko/20100101 Firefox/15.0.1", 
```

# perl - 关于 perl 5.8.3 DBI 安装

> ID：12595014
> 
> 赞同：0
> 
> 时间：2012-09-26T05:23:08.013
> 
> 标签：perl, activeperl

注意到我们的系统有 perl 5.8.3。我无法找到 DBI.pm。当我执行 perl -V 时，它显示了以下输出。贴在下面。使用 HPUX11 操作系统。perl 安装目录下的所有已安装文件都具有 root 或 bin 作为文件的所有者。我现在没有root密码。我想安装 DBI.pm。我该怎么做。我需要从 CPAN 或 Active Perl 网站下载吗？

perl -V

> 此二进制文件的特征（来自 libperl）： 编译时选项：MULTIPLICITY USE_ITHREADS USE_LARGE_FILES PERL_IMPLICIT_CONTEXT
> 本地应用补丁：ActivePerl Build 809 22218 删除有关分离线程在 Windows 上崩溃的警告 22201 通过稍后释放 Perl 解释器来避免线程 + win32 崩溃 22169 显示'使用低级 I/O 时出现内存不足”错误 22159 升级到 Time::Hires 1.55 22120 使“配置 -Dcf_by=...”工作 22051 升级到 Time::HiRes 1.54 21540 修复 if.pm 中的向后兼容性问题hpux 下编译 2005 年 5 月 17 日 18:12:56 编译
> 
> ```
> /opt/perl/lib/5.8.3/PA-RISC1.1-thread-multi
> /opt/perl/lib/5.8.3
> /opt/perl/lib/site_perl/5.8.3/PA-RISC1.1-thread-multi
> /opt/perl/lib/site_perl/5.8.3
> /opt/perl/lib/site_perl 
> ```

perl 安装目录下的所有安装文件都以 root 或 bin 作为用户 ID。我现在没有root密码。我想安装 DBI。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:03:34.563

CPAN 有一个选项`local::lib`可以安装到`~/perl5`. 如果这对你有用，那是你最好的选择，否则在你有权访问的地方创建一个目录（可能在你的 /home 下），手动下载 DBI.pm（和任何依赖项），然后把它放在那里。

然后将目录名称添加到您的 PERLLIB 环境变量（目前未设置）。`perl -V`确认`~/perl5`已添加`@INC`到.

# java - 如何获取两个字符之间的字符串？

> ID：12595019
> 
> 赞同：108
> 
> 时间：2012-09-26T05:23:39.707
> 
> 标签：java, string

我有一个字符串，

```
String s = "test string (67)"; 
```

我想得到第 67 号，它是 ( 和 ) 之间的字符串。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-09-26T05:27:44.150

可能有一个非常整洁的正则表达式，但我在那个领域是菜鸟，所以相反......

```
String s = "test string (67)";

s = s.substring(s.indexOf("(") + 1);
s = s.substring(0, s.indexOf(")"));

System.out.println(s); 
```

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2016-07-07T06:28:47.670

**这个问题的一个非常有用的解决方案是使用Apache Commons**库，不需要您执行 indexOf 。

```
 StringUtils.substringBetween(s, "(", ")"); 
```

即使通过查找 indexOf 结束字符串，该方法将允许您处理多次出现的结束字符串。

你可以从这里下载这个库： [https ://mvnrepository.com/artifact/org.apache.commons/commons-lang3/3.4](https://mvnrepository.com/artifact/org.apache.commons/commons-lang3/3.4)

* * *

## 回答 #3

> 赞同：80
> 
> 时间：2013-08-07T06:42:21.570

像这样试试

```
String s="test string(67)";
String requiredString = s.substring(s.indexOf("(") + 1, s.indexOf(")")); 
```

子字符串的方法签名是：

```
s.substring(int start, int end); 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2012-09-26T05:48:18.527

通过使用正则表达式：

```
 String s = "test string (67)";
 Pattern p = Pattern.compile("\\(.*?\\)");
 Matcher m = p.matcher(s);
 if(m.find())
    System.out.println(m.group().subSequence(1, m.group().length()-1)); 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-09-26T05:37:21.580

[Java 支持正则表达式](http://docs.oracle.com/javase/tutorial/essential/regex/)，但如果您真的想使用它们来提取匹配项，它们会有点麻烦。我认为在示例中获取所需字符串的最简单方法是在`String`类的`replaceAll`方法中使用正则表达式支持：

```
String x = "test string (67)".replaceAll(".*\\(|\\).*", "");
// x is now the String "67" 
```

这只是删除了所有内容，包括第一个`(`，以及`)`之后的所有内容。这只是在括号之间留下了东西。

但是，这样做的结果仍然是一个`String`。如果您想要一个整数结果，那么您需要进行另一次转换：

```
int n = Integer.parseInt(x);
// n is now the integer 67 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2014-09-15T10:11:57.777

在一行中，我建议：

```
String input = "test string (67)";
input = input.subString(input.indexOf("(")+1, input.lastIndexOf(")"));
System.out.println(input);` 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2016-04-11T19:04:07.003

您可以使用 apache 公共库的 StringUtils 来执行此操作。

```
import org.apache.commons.lang3.StringUtils;
...
String s = "test string (67)";
s = StringUtils.substringBetween(s, "(", ")");
.... 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2012-09-26T05:30:31.590

```
String s = "test string (67)";

int start = 0; // '(' position in string
int end = 0; // ')' position in string
for(int i = 0; i < s.length(); i++) { 
    if(s.charAt(i) == '(') // Looking for '(' position in string
       start = i;
    else if(s.charAt(i) == ')') // Looking for ')' position in  string
       end = i;
}
String number = s.substring(start+1, end); // you take value between start and end 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2019-01-08T09:30:19.707

测试字符串`test string (67)`，您需要从中获取嵌套在两个字符串之间的字符串。

```
String str = "test string (67) and (77)", open = "(", close = ")"; 
```

**列出了一些可能的方法**：简单的通用解决方案：

```
String subStr = str.substring(str.indexOf( open ) + 1, str.indexOf( close ));
System.out.format("String[%s] Parsed IntValue[%d]\n", subStr, Integer.parseInt( subStr )); 
```

* * *

> 阿帕奇软件基金会[`commons.lang3`](https://github.com/apache/commons-lang)。

[`StringUtils`](https://github.com/apache/commons-lang/blob/master/src/main/java/org/apache/commons/lang3/StringUtils.java)类`substringBetween()`函数获取嵌套在两个字符串之间的字符串。仅返回第一个匹配项。

```
String substringBetween = StringUtils.substringBetween(subStr, open, close);
System.out.println("Commons Lang3 : "+ substringBetween); 
```

*用嵌套在两个字符串之间的字符串替换给定的字符串。[`#395`](https://github.com/apache/commons-lang/pull/395)*

* * *

> 带有正则表达式的模式：[**`(\()(.*?)(\)).*`**](https://regex101.com/r/ONalwP/2)

[点](https://www.regular-expressions.info/dot.html)匹配（几乎）任何字符 `.? = .{0,1}, .* = .{0,}, .+ = .{1,}`

```
String patternMatch = patternMatch(generateRegex(open, close), str);
System.out.println("Regular expression Value : "+ patternMatch); 
```

*具有实用程序类[**`RegexUtils`**](https://stackoverflow.com/a/54087458/5081877)和一些函数的正则表达式。*
      **`Pattern.DOTALL`**:*匹配任何字符，包括行终止符。*
      **`Pattern.MULTILINE`**：匹配从*输入序列开始**到结束的**整个字符串。`^``$`*

```
public static String generateRegex(String open, String close) {
    return "(" + RegexUtils.escapeQuotes(open) + ")(.*?)(" + RegexUtils.escapeQuotes(close) + ").*";
}

public static String patternMatch(String regex, CharSequence string) {
    final Pattern pattern  = Pattern.compile(regex, Pattern.DOTALL);
    final Matcher matcher = pattern .matcher(string);

    String returnGroupValue = null;
    if (matcher.find()) { // while() { Pattern.MULTILINE }
        System.out.println("Full match: " + matcher.group(0));
        System.out.format("Character Index [Start:End]«[%d:%d]\n",matcher.start(),matcher.end());
        for (int i = 1; i <= matcher.groupCount(); i++) {
            System.out.println("Group " + i + ": " + matcher.group(i));
            if( i == 2 ) returnGroupValue = matcher.group( 2 );
        }
    }
    return returnGroupValue;
} 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2017-03-02T09:55:38.353

```
String result = s.substring(s.indexOf("(") + 1, s.indexOf(")")); 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2018-10-27T17:21:56.200

```
public String getStringBetweenTwoChars(String input, String startChar, String endChar) {
    try {
        int start = input.indexOf(startChar);
        if (start != -1) {
            int end = input.indexOf(endChar, start + startChar.length());
            if (end != -1) {
                return input.substring(start + startChar.length(), end);
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return input; // return null; || return "" ;
} 
```

用法 ：

```
String input = "test string (67)";
String startChar = "(";
String endChar   = ")";
String output = getStringBetweenTwoChars(input, startChar, endChar);
System.out.println(output);
// Output: "67" 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2012-09-26T05:56:26.287

利用`Pattern and Matcher`

```
public class Chk {

    public static void main(String[] args) {

        String s = "test string (67)";
        ArrayList<String> arL = new ArrayList<String>();
        ArrayList<String> inL = new ArrayList<String>();

        Pattern pat = Pattern.compile("\\(\\w+\\)");
        Matcher mat = pat.matcher(s);

        while (mat.find()) {

            arL.add(mat.group());
            System.out.println(mat.group());

        }

        for (String sx : arL) {

            Pattern p = Pattern.compile("(\\w+)");
            Matcher m = p.matcher(sx);

            while (m.find()) {

                inL.add(m.group());
                System.out.println(m.group());
            }
        }

        System.out.println(inL);

    }

} 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2012-09-26T05:36:59.157

使用拆分方法的另一种方法

```
public static void main(String[] args) {

    String s = "test string (67)";
    String[] ss;
    ss= s.split("\\(");
    ss = ss[1].split("\\)");

    System.out.println(ss[0]);
} 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2017-10-05T18:49:55.247

另一种可能的解决方案是使用**[`lastIndexOf`](https://docs.oracle.com/javase/9/docs/api/java/lang/String.html#lastIndexOf-java.lang.String-int-)**它将向后查找字符或字符串的位置。

在我的场景中，我有跟随`String`，我必须提取`<<UserName>>`

```
1QAJK-WKJSH_MyApplication_Extract_<<UserName>>.arc 
```

所以，`indexOf`并`StringUtils.substringBetween`没有帮助，因为他们从一开始就开始寻找角色。

所以，我用`lastIndexOf`

```
String str = "1QAJK-WKJSH_MyApplication_Extract_<<UserName>>.arc";
String userName = str.substring(str.lastIndexOf("_") + 1, str.lastIndexOf(".")); 
```

而且，它给了我

```
<<UserName>> 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2017-02-02T19:25:12.263

我发现使用 Regex 和 Pattern / Matcher 类执行此操作的最不通用的方法：

```
String text = "test string (67)";

String START = "\\(";  // A literal "(" character in regex
String END   = "\\)";  // A literal ")" character in regex

// Captures the word(s) between the above two character(s)
String pattern = START + "(\w+)" + END;

Pattern pattern = Pattern.compile(pattern);
Matcher matcher = pattern.matcher(text);

while(matcher.find()) {
    System.out.println(matcher.group()
        .replace(START, "").replace(END, ""));
} 
```

这可能有助于解决更复杂的正则表达式问题，您希望在两组字符之间获取文本。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2012-09-26T05:26:22.460

这样做的“通用”方式是从头开始解析字符串，丢弃第一个括号之前的所有字符，记录第一个括号之后的字符，并丢弃第二个括号之后的字符。

我确定有一个正则表达式库或可以做的事情。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2016-02-18T11:50:04.147

```
String s = "test string (67)";

System.out.println(s.substring(s.indexOf("(")+1,s.indexOf(")"))); 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-07-13T14:34:55.340

这是一个简单的使用`\D+`正则表达式并完成工作。
这会选择除数字以外的所有字符，无需复杂化

```
/\D+/ 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2018-06-30T00:55:59.303

像这样的东西：

```
public static String innerSubString(String txt, char prefix, char suffix) {

    if(txt != null && txt.length() > 1) {

        int start = 0, end = 0;
        char token;
        for(int i = 0; i < txt.length(); i++) {
            token = txt.charAt(i);
            if(token == prefix)
                start = i;
            else if(token == suffix)
                end = i;
        }

        if(start + 1 < end)
            return txt.substring(start+1, end);

    }

    return null;
} 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2020-06-11T03:52:25.287

如果没有匹配正则表达式，它将返回原始字符串

```
var iAm67 = "test string (67)".replaceFirst("test string \\((.*)\\)", "$1"); 
```

将匹配项添加到代码中

```
String str = "test string (67)";
String regx = "test string \\((.*)\\)";
if (str.matches(regx)) {
    var iAm67 = str.replaceFirst(regx, "$1");
} 
```

- -编辑 - -

我使用[https://www.freeformatter.com/java-regex-tester.html#ad-output](https://www.freeformatter.com/java-regex-tester.html#ad-output)来测试正则表达式。

结果是添加更好？* 之后的匹配较少。像这样的东西：

```
String str = "test string (67)(69)";
String regx1 = "test string \\((.*)\\).*";
String regx2 = "test string \\((.*?)\\).*";
String ans1 = str.replaceFirst(regx1, "$1");
String ans2 = str.replaceFirst(regx2, "$1");
System.out.println("ans1:"+ans1+"\nans2:"+ans2); 
// ans1:67)(69
// ans2:67 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-04-29T15:43:04.483

```
String s = "(69)";
System.out.println(s.substring(s.lastIndexOf('(')+1,s.lastIndexOf(')'))); 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-10-22T12:19:43.707

顶部的小扩展（MadProgrammer）答案

```
 public static String getTextBetween(final String wholeString, final String str1, String str2){
    String s = wholeString.substring(wholeString.indexOf(str1) + str1.length());
    s = s.substring(0, s.indexOf(str2));
    return s;
} 
```

# javascript - 焦点在文本框中的文本末尾

> ID：12595024
> 
> 赞同：0
> 
> 时间：2012-09-26T05:24:22.230
> 
> 标签：javascript, jquery

我有一个要求：一个文本框最多可以有 50 个字符，为了实现这一点，我给出了 preventDefault。

```
if (!(event.ctrlKey && (event.which == 65 || event.which == 86 || event.which == 67 || event.which == 88))
                && (!(event.shiftKey && (event.which == 35 || event.which == 36)))
                && (key != 8 && key != 37 && key != 39 && key != 46 && key != 36 && key != 35 && key != 33 && key != 34)) {
                    event.preventDefault();
                } 
```

但现在的要求是：当我们按 ctrl+a 然后按 abc 时，它应该清除文本中的所有内容并打印 abc。
为了实现这一点，我写了这段代码->

```
var focusItem = $('<input type="text">');
     function getSelText() {
              var txt = '';
              //IE
        var focusItem = $('<input type="text">');
         if (document.selection != undefined) {
             focusItem.focus();
             var sel = document.selection.createRange();
             var rangeParent = sel.parentElement();
             txt = sel.text;
             if (!(event.ctrlKey && (event.which == 65 || event.which == 86 || event.which == 67 || event.which == 88))
             && (!(event.shiftKey && (event.which == 35 || event.which == 36)))
             && (key != 8 && key != 37 && key != 39 && key != 46 && key != 36 && key != 35 && key != 33 && key != 34)) {
             //event.preventDefault();
            if (txt.length > 0 && ((key >= 65 && key <= 90) || (key >= 48 && key <= 57) || (key >= 97 && key <= 122))) {
                sel.text = String.fromCharCode(key).toLowerCase();
                }
                txt = sel.text;
             }
          }                        
          return txt;
       } 
```

现在一切正常，但是.. 当我按 ctrl+a abc 时，它会打印为 bca。发生的事情是：当我在 ctrl+a 之后按 a 时，a 将打印在文本框上，但焦点设置在文本之前，即 a。
如何处理这个。
我正在使用 Windows 7、IE9、Visual Studio 2010。
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:29:53.250

将焦点设置到文本框末尾的最简单方法是将文本框的文本设置为自身：

```
focusItem.val(focusItem.val()); 
```

# hibernate - 如何在 HQL 中编写内联查询

> ID：12595031
> 
> 赞同：1
> 
> 时间：2012-09-26T05:25:00.267
> 
> 标签：hibernate, hql

如何在 HQL 中编写此查询？

```
SELECT CASE WHEN data1 > data2 THEN data1 ELSE data2 END AS data, STAMP FROM 
(SELECT STAMP, max(mc.data1) as data1, max(mc.data2) as data2 FROM 
transaction_history mc LEFT JOIN orderdetails gc on mc.id = gc.id where 
gc.order_name in ('xxx','yyy') AND time >= 135689 AND time <= 137692) AS TBL 
```

当我尝试在 HQL 中复制上述查询时，我得到：

```
org.hibernate.hql.ast.QuerySyntaxException exception saying unexpected token "(". 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:15:08.653

尝试使用分离条件并使用相关子查询将其与主要条件连接，然后在实体中的字段上使用公式来实现这一点。Hibernate 没有像您所做的那样支持内联查询。

# java - JLabel 可以显示溢出（x 或 y 或两者）吗？

> ID：12595032
> 
> 赞同：2
> 
> 时间：2012-09-26T05:25:11.603
> 
> 标签：java, swing, layout, jlabel

因此，在 css 中，您可以在 div 上设置溢出，例如，并强制它显示附加到它的任何溢出元素。你可以用挥杆做到这一点吗？

```
JLabel outside=new JLabel();
outside.setBounds(100,100,400,400);
JLabel inside=new JLabel();
inside.setBounds(0,0,500,400);
outside.add(inside); // show the cropped parts? 
```

我知道我已经省略了一大堆其他代码。这只是理论。我做了谷歌“JLabel 溢出”和“Swing 组件溢出”，但找不到任何具体的东西。

如果没有简单的答案，只需输入“否”，我将不理会它。

谢谢

# python - PyQt。边走边显示操作系统进程？

> ID：12595033
> 
> 赞同：1
> 
> 时间：2012-09-26T05:25:13.343
> 
> 标签：python, pyqt, pyqt4

现在我正在使用 Python 循环复制大量文件。复制时，我告诉 PyQt 将反馈附加到 QTextEdit：

```
for src in sources:
    shutil.copy(src, dst)
    self.feedback.append("Copying " + src) 
```

（`self.feedback`是 QTextEdit）。

当我启动我的脚本时，PyQt 会冻结，直到所有副本都完成，然后才一次显示所有内容。

如何在复制文件时实时显示每个反馈？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:27:56.207

由于您的任务完全受 IO 限制，您可以简单地告诉 Qt 在开始下一个复制操作之前处理任何待处理的 gui 事件：

```
for src in sources:
    self.feedback.append('Copying: %s' % src)
    QtGui.qApp.processEvents()
    shutil.copy(src, dst) 
```

# android - 无法以整数计算总金额，在android中的活动之间

> ID：12595038
> 
> 赞同：1
> 
> 时间：2012-09-26T05:26:06.313
> 
> 标签：android, android-intent, android-emulator, android-widget

我正在制作一个应用程序，我必须在其中从第一个活动获取项目名称和价格到另一个活动，我能够做到这一点，但在第二个活动中，我允许用户以数字形式输入数量，并且每当用户单击按钮 a`TextView`以显示总金额，但无法计算项目的总金额。

我知道这是非常简单的任务，但是在按钮中写下这一行时出现错误`onClick()`：

```
txtResult=txtCost*txtQty 
```

我在这里放置第二个活动代码，

请更正这一点：-

```
public class SecondScreenActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.screen2);

    TextView txtName = (TextView) findViewById(R.id.txtName);
    TextView txtCost = (TextView) findViewById(R.id.txtCost);
    EditText txtQty=(EditText)findViewById(R.id.txtQty);
    Button btnClose = (Button) findViewById(R.id.btnCalculate);
    TextView txtResult = (TextView) findViewById(R.id.txtResult);

    Intent i = getIntent();
    // Receiving the Data
    String name = i.getStringExtra("name");
    String cost = i.getStringExtra("cost");

    // Displaying Received data
    txtName.setText(name);
    txtCost.setText(cost);

    // Binding Click event to Button
    btnClose.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            //Closing SecondScreen Activity
            //finish();
            txtResult=txtCost*txtQty;

        }
    });

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:39:56.453

你可以这样做

```
int cost = Integer.parseInt(txtCost.getText().toString());
int qty =  Integer.parseInt(txtQty.getText().toString());
int result = cost*qty; 
```

然后将此结果设置为 txtResult

```
txtResult.setText(result+""); 
```

或者您可以将 int 转换为 String 然后应用 setText

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:36:45.863

```
 txtResult=txtCost*txtQty; 
```

这些是 TextView 对象。你不能对物体做数学运算。将 textview 的值转换为整数，然后尝试相乘。

做这样的事情..取决于你想要的变量类型（整数、浮点数、双精度）。

```
int a = new Integer(txtCost.getText().toString());
int b = new Integer(txtQty.getText().toString());
int c = a * b;
txtResult.setText(d); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T05:37:48.100

为什么要在 Textview 中乘以值

```
 btnClose.setOnClickListener(new View.OnClickListener() {

public void onClick(View arg0) {
Float f_name = new Float(name);
Float f_cost = new Float(cost);
Float f_result=f_name *f_cost ;
txtResult.setText(f_result);

   }
    });

}
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-26T05:31:40.033

需要进行 2 项更改。

1.  同时创建 txtCost 和 txtQty 全局变量。

2.  这两个变量都不能直接相乘。而是做这样的事情。

    ```
    double cost = Double.parseDouble(txtCost.getText().toString());
    double qty = Double.parseDouble(txtQty.getText().toString());

    txtResult = cost * qty ; 
    ```

# javascript - 如果它们都包含在另一个函数中，我是否必须在另一个函数使用它之前定义一个 js 函数？

> ID：12595046
> 
> 赞同：0
> 
> 时间：2012-09-26T05:27:07.563
> 
> 标签：javascript, jquery

我有以下代码：

```
 doAjax = function () {
        $.ajax({
            cache: false,
            url: url,
            dataType: 'html'
        })
        .done(onDone)
        .fail(onFail)
        .always(function () {
            ;
        });
    },
    onDone = function (data) {
        content = data;
        if (content.match(/^[eE]rror/)) {
            mvcOnFailure(content);
        } else { 
```

我在使用 jslint 时遇到错误，说在定义之前使用了“onDone”之类的东西。这是我应该尽量避免的事情吗，这是一个问题。请注意，doAjax 和 onDone 函数都包含在另一个函数中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:30:15.247

如果您将其定义为：

```
function onDone() {} 
```

然后，您不必在在同一范围内使用它之前定义它，因为像这样的所有函数定义都会自动“提升”到函数的顶部，并且在该范围内的任何代码运行之前定义。

如果您将其定义为：

```
onDone = function() {} 
```

然后，javascript 尊重您运行代码的顺序，并且`onDone`在该行代码在您的函数中的正常代码执行流程中执行之前没有此值，因此需要在`onDone`调用任何使用的代码之前执行此行。

# jquery - 带有自定义删除对话框的 jqgrid

> ID：12595050
> 
> 赞同：0
> 
> 时间：2012-09-26T05:27:18.003
> 
> 标签：jquery, jquery-ui, jqgrid, jqgrid-formatter

我正在使用 Jqgrid 来显示信息。是否可以在删除任何行时使用自定义删除对话框。因为我想再显示一个按钮以及“删除”和“取消”，并且还需要显示复选框。是否可以自定义或创建新对话框并在删除行时显示它？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:42:31.750

[jqgrid 自定义删除对话框消息](https://stackoverflow.com/questions/6913618/jqgrid-custom-delete-dialog-message)的可能重复项。

这个问题的答案涉及自定义对话框文本，而不一定是表单元素。您只需更改 html 代码（仍在使用事件回调）将复选框添加到表单的其他部分，即

```
beforeShowForm: function ($form) {
    $(".DeleteButton.EditButton", $form[0]).prepend('<label><checkbox name="cb">Text label</label>');
} 
```

您可能需要调整选择器

# python - 检查字符串是否匹配模式

> ID：12595051
> 
> 赞同：437
> 
> 时间：2012-09-26T05:27:36.087
> 
> 标签：python, regex, string-matching

如何检查字符串是否与此模式匹配？

大写字母、数字、大写字母、数字...

例如，这些将匹配：

```
A1B2
B10L1
C1N200J1 
```

这些不会（'^'指向问题）

```
a1B2
^
A10B
   ^
AB400
^ 
```

* * *

## 回答 #1

> 赞同：584
> 
> 时间：2012-09-26T05:30:57.923

```
import re
pattern = re.compile("^([A-Z][0-9]+)+$")
pattern.match(string) 
```

* * *

## 回答 #2

> 赞同：283
> 
> 时间：2016-07-13T03:09:26.930

**单线：`re.match(r"pattern", string) # No need to compile`**

```
import re
>>> if re.match(r"hello[0-9]+", 'hello1'):
...     print('Yes')
... 
Yes 
```

您可以根据`bool`需要对其进行评估

```
>>> bool(re.match(r"hello[0-9]+", 'hello1'))
True 
```

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2015-02-12T10:36:25.747

请尝试以下方法：

```
import re

name = ["A1B1", "djdd", "B2C4", "C2H2", "jdoi","1A4V"]

# Match names.
for element in name:
     m = re.match("(^[A-Z]\d[A-Z]\d)", element)
     if m:
        print(m.groups()) 
```

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2012-09-26T05:31:58.760

```
import re
import sys

prog = re.compile('([A-Z]\d+)+')

while True:
  line = sys.stdin.readline()
  if not line: break

  if prog.match(line):
    print 'matched'
  else:
    print 'not matched' 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-09-26T05:35:48.250

正则表达式使这很容易......

`[A-Z]`将匹配 A 和 Z 之间的一个字符

`\d+`将匹配一位或多位数字

`()`对事物进行分组（并且还返回事物......但现在只考虑它们的分组）

`+`选择 1 个或多个

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2012-09-26T06:10:00.217

```
  import re

ab = re.compile("^([A-Z]{1}[0-9]{1})+$")
ab.match(string) 

```

我相信这应该适用于**大写的数字**模式。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2021-09-21T14:46:30.573

如评论中所述，所有这些答案都`re.match`在字符串的开头使用隐式匹配。`re.search`如果您想推广到整个字符串，则需要。

```
import re

pattern = re.compile("([A-Z][0-9]+)+")

# finds match anywhere in string
bool(re.search(pattern, 'aA1A1'))  # True

# matches on start of string, even though pattern does not have ^ constraint
bool(re.match(pattern, 'aA1A1'))  # False 
```

信用：@LondonRob 和 @conradkleinespel 在评论中。

# ios - IOS、UIWebView、HTTPS、和信任任意证书（开源参考？）

> ID：12595053
> 
> 赞同：1
> 
> 时间：2012-09-26T05:27:47.810
> 
> 标签：ios, uiwebview, https

我想封装可以在 ios 平台上同时处理 http 和 https 请求的 UIWebView，特别是对于 https，它应该同时处理信任和未经验证（开发人员定义）的证书。有什么开源可以参考的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:39:14.010

[Graham Lee 在On SSL Pinning for Cocoa [Touch]](http://blog.securemacprogramming.com/2011/12/on-ssl-pinning-for-cocoa-touch/)中讨论了您可以做的一些事情。它与您将要接近开源一样接近 - 它的示例代码向您展示了如何使用`NSURLConnection`和`NSURLConnectionDelegate`.

Lee 的文章讨论了如何固定公钥，从而提高通道的安全性。公钥固定等同`StrictHostKeyChecking`于 SSH。此外，我相信您可以使用`NSURLConnection`并`NSURLConnectionDelegate`信任您的 [否则] 不受信任的证书（我不遵守这种做法，所以我不确定细节）。

小心减少（破坏？）通道内置的安全性。最近在[Why Eve and Mallory Love Android: An Analysis of Android SSL (In)Security 上](http://www2.dcsec.uni-hannover.de/files/android/p50-fahl.pdf)发表了一项对愚蠢的开发人员决策的调查和分析。它不仅限于安卓。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:54:55.040

这段代码可能会有所帮助[https://github.com/dirkx/Security-Pinning-by-CA](https://github.com/dirkx/Security-Pinning-by-CA) - 它正是这样做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:09:07.657

创建网络连接以处理 SSH 挑战、不受信任的认证。

# asp.net - 哪一个会给我更快的良好性能，返回数据集或通用集合

> ID：12595056
> 
> 赞同：0
> 
> 时间：2012-09-26T05:27:59.067
> 
> 标签：asp.net

我什么时候应该返回数据集，什么时候应该返回泛型集合，哪一个会给我更快的性能。即使要返回泛型类，我们也必须先循环遍历数据集，然后将其添加到集合中。请帮助。我已经阅读了很多文章互联网，但有人说使用数据集，有人说通用速度很快。

# scala - scalac“-deprecation”和“-unchecked”编译器选项会使其变慢

> ID：12595057
> 
> 赞同：2
> 
> 时间：2012-09-26T05:28:12.120
> 
> 标签：scala, scalac

有趣的是，启用这些选项后，我们的构建似乎变慢了。我在网上搜索了一下，并试图做一些比较，但没有发现任何结论。想问问有没有人知道的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T06:36:32.883

回答您自己的问题的一个好方法是尝试和**衡量**它。例如，我尝试使用 SBT 进行编译（它以秒为单位提供构建时间）。我采用了一个中等规模的项目（78 个 scala 源文件），我尝试在使用和不使用标志的情况下进行编译。我首先执行 3 次清理/编译调用来预热磁盘（确保所有内容都被控制器和操作系统正确缓存）。然后我测量了 3 次构建时间以获得平均值。

对于这两种情况（有和没有标志），构建时间是相同的。然而，有趣的是，第一次热身构建非常慢：几乎慢了 7 倍！因此很难依赖印象，因为构建时间将取决于您访问源文件的方式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-26T05:43:16.983

除非您的桌面是带有特别慢的机电继电器开关的电传打字机，否则您是安全的 - 无论哪种方式，它的工作方式都是一样的，所以如果有差异，那就是显示弃用/未经检查的警告需要多长时间。

# android - Android 图库 所选图像大小

> ID：12595059
> 
> 赞同：1
> 
> 时间：2012-09-26T05:28:14.987
> 
> 标签：android, gallery

我需要创建一个 android 图库，其中所选图像比其他图像大，我该怎么做？我还可以在用户拖动图像时调整图像大小以提供更好的用户体验吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:36:12.780

你在寻找这样的东西[吗](http://androidsnips.blogspot.in/2011/03/images-with-coverflow-like-animation-in.html)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:44:14.923

您的需求定义有点模糊，但您可以查看[CoverFlow](http://code.google.com/p/android-coverflow/)并根据您的需要进行调整。

要缩放图像，您可以使用[ImageViewZoom](https://github.com/sephiroth74/ImageViewZoom)。

# php - imap php中的唯一ID

> ID：12595062
> 
> 赞同：1
> 
> 时间：2012-09-26T05:28:46.610
> 
> 标签：php, codeigniter, email, imap

我用来获取来自和`imap_search`的电子邮件列表。`INBOX``SENT ITEMS`

我有一个首先显示邮件标题的网格，当用户单击一行时，我想显示整个内容，如正文、附件等。

为了实现这一点，每条消息都应该有一个唯一的 ID。

我如何获得消息的唯一 ID，我知道该`SE_UID`选项将返回唯一 ID，但唯一 ID 仅在一个邮箱中，

我可以在 INBOX 和 SENT ITEMS 上看到相同的 ID。

请帮我。

**注意：我将 Codeigniter 与 Peeker 库一起使用。**

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:22:21.107

您可以使用电子邮件的 UID 对任何邮箱（如 INBOX 和 SENT）中的任何电子邮件进行操作。

您可以在本文中找到更多信息[http://phpmaster.com/exploring-phps-imap-library-1/](http://phpmaster.com/exploring-phps-imap-library-1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:35:15.423

完全唯一的 ID 由邮箱名称（例如`INBOX`）、`UIDVALIDITY`选择邮箱时返回的信息和消息组成`UID`。

您需要选择相关邮箱并提供正确的 UID 以获取正确的邮件。UID在不同邮箱之间*不是唯一的。*

# c# - 在不同形式的dataGridView中添加列和行

> ID：12595066
> 
> 赞同：2
> 
> 时间：2012-09-26T05:29:07.037
> 
> 标签：c#, winforms, c#-4.0, datagridview

我是 C# 的初学者，我有两种形式`mainForm`和`subForm`. `mainForm`有`DataGridView1`和`subForm`有`richTextBox1`。_

我想通过 FormClosingEvent 添加`DataGridView1`行`subForm`和*列*

我将`DataGridView1`修饰符设为*public*。它以智能方式显示，`subForm`但也许我做错了什么。

我在我的`subForm` *FormClosingEvent*中尝试了下面的代码，但我看不到我的`DataGridView1`.

```
 if (richTextBox1.Text != "")
        {
            mainForm newMainForm = new mainForm();
            newMainForm.dataGridView1.ColumnCount = 3;
            newMainForm.dataGridView1.Columns[0].Name = "Product ID";
            newMainForm.dataGridView1.Columns[1].Name = "Product Name";
            newMainForm.dataGridView1.Columns[2].Name = "Product Price";

            string[] row = new string[] { "1", "Product 1", "1000" };
            newMainForm.dataGridView1.Rows.Add(row);
            row = new string[] { "2", "Product 2", "2000" };
            newMainForm.dataGridView1.Rows.Add(row);
            row = new string[] { "3", "Product 3", "3000" };
            newMainForm.dataGridView1.Rows.Add(row);
            row = new string[] { "4", "Product 4", "4000" };
            newMainForm.dataGridView1.Rows.Add(row);               
        } 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T05:53:04.800

因此，假设您的 mainForm 打开了您的 subForm：

```
subForm sub = new SubForm();
sub.Show(); // or however you have done it 
```

在您的示例中，您需要 subForm 能够更改主窗体上的某些内容，因此，在 subForm 上创建一个 Public/Internal 方法，类似于：

```
private mainForm _parent;

internal void RegisterParent(mainForm form)
{
    // error handling of course, make sure form is not null, or you don't already have a parent
    this._parent = form;
} 
```

在 mainform 之后`subForm.Show()`，添加如下内容：

```
sub.RegisterParent(this); 
```

现在您的 subForm 可以操作正确的 mainform*实例*：

```
if (richTextBox1.Text != "")
    {
        _parent.dataGridView1.ColumnCount = 3;
        _parent.dataGridView1.Columns[0].Name = "Product ID";
        _parent.dataGridView1.Columns[1].Name = "Product Name";
        _parent.dataGridView1.Columns[2].Name = "Product Price";

        string[] row = new string[] { "1", "Product 1", "1000" };
        _parent.dataGridView1.Rows.Add(row);
        row = new string[] { "2", "Product 2", "2000" };
        _parent.dataGridView1.Rows.Add(row);
        row = new string[] { "3", "Product 3", "3000" };
        _parent.dataGridView1.Rows.Add(row);
        row = new string[] { "4", "Product 4", "4000" };
        _parent.dataGridView1.Rows.Add(row);               
    } 
```

我希望这会有所帮助！

# jquery - 根据菜单选择的Jquery替换选项

> ID：12595067
> 
> 赞同：0
> 
> 时间：2012-09-26T05:29:29.583
> 
> 标签：jquery, replace, option

我有以下代码：

```
<select name="picker" id="picker">
    <option value="solution 1">solution 1</option>
    <option value="solution 2">solution 2</option>
</select>

<select name="option_loader" id="option_loader">
</select> 
```

我想要的是：

选择“解决方案1”时，“ option_loader”显示下面的前4个选项，当用户选择“解决方案2”时，“ option_loader”替换并显示下面的最后4个选项。

```
<option value="22oxcas0vrrnhji">22oxcas0vrrnhji</option>
<option value="4mx91psjki">4mx91psjki</option>
<option value="sxlwoprc03nm">sxlwoprc03nm</option>
<option value="gfjiopu23rdio">gfjiopu23rdio</option>

<option value="su3o2ppc">su3o2ppc</option>
<option value="234niovfsd">234niovfsd</option>
<option value="se08fi9jvonaa">se08fi9jvonaa</option>
<option value="asldkj3i09">asldkj3i09</option> 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:36:54.333

在第一个下拉列表中，`onchange`您可以使用事件更新第二个下拉列表值。

例如，这是一个演示，[http://jsfiddle.net/muthkum/Cb9D7/1/](http://jsfiddle.net/muthkum/Cb9D7/1/)

示例使用您的`select`值。我希望你能有所了解。

```
$('#picker').change(function(){
    switch($(this).val()){
      case 'solution 1':
         $('#option_loader').html('<option value="22oxcas0vrrnhji">22oxcas0vrrnhji</option><option value="4mx91psjki">4mx91psjki</option><option value="sxlwoprc03nm">sxlwoprc03nm</option><option value="gfjiopu23rdio">gfjiopu23rdio</option>');
         break;
      case 'solution 2':
         $('#option_loader').html('<option value="su3o2ppc">su3o2ppc</option><option value="234niovfsd">234niovfsd</option><option value="se08fi9jvonaa">se08fi9jvonaa</option><option value="asldkj3i09">asldkj3i09</option>');
         break;        
    }        
})

$('#picker').change();//automatically call to change the initial selection 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T05:40:25.757

```
var opt = ['<option value="22oxcas0vrrnhji">22oxcas0vrrnhji</option><option value="4mx91psjki">4mx91psjki</option><option value="sxlwoprc03nm">sxlwoprc03nm</option><option value="gfjiopu23rdio">gfjiopu23rdio</option>', '<option value="su3o2ppc">su3o2ppc</option><option value="234niovfsd">234niovfsd</option><option value="se08fi9jvonaa">se08fi9jvonaa</option><option value="asldkj3i09">asldkj3i09</option>']

$('#picker').change(function(){
    $('#option_loader').html(opt[this.selectedIndex])
}).change() 
```

[http://jsfiddle.net/B8znC/](http://jsfiddle.net/B8znC/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T05:39:40.457

检查这个[小提琴](http://jsfiddle.net/sushanth009/ukLvE/1/)

```
$(function() {
    PopulateDropDown();
    $('#picker').on('change' , function() {
         PopulateDropDown();
    });
});

function PopulateDropDown(){
    var val = $('#picker').val();
    $('#option_loader').empty().append( $('.' + val).html());
}

    <select name="picker" id="picker">
   <option value="solution1">solution 1</option>
   <option value="solution2">solution 2</option>
</select>
<select name="option_loader" id="option_loader">
</select>
<div class="options">
   <div class="solution1">
      <option value="22oxcas0vrrnhji">22oxcas0vrrnhji</option>
      <option value="4mx91psjki">4mx91psjki</option>
      <option value="sxlwoprc03nm">sxlwoprc03nm</option>
      <option value="gfjiopu23rdio">gfjiopu23rdio</option>
   </div>
   <div class="solution2">
      <option value="su3o2ppc">su3o2ppc</option>
      <option value="234niovfsd">234niovfsd</option>
      <option value="se08fi9jvonaa">se08fi9jvonaa</option>
      <option value="asldkj3i09">asldkj3i09</option>
   </div>
</div> 
```

​</p>

​</p>

# ruby-on-rails - 如何在 Rails 表单中包含 has_many 关系？

> ID：12595070
> 
> 赞同：0
> 
> 时间：2012-09-26T05:29:33.567
> 
> 标签：ruby-on-rails, ruby

我有两个模型，`Artist`它们`User`通过第三个模型连接，`ArtistMembership`.

从编辑/新艺术家表单中，我希望能够在该艺术家的现有 ArtistMembership 关系中编辑任何用户的角色，删除 ArtistMemberships，并添加新的 AtistMembership 关系，其中包括用户和：role。

这是我的艺术家模型：

```
class Artist < ActiveRecord::Base
has_many :artist_memberships, foreign_key: "artist_id", dependent: :destroy

attr_accessible :bio, :created_at, :email, :location, :name, :updated_at, :website, :pic
accepts_nested_attributes_for :artist_memberships, :allow_destroy => :true
...
end 
```

这是我的用户模型：

```
class User < ActiveRecord::Base
...
has_many :artist_memberships, foreign_key: "user_id"
...
end 
```

这是我的 ArtistMembership 模型：

```
class ArtistMembership < ActiveRecord::Base
    belongs_to :artist, class_name: "Artist"
    belongs_to :user, class_name: "User"

  attr_accessible :artist_id, :created_at, :role, :user_id
end 
```

如果我也有一个 _form.hml.erb，用于编辑开始的艺术家：

```
<%= form_for @artist do |artist_form| %>
  <div class="field">
    <%= artist_form.label :name %>
    <%= artist_form.text_field :name %>
  </div>
..
  <div class="actions">
    <%= artist_form.submit %>
  </div>
<% end %> 
```

如何为上述功能创建相关的 ArtistMembership 表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:07:58.603

也许您正在寻找这种方法。 [http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)

请参阅“一对多”部分。

但如果我是你，我宁愿使用“嵌套资源”技术。 [http://guides.rubyonrails.org/routing.html#nested-resources](http://guides.rubyonrails.org/routing.html#nested-resources)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:16:58.333

可能这对您有帮助，请参阅此[field_for](http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for)

你可以使用[accepts_nested_attributes_for(*attr_names)](http://railscasts.com/episodes/196-nested-model-form-part-1)

# php - 翻译月份名称的最佳方法

> ID：12595073
> 
> 赞同：7
> 
> 时间：2012-09-26T05:30:06.843
> 
> 标签：php, codeigniter, time

我正在使用 Codeigniter！翻译月份名称的最佳方法是什么。我在 mysql 时间戳中有一个日期，如下所示： `2012-09-22 11:21:53`
我可以`'September 22, 2012'`使用 php`date()`函数将其转换为。我想重命名`'September'`为`'Sentýabr'`. 可以 set_locale() 函数可以做到这一点。顺便说一句`Turkmen Language`。谢谢你。

* * *

好的，我创建了一些 php 文件来单独检查它，如下所示：

酷.php

```
<?php setlocale(LC_ALL,'ru_RU');
echo strftime('%B',time());
?> 
```

九月回归。可能是什么问题。

* * *

我有

```
 /* Set locale to Turkmen */
  setlocale(LC_ALL, 'tk'); 
```

和

```
 echo strftime( '%B',time()); 
```

结果：9 月返回

我需要它以我的语言返回九月

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T05:42:48.743

您可以`str_ireplace()`按相同的顺序将 with 数组用于英文名称，以及等效于土库曼语名称。

像这样的东西：

```
$nmeng = array('january', 'february', ..);
$nmtur = array('ocak', 'subat', ...);
$dt = 'September 22, 2012';
$dt = str_ireplace($nmeng, $nmtur, $dt); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-26T05:35:09.603

使用`setlocale()`和[strftime](http://php.net/manual/en/function.strftime.php) ...

在 linux 上运行`$ locale -a`以确定是否安装了所需的语言环境并获取其名称值字符串。

```
setlocale(LC_TIME, 'ru_RU');
echo strftime('%B %e, %Y', strtotime('2012-09-22 11:21:53')); 
```

***编辑：***

如果您使用 Windows 服务器，则更`%e`改为`%d`（`%e`在 Windows 中不起作用）。

```
echo strftime('%B %d, %Y', strtotime('2012-09-22 11:21:53')); 
```

对于 Windows，*[请在此处查看支持的格式。](http://msdn.microsoft.com/en-us/library/fe06s4ak.aspx)*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T06:15:32.467

翻译月份名称以将它们放入语言文件并调用它的最佳方法，如阅读此处如何在 codeigniter[语言库](http://codeigniter.com/user_guide/libraries/language.html)中使用语言文件，如果您有双语网站，您可以在项目中一遍又一遍地使用。

```
$this->lang->line('September');

your english language file 
$lang['january'] = 'january';
$lang['february'] = 'february';
...
$lang['September'] = 'September';

your turkish language file 

$lang['january'] = 'ocak';
$lang['february'] = 'subat';
...
$lang['September'] = 'Eylül'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T05:43:48.857

将此添加到顶部附近的 index.php 文件中：

```
/* Set locale to Turkmen */
setlocale(LC_ALL, 'tk'); 
```

这方面的文档在这里： http: [//php.net/manual/en/function.setlocale.php](http://php.net/manual/en/function.setlocale.php)

此外，@xdazz 是正确的，您应该将它与[strftime](http://php.net/manual/en/function.strftime.php "时间")而不是 date() 函数结合使用。

您可能需要确认“tk”用于土库曼。

# dynamics-crm - 在自定义工作流活动中使用 PLINQ/TPL

> ID：12595075
> 
> 赞同：0
> 
> 时间：2012-09-26T05:30:26.013
> 
> 标签：dynamics-crm, dynamics-crm-2011

我定义了一个工作流，以在更改自定义实体上的字段时执行。工作流调用一个自定义活动，该活动反过来使用 PLINQ 来处理一堆记录。自定义活动调用的代码如下所示：

> ```
> protected override void Execute(CodeActivityContext executionContext)
> {
>   // Get the context service.
>   IWorkflowContext context = executionContext.GetExtension<IWorkflowContext>();
>   IOrganizationServiceFactory serviceFactory =     
>   executionContext.GetExtension<IOrganizationServiceFactory>(); 
> ```

```
 // Use the context service to create an instance of IOrganizationService.
 IOrganizationService _orgService = serviceFactory.CreateOrganizationService  
 (context.InitiatingUserId);
     int pagesize = 2000;
     // use FetchXML aggregate functions to get total count of the number of record to process
     // Reference: http://msdn.microsoft.com/en-us/library/gg309565.aspx
     int totalcount = GetTotalCount();

   int totalPages = (int)Math.Ceiling((double)totalcount / (double)pagesize);           
    try
     {
         Parallel.For(1, 
                     totalPages + 1, 
                    () => new MyOrgserviceContext(_orgService), 
            (pageIndex, state, ctx) =>
             {

                var items = ctx.myEntitySet.Skip((pageIndex - 1) * pagesize).Take(pagesize);
                 foreach(var item in items)
                {
                    //process item as needed 
                   ctx.SaveChanges();
                }
                 return ctx;
             },
             ctx => ctx.Dispose()
             );
     }
     catch (AggregateException ex)
     {
        //handle as needed
     }
 } 
```

我注意到以下错误是一个聚合异常（InnerExceptions 中多次出现相同的错误）：

**“在不应处置时遇到已处置的 CrmDbConnection”**

根据我的阅读： [CRM 2011 工作流程“无效指针”错误](https://stackoverflow.com/questions/9265074/crm-2011-workflow-invalid-pointer-error)

当您具有类级别变量时，可能会发生这种情况，因为工作流运行时最终可能会在多个工作流调用之间共享同一个类实例。这显然不是这里的情况，而且我没有在多个记录上运行此工作流的多个实例。在任何时间点都只运行此工作流的一个实例。

上面的代码在工作流主机 (CRMAsyncService) 之外提取和托管时可以正常工作。

这是使用 CRM 2011 汇总 10。

任何见解都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:50:59.493

我不确定，但这可能只是因为你正在处理你的连接，在`ctx.Dispose()`。

由于每个`new MyOrgservicecontext(_orgService)`对象都使用相同的`IOrganizationService`，我怀疑第一个对象何时`MyOrgservicecontext`被释放，然后所有其他`MyOrgservicecontext`对象都有一个已释放的连接 - 这意味着它们的服务调用将失败并抛出异常。

我建议删除 dispose 以查看是否可以解决问题。

# c# - 如何在 ASP.NET MVC 中使用 Active Directory

> ID：12595077
> 
> 赞同：0
> 
> 时间：2012-09-26T05:30:32.747
> 
> 标签：c#, asp.net-mvc, active-directory

很抱歉，我正在创建已经有答案的问题，但我不明白。

我需要一个使用 AD 并使用用户角色的简单应用程序。

首先是我在获取连接字符串时遇到的问题。我得到了一个用户，并说它是这样连接的：

```
LDAP://CN=User_1,OU=Test,OU=ADTestOU,DC=tv-tel,DC=local 
```

放入`web.config`什么？

```
 <connectionStrings>
    <add name="ADConnectionString" connectionString="LDAP://CN=User_1,OU=Test,OU=ADTestOU,DC=tv-tel,DC=local" />
  </connectionStrings>
  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <!--Make sure you have fomrs authentication enabled.-->
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <authorization>
      <deny users="?"/>
      <allow users="*"/>
    </authorization>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <profile defaultProvider="DefaultProfileProvider">
      <providers>
        <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </profile>
    <membership defaultProvider="MyADMembershipProvider">
      <providers>
        <add
        name="MyADMembershipProvider"
        type="System.Web.Security.ActiveDirectoryMembershipProvider, System.Web, Version=2.0.0.0,Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
        connectionStringName="ADConnectionString"
        connectionProtection="Secure"
        connectionUsername="user"
        connectionPassword="pwd"
        attributeMapUsername="sAMAccountName"
        enableSearchMethods="true"
        attributeMapEmail="mail"
/>
      </providers>
    </membership>

    <roleManager defaultProvider="DefaultRoleProvider">
      <providers>
        <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </roleManager>
    <sessionState mode="InProc" customProvider="DefaultSessionProvider">
      <providers>
        <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" />
      </providers>
    </sessionState>
  </system.web> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:44:34.333

如果要在 AD 中使用 Windows 身份验证，则需要`<authentication mode="windows" />`在 web.config 中使用，而不是`forms`.

尝试使用 Intranet Application 模板创建一个新的 ASP.NET MVC 3 应用程序，它会为您设置好它。

还要确保您已正确配置 IIS 并启用 Windows 身份验证。当您使用 Intranet 模板创建新项目时，它会为您生成一个文本文件，说明如何逐步进行设置。

# java - 带委托的协变集合

> ID：12595078
> 
> 赞同：3
> 
> 时间：2012-09-26T05:30:39.223
> 
> 标签：java, generics, collections

**我的（蒸馏）场景：**

假设我有一个名为 的接口`Interface`和一个`class Foo implements Interface`.

我还有一个通用的可迭代“结果”类，除其他外，它委托给一个集合来做可迭代的事情。Result 类执行与问题无关的其他内容。所以：

```
class Result<E> implements Iterable<E> {

    private Collection<E> delegate;

    public Result(Collection<E> delegate) {
        this.delegate = delegate;
    }

    public Iterator<E> iterator() {
        return delegate.iterator();
    }

    // ... other irrelevant stuff.
} 
```

传入的集合`Result`可能很大，而`Result`对象的用户可能会在几个元素后停止迭代（但我无法控制有多少）。

然后，我有另一个类，我们称之为Query，它内部保存了一个`Foo`s的集合，但需要能够返回Result。它目前看起来像这样：

```
class Query {
    private Collection<Foo> data;

    public Result<Interface> getAllData() {
        return new Result<Interface>(new ArrayList<Interface>(data));
    }

    // EDIT: Not all Result objects are of Interfaces.
    public Result<SomeUnrelatedInterface> getSomeOtherData() {
        return ...;
    }
} 
```

因此`getAllData`，获取数据的副本（作为`ArrayList<Interface>`），并将其传递给新`Result`的进行委托。这对我来说并不理想，因为该集合可能很大，而结果的接收者可能只需要前几个结果。

**现在的问题：**

谁能想到改变事情的方法，这样我就不需要拿那个具体集合的副本了？

理想情况下，我希望`Result`s 构造函数是`public Result(Collection<? extends E> delegate)`（就像大多数`Collection`s 一样），并让它以某种方式将该集合适应`Collection<E>`，但我无法弄清楚它可能是什么样子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:15:33.930

以下变体适合您吗？

```
class Result<E extends Interface>
 implements Iterable<E> {

    private Collection<E> delegate;

    public Result(Collection<E> delegate) {
        this.delegate = delegate;
    }
    public Iterator<E> iterator() {
        return delegate.iterator();
    }
}
class Query {
    private Collection<Foo> data;

    public Result<? extends Interface> getAllData() {
        return new Result<Foo>(data);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:11:21.857

如您所知，将 a`Collection<? extends E>`变为 a的危险`Collection<E>`在于，现在调用者可以将任何`E`内容放入其中。所以你必须排除这一点，你会没事的。`Collections.unmodifiableCollection(Collection)`这样做，它甚至会将结果呈现为`Collection<E>`.

**编辑**：

```
Collection<? extends Interface> foos = new ArrayList<Foo>();
Collection<Interface> adapted = Collections.unmodifiableCollection(foos); 
```

# wpf - 如何为每个选项卡使用不同的 UI 向选项卡控件添加关闭按钮？

> ID：12595079
> 
> 赞同：0
> 
> 时间：2012-09-26T05:30:39.530
> 
> 标签：wpf, visual-studio-2010, wpf-controls, contextmenu

如何向我的选项卡控件添加关闭按钮？这就是我构建和运行后我的应用程序的样子。 ![构建并运行后](../Images/a68cca0cdd5307f3a0c2744eb65e4e8b.png)

如果我选择菜单 1.1，在菜单 2.2 之后它将显示如下。 ![选择菜单 1.1，继续菜单 2.2](../Images/56fcca3208ce11521d6b0478c5987139.png)

这是我的用户控件的样子。我有两个用户控件，一个用于菜单 1.1（左），另一个用于菜单 1.2（右）。

![菜单 1.1 的用户控件](../Images/8d3e741d06b0cd4e9322a2887fc18365.png) ![菜单 2.1 的用户控件](../Images/241ed9ebc741c916919f7a9a3d714d12.png)

我的问题是：1.是否可以为每个选项卡添加关闭按钮？2\. 如果是，我该怎么做？

我已经关注了这个[链接](http://www.codeproject.com/Articles/84213/How-to-add-a-Close-button-to-a-WPF-TabItem)，但仍然无法做到。如果您添加小标题或长标题，该链接将使用相同的 UI。但现在每个选项卡都有不同的 UI。我该如何处理关闭按钮？谢谢。

这是我的xaml。

```
 <ribbon:Ribbon x:Name="Ribbon">
        <ribbon:Ribbon.ApplicationMenu>
            <ribbon:RibbonApplicationMenu SmallImageSource="Images\SmallIcon.png">
                <ribbon:RibbonApplicationSplitMenuItem Header="Menu 1" 
                        ImageSource="Images\LargeIcon.png" Name="RibbonSplit">
                    <ribbon:RibbonApplicationMenuItem Header="Menu 1.1"
                                                  x:Name="RibbonMenu1"
                                                  ImageSource="Images\LargeIcon.png" Click="RibbonMenu1_Click"/>
                </ribbon:RibbonApplicationSplitMenuItem>

                <ribbon:RibbonApplicationSplitMenuItem Header="Menu 2" ImageSource="Images\LargeIcon.png">
                    <ribbon:RibbonApplicationMenuItem Header="Menu 2.1"
                                                  x:Name="RibbonMenu2"
                                                  ImageSource="Images\LargeIcon.png" Click="RibbonMenu2_Click"/>
                </ribbon:RibbonApplicationSplitMenuItem>

            </ribbon:RibbonApplicationMenu>
        </ribbon:Ribbon.ApplicationMenu>

    </ribbon:Ribbon>
    <TabControl Grid.Row="1" Height= "394" Name="TabMenu" VerticalAlignment="Top">

    </TabControl> 
```

这是我如何添加标签的代码，

```
tab2 tb1 = new tab1(); //menu1.1
AddTab(tb1); 
```

这是我的 AddTab 方法，

```
if (_mdiChildren.ContainsKey(mdiChild.UniqueTabName))
        {
            //user control is already opened in tab. 
            //So set focus to the tab item where the control hosted
            foreach (object item in TabMenu.Items)
            {
                TabItem ti = (TabItem)item;
                if (ti.Name == mdiChild.UniqueTabName)
                {
                    ti.Focus();
                    break;
                }
            }
        }
        else
        {
            //the control is not open in the tab item
            TabMenu.Visibility = Visibility.Visible;
            TabMenu.Width = this.ActualWidth;
            TabMenu.Height = this.ActualHeight;

            //((ITabbedMDI)mdiChild).CloseInitiated += new delClosed(CloseTab);

            //create a new tab item
            TabItem ti = new TabItem();
            //set the tab item's name to mdi child's unique name
            ti.Name = ((ITabbedMDI)mdiChild).UniqueTabName;
            //set the tab item's title to mdi child's title
            ti.Header = ((ITabbedMDI)mdiChild).Title;
            //set the content property of the tab item to mdi child
            ti.Content = mdiChild;
            ti.HorizontalContentAlignment = HorizontalAlignment.Stretch;
            ti.VerticalContentAlignment = VerticalAlignment.Top;
            //add the tab item to tab control
            TabMenu.Items.Add(ti);
            //set this tab as selected
            TabMenu.SelectedItem = ti;
            //add the mdi child's unique name in the open children's name list
            _mdiChildren.Add(((ITabbedMDI)mdiChild).UniqueTabName, ((ITabbedMDI)mdiChild).Title);

        }
         //* */
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:34:31.013

[在此处](http://geekswithblogs.net/kobush/archive/2007/04/08/CloseableTabItem.aspx)和[此处](http://www.codeproject.com/Articles/84213/How-to-add-a-Close-button-to-a-WPF-TabItem)查看这些自定义控件。

# html - Google Webfont 重音字符（变音符号）渲染

> ID：12595081
> 
> 赞同：0
> 
> 时间：2012-09-26T05:30:52.013
> 
> 标签：html, fonts, webfonts

像 Open Sans 和 Oswald 这样的谷歌网络字体在我的网站上看起来很奇怪。带有重音符号的字符不会出现在 open sans 字体中，而是出现在另一个字体系列中。奇怪的是，相同的文本在 Google Webfont 测试页上看起来没问题。此外，问题似乎只存在于某些浏览器上。最糟糕的是在 Opera 上。

![在此处输入图像描述](../Images/8dddeae59f08402d225873799d5bd5f0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:08:07.520

所以我想通了。它是包含文件夹的 chmod。我已将包含图像的文件夹设置为 755，现在可以使用。

# python - pyparsing：如何查找格式为 a + b = c 或 c = a + b 的字符串

> ID：12595083
> 
> 赞同：2
> 
> 时间：2012-09-26T05:31:03.743
> 
> 标签：python, bioinformatics, pyparsing

我有一个小型解析项目*，病理学家将他们的诊断记录在电子记录中。他们中的绝大多数使用“GLEASON SCORE: 3+4=7”的形式，但是，有很多关于它的即兴演奏。我不太明白如何应对的一个是“GLEASON SCORE: 7=3+4”

到目前为止，我的语法一直是

```
gleason = Group("GLEASON" + Optional("SCORE") + Optional("GRADE") + Optional("PATTERN") + Optional(":") + num("left") + "+" + num("right") + Optional("=") + Optional("total")) 
```

我尝试添加

```
... + Optional(":") + Optional(num("total")) + Optional("=") + ... 
```

在“left”变量之前，但它只找到丢失的记录，而不是所有记录。我需要搜索模式 A (a+b=c) 或模式 B (c=a+b)。我怎么能在pyparsing中做到这一点？

* * *

*   这与问题[Pyparsing: extract variable length, variable content, variable whitespace substring有关](https://stackoverflow.com/questions/10855951/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T06:14:04.347

不要使用 nums 和 '+'s 来滚动你自己的算术表达式，而是使用 pyparsing's`operatorPrecedence`轻松定义一个 4 函数算术表达式：

```
arith_expr = operatorPrecedence(num,
    [
    (oneOf('-'), 1, opAssoc.RIGHT),
    (oneOf('* /'), 2, opAssoc.LEFT),
    (oneOf('+ -'), 2, opAssoc.LEFT),
    ]) 
```

然后替换`num("left") + "+" + num("right") + Optional("=") + Optional(num)("total")`为：

```
arith_expr('lhs') + Optional('=' + arith_expr('rhs')) 
```

现在您将能够解析任何算术表达式，包括带有嵌套括号的表达式，而不仅仅是 'x+y=z' 类型的表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T05:57:13.437

```
>>> eqn = Word(alphas,exact=1)+"+"+Word(alphas,exact=1)+"="+Word(alphas,exact=1)

>>> eqn2 = Word(alphas,exact=1)+"="+Word(alphas,exact=1)+"+"+Word(alphas,exact=1
)
>>> equation = eqn|eqn2
>>> equation.parseString("A+b=c")
(['A', '+', 'b', '=', 'c'], {})
>>> equation.parseString("A=b+c")
(['A', '=', 'b', '+', 'c'], {})
>>> equation.parseString("A=b-c")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python26\lib\site-packages\pyparsing.py", line 1032, in parseString
    raise exc
pyparsing.ParseException: Expected "+" (at char 3), (line:1, col:4) 
```

# windows - Windows 上大文件的记事本样式加载

> ID：12595090
> 
> 赞同：0
> 
> 时间：2012-09-26T05:31:30.253
> 
> 标签：windows, file-io, notepad, file-locking

我注意到记事本可能需要很长时间才能加载一个看起来完全没有响应的大文件，但文件句柄在开始时似乎只在很短的时间内处于活动状态。一旦加载开始，另一个进程可以以独占共享模式打开文件，即[dwShareMode使用值 0](http://msdn.microsoft.com/en-us/library/windows/desktop/hh449422%28v=vs.85%29.aspx)

记事本如何继续使用关闭的手柄或它使用的任何魔法进行加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:22:32.437

没关系，我已经弄清楚记事本的作用。如果其他人需要，这是解决方案：

```
hFile = CreateFile("file", 0x80000000, 3, NULL, 3, 0x80, NULL);
hMap = CreateFileMapping(hFile, NULL, 2, sizeHigh, sizeLow, NULL);
ptr = MapViewOfFile(hMap, 4, 0, 0, size);
CloseHandle(hMap);
CloseHandle(hFile);

/* At this point the handles are closed so programs that try
   to get share exclusive on the file succeed but I still have
   a pointer for reading the memory myself */ 

UnmapViewOfFile(ptr); 
```

# mysql - MySQL查询：获取特定间隔的数据

> ID：12595096
> 
> 赞同：6
> 
> 时间：2012-09-26T05:31:48.763
> 
> 标签：mysql

我有一个带有一个日期时间列的 MySQL 表。我想防止 PHP 脚本获取大量数据。所以我正在寻找一个解决方案，一个 MySql 查询只选择距离为 1 分钟或其他的行。有没有简单的东西，或者我每次都必须用一个新的mysql查询编写一个for循环。

```
Example 
timestamp
2012-09-25 00:00:00-->
2012-09-25 00:00:50
2012-09-25 00:01:23
2012-09-25 00:01:30-->
2012-09-25 00:02:33
2012-09-25 00:02:40
2012-09-25 00:03:01-->i want those 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:26:49.227

尝试这个 ：

```
SELECT create_time
FROM timeTable
WHERE create_time
IN (

SELECT min( create_time )
FROM timeTable
GROUP BY FROM_UNIXTIME( UNIX_TIMESTAMP( create_time ) - MOD( UNIX_TIMESTAMP( create_time ) , 60 ) ); 
```

这个怎么运作 ：

i) 按四舍五入到间隔的日期时间对表格进行分组，此处为 1 分钟（60 秒）。

ii) 从每个组中获取第一行。

这可能是您数据的一个很好的抽样标准。这个查询可以在以下几点上进行优化：

i) 为 date = REQUIRED DATE 添加 where 子句，然后在小时 + 分钟而不是整个日期时间上执行其他操作。

ii) 如果您的时间间隔是 1 分钟，那么也可以尝试将时间戳或 date_format 的子字符串四舍五入到最接近的分钟。

例如。

```
SELECT create_time
FROM timeTable
WHERE create_time
IN (

SELECT min( create_time )
FROM timeTable
GROUP BY DATE_FORMAT( `create_time` , 'Y-M-D %H:%i' )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:06:59.850

**尝试这个**

```
SET @time := '1000-01-01 00:00:00';
SET @interval := 60;

SELECT colDate
FROM table
WHERE TIMESTAMPDIFF( SECOND, @time, colDate ) >= @interval
    AND @time := colDate 
```

**这个怎么运作。**

@interval 是当前和前一个 colDate 之间所需的时间差。TIMESTAMPDIFF 中的第一个参数确定间隔将使用的时间单位。例如：秒、分、小时、日、周、月、季度或年。

@time 跟踪前一个 colDate，并将其与当前行进行比较。如果前一个 colDate 和当前 colDate 之间的差异等于或大于间隔，则将其包括在内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T05:39:33.080

`WHERE timestamp LIKE '%:30:00%'`每 30 秒就会得到你..

但这只有在您有统一的条目时才有效..如果您的时间戳不是全部均匀结束..您需要让我们知道。

**编辑**

我想你可能正在寻找这个：

[你如何从mysql中选择每n行](https://stackoverflow.com/questions/858746/how-do-you-select-every-n-th-row-from-mysql)

# java - java.lang.ClassCastException：java.util.HashMap 不能转换为 java.lang.Comparable

> ID：12595097
> 
> 赞同：4
> 
> 时间：2012-09-26T05:31:56.683
> 
> 标签：java, sorting, arraylist, hashmap

我试图对我的 ArrayList 进行排序。

```
java.util.ArrayList arList= new java.util.ArrayList();  
   arList=getList();    
   java.util.Collections.sort(arList); 
```

我的 getList() 函数在这里

```
public ArrayList getList() throws Exception
{
ArrayList listItems = new ArrayList();
//Query executing here..............!
            while (rs.next()) 
                {
                HashMap hashList = new HashMap();
                hashList.put("name",rs.getString(1));
                hashList.put("id",rs.getBigDecimal(2));
                listItems.add(hashList);
                }
          return listItems;
} 
```

但我面临错误：**java.lang.ClassCastException: java.util.HashMap 无法转换为 java.lang.Comparable**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T05:42:20.060

*第一件事*——

```
java.util.ArrayList arList= new java.util.ArrayList();  
arList=getList(); 
```

您创建第一个实例是不必要的。

*第二件事*——

```
ArrayList listItems = new ArrayList(); 
```

此列表包含列表 HashMap 并且 HashMap 没有实现 Comparable。

```
java.util.Collections.sort(arList);

public static <T extends Comparable<? super T>> void sort(List<T> list) 
```

List contains( `T`) 必须扩展 Comparable。

这就是为什么它填充`java.lang.ClassCastException: java.util.HashMap cannot be cast to java.lang.Comparable`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T05:41:44.840

为了使用实现此接口**Comparable**`Collections.sort()`的对象的列表（和数组）。[http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-04T06:23:38.920

这样您就可以实现排序地图

```
public class MapUsingSort {
public static void main(String[] args) {

Map<Integer, String> abc = new HashMap<>();
abc.put(3, "a");
abc.put(6, "b");
abc.put(1, "c");
abc.put(4, "h");
abc.put(10, "k");
abc.put(9, "x");

 // Map is stored in ArrayList
List<Entry<Integer,String>> sortedEntries = new ArrayList<Entry<Integer,String>>(abc.entrySet());

Collections.sort(sortedEntries, new Comparator<Entry<Integer,String>>() {
    @Override
    public int compare(Entry<Integer, String> a, Entry<Integer, String> b) 
    {
        //Sorting is done here make changes as per your need 
        // swap a and b for descending order 

        return a.getKey().compareTo(b.getKey());   
    }
   });

for (Object object : sortedEntries) {

    //print your data in your own way
    System.out.println((Map.Entry)object);
   }
  }
} 
```

有关详细信息，请访问[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

*

> 这是我在stackOverflow上的第一个答案，希望对您有所帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T05:38:35.033

首先，您的代码看起来很奇怪，您在循环的每次迭代中将一个新创建的 HashMap 对象添加到您的列表中。无论如何，我不会讨论它。也许您应该像这样指定您的 ArrayList：`ArrayList<HashMap>` 但这还不够。如果您有一个特定类型的列表并想要对它们进行排序，那么您的**类型**（在本例中为 HashMap）应该实现`Comparable`接口。HashMap 没有实现`Comparable`接口。阅读 API：[http ://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

我猜你应该实现自己的**Comparator**作为解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T05:38:53.193

检查此[链接](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)

> 列表中的所有元素都必须实现 Comparable 接口。此外，列表中的所有元素必须相互可比较（即，e1.compareTo(e2) 不得为列表中的任何元素 e1 和 e2 抛出 ClassCastException）。

这应该说明一切。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-26T05:39:20.730

当然，编译器错误试图以它无法比较的最佳方式向您传达您在`HashMaps`列表中的信息..

首先，您应该像这样将您的列表声明为通用列表：-

```
List<HashMap<String, String>> hashList = new ArrayList<>(); 
```

如果你想排序`List<HashMap>`，你需要有一个`Comparator`排序..你不能使用自然排序对其进行排序..因为你`HashMap`没有实现`Comparable`接口..

如果它们具有可比性，您只能比较两个实例。

*编辑：-嗯，我想你需要两个`Comparators`在这里..一个给你的`List`，一个给你`HashMap`的`List`..但我不太确定它是否会工作..

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-26T05:39:53.100

`Collections.sort(List<T>)`需要`T`类型的对象`Comparable`。这意味着任何实现 Comparable 接口的对象都可以工作。参考[这个]（ [http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)）：

```
 public static <T extends Comparable<? super T>> void sort(List<T> list) 
```

在您的情况下，您正在尝试对`ArrayList`包含 a 的 a进行排序`HashMap`，它不实现`Comparable`接口。所以。代码失败。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-26T05:39:57.160

HashMap 没有实现 Comparable 接口 (http://docs.oracle.com/javase/6/docs/api/)。据我所知，Collections.sort()-Method 只能对自然值进行排序。但是您可以编写自己的比较器并根据需要对列表进行排序。Collections.sort() 方法因此被重载

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-26T05:40:49.023

对于要排序的东西，它必须实现[Comparable](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)接口，而[HashMap](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)没有。

结果，当您尝试对 HashMap 列表进行排序时，您的代码将失败。

如果您真的需要能够比较 HashMap，您可以创建自己的 HashMap，如下所示：

```
public class MyHashMap<K,V> extends HashMap<K, V> implements Comparable<HashMap<K,V>>
{
    ...
    public int compareTo(HashMap<K,V> comparer)
    {
        ...
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-09-26T05:47:31.787

是的，因为 `java.util.Collections.sort(arList);` **arList**包含`HashMap hashList = new HashMap();` 不幸的是 hashMap 没有实现，`Comparable or Comparator interface.` 而**Collections.sort()**方法将在实现上排序

```
 Comparable or Comparator interface. 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-09-26T05:42:14.407

猜猜错误发生在 Collections.sort() 线上。

如果要使用排序，列表中的对象必须是 Comparable。否则java将如何对其进行排序？

HashMap 是不可比较的。您可以扩展 HashMap 并实现 Comparable 接口。**

# javascript - 如何在第一个 nextSibling 之后获得 nextSibling？

> ID：12595100
> 
> 赞同：0
> 
> 时间：2012-09-26T05:32:02.967
> 
> 标签：javascript

我们可以运行这段代码

```
str.parentNode.nextSibling.tagName 
```

并获得相应的名称。我们需要的是`nextSibling`在这之后`nextSibling`所以我们尝试了这个

```
str.parentNode.childNodes[3].tagName 
```

不管用？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T05:36:49.607

`childNodes[3]`将返回 的第四个孩子`parentNode`，而不是它的第二个下一个兄弟。

要获取该节点，您可以申请`nextSibling`两次：

```
var tagName = str.parentNode.nextSibling.nextSibling.tagName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:16:10.000

请注意，一个元素`nextSibling`可能是一个文本节点，它没有*tagName*属性，或者可能根本不存在，在这种情况下`nextSibling`会存在`undefined`并且尝试访问其`tagName`属性将引发错误。

因此，您可能想要执行以下操作：

```
var nextSibling = getNextElementSibling(str.parentNode);
var tagName = nextSibling? nextSibling.tagName : ''; // or maybe undefined  

if (tagName) {
  // do stuff

} else {
  // no element sibling was found
} 
```

`getNextElementSibling`功能类似于：

```
function getNextElementSibling(node) {

  while (node && (node = node.nextSibling)) {
    if (node.nodeType == 1) {
      return node;
    }
  }
  // return undefined
} 
```

# arrays - 数组内插值

> ID：12595101
> 
> 赞同：3
> 
> 时间：2012-09-26T05:32:15.067
> 
> 标签：arrays, perl

当我试图打印数组中的特定元素时，我错误地在 [] 中输入了相同数组的名称作为元素并得到了一些输出，如图所示。我认为它正在获取数组的大小并打印该数量的字符，输出证明这是错误的。

```
@array = (0..10, 12);

print "@array[@array]"; 
```

印刷

```
 Use of uninitialized value in join or string at
 /home/VAR121/Program/Practise_Perl/Arrays.pl line 9.
 0 1 2 3 4 5 6 7 8 9 10 
```

我提前了一步，编辑了如下所示的代码

```
print "@array[@array[@array]]";

output as: `0 1 2 3 4 5 6 7 8 9 10 0`  Use of uninitialized value in join or string at
 /home/VAR121/Program/Practise_Perl/Arrays.pl line 9. 
```

现在我尝试在第二个数组中放入一个数字，而不是再次给出如下数组名称。

```
print "@array[@array[1,2,3]]"; 
```

输出为

```
 1 2 3 
```

但这次没有警告信息。

它试图打印什么？以及这种行为背后的原因是什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T05:43:11.757

您正在创建一个数组切片。首先了解您的数组包含元素 0、1、2、3、4、5、6、7、8、9、10、12。

总共有 12 个元素（没有值 11，但在索引 11 处存储的是值 12）。

现在，当您使用此构造时：`@array[@array]`您正在获取一个切片，并请求存储在索引 0、1、2、3、4、5、6、7、8、9、10 和 12 中的值。没有元素数组中的索引为 12。第十一元素具有值“12”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T05:44:00.193

`@array[]`是数组切片表示法。例如：

`my @array = (qw/apple banana cucumber date/)`

`@array[1,2]`将返回 (banana, cucumber) 列表（@array 的索引 1 和索引 2）。

现在，`@array[@array]`尝试获取内部@array 的值并将它们用作外部@array 的索引。在您的示例中，@array[@array] 等效于 @array[0..10, 12]。由于内部数组的值之一是 12，而外部数组没有索引 12，因此您会收到未定义值警告。

# ssis - 在 SSIS 工具箱中注册自定义转换

> ID：12595109
> 
> 赞同：0
> 
> 时间：2012-09-26T05:33:32.873
> 
> 标签：ssis, sql-server-2012-datatools

在 VS 2010 中，您将如何向工具箱注册/添加自定义转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:25:23.167

在 SSIS 安装下的默认 Toolbar 文件夹中添加自定义组件的 *.dll 文件，然后在 SSIS 项目窗口中的工具栏上单击鼠标右键。

然后您必须选择项目并选择粘贴在文件夹中的 *.dll。

[http://bennyaustin.wordpress.com/2009/06/30/steps-to-build-and-deploy-custom-ssis-components/](http://bennyaustin.wordpress.com/2009/06/30/steps-to-build-and-deploy-custom-ssis-components/)

此链接可能对屏幕截图有所帮助

请告知是否有用

# daemon - valgrind 是否适用于守护程序程序

> ID：12595111
> 
> 赞同：6
> 
> 时间：2012-09-26T05:33:48.340
> 
> 标签：daemon, valgrind

在前台程序上运行 valgrind 很容易。但是 valgrind 是否适用于守护程序并在执行后给出输出。我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T10:10:27.317

是的，valgrind 肯定适用于守护程序。

许多守护进程都有某种调试模式，例如`-X`切换到 apache，这将导致它们不会分叉或进入后台，在这种情况下，对它们进行 valgrind 的最简单方法可能是使用该模式，以便它们保持连接到终端。

在其他情况下，您仍然可以使用 valgrind，但您可能希望使用`--log-file`或其他日志记录选项之一将输出发送到合适的位置，并且您可能还需要`--trace-children`在守护进程时使 valgrind 跟随子进程叉子。

仅在程序结束时生成的输出（例如内存泄漏报告）在守护程序关闭时应该正常显示。

# jquery - 在特定元素上使用 .load 时如何仅检索元素的内容？

> ID：12595114
> 
> 赞同：-1
> 
> 时间：2012-09-26T05:34:23.117
> 
> 标签：jquery, ajax

例如，当我做这样的事情时：

```
$('#foo').load(window.location + ' #foo'); 
```

人们会期望上面提到的代码重新加载 div 的内容，其 id 为`foo`. 但不是。

但它实际上给了我什么，如果内容`foo`是：

```
<div id="foo">
  Foofoo
</div> 
```

它会给我：

```
<div id="foo">
  <div id="foo"><!-- Retrieved from the other page, don't want this -->
    Foofoo
  </div><!-- Don't want this either -->
</div> 
```

但我只想要 div 的内容`foo`。我不想添加任何子元素，所以我只是想知道是否可以将配置更改为仅加载内容，或者如果可能的话以其他方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:36:46.850

然后像这样尝试：

```
my_text = $('#foo').text();
$('#foo').load(window.location + my_text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:39:00.127

您要使用的是`.html()`.

```
$('#foo').load($('#foo').html()); 
```

# php - 如何在php中将数组字符串转换为数组？

> ID：12595115
> 
> 赞同：0
> 
> 时间：2012-09-26T05:34:25.583
> 
> 标签：php, arrays, string

这是我的字符串格式

```
[["1258765200","12350"],["1259370000","13000"],["1259974800","11840"]] 
```

我想要像这样的数组

```
array(
[0] => array([0] => 1258765200, [1] => 12350)
.... 
and so on....
) 
```

我不知道如何实现这一点，请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T05:36:57.790

使用 . 将字符串转换为 PHP 多维数组`json_decode($str, TRUE)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T05:37:52.027

用这个：`json_decode($string, true)`

# c - 指向 c 中的结构的指针

> ID：12595117
> 
> 赞同：1
> 
> 时间：2012-09-26T05:34:34.523
> 
> 标签：c

```
 struct TokenizerT_ {
    char* separators;
    char* tks;
    char* cur_pos;
    char* next;
  };

  typedef struct TokenizerT_ TokenizerT;

  TokenizerT *TKCreate(char *separators, char *ts) 
  { 
    TokenizerT *tokenizer;
    tokenizer = (TokenizerT*)malloc(sizeof(TokenizerT));

    //some manipulation here

    tokenizer->tks = (char*) malloc (strlen(str)* sizeof(char));
    tokenizer->tks=str;
    printf("size of tokenizer->tks is %zu\n", strlen(tokenizer->tks)); //this prints out the correct number (e.g. 7)
    return tokenizer;
  }

  int main(int argc, char **argv)
  {
    TokenizerT *tk = TKCreate(argv[1], argv[2]);
    printf("tk->tks: %zu\n", strlen(tk->tks)); //HOWEVER, this prints out the wrong number (e.g. 1)
  } 
```

从上面的代码可以看出，我正在使用指向结构的指针。出于某种原因，我没有收到 tk->tks 的正确长度。我无法理解这一点，因为它应该与我的 TKCreate 函数中的 tks 大小相同。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:41:21.183

我怀疑 str（其定义未显示在您的代码片段中）是 TKCreate() 中定义的局部变量。如果是这样，您将分配 tokenizer->tks 以具有 str 的值，该值指向 TKCreate() 范围内的正确字符串，但在退出 TKCreate() 时，堆栈内容（包括参数和局部变量）被释放并消除了，因此当您尝试在 TKCreate() 范围之外引用该指针时，所有赌注都已关闭。

一个合理的解决方法是动态地为 tokenizer->tks 分配存储，因此它在退出 TKCreate() 后仍然存在。我看到你通过调用 malloc 来做到这一点，但是你用 str 的显式赋值覆盖了它。相反，您应该通过以下方式将 str 的内容（使用 strcpy）复制到动态分配的内存中： strcpy(tokenizer->tks, str);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:49:40.240

您应该使用to[`strcpy`](http://www.cplusplus.com/reference/clibrary/cstring/strcpy/)的内容，因为当您使用分配运算符时，您会丢失给您的指针，造成内存泄漏并指向局部变量，该变量将在函数返回后被销毁。`str``tokenizer->tks``malloc``tokenizer->tks`

因此，该方法将是这样的：

```
tokenizer->tks = (char *)malloc ((strlen(str) + 1) * sizeof(char));
strcpy(tokenizer->tks, str); 
```

**另一件事：**

在你释放自己**之前**不要忘记。[`free`](http://www.cplusplus.com/reference/clibrary/cstdlib/free/) `->tks` **`tk`**

 **因此，在 printf 之后，您应该使用：

```
free(tk->tks);
free(tk); 
```

如果你的程序那么小，那么不释放结构和字符串（它在另一个内存位置而不是在结构的内存空间内，这就是为什么你必须释放它们）没有问题，因为在它执行之后，程序的无论如何，记忆都会被抹去。但是如果你打算在一个完整的大程序上实现这个功能，释放内存是一个很好的动作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:00:13.867

目前尚不清楚在哪里`str`定义，但如果它是函数中的局部变量，您的问题很可能超出范围，因此数据被覆盖。

您正在泄漏内存，因为您忘记使用`strcpy()`or`memcpy()`或`memmove()`将值复制到`str`分配的空间中，并且您用指针覆盖了指向新分配内存的唯一指针`str`。如果您复制，您将超出范围，因为您忘记为尾随的 null 和字符串分配足够的空间。您还应该检查分配是否成功。

伪代码：

```
tokenizer->tks = (char*) malloc (strlen(str)* sizeof(char));
tokenizer->tks = str; 
```

固定代码：

```
size_t len = strlen(str) + 1;
tokenizer->tks = (char *)malloc(len);
if (tokenizer->tks == 0)
    ...error handling...
memmove(tokenizer->tks, str, len); 
```

使用`memmove()`or`memcpy()`可以轻松胜过`strcpy()`（请参阅[为什么 Python 比 C 更快以](https://stackoverflow.com/questions/12429061/why-is-python-faster-than-c-when-concatenating-two-strings/)获取一些说明和时序）。有些人会因为在 上使用演员表而责备你（和我）`malloc()`；我理解他们为什么会这样争论，但我并不完全同意他们的观点（而且通常自己使用演员表）。因为`sizeof(char)`根据定义是 1，所以没有特别需要乘以它，尽管这样做也没有什么害处。**

# .net - 使用异步 .net 4.0 返回 DataTable

> ID：12595119
> 
> 赞同：6
> 
> 时间：2012-09-26T05:34:51.070
> 
> 标签：.net, c#-4.0, async-await

我有一个返回数据表的方法。我认为使用 .net 4.0 我可以异步逻辑并返回数据。但是此代码返回 null Datatable 对象。任何想法此代码有什么问题。

```
public DataTable GetData(string sql, string connectionName)
{
    DataTable dt = (DataTable)GetDataAsync(sql, connectionName).AsyncState;
    return dt;
}

private async Task<DataTable> GetDataAsync(string sql, string connectionName)
{
    return await TaskEx.Run(() => { return FillData(sql, connectionName); });
}

private DataTable FillData(string sql, string connectionName)
{
    SqlConnection conn = _connections.Where(w => w.ConnectionName == connectionName).Single().Connection;
    SqlDataAdapter adp = new SqlDataAdapter(sql, conn);
    DataSet ds = new DataSet();

    adp.Fill(ds);

    return ds.Tables[0];
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T06:00:55.253

首先，您不能将`async`/`await`与 .NET 4 或 C# 4 一起使用。这是 C# 5 中的一项新功能。在 .NET 4 之上安装了 CTP，但这些 CTP 中有明确的错误 -*不要*使用它们. 您应该使用 .NET 4.5 的完整发行版，其中包括 C# 5 编译器。（所有这些都在 Visual Studio 2012 中。）

其次，正如 Cuong Le 所示，您使用了错误的任务属性。该[`Result`](http://msdn.microsoft.com/en-us/library/dd321468.aspx)属性是您如何获得 a 的结果`Task<T>`。

第三，在进行更改以使用该`Result`属性后，您将阻止获取表 - 使其毫无意义。这个：

```
public DataTable GetData(string sql, string connectionName)
{
    DataTable dt = (DataTable)GetDataAsync(sql, connectionName).Result;
    return dt;
} 
```

...在很大程度上等同于：

```
public DataTable GetData(string sql, string connectionName)
{
    return FillData(sql, connectionName);
} 
```

如果您要启动一个任务并立即等待它，您不妨同步调用该方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-25T03:02:28.623

我自己的源代码。

```
public static async Task<DataTable> GetDataTableAsync(this System.Data.Common.DbCommand command, CancellationToken cancellationToken, string tableName = null)
    {
        TaskCompletionSource<DataTable> source = new TaskCompletionSource<DataTable>();
        var resultTable = new DataTable(tableName ?? command.CommandText);
        DbDataReader dataReader = null;

        if (cancellationToken.IsCancellationRequested == true)
        {
            source.SetCanceled();

            await source.Task;
        }

        try
        {
            await command.Connection.OpenAsync();
            dataReader = await command.ExecuteReaderAsync(CommandBehavior.Default);
            resultTable.Load(dataReader);
            source.SetResult(resultTable);
        }
        catch (Exception ex)
        {
            source.SetException(ex);
        }
        finally
        {
            if (dataReader != null)
                dataReader.Close();

            command.Connection.Close();
        }

        return resultTable;
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T13:22:43.517

如果您想使用`async`代码，[请不要阻止它](http://nitoprograms.blogspot.com/2012/07/dont-block-on-async-code.html)。此外，请确保您使用的是[Async Targeting Pack](http://www.microsoft.com/en-us/download/details.aspx?id=29576)而不是 Async CTP。

```
private async Task<DataTable> GetDataAsync(string sql, string connectionName)
{
  return await TaskEx.Run(() => { return FillData(sql, connectionName); });
}

private async GetAndProcessDataAsync()
{
  DataTable table = await GetDataAsync("my sql", "my connection name");
  ProcessData(table);
} 
```

# php - str_replace() 不会替换每个出现

> ID：12595120
> 
> 赞同：1
> 
> 时间：2012-09-26T05:34:55.603
> 
> 标签：php, str-replace

我意识到我对 str_replace() 有一些奇怪的问题，即使我没有指定 $count 变量，它似乎也没有用 $replace 替换 $search 的每一次出现......我的代码

```
 echo "head_title_array ".html_entity_decode($head_title_array['title'])."\n\n";
    $Mytitle = strtolower(str_replace(" ", "_", html_entity_decode($head_title_array['title'])));
    echo "Mytitle ".$Mytitle; 
```

和输出：

```
 head_title_array Stay & play golf packages

      Mytitle stay_& play_golf_packages 
```

这是为什么？我希望 $Mytitle 的值为“ **stay_&_play_golf_packages** ”。这里发生了什么？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:44:30.260

可能你的字符串中有[unicode 空格](http://www.cs.tut.fi/~jkorpela/chars/spaces.html)。

您可能的解决方案是使用`preg_replace`

```
preg_replace('/\p{Zs}/u', '_', $your_string); 
```

[Unicode 字符属性](http://www.php.net/manual/en/regexp.reference.unicode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:36:54.410

那些不是空格。尝试替换`&nbsp;`和 0xA0。

# python - 错误; 赋值前引用的变量

> ID：12595126
> 
> 赞同：0
> 
> 时间：2012-09-26T05:35:31.073
> 
> 标签：python

我得到了一个`Error; Variable Referenced Before Assignment`for myhp。在我的 .py 文件的开头，我有“myhp = 20”。

我该怎么做才能让它工作？

```
def fightmode(name, hp, dmg, gold):
    print '\n\n\nYou are in a fight with %s' %name
    print '%s has %sHP' %(name, hp)
    while myhp > 0 and hp > 0:
        print '\n\t1\. Attack \n\t2\. Guard \n\t3\. Run away.'
        opt1= ''
        allowed = ["1", "2", "3"]
        while opt1 not in allowed:
            opt1 = raw_input("\nWhat will you do? ")
            if opt1 == "1":
                hp = hp - mydmg
                print "You have inflicted %d damage on %s. %s's HP is %s" %(mydmg, name, name, hp)
            if opt1 == "2":
                myhp = myhp+5
                print "You are now guarding yourself. Your HP is now %d" %myhp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:38:17.180

`global myhp`在函数开头插入。如果您在函数中分配变量，Python 会将其视为局部变量，除非您将其声明为全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:36:51.120

我没有看到你在哪里有 myhp = 20。myhp 是这里的本地，所以它没有被分配。如果要使用全局，请将其放在`global myhp`函数的开头。

# twitter-bootstrap - 选项卡和独立下拉按钮

> ID：12595131
> 
> 赞同：1
> 
> 时间：2012-09-26T05:36:18.403
> 
> 标签：twitter-bootstrap

我想创建一些代表对象的不同子对象的选项卡

我需要：

*   如果单击选项卡，则选择对象的视图
*   添加一个独立的下拉按钮来编辑或删除de子对象

但我不知道如何编程。这是我最好的方法：http: [//jsfiddle.net/3u6pD/](http://jsfiddle.net/3u6pD/)在示例中但是这样我在点击时失去了选项卡的选择

你能帮我以 TB 的方式解决这个问题吗？

这 TB 人群计划将此类功能添加到库中吗？

非常感谢您的帮助

# c - 即使 srand (time(NULL)) 退出循环，数字在一段时间内也是相同的

> ID：12595132
> 
> 赞同：0
> 
> 时间：2012-09-26T05:36:24.393
> 
> 标签：c, random, numbers, srand

我有一个简单的 C 代码，中间有一个随机数生成代码.. 问题是这个数字在很长一段时间内保持不变，然后上升一个！运行 C 程序 30 次以上，rand_pick 可能为 5，然后最终变为 6，...我想知道为什么以及是否有另一种方法可以产生真正随机的 1 到 9 位数字。

```
int rand_pick;
srand (time(NULL));
rand_pick = 1 + (int) (9.0*rand()/(RAND_MAX+1.0)); 
```

非常感谢 ;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:51:37.607

不，数字应该是准随机的。您可以运行这段代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#define RANDOM_COUNT 10000

int main(void) {
    int rand_count[10] = {};
    int rand_pick;
    int i;

    srand (time(NULL));

    // run number of experiments
    for(i = 0; i < RANDOM_COUNT; i++) {
        rand_pick = 1 + (int) (9.0*rand()/(RAND_MAX+1.0));
        rand_count[rand_pick]++;
    }

    for(i = 1; i <= 9; i++) {
        printf("%d => %.3f %%\n", i, rand_count[rand_pick] /((float) RANDOM_COUNT));
    }   
} 
```

它将随机选择 10,000 个数字并计算它们的分布。我总是得到均匀分布：

```
1 => 0.111 %
2 => 0.111 %
3 => 0.111 %
4 => 0.111 %
5 => 0.111 %
6 => 0.111 %
7 => 0.111 %
8 => 0.111 %
9 => 0.111 % 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T05:39:39.683

您只想在程序中初始化 srand 一次。如果您出于某种原因每秒运行该程序数次，那么您需要从其他地方（如 Linux 上的 /dev/random）获取一个随机数来为您的随机数生成器播种。

# mysql - 无法创建/写入文件 - linux 中的错误代码 13

> ID：12595133
> 
> 赞同：6
> 
> 时间：2012-09-26T05:36:27.873
> 
> 标签：mysql, create-table, datadirectory

我正在尝试在 linux 中创建一个 mysql 表，并将数据目录更改为另一个位置。具有完全权限的选定文件夹。但我收到错误“无法创建/写入文件”。我用谷歌搜索，发现这个错误与权限被拒绝有关。*我可以使用chown*命令将文件夹的所有者权限更改为 root 。但它仍然显示相同的错误。

```
mysql> create table test_table( testId int PRIMARY KEY,  testName VARCHAR(20) ) DATA DIRECTORY = '/home/Test/Sample/data';

ERROR 1 (HY000): Can't create/write to file '/home/Test/Sample/data/test_table1.MYD' (Errcode: 13) 
```

我可以做什么？？？请给我任何宝贵的建议......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T13:40:32.910

```
mysql> create table test_table( testId int PRIMARY KEY,  testName VARCHAR(20) ) 
       DATA DIRECTORY = '/home/Test/Sample/data'; 
```

写为：

```
mysql> create table test_table( testId int PRIMARY KEY,  testName VARCHAR(20) ) 
       DATA DIRECTORY = '/tmp/data'; 
```

为了让生活更轻松，请尝试存储到 '/tmp' 目录，因为 mysql 可以访问该目录，而不是摸索（chown）更改所有权。

# android - 在项目上单击以查看列表视图

> ID：12595139
> 
> 赞同：2
> 
> 时间：2012-09-26T05:36:49.050
> 
> 标签：android, android-listview

我在线性布局中有一个列表视图和一个按钮。我无法扩展 ListActivity（使用 Onlistitemclick），但我必须在列表视图中选择一个项目，这会打开另一个视图，我必须在其中填写 SQLite DB 的详细信息。

假设数据库正常工作，为以下代码实现此功能的最佳方法是什么？我是初学者。欢迎所有与方法和代码相关的建议。

提前致谢，

```
public class Contacts extends Activity implements OnClickListener {
    int NewContact_Request_Code = 1;
    Button newcontact;
    ListView listview;
    public static final String LOG_TAG = "Contacts";
    int mInt = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.contactview);
        // Set the content to contactview.xml

        // newcontact = NEW CONTACT button
        // listview = MyList List View
        newcontact = (Button) findViewById(R.id.baddcontact);
        listview = (ListView) findViewById(R.id.mylist);

        // Make a New Database
        DBContact info = new DBContact(this);
        // Open , get Information from database and close it
        info.open();
        String[] data = info.queryAll();
        info.close();
        // listview = getListView();
        listview.setTextFilterEnabled(true);
        // Display the names
     ArrayAdapter<String> adapter = new ArrayAdapter<String>(Contacts.this, android.R.layout.simple_list_item_1, data);
         listview.setAdapter(adapter);
        newcontact.setOnClickListener(this);

    }

    // @Override
    // protected void onListItemClick(ListView l, View v, int position, long id)
    // {
    // // TODO Auto-generated method stub
    // super.onListItemClick(l, v, position, id);
    // Intent viewintent = new Intent(Contacts.this, ViewContact.class);
    // String item = (String) getListAdapter().getItem(position);
    // viewintent.putExtra("name_clicked", item);
    // startActivity(viewintent);
    //
    // }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        Intent newintent = new Intent(Contacts.this, AddNewContact.class);
        // start actiivity for result - to get the name of the new contact
        startActivityForResult(newintent, 0);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
        // pass the value of the string via cursor and update the list
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T05:52:41.257

您可以将**[OnItemClickListener](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)**设置为`ListView`如下所示

```
listview.setOnItemClickListener(new OnItemClickListener() {

  public void onItemClick(AdapterView adapterView, View view, int position, long id) {

        //Do some more stuff here and launch new activity

  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T05:43:37.140

您可以`onItemClickListener`明确地设置它，如下所示：

```
listview.setOnItemClickListener(listener); 
```

哪里`listener`是`AdapterView.OnItemClickListener`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T05:48:33.783

用于`OnItemClickListener()`列表视图无需扩展此活动`ListActivity`

```
listview.setOnItemClickListener(new OnItemClickListener() {
   @Override
   public void onItemClick(AdapterView<?> arg0, View v, int arg2, long arg3) {          

   }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T05:50:43.970

```
private final ListView.OnItemClickListener ListClick = new OnItemClickListener() {
    public void onItemClick(AdapterView parent, View view, int position, long id) {
        // your action
    }
}; 
```

并以这种方式设置

```
listview.setOnItemClickListener(ListClick); 
```

# android - 不同设备上的印地语字符视图不同

> ID：12595143
> 
> 赞同：23
> 
> 时间：2012-09-26T05:36:55.300
> 
> 标签：android, localization

我正在实现多语言（法语、汉语、印地语……等）功能。由于印地语不支持向后兼容（低于 4.0 ICS），我强制使用 Typeface 进行本地化`(akshar.ttf)`。在用印地语测试我的设置时，我遇到了一个危急情况，见下图：

在这个字符串中，我正在使用`अब स्क्रीन शुरू करें`（现在，我启动屏幕）和`उपयोगी लिंक्स`（有用的链接）

支持的设备：三星 ACE、三星 S Plus、Galaxy 551 ![在此处输入图像描述](../Images/03982d7a883282a66bd67b4952f0ffe8.png)

不支持的设备：三星 Galaxy S2、HTC Nexus One、HTC Incredible S ![在此处输入图像描述](../Images/9a9a84806edfe1d52f8014e692ff0a75.png)

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T10:12:51.047

问题是您不能直接将印地语字体放入其中，因为我们需要将其转换为 unicode 并将其放入。我们提出了同样的问题，我们通过使用 unicodes 而不是字体来实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:33:24.523

回答可能有点晚，如果这对某人有帮助，仍然会发布。

问题可能与 android unicode 字体渲染有关。

解决您的问题的最简单方法是找到基于 ISO 字符集的字体（如果可用 :)，试试这个[http://www.gbpuat.ac.in/hindifonts.htm](http://www.gbpuat.ac.in/hindifonts.htm)）并嵌入到您的应用程序中。

否则，您需要重新排序 unicode 字符才能使其正常工作。字符的重新排序可能因设备而异。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:46:55.417

您需要将 unicode 字符放在任何地方以在所有设备上进行确认。这是可以帮助您查找 unicode 的网站

[http://unicode-table.com/en/](http://unicode-table.com/en/)

# c# - 如何使用 C# 使用 Facebook API 发送私人消息

> ID：12595148
> 
> 赞同：8
> 
> 时间：2012-09-26T05:37:04.237
> 
> 标签：c#, asp.net, facebook, xmpp, facebook-chat

我使用 Facebook Connect 登录我的网站，需要创建向用户的 Facebook 朋友发送个人消息的功能。

[这个问题](https://stackoverflow.com/questions/2574431/facebook-api-send-private-messages-to-friends)的解决方案不适合我，因为我需要同时向多个朋友发送消息（用户只需从她/他想要发送消息的列表中选择朋友）。

我为 Ruby - [How to send private messages with Facebook API](http://dalibornasevic.com/posts/35-how-to-send-private-messages-with-facebook-api)找到了关于这个问题的非常好的帖子。但我找不到类似于 xmpp4r_facebook Ruby gem 的 C# 包。

[agsXMPP SDK](http://www.ag-software.de/agsxmpp-sdk/)和[jabber-net](http://code.google.com/p/jabber-net/)不支持 X-FACEBOOK-PLATFORM SASL 机制（[http://forum.ag-software.de/thread/1372-Facebook-Chat](http://forum.ag-software.de/thread/1372-Facebook-Chat)并[使用 Jabber.net 连接到 facebook 聊天（C#/Mono ) 与 SASL](https://stackoverflow.com/questions/12069401/connect-to-facebook-chat-using-jabber-net-c-mono-with-sasl) )。

我希望找到一些现有的解决方案，而不是更新其中一个库。或者找到一些像 xmpp4r_facebook 这样的库，但适用于 .NET 平台。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:57:51.263

agsXMPP 的最新来源支持 X-FACEBOOK-PLATFORM Sasl 机制。

1）检查最新的来源
2）将以下代码添加到 OnSaslStart 事件

```
私人无效XmppCon_OnSaslStart（对象发送者，SaslEventArgs args）
{
   args.Mechanism = Mechanism.GetMechanismName(agsXMPP.protocol.sasl.MechanismType.X_FACEBOOK_PLATFORM);
   args.ExtentedData = new FacebookExtendedData {AccessToken = "YOUR TOKEN", ApiKey = "YOUR API KEY"};    
}
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:03:58.627

Facebook 不允许 SDK 发送私人消息以防止垃圾邮件发送者滥用

# php - 为什么我要从我的 ajax 到 php 获取对象对象结果？

> ID：12595149
> 
> 赞同：0
> 
> 时间：2012-09-26T05:37:16.413
> 
> 标签：php, json, jquery

这是我的jQuery：

```
$.ajax({
                url: 'function.php',
                type: 'post',
                datatype: 'json',
                success: function(data){
                    var toAppend = '';
                    if(typeof data === "object"){
                        for(var i=0;i<data.length;i++){
                            toAppend += '<li>'+data[i]["asin"]+'</li>';
                        }
                        $('.results').append(toAppend);
                    }
                }
            }); 
```

这是我的php：

```
echo json_encode($items_from_amazon); 
```

我已经使用了萤火虫，并且我成功地从响应中获得了 json 值，但是为什么我得到对象对象输出？怎么了？我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T05:56:07.537

从我在您的`print_r($items_from_amazon);`输出中看到的，您有 Array-Object-Object，请尝试使用以下代码：

```
for(var i=0;i<data.length;i++){
 toAppend += '<li>'+data[i]["asin"][0]+'</li>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:57:05.920

```
echo json_encode(array_values($items_from_amazon)); 
```

这应该确保您的 JSON 将是一个数组。但是，它会删除任何字符串键。

如果`$items_from_amazon`是一个对象，您可以将其转换为数组：

```
echo json_encode(array_values((array)$items_from_amazon)); 
```

**编辑：** 如果我误解了这个问题并且您想知道为什么您的 ASIN 元素有对象：

您可能想要更改生成的代码，`$items_from_amazon`使其不附加，而是分配 ASIN。

```
// This appends
$item['asin'][] = $asin;

// This assigns
$item['asin'] = $asin;

// Note: make sure $asin is a string, not an object or array... 
```

您也可以`data[i]["asin"][0]`在客户端代码中使用。

# wordpress - 在所有可用的 wordpress 小部件中添加“字幕”字段

> ID：12595151
> 
> 赞同：0
> 
> 时间：2012-09-26T05:37:17.513
> 
> 标签：wordpress, wordpress-theming

有没有办法在所有 wordpress 可用字段中的小部件标题字段之后挂钩“子标题”字段？, 然后在小部件标题后显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:49:31.660

我还没有看到任何使用钩子来解决这个问题的解决方案，但是有像**[DP Widgets Plus](http://wordpress.org/extend/plugins/dp-widgets-plus/)**这样的插件。

# sql - “select *”和所有列的选择之间是否存在速度差异？

> ID：12595160
> 
> 赞同：-2
> 
> 时间：2012-09-26T05:37:58.857
> 
> 标签：sql, sql-server

> **可能重复：**
> [选择 * 与选择列](https://stackoverflow.com/questions/3180375/select-vs-select-column)

假设有一个有 20 列的表。`select *`a和明确包含所有 20 列的 select之间是否存在速度差异？

如果没有区别，您有什么建议？我应该使用惰性`select *`还是应该为每列创建一个查询字符串？

（如果有任何区别：我使用 SQL Server。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:44:03.523

与其说是速度，不如说是可维护性......

如果您的应用程序专门请求列，并且表结构发生更改（列已删除或重命名），则该语句将在运行时中断，从而准确指出问题所在。

select * 在结构更改后仍然有效，但可能会在以后的应用程序中导致更难以追踪的更微妙的问题。

这是额外的工作，但更好地显式列出列的可维护性。

假设where子句被参数化，SQL只解析一次，之后应该在语句缓存中，执行速度不会有太大差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:43:13.197

作为一种好的做法，最好在 select 语句本身中包含列名。因为表的结构将来可能会发生变化，并且您会提取不需要的数据..

**表现明智**

当您使用 select * 时，sql server 编译器必须将 * 替换为列名，这是一项额外的任务，但我认为可以忽略不计

# java - 可能/合理地构建具有多种语言的程序？

> ID：12595164
> 
> 赞同：1
> 
> 时间：2012-09-26T05:38:49.510
> 
> 标签：java, c++, programming-languages, large-data

使用多种编程语言构建大型软件（例如 Altera Quartus II）是否合理（和/或实践）？意思是，软件的菜单是用 c++ 编码的，也许用户与之交互最多的核心功能界面是使用 java 构建的。这甚至可能吗？如果是这样，使用大型软件这样做的缺点/好处是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:43:59.933

这是可能的和实践的，但是建议您的应用程序的核心使用中级编程语言（如**c++** ）构建以提高性能，而前端部分以及任何与核心的实用程序和接口都可以使用其他语言构建像**javascript**。

看看 Mozilla 浏览器，它是带有**javascript** UI的**c++**核心示例。

 **你的问题是关于它是否可能：答案是它。但是，我将尝试扩展一点，即使用**c++**和**java**构建应用程序的挑战将是应用程序的两个部分之间的通信。为了做到这一点，你需要某种像**xml这样的中间体。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T05:47:57.060

可以使用多种语言构建应用程序，例如，您可以用 C++ 编写前端，用 Java 编写后端，并使用[JNI](http://en.wikipedia.org/wiki/Java_Native_Interface)进行通信。

虽然这样的应用程序允许您利用每种语言的特性，但它要求开发人员具有多个领域的专业知识或拥有多个开发人员，每个开发人员都会增加交付解决方案的成本。

此外，现在大多数编译器都倾向于在编译期间优化代码，因此开发人员不会尝试找到允许他们调整代码的各个方面的微优化，除非他们正在编写类似于 AutoCad 或 Photoshop 的东西，每一个都需要相对较高的系统资源。

具有多种语言的解决方案的另一个问题是如何使它们一起通信（套接字、共享内存段、管道等），这将是另一层复杂性。**

# python - 如何制作 x 坐标字母？

> ID：12595174
> 
> 赞同：6
> 
> 时间：2012-09-26T05:39:48.377
> 
> 标签：python, matplotlib

我用 pyplot/matplotlib 在 python 中制作了一个折线图：

```
import matplotlib.pyplot as plt
import math
import numpy as np

alphabet = range(0, 25)
firstLine = [letter + 65 for letter in alphabet]
secondLine = [letter + 97 for letter in alphabet]

plt.plot(alphabet, firstLine, '-b', label='ASCII value of capital.')
plt.plot(alphabet, secondLine, '--g', label='ASCII value of lowercase.')
plt.xlabel('Letter in Alphabet')
plt.ylabel('ASCII Value')
plt.title('ASCII value vs. Letter')
plt.legend()
plt.show() 
```

在我的 x 轴上，它当前按数字缩放。但是，我希望用字母（a、b、c、d）而不是说 0、5、10 来标记 x 轴上的增量...具体来说，我希望字母 'a' 映射到 0，' b' 映射到 1 等。

我如何让 pyplot 做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T05:42:50.043

使用该`xticks`功能。如果你这样做，`pyplot.xticks([0, 1, 2, 3], ['a', 'b', 'c', 'd'])`那么它将在 0、1、2 和 3 处有轴标记，它们将被标记为 a、b、c 和 d。您还可以使用它`np.arange`来快速创建所需的数字范围。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-26T05:47:34.053

下面我用过`plt.xticks(range(26), [chr(97 + x) for x in xrange(26)])`。

***注意：*** 你应该改变你的`alphabet = range(0, 25)`，`alphabet = range(26)`因为否则你会错过'z'。

![在此处输入图像描述](../Images/e267f3de93b0a0b6ec9931858123c7ae.png)

# jquery - 如何覆盖 Jquery.ajax 函数？

> ID：12595180
> 
> 赞同：5
> 
> 时间：2012-09-26T05:40:09.527
> 
> 标签：jquery

我想覆盖 Jquery 中的 $.ajax 函数

我想使用现有功能并需要添加一些其他功能

例子：

将原始 ajax 函数放入 OriginalAjax 变量中

```
 var OriginalAjax = $.ajax 

  $.ajax = function(xhr){

      if(xhr.status ==401)
       {
          // Diplay Error in dialog box;
       }
      return(OriginalAjax(xhr));
  }); 
```

是否可以覆盖 $.ajax 函数？如果“是”，请告知如何实施？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-26T05:42:05.200

是的，你可以这么做...

```
var oldAjax = $.ajax;

$.ajax = function() {
     // Do your magic.
     return oldAjax.apply($, arguments);
}; 
```

...或者...

```
const oldAjax = $.ajax;

$.ajax = (...args) => {
     // Do your magic.
     return oldAjax(...args);
}; 
```

**但是**，从您的示例来看，您应该只使用全局事件处理程序，例如[`ajaxComplete()`](http://api.jquery.com/ajaxComplete/)，您可以在其中检查响应状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T21:23:41.997

您可以覆盖默认的 $.ajax 行为。

请记住 $.ajax 正在返回 promise() 对象，因此您还需要处理附加到 done() / fail() 的回调。

也许这篇文章可以帮助你：[http ://www.svlada.com/blog/override-jquery-ajax-handler/](http://www.svlada.com/blog/override-jquery-ajax-handler/)

# android - android应用程序中的推送通知

> ID：12595181
> 
> 赞同：1
> 
> 时间：2012-09-26T05:40:19.960
> 
> 标签：android, push-notification, android-c2dm, google-cloud-messaging

嗨，我希望`push notification`在我自己的 android 应用程序中实现。我能怎么做？请给我一些想法....

即使我的应用程序关闭，这种广播接收器也应该接收消息（如 Gmail。这里我在收件箱中收到一条新消息意味着通知消息显示在我的 android 设备顶部的时间，单击该通知消息意味着直接转到收件箱并查看该消息）。

在这里，我希望在我的数据库中插入一个数据，这意味着即使我的应用程序已关闭，通知消息也会显示在我的 android 应用程序上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:42:39.973

请参阅[http://developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)。您需要实施 GCM。

**编辑：**

即使应用程序在后台也能收到通知，请参阅[Android GCM（推送通知）：如果应用程序停止，设备不会收到通知](https://stackoverflow.com/questions/12073449/android-gcm-push-notification-device-doesnt-receive-notification-if-applicat)。

请参阅[Android GCM 基本实现](https://stackoverflow.com/questions/11438464/android-gcm-basic-implementation)， http: [//developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html) & [How to setup Google Cloud Messaging for Android？](https://stackoverflow.com/questions/11261000/how-to-setup-google-cloud-messaging-for-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:45:11.787

有关详细信息，请参阅[http://developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)。在那里你可以找到一个教程和所有基本的东西

# javascript - 从 div 复制时防止复制 html/css 样式

> ID：12595189
> 
> 赞同：0
> 
> 时间：2012-09-26T05:40:30.697
> 
> 标签：javascript, html, css

当从一个应用了 CSS 属性（如 font-styles 和 font-size）的 div 复制到其中的文本时，此 CSS 也会被复制，并且粘贴的内容会根据样式进行格式化。我们如何才能阻止这种行为，这样当您从 div 复制时，无论应用什么样式，都只会将文本部分复制到剪贴板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:59:07.957

这也是复制样式的剪贴板功能。我认为我们无法通过 javascript 阻止这种行为。您可以将其复制到记事本中，然后将其粘贴，这样该样式将不适用于文本。

# c# - 使用 c# 应用程序的 Sqlite 数据库锁定错误

> ID：12595190
> 
> 赞同：0
> 
> 时间：2012-09-26T05:40:32.757
> 
> 标签：c#

在我的 c# 应用程序中，我使用 sqlite 作为后端。当我执行简单的插入查询时，我花费的时间太长，最终出现数据库被锁定的消息。我在舞台服务器中部署了我的应用程序并远程执行操作。下面是我的代码，请帮忙。

```
String sqlExpr = "INSERT INTO item (id, typeid, ownerid, created, modifiedby, modified,active,imageuploaded,logouploaded,language_item) VALUES (@Id,@type_TypeId ,@db_currentUser,@dates,@db_id ,@modified,@active_status,@image,@logo,@language)";

                    //using (SQLiteCommand _insertItem = new SQLiteCommand())
                    //{
                    SQLiteCommand _insertItem = new SQLiteCommand();
                        _insertItem.CommandText = sqlExpr;
                        _insertItem.Parameters.AddWithValue("@Id", Id);
                        _insertItem.Parameters.AddWithValue("@type_TypeId", type.TypeId);
                        _insertItem.Parameters.AddWithValue("@db_currentUser", db.currentUser.id);
                        _insertItem.Parameters.AddWithValue("@dates", DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss"));
                        _insertItem.Parameters.AddWithValue("@db_id", db.currentUser.id);
                        _insertItem.Parameters.AddWithValue("@modified", DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss"));
                        _insertItem.Parameters.AddWithValue("@active_status", active_status);
                        _insertItem.Parameters.AddWithValue("@image", "false");
                        _insertItem.Parameters.AddWithValue("@logo", "false");
                        _insertItem.Parameters.AddWithValue("@language", language);
                        rowsAffected = db.ExecuteNonQuerySQL(_insertItem);
                        db.Close();

 public int ExecuteNonQuerySQL(SQLiteCommand cmd)
        {
            int ireturn = 0;

            if (conn.State != ConnectionState.Open)//the connection is individual for each session so no need of lock .added the code on 2011-11-08 by Sangeetha
                Open(DataFile);
            //SQLiteConnection C = new SQLiteConnection("Data Source=database.db;Version=3;New=False;Compress=True;");

            using (SQLiteTransaction dbtrans = conn.BeginTransaction(IsolationLevel.ReadCommitted))
            {
                using (SQLiteCommand cmd1 = (SQLiteCommand)cmd.Clone())
                {

                    cmd.Dispose();
                    cmd1.Connection = conn;
                    cmd1.Transaction = dbtrans;
                    ireturn = cmd1.ExecuteNonQuery();
                    dbtrans.Commit();
                    cmd1.Dispose();
                }
            }

            return ireturn;
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-07T13:54:23.210

也许在您打开连接之前它仍然处于打开状态。确保所有连接和命令都已处理（使用 USING 语句）并在退出功能之前关闭每个阅读器。

或迁移到“oledb”提供者（MS ACCESS）

# c# - 如何将桌面网络抓取工具转换为网站？

> ID：12595193
> 
> 赞同：0
> 
> 时间：2012-09-26T05:40:55.873
> 
> 标签：c#, asp.net, web-scraping

我有一个使用 C#.NET 编写的桌面网络爬虫应用程序。它的工作原理非常简单。用户在 txt/csv/Excel 中导入输入数据。该应用程序将抓取和组织的结果导出到输出文件（csv、html）中。

作为一个网站，我怎样才能使它可以在线访问？我以前没有做过网络编程（只有桌面），而且我不知道任何网络编程语言。但我认为我可以学习 ASP.NET 并用它创建类似的 webscraper 功能。

我有什么样的虚拟主机要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:01:14.073

您需要做的就是将您的桌面应用程序变成一个库。使用执行特定功能的 API 将您的 EXE 转换为 DLL。这意味着将功能操作与 UI 操作分开。然后，构建一个使用该库在线提供相同功能的 Web 应用程序。如果你想学习一些新的东西来构建 Web 应用程序，我建议使用 ASP.NET MVC 而不是 ASP.NET Web Forms。MVC 比 Web 表单更接近 Web 开发。

至于网络托管要求，任何支持 ASP.NET 的网络主机都应该能够运行 ASP.NET MVC。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T05:48:06.707

我已经用 ASP.NET 做了一点，但我认为[这](http://www.codeproject.com/Articles/185302/Web-Scraping-in-ASP-NET-with-Regular-Expression-Ma)会对你有所帮助

# scheme - 方案乘以列表项

> ID：12595195
> 
> 赞同：1
> 
> 时间：2012-09-26T05:41:08.580
> 
> 标签：scheme, procedure, r5rs

我看了又看，但很惊讶没有找到这个问题的答案。

在 R5RS 方案中，您将如何编写一个将列表中的每个元素彼此相乘的过程。如果给定一个列表 '(4 5 6)，那么该过程，multiply-list，应该返回 120。4*5*6=120。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:14:39.000

`(define (multiply-list l) (apply * l))`

微不足道。这可能就是你永远找不到答案的原因：没有人费心把它写下来……</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:51:23.580

“建议”的方式：

```
(define mult 
  (lambda (the-list)
    (apply * the-list))) 
```

迭代实现：

```
(define mult-it 
  (lambda (the-list)
    (let ((result 1))
      (begin
        (for-each 
         (lambda (x)
           (set! result (* result x)))
         the-list)
        result)))) 
```

一个纯粹的函数式递归实现：

```
(define mult-rec
  (lambda (the-list)
    (if (null? the-list)
        1
        (* (car the-list) (mult-rec (cdr the-list)))))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T05:55:08.363

```
(define (multiply-list list)
  (let loop ((list list) (accum 1))
    (cond
      ((null? list) accum)
      ((not (number? (car list))) '())
      (else (loop (cdr list) (* accum (car list))))))) 
```

# java - 如何更新命名查询中的多个表？

> ID：12595196
> 
> 赞同：2
> 
> 时间：2012-09-26T05:41:15.980
> 
> 标签：java, eclipselink

我正在使用 Eclipselink v2.3.3

我收到此错误

```
Error compiling the query [Credential.updateExistingCredentialNoPW: UPDATE Credential c SET c.active = :active, c.employee.address.streetAddress = :stadd, c.employee.address.city = :city, c.employee.address.province = :prov, c.employee.address.zip = :zip WHERE c.id = :id], line 1, column 46: invalid navigation expression [c.employee], cannot navigate association field [employee] in the SET clause target. 
```

当我尝试运行我的代码时。

以下是阻止运行我的代码的受影响的命名查询

```
@NamedQuery(name = "Credential.updateExistingCredentialNoPW",
query = "UPDATE Credential c "
+ "SET c.active = :active, "
+ "c.employee.address.streetAddress = :stadd, "
+ "c.employee.address.city = :city, "
+ "c.employee.address.province = :prov, "
+ "c.employee.address.zip = :zip "
+ "WHERE c.id = :id"),

@NamedQuery(name = "Credential.updateExistingCredential",
query = "UPDATE Credential c "
+ "SET c.password = :pw, "
+ "c.active = :active, "
+ "c.employee.address.streetAddress = :stadd, "
+ "c.employee.address.city = :city, "
+ "c.employee.address.province = :prov, "
+ "c.employee.address.zip = :zip "
+ "WHERE c.id = :id"),

@NamedQuery(name = "Credential.updateSalary",
query = "UPDATE Credential c "
+ "SET c.employee.salary.value = :val WHERE c.id = :id") 
```

这是我放置上面指定的所有命名查询的类

```
public class Credential implements Serializable {

private static final long serialVersionUID = 1L;
@Id
@GeneratedValue(generator = "CRED_GEN", strategy = GenerationType.IDENTITY)
@Column(name = "CREDENTIAL_ID")
private long id;
// unique & not nullabe username
@Column(nullable = false, unique = true)
private String username;
@Column(nullable = false, name = "USER_KEY")
private String password;
@Column(nullable = false)
private boolean active;
@Column(nullable = false)
private int userLevel;
@OneToOne(cascade = CascadeType.PERSIST, fetch = FetchType.EAGER)
private Employee employee;

public Credential() {
}

public Credential(String username, String password, boolean active,
        int userLevel, Employee employee) throws NoSuchAlgorithmException {
    this.username = username;
    this.setPassword(password);
    this.active = active;
    this.userLevel = userLevel;
    this.employee = employee;
}

public long getId() {
    return id;
}

public void setId(long id) {
    this.id = id;
}

public int getUserLevel() {
    return userLevel;
}

public void setUserLevel(int userLevel) {
    this.userLevel = userLevel;
}

public boolean isActive() {
    return active;
}

public void setActive(boolean active) {
    this.active = active;
}

public Employee getEmployee() {
    return employee;
}

public void setEmployee(Employee employee) {
    this.employee = employee;
}

public String getPassword() {
    return password;
}

public void setPassword(String password) throws NoSuchAlgorithmException {
    this.password = Cryptography.getHash(password);
}

public String getUsername() {
    return username;
}

public void setUsername(String username) {
    this.username = username;
} 
```

我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:58:22.293

无法使用单个 sql 查询更新多个表。

请参阅[https://forums.oracle.com/forums/thread.jspa?threadID=2223393](https://forums.oracle.com/forums/thread.jspa?threadID=2223393)。

所以 Eclipselink 也不可能。

您必须将其拆分为两个查询，或者更好地使用设置器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:58:53.743

你不能。要么使用 SQL 查询，要么使用 Java 代码：

```
Credential c = em.find(Credential.class, credentialId);
c.setActive(active);
c.getEmployee().getAddress().setStreet(street);
... 
```

# c - GLib 哈希表没有返回正确的值

> ID：12595200
> 
> 赞同：0
> 
> 时间：2012-09-26T05:41:33.727
> 
> 标签：c, struct, malloc, glib

我在我的内存结构下的 GLib 哈希表中添加了几个键值对。键是从 malloc 返回的 (char *) 指针。该值是分配的 malloc 大小。

```
void addstomemstruct(struct memory *mem, char *key_address, size_t sz) {
    g_hash_table_insert(mem->singleton, key_address, &sz);
    printf("** retrieving size: %Zu add=%p\n",(*(size_t*) g_hash_table_lookup(mem->singleton, key_address)), key_address);
} 
```

后来我根据key去取value的时候，返回的size（value）总是10，这是我最后加到hash表中的值

```
size_t get_blocksize(GHashTable *hashtable, char *key_address, size_t *result_flag)
{   size_t *sz_ptr = (size_t *) g_hash_table_lookup(hashtable, key_address);
    ...

char *logmsg;asprintf(&logmsg,"In get_blocksize: *sz_ptr=%Zu\n",*sz_ptr);
    log_msg(logmsg);

printf("** retrieving size: %Zu add=%p\n",(*(size_t*) g_hash_table_lookup(hashtable, key_address)), key_address);
...
} 
```

打印出：

```
preparing to add pointer: 0x9b52f10
** adding size: 1
** retrieving size: 1 add=0x9b52f10
preparing to add pointer: 0x9b52f48
** adding size: 2
** retrieving size: 2 add=0x9b52f48
preparing to add pointer: 0x9b52f58
** adding size: 3
...
preparing to add pointer: 0x9b52fc8
** adding size: 10
** retrieving size: 10 add=0x9b52fc8 
```

然后当我尝试检索第一个值时：

```
In get_blocksize: *sz_ptr=10
** retrieving size: 10 add=0x9b52f10
Freed address 0x9b52f10\.  Size: 10\. mem->stats->active_count=9, mem->stats->active_size=45. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T05:52:06.530

您将指向自动存储持续时间变量（函数参数）的指针作为哈希表值传递。当它超出范围时，访问它是一种未定义的行为。

您可以：

*   `sz`为with `malloc`/分配存储，并在创建哈希表时`gnew`注册一个适当的。`value_destroy_func`
*   利用`size_t`value 适合指针并将其强制转换为`gpointer`. 从技术上讲，这是一个 UB，但应该适用于大多数平台。除非小对象分配被确定为瓶颈，否则可能不应该这样做。

# java - 如何使 Camel 在拆分器组件后不回滚更改

> ID：12595205
> 
> 赞同：1
> 
> 时间：2012-09-26T05:42:13.690
> 
> 标签：java, file, apache-camel, splitter

我需要逐行解析文件。每行使用拆分器组件单独处理。处理完所有行后，我需要将文件复制到 done_folder。如果所有行都正确处理，则一切正常。但是，如果行不正确，那么我会收到以下有关回滚的警告，并且文件不会复制到 done_folder 警告：

```
WARN (Camel (com.company.realcardparser) thread #0 - file://project/src/test/resources/working_folder) [GenericFileOnCompletion] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileDeleteProcessStrategy@41a7d9e7 for file: GenericFile[237file09062012-qa.csv] 
```

我的骆驼配置：

```
 <camelContext id="com.company.realcardparser" xmlns="http://camel.apache.org/schema/spring" trace="true">
        <routeContextRef ref="idtProxyRoute"/>
        <endpoint id="fileParserInputEndPoint" uri="file:${idt.proxy.real.card.parser.folder.test.input}?delete=true&amp;readLock=${idt.proxy.real.card.parser.readLock}&amp;readLockCheckInterval=${idt.proxy.real.card.parser.readLockCheckInterval}&amp;readLockTimeout=${idt.proxy.real.card.parser.readLockTimeout}&amp;delay=${idt.proxy.real.card.parser.delay}"/>
        <endpoint id="fileParserOutputEndPoint" uri="file:${idt.proxy.real.card.parser.folder.test.output}"/>
        <endpoint id="fileParserOutputFailedEndPoint" uri="file:${idt.proxy.real.card.parser.folder.test.output.failed}"/>
    </camelContext>
    <bean id="idtTxRequired" class="org.apache.camel.spring.spi.SpringTransactionPolicy">
        <property name="transactionManager" ref="transactionManager"/>
        <property name="propagationBehaviorName" value="PROPAGATION_REQUIRES_NEW"/>
    </bean>

    <routeContext id="idtProxyRoute" xmlns="http://camel.apache.org/schema/spring">
        <route id="idtRealCardParserRoute">
            <from ref="fileParserInputEndPoint"/>
            <transacted ref="idtTxRequired"/>
            <split>
                <method bean="realCardParser" method="handle"/>
                <to uri="bean:realCardFinalizer"/>
            </split>
            <to ref="fileParserOutputEndPoint"/>
        </route>
    </routeContext> 
```

如何让骆驼忽略异常？我试图用 try/catch 块包围分离器，但没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:07:10.360

您需要将 try .. catch 块放在拆分器内。我假设异常发生在您在拆分器内执行的逻辑中。

另一种方法是使用 onException 并处理异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-27T21:22:10.437

克劳斯·易卜生的回答让我走上了正确的道路。但是，我花了一点时间才弄清楚该怎么做。

```
onException(Exception.class)
        .process(new Processor() {

        @Override
        public void process(Exchange exchange) throws Exception {
            // place to add logic to handle exception
            Throwable caught = exchange.getProperty(Exchange.EXCEPTION_CAUGHT, 
                    Throwable.class);
            logger.error("FATAL ERROR - ", caught);
        }
    })
    .handled(true); // if I don't give handled(true), it will keep reprocessing the file again and again.

    from("file:" + pathToFile + "?noop=true")
    // rest of the route 
```

[http://camel.apache.org/exception-clause.html](http://camel.apache.org/exception-clause.html) - 解释更多错误处理方法。

# javascript - 是否有任何 JSP 服务器控件？

> ID：12595217
> 
> 赞同：0
> 
> 时间：2012-09-26T05:43:16.530
> 
> 标签：javascript, asp.net, jsp, spring-mvc, servercontrols

我想知道在 Spring MVC 中是否可以在我的 jsp 页面中添加服务器控件，就像我在 ASP.Net 中所做的那样`<asp:textbox>`。

我在网上看到的所有例子都使用javascript控件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:09:39.043

嗯，有很多 JSP 标签来呈现 HTML 控件，通常它们与 web 框架捆绑在一起，如 struts / spring mvc。还有 JSF 技术，它提供组件模型来呈现 HTML 页面并与服务器端模型交互。

然而，spring 的主要目的是提供 DI 容器以便于开发和组件管理，但也有集成的 web 框架（虽然我个人的选择是带有 nanocontainer 的 struts）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:51:07.557

JSP 有“JSP 标签”的概念，它在功能上与 ASP.NET WebForms 控件相似，但也有区别。

我对 JSP 或 Spring 不够熟悉，无法列举差异或相似之处，但我只能建议您阅读此页面：[http ://www.tutorialspoint.com/jsp/jsp_standard_tag_library.htm](http://www.tutorialspoint.com/jsp/jsp_standard_tag_library.htm)

# math - 回旋曲线的参数化函数

> ID：12595218
> 
> 赞同：4
> 
> 时间：2012-09-26T05:43:17.077
> 
> 标签：math, 3d, geometry, computational-geometry

我正在编写基于[RoadXML](http://www.road-xml.org/)格式的道路网络渲染器。

这种格式的道路曲线有四种类型：

*   分割，
*   圆弧，
*   折线，
*   布道弧。

我对最后一个有问题。

[Clothoid](http://en.wikipedia.org/wiki/Euler_spiral)与 Euler 螺旋和 Cornu 螺旋相同。在 RoadXML 中，布料弧由三个参数给出：

*   开始曲率，
*   末端曲率，
*   长度。

对于弧三角测量，我需要一个像 foo(t) 这样的函数，它返回 t = 0..length 的 (x, y) 坐标。我为圆弧创建了类似的方法，没有问题，但我不能为圆弧做。

部分问题是我不完全了解如何在标准回旋曲线公式中应用开始和结束曲率参数。

例如，示例 RoadXML 道路。 [RoadXML 示例 http://img560.imageshack.us/img560/8172/bigroandabout.png](http://img560.imageshack.us/img560/8172/bigroandabout.png)

这是红色椭圆中的布料曲线项目。它的参数：

*   开始曲率 = 0，
*   端曲率 = -0.0165407，
*   长度 = 45.185。

我不知道如何实现这些参数，因为从 0 到 -0.0165 的回旋曲率非常直。

如果你给我这个函数的代码（C++、C#、Java、Python 或伪代码）或者只是一个我可以编码的公式，我会很高兴。

这是我的方程式：

```
x(t) ≈ t,
y(t) ≈ (t^3) / 6,
where length = t = s = curvature.

x(-0.0165) = -0.0165,
y(-0.0165) = -7.48688E-07.

Clotho length = 0.0165,
Source length = 45.185. 
```

缩放坐标：

```
x'(l) = x / clotho_length * source_length = 45.185,
y'(l) = y / clotho_length * source_length = 5.58149E-07 ≈ 0.

x'(0) = 0,
y'(0) = 0. 
```

因此我得到 (0, 0)...(45, 0) 点，这是非常直的。

我的错误在哪里？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T04:08:38.600

请参阅 Ryan Seng 和 Molly Severdia 的论文[The Clothoid](https://mse.redwoods.edu/darnold/math50c/CalcProj/Fall07/MollyRyan/Paper.pdf)。通常，回旋曲线由菲涅耳积分定义。事实证明，回旋曲线`C(t)`具有 arclength `t`。因此，一般曲线的公式立即用弧长表示。一条特定的曲线只是一般螺旋线的一个子部分，从起始曲率到结束曲率。对于一般情况，您必须进行旋转和平移。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T21:21:37.533

让我们来看看。您的数据是：

```
start curvature = 0,                straight line, R=INF
end curvature = -0.0165407,         circular arc, R_c = 1/k_c = 60.4569335
length = 45.185\.                    distance along clothoid, s_c = 45.185 
```

根据[维基百科的文章](http://en.wikipedia.org/wiki/Euler_spiral#Formulation)，

```
R s = const = R_c s_c                   ( s ~ k = 1/R by definition of clothoid )
d(s) = R d(theta)
d(theta) = k d(s)
d(theta) / d(s) = 1 / R = k = s / R_c s_c  

theta = s^2 / 2 R_c s_c = (s/a)^2 = s / 2 R = k s / 2 
                               where ___________________
                                     a = sqrt(2 R_c s_c)       (... = 73.915445 )
                                     ~~~~~~~~~~~~~~~~~~~
    and so  theta_c = k_c s_c / 2      (... = 0.37369576475 = 21.411190 degrees )
                                                     ( not so flat after all !! ) 
```

（注意：我`a`在这里称其为 WP 文章所称的倒数`a`）。然后，

```
d(x) = d(s) cos(theta)
d(y) = d(s) sin(theta)

x = INT[s=0..s] cos(theta) d(s) 
  = INT[s=0..s] cos((s/a)^2) a d(s/a) 
  = a INT[u=0..(s/a)] cos(u^2) d(u)   = a C( s/a )

y = a INT[u=0..(s/a)] sin(u^2) d(u)   = a S( s/a ) 
```

其中`C(t)`和`S(t)`是[菲涅耳积分](http://en.wikipedia.org/wiki/Fresnel_integral)。

这**就是您进行缩放的方式**。不只是`t = s`，而是。在这里，对于终点，。**`t = s/a`** `= sqrt(theta)``t_c = sqrt( k_c s_c / 2) = sqrt( 0.0165407 * 45.185 / 2) = 0.6113066`

现在，[WolframAlpha 说](http://www.wolframalpha.com/input/?i=%7B73.915445+Sqrt%5Bpi%2F2%5D+FresnelC%5B0.6113066%2FSqrt%5Bpi%2F2%5D%5D%2C+73.915445+Sqrt%5Bpi%2F2%5D+FresnelS%5B0.6113066%2FSqrt%5Bpi%2F2%5D%5D%7D)，`{73.915445 Sqrt[pi/2] FresnelC[0.6113066/Sqrt[pi/2]], 73.915445 Sqrt[pi/2] FresnelS[0.6113066/Sqrt[pi/2]]} =` **`{44.5581, 5.57259}`**. ^(（显然 Mathematica 使用了一个用附加[因子](http://en.wikipedia.org/wiki/Fresnel_integral#Definition)[缩放的定义`Sqrt[pi/2]`](http://en.wikipedia.org/wiki/Fresnel_integral#Definition)。）)

用你的函数测试它，，（原文如此！不是，你有一个错误）。**`x`** `~= t --> a*(s/a)` **`= 45.185`****`y`** `~= t^3/3 --> a*(s/a)^3/3 = 73.915445 * 0.6113066^3 / 3` **`= 5.628481`**`/3``/6`

所以你看，仅仅使用泰勒级数表示菲涅耳积分的第一项是不够的——到目前为止。您必须使用更多，并且仅在达到所需精度时才停止（即，当最后计算的项小于您预设的精度值时）。

请注意，如果您只为一次性缩放回旋曲线计算实现通用菲涅耳积分函数，那么当您将结果乘以`a`（大约为 10 ² ... 10 ³通常用于公路和铁路）。

# android - 为什么活动会表现出这种奇怪的行为？

> ID：12595219
> 
> 赞同：0
> 
> 时间：2012-09-26T05:43:18.857
> 
> 标签：android

有时，DialtactsActivity 的启动会显示这种奇怪的行为：

```
onCreate
   ||
onResume
   ||
onDestroy
   ||
onCreate 
```

…………

有人知道这种情况吗？给我一些提示？也许发生了一些不正常的事情？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:33:26.727

因为有一个 CONFIGURATION_CHANGED 事件，它会触发重新启动当前活动的过程。

```
com.android.server.am.ActivityStack.relaunchActivityLocked(ActivityStack.java:4313)
com.android.server.am.ActivityStack.ensureActivityConfigurationLocked(ActivityStack.java:4264)
com.android.server.am.ActivityManagerService.updateConfigurationLocked(ActivityManagerService.java:13528)
com.android.server.am.ActivityManagerService.updateConfiguration(ActivityManagerService.java:13430) 
```

# jsp - 用户单击浏览器后退按钮时如何使登录页面中的会话无效

> ID：12595221
> 
> 赞同：1
> 
> 时间：2012-09-26T05:43:40.337
> 
> 标签：jsp, session, spring-security

大家好，我已经完成了一个移动应用程序，我的浏览器后退按钮有问题，实际上我的问题是当用户尝试使用给定的凭据登录时，当用户单击浏览器返回时，他将重定向到菜单页面按钮用户会话应该无效，但是在登录页面中它显示了凭据，当我再次单击它重定向到主页的 sumbit 时，我从过去 2 天开始在谷歌上搜索了很多这个问题，但我不知道这应该怎么做，请大家帮帮我。我尝试将此脚本保留在登录页面中

这个 Meta 标记在 jsp 页面中

还有这个在我的controller.xml

谢谢

鲁比娜。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:42:14.480

嗨，伙计们，我找到了解决问题的方法。请将此脚本保留在登录页面的标题中

```
 <script type="text/javascript">
       function backButtonOverride()
{

  setTimeout("backButtonOverrideBody()", 1);

}

function backButtonOverrideBody()
{

  try {
    history.forward();
  } catch (e) {

  }

  setTimeout("backButtonOverrideBody()",50);
}
    </script> 
```

并在正文标签中替换它

```
<body onLoad="backButtonOverride()"> 
```

这在 Safari 浏览器中对我来说很好用。感谢 stack over flow 团队

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:40:55.320

请参阅此页面作为解决您的问题的方法：http: [//viralpatel.net/blogs/disable-back-button-browser-javascript/](http://viralpatel.net/blogs/disable-back-button-browser-javascript/)

您可以在此处查看其行为方式的演示：http: [//viralpatel.net/blogs/demo/javascript-disable-browser-back-button/](http://viralpatel.net/blogs/demo/javascript-disable-browser-back-button/)

这样做的目的是，每次用户单击后退按钮时，它都会显示浏览器历史记录中的下一个访问页面。它具有您正在寻找的效果。我怀疑这也是gmail所做的。

# java - 使用spring部署我的应用程序后如何启动ActiveMQ messageListener？

> ID：12595223
> 
> 赞同：1
> 
> 时间：2012-09-26T05:43:48.373
> 
> 标签：java, activemq

使用spring部署我的应用程序后如何启动ActiveMQ messageListener？

我的 xml 文件如下所示，

-->

```
<bean id="connectionFactory" class="org.springframework.jms.connection.SingleConnectionFactory">
    <property name="targetConnectionFactory" ref="activeMQConnectionFactory"/>
</bean>

<bean id="jmsTemplate" class="org.springframework.jms.core.JmsTemplate">
    <property name="connectionFactory" ref="connectionFactory"/>
</bean>

<bean id="messageListener" class="com.job.SampleMessageListener">
    <property name="jobResponseBean" ref="jobResponseBean"/>
    <property name="startupMessageHandlerBean" ref="startupMessageHandlerBean"/>
</bean>

<bean id="listenerContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer">
    <property name="concurrentConsumers" value="${consumer.count}"/>
    <property name="connectionFactory" ref="connectionFactory"/>
    <property name="destinationName" value="general"/>
    <property name="messageListener" ref="messageListener"/>

enter code here
</bean>

<bean id="generalQueue" class="org.apache.activemq.command.ActiveMQQueue">
    <constructor-arg value="general"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:27:46.927

Spring 应该在启动/启动时自动启动 listenerContainer。因此，如果您正确设置了所有配置，它应该是开箱即用的。

# javascript - 奇怪的 JavaScript 数字行为

> ID：12595232
> 
> 赞同：6
> 
> 时间：2012-09-26T05:44:17.610
> 
> 标签：javascript, numbers

我在处理 JavaScript 数字时发现了以下奇怪的行为。

```
var baseNum = Math.pow(2, 53);
console.log(baseNum); //prints 9007199254740992

console.log(baseNum + 1); //prints 9007199254740992 again!

console.log(baseNum + 2); //prints 9007199254740994, 2 more than +1

console.log(baseNum + 3) // prints 9007199254740996, 2 more than +2
console.log(baseNum + 4) // prints 9007199254740996, same as +3 
```

这里发生了什么？我知道 JavaScript 只能表示数字`2^53`（它们在内部是“双”？），但为什么会出现这种行为？

如果`2^53`是实际最大值，那么为什么我们有`Number.MAX_VALUE`( `1.7976931348623157e+308`)？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T05:46:03.813

这个数字真的是双倍的。尾数有 52 位（[双精度源和额外信息](http://en.wikipedia.org/wiki/Floating_point#Internal_representation)）。因此，存储 2^53 会砍掉一位。

该数字使用 3 个符号位（相当直截了当）和另外两个部分存储，尾数 M 和指数 E。该数字计算如下：

(1 + M/2^53) * 2^(E-1023)

我可能有一些细节有点偏离，但基本的想法就在那里。因此当数字为 2^53 时，2^(E-1023) = 2^53 并且由于 M 中只有 52 位，因此您不能再表示最低位。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T05:52:13.483

[@CrazyCasta](https://stackoverflow.com/a/12595244/143295)给出的答案很好。

唯一要添加的是您的第二个问题：

> 如果`2^53`是实际最大值，那么为什么我们有`Number.MAX_VALUE`( `1.7976931348623157e+308`)？

正如您所展示的，它**可以**存储大于 的数字`2^53`，但精度低于`2^0`。随着数字变得越来越大，它们失去了越来越多的精度。

因此，最大值`Number.MAX_VALUE`表示它可以表示的“最大”值；但这并不意味着准确度与`2^1`or附近的值相同`2^53`。

一个推论是Number 可以包含`Number.MIN_VALUE`的*最小值；*不是*最消极*的。也就是说，它是最接近零的非零数：（`5.00E-324`注意这是一个正数！）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T05:50:38.117

long 中可存储的最大值远大于 long 中可**精确**存储的最大值。浮点数具有固定的最大有效位数，但数字的大小可以变得更大。

为指数（2 的幂）分配了一定数量的位，并且隐式乘以存储在其余位中的尾数。超过某个点，您会失去精度，但您可以继续增加指数以表示越来越大的量级。

# cordova - 如何更改 mobiscroll 脚本输出格式？

> ID：12595243
> 
> 赞同：0
> 
> 时间：2012-09-26T05:46:01.273
> 
> 标签：cordova, jquery-mobile, mobiscroll

我正在尝试使用 mobiscroll 进行高度选择，所以我有两个轮子，一个是英尺和其他英寸，但是选择后文本框中的输出显示为数字中的空格，而不是我想要一个点，我该怎么做？以下是我目前正在使用的代码..

```
var hei=[ { 'Feet': { 1: '1', 2: '2', 3: '3', 4: '4', 5: '5', 6: '6', 7: '7', 8: '8', 9: '9' }, 'Inches': { 1: '1', 2: '2', 3: '3', 4: '4', 5: '5', 6: '6', 7: '7', 8: '8', 9: '9' , 10: '10', 11: '11', 12: '12' } } ]
$('#hei').scroller({
        theme: 'default',
        display: 'mixed',
        mode: 'scroller',
        wheels: hei,
        height: 40
    }); 
```

而HTML是

```
<input type="text" name="textinput" id="hei" value="" style="width:50%"  /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:41:34.227

使用`formatResult`和`parseValue`

```
formatResult: function(data){
            return data[0] + "." + data[1];            
        },
        parseValue: function(valueText)  {
            if (valueText != "") {        
                return valueText.split(".");
            } else{
                return [1,1];
            }
        } 
```

有关更多信息，请访问[Mobiscroll 文档](http://docs.mobiscroll.com)。另请参阅此[jsFiddle](http://jsfiddle.net/kovlex/FxmgS/9/)。

# symfony - 无法加载类型“fos_user_change_password_form”+ FOSUserBundle

> ID：12595246
> 
> 赞同：2
> 
> 时间：2012-09-26T05:46:06.937
> 
> 标签：symfony, fosuserbundle

我已按照`FOSUserBundle`安装说明进行操作。我正在使用 Symfony 2.0 并`FOSUserBundle`锁定到 1.2.0。当我尝试访问`profile.change-password`时，我收到一个错误，例如

> 无法加载类型“fos_user_change_password_form”

```
Symfony\Component\Form\Exception\FormException: Could not load type "fos_user_change_password_form" (uncaught exception) at /vendor/symfony/src/Symfony/Component/Form/FormFactory.php line 383 
```

在`config.yml`文件中我有：

```
change_password:
    form:
        type:               fos_user_change_password
        handler:            fos_user.change_password.form.handler.default
        name:               fos_user_change_password_form
        validation_groups:  [ChangePassword] 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:14:51.820

这完全是因为版本问题。因为我使用的捆绑包数量应该与其他版本匹配。`FOSUserBundle`应该有版本 1.2.4。为了`symfony 2.0.16`

# objective-c - 发布如何在基于 ARC 的项目中工作

> ID：12595247
> 
> 赞同：4
> 
> 时间：2012-09-26T05:46:16.233
> 
> 标签：objective-c, xcode, automatic-ref-counting

我知道关于这个话题有很多问题。我从未从事过基于非 ARC 的项目。

我有如下强弱属性

```
@property(strong,nonatomic)NSArray *data1;
@property(unsafe_unretained, nonatomic)NSArray *data2; 
```

我在某些地方看到人们明确地将 viewDidUnload 中的数据设为 nil。

IE

```
-(void)viewDidUnload{
    self.data1=nil;
    self.data2=nil;
} 
```

我的问题是如果我不这样做（我的意思是如果我不使 data1 和 data2 为零

在 viewDidUnload) 中，ARC 会自动释放对象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T05:57:31.603

是的，当您的视图控制器被释放时，它们将被释放。`viewDidUnload`（从 iOS 6 开始不再称为）与 不同`dealloc`，也不是“相反” `viewDidLoad`- 它仅在内存不足的情况下被调用，当视图离开屏幕时。

任何瞬态的、占用内存的对象都应设置为 nil `didReceiveMemoryWarning`- ARC*不会*自动为您执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T05:58:16.220

是的，ARC 会在父对象销毁之前自动释放所有强引用属性/变量。至于“弱”引用，它们不会被保留/释放（不管有没有 ARC）。

通常不需要设置`self.data1 = nil`，`viewDidUnload`但有时您希望明确显示您的引用对象的释放位置。如果您想确保`data1`在这行代码中发布您的代码，请使用您拥有的代码。如果您不关心它的发布时间和地点，则不必这样做。

# ruby - 状态转换时的优化（尾递归优化）

> ID：12595250
> 
> 赞同：0
> 
> 时间：2012-09-26T05:46:44.397
> 
> 标签：ruby, optimization, callstack, tail-recursion, ruby-1.9.3

当我有一个代码通过有限状态任意多次转换时，如下例所示，

```
def a
  ...
  case some_condition
  when :foo then a
  when :bar then b
  else           c
  end
end
def b
  ...
  case some_other_condition
  when :baz then  a
  when :bang then b
  else            c
  end
end
def c
  ...
  case still_another_condition
  when :zap then  a
  when :boom then b
  else            c
  end
end
a 
```

我认为每次转换到新状态时调用堆栈都会增长，这会导致性能问题。有没有办法避免调用堆栈的任意增长？尾递归优化与此有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:57:32.327

我想到的第一个解决方案是某种路由方法：

```
def routing(call = :a)
  begin
    call = send call
  end until call == :end
end 
```

然后其他方法只返回要调用的方法的名称 next：

```
def a
  ...
  case some_condition
  when foo then :a
  when bar then :b
  else          :c
  end
end 
```

这将使调用堆栈保持平坦。当你想跳过路由循环时，返回:end。

# java - 程序的可执行文件以 Java 映像

> ID：12595254
> 
> 赞同：0
> 
> 时间：2012-09-26T05:47:02.817
> 
> 标签：java, windows, swing

我知道这可能看起来有点奇怪，但我有这个要求，我想知道这是否可能。

我有一个 java swing 应用程序，我选择了一个文件（程序），这个程序被添加到一个列表中。列表完成后，我执行程序列表（这就像一个启动管理器）。

我想做的是以某种方式获取我选择的文件并将其作为图像显示到我的 UI。对于 pdf、doc、txt 等常见文件，这很容易，我只为每种类型准备了一个通用图像。但是假设我想执行 regedit.exe 或 msconfig.exe，我希望能够抓住它的图标（下图）。

![在此处输入图像描述](../Images/ccd520747cbbc3d8e9d88219dfa8075b.png)

有谁知道如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T05:58:10.823

看看[FileSystemView.getSystemIcon(File)](http://docs.oracle.com/javase/7/docs/api/javax/swing/filechooser/FileSystemView.html#getSystemIcon%28java.io.File%29)。

它有点有限（因为你只会得到一种尺寸），但它是内置的，甚至不需要任何额外的库或 JNA 或 JNI...

```
File f = new File(...);
Icon icon = FileSystemView.getFileSystemView().getSystemIcon(f); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:38:55.400

如果你想要原生图标，你需要 JNI。Java 没有用于获取不同大小的本机图标的默认 API。以下是 Windows 和 linux 的一些起点：

*   [用于 Windows 的 java 中的文件图标覆盖](https://stackoverflow.com/questions/9842530/file-icon-overlay-in-java-for-windows)
*   [如何获取与 Linux 桌面中的文件关联的图标、MIME 类型和应用程序？](https://stackoverflow.com/questions/1629172/how-do-you-get-the-icon-mime-type-and-application-associated-with-a-file-in-th)

如果您不需要确切的本机图标，您可以获取文件的 mimetype 并自行设置图标：

*   [在 Java 中获取文件的 Mime 类型](https://stackoverflow.com/questions/51438/getting-a-files-mime-type-in-java)

# windows-server-2008 - 在 win server 2008 中找不到 sqlcmd

> ID：12595258
> 
> 赞同：0
> 
> 时间：2012-09-26T05:47:38.917
> 
> 标签：windows-server-2008

我正在使用 Windows Server 2008。我无法使用 cmd 运行 sqlcmd：它说：'sqlcmd' 不被识别为内部或外部命令、可运行程序或批处理文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:24:30.263

如果您没有安装 SQL Server 2008，则必须安装 SQL Server 2008 Feature Pack

即：[http ://www.microsoft.com/en-us/download/details.aspx?id=8824](http://www.microsoft.com/en-us/download/details.aspx?id=8824)

选择正确的版本：

Microsoft SQL Server 2008 R2 命令行实用程序 SQLCMD 实用程序允许用户从 SQL Server 7.0、SQL Server 2000、SQL Server 2005 和 SQL Server 2008 实例连接、发送 Transact-SQL 批处理和输出行集信息。bcp 实用程序在 Microsoft SQL Server 2008 R2 实例和用户指定格式的数据文件之间批量复制数据。bcp 实用程序可用于将大量新行导入 SQL Server 表或将数据从表中导出到数据文件中。

注意：此组件需要 Windows Installer 4.5 和 Microsoft SQL Server Native Client（这是本页提供的另一个组件）。

# php - 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在第 9 行的 C:\xampp\htdocs\boorish\profile.php 中给出

> ID：12595262
> 
> 赞同：-5
> 
> 时间：2012-09-26T05:48:00.320
> 
> 标签：php, mysql

用户在我的网站上注册后，我想检索我的用户配置文件并在配置文件表单上打印配置文件值，但我不断收到上述错误。

```
<?php 
   $q ="SELECT * FROM indiviual where email='".$loggedinmail."'"; 
   $result = mysql_query($q); 
   while($data = mysql_fetch_array($result))
   { 
      $fullname = $data['fullname']; 
      echo "$fullname";
   }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:48:51.117

您的查询有错误并返回`FALSE`（警告提示）。解决这个问题，并写下你的条件来检查`FALSE`（用`===`）。

更好的是，如果可以，请跳出过去并使用[PDO 。](http://php.net/manual/fr/book.pdo.php)

# android - 相对布局的布局参数问题

> ID：12595266
> 
> 赞同：0
> 
> 时间：2012-09-26T05:48:20.277
> 
> 标签：android, imageview, android-relativelayout

我的应用程序有问题，基本上我很少有这样的布局：|ABC| 每个字母描述一个布局（A是相对布局）。当我将图像视图添加到相关布局时，此图像视图可以在所有布局上移动。但是相对布局被拉伸到整个屏幕的宽度。|一个| 所以基本上你再也看不到B，C布局了。

这是我的功能：

```
public void startGame(){
    int i;
    for(i=0;i<currentLevelObs.size();i++){
        if(currentLevelObs.get(i)==Globals.OBS_ENTRY_INDEX)
            break;
    }

    lp = new RelativeLayout.LayoutParams(
                     RelativeLayout.LayoutParams.FILL_PARENT,
                     RelativeLayout.LayoutParams.FILL_PARENT);
    lp.addRule(RelativeLayout.BELOW, (i+1));
    lp.addRule(RelativeLayout.RIGHT_OF, i);
    lp.leftMargin = 25;

    ImageView img = new ImageView(this);
    img.setLayoutParams(lp);
    img.setBackgroundResource(R.drawable.hero);
    gameLayout.addView(img);

} 
```

此函数从 onCreate 方法调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:52:13.190

你已经给`layout width`了`fill parent.`所以它会占据整个屏幕。那就是问题所在。将其更改为`wrap-content`然后检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:57:44.473

将您`ABC`的布​​局添加到`ScrollView`，这样您就可以向下滚动查看`B`和`C`。

它应该是这样的：

```
<ScrollView
..
...
....>
<D
..>
A
B
C
</D>
</ScrollView> 
```

ScrollView只能包含 1 个孩子，因此请保持`ABC`在`D``ScrollView`

# java - 具有自动完成功能的 Java 命令行“shell”

> ID：12595270
> 
> 赞同：7
> 
> 时间：2012-09-26T05:48:34.500
> 
> 标签：java, autocomplete, stdin

我需要创建一个 Java 命令行，以便在服务器上远程调用该命令行。它需要：

*   从用户那里读取“行”文本。
*   识别用户是否按下“tab”键以方便自动完成。
*   识别用户是否按“向上/向下”键查看历史记录。

在我开始自己动手之前，有没有人知道一个 Java 库可以促进全部或部分的实现？

*即*在 ssh 的命令行中，它可能看起来像这样：

> 鲍勃> java -jar MyTool.jar
> 
> MyTool 已启动。
> 请输入命令：
> 
> > server1 启动
> 服务器正在启动...
> 服务器已启动
> 
> > server2 加载帐户
> 完成
> 
> > server3 关闭
> 完成
> 
> >退出

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T06:34:31.030

查看[JReadline](http://jreadline.github.com/)和[jline2](https://github.com/jline/jline2)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-10T10:56:49.463

更新：[picocli-shell-jline2](https://github.com/remkop/picocli/tree/master/picocli-shell-jline2)和[picocli-shell-jline3](https://github.com/remkop/picocli/tree/master/picocli-shell-jline3)结合了 JLine 2 和 3 与[picocli](https://github.com/remkop/picocli)的优势。

Picocli 允许您使用[非常少的代码](https://picocli.info/#CheckSum-application)编写带有选项和位置参数的命令（和子命令） ，并且该库将为所有命令生成 JLine 2 和 3 命令完成程序。

它在使用帮助消息中使用 ANSI 颜色和样式，并具有许多其他独特功能，例如可否定选项、可重复嵌套参数组、变量插值等。

[![在此处输入图像描述](../Images/cdc955b2a334374794f8d7c7e318d613.png)](https://i.stack.imgur.com/wxLF7.png)

*免责声明：我是作者，因此有偏见。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T06:01:32.287

似乎您正在尝试一次提出 3 个不同的问题，但不知道您真正想要的答案是什么。

*   接受用户输入并提供自动完成是微不足道的，我非常怀疑你会找到一个通用库来完成这样的任务

*   解析复杂的类似 bash 的语句听起来很酷，并且可能存在一个库来做到这一点，但我认为它不会给你很大的空间来创建自己的一组类似 bash 的指令。（特别是考虑到您说它需要比您可以作为 bash 脚本执行的任何操作更复杂 - 这是一个很高的要求）

*   将简单的用户输入解析为命令行输入或命令也相当简单，如果这是您正在寻找的内容，您应该查看这个可能的重复项：[How to parse command line arguments in Java?](https://stackoverflow.com/questions/367706/is-there-a-good-command-line-argument-parser-for-java)

我建议重组您的问题，使其更具体地了解您正在寻找的内容，并避免强调“自动完成”的琐碎任务并简单地接受用户在文本框中的输入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T06:02:40.497

你看过[BeanShell](http://www.beanshell.org/intro.html)吗？它不像一个真正的 shell（如 bash 或 csh），但它可以让你像解释器一样键入 java 命令，你可以使用 tab 来自动完成。

我只使用了 bean shell 的 1.X 版本，但它们总是为你打开一个窗口，所以你不能在现有的 shell 中运行它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T06:00:16.687

我假设您的意思类似于 python 解释器。Java中没有等价物的原因是Java需要编译成字节码才能执行。

如果您正在寻找具有良好自动完成功能的东西。我会推荐eclipse或netbeans。它们还会自动编译您的应用程序，让您在编写完成后快速运行代码。

希望有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T17:58:29.497

在这个派对上有点晚了，但我会把[Crash](http://www.crashub.org/)和[Cliche](http://code.google.com/p/cliche/)添加到组合中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-05T22:54:35.457

Apache Karaf 有一个命令 shell，可以用作库来为其他应用程序构建命令 shell。您创建类来表示命令，并使用注释来指定命令的选项。Karaf 库提供选项卡补全、历史记录和行编辑，以及交互运行或读取文件或命令行参数以作为脚本执行的能力。

[我在这里](https://github.com/jstrachan/scopt/blob/master/Karaf.md)发现了它，并在我自己的项目中使用了它；它工作得很好。我无法将其与其他任何产品进行比较，因为我没有使用过它们。

# c# - 如何使用 javascript 显示 GridView

> ID：12595273
> 
> 赞同：0
> 
> 时间：2012-09-26T05:48:44.767
> 
> 标签：c#, asp.net, gridview

我`GridView1`在其中添加了额外的名为Details 的列，并且每一行都是Grid 有一个名为Details 的链接按钮。我编写了一个获取列值的 javascript。

因此，我想要做的是我需要使用该值作为键来显示从数据库中获取的详细信息。我想以网格的形式呈现这些细节。

我编写的 asp.net 代码和脚本是：

```
<Columns>
<asp:TemplateField HeaderText="Details">
<ItemTemplate>
<a href="javascript:void(0)" title="Click for more details" onclick="OpenPopup('<%# Eval("Device_Profile_Name") %>')">
Details</a>
</ItemTemplate>
</asp:TemplateField>
<asp:BoundField DataField="Device_Profile_Name" HeaderText="Device_Profile_Name"
SortExpression="Device_Profile_Name" ReadOnly="true" />
<asp:BoundField DataField="Node_Profile" HeaderText="Node_Profile" SortExpression="Node_Profile" />
</Columns>

<script language="javascript" type="text/javascript">
    function OpenPopup(dev_pro_name) {
        alert("Device_Profile_Name: " + dev_pro_name);
        /*window.open("dummyPage.aspx?autoid=" + Device_Profile_Name, "", "width=300,height=200");*/
    }
</script> 
```

请帮忙..谢谢..!!

# java - jconsole 有 CLI 版本吗？

> ID：12595277
> 
> 赞同：4
> 
> 时间：2012-09-26T05:49:13.173
> 
> 标签：java, performance, command-line-interface, jconsole

我正在寻找具有以下功能的 jvm 性能工具：

1.  在后台运行。
2.  收集内存和线程信息。
3.  生成可读文本格式的性能数据，便于 grep、awk、sort 等 cmd 使用。

简而言之，它是 jconsole 的 cli 版本。

oracle jvm 中包含的 jstat 满足 1 和 3，但不收集线程信息。我认为应该存在一些更复杂的工具。

有什么建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-03T14:46:05.050

也许[jvmtop](https://github.com/patric-r/jvmtop)值得一看：

```
 JvmTop 0.4.1 amd64  8 cpus, Linux 2.6.32-27, load avg 0.12
 http://code.google.com/p/jvmtop

  PID MAIN-CLASS      HPCUR HPMAX NHCUR NHMAX    CPU     GC    VM USERNAME   #T DL
 3370 rapperSimpleApp  165m  455m  109m  176m  0.12%  0.00% S6U37 web        21
11272 ver.resin.Resin [ERROR: Could not attach to VM]
27338 WatchdogManager   11m   28m   23m  130m  0.00%  0.00% S6U37 web        31
19187 m.jvmtop.JvmTop   20m 3544m   13m  130m  0.93%  0.47% S6U37 web        20
16733 artup.Bootstrap  159m  455m  166m  304m  0.12%  0.00% S6U37 web        46 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T06:16:32.567

建议：

*   [HeapAudit](https://github.com/foursquare/heapaudit) - HeapAudit 是一个 java 代理，用于审计 JVM 进程的堆分配。
*   在 Java 安装中找到的 jStack/jMap
*   或者，如果 jConsole 拥有您所需要的一切，为什么不自己获取数据。jConsole 只是 MBean 的一个包装器，您可以通过 API 直接访问它。[例子](http://docs.oracle.com/javase/tutorial/jmx/mbeans/standard.html)
*   [BTrace](http://kenai.com/projects/btrace) - BTrace 是用于 Java 平台的安全、动态跟踪工具。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-25T19:04:52.970

有一个**TJConsole**项目，它是文本模式 JConsole。 [https://github.com/m-szalik/tjconsole](https://github.com/m-szalik/tjconsole)

# firefox - 在 Firefox 中使用硬编码的 pac 脚本

> ID：12595279
> 
> 赞同：1
> 
> 时间：2012-09-26T05:49:14.283
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk, pac

我目前正在尝试将 chrome 扩展移植到 firefox (addon-sdk)。但是，我在移植 pac 脚本功能时遇到了一些问题。

通过 chrome 扩展 API 设置代理时，您可以将 PAC 脚本设置为 pac 脚本对象内的字符串（参考：http: [//developer.chrome.com/extensions/proxy.html#type-PacScript](http://developer.chrome.com/extensions/proxy.html#type-PacScript)）

在 Firefox 中，没有这样的东西。我看到的唯一选择是从 url ( [http://kb.mozillazine.org/Firefox_: *FAQs* :_About:config_Entries](http://kb.mozillazine.org/Firefox_%3a_FAQs_%3a_About%3aconfig_Entries) ) 中提取脚本。我的问题是，当用户调整插件设置时，pac 脚本必须更改并做出反应。

有没有一种（hacky）方法可以在 Firefox 中完成类似的事情？

我想出的唯一解决方案是对用户选项进行编码并将它们发布到 pac 脚本服务器。服务器解析它们并创建一个符合需求的脚本。我想不惜一切代价避免使用服务器，因为这会导致另一个依赖！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:04:12.547

您可以为您的 PAC 文件使用[data: URI](http://en.wikipedia.org/wiki/Data_URI_scheme)。动态生成它很容易：

```
var pacScript = "function FindProxyForURL(url, host){return 'DIRECT';}";
var uri = "data:text/javascript," + encodeURIComponent(pacScript);
alert(uri); 
```

# android - 如何将列表视图项拖到其他选项卡中？

> ID：12595280
> 
> 赞同：6
> 
> 时间：2012-09-26T05:49:26.213
> 
> 标签：android

我有一个包含 3 个选项卡的选项卡活动。每个选项卡都是一个 ListView。我想将任何列表项从 tab1 拖放到 tab2 中。我尝试了很多，但找不到任何这样的例子。如果有人有想法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:11:48.077

您可以通过使用支持 v4 使 tab2 扩展片段活动并希望列表项扩展片段来解决它，然后您调用这些片段并在 tab2 中打开它们希望这可以帮助您

# php - 如何获取有关推荐链接的信息？

> ID：12595292
> 
> 赞同：0
> 
> 时间：2012-09-26T05:50:31.367
> 
> 标签：php, webserver

假设我在网站 A 中有一个链接，当它点击链接时被重定向到网站 B。网站 A 可以是博客、文章或社交书签网站。我需要知道如何获取网站 A 的 URL。我拥有网站 B。所以我需要在网站 B 上编写 PHP 脚本，通过它可以为我提供有关网站 A URL 的信息。你也可以向我推荐其他编程语言。你的回答太感激了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:59:28.283

答案是 $_SERVER['HTTP_REFERER']

当网络浏览器从一个网站移动到另一个网站以及在网站的页面之间移动时，它可以选择传递它来自的 URL。这称为 HTTP_REFERER，这篇文章着眼于如何在 PHP 中使用这个变量。

http 引荐来源网址概述

大多数 Web 浏览器默认传递 HTTP_REFERER 变量，但在许多情况下，这种行为可以更改为不显示或传递其他内容。也可以在用户的​​计算机上安装第 3 方反间谍软件等软件，这也可以防止引荐来源信息传递到 Web 服务器。因为它也可以更改为其他内容，所以 HTTP_REFERER 不可信，但它对于确定人们来自哪里仍然很有用。出现在日志文件中

以下示例来自 Apache Web 服务器的日志文件。

第一个示例显示了从该网站主页访问此特定帖子的人的日志条目的样子。我已将日志行的 HTTP REFERER 部分加粗（您需要向右滚动才能看到它）。1 192.168.1.10 - - [16/Apr/2008:16:12:36 +1200] “GET /php-http-referer-variable/HTTP/1.1”200 2014 **“http://www.electrictoolbox.com/”** Mozilla/5.0（兼容；Konqueror/3.5；Linux）KHTML/3.5.8（如 Gecko）"

第二个示例显示了相同的内容，但是因为它由 a 表示 - 只有它告诉我们用户通过输入地址或使用书签等直接进入该页面，或者使用浏览器选项屏蔽 HTTP REFERER或第三方工具。1 192.168.1.10 - - [16/Apr/2008:16:12:36 +1200] “GET /php-http-referer-variable/HTTP/1.1”200 2014 **“-”** Mozilla/5.0（兼容；Konqueror/3.5 ; Linux) KHTML/3.5.8 (like Gecko)" 在 PHP 中使用 HTTP_REFERER

PHP 中的 HTTP REFERER 存储在 $_SERVER 超级全局变量中，可以从 PHP 代码中的任何位置引用，如下例所示，只需将其写入浏览器即可： 1 echo $_SERVER['HTTP_REFERER']

如果 HTTP_REFERER 已设置，则将显示它。如果不是，那么您将看不到任何东西。如果未设置，并且您将错误报告设置为显示通知，您将看到如下错误： 1 注意：未定义索引：第 3 行 /path/to/filename.php 中的 HTTP_REFERER

为了防止在通知开启时出现此错误（我总是在通知开启的情况下进行开发），您可以这样做： 1 if(isset($_SERVER['HTTP_REFERER'])) { 2 echo $_SERVER['HTTP_REFERER']; 3 }

另一种方式是这样的： 1 echo isset($_SERVER['HTTP_REFERER']) ？$_SERVER['HTTP_REFERER'] : '';

的使用？运算符将返回 ? 之后的第一个值 如果条件为真，则为第二个值，如果条件为假。当您想要将 HTTP_REFERER 的值分配给变量时，使用它会很有用。例如：1 $referer = isset($_SERVER['HTTP_REFERER']) ？$_SERVER['HTTP_REFERER'] : ''; 结论

使用 $_SERVER['HTTP_REFERER'] 超全局变量将 HTTP_REFERER 变量用于记录等目的可能很有用。但是，重要的是要知道它并不总是设置，因此如果您使用通知进行编程，那么您需要在代码中允许这一点。上面的示例显示了执行此操作的一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:52:29.413

利用`$_SERVER['HTTP_REFERER']`

将用户代理引向当前页面的页面地址（如果有）。这是由用户代理设置的。不是所有的用户代理都会设置这个，有些提供修改 HTTP_REFERER 作为一个特性的能力。简而言之，它不能真正被信任。

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T05:52:32.547

`$_SERVER['HTTP_REFERER']`在这种情况下在您的网站上使用

遵循良好的做法，逃脱`$_SERVER["HTTP _REFERER"]`。

# python - 使用numpy添加两个不同宽度的数组

> ID：12595295
> 
> 赞同：2
> 
> 时间：2012-09-26T05:50:40.353
> 
> 标签：python, numpy

我正在学习 Numpy 作为 Matlab 的替代品。我在将 Matlab 函数映射到 Numpy 时遇到问题。程序是用matlab把两个信号相加

Matlab版本：

```
function [y.d = sigadd(xl,nl,x2,n2)
% implements y(n) = xi(n)+x2(n)
% [y,nl - sigadd(xi,nl,x2,n2)
X
% xi = first sequence over nl
% x2 - second sequence over n2 (n2 can be different from nl)
%
n = min(min(n1) ,min(n2)) :max(max(nl) ,max(n2)) ; X duration of y(n)
yl - zeros(l,length(n)); y2 = yl;
yl(find((n>=min(nl))&(n<cmar(nl))-l))lxl;
y2(find((n>=min(n2))&(n<=max(n2))==1))=x2;
y = yl+y2; 
```

我在 Python 中尝试过以下操作：

```
def SigAdd(x1,n1,x2,n2):
    n_l =  min(min(n1),min(n2))
    n_h=  max(max(n1),max(n2))
    n = arange(n_l,n_h+1)
    y1 = zeros([1,len(n)],int)
    y2 = y1
    y1 = (argwhere((n>=min(n1))&(n<=max(n1)))==1)
    y1 = x1
    y2 = (argwhere((n>=min(n2))&(n<=max(n2)))==1)
    y2 = x2
    y = y1 + y2
    return y,n 
```

预期成绩：

示例 1：长度不等的数组

```
x1 = array([1,1,1,1,1])
x2 = array([1,1,1,1])
n1 = array([1,2,3,4,5])
n2 = array([1,2,3,4])
y,n = SigAdd(x1,n1,x2,n2)
>> y 
array[2,2,2,2,1]
>>n
array[1,2,3,4,5] 
```

示例 2：等长数组

```
x1 = array([1,1,1])
x2 = array([1,1,1])
n1 = array([1,2,3])
n2 = array([3,4,5])
y,n = SigAdd(x1,n1,x2,n2)
>> y 
array[1,1,2,1,1]
>>n
array[1,2,3,4,5] 
```

如果两个数组长度相等，它可以正常工作，但不适用于不相等的数组。我知道问题是我正在用 x1 的值覆盖 y1（我最初用零创建）导致问题。我在 Numpy 中使用了 argwhere 命令，它相当于 Matlab 的 Find 命令，但是如果我像上面显示的 Matlab 程序那样使用它，它会显示错误，即无法将值分配给可调用函数。

基本上在 Matlab 程序中，不相等的数组用零填充。即使两个信号长度相等但位置不同，Matlab 版本也能处理条件。我想使用 Python 而不是 Matlab，但这些转换问题正在引起痛苦。

**一些修改：（但不工作，索引错误：越界来）**

```
def SigAdd(x1,n1,x2,n2):
    n_l =  min(min(n1),min(n2))
    n_h=  max(max(n1),max(n2))
    n = arange(n_l,n_h+1)
    y1 = zeros([1,len(n)],int)
    y2 = y1
    y11 = argwhere((n>=min(n1))&(n<=max(n1)))
    q = 0
    for w in y11:
        y1[w]= x1[q]
        q = q + 1
    y22 = argwhere((n>=min(n2))&(n<=max(n2)))
    q = 0
    for w in y22:
        y2[w]= x2[q]
        q = q + 1
    y = y1 + y2
    return y 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T06:26:20.787

您可以分配给切片：

```
def SigAdd(x1,n1,x2,n2):
    n_l = min(n1[0], n2[0])
    n_h = max(n1[-1], n2[-1])
    n = arange(n_l, n_h+1)
    y = zeros(len(n), int)
    i = n1[0] - n[0]
    y[i:i+len(x1)] = x1
    i = n2[0] - n[0]
    y[i:i+len(x2)] += x2
    return y 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T06:34:10.643

使用花哨的索引：

```
import numpy as np
high = max(n2[-1], n1[-1])
low = min(n2[0], n1[0])
n1_ = n1 - low  # use 0-based indexing
n2_ = n2 - low
y = np.zeros(high - low + 1, dtype=x1.dtype)
y[n1_] += x1
y[n2_] += x2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T15:27:14.763

这帮助我解决了类似的问题。这个想法是首先使向量长度相等（最后用 0 填充较短的长度）。缺点是转换为列表以及这些列表的内存开销。然而，对于快速而肮脏的任务，它已经很好地发挥了作用。

```
def MakeVectorsSameSize(v1,v2):
  """given two vectors zero pad smaller to match length of bigger"""
  #make the vectors length of longest 0 pad
  l1 = len(v1)
  l2 = len(v2)
  if l1 < l2:
    #put l2-l1 elements into v1
    z1 = numpy.ones(l2-l1)*0
    v1 = list(v1)
    v1.extend(z1)
    v1 = numpy.array(v1)
  elif l1 > l2:
    #put l1-l2 elements into v2
    z2 = numpy.ones(l1-l2)*0
    v2 = list(v2)
    v2.extend(z2)
    v2 = numpy.array(vTemp)

  return v1,v2 
```

# html - TD 元素的宽度不适用于网格

> ID：12595303
> 
> 赞同：1
> 
> 时间：2012-09-26T05:51:22.817
> 
> 标签：html, css, razor

```
<div id="example" class="k-content">

<table id="grid" style="float: left; position: relative">
    <thead>
        <tr>
            <th width ="310px"data-field="FileName">File Name
            </th>
            <th  width ="290px"data-field="ID">File Identifier
            </th>

        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr >
                <td  class="idRank" >
                    @item.FileName
                </td>
                <td  class="idRank2"  >
                    @item.ID
                </td>

            </tr>
        }
    </tbody> 
```

我使用外部 CSS

```
table#grid.k-focusable td.idRank
         { width:310px;
          } 
```

但它不适用并且不能扩大 310 像素，知道吗？还有什么其他css方法可以让我得到应用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T05:57:52.840

因为您在(290px)处为您的第一列和另一列提供相同的**宽度 (** **310px)**；你必须根据你应得的桌子宽度给它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:03:04.423

不需要 Class `.k-focusable`in `table#grid.k-focusable td.idRank { width:310px;}`

由于`.k-focusable`未设置此宽度。

而是尝试

```
table#grid .idRank
{ width:310px;} 
```

# android - 签署 APK 后 Http 客户端返回 null

> ID：12595305
> 
> 赞同：0
> 
> 时间：2012-09-26T05:51:31.113
> 
> 标签：android, http, jar-signing, android-keystore

我正在开发一个 android 应用程序，它使用在其 url 中有 https 协议的 web 服务。

我正在向该服务发出 GET 请求。

奇怪的是，当我使用调试密钥库编译我的 android apk 时，webservice 正在返回预期的结果，而当我使用 release keystore 签署我的 apk 时，webservice 总是向我返回带有空消息的错误。

请帮助我。

更多信息：

*   url参数包含韩语单词
*   遵循 UTF-8 编码
*   我正在使用 keytool 进行签名过程
*   我没有压缩它

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-26T05:56:36.960

你用什么签的？eclipse里面的精灵？您是否尝试过创建不同的密钥？

# asp.net - 关于 ASP 和 Razor 的几个问题

> ID：12595307
> 
> 赞同：0
> 
> 时间：2012-09-26T05:51:40.973
> 
> 标签：asp.net, razor, security, httpresponse

我有一些事情在我的脑海里，我想我会问这里的退伍军人。我正在使用 Razor 语法和 WebMatrix 创建一个网站。我目前正在实现一个用户登录系统。所以我的问题是：

1.  在 WebSecurity 中，生成令牌时（用于创建新帐户或恢复密码等），该令牌是否为公钥？它可以通过不安全的网络或电子邮件安全地通过电子邮件发送给用户吗？进一步加密此令牌是一种好习惯（或有用）吗？

2.  我已将我的安全页面设置为不在网络浏览器上缓存，即用户使用密码登录后访问的页面。我认为这是必要的操作，因为当用户注销时，我不希望用户按下浏览器的后退按钮并再次查看受保护的页面。因此，我将所有安全页面的到期时间设置如下：

    ```
    Response.Expires = -1;
    Response.Cache.SetNoServerCaching();
    Response.Cache.SetAllowResponseInBrowserHistory(false);
    Response.CacheControl = "no-cache";
    Response.Cache.SetNoStore(); 
    ```

我上面的问题是，如果我将页面设置为立即过期，浏览器不会缓存任何内容并在每次用户访问时重新加载页面，这是否意味着浏览器甚至不会缓存链接的样式表、脚本文件和图像? 我已将图像设置为预加载，以便网站的演示能够顺利进行；网页的立即到期会导致这些图像和所有内容在每个页面上一遍又一遍地加载吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:16:39.877

1.  它不是“公共令牌”，因为任何可以访问该令牌的人都可以使用它来重置用户的密码并登录。所以它确实需要安全地发送，并且重置链接应该需要 SSL。

2.  不会，特定页面的缓存过期设置不会影响其他内容的缓存。您可以使用 IIS 管理器或在 web.config 中设置静态内容的缓存策略/标头。

# iphone - 如何在模拟器存折上测试我的优惠券？- IOS

> ID：12595313
> 
> 赞同：0
> 
> 时间：2012-09-26T05:52:30.473
> 
> 标签：iphone, ios, ipad, ios6, passbook

我已经创建了一张优惠券.pkpass，如何在模拟器存折上测试我的优惠券？我想知道我的优惠券创建成功与否。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:59:20.743

阅读 Raywenderlich 提供的这些 Passbook 教程，可能会对您有所帮助

还将向您解释如何在现实生活中使用它。

[iOS 6 中的存折入门：第 1/2 部分](http://www.raywenderlich.com/20734/beginning-passbook-part-1)

[iOS 6 中的存折入门：第 2/2 部分](http://www.raywenderlich.com/20785/beginning-passbook-in-ios-6-part-22)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T14:58:06.253

最简单的方法是将 .pkpass 包从 finder 拖到模拟器中。

要通过 Safari 在模拟器上显示 .pkpass 包，您需要通过 MIME 类型为`application/vnd.apple.pkpass`.

由于 OSX 内置了 Apache，您可以将 .pkpass 文件放在 ~/Sites 文件夹中，并通过模拟器上的 Safari 访问它`http://localhost/~yourUsername/your.pkpass`

[该站点](http://osxdaily.com/2012/09/02/start-apache-web-server-mac-os-x/)提供了有关如何使用 Mountain Lion 启动和运行 Apache 的分步指南。

要添加 .pkpass MIME 类型，您需要将以下行添加到 /etc/apache2/mime.types

```
application/vnd.apple.pkpass    .pkpass 
```

# mysql - 比较 MySQL 触发器中的日期

> ID：12595319
> 
> 赞同：1
> 
> 时间：2012-09-26T05:53:13.890
> 
> 标签：mysql, datetime, triggers

我有两张桌子，圆桌和活动桌。一轮有许多事件。

```
create table round (
    round_id INTEGER AUTO_INCREMENT NOT NULL,
    round_start_date DATETIME NOT NULL,
    round_end_date DATETIME NOT NULL,
    CONSTRAINT round_pk PRIMARY KEY (round_id)
);

create table event (
    event_id INTEGER AUTO_INCREMENT NOT NULL,
    round_id INTEGER NOT NULL,
    event_date DATETIME NOT NULL,
    CONSTRAINT event_pk PRIMARY KEY (event_id),
    CONSTRAINT round_fk FOREIGN KEY (round_id) REFERENCES round (round_id),
); 
```

当向事件表中插入一行时，我想使用触发器将新插入行的 event_date 字段与圆表中其相应条目中的 round_start_date 和 round_end_date 字段进行比较。如果 event_date 早于 round_start_date，round_start_date 应该用新的 event_date 更新。如果 event_date 在 round_end_date 之后，round_end_date 应该用新的 event_date 更新。

这是我的触发器。它不起作用，我不明白为什么。我在网络上找不到任何其他人尝试在触发器中使用日期时间类型的地方，所以我没有参考框架来说明我哪里出错了。

```
create trigger update_round_date
after insert on event for each row
begin
    declare curSdate datetime;
    declare curEdate datetime;
    set curSdate = (select round_start_date from round where round_id = NEW.round_id);
    set curEdate = (select round_end_date from round where round_id = NEW.round_id);
    if (NEW.event_date < curSdate) then
        update round set round_start_date = NEW.event_date where round_id = NEW.round_id;
    else if (NEW.event_date > curEdate) then
        update round set round_end_date = NEW.event_date where round_id = NEW.round_id;
    end if;
end; 
```

编辑：我根本无法创建触发器。phpMyAdmin 给了我这个错误：“#1064 - 您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在第 4 行的 '' 附近使用正确的语法”

编辑 2：使用分隔符集更新

```
DELIMITER $$
create trigger update_round_date
after insert on event for each row
begin
    declare curSdate datetime;
    declare curEdate datetime;
    set curSdate = (select round_start_date from round where round_id = NEW.round_id);
    set curEdate = (select round_end_date from round where round_id = NEW.round_id);
    if (NEW.event_date < curSdate) then
        update round set round_start_date = NEW.event_date where round_id = NEW.round_id;
    else if (NEW.event_date > curEdate) then
        update round set round_end_date = NEW.event_date where round_id = NEW.round_id;
    end if;
end$$ 
```

这将返回错误：“#1064 - 您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，了解在第 13 行的 '' 附近使用的正确语法”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:15:15.040

phpmyadmin中的分隔符可能有问题，尝试使用这个触发器 -

```
CREATE TRIGGER trigger1
AFTER INSERT
ON event
FOR EACH ROW
  UPDATE
    round
  SET
    round_start_date =
      IF(NEW.event_date < round_start_date, NEW.event_date, round_start_date),
    round_end_date =
      IF(NEW.event_date > round_end_date, NEW.event_date, round_end_date)
  WHERE
    round_id = NEW.round_id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:18:05.373

MySQL 可能在第一个 ';' 处停止，将您的命令解释为：

```
create trigger update_round_date 
after insert on event for each row
begin
    declare curSdate datetime; 
```

您必须先将定界符设置为其他内容，然后使用该定界符终止创建触发器命令（并将定界符放回末尾）：

```
delimiter ^

create trigger update_round_date 
after insert on event for each row
begin
    ...
end;

^

delimiter ; 
```

我相信后面的最后一个分号`end`可能是必要的。

# css - IE 8 不在 div 上显示 dojo 图像

> ID：12595321
> 
> 赞同：0
> 
> 时间：2012-09-26T05:53:44.857
> 
> 标签：css, internet-explorer-8, dojox.charting

我想在道场图表上显示图像。为此，我使用以下代码

```
var l_images = ["images/clearnight.png","images/clear.png","images/partlyCloudy.png","images/cloudy.png","images/showers.png","images/rain.png","images/thunderstorms.png","images/ice.png","images/flurries.png","images/snow.png","images/partlyCloudynight.png"];
        var d = new dojo.Deferred();
        for(var i=1 ; i < conditionData.length-1 ; i++ ) {
            var l_con_map = conditionData[i];
                        var l_image_id = "image"+i;
            try {
                dojo.create("img", {src: l_images[l_con_map.conditon]}, dojo.byId(l_image_id));
            } catch(e) {

                d.errback(e);
            }
        } 
```

每个 l_image_id 都是一个带有 css 的 div。例如 ：

而CSS是

```
.zdiv1css {
    position:absolute;
    top:240px;
    right:0px;
    left:190px;
    width:200px;

} 
```

它适用于 IE9 和 chrome，但 IE8 不显示任何图像。

请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:09:15.473

.........................................................

添加

```
z-index:999 
```

像这样

```
.zdiv1css {
z-index:999;
} 
```

# wpf - 在 WPF MVVM 项目中处理 Viewmodel 中的鼠标事件

> ID：12595322
> 
> 赞同：0
> 
> 时间：2012-09-26T05:53:44.793
> 
> 标签：wpf, mvvm, wpf-controls, itemscontrol

我正在使用 System.Windows.Interactivity.dll 和 Microsoft.Expression.Interaction.dll 在我的 MVVM WPF 项目中的 Viewmodel 中进行事件处理。下面是我的 Xaml 中的代码：

```
 <ItemsControl ItemsSource="{Binding Path= HeaderList}" Grid.Row="0" Grid.Column="0" >
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                  <TextBlock   Text="{Binding Text}" Width="100" HorizontalAlignment="Left" >  
                      <i:Interaction.Triggers>
                          <i:EventTrigger EventName="PreviewMouseLeftButtonDown">
                             <ie:CallMethodAction MethodName="PrevMouseDownEventHandler" TargetObject="{Binding}" />
                          </i:EventTrigger>
                       </i:Interaction.Triggers>
                </TextBlock>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

为此，我在同一个 Xaml 中添加了命名空间。

```
 xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
 xmlns:ie="http://schemas.microsoft.com/expression/2010/interactions" 
```

在我的视图模型中，我创建了一个`PrevMouseDownEventHandler`名称与我在 Xaml 中的 EventTigger 中提到的 CallMethod 名称相同的方法。

在运行我的应用程序时，当我在 TextBlock 事件上按下鼠标按钮时，会生成并查找方 `PrevMouseDownEventHandler`​​法并让我陷入以下异常：

`Could not find method named 'PrevMouseDownEventHandler' on object of type 'string' that matches the expected signature.`

此方法在我的 ViewModel 中如下所示。

```
public void PrevMouseMoveEventHandler(object sender, MouseButtonEventArgs e)
    {
        // Some implementation here;  
    } 
```

我不知道我哪里出错了。除此之外，Viewmodel 中的所有功能对我来说都可以正常工作。对此有什么可能的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:57:48.090

[`CallMethodAction`](http://msdn.microsoft.com/en-us/library/ff723947%28v=expression.40%29.aspx)是一个没有参数也没有返回值的委托。所以“处理程序”（实际上是一个动作触发器）必须看起来像这样：

```
public void PrevMouseMoveEventHandler()
{
    // Some implementation here;  
} 
```

此外，您需要绑定到视图模型（您当前的绑定指向 中的当前项目`ItemsControl`）。`RelativeSource`您可以使用绑定来做到这一点：

```
<ie:CallMethodAction MethodName="PrevMouseDownEventHandler" 
    TargetObject="{Binding Path=DataContext,RelativeSource={RelativeSource AncestorType=ItemsControl}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:59:16.503

它正在寻找您已将 Text 属性绑定到的 String 对象上的方法。

基本上，您的数据上下文已从视图模型更改为视图模型的属性。

# javascript - JavaScript 单元测试：保存测试/规范文件的位置（客户端和节点）

> ID：12595325
> 
> 赞同：8
> 
> 时间：2012-09-26T05:54:07.180
> 
> 标签：javascript, unit-testing, node.js

是否可以将测试文件存储在模块本身的位置：

假设我有一个结构：

```
project\
  module1\
    submodule\
       submodule.js
       submodule.test.js 
```

或者最好创建一个单独的位置来重复项目的结构：

```
project\
  module1\
    submodule\
       submodule.js
tests\
  module1\
    submodule\
       submodule.js 
```

我见过这两种变体。应该考虑什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-26T05:57:27.787

项目相当普遍地将测试保存在单独的位置，但不一定重复项目结构。测试结构通常比项目结构更扁平。

您可以在以下位置查看人们如何做到这一点的一些示例：
[https ://github.com/visionmedia/express](https://github.com/visionmedia/express)
[https://github.com/learnboost/mongoose](https://github.com/learnboost/mongoose)
[https://github.com/mbostock/d3](https://github.com/mbostock/d3)

至于为什么这样做，它使执行测试更容易，因为它们都在一个文件夹中，并且由于源文件和测试文件没有混合，所以打包代码更容易。它在执行代码覆盖构建等操作时也很有帮助，因为您需要检测所有源文件但又不想检测测试代码。

一般来说，每当我对项目结构有疑问时，我都会查看 GitHub 上的热门项目并大量借用 :)

# ruby - 如何从全名中提取名字和姓氏

> ID：12595326
> 
> 赞同：1
> 
> 时间：2012-09-26T05:54:18.210
> 
> 标签：ruby, regex

我有一个正则表达式，给定全名，应该捕获名字和姓氏。它应该排除后缀，例如“Jr.”：

```
(.+)\s(.+(?!\sJr\.)) 
```

但是这个应用于字符串的正则表达式`Larry Farry Barry Jones Jr.`给出了匹配：

```
 1\.    Larry Farry Barry Jones
  2\.    Jr. 
```

为什么我的负面展望未能忽略“Jr.” 解析全名时？我希望匹配 #2 包含“琼斯”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:30:44.843

与其尝试使用单个正则表达式，我认为以下代码将是更易于维护的代码。

```
full_name = "Larry Farry Barry Jones Jr."
name_parts = full_name.split - ["Jr."]
first_name, last_name = name_parts[0], name_parts[-1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:43:09.833

正如评论所提到的，它是第一个`.*`匹配大多数字符串的。在这里使用前瞻似乎是正确的，因为您不想返回该值并且不需要将其包含在进一步的匹配中。

以下将拆分所有单词，但不返回“Jr.”。所以你可以取第一个和最后一个结果。

```
(\w+\s)+?(?!\sJr\.) 
```

我推荐使用[Rubular](http://rubular.com/)来练习 Ruby RegExp。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T07:00:02.500

原因是您的字符串匹配`.+`到最后，然后执行正则表达式前瞻，没有“Jr”。跟随（因为我们已经在最后）==>完美，我们匹配！

但那是因为你的模式是错误的。最好是这样：

```
\S+(?:\s(?!Jr\.)\S+)* 
```

[在 Regexr 上](http://regexr.com?32976)查看

方法：

`\S+`匹配一系列至少一个非空白字符。

`(?:\s(?!Jr\.)\S+)*`非捕获组：匹配一个空格，然后，如果它不是“Jr.”，则匹配下一系列非空格字符。这个完整的组可以重复 0 次或更多次。

# ruby-on-rails - Rails 从 JSON 数组中选择

> ID：12595327
> 
> 赞同：1
> 
> 时间：2012-09-26T05:54:39.237
> 
> 标签：ruby-on-rails, ruby, json, foursquare

我有一个从 Foursquare 返回的 JSON 数组；让我们称之为`@venues`。我希望能够通过下拉框“选择”一个场地，并且我希望它成为表单的一部分。

这意味着我希望能够按名称选择特定场所（即在本例中为Hotel Utah Saloon），并将其保存`id`到模型中。澄清一下，我只会保存我选择的场所，而不是全部。

通过研究，我发现自己在 、 和 之间`select`感到`collection_select`困惑`select_tag`。请记住，这是直接来自`JSON.parse`方法的 JSON，而不是数据库模型。

如何在表单中创建此下拉菜单？

为了澄清，`@venues`看起来像这样：

```
[
            {
               "beenHere":8,
               "venue":{
                  "id":"3fd66200f964a52023f11ee3",
                  "name":"Hotel Utah Saloon",
                  "contact":{
                     "phone":"4155466300",
                     "formattedPhone":"(415) 546-6300",
                     "twitter":"hotelutah"
                  },
                  "location":{
                     "address":"500 4th St",
                     "crossStreet":"Corner of Bryant",
                     "lat":37.77947007181946,
                     "lng":-122.39816943501836,
                     "postalCode":"94107",
                     "city":"San Francisco",
                     "state":"CA",
                     "country":"United States",
                     "cc":"US"
                  },
                  "categories":[
                     {
                        "id":"4bf58dd8d48988d1e9931735",
                        "name":"Rock Club",
                        "pluralName":"Rock Clubs",
                        "shortName":"Rock Club",
                        "icon":"https:\/\/foursquare.com\/img\/categories\/arts_entertainment\/musicvenue_rockclub.png",
                        "parents":[
                           "Arts & Entertainment",
                           "Music Venues"
                        ],
                        "primary":true
                     }
                  ],
                  "verified":true,
                  "stats":{
                     "checkinsCount":6654,
                     "usersCount":3330,
                     "tipCount":50
                  },
                  "likes":{
                     "count":0,
                     "groups":[

                     ]
                  },
                  "beenHere":{
                     "count":0
                  }
               }
            }
        ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:52:29.293

控制器

```
@venues = JSON.parse @venues 
```

看法

```
<%= select(:model, :venue_id, @venues.map {|v| [ v['venue']['name'], v['venue']['id'] ] }) %> 
```

或者更清洁：

控制器

```
@venues = JSON.parse @venues
@venues_list = @venues.map { |v| v['venue'] } 
```

看法

```
<%= select(:model, :venue_id, @venues_list.map {|v| [ v['name'], v['id'] ] }) %> 
```

有关[选择助手](http://apidock.com/rails/v3.2.8/ActionView/Helpers/FormOptionsHelper/select)的更多信息。

# iphone - 使用地图视图进行警报选择

> ID：12595331
> 
> 赞同：0
> 
> 时间：2012-09-26T05:55:11.313
> 
> 标签：iphone, ios, xcode, google-maps, core-location

在我的应用程序中，我使用了带有 mapview 的核心位置和 Mapkit 框架。当 wwe 安装应用程序时，它会默认显示类似“想使用当前位置”的警报，而无需编码一次。如果我选择“不允许”，地图视图只会显示蓝色背景？如果我选择“确定”，那么它工作正常。

帮我！

我的代码如下：

Appdelegate.m

```
CLLocationManager *locationManager;

    CLLocation *userLocation;
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.

    [self createEditableCopyOfDatabaseIfNeeded];

    //=========================================Location Manager

    if(locationManager == nil)

        locationManager =[[CLLocationManager alloc] init];

    self.locationManager.delegate = self;

    self.locationManager.desiredAccuracy= kCLLocationAccuracyBest;

    self.locationManager.distanceFilter= 5;

    [locationManager startUpdatingLocation];
    [locationManager startUpdatingHeading];
    //==========================================
}

-(void) locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{
    NSLog(@"new location");

    self.userLocation=newLocation;

    NSLog(@"user llocation %f , %f",userLocation.coordinate.latitude,userLocation.coordinate.longitude);

    [self.locationManager startMonitoringSignificantLocationChanges];
}

Mapview.h
{
IBOutlet MKMapView *map;

        CLLocation         *currentLocation;
        NSString           *specificLatitude;
        NSString           *specificLongitude;

    MKCoordinateRegion  region;
}

Mapview.m

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    [APPDELEGATE.locationManager startUpdatingLocation];

}
- (void)viewWillAppear:(BOOL)animated
{
self.map.delegate = self;

    // Ensure that you can view your own location in the map view.
    [self.map setShowsUserLocation:YES];
}

-(void)viewDidAppear:(BOOL)animated{

    currentLocation =APPDELEGATE.userLocation;

    region.center = self.currentLocation.coordinate;
    MKCoordinateSpan span;
    span.latitudeDelta = 0.05;
    span.longitudeDelta = 0.03;
    region.span = span;
    [map setRegion:region animated:TRUE];
    [self searchPressed];

    NSLog(@"Mapview %f %f",currentLocation.coordinate.latitude,currentLocation.coordinate.longitude
          );

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:59:50.553

如果您选择“不允许”，请致电该代表。

```
- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{
     //Do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:30:43.183

我还没有尝试过，但也许你可以测试一下它是否有效。

对于显示地图视图的视图控制器，请尝试符合 UIAlertViewDelegate。

然后在警报视图委托回调方法中，您可以做任何您想做的事情，如果它有效：

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    // you need to type the exact title of the alert popup
    // button index starts from 0 (left most button), so if the are 2 buttons 
    // and "Don't allow" button is on the right, the button == 1 is that button
    // the user tapped on

    if([alertView.title isEqualToString:@"Type Exact Alert Title Here"] && buttonIndex == 1)
    {
        // do something
    }
} 
```

# android - 完成第二个活动后如何在第一个活动中调用 onCreate 方法（由第一个活动调用）

> ID：12595332
> 
> 赞同：1
> 
> 时间：2012-09-26T05:55:16.527
> 
> 标签：android

我是android的初学者。我有一个简单的代码，我从我的第一个活动中调用一个活动，在第二个活动中我有一个按钮，按下该按钮第二个活动完成并且第一个活动出现。有没有办法在第一个活动中调用**onCreate**方法，因为在第一个活动中永远不会调用 onCreate 方法（总是调用 onResume）？我是否在清单文件中编辑了一些东西。

以下是我的代码

```
 public class Activity1 extends Activity {
  /** Called when the activity is first created. */

 TextView mTextView ;

 Button b1;
 static int count=0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mTextView = (TextView) findViewById(R.id.textView2);

    if (savedInstanceState == null) {
        mTextView.setText("Welcome to HelloAndroid!");
    } else {
        mTextView.setText("Welcome Back!");
        System.out.println("count------>"+ count);
    }

    final Intent i = new Intent(this,activity2.class);
    b1 = (Button) findViewById(R.id.button1);
    b1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            startActivity(i);

        }
    });

}

@Override
public void onResume() 
{
    super.onResume();
    System.out.println("inside Resume");
 }

@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    // Checks the orientation of the screen
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
        Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
    }
}
    @Override
    public void onSaveInstanceState(Bundle savedInstanceState) {
      super.onSaveInstanceState(savedInstanceState);

      savedInstanceState.putBoolean("MyBoolean", true);
      savedInstanceState.putDouble("myDouble", 1.9);
      savedInstanceState.putInt("MyInt", 1);
      savedInstanceState.putString("MyString", "Welcome back to Android");
      count++;
    }

    @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {
      super.onRestoreInstanceState(savedInstanceState);

      boolean myBoolean = savedInstanceState.getBoolean("MyBoolean");
      double myDouble = savedInstanceState.getDouble("myDouble");

      System.out.println("MyBoolean"+ myBoolean);
      System.out.println("myDouble"+ myDouble);
    }

} 
```

这是我的第二个活动，由第一个活动调用

```
public class activity2 extends Activity{

TextView textview;
Button b1;
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main2);

        textview = (TextView) findViewById(R.id.textView1);

        textview.setText("in activity2");

        b1 = (Button) findViewById(R.id.button1);

        b1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                finish();
            }
        });
 }
} 
```

有人请帮我谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:00:11.380

在第一个活动中，在第二个活动`finish()`之后调用`startActivity(i);`，在第二个活动中，在调用之前启动第一个活动`finish()`。当您启动一个没有实例的活动时，`onCreate`它将被调用。

**编辑：**

如果你想保存第一个活动的状态，你可以创建一个包并将你的视图状态添加到它。然后将此包作为额外的添加到启动第二个活动的意图中。在第二个活动中，当你想要时从意图中获取这个额外的通过意图启动第一个活动（例如 startFirstActivity 意图）将该包添加到此意图（startFirstActivity 意图）。现在在`onCreate`第一个活动的方法中，从意图（通过`getIntent().getextras()`）获取包，如果它不为空，则从中提取视图的状态并在通过 ID 找到它们后设置您的视图状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:00:50.217

只需使用完成（）；在活动 1 中的 startActivity(i) 之前

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:02:14.177

`activity2`在第二个按钮单击中使用此代码，然后`finish()`在`Activity1`之后移动到 Activity2 调用`statActivity();`

```
b1.setOnClickListener(new View.OnClickListener() {

   @Override
   public void onClick(View v) {

      Intent i = new Intent(Activity2.this ,Activity1.class);
      startActivity(i);
   }
}); 
```

# javascript - CanJS/JavascriptMVC：如何将视图模板存储在变量中

> ID：12595333
> 
> 赞同：1
> 
> 时间：2012-09-26T05:55:18.573
> 
> 标签：javascript, jquery, canjs, canjs-view

是否可以在 javascript 变量中定义视图模板，而不是脚本标签或文件？

像这样的东西：

```
var template = "< h1 ><%= title %> < / h1 >"; 
var rendered = can.view.render(template, data); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T06:00:54.453

好的，经过大量研究，因为它没有写在文档中，我找到了如何去做。诀窍是您必须先使用 id 注册模板。如果您使用脚本标签或 url 来查找模板，则此步骤由 canJS 自动完成。

所以，如果你想渲染一个模板，存储在一个变量中，你必须做这样的事情：

```
var template = "< h1 ><%= title %> < / h1 >"; 
can.view.ejs('my-view-id', template);​​​​​​​
var rendered = can.view.render('my-view-id', data); 
```

现在您在`rendered`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:30:13.357

看看 jquery utils string format [plugin](http://code.google.com/p/jquery-utils/wiki/StringFormat)。有一个示例显示从定义为字符串的模板渲染 html。

创建模板：

```
$.tpl('tweet', [
    '<div id="tweet-{id:s}" class="tweet">',
        '<div class="tweet-body"><b>@{from:s}</b>: {body:s}',
            '(<a href="{href:s}" class="tweet-date">',
                '<abbr title="{timestamp:s}">{timesince:s}</abbr>',
            '</a>)',
        '</div>',
    '</div>'
]); 
```

渲染：

```
$.getJSON('/tweets/username/', function(resp, s){
    $.each(resp.tweets, function(idx, tweet) {
        $.tpl('tweet', {
            id: tweet.id,
            body: tweet.body,
            from: tweet.screen_name,
            timestamp: tweet.pub_time,
            timesince: $.timeago(tweet.pub_time)
        }).appendTo('#tweet-list');
    });
}); 
```

# jquery - IE7 列表在另一个之上

> ID：12595334
> 
> 赞同：1
> 
> 时间：2012-09-26T05:55:32.083
> 
> 标签：jquery, css

我正在使用 IE7，但列表位于子菜单的顶部，有没有办法将其置于顶部？它在 IE8 或 plus 上运行良好，但在 IE7 上运行良好。希望有人能帮忙。非常感谢

[这](http://jsfiddle.net/xvDbv/16/)是代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:22:40.583

您正在使用`display:inline-block`. IE 7 没有正确解释这一点，需要 hack 才能将元素实际显示为`inline-block`.

在您的选择 CSS 语句中添加以下内容：

```
.select {
    display:inline-block;
    *display:inline; /* IE 7 hack */
    zoom:1;          /* IE 7 hack */
} 
```

或者，您可以创建一个仅限 IE7 的样式表并使用上述内容而无需 hack。

这解决了 IE7 中的问题，但您可能希望更改某些元素的 Z-index 以停止下拉列表显示在底部选择框下方。

[更新小提琴](http://jsfiddle.net/xvDbv/18/)

# c++ - Listview 列排序

> ID：12595337
> 
> 赞同：0
> 
> 时间：2012-09-26T05:55:44.510
> 
> 标签：c++, listview, vcl

我正在使用 C++ Builder VCL 表单应用程序，并且有一个包含列和多个子项的 listView。当用户单击任何列标题时，我能否帮助对 listView 进行排序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:12:05.610

使用`TListView.OnColumnClick`事件知道点击了哪一列。使用该`TListView.CustomSort()`方法进行实际排序。如果您没有在`SortProc`参数中传递自定义过程，`TListView.OnCompare`则将使用该事件。`OnColumnClick`将事件中的列信息传递给`lParam`参数，`CustomSort()`以便将其传递给您的自定义排序过程/处理程序，然后它可以使用它来决定如何对项目进行排序（即：如果单击第 1 列然后排序`Caption`，如果单击第 2 列然后排序`SubItems[0]`等）。

# javascript - ~~在javascript中有什么用？

> ID：12595341
> 
> 赞同：5
> 
> 时间：2012-09-26T05:56:02.937
> 
> 标签：javascript

> **可能重复：**
> [按位不理解 javascript](https://stackoverflow.com/questions/1133473/understanding-javascript-bitwise-not)

我在这里找到了它：下面[的前端面试问题](http://darcyclarke.me/development/front-end-job-interview-questions/)问题。这个代码~~3.14会返回什么？

我在谷歌上搜索，但没有找到任何关于此的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T06:06:21.993

`~`是JavaScript（以及 C/C++ 和其他语言）中的*按位补码运算符。*您可以在此处找到更多详细信息：[按位补码 (~) 运算符如何工作？](https://stackoverflow.com/questions/791328/how-does-the-bitwise-complement-operator-work)

在这种情况下：

*   `3.14`从浮点数转换为整数，所以变成`3`.
*   `~3`是`-4`因为[二进制补码](http://en.wikipedia.org/wiki/Two's_complement)表示。
*   然后`~(-4)`变成`3`。

基本上，对于具有二进制补码表示的整数，`~n`等于`-n-1`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T06:00:54.583

它将返回 3.`~`表示 JavaScript 中的按位 NOT 运算符。

基本上〜3.14与〜3相同，即二进制的〜011 => 100或以10为底的4。〜4或〜100是以10为底的011或3。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-26T06:01:33.907

波浪号在将输入转换为 32 位整数后对输入执行[按位“非”。](http://en.wikipedia.org/wiki/Bitwise_operation#NOT)

来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators)：

> 按位注意任何数字都会`x`产生`-(x + 1)`. 例如，`~5`产量`-6`。

在你的情况下：

```
 ~~3.14
= -((~3.14) + 1)
= -(-(3.14 + 1) + 1)
= -(-(3 + 1) + 1)
= -(-4 + 1)
= -(-3)
= 3 
```

# jquery - jQuery（自定义）轮播不重复

> ID：12595342
> 
> 赞同：2
> 
> 时间：2012-09-26T05:56:05.963
> 
> 标签：jquery, carousel, repeat

我用我从网上捡到的比特制作了一个自定义的 jQuery 轮播，但我无法让它正常工作。

所发生的只是旋转木马工作但一直向左滑动。经过一些调试后，我发现 carousel_ul 的左侧继续减去图像宽度，但没有像我认为的那样返回到 -960。

我在这里看到了一些关于轮播的文章，但没有一篇使用我想要的方法。

这是我的代码：

HTML：

```
<div id="carousel_container">
        <div id="carousel_inner">   
            <ul id="carousel_ul">
                <li>
                    <img src="http://static.shopify.com/s/files/1/0167/9164/t/5/assets/carousel-item-1.jpg?1321" alt="" />
                </li>
                <li>
                        <img src="http://static.shopify.com/s/files/1/0167/9164/t/5/assets/carousel-item-2.jpg?1321" alt="" />
                </li>
                <li>
                        <img src="http://static.shopify.com/s/files/1/0167/9164/t/5/assets/carousel-item-3.jpg?1321" alt="" />
                </li>
                <li>
                        <img src="http://static.shopify.com/s/files/1/0167/9164/t/5/assets/carousel-item-4.jpg?1321" alt="" />
                </li>
            </ul>                       
        </div>
    </div> 
```

CSS：

```
 #carousel_ul {  
position:relative;  
left:-960px; /* important (this should be negative number of list items width(including margin) */  
list-style-type: none; /* removing the default styling for unordered list items */  
margin: 0px;  
padding: 0px;  
width:9999px; /* important */  
/* non-important styling bellow */  
padding-bottom:0px;  
}  

#carousel_ul li{  
float: left; /* important for inline positioning of the list items */  
width:960px;  /* fixed width, important */  
/* just styling bellow*/  
padding:0px;  
height:300px;  
background: #000000;  
margin-top:0px;  
margin-bottom:0px;  
margin-left:0px;  
margin-right:0px;  
}  

#carousel_ul li img {  
.margin-bottom:-4px; /* IE is making a 4px gap bellow an image inside of an anchor (<a href...>) so this is to fix that*/  
/* styling */  
cursor:pointer;  
cursor: hand;  
border:0px;  
} 
```

jQuery：

```
jQuery(document).ready(function ($) {
//rotation speed and timer
var speed = 2000;
var run = setInterval('rotate()', speed);   

 jQuery('#carousel_ul li:first').before(jQuery('#carousel_ul li:last'));
});

//a timer will call this function, and the rotation will begin :)  
function rotate() {
var item_width = jQuery('#carousel_ul li').outerWidth() ; 

//calculate the new left indent of the unordered list  
var left_indent = parseInt(jQuery('#carousel_ul').css('left')) - item_width;  

//alert(left_indent);

//make the sliding effect using jquery's anumate function '  
jQuery('#carousel_ul').animate({'left' : left_indent},{queue:false, duration:1000},function(){  

    //get the first list item and put it after the last list item (that's how the infinite effects is made) '  
    jQuery('#carousel_ul li:last').after(jQuery('#carousel_ul li:first'));  

    //and get the left indent to the default -960px  
    jQuery('#carousel_ul').css({'left' : '-960px'});  
});
} 
```

它是从几个例子中被屠杀的。

碰巧我无法按我的意愿工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T17:15:37.973

它不起作用的原因是动画功能没有被触发。通过仅设置持续时间，轮播将根据您的要求正确运行。

```
//make the sliding effect using jquery's anumate function '  
jQuery('#carousel_ul').animate({'left' : left_indent}, 1000,function(){  

    //get the first list item and put it after the last list item (that's how the infinite effects is made) '  
    jQuery('#carousel_ul li:last').after(jQuery('#carousel_ul li:first'));  

    //and get the left indent to the default -960px  
    jQuery('#carousel_ul').css({'left' : '-960px'});  
}); 
```

一旦您对轮播感到满意，我建议您将其重构为 jQuery 插件或小部件，以便于重用。

# asp.net - 抓取一个棘手的 asp.net 页面

> ID：12595346
> 
> 赞同：1
> 
> 时间：2012-09-26T05:56:24.620
> 
> 标签：asp.net, curl, web-scraping, mechanize

[总体目标是在以下网页http://www.cma-cgm.com/eBusiness/Tracking/Default.aspx](http://www.cma-cgm.com/eBusiness/Tracking/Default.aspx)上执行搜索，容器值为 CMAU1173561。我尝试了两种方法，php 扩展 cURL 和 python 的机械化。接近的 php 涉及使用页面上的输入字段执行 POST 提交（注意：这些在 asp.net 页面上真的很难看）。返回的页面不包含任何搜索结果。第二种方法涉及使用 python 的 mechanize 模块。在这种方法中，我加载页面，选择表单，然后将文本字段 ctl00$ContentPlaceBody$TextSearch 更改为容器值。当我再次加载响应时，没有搜索结果。

我真的处于死胡同。任何帮助将不胜感激，因为就目前而言，我的下一步是成为我不喜欢的 asp.net 专家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:58:36.947

该页面的来源非常可怕（巨大的视图状态、到处都是表格、内联 CSS、看起来像是从 Word 中复制的样式）。

无论如何......一个 ASP.Net 表单仍然像任何其他表单一样将相同的原始数据传递给服务器（尽管它被抽象给开发人员）。

您很可能会丢失与请求一起使用的 cookie。如果搜索页面（或站点的​​任何部分）使用会话状态，则 ASP.Net 会话 cookie 必须包含在请求中。您将能够从它的名称（包含“asp.net”和“session”）中看出它。

我假设您在提交页面时使用了 Firebug 或 Chrome 之类的工具来查看完整的传出请求。从我的快速测试来看，该请求似乎可以使用 GET 而不是 POST 来执行。我提交了一个表单，查看了请求，然后将 URL 粘贴到了一个新的浏览器窗口中。

例子：`http://www.cma-cgm.com/eBusiness/Tracking/Default.aspx?ContNum=CMAU1173561&T=57201202648`

这可能就是您需要做的所有事情。

# pattern-matching - 对象模式训练和识别（基于图像）

> ID：12595349
> 
> 赞同：0
> 
> 时间：2012-09-26T05:56:35.773
> 
> 标签：pattern-matching, artificial-intelligence, object-recognition, google-goggles

是否有任何用于对象模式训练和识别的 c/c++ 库？我需要实现类似于 Google Goggles (http://www.google.com/mobile/goggles/#text) 所做的特性和功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:04:02.243

你可以看看[Tessarect](http://en.wikipedia.org/wiki/Tesseract_%28software%29)：

> Tesseract 是一款适用于各种操作系统的免费软件光学字符识别引擎。最初是在 1985 年至 1995 年间在惠普公司作为专有软件开发的，在接下来的十年中几乎没有做任何工作。然后它在 2005 年由 Hewlett Packard 和 UNLV 作为开源发布。自 2006 年以来，Tesseract 的开发一直由 Google 赞助。它是在 Apache 许可证 2.0 版下发布的。Tesseract 被认为是目前可用的最准确的免费软件 OCR 引擎之一。

[你可以在这里](http://tesseract-ocr.googlecode.com/svn/trunk/vs2008/doc/index.html)和[这里](http://tesseract-ocr.googlecode.com/svn/trunk/vs2008/doc/programming.html)找到一些信息。来源似乎可在此链接获得：`http://tesseract-ocr.googlecode.com/svn/trunk/`

# java - 泽西/杰克逊 @JsonIgnore 在二传手上

> ID：12595351
> 
> 赞同：13
> 
> 时间：2012-09-26T05:56:39.133
> 
> 标签：java, json, rest, jersey, jackson

我有一个带有以下注释的类：

```
class A {
public Map<String,List<String>> references;

@JsonProperty
public Map<String,List<String>> getReferences() {
...
}

@JsonIgnore
public void setReferences(Map<String,List<String>>) {
}
...
}
} 
```

我尝试的是忽略反序列化的 json。但它不起作用。总是当 JSON 字符串到达​​ Jackson 库时填充引用属性。如果我只使用 @JsonIgnore 注释，则 getter 不起作用。这个问题有什么解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-11T23:59:01.067

我认为有两个关键部分应该使您能够根据需要拥有“只读集合”。首先，除了忽略 setter 之外，请确保您的*字段*也标有`@JsonIgnore`：

```
class A {

  @JsonIgnore
  public Map<String,List<String>> references;

  @JsonProperty
  public Map<String,List<String>> getReferences() { ... }

  @JsonIgnore
  public void setReferences(Map<String,List<String>>) { ... }

} 
```

其次，为了防止 getter 被用作 setter，请禁用该`USE_GETTERS_AS_SETTERS`功能：

```
ObjectMapper mapper = new ObjectMapper();
mapper.disable(MapperFeature.USE_GETTERS_AS_SETTERS); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-02-13T08:54:03.193

从 Jackson 2.6 开始，使用[JsonProperty#access()](https://fasterxml.github.io/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonProperty.Access.html)注释定义`read-only`和改进了一种新的方法。建议不要使用单独的和注释。`write-only``JsonIgnore``JsonProperty`

```
@JsonProperty(access = JsonProperty.Access.READ_ONLY)
public Map<String,List<String>> references; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-06T23:58:29.367

您必须确保在字段级别以及 setter 上有 @JsonIgnore 注释，并且在 getter 上使用 @JsonProperty 注释。

```
public class Echo {

    @Null
    @JsonIgnore
    private String doNotDeserialise;

    private String echo;

    @JsonProperty
    public String getDoNotDeserialise() {
        return doNotDeserialise;
    }

    @JsonIgnore
    public void setDoNotDeserialise(String doNotDeserialise) {
        this.doNotDeserialise = doNotDeserialise;
    }

    public String getEcho() {
        return echo;
    }

    public void setEcho(String echo) {
        this.echo = echo;
    }
}

@Controller
public class EchoController {

@ResponseBody
@RequestMapping(value = "/echo", consumes = APPLICATION_JSON_VALUE, produces = APPLICATION_JSON_VALUE)
    public Echo echo(@RequestBody @Valid Echo echo) {
        if (StringUtils.isEmpty(echo.getDoNotDeserialise())) {
            echo.setDoNotDeserialise("Value is set by the server, not by the client!");
        }

        return echo;
    }
} 
```

*   如果您提交一个 JSON 请求，其中设置了“doNotDeserialise”值，那么当 JSON 反序列化为一个对象时，它将被设置为 null（如果不是，我在该字段上放置了一个验证约束，所以它会出错）
*   如果您将“doNotDeserialise”值设置为服务器上的某个值，那么它将被正确序列化为 JSON 并推送到客户端

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-03T23:27:07.477

我`@JsonIgnore`在我的 getter 上使用它，但它不起作用，我无法配置映射器（我使用的是 Jackson Jaxrs 提供程序）。这对我有用：

```
@JsonIgnoreProperties(ignoreUnknown = true, value = { "actorsAsString",
    "writersAsString", "directorsAsString", "genresAsString" }) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T06:17:30.740

我只能想到一个非杰克逊解决方案，使用没有映射引用的基类，然后转换为实际类：

```
// expect a B on an incoming request
class B {
// ...
}

// after the data is read, cast to A which will have empty references
class A extends B {
public Map<String,List<String>> references;
} 
```

如果您不想要它们，为什么还要发送参考文献？

还是传入数据不在您的手中，而您只是想避免映射异常告诉您杰克逊找不到要为传入引用设置的属性？为此，我们使用所有 Json 模型类都继承的基类：

```
public abstract class JsonObject {

    @JsonAnySetter
    public void handleUnknown(String key, Object value) {

        // for us we log an error if we can't map but you can skip that
        Log log = LogFactory.getLog(String.class);    
        log.error("Error mapping object of type: " + this.getClass().getName());    
        log.error("Could not map key: \"" + key + "\" and value: \"" + "\"" + value.toString() + "\"");

    } 
```

然后在你添加的 POJO`@JsonIgnoreProperties`中，传入的属性将被转发到`handleUnknown()`

```
@JsonIgnoreProperties
class A extends JsonObject {
    // no references if you don't need them
} 
```

* * *

**编辑**

[这个 SO Thread](https://stackoverflow.com/questions/7421474/how-can-i-tell-jackson-to-ignore-a-property-for-which-i-dont-have-control-over)描述了如何使用 Mixins。如果您想保持结构原样，这可能是解决方案，但我还没有尝试过。

# object - 从流中读取对象

> ID：12595358
> 
> 赞同：0
> 
> 时间：2012-09-26T05:57:03.067
> 
> 标签：object, stream

我正在尝试`ChatMassage`从流中读取一个对象并使用它的方法打印一条消息（该对象包含）`getMassage()`。它第一次打印一条消息，但下一次它总是打印第一条消息。怎么了？

以下是代码示例：

```
while(keepGoing){

    System.out.println("Client: " + ((ChatMassage) in.readObject()).getMassage() + "\n" );

} 
```

聊天按摩类：

```
public class ChatMassage implements Serializable {

    String msg, recipientName = null;
    String senderName = "None";

    public void setMassage(String msg) {
        this.msg = msg;
    }

    public void setRecipientName(String recName) {
        recipientName = recName;
    }

    public String getMassage() {
        return msg;
    }

    public String getRecipientName() {
        return recipientName;
    }

    public void setSenderName(String name) {
        senderName = name;
    }

    public String getSenderName() {
        return senderName;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:17:38.370

我认为问题在于这种方法：

```
public void setMassage(String msg) {
        this.msg = msg;
    } 
```

我不知道这是否是个问题，但请尝试将参数更改为“new_msg”之类的参数。我认为它混淆了“this.msg”和“msg”。

# iphone - iPhone：每次我离开视图并返回视图时，如何将存储的数据和上次编辑的数据保留在视图中

> ID：12595362
> 
> 赞同：-1
> 
> 时间：2012-09-26T05:57:10.943
> 
> 标签：iphone, objective-c, uitableview, dictionary, nsuserdefaults

请详细阅读说明。

我的应用中有**3 个视图/页面**。

1.  **表视图**显示从数据库检索的表视图中的雇员姓名列表。选择一个员工时按到下一个vie细节的veiw。
2.  **详细信息视图**：在此处显示所选员工的详细信息

3.  1.  **`Roles table view`**：在该组织中为员工提供 N 个角色。我们可以从这里选择一个角色来为员工设置一个角色。

    2.  **`Popup camera`**(iMagePicker) 当我们在详细信息视图中点击员工个人资料图片时。

在这里，我**在第二个视图详细信息视图上有问题。**

那**`i use the same view for two purpouses`**

. **`To Add new employee`**（如果我们在第一个 vie 上选择 + 添加按钮）

. **`To edit existing employe`**如果我们点击表格中的任何一行员工

因此，要编辑现有员工，我传递了一个字典，用于选择员工的详细信息和*`fill the fields with the corresponding keys of dictionary when view will appear`*. 所以所有字段都显示员工详细信息

到 App*`i passes an empty dictionary when view will appear.`*所以所有字段都是空的。

在这个视图中，我有**捕获图片**的选项，以及一个**文本字段，当我们想要在其中输入角色时导航到下一个视图**。

当我使用**这两个 senarios 时，视图导航到其他一些**视图**`the data i have typed in other fields is gets erased.`**

任何建议***** ** *** ** *** ** *** *****

**1.为了显示新员工的空白字段，当我们返回查看表单camaera和角色表时，数据保持与我们编辑的相同。**

**2.要显示员工的详细信息，我们可以编辑文件并显示新联系人的空白字段，当我们返回查看表单相机和角色表时，数据保持与我们编辑的相同。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:13:09.063

只是更改一些代码..

我的意思是写你的视图填充代码`viewDidLoad`而不是`viewWillAppear`

`viewWillAppear`每次向用户显示视图时都会运行，并且您的数据/视图会再次用您的字典重新填充，并且已编辑的数据会丢失。

# node.js - 为什么 Cloud9 IDE 在尝试运行简单的 Node.js 脚本时返回错误“脚本不存在”？

> ID：12595365
> 
> 赞同：0
> 
> 时间：2012-09-26T05:57:28.940
> 
> 标签：node.js, cloud9-ide

我正在尝试使用 Cloud9 IDE 创建一个简单的 Hello World Node.js 脚本。我的代码如下，是非典型的 6 行：

```
var http = require('http');
http.createServer(function (req, res) {
   res.writeHead(200, {'Content-Type': 'text/plain'});
   res.end('Hello World\n');
}).listen(process.env.PORT); 
```

我没有看到任何错误，IDE 肯定不会提醒我任何错误。我已确保文件已保存（甚至将其提交到我的仓库）。不幸的是，每当我尝试运行上述代码时，都会收到以下错误：

> 服务器上的
> 错误从服务器收到以下错误：
> “脚本不存在：server.js”

为了说明运行配置，我包含了以下屏幕截图：

![运行配置图](../Images/bb13ace5fd9bd6441f3385dd3e9971c8.png)

我很确定我遗漏了一些明显的东西，但不管它是在暗示我什么。我有什么错误配置可能导致我的 server.js 文件无法运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:16:18.473

您的配置是正确的，但是有一个临时问题导致某些 VM 无法运行文件。我以前见过它，它通常会在一段时间后消失。现在快速修复：

*   要么等
*   使用相同的文件创建一个新项目，它可能会运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:33:45.633

您的文件路径看起来不正确。不应该`server.js`和不应该`/server.js`吗？尝试创建新的运行配置并将文件路径设置为`server.js`.

# css - 圆角在 IE9 中不起作用

> ID：12595370
> 
> 赞同：1
> 
> 时间：2012-09-26T05:57:42.200
> 
> 标签：css, internet-explorer-9

> **可能重复：**
> [ie9 边界半径](https://stackoverflow.com/questions/5381446/ie9-border-radius)

圆角在 IE9 中不适合我。

这是我的CSS：

```
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
border-radius: 5px;
-khtml-border-radius: 5px; 
```

为什么他们不工作？

# javascript - 通过javascript从radiobuttonlist获取值？

> ID：12595378
> 
> 赞同：3
> 
> 时间：2012-09-26T05:58:19.430
> 
> 标签：javascript, asp.net

我有一个单选按钮列表。

```
 <asp:RadioButtonList ID="RadioButtonList1" runat="server" 
              RepeatDirection="Horizontal" RepeatLayout="flow" >
             <asp:ListItem Selected="True" Text ="Yes" Value="0"></asp:ListItem>
             <asp:ListItem  Text ="No" Value="1"></asp:ListItem>
          </asp:RadioButtonList> 
```

为了从收音机列表中获取值，我有一个函数：

```
 function getvalueofradiolist() {

        var radiolist = document.getElementById('<%= RadioButtonList1.ClientID %>');
        var rblName = radiolist.name;
        var radio = document.getElementsByName(rblName);

        for (var x = 0; x < radio.length; x++) {
            if (radio[x].checked) {
                alert("Selected item Value " + radio[x].value);
            }
        }
    } 
```

但它返回未定义。

我是不是写错了什么？

我在单击按钮时调用此函数。

建议我是否可以在使用 Javascript 的情况下借助背后的代码来做到这一点。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T06:18:39.867

```
<form runat="server">
<asp:RadioButtonList ID="RadioButtonList1" runat="server" 
          RepeatDirection="Horizontal" RepeatLayout="flow" >
         <asp:ListItem Selected="True" Text ="Yes" Value="0"></asp:ListItem>
         <asp:ListItem  Text ="No" Value="1"></asp:ListItem>
      </asp:RadioButtonList>    </form>
<p id="button" onclick="getvalue()">click me</p>

<script type="text/javascript">
function getvalue(){
 alert($('#<%=RadioButtonList1.ClientID %> input[type=radio]:checked').val());
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:44:28.357

关于代码

```
var rblName = radiolist.name; 
```

你甚至没有 name 属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:06:06.747

你可以试试：

```
function getvalueofradiolist() {

            var radioButtonlist = document.getElementsByName("<%=RadioButtonList1.ClientID%>");
            for (var x = 0; x < radioButtonlist.length; x++) {
                if (radioButtonlist[x].checked) {
                    alert("Selected item Value "  + radioButtonlist[x].value);
                }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T06:40:40.317

关于`input`直接获取元素的内容：

```
function getvalueofradiolist() {
    var radiolist = document.getElementById('<%= RadioButtonList1.ClientID %>');
    var radio = radiolist.getElementsByTagName("input");

    for (var x = 0; x < radio.length; x++) {
        if (radio[x].type === "radio" && radio[x].checked) {
            alert("Selected item Value " + radio[x].value);
        }
    }
} 
```

# iphone - 首先将原生地图应用程序直接集成到 safari

> ID：12595380
> 
> 赞同：0
> 
> 时间：2012-09-26T05:58:24.173
> 
> 标签：iphone, ios, xcode

在我的应用程序中，我集成了本地地图应用程序，用于在按钮操作上显示两点之间的方向。我正在使用以下代码。

```
- (IBAction)showRoute
{
     NSString *urlString = [NSString stringWithFormat:@"http://maps.apple.com/maps?    daddr=%@,%@&saddr=%f,%f",d_latitude,d_longitude, s_latitude, s_longitude];
     [[UIApplication sharedApplication] openURL:[NSURL URLWithString:urlString]];
} 
```

但问题是，当单击按钮时，它首先重定向到 safari，然后映射应用程序 - 有没有办法错过 safari 步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:43:28.840

您在哪个iOS中尝试过。？我在 iOS 6 模拟器上试过，效果很好，直接打开地图应用。在 iOS 模拟器中，它打开了 safari，但模拟器上没有地图应用程序。

我在按钮操作上尝试了以下代码，它与您使用的类似。

```
NSString* url = [NSString stringWithFormat:@"http://maps.apple.com/maps?daddr=%f,%f&saddr=Current%%20Location", 40.7142, 74.0064];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]]; 
```

# c++ - 用于回归测试的快速 GCC 构建

> ID：12595382
> 
> 赞同：0
> 
> 时间：2012-09-26T05:58:32.763
> 
> 标签：c++, gcc, build, makefile

我试图在 gcc48 中找到错误的 C++ 提交`git bisect`。
对于我所做的每一次提交：

```
make distclean
./configure    
nice make -j24 bootstrap 
```

这是在带有 24 cpu 的盒子上。
我怀疑这是次优的并且`make`做了很多额外的事情（例如其他语言）。如何禁用 C++ 测试不需要的所有可选内容？如何加快 gcc 构建速度？

**编辑**
我能够将构建时间从 30 分钟减少到 2 分钟：

```
git reset --hard &&
rm -rf B/  &&  mkdir B/  &&  cd B/ &&
~/gcc.git/configure  --enable-languages=c,c++  --disable-multilib --disable-bootstrap --prefix=$HOME/I &&
nice make -j22  &&
make install 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:30:11.643

曾经有一个名为 compilercache 的项目可以使用。就个人而言，我从未尝试过，甚至没有考虑过使用它，但从我读到的内容来看，它可能正是您在这里寻找的。

一个快速的谷歌搜索返回了这个[网站](http://www.erikyyy.de/compilercache/)。

# c++ - std::map 和函数指针作为具有不同签名的值

> ID：12595387
> 
> 赞同：1
> 
> 时间：2012-09-26T05:58:47.670
> 
> 标签：c++, stl

我想将具有不同签名的函数指针存储`std::map`为 a `value`。这可能在`C++`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T06:02:38.097

可以使用[Boost.Any](http://www.boost.org/doc/libs/1_51_0/doc/html/any.html)或[Boost.Variant 之](http://www.boost.org/doc/libs/1_51_0/doc/html/variant.html)类的东西。但是请记住，您必须以某种方式记住存储（隐藏）在`boost::any`对象中的函数的签名是什么，以便您可以检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:11:03.963

你甚至不需要使用 boost。您可以简单地使用仿函数（重载（）运算符）作为基类，并为您需要的每个不同功能从它继承。

# android - 如何在android中使用wifi检测可用的打印机

> ID：12595390
> 
> 赞同：4
> 
> 时间：2012-09-26T05:59:07.113
> 
> 标签：android

我想显示 WiFi 范围内可用的打印机列表，然后当用户从可用打印机列表中选择打印机并打印文本文件时。我做了很多搜索，但没有找到解决方案，我不想使用谷歌云。所以必须感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:09:32.710

恐怕只有 Google Cloud 是可以处理您的请求的软件，只有您有 HP 打印机，您才能使用 Apple 的 AirPrint。

# java - 当getItemCount()>0时JComboBox显示空白区域

> ID：12595391
> 
> 赞同：2
> 
> 时间：2012-09-26T05:59:09.680
> 
> 标签：java, swing, vector, popup, jcombobox

我使用 JcomboBox 作为建议框，当用户输入时，它会检查匹配项并显示建议。这是我创建 JComboBox 的方法：

```
 Vector<String> popUpVector = new Vector<String>();
    JComboBox jcb = new JComboBox(popUpVector); 
```

每次 Key Listener 捕获事件时，我都会这样做

```
 popUpVector.clear();
    jcb.hidhPopUp();
    for(String s : database){
     popUpVector.add(s);
    }
    jcb.showPopUp(); 
```

只要我不从下拉列表中选择项目，它就可以工作。但是，一旦我从下拉列表中选择项目，下拉菜单之后会显示空白，我检查了 popUpVector，但它不是空的，我认为它与选择有关，所以我从 actionListener 中取消它，它没有有帮助。

谁能帮帮我，非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:39:57.923

将a 传递`Vector`给`JComboBox`构造函数将根据源确实使用该向量来支持底层模型：

```
public JComboBox(Vector<?> items) {
    super();
    setModel(new DefaultComboBoxModel(items));
    init();
} 
```

和

```
public DefaultComboBoxModel(Vector<?> v) {
    objects = v;

    if ( getSize() > 0 ) {
        selectedObject = getElementAt( 0 );
    }
} 
```

这意味着如果您更改向量的内容，您也会更改模型的内容。但是，对模型进行更改需要触发正确的事件以通知视图有关更改。而且由于 vector 不会触发任何事件，`DefaultComboBoxModel`因此无法知道 vector 的内容已更改。所以imo`DefaultComboBoxModel`构造函数应该简单地从向量中获取元素并直接存储那些存储向量的iso。

现在解决您的问题：不要将您的值存储在 a 中`Vector`，而是使用 a`DefaultComboBoxModel`并使用该模型上可用的 API 进行更改。使用 API 将确保模型触发正确的更改。参见例如`addElement`方法的实现：

```
public void addElement(Object anObject) {
    objects.addElement(anObject);
    fireIntervalAdded(this,objects.size()-1, objects.size()-1);
    if ( objects.size() == 1 && selectedObject == null && anObject != null ) {
        setSelectedItem( anObject );
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:07:50.203

你的问题是

```
popUpVector.clear(); 
```

清除的正确方法`Vector`只是

```
popUpVector = new Vector<String>(); 
```

更好的可能是`add`//在[ComboBoxModel](https://stackoverflow.com/a/7388965/714968)`remove`中`modify``JComboBoxes Items`

# python - 您如何在 CherryPy 中使用 cookie 和 HTTP 基本身份验证？

> ID：12595394
> 
> 赞同：4
> 
> 时间：2012-09-26T05:59:23.743
> 
> 标签：python, session, authentication, cookies, cherrypy

我有一个需要身份验证的 CherryPy Web 应用程序。我正在使用如下配置的 HTTP 基本身份验证：

```
app_config = {
    '/' : {
        'tools.sessions.on': True,
        'tools.sessions.name': 'zknsrv',
        'tools.auth_basic.on': True,
        'tools.auth_basic.realm': 'zknsrv',
        'tools.auth_basic.checkpassword': checkpassword,
        }
    } 
```

HTTP auth 在这一点上工作得很好。例如，这将为我提供我在内部定义的成功登录消息`AuthTest`：

```
curl http://realuser:realpass@localhost/AuthTest/ 
```

由于会话已打开，我可以保存 cookie 并检查 CherryPy 设置的那个：

```
curl --cookie-jar cookie.jar http://realuser:realpass@localhost/AuthTest/ 
```

该`cookie.jar`文件最终将如下所示：

```
# Netscape HTTP Cookie File
# http://curl.haxx.se/rfc/cookie_spec.html
# This file was generated by libcurl! Edit at your own risk.

localhost       FALSE   /       FALSE   1348640978      zknsrv  821aaad0ba34fd51f77b2452c7ae3c182237deb3 
```

`401 Not Authorized`但是，如果我提供的会话 ID 没有用户名和密码，我会收到 HTTP失败，如下所示：

```
curl --cookie 'zknsrv=821aaad0ba34fd51f77b2452c7ae3c182237deb3' http://localhost/AuthTest 
```

我错过了什么？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T19:19:59.277

所以，简短的回答是*你可以这样做，但你必须编写自己的 CherryPy 工具*(a `before_handler`)，并且你*不能*在 CherryPy 配置中启用基本身份验证（也就是说，你不应该做任何类似的事情`tools.auth.on`）`tools.auth.basic...`-您必须自己处理 HTTP 基本身份验证。这样做的原因是内置的基本身份验证内容显然非常原始。*如果您像我上面所做的那样通过启用基本身份验证来保护某些东西，它会在检查会话之前进行*身份验证检查，并且您的 cookie 将什么也不做。

## 我的解决方案，散文

幸运的是，即使 CherryPy 没有内置的方法，您仍然可以使用其内置的会话代码。您仍然必须编写自己的代码来处理基本身份验证部分，但总的来说这还不错，并且使用会话代码是一个很大的胜利，因为编写自定义会话管理器是将安全错误引入您的 web 应用程序的好方法.

我最终能够从 CherryPy wiki 上的一个名为[Simple authentication and access limits helpers](http://tools.cherrypy.org/wiki/AuthenticationAndAccessRestrictions)的页面中获取很多东西。该代码使用 CP 会话，但它不是使用基本身份验证，而是使用带有登录表单的特殊页面，该页面提交`?username=USERNAME&password=PASSWORD`. 我所做的基本上只是将提供的`check_auth`功能从使用特殊登录页面更改为使用 HTTP auth 标头。

通常，您需要一个可以作为 CherryPy 工具添加的函数 - 特别是`before_handler`. （在原始代码中，这个函数被调用`check_auth()`，但我将它重命名为`protect()`。）这个函数首先尝试查看 cookie 是否包含（有效的）会话 ID，如果失败，它会尝试查看是否有 HTTP auth 信息在标题中。

然后，您需要一种方法来要求对给定页面进行身份验证；我这样做了`require()`，加上一些*条件*，它们只是返回的可调用对象`True`。就我而言，这些条件是`zkn_admin()`, 和`user_is()`函数；如果您有更复杂的需求，您可能还想查看原始代码中的`member_of()`、`any_of()`和`all_of()`。

如果您这样做，您已经有一种登录方式 - 您只需向您使用装饰器保护的任何 URL 提交有效的会话 cookie 或 HTTPBA 凭据`@require()`。您现在需要的只是一种退出方式。

（原始代码有一个`AuthController`包含`login()`and的类`logout()`，您可以通过将整个对象放入您的 CherryPy 根类中来使用`AuthController`HTTP 文档树中的整个对象，并使用例如[http://example.com/的 URL 访问它](http://example.com/auth/login)[auth/login](http://example.com/auth/login)和[http://example.com/auth/logout](http://example.com/auth/logout)。我的代码没有使用 authcontroller 对象，只有几个函数。）`auth = AuthController()`

## 关于我的代码的一些注释

*   警告：因为我为 HTTP auth 标头编写了自己的解析器，所以它只解析我告诉它的内容，这意味着只是 HTTP Basic Auth——而不是，例如，Digest Auth 或其他任何东西。对于我的应用程序来说很好；对你来说，可能不是。
*   它假设在我的代码中其他地方定义了一些函数：`user_verify()`和`user_is_admin()`
*   我还使用了一个仅在设置变量`debugprint()`时才打印输出的函数，`DEBUG`为了清楚起见，我保留了这些调用。
*   你可以调用它`cherrypy.tools.WHATEVER`（见最后一行）；我根据我的应用程序的名称调用它`zkauth`。但请注意不要调用它`auth`或任何其他内置工具的名称。
*   然后，您必须`cherrypy.tools.WHATEVER`在 CherryPy 配置中启用。
*   正如您从所有 TODO: 消息中看到的那样，此代码仍处于不断变化的状态，并未针对边缘情况进行 100% 测试——对此感到抱歉！不过，我希望它仍然会给你足够的想法。

## 我的解决方案，在代码中

```
import base64
import re
import cherrypy 

SESSION_KEY = '_zkn_username'

def protect(*args, **kwargs):
    debugprint("Inside protect()...")

    authenticated = False
    conditions = cherrypy.request.config.get('auth.require', None)
    debugprint("conditions: {}".format(conditions))
    if conditions is not None:
        # A condition is just a callable that returns true or false
        try:
            # TODO: I'm not sure if this is actually checking for a valid session?
            # or if just any data here would work? 
            this_session = cherrypy.session[SESSION_KEY]

            # check if there is an active session
            # sessions are turned on so we just have to know if there is
            # something inside of cherrypy.session[SESSION_KEY]:
            cherrypy.session.regenerate()
            # I can't actually tell if I need to do this myself or what
            email = cherrypy.request.login = cherrypy.session[SESSION_KEY]
            authenticated = True
            debugprint("Authenticated with session: {}, for user: {}".format(
                    this_session, email))

        except KeyError:
            # If the session isn't set, it either wasn't present or wasn't valid. 
            # Now check if the request includes HTTPBA?
            # FFR The auth header looks like: "AUTHORIZATION: Basic <base64shit>"
            # TODO: cherrypy has got to handle this for me, right? 

            authheader = cherrypy.request.headers.get('AUTHORIZATION')
            debugprint("Authheader: {}".format(authheader))
            if authheader:
                #b64data = re.sub("Basic ", "", cherrypy.request.headers.get('AUTHORIZATION'))
                # TODO: what happens if you get an auth header that doesn't use basic auth?
                b64data = re.sub("Basic ", "", authheader)

                decodeddata = base64.b64decode(b64data.encode("ASCII"))
                # TODO: test how this handles ':' characters in username/passphrase.
                email,passphrase = decodeddata.decode().split(":", 1)

                if user_verify(email, passphrase):

                    cherrypy.session.regenerate()

                    # This line of code is discussed in doc/sessions-and-auth.markdown
                    cherrypy.session[SESSION_KEY] = cherrypy.request.login = email
                    authenticated = True
                else:
                    debugprint ("Attempted to log in with HTTBA username {} but failed.".format(
                            email))
            else:
                debugprint ("Auth header was not present.")

        except:
            debugprint ("Client has no valid session and did not provide HTTPBA credentials.")
            debugprint ("TODO: ensure that if I have a failure inside the 'except KeyError'"
                        + " section above, it doesn't get to this section... I'd want to"
                        + " show a different error message if that happened.")

        if authenticated:
            for condition in conditions:
                if not condition():
                    debugprint ("Authentication succeeded but authorization failed.")
                    raise cherrypy.HTTPError("403 Forbidden")
        else:
            raise cherrypy.HTTPError("401 Unauthorized")

cherrypy.tools.zkauth = cherrypy.Tool('before_handler', protect)

def require(*conditions):
    """A decorator that appends conditions to the auth.require config
    variable."""
    def decorate(f):
        if not hasattr(f, '_cp_config'):
            f._cp_config = dict()
        if 'auth.require' not in f._cp_config:
            f._cp_config['auth.require'] = []
        f._cp_config['auth.require'].extend(conditions)
        return f
    return decorate

#### CONDITIONS
#
# Conditions are callables that return True
# if the user fulfills the conditions they define, False otherwise
#
# They can access the current user as cherrypy.request.login

# TODO: test this function with cookies, I want to make sure that cherrypy.request.login is 
#       set properly so that this function can use it. 
def zkn_admin():
    return lambda: user_is_admin(cherrypy.request.login)

def user_is(reqd_email):
    return lambda: reqd_email == cherrypy.request.login

#### END CONDITIONS

def logout():
    email = cherrypy.session.get(SESSION_KEY, None)
    cherrypy.session[SESSION_KEY] = cherrypy.request.login = None
    return "Logout successful" 
```

现在您所要做的就是`cherrypy.tools.WHATEVER`在您的 CherryPy 配置中启用内置会话和您自己的会话。同样，注意不要启用`cherrypy.tools.auth`. 我的配置最终看起来像这样：

```
config_root = {
    '/' : {
        'tools.zkauth.on': True, 
        'tools.sessions.on': True,
        'tools.sessions.name': 'zknsrv',
        }
    } 
```

# android - 触摸屏和用户输入的功能

> ID：12595400
> 
> 赞同：5
> 
> 时间：2012-09-26T05:59:53.533
> 
> 标签：android, ios, windows-phone-7, mobile, touchscreen

我是一名业余（桌面）程序员，但我想进入手机领域。我对应用程序有一些想法，但触摸屏和它的输入让我感到困惑......

我知道触摸屏可以接受多个触摸点。例如放大你用两个手指，你把它们拉近..而缩小你做相反的事情。

这是我的问题......我从来没有在任何手机（我使用Windows手机和Android手机）上看到任何手机应用程序的功能......触摸输入是多个点，但它不是从同时。

为了便于说明，我举个例子。假设您在手机上有一个迷你浏览器……它有一个垂直滚动条……和一个水平滚动条。我*想要*做的是能够向下滚动......并且在我向下滚动的同时也滚动水平的，这样我就可以向左或向右移动页面。所以在我触摸屏幕并开始向下或向上移动垂直滚动条几秒钟后......我想用不同的手指触摸水平滚动条并（同时）移动它。

这甚至可能吗？是否有某些硬件或软件限制阻止这样的事情发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:03:08.817

是的，它有可能，这取决于手机，但由于大多数安卓设备和所有 WP7 设备都支持多点触控，这应该不是问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:33:38.053

您正在混淆手势和触摸。手势是触摸行为，例如...

*   两根手指同时放置，就是指彼此分开`zoom-in`。
*   点击并按住意味着上下文弹出。
*   点击并拖动等于滚动。

当您的应用不遵循这些约定时，您可以取消这些手势。例如，如果您点击并拖动一只鸟，愤怒的小鸟不会滚动，但如果您在场景的其他地方进行滚动，它会滚动。

手势的默认状态是在您执行手势时**不检测额外的触摸。**如果您滚动并引入第二根手指以单击按钮，同时仍按住滚动手指，则不会发生任何事情。我不确定您是否可以覆盖此行为（而且我认为这也不是一个好主意）。

另一方面，触摸允许一定数量的同时触摸，具体取决于设备。当触摸不是手势时，您可以在第一次开始后开始第二次或 n 次触摸。

[您可以在http://raphaeljs.com/touches.html](http://raphaeljs.com/touches.html)自己尝试一下。

现在，回到你的例子：这取决于它是如何实现的。如果您使用的是操作系统手势（点击并拖动任何地方），那么不，您不能引入第二根手指来水平拖动，您将使用用于垂直滚动的同一根手指（用单指平移）。但是，如果您有实际的滚动条（如鼠标界面中的滚动条），那么可以，您可以实现您所描述的那种界面。

# python - python regex 简单帮助 - 处理括号

> ID：12595401
> 
> 赞同：2
> 
> 时间：2012-09-26T06:00:02.990
> 
> 标签：python, regex

我有一堆这种形式的数据

xxx(xx.xx) - 位数不固定。像

```
312(21.1)   378(25.5)   374(25.3)   157(10.6)   260(17.6)   1481(100)
125(28.1)   91(20.4)    94(21.1)    52(11.7)    83(18.7)    445(100)
50(28.4)    44(25)  29(16.5)    12(6.8) 41(23.3)    176(100) 
```

请注意，它们都是 unicode 字符串。假设括号中的数字是A，括号中的数字是B。所以A（B）。

我想做的是创建一个返回列表[A，B]的函数。

我知道它们可以用 RegEx 来完成，但我并不擅长它们。无论如何，我做了一些搜索并遵循教程，所以我想出了：

```
re.search('\(.*?\)',s) # for B
re.search('.?\(',s) # for A 
```

问题是，他们返回带有数字的括号。像

```
>>s
u'312(21.1)'
>>m=re.search('\(.*?\)',s)
>>m.group()
(21.1) 
```

任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:05:29.170

使用非转义括号定义组：

```
>>> [g[:2] for g in re.findall(r'([0-9]+)\(([0-9]+|[0-9]+\.[0-9]+)\)', s)]
[('312', '21.1'), ('378', '25.5'), ('374', '25.3'), ('157', '10.6'),
('260', '17.6'), ('125', '28.1'), ('91', '20.4'), ('94', '21.1'),
('52', '11.7'), ('83', '18.7'), ('50', '28.4'), ('29', '16.5'), ('12', '6.8'),
('41', '23.3'), ('176', '100')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:17:52.710

我想这应该会有所帮助：

```
m = re.findall('([0-9]+\.[0-9]+|[0-9]+)', s) 
```

我所做的是使用字符串中的小数点。我寻找一个正则表达式，它在 0-9 范围内有一个或多个数字，然后是一个小数点，然后在 0-9 范围内再有一个或多个数字，它还检查具有数字 0-9 的字符串作为选择。然后它将匹配的表达式分组。

您的解决方案给出了括号，因为您要求正则表达式也匹配字符串中的括号。

这会将两个数字作为存储在 m 中的 python 列表返回。

希望它能解决你的问题。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T07:41:37.473

或者，您可以只使用字符串操作，这在许多情况下比 RE 更简单、更快。

```
>>> s = "312(21.1)   378(25.5)   374(25.3)   157(10.6)   260(17.6)   1481(100) 125(28.1)   91(20.4)    94(21.1)    52(11.7)    83(18.7)    445(100) 50(28.4)    44(25)  29(16.5)    12(6.8) 41(23.3)    176(100)" 
```

将其拆分为令牌

```
>>> tokens = s.split()
>>> tokens
['312(21.1)', '378(25.5)', '374(25.3)', '157(10.6)', '260(17.6)', '1481(100)', '125(28.1)', '91(20.4)', '94(21.1)', '52(11.7)', '83(18.7)', '445(100)', '50(28.4)', '44(25)', '29(16.5)', '12(6.8)', '41(23.3)', '176(100)'] 
```

最后删除')'

```
>>> intermediary1 = [ entry[:-1] for entry in tokens ]
>>> intermediary1
['312(21.1', '378(25.5', '374(25.3', '157(10.6', '260(17.6', '1481(100', '125(28.1', '91(20.4', '94(21.1', '52(11.7', '83(18.7', '445(100', '50(28.4', '44(25', '29(16.5', '12(6.8', '41(23.3', '176(100'] 
```

分成2个字符串

```
>>> intermediary2 = [ entry.split('(') for entry in intermediary1 ]
>>> intermediary2
[['312', '21.1'], ['378', '25.5'], ['374', '25.3'], ['157', '10.6'], ['260', '17.6'], ['1481', '100'], ['125', '28.1'], ['91', '20.4'], ['94', '21.1'], ['52', '11.7'], ['83', '18.7'], ['445', '100'], ['50', '28.4'], ['44', '25'], ['29', '16.5'], ['12', '6.8'], ['41', '23.3'], ['176', '100']] 
```

转换为数字（整数、浮点数）

```
>>> numbers = [ ( int(num1), float(num2) ) for num1, num2 in intermediary2 ]
>>> numbers
[(312, 21.1), (378, 25.5), (374, 25.3), (157, 10.6), (260, 17.6), (1481, 100.0), (125, 28.1), (91, 20.4), (94, 21.1), (52, 11.7), (83, 18.7), (445, 100.0), (50, 28.4), (44, 25.0), (29, 16.5), (12, 6.8), (41, 23.3), (176, 100.0)] 
```

或者以更短的方式使用列表理解：

```
>>> tokens = [ entry[:-1].split('(') for entry in s.split()]
>>> numbers = [ ( int(num1), float(num2) ) for num1, num2 in tokens ]
>>> numbers
[(312, 21.1), (378, 25.5), (374, 25.3), (157, 10.6), (260, 17.6), (1481, 100.0), (125, 28.1), (91, 20.4), (94, 21.1), (52, 11.7), (83, 18.7), (445, 100.0), (50, 28.4), (44, 25.0), (29, 16.5), (12, 6.8), (41, 23.3), (176, 100.0)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T06:06:09.370

```
import re
import sys

li = []
while True:
  line = sys.stdin.readline()
  if not line: break
  for i in line.split():
    m = re.search('(.*)\((.*)\)', i)
    tup = (m.group(1), m.group(2))
    li.append(tup)

print li 
```

样本输出：

```
$ python y
312(21.1)   378(25.5)   374(25.3)   157(10.6)   260(17.6)   1481(100)
[('312', '21.1'), ('378', '25.5'), ('374', '25.3'), ('157', '10.6'), ('260', '17.6'), ('1481', '100')] 
```

# php - 如何保存php配置？

> ID：12595407
> 
> 赞同：0
> 
> 时间：2012-09-26T06:00:26.267
> 
> 标签：php

我有一个标准的配置文件：`$variable = 'value';`，但在最后一刻想用网络界面来配置它。那么读取文件，找到变量值然后再次重新保存文件的最佳方法是什么？

目前我有2个想法：

1) RegExp
2) 保留某处数组示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:05:31.387

将所有配置值存储在关联数组中，如下所示：

```
$config = array(
   'variable' => 'value'
); 
```

对于 Web 界面，您可以轻松地遍历整个数组：

```
foreach($config as $key=>$value) { ... } 
```

进行更改后，循环遍历数组并将其写回文件。（不过，您确实应该为此使用数据库）。

包含文件时，您可以像这样使用它：

```
include('config.php');

echo $config['variable']
// or
extract($config);
echo $variable; 
```

注意：如果您提取，它将覆盖您在提取之前可能已定义的同名变量。

PS - 为了更容易读取和写入文件，我只使用 json 编码来序列化数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:07:29.957

## 使用数据库

如果您的配置是用户定义的 - 最好将配置存储在数据库中。否则，您需要解决这个“新”问题，但也可能会引入安全问题。即任何一个用户都能够编辑您的配置文件——它们必须对网络服务器用户是可写的。这为通过网络漏洞将恶意代码注入此文件打开了大门 - 或者只是直接访问您的服务器（共享主机？）的人找到这个可写文件并根据他们的喜好更新它（例如，将“ `<?php header('Location: my site'); die;`”放入其中）。

## 一个配置变量

如果您必须使用配置文件管理它，请包含文件以读取它，并[var_export](http://php.net/manual/en/function.var-export.php)变量以写入它。如果只有一个配置变量，那就是数组，这是最容易做到的。例如：

```
function writeConfig($config = array()) {
    $arrayAsString = var_export($config, true);
    $string = "<?php\n";
    $string .= "\$config = $arrayAsString;\n";
    file_put_contents('config.php', $string);
} 
```

## 允许部分更新

如果您只更改一些变量 - 只需在重写之前包含配置文件：

```
function writeConfig($edits = array()) {
    require 'config.php';
    $edits += $config;

    $arrayAsString = var_export($edits, true);
    $string = "<?php\n";
    $string .= "\$config = $arrayAsString;\n";
    file_put_contents('config.php', $string);
} 
```

## 多个配置变量

如果您的配置文件中有多个变量，请使用[get defined vars](http://php.net/manual/en/function.get-defined-vars.php)并循环它们以将文件写回：

```
function writeConfig($_name = '', $_value) {
    require 'config.php';

    $$_name = $_value; // This is a variable variable
    unset($_name, $_value);

    $string = "<?php\n";
    foreach(get_defined_vars() as $name => $value) {
        $valueAsString = var_export($value, true);
        $string .= "\$$name = $valueAsString;\n";
        file_put_contents('config.php', $string);
    }
} 
```

上面的代码使用了[变量 variables](http://php.net/manual/en/language.variables.variable.php)，覆盖了配置文件中的一个变量。最后两个例子中的每一个都可以很容易地适应同时更新多个变量。

# asp.net-mvc - 模型类上的数据属性未在 Web Api 中发布

> ID：12595409
> 
> 赞同：1
> 
> 时间：2012-09-26T06:00:29.520
> 
> 标签：asp.net-mvc, json, asp.net-web-api

我编写了以下代码以将 JSon 数据发布到 Web Api 类

```
var product = '{Id: 2012, Name: 'test', Category: 'My Category', Price: 99.5}'

$.ajax({
url: 'api/products',
type: 'POST',
data: JSON.stringify(product),
dataType: 'json',
contentType: "application/json",
success: function (data) {
}
}); 
```

在服务器端，我用以下代码定义了一个 Post 方法

```
 public HttpResponseMessage Post(Product p)
    {
       //some code to manipulate p and return response 
       return response;
    } 
```

Product 是 Model 类，包含 Id、Name、Category 和 Price 属性。

问题：- 在模型类中，我在 Id、Name 和其他属性上添加必需属性时，数据不会被发布并且服务器返回 500 错误，消息 ID 是必需的？

问题的可能原因是什么，或者换句话说，如何为具有属性的模型发布 Json 数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:05:15.457

您正在对产品数据进行双重字符串化，根本不应该对其进行字符串化；JQuery 的[`ajax`](http://api.jquery.com/jQuery.ajax/)方法采用 JSON 对象作为数据。

```
var product = {Id: 2012, Name: 'test', Category: 'My Category', Price: 99.5};

$.ajax({
    url: 'api/products',
    type: 'POST',
    data: product,
    dataType: 'json',
    contentType: "application/json",
    success: function (data) {
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:49:17.820

用 HttpPost 属性装饰接受 jquery post 的服务器端方法是一种更好的做法。

```
[HttpPost]
  public HttpResponseMessage Post(Product p)
{
   //some code to manipulate p and return response 
   return response;
} 
```

并遵循与 dbaseman 相同的操作

# django - Django template table formatting

> ID：12595418
> 
> 赞同：0
> 
> 时间：2012-09-26T06:01:12.293
> 
> 标签：django

I am building a student test results template but am having a problem. Currently I have created 2 tests (Maths and Spelling) in my Tests model. The problem is, if I enter the data (scores) for the second test (Spelling) for a student first, the score get incorrectly placed in the template - the score gets placed in the Maths column and not the Spelling column. It gets corrected/moved into the spelling column as soon as I enter the same student’s name in the Maths test. It is a minor issue, but the result still is being put in the wrong place and I don’t know why.

I must be doing something wrong. I am missing some sort of filtering I guess. Hopefully the code below will help explain it further. Thanks.

# Models.py

```
 class Student(models.Model):
        first = models.CharField(max_length=100)
        last = models.CharField(max_length=100)
        gender = models.CharField(max_length=1)
        teacher = models.ForeignKey(Teacher)

        def __unicode__(self):
              return "%s %s" % (self.first, self.last)

    class Test(models.Model):
        name = models.CharField(max_length=100)
        Out_of = models.IntegerField(null=True, blank=True)

        def __unicode__(self):
            return self.name

        class Meta:
            ordering = ['name']

    class Display(models.Model):
        name = models.ForeignKey(Student, related_name='art')
        test = models.ForeignKey(Test)
        one = models.IntegerField(null=True, blank=True)
        two = models.IntegerField(null=True, blank=True)
        three = models.IntegerField(null=True, blank=True)

# views.py
    def test(request):

    return list_detail.object_list(
          request,
          queryset = Student.objects.all(),
          template_name = 'display.html',
          template_object_name = 'results',

# display.html

    <table>

    <tr>
        <th>First</th>
        <th>Name</th>
        <th>Maths</th>
        <th>Spelling</th>
    </tr>
    {% for item in results_list %}

    <tr>
              <td> {{ item.first }} </td>
              <td> {{ item.last }} </td>

        {% for x in item.art.all %}
              <td> {{ x.one }} </td>

        {% endfor %}

    {% endfor %}
        </tr>

    </table>

# admin.py
    class StudentInline(admin.TabularInline):
        model = Display

    class TestAdmin(admin.ModelAdmin):
        inlines = [StudentInline] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:28:40.283

The problem is you need to somehow order the `item.art.all()` in same order that of your table columns (ie. math numbers and then spelling). Also need to handle cases when only one of the test result is added. But there isn't straight forward way of achieving this, you can't have foreign key (or relationship) member for `ordering` in `Meta` class.

So can have a method in your `Display` model to return list in preferred order and call it from template.

Sample solution below:

```
class Student(models.Model):
        first = models.CharField(max_length=100)
        last = models.CharField(max_length=100)
        gender = models.CharField(max_length=1)
        teacher = models.ForeignKey(Teacher)
    def __unicode__(self):
          return "%s %s" % (self.first, self.last)

    #this would return in order as math, spelling
    def get_result_list_in_order(self):
        rlist = []
        for tname in ['math', 'spelling']:
            rtest = self.art.filter(test__name__iexact=tname)
            if rtest:
               rlist.append(rtest[0])  #add the first entry from filtered queryset
               # or do
               #rlist.extend(rtest)
            else
               rlist.append(None)

        return rlist 
```

So what you can in template is

```
{% for x in item.get_result_list_in_order %}
    <td> {{x.one}} </td>
{% endfor %} 
```

# ios - 使用 +[NSThread sleep:] 解决死锁问题

> ID：12595421
> 
> 赞同：4
> 
> 时间：2012-09-26T06:01:26.110
> 
> 标签：ios, core-data, nsmanagedobject, nsthread, uimanageddocument

我刚刚“解决”了似乎是死锁或同步问题：

```
 [NSThread sleepForTimeInterval:0.1]; 
```

在将 MPMediaItem（音乐/图像）属性引用从 IPOD 库附加到对象实例的应用程序中，这些对象通过 CoreData 回存。我在这里的兴趣是准确了解正在发生的事情以及在这种情况下的最佳实践是什么。开始：

每次复制的配方如下：

1.  用户创建一个新项目。

    ```
    doc = [[UIManagedDocument alloc] initWithFileURL:docURL];

    if (![[NSFileManager defaultManager] fileExistsAtPath:[docURL path]]) {
        [doc saveToURL:docURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
        if (success) {
            completionBlock(doc);
        }
        else {
            DLog(@"Failed document creation: %@", doc.localizedName);
        }
    }]; 
    ```

2.  稍后 managedObjectContext 用于关联对象实例并水合 CoreData 模型

    ```
    TheProject *theProject = [TheProject projectWithInfo:theProjectInfo
                                  inManagedObjectContext:doc.managedObjectContext]; 
    ```

3.  用户稍后创建“CustomAction”对象，将“ChElement”添加到它并将“MusicElement”与 ChElement 相关联。（这些是 CoreData 模型对象的化名）。MusicElement 是通过IPOD 库添加的。

    ```
    #define PLAYER [MPMusicPlayerController iPodMusicPlayer] 
    ```

4.  用户保存该项目，然后切换到已经创建了一个 CustomAction 对象的现有项目，其中包含一个 ChElement 和一个 MusicElement。

5.  用户从 tableView 中选择 ChElement 并导航到 detailView。当离开 ChElementTVC（CoreData TableViewController 类的子类，类似于 Apple 文档中的类）时，这是必需的：

    ```
    - (void)viewWillDisappear:(BOOL)animated
    {
        [super viewWillDisappear:animated];
        self.fetchedResultsController.delegate = nil;
    } 
    ```

6.  在详细视图中，用户更改 ChElement 对象的属性并保存项目。detailView 调用其委托 (ChElementTVC) 进行保存。保存到保存 NSManagedObject 的 UIManagedDocument 实例。

    ```
    #define SAVEDOC(__DOC__) [ProjectDocumentHelper saveProjectDocument:__DOC__]

    // Delegate

    - (void)chAddElementDetailViewController:(ChDetailViewController *)sender didPressSaveButton:(NSString *)message
    {
        SAVEDOC(THE_CURRENT_PROJECT_DOCUMENT);

        [self.navigationController popViewControllerAnimated:YES];
     }

    // Helper Class

    + (void)saveProjectDocument:(UIManagedDocument *)targetDocument
    {
        NSManagedObjectContext *moc = targetDocument.managedObjectContext;
        [moc performBlockAndWait:^{
            DLog(@" Process Pending Changes before saving : %@, Context = %@", targetDocument.description, moc);

            [moc processPendingChanges];
            [targetDocument saveToURL:targetDocument.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL];
        }];
    } 
    ```

7.  由于委托 (ChElementTVC) 将 detailView 从导航堆栈中弹出，它的 viewWillAppear 被调用，并且 fetchedResultsController.delegate 被恢复。

    ```
    - (void)viewWillAppear:(BOOL)animated
    {
        [super viewWillAppear:animated];

        if (!self.fetchedResultsController.delegate) {

            DLog(@"Sleep Now %@", self);

            //http://mobiledevelopertips.com/core-services/sleep-pause-or-block-a-thread.html

           [NSThread sleepForTimeInterval:0.1];

           DLog(@"Wake up %@", self);

           [self fetchedResultsControllerWithPredicate:_savedPredicate]; // App Hangs Here ... This is sending messages to CoreData objects.

           [self.tableView reloadData];
    } 
    ```

没有`[NSThread sleepForTimeInterval:0.1];`应用程序挂起。当我通过 Xcode 发送 SIGINT 时，我得到调试器并显示以下内容：

(lldb) BT

```
 * thread #1: tid = 0x1c03, 0x30e06054 libsystem_kernel.dylib semaphore_wait_trap + 8, stop reason = signal SIGINT
    frame #0: 0x30e06054 libsystem_kernel.dylib semaphore_wait_trap + 8
    frame #1: 0x32c614f4 libdispatch.dylib _dispatch_thread_semaphore_wait$VARIANT$mp + 12   
    frame #2: 0x32c5f6a4 libdispatch.dylib _dispatch_barrier_sync_f_slow + 92   
    frame #3: 0x32c5f61e libdispatch.dylib dispatch_barrier_sync_f$VARIANT$mp + 22
    frame #4: 0x32c5f266 libdispatch.dylib dispatch_sync_f$VARIANT$mp + 18
    frame #5: 0x35860564 CoreData _perform + 160 
```

(lldb) 帧选择 5

```
 frame #5: 0x35860564 CoreData _perform + 160
    CoreData _perform + 160:
    -> 0x35860564:  add    sp, #12
       0x35860566:  pop    {r4, r5, r7, pc}

    CoreData -[NSManagedObjectContext(_NestedContextSupport) executeRequest:withContext:error:]:
       0x35860568:  push   {r4, r5, r6, r7, lr}
       0x3586056a:  add    r7, sp, #12 
```

(lldb) 反汇编 -f

```
 CoreData _perform:
        0x358604c4:  push   {r4, r5, r7, lr}

    ... snipped ...

        0x35860560:  blx    0x35938bf4                ; symbol stub for: dispatch_sync_f

    -> 0x35860564:  add    sp, #12
       0x35860566:  pop    {r4, r5, r7, pc} 
```

另一种解决方法是可能的。将 fetchedResultsController.delegate 恢复编码`-[ChElementTVC viewDidAppear:]`也有效地延迟了主队列上的这个设置。

另一个解决方法是在项目保存完成后在完成块中执行 nav pop：

```
 #define SAVEDOCWITHCOMPLETION(__DOC__,__COMPLETION_BLOCK__)[ProjectDocumentHelper saveProjectDocument:__DOC__ completionHandler:__COMPLETION_BLOCK__]

    void (^completionBlock)(BOOL) = ^(BOOL success) {
        [self.navigationController popViewControllerAnimated:YES];
    };

    SAVEDOCWITHCOMPLETION(THE_CURRENT_PROJECT_DOCUMENT, completionBlock); 
```

我认为保存操作与主队列上的委托恢复同时在后台运行，但我不知道如何检查/证明/反驳该理论。

那么，有了这个，有人可以解释发生了什么以及在这种情况下的最佳做法是什么？此外，感谢学习参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:17:38.557

我最终实现了第三种方法，即使用完成块保存文档以序列化与 CoreData 存储交互的事务。

# reference - 使用 Felix 注释动态引用服务

> ID：12595427
> 
> 赞同：1
> 
> 时间：2012-09-26T06:01:55.960
> 
> 标签：reference, annotations, osgi, apache-felix

我创建了一个接口，两个不同的服务正在实现。

考虑接口被命名为 CheckReference 并且两个不同的类 CheckReferenceImpl1 和 CheckReferencImpl2 正在实现它。

```
@Component 
@Service(value = CheckReference.class) 
@Property(name = "domain", value = "ref1") 
public class CheckReferenceImpl1 implements CheckReference 
```

还有一个，

```
@Component 
@Service(value = CheckReference.class) 
@Property(name = "domain", value = "ref2") 
public class CheckReferenceImpl2 implements CheckReference 
```

现在我想根据我的需要动态地使用 @Reference 注释动态加载实现。所以，在检查条件下

```
public class LoadReference { 
    @Reference 
    CheckReference checkReference 

    if(check) { 
      // load checkReferencImpl1 
    } else { 
       // load checkReferenceImpl2 
    } 
} 
```

我也知道我可以使用目标属性来加载特定的实现。但那是静态的方式。但是为了动态地做到这一点，无法与规范和教程联系起来，我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:41:17.540

你看过[ComponentContext.locateService](http://www.osgi.org/javadoc/r4v43/cmpn/org/osgi/service/component/ComponentContext.html#locateService%28java.lang.String%29)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:43:00.197

首先，您必须创建`LoadReference`一个`@Component`, 以便它由 SCR 管理（否则`@Reference`也不起作用）。接下来，您必须使用配置管理服务为其提供配置。在此配置中，您可以通过提供具有 name 的属性来为引用提供过滤器`REFERENCE_NAME.target`：

```
checkReference.target = FILTER_EXPRESSION 
```

`FILTER_EXPRESSION`是 OSGi 过滤器中使用的标准 LDAP 表达式。由于属性传播，此配置属性将传播到服务组件，并在为 选择目标服务时使用`checkReference`。这不需要任何代码来检查`LoadReference`.

# asp.net - 在表单身份验证中的登录表单上显示图像

> ID：12595428
> 
> 赞同：2
> 
> 时间：2012-09-26T06:02:00.617
> 
> 标签：asp.net

我正在使用表单身份验证方法创建登录页面。我在登录页面中插入了一个图像，但图像在浏览器中不可见。因为它在 Visual Studio 的设计视图中查看。

我认为匿名用户访问图像目录存在问题。我在 Web.config 中使用了以下代码

```
<location path="/images">
    <system.web>
      <authorization>
        <allow users ="*" />
      </authorization>
    </system.web>
  </location> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:21:55.933

我已经解决了。我在图像和 css 文件夹中添加了带有以下代码的 Web.cofig，以提供匿名访问。

```
<?xml version="1.0" encoding="UTF-8" ?>
<configuration>
  <system.web>
    <authorization>
      <allow users="*" />
    </authorization>
  </system.web>
</configuration> 
```

# c# - 如何发送和接收通知

> ID：12595430
> 
> 赞同：1
> 
> 时间：2012-09-26T06:02:09.090
> 
> 标签：c#, asp.net, windows-services, signalr

我只想从 Window Service 向所有连接的客户端发送和接收 SignalR 通知。我使用的是 asp.net 网络表单而不是 MVC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:24:52.190

您可以在 codeproject 上找到一篇讨论[使用 Signalr 向客户端发送组通知](http://www.codeproject.com/Articles/404662/SignalR-Group-Notifications)的文章。据我所知，asp.net 和 asp.net mvc 在这里都应该没问题

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T06:19:29.450

我不确定是否可以直接从 Windows 服务调用客户端，但作为解决方法，您可以使用所需的参数从服务调用一些特殊的 aspx 页面，并且该页面可以像往常一样发送通知。

# mongodb - 通过身份文件 (.pem) 可以跨多台机器连接进行 mongo 分片

> ID：12595431
> 
> 赞同：0
> 
> 时间：2012-09-26T06:02:11.687
> 
> 标签：mongodb, sharding, pem

一些说明跨多台机器的 mongo 分片的示例。它们之间的连接可以通过身份文件 (.pem) 进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:58:00.853

使用 --keyFile 将完成跨 ssh 安全机器的连接。

从 ssh-keygen 生成 .pub 文件
`ssh-keygen`

现在您可以使用它来进行 mongo 交互，例如。connectToMongo.pub 是我的密钥文件

`mongod --rest --configsvr --dbpath *path* --keyFile connectToMongo.pub --port *port_number*`

`mongod --rest --shardsvr --replSet *replica_name* --dbpath *path* --keyFile connectToMongo.pub --port *port_number*`

`mongos --configdb *ip*:*port_number* --keyFile connectToMongo.pub --port *port_number*`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:29:37.993

您可以使用 .pem 文件作为值来为您的 mongod/mongos 服务器启用[`--keyFile`身份验证。](http://www.mongodb.org/display/DOCS/Security+and+Authentication#SecurityandAuthentication-RunninginSecureMode%28with%5Cauthor%5CkeyFile%29)`--keyFile`

请注意，使用`--keyFile`还启用了需要对所有用户和应用程序连接进行身份验证的一般“安全模式”。

# asp.net-mvc-3 - 在 ASP.NET MVC 应用程序中使用 StructureMap 嵌套容器进行 NHibernate 会话/事务管理

> ID：12595434
> 
> 赞同：1
> 
> 时间：2012-09-26T06:02:24.630
> 
> 标签：asp.net-mvc-3, nhibernate, structuremap

我想分享您在 ASP.NET MVC 应用程序中使用 StructureMap 嵌套容器管理 NHibernate 会话和事务的经验。有没有人尝试创建一个`ActionFilterAttribute`将使用事务隔离级别参数化并覆盖`OnActionExecuting`, `OnActionExecuted`,`OnResultExecuted`来开始和提交\回滚 NHibernate 事务。我非常感谢您的专业知识。

我使用[Building a Better MVC Dependency Resolver](http://www.mikeobrien.net/blog/building-better-mvc-dependency-resolver/)来构建 DependencyResolver，并[在 ASP.NET MVC: Filters 中将 ISession 注入 TransactionAttribute Dependency Injection](http://lostechies.com/jimmybogard/2010/05/03/dependency-injection-in-asp-net-mvc-filters/)。

另外，我使用以下实现创建 TransactionAttribute 类：

```
public class TransactionAttribute : ActionFilterAttribute
{
    public ISession Session { get; set; }
    public bool Distributed { get; set; }

    public IsolationLevel IsolationLevel
    {
        get { return _isolationLevel; }
        set { _isolationLevel = value; }
    }

    private ITransaction _sessionTransaction;
    private TransactionScope _transactionScope;
    private IsolationLevel _isolationLevel = IsolationLevel.ReadCommitted;

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext.IsChildAction)
            return;

        if (Session.Transaction == null || !Session.Transaction.IsActive)
        {
            if (Distributed)
                _transactionScope = new TransactionScope(TransactionScopeOption.Required);

            _sessionTransaction = Session.BeginTransaction(IsolationLevel);
        }
    }

    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        if (filterContext.IsChildAction)
            return;

        if (_sessionTransaction != null)
        {
            if (filterContext.Exception != null && !filterContext.ExceptionHandled)
            {
                try
                {
                    _sessionTransaction.Rollback();
                }
                finally
                {
                    if (_transactionScope != null)
                        _transactionScope.Dispose();
                }
            }
        }
    }

    public override void OnResultExecuted(ResultExecutedContext filterContext)
    {
        if (filterContext.IsChildAction)
            return;

        if (_sessionTransaction != null)
        {
            try
            {
                if (filterContext.Exception == null || filterContext.ExceptionHandled)
                {
                    _sessionTransaction.Commit();

                    if (_transactionScope != null)
                        _transactionScope.Complete();
                }
                else
                {
                    _sessionTransaction.Rollback();
                }
            }
            finally
            {
                if (_transactionScope != null)
                    _transactionScope.Dispose();
            }
        }
    }
} 
```

使用约定来确保我们为控制器创建 unqiue 实例：

```
public class ControllerConvention : IRegistrationConvention
{
    public void Process(Type type, Registry registry)
    {
        if (type.IsClass && !type.IsAbstract && typeof(IController).IsAssignableFrom(type))
        {
            registry.For(type).LifecycleIs(InstanceScope.Unique).Add(type);
        }
    }
} 
```

我遇到的问题是它适用于简单的情况。但是，有时在更复杂的情况下，我会收到有关访问已处置对象的错误消息。此外，我添加了日志记录并注意到 TransactionAttribute 对象实例经常被重用，因为 Session 属性已经分配了一个旧对象。

我还想知道是否可以控制 ASP.NET MVC 应用程序中 ActionFilterAttributes 的生命周期，以便能够通过嵌套容器和 NHibernate Session 一起处理它。ActionFilterAttribute 是否应该完全无状态，以及什么是好的实现。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T14:41:01.200

我认为您遇到了这个问题，因为 ActionFilters 不是瞬态的。您在整个应用程序中重复使用它的相同实例。

你可以通过在你的 nhibernate 配置中添加一个属性来管理你的会话：

```
<property name="current_session_context_class">web</property> 
```

然后你可以像这样在你的属性中绑定会话：

```
public override void OnActionExecuting(HttpActionContext actionContext)
{
    var session = SessionFactory.OpenSession();
    CurrentSessionContext.Bind(session);
    session.BeginTransaction();
} 
```

然后释放它你可以这样做：

```
public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
{
    var session = SessionFactory.GetCurrentSession();
    var transaction = session.Transaction;
    if (transaction != null && transaction.IsActive)
    {
        transaction.Commit();
    }
    session = CurrentSessionContext.Unbind(SessionFactory);
    session.Close();
} 
```

这里有一个很棒的帖子：[http ://www.piotrwalat.net/nhibernate-session-management-in-asp-net-web-api/](http://www.piotrwalat.net/nhibernate-session-management-in-asp-net-web-api/)

它适用于 MVC 就像它适用于 WebAPI

# java - 在java中使用windows通过ssh与UNIX系统连接

> ID：12595437
> 
> 赞同：0
> 
> 时间：2012-09-26T06:02:34.133
> 
> 标签：java

我正在使用 Jcraft 库与 SSH 连接，我已经成功完成了代码。但是当我尝试获取密码时，会发生空指针异常。我需要密码以备将来使用有人可以帮我解决吗？

```
public class UserAuthKI {
    public static void main(String[] arg) {

        try {
            JSch jsch = new JSch();

            String host = null;
            if (arg.length > 0) {
                host = arg[0];
            } else {
                host = JOptionPane.showInputDialog("Enter username@hostname",
                        System.getProperty("user.name") + "@localhost");
            }
            String user = host.substring(0, host.indexOf('@'));
            host = host.substring(host.indexOf('@') + 1);

            Session session = jsch.getSession(user, host, 22);

            // username and passphrase will be given via UserInfo interface.
            UserInfo ui = new MyUserInfo();
            session.setUserInfo(ui);

            session.connect();
            String newPass = session.getUserInfo().getPassword();//here I got      null value thats why Null pointer Exception occur in below
            System.out.print(newPass);
            Channel channel = session.openChannel("shell");
            InputStream is = new ByteArrayInputStream(newPass.getBytes());

            channel.setInputStream(is);

            channel.setOutputStream(System.out);

            channel.connect();

        } catch (Exception e) {
            System.out.println(e);
        }
    }

    public static class MyUserInfo implements UserInfo, UIKeyboardInteractive {
        String passwd;
        JTextField passwordField = (JTextField) new JPasswordField(20);

        final GridBagConstraints gbc = new GridBagConstraints(0, 0, 1, 1, 1, 1,
                GridBagConstraints.NORTHWEST, GridBagConstraints.NONE,
                new Insets(0, 0, 0, 0), 0, 0);
        private Container panel;

        @Override
        public String[] promptKeyboardInteractive(String destination,
                String name, String instruction, String[] prompt, boolean[] echo) {
            // TODO Auto-generated method stub
            panel = new JPanel();
            panel.setLayout(new GridBagLayout());

            gbc.weightx = 1.0;
            gbc.gridwidth = GridBagConstraints.REMAINDER;
            gbc.gridx = 0;
            panel.add(new JLabel(instruction), gbc);
            gbc.gridy++;

            gbc.gridwidth = GridBagConstraints.RELATIVE;

            JTextField[] texts = new JTextField[prompt.length];
            for (int i = 0; i < prompt.length; i++) {
                gbc.fill = GridBagConstraints.NONE;
                gbc.gridx = 0;
                gbc.weightx = 1;
                panel.add(new JLabel(prompt[i]), gbc);

                gbc.gridx = 1;
                gbc.fill = GridBagConstraints.HORIZONTAL;
                gbc.weighty = 1;
                if (echo[i]) {
                    texts[i] = new JTextField(20);
                } else {
                    texts[i] = new JPasswordField(20);
                }
                panel.add(texts[i], gbc);
                gbc.gridy++;
            }

            if (JOptionPane.showConfirmDialog(null, panel, destination + ": "
                    + name, JOptionPane.OK_CANCEL_OPTION,
                    JOptionPane.QUESTION_MESSAGE) == JOptionPane.OK_OPTION) {
                String[] response = new String[prompt.length];
                for (int i = 0; i < prompt.length; i++) {
                    response[i] = texts[i].getText();
                }
                return response;
            } else {
                return null; // cancel
            }
        }

        @Override
        public String getPassphrase() {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public String getPassword() {
            // TODO Auto-generated method stub
                return passwd;
        }

        @Override
        public boolean promptPassphrase(String arg0) {
            // TODO Auto-generated method stub
            return false;
        }

        @Override
        public boolean promptPassword(String message) {
            // TODO Auto-generated method stub
            Object[] ob = { passwordField };
            int result = JOptionPane.showConfirmDialog(null, ob, message,
                    JOptionPane.OK_CANCEL_OPTION);
            if (result == JOptionPane.OK_OPTION) {
                passwd = passwordField.getText();
                return true;
            } else {
                return false;
            }
        }

        @Override
        public boolean promptYesNo(String str) {
            // TODO Auto-generated method stub
            Object[] options = { "yes", "no" };
            int foo = JOptionPane.showOptionDialog(null, str, "Warning",
                    JOptionPane.DEFAULT_OPTION, JOptionPane.WARNING_MESSAGE,
                    null, options, options[0]);
            return foo == 0;
        }

        @Override
        public void showMessage(String message) {
            JOptionPane.showMessageDialog(null, message);
            // TODO Auto-generated method stub

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:16:05.657

Yoh 已经使用 shell 来获取通道，但您可以使用 sftp 来执行所有 shell 命令。它使用窗口系统上的代码来连接 unix 系统。

```
 try
    {
        JSch jsch = new JSch();
        session = jsch.getSession(username, host, port);
        Properties config = new Properties();
        config.put("StrictHostKeyChecking", "no");
        session.setConfig(config);
        session.setPassword(password);
        session.connect();
        channel = session.openChannel("sftp");
        channel.connect();
        channelSftp = (ChannelSftp) channel;
    }
    catch (Throwable t)
    {
        System.out.println(t);            
    } 
```

# asp.net - 每个 Presenter 应该有自己的服务类还是直接使用 BLL 层方法

> ID：12595439
> 
> 赞同：0
> 
> 时间：2012-09-26T06:02:35.633
> 
> 标签：asp.net, mvp

我正在开发一个**MVP**项目。现在我想知道是否应该为每个演示者创建一个**单独的服务**（接口和实现）类，只包含演示者所需的方法。或者没有，它应该**直接**连接到**BLL 层**的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:12:17.173

我认为在演示者和 BLL 之间使用外观或服务层是一个好主意，它会促进依赖注入，从而提高可测试性。

但我认为，如果您基于用例创建这些服务或外观会更好，这样在演示者之间会更可重用，而不是每个演示者方法一个服务。

# iphone - 使用NSXMLParser在iphone中解析具有相同名称属性的XML文件？

> ID：12595443
> 
> 赞同：0
> 
> 时间：2012-09-26T06:02:52.553
> 
> 标签：iphone, nsxmlparser

我正在创建一个 iPhone 应用程序，我必须在其中使用服务 url 中的值。来自 url 的响应是 XML 格式。XML 文件多次具有相同的名称属性，并且这些属性不是静态的。我的意思是属性的数量可能不时增加。所以我不明白如何在 iPhone 中使用 XML 响应。

我的 XML 响应如下所示：

```
GetUserResponse xmlns="http://schemas.datacontract.org/2004/07" 
```

> ```
>  xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
>     <CompanyList>
>       <User>
>          <Address>
>               <City>Alabaster</City>                   
>               <State>Alabama</State>
>           </Address>
>           <Employee>
>               <Name>DrJohn</Name>
>           </Employee>
>       </User>
>       <User>
>           <Address>
>               <City>SanFransisco</City>>             
>               <State>California</State>
>           </Address>
>           <Employee>
>               <Name>DrWilliams</Name>
>           </Employee>
>       </User>
>     </CompanyList>
>     </GetUserResponse> 
> ```

问题是我不能说这里有 2 个标签的特定数量的标签。它们可能会或可能不会不时增加。我认为我们应该采取类似计数项目数并提取值但不能不明白怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:53:07.063

*这是许多方法之一。您可以简单地获取 attributeDict 并使用 key-value 解析其中的所有值。*

```
NSString *element;

- (void) viewDidLoad {

    [super viewDidLoad];
    cityArr = [[NSMutableArray alloc] init];
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

    element = elementName;

    if ([elementName isEqualToString:@“Address”]) {

        // initialize stings to store values of child elements
        cityStr = [NSMutableString alloc] init];
    }
}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{

    if ([element isEqualToString:@“City”])

         cityStr appendString:string];// Append Values
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if ([elementName isEqualToString:@“Address”]) {

        [cityArr addObject:cityStr]; // Add strings to array/dictionary and release string
    }
} 
```

# java - 性能 OpenJPA 查询（3000+ 条记录）很慢

> ID：12595448
> 
> 赞同：6
> 
> 时间：2012-09-26T06:03:10.727
> 
> 标签：java, websphere, openjpa

我正在使用带有内置 OpenJPA 1.2.3 和 Oracle 数据库的 Websphere Application Server 7。我有以下实体：

```
 @NamedNativeQuery(name=Contract.GIVE_ALL_CONTRACTS, 
        query="SELECT number, name \n" +
          "FROM contracts \n" +
          "WHERE startdate <= ?1 \n" +
          "AND enddate > ?1",
          resultSetMapping = Contract.GIVE_ALL_CONTRACTS_MAPPING)
    @SqlResultSetMapping(name = Contract.GIVE_ALL_CONTRACTS_MAPPING, 
        entities = { @EntityResult(entityClass = Contract.class, fields = {
          @FieldResult(name = "number", column = "number"),
          @FieldResult(name = "name", column = "name")
        })
    })
    @Entity
    public class Contract {
      public static final String GIVE_ALL_CONTRACTS = "Contract.giveAllContracts";
      public static final String GIVE_ALL_CONTRACTS_MAPPING = "Contract.giveAllContractsMapping";

      @Id
      private Integer number;
      private String name;

      public Integer getNumber() {
        return number;
      }
      public String getName() {
        return name;
      }
    } 
```

以下代码用于检索合同：

```
Query query = entityManager.createNamedQuery(Contract.GIVE_ALL_CONTRACTS);
query.setParameter(1, referenceDate);

List contracts = query.getResultList();
entityManager.clear();

return contracts; 
```

检索到的合同被传递给 Web 服务。

对于 3608 条记录，在 Oracle 开发人员中执行此查询大约需要 0.35 秒。对 query.getResultList() 的调用大约需要 4 秒。

使用实体构造函数中的记录器，它记录大约有 10-20 个使用相同时间戳创建的实体。然后 0,015 秒它做了别的事情。我猜是 OpenJPA 的东西。

有没有办法加快 OpenJPA？或者是唯一的解决方案缓存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:57:06.760

对象创建可能在性能损失中占有相当大的份额。在服务器中运行代码时，您不仅要查询数据库，还要分配内存并为每一行创建一个新的 Contract 对象。扩展堆或垃圾回收周期可能会计入您观察到的空闲期。

我建议您浏览一下有关如何处理[大型结果集](http://openjpa.apache.org/builds/1.0.0/apache-openjpa-1.0.0/docs/manual/ref_guide_dbsetup_lrs.html)的 OpenJPA 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:12:50.367

我建议你下载 VisualVM 并为所涉及的包设置一个分析。VisualVM 可以显示在不同方法中花费的时间，理论上在您的情况下总计为 0.35 秒。您将能够分析代码、OpenJPA 和网络 IO 之间的总时间分布。这将帮助您识别瓶颈。

# android - 禁用安卓通知栏

> ID：12595454
> 
> 赞同：0
> 
> 时间：2012-09-26T06:03:37.973
> 
> 标签：android, android-notification-bar

我只想知道如何在不使活动全屏的情况下禁用手机中的通知栏？

我正在做一种锁屏，我不希望用户可以向下拖动通知栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:08:42.547

public static void CancelNotification(Context ctx, int notifyId) { String ns = Context.NOTIFICATION_SERVICE; NotificationManager nMgr = (NotificationManager) ctx.getSystemService(ns); nMgr.cancel(notifyId); }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:11:01.283

这听起来像你需要的。它涉及创建一个与状态栏重叠的透明窗口，从而拦截对其的所有触摸事件。

您仍将保留状态栏，用户将无法激活它。

[https://stackoverflow.com/a/7630993/455886](https://stackoverflow.com/a/7630993/455886)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:06:34.327

将此代码添加到您的 AndroidManifest.xml

android:theme="@android:style/Theme.NoTitleBar"

# c# - 当 TCP 没有在一次读取中获得所有字节时，您如何解释

> ID：12595457
> 
> 赞同：6
> 
> 时间：2012-09-26T06:03:49.497
> 
> 标签：c#, .net, sockets, tcp

我刚刚读到一篇文章说 TCPClient.Read() 可能无法一次读取所有发送的字节。你如何解释这一点？

例如，服务器可以将字符串写入 tcp 流。客户端读取字符串的一半字节，然后在另一个读取调用中读取另一半。

你怎么知道何时需要合并两个调用中收到的字节数组？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-26T06:08:21.237

> 你怎么知道何时需要合并两个调用中收到的字节数组？

您需要在协议级别决定这一点。常见的模型有四种：

*   Close-on-finish：每一方每个连接只能发送一个“消息”。发送消息后，它们关闭套接字的发送端。接收方继续读取，直到到达流的末尾。
*   长度前缀：在每条消息之前，包括消息中的字节数。这可以是固定长度格式（例如始终为 4 个字节）或某种压缩格式（例如，每字节 7 位大小数据，最高位设置为大小数据的最后一个字节）。然后是消息本身。接收代码将读取大小，然后读取那么多字节。
*   分块：像长度前缀一样，但在更小的块中。每个块都有长度前缀，最后一个块表示“消息结束”
*   消息结束信号：继续阅读，直到看到消息的终止符。如果消息必须能够包含任意数据，这可能会很痛苦，因为您需要包含转义机制才能在消息中表示终止符数据。

此外，不太常见的情况是，有些协议的每条消息*总是*具有特定的大小——在这种情况下，您只需要继续执行，直到您读取了那么多数据。

在所有这些情况下，您基本上需要循环，将数据读取到某种缓冲区中，直到您获得足够的数据，但是您确定了这一点。您应该*始终*使用的返回值`Read`来记录您实际读取了多少字节，并*始终*检查它是否为 0，在这种情况下您已经到达流的末尾。

另请注意，这不仅会影响网络流 - 对于本地以外的任何内容`MemoryStream`（如果它在流中，它总是会一次读取您要求的尽可能多的数据），您应该假设数据可能只在多次通话过程中变得可用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T06:09:49.767

你应该`read()`循环调用。该循环的条件将检查是否仍有任何数据可供读取。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-26T06:11:15.513

这有点难以回答，因为你永远无法知道数据何时会到达，这就是为什么我通常在聊天程序中使用线程来接收数据的原因。但是你应该可以使用类似的东西：

```
do{
     numberOfBytesRead = myNetworkStream.Read(myReadBuffer,
                                              0, 
                                              myReadBuffer.Length);

     myCompleteMessage.AppendFormat("{0}",
      Encoding.ASCII.GetString(myReadBuffer, 0, numberOfBytesRead));

  }
  while(myNetworkStream.DataAvailable); 
```

看看这个[来源](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.read.aspx)！

# c# - 如何更新 nopcommerce 中的插件？

> ID：12595461
> 
> 赞同：0
> 
> 时间：2012-09-26T06:03:57.410
> 
> 标签：c#, nopcommerce

我正在使用 nopcommerce 开源。我想添加已经写在下面链接中的新插件。

```
http://nopshippingbytotal.codeplex.com/releases/view/93327 
```

我添加了这个插件，它工作正常。现在我想编辑这个插件。但是我在 nop -> plugin 文件夹下找不到这个插件。

如何在 nopcommerce 中编辑此插件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:28:07.093

下载源代码，将整个项目文件夹放在 NOP_ROOT_FOLDER/Plugins/PLUGIN_FOLDER_NAME 下。将 CSPROJ 文件添加到您的 nopCommerce 解决方案（确保您正在下载源代码版本），一切顺利。:)

# python - Django IntegrityError 与模型中的关系

> ID：12595466
> 
> 赞同：1
> 
> 时间：2012-09-26T06:04:19.937
> 
> 标签：python, django

我正在尝试在 Django 中创建配方/配料模型

在我的models.py中，我得到了

```
class Ingredient(models.Model):
    name = models.CharField(max_length=20)

class Recipe(models.Model):
    name = models.CharField(max_length=50)
    ingredients = models.ManyToManyField(Ingredient, blank=True) 
```

但是当我在我的管理员中创建食谱或成分时，我得到：

```
IntegrityError at /admin/menuview/ingredient/add/
menuview_ingredient.recipe_id may not be NULL 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:19:17.510

您的问题与此类似：[Foreign keys and IntegrityError: id may not be NULL](https://stackoverflow.com/questions/7215279/foreign-keys-and-integrityerror-id-may-not-be-null)

要修复它，您将在保存时执行类似的操作：

```
>>> s = Recipe()
>>> s.name = 'Blah'
>>> obj = Ingredient(...)
>>> obj.save()
>>> s.ingredients = obj
>>> s.save() 
```

[Django Doc 有更多的`ManyToManyField`](https://docs.djangoproject.com/en/dev/ref/models/relations/)例子。例如，对于您的情况：

```
>>> i = Ingredient.objects.get(id=1)
>>> e = i.recipe_set.create(
...     name ='strawberry pancake',
... )
# No need to call e.save() at this point -- it's already been saved. 
```

> 这相当于（但比简单得多）：

```
>>> i = Ingredient.objects.get(id=1)
>>> e = Recipe(
...     ingredients=i,       
...     name='strawberry pancacke',
... )
>>> e.save(force_insert=True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:12:48.747

我认为你也必须给关系一个 null=True 参数。

```
ingredients = models.ManyToManyField(Ingredients, blank=True, null=True,) 
```

# oracle - ora-12560 :TNS: 安装 ODP.NET 后出现协议适配器错误

> ID：12595470
> 
> 赞同：0
> 
> 时间：2012-09-26T06:04:40.997
> 
> 标签：oracle, oracle11g

我已经在我的 Windows 7 Ultimate 中安装了 Oracle Database 11.2.0.1 Win64 和 Client 11.2.0.1 Win64，我能够使用 Sql*plus 访问 Oracle 数据库`sqlplus / as sysdba`。之后，我`ODTwithODAC1120320_32bit`在 Visual Studio 2010 中使用 C# 安装 ODP.NET 以与 Oracle 一起使用。当我尝试使用 ODP 添加到 Oracle 数据库的连接时，它会弹出`ora-12560 :TNS: protocol adapter error`，甚至在使用`SqlPlus / as sysdba`.

我读过几篇文章说停止服务会导致但我的正在运行。

可能是什么问题呢？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T12:01:47.647

通常，我建议使用与您通常使用的凭据不同的凭据安装 Oracle 服务器。Oracle 服务器（在 Windows 下）使用了一些环境变量；ODP.NET 也是如此。虽然您无法轻松地在用户配置文件中的不同环境变量集之间切换，但您可以将不同的环境变量值分配给安装和/或运行 Oracle 服务器的（不同）用户。

如果您已经安装了 Oracle 服务器（我怀疑是您的情况），请尝试：

1.  在你的 Windows 中创建一个新用户，让他有足够的特权。（“管理员”权限就可以了。:-)）
2.  以新用户身份登录。
3.  为该特定用户设置`ORACLE_HOME`、`ORACLE_SID`和环境变量（`NLS_LANGUAGE`而不是整个 Windows 的全局变量！）以指向您的 Oracle 服务器。`PATH`
4.  以原始用户身份登录。
5.  启动服务管理控制台（“services.msc”）。
6.  `OracleServiceSOMETHING`将and`Oracle SOMETHING VSS Writer Service`和`OracleJobSchedulerSOMETHING`and的“登录”凭据更改为`OracleOraDb11g_home1TNSListener`您刚刚创建的新用户+密码。（...`SOMETHING`通常您的实例的名称在哪里）
7.  停止所有 Oracle 服务。
8.  设置`ORACLE_HOME`和`PATH`env var 分别指向您的 ODP.NET root 和 root\bin 文件夹；将`ORACLE_SID`and `NLS_LANGUAGE`vars 设置为您需要的任何值。
9.  启动所有 Oracle 服务。（在这一刻之后，他们应该在自己的凭据下运行。）
10.  让我们祈祷它有效。

如果这种情况不起作用，我自己也必须即兴发挥。但到目前为止，我已经以这种方式在同一台机器上成功运行了两台 Oracle 服务器和一个 Oracle 客户端，没有任何问题，所以我希望它也适用于你。如果没有，那么仍然可以选择完全重新安装 Oracle 服务器。

不要忘记备份您的数据库......以防万一发生可怕的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:57:38.640

我在 VS 2010 中使用服务器资源管理器连接到 Oracle 11g 时遇到的主要问题不是 ODP 与 Oracle 数据库的版本兼容性，而是它的架构。**出现此类错误后，我使用deinstall.bat**文件卸载了 Oracle Database 11g，然后清理了注册表项 ../Software/Oracle 并清理了临时文件，并重新启动了系统。然后安装 Oracle 11g Database x32 数据库服务器，ODP.NET x32，检查 Env vars。第一个成功是我能够使用`SQL*Plus`. 之后启动VS 2010并尝试连接......连接！wow 曾在 VS IDE 中工作过。我非常开心 ：）

我记得我重新安装了多少次 Oracle（清理、配置检查侦听器、重新启动服务）。然后我的努力真的得到了回报。

这是一个截图![在此处输入图像描述](../Images/0cdfe33ad8f82ecbb9698a0a18864b7d.png)

# php - 如何在 mustache.php 中调用 codeigniter 助手或 php 函数

> ID：12595473
> 
> 赞同：1
> 
> 时间：2012-09-26T06:05:05.267
> 
> 标签：php, codeigniter, mustache

嗨，我正在使用 codeigniter 处理 mustache.php，它正在解析 mustache 标签，现在非常好我如何在 mustache 标签中使用 CI 助手或 php 函数，例如

```
 {{ anchor("http://www.google.com","Google") }}

//php function

    {{ date() }} 
```

我已经尝试过小胡子助手，但根据这篇文章[github mustache没有运气](https://github.com/bobthecow/mustache.php/pull/82)

在这种情况下，我必须添加额外的开始和结束胡子标签。我不想只在标签中传递函数并获取输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:51:49.053

您不能直接在 Mustache 模板中调用函数（逻辑少的模板，还记得吗？）

```
{{ link }}
{{ today }} 
```

相反，此功能属于您的渲染上下文或您的 ViewModel。至少，这意味着提前准备好您的数据：

```
<?php

$data = array(
    'link'  => anchor('http://www.google.com', 'Google'),
    'today' => date(),
);

$mustache->loadTemplate('my-template')->render($data); 
```

一个更好的方法是将所有需要的逻辑封装`my-template.mustache`在 ViewModel 类中，我们称之为`MyTemplate`：

```
<?php

class MyTemplate {
    public function today() {
        return date();
    }

    public function link() {
        return anchor('http://www.google.com', 'Google');
    }
}

$mustache->loadTemplate('my-template')->render(new MyTemplate); 
```

# javascript - 使用外部 css 文件时画布图像大小错误

> ID：12595479
> 
> 赞同：1
> 
> 时间：2012-09-26T06:05:46.310
> 
> 标签：javascript, css, html

我正在使用 HTML5 画布元素。我正在使用以下 javascript 将图像绘制到画布中：

```
var img = new Image();
var canvas = this.e;
var ctx = canvas.getContext('2d');
img.src = options.imageSrc;
img.onload = function() {
    ctx.drawImage(img,0,0);
} 
```

这工作正常。但是我遇到了一些奇怪的 CSS 问题。当我像下面这样使用内联 css 时，图像在画布中完美缩放：

```
<canvas id="canvas" width="800" height="448"></canvas> 
```

但是，当我删除内联 css 并使用外部 css 文件时，图像对于画布来说太大了，我只看到图像的左上角。这是我正在使用的CSS：

```
#canvas {
    height:448px;
    width:800px;
    border:none;
} 
```

当我使用内联 css 时，绘制的图像是否以某种方式从画布继承 css？不知道这里发生了什么，但我想使用外部 css 文件。

**编辑** 如果我没有为画布元素提供样式，它会更小，但仍然只显示图像的上角。当我使用 css 文件对其进行样式设置时，画布更大，但就像它只是放大了图像一样。显示相同数量的图像，现在只是更大了。

**编辑 2** 根据收到的答案，我现在正在使用 javascript 调整画布的 dom 大小。我将 img.onload 函数更改为以下内容：

```
img.onload = function() {
    if (options.imageWidth == 0 && options.imageHeight == 0) {
        canvas.height = this.height;
        canvas.width = this.width;
    } else {
        canvas.height = options.imageHeight;
        canvas.width = options.imageWidth;
    }
    ctx.drawImage(img,0,0);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T06:44:27.547

画布有两种尺寸 - 实际像素网格尺寸（在`width`和`height`属性中）和 CSS 尺寸。

如果未指定像素大小，则通常默认为 300x300。

CSS 大小仅指定页面中占用的空间量，默认为像素大小。如果它们不相等，图像将被缩放。

您必须在元素中指定像素大小`<canvas>`，或使用 Javascript 设置它：

```
var img = new Image();
var canvas = this.e;
var ctx = canvas.getContext('2d');
img.src = options.imageSrc;
img.onload = function() {
    canvas.width = this.width;    // new code
    canvas.height = this.height;  //    "
    ctx.drawImage(img, 0, 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:21:07.507

尝试将 !important 放在您的外部样式上，可能是某些东西覆盖了它，但内联它最后覆盖了。

```
#canvas {
    height:448px !important;
    width:800px !important;
    border:none !important;
} 
```

# php - 如何仅在 wordpress 中向 single.php 添加过滤器？

> ID：12595481
> 
> 赞同：0
> 
> 时间：2012-09-26T06:05:51.510
> 
> 标签：php, wordpress, themes, wordpress-theming

我只想在单个帖子上添加 nofollow rel 到标签云。functions.php 中的这个函数代码可以正常工作，但我不知道如何将其限制为 single.php。

```
function szub_nofollow_tag($text) {
return str_replace('<a href=', '<a rel="nofollow" href=',  $text);
}

add_filter('wp_tag_cloud', 'szub_nofollow_tag'); 
```

你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:11:12.153

[http://codex.wordpress.org/Function_Reference/is_singular](http://codex.wordpress.org/Function_Reference/is_singular)

应该做到这一点，记住在函数本身内部使用它，因为我认为 WordPress 在解析 functions.php 时不知道它是否是真/假

```
function szub_nofollow_tag($text) {
    if ( is_singular() )
        return str_replace('<a href=', '<a rel="nofollow" href=',  $text);
    else
        return $text;
}

add_filter('wp_tag_cloud', 'szub_nofollow_tag'); 
```

# c# - 选择查询内的条件

> ID：12595484
> 
> 赞同：0
> 
> 时间：2012-09-26T06:06:13.143
> 
> 标签：c#

我对我的 HR 应用程序有点困惑 我有三种类型的用户

1）普通用户（基于位置的用户），分配类型U

2）管理员（基于公司），分配类型A

3) 管理分配类型 M

我的问题是表格 DATAGRIDVIEW 普通用户（HR）应该只获取他所在位置（分支机构）的员工详细信息，而管理员应该获取公司公司的全部员工详细信息，而管理层应该获取他们所有公司集团的全部员工详细信息

我有近 56 种表格，我在其中调用选择查询来获取数据，例如

```
 SqlCommand cmd = new SqlCommand("Select * from EMPMASTERTBL" ,CON);
            cmd.Parameters.AddWithValue("@Param1", empshiftdata.Empid); 
```

但我的要求是

对于普通用户

```
(if program.usertype="n"){
 SqlCommand cmd = new SqlCommand("Select * from EMPMASTERTBL where branchlctn=@Param1",CON);
                cmd.Parameters.AddWithValue("@Param1", program.lctnpk);

} 
```

用于管理

```
(if program.usertype="M"){
     SqlCommand cmd = new SqlCommand("Select * from EMPMASTERTBL",CON); 
```

或者

```
 } 
```

但是在每个函数中调用三个不同的 sql 查询是不可能的那么有什么想法可以连接这两个查询吗？像

```
SqlCommand cmd = new SqlCommand("Select * from EMPMASTERTBL where branchlctn=@Param1",CON);
                   cmd.Parameters.AddWithValue("@Param1", program.lctnpk);//for normal user
                    cmd.Parameters.AddWithValue("@Param1", "*");//for Management  user 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:18:19.460

我建议创建一个以用户角色为参数的存储过程，并基于此角色根据需要输出相关数据。存储过程可以在后端完成所有工作，结果将始终是通用的，并且可以绑定到 datagridview。

```
SqlCommand cmd = new SqlCommand("GetEmpMasterTableResults",CON);
cmd.CommandType = CommandType.StoredProcedure;
cmd.Parameters.AddWithValue("@UserType", program.lctnpk); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:14:47.703

为什么不在条件前创建命令变量，然后在条件内设置查询本身和参数？

```
// TODO: Improve your naming, which is unconventional and includes odd
// abbreviations ("lctnpk"?)
SqlCommand command = new SqlCommand { Connection = CON };
if (program.usertype=="n") {
    command.CommandText = "Select * from EMPMASTERTBL where branchlctn=@Param1";
    command.Parameters.AddWithValue("@Param1", program.lctnpk);
} else if (program.usertype == "M") {
    command.CommandText = "Select * from EMPMASTERTBL";
} 
```

或者，您*可以*始终使用两个参数：

```
SqlCommand command = new SqlCommand(
    "Select * from EMPMASTERTBL where branchlctn=@Param1 or @usertype='M'" CON);
command.Parameters.AddWithValue("@Param1", program.lctnpk);
command.Parameters.AddWithValue("@usertype", program.usertype); 
```

...并让查询优化器弄清楚发生了什么。我对这个解决方案有点紧张——它很可能需要针对不同情况的不同查询计划；从根本上说，您正在执行不同的查询，因此在您的 SQL 中反映这一点可能是有意义的。

# facebook - facebook拒付退款详情

> ID：12595485
> 
> 赞同：0
> 
> 时间：2012-09-26T06:06:13.783
> 
> 标签：facebook, facebook-graph-api

我们正在处理大量拒付和退款。但我无法确定如何获得拒付和退款的详细信息。我们通过第三方发布了我们的游戏，因此他们拥有公司账户进行交易。我们问过他们，但显然他们没有什么可以帮助我们的。我已经使用 Graph API 来记录交易详情，并且我还使用调试工具来找出拒付和退款的原因或详情。但即使是我们的退款也没有任何理由。请帮我解决这个问题。我在这方面做了很多谷歌，但我无法找到我需要知道的内容

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:14:51.703

您实际上会得到一个“退款原因代码”——其中有哪些以及如何访问它们，如下所述：

[https://developers.facebook.com/docs/payments/disputes/#refundcb_tracking](https://developers.facebook.com/docs/payments/disputes/#refundcb_tracking)

编辑：

您似乎无法通过 API 查找退款原因代码 - 但 Facebook 会通过对您的回调 URL 的 ping 将其发送给您：

> “如果订单已被 Facebook 退款，**我们将**通过 Payments_status_update 对您的回电进行 ping 操作，以了解状态为已退款的订单。此外，还会返回一个名为refund_reason_code 的附加字段，具有以下值之一：[…]”</p>

因此，您必须对此做出反应并在此回调中评估退款原因代码（将其保存到您的数据库中……）。

# android - 使用 setcontentview 两次

> ID：12595490
> 
> 赞同：2
> 
> 时间：2012-09-26T06:06:36.900
> 
> 标签：android, android-layout, android-canvas, paint, bar-chart

我想实现类似结构的图表。

对于条形图，我使用的是 no。**我的主要活动**中的按钮数，因此输出如下：

![截屏](../Images/eac3fcd94693a4b4aaf98783a130339f.png)

* * *

然后我正在创建新类，该类扩展`View`以便使用画布为图形绘制 x 和 y 轴，如下所示：

```
public class Draw extends View {

Paint paint = new Paint();

public Draw(Context context) {
    super(context);
    paint.setColor(Color.BLACK);
  }

@Override
public void onDraw(Canvas canvas) {

    canvas.drawLine(20, 50, 20, 200, paint);
    canvas.drawLine(20, 200, 200, 200, paint);
  }
} 
```

但问题是，在我的主要活动中使用以下代码行之后：

```
Draw draw = new Draw(this);
setContentView(draw); 
```

当我`ContentView`再次设置时，我得到以下输出：

![截屏](../Images/cfe3e75efa030149d094ebc17ffb14cb.png)

* * *

所以我的问题是如何整合这两个视图以获得以下输出：

![截屏](../Images/e2cee00529be06900b133fcf32c853e2.png)

有没有其他方法可以做同样的事情？
任何帮助表示赞赏。

## 编辑

根据各种建议，我删除了

```
Draw draw = new Draw(this);
setContentView(draw); 
```

从我的活动类中，而是将这些行放在主 xml 布局中。

```
<com.example.calci.Draw 
    android:id="@+id/draw" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" /> 
```

但我得到以下**异常**：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.calci/com.example.calci.CalciActivity}: android.view.InflateException: Binary XML file line #468: Error inflating class com.example.calci.Draw

Caused by: java.lang.NoSuchMethodException: Draw(Context,AttributeSet)
at java.lang.Class.getMatchingConstructor(Class.java:643)
at java.lang.Class.getConstructor(Class.java:472)
at android.view.LayoutInflater.createView(LayoutInflater.java:480) 
```

## 编辑 2

通过添加`AttributeSet attributeSet`到构造函数，我得到了想要的结果。

但是任何人都可以建议我是否应该使用画布中的按钮或矩形来绘制条形图。

请注意，我需要根据`seekbar`值动态修改条形图的高度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T06:16:15.093

如果您使用 xml 进行条形图布局，则可以在其中包含新创建的视图，如下所示：

```
<view
    class="your.package.name.ProjectName$NameOfYourClass" 
    id="@+id/draw"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

更多关于使用自定义组件：http: [//developer.android.com/guide/topics/ui/custom-components.html](http://developer.android.com/guide/topics/ui/custom-components.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:12:06.170

要回答您的问题，您可以将`Draw`视图包含在与条形图布局相同的布局中，也许在 a 中`FrameLayout`，并避免两次设置内容视图。

然而，在图表应用程序中使用按钮似乎更像是一种 hack。`Canvas`您也可以像绘制轴一样考虑绘制条形图。

# cakephp - Cakephp 2.0 带有下拉菜单的分页

> ID：12595493
> 
> 赞同：1
> 
> 时间：2012-09-26T06:06:47.277
> 
> 标签：cakephp, drop-down-menu, pagination, cakephp-2.0

1.  我在 cakephp 中进行分页。默认情况下，“$this->Paginator->numbers”中有一个列表，但我希望对分页设计进行一些更改，所以我希望 dropdwon 中的所有页面都在下拉列表中选择当前页面。我通过编写以下代码成功获得了下拉列表，但问题是当我点击页面时它不会改变提前谢谢

` <选择>

```
echo $this->Paginator->numbers(array('tag'=>'option'));

</select> 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:51:27.627

您必须使用 JS 将事件 onChange 绑定到您的选择元素。它应该将您重定向到所选页面。[你可以在 cake 的文档](http://book.cakephp.org/2.0/en/core-libraries/helpers/paginator.html#PaginatorHelper)中看到如何构造跳转 url 。您也可以使用[此](http://coffeepowered.co.uk/2009/10/quick-and-dirty-dropdown-pagination-in-cakephp/)解决方案，但请注意它是为 cake 1.x 编写的，需要进行一些更改。

# c# - Visual Studio 2010 专业版中的安装错误超过 Win 7 Premier

> ID：12595495
> 
> 赞同：0
> 
> 时间：2012-09-26T06:06:54.523
> 
> 标签：c#, visual-studio-2010

我正在尝试在我的本地机器上安装 Visual Studio 2010 Professional Edition，但我发现了错误。我用不同的方式尝试了 4 次，但它没有安装在我的机器上，但相同的副本正确安装在我朋友的机器上，我厌倦了这种情况。请指导我正确地做什么以及如何进行此安装？ ? 这是日志文件。

```
[25/09/12,21:21:50] Microsoft Application Error Reporting: [2] Error: Installation failed for component Microsoft Application Error Reporting. MSI returned error code 2
[25/09/12,21:21:51] VS70pgui: [2] DepCheck indicates Microsoft Application Error Reporting is not installed.
[25/09/12,21:21:52] VS70pgui: [2] DepCheck indicates VC 9.0 Runtime (x86) was not attempted to be installed.
[25/09/12,21:21:52] VS70pgui: [2] DepCheck indicates VC 10.0 Runtime (x86) was not attempted to be installed.
[09/27/11,21:21:52] VS70pgui: [2] DepCheck indicates VC 10.0 Runtime (x64) was not attempted to be installed.
[09/27/11,21:21:52] VS70pgui: [2] DepCheck indicates Microsoft .NET Framework 4 was not attempted to be installed.
[09/27/11,21:21:52] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio 2010 64bit Prerequisites (x64) was not attempted to be installed.
[09/27/11,21:21:52] VS70pgui: [2] DepCheck indicates Microsoft Visual F# 2.0 Runtime was not attempted to be installed.
[09/27/11,21:21:53] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio Macro Tools was not attempted to be installed.
[09/27/11,21:21:53] VS70pgui: [2] DepCheck indicates TFS Object Model (x64) was not attempted to be installed.
[09/27/11,21:21:53] VS70pgui: [2] DepCheck indicates .NET Framework 4 Multi-Targeting Pack was not attempted to be installed.
[09/27/11,21:21:53] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio 2010 Professional - ENU was not attempted to be installed.
[09/27/11,21:21:53] VS70pgui: [2] DepCheck indicates Microsoft Web Deployment Tool (x64) was not attempted to be installed.
[09/27/11,21:21:53] VS70pgui: [2] DepCheck indicates Microsoft ASP.NET MVC 2 - Visual Studio 2010 Tools was not attempted to be installed.
[09/27/11,21:21:53] VS70pgui: [2] DepCheck indicates Microsoft ASP.NET MVC 2 was not attempted to be installed.
[09/27/11,21:21:53] VS70pgui: [2] DepCheck indicates Microsoft Silverlight was not attempted to be installed.
[09/27/11,21:21:53] VS70pgui: [2] DepCheck indicates Microsoft Silverlight 3 SDK was not attempted to be installed.
[09/27/11,21:21:54] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio 2010 Tools for Office Runtime (x64) was not attempted to be installed.
[09/27/11,21:21:54] VS70pgui: [2] DepCheck indicates Microsoft Office Developer Tools (x64) was not attempted to be installed.
[09/27/11,21:21:54] VS70pgui: [2] DepCheck indicates Dotfuscator Software Services - Community Edition was not attempted to be installed.
[09/27/11,21:21:54] VS70pgui: [2] DepCheck indicates Crystal Reports templates for Visual Studio 2010 was not attempted to be installed.
[09/27/11,21:21:54] VS70pgui: [2] DepCheck indicates Microsoft SQL Server Compact 3.5 SP2 (x86) ENU was not attempted to be installed.
[09/27/11,21:21:54] VS70pgui: [2] DepCheck indicates Microsoft SQL Server Compact 3.5 SP2 (x64) ENU was not attempted to be installed.
[09/27/11,21:21:54] VS70pgui: [2] DepCheck indicates Visual Studio 2010 Tools for SQL Server Compact 3.5 SP2 ENU was not attempted to be installed.
[09/27/11,21:21:54] VS70pgui: [2] DepCheck indicates Microsoft Sync Framework Runtime v1.0 (x64) ENU was not attempted to be installed.
[09/27/11,21:21:54] VS70pgui: [2] DepCheck indicates Microsoft Sync Services for ADO.NET v2.0 (x64) ENU was not attempted to be installed.
[09/27/11,21:21:55] VS70pgui: [2] DepCheck indicates Microsoft Sync Framework Services v1.0 (x64) ENU was not attempted to be installed.
[09/27/11,21:21:55] VS70pgui: [2] DepCheck indicates Microsoft Sync Framework SDK v1.0 (x64) ENU was not attempted to be installed.
[09/27/11,21:21:55] VS70pgui: [2] DepCheck indicates VC 10.0 Designtime (x64) was not attempted to be installed.
[09/27/11,21:21:55] VS70pgui: [2] DepCheck indicates Microsoft SQL Publishing Wizard 1.4 was not attempted to be installed.
[09/27/11,21:21:55] VS70pgui: [2] DepCheck indicates Microsoft SQL Server System CLR Types was not attempted to be installed.
[09/27/11,21:21:55] VS70pgui: [2] DepCheck indicates Microsoft SQL Server System CLR Types (x64) was not attempted to be installed.
[09/27/11,21:21:55] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 R2 Management Objects was not attempted to be installed.
[09/27/11,21:21:55] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 R2 Management Objects (x64) was not attempted to be installed.
[09/27/11,21:21:55] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 Express Service Pack 1 (x64) was not attempted to be installed.
[09/27/11,21:21:55] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 R2 Data-Tier Application Framework was not attempted to be installed.
[09/27/11,21:21:56] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 R2 Data-Tier Application Project was not attempted to be installed.
[09/27/11,21:21:56] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 R2 Transact-SQL Language Service was not attempted to be installed.
[09/27/11,21:21:56] VS70pgui: [2] DepCheck indicates Microsoft SharePoint Developer Tools was not attempted to be installed.
[09/27/11,21:21:56] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio 2010 ADO.NET Entity Framework Tools was not attempted to be installed.
[09/27/11,21:21:56] VS70pgui: [2] DepCheck indicates Microsoft Help Viewer 1.0 x64 was not attempted to be installed.
[09/27/11,21:23:51] Microsoft Application Error Reporting: [2] Error: Installation failed for component Microsoft Application Error Reporting. MSI returned error code 2
[09/27/11,21:23:52] VS70pgui: [2] DepCheck indicates Microsoft Application Error Reporting is not installed.
[09/27/11,21:23:52] VS70pgui: [2] DepCheck indicates VC 9.0 Runtime (x86) was not attempted to be installed.
[09/27/11,21:23:52] VS70pgui: [2] DepCheck indicates VC 10.0 Runtime (x86) was not attempted to be installed.
[09/27/11,21:23:53] VS70pgui: [2] DepCheck indicates VC 10.0 Runtime (x64) was not attempted to be installed.
[09/27/11,21:23:53] VS70pgui: [2] DepCheck indicates Microsoft .NET Framework 4 was not attempted to be installed.
[09/27/11,21:23:53] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio 2010 64bit Prerequisites (x64) was not attempted to be installed.
[09/27/11,21:23:53] VS70pgui: [2] DepCheck indicates Microsoft Visual F# 2.0 Runtime was not attempted to be installed.
[09/27/11,21:23:53] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio Macro Tools was not attempted to be installed.
[09/27/11,21:23:53] VS70pgui: [2] DepCheck indicates TFS Object Model (x64) was not attempted to be installed.
[09/27/11,21:23:53] VS70pgui: [2] DepCheck indicates .NET Framework 4 Multi-Targeting Pack was not attempted to be installed.
[09/27/11,21:23:53] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio 2010 Professional - ENU was not attempted to be installed.
[09/27/11,21:23:53] VS70pgui: [2] DepCheck indicates Microsoft Web Deployment Tool (x64) was not attempted to be installed.
[09/27/11,21:23:53] VS70pgui: [2] DepCheck indicates Microsoft ASP.NET MVC 2 - Visual Studio 2010 Tools was not attempted to be installed.
[09/27/11,21:23:53] VS70pgui: [2] DepCheck indicates Microsoft ASP.NET MVC 2 was not attempted to be installed.
[09/27/11,21:23:54] VS70pgui: [2] DepCheck indicates Microsoft Silverlight was not attempted to be installed.
[09/27/11,21:23:54] VS70pgui: [2] DepCheck indicates Microsoft Silverlight 3 SDK was not attempted to be installed.
[09/27/11,21:23:54] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio 2010 Tools for Office Runtime (x64) was not attempted to be installed.
[09/27/11,21:23:54] VS70pgui: [2] DepCheck indicates Microsoft Office Developer Tools (x64) was not attempted to be installed.
[09/27/11,21:23:54] VS70pgui: [2] DepCheck indicates Dotfuscator Software Services - Community Edition was not attempted to be installed.
[09/27/11,21:23:54] VS70pgui: [2] DepCheck indicates Crystal Reports templates for Visual Studio 2010 was not attempted to be installed.
[09/27/11,21:23:54] VS70pgui: [2] DepCheck indicates Microsoft SQL Server Compact 3.5 SP2 (x86) ENU was not attempted to be installed.
[09/27/11,21:23:54] VS70pgui: [2] DepCheck indicates Microsoft SQL Server Compact 3.5 SP2 (x64) ENU was not attempted to be installed.
[09/27/11,21:23:54] VS70pgui: [2] DepCheck indicates Visual Studio 2010 Tools for SQL Server Compact 3.5 SP2 ENU was not attempted to be installed.
[09/27/11,21:23:54] VS70pgui: [2] DepCheck indicates Microsoft Sync Framework Runtime v1.0 (x64) ENU was not attempted to be installed.
[09/27/11,21:23:54] VS70pgui: [2] DepCheck indicates Microsoft Sync Services for ADO.NET v2.0 (x64) ENU was not attempted to be installed.
[09/27/11,21:23:55] VS70pgui: [2] DepCheck indicates Microsoft Sync Framework Services v1.0 (x64) ENU was not attempted to be installed.
[09/27/11,21:23:55] VS70pgui: [2] DepCheck indicates Microsoft Sync Framework SDK v1.0 (x64) ENU was not attempted to be installed.
[09/27/11,21:23:55] VS70pgui: [2] DepCheck indicates VC 10.0 Designtime (x64) was not attempted to be installed.
[09/27/11,21:23:55] VS70pgui: [2] DepCheck indicates Microsoft SQL Publishing Wizard 1.4 was not attempted to be installed.
[09/27/11,21:23:55] VS70pgui: [2] DepCheck indicates Microsoft SQL Server System CLR Types was not attempted to be installed.
[09/27/11,21:23:55] VS70pgui: [2] DepCheck indicates Microsoft SQL Server System CLR Types (x64) was not attempted to be installed.
[09/27/11,21:23:55] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 R2 Management Objects was not attempted to be installed.
[09/27/11,21:23:55] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 R2 Management Objects (x64) was not attempted to be installed.
[09/27/11,21:23:55] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 Express Service Pack 1 (x64) was not attempted to be installed.
[09/27/11,21:23:55] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 R2 Data-Tier Application Framework was not attempted to be installed.
[09/27/11,21:23:56] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 R2 Data-Tier Application Project was not attempted to be installed.
[09/27/11,21:23:56] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 R2 Transact-SQL Language Service was not attempted to be installed.
[09/27/11,21:23:56] VS70pgui: [2] DepCheck indicates Microsoft SharePoint Developer Tools was not attempted to be installed.
[09/27/11,21:23:56] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio 2010 ADO.NET Entity Framework Tools was not attempted to be installed.
[09/27/11,21:23:56] VS70pgui: [2] DepCheck indicates Microsoft Help Viewer 1.0 x64 was not attempted to be installed. 
```

[IMG]http://i52.tinypic.com/11hcn0o.jpg[/IMG]

# model-view-controller - 如何在 Ember 中构建递归视图？

> ID：12595496
> 
> 赞同：3
> 
> 时间：2012-09-26T06:06:56.950
> 
> 标签：model-view-controller, ember.js

在我的应用程序中，我有一个名为*block*的项目，它可以包含其他块项目并被其他*块*项目包含。为了简单起见，假设这些块可以无限嵌套。

我想知道我是否可以创建与也嵌套的块相对应的递归视图。每个视图都将呈现为`DIV`包含其子级并位于其父级内的`DIV`?

虽然视图在它们可以包含的内容方面是相似的，但它们将从服务器获取的实际内容可能不同。这是一个示例数据：

```
App.blocks.set('content',[
    Em.Object.create({title:"One", id:"1", is_inside:"0"}),
    Em.Object.create({title:"Two", id:"2", is_inside:"1"}),
    Em.Object.create({title:"Three", id:"3", is_inside:"0"}),
    Em.Object.create({title:"Four", id:"4", is_inside:"3"}),
    Em.Object.create({title:"Five", id:"5", is_inside:"4"})
]) 
```

在此示例中，块 1 将呈现为根（假设 0 是根，这意味着不在任何其他块内）。块二将在块一内呈现，依此类推。

我注意到不久前有人问过[类似的问题](https://stackoverflow.com/questions/9857781/building-a-auto-refreshing-nested-list-in-emberjs)，但我对那里的答案不满意。我觉得在 Ember 中必须有一种优雅的方式来实现这一点。

你能给我举个例子来说明如何在 Ember 中做到这一点吗？如果没有，任何可以帮助我取得进步和完善我的问题的建议也将不胜感激。

编辑：这是我用一些可以用作起点的初始数据制作[的 jsFiddle 。](http://jsfiddle.net/arasbm/nyfk8/4/)希望在您的帮助下，我可以`DIVs`根据它们的*is_inside*关系进行嵌套。我已经更新了帖子以使用这个更简单的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:22:05.863

以此为**提示**，我认为 的`layout`属性`Ember.View`是在救援中......它是这样工作的

```
App.myView =  Ember.View.extend({
  layoutName: "parent",
  templateName: "child"
})

<script type="text/handlebars" data-template-name="parent">
  Who's your Daddy ??<br> {{yield}} <br> ######
</script>

<script type="text/handlebars" data-template-name="child">
  I'm your son !
</script> 
```

将导致以下html

```
<div id="ember1" class="ember-view">
  Who's your Daddy?
  <div id="ember-2" class="ember-view">
    I'm your son !
  </div>
  ######
</div> 
```

首先对数据进行建模，然后在 js 中使用`for`or`while`循环来创建视图，我认为使用把手帮助器进行递归不是一个好主意。

**已编辑部分** 可能有比这更好的方法...但是检查一下，在这里您并没有将嵌套限制在一个级别，对吗？

```
App.MainView = Ember.View.extend({
  templateName: "main"
})

App.View1 = Ember.View.extend({
  id: 1,
  templateName: "view1",
  parentId: "main"
})

App.View2 = Ember.View.extend({
  id: 2,
  templateName: "view2",
  parentId: 1
})

App.View3 = Ember.View.extend({
  id: 3,
  templateName: "view3",
  parentId: 1
})

App.View4 = Ember.View.extend({
  id: 4,
  templateName: "view4",
  parentId: 3
})

App.View5 = Ember.View.extend({
  id: 5,
  templateName: "view5",
  parentId: "main"
})

App.viewArray = [App.View1, App.View2, App.View3, App.View4, App.View5];

App.viewArray.forEach(view, function(){
  parentView = App.viewArray.findProperty("id", view.get('parentId'))
  view.set("layoutName", parentView.get('templateName'))
}) 
```

# environment-variables - 从流星中的配置文件或环境变量中获取值

> ID：12595501
> 
> 赞同：9
> 
> 时间：2012-09-26T06:07:18.903
> 
> 标签：environment-variables, configuration-files, meteor

这对于存储 API 密钥或其他敏感信息非常有用。据我了解，您可以在本地使用配置文件，但它们在meteor.com 上不起作用，但我听说环境变量很快就会得到支持，或者已经在最近的版本中得到支持，但我不能找到任何例子。

有人可以提供一个如何从环境变量或其他安全位置检索值的示例吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T08:41:20.110

您实际上可以访问该`process`对象以检索 Meteor 中的环境变量。本质上，只需执行与此[解决方案相同的操作](https://stackoverflow.com/questions/4870328/how-to-read-environment-variable-in-node-js)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T15:58:47.430

经过一番思考，将它们全部存储在`.js`对象文字内的文件中，将该文件添加到，并使用虚拟或空白值`.gitignore`签入相应的文件就可以了。`.js.sample`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-23T04:07:44.237

有一种更好的方法来处理环境变量。如果您来自 Ruby on Rails，那么您习惯于在`.ENV`文件或`config/application.yml`文件中设置环境变量。

Meteor 以类似的方式处理环境变量。

* * *

### 创建 settings.json 文件

在`server`项目的文件夹中，创建一个文件并将其命名为`settings.json`. 将此文件添加到您的 gitignore 文件中。

在此 JSON 文件中，您可以保存所需的任何环境变量。

```
{
  "facebookAppId": "6666667527666666",
  "facebookAppSecret": "00004b20dd845637777321cd3c750000",
  "amazonS3Bucket": "bucket-name"
} 
```

### 加载环境变量

要在运行时在应用程序中使用这些值，请使用`--settings`选项标志启动 Meteor。

```
$ meteor run --settings server/settings.json 
```

### 使用值

要使用这些值，只需调用`Meteor.settings`对象。

```
ServiceConfiguration.configurations.upsert(
  { service: "facebook" },
  {
    $set: {
      appId: Meteor.settings.facebookAppId, 
      secret: Meteor.settings.facebookAppSecret
    }
  }
); 
```

* * *

这里的所有都是它的！确保您的设置安全，不要**提交**您的密钥。

# qt - Qt - 如何从 QTableView 中删除选定的行并将其复制到 QLineEdit

> ID：12595502
> 
> 赞同：1
> 
> 时间：2012-09-26T06:07:22.177
> 
> 标签：qt, qtableview, qt4.7, model-view, qlineedit

我有 3 个`QLineEdit`（比如姓名、地址和电话号码）、2 个`QPushButton`（添加和修改）和一个`QTableView`.

当我在所有`QLineEdit`s 中输入文本时，如果单击 Add 按钮，则`QLineEdit`s 的所有 3 个文本都应添加到`QTableView`.
同样，如果我在 中输入 3 个文本`QLineEdit`并单击添加按钮，则文本应放置在`QTableView`. 像这样应该继续下去。我做了这一切，它工作正常。

现在，如果我从中选择任何行，`QTableView`并且一旦单击修改按钮，则必须从 中删除所选行，`QTableView`并且项目应再次放置在它们各自`QLineEdit`的 s 中。

我怎样才能做到这一点 ？

例子.h

```
#ifndef EXAMPLE_H
#define EXAMPLE_H

#include <QWidget>
#include <QStandardItemModel>

namespace Ui {
class Example;
}

class Example : public QWidget
{
    Q_OBJECT

public:
    explicit Example (QWidget *parent = 0);
    ~Example();

private slots:
    void on_addButton_released();
    void on_modifyButton_released();

private:
    Ui::Example*ui;
    QStandardItemModel *model;
};

#endif // EXAMPLE_H 
```

示例.CPP

```
#include "Example.h"

Example::Example(QWidget *parent) :
    QWidget(parent),
    ui(new Ui::Example)
{
    ui->setupUi(this);
    model = new QStandardItemModel();

    ui->tableView->setModel(model);

}

Example::~Example()
{
    delete ui;
}

void Example::on_addButton_released()
{
    model->setHorizontalHeaderItem(0, new QStandardItem(QString(" NAME ")));
    model->setHorizontalHeaderItem(1, new QStandardItem(QString(" ADDRESS ")));
    model->setHorizontalHeaderItem(2, new QStandardItem(QString(" PHONE NO ")));

    QStandardItem *nameItem = new QStandardItem(ui->nameLineEdit->text());
    QStandardItem *addressItem = new QStandardItem(ui->addressLineEdit->text());
    QStandardItem *phoneItem = new QStandardItem(ui->phoneLineEdit->text());

    QList<QStandardItem*> row;
    row << nameItem << addressItem << phoneItem;

    model->appendRow(row);

    ui->nameLineEdit->clear();
    ui->addressLineEdit->clear();
    ui->mobileLineEdit->clear();
    ui->emailLineEdit->clear();
}

void Example::on_modifyButton_released()
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:42:48.430

您要做的是在单击“修改”按钮时，`QItemSelectionModel`从`QTableView`. 一旦你有了选择，如果有的话，处理它。

例如：

```
void Example::on_modifyButton_released()
{
    if( ui->myTableView )
    {
         QModelIndex currentIndex = ui->myTableView->selectionModel();

         // Make sure to check the index is valid, as the user
         // may not have selected a row.
         if( currentRow.isValid() )
         {
              // Add your code here to copy the data to 
              // your QLineEdit and remove the row from your
              // QStandardModel.
              ...                  
         }
    }
} 
```

以供参考：

`QTableView` [http://qt-project.org/doc/qt-4.8/QTableView.html](http://qt-project.org/doc/qt-4.8/QTableView.html)

`QItemSelectionModel` [http://qt-project.org/doc/qt-4.8/QItemSelectionModel.html](http://qt-project.org/doc/qt-4.8/QItemSelectionModel.html)

# jquery - jquery：两个div标签下li的点击事件

> ID：12595503
> 
> 赞同：0
> 
> 时间：2012-09-26T06:07:28.480
> 
> 标签：jquery

我需要根据角色动态绑定菜单，因此我将字符串与`ul`&`li`标签连接起来。

我需要在标签中显示选定的文本，因此我添加了一个点击事件，但它不会触发。

**HTML 代码**

```
<div id='jqxWidget' style='height: 30px; display: none;background-color:#e8e8e8'>
    <div id='jqxMenu' style='margin-left: 20px;'></div>
</div> 
```

**点击事件**

```
$('.jqxMenu li').click(function () {
    alert($(this).html()); 
}); 
```

**jqxmenu中绑定的字符串**

```
 <ul id='mainid'>
     <li><a href=#>Operations</a>
       <ul style='width: 150px;'>
         <li><a href=default.aspx?src=1010>Booking</a></li>
         <li><a href=default.aspx?src=1009>Manifest </a></li>
         <li><a href=default.aspx?src=1002>RunSheet</a></li>
         <li><a href=default.aspx?src=1004>Delivery Updation</a></li>
         <li><a href=default.aspx?src=1007>Recovery</a></li>
         <li><a href=default.aspx?src=100>Local Manifest Branch</a></li>
         <li><a href=default.aspx?src=5501>Extras</a></li>
         <li><a href=default.aspx?src=2300>Bulk Import</a></li>
       </ul>
     </li>
    </ul> 
```

例如，如果`Manifest`选中，我需要在点击事件的标签中显示该文本。然而，它并没有火...

我为点击事件尝试了以下代码：

```
$('#jqxMenu li').click(function (e) {
    e.preventDefault();  // Check if the li has a parent .. To prevent double firing of li     
    if ($(this).parents('li').length) {
        e.stopPropagation();
    }
    alert($(this).html());
}); 
```

click 事件没有被触发，但是，当我在小提琴中测试它时，它工作正常。

我的整个jQuery代码如下：

```
$(document).ready(function () {
    var theme = getTheme();
    $('#jqxMenu li').click(function (e) {
    e.preventDefault();   // Check if the li has a parent .. To prevent double firing of li     
    if ($(this).parents('li').length) {
        e.stopPropagation();
    }
    alert($(this).html());
});

$("#jqxMenu").css('visibility', 'visible');

$("#jqxMenu").jqxMenu({ width: '600', height: '30px', theme: theme });

$("#open").bind('change', function (event) {
    $("#jqxMenu").jqxMenu({ autoOpen: true });
});        

$('#jqxMenu').bind('itemclick', function () { 
    $('#selid').val($(event.args).text()); });        
}); 
```

为什么没有在网站中触发点击事件的任何建议？

**提前致谢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:10:47.197

您的选择器不正确，您正在使用类选择器按 ID 选择元素，还将您的代码放入文档就绪处理程序中，如果您想获取元素的文本内容，您应该使用`text`而不是`html`.

```
$(document).ready(function(){
    $('#mainid li a').click(function(event) {
         alert($(this).text()); 
         // event.preventDefault()  prevents the default action of the event
    });
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:09:56.730

像这样试试

```
$('ul>#mainid>ul>li').click(function () {
        alert($(this).html()); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:15:30.780

选择器错误..您正在尝试访问类而不是 id.. 试试这个

```
$('#jqxMenu li') 
```

试试这个代码

```
$('#jqxMenu li').click(function(e) {
    e.preventDefault();
    // Check if the li has a parent .. To prevent double firing of li
    if ($(this).parents('li').length) {
        e.stopPropagation();
    }
    alert($(this).html());
});​ 
```

检查[小提琴](http://jsfiddle.net/sushanth009/2DW9H/)

# python - 为什么我不能遍历通过 __getattr__ 委托给可迭代对象的对象？

> ID：12595506
> 
> 赞同：6
> 
> 时间：2012-09-26T06:07:58.360
> 
> 标签：python, python-2.7

[Core Python Programming](http://cpp.wesc.webfactional.com/cpp1e/)一书中关于该主题的示例`Delegation`似乎不起作用..或者我可能没有清楚地理解该主题..

下面是代码，其中类`CapOpen`包装了一个对象并定义了在模式下打开时`file`的修改行为。它应该只以大写形式写入所有字符串。`file``write`

但是，当我尝试打开文件进行读取并对其进行迭代以打印每一行时，出现以下异常：

```
Traceback (most recent call last):
  File "D:/_Python Practice/Core Python Programming/chapter_13_Classes/
        WrappingFileObject.py", line 29, in <module>
    for each_line in f:
TypeError: 'CapOpen' object is not iterable 
```

这很奇怪，因为虽然我没有明确定义迭代器方法，但我希望调用通过委托`__getattr__`给底层`file`对象。这是代码。我错过了什么吗？

```
class CapOpen(object):
    def __init__(self, filename, mode='r', buf=-1):
        self.file = open(filename, mode, buf)

    def __str__(self):
        return str(self.file)

    def __repr__(self):
        return `self.file`

    def write(self, line):
        self.file.write(line.upper())

    def __getattr__(self, attr):
        return getattr(self.file, attr)

f = CapOpen('wrappingfile.txt', 'w')
f.write('delegation example\n')
f.write('faye is good\n')
f.write('at delegating\n')
f.close()

f = CapOpen('wrappingfile.txt', 'r')

for each_line in f:   # I am getting Exception Here..
    print each_line, 
```

我正在使用 Python 2.7。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T06:47:59.167

[这是新式类](http://docs.python.org/2/reference/datamodel.html#new-style-special-lookup)的 Python 实现决策的非直观结果：

> 除了为了正确性而绕过任何实例属性之外，隐式特殊方法查找通常也会绕过`__getattribute__()`对象元类的方法......
> 
> 以这种方式绕过`__getattribute__()`机制为解释器中的速度优化提供了很大的空间，但代价是处理特殊方法的一些灵活性（特殊方法必须在类对象本身上设置，以便解释器始终调用） .

[`__getattr__`在/`__getattribute__`](http://docs.python.org/2/reference/datamodel.html?highlight=__getattr__#object.__getattr__)的文档中也明确指出了这一点：

> **注意** 当通过语言语法或内置函数隐式调用查找特殊方法时，仍可能绕过此方法。请参阅*新式类的特殊方法查找。*

换句话说，`__getattr__`当您的属性未定义时，您不能依赖总是拦截您的方法查找。这并不直观，因为期望这些隐式查找遵循与访问您的对象的所有其他客户端相同的路径是合理的。如果您`f.__iter__`直接从其他代码调用，它将按预期解决。但是，当直接从该语言调用时，情况并非如此。

您引用的书很旧，因此原始示例可能使用[了旧式类](http://docs.python.org/2/reference/datamodel.html#new-style-and-classic-classes)。如果您从 中删除继承`object`，您的代码将按预期工作。话虽如此，您应该避免编写旧样式的类，因为它们将在 Python 3 中过时。如果您愿意，您仍然可以通过实现`__iter__`并立即委托给底层的`self.file.__iter__`.

`file`或者，直接从对象继承，并且`__iter__`可以通过正常查找获得，这样也可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T07:53:04.830

一个对象是可[迭代](http://docs.python.org/library/stdtypes.html?highlight=__iter__#iterator-types)的，它的类必须具有`__iter__`或`__getitem__`定义。

[`__getattr__`](http://docs.python.org/reference/datamodel.html?highlight=__getattr__#customizing-attribute-access)仅在从实例中*检索*某些内容时调用，但由于支持迭代的方式有多种，Python 会首先查看是否*存在*适当的方法。

试试这个：

```
class Fake(object):
    def __getattr__(self, name):
        print "Nope, no %s here!" % name
        raise AttributeError

f = Fake()
for not_here in f:
    print not_here 
```

如您所见，引发了相同的错误：`TypeError: 'Fake' object is not iterable`.

如果你这样做：

```
print '__getattr__' in Fake.__dict__
print '__iter__' in Fake.__dict__
print '__getitem__' in Fake.__dict__ 
```

您可以看到 Python 所看到的：既不存在`__iter__`也不`__getitem__`存在，因此 Python 不知道如何迭代它。虽然 Python*可以*尝试然后捕获异常，但我怀疑它不捕获异常的原因是捕获异常的速度相当慢。

有关制作迭代器的多种方法，请参见[我的答案。](https://stackoverflow.com/a/7542261/208880)

# oracle - oracle 分析如何返回此行

> ID：12595513
> 
> 赞同：1
> 
> 时间：2012-09-26T06:08:22.673
> 
> 标签：oracle

我正在为 DWH 目的编写此查询。

```
SELECT 
   YEAR
  ,MONTH
  ,WEEK
  ,C.CPG_PK         CPG
  ,C.DEP_PK         DEPT
  ,T.CUST_ID        CUST_ID
  ,D1.R_ID          R_ID
  ,Decode(d2.AT_CODE,'3',FUNC1.GET_ATT(d2.AT_CODE,D2.VAL_CODE))    AS P1
  ,decode(d2.AT_CODE,'2',FUNC1.GET_ATT(d2.AT_CODE,D2.VAL_CODE))    AS IC
  ,decode(d2.AT_CODE,'1',FUNC1.GET_ATT(d2.AT_CODE,D2.VAL_CODE))    AS B1
  ,decode(FUNC1.GET_ATT(d2.AT_CODE,D2.VAL_CODE), 2 , d2.AT_CODE)    AS P2
  ,decode(FUNC1.GET_ATT(d2.AT_CODE,D2.VAL_CODE), 5 , d2.AT_CODE)    AS B2
  ,COUNT(DISTINCT A.CUST_ID)         TOTAL_ACC
  ,COUNT(DISTINCT T.TXN_PK)          TOTAL_TXN
  ,SUM(AM_AMOUNT)                    TOTAL_AMT
FROM T_HEADER  T
    ,CUST_MASTER A 
    ,TX_DETAILS1 D1
    ,TX_DETAILS2 D2
    ,CPG_MASTER C
WHERE   A.TYPE  =  0      
AND     T.CUST_ID = A.CUST_ID
AND     T.TXN_PK= 5001
AND     T.TXN_PK= D1.TXN_PK
AND     T.TXN_PK= D2.TXN_PK
AND     D1.CPG_PK = C.CPG_PK
AND     D1.OP = 1 
GROUP BY 
 YEAR
,MONTH
,WEEK
,C.CPG_PK
,C.DEP_PK
,t.CUST_ID 
,D1.R_ID
,Decode(d2.AT_CODE,'3',FUNC1.GET_ATT(d2.AT_CODE,D2.VAL_CODE))
,decode(d2.AT_CODE,'2',FUNC1.GET_ATT(d2.AT_CODE,D2.VAL_CODE))
,decode(d2.AT_CODE,'1',FUNC1.GET_ATT(d2.AT_CODE,D2.VAL_CODE))
,decode(FUNC1.GET_ATT(d2.AT_CODE,D2.VAL_CODE), 2 , d2.AT_CODE)
,decode(FUNC1.GET_ATT(d2.AT_CODE,D2.VAL_CODE), 5 , d2.AT_CODE) 
```

生成的输出如下

```
YEAR    MONTH   WEEK    CPG DEPT    CUST_ID R_ID    P1  IC  B1  P2  B2  TOTAL_ACC   TOTAL_TXN   TOTAL_AMT
2012    08  32  127 -1  10019   3665                    134 1   1   
2012    08  32  127 -1  10019   3665                    135 1   1   
2012    08  32  127 -1  10019   3665            723         1   1   
2012    08  32  127 -1  10019   3665        714             1   1   
2012    08  32  127 -1  10019   3665    21                  1   1   
2012    08  32  128 -1  10019   3665                    134 1   1   
2012    08  32  128 -1  10019   3665                    135 1   1   
2012    08  32  128 -1  10019   3665            723         1   1   
2012    08  32  128 -1  10019   3665        714             1   1   
2012    08  32  128 -1  10019   3665    21                  1   1 
```

这里的值是重复的，我尝试了可能的 group by。

所需的输出是

```
YEAR    MONTH   WEEK    CPG DEPT    CUST_ID R_ID    P1  IC  B1  P2  B2  TOTAL_ACC   TOTAL_TXN   TOTAL_AMT
2012    08  32  127 -1  10019   3665    21  714 723     134 1   1   
2012    08  32  127 -1  10019   3665    21  714 723     135 1   1   
2012    08  32  128 -1  10019   3665    21  714 723     134 1   1   
2012    08  32  128 -1  10019   3665    21  714 723     135 1   1 
```

主要是年，月，周，cpg，部门，cust_id，r_id，p1，ic，b1，p2，b2 它应该是唯一的行。使用分析函数可以实现还是我需要编写`pl/sql`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:00:25.927

看到这个，我想我有一个答案给你。所以你想要的是 SQL 来获取一个看起来像这样的表：

```
Year  Col_1  Col_2  Col_3
2012    A
2012           B
2012                  C 
```

并将其转换为：

```
Year  Col_1  Col_2  Col_3
2012    A      B      C 
```

您可以做的（对于上面的示例）如下：

```
Select
    Year,
    Max(Col_1) as C1,
    Max(Col_2) as C2,
    Max(Col_3) as C3
From
    Table_1
Group By
    Year 
```

如果您每条记录只有 1 条，这将毫无问题。否则，您可能必须弄清楚是否需要使用`MAX`、`MIN`、`SUM`或替代聚合函数。

如果所有数据都在一列中，并且您希望它在一列中，则可以使用类似的技术：

表格1

```
Year  Col_1 
2012    A
2012    B
2012    C 
```

代码

```
Select
    Year,
    Max(Case When Col_1 = 'A' Then 'A' End) as A_Col,
    Max(Case When Col_1 = 'B' Then 'B' End) as B_Col,
    Max(Case When Col_1 = 'C' Then 'C' End) as C_Col
From
    Table_1
Group By
    Year 
```

请注意，`Decodes`应该代替`Case`语句，但我认为`Case`s 更容易阅读。

# forms - 粘贴文本时输入文本移动 - Webkit

> ID：12595515
> 
> 赞同：0
> 
> 时间：2012-09-26T06:08:30.887
> 
> 标签：forms, input, webkit

我在 webkit 浏览器中遇到了一个奇怪的问题（实际上它是由客户端报告在 Chrome 中发生的，但我目前只能在 Safari for Mac 中看到它）。在输入中键入时，文本很好，但是一旦将文本粘贴到输入中，文本就会跳到顶部。我真的不知道是什么原因造成的。这是一个已知的问题？是我做错了什么吗？我似乎无法弄清楚，非常感谢任何帮助。这是它的样子：

[http://jsfiddle.net/JDhYf/1/](http://jsfiddle.net/JDhYf/1/)

先感谢您，

死灵

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:23:13.257

“line-height:” 视觉上解决了这个问题。但是，它似乎确实是 webkit 浏览器中的一个错误。[2012 年 2 月 12 日在 code.google.com 上报告](http://code.google.com/p/chromium/issues/detail?id=113875)

# java - JAVA 中的无效日期格式错误

> ID：12595521
> 
> 赞同：1
> 
> 时间：2012-09-26T06:09:09.967
> 
> 标签：java

> **可能重复：**
> [如何在 Java 中健全地检查日期](https://stackoverflow.com/questions/226910/how-to-sanity-check-a-date-in-java)

我想将 String 转换为 Date.. 条件是接受的 String 格式应该只有 this `yyyy/MM/dd-HH:MM:SS`。

以任何其他格式提供的日期应该会出错。

```
try {
    String str_date = "25/09/2012-13:43:20";
    DateFormat formatter;
    Date date;
    formatter = new SimpleDateFormat("yyyy/MM/dd-hh:mm:ss");
    date = (Date) formatter.parse(str_date);
    System.out.println("Today is " + date);
} catch (ParseException e) {
    System.out.println("Exception :" + e);
} 
```

由于`str_date`具有 format `dd/MM/yyyy-hh:mm:ss`，这是无效的，它应该通过异常，但它不会引发任何期望。

输出是`Today is Mon Mar 05 13:43:20 IST 31`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T06:17:19.180

我只是快速浏览一下您正在使用的 parse 方法的 Java 文档，它说：

> 默认情况下，解析是宽松的：如果输入不是该对象的格式方法使用的格式，但仍然可以解析为日期，则解析成功。客户可以通过调用 setLenient(false) 来坚持严格遵守格式。

`formatter.setLenient(false);`格式化程序实例化后尝试上线。这将强制格式化程序仅使用您指定的格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T06:22:13.280

```
 formatter.setLenient(false); 
```

将为您提供所需的例外

来自javadocs：

默认情况下，解析是宽松的：如果输入不是该对象的格式方法使用的格式，但仍然可以解析为日期，则解析成功。客户可以通过调用 setLenient(false) 来坚持严格遵守格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:18:00.257

从[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#parse%28java.lang.String%29)：

```
ParseException - if the *beginning* of the specified string cannot be parsed. 
```

尝试

```
String str_date="25:09/2012-13:43:20"; 
```

这将引发 ParseException。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T06:20:40.640

您的格式应指定`HH`而不是`hh`. 否则，13 点钟是时候买一块新手表了。

# android - 当以前的密钥库丢失时，如何上传新版本的 apk？

> ID：12595522
> 
> 赞同：2
> 
> 时间：2012-09-26T06:09:10.327
> 
> 标签：android

> **可能重复：**
> [Android：我丢失了我的 android 密钥库，我该怎么办？](https://stackoverflow.com/questions/4459719/android-i-lost-my-android-key-store-what-should-i-do)

我丢失了以前用于签署 apk 的密钥库。我知道密钥库拥有私钥，而谷歌从未拥有过它。我不得不备份它。但是现在当我输了时，有什么办法可以摆脱这种情况。

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T06:14:53.713

如果您丢失了密钥库文件，不幸的是，您唯一的办法就是创建一个新文件并更改应用程序的包名称。如果 APK 使用的密钥库与最初上传应用程序时使用的密钥库不同，Google Play 将不会接受该 APK。

您可以更改应用程序的包名称并在 Google Play 上创建一个新列表，这次使用新的密钥库签名。取消发布旧列表并通知用户他们需要通过新的 Google Play 列表重新安装该应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T06:16:04.800

> 我丢失了以前用于签署 apk 的密钥库。但是现在当我输了时，有什么办法可以摆脱这种情况。

=> 根本**没有机会**。如果您想更新您的应用程序，您必须拥有用于注册并发布第一版应用程序的密钥库。

# android - 最终的局部变量 qty price total 无法赋值，因为它是在封闭类型 android 中定义的

> ID：12595525
> 
> 赞同：0
> 
> 时间：2012-09-26T06:09:34.203
> 
> 标签：android, android-intent, android-emulator, android-widget

计算金额时出错，三个字段名称、数量、价格，其中名称和价格从第一个活动和数量编辑文本中获取，允许用户输入数量，但出现错误：-
最终局部变量 qty、价格、总计无法分配因为它是在封闭类型 android 中定义的。请参阅源代码

```
public class SecondScreenActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.screen2);

    TextView txtName = (TextView) findViewById(R.id.txtName);
    final TextView txtCost = (TextView) findViewById(R.id.txtCost);
    final EditText txtQty=(EditText)findViewById(R.id.txtQty);
    final double price = Double.parseDouble(txtCost.getText().toString());
    final double qty = Double.parseDouble(txtQty.getText().toString());
    final double total=0;

    Button btnClose = (Button) findViewById(R.id.btnCalculate);
    final TextView txtResult = (TextView) findViewById(R.id.txtResult);

    Intent i = getIntent();
    // Receiving the Data
    String name = i.getStringExtra("name");
    String cost = i.getStringExtra("cost");

    // Displaying Received data
    txtName.setText(name);
    txtCost.setText(cost);

    // Binding Click event to Button
    btnClose.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            //Closing SecondScreen Activity
            //finish();
        //Getting Error Here
               //the final local variable qty price total 
               //cannot be assigned since it is defined 
               //in an enclosing type android               
        qty=Double.parseDouble(txtQty.getText().toString());
        price=Double.parseDouble(txtCost.getText().toString());
        total=qty*price;
        txtResult.setText(Double.toString(total));

        }
    });

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:13:50.790

您不需要在 onCreate() 中定义变量 qty 和 price。仅在您的 OnClickListener 中定义它们，一切都会好起来的。设置最终变量后，您将无法更改它们。这就是为什么他们是最终的。

# android - 在 Eclipse 中为目标 15 运行模拟器时出错？

> ID：12595527
> 
> 赞同：0
> 
> 时间：2012-09-26T06:09:46.373
> 
> 标签：android, eclipse, android-emulator

每当我启动模拟器或直接在模拟器上运行应用程序时，它只会显示模拟器并且主屏幕永远不会出现。在控制台中我得到这个：

```
 emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
     [2012-08-09 11:20:42 - Emulator] could not get wglGetExtensionsStringARB
     [2012-08-09 11:20:42 - Emulator] could not get wglGetExtensionsStringARB
     [2012-08-09 11:20:42 - Emulator] could not get wglGetExtensionsStringARB
     [2012-08-09 11:20:42 - Emulator] could not get wglGetExtensionsStringARB
     [2012-08-09 11:20:42 - Emulator] could not get wglGetExtensionsStringARB 
```

我已经在运行配置中尝试过 GPU 仿真和命令行 -

```
 -gpu on 
```

但它仍然无法正常工作。请有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:35:20.733

编辑您的 AVD GUI 设置。硬件部分，选择新建。点击“属性”下拉菜单选择“GPU Emulation”然后“OK”使用硬件部分的下拉菜单将“Gpu Emulation”更改为“YES”。

保存并重试

编辑：它也可能来自最近的更新。请再次更新所有组件，包括所有插件到最新版本。eclipse 本身也可能有更新。然后删除您的模拟器并重新创建它们。

# asp.net - 如何在 asp.net 中显示将 PostBackTriggers 和 AsyncPostBackTriggers 添加到 UpdatePanel 的进度条？

> ID：12595534
> 
> 赞同：1
> 
> 时间：2012-09-26T06:09:59.497
> 
> 标签：asp.net, c#-4.0, updatepanel, updatepanel-progressbar

我有一个带有 ToolkitScriptManager 的页面和三个更新面板，每个更新面板都有基于控件的触发器，现在我的问题是触发任何服务器端事件，显示进度条如百分比[示例](http://encosia.com/easy-incremental-status-updates-for-long-requests/)，如何在 PostBackTriggers 和 AsyncPostBackTriggers 控件中显示，我的代码是

```
 <asp:UpdatePanel ID="up1" runat="server" ChildrenAsTriggers="true" UpdateMode="Conditional">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="TxtZip" EventName="textchanged" />
    </Triggers>
    <ContentTemplate>
        <asp:TextBox ID="TxtZip" runat="server" AutoPostBack="true" ClientIDMode="Static"
            MaxLength="6" onkeypress="return isNumberKey(event)" CssClass="txtstyle" OnTextChanged="TxtZip_TextChanged"></asp:TextBox>
    </ContentTemplate>
</asp:UpdatePanel>
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
    <Triggers>
        <asp:PostBackTrigger ControlID="IBtnSave" />
    </Triggers>
    <ContentTemplate>
        <span class="art-button-wrapper"><span class="l"></span><span class="r"></span>
            <asp:Button ID="IBtnSave" runat="server" Text="Submit/Save" CssClass="art-button"
                ClientIDMode="Static" OnClientClick="return postbackButtonClick()" OnClick="IBtnSave_Click" />
        </span>
    </ContentTemplate>
</asp:UpdatePanel> 
```

我的进度条码

```
<asp:UpdateProgress ID="UpdateProgress1" runat="server" DynamicLayout="true">
                        <ProgressTemplate>
                            <div id="Progressbar" class="Progressbar" align="center" valign="middle" runat="server">
                                <asp:Image ID="Image1" Width="75" Height="95" runat="server" ImageUrl="~/images/animation_processing.gif" />
                            </div>
                        </ProgressTemplate>
                    </asp:UpdateProgress> 
```

和java脚本代码是

```
<script type="text/javascript">
        //update panel and postback trigger with fileupload control upadteprogressbar code
        var updateProgress = null;
        function postbackButtonClick() {
            updateProgress = $find("<%= UpdateProgress1.ClientID %>");
            window.setTimeout("updateProgress.set_visible(true)", updateProgress.get_displayAfter());
            return true;
        }
</script> 
```

此代码仅在 postbacktrigger 中起作用，原因是在触发 onclick 事件之前单击按钮，该事件调用 java 脚本函数，但 Async Postback 触发器不调用该函数，如何处理该代码并以百分比过程显示进度条，给我任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:27:59.680

只需在 aspx 内容页面中添加以下代码即可正常工作

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
  <script type="text/javascript">

      Sys.Application.add_init(appl_init);

      function hideProgressBar() {

//          var updateProgress = $find("<%= UpdateProgress1.ClientID %>");
//          updateProgress.style.visibility = "hidden";
          $("#MainContent_UpdateProgress1").hide()
      }

      function appl_init() { 

          var pgRegMgr = Sys.WebForms.PageRequestManager.getInstance();
          pgRegMgr.add_beginRequest(postbackButtonClick);
          pgRegMgr.add_endRequest(hideProgressBar)
      }

</script> 
```

# c# - wpf应用程序中两个窗口之间的过渡效果

> ID：12595535
> 
> 赞同：0
> 
> 时间：2012-09-26T06:10:00.013
> 
> 标签：c#, .net, wpf

我是 WPF 新手，正在创建一个简单的应用程序。基本上，该应用程序显示一个人的年龄。我为此使用了两个窗口。第一个窗口将出生日期作为输入，第二个弹出窗口显示他当前的年龄。现在我想要的是对显示年龄的弹出窗口应用一些简单的过渡效果。它可能是任何无关紧要的效果。下面是主窗口的 c# 代码。

```
namespace WpfApplication6
{

    public partial class MainWindow : Window
    {
        int year;
        public MainWindow()
        {
            InitializeComponent();
            string n = DateTime.Now.ToString();
        }

        private void comboBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {

        }

        private void slider1_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
        {
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            string yearlist = comboBox3.SelectionBoxItem.ToString();
            string date = comboBox1.SelectionBoxItem.ToString();
            string month= comboBox2.SelectionBoxItem.ToString();
            if (date == "DD")
            { MessageBox.Show("Select date"); }
            else
            {
                if (month == "MM")
                { MessageBox.Show("Select month"); }
                else
                {

                    if (yearlist == "YYYY")
                    { MessageBox.Show("Select year"); }
                    else
                    {
                        System.DateTime dob = new System.DateTime(Convert.ToInt16(comboBox3.SelectionBoxItem), Convert.ToInt16(comboBox2.SelectionBoxItem), Convert.ToInt16(comboBox1.SelectionBoxItem), 12, 0, 0);

                        System.TimeSpan diff = DateTime.Now.Subtract(dob);
                        year = (Convert.ToInt32(diff.Days) / 365);
                        int days = (Convert.ToInt32(diff.Days) % 365);
                        string str = string.Format("Age is:{0} years and {1} days", year, days);
                        newwindow nw = new newwindow(str);
                        nw.Show();

                  }
                }
            }

        }

        private void comboBox2_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {

        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {

        }
    }
} 
```

现在弹出窗口的代码

```
namespace WpfApplication6
{

    public partial class newwindow : Window
    {

        public newwindow(string strmsg)
        {
            InitializeComponent();
            label1.Content = strmsg;
        }

        private void textBox1_TextChanged(object sender, TextChangedEventArgs e)
        {

        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:42:15.623

放

```
otherWindow.Opacity=0; 
otherWindow.Show(); 
```

并应用从 0 到 1 的简单不透明度动画迭代。它将创建很好的淡入淡出效果。

```
DoubleAnimation da = new DoubleAnimation();
da.From = 1;
da.To = 0;
da.Duration = new Duration(TimeSpan.FromSeconds(2));
da.AutoReverse = true;
da.RepeatBehavior = RepeatBehavior.Forever;
// da.RepeatBehavior=new RepeatBehavior(3);
rectangle1.BeginAnimation(OpacityProperty, da); 
```

见[http://tarundotnet.wordpress.com/2011/03/18/wpf-tutorial-change-opacity-using-animation/](http://tarundotnet.wordpress.com/2011/03/18/wpf-tutorial-change-opacity-using-animation/)

# c# - 如何将 Calc Files 数据导出到服务器

> ID：12595544
> 
> 赞同：0
> 
> 时间：2012-09-26T06:10:39.373
> 
> 标签：c#, asp.net, openoffice-calc

在我的 ASP.Net 应用程序中，人们可以将 excel 文件导入服务器以提取一些信息并将它们放入 Sql Server 数据库中。现在，该公司已经将 Microsoft Office 更改为 OpenOffice，因此不再有 Excel 文件，而是 Calc Files。

所以，我需要将 Calc Files 数据导出到服务器的代码。

# android - android中多个文件上传的方法

> ID：12595553
> 
> 赞同：2
> 
> 时间：2012-09-26T06:11:05.770
> 
> 标签：android, file-upload

我有一个场景，我需要根据网络情况传输一个或多个文件。文件大小在 700KB 到 900KB 之间。上传完成后，无论上传多少文件，服务器都会回复一个数字。在将其转换为 Base64 后，我一直在尝试使用 ksoap2 库上传它，但它失败了。当我的肥皂标题 xml 大小在 1048000 左右的字符附近时，它会失败。

然后我决定改变我的上传方式，并希望使用 HttpURLConnection 或 http 客户端。我无法决定哪一个对我的场景有效。

谢谢

这是代码

代码：

```
 InputStream is = getResources()
                    .openRawResource(R.raw.file_name);

            int size = 0;
            // Read the entire resource into a local byte buffer.
            byte[] buffer = new byte[1024];
            try {

                while ((size = is.read(buffer, 0, 1024)) >= 0) {
                    baos.write(buffer, 0, size);
                }

                is.close();
                buffer = baos.toByteArray();
            } catch (Exception e) {
                // TODO: handle exception
                e.printStackTrace();
            }

            base64string = new String(Base64.encode(buffer, Base64.DEFAULT)); 
```

错误

```
org.xmlpull.v1.XmlPullParserException: unexpected type (position:END_DOCUMENT null@1:1 in java.io.InputStreamReader@4101ce48)  
at org.kxml2.io.KXmlParser.nextTag(KXmlParser.java:2035)
at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:126)
at org.ksoap2.transport.Transport.parseResponse(Transport.java:63)
at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:100) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:22:37.903

我不知道你想使用什么样的服务器。您的文件在上传时停止的问题可能在您的服务器设置中。例如，在您的 php 配置中，您可以定义最大上传文件大小等。这里有一个 php 示例：

```
public void uploadFile(){

try {
FileInputStream fis =this.openFileInput(NAME_OF_FILE);
HttpFileUploader htfu = new HttpFileUploader("http://11.0.6.23/test2.php","noparamshere", NAME_OF_FILE);
htfu.doStart(fis);
} catch (FileNotFoundException e) {
// TODO Auto-generated catch block
e.printStackTrace();
}
} 
```

阅读更多： http: [//getablogger.blogspot.com/2008/01/android-how-to-post-file-to-php-server.html#ixzz27YPjwX8B](http://getablogger.blogspot.com/2008/01/android-how-to-post-file-to-php-server.html#ixzz27YPjwX8B)

编辑：您还可以尝试通过实施 MTOM 来提高肥皂传输效率：

查看 MTOM，这是一种 W3C 标准，旨在通过 SOAP 传输二进制文件。

来自维基百科：

```
 MTOM provides a way to send the binary data in its original binary form, 
    avoiding any increase in size due to encoding it in text. 
```

相关资源：

SOAP 消息传输优化机制[http://www.w3.org/TR/soap12-mtom/](http://www.w3.org/TR/soap12-mtom/)

消息传输优化机制（维基百科）[http://en.wikipedia.org/wiki/MTOM](http://en.wikipedia.org/wiki/MTOM)

# javascript - 将数组分成块

> ID：12595561
> 
> 赞同：1
> 
> 时间：2012-09-26T06:11:39.033
> 
> 标签：javascript, jquery

我正在尝试将更大的数组分成更小的块。

这是一个例子：

```
 var data = [ { number: '184805871' },
  { number: '3418400730' },
  { number: '2047901973' },
  { number: '5038880529' },
  { number: '5040293507' },
  { number: '5044243187' },
  { number: '5078304520' },
  { number: '5085466763' },
  { number: '5145133307' },
  { number: '5197540781' },
  { number: '5199065039' },
  { number: '5208120208' },
  { number: '5212123861' },
  { number: '5212383329' },
  { number: '5214353364' },
  { number: '5229836037' }
  ]; 
```

我的数组比这长得多，这只是一个例子。所以我对PHP中的array_chunk函数很熟悉，并在php.js中找到了它

```
function array_chunk (input, size, preserve_keys) {

    var x, p = '', i = 0, c = -1, l = input.length || 0, n = [];

    if (size < 1) {
        return null;
    }

    if (Object.prototype.toString.call(input) === '[object Array]') {
        if (preserve_keys) {
            while (i < l) {
                (x = i % size) ? n[c][i] = input[i] : n[++c] = {}, n[c][i] = input[i];
                i++;
            }
        }
        else {
            while (i < l) {
                (x = i % size) ? n[c][x] = input[i] : n[++c] = [input[i]];
                i++;
            }
        }
    }
    else {
        if (preserve_keys) {
            for (p in input) {
                if (input.hasOwnProperty(p)) {
                    (x = i % size) ? n[c][p] = input[p] : n[++c] = {}, n[c][p] = input[p];
                    i++;
                }
            }
        }
        else {
            for (p in input) {
                if (input.hasOwnProperty(p)) {
                    (x = i % size) ? n[c][x] = input[p] : n[++c] = [input[p]];
                    i++;
                }
            }
        }
    }
    return n;
} 
```

有比这更简单的方法吗？

这是我的代码：

```
var chunks = array_chunk(data, 3);

jQuery.each(chunks, function(index, value) { 
  console.log(index + ': ' + value); 
}); 
```

如何从数字获取值到 console.log 而不是 [Object]？我尝试了 value[0] 等，但它不起作用..

对于每个数组分成 3 个的每个数组，我需要从数组中获取索引和值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:13:34.270

由于我不清楚您的问题，您是否知道您可以轻松地在 javascript 中对任何数组进行[切片？](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)

**“获取数据数组并将其拆分为单独的数组，每个数组只有 3 个数字”：**

```
var chunks = [];
for (var i=0; i<data.length;) {
    chunks.push(data.slice(i, i+=3));
} 
```

**“遍历每个数组并获取每个数组的值以及数组的索引”：**

```
for (var i=0; i<chunks.length; i++) { // iter among chunks
   for (var j=0; j<chunks[i].length; j++) {  // iter in chunk
       console.log(j, chunks[i][j].number); // show item j of the chunk number i
   }
} 
```

编辑 ：

如果你想显示

```
...
12 ["5212123861", "5212383329", "5214353364"] 
13 ["5212123861", "5212383329", "5214353364"] 
14 ["5212123861", "5212383329", "5214353364"] 
15 ["5229836037"] 
```

你可以这样迭代：

```
for (var i=0; i<chunks.length; i++) { 
   for (var j=0; j<chunks[i].length; j++) {  
       console.log(i*3+j, chunks[i].map(function(v){return v.number})); 
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:17:18.697

array.slice方法可以从[数组](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice)的开头、中间或结尾提取一个切片，用于您需要的任何目的。

```
var i,j,temparray,chunk = 10;
for (i=0,j=data.length; i<j; i+=chunk) {
    temparray = data.slice(i,i+chunk);
    // do whatever
} 
```

# javascript - 谷歌关闭工具 PriorityQueue 顺序错误

> ID：12595566
> 
> 赞同：0
> 
> 时间：2012-09-26T06:12:11.540
> 
> 标签：javascript, priority-queue, google-closure, google-closure-library

我用这样的入队方法创建了一个独特的优先级队列：

```
huzz.ak.UniquePriorityQueue.prototype.enqueue =
    function(priority, value) {
  var node = {'valid': true, 'value': value, 'priority': priority};
  var key = value.key;
  if (this.pointers_[key] !== undefined) {
    this.pointers_[key].valid = false;
  }
  this.pointers_[key] = node;
  this.priorityQueue_.enqueue(priority, node);
}; 
```

当我输出值时，它们以随机顺序出现：

```
while (true) {
  p = this.priorityQueue_.dequeue();
  this.logger_.log(p.priority + ' ' + p.value.toString() + ' ' + p.valid);
}

1265 ... true

1413 S..N. false

1265 ... false

92 S..N. true

1734 .........E false

59 ... false

75 ...B false

92 S..N. false 
```

为什么队列不按预期顺序（从小到大）返回值。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T02:52:45.397

事实证明，在我的部分代码中，我传递了一个列表而不是列表的长度，这搞砸了一切。我修复了这个错误，优先队列按预期工作！

# jquery - 类似 Facebook 的顶部导航 CSS 和 jQuery

> ID：12595567
> 
> 赞同：1
> 
> 时间：2012-09-26T06:12:12.643
> 
> 标签：jquery, facebook, css, facebook-like

我想用[CSS](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)和[jQuery](http://en.wikipedia.org/wiki/JQuery)制作类似 Facebook 的新顶部导航，如下所示。

![在此处输入图像描述](../Images/25822e898f9a96724f643eab72789920.png)

**还有这个：**

![在此处输入图像描述](../Images/df163fa7d69f138b29f61a5b47cc5eaf.png)

如您所见，弹出框的箭头始终位于所选导航下方，并且弹出框的宽度相同。是否有任何教程或插件可以做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T06:35:47.427

[**jQuery 通知菜单**](http://www.codebasehero.com/2011/07/jquery-notification-menu/)非常适合您。这是一个 jQuery 插件，用于向任何菜单添加通知气泡和通知列表。

![演示图片](../Images/a58bb2ede9f459e1f5dd0c1fc056d9f8.png)

您可以通过简单地编辑 CSS 轻松地将其调整为您想要的样式。

[**检查这个演示。**](http://www.codebasehero.com/files/notification-menu/demo/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:26:45.870

查看[Twitter 引导程序](http://en.wikipedia.org/wiki/Twitter_Bootstrap)。他们为您完成了所有很酷的 JavaScript 内容。他们还从一个非常好的响应式基础 CSS 开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:33:32.980

这个的关键很简单。通过无序列表和固定位置元素的正确组合，您可以轻松实现这一目标。

1.  对于顶栏，使用无序列表模式：[http ://pea.rs/navigation/horizo​​ntal-buttons](http://pea.rs/navigation/horizontal-buttons)
2.  对于下拉菜单，您有两种选择：
    *   您可以将下拉菜单隐藏起来，然后使用[jQuery](http://en.wikipedia.org/wiki/JQuery)取消隐藏。
    *   或者使用一些 CSS 技巧将其置于页面之外，直到 onHover。

要像 Facebook 那样设置下拉菜单的样式，您必须使用 CSS 做更多的事情来弄清楚如何获得正确的形状，但不用担心！也有关于这方面的教程/示例！

“气泡点工具提示”教程：

*   *[带有 CSS3 和 jQuery 的气泡点工具提示](http://css-tricks.com/bubble-point-tooltips-with-css3-jquery/)*
*   *[如何创建没有图像的 CSS3 语音气泡](http://www.sitepoint.com/pure-css3-speech-bubbles/)*

总的来说，我推荐教程*[How to Build a Kick-Butt CSS3 Mega Drop-Down Menu](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-build-a-kick-butt-css3-mega-drop-down-menu/)*（完成不会超过 30 分钟到一个小时）：

# c# - 通用插入存储过程

> ID：12595569
> 
> 赞同：0
> 
> 时间：2012-09-26T06:12:21.910
> 
> 标签：c#, java, oracle, stored-procedures

我已经为 C# 中的数据库插入创建了通用插入代码（用于文本日期编号等数据类型，而不是所有数据类型）现在我计划在 oracle 中编写通用插入存储过程我的问题是“我们可以用编程做什么像 C# 或 JAVA 这样的语言，我们无法使用通用插入语句的存储过程”也请建议是否有人已经这样做了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:04:29.423

请停止。这是一个已解决的问题。有很多可用的工具可以做你想做的事情以及更多，并且以更优雅的方式。

例如，看看像[(N)Hibernate](http://nhforge.org/)或[Entity Framework](http://msdn.microsoft.com/en-us/data/ef.aspx)这样的 ORM 工具，还有很多其他工具。还有更多轻量级选项，例如[Simple.Data](https://github.com/markrendle/Simple.Data)，[Massive](https://github.com/robconery/massive)，[dapper-dot-net](https://github.com/SamSaffron/dapper-dot-net)，...

# http - HttpUrlConnection 响应代码总是返回 -1

> ID：12595572
> 
> 赞同：1
> 
> 时间：2012-09-26T06:12:31.370
> 
> 标签：http, httpurlconnection

我在亚马逊 ec2 实例中创建了我的服务器。通过我的 android 应用程序，我使用 HttpUrlConnection 连接到服务器。但我得到的响应代码为-1。有没有人有任何想法？这是我的代码。私有字符串 getHttpResponse（最终字符串 srcUrl）{

```
 HttpURLConnection urlConnection = null;
    FileOutputStream fos = null;
    try {
        URL url = new URL(srcUrl);
        urlConnection = (HttpURLConnection) url.openConnection();
        urlConnection.setRequestMethod("GET");
        urlConnection.setRequestProperty("Content-Type", "application/json");
        mETag = readETagFromPrefForCategory();

        urlConnection.setRequestProperty("If-None-Match", mETag);

        Authenticator.setDefault(new Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication("xyz", "abc".toCharArray());
            }
        });

        urlConnection.connect();

        mETag =  urlConnection.getHeaderField("ETag");

        if (urlConnection.getResponseCode() == HttpURLConnection.HTTP_NOT_MODIFIED) {
            Log.v("http","not modifed");
            return readLocalJson();
        }

        if (urlConnection.getResponseCode() != HttpURLConnection.HTTP_OK) {
            Log.w(TAG, "Bad response [" + urlConnection.getResponseCode() + "] from (" + srcUrl + ")");
            return null;
        }}//end of try block 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:37:56.573

这篇文章中的答案似乎为一些人解决了这个问题：

[Android Https状态码-1](https://stackoverflow.com/questions/7994073/android-https-status-code-1)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-08T13:46:34.610

为什么要在 GET 请求上设置“Content-Type”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-08T12:09:29.840

问题可能是您的标头 HTTP 版本格式不正确。检查这个 SO 链接，我已经回答了一个对我有用的类似问题。

[Java Http~URLConnection 响应码 -1](https://stackoverflow.com/questions/20432976/java-httpurlconnection-response-code-1/28393738#28393738)

# highcharts - 在选择中绘制矩形，Highcharts

> ID：12595575
> 
> 赞同：1
> 
> 时间：2012-09-26T06:12:55.750
> 
> 标签：highcharts

我想在选择区域绘制矩形或正方形，以在高图中显示选定的 xAxis min、max 和 yAxis min max。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T13:22:46.640

这就是你需要的：http: [//jsfiddle.net/meFgf/](http://jsfiddle.net/meFgf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T15:07:55.113

解释@igor-shastin 的[例子](http://jsfiddle.net/meFgf/)......

*   将[缩放类型](http://api.highcharts.com/highcharts#chart.zoomType)设置为`"xy"`
*   向图表添加一个0 维度的[矩形](http://api.highcharts.com/highcharts#Renderer.rect)并挂在参考上
*   在[评选](http://api.highcharts.com/highcharts#chart.events.selection)活动中：
    *   抓住`event.xAxis[0].min`and `.max`; 同样的`.yAxis`
    *   更新[矩形](http://api.highcharts.com/highcharts#Renderer.rect)坐标，使其呈现选择的位置
    *   返回`false`和/或调用`event.preventDefault()`以防止实际缩放

# sql - Oracle 中的 SP_HELPTEXT

> ID：12595578
> 
> 赞同：4
> 
> 时间：2012-09-26T06:13:11.550
> 
> 标签：sql, sql-server, oracle, ssis

我正在使用 SSIS 连接到 ORACLE 数据库，我想查看 TEXT 以获取某些视图。我关注了这个[链接](http://marikoonnet.blogspot.com/2010/03/sphelptext-in-oracle.html)，但它给了我无效的语法错误。

```
SET LINESIZE 132
SET LONG 4000
SELECT TEXT FROM ALL_SOURCE WHERE NAME = 'YOUR_PROCEDURE_NAME' 
```

请提出任何其他替代方案。

**更新：**

同时我检查了另一个选项

```
select TEXT from ALL_VIEWS where view_name = 'YOUR_PROCEDURE_NAME' 
```

这已成功解​​析，但 ORA -24374 定义在错误到来之前未完成

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T06:32:09.333

作为替代方案，您可以尝试使用 dbms_metadata 包：

视图：

```
select dbms_metadata.get_ddl('VIEW', 'YOUR_VIEW_NAME')
from dual; 
```

您使用“过程名称”作为参数，所以我不确定您是否真的在尝试获取存储过程的源代码。在这种情况下，您需要这样的东西：

```
select dbms_metadata.get_ddl('PROCEDURE', 'YOUR_PROCEDURE_NAME')
from dual; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:49:59.473

这最终在 SQL PLUS 中起作用。不知道为什么这不适用于 SSIS 适配器。

```
select TEXT from ALL_VIEWS where view_name = 'YOUR_PROCEDURE_NAME' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-03T03:25:04.347

我测试了这种方法，但没有成功，因为它没有搜索到我数据库上的所有模式。

```
select TEXT from ALL_VIEWS where view_name = 'YOUR_PROCEDURE_NAME' 
```

所以我找到了另一个可以帮助我的！

```
select text
from dba_source
where NAME='YOUR_SP_NAME' 
```

# java - Jython 等效于 Java 代码

> ID：12595580
> 
> 赞同：-2
> 
> 时间：2012-09-26T06:13:30.643
> 
> 标签：java, python, jython

我想将以下 Java 代码转换为 Jython 代码。我对Java不太了解。

```
String name = connection.runReadAction(new ReadActionResult<String>()
{
     public String execute(SystemAccess access) throws Exception
     {
        return access.getTree(SystemTree.Geographic).resolve(path).getDisplayName();
     }
 }); 
```

你能帮我完成这个任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:24:57.827

```
def execute(access):
  return access.getTree(SystemTree.Geographic).resolve(path).getDisplayName()

name = connection.runReadAction(readActionResult=execute) 
```

Jython 处理创建匿名内部类的混乱细节。

# c# - 为什么 new Thread() 接受方法名称，即使没有构造函数重载似乎允许这样做？

> ID：12595582
> 
> 赞同：6
> 
> 时间：2012-09-26T06:13:44.503
> 
> 标签：c#, .net

> **可能重复：**
> [new Thread(void Target()) 和 new Thread(new ThreadStart(void Target())) 有什么区别？](https://stackoverflow.com/questions/10482121/what-is-the-difference-between-new-threadvoid-target-and-new-threadnew-thre)

我有一个关于 Thread 类的小问题。这个类有 4 个构造函数：

```
public Thread(ParameterizedThreadStart start);
public Thread(ThreadStart start);
public Thread(ParameterizedThreadStart start, int maxStackSize);
public Thread(ThreadStart start, int maxStackSize); 
```

我使用第二个构造函数来创建一个 Thread 对象：

```
Thread thread = new Thread(new ThreadStart(ScanDirectory)); 
```

但是，我可以使用一种方法来创建此对象，而无需使用上面提到的任何构造函数。

```
Thread thread = new Thread(ScanDirectory); 
```

在这种情况下，ScanDirectory 是一个 void 方法，它不是 ThreadStart 或 ParameterizedThreadStart 但 Thread 类仍然接受这个构造函数。为什么？我认为这是一个 .NET 功能，但我不知道它是如何实现的。

**注意：** ScanDirectory 是一个 void 方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T06:28:57.927

在这里分开两件事很重要：

*   `Thread`对构造函数的调用
*   *创建要传递*给`Thread`构造函数的委托

您在这里对后者*非常*感兴趣 - 之间的区别：

```
ThreadStart tmp = new ThreadStart(ScanDirectory); 
```

和

```
ThreadStart tmp = ScanDirectory; 
```

第二个是*方法组转换*- 从*方法组*（方法的名称，如果它是实例方法，可能由实例值限定）到具有兼容签名的委托的隐式转换。

你很少需要第一种形式的“显式”委托创建表达式，因为方法组转换是在 C# 2 中引入的。你会看到很多仍然使用它的代码，因为许多开发人员不知道方法组转换，不幸的是 -和 IIRC，Visual Studio 设计者仍然使用该表单进行事件处理程序订阅。

您真正需要它的唯一一次是方法组转换最终变得模棱两可。例如：

```
static void Main()
{
    // Valid: uses parameterless overload
    new Thread(new ThreadStart(Foo));

    // Valid: uses parameterized overload
    new Thread(new ParameterizedThreadStart(Foo));

    // Invalid, as there are two valid constructor overloads
    new Thread(Foo);
}

static void Foo()
{
}

static void Foo(object state)
{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T06:22:21.253

这：

```
Thread thread = new Thread(ScanDirectory) 
```

仍然调用`Thread`构造函数，并*隐式*调用`ThreadStart`（或`ParameterizedThreadStart`，取决于`ScanDirectory`方法的签名）构造函数以生成适当的委托实例。

隐式调用委托类型的构造函数只是 C# 语言的“语法糖”，而不是 .NET 运行时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T06:23:47.853

实际上，当您传递 void 方法时，您使用的是第一个构造函数。[这是文档](http://msdn.microsoft.com/en-us/library/1h2f2459.aspx)中引用的示例：

```
// To start a thread using an instance method for the thread  
// procedure, use the instance variable and method name when  
// you create the ParameterizedThreadStart delegate. C# infers  
// the appropriate delegate creation syntax: 
//    new ParameterizedThreadStart(w.DoMoreWork) 
//
Work w = new Work();
newThread = new Thread(w.DoMoreWork); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T06:25:20.303

这里：

```
Thread thread = new Thread(new ThreadStart(ScanDirectory)); 
```

您通过将 ScanDirectory void 传递给构造函数来显式创建 ThreadStart 委托

这里：

```
Thread thread = new Thread(ScanDirectory); 
```

ThreadStart 被隐式创建，因为 ScanDirectory void 与委托具有相同的签名。

在这种情况下，2 完全相同。

请查看 Jon Skeet 在[此线程](https://stackoverflow.com/questions/863688/the-difference-between-implicit-and-explicit-delegate-creation-with-and-without)中的答案以获取更多详细信息

# c++ - 如何在 MAC OS 中使用 gethostbyname_r

> ID：12595584
> 
> 赞同：1
> 
> 时间：2012-09-26T06:13:50.083
> 
> 标签：c++, macos

我写了一个网络实用程序。我正在使用函数`gethostbyname_r`。该函数在 Linux 环境下编译良好，但是当我尝试在 MAC OS 上编译相同的代码时，出现以下错误：

> 'gethostbyname_r' 未在此范围内声明

我可以在 MAC 上使用任何其他功能或对应功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:36:05.043

如果您查看 Linux[手册页](http://linux.die.net/man/3/gethostbyname_r)，您会看到它`gethostbyname_r`列在“GNU 扩展”下。这意味着它在非 GNU 平台（如 OSX）上不可用。

# blackberry-10 - Android 到 BlackBerry 10 移植

> ID：12595585
> 
> 赞同：0
> 
> 时间：2012-09-26T06:13:57.507
> 
> 标签：blackberry-10

我是 blackberry10 平台的新手，我已经在 Android 中开发了一个应用程序，我想要在 Blackerry10 和 Blackberry Playbook 中使用相同的应用程序。我已经使用 Blackberry Graphical Aid 将我的 .apk 文件转换为 .bar 文件。我想知道该应用程序在运行到 blackberry10 平台时是否有任何问题，或者我必须为 Blackberry10 环境重新开发它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:38:47.783

[Download the simulator](http://developer.blackberry.com/android/tools/) and try it out. That's the only way you're going to find out whether it works on BlackBerry 10\. Assuming you didn't have any compatibility warnings when you converted your APK to a BAR file you should be fine!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T15:15:47.560

您必须首先阅读描述 BlackBerry 10 上的 BlackBerry Runtime for Android 应用程序不支持的 Android 功能的文档。

[BlackBerry 10 不支持的 API](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_overview.html)

[黑莓余额限制](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_balance.html)

[应用类型](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_app_types.html)

[硬件特性](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_hardware_features.html)

[软件功能](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_software_features.html)

[意图](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_intents.html)

[应用权限](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_app_permissions.html)

[媒体 API](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_media.html)

[媒体格式](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_media_formats.html)

就我个人而言，我在 OS 10.0 中发现了一些未记录的错误，例如

[Blackberry 10，我移植到 OS10 的 Android 应用程序仅在 10.1 中无法在 OS 10.0 中运行](https://stackoverflow.com/questions/16901311/blackberry-10-my-android-app-ported-to-os10-doesnt-work-in-os-10-0-only-in-10)

# pageload - 如果我们编写多个，C# 如何执行 Page_Load？

> ID：12595589
> 
> 赞同：0
> 
> 时间：2012-09-26T06:14:17.910
> 
> 标签：pageload

如果我的 aspx.cs 页面中有以下代码：

```
 protected void page_Load(object sender, EventArgs e)  
    {

    }
    protected void PAGE_LOAD(object sender, EventArgs e) 
    {

    }
    protected void PaGe_LoAD(object sender, EventArgs e)
    {

    } 
```

C# 允许我在同一个地方创建这些方法，因为由于区分大小写的性质，这些方法是可**区分**的……但是编译器如何决定执行哪一个来代替它的真实 Page_Load ？
谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:41:51.317

网站配置中的一个属性是 AutoEventWireup。
[http://msdn.microsoft.com/en-us/library/system.web.configuration.pagessection.autoeventwireup.aspx](http://msdn.microsoft.com/en-us/library/system.web.configuration.pagessection.autoeventwireup.aspx)
事件签名在运行时而不是在编译时连接。所以，这不是编译器的魔法。

执行一段代码以确定要为哪个事件调用哪个委托。该代码似乎不区分大小写。

有关上述内容的更深入解释，请查看此处[http://odetocode.com/Blogs/scott/archive/2006/02/17/inside-autoeventwireup.aspx](http://odetocode.com/Blogs/scott/archive/2006/02/17/inside-autoeventwireup.aspx)信息可能很旧，但我不认为它已过时。

您可以采用一种方法来找出确切的代码是[http://aspnetresources.com/articles/event_handlers_in_global_asax](http://aspnetresources.com/articles/event_handlers_in_global_asax)，它为 global.asax 中的事件处理程序回答了同样的问题。

获得反射器和快乐挖掘。

# iphone - avplayer内存泄漏

> ID：12595594
> 
> 赞同：0
> 
> 时间：2012-09-26T06:14:40.273
> 
> 标签：iphone, objective-c, ios, xcode

当应用程序启动时，我的项目中有一个介绍电影，我正在使用`storyboard`，然后我将我`MovieVC`作为初始视图，所以当应用程序启动时，`MovieVC`当你按下或电影结束时，它会显示呈现`RootVC`. 它在我测试它时工作`simulator`，`device`但是当我用`instruments`using测试它时`Leaks`，发现内存泄漏。

我不知道出了什么问题，我正在使用 ARC，但我认为我`moviePlayer`没有被释放或者我的问题出在`ViewControllers`.

这是我的代码`MovieVC`：

```
- (void)viewDidLoad
{

    self.view.backgroundColor = [UIColor whiteColor];

    NSString *moviePath = [[NSBundle mainBundle] pathForResource:@"gameopening" ofType:@"m4v"];
    self.moviePlayer = [AVPlayer playerWithURL:[NSURL fileURLWithPath:moviePath]];
    [self.moviePlayer play];

    // Create and configure AVPlayerLayer
    AVPlayerLayer *moviePlayerLayer = [AVPlayerLayer playerLayerWithPlayer:self.moviePlayer];
    moviePlayerLayer.bounds = CGRectMake(0, 0, 1024, 768);
    moviePlayerLayer.position = CGPointMake(515,385);
    moviePlayerLayer.borderColor = [UIColor clearColor].CGColor;
    moviePlayerLayer.borderWidth = 3.0;
    moviePlayerLayer.shadowOffset = CGSizeMake(0, 3);
    moviePlayerLayer.shadowOpacity = 0.80;

    // Add perspective transform

    [self.view.layer addSublayer:moviePlayerLayer];    
    [super viewDidLoad];

    [self performSelector:@selector(loadingView) withObject:nil afterDelay:33.0];  
    UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapGesture:)];
    tapGesture.numberOfTapsRequired = 1;
    [self.view addGestureRecognizer:tapGesture];

    [super viewDidLoad];
}

- (void)handleTapGesture:(UITapGestureRecognizer *)sender {

    if (sender.state == UIGestureRecognizerStateEnded) {
        UIImageView *loadingView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)]; 
        loadingView.image = [UIImage imageNamed:@"Load.png"];
        [self.view addSubview:loadingView];
        [self performSelector:@selector(mainV) withObject:nil afterDelay:2.0];  
    }

}
-(void)loadingView{

        UIImageView *loadingView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)];  
        loadingView.image = [UIImage imageNamed:@"Load.png"];
        [self.view addSubview:loadingView];
        [self performSelector:@selector(mainV) withObject:nil afterDelay:2.0];  

}
-(void)mainV {

        moviePlayer = nil;
        UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
        UIViewController *vc = [sb instantiateViewControllerWithIdentifier:@"mainViewController"];
        vc.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
        [self presentViewController:vc animated:YES completion:NULL];   
} 
```

希望有人会帮助我做错了什么。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:03:47.537

我会建议尝试使用设备运行仪器...如前所述，库本身存在一些问题。如果在设备上泄漏消失了，那么你很高兴.. :)

# c# - 通过android应用程序搜索服务器c#

> ID：12595602
> 
> 赞同：0
> 
> 时间：2012-09-26T06:15:17.187
> 
> 标签：c#, java

我在 c# 中有不止一台服务器和不止一个客户端作为 android 应用程序。我听说过 Socket 连接来连接两者，但它询问服务器的 ip 和端口，我担心我必须将 android 应用程序连接到最近的服务器，而这总是不同的。那么如何在我不知道服务器的确切 IP 和端口的情况下将服务器与客户端连接？有没有其他方法可以连接windows应用程序和android应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:28:45.200

据我了解，您有两个问题，
1）您如何确定最近服务器的地址是什么。您将需要某种解决机制。根据服务器的数量，一种想法是保留服务器地址列表，然后 ping 以查看哪个具有最佳响应时间。

2）你如何从一个android应用程序交换信息到ac#服务器？这取决于 C# 服务器公开的接口。通常，如果它在设计时考虑到跨平台通信，它会提供一些 Web 服务供您访问。

# wordpress - 以编程方式添加元键和元值以在 wordpress 中发布

> ID：12595604
> 
> 赞同：4
> 
> 时间：2012-09-26T06:15:30.677
> 
> 标签：wordpress

是否可以从自定义帖子类型在 wordpress 帖子中添加自定义元键和元值？我试图研究谷歌的所有内容，但仍然没有运气。你们有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T06:36:25.463

可以使用[add_post_meta](http://codex.wordpress.org/Function_Reference/add_post_meta)函数在 WordPress 中实用地添加自定义元数据

```
add_post_meta($post_id, $meta_key, $meta_value, $unique); 
```

例如，如果您想添加带有键名`age`和值的元数据以`25`使用 id 发布，`10`那么您可以这样做

```
<?php add_post_meta(10, 'age', 25); ?> 
```

在上面的例子中，一个 meta key with`age`和 value with`25`将被添加到 post id`10`中，你也可以使用[get_post_meta](http://codex.wordpress.org/Function_Reference/get_post_meta)函数在你的模板中使用它

```
<?php $age = get_post_meta(10, 'age', true); ?> 
```

上面的代码行`age`将从帖子 id 10 中获取元值，即`25`，因此您可以在模板中将其打印为

```
<?php echo $age; // 25 ?> 
```

**更新：** 只需将其添加到您的`functions.php`

```
add_action('wp_insert_post', 'my_add_custom_fields');
function my_add_custom_fields($post_id)
{
    if ( $_POST['post_type'] == 'your_post_type' ) {
        add_post_meta($post_id, 'my_meta_key_name', 'my meta value', true);
    }
    return true;
} 
```

# android - 动画删除 ListView 项

> ID：12595610
> 
> 赞同：32
> 
> 时间：2012-09-26T06:16:06.433
> 
> 标签：android, android-layout, android-listview, android-animation

我正在尝试使用此动画删除 ListView 项目：

```
 mListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> adapterView, final View view, final int i, long l) {
            view.animate().setDuration(500).x(-view.getWidth()).alpha(0f);
            adapter.remove(tasks.get(i));
            adapter.notifyDataSetChanged();
        }
    }); 
```

这没用。我基本上遵循了这篇文章顶部第四个答案的建议：

[如何动画添加或删除 Android ListView 行](https://stackoverflow.com/questions/3928193/how-to-animate-addition-or-removal-of-android-listview-rows)

但是，有一些有趣的绘图内容正在进行，或者回收，或者因为当动画发生时，滑出屏幕的项目下方的项目也因某种原因被删除。不幸的是，提问者最终标记为正确的答案是针对整个 Android 源的 RTFM。我已经浏览了那里，但在我试图模仿的 JellyBean 中找不到通知下拉菜单。

TIA。约翰

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-12T15:05:36.967

想法：当用户选择行时，我开始动画。动画完成后，我从适配器中删除该行。以下代码为所选行设置动画：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final ListView listView = (ListView) findViewById(R.id.listView1);
    final ArrayList<String> values = new ArrayList<String>();
    values.add("Android");
    values.add("iPhone");
    values.add("WindowsMobile");
    values.add("Blackberry");
    values.add("Windows7");

    final ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, android.R.id.text1, values);
    listView.setAdapter(adapter);

    final Animation animation = AnimationUtils.loadAnimation(this,
            R.anim.slide_out);
    animation.setAnimationListener(new AnimationListener() {
        @Override
        public void onAnimationStart(Animation animation) {
        }

        @Override
        public void onAnimationRepeat(Animation animation) {
        }

        @Override
        public void onAnimationEnd(Animation animation) {
            adapter.remove(adapter.getItem(selectedRow));
            adapter.notifyDataSetChanged();
        }
    });

    listView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            Toast.makeText(getApplicationContext(),
                    " " + values.get(position), Toast.LENGTH_LONG).show();
            view.startAnimation(animation);
            selectedRow = position;

        }

    });
} 
```

slide_out.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
 <set xmlns:android="http://schemas.android.com/apk/res/android" >  
    <translate 
        android:fromYDelta="0%" 
        android:toYDelta="100%"  
        android:duration="@android:integer/config_mediumAnimTime"/>  
</set> 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-03-31T15:32:18.713

我刚刚找到了一个漂亮的解决方案：[https ://github.com/paraches/ListViewCellDeleteAnimation](https://github.com/paraches/ListViewCellDeleteAnimation)

这是视频：[http ://www.youtube.com/watch?v=bOl5MIti7n0](http://www.youtube.com/watch?v=bOl5MIti7n0)

非常感谢'paraches' ;)

**编辑**

从 Android 版本 22.0.0 开始，新版本[`android.support.v7.widget.RecyclerView`](https://developer.android.com/guide/topics/ui/layout/recyclerview.html)可作为`ListView`. 标准的添加/删除/更新动画开箱即用。小部件动画也很容易自定义（[很少有自定义动画](https://github.com/wasabeef/recyclerview-animators)）。

**如果您需要自定义项目动画，我强烈建议您切换`ListView`到。`RecyclerView`**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-03T11:12:18.553

正如 Chet Haase 在 DevBytes 中指出的那样，[https://www.youtube.com/watch?](https://www.youtube.com/watch?v=8MIfSxgsHIs) v=8MIfSxgsHIs，所有这些都可以工作，但不要忘记添加瞬态状态标志。

从他的代码：

```
// Here's where the problem starts - this animation will animate a View object.
                    // But that View may get recycled if it is animated out of the container,
                    // and the animation will continue to fade a view that now contains unrelated
                    // content.
                    ObjectAnimator anim = ObjectAnimator.ofFloat(view, View.ALPHA, 0);
                    anim.setDuration(1000);
                    if (setTransientStateCB.isChecked()) {
                        // Here's the correct way to do this: if you tell a view that it has
                        // transientState, then ListView ill avoid recycling it until the
                        // transientState flag is reset.
                        // A different approach is to use ViewPropertyAnimator, which sets the
                        // transientState flag internally.
                        view.setHasTransientState(true);
                    }
                    anim.addListener(new AnimatorListenerAdapter() {
                        @Override
                        public void onAnimationEnd(Animator animation) {
                            cheeseList.remove(item);
                            adapter.notifyDataSetChanged();
                            view.setAlpha(1);
                            if (setTransientStateCB.isChecked()) {
                                view.setHasTransientState(false);
                            }
                        }
                    });
                    anim.start(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T06:25:31.437

我在刷新 ListView 时使用了从上到下的幻灯片动画。这是我使用的代码：

```
 adapter.notifyDataSetChanged();
 Animation animation = AnimationUtils.loadAnimation(
                    getApplication(), R.anim.slide_top_to_bottom);
 getListView().startAnimation(animation);
 getListView().setSelection(0); 
```

和 slide_top_to_bottom.xml （将其保存在`res/anim`文件夹中）

```
<?xml version="1.0" encoding="utf-8"?>

<set xmlns:android="http://schemas.android.com/apk/res/android"   android:interpolator="@android:anim/accelerate_interpolator">
<translate android:fromYDelta="-100%" android:toXDelta="0" android:duration="100" />
<alpha android:fromAlpha="0.0" android:toAlpha="1.0" android:duration="50" />
</set> 
```

**编辑：** 试试这个：

```
mListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
@Override
public void onItemClick(AdapterView<?> adapterView, final View view, final int i, long l) {

    ValueAnimator fader = ObjectAnimator.ofFloat(view, "alpha", 1, 0);
    AnimatorSet animation = new AnimatorSet();
    animation.addListener(new AnimatorListener() {
        @Override
        public void onAnimationStart(Animator animation) {

        }
        @Override
        public void onAnimationRepeat(Animator animation) {
        }
        @Override
        public void onAnimationEnd(Animator animation) {

        }
        @Override
        public void onAnimationCancel(Animator animation) {
        }
    });
    ((AnimatorSet) animation).play(fader);
    animation.setDuration(500);
    animation.start();
    adapter.remove(tasks.get(i));
    adapter.notifyDataSetChanged();
}
}); 
```

# windows - 如何将diskpart的输出写入文件

> ID：12595611
> 
> 赞同：2
> 
> 时间：2012-09-26T06:16:10.583
> 
> 标签：windows, batch-file

我想将`diskpart`命令的输出写入文件，即说类似

```
LIST PARTITION >c:\output.txt 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:42:31.820

您可以使用`/s`选项来执行此操作`diskpart`，即

```
diskpart /s scriptfile.txt > output.txt 
```

where`scriptfile.txt`包含要执行的命令，即

```
LIST PARTITION 
```

# c# - C#.NET：如何在单个 DataTable 上创建自身数据关系？

> ID：12595612
> 
> 赞同：5
> 
> 时间：2012-09-26T06:16:12.537
> 
> 标签：c#, .net, ado.net

我有以下数据表结构 -

```
User ID | User Name | Manager ID
-------------------------------------
1       | ABD       | 2
2       | BCD       | NULL
3       | KUM       | 4
4       | POC       | NULL
5       | OJM       | 2 
```

在上表中，用户 ID - 2 是用户 ID - 1,5 的经理，同样用户 ID - 4 是用户 ID - 3 的经理。

如何创建自我关系以显示 Manager -> Users 的层次结构详细信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T06:23:10.007

您必须为 DataTable 添加嵌套关系，如下例所示 -

```
DataRelation relation = new DataRelation("ParentChild",
        result.Tables["Employee"].Columns["UserID"],
        result.Tables["Employee"].Columns["ManagerID"],
        true);

relation.Nested = true;
result.Relations.Add(relation); 
```

希望这可以帮助。

# mysql - 如何从 mysql 数据库编辑 liferay 来宾和站点成员的权限？

> ID：12595622
> 
> 赞同：1
> 
> 时间：2012-09-26T06:16:53.470
> 
> 标签：mysql, permissions, liferay, liferay-6

虽然错误地使用托管在我的本地服务器上的 liferay，但我刚刚取消了访客和站点成员从我的管理员帐户查看欢迎页面的权限。现在我无法访问任何页面，甚至它也不允许我登录。我已经检查了我的生命射线门户的数据库，但我找不到解决方案。任何人都可以指导我在 MySQL 数据库中需要编辑哪个表和哪个权限。我是新蜜蜂，所以我不知道这。我已经看到了 user_role 和用户权限表，但找不到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-23T08:41:34.760

```
UPDATE public.resourcepermission SET actionids = 15 WHERE roleid = (select roleid FROM public.role_ WHERE name = 'Guest') 
```

# android - 谷歌什么时候停止支持 c2dm 推送通知？

> ID：12595623
> 
> 赞同：2
> 
> 时间：2012-09-26T06:17:03.620
> 
> 标签：android, push-notification, android-c2dm

我一直在为我的应用程序使用 android c2dm 推送通知，但由于 Google 将停止 c2dm，我需要知道我应该多快将我的所有用户移动到 android GCM，以避免我的应用程序用户面临任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T06:22:57.980

C2DM 已于 2012 年 6 月 26 日正式弃用。这意味着 C2DM 已停止接受新用户和配额请求。不会向 C2DM 添加任何新功能。但是，使用 C2DM 的应用程序将继续工作

[https://developers.google.com/android/c2dm/](https://developers.google.com/android/c2dm/)

GCM 是您的正确选择。

Google Cloud Messaging for Android (GCM) 是一项服务，可帮助开发人员将数据从服务器发送到他们在 Android 设备上的 Android 应用程序。这可能是一条轻量级消息，告诉 Android 应用程序有新数据要从服务器获取（例如，朋友上传的电影），也可能是一条包含高达 4kb 有效负载数据的消息（因此应用程序如即时通讯可以直接消费消息）。GCM 服务处理消息排队和传递到目标设备上运行的目标 Android 应用程序的所有方面

本文档描述了如何使用 GCM 提供的帮助程序库（客户端和服务器）编写 Android 应用程序和服务器端逻辑。

检查这些链接，

[http://developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)

[http://developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html)

[http://www.basic4ppc.com/forum/basic4android-getting-started-tutorials/19226-android-push-notification-gcm-framework-tutorial.html](http://www.basic4ppc.com/forum/basic4android-getting-started-tutorials/19226-android-push-notification-gcm-framework-tutorial.html)

[http://fundroiding.wordpress.com/2012/06/29/google-cloud-messaging-for-android-gcm-simple-tutorial/](http://fundroiding.wordpress.com/2012/06/29/google-cloud-messaging-for-android-gcm-simple-tutorial/)

对于客户端应用程序，您可以在此处找到代码

[https://github.com/marknutter/GCM-Cordova](https://github.com/marknutter/GCM-Cordova)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T06:22:14.297

[从c2dm 官方页面](https://developers.google.com/android/c2dm/)的通知中可以看到，

> 重要提示：C2DM 已于 2012 年 6 月 26 日正式弃用。这意味着 C2DM 已停止接受新用户和配额请求。不会向 C2DM 添加任何新功能。但是，使用 C2DM 的应用程序将继续工作。鼓励现有 C2DM 开发人员迁移到新版本的 C2DM，称为 Android 版 Google Cloud Messaging (GCM)。有关更多信息，请参阅 C2DM 到 GCM 迁移文档。开发人员必须使用 GCM 进行新的开发。

这意味着，您可以继续使用 c2dm，它会像以前一样工作。但未来不会有任何支持。任何新功能都将添加到 GCM。

顺便说一句，迁移到 GCM 非常简单，而且他们有 GCM 的帮助程序库。尽快转移到它以实现可靠且无配额的交付。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-04T14:31:20.440

Google 已宣布 C2DM 通知的生命周期结束。生命周期结束日期为 2015 年 7 月 30 日。

在[C2DM 主页上](https://developers.google.com/android/c2dm/)找到：

> 重要提示：C2DM 已于 2012 年 6 月 26 日正式弃用，并将于 2015 年 7 月 30 日完全关闭。鼓励现有 C2DM 开发人员迁移到[适用于 Android 的 Google Cloud Messaging](http://developer.android.com/google/gcm/index.html) (GCM)。有关更多信息，请参阅[C2DM 到 GCM 迁移文档](http://developer.android.com/google/gcm/c2dm.html)。开发人员必须使用 GCM 进行新的开发。

# php - PHP LinkedIn API 与 Javascript LinkedIN API 集成

> ID：12595624
> 
> 赞同：0
> 
> 时间：2012-09-26T06:17:17.293
> 
> 标签：php, javascript, linkedin

首先，我使用 JAVASCRIPT linkedin API 来获取个人资料信息，并且它工作得很好。但是现在我想为我的项目使用 PHP LinkedIN API，但重点是我想使用 PHP API 仅用于授权目的以及我想要在 Javascript 中使用的其余代码，例如使用 IN 对象获取个人资料信息和人员搜索方法调用。

我可以使用 PHP API 进行授权，但我的问题是当我尝试使用 IN 对象时，它告诉您首先需要授权。

那么他们是否有任何机制让 Javascript API 知道我已经授权用户然后开始使用 IN 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:29:04.483

如果您通过linkedin 登录并且之前已授权该应用程序，则可以直接开始进行javascript 调用。JS API 使用 OAuth 2.0，其中令牌通过令牌和服务器透明地交换。这种身份验证流程比基于服务器的身份验证要容易得多，后者仍然使用 OAuth 1.0a（我认为）。

但是如果您需要在通过 JS 进行身份验证后进行基于 PHP 的调用，这篇文章应该可以帮助您：[https ://developer.linkedin.com/documents/exchange-jsapi-tokens-rest-api-oauth-tokens](https://developer.linkedin.com/documents/exchange-jsapi-tokens-rest-api-oauth-tokens)

但是，您似乎想通过PHP进行身份验证，然后通过JS进行调用，我不明白为什么。

# c++ - 在没有优化但当前上下文中仍然没有局部变量符号的程序上使用 gdb 进行调试

> ID：12595631
> 
> 赞同：33
> 
> 时间：2012-09-26T06:17:46.550
> 
> 标签：c++, debugging, gcc, gdb

我一直有这个问题，但似乎总是推迟问这个问题，因为我好像做错了什么......但现在我觉得不是......拿了这个代码：

```
#include <string>
#include <iostream>
#include <algorithm>
int main(int argc, char** argv)
{
  if(argc < 2)
  {
    std::cout << "usage: " << argv[0] << " <string>" << std::endl;
    return 1;
  }
  std::string str = argv[1];
  std::reverse(str.begin(), str.end());
  std::cout << str << std::endl;
  return 0;
} 
```

使用命令编译：

```
g++ -std=c++11 -Wall main.cpp -o main -O0 -ggdb3 
```

我正在使用最新的主干版本的 gcc，我的主干是在 9 月 23 日左右拍摄的……另外请注意，我没有进行优化编译！

现在无论如何，我开始调试，如下所示：

```
gdb --quiet --args ./main string 
```

我在第 12 行设置了一个断点（反向算法）

```
b 12 
```

然后我运行程序

```
run 
```

然后我尝试打印出字符串，看看它是什么

```
print str 
```

我亲爱的朋友们，这对我来说似乎很奇怪：之前的命令的输出是：

```
No symbol "str" in current context. 
```

快速检查局部变量也不显示字符串

```
info locals 
```

我得到的只是

```
std::__ioinit = {static _S_refcount = 2, static _S_synced_with_stdio = true} 
```

所以我想知道，是我有错，还是编译器或调试器有错……这对我来说很长一段时间以来一直是一个非常痛苦的问题……所以感谢您阅读这个问题.. . :)

编辑：现在很明显我的 gcc 构建有问题，我想知道是否有人遇到过错误报告或任何其他似乎存在类似问题的情况......我会还可以尝试检查最近构建的 gdb，以确保我当前的调试器（ubuntu 附带）绝对没有问题......这有意义吗？

EDIT2：所以在编译gdb v7.5之后，我得到了相对相同的结果，除了根本没有本地人......我想这意味着这是一个gcc问题，谢谢大家......

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-02-24T11:02:49.660

如[GCC 4.8](http://gcc.gnu.org/gcc-4.8/changes.html)（即当前主干）的发行说明中所述：

> DWARF4 现在是生成 DWARF 调试信息时的默认值。当在使用 DWARF 调试信息的平台上使用 -g 时，GCC 现在将默认为 -gdwarf-4 -fno-debug-types-section。GDB 7.5、Valgrind 3.8.0 和 elfutils 0.154 调试信息消费者默认支持 DWARF4。在 GCC 4.8 之前，使用的默认版本是 DWARF2。要使 GCC 4.8 生成较旧的 DWARF 版本，请使用 -g 和 -gdwarf-2 或 -gdwarf-3。Darwin 和 VxWorks 的默认值仍然是 -gdwarf-2 -gstrict-dwarf。

所以你需要使用 GDB 7.5 或编译`-g -gdwarf-2`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T06:29:53.637

不，即使使用 --quiet 它也对我有用。可能你的设置有问题。

```
~/tmp $ g++ -Wall tmp.cpp -o tmp -O0 -ggdb3
~/tmp $ gdb --quiet --args ./tmp string
Reading symbols from /xxxxxxxx/tmp...done.
(gdb) b 12
Breakpoint 1 at 0x400c95: file tmp.cpp, line 12.
(gdb) run
Starting program: /xxxxxxxx/tmp string
Breakpoint 1, main (argc=2, argv=0x7fffffffdc58) at tmp.cpp:12
12        std::reverse(str.begin(), str.end());
(gdb) print str
$1 = "string"
(gdb) info locals
str = "string"
(gdb) 
```

# jquery - 在 div 中找到 div 并将其删除？

> ID：12595633
> 
> 赞同：8
> 
> 时间：2012-09-26T06:17:49.157
> 
> 标签：jquery

我想用类图表栏删除 div 里面的 div 这是我的 html 代码

```
<div class="chartsbar" style="position: absolute; bottom: 0px; left: 27.28%; display: none; height: 0%; background-color: rgb(7, 134, 205); color: rgb(255, 255, 255); width: 0.9730252100840335%; text-align: left; " rel="0" title="09-09-2012 - 0 (0%)">

<div style="text-align:center">
0
</div>

<span style="display: block; width: 100%; position: absolute; bottom: 0; text-align: center; background-color: #0786CD;">
09-09-2012
</span>

</div> 
```

我试过

```
$('.chartsbar').find('div').first().remove(); 
```

但似乎没有工作。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-26T06:20:23.237

```
$('.chartsbar div').remove(); 
```

它应该工作！

把事情简单化！

**编辑**

如果您只想删除第一个：

```
$('.chartsbar div:first').remove(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T06:22:01.663

您可以通过一个简单的选择器来实现这一点。这将删除第一个 div 孩子。

```
$(".chartsbar > div:first-child").remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:19:39.160

尝试：

```
$('.chartsbar > div').remove(); 
```

或者：

```
$('.chartsbar div').remove(); 
```

检查[小提琴](http://jsfiddle.net/sushanth009/bUWGh/1/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T06:20:28.547

试试这个

```
$('.chartsbar').find('div:eq(0)').remove(); 
```

或直接使用

```
$('.chartsbar div').remove(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T06:22:45.543

尝试`$('.chartsbar').children().first().remove()`

# java - 设置 jar 文件

> ID：12595639
> 
> 赞同：1
> 
> 时间：2012-09-26T06:18:32.423
> 
> 标签：java, gwt, smartgwt

我正在尝试设置一个 smartGWT 应用程序，但我遇到了类路径 jar 的问题。

首先，术语类路径是什么意思。

我为设置类路径所做的工作如下：

在 Eclipse 中创建新的类路径 1\. Windows: Window -> Preferences -> Java -> Build Path -> Classpath Variables 2\. 选择 New 并输入名称 SGWTPOWER_HOME 和路径我选择 $SGWTPOWER_HOME/lib 中的 lib 文件夹

然后在我的项目中，我右键单击项目标题并选择属性-> 构建路径。然后我单击变量并选择 SGWTPOWER_HOME。

但我的项目给了我错误“无法解决类”。我究竟做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:39:29.797

好的，让它工作。我所做的步骤都是正确的。只是我缺少那个扩展按钮，我需要单击它来添加罐子。如果变量解析为文件夹，您可以指定指向 JAR 的路径扩展名。为此，请按“扩展...”按钮。希望对新人有帮助！！

# scala - Scala - 如何更改编译器行为（自动转换为浮点类型）？

> ID：12595643
> 
> 赞同：0
> 
> 时间：2012-09-26T06:18:52.207
> 
> 标签：scala, floating-point, type-conversion, implicit-conversion

例如，这段代码编译并输出`false`，因为 Scala 编译器将 s 隐式转换`Int`为`Double`s 而不是 create `List[AnyVal]`，这对我来说看起来很奇怪，因为这会导致数据丢失（例如，浮点类型不精确；对可能具有危险隐式转换的其他类型做类似的事情）。为什么 Scala 的设计者选择这样做？（我使用的是 2.9 版）

```
object Main {
    def main(args: Array[String]) {
        val x = List(3, 2)
        val y = List(3, 2.0)
        println(x.head / 2 == y.head / 2)
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:22:36.617

`List`s 是同构类型的。当您将不同类型的项目放入 a`List`时，编译器必须弄清楚要为整个列表赋予什么类型。当您将 Double 和 Int 放入 a`List`时，Scala 会决定 的类型`List`应该是`List[Double]`，因为这两个项目都可以转换为。参见 REPL：

```
scala> val y = List(3, 2.0)
y: List[Double] = List(3.0, 2.0) 
```

解决方法是手动将您的列表转换为`List[Int]`：

```
scala> val y = List(3, 2.0).map(_.toInt)
y: List[Int] = List(3, 2) 
```

这样，您的测试就出来了`true`：

```
scala> println(x.head / 2 == y.head / 2)
true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:22:46.683

您在这里只有两种可能性：提升到`Double`或扩大到`AnyVal`。在后一种情况下，甚至没有定义除法，这有点没用。如果你想要求这种行为，你可以显式指定类型：

```
val y = List[AnyVal](3,2.0)
y.head match {
  case i: Int => println("Whew, it is still an int!")  // This is printed
  case _ => println("Bah, it messed up again")
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:27:12.110

如果您不想转换为浮点类型，那么为什么要创建具有浮点数的列表？如果您不希望这样，请不要将任何浮点数插入或将这些浮点数转换为非浮点数。

# c# - 你调用的对象是空的。访问 Excel 工作表单元格值时

> ID：12595644
> 
> 赞同：0
> 
> 时间：2012-09-26T06:19:00.023
> 
> 标签：c#, linq, excel, openxml

我需要从 Excel 工作表中的每一行读取值，并按顺序对包含的值进行一些计算。我似乎在访问这些值时遇到了一些问题，希望能在调试下面的代码时得到一些帮助。

```
 public void ProcessRows(IEnumerable<Row> dataRows, SharedStringTable sharedString)
    {
        try
        {
            //Extract the information for each row 
            foreach (Row row in dataRows)
            {
                var cellValues = from cell in row.Descendants<Cell>()
                                 select ((cell.CellValue != null && cell.DataType!=null && cell.DataType.HasValue  )
                                 && (sharedString.HasChildren  && int.Parse(cell.CellValue.InnerText) < sharedString.ChildElements.Count)
                                           ? sharedString.ChildElements[int.Parse(cell.CellValue.InnerText)].InnerText
                                           : ((cell.CellValue.InnerText != null)?cell.CellValue.InnerText:cell.CellValue.Text));

                //Check to verify the row contained data.
                if (cellValues != null && cellValues.Count() > 0)
                {
                    //Create a productdetail object and add it to the list.
                    var values = cellValues.ToArray();
                    ProductItemDetail itemdetail = new ProductItemDetail();
                    itemdetail.RecordID = SessionRecordID;
                    if (values[0] != null)
                        itemdetail.Source = values[0].Trim();
                    if (values[1] != null)
                        itemdetail.Sourcename = values[1].Trim();
                    if (values[2] != null)
                        itemdetail.URLHomePage = values[2].Trim();

                }
            {

    Catch(Exception ex)
    {

        throw ex;
             } 
```

}

当我在代码中运行这一行时，问题似乎发生了

if (cellValues != null & cellValues.Count() > 0) { . . . . . }

你调用的对象是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:25:38.760

在您的 LINQ 选择中，您有一个条件`cell.CellValue != null`，如果 false 导致内联 if of`((cell.CellValue.InnerText != null)?cell.CellValue.InnerText:cell.CellValue.Text)` 但如果`cell.CellValue != null`为 false`cell.CellValue.InnerText != null`则将导致您的错误。

请试试：

```
public void ProcessRows(IEnumerable<Row> dataRows, SharedStringTable sharedString)
{
    try
    {
        //Extract the information for each row 
        foreach (Row row in dataRows)
        {
            var cellValues = from cell in row.Descendants<Cell>()
                select ((cell.CellValue != null && cell.DataType!=null && cell.DataType.HasValue  )
                    && (sharedString.HasChildren  && int.Parse(cell.CellValue.InnerText) < sharedString.ChildElements.Count)
                    ? sharedString.ChildElements[int.Parse(cell.CellValue.InnerText)].InnerText
                    : ((cell.CellValue != null && cell.CellValue.InnerText != null)?cell.CellValue.InnerText:cell.CellValue.Text));

            //Check to verify the row contained data.
            if (cellValues != null && cellValues.Count() > 0)
            {
                //Create a productdetail object and add it to the list.
                var values = cellValues.ToArray();
                ProductItemDetail itemdetail = new ProductItemDetail();
                itemdetail.RecordID = SessionRecordID;
                if (values[0] != null) { itemdetail.Source = values[0].Trim(); }
                if (values[1] != null) { itemdetail.Sourcename = values[1].Trim(); }
                if (values[2] != null) { itemdetail.URLHomePage = values[2].Trim(); }
            }
        }
    }
    Catch(Exception ex)
    {
        throw ex;
    }
} 
```

# c# - 使用 BackgroundWorker 报告类属性

> ID：12595645
> 
> 赞同：0
> 
> 时间：2012-09-26T06:19:08.960
> 
> 标签：c#, winforms

我启动了一个流程并希望获得流程输出以便在我的表单（winform）上显示它，所以我创建了 ProgressChanged 事件。我的问题是由于某种原因我无法进入我的 progressChanged 函数。

我的代码：

```
BackgroundWorker bgWorker = null;
string pcapFilePathSniffer = ""; 
```

这是我开始这个过程的课程：

```
public class Tshark
{
    public int _interfaceNumber;
    public string _pcapPath;
    Process _tsharkProcess;
    public int _packetsCount;
    public string _packet;        
    public string _tsharkPath = @"C:\Program Files\Wireshark\tshark.exe";
    public delegate void dlgPackProgress(int progress);
    public event dlgPackProgress evePacketProgress;

    public Tshark(int interfaceNumber, string pcapPath)
    {
        _interfaceNumber = interfaceNumber;
        _pcapPath = pcapPath;
    }

    public void startTheCapture()
    {
        try
        {
            List<string> list = new List<string>();
            _tsharkProcess = new Process();
            _tsharkProcess.StartInfo.FileName = @"C:\Program Files\Wireshark\tshark.exe";
            //_tsharkProcess.StartInfo.Arguments = string.Format(" -i " + _interfaceNumber + " -c " + int.MaxValue + " -w " + _pcapPath);
            _tsharkProcess.StartInfo.Arguments = string.Format("-i " + 2);
            _tsharkProcess.OutputDataReceived += new DataReceivedEventHandler(process_OutputDataReceived);
            _tsharkProcess.StartInfo.RedirectStandardOutput = true;
            _tsharkProcess.StartInfo.UseShellExecute = false;
            _tsharkProcess.StartInfo.CreateNoWindow = true;
            _tsharkProcess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
            _tsharkProcess.Start();
            StreamReader myStreamReader = _tsharkProcess.StandardOutput;                

            while (!myStreamReader.EndOfStream)
            {
                evePacketProgress(_packetsCount);
                _packet = myStreamReader.ReadLine();
                list.Add(_packet);
                _packetsCount++;

                private void OnPacketProgress(int packet)
                {
                  var handler = evePacketProgress;
                  if (handler != null)
                  {
                     handler(packet);
                  }
                }
            }         

            _tsharkProcess.WaitForExit();                

        }
        catch (Exception e)
        {

        }
    }
} 
```

开始处理的开始按钮：

```
private void btnStartCapture_Click(object sender, EventArgs e)
{
    bgWorker = new BackgroundWorker();
    bgWorker.WorkerReportsProgress = true;
    bgWorker.ProgressChanged += new ProgressChangedEventHandler(bgWSniffer_ProgressChanged);
    bgWorker.DoWork += new DoWorkEventHandler(
        (s3, e3) =>
        {
            tshark = new Tshark(2, pcapFilePathSniffer);
            tshark.startTheCapture();

            tshark.evePacketProgress += new Tshark.dlgPackProgress(
                (packet) =>
                {
                    bgWorker.ReportProgress(packet, tshark);
                });
        });

    bgWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(
        (s3, e3) =>
        {

        });

    bgWorker.RunWorkerAsync();
} 
```

ProgressChanged 函数：

```
private void bgWSniffer_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    tshark = e.UserState as Tshark;
    listBoxPacketsSnifferTab.Text += tshark._packet;
    lblPacketsReceived2.Text = tshark._packetsCount.ToString("#,##0");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:38:59.593

`Tshark.evePacketProgress`您应该从`startTheCapture`调用事件引发事件`BackgroudWorker.ReportProgress`。像这样的东西：

```
private void OnPacketProgress(int packet)
{
  var handler = evePacketProgress;
  if (handler != null)
  {
     handler(packet);
  }
}

public void startTheCapture()
{
        // your code here

        while (!myStreamReader.EndOfStream)
        {
            _packet = myStreamReader.ReadLine();
            list.Add(_packet);
            OnPacketProgress(_packetsCount++);
        }

        // your code here
} 
```

# java - 调用相同（自写）方法时得到不同的结果

> ID：12595651
> 
> 赞同：1
> 
> 时间：2012-09-26T06:19:22.817
> 
> 标签：java, set, self

首先，对不起，标题是超级描述性的，但老实说，我无法用一句话来解释我的问题。解释我在做什么：我正在创建一个字母表，该字母表的开头有一个用于单字母加密的密钥。我做了一个删除重复项的方法，效果很好。我有一些额外的时间来做这个评估，所以我一直在玩。我发现了不包含重复项的集合。

因此，当我将 Set 返回到一个字符串时，我有一个字符串读取

> [s, e, c, u, r.....x, y, z]

该字符串中包含我不需要的所有这些字符。所以我使用我写的一种方法来删除任何不是字母的东西。当我第一次调用它时，我得到

> 安全....xyz

我，只是为了好玩，再次调用该方法。我现在只剩下

> 安全....xyz

因此，如果有人能告诉我为什么该方法第一次成功删除了逗号和方括号，但没有成功删除空格，但在第二次调用中删除了空格，那就太棒了。供参考，我的代码

```
public static String createMonoAlphabet(String key){
    String crypticAlphabet = key;       
    crypticAlphabet = crypticAlphabet.concat("abcdefghijklmnopqrstuvwxyz");
    //crypticAlphabet = removeDuplicates(crypticAlphabet);
    Set alphabet = new LinkedHashSet();
    for(int i = 0; i<crypticAlphabet.length(); i++){
        alphabet.add(crypticAlphabet.charAt(i));
    }

    crypticAlphabet = alphabet.toString();
    crypticAlphabet = parseInput(crypticAlphabet);
    crypticAlphabet = parseInput(crypticAlphabet);
    return crypticAlphabet;
} 
```

那就是使用集合的方法。作为一个注释，在我只是在这里玩之前，我从来没有使用过它们，所以如果它是不好的做法或者那很好。随时让我知道，但我现在不那么担心现在对于删除非字母的方法

```
 public static String parseInput(String input){
    StringBuffer buf = new StringBuffer(input);

    for(int i = 0; i < buf.length(); i++){
        char c = buf.charAt(i);
        if(!(((int)c >= 65 && (int)c <= 90) || 
                ((int)c >= 97 && (int)c <= 122))){
            System.out.print(buf.charAt(i));
            buf =  buf.deleteCharAt(i);
        }   
    }
    System.out.print(".");
    System.out.println();
    input = buf.toString();
    return input;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:05:02.350

`parseInput`关于您的代码的几点说明：

*   您正在迭代您的 StringBuffer 并同时修改它（通过调用`deleteCharAt(i)`）。做这种事情通常是个坏主意。

*   在 Java 中，您不应该进行低级操作，例如将 char 转换为他的 ASCII 值（它看起来像 C 代码）

在我看来，解决问题的最佳方法是使用正则表达式。我会写这样的东西：

```
public static String parseInput(String input) {
    return input.replaceAll("[^a-zA-Z]+","");
} 
```

这意味着用空字符串替换所有不是字母的东西。欢迎！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:41:51.470

alphabet.toString() 调用添加了您不需要的所有字符。集合的字符串表示始终是：

> [项目1，项目2，项目3，...]

要将集合再次转换为字符串，请对其进行迭代并使用 StringBuilder 创建字符串，例如

```
StringBuilder builder = new StringBuilder();
for(String s: alphabet) { builder.append(s); }
crypticAlphabet = builder.toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:39:50.187

为了解决您的实际问题，我更改了您的`parseInput`方法以获得更简单的解决方案：

```
public static String parseInput(String input) {
    char[] chars = input.toCharArray();
    StringBuilder sb = new StringBuilder();
    for(int i = 0; i < chars.length; i++) {
        if ((chars[i] >= 65 && chars[i] <= 90) ||
            (chars[i] >= 97 && chars[i] <= 122)) {
            sb.append(chars[i]);
        }
    }
    return sb.toString();
} 
```

您在后期代码中遇到了一个问题：使用索引从数组中删除一个元素然后移动到下一个索引是不好的。这将是一个使用字符串`[s, e]`（包括空格）的示例：

第一次，您将拥有这个数组（较短的形式）：

```
0 1 2 3 4 5
[ s ,   e ] 
```

索引为0，发现一个`[`非字符，所以将其删除，具有实际数组

```
0 1 2 3 4
s ,   e ] 
```

检查元素是否回到数组中的一个位置，但您的索引将向上滚动 1，因此现在 Index 为 1 并找到`,`（不是`s`！）。这将是这种情况的输出：

```
0 1 2 3
s   e ] 
```

现在您的索引将为 2。检查空格是否移回 1 个位置并变为 1。这就是您的算法失败的原因。

作为旁注，您应该考虑以下建议：

*   使用 Collection 时，为容器定义类。在这种情况下，您将使用`Set<Character>`and `LinkedHashSet<Character>`。
*   使用`StringBuilder`而不是`StringBuffer`. 更多关于它[的信息](http://javahowto.blogspot.com/2006/08/stringbuilder-vs-stringbuffer.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T06:38:18.323

您必须反转`parseInput`方法中 for 循环的顺序。执行 a`deleteCharAt`时会引发左移，这意味着您会错过某些字符。颠倒顺序可以解决这个问题。

为您的 for 循环尝试以下操作：

`for (int i = buf.length() - 1; i >= 0; i--)`

# iphone - 影响应用程序性能的 AVAudioPlayer 声音

> ID：12595653
> 
> 赞同：1
> 
> 时间：2012-09-26T06:19:31.447
> 
> 标签：iphone, objective-c, performance, audio, avaudioplayer

我最近一直在将声音添加到我正在使用的游戏中`AVAudioPlayer`。我注意到播放声音通常会降低游戏的帧率。我试图通过使用方法来降低性能成本`[sound prepareToPlay]`，但这似乎没有什么区别。有谁知道一种无需显着性能成本即可播放声音的方法吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T06:41:06.337

AVAudioPlayer 在性能方面非常昂贵并且存在滞后问题。它在泄漏方面也不是很可靠，因为您必须在 AVAudioPlayerDelegate 委托的 audioPlayerDidFinish 回调中释放它。

AVAudioPlayer 最适合播放较长的可循环音乐曲调作为背景。为了播放短音效，使用 AudioToolbox.h 中的 AudioServicesPlaySystemSound 方法在性能方面更便宜。为此，您需要声明 SystemSoundID..

你可以参考这个链接.. [http://blogs.x2line.com/al/archive/2011/05/19/3831.aspx](http://blogs.x2line.com/al/archive/2011/05/19/3831.aspx)

# angularjs - Angular.js：是否可以根据现有范围数据重新渲染 ng-repeats？

> ID：12595656
> 
> 赞同：26
> 
> 时间：2012-09-26T06:20:06.230
> 
> 标签：angularjs, scope, refresh, rerender

我的视图中有一堆连接`ul`列表，它们使用 jQuery UI：Sortable 指令来促进列表项的拖放和重新排序。

我通过 jQuery UI 的拖放进行的更改应用于`$scope`使用该`$apply`功能，这部分工作......

然而，我现在遇到的问题是，在放入其中一些列表时，我提供了一个用户需要填写的自定义表单。

用户可以选择：

1.  填写表格并继续，然后`$apply`调用将数据保存到`$scope`
2.  单击取消按钮，而不是调用`$apply`来存储信息，应该有效地“重新呈现”我的所有列表以反映仍处`$scope`于此阶段的数据（因为最新的拖动还没有对它有任何影响）。

这个“取消”按钮的效果是有效地将所有内容恢复到用户拿起列表项并将其拖入另一个列表之前的点。

如何强制“刷新”或“重新渲染”我`ng-repeat`的 s，以便它们在视觉上刷新并`$scope`再次显示当前数据？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-05T14:27:11.523

当用户开始填写表格时，我会设置

`$scope.oldData = angular.copy($scope.data);`

然后让用户使用他喜欢的表单编辑 $scope.data。

然后，如果用户按下取消，只需设置`$scope.data = $scope.oldData`.

# php - 如何存储表单的多个字段的数据？

> ID：12595657
> 
> 赞同：0
> 
> 时间：2012-09-26T06:20:05.847
> 
> 标签：php, javascript

我有一个表单，用户可以根据需要增加或添加字段数量。

字段添加成功.....

为此我使用javascript，代码在这里..

```
<script type="application/javascript">
var counter3 = 0;
function addAuthor() {
    // Get the main Div in which all the other divs will be added
    var mainContainer = document.getElementById('Author');

    // Create a new div for holding text and button input elements
    var newDiv = document.createElement('div');

    // Create a new text input
    var newText = document.createElement('input');
    newText.type = "text";
    //var i = 1;
    newText.name = "Author[]";
    //newText.value = counter3 + 2 + ". ";

    //Counter starts from 2 since we already have one item
    //newText.class = "input.text";
    // Create a new button input
    var newDelButton = document.createElement('input');
    newDelButton.type = "button";
    newDelButton.value = "-";

    // Append new text input to the newDiv
    newDiv.appendChild(newText);
    // Append new button input to the newDiv
    newDiv.appendChild(newDelButton);
    // Append newDiv input to the mainContainer div
    mainContainer.appendChild(newDiv);
    counter3++;
    //i++;

    // Add a handler to button for deleting the newDiv from the mainContainer
    newDelButton.onclick = function() {
        mainContainer.removeChild(newDiv);
        counter3--;
    }
}
</script> 
```

我在这里有一个表格..

```
<form method="post" action="">
    <input type = "text" name="Author[]" />
    <input type="button" value="+" id="Authorbutton" onclick="addAuthor()" />
    <input type="submit" value="submit" name="submit">
    </form> 
```

我使用 php 和 mysql 查询将数据保存到数据库中.. 代码代码是..

```
<?php

if(isset($_POST['submit']))
{
$authors = $_POST['Author'];
foreach($authors as $author) 
{
    $sql=mysql_query("INSERT INTO test (number, type) VALUES ('{$_POST['type']}','{$author}')");

    if (!$sql){
       die('Error: ' . mysql_error());
    }
//endforeach;

}
}

?> 
```

但问题是数据没有正确存储在数据库中......

它只保存数据库中的第一个字段，但不保存第二个、第三个、第四个等......

帮我 ........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:23:09.977

您的查询应该是

```
$sql=mysql_query("INSERT INTO test (number, type) VALUES ('$_POST['type']','$author')"); 
```

在你的视图文件中它应该是

```
 <input type = "text" name="Author" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:10:28.517

您正在尝试提交 2 个具有相同名称的单独数组。每次添加作者时，您将获得

```
$_POST['Author'][1] = 'foo'; 
```

代替

```
$_POST['Author'][1] = 'foo';
$_POST['Author'][2] = 'bar'; 
```

这是你所期待的。您应该尝试使输入已经具有索引，即

```
<input type = "text" name="Author[1]" />
<input type = "text" name="Author[2]" /> 
```

等等。您可以使用您的 counter3 JS 变量逐步增加输入索引，并执行类似的操作

```
newText.name = "Author[" + counter3 + "]"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:38:13.420

只是会建议做一个`print_r($_REQUEST)`并检查你在请求中得到的所有数据。Plus 还希望您检查 firebug / chrome 检查工具，以检查您是否将元素正确添加到浏览器。因为查看代码，它似乎没有正确运行。这里缺少的一件事是 ID - Auther，而您通过 id 获取元素本身就失败了。另外，还尝试使用该修复/补丁运行相同的内容，但无法运行以检查输出。所以希望您检查一下您在请求中获得的确切值是多少。如果表单提交只会将单个数据传递回服务器，那么您获得响应/期望的结果总是很麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T06:38:32.200

尝试这个，

```
if(isset($_POST['submit']))
{
$authors = $_POST['Author'];
$valuesToInsert =   1;
for($i=0;$i<count($authors);$i++) 
{   $number = $i +1;
    $valuesToInsert .=   "($number,$authors[$i]),";

}
$valuesToInsert =   trim($valuesToInsert,',');
$sql=mysql_query("INSERT INTO test (number, type) VALUES ".$valuesToInsert);    
    if (!$sql){
       die('Error: ' . mysql_error());
    }
//endforeach;

}

?> 
```

# matlab - 在 Matlab 用户界面中跨多个 m 文件搜索文本

> ID：12595662
> 
> 赞同：9
> 
> 时间：2012-09-26T06:20:24.170
> 
> 标签：matlab, interface, editor

**在**matlab 用户界面中是否有一种方法可以跨多个 m 文件搜索某些文本？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-26T07:07:47.460

按 Ctrl-Shift-f，或转到菜单 Edit->Find Files。你会得到一个很好的对话框，希望能做你想做的事。

![在此处输入图像描述](../Images/3fa1480c9c6a3d784bb57a77c7960bc3.png)

# asp.net - 如何在 ASP.NET MVC3 中仅为发布配置而不是调试设置 OutputCahce？

> ID：12595669
> 
> 赞同：1
> 
> 时间：2012-09-26T06:20:59.867
> 
> 标签：asp.net, asp.net-mvc-3, outputcache

让我们假设以下代码：

```
[OutputCache(Duration=60,VaryByCustom="Browser")]
public ActionResult CachableAction(string SomeParameter)
{
   return View();
} 
```

我知道`Output caching lets you store the output of an action method in memory on the Web server. For example, if the action method renders a view, the view page will be cached.`

**我不想在调试配置中缓存我的页面。**

`Release`仅在配置**中** 应用缓存需要哪些设置`Debug`？

我正在使用VS2010。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T06:34:21.453

对于属性，您可以只使用预处理器指令

```
#if !DEBUG
[OutputCache(Duration=60,VaryByCustom="Browser")]
#endif
public ActionResult CachableAction(string SomeParameter)
{
   return View();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T06:35:08.490

web.config.debug 文件仅在构建部署包时使用。例如，如果您在 Cassini 中本地运行您的站点，它将被完全忽略。因此，您可以尝试在 web.config 中禁用缓存：

```
<caching>
    <outputCache enableOutputCache="false" />
</caching> 
```

并在您的 web.config.release 中启用缓存。请注意，如果您不使用 Web 部署包功能，这些文件将被完全忽略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:29:39.100

这是我在我的控制器的测试项目中做的，我在下面这样做

```
[OutputCache(Duration = 10, VaryByParam = "ParamA;ParamB;")]
        public PartialViewResult CachData(string someparameter)
        {
            string returnvalue = string.Format("parameter :{0} date : {1}", someparameter, DateTime.Now.ToString());
            return PartialView("CachData", returnvalue);
        } 
```

在我看来

```
@model string 
<p>
    This is my cach Action</p>
@Html.Raw(Model) 
```

我想这会帮助你...

# wpf - 通过 ViewModel 绑定到 DependencyProperty 无效

> ID：12595672
> 
> 赞同：1
> 
> 时间：2012-09-26T06:21:26.403
> 
> 标签：wpf, mvvm, binding, dependency-properties, code-behind

我已经简化了我的问题（这意味着原理相似，但我不想将 int 转换为 string ...）：

**MainWindow.xaml：**

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:WpfApplication1="clr-namespace:WpfApplication1"
        Title="MainWindow" Height="500" Width="500">
    <Grid>

        <WpfApplication1:UserControl1 CurrentNumber="{Binding Path=TheSpecialNumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

    </Grid>
</Window> 
```

在主窗口中出现的是 UserControl1。用户控件有一个属性 Current Number。这个我想绑定属性TheSpecialNumber（ViewModel）。

**MainWindow.xaml.cs：**

```
namespace WpfApplication1
{
    public partial class MainWindow
    {
        private readonly ViewModel _viewModel;

        public MainWindow()
        {
            InitializeComponent();
            _viewModel = new ViewModel();
            DataContext = _viewModel;

            _viewModel.TheSpecialNumber = "8";
            _viewModel.UpdateTheSpecialNumberBinding();
        }
    }
} 
```

**ViewModel.cs：**

```
namespace WpfApplication1
{
    class ViewModel : INotifyPropertyChanged
    {
        public string TheSpecialNumber { get; set; }

        public event PropertyChangedEventHandler PropertyChanged;

        public void UpdateTheSpecialNumberBinding()
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("TheSpecialNumber"));
            }
        }
    }
} 
```

**用户控件1.xaml：**

```
<UserControl x:Class="WpfApplication1.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             Height="200" Width="300" Background="Aqua">
    <Grid Name="container">
        <ComboBox SelectedIndex="{Binding Path=CurrentNumberIndex, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <ComboBoxItem Height="20">0</ComboBoxItem>
            <ComboBoxItem Height="20">1</ComboBoxItem>
            <ComboBoxItem Height="20">2</ComboBoxItem>
            <ComboBoxItem Height="20">3</ComboBoxItem>
            <ComboBoxItem Height="20">4</ComboBoxItem>
            <ComboBoxItem Height="20">5</ComboBoxItem>
            <ComboBoxItem Height="20">6</ComboBoxItem>
            <ComboBoxItem Height="20">7</ComboBoxItem>
            <ComboBoxItem Height="20">8</ComboBoxItem>
            <ComboBoxItem Height="20">9</ComboBoxItem>
        </ComboBox>
    </Grid>
</UserControl> 
```

UserControl 是一个组合框。这有 10 个项目。我想始终显示与属性当前编号具有相同编号的项目。因此，绑定了Current Number Index。

**UserControl1.xaml.cs：**

```
using System;
using System.ComponentModel;
using System.Windows;

namespace WpfApplication1
{
    public partial class UserControl1 : INotifyPropertyChanged
    {
        public static readonly DependencyProperty CurrentNumberProperty = DependencyProperty.Register("CurrentNumber", typeof(string), typeof(UserControl1));

        public UserControl1()
        {
            InitializeComponent();
            container.DataContext = this;

            CurrentNumber = "5";
        }

        public string CurrentNumber
        {
            get { return (string)GetValue(CurrentNumberProperty); }
            set
            {
                SetValue(CurrentNumberProperty, value);
                OnPropertyChanged("CurrentNumberIndex");
            }
        }

        public int CurrentNumberIndex
        {
            get
            {
                return Convert.ToInt32(CurrentNumber);
            }
            set
            {
                CurrentNumber = Convert.ToString(value);
            }
        }

        #region Implementation of INotifyPropertyChanged

        public event PropertyChangedEventHandler PropertyChanged;

        private void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }

        #endregion Implementation of INotifyPropertyChanged
    }
} 
```

现在我的问题。如果我在 MainWindow（通过 ViewModel）设置 8，为什么只显示 ComboBox 项目的内容为 0？即使我在 Current Number 的设置器中设置断点，我也只会停止一次，即在 5 处，而不是在 8 处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:25:55.917

您可以通过手动设置 CurrentNumber=5 来“破坏” TheSpecialNumber 和 CurrentNumber 之间的绑定。删除此部分并重试。

编辑：好的，如果这不起作用，请尝试以下操作：

1.  将新的 PropertyChangedCallback 添加到您的 PropertyMetaData：

    ```
    public static readonly DependencyProperty CurrentNumberProperty = DependencyProperty.Register("CurrentNumber", typeof(string), typeof(UserControl1), new PropertyMetadata( new PropertyChangedCallback(CurrentNumberPropertyChanged))); 
    ```

2.  在此方法中设置 CurrentNumber，例如：

    ```
    private static void CurrentNumberPropertyChanged(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs dependencyPropertyChangedEventArgs)
    {
        UserControl1 uc1 = (UserControl1)dependencyObject;
        uc1.CurrentNumber = (string)dependencyPropertyChangedEventArgs.NewValue;
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:37:07.563

CurrentNumber 是 WPF 属性，这意味着如果 WPF 使用该属性，它将传递 CurrentNumber 的 getter/setter。

所以基本上当你设置 TheSpecialNumber 时，这部分不会被执行：

```
 SetValue(CurrentNumberProperty, value);
 OnPropertyChanged("CurrentNumberIndex"); 
```

将自己连接到 WPF 属性 UI 属性元数据中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:38:49.140

```
<ComboBox SelectedIndex="{Binding Path=CurrentNumberIndex, RelativeSource={RelativeSource Mode=Self}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/> 
```

在 SelectedIndex 的绑定中，绑定系统将在 UserControl DataContext 中查找 CurrentNumberIndex 属性，该属性是您的 ViewModel 并且它没有在那里找到该属性，以便将其工作集 RelativeSource 设置为 Self。我希望这将有所帮助。

# database - Cloudbees oracle外部数据库通过VPN

> ID：12595678
> 
> 赞同：1
> 
> 时间：2012-09-26T06:21:58.910
> 
> 标签：database, oracle, external, vpn, cloudbees

目前我们有 tomcat 6 webapp 和 oracle 数据库。数据库在server.xml中配置如下：

```
<Resource
name="jdbc/EbankWebConnection"
auth="Container"
type="oracle.jdbc.pool.OracleDataSource"
factory="oracle.jdbc.pool.OracleDataSourceFactory"
maxActive="100" maxIdle="30" maxWait="10000"
user="***" password="***" driverClassName="oracle.jdbc.OracleDriver"
url="jdbc:oracle:thin:@192.168.12.2:1521:prg11g"
validationQuery="select 1 from dual" /> 
```

注意，我们使用的是 oracle 连接池。是否可以将 tomcat webapp 托管到 CloudBees 并通过我们服务器上的 VPN 连接到 oracle db。关于连接池，DBCP 并非如此。我们需要以某种方式配置容器管理的 oracle 连接池。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:24:59.853

Cloudbees 容器不会将 Oracle 特定数据源作为 JNDI 资源提供，这需要自定义容器。您可以使用专用代码创建这样的池，作为使用 oracle jdbc 驱动程序类的应用程序的一部分，这主要取决于您的应用程序/框架允许设置数据源的灵活性。

计划很快为容器定制提供更多的灵活性，以便您可以设置一个 tomcat 服务器来提供这种容器管理的 Oracle 数据源，敬请期待！

关于通过 VPN 连接，目前尚无法实现。您必须让 cloudbees RUN@Cloud 实例通过标准网络连接访问您的数据库。如果您使用 RUN@Cloud “专用”服务器，一个选项是过滤传入 IP 以连接到您的数据库。如果您需要有关专用服务器定价的详细信息，请联系 sales@cloudbees.com。

更新：你应该考虑像 InterCloud for VPN 这样的解决方案

# java - 从 Visual C++ 代码调用时机器人事件未触发

> ID：12595685
> 
> 赞同：1
> 
> 时间：2012-09-26T06:22:35.123
> 
> 标签：java, visual-c++, awtrobot

我有一个在 2 个用户之间共享屏幕然后远程控制屏幕的项目。我有一个可视化的 c++ 代码，我通过它调用 Java 屏幕共享方法来共享屏幕。这工作得很好。

现在我正在尝试调用其他机器人事件，例如（mouseMove、keypress 等）。我能够从我的 c++ 代码中顺利调用 Java 方法（包含机器人事件调用），并且该函数总是返回 true 到我的 c++ 代码，从而显示成功执行，但是用Java方法编写的机器人事件没有被触发。谁能帮我找到正确的方向。我的代码如下：

从 C++ 代码：

```
 status=  m_pJVM->InvokeClassMethod(m_sccObj,"keyPress", 
                                "(D)V", NULL,
                                 keyCode);
   if (status)
    {
      GetLogger()->Log(_T("Successfull key Press"));
   }
    else
    {
      GetLogger()->Log(_T("Unsuccessfull key Press"));
    } 
```

在这里，我总是将“成功按键”作为控制台上的输出。

在Java方面，代码是：

```
public boolean keyPress(double key)
    {
        try
        {
            this.robot = new Robot();
            if(robot != null)
            {
            robot.delay(5000);
            robot.keyPress(java.awt.event.KeyEvent.VK_T);
            robot.keyPress(KeyEvent.VK_E);
            robot.keyPress(KeyEvent.VK_S);
            robot.keyPress(KeyEvent.VK_T);
            return true;
            }
            else
            {
               return false;
            }
        }
        catch(Exception e)
        {
          return false;
        }
    } 
```

谁能告诉我这里是否遗漏了任何东西。

谢谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:35:54.617

java 进程应该在可以访问`current desktop`.
检查它在什么凭据下启动。如果它通过服务运行 - 确保：

`Services.msc`> `[Your host service]`> `Log On`>`Allow service to interact with desktop` 被选中。

尽管您说它已经可以访问屏幕了-这可能**不是**问题。

# c# - 如何在 C# 中确定字典比较器的类型？

> ID：12595693
> 
> 赞同：1
> 
> 时间：2012-09-26T06:22:50.143
> 
> 标签：c#, dictionary, stringcomparer

我需要确定我在函数中收到的字典是否具有不区分大小写的比较器。

IE。不区分大小写的字典声明如下：

```
var myDict = new Dictionary<string, decimal>(StringComparer.OrdinalIgnoreCase); 
```

当我将字典接收到我的函数中时，我可以访问 .Comparer 属性并检查它的类型 - 但是我似乎得到的只是 -

```
System.Collections.Generic.EqualityComparer<string> 
```

如何确定正在使用的比较器是否为 StringComparer.OrdinalIgnoreCase？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T06:25:25.697

您应该检查值，而不是 StringComparer.OrdinalIgnoreCase 的类型。

```
myDict.Comparer == StringComparer.OrdinalIgnoreCase 
```

# drupal-6 - 指定词汇术语时，post 参数是什么？

> ID：12595698
> 
> 赞同：0
> 
> 时间：2012-09-26T06:23:12.413
> 
> 标签：drupal-6, drupal-taxonomy, drupal-services

我正在尝试通过休息服务器使用 iphone 应用程序创建一个 drupal 节点。我想将请求作为 json 发送到 drupal。

我添加了一个分类词汇表来对节点进行分类。创建节点时必须指定类别。

> **我的请求 url 是**
> drupal site/ep/node.json
> 
> **发布参数**
> node[title]=mysample&node[type]=story&node[body]=sample body&node[???]=myCategory1

我指定了标题、正文和类型....但是**指定词汇术语的参数名称是什么（即类别名称）？**

我尝试了 node[taxonomy]、node[term]、node[vocabulary]，但没有成功。请帮忙！

> 配置：
> Drupal 6.26
> REST 服务器 3.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:29:08.820

在请求 URL 中未指定 node.json 仅指定 node.and 使用 node[你创建的词汇术语][你选择的术语名称]；或使用 node[你创建的词汇术语][术语 id]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:35:41.727

node[taxonomy][***词汇术语 id*** ][tid]=***词汇术语 id***

代替***词汇术语 id***给出词汇术语的术语 id

如何获取术语ID？我做了一个类型 term 的自定义 drupal 视图，我只获取字段**term id**和**term**

然后我将视图内容发送到我的 iPhone 应用程序。当我选择一个特定的术语时，我也有术语 id。

# jquery - jQuery replaceWith() 可以做到这一点吗？

> ID：12595699
> 
> 赞同：0
> 
> 时间：2012-09-26T06:23:23.060
> 
> 标签：jquery

是否可以使用 jQuery replaceWith 来更改一卡车 id 以 TMBOBJ 开头的 div

```
<div id="TMBOBJ7DC931A601118D2" style=" position:absolute; top:40px; left:446px; width:150px; height:100px;  z-index:2;">
<a href="Untitled_1/imag000A.html" onclick="newWin('Untitled_1/imag000A.html',333,500);return false;" target="_blank">
<img src="Untitled_1/imag000.jpg" width=150 height=100 border=0>
</a>
</div>

<div id="TMBOBJ7DC931A60C7D2" style=" position:absolute; top:26px; left:52px; width:150px; height:100px;  z-index:3;">
<a href="Untitled_1/imag001A.html" onclick="newWin('Untitled_1/imag001A.html',333,500);return false;" target="_blank">
<img src="Untitled_1/imag001.jpg" width=150 height=100 border=0>
</a>
</div> 
```

...进入这些？

```
<div id="TMBOBJ7DC931A601118D2" style=" position:absolute; top:40px; left:446px;    width:150px; height:100px;  z-index:2;">
<a class="new" href="Untitled_1/imag000A.jpg">
<img src="Untitled_1/imag000.jpg" width=150 height=100 border=0>
</a>
</div>

<div id="TMBOBJ7DC931A60C7D2" style=" position:absolute; top:26px; left:52px; width:150px; height:100px;  z-index:3;">
<a class="new" href="Untitled_1/imag001A.jpg">
<img src="Untitled_1/imag001.jpg" width=150 height=100 border=0>
</a>
</div> 
```

我什至无法通过仅将 .html 更改为 .jpg 一个。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:26:37.600

您可以尝试[使用](http://jsfiddle.net/sushanth009/d3BAB/http://)此选择器来获取以

```
$('[id^=TMBOBJ]')  // Get all elements with id 's that start with TMBOBJ

$('[id^=TMBOBJ]').each(function() {

     var $a = $(this).find('a');
     $a.attr('href' , $a.attr('href').replace('html', 'jpg'));
     $a.removeAttr('onclick');
     $a.removeAttr('target');

}); 
```

检查小提琴

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:28:26.557

您好尝试使用此代码：

```
$('div[id^=TMBOBJ]').each( function (index, element) {
    var href = $(element).children('a').attr('href');
    $(element).children('a').attr('href', href.replace('.html', '.jpg')).addClass('new');
}); 
```

# java - JPedal - 在 PDF 中的某个点突出显示单词

> ID：12595703
> 
> 赞同：2
> 
> 时间：2012-09-26T06:23:41.007
> 
> 标签：java, pdf, jpedal

我想实现一个功能，允许用户使用 JPedal 库双击以突出显示 PDF 文档中的单词。如果我能得到一个单词的边界矩形并查看 MouseEvent 位置是否在其中，这将是微不足道的；以下代码段演示了如何突出显示区域：

```
private void highlightText() {
    Rectangle highlightRectangle = new Rectangle(firstPoint.x, firstPoint.y,
            secondPoint.x - firstPoint.x, secondPoint.y - firstPoint.y);
    pdfDecoder.getTextLines().addHighlights(new Rectangle[]{highlightRectangle}, false, currentPage);
    pdfDecoder.repaint();
} 
```

但是，我只能在文档中找到明文提取示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:06:33.597

在查看了 Mark 的示例后，我设法让它发挥作用。有一些怪癖，所以我将解释它是如何工作的，以防它帮助别人。关键方法是[`extractTextAsWordlist`](http://www.jpedal.org/javadoc/org/jpedal/grouping/PdfGroupingAlgorithms.html#extractTextAsWordlist%28int,%20int,%20int,%20int,%20int,%20boolean,%20java.lang.String%29)，它在给定要从中提取的区域时返回`List<String>`表单的 a 。`{word1, w1_x1, w1_y1, w1_x2, w1_y2, word2, w2_x1, ...}`下面列出了分步说明。

首先，您需要将`MouseEvent`的 Component/screen 坐标转换为 PDF 页面坐标并更正缩放：

```
/**
 * Transforms Component coordinates to page coordinates, correcting for 
 * scaling and panning.
 * 
 * @param x Component x-coordinate
 * @param y Component y-coordinate
 * @return Point on the PDF page
 */
private Point getPageCoordinates(int x, int y) {
    float scaling = pdfDecoder.getScaling();
    int x_offset = ((pdfDecoder.getWidth() - pdfDecoder.getPDFWidth()) / 2); 
    int y_offset = pdfDecoder.getPDFHeight();
    int correctedX = (int)((x - x_offset + viewportOffset.x) / scaling);
    int correctedY = (int)((y_offset - (y + viewportOffset.y))  / scaling);
    return new Point(correctedX, correctedY);
} 
```

接下来，创建一个框来扫描文本。我选择将其设为页面宽度和垂直 +/- 20 个页面单位（这是一个相当随意的数字），以 为中心`MouseEvent`：

```
/**
 * Scans for all the words located with in a box the width of the page and 
 * 40 points high, centered at the supplied point.
 * 
 * @param p Point to centre the scan box around
 * @return  A List of words within the scan box
 * @throws PdfException
 */
private List<String> scanForWords(Point p) throws PdfException {
    List<String> result = Collections.emptyList();
    if (pdfDecoder.getlastPageDecoded() > 0) {
        PdfGroupingAlgorithms currentGrouping = pdfDecoder.getGroupingObject();
        PdfPageData currentPageData = pdfDecoder.getPdfPageData();
        int x1 = currentPageData.getMediaBoxX(currentPage);
        int x2 = currentPageData.getMediaBoxWidth(currentPage) + x1;
        int y1 = p.y + 20;
        int y2 = p.y - 20;
        result = currentGrouping.extractTextAsWordlist(x1, y1, x2, y2, currentPage, true, "");
    }
    return result;
} 
```

然后我把它解析成一个`Rectangle`s序列：

```
/**
 * Parse a String sequence of:
 *   {word1, w1_x1, w1_y1, w1_x2, w1_y2, word2, w2_x1, ...}
 *   
 * Into a sequence of Rectangles.
 * 
 * @param wordList Word list sequence to parse
 * @return A List of Rectangles
 */
private List<Rectangle> parseWordBounds(List<String> wordList) {
    List<Rectangle> wordBounds = new LinkedList<Rectangle>();
    Iterator<String> wordListIterator = wordList.iterator();
    while(wordListIterator.hasNext()) {
        // sequences are: {word, x1, y1, x2, y2}  
        wordListIterator.next(); // skip the word
        int x1 = (int) Float.parseFloat(wordListIterator.next());
        int y1 = (int) Float.parseFloat(wordListIterator.next());
        int x2 = (int) Float.parseFloat(wordListIterator.next());
        int y2 = (int) Float.parseFloat(wordListIterator.next());
        wordBounds.add(new Rectangle(x1, y2, x2 - x1, y1 - y2)); // in page, not screen coordinates
    }
    return wordBounds;
} 
```

然后确定`Rectangle`属于哪个`MouseEvent`：

```
/**
 * Finds the bounding Rectangle of a word located at a Point.
 * 
 * @param p Point to find word bounds
 * @param wordBounds List of word boundaries to search
 * @return A Rectangle that bounds a word and contains a point, or null if 
 *         there is no word located at the point
 */
private Rectangle findWordBoundsAtPoint(Point p, List<Rectangle> wordBounds) {
    Rectangle result = null;
    for (Rectangle wordBound : wordBounds) {
        if (wordBound.contains(p)) {
            result = wordBound;
            break;
        }
    }
    return result;
} 
```

出于某种原因，仅将这个 Rectangle 传递给突出显示方法是行不通的。经过一番修修补补，我发现`Rectangle`在每一侧缩小一点解决了这个问题：

```
/**
 * Contracts a Rectangle to enable it to be highlighted.
 * 
 * @return A contracted Highlight Rectangle
 */
private Rectangle contractHighlight(Rectangle highlight){
    int x = highlight.x + 1;
    int y = highlight.y + 1;
    int width = highlight.width -2;
    int height = highlight.height - 2;
    return new Rectangle(x, y, width, height);
} 
```

然后我只是将它传递给这个方法来添加亮点：

```
/**
 * Highlights text on the document
 */
private void highlightText(Rectangle highlightRectangle) {
    pdfDecoder.getTextLines().addHighlights(new Rectangle[]{highlightRectangle}, false, currentPage);
    pdfDecoder.repaint();
} 
```

最后，所有上述调用都打包到这个方便的方法中：

```
/**
 * Highlights the word at the given point.
 * 
 * @param p Point where word is located
 */
private void highlightWordAtPoint(Point p) {
    try {
        Rectangle wordBounds = findWordBoundsAtPoint(p, parseWordBounds(scanForWords(p)));
        if (wordBounds != null) {
            highlightText(contractHighlight(wordBounds));
        }
    } catch (PdfException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

# django - 如何将产品添加到购物车？

> ID：12595708
> 
> 赞同：0
> 
> 时间：2012-09-26T06:24:01.720
> 
> 标签：django, django-models

如何将此模型中的产品添加到购物车：[https](https://github.com/bmentges/django-cart) ://github.com/bmentges/django-cart 如何运行方法**add_to_cart**？在模板中，我会有“添加到购物车”按钮。谢谢

```
from django.db import models
from sorl.thumbnail import ImageField

class Product(models.Model):
    name = models.CharField(max_length=50)
    slug = models.SlugField()
    price = models.DecimalField(max_digits=5, decimal_places=2)
    desc = models.TextField()
    image = ImageField(upload_to='images')

    class Meta:
        verbose_name = _('Product')
        verbose_name_plural = _('Products')

    def __unicode__(self):
        return self.name 
```

django-cart 的基本用法是什么`quantity`以及来自： [https](https://github.com/bmentges/django-cart) ://github.com/bmentges/django-cart ？`unit_price`

```
def add_to_cart(request, product_id, quantity):
    product = Product.objects.get(id=product_id)
    cart = Cart(request)
    cart.add(product, product.unit_price, quantity) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:09:56.067

> django-cart 的基本用法中的数量和单位价格是多少：

数量是您的订单项中该产品的数量。

如果您说 3，则表示您的购物车中有 3 个“产品”。这通常与`input type='text'`旁边带有添加到购物车按钮的字段相关。

`unit_price`是您产品的单个单位的价格。它不会自动从产品中提取，因为它可能与产品的实际价格有很大不同。

例如，可能有 20% 的销售额；该系统允许您在购物车中设置与产品价格不同的价格。

# java - 通过 JDBC 创建的 SQL Server 全局临时表不持久

> ID：12595709
> 
> 赞同：3
> 
> 时间：2012-09-26T06:24:06.043
> 
> 标签：java, sql-server, jdbc

有没有办法在我的连接关闭后使用 SQL Server 上的 JDBC 创建一个全局临时表？

我发现如果我使用 JTDS JDBC 驱动程序创建一个全局临时表，它在我的连接关闭后不存在：

```
String sql = "CREATE TABLE ##foobar([name] [nvarchar](50) NOT NULL)";
Statement stmt = connection.getConnection().createStatement();
stmt.execute(sql); 
```

我想要的是一个对每个人都可见的表，并且将在连接之间持续存在，直到服务器重新启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:17:05.440

您可以使用永久表、视图和登录触发器创建与 Oracle 样式临时表具有*相似行为的内容：*

```
create table dbo._Data (
    Session int not null constraint DF__Data DEFAULT (@@SPID),
    ColumnA int not null,
    ColumnB int not null
)
go
create view dbo.Data (
    ColumnA,
    ColumnB
)
with schemabinding
as
    select
        ColumnA,
        ColumnB
    from
        dbo._Data
    where
        Session = @@SPID
with check option
go
create trigger T_Data_Logon_Cleardown
ON ALL SERVER
FOR LOGON
AS
    delete from Database.dbo.Data
go 
```

然后，您对`dbo.Data`“表”执行所有操作。

This has the characteristics that each session's rows are isolated, and if you disconnect and reconnect, the "table" will be empty.

What you don't get is an automated clearing of rows on transaction boundaries (if that's your preferred option - you'll have to do a manual delete). Nor is it exactly similar, since rows will remain in the table until a new session claims an old session ID (so cleanup occurs later, if at all). But from the client perspective, it may be "close enough".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T21:05:42.263

Local temporary tables are visible only to their creators during the same connection to an instance of SQL Server as when the tables were first created or referenced. Local temporary tables are deleted after the user disconnects from the instance of SQL Server. Global temporary tables are visible to any user and any connection after they are created, and are deleted when all all connections that have referenced them have closed (see the [MSDN docs](http://msdn.microsoft.com/en-us/library/ms177399%28v=sql.105%29.aspx))

In this case what I need is a Tempdb permanent tables that is visible to everyone, and is deleted when the server is restarted:

```
CREATE TABLE tempdb..foobar([name] [nvarchar](50) NOT NULL) 
```

# hibernate - ROLE-PERMISSION 场景中的多对一或多对多映射

> ID：12595714
> 
> 赞同：0
> 
> 时间：2012-09-26T06:24:43.150
> 
> 标签：hibernate, orm, many-to-many, one-to-many, hibernate-mapping

我是 Hibernate 的新手，只是通过几个示例

在经历了几个样本之后，我仍然对确定表之间的关系感到困惑。

考虑场景，我有角色和权限分配给它

```
Role              Permission
------------------------------------------------------
ROLE_ADMIN    =   Create, Update, Delete, View
ROLE_MANAGER  =   Update, View
ROLE_VIEWER   =   View 
```

在这种情况下，我创建了这样的表，

```
Role
-----
role_id(PK) role_name

Permission  
-----------
permission_id(PK) permission_name

Role_Permission
-----------------
role_permission_id   role_id(FK)    permission_id(FK) 
```

现在，在这种情况下，1个角色可以有很多权限，很多权限可以属于一个角色，所以我认为考虑到这个数字是一对多的关系，

```
Role_Permission
-----------------
role_permission_id   role_id(FK)    permission_id(FK)
----------------------------------------------------------
1--------------------1---------------1     
2--------------------1---------------2     
3--------------------1---------------3     
4--------------------2---------------1     
5--------------------2---------------3 
```

具有 Id 1 的角色映射到具有 Id 为 1、2、3 的许多权限。并且像 1、2、3 这样的许多权限属于具有 id 为 1 的一个角色

所以我认为这是一对多

* * *

我也认为它也属于Many-To-Many，考虑到我脑海中的这张图片，

```
role_permission_id   role_id(FK)    permission_id(FK)
----------------------------------------------------------
1--------------------1---------------1     
2--------------------1---------------2     
3--------------------1---------------3     
4--------------------2---------------1     
5--------------------2---------------3 
```

具有 Id 1、2 的角色映射到许多具有 Id 为 1、2、3 的权限。许多权限如 1、2、3 属于许多具有 id 为 1 和 2 的角色

所以我认为这是多对多

* * *

我也认为它属于多对一，

```
role_permission_id   role_id(FK)    permission_id(FK)
----------------------------------------------------------
1--------------------1---------------1     
2--------------------1---------------2     
3--------------------1---------------3     
4--------------------2---------------1     
5--------------------2---------------3 
```

ID 为 1、2 的角色映射到 ID 为 1 的权限。 ID 为 1 的权限属于多个 ID 为 1 和 2 的角色

所以我认为它是多对一的

我真的很困惑如何判断映射，有人可以解决我的疑问。另外，我想知道拇指规则在什么基础上需要决定映射。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:27:52.653

```
在您的情况下，似乎最好选择多对多关系。所以您将拥有权限、角色表和垃圾表 Permission_Role 表。
试试这个教程：

  [1]：http://www.mkyong.com/hibernate/hibernate-many-to-many-relationship-example/

你是从数据库创建它吗？我可以建议简单的映射方法...
```

# objective-c - 在 Lion 中获取列表视图的完整路径

> ID：12595717
> 
> 赞同：1
> 
> 时间：2012-09-26T06:25:09.947
> 
> 标签：objective-c, osx-lion, finder, simbl

[我有在获取 TFENode in Lion 的完整路径中](https://stackoverflow.com/questions/8861503/getting-the-full-path-of-a-tfenode-in-lion)提出的相同问题。

我对Objective-c知之甚少，所以我不太清楚答案。我使用[EasySIMBL](https://github.com/norio-nomura/EasySIMBL)拦截Finder进程，然后使用[Les Nie的方法](https://stackoverflow.com/questions/1294335/how-to-write-os-x-finder-plugin)解决图标视图中的图标叠加，但是我无法在列表视图中获取完整路径。有人可以告诉我如何使用Objective-C实现以下目标：

> 从 TFENode 中，您可以获得一个 OpaqueNodeRef，并将其与 FINode 的 nodeFromNodeRef: 方法一起使用。之后，您可以使用 FINode 的 previewItemURL 方法获取项目的 NSURL。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:55:45.853

```
NSURL *url = [[NSClassFromString(@"FINode") nodeFromNodeRef:[(TNodeIconAndNameCell *)self node ]->fNodeRef] previewItemURL];

NSString *path = [url path]; 
```

在这里找到答案[我想帮助 Finder Overlay FullPath！（列表叠加）](https://stackoverflow.com/questions/11999113) 对我有用

# dotnetnuke - 如何从所有模块中完全删除最小化按钮

> ID：12595719
> 
> 赞同：1
> 
> 时间：2012-09-26T06:25:19.253
> 
> 标签：dotnetnuke, dotnetnuke-module

我已经构建了一个容器，其中删除了所有可见性标签，并编译了容器并将其上传到我的站点。但我仍然得到最小化按钮。我不知道可能出了什么问题。这是我的示例代码。

```
<%@ Control Language="C#" AutoEventWireup="false" Explicit="True"    Inherits="DotNetNuke.UI.Containers.Container" %>
<%@ Register TagPrefix="dnn" TagName="ACTIONS" Src="~/Admin/Containers/SolPartActions.ascx" %>
<%@ Register TagPrefix="dnn" TagName="ICON" Src="~/Admin/Containers/Icon.ascx" %>
<%@ Register TagPrefix="dnn" TagName="TITLE" Src="~/Admin/Containers/Title.ascx" %>
<%@ Register TagPrefix="dnn" TagName="ACTIONBUTTON"  Src="~/Admin/Containers/ActionButton.ascx" %>
<%--@ Register TagPrefix="dnn" TagName="VISIBILITY" Src="~/Admin/Containers/Visibility.ascx" --%>
<div class="c_container">
<div class="c_content_inner">

        <div class="c_actions">
            <dnn:ACTIONS runat="server" id="dnnACTIONS"  ProviderName="DNNMenuNavigationProvider" ExpandDepth="1" PopulateNodesFromClient="True" />
        </div>
        <div class="c_icon">            
            <dnn:ICON runat="server" id="dnnICON"  />
        </div>

        <div id="ContentPane" runat="server">

        </div>

    </div>
    <div class="c_footer">
        <dnn:ACTIONBUTTON runat="server" id="dnnACTIONBUTTON1"  CommandName="AddContent.Action" DisplayIcon="True" DisplayLink="True" />
        <dnn:ACTIONBUTTON runat="server" id="dnnACTIONBUTTON2"  CommandName="SyndicateModule.Action" DisplayIcon="True" DisplayLink="false" />
        <dnn:ACTIONBUTTON runat="server" id="dnnACTIONBUTTON4"  CommandName="ModuleSettings.Action" DisplayIcon="True" DisplayLink="false" />
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:24:09.390

在容器方面，您的方法是正确的。正如您所做的那样，您只需从容器中删除可见性控件。我的猜测是 DNN 未配置为使用该容器。要更改用于门户的容器，请转到管理 -> 站点设置 -> 外观，然后将容器的选择更改为修改后的容器。

如果不行，也可以通过模块设置在模块级别设置容器，也可以在皮肤中指定。

祝你好运！

# c#-4.0 - 使用内存映射文件时出错

> ID：12595727
> 
> 赞同：1
> 
> 时间：2012-09-26T06:25:58.460
> 
> 标签：c#-4.0

我有两个EXE。父级 EXE 和子级 EXE。我的父 EXE 正在使用函数“MemoryMappedFile.CreateFromFile(C:\file1.txt,FileMode.Open,"Map1")”在 file1 上创建内存映射文件。映射内存的名称是 Map1。现在我正在尝试使用函数“MemoryMappedFile.OpenExisting("Map1")”访问 Child Exe 中相同的映射内存“Map1”。

执行此操作时出现错误“无法找到指定的文件”。

我应该怎么做才能避免此错误并在子 exe 中使用 Map1。

我正在使用*VS2010*。

# android - 在android的数组列表中上下滚动时隐藏和显示Header

> ID：12595728
> 
> 赞同：3
> 
> 时间：2012-09-26T06:26:01.440
> 
> 标签：android, arraylist

我正在尝试在android中实现以下要求。我有两个列表适配器。一个是显示标题内容，另一个是在每个标题项下显示包含一些数据的数组列表。eg:-> Header1 列表项 列表项 Header2 列表项 列表项 列表项 Header3 列表项 列表项 列表项 列表项

当您向上滚动 Header2 时，两个应该合并 Header1，当您向上滚动时，它应该以可扩展格式展开标题部分，如上所示。我已经浏览了一些示例，但我无法找到任何适当的解决方案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-23T17:41:01.037

用这个

```
public void main (husp); 
```

# c# - 在 C# 中的 linq 中不相等

> ID：12595735
> 
> 赞同：0
> 
> 时间：2012-09-26T06:26:22.267
> 
> 标签：c#, linq

我在我的项目中使用 Linq。

我想要所有来自 viewTeachers 的教师，其中 Mailcode 不等于 20。

我的代码是

```
var startWithFullName = from v in Db.viewTeachers
                                            where v.FullName.StartsWith(prefix) && !v.MailCode.Equals(20)
                                            orderby v.FullName
                                            select new { v.ID, v.FullName };

                    foreach (var teacher in startWithFullName)
                    {
                        teacherTable.Rows.Add(teacher.FullName, teacher.ID);
                    } 
```

我已经写了

```
!v.MailCode.Equals(20) 
```

但不确定它是否正确。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T06:27:42.750

您可以简单地将您的条件写为：

```
v.MailCode != 20 
```

所以你的 where 子句应该是：

```
where v.FullName.StartsWith(prefix) && v.MailCode != 20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:30:17.647

条件可以写成`!= 20`..

像这样的东西：

```
var startWithFullName = from v in Db.viewTeachers 
          where v.FullName.StartsWith(prefix) && v.MailCode != 20
          orderby v.FullName 
          select new 
              { 
                 v.ID, 
                 v.FullName 
               }; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-26T06:37:23.150

它不会编译。等于在连接中使用，在 where 条件下应该使用 !=。希望这能消除您的疑虑。

# c# - Metro风格应用程序中的文本到路径

> ID：12595736
> 
> 赞同：1
> 
> 时间：2012-09-26T06:26:26.643
> 
> 标签：c#, xaml, microsoft-metro

我可以在 Metro 风格应用程序中将文本转换为路径吗？我找到[了这个](http://msdn.microsoft.com/en-us/library/ms743610%28v=vs.90%29.aspx)。但它似乎`FormattedText`不适用于地铁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:34:56.710

为什么你需要？你的目的是什么？您可以按如下方式使用 FolderPicker。然后您将从 FolderPicker 对象中获取文件路径。

```
FolderPicker saveFolder = new FolderPicker();                
saveFolder.SuggestedStartLocation = PickerLocationId.Desktop;                
saveFolder.FileTypeFilter.Add("*");
StorageFolder storagefolderSave = await saveFolder.PickSingleFolderAsync(); 
```

如果上面的代码与您的需要不匹配，请向我展示您的代码的某些部分和您的目的。我希望这能帮到您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:18:28.120

我不相信您可以在 Metro 风格应用程序的代码中执行此操作，您可以使用[Inkscape](http://inkscape.org/)之类的东西手动创建路径（Inkscape 可以保存到 xaml 路径），您可以使用它来代替文本。

# android - 在Android中检测何时关闭漫游

> ID：12595744
> 
> 赞同：9
> 
> 时间：2012-09-26T06:27:08.150
> 
> 标签：android, broadcastreceiver, roaming

我创建了一个`BroadcastReceiver`监听`CONNECTIVITY_CHANGE`事件的。现在，我只是打印出`Intent`调用 the`BroadcastReceiver`及其附加功能的动作。我在马尼拉的办公室使用测试电话，SIM 卡来自丹麦。当`onReceive()`被调用时，这就是在 LogCat 中打印出来的内容：

```
action: android.net.conn.CONNECTIVITY_CHANGE
key: extraInfo, value: data.tre.dk
key: htcCurrentActiveNetwork, value: null
key: networkInfo, value: null
key: reason, value: roamingOn
key: noConnectivity, value: null
key: inetCondition, value: null 
```

我需要知道`reason`漫游结束时的价值是多少——可以`roamingOff`通过猜测来确定，但我不能确定，除非我去丹麦。这是因为我需要在漫游服务关闭时执行一项任务，并且我从 LogCat 注意到`CONNECTIVITY_CHANGE`触发事件的原因不是切换漫游模式。或者有没有更好的方法来检测何时关闭漫游？

*广播接收器的代码：*

```
public void onReceive(Context context, Intent intent) {
    Log.d(This.LOGTAG, "action: " + intent.getAction());
    Bundle extras = intent.getExtras();
    for (String key : extras.keySet()) {
        Log.d(This.LOGTAG, "key: " + key + ", value: " + extras.getString(key));
    }
} 
```

*清单条目：*

```
<receiver android:name=".listener.RoamingListener">
    <intent-filter>
        <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
    </intent-filter>
</receiver> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T05:28:33.190

网络漫游和数据漫游是有区别的。

通常，网络漫游允许您的电信公司在您在国外时通过第三方卫星，以便您可以与他们的服务保持联系。即使您已经告诉您的电信公司您要订阅网络漫游，它也不会被激活，直到您真正开始通过第三方电信卫星连接，并且只有在您实际出国时才会发生这种情况。

数据漫游只是在您处于网络漫游模式时允许/禁止您的设备使用移动数据。它更依赖于设备，您可以在手机的“设置”应用中轻松打开或关闭它。

简而言之，如果要检测网络漫游，请使用`TelephonyManager.isNetworkRoaming()`. 如果要检查数据漫游是打开还是关闭，请使用`Settings.Secure.getInt(getContentResolver(), Settings.Secure.DATA_ROAMING)`.

重要提示：我没有亲自测试过以下场景，我不确定`isNetworkRoaming()`会返回什么值。

1.  您没有告诉您的家庭电信公司打开网络漫游，但是当您到达其他国家/地区时，手机开始检测其他电信公司网络。
2.  在方案 1 之后，您的手机会要求您选择要连接到哪个检测到的电信网络。您选择一个，电话会尝试连接。我不知道`isNetworkRoaming()`这里会返回什么值，因为您一开始没有订阅网络漫游。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:43:14.030

您可以简单地使用此行来检测漫游状态：

```
Settings.Secure.getInt(getContentResolver(), Settings.Secure.DATA_ROAMING) 
```

这不需要任何特殊的权限或接收者。

[来源](http://developer.android.com/reference/android/provider/Settings.Secure.html#DATA_ROAMING)

# json - 从 URL 加载图像并将其添加到列表视图

> ID：12595746
> 
> 赞同：3
> 
> 时间：2012-09-26T06:27:14.873
> 
> 标签：json, android-layout, listadapter, simpleadapter, image-loading

现在我正在处理一个 android 项目，我有一个列表视图，该列表视图通过 JSON 类从 Google API 获取一些结果。现在我正在尝试通过返回 URL 的 TAG_ICON 变量获取一些图像，并且我直接将 URL 提供给列表适配器，但是在运行我的项目时，我在图像视图布局中没有得到任何图像，请帮我解决这个问题这是我的代码

```
public class MyListActivity extends ListActivity {

    // JSON Node names
                private static final String TAG_CONTACTS = "results";
                private static final String TAG_ID = "id";
                private static final String TAG_NAME = "name";
                private static final String TAG_GENDER = "rating";
                private static final String TAG_REFERENCE = "reference";
                private static final String TAG_ICON = "icon";

    // contacts JSONArray
    JSONArray result = null;

    String url;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // url to make request

        Intent in = getIntent();
         String location = in.getStringExtra("TAG_LOCATION");
         String type = in.getStringExtra("TAG_TYPE");
        url = "https://maps.googleapis.com/maps/api/place/textsearch/json?query="+type+"+in+"+location+"&sensor=true&key=AIzaSyD38pak_katUfSR92WE2_O2b9y0JSp5htA";
        //}

    new LoadData().execute();

    }

class LoadData extends AsyncTask<String, String, String>
    { 

    // Hashmap for ListView
        ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();
    protected String doInBackground(String... args) {

        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();
        // getting JSON string from URL

        JSONObject json = jParser.getJSONFromUrl(url);
        RatingBar myratingbar = (RatingBar)findViewById(R.id.ratingbar);

        try {
            // Getting Array of Contacts
            result = json.getJSONArray(TAG_CONTACTS);
            // looping through All Contacts
            for(int i = 0; i < result.length(); i++){
                JSONObject c = result.getJSONObject(i);

                // Storing each json item in variable
                String id = c.getString(TAG_ID);
                String name = c.getString(TAG_NAME);
                String icon = c.getString(TAG_ICON);

            // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_ID, id);
                map.put(TAG_NAME, name);
                map.put(TAG_ICON, icon);

                // adding HashList to ArrayList
                contactList.add(map);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }
        return null;
            }    
        protected void onPostExecute(String file_url) {

        /**
         * Updating parsed JSON data into ListView
         * */
        ListAdapter adapter = new SimpleAdapter(MyListActivity.this, contactList,
                R.layout.listview_item_row,
                new String[] {TAG_ICON,TAG_NAME}, new int[] {
                        R.id.imgIcon,R.id.txtTitle});

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView();

        // Launching new screen on Selecting Single ListItem
        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                // Starting new intent
                Intent in = new Intent(getApplicationContext(), ProfileViewActivity.class);
                startActivity(in);

            }
        });

        }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:48:52.617

使用自定义 webview 元素并在您的 java 文件中设置 url。

```
WebView webview = (WebView)findViewById(R.id.webview);
webview.getSettings().setJavaScriptEnabled(true);
webview.loadUrl(getString(R.URL.myurl)); 
```

# c - 如何在c中比较两个无符号整数（uint8_t）

> ID：12595748
> 
> 赞同：1
> 
> 时间：2012-09-26T06:27:19.053
> 
> 标签：c, pointers, compare, unsigned-integer

我的程序中有两个 uint8_t 指针，我想比较它们的值。我没有处理无符号整数的好主意。这是我的代码

```
static void bacast_signed_message()
{
  uint8_t *M = malloc(MAX_M_LEN*sizeof(uint8_t));//uint8_t M[MAX_M_LEN];//uint8_t *M;
  int M_len = MAX_M_LEN;;

  uint8_t *C = malloc((2*KEYDIGITS*NN_DIGIT_LEN + 1 + MAX_M_LEN + HMAC_LEN)*sizeof(uint8_t));   
  int C_len; 
  //uint8_t C[2*KEYDIGITS*NN_DIGIT_LEN + 1 + MAX_M_LEN + HMAC_LEN]; 

  uint8_t *dM = malloc(MAX_M_LEN*sizeof(uint8_t));  //uint8_t dM[MAX_M_LEN];
  int dM_len = MAX_M_LEN;

  random_data(M, MAX_M_LEN);

  printf("C before encrypt %p\n",*C);
  printf("M before encrypt %p\n",*M);
  printf("dM before encrypt %p\n",*dM);

  C_len = encrypt(C, (2*KEYDIGITS*NN_DIGIT_LEN + 1 + M_len + HMAC_LEN), M, M_len, &pbkey_alice);
  //encrypt(uint8_t *C, int C_len, uint8_t *M, int M_len, Point *PublicKey);

  printf("C after encrypt %p\n",*C);
  printf("M after encrypt %p\n",*M);
  printf("dM after encrypt %p\n",*dM);

  dM_len = decrypt(dM, dM_len, C, C_len, prKey_alice);   
  //decrypt(uint8_t *M, int M_len, uint8_t *C, int C_len, NN_DIGIT *d);

  printf("C after decrypt %p\n",*C);
  printf("M after decrypt %p\n",*M);
  printf("dM after decrypt %p\n",*dM);

  printf("C_len = %i , M_len = %i\n",C_len,M_len);

  if (dM == M){printf("Works\n");}
  else{printf("Not Works\n");}
} 
```

这是我得到的输出

```
C before encrypt 0x40
M before encrypt 0x28
dM before encrypt 0x70
C after encrypt 0x4
M after encrypt 0x28
dM after encrypt 0x70
C after decrypt 0x4
M after decrypt 0x28
dM after decrypt 0x28
C_len = 102 , M_len = 41
Not Works 
```

如果我更改了 private_key（没有更改公钥），那么它看起来像这样

```
C before encrypt 0x40
M before encrypt 0x28
dM before encrypt 0x70
C after encrypt 0x4
M after encrypt 0x28
dM after encrypt 0x70
C after decrypt 0x4
M after decrypt 0x28
dM after decrypt 0x70
C_len = 102 , M_len = 41
Not Works 
```

这意味着 dM 没有改变。但我不确定这一点。如果我使用 %u 而不是 %p 它会给我完全不同的答案（它说如果我们使用 %u 它会转换为十进制）。请给我一些建议，并告诉我这有什么问题。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:38:54.500

有用于打印“stdint.h”类型的特定宏。例如：

```
#include <inttypes.h>

...
uint8_t u8 = 5;
printf("%"PRIu8, u8); // unsigned 
printf("%"PRIx8, u8); // hexadecimal 
```

因此你应该改变例如：

```
printf("C after decrypt %p\n",*C); 
```

到

```
printf("C after decrypt %"PRIu8"\n",*C); 
```

请注意，这`%p`是用于打印指针（地址），而不是指向的值。而且由于您取消引用`C`，您可能没有得到您想要的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T07:16:48.327

# 理解您的问题的可能方法

您的代码`if (dM == M)`当前比较*指针*。因此，您当前正在检查两个指针​​是否指示相同的内存块。

您的问题标题表明您想比较单个数字。毕竟， an`uint8_t`只是 0 - 255 范围内的单个数字。如果您有指向此类数字的指针，则必须*取消引用*它们才能获得实际数字，例如`if (*dM == *M)`.

但是您的代码表明您实际上想要比较内存区域。取消引用指向数组的指针与访问数组的第一个元素相同（即与 相同`if (dM[0] == M[0])`），这可能不是您想要的。

# 比较内存区域

您可以使用[`memcmp`](http://linux.die.net/man/3/memcmp)来比较内存区域的内容：

```
if (dM_len == M_len && memcmp(dM, M, dM_len) == 0) 
```

这意味着“如果长度相同，并且两个内存区域的内容也相同”。如果 的结果`memcmp`不为零，则其符号提供关于哪个值被认为更大的信息。

# 印刷

请注意，`%p`in 您的`printf`调用可能是错误的：`%p`is for printing *pointers*，但是当您在函数调用中取消引用它们时，您实际上是在打印*values*。所以`%u`更合适。如果要打印 eg 的内容，`M`则必须使用如下循环：

```
for (i = 0; i != M_len; ++i) {
  if (i%32 == 0 && i != 0) printf("\n"); /* wrap lines */
  printf("%02x", M[i]);
}
printf("\n"); 
```

这将打印数据的十六进制表示，每行 32 个字节（= 64 个十六进制数字）。该`%02x`格式指示`printf`始终为每个字节使用两位数字，并根据需要填充零。

# html - background-size 属性在 IE 8 中不起作用

> ID：12595749
> 
> 赞同：1
> 
> 时间：2012-09-26T06:27:29.067
> 
> 标签：html, css, internet-explorer-8

IE-8 不支持属性 background-size:cover; 任何知道如何在 IE-8 中实现此属性的人！

寻找 IE-8 hack 或 IE-8 的 HTML5 技巧 ;) 在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:33:41.607

有一个 IE 过滤器，适用于 IE 5.5+，您可以应用它：

```
 filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='images/logo.gif',
sizingMethod='scale');

-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='images/logo.gif',
sizingMethod='scale')"; 
```

但是，这会缩放整个图像以适合分配的区域。因此，如果您使用精灵，这可能会导致问题。

规范：[AlphaImageLoader 过滤器@microsoft](http://msdn.microsoft.com/en-us/library/ms532969%28v=vs.85%29.aspx)

来源：[堆栈溢出](https://stackoverflow.com/a/6353808/1577396)

# java - 如何在javamail api中将文件作为附件上传？

> ID：12595751
> 
> 赞同：1
> 
> 时间：2012-09-26T06:27:39.960
> 
> 标签：java, email-attachments

嗨，我是 JavaMail 的新手。

我想上传一个文件作为附件。它只存储文件名。

文件成功地附加了文件名，而不是该文件的内容。

如何解决它。提前致谢...

我尝试了以下代码：

```
Message message = new MimeMessage(session);
        message.setFrom(new InternetAddress(fromAddress));
        message.setRecipients(Message.RecipientType.TO,
                InternetAddress.parse(toAddr));

        if (subject == null) {
            message.setSubject("");
        } else {
            message.setSubject(subject);
        }

        if (attachedFile == null || attachedFile.equalsIgnoreCase("")) {
            if (content == null) {
                message.setText("");
            } else {
                message.setText(content);
            }

        } else {
            // Create the message part
            BodyPart messageBodyPart = new MimeBodyPart();

            if (content == null) {
                messageBodyPart.setText("");
            } else {
                messageBodyPart.setText(content);
            }

            // Create a multipar message
            Multipart multipart = new MimeMultipart();

            // Set text message part
            multipart.addBodyPart(messageBodyPart);

            // Part two is attachment
            // messageBodyPart = new MimeBodyPart();
            DataSource source = new ByteArrayDataSource(
                    attachedFile.getBytes("UTF-8"),
                    "application/octet-stream");
            messageBodyPart = new MimeBodyPart();

            // DataSource source = new FileDataSource(attchedFile);
            messageBodyPart.setDataHandler(new DataHandler(source));
            messageBodyPart.setFileName(attachedFile);
            // messageBodyPart.setHeader("Content-ID", "image/*");
            multipart.addBodyPart(messageBodyPart);
            message.setContent(multipart);
        }

        Transport.send(message); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-12-04T12:11:42.040

```
 MimeBodyPart messageBodyPart = new MimeBodyPart();

    messageBodyPart.setContent(body, "text/plain");

    Multipart multipart = new MimeMultipart();
    multipart.addBodyPart(messageBodyPart);

    // adds attachments

            MimeBodyPart attachPart = new MimeBodyPart();

            File file=new File("Z:/filename");

            try {

                attachPart.attachFile(file);
            } catch (IOException ex) {
                ex.printStackTrace();
            }

            multipart.addBodyPart(attachPart);

    // sets the multi-part as e-mail's content
    message.setContent(multipart); 
```

might be this will work

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T06:32:48.087

```
 MimeMessage message = new MimeMessage(session);

 // create the message 
 MimeBodyPart messageBodyPart = new MimeBodyPart();

 //fill message to be sent
 messageBodyPart.setText("Hi hello try and send this message");

 Multipart multipart = new MimeMultipart();
 multipart.addBodyPart(messageBodyPart);

 //attach your file here
 messageBodyPart = new MimeBodyPart();
 DataSource source =  new FileDataSource(fileAttachment); // your file
 messageBodyPart.setDataHandler( new DataHandler(source));
 messageBodyPart.setFileName(fileAttachment);
 multipart.addBodyPart(messageBodyPart);

 // Put message in parts
 message.setContent(multipart);

 Transport.send( message ); 
```

# wcf - Silverlight WCF 服务客户端实例化

> ID：12595757
> 
> 赞同：0
> 
> 时间：2012-09-26T06:28:20.253
> 
> 标签：wcf, silverlight

创建 WCF 服务客户端对象时遇到问题。

HelloServiceClient helloWorldClient = new HelloServiceClient("BasicHttpBinding_IDataAccess");

这是我的 ServiceReferences.ClientConfig 的内容

```
<configuration>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IDataAccess" maxBufferSize="2147483647"
            maxReceivedMessageSize="2147483647">
          <security mode="None" />
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:8732/Design_Time_Addresses/HelloWcf/Service1/mex" binding="basicHttpBinding"
          bindingConfiguration="BasicHttpBinding_IDataAccess" contract="IHelloService"
          name="BasicHttpBinding_IDataAccess" />
    </client>
  </system.serviceModel>
</configuration> 
```

错误信息如下

> System.InvalidOperationException：在 ServiceModel 客户端配置部分中找不到名为“BasicHttpBinding_IDataAccess”和合同“ServiceReference1.IHelloService”的端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此名称匹配的端点元素。在 System.ServiceModel.Description.ConfigLoader.LoadChannelBehaviors(ServiceEndpoint serviceEndpoint, String configurationName) 在 System.ServiceModel.ChannelFactory.ApplyConfiguration(String configurationName) 在 System.ServiceModel.ChannelFactory.InitializeEndpoint(String configurationName, EndpointAddress address) 在 System.ServiceModel.ChannelFactory `1..ctor(String endpointConfigurationName, EndpointAddress remoteAddress) at System.ServiceModel.EndpointTrait`1.System.ServiceModel 处的CreateSimplexFactory()。`1.CreateChannelFactory() at System.ServiceModel.ClientBase`1.CreateChannelFactoryRef (EndpointTrait `1 endpointTrait) at System.ServiceModel.ClientBase`1.InitializeChannelFactoryRef() at System.ServiceModel.ClientBase`1..ctor(String endpointConfigurationName) at SilverlightApplication1.ServiceReference1.HelloServiceClient..ctor(String endpointConfigurationName) at SilverlightApplication1.MainPage.Button_Click(Object sender, RoutedEventArgs e )

有人可以帮我解决这个问题吗？如果您想要任何其他代码/配置，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:26:57.020

如上所示 - 如错误所示，合约名称必须为“ServiceReference1.IHelloService”。

# ruby-on-rails - 如何在 Rails 上验证密码？

> ID：12595762
> 
> 赞同：0
> 
> 时间：2012-09-26T06:28:50.550
> 
> 标签：ruby-on-rails, ruby

如何仅在“创建”和“更改”上验证密码字段。

如果更新页面上为空则跳过验证，这意味着用户不想更改它？

这是表格的一部分

```
<%= semantic_form_for [:admin, @account] do |f| %>
  <%= f.semantic_errors %>

  <%= f.inputs do %>
    <%= f.input :email %>
    <%= f.input :password %>
    <%= f.input :password_confirmation, :label => 'Confirm Password' %> 
```

我在这里尝试过答案

[如何在记录更新期间从验证中排除密码字段？（轨道 3.0.4，红宝石 1.9.2）](https://stackoverflow.com/questions/5572427/how-do-i-exclude-password-fields-from-validation-during-record-update-rails-3)

但它仍然会检查更新时密码字段何时为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:49:53.020

如果您想跳过验证和回调，也许[这个答案](https://stackoverflow.com/questions/7572652/rails-3-skip-validations-and-callbacks)可以帮助您...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:39:11.590

如果您使用的是设计身份验证系统，您可能需要查看此文档： [https ://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-account-without-提供密码](https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-account-without-providing-a-password)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:27:40.830

只需这样做：

```
validates :password, presence => true, :if => :password 
```

这将在更新时跳过。

# wcf - WCF 服务将缓冲区逐帧流式传输到所有客户端

> ID：12595765
> 
> 赞同：1
> 
> 时间：2012-09-26T06:29:18.743
> 
> 标签：wcf, wcf-streaming

我正在寻找一种编写 wcf 服务的方法，该服务将逐帧缓冲区流式传输到所有客户端。我不想使用肥皂信封，并且可以从所有平台（如 windows、android 和 iPhone 客户端）使用相同的服务。我想手动控制媒体流。就像，在我的客户端表单应用程序中，我可以通过开始和停止按钮控制流式传输。我也想管理所有类型的错误处理。

我一直在谷歌上搜索我的要求，但我最终没有找到。我考虑过 nettcpbinding 但它也使用肥皂信封。在这里，我想要像基本 tcp 套接字这样的持久连接。

# c# - 如何在 nopcommerce 中组合插件？

> ID：12595771
> 
> 赞同：1
> 
> 时间：2012-09-26T06:29:41.047
> 
> 标签：c#, nopcommerce

我正在使用 nopcommerce 开源。我有两个用于运输的插件。

```
shipping.ByTotal
shipping.ByWeight 
```

现在我想用这两个插件写一个插件。因为运输成本取决于物品总数和物品重量。我该怎么做？你有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:24:02.963

添加对这些项目的引用，并使用他们的服务来解决问题。例如，*Shopping.ByWeight*插件有一个*IshippingByWeightService*。将他的界面注入您的插件中，您就可以开始了。:)

# symfony - Symfony2 - Propel 和 KnpPaginatorBundle：如何按列排序？

> ID：12595772
> 
> 赞同：0
> 
> 时间：2012-09-26T06:29:46.713
> 
> 标签：symfony, propel

在使用 Propel ORM 的 Symfony2 项目中，我正在尝试使用 KNP Paginator 包按列对列表视图进行排序。我的代码如下：

```
public function indexAction() 
{
    $query = CustomerQuery::create();

    $paginator = $this->get('knp_paginator');
    $pagination = $paginator->paginate($query, $this->get('request')->query->get('page', 1), 30);

    return compact('pagination');
} 
```

而我的观点是：

```
<table>
    <thead>
        <tr>
            <th>{{ pagination.sortable('Company', 'companyName')|raw }}</th>
            <th>{{ pagination.sortable('Contact', 'contact')|raw }}</th>
            <th>{{ pagination.sortable('E-mail', 'email')|raw }}</th>
        </tr>
    </thead>
    <tbody>
        {% for customer in pagination %}
            <!-- [...] -->
        {% endfor %}
    </tbody>
</table> 
```

生成的链接似乎是正确的，正如我得到的（例如）：

> /customers/?sort=companyName&direction=asc&page=1

但它不会对我的查询进行排序：我生成的请求中没有*ORDER BY*子句。所以，我的问题是：Propel 是否可以进行结果排序（如果可以，我错在哪里）？或者我应该在我的控制器中手动处理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:46:10.377

您可以创建 *knp_paginator.subscriber* 事件的订阅者，并使其成为对查询应用某种排序的类。

以*Knp\Component\Pager\Event\Subscriber\Sortable\Doctrine\ORM\QuerySubscriber 为例*。

我将对 knp_components 进行 PR 以添加 PropelQuerySortable 类，但我不知道确切的时间。

# vb.net - 如何在 VB.NET 中将可为空的 DateTime 设置为空？

> ID：12595775
> 
> 赞同：19
> 
> 时间：2012-09-26T06:29:57.787
> 
> 标签：vb.net, vb.net-2010

我正在尝试在我的 UI 上设置日期范围过滤器，并带有复选框来说明是否应使用 DateTimePicker 的值，例如

```
Dim fromDate As DateTime? = If(fromDatePicker.Checked, fromDatePicker.Value, Nothing) 
```

然而设置`fromDate`为`Nothing`不会导致它被设置为`Nothing`'12:00:00 AM'，并且以下`If`语句错误地执行过滤器，因为`startDate`is not `Nothing`。

```
If (Not startDate Is Nothing) Then
    list = list.Where(Function(i) i.InvDate.Value >= startDate.Value)
End If 
```

我如何真正确保`startDate`获得价值`Nothing`？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-26T06:38:17.937

问题是它首先检查这个赋值的右侧，并确定它是类型`DateTime`(no `?`)。然后执行任务。

这将起作用：

```
Dim fromDate As DateTime? = If(fromDatePicker.Checked, _
                               fromDatePicker.Value, _
                               CType(Nothing, DateTime?)) 
```

因为它强制右侧的类型为`DateTime?`.

正如我在评论中所说，[`Nothing`](http://msdn.microsoft.com/en-us/library/0x9tb07z%28v=vs.110%29.aspx)可以更类似于 C#`default(T)`而不是`null`：

> `Nothing`表示数据类型的默认值。默认值取决于变量是值类型还是引用类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-19T13:24:48.023

用 VB.NET 和 EF 6.X 保存 null 是：

`Dim nullableData As New Nullable(Of Date)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-30T23:00:38.497

除了@Damien_The_Unbeliever 的好答案，使用`New DateTime?`也有效：

```
Dim fromDate As DateTime? = If(fromDatePicker.Checked, _
                               fromDatePicker.Value, _
                               New DateTime?) 
```

您可能会发现它看起来有点反直觉，为什么也许`CType(Nothing, DateTime?)`更可取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T06:42:04.070

`New Date`用作幻数：

```
Dim fromDate As New Date
If fromDatePicker.Checked Then
  fromDate = fromDatePicker.Value
End If
If fromDate <> New Date Then
  list = list.Where(Function(i) i.InvDate.Value >= fromDate.Value)
End If 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-16T05:21:45.993

```
 squery = "insert into tblTest values('" & Me.txtCode.Text & "', @Date)"
        Dim cmd = New SqlCommand(squery, con)

        cmd.Parameters.Add("@Date", SqlDbType.DateTime)
        If txtRequireDate.Text = "" Then
            cmd.Parameters("@Date").Value = DBNull.Value
        Else
            cmd.Parameters("@Date").Value = txtRequireDate.Text
        End If 
```

# php - 从输入文本元素中删除缓存下拉列表

> ID：12595776
> 
> 赞同：2
> 
> 时间：2012-09-26T06:30:02.437
> 
> 标签：php, javascript, html

这种问题可能会被问好几次，但我的问题是不同的。

我有一个文本字段，它的声明是这样的

```
<input type="text" autocomplete="off" name="email" id="email" value="Email" onfocus="if (this.value=='Email') this.value='';" onblur="if (this.value=='') this.value='Email';" onkeyup="javascript:chk_email(this.value);" onblur="javascript:chk_email(this.value);" /> 
```

当我输入一个单词时，所有类似缓存电子邮件的下拉列表都会出现在文本框下方。

我尝试添加标签仍然它来了`autocomplete="off"`。`input`

我也写了这个javascript，但没有运气。

```
<script type="text/javascript">
    document.getElementById("email").reset();
</script> 
```

有什么方法可以从我的表单中删除缓存电子邮件的下拉列表。我只想删除这个文本框的缓存而不是整个表单。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T06:41:56.580

`autocomplete="off"`不是 XHTML 过渡的有效标记，这是一种常见的 DOCTYPE

尝试

**jQuery**

```
$("#email").attr("autocomplete","off"); 
```

**Javascript**

```
document.getElementById("email").setAttribute("autocomplete","off"); 
```

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T12:53:02.390

如何使用`<textarea>`而不是`<input>`. 它肯定会工作，因为`<textarea>`不会显示下拉菜单。查看代码

```
<textarea  autocomplete="off" name="email" id="email"  onfocus="if (this.value=='Email') this.value='';" onblur="if (this.value=='') this.value='Email';" onkeyup="javascript:chk_email(this.value);" onblur="javascript:chk_email(this.value);" rows="1" >
value here</textarea> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T06:41:35.583

而不是添加`autocomplete="off"`到输入标签尝试将其添加到表单标签

```
<form name="myform" method="post" autocomplete="off"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T12:48:20.677

> 代替输入类型文本使用输入类型电子邮件

```
<input type="email" autocomplete="off" name="email" id="email" value="Email" onfocus="if (this.value=='Email') this.value='';" onblur="if (this.value=='') this.value='Email';" onkeyup="javascript:chk_email(this.value);" onblur="javascript:chk_email(this.value);" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T16:24:54.043

您可以使用 JavaScript 更改相关输入元素的名称。

```
document.getElementById("email").name = Math.random(); 
```

这将为元素每次赋予一个全新的名称，并且浏览器不会将其识别为电子邮件输入，因此不会显示缓存。

这在过去对我有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-03T18:57:39.487

尝试添加以下变量：

```
// Older browsers
onCopy=”return false”
onPaste=”return false”
onDrag=”return false”
onDrop=”return false”

autocomplete="off" // HTML 5 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-04T10:47:30.197

autcomplete=off 选项不是标准的，但您可以在大多数浏览器中使用它，它应该可以工作，但不是作为输入属性，而是它所属的形式：

```
<form ... autocomplete="off">
    # your inputs
</form> 
```

尽管这更多是客户端问题而不是应用程序问题。更多关于这里：

[https://developer.mozilla.org/en-US/docs/How_to_Turn_Off_Form_Autocompletion](https://developer.mozilla.org/en-US/docs/How_to_Turn_Off_Form_Autocompletion)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-04T18:51:24.647

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-03T09:44:24.083

问题出在缓存上，所以我从浏览器中清除了整个缓存并使用了我正在使用的 html

```
<input type="text" autocomplete="off" name="email" id="email" value="Email" onfocus="if (this.value=='Email') this.value='';" onblur="if (this.value=='') this.value='Email';" onkeyup="javascript:chk_email(this.value);" onblur="javascript:chk_email(this.value);" /> 
```

# zend-framework - 确认在zend框架回发期间丢失的密码值？

> ID：12595777
> 
> 赞同：0
> 
> 时间：2012-09-26T06:30:04.377
> 
> 标签：zend-framework, zend-form

我正在使用 Zend 框架。在我的 Zend 表单中，当有回发或验证错误时，所有字段都包含值，但确认密码丢失了它的值。如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:09:35.620

默认情况下，密码字段不包括提交的值，因为这样做在某种程度上破坏了使用*****混淆密码的意义。但是，您可以将“renderPassword”选项传递给密码字段以更改此行为。

在引入该功能的补丁上有一个使用示例：http: [//framework.zend.com/issues/browse/ZF-2860](http://framework.zend.com/issues/browse/ZF-2860)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:30:31.713

您可以尝试使用此选项。

您可以像这样查看表单并一一渲染所有元素

你也可以设置值。

`$confpassword = $this->form->getElement('confpassword'); $confpassword->setValue($_POST['confpassword']); echo $confpassword;`

# python - 如何更改 pip 安装到的默认目录？

> ID：12595778
> 
> 赞同：6
> 
> 时间：2012-09-26T06:30:06.977
> 
> 标签：python, pip

当我运行命令时

```
pip install virtualenv 
```

我得到：

```
Installing virtualenv script to /usr/local/share/python 
```

但我的默认设置`virtualenv`在不同的地方：

```
which virtualenv
usr/local/bin/virtualenv 
```

我想默认`pip`安装到`usr/local/bin`目录。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T07:07:27.117

If you want to manually decide where you want packages to reside, you could always download the source distribution to a directory of your choice with the following:

```
pip install -d <path_to_my_directory> 
```

But when you install, I think you probably want to put the executable console scripts (as defined in the package's setup.py file; like virtualenv for example) in a directory included in your $PATH environmental variable.

You can specify this manually by doing the following:

```
sudo python setup.py install --install-scripts /usr/bin/ 
```

or`sudo python setup.py install --install-scripts /usr/local/bin/`

Let me know if you have any other questions...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T06:36:58.850

`/usr/local/bin`用于可执行程序。 `/usr/local/share`是存储独立于架构的数据。

因此，在您的情况下，您默认安装在 中`/usr/local`，其中可执行程序位于 /usr/local/bin 中，与架构无关的数据位于 中`/usr/local/share`，配置文件位于 中`/usr/local/etc`，等等。

您可以检查[Filesystem_Hierarchy_Standard](http://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard)以获取有关该主题的概述。

# php - PHP Foreach - 最后一行不同

> ID：12595782
> 
> 赞同：-2
> 
> 时间：2012-09-26T06:30:25.013
> 
> 标签：php

我正在使用 foreach 语句将我拥有的数据回显到 jquery 图表（flotchart）。表格必须是`{"label", data}, {"label", data}, {"label", data}`

但是我的 foreach 语句在每一行之后添加了一个逗号，包括最后一行，因为它破坏了脚本，所以我不能有逗号。

我目前正在使用

```
foreach ($bycountry as $country) {print 
'{ label: "' . $country['origincountry'] . '", data: ' . $country['countrytotal']. ' }, ';
} 
```

这给了我：`{"label", data}, {"label", data}, {"label", data},`

**最后一行不需要逗号**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T06:36:33.323

你试过[`json_encode`](http://php.net/manual/en/function.json-encode.php)了吗？

```
$country_to_json = array(
    array('label'=>'Portugal', 'data'=>12), 
    array('label'=>'india', 'data'=>13) 
);

echo json_encode($country_to_json); 
```

您需要稍微重新组织您的数组，但这是一种更简洁的方法。

另一种方法是使用`implode`，但是无论如何您都需要重新组织数组：

```
$country_for_implode = array();
foreach($bycountry as $country){
   $country_for_implode[] = "{ label: {$country['origincountry']}, data: {$country['countrytotal']}}";
}

echo implode(",", $country_for_implode); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:41:14.973

就用这个

```
$temp = array();
foreach ($bycountry as $country) 
{
    $temp[] = '{ label: "' . $country['origincountry'] . '", data: ' . country['countrytotal']. ' } ';
}
print implode(",", $temp); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T06:35:39.430

您可以使用[substr](http://php.net/manual/en/function.substr.php)

```
$str = '';  
foreach ($bycountry as $country) {
$str .= '{ label: "' . $country['origincountry'] . '", data: ' . $country['countrytotal'].     ' }, ';
}
echo $str = substr($str, 0, strlen($str)-1); 
```

希望这有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T06:44:20.393

```
$no = 1;
foreach ($bycountry as $country) {
    if($no== 1)
    {
        print  '{ label: "' . $country['origincountry'] . '", data: ' . $country['countrytotal']. ' } ';
        $no ++;
    }
    else
    {
        print  ',{ label: "' . $country['origincountry'] . '", data: ' . $country['countrytotal']. ' } ';
    }
} 
```

希望这会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T06:33:50.537

像这样使用它

```
foreach ($bycountry as $country) {
$str .= '{ label: "' . $country['origincountry'] . '", data: ' . $country['countrytotal']. ' }, ';
}

$str = trim($str,",");
print $str; 
```

这将删除最后`,`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T06:38:04.117

使用您的数组，您可以通过以下方式获得最后一个键：

```
// Extract the last array item and return it's key value
$last_key = key(array_slice($bycountry, -1, 1, TRUE));

$out = '';

foreach ($bycountry as $key => $country)
{
    $out .= '{ label: "' . $country['origincountry'] . '", data: ' . $country['countrytotal']. ' }';

    // If this is not the last key
    if ($key !== $last_key)
    {
        // Add the trailing comma
        $out .= ',';
    }
}

print ($out); 
```

# android - 哪个是android的纹理坐标，纹理是如何映射的？

> ID：12595783
> 
> 赞同：0
> 
> 时间：2012-09-26T06:30:29.680
> 
> 标签：android, textures, texture-mapping

当我做纹理映射时我很困惑。

android使用哪个纹理坐标以及纹理是如何映射的？

这是我发现的纹理坐标的两个定义。哪一个是正确的？

![第一个定义](../Images/4b085d4ba6061579690940bf2726d83c.png)

![第二个定义](../Images/f69db2e0a81e385c3278ecdd323832a1.png)

# c - 在哪里可以找到 gnu libc 中提供的不可重入函数列表？

> ID：12595785
> 
> 赞同：2
> 
> 时间：2012-09-26T06:30:39.893
> 
> 标签：c, multithreading, glibc

我现在正在移植一个单线程库来支持多线程，并且我需要使用局部静态或全局变量的函数的完整列表。

任何信息表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:50:31.427

检查您使用的每个函数的手册页......非线程安全的函数将被标识为这样，并且手册页将在有线程安全版本时提及（例如，`readdir_r`）。您可以通过在手册页上运行脚本来提取列表。

编辑：虽然我的回答已被接受，但我担心它不准确并且可能很危险。例如，虽然 strerror_r 提到它是 strerror 的线程安全版本，但 strerror 本身并没有说明线程安全......它说的是“字符串可能被覆盖”，这仅仅*意味着*它不是线程安全的. 因此，您至少需要搜索“可能被覆盖”和“线程”，但不能保证即使这样也会完整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:21:17.463

知道特定函数是否可重入总是一个好主意，但您还必须考虑可能从多个线程的共享代码段调用多个可重入函数的情况，这也可能导致使用共享数据时出现问题.

因此，如果您在线程之间共享任何数据，则必须“保护”数据，而不管被调用的函数是可重入的。

考虑以下函数：

```
void yourFunc(CommonObject *o)
{
    /* This function is NOT thread safe */
    reentrant_func1(o->propertyA);
    reentrant_func2(o->propertyA);
} 
```

如果此函数不受互斥体保护，您将在多线程应用程序中得到不希望的行为，而不管 func1 和 func2 是可重入的事实。

# android - PAW 服务器配置：使用内部 HTML 文件夹而不是 sd 卡

> ID：12595788
> 
> 赞同：0
> 
> 时间：2012-09-26T06:30:46.853
> 
> 标签：android, embedded

我使用了 PAW 服务器，我将网站存储在内部 html 文件夹而不是 SD 卡中。我想更改 PAW 服务器的配置，使 Paw 服务器将使用我的内部 html 文件夹来运行 web，而不是 sd 卡 html 文件夹。

我在嵌入式板上使用了 android 4.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:49:18.703

处理程序配置（通常）位于 /sdcard/paw/conf/handler.xml 文件中。
您可以通过更改文件处理程序部分中指定的路径来编辑现有配置，也可以插入新的文件处理程序定义。
如果您使用新定义，请确保 ID 与现有定义不同。新的文件处理程序定义可能如下所示：

```
<handler status="active">
<name>File Handler 2</name>
<description></description>
<removable>true</removable>
<id>filehandler2</id>
<files />
<params>
<param name="filehandler2.class" value="sunlabs.brazil.server.FileHandler" />
    <param name="filehandler2.root" value="/wherever/html" />
    <param name="filehandler2.defaults" value="index.html" />
</params>
</handler> 
```

# asp.net - 处理 global.asax ASP.NET MVC 中的异常

> ID：12595789
> 
> 赞同：8
> 
> 时间：2012-09-26T06:30:56.337
> 
> 标签：asp.net, asp.net-mvc, exception, global-asax

我有捕获 Global.asax 中所有异常的代码

```
 protected void Application_Error(object sender, EventArgs e) 
        {
            System.Web.HttpContext context = HttpContext.Current;
            System.Exception exc = context.Server.GetLastError();
            var ip = context.Request.ServerVariables["REMOTE_ADDR"];
            var url = context.Request.Url.ToString();
            var msg = exc.Message.ToString();
            var stack = exc.StackTrace.ToString();
        } 
```

如何获取发生此错误的控制器名称

如何获取请求客户端 IP？

我可以过滤异常吗？我不需要 404、504.... 错误

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T07:15:41.843

Global.asax 没有控制器和动作的概念，所以我相信没有用于检索控制器和动作名称的 API。但是，您可以尝试解析请求 URL：

```
HttpContextBase currentContext = new HttpContextWrapper(HttpContext.Current);
UrlHelper urlHelper = new UrlHelper(HttpContext.Current.Request.RequestContext);
RouteData routeData = urlHelper.RouteCollection.GetRouteData(currentContext);
string action = routeData.Values["action"] as string;
string controller = routeData.Values["controller"] as string; 
```

要获取用户 IP，您可以使用`UserHostAddress`属性：

```
string userIP = HttpContext.Current.Request.UserHostAddress; 
```

要过滤掉你不打算处理的 HTTP 异常，你可以使用类似的东西：

```
HttpException httpException = exception as HttpException;
if (httpException != null)
{
    switch (httpException.GetHttpCode())
    {
        case 404:
        case 504:
            return;
    }
} 
```

关于异常处理的最后一点评论 - 当有办法在本地执行它时，在全局级别执行它不是最佳实践。例如在 ASP.NET MVC 基`Controller`类中有一个方法：

```
protected virtual void OnException(ExceptionContext filterContext) 
```

当被覆盖时，它将让您完全控制发生的异常。您可以在 Global.asax**以及**ASP.NET MVC 特定功能中获得所有可用的信息，例如对控制器的引用、视图上下文、路由数据等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T06:51:05.120

我这样用它在下面

你可以像这样获取用户ip

```
var userip = context.Request.UserAgent; 
```

并且您可以像这样获取发生此错误的网址

```
var ururl = System.Web.HttpContext.Current.Request.Url; 
```

我想这会帮助你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:42:25.157

我会采取不同的策略，并在你的控制器上使用一个属性（或者如果你有一个基本控制器）

```
 public class HandleErrorAttributeCustom : HandleErrorAttribute
    {
       public override void OnException(ExceptionContext context)
        {
            //you can get controller by using
            context.Controller.GetType()

            //however, I'd recommend pluggin in Elmah here instead 
            //as it gives this easily and also can has filtering
            //options that you want

        }
} 
```

# java - Android RTSP 客户端

> ID：12595790
> 
> 赞同：0
> 
> 时间：2012-09-26T06:31:07.117
> 
> 标签：java, android, android-videoview, rtsp, rtsp-client

有哪些可能的 RTSP 客户端可以从 Android 上的 IP 摄像机流式传输实时 RTSP 视频？请不要提及我的 Android VideoView/MediaPlayer，它们具有无法忍受的缓冲延迟，导致整个流延迟 7-8 秒。我试图找到一种解决方案来减少它们的缓冲大小，但我找不到办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-11-29T09:54:13.790

我在 VLC 实施方面取得了巨大成功。你可以在这里找到一个例子[https://github.com/pedroSG94/vlc-example-streamplayer](https://github.com/pedroSG94/vlc-example-streamplayer)

你加

```
implementation 'com.github.pedroSG94.vlc-example-streamplayer:pedrovlc:2.5.14v3' 
```

...到您的依赖项，然后或多或少地（在 Kotlin 中）：

```
val surfaceView: SurfaceView = findViewById(R.id.surfaceView)
vlcVideoLibrary = VlcVideoLibrary(this, this, surfaceView)
vlcVideoLibrary?.play(rtspUrlString); 
```

...在您的活动中

项目中有一个示例实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:23:03.560

你可以看看这个

bsplayer -- [https://play.google.com/store/apps/details?id=com.bsplayer.bspandroid.free](https://play.google.com/store/apps/details?id=com.bsplayer.bspandroid.free)

偶尔用过，还不错（Sony Arc）

但它的性能将取决于你无法控制的东西

[Android 中的 RTSP 客户端](https://stackoverflow.com/questions/5380563/rtsp-client-in-android?rq=1)

# jquery - jqgrid 搜索选项选择组显示 [object,object]...帮助....对此发疯

> ID：12595793
> 
> 赞同：1
> 
> 时间：2012-09-26T06:31:34.853
> 
> 标签：jquery, jqgrid

在过去的两天里，我一直在努力让它正常工作。有人可以帮忙吗？我要拔头发了，为什么不显示我定义的组？

作为一个新用户，我无法在此处上传图片是它的链接

![在此处输入图像描述](../Images/2490bcdad948c705c4762923703b7132.png) 这些是我的搜索选项

```
{ //search settings
      closeOnEscape:true,
          modal:true,
          caption: "Search...",
          Find: "Search",
          Reset: "Clear",
          multipleSearch: true,
          overlay: 10,
          groupOps : [{ op: "AND", text: "AND" },   { op: "OR",  text: "OR" },{ op: "maybe",  text: "maybe" }],
          recreateFilter:true,
          onInitializeSearch: function ($form) {

           },
          afterRedraw: function () {

          }                                            
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:10:54.937

我不确定你有哪个错误。如何[在演示](http://www.ok-soft-gmbh.com/jqGrid/customgroupop.htm)中验证您发布的代码是否有效：

![在此处输入图像描述](../Images/cc04a40031596ef31d4775336c83b2c1.png)

您可以仔细比较您的代码与演示的代码。

# json - 杰克逊可以处理枚举吗

> ID：12595796
> 
> 赞同：0
> 
> 时间：2012-09-26T06:31:43.967
> 
> 标签：json, jackson

说我有一个枚举。

```
@Enumerated(EnumType.STRING)
private Gender gender; 
```

jackson json 解析器能否从 json 字符串中设置此值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:10:03.270

是的。验证这一点的一种方法是序列化 POJO 值，看看会发生什么。默认情况下， enum.name() 用作序列化，预期用于反序列化。

# java - 查找单词的第一个字符

> ID：12595799
> 
> 赞同：0
> 
> 时间：2012-09-26T06:32:03.510
> 
> 标签：java

我有以开头的句子

1.  ccccccccddkskdjskjdksjdfksjfkjs sjfsjfksjjs

我想看看我读到的行的开头是否是数字和。如果是，我想阅读该行的其余部分。

我怎样才能做到这一点 ？

我教过把这条线读给一个

```
 string str.
str[0] and str [1].
str[1]= .

 x= Character.isDigit(string.charAt(0)); 
 if(x) { if (string.charAt(1)=='.') 
 { print ...I get a Exception 
```

有没有一种简单的方法可以检查 str[0] 是否是一个数字..现在我正在手动检查它是否是 1（或）2 ......像这样？

* * *

线程“主”java.lang.StringIndexOutOfBoundsException 中的异常：字符串索引超出范围：java.lang.String.charAt 处的 1（未知来源）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T06:35:10.193

[字符](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Character.html)类有`isDigit`方法，你可以使用如下：

```
String str1 = "I start with letter";
boolean startWithDigit = Character.isDigit(str1.charAt(0));
// startWithDigit = false

String str2 = "1 start with digit";
boolean startWithDigit = Character.isDigit(str2.charAt(0));
// startWithDigit = true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:38:20.480

```
String str="1\. ccccccccddkskdjskjdksjdfksjfkjs sjfsjfksjjs";
char charAt = str.charAt(0);
Pattern p = Pattern.compile("\\d+");
Matcher m1 = p.matcher(""+charAt);
System.out.println(m1.matches()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T06:41:45.967

检查第一个字符的 ascii 值。

```
 char x = str.charAt(0);
 if(x >= 48 && x <= 57)
 {
     // do whatever
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T06:34:08.100

你可以做：

```
布尔 isANumber = false;
尝试{
  Integer.parseInt(str[0]);
  isANumber = true;
}catch（异常 e）{
}

//如果str[0]是一个数字，现在isANumber为真

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T06:48:56.020

这样做

`String string="ccccccccddkskdjskjdksjdfksjfkjs sjfsjfksjjs"`

`Character.isDigit(string.charAt(0));`

你可以像这样检查你的价值

有关更多详细信息，请参阅此

[如何确定字符串的第一个字符是否为数字？](https://stackoverflow.com/questions/1223052/how-do-i-find-out-if-first-character-of-a-string-is-a-number)

# extjs - ExtJS 嵌套标签面板

> ID：12595801
> 
> 赞同：1
> 
> 时间：2012-09-26T06:32:21.033
> 
> 标签：extjs

我创建了一个 ExtJS 嵌套选项卡面板，但我不知道如何切换嵌套选项卡。任何人都可以帮助我。非常感谢。

下面是我的js代码：

```
var clubs = new Ext.TabPanel({
    renderTo:'clubs',
    activeTab:0,
    autoHeight:true,
    defaults:{
      autoHeight:true,  
      cls:'tab-panel-item'  
    },
    items:[{
      title:'Shanghai',
      cls:'nested-tab',
      id:'shanghai-tab',
      items:{
        xtype:'tabpanel',
        defaults:{ cls:'tab-panel-item', autoHeight:true },
        containerCls:'nested-tab',
        activeTab:0, // required  
        items:[{
                    contentEl:'badminton',
                    title:'Badminton'
                },{
                    contentEl:'basketball',
                    title:'Basketball'
                }]  
      }  
    },{
      title:'Hangzhou',  
      cls:'nested-tab',  
      items:{  
        xtype:'tabpanel',  
        defaults:{ cls:'tab-panel-item', autoHeight:true },  
        containerCls:'nested-tab',  
        activeTab:0, // required  
        items:[{
                    contentEl:'hz-parent-child',
                    title:'Parent-child'
                },{
                    contentEl:'hz-football',
                    title:'Football'
                }]  
      }  
    }]
}); 
```

我尝试了激活（），但它只能切换父选项卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:04:03.323

我猜你正在使用 ExtJS 3.x ？您不想从哪里更改选项卡？

你可以使用 Ext.getCmp('Your-Tab-Panel-Id');

```
var clubs = new Ext.TabPanel({
    renderTo:'clubs',
    activeTab:0,
    autoHeight:true,
    defaults:{
      autoHeight:true,  
      cls:'tab-panel-item'  
    },
    items:[{
      title:'Shanghai',
      cls:'nested-tab',
      id:'shanghai-tab',
      items:{
        xtype:'tabpanel',
        id:'shanghai-tab-nested-first',
        defaults:{ cls:'tab-panel-item', autoHeight:true },
        containerCls:'nested-tab',
        activeTab:0, // required  
        items:[{
                    contentEl:'badminton',
                    title:'Badminton'
                },{
                    contentEl:'basketball',
                    title:'Basketball'
                }]  
      }  
    },{
      title:'Hangzhou',  
      cls:'nested-tab',  
      items:{  
        xtype:'tabpanel',  
        id:'shanghai-tab-nested-second',
        defaults:{ cls:'tab-panel-item', autoHeight:true },  
        containerCls:'nested-tab',  
        activeTab:0, // required  
        items:[{
                    contentEl:'hz-parent-child',
                    title:'Parent-child'
                },{
                    contentEl:'hz-football',
                    title:'Football'
                }]  
      }  
    }]
});

Ext.getCmp('shanghai-tab-nested-second').Activate(1);
Ext.getCmp('shanghai-tab-nested-first').Activate(1); 
```

# java - Hazelcast 地图已锁定

> ID：12595802
> 
> 赞同：6
> 
> 时间：2012-09-26T06:32:25.170
> 
> 标签：java, hazelcast

我们使用 Hazelcast 2.3.1，在我们的 hazelcast.xml 配置文件中，我们使用 write behind 来创建 Hazelcast IMap：

```
 <map name="HazelcastObjectOperations.objectMap">
         <backup-count>1</backup-count>
         <map-store enabled="true">
             <class-name>persister.HazelcastObjectPersister</class-name>
             <write-delay-seconds>10</write-delay-seconds>
         </map-store>
 </map>
 <properties>
      <property name="hazelcast.map.cleanup.delay.seconds">5</property>
 </properties> 
```

我们有两节课

1.  `HazelcastObjectOperation`它保存地图并用于将对象放入其中。
2.  `HazelcastObjectPersister`扩展 MapStore 用于在 Hazelcast 调用时持久化对象`storeAll()`。

```
public class HazelcastObjectOperation {

    protected final IMap<Long, MyHzcObj> objectMap;
    private final HazelcastInstance instance;

    public HazelcastObjectOperation() {
        this.instance = Hazelcast.getDefaultInstance();
        this.objectMap = this.instance.getMap("HazelcastObjectOperations.objectMap" );
    }

    public void save( final MyHzcObj object ) {
        long start = System.currentTimeMillis();
        IdGenerator generator = Hazelcast.getIdGenerator("generator");
        this.objectMap.put( generator.newId(), object );
        long end = System.currentTimeMillis();
    }
} 
```

问题是当 Hazelcast 运行该映射并获取应该存储在持久类的 storeAll 方法中的对象时，该映射被锁定了几秒钟，因此这次放入该映射会持续。这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T08:52:22.133

这是一个 Hazelcast 问题，由以下人员修复：[https ://github.com/hazelcast/hazelcast/issues/293](https://github.com/hazelcast/hazelcast/issues/293)

顺便说一句：请注意，如果您不需要旧值，最好`set()`使用它。`put()`如果定义了 mapstore，则该问题与`put()`尝试加载旧值有关。`set()`不会尝试加载旧值，因此它更快更干净。

# java - 导入语句代码错误

> ID：12595810
> 
> 赞同：0
> 
> 时间：2012-09-26T06:32:59.813
> 
> 标签：java

好的，首先我正在处理的项目有两个包，第一个是包含 invoiceCalculations.java 的 murach.business 第二个是包含 InvoiceForm.java(JFrame) 和 SwingValidator.java 的 murach.forms

因此，我应该为我从头开始创建的 Invoiceformjava 中的 murach.business.InvoiceCalculations 和 java.text.NumberFormat 类添加添加导入语句。

但是，我在编写代码时遇到了错误。netbeans 说未使用的代码。

我的代码不正确吗？怎么了？请按正确的方向。

```
/*
  * To change this template, choose Tools | Templates
* and open the template in the editor.
*/

 package murach.forms;
 import murach.business.InvoiceCalculations;
 import java.text.NumberFormat;

 /**
   *
   * @author james
   */
 public class InvoiceForm extends javax.swing.JFrame {

/**
 * Creates new form InvoiceForm
 */
public InvoiceForm() {
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    messageLabe1 = new javax.swing.JLabel();
    messageLabe2 = new javax.swing.JLabel();
    messageLabe3 = new javax.swing.JLabel();
    messageLabe4 = new javax.swing.JLabel();
    messageLabe5 = new javax.swing.JLabel();
    customertypeTextField = new javax.swing.JTextField();
    subtotalTextField = new javax.swing.JTextField();
    discountpercentTextField = new javax.swing.JTextField();
    discountamountTextField = new javax.swing.JTextField();
    totalTextField = new javax.swing.JTextField();
    calculateButton = new javax.swing.JButton();
    exitButton = new javax.swing.JButton();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setTitle("Invoice Total Calculator");

    messageLabe1.setText("Customer Type:");

    messageLabe2.setText("Subtotal:");

    messageLabe3.setText("Discount Percent:");

    messageLabe4.setText("Discount Amount:");

    messageLabe5.setText("Total:");

    customertypeTextField.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            customertypeTextFieldActionPerformed(evt);
        }
    });

    subtotalTextField.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            subtotalTextFieldActionPerformed(evt);
        }
    });

    discountpercentTextField.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            discountpercentTextFieldActionPerformed(evt);
        }
    });

    calculateButton.setMnemonic('c');
    calculateButton.setText("Calculate");
    calculateButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            calculateButtonActionPerformed(evt);
        }
    });

    exitButton.setMnemonic('x');
    exitButton.setText("Exit");
    exitButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            exitButtonActionPerformed(evt);
        }
    });

    org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(layout.createSequentialGroup()
            .add(38, 38, 38)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(messageLabe1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 100, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(messageLabe2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 100, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(messageLabe3, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 126, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(messageLabe4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 137, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(messageLabe5, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 100, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
                    .add(totalTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 145, Short.MAX_VALUE)
                    .add(discountamountTextField))
                .add(org.jdesktop.layout.GroupLayout.TRAILING, discountpercentTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 144, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(customertypeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 40, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(subtotalTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 144, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
            .addContainerGap(74, Short.MAX_VALUE))
        .add(layout.createSequentialGroup()
            .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .add(calculateButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 124, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
            .add(exitButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 77, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
            .add(43, 43, 43))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(layout.createSequentialGroup()
            .add(31, 31, 31)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                .add(messageLabe1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 24, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(customertypeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                .add(messageLabe2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 24, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(subtotalTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
            .add(6, 6, 6)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                .add(messageLabe3, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 24, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(discountpercentTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
            .add(6, 6, 6)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                .add(messageLabe4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 24, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(discountamountTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
            .add(6, 6, 6)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                .add(messageLabe5, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 24, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(totalTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
            .add(18, 18, 18)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                .add(exitButton)
                .add(calculateButton))
            .addContainerGap(58, Short.MAX_VALUE))
    );

    pack();
}// </editor-fold>                        

private void customertypeTextFieldActionPerformed(java.awt.event.ActionEvent evt) {                                                      
    // TODO add your handling code here:

}                                                     

private void subtotalTextFieldActionPerformed(java.awt.event.ActionEvent evt) {                                                  
    // TODO add your handling code here:
}                                                 

private void exitButtonActionPerformed(java.awt.event.ActionEvent evt) {                                           
       // TODO add your handling code here:
    exitButton.addActionListener(new java.awt.event.ActionListener(){
        @Override
           public void actionPerformed(java.awt.event.ActionEvent evt) {
               exitButtonActionPerformed (evt);
           }
    });
}                                          

private void calculateButtonActionPerformed(java.awt.event.ActionEvent evt) {                                                
      // TODO add your handling code here:
   double c = Double.parseDouble(customertypeTextField.getText());
   double s = Double.parseDouble(subtotalTextField.getText());
   double d = Double.parseDouble(discountpercentTextField.getText());

}                                               

private void discountpercentTextFieldActionPerformed(java.awt.event.ActionEvent evt) {                                                         
    // TODO add your handling code here:

}                                                        

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(InvoiceForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(InvoiceForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(InvoiceForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(InvoiceForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            InvoiceForm frame  =new InvoiceForm();
            frame.setVisible (true);
            frame.setLocationRelativeTo(null);
        }
    });
}
// Variables declaration - do not modify                     
private javax.swing.JButton calculateButton;
private javax.swing.JTextField customertypeTextField;
private javax.swing.JTextField discountamountTextField;
private javax.swing.JTextField discountpercentTextField;
private javax.swing.JButton exitButton;
private javax.swing.JLabel messageLabe1;
private javax.swing.JLabel messageLabe2;
private javax.swing.JLabel messageLabe3;
private javax.swing.JLabel messageLabe4;
private javax.swing.JLabel messageLabe5;
private javax.swing.JTextField subtotalTextField;
private javax.swing.JTextField totalTextField;
// End of variables declaration                   
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:14:07.737

您实际上从未使用过 NumberFormat，但您正在导入它。如果您实际上不打算在此类中直接使用它，则没有理由导入它。

# android - 从新活动回来后如何调用 onSavedInstance

> ID：12595811
> 
> 赞同：0
> 
> 时间：2012-09-26T06:33:03.077
> 
> 标签：android

我是android的初学者。我有一个简单的代码，我从我的第一个活动中调用一个活动，在第二个活动中我有一个按钮，按下该按钮第二个活动完成并且第一个活动出现。有没有办法在第一个活动中执行 onSaveInstanceState。我必须在清单文件中编辑一些东西吗？

以下是我的代码

```
 public class Activity1 extends Activity {
  /** Called when the activity is first created. */

 TextView mTextView ;

 Button b1;
 static int count=0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mTextView = (TextView) findViewById(R.id.textView2);

    if (savedInstanceState == null) {
        mTextView.setText("Welcome to HelloAndroid!");
    } else {
        mTextView.setText("Welcome Back!");
        System.out.println("count------>"+ count);
    }

    final Intent i = new Intent(this,activity2.class);
    b1 = (Button) findViewById(R.id.button1);
    b1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            startActivity(i);
            finish();
        }
    });

}

@Override
public void onResume() 
{
    super.onResume();
    System.out.println("inside Resume");
 }

@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    // Checks the orientation of the screen
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
        Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
    }
}
    @Override
    public void onSaveInstanceState(Bundle savedInstanceState) {
      super.onSaveInstanceState(savedInstanceState);

      savedInstanceState.putBoolean("MyBoolean", true);
      savedInstanceState.putDouble("myDouble", 1.9);
      savedInstanceState.putInt("MyInt", 1);
      savedInstanceState.putString("MyString", "Welcome back to Android");
      count++;
    }

    @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {
      super.onRestoreInstanceState(savedInstanceState);

      boolean myBoolean = savedInstanceState.getBoolean("MyBoolean");
      double myDouble = savedInstanceState.getDouble("myDouble");

      System.out.println("MyBoolean"+ myBoolean);
      System.out.println("myDouble"+ myDouble);
    }

} 
```

这是我的第二个活动，由第一个活动调用

```
public class activity2 extends Activity{

TextView textview;
Button b1;
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main2);

        textview = (TextView) findViewById(R.id.textView1);

        textview.setText("in activity2");

             final Intent i = new Intent(this,Activity1.class);

        b1 = (Button) findViewById(R.id.button1);

        b1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                startActivity(i);           
                finish();
            }
        });
 }
} 
```

有人请帮我谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:56:06.150

我相信您正在寻找的是 OnActivityResult

像这样覆盖活动1中的onActivityResult

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
       //Call methods here that you want to execute when your activity is returned to
} 
```

然后在活动 1 中，将活动 1 的启动方式更改为

```
 startActivityForResult(i, 0) 
```

如果您想将任何信息从活动 2 传递回活动 1，您可以在活动 2 中创建一个捆绑包，并在调用 finish() 之前使用 setResult() 对其进行设置

```
 Intent resultIntent = new Intent();
    //put data in resultIntent
    setResult(RESULT_OK, resultIntent);
    finish() 
```

此外，在活动 2 中，您无需在调用完成之前使用 startActivity() 再次直接启动活动 1。在您调用 finish() 后，它会自动将您返回到您来自的活动。如果您调用 startActivity 它实际上会在导航堆栈上创建一个新的活动 1，它将完全独立于原始活动 1 及其所有数据。

**编辑：**

抱歉，我之前没有注意到这一点，但请确保在开始第二个活动时不要在第一个活动中调用 finish()。如果这样做，它将完全关闭活动，并且您将丢失其中的所有数据（包括 savedInstanceState）。如果你把那条线去掉，这将按预期工作。

此外，它会让android自动为你形成一个backstack，所以点击手机上的后退按钮会自动跟踪你的调用活动，而不是让你手动创建按钮来这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:46:31.970

发现另一个帖子有人有类似的问题。您需要覆盖 onSaveInstanceState 方法：

[使用 Save Instance State 保存 Android Activity 状态](https://stackoverflow.com/questions/151777/saving-activity-state-in-android)

希望有帮助。

# java - 如何以特定格式获取特定区域的当前时间？

> ID：12595813
> 
> 赞同：0
> 
> 时间：2012-09-26T06:33:20.193
> 
> 标签：java, jodatime

我想在我选择的区域和特定格式（例如 HH-MM-SS、MM-DD-YY、MoMo-DD-YY-HH-MM-SS 等）中获取当前的 DateTime。我怎么能做到这一点，使用 JodaTime？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:24:03.063

鉴于您已经看过用户指南（其中包括有关[时区](http://joda-time.sourceforge.net/userguide.html#TimeZones)和[格式](http://joda-time.sourceforge.net/userguide.html#Formatters)的部分），您的困惑在哪里并不清楚。一些示例代码可以帮助您：

```
DateTimeZone zone = DateTimeZone.forID("Europe/London");
DateTime currentTimeInLondon = new DateTime(zone);
DateTimeFormatter formatter = DateTimeFormat.forPattern("HH:mm:ss, MM-dd-yyyy");
String text = formatter.print(currentTimeInLondon); // e.g. 08:24:54, 09-26-2012 
```

鉴于用户指南中的信息，值得您花一些时间来分析*为什么*您无法自己访问此代码。作为一名软件工程师，能够弄清楚如何使用 API 是一项非常重要的技能——你不能期望一直被灌输代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:40:54.180

这可能会对您有所帮助。 [http://joda-time.sourceforge.net/userguide.html](http://joda-time.sourceforge.net/userguide.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T06:41:05.037

使用以下代码根据特定区域的格式获取时间。

```
 Locale locale = Locale.FRENCH;

    // Format with a custom format
    DateFormat formatter = new SimpleDateFormat("E, dd MMM yyyy", locale);
    String s = formatter.format(new Date());
    // mar., 29 sept. 2012

    // Format with a default format
    s = DateFormat.getDateInstance(DateFormat.MEDIUM, locale).format(new Date());
    // 29 sept. 2012 
```

# javascript - 将用户输入推送到数组

> ID：12595815
> 
> 赞同：3
> 
> 时间：2012-09-26T06:33:26.370
> 
> 标签：javascript

嗨，是的，这是我以前遇到过的问题，我已经看过书了，什么时候回到基础调整了一些东西，但是我仍然无法将输入值推送到数组中，有人可以帮我解决问题吗这个谢谢

```
<!DOCTYPE html>
<html>

 <body>
  <script type="text/javascript">
   var number=["1"]
   function myFunction()
   {
    var x=document.getElementById("box");
     number.push=document.getElementById("input").value;
    x.innerHTML=number.join('<br/>'); 
   }
  </script>
 <form>
  <input id="input" type=text>
   <input type=button onclick="myFunction()" value="Add Number"/>
  </form>

 <div id="box"; style="border:1px solid black;width:150px;height:150px;overflow:auto"> 
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T06:34:54.507

这是错误：

```
number.push(document.getElementById("input").value); 
```

`push`是一种方法，而不是属性；-)

[JSFiddle](http://jsfiddle.net/rVthL/3/)

**PS：**为什么是`;`之后`id="box";`？你也应该解决这个问题..！;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:38:44.647

你很接近，这是工作代码：

```
<!DOCTYPE html>
<html>

 <body>
  <script type="text/javascript">
   var number = [];

   function myFunction()
   {
     var x = document.getElementById("box");
     number.push(document.getElementById("input").value);
     x.innerHTML = number.join('<br/>'); 
   }
  </script>
 <form>
  <input id="input" type=text>
   <input type=button onclick="myFunction()" value="Add Number"/>
  </form>

 <div id="box" style="border:1px solid black;width:150px;height:150px;overflow:auto"> 
  </div>
</body>
</html>​ 
```

# project - Unity 3D 创建新项目

> ID：12595816
> 
> 赞同：0
> 
> 时间：2012-09-26T06:33:26.930
> 
> 标签：project, unity3d

我正在尝试创建一个 Unity 3D 新项目。但我无法导入 Standard Assets.unityPackage，因为它在我的安装中不可用。看起来我只是有相同的移动版本。

我如何使用桌面版本，因为我需要在桌面而不是移动设备上测试项目？

有什么办法可以从某个地方下载它并将其导入程序中。

![在此处输入图像描述](../Images/b27c4a219d7cbd6f9eb78d9be7c033e2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:46:42.820

仅限专业版的软件包属于标准资产。Unity 3D 人员没有将其放在单个文件中，而是将其分离到不同的文件中。因此，在创建项目时，使用所有这些专业资产创建项目，并且对于角色控制预制件，请在开始时勾选角色控制器包。

# android - 带有图像的有吸引力的列表视图

> ID：12595817
> 
> 赞同：1
> 
> 时间：2012-09-26T06:33:31.640
> 
> 标签：android, android-layout

我想用一个`listview`或任何东西构建一个应用程序。它看起来很有吸引力，并且有一些图像等等。但我找不到一个好的方法来拥有它。我完全希望我的应用程序`UI`像这样的图像：

[![](../Images/47d14aaf3904201a2747e23e7bdc93fa.png)](https://i.stack.imgur.com/bEd7L.png)
[（来源：[coenraets.org](http://coenraets.org/blog/wp-content/uploads/2011/10/directory_plain_1.png)）]

[![](../Images/e0f9d867f13f5aa6ae7ff6fd847628ae.png)](https://i.stack.imgur.com/k8Q0P.png)
[（来源：[coenraets.org](http://coenraets.org/blog/wp-content/uploads/2011/10/directory_plain_2.png)）]

我想像这样的图像显示我的应用程序请建议我该怎么做？如果你知道一些教程，请提供链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:42:51.657

是的。只需在一个 xml 布局中`ImageView`放置一个。`TextView`并且，将此布局扩展为一个布局，该布局具有并且，在那里执行从*web*`ListView`服务获取图像或*本地存储的过程*

 **在这里，我提供了一些可能对您非常有用的示例链接 -

1.  [ListView 中图像的延迟加载](https://stackoverflow.com/q/541966/940096)

2.  [带有图像的列表视图](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

3.  [如何在 Android 的 ListView 中显示图像列表？](https://stackoverflow.com/q/459729/940096)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:35:20.203

您需要在 XML 文件中构建所需的布局，就像为`Activity`. 然后只需为您的每一行扩展 XML 布局`ListView`并设置其值和图像。

我用自己的视图（图片、文本和复选框）膨胀的一个 ArrayAdapter 的示例：

```
private class FriendListAdapter extends ArrayAdapter<User> {

    public FriendListAdapter(Activity a, int textViewResourceId, List<User> items) {
        super(a, textViewResourceId, items);
    }

    public class ViewHolder{
        public TextView username;
        public ImageView image;
        public CheckedTextView ctv;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        View v = convertView;
        ViewHolder holder;

        if (v == null) {
            LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.invite_friend_row, null);
            holder = new ViewHolder();
            holder.username = (TextView) v.findViewById(R.id.username);
            holder.username.setTypeface(tf);
            holder.image = (ImageView) v.findViewById(R.id.image);
            holder.ctv = (CheckedTextView) v.findViewById(R.id.checked);
            v.setTag(holder);
        }
        else{
            holder = (ViewHolder) v.getTag();
        }

        final User user = getItem(position);
        if(user != null){
            holder.username.setText(user.getName());
            holder.ctv.setChecked(user.isChecked());
            holder.image.setImageView(user.getImage());
        }

        return v;       
    }
} 
```

你明白了！**

# javascript - FF 在 document.write() 之后继续旋转

> ID：12595819
> 
> 赞同：9
> 
> 时间：2012-09-26T06:33:37.573
> 
> 标签：javascript

```
<html>
  <head>
    <script type="text/javascript" >
       function fn() {
       document.write("Hello there!!!");
       }

    </script>
  </head>

   <body>
      <button onclick="fn()">click</button>
   </body>
</html> 
```

单击按钮后，FF 继续旋转（11.0），而好像我直接调用 fn() 而不将其连接到按钮，它工作正常。有人可以看看这个吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-26T06:38:42.023

你需要打电话[`document.close()`](https://developer.mozilla.org/en-US/docs/DOM/document.close)。如果文档尚未打开，则`document.write`调用。`document.open`只要文档没有再次使用`document.close`浏览器关闭，就会表明该页面可能会发生变化。

```
function fn() {
    // implicit call to `document.open();` before document.write
    document.write("Hello there!!!");
    document.close();
} 
```

# delphi-7 - 类型转换 WideString 会破坏宽字符数组

> ID：12595822
> 
> 赞同：2
> 
> 时间：2012-09-26T06:33:41.997
> 
> 标签：delphi-7, delphi

我使用此过程将密钥枚举到 Delphi 7 中的 TNTListView (UNICODE)

```
procedure TForm1.TntButton1Click(Sender: TObject);
var
 k        : HKEY;
 Buffer   : array of widechar;
 i        : Integer;
 iRes     : Integer;
 BuffSize : DWORD;
 item     : TTNTListItem;
 WS       : WideString;
begin
 if RegOpenKeyExW (HKEY_CURRENT_USER, 'Software', 0, KEY_READ, K) = ERROR_SUCCESS then begin
  try
    i := 0;
    BuffSize := 1;
    while true do begin
      SetLength (Buffer, BuffSize);
      iRes := RegEnumKeyW(k, I, @Buffer[0], BuffSize);
      if iRes = 259 then break;
      if iRes = 234 then begin
        inc (BuffSize);
        continue;
      end;
      messageboxw (0, @Buffer[0], '', 0);
      item := TNTListView1.Items.Add;
      item.Caption := WideString (Buffer); // BREAKS IT
      { SOLUTION }
      SetLength (WS, BuffSize - 1);
      CopyMemory (@WS[1], @Buffer[0], (BuffSize * 2));
      { .... }
      inc (i);
      BuffSize := 1;
    end;
  finally
    RegCloseKey (k);
    SetLength (Buffer, 0);
  end;
 end;
end; 
```

我看到大多数列表视图项都被修剪了！但是，如果我在消息框中显示缓冲区，它会以正确的长度显示完整的字符串。这是列表视图的错误还是我错过了 NULL CHAR（甚至 2）之类的东西？

感谢帮助。

编辑：我刚刚注意到，当我将 Buffer 转换为宽字符串时，它被修剪成一半。

EDIT2：列表视图中没有错误。WideString Cast 以某种方式破坏了字符串和/或没有检测到 NULL CHAR(s)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T08:08:02.593

你是对的 - 在 Unicode 之前的 Delphi 中强制`array of WideChar`将`WideString`字符串长度减半。

在 Delphi 2007 上测试：

```
var
  A: array of WideChar;

begin
  SetLength(A, 4);
  ShowMessage(IntToStr(Length(WideString(A)))); // 2
end; 
```

* * *

A quick view on the above code in debugger CPU window shows that typecasting `array of WideChar`-> `WideString` does not result in any data conversion; [internal WideString format](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221069%28v=vs.85%29.aspx) stores the string **size** (i.e. the number of bytes) in the same place where Delphi strings or dynarrays store **length**. As a result typecasting halves string length.

# javascript - Javascript中的RegEx允许对文本字段进行负十进制输入

> ID：12595829
> 
> 赞同：2
> 
> 时间：2012-09-26T06:34:17.070
> 
> 标签：javascript, regex

我有一个要求，其中我需要在开头允许加号/减号，后跟一个十进制数字，该数字在 html 中的文本字段输入中只允许一个点。

基本上，文本字段应该允许普通整数和十进制数以及负整数和负十进制数。加号和减号应该只允许在开头（第一个字符），它是可选的。还应允许任意数量的小数位（例如：-12.12345 等），但条目中只允许一个小数点（点）。

允许的数字为：1、+ 1、-1、.1、+1.1、-1.1、-.12、+.12、123.4456、-123.345、+123.345 等

非常感谢任何帮助。

我正在使用下面的正则表达式来满足上述要求。

```
var integerOnly = /[\+\-0-9\.]/g; 
```

和下面的脚本（我从其他一些线程中获得并稍作修改）来验证它。

```
function restrictInput(myfield, e, restrictionType, checkdot){
    if (!e) var e = window.event
    if (e.keyCode) code = e.keyCode;
    else if (e.which) code = e.which;
    var character = String.fromCharCode(code);
    alert("1 " + character);
    // if user pressed esc... remove focus from field...
    if (code==27) { this.blur(); return false; }
    //alert("2");
    // ignore if the user presses other keys
    // strange because code: 39 is the down key AND ' key...
    // and DEL also equals .
    if (!e.ctrlKey && code!=9 && code!=8 && code!=36 && code!=37 && code!=38 && (code!=39 || (code==39 && character=="'")) && code!=40) {
        alert("3");
        if (character.match(restrictionType)) {
            alert("4");
            if(checkdot == "checkdot" & '-' != character & '+' != character){
                alert("5");
                return !isNaN((myfield.value.toString()==''? '0':myfield.value.toString())+character );
            } else {
                return true;
            }
        } else {
            return false;
        }
    }
} 
```

这是脚本的调用方式。

```
<input type="text" id="db" width="3" value=""   onkeypress="return restrictInput(this, event, integerOnly, 'checkdot');"/> 
```

它工作正常，除了少数情况，如：

1.  它允许 +/- 任意位置任意次数。我的要求是只在开始时允许。

我尝试如下修改正则表达式。

```
var integerOnly = /[\+\-]?[0-9\.]/g; 
```

在这种情况下，它与表达式不匹配。它没有达到警报 4。

一件事是它只允许一个小数位并且不超过一个。

有人可以帮我修改我的正则表达式，以便在开始时只允许 +/- 并且只允许一次。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T06:38:02.227

不要使用正则表达式，而是使用`isNumber`如下函数验证您的文本

```
function isNumber(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:41:29.870

```
var test_ary = ['1', '+1', '-1', '.1', '+1.1', '-1.1', '-.12', '+.12', '123.4456', '-123.345', '+123.345'];

var reg = /^[\+\-]?(?:\.?\d+|\d+\.?\d+)$/;

var i;

for ( i = 0; i < test_ary.length; i = i + 1) {
    console.log(reg.test(test_ary[i]));
} 
```

你也可以试试这个，用测试用例:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T06:37:57.267

我认为你想要这样的东西：

```
^[-+]?(\d+\.?|\d*\.\d+)$ 
```

由于小数点分隔符之前的数字或之后的数字是可选的（例如`1.`或`.1`）但两者都不是，因此您需要分别处理这些情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T05:30:03.970

我采用了“niksvp”脚本并进行了一些修改以满足我的要求。

以下脚本适用于所有类型的 +/- 十进制数字。例如：1.1、+1.1、-1.1、.1、-.1、+.1、1、-1、+1、123.345、+123.345、-123.345 等

```
function isNumber(myfield, e) {
if (!e) var e = window.event
    if (e.keyCode) code = e.keyCode;
    else if (e.which) code = e.which;
    var character = String.fromCharCode(code);

    var n = myfield.value.toString()==''? '0':myfield.value.toString();
    // this is required to allow numbers of this format
    // -1.1, + 1.1, .1, -.1, +.1 etc
    if(n == '-' | n == '+' | n== '.') {
        n +=0;
    }

    if(n.length > 1) {
        n = n.toString() + character;
    }

   return !isNaN(parseFloat(n)) && isFinite(n);
} 
```

感谢大家的帮助。

# javascript - 用于基于 Web 的深入图表的开源库

> ID：12595834
> 
> 赞同：13
> 
> 时间：2012-09-26T06:34:53.953
> 
> 标签：javascript, jquery, charts

我已经看到了这个[Good javascript library for drawing charts using json](https://stackoverflow.com/questions/2227421/good-javascript-library-for-drawing-charts-using-json)，它列出了图表库。我想去 FLOT 但我没有看到它支持向下钻取条。

谁能建议我 FLOT 是否支持它们或我可以使用的任何其他库？我主要寻找支持 javascript 和 jquery 的向下钻取条和饼图，并且可以为这些图提取图表数据。

有 Highcharts 和 JFreeChart，可以吗？不过，JFreeChart 不支持向下钻取。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-26T07:47:53.337

[d3.js](http://d3js.org/)。见画廊：

[https://github.com/mbostock/d3/wiki/Gallery](https://github.com/mbostock/d3/wiki/Gallery)

深入演示或示例：

*   [http://mbostock.github.com/d3/talk/20111116/bar-hierarchy.html](http://mbostock.github.com/d3/talk/20111116/bar-hierarchy.html)
*   [http://mbostock.github.com/d3/talk/20111018/treemap.html](http://mbostock.github.com/d3/talk/20111018/treemap.html)
*   [http://mbostock.github.com/d3/talk/20111018/partition.html](http://mbostock.github.com/d3/talk/20111018/partition.html)
*   [http://bost.ocks.org/mike/miserables/](http://bost.ocks.org/mike/miserables/)
*   [http://www.jasondavies.com/coffee-wheel/](http://www.jasondavies.com/coffee-wheel/)
*   [http://thepowerrank.com/visual/NCAA_Tournament_Predictions](http://thepowerrank.com/visual/NCAA_Tournament_Predictions)
*   [http://square.github.com/crossfilter/](http://square.github.com/crossfilter/)
*   [http://windhistory.com/map.html#4.00/36.00/-95.00](http://windhistory.com/map.html#4.00/36.00/-95.00) / [http://windhistory.com/station.html?KMKT](http://windhistory.com/station.html?KMKT)
*   [http://trends.truliablog.com/vis/tru247/](http://trends.truliablog.com/vis/tru247/)
*   [http://trends.truliablog.com/vis/metro-movers/](http://trends.truliablog.com/vis/metro-movers/)
*   [http://marcinignac.com/projects/open-budget/viz/index.html](http://marcinignac.com/projects/open-budget/viz/index.html)
*   [http://bl.ocks.org/3630001](http://bl.ocks.org/3630001)
*   [http://bl.ocks.org/1346395](http://bl.ocks.org/1346395)
*   [http://bl.ocks.org/1314483](http://bl.ocks.org/1314483)
*   [http://slodge.com/teach/](http://slodge.com/teach/)
*   [http://tympanus.net/Tutorials/MultipleAreaChartsD3/](http://tympanus.net/Tutorials/MultipleAreaChartsD3/)
*   [http://bl.ocks.org/3287802](http://bl.ocks.org/3287802)

有几个教程。这里有两个：

*   [http://www.12devsofxmas.co.uk/2012/01/data-visualisation/](http://www.12devsofxmas.co.uk/2012/01/data-visualisation/)
*   [http://nickqizhu.github.com/dc.js/](http://nickqizhu.github.com/dc.js/)

还有类似小提琴的 d3 编辑器：

[http://www.d3-generator.com/](http://www.d3-generator.com/)

所以对我来说，d3.js 似乎是最好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T06:52:55.963

Go for [http://kiersimmons.com/DDChart/index.html](http://kiersimmons.com/DDChart/index.html), it is a jquery plugin for drill down chart.

# android - Android中的执行顺序

> ID：12595838
> 
> 赞同：0
> 
> 时间：2012-09-26T06:35:17.847
> 
> 标签：android, android-intent, handlers

我有一个 Android 代码，例如：

```
protected void onPostExecute(String result){            
parseJSON(result);
replaceResourceSegment();
dummyMethod();
} 
```

我的 replaceresourceSegment(creates an intent) 方法需要一些时间来执行，其中 dummyMethod() 被调用。我是否有办法在 Android 中完成方法（如 Java 中的线程）后命令方法的执行或通知？请建议我，如果我必须使用 Handler 或 AsyncTask 或 Thread 来完成相同的任务...任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:08:17.873

我使用了 startActivityForResult(intent, REQUEST_CODE) 并在 onActivityResult(int requestCode, int ResultCode, Intent data) 中定义了 dummymethod() 的内容。

# mysql - 需要 SQL 选择查询帮助

> ID：12595841
> 
> 赞同：6
> 
> 时间：2012-09-26T06:35:31.940
> 
> 标签：mysql, sql, database

我的问题类似于[SQL select Group query](https://stackoverflow.com/questions/11407601/sql-select-group-query)。但是架构发生了变化，我想要不同的结果，如下所述。给定链接的解决方案没有给我正确的解决方案。你可以使用[SQL fiddle](http://sqlfiddle.com/#!2/bdd1a/2)来解决这个问题。

下面是我的表

表格1

```
+--------+----------+---------+  
| amount | make     | product |  
+--------+----------+---------+  
|    100 | Nokia    | Mobiles |   
|    300 | Samesung | Mobiles |   
|    700 | Micromax | Mobiles |   
|   1000 | Karbonn  | Mobiles |   
|    300 | Lava     | Mobiles |   
|    100 | Floyer   | Gift    |   
|    500 | Arichies | Gift    |   
|    300 | Feeling  | Gift    |   
+--------+----------+---------+ 
```

现在我想显示每个产品的两个最低金额，如果金额相同，那么根据 make 列的升序字母顺序显示任何人......

所以我想构建一个 SQL 查询，它给我的结果如下..

```
+--------+----------+---------+  
| amount | make     | product |  
+--------+----------+---------+  
|    100 | Nokia    | Mobiles |   
|    300 | Lava     | Mobiles |   
|    100 | Floyer   | Gift    |   
|    300 | Feeling  | Gift    |   
+--------+----------+---------+ 
```

请帮我建立这样的查询..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:54:26.810

这应该可以帮助你..

第一个有错误，现在更新。

```
SELECT  t.*
FROM    (
    SELECT  @lim := 2,
            @cg := ''
    ) vars,
    (select * from Table1 order by product,amount, make)  t
WHERE   CASE WHEN @cg <> product THEN @r := @lim ELSE 1 END > 0
    AND (@r := @r - 1) >= 0
    AND (@cg := product) IS NOT NULL
ORDER BY
    product,amount, make 
```

玩得开心，和提琴手一起玩： [http ://sqlfiddle.com/#!2/bdd1a/115/0](http://sqlfiddle.com/#!2/bdd1a/115/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:48:41.377

试试这个：

```
select * from table1 ORDER BY amount DESC LIMIT 2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:54:13.173

```
SELECT amount, make,product
FROM 
  (SELECT  ROW_NUMBER() OVER (PARTITION BY product ORDER BY amount) AS RowID,*
   FROM Table1) RESULT
WHERE RowID <= 2 
```

这在 PostgreSQL 中运行良好，mysql 不支持窗口函数，通过在 mysql 中获得类似的窗口函数[参考](http://briansteffens.com/2011/07/19/row_number-partition-and-over-in-mysql/)

# maven - 如何使用 Npanday 构建实体框架项目

> ID：12595842
> 
> 赞同：4
> 
> 时间：2012-09-26T06:35:31.887
> 
> 标签：maven, entity-framework-4

我正在使用 Npnday 1.5。我尝试使用 Npanday 构建我的项目。但是使用 Npanday 生成的 DLL 有一些问题。因为当我用 Visual Studio 2010 生成的其他 DLL 替换该 DLL 时，我的 Web 应用程序运行完美。

有没有人使用 Napanday 构建实体框架项目？

请告诉我使用 Npanday 构建实体框架项目需要哪些步骤。主要是POM.xml文件需要做哪些改动？？？

# java - 如何在 Java 中使用基于外部 SOAP 的 Web 服务？

> ID：12595843
> 
> 赞同：-1
> 
> 时间：2012-09-26T06:35:32.713
> 
> 标签：java, xml, webservice-client

我需要使用[http://indblrp2p03.ad.infosys.com:8000/sap/bc/srt/wsdl/sdef_/INFYPE/SOAP_WS_SC_SEARCH/wsdl11/ws_policy/rpc?sap-client=200](http://indblrp2p03.ad.infosys.com:8000/sap/bc/srt/wsdl/sdef_/INFYPE/SOAP_WS_SC_SEARCH/wsdl11/ws_policy/rpc?sap-client=200)基于 SOAP 的网络服务。

```
<?xml version="1.0" encoding="utf-8" ?> 
<wsdl:definitions targetNamespace="urn:sap-com:document:sap:soap:functions:mc-style"   xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsoap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:tns="urn:sap-com:document:sap:soap:functions:mc-style" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:n1="urn:sap-com:document:sap:rfc:functions">
 <wsdl:documentation>
 <sidl:sidl xmlns:sidl="http://www.sap.com/2007/03/sidl" /> 
 </wsdl:documentation>
 <wsp:UsingPolicy wsdl:required="true" /> 
 <wsp:Policy wsu:Id="IF_IF__-infype_-SOAP_WS_SC_SEARCH">
 <sapsession:Session xmlns:sapsession="http://www.sap.com/webas/630/soap/features/session/">
<sapsession:enableSession>false</sapsession:enableSession> 
</sapsession:Session>
</wsp:Policy>
<wsp:Policy wsu:Id="OP_IF_OP__-infype_-rfcShopcartSoapWs">
<sapcomhnd:enableCommit xmlns:sapcomhnd="http://www.sap.com/NW05/soap/features/commit/">false</sapcomhnd:enableCommit> 
<sapblock:enableBlocking xmlns:sapblock="http://www.sap.com/NW05/soap/features/blocking/">true</sapblock:enableBlocking> 
  <saptrhnw05:required xmlns:saptrhnw05="http://www.sap.com/NW05/soap/features/transaction/">no</saptrhnw05:required> 
  <saprmnw05:enableWSRM xmlns:saprmnw05="http://www.sap.com/NW05/soap/features/wsrm/">false</saprmnw05:enableWSRM> 
</wsp:Policy>
<wsdl:types>
<xsd:schema attributeFormDefault="qualified" targetNamespace="urn:sap-com:document:sap:rfc:functions">
<xsd:simpleType name="byte16">
<xsd:restriction base="xsd:base64Binary">
 <xsd:maxLength value="16" /> 
 </xsd:restriction>
 </xsd:simpleType>
 <xsd:simpleType name="char1">
 <xsd:restriction base="xsd:string">
 <xsd:maxLength value="1" /> 
 </xsd:restriction>
 </xsd:simpleType>
 <xsd:simpleType name="char10">
 <xsd:restriction base="xsd:string">
 <xsd:maxLength value="10" /> 
 </xsd:restriction>
 </xsd:simpleType>
<xsd:simpleType name="char12">
 <xsd:restriction base="xsd:string">
 <xsd:maxLength value="12" /> 
 </xsd:restriction>
 </xsd:simpleType>
 <xsd:simpleType name="char14">
 <xsd:restriction base="xsd:string">
 <xsd:maxLength value="14" /> 
  </xsd:restriction>
 </xsd:simpleType>
 <xsd:simpleType name="char2">
 <xsd:restriction base="xsd:string">
 <xsd:maxLength value="2" /> 
 </xsd:restriction>
 </xsd:simpleType>
 <xsd:simpleType name="char20">
 <xsd:restriction base="xsd:string">
 <xsd:maxLength value="20" /> 
 </xsd:restriction>
 </xsd:simpleType>
 <xsd:simpleType name="char21">
 <xsd:restriction base="xsd:string">
 <xsd:maxLength value="21" /> 
 </xsd:restriction>
 </xsd:simpleType>
 <xsd:simpleType name="char220">
 <xsd:restriction base="xsd:string">
 <xsd:maxLength value="220" /> 
 </xsd:restriction>
 </xsd:simpleType>
 <xsd:simpleType name="char30">
 <xsd:restriction base="xsd:string">
 <xsd:maxLength value="30" /> 
 </xsd:restriction>
 </xsd:simpleType>
 <xsd:simpleType name="char32">
 <xsd:restriction base="xsd:string">
 <xsd:maxLength value="32" /> 
 </xsd:restriction>
 </xsd:simpleType>
 <xsd:simpleType name="char40">
 <xsd:restriction base="xsd:string">
 <xsd:maxLength value="40" /> 
 </xsd:restriction>
 </xsd:simpleType>
 <xsd:simpleType name="char50">
 <xsd:restriction base="xsd:string">
 <xsd:maxLength value="50" /> 
 </xsd:restriction>
 </xsd:simpleType>
 <xsd:simpleType name="char54">
 <xsd:restriction base="xsd:string">
 <xsd:maxLength value="54" /> 
 </xsd:restriction>
 </xsd:simpleType>
   <xsd:simpleType name="char60">
 <xsd:restriction base="xsd:string">
 <xsd:maxLength value="60" /> 
 </xsd:restriction>
 </xsd:simpleType>
 <xsd:simpleType name="char8">
 <xsd:restriction base="xsd:string">
 <xsd:maxLength value="8" /> 
 </xsd:restriction>
 </xsd:simpleType>
 <xsd:simpleType name="char80">
 <xsd:restriction base="xsd:string">
 <xsd:maxLength value="80" /> 
 </xsd:restriction>
 </xsd:simpleType>
 <xsd:simpleType name="cuky5">
 <xsd:restriction base="xsd:string">
 <xsd:maxLength value="5" /> 
 </xsd:restriction>
 </xsd:simpleType>
 <xsd:simpleType name="curr13.2">
 <xsd:restriction base="xsd:decimal">
 <xsd:totalDigits value="13" /> 
 <xsd:fractionDigits value="2" /> 
  </xsd:restriction>
  </xsd:simpleType>
 <xsd:simpleType name="curr15.2">
 <xsd:restriction base="xsd:decimal">
 <xsd:totalDigits value="15" /> 
 <xsd:fractionDigits value="2" /> 
 </xsd:restriction>
 </xsd:simpleType>
  <xsd:simpleType name="date">
  <xsd:restriction base="xsd:date">
  <xsd:pattern value="[0-9]{4}-[0-9]{2}-[0-9]{2}" /> 
  </xsd:restriction>
  </xsd:simpleType>
  <xsd:simpleType name="numeric10">
  <xsd:restriction base="xsd:string">
  <xsd:maxLength value="10" /> 
  <xsd:pattern value="\d*" /> 
  </xsd:restriction>
  </xsd:simpleType>
  <xsd:simpleType name="numeric2">
  <xsd:restriction base="xsd:string">
  <xsd:maxLength value="2" /> 
  <xsd:pattern value="\d*" /> 
  </xsd:restriction>
  </xsd:simpleType>
  <xsd:simpleType name="numeric3">
  <xsd:restriction base="xsd:string">
  <xsd:maxLength value="3" /> 
  <xsd:pattern value="\d*" /> 
   </xsd:restriction>
  </xsd:simpleType>
 <xsd:simpleType name="numeric6">
 <xsd:restriction base="xsd:string">
  <xsd:maxLength value="6" />
  <xsd:pattern value="\d*" /> 
 </xsd:restriction>
 </xsd:simpleType>
  <xsd:simpleType name="quantum13.3">
 <xsd:restriction base="xsd:decimal">
 <xsd:totalDigits value="13" /> 
 <xsd:fractionDigits value="3" /> 
  </xsd:restriction>
 </xsd:simpleType>
 <xsd:simpleType name="unit3">
 <xsd:restriction base="xsd:string">
 <xsd:maxLength value="3" /> 
 </xsd:restriction>
 </xsd:simpleType>
  <xsd:complexType name="I">
 <xsd:sequence /> 
 </xsd:complexType>
 </xsd:schema>
 <xsd:schema attributeFormDefault="qualified" targetNamespace="urn:sap-com:document:sap:soap:functions:mc-style" xmlns:n0="urn:sap-com:document:sap:rfc:functions">
 <xsd:import namespace="urn:sap-com:document:sap:rfc:functions" /> 
 <xsd:complexType name="Bapiret2">
 <xsd:sequence>
 <xsd:element name="Type" type="n0:char1" /> 
 <xsd:element name="Id" type="n0:char20" /> 
 <xsd:element name="Number" type="n0:numeric3" /> 
 <xsd:element name="Message" type="n0:char220" /> 
 <xsd:element name="LogNo" type="n0:char20" /> 
 <xsd:element name="LogMsgNo" type="n0:numeric6" /> 
 <xsd:element name="MessageV1" type="n0:char50" /> 
 <xsd:element name="MessageV2" type="n0:char50" /> 
 <xsd:element name="MessageV3" type="n0:char50" /> 
 <xsd:element name="MessageV4" type="n0:char50" /> 
 <xsd:element name="Parameter" type="n0:char32" /> 
 <xsd:element name="Row" type="xsd:int" /> 
 <xsd:element name="Field" type="n0:char30" /> 
 <xsd:element name="System" type="n0:char10" /> 
 </xsd:sequence>
 </xsd:complexType>
 <xsd:complexType name="_-infype_-strScLst">
 <xsd:sequence>
 <xsd:element name="ScGuid" type="n0:byte16" /> 
 <xsd:element name="ScNo" type="n0:char10" /> 
 <xsd:element name="ScName" type="n0:char40" /> 
 <xsd:element name="ItemGuid" type="n0:byte16" /> 
 <xsd:element name="ItemNo" type="n0:numeric10" /> 
 <xsd:element name="ItemName" type="n0:char40" /> 
 <xsd:element name="NetPrice" type="n0:curr13.2" /> 
 <xsd:element name="ItemTotal" type="n0:curr15.2" /> 
 <xsd:element name="Currency" type="n0:cuky5" /> 
 <xsd:element name="TotalValue" type="n0:curr15.2" /> 
 <xsd:element name="PoNo" type="n0:char10" /> 
 <xsd:element name="ConfNo" type="n0:char10" /> 
 <xsd:element name="ScStatus" type="n0:numeric2" /> 
 <xsd:element name="ScStatusDesc" type="n0:char60" /> 
 <xsd:element name="ProductCat" type="n0:char20" /> 
 <xsd:element name="ProductCatDesc" type="n0:char80" /> 
 <xsd:element name="Quantity" type="n0:quantum13.3" /> 
 <xsd:element name="Uom" type="n0:unit3" /> 
 <xsd:element name="ProductType" type="n0:char2" /> 
 <xsd:element name="Purchteam" type="n0:char8" /> 
 <xsd:element name="ProductId" type="n0:char54" /> 
 <xsd:element name="CatalogId" type="n0:char20" /> 
 <xsd:element name="Catalogitem" type="n0:char40" /> 
 <xsd:element name="SupplierId" type="n0:char32" /> 
 <xsd:element name="SupplierName" type="n0:char40" /> 
 <xsd:element name="Flag" type="n0:char1" /> 
 <xsd:element name="ScNoCumItemno" type="n0:char21" /> 
 <xsd:element name="CreatedAt" type="n0:char10" /> 
 <xsd:element name="CreatedBy" type="n0:char12" /> 
  <xsd:element name="ChangedAt" type="n0:char10" /> 
  <xsd:element name="ChangedBy" type="n0:char12" /> 
  </xsd:sequence>
 </xsd:complexType>
 <xsd:complexType name="_-infype_-strRelatedDoc">
 <xsd:sequence>
 <xsd:element name="SourceDoc" type="n0:char10" /> 
 <xsd:element name="RelatedDoc" type="n0:char10" /> 
 </xsd:sequence>
 </xsd:complexType>
 <xsd:complexType name="_-infype_-strDocumentSrch">
 <xsd:sequence>
 <xsd:element name="DocNo" type="n0:char10" /> 
 <xsd:element name="DocName" type="n0:char40" /> 
 <xsd:element name="DocDateFrom" type="n0:date" /> 
 <xsd:element name="DocDateTo" type="n0:date" /> 
 </xsd:sequence>
 </xsd:complexType>
 <xsd:complexType name="_-infype_-strStatus">
 <xsd:sequence>
 <xsd:element name="Status" type="xsd:int" /> 
 </xsd:sequence>
 </xsd:complexType>
 <xsd:complexType name="TableOfBapiret2">
 <xsd:sequence>
 <xsd:element name="item" type="tns:Bapiret2" minOccurs="0" maxOccurs="unbounded" /> 
 </xsd:sequence>
 </xsd:complexType>
 <xsd:complexType name="TableOf_-infype_-strScLst">
 <xsd:sequence>
 <xsd:element name="item" type="tns:_-infype_-strScLst" minOccurs="0" maxOccurs="unbounded" /> 
  </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="TableOf_-infype_-strRelatedDoc">
  <xsd:sequence>
  <xsd:element name="item" type="tns:_-infype_-strRelatedDoc" minOccurs="0" maxOccurs="unbounded" /> 
  </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="TableOf_-infype_-strStatus">
   <xsd:sequence>
  <xsd:element name="item" type="tns:_-infype_-strStatus" minOccurs="0" maxOccurs="unbounded" /> 
  </xsd:sequence>
  </xsd:complexType>
  </xsd:schema>
  </wsdl:types>
  <wsdl:message name="_-infype_-rfcShopcartSoapWs">
  <wsdl:part name="EtReturn" type="tns:TableOfBapiret2" /> 
  <wsdl:part name="EtScList" type="tns:TableOf_-infype_-strScLst" /> 
  <wsdl:part name="EtScPo" type="tns:TableOf_-infype_-strRelatedDoc" /> 
  <wsdl:part name="IsScSearch" type="tns:_-infype_-strDocumentSrch" /> 
  <wsdl:part name="ItScStatus" type="tns:TableOf_-infype_-strStatus" /> 
  <wsdl:part name="IvApprover" type="n1:char1" /> 
  <wsdl:part name="IvBuyer" type="n1:char1" /> 
  <wsdl:part name="IvCategoryId" type="n1:char20" /> 
  <wsdl:part name="IvCompletedCarts" type="n1:char1" /> 
  <wsdl:part name="IvDashboard" type="n1:char1" /> 
  <wsdl:part name="IvDbSearch" type="n1:char1" /> 
  <wsdl:part name="IvItemDesc" type="n1:char40" /> 
  <wsdl:part name="IvNoOfRecords" type="xsd:int" /> 
  <wsdl:part name="IvPoNumber" type="n1:char10" /> 
  <wsdl:part name="IvPurcGrp" type="n1:char14" /> 
  <wsdl:part name="IvPurcOrg" type="n1:char14" /> 
  <wsdl:part name="IvRequester" type="n1:char10" /> 
  <wsdl:part name="IvSupplier" type="n1:char10" /> 
  <wsdl:part name="IvTeamCart" type="n1:char1" /> 
  <wsdl:part name="IvTeamMember" type="n1:char12" /> 
  <wsdl:part name="IvUser" type="n1:char12" /> 
  <wsdl:part name="IvWithConf" type="n1:char1" /> 
  <wsdl:part name="IvWithPo" type="n1:char1" /> 
  </wsdl:message>
  <wsdl:message name="_-infype_-rfcShopcartSoapWsResponse">
  <wsdl:part name="EtReturn" type="tns:TableOfBapiret2" /> 
  <wsdl:part name="EtScList" type="tns:TableOf_-infype_-strScLst" /> 
  <wsdl:part name="EtScPo" type="tns:TableOf_-infype_-strRelatedDoc" /> 
  <wsdl:part name="EvCount" type="n1:I" /> 
  <wsdl:part name="ItScStatus" type="tns:TableOf_-infype_-strStatus" /> 
  </wsdl:message>
  <wsdl:portType name="_-infype_-SOAP_WS_SC_SEARCH">
  <wsp:Policy>
  <wsp:PolicyReference URI="#IF_IF__-infype_-SOAP_WS_SC_SEARCH" /> 
  </wsp:Policy>
  <wsdl:operation name="_-infype_-rfcShopcartSoapWs">
  <wsp:Policy>
   <wsp:PolicyReference URI="#OP_IF_OP__-infype_-rfcShopcartSoapWs" /> 
  </wsp:Policy>
  <wsdl:input message="tns:_-infype_-rfcShopcartSoapWs" /> 
  <wsdl:output message="tns:_-infype_-rfcShopcartSoapWsResponse" /> 
  </wsdl:operation>
  </wsdl:portType>
  </wsdl:definitions> 
```

同样，我在 Eclipse 中创建了一个 webservice 客户端，结果出现了以下数量的类，其中一些类的结构如下：

*   _Infype_StrDocumentSrch,
*   _Infype_StrRelatedDoc,
*   _Infype_StrScLst,
*   _Infype_StrStatus,
*   Bapiret2 和 I.java

我能够与 URL 建立连接，但无法从后端获取 XML 中列出的参数，例如 itemNo、itemName 等。谁能告诉我如何与上述这些类进行交互并获得所需的参数及其各自的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:50:03.540

eclipse web service 客户端工具肯定已经生成了一些jsp页面。检查 TestClient.jsp 并输入值并查看您获得的响应。

# html - CSS3 过渡悬停在嵌套的 div 上

> ID：12595859
> 
> 赞同：3
> 
> 时间：2012-09-26T06:36:39.287
> 
> 标签：html, css

我在嵌套 div 元素上的 ccs3 悬停过渡时遇到了一些问题。似乎当我**MOUSE_OVER** img_cover 它播放动画但是当将鼠标移到 img_one 容器中的任何内容上时，即使我仍在父 div 中，它也会开始播放**MOUSE_OUT动画。**这是不受欢迎的效果，我只想在移出父 div（img_one 容器）时播放**MOUSE_OUT 。**我究竟做错了什么？

我为演示创建了一个 Jsfiddle。

[http://jsfiddle.net/6wrdD/16/](http://jsfiddle.net/6wrdD/16/)

```
---------------------------
| img_one  container      |
|  ____________________   |
|  |kool_mask         |   |
|  |------------------|   |   
|  |text              |   |
|  |button            |   |
|  |__________________|   |
|                         |
|  ____________________   |
|  |img_cover         |   |
|  |__________________|   |
--------------------------- 
```

代码：[HTML]

```
<div class="image_one">

    <div class="kool_mask">
        <h5> Heading </h5>
        <div class="p2"> Text </div>

        <a href="#"><input type="button" id="kool_buttons" value="launch">  </a>

    </div>
<div id="imgcover"> <img src="http://blogs.lib.utexas.edu/texlibris/files/HAL-9000.jpg" alt="" /> </div>
</div> 
```

代码：[CSS]

```
.kool_mask 

{
background: rgba(66, 72, 71, 0.7);

position:relative;
width:288px;
height:250px;

top:0;
left:0;
}

.image_one
 {
position:relative;
width:288px;
height:250px;

}

.kool_mask a 
{

color:#ffffff;
}

#imgcover
{
top:0;
left:0;
position:absolute;
width:288px;
height:150px;

 -webkit-opacity: 1;
  -moz-opacity: 1;
  opacity: 1;
  -webkit-transition: all 1s ease-out;
  -moz-transition: all 1s ease-out;
  -ms-transition: all 1s ease-out;
  -o-transition: all 1s ease-out;
  transition: all 1s ease-out;

}

#imgcover:hover
{

-webkit-opacity: 0;
  -moz-opacity: 0;
  opacity: 0;

  /* Firefox */

-moz-transform: scale(0) rotate(320deg) translate(50px);

/* WebKit */

-webkit-transform: scale(0) rotate(320deg) translate(50px);

/* Opera */

-o-transform: scale(0) rotate(320deg) translate(50px);

/* Standard */

transform: scale(0) rotate(320deg) translate(50px);

}

h5 
{
font-size: 16px;
color: #FFFF00;
text-align:center;
background-color: #000000;
margin-right: 470px;
margin-left: 100px;
padding-top: 2px;
padding-left: 4px;
font-family: Georgia, "Times New Roman", Times, serif;
font-weight: normal;

}

.kool_buttons {
text-align:center;
width:50px;
height:50px;
border:1px solid black:

background: rgba(66, 72, 71, 0.7);

}​
​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T06:42:12.727

只需将`#imgcover:hover`选择器更改为`.image_one:hover #imgcover`：

```
.image_one:hover #imgcover
{

-webkit-opacity: 0;
  -moz-opacity: 0;
  opacity: 0;
... 
```

[http://jsfiddle.net/Kyle_/6wrdD/17/](http://jsfiddle.net/Kyle_/6wrdD/17/)

这会在父元素悬停时选择图像，以便触发元素只是父元素而不是图像本身，而是为图像设置动画。:)

# php - PHP：定义一个全局范围变量

> ID：12595860
> 
> 赞同：-1
> 
> 时间：2012-09-26T06:36:42.683
> 
> 标签：php

我处于一种情况。

我的 php 文件夹结构就像

```
UI
  user
    login.php
    logout.php
  jquery
    somejs

  css
    somecss
blah.php
blah.php 
```

现在要导入任何 css、js 或任何 php 文件，我正在使用文件路径，例如

```
localhost/UI/user/index.php  // example 
```

现在我正在尝试在任何页面上定义一个全局变量，例如

```
 <?php
    $somevar = "localhost";
    GLOBAL $somevar;
    ?> 
```

这样我就可以导入任何css js

```
<?php echo $somevar ;?>/UI/user/index.php  // example 
```

问题：它仅在我将变量声明为 GLOBAL 的页面上工作

我想在每个页面上使用变量并且不想使用包含

是否有任何其他替代方法可以在 php 中为文件夹定义变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:40:11.243

您不**使用**`global`. 您只需在您的方法或函数体中使其可用，即使它是在它之外设置（或使用您的术语“声明”）。所以除非声明它，否则没有办法拥有变量。*如果不运行 PHP 代码（简化*，但在这里没关系），就没有办法做到这一点。并且代码不是无处可去的，因此需要`include`或需要`require`设置变量的所述代码。

您可以尝试使用`php.ini`'s`auto_include_file`来自动包含变量，但仍然需要使用 PHP 代码。

但是你通常做错了。将所有全局变量移动到类中，设置自动加载器并静态访问即。代码会干净得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:49:13.700

好吧，我的经验表明 .. global 用于访问函数内部的变量，这些变量是在函数外部定义的。可以有许多不同的解决方案，我建议使用会话或 cookie。将数据存储在 session/cookies 中，并在需要的地方访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:50:09.167

您可以使用 PHP 定义的特殊 $GLOBALS 数组。$GLOBALS 数组是一个关联数组，全局变量的名称是键，该变量的内容是数组元素的值。注意 $GLOBALS 如何存在于任何范围内，这是因为 $GLOBALS 是一个超全局的

您可能不需要定义全局变量来将 css、js 或任何静态文件（即图像等）应用到您的应用程序。您可以使用相对路径来包含 js 和 css 文件。你可以参考[这篇文章](http://roshanbh.com.np/2008/01/absolute-path-and-relative-path-file-inclusion-in-php.html) 来了解更多关于相对路径和绝对路径的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T06:56:52.803

您必须`define()`为此目的使用功能

```
config.php
<?php
define("host", "localhost");
?> 
```

现在在您想要访问`HOST`变量的任何地方都包含此页面。

你可以像这样访问这个变量`echo host;`

# java - Java：将txt文件读入二维数组

> ID：12595865
> 
> 赞同：1
> 
> 时间：2012-09-26T06:37:00.497
> 
> 标签：java, arrays, map, arraylist, 2d

对于家庭作业，我们必须读入一个包含地图的 txt 文件。使用地图，我们应该读取其内容并将它们放入二维数组中。

我已经设法将文件读入一维字符串数组列表，但我遇到的问题是将其转换为二维字符数组。

这是我到目前为止在构造函数中的内容：

```
try{

  Scanner file=new Scanner (new File(filename));

    while(file.hasNextLine()){

        ArrayList<String> lines= new ArrayList<String>();

        String line= file.nextLine();

        lines.add(line);    

        map=new char[lines.size()][];

    }
}
catch (IOException e){
    System.out.println("IOException");
} 
```

当我打印出 lines.size() 时，它打印出 1 但是当我查看文件时它有 10。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T06:38:11.997

您必须在循环*外创建列表。*在您的实际实现中，您为每个新行创建一个新列表，因此它的大小始终为 1。

```
// ...
Scanner file = new Scanner(new File(filename));
List<String> lines = new ArrayList<String>();  // <- declare lines as List
while(file.hasNextLine()) {
// ... 
```

顺便说一句 - 我不会命名`char[][]`变量`map`。Map 是一种完全不同的数据结构。这是一个数组，如果您在循环内创建，那么您可能会遇到与列表相同的问题。但现在你应该知道一个快速修复；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:44:57.807

更改代码如下：

```
public static void main(String[] args) {
        char[][] map = null;
        try {
            Scanner file = new Scanner(new File("textfile.txt"));
            ArrayList<String> lines = new ArrayList<String>();
            while (file.hasNextLine()) {
                String line = file.nextLine();
                lines.add(line);
            }
            map = new char[lines.size()][];
        } catch (IOException e) {
            System.out.println("IOException");
        }
        System.out.println(map.length);
    } 
```

# c# - 在方法重载和覆盖中传递简单参数和引用参数之间的区别？

> ID：12595866
> 
> 赞同：-2
> 
> 时间：2012-09-26T06:37:04.637
> 
> 标签：c#, overriding, overloading

我有三个班级：

```
public class A
{
}
public class B
{
    void MethodA(ref A obj) { }

    void MethodB(A obj) { }
}
public class C : B
{
    void MethodA(ref A obj) { }
} 
```

**我的第一个问题**：上述方法是否重载？

**第二个问题**：传递简单和引用类型对象之间的区别，因为我知道类是引用类型。

**第三个问题**：C类中的方法是否覆盖B类中的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T06:42:07.607

1：没有；`B.MethodA`并且`C.MethodA`不相关；它们隐含私有的事实意味着它甚至不是方法隐藏

2：不是问题，而是：按值传递与按引用传递（`ref`关键字）在很大程度上与值类型与引用类型（`struct`vs `class`）正交；这是一个经常被误解的主题，但如果没有实际问题，我无法真正澄清

3：没有；没有任何`virtual`,`override`或`abstract`是最大的线索

# sql-server - 按名称将参数值从 Delphi 传递到 SQL Server 存储过程

> ID：12595867
> 
> 赞同：0
> 
> 时间：2012-09-26T06:37:06.147
> 
> 标签：sql-server, delphi, stored-procedures

我的问题与肖恩的（[链接](https://stackoverflow.com/questions/7883851/passing-sql-server-stored-procedure-parameter-names-via-delphi)）相同

但是，这个问题似乎没有答案。

是否有其他工具`TADOStoredProc`可用于按名称传递参数？

我知道使用`Parameters.Refresh`. 但我不想使用它，因为它会额外往返服务器。

我也尝试过[UniDAC](http://www.devart.com/unidac/)，但也无法按名称传递参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:08:01.687

如果您在设计时添加过程名称，您还可以在设计时检查参数（我认为您需要一个连接）。这样，您不必将所有 SQL 都放入代码中，也不必在运行时检查参数。只需在要调用的每个过程的~~表单~~数据模块上放置一个 ADOStoredProc 。你可以给它们起一个更合理的名字，你可以节省很多代码。

当然，查询和命令也是如此。

或者，您可以自己添加代码中的参数。您可以使用 指定参数及其名称、类型和其他属性`YourADOStoredProc.Parameters.Add`。

如果您将 ADO 控件添加到一个或多个数据模块，您可以轻松地从整个应用程序中调用它们。您甚至可以编写方法（我认为您应该）来包装调用。这样，您不必在整个应用程序中处理参数，并且在该包装方法中，您可以配置参数：

```
procedure TYourDataModule.DeleteCustomer(CustomerId: Integer);
var
  CustomerIdParam: TParameter;
begin
  with YourDeleteCustomerADOStoredProc do
  begin
    CustomerIdParam := Parameters.FindParam('P_CUSTOMERID');

    if CustomerIdParam = nil then
    begin
      CustomerIdParam := Parameters.AddParameter;
      CustomerIdParam.Name := 'P_CUSTOMERID';
      CustomerIdParam.DataType := ftInteger;
      CustomerIdParam.Direction := pdInput;
      //CustomerIdParam.Size := 40; // May be needed for strings;
    end;

    CustomerIdParam.Value := CustomerId;

    ExecProc;

  end;
end; 
```

这样，您可以在`YourDataModule.DeleteCustomer(20)`整个应用程序中调用，而不必担心参数。但正如您所见，它需要一些编码，因此您可以重新考虑使用设计时配置。这真的更容易。

# fixed - 当另一个固定元素重叠时移动到页面顶部的固定元素

> ID：12595876
> 
> 赞同：-1
> 
> 时间：2012-09-26T06:37:26.050
> 
> 标签：fixed, overlap

我从[这个页面](http://googleblog.blogspot.com)得到了一个想法。我尝试使用此脚本，但它不起作用。

```
$(window).load(function(){
$(function() {
  var a = function() {
    var b = $(window).scrollTop();
    var d = $("#menu-anchor").offset({scroll:false}).top;
    var f = $(".logo-anchor").offset({scroll:false}).top;
    var c = $("#menu");
    var e = $(".logo");
    if (b>d) {
      c.css({position:"fixed",top:"0px"})
    } else {
      if (b<=d)   {
        c.css({position:"relative",top:""})
      }
    };
    if (b>d) {
      e.css({position:"fixed",top:"0px"})
        }else {
          if (b<=f)   {
            e.css({position:"fixed",top:""})
          }
        }
      };
  $(window).scroll(a);a()
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:52:45.340

Just try like that:

[http://jsfiddle.net/3pGGv/](http://jsfiddle.net/3pGGv/)

I don't change the position: fixed, but set the value for "top" every time the window is scrolled.

# android - android:videochat(以下配置无法登录IMSDroid)

> ID：12595885
> 
> 赞同：2
> 
> 时间：2012-09-26T06:38:03.297
> 
> 标签：android, sip, voip, rtp

我正在尝试制作视频聊天的 Android 应用程序。为此，我在 SIP 中创建了一个帐户。我收到了 SIP 服务器的用户名和密码。我已经实施了 IMS Droid 项目。但是当我使用签名应用程序时我的 SIP 显示名称、IMS 公共身份 (IMPU)、IMS 私人身份 (IMPI)、密码、领域和网络设置我无法登录。指示器显示为红色。请建议我解决此问题。这些是信息我给了：

```
My Public Identity is sip:subhendu.das@sip2sip.info,
Realm is sip:sip2sip.info,
Private Identity is  subhendu.das@sip2sip.info,
Password is my chosen password.

In Networking Settings

Proxy:CSCF-Host is proxy.sipthor.net
Proxy:CSCF Port is 5060
Transport is UDP
Proxy:CSCF Discovery is none
In NAT Transversal ICE is enabled.
This is the link from where i get the informations :http://code.google.com/p/imsdroid/wiki/Quick_Start.. 
```

请给我解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T06:52:16.250

From [a tutorial by PalmMicro](http://palmmicro.com/pa6488/software/userguide/sip.php):

> Click icon"Options", then icon "Identity" at home page, you can find the identity configuration page as follows. The contents in the black color are actual settings, while the contents in blue collor are comments. Please go back to home page after finishing the settings.
> 
> ![enter image description here][1]
> 
> Click icon "Options", then icon"Network" will enter network configuration page as follows. Please set according your network environment. Go back to home page after settings.
> 
> ![enter image description here][2]
> 
> Click icon"Sign in" to login server. You will find seven more icons at home page if login successfully.
> 
> ![enter image description here][3]
> 
> [1]: [http://i.stack.imgur.com/P4I2D.png](http://i.stack.imgur.com/P4I2D.png) [2]: [http://i.stack.imgur.com/ZI7oz.png](http://i.stack.imgur.com/ZI7oz.png) [3]: [http://i.stack.imgur.com/vvAwa.png](http://i.stack.imgur.com/vvAwa.png)

# php - 首次调用该函数后，AJAX 发布函数无法正常工作

> ID：12595892
> 
> 赞同：0
> 
> 时间：2012-09-26T06:38:24.007
> 
> 标签：php, javascript, ajax, jquery, post

我对 jquery 和 AJAX 完全陌生，在努力了 5-6 个小时并搜索了我正在寻求帮助的解决方案之后。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0jquery.min.js"></script>
<script type="text/javascript">
    $(function() {
        $(".submit").live('click',(function() {

            var data = $("this").serialize();
            var arr = $("input[name='productinfo[]']:checked").map(function() {
                return this.value;
            }).get();
            if(arr=='')
            {
                $('.success').hide();
                $('.error').show();
            }
            else
            {
                $.ajax({
                    data: $.post('install_product.php', {productvars: arr}),
                    type: "POST",
                    success: function(){
                        $(".productinfo").attr('checked', false);
                        $('.success').show();
                        $('.error').hide();
                    }
                });
            }
            return false;
        }));
    });
</script> 
```

而 HTML+PHP 代码是，

```
$json = file_get_contents(feed address);
$products = json_decode($json);
foreach(products as product){
    // define various $productvars as a string
    <input type="checkbox" class="productvars" name="productinfo[]" value="<?php echo $productvars; ?>" />
}
<input type="submit" class="submit" value="Install Product" />

<span class="error" style="display:none"><font color="red">No product selected.</font></span>
<span class="success" style="display:none"><font color="green">product successfully added to database.</font></span> 
```

当我从提要中提取产品信息时，我不想刷新页面，这就是我使用 AJAX 发布方法的原因。使用上面的代码“install_product.php”页面可以正确处理字符串并正确完成其工作。

我面临的问题是，当我第一次选中复选框并安装产品时，它工作得非常好，但在第一次发布“有时它工作，有时它不起作用”之后。由于从提要中提取了新列表，因此每个第一篇文章都是完美的，之后我需要一次又一次地单击安装按钮才能这样做。

我在不同的浏览器上测试了代码，但同样的问题。可能是什么问题？（我在实时主机而不是本地主机上测试代码）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:44:19.007

`$.live`已弃用，请考虑`$.on()`改用。

哪个函数执行一次后没有执行？`$.live`?

此外，它应该是：

```
var data = $(this).serialize(); 
```

不是

```
var data = $("this").serialize(); 
```

在您的示例中，您正在寻找一个名为“this”的显式标签，而不是一个范围。

**更新**

```
$(function () {
    $(".submit")
        .live('click', function(event) {

        var data = $(this).serialize();

        var arr = $("input[name='productinfo[]']:checked")
            .map(function () {
            return this.value;
        })
            .get();
        if (arr == '') {
            $('.success')
                .hide();
            $('.error')
                .show();
        } else {
            $.ajax({
                data: $.post('install_product.php', {
                    productvars: arr
                }),
                type: "POST",
                success: function () {
                    $(".productinfo")
                        .attr('checked', false);
                    $('.success')
                        .show();
                    $('.error')
                        .hide();
                }
            });
        }

        event.preventDefault();

    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:43:59.257

是否有可能，它缺少 arr 的值并显示错误，或者它是否正在拨打电话但没有返回，或者它根本没有到达电话？做一个 console.log 来处理调试并在 firefox / chrome 中检查并查看问题所在和位置。

# monitoring - Icinga check_jboss "NRPE: 无法读取输出"

> ID：12595894
> 
> 赞同：1
> 
> 时间：2012-09-26T06:38:30.933
> 
> 标签：monitoring, nagios, nrpe

我`Icinga`用来监控一些服务器和服务。他们中的大多数运行良好。但现在我喜欢通过`NRPE`. 因此，我正在使用`check_jboss`来自 MonitoringExchange 的 -Plugin。虽然每次我尝试通过 NRPE 从我的 Icinga-Server 运行测试命令时，我都会得到一个`NRPE: unable to read output`错误。当我尝试直接在受监控的服务器上执行命令时，它运行良好。奇怪的是，受监控服务器上的执行需要大约 5 秒才能返回可接受的结果，但 NRPE-Exceution 立即返回错误。尝试设置 NRPE 超时并没有解决问题。我还检查了 check_jboss-plugin 的权限并将它们设置为“777”，这样就不应该出现错误。我不认为 N​​RPE 存在一个常见问题，因为还有一些通过 NRPE 进行的其他检查（例如 check_load、check_disk、...）并且它们都运行良好。这些插件的权限类似于我的 check_jboss-Plugin。

在运行良好的受监控服务器上执行一个示例执行后：

```
/usr/lib64/nagios/plugins/check_jboss.pl -T ServerInfo -J jboss.system -a MaxMemory -w 3000: -c 2000: -f
JBOSS OK - MaxMemory is 4049076224 | MaxMemory=4049076224 
```

这是我的 Icinga-Server 通过 NRPE 执行的两个命令。两个命令都正确

```
./check_nrpe -H xxx.xxx.xxx.xxx -c check_hda1
DISK OK - free space: / 47452 MB (76% inode=97%);| /=14505MB;52218;58745;0;65273
./check_nrpe -H xxx.xxx.xxx.xxx -c jboss_MaxMemory
NRPE: Unable to read output 
```

有人对我有提示吗？如果需要更多配置信息，请询问:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T11:59:53.710

尝试通过全局禁用 SELinux 或将 SELinux 类型更改为 `nagios_unconfined_plugin_exec_t`.

# jquery - 使输入键充当文本框上的 Tab 键

> ID：12595897
> 
> 赞同：0
> 
> 时间：2012-09-26T06:38:36.067
> 
> 标签：jquery, asp.net

如何使用 jQuery 使`Enter`key 在 asp.net 中充当`Tab`key 一个文本框？

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>

 <script type="text/javascript">
     $(document).ready(function () {

         var inputs = $(':input').keypress(function (e) {
             if (e.which == 13) {
                 e.preventDefault();
                 var nextInput = inputs.get(inputs.index(this) + 1);
                 if (nextInput) {
                     nextInput.focus();
                 }
             }
         });

     });                                    
 </script>     
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:TextBox ID="TextBox3" runat="server"></asp:TextBox>

        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
        <asp:TextBox ID="TextBox2" runat="server" TabIndex="3"></asp:TextBox>

    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T06:41:17.683

```
$("input").bind("keydown", function(event) {
    if (event.which === 13) {
        event.stopPropagation();
        event.preventDefault();
        $(this).next("input").focus();
    }
}); 
```

# java - 对多线程 java 程序使用 LinkedBlockingQueue 是否足够好？

> ID：12595900
> 
> 赞同：8
> 
> 时间：2012-09-26T06:38:43.010
> 
> 标签：java, multithreading, queue

我有一个消费者和一个生产者，它们从队列中添加和删除 Item 对象。如果我使用`put()`and`take()`方法。我还需要解决任何线程安全问题吗？这类似于有界缓冲区问题，我只是想知道是否使用阻塞队列代替了对信号量或监视器的需求。Item 对象本身可能需要同步（setter 但 getter 不需要锁），对吗？最后，我不太确定如何测试它是否是线程安全的，因为我不能同时让两个线程调用，`take()`因为执行顺序不确定。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T06:59:17.710

对于您正在做的事情来说，它是完全线程安全的，事实上这就是它的设计目的。[`BlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)（这是由 实现的接口）的描述`LinkedBlockingQueue`状态：

> BlockingQueue 实现是线程安全的。所有排队方法都使用内部锁或其他形式的并发控制以原子方式实现其效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-08T04:03:30.153

同时 put() 和 take()**不是** **线程安全的**，因为它们使用 2 个不同的锁。

这已经在这里得到了回答：[LinkedBlockingQueue 的插入和删除方法是线程安全的吗？](https://stackoverflow.com/questions/2695426/are-linkedblockingqueues-insert-and-remove-methods-thread-safe)

# java - 如何通过java程序运行windows命令（cd programfiles..etc）

> ID：12595901
> 
> 赞同：2
> 
> 时间：2012-09-26T06:38:42.990
> 
> 标签：java

我想问我们可以在 Windows 中运行命令，就像我通过键入 cmd 打开命令提示符一样。C:/> cd programFiles C:/>cd anydir

我想问我可以从java运行这些命令吗？就像我想`cd programfiles`通过java运行命令一样。我可以做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:46:09.597

您可以按如下方式使用[ProcessBuilder类：](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)

```
public static void main(String [] args) throws IOException 
{                
    String[] command = {"CMD", "/C", "dir"};
    // ProcessBuilder will execute process named 'CMD' and will provide '/C' and 'dir' as command line arguments to 'CMD'

    ProcessBuilder pbuilder = new ProcessBuilder(command);
    Process process = probuilder.start();

    //Wait for process to finish
    try 
    {            
        int exitValue = process.waitFor();
        System.out.println("\n\nExit Value is " + exitValue);        
    } 
    catch (InterruptedException e) 
    {            
        e.printStackTrace();        
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:44:09.677

请参阅我对一些人认为有用的类似问题的[回答。](https://stackoverflow.com/a/10686005/948268)就这个：

您可以使用[Runtime.exec(java.lang.String, java.lang.String[], java.io.File)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec%28java.lang.String,%20java.lang.String%5B%5D,%20java.io.File%29)在其中设置工作目录。

否则，您可以按如下方式使用[ProcessBuilder ：](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)

```
ProcessBuilder pb = new ProcessBuilder("myCommand", "myArg1", "myArg2");
pb.directory(new File("myDir"));
Process p = pb.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:41:09.823

如果您想更改工作目录，则有内置函数。如果要运行命令，请参见[示例](http://www.java-samples.com/showtutorial.php?tutorialid=8)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T06:41:41.133

这用于使用 Java 运行命令行命令

```
 Runtime.getRuntime().exec() 
```

# .net - 内存缓存还是并发字典？

> ID：12595911
> 
> 赞同：46
> 
> 时间：2012-09-26T06:39:13.827
> 
> 标签：.net, wcf, caching

我希望在 WCF 服务的请求级别实现缓存。对该服务的每个请求都会执行大量的数据库调用。考虑多个数据收集器。我们需要允许一个数据收集器访问前一个数据收集器已经检索到的信息。

我希望通过为每个请求创建一个特定的实例来为此使用新的 .Net 4.0 内存缓存。

这是一个好主意吗 ？还是我应该简单地使用 Dictionary 对象？

顺便说一句：数据收集将是并行的，因此锁定会更加复杂，但我也可以使用并发收集。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-09-26T06:55:51.723

如果您不需要某种过期逻辑，我建议您使用并发集合。您可以轻松实现[单个条目缓存机制](http://reedcopsey.com/2011/01/16/concurrentdictionarytkeytvalue-used-with-lazyt/)组合`ConcurrentDictionary`和`Lazy`类。这是关于 Lazy 和 ConcurrentDictionary 组合的[另一个链接。](https://codereview.stackexchange.com/questions/2025/extension-methods-to-make-concurrentdictionary-getoradd-and-addorupdate-thread-s)

如果您需要您的项目过期，那么您最好使用内置的 MemoryCache 并实现[双重检查锁定模式](https://stackoverflow.com/questions/394898/double-checked-locking-in-net)以保证缓存项目的单次检索。[可以在正确使用 .NET MemoryCache](https://stackoverflow.com/questions/21269170/locking-pattern-for-proper-use-of-net-memorycache)的锁定模式中找到双重检查锁定的现成实现

# c# - C# 读取 Resources 文件夹中的 XML 文件

> ID：12595916
> 
> 赞同：0
> 
> 时间：2012-09-26T06:39:41.950
> 
> 标签：c#, xml

我正在尝试读取一些 xml 文件，这些文件包含在我的项目下的 Resources 文件夹中。下面是我的代码：

```
public void ReadXMLFile(int TFType)
{
        XmlTextReader reader = null;

        if (TFType == 1)
            reader = new XmlTextReader(MyProject.Properties.Resources.ID01);
        else if (TFType == 2)
            reader = new XmlTextReader(MyProject.Properties.Resources.ID02);

        while (reader.Read())
        {
            if (reader.IsStartElement())
            {
                switch (reader.Name)
                {
                    case "Number":
                   // more coding on the cases.
} 
```

但是当我编译时，“QP2020E.Properties.Resources.ID01”出现错误：“路径中有非法字符。” 你们知道怎么回事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:53:59.227

The XmlTextReader constructor requires either a stream or a string. The one that requires a string is expecting a url (or path). You are passing it the value of your resource. You'll need to convert the string value into a stream.

To do this Wrap it in a StringReader(...)

```
reader = new XmlTextReader(new StringReader(MyProject.Properties.Resources.ID02)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:22:13.407

您应该提供`XMLTextReader`文件路径而不是文件内容。例如，改变

```
reader = new XmlTextReader(MyProject.Properties.Resources.ID01); 
```

至：

```
StringReader s = new StringReader(MyProject.Properties.Resources.XmlFile);
XmlTextReader r = new XmlTextReader(s); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:59:51.207

要从资源中读取 XML 文件，请使用此[答案中描述的 XDocument.Parse](https://stackoverflow.com/questions/337535/reading-xml-file-from-a-resource)

我认为你需要修改你的代码是这样的：

```
public void ReadXMLFile(int TFType)
{
        XDocument doc = null;

        if (TFType == 1)
            doc = XDocument.Parse(MyProject.Properties.Resources.ID01);
        else if (TFType == 2)
            doc = XDocument.Parse(MyProject.Properties.Resources.ID02);

        // Now use 'doc' as an XDocument object
} 
```

[关于XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)的更多信息在这里。

# c# - 在asp.net中使用c#进行会话管理

> ID：12595918
> 
> 赞同：1
> 
> 时间：2012-09-26T06:39:48.830
> 
> 标签：c#, asp.net, c#-4.0

我想在 asp.net 应用程序中进行会话管理，所以当我注销时，我的其他 aspx 页面无法打开。

请告诉我简单的方法。

我是 c# 和 Asp.net 的新手，所以请忽略我的提问方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:07:01.450

当用户注销时。执行以下操作

```
Session.Clear();
Session.Abandon(); 
```

在母版页（或所有其他需要限制的页面）上，检查

```
If (Session["sessionname"] == null)
{
Respones.Redirect("MyTimeOutPage.aspx");
} 
```

-米林德

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T06:46:37.763

恕我直言，*简单的方法*是完成一些教程，例如[构建安全的 ASP.NET 应用程序](http://msdn.microsoft.com/en-us/library/ff649227.aspx)

这里没有灵丹妙药，您必须了解底层框架在做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:02:04.373

尝试使用[Authentication and Authorization](http://www.codeproject.com/Articles/98950/ASP-NET-authentication-and-authorization)。

这将很容易并在您的项目中为您提供帮助。

您也可以使用 SessionManagement。如果是这样，试试这些链接

[ASP.NET 状态管理技术](http://www.c-sharpcorner.com/UploadFile/freelance91/ASPNETstatemanagementtechniques01012007212655PM/ASPNETstatemanagementtechniques.aspx)和

[ASP.NET 中的会话管理](http://www.codeproject.com/Articles/5892/Session-Management-in-ASP-NET)

# php - 使用 ImageMagick 改进从平面图像到 3d 模型的转换链

> ID：12595924
> 
> 赞同：2
> 
> 时间：2012-09-26T06:40:18.360
> 
> 标签：php, image-processing, imagemagick, exec, thumbnails

我想知道改进或缩短 ImageMagick 转换的方法（我自己对 ImageMagick 很陌生）。

我所拥有的是一个平面图像（左侧为 1）和一个具有透明区域（右侧为 1，虚线被填充，蓝色和灰色是实心的顶部）的 3d 模型，这些区域填充了转换后的平面图像。

我玩弄了几个 ImageMagick 命令，并在此处为每个步骤列出它们（没有实数）。我正在寻找的是如何缩短/组合此序列以及为获得最终图像而创建的辅助图像的数量：

1.  我给定的输入图像。（向下滚动到 5。看看这两者应该如何结合以获得我想要的输出......）

2.  裁剪 Flash 图像并将生成的两个部分倾斜（我注意到裁剪命令会将裁剪结果吐出并溢出，因此我使用它来分隔平面图像的两侧）：

    ```
    # sequence for left side:
    convert base.png -crop WxH parts.png
    convert parts-0.png -virtual-pixel transparent -distort Perspective /
            '....' (-resize WxH) front-skewed.png

    #[... same for the right side ...] 
    ```

3.  组合倾斜的部分：

    ```
    convert front-skewed.png side-skewed.png +append fill.png 
    ```

4.  结合倾斜填充和模型封面/蒙版，以便填充插入到 cover.png 的透明部分（右图）：

    ```
    composite fill.png cover.png -compose dst-atop -matte final.png 
    ```

5.  删除不需要的中间图像后的结果。

![我的流程步骤的插图](../Images/004481ff7114859dca0cca8ca67d1255.png)

我将通过 PHP 从 PHP 运行它`exec`，因此欢迎任何有关如何更顺利地执行此操作的提示。我想我必须将每个转换称为单独的`exec`调用，不是吗？

这不会过度运行，但只会在添加新图像时偶尔运行，因此性能对我来说并不是那么重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:54:31.923

在许多情况下，您可以将“链接”的单独的 ImageMagick 命令（即以下命令使用前一个命令的输出图像作为输入图像）放入一个命令中。

既然你...

*   ...都不单独提供您的输入图像（您的 [good!] 插图具有“一体式”），
*   ...也不是您确切的单独 IM 命令，...

...我不倾向于构建自己的示例图像和示例命令来演示和举例说明这种方法。

我将仅向您指出这些资源：

*   [使用有序的图像列表](http://www.imagemagick.org/Usage/basics/#image_list)
*   [在有序的图像列表中“克隆”或“复制”图像](http://www.imagemagick.org/Usage/basics/#clone)
*   [括号——“侧面”处理图像](http://www.imagemagick.org/Usage/basics/#parenthesis)
*   [排序图像操作](http://www.imagemagick.org/Usage/basics/#seq_combine)
*   [调试复杂的操作序列](http://www.imagemagick.org/Usage/basics/#complex)

# gwt-celltable - 如何将clickhandler添加到celltablebuilder的子行

> ID：12595925
> 
> 赞同：4
> 
> 时间：2012-09-26T06:40:28.760
> 
> 标签：gwt-celltable, gwt-2.5

我可以使用 celltablebuilder 构建自定义行。单击特定的锚单元格时，我可以为该行构建额外的子行。这个子行有按钮，当点击按钮时我做了一些动作。我可以在子行中添加带有 clickhandler 的按钮，但是当单击按钮时没有发生任何事情，clickhandler 没有触发。

任何人都可以帮忙。

```
protected void buildRowImpl(GridDTO rowValue, int absRowIndex ) {
  buildRows(rowValue, absRowIndex, true);
  if (showingFriends.contains(rowValue.getComponentId())) {
     buildAdditonalRows( absRowIndex, gridDTO);
  }

}
private void buildAdditonalRows(int index, GridDTO rowValue, ){ 
     TableRowBuilder row = startRow();
     td = row.startTD();
     if(rowValue.getXpath() != null){
    //td.text(rowValue.getXpath());
    renderCell(td, createContext(1), cellTable.getColumn(1), rowValue);
 }else{
    td.text("");
 }
     td.endTD();
     td = row.startTD();
     Button button = new Button ();
 button.setText("Save");
 button.addClickHandler(new ClickHandler() {
 @Override
 public void onClick(ClickEvent event) {
     Window.alert("ssss");
     }
 });
 DivBuilder div = td.startDiv();
 div.html(new afeHtmlBuilder().appendHtmlConstant(button.toString()).toSafeHtml());
 div.end();
     td.endTD();
     row.endTR();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-16T11:52:50.927

CellPreviewEvent 提供子索引。您可以使用它来获取子行值。示例用法：

```
dataGrid.addCellPreviewHandler(new CellPreviewEvent.Handler<TreeItem>() {
    @Override
    public void onCellPreview(final CellPreviewEvent<TreeItem> event) {
        if(event.getNativeEvent().getType().equals(BrowserEvents.CLICK)){
             if(event.getContext().getSubIndex()>0){
                    event.getValue().getChild(event.getContext().getSubIndex()-1);
             }
        }
    }
}); 
```

或者您可以使用 selectionMode 提供自定义 CellPreviewEvent.Handler 实现。有关更多详细信息，您可以查看[AbstractHasData](http://www.gwtproject.org/javadoc/latest/com/google/gwt/user/cellview/client/AbstractHasData.html#setSelectionModel(com.google.gwt.view.client.SelectionModel,%20com.google.gwt.view.client.CellPreviewEvent.Handler))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:48:45.757

我有类似的情况，我需要一个单元格内的小部件来监听点击事件......我发现一旦你将小部件插入到单元格中，它就不会响应事件（换句话说，只有实际的构成小部件的 HTML 被放入单元格中，不包括任何类型的事件处理）。解决方法是将事件添加到单元格（您可以为该特定单元格小部件创建自定义单元格类并覆盖 OnBrowserEvent 以侦听事件。）

请参阅[GWT：关于将自定义小部件添加到自定义小部件的 celltable 丢失事件以](https://stackoverflow.com/questions/6923797/gwt-on-adding-custom-widget-to-celltable-losing-events-of-the-custom-widgets)获得更雄辩的解释和示例代码。

# java - 多个if条件，如何优化

> ID：12595930
> 
> 赞同：1
> 
> 时间：2012-09-26T06:40:40.960
> 
> 标签：java

我正在开发一个具有不同条件（ifs）和与之关联的不同方法的大型应用程序。请提出一种优化下面提到的代码的方法（尽可能减少嵌套的 ifs）。我希望代码能够合并任何其他特定条件轻松。（我使用属性文件来获取条件）。

```
 public getParameter(String parameter)
    {
      if(parameter=specific condition1
        ||parameter=specific condition2)
      {
      do this
      }
      if(parameter=specific condition3)
      {
       do something else
      }
      if(parameter=specific condition4)
      {
       do something else
      }
      if(parameter=general condition)
      {
       do something else
      }
      else  {
       do something else
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:56:06.730

假设您有一个属性文件

```
do1=val1,val2,val3
do2=val5,val6,val7 
```

（看来你有一套固定的行动）

你可以加载它

```
 HashMap<String, HashSet<String>> rules = new HashMap<String, HashSet<String>>();
    for(String key : properties.stringPropertyNames()) {
        HashSet<String> set = new HashSet<String>();
        set.addAll(Arrays.asList(properties.getProperty(key).split(",")));
        rules.put(key, set);
    } 
```

现在您有一个将动作名称（“do1”等）链接到可能值集（“val1”等）的映射。

您可以执行规则

```
 if (rules.get("do1").contains(parameter)) do1();
    if (rules.get("do2").contains(parameter)) do2(); 
```

（例如，我让您添加必要的检查以避免空指针异常）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:43:41.103

您可以使用开关盒。

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)

# python - Python - 在可能重写 url 时确定正确的基本 url

> ID：12595931
> 
> 赞同：1
> 
> 时间：2012-09-26T06:40:49.770
> 
> 标签：python, url-rewriting, web-scraping, base-url

我通常查找完整网址的方法是：

```
resp = urllib.request.urlopen('http://www.example.com')
base_url = resp.geturl()
# find the wanted (relative) url in the resp by using BeautifulSoup4
full_url = urljoin(base_url, relative_url) 
```

但是，对于某些网站，例如[http://www.titanquest.net/tq-forum/forums/72-Underlord](http://www.titanquest.net/tq-forum/forums/72-Underlord)， base_url 和 full_url 是错误的，因为 url 被重写（我假设）如下所示：

```
>>> full_url
'http://www.titanquest.net/tq-forum/forums/72-Underlord'
>>> relative_url
'threads/43456-Epic-items?s=26260c54fd856499bff7a57e3c7ceb94'
>>> urljoin(full_url, relative_url)
'http://www.titanquest.net/tq-forum/forums/threads/43456-Epic-items?s=26260c54fd856499bff7a57e3c7ceb94' 
```

正确的网址应该是：

```
http://www.titanquest.net/tq-forum/threads/43456-Epic-items?s=26260c54fd856499bff7a57e3c7ceb94 
```

我的问题是如何生成正确的 base_url 和 full_url。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:59:19.497

您的浏览器通常确实使用当前页面的位置作为相对 URL 的基础，并且您的使用`urljoin`正确地模拟了该行为。

但是，如果返回的 HTML 包含一个[`<base />`tag](http://www.w3.org/TR/html401/struct/links.html#h-12.4)，浏览器将使用该 tag 命名的 url 作为解析相对 URL 的基础。`<base />`标签是 HTML 头部的一部分。

您需要解析 的响应`http://www.titanquest.net/tq-forum/forums/72-Underlord`以确定是否存在这样的标签，然后使用*其*值而不是页面的 URL 来确定相对 URL。`<base href="link" />`链接值*本身*可能是相对的，在这种情况下，您必须首先根据文档位置将其设为绝对值。

在这种特殊情况下，网页包含这样一个`<base />`标签：

```
<base href="http://www.titanquest.net/tq-forum/" /><!--[if IE]></base><![endif]--> 
```

# silverlight - Silverlight中客户端浏览器的内部高度

> ID：12595934
> 
> 赞同：0
> 
> 时间：2012-09-26T06:40:59.130
> 
> 标签：silverlight

我有银色灯应用程序。我想要浏览器的内部高度，我在 localHost 中运行时得到了它，但是当我部署它时，它会给我类似的错误。

对象引用未设置为对象的实例

我使用以下代码来获取浏览器的内部高度。

以下代码位于客户端。我已在服务器端设置分辨率。

```
HtmlPage.Window.GetProperty("innerHeight"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:01:58.780

我想**Application.Current.MainWindow**应该在浏览器外应用程序中为您提供帮助。

关于Out [-of-Browser Application 的好文章](http://www.silverlight.net/learn/overview/out-of-browser-applications/building-an-out-of-browser-application)可能对您有用。

# c - 使用 Makefile 将新文件添加到 C 项目

> ID：12595938
> 
> 赞同：0
> 
> 时间：2012-09-26T06:41:08.297
> 
> 标签：c, netbeans, makefile, snort

[我正在尝试将新文件添加到名为snort](http://www.snort.org)的开源软件的源代码中以对其进行扩展。这个项目基于 Makefile，我使用 netbeans IDE。我想将名为 my_new_file.h 和 my_new_file.c 的文件添加到该项目中。我调查了 Makefile 并将我的文件名添加到我看到的源文件和目标文件列表的末尾；您只需在此页面中搜索 my_new_file (ctrl+F) 即可看到。在此之后，项目构建良好；但是当我想运行该软件时，我看到错误指出我在 my_new_file 中定义的新函数的定义未找到。

/libsf_sip_preproc.so：未定义符号：my_new_func

所有这些包都将被编译并链接到一些共享对象文件中。我看到我的源的目标文件已生成，但我认为它们没有正确链接到 makefile。我使用的 mekefile 是通过使用 configure 脚本混合 makefile.in 和 makefile.am 自动生成的。我在下面附上了整个主要的makefile。如果有人知道我如何编辑这个 makefile 来编译并将我的源代码链接到主项目，我将非常感激。

这是 make.am 文件：

```
## $Id
AUTOMAKE_OPTIONS=foreign no-dependencies

INCLUDES = -I../include -I${srcdir}/../libs -I$(srcdir)/includes

libdir = ${exec_prefix}/lib/snort_dynamicpreprocessor

lib_LTLIBRARIES = libsf_sip_preproc.la

libsf_sip_preproc_la_LDFLAGS = -shared -export-dynamic -module @XCCFLAGS@
if SO_WITH_STATIC_LIB
libsf_sip_preproc_la_LIBADD = ../libsf_dynamic_preproc.la
else
nodist_libsf_sip_preproc_la_SOURCES = \
../include/sf_dynamic_preproc_lib.c \
../include/sf_ip.c \
../include/sfPolicyUserData.c
endif

libsf_sip_preproc_la_SOURCES = \
spp_sip.c \
spp_sip.h \
sip_config.c \
sip_config.h \
sip_parser.c \
sip_parser.h \
sip_dialog.c \
sip_dialog.h \
sip_roptions.c \
sip_roptions.h \
sip_utils.c \
sip_utils.h \
sip_debug.h \
my_new_file.c \
my_new_file.h

EXTRA_DIST = \
sf_sip.dsp

all-local: $(LTLIBRARIES)
    $(MAKE) DESTDIR=`pwd`/../build install-libLTLIBRARIES 
```

这是使用 makefile.am 和 makefile.in 通过配置脚本生成的主要 Maikefile：

```
# Makefile.in generated by automake 1.11.1 from Makefile.am.
# src/dynamic-preprocessors/sip/Makefile.  Generated from Makefile.in by configure.

pkgdatadir = $(datadir)/snort
pkgincludedir = $(includedir)/snort
pkglibdir = $(libdir)/snort
pkglibexecdir = $(libexecdir)/snort
am__cd = CDPATH="$${ZSH_VERSION+.}$(PATH_SEPARATOR)" && cd
install_sh_DATA = $(install_sh) -c -m 644
install_sh_PROGRAM = $(install_sh) -c
install_sh_SCRIPT = $(install_sh) -c
INSTALL_HEADER = $(INSTALL_DATA)
transform = $(program_transform_name)
NORMAL_INSTALL = :
PRE_INSTALL = :
POST_INSTALL = :
NORMAL_UNINSTALL = :
PRE_UNINSTALL = :
POST_UNINSTALL = :
build_triplet = i686-pc-linux-gnu
host_triplet = i686-pc-linux-gnu
subdir = src/dynamic-preprocessors/sip
DIST_COMMON = $(srcdir)/Makefile.am $(srcdir)/Makefile.in
ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
am__aclocal_m4_deps = $(top_srcdir)/m4/libprelude.m4 \
    $(top_srcdir)/configure.in
am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
    $(ACLOCAL_M4)
mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
CONFIG_HEADER = $(top_builddir)/config.h
CONFIG_CLEAN_FILES =
CONFIG_CLEAN_VPATH_FILES =
am__vpath_adj_setup = srcdirstrip=`echo "$(srcdir)" | sed 's|.|.|g'`;
am__vpath_adj = case $$p in \
    $(srcdir)/*) f=`echo "$$p" | sed "s|^$$srcdirstrip/||"`;; \
    *) f=$$p;; \
  esac;
am__strip_dir = f=`echo $$p | sed -e 's|^.*/||'`;
am__install_max = 40
am__nobase_strip_setup = \
  srcdirstrip=`echo "$(srcdir)" | sed 's/[].[^$$\\*|]/\\\\&/g'`
am__nobase_strip = \
  for p in $$list; do echo "$$p"; done | sed -e "s|$$srcdirstrip/||"
am__nobase_list = $(am__nobase_strip_setup); \
  for p in $$list; do echo "$$p $$p"; done | \
  sed "s| $$srcdirstrip/| |;"' / .*\//!s/ .*/ ./; s,\( .*\)/[^/]*$$,\1,' | \
  $(AWK) 'BEGIN { files["."] = "" } { files[$$2] = files[$$2] " " $$1; \
    if (++n[$$2] == $(am__install_max)) \
      { print $$2, files[$$2]; n[$$2] = 0; files[$$2] = "" } } \
    END { for (dir in files) print dir, files[dir] }'
am__base_list = \
  sed '$$!N;$$!N;$$!N;$$!N;$$!N;$$!N;$$!N;s/\n/ /g' | \
  sed '$$!N;$$!N;$$!N;$$!N;s/\n/ /g'
am__installdirs = "$(DESTDIR)$(libdir)"
LTLIBRARIES = $(lib_LTLIBRARIES)
libsf_sip_preproc_la_DEPENDENCIES =  \
    ../libsf_dynamic_preproc.la
am_libsf_sip_preproc_la_OBJECTS = spp_sip.lo sip_config.lo \
    sip_parser.lo sip_dialog.lo sip_roptions.lo sip_utils.lo \
    my_new_file.lo

#nodist_libsf_sip_preproc_la_OBJECTS =  \
#   sf_dynamic_preproc_lib.lo sf_ip.lo \
#   sfPolicyUserData.lo
libsf_sip_preproc_la_OBJECTS = $(am_libsf_sip_preproc_la_OBJECTS) \
    $(nodist_libsf_sip_preproc_la_OBJECTS)
libsf_sip_preproc_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
    $(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
    $(libsf_sip_preproc_la_LDFLAGS) $(LDFLAGS) -o $@
DEFAULT_INCLUDES = -I. -I$(top_builddir)
depcomp =
am__depfiles_maybe =
COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \
    $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
LTCOMPILE = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
    --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) \
    $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
CCLD = $(CC)
LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
    --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
    $(LDFLAGS) -o $@
SOURCES = $(libsf_sip_preproc_la_SOURCES) \
    $(nodist_libsf_sip_preproc_la_SOURCES)
DIST_SOURCES = $(libsf_sip_preproc_la_SOURCES)
ETAGS = etags
CTAGS = ctags
DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
ACLOCAL = ${SHELL} /usr/local/src/snort-2.9.2.2/missing --run aclocal-1.11
AMTAR = ${SHELL} /usr/local/src/snort-2.9.2.2/missing --run tar
AR = ar
AUTOCONF = ${SHELL} /usr/local/src/snort-2.9.2.2/missing --run autoconf
AUTOHEADER = ${SHELL} /usr/local/src/snort-2.9.2.2/missing --run autoheader
AUTOMAKE = ${SHELL} /usr/local/src/snort-2.9.2.2/missing --run automake-1.11
AWK = mawk
CC = /usr/bin/gcc
CCDEPMODE = depmode=gcc3
CCONFIGFLAGS =  -DSF_VISIBILITY -fvisibility=hidden
CFLAGS = -g3 -gdwarf-2 -DSF_VISIBILITY -fvisibility=hidden -fno-strict-aliasing -Wall
CONFIGFLAGS =  -DSF_WCHAR -DSUP_IP6 -DTARGET_BASED -DPERF_PROFILING -DSNORT_RELOAD -DNORMALIZER -DACTIVE_RESPONSE
CPP = /usr/bin/gcc -E
CPPFLAGS = -I/usr/local/include -DDYNAMIC_PLUGIN -I/usr/local/include -DZLIB -DGRE -DMPLS -DPREPROCESSOR_AND_DECODER_RULE_EVENTS -DPPM_MGR -DENABLE_PAF -DENABLE_REACT -DENABLE_RESPOND -DENABLE_RESPONSE3 -DSF_WCHAR -DSUP_IP6 -DTARGET_BASED -DPERF_PROFILING -DSNORT_RELOAD -DNORMALIZER -DACTIVE_RESPONSE
CYGPATH_W = echo
DEFS = -DHAVE_CONFIG_H
DEPDIR = .deps
DLLTOOL = false
DSYMUTIL = 
DUMPBIN = 
ECHO_C = 
ECHO_N = -n
ECHO_T = 
EGREP = /bin/grep -E
EXEEXT = 
FGREP = /bin/grep -F
GREP = /bin/grep
ICONFIGFLAGS = 
INCLUDES = -I../include -I${srcdir}/../libs -I$(srcdir)/includes
INSTALL = /usr/bin/install -c
INSTALL_DATA = ${INSTALL} -m 644
INSTALL_PROGRAM = ${INSTALL}
INSTALL_SCRIPT = ${INSTALL}
INSTALL_STRIP_PROGRAM = $(install_sh) -c -s
LD = /usr/bin/ld
LDFLAGS =  -L/usr/local/lib -lpcre -L/usr/local/lib -ldnet
LEX = flex
LIBOBJS = 
LIBPRELUDE_CFLAGS = 
LIBPRELUDE_CONFIG = 
LIBPRELUDE_CONFIG_PREFIX = 
LIBPRELUDE_LDFLAGS = 
LIBPRELUDE_LIBS = 
LIBPRELUDE_PREFIX = 
LIBPRELUDE_PTHREAD_CFLAGS = 
LIBS = -lz -ldaq_static -ldnet -lpcre -lpcap -lnsl -lm -lm  -ldl -L/usr/local/lib -ldaq_static_modules  -lsfbpf -lpcap -lsfbpf -lpcap -lz -lpthread -lpthread -lpthread
LIBTOOL = $(SHELL) $(top_builddir)/libtool
LIPO = 
LN_S = ln -s
LTLIBOBJS = 
MAINT = #
MAKEINFO = ${SHELL} /usr/local/src/snort-2.9.2.2/missing --run makeinfo
MANIFEST_TOOL = :
MKDIR_P = /bin/mkdir -p
NM = /usr/bin/nm -B
NMEDIT = 
OBJDUMP = objdump
OBJEXT = o
OTOOL = 
OTOOL64 = 
PACKAGE = snort
PACKAGE_BUGREPORT = 
PACKAGE_NAME = 
PACKAGE_STRING = 
PACKAGE_TARNAME = 
PACKAGE_URL = 
PACKAGE_VERSION = 
PATH_SEPARATOR = :
PKG_CONFIG = 
PKG_CONFIG_LIBDIR = 
PKG_CONFIG_PATH = NONE/lib/pkgconfig:
RANLIB = ranlib
RAZORBACK_CFLAGS = 
RAZORBACK_LIBS = 
SED = /bin/sed
SET_MAKE = 
SHELL = /bin/bash
SIGNAL_SNORT_DUMP_STATS = 
SIGNAL_SNORT_READ_ATTR_TBL = 
SIGNAL_SNORT_RELOAD = 
SIGNAL_SNORT_ROTATE_STATS = 
STRIP = strip
VERSION = 2.9.2.2
XCCFLAGS = 
YACC = bison -y
abs_builddir = /usr/local/src/snort-2.9.2.2/src/dynamic-preprocessors/sip
abs_srcdir = /usr/local/src/snort-2.9.2.2/src/dynamic-preprocessors/sip
abs_top_builddir = /usr/local/src/snort-2.9.2.2
abs_top_srcdir = /usr/local/src/snort-2.9.2.2
ac_ct_AR = ar
ac_ct_CC = /usr/bin/gcc
ac_ct_DUMPBIN = 
am__include = include
am__leading_dot = .
am__quote = 
am__tar = ${AMTAR} chof - "$$tardir"
am__untar = ${AMTAR} xf -
bindir = ${exec_prefix}/bin
build = i686-pc-linux-gnu
build_alias = 
build_cpu = i686
build_os = linux-gnu
build_vendor = pc
builddir = .
datadir = ${datarootdir}
datarootdir = ${prefix}/share
docdir = ${datarootdir}/doc/${PACKAGE}
dvidir = ${docdir}
exec_prefix = ${prefix}
extra_incl = -I/usr/include/pcap
host = i686-pc-linux-gnu
host_alias = 
host_cpu = i686
host_os = linux-gnu
host_vendor = pc
htmldir = ${docdir}
includedir = ${prefix}/include
infodir = ${datarootdir}/info
install_sh = ${SHELL} /usr/local/src/snort-2.9.2.2/install-sh
libdir = ${exec_prefix}/lib/snort_dynamicpreprocessor
libexecdir = ${exec_prefix}/libexec
localedir = ${datarootdir}/locale
localstatedir = ${prefix}/var
mandir = ${datarootdir}/man
mkdir_p = /bin/mkdir -p
oldincludedir = /usr/include
pdfdir = ${docdir}
prefix = /usr/local
program_transform_name = s,x,x,
psdir = ${docdir}
sbindir = ${exec_prefix}/sbin
sharedstatedir = ${prefix}/com
srcdir = .
sysconfdir = ${prefix}/etc
target_alias = 
top_build_prefix = ../../../
top_builddir = ../../..
top_srcdir = ../../..
AUTOMAKE_OPTIONS = foreign no-dependencies
lib_LTLIBRARIES = libsf_sip_preproc.la
libsf_sip_preproc_la_LDFLAGS = -shared -export-dynamic -module 
libsf_sip_preproc_la_LIBADD = ../libsf_dynamic_preproc.la
#nodist_libsf_sip_preproc_la_SOURCES = \
#../include/sf_dynamic_preproc_lib.c \
#../include/sf_ip.c \
#../include/sfPolicyUserData.c

libsf_sip_preproc_la_SOURCES = \
spp_sip.c \
spp_sip.h \
sip_config.c \
sip_config.h \
sip_parser.c \
sip_parser.h \
sip_dialog.c \
sip_dialog.h \
sip_roptions.c \
sip_roptions.h \
sip_utils.c \
sip_utils.h \
sip_debug.h \
my_new_file.c \
my_new_file.h

EXTRA_DIST = \
sf_sip.dsp

all: all-am

.SUFFIXES:
.SUFFIXES: .c .lo .o .obj
$(srcdir)/Makefile.in: # $(srcdir)/Makefile.am  $(am__configure_deps)
    @for dep in $?; do \
      case '$(am__configure_deps)' in \
        *$$dep*) \
          ( cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh ) \
            && { if test -f $@; then exit 0; else break; fi; }; \
          exit 1;; \
      esac; \
    done; \
    echo ' cd $(top_srcdir) && $(AUTOMAKE) --foreign src/dynamic-preprocessors/sip/Makefile'; \
    $(am__cd) $(top_srcdir) && \
      $(AUTOMAKE) --foreign src/dynamic-preprocessors/sip/Makefile
.PRECIOUS: Makefile
Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status
    @case '$?' in \
      *config.status*) \
        cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh;; \
      *) \
        echo ' cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe)'; \
        cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe);; \
    esac;

$(top_builddir)/config.status: $(top_srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)
    cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh

$(top_srcdir)/configure: # $(am__configure_deps)
    cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
$(ACLOCAL_M4): # $(am__aclocal_m4_deps)
    cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
$(am__aclocal_m4_deps):
install-libLTLIBRARIES: $(lib_LTLIBRARIES)
    @$(NORMAL_INSTALL)
    test -z "$(libdir)" || $(MKDIR_P) "$(DESTDIR)$(libdir)"
    @list='$(lib_LTLIBRARIES)'; test -n "$(libdir)" || list=; \
    list2=; for p in $$list; do \
      if test -f $$p; then \
        list2="$$list2 $$p"; \
      else :; fi; \
    done; \
    test -z "$$list2" || { \
      echo " $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=install $(INSTALL) $(INSTALL_STRIP_FLAG) $$list2 '$(DESTDIR)$(libdir)'"; \
      $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=install $(INSTALL) $(INSTALL_STRIP_FLAG) $$list2 "$(DESTDIR)$(libdir)"; \
    }

uninstall-libLTLIBRARIES:
    @$(NORMAL_UNINSTALL)
    @list='$(lib_LTLIBRARIES)'; test -n "$(libdir)" || list=; \
    for p in $$list; do \
      $(am__strip_dir) \
      echo " $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=uninstall rm -f '$(DESTDIR)$(libdir)/$$f'"; \
      $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=uninstall rm -f "$(DESTDIR)$(libdir)/$$f"; \
    done

clean-libLTLIBRARIES:
    -test -z "$(lib_LTLIBRARIES)" || rm -f $(lib_LTLIBRARIES)
    @list='$(lib_LTLIBRARIES)'; for p in $$list; do \
      dir="`echo $$p | sed -e 's|/[^/]*$$||'`"; \
      test "$$dir" != "$$p" || dir=.; \
      echo "rm -f \"$${dir}/so_locations\""; \
      rm -f "$${dir}/so_locations"; \
    done
libsf_sip_preproc.la: $(libsf_sip_preproc_la_OBJECTS) $(libsf_sip_preproc_la_DEPENDENCIES) 
    $(libsf_sip_preproc_la_LINK) -rpath $(libdir) $(libsf_sip_preproc_la_OBJECTS) $(libsf_sip_preproc_la_LIBADD) $(LIBS)

mostlyclean-compile:
    -rm -f *.$(OBJEXT)

distclean-compile:
    -rm -f *.tab.c

.c.o:
    $(COMPILE) -c $<

.c.obj:
    $(COMPILE) -c `$(CYGPATH_W) '$<'`

.c.lo:
    $(LTCOMPILE) -c -o $@ $<

sf_dynamic_preproc_lib.lo: ../include/sf_dynamic_preproc_lib.c
    $(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o sf_dynamic_preproc_lib.lo `test -f '../include/sf_dynamic_preproc_lib.c' || echo '$(srcdir)/'`../include/sf_dynamic_preproc_lib.c

sf_ip.lo: ../include/sf_ip.c
    $(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o sf_ip.lo `test -f '../include/sf_ip.c' || echo '$(srcdir)/'`../include/sf_ip.c

sfPolicyUserData.lo: ../include/sfPolicyUserData.c
    $(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o sfPolicyUserData.lo `test -f '../include/sfPolicyUserData.c' || echo '$(srcdir)/'`../include/sfPolicyUserData.c

mostlyclean-libtool:
    -rm -f *.lo

clean-libtool:
    -rm -rf .libs _libs

ID: $(HEADERS) $(SOURCES) $(LISP) $(TAGS_FILES)
    list='$(SOURCES) $(HEADERS) $(LISP) $(TAGS_FILES)'; \
    unique=`for i in $$list; do \
        if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
      done | \
      $(AWK) '{ files[$$0] = 1; nonempty = 1; } \
          END { if (nonempty) { for (i in files) print i; }; }'`; \
    mkid -fID $$unique
tags: TAGS

TAGS:  $(HEADERS) $(SOURCES)  $(TAGS_DEPENDENCIES) \
        $(TAGS_FILES) $(LISP)
    set x; \
    here=`pwd`; \
    list='$(SOURCES) $(HEADERS)  $(LISP) $(TAGS_FILES)'; \
    unique=`for i in $$list; do \
        if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
      done | \
      $(AWK) '{ files[$$0] = 1; nonempty = 1; } \
          END { if (nonempty) { for (i in files) print i; }; }'`; \
    shift; \
    if test -z "$(ETAGS_ARGS)$$*$$unique"; then :; else \
      test -n "$$unique" || unique=$$empty_fix; \
      if test $$# -gt 0; then \
        $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \
          "$$@" $$unique; \
      else \
        $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \
          $$unique; \
      fi; \
    fi
ctags: CTAGS
CTAGS:  $(HEADERS) $(SOURCES)  $(TAGS_DEPENDENCIES) \
        $(TAGS_FILES) $(LISP)
    list='$(SOURCES) $(HEADERS)  $(LISP) $(TAGS_FILES)'; \
    unique=`for i in $$list; do \
        if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
      done | \
      $(AWK) '{ files[$$0] = 1; nonempty = 1; } \
          END { if (nonempty) { for (i in files) print i; }; }'`; \
    test -z "$(CTAGS_ARGS)$$unique" \
      || $(CTAGS) $(CTAGSFLAGS) $(AM_CTAGSFLAGS) $(CTAGS_ARGS) \
         $$unique

GTAGS:
    here=`$(am__cd) $(top_builddir) && pwd` \
      && $(am__cd) $(top_srcdir) \
      && gtags -i $(GTAGS_ARGS) "$$here"

distclean-tags:
    -rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags

distdir: $(DISTFILES)
    @srcdirstrip=`echo "$(srcdir)" | sed 's/[].[^$$\\*]/\\\\&/g'`; \
    topsrcdirstrip=`echo "$(top_srcdir)" | sed 's/[].[^$$\\*]/\\\\&/g'`; \
    list='$(DISTFILES)'; \
      dist_files=`for file in $$list; do echo $$file; done | \
      sed -e "s|^$$srcdirstrip/||;t" \
          -e "s|^$$topsrcdirstrip/|$(top_builddir)/|;t"`; \
    case $$dist_files in \
      */*) $(MKDIR_P) `echo "$$dist_files" | \
               sed '/\//!d;s|^|$(distdir)/|;s,/[^/]*$$,,' | \
               sort -u` ;; \
    esac; \
    for file in $$dist_files; do \
      if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
      if test -d $$d/$$file; then \
        dir=`echo "/$$file" | sed -e 's,/[^/]*$$,,'`; \
        if test -d "$(distdir)/$$file"; then \
          find "$(distdir)/$$file" -type d ! -perm -700 -exec chmod u+rwx {} \;; \
        fi; \
        if test -d $(srcdir)/$$file && test $$d != $(srcdir); then \
          cp -fpR $(srcdir)/$$file "$(distdir)$$dir" || exit 1; \
          find "$(distdir)/$$file" -type d ! -perm -700 -exec chmod u+rwx {} \;; \
        fi; \
        cp -fpR $$d/$$file "$(distdir)$$dir" || exit 1; \
      else \
        test -f "$(distdir)/$$file" \
        || cp -p $$d/$$file "$(distdir)/$$file" \
        || exit 1; \
      fi; \
    done
check-am: all-am
check: check-am
all-am: Makefile $(LTLIBRARIES) all-local
installdirs:
    for dir in "$(DESTDIR)$(libdir)"; do \
      test -z "$$dir" || $(MKDIR_P) "$$dir"; \
    done
install: install-am
install-exec: install-exec-am
install-data: install-data-am
uninstall: uninstall-am

install-am: all-am
    @$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am

installcheck: installcheck-am
install-strip:
    $(MAKE) $(AM_MAKEFLAGS) INSTALL_PROGRAM="$(INSTALL_STRIP_PROGRAM)" \
      install_sh_PROGRAM="$(INSTALL_STRIP_PROGRAM)" INSTALL_STRIP_FLAG=-s \
      `test -z '$(STRIP)' || \
        echo "INSTALL_PROGRAM_ENV=STRIPPROG='$(STRIP)'"` install
mostlyclean-generic:

clean-generic:

distclean-generic:
    -test -z "$(CONFIG_CLEAN_FILES)" || rm -f $(CONFIG_CLEAN_FILES)
    -test . = "$(srcdir)" || test -z "$(CONFIG_CLEAN_VPATH_FILES)" || rm -f $(CONFIG_CLEAN_VPATH_FILES)

    @echo "This command is intended for maintainers to use"
    @echo "it deletes files that may require special tools to rebuild."
clean: clean-am

clean-am: clean-generic clean-libLTLIBRARIES clean-libtool \
    mostlyclean-am

distclean: distclean-am
    -rm -f Makefile
distclean-am: clean-am distclean-compile distclean-generic \
    distclean-tags

dvi: dvi-am

dvi-am:

html: html-am

html-am:

info: info-am

info-am:

install-data-am:

install-dvi: install-dvi-am

install-dvi-am:

install-exec-am: install-libLTLIBRARIES

install-html: install-html-am

install-html-am:

install-info: install-info-am

install-info-am:

install-man:

install-pdf: install-pdf-am

install-pdf-am:

install-ps: install-ps-am

install-ps-am:

installcheck-am:

maintainer-clean: maintainer-clean-am
    -rm -f Makefile
maintainer-clean-am: distclean-am maintainer-clean-generic

mostlyclean: mostlyclean-am

mostlyclean-am: mostlyclean-compile mostlyclean-generic \
    mostlyclean-libtool

pdf: pdf-am

pdf-am:

ps: ps-am

ps-am:

uninstall-am: uninstall-libLTLIBRARIES

.MAKE: install-am install-strip

.PHONY: CTAGS GTAGS all all-am all-local check check-am clean \
    clean-generic clean-libLTLIBRARIES clean-libtool ctags \
    distclean distclean-compile distclean-generic \
    distclean-libtool distclean-tags distdir dvi dvi-am html \
    html-am info info-am install install-am install-data \
    install-data-am install-dvi install-dvi-am install-exec \
    install-exec-am install-html install-html-am install-info \
    install-info-am install-libLTLIBRARIES install-man install-pdf \
    install-pdf-am install-ps install-ps-am install-strip \
    installcheck installcheck-am installdirs maintainer-clean \
    maintainer-clean-generic mostlyclean mostlyclean-compile \
    mostlyclean-generic mostlyclean-libtool pdf pdf-am ps ps-am \
    tags uninstall uninstall-am uninstall-libLTLIBRARIES

all-local: $(LTLIBRARIES)
    $(MAKE) DESTDIR=`pwd`/../build install-libLTLIBRARIES

# Tell versions [3.59,3.63) of GNU make to not export all variables.
# Otherwise a system limit (for SysV at least) may be exceeded.
.NOEXPORT: 
```

# c - 为什么在执行 memcpy 时检测到堆栈粉碎？

> ID：12595958
> 
> 赞同：1
> 
> 时间：2012-09-26T06:42:07.847
> 
> 标签：c, memory-management

```
 char test[]={"abcde"};
    char* test1={"xyz"};
    memcpy(test+5,test1,3);
    printf("%s",test); 
```

我试图了解 memcpy 的工作原理，这是我迄今为止编写的示例。这给出了输出`abcdexyz&vjunkcharacters`

和以下消息。

```
*** stack smashing detected ***: ./testcode terminated
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(__fortify_fail+0x45)[0xb7656dd5]
/lib/i386-linux-gnu/libc.so.6(+0xffd8a)[0xb7656d8a]
./testcode[0x8048797]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0xb75704d3]
./testcode[0x80483a1] 
```

这种情况背后的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T06:49:26.500

**根本原因：**

```
char test[]={"abcde"}; 
```

分配足够的内存空间来`5`仅存储字符。

```
memcpy(test+5,test1,3); 
```

将指向的数据复制到`test1`分配的内存空间之外。
从技术上讲，以这种方式在分配的内存范围之外写入是**未定义的行为**，这意味着任何事情都可能发生。

**实际发生了什么？**

这里实际发生的是将`memcpy`字符复制到分配的内存之外，从而覆盖`NULL`标记字符数组结尾的终止符`test`。
此外，`printf`从起始地址读取内容，`test`直到遇到一个随机的`NULL`从而打印出垃圾字符。

**解决方案：**
在执行`memcpy`. 由于您打算复制`3`字符，因此您的目标缓冲区`test`至少应为：

```
5 + 3 + 1 byte for NULL terminator = 9 bytes 
```

您可以简单地使用：

```
char test[9]="abcde"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T06:44:40.403

您的`memcpy`调用*确实*破坏了堆栈，这就是您看到该消息的原因。您正在将数据复制到`test`数组末尾，这是不允许的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T07:03:02.123

**在没有额外缓冲区的情况下执行此操作**

事实上，最直接的方法是避免复制：

```
#include <string.h>
#include <stdio.h>

int main() {
  char a[] = "abcde";
  char b[] = "xyz";
  printf("%s%s\n", a, b);
  return 0;
} 
```

* * *

**用 memcpy 做**

memcpy将`n`字节从复制`src`到`dest`。您需要自己正确跟踪复制字符串的空终止字节。

```
#include <string.h>
#include <stdio.h>

int main() {
  char a[] = "abcde";
  char b[] = "xyz";

  /* note that both strings add a '\0' termination */
  char c[sizeof(a) + sizeof(b) - 1];

  /* copy the content of a to c */
  memcpy(c, a, sizeof(a));

  /* copy the content of b to where a ends (concatenate the strings) */
  memcpy(c + sizeof(a) - 1, b, sizeof(b));

  /* note that the '\0' termination of the string is necessary to let
   * functions like printf know where the string is over 
   */
  printf(c);

  return 0;
} 
```

* * *

**用 strcpy 和 strcat 做**

请注意，在使用 memcpy 时，正确处理字符串的空终止存在很多缺陷。要简化字符串的此过程，您应该执行以下操作。

如果这些确实是字符串而不是随机字节，您应该坚持使用标准库的字符串函数。这就是它的完成方式。

```
#include <string.h>
#include <stdio.h>

int main() {
  char a[] = "abcde";
  char b[] = "xyz";

  /* note that both strings add a '\0' termination */
  char c[sizeof(a) + sizeof(b) - 1];

  /* copy the content of a to c */
  strcpy(c, a);

  /* copy the content of b to where a ends (concatenate the strings) */
  strcat(c, b);

  /* note that the '\0' termination of the string is necessary to let
   * functions like printf know where the string is over 
   */
  printf(c);

  return 0;
} 
```

* * *

**关于知道字符串的大小**

关于知道缓冲区的大小，请注意您通常不能简单地做`sizeof(a_string)`. 如果将字符数组传递给函数，它会衰减为指针，并且此操作不再返回数组的预期大小，而是指针的大小。

对于字符串，您需要发出`strlen(a_string)`which 扫描空终止的出现并返回字符串的长度（不包括终止）。

至于包含随机数据的字符缓冲区（或需要写入的空缓冲区），这种方法也不起作用。您总是需要将缓冲区的大小作为附加参数传递。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T06:51:06.593

该行`memcpy(test+5,test1,3);`用简单的话执行以下操作：

“从数组“test”的最后一个元素开始，将数组“test1”中的 3 个字符复制到那里”，这基本上写入了数组“test”长度之外的 2 个字符。

所以如果你只是想玩'memcpy'定义第三个数组：

```
char test[]="abcde";
char test1[]="xyz";
char output[sizeof(test) + sizeof(test1)];
memset(output, 0, sizeof(output));
memcpy(&output[0],test,5);
memcpy(&output[5],test1,3);
printf("%s",output); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T06:52:51.580

变量 test1 在内存中 4 个字符，3 个字符加上结束字符串终止符。试试这个：

```
char test[9]={"abcde"};
char* test1={"xyz"};
memcpy(test+5,test1,4); 
```

# sql-server - Quartz.net 用于多个数据库

> ID：12595960
> 
> 赞同：0
> 
> 时间：2012-09-26T06:42:12.657
> 
> 标签：sql-server, database, quartz.net, jobs, job-scheduling

我正在使用quartz.net 进行作业调度。我的数据库 JobQueue 中有一个表。Quartz.net 从这个 JobQueue 中读取并执行作业。一切正常。现在有一个新要求，我需要为多个客户扩展作业调度。这意味着 Quartz.net 必须配置为从多个数据库中读取。如何处理这种情况？我有一个使用 Quartz.net 编写的服务，它应该通过读取它们各自的数据库来为多个客户端安排作业。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:04:00.490

如何确定它将如何扩展，但可以创建多个 Appdomains 并在每个 appdomain 内托管不同的调度程序。

如果您正在从 app.config 文件中读取石英设置，那么您可能需要在运行时更改一些设置，例如连接字符串。

# mysql - 如何加速 MySQL 查询：按计数排序

> ID：12595964
> 
> 赞同：2
> 
> 时间：2012-09-26T06:42:18.907
> 
> 标签：mysql, performance, tags, aggregate

我已经尝试了我能想到的一切来加快这个查询，但它仍然需要大约 2.5 秒。

该表是 images_tags（约 400 万行）：这是表说明：

```
Field       Type               Null     Key     Default
image_ids   int(7) unsigned    NO       PRI     NULL
tags_id     int(7) unsigned    NO       PRI     NULL 
```

以下是索引：

```
Table         Non_unique  Key_name      Seq_in_index  Column_name  Collation  Cardinality  Sub_part  Packed  Null  Index_type
images_tags   0           PRIMARY       1             image_ids    A          NULL         NULL      NULL          BTREE
images_tags   0           PRIMARY       2             tags_id      A          4408605      NULL      NULL          BTREE
images_tags   1           image_ids     1             image_ids    A          734767       NULL      NULL          BTREE 
```

这是查询：

```
select image_ids
from images_tags
where tags_id in (1, 2, 21, 846, 3175, 4290, 6591, 9357, 9594, 14289, 43364, 135019, 151295, 208803, 704452)
group by image_ids
order by count(*) desc
limit 10 
```

这是查询解释：

```
select_type  table        type   possible_keys  key                 key_len  ref   rows     Extra
SIMPLE       vids_x_tags  index  join_tags_id   join_vids_id_unique  8       NULL  4408605  Using where; Using index; Using temporary; Using filesort 
```

目标是获得与这些标签最匹配的 10 张图像。我尝试过处理这些变量，但几乎没有改善：

*   max_heap_table_size
*   tmp_table_size
*   myisam_sort_buffer_size
*   读取缓冲区大小
*   排序缓冲区大小
*   read_rnd_buffer_size
*   net_buffer_length
*   preload_buffer_size
*   key_buffer_size

有什么方法可以大大加快这个查询的速度吗？大约有 700K 图像并且它一直在增长，所以我不想将结果缓存超过一两天，并且必须为每个图像完成，因此重新缓存许多查询是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:00:19.863

在这种链接（联结，多对多）表中，在`(a, b)`和上都有两个复合索引几乎总是有用的`(b, a)`。您只有其中一个（主索引），而没有另一个。

如果表中没有其他列，则根本不需要任何其他索引。

因此，您应该添加`(tags_id, image_ids)`索引并删除`(image_ids)`多余的索引：

```
ALTER TABLE images_tags
  DROP INDEX image_ids,
  ADD INDEX tag_image_IDX           -- choose a name for the index
    (tags_id, image_ids) ; 
```

关于特定查询的索引效率取决于很多因素，主要取决于图像和标签的分布（您在`IN`列表中的 15 个标签有多受欢迎？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:00:47.240

在`EXPLAIN`查询的输出中，您会看到该`key`列与列表中的任何项目都不匹配`possible_keys`。这意味着尽管数据是从索引中获取的（在许多情况下，它比实际表小，因为它跨越的列更少），引擎仍然必须遍历所有行。

如果您想正确使用索引来加速此查询，您应该添加一个带有标记的索引作为它的*第一个*（可能是唯一的）组件。

顺便说一句，`image_ids`仅上的索引几乎没有用，因为主键也可以用来提供该信息。通常，多行索引可用于加速查询，这些查询为所有这些列或从第一列开始的连续列集提供显式值（或范围）。换句话说，双列索引也将像单列索引一样用于它的第一列，但它的第二列本身并没有多大用处，这就是你在这里所拥有的。

作为添加键`tags_id`和删除键的替代方法`image_ids`，您可以保持键保持`image_ids`原样，并反转主键的列顺序。然后主键也可以用于回答仅标记查询。如果您通过标签而不是图像更频繁地查询表格，那么我建议使用这种方法。

# c++ - 链表的几种实现 - C++

> ID：12595965
> 
> 赞同：0
> 
> 时间：2012-09-26T06:42:20.153
> 
> 标签：c++, arrays, methods, linked-list, implementation

我写了一个简单的 LinkedList 类。我首先有一个 Node 类：

```
class Node
{
   public:
       Node* next;
       int value;
       Node(int val)
       {
          value = val;
          next = NULL;
       }

       Node(int val, Node* y)
       {
          value = val;
          next = y;
       }
} 
```

那么 LinkedList 的实现很简单，有一个`Node* head`成员和一个`addNode(int value)`成员函数。

实现链表的其他方法是什么？可以提供其他此类实现或提示相关文档吗？

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:44:43.343

标准库定义了一个您可以使用的双向链表实现（例如，请参见[此处](http://www.cplusplus.com/reference/stl/list/)）。我建议您使用它，除非您有充分的理由不这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:46:23.717

Boost 有一些实现： [http://www.boost.org/doc/libs/1_51_0/doc/html/intrusive/slist.html](http://www.boost.org/doc/libs/1_51_0/doc/html/intrusive/slist.html) http://www.boost.org/doc/libs/1_51_0/doc/html/侵入性/list.html

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:48:11.523

1.  `deleteNode`
2.  `findNode`
3.  Mabe 创建一个迭代器。

在构造函数和私有数据成员中使用初始化列表也更好。NULL 用于 C，使用 0 代替。

IE

```
class Node
{
   private:
      Node* next;
      int value;
   public:

      Node(int val) : next(0), value(val) {}
      Node(int val, Node *n) : next(n), value(val) {}
      int getVale() { return value}
}; 
```

# vb.net - Windows 服务 - 创建安装程序 Visual Studio 2012 如何？

> ID：12595967
> 
> 赞同：15
> 
> 时间：2012-09-26T06:42:26.363
> 
> 标签：vb.net, windows-services, installation, visual-studio-2012

我正在 VS2012 中开发 Windows 服务，设置/部署部分已被删除。所以我无法创建安装项目。我想听听你们对一个易于使用的安装程序有什么建议。在服务的安装下，我需要输入一些输入，只有字符串。我一直在研究 WiX，但这似乎有点复杂，而且我只有 1 或 2 天的时间来制作这个安装程序。

那么除了 Wix，我应该使用什么安装程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T08:47:02.823

我在使用 InstallShield LE（Visual Studio 2012 附带的）方面的体验非常糟糕，尤其是对于 Windows 服务。安装服务所需的功能（自定义操作等）不随精简版提供。

我打算为我正在处理的当前 Windows 服务做的是用[Topshelf](http://topshelf-project.com/)构建它，这（除其他外）意味着安装你的服务就像运行一样简单`MyServiceApp.exe install`。我敢肯定，即使 InstallShield 也可以让您在安装后运行您的应用程序，然后您的应用程序/Topshelf 可以安装服务组件。

如果 InstallShield 对您不起作用，我之前使用[NSIS](http://nsis.sourceforge.net/Main_Page)取得了不错的效果。简单、强大、免费、体面的文档。它看起来有点笨拙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:17:23.333

以下是可以帮助您入门的设置工具列表： [http ://en.wikipedia.org/wiki/List_of_installation_software](http://en.wikipedia.org/wiki/List_of_installation_software)

如果您没有太多时间来创建安装程序，我建议您使用像 Advanced Installer 或 InstallShield 这样的商业工具。您需要许可证，但他们专注于可用性（在更短的时间内做更多的事情）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T05:44:33.683

您可以使用 InstallShield LE... 您可以为安装和“系统更改后”添加自定义操作“注册产品后”。这些自定义操作可以在机器上运行一个 EXE。

确保“在系统上下文中”运行命令行工具

注册产品后，将 InstallUtil 版本运行到您的 .NET 版本，例如。path=C:\Windows\Microsoft.NET\Framework\v4.0.30319 command=InstallUtil.exe "C:\Program Files (x86)\XXX\YYY\ZZZ.exe" 替换 XXX YYY 和 ZZZ 以匹配您的安装

在系统更改后删除您的服务名称运行例如 sc delete "servicename"

请注意，您需要支持您自己的服务可执行文件中的自定义操作（您在早期的 VS 中也需要此功能）。

您可以在此处找到有关 SC 的更多信息：http: [//support.microsoft.com/kb/251192](http://support.microsoft.com/kb/251192)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-11T01:05:02.383

要为服务添加安装程序，您只需右键单击服务的设计器，然后单击“添加安装程序”。

这是演练：http: [//msdn.microsoft.com/en-us/library/zt39148a.aspx](http://msdn.microsoft.com/en-us/library/zt39148a.aspx)

# iphone - iPhone：以编程方式更改键盘语言

> ID：12595970
> 
> 赞同：42
> 
> 时间：2012-09-26T06:42:40.380
> 
> 标签：iphone, iphone-softkeyboard

每当打开本机键盘时，我都会尝试在我的 iOS 5.x 应用程序上提供不同的语言支持。以编程方式在本机键盘中提供此语言。有人可以指导我如何支持它吗？我看到了一个碳框架，但看起来像它用于 Mac 应用程序。

谢谢。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2014-05-01T06:40:26.377

您可以从 iOS 7 开始以每个 UIResponder 为基础。UIResponder 类中有 textInputMode 属性。它是只读的，但文档说：

> 文本输入模式识别此响应程序处于活动状态时显示的语言和键盘。
> 
> 对于响应者，系统通常会根据用户的语言偏好显示一个键盘。在您希望响应者使用特定键盘的情况下，您可以重新定义此属性并使用它来返回不同的文本输入模式。当响应者处于活动状态时，用户仍然可以更改键盘，但切换到另一个响应者然后返回会恢复您指定的键盘。

在我的项目中，我创建了一个子类`UITextField`并定义了一个名为 userDefinedKeyboardLanguage 的新属性。我还覆盖了上面提到的 textInputMode 方法。它看起来类似于以下内容：

```
- (UITextInputMode *) textInputMode {
    for (UITextInputMode *tim in [UITextInputMode activeInputModes]) {
        if ([[Utilities langFromLocale:userDefinedKeyboardLanguage] isEqualToString:[Utilities langFromLocale:tim.primaryLanguage]]) return tim;
    }
    return [super textInputMode];
} 
```

我的 Utilities 类中还有一个自定义方法 +(NSString *)langFromLocale:(NSString *)locale，如下所示：

```
+ (NSString *)langFromLocale:(NSString *)locale {
    NSRange r = [locale rangeOfString:@"_"];
    if (r.length == 0) r.location = locale.length;
    NSRange r2 = [locale rangeOfString:@"-"];
    if (r2.length == 0) r2.location = locale.length;
    return [[locale substringToIndex:MIN(r.location, r2.location)] lowercaseString];
} 
```

现在，我的自定义文本字段类可以通过将 userDefinedKeyboardLanguage 属性设置为所需的语言来更改键盘输入语言。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2017-04-26T13:46:17.270

我知道这是个老问题，但这是我更改键盘语言的方法。

感谢@the4kman 的标记：这种方式只能将当前键盘更改为设置中添加的键盘。

斯威夫特 3：

```
class CustomTextField: UITextField {

    private func getKeyboardLanguage() -> String? {
        return "en" // here you can choose keyboard any way you need
    }

    override var textInputMode: UITextInputMode? {
        if let language = getKeyboardLanguage() {
            for tim in UITextInputMode.activeInputModes {
                if tim.primaryLanguage!.contains(language) {
                    return tim
                }
            }
        }
        return super.textInputMode
    }

} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-26T06:45:09.163

不，这是不可能的 - 用户只能在设置中更改他们的语言。

但是，如果您选择（或询问他们的偏好），您可以给用户一个“英文”键盘

你这样做使用：`UIKeyboardTypeASCIICapable`

您可以通过按底行的“地球图标”直接在键盘上更改键盘。

首先，您必须在“设置”中启用这些语言进行输入。然后按下键盘上的地球按钮将在这些语言之间切换。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-06-04T14:17:00.970

宣言：

```
@IBOutlet var yourTextField:cTextField!; 
```

采用：

```
yourTextField.languageCode = "ru"; 
```

类 cTextField：

```
class cTextField: UITextField {

    // ru, en, ....
    var languageCode:String?{
        didSet{
            if self.isFirstResponder{
                self.resignFirstResponder();
                self.becomeFirstResponder();
            }
        }
    }

    override var textInputMode: UITextInputMode?{
        if let language_code = self.languageCode{
            for keyboard in UITextInputMode.activeInputModes{
                if let language = keyboard.primaryLanguage{
                    let locale = Locale.init(identifier: language);
                    if locale.languageCode == language_code{
                        return keyboard;
                    }
                }
            }
        }
        return super.textInputMode;
    }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-12-16T13:04:49.647

所有很好的答案。`UIResponder`但在 Swift 中，您可以在扩展中覆盖父类 ( ) 中定义的方法和变量。所以没有必要子类化。很高兴`for`用更快速的单线替换循环。

```
public extension UITextField {  
    override var textInputMode: UITextInputMode? {
        return UITextInputMode.activeInputModes.filter { $0.primaryLanguage == "emoji" }.first ?? super.textInputMode
    }
} 
```

而不是“表情符号”可能会像`Utils.currentAppLanguage`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-04-29T12:54:19.913

**斯威夫特 5 实现：**

```
public extension UITextField 
{ 
    // ⚠️ Prefer english keyboards
    //
    override var textInputMode: UITextInputMode?
    {
        let locale = Locale(identifier: "en_US") // your preferred locale

        return
            UITextInputMode.activeInputModes.first(where: { $0.primaryLanguage == locale.languageCode })
            ??
            super.textInputMode
    }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-11-16T16:35:52.673

例如，这似乎可以更改为希腊语键盘：

```
[[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects:@"el", nil] 
    forKey:@"AppleLanguages"]; 

[[NSUserDefaults standardUserDefaults] synchronize]; 
```

# c - 如何在C中将两个反斜杠初始化为一个字符

> ID：12595971
> 
> 赞同：0
> 
> 时间：2012-09-26T06:42:41.230
> 
> 标签：c

```
if (ch == '\\')
{
    escape_ch = '\\\\';
} 
```

编译器对 4 个反斜杠不满意，但我需要能够`'\\'`作为一个字符。C 读`'\\'`作一个反斜杠。所以我尝试`'\\\\'`了两个反斜杠，但它不起作用。我需要这个来实现我的程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:45:22.740

C 中的一个字符只能是一个字符，因此您不能输入两个反斜杠。如果您解释您想要什么，我们可能会更好地帮助您。

您可以通过执行以下操作使用 strstr 进行标记化：

```
tok1 = str;
tok2 = strstr(str, "\\\\");
*tok2 = '\0';
tok2 += 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:48:36.907

我认为您感到困惑，并且实际上并没有您认为的问题。当你看到一个反斜杠时，你检查'n'并用'\n'替换它，对吗？也就是说，'\' + 'n' -> '\n'。好吧，只需对反斜杠执行相同的操作，但将其替换为自身：'\' + '\' -> '\'。

```
c = getchar();
if (c == '\\') /* escape */
{
    c = getchar();
    switch( c ):
    {
        case 'n':
            c = '\n';
            break;
        case 't':
            c = '\t';
            break;
        case '\\':
            c = '\\'; /* not even necessary */
            break;
        ...
    }
}
/* store c in buffer */ 
```

通过省略不必要的分配，您可以结合对映射到自身的字符的处理：

```
 switch( c ):
    {
        case 'n':
            c = '\n';
            break;
        case 't':
            c = '\t';
            break;
        case '\\': case '"': case '\'':
            /* these escaped chars map to themselves so don't change c */
            break;
        /* ... handle other escapes such as \r, \<octal digits> too */
        case EOF:
            error("premature end of file in escape sequence"); /*write a function, error, that prints a message and a newline on stderr and calls exit(1) */
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-26T07:16:55.673

这是没有strtok的解决方案：

```
 for(i=0, j=0, k=-1; i < strlen(str); i++){
        if(str[i] == '\\') j++;
        else j=0;
        if(j == 2){
            printf("%d %d\n", k + 1, i - 2);
            k = i;
        }
    }
    printf("%d %d\n", k + 1, i - 1); 
```

它会为您提供索引，然后您将能够将其打印或打印`strncpy()`到另一个字符串。

# unit-testing - RhinoMocks 和 Lambda 表达式

> ID：12595972
> 
> 赞同：0
> 
> 时间：2012-09-26T06:42:45.160
> 
> 标签：unit-testing, lambda, rhino-mocks

使用下面的界面：

```
public interface IRepository<T>
{
    T FirstOrDefault(Func<T, bool> predicate);
} 
```

像这样实现：

```
private IRepository<Foo> Repository {get;set;}
public FooService(IRepository<Foo> repository)
{
    Repository = repository;
}    

public void Foo(int bar)
{
    var result = Repository.FirstOrDefault(x => x.Id.Equals(bar));
    if (result == null)
    {
        throw new Exception("Returned null, not what I expected!");
    }
} 
```

如果我写这样的测试：

```
repos = MockRepository.GenerateMock<IRepository<Foo>>(null);
repos.Expect(x => x.FirstOrDefault(y => y.Id.Equals(Arg<int>.Is.Anything))).Throw(new Exception("This exception should be thrown!"));

FooService f = new FooService(repos);
f.Foo(1);
//expecting exception to be thrown 
```

我没有得到预期的异常抛出，所以我假设模拟调用被忽略/不调用。

但是，如果我添加`IgnoreArguments()`它*被*调用并且我确实得到了预期的异常。

```
repos.Expect(x => x.FirstOrDefault(y => y.Id.Equals(Arg<int>.Is.Anything))).IgnoreArguments().Throw(new Exception("This exception should be thrown!")); 
```

关于我做错了什么有什么想法吗？

# javascript - 是否可以在 jQuery 中向选择器添加 OR？

> ID：12595979
> 
> 赞同：2
> 
> 时间：2012-09-26T06:43:09.573
> 
> 标签：javascript, jquery

我目前有一个 jQuery 委托，它对所有`input`不是`submit input`选择器的选择器做一些事情。您如何添加**OR**以便它也处理另一种类型，例如`select`？

当前功能：

```
$('#test_form').delegate("input:not([id*='_submit'])", 'blur', function(event) {
  // Does something
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T06:44:03.123

选择器中的逗号`,`行为如下`OR`：

```
// -------------------------------------------------v
$("#test_form").delegate("input:not([id*='_submit']), select", "blur", function(e) {
    // Does something
}); 
```

您可以在此处阅读有关多重选择器的更多信息：

*   [http://api.jquery.com/multiple-selector/](http://api.jquery.com/multiple-selector/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:46:18.617

[http://api.jquery.com/attribute-not-equal-selector/](http://api.jquery.com/attribute-not-equal-selector/)

所以试试

```
$('input[type!="submit"]') 
```

jsfiddle：http: [//jsfiddle.net/fF6GA/](http://jsfiddle.net/fF6GA/)

## 更新：

或者说：

```
$('#test_form').delegate('input[type!="submit"], selector', 'blur', function(event) {
}); 
```

还：

也许，`on()`是更好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:46:51.377

在 jquery 中，您可以使用以逗号分隔的多个选择器

例如

```
$('#test_form').delegate("input:not([id*='_submit'], select)", 'blur', function(event) {
  // Does something
}); 
```

# jquery - jQuery[addClass] 是什么意思？

> ID：12595989
> 
> 赞同：0
> 
> 时间：2012-09-26T06:43:56.330
> 
> 标签：jquery

它在下面的代码中做了什么？

```
jQuery[addClass](...); 
```

它和 jQuery.addClass() 一样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T06:49:49.737

是的，您可以使用点表示法或方括号表示法：

```
$.show() 
```

或者

```
 $['show']() 
```

类似的问题[JavaScript 属性访问：点符号与括号？](https://stackoverflow.com/questions/4968406/javascript-property-access-dot-notation-vs-brackets)

# jboss - 作业开始后调用方法

> ID：12595992
> 
> 赞同：1
> 
> 时间：2012-09-26T06:44:15.090
> 
> 标签：jboss, struts2, servlet-filters, dispatcher

嗨，我正在使用 struts 2，并且想在服务器启动后调用一个方法。在服务器启动时，我们可以使用 FILTER DISPATCHER。我正在使用 jax ws。我正在同一个 jboss 服务器上部署我的 jax 客户端和端点项目。如何解决这个请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:57:38.633

您可以实现一个`ServletContextListener`来响应 servlet 启动。

像这样创建您的实现：

```
public class SimpleInitializer implements ServletContextListener {
    @Override
    public void contextInitialized(ServletContextEvent sce) {
        //Place your startup logic here.
    }
    @Override
    public void contextDestroyed(ServletContextEvent sce) {
    }
} 
```

然后，将其包含在 web.xml 中，如下所示：

```
<listener>
    <display-name>SIMPLE Startup Listener</display-name>
    <listener-class>com.you.init.SimpleInitializer</listener-class>
</listener> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:26:37.383

```
MBeanServerConnection server = (MBeanServerConnection)new InitialContext().lookup("jmx/rmi/RMIAdaptor");
ObjectName on = new ObjectName("jboss.system:type=Server");
Object var = server.getAttribute(on, "Started");
System.out.println(**var**); 
```

您可以做的另一件事是运行一个线程并检查`var`Filter Dispatcher 中的值。如果为真，则调用 Web 服务并将数据设置到您的 Servlet 上下文中，否则将线程休眠一段特定的时间。一旦您检索到值，请停止此线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:09:46.867

// 作者 Gaurav Kumar（Skillrock Technology 的 SE）

```
 try{
    MBeanServerConnection server = (MBeanServerConnection)new InitialContext().lookup("jmx/rmi/RMIAdaptor");
    ObjectName on = new ObjectName("jboss.system:type=Server");
    Object var = server.getAttribute(on, "Started");
    System.out.println(var);

        String serverURL = "http://gaurav-compaq-presario-c700-notebook-pc:8080/WServer?wsdl";
        String message = "gaurav";
        HashMap env = new HashMap();
        String[] creds = new String[1];
        creds[0] = message;
        env.put(JMXConnector.CREDENTIALS, creds);
        JMXServiceURL url = new JMXServiceURL(serverURL);
        JMXConnector jmxc = JMXConnectorFactory.connect(url, env);
           // Remember to call jmxc.close() when you are done with server connection.
        MBeanServerConnection server1 = jmxc.getMBeanServerConnection();
          System.out.println(server.getAttribute(new ObjectName("MyDomain:key=property"), "AnAttribute"));
          server.invoke(new ObjectName("MyDomain:key=property"), "doSomething", new Object[0], new String[0]);
    }catch(Exception e){
        System.out.println(e);
    } 
```

# jquery - 无法在 Internet Explorer 中选择选择框的选项

> ID：12595993
> 
> 赞同：2
> 
> 时间：2012-09-26T06:44:15.247
> 
> 标签：jquery, html, internet-explorer

我正在尝试为我的网页做一个自定义工具提示，除了选择框和 Internet Explorer (IE) 之外，一切似乎都很好。添加工具提示后，IE 不允许我选择任何选项。我可以单击选择框以显示选项，但是一旦我将鼠标悬停在选项上，选择框就会自行关闭。

您可以使用这个[jsfiddle](http://jsfiddle.net/6MzD3/)清楚地观察它。尝试在 Firefox 和 Internet Explorer 中打开它。在 Firefox 中它可以正常工作，但在 IE 中，一旦您尝试选择其中一个选项，选择框就会自行关闭。

如何让它在 IE 中正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T06:58:54.263

尝试关闭一些行代码，如下更改：

```
 ...

   this.t = this.title;
   // this.title = "";
   $("body").append("<p id='tooltip'>"+ this.t +"</p>");
 ... 
   //this.title = this.t;
   $("#tooltip").remove();
 ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T06:50:26.840

您需要明确告诉 IE 在您的函数中停止传播，因为它也将悬停应用于子选项元素。

```
$('*.tooltip').hover(function(e)
{
    e.stopPropagation();

    ...
} 
```

[原始小提琴](http://jsfiddle.net/6MzD3/1/)

这适用于 IE7、8 和 9：

添加了一个条件子句来检查事件对象中的选择框。

[更新小提琴](http://jsfiddle.net/6MzD3/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:28:37.457

你真的需要`title`这个控件吗？你可以使用`data attributes`，一切都会好起来的。例如：http: [//jsfiddle.net/6MzD3/16/](http://jsfiddle.net/6MzD3/16/)。还要查看[Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)并为没有硬编码选择器的工具提示创建简单的插件。