# StackOverflow 问答 14890000-14890999

# button - JSF - 按钮双击

> ID：14890002
> 
> 赞同：1
> 
> 时间：2013-02-15T07:26:46.947
> 
> 标签：button, jsf-2, double-click, right-click

我的 JSF 应用程序需要创建一个自定义键盘。然后我想在 JSF上获取`Double Click`或操作来定义键。`Right Click``Button`

这可能吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-15T07:52:38.840

是的，有一个名为 Prime Faces 的库，您可以使用它。 [http://primefaces.org/downloads.html](http://primefaces.org/downloads.html)

它有许多可以在 JSF 中使用的内置组件（其中一个允许您创建自定义键盘。）

# r - 如何在 Sweave 文档中包含 R stderr 输出

> ID：14890005
> 
> 赞同：1
> 
> 时间：2013-02-15T07:27:15.627
> 
> 标签：r, stderr, sweave

我正在研究 R 包小插曲，在许多情况下，我想在文档中包含错误输出作为用户示例。

所以 Sweave 代码块

```
<<throws_error>>=
 stop('hello')
@ 
```

理想情况下会产生一个文件

```
stop('hello')
Error: hello 
```

我的真实示例是一个相当长的运行过程，我想捕获警告和消息以及错误的输出。

我弄乱了各种 Sweave 代码块包括参数。我想出的唯一解决方案是有一个隐藏的代码块来打印错误文本`cat()`——这违背了使用 Sweave 的目的。似乎该函数可能有一个解决方案可以`sink()`以某种方式重定向stderr，但也无法弄清楚。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:07:31.573

您是否使用`Sweave`或`knitr`生成您的 LaTeX 和 pdf 文件？

默认情况下，`knitr`在 RStudio 下，生成的文档几乎正是您想要得到的。

在 Sweave 下，您可以使用以下解决方法，取自[R-help 上的此消息](https://stat.ethz.ch/pipermail/r-help/2011-August/286298.html)：

```
%outputs the R code but does not execute it. So no error
<<echo=TRUE, eval=FALSE>>=
 stop('hello')
@

% executes the code but displays only the error
<<echo=FALSE, eval=TRUE>>=
cat(try(stop('hello')))
@ 
```

# c# - Convert string to datetime issue

> ID：14890009
> 
> 赞同：3
> 
> 时间：2013-02-15T07:27:44.997
> 
> 标签：c#

I'm trying to convert a date string in one format into another. However, I get this exception error message

> *String was not recognized as a valid DateTime.*

My code is as follows:

```
string theDate = "28-Feb-13 4:00:00 PM";

DateTime tempDate = DateTime.ParseExact(theDate, "dd-MMM-yy hh:mm:ss tt", CultureInfo.InvariantCulture, DateTimeStyles.None);

convertedDate = tempDate.ToString("yyyy/MM/dd hh:mm:ss"); 
```

I seriously have no idea what went wrong.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-15T07:30:23.833

You must change

`28-Feb-13 4:00:00 PM` to `28-Feb-13 04:00:00 PM`

or

`dd-MMM-yy hh:mm:ss tt` to `dd-MMM-yy h:mm:ss tt`

# jsp - 动态使用请求属性对象属性

> ID：14890016
> 
> 赞同：0
> 
> 时间：2013-02-15T07:28:20.970
> 
> 标签：jsp, jstl

我正在使用 Spring MVC 应用程序，并且我有一个带有以下代码的 JSP。

```
<c:choose>
            <c:when test="${type eq 'school'}">
            <h1 class="title">${schoolVO.name}</h1>
            </c:when>

            <c:when test="${type eq 'college'}">
            <h1 class="title">${collegeVO.name}</h1>

            </c:when>

            <c:when test="${type eq 'tution'}">
             <h1 class="title">${tutionVO.name}</h1>
            </c:when>
            ...
            ..
            ..
            Many other types...

</c:choose> 
```

当控制器中有一个依赖于`type` 设置模型属性的方法时，将调用此 jsp。

如果类型是`school`，它把

```
modelMap.addAttribute("schoolVO", school); 
```

如果上大学

```
modelMap.addAttribute("collegeVO", college); 
```

其他人也一样。。

现在我想删除这个`<c:when>`条件`jsp`。

现在取决于我想添加一个模型属性的类型并放置一个 `schoolVO`或`collgeVO`喜欢

```
modelMap.addAttribute("typeVO", "schoolVO"); 
```

这样我就不需要`<c:when>`在`jsp`. 我想使用类似的东西

```
${{typeVO}.name} 
```

但这给了我错误

```
 contains invalid expression(s): javax.el.ELException: Error Parsing: 
```

我怎样才能做到这一点？提前致谢。

PS 我无法为我的问题找到正确的标题。如果我可以放一些合适的东西，请更改它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:32:28.580

如果他们都有一个名为的字段，`name`那么您可以这样做`${typeVO.name}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:33:22.107

在请求中设置许多不同的属性可能会使自己复杂化。AFAIK，最好有一个处理您要打印的名称的属性：

```
modelMap.addAttribute("institutionName", school.getName());
//or
modelMap.addAttribute("institutionName", college.getName()); 
```

这包含您将打印的标题，然后在您的 JSP 中您没有使用任何验证，只需编写

```
<h1 class="title">${institutionName}</h1> 
```

# android - FlexJson 反序列化器在混淆代码后不起作用

> ID：14890022
> 
> 赞同：1
> 
> 时间：2013-02-15T07:28:44.440
> 
> 标签：android, android-build, flexjson

FlexJson 在深度序列化方面工作得很好，我在对象内部有对象..但是我看到在用 proguard 混淆我的构建后，我的反序列化类只返回 String 中的类对象..或者我必须在 local.properties 或项目中更改的任何内容。特性

是的，使用控制台和 ANT 我正在更新我的代码，其中 (android update ....--library) 链接到我的库代码文件夹的路径。这里 flexjson 只是我的项目 /libs 文件夹中的一个 jar。如果问题是没有引用库请帮助如何做到这一点？

否则任何其他问题的帮助！

在我的 proguard.cfg 我写了这个

```
-keep class flexjson.** { *; } 
```

它没有抛出 ClassNotFoundException 但序列化、深度序列化、反序列化不起作用

我已经混淆了我的代码，一切正常运行，除了这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:39:01.340

好的，我在这里得到了答案..即使 GSON 库在反序列化时也抛出了同样的错误。所以问题与所有通用 typw 对象序列化相同......我在[这里找到了灵魂](https://stackoverflow.com/questions/8129040/proguard-missing-type-parameter)

# javascript - 为什么我的精灵/实体不会直线移动？

> ID：14890023
> 
> 赞同：3
> 
> 时间：2013-02-15T07:29:05.687
> 
> 标签：javascript, math, geometry, game-engine, impactjs

我的实体应该朝着鼠标直线移动。它很接近，但还没有完全到那里。这是一个[工作演示](http://www.3110.a.hostable.me/~a3110hos/asteroids/baked.html)，向您展示我的意思。

这是一个屏幕截图： ![实体不沿直线移动。](../Images/8601afd95a44d3d6cb2d7ccdfa8c772a.png) 红色代表鼠标所走的路径。如您所见，实体不采用相同的路径。

相关代码：

```
EntityPlayer = ig.Entity.extend({

    movementspeed: 400,

    update: function() {
        this.parent();
        this.move_toward_coord(ig.input.mouse.x, ig.input.mouse.y);
    },

    move_toward_coord: function(x, y) {
        var distance_to_target_x = x - this.pos.x - this.size.x / 2;
        var distance_to_target_y = y - this.pos.y - this.size.y / 2;
        if(Math.abs(distance_to_target_x) > 1 || Math.abs(distance_to_target_y) > 1) {
            this.vel.x = (distance_to_target_x > 1 ? 1 : -1) * this.movementspeed * (Math.abs(distance_to_target_x) / (Math.abs(distance_to_target_x) + Math.abs(distance_to_target_y)));
            this.vel.y = (distance_to_target_y > 1 ? 1 : -1) * this.movementspeed * (Math.abs(distance_to_target_y) / (Math.abs(distance_to_target_x) + Math.abs(distance_to_target_y)));
        } else {
            this.vel.y = 0;
            this.vel.x = 0;
        }
    }

}); 
```

我怀疑该`move_to_coord`方法有问题，但是在调整了太多小时后，我仍然不确定它是什么...

船为什么不走直线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T07:32:58.600

啊！！我在发布这篇文章后几秒钟就明白了。对不起这是我的错。这是因为一个名为的属性`maxVel`限制了速度`x`或`y`速度，有时一个比另一个多。>.<

# android - 在 zxing 中两次调用 create 方法

> ID：14890024
> 
> 赞同：3
> 
> 时间：2013-02-15T07:29:07.813
> 
> 标签：android, tabs, android-tabhost, zxing

我是安卓新手。我在一个应用程序中实现了一个选项卡。我在其中使用了 Tab Host。在其中一个选项卡中，我实现了 Zxing 来扫描条形码。

```
Intent intent = new Intent("com.google.zxing.client.android.SCAN");
intent.putExtra("com.google.zxing.client.android.SCAN.SCAN_MODE", "QR_CODE_MODE");
getParent().startActivityForResult(intent, 0); 
```

现在，当扫描完成时，我在我的 TabGroupActivity 中覆盖了活动结果，例如。

```
@Override

public void onActivityResult(int requestCode,int resultCode, Intent data)
 {

  super.onActivityResult(requestCode, resultCode, data);

} 
```

现在的问题是扫描完成后，我的选项卡活动调用了两次。

Tab Activity 及其子项的方法`onCreate()`和方法都调用了两次。我不希望它调用两次。`onResume()`

感谢帮助

**首先编辑**
清单文件

```
<activity
            android:name="com.google.zxing.client.android.CaptureActivity"
            android:configChanges="orientation|keyboardHidden"
            android:screenOrientation="landscape"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
            android:windowSoftInputMode="stateAlwaysHidden" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
             <intent-filter>
                 <action android:name="com.google.zxing.client.android.SCAN" />

                <category android:name="android.intent.category.DEFAULT" /> 
            </intent-filter> 
        </activity>

        <receiver android:name=".TimeAlarm" />

        <activity
            android:name=".TabsWithFragmentsActivity"
            android:theme="@android:style/Theme.Light.NoTitleBar" 
            android:screenOrientation="portrait">
        </activity> 
```

**我刚刚注意到我的应用程序表现不同的另一件事。在版本大于 4.0 的平板电脑上，它可以完美运行。但是对于 android 平板电脑 3.0 版，它可以像我上面解释的那样工作。如果有人可以提供帮助，我不确定 Zxing 需要哪个版本？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T10:07:28.077

onCreate 方法可以调用两次。

在android中，当运行其他应用程序时可用内存较少时。它可能会杀死您的应用程序，即使您的应用程序启动另一个应用程序也是如此。它甚至会在方向改变时被调用（如果 android:configChanges="orientation|keyboardHidden|screenSize" 没有为该活动提供）

与您的情况一样，您正在启动可能需要比可用内存更多的外部应用程序（Zxing）。结果，您的应用程序被终止，但带有保存实例的活动堆栈被保留）。

因此，当用户回到您的应用程序时。Android 框架以相同的状态和活动再次运行您的应用程序，这将导致调用您的 onCreate 方法（即再次创建活动）。

查找它是重新创建还是第一次运行。您可以检查 savedInstanceState 是否为空。如果它为空，则它第一次运行。

也可能是因为方向发生了变化，请尝试在清单中为活动添加 android:configChanges="orientation|keyboardHidden|screenSize"。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:29:55.377

在使用第三方库时，我注意到了类似的行为，而且通常最简单的解决方案有点笨拙——但易于理解且易于实施。只需使用值跟踪是否`onCreate`已被调用`static boolean`：

```
private static boolean hasBeenCreated = false;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    if (!hasBeenCreated)
    {
        hasBeenCreated = true;
        //the rest of your onCreate code
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:54:38.847

尝试以这种方式调用您的意图：

```
Intent intent = new Intent(this, CaptureActivity.class);
intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
getParent().startActivityForResult(intent, 0); 
```

# node.js - Node.js：如何将事件处理程序添加到 Connect/Express 服务器？

> ID：14890032
> 
> 赞同：0
> 
> 时间：2013-02-15T07:30:00.450
> 
> 标签：node.js, events, express, connect

我想处理 EADDRINUSE 它是如何在[API Doc nodejs](http://nodejs.org/api/net.html#net_server_listen_port_host_backlog_callback)中描述的，但是 connect/express 没有调用错误事件处理程序。

这是一个例子：

```
var connect = require('connect');
var app = connect();

app.use(function(req, res){
    res.end('hello world\n');
});

app.on( 'error' , function(e) {
    console.log('error event handler called');
});

app.listen(3000); 
```

如果我启动服务器两次，我得到了
`throw arguments[1]; // Unhandled 'error' event`

我用connect 2.7.2对其进行了测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:30:00.450

从 2.x 版开始，`connect()`不再是 a 的构造函数`net.Server`。'net.Server' 将由函数返回`listen(...)`。

因此，要使示例正常工作，它应该如下所示：

```
var connect = require('connect');
var app = connect();

app.use(function(req, res){
    res.end('hello world\n');
});

app.listen(3000).on( 'error' , function(e) {
    console.log('error event handler called');
}); 
```

另请参阅[连接问题 #749](https://github.com/senchalabs/connect/issues/749)

# excel - 生成多个 Excel

> ID：14890034
> 
> 赞同：3
> 
> 时间：2013-02-15T07:30:16.087
> 
> 标签：excel, vbscript

我尝试使用此代码创建一个 Excel 工作表。

```
Set ExcelObject = CreateObject("Excel.Application")

ExcelObject.visible = True
ExcelObject.WorkBooks.Add       
ExcelObject.Sheets(1).Cells(1,1).value = "My first excel" 
```

但我想要生成不止一个 excel 所以我尝试了这段代码-

```
Set ExcelObject = CreateObject("Excel.Application")

For x= 1 to 5
ExcelObject(x).visible = True
ExcelObject(x).WorkBooks.Add 'Adds a workbook to an excel object
x=x+1   
ExcelObject.Sheets(1).Cells(1,1).value = "My first excel" 
```

但它不起作用。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:40:50.983

Your code has some errors:

1.  You missed `Next x`

2.  You don't have to increment `x` since you use `For..Next` statement. `Next x` will do that for you.

Working code:

For `VB.NET`:

```
Dim ExcelObject() As Object
ExcelObject = New Object(5) {}
For x = 1 To 5
    ExcelObject(x) = CreateObject("Excel.Application")
    ExcelObject(x).visible = True
    ExcelObject(x).WorkBooks.Add() 'Adds a workbook to an excel object
    ExcelObject(x).Sheets(1).Cells(1, 1).value = "My first excel"
Next x 
```

For `VBScript`:

```
Dim ExcelObject(5) 
For x = 1 To 5
    Set ExcelObject(x) = CreateObject("Excel.Application")
    ExcelObject(x).visible = True
    ExcelObject(x).WorkBooks.Add() 'Adds a workbook to an excel object
    ExcelObject(x).Sheets(1).Cells(1, 1).value = "My first excel"
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:42:22.217

可能想研究使用集合。在上面的示例中，您正在使用---当您创建它时，`ExcelObject(x).visible = True` 您真的还没有创建 5 。`ExcelObjects`

有几种方法可以做到这一点。但是，当您添加工作簿时，会玩弄您所拥有的东西。您正在将工作簿实例创建到工作簿集合中。因此，而不是将其引用为`ExcelObject(x)` => 您需要从项目中引用工作簿

`ExcelObject.WorkBooks.item(x)`

# javascript - javascript中的长度属性无法正常工作

> ID：14890037
> 
> 赞同：0
> 
> 时间：2013-02-15T07:30:32.813
> 
> 标签：javascript, html

我想限制用户输入 6-20 个字符范围内的密码。但下面的功能无法正常工作。

```
 function validatePass(pwd1, pwd2)
 {
var len = document.getElementById('pwd1').value;
if(len.length < 6 || len.length > 20)
{ pwd1.setCustomValidity('Enter 6-20 characters');
}
else if (pwd1.value != pwd2.value || pwd1.value == '' || pwd2.value == '' )
{
        pwd2.setCustomValidity('Password incorrect');
  } 
else 
{
    pwd2.setCustomValidity('');
}
} 
```

html代码是：

```
<h4>Password</h4></td>
<td><input type="password" name="pwd1" size="30" id="pwd1" required placeholder="Enter 6-20 characters"></td></tr>
<tr><td>
<h4>Confirm Password</h4></td>
<td><input type="password" name="pwd2" id="pwd2" size="30" required onfocus="validatePass(document.getElementById('pwd1'), this);" oninput="validatePass(document.getElementById('pwd1'), this);">
</td></tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:33:50.897

在 HTML5 中，您可以使用[模式](http://www.w3.org/TR/2009/WD-html5-20090825/forms.html#attr-input-pattern)属性：

```
<input type="password" pattern=".{6,20}" name="pwd1" size="30" id="pwd1" required placeholder="Enter 6-20 characters"></td></tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:34:16.083

尝试使用这样的正则表达式：

```
^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9]).{6,20}$ 
```

来源：[.NET RegEx 验证 6 到 20 个字符之间的密码，其中至少一个大写字母、一个小写字母和一个数字](https://stackoverflow.com/questions/1573313/net-regex-to-validate-password-between-6-and-20-characters-with-at-least-one-up)

这是一个完整的例子：

```
function CheckPassword(inputtxt) 
{ 
var passw = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,20}$/;
if(inputtxt.value.match(passw)) 
{ 
alert('Correct, try another...')
return true;
}
else
{ 
alert('Wrong...!')
return false;
}
} 
```

来源：[http ://www.w3resource.com/javascript/form/password-validation.php](http://www.w3resource.com/javascript/form/password-validation.php)

# magento - 在 magento admin 中创建依赖下拉列表

> ID：14890039
> 
> 赞同：1
> 
> 时间：2013-02-15T07:30:52.990
> 
> 标签：magento, admin, cascadingdropdown

有没有办法在我的自定义表单中在 Magento Admin 中创建依赖下拉列表？我必须根据在先前下拉列表中选择的商店在下拉列表中显示产品类别。

我需要 Ajax 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:36:16.553

您可以将依赖项添加到您的自定义表单。这里有很好的描述：[http ://www.pixlpitch.com/adding-field-dependency-in-magento-admin/](http://www.pixlpitch.com/adding-field-dependency-in-magento-admin/)

# android - 如何处理屏幕亮度

> ID：14890043
> 
> 赞同：0
> 
> 时间：2013-02-15T07:31:25.567
> 
> 标签：android

**有什么方法可以让我们在整个应用程序中始终保持屏幕开启，但在我们触摸一次又一次醒来后，它也应该变暗，请帮忙提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:34:35.463

试试这个代码：

```
WindowManager.LayoutParams params = 
getWindow().getAttributes();
params.flags |= LayoutParams.FLAG_KEEP_SCREEN_ON;
params.screenBrightness = YourValue;
getWindow().setAttributes(params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:35:13.217

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
 PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK, "My Tag");
 wl.acquire();
   //..screen will stay on during this section..
 wl.release(); 
```

不要忘记许可，下次请用谷歌搜索.... [http://developer.android.com/reference/android/os/PowerManager.html](http://developer.android.com/reference/android/os/PowerManager.html)

# perl - 管道文件句柄到自我的分叉

> ID：14890045
> 
> 赞同：0
> 
> 时间：2013-02-15T07:31:29.750
> 
> 标签：perl

我知道我可以做到以下几点：

```
open(STDOUT, "|-", "cmd"); 
```

这大概会导致以下结果：

1.  `fork();`
2.  `exec("cmd");`
3.  将原始进程的 STDOUT 链接到新进程的 STDIN。

我想做的是上面的第 2 步，即不要执行`exec()`. 只需让当前进程的两个副本继续，子进程的 STDIN 链接到父进程的 STDOUT。

这将允许我继续这样：

```
if (! $pid)
{
  # Handle data in child here
  open OUTFILE1 $file1;
  open OUTFILE2 $file2;
  my $i = 0;
  while (<>)
  {
    print (i % 2 ? OUTFILE1 : OUTFILE2) "Line $i: $_";
    ++$i;
  }
  exit;
}
else
{
  # Continue parent here
  print STDOUT "Hello World from print()";
  system("echo Hello World from system()");
} 
```

上面的代码应该在输出中添加一个行号，并将这些数据逐行写入不同的文件（我知道这有点傻，但这只是一个例子）。

有没有办法或图书馆做到这一点？我考虑`perltie`过，但它似乎没有处理来自 的结果`system()`，因此我相信我需要一个单独的进程来实际将 STDOUT 传输到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T07:53:28.323

IIRC，你只是想要

```
open(STDOUT, "|-", "-"); 
```

但`open3`也只需要一行，具有更好的错误报告，并且还允许您捕获 STDERR。

```
use IPC::Open3 qw( open3 );
use POSIX      qw( _exit );

sub child {
   print("Hello World from print()\n");
   system("echo", "Hello World from system()");
}

my $pid = open3(
   '<&STDIN',
   \local *CHILD_STDOUT,
   '>&STDERR',
   '-',
);

if (!$pid) {
   if (eval { child(); 1 }) {
      _exit(0);
   } else {
      print(STDERR $@);
      _exit($! || ($? >> 8) || 255);
   }
}

while (<CHILD_STDOUT>) {
   ...
}

waitpid($pid, 0); 
```

# python - psycopg2 在调用 postgres 存储函数时格式化用户定义类型数组的困难

> ID：14890047
> 
> 赞同：0
> 
> 时间：2013-02-15T07:31:43.173
> 
> 标签：python, postgresql, psycopg2

我正在使用带有 psycopg2 的 postgres 9.1 和 python 2.7。我有一个用户定义的类型，如

```
CREATE TYPE RegCompT AS (short_name VARCHAR, description VARCHAR, currency CHAR(3), NumId INTEGER);
CREATE OR REPLACE FUNCTION cw.create_tree( IN treespec RegCompT[] )... 
```

我正在尝试在 python 中创建一个这种类型的对象数组并调用这个存储的函数。这是我的python代码：

```
import os, sys, csv, psycopg2
import psycopg2.extensions as ps2e
# -- see http://initd.org/psycopg/docs/advanced.html#adapting-new-python-types-to-sql-syntax
class RegDefT(object):
    def __init__(self, row): 
        self.short_name, self.desc, self.currency, self.N = row[0:4]

def adapt_RegDefT(x):
    return ps2e.AsIs("'(%s, %s, %s, %s)'" % (ps2e.adapt(x.short_name), ps2e.adapt(x.desc), ps2e.adapt(x.currency), ps2e.adapt(x.N)))  
ps2e.register_adapter( RegDefT, adapt_RegDefT )

# -- some regions
region_defs = []
region_defs.append( RegDefT( ["NA", "North America", "USD", 10] ) )
region_defs.append( RegDefT( ["EMEA", "Europe Middle-east Africa", "EUR", 11] ) )
region_defs.append( RegDefT( ["APAC", "Asia Pacific", "USD", 20] ) )

# using it
try:
    dbcon = psycopg2.connect( "dbname=lab" )
    curs = dbcon.cursor()
    qs = "select * from cw.create_tree(%s)"
    print "SQL GENERATED:", curs.mogrify( qs, [region_defs] )
    curs.execute( qs, [region_defs] )
except Exception, e:
    print "failed to execute:", qs, e 
```

但它产生的东西既不能通过 python 也不能通过 psql：

```
SQL GENERATED: select * from cw.create_tree(ARRAY['('NA', 'North America', 'USD', 10)', '('EMEA', 'Europe Middle-east Africa', 'EUR', 11)', '('APAC', 'Asia Pacific', 'USD', 20)'])
failed to execute: select * from cw.create_tree(%s) syntax error at or near "NA"
LINE 1: select * from cw.create_tree(ARRAY['('NA', 'North America', ... 
```

我相信 postgresql 想要的是数组说明符的不同格式 - 不引用字符串，不是 '( 而是 "( 而不是 "ARRAY[" 而是 '{.

```
select * from cw.create_tree( '{"(NA, North America, USD, 10)", 
                                "(EMEA, Europe Middle-east Africa, EUR, 11)",
                                "(APAC, Asia Pacific, USD, 20)" }'); 
```

在 python 端做错了什么？还是在 postgresql 中设置一些选项来接受数组的替代规范？psycopg2 的版本在 zypper 中显示为 python-psycopg2-2.4.5-3.1.2.x86_64 - 这是合适的版本吗？

谢谢

# php - 我如何在 Joomla 编辑器中安装 AA 文本字体

> ID：14890049
> 
> 赞同：0
> 
> 时间：2013-02-15T07:31:55.720
> 
> 标签：php, joomla, joomla1.5

我是 Joomla 的新手，我正在创建一个在线考试网站，但我需要一个可以理解印地语的编辑器，但是当我将 Corel Draw 中的文本复制到编辑器时，它无法识别文本，所以请你告诉我如何我可以解决这个问题吗？或者这里有一些其他插件可用于印地语编辑器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:15:57.483

您可能需要将适当的语言包添加到 TinyMCE，它是 Joomla 的默认编辑器。[您可以从这里](http://www.tinymce.com/i18n/index.php?ctrl=lang&act=download)下载相应的语言包。

在 Joomla 1.6 及更高版本中，您需要解压缩并将文件夹上传到此位置：

```
media\editors\tinymce\jscripts\tiny_mce 
```

更多信息，我推荐浏览这篇博文：http: [//forum.joomla.org/viewtopic.php?p=2381935](http://forum.joomla.org/viewtopic.php?p=2381935)

Joomla 1.5 对文件使用不同的位置：

```
plugins\editors\tinymce\jscripts\tiny_mce 
```

如果您正在构建一个新站点，我强烈建议您使用 Joomla 2.5 而不是 1.5。1.5 不再受支持，2.5 有很多改进，这将使您的网站设置更加容易。

# php - 在 PHP 中使用全局标题时设置页面标题

> ID：14890053
> 
> 赞同：2
> 
> 时间：2013-02-15T07:32:07.217
> 
> 标签：php, global, title

我想知道你们在使用全局标题时如何设置页面标题。我希望能够逐页更改我的页面标题...例如，“站点名称：新闻档案”。最好的方法是使用 JavaScript 吗？如果我用 JS 这样做，新的更改会在搜索引擎结果中生效吗？只是想得到一些关于这个想法的意见。

```
<?php

include('header.php');

switch($_GET['p']){

   case "news": 
      include('news.php');
   break;

   default:
       include('indexBody.php');

}

include('footer.php');

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:37:02.880

您可以在包含标题之前定义一个变量。然后可以在 header.php 中使用此变量。

```
<?php

$pagetitle = "Site Name : News Archives";

include('header.php');

...

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:54:08.997

如果您想走这条路，也许可以尝试以下方法：

将变量存储在数据数组中，然后在回显之前将它们传递给您的页眉/页脚/内容视图。

`$data['title']`您的页眉和页脚等将看到`$title`

```
<?php
$page = (!empty($_GET['p'])?$_GET['p']:'index');

$data = array();
switch($page){
    case "news":
        $view = 'news.php';
        $data['title'] = 'Site Name : News Archives';
        break;

    default:
        $view = 'indexBody.php';
        $data['title'] = 'Site Name : Home';
        break;
}

echo load_view('header.php',$data);
echo load_view($view,$data);
echo load_view('footer.php',$data);

function load_view($path,$data) {
    if (file_exists($path) === false){
        return 'View not found: '.$path;
    }
    extract($data);
    ob_start();
    require($path);
    $out = ob_get_contents();
    ob_end_clean();
    return $out;
}
?> 
```

# asp-classic - 直接在浏览器上运行 ASP 文件，无需输入 url

> ID：14890056
> 
> 赞同：0
> 
> 时间：2013-02-15T07:32:12.450
> 
> 标签：asp-classic

我目前是asp的新手。我刚刚开始运行 ASP 文件，问题是每次运行 ASP 文件时，我都必须在浏览器中通过 url 输入路径。

```
example : http://localhost/MyWeb/test.asp 
```

有什么快速的方法可以在浏览器上测试 ASP 页面。我在 Adob​​e Dreamweaver 中创建了一个测试服务器，并且能够通过 Dreamweaver 运行 ASP 页面。

但我想通过双击它来运行 ASP 文件。有没有办法做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:14:15.160

你所要求的不是直接可能的。

您**可以**做的是编写一个批处理文件，例如将其称为“DisplayPage.bat”并使用以下代码：

```
set str=%1
set str=%str:C:\inetpub\wwwroot=http://localhost/MyWeb%
set str=%str:\=/%
start IEXPLORE.EXE %str%
REM pause 
```

这是假设您的根 Web 文件夹是“C:\inetpub\wwwroot”，如果不更改为您的根文件夹路径。

现在，请按照以下步骤操作：

1.  右键单击任何`.asp`文件并选择“打开方式”
2.  在菜单中选择“选择默认程序...”
3.  浏览到您在上面创建的批处理文件并确认。勾选“始终使用所选程序运行此类文件”以使其永久化。

这将导致双击以在 Internet Explorer 中打开单击的文件，指向 localhost。

上述步骤适用于 Windows 7，但对于任何操作系统都可以轻松实现。

如果该过程出现问题，您可以从最后一行删除“REM”，以便批处理文件暂停并显示问题所在。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T07:49:31.010

您可以使用包含

有两种类型的包含文件和虚拟在[http://www.w3schools.com/asp/asp_incfiles.asp阅读更多](http://www.w3schools.com/asp/asp_incfiles.asp)

# c# - linq 到 sql 事务

> ID：14890058
> 
> 赞同：2
> 
> 时间：2013-02-15T07:32:22.953
> 
> 标签：c#, sql, linq, transactionscope

我在下面的代码中有对存储过程的不同调用。

我的问题是我希望它在事务中，因此如果其中一个数据库方法失败，那么它将自动回滚待处理的更改。

我已经阅读了 Stackoverflow/Microsoft 页面上的一些文章，其中指出 SubmitChanges 将为我将这些包装在事务中。

问题是 spClearTablesForReplication 方法清除表，后来代码故意失败（用于测试），然后我所有的表都是空的（不回滚）

```
XalSqlDataContext db = new XalSqlDataContext();
db.spClearTablesForReplication();
db.spUpdateStockItemGroup(ConvertToXElement(typeof(List<StockItemGroup>),    stockItemGroups));
db.spUpdateStockItemSubGroup(ConvertToXElement(typeof(List<StockItemSubGroup>),    stockItemSubGroups));

db.SubmitChanges(); 
```

任何线索/解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T07:33:22.697

将您的代码包装在`TransactionScope`using 块中，然后它将回滚，除非它到达您调用`transactionScope.Complete()`.

例子：

```
using (TransactionScope transactionScope = new TransactionScope())
{
    //code here
    transactionScope.Complete();
} 
```

# linux - svn 权限问题 - txn-current-lock: Permission denied

> ID：14890062
> 
> 赞同：0
> 
> 时间：2013-02-15T07:32:51.690
> 
> 标签：linux, svn, shell, permissions, permission-denied

我`/svn/repos/myproject`按照[本](http://www.botsko.net/blog/2007/05/17/installing-subversion-on-fedora-core/)教程在本地系统上设置了 svn。我可以在浏览器中查看回购。

但是当它尝试导入新项目时，我无法通过 svn 客户端（快速 svn）它显示以下错误：

```
Execute: Import
Error while performing action: 
Can't open file '/svn/repos/myproject/db/txn-current-lock': Permission denied 
```

svn 目录权限：

```
→ ls -l /svn
total 12
drwxrwxr-x 2 root   root 4096 Feb 15 12:09 permissions
drwxrwxr-x 4 apache apache 4096 Feb 15 12:09 repos
drwxrwxr-x 2 root   root 4096 Feb 15 12:09 users 
```

回购目录：

```
→ ls -l
total 8
drwxrwxr-x 3 root   root   4096 Feb 15 12:09 conf
drwxrwxr-x 7 apache apache 4096 Feb 15 12:09 myproject 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:35:23.190

`repos`我已授予解决此问题的目录的 777 权限。但是我遇到了另一个问题，例如`Couldn't perform atomic initialization`。

我认为这是由于我们使用的 sqlite 版本与我们使用的 subversion 不兼容，这可以通过更新**svnadmin**命令来解决，

```
svnadmin create --pre-1.6-compatible --fs-type fsfs /svn/repos/myproject 
```

# c# - C# 使用导航字符串构建子属性 MemberAccess LINQ 表达式

> ID：14890063
> 
> 赞同：0
> 
> 时间：2013-02-15T07:32:55.313
> 
> 标签：c#, linq, entity-framework-4, lambda, expression

# 介绍

假设我有这些课程：

```
public class Door {
    public string Label { get; set; }
}

public class House {
    public string Address { get; set; }
    public Door FrontDoor { get; set; }
} 
```

现在，这些是数据库中的简单模型，使用 Entity Framework 4 进行抽象。因此，当我需要制作有序列表时，`House`我可以使用：

```
dbObjectContext.Houses.OrderBy(h=>h.Name); 
```

然后，如果我想按 订购`FrontDoor.Label`，我可以使用：

```
dbObjectContext.Houses.OrderBy(h=>h.FrontDoor.Label); 
```

# 问题

我打算制作一种旨在由 WPF DataGrid 使用的排序方法，该方法将显示房屋列表。方法签名如下：

```
IOrderedQueryable<TEntity> ApplySortingToQuery<TEntity>(bool ascending
    ,IQueryable<TEntity> finderQuery,string propertyPath) 
```

我想使用对象类型和属性访问路径字符串的知识来构建*OrderBy*表达式。`TEntity``propertyPath`

在 DataGrid 中，要排序的对象是 type `House`，它的列是*Address*和*Front Door Label*。现在，DataGrid 中的*Address*列已`SortMemberPath`设置为`Address`。而*前门标签*列是`FrontDoor.Label`.

一开始，我可以只使用`if-else`来确定要使用的*OrderBy*表达式，例如：

```
if (col.SortMemberPath=="Address") {
    query=query.OrderBy(h=>h.Address);
} else if (col.SortMemberPath=="FrontDoor.Label") {
    query=query.OrderBy(h=>h.FrontDoor.Label);
} 
```

但是，恕我直言，此功能非常通用。因此，执行此操作的实用程序函数将`SortMemberPath`像在该方法中一样咨询和使用它，`propertyPath`这对于将使用它的许多其他应用程序来说将是一个很大的帮助。

我已经咨询过这种[技术](https://stackoverflow.com/questions/307512/how-do-i-apply-orderby-on-an-iqueryable-using-a-string-column-name-within-a-gene)，它可以帮助我在一定程度上实现这个实用功能，但只有直接属性访问是成功的（即：）`Address`，但访问子属性（即：）`FrontDoor.Label`并不成功。

请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:33:56.113

该技术一直在网络中......（一如既往）

> > [http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

现在，我只需要使用 编译一个 DLL `CSharpSamples.zip\LinqSamples\DynamicQuery\DynamicQuery\Dynamic.cs`，使`System.Linq.Dynamic`命名空间可用。那么，方法实现就会变得非常简单。

重要的关键字是`dynamic query`…… 有时很难找到正确问题的正确关键字。

# log4net - Log4Net 不正确记录自定义异常

> ID：14890066
> 
> 赞同：1
> 
> 时间：2013-02-15T07:33:03.243
> 
> 标签：log4net

我正在使用 log4net 并记录异常。但我想在异常时间记录当前对象，但我做不到。我创建了异常并将对象添加到异常的数据属性中，然后通过 log4net 记录异常。log4net 的异常消息不包含我的对象。

我的代码，例如；

```
 try
                {
                    Exception exp = new Exception("critical error");
                    exp.Data.Add("Eror Object", viewModel);
                    throw exp;
                }
                catch (Exception exp)
                {
                    _logManager.Error(exp);

                } 
```

我的 viewModel 对象；

```
 [Serializable]
    public class CartTransferViewModel
    {
        public CartTransferViewModel()
        {
            Model = new ModelObject();
        }
        public ModelObject Model { get; set; }
        public string InformatinMessage { get; set; }
        public bool? IsActive { get; set; }
    } 
```

我的模型对象也是可序列化的。但是 log4Net 的异常信息是这样的；

```
System.Exception: critical error
   at FooProject.FooClass.FooMethod() in d:\FooProject\FooClass.cs:line 200 
```

我删除可序列化属性然后重新运行我的应用程序，错误代码确实更改为；

```
System.ArgumentException: Argument passed in is not serializable.
Parameter name: value
   at System.Collections.ListDictionaryInternal.Add(Object key, Object value)
   at FooProject.FooClass.FooMethod() in d:\FooProject\FooClass.cs:line 200 
```

如何用我的对象记录我的自定义异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:56:03.667

好的，如果我有你的问题。我做类似的事情。我使用记录器来编写异常。但我使用 Exception.Data 属性。

这是示例，示例包含 1) Info 类，需要编写 2) 带有方法的示例类，发生异常时编写 infoclass 3) 格式化异常的实用程序类

```
 [Serializable]
    public class FlatFileItem
    {
        ArrayList errorlist = new ArrayList();

        public FlatFileItem()
        {
            if (errorlist == null) { errorlist = new ArrayList(); }
        }

        //Name of the file
        public string FileName { get; set; }
        public override string ToString()
        {
            return string.Format(@"FlatFileItem (Unzip FTPLineItem) => FileName:{0}",  this.FileName);
        }
    }

public class someclass {
    public void somemethod(){
        try{
            // throw exception here
        } catch (Exception ex)
                    {
                        ex.Data["flatfile"] = Convert.ToString(flatfile);  //Using data property
                        flatfile.HasErrors = true;  //not there in above example
                        flatfile.Parent.AddErrorInfo(ex); //not there in above example
                        logger.Error(String.Format(ex.Message)); //not there in above example

                        throw ( new Exception ("yourmsg",ex)); //if you want to do this
                    }
    }
} 
```

//现在我使用这个实用方法在非常顶级的异常中写出所有内容

```
 public class ExceptionInfoUtil
{
    public static string GetAllExceptionInfo(Exception ex)
    {
        StringBuilder sbexception = new StringBuilder();

        int i = 1;
        sbexception.Append(GetExceptionInfo(ex, i));

        while (ex.InnerException != null)
        {
            i++;
            ex = ex.InnerException;
            sbexception.Append(GetExceptionInfo(ex, i));
        }

        return sbexception.ToString();
    }

    private static string GetExceptionInfo(Exception ex, int count)
    {
        StringBuilder sbexception = new StringBuilder();
        sbexception.AppendLine(string.Format(""));
        sbexception.AppendLine(string.Format(""));
        sbexception.AppendLine(string.Format("************************************************"));
        sbexception.AppendLine(string.Format("************************************************"));
        sbexception.AppendLine(string.Format(" Inner Exception : No.{0} ", count));
        sbexception.AppendLine(string.Format("************************************************"));
        sbexception.AppendLine(string.Format("=================================================="));
        sbexception.AppendLine(string.Format(" Error Message : {0} ", ex.Message));
        sbexception.AppendLine(string.Format("=================================================="));
        #region Mine Thru data dictionary

        try
        {
            sbexception.AppendLine(string.Format("=================================================="));
            sbexception.AppendLine(string.Format(" Data parameters Count at Source :{0}", ex.Data.Count));
            sbexception.AppendLine(string.Format("=================================================="));

            string skey = string.Empty;
            foreach (object key in ex.Data.Keys)
            {
                try
                {
                    if (key != null)
                    {
                        skey = Convert.ToString(key);
                        sbexception.AppendLine(string.Format(" Key :{0} , Value:{1}", skey, Convert.ToString(ex.Data[key])));
                    }
                    else
                    {
                        sbexception.AppendLine(string.Format(" Key is null"));
                    }
                }
                catch (Exception e1)
                {
                    sbexception.AppendLine(string.Format("**  Exception occurred when writting log *** [{0}] ", e1.Message));
                }
            }
        }
        catch (Exception ex1)
        {
            sbexception.AppendLine(string.Format("**  Exception occurred when writting log *** [{0}] ", ex1.Message));
        }

        #endregion
        sbexception.AppendLine(string.Format("=================================================="));
        sbexception.AppendLine(string.Format(" Source : {0} ", ex.Source));
        sbexception.AppendLine(string.Format("=================================================="));
        sbexception.AppendLine(string.Format(" StackTrace : {0} ", ex.StackTrace));
        sbexception.AppendLine(string.Format("=================================================="));
        sbexception.AppendLine(string.Format(" TargetSite : {0} ", ex.TargetSite));
        sbexception.AppendLine(string.Format("************************************************"));
        sbexception.AppendLine(string.Format(" Finished Writting Exception info :{0} ", count));
        sbexception.AppendLine(string.Format("************************************************"));
        sbexception.AppendLine(string.Format("************************************************"));
        sbexception.AppendLine(string.Format(""));
        sbexception.AppendLine(string.Format(""));

        return sbexception.ToString();

    }
} 
```

# css - ie7、safari 的边界半径

> ID：14890067
> 
> 赞同：-7
> 
> 时间：2013-02-15T07:33:06.443
> 
> 标签：css, internet-explorer, opera

我想`border-radius`在所有浏览器中使用。

它适用于 Firefox、Chrome 和 Safari。但是它不适用于 Internet Explorer 7、Internet Explorer 8 和 Opera。

如何跨浏览器做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:31:08.553

我总是使用 PIE.htc 作为边界半径，效果很好。

```
border-radius: 20px;
-webkit-box-shadow: 20px;
-moz-box-shadow: 20px;
behavior:url(PIE.htc); 
```

[http://css3pie.com/](http://css3pie.com/) <--下载并放在根文件夹的顶层。

# joomla - 调用未定义的方法 JXMLElement::getElementByPath()

> ID：14890071
> 
> 赞同：1
> 
> 时间：2013-02-15T07:33:21.380
> 
> 标签：joomla, components

我尝试在 joomla 2.5 中安装 ip 过滤器模块。安装时出现致命错误，即 在第 9 行的 com_ipfilter\install\install.php 中**调用未定义方法 JXMLElement::getElementByPath()**

我找不到任何帮助。

any1可以帮助解决这个问题吗

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-02T04:25:28.193

您的组件 com_ipfilter 显然适用于旧版本的 Joomla、ig Joomla 1.5 和 Joomla。所以你有两个选择

1.  重写旧组件以使用新版本的 Joomla（需要了解 PHP 编程）
2.  只需寻找一种替代方案，不要使用此扩展程序。

如果您想要第二个建议，请特别查看这些扩展[http://extensions.joomla.org/search?q=ip+block](http://extensions.joomla.org/search?q=ip+block)

# android - 广播接收器未调用

> ID：14890073
> 
> 赞同：0
> 
> 时间：2013-02-15T07:33:22.127
> 
> 标签：android

我正在做一个基本上是提醒应用程序的应用程序。它将在数据库中保存所有详细信息，例如日期、时间、收件人编号、内容文本等，之后它将使用此存储的日期和时间的详细信息发送短信

实际上我没有使用任何日历实例我打算做的是，设置一个每天调用的广播接收器，然后在数据库中搜索，如果找到日期，它将使用该日期和时间发送一条短信

现在我想做的是创建一个每天调用的广播接收器

我使用的代码 id

```
 public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    System.out.println("Broadcast receiver Started");
     Intent dailyUpdater = new Intent(context, MyService.class);
        context.startService(dailyUpdater);
        Log.d("AlarmReceiver", "Called context.startService from AlarmReceiver.onReceive"); 
```

也在清单中注册了动作 Time_changed

但是接收者没有打电话，谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:17:56.553

广播接收器是一个后台进程。这可能会帮助你..

```
Intent dailyUpdater = new Intent(context, MyService.class);
dailyUpdater.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startService(dailyUpdater); 
```

# c - 函数声明对 C 编程至关重要吗？

> ID：14890076
> 
> 赞同：2
> 
> 时间：2013-02-15T07:33:29.263
> 
> 标签：c, gcc, assembly, compilation, nasm

我曾经认为我们应该在使用它之前声明一个在另一个文件中定义的函数，但最近我因为编程经验改变了我的思维方式。对于三个文件，`C`并且`ASM`：

***主程序***

```
extern test_str;
/*extern myprint*/   --> If I add the line, gcc will report an error: called object ‘myprint’ is not a function
void Print_String() {
    myprint("a simple test", test_str);
} 
```

***内核.asm***

```
extern Print_String

[section .text]
global _start
global test_str
test_str    dd  14
_start:
    call Print_String
    jmp $ 
```

***另一个.asm***

```
[section .text]
global myprint
myprint:
    mov edx, [esp + 8]
    mov ecx, [esp + 4]
    mov ebx, 1
    mov eax, 4
    int 0x80
    ret 
```

*编译*

```
nasm -f elf another.asm -o another.o
gcc -c -g main.c -o main.o
nasm -f elf kernel.asm -o kernel.o
ld -o final main.o kernel.o another.o 
```

*结果*

```
./final 
a simple test 
```

在我看来，如果我想使用***main.c***`myprint`中的函数，我应该事先声明它，因为它 是在另一个文件中定义的，但结果恰恰相反。正如上面的***main.c***所示。如果我添加 line ，我会得到一个错误。但是，如果没有该声明，我将得到正确的结果。更何况我没有在***main.c***中定义函数，为什么我可以使用那个函数呢？我不应该提前声明吗？*`extern``myprint`*`extern myprint``myprint`**

 **** * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T07:36:26.337

当您调用没有原型的函数时，编译器会对该函数的参数做出一些假设和猜测。所以你应该声明它，但将它声明为一个函数：

```
void myprint(const char *, const char *); /* Or whatever. */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:05:09.163

好吧，您可以使用 function `myprint`，尽管它没有在***main.c***中定义，但没有错误。这是因为编译器在创建目标文件时会针对创建的目标文件中的符号填充 NULL 值`myprint`。

仅在链接阶段，此 NULL 值在二进制文件中的所有位置都替换为函数的实际地址。链接器引用所有目标文件中的符号表，并使用实际地址解析符号（无论在何处引用）。

`-Werror -Wall`当然，您会看到带有选项的警告/错误`gcc`。虽然，您可以使用`objdump`以下方法获得更多洞察力：

```
objdump -D main.o | less 
```

希望这有助于消除您的疑问。***

# c++ - C++ 中的快速百分位数

> ID：14890079
> 
> 赞同：2
> 
> 时间：2013-02-15T07:33:42.407
> 
> 标签：c++, performance, percentile

我的程序计算了风险价值指标的蒙特卡罗模拟。为了尽可能简化，我有：

```
1/ simulated daily cashflows
2/ to get a sample of a possible 1-year cashflow, 
   I need to draw 365 random daily cashflows and sum them 
```

因此，每日现金流量是一个经验给定的分布函数，需要抽样 365 次。为此，我

```
 1/ sort the daily cashflows into an array called *this->distro*
 2/ calculate 365 percentiles corresponding to random probabilities 
```

我需要对年度现金流进行此模拟，例如 10K 次，以获得一组模拟的年度现金流。准备好每日现金流量的分布函数后，我会像...

```
for ( unsigned int idxSim = 0; idxSim < _g.xSimulationCount; idxSim++ )
{
    generatedVal = 0.0;
    for ( register unsigned int idxDay = 0; idxDay < 365; idxDay ++ )
    {
        prob = (FLT_TYPE)fastrand();         // prob [0,1]
        dIdx = prob * dMaxDistroIndex;       // scale prob to distro function size
                                             // to get an index into distro array
        _floor = ((FLT_TYPE)(long)dIdx);     // fast version of floor
        _ceil  = _floor + 1.0f;              // 'fast' ceil:)
        iIdx1  = (unsigned int)( _floor );
        iIdx2  = iIdx1 + 1;

        // interpolation per se
        generatedVal += this->distro[iIdx1]*(_ceil - dIdx  );
        generatedVal += this->distro[iIdx2]*(dIdx  - _floor);
    }
    this->yearlyCashflows[idxSim] = generatedVal ;
} 
```

两个`for`周期内的代码都进行线性插值。如果说 1000 美元对应概率 = 0.01，10000 美元对应概率 = 0.1，那么如果我没有 p = 0.05 的经验数，我想通过插值获得 5000 美元。

问题：这段代码运行正确，尽管分析器说程序在插值本身上花费了大约 60% 的运行时间。所以我的问题是，我怎样才能使这项任务更快？VTune 报告的特定行的示例运行时如下：

```
prob = (FLT_TYPE)fastrand();         //  0.727s
dIdx = prob * dMaxDistroIndex;       //  1.435s
_floor = ((FLT_TYPE)(long)dIdx);     //  0.718s
_ceil  = _floor + 1.0f;              //    -

iIdx1  = (unsigned int)( _floor );   // 4.949s
iIdx2  = iIdx1 + 1;                  //    -

// interpolation per se
generatedVal += this->distro[iIdx1]*(_ceil - dIdx  );  //    -
generatedVal += this->distro[iIdx2]*(dIdx  - _floor);  // 12.704s 
```

破折号表示分析器没有报告这些行的运行时间。

任何提示将不胜感激。丹尼尔

**编辑：** c.fogelklou 和 MSalters 都指出了很大的改进。符合 c.fogelklou 所说的最佳代码是

```
converter = distroDimension / (FLT_TYPE)(RAND_MAX + 1)
for ( unsigned int idxSim = 0; idxSim < _g.xSimulationCount; idxSim++ )
{
    generatedVal = 0.0;
    for ( register unsigned int idxDay = 0; idxDay < 365; idxDay ++ )
    {
        dIdx  = (FLT_TYPE)fastrand() * converter;
        iIdx1 = (unsigned long)dIdx);
        _floor = (FLT_TYPE)iIdx1;
        generatedVal += this->distro[iIdx1] + this->diffs[iIdx1] *(dIdx  - _floor);
    }
} 
```

我拥有的最好的 MSalter 路线是

```
normalizer = 1.0/(FLT_TYPE)(RAND_MAX + 1);
for ( unsigned int idxSim = 0; idxSim < _g.xSimulationCount; idxSim++ )
{
    generatedVal = 0.0;
    for ( register unsigned int idxDay = 0; idxDay < 365; idxDay ++ )
    {
        dIdx  = (FLT_TYPE)fastrand()* normalizer ;
        iIdx1 = fastrand() % _g.xDayCount;
        generatedVal += this->distro[iIdx1];
        generatedVal += this->diffs[iIdx1]*dIdx;
    }
} 
```

第二个代码大约是。快 30%。现在，在总运行时间的 95 秒中，最后一行消耗了 68 秒。最后一行只消耗 3.2 秒，因此双 * 双乘法一定是魔鬼。我想到了 SSE - 将最后三个操作数保存到一个数组中，然后执行 this->diffs[i]*dIdx[i] 的向量乘法并将其添加到 this->distro[i] 但这段代码运行了 50%慢点。因此，我想我碰壁了。

非常感谢大家。D.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T07:54:55.123

这是一个小优化的提议，消除了对 ceil、两个演员表和一个乘法的需要。如果您在定点处理器上运行，那就可以解释为什么 float 和 int 之间的乘法和强制转换需要这么长时间。在这种情况下，如果 CPU 支持，请尝试使用定点优化或在编译器中打开浮点！

```
for ( unsigned int idxSim = 0; idxSim < _g.xSimulationCount; idxSim++ )
{
    generatedVal = 0.0;
    for ( register unsigned int idxDay = 0; idxDay < 365; idxDay ++ )
    {
        prob = (FLT_TYPE)fastrand();         // prob [0,1]
        dIdx = prob * dMaxDistroIndex;       // scale prob to distro function size
                                             // to get an index into distro array
        iIdx1  = (long)dIdx;
        _floor = (FLT_TYPE)iIdx1;     // fast version of floor
        iIdx2  = iIdx1 + 1;

        // interpolation per se
        {
           const FLT_TYPE diff = this->distro[iIdx2] - this->distro[iIdx1];
           const FLT_TYPE interp = this->distro[iIdx1] + diff * (dIdx - _floor);
           generatedVal += interp;
        }
    }
    this->yearlyCashflows[idxSim] = generatedVal ;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T10:30:16.837

我会建议修复`fastrand`. 浮点代码并不是世界上最快的，但特别慢的是浮点代码和整数代码之间的切换。由于您需要整数索引，因此请使用整数随机函数。

在循环中预先生成所有 365 个随机值甚至可能是有利的。由于您只需要`log2(dMaxDistroIndex)`每个值的随机性位，因此您可以减少 RNG 调用的数量。

随后，您将选择一个介于 0 和 1 之间的随机数作为插值分数。

# c++ - 为什么 getpeername() 返回 OK 但结果却不如预期？

> ID：14890083
> 
> 赞同：-3
> 
> 时间：2013-02-15T07:33:56.180
> 
> 标签：c++, sockets, networking, tcp

这个问题已经解决。根本原因是我传递了一个 C++ 临时对象作为 getpeername() 的 sockaddr*，该对象在 getpeername() 返回后被自动销毁。

因此，最终结果全为 0。

对不起我的粗心。我已经投票关闭这篇文章。请也投票关闭。

* * *

```
#include <winsock2.h>
#include <windows.h>
#include <thread>

using namespace std;

void server()
{
    sockaddr_in server_addr {};
    server_addr.sin_family      = AF_INET;
    server_addr.sin_addr.s_addr = inet_addr("127.0.0.1");
    server_addr.sin_port        = htons(1234);

    SOCKET s_listening = socket(AF_INET, SOCK_STREAM, 0);

    bind(s_listening, (sockaddr*)&server_addr, sizeof(server_addr));
    listen(s_listening, 5);

    while (true) 
    {
        auto s_new = accept(s_listening, 0, 0);

        sockaddr_in client_addr {};
        int size = sizeof(client_addr);
        auto ret = getpeername(s_new, (sockaddr*)&client_addr, &size); 
        //
        // ret is 0, which means the call to getpeername is OK. 
        // But client_addr is full of 0s rather than "127.0.0.1:4". Why?
        //
    }
}

int main()
{
    std::thread(server).detach();
    SOCKET s_client = socket(AF_INET, SOCK_STREAM, 0);

    sockaddr_in client_addr {};
    client_addr.sin_family      = AF_INET;
    client_addr.sin_addr.s_addr = inet_addr("127.0.0.1");
    client_addr.sin_port        = htons(4);

    bind(s_client, (sockaddr*)&client_addr, sizeof(client_addr));

    sockaddr_in server_addr {};
    server_addr.sin_family      = AF_INET;
    server_addr.sin_addr.s_addr = inet_addr("127.0.0.1");
    server_addr.sin_port        = htons(1234);

    connect(s_client, (sockaddr*)&server_addr, sizeof(server_addr));
    getchar();
} 
```

代码是用VC++ 2012编译的，但是调用getpeername函数虽然返回OK，但是返回的数据是错误的（全是0），为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T07:46:34.377

`getpeername()`初始化一个`sockaddr_<something>`结构。如果`<something>`等于`in`，则以二进制格式保存 IP 地址和端口。

它不*携带*保存对等方名称/地址和端口的任何 ASCII 表示的字符缓冲区。

中的值`sockaddr_in`也按网络字节顺序保存。

要打印 OP 源代码片段中注释所表达的地址和端口，您可以执行以下操作：

```
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>

...

int sd = -1; /* init to invalid socket */

... /* get sd a proper value */

sockaddr_in sa = {0}; /* init to all zeros */
socklen_t sl = sizeof(sa);
if (getpeername(sd, (sockaddr *) &sa,  &sl))
  perror("getpeername() failed");
else
  printf("peer is: %s:%hu\n", inetntoa(sa.sinaddr), ntohs(sa.sin_port)); 
```

# javascript - 集合/实例对象样式 vie 没有 proto 的 javascript

> ID：14890084
> 
> 赞同：0
> 
> 时间：2013-02-15T07:33:57.370
> 
> 标签：javascript, oop, prototype

我正在尝试通过 javascript 制作经典的 Collection/Instance 模型。所以 Collection 对象有一些处理完整集合的方法，并且 ((new Collection()) instanceof Instance) 有处理实例的方法。我的代码相当简单。

```
var Collection = function Collection() {
  this.message = "collection";
  var I = Instance.bind(null, this);
  I.__proto__ = this;
  return I;
};
Collection.prototype = {
  collectionMethod: function () {
    console.log(this.message);
  }
};

var Instance = function Instance(collection) {
  this.collection = collection;
  this.message = "instance";
};
Instance.prototype = {
  instanceMethod: function () {
    console.log(this.message);
  }
};

// Test exec (values are like expected);

var C = new Collection();
var i = new C();
C.collectionMethod(); // collection
i.instanceMethod(); // instance
i.collection.collectionMethod(); // collection
C.newMethod(); // TypeError
i.newMethod(); // TypeError
Collection.prototype.newMethod = Instance.prototype.newMethod = function () {
  console.log("newMethod: " + this.message);
}
C.newMethod(); // newMethod: collection
i.newMethod(); // newMethod: instance 
```

但我不想使用 proto，因为它不是标准的一部分，在 IE 中根本不起作用。在这种情况下有什么办法吗？

* * *

关于所有内容的一些解释。例如，您有一组用户。并且您希望能够找到用户并创建新用户。

所以你创建新的集合，比如

```
var User = new Collection(); 
```

然后你创建新的实例。

```
var me = new User({name: "alex"}); 
```

现在你发现这个实例就像

```
User.find_by_name("alex"); // === me 
```

另外（实际上这是我这样做的主要原因，而不是仅仅创建类似`User.new`函数来使用它`var me = User.new({name: "alex"});`）你可以知道我在做什么（如果你也有`var Dog = new Collection()`）

```
me instanceof Dog // false
me instanceof User // true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:49:47.437

这段代码：

```
var I = Instance.bind(null, this);
I.__proto__ = this;
return I; 
```

真的没有多大意义。Function.bind 创建一个新的**function**，所以任何调用你的 Collection 函数的人，无论如何都会得到一个*function*，而不是一个原型被设置为函数原型的对象。

一般来说，如果你想创建一个原型设置为特定对象的对象，你**不要**设置`__proto__`，因为这不是标准的，正如你所说的。最好的方法是只使用 Object.create （如果你想支持 IE8，这是 shimable ）。

```
var I = Object.create(this); 
```

* * *

此外，您遇到错误的原因是因为您在将它们添加到原型*之前*`newMethod`尝试调用它们：

 *```
Collection.prototype.newMethod = Instance.prototype.newMethod = function () {
  console.log("newMethod: " + this.message);
}
C.newMethod(); // should work now
i.newMethod(); // should work now 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:50:53.220

所以目前看来是不可能的。更多信息可以在这里找到。

[如何继承 javascript 函数？](https://stackoverflow.com/questions/7539148/how-do-i-inherit-javascript-functions)*

# java - 这两种写入数组的方式之间有什么重要区别吗？

> ID：14890085
> 
> 赞同：0
> 
> 时间：2013-02-15T07:33:58.297
> 
> 标签：java, arrays

这是我最近得到答案的一个问题（[这里](https://stackoverflow.com/questions/14512407/how-to-get-the-first-columns-contents-from-a-2d-array/14512494#14512494)）之后的一个概念性问题。我将使用一个 java 示例来演示我的问题，但我认为这应该适用于其他类似的语言（我不能肯定地说 - 希望有人可以证实这一点或说其他话）。基本上我想知道以下可能的用途之间是否存在任何细微差别（考虑到它们的初始化方式）：

```
double[] array1D = new double[max] 
```

和

```
double[][] array2D = new double [max][1] 
```

假设我们将第二个数组初始化为只有一列，那么一维数组真的需要存在吗？它是否具有 2D 阵列所没有的任何品质，还是只是用来迷惑像我这样的可怜的灵魂？此外，我想知道是否`array2D`只有一列可以做任何不能做的事情`array1D`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:55:04.597

array1D 和 array2D 之间的主要区别在于后者中的行（或列，但是您想查看它）是可以独立于整个数组使用的单个对象。

例如，您可以将整行传递给函数，并且允许该函数修改该行。要使用一维数组实现相同的效果，您必须传递原始数组、数组中行的起始索引和行的长度。

对对象的每个引用都需要 4 个字节，因此每个元素的内存使用量会增加 4 个字节，因此将 2D 数组用于 1D 数组可以做的事情是浪费内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T07:46:18.280

new double[max] 创建一个双精度数组（以 0.0 初始化），其中 lengh = max

new double [max][1] 创建一个指针数组，每个指针都指向一个双精度数组，其中一个元素 = 0.0

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T07:49:26.730

```
int A[2][3]={{1,2,3},{4,5,6}}; 
```

一个二维数组存储在内存中，如下所示。第 0 行中的条目首先存储，然后是第 1 行，依此类推。

![在此处输入图像描述](../Images/99df8ec25a46a43ea05d8b71728e3f1b.png)

二维数组被表示为一个连续的 n 个块，每个块的大小为 m（即每个块中可以保存 m 个整数（或任何数据类型））。条目存储在内存中，如上所示。这里n代表行数，m代表列数。

**在 Java 中：**

与所有数组一样，必须使用 new 关键字为数组分配内存。例如，

```
 int[][] a = new int[2][4]; 
```

这个二维数组将有两行和四列。这实际上分配了 3 个对象：一个由 2 个元素组成的一维数组来保存每个实际的行数组，以及两个由 4 个元素组成的一维数组来表示行的内容。

```
 +-----+    +-----+-----+-----+-----+
 |a[0] | -> | [0] | [1] | [2] | [3] |
 |     |    +-----+-----+-----+-----+    In Java two-dimensional arrays are implemented is a  
                                        one-dimensional array of one-dimensional arrays -- like this.
 +-----+
 |     |    +-----+-----+-----+-----+
 |a[1] | -> | [0] | [1] | [2] | [3] |
 +-----+    +-----+-----+-----+-----+ 
```

在你的情况下：

```
double[][] array2D = new double [max][1] 
```

这实际上分配了 max+1 个对象：一个包含 max 元素的一维数组来保存每个实际的行数组，以及一个包含 1 个元素的 max 一维数组来表示行的内容。

如果我错了，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T07:43:27.920

两者都会做同样的事情。此外，当您只需要一行时，您不需要创建二维数组。当您需要处理多个一维数组时，使用二维数组。

另外，我认为您需要以这种方式初始化二维以使其适用于一维数组

```
double[][] array2D = new double[1][max] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T07:44:21.017

想象一下这是一维数组

```
1 2 3 4 5 6 7 8 9 
```

这是二维数组

```
1
2
3
4
5
6
7
8
9
  1 2 3 4 5 6 7 8 9 
```

基本上，二维数组可以存储比一维数组更多的数据，并且比一维数组更复杂

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T07:45:26.373

您似乎误解了数组具有二维是正常的。这不是真的。

在编程语言中，一维数组是常态，而二维和更高维的数组相当罕见（我不记得我上次在 Java 中使用它是什么时候）。

使用二维数组而不是一维数组是可能的，但它会模糊数组的含义并使访问数组元素更加复杂。

# salesforce - 找不到元素的 Apex 类型：userDetails

> ID：14890086
> 
> 赞同：2
> 
> 时间：2013-02-15T07:34:13.693
> 
> 标签：salesforce, callouts

我从网络服务收到以下响应

```
<?xml version="1.0" encoding="UTF-8"?><SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/"><SOAP-ENV:Body><GetUserResponse xmlns="urn:wwservice"><userDetails xmlns="">Successfully write a web service hurray</userDetails></GetUserResponse></SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

但是我得到元素的 Apex 类型未找到：userDetails

这是我的 wsdl 文件

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<definitions xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:tns="urn:wwservice" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="urn:wwservice">
<types>
<xsd:schema elementFormDefault="qualified" targetNamespace="urn:wwservice">
 <xsd:import namespace="http://schemas.xmlsoap.org/soap/encoding/"/>
 <xsd:import namespace="http://schemas.xmlsoap.org/wsdl/"/>
 <xsd:complexType name="GetUserRequestType">
  <xsd:all>
   <xsd:element name="Username" type="xsd:string" form="unqualified"/>
   <xsd:element name="Password" type="xsd:string" form="unqualified"/>
  </xsd:all>
 </xsd:complexType>
 <xsd:complexType name="GetUserResponseType">
  <xsd:all>
   <xsd:element name="userDetails" type="xsd:string" form="unqualified"/>
  </xsd:all>
 </xsd:complexType>
 <xsd:element name="GetUser" type="tns:GetUserRequestType"/>
 <xsd:element name="GetUserResponse" type="tns:GetUserResponseType"/>
</xsd:schema>
</types>
<message name="GetUserRequest">
  <part name="parameters" element="tns:GetUser"/></message>
<message name="GetUserResponse">
  <part name="parameters" element="tns:GetUserResponse"/></message>
<portType name="PsocialPortType">
  <operation name="GetUser">
    <input message="tns:GetUserRequest"/>
    <output message="tns:GetUserResponse"/>
  </operation>
</portType>
<binding name="PsocialBinding" type="tns:PsocialPortType">
  <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
  <operation name="GetUser">
    <soap:operation soapAction="urn:wwservice#GetUser" style="document"/>
    <input><soap:body use="literal" namespace="urn:wwservice"/></input>
    <output><soap:body use="literal" namespace="urn:wwservice"/></output>
  </operation>
</binding>
<service name="Psocial">
  <port name="PsocialPort" binding="tns:PsocialBinding">
    <soap:address location="http://example.com/webservice/wwservice.php"/>
  </port>
</service>
</definitions> 
```

请让我知道我哪里出错了

我正在使用它来创建 WSDL

```
$server = new soap_server();
    // Changed for coupons data start
    $server->soap_defencoding = 'UTF-8';
    $server->decode_utf8 = false;
    // Changed for coupons data end

    //$server->configureWSDL('m-way', 'urn:wwservice');
    $server->configureWSDL('Psocial', 'urn:wwservice',false,'document');

    // New function for spiff
    $server->register("GetUser", 
    array('Username'=>'xsd:string','Password'=>'xsd:string'),
    array('userDetails'=>'xsd:string'),
    'urn:wwservice',
    'urn:wwservice#GetUser', 'document', 'literal'
    );

    $HTTP_RAW_POST_DATA = isset($HTTP_RAW_POST_DATA)? $HTTP_RAW_POST_DATA : file_get_contents('php://input');
    $server->service($HTTP_RAW_POST_DATA); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:53:27.233

问题是您获得的 SOAP 响应与 WSDL 中的描述不匹配，WSDL 具有`elementFormDefault="qualified"`模式，它表示子元素将在命名空间中，例如它说响应应该是

```
<GetUserResponse xmlns="urn:wwservice">
   <userDetails>Hello</userDetails>
</GetUserResponse> 
```

但你得到的实际回应有

```
<GetUserResponse xmlns="urn:wwservice">
     <userDetails xmlns="">Successfully write a web service hurray</userDetails>
</GetUserResponse> 
```

请注意 userDetails 元素的命名空间有何不同。您应该更新 WSDL 以说 elementForDefault="unqualified" 或更新 Web 服务以在 userDetails 元素上返回正确的名称空间。

# azure - 在 Windows Azure 角色之间共享配置设置

> ID：14890091
> 
> 赞同：5
> 
> 时间：2013-02-15T07:34:32.867
> 
> 标签：azure

我的 Azure 项目具有 Web 角色和辅助角色。这两个角色都有一些共同的配置。

我如何共享配置而不是重复两个角色。

现在 cscfg 文件看起来像这样

```
<ServiceConfiguration serviceName="xxx" ....>
  <Role name="WebRole1">
     <Instances count="1" />
     <ConfigurationSettings>
        ....
        <Setting name="setting1" value="" />
        <Setting name="setting2" value="" />
      </ConfigurationSettings> 
     <Certificates>
     .....
     </Certificates>
  </Role>
  <Role name="WorkerRole1">
     <Instances count="1" />
     <ConfigurationSettings>
         ....
         <Setting name="setting1" value="" />
         <Setting name="setting2" value="" />
     </ConfigurationSettings> 
     <Certificates>
     .....
     </Certificates>
  </Role>
</ServiceConfiguration> 
```

谷歌搜索后，我发现了这个[http://www.simple-talk.com/blogs/2011/03/16/sharing-configuration-settings-between-windows-azure-roles/](http://www.simple-talk.com/blogs/2011/03/16/sharing-configuration-settings-between-windows-azure-roles/) - 有没有简单的方法来实现同样的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:46:55.177

您发现的是非常有趣的方法，但是无论如何都缺少提到的附件。如果我仍然有一些特定于角色的设置并将其（它们）添加到特定角色中，将会发生什么也是值得怀疑的。这种方法（很可能）仅限于为所有角色提供相同的设置。

为了实现你的目标，我会做些什么有点不同。我会使用 Azure 表存储来存储我的配置设置。第一次实现这可能有点困难，但从那时起，您可以在所有项目中自由地重用它。`harder`关键是您必须实现自己的逻辑`monitoring`来监视配置更改。就是这样。您有一个共同的设置存储。您可以使用任何免费或付费的 Azure Storage *explorer 之类的工具来读取/更新设置。

# php - 列出所有子菜单中的项目（SQL）

> ID：14890094
> 
> 赞同：0
> 
> 时间：2013-02-15T07:34:41.277
> 
> 标签：php, mysql, codeigniter

所以我有一个菜单表，id，title，parent_id

我已将一些内容字段附加到菜单的最底层（假设 id = 50），那么如果我单击该树菜单的顶部父级（id = 1），我希望它显示附加的内容到子菜单（不管多深），所以我想我需要遍历父母，你能帮我解释一下这个逻辑吗？

## 控制器：

```
 $data['query'] = $this->item_model->getByType($menu_id); 
```

## 该模型：

```
function getByType($menu_id) {
    if($menu_id) {
        $q = $this->db->get_where('menus', array('id' => $menu_id));
        $parent_id = $q->row()->parent_id;
    }else{
        return;
    }
    $this->db->select('*');
    $this->db->from('items');
    $this->db->where('menu_id', $menu_id);
    $this->db->or_where('menu_id', $parent_id);
    $query = $this->db->get();
    return $query;
} 
```

所以到现在为止，如果我点击他的父级（2级），我只能得到一些菜单，但是如何使它无限深？，我想这里我需要循环`or_where`，你能帮我吗接着就，随即？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:56:17.310

嗯……[递归](https://www.google.com/search?q=recursion)！

```
function getChildrenAttachments($menu_id) {
    // invalid menu id
    if(!$menu_id) return;
    // get all rows with this parent id
    $query = $this->db->get_where('menus', array('parent_id' => $menu_id));
    // result will hold all the attachments
    $result = array();
    // loop through results
    foreach($query->result() as $row) {
        // does this row have an attachment?
        if($row->attachment!='') {
            $result[] = $row->attachment;
        }
        // add all children attachments
        $result = array_merge($result, getChildrenAttachments($row->id));
    }
    // return result set
    return $result
} 
```

这个实现没有考虑当前`menu_id`实际有一个附件。您可以创建一个新函数，该函数考虑`getAttachmentsForTree()`检查当前 id 的内容，然后将 id 传递给`getChildrenAttachments()`...

PS 我还没有运行代码，所以对于代码可能出现的任何问题，我深表歉意。这只是一个示例，说明如何在这种情况下利用递归来发挥自己的优势。

# qt - 用更多行动态更新 QTableView

> ID：14890097
> 
> 赞同：0
> 
> 时间：2013-02-15T07:35:05.727
> 
> 标签：qt, qtableview, qabstracttablemodel

我有一个`QTableView`，它使用从`QAbstractTableModel`.

该模型以多行开始并正确显示数据。

该模型还附加了一个计时器，它在到期时获取行数和列数，为其构建索引，并发出 dataChanged 信号，以更新表的动态内容。

问题是当它应该显示的行数发生变化时。

在那种情况下，即使我获得了一个更改后的新索引。行，并更新表，它仍然不显示任何新行。

我已经确定了原因，也许。假设我一开始有 2 行，接下来应该显示 5 行。在计时器到期逻辑中，我已经要求它构造一个新索引，具有新的行数……但是`dataChanged()`信号只会更改已经插入第一个行的数据。不显示新行。

这是我的模型代码。

```
TableLayout::TableLayout()
  : QAbstractTableModel()
{
  rowCount();
  columnCount();
  timer = new QTimer(this);
  timer->setInterval(3000);
  timer->start();
  connect(timer, SIGNAL(timeout()), this, SLOT(timerHit()));

  //ItemList[0].SetFields("Blah" ,"Blah" , "Blah" , "Blah" , "Blah", "Blah", true  );
  //ItemList[1].SetFields("Blah1" ,"Blah1" ,"Blah1" ,"Blah1" ,"Blah1", "Blah1", true );
}

void TableLayout::timerHit()
{
  int row = this->rowCount();
  qDebug() << "RowCOunt::" << row;
  qDebug() << " Now IT IS : " << row;
  int col = this->columnCount();
  qDebug() << "ColumnCOunt::" << col;
  QModelIndex Ind = createIndex( 0, 0);
  QModelIndex Ind1 = createIndex( row, col);
  data(Ind1);
  emit dataChanged(Ind, Ind1);
}

int TableLayout::rowCount(const QModelIndex& /*parent*/) const
{
  RtdbReader* rtdbReader = RtdbReader::instance();
  if (isConnected)
    return rtdbReader->Get_Number_of_Items();
  else return 2;
}

int TableLayout::columnCount(const QModelIndex& /*parent*/) const
{
  return 6;
}

QVariant TableLayout::data(const QModelIndex& index, int role) const
{
  int row = index.row();
  int col = index.column();

  //return row;
  int row_count, col_count = 0;
  if ( role == Qt::DisplayRole) {

    if ( col == 1)
      return ItemList[row]->GetExplanation();
    if ( col == 2) {
      qDebug() << " Now printing Sig name for row" << index.row();
      return ItemList[row]->GetCond_Sig_Name();
    }
    if ( col == 3)
      return ItemList[row]->GetDescription();
    if ( col == 5)
      return ItemList[row]->GetLogic();
    if ( col == 4)
      return ItemList[row]->Get_State_Text();
  } else if ( role == Qt::DecorationRole && col == 0 ) {
    bool col_to_display = ItemList[row]->GetValueColour();
    qDebug() << "colour in view:" << col_to_display;
    if  ( col_to_display ) {
      QString path = "Green.png";
      //QPixmap p( s_type1Icon );
      // return s_type1Icon;

      QIcon icon ( path );
      return icon;
    } else {
      QString path = "Yellow.png";
      //QPixmap p( s_type1Icon );
      // return s_type1Icon;

      QIcon icon ( path );
      return icon;
    }
  }

  if (role == Qt::TextAlignmentRole )
    return Qt::AlignCenter | Qt::AlignVCenter;

  /* else if ( role == Qt::BackgroundRole)
   {
     QBrush yellowBackground(Qt::yellow);
              return yellowBackground;
   }*/

  return QVariant();
} 
```

请建议我如何更改视图以便添加新行。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-15T08:16:09.573

仅仅因为您`QModelIndex`在 处创建元素`row, col`，并不意味着您为该元素创建了数据（也不是为当前端和该元素之间的元素）。

您必须使用`setData(...)`将新数据添加到表中，然后发出`dataChanged(...)`视图以显示它。

# asp.net - 从一页获取信息并在另一页显示

> ID：14890098
> 
> 赞同：3
> 
> 时间：2013-02-15T07:35:09.227
> 
> 标签：asp.net

我在购物车网站上工作，我想显示 div 部分中包含的产品的完整信息。在另一个页面上。我有可能包含信息的 div。目标是在用户单击某些产品的图像时在新页面上获取信息。

```
 Error: 
           Control 'MainContent_ImageButton1' of type 'ImageButton' must be placed inside a form tag with runat=server.
    HTML:
      <div id="physics" runat="server">
        <h3>High School Physics</h3>
      <%--  <a href="ShowLarge.aspx"> <img src="images/Book.jpg" />  </a>--%>
        <asp:ImageButton ID="ImageButton1" 
                src="images/Book.jpg" runat="server" onclick="ImageButton1_Click"  />
        <p> Book Description Goes Here
        <br />
         <asp:Label ID="Label1" runat="server" Text="Label">PKR 770/-</asp:Label>
         <br />
         <asp:TextBox ID="TextBox1" Text="1" runat="server"></asp:TextBox>

         <asp:Button ID="Button1" runat="server" Text="Add" />
        </p>

    </div>

    Code :
     protected void ImageButton1_Click(object sender, ImageClickEventArgs e)
        {
            StringWriter sw = new StringWriter();
        HtmlTextWriter w = new HtmlTextWriter(sw);

        physics.RenderControl(w);
        Session["mySessionVar"]  = sw.GetStringBuilder().ToString();

            Response.Redirect("ShowLarge.aspx", true);

        }

    HTML: where i want to show this info 

    <div id="ShowInLargeView" runat="server">
    </div>

    Code: 

     protected void Page_Load(object sender, EventArgs e)
        {
            ShowInLargeView.InnerHtml = (String)Session["mySessionVar"];
        } 
```

我想在另一个页面中显示 Div 的完整信息。我得到一个错误。这个场景是关于购物车的，我需要帮助，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:01:57.437

您收到的错误与您尝试添加事件处理程序有关

```
 protected void ImageButton1_Click(object sender, ImageClickEventArgs e) 
```

为了向页面上的元素添加事件处理程序，需要将其封装在具有 runat="server" 属性的“表单”中。这将导致 ImageButton 的单击事件最终出现在您的代码隐藏中。

所以你的 aspx 会变成这样：

```
<form runat="server">
      <div id="physics" runat="server">
        <h3>High School Physics</h3>
      <%--  <a href="ShowLarge.aspx"> <img src="images/Book.jpg" />  </a>--%>
        <asp:ImageButton ID="ImageButton1" 
                src="images/Book.jpg" runat="server" onclick="ImageButton1_Click"  />
        <p> Book Description Goes Here
        <br />
         <asp:Label ID="Label1" runat="server" Text="Label">PKR 770/-</asp:Label>
         <br />
         <asp:TextBox ID="TextBox1" Text="1" runat="server"></asp:TextBox>

         <asp:Button ID="Button1" runat="server" Text="Add" />
        </p>

    </div>
</form> 
```

一般来说，将整个页面封装在一个表单标签中就足够了，这样所有事件都将传递给您的代码隐藏。

# multithreading - Jmeter+Jruby-JSR223示例Request+jmeter属性未分配给超过4个线程

> ID：14890100
> 
> 赞同：4
> 
> 时间：2013-02-15T07:35:20.573
> 
> 标签：multithreading, jmeter, jruby, jsr223

我已经设置了 ant JMeter 任务，它为 JMeter 请求提供了已经为 JMeter 测试计划 (JMX) 分配了 3 个属性的请求，

我在 Jruby 脚本（JSR223 采样器）中读取这些属性，如下所示（对于前 4 个线程，它正确获取所有 3 个属性值并分配给局部变量（pvalue1mpvalue2）..

```
pvalue1=$props.get("prop1")
pvalue2=$props.get("prop2")
pvalue3=$props.get("prop3") 
```

但问题是从线程 5 开始，它开始抛出异常

```
 [jmeter] Jruby Exception is     undefined method `get' for nil:NilClass
 [jmeter] Jruby backtrace is   ["<script>:157:in `(root)'"] 
```

我的jruby中有这样的java_import ...

```
java_import 'java.util.Properties' 
```

# iphone - 我可以在 Xcode 4.6 中禁用约束吗？

> ID：14890104
> 
> 赞同：2
> 
> 时间：2013-02-15T07:35:41.260
> 
> 标签：iphone, button, label, constraints, xcode4.6

如果在 Xcode 4.6 中开始一个新项目，并且在 ViewController 中添加一个按钮时，它总是后面跟着约束。我发现这个项目不能在 iPhone 5 模拟器（iOS5）上运行。在 iPhone 6 模拟器上运行正常。这是导致崩溃的约束。删除按钮，它在 5 和 6 模拟器上运行正常。如果我使用较旧的 Xcode（在约束之前）启动项目并继续使用 Xcode 4.6，约束就消失了。但是有没有办法从 Xcode 4.6 开始禁用约束以使项目也与 iOS5 一起运行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T08:07:03.913

您只需要转到文件检查器选项卡即可找到自动布局，然后取消选中此选项。 ![在此处输入图像描述](../Images/77cf23fe2f167e5fa678bff49e916842.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T07:38:20.040

是的，这就是所谓的[自动布局](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html)，是在 iOS 6.0 中引入的（就像之前版本的 iOS 中不支持的任何功能一样，它会崩溃）。

要在您的 nib 文件上禁用自动布局，请参阅此[博客](http://www.goodbyehelicopter.com/2012/02/arggh-xcode-4-3-auto-layout-is-on-by-default-how-to-turn-off-auto-layout/)文章。

# wpf - WPF：TreeView - 有条件地放置按钮以展开子项

> ID：14890106
> 
> 赞同：1
> 
> 时间：2013-02-15T07:35:48.893
> 
> 标签：wpf, treeview, datatemplate, treeviewitem, hierarchicaldatatemplate

我想构建一个具有以下功能的 TreeView：

1.  第一级的扩展按钮应该不在左侧，而是在右侧
2.  所有子级别都应该在左侧有扩展按钮 - 就像默认的 TreeViewItem
3.  展开/折叠应该像展开器控件一样进行动画处理

我在搞乱 DataTemplate 和 HierarchicalDataTemplate，但 Expander-Button 似乎不是模板的一部分，它总是添加到模板中并且总是在左侧。如何根据项目级别放置 Expander-Button？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:40:20.597

You have to customize the [TreeViewItem ControlTemplate](http://msdn.microsoft.com/en-us/library/ms788727%28v=vs.85%29.aspx), by changing the ToggleButton column. Then you can just change the controltemplate using a DataTrigger inside a style.

```
<Style x:Key="{x:Type TreeViewItem}" TargetType="{x:Type TreeViewItem}">
  <!-- snip -->
  <ControlTemplate TargetType="{x:Type TreeViewItem}">
    <Grid>
      <Grid.ColumnDefinitions>
        <ColumnDefinition MinWidth="19" Width="Auto"/>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
      </Grid.ColumnDefinitions>
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition/>
      </Grid.RowDefinitions>
      <ToggleButton Grid.Column="1" x:Name="Expander"
              Style="{StaticResource ExpandCollapseToggleStyle}"
              IsChecked="{Binding Path=IsExpanded,
                          RelativeSource={RelativeSource TemplatedParent}}"
              ClickMode="Press"/>
      <Border Name="Bd"
          Grid.Column="0"
          Background="{TemplateBinding Background}"
          BorderBrush="{TemplateBinding BorderBrush}"
          BorderThickness="{TemplateBinding BorderThickness}"
          Padding="{TemplateBinding Padding}">
        <ContentPresenter x:Name="PART_Header"
                  ContentSource="Header"
                  HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"/>
      </Border>
      <ItemsPresenter x:Name="ItemsHost"
              Grid.Row="1"
              Grid.Column="1"
              Grid.ColumnSpan="2"/>
    </Grid>
    <ControlTemplate.Triggers>
      <!-- snip -->
    </ControlTemplate.Triggers>
  </ControlTemplate>
</Style> 
```

# python - 在 __init__.py 中递归填充 __all__

> ID：14890107
> 
> 赞同：3
> 
> 时间：2013-02-15T07:35:52.150
> 
> 标签：python, flask

我正在使用以下代码填充`__all__`我的模块`__init__.py`，如果有更有效的方法，我正在徘徊。有任何想法吗？

```
import fnmatch
import os

__all__ = []
for root, dirnames, filenames in os.walk(os.path.dirname(__file__)):
    root = root[os.path.dirname(__file__).__len__():]
    for filename in fnmatch.filter(filenames, "*.py"):
        __all__.append(os.path.join(root, filename[:-3])) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T00:18:37.953

您可能不应该这样做： 的默认行为`import`非常灵活。如果您不希望自动导出模块（或任何其他变量），请给它一个以开头的名称，`_`python 不会导出它。这是标准的 python 方式，重新发明轮子被认为是不符合 python 的。另外，不要忘记除了模块之外的其他东西可能需要导出；设置`__all__`后，您还需要找到并导出它们。

尽管如此，您仍会问如何最好地生成可导出模块的列表。由于您无法导出不存在的内容，因此我只需检查您自己的哪些模块对您的主模块已知：

```
basedir = os.path.dirname(__file__)
for m in sys.modules:
    if m in locals() and not m.startswith('_'): # Only export regular names
        mod = locals()[m]
        if '__file__' in mod.__dict__  and mod.__file__.startswith(basedir):
            print m 
```

`sys.modules`包括 python 已加载的每个模块的名称，包括许多尚未导出到您的主模块的模块 - 所以我们检查它们是否在`locals()`.

这比扫描你的文件系统要快，而且比假设`.py`目录树中的每个文件都以某种方式最终成为顶级子模块更健壮。自然，您应该`__init__.py`在所有内容都已加载后，在接近结尾处运行此代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-07T20:20:44.150

我使用一些具有子包和子模块的复杂包。我喜欢逐个模块地控制它。我使用了一个简单的包`auto-all`，它使它变得容易（完全公开 - 我是作者）。

[https://pypi.org/project/auto-all/](https://pypi.org/project/auto-all/)

这是一个例子：

```
from auto_all import start_all, end_all

# Define some internal stuff

start_all(globals())

# Define some external stuff

end_all(globals()) 
```

我使用这种方法的原因主要是因为进口。正如[alexis](https://stackoverflow.com/users/699305/alexis)所提到的，您可以通过在对象名称前加上下划线来隐式地使事物私有化，但是这对于导入的对象可能会变得混乱或不切实际。考虑以下代码：

```
from pyspark.sql.session import SparkSession 
```

如果这出现在您的模块中，那么您将隐含地使其`SparkSession`可以从模块外部访问。另一种方法是在所有导入的项目前加上下划线，例如：

```
from pyspark.sql.session import SparkSession as _SparkSession 
```

这也不理想，因此手动管理`__all__`是（我知道）管理您在外部可用的内容的唯一方法。

您可以通过显式设置`__all__`变量的内容（这**是**Python 方式）轻松地做到这一点，但是在管理大量对象时这可能会变得乏味，并且如果开发人员添加新对象并且不这样做也会导致问题通过添加到`__all__`变量来公开它。这种类型的事情可能会通过代码审查。使用简单的辅助函数来管理变量内容使这更容易。

# ios - 怀疑使用 Apple Passbook

> ID：14890108
> 
> 赞同：1
> 
> 时间：2013-02-15T07:36:04.383
> 
> 标签：ios, iphone, ios6, passbook

我正在尝试使用 Apple Passbook 开发优惠券。我的场景是我有一个网络服务器，我必须从该服务器将优惠作为优惠券发送到 iPhone。我试图了解他们之间的沟通方式，但不清楚。谁能给我推荐一下

*   如何将优惠从我的网络服务器发送到 iPhone 作为存折？

*   我必须将我的数据存储在我的数据库中还是无论如何我们必须存储在 iPhone 中？

*   如果用户查看了我们发送的优惠券，用户如何使用优惠券？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T08:16:21.090

*   如何将优惠从我的网络服务器发送到 iPhone 作为存折？

过程如下：

1.  创建一个包含您的`webserviceURL`和`authenticationToken`
2.  用户将通行证添加到 Passbook 后，他们的设备将向您的 Web 服务注册并为您提供设备 ID 和设备令牌。
3.  使用新的优惠信息更新您的通票数据库
4.  `passTypeIdentifier`使用pass中的证书 ( ) 向设备令牌（来自步骤 2）发送空推送消息
5.  设备将收到推送并联系您的网络服务以获取更新的连续剧列表
6.  您的 Web 服务返回您希望更新的通行证的序列号
7.  然后设备请求更新的通行证
8.  您的网络服务发送新的通行证

有关 Web 服务规范的详细信息，请参阅[此文档](https://developer.apple.com/library/ios/#documentation/PassKit/Reference/PassKit_WebService/WebService.html#//apple_ref/doc/uid/TP40011988)。另请注意，您的生产 Web 服务必须使用 https。

*   我必须将我的数据存储在我的数据库中还是无论如何我们必须存储在 iPhone 中？

在您的数据库中。iPhone 将仅保存显示通行证所需的信息（在 pass.json 文件中）。您的数据库将需要保存详细信息，例如上次更新时间以及设备 ID 和设备令牌。在 Apple 的[Passbook 支持材料中，作为 ruby​​ 服务器示例的一部分提供了一个示例数据库](https://developer.apple.com/downloads/index.action?name=passbook) *（需要 Apple 开发人员帐户）*

*   如果用户查看了我们发送的优惠券，用户如何使用优惠券？

这完全取决于您 - 存折优惠券与纸质优惠券没有什么不同。由通行证发行者决定他们希望如何使用它。在最简单的情况下，发行人可以扫描代码，然后发送更新数据库的请求（假设“状态 = 已赎回”），然后您的服务器按照上述步骤将新通行证推送到显示用户的设备该通行证已被兑换。

# bash - 使用 diff 时 Bash 脚本无错误退出

> ID：14890110
> 
> 赞同：2
> 
> 时间：2013-02-15T07:36:11.927
> 
> 标签：bash, diff, exit

我对使用 bash 相当陌生，并试图创建一个自动评分器脚本来运行一些测试用例。目前我的 bash 脚本似乎表现得很奇怪；当我设置了 -e 标志时，当 diff 的大小为正时，bash 将退出，而当未设置 -e 标志时，脚本会忽略 diff 文件中的任何差异，并表示所有测试都通过了。

脚本在“write_diff_out=....”命令后立即退出，不打印下一行。我只包含了脚本的差异部分，因为其他一切都运行良好（文件也都存在）。

```
# Validate outputs and print results
echo "> Comparing current build's final memory output with golden memory output...";
for file in `ls test_progs`;
do
    file=$(echo $file | cut -d '.' -f1);
    echo "$file";
    write_diff_out=$(diff ./log/$file.writeback.out ./log/$file.writeback.gold.out > ./diff/$file.writeback.diff);
    echo "Finished write_diff";
    program_diff_out=$(diff -u <(grep -E '@@@' ./log/$file.program.out) <(grep -E '@@@' ./log/$file.program.gold.out) > ./diff/$file.program.diff);
    echo "Finished program diff";

    if [ -z "$write_diff_out" ] && [ -z "$program_diff_out" ]; then
        printf "%20s:\e[0;32mPASSED\e[0m\n" "$file";
    else
        printf "%20s:\e[0;31mFAILED\e[0m\n" "$file";
    fi
done
echo "> Done comparing test outputs."; 
```

随意提出一种更好的格式化 diff 命令的方法，我知道有不同的方法来编写它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:38:11.643

我不完全知道你的问题是什么，但我已经重写了你的脚本以符合一些最佳实践。也许它会更好地工作。

```
#!/bin/bash

# Debugging mode: prints every command as executed, remove when uneeded
set -x

# Validate outputs and print results
echo "> Comparing current build's final memory output with golden memory output..."

cd test_progs

for file in *; do
    file="$(echo "$file" | sed 's/\.[^.]*$//')"
    echo "$file"

    # will PASS when both diffs return non-zero

    if ! diff "log/$file.writeback.out" \
              "log/$file.writeback.gold.out" > \
              "diff/$file.writeback.diff" && \
       ! diff -u <(grep -E @@@ "log/$file.program.out") \
                 <(grep -E @@@ "log/$file.program.gold.out") > \
                 "diff/$file.program.diff"; then
        printf '%20s:\e[0;32mPASSED\e[0m\n' "$file"
    else
        printf '%20s:\e[0;31mFAILED\e[0m\n' "$file"
    fi
done

echo "> Done comparing test outputs." 
```

它避免解析ls，[在到期时使用引号](http://mywiki.wooledge.org/BashGuide/Practices#Quoting)，使用[[[](http://mywiki.wooledge.org/BashGuide/TestsAndConditionals#Conditional_Blocks_.28if.2C_test_and_.5B.5B.29)而不是[（您不需要在[[）中引用变量，并且它测试写入的文件是否为空，而不是在变量中存储一些东西。

如果您真的想将 diff 的输出存储在变量中，您可以这样做：

```
write_diff_out="$(diff "log/$file.writeback.out" "log/$file.writeback.gold.out" | tee "diff/$file.writeback.diff")" 
```

然后`$write_diff_out`将包含`diff/$file.writeback.diff`文件具有的相同数据。

**编辑**：稍微编辑我的答案，以实现评论中的一些内容。

# neural-network - 我们只需要对训练集的输入段进行归一化吗？

> ID：14890111
> 
> 赞同：1
> 
> 时间：2013-02-15T07:36:17.630
> 
> 标签：neural-network, normalization, data-mining, backpropagation

我想知道，无论是否必须将其应用于整个训练集的输入和输出或输入段，都需要数据规范化就足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:58:34.667

是否应该对输出进行归一化取决于您在神经网络中使用的神经元类型以及您期望的输出类型。找出给定类型单元格的可能输出范围，并检查您的目标输出是否在此范围内。如果没有，您将需要标准化。

“标准”神经网络使用 sigmoid 函数，该函数输出 0 到 1 之间的值，因此如果所需的输出不在此范围内，则需要进行归一化。

# javascript - Javascript setTimeout 0 延迟问题

> ID：14890116
> 
> 赞同：1
> 
> 时间：2013-02-15T07:36:30.117
> 
> 标签：javascript, settimeout

我注意到一个奇怪的行为：如果我有一系列任务并希望推迟它们的执行，那么我可以为每个任务使用一个延迟为 0 的 setTimeout。（见[http://javascript.info/tutorial/events-and-timing-depth#the-settimeout-func-0-trick](http://javascript.info/tutorial/events-and-timing-depth#the-settimeout-func-0-trick)）

一切正常：任务排队并尽快执行。

但是......如果各种setTimeout的调用**非常接近**，那么我发现有时（很少发生！）没有以**正确的顺序**执行。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T08:02:41.983

没有人承诺他们会以“正确”的顺序被解雇（具有相同超时的任务将按照它们设置的超时顺序执行）。`setTimeout`仅保证：

*   每个超时只执行一次（除非页面在此期间死掉）
*   每个超时都不会早于它应该执行的时间执行。

没有关于执行顺序的消息。事实上，即使实现者*试图*保持顺序（即使作为副作用），也很可能没有足够的时间分辨率来为所有任务提供唯一的排序顺序，以及二进制堆（这里很可能会用到）不保留相等键的插入顺序）。

如果你想保留你的延迟任务的顺序，你应该只在前一个任务完成时才将一个入队。

这应该有效：

```
var defer = (function(){
  //wrapped in IIFE to provide a scope for deferreds and wrap
  var running = false;
  var deferreds = [];
  function wrap(func){
    return function(){
      func();
      var next = deferreds.shift();
      if(next){
        setTimeout(wrap(next),0);
      }else{
        running = false;
      }
    }
  }
  return function(func){
    if(running){
      deferreds.push(func);
    }else{
      setTimeout(wrap(func),0);
      running = true;
    }
  }
})() 
```

演示：http: [//jsfiddle.net/x2QuB/1/](http://jsfiddle.net/x2QuB/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T08:28:39.267

您可以考虑使用 jquery deferreds（或一些其他的 deferreds 实现），它可以非常优雅地处理这种模式。

需要注意的重要一点是，延迟完成的回调按照它们添加的顺序执行。

```
 var createCountFn  = function(val){  
    return function(){ 
        alert(val)
    };
}

 // tasks 
var f1 = createCountFn(1),
    f2 = createCountFn('2nd'),
    f3 = createCountFn(3);

 var dfd = $.Deferred();
 dfd.done(f1).done(f2).done(f3);

 dfd.resolve(); 
```

[演示](http://jsfiddle.net/Gtk6f/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:03:39.973

HTML5 草案规范声明 setTimeout 方法可以异步运行（这意味着可能不会保留回调的执行顺序），这可能是您的浏览器正在执行的操作。

> ### [setTimeout() 方法必须运行以下步骤：](http://www.w3.org/TR/html5/webappapis.html#dom-windowtimers-settimeout)
> 
> > **...**
> > 
> > 6\. 返回句柄，然后继续异步运行该算法。
> > 
> > 7\. 如果方法上下文是一个 Window 对象，则等到与方法上下文相关联的 Document 完全处于活动状态，再等待*超时*毫秒（不一定是连续的）。

在任何情况下，都可以通过执行类似的操作来解决此问题：

```
function inOrderTimeout(/* func1[, func2, func3, ...funcN], timeout */)
{   var timer; // for timeout later
    var args = arguments; // allow parent function arguments to be accessed by nested functions
    var numToRun = args.length - 1; // number of functions passed
    if (numToRun < 1) return; // damm, nothing to run
    var currentFunc = 0; // index counter
    var timeout = args[numToRun]; // timeout should be straight after the last function argument
    (function caller(func, timeout) // name so that recursion is possible
    {   if (currentFunc > numToRun - 1)
        {   // last one, let's finish off
            clearTimeout(timer);
            return;
        }
        timer = setTimeout(function () 
        {   func(); // calls the current function
            ++currentFunc; // sets the next function to be called
            caller(args[currentFunc], timeout);
        }, Math.floor(timeout));
    }(args[currentFunc], timeout)); // pass in the timeout and the first function to run
} 
```

# iphone - 当我在地图中放置多个图钉时，取决于不同的纬度和经度值。我只在一个地方获得所有别针

> ID：14890117
> 
> 赞同：1
> 
> 时间：2013-02-15T07:36:31.947
> 
> 标签：iphone, ios, ipad, map, pins

当我在地图中放置多个图钉时，取决于不同的纬度和经度值。我得到所有的别针都在地图上的一个地方。

我为删除多个引脚编写了这段代码。

```
 dealerMapView.mapType = MKMapTypeStandard;
    dealerMapView.zoomEnabled =YES;
    [dealerMapView setDelegate:nil];
    dealerMapView.scrollEnabled = YES;
    dealerMapView.showsUserLocation = NO;
    CLLocationCoordinate2D location;

        for (int i =0; i<[delarsInfoArray count]; i++) {

            NSString *lattitudeValue = [[delarsInfoArray objectAtIndex:i]objectForKey:@"LATITUDE" ];

            NSString *longitudeValue = [[delarsInfoArray objectAtIndex:i]objectForKey:@"LONGITUDE" ];
            CLLocationCoordinate2D pCoordinate ;
    pCoordinate.latitude = [lattitudeValue floatValue];
    pCoordinate.longitude = [longitudeValue floatValue];
    MKCoordinateRegion region;
    MKCoordinateSpan span;
    span.latitudeDelta = 0.005;
    span.longitudeDelta = 0.005;
    region.span = span;
    region.center = location;
    [dealerMapView setRegion:region animated:YES];
    myAnnotation1 = [[MyAnnotation alloc] init];
    myAnnotation1.coordinate = location;
    myAnnotation1.title = [[delarsInfoArray objectAtIndex:i]objectForKey:@"STORE"]; 
    [dealerMapView addAnnotation:myAnnotation1];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:52:30.003

**试试这个代码：**

```
MKCoordinateSpan span;
span.latitudeDelta = 0.2;
span.longitudeDelta= 0.2;

if( [delarsInfoArray count] > 0 ){

    CLLocationCoordinate2D start;
    NSString *lattitudeValue = [[delarsInfoArray objectAtIndex:0]objectForKey:@"LATITUDE" ];

    NSString *longitudeValue = [[delarsInfoArray objectAtIndex:j]objectForKey:@"LONGITUDE" ];

// create region, consisting of span and location
    MKCoordinateRegion mapRegion;
    mapRegion.span = span;
    mapRegion.center = start;
//Move the map to our location //
    [dealerMapView setRegion:mapRegion animated:YES];
}
// do not show pins and annotations more then 200 in the map at a time.
for (int j = 0; j< ([delarsInfoArray count] < 200?[delarsInfoArray count]:200); j++) {
    NSString *lattitudeValue = [[delarsInfoArray objectAtIndex:i]objectForKey:@"LATITUDE"];
            NSString *longitudeValue = [[delarsInfoArray objectAtIndex:i]objectForKey:@"LONGITUDE" ];

    CLLocationCoordinate2D pinLocation;
    if(([lattitudeValue floatValue] != 0) && ([longitudeValue floatValue] != 0) ) {
        pinLocation.latitude = [lattitudeValue floatValue];
        pinLocation.longitude = [longitudeValue floatValue];
        if(pinLocation.latitude !=0 && pinLocation.longitude !=0) {
            myAnnotation1 = [[MyAnnotation alloc] init];
            myAnnotation1.coordinate = location;
            myAnnotation1.title = [[delarsInfoArray objectAtIndex:i] objectForKey: @"STORE"]; 
            [dealerMapView addAnnotation:myAnnotation1];
        }
    }
} 
```

希望对你有帮助！！好运。干杯！！

# javascript - 无法使用代码隐藏将脚本插入到 asp 页面中

> ID：14890121
> 
> 赞同：2
> 
> 时间：2013-02-15T07:37:09.490
> 
> 标签：javascript, asp.net, code-behind

我在我的 asp.net/c# 页面中有一个简单的`gridview`控件我想显示一条消息，在删除我的行时显示“删除成功”我尝试使用它但它没有效果。
我的代码是这个..

```
script = string.Format(@"<script type='text/javascript'>alert('Successfully deleted');</script>");
if (Page != null && !Page.ClientScript.IsClientScriptBlockRegistered("alert"))
{
     Page.ClientScript.RegisterClientScriptBlock(Page.GetType(), "alert", script);
} 
```

谁能帮帮我，我是新手..

Thaks
-Vishu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:46:21.000

请试试这个：

```
ScriptManager.RegisterStartupScript(this.Page , typeof(Page) , Guid.NewGuid().ToString() , "alert('Successfully deleted');" , true); 
```

希望它可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:18:12.497

尝试这个...

**代码**：

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "Call my function", "popup();", true); 
```

其中**popup()**是一个 javascript 函数。

**脚本**：

```
function popup() {
    $("#popupdiv").fadeIn('slow');
 } 
```

**popupdiv**是您可以根据您的要求设计的 div 的 ID

# shoulda - 带有 minitest 的 minitest-rails-should 给了我未定义的方法 `run_teardown_hooks'

> ID：14890125
> 
> 赞同：2
> 
> 时间：2013-02-15T07:37:26.527
> 
> 标签：shoulda, minitest

请帮忙：

我想用 minitest 用户应该。

这是我得到的例外：

```
NoMethodError: undefined method `run_teardown_hooks' for #<#<Class:0x007fd42ed95490>:0x007fd42ed00c78>
/Users/boti/.rvm/gems/ruby-1.9.2-p180@search_server/gems/mocha-0.10.5/lib/mocha/integration/mini_test/version_230_to_262.rb:39:in `run'
/Users/boti/.rvm/gems/ruby-1.9.2-p180@search_server/gems/activesupport-3.2.11/lib/active_support/testing/setup_and_teardown.rb:36:in `block in run'
/Users/boti/.rvm/gems/ruby-1.9.2-p180@search_server/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:425:in `_run__1339649173504478165__setup__555511959301366683__callbacks'
/Users/boti/.rvm/gems/ruby-1.9.2-p180@search_server/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/boti/.rvm/gems/ruby-1.9.2-p180@search_server/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_setup_callbacks'
/Users/boti/.rvm/gems/ruby-1.9.2-p180@search_server/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/boti/.rvm/gems/ruby-1.9.2-p180@search_server/gems/activesupport-3.2.11/lib/active_support/testing/setup_and_teardown.rb:35:in `run' 
```

这是我的gemfile：

```
gem 'minitest'
gem 'minitest-should_syntax'
gem 'miniskirt'
gem 'rack-livereload'
gem 'guard'
gem 'guard-minitest'
gem 'guard-bundler'
gem 'guard-livereload'

gem 'annotate', ">=2.5.0"
gem 'guard-annotate'
gem "rb-fsevent"
gem 'database_cleaner'
gem "minitest-rails-shoulda"

gem 'sqlite3', :require => 'sqlite3' 
```

这是我的 test_helper：

```
ENV["RAILS_ENV"] = "test"
require File.expand_path('../../config/environment', __FILE__)
require 'rails/test_help'
require 'minitest/autorun'
require 'minitest/should_syntax'
require 'factories/factories'

class ActionController::TestCase
  include Devise::TestHelpers
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T06:10:17.333

在您的`Gemfile`, 指定`gem 'shoulda-matchers', '1.4.1'`然后运行`bundle update shoulda-matchers`

### 解释

shoulda-matchers 1.4.2 引入了对 bourne 的依赖，它依赖于被 minitest 破坏的 mocha 版本，因为`run_setup_hooks`并且`run_teardown_hooks`已经从 minitest 中删除。

这是一个关于 shoulda-matchers 的错误报告，解释了发生了什么：[https ://github.com/thoughtbot/should-matchers/issues/235](https://github.com/thoughtbot/shoulda-matchers/issues/235)

如果您受到此问题的影响，请花点时间 +1 错误报告，让它得到一点爱。

# jdbc - 表用户上的 JDBC getObject 返回错误：“禁止访问类（类）”

> ID：14890127
> 
> 赞同：2
> 
> 时间：2013-02-15T07:38:00.863
> 
> 标签：jdbc, google-apps-script, google-cloud-sql

尝试在我的“mysql”数据库的“user”表中获取所有用户列时，我有一个奇怪的响应。

我正在使用 Google Cloud SQL，通过 JDBC 类从 Google Apps Script 访问它。这是我的代码：

```
function displayingOneUser(){

  var connection = Jdbc.getCloudSqlConnection("jdbc:google:rdbms://blablabla/mysql", "root", rootPwd);

  var mySqlStatement = connection.createStatement();

  var resultSet = mySqlStatement.executeQuery("select * from user");

  if(resultSet.next()){
    var str="";
    for(var i=1; i<43; i++){
      str=str.concat(resultSet.getObject(i)+" | ");
      Logger.log("str so far : "+str);
    }
    Logger.log("Displaying first user : "+str+".");
  }

  mySqlStatement.close();
  connection.close();

} 
```

我收到以下错误：“禁止访问类“（类）”。”，当它到达第 33 或 34 列时（我不记得是哪一个）。如果我使用 getString()，那么它可以正常工作。

知道这可能来自哪里吗？

干杯，

胜利者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:22:34.323

我能够重现这个问题，我相信这确实是一个错误。这与默认数据库中表中的`blob`列有关`user``mysql`

![在此处输入图像描述](../Images/02f5b6c9da62bcb7f6c05e0117d49eb1.png)

尝试阅读任何带有`getObject()`中断的列。`getString()`作品。

很好的发现，请在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)中记录一个错误，以便我们深入研究。

它的第 34 列，`ssl_cipher`即第一个`blob`中断的列。其他人也打破了。最简单的复制案例 -

```
function displayingOneUser(){
  var conn = Jdbc.getCloudSqlConnection("jdbc:google:rdbms://INSTANCE_NAME/mysql");
  var sql = conn.createStatement();
  var resultSet = sql.executeQuery("select ssl_cipher from user");
  if(resultSet.next()){
    resultSet.getObject(1);//this line will break
  }
  sql.close();
  conn.close();
} 
```

# drupal - 如何使用 Drush 删除所有被阻止的用户？

> ID：14890128
> 
> 赞同：2
> 
> 时间：2013-02-15T07:38:03.970
> 
> 标签：drupal, drush

如何使用 Drush 删除所有被阻止的用户？我有数百个被垃圾邮件发送者阻止的用户。我想删除所有这些用户。我尝试通过 Web 界面进行操作，但这一次仅适用于大约 20 个用户。我有 60 页要删除，这需要太长时间且不可持续。另外，我希望在删除被阻止的用户时运行所有相关的回调，并且我希望删除其所有内容。我注意到了`user-cancel`，但这似乎只适用于单个用户。有没有办法让这个命令适用于所有被阻止的用户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-10T02:23:24.400

使用 Drupal 7 和 Drush 5.9，我的做法是：

[1- 为您的本地 Drupal 安装创建一个别名“@example-local”，如此处](https://drupal.org/node/1401522)所示。

2-使用以下代码创建一个名为“delete-blocked-users.script”的脚本文件，例如“/Users/username/scripts/drush”：

```
#!/usr/bin/env drush

$users = db_query("SELECT * FROM {users} WHERE (status = 0)");
foreach ($users as $user) {
  exec("drush @example-local user-cancel $user->name -y");
} 
```

3-使脚本文件可执行：

```
chmod +x ~/scripts/drush/delete-blocked-users.script 
```

4-最后，使用以下命令运行脚本：

```
drush @example-local scr ~/scripts/drush/delete-blocked-users.script 
```

这将删除所有被阻止的用户（状态 = 0 的用户），而不要求确认（由 -y 标志定义）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T16:22:09.660

Drush 没有删除所有被阻止帐户的简单命令。在您的管理界面中设置一个[vbo](http://drupal.org/project/views_bulk_operations)视图可能会更容易，让您可以过滤被阻止的用户，然后您可以选择全部并取消。

您还可以使用`drush php-script script.php`.

因此，您可以设置一个 php 脚本来查询被阻止的用户，然后遍历用户并调用用户取消功能。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-06-06T13:16:21.360

除了 drush，使用用户、密码和数据库名称更容易访问 mysql 数据，您可以在文件 drupalhomedir/sites/default/setting.php 中使用以下命令找到：

```
mysql -u username-at-setting -ppassword-at-setting database-at-setting 
```

然后删除drupal“用户”表上的所有记录：

```
DELETE FROM user WHERE status=0; 
```

# java - 杰克逊反序列化json到java对象

> ID：14890129
> 
> 赞同：29
> 
> 时间：2013-02-15T07:38:09.507
> 
> 标签：java, json, object, jackson, deserialization

这是我用于反序列化的 Java 代码，我正在尝试将 json 字符串转换为 java 对象。为此，我使用了以下代码：

```
package ex1jackson;
import com.fasterxml.jackson.core.JsonGenerationException;
import com.fasterxml.jackson.databind.JsonMappingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import java.io.IOException;
public class Ex1jackson {
public static void main(String[] args) {
   ObjectMapper mapper = new ObjectMapper();
try {
        String userDataJSON = "[{\"id\":\"value11\",\"name\": \"value12\",\"qty\":\"value13\"},"
                              + "{\"id\": \"value21\",\"name\":\"value22\",\"qty\": \"value23\"}]";
        product userFromJSON = mapper.readValue(userDataJSON, product.class);
        System.out.println(userFromJSON);
    } catch (JsonGenerationException e) {
        System.out.println(e);
        } catch (JsonMappingException e) {
       System.out.println(e);
    } catch (IOException e) {
    System.out.println(e);
    } 
}
} 
```

和我的 product.java 类

```
package ex1jackson;
public class product 
{
private String id;
private String name; 
private String qty; 

@Override
public String toString() {
    return "Product [id=" + id+ ", name= " + name+",qty="+qty+"]";
}
} 
```

我收到以下错误。

```
com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: 
Unrecognized field "id" (class ex1jackson.product), not marked as ignorable (0 known properties: ]) at 
[Source: java.io.StringReader@16f76a8; line: 1, column: 8] (through reference chain: ex1jackson.product["id"]) 
BUILD SUCCESSFUL (total time: 0 seconds) 
```

帮我解决这个问题，

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-15T08:33:23.643

看起来您正试图从 JSON 中读取一个实际描述数组的对象。Java 对象映射到带有花括号的 JSON 对象，`{}`但您的 JSON 实际上以方括号开头，`[]`表示数组。

您实际拥有的是 a`List<product>`来描述泛型类型，由于 Java 的类型擦除，您必须使用`TypeReference`. 您的反序列化可以阅读：`myProduct = objectMapper.readValue(productJson, new TypeReference<List<product>>() {});`

其他一些注意事项：您的类应该始终是 PascalCased。您的主要方法可以为`public static void main(String[] args) throws Exception`您节省所有无用的`catch`块。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-15T09:07:22.420

你必须换行

```
product userFromJSON = mapper.readValue(userDataJSON, product.class); 
```

到

```
product[] userFromJSON = mapper.readValue(userDataJSON, product[].class); 
```

因为你正在反序列化一个数组（顺便说一句：你应该用前面提到的大写字母开始你的类名）。此外，您必须为您的字段创建 setter 方法或将它们标记为公开才能使其工作。

编辑：您也可以接受 Steven Schlansker 的建议并使用

```
List<product> userFromJSON =
        mapper.readValue(userDataJSON, new TypeReference<List<product>>() {}); 
```

相反，如果您想避免使用数组。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-15T09:45:10.147

```
 JsonNode node = mapper.readValue("[{\"id\":\"value11\",\"name\": \"value12\",\"qty\":\"value13\"},"

 System.out.println("id : "+node.findValues("id").get(0).asText()); 
```

这也成功了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T07:41:36.110

你的`product`类需要一个无参数的构造函数。您可以将其设为私有，但杰克逊需要构造函数。

作为旁注：您应该为您的类名使用 Pascal 大小写。那是`Product`，而不是`product`。

# c++ - 从对向量中获取值时出错

> ID：14890130
> 
> 赞同：5
> 
> 时间：2013-02-15T07:38:11.020
> 
> 标签：c++, vector, iterator

为什么在对向量的迭代器中访问对的值时会出现以下错误？

```
vector< pair<int,string> > mapper;
if(Hash(input, chordSize) != id){
    mapper.push_back(make_pair(tmp, input));
}

for (vector< pair<int,string> >::iterator it = mapper.begin(); it != mapper.end(); ++it)
{
    cout << "1st: " << *it.first << " "           // <-- error!
         << "2nd: " << *it.second << endl;        // <-- error!
} 
```

错误信息：

> main_v10.cpp:165:25：错误：“std::vector > >::iterator”没有名为“first”的成员 main_v10.cpp:165:56：错误：“std::vector > >::iterator”有没有名为“第二”的成员</p>

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T07:41:15.393

This is an issue which applies for pointers, too (an iterator behaves pretty much like a pointer). There are two ways to access a member of the value the pointer (or iterator) points to:

```
it->first     // preferred syntax: access member of the pointed-to object 
```

or

```
(*it).first   // verbose syntax: dereference the pointer, access member on it 
```

The operator precedence turns your expression into

```
*(it.first)   // wrong! tries to access a member of the pointer (iterator) itself 
```

which tries to access the member `first` on the iterator itself, which fail, because the it doesn't have a member called `first`. If it did, you'd then dereference the value of that member.

* * *

However, in most such cases you should use `std::map` to map from key to values. Instead of `vector<pair<int,string> >`, you should use `map<int,string>` which behaves similar (insertion, iteration and stuff also happens with pairs), but it sorts the keys in the data structure for faster random access:

```
map<int,string> mapper;
if(Hash(input, chordSize) != id){
    mapper.push_back(make_pair(tmp, input));
}

for (map<int,string>::iterator it = mapper.begin(); it != mapper.end(); ++it)
{
    cout << "1st: " << it->first << " "
         << "2nd: " << it->second << endl;
} 
```

Note that an essential difference between a map and a vector of pairs is that a map rearranges the elements by sorting them by their key. The order of insertion can't be queried afterwards. There are cases in which you don't want to do that (when insertion order matters), so in such cases either your solution or a vector with custom types containing at least the key and value are the correct solution.

# c# - “j8”的类型初始化程序抛出异常 Visual Studio 2012

> ID：14890137
> 
> 赞同：4
> 
> 时间：2013-02-15T07:38:30.093
> 
> 标签：c#, windows-8, visual-studio-2012, microsoft-metro

当我在 VS 2012 中运行的工具中选择 PreEmptive Dotfuscator and Analytics 时，我遇到了以下问题，这是一个弹出的异常。

我该如何解决？

![在此处输入图像描述](../Images/d4cd20e5cf0ec943803bc19666125480.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T21:59:47.130

来自：[http ://www.preemptive.com/forum/topic?f=18&t=23523](http://www.preemptive.com/forum/topic?f=18&t=23523)

> 如果您遇到此错误消息，请尝试添加“HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows Kits\Installed Roots\KitsRoot”注册表项，并将其值与“HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Kits\已安装的 Roots\KitsRoot"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T18:28:47.163

感谢史蒂夫[http://exe-steve.blogspot.in/2013/06/visual-studion-dotfuscator-community.html](http://exe-steve.blogspot.in/2013/06/visual-studion-dotfuscator-community.html)

如果您遇到此错误消息，请尝试添加

`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows Kits\Installed Roots\KitsRoot`

注册表项并为其赋予相同的值

`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Kits\Installed Roots\KitsRoot`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-10T09:25:49.230

问题是钥匙是`missing in both registry location`..

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows Kits\Installed Roots

HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Kits\Installed Roots 
```

我在另一台机器上找到了这些键.. 并在我的计算机中为这些值创建了两个`.reg`文件`import``registry`

> 第一个.reg

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows Kits\Installed Roots]
"KitsRoot"="C:\\Program Files\\Windows Kits\\8.0\\"
"WindowsDebuggersRoot"="C:\\Program Files\\Windows Kits\\8.0\\Debuggers\\"
"AppVerifier64BitAutomationRoot"="C:\\Program Files\\Application Verifier\\"
"AppVerifier32BitAutomationRoot"="C:\\Program Files\\Application Verifier\\" 
```

> 第二个.reg

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Kits\Installed Roots]
"KitsRoot"="C:\\Program Files\\Windows Kits\\8.0\\"
"WindowsDebuggersRoot"="C:\\Program Files\\Windows Kits\\8.0\\Debuggers\\"
"AppVerifier64BitAutomationRoot"="C:\\Program Files\\Application Verifier\\"
"AppVerifier32BitAutomationRoot"="C:\\Program Files\\Application Verifier\\" 
```

一旦两个文件都创建了`double click on those .reg`文件以在这些位置添加密钥..`Great!!`现在它对我有用！

# javascript - 嵌套函数 Javascript

> ID：14890138
> 
> 赞同：9
> 
> 时间：2013-02-15T07:38:30.180
> 
> 标签：javascript, ecmascript-5

在 Javascript 函数中，您是否需要将嵌套函数定义为函数表达式，或者函数体中是否允许函数声明？例如，这样的事情是否合规？

```
function a() {
    function b() {
        function c() {
            window.alert(3);
        }
        window.alert(2);
    }
    window.alert(1);
} 
```

或者你必须做这样的事情吗？

```
function a() {
    var a = function () {
        var c = function () {
            window.alert(3);
        }
        window.alert(2);
    }
    window.alert(1);
} 
```

ECMA-262 说：

> 众所周知，ECMAScript 的几个广泛使用的实现支持将 FunctionDeclaration 用作语句。然而，在应用于此类 FunctionDeclarations 的语义中，实现之间存在显着且不可调和的变化。由于这些不可调和的差异，将 FunctionDeclaration 用作 Statement 会导致代码在实现之间不能可靠地移植。建议 ECMAScript 实现要么禁止 FunctionDeclaration 的这种用法，要么在遇到这种用法时发出警告。ECMAScript 的未来版本可能会定义替代的可移植方式，用于在 Statement 上下文中声明函数。

这是否意味着函数体中的函数声明在技术上是不正确的，或者我完全错了？我听说人们将身体称为块，根据标准，它是一个或多个陈述，但我不确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T13:25:14.100

FunctionDeclaration 在函数体中当然是允许的，并且没有我知道的错误。

看看[ES5 生产规则就很清楚了](http://es5.github.com/#A.5)

```
FunctionBody
  SourceElements (opt)

SourceElements
  SourceElement
  SourceElements SourceElement

SourceElement
  Statement
  FunctionDeclaration 
```

也就是说，函数体包括源元素，源元素要么是Statement，要么是FunctionDeclaration。因此 FunctionDeclaration 可以是函数体的一部分。

您提到的关于“...... ECMAScript 的实现......已知支持将 FunctionDeclaration 用作语句”的子句是指将 FunctionDeclaration 用作语句，但不直接在函数体中使用。它指的是以下情况：

```
if (...) {
  function f () {}
} 
```

那是一种非标准化的行为。查看更多关于这些[函数语句](http://kangax.github.com/nfe/#function-statements)的信息。

# objective-c - 将 Json 数组分配到 NSArray (JSONKit)

> ID：14890139
> 
> 赞同：2
> 
> 时间：2013-02-15T07:38:35.427
> 
> 标签：objective-c, xcode

如何将该json响应分配到一个`NSArray`？

JSON：

```
[{"city":"Entry 1"},{"city":"Entry 2"},{"city":"Entry 3"}] 
```

代码：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSArray *jsonData = [responseData objectFromJSONData];

    for (NSDictionary *dict in jsonData) {
        cellsCity = [[NSArray alloc] initWithObjects:[dict objectForKey:@"city"], nil];
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:46:39.570

您可以通过 Apple 内置的序列化程序将 JSON 转换为对象：

```
NSError *error = nil;
NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData:aData options:NSJSONWritingPrettyPrinted error:&error];
if(error){
    NSLog(@"Error parsing json");
    return;
} else {...} 
```

所以没有必要使用外部框架恕我直言（除非你需要性能，而且 JSONKit 就像他们说的那样，真的比 NSJSONSerialization 快 25-40%。

**编辑**

通过您的评论，我想这就是您想要的

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    //First get the array of dictionaries
    NSArray *jsonData = [responseData objectFromJSONData];
    NSMutableArray *cellsCity = [NSMutableArray array];
    //then iterate through each dictionary to extract key-value pairs 
    for (NSDictionary *dict in jsonData) {
        [cellsCity addObject:[dict objectForKey:@"city"]];
    } 
```

}

# android - 要通过 libstagefright 在 android 中使用硬件解码器，在元数据中为 kKeyAVCC 设置什么以进行帧基解码而不是 MP4 播放？

> ID：14890140
> 
> 赞同：5
> 
> 时间：2013-02-15T07:38:36.703
> 
> 标签：android, android-ndk, h.264, stagefright

我一直在尝试使用 libstagefright 来解码 h264 压缩帧。我没有 MP4 文件，而是想逐帧解码。我一直在从[链接中探索样本](http://vec.io/tags/ndk). 此示例使用 ffmpeg 解析 mp4 文件。并使用 ffmpeg 的 avcodeccontext 设置并找到所需的元数据。现在我想设置 kKeyAVCC、kKeyWidth、kKeyHeight、kKeyIsSyncFrame 和 kKeyTime。我不清楚这些参数中的每一个。那么，我只想知道是否需要设置所有这些参数？这些参数的目的是什么，以及为逐帧解码的元数据设置什么。当我没有设置 kKeyTime 时，omxcodec 在读取媒体缓冲区时崩溃。如果我在读取操作上获得成功，我不会得到我在 MediaBuffer 的派生读取方法中设置的元数据值。我得到帧的视频尺寸和 INFO_FORMAT_CHANGED 的错误代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T02:52:09.033

创建新编解码器时，元数据作为`OMXCodec::Create`方法的一部分从解析器传递到解码器。我假设在您的实现中，您会注意以普通香草实现`MetaData`中指定的格式传递元数据。`android`

例如，请参考`AwesomePlayer::initVideoDecoder`在哪个`mVideoTrack->getFormat()`中调用来获取视频轨道的元数据。请注意，这不是 a 的一部分`MediaBuffer`，而是作为单独的对象传递。

一旦创建了解码器，`configureCodec`就会调用 。在这个方法中，`OMXCodec`读取不同的配置参数来初始化解码器。

`kKeyAVCC`对应于`Codec Specific Data`or`csd`本质上是底层流的`SPS`and 。`PPS``H.264`

`kKeyWidth``kKeyHeight`对应于视频帧`width`的和`height`。为了初始化解码器，您可以设置更多的附加参数。例如，如果您为`colorFormat`解码器的输出设置特定的，您可以通过`kKeyColorFormat`.

创建解码器后，您必须通过标准`openmax`接口传递各个帧。解码器从调用`OMXCodec::read`方法开始，该方法将填充输入和输出缓冲区。

输入缓冲区通过从解析器模块（在您的情况下是您的特定模块）`OMXCodec::drainInputBuffer`读取 a 的方法填充。`MediaBuffer`的内容`MediaBuffer`被复制到组件上填充的缓冲区`input port`中`OMX`。与此数据一起，`timestamp`此缓冲区的 也被传递。时间戳信息是`kKeyTime`通过随`MediaBuffer`.

因此，对于在 a 中传递的每一帧`MediaBuffer`，您需要确保一个有效`timestamp`的也传递给底层解码器，该解码器反映在解码器的输出端口上。

在您的问题中，您曾询问过`kKeyIsSyncFrame`. 该标志由`Encoder`作为`FillBufferDone`回调的一部分设置，即当编码器对关键帧进行编码时`IDR frame`，然后它通过此特定标志传达此信息，作为编码器输出端口上的回调的一部分。 *对于解码，这无关紧要*。

如果您可以在启用日志的情况下发布更多日志`OMXCodec`，则提供更准确的答案可能会更容易。

PS 在 android 框架中，有一个名为的命令行实用程序`Stagefright`，它创建解析器和解码器并执行命令行解码而无需任何渲染。这可能是您插入自己的解析器的一个很好的参考。

# rest - Restlet API example

> ID：14890143
> 
> 赞同：0
> 
> 时间：2013-02-15T07:38:46.327
> 
> 标签：rest, restlet

Is there any simple example of Restlet API with Java?

I want a simple example of Restlet API by calling Get / POST method. One client should call one method from the server through Restlet. The server should execute that method and send the reply accordingly. How can the server open those methods to respond to the client using Restlet?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:04:03.233

这里是简单的代码，当它与 url 匹配时调用 amazon.java 休息类作为 [http://anydomain.com/amazone](http://anydomain.com/amazone)如果你在 url 中点击它而不是它调用的 get 方法

```
public class RestApi extends Application {

/**
 * Creates a root Restlet that will receive all incoming calls.
 */
@Override
public Restlet createInboundRoot() {
    Router router = new Router(getContext());

    // Defines only one route
    router.attach("/amazon", Amazon.class);
    return router;
}
} 
```

亚马逊.java

```
public class Amazon extends ServerResource {

@Override
protected Representation post(Representation entity)
        throws ResourceException {
    System.out.println("post Method");
    return super.post(entity);

}

@Override
protected Representation get() throws ResourceException {
    System.out.println("get method");
    return super.get();
}

} 
```

并将 web.xml 文件中的映射为

```
 <servlet>
<servlet-name>RestletServlet</servlet-name>
<servlet-class>org.restlet.ext.servlet.ServerServlet</servlet-class>
<init-param>
    <param-name>org.restlet.application</param-name>
    <param-value>com.wa.gwtamazon.server.RestApi </param-value>
</init-param> 
```

```
<!-- Catch all requests -->
<servlet-mapping>
    <servlet-name>RestletServlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:20:50.790

您可能需要考虑查看[http://www.restlet.org/documentation/](http://www.restlet.org/documentation/)项目提供的文档提供了很好的示例来开始使用代码。

2.1 版目前是稳定的分支，可用于您的 ServerResource 的 @Get、@Post 等注释提供了比 Divyesh 概述的稍微灵活的方法，尽管我相信该方法仍然可用。

# asp.net - The type 'xxxx' already contains a definion for 'xxx'

> ID：14890145
> 
> 赞同：0
> 
> 时间：2013-02-15T07:39:03.507
> 
> 标签：asp.net

I am working in Asp.net 2010 C# Inside my web page,

```
public partial class NewStore : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
    }

    public class Item()
    {
       public int ItemID;
       public string ItemName;
    }
} 
```

The Problem is that When I rebuild the Project then an error occurs 'The type 'NewStore' already contains a definion for 'Item'.

I didnt find any other class Item inside the Page... Will u please help me..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:40:07.217

Remove `parenthesis` after class name `Item`.

```
public class Item
{
   public int ItemID;
   public string ItemName;
} 
```

# sql-server - How can I put a trigger on a system table to gather historical data?

> ID：14890146
> 
> 赞同：0
> 
> 时间：2013-02-15T07:39:04.247
> 
> 标签：sql-server, tsql, sql-server-2000, log-shipping, triggers

I'm able to implement trigger on user define table but not on system table (`log_shipping_primaries` and `log_shipping_secondaries`), it store info about when the backup `.bak` file was generated and when the transaction log ship file `.trn` file was copied and restored at secondary database

Objective : to implement RPO (recovery point objective) > 15 min at secondary database (DR site)

I was given a task to monitor `log_shipping activities` and provide historical data to higher management. Now the problem is these 2 tables is that it updates the old entry (for a given database) every time whenever a new entry is added.

Solution (does not work in SQL Server 2000): whenever a new entry is inserted, insert the similar data in user define table via trigger so as to keep historical data.

1.  how to implement trigger on system table (what permission do I need) or is it possible at all (please be precidse)?
2.  alternative to trigger like stored procedure or something(I've no experience in stored procedure)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:54:45.820

如果您使用 SQL 作业进行备份和事务日志传送，在这种情况下，您可以在此之前添加一个步骤以将该数据导入历史表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:03:23.500

不可能在系统表上创建触发器。

我会考虑向[SQL Server 代理](http://www.quackit.com/sql_server/tutorial/sql_server_agent.cfm)添加一个以适当频率运行的作业（例如，每 30 秒）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:01:49.283

为什么不在每次备份之前创建一个作业来保存表中的数据？至于如何做到这一点，这真的是你的选择。编写存储过程，将插入语句直接写入 SQL 代理作业，坐在您的计算机旁，每 15 分钟按一次 F5 ... :-) 很多选项。

# silverlight - silverlight combobox template binding

> ID：14890147
> 
> 赞同：0
> 
> 时间：2013-02-15T07:39:05.383
> 
> 标签：silverlight, combobox

I am trying to bind a combobox from a static resource(added on code behind) and add an image beside each item. The best solution I have so far is the following:

```
 <ComboBox x:Name="cmbGroup"
          Width="150" Height="32" ItemsSource="{StaticResource Groups}" >

                <ComboBox.ItemTemplate>

                    <DataTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Image Source="Question.jpg" Height="30" MouseEnter="Image_MouseEnter" ></Image>
                            <ComboBoxItem Content="{Binding Source={StaticResource Groups}}" Grid.Column="1"/>

                        </Grid>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox> 
```

This is not working, although I can see the image on each item, but instead a text, I got a "Systems.Collection.GenericList". Any ideas how to solve this? Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:53:26.417

我猜你的“组”是一个列表？

因此，您将模板配置为显示图像，默认情况下您的对象组。因此，它显示您的组对象：即您的组的 toString()，对于列表是“Systems.Collection.GenericList”。

我的猜测是你绑定了坏东西？您想绑定列表中的一个项目，该项目应该有一个更合适的 toString() 版本。

假设您的组列表中有一些用户项目。因此，您的绑定应如下所示：

```
 <ComboBox x:Name="cmbGroup"
          Width="150" Height="32" ItemsSource="{StaticResource Groups}" >

                <ComboBox.ItemTemplate>

                    <DataTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Image Source="Question.jpg" Height="30" MouseEnter="Image_MouseEnter" ></Image>
                            <ComboBoxItem Content="{Binding Source={StaticResource Users}}" Grid.Column="1"/>

                        </Grid>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox> 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:39:56.013

当您在数据模板中使用 Binding 控件时，它会绑定到 ItemsSource 集合中的每个项目。此外，如果您只想显示字符串，您可以使用 TextBlock 控件而不是 ComboboxItem。因此，如果您的代码如下所示：

```
 <ComboBox.ItemTemplate>

                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <Image Source="Question.jpg" Height="30" MouseEnter="Image_MouseEnter" ></Image>
                        <TextBlock Text="{Binding}" Grid.Column="1"/>

                    </Grid>
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox> 
```

我想你会达到你想要的效果。希望这可以帮助。

# python - How to start Django from code in background?

> ID：14890152
> 
> 赞同：1
> 
> 时间：2013-02-15T07:39:53.550
> 
> 标签：python, django

One can easily start Django using management command like this:

```
management.call_command('runserver', interactive=False) 
```

But it actually blocks execution. Any workaround apart from subprocess/threading/multiprocessing.

I mean how to do it in more native fashion?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:00:38.503

管理命令*不是*“启动 django”。

您可以通过在任意数量的 Web 服务器上部署来“启动 django”，每个服务器都有在后台运行的方法。 [https://docs.djangoproject.com/en/dev/howto/deployment/](https://docs.djangoproject.com/en/dev/howto/deployment/)

动态部署 django 不是我见过的，但我想你可以编写一些脚本来生成网络服务器配置文件。

`manage.py runserver`绝不应用于生产环境/用途。

如果这只是一个示例，并且您实际上想要运行其他异步管理命令，那么公认的社区会回答使用像 Celery 这样的任务队列。

[http://docs.celeryproject.org/en/latest/django/](http://docs.celeryproject.org/en/latest/django/)

然后，您可以启动 10000 个非阻塞管理命令，以供 celery 工人在“将来”使用。

# c++ - Constraining Edit Control content

> ID：14890155
> 
> 赞同：2
> 
> 时间：2013-02-15T07:40:10.160
> 
> 标签：c++, winapi, edit

I've scanned through all pages in MSDN, but still not found asnwers of following.

1.  Minimum Character Length of edit control.
2.  Specifying range for input values in edit control.
3.  Permitting only alphabets in edit control.
4.  Setting tooltip for button control.

Please tell me how to do this in Win32.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T07:03:04.713

1.  这很难正确地做到。一种天真的方法会处理`WM_KEYDOWN`消息以拦截退格键和删除键（`VK_BACK`和`VK_DELETE`）。但是，您还需要处理用户选择一些现有文本然后删除它（通过退格或删除）、剪切或替换它（通过键入键或粘贴一些其他文本）。我不认为这是值得的，即使你可以很好地做到这一点，当你打破所有这些正常行为时也可能会感到困惑。（这也可能令人难以置信的烦人。想象一下，您在控件中有一些文本“bar”，但您想将其更改为“baz”。如果控件强制最小长度为 3，则尝试在最后一个字符上退格获胜不行。您必须先将其更改为“barz”，然后才能删除“r”字符。呃。）

    如果您的控件需要最小长度，您最好在单独的验证步骤（例如当用户单击确定按钮或将焦点移动到另一个控件时）强制执行它并显示适当的错误消息。

2.  我不确定您的意思是只允许将某些字符输入到编辑控件中，还是要将其限制为一定范围的数值。前者见3。

    如果您想将值限制在某个数字范围内，我再次建议您在单独的验证步骤中执行此操作。否则，您可能会再次阻止用户以正常方式插入和删除字符。如果可以，请避免使用 Edit 控件并使用 Trackbar（滑块）控件。

3.  您必须继承 Edit 控件、处理`WM_CHAR`消息并拒绝不需要的字符。您还需要处理`WM_PASTE`消息并执行类似的验证。

4.  这与编辑控件没有任何关系，可能应该是一个单独的问题。你试过什么？你读过[http://msdn.microsoft.com/en-us/library/bb760250.aspx](http://msdn.microsoft.com/en-us/library/bb760250.aspx)吗？

# wpf - 使用 MultiValueConverter 对 DataGrid 的列进行排序

> ID：14890156
> 
> 赞同：1
> 
> 时间：2013-02-15T07:40:10.567
> 
> 标签：wpf, xaml, sorting, datagrid, imultivalueconverter

我有一个使用 MultiValueConverter 的带有文本列的数据网格。转换器有 2 个值。当前项目的第一个依赖项和 TextBlock 的第二个依赖项。显示的值是我想要的。

```
<TextBox x:Name="phases"></TextBox>
<DataGrid AutoGenerateColumns="False" CanUserAddRows="False" CanUserDeleteRows="False" CanUserReorderColumns="False" CanUserResizeRows="False"
         ItemsSource="{Binding MySource}" RowDetailsVisibilityMode="Collapsed" RowHeaderWidth="0" 
          SelectionMode="Single">
    <DataGrid.Columns>
        <DataGridTextColumn Width="Auto" Header="Pos">
            <DataGridTextColumn.Binding>
                <MultiBinding Converter="{StaticResource MyMultiValueConverter}">
                    <Binding ElementName="phases" Path="Text" />
                    <Binding />
                </MultiBinding>
            </DataGridTextColumn.Binding>
        </DataGridTextColumn>
    </DataGrid.Columns>
</DataGrid > 
```

列中显示的值是我想要的。问题是我无法按此列排序。我尝试添加类似的内容：

```
<DataGridTextColumn.SortMemberPath>
    <MultiBinding Converter="{StaticResource MyMultiValueConverter}">
        <Binding ElementName="phases" Path="Text" />
        <Binding />
    </MultiBinding>
</DataGridTextColumn.SortMemberPath> 
```

但我收到“找不到目标元素的管理 FrameworkElement 或 FrameworkContentElement”。错误。我改为：

```
<DataGridTextColumn.SortMemberPath>
    <MultiBinding Converter="{StaticResource MyMultiValueConverter}">
        <Binding Path="Text" Source="{x:Reference phases}" />
        <Binding Path="" />
    </MultiBinding>
</DataGridTextColumn.SortMemberPath> 
```

那么第一行没问题，但是第二行，我无法获取currentItem。

我尝试使用 SortEvent，但我只能添加没有任何逻辑的 SortDescription（我的转换器中有它）。

使用 multiValueConverter 时有什么方法可以对列进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:45:17.317

我认为这与这里的问题相同：[DataGridColumn SortMemberPath on MultiBinding](https://stackoverflow.com/questions/11193203/datagridcolumn-sortmemberpath-on-multibinding/15568359#15568359)

[SortMemberPath](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcolumn.sortmemberpath%28v=vs.110%29.aspx)期望属性的名称（例如“TotalDollars”）而不是单个计算的行值。把它想象成标题，你为整列设置一次。您的转换器将返回一个类似 15 的数字，其中 SortMemberPath 需要一个绑定路径字符串。

想到的两个选项：

1.  在您的支持对象上提供一个计算属性（例如“AveragePrice”）并绑定到它。不需要转换器或排序成员路径。

    ```
    public double AveragePrice
    {
        get { return TotalDollars / NumberToDivideBy; }
    } 
    ```

2.  [像在这个问题](https://stackoverflow.com/questions/2129601/how-can-i-apply-a-custom-sort-rule-to-a-wpf-datagrid)中一样指定一个[OnSorting](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.onsorting.aspx)事件处理程序。

希望能帮助到你。:)

# python - Django: given a user object, how do I get a corresponding UserProfile object?

> ID：14890157
> 
> 赞同：0
> 
> 时间：2013-02-15T07:40:19.773
> 
> 标签：python, django, authentication, login

Have a `UserProfile` object that successfully extends the django default `user` class:

```
class UserProfile(models.Model):

    user = models.OneToOneField(User) 
```

and have updated the `settings.py` file accordingly:

```
AUTH_PROFILE_MODULE = 'authorization.UserProfile' 
```

Everything works fine, just wondering: how do I get to objects associated with `UserProfile` for a given context within a view?

Assume that I can just get `context.user` if the user is logged in, but then how do I grab the corresponding `UserProfile` object?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:46:55.030

鉴于：

```
 request.user.get_profile().field_name 
```

在模板中：

```
 {{user.userprofile.field_name}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:44:46.333

你可以得到它 -

```
context.user.userprofile 
```

[详细在这里](https://docs.djangoproject.com/en/dev/topics/db/examples/one_to_one/)。

# iphone - UISearchBar 取消按钮没有响应

> ID：14890164
> 
> 赞同：8
> 
> 时间：2013-02-15T07:41:16.550
> 
> 标签：iphone, uisearchbar

我已经实现了搜索栏，一旦用户在搜索栏中获得焦点，它就会显示取消按钮。为此，我已经`searchBar.showsCancelButton = YES;`在我的`searchBarTextDidBeginEditing`方法中写了。在`searchBarSearchButtonClicked`中，我放弃了键盘，以便用户可以查看完整的 tableview。

问题：此时搜索栏取消按钮没有响应。它仅在搜索栏再次获得焦点时才会响应。这是搜索栏取消按钮的默认属性，还是我的代码中缺少某些内容。我想使用取消按钮而不再次在搜索栏中提供焦点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T07:53:38.863

这是搜索栏取消按钮的默认行为。如果您想要其他功能，您可以取消选中搜索栏的取消按钮属性，并可以`UIButton`用作取消按钮。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T10:43:40.773

**是的，您可以**让您的`UISearchBar`取消按钮响应。默认情况下它是禁用的，但您可以访问它的子视图，然后将启用设置为取消按钮。

```
for (id object in [mySearchBar subviews])
{
    if ([object isKindOfClass:[UIButton class]])
    {
        UIButton *searchBarCancelBtn = (UIButton*)object;
        [searchBarCancelBtn setEnabled:YES];
    }
} 
```

[如果您想要UISearchBar 文本字段中的](https://stackoverflow.com/questions/13862050/custom-clear-button-in-uisearchbar-text-field/13862943#13862943)其他逻辑自定义清除按钮，请遵循此答案

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T08:10:59.567

我认为它是当它获得焦点时的默认行为，`UISearchBar`然后才会启用取消按钮。`UISearchBar`当它没有焦点时，您无法获得取消按钮事件。

所以我对完成你的任务的建议是，

*   创建工具栏
*   插入`UIBarButtonItem`自定义视图为`UISearchBar`
*   插入`UIBarButtonItem`名为“取消”的操作

# ruby-on-rails - Databasedotcom gem : Retrieve user info based on session id

> ID：14890166
> 
> 赞同：0
> 
> 时间：2013-02-15T07:41:20.850
> 
> 标签：ruby-on-rails, ruby, salesforce, databasedotcom-gem

I am using databasedotcom gem for interacting with salesforce. I am able to get sObject(Account,Contact,Lead) info. Can any one tell me how to get the user info by passing salesforce session id.

Below code is used to get Account detail from salesforce, but ***i need to retrieve User info based on session id***

```
client = Databasedotcom::Client.new("config/databasedotcom.yml")
client.authenticate :username => 'xxxxxx', :password => 'xxxxx'
client.sobject_module =SFDC_Models
client.materialize("Account")    
@acc = SFDC_Models::Account.all 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-15T06:36:34.643

经过几天的努力，事实证明 :token 参数与会话 ID 相同。对此没有任何记录，但希望它可以在未来帮助其他人。

```
class HomeController < ApplicationController
        def create
                @session_id = salesforce_params[ :sid ]
                location_split = salesforce_params[ :url ].split("/")
                @location = "http://" + location_split[2]     

                client = Databasedotcom::Client.new                    
                client.authenticate :token => @session_id, :instance_url => @location
                render :text => client.list_sobjects
        end

        private def salesforce_params
                params.permit( :sid, :url )
        end
end 
```

# asp.net-mvc-3 - How do I change validation messages from German to English?

> ID：14890171
> 
> 赞同：0
> 
> 时间：2013-02-15T07:41:37.093
> 
> 标签：asp.net-mvc-3, razor, visual-studio-2012

Currently, when I get validation errors in my Project, I have German validation error messages. I would like to have English ones.

They seem to be in `System.Web.Mvc.resources.dll`:

```
moose@pc07:~/Downloads/Team/UpToDatE-Code$ grep -r -i 'Das Feld' *
Binary file ViMuDat/UpToDatE/ViMuDat/ViMuDat/_bin_deployableAssemblies/
                    de/System.Web.Mvc.resources.dll matches 
```

What do I have to change to get English validation error messages?

![enter image description here](../Images/0a41831e29987da9e73c93bc1662196e.png)

![enter image description here](../Images/e812dd0703125e40dee68ad2b2fc9948.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:47:14.047

您需要安装 .NET Framework 的语言包。

[Microsoft .NET Framework 4 完整语言包 (x86 x64)](http://www.microsoft.com/en-us/download/details.aspx?id=3324)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:51:11.077

如果您希望这些验证消息是英文的，则必须使用最初为英文的 Visual Studio 构建项目。将非原始英语版本的语言更改为英语不是解决方案，因为验证消息仍将使用以前的语言。

# sml - 我可以用中缀运算符折叠而不写出匿名函数吗？

> ID：14890175
> 
> 赞同：5
> 
> 时间：2013-02-15T07:42:00.220
> 
> 标签：sml, syntactic-sugar

如果我想添加一个列表，我可以这样做：

```
- List.foldr (fn (x, y) => x + y) 0 [1, 2, 3]
val it = 6 : int 
```

有没有办法写更多的东西：

```
List.foldr + 0 [1, 2, 3] 
```

我试过这样的事情：

```
fun inf2f op = fn (x, y) => x op y; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T07:45:23.093

你很近。`op`在第二个示例中添加关键字。

```
- List.foldr op + 0 [1,2,3];
val it = 6 : int 
```

# bash - 如何删除每行文件开头的数字？

> ID：14890178
> 
> 赞同：0
> 
> 时间：2013-02-15T07:42:08.400
> 
> 标签：bash, shell

如果文件在每一行的开头包含数字，例如：

```
1 hello wolrd!
2 gjdshjkjkgn*90&
3 {)/>husdfghjhs 
```

等等

如何从文件中删除行号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T07:43:52.077

怎么样`sed`：

```
sed 's/^[0-9]*//' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T07:47:38.260

cnicutar 的答案更好，并且对于大量数据当然更易于维护，但我认为可能值得指出一些文本编辑器提供垂直选择（例如，通过按住 ALT 或 CTL，例如，同时用鼠标选择文本）。如果您已经在文件上打开了这样的文本编辑器，它可能比从命令行运行某些东西要快。

尽管如此，cnicutar 的答案更好，尤其是在处理大量数据的情况下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T07:48:54.517

Cut 正是为此而设计的 `cut -d ' ' -f 2-`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T07:44:35.497

`perl -npe 's/^[0-9]+//'`我相信你也可以使用 sed 或 awk 来做到这一点。

# python - 如何使用 xlwt 在同一个单元格中添加一些超链接？

> ID：14890181
> 
> 赞同：2
> 
> 时间：2013-02-15T07:42:18.060
> 
> 标签：python, xlwt

我试过了：

```
link = ''
for photo in photo_list:
    link += 'HYPERLINK("' + photo + '"; "Title");\n'
worksheet.write(row, col, xlwt.Formula(link)) 
```

但它只放了第一个链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:46:38.060

您是否尝试过将其置于`worksheet.write(row, col, xlwt.Formula(link))`循环之外？

```
link = ''
for photo in photo_list:
    link += 'HYPERLINK("' + photo + '"; "Title");\n'

worksheet.write(row, col, xlwt.Formula(link)) 
```

# c - 第一次机会异常：KernelBase.dll

> ID：14890184
> 
> 赞同：-1
> 
> 时间：2013-02-15T07:42:26.207
> 
> 标签：c, visual-studio-2010, winapi, access-violation

我正在尝试使用 VS2012 Pro 构建和运行这个程序。

```
#include "stdafx.h"

int _tmain(int argc, _TCHAR* argv[])
{
    STARTUPINFO si;
    PROCESS_INFORMATION pi;

    //allocate memory
    ZeroMemory(&si, sizeof(si));
    si.cb = sizeof(si);
    ZeroMemory(&pi, sizeof(pi));

    //create child process
    if (!CreateProcess(NULL,    //use command line
             L"mspaint.exe",    //command line
             NULL,    //don't inherit process handle
             NULL,    //don't inherit thread handle
             FALSE,    //disable handle inheritance
             0,        //no creation flags
             NULL,    //use parent's environment block
             NULL,    //use parent's existing directory
             &si,
             &pi))
    {
        fprintf(stderr, "Create Process Failed");
        return -1;
    }
    WaitForSingleObject(pi.hProcess, INFINITE);
    CloseHandle(pi.hProcess);
    CloseHandle(pi.hThread);

    return 0;
} 
```

我收到此错误：

> “ConsoleApplication1.exe”（Win32）：已加载“G:\workspace\VS2012\ConsoleApplication1\Debug\ConsoleApplication1.exe”。已加载符号。
> 
> “ConsoleApplication1.exe”（Win32）：已加载“C:\Windows\SysWOW64\ntdll.dll”。无法找到或打开 PDB 文件。
> 
> “ConsoleApplication1.exe”（Win32）：已加载“C:\Windows\SysWOW64\kernel32.dll”。无法找到或打开 PDB 文件。
> 
> “ConsoleApplication1.exe”（Win32）：已加载“C:\Windows\SysWOW64\KernelBase.dll”。无法找到或打开 PDB 文件。
> 
> “ConsoleApplication1.exe”（Win32）：已加载“C:\Windows\SysWOW64\msvcr110d.dll”。已加载符号。
> 
> ConsoleApplication1.exe 中 0x763919E3 (KernelBase.dll) 处的第一次机会异常：0xC0000005：访问冲突写入位置 0x00CB586E。
> 
> ConsoleApplication1.exe 中 0x763919E3 (KernelBase.dll) 处的未处理异常：0xC0000005：访问冲突写入位置 0x00CB586E。
> 
> 程序“[6992] ConsoleApplication1.exe”已退出，代码为 0 (0x0)。

请注意，我没有错误地构建它（文件 stdafx.h 包含我需要的所有标题）。

我搜索了这个错误，但找不到任何解决方案，这只是一个简单的程序，所以我无法理解这里有什么问题:(。

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T08:14:53.800

从 CreateProcessW 文档中，特别是关于您的第二个参数：

> 此函数的 Unicode 版本 CreateProcessW 可以修改此字符串的内容。因此，此参数不能是指向只读内存的指针（例如 const 变量或文字字符串）。如果此参数是一个常量字符串，该函数可能会导致访问冲突

因此，在回答您的问题时，不要将常量字符串文字作为第二个参数传递给该函数，否则您将获得 AV。

# iis-7 - IIS7 DotNetOpenAuth 自定义 LinkedInClinet 响应在当前上下文中不可用

> ID：14890185
> 
> 赞同：0
> 
> 时间：2013-02-15T07:42:32.067
> 
> 标签：iis-7, dotnetopenauth

我正在使用 dotnetopneauth 的自定义 LinkedInClient，可在以下链接中找到：

[DotNetOpenAuth LinkedIn 客户端 github 链接](https://github.com/AArnott/dotnetopenid/blob/master/src/DotNetOpenAuth.AspNet/Clients/OAuth/LinkedInClient.cs)

它适用于我的开发机器。我将它托管在 Windows Server 2008 R2 Enterprise（64 位）上。它在那里也可以正常工作。但我将它切换到另一台使用 Windows Server 2008 R2 Standard（64 位）的服务器，并在此处产生问题。在此服务器上，它给我错误“响应在当前上下文中不可用”。有关堆栈跟踪，请参阅附图。

![堆栈跟踪](../Images/8c826861e7f5aadcaf17d2f5ed7e4593.png)

我在以下链接尝试了解决方案：

[StackOverflow 上的建议解决方案](https://stackoverflow.com/questions/9326480/dotnetopenauth-in-iis7-request-not-available)

但这对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:54:06.807

我在我的服务器上下载并安装了 ASP.NET MVC 4，它对我有用。ASP.NET MVC 4 下载链接： [下载 Microsoft ASP.NET MVC 4](http://www.asp.net/mvc/mvc4)

# java - 在 Struts 2 的同一页面上上传文件详细信息

> ID：14890193
> 
> 赞同：2
> 
> 时间：2013-02-15T07:43:38.893
> 
> 标签：java, jsp, file-upload, struts2

我可以使用struts2上传文件。但我想在 struts 2 中显示有关上传文件的详细信息 ( `Filename`, `filesize`, )。`filetype`

我正在尝试使用`<s:property value="myFile" />`标签获取详细信息，但始终显示 [Object HTMLDocument]。

我的代码如下。

**`uploadfile.jsp`：**

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
                pageEncoding="ISO-8859-1"%>
            <%@ taglib prefix="s" uri="/struts-tags"%>
            <!DOCTYPE html>

            <html>
            <head>
                <meta charset="utf-8">

            </head>
            <body>
                <div id="success-image">
                 <s:property value="myFile" />
            <s:head theme="ajax" />
                <s:form id="asset-upload"  name="asset-upload" action="uploadFile.action" method="POST"  theme="ajax" enctype="multipart/form-data">
                <s:file name="myFile" label="Upload Image"/>
       <s:submit targets="success-image" showLoadingText="false" indicator="uploading-image" id="asdf"/>
    </s:form>
        </div>
            </body>
            </html> 
```

**`struts.xml`：**

```
 <?xml version="1.0" encoding="UTF-8" ?>
    <!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
        "http://struts.apache.org/dtds/struts-2.0.dtd">

    <struts>
        <constant name="struts.enable.DynamicMethodInvocation" value="false" />
        <constant name="struts.devMode" value="false" />
        <constant name="struts.multipart.maxSize" value="1000000000" />

        <package name="default" extends="struts-default,json-default" namespace="/">
            <action name="uploadFile" class="com.isam.struts.uploadFile">
                <result name="success">
                    <param name="myFile">myFile</param>
                 </result>
                <result name="error">login.jsp</result>
            </action>

            <action name="autoCompleterList" class="com.isam.struts.AutoCompleterList">
                <result type="json" />
            </action>
        </package>
    </struts> 
```

**`UploadFile.java`：**

```
 package com.isam.struts;

        import java.io.File;
        import java.io.IOException;

        import org.apache.commons.io.FileUtils;

        import com.opensymphony.xwork2.ActionSupport;

        public class uploadFile extends ActionSupport {

            private File myFile;
            private String myFileContentType;
            private String myFileFileName;
            private String destPath;

            public String execute() {
                /* Copy file to a safe location */
                destPath = "C:/temp/";

                try {
                    System.out.println("Src File name: " + myFile);
                    System.out.println("Dst File name: " + myFileFileName);

                    File destFile = new File(destPath, myFileFileName);
                    FileUtils.copyFile(myFile, destFile);

                } catch (IOException e) {
                    e.printStackTrace();
                    return ERROR;
                }

                return SUCCESS;
            }

            public File getMyFile() {
                return myFile;
            }

            public void setMyFile(File myFile) {
                this.myFile = myFile;
            }

            public String getMyFileContentType() {
                return myFileContentType;
            }

            public void setMyFileContentType(String myFileContentType) {
                this.myFileContentType = myFileContentType;
            }

            public String getMyFileFileName() {
                return myFileFileName;
            }

            public void setMyFileFileName(String myFileFileName) {
                this.myFileFileName = myFileFileName;
            }

        } 
```

所以我应该在jsp文件中添加什么来显示细节，以及我应该在`struts.xml`文件中添加什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:23:46.523

在`uploadFile`行动中，您需要为 info 和 getter 放置 setter 以在结果中显示它。

```
public void setUpload(File myFile) {
  this.myFile= myFile;
}

public void setUploadContentType(String myFileContentType) {
  this.myFileContentType= myFileContentType;
}

public void setUploadFileName(String myFileFileName) {
  this.myFileFileName = myFileFileName;
}

public String getMyFileFileName() {
  return myFileFileName;
}

public String getMyFileSize() {
  return myFile.length();
}

public String getMyFileContentType() {
  return myFileContentType;
} 
```

它以注入可以进一步显示的值命名

```
<s:property value="myFileName" />

<s:property value="myFileSize" />

<s:property value="myFileContentType" /> 
```

如果文件有扩展名，您可以从 `myFile`. 如果它具有图像类型，那么您应该应用编解码器来获取它和尺寸。但是，它不是必需的。获得后，`BufferedImage`您可以写入或缩放到任何图像类型或大小。

错误的是结果“成功”。结果应该是带有 id image 参数的重定向操作的正常 URL，如果你想取回它，你必须再次加载它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:58:54.253

要在上传后在同一页面上显示文件详细信息，请将您的操作结果更改为：

```
<action name="uploadFile" class="com.isam.struts.uploadFile">
   <result name="success">uploadfile.jsp</result>
   <result name="error">login.jsp</result>
</action> 
```

而在 JSP 中使用`<s:property>`标签来显示值：

```
<s:property value="myFile.length()"/>
<s:property value="myFileContentType"/>
<s:property value="myFileFileName"/> 
```

# php - 未定义的偏移量 1 和 2 错误

> ID：14890199
> 
> 赞同：0
> 
> 时间：2013-02-15T07:44:01.727
> 
> 标签：php

我在下面收到这些错误：

```
Notice: Undefined offset: 1 in ... on line 93 
Notice: Undefined offset: 2 in ... on line 94 
```

这些错误是什么意思，如何解决？我看不出问题出在哪里，但我知道在单击“模块提交”按钮后它们会出现

$模块活动 = 1;

```
 $sql = "SELECT ModuleId, ModuleNo, ModuleName FROM Module WHERE ModuleActive = ? ORDER BY ModuleNo"; 

     $sqlstmt=$mysqli->prepare($sql);

     $sqlstmt->bind_param("i", $moduleactive);

     $sqlstmt->execute(); 

     $sqlstmt->bind_result($dbModuleId,$dbModuleNo,$dbModuleName);

    $moduleHTML  = "";  
      $moduleHTML .= '<select name="modules" id="modulesDrop">'.PHP_EOL;
 $moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

     while($sqlstmt->fetch()) { 
         $moduleHTML .= sprintf('<option value="%1$s_%2$s_%3$s">%1$s - %2$s</option>'.PHP_EOL, $dbModuleNo, $dbModuleName, $dbModuleId);
    } 

$moduleHTML .= '</select>'; 

    $pHTML = "";

    ?>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" onsubmit="return validation(event);">
<table>
<tr>
<th>Module: <?php echo $moduleHTML; ?></th>
</tr>
</table>
<p><input id="moduleSubmit" type="submit" value="Submit Module" name="moduleSubmit" /></p>
<div id="moduleAlert"></div>
<div id="targetdiv"></div>
</form>

<?php

if (isset($_POST['moduleSubmit'])) {    

$outputmodule = ""; 

$moduleInfo = explode("_", $_POST['modules']);
$moduleNo = $moduleInfo[0];
$moduleName = $moduleInfo[1]; //Error line 93
$moduleId = $moduleInfo[2]; //Error line 94
$outputmodule = sprintf("<p><strong>Selected Module:</strong> %s - %s <input type='hidden' value='%s'></p>", $moduleNo, $moduleName, $moduleId);

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:47:03.550

发生此错误是因为 $moduleInfo 变量中该索引处没有值。由于没有进入 $_POST['modules'] 变量

替换它以避免错误

```
$moduleName =$moduleInfo[1]; //Error line 93
$moduleId =$moduleInfo[2]; //Error line 94 
```

和

```
$moduleName = isset($moduleInfo[1])?$moduleInfo[1]:''; 
$moduleId = isset($moduleInfo[2])?$moduleInfo[2]:''; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:51:43.820

该错误意味着未定义`1`和引用的元素。`2`

您正在`explode`输入一个带有下划线的字符串，正如用户在`modules`. 如果该字符串没有任何（或足够的）下划线，`explode`则返回一个元素比您想象的要少的数组。

您应该在使用之前验证输入，并检查您是否实际上至少有 3 个元素：

```
$moduleInfo = explode("_", $_POST['modules']);
if (count($moduleInfo) >= 3) {
   $moduleNo = $moduleInfo[0];
   $moduleName = $moduleInfo[1]; //Error line 93
   $moduleId = $moduleInfo[2]; //Error line 94

   // validate the subparts (this is important as well!)
} else {
   // set your variables to some sane default or fail gracefully
} 
```

# android - 类似 android 内置位置应用程序的菜单

> ID：14890200
> 
> 赞同：0
> 
> 时间：2013-02-15T07:44:05.587
> 
> 标签：android, android-layout, android-ui

我想制作一个类似android内置`Places`应用程序的菜单。谁能告诉我这个菜单是怎么做的？

![在此处输入图像描述](../Images/8efdf01b1198f921077c770e6e99b8aa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:02:17.710

您可以创建类似于 facebook 仪表板的仪表板布局的菜单。将[其](http://www.androidhive.info/2011/12/android-dashboard-design-tutorial/)用作布局并用您喜欢的按钮或其他元素填充它。

我希望它会帮助你。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:01:18.113

如前所述，这是一个仪表板布局。您可以在 android 中使用[GridView](http://developer.android.com/guide/topics/ui/layout/gridview.html)绘制它。[此链接](http://www.androidhive.info/2011/12/android-dashboard-design-tutorial/)提供了一个非常好的教程，可以满足您的确切需求。

# css - 为什么我的图像排列不正确？

> ID：14890201
> 
> 赞同：0
> 
> 时间：2013-02-15T07:44:08.230
> 
> 标签：css, layout, css-float

CSS 对我来说很新，虽然我很愿意学习，但我无法解决这个问题。

我有一个无序列表，其中包含容器内页面左侧的七个小图像。

我想在列表下方的页面底部排列三个图像。

这三个底部的图像似乎与列右侧的位置对齐，如果它向下拉伸然后从容器中取出。图像在表格中，但如果有更好的方法，我会很乐意使用它.

有很多编码，所以我不知道在这里放什么，但 URL 是：

[http://www.c5d.co.uk/coursehistoryfour.php](http://www.c5d.co.uk/coursehistoryfour.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:18:02.010

我建议你使用`div`s 而不是`table`s。我做了一个简短的小提琴，你可以在其中检查我会如何做那个[jsFiddle](http://jsfiddle.net/amzUB/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:25:36.293

您可以通过管理宽度来管理宽度`td`，然后是图像宽度 100%

```
<table>
<tbody>
<tr>
<td witdh="33%"><img width="100%" height="" alt="JWK" src="http://www.c5d.co.uk/JWK.jpg" title="J W Kenworthy" class="renouf"> J W Kenworthy: The First President</td>
<td width="33%"><img width="100%" height="" alt="" src="http://www.c5d.co.uk/parnaby.jpg" title="Henry Parnaby" class="renouf">Rev<sup>d</sup> Henry Parnaby: The First Captain</td>
<td width="33%"><img width="100%" height="" alt="" src="http://www.c5d.co.uk/renouf.jpg" title="Tommy Renouf" class="renouf">Thomas Renouf: Course Designer</td>
</tr>
</tbody>
</table> 
```

但最好使用`div`而不是`table`放置较大的图像尺寸，您必须将其调整为您在浏览器上看到的实际尺寸，以提高浏览器的加载速度。

# mysql - 排序sql树层次结构

> ID：14890204
> 
> 赞同：22
> 
> 时间：2013-02-15T07:44:29.463
> 
> 标签：mysql, sql, tree

像这样对表格进行排序的最佳方法是什么：

```
CREATE TABLE category(
    id INT(10),
    parent_id INT(10),
    name VARCHAR(50)
);

INSERT INTO category (id, parent_id, name) VALUES
(1, 0, 'pizza'),        --node 1
(2, 0, 'burger'),       --node 2
(3, 0, 'coffee'),       --node 3
(4, 1, 'piperoni'),     --node 1.1
(5, 1, 'cheese'),       --node 1.2
(6, 1, 'vegetariana'),  --node 1.3
(7, 5, 'extra cheese'); --node 1.2.1 
```

按**id**或**名称**对其进行分层排序：
'pizza' //node 1
'piperoni' //node 1.1
'cheese' //node 1.2
'extra cheese' //node 1.2.1
'vegetariana' //node 1.3
'burger' //节点 2
'咖啡' //节点 3

**编辑：****名称**末尾的数字是为了更好地可视化结构，而不是用于排序。

**编辑2：**正如多次提到的...... `name`“奶酪**1.2** ”末尾的数字仅用于可视化目的，而不是用于排序。我将它们作为评论移动，太多人感到困惑，对不起。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-26T03:43:53.893

通过添加路径列和触发器，这可以相当容易地完成。

首先添加一个 varchar 列，该列将包含从根到节点的路径：

```
ALTER TABLE category ADD path VARCHAR(50) NULL; 
```

然后添加一个计算插入路径的触发器：

（只需将新 id 与父路径连接起来）

```
CREATE TRIGGER set_path BEFORE INSERT ON category
  FOR EACH ROW SET NEW.path = 
  CONCAT(IFNULL((select path from category where id = NEW.parent_id), '0'), '.', New.id); 
```

然后只需按路径选择顺序：

```
SELECT name, path FROM category ORDER BY path; 
```

结果：

```
pizza         0.1
piperoni      0.1.4
cheese        0.1.5
extra cheese  0.1.5.7
vegetariana   0.1.6
burger        0.2
coffee        0.3 
```

见[小提琴](http://sqlfiddle.com/#!2/3f7c5/1/0)。

这样维护成本也最低。路径字段在插入时隐藏，通过触发器计算。删除一个节点没有开销，因为该节点的所有子节点也都被删除了。唯一的问题是更新节点的 parent_id 时；好吧，不要那样做！:)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-19T14:27:50.787

**嵌套树集**与列相结合`level`是一种非常好的技术，用于读取和排序基于树的结构。很容易选择一棵子树，将结果限制在某个级别，并在一个查询中进行排序。但是插入和删除整体的成本相对*较高*，因此如果您更频繁地查询数据然后写入它们并且读取性能很重要，则应该使用它。（对于 50-100，移除、插入或移动元素的时间应该没有问题，即使是 1000 也不应该有问题）。

对于每个条目，您都存储它的值和`level`值，在下面的示例中它是： ( , , ) 如果您只想选择带有它的后代的，您可以这样做：`left``right``left``right``level``1.2`

```
 SELECT * FROM table WHERE left >=7 AND right <=16 
```

如果您只想选择孩子，那么

```
 SELECT * FROM table WHERE left >=7 AND right <=16 AND level=2 
```

如果你想排序你可以做

```
 SELECT * FROM table WHERE left >=7 AND right <=16 ORDER BY left 
```

在保持层次结构分组的同时按其他字段排序可能会出现问题，具体取决于您希望如何排序。

```
 1 (0,17,0)
                                   |
                                   |
                   +---------------+---------------------------------------+
                   |                                                       |
              1.1 (1,6,1)                                            1.2 (7,16,1)
                   |                                                       |
      +------------+-------+                  +-------------------+--------+----------------+
      |                    |                  |                   |                         |
  1.1.1 (2,3,2)      1.1.2 (4,5,2)      1.2.1 (8,9,2)       1.2.2 (10,13,2)         1.2.2 (14,15,2)
                                                                  |
                                                                  |
                                                                  |
                                                            1.2.2.1 (11,12,3) 
```

**闭包表**（用于完成，但我不推荐用于您的用例）。它将所有路径存储在树中，因此如果您有许多级别，层次结构所需的存储空间将增长得非常快。

**路径枚举**在那里您将每个元素的路径与条目一起存储，在`/0/`那里`/0/1/`查询路径很容易，但是对于排序它不是那么灵活。

对于少量的整体，我会使用**Nested Tree Sets**。遗憾的是，我没有一个很好的参考页面来描述这些技术并进行比较。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-15T08:13:32.397

如果只有 3 层嵌套，你可以做这样的事情

```
SELECT c1.name FROM category as c1 LEFT JOIN category as c2
   ON c1.parent_id = c2.id OR (c1.parent_id = 0 AND c1.id = c2.id) 
   ORDER BY c2.parent_id, c2.id, c1.id; 
```

如果你有更多的嵌套级别，那就更棘手了

对于更多嵌套级别，您可以编写函数

```
delimiter ~
DROP FUNCTION getPriority~

CREATE FUNCTION getPriority (inID INT) RETURNS VARCHAR(255) DETERMINISTIC
begin
  DECLARE gParentID INT DEFAULT 0;
  DECLARE gPriority VARCHAR(255) DEFAULT '';
  SET gPriority = inID;
  SELECT parent_id INTO gParentID FROM category WHERE ID = inID;
  WHILE gParentID > 0 DO
    SET gPriority = CONCAT(gParentID, '.', gPriority);
    SELECT parent_id INTO gParentID FROM category WHERE ID = gParentID;
  END WHILE;
  RETURN gPriority;
end~

delimiter ; 
```

所以我现在开始

```
SELECT * FROM category ORDER BY getPriority(ID); 
```

我有

```
+------+-----------+--------------------+
| ID   | parent_id | name               |
+------+-----------+--------------------+
|    1 |         0 | pizza 1            |
|    4 |         1 | piperoni 1.1       |
|    5 |         1 | cheese 1.2         |
|    7 |         5 | extra cheese 1.2.1 |
|    6 |         1 | vegetariana 1.3    |
|    2 |         0 | burger 2           |
|    3 |         0 | coffee 3           |
+------+-----------+--------------------+ 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-15T08:50:32.493

一种方法是使用单独的字符串字段来存储任何节点的完整路径。您需要在每次插入/更新/删除操作时维护此字段。

您可以具有如下字段值

```
CREATE TABLE category(
    id INT(10),
    parent_id INT(10),
    name VARCHAR(50),
    path VARCHAR(255)
);

INSERT INTO category (id, parent_id, name, path) VALUES
(1, 0, 'pizza 1','|1|'),
(2, 0, 'burger 2','|2|'),
(3, 0, 'coffee 3','|3|'),
(4, 1, 'piperoni 1.1','|1||4|'),
(5, 1, 'cheese 1.2','|1||5|'),
(6, 1, 'vegetariana 1.3','|1||6|'),
(7, 5, 'extra cheese 1.2.1','|1||5||1|'); 
```

您需要按路径字段排序才能使树以正确的排序顺序排列。

```
SELECT * FROM `category` ORDER BY `path`; 
```

参见**[SqlFiddle 演示](http://sqlfiddle.com/#!2/c4247/2)**

这样，您不需要编程语言中的递归即可以正确的排序顺序打印整个树。

**`Note:`**

此示例仅在您的最大 ID 为 9 时才有效，如 |1||11| 将早于 |1||2|

要解决此问题，您需要根据您的应用程序预期的 ID 字段的最大值对构建字符串进行填充，如下例所示，预期最大值为 999（3 位）

`|001||002|`

* * *

根据我的经验，这个解决方案应该只适用于处理深度达到 7-8 级的树。

其他方法：[点击这里](http://www.sitepoint.com/hierarchical-data-database/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-24T18:03:24.730

我认为每个人都在过度设计解决方案。如果您的示例确实代表了您的目标，例如虚拟顶级 0 id 的 3 级，这应该就足够了。

```
SELECT *
     , id AS SORT_KEY
  FROM category a
 WHERE parent_id = 0
UNION ALL
SELECT a.*
     , CONCAT(b.id, '.', a.id) AS SORT_KEY
  FROM category a
     , category b
 WHERE b.parent_id = 0
   and b.id = a.parent_id
UNION ALL
SELECT a.*
     , CONCAT(c.id,'.', b.id,'.', a.id) AS SORT_KEY
  FROM category a
     , category b
     , category c
 WHERE c.parent_id = 0
   and b.id = a.parent_id
   AND c.id = b.parent_id
ORDER BY sort_key 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-21T16:32:49.307

Sql

```
WITH CTE_Category
    AS
    (
      SELECT id, parent_id, name
      , RIGHT(name,CHARINDEX(' ',REVERSE(RTRIM(name)))-1) as ordername
      FROM Category 
    )

    SELECT id, parent_id, name FROM CTE_Category ORDER BY ordername 
```

mysql

```
SELECT id, parent_id, name
FROM Category ORDER BY SUBSTRING_INDEX(name,' ',-1) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-15T07:49:23.407

`ORDER BY name , id`在您的 SQL 查询结束时尝试。

这将按名称排序并使用 id 来解决任何关系。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-02-15T07:52:20.900

```
SELECT * FROM category ORDER BY name, parent_id ASC 
```

# python - 用python写文件

> ID：14890211
> 
> 赞同：0
> 
> 时间：2013-02-15T07:45:21.807
> 
> 标签：python, file, postgresql, csv

我有一种情况，我的脚本解析大约 20000 个条目并将它们保存到 db。我使用了大约需要 35 秒的事务来保存并且还消耗大量内存，因为直到提交的查询被保存在内存中。

我找到了另一种编写 CSV 的方法，然后使用非常快的“copy_from”加载到 postgres。如果有人可以建议我是否应该在开始时打开文件然后在加载到 postgres 时关闭文件或在单个条目准备好写入时打开文件然后关闭。

节省内存利用率的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:47:35.010

减少交易规模？

# java - 如何使用 JDK 1.6 编译兼容 JDBC 3.0 的源代码？

> ID：14890213
> 
> 赞同：4
> 
> 时间：2013-02-15T07:45:24.337
> 
> 标签：java, jdbc

我需要使用 1.6 JDK（包含 JDBC 4.0）编译为 JDBC 3.0 编写的旧库。这是不可能的，因为较新的 JDBC 接口包含 Blob 和与 Clob 相关的方法，因此实现它们的类无法编译。在库中实现新方法不是一种选择。

这可以用 JDK 1.6 完成，还是我需要安装 1.5 JDK？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:15:31.677

您不需要安装 JDK1.5，但您需要 Java 5`rt.jar`并在编译器的 bootclasspath 中指定它：

```
javac -source 1.5 -target 1.5 -bootclasspath /path/to/jre5/lib/rt.jar 
```

否则，您将使用`rt.jar`包含 JDBC 4 接口的 Java6 进行编译，然后编译器将抱怨未实现的方法。使用已编译的 JDBC 3.0 库在 Java 6 下可以正常工作，直到调用 JDBC 4 中添加的方法为止。

# python - 返回数组中子数组的索引

> ID：14890216
> 
> 赞同：7
> 
> 时间：2013-02-15T07:45:42.143
> 
> 标签：python, arrays, numpy

我将 Python 与`numpy`.

我有一个 numpy 数组`may_a`：

```
may_a = numpy.array([False, True, False, True, True, False, True, False, True, True, False]) 
```

我有一个 numpy 数组`may_b`：

```
may_b = numpy.array([False,True,True,False]) 
```

我需要在数组`may_b`中找到数组`may_a`。

在输出中，我需要获取出现的索引。

```
out_index=[2,7] 
```

有人可以建议，**我怎么得到`out_index`？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T08:16:49.153

**编辑**以下代码确实允许执行基于卷积的相等性检查。它映射`True`到`1`和`False`。`-1`它还 reverses `b`，这是它正常工作所必需的：

```
def search(a, b) :
    return np.where(np.round(fftconvolve(a * 2 - 1, (b * 2 - 1)[::-1],
                                         mode='valid') - len(b)) == 0)[0] 
```

`as_strided`我已经检查过它是否提供与各种随机输入的方法相同的输出，确实如此。我也对这两种方法都进行了计时，卷积仅在大约 256 个项目的大型搜索标记中开始获得回报。

* * *

这似乎有点矫枉过正，但您可以使用布尔数据（滥用？）卷积：

```
In [8]: np.where(np.convolve(may_a, may_b.astype(int),
   ...:                      mode='valid') == may_b.sum())[0]
Out[8]: array([2, 7]) 
```

对于较大的数据集，使用它可能会更快`scipy.signal.fftconvolve`：

```
In [13]: np.where(scipy.signal.fftconvolve(may_a, may_b,
   ....:                                   mode='valid') == may_b.sum())[0]
Out[13]: array([2, 7]) 
```

不过你必须小心，因为现在的输出是浮点数，四舍五入可能会破坏相等性检查：

```
In [14]: scipy.signal.fftconvolve(may_a, may_b, mode='valid')
Out[14]: array([ 1.,  1.,  2.,  1.,  1.,  1.,  1.,  2.]) 
```

因此，您可能会更好地使用以下内容：

```
In [15]: np.where(np.round(scipy.signal.fftconvolve(may_a, may_b, mode='valid') -
   ....:                   may_b.sum()) == 0)[0]
Out[15]: array([2, 7]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T08:53:10.200

一种更酷的方法，它可能表现不佳，但适用于任何 dtype，是使用`as_strided`：

```
In [2]: from numpy.lib.stride_tricks import as_strided

In [3]: may_a = numpy.array([False, True, False, True, True, False,
   ...:                      True, False, True, True, False])

In [4]: may_b = numpy.array([False,True,True,False])

In [5]: a = len(may_a)

In [6]: b = len(may_b)

In [7]: a_view = as_strided(may_a, shape=(a - b + 1, b),
   ...:                     strides=(may_a.dtype.itemsize,) * 2)

In [8]: a_view
Out[8]: 
array([[False,  True, False,  True],
       [ True, False,  True,  True],
       [False,  True,  True, False],
       [ True,  True, False,  True],
       [ True, False,  True, False],
       [False,  True, False,  True],
       [ True, False,  True,  True],
       [False,  True,  True, False]], dtype=bool)

In [9]: numpy.where(numpy.all(a_view == may_b, axis=1))[0]
Out[9]: array([2, 7]) 
```

不过你必须小心，因为即使`a_view`是`may_a`'s 数据的视图，当将它与`may_b`临时数组进行比较时，`(a - b + 1) * b`也会创建一个临时数组，这可能是大`a`s 和`b`s 的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T18:07:45.903

这看起来非常类似于[字符串搜索问题](http://en.wikipedia.org/wiki/String_searching_algorithm#Single_pattern_algorithms)。如果你想避免实现这些字符串搜索算法，你可以通过执行以下操作来滥用字符串搜索中内置的 python，这非常快：

```
# I've added [True, True, True] at the end.
may_a = numpy.array([False, True, False, True, True, False, True, False, True, True, False, True, True, True])
may_b = numpy.array([False,True,True,False])

may_a_str = may_a.tostring()
may_b_str = may_b.tostring()

idx = may_a_str.find(may_b_str)
out_index = []
while idx >= 0:
    out_index.append(idx)
    idx = may_a_str.find(may_b_str, idx+1) 
```

这应该适用于布尔数组。如果您想将此方法用于另一种数组类型，则需要确保两个数组的步幅匹配并将 out_index 除以该步幅。

您还可以使用[正则表达式模块](http://docs.python.org/2/library/re.html)而不是循环来进行字符串搜索。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T08:44:52.880

这也应该适用于其他布尔数据：

```
In [1]: import numpy as np

In [2]: a = np.array([False, True, False, True, True, False, True, False, True, True, False])

In [3]: b = np.array([False,True,True,False])

In [4]: def get_indices(a, b):
   ...:     window = len(b)
   ...:     shape = a.shape[:-1] + (a.shape[-1] - window + 1, window)
   ...:     strides = a.strides + (a.strides[-1],)
   ...:     w = np.lib.stride_tricks.as_strided(a, shape=shape, strides=strides)
   ...:     return np.where(np.all(np.equal(w,b),1) == True)[0]

In [5]: get_indices(a,b)
Out[5]: array([2, 7]) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T08:07:09.930

我不确定 numpy 是否为此提供了功能。如果没有，这里有一个解决方案：

```
import numpy

def searchListIndexs(array, target):
    ret = []
    iLimit = len(array)-len(target)+1
    jLimit = len(target)
    for i in range(iLimit):
        for j in range(jLimit):
            if array[i+j] != target[j]:
                break
        else:
            ret.append(i)
    return ret

may_a = numpy.array([False, True, False, True, True, False, True, False, True, True, False])
may_b = numpy.array([False,True,True,False])
out_index = searchListIndexs(may_a, may_b)
print out_index #If you are using Python 3, then use print(out_index) instead. 
```

# objective-c - Xcode 使用 RGB 值更改标签文本颜色

> ID：14890220
> 
> 赞同：3
> 
> 时间：2013-02-15T07:46:09.973
> 
> 标签：objective-c, xcode, cocoa-touch, uilabel

***使用 xCode 4.5.1 界面构建器：***

当我尝试使用 RGB 值更改标签文本的颜色属性时，背景颜色也会自动更改为相同的值。

**换句话说：**

在为标签的文本颜色设置 RGB 值时，除非我们使用滑块，否则背景颜色也会发生变化。

如何确保只有文本的颜色改变而不是背景？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-15T07:48:54.790

`UILabel`类具有属性`textColor`和`backgroundColor`. 你可以操纵它们。

```
label.textColor = [UIColor greenColor];
label.backgroundColor = [UIColor clearColor]; 
```

要通过 Interface Builder 使用它，您应该选择您的标签，然后转到属性检查器。在那里你会找到名为标签的部分。那里有颜色选项卡。它用于文本颜色。在标签部分下面有一个名为视图的部分。它包含名为背景的选项卡。您可以在那里设置背景颜色

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-17T18:38:51.510

首先你需要在 ViewController.h 上创建 3 个 uislider

在 viewController.m

```
-(IBAction)Sliders{

label.textColor = [UIColor ColorWithRed:RSlider.value green:GSlider blue:BSlider alpha:1.0f];

} 
```

连接应为“值已更改”

# vb6 - 为什么即使我更改项目或结果格式，Artinsoft 也会在 % 39 处停止？

> ID：14890226
> 
> 赞同：0
> 
> 时间：2013-02-15T07:46:31.433
> 
> 标签：vb6, vb6-migration

我正在尝试使用 Artinsoft 将 Visual Basic 6 程序转换为 2010 C#。它总是在 %100 预处理百分比和 %39 升级百分比之后停止。我尝试了除 2010 C# 以外的其他输出，例如 2005 Basic、2005 C#，但是这个 %39 没有改变。它从未完成升级过程，它总是在 %39 上停止，当我检查时，我发现它创建了一个不合适的解决方案文件，该文件无法打开（Visual Studio 这么说）。在升级后的文件夹中，我检查了其他一些可能已转换但我找不到的文件。

为了找到转换问题的解决方案，我正在阅读日志文件。每次它抱怨不同的文件（表单文件）。为了取得一些进展，我从我的项目中完全删除了该表单，使其处于可再次编译的状态，然后使用 Artinsoft 再次尝试升级程序。但没有任何改变再次％39 升级结果。我期待至少有些东西应该改变，但没有任何改变。

在转换过程中，我接受默认升级选项，所有引用都已解决。我还能做什么？我正在使用限制为 10000 LOC 的试用版。感谢您的时间。我已经为此苦苦挣扎了一个星期。我需要一些专业的帮助。

F.Ferda Özdemir Sönmez

# dart - 飞镖 oauth 脸书 推特 登录

> ID：14890244
> 
> 赞同：2
> 
> 时间：2013-02-15T07:47:47.387
> 
> 标签：dart, dart-webui

我想为使用 dart 构建的 Web 应用程序启用通过 facebook 登录和通过 twitter 登录。我如何使用 oauth2 包做到这一点？

提前致谢 ！拉文德拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T06:47:47.413

我觉得你最好的选择是使用 js-interop [http://www.dartlang.org/articles/js-dart-interop/与 facebook javascript sdk 完全交互](http://www.dartlang.org/articles/js-dart-interop/)

# c# - throw new System.NotImplementedException() 后代码无法访问；

> ID：14890246
> 
> 赞同：-1
> 
> 时间：2013-02-15T07:48:01.023
> 
> 标签：c#, gtk, warnings

我有一个愚蠢的问题，我在 gtksharp 中使用 monodevelp 是超级菜鸟，我在单击时创建按钮，它将清除输入文本，但 monodevelop 在单击按钮功能内生成：

```
throw new System.NotImplementedException (); 
```

我在它之后写了这段代码：

```
entry1.Text = ""; 
```

当我构建它时，我收到了这个警告：

```
 Warning CS0162: Unreachable code detected (CS0162) 
```

那么代码在没有这个异常的情况下工作意味着什么我想了解警告的意思，如果有人给我一些基本书籍或文档的链接来学习如何处理 gtk# 组件，那真的很有帮助，谢谢你们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T07:50:34.957

当您抛出异常时，程序将停止并且之后的代码将永远不会执行，请删除以下行：

```
throw new System.NotImplementedException (); 
```

[System.Exception](http://msdn.microsoft.com/en-us/library/system.exception.aspx)类的注释为您提供了相当多的基本信息，异常抛出和处理在 .NET 中是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T07:49:49.293

您需要删除该行`throw new System.NotImplementedException ();`，因为您通过将文本设置为空字符串提供了一些实现。

您收到警告的原因：`Unreachable code detected (CS0162)`是因为您在第一行抛出异常，然后将 text 属性设置为空字符串，这将永远不会被执行。就[System.NotImplementedException](http://msdn.microsoft.com/en-us/library/system.notimplementedexception.aspx)而言，它是

> 当请求的方法或操作未实现时引发的异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T07:56:04.697

[抛出异常](http://en.wikipedia.org/wiki/Exception_handling)（即错误）。发生这种情况时，函数返回并在堆栈中查找异常处理程序（try/catch）。如果它找到一个，则处理异常并消失。如果不处理，程序可能不得不退出。

在这种情况下，`throw new System.NotImplementedException ();`真正**的意思是创建并发送名为`System.NotImplementedException()`**. 当这个异常被抛出时，函数返回。所以，它之后什么都不会被调用。这是你错误的根源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T07:49:29.973

从您的方法中删除此字符串：

```
throw new System.NotImplementedException (); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T07:51:08.703

这条线

```
throw new System.NotImplementedException (); 
```

是自动生成的。它告诉开发人员您必须使用实际代码填充该方法，而不是使用自动生成的代码块。只需删除它并实施您的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T07:53:39.513

检测到无法访问的代码意味着您的部分代码不会被执行。

由于您已引发异常，因此控件将在调用堆栈上向下传播到可以处理异常的级别。

# sql - zend 框架 2 SQL 更新和插入受影响的行 (ZF2)

> ID：14890247
> 
> 赞同：0
> 
> 时间：2013-02-15T07:48:02.287
> 
> 标签：sql, insert, zend-framework2, insert-update, error-checking

这是一个简单的问题，但我环顾四周，找不到答案。如何从 ZF2 中的更新/插入 SQL 查询中提取受影响的行数？

以下代码对我来说工作得很好（它确实更新），但我想执行正确的错误检查：

```
public function updateSomeField($id, $some_field){
    $data = array(
        'some_field'  => $some_field
    );

    $sql = new Sql($this->dbAdapter);
    $update = $sql->update();
    $update->table('Table1');
    $update->set($data);
    $update->where(array('id' => $id));
    $statement = $sql->prepareStatementForSqlObject($update);

    // need help with the code below...
    // got this from here:
    // http://stackoverflow.com/questions/11491249/zend-framework-db-update-result
    $result = 0;
    try {
        $result = $statement->execute();        // works fine
    } catch (\Exception $e) {
        die('Error: ' . $e->getMessage());
    }
    if (empty($result)) {                       // not sure if this is applicable??
        die('Zero rows affected');
    }

    return $result;                             // ideally, I'd like to return $numRows
} 
```

目前，成功时，$result 是一个对象。我试图对它进行 vardump，但它没有显示值。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:00:36.740

你有没有尝试过：

```
if ( $result->count() === 0 ) {
  die('Zero rows affected');
} 
```

? 据我记得，它计算了任何可数的东西，包括affected_rows。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-08T09:54:07.787

这是作为答案的运行代码（因为它比在评论中更容易找到）

```
try {
    $affectedRows = $statement->execute()->getAffectedRows();
} catch (\Exception $e) {
    die('Error: ' . $e->getMessage());
}
if (empty($affectedRows)) {
    die('Zero rows affected');
}

return $affectedRows; 
```

# matlab - MATLAB如何向量化这个while循环

> ID：14890248
> 
> 赞同：1
> 
> 时间：2013-02-15T07:48:27.643
> 
> 标签：matlab, matrix, while-loop, vectorization

所以这里的想法是将数据读入矩阵，然后通过删除多余的列或行使该矩阵成为方阵，但向量化，根本不使用任何循环，也不使用 if/else。这可能吗？

这就是我使用循环和 if/else 完成的方式

```
load file.dat
r = num2str(size('file',1))
c = num2str(size('file',2))
while (r~=c) 
    if (r>c)
        r--
    else (c>r)
        c--
end
res = file(1:r,1:c)
save('squarefile.dat', 'res', '-ascii') 
```

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T07:54:19.737

给定一个`A`nxm 大的矩阵，我们将`B`通过从以下位置删除多余的列或行（取决于哪个维度更大）来创建一个方阵矩阵`A`：

```
B=A(1:min(size(A)),1:min(size(A))); 
```

顺便说一句，这行也可以写成`A=A(1:min(size(A)),...)`好像要覆盖`A`和删除多余的信息...

# iphone - 苹果付费申请机制

> ID：14890250
> 
> 赞同：1
> 
> 时间：2013-02-15T07:48:51.313
> 
> 标签：iphone, ipad, app-store

我知道这是一个愚蠢的问题，但我只想知道它。

iPhone 付费应用程序是如何工作的？

例如 - ：如果我下载了一个付费应用程序表格苹果商店比一年后我们需要重新下载该应用程序还是我会继续原样？

请帮助我理解这件事。

感谢您的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:57:54.323

不，您没有再次重新下载您的应用程序，除非您从设备中删除它，否则它会在那里，但是如果您再次下载，如果使用相同的 Apple ID 下载它，它将被下载而无需支付任何费用。

# java - 如何使用 XmlPullParser 解析复杂的 XML

> ID：14890252
> 
> 赞同：0
> 
> 时间：2013-02-15T07:48:51.893
> 
> 标签：java, android, parsing, xml-parsing, xmlpullparser

大家好，我对 xml 解析有疑问。我正在尝试使用 XmlPullParser 进行解析

XML 看起来像：

```
<lfm status="ok">
    <topartists user="dailz" type="overall" page="1" perPage="50" totalPages="30" total="1493">
        <artist rank="1">
            <name>Oasis</name>
            <url>http://www.last.fm/music/Oasis</url>
            <image size="small">http://userserve-ak.last.fm/serve/34/44937531.jpg</image>
            <image size="large">http://userserve-ak.last.fm/serve/126/44937531.jpg</image>
        </artist>
        <artist rank="2">
            ...
        </artist>
    </topartists>
</lfm> 
```

这就是我想要做的：

```
public class TopArtistsParser {

    private static final String ns = null;
    private static final String TAG = "TopArtistsParser";

    public class Artist {

        public final String rank;
        public final String name;
        public final String url;
        public final String image;

        private Artist(String rank, String name, String url, String image) {
            this.rank = rank;
            this.name = name;
            this.url = url;
            this.image = image;
        }

    }

    public List<Artist> parse(InputStream in) throws XmlPullParserException,
            IOException {
        MyLog.d(TAG, "List<Artist> parse");
        try {
            XmlPullParser parser = Xml.newPullParser();
            parser.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES, false);
            parser.setInput(in, null);
            parser.nextTag();
            return readFeed(parser);
        } finally {
            in.close();
        }
    }

    private List<Artist> readFeed(XmlPullParser parser)
            throws XmlPullParserException, IOException {

        MyLog.d(TAG, "List<Artist> readFeed");
        List<Artist> artistsList = new ArrayList<Artist>();

        parser.require(XmlPullParser.START_TAG, ns, "lfm");
        while (parser.next() != XmlPullParser.END_TAG) {
            if (parser.getEventType() != XmlPullParser.START_TAG) {
                continue;
            }
            String tag = parser.getName();
            if (tag.equals("artist")) {
                MyLog.d(TAG, "tag == 'artist'");
                artistsList.add(readArtist(parser));
            } else {
                skip(parser);
            }
        }

        return artistsList;
    }

    private Artist readArtist(XmlPullParser parser)
            throws XmlPullParserException, IOException {

        MyLog.d(TAG, "Artist readArtist");
        parser.require(XmlPullParser.START_TAG, ns, "artist");

        String rank = null;
        String name = null;
        String url = null;
        String image = null;

        while (parser.next() != XmlPullParser.END_TAG) {
            if (parser.getEventType() != XmlPullParser.START_TAG) {
                continue;
            }
            String tag = parser.getName();
            if (tag.equals("name")) {
                name = readName(parser);
                MyLog.d(TAG, "tag == 'name': " + name);
            } else if (tag.equals("url")) {
                url = readUrl(parser);
                MyLog.d(TAG, "tag == 'url': " + url);
            } else if (tag.equals("image")) {
                image = readImage(parser);
                MyLog.d(TAG, "tag == 'image': " + image);
            } else {
                skip(parser);
            }
        }

        return new Artist(rank, name, url, image);
    }

    private String readName(XmlPullParser parser) throws IOException,
            XmlPullParserException {
        MyLog.d(TAG, "readName");
        parser.require(XmlPullParser.START_TAG, ns, "name");
        String name = readText(parser);
        parser.require(XmlPullParser.END_TAG, ns, "name");
        return name;
    }

    private String readUrl(XmlPullParser parser) throws IOException,
            XmlPullParserException {
        MyLog.d(TAG, "readUrl");
        parser.require(XmlPullParser.START_TAG, ns, "url");
        String url = readText(parser);
        parser.require(XmlPullParser.END_TAG, ns, "url");
        return url;
    }

    private String readImage(XmlPullParser parser) throws IOException,
            XmlPullParserException {
        MyLog.d(TAG, "readImage");
        parser.require(XmlPullParser.START_TAG, ns, "image");
        String image = readText(parser);
        parser.require(XmlPullParser.END_TAG, ns, "image");
        return image;
    }

    private String readText(XmlPullParser parser) throws IOException,
            XmlPullParserException {
        MyLog.d(TAG, "readText");
        String result = "";
        if (parser.next() == XmlPullParser.TEXT) {
            result = parser.getText();
            parser.nextTag();
        }
        return result;
    }

    private void skip(XmlPullParser parser) throws XmlPullParserException,
            IOException {

        MyLog.d(TAG, "skip");

        if (parser.getEventType() != XmlPullParser.START_TAG) {
            throw new IllegalStateException();
        }
        int depth = 1;
        while (depth != 0) {
            switch (parser.next()) {
            case XmlPullParser.END_TAG:
                depth--;
                break;
            case XmlPullParser.START_TAG:
                depth++;
                break;
            }
        }
    }
} 
```

我看了[Parsing XML Data](http://developer.android.com/training/basics/network-ops/xml.html)但它没有帮助我。

你能帮我解析一下：rank、name、url、image（size large）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:57:37.387

我添加此代码并且所有工作

```
<!-- language: java -->

while (parser.next() != XmlPullParser.END_TAG) {
        if (parser.getEventType() != XmlPullParser.START_TAG) {
            continue;
        }
        String tag = parser.getName();
        if (tag.equals("topartists")) {
            MyLog.d(TAG, "tag == " + tag);
            tag = parser.getName();

        } else if (tag.equals("artist")) {
            MyLog.d(TAG, "tag == " + tag);
            artistsList.add(readArtist(parser));
        } else {
            skip(parser);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T08:11:41.497

我会向您推荐[SimpleXML](http://simple.sourceforge.net/)来解析更复杂的 XML 数据或只使用[XPath](http://developer.android.com/reference/javax/xml/xpath/package-summary.html)

# python - 姜戈： 不是 JSON 可序列化的

> ID：14890263
> 
> 赞同：10
> 
> 时间：2013-02-15T07:49:45.710
> 
> 标签：python, django, serialization

我在 django 序列化中遇到问题

这是我的国家模型

```
class State(models.Model):
    class Translation(translation.Translation):
        name = models.CharField(max_length=64)

    capital     = models.ForeignKey('City', related_name="state_capital", null=True)
    country     = models.ForeignKey(Country, related_name="state_country", null=True)
    latitude    = models.DecimalField(max_digits=9, decimal_places=6, default=Decimal("0.0"))
    longitude   = models.DecimalField(max_digits=9, decimal_places=6, default=Decimal("0.0"))
    code        = models.CharField(max_length=2) 
```

基于county_id，我正在过滤州名并尝试转换为json格式，以便我可以更新选择框。

但我正在这样做。

```
<django.utils.functional.__proxy__ object at 0x7feaac2761d0> is not JSON serializable 
```

以下是我的看法。

```
def get_getstate(request):
    catid = request.GET['catid']
    get_related_subcategory = State.objects.filter(country_id = catid)

    json_models = serializers.serialize("json", get_related_subcategory)
    return HttpResponse(json_models, mimetype="application/javascript") 
```

请帮我解决这个错误。

**更新**

我也试过这样

```
from django.core.serializers.json import Serializer as JSONSerializer
import decimal
import json
class DecimalEncoder(json.JSONEncoder):
    def default(self, obj):
        if isinstance(obj, decimal.Decimal):
            return '%.2f' % obj # Display Decimal obj as float
        return json.JSONEncoder.default(self, obj)

class DecimalSerializer(JSONSerializer):
    def end_serialization(self):
        self.options.pop('stream', None)
        self.options.pop('fields', None)
        json.dump(self.objects, self.stream, cls=DecimalEncoder, **self.options) 
```

有了这个观点

```
def get_getstate(request):
    catid = request.GET['catid']
    get_related_subcategory = State.objects.filter(country_id = catid)
    my_serializer = DecimalSerializer()
    print my_serializer.serialize(get_related_subcategory, indent=4) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-14T19:55:21.313

`django.utils.functional.__proxy__`object 是一个惰性翻译。Django 文档说，使用惰性翻译作为参数调用 unicode() 将在当前语言环境（[https://docs.djangoproject.com/en/dev/ref/unicode/#translated-strings](https://docs.djangoproject.com/en/dev/ref/unicode/#translated-strings)）中生成一个 Unicode 字符串。翻译完成后，序列化更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:48:23.147

如果您运行的是旧版本，`django`则无法`QuerySets`开箱即用地序列化。尝试

```
json_models = serializers.serialize("json", list(get_related_subcategory)) 
```

也可能值得检查它`get_related_subcategory`是否为空。`django`你运行的是哪个版本？

# javascript - 播放新视频时停止所有视频

> ID：14890267
> 
> 赞同：7
> 
> 时间：2013-02-15T07:50:00.147
> 
> 标签：javascript, api, youtube, youtube-api

我需要一些有关 Youtube API 和嵌入视频的帮助。当单击新的 youtube 视频时，我想停止在当前页面上运行的所有 iframe 视频（这里我只拍摄了 3 个，但有几个视频）。在某个时间点，只能运行一个 iframe youtube 视频。我已经浏览了文档 [https://developers.google.com/youtube/js_api_reference][1] 并且能够写到这里......

更新：

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script type="text/javascript" src="http://www.youtube.com/player_api"></script>
        <script type="text/javascript">
            var player;
             function onYouTubeIframeAPIReady() {
                player = new YT.Player('player', {
                    events: {
                        'onReady': onPlayerReady,
                        'onStateChange': onPlayerStateChange
                    }
                });
            }

            var done = false;
              function onPlayerStateChange(event) {
                if (event.data == YT.PlayerState.PLAYING && !done) {
                    alert("hi5");
                    player1.stopVideo();
                    player2.stopVideo();
                    done = true;
                }
               }
        </script>
    </head>
    <body>
        <div>TODO write content</div>
        <ul class="image-grid" id="list"> 
            <li>
                <iframe id="player" width="385" height="230" src="http://www.youtube.com/embed/erDxb4IkgjM?rel=0&wmode=Opaque&enablejsapi=1;showinfo=0;controls=0" frameborder="0" allowfullscreen></iframe> 
            </li>
            <li>
                <iframe id="player1" width="385" height="230" src="http://www.youtube.com/embed/wSrA5iQGlDc?rel=0&wmode=Opaque&enablejsapi=1;showinfo=0;controls=0" frameborder="0" allowfullscreen></iframe>
            </li>
            <li>
                <iframe id="player2" width="385" height="230" src="http://www.youtube.com/embed/c7b_WLkztXc?rel=0&wmode=Opaque&enablejsapi=1;showinfo=0;controls=0" frameborder="0" allowfullscreen></iframe>
            </li>
        </ul>
    </body>
</html> 
```

更新

1.  onStateChange 事件没有被触发（工作）
2.  在这个例子中，我有 3 个视频，实际上它有更多视频，而不是为每个视频编写 onPlayerStateChange。是否可以为所有视频使用数组。在函数 onPlayerStateChange 中，编写 player[].stopVideo( ) 和 this.playvideo().. 这类东西..（需要帮助）请看这个小提琴[http://jsfiddle.net/LakshmiV/kn5Sf/](http://jsfiddle.net/LakshmiV/kn5Sf/) 请帮忙。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T07:55:58.313

你可以做这样的事情......

给每个 iframe 一个类，以便它可以被识别为 youtube 播放器的 iframe。在这里，我给了“yt_players”

现在您可以使用以下代码...

```
<script type="text/javascript">
    players = new Array();

    function onYouTubeIframeAPIReady() {
        var temp = $("iframe.yt_players");
        for (var i = 0; i < temp.length; i++) {
            var t = new YT.Player($(temp[i]).attr('id'), {
                events: {
                    'onStateChange': onPlayerStateChange
                }
            });
            players.push(t);
        }
    }
    onYouTubeIframeAPIReady();

    function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING) {
            var temp = event.target.a.src;
            var tempPlayers = $("iframe.yt_players");
            for (var i = 0; i < players.length; i++) {
                if (players[i].a.src != temp) 
                    players[i].stopVideo();
            }
        }
    }
</script> 
```

已更新代码...这应该对您有所帮助。

在这里看到它...... [http://jsfiddle.net/anubhavranjan/Y8P7y/](http://jsfiddle.net/anubhavranjan/Y8P7y/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-11T00:22:15.350

[Coby在](https://stackoverflow.com/users/1694854/coby)[https://stackoverflow.com/a/13260520/835822](https://stackoverflow.com/a/13260520/835822)上对类似问题的出色回答

使用[属性选择器](http://css-tricks.com/attribute-selectors/)，您可以定位来自 Youtube 的任何 iframe，然后使用[jQuery 的 each](http://api.jquery.com/jquery.each/)，您可以遍历所有 iframe。

```
$(function(){
  $('iframe[src*="http://www.youtube.com/embed/"]').each(function(i) {
  this.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
}); 
```

});

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-16T12:35:11.487

好概念，但 event.target.a.src 不起作用！将其更改为 event.target.getVideoUrl() 并且工作正常。在这里查看

```
function onPlayerStateChange(event) {

if (event.data == YT.PlayerState.PLAYING) {
    var temp = event.target.getVideoUrl();
    var tempPlayers = $("iframe.yt_players");
    for (var i = 0; i < players.length; i++) {
        if (players[i].getVideoUrl() != temp) players[i].stopVideo();

    }
} 
```

}

[http://jsfiddle.net/Y8P7y/82/](http://jsfiddle.net/Y8P7y/82/)

# java - CardLayout 在调用 next() 时不切换面板

> ID：14890269
> 
> 赞同：1
> 
> 时间：2013-02-15T07:50:08.220
> 
> 标签：java, swing, jpanel, cardlayout, itemlistener

这是我从 Oracle 的 Java 教程网站获得的示例演示程序。最初该方法`itemStateChanged()`是这样实现的：

```
public void itemStateChanged(ItemEvent evt) {
    CardLayout cl = (CardLayout)(cards.getLayout());
    cl.show(cards, (String)evt.getItem());
} 
```

我把它改成这样：

```
public void itemStateChanged(ItemEvent evt) {
    CardLayout cl = (CardLayout)(cards.getLayout());
    cl.next(cards);
} 
```

根据 JavaDoc API， next() 方法应该翻转面板，但它没有发生。这是完整的代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class CardLayoutDemo implements ItemListener {
    JPanel cards; //a panel that uses CardLayout
    final static String BUTTONPANEL = "Card with JButtons";
    final static String TEXTPANEL = "Card with JTextField";

    public void addComponentToPane(Container pane) {
        //Put the JComboBox in a JPanel to get a nicer look.
        JPanel comboBoxPane = new JPanel(); //use FlowLayout
        String comboBoxItems[] = { BUTTONPANEL, TEXTPANEL };
        JComboBox cb = new JComboBox(comboBoxItems);
        cb.setEditable(false);
        cb.addItemListener(this);
        comboBoxPane.add(cb);

        //Create the "cards".
        JPanel card1 = new JPanel();
        card1.add(new JButton("Button 1"));
        card1.add(new JButton("Button 2"));
        card1.add(new JButton("Button 3"));

        JPanel card2 = new JPanel();
        card2.add(new JTextField("TextField", 20));

        //Create the panel that contains the "cards".
        CardLayout cl = new CardLayout();
        cards = new JPanel(cl);
        cards.add(card1, BUTTONPANEL);
        cards.add(card2, TEXTPANEL);
        cl.show(cards, BUTTONPANEL);

        pane.add(comboBoxPane, BorderLayout.PAGE_START);
        pane.add(cards, BorderLayout.CENTER);
    }

    public void itemStateChanged(ItemEvent evt) {
        CardLayout cl = (CardLayout)(cards.getLayout());
        cl.next(cards);
    }

    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the
     * event dispatch thread.
     */
    private static void createAndShowGUI() {
        //Create and set up the window.
        JFrame frame = new JFrame("CardLayoutDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create and set up the content pane.
        CardLayoutDemo demo = new CardLayoutDemo();
        demo.addComponentToPane(frame.getContentPane());

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        /* Use an appropriate Look and Feel */
        try {
            //UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
            UIManager.setLookAndFeel("javax.swing.plaf.metal.MetalLookAndFeel");
        } catch (UnsupportedLookAndFeelException ex) {
            ex.printStackTrace();
        } catch (IllegalAccessException ex) {
            ex.printStackTrace();
        } catch (InstantiationException ex) {
            ex.printStackTrace();
        } catch (ClassNotFoundException ex) {
            ex.printStackTrace();
        }
        /* Turn off metal's use of bold fonts */
        UIManager.put("swing.boldMetal", Boolean.FALSE);

        //Schedule a job for the event dispatch thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

原始代码在这里：[CardLayoutDemo.java](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/layout/CardLayoutDemoProject/src/layout/CardLayoutDemo.java)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T08:08:45.033

您的`itemStateChanged`事件实际上被调用了两次（这是正常行为），因此布局管理器从您当前的窗格切换到下一个，然后再到下一个（这是原始的）。

您应该改用 an `ActionListener`。

# anchor - 对于可访问性，当 css 被禁用时，'title' 属性是否会充当具有背景图像的锚链接的标识符？

> ID：14890278
> 
> 赞同：0
> 
> 时间：2013-02-15T07:51:19.843
> 
> 标签：anchor, background-image, accessibility, title, css-sprites

说，

```
<a href="#somelink" id="someID" onclick="searchValue();" class="someClass" title="My Search">
</a>

<style>
someClass{
  background: url("someimage.png") no-repeat scroll 0 0 transparent;
  border: 0 none;
  cursor: pointer;
  float: right;
  height: 27px;
  padding-left: 5px;
  width: 27px;
}
</style> 
```

* * *

当 CSS 被禁用时，页面还会显示标题吗？如果不是这个问题的解决方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T13:17:23.750

不`title`，当 CSS 被禁用时，根本不会显示。某些辅助技术在某些情况下不会读取或授予用户访问权限。简而言之，不要使用`title`.

正确的方法是：

```
<a href=".."><img src="image" alt="Search"></a> 
```

即使 CSS 关闭，这仍然有效。如果图像由于某种原因无法加载，它会说搜索仍然 - 就像您的目标一样。

根据您的[评论](https://stackoverflow.com/questions/14890278/for-accessibility-will-the-title-attribute-act-an-identifier-for-an-anchor-li#comment21028865_14895629)，如果您想为页面的一部分提供更多上下文，而不是：

```
 <div title="Some instructions  here">.......</div> 
```

你应该做：

```
<div aria-describedby="instID">
<p class="hidden" id="instID>Some instructions</p>
  .... 
</div> 
```

哪里`.hidden`是：

```
.hidden {
 position: absolute;
 top: 0;
 left: -999px;
} 
```

# java - 设置 SpriteBatch 颜色（用于着色）影响所有绘图

> ID：14890280
> 
> 赞同：6
> 
> 时间：2013-02-15T07:51:44.243
> 
> 标签：java, sprite, libgdx, tint, spritebatch

我创建了一个`AnimatedSprite`类，它绘制了一个特定的`TextureRegion`. 有时我需要一个 tint 颜色效果，所以我设置（this.color 是`Color`my 的一个字段`AnimatedSprite`）：

```
super.draw(batch, parentAlpha);

batch.setColor(this.color);
batch.draw(this.frames[this.currentFrame], x, y, originX, originY, width, height, scaleX, scaleY, rotation)
batch.setColor(Color.WHITE); 
```

但是，当我将`AnimatedSprite`的颜色设置为黑色或任何颜色时，其他所有颜色都具有该颜色。我什至尝试`flush()`，结束批次并开始一个新的，等等......但似乎没有任何效果。

请帮我正确应用色调效果。我会很感激任何想法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T15:08:13.527

当心共享可变[`Color`](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/graphics/Color.html)对象！如果你这样做：

```
this.color = Color.WHITE; 
```

然后再变异`this.color`，你会变异`Color.WHITE`，这通常是错误的！:)

`Color`在构造要变异的对象时始终制作副本：

```
this.color = new Color(Color.WHITE); 
```

libGDX 中的许多对象都是这样可变的（而常规 Java 库中的类似对象将是不可变的），因为 libGDX （理所当然地）非常关心 GC 开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-13T22:54:51.533

而不是使用

```
this.color = new Color(Color.WHITE); 
```

你可以使用：

```
batch.setColor(Color.WHITE.tmp()); 
```

这将创建一个白色的临时副本，对我来说似乎更干净。

# c++ - 浮点计算给出的结果与浮点数不同

> ID：14890283
> 
> 赞同：4
> 
> 时间：2013-02-15T07:51:47.580
> 
> 标签：c++, floating-point, double, floating-accuracy

我有以下代码行。

```
hero->onBeingHit(ENEMY_ATTACK_POINT * (1.0 - hero->getDefensePercent())); 
```

*   `void onBeingHit(int decHP)`方法接受整数并更新健康点。
*   `float getDefensePercent()`方法是返回英雄防御百分比的getter方法。
*   `ENEMY_ATTACK_POINT`是一个宏常数因子，定义为`#define ENEMY_ATTACK_POINT 20`。

假设`hero->getDefensePercent()`返回`0.1`。所以计算是

```
20 * (1.0 - 0.1)  =  20 * (0.9)  =  18 
```

每当我尝试使用以下代码时（不`f`附加`1.0`）

```
hero->onBeingHit(ENEMY_ATTACK_POINT * (1.0 - hero->getDefensePercent())); 
```

我得到了**17**。

但是对于以下代码（`f`附加在之后`1.0`）

```
hero->onBeingHit(ENEMY_ATTACK_POINT * (1.0f - hero->getDefensePercent())); 
```

我得到了**18**。

这是怎么回事？`f`尽管`hero->getDefensePercent()`已经处于浮动状态，但是否具有重要意义？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T08:00:17.937

**这是怎么回事？为什么在这两种情况下都不是整数结果`18`？**

问题是浮点表达式的结果在转换为整数值时会朝零舍入（在这两种情况下）。

`0.1`不能完全表示为浮点值（在这两种情况下）。编译器将转换为二进制 IEEE754 浮点数，并决定是向上还是向下舍入到可表示的值。然后处理器在运行时乘以这个值，结果被四舍五入得到一个整数值。

**好的，但是既然两者都`double`表现`float`得像那样，为什么我会`18`陷入这两种情况中的一种，而`17`在另一种情况下呢？我很困惑。**

您的代码获取函数的结果`0.1f`（浮点数），然后计算`20 * (1.0 - 0.1f)`哪个是双精度表达式，而哪个是`20 * (1.0f - 0.1f)`浮点表达式。现在 float 版本恰好略大于`18.0`并向下舍入为`18`，而 double 表达式略小于`18.0`并向下舍入为`17`。

如果您不确切知道 IEEE754 二进制浮点数是如何从十进制数构造的，那么如果它略小于或略大于您在代码中输入的十进制数，那么它几乎是随机的。所以你不应该指望这个。不要试图通过附加`f`到其中一个数字并说“现在它可以工作，所以我把它`f`留在那里”来解决这样的问题，因为另一个值的行为再次不同。

**为什么表达式的类型取决于 this 的出现`f`？**

这是因为 C 和 C++ 中的浮点字面量是`double`默认类型的。如果添加`f`，它是一个浮点数。浮点表达式的结果属于“更大”类型。双精度表达式和整数的结果仍然是双精度表达式，而 int 和浮点数将是浮点数。所以你的表达式的结果是浮点数或双精度数。

**好的，但我不想四舍五入为零。我想四舍五入到最接近的数字。**

要解决此问题，请在将结果转换为整数之前将其添加一半：

```
hero->onBeingHit(ENEMY_ATTACK_POINT * (1.0 - hero->getDefensePercent()) + 0.5); 
```

在 C++11 中，有[`std::round()`](http://en.cppreference.com/w/cpp/numeric/math/round)这样的功能。在标准的早期版本中，[没有这样的函数来四舍五入到最接近的整数。](https://stackoverflow.com/questions/485525/round-for-float-in-c)（详情请看评论。）

如果没有`std::round`，可以自己写。处理负数时要小心。转换为整数时，数字将被*截断*（向零舍入），这意味着负值将向上舍入，而不是向下舍入。所以如果数字是负数，我们必须*减去*一半：

```
int round(double x) {
    return (x < 0.0) ? (x - .5) : (x + .5);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T07:55:38.590

1.0 被解释为双精度，而 1.0f 被编译器视为浮点数。

f 后缀只是告诉编译器哪个是浮点数，哪个是双精度数。

顾名思义，双精度数是浮点数的 2 倍。通常，双精度具有 15 到 16 位十进制数字，而浮点只有 7。

这种精度损失可能导致截断错误更容易上浮

[请参阅 MSDN (C++)](http://msdn.microsoft.com/en-us/library/cc953fe1%28v=VS.100%29.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-15T08:00:03.980

发生这种情况的原因是使用时更精确的结果`double`，即`1.0`。

尝试四舍五入你的结果，这将导致转换后更精确的积分结果：

```
hero->onBeingHit(ENEMY_ATTACK_POINT * (1.0 - hero->getDefensePercent()) + 0.5); 
```

请注意，在它之后添加`0.5`和截断`int`会导致结果四舍五入，因此当您的结果为`17.999...`时，它将变为`18.499...`，这将被截断为`18`

# java - Java Applet 加载（滞后）

> ID：14890284
> 
> 赞同：1
> 
> 时间：2013-02-15T07:51:52.887
> 
> 标签：java, html, applet

我创建了一个 Java 小程序和一些 HTML 代码来使用对象标记加载它。但是，我遇到的问题是，当用户单击按钮时调用小程序时，会有 1 到 3 秒的延迟，此时您无法单击页面上的任何内容并且页面冻结。这对于加载 Java 小程序是否正常？Java 小程序在加载时通​​常会像这样延迟几秒钟。有没有办法让网页在 Java 应用程序在后台运行时正常运行？

# python - else 语句不起作用。什么都没有输入时如何关闭循环？

> ID：14890285
> 
> 赞同：1
> 
> 时间：2013-02-15T07:51:56.960
> 
> 标签：python

else 语句不起作用。什么都没有输入时如何关闭循环？关于如何处理的建议？

```
def main():
    print "~*~*~*~*~*~ Timbuktu Archery Contest ~*~*~*~*~*~"
    archerList = [] #list
    timeList = [] #list2
    name = raw_input ("Enter contestants first name: ")
    s = str(name)
    archerList.append(name)
    while name > 0:
        time = raw_input ("Enter time (in milliseconds) for %s: " % s)
        timeList.append(time)
        name = raw_input ("Enter contestants first name: ")
        s = str(name)
        archerList.append(name)
    else:
        name == ""
        print "Slowest archer was " , min(timeList)
        print "Fastest archer was " , max(timeList) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:58:06.717

循环直到给出一个空名称：

```
while name: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:13:49.487

如果没有输入任何内容，则可以使用此 if-else 构造退出循环

```
if (name==''):
    break
else:
    <job to be done> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:00:16.933

你需要这个：

```
while len(name) > 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T13:00:13.363

这更像是pythonic。DRY = 不要重复自己。

```
def main():
    print "~*~*~*~*~*~ Timbuktu Archery Contest ~*~*~*~*~*~"
    min = max = 0
    while True:
        name = raw_input ("Enter contestants first name: ")
        if not name:
            break
        start = raw_input ("Enter time (in milliseconds) for %s: " % name)
        min = start if start < min else min
        max = start if start > max else max
    print "Slowest archer was %i" % min
    print "Fastest archer was %i" % max 
```

需要考虑的要点：

*   我删除`archerList`了，因为您没有在代码中从中获取值
*   如果弓箭手达到相同的时间会发生什么？
*   `"slowest archer was..."`实际上告诉我们射手最慢的时间，而不是他们的名字

# html - 向左浮动的行为就像向右浮动

> ID：14890288
> 
> 赞同：0
> 
> 时间：2013-02-15T07:52:16.943
> 
> 标签：html, css

我正在浮动一堆我想出现在画廊中的图像。它们应该只出现在整齐的行中。它们的大小都一样，所以我想我可以通过将 ul 的所有 li 向左浮动并将它们设置为 " `display: block;`."来做到这一点。

相反，他们这样做： http: [//packardcarbs.myshopify.com/products/standard-8-1929-1931](http://packardcarbs.myshopify.com/products/standard-8-1929-1931)

密码是“ataska”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:56:19.670

并非所有图像的高度都相同。在第一行中，您的第一个图像是 149 像素高，接下来的两个是 146 像素高。因此，当您分解到下一行时，图像将从原始第一张图像的左侧向上 3 像素开始。如果您希望它们在一个漂亮的网格中正确排列，您需要确保它们都具有相同的高度。

将 a`height: 160px`应用于所有列表项可以解决问题（您的最高图像是 160 像素高）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:55:23.197

我删除了 margin-right: 20 并且排列得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T07:56:49.743

删除边距，它会排成一行......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T08:01:27.123

`ul`发生这种情况是因为您向右添加了边距，然后第 4 个项目不适合`margin:0`. 或者只是减少`margin-right:15px`它会适合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T08:31:13.660

从我看到你也可以这样做：

```
ul#thumbs li a {
   display:block;
   width:160px;
   height:160px;
   overflow:hidden;
} 
```

这样，无论高度如何，图像都会对齐（如果高于 ，其中一部分将被隐藏`160px;`）

此外，您有一个`margin-right`of元素`12.5px`。`li`（使用它不太好），您可以`15 px`毫无问题地制作它。

# ruby-on-rails - 如何在 Rails 中的 Web 请求中对长进程进行子线程处理

> ID：14890293
> 
> 赞同：2
> 
> 时间：2013-02-15T07:52:38.353
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个从其他网站提取数据的功能，最多需要 30 秒才能完成。我需要这个函数来执行来自用户的网络请求，但不希望他等待那个时间。

目前该方法是从我的视图控制器中调用的。

我怎样才能让该方法在他自己的时间执行而不是让用户等待？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:18:07.360

您需要有一个处理这些请求的后台代理。我最近使用 beaneater gem 和 beanstalkd 为消息队列实现了类似的东西。我使用God Gem 来管理那个后台进程，并编写了一个init 脚本来管理God 进程。页面中的 JavaScript 每 1.5 秒进行一次 AJAX 调用，以查询请求的状态并在完成时告诉用户。

后来我了解到，众所周知，God 有内存泄漏，所以 Bluepill 可能是一个更好的选择。就在今天，我还发现[http://michaelvanrooijen.com/articles/2011/06/08-managing-and-monitoring-your-ruby-application-with-foreman-and-upstart/](http://michaelvanrooijen.com/articles/2011/06/08-managing-and-monitoring-your-ruby-application-with-foreman-and-upstart/)描述了使用 Foreman 和 Upstart 作为背景过程，这似乎是一种更直接和更强大的方法。下次我需要做这种事情时，我可能会尝试 Foreman/Upstart/beaneater/beanstalkd。

请注意，有许多不同的消息队列可供选择，它们具有不同的优势和劣势。beanstalkd 响应速度非常快，非常适合运行需要几分钟或更短时间的进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:46:15.113

如果您要向用户显示的响应不取决于您的长流程的结果，那么您需要做的就是在与主请求不同的线程中执行该流程。

您当然可以采用 Steve 的方法并使用处理队列（delayed_job、sidekiq、resque），但这听起来有点矫枉过正。您可以简单地分叉一个新的[子](http://ruby-doc.org/core-1.9.3/Process.html#method-c-fork)进程并将其分离或分叉一个新[线程](http://www.ruby-doc.org/core-1.9.3/Thread.html#method-c-fork)

```
pid = Process.fork do 
  long_process
end
Process.detach pid 
```

# c# - 从另一个线程更新标签

> ID：14890295
> 
> 赞同：21
> 
> 时间：2013-02-15T07:52:40.627
> 
> 标签：c#, multithreading, winforms

我使用另一个类中的线程编写来更新标签。标签是 Winform Main 类中的内容。

```
 Scanner scanner = new Scanner(ref lblCont);
 scanner.ListaFile = this.listFiles;
 Thread trd = new Thread(new ThreadStart(scanner.automaticScanner));
 trd.IsBackground = true;
 trd.Start();
 while (!trd.IsAlive) ;
 trd.Join(); 
```

你怎么看，我将标签的引用传递给第二类的构造函数。在第二个类（扫描仪）中，我有一个名为“自动扫描仪”的方法，它应该使用以下代码更新标签：

```
public Scanner(ref ToolStripStatusLabel _lblContatore)
{
        lblCounter= _lblContatore;
}
Thread threadUpdateCounter = new Thread(new ThreadStart(this.UpdateCounter));
threadUpdateCounter.IsBackground = true;
threadUpdateCounter.Start();
while (!threadUpdateCounter .IsAlive) ;
threadUpdateCounter.Join();

private void AggiornaContatore()
{
  this.lblCounter.Text = this.index.ToString();        
} 
```

我在更新标签时收到此错误：

> 跨线程操作无效：从创建它的线程以外的线程访问的控件“主”

我将 .net 4 与 Winform C# 一起使用。

非常感谢您的回答。

新闻：问题是这一行：

```
trd.Join(); 
```

此行阻止了我的 GUI，并且标签未更新。有什么方法可以控制线程的结束并更新标签直到结束？谢谢

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-15T07:56:10.027

您不能从 UI 线程以外的任何其他线程更新 UI。使用它来更新 UI 线程上的线程。

```
 private void AggiornaContatore()
 {         
     if(this.lblCounter.InvokeRequired)
     {
         this.lblCounter.BeginInvoke((MethodInvoker) delegate() {this.lblCounter.Text = this.index.ToString(); ;});    
     }
     else
     {
         this.lblCounter.Text = this.index.ToString(); ;
     }
 } 
```

请阅读本章以及本书中的更多内容，以获得有关线程的清晰图片：

[http://www.albahari.com/threading/part2.aspx#_Rich_Client_Applications](http://www.albahari.com/threading/part2.aspx#_Rich_Client_Applications)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-15T07:55:02.487

使用[MethodInvoker](http://msdn.microsoft.com/en-us/library/system.windows.forms.methodinvoker.aspx)更新其他线程中的标签文本。

```
private void AggiornaContatore()
{
    MethodInvoker inv = delegate 
    {
      this.lblCounter.Text = this.index.ToString(); 
    }

 this.Invoke(inv);
} 
```

您收到错误是因为您的 UI 线程持有标签，并且由于您尝试通过另一个线程更新它，您会遇到跨线程异常。

您可能还会看到：[Windows 窗体中的线程](http://www.yoda.arachsys.com/csharp/threads/winforms.shtml)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T07:55:59.563

只需使用[Control.Invoke 方法](http://msdn.microsoft.com/en-us/library/30s4t80c.aspx)或[Control.BeginInvoke 方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.begininvoke.aspx)。

很好的例子：[如何：对 Windows 窗体控件进行线程安全调用](http://msdn.microsoft.com/en-us/library/ms171728%28v=vs.110%29.aspx)。

# controller - Rails 添加来自多个模型的参数

> ID：14890296
> 
> 赞同：0
> 
> 时间：2013-02-15T07:52:42.767
> 
> 标签：controller, ruby-on-rails-3.2

我不确定这样做的正确方法是什么，所以我希望得到一些关于如何做到这一点“很好”的建议。假设您有一个具有多个关系的模型作为 belongs_to-statements，例如一本书。一本书有一个作者（用户）和一个出版商：

```
belongs_to :user
belongs_to :publisher 
```

伟大的。用户通过 has many :through 与发布者签约

```
has_many :contracts
has_many :publishers, through: :contracts 
```

发布者模型也是如此。作者和出版商都有很多书。到目前为止，一切都很好。现在您有一个发布者显示视图，您可以在其中呈现图书的部分表单，因为您想直接从发布者的“显示”视图添加一本书。

现在，您想向关系提交表单和原因，您必须为图书模型提供出版商和作者数据。

现在的问题是，如何做到这一点。在本书的 create 方法中将数据合并到参数中似乎效果很好：[在 stackoverflow 上找到](https://stackoverflow.com/questions/4350499/adding-variable-to-params-in-rails)。

我对使用 author_id 在表单中创建一个隐藏字段感到不满，但没有去追求它，因为它不知何故感觉很脏。

这样做的“正确”方法是什么？提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T11:01:10.427

您可以使用嵌套模型表单和嵌套属性来做到这一点。您有两个关于该主题的 RailsCasts：[第 1](http://railscasts.com/episodes/196-nested-model-form-part-1)部分和[第 2 部分](http://railscasts.com/episodes/197-nested-model-form-part-2)，您可以在其中看到它是如何工作的。也是[关于主题的强制性文件](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)。

如果您选择这种方式，这里是最新 Rails 版本的更新方法版本：

```
 def link_to_remove_fields(name, f)
    f.hidden_field(:_destroy) + link_to_function(name, "remove_fields(this)", :class => "icon-remove")
  end

  def link_to_add_fields(name, f, association)
    new_object = f.object.class.reflect_on_association(association).klass.new
    fields = f.fields_for(association, new_object, :child_index => "new_#{association}") do |builder|
      render(association.to_s.singularize + "_fields", :f => builder)
    end
    link_to_function(name, "add_fields(this, \"#{association}\", \"#{escape_javascript(fields)}\")")
  end 
```

因为截屏版本不适用于更高版本的 Rails。

# ruby-on-rails - RVM + Capistrano 失败的错误错误？

> ID：14890297
> 
> 赞同：2
> 
> 时间：2013-02-15T07:52:43.963
> 
> 标签：ruby-on-rails, ruby, deployment, capistrano, rvm-capistrano

我目前正在部署我的应用程序，出于某种奇怪的原因，我在执行 cap:deploy 时不断收到此错误。我已经尝试了互联网上的所有内容，但找不到解决此问题的方法

```
*** [deploy:update_code] rolling back
failed: "rvm_path=/usr/local/rvm /usr/local/rvm/bin/rvm-shell 'default' -c 'git clone -q --depth 1 git@github.com:username/appname.git /var/www/site/app/releases/20130215074544 && cd /var/www/site/app/releases/20130215074544 && git checkout -q -b deploy ab30e0f75c1876026a6c658094170e73 && (echo ab30e0f75c1876026a6c658094170e73 > /var/www/site/app/releases/20130215074544/REVISION)'" on xxx.xxx.xx.xxx 
```

我不确定这意味着什么，并且尝试了从 stackoverflow 问题到谷歌的所有建议，但没有任何效果。

我什至在我的部署文件中尝试过这个，但没有任何效果

```
require "rvm/capistrano"
set :rvm_ruby_string, 'default'
set :rvm_type, :system 
```

宝石文件

```
group :development, :test do
  gem "capistrano", "~> 2.14.2"
  gem 'rvm-capistrano', '~> 1.3.0.rc9'
end 
```

部署.rb

```
set :rvm_ruby_string, :local        # use the same ruby as used locally for deployment

before 'deploy', 'rvm:install_rvm'  # update RVM
before 'deploy', 'rvm:install_ruby' # install Ruby and create gemset (both if missing)

require "rvm/capistrano"

    set :application, "appname"
    set :repository, "git@github.com:username/appname.git"

    set :scm, 'git'

    role :web, "xxx.xxx.xx.xxx" # Your HTTP server, Apache/etc
    role :app, "xxx.xxx.xx.xxx" # This may be the same as your `Web` server
    role :db, "xxx.xxx.xx.xxx", :primary => true # This is where Rails migrations will run

    set :user, 'usernameyousetupforserver'
    set :branch, "master"
    set :rvm_type, :user

    set :git_shallow_clone, 1
    set :use_sudo, false
    set :deploy_to, "/path/public/#{application}"
    set :deloy_via, :remote_cache
    set :keep_releases, 1
    set :rails_env, "production"
    set :migrate_target, :latest

    default_run_options[:pty] = true
    ssh_options[:forward_agent] = true

     namespace :deploy do
       task :start do ; end
       task :stop do ; end
       task :restart, :roles => :app, :except => { :no_release => true } do
         run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
       end
     end

     namespace :deploy do
       desc "Recreate symlink"
       task :resymlink, :roles => :app do
         run "rm -f #{current_path} && ln -s #{release_path} #{current_path}"
       end
     end 
```

开发日志

```
 * 2013-02-16 12:39:55 executing `deploy'
* 2013-02-16 12:39:55 executing `deploy:update'
* transaction: start
* 2013-02-16 12:39:55 executing `deploy:update_code'
  executing locally: "git ls-remote git@github.com:username/appname.git master"
  command finished in 1310ms
* executing "git clone -q --depth 1 git@github.com:username/appname.git /var/www/site/app/releases/20130216183956 && cd /var/www/site/app/releases/20130216183956 && git checkout -q -b deploy ab30e0f75c1876026a6c658094170e73 && (echo ab30e0f75c1876026a6c658094170e73 > /var/www/site/app/releases/20130216183956/REVISION)"
  servers: ["xxx.xxx.xx.xxx"]
ssword: 
  [xxx.xxx.xx.xxx] executing command
  command finished in 22960ms
* 2013-02-16 12:40:24 executing `deploy:finalize_update'
  triggering before callbacks for `deploy:finalize_update'
* 2013-02-16 12:40:24 executing `deploy:assets:symlink'
* executing "rm -rf /var/www/site/app/releases/20130216183956/public/assets &&\\\n        mkdir -p /var/www/site/app/releases/20130216183956/public &&\\\n        mkdir -p /var/www/site/app/shared/assets &&\\\n        ln -s /var/www/site/app/shared/assets /var/www/site/app/releases/20130216183956/public/assets"
  servers: ["xxx.xxx.xx.xxx"]
  [xxx.xxx.xx.xxx] executing command
  command finished in 716ms
* executing "chmod -R -- g+w /var/www/site/app/releases/20130216183956 && rm -rf -- /var/www/site/app/releases/20130216183956/public/system && mkdir -p -- /var/www/site/app/releases/20130216183956/public/ && ln -s -- /var/www/site/app/shared/system /var/www/site/app/releases/20130216183956/public/system && rm -rf -- /var/www/site/app/releases/20130216183956/log && ln -s -- /var/www/site/app/shared/log /var/www/site/app/releases/20130216183956/log && rm -rf -- /var/www/site/app/releases/20130216183956/tmp/pids && mkdir -p -- /var/www/site/app/releases/20130216183956/tmp/ && ln -s -- /var/www/site/app/shared/pids /var/www/site/app/releases/20130216183956/tmp/pids"
  servers: ["xxx.xxx.xx.xxx"]
  [xxx.xxx.xx.xxx] executing command
  command finished in 521ms
  triggering after callbacks for `deploy:update_code'
* 2013-02-16 12:40:25 executing `deploy:assets:precompile'
* executing "cd /var/www/site/app/releases/20130216183956 && rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile"
  servers: ["xxx.xxx.xx.xxx"]
  [xxx.xxx.xx.xxx] executing command
* [out :: xxx.xxx.xx.xxx] Could not find aws-sdk-1.8.2 in any of the sources
* [out :: xxx.xxx.xx.xxx] Run `bundle install` to install missing gems.
  command finished in 1132ms
* [deploy:update_code] rolling back
* executing "rm -rf /var/www/site/app/releases/20130216183956; true"
  servers: ["xxx.xxx.xx.xxx"]
  [xxx.xxx.xx.xxx] executing command
  command finished in 508ms
Failed: "rvm_path=$HOME/.rvm/ $HOME/.rvm/bin/rvm-shell 'ruby-1.9.3-p385' -c 'cd /var/www/site/app/releases/20130216183956 && rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile'" on xxx.xxx.xx.xxx 
```

是什么导致了这个错误，我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:39:31.703

看起来您错过了阅读文档[https://github.com/wayneeseguin/rvm-capistrano#readme](https://github.com/wayneeseguin/rvm-capistrano#readme)

此处描述了新版本 1.3.0.rc11：[https ://github.com/wayneeseguin/rvm-capistrano/blob/feature/readme_for_1.3.0/README.md](https://github.com/wayneeseguin/rvm-capistrano/blob/feature/readme_for_1.3.0/README.md)

我看到脚本中没有捆绑程序集成：

```
require "rvm/capistrano"
require "bundler/capistrano"
load 'deploy/assets' 
```

这是我的部署脚本，例如应用程序[https://github.com/mpapis/ad/blob/master/config/deploy.rb](https://github.com/mpapis/ad/blob/master/config/deploy.rb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T16:09:23.990

转到您的[github 设置 ssh 部分](https://github.com/settings/ssh)并将远程服务器用户的 ssh 公钥添加到您的密钥中。这个密钥`/home/username/.ssh/id_rsa.pub`在 linux 下。

# php - 如何从mysql中的多个表中更新列

> ID：14890301
> 
> 赞同：0
> 
> 时间：2013-02-15T07:52:57.867
> 
> 标签：php, mysql

大家好，我想更新两个表中的列。

例如： `abc`和`xyz`。该表包含名为, , ,的`abc`字段。该表包含,和。现在我想要的是通过使用单个查询来更新列状态和列。`id``fname``lastname``status``xyz``id``x_id``status``abc``status``xyz`

我尝试了这个查询，但它不起作用。

```
UPDATE abc a1 
JOIN xyz x1 ON a1.id = x1.x_id 
SET a1.status = "D" , 
    x1.status = "delete" 
WHERE a1.id = 15 AND x1.x_id = 15; 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:03:59.577

如果您的 mysql 服务器无法使用 SQL 在单个查询中更新两个表。您可以使用 LOCK TABLES 命令来避免竞争条件：

```
LOCK TABLES abc WRITE, xyz WRITE;
update abc set status = "D"  where id = 15;
update xyz set status = "delete"  where x_id = 15;
UNLOCK TABLES; 
```

问候， 奥马尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:59:01.987

为 3 个表编辑：

```
UPDATE a1,x1,s1 
SET a1.status = "D" , 
x1.status = "delte",
s1.status = "D" 
WHERE a1.id = x1.x_id
AND a1.id = s1.s_id 
AND a1.id = 15; 
```

# jqplot - 如果只有 1 个条形图，icefaces 条形图显示条形图水平拉伸到 x 轴末端

> ID：14890308
> 
> 赞同：1
> 
> 时间：2013-02-15T07:53:37.233
> 
> 标签：jqplot, icefaces-3

我正在使用icefaces 3.2。我有一个 ace:chart barchart 。简而言之，如果我在条形图中只显示 1 个条形，那么运行时的条形会被拉伸到 X 轴的末端。

如果我只有 1 个条要显示，那么它应该只显示 1 个细条，而不是一个延伸到 X 轴末端的粗条 - 我该如何实现这一点。

# asp.net-mvc - ASP.net MVC 中的可编辑动态表

> ID：14890311
> 
> 赞同：3
> 
> 时间：2013-02-15T07:53:45.507
> 
> 标签：asp.net-mvc, asp.net-mvc-3, grid

我可以实现一个具有已知列数的可编辑表，例如： [如何在 ASP.net 中拥有可编辑表？](https://stackoverflow.com/questions/9243747/how-to-have-editable-table-in-asp-net)

在我的例子中，我们有 100 多个表，我正在寻找一个通用的解决方案，我们可以在其中传递任何表名，并且 Web 我们应该以表格格式显示数据库。诸如在 sqlserver 中编辑数据行之类的东西。

我遇到过数据表、 [jqgrid](http://www.datatables.net/)、[web 网格](http://www.nickharris.net/2010/10/a-first-look-at-the-asp-net-mvc-3-webgrid/)，但它们只支持我们事先有列名的表。在我的情况下，列和表将仅在运行时决定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T05:52:03.963

JQGrid 你必须给出列名，但它们不是固定的。意味着您可以在运行时定义列名，它将根据您提供的列名生成列。

在这种情况下，可以做两件事，要么从服务器提供列模型和列名，然后将其作为字符串或 json 数组推送。或者根据您获得的数据在客户端创建。

我正在使用第一个选项来做几乎类似的事情。如果需要更多详细信息，请告诉我。那里可用的所有其他库也是如此。

# php - 是重新加载一个 被视为重新加载页面？PHP

> ID：14890313
> 
> 赞同：3
> 
> 时间：2013-02-15T07:53:48.373
> 
> 标签：php, javascript, jquery, ajax, session

基本上我有这样的设置：

```
<body> 
<div id="header">
   <h3> Header </h3>
</div>

<div id="body">
</div>

<div id="foot">
</div> 
```

这里的想法是引导用户完成填写数据以计算值的六步向导。

每个步骤都被加载到`<div id="body">`第一步中，通过 jQuery 加载，之后的步骤通过 JavaScript 函数加载。

这些步骤称为：step01.php、step02.php 等...

现在我的问题是：当我从 step01.php 加载到 step02.php 时，这`<div id="body">` 是否被视为页面重新加载？因为我想将 step01.php 中填写的变量保存到会话中，或者保存到其他 .php 文件中。但是由于 php 是服务器端，我想知道 div 中的文件重新加载是否被视为整页重新加载？

如果不重新加载整页就无法做到这一点，请提出其他建议……我已经阅读了一些有关 AJAX 的文档，但对我来说仍然很模糊。因此，如果有人有“新手教程”，请提出建议。

此时我将变量保存在一个 JavaScript 文件中，从中制作 cookie，然后使用 php.ini 从 cookie 中提取变量。但我知道有一种更简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:57:06.643

是的，它被认为是服务器端 php 脚本的“页面加载”。您在会话中放入的任何内容都将在下次重新加载 div 时出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T08:03:29.227

> 但是由于 php 是服务器端，我想知道 div 中的文件重新加载是否被视为整页重新加载？

在这种情况下，答案是：是的。
服务器端 PHP 不知道您在客户端上使用的 div 元素。一般来说，php 对客户端对服务器端脚本的数据/输出所做的事情几乎没有兴趣。
它所关心的只是当您重新加载完整的页面或使用 ajax 时发生的 http 往返。
对于 php 核心来说都是一样的。请求进来，一些初始化发生，脚本被处理，输出被发送到客户端（作为字节流 - 在这个级别，php对你发送给客户端的内容没有“理解”；html，纯文本，图像，应用程序代码，与 php 相同），一些垃圾收集发生，关闭机制启动，完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T07:56:47.263

如果您只是使用 jQuery 加载到 div 中，它们不是页面重新加载。即地址栏中的 url 保持不变。

# python - 如何使用 Report Lab 的画布 drawImage() 插入图像？

> ID：14890319
> 
> 赞同：2
> 
> 时间：2013-02-15T07:54:41.417
> 
> 标签：python, pdf-generation, reportlab, drawimage

我正在寻找使用报告实验室的 pdfgen 扩展工具的功能，该工具目前仅使用；

```
if json_data[definition["field"]] != "":
    c.drawString(
        definition["x"] * cm,
        definition["y"] * cm,
        json_data[definition["field"]]
) 
```

和json；

```
{
    "field":"name",
    "x":1.8,
    "y":10
}, 
```

因此，要绘制图像而不是字符串，我做了以下操作；

```
if json_data[definition["field"]] != "":
    if definition.has_key("image"):
        c.drawImage(
            os.path.join(os.getcwd(), "images", "successIcon.gif"),
            definition["x"] * cm,
            definition["y"] * cm,
            width=16, height=16,
        )
    else:
        c.drawString(
            definition["x"] * cm,
            definition["y"] * cm,
            json_data[definition["field"]]
) 
```

将 json 更新为；

```
{
    "field":"name",
    "x":1.8,
    "y":10,
    "image":"name"
}, 
```

那个电话有什么问题`drawImage`吗？根据文档，它看起来是正确的，但它并没有做到，`drawImage`因为我试图记录函数获取的参数并且我什么也没得到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T12:08:24.610

我以前使用的方法没有任何问题，`drawImage`以下代码目前正在成功使用；

```
# If we have an image attribute
if definition.has_key("image"):
    if str(json_data[definition["field"]]) == 'True':
        # need to replace this with url on attribute
        filename = os.path.join(
            os.getcwd(),
            "static",
            "images",
            definition["image"]
        )
        c.drawImage(filename, definition["x"] * cm, definition["y"] * cm, 10, -10) 
```

以及对应的json来指定图片文件名；

```
{
    "field":"name",
    "x":1.66,
    "y":19.45,
    "image":"image.jpg"
}, 
```

# wso2 - WSO2 Enterprise Service Bus 和 WSO2 Governance Registry 集成

> ID：14890329
> 
> 赞同：5
> 
> 时间：2013-02-15T07:55:10.130
> 
> 标签：wso2, wso2esb

我正在尝试集成 wso2 Governance 注册服务器和 ESB 服务器。我使用这些链接寻求帮助：[http :](http://wso2.org/project/esb/java/4.0.3/docs/deployment_guide.html) [//wso2.org/project/esb/java/4.0.3/docs/deployment_guide.html http://charithaka.blogspot.in/2011/11/wso2-deployment-synchronizer -共享.html](http://charithaka.blogspot.in/2011/11/wso2-deployment-synchronizer-sharing.html)。

我的 mysql 来自同一网络上的另一台电脑。我已经更改了我的 registry.xml，如上述治理注册表的 url 中所述，但是当我运行治理注册表的 wso2server.bat 文件时，我收到如下错误：-

```
TID: [0] [Greg] [2013-02-15 12:50:04,537]  INFO {org.wso2.carbon.core.internal.CarbonCoreActivator} -  Starting WSO2 Carbon... {org.wso2.carbon.core.internal.CarbonCoreActivator}
TID: [0] [Greg] [2013-02-15 12:50:04,567]  INFO {org.wso2.carbon.core.internal.CarbonCoreActivator} -  Operating System : Windows 7 6.1, x86 {org.wso2.carbon.core.internal.CarbonCoreActivator}
TID: [0] [Greg] [2013-02-15 12:50:04,568]  INFO {org.wso2.carbon.core.internal.CarbonCoreActivator} -  Java Home        : D:\eclipse\java\jdk1.7.0\jre {org.wso2.carbon.core.internal.CarbonCoreActivator}
TID: [0] [Greg] [2013-02-15 12:50:04,568]  INFO {org.wso2.carbon.core.internal.CarbonCoreActivator} -  Java Version     : 1.7.0 {org.wso2.carbon.core.internal.CarbonCoreActivator}
TID: [0] [Greg] [2013-02-15 12:50:04,568]  INFO {org.wso2.carbon.core.internal.CarbonCoreActivator} -  Java VM          : Java HotSpot(TM) Client VM 21.0-b17,Oracle Corporation {org.wso2.carbon.core.internal.CarbonCoreActivator}
TID: [0] [Greg] [2013-02-15 12:50:04,568]  INFO {org.wso2.carbon.core.internal.CarbonCoreActivator} -  Carbon Home      : D:\eclipse\WSO2\WSO2GR~1.1\bin\.. {org.wso2.carbon.core.internal.CarbonCoreActivator}
TID: [0] [Greg] [2013-02-15 12:50:04,568]  INFO {org.wso2.carbon.core.internal.CarbonCoreActivator} -  Java Temp Dir    : D:\eclipse\WSO2\WSO2GR~1.1\bin\..\tmp {org.wso2.carbon.core.internal.CarbonCoreActivator}
TID: [0] [Greg] [2013-02-15 12:50:04,569]  INFO {org.wso2.carbon.core.internal.CarbonCoreActivator} -  User             : 313123, en-US, Asia/Calcutta {org.wso2.carbon.core.internal.CarbonCoreActivator}

TID: [0] [Greg] [2013-02-15 12:50:04,760]  WARN {org.wso2.carbon.core.bootup.validator.util.ValidationResultPrinter} -  RAM size (MB): 2047 of the system is below the recommended minimum size :2048 {org.wso2.carbon.core.bootup.validator.util.ValidationResultPrinter}

TID: [0] [Greg] [2013-02-15 12:50:05,022]  INFO {org.wso2.carbon.databridge.agent.thrift.internal.AgentDS} -  Successfully deployed Agent Client {org.wso2.carbon.databridge.agent.thrift.internal.AgentDS} 
```

错误

```
TID: [0] [Greg] [2013-02-15 12:50:09,355] ERROR {org.wso2.carbon.user.core.util.DatabaseUtil} -  Database Error - Table 'reg_db.um_dialect' doesn't exist {org.wso2.carbon.user.core.util.DatabaseUtil}
com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: Table 'reg_db.um_dialect' doesn't exist
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:936)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2870)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1573)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1665)
at com.mysql.jdbc.Connection.execSQL(Connection.java:3176)1:08 PM 2/15/20131:23 PM 2/15/2013
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1153)
at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1266)
at org.wso2.carbon.user.core.claim.dao.ClaimDAO.getDialectCount(ClaimDAO.java:163)
at org.wso2.carbon.user.core.common.DefaultRealm.populateProfileAndClaimMaps(DefaultRealm.java:279)
at org.wso2.carbon.user.core.common.DefaultRealm.init(DefaultRealm.java:109)
at org.wso2.carbon.user.core.common.DefaultRealmService.initializeRealm(DefaultRealmService.java:233)
at org.wso2.carbon.user.core.common.DefaultRealmService.<init>(DefaultRealmService.java:115)
at org.wso2.carbon.user.core.common.DefaultRealmService.<init>(DefaultRealmService.java:128)
at org.wso2.carbon.user.core.internal.Activator.startDeploy(Activator.java:67)
at org.wso2.carbon.user.core.internal.BundleCheckActivator.start(BundleCheckActivator.java:61)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
at java.security.AccessController.doPrivileged(Native Method)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:389)
at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1130)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)
at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)

   TID: [0] [Greg] [2013-02-15 12:50:09,372] ERROR {org.wso2.carbon.user.core.common.DefaultRealmService} -  Cannot initialize the realm. {org.wso2.carbon.user.core.common.DefaultRealmService}
org.wso2.carbon.user.core.UserStoreException: Database Error - Table 'reg_db.um_dialect' doesn't exist
at org.wso2.carbon.user.core.claim.dao.ClaimDAO.getDialectCount(ClaimDAO.java:169)
at    org.wso2.carbon.user.core.common.DefaultRealm.populateProfileAndClaimMaps(DefaultRealm.java:279)
at org.wso2.carbon.user.core.common.DefaultRealm.init(DefaultRealm.java:109)
at     org.wso2.carbon.user.core.common.DefaultRealmService.initializeRealm(DefaultRealmService.java:233)
at org.wso2.carbon.user.core.common.DefaultRealmService.<init>(DefaultRealmService.java:115)
at org.wso2.carbon.user.core.common.DefaultRealmService.<init>(DefaultRealmService.java:128)
at org.wso2.carbon.user.core.internal.Activator.startDeploy(Activator.java:67)
at       org.wso2.carbon.user.core.internal.BundleCheckActivator.start(BundleCheckActivator.java:61)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
at java.security.AccessController.doPrivileged(Native Method)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:389)
at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1130)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)
at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)
Caused by: com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: Table 'reg_db.um_dialect' doesn't exist
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:936)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2870)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1573)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1665)
at com.mysql.jdbc.Connection.execSQL(Connection.java:3176)
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1153)
at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1266)
at org.wso2.carbon.user.core.claim.dao.ClaimDAO.getDialectCount(ClaimDAO.java:163)
... 22 more

TID: [0] [Greg] [2013-02-15 12:50:09,387] ERROR {org.wso2.carbon.user.core.internal.Activator} -  Cannot start User Manager Core bundle {org.wso2.carbon.user.core.internal.Activator}
org.wso2.carbon.user.core.UserStoreException: Cannot initialize the realm.
at org.wso2.carbon.user.core.common.DefaultRealmService.initializeRealm(DefaultRealmService.java:237)
at org.wso2.carbon.user.core.common.DefaultRealmService.<init>(DefaultRealmService.java:115)
at org.wso2.carbon.user.core.common.DefaultRealmService.<init>(DefaultRealmService.java:128)
at org.wso2.carbon.user.core.internal.Activator.startDeploy(Activator.java:67)
at org.wso2.carbon.user.core.internal.BundleCheckActivator.start(BundleCheckActivator.java:61)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
at java.security.AccessController.doPrivileged(Native Method)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:389)
at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1130)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)
at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)
Caused by: org.wso2.carbon.user.core.UserStoreException: Database Error - Table 'reg_db.um_dialect' doesn't exist
at org.wso2.carbon.user.core.claim.dao.ClaimDAO.getDialectCount(ClaimDAO.java:169)
at     org.wso2.carbon.user.core.common.DefaultRealm.populateProfileAndClaimMaps(DefaultRealm.java:279)
at org.wso2.carbon.user.core.common.DefaultRealm.init(DefaultRealm.java:109)
at org.wso2.carbon.user.core.common.DefaultRealmService.initializeRealm(DefaultRealmService.java:233)
... 19 more
Caused by: com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: Table 'reg_db.um_dialect' doesn't exist
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:936)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2870)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1573)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1665)
at com.mysql.jdbc.Connection.execSQL(Connection.java:3176)
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1153)
at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1266)
at org.wso2.carbon.user.core.claim.dao.ClaimDAO.getDialectCount(ClaimDAO.java:163)
... 22 more 
```

请帮助我。我真的需要你的帮助，因为我是初学者。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T08:48:22.070

您可以尝试使用以下命令启动 Governance Registry。

```
wso2server.bat -Dsetup 
```

这将首次创建所需的表。（所以只需要做一次）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:42:26.913

您收到 mysql 异常，因为表 reg_db.um_dialect 不存在

您可以在堆栈跟踪检查中检查您是否连接到具有 reg_db.um_dialect 表的正确数据库

```
Caused by: com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: Table 'reg_db.um_dialect' doesn't exist
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:936)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2870)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1573) 
```

# extjs - 在 ExtJS 4.0 组合框中全选

> ID：14890330
> 
> 赞同：1
> 
> 时间：2013-02-15T07:55:20.713
> 
> 标签：extjs, combobox, extjs4, store

我有一个 ExtJS 组合框，要求有一个附加值，用户可以从第一个值中选择所有选项，如下所示：

```
Ext.onReady(function () {
    // The data store containing the list of states
    var states = Ext.create('Ext.data.Store', {
        fields: ['abbreviation', 'name'],
        data: [{
            name: 'Select all',
            abbreviation: 'ALL'
        },
        {
            name: 'ALABAMA',
            abbreviation: 'AL'
        }, {
            name: 'ALASKA',
            abbreviation: 'AK'
        }, {
            name: 'AMERICAN SAMOA',
            abbreviation: 'AS'
        }, {
            name: 'ARIZONA',
            abbreviation: 'AZ'
        }, {
            name: 'ARKANSAS',
            abbreviation: 'AR'
        }, {
            name: 'CALIFORNIA',
            abbreviation: 'CA'
        }, {
            name: 'COLORADO',
            abbreviation: 'CO'
        }, {
            name: 'CONNECTICUT',
            abbreviation: 'CT'
        }, {
            name: 'DELAWARE',
            abbreviation: 'DE'
        }, {
            name: 'DISTRICT OF COLUMBIA',
            abbreviation: 'DC'
        }, {
            name: 'FEDERATED STATES OF MICRONESIA',
            abbreviation: 'FM'
        }, {
            name: 'FLORIDA',
            abbreviation: 'FL'
        }, {
            name: 'GEORGIA',
            abbreviation: 'GA'
        }, {
            name: 'GUAM',
            abbreviation: 'GU'
        }, {
            name: 'HAWAII',
            abbreviation: 'HI'
        }, {
            name: 'IDAHO',
            abbreviation: 'ID'
        }, {
            name: 'ILLINOIS',
            abbreviation: 'IL'
        }, {
            name: 'INDIANA',
            abbreviation: 'IN'
        }, {
            name: 'IOWA',
            abbreviation: 'IA'
        }, {
            name: 'KANSAS',
            abbreviation: 'KS'
        }, {
            name: 'KENTUCKY',
            abbreviation: 'KY'
        }, {
            name: 'LOUISIANA',
            abbreviation: 'LA'
        }, {
            name: 'MAINE',
            abbreviation: 'ME'
        }, {
            name: 'MARSHALL ISLANDS',
            abbreviation: 'MH'
        }, {
            name: 'MARYLAND',
            abbreviation: 'MD'
        }, {
            name: 'MASSACHUSETTS',
            abbreviation: 'MA'
        }, {
            name: 'MICHIGAN',
            abbreviation: 'MI'
        }, {
            name: 'MINNESOTA',
            abbreviation: 'MN'
        }, {
            name: 'MISSISSIPPI',
            abbreviation: 'MS'
        }, {
            name: 'MISSOURI',
            abbreviation: 'MO'
        }, {
            name: 'MONTANA',
            abbreviation: 'MT'
        }, {
            name: 'NEBRASKA',
            abbreviation: 'NE'
        }, {
            name: 'NEVADA',
            abbreviation: 'NV'
        }, {
            name: 'NEW HAMPSHIRE',
            abbreviation: 'NH'
        }, {
            name: 'NEW JERSEY',
            abbreviation: 'NJ'
        }, {
            name: 'NEW MEXICO',
            abbreviation: 'NM'
        }, {
            name: 'NEW YORK',
            abbreviation: 'NY'
        }, {
            name: 'NORTH CAROLINA',
            abbreviation: 'NC'
        }, {
            name: 'NORTH DAKOTA',
            abbreviation: 'ND'
        }, {
            name: 'NORTHERN MARIANA ISLANDS',
            abbreviation: 'MP'
        }, {
            name: 'OHIO',
            abbreviation: 'OH'
        }, {
            name: 'OKLAHOMA',
            abbreviation: 'OK'
        }, {
            name: 'OREGON',
            abbreviation: 'OR'
        }, {
            name: 'PALAU',
            abbreviation: 'PW'
        }, {
            name: 'PENNSYLVANIA',
            abbreviation: 'PA'
        }, {
            name: 'PUERTO RICO',
            abbreviation: 'PR'
        }, {
            name: 'RHODE ISLAND',
            abbreviation: 'RI'
        }, {
            name: 'SOUTH CAROLINA',
            abbreviation: 'SC'
        }, {
            name: 'SOUTH DAKOTA',
            abbreviation: 'SD'
        }, {
            name: 'TENNESSEE',
            abbreviation: 'TN'
        }, {
            name: 'TEXAS',
            abbreviation: 'TX'
        }, {
            name: 'UTAH',
            abbreviation: 'UT'
        }, {
            name: 'VERMONT',
            abbreviation: 'VT'
        }, {
            name: 'VIRGIN ISLANDS',
            abbreviation: 'VI'
        }, {
            name: 'VIRGINIA',
            abbreviation: 'VA'
        }, {
            name: 'WASHINGTON',
            abbreviation: 'WA'
        }, {
            name: 'WEST VIRGINIA',
            abbreviation: 'WV'
        }, {
            name: 'WISCONSIN',
            abbreviation: 'WI'
        }, {
            name: 'WYOMING',
            abbreviation: 'WY'
        }]
    });

    Ext.define('comboSelectedCount', {
        alias: 'plugin.selectedCount',
        init: function (combo) {

            var fl = combo.getFieldLabel();

            combo.on({
                select: function (me, records) {

                    var len = records.length,
                        store = combo.getStore();

                    // toggle all selections
                    Ext.each(records, function (obj, i, recordsItself) {
                        if (records[i].data.abbreviation === 'ALL') {
                            len = store.getCount();
                            combo.select(store.getRange());
                        }
                    });

                    me.setFieldLabel(fl + ' (' + len + ' selected)');
                },
                beforedeselect: function (me, record, index) {
                    me.setFieldLabel(fl);
                }
            })
        }
    });

    // Create the combo box, attached to the states data store
    Ext.create('Ext.form.ComboBox', {
        disabled: false,
        plugins: ['selectedCount'],
        fieldLabel: 'Choose State',
        labelAlign: 'top',
        store: states,
        queryMode: 'local',
        editable: false,
        displayField: 'name',
        valueField: 'abbreviation',
        renderTo: Ext.getBody(),
        multiSelect: true,
        maxSelections: 3,
        width: 400,
        displayTpl: '<tpl for=".">' +
            '{name}' +
            '<tpl if="xindex < xcount">, </tpl>' +
            '</tpl>',
        listConfig: {
            itemTpl: '{name} <div class="chkbox"></div>'
        },
        listeners: {
        }
    });

}); 
```

当用户取消选中“全选”或选择“全选”以外的任何其他项目时，我希望能够取消全选。

真的不知道该怎么做？

JSFiddle在这里：http: [//jsfiddle.net/dFEsc/1/](http://jsfiddle.net/dFEsc/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T13:57:30.760

我认为在组合商店中添加“全选”项目是一个坏主意 - 插件依赖于商店中的数据。最好将其添加到下拉列表并编辑插件，添加触发器：

```
afterrender: function () {
    combo.container.on({
        click: function(e) {
            var el = e.getTarget('div', 3, true);
            if(el.getAttribute('action') == 'select-all') {
                if( ! allSelected) {
                    combo.select(combo.getStore().getRange());
                    combo.setSelectedCount(combo.getStore().getRange().length);
                    el.setHTML('Deselect all...');
                    allSelected = true;
                }else{
                    combo.reset();
                    el.setHTML('Select all...');
                    allSelected = false;
                }
            }
        }
    })
} 
```

Ext.each(records ... - 都是胡说八道...

请参阅**[jsfiddle上的完整示例](http://jsfiddle.net/dFEsc/15/)**

**更新：**

我还认为向字段添加 tpl 也更好地制作插件，以便将其添加到任何组合框以添加插件。

在插件'init'函数中：

```
Ext.apply(combo, {
    listConfig: {
        tpl : new Ext.XTemplate(
            '<div action="select-all" class="sel-all">Select all...</div><tpl for="."><div class="x-boundlist-item">{name} <div class="chkbox"></div></div></tpl>'
        )
    }
}); 
```

然后不必描述 listConfig 每个组合框。jsfiddle 上的链接也更新了。

**更新2：**

工具栏变体：http: **[//jsfiddle.net/dFEsc/16/](http://jsfiddle.net/dFEsc/16/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T08:51:24.070

这不完全是您被询问的内容，因为如果您在单击全选后单击任何其他内容，它不会取消全选。但我认为这是一种更常见的行为。如果您单击全选两次，您仍然可以取消全选。

这是代码（快速脏。我相信它可以稍微调整一下）

```
Ext.define('comboSelectedCount', {
    alias: 'plugin.selectedCount',
    init: function (combo) {

        var fl = combo.getFieldLabel();

        combo.on({
            select: function (me, records) {
                var len = records.length,
                    store = combo.getStore(),
                    diff = records.length != store.count,
                    newAll = false,
                    all = false,
                    newRecords = [];

                // toggle all selections
                Ext.each(records, function (obj, i, recordsItself) {
                    if (records[i].data.abbreviation === 'ALL') {
                        allRecord = records[i];
                        if (!combo.allSelected) {
                            len = store.getCount();
                            combo.select(store.getRange());
                            combo.allSelected = true;
                            all = true;
                            newAll = true;
                        } else {
                            all = true;
                        }
                    } else {
                        if (diff && !newAll)
                            newRecords.push(records[i]);
                    }

                });
                if (combo.allSelected && !all) {
                    combo.clearValue();
                    combo.allSelected = false;
                } else  if (diff && !newAll) {
                    combo.select(newRecords);
                    combo.allSelected = false;
                }

                me.setFieldLabel(fl + ' (' + len + ' selected)');
            },
            beforedeselect: function (me, record, index) {
                me.setFieldLabel(fl);
            }
        })
    }
}); 
```

**[JSFiddle](http://jsfiddle.net/dFEsc/3/)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-11T13:32:14.260

// 是combo store，数据由Server加载，是全局存储

```
 Ext.Ajax.request({
            url: '/myProject/api/teams',
            success: function (response, opts) {
                var responseObj = Ext.decode(response.responseText);
                var dataTeam = new Array();
                dataTeam[0] = new Array();
                dataTeam[0]['name'] = 'All';
                dataTeam[0]['value'] = -1;
                var j=0;
                for(var i=1; i<=responseObj.length; i++){
                    dataTeam[i] = new Array();
                    dataTeam[i]['name'] = responseObj[j].TEAMDESC;
                    dataTeam[i]['value'] = responseObj[j].TEAMID;
                    j++;
                }
                teamAllStore = Ext.create('Ext.data.Store', {
                    autoDestroy: false,
                    fields: ['name', 'value'],
                    data: dataTeam
                });
            }
        });

        //its my combo
       {
                    xtype: 'combo',
                    fieldLabel: 'Teams',
                    name: 'myTeam',
                    itemid: 'myTeam',
                    store: teamAllStore,
                    width:255,
                    labelWidth : 70,
                    displayField: 'name',
                    valueField: 'value',
                    queryMode: 'local',
                    mode: 'local',
                    emptyText:'Select Team',
                    triggerAction: 'all',
                    forceSelection: true,
                    allowBlank: false,
                    editable: true,
                    margins: '5 0 0 5',
                    myValue:0,  // initialized your variable..
                     multiSelect:true,
                     listConfig : {
                     getInnerTpl : function() {
                        return '<div class="chkCombo"> {name} </div>';
                        }
                     },
                     // this listeners for select all and de-select combo valuesall..
                     listeners: {
                        select: function (combo, eOpts) {

                                var store = combo.getStore();
                                if(combo.myValue==1){
                                     combo.reset();
                                    combo.myValue=0;
                                }
                                for (var i = 0; i < store.data.items.length; i++) {
                                    if(combo.value[i]==-1) {
                                        combo.myValue=1;
                                        combo.select(combo.getStore().collect(combo.valueField));
                                    }
                                }
                            }
                        }
                    } 
```

# iphone - Iphone Ipad Browser with Open in new tab xcode

> ID：14890343
> 
> 赞同：1
> 
> 时间：2013-02-15T07:56:29.053
> 
> 标签：iphone, xcode, ipad, browser

我正在尝试将 App 编写为 Ipad 浏览器。在我的 ipad 上，我只看到这个。但我需要**“在新标签中打开”**。我想知道如何处理这个问题。

![在此处输入图像描述](../Images/95d02da765b8d9a68ff7931ea997c5cd.png)

![在此处输入图像描述](../Images/6627232fe4547facaac618e6ddc1256f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:33:21.393

如果您正在创建一个自定义弹出框（正如您所说您正在创建）一个自定义弹出框，那么添加另一个按钮，命名为您想要的。然后点击那个按钮，抓住链接 ank create `newWebView`，然后加载这个链接`webView`。

# java - 在会话范围的 spring-bean 中同步实例变量以限制对遗留服务的并发请求

> ID：14890348
> 
> 赞同：4
> 
> 时间：2013-02-15T07:56:50.757
> 
> 标签：java, spring, concurrency, httpsession

由于遗留系统不能同时处理来自同一用户的多个请求，我需要限制并发调用的数量。目标是将服务的并发请求数限制为 1 pr。用户（会话） - 但***不要***让它在所有用户中阻塞。我可以在客户端对所有 ajax 请求进行排队，但这似乎是对仅适用于某些调用的问题的大锤解决方案。如果可能的话，我想在服务器端解决这个问题。

替代。1：可能的问题是自动装配服务是spring注入的代理（由于requestscope），并且注入的代理引用可能会随着请求而改变？或者 Spring 是否重用相同的代理 - 在这种情况下它会起作用？

```
@Scope("session")
public class Model {
    @Autowired
    Service service;

    public List<Pojo> getPojos() {
        synchronized(service) {
            if(!hasTriedToRetrievePojos) {
                hasTriedToRetrievePojos = true;
                service.getPojos();
            }
        }
    }
}

@Scope("request")
// Actually a LegacyService, wrapping an old legacysystem
public class Service {
    ...
} 
```

替代。2：如果 Spring 仅构造此 Model pr 的一个实例。会话这应该按预期工作。

```
@Scope("session")
public class Model {
    private Object lock = new Object();

    @Autowired
    Service service;

    public List<Pojo> getPojos() {
        synchronized(lock) {
            if(!hasTriedToRetrievePojos) {
                hasTriedToRetrievePojos = true;
                service.getPojos();
            }
        }
    }
} 
```

替代。3：在模型中注入 HttpSession 并在 HttpSession***属性***上手动同步（根据[Is HttpSession thread safe, are set/get Attribute thread safe operations？](https://stackoverflow.com/questions/616601/is-httpsession-thread-safe-are-set-get-attribute-thread-safe-operations)）。没有弹簧混乱，但更麻烦。

鉴于您使用粘性会话，即使在集群环境中，我对会话参数的同步也应该是安全的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:44:48.367

我会赞成您的第二个解决方案，但在同步之前进行检查（这很昂贵）并在同步块中进行另一次检查。

```
public List<Pojo> getPojos() {
     if (!hasTriedToRetrievePojos) {
         synchronized(lock) {
             if (!hasTriedToRetrievePojos) {
                 hasTriedToRetrievePojos = true;
                 service.getPojos();
             }
         }
     }
} 
```

只要服务实例在其实例级别不包含任何用户/会话相关状态，它就应该是单例的。

该解决方案的优点是同步`Model`仅被封装，不依赖于正确的配置`Service`（如在第一个解决方案中 - 例如`@Scope("singleton")`，服务会导致不同的行为）。除此之外，第一个解决方案也应该有效。而不是`@Scope("request")`你可以使用`@Scope("session")`.

如果粘性会话意味着用户的会话绑定到一个 appserver 实例，并且该用户的每个请求都被定向到该实例，我会说是的，它是安全的。

# java - 图像的高内存消耗

> ID：14890351
> 
> 赞同：0
> 
> 时间：2013-02-15T07:57:03.367
> 
> 标签：java

下面是一个示例代码。它在哪里加载 6 个图像并将它们显示在一个屏幕上。每个图像大小为 2.3 MB。所以在加载每个图像时，我应该看到每个加载的图像的内存消耗增加了大约 3 MB。但事实证明，它为每个图像加载 10 MB。

```
import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;
import javafx.application.Application;
import javafx.geometry.Orientation;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.control.ScrollBar;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;

public class Test extends Application {

public static void main(String... args) {
launch(args);
}

@Override
public void start(Stage primaryStage) throws Exception {
ScrollBar bar = new ScrollBar();
bar.setOrientation(Orientation.VERTICAL);

final VBox box = new VBox();
Group root = new Group();
root.getChildren().addAll(box, bar);
Scene scene = new Scene(root);
primaryStage.setScene(scene);
primaryStage.setTitle("Layout Sample");
primaryStage.show();

for (int ik = 0; ik < 6; ik++) {
    System.out.println("1");
    ImageView i = new ImageView();
    InputStream is = new FileInputStream(new File("C:\\Users\\Jatin\\Documents\\BarcodeNew\\w.png"));
    Image im = new Image(is);
    i.setImage(im);
    box.getChildren().add(i);
    is.close();
}

//r.close();

}
} 
```

在我的应用程序中，一个 1.3MB 的图像占用了 50MB 的空间。有什么理由吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T08:03:51.907

请记住，PNG 图像的文件大小和未压缩图像在内存中的内存消耗是非常不同的。

# lucene - 在哪里可以找到与 Lucene 3.0 兼容的 snowball.dll

> ID：14890364
> 
> 赞同：0
> 
> 时间：2013-02-15T07:58:39.587
> 
> 标签：lucene, snowballanalyzer

我正在使用 Lucene 3.0，我需要与 Lucene 3.0 兼容的 Snowball 分析器来进行词干提取。我在谷歌搜索了一个小时，但我找不到可靠的来源。请建议我可以从中下载 snowball.dll 的受信任位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:10:45.787

在 Lucene 3.0.3 文档中，SnowballAnalyzer 位于：

```
org.apache.lucene.analysis.snowball.SnowballAnalyzer 
```

文档位于：

[https://lucene.apache.org/core/old_versioned_docs/versions/3_0_3/api/contrib-snowball/org/apache/lucene/analysis/snowball/SnowballAnalyzer.html](https://lucene.apache.org/core/old_versioned_docs/versions/3_0_3/api/contrib-snowball/org/apache/lucene/analysis/snowball/SnowballAnalyzer.html)

Lucene 下载档案位于：

[http://archive.apache.org/dist/lucene/java/](http://archive.apache.org/dist/lucene/java/)

据我所知，SnowballAnalyzer 是基本 Lucene 包的一部分（即不在`contrib`.

# sql - 如何显示表中存在的值或返回 null

> ID：14890365
> 
> 赞同：1
> 
> 时间：2013-02-15T07:58:44.963
> 
> 标签：sql, sql-server-2008

我需要查询以在 15 分钟的时间段内获取我的数据表中的数据。如果值存在，我应该返回表中的值，或者我应该返回 null。怎么做

我这样写查询：

```
 with mycte as
  (
   select cast('2011-06-12 00:00:00' as datetime) DateValue 
   union all 
   select dateadd(minute,15,DateValue) 
   from mycte 
   where  dateadd(minute,15,DateValue) <= '2011-06-12 23:59:00'
   ) 
   select datetime,feederid,VR,VY,VB,IR,IY,IB,KW,KVA,KVAR,PF1,PF2,PF3,PF 
   from pseb.dbo.datasource, (
                              select meterid,DateValue 
                              from  mycte,pseb.dbo.METERMASTER 
                              )a 
   where CONVERT(datetime,datetime) >= DateValue 
     and CONVERT(datetime,DATETIME) < dateadd(minute,15,DateValue) 
     and feederid=a.MeterID 
   option (maxrecursion 32767) 
```

但它仅返回表中存在的值。帮我做。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:00:10.063

您需要使用 LEFT JOIN

```
;with mycte as
  (
   select cast('2011-06-12 00:00:00' as datetime) AS BeginDateValue, 
          dateadd(minute, 15, '2011-06-12 00:00:00') AS EndDateValue
   union all 
   select dateadd(minute, 15, BeginDateValue), 
          dateadd(minute, 15, EndDateValue)
   from mycte 
   where  dateadd(minute, 15, BeginDateValue) <= '2011-06-12 23:59:00'
   )
   SELECT [datetime], feederid, VR,VY,VB,IR,IY,IB,KW,KVA,KVAR,PF1,PF2,PF3,PF
   FROM mycte mc LEFT JOIN pseb.dbo.datasource d 
                   ON CONVERT(datetime, [datetime]) >= BeginDateValue 
                     and CONVERT(datetime, [DATETIME]) < EndDateValue
                 LEFT JOIN pseb.dbo.METERMASTER m ON d.feederid = m.MeterID 
```

# python - NameError 全局变量未定义，即使它在同一个函数中，并且没有被导入？

> ID：14890366
> 
> 赞同：0
> 
> 时间：2013-02-15T07:58:48.977
> 
> 标签：python, unit-testing, class, global-variables, nameerror

这是我在这个论坛上的第一个问题！我正在尝试为另一个文件中的一个类编写一个测试文件（All in Python btw），我得到一个 NameError: global variable *name here* undefined。我将向您展示我在做什么的一些示例代码。

```
import unittest
from File import *

class TestFile(unittest.TestCase):

    def object_test_setup(self, elements): 
        s = CustomClass() #from imported File, have to import items this way.
        for item in elements:
            a.insert(item)
        return (a)

    def test_contains_tuple_element(self):
        '''Return True iff CustomClass contains tuple element'''
        custom_object = object_test_setup([1, "string!", ("TUP", "LE")])
        element = ("TUP", "LE")
        self.assertTrue(custom_object.__contains__(element)) # __contains__ is defined in File 
```

是的，所以对象被初始化得很好，导入文件中的所有方法都在对象上工作，但由于某种原因，我的 NameError 说`NameError: global name 'object_test_setup' is not defined`

我不明白，因为导入的所有内容都在该文件中工作，我相信我正确导入并且全局 NameError 来自类本身的函数。为什么这行不通？非常感谢所有帮助！

非常感谢，托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:01:08.117

这是一个类方法，所以你需要像这样调用它：

```
custom_object = self.object_test_setup([1, "string!", ("TUP", "LE")]) 
```

# c++ - C++ 中的 USB 编程

> ID：14890367
> 
> 赞同：1
> 
> 时间：2013-02-15T07:58:48.873
> 
> 标签：c++

我正在尝试为特定的 USB 设备构建 DLL。该 DLL 使用抽象接口导出类。我正在使用 setupapi.dll 进行 USB 设备识别、接收和发送数据包到设备。我收到导入函数的运行时检查错误 0。顺便说一句，正在使用多字节字符集。这是相关代码（它有点长，所以很抱歉）：

```
//Bikedll.h 
#include <stdio.h>
#include <stdlib.h>
#include <Windows.h>    //Definitions for various common and not so common types like DWORD, PCHAR, HANDLE, etc.
#include <Dbt.h>        //Need this for definitions of WM_DEVICECHANGE messages
#include <setupapi.h>   
#include <string>
#include "AbstrClass.h"

using namespace std;

#define Cihaz_ID  "Vid_a0a1&Pid_4147"    
#define __YAZI__ "Esetron USB Kart V1.0"

typedef GUID* LPGUID; 

typedef HDEVINFO ( *SetupDiGetClassDevsUMPTR)(LPGUID, PCTSTR, HWND, DWORD);
typedef WINSETUPAPI BOOL ( *SetupDiEnumDeviceInterfacesUMPTR)(HDEVINFO, PSP_DEVINFO_DATA, LPGUID, DWORD, PSP_DEVICE_INTERFACE_DATA);
typedef WINSETUPAPI BOOL ( *SetupDiDestroyDeviceInfoListUMPTR)(HDEVINFO);
typedef WINSETUPAPI BOOL ( *SetupDiEnumDeviceInfoUMPTR)(HDEVINFO, DWORD, PSP_DEVINFO_DATA);
typedef WINSETUPAPI BOOL ( *SetupDiGetDeviceRegistryPropertyUMPTR)(HDEVINFO, PSP_DEVINFO_DATA, DWORD, PDWORD, PBYTE, DWORD, PDWORD);
typedef WINSETUPAPI BOOL ( *SetupDiSetDeviceRegistryPropertyUMPTR)(HDEVINFO, PSP_DEVINFO_DATA, DWORD, const BYTE*, DWORD);
typedef BOOL ( *SetupDiGetDeviceInterfaceDetailUMPTR)(HDEVINFO, PSP_DEVICE_INTERFACE_DATA, PSP_DEVICE_INTERFACE_DETAIL_DATA, DWORD, PDWORD, PSP_DEVINFO_DATA);
typedef HDEVNOTIFY ( *RegisterDeviceNotificationUMPTR)(HANDLE, LPVOID, DWORD);

//Globally Unique Identifier (GUID) for HID class devices.  Windows uses GUIDs to identify things.
GUID InterfaceClassGuid = {0x4d1e55b2, 0xf16f, 0x11cf, 0x88, 0xcb, 0x00, 0x11, 0x11, 0x00, 0x00, 0x30}; 

//USB variables
BOOL AttachedState = false;     
BOOL AttachedButBroken = false;                 
PSP_DEVICE_INTERFACE_DETAIL_DATA DetailedInterfaceDataStructure = new SP_DEVICE_INTERFACE_DETAIL_DATA;
HANDLE WriteHandleToUSBDevice = INVALID_HANDLE_VALUE;
HANDLE ReadHandleToUSBDevice = INVALID_HANDLE_VALUE;

unsigned char LED_durum = 0;
HANDLE  EP1INHandle = INVALID_HANDLE_VALUE;
HANDLE  EP1OUTHandle = INVALID_HANDLE_VALUE;
bool durum = false;

unsigned char gond_paket[65];   //Number of elements, including '/0'
unsigned char gelen_paket[65];      
DWORD Gond_say;             
DWORD Gelen_say;

class Bikedll : public AbstrClass
{
public:     
        SetupDiGetClassDevsUMPTR _SetupDiGetClassDevsUMPTR;
        SetupDiEnumDeviceInterfacesUMPTR _SetupDiEnumDeviceInterfacesUMPTR;
        SetupDiDestroyDeviceInfoListUMPTR _SetupDiDestroyDeviceInfoListUMPTR;
        SetupDiEnumDeviceInfoUMPTR _SetupDiEnumDeviceInfoUMPTR;
        SetupDiGetDeviceRegistryPropertyUMPTR _SetupDiGetDeviceRegistryPropertyUMPTR;
        SetupDiSetDeviceRegistryPropertyUMPTR _SetupDiSetDeviceRegistryPropertyUMPTR;
        SetupDiGetDeviceInterfaceDetailUMPTR _SetupDiGetDeviceInterfaceDetailUMPTR;
        RegisterDeviceNotificationUMPTR _RegisterDeviceNotificationUMPTR;

    DWORD ErrorStatusWrite;
    DWORD ErrorStatusRead;

    //Explicit Linking
    HINSTANCE hSetUpApi; 
    HINSTANCE hUser32;

    string get_POT();
    string get_RPM();

    Bikedll();
    BOOL CheckIfPresentAndGetUSBDevicePath(void)
    {
        HDEVINFO DeviceInfoTable = INVALID_HANDLE_VALUE;
        PSP_DEVICE_INTERFACE_DATA InterfaceDataStructure = new SP_DEVICE_INTERFACE_DATA;
        SP_DEVINFO_DATA DevInfoData;

        DWORD InterfaceIndex = 0;
        DWORD StatusLastError = 0;
        DWORD dwRegType;
        DWORD dwRegSize;
        DWORD StructureSize = 0;
        PBYTE PropertyValueBuffer;
        bool MatchFound = false;
        DWORD ErrorStatus;
        BOOL BoolStatus = FALSE;
        DWORD LoopCounter = 0;

        string DeviceIDToFind = Cihaz_ID;   
        //First populate a list of plugged in devices (by specifying "DIGCF_PRESENT"), which are of the specified class GUID. 
        DeviceInfoTable = _SetupDiGetClassDevsUMPTR(&InterfaceClassGuid, NULL, NULL, DIGCF_PRESENT | DIGCF_DEVICEINTERFACE); // Run Time Check Error 0 (AKA RTCE 0) type of errors start here

        //Now look through the list we just populated.  We are trying to see if any of them match our device. 
        while(true)
        {                                                                           
            InterfaceDataStructure->cbSize = sizeof(SP_DEVICE_INTERFACE_DATA);
            if(_SetupDiEnumDeviceInterfacesUMPTR(DeviceInfoTable, NULL, &InterfaceClassGuid, InterfaceIndex, InterfaceDataStructure)) //RTCE 0
            {
                ErrorStatus = GetLastError();
                if(ERROR_NO_MORE_ITEMS == GetLastError())   //Did we reach the end of the list of matching devices in the DeviceInfoTable?
                {   //Cound not find the device.  Must not have been attached.
                    _SetupDiDestroyDeviceInfoListUMPTR(DeviceInfoTable);    //Clean up the old structure we no longer need. Still RTCE 0
                    return FALSE;       
                }
            }
        else    //Else some other kind of unknown error ocurred...
        {
            ErrorStatus = GetLastError();
            _SetupDiDestroyDeviceInfoListUMPTR(DeviceInfoTable);    //Clean up the old structure we no longer need. RTCE 0
            return FALSE;   
        }
        //Now retrieve the hardware ID from the registry.  The hardware ID contains the VID and PID, which we will then 
        //check to see if it is the correct device or not.

        //Initialize an appropriate SP_DEVINFO_DATA structure.  We need this structure for SetupDiGetDeviceRegistryProperty().
        DevInfoData.cbSize = sizeof(SP_DEVINFO_DATA);
        _SetupDiEnumDeviceInfoUMPTR(DeviceInfoTable, InterfaceIndex, &DevInfoData); //RTCE 0

        //First query for the size of the hardware ID, so we can know how big a buffer to allocate for the data.
        _SetupDiGetDeviceRegistryPropertyUMPTR(DeviceInfoTable, &DevInfoData, SPDRP_HARDWAREID, &dwRegType, NULL, 0, &dwRegSize); //RTCE 0

        //Allocate a buffer for the hardware ID.
        PropertyValueBuffer = (BYTE *) malloc (dwRegSize);
        if(PropertyValueBuffer == NULL) //if null, error, couldn't allocate enough memory
        {   //Can't really recover from this situation, just exit instead.
            _SetupDiDestroyDeviceInfoListUMPTR(DeviceInfoTable);    //Clean up the old structure we no longer need. RTCE 0
            return FALSE;       
        }

        //Retrieve the hardware IDs for the current device we are looking at.  PropertyValueBuffer gets filled with a 
        //REG_MULTI_SZ (array of null terminated strings).  To find a device, we only care about the very first string in the
        //buffer, which will be the "device ID".  The device ID is a string which contains the VID and PID, in the example 
        //format "Vid_04d8&Pid_003f".
        _SetupDiGetDeviceRegistryPropertyUMPTR(DeviceInfoTable, &DevInfoData, SPDRP_HARDWAREID, &dwRegType, PropertyValueBuffer, dwRegSize, NULL); // RTCE 0

        //Now check if the first string in the hardware ID matches the device ID of my USB device.
        string* DeviceIDFromRegistry = new string((char *)PropertyValueBuffer);
        free(PropertyValueBuffer);      //No longer need the PropertyValueBuffer, free the memory to prevent potential memory leaks

        //Now check if the hardware ID we are looking at contains the correct VID/PID
        if (std::string::npos != DeviceIDFromRegistry->find(DeviceIDToFind))
        {
            MatchFound = true;
        }
        if(MatchFound == true)
        {
            //Device must have been found.  Open WinUSB interface handle now.  In order to do this, we will need the actual device path first.
            //We can get the path by calling SetupDiGetDeviceInterfaceDetail(), however, we have to call this function twice:  The first
            //time to get the size of the required structure/buffer to hold the detailed interface data, then a second time to actually 
            //get the structure (after we have allocated enough memory for the structure.)
            DetailedInterfaceDataStructure->cbSize = sizeof(SP_DEVICE_INTERFACE_DETAIL_DATA);
            //First call populates "StructureSize" with the correct value
            _SetupDiGetDeviceInterfaceDetailUMPTR(DeviceInfoTable, InterfaceDataStructure, NULL, NULL, &StructureSize, NULL);   
            DetailedInterfaceDataStructure = (PSP_DEVICE_INTERFACE_DETAIL_DATA)(malloc(StructureSize));     //Allocate enough memory
            if(DetailedInterfaceDataStructure == NULL)  //if null, error, couldn't allocate enough memory
            {   //Can't really recover from this situation, just exit instead.
                _SetupDiDestroyDeviceInfoListUMPTR(DeviceInfoTable);    //Clean up the old structure we no longer need.
                return FALSE;       
            }
            DetailedInterfaceDataStructure->cbSize = sizeof(SP_DEVICE_INTERFACE_DETAIL_DATA);
            //Now call SetupDiGetDeviceInterfaceDetail() a second time to receive the goods.  
            _SetupDiGetDeviceInterfaceDetailUMPTR(DeviceInfoTable, InterfaceDataStructure, DetailedInterfaceDataStructure, StructureSize, NULL, NULL); 
            // Set Device Name
            BYTE *pbuf = new BYTE[sizeof(TEXT(__YAZI__))];
            pbuf = (BYTE*)TEXT(__YAZI__);
            _SetupDiSetDeviceRegistryPropertyUMPTR(DeviceInfoTable, &DevInfoData, SPDRP_FRIENDLYNAME , pbuf, sizeof(TEXT(__YAZI__)));

            //We now have the proper device path, and we can finally open a device handle to the device.
            //WinUSB requires the device handle to be opened with the FILE_FLAG_OVERLAPPED attribute.
            _SetupDiDestroyDeviceInfoListUMPTR(DeviceInfoTable);    //Clean up the old structure we no longer need.
            return TRUE;
        }

            InterfaceIndex++;   
            //Keep looping until we either find a device with matching VID and PID, or until we run out of devices to check.
            //However, just in case some unexpected error occurs, keep track of the number of loops executed.
            //If the number of loops exceeds a very large number, exit anyway, to prevent inadvertent infinite looping.             
            LoopCounter++;
            if(LoopCounter == 10000000) //Surely there aren't more than 10 million devices attached to any forseeable PC...
            {
                return FALSE;
            }
        }

    }

protected:
/// <summary>
/// Clean up any resources being used.
/// </summary>
~Bikedll()
{
    //Close the read/write handles, if they are currently open.
    if(AttachedState == TRUE)
    {
        CloseHandle(WriteHandleToUSBDevice);
        CloseHandle(ReadHandleToUSBDevice);
    }
}

};

string Bikedll::get_RPM(){
    gond_paket[0] = 0;      
    gond_paket[1] = 160;
    gond_paket[2] = 0;
    gond_paket[3] = 0;

    string str;

    for(unsigned char i = 4; i <65; i++)
        gond_paket[i] = 0xFF;

    WriteFile(WriteHandleToUSBDevice, &gond_paket, 65, &Gond_say, 0);

    if (ReadFile(ReadHandleToUSBDevice,&gelen_paket,65,&Gelen_say,0))
    {
        if (gelen_paket[1] == 0xBA)
        {
            return str = gelen_paket[3];
        }
    }
}
string  Bikedll::get_POT(){
    gond_paket[0] = 0;      
    gond_paket[1] = 160;
    gond_paket[2] = 0;
    gond_paket[3] = 0;

    string str;

    for(unsigned char i = 4; i <65; i++)
        gond_paket[i] = 0xFF;

    WriteFile(WriteHandleToUSBDevice, &gond_paket, 65, &Gond_say, 0);

    if (ReadFile(ReadHandleToUSBDevice,&gelen_paket,65,&Gelen_say,0))
    {
        if (gelen_paket[1] == 0xBA)
        {
            return str = gelen_paket[5];
        }
    }
}

Bikedll::Bikedll(){
hSetUpApi = LoadLibrary("setupapi.dll");
hUser32 = LoadLibrary("user32.dll");

_SetupDiGetClassDevsUMPTR = (SetupDiGetClassDevsUMPTR)GetProcAddress(hSetUpApi, "SetupDiGetClassDevsA");
_SetupDiEnumDeviceInterfacesUMPTR = (SetupDiEnumDeviceInterfacesUMPTR)GetProcAddress(hSetUpApi, "SetupDiEnumDeviceInterfaces");
_SetupDiDestroyDeviceInfoListUMPTR = (SetupDiDestroyDeviceInfoListUMPTR)GetProcAddress(hSetUpApi, "SetupDiDestroyDeviceInfoList");
_SetupDiEnumDeviceInfoUMPTR = (SetupDiEnumDeviceInfoUMPTR)GetProcAddress(hSetUpApi, "SetupDiEnumDeviceInfo");
_SetupDiGetDeviceRegistryPropertyUMPTR = (SetupDiGetDeviceRegistryPropertyUMPTR)GetProcAddress(hSetUpApi, "SetupDiGetDeviceRegistryPropertyA");
_SetupDiSetDeviceRegistryPropertyUMPTR = (SetupDiSetDeviceRegistryPropertyUMPTR)GetProcAddress(hSetUpApi, "SetupDiSetDeviceRegistryPropertyA");
_SetupDiGetDeviceInterfaceDetailUMPTR = (SetupDiGetDeviceInterfaceDetailUMPTR)GetProcAddress(hSetUpApi, "SetupDiGetDeviceInterfaceDetailA");

DEV_BROADCAST_DEVICEINTERFACE MyDeviceBroadcastHeader;// = new DEV_BROADCAST_HDR;
MyDeviceBroadcastHeader.dbcc_devicetype = DBT_DEVTYP_DEVICEINTERFACE;
MyDeviceBroadcastHeader.dbcc_size = sizeof(DEV_BROADCAST_DEVICEINTERFACE);
MyDeviceBroadcastHeader.dbcc_reserved = 0;  //Reserved says not to use...
MyDeviceBroadcastHeader.dbcc_classguid = InterfaceClassGuid;

if(CheckIfPresentAndGetUSBDevicePath()) //Look for the device
{
    DWORD ErrorStatusWrite;
    DWORD ErrorStatusRead;

    WriteHandleToUSBDevice = CreateFile(DetailedInterfaceDataStructure->DevicePath, GENERIC_WRITE, FILE_SHARE_READ | FILE_SHARE_WRITE, NULL, OPEN_EXISTING, 0, 0);
    ErrorStatusWrite = GetLastError();
    ReadHandleToUSBDevice = CreateFile(DetailedInterfaceDataStructure->DevicePath, GENERIC_READ, FILE_SHARE_READ | FILE_SHARE_WRITE, NULL, OPEN_EXISTING, 0, 0);
    ErrorStatusRead = GetLastError();

    if((ErrorStatusWrite == ERROR_SUCCESS) && (ErrorStatusRead == ERROR_SUCCESS))
    {
        AttachedState = TRUE;       
        AttachedButBroken = FALSE;
        //okay
    }

    else //reading or writing operations failed
    {
        AttachedState = FALSE;      
        AttachedButBroken = TRUE;   
        if(ErrorStatusWrite == ERROR_SUCCESS)//Açık bağlantıları kapat
            CloseHandle(WriteHandleToUSBDevice);
        if(ErrorStatusRead == ERROR_SUCCESS)
            CloseHandle(ReadHandleToUSBDevice);
        //err1();                    
    }
}
else    
{
    AttachedState = FALSE;
    AttachedButBroken = FALSE;
    //err2();
}
}

//Interface to be exported with usable virtual functions
#include <string>

class AbstrClass{
public:
virtual std::string get_POT() = 0;
virtual std::string get_RPM() = 0;
};

// Bikedll.cpp : Defines the exported functions for the DLL application.

#include "stdafx.h"
#include "Bikedll.h"

extern "C" __declspec(dllexport) AbstrClass* __cdecl create_AbstrClass()
{
    return new Bikedll;
}

// TestdllBike.cpp : Program to test Bikedll
#include "stdafx.h"
#include "AbstrClass.h"

#include <Windows.h>
#include <iostream>

using namespace std;

typedef AbstrClass* (__cdecl *abstrClass_factory)();

int main()
{
HINSTANCE dll_handle = ::LoadLibrary(TEXT("Bikedll.dll"));
if(!dll_handle){
    cerr << "Installation failed!";
    return 1;
}

abstrClass_factory factory_func = reinterpret_cast<abstrClass_factory>(::GetProcAddress(dll_handle, "create_AbstrClass"));

if (!factory_func) {
    cerr << "function was not imported from dll!\n";
    ::FreeLibrary(dll_handle);
    return 1;
}

AbstrClass* instance = factory_func();

string t = instance->get_POT();
cout << "POT : " << t << endl;
string v = instance->get_RPM();
cout << "RPM : " << v << endl;

return 0;
} 
```

# r - 堆叠后如何编写光栅？

> ID：14890369
> 
> 赞同：5
> 
> 时间：2013-02-15T07:58:56.810
> 
> 标签：r, raster

我想操作几个光栅文件，然后再次编写它们。

```
rasterfiles   <- list.files("C:\\data", "*.envi", full.names = TRUE)
d1 <-  overlay(stack(rasterfiles ), 
               fun=function(x) movingFun(x, fun=mean, n=3, na.rm=TRUE))
d2=unstack(d1) 
```

我很感激关于我们如何写作的任何想法`d2`（光栅）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T09:11:44.623

```
 writeRaster(d1, file="d1.nc") #other file formats such as .envi work as well 
```

工作，因为`d1`是一个单一的栅格，而不是一个栅格列表：事实上，结果`overlay`是一个单一的栅格（请参阅 参考资料`?overlay`）。
另外的概念`stack`是精确地采用具有一层的多个栅格并产生具有多个层的一个栅格。
最后，如果您真的想单独保存每一层，您可以`unstack`在写入之前先进行栅格化。
在这种情况下：

```
d2 <- unstack(d1)
outputnames <- paste(seq_along(d2), ".nc",sep="")
for(i in seq_along(d2)){writeRaster(d2[[i]], file=outputnames[i])} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-16T07:11:40.677

Plannapus 解决方案应该有效。或者，您可以在一个步骤中写入单个文件：

```
 rasterfiles   <- list.files("C:\\data", "*.envi", full.names = TRUE)
 d1 <-  overlay(stack(rasterfiles ), 
           fun=function(x) movingFun(x, fun=mean, n=3, na.rm=TRUE), 
           filename='output.tif' ) 
```

或分两步到多个文件

```
 rasterfiles   <- list.files("C:\\data", "*.envi", full.names = TRUE)
 d1 <-  overlay(stack(rasterfiles ), 
           fun=function(x) movingFun(x, fun=mean, n=3, na.rm=TRUE))
 d2 <- writeRaster(d1, 'out.tif', bylayer=TRUE) 
```

# mysql - 最适合高分列表的数据库类型

> ID：14890371
> 
> 赞同：1
> 
> 时间：2013-02-15T07:59:11.010
> 
> 标签：mysql, postgresql, nosql

我正在开发一个 iPhone 应用程序，它需要一个存储在远程服务器上的高分系统。

如果您在列表中排在第 500 位，您应该会在屏幕上看到第 495 到 505 位。

**编辑（忘了提及）：您可以在多个列表中，例如列表“伦敦”、“超级英雄团队”和“小说迷”。如果有数百万用户和数千个组，我如何最有效地在我的所有列表中选择我的展示位置周围的 10 个位置？**

我想到了以下几点：

*   每个列表选择一个：`select * from scores where list = '$list' order by points desc limit $myplace-5, 10`
*   一次选择所有列表：`select * from scores where list in ($lists) order by list, points desc`然后使用 PHP 选择正确的位置

随着所有新的数据库类型（NoSQL 等）的出现，是否有适合此问题的数据库类型？

例如，从一开始就将您的分数插入正确的位置，这样每个`select`人都不必对数据进行排序？

还是一种快速选择您所在位置周围 10 个位置的方法？（如果我刚刚选择了正确的行，则实际的排序可能发生在客户端）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:01:21.477

最好的解决方案是通过 SQL 查询获取您需要的准确数据，而不是通过 PHP 进行。使用 NoSQL 数据库可能不适合您的问题。MySQL 将毫无问题地处理这么多的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:07:02.640

您可以通过以下查询直接获得所需的订单

```
//user id
set @ID = 3; 

// get the score of the user
set @Score = (select score
              from users
              where ID = @ID);

//get the user who are less than you, and greather than you nad union them
select ID, Score
from (select U.ID, U.Score
      from users as U
      where U.ID <> @ID and
            U.Score < @Score
      order by U.Score desc limit 5) as P
union all
select U.ID, U.Score
from users U
where U.ID = @ID
union all
select *
from (select U.ID, U.Score
      from users as U
      where U.ID <> @ID and
            U.Score > @Score
      order by U.Score limit 5) as A
order by Score; 
```

来源：[https ://stackoverflow.com/a/5796636/598424](https://stackoverflow.com/a/5796636/598424)

# html - ASP.NET 在 ImageUrl Porperty 中动态设置主题名称

> ID：14890372
> 
> 赞同：0
> 
> 时间：2013-02-15T07:59:27.303
> 
> 标签：html, css, internet-explorer

我使用了一个硬编码的图像。但是有多主题选项，我想使用它，如果一个人选择蓝色主题，则应显示蓝色图像，如果选择橙色主题，则应显示橙色图像..

这是我硬编码的 ASP.NET 图像代码

```
<asp:Image ID="Image4" runat="server" ImageUrl="~/App_Themes/Default/Images/listingnext.png" /> 
```

但我不希望它像我想在主题基础上显示图像，就像我说如果它的蓝色然后蓝色图像显示，如果橙色或红色那么他们各自的图像应该显示..

我试过这样。

```
<asp:Image ID="Image4" runat="server" ImageUrl="~/App_Themes/Default"+<%this.Theme%>+"/Images/listingnext.png" /> 
```

但它不起作用，如何使它成为可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:37:48.683

墨菲斯是对的，但不是使用跟随；

```
"<%=ResolveUrl(string.Format("~/App_Themes/{0}/Images/listingnext.png", Page.Theme)) %>" 
```

试试这个;

```
'<%# ResolveUrl(string.Format("~/App_Themes/{0}/Images/listingnext.png", Page.Theme)) %>' 
```

# c# - 为什么我不应该写 list.Count.Equals(0)

> ID：14890373
> 
> 赞同：2
> 
> 时间：2013-02-15T07:59:31.077
> 
> 标签：c#

你不写的理由是什么

```
list.Count.Equals(0) 
```

当你可能写

```
list.Count == 0 
```

有技术/语义上的原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T08:08:28.007

我认为对于这种特定情况，两个陈述之间没有区别。由于您正在检查值的相等性`int`；`==`运算符并`Equals`执行完全相同的操作。

但是对于其他一些情况，例如以下情况，它们可能返回不同的值；

```
Double.NaN == Double.NaN // is false
Double.NaN.Equals(Double.NaN) // is true 
```

通常，对于值类型，您可以使用`==`; 但如果它是引用类型，最好使用`Equals`.

对于`int`样品的拆卸如下所示；生成的汇编代码不同，因此预期性能会有所不同；

```
 int a = 10;
00000080  mov         dword ptr [ebp-40h],0Ah 
                int b = 9;
00000087  mov         dword ptr [ebp-44h],9 

                bool x = a == b;
0000008e  mov         eax,dword ptr [ebp-40h] 
00000091  cmp         eax,dword ptr [ebp-44h] 
00000094  sete        al 
00000097  movzx       eax,al 
0000009a  mov         dword ptr [ebp-48h],eax 
                bool y = a.Equals(b);
0000009d  lea         ecx,[ebp-40h] 
000000a0  mov         edx,dword ptr [ebp-44h] 
000000a3  call        6B8803C0 
000000a8  mov         dword ptr [ebp-60h],eax 
000000ab  movzx       eax,byte ptr [ebp-60h] 
000000af  mov         dword ptr [ebp-4Ch],eax 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T08:01:19.943

两个主要原因是

1.  list.Count == 0 更容易阅读（最重要）

2.  list.Count.Equals(0) 较慢

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T08:30:02.333

`list.Count == 0`具有更好的可读性和更短的 imo。如果性能可以忽略不计，请始终使用更具可读性并以最清晰的方式显示意图的内容。

至于技术原因：如果比较生成的两个 IL 序列。

```
 IL_0029:  callvirt   instance int32 class [mscorlib]System.Collections.Generic.List`1<string>::get_Count()
  IL_002e:  stloc.s    CS$0$0001
  IL_0030:  ldloca.s   CS$0$0001
  IL_0032:  ldc.i4.0
  IL_0033:  call       instance bool [mscorlib]System.Int32::Equals(int32) 
  // Equals(obj int) internally uses the method this == obj; 
```

对比

```
 IL_007f:  callvirt   instance int32 class [mscorlib]System.Collections.Generic.List`1<string>::get_Count()
  IL_0084:  ldc.i4.0
  IL_0085:  ceq 
```

有人可能会争辩说 == 运算符更快，因为它使用的指令更少，但没有人真正知道它是如何优化的。

使用 JIT 预热和首先调用的不同序列运行快速基准测试，您会注意到（至少在我的机器上）在超过 100000000 个元素的迭代中，== 快了大约 25 毫秒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T08:12:36.330

我认为更具可读性的是

```
if (list.IsEmpty()) { ... } 
```

我不是 C# 专家，所以你最好在这里查看[推荐的方法来检查序列是否为空](https://stackoverflow.com/questions/2094729/c-recommended-way-to-check-if-a-sequence-is-empty)如何使其工作。

# xcode - 在 Mac OS 上安装或不安装 Git

> ID：14890374
> 
> 赞同：1
> 
> 时间：2013-02-15T07:59:30.847
> 
> 标签：xcode, macos, git

我有一个 Mac OS X 版本：10.8.2 和 Xcode 4.5.2。

我将使用 git，但我不确定是否必须安装它。

在我的电脑上搜索，我在这里找到了它：`/Applications/Xcode.app/Contents/Developer/usr/bin/git`

如果需要，我将安装此[发行版](http://git-scm.com/download/mac)。**这是正确的吗？**

**是否需要安装 Git 或者我可以使用 Xcode 自带的那个？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:07:10.987

`git`如果 Xcode 附带的版本不支持您想要的功能，或者，当然，修复了错误，您只需要安装更新版本。

您需要安装 Xcode 命令行包，以便从标准路径 ( ) 访问诸如 git 之类的东西`/usr/bin`。你可以在 Xcode 本身中做到这一点。

如果您需要安装更新版本的 git，我会推荐[Macports](http://macports.org)版本。

我很少在我的 Mac 上使用命令行版本的 git，更喜欢使用出色的免费[Atlassian SourceTree](http://www.atlassian.com/software/sourcetree/overview)应用程序来执行复杂的源代码控制操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:10:29.743

如果您使用 Xcode 并且不打算卸载 Xcode 4.5.2（或更高版本），那么您已经可以使用 git。唯一的问题是 Xcode 中捆绑的 git 版本可能不是最新的。另一件事是从控制台或 Terminal.app 使用 git（捆绑在 Xcode 中），然后您需要在命令前加上

> xcrun

有关更多详细信息，请参见手册页。

另一方面，如果您想在不需要 Xcode 的情况下使用 git，请下载 git 源代码，并使用 makefile 构建将允许您根据需要自定义 git。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:03:43.840

但是，您可以注意，它是比发行版更旧的版本。就个人而言，我使用[homebrew](http://mxcl.github.com/homebrew)的 git 版本

# ruby - RSpec：我如何在期望语法中使用数组包含匹配器

> ID：14890375
> 
> 赞同：54
> 
> 时间：2013-02-15T07:59:35.167
> 
> 标签：ruby, unit-testing, rspec

我使用[新的 rspec 语法](http://myronmars.to/n/dev-blog/2012/06/rspecs-new-expectation-syntax)（`expect`而不是`should`），我想测试一个数组是否包含另一个数组的元素。在旧语法中，它将是：

```
array1.should include(array2) 
```

在我尝试编写的新语法中：

```
expect(array1).to include(array2) 
```

但我得到了一个错误（这很合理）：

```
TypeError: wrong argument type Array (expected Module) 
```

然后我写道：

```
expect(array1).to be_include(array2) 
```

但它很丑;-) *更新：*它没有工作：显然它检查array2是否是array1的元素，而不是如果array2的所有元素都包含在array1中。

最后我写道：

```
expect(array1 & array2).to eq(array2) 
```

但这不是最漂亮的解决方案。你知道更好吗？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-02-15T16:08:03.753

将参数传递给数组匹配器时，您需要对参数进行 splat：

```
expect(array1).to include(*array2) 
```

这是因为您通常会列出文字，例如：

```
expect([1, 2, 3]).to include(1, 2) 
```

也就是说，`expect(array1).to include(array2)`不应该因为你得到的奇怪错误而失败，实际上它可以工作并通过如下示例：

```
 it 'includes a sub array' do
    array2 = ["a"]
    array1 = [array2]
    expect(array1).to include(array2)
  end 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-02-02T02:38:16.550

试试这个：

```
expect(array1).to include *array2 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-15T08:33:04.687

要测试一个数组是否是另一个数组的子集，引入[set](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/set/rdoc/Set.html)可能是个好主意。然后你可以这样写......（解决方案使用[Set#subset？](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/set/rdoc/Set.html#method-i-subset-3F)）

```
require "set"

describe "Small test" do
  let(:array1) { %w{a b c d} }
  let(:array2) { %w{b c} }

  let(:array1_as_set) { array1.to_set }
  let(:array2_as_set) { array2.to_set }

  subject { array2_as_set }

  context "inclusion of w/ \"expect\"" do
    it { expect(subject).to be_subset(array1_as_set) }
  end

  context "inclusion of w/ \"should\"" do
    it { should be_subset(array1_as_set) }
  end

end 
```

# javascript - Javascript 生成的链接在 Firefox 中不显示

> ID：14890377
> 
> 赞同：0
> 
> 时间：2013-02-15T07:59:45.310
> 
> 标签：javascript

我正在创建一个双语网站，每种语言版本都存储在一个单独的目录中。然后我使用下面的 javascript 生成一个链接，该链接将在 URL 中查找语言目录并将其替换为另一个目录以在语言之间切换。

```
(function () {
  // this assumes you're on the en version and want to switch to chi
  var holder = document.createElement('div');
  var url = window.location.href.replace('/eng/', '/chi/');
  var link = document.createElement('a');

  link.innerText = '中文'; // or whatever the link should be
  link.href = url;
  holder.appendChild(link);
  document.write(holder.innerHTML);
})(); 
```

它在 Chrome 和 IE 中运行良好，但 Firefox 根本不显示链接。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:36:39.243

谢谢@AtesGoral 和@katspaugh！修改如下，现在可以使用

```
(function () {
  // this assumes you're on the en version and want to switch to chi
  var holder = document.createElement('div');
  var url = window.location.href.replace('/eng/', '/chi/');
  var link = document.createElement('a');

  link.textContent = '中文'; // or whatever the link should be
  link.href = url;
  holder.appendChild(link);
  document.write(holder.innerHTML);
})(); 
```

# sql - 在存储过程中拆分后生成插入语句

> ID：14890382
> 
> 赞同：1
> 
> 时间：2013-02-15T08:00:07.277
> 
> 标签：sql, sql-server-2008, stored-procedures

我有一个接受类型参数的存储过程`VARCHAR(MAX)`。该参数具有用逗号分隔的字符串，例如

```
@test = 'test123,test456,test789'; 
```

基于该参数，我想生成多个插入语句。

我将使用这个问题中定义的 split 函数：[Split string by comma in SQL Server 2008](https://stackoverflow.com/questions/12999631/split-string-by-comma-in-sql-server-2008)。

你能告诉我一个例子如何在用逗号分割字符串后生成插入吗？

逻辑步骤应该是这样的：

```
@test = 'test123,test456,test789';
split @test
use while or cursor ? (I don't know)
INSERT INTO X values ('test123')
INSERT INTO X values ('test456')
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:19:08.510

```
DECLARE @id VARCHAR(MAX)

SET @id = 'test123,test456,test789,'

WHILE CHARINDEX(',', @id) > 0 
BEGIN

DECLARE @tmpstr VARCHAR(50)
 SET @tmpstr = SUBSTRING(@id, 1, ( CHARINDEX(',', @id) - 1 ))

INSERT  INTO X

VALUES  ( 
          @tmpstr
        )
SET @id = SUBSTRING(@id, CHARINDEX(',', @id) + 1, LEN(@id))
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T08:34:20.587

像下面这样尝试它会帮助你...

在这里你不需要任何用户定义的函数......你只需使用下面的代码并得到你的结果......

```
DECLARE @test NVARCHAR(MAX)
SET @test = 'test123,test456,test789'
SET @test = ',' + @test + ','
DECLARE @Part NVARCHAR(MAX)
DECLARE @INDEX    INT
SET @INDEX = CHARINDEX(',',@test)
DECLARE @EIND INT set @EIND = 0

WHILE(@INDEX != LEN(@test))
BEGIN
    SET  @EIND = ISNULL(((CHARINDEX(',', @test, @INDEX + 1)) - @INDEX - 1), 0)

    INSERT INTO X SELECT (SUBSTRING(@test, (@INDEX  + 1),  @EIND)) -- Insert Comes Here

    SELECT @INDEX = ISNULL(CHARINDEX(',', @test, @INDEX + 1), 0)
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:13:52.157

您可以动态创建 SQL 语句，然后运行该命令。实际上循环它对您来说不是必需的。此脚本在一个 INSERT 语句中提供多次插入

```
DECLARE @test nvarchar(100) = 'test123,test456,test789';  
DECLARE @dml nvarchar(max) = N''
SET @dml = 'INSERT [dbo].[test2] VALUES' + '(''' + REPLACE(@test, ',', '''),(''') + ''')'
EXEC sp_executesql @dml 
```

您也可以使用带有动态管理功能[sys.dm_fts_parser的选项](http://msdn.microsoft.com/en-us/library/cc280463%28v=sql.105%29.aspx)

```
SELECT FULLTEXTSERVICEPROPERTY ('IsFulltextInstalled') 
```

0 = 未安装全文。1 = 已安装全文。NULL = 无效输入或错误。

如果 0 = 全文未安装，那么这篇文章对您来说是必要的[如何在 sql server 2008 上安装全文？](https://stackoverflow.com/questions/869736/how-to-install-fulltext-on-sql-server-2008)

```
DECLARE @test nvarchar(100) = 'test123,test456,test789';
INSERT [dbo].[test2]
SELECT display_term
FROM sys.dm_fts_parser('"' + @test + '"', 1033, NULL, 0) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-15T08:19:24.467

此查询将拆分字符串，然后循环结果以构造插入注释。

```
declare @test varchar(30) = 'test123,test456,test789';

-- retrieve number of comma(s) in @test
declare @i int = len(@test) - len(replace(@test,',','')) + 1
declare @cmd nvarchar(255)

-- loop
while @i >= 0
begin
    select @cmd = 'INSERT INTO X VALUES (''' +  parsename(replace(@test, ',', '.'), @i) + ''');';
    -- execute sql
    exec sp_executesql @cmd
    set @i = @i - 1
end 
```

# android - 来自 Android 设备的时间戳，格式为 hh:mm:ss:SS

> ID：14890388
> 
> 赞同：0
> 
> 时间：2013-02-15T08:00:44.987
> 
> 标签：android, timestamp, android-sensors

我需要在 Android 中记录传感器数据。为了将值存储在数据库中，我需要时间戳作为主键，格式为 - hh:mm:ss:SS，其中 SS 表示毫秒值。当我尝试使用 SensorEvent.timestamp（使用下面的代码）时，我无法从 Date 类中获取毫秒。

```
 long currTimeRelativeToBoot = SystemClock.uptimeMillis();
    long currTimeAbsolute = System.currentTimeMillis();
    double mStartTimeAbsoluteS = ((double)(currTimeAbsolute - currTimeRelativeToBoot))/(double)1000.0;
    double temp = mStartTimeAbsoluteS+((double)event.timestamp)/1000000000.0;
    Date time=new java.util.Date((long)temp*1000); 
```

是否可以以 hh:mm:ss:SS 格式从 Android 设备获取当前时间？或者有什么替代方法？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:04:52.097

[使用 SimpleDateFormat，请参阅此处](http://www.java2s.com/Tutorial/Java/0040__Data-Type/SimpleDateFormat.htm)的教程。但是不推荐这种方式，如果长存的话，可以对比一下，排序等...

# ios - 脸书登录失败

> ID：14890389
> 
> 赞同：2
> 
> 时间：2013-02-15T08:00:47.497
> 
> 标签：ios, facebook

我遵循了 Facebook Scruptious 示例，但在授权应用程序时遇到了问题。

当我运行应用程序并且用户登录到原生 Facebook 应用程序时，应用程序的授权完美运行 - 用户被带到原生应用程序，授权并返回到应用程序。但是，如果用户没有登录到 Facebook 应用程序，他会被要求登录，但不会请求授权并且用户仍然在 Facebook 应用程序中。问题： 1\. 这是一个 FB 错误吗？有什么办法可以解决吗？2.我按下主页按钮并再次打开应用程序 - 我期待

```
- (void)applicationDidBecomeActive:(UIApplication *)application {

    [FBSession.activeSession handleDidBecomeActive];
} 
```

通过重试来处理失败的授权，但什么也没发生。

任何有关解决此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:02:18.217

我认为您在创建会话（登录）后错过了更新

你有没有这样的东西：

```
AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];

// this button's job is to flip-flop the session from open to closed
if (appDelegate.session.isOpen) {
    // if a user logs out explicitly, we delete any cached token information, and next
    // time they run the applicaiton they will be presented with log in UX again; most
    // users will simply close the app or switch away, without logging out; this will
    // cause the implicit cached-token login to occur on next launch of the application
    [appDelegate.session closeAndClearTokenInformation];

} else {
    if (appDelegate.session.state != FBSessionStateCreated) {
        // Create a new, logged out session.
        appDelegate.session = [[FBSession alloc] init];
    }

    // if the session isn't open, let's open it now and present the login UX to the user
    [appDelegate.session openWithCompletionHandler:^(FBSession *session, 
                                                     FBSessionState status, 
                                                     NSError *error) {
        // and here we make sure to update our UX according to the new session state
        [self updateView];
    }];
} 
```

记得这样做`[self updateView];`

假设您的**UpdateView**是这样的：

```
- (void)updateView {
// get the app delegate, so that we can reference the session property
AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];
if (appDelegate.session.isOpen) {        
    // valid account UI is shown whenever the session is open
    [self.buttonLoginLogout setTitle:@"Log out" forState:UIControlStateNormal];        
    [self.textNoteOrLink setText:[NSString stringWithFormat:@"https://graph.facebook.com/me/friends?access_token=%@", appDelegate.session.accessTokenData.accessToken]];

    [self performSegueWithIdentifier:@"inicio" sender:self];
} else {        
    // login-needed account UI is shown whenever the session is closed
    [self.buttonLoginLogout setTitle:@"Log in" forState:UIControlStateNormal];        
    [self.textNoteOrLink setText:@"Login to create a link to fetch account data"];        
}

 } 
```

# php - 检查表单中是否选中了任何复选框

> ID：14890390
> 
> 赞同：0
> 
> 时间：2013-02-15T08:00:52.123
> 
> 标签：php, javascript

我想对表单提交施加限制，以便它强制用户首先选择任何复选框。使用循环，我正在为每条记录打印一个复选框。

```
 <input name="Chk['<?php print $i;?>']" type="checkbox" value="<?php print $ResultArray[$i]['ClientId'];?>" class="c1"> 
```

在提交时，我正在调用一个 javascript 函数，但无法执行所需的场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:03:54.027

```
var form = document.getElementById('Form2');
var inputs = form.getElementsByTagName('input');
var is_checked = false;
for(var x = 0; x < inputs.length; x++) {
   if(inputs[x].type == 'checkbox') {
       is_checked = inputs[x].checked;
       if(is_checked) break;
   }
}
// is_checked will be boolean 'true' if any are checked at this point. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:05:11.683

您可以以这样的形式遍历所有复选框，而无需使用 jquery

该函数的参数是表单元素 {}

```
function checkCheckBoxes(formvar)
{
for (j=0; j<formvar.length; j++) {  
        if (formvar[j].type == 'checkbox') {  
            if (formvar[j].checked == true)
                    count++;            
    }
} 
```

# ios - iOS照片上传到天蓝色失败

> ID：14890396
> 
> 赞同：0
> 
> 时间：2013-02-15T08:01:24.590
> 
> 标签：ios, image, azure, azure-storage

我开始研究 windows azure cloud 以及如何在 iOS 中使用它。我的目标是创建一个应用程序，上传用 iPhone 相机拍摄的照片并将其存储到 azure。

我在 www.windowsazure.com/ 上开设了一个 azure 帐户，并按照页面中的说明创建了移动服务。然后我下载了 quickstart xcode 项目，它会自动连接到我新创建的移动服务。

文本上传就像一个魅力我能够使用快速启动应用程序将文本存储到移动服务。当我想存储用 iPhone 相机拍摄的图像时，问题就开始了。

我创建了另一个视图来快速启动项目，我可以在其中启动相机，并在拍摄照片时将其存储到 UIImageView。然后，当我单击发布按钮时，我运行以下代码：

```
- (IBAction)PublishButtonPressed:(id)sender {

    NSString *imageData = nil;
    if (self.PhotoImageView.image != nil) {
        NSData* data = UIImagePNGRepresentation(self.PhotoImageView.image);
        [Base64 initialize];
        imageData = [Base64 encode:data];

    }
    int tmp = imageData.length;

    NSDictionary *item = @{ @"text" : self.ImageTextField.text, @"complete" : @(NO), @"imageString":imageData };
    [self.todoService addItem:item completion:^(NSUInteger index){
        UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:@"Photo uploaded successfully" message:nil delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alertView show];
    }];
} 
```

我可以上传小于 6KB 的小型 PNG 和 JPG 文件，但我认为相机图像对于我的数据库来说太大了？还是太大而无法通过电话连接发送？我怎样才能让它变小？

我正在使用 TodoService 将数据上传到服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:26:00.613

您将要使用 Blob 存储而不是 SQL 数据库。我建议将 SQL 数据库用作“虚拟”或保存其他信息，例如使用配置文件详细信息。您可以通过“数据”选项卡中的脚本访问 Blob 存储。

# microsoft-sync-framework - ADO.NET 的 Microsoft 同步服务 - 数据同步 SentAnchor 问题

> ID：14890400
> 
> 赞同：0
> 
> 时间：2013-02-15T08:01:35.607
> 
> 标签：microsoft-sync-framework

我们在使用这个带有 sql server 更改跟踪的 sql express 提供程序时遇到了以下问题......</p>

1.  在服务器中插入新行
2.  服务器和客户端之间的同步
3.  插入的行被添加到客户端
4.  更新客户端中的同一行
5.  同步回服务器
6.  客户端更新的记录是增量插入的一部分，而不是增量更新
7.  由于此更新未反映在服务器中，而是我们收到了重复插入行的冲突消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:01:53.210

我假设您在某处下载了自定义 sql express 提供程序，因为在使用 sql server 更改跟踪时没有等效的 sql express 客户端同步提供程序...

查看您的 getincrementalinserts 和 getincrementalupdates 以检查为什么将更新作为插入物提取。

请问您为什么使用不受支持的提供程序而不是使用内置的 sqlsyncprovider？您是否与 SQL 更改跟踪有关？

# ios - Instruments Allocations 跟踪用户定义类的对象的分配和解除分配

> ID：14890402
> 
> 赞同：59
> 
> 时间：2013-02-15T08:01:38.680
> 
> 标签：ios, objective-c, xcode, instruments

是否可以跟踪我的 Objective-C 对象的分配和释放？例如，如果我有一个 Book 类，我想跟踪 Book 类型对象的所有分配和释放。我可以跟踪所有默认的 SKD 类，例如 UIViewController、UIWindow、UIView、NSDictionary 等等，但我还想跟踪从我定义的类创建的对象。

* * *

## 回答 #1

> 赞同：223
> 
> 时间：2013-02-15T09:41:14.237

您可以使用分配工具来跟踪对象的生命周期。如果您使用“分配”模板，它被配置为记录`malloc`和`free`事件。您可能希望通过打开分配工具设置中的“记录引用计数”复选框将其配置为也记录`retain`、`release`和事件：`autorelease`

![记录引用计数复选框](../Images/951a60233c79db8e7be12f36add85a20.png)

（在 Instruments 录制时，您无法切换此选项，默认情况下，它会在您选择模板后立即启动。）

> **Xcode 9 更新：** Apple 使查找这些设置变得更加困难。现在您需要选择 Allocations 工具，然后从菜单栏中选择 File > Recording Options。

运行后，您可以使用 Allocations > Statistics > Object Summary 视图找到您的对象，这是 Detail 窗格（窗口的下半部分）的默认设置：

![详细信息窗格的对象摘要设置](../Images/91ad9bebcbc9bcca3e334abdb687db06.png)

如果您想查看在停止运行之前已被释放的对象，您需要将分配生命周期设置从“Created & Still Living”（默认）更改为“All Objects Created”：

![分配寿命设置](../Images/ccb15b54211083fe138748cfb8535fe6.png)

要查找特定类的对象，首先在窗口工具栏右端的“搜索”字段中键入类名称。然后在列表视图的 Category 列中找到类名，将鼠标悬停在它上面，然后单击它旁边出现的箭头。例如，我的应用程序有一个名为 的类`Tile`，所以我搜索它，然后单击`Tile`列表视图中旁边的箭头：

![搜索](../Images/ed7a90903741041bbb5cb9641c4b347e.png)

现在列表视图显示`Tile`. （请注意，您必须输入对象的实际类，而不是超类。输入`NSObject`只会找到由 创建的`[NSObject alloc]`对象，而不是由 创建的对象`[Tile alloc]`。）我可以通过单击箭头来查看任何特定实例的历史记录下一步到该实例的地址：

![获取详细信息](../Images/1b0cf36776a5f7ca67b4e8d531ac4ac9.png)

在对象的详细视图中，我可以看到`malloc`和`free`事件，并且由于我打开了“记录引用计数”，我还可以看到`retain`、`release`和`autorelease`消息以及它们对对象保留计数的影响。如果我想查看任何这些事件的调用堆栈，我可以打开窗口右侧的扩展详细信息面板：

![调用堆栈的扩展细节](../Images/34d05ffae27599ec44b85a8c14bcf28b.png)

# android - Android SQlite删除AlertDialogBox项中未删除的列

> ID：14890403
> 
> 赞同：1
> 
> 时间：2013-02-15T08:01:38.803
> 
> 标签：android, android-sqlite

任何人帮助我删除 SQlite 删除列，其中集合（列数据）保存在数据库中。

有时它的效果很好，但有时它不会一键删除。我的代码：-

```
DatabaseHandler dbh = new DatabaseHandler(this);

SQLiteDatabas db = dbh.getWritableDatabase();

db.delete(dbh.TABLE_CONTACTS, dbh.KEY_ID + "=?",new String[] { idList.get(which) });
db.close(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:06:35.423

您需要更新您的 UI，一旦您向 UI 渲染了某些内容，它就会留在 UI 中并且不连接到任何背景数据

# wordpress - Woocommerce actionhook 不起作用

> ID：14890404
> 
> 赞同：1
> 
> 时间：2013-02-15T08:01:54.607
> 
> 标签：wordpress, wordpress-theming, woocommerce

我们有一个简单的 woocommerce 动作钩子的问题。目标是显示德国市场的具体信息。

在使用相同的 actionhook 进行了两个小时的测试后，我将 hook 简化为以下内容：

```
add_action( ‘woocommerce_single_product_summary’, ‘additional_text’, 10, 2);

function additional_text() {
    echo '<p>This is additional text.</p>';
} 
```

相反，以下代码段按预期工作：

```
remove_action( 'woocommerce_single_product_summary', 'woocommerce_template_single_price', 10, 2);

add_action( 'woocommerce_single_product_summary', 'woocommerce_template_single_price', 20, 2); 
```

并将价格从产品摘要移到产品摘要后面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:19:58.123

好的，我在安装另一个带有突出显示的编辑器后找到了解决此问题的方法。突出显示看起来是错误的。这是由于错误的撇号。我用'而不是'。似乎是复制和粘贴错误。在键入此内容时，我认识到即使是 stackoverflow 代码荧光笔也会显示此错误:)

# php - 通过添加到购物车贝宝购买多件商品

> ID：14890412
> 
> 赞同：3
> 
> 时间：2013-02-15T08:02:20.703
> 
> 标签：php, forms, paypal

我正在通过“添加到购物车”贝宝按钮购买不止一件商品。这是我的代码：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">

          <input type="hidden" name="cmd" value="_cart"/>
          <input type="hidden" name="upload" value="1"/>

          <input type="hidden" name="business" value="seller_1360303883_biz@gmail.com"/>
          <input type="hidden" name="currency_code" value="USD"/>

          <input type="hidden" name="item_name_1" value="Item Name 1"/>
          <input type="hidden" name="amount_1" value="$<?php  echo $price1 ?>"/>
          <input type="hidden" name="shipping_1" value="1.75"/>
          <input type="hidden" name="quantity_1" value="1"/>

          <input type="hidden" name="item_name_2" value="Item Name 2"/>
          <input type="hidden" name="amount_2" value="$<?php  echo $price2 ?>"/>
          <input type="hidden" name="shipping_2" value="2.50"/>
          <input type="hidden" name="quantity_2" value="1"/>

          <input type="hidden" name="item_name_3" value="Item Name 3"/>
          <input type="hidden" name="amount_3" value="$<?php  echo $price3 ?>"/>
          <input type="hidden" name="shipping_3" value="2.50"/>
          <input type="hidden" name="quantity_3" value="2"/> 
```

```
 <!-- <input type="submit" value="PayPal"/> -->

        </form> 
```

通过使用上面的代码 i; 得到错误：

“您输入的数量值无效。数量值必须是大于或等于一的整数。”

我已经搜索过它并尝试了这些建议，但它们都没有奏效。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:56:57.593

我认为您正在使用沙箱，并且您正在使用贝宝的表单操作 insetead 贝宝的沙箱

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:05:34.417

我希望该值不应该在其前面加上美元符号。您没有提交大于或等于其中的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T23:21:22.967

当我在每个 PHP 语句中使用分号时，它对我有用。

```
<?php

$price1=12.99;
$price2=13.49;
$price3=17.99;

?>

<input type="hidden" name="amount_1" value="<?php  echo $price1; ?>"/>
<input type="hidden" name="amount_2" value="<?php  echo $price2; ?>"/>
<input type="hidden" name="amount_3" value="<?php  echo $price3; ?>"/> 
```

您可能想要验证您拥有的 $prices 是否有效。

# c# - Facebook 页面上发布的链接不显示

> ID：14890414
> 
> 赞同：0
> 
> 时间：2013-02-15T08:02:43.783
> 
> 标签：c#, facebook-graph-api, hyperlink, posting

我正在开发一个需要在 Facebook 页面上自动发布链接的小模块。我已经完成了以下设置：

*   创建了一个 Facebook 页面（将显示链接的页面）
*   创建了一个 Facebook 应用程序
*   在页面管理员个人资料以及 Facebook 页面上添加了具有以下权限的应用程序：publish_stream、manage_pages

为了获得有效的访问令牌（暂时手动 - 我知道不推荐这样做，但在我的情况下它可以完成工作）我做了以下工作：

1.  以页面管理员身份登录
2.  导航到页面：https://developers.facebook.com/tools/access_token/
3.  复制用户令牌并通过 GET-ting 以下 url 使其非瞬态： https://graph.facebook.com/oauth/access_token?client_id={app id}&client_secret={app secret}&grant_type=fb_exchange_token&fb_exchange_token={the我之前复制的令牌}
4.  从步骤 3 产生的用户令牌中获取页面访问令牌，方法是向：[https](https://graph.facebook.com/me/accounts?access_token=) ://graph.facebook.com/me/accounts?access_token= {永不过期访问令牌}

从我在第 4 步之后获得的 json 中复制我感兴趣的页面的访问令牌，并使用以下 C# 代码发布链接：

```
try
        {
            dynamic data = new ExpandoObject();

            var fbm = message as FacebookMessage;

            data.access_token = ConnectionData.AuthenticationToken;
            data.message = fbm.Message;
            data.link = fbm.Link;
            data.name = fbm.Name;
            data.caption = fbm.Caption;
            data.description = fbm.Description;
            if (!String.IsNullOrEmpty(fbm.Icon))
            {
                data.picture = fbm.Icon;
            }
            var @params = ((ExpandoObject)data).ToUrl();

            var _currentRequest = (System.Net.HttpWebRequest)System.Net.WebRequest.Create(String.Format("https://graph.facebook.com/{0}/feed?{1}", _currentEndpoint.ObjectID, @params));
            _currentRequest.Method = "POST";
            _currentRequest.ContentType = "application/json; charset=utf-8";
            _currentRequest.UserAgent = "Mozilla/4.0 (compatible; Windows NT)";
            _currentRequest.Accept = "*/*";
            _currentRequest.CookieContainer = new CookieContainer();
            _currentRequest.KeepAlive = false;
            //_currentRequest.Credentials = System.Net.CredentialCache.DefaultCredentials;

            //using (var sw = new StreamWriter(_currentRequest.GetRequestStream(), Encoding.UTF8))
            //{
            //    sw.Write(json);
            //}

            string json;
            var resp = _currentRequest.GetResponse();

            using (StreamReader sr = new StreamReader(resp.GetResponseStream()))
            {
                json = sr.ReadToEnd();
            }

            var jsonSerializer = new System.Web.Script.Serialization.JavaScriptSerializer();
            var output = jsonSerializer.Deserialize<dynamic>(json);

            return new OperationStatus();
        }
        catch (Exception ex)
        {
            return new OperationStatus { Exception = ex };
        }
    } 
```

“_currentEndpoint.ObjectID”是页面的对象 ID。POST 成功完成，只要我以管理员身份登录，我就会看到该链接发布在管理员的墙上以及页面本身上。我越早注销，我就看不到任何发布的链接，也看不到任何喜欢该页面的人。

是什么赋予了？如何使链接显示在页面墙上以及喜欢该页面的人的墙上。我确实检查了页面上的垃圾邮件，但我在那里看不到我的链接，从隐私设置来看，一切似乎都是可见的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:33:20.263

阅读此帖子后：[发布指向未显示页面的链接？](https://stackoverflow.com/questions/14213682/posting-a-link-to-a-page-not-showing-up)我终于启动并运行了。问题似乎出在访问令牌上，但我仍然没有弄清楚出了什么问题：这是我最后所做的：

*   去 Graph API explorer [http://developers.facebook.com/tools/explorer/](http://developers.facebook.com/tools/explorer/)
*   向我/帐户发送了 GET
*   作为回应，我得到了可用帐户列表（包括我的应用程序的帐户）
*   从该响应中获取访问令牌。

这似乎为我提供了在页面墙上向每个人发布可见链接所需的访问令牌。

# hibernate - JPA、EJB3 和休眠有什么区别？

> ID：14890415
> 
> 赞同：-2
> 
> 时间：2013-02-15T08:02:45.900
> 
> 标签：hibernate, jpa, ejb-3.0

我曾使用休眠的 JPA 提供程序在 ejb3 上工作，现在正在研究休眠。但是我很困惑这些技术之间有什么区别，因为 jpa、hibernate 和 ejb3 我没有发现这样的区别。任何机构都可以解释主要特征或两者之间的主要区别是什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T08:05:23.710

> 持久性已从“EJB3 核心”中“分离出来”，并形成了一个新标准，即 Java 持久性 API (JPA)。JPA 使用该 `javax.persistence`包，最初在 EJB3 规范 JSR 220 中的单独文档中指定，但后来移至其自己的规范 JSR 317。重要的是，`javax.persistence`不需要 EJB 容器，因此可以在 Java SE 环境中工作。

来源：[http ://en.wikipedia.org/wiki/Java_Data_Objects#JDO_vs._EJB3_vs._JPA](http://en.wikipedia.org/wiki/Java_Data_Objects#JDO_vs._EJB3_vs._JPA)

其他解释：[http ://en.wikipedia.org/wiki/Java_Persistence_API#Related_Technologies](http://en.wikipedia.org/wiki/Java_Persistence_API#Related_Technologies)

Hibernate 是 JPA 规范的一个实现。

# asp.net-mvc-4 - SignalR 集线器 js 文件已损坏（单声道 3.0.3）

> ID：14890417
> 
> 赞同：0
> 
> 时间：2013-02-15T08:02:51.210
> 
> 标签：asp.net-mvc-4, signalr, signalr-hub

我正在尝试在 ubuntu linux 上的 mono 3.0.3 下运行可能的 MVC 4 应用程序。应用程序本身运行良好，但信号器不是。我看到的问题是信号器/集线器文件已损坏。文件内容似乎是有效的 javascript，除了该文件的第一行和最后一行。 ![在此处输入图像描述](../Images/154bc7065fcfe350d53cc428cf926cc2.png)

我正在使用开发分支信号器来构建信号器。当我在 linux 中编译 signalr 时，这个数字发生了变化。

![在此处输入图像描述](../Images/beb3c13d9398b4cdfc24cefc3eab5cf7.png)

这就是该文件的最后一行的外观。**问题仅在 MONO 中发生**。在 IIS 下，它按预期工作。

请指教。

PS我只能编译开发分支。我的机器上无法编译主分支（单声道 3.0.3）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:45:04.103

您的网络服务器未正确处理分块编码 ( [http://en.wikipedia.org/wiki/Chunked_transfer_encoding](http://en.wikipedia.org/wiki/Chunked_transfer_encoding) )。我不确定你需要做什么来解决这个问题。

# git - gitignore 文件不会忽略并且 git rm 实际上会删除文件

> ID：14890418
> 
> 赞同：0
> 
> 时间：2013-02-15T08:03:03.937
> 
> 标签：git, github, yii

所以我找到了一个解决方案，其中 .gitignore 应该忽略我告诉它的文件。但事实证明，如果你已经提交了它们， .gitignore 文件并不重要。建议的解决方案是 git rm 文件名。

我的问题是，
有一个我想贡献的 repo，它已经提交了所有初始文件。因此，我在 .gitignore 中添加了一些我想要 gitignore 的文件名，并提交它推送它并合并拉取请求。
现在我正在对其中一个 gitignore 文件进行更改，当我执行 git status 时，它显示修改（预期）。所以我做了一个 git rm index.php 并且文件被删除了。这不应该是解决方案，对吧？那么我应该删除它并提交它并推拉它吗？那时就没有了。
我确定我做错了什么。
欢迎任何帮助。

PS 我读了这个[Git Ready Link](http://gitready.com/intermediate/2009/02/18/temporarily-ignoring-files.html)但每次都假设不变，这是不可行的。

我的 gitignore 文件看起来像这样：

```
/index.php
/assets/*
/protected/config/*
/protected/runtime/*
*~
[#]*[#] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:17:08.217

我想你需要

```
$ git update-index --assume-unchanged config_file 
```

而不是修改`.gitignore`文件以忽略它们。

通过这种方式，您可以将文件保留在那里，但所做的任何更改都将被忽略。当你需要修改它时，使用

```
$ git update-index --no-assume-unchanged config_file 
```

重新跟踪文件。然后你可以提交修改`config_file`。

我认为这是管理配置相关文件的更好方法。`.gitignore`更适合临时文件。:)

# sap - 在使用 SAP DI Server OdersService 下订单时添加发货地址和账单地址

> ID：14890420
> 
> 赞同：-1
> 
> 时间：2013-02-15T08:03:11.313
> 
> 标签：sap

我在 sap sdk 帮助文件中查找了有关 ordersServices 的文档，但不幸的是，他们没有提到有关此服务的任何内容。我想使用 di 服务在 sap 销售订单中的物流选项卡下添加发货地址和开票地址，这些地址将存在于销售订单文档中，但不在业务伙伴主数据中。我怎样才能做到这一点？欢迎任何指向 DI 服务器 OrdersServices 的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:55:40.507

是的，您可以将您的账单地址添加为

```
<Address><'YOUR ADDRESS HERE'></Address>" 
```

并发货地址为

```
<Address2><'YOUR ADDRESS HERE'></Address2>" 
```

在你的 xml 中。

# html - 我如何使用带有 geoJSON 坐标而不是点的 KineticJS 多边形对象？

> ID：14890427
> 
> 赞同：0
> 
> 时间：2013-02-15T08:03:31.427
> 
> 标签：html, gis, kineticjs, geojson

我正在使用 KineticJS 在 HTML5 画布上创建交互式地图，问题是我的地图数据在 geoJSON 中，所以我有多边形坐标而不是多边形点。

这就是我对多边形点的处理方式（[根据本教程](http://www.codeproject.com/Articles/404239/HTML5-Interactive-Map-using-SVG-Path-and-Polygon)）

```
 //Javascript object with map data
    var myMap = {
    'Russia': {
     points: [44,1,397,1,518,2,518,151,515,..............6,43,4,43,4]
    },
    'Azerbaijan': {
     points: [198, 242, 201, 245, 203,..............197, 242]
    },
    'UAE': {
     points: [224,406,225,410,...............225,407]
    }
   };

    //Function to return map data
    function getData() {
    return myMap;
    } 
```

然后使用 KineticJS 多边形对象在 HTML5 画布上绘制地图。

```
 //store map data in a variable
     var areas = getData();

    //Loop through the map
    for (var key in areas) {
        (function () {
            var k = key;
            var area = areas[key];
            var points = area.points;

            var shape = new Kinetic.Polygon({
                points: points,
                fill: '#fff',
                stroke: '#555',
                strokeWidth: .5,
                alpha: 0.1
              });

            } ());
        } 
```

有人知道我如何使用 geoJSON 坐标实现相同的目标吗？这是 geoJSON 的示例。坐标嵌套在几何对象内。

```
 {
"type": "FeatureCollection", 
"features": [{ "type": "Feature", "id": 0, 
"properties": { "OBJECTID_1": 29, "OBJECTID": 29, "COUNTY_NAM": "BARINGO", "COUNTY_COD": 30, "Shape_Leng": 5.81571392065, "Shape_Area": 0.88451236881 }, 
"geometry": { "type": "Polygon", "coordinates": [ [ [ 36.028686523000033, 1.276123047000056 ], [ 36.036499023000033, 1.263916016000053 ], [ 36.039306641000053, 1.259887695000032 ],............[ 36.028686523000033, 1.276123047000056 ] ] ] } }
]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:25:46.380

多边形对象接受数据作为数组或点对象，它具有 x 和 y。

```
var polygonData = coordinates.map( function(cord) {
  return {x:cord[0],y:cord[1]};
})

//excample
array = [[1,2],[3,4],[5,6]]
array.map( function(cord) {
  return {x:cord[0],y:cord[1]};
})
// will return [{x:1,y:2},{x:3,y:4}, {x:5,y:6}] 
```

或者，如果您只想获取一个数组（无 x，y）

```
var flattened = [[0, 1], [2, 3], [4, 5]].reduce(function(a, b) {
    return a.concat(b);
});
// flattened is [0, 1, 2, 3, 4, 5] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:32:57.627

```
 var myArray = new Array();
  for( var level1 in coordinates ){ // for each array in coordinates
       for( var level2 in level1){    // for each array in that array
            for( var number in level2){   // for each number in that array
                myArray.push(number);
            }
       }
  }
  var points = myArray; 
```

也许这是太多的嵌套级别，但这是主要思想：

遍历所有子数组并获取每个子数组中的数字并将它们放入一个新数组中。

# android - 构造函数 Notification(int, String, long) 未定义

> ID：14890433
> 
> 赞同：0
> 
> 时间：2013-02-15T08:04:00.647
> 
> 标签：android, notifications

我正在尝试直接从主活动创建通知。

这是我的代码 -

```
public class Notification extends Activity{

private static final int NOTIFY_ME_ID=1987;
private int count=0;
private NotificationManager mgr=null;

  @Override
  public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    mgr=(NotificationManager)getSystemService(NOTIFICATION_SERVICE);

    notifyMe();

  }

public void notifyMe(){

Notification notification = new Notification(R.drawable.icon,
        "Notification text that will be shown on status bar.", 
        System.currentTimeMillis());

// The PendingIntent will launch activity if the user selects this
// notification
PendingIntent contentIntent = PendingIntent.getActivity(Notification.this,
        0, new Intent(Notification.this, MainActivity.class), 0);
notification.setLatestEventInfo(Notification.this, "Content Title", "Content text",
        contentIntent);
mgr.notify(NOTIFICATION_ID, notification);

} 
```

但我收到以下错误：构造函数 Notification(int, String, long) 未定义

我得到错误的行如下：

```
 Notification notification = new Notification(R.drawable.icon,
        "Notification text that will be shown on status bar.", 
        System.currentTimeMillis()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:31:44.523

[Android Notification](http://developer.android.com/reference/android/app/Notification.html)的构造函数没有任何问题。问题出在您的活动名称上，它也是`Notification`。您应该更改为其他名称以解决问题。

无需更改活动名称，您可以包含包以使系统清楚要使用哪个**通知**。请参阅用户 system32 提供的[此解决方案。](https://stackoverflow.com/a/14890786/1465828)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T08:34:25.020

```
android.app.Notification notification 
                = new android.app.Notification(icon, tickerText, when); 
```

我建议将该活动重命名为`NotificationActivity`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:09:34.357

用于创建通知，如此[处](http://developer.android.com/reference/android/app/Notification.Builder.html)`Notification.Builder`所示。

# asp.net-mvc-4 - ASP.NET 路由：根据扩展返回特定格式

> ID：14890434
> 
> 赞同：1
> 
> 时间：2013-02-15T08:04:09.087
> 
> 标签：asp.net-mvc-4, asp.net-mvc-routing

我正在尝试创建一个 MVC 4 应用程序，我对此有点陌生。如何将路由映射到特定的文件扩展名？

我想做这样的事情：

```
Controller/Action/ (maybe an ID) 
```

这应该返回一个 MVC 视图，供用户在他们的浏览器中查看。

在另一种情况下：

```
Controller/Action/ (Maybe an ID) .json 
```

或者：

```
Controller/Action/ (Maybe an ID) .xml 
```

这应该返回相同的对象，但在 JSON 或 XML 中，供 web 服务使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:05:12.270

与其说是映射到扩展，不如说是 MVC 4 URL 不需要直接对应于文件。相反，您注册路由，这些路由对应于控制器操作。因此，为此，您可以使用以下路线：

*   `/something/page/{ID}`哪个链接`SomeController.ShowPage(int ID)`返回一个`ViewResult`
*   `/something/page/{ID}/xml`哪个链接`SomeController.PageAsXML(int ID)`返回一个`XDocument`
*   `/something/page/{ID}/json which links to`SomeController.PageAsJSON(int ID) `which returns a`JsonResult`

当您的服务器启动时，这些路由由 Application_Start() 代码中调用的方法注册。XML 页面示例的简单路由注册如下所示：

```
public class MvcApplication : System.Web.HttpApplication
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.MapRoute(
        "PageView_XML",
        "{controller}/page/{id}/xml",
        new { id = "" }  
        );
    }
} 
```

在这里，路由被调用`"PageView_XML"`以适应一个假设的命名方案，其中还有 a`"PageView"`和 a `"PageView_JSON"`。名称必须是唯一的。任何与该模式匹配的 URL`{controller}/page/{id}/xml`都将使用此路由，其中​​任何写法`{this}`都是一个参数，它将与正确位置的任何字符串匹配。您会注意到它`{id}`的默认值是`""`（一个空字符串），这可能不是很有用；您可以选择您的控制器方法将识别并使用的东西来显示合适的错误页面。

您可以混合使用`{param}`标签和文本，这样`{controller}/page/{id}-xml`甚至`{controller}/page/{id}_{format}`可以工作。我不太确定，`{controller}/page/{id}.xml`或者`{controller}/page/{id}.{format}`因为它的处理方式可能`.`不同。

查看[有关路由的 MSDN 信息](http://msdn.microsoft.com/en-us/library/cc668201%28v=vs.100%29.aspx)，尤其是有关添加路由的[更多](http://msdn.microsoft.com/en-us/library/cc668201%28v=vs.100%29.aspx#adding_routes_to_an_mvc_application)详细信息。[O'Reilly](http://ofps.oreilly.com/titles/9781449320317/ch_Routing.html)也有一些方便的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T16:31:17.123

您可以在 MVC4 Web API 的 Json 和 Xml Mediatypeformatters 上使用名为 AddUrlPathExtensionMapping 的扩展方法，使您能够请求这些特定格式的数据。

# c# - RavenDB，以编程方式检查服务器实例是否正在运行

> ID：14890435
> 
> 赞同：6
> 
> 时间：2013-02-15T08:04:22.977
> 
> 标签：c#, ravendb, ravendb-http

我通过以下方式配置我的文档存储：

```
store = new DocumentStore { Url = serverUrl };
store.Initialize(); 
```

我想知道如何确保在初始化之前或之后**但在**打开会话之前客户端是否连接到服务器。我没有启动服务器，我仍然可以初始化存储，如果它无法在指定的 url 下找到服务器，则不确定为什么或是否默认创建嵌入式数据库。知道如何检查客户端和服务器之间是否建立了连接吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T18:46:19.277

初始化实际上并没有打开连接。RavenDB 客户端根据需要打开和关闭连接。

它不会恢复为嵌入式数据库。`EmbeddableDocumentStore`如果需要嵌入式数据库实例，则必须显式使用。

如果您想检查自己的服务器是否启动，您可以做一些事情，看看它是否失败。您可以做的最简单的事情可能是尝试获取 RavenDB 服务器的内部版本号。这可以使用`documentStore.AsyncDatabaseCommands.GetBuildNumberAsync()`.

这里有一些扩展方法可以帮助它变得更容易。将它们放在一个静态类中：

```
public static bool TryGetServerVersion(this IDocumentStore documentStore, out BuildNumber buildNumber, int timeoutMilliseconds = 5000)
{
    try
    {
        var task = documentStore.AsyncDatabaseCommands.GetBuildNumberAsync();
        var success = task.Wait(timeoutMilliseconds);
        buildNumber = task.Result;
        return success;
    }
    catch
    {
        buildNumber = null;
        return false;
    }
}

public static bool IsServerOnline(this IDocumentStore documentStore, int timeoutMilliseconds = 5000)
{
    BuildNumber buildNumber;
    return documentStore.TryGetServerVersion(out buildNumber, timeoutMilliseconds);
} 
```

然后你可以像这样使用它们：

```
var online = documentStore.IsServerOnline(); 
```

或者像这样：

```
BuildNumber buildNumber;
var online = documentStore.TryGetServerVersion(out buildNumber); 
```

# less - 更少的编译器之间的不同 CSS 输出

> ID：14890437
> 
> 赞同：1
> 
> 时间：2013-02-15T08:04:26.563
> 
> 标签：less

有一段时间，我曾经使用[Sublime](http://sublimetext.com/2)的[less2css插件编译我的](https://github.com/timdouglas/sublime-less2css)[less](http://lesscss.org/)，但最近我开始使用[LiveReload](http://livereload.com/) *，我喜欢它。

我注意到 CSS 输出之间的差异取决于我使用的编译器。

对于以下 LESS：

```
.gallery {
    margin-bottom: 1em;

    img {
        .wide-gallery& {
            width: 49%;

            &:nth-child(odd) {
                margin-right: 2%;
            }
        }
    }
} 
```

LiveReload 给了我预期的输出：

```
.gallery {
  margin-bottom: 1em;
}
.wide-gallery.gallery img {
  width: 49%;
}
.wide-gallery.gallery img:nth-child(odd) {
  margin-right: 2%;
} 
```

...但是我在 sublime 中的 less2css 插件与我的选择器不匹配：

```
.gallery {
  margin-bottom: 1em;
}
.wide-gallery .gallery img {
  width: 49%;
}
.wide-gallery .gallery img :nth-child(odd) {
  margin-right: 2%;
} 
```

这两个编译器是否只是使用不同版本的less？我不确定这里发生了什么。

*我在 Windows 8 上使用 LiveReload v0.7.1.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:25:28.003

就我而言，紧缩！做得很好 [http://crunchapp.net/](http://crunchapp.net/)

# maven - 如何为 Jersey Jax-RS maven 项目添加 JSR-311 依赖项

> ID：14890438
> 
> 赞同：4
> 
> 时间：2013-02-15T08:04:41.120
> 
> 标签：maven, jersey, jax-rs

以下问题讨论了 Jersey 和 JAX-RS 规范之间的依赖关系理论：

*   [JAX-RS 与 Jersey 和 JSR 相关](https://stackoverflow.com/questions/8476820/jax-rs-in-relation-to-jersey-and-jsrs/8477039#8477039)

我假设我可以添加依赖项：

```
 <!--  javax.ws.rs.core e.g. Request -->
  <dependency>
     <groupId>javax.ws.rs</groupId>
     <artifactId>jsr311-api</artifactId>
     <version>1.0</version>
  </dependency> 
```

到我的 API 定义 maven 项目并使用 Jersey/Grizzly 进行实施。

```
 <jersey.version>1.15</jersey.version>
    <grizzly.version>2.2.20</grizzly.version> 
```

与此假设相反，我收到以下错误消息：

```
15.02.2013 08:41:25 org.glassfish.grizzly.http.server.HttpServerFilter handleRead
WARNUNG: Unexpected error
java.lang.IncompatibleClassChangeError: Class javax.ws.rs.core.Response$Status does not implement the requested interface javax.ws.rs.core.Response$StatusType
    at com.sun.jersey.spi.container.ContainerResponse.getStatus(ContainerResponse.java:571) 
```

应该与 Jersey 1.15 一起使用的正确 JAX-RS API 依赖项是什么？

我想以一种可以将实现替换为任何其他符合 JAX-RS 的库的方式来实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T00:23:10.160

问题是您的 JSR 311 API 依赖项是 1.0 版，而 Jersey 1.15 是 JSR 311 1.1 版实现。比较[http://jsr311.java.net/nonav/releases/1.0/javax/ws/rs/core/Response.Status.html](http://jsr311.java.net/nonav/releases/1.0/javax/ws/rs/core/Response.Status.html)和[http://jsr311.java.net/nonav/releases/1.1/javax/ws /rs/core/Response.Status.html](http://jsr311.java.net/nonav/releases/1.1/javax/ws/rs/core/Response.Status.html)，你会看到后者实现了`ResponseType`接口，但前者没有。

通过声明如下内容，您应该能够在构建时类路径中拥有 JSR 311 版本 1.1.1 API 类文件：

```
<dependency>
    <groupId>javax.ws.rs</groupId>
    <artifactId>jsr311-api</artifactId>
    <version>1.1.1</version>
    <scope>provided</scope>
</dependency> 
```

事实上，jersey-core`pom.xml`已经这样做了——上面只是[http://repo1.maven.org/maven2/com/sun/jersey/jersey-core/1.15/jersey-core-1.15.pom](http://repo1.maven.org/maven2/com/sun/jersey/jersey-core/1.15/jersey-core-1.15.pom)中的第一个依赖项.

在像 Glassfish 这样的容器中，您现在已经完成了，因为容器将负责在运行时为您提供 API 类（这就是为什么 jersey 自己的 Maven POM 中的范围是`provided`，而不是`compile`）。但是，对于 Grizzly Web 容器，您可能需要确保 API 类在运行时可用（通过使用`<dependency>`上面的声明，但从 更改`<scope>`为`provided`会`compile`做到这一点）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T08:57:01.283

好吧，如果您只是使用球衣，您可以使用标准注释来注释您的代码，例如

```
import javax.ws.rs.Path; 
```

**该类实际上是由 jersey jars 提供的。**但是，由于这是注释的标准名称，删除球衣依赖并使用 JSR-311 的另一种实现，您可能能够使其工作而没有太多痛苦。但在我看来，这在理论上比在实践中看起来更好。这类事情很少能像预期的那样顺利。

所以我担心你的问题没有令人满意的答案（但我很高兴错了）......

# javascript - 如何在 div 内的行和列中创建和排列多个 div

> ID：14890441
> 
> 赞同：0
> 
> 时间：2013-02-15T08:04:58.867
> 
> 标签：javascript, jquery, html

我有一个主 div，我必须在其中创建多个具有特定高度和宽度的 div，并按行和列排列。例如 5 行和 8 列。每个 div 高度为 80 像素，宽度为 75 像素。如何做到这一点？

我试过：

```
$(document).ready(function() {
 for(var i = 1; i <= 40; i++) {
  $('#test').append('<div id="page' + i + '" class="touch">TESTING</ div>' )
 }
} 
```

HTML：

```
<div id="test">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:10:12.300

使用以下样式创建您的 div 表结构...

```
.table {
    display:table;
    width: 100%;
}
.row {
    display:table-row;
    width: 100%;
    height: 80px;
}
.cell {
    display:table-cell;
    width: 75px; 
    vertical-align: middle;
} 
```

这段代码可以让你了解它是如何工作的

```
$(document).ready(function() {
    for(var i = 1; i <= 5; i++) {
        $('#test').append('<div class="row">' );
        for(var j = 1; j <= 8; j++) {
            $('#test').append('<div id="page' + i + '" class="touch cell">TESTING</ div>' );
        }
        $('#test').append('</ div>' );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:11:40.613

我认为有几种方法可以完成这项任务，但我会尝试使用 css 浮动来解决它。您可以浮动一个 div，它会失去它的阻止行为，因此多个 div 可以在一行中。例如，如果您将所有 div 浮动到左侧，并且如果您给主 div 的宽度为 640px，那么恰好 8 个 div 应该在主 div 中排列...

```
#maindiv {
    width: 640px;
}

.divcells {
    width: 80px;
    height: 75px;
    padding: 0px;
    margin: 0px;
    border: 0px;
    float: left;
    display: block;
}

$(document).ready(function() {
    for(var i = 1; i <= 40; i++) {
        $('#maindiv').append('<div id="page' + i + '" class="divcells">TESTING</ div>' )
    }
} 
```

然后，您只需使用 javascript 添加与主 div 一样多的单元格 div。确保单词“TESTING”不超过 80px，否则你应该在 div 单元格中添加溢出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:20:26.627

如果您不是绝对坚持使用 div，您不妨使用表格：

```
$(document).ready(function() {
    var output = '<table>\n<tr>\n';
    for(var i = 0; i < 40; i++) {       // The `40` here is the amount of cells.
        if(i % 5 == 0 && i > 0){        // The `5`  here is the amount of rows.
            output += '</tr>\n<tr>\n';
        }
        output += '<td id="page' + (i+1) + '" class="touch">TESTING</ td>\n';
    }
    $('#test').append(output + '</tr>\n</table>';)
} 
```

表格完全符合您的需要，在网格中显示数据。

# php - 无法在 PHP 中访问 jquery Json POST 参数，但可以使用 Ajax 和 Normal 发布

> ID：14890448
> 
> 赞同：1
> 
> 时间：2013-02-15T08:05:33.193
> 
> 标签：php, json, post

当我通过 AJax 发送 POST 参数时，我会根据以下 url 的要求得到响应，但不是通过 Json。我什至做了一个 print_r($_POST) 来检查服务器并在 Json 中获取一个空白数组。你能告诉我我做错了什么吗？在其他页面中，我的 Json 以同样的方式工作正常。

网址：[http ://www.ajatus.in/ajatus_templates/Templaton/wp-content/plugins/realestate/registrationJson.php](http://www.ajatus.in/ajatus_templates/Templaton/wp-content/plugins/realestate/registrationJson.php)

* * *

阿贾克斯代码：

```
 <html>
    <head>
    <script language="javascript" type="text/javascript">

    function showUser()
    {

    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
        }
      }
       var title="My title";
      var fname="Asish";
      var lname="Mohanty";
      var city="BBSR";
      var conNo="9475654563";
      var pwd="asish";
      var email="asish@gmail.com";
      var state="Odisha";
      var country="India";

     xmlhttp.open("POST","http://www.ajatus.in/ajatus_templates/Templaton/wp-content/plugins/realestate/registrationJson.php",true);
     xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
     xmlhttp.send("title="+title+"&fname="+fname+"&lname="+lname+"&city="+city+"&conNo="+conNo+"&pwd="+pwd+"&email="+email+"&state="+state+"&country="+country);

    }
    </script>
    </head>
    <body>

    <form method="post">
    <input type="button" value="SUBMIT" onClick="showUser()">

    </form>
    <br />
    <div id="txtHint" align="center"><b></b></div>

    </body>
    </html> 
```

* * *

json代码：

```
 <html>
    <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script language="javascript" type="text/javascript">
    function showUser() {
      var title="My title";
      var fname="Asish";
      var lname="Mohanty";
      var city="BBSR";
      var conNo="9475654563";
      var pwd="asish";
      var email="asish@gmail.com";
      var state="Odisha";
      var country="India";
        $.ajax({
            type: "POST",
            //the url where you want to sent the userName and password to
            url: 'http://www.ajatus.in/ajatus_templates/Templaton/wp-content/plugins/realestate/registrationJson.php',
            dataType: 'json',
            async: false,
            //json object to sent to the authentication url
            data: JSON.stringify({ "title" : title,"fname" : fname,"lname": lname,"city" : city,"conNo": conNo,"pwd" : pwd,"email": email,"state" : state,"country" : country }),
            success: function (data) {

            alert(data); 
            }
        });
    }
    </script>
    </head>
    <body>

    <form method="post">
    <input type="button" value="SUBMIT" onClick="showUser()">

    </form>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:13:02.370

`$_POST`处理`Content-type:application/x-www-form-urlencoded`非 JSON 以获取 JSON 使用

```
$data = json_decode(file_get_contents("php://input")); 
```

# javascript - 跨域弹出窗口。

> ID：14890450
> 
> 赞同：0
> 
> 时间：2013-02-15T08:05:39.130
> 
> 标签：javascript, html, popup, cross-domain

我有两个不同的域，例如，

*   www.websiteone.com
*   www.websitetwo.com

**所以我想做的是，**

1）当用户打开`www.websiteone/page.php.com`并点击a`link`时，我想显示一个包含注册信息的弹出窗口。弹出页面应该是 a，`.aspx`或者`html`它需要托管在`www.websitetwo.com/Register.aspx`. 可行吗？

请告诉我你的建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:12:54.000

```
var strWindowFeatures = "menubar=no,location=no,resizable=yes,titlebar=no,scrollbars=yes,status=no,width=600";

    var myWindow=window.open('www.websitetwo.com/Register.aspx','_blank',strWindowFeatures);
myWindow.focus(); 
```

文档[http://www.w3schools.com/jsref/met_win_open.asp](http://www.w3schools.com/jsref/met_win_open.asp)

# android - IllegalArgumentException：查询中的非法字符

> ID：14890453
> 
> 赞同：0
> 
> 时间：2013-02-15T08:05:59.370
> 
> 标签：android

```
 protected void onPreExecute()
                {
                    super.onPreExecute();               
                    progressDialog = ProgressDialog.show(getActivity(),"Fetching", "Fetching Contacts", true, false);
                }

                @Override

                protected ArrayList<String> doInBackground(Void... params) {

                // TODO Auto-generated method stub

                ODataConsumer c = ODataJerseyConsumer.create("http://mythreeg.dyndns.org:8088/WcfService_Officetail/WcfDataService.svc/VW_CONTACTS()/?$filter=mobile ne null");

                List<OEntity> listEntities = c.getEntities("VW_CONTACTS").execute().toList();

                System.out.println("Size - " + listEntities.size());

                    for (OEntity entity : listEntities) {

                        categories.add((String) entity.getProperty("contact_name").getValue() + (String) entity.getProperty("mobile").getValue());

                    } 
```

错误：

```
 02-15 13:26:26.260: E/AndroidRuntime(330): Caused by: java.lang.IllegalArgumentException: Illegal character in query at index 102:
     http://mythreeg.dyndns.org:8088/WcfService_Officetail/WcfDataService.svc/VW_CONTACTS()/?$filter=mobile ne null/$metadata 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:54:15.673

请尝试下面的 URL 它在这里工作

mythreeg.dyndns.org:8088/WcfService_Officetail/WcfDataService.svc/VW_CONTACTS/?$filter=mobile%20ne%20null

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:03:25.843

您可以使用 Url.Encoder 和 URL.Decoder 来解决有关 URL 中使用的特殊字符的非法参数 Ecxeption 的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-12T21:24:55.147

尝试这个

```
url="http://mythreeg.dyndns.org:8088/WcfService_Officetail/WcfDataService.svc/VW_CONTACTS()/?$filter=mobile ne null";
url.replaceAll(" ","%20");
ODataConsumer c = ODataJerseyConsumer.create(url); 
```

只需将空格替换为 %20 它对我有用

# algorithm - 标准谜题的解决方案

> ID：14890456
> 
> 赞同：4
> 
> 时间：2013-02-15T08:06:27.347
> 
> 标签：algorithm, puzzle

有一个棋盘，其中有 m*m 个盒子，每个盒子都分配了一个非零整数，除了一个被标记为 0 并被视为空置的盒子。只有空置盒子的垂直和水平邻居可以朝它移动，留下它们的位置作为空置.为了解决这个难题，我们必须按照它们的价值升序排列盒子，最后是空盒子（标记为零的盒子）（板的右下角）。但是像所有其他工程师一样，我们非常懒惰并且想要以最少的步骤解决它。

那么除了回溯，我们应该遵循什么方法。

m 为 500.. 即 500x500 板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:09:16.283

您可以通过简单地对数组进行排序来找到目标状态。假设你的目标状态是`g`一个简单但低效的算法来解决这个难题：

```
void solve()
{
    if(current_state == g)
        return;

    foreach(choice c in shifting_choices)
    {
      // shift neighbour
      apply choice;
      solve();
      undo choice;
    }
} 
```

在上述算法`choices`中，基本上是移动被块包围的`zeroth`块。

要改进算法，您可以使用 A*（最好优先）。为了找到最佳选择，您可以使用`Manhattan Distance`. 它基本上是在谜题中到达另一个街区所需的步骤。考虑如下：

```
6 2 1
5 0 3
4 7 8 
```

在上述情况下，您可以移动`2, 5, 3, 7`，但要找到最佳移动，请考虑目标状态：

```
8 7 6
5 4 3
2 1 0 
```

当您将一个块移动到另一个块时，`zeroth`您正在更改两个块的位置。从目标状态中的位置计算这两个块的曼哈顿距离之和。在最小总和内的选择将是最可取的：

```
Moving 2: 2 + 3 = 5

Moving 3: 1 + 1 = 2

Moving 7: 1 + 1 = 2

Moving 5: 1 + 2 = 3 
```

您可以通过检查 3 和 7 之前的位置来打破 3 和 7 之间的平局，3 位于正确的位置，因此 7 是局部最优的选择。

# python - 我如何在用python编写的tail函数中附加一些数据

> ID：14890463
> 
> 赞同：2
> 
> 时间：2013-02-15T08:07:12.150
> 
> 标签：python, linux

我复制了这个从文件中读取最后 n 行的 python 函数

```
def tail(self, f, window=20 ):
    BUFSIZ = 1024
    f.seek(0, 2)
    bytes = f.tell()
    size = window
    block = -1
    data = []
    while size > 0 and bytes > 0:
        if (bytes - BUFSIZ > 0):
            # Seek back one whole BUFSIZ
            f.seek(block*BUFSIZ, 2)
            # read BUFFER
            data.append(f.read(BUFSIZ))
        else:
            # file too small, start from begining
            f.seek(0,0)
            # only read what was not read
            data.append(f.read(bytes))
        linesFound = data[-1].count('\n')
        size -= linesFound
        bytes -= BUFSIZ
        block -= 1
    return '\n'.join(''.join(data).splitlines()[-window:]) 
```

现在我想要的是，如果该行包含单词“错误”，那么我需要`append`和`prepend` `\n`该单词`error`，以便我的错误行与其余行分开

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:27:08.490

这将附加并添加到包含字符串`'\n'`的所有*行*`'error'`：

```
def segregate(lines, word):
    for line in lines:
        if word in line:
            yield '\n'+line+'\n'
        else:
            yield line 
```

您可以`tail`像这样连接：

```
def tail(f, window=20):
    ...
    return '\n'.join(segregate(''.join(data).splitlines()[-window:], 'error')) 
```

* * *

`'\n'`相反，如果您希望仅将字符串追加和前置`'error'`，则可以改为使用`re.sub`：

```
import re
def tail(f, window=20):
    ...
    return '\n'.join(re.sub(r'error', '\nerror\n', ''.join(data)).splitlines()[-window:]) 
```

# android - 为什么必须在 setContentView 之后定义一个按钮？

> ID：14890466
> 
> 赞同：0
> 
> 时间：2013-02-15T08:07:36.657
> 
> 标签：android, button, view, android-activity

所以我只花了 4 个小时试图让我的代码工作，我意识到这太愚蠢了。我在 setContentView(blablabla); 之前定义了一个按钮；被称为。为什么这会导致我的应用程序崩溃？ `Button schoolNameButton = (Button)findViewById(R.id.schoolNameButton); setContentView(myVIew);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T08:11:47.760

因为`setContentView`实际上是您为当前 Activity 设置 UI 的地方。这样做，系统知道哪些 UI 元素与此 Activity 相关联，并且它是所有元素都需要初始化的地方 - 之后`setContentView()`。当然，如果你不做这样的事情：

```
LinearLayout myLayout = new LinearLayout(this);
setContentView(myLayout); 
```

以下是`setContentView`来自 SDK 的解释：

> 公共无效 setContentView (int layoutResID)
> 
> 在 API 级别 1 中添加 从布局资源中设置活动内容。资源将被膨胀，将所有顶级视图添加到活动中。
> 
> public void setContentView（查看视图）
> 
> 将活动内容设置为显式视图。此视图直接放置在活动的视图层次结构中。它本身可以是一个复杂的视图层次结构。调用此方法时，会忽略指定视图的布局参数。默认情况下，视图的宽度和高度都设置为 MATCH_PARENT。要使用您自己的布局参数，请改为调用 setContentView(android.view.View, android.view.ViewGroup.LayoutParams)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:21:45.600

这是因为系统需要知道它将在哪个活动/布局视图中执行其操作。所以首先我们需要指定布局（设置内容视图）。然后所有元素（如按钮、图像视图、文本视图等）将在那里被识别.

# java - 仅针对日期部分的休眠过滤器

> ID：14890467
> 
> 赞同：0
> 
> 时间：2013-02-15T08:07:36.780
> 
> 标签：java, hibernate-filters

给定我下面的休眠文件。submit_date 列是没有时区类型的时间戳。是否可以设置仅将列值的日期部分作为日期对象或字符串的过滤器。

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="com.hiringsteps.ats.job.domain">
    <class
        name="Job"
        table="hs_job_master"> 

        <id name="id" column="job_id" unsaved-value="null">
            <generator class="sequence">
                <param name="sequence">hs_job_id_seq</param>
            </generator>
        </id>

        <property name="submittedDate" column="submitted_date"/>                

        <filter name="jobFilterPostDateEQ"><![CDATA[:postDateFilterEQ = submitted_date]]></filter>  
    </class>    

    <filter-def name="jobFilterPostDateEQ">
        <filter-param name="postDateFilterEQ" type="date"/>
    </filter-def>
</hibernate-mapping> 
```

# c# - 当我使用javascript设置选项时如何在服务器端获取下拉选择项

> ID：14890468
> 
> 赞同：0
> 
> 时间：2013-02-15T08:07:39.503
> 
> 标签：c#, javascript, asp.net

我已经使用 javascript 在下拉列表中设置了选项，但无法获取 selectedItem。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:20:40.350

ASP.NET DropDownList 服务器控件将其选项保留在视图状态中，当您在客户端添加选项时，当您回发服务器端时，它们不会在视图状态中。

所以你可以：

1.  进行完整的回发以在服务器端添加选项（最好的方法是将下拉列表放在更新面板中，这样至少完整的回发通过 Ajax 进行）

2.  使用 javascript 将选定的 optoin 放入隐藏的文本框中，并在获得服务器端时阅读

3.  或者您可以读取 Request.Form["dropdownlistid"] 中的原始表单数据，但已经有一段时间了，所以我不确定这个。

另一个常见的菜鸟错误是您正在重新绑定 Page_Load 中的下拉列表或在 DropDownList 的 SelectedIndexChanged 事件之前发生的其他一些事件，这将删除它的选定项目。这就是为什么您需要在您的问题中向我们展示更多信息的原因，否则，正如您所看到的，我们都在黑暗中刺伤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:16:36.003

`Enabled="false"`在 Javascript 中进行选择后是否已删除 ，如果没有删除。否则，值将不会发布。

使用 jQuery：

```
$("#DropdownlistID").prop('disabled', false); 
```

使用 javascript：

```
document.getElementById("DropdownlistID").removeAttribute("disabled"); 
```

# bash - 从同一个 bash 脚本中多次将 stdout 的副本重定向到不同的日志文件

> ID：14890473
> 
> 赞同：2
> 
> 时间：2013-02-15T08:08:20.580
> 
> 标签：bash, shell, redirect, exec, tee

当我们想要将标准输出重定向到文件时，以下行效果很好，并且还打印在标准输出上。

```
exec > >(tee logfile-1.txt) 
```

但是，如果我们希望稍后将标准输出重定向到另一个文件，比如说，

```
exec > >(tee logfile-2.txt) 
```

面临的问题是输出仍然不断被重定向到第一个文件（logfile-1.txt）以及第二个文件（logfile-2.txt）。

有没有办法让同一个 bash 脚本同时包含语句，并且输出对于与这些命令的执行顺序相对应的每个文件都是独占的？

[注意：此问题是对此处](https://stackoverflow.com/questions/3173131/redirect-copy-of-stdout-to-log-file-from-within-bash-script-itself)提出的问题的[解决方案](https://stackoverflow.com/a/3403786/2052755)的扩展。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T08:29:31.103

我会做

```
{
    command1
    command2
} | tee logfile-1.txt

{
    command3
    command4
} | tee logfile-2.txt 
```

或者，首先备份原始文件描述符：

```
exec 6<&1
exec > >(tee log1)
echo 1
echo 2
exec 1<&6 6<&-
exec > >(tee log2)
echo 3
echo 4 
```

请参阅[http://www.linuxtopia.org/online_books/advanced_bash_scripting_guide/x13082.html](http://www.linuxtopia.org/online_books/advanced_bash_scripting_guide/x13082.html)了解更多`exec`

# spring - org.xml.sax.SAXParseException：src-resolve：无法将名称“repository：auditing-attributes”解析为（n）“属性组”组件

> ID：14890474
> 
> 赞同：13
> 
> 时间：2013-02-15T08:08:28.237
> 
> 标签：spring, spring-mvc, neo4j, spring-data-neo4j

在项目上运行 maven 测试时出现以下错误。我正在使用 Spring Data Neo4j 构建一个测试应用程序。

```
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 70 in XML document from class path resource [konvoy-test-context.xml] is invalid; nested exception is org.xml.sax.SAXParseException: src-resolve: Cannot resolve the name 'repository:auditing-attributes' to a(n) 'attribute group' component.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadBeanDefinitions(AbstractGenericContextLoader.java:205)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:100)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 30 more
Caused by: org.xml.sax.SAXParseException: src-resolve: Cannot resolve the name 'repository:auditing-attributes' to a(n) 'attribute group' component.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:384)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.reportSchemaError(XSDHandler.java:2525)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.getGlobalDecl(XSDHandler.java:1472)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDAttributeGroupTraverser.traverseLocal(XSDAttributeGroupTraverser.java:74)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDAbstractTraverser.traverseAttrsAndAttrGrps(XSDAbstractTraverser.java:633)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDComplexTypeTraverser.processComplexContent(XSDComplexTypeTraverser.java:1059)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDComplexTypeTraverser.traverseComplexTypeDecl(XSDComplexTypeTraverser.java:279)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDComplexTypeTraverser.traverseLocal(XSDComplexTypeTraverser.java:133)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDElementTraverser.traverseNamedElement(XSDElementTraverser.java:356)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDElementTraverser.traverseGlobal(XSDElementTraverser.java:214)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.traverseSchemas(XSDHandler.java:1258)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.parseSchema(XSDHandler.java:579)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadSchema(XMLSchemaLoader.java:552)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.findSchemaGrammar(XMLSchemaValidator.java:2408)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1753)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.emptyElement(XMLSchemaValidator.java:705)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:377)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2740)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:645)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:508)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:807)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:107)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:225)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:283)
    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)
    ... 42 more
Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1fa1bb6] to prepare test instance [com.konvoy.test.UserTest@1901437]
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 70 in XML document from class path resource [konvoy-test-context.xml] is invalid; nested exception is org.xml.sax.SAXParseException: src-resolve: Cannot resolve the name 'repository:auditing-attributes' to a(n) 'attribute group' component.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadBeanDefinitions(AbstractGenericContextLoader.java:205)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:100)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 30 more
Caused by: org.xml.sax.SAXParseException: src-resolve: Cannot resolve the name 'repository:auditing-attributes' to a(n) 'attribute group' component.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:384)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.reportSchemaError(XSDHandler.java:2525)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.getGlobalDecl(XSDHandler.java:1472)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDAttributeGroupTraverser.traverseLocal(XSDAttributeGroupTraverser.java:74)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDAbstractTraverser.traverseAttrsAndAttrGrps(XSDAbstractTraverser.java:633)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDComplexTypeTraverser.processComplexContent(XSDComplexTypeTraverser.java:1059)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDComplexTypeTraverser.traverseComplexTypeDecl(XSDComplexTypeTraverser.java:279)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDComplexTypeTraverser.traverseLocal(XSDComplexTypeTraverser.java:133)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDElementTraverser.traverseNamedElement(XSDElementTraverser.java:356)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDElementTraverser.traverseGlobal(XSDElementTraverser.java:214)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.traverseSchemas(XSDHandler.java:1258)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.parseSchema(XSDHandler.java:579)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadSchema(XMLSchemaLoader.java:552)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.findSchemaGrammar(XMLSchemaValidator.java:2408)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1753)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.emptyElement(XMLSchemaValidator.java:705)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:377)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2740)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:645)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:508)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:807)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:107)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:225)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:283)
    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388) 
```

应用程序上下文文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:neo4j="http://www.springframework.org/schema/data/neo4j"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/data/neo4j http://www.springframework.org/schema/data/neo4j/spring-neo4j.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">

    <context:annotation-config/>
    <context:spring-configured/>
    <context:component-scan base-package="com.konvoy"/>

    <neo4j:config graphDatabaseService="graphDatabaseService"/>
    <neo4j:repositories base-package="com.konvoy.repository"/>
    <neo4j:repositories base-package="com.konvoy.services"/>

   <bean id="graphDatabaseService" class="org.neo4j.test.ImpermanentGraphDatabase" destroy-method="shutdown"/> 

    <!-- <tx:annotation-driven mode="proxy"/> -->
    <tx:annotation-driven mode="aspectj"/>
</beans> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T20:35:58.107

还没有弄清楚根本原因，但我得到了解决方案。

我在使用下一个版本的 spring-data-mongodb 时遇到了同样的问题：

*   spring-data-mongodb：1.2.0.RELEASE
*   spring-data-commons : 1.5.0.RELEASE (继承自 spring-data-mongodb)
*   spring-data-commons-core：1.4.0.RELEASE（覆盖托管版本 1.2.0.RELEASE，以解决不同的问题）

**我解决它的方式：**

只需将这些人添加到 Spring 配置 xml 文件中 XMLSchemaInstance 命名空间（很可能是 xsi:schemaLocation）的 schemaLocation 属性：

*   [http://www.springframework.org/schema/data/repository](http://www.springframework.org/schema/data/repository)
*   [http://www.springframework.org/schema/data/repository/spring-repository-1.5.xsd](http://www.springframework.org/schema/data/repository/spring-repository-1.5.xsd)

例如，我的 Spring config xml 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mongo="http://www.springframework.org/schema/data/mongo"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.2.xsd
        http://www.springframework.org/schema/data/mongo
        http://www.springframework.org/schema/data/mongo/spring-mongo-1.2.xsd
        http://www.springframework.org/schema/data/repository
        http://www.springframework.org/schema/data/repository/spring-repository-1.5.xsd">
...
</beans> 
```

希望这对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T14:09:37.563

尝试添加依赖

```
<dependency>
    <groupId>org.springframework.data</groupId>
    <artifactId>spring-data-commons</artifactId>
    <version>1.5.0.RELEASE</version>
</dependency> 
```

并检查

[http://www.springsource.org/node/3811](http://www.springsource.org/node/3811)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T14:51:13.873

我对 mongo 有同样的错误。

解决方案是将“xsd”的版本放在“xsi:schemaLocation”中，如果不能解决问题，请尝试降低“xsd”的版本，后者不是最好的，但可以。

就我而言，在KO之前：

```
xsi:schemaLocation="http://www.springframework.org/schema/beans        
  http://www.springframework.org/schema/beans/spring-beans-3.0.xsd         
  http://www.springframework.org/schema/context         
  http://www.springframework.org/schema/context/spring-context-3.0.xsd
  http://www.springframework.org/schema/data/mongo 
  http://www.springframework.org/schema/data/mongo/spring-mongo.xsd"> 
```

...mongo/spring-mongo.xsd

现在没事了：

```
xsi:schemaLocation="http://www.springframework.org/schema/beans        
  http://www.springframework.org/schema/beans/spring-beans-3.0.xsd         
  http://www.springframework.org/schema/context         
  http://www.springframework.org/schema/context/spring-context-3.0.xsd
  http://www.springframework.org/schema/data/mongo 
  http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd"> 
```

...mongo/spring-mongo-1.0.xsd

问候，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-23T01:05:11.623

当您缺少 spring-data-commons jar 时，通常会发生这种情况。将 jar 包含在您的 lib 目录中或使用 maven。它应该工作。如果您不使用 maven，请从以下目录获取 jar：

[http://www.springsource.org/download/community](http://www.springsource.org/download/community)

Spring Data Core--> spring-data-commons-1.5.1.jar

还应包括以下罐子：

Spring Data JPA-->spring-data-jpa-1.3.4.RELEASE.jar

这应该适用于 Spring 版本 3.2.2。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-21T15:54:17.677

我通过删除依赖解决了这个问题

```
 <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-envers</artifactId>
        <version>0.1.0.RELEASE</version>
    </dependency> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T08:19:17.450

您能否向我们展示您的应用程序上下文文件 (konvoy-test-context.xml)，以便我们了解您要完成的工作？

这些是您通常用于在 Spring Data Neo4j 中配置 neo4j 的标签：

```
<neo4j:config storeDirectory="${graphDb.dir}" />
<neo4j:repositories base-package="your.package" /> 
```

# testing - 通过鼻子测试测试 Flask 应用程序时，如何发送带有请求的 cookie？

> ID：14890478
> 
> 赞同：9
> 
> 时间：2013-02-15T08:08:29.693
> 
> 标签：testing, cookies, flask, nosetests, werkzeug

我在发送带有测试请求的 cookie 时遇到了一些问题。我试过这样的事情：

```
# First request to log in, retrieve cookie from response
response = self.app_client.post('/users/login', query_string={ data.. )
cookie = response.headers['Set-Cookie'] # Contains: user_hash=3f305370487731289a7f9bd8d379a1c2; Domain=.flowdev.com; Path=/

# Second request that requires the cookie
response = self.app_client.get('/users/', headers={'Set-Cookie': cookie})
# Here i print out request.cookies.get('user_hash') inside the app, which contains None 
```

我想这不是那么简单，但我不知道如何在这里以正确的方式构建cookie。应该如何创建第二个请求，以便它沿着标头中的 cookie 发送？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-10-28T20:29:33.590

您也可以`self.app_client.set_cookie(domain, cookie_name, cookie_value)`在发出请求之前使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T21:49:13.033

天哪，我觉得很愚蠢，这是一个简单的转换`Cookie`from `Get-Cookie`。我 100% 确定我之前已经尝试过很多次，但我猜是什么时候出了问题。无论哪种方式，我都会将此标记为正确，但如有必要，请随时删除此问题。=)

# ios - 如果横幅移动，iAd 横幅不可点击

> ID：14890479
> 
> 赞同：1
> 
> 时间：2013-02-15T08:08:31.127
> 
> 标签：ios, cocos2d-iphone, iad

我有一个在 Cocos2d 应用程序中工作的 iAd 横幅。

这是我为展示广告而制作的 CCLayer 子类的代码。在 DidLoad 上，添加变得可见并且底部菜单向上滑动以进行补偿。

```
-(id) init
{
    if( (self=[super init]) ) {
        CGSize size = [[CCDirector sharedDirector] winSize];

        UIViewController *controller = [[UIViewController alloc] init];
        controller.view.frame = CGRectMake(0, size.height -32, 320, 32);

        ADBannerView *adView = [[ADBannerView alloc] initWithFrame:CGRectZero];

        adView.requiredContentSizeIdentifiers = [NSSet setWithObject:ADBannerContentSizeIdentifierLandscape];

        adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierLandscape;
        [controller.view addSubview:adView];
        adView.delegate = self;

        [[[CCDirector sharedDirector] view] addSubview:controller.view];
        [[[CCDirector sharedDirector] view] setNeedsLayout]; // I was told this would fix it, but it fails to.
    }

    return self;
}

- (void)bannerViewDidLoadAd:(ADBannerView *)banner
{
    if (!bannerIsVisible)
    {
        NSLog(@"bannerViewDidLoadAd");
        [UIView beginAnimations:@"animateAdBannerOn" context:NULL];
        banner.frame = CGRectOffset(banner.frame, 0, -32); //the offending line

        self.position = ccpAdd(ccp(0, 32), self.position);

        [UIView commitAnimations];
        bannerIsVisible = YES;

    }
}
- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
    if (bannerIsVisible)
    {
        NSLog(@"bannerView:didFailToReceiveAdWithError:");
        [UIView beginAnimations:@"animateAdBannerOff" context:NULL];
        banner.frame = CGRectOffset(banner.frame, 0, 32); //the other offending line
        self.position = ccpAdd(ccp(0, -32), self.position);

        [UIView commitAnimations];
        bannerIsVisible = NO;
    }

} 
```

当这些行被禁用时，横幅是可点击的，但丑陋的白色横幅是可见的。这是怎么回事？我该如何解决或绕过它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T04:41:22.453

[Cocos2d_2.0_iAd_Sample](https://github.com/gururajios/Cocos2d-iAd.git)

[Cocos2d_3.0_iAd_Sample](https://app.box.com/s/fr5ya0hyf322gfd7gntx)

在你的场景中这样做。

­

```
-(void)onEnter
{
    [super onEnter];

     mIAd = [[MyiAd alloc] init];

}

-(void)play
{
    [self hideAdsBanner];
} 
```

```
-­(void)hideAdsBanner
{
    if(mIAd)
    [mIAd RemoveiAd ];

}

­-(void)onExit
{
    if(mIAd)
    {
        [mIAd release];
        mIAd = nil;
    }
    [super onExit];

} 
```

# ios - NSlocalization 将默认语言从英语更改为其他语言

> ID：14890480
> 
> 赞同：0
> 
> 时间：2013-02-15T08:08:41.990
> 
> 标签：ios, localization

我需要将我的默认（备用）语言从 English 设置为 non-english 。例如，我已经支持 3 种语言，比如 en,fr,gr 。现在如果用户选择中文，那么用户应该显示为 fr 语言。请帮我 。我试过这段代码

```
self.strLanguage = [[NSLocale preferredLanguages] objectAtIndex:0];
NSLog(@"strLanguage : %@",self.strLanguage);

NSMutableArray *arraySupportedLanguages = [[NSMutableArray alloc] initWithObjects:@"en",@"fr",@"gr", nil];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF contains[cd] %@", self.strLanguage];
    arraySupportedLanguages = [[arraySupportedLanguages filteredArrayUsingPredicate:predicate]mutableCopy];

NSLog(@"arraySupportedLanguages : %@",arraySupportedLanguages);

if (arraySupportedLanguages.count == 0) {
                [[NSUserDefaults standardUserDefaults] setObject:@"nl" forKey:@"AppleLanguages"];
        [[NSUserDefaults standardUserDefaults]synchronize];
    } 
```

# c++ - 消息框 OSX 指南

> ID：14890484
> 
> 赞同：0
> 
> 时间：2013-02-15T08:08:53.047
> 
> 标签：c++, macos, qt, qt4

这应该很容易。

我正在尝试为消息框和对话框（例如，QMessageBox、QFileDialog）实现一个独立于操作系统的类。

目标是在每个平台上都有**原生的外观和感觉**，但在 OSX 上，这意味着我应该有工作表从活动窗口下来。

我可以阅读有关此问题的任何 Qt 建议吗？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T01:22:43.540

本文[描述](http://doc.qt.digia.com/qq/qq18-macfeatures.html)了使用 Qt 使消息框在 OSX 上表现为工作表。

（不幸的是，这篇文章已有 7 年历史。我实现了它，但它不起作用。但我正在使用 show() 但这篇[文章](https://stackoverflow.com/questions/6754049/setting-parent-for-a-qmessagebox)说要使用 open() 或设置模态。所以我不能保证它，直到我调试它。）

# mysql - 在MySQL中将行限制为列的总和等于某个值

> ID：14890486
> 
> 赞同：14
> 
> 时间：2013-02-15T08:09:09.007
> 
> 标签：mysql, sql

我想编写一个查询，它返回所有行，直到其中一个列值的总和达到某个值。

例如在下表中：

```
 DATE             ETC      Meeting
    2013-02-01 00:00:00    85482        1
    2013-02-01 00:00:00    47228        2
    2013-02-02 00:00:00    12026        4
    2013-02-03 00:00:00    78927        6
    2013-02-04 00:00:00    85662        2
    2013-03-05 00:00:00    47978        1
    2013-08-07 00:00:00     8582        1 
```

如果我想获取行，直到列的总和`Meeting`等于 7。

```
 DATE             ETC      Meeting
    2013-02-01 00:00:00    85482        1
    2013-02-01 00:00:00    47228        2
    2013-02-02 00:00:00    12026        4 
```

如果我想获取行，直到列的总和`Meeting`等于 13。

```
 DATE                   ETC      Meeting
    2013-02-01 00:00:00    85482        1
    2013-02-01 00:00:00    47228        2
    2013-02-02 00:00:00    12026        4
    2013-02-03 00:00:00    78927        6 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T09:14:36.187

这是一种无需存储过程的方法：

```
SET @msum := 0;
SELECT t1.* 
FROM (
    SELECT m.*,  
          (@msum := @msum + m.meetings) AS cumulative_meetings
    FROM meetings m 
    ORDER BY m.date ASC
) t1 
WHERE t1.cumulative_meetings <= 7; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-15T09:01:52.593

这是一种适用于 MySQL 的方法：

```
SELECT
  O.Id,
  O.Type,
  O.MyAmountCol,
  (SELECT
     sum(MyAmountCol) FROM Table1
   WHERE Id <= O.Id) 'RunningTotal'
FROM Table1 O
HAVING RunningTotal <= 7 
```

它涉及计算运行总计并在运行总计小于或等于给定数字时选择记录，在这种情况下`7`。

## [SQL小提琴](http://sqlfiddle.com/#!2/0a038/2)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-03-26T10:04:01.243

这一款胜过所有。

```
SET @runningTotal=0;
SELECT
  O.Id,
  O.Type,
  O.MyAmountCol,
  @runningTotal + O.MyAmountCol as 'RunningTotal',
  @runningTotal := @runningTotal + O.MyAmountCol
FROM Table1 O
HAVING RunningTotal <=7; 
```

[SQL小提琴](http://sqlfiddle.com/#!9/53fcc/4)

查看两个查询的执行计划。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T08:31:43.350

Hemant 你没有说明使用的 RDBMS。这是 t-sql 中的一个脚本，您可以使用它来解决您的问题。

```
DECLARE @numberToReach INT;
SET @numberToReach = 10; --you can change this

DECLARE @date DATETIME;
DECLARE @etc VARCHAR(20);
DECLARE @meeting INT;
DECLARE @temp_sum INT;

CREATE TABLE #tempTable
    (
        Dates DATETIME,
        Etcs VARCHAR(20),
        Meeting INT,
    )

DECLARE tempcursor CURSOR FOR
        SELECT *
        FROM YourTABLENAME
OPEN tempcursor;
FETCH NEXT FROM tempcursor INTO @date, @etc, @meeting;

WHILE(@@FETCH_STATUS = 0)
BEGIN
    SET @temp_sum = @temp_sum + @meeting;
    IF @temp_sum < @numberToReach 
    BEGIN
        INSERT INTO #tempTable
        (
            Dates,
            Etcs,
            Meeting
        )
        VALUES
        (
            @date, 
            @etc, 
            @meeting
        )

        FETCH NEXT FROM tempcursor INTO @date, @etc, @meeting;
    END 
END

SELECT * FROM #tempTable

CLOSE tempcursor
DEALLOCATE tempcursor

DROP TABLE  #tempTable 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T10:50:35.480

由于没有给出 DBMS，以下是适用于各种 DBMS 的 ANSI SQL 解决方案：

```
select *
from (
    select date_column, 
           etc, 
           sum(Meeting) over (order by date_column asc) run_sum
    from meetings
) t
where run_sum <= 7
order by date_column asc; 
```

（我使用列名`date_column`而不是`date`因为`DATE`是SQL中的保留字，不应该用作列名以避免出现问题）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T08:14:46.453

这是一个丑陋的方式：

```
SELECT *
FROM meetings m1
WHERE (SELECT SUM(m2.Meeting) 
       FROM meetings m2 
       WHERE m2.DATE < m1.DATE OR (m2.DATE = m1.DATE AND m2.ETC >= m1.ETC)) <= 7 
```

排序首先是基于`DATE`，然后`ETC`是降序，因为这似乎是我们必须继续进行的。请注意，如果这不是唯一的，*您将得到错误的结果*。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-15T08:51:20.910

在Oracle中，我认为你可以使用SUM解析函数。您可以参考这里： http: [//www.adp-gmbh.ch/ora/sql/analytical/sum.html](http://www.adp-gmbh.ch/ora/sql/analytical/sum.html)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-02-15T08:18:03.157

如果您使用的是 SQL Server，请使用[CROSS APPLY](http://msdn.microsoft.com/en-us/library/ms175156.aspx)。

# entity-framework - EF5 CodeFirst 模式名称

> ID：14890488
> 
> 赞同：1
> 
> 时间：2013-02-15T08:09:34.023
> 
> 标签：entity-framework, entity-framework-5

我正在开发这个应用程序，我必须从多个模式（在运行时定义）中的多个表（都具有相同的结构）中读取数据。使用实体框架 5 和代码优先方法，我需要一种方法来更改实体的模式名称。目前我正在使用带有两个参数的构造函数创建我的 DbContext，一个 DbConnection 和模式名称（我在覆盖的 OnModelCreating 中使用的女巫）。

我第一次创建 DbContext 一切正常，我能够获取数据。但是当我使用第二个模式名称创建一个新的 DbContext 时，DbContext 使用的 DbConnection 是在构造函数中传递的那个，但实体中的模式名称仍然是第一个，因为即使我正在创建 OnModelCreating 也没有被调用DbContext 的新实例。

有什么想法吗？谢谢

编辑：不要认为这很重要，但我使用的是 Oracle 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:40:40.683

您可以通过为每个架构（使用默认架构集）和多个连接字符串创建一个 SQL Server 用户来做到这一点。

在您的应用程序中，为每个用户创建一个连接字符串（模式）。添加一个接受连接字符串的 dbcontext 构造函数，然后将适当的连接字符串传递给构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:17:37.107

您可以通过提供自定义数据库初始化程序（IDatabaseInitializer 和 Database.SetInitializer(new YouCustomInitializer());) 来做一些事情

# android - 将文本从片段发送到我想使用 canvas.drawText 的自定义视图

> ID：14890491
> 
> 赞同：0
> 
> 时间：2013-02-15T08:09:38.210
> 
> 标签：android, android-fragments, android-canvas, android-view

我是 Android 新手，想将一些文本从片段传递到自定义视图。在我想用来`canvas.drawText`定位字符串的自定义视图中。我想使用的原因`canvas.drawText`是为了与某些图形的位置保持一致。

这是什么程序？

澄清一下，我的片段是这样的：

```
public class Fragment1 extends Fragment {

private TextView view;
private TextView txtBox;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_layout, container,false);
    txtBox = (TextView) view.findViewById(R.id.TxtBox);
            String myString = "testing";
            txtBox.setText(myString);
    return view;
    }
} 
```

我有 View1 的 fragment_layout.xml 文件（我的自定义视图）：

```
<com.example.stuff.View1
    android:id="@+id/TxtBox"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

我希望在自定义视图中进行的调用：

```
public class View1 extends TextView {

    //constructors:
    public View1(Context context, AttributeSet ats, int ds) {
        super(context, ats, ds);
        init();
    }

    public View1(Context context) {
        super(context);
        init();
    }

    public View1(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }
...
canvas.drawText(myString, margin1, margin2, paint);
....
} 
```

...而我想要的是`myString`从 Fragment1.java 到 View1.java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:17:02.713

您可以动态创建`com.example.stuff.View1`自定义视图，即不要在 xml 中添加它，而是使用代码添加它。然后你可以`constructor`在`com.example.stuff.View1`.
其他方法可能是在`com.example.stuff.View1`类中创建一个方法并在那里设置文本。例如

```
public class View1 extends TextView {

    //constructors:
    public View1(Context context, AttributeSet ats, int ds) {
        super(context, ats, ds);
        init();
    }

    public View1(Context context) {
        super(context);
        init();
    }

    public View1(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public void setMyText(String string) {
        myString=string;
    }
...
canvas.drawText(myString, margin1, margin2, paint);
....
} 
```

然后在你的代码中做这样的事情

```
View view = inflater.inflate(R.layout.fragment_layout, container,false);
    txtBox = (TextView) view.findViewById(R.id.TxtBox);
    String myString = "testing";
    txtBox.setMyText(myString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:01:02.277

我能够通过我在[此处（使用 setter/getter）](https://stackoverflow.com/questions/14906902/supplying-text-from-fragment-to-custom-textview)和[此处（从错误定义的布局调用中消除由此产生的 NullPointer 异常](https://stackoverflow.com/questions/14913973/nullpointerexception-when-accessing-relativelayout-from-a-custom-view)）收到的答案来解决问题。

# ibm-mobilefirst - 适配器部署严重：缺少 xml 文件或未找到错误

> ID：14890492
> 
> 赞同：1
> 
> 时间：2013-02-15T08:10:08.517
> 
> 标签：ibm-mobilefirst

使用 Ant 脚本部署 .wlapp 时出现以下错误：

> [adapter-deployer] 严重：缺少 xml 文件

蚂蚁任务：

```
adapter-deployer worklightServerHost="hostname:10039/Demo" deployable="C:\DemoApp-all.wlapp" 
```

笔记：

*   Worklight WAR 文件已部署，我可以使用主机名访问控制台 URL：10039/Demo/console。
*   同样在 ant 脚本中，如果我使用 worklightServerHost url 作为主机名：10039/（我确保端口/主机号存在于 Virtual Hosts > default_host > Host Aliases 中）我收到以下错误：

> [adapter-deployer] 严重：未找到；
> 
> # SRVE0255E: 尚未定义用于处理 /console/api/adapters/upload 的 WebGroup/虚拟主机。
> 
> ### SRVE0255E: 处理主机名：10039 的 Web 组/虚拟主机尚未定义 d。
> 
> *IBM WebSphere 应用服务器*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:02:49.907

You say you want to deploy the adapter, yet you point to the application (.wlapp). You should point the ant script to the .adapter file of your project instead.

# iphone - 电话差距 - 在模拟器上工作而不是在真实设备上

> ID：14890493
> 
> 赞同：2
> 
> 时间：2013-02-15T08:10:11.657
> 
> 标签：iphone, ios, xcode, cordova

我不知道为什么会这样。我有一部手机 5 IOS 6.0.1 ，当我在模拟器中运行一个应用程序时，它运行得非常好，一切都正确显示，所有链接都在应用程序中工作..

但是当我在 Iphone 上运行它时，它没有显示任何内容

![在此处输入图像描述](../Images/5c45b27941cd8d2149cab6f309e7b5aa.png)无法加载网页并出现错误：在此服务器上找不到请求的 URL。

1) WWW 文件夹位于 xcode 内的正确位置，所有文件均已正确复制

2）首先它没有与架构 armv7s 一起运行，我删除了它之后它开始在 Iphone 5 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:19:51.900

找到了答案。

实际上，我对文件的引用是错误的，并且文件被错误地添加到了 www 文件夹中。所以我删除了所有文件并再次添加它们。为图像、CSS 和 JS 文件提供本地路径，它可以工作

# magento - 从 formatPrice 中删除标签

> ID：14890499
> 
> 赞同：1
> 
> 时间：2013-02-15T08:10:45.950
> 
> 标签：magento

`<span class="price">...</span>`我怎样才能删除/关闭

```
<?php echo $this->helper('checkout')->formatPrice($_item->getCalculationPrice()) ?> 
```

在

```
 <?php echo $_coreHelper->currency($_finalPrice, true, false) ?> 
```

我将最后一个参数更改为 false 和 price print without`<span class="price">...</span>` 所以我想知道我该怎么做

```
<?php echo $this->helper('checkout')->formatPrice($_item->getCalculationPrice()) ?> 
```

我不想更改核心文件。谢谢帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T07:49:03.110

只需`strip_tags()`在 PHP 中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:18:36.120

您必须将 Checkout Helper (Data.php) 重写到您的命名空间，以覆盖此函数：

```
public function formatPrice($price)
{
    return $this->getQuote()->getStore()->formatPrice($price);
} 
```

将其替换为

```
public function formatPrice($price,$includeContainer = false)
{
    return $this->getQuote()->getStore()->formatPrice($price,$includeContainer);
} 
```

然后你只需要这个：

```
<?php echo $this->helper('checkout')->formatPrice($_item->getCalculationPrice()) ? 
```

隐藏跨度和：

```
<?php echo $this->helper('checkout')->formatPrice($_item->getCalculationPrice(),true) ? 
```

把它拿回来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-03T05:19:30.817

在 Magento 中，使用时

```
Mage::helper('checkout')->formatPrice($price); 
```

要以本地格式获取 $price，它会打印 $price 包含在`<span class=”price”&gt;</span>`. 在某些情况下，这不是很实用。如果你不太喜欢这个`<span>`标签，你可以使用这个方法：

```
Mage::helper('checkout')->getQuote()->getStore()->formatPrice($price, false); 
```

[http://ntuan16.wordpress.com/2011/12/20/how-to-use-formatprice-without-tag/](http://ntuan16.wordpress.com/2011/12/20/how-to-use-formatprice-without-tag/)

# c++ - 双向链表中的排序插入

> ID：14890506
> 
> 赞同：0
> 
> 时间：2013-02-15T08:11:21.577
> 
> 标签：c++, linked-list, sorted, doubly-linked-list

我正在尝试实现代码以将包含整数变量的节点插入到已经排序或没有元素的双向链表中。我得到了一个文件来测试我的代码是否有效。我的代码编译得很好，只是测试每次都失败了我的代码。

这是我排序插入的代码

```
void List<T>::insertSorted(T item)
{
    ListItem<T> *temp, *temp2;
    ListItem<T>* a=new ListItem<T>(item);   //creates a node with our input item

    if(head==NULL)
    {
        head=a;              //if the list is empty, set head equal to the new
        //node
    }

    //Following two conditions check whether head is the sole item in the list
    //(i.e head->next==NULL), and then insert our node in it accordingly.

    else if(head->value > item && head->next==NULL) 
    {
        a->next=head;
        head->prev=a;
        head=a;
    }

    else if(head->value < item  && head->next==NULL)
    {
        head->next=a;
        a->prev=head;
    }

    //This piece checks whether our list has more than one nodes, and adds
    //the input node accordingly.
    else if(head->next!=NULL)
    {
        temp=head->next;   //here i'm taking two consecutive nodes
        //which in the first case are head->next and head;
        temp2=head;
        while(temp!=NULL)
        {
            //if our value can be sandwiched between two nodes then do this
            if(temp->value > item && temp2->value < item)
            {
                temp2->next=a;
                a->prev=temp2;
                a->next=temp;
                temp->prev=a;
                break;
            }
            //go to the next two consecutive nodes
            temp=temp->next;
            temp2=temp2->next;

            //if one of our node is null (i.e we've reached the end of
            //the list, do the following
            if(temp2->value <= item && temp==NULL)
            {
                temp2->next=a;
                a->prev=temp2;
                break;
            }
        }

    }

} 
```

这显然是错误的。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:31:19.183

您没有直接在函数中初始化新节点`NULL`的`next`和`prev`指针。`a`在 insertSorted 函数中进行修改后，代码对我来说非常完美

```
 else if(head->value == item  && head->next==NULL)
 {
                head->next=a;
                a->prev=head;
 }

     //This piece checks whether our list has more than one nodes, and adds
     //the input node accordingly.
else if(head->next!=NULL)
{
     temp=head;   
      temp2=head;   //keep track of previous element in the loop
      while(temp!=NULL)
      {
            //if our value can be sandwiched between two nodes then do this
            if(temp->value < item)
            {
                 temp2 = temp;
             temp = temp ->next;
        }
        else
        {
             //from temp onward all numbers will be grater than item. so inserting before item
              a->next = temp;
            a->prev = temp->prev;
            temp->prev = a;
            if (temp == head)
            {
                 head = a;
            }
            else// if temp not head then there is a previous element assign previos elemnts next to a
                 {                  
                temp2->next = a;
                 }
            break;
        }
        }
        if (temp == NULL)
        {
            temp2->next=a;
            a->prev = temp2;
         }
     } 
```

请检查

我发现的唯一问题是没有检查这种情况 `if(head->value == item && head->next==NULL)`

# php - 在 while 循环中创建唯一的表单输入 ID 和输入名称

> ID：14890509
> 
> 赞同：0
> 
> 时间：2013-02-15T08:11:37.977
> 
> 标签：php, forms, input, foreach, while-loop

我有一个由while循环构建和填充的表。while 循环正在从 mysql 数据库中获取并显示结果。

根据下面的代码，每一行都有一个复选框，值等于一个唯一标识符`loadnumber`。

下一列是一个输入框，其名称和 ID 为`correctedweight`。再次， this 的值是由 MySQL 数据值预定义的。下一列是一个名为的选择框`correctedtrailer`，并且所选值再次等于数据库结果。

我的 sql 查询结果中有很多行，所以我的表有几行深。我想要做的是允许用户选中复选框`checkbox[]`，更改同一行的 和 的值，`correctedweight`然后 `correctedtrailer`提交表单。问题是，如果我有几行，所有 my`correctedweight`和的名称`correctedtrailer`都相同，所以我无法区分它们。

```
<? while($row = $loads->fetch(PDO::FETCH_ASSOC)) { ?>
<tr>        
    <td><input type="checkbox" name="checkbox[]" id="checkbox[]" value="<? echo $row['loadnumber']; ?>"></td>
    <td><input type="text" name="correctedweight" id="correctedweight" value="<? echo $row['weight']; ?>" class="inputsmall"></td>
    <td><SELECT name="correctedtrailer" id="correctedtrailer"  class="selectnarrow"> 
    <OPTION value="<? echo $row['trailer']; ?>" selected ><? echo $row['trailer']; ?></option>
    <option>
    <?=$optionstrailer?> 
    </option>
    </SELECT> 
    </td>
</tr> 
```

要解决这个问题，我可以将 loadnumber 附加到每个输入字段的名称和 id 吗？

`<input type="text" name="correctedweight<? echo $row['loadnumber']; ?>" id="correctedweight<? echo $row['loadnumber']; ?>" value="<? echo $row['weight']; ?>" class="inputsmall">`

然后，这将为我的表单的每个输入提供一个唯一的名称。下一个问题是如何为所选行调用此名称？该`checkbox[]`数组将包含负载编号，因此在我的`foreach($_POST['checkbox'] as $checkbox){`语句中，我如何获得 的值 `correctedweight<? echo $row['loadnumber']; ?>`？是 $_POST['correctedweight.$checkbox'] 还是它是如何工作的？

另外这是最好的方法吗？

一如既往的帮助。谢谢

我的表单、输入和选择字段的图像预填充了 MySQL 数据。希望能够一次检查和编辑多个表行，但需要一个唯一标识符作为使用`while`循环构建的表。再次感谢。 ![在此处输入图像描述](../Images/20c2a4dd102b50d584e0a7cc9b871632.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:40:34.527

据我所知，您正在循环访问数据库条目。我建议在所有字段中使用您的负载编号作为标识符，然后在帖子中循环遍历它，您可以像上面那样附加它。

像这样的东西：

```
<td><input type="checkbox" name="checkbox[<? echo $row['loadnumber']; ?>]" id="checkbox[<? echo $row['loadnumber']; ?>]" value="<? echo $row['loadnumber']; ?>"></td>
<td><input type="text" name="correctedweight_<? echo $row['loadnumber']; ?>" id="correctedweight_<? echo $row['loadnumber']; ?>" value="<? echo $row['weight']; ?>" class="inputsmall"></td>
<td><SELECT name="correctedtrailer_<? echo $row['loadnumber']; ?>" id="correctedtrailer_<? echo $row['loadnumber']; ?>"  class="selectnarrow"> 
    <option value="<? echo $row['trailer']; ?>" selected ><? echo $row['trailer']; ?></option>
    <option><?=$optionstrailer?></option>
</SELECT> 
```

获取帖子中每个复选框的信息：

```
foreach($_POST['checkbox'] as $checkbox){
    $correctedweight = $_POST['correctedweight_$checkbox'];
    $correctedtrailer = $_POST['correctedtrailer_$checkbox'];
} 
```

请记住，如果我记得正确，您只会得到被选中的复选框:)

希望这有帮助，祝你好运！

# jquery - 谷歌地图在 jQuery 选项卡中加载时显示灰色方块

> ID：14890513
> 
> 赞同：0
> 
> 时间：2013-02-15T08:11:58.473
> 
> 标签：jquery, google-maps, tabs

我正在尝试在通过 jQuery 代码隐藏的选项卡中加载 Google 地图（使用 V3 Api）。完成此操作后，地图会显示一些灰色方块而不是地图，并且还会在不同的位置显示地图。

我找到了一些代码来解决这个问题，这个：google.maps.event.trigger(map, "resize");

但我不知道把它放在我的代码中的什么地方。

这是我当前的地图代码（忽略 PHP :)）

```
 <div id="map" style="width: 500px !important; height: 400px !important;"></div>

    <script type="text/javascript">

    var locations = [
    <?php while ( $connected->have_posts() ) : $connected->the_post(); ?>
    ['<h3><?php the_title(); ?></h3><br /><?php echo get_post_meta($post->ID, 'adres', true); ?><br /><?php echo get_post_meta($post->ID, 'postcode', true); ?> <?php echo get_post_meta($post->ID, 'woonplaats', true); ?><br /><br /><?php echo get_post_meta($post->ID, 'telefoonnummer', true); ?><br /><a href="<?php echo get_post_meta($post->ID, 'website', true); ?>"><?php echo get_post_meta($post->ID, 'website', true); ?></a>', <?php echo get_post_meta($post->ID, 'latitude', true); ?>, <?php echo get_post_meta($post->ID, 'longitude', true); ?>,10],
    <?php endwhile; ?>
    ];

    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 7,
      center: new google.maps.LatLng(52.207607, 5.603027),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
    }
    </script>
    <?php 
    // Prevent weirdness
    wp_reset_postdata();

    endif;
    ?> 
```

这是不同选项卡的 jQuery：

```
<script type="text/javascript">
jQuery(document).ready(function() {
    //When page loads, hide all content 
    jQuery(".tab_content").hide();
    jQuery(".tab_content:first").show(); //Show first tab content
    jQuery("#tabs li:first").addClass("active").show(); //Activate first tab
    //On Click Event
    jQuery("#tabs a").click(function() {

        //Remove any "active" class
        jQuery("#tabs .active").removeClass("active");

        //Add "active" class to selected tab
        jQuery(this).parent().addClass("active");

        // Hide all tab content
        jQuery(".tab_content").hide();

        //Find the href attribute value to identify the active tab + content
        var a = jQuery(this).attr("href");

        //Fade in the active ID content
        jQuery(a).fadeIn();

        return false;
    });
});
</script> 
```

我知道以前有人问过这个问题，我觉得我已经接近用 'google.maps.event.trigger(map, "resize");' 来解决这个问题了，我只是不知道该怎么办这个。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:16:00.310

当您在隐藏时初始化谷歌地图时会发生这种情况。

您有 2 个选项：

*   调用 google.maps.event.trigger(map, "resize"); 当您显示新标签时
*   加载选项卡时初始化 Google 地图

两者都应该可以正常工作；第二个更适合性能，但第一个可能需要较少的返工。

# c# - 如何在 Linq 表达式中使用 Expression.MakeIndex？

> ID：14890516
> 
> 赞同：0
> 
> 时间：2013-02-15T08:12:25.997
> 
> 标签：c#, .net, linq, expression

属性索引器数组

尝试动态生成以下 lambda 表达式：

```
Expression<Func<Program, string>> y = _ => _.x[0]; 
```

其中 x 是 List 类型

尝试使用 Expression.MakeIndex，但它似乎正在弹跳异常：

```
Expression.MakeIndex(parameter, typeof (Program).GetProperty("x"), new[] {Expression.Constant(0)}) 
```

异常消息：

> 为调用方法“System.Collections.Generic.List`1[System.String] get_x()”提供的参数数量不正确

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T08:39:59.147

这里有两个操作：

1.  从`x`_`parameter`
2.  访问索引 0 处的项目

您需要为此创建两个单独的表达式：

```
var property = Expression.Property(parameter, typeof (Program).GetProperty("x"));
var itemAtPosition0 = Expression.MakeIndex(property, typeof(List<string>).GetProperty("Item"),
                     new [] { Expression.Constant(0) }); 
```

`"Item"`指索引器属性的默认名称。有关此名称以及如何可靠地检测所使用的实际名称的更多信息，请查看[此答案](https://stackoverflow.com/a/6759445/572644)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T08:42:29.233

这个答案假设`Program`类是这样定义的：

```
public class ProgramZ
{
    public List<string> x { get; set; }
} 
```

问题是您正在尝试将索引应用于`Program.x`属性，而实际上它应该应用于`List<string>`的索引器属性（称为`Item`）。

最后，为了能够调用表达式，您需要将其包装成 lambda。

这是执行此操作的代码：

```
var expr =
    Expression.Lambda<Func<Program, string>>(
        Expression.MakeIndex(
                Expression.Property(
                    parameter,
                    typeof(Program).GetProperty("x")),
                typeof(List<string>).GetProperty("Item"),
                new[] { Expression.Constant(0) }),
        parameter); 
```

以下是调用表达式的方法：

```
var instance = new ProgramZ { x = new List<string> { "a", "b" } };

Console.WriteLine(expr.Compile().Invoke(instance)); 
```

此代码将按`a`预期输出 。

# matlab - 如何在matlab上创建信号滑动窗口

> ID：14890521
> 
> 赞同：0
> 
> 时间：2013-02-15T08:12:45.123
> 
> 标签：matlab

我有一个数据序列。因此，由于窗口长度，我想在滑动窗口内绘制该数据。请帮帮我。

实际上数据来自帧的均值和方差。所以我想在滑动窗口内绘制均值和方差。我也不能在 Matlab 上创建滑动窗口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T08:54:30.980

我的方法是，

```
a = randi(100,[1,50]);  % My sequence
win_width = 10;  %Sliding window width
slide_incr = 1;  %Slide for each iteration
numstps = (length(a)-win_width)/slide_incr; %Number of windows
for i = 1:numstps
   mean_win(i) = mean(a(i:i+win_width));  %Calculation for each window
end
plot(mean_win) 
```

可能有更好的方法来做到这一点..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T13:30:39.150

这就是我一直这样做的方式（改编自 2 个滑动窗口的代码）。您可以根据需要计算均值和方差。

```
T = 25;                 % Window Size
K = size(data,1) - T;   % Number of repetitions

for i = 1:K    
   window = data(i:i+T-1,:);

   % Mean and Variance Calculations here
   % Plotting here
   % call 'drawnow' for incremental plotting (animation)
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T08:20:44.347

因此，如果我理解正确，您想更改绘图的**x 轴限制**。用于[`xlim`](http://www.mathworks.com/help/matlab/ref/xlim.html)此，例如：

```
 a=1:10;
 plot(a)
 xmin = 5;
 xmax = 7.6;
 xlim([xmin xmax]) 
```

或者如果你想要一个恒定大小的窗口，你可以`xlim([xmin xmin+window])`等等......

# java - 使用 IP 地址列出远程服务器中存在的文件

> ID：14890522
> 
> 赞同：0
> 
> 时间：2013-02-15T08:12:49.070
> 
> 标签：java, android, jsp, jakarta-ee

我想使用 ip 地址列出远程服务器中存在的文件。像这样的东西。

```
File folder = new File(<ip/>);
File[] listOfFiles = folder.listFiles(); 
String files;

for (int i = 0; i < listOfFiles.length; i++) 
{
 if (listOfFiles[i].isFile()) 
 {
   files = listOfFiles[i].getName();
   System.out.println(files);
 }
} 
```

请给出一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:18:58.430

您需要编写一些服务器端编码来生成服务器中的文件列表。然后您的客户可以访问该服务以获取文件列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:20:41.610

您必须为此使用`Android HTTP Access`。阅读这篇[文章](http://www.vogella.com/articles/AndroidNetworking/article.html)。它会对你有所帮助。

# java - 这两个 JDBC Connectivity 之间有什么性能差异吗？

> ID：14890523
> 
> 赞同：1
> 
> 时间：2013-02-15T08:12:51.707
> 
> 标签：java, mysql, jdbc

我在 jdbc 连接中使用了**MySqlDataSource**。我使用了以下代码

```
MysqlDataSource d = new MysqlDataSource();
d.setUser("user");
d.setPassword("pass");
d.setServerName("hostname.com");
d.setDatabaseName("db");
Connection c = d.getConnection(); 
```

我还搜索[了在 Apache Tomcat 中配置 MySQL 数据源](https://confluence.atlassian.com/display/CONF43/Configuring+a+MySQL+Datasource+in+Apache+Tomcat)的选项。

这两者之间有性能差异吗？哪个最好用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:19:29.023

在 tomcat 中配置**Datasource**将帮助您在同一**tomcat**中运行的应用程序之间共享相同的数据源。该**数据源**将由容器（在您的情况下为tomcat）管理。

而在代码中创建的**数据源**将由您的应用程序创建，并且只能由该应用程序使用。

因此，如果您在 tomcat 上运行多个应用程序并访问相同的数据源，那么在**tomcat中配置****数据源**将是一个好方法并且具有性能因素，因为只创建一个数据源并且每个应用程序没有单独的连接

 **但是，如果您只有一个应用程序，那么您使用的第一种方法是好的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:18:40.297

他们都在内部使用相同的驱动程序，我认为这里的性能没有太大的不同，我想如果你只需要在那个地方访问数据库并且最终用户不应该使用他自己的身份验证，你可以直接使用它java，但是如果您需要在不同的地方进行连接，使用 apache 配置进行配置可能会有所帮助，特别是如果数据库服务器、用户名或您不需要在代码中更改它的任何内容发生更改，如果最终用户必须设置自己的配置，这可能非常重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:26:50.713

配置`Connection`s池的改进（就像tomcat提供的那样）主要是您实际上会创建和关闭更少的连接。

使用池时，当您`Connection`向池请求 a 时，它会查看它是否已创建任何连接并可供重用，如果有，它将为您提供它（而不是创建一个新的 `Connection`，这是一个繁重的操作）。您仍然必须`close()`由 `Connection`Tomcat 提供，以便 Tomcat 知道它现在可以在再次请求时重用。

此外，池的优点是您的代码不需要知道`Connection`. 他只是`Connection`从给定的池中请求一个并且系统管理员对其进行配置，从而提供更大的灵活性（系统管理员不需要知道如何配置您的应用程序，只需要知道如何配置 Tomcat，这是相当标准的）。**

# spring - Spring 3.0 @Scheduled 注释未按预期工作

> ID：14890527
> 
> 赞同：2
> 
> 时间：2013-02-15T08:13:23.507
> 
> 标签：spring, spring-mvc, scheduled-tasks, scheduling, spring-annotations

我使用`@Scheduled`注释使`myProcess()`Spring MVC 应用程序（在 Apache Tomcat/7.0.26 上运行的版本 3.0.6.RELEASE）中的函数*每小时运行一次*（3,600,000 毫秒 = 1 小时）：

```
@Scheduled(fixedRate = 3600000)
public void myProcess() { ... } 
```

该函数按预期执行，*但不是在早上*执行（请参阅下面最近 2 天的示例日志时间）。这每天都在发生。我在日志文件中没有发现异常。您对这种奇怪行为的原因有什么想法吗？

* * *

```
Feb 13 02:11:15
Feb 13 03:11:16 
Feb 13 06:17:34
Feb 13 06:45:55 
Feb 13 07:03:22
Feb 13 07:31:57
Feb 13 08:11:16 
Feb 13 09:11:18
Feb 13 10:11:18 
Feb 13 11:11:28 

Feb 14 01:11:37
Feb 14 02:11:29
Feb 14 03:11:29 
Feb 14 06:19:51
Feb 14 06:49:17
Feb 14 07:35:57
Feb 14 08:11:29
Feb 14 09:11:35 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:43:03.853

我无法回答具体问题，我会尝试使用最新版本的 Spring (3.2)，因为据我所知，在 3.0 和 3.1 之间已经在该领域实现了重大变化。

但是，根据我的经验，我发现 cronTrigger 在所有情况下都要好得多（它当然可以做所有 fixedRate 可以做的事情等等）

只需像这样定义您的属性：

```
<util:properties id="props" location=classpath:/application.properties" />
<context:property-placeholder properties-ref="props"  />
<task:annotation-driven /> 
```

然后使用它：

```
@Scheduled(cron = "${cron.expression}")
public void scheduledTask() throws .. { .. } 
```

在 application.properties 你有类似的东西： cron.expression = 0 0/60 * * * ？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T08:49:41.840

我有同样的问题，但使用`cron`属性：

```
// every day at midnight
@Scheduled(cron = "0 0 0 * * ?")
public void myProcess() {
} 
```

我真的不记得它的行为了，但这不是我所期望的。我终于发现它可能取决于 Spring 3.0.x 中的一个错误。**除了注释之外，**我尝试的解决方案（并且有效）是在*applicationContext.xml*文件中声明任务：

 **```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:task="http://www.springframework.org/schema/task" xsi:schemaLocation="http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd">

    ...

    <!-- scheduling and async -->
    <task:annotation-driven />
    <task:scheduled-tasks>
      <task:scheduled ref="myProcessHandler" method="myProcess" fixed-delay="0" />
    </task:scheduled-tasks>
    <bean id="myProcessHandler" class="path.to.MyProcessHandler" />

    ...

</beans> 
```

即使该`fixed-delay`属性是修复错误所必需的（据我所知），**也没有考虑到**，而注释的`cron`属性是。`@Scheduled`

我希望这将有所帮助。**

# asp.net-mvc - 在 IIS7 中部署 MVC

> ID：14890532
> 
> 赞同：0
> 
> 时间：2013-02-15T08:13:52.697
> 
> 标签：asp.net-mvc, deployment, iis-7.5

我在部署 MVC 站点时遇到了一些问题。

我做了什么：
安装 Windows Server 2008 R2 SP1
添加 IIS 7.5 功能
安装 .Net 4
在 iis 中注册 .net，使用“aspne_regiis -ir”
在默认网站上添加一个新应用程序
选择我的应用程序
选择 DefaultAppPool
调用本地主机/在IE中测试

问题：
该站点未正确显示，
例如文本未以正确的颜色显示，但仅显示为黑色
没有显示
dll 的图像，位于应用程序文件夹中的图像未使用

这里有两张图片它应该是什么样子以及什么它
[实际上看起来像](http://s1.directupload.net/file/d/3167/fudkdl8x_png.htm)
[它应该看起来的样子](http://s14.directupload.net/file/d/3167/evizpioe_png.htm)

我对这个主题使用了不同的“如何做”，但找不到我的错误。
那么我该怎么做才能正确显示站点？

坦克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:29:43.097

一位同事找到了答案。.css（或其他静态文件类型）的 StaticFileHandler 丢失，需要包含在内。

# php - 在php中用户定义的日期向用户发送通知电子邮件

> ID：14890533
> 
> 赞同：0
> 
> 时间：2013-02-15T08:14:08.460
> 
> 标签：php

我正在我的网站上制作一项功能，允许用户输入他们需要在特定日期之前完成的任务。然后，该网站将在接近用户定义的日期时通过电子邮件通知他们（截止日期前 1 天，截止日期前 2 小时等等。）我对通知完全陌生，不知道如何问这个问题，但这是我想要做的一个例子......

**在一个例子中：**

1.  用户输入“需要打电话给老板”。
2.  用户在 5 月 31 日上午 11:00 输入日期选择器。
3.  然后点击“提前一天通知我”
4.  他们输入他们的电子邮件并单击提交。

然后，我的网站将在 5 月 30 日上午 11:00 通过电子邮件通知他们，提醒他们给老板打电话……

我环顾四周，注意到一些指向 CRON 工作的东西。我看了看，不确定这是否是要走的路……

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:28:37.537

这取决于您的服务器。什么操作系统，你有什么访问权限和一堆其他的东西。

在 Linux 上，一个 cron 作业可以工作。在 Windows 服务器上，任务计划程序会做同样的工作。基本上，您需要一种机制来调用脚本，该脚本将读取您的数据库并根据条件发送电子邮件。

# php - 在这些行中出现错误

> ID：14890538
> 
> 赞同：0
> 
> 时间：2013-02-15T08:14:35.450
> 
> 标签：php, odbc

警告：odbc_fetch_array()：提供的参数不是第 no 行中的有效 ODBC 结果资源

错误行是 while row odbc fetch query

```
$query=("select * from company_master order by ccode ");
$i=1;
while($row=odbc_fetch_array($query))
{
$string. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T08:16:08.203

odbc_fetch_array 需要来自 odbc_exec() 的资源，而不是字符串。

例如：

```
$query="select * from company_master order by ccode ";
$res = odbc_exec($conn, $query);

$results = odbc_fetch_array($res);

foreach ($results as $row) {
   //...
} 
```

[请参阅http://php.net/manual/en/function.odbc-fetch-array.php](http://php.net/manual/en/function.odbc-fetch-array.php)中的参数部分

# javascript - 如何编写正则表达式来验证金额的格式？

> ID：14890545
> 
> 赞同：-2
> 
> 时间：2013-02-15T08:15:19.383
> 
> 标签：javascript

我有这个代码，在按键上：

```
this.value = this.value.replace(/[^0-9.0-9]/g,''); 
```

我希望“。”之前只能输入 4 位数字。和“。”后面的 2 位数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:22:25.893

这是一个正则表达式，它允许在点之前有 1-4 位数字，在点之后允许 1-2 位数字。

```
/\d{1,4}\.\d{1,2}/g 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T08:27:47.140

如果你想强制 0000.00 那么

```
/\d{4}\.\d{2}/ 
```

如果组的大小是可选的，请参阅 Sn0opys 答案

> \d - 是一个数字，与 [0-9] 相同
> 
> 如果未指定 [,y]，则 {x[,y]} x 是最小和最大计数。如果指定了 y，则 x 是最小计数，y 是应检查的最大计数

# python - 在 MAC OS X 上安装 PocketSphinx

> ID：14890546
> 
> 赞同：10
> 
> 时间：2013-02-15T08:15:29.237
> 
> 标签：python, macos, cmusphinx, sphinx4

我正在尝试使用 python 学习 pocketsphinx，因此想在我的 Mac OSX Lion 上安装它。但是，我真的没有在 Python 中安装包和模块的经验，而且这个文档对我来说有点混乱。这是我到目前为止所做的。我从以下网站下载了 pocketsphinx 0.8 版本：http: [//sourceforge.net/projects/cmusphinx/files/pocketsphinx/0.8/](http://sourceforge.net/projects/cmusphinx/files/pocketsphinx/0.8/)

我尝试使用 macports 搜索相同的内容，所以我可以使用 macports 安装它，但搜索命令找不到 pocketsphinx。我知道我的问题可能非常业余，我为此提前道歉。

我在这里寻找答案，最接近的问题是： [在 Mac OS X 中设置 PocketSphinx](https://stackoverflow.com/questions/13283116/setting-up-pocketsphinx-in-mac-os-x) 但这个问题似乎没有答案。因此，有人可以帮我在我的系统上安装这个包吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-15T08:19:30.333

Pocketsphinx有一个[自制公式](https://github.com/mxcl/homebrew/blob/master/Library/Formula/cmu-pocketsphinx.rb)，它（只是）在我的系统（Mountain Lion）上安装得很好。也许试试看？`brew install cmu-pocketsphinx`为我工作...

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2020-06-25T00:53:12.387

我通过以下方式为python成功设置了pocketsphinx：

```
brew install cmu-pocketsphinx
brew install swig
pip3 install --upgrade pip setuptools wheel
brew install openal-soft
cd /usr/local/include
ln -s /usr/local/Cellar/openal-soft/1.20.1/include/AL/* .    
pip3 install pocketsphinx 
```

最后 4 个命令来自[这个答案](https://github.com/bambocher/pocketsphinx-python/issues/28#issuecomment-597794252)。

MacOS 10.14，Python 3.7。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-31T03:22:23.167

我使用了这个自制软件 - [https://github.com/watsonbox/homebrew-cmu-sphinx](https://github.com/watsonbox/homebrew-cmu-sphinx)

为我解决了这个错误

A/D 库未实现 FATAL_ERROR：“continuous.c”，第 246 行：无法打开音频设备

要测试安装，请使用

pocketsphinx_continuous -inmic 是

# wordpress - 如何加快 WP 中的 IMDb 评级插件？

> ID：14890549
> 
> 赞同：0
> 
> 时间：2013-02-15T08:15:45.460
> 
> 标签：wordpress, custom-post-type, meta-boxes

我尝试在 WP 中以这种方式实现[IMDb 评级插件](http://www.imdb.com/plugins)
： 我制作了一个**元框**，并在其中复制了IMDb 站点的**IMDb 评级插件**生成的 HTML 代码，**[这是插件生成的代码](http://textuploader.com/?p=6&id=oVLDh)**，但是在加载网站时，插件内容很慢（几秒钟）。

元框：

```
 array(
        'label' => 'iMDb Rating',
        'desc'  => 'iMDb Rating Script',
        'id' => 'imdb-rating',
        'priority' => 'high',
        'type' => 'textarea',
        'std' => ''
        ), 
```

在帖子中显示元框方法：

```
<?php $test_field_value = get_post_meta( get_the_ID(), 'imdb-rating', true ); echo $test_field_value; ?> 
```

**问题：** 有没有办法让插件加载更快，或者以一种好的方式实现它以避免显示缓慢？

我也在[wordpress.stackexchange](https://wordpress.stackexchange.com/questions/85725/how-to-implement-imdb-ratings-plugin-in-wp-in-a-good-way)上问过，但我被重定向到这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:19:16.407

我可以建议的2种方法：

*   使用 AJAX 加载 IMDB 数据，这样页面将首先呈现，然后您可以加载其余数据。你甚至可以在你的主题中创建一个自定义的 wordpress 页面来加载插件并从你的页面 js 中调用它。
*   缓存数据，以便您仅定期重新加载。我没有使用过这个插件，所以我猜你可能需要做一些重写才能做到这一点。

# ocaml - 来自类型定义的 ocaml eval 函数

> ID：14890550
> 
> 赞同：2
> 
> 时间：2013-02-15T08:15:56.580
> 
> 标签：ocaml, eval

嗨我有以下定义类型并尝试评估函数作为示例：

```
let evn =[("z1",Int 0);("x",Int 1);("y",Int 2);("z",Int 3);("z1",Int 4)];; 
val evn : (string * Nano.value) list = [("z1", Int 0); ("x", Int 1); ("y", Int 2); ("z", Int 3); ("z1", Int 4)] 
# let e1 =Bin(Bin(Var "x",Plus,Var "y"), Minus, Bin(Var "z",Plus,Var "z1"));; 
val e1 : Nano.expr = Bin (Bin (Var "x", Plus, Var "y"), Minus, Bin (Var "z", Plus, Var "z1")) 
# eval (evn,e1);;
- : Nano.value = Int 0 
# eval (evn,Var "p");;
Exception: Nano.MLFailure "Variable not bound: p". 
```

不知何故，我在 eval 函数的第二个 bin 匹配中得到了一个错误，说：此模式匹配 expr 类型的值，但预期的模式匹配 int 选项 * int 选项类型的值

类型 binop = 加 | 减号 | 穆尔 | 分区

```
type expr = Const of int        
| Var of string                 
| Bin of expr * binop * expr    

type value = Int of int     

type env = (string * value) list 
```

这是程序：

```
exception MLFailure of string

type binop = 
  Plus 
| Minus 
| Mul 
| Div 
| Eq 
| Ne 
| Lt 
| Le 
| And 
| Or          
| Cons

type expr =   
  Const of int 
| True   
| False      
| NilExpr
| Var of string    
| Bin of expr * binop * expr 
| If  of expr * expr * expr
| Let of string * expr * expr 
| App of expr * expr 
| Fun of string * expr    
| Letrec of string * expr * expr

type value =  
  Int of int        
| Bool of bool          
| Closure of env * string option * string * expr 
| Nil                    
| Pair of value * value     

and env = (string * value) list

let binopToString op = 
  match op with
      Plus -> "+" 
    | Minus -> "-" 
    | Mul -> "*" 
    | Div -> "/"
    | Eq -> "="
    | Ne -> "!="
    | Lt -> "<"
    | Le -> "<="
    | And -> "&&"
    | Or -> "||"
    | Cons -> "::"

let rec valueToString v = 
  match v with 
    Int i -> 
      Printf.sprintf "%d" i
  | Bool b -> 
      Printf.sprintf "%b" b
  | Closure (evn,fo,x,e) -> 
      let fs = match fo with None -> "Anon" | Some fs -> fs in
      Printf.sprintf "{%s,%s,%s,%s}" (envToString evn) fs x (exprToString e)
  | Pair (v1,v2) -> 
      Printf.sprintf "(%s::%s)" (valueToString v1) (valueToString v2) 
  | Nil -> 
      "[]"

and envToString evn =
  let xs = List.map (fun (x,v) -> Printf.sprintf "%s:%s" x (valueToString v)) evn in
  "["^(String.concat ";" xs)^"]"

and exprToString e =
  match e with
      Const i ->
        Printf.sprintf "%d" i
    | True -> 
        "true" 
    | False -> 
        "false"
    | Var x -> 
        x
    | Bin (e1,op,e2) -> 
        Printf.sprintf "%s %s %s" 
        (exprToString e1) (binopToString op) (exprToString e2)
    | If (e1,e2,e3) -> 
        Printf.sprintf "if %s then %s else %s" 
        (exprToString e1) (exprToString e2) (exprToString e3)
    | Let (x,e1,e2) -> 
        Printf.sprintf "let %s = %s in \n %s" 
        x (exprToString e1) (exprToString e2) 
    | App (e1,e2) -> 
        Printf.sprintf "(%s %s)" (exprToString e1) (exprToString e2)
    | Fun (x,e) -> 
        Printf.sprintf "fun %s -> %s" x (exprToString e) 
    | Letrec (x,e1,e2) -> 
        Printf.sprintf "let rec %s = %s in \n %s" 
        x (exprToString e1) (exprToString e2) 

let rec fold f base args = 
  match args with [] -> base
    | h::t -> fold f (f(base,h)) t

let listAssoc (k,l) = 
  fold (fun (r,(t,v)) -> if r = None && k=t then Some v else r) None l

let lookup (x,evn) = 
   let n = listAssoc (x,evn) in 
   match n with 
   | None -> raise (MLFailure x)
   | Some x -> x

let rec eval (evn,e) = match e with
    | Const i -> Some i 
    | Var v -> lookup (v,evn)

    | Bin(e1, Plus, e2) -> match (eval (evn,e1), eval (evn,e2)) with 
                            | (Some a, Some b) -> Some (a + b)
                            | (Some c, None) -> raise (MLFailure c)
                            | (None, Some a) -> raise (MLFailure a)
(here is the where the erro causing *)
    | Bin(e1, Div, e2)  -> match (eval (evn,e1), eval (evn,e2)) with  
                            | (Some a, Some b) -> Some (a / b)
                            | (Some c, None) -> raise (MLFailure c)
                            | (None, Some a) -> raise (MLFailure a)

       | Bin(e1, Minus, e2) -> match (eval (evn,e1), eval (evn,e2)) with 
                            | (Some a, Some b) -> Some (a - b)
                            | (Some c, None) -> raise (MLFailure c)
                            | (None, Some a) -> raise (MLFailure a)

       | Bin(e1, Mul, e2) -> match (eval (evn,e1), eval (evn,e2)) with 
                            | (Some a, Some b) -> Some (a * b)
                            | (Some c, None) -> raise (MLFailure c)
                            | (None, Some a) -> raise (MLFailure a) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T09:21:22.407

小心，用嵌套`match-with`不要忘记添加`begin-end`语句。这就是为什么你有这个错误。

```
let rec eval (evn,e) = match e with
    | Const i -> Some i 
    | Var v -> lookup (v,evn)

    | Bin(e1, Plus, e2) -> 
        begin match (eval (evn,e1), eval (evn,e2)) with 
              | (Some a, Some b) -> Some (a + b)
              | (Some c, None) -> raise (MLFailure c)
              | (None, Some a) -> raise (MLFailure a)
        end
    | Bin(e1, Div, e2)  -> 
        begin match (eval (evn,e1), eval (evn,e2)) with  
              | (Some a, Some b) -> Some (a / b)
              | (Some c, None) -> raise (MLFailure c)
              | (None, Some a) -> raise (MLFailure a)
        end

   | Bin(e1, Minus, e2) -> 
        begin match (eval (evn,e1), eval (evn,e2)) with 
              | (Some a, Some b) -> Some (a - b)
              | (Some c, None) -> raise (MLFailure c)
              | (None, Some a) -> raise (MLFailure a)
        end
   | Bin(e1, Mul, e2) -> 
        begin match (eval (evn,e1), eval (evn,e2)) with 
              | (Some a, Some b) -> Some (a * b)
              | (Some c, None) -> raise (MLFailure c)
              | (None, Some a) -> raise (MLFailure a)
        end 
```

如果你不这样做，就像你写的那样：

```
let rec eval (evn,e) = match e with
    | Const i -> Some i 
    | Var v -> lookup (v,evn)

    | Bin(e1, Plus, e2) -> match (eval (evn,e1), eval (evn,e2)) with 
              | (Some a, Some b) -> Some (a + b)
              | (Some c, None) -> raise (MLFailure c)
              | (None, Some a) -> raise (MLFailure a)
              | Bin(e1, Div, e2)  -> match (eval (evn,e1), eval (evn,e2)) with  
                        | (Some a, Some b) -> Some (a / b)
                        | (Some c, None) -> raise (MLFailure c)
                        | (None, Some a) -> raise (MLFailure a)
                        | Bin(e1, Minus, e2) -> (* ... *) 
```

# python - Python：获取不同的时间格式

> ID：14890552
> 
> 赞同：1
> 
> 时间：2013-02-15T08:16:02.780
> 
> 标签：python

如何获取格式为`16:13:34`(hours:minutes:seconds) 而不是`Fri Feb 15 16:13:55 2013`何时使用的时间`time.asctime()`？有没有办法返回第一个示例（）中所示的时间`16:13:14`？

**编辑：**我尝试了以下方法：

```
>>> local = time.gmtime("tm_hour") + ":" + time.gmtime("tm_min") + ":" + time.gm_time("tm_sec")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: a float is required 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:20:32.817

如果您需要当前 HH:MM:SS 时间，请使用：

```
time.strftime('%H:%M:%S') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T08:21:40.790

您也可以为此使用该[`datetime`](http://docs.python.org/2/library/datetime.html)模块。如果您想以给定格式获取当前时间，请使用

```
from datetime import datetime
print datetime.now().strftime("%H:%M:%S") 
```

# android - 如何告诉 BitmapFactory.decodeStream 给我一个完整质量的图像？

> ID：14890555
> 
> 赞同：0
> 
> 时间：2013-02-15T08:16:13.457
> 
> 标签：android, android-imageview, android-image

所以我在`AsyncTask`. 获取图像文件的`AsyncTask`url，将其下载到 Bitmap，将 Bitmap 保存到磁盘的某个位置，然后在现有的`ImageView`.

这是`doInBackground()`我的 AsyncTask 调用的实现：

```
 protected Bitmap doInBackground(String... urls) {
        try {
            URL image_url = new URL(urls[0]);
            String image_url_prefix_regex = "http://www\\.somewebsite\\.com";
            if (externalStorageIsAvailable()) {
                String file_path = getExternalFilesDir(null).getPath() + image_url.toString().replaceAll(image_url_prefix_regex, "");
                File target_file = new File(file_path);
                if (!target_file.getParentFile().exists()) {
                    target_file.getParentFile().mkdirs();
                }

                BitmapFactory.Options bitmap_options = new BitmapFactory.Options();
                bitmap_options.inScaled = false;
                bitmap_options.inDither = false;
                bitmap_options.inPreferredConfig = Bitmap.Config.ARGB_8888;
                bitmap_options.inPreferQualityOverSpeed = true;
                bitmap_options.inSampleSize = 1;

                Bitmap image = BitmapFactory.decodeStream(image_url.openStream(), null, bitmap_options);
                image.compress(CompressFormat.JPEG, 100, new FileOutputStream(target_file));
                return image;
            }
        }
        catch (MalformedURLException e) {
            Log.v(DEBUG_TAG, "Error: Caught MalformedURLException");
        }
        catch (IOException e) {
            Log.v(DEBUG_TAG, "Error: Caught IOException");
        }
        return null;
    } 
```

然后在`onPostExecute()`通话后期我有这个：

```
 protected void onPostExecute(Bitmap image) {
        ImageView mImageView = (ImageView) findViewById(R.id.main_image);
        mImageView.setImageBitmap(image);
    } 
```

然而，当代码下载并显示图像时，图像的大小和质量都会降低。如何使生成的图像具有完整质量？那些`BitmapFactory`.Options 设置是我迄今为止尝试过的东西，但它们似乎不起作用。

请注意，我不是在询问保存到外部存储的图像。我认为由于再次压缩而可能会降低质量，但这不应该影响我发送到 my 的图像`ImageView`，这就是我要问的问题。当然，如果这些假设有任何问题，请指出。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-15T08:59:01.153

为什么在解码位图 Stream 时使用位图工厂选项？只需使用

```
 Bitmap image = BitmapFactory.decodeStream(image_url.openStream()); 
```

代替

```
Bitmap image = BitmapFactory.decodeStream(image_url.openStream(), null, bitmap_options); 
```

# visual-studio-2008 - 下载的 geckofx-18.0-package 出现语法错误，如何解决？

> ID：14890558
> 
> 赞同：0
> 
> 时间：2013-02-15T08:16:24.180
> 
> 标签：visual-studio-2008, syntax-error, geckofx, generic-type-argument

如果我下载以下 GeckoFX-Framework 18.0 [https://bitbucket.org/geckofx/geckofx-18.0](https://bitbucket.org/geckofx/geckofx-18.0)的源包，用 Visual Studio 2008 打开 Geckofx-Core 然后尝试编译它，我得到以下错误：msdn .microsoft.com/en-ca/library/hxfhx4sy(v=vs.90).aspx

我认为如果我从这个页面下载它可能会起作用。实际上，我在 C# 方面没有太多经验来确定我应该在此处输入哪些类型定义（我在不同位置遇到大约 26 个相同类型的错误）。有人可以帮助我或获取 Geckofx-18.0 的 Geckofx-Core 和 Geckofx-winforms 的两个 dll 吗？

在旧版本中，开发人员似乎也直接提供了这两个二进制文件。

以下是有错误的行：

```
Fehler  3   Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\Net\UploadChannel.cs   21  17  Geckofx-Core
Fehler  4   Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\DOM\GeckoDomDocument.cs    21  17  Geckofx-Core
Fehler  5   Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\DOM\GeckoTextNode.cs   24  11  Geckofx-Core
Fehler  7   Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\DOM\GeckoDomDocument.cs    37  12  Geckofx-Core
Fehler  8   Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\Services\WindowWatcher.cs  39  17  Geckofx-Core
Fehler  9   Die Typargumente der Gecko.nsString.Pass<T>(System.Func<Gecko.nsACString,Gecko.nsACString,T>, string, string)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\Net\DnsService.cs  40  35  Geckofx-Core
Fehler  10  Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\DOM\Events\DomEventTarget.cs   53  17  Geckofx-Core
Fehler  12  Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\DOM\GeckoDomDocument.cs    57  5   Geckofx-Core
Fehler  15  Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\DOM\GeckoDomDocument.cs    63  5   Geckofx-Core
Fehler  16  Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\GeckoWindow.cs 64  17  Geckofx-Core
Fehler  17  Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\DOM\Events\DomEventTarget.cs   64  17  Geckofx-Core
Fehler  18  Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\DOM\GeckoDomDocument.cs    69  5   Geckofx-Core
Fehler  21  Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\DOM\GeckoDomDocument.cs    75  5   Geckofx-Core
Fehler  25  Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\DOM\GeckoDomDocument.cs    91  5   Geckofx-Core
Fehler  26  Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\GeckoWindow.cs 110 17  Geckofx-Core
Fehler  27  Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\DOM\GeckoDomDocument.cs    114 5   Geckofx-Core
Fehler  28  Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\DOM\GeckoDomDocument.cs    138 5   Geckofx-Core
Fehler  29  Die Typargumente der Gecko.nsString.Pass<T>(System.Func<Gecko.nsAUTF8String,T>, string)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.  X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\DOM\GeckoDomDocument.cs    143 17  Geckofx-Core
Fehler  31  Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\DOM\GeckoDomDocument.cs    176 5   Geckofx-Core
Fehler  32  Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\DOM\GeckoDomDocument.cs    192 33  Geckofx-Core
Fehler  33  Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\DOM\GeckoNode.cs   233 11  Geckofx-Core
Fehler  34  Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\DOM\GeckoDomDocument.cs    239 17  Geckofx-Core
Fehler  35  Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\DOM\GeckoDomDocument.cs    265 17  Geckofx-Core
Fehler  37  Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\DOM\GeckoDomDocument.cs    317 38  Geckofx-Core
Fehler  38  Die Typargumente der Gecko.Interop.ExtensionMethods.Wrap<TGeckoObject,TWrapper>(TGeckoObject, System.Func<TGeckoObject,TWrapper>)-Methode kˆnnen nicht per R¸ckschluss aus der Syntax abgeleitet werden. Geben Sie die Typargumente explizit an.    X:\ixmid\products\geckofx-geckofx-18.0-632b169ff285\Geckofx-Core\DOM\GeckoDomDocument.cs    423 17  Geckofx-Core 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:51:59.430

问题是编译器似乎无法猜测泛型方法的正确类型。较新的 Visual Studio 编译器似乎在这方面做得更好。

我怀疑您使用的是早于 2010 年的视觉工作室。尝试升级到 2010 年（Express 可以）。

或者编辑代码以指定泛型类型，以帮助编译器。

# android - 如何使用嵌套开关盒显示数据？

> ID：14890560
> 
> 赞同：0
> 
> 时间：2013-02-15T08:16:25.800
> 
> 标签：android

[我的项目图]

## 行动=1

```
 String[] values = new String[] { "Android", "iPhone", "WindowsMobile"};
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
     android.R.layout.simple_list_item_1, android.R.id.text1, values);
      lisdis.setAdapter(adapter); 
      lisdis.setOnItemClickListener(this);

}
@Override
public void onItemClick(AdapterView<?> arg0, View v, int position, long id)
{

    Intent mIntent = new Intent(display_publishermagazine.this, display_publicationmagazine.class);
        mIntent.putExtra("position", position+1);
        startActivity(mIntent); 
```

## 行动=2

```
 Intent mIntent = getIntent();
    int intValue = mIntent.getIntExtra("position",0);

   switch (intValue)
    {
        case 1:values = new String[] { "Android For Beginer","Android Devloper" };break;
        case 2:values = new String[] { "I-phone for beginer","I-phone for devloper" };break;
        case 3:values = new String[] { "windows for beginer","windows for devloper" };break;
    }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
         android.R.layout.simple_list_item_1, android.R.id.text1, values);

lisdis.setAdapter(adapter); 
    lisdis.setOnItemClickListener(this);        
}

@Override
public void onItemClick(AdapterView<?> arg0, View v, int position, long id)
{
    Intent myIntent = new Intent(display_publishermagazine.this, display_publicationmagazine.class);

    myIntent.putExtra("position", position+1);
    startActivity(myIntent);
   } 
```

## 第三幕

```
 Intent myIntent = getIntent(); 
      int intValue = myIntent.getIntExtra("position", 0);

    switch (intValue)
    {
        case 1:values = new String[] { "Android for lerner1","android for learner2" };break;
        case 2:values = new String[] { "Android  for devloper1","android for devloper2" };break;
    }

/*values = new String[] { "iphone for lerner1","iphone for learner2" }      
values = new String[] { "iphone for devloper1","iphone for devloper2} */
}

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,

             android.R.layout.simple_list_item_1, android.R.id.text1, values);

        g1.setAdapter(adapter); 
} 
```

我需要

*   当用户点击 android 时，使用 switch case 在另一个活动中显示数据
*   然后显示数据 android Lerner 或 android developers.then 点击 android learner
*   然后显示 android lerner1 或 android learner2
*   and when select android developer then display android lerner1 or android learner2.

在这里，它仅适用于 android，不适用于 iphone 或 windows。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:46:00.297

这个怎么样

用法：`TutorialUtils.getMenu();`, `TutorialUtils.getMenu(new int[] { 0 })`,`TutorialUtils.getMenu(new int[] { 2, 1 })`或在您的情况下进行一些修改`TutorialUtils.getMenu(getIntent().getExtras().getIntArray("positionsHistory"))`。

`TutorialUtils`上课，自己处理异常。

```
import java.util.ArrayList;
import java.util.List;

public class TutorialUtils {
private static CompositeTutorialNode nodes = new CompositeTutorialNode(
        "root");
static {
    nodes = new CompositeTutorialNode("root")
            .add(new CompositeTutorialNode("Android").add(
                    new CompositeTutorialNode("Android For Developers").add(
                            new TextTutorialNode("Android for Developer1"))
                            .add(new TextTutorialNode(
                                    "Android for Developer2"))).add(
                    new CompositeTutorialNode("Android For Learners").add(
                            new TextTutorialNode("Android for Learner1"))
                            .add(new TextTutorialNode(
                                    "Android for Learner2"))))
            .add(new CompositeTutorialNode("iPhone Sucks !!")
                    .add(new CompositeTutorialNode("iPhone Sucks For Developers")
                            .add(new TextTutorialNode(
                                    "iPhone Sucks for Developer1")).add(
                                    new TextTutorialNode(
                                            "iPhone Sucks for Developer2")))
                    .add(new CompositeTutorialNode("iPhone For Learners")
                            .add(new TextTutorialNode("iPhone Sucks for Learner1"))
                            .add(new TextTutorialNode("iPhone Sucks for Learner2"))))
            .add(new CompositeTutorialNode("Windows").add(
                    new CompositeTutorialNode("Windows For Developers").add(
                            new TextTutorialNode("Windows for Developer1"))
                            .add(new TextTutorialNode(
                                    "Windows for Developer2"))).add(
                    new CompositeTutorialNode("Windows For Learners").add(
                            new TextTutorialNode("Windows for Learner1"))
                            .add(new TextTutorialNode(
                                    "Windows for Learner2"))));

}

public static String[] getMenu() {
    TutorialNode tmpNode = nodes;
    return prepareNames(tmpNode);
}

private static String[] prepareNames(TutorialNode node) {
    List<String> names = new ArrayList<String>();
    if (node instanceof CompositeTutorialNode) {
        List<TutorialNode> childs = ((CompositeTutorialNode) node).get();
        for (TutorialNode n : childs) {
            names.add(n.getName());
        }
    }
    return names.toArray(new String[] {});
}

public static String[] getMenu(int[] position) {
    TutorialNode tmpNode = nodes;
    for (int i : position) {
        if (tmpNode instanceof CompositeTutorialNode) {
            tmpNode = ((CompositeTutorialNode) tmpNode).get(i);
        }
    }
    return prepareNames(tmpNode);
}

interface TutorialNode {

    public String getName();
}

public static class CompositeTutorialNode implements TutorialNode {
    private List<TutorialNode> childs = new ArrayList<TutorialNode>();
    String name;

    public CompositeTutorialNode(String name) {
        this.name = name;
    }

    public CompositeTutorialNode add(TutorialNode node) {
        childs.add(node);
        return this;
    }

    public TutorialNode get(int index) {
        return childs.get(index);
    }

    public List<TutorialNode> get() {
        return childs;
    }

    @Override
    public String getName() {
        return name;
    }
}

public static class TextTutorialNode implements TutorialNode {
    String name;

    public TextTutorialNode(String name) {
        this.name = name;
    }

    @Override
    public String getName() {
        return name;
    }
}
} 
```

# ruby-on-rails - Rails“没有要加载的文件——rubygems (LoadError)”

> ID：14890561
> 
> 赞同：5
> 
> 时间：2013-02-15T08:16:28.673
> 
> 标签：ruby-on-rails, linux, amazon-web-services, amazon-ec2

我刚从 Heroku 切换到 Amazon Web Services。以前，我使用带有 Ruby 的命令提示符（从我的 Windows PC）运行我所有的 Rails 命令行命令。但是，在我登录到我的 Amazon Linux EC2 实例，然后进入我的应用程序目录后，我收到此错误：

```
/usr/bin/rails:9:in `require': no such file to load -- rubygems (LoadError)
    from /usr/bin/rails:9 
```

当我尝试运行任何命令时，如`rails console`.

我查看了[这个问题](https://stackoverflow.com/questions/2896485/no-such-file-to-load-rubygems-loaderror)，但似乎多个 Ruby 库不适用于我，因为

`which -a ruby`

只产生一个位置：

`/usr/bin/ruby`

此外，[这个问题](https://stackoverflow.com/questions/9933217/rails-error-require-no-such-file-to-load-rubygems-loaderror?lq=1)似乎没有帮助，因为我没有。当我尝试输入

`rvm use 1.9.3`

我收到这条消息：

`-bash: rvm: command not found`

这是我第一次看到 Linux 环境，所以任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T16:49:36.090

我遇到了同样的问题，并带有相同的错误消息。从我的 EC2 实例中，我注意到我的 ruby​​ 版本是 1.8 (ruby -v)。我重新启动了 EC2 实例，这导致 Elastic Beanstalk 启动了一个新的 EC2 实例并终止了旧的实例。新实例正在运行 1.9.3，我变得畅通无阻。我讨厌神奇的解决方案，但是随着旧实例的终止，我无法进行更多的分类。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:02:51.507

```
-bash: rvm: command not found 
```

这清楚地表明您的机器上没有安装 rvm，或者如果安装了您没有正确设置路径。

[检查路径](http://www.question-defense.com/2010/03/29/no-such-file-to-load-rubygems-loaderror)

有时会有 gem 版本控制指向错误的版本。

这曾经发生在我身上——

漠视！`sudo bundle install`是捆绑`2.3.8`而不是`3.0.0.beta3`. 通过在我的 Gemfile 中指定**版本来修复它。**

为确保编译顺利进行，请在终端会话中向后滚动并查看应安装的必备软件包列表（最好剪切并粘贴所有名称，以免输入错误）。

```
sudo apt-get install build-essential openssl libreadline6 libreadline6-dev zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-0 libsqlite3-dev sqlite3 libxml2-dev libxslt1-dev autoconf libc6-dev libncurses5-dev automake libtool bison subversion 
```

现在您可以使用 rvm 下载、编译和安装 Ruby。

1 `rvm install 1.9.3`

2 `rvm use 1.9.3 --default`

猜猜这更多的是与 RVM 相关的问题以及与 osx 的系统 ruby​​ 的一些奇怪的联系？（我在用户级别安装了 RVM）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T10:00:06.540

我用过 `gem install bundler`。然后运行`rvm install`正常

# mysql - 连接到 mysql , CSHTML

> ID：14890562
> 
> 赞同：0
> 
> 时间：2013-02-15T08:16:30.443
> 
> 标签：mysql, asp.net-mvc, razor, database-connection

我有以下代码：

```
 @{

    Layout = "~/_SiteLayout.cshtml";
    Page.Title = "About";
    if(Request["id"].IsEmpty()){
    Write("something");
} else {
    DataSet ds = new DataSet();
   var Id = Request.QueryString["id"].ToString();  
    var db = Database.Open("SmallBakery");
    var selectQueryString = String.Format("SELECT * FROM Products where Id={0}", Id);  
}

}

<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
    </head>
    <body>
          <table>  

            <tr>  

                <th>Product</th>  

            </tr>  
      @if (ds.Tables[0].Rows.Count >0){

            <tr>  
                <td>@row.Id</td>  
                <td>@row.Name</td>

            </tr>  

          }
    </table>  
    </body>
</html> 
```

这里的问题是我在这一行出现错误：“@if (ds.Tables[0].Rows.Count > 0)”

我的问题是为什么以及如何解决它（我刚开始学习这个，这对我来说是新的......）谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:25:49.947

ds 并不总是被声明并且从不被初始化。查看您的初始声明：

```
@{
    Layout = "~/_SiteLayout.cshtml";
    Page.Title = "About";
    if(Request["id"].IsEmpty()) {
       Write("something");
    } else {
       DataSet ds = new DataSet();
       var Id = Request.QueryString["id"].ToString();  
       var db = Database.Open("SmallBakery");
       var selectQueryString = String.Format("SELECT * FROM Products where Id={0}", Id);  
   } 
```

}

首先，如果查询字符串中没有 id，则根本不声明 ds。那将是一个错误。然后，如果有一个 id，ds 被声明为一个新的数据集，但没有给出一个值（除了一个空的数据集）。这是另一个可能的错误。

你可以这样构造它：

```
@{
    Layout = "~/_SiteLayout.cshtml";
    Page.Title = "About";
    if(Request["id"].IsEmpty()) {
       Write("something");
    } else {
       DataSet ds = new DataSet();
       var Id = Request.QueryString["id"].ToString();  
       var db = Database.Open("SmallBakery");
       var selectQueryString = String.Format("SELECT * FROM Products where Id={0}", Id); 
       ds = ... **** Use the query here to fill the ds with the required data ****

       **** put the HTML here - this HTML code is not needed
            in the other branch of the if statement ****
   } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:28:28.147

一方面，我没有`ds`在任何地方看到声明和设置，所以你确定它存在吗？你确定你分配给它？`NullReferenceException`即使`ds`是 a并且已被分配到，这里也有可能`DataSet`，因为在您尝试访问第一个索引处的一个表之前，没有检查是否至少有一个表。

因此，要在这方面彻底（以及您可以自由添加的任何特定于场景的逻辑），您可以这样做：

```
@if (ds != null && ds.Tables.Count > 0 && ds.Tables[0].Rows.Count > 0) { 
```

# sql - 拆分全名并将其写入 SQL Server 2008 中的另一个表

> ID：14890563
> 
> 赞同：1
> 
> 时间：2013-02-15T08:16:32.183
> 
> 标签：sql, sql-server, database, split

我有一张桌子，比如**A**，其中有一列*FULLNAME*。此列下存储的值的格式为“姓氏中间名”（每个之间有一个空格）。我还有另一个表**B**，其中有*SURNAME*、*NAME*和*MIDDLENAME*列。从表**A中获取所有***FULLNAME*单元格的最佳方法是什么，相应地拆分它们并将它们插入表**B**中？

 ****谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T08:28:51.133

您可以将用于搜索字符串中出现的函数（通常返回其索引）与 Substring 函数结合使用，此外您还需要 Left 和 Right 函数

例如，在 SQL Server 中，您会发现以下函数：

[CHARINDEX ( expressionToFind ,expressionToSearch [ , start_location ] )](http://msdn.microsoft.com/en-us/library/ms186323.aspx)

[SUBSTRING（表达式，开始，长度）](http://msdn.microsoft.com/en-us/library/ms187748.aspx)

[左（字符表达式，整数表达式）](http://msdn.microsoft.com/en-us/library/ms177601.aspx)

[右（字符表达式，整数表达式）](http://msdn.microsoft.com/en-us/library/ms177532.aspx)

脚步：

1.  使用 LEFT 获取第一个单词（integer_expression = 第一个 Emtpy 空间的索引）
2.  使用 Substring 获取中间词（start 是第一个 Emtpy 空间的索引 + 1 ，length 是整个长度 - emtpy 空间的第二个索引，使用 startlocation 搜索应该是第一个出现 +1 的第二个出现）
3.  使用正确的函数来获取最后一个单词，类似于步骤 1

请注意，如果您有任何名称，包括中间的空格（例如像 anna maria 这样的名字），这将不会按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:17:53.320

此查询将溢出您的字符串。

```
select left(FULLNAME,CHARINDEX(' ',FULLNAME)), SUBSTRING(FULLNAME,CHARINDEX(' ',name)+1,len(FULLNAME)) from tableA 
```****

# c# - 无法使用多线程访问已处置的对象

> ID：14890564
> 
> 赞同：2
> 
> 时间：2013-02-15T08:16:35.243
> 
> 标签：c#, multithreading, winforms, visual-studio

每次关闭应用程序时，我都会遇到一个非常烦人的错误，该错误告诉我：

> 无法访问已处置的对象

只有当我关闭我的应用程序时才会发生这种情况。

这是发生错误的部分代码：

```
/// <summary>
/// Method that shows a log to the user, about what is happening behind scenes.
/// </summary>
/// <param name="logtext"></param>
public void DisplayLog(string logtext)
{
    if (this.txtLog.InvokeRequired)
    {
        Invoke(new MethodInvoker(delegate()
            {
                txtLog.AppendText(logtext + "\n\n");
            }));
    }
    else
    {
        txtLog.AppendText(logtext + "\n\n");
    }
} 
```

错误发生在`txtLog.AppendText`else 括号之间。它可能与我正在使用的线程有关，上面的代码没有在我创建的线程中运行，只有 Windows 窗体线程在后台运行以检查触发的事件，发送的代码`logtext`这个方法是在另一个名为 的内部类`Serial`中，然后它从一个线程运行，有人知道如何解决这个问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T08:20:39.480

使用前检查[`IsDisposed`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.isdisposed.aspx)TextBox 的属性：

```
if (!txtLog.IsDisposed) {
    txtLog.AppendText(logtext + "\n\n");
} 
```

# android - Android蓝牙中的服务发现失败异常

> ID：14890569
> 
> 赞同：1
> 
> 时间：2013-02-15T08:16:47.130
> 
> 标签：android, bluetooth, client-server

过去 2 天试图解决这个问题。我在这个论坛上看到了这个主题的许多解决方案，并尝试了其中的大多数，比如[This](https://stackoverflow.com/questions/12091913/android-bluetooth-connection-service-discovery-failed)和[This](https://stackoverflow.com/questions/3397071/service-discovery-failed-exception-using-bluetooth-on-android)，但仍然没有运气。因此，我提出了一个关于这个主题的新问题。所以任何人都可以指导我如何解决这个问题？特别是我认为我不能使用正确的 UUID（尽管我使用标准 UUID **00001101-0000-1000-8000-00805F9B34FB**）来连接我的**服务器 PC**（用 java 编写）和**客户端 Android** .

**服务器代码（Java）：**

```
public class Main {

    private final LocalDevice mLocalDevice;
    public static void main(String[] args) throws IOException, InterruptedException
    {
        new Main().start();
    }

    public Main() throws IOException
    {
        mLocalDevice = LocalDevice.getLocalDevice();
        mLocalDevice.setDiscoverable(DiscoveryAgent.GIAC);
    }

    public void start() throws IOException
    {
        StreamConnectionNotifier connectionNotifier =(StreamConnectionNotifier) Connector.open("btspp://localhost:" +
                                                                 "0000110100001000800000805F9B34FB;name=BtExample;" +
                                                                     "authenticate=false;encrypt=false;master=false");

        System.out.println("accepting on " + mLocalDevice.getBluetoothAddress());
        StreamConnection streamConnection = connectionNotifier.acceptAndOpen();
        DataInputStream is = streamConnection.openDataInputStream();

        byte[] bytes = new byte[1024];
        int r;
        while ((r = is.read(bytes)) > 0)
        {
             System.out.println(new String(bytes, 0, r));
        }
        streamConnection.close();
    }

} 
```

**客户端代码（安卓）：**

```
 try {
        mBtAdapter = BluetoothAdapter.getDefaultAdapter();
        Log.d("BT", "getting local device");
          // remote MAC here:
        BluetoothDevice device =mBtAdapter.getRemoteDevice("My_Computer_bluetooth_Address");
        Log.d("BT", "remote device: "+ device.getName().toString());
        Log.d("BT", "connecting to service");

        //Process process = Runtime.getRuntime().exec("su -c 'sdptool records " + device.getAddress() + "'");
        //Log.d("BT", process.toString());
        //Method m = device.getClass().getMethod("createRfcommSocket", new Class[] {int.class});
        //socket = (BluetoothSocket) m.invoke(device, 1);//I also tried this,but same exception occurs
        //sock=socket;
        BluetoothSocket socket = device.createInsecureRfcommSocketToServiceRecord(
            UUID.fromString("00001101-0000-1000-8000-00805F9B34FB"));
        Log.d("BT", "about to connect");

        mBtAdapter.cancelDiscovery();
        socket.connect();
        Log.d("BT", "Connected!");

        socket.getOutputStream().write("Hello, world!".getBytes());

} catch (Exception e) {
        Log.e("BT", "Error connecting to device", e);
} 
```

**Logcat 异常视图：**

```
02-15 14:12:02.022: D/BT(4798): getting local device
02-15 14:12:02.023: D/BT(4798): remote device: SHUVRO-PC    //my PC name
02-15 14:12:02.023: D/BT(4798): connecting to service
02-15 14:12:02.024: I/BluetoothSocket_MTK(4798): [JSR82] Bluetooth Socket Constructor
02-15 14:12:02.024: I/BluetoothSocket_MTK(4798): [JSR82] type=1 fd=-1 auth=false encrypt=false port=-1
02-15 14:12:02.026: D/BT(4798): about to connect
02-15 14:12:02.055: I/BluetoothSocket_MTK(4798): [JSR82] connect: do SDP
02-15 14:12:08.057: I/BluetoothSocket_MTK(4798): [JSR82] SdpHelper::onRfcommChannelFound: channel=-1
02-15 14:12:08.059: E/BT(4798): Error connecting to device
02-15 14:12:08.059: E/BT(4798): java.io.IOException: Service discovery failed
02-15 14:12:08.059: E/BT(4798):     at android.bluetooth.BluetoothSocket$SdpHelper.doSdp(BluetoothSocket.java:813)
02-15 14:12:08.059: E/BT(4798):     at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:382)
02-15 14:12:08.059: E/BT(4798):     at com.bluetoothTest.BluetoothTestActivity.onClick(BluetoothTestActivity.java:82)
02-15 14:12:08.059: E/BT(4798):     at android.view.View.performClick(View.java:3517)
02-15 14:12:08.059: E/BT(4798):     at android.view.View$PerformClick.run(View.java:14155)
02-15 14:12:08.059: E/BT(4798):     at android.os.Handler.handleCallback(Handler.java:605)
02-15 14:12:08.059: E/BT(4798):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-15 14:12:08.059: E/BT(4798):     at android.os.Looper.loop(Looper.java:137)
02-15 14:12:08.059: E/BT(4798):     at android.app.ActivityThread.main(ActivityThread.java:4508)
02-15 14:12:08.059: E/BT(4798):     at java.lang.reflect.Method.invokeNative(Native Method)
02-15 14:12:08.059: E/BT(4798):     at java.lang.reflect.Method.invoke(Method.java:511)
02-15 14:12:08.059: E/BT(4798):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:809)
02-15 14:12:08.059: E/BT(4798):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:576)
02-15 14:12:08.059: E/BT(4798):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T09:55:46.083

这是我在客户端用于建立（安全或不安全）连接的最终代码。在我的用例中：一个重要的 pinCode 意味着目标设备需要安全连接，否则目标设备接受不安全的连接。

我认为这段代码需要 API 级别 15+

```
private BluetoothAdapter mBluetoothAdapter;
public final String BT_UUID = "00001101-0000-1000-8000-00805F9B34FB";
private BluetoothDevice bluetoothDevice;
private BluetoothSocket socket;

...

public void establishBluetoothConnection(String pinCode) throws IOException {
    //needed because "bluetooth device discovery" may initiated by any other
    // process and there are good chances that the socket.connect() fail when bluetooth discovery process is running.
    mBluetoothAdapter.cancelDiscovery(); 

    if ("".equals(pinCode) || pinCode == null || "0000".equals(pinCode)) {
        socket = bluetoothDevice.createInsecureRfcommSocketToServiceRecord(UUID.fromString(BT_UUID));
    } else {
        setPin(pinCode);
        socket = bluetoothDevice.createRfcommSocketToServiceRecord(UUID.fromString(BT_UUID));
    }
    socket.connect(); //blocking up to timeout of about 12 sec. throws IOException in case of failure
}

/**
 * hack to set the pin code programatically. The android API don't have a public method to set the pin code.
 * that's why we use this hack. In case of failure: android will prompt the user to enter the pin code manually.
 */
private void setPin(String pinCode) {
    try {
        byte[] ar = pinCode.getBytes();
        Method m2 = bluetoothDevice.getClass().getMethod("setPin", new Class[]{byte[].class});
        m2.invoke(bluetoothDevice, ar);
    } catch (NoSuchMethodException e) {
        Log.e("Bluetooth", "Failed to set pin code", e);
    } catch (InvocationTargetException e) {
        Log.e("Bluetooth", "Failed to set pin code", e);
    } catch (IllegalAccessException e) {
        Log.e("Bluetooth", "Failed to set pin code", e);
    }
} 
```

# javascript - 单击网页中的上一个和下一个超链接时向上/向下滚动文本区域

> ID：14890578
> 
> 赞同：0
> 
> 时间：2013-02-15T08:17:59.680
> 
> 标签：javascript, jquery

我想显示一个超链接“上一个”“下一个”。单击“下一个超链接”应将 textarea 滚动到下一个位置。单击“prev”超链接应将 textarea 滚动到上一个位置。

在 textarea 中跳转的位置是已知的，例如 line: 10，然后 line 40 , 50 , 70 , 101 , .... textarea 有一个固定的高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:37:04.187

您可以使用分页。我更喜欢使用带有 jquery 的样式分页-

[http://flaviusmatis.github.com/simplePagination.js/#page-20](http://flaviusmatis.github.com/simplePagination.js/#page-20)

这将帮助你确定。根据您想要下一步的需要，您需要为当前文本块提供位置，或者您可以使用`margin`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:48:50.723

试试这个：- [http://jsfiddle.net/MCK8g/](http://jsfiddle.net/MCK8g/)

```
$(function(){

    $("#prev").on("click",function(){
        $("html, body").animate({ scrollTop: -500 + window.pageYOffset }, 600);
    });

     $("#next").on("click",function(){
         $("html, body").animate({ scrollTop: 500 + window.pageYOffset }, 600);
    });
}); 
```

根据所需的滚动更改系数“500”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:00:47.223

谷歌搜索，第一次点击..

```
function scrollToLine($textarea, lineNumber) {
  var lineHeight = parseInt($textarea.css('line-height'));
  $textarea.scrollTop(lineNumber * lineHeight);      
} 
```

> [https://makandracards.com/makandra/8247-scroll-a-textarea-to-a-given-line-with-jquery](https://makandracards.com/makandra/8247-scroll-a-textarea-to-a-given-line-with-jquery)

（解决方案是使用 jQuery）

如前所述，它们仅在以像素为单位设置行高时才有效，如果没有，则帖子中还提供了带有解决方法的链接，请参见

> [jQuery：将文本区域滚动到给定位置](https://stackoverflow.com/questions/5458655/jquery-scroll-textarea-to-given-position)

# ios - 我添加了 ScatterPlot 视图但我在页面上看不到它

> ID：14890583
> 
> 赞同：1
> 
> 时间：2013-02-15T08:18:26.077
> 
> 标签：ios, objective-c, core-plot, scatter-plot

我有一个像这样的散点图类：

```
@interface myCPTScatterPlot :  UIView <CPTPlotDataSource , CPTScatterPlotDelegate ,    CPTScatterPlotDataSource>

@property (nonatomic, assign) CPTGraphHostingView *hostView;

-(void) initAll;
-(void) configureHost;
-(void) configureGraph;
-(void) configurePlots;
-(void) configureAxes;

@end 
```

我实现了所有配置功能。我创建了一个图表并将其添加到主机中：self.hostView.hostedGraph = graph;

我很好地实现了 myCPTScatterPlot.mm 文件。

我在 myCPTScatterPlot.mm 文件中有一个 initWithframe 函数，例如：

```
-(id)initWithFrame:(CGRect)frame {
    if ((self = [super initWithFrame:frame])) {
        hostView = [(CPTGraphHostingView *) [CPTGraphHostingView alloc] initWithFrame:frame];
    }
    return self;
} 
```

最后，我有一个 pageView.mm 文件，并将所有页面对象添加到我的 page.view 中

```
[(UIView *)page performSelectorOnMainThread:@selector(addSubview:) withObject:firstScatterPlot waitUntilDone:YES]; 
```

但我看不到我的图表:(

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:23:22.837

好的，我做到了。我要添加到视图（页面）中的元素对象应该是 CPTGraphHostingView。比一切都会好。

```
[(UIView *)page performSelectorOnMainThread:@selector(addSubview:) withObject:firstScatterPlot waitUntilDone:YES]; 
```

# bash - 使用 awk 或 xxd 或其他东西解析包含十六进制字符代码的日志

> ID：14890590
> 
> 赞同：0
> 
> 时间：2013-02-15T08:18:53.037
> 
> 标签：bash, awk, serial-port, xxd

我有一个看起来像这样的文件：

```
.
.
.
    15 02 2013 12:05:07 [DBG] vspd[3327]: VSP   0: RX 452B30303032340D
    15 02 2013 12:05:07 [DBG] vspd[3327]: VSP   0: WX 452B30303032340D 
```

串口通信的嗅探器日志。

如何自动将十六进制字符代码转换为字符串？

我试图使用这样的东西：

```
cat vspd.log | awk -F'(RX|WX)[[:space:]]*' '{print $2}' | awk 'BEGIN { FS = "" }{for (i = 1; i < NF; i = i + 1) a=$i$i+1;printf "%s", a; print}' | xxd -r 
```

但它只取得了非常部分的成功，我想我把管道弄乱了。

问题是我如何转换

```
tail -f file.log | awk -F'(RX|WX)[[:space:]]*' '{print $2}' 
```

变成可读的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:32:46.520

Perl 解决方案：

```
#!/usr/bin/perl
while (<>) {
    ($prefix, $hex) = /^(.*) (.*)$/;
    $hex =~ s/(..)/chr hex $1/ge;
    print "$prefix $hex\n";
} 
```

输出：

```
15 02 2013 12:05:07 [DBG] vspd[3327]: VSP   0: RX E+00024
15 02 2013 12:05:07 [DBG] vspd[3327]: VSP   0: WX E+00024 
```

注意：您可能需要从字符串中删除最后的 \x0D。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:08:33.693

您确实可以使用`awk`and到达那里`xxd`，这是一个示例：

```
<infile awk -F'(RX|WX)[[:space:]]*' '{ print $2 }' | xxd -p -r | awk 1 RS='\r' 
```

输出：

```
E+00024
E+00024 
```

### 旧答案

使用 GNU awk，您可以`strtonum()`用来转换十六进制，例如：

```
function hex2str(n) {
  s = ""
  for(i=1; i<=length(n)-1; i+=2)
    s = s sprintf("%c", strtonum("0x" substr(n, i, 2)));
  return s
} 
```

然后你可以像这样进行转换：

```
{ $NF = hex2str($NF) } 
```

这是一个完整的例子：

```
<infile awk ' 
  function hex2str(n) {
    s = ""
    for(i=1; i<=length(n)-1; i+=2)
      s = s sprintf("%c", strtonum("0x" substr(n, i, 2)));
    return s
  }

  { $NF = hex2str($NF) }

  1
' 
```

输出：

```
15 02 2013 12:05:07 [DBG] vspd[3327]: VSP 0: RX E+00024
15 02 2013 12:05:07 [DBG] vspd[3327]: VSP 0: WX E+00024 
```

# php - 带有个人资料页面的 PHP 登录/注册系统

> ID：14890591
> 
> 赞同：1
> 
> 时间：2013-02-15T08:18:57.063
> 
> 标签：php, mysql, login, registration

我为 PHP 登录和注册系统编写了一些代码，唯一的问题是当用户登录时，他的用户名只是`$_POST`在他的个人资料页面上发布（）。所以我的问题是：如何创建一个登录系统，当用户登录时，他的用户名不显示，但系统看到的是 Mysql 中的用户名并显示他的真实姓名？很抱歉解释模糊，但我真的不知道如何解释。

我的代码：（用于登录表单）

```
 session_start();
    $_SESSION['username'] = $_POST['username'];

    $con=mysql_connect("host", "user", "pass");

    mysql_select_db("db"); 

    $username=$_POST['username']; 
    $password=$_POST['password']; 

    $user=mysql_real_escape_string($username); 
    $pass=mysql_real_escape_string($password); 

    $query=mysql_query("SELECT * FROM login where 
    username='$user' AND  
    password='$pass' ");  

    $count=mysql_num_rows($query); 
    if($count==1)  
        /* $count checks if username and password are in same row */
    { 

 $hour = time() + 3600;   
    /* $hour sets cookie storage time for 1 hour */

    /* setcookie() function sets cookie after login */
 setcookie("username", $username, $hour);  
 setcookie("password", $password, $hour); 

 header("");  
    /* header() function redirect user to members page */
} 
else
{  
print " <link rel=\"stylesheet\" type=\"text/css\" href=\"css/global_profile.css\" />\n";
print "<h3>" . "Username or password is incorrect" . "</h3>"; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:11:26.233

在这里，我为您整理了一个简单的登录脚本（因为我很无聊；p），通过它进行扫描，也许它会引起一些兴趣，它使用 PDO 进行数据库连接，因为 mysql_ 函数很快就会被弃用。

```
<?php
session_start();

/**
 * Table
CREATE TABLE IF NOT EXISTS `login` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(100) DEFAULT NULL,
  `pass_hash` varchar(255) DEFAULT NULL,
  `pass_salt` varchar(255) DEFAULT NULL,
  `birthday` varchar(100) DEFAULT NULL,
  `firstname` varchar(100) DEFAULT NULL,
  `lastname` varchar(100) DEFAULT NULL,
  `email` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=0 ;

 */

//DB Stuff
define('DBHOST','127.0.0.1');
define('DBNAME','yourdb');
define('DBUSER','root');
define('DBPASS','toor');
//End Config:---

//Open a PDO Database connection
try {
    $db = new PDO("mysql:host=".DBHOST.";dbname=".DBNAME, DBUSER, DBPASS);
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
}catch (Exception $e){
    die('Cannot connect to mySQL server.');
}

class Login{
    public $db;
    public $user;
    public $pass;
    public $error;
    // sha512
    public $algo = '$6';
    // Cost parameter, 25k iterations
    public $cost = '$rounds=25000$';

    function __construct(PDO $db){
        $this->db = $db;
        $this->global_salt = sha1($_SERVER['HTTP_HOST']);
    }

    function make_seed(){
        list($usec, $sec) = explode(' ', microtime());
        return (float) $sec + ((float) $usec * 100000);
    }

    function unique_salt(){
        $salt = null;
        mt_srand($this->make_seed());
        for($i=0;$i < mt_rand(1,10);$i++){
            $salt = sha1($this->global_salt.$salt.mt_rand().uniqid().microtime(true));
        }
        return substr($salt,0,16);
    }

    function hash($password){
        $this->salt = $this->unique_salt();
        $this->full_hash = crypt($password, $this->algo.$this->cost.$this->salt);
        $this->full_salt = substr($this->full_hash, 0, 33);
        $this->hashed_password = substr($this->full_hash, 33);
        return $this->full_hash;
    }

    /**
     * Validate the given crypto hash against the given password
     */
    function check_password($hash, $salt, $password){
        $hash = ($this->algo.$this->cost.$salt.'$'.$hash);
        if($hash == crypt($password, substr($hash, 0, 33))){
            //Regenerate new hash and salt for given password
            $this->update_keys();
            $this->status = true;
            $_SESSION['logged_in'] = true;
            $_SESSION['username'] = $this->user;
            return true;
        }else{
            $this->status = false;
            return false;
        }
    }

    function process_login(){
        if($_SERVER['REQUEST_METHOD']=='POST'){

            $this->user   = (isset($_SESSION['userParam']) && isset($_POST[$_SESSION['userParam']]))?$_POST[$_SESSION['userParam']]:null;
            $this->pass   = (isset($_SESSION['passParam']) && isset($_POST[$_SESSION['passParam']]))?$_POST[$_SESSION['passParam']]:null;
            $this->create = (isset($_SESSION['createParam']) && isset($_POST[$_SESSION['createParam']]))?$_POST[$_SESSION['createParam']]:null;

            $cont = true;
            if($this->user == null || strlen($this->user) <= 2){$this->set_error('user','Please enter a username!'); $cont=false;}
            if($this->pass == null || strlen($this->pass) <= 2){$this->set_error('pass','Please enter a password!'); $cont=false;}

            if($cont==true){
                //Alls good continue
                if($this->create != null && $this->create=='1'){
                    //Check user for new account
                    if($this->check_user()==true){$this->set_error('user','Username already taken.');return;}
                    //Create account
                    $this->create_account();
                }else{
                    $this->check_login();
                }
            }else{
                //Error with form
                $this->set_error('global','Please fill in login form!');
            }
        }
    }

    function check_user(){
        $sql = 'SELECT 1 FROM login WHERE username=:username';
        $statement = $this->db->prepare($sql);
        $statement->bindParam(':username', $this->user, PDO::PARAM_STR);
        $statement->execute();
        $result = $statement->fetch(PDO::FETCH_ASSOC);

        if(!empty($result)){return true;}else{return false;}
    }

    function check_login(){
        $sql = 'SELECT pass_hash, pass_salt FROM login WHERE username=:username';
        $statement = $this->db->prepare($sql);
        $statement->bindParam(':username', $this->user, PDO::PARAM_STR);
        $statement->execute();
        $result = $statement->fetch(PDO::FETCH_ASSOC);

        $this->check_password($result['pass_hash'], $result['pass_salt'], $this->pass);
    }

    function create_account(){
        //Create new account
        $this->hash($this->pass);
        $sql = 'INSERT into login (username, pass_hash, pass_salt) VALUES (:username, :pass_hash, :pass_salt)';
        $statement = $this->db->prepare($sql);
        $statement->bindParam(':username', $this->user, PDO::PARAM_STR);
        $statement->bindParam(':pass_hash', $this->hashed_password, PDO::PARAM_STR);
        $statement->bindParam(':pass_salt', $this->salt, PDO::PARAM_STR);
        $statement->execute();

        $this->status = true;
        $_SESSION['logged_in']=true;
    }

    function update_keys(){
        //Update account password hash & salt
        $this->hash($this->pass);
        $sql = 'UPDATE login SET pass_hash=:pass_hash, pass_salt=:pass_salt WHERE username=:username';
        $statement = $this->db->prepare($sql);
        $statement->bindParam(':username', $this->user, PDO::PARAM_STR);
        $statement->bindParam(':pass_hash', $this->hashed_password, PDO::PARAM_STR);
        $statement->bindParam(':pass_salt', $this->salt, PDO::PARAM_STR);
        $statement->execute();

        $this->status = true;
        $_SESSION['logged_in']=true;
    }

    function get_user_info(){
        $sql = "SELECT birthday,firstname,lastname,email FROM `login` WHERE username = :username";
        $sql = $this->db->prepare($sql);
        $sql->bindParam(':username', $_SESSION['username'], PDO::PARAM_STR);
        $sql->execute();
        return $sql->fetch(PDO::FETCH_ASSOC);
    }

    static function logout(){
        unset($_SESSION['logged_in']);
        session_regenerate_id(true);
        exit(header('Location: ./index.php'));
    }

    function set_error($type,$value){
        $this->error[$type]=$value;
    }

    function error($type){
        echo (isset($this->error[$type]))?$this->error[$type]:null;
    }

}//END Login class

//Logout handler
if(isset($_GET['logout'])){ Login::logout(); }

$login = new Login($db);

//Login handler
$login->process_login();

//Check login status
if(isset($_SESSION['logged_in']) && $_SESSION['logged_in']==true){
    //Logged in
    $userinfo = $login->get_user_info();
    echo '<h1>Welcome,'.$userinfo['firstname'].'</h1>';
    echo '<pre>'.print_r($userinfo,true).'</pre>';
    echo '<p><a href="?logout">Logout</a></p>';

}else{
    //Not Logged In
    //Show login form & create uniqie parrams for user/pass/create post keys
    $_SESSION['userParam']   = sha1(uniqid().microtime(true));
    $_SESSION['passParam']   = sha1(uniqid().microtime(true));
    $_SESSION['createParam'] = sha1(uniqid().microtime(true));
?>
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Simple Login</title>
</head>

<body>
<h1>Please login:</h1>

<?php $login->error('global'); ?>

    <form method="POST" action="">
      <label for="user">Username :&nbsp; </label>
      <input type="text" name="<?=$_SESSION['userParam'];?>" size="29" required/> <?php $login->error('user'); ?>
      <br />
      <label for="pass">Password :&nbsp; </label>
      <input type="text" name="<?=$_SESSION['passParam'];?>" size="29"  required/> <?php $login->error('pass'); ?>
      <br />
      <input type="submit" value="Login">&nbsp; and create my account (demo):<input type="checkbox" name="<?=$_SESSION['createParam'];?>" value="1">
    </form>
</body>
</html>
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T08:35:52.550

查看，

[简单的注册-登录-注销系统](http://forum.codecall.net/topic/36372-simple-register-login-logoff-system/)

[注册登录（用户账户系统）](http://betterphp.co.uk/playlist.html?pid=A8C368A12314F07E)

[注册用户并允许他们编辑他们的详细信息](http://www.ssbits.com/tutorials/2010/site-members-registering-users-and-allowing-them-to-edit-their-details/)

[使用 PHP、MySQL 和 jQuery 制作一个很酷的登录系统](http://tutorialzine.com/2009/10/cool-login-system-php-jquery/)

[如何在 PHP 和 MySQL 中创建安全登录脚本](http://www.wikihow.com/Create-a-Secure-Login-Script-in-PHP-and-MySQL)

[注册登录](http://www.zymic.com/forum/index.php?showtopic=4034)

[PHP 登录页面示例](http://www.9lessons.info/2009/09/php-login-page-example.html)

希望能帮到你。

# python - 如何用更简单的结构重写这个模式

> ID：14890594
> 
> 赞同：0
> 
> 时间：2013-02-15T08:19:14.437
> 
> 标签：python

我需要做很多次以下事情：

```
value1 = kwargs.get('par1')
if value1 is not None: value1 = int(value1) 
```

是否可以*直接*`.get`通过过滤器返回的值（`int`在这种情况下），*只有*在匹配的情况下？

我当然可以为此实现一个函数，但我想知道是否有更 Pythonic 的方式来实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T08:26:04.503

您可以通过扩展来实现自己的字典，`UserDict`但您需要包装`kwargs`，这有点贵（因为`kwargs`通常很小但仍然......）。

您总是可以调用`int()`并捕获异常，但这也会很慢。

你不能猴子补丁`dict`，因为它是一个内部类型。否则，您可以说新功能`dict.getInt = getAsInt`在哪里。`getAsInt`

您可以使用`int(kwargs['par1']) if par1 in kwargs else None`，但这会搜索字典两次。

我会为此使用一个新功能：

```
def asInt(v): return None if v is None else int(v)

value1 = asInt(kwargs['par1']) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T08:21:32.003

假设你的意思是`if value1 is not None`：

```
value1 = int(kwargs['par1']) if 'par1' in kwargs else None 
```

# c++ - 与 Direct3D SpriteBatch 混合

> ID：14890600
> 
> 赞同：0
> 
> 时间：2013-02-15T08:19:31.800
> 
> 标签：c++, directx, graphic, blending

我正在尝试实现一个简单的效果：在屏幕上绘制具有透明背景的图像。我正在使用 SpriteBatches 来执行此操作。

这是我创建混合状态的代码：

```
D3D11_BLEND_DESC descBlend;
ZeroMemory(&descBlend, sizeof(descBlend));
descBlend.RenderTarget[0].BlendEnable = true;
descBlend.RenderTarget[0].BlendOp = D3D11_BLEND_OP_ADD;
descBlend.RenderTarget[0].BlendOpAlpha = D3D11_BLEND_OP_ADD;
descBlend.RenderTarget[0].DestBlend = D3D11_BLEND_INV_SRC_ALPHA;
descBlend.RenderTarget[0].DestBlendAlpha = D3D11_BLEND_INV_SRC_ALPHA;
descBlend.RenderTarget[0].SrcBlend = D3D11_BLEND_SRC_ALPHA;
descBlend.RenderTarget[0].SrcBlendAlpha = D3D11_BLEND_ONE;

m_d3dDevice->CreateBlendState(&descBlend, &m_Blend); 
```

我开始绘制我的精灵：

```
m_SpriteBatch->Begin(SpriteSortMode_BackToFront, m_Blend); 
```

屏幕上什么都没有！我错过了什么吗？

我确定我的图像是正确的，因为当我在未启用混合的情况下进行绘制时，除了透明部分变为纯白色之外，所有内容都会显示出来。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:37:47.863

您必须确定渲染目标的每个像素的哪些组件在混合期间是可写的。

```
descBlend.RenderTarget[0].RenderTargetWriteMask = D3D11_COLOR_WRITE_ENABLE_ALL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:38:06.990

用你清晰的包容`ZeroMemory(&descBlend, sizeof(descBlend));`所有领域。此掩码确定是否写入通道，如果为零则不写入。尝试将其设置为.`D3D11_BLEND_DESC``RenderTargetWriteMask``D3D11_COLOR_WRITE_ENABLE_ALL`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T10:08:06.630

我曾经试图实现类似的东西，并写下了我在[gamedev所做的事情](https://gamedev.stackexchange.com/questions/29543/how-to-mix-textures-in-directx)

# asp.net - ASP.Net 应用程序的每个页面中使用的控件计数？

> ID：14890603
> 
> 赞同：0
> 
> 时间：2013-02-15T08:19:46.320
> 
> 标签：asp.net

有没有办法找出 ASP.Net 应用程序的每个页面中使用的控件的数量？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:34:42.977

你为什么需要它？首先定义控件，所有源自`System.Web.UI.Control`?

您可以编写一个递归扩展方法，它会延迟返回所有控件，那么它很简单：

```
protected void Page_PreRender(object sender, EventArgs e)
{
    var allControls = this.GetControlsRecursively().ToList();
} 
```

这是一个可能的实现：

```
public static class ControlExtensions
{
    public static IEnumerable<Control> GetControlsRecursively(this Control parent)
    {
        foreach (Control c in parent.Controls)
        {
            yield return c;

            if (c.HasControls())
            {
                foreach (Control control in c.GetControlsRecursively())
                {
                    yield return control;
                }
            }
        }
    }
} 
```

# c - 将指针传递给函数而不修改参数？

> ID：14890607
> 
> 赞同：0
> 
> 时间：2013-02-15T08:20:04.227
> 
> 标签：c, function

我有一个矩阵`M[2][2]`，想调用函数`dontModify(M)`来处理 M 的元素但不改变它们。就像是：

```
dontModify(M):
   swap off-diagonal elements;
   take determinant of M;
   return determinant; 
```

...但在此过程中没有功能更改 M 。有什么方便的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T08:22:23.580

在函数内创建矩阵的本地副本，您可以随心所欲地使用它。

* * *

```
int some_function(int matrix[2][2])
{
    int local_matrix[2][2] = {
        { matrix[0][0], matrix[0][1] },
        { matrix[1][0], matrix[1][1] },
    };

    /* Do things with `local_matrix` */
    /* Do _not_ use `matrix` */

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:28:29.363

坦率地说，不要理解你的问题。您正在使用矩阵，因此它将通过指向函数的指针传递。因此，只需创建矩阵的副本，使用它，在返回之前销毁副本。如果此调用非常频繁，您可以尝试节省一些时间并就地工作，只是不要忘记在返回之前将非对角线元素交换回来。

# ruby - 是否有一个通用的解决方案可以即时生成 msoffice、libreoffice 和 pdf 文档？

> ID：14890609
> 
> 赞同：0
> 
> 时间：2013-02-15T08:20:24.963
> 
> 标签：ruby, pdf, pdf-generation, ms-office, libreoffice

我想从*一个源文档*即时生成办公文档（msoffice、oo）和 pdf 。目前我认为 opendocument 作为模板文件和 libreoffice-headless 作为转换器。

有没有人有这方面的经验，是否有（商业？）现成的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:01:54.557

一个商业解决方案是[Docmosis](http://www.docmosis.com)，它有一个可下载的云服务解决方案，使用 MSWord/OpenOffice 文档作为模板，并提供模板填充功能、负载平衡、doc/docx/odt/pdf/rtf/html 生产和相当多的其他功能。如您所述，它的主要功能之一是生成多种格式的时间点输出（来自相同的模板和数据）。它至少有一个 Ruby 示例来显示人口特征。请注意，我为创建 Docmosis 的公司工作。

另一种选择是开源 JOD 报告。

我希望这会有所帮助。

# gwt - GWT CheckboxCell 阻碍 CellTable 中的选择

> ID：14890619
> 
> 赞同：1
> 
> 时间：2013-02-15T08:21:05.850
> 
> 标签：gwt, checkbox, cell, celltable, selectionmodel

我发现如果您有一个 GWT`CellTable`并添加一个包含 a 的列`CheckboxCell`，则通过 a 进行的选择`SingleSelectionModel`不再起作用。这种单元格类型确实会阻碍行选择。遵循在 2.5.0.rc1 中演示此行为的代码示例。

```
final CellTable<LicenseDto> licenseTable = new CellTable<LicenseDto>();
final SingleSelectionModel<LicenseDto> selectionModel = new SingleSelectionModel<LicenseDto>();
licenseTable.setSelectionModel(selectionModel);

//--- If I add this column, the selection does work.
Column<LicenseDto, String> workingColumn = new Column<LicenseDto, String>(new TextCell()) {

    @Override
    public String getValue(LicenseDto object) {
        return "Works";
    }
};
workingColumn.setFieldUpdater(new FieldUpdater<LicenseDto, String>() {

    @Override
    public void update(int index, LicenseDto object, String value) {
        ;
    }
});
licenseTable.addColumn(workingColumn);

//--- If I add this column, the selection does NOT work anymore.
Column<LicenseDto, Boolean> notWorkingColumn = new Column<LicenseDto, Boolean>(new CheckboxCell(true, true)) {

    @Override
    public Boolean getValue(LicenseDto object) {
        return object.getEnabled();
    }
};
notWorkingColumn.setFieldUpdater(new FieldUpdater<LicenseDto, Boolean>() {

    @Override
    public void update(int index, LicenseDto object, Boolean value) {
        presenter.enableLicense(object, value);
    }
});
licenseTable.addColumn(notWorkingColumn);

initWidget(licenseTable); 
```

您可以组合多个单元格并将它们添加到表格中（例如`LinkActionCell`等）。只要没有`CheckboxCell`，蓝色的选择与`SingleSelectionModel`作品一样有魅力。有没有人看到我做错了什么`CheckboxCell`或者有错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T12:05:00.720

谢谢托马斯！问题是我`handlesSelection = true`什至认为我什么都不处理。将其设置为 false 可以解决问题。顺便说一句，我`fieldUpdater`在列中添加了一个来处理复选框的勾选或取消勾选：

```
Column<LicenceDto, Boolean> enableLicenseColumn = new Column<LicenceDto, Boolean>(new CheckboxCell(false, false)) {

    @Override
    public Boolean getValue(LicenceDto object) {
        return object.getEnabled();
    }
};
enableLicenseColumn.setFieldUpdater(new FieldUpdater<LicenceDto, Boolean>() {

    @Override
    public void update(int index, LicenceDto object, Boolean value) {
        presenter.enableLicense(object, value);
    }
}); 
```

问题得到了回答。

# java - 枚举上的 java 布尔运算符

> ID：14890624
> 
> 赞同：0
> 
> 时间：2013-02-15T08:21:36.880
> 
> 标签：java, enums, boolean

在我的 C++ 代码中，我经常做这样的事情

```
enum BarType {
    BT_UNKNOWN              = 0,
    BT_NORMAL               = 1,
    BT_BAR_REST             = 2,
    BT_REPEAT_PREV_MEASURES = 3,
    BT_TYPE_MASK            = 0x03,

    ... etc
};
BarType GetBarType(int bn)  { return (BarType)(m_barType[bn] & BT_TYPE_MASK); } 
```

除了制作我讨厌的所有整数之外，有没有办法在 java 中做到这一点，因为我喜欢使用枚举获得的类型检查？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T08:25:48.043

最干净的解决方案是为每个掩码使用[java.util.EnumSet](http://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html)。然后，您可以测试给定的枚举值是否在与掩码对应的集合中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T08:25:22.340

您可以使用`values`枚举上的数组来实现类似的效果。

```
 public enum BarType { BT_UNKNOWN, BT_NORMAL, BT_BAR_REST, BT_REPEAT }
 private static final int BT_TYPE_MASK = 0x03;

 public BarType getBarType(int bn) {
      return BarType.values()[bn & BT_TYPE_MASK]; 
 } 
```

中的顺序`values`是定义枚举项的顺序。

# c# - 确保登录的用户只能访问他的数据

> ID：14890629
> 
> 赞同：1
> 
> 时间：2013-02-15T08:22:03.290
> 
> 标签：c#, asp.net-mvc

我[已经问过](https://stackoverflow.com/questions/14884833/how-to-get-route-data-value)类似的问题，但我想知道是否可以简化解决方案。您可能已经注意到，我想确保登录的用户只能访问他的数据。我在 mvc3 中使用自定义成员资格提供程序。

```
[Authorize(Users=httpContext.User.Identity.Name)]
public ActionResult UserArea()
{} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:25:41.920

创建一个新属性并覆盖该`AuthorizeCore`方法：

```
public class CustomAuthorizeAttribute : AuthorizeAttribute
{
   protected override bool AuthorizeCore(HttpContext.User user)
   {
     // Generally authenticated to the site
     if (!httpContext.User.Identity.IsAuthenticated) {
        return false;
     }

    return true;
   }
} 
```

然后在你的控制器上做：

```
[CustomAuthorize(httpContext.User]
public ActionResult MyControllerAction()
{
    return View();
} 
```

[http://code.commongroove.com/2012/04/20/asp-net-mvc-simple-custom-authorization-by-inheriting-from-the-authorizeattribute/](http://code.commongroove.com/2012/04/20/asp-net-mvc-simple-custom-authorization-by-inheriting-from-the-authorizeattribute/)

# c# - 在 Windows7 桌面上确定蓝牙设备的距离

> ID：14890632
> 
> 赞同：1
> 
> 时间：2013-02-15T08:22:13.923
> 
> 标签：c#, windows, bluetooth

我有一个用 C# 编写的蓝牙应用程序。我使用 Win32 + Microsoft 蓝牙堆栈。我还使用 In the Hand 蓝牙库[（链接）](http://32feet.codeplex.com/)

现在我想测量`nearness`连接到我的 PC 的设备。接近度是指设备与我的电脑之间的距离（距离）或设备与我的电脑之间的蓝牙连接有多强......只要我能够做一些事情，这两种方法中的任何一种都是可以接受的有意义的分类..

所以问题是

a) 我找不到任何 API 可以告诉我我的蓝牙设备离电脑有多远。

b) 我开始了解 RSSI 并找到了所有相关信息。不幸的是 WIN32+Microsoft Windows 堆栈上的 RSSI api 不受支持。类似的问题[在 Windows 7/Vista/XP 上阅读蓝牙 RSSI](https://stackoverflow.com/questions/4790081/read-bluetooth-rssi-on-windows-7-vista-xp)

所以我问是否有任何方法可以对附近的蓝牙设备进行分类？我不介意使用任何第三方库来这样做。

# error-handling - 代码中的逻辑错误

> ID：14890639
> 
> 赞同：0
> 
> 时间：2013-02-15T08:22:42.597
> 
> 标签：error-handling

我应该填写的代码很容易。

```
#define MAX_NAME_LEN 128
typedef struct {
 char name[MAX_NAME_LEN];
 unsigned long sid;
} Student;
/* return the name of student s */
const char* getName(const Student* s) {
 return s->name;
}
/* set the name of student s */
void setName(Student* s, const char* name) {
 /* fill me in */
}/* return the SID of student s */
unsigned long getStudentID(const Student* s) {
 /* fill me in */
}
/* set the SID of student s */
void setStudentID(Student* s, unsigned long sid) {
 /* fill me in */
} 
```

但是它说以下函数中的逻辑错误是什么？

```
Student* makeDefault(void) {
 Student s;
 setName(&s, "John");
 setStudentID(&s, 12345678);
 return &s;
} 
```

我没有看到任何问题。我测试了它。它工作正常。

是不是因为这应该是一个 void 函数并且不需要返回任何东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:28:29.320

您不能返回指向本地声明变量（Student s）的指针。返回后变量“s”会消失（变成垃圾）。

相反，您需要先分配一个学生。

你可能应该这样做：

```
void makeDefault(Student* pS) {
 setName( pS, "John");
 setStudentID( pS, 12345678);
} 
```

然后让调用应用程序分配学生。

# objective-c - NSImage colorWithPatternImage：如何从顶部平铺图像？

> ID：14890643
> 
> 赞同：3
> 
> 时间：2013-02-15T08:23:11.870
> 
> 标签：objective-c, cocoa

NSImage`colorWithPatternImage`方法从底部平铺图像。我可以从顶部平铺它们吗？

> ```
> + (NSColor *)colorWithPatternImage:(NSImage *)image Parameters image 
> ```
> 
> 用作颜色对象图案的图像。图像从窗口底部开始平铺。图像未缩放。

这是我在 IKImageBrowserView 子类中的代码，它是我应用程序中 NSScrollView 内的视图。

```
- (void)drawRect:(NSRect)rect
{
    NSImage * backgroundImage = [NSImage imageNamed:@"deliciousLibrary.png"];
    [backgroundImage setSize:NSMakeSize(459 * bgImageSize, 91 * bgImageSize)];
    [[NSColor colorWithPatternImage:backgroundImage] set];
    NSRectFill(rect);
    [super drawRect:rect];
} 
```

谢谢

**更新**：我在互联网上找到了这个解决方案。但就我而言，它不起作用，因为图像不再在我的 NSScrollView 中滚动。

```
- (void)drawRect:(NSRect)dirtyRect {
    NSGraphicsContext* theContext = [NSGraphicsContext currentContext];
    [theContext saveGraphicsState];
    [[NSGraphicsContext currentContext] setPatternPhase:NSMakePoint(0,[self frame].size.height)];
    [self.customBackgroundColour set];
    NSRectFill([self bounds]);
    [theContext restoreGraphicsState]; 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T11:00:54.930

这是我的问题的解决方案。简单得惊人。

```
float yOffset = NSMaxY([self convertRect:[self frame] toView:nil]);
[[NSGraphicsContext currentContext] setPatternPhase:NSMakePoint(0,yOffset)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-28T01:53:55.917

这是 Swift 5 中公认的答案：

```
let yOffset = NSMaxY(self.convert(self.frame, to: nil))
NSGraphicsContext.current?.patternPhase = NSMakePoint(0, yOffset) 
```

...和一个简单的示例实现：

```
class MyPatternedView: NSView {

    override func draw(_ dirtyRect: NSRect) {
        // Make the pattern tile repeat from the top of the view.
        let yOffset = NSMaxY(self.convert(self.frame, to: nil))
        NSGraphicsContext.current?.patternPhase = NSMakePoint(0, yOffset)

        if let image = NSImage(named: "Bricks") {
            let color = NSColor.init(patternImage: image)
            color.setFill()
            dirtyRect.fill()
        }

        super.draw(dirtyRect)
    }

} 
```

# java - 避免数据表中的重复值

> ID：14890645
> 
> 赞同：1
> 
> 时间：2013-02-15T08:23:15.270
> 
> 标签：java, jsf-2, richfaces

我有 Datatable1 中的产品信息列表和 Datatable2 中已选择的产品信息列表（用户已从 Datatable1 中选择并添加到 dattable2）现在我想执行一项检查，即用户是否从 Datatable1 中选择添加 & 如果相同数据已存在于列表中，则不应添加到我的朋友建议使用的数据表 2 列表中

```
 HashMap<String ,List<Model>> 
```

是实现功能的更好方法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:05:15.417

如果您想为每个操作添加*一个* `Product`，Rai 是正确的，例如在视图中（由迭代组件包围）

```
<h:commandButton value="Add to selected" actionListener="#{bean.addProductToList2}>
    <f:setPropertyActionListener value="#{product}" target="#{bean.selectedProduct}/>
    <f:ajax render="table2/>
</h:commandButton> 
```

和

```
private Product selectedProduct;

public void addProductToList2(ActionEvent event) {
    if(!list2.contains(selectedProduct)){
        list2.add(selectedProduct);
    }
} 
```

此外，他对两个列表的选择是正确的。

如果您想添加一次添加所有选定产品的可能性，您可以使用复选框

```
<h:selectBooleanCheckbox valueChangeListener="#{bean.toggleProductInList2}">
    <f:setPropertyActionListener value="#{product}" target="#{bean.selectedProduct}/>
</h:selectBooleanCheckbox> 
```

和

```
private Product selectedProduct;

public void toggleProductInList2(ValueChangeEvent event) {
    Boolean isChecked = (Boolean) event.getNewValue();
    if(isChecked){
        list2.add(selectedProduct);
    } else {
        list2.remove(selectedProduct);
    }
} 
```

这样，将准备一个列表，并可以在单击按钮时显示：

```
<h:commandButton value="Show selected">
    <f:ajax render="table-container"/>
</h:commandButton>

<h:panelGroup id="table-container">
    <ui:repeat...>
    </ui:repeat>
</h:panelGroup> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T08:45:47.790

如果您可以使用`java.util.Set`implementations 而不是`List`，则可以构建一个无重复列表，`Model`如下所示：

```
Set<Model> dataTable1 = ...
Set<Model> dataTable2 = ...
dataTable2.addAll(dataTable1); 
```

`dataTable2`然后将包含在`dataTable1`or中的所有内容`dataTable2`，但没有重复项（设置联合操作）。

一定要实现一个合适的`equals`和`hashCode`上的`Model`类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T08:30:56.567

不要认为你需要 HashMap ；`List or Set`将完成这项工作。

```
 List<Product> list1 = new ArrayList<Product>(); //from DataTable1
 List<Product> list2 = new ArrayList<Product>(); //from Datatable2

  Product p; //product which needs to be added to list2

      if(!list2.contains(p)){
          list2.add(p);
       } 
       //write list2 to db 
```

因此，仅当它不存在时才放置产品。

# java - 服务器中的一个循环，它读取所有客户端套接字

> ID：14890647
> 
> 赞同：0
> 
> 时间：2013-02-15T08:23:20.043
> 
> 标签：java, multithreading, sockets, connection

假设我有一个 ServerReader 类，它是一个一直运行的线程。ServerReader 有一个循环，它以如下方式读取来自所有客户端的所有消息：

```
while(true) {
    for(Socket socket: sockets_arraylist) {
        ObjectInputStream object_stream = new ObjectInputStream(socket.getInputStream());
        String str = (String) object_stream.readObject();
        System.out.println("message from client: " + str);
        object_stream.close();
    }
} 
```

据我了解，当循环遇到 readObject() 方法时，线程将进入休眠状态，直到客户端实际发送对象。所以想象一下这个场景：ArrayList "sockets_arraylist" 包含 2 个套接字。列表中的第二个套接字，属于等待接收消息的 2 号客户端。客户端 2 发送此消息并等待服务器读取它。但是有一个问题：上面的循环停留在等待来自客户端 1 的消息的 readObject() 方法上。所以直到客户端 1 不会向服务器发送他的消息，客户端 2 的消息才会被读取。

我需要在服务器上为每个客户端创建一个单独的线程吗？还是有另一种解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T08:27:53.833

有两种解决方案：

1）为每个客户端使用单独的线程。

2）使用异步IO [`java.nio`](https://blogs.oracle.com/slc/entry/javanio_vs_javaio)- 在这种情况下你可能想要[`SocketChannel`](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/SocketChannel.html)。

为每个客户端使用单独的线程*可能*在概念上更简单，尽管这确实意味着您需要更仔细地考虑竞争条件。使用 NIO*可能*更具可扩展性（不同的基准测试显示不同的结果，它也可能取决于您的操作系统，就线程和调度的成本而言。）

# oop - PHP Memcached 扩展 OOP 实例化

> ID：14890650
> 
> 赞同：0
> 
> 时间：2013-02-15T08:23:41.770
> 
> 标签：oop, memcached

背景：

我已经在我的实时服务器上安装了 PHP Memcached 扩展。尽管付出了很多努力，但我似乎无法在我的 XAMPP 开发框中安装 Memcached，因此我依靠以下代码仅在 Live 服务器上实例化 Memcached：

我的**连接**文件包含在每个页面中：

```
// MySQL connection here

// Memcached
if($_SERVER['HTTP_HOST'] != 'test.mytestserver') {
    $memcache = new Memcached();
    $memcache->addServer('localhost', 11211);
} 
```

目前我正在实例化每种方法，我不禁想到有更好的方法来实现我的目标并想知道是否有人有任何想法？

我的**班级**文件：

```
class instrument_info {

    // Mysqli connection
    function __construct($link) {
        $this->link = $link;    
    }

function execute_query($query, $server) {

    $memcache = new Memcached();
    $memcache->addServer('localhost', 11211);

    $result = mysqli_query($this->link, $query) or die(mysqli_error($link));
    $row = mysqli_fetch_array($result);

    if($server == 'live') 
    $memcache->set($key, $row, 86400);

 } // Close function

function check_something() {

    $memcache = new Memcached();
    $memcache->addServer('localhost', 11211);

    $query = "SELECT something from somewhere";

    if($_SERVER['HTTP_HOST'] != 'test.mytestserver') { // Live server

        $key = md5($query);
        $get_result = $memcache->get($key);

        if($get_result) {    
            $row = $memcache->get($key);    
        } else { 
            $this->execute_query($query, 'live');           
        }

    } else { // Test Server
        $this->execute_query($query, 'prod');
    }

} // Close function

} // Close Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:32:28.477

我建议您阅读基于接口的编程和依赖注入。下面是一些示例代码，可能会让您了解应该如何去做。

```
interface CacheInterface {
  function set($name, $val, $ttl);
  function get($name);
}

class MemCacheImpl implements CacheInterface {
  /* todo: implement interface */
}

class OtherCacheImpl implements CacheInterface {
 /* todo: implement interface */
}

class InstrumentInfo {
  private $cache;
  private $link;

  function __construct($link, $cache) {
    $this->link = $link;
    $this->cache = $cache;
  }

  function someFunc() {
    $content = $this->cache->get('some-id');
    if( !$content )  {
      // collect content somehow
      $this->cache->set('some-id', $content, 3600);
    }
    return $content
  }
}

define('IS_PRODUCTION_ENV', $_SERVER['HTTP_HOST'] == 'www.my-real-website.com');

if( IS_PRODUCTION_ENV ) {
  $cache = new MemCacheImpl();
} else {
  $cache = new OtherCacheImpl();
}

$instrumentInfo = new InstrumentInfo($link, $cache); 
```

顺便提一句。当涉及到 mysqli_query 时，您实际上有同样的问题，您使您的代码依赖于 Mysql 数据库和 mysqli 扩展。所有对 mysqli_query 的调用也应该移到它自己的类中，代表数据库层。

# grails - 如何在域对象创建时设置版本属性？

> ID：14890651
> 
> 赞同：0
> 
> 时间：2013-02-15T08:23:49.877
> 
> 标签：grails, grails-orm

我正在尝试为父/子关系建模。

我有以下域类：

```
package test
class Person {
Person mother
Person father
String name
static hasOne = [father: Person, mother: Person]
    static constraints = {
        name()
        father(nullable:true)
        mother(nullable:true)
    }   
    def Set<Person> children(){
        return Person.findAllByMother(this)
    }
} 
```

我已经执行了全部生成

但是，如果我尝试创建一个新的 Person，我会收到以下错误：

```
Message: Parameter "#2" is not set; SQL statement:
insert into person (id, version, father_id, mother_id, name) values (null, ?, ?, ?, ?) [90012-164]
    Line | Method
->>  329 | getJdbcSQLException   in org.h2.message.DbException 
```

应该在哪里生成版本参数？我认为这应该在保存调用期间自动生成。

更新：这个问题似乎与父/母关系有关，因为删除它并重新生成视图意味着元素可以保留。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:17:07.643

这个问题似乎与我试图在课堂上创建双向关系的事实有关。这实际上不是必需的。存在单向关系 Person -> 父亲和 Person -> 母亲。倒数是在孩子下计算的（我将扩展到包括父亲。）

我的最后一堂课是：

```
package test
class Person {
    int id
    Person mother
    Person father
    String name
    static constraints = {
        name()
        father(nullable:true)
        mother(nullable:true)
    }

    def Set<Person> children(){
         return Person.findAllByMother(this)
    }
} 
```

我还是 Grails 的新手。

# node.js - XML解析的最佳节点模块

> ID：14890655
> 
> 赞同：293
> 
> 时间：2013-02-15T08:24:22.150
> 
> 标签：node.js, xml-parsing

就 XML 解析而言，哪个是我可以用于 XML 解析的最佳节点模块？

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2013-02-15T08:31:42.600

你可以试试[xml2js](https://github.com/Leonidas-from-XIV/node-xml2js)。它是一个简单的 XML 到 JavaScript 对象转换器。它将您的 XML 转换为 JS 对象，以便您可以轻松访问其内容。

以下是一些其他选项：

1.  [libxmljs](https://github.com/polotek/libxmljs)
2.  [xml 流](https://github.com/assistunion/xml-stream)
3.  [xmldoc](https://github.com/nfarina/xmldoc)
4.  [Cheerio](https://github.com/cheeriojs/cheerio) – 为 XML（和 HTML）实现核心 jQuery 的一个子集

我用过`xml2js`，对我来说效果很好。其余的你可能需要自己尝试。

* * *

## 回答 #2

> 赞同：150
> 
> 时间：2014-01-06T09:31:17.003

这个答案涉及 Windows 的开发人员。您想选择一个不依赖于[node-expat](https://github.com/node-xmpp/node-expat)的 XML 解析模块。Node-expat 需要 node-gyp 并且[node-gyp 需要](https://github.com/TooTallNate/node-gyp#installation)你在你的机器上安装 Visual Studio。如果你的机器是 Windows Server，你肯定不想在上面安装 Visual Studio。

那么，选择哪个 XML 解析模块？

为自己省去很多麻烦并使用[xml2js](https://github.com/Leonidas-from-XIV/node-xml2js)或[xmldoc](https://github.com/nfarina/xmldoc)。它们依赖于[sax.js](https://github.com/isaacs/sax-js)，这是一个不需要 node-gyp 的纯 Javascript 解决方案。

libxmljs和[xml-stream](https://github.com/assistunion/xml-stream)都需要 node- [gyp 。](https://github.com/polotek/libxmljs)不要选择这些，除非你的机器上已经安装了 Visual Studio，或者你不介意走这条路。

*2015-10-24 更新：似乎有人找到了在 Windows 上使用 node-gyp 而无需安装 VS 的解决方案：[https ://github.com/nodejs/node-gyp/issues/629#issuecomment-138276692](https://github.com/nodejs/node-gyp/issues/629#issuecomment-138276692)*

# firefox - 在某些情况下，使用 Firefox >16 在 Highslide 中显示 JWPlayer 失败

> ID：14890656
> 
> 赞同：1
> 
> 时间：2013-02-15T08:24:50.623
> 
> 标签：firefox, jwplayer, highslide

似乎与 morphious 在[http://highslide.com/forum/viewtopic.php?f=1&t=24022&p=91079&hilit=jwplayer+firefox+17#p91079中描述的问题相同](http://highslide.com/forum/viewtopic.php?f=1&t=24022&p=91079&hilit=jwplayer+firefox+17#p91079)

请看[http://www.lv-koerperbehinderte-bw.de/n/c8-0.php](http://www.lv-koerperbehinderte-bw.de/n/c8-0.php)

此页面适用于 IE，并且适用于 Firefox <17。在 Firefox 17 和 18 中，当页面没有被滚动时，一切正常！

滚动时，Highslide 会弹出，正在播放音频，虽然不可见，但 JWPlayer 控件可以工作 - 如果您知道点击的位置...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:18:11.717

解决方案设置`objectLoadTime`为`'after'`.
您可以查看此演示中使用的代码：[http](http://roadrash.no/hs-support/jwplayer/jwplayer-in-highslide-iframe.html) ://roadrash.no/hs-support/jwplayer/jwplayer-in-highslide-iframe.html （请参阅“<em>JW 播放器常规尺寸”链接的源代码)

您的点击次数应如下所示：

```
onclick="return hs.htmlExpand(this, { objectType: 'iframe', width: 550, height: 152, objectLoadTime: 'after' } )" 
```

# c# - 更改具有相同名称的 XML 节点？

> ID：14890670
> 
> 赞同：0
> 
> 时间：2013-02-15T08:26:05.797
> 
> 标签：c#, xml, c#-4.0

每个人！我有一个 XML 文件，需要更改节点的值，特别是指示的行。我遇到的问题是，如您所见，有很多节点。

我怎样才能改变这条线？这个 XML 文件可能要大得多，所以我正在寻找一种将不同数量的“launch.file”节点考虑在内的解决方案。

需要设置为 True 的节点将由相应的 NAME 标记标识。因此，如果我输入 ULTII，该块的 DISABLED 节点将设置为 True。如果我输入 Catl，则该块的 DISABLED 节点将被更改。

```
<?xml version="1.0" encoding="windows-1252"?>
<SBase.Doc Type="Launch" version="1,0">
  <Descr>Launch</Descr>
  <Filename>run.xml</Filename>
  <Disabled>False</Disabled>
  <Launch.ManualLoad>False</Launch.ManualLoad>
  <Launch.File>
    <Name>Catl</Name>
    <Disabled>False</Disabled>
    <ManualLoad>False</ManualLoad>
    <Path>ft\catl\catl.exe</Path>
  </Launch.File>
  <Launch.File>
    <Disabled>False</Disabled>          <!-- change to True -->
    <ManualLoad>False</ManualLoad>
    <Name>ULTII</Name>
    <Path>F:\ULTII.exe</Path>
    <NewConsole>True</NewConsole>
  </Launch.File>
  <Launch.File>
    <Name>ECA</Name>
    <Disabled>False</Disabled>
    <Path>C:\ECA.exe</Path>
  </Launch.File>
</SBase.Doc> 
```

我正在使用 Visual Studio 2012，您是否需要知道。

感谢任何可以帮助我解决这个问题的人，我真的很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:49:23.963

这可以通过使用[LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)来实现（请参阅[XDocument 类](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)）。假设存在具有 value 元素的**单个** `Launch.File`元素：`Name``"ULTII"`

```
var document = XDocument.Load(...);

var ultiiElement = document
    .Descendants("Launch.File")
    .Single(fileElement => fileElement.Element("Name").Value == "ULTII");
ultiiElement.Element("Disabled").Value = "True"; // or true.ToString()

document.Save(...); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T08:53:28.157

这是我做你想做的事的方法

```
private void DisableLaunchFile(string xmlfile, string launchFileName){
  XDocument doc = XDocument.Load(xmlfile);

  var launchFileElement = doc.Descendants("Launch.File").Where (d => d.Element("Name").Value == lauchFileName);

  launchFileElement.Elements("Disabled").First().Value = true.ToString();

  doc.Save(xmlfile);
} 
```

像这样使用它：

```
string pathToXmlFile = //assign ;

DisableLaunchFile(pathToXmlFile, "Catl");

DisableLaunchFile(pathToXmlFile, "ULTII"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:54:11.253

这种方法可以解决问题：

```
public void ChangeNode(string name, string filePath)
{

    XDocument xDocument;
    using (var streamReader = new StreamReader(filePath))
    {
        xDocument = XDocument.Parse(streamReader.ReadToEnd());
    }

    var nodes = xDocument.Descendants("Launch.File");

    foreach (var node in nodes)
    {
        var nameNode = node.Descendants("Name").FirstOrDefault();

        if (nameNode != null && nameNode.Value == name)
        {
            var disabledNode = node.Descendants("Disabled").FirstOrDefault();

            if (disabledNode != null)
            {
                disabledNode.SetValue("True");
            }
        }
    }

    using (var streamWriter = new StreamWriter(filePath))
    {
        xDocument.Save(streamWriter);               
    }
} 
```

您要传入的名称是您要更改的节点的名称，路径是xml文件的文件路径。所以你可以这样称呼它：

```
ChangeNode("ULTII", "C:\\output.xml"); 
```

您可能需要整理一下，就像匹配节点名称不变量大小写或文化，但它应该让你开始。

# css - 使用css更改图像的颜色？

> ID：14890674
> 
> 赞同：0
> 
> 时间：2013-02-15T08:26:24.633
> 
> 标签：css, image, html

是否可以仅使用 CSS 更改图像的颜色？

（我使用的是透明的背景字形图标，我的主题需要不同的符号 [非背景] 颜色）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:42:46.477

您可以使用图像色调，但我不知道它是否会给您带来您期望的效果：

基本上，您将一个`<figure>`元素包裹在您的周围`<img/>`并对其应用样式：

```
/*HTML*/
<figure class="tint">  
  <img src="icon.png" width="400" height="260">  
</figure> 

/*CSS*/
.tint {  
    position: relative;  
    float: left;  
    cursor: pointer;  
}  

.tint:before {  
    content: "";  
    display: block;  
    position: absolute;  
    top: 0;  
    bottom: 0;  
    left: 0;  
    right: 0;  
    background: rgba(0,255,255, 0.5);  
    -moz-transition: background .3s linear;  
    -webkit-transition: background .3s linear;  
    -ms-transition: background .3s linear;  
    -o-transition: background .3s linear;  
    transition: background .3s linear;  
}  

.tint:hover:before {  
    background: none;  
} 
```

检查[链接](http://jsbin.com/igahay/1/edit)以获取演示和完整的代码示例。

在这个[网站上](http://www.impressivewebs.com/image-tint-blend-css/)，您还可以查看一些不同的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:36:40.870

不可以。因为这些是图像图标，您不能更改它们的颜色。您可以尝试使用这些[http://www.entypo.com/](http://www.entypo.com/)。由于这些是字体，它们可以轻松更改颜色。

# python - 类型错误？配对清单？

> ID：14890676
> 
> 赞同：0
> 
> 时间：2013-02-15T08:26:43.863
> 
> 标签：python

无法计算距离？(TypeError: unsupported operand type(s) for /: 'int' and 'str') 建议让 python 识别哪个名称与哪个数字对应？这样我就可以让它打印正确的名字和获胜时间？（字符串？）

```
def main():
    print "~*~*~*~*~*~ Timbuktu Archery Contest ~*~*~*~*~*~"
    archerList = [] #list
    timeList = [] #list2
    distanceList = [] #list3
    name = raw_input ("Enter contestants first name: ")
    s = str(name)
    archerList.append(name)
    while name:
        time = raw_input ("Enter time (in milliseconds) for %s: " % s)
        timeList.append(time)
        name = raw_input ("Enter contestants first name: ")
        s = str(name)
        archerList.append(name)
    else:
        print "Slowest archer was " , min(timeList)
        print "Fastest archer was " , max(timeList)
    for time in timeList:
        distance = ((230/time)*681.1)
        distanceList.append(distance) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:29:25.587

首先不要`time`用作变量，它是一个python模块

其次

`time = raw_input ("Enter time (in milliseconds) for %s: " % s)`这`time`是一个字符串

您应该将其转换为`int`喜欢`timeList.append(int(time))`，然后将其用于

`distance = ((230/time)*681.1)`

如果你不转换`min/max`也不会给出想要的输出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T08:31:05.787

```
time = raw_input ("Enter time (in milliseconds) for %s: " % s) 
```

应该：

```
time = int( raw_input ("Enter time (in milliseconds) for %s: " % s) ) 
```

甚至更好：

```
repeat = True
while repeat:
    try:
        time = int(raw_input ("Enter time (in milliseconds) for %s: " % s))
        repeat = False
    except ValueError:
        print "Invalid time." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:33:38.623

正如其他人已经给了你“重点”的答案，这里有一些额外的信息。

在计算之前，您必须先将时间转换为`int`或更确切地说。`float`Python 是强类型语言。没有变量类型声明，但是，每个变量都有一个类型。

您还应该写`distance = ((230./time)*681.1)`（注意 230 后面的“.”），以便将浮点数除以某个数字。浮点除法不同于整数除法。

# javascript - jquery ui datepicker 转到今天按钮

> ID：14890680
> 
> 赞同：4
> 
> 时间：2013-02-15T08:27:05.530
> 
> 标签：javascript, jquery, jquery-ui, calendar, datepicker

**单击[今天]**按钮时，我需要我的日历转到当前日期，以便用户在浏览我的日历时可以转到当前日期。

例如，当前月份是*2013 年 2 月* ，用户正在浏览日历的*dec 2015*页面，当他单击**[today]**按钮时，它将自动返回日历的当前日期页面，即 *2013 年 2 月*。

我在用

> jquery-ui-datepicker.min.js

作为我日历的插件

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-11T19:17:45.117

jQuery UI Datepicker 为此内置了功能。

看到这个：http: [//jqueryui.com/datepicker/#buttonbar](http://jqueryui.com/datepicker/#buttonbar)

```
$(function() {
    $( "#datepicker" ).datepicker({
        showButtonPanel: true
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:32:11.803

你可以这样做：

```
function TodaysDate() {
 var currentTime = new Date()
 var month = currentTime.getMonth() + 1
 var day = currentTime.getDate()
 var year = currentTime.getFullYear()

 return month + "/" + day + "/" + year;
}

$("#btnToday").click(function() {
  var today = new Date();
  $(target).datepicker('setDate', TodaysDate()); 
} 
```

`target`您的日期选择器控件 ID在哪里。

# javascript - 将哑引号转换为智能引号 Javascript 问题

> ID：14890681
> 
> 赞同：0
> 
> 时间：2013-02-15T08:27:07.653
> 
> 标签：javascript, html, replace, quotes

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T08:33:28.467

试试这个：

```
var a = '"dumb quotes" instead -- of "dumb quotes", fixed it\'s';

 a = a.replace(/'\b/g, "\u2018")     // Opening singles
      .replace(/\b'/g, "\u2019")     // Closing singles
      .replace(/"\b/g, "\u201c")     // Opening doubles
      .replace(/\b"/g, "\u201d")     // Closing doubles
      .replace(/--/g,  "\u2014")     // em-dashes
      .replace(/\b\u2018\b/g,  "'"); // And things like "it's" back to normal.
// Note the missing `;` in these lines. I'm chaining the `.replace()` functions. 
```

输出：

```
'“dumb quotes” instead — of “dumb quotes”, fixed it's' 
```

基本上，您正在寻找[边界一词](http://www.regular-expressions.info/wordboundaries.html)：`\b`

**[这是一个更新的小提琴](http://jsfiddle.net/7rcF2/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-14T20:30:45.270

如果您希望一切都在客户端完成，您可以使用[smartquotes.js](https://github.com/kellym/smartquotes.js)库将页面上的所有哑引号转换为智能引号。或者，您可以使用[库本身的正则表达式](https://github.com/kellym/smartquotes.js/blob/master/lib/replacements.js)。

这是旧版本代码的实现：

```
function smartquotesString(str) {
  return str
  .replace(/'''/g, '\u2034')                                                   // triple prime
  .replace(/(\W|^)"(\S)/g, '$1\u201c$2')                                       // beginning "
  .replace(/(\u201c[^"]*)"([^"]*$|[^\u201c"]*\u201c)/g, '$1\u201d$2')          // ending "
  .replace(/([^0-9])"/g,'$1\u201d')                                            // remaining " at end of word
  .replace(/''/g, '\u2033')                                                    // double prime
  .replace(/(\W|^)'(\S)/g, '$1\u2018$2')                                       // beginning '
  .replace(/([a-z])'([a-z])/ig, '$1\u2019$2')                                  // conjunction's possession
  .replace(/((\u2018[^']*)|[a-z])'([^0-9]|$)/ig, '$1\u2019$3')                 // ending '
  .replace(/(\u2018)([0-9]{2}[^\u2019]*)(\u2018([^0-9]|$)|$|\u2019[a-z])/ig, '\u2019$2$3')     // abbrev. years like '93
  .replace(/(\B|^)\u2018(?=([^\u2019]*\u2019\b)*([^\u2019\u2018]*\W[\u2019\u2018]\b|[^\u2019\u2018]*$))/ig, '$1\u2019') // backwards apostrophe
  .replace(/'/g, '\u2032');
}; 
```

# wordpress - Wp addthis 自定义分享 url

> ID：14890685
> 
> 赞同：0
> 
> 时间：2013-02-15T08:27:12.670
> 
> 标签：wordpress, addthis

需要共享一个包含图像#ID 的自定义 url，以便 url 在 addthis 中如下所示：

[http://www.mywebsite.com/mygallery/#image-1](http://www.mywebsite.com/mygallery/#image-1)

查看以下图库并单击图像： http: [//www.starbasket.fr/photos-des-camps/camps-2011/la-baule-3/](http://www.starbasket.fr/photos-des-camps/camps-2011/la-baule-3/)

锄头你在分享链接中包含#image-1 吗？哪个 WP 代码回显了图像 ID？

我尝试了以下代码片段，但它不起作用：

```
<?php echo $post_thumbnail_id = get_post_thumbnail_id( $post_id ); ?>
<?php echo get_post_thumbnail_id() ?>
<?php echo wp_get_attachment_metadata( $attachment_id, $unfiltered ); ?> 
```

问候， 查尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:00:35.023

您必须编辑画廊的文件。往里看`/wp-content/plugins/nextgen-gallery/view/` 你会发现几个文件，你要编辑的一个是“ `gallery.php`”。

替换通常显示替代文本 ( `$image->alttext`) 的标题。当画廊将`title`每个缩略图的“”放大显示时，您可以将您的 html 代码放在这里（您还必须对其进行编码）：

试试我的（你想要的那个）：

```
<?php foreach ( $images as $image ) : ?>

<div id="ngg-image-<?php echo $image->pid ?>" class="ngg-gallery-thumbnail-box" <?php echo $image->style ?> >
    <div class="ngg-gallery-thumbnail" >
    <?php $url = "http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']."%23".$image->pid;
        $url2 = $image->imageURL;
        $url3 = "http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']."#".$image->pid; ?>
        <a href="<?php echo $image->imageURL ?>" id="<?php echo $image->pid ?>" title="<?php //echo $image->alttext ?><?php
        echo '&lt;div class=&quot;nggfb&quot; style=&quot;float:left;width:80px&quot; class=&quot;share-custom&quot; &gt;&lt;a class=&quot;share-custom sd-button&quot;  href=&quot;javascript:postToFeed(\''.$url3.'\',\''.$url2.'\');&quot; style=&quot;float:left&quot;&gt;&lt;span style=&quot;background-image:url(&amp;quot;http://www.starbasket.fr/wp-content/plugins/jetpack/modules/sharedaddy/images/facebook.png&amp;quot;);&quot;&gt;Partager&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;
    &lt;div class=&quot;tweets&quot; style=&quot;width:100px;float:left&quot;&gt;
    &lt;iframe allowtransparency=&quot;true&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; src=&quot;http://platform.twitter.com/widgets/tweet_button.html?url='.$url.'&amp;counturl='.$url.'&amp;hashtags=StarBasket&amp;related=campstarbasket&amp;via=campstarbasket&amp;text=Une photo ! '.$url2.'&quot; style=&quot;width:130px; height:20px;&quot;&gt;Tweet&lt;/iframe&gt;
    &lt;/div&gt;
    &lt;div style=&quot;float:left;width:80px;&quot;&gt;
    &lt;iframe src=&quot;/wp-content/googleplus.php?url='.$url.'&quot; marginheight=&quot;0&quot; marginwidth=&quot;0&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; style=&quot;border:0;width:100px;height:20px;&quot;&gt;&lt;/iframe&gt;
    &lt;meta itemprop=&quot;image&quot; content=&quot;'.$url2.'&quot;&gt;
    &lt;/div&gt;
    &lt;a class=&quot;small-button smallblack &quot; style=&quot;height: 18px;padding-top: 0;&quot; onClick=&quot; return copy(\''.$url3.'\')&quot; href=&quot;'.$url3.'&quot;&gt;Copier&lt;/a&gt;' ?>" <?php echo $image->thumbcode ?> >
            <?php if ( !$image->hidden ) { ?>
            <img title="<?php echo $image->alttext ?>" alt="<?php echo $image->alttext ?>" src="<?php echo $image->thumbnailURL ?>" <?php echo $image->size ?> />
            <?php } ?>
        </a>
    </div>
</div>

<?php if ( $image->hidden ) continue; ?>
<?php if ( $gallery->columns > 0 && ++$i % $gallery->columns == 0 ) { ?>
    <br style="clear: both" />
<?php } ?>

<?php endforeach; ?> 
```

由于 facebook 和复制/粘贴功能（“#”或者是 html 代码“%23”），我创建了不同的 url，我还获取了文件 url，以便在不访问网页的情况下显示在一些 twitter 客户端上。而对于 Facebook，你可以使用分享功能，因为它需要你整个页面的 meta og:url（没有“#imageID”），所以我选择了对话功能来这样做。Google+ 采用了好的，但不是缩略图。

# batch-file - 将日期添加到复制的文件

> ID：14890697
> 
> 赞同：0
> 
> 时间：2013-02-15T08:28:00.710
> 
> 标签：batch-file, batch-processing, batch-rename

我正在尝试将日期添加到从一个目录复制到另一个目录的文件中。这就是它的样子

原始文件名：XEsalary.csv

结果文件名：XEsalary-2013-02-15.csv

这是我的代码：

```
set REMOTE=U:\ 
set LOG=C:\Integration\FE\log_test 
set PVM=%DATE:~9,4%-%DATE:~6,2%-%DATE:~3,2%
set YY=%DATE:~9,4% 
set LOCAL=C:\FTP\VC\test
cd %LOCAL%

xcopy /y /f /v "%LOCAL%\*.csv" "%REMOTE%\" >>%LOG%\%PVM%.log 
xcopy /y /f /v "%LOCAL%\*.csv" "%LOCAL%\archive\*.csv"  
:: assist with turning this into a for loop
ren %LOCAL%\archive\*.csv %LOCAL%\archive\*%PVM%.csv 
echo. >>%LOG%\%PVM%.log 
```

复制作品只是文件。重命名部分不起作用。请问有什么帮助吗？

提前谢谢:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:08:50.293

Windows 不允许您使用通配符重命名。您必须在 for 循环中命名每个文件。还不如在复制时进行重命名。这是否符合您的预期？

```
@echo off
setlocal
set REMOTE=U:\ 
set LOG=C:\Integration\FE\log_test 
set PVM=%DATE:~9,4%-%DATE:~6,2%-%DATE:~3,2%
set YY=%DATE:~9,4% 
set LOCAL=C:\FTP\VC\test

xcopy /y /f /v "%LOCAL%\*.csv" "%REMOTE%\" >>%LOG%\%PVM%.log

pushd "%LOCAL%"
for %%I in (*.csv) do (
    rem Uncomment the following line to log the copy to archive.
    rem echo copy "%%I" -^> "%LOCAL%\archive\%%~nI-%PVM%.csv" >>%LOG%\%PVM%.log
    copy "%%I" "%LOCAL%\archive\%%~nI-%PVM%.csv">NUL
)
echo. >>%LOG%\%PVM%.log
popd 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T14:49:50.197

在 RENAME 中使用通配符很棘手。没有好的官方文档，但我已经试验并发布了关于它如何工作[的规则：请参阅 Windows RENAME 命令如何解释通配符？](https://superuser.com/q/475874/109090)

您可以使用以下命令完成重命名，只要您的文件名都不包含点（最后一个扩展点是可以的）。

```
ren "%LOCAL%\archive\*.csv" ????????????????????-%PVM%* 
```

数量`?`必须大于或等于文件夹中最长的名称。

如果文件名包含点，则结果将不正确。例如，`part1.part2.csv`将成为`part1-2013-02-15.part2.csv`.

另一种选择是使用 FOR 循环。您可以使用此技术安全地将日期附加到任何文件。

```
for %%F in ("%LOCAL%\archive\*.csv") do ren "%%F" "%%~nF-%PVM%%%~xF" 
```

但是，如果您稍后重新运行该过程，这两种解决方案都会出现问题。新文件将添加到存档中，但新旧存档文件都将重命名为当前日期。那是行不通的。

[最好按照rojo 的回答](https://stackoverflow.com/a/14896510/1012053)中的建议使用 FOR 循环一步复制和重命名文件。

或者更好的是，使用文件夹名称中的日期创建一个新的存档文件夹，然后将文件复制到有日期的存档文件夹而不重命名:-)

```
set REMOTE=U:\ 
set LOG=C:\Integration\FE\log_test 
set PVM=%DATE:~9,4%-%DATE:~6,2%-%DATE:~3,2%
set YY=%DATE:~9,4% 
set LOCAL=C:\FTP\VC\test
cd %LOCAL%

xcopy /y /f /v "%LOCAL%\*.csv" "%REMOTE%\" >>%LOG%\%PVM%.log 
md "%LOCAL%\archive\%PMV%
xcopy /y /f /v "%LOCAL%\*.csv" "%LOCAL%\archive\%PVM%" 
```

如果进程可以在同一天运行多次，您可能希望在文件夹名称中包含时间。

# erlang - 你如何在一个版本中包含一个 erlang 应用程序，但是 rebar 没有启动它？

> ID：14890699
> 
> 赞同：2
> 
> 时间：2013-02-15T08:28:12.420
> 
> 标签：erlang, rebar

我正在使用 rebar 来编译和生成一个版本。

在我的 /apps 文件夹下，我有 app1、app2。目前 rel/reltool.config 配置了 app1、app2。控制台按预期工作，没有错误。

我只希望 app1 在节点启动时启动，并通过 app1 的主管手动启动 app2。

各种尝试评论/不同的 incl_cond 值等导致钢筋生成错误，例如“必须在发布中包含 app2，不能排除”

建议表示赞赏。~B

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T11:43:58.640

您可以通过[将](http://www.erlang.org/doc/design_principles/included_applications.html)`app2`其添加到：`app1``app1.app.src`

```
{included_applications, [app2]} 
```

或者在您的`reltool.config`，将 app2 标记为仅加载，如下所示：

```
{rel, "myrelease", "1",
   [
     kernel,
     stdlib,
     sasl,
     app1,
     {app2, load}
   ]}, 
```

# abap - 如何在不同系统之间复制 pf 状态

> ID：14890702
> 
> 赞同：0
> 
> 时间：2013-02-15T08:28:23.430
> 
> 标签：abap, dynpro

我需要复制一份报告的 pf 状态。但是我想从一个复制到另一个的程序位于不同的系统中。

有没有下载-上传pf-status之类的方法？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:58:44.810

您要做的是将程序从一个系统传输到另一个系统。主要取决于您在两个系统中的授权和景观设置，但如果您获得授权并且系统都在同一个传输域中，您可以执行以下操作（*我每天都做那种事情*）：

在源系统上

*   开始交易`SE09`
*   创建副本传输，指定适当的目标系统
*   在那里包括你的报告；条目将是`R3TR PROG <name of your program>`
*   发布副本传输

在目标系统上

*   开始交易`STMS`
*   转到系统列表（带有卡车的小图标）
*   在那里选择目标系统
*   你得到准备进口的运输清单
*   单击刷新，您的传输应显示在列表底部
*   将光标指向它并触发传输
*   如果一切顺利，您的整个报告现在都在目标系统中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:14:08.030

你可以试试[SAPLink](http://code.google.com/p/saplink/)。它确实要求您在两个 ABAP 系统上都安装 SAPLink，但之后将对象从一个系统传输到另一个系统要简单得多。

另一种选择是寻求基础人员的帮助，创建传输并让他们将其导入目标系统。但一般来说，这不太可能发生。

# javascript - 如何将 jquery 加载文件与 jquery 绑定事件同步

> ID：14890703
> 
> 赞同：1
> 
> 时间：2013-02-15T08:28:25.813
> 
> 标签：javascript, oop, jquery, jquery-load

我需要通过 jquery 向 DOM 添加一些 html，并将一些事件绑定到生成的元素，但我无法同步它，在 addEvents 函数开始的地方，没有创建 DOM 元素，所以 $(".login-log" ) 元素尚未在 DOM 上。

我找到了这个：

[Javascript 事件同步](https://stackoverflow.com/questions/1076154/javascript-event-synchronization)

我正在研究它，但对我不起作用，我的代码，我不知道我是否错过了什么或什么：

```
var Login = function ()
{
var commons = new Commons();

this.init = function()
{
    stepOne(stepTwo);

    commons.init();
}

function stepOne(callback) {
    var AsyncDone = function()
    {
        callback();
    }
    loadFiles(AsyncDone);
}

function loadFiles(callback)
{
    $(".header-container").load("views/header.html");
    $(".content-container").load("views/login.html");
    callback();
}

function stepTwo() {
    addEvents();
}

function addEvents() {
    alert("is here");
    $(".login-log").bind("click", function() { alert("fuck"); });
}
} 
```

syncronizathion 使警报“在这里”出现在 header 和 login.html 的 DOM 元素被加载到 DOM 之前。

我知道这必须很简单，但我找不到解决方案。

谢谢指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:02:17.393

我的最终选择：

```
this.init = function()
{
    loadHeader(addHeaderEvents);
    loadTemplate(addTemplateEvents);
    loadFooter(addFooterEvents);

    commons.init();

}

function loadHeader(callback) {
    $(".header-container").load("views/header.html", function() {
        callback();
    });
}
function addHeaderEvents() {

}

function loadTemplate(callback) {
    $(".content-container").load("views/template_login.html", function() {
        callback();
    });
}
function addTemplateEvents() {
    alert("llega");
    $(".login-log").bind("click", function() { alert("done"); });
}

function loadFooter(callback) {
    $(".footer-container").load("views/footer.html", function() {
        callback();
    });
}
function addFooterEvents() {

} 
```

# java - 为什么我的 ListView 不显示？

> ID：14890708
> 
> 赞同：0
> 
> 时间：2013-02-15T08:28:31.897
> 
> 标签：java, android, listview

我有一个`ListView`不显示的问题。我没有收到错误，背景图片和其他文本正在显示，但`ListView`没有显示。我无法通过调试找到错误。

任何线索是什么问题？

```
public class MainActivity extends Activity {

    List<String> sermon;
    List<String> links;
    ArrayAdapter<String> adapter;
    private ListView list;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        list = (ListView) findViewById(R.id.listView);
        sermon = new ArrayList<String>();
        links = new ArrayList<String>();
        adapter = new ArrayAdapter<String>(MainActivity.this,
                        android.R.layout.simple_list_item_1, sermon);           

        new PostTask(this).execute("http://gibk.se/sample-page/predikningar/?podcast");
    }

    public class PostTask extends AsyncTask<String, Long, String> {

        private Context context;

        public PostTask(Context context) {
                this.context = context;
        }

        private InputStream getInputStream(URL url) {
            try {
                return url.openConnection().getInputStream();
            } catch (IOException e) {
                return null;
            }
        }

        @Override
        protected String doInBackground(String... params) {
            try {
                String url = params[0];
                URL urls = new URL(url);

                XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
                factory.setNamespaceAware(false);
                XmlPullParser xmlParser = factory.newPullParser();

                xmlParser.setInput(getInputStream(urls), "UTF_8");

                boolean insideItem = false;

                int eventType = xmlParser.getEventType();
                while (eventType != XmlPullParser.END_DOCUMENT) {
                    if (eventType == XmlPullParser.START_TAG) {
                            if (xmlParser.getName().equalsIgnoreCase("item")) {
                                    insideItem = true;
                            } else if (xmlParser.getName().equalsIgnoreCase("title")) {
                                    if (insideItem)
                                            sermon.add(xmlParser.nextText());
                        } else if (xmlParser.getName().equalsIgnoreCase("guid")) {
                                    if (insideItem)
                                            links.add(xmlParser.nextText());
                            }
                    } else if (eventType == XmlPullParser.END_TAG
                                    && xmlParser.getName().equalsIgnoreCase("item")) {
                            insideItem = false;
                    }

                    eventType = xmlParser.next();
                }
            } catch (MalformedURLException e) {
                e.printStackTrace();
            } catch (XmlPullParserException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

            return null;
        }
    }

    protected void onPostExecute(String result) {
        list.setAdapter(adapter);
        list.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> arg0, View v, int position,
                                long arg3) {
                    Uri uri = Uri.parse(links.get(position));
                    String url = uri.toString();

                    Intent intent = new Intent(Intent.ACTION_VIEW);
                    intent.setData(Uri.parse(url));
                    startActivity(intent);
                }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:54:13.223

传递的参数`onPostExecute`是从`doInBackground`方法中获取的。因此，您可能必须从`doInBackground`. 并添加`adapter.notifyDataSetChanged();` 此[链接](http://code.google.com/p/makemachine/source/browse/trunk/android/examples/async_task/src/makemachine/android/examples/async/AsyncTaskExample.java)可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:32:06.670

> 我有一个未显示的 listView 的问题。我没有收到错误，背景图片和其他文本正在显示，但 listLiew 没有显示。我无法通过调试找到错误。

如果没有错误，那么很可能有两个原因：

您正在动态地将数据添加到`ListAdapter`或`onPostExecute()`)`onProgressUpdate(`方法中尝试在您的方法上调用方法`ListAdapter`

```
adapter.notifyDataSetChanged(); 
```

确实有可能您`ListView`没有正确刷新，这种方法可以确保它。

你的`ListView`可以是空的。尝试记录`XML parsing`您是否正确获取值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:32:24.820

**在AsyncTask**完成后设置您的适配器。

**onPostExecute** 方法

```
adapter = new ArrayAdapter<String>(MainActivity.this,
            android.R.layout.simple_list_item_1, sermon); 
```

# javascript - AngularJs 或 JavaScript 等待某些条件

> ID：14890710
> 
> 赞同：2
> 
> 时间：2013-02-15T08:28:37.813
> 
> 标签：javascript, angularjs

在我的代码的一行中，我有类似的内容：

```
...
while(!$scope.isMyTurn(privilege)){}
I will run next line of codes 
```

但是像往常一样它会阻止我的浏览器。我必须等到真正运行下一行代码。我不想阻止我的浏览器和其他功能应该可以工作，因为（其他一些触发的事件会改变轮到我的情况）用户应该继续他所做的一切。

这是为了在轮到我之前刷新图形。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T12:00:38.787

你应该这样做：

```
$scope.$watch("isMyTurn(privilege)",function(val){
    if(val){
       //I will run next line of codes
    }
}); 
```

而不是您尝试做的事情。请注意，在这种情况下，`privilege`也应该是一个`scope`变量，例如

```
$scope.privilege 
```

如果您不希望它成为`scope`变量，请不要将其作为参数传递。但直接在函数内部访问它..

希望这可以帮助..

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T08:32:08.107

考虑使用 $scope.$watch 函数。

查看（$watch）： [http ://docs.angularjs.org/api/ng.$ro​​otScope.Scope](http://docs.angularjs.org/api/ng.%24rootScope.Scope)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T08:31:54.927

我不知道 angularJS 但在普通的 JavaScript 中你可以使用`setTimeout`

```
function whenReady()
{
  if ($scope.isMyTurn(privilege)){
    I will run next line of codes
  }
  else
  {
    window.setTimeout(whenReady, 1000);
  }
}
window.setTimeout(whenReady, 1000); 
```

# iphone - iOS 核心数据 - 更新多条记录

> ID：14890716
> 
> 赞同：3
> 
> 时间：2013-02-15T08:29:02.193
> 
> 标签：iphone, xcode, sqlite, ios6, xcode4.5

我已经搜遍了，但仍然没有找到任何非常有效的方法。问题/答案太老了，或者根本不适合我。这是我第一次尝试“我自己的”应用程序。由于这似乎是一种通行权，我正在制作一个清单应用程序。这就是我要找的东西：

我的数据存储包含 4 个属性：（`name, category, isChecked, isActive`随着我的扩展，肯定会有更多属性）

当我的视图控制器最初加载时，它`NSFetchedResultsController`有一个`NSPredicate`只检索属性`isActive`为 YES （或`[NSNumber numberWithBool:YES`）的记录。然后它获取这些记录并将它们显示到用户的适当单元格中。当用户单击单元格时，Data Store 会`isChecked`相应地更新和更改属性。到目前为止，一切都很好。

我现在需要做的是能够从列表中删除项目（1 个或多个）。具体来说，我需要它来更新数据存储属性`isChecked`，并且`isActive`只有当它的当前`isChecked`属性为 YES 时才更新为 NO。（我不打算从数据存储中删除记录，因为它们将用于构建数据库以供用户将来使用。）

除其他外，我使用过：

```
[[[self fetchedResultsController] fetchedObjects] 
   setValue:[NSNumber numberWithBool:NO] 
   forKey:@"isChecked"]; 
```

这确实有效，它会删除复选标记并相应地更新商店。问题是，我不仅向数据存储发出另一个请求以获取`isActive`项目，它还搜索获取的整个“活动列表”并将它们的每个`isChecked`属性设置为 NO。对于小列表来说，这可能不是太大的问题，但随着列表的扩展，这可能是一个问题。

另一个问题是，如果我添加：

```
[[[self fetchedResultsController] fetchedObjects] 
   setValue:[NSNumber numberWithBool:NO] 
   forKey:@"isActive"]; 
```

它将我的所有列表项设置为 NO（以及同一方法中的第二个数据存储请求。）

所以我的问题是：我如何才能通过列表，仅查找已检查的项目并仅更新那些`isChecked`属性为 YES 的记录（设置 isChecked && isActive 属性 = NO），而不是遍历整个列表？

我尝试专门为此按钮操作创建一个单独的 fetchedResultsController，它确实有效（也就是说，它没有崩溃）但调试器弹出了一个相当大的“严重应用程序错误”。我不会发布错误消息，因为它很长并且很可能与任何解决方案无关。

任何帮助将不胜感激。在此先感谢，请保持温和:-]。

**编辑**

我试过使用`for`循环，`for (NSString *item in fetchedResultsController)`但我得到了错误`...may not respond to 'countByEnumeratingWithState:objects:count'`

似乎这里需要一个循环，但同样，我找不到任何相关的东西或者它已经过时了。再次感谢您的帮助。

**编辑 2**

这是我为此按钮/方法运行第二个单独的 fetchRequestController 时遇到的原始错误：

`An exception was caught from the delegate of NSFetchedResultsController during a call to -controllerDidChangeContent:. Invalid update: invalid number of rows in section 0\. The number of rows contained in an existing section after the update (4) must be equal to the number of rows contained in that section before the update (4), plus or minus the number of rows inserted or deleted from that section (0 inserted, 3 deleted) and plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out). with userInfo (null)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:07:27.500

您可以遍历 fetchedObjects 集合并更改托管对象。更改它们后，您需要重新加载列表（我猜您使用的是表格视图）。

我不知道您的类的名称是什么，但通常您可以遍历托管对象的集合并更改它们。请记住，如果您想在应用关闭时保留这些更改，则需要保存托管对象上下文。

```
NSArray* myCollection = [[self fetchedResultsController] fetchedObjects];
for(ActiveListData *managedObject in myCollection)
{
    if(managedObject != nil && managedObject.isChecked)
    {
        managedObject.isChecked = NO;
        managedObject.isActive = NO;
    }
} 
```

如果要检查数据库中的所有对象，则需要在 NSFetchedResultsController 中使用一个新方法，该方法对 isChecked 进行谓词检查，然后循环并编辑结果集合。

您可能想发布您的错误代码，因为我们可以指出您做错了什么。

编辑：如果您不熟悉使用核心数据，苹果文档提供了很多信息：http: [//developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdBasics.html](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdBasics.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T04:34:04.097

感谢@ggfela 的回答。他的回答过程很到位。这是我放入按钮/方法中的实际代码，希望将来能帮助其他人：

```
NSArray *moc = [[self fetchedResultsController] fetchedObjects];

for  (ActiveListData *item in moc) {
    if (item != nil && item.isChecked.boolValue == 1) {
        item.isChecked = [NSNumber numberWithBool:NO];
        item.isActive = [NSNumber numberWithBool:NO];
    }
}

// Call to Data Store to update the list
NSError *error;
if (![self.managedObjectContext save:&error]) {
    FATAL_CORE_DATA_ERROR(error);
    return; 
```

**解释：**

将调用方法的结果内容加载`fetchedResultsController`到一个名为的临时变量中`moc`

使用`for`循环循环遍历`moc`. `ActiveListData`是我为我的核心数据创建的 NSManagedObject 子类，并且是从数据存储中插入分离的值/属性的合适位置。从那里开始，这很简单，我确保`item`不是`nil`并且该项目的属性是我需要的值。

**笔记**

Core Data 不存储布尔值 YES 和 NO，而是分别存储 1 和 0，但是当您调用或比较这些值时，您根本无法比较 的值，`item.isChecked`因为它作为布尔值而不是整数传回给您. 您不能简单地比较`item.isChecked == YES`两者，因为`@property`of`isChecked`是一个`NSNumber`. 所以，在`if`我放的情况下，`item.isChecked.boolValue`这会给我代表它的布尔值的整数，在这种情况下，我让它检查 1（是）。（对不起，如果我的解释是错误的和/或令人困惑的，但这是我理解它的方式，也是此代码工作的唯一方式。）

然后，设置这些属性的新值就像设置任何其他变量时所期望的一样。唯一“棘手”的区别是 NSManagedObject 子类将`@property`and`isChecked`设置`isActive`为`NSNumber`（如前所述），因此为了将正确的值发送回 Core Data，您使用类的`numberWithBool`方法`NSNumber`。

万一有人对我的`FATAL_CORE_DATA_ERROR(error)`调用感到困惑，这只是一个在`Prefix.pch`文件中定义的宏，用于处理来自 managedObjectContext 的错误。您可以使用您选择的任何（或不使用）错误处理。

再次感谢@ggfela 的帮助！！如果其他人对如何应用此代码有任何其他建议，请告诉我！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-11T18:36:25.343

您可以使用 NSBatchUpdateRequest 更新多条记录

例子：

[https://www.bignerdranch.com/blog/new-in-core-data-and-ios-8-batch-updating/](https://www.bignerdranch.com/blog/new-in-core-data-and-ios-8-batch-updating/)

[http://code.tutsplus.com/tutorials/ios-8-core-data-and-batch-updates--cms-22164](http://code.tutsplus.com/tutorials/ios-8-core-data-and-batch-updates--cms-22164)

# java - 这种单例设计模式正确吗？

> ID：14890717
> 
> 赞同：2
> 
> 时间：2013-02-15T08:29:09.323
> 
> 标签：java, design-patterns, singleton

这种单例设计模式正确吗？我的意思是当它是 static 并且方法是 synchronized 时，需要检查对象是否为 null 。

```
public class MySingleton {

    int val = 10;
    private static final MySingleton singleton = new MySingleton();

    private MySingleton() { }

    public static synchronized MySingleton getSingleton() {
        return singleton;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T08:32:27.530

您不需要使您的方法同步。变量在静态初始化程序中初始化的事实就足够了。此外，您的`val`变量几乎肯定应该是私有的......

当您*不*想要同步方法并且*不*想要静态初始化程序时，通常使用双重检查锁定模式（带有无效性检查）。（在我看来，它几乎在所有情况下都过于复杂和脆弱。）

另一种选择是使用枚举：

```
public enum MySingleton {
    INSTANCE;

    private int val = 10;

    // Presumably something to use val
} 
```

使用枚举会强制执行单例，甚至在面对序列化时也能做到这一点。这也是一种非常简单的方法，无需实际代码 :) 另一方面，我从来没有觉得*完全*正确......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T08:34:29.933

最好的模式是 Joshua Bloch 在他的《Effective Java》一书中使用 Enum 给出的模式：

```
public enum MySingleton {
    INSTANCE;

    public void doSomething() {

    }
} 
```

引用本书：

“这种方法在功能上等同于公共字段方法，只是它更简洁，免费提供序列化机制，并且即使面对复杂的序列化或反射攻击，也能提供防止多次实例化的铁定保证。虽然这种方法已经尚未被广泛采用，单元素枚举类型是实现单例的最佳方式。”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T08:34:39.380

您可以这样做，但在许多情况下，您可以使用“惰性评估” - 您在第一次请求实例时创建实例：

```
public class MySingleton {

    private static MySingleton singleton = null

    private MySingleton() { }

    public static synchronized MySingleton getSingleton() {
        if (singleton == null) {
            singleton = new MySingleton();
        }
        return singleton;
    }
} 
```

# mysql - 最快和/或最简单的方法是什么？

> ID：14890718
> 
> 赞同：0
> 
> 时间：2013-02-15T08:29:09.947
> 
> 标签：mysql, sql, database

我有下表和查询：

```
CREATE  TABLE IF NOT EXISTS `sizes` (
  `id_size` INT NOT NULL ,
  `cm_min` INT NOT NULL ,
  `cm_max` INT NOT NULL ,
  PRIMARY KEY (`id_size`) )
ENGINE = InnoDB;

insert into sizes values
(1,          56,        59),
(2,          63,        67),
(3,          70,        74),
(4,          76,        79),
(5,          83,        86),
(6,          60,        62),
(7,          12,        14);

  SELECT * FROM sizes
  WHERE cm_min >= 13 AND cm_min <= 66 OR
  cm_max >= 13 AND cm_max <= 66
  AND cm_min =
    (SELECT min(cm_max) FROM sizes
    WHERE (cm_min >= 13 AND cm_min <= 66) OR
    (cm_max >= 13 AND cm_max <= 66))
UNION
  SELECT * FROM sizes
  WHERE cm_min >= 13 AND cm_min <= 66 OR
  cm_max >= 13 AND cm_max <= 66
  AND cm_min =
    (SELECT min(cm_min) FROM sizes
    WHERE (cm_min >= 13 AND cm_min <= 66) OR
    (cm_max >= 13 AND cm_max <= 66))
ORDER BY cm_max ASC; 
```

[在 SqlFiddle 中查看](http://sqlfiddle.com/#!2/83e93/126/0)

* * *

如您所见，这是一个值为 12 和 66 的示例。我需要在此查询中添加以下两个条件：

1.  如果引入值的范围是所有表中最小的，则查询只返回具有最小值的行的数据。例如：如果我有值 9 和 10，结果将是 id_size 7，因为它是数字较小的那个。

2.  如果引入值的范围是所有表中最大的，则查询只返回具有最大值的行的数据。例如：如果我有值 112 和 113，结果将是 id_size 5，因为它是具有较大数字的那个。

* * *

您知道如何将上述条件添加到我的查询中吗？我可以简化它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:22:28.467

这应该可以解决问题。**请注意**，顺序很重要，@v1 必须是范围最小值，@v2 必须是最大值。

```
SET @v1=112, @v2=113;

SELECT *
FROM   sizes
WHERE  (
       cm_min BETWEEN @v1 and @v2
       AND
       cm_max BETWEEN @v1 and @v2
       )
OR
       cm_min = (
         SELECT MIN(cm_min)
         FROM   sizes
         WHERE  (@v1+@v2) <= (cm_min + cm_max)
         )
UNION
SELECT *
FROM   sizes
WHERE  (
       cm_min BETWEEN @v1 and @v2
       OR
       cm_max BETWEEN @v1 and @v2
        )
OR
       cm_max = (
         SELECT MAX(cm_max)
         FROM   sizes
         WHERE  (@v1+@v2) >= (cm_min + cm_max)
         )
ORDER BY cm_max ASC;
; 
```

# android - 在 Android 中，可以在关键事件到达有焦点的子视图之前对其进行全局拦截吗？

> ID：14890720
> 
> 赞同：13
> 
> 时间：2013-02-15T08:29:22.723
> 
> 标签：android, events, event-handling, keyboard, key

在大多数情况下，我希望当前具有焦点的（子）视图处理关键事件，这是默认行为，也是我目前已经实现的。

但是，在某些非常具体的情况下，我想在我当前的活动中或者在我的根视图中临时拦截和处理所有关键事件（特别是那些通常由子视图处理的事件）（没关系，只要它们是全局处理的——我不关心音量 +/- 之类的硬件按钮，因为无论如何我的任何子视图都不会处理这些按钮）。

对于*触摸*事件，我们有 onInterceptTouchEvent()，它允许 ViewGroup 在触摸事件被分派到子视图时观察它们，并阻止它们预期的子视图接收这些事件（在需要时）。

不幸的是，对于关键事件，我找不到任何类似于 onInterceptTouchEvent() 的东西。我是否遗漏了一些明显的东西，或者这是操作系统中的实际不对称？

当然，我可以只连接每个子视图的当前键事件处理程序代码，以直接调用主活动上的方法来处理事件（如果需要），并让该活动级方法返回一个布尔值，指示它是否处理了事件。然后，当且仅当它调用的活动方法*没有*处理它时，子视图才能处理该事件。

但我希望有一种更简洁的方法来简单地拦截流量“向下”到子视图的层次结构，就像 onInterceptTouchEvent() 对触摸事件所做的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-09T10:22:04.143

您可以添加`OnGlobalFocusChangeListener`到您的根视图。让我们为每个活动执行此操作：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    findViewById(android.R.id.content).getViewTreeObserver().addOnGlobalFocusChangeListener(new ViewTreeObserver.OnGlobalFocusChangeListener() {
        @Override
        public void onGlobalFocusChanged(View oldFocus, View newFocus) {
            if (newFocus instanceof EditText) {
                ((EditText) newFocus).addTextChangedListener(new TextWatcher() {
                    @Override
                    public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {
                        //process whatever you want
                    }

                    @Override
                    public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {
                    }

                    @Override
                    public void afterTextChanged(Editable editable) {
                    }
                });
            }
        }
    });
} 
```

当然，如果您对视图以外的视图感兴趣，`EditText`则必须弄清楚如何观察它们的变化。

同样，如果您想将它全局添加到您的所有活动`Application#registerActivityLifecycleCallbacks()`中，请在所有活动中使用该代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:45:05.697

所有小部件/视图似乎都实现了[`KeyEvent.Callback`](http://developer.android.com/reference/android/view/KeyEvent.Callback.html)，它有方法被调用来进行按键、长按、多重和按键。所有这些方法都返回布尔值，解释如下：

> 如果您处理了该事件，则返回 true。如果您想允许下一个接收者处理事件，请返回 false。

我认为您可以尝试在父组件中覆盖这些方法。

另一个是[`dispatchKeyEvent()`](http://developer.android.com/reference/android/view/View.html#dispatchKeyEvent%28android.view.KeyEvent%29)它`View`处理沿着焦点路径调度事件。也可以尝试覆盖它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-02T01:17:28.487

覆盖`dispatchKeyEvent`在要禁用`ViewGroup`的 s 的祖先的 a 中。`View`

我正在使用以下〜。

```
public static class TvPrefsContainer extends FrameLayout {
    private boolean isActive; // i.e. will dispatch keyboard events to focused children
    // snip

    @Override public boolean dispatchKeyEvent(KeyEvent event) {
        return isActive && super.dispatchKeyEvent(event);
    }
}

public static class TvPrefs extends PreferenceFragment {
    @Override public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        addPreferencesFromResource(R.xml.tv_prefs);
    }
}

private void togglePrefsVis() {
    tvPrefsContainer.animate()
            .alpha(isPrefsVisible ? 0 : 1)
            .translationX(isPrefsVisible ? tvPrefsContainer.getMeasuredWidth() : 0)
            .start();
    tvPrefsContainer.isActive = isPrefsVisible;
    isPrefsVisible = !isPrefsVisible;
} 
```

# c# - 链接 StyleCop 设置文件

> ID：14890723
> 
> 赞同：0
> 
> 时间：2013-02-15T08:29:34.087
> 
> 标签：c#, visual-studio-2012, stylecop

我的项目中有两个设置文件。一个位于 Visual Studio 解决方案文件旁边。另一个位于子文件夹中，用于导出到我们开发的其他产品。

*   ...
*   解决方案.sln
*   settings.stylecop **（链接到其他设置文件）**
*   导出（文件夹）
    *   settings.stylecop **(<= 用于导出，不合并)**
    *   stylecop.targets
    *   stylecop.dll
    *   ETC...

当我将 sln 设置文件链接到导出文件夹中的设置文件时，StyleCop 已激活所有规则。似乎链接被忽略了。但是当我在编辑器中打开 sln 设置文件时，似乎该设置是继承的。

我做错了什么？现在我必须手动确保两个文件始终相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-10T05:42:58.367

听起来您的 LinkedSettingsFile 值不正确。为了确保它的值被视为相对于设置文件（而不是执行进程的工作目录），它必须以句点开头。例如：

```
<StyleCopSettings Version="105">
  <GlobalSettings>
    <StringProperty Name="MergeSettingsFiles">Linked</StringProperty>
    <StringProperty Name="LinkedSettingsFile">.\SomeFolder\Settings.StyleCop</StringProperty>
  </GlobalSettings>
</StyleCopSettings> 
```

[此CodePlex 问题](https://stylecop.codeplex.com/workitem/7145 "CodePlex 问题")中提供了更多信息。

# java - 如何使用 Akka Actor 处理 Java 期货

> ID：14890724
> 
> 赞同：4
> 
> 时间：2013-02-15T08:29:51.867
> 
> 标签：java, asynchronous, akka, future

我在 Java Web 应用程序中有一个分层架构。UI 层只是 Java，服务是类型化的 Akka actor，外部服务调用（WS、DB 等）被包装在 Hystrix 命令中。

UI 调用服务，服务返回 Akka 未来。这是一个 Akka 未来，因为我想通过 Akka 未来提供的 onComplete 和 onFailure 回调来简化 UI 编码。然后该服务创建执行一些映射等的未来，并包装对返回 Java 未来的 HystrixCommand 的调用。

所以在伪代码中：

用户界面

```
AkkaFuture future = service.getSomeData(); 
```

服务

```
public AkkaFuture getSomeData() {
    return future {
        JavaFuture future = new HystrixCommand(mapSomeData()).queue()
        //what to do here, currently just return future.get()
    }
} 
```

**问题是**我想释放服务参与者正在使用的线程，而只是绑定 Hystrix 使用的线程。但是 java 未来会阻止这种情况，因为我必须阻止它的完成。我能想到的唯一选择（我不确定我是否喜欢）是不断轮询 Java 未来并在 Java 未来完成时完成 Akka 未来。

注意：这个问题与 Hystrix 本身并没有真正的关系，但如果有人想出一个与 Hystrix 相关的解决方案，我决定提一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:57:44.680

我将@Hbf 的答案标记为解决方案，因为我最终做了一个 Akka 轮询器，如[如何在 Akka Future 中包装 java.util.concurrent.Future？](https://stackoverflow.com/questions/11529145/how-do-i-wrap-a-java-util-concurrent-future-in-an-akka-future). 作为参考，我还尝试过：

*   创建一个 HystrixCommandExcutionHook 并扩展 HystrixCommand 以允许回调。这不起作用，因为没有在正确的时间调用钩子。
*   通过装饰的执行器在 Hystrix 中创建期货，然后从命令中投射期货来使用 Guavas 可听的未来。不起作用，因为 Hystrix 使用了无法修饰的 ThreadPoolExecutor。

编辑：我在下面添加 Akka poller 代码，因为原始答案是在 Scala 中，如果 Java 未来不能很好地取消，它会挂起。下面的解决方案总是在超时后离开线程。

```
 protected  Future wrapJavaFutureInAkkaFuture(final java.util.concurrent.Future javaFuture, final Option maybeTimeout, final ActorSystem actorSystem) {
      final Promise promise = Futures.promise();
        if (maybeTimeout.isDefined()) {
          pollJavaFutureUntilDoneOrCancelled(javaFuture, promise, Option.option(maybeTimeout.get().fromNow()), actorSystem);
        } else {
          pollJavaFutureUntilDoneOrCancelled(javaFuture, promise, Option. none(), actorSystem);
        }

        return promise.future();
    }

    protected  void pollJavaFutureUntilDoneOrCancelled(final java.util.concurrent.Future javaFuture, final Promise promise, final Option maybeTimeout, final ActorSystem actorSystem) {
      if (maybeTimeout.isDefined() && maybeTimeout.get().isOverdue()) {
        // on timeouts, try to cancel the Java future and simply walk away
        javaFuture.cancel(true);
        promise.failure(new ExecutionException(new TimeoutException("Future timed out after " + maybeTimeout.get())));

      } else if (javaFuture.isDone()) {
        try {
          promise.success(javaFuture.get());
        } catch (final Exception e) {
          promise.failure(e);
        }
      } else {
            actorSystem.scheduler().scheduleOnce(Duration.create(50, TimeUnit.MILLISECONDS), new Runnable() {
          @Override
          public void run() {
            pollJavaFutureUntilDoneOrCancelled(javaFuture, promise, maybeTimeout, actorSystem);
          }
        }, actorSystem.dispatcher());
      }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T23:29:59.987

众所周知，Java 期货在设计上不如 Scala 期货。例如，看一下[“How do I wrap a java.util.concurrent.Future in an Akka Future”](https://stackoverflow.com/questions/11529145/how-do-i-wrap-a-java-util-concurrent-future-in-an-akka-future)的讨论。

**但是：**也许，Hystrix 提供了某种`onComplete`回调而不是轮询（如上面讨论中所建议的）？我根本不知道这个库，但偶然发现[`onComplete`了 Hystrix API 中的](http://netflix.github.com/Hystrix/javadoc/com/netflix/hystrix/strategy/executionhook/HystrixCommandExecutionHook.html#onComplete%28com.netflix.hystrix.HystrixCommand,%20T%29)一个。也许它有帮助？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-01T21:36:57.480

从 Hystrix 1.3 开始，它现在还支持真正的非阻塞回调，这将更适合 Akka/Scala 非阻塞和可组合的未来行为：[https ://github.com/Netflix/Hystrix/wiki/How-To -使用#wiki-Reactive-Execution](https://github.com/Netflix/Hystrix/wiki/How-To-Use#wiki-Reactive-Execution)

# php - 用用户输入的内容填写表单的值

> ID：14890727
> 
> 赞同：-1
> 
> 时间：2013-02-15T08:30:03.293
> 
> 标签：php, html

我正在尝试在同一页面上验证表单，但出现错误。我想用用户输入的内容填写表单的值。html代码是：

```
<h4>Business Name</h4></td>
<td><input type="text" name="bname" size="30" required x-moz-errormessage="Enter business name" <?php if ( "$_POST[bname]" ) { echo " value='" . $_POST['bname'] . "'";} ?> ></td></tr> 
```

错误信息是：Undefined index: bname in E:\Program Files\xampp\htdocs\registration.php >

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:32:00.737

您需要检查是否`$_POST['bname']` `isset`，如果是，则`echo`

```
<?php if (isset($_POST['bname'])) { echo " value='" . $_POST['bname'] . "'";} ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:32:26.470

```
<?php if ( isset($_POST['bname']) ) { echo " value='" . $_POST['bname'] . "'";} ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:34:03.733

if 语句中的条件不应该如下所示吗？

```
<td><input type="text" name="bname" size="30" required x-moz-errormessage="Enter business name" <?php if ( isset($_POST['bname']) ) { echo " value='" . $_POST['bname'] . "'";} ?> ></td></tr> 
```

# jpa - JSF2.0，JPA：如何设置列表元素（映射在@OneToMany）

> ID：14890739
> 
> 赞同：0
> 
> 时间：2013-02-15T08:31:34.860
> 
> 标签：jpa, jsf-2, el, many-to-one, one-to-many

我正在寻找好的做法和干净的解决方案来解决我的问题。有2个实体类：

```
@Entity
public class Site implements Serializable {
  ...
  @OneToMany(mappedBy = "site")
  private List<SiteIp> siteIpList;
  ...
  public List<SiteIp> getSiteIpList() {
    return siteIpList;
  }
  public void setSiteIpList(List<SiteIp> siteIpList) {
    this.siteIpList = siteIpList;
  }
}

@Entity
@IdClass(SiteIpPK.class)
public class SiteIp implements Serializable {

  @Id
  @ManyToOne(fetch = FetchType.LAZY)
  private Site site;

  @Id
  private int idx;

  private String ip;

  /* other stuff such as constructors, getters and setters */

} 
```

SiteIpPK 有 2 列，应该是干净的 :) 显然，这是世界上常用的模型。

接下来，有一个视图层。JSF 页面有 3 个字段显示给定站点和 idx 的 SiteIp.ip。到目前为止，我已经在 Site 实体上编写了 helper getter 方法：

```
public String getIpForIdx(Integer idx) {
  // there's no simple siteIpList.get(idx), because of additional logic in getter
  // so let's iterate through entire list

  for (SiteIp siteIp : this.siteIpList) {
    if (/* other logic returns true value && */ siteIp.getIdx() == idx) {
      return siteIp.getIp();
    }
  }

  return null;
} 
```

JSF 表达式语言的构造如下：

```
<h:inputText id="sync1_ip" value="#{siteController.editContext.site.getIpForIdx(1)}" /> 
```

现在，当页面被访问时，正确的 IP 值被传播到输入文本字段，到目前为止一切都很好。但是，当 IP 更改并提交表单时，EL 会抛出异常：

```
javax.el.PropertyNotWritableException: /edit/siteEdit.xhtml @47,123 value="#{siteController.editContext.site.getIpForIdx(1)}": Illegal Syntax for Set Operation 
```

我理解并承认这一点，所以我的问题是：

**处理此问题的最佳做法是什么？**有点糟糕的解决方案是编写与存在唯一索引一样多的辅助方法：

```
public String getIp1() {
    return this.IpForIdx(1);
}
public String getIp2() {
    return this.IpForIdx(2);
}
/* ... */

public void setIp1(String newIp) {
    this.siteIpList.add(1, newIp);
}
public void setIp2(String newIp) {
    this.siteIpList.add(2, newIp);
}
/* ... and so on... */ 
```

使用 JSF EL：

```
<h:inputText id="sync1_ip" value="#{siteController.editContext.site.ip1}" /> 
```

**还有其他更灵活、更美观的解决方案吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:44:14.370

您最好在 google 上搜索“使用 JPA 的复合主键”。但由于您是新来的，下面是一个简单的解释和一个可行的解决方案。

## 小解释

复合主键本身就是带有`@Embeddable`注释的类。`@Entity`一旦您用 .标记您的主复合键字段，它们就会成为您班级中的主键`@EmbeddedId`。剩下的唯一一件事就是在两个类中实现`equals`并`hashcode`适当地实现。

## 解决方案

解决方案包括一个`@Entity`类

```
@Entity
@Table(name="...")
@AssociationOverride(name = "pk.site", joinColumns = @JoinColumn(name = "..."))
public class SiteIp implements Serializable {

    private SiteIpPk pk = new SiteIpPK();
    private String ip;

    public SiteIp() {   }

    @EmbeddedId
    public SiteIpPK getPk() {
        return pk;
    }
    public void setPk(SiteIpPk pk) {
        this.pk = pk;
    } 

    @Transient
    public Site getSite() {
        return pk.getSite();
    }
    public void setSite(Site site) {
        pk.setSite(site);
    }

    @Transient
    public Integer getIdx() {
        return pk.getIdx();
    }
    public void setIdx(Integer idx) {
        pk.setIdx(idx);
    }

    @Column(name="...")
    public String getIp() {
        return ip;
    }
    public void setIp(String ip) {
        this.ip = ip;
    }

    public boolean equals(Object o) {
        if (this == o)
            return true;
        if (o == null || getClass() != o.getClass())
            return false;
        SiteIp that = (SiteIp) o;
        if (pk != null ? !pk.equals(that.pk) : that.pk != null)
            return false;
        return true;
    }

    public int hashCode() {
        return (pk != null ? pk.hashCode() : 0);
    }

} 
```

和`@Embeddable`班级

```
@Embeddable
public class SiteIpPk implements Serializable {

    private Site site;
    private Integer idx;

    @ManyToOne
    public Site getSite() {
        return site();
    }
    public void setSite(Site site) {
        this.site = site;
    }

    @Column(name="...", nullable = false)
    public Integer getIdx() {
        return idx;
    }
    public void setIdx(Integer idx) {
        this.idx = idx;
    }

    public boolean equals(Object o) {
        if (this == o)
            return true;
        if (o == null || getClass() != o.getClass())
            return false;
        SiteIpPk that = (SiteIpPk) o;
        if (site != null ? !site.equals(that.site) : that.site != null)
            return false;
        if (idx != null ? !idx.equals(that.idx) : that.idx != null)
            return false;
        return true;
    }

    public int hashCode() {
        int result;
        result = (site != null ? site.hashCode() : 0);
        result = 17 * result + (idx != null ? idx.hashCode() : 0);
        return result;
    }

} 
```

最后，自己了解更多，并检查问题是否已经调查过！

# java - 拦截和过滤 HTTP 请求

> ID：14890743
> 
> 赞同：4
> 
> 时间：2013-02-15T08:31:45.813
> 
> 标签：java, http, https, filter, sniffer

我想拦截/嗅探传入的 HTTP 请求并过滤/修改它们的内容（在它们到达应用程序之前）。

“提琴手”似乎有这个功能，但为了集成和可移植性，我宁愿在 Java/C 中有一些库来做到这一点。比如JPCAP。它拦截 IP 数据包，但如前所述，我需要拦截更高级别的 HTTP 请求。

此外，如何以相同的方式读取/修改 SSL 加密 (HTTPS) 请求？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T08:37:06.657

您是否尝试过[Servlet 过滤器](http://www.oracle.com/technetwork/java/filters-137243.html)？

它们封装了 HTTP 请求，因此可以在请求到达 servlet 之前对其进行修改，也可以修改响应。它们可以（并且正在）用于包装第三方 servlet 和 JSP。

因为它们位于 servlet 容器中，所以您可以安全、未加密地访问请求和响应。

# php - php获取带有标题的参数重置

> ID：14890749
> 
> 赞同：0
> 
> 时间：2013-02-15T08:32:06.657
> 
> 标签：php, image, header

我有以下情况。我有大约600张照片。大多数主题的底部都有一个徽标，应该将其剪掉，因为品牌问题，但不是所有的主题。（使用 ftp 和 photoshop 将是一个挑战）我正在考虑的方法我列出了我所有的图像表格文件夹和我向主题添加了一个超链接，该超链接应该在从底部切出 57px 的方法类上触发，因为图像列表仅限于高度和宽度，切割后不应出现在页面上

网址看起来像

cut.php?target= [http://example.com/hideit/2012/03/myimage.jpg](http://example.com/hideit/2012/03/myimage.jpg)

我想在执行后重置 get 参数以避免页面刷新问题，同时会再次从该图像中剪切定义的像素。我正在尝试以下

```
function cutAndsave($jpg){              
    $folder = explode('/', $jpg);
    $path = 'I:\\xampp\\htdocs\\hideit\\'. $folder[4]. '\\'. $folder[5] .'\\'.$folder[6] ;      

    list($width, $height) = getimagesize($jpg);     
    $offset_x = 0;
    $offset_y = 0;      
    $new_height = $height - 57;
    $new_width = $width;        
    $image = imagecreatefromjpeg($jpg);
    $new_image = imagecreatetruecolor($new_width, $new_height);
    imagecopy($new_image, $image, 0, 0, $offset_x, $offset_y, $width, $height);             
    header('Content-Type: image/jpeg');     
    imagejpeg($new_image,$path, 90);
    header("Location: /cat.php/");
    die();      
    } 
```

但在我的情况下，最后一个标题调用不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:55:45.883

您手头的具体问题是您在输出图像***后***尝试发送 HTTP 标头。HTTP 标头只能在任何内容*之前发送；*毕竟它们是*标题。*

更大的问题是这个想法是无稽之谈。

客户端请求一个 URL `example.com/image.php?id=42.jpg`，. 您可以将此 URL 视为文件名。图像由文件名/U​​RL 标识。不同的网址，不同的图像。这是一个PHP脚本而不是某个硬盘上的物理文件也没关系，这个细节与客户端无关。客户端请求 URL 并接收图像作为回报，这才是最重要的。图像是否只是从数据存储中读取，是否由脚本动态调整大小，是否由幕后的独角兽现场绘制，这些都无关紧要；这是一个实现细节。

URL 请求，响应。这是您在使用 Web 服务器时需要了解的重要概念。

因此，“重置 URL 参数”毫无意义。你不能那样做。您可以将客户端重定向到不同的 URL，但那是不同的文件/URL。如果您希望客户端获取图像，则每当客户端请求 URL 时，您都会使用图像进行响应。如果用户刷新页面，客户端再次请求 URL，就这样吧。

如果您不想一次又一次地进行图像切割，请*缓存*调整大小的文件。在代码中，检查：

1.  哦，有人要图片#42。
2.  我是否已经有图像 #42 的调整大小版本？
    *   如果不是，请创建一个调整大小的版本并将其保存在某处。
3.  提供调整大小的图像#42。

最重要的是，您可以设置影响客户端缓存行为的 HTTP 标头，因此客户端会将图像保留在其缓存中，并且不会每次都再次请求它。

* * *

如果它也像**不覆盖原始**. 始终保持原件完好无损，剪切版应该是它的副本。您可以按上述方式生成该副本，也可以在上传原件时生成该副本。但是不要根据您是否已经处理了图像来更改 URL 的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:44:09.887

你有一个错误`header("Location: /cat.php/");`

它应该是

```
header("Location: /cut.php"); 
```

如果你只想回到最后一页。

如果您想另外显示您的图像，您可以这样做

```
header("Location: /cut.php?show=$path") 
```

然后在你的文件中执行一个脚本来打印一个`<img>`标签。

# qt - Qt：类中的QSqlDatabase对象（如何声明？）

> ID：14890751
> 
> 赞同：4
> 
> 时间：2013-02-15T08:32:10.633
> 
> 标签：qt, class, sqlite, declare

我正在尝试创建一个应该处理来自和传入 sqlite 数据库的所有数据的类。但是，我对 QT 和 C++ 还很陌生，并且想知道类中数据库对象的声明。我可能需要一些关于我做对与错的提示，以及通常应该或可以如何做的提示。我的目标是为类创建一个单一的 QSqlDatabase 并将其用于类中的每个函数。

目前，我有以下代码：

主文件

```
#include "mainwindow.h"
#include "database.h"
#include <QApplication>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    Database db;
    MainWindow w;

    if(db.createStructure())
    {
        w.show();
    }

    return a.exec();
} 
```

数据库.h

```
#ifndef DATABASE_H
#define DATABASE_H

#include <QObject>
#include <QSqlDatabase>

class Database : public QObject
{
    Q_OBJECT
public:
    explicit Database(QObject *parent = 0);

    // FUNCTIONS
    bool createStructure();

signals:

public slots:

private:
    // VARIABLES
    QSqlDatabase m_db;

    // FUNCTIONS
    bool open();
    void close();
    bool transaction();
    bool commit();
};

#endif // DATABASE_H 
```

数据库.cpp

```
#include "database.h"
#include <QCoreApplication>
#include <QSqlDatabase>
#include <QSqlQuery>
#include <QSqlError>
#include <QList>

Database::Database(QObject *parent) :
    QObject(parent)
{
    m_db = QSqlDatabase::addDatabase("QSQLITE");
    m_db.setHostName("localhost");
    m_db.setDatabaseName(QCoreApplication::applicationDirPath() + "/events.db");
}

// PRIVATE

bool Database::open()
{
    return m_db.open();
}

void Database::close()
{
    return m_db.close();
}

bool Database::transaction()
{
    return m_db.transaction();
}

bool Database::commit()
{
    return m_db.commit();
}

// PUBLIC

bool Database::createStructure()
{
    bool prepared;
    QList<QString> commands;

    commands.append("CREATE TABLE...;");
    commands.append("CREATE TABLE...;");
    commands.append("CREATE TABLE...;");

    if (!Database::open())
    {
        return false;
    }
    else
    {
        if (!Database::transaction())
        {
            Database::close();
            return false;
        }
        else
        {
            foreach(QString command, commands)
            {
                QSqlQuery query;
                prepared = query.prepare(command);

                if(!prepared)
                {
                    if (!Database::commit())
                    {
                        Database::close();
                        return false;
                    }
                    else
                    {
                        Database::close();
                        return false;
                    }
                }
                else
                {
                    if(!query.exec())
                    {
                        if (!Database::commit())
                        {
                            Database::close();
                            return false;
                        }
                        else
                        {
                            Database::close();
                            return false;
                        }
                    }
                }
            }

            if (!Database::commit())
            {
                Database::close();
                return false;
            }
            else
            {
                Database::close();
                return true;
            }
        }
    }
} 
```

此代码正在运行。

但是，QSQLITE 数据库并不是单次添加到 m_db 对象中，而是每次调用类中的一个函数，因为...

```
Database::Database(QObject *parent) :
    QObject(parent)
{
    m_db = QSqlDatabase::addDatabase("QSQLITE");
    m_db.setHostName("localhost");
    m_db.setDatabaseName(QCoreApplication::applicationDirPath() + "/events.db");
} 
```

...代码块每次都执行。当前的默认连接只是被替换了，因为新的连接是相同的，这对程序没有任何影响，但它看起来不是一个很好的解决方案。

因此，我尝试用可以从 main.cpp 调用一次的声明函数替换此代码块...

主文件

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    Database db;
    MainWindow w;

    db.declare(“QSQLITE”, “localhost”, QCoreApplication::applicationDirPath() + "/events.db");

    if(db.createStructure())
    {
        w.show();
    }

    return a.exec();
} 
```

数据库.cpp

```
void Database::declare(QString driver, QString host, QString path)
{
    m_db = QSqlDatabase::addDatabase(driver);
    m_db.setHostName(host);
    m_db.setDatabaseName(path);
} 
```

...但是 m_db 对象的值当然只能在声明函数中使用，而不适用于我之后调用的其他函数。

我对解决方案的最佳猜测是在 main.cpp 中声明 QSqlDatabase 并将其提供给它应该调用的函数：

主文件

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QSqlDatabase qdb = QSqlDatabase::addDatabase("QSQLITE");
    qdb.setHostName("localhost");
    qdb.setDatabaseName(QCoreApplication::applicationDirPath() + "/events.db");

    Database db;
    MainWindow w;

    if(db.createStructure(qdb))
    {
        w.show();
    }

    return a.exec();
} 
```

数据库.cpp

```
bool Database::open(QSqlDatabase qdb)
{
    return qdb.open();
}

void Database::close(QSqlDatabase qdb)
{
    return qdb.close();
}

bool Database::transaction(QSqlDatabase qdb)
{
    return qdb.transaction();
}

bool Database::commit(QSqlDatabase qdb)
{
    return qdb.commit();
}

bool Database::createStructure(QSqlDatabase qdb)
{
    bool prepared;
    QList<QString> commands;

    commands.append("CREATE TABLE...;");
    commands.append("CREATE TABLE...;");
    commands.append("CREATE TABLE...;");

    if (!Database::open(qdb))
    {
        return false;
    }
    else
    {
        if (!Database::transaction(qdb))
        {
            Database::close(qdb);
            return false;
        }
        else
        {
            foreach(QString command, commands)
            {
                QSqlQuery query;
                prepared = query.prepare(command);

                if(!prepared)
                {
                    if (!Database::commit(qdb))
                    {
                        Database::close(qdb);
                        return false;
                    }
                    else
                    {
                        Database::close(qdb);
                        return false;
                    }
                }
                else
                {
                    if(!query.exec())
                    {
                        if (!Database::commit(qdb))
                        {
                            Database::close(qdb);
                            return false;
                        }
                        else
                        {
                            Database::close(qdb);
                            return false;
                        }
                    }
                }
            }

            if (!Database::commit(qdb))
            {
                Database::close(qdb);
                return false;
            }
            else
            {
                Database::close(qdb);
                return true;
            }
        }
    }
} 
```

是否有可能以某种方式在类中存储可重用的 QSqlDatabase 对象？如果是这样，怎么做？非常感谢您的帮助！

**编辑 1**

从我使用函数的设计器创建的一些代码。

主窗口.cpp

```
void MainWindow::on_pushButton_24_clicked()
{
    Database db;
    bool b = db.createStructure();

    QMessageBox::information(this, "test", QString(b));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:46:31.830

我会坚持使用您的原始代码进行解释。

* * *

免责声明：*我没有编译任何我的建议，如果有语法错误，请原谅我。*

* * *

首先，您可能正在寻找的是[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)（我不再那么喜欢它了，但出于您的目的，有人可能会争辩说它可以被认为是合适的）：

您必须在类定义中包含以下内容：

```
class Database : public QObject
{
    Q_OBJECT

public:
    static Database* instance();
private:
    static Database* m_instance;
    Database();
    ~Database() {}; // it can be necessary to have this public in some cases, if 
                    // you ever get a linker error related to deletion, this is 
                    // probably the reason.

public: 

    // FUNCTIONS
    ...
}; 
```

以及您的 .cpp 文件中的以下内容：

```
// init singleton pointer to NULL
Database* Database::m_instance = NULL;

Database* Database::instance()
{
    if( !m_instance )
    {
        m_instance = new Database();
    }
    return m_instance;
} 
```

然后，您可以使用例如访问该单例

```
if( Database::instance()->createStructure() )
{
    w.show();
} 
```

这是做什么的？在程序开始时，行

```
Database* Database::m_instance = NULL; 
```

将您的 m_instance 变量初始化为`NULL`. 第一次调用`Database::instance()`它时，您会意识到 m_instance 仍然为 NULL 并创建一个新对象并`m_instance`指向该对象。从那时起，将始终返回指向该对象的指针，但不会`Database`再创建任何对象。

* * *

在您的`createStructure()`函数中，`commit()`即使出现错误，您的数据库也是如此。通常的程序是`commit()`在成功和`rollback()`失败时。在修复它之前，请务必阅读下一点：

* * *

我建议的第三件事是，当您经常看到多次出现相同的行时，要习惯于怀疑。这通常需要一个子功能。

我在谈论

```
Database::close();
return false; 
```

看看我是如何`createStructure()`通过引入另一种方法并`else{ }`省略不必要的地方来重写您的方法的：

```
bool Database::createStructure()
{
    QStringList commands;

    commands.append("CREATE TABLE...;");
    commands.append("CREATE TABLE...;");
    commands.append("CREATE TABLE...;");

    if (!Database::open()) return false;

    // at this point you can be sure the database is open

    if (!Database::transaction())
    { 
        Database::close();
        return false;
    }

    // at this point you can be sure the database is open and a transaction was started

    if (!Database::executeCommands(commands))
    {
        // an error occurred - we need to rollback what we did so far
        Database::rollback();
        Database::close();
        return false;
    }

    // everything was executed properly, but the transaction is still active
    // => commit the changes we've made
    bool committed = Database::commit();

    // no matter if the commit was successful or not, close the database,
    // then return the result we've stored
    Database::close();
    return committed;
}

bool Database::executeCommands(const QStringList& commands)
{
    // This method simply executes the queries and is relieved from
    // transaction-related code.

    foreach(QString command, commands)
    {
        QSqlQuery query;
        bool prepared = query.prepare(command);

        if(!prepared) return false;

        if(!query.exec()) return false;        
    }
    return true;
} 
```

这可以进一步重构，这只是使您的代码更易于遵循的示例，因此通常不易出错。

# java - 如何使用 ActivityManager 和 PackageManager 在列表视图中显示正在运行的应用程序图标？

> ID：14890753
> 
> 赞同：1
> 
> 时间：2013-02-15T08:32:14.707
> 
> 标签：java, android, android-package-managers, activity-manager

我正在尝试制作一个应用程序.. - 在列表视图中显示当前正在运行的应用程序图标 - 单击列表视图上显示正在运行的应用程序图标进行切换的项目

但我不知道该怎么做，我已经用谷歌搜索了很多，但我发现我应该使用 ActivityManager.RunningTaskinfo 和 Packagemanager 来做这些

云你帮我做这些？我如何在 listview 中显示正在运行的应用程序图标并给 listview 单击事件（例如 OnItemClick）切换到在 listview 上单击的应用程序？

## [左侧面板.java]

```
package kr.hybdms.sidepanel;

import java.util.ArrayList;
import java.util.List;

import kr.hybdms.sidepanel.PanelArrayAdapter;
import kr.hybdms.sidepanel.R;

import kr.hybdms.sidepanel.util.SystemUiHider;

import android.app.Activity;
import android.content.pm.PackageInfo;

import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.view.Gravity;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.Toast;

/**
 * An example full-screen activity that shows and hides the system UI (i.e.
 * status bar and navigation/system bar) with user interaction.
 * 
 * @see SystemUiHider
 */
public class LeftSidePanel extends Activity implements
OnItemClickListener {
ListView listView;
List<PanelItemDetail> rowItems;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_left_side_panel);

List<PackageInfo> packs = getPackageManager().getInstalledPackages(10);
Drawable[] images = new Drawable[packs.size()];
for(int i=0;i<packs.size();i++) {
    PackageInfo p = packs.get(i);
    images[i]= p.applicationInfo.loadIcon(getPackageManager());
 }

rowItems = new ArrayList<PanelItemDetail>();
listView = (ListView) findViewById(R.id.panelcontents);
PanelArrayAdapter adapter = new PanelArrayAdapter(this,
        R.layout.panelrow, rowItems);
listView.setAdapter(adapter);
listView.setOnItemClickListener(this);
}

@Override
public void onItemClick(AdapterView<?> parent, View view, int position,
    long id) {
Toast toast = Toast.makeText(getApplicationContext(),
    "Item " + (position + 1) + ": " + rowItems.get(position),
    Toast.LENGTH_SHORT);
toast.setGravity(Gravity.BOTTOM|Gravity.CENTER_HORIZONTAL, 0, 0);
toast.show();
}
} 
```

* * *

## [面板阵列适配器.java]

```
package kr.hybdms.sidepanel;

import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;

public class PanelArrayAdapter extends ArrayAdapter<PanelItemDetail> {
    Context context;
    public PanelArrayAdapter(Context context, int resourceId,
            List<PanelItemDetail> items) {
        super(context, resourceId, items);
        this.context = context;
    }
    /*private view holder class*/
    private class ViewHolder {
        ImageView imageView;
    }
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder = null;
        PanelItemDetail rowItem = getItem(position);
        LayoutInflater mInflater = (LayoutInflater) context
                .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.panelrow, null);
            holder = new ViewHolder();
            holder.imageView = (ImageView) convertView.findViewById(R.id.appicon);
            convertView.setTag(holder);
        } else
            holder = (ViewHolder) convertView.getTag();
        holder.imageView.setImageDrawable(rowItem.getImageId());
        return convertView;
    }
} 
```

* * *

## [PanelItemDetail.java]

```
package kr.hybdms.sidepanel;

import android.graphics.drawable.Drawable;

public class PanelItemDetail {
    private Drawable imageId;
    public PanelItemDetail(Drawable images) {
        this.imageId = images;
    }
    public Drawable getImageId() {
        return imageId;
    }
    public void setImageId(Drawable imageId) {
        this.imageId = imageId;
    }
} 
```

* * *

## [panelrow.xml]

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

<ImageView
    android:id="@+id/appicon"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_margin="10dp" />

    </RelativeLayout> 
```

* * *

## [activity_left_side_panel.xml]

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".LeftSidePanel" >

    <ImageView android:id="@+id/transparentbackground"
        android:src="@drawable/detector"
        android:adjustViewBounds="true"
        android:gravity="center_vertical"
        android:scaleType="fitXY"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_x="0dp" 
        android:layout_y="0dp" 
        android:layout_marginLeft="100dp"/>

    <ImageView
        android:id="@+id/panelbackground"
        android:layout_width="100dp"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:scaleType="fitXY"
        android:src="@drawable/panelbg" />

    <ListView
        android:id="@+id/panelcontents"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignRight="@+id/panelbackground"
        android:layout_centerVertical="true"
        android:listSelector="@drawable/panel_item_bg"
        android:divider="#000000" >

    </ListView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:48:28.537

[尝试阅读](http://impressive-artworx.de/2011/list-all-installed-apps-in-style/)本教程，它可能会对您有所帮助 ！

# php - 如何防止 攻击？

> ID：14890757
> 
> 赞同：5
> 
> 时间：2013-02-15T08:32:37.373
> 
> 标签：php, apache, security

我认为黑客（或脚本小子）利用网站代码库的泄漏攻击了我的网站。数据库中的帖子已更改，因此它们包含以下 html：

```
<meta http-equiv="refresh" content="0;url=http://example.com"/> 
```

但我现在无法重写系统。未来有哪些策略可以防止这种情况发生？

我正在考虑将管理脚本迁移到允许访问某些域的子域。或者使用 mod_security SecFilterScanPOST 并扫描所有包含 http-equiv 等的发布请求。或者只允许来自我的服务器或所有服务器的发布请求？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:55:56.607

第一步可能是调查代码在哪里注入，这可以帮助您识别根子句是什么 -

1.  如果您的网站从数据库中获取内容，并且注入的标签作为数据库内容的一部分被检索，则您的网站可能存在 SQL 注入漏洞或其他漏洞，允许攻击者更改那里的内容。

2.  如果每个 PHP 文件中都有标签，则意味着攻击者可以访问您的文件系统。他可以访问您的 FTP 或 telnet 或任何其他管理控制台，或者您的网站存在允许攻击者在网站上修改/创建文件的漏洞。

3.  您的服务器也可能存在允许攻击者进行此类访问的漏洞。

在您确定根本原因后，相应地修复它 =)

以下是一些通用建议，可帮助防止同样的事情再次发生：

1.  通过代码审查、渗透测试或一些自动扫描检查您的网站和服务器是否存在漏洞，并相应地修复它们。

2.  及时安装更新、修补程序、安全补丁。保持更新，更新，更新，更新......

3.  在文件系统上分配适当的文件夹权限（读写、只读、无访问权限），并仅向用户授予必要的权限（最小权限原则）。

    *   例如，您可以考虑使 Web 服务器用户只能读取除上传文件夹之外的所有 Web 内容文件夹。
    *   配置文件通常不需要 Web 服务器用户可写。通常它们只能由管理员写入。还要注意不要让此类文件的内容可以通过 Web 服务器访问（即通过您的 Web 服务器的 http:// url）。将它们直接放在 Web 内容根目录之外是个好主意
    *   将任何上传文件夹放在 Web 内容根目录之外也是一个好主意
    *   也挖掘文件的所有者，因为所有者可以自由更改文件的权限。
4.  使用第 3 方组件（例如 Wordpress/Joomla 插件）时要小心。仅在您信任发布者的情况下使用。仅从主站点下载。记住也要让它们保持最新。如有必要，禁用并删除它们

5.  限制对管理控制台和服务的访问，如 FTP、Telnet、数据库管理控制台（例如 phpMyAdmin）等。为它们分配好的密码。最好不要让任何未经授权的人访问它（例如使用防火墙或配置中设置的 IP 限制，或将其隐藏在 VPN 后面）

    *   实际上，在传输密码（尤其是管理员密码）时，您应该避免使用任何明文协议。它们通常有一个加密的替代方案，例如 Telnet -> SSH、FTP -> SFTP/FTP、HTTP/HTTPS。
    *   确实应该避免从 Internet 访问数据库端口。只有极少数情况下你会需要这个。在大多数情况下，将其配置为在环回接口上侦听...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T09:38:16.767

[有关XSS](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)和[输入验证](https://www.owasp.org/index.php/Input_Validation_Cheat_Sheet)，请参阅 OWASP 。

不要清理您的输入-您希望`<meta http-equiv="refresh" content="0;url=http://example.com"/>`数据库中的原始数据-而是将其视为不受信任的数据并在输出时对其进行转义/解除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T09:02:35.653

如果您不想在从 db 读取数据时转义数据（您应该这样做），这是一个懒惰的解决方案。

```
function escape_deep(&$value)
{
 $value = htmlspecialchars($value);
}

array_walk_recursive($_GET, 'escape_deep');
array_walk_recursive($_POST, 'escape_deep'); 
```

# emacs - 从emacs中的行尾删除一个字符

> ID：14890759
> 
> 赞同：0
> 
> 时间：2013-02-15T08:32:43.290
> 
> 标签：emacs, text-editor

我想使用[这些答案](https://stackoverflow.com/q/4870704/671013)在`%`使用`emacs`. 但是，为了避免像`%%`我这样的结尾，我必须首先删除`%`该区域中行尾出现的所有 。例如

```
foo%
foo2
foo3%
foo4%%
bar
bar% 
```

应该成为

```
foo
foo2
foo3
foo4
bar
bar 
```

请注意，并非该区域中的所有行都`%`以`%`. 也就是说，不能简单地删除每一行的最后一个字符。我想这很简单，但是我对emacs新手太了解了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:50:36.457

`C-M-%``%+``C-q``C-j``Enter``C-q``C-j``!`调用`query-replace-regexp`用换行符替换任意数量的 %'s 后跟换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:09:53.193

您可以直接将这两个步骤合二为一，只用一个替换行尾的任何现有 % 字符。

```
C-M-%   <- query-replace-regexp
%*$     <- 0 or more %s at end of line
Enter
%       <- by only one %
Enter
!       <- apply to all (optional, see below) 
```

如果您使用瞬态标记模式，则该命令将在活动区域​​内运行。否则，您可以选择`narrow-to-region`( `C-x n n`) 以确保它不会影响文件的其他部分。

# javascript - 选择 HTML5 数据列表中的项目时是否可以执行一些代码？

> ID：14890760
> 
> 赞同：5
> 
> 时间：2013-02-15T08:32:46.923
> 
> 标签：javascript, html, events, html-datalist

例如：

```
<input type="text" list="sample"/>
<datalist id="sample">
    <option value="item 1"/>
    <option value="item 2"/>
</datalist> 
```

选择数据列表中的项目时是否可以捕获事件？在输入元素上调用 onclick 或 onchange 不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:35:12.717

```
 $(document).ready(function() {

$("#search").on("input", function(e) {
var val = $(this).val();
if(val === "") return;
....
    var dataList = $("#searchresults");
dataList.empty();
 your code...

}); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:00:28.043

`Datalist`用于`storage and Auto list Purpose`...它`doesn't have Selected Events`..

如果您想获取数据列表中的项目...只需循环并获取数据...

```
$('#sample option').each(function(index) {
 alert($(this).val());
}); 
```

# php - php中带数据库的倒计时计时器

> ID：14890765
> 
> 赞同：-6
> 
> 时间：2013-02-15T08:33:06.997
> 
> 标签：php, html, mysql

如何使用 PHP 在表单中插入倒数计时器？

我想将该目标时间存储到我的 mysql 数据库中。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:05:08.177

您可以将目标时间存储在 Mysql 中，您可以在 PHP 中获取该目标时间并将其分配给 Javascript 代码，因此 javascript 将显示倒数计时器。

对于倒数计时器，您可以从这里获取任何 jquery 脚本： [http ://www.tripwiremagazine.com/2012/11/jquery-countdown-scripts.html](http://www.tripwiremagazine.com/2012/11/jquery-countdown-scripts.html)

# c# - 从 xml 文件中提取数据到 c# 中的列表视图

> ID：14890767
> 
> 赞同：-2
> 
> 时间：2013-02-15T08:33:15.077
> 
> 标签：c#, xml

如何将数据从xml文件拉到c#中的列表视图，获取xml文档标签内的数据..

**我有一个这样的xml文件..**

```
<?xml version="1.0"?>
<?xml-stylesheet href="file:///C:/Program Files (x86)/Nmap/nmap.xsl" type="text/xsl"?>
<!-- Nmap 6.25 scan initiated Fri Feb 15 13:34:46 2013 as: nmap -T4 -A -v -oX - 10.100.95.0 10.100.95.255 -->
<nmaprun scanner="nmap" args="nmap -T4 -A -v -oX - 10.100.95.0 10.100.95.255" start="1360915486" startstr="Fri Feb 15 13:34:46 2013" version="6.25" xmloutputversion="1.04">
<scaninfo type="syn" protocol="tcp" numservices="1000" services=""/>
<verbose level="1"/>
<debugging level="0"/>
<taskbegin task="ARP Ping Scan" time="1360915488"/>
<taskend task="ARP Ping Scan" time="1360915489" extrainfo="2 total hosts"/>
<host><status state="down" reason="no-response" reason_ttl="0"/>
<address addr="10.100.95.0" addrtype="ipv4"/>
</host>
<host><status state="down" reason="no-response" reason_ttl="0"/>
<address addr="10.100.95.255" addrtype="ipv4"/>
</host>
<runstats><finished time="1360915489" timestr="Fri Feb 15 13:34:49 2013" elapsed="3.16" summary="Nmap done at Fri Feb 15 13:34:49 2013; 2 IP addresses (0 hosts up) scanned in 3.16 seconds" exit="success"/><hosts up="0" down="2" total="2"/>
</runstats>
</nmaprun> 
```

我想提取列表视图网格中地址标签内的所有**addr**地址和**addrtype**列表，并在列表视图的每一行中相应地显示它..

列表应该是这样的.. Addr Addrtype 192.168.1.45 ipv4 192.164.4.56 ipv4

ETC..

请帮助我提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:44:19.150

答案 1.- 使用 linq to XML 并在列表或集合中收集数据，之后您可以将数据与列表视图控件绑定。

答案 2.- 使用数据集

```
 Dim xmlDatapath As String = "yourxml file path\111.xml"

    Dim xmlData As String = File.ReadAllText(xmlDatapath)
    Dim stream As StringReader = New StringReader(xmlData)
    Dim reader As XmlTextReader = New XmlTextReader(stream)
    Dim xmlDS As New DataSet()
    xmlDS.ReadXml(reader) 
```

并将您的数据与列表视图控件绑定。我希望这能帮到您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:53:56.553

```
var xdoc = XDocument.Load(@"c:\temp\arg\s.xml");
var addrs = xdoc.Descendants().Elements("address")
               .Select(y => new {
                                 Name = y.Attribute("addr").Value, 
                                 Value =   y.Attribute("addrtype").Value
                                }); 
```

这将为您提供所需的所有地址

```
foreach(var addr in addrs)
{
    ListViewItem item1 = new ListViewItem(addr.Name);
    item1.SubItems.Add(addr.Value);
    //We have a ListView named listview
    listview.Items.Add(item1);
} 
```

或者我们可以像这样更简单

```
var addrs = xdoc.Descendants().Elements("address")
                   .Select(y => {
                                    ListViewItem item1 = new ListViewItem(y.Attribute("addr").Value);
                                    item1.SubItems.Add(y.Attribute("addrtype").Value);
                                    return item1;
                                });

listView.Items.AddRange(addrs); 
```

# android - 三星 Galaxy 的 Android 相机出现纵向错误

> ID：14890768
> 
> 赞同：1
> 
> 时间：2013-02-15T08:33:18.240
> 
> 标签：android, android-camera, samsung-galaxy

如何在所有设备中保持相机处于纵向模式？我的应用高于 2.2

我试过了

![在此处输入图像描述](../Images/3be4f7675e1b648d8dd92e1445c4b589.png)

```
public void setRotation(int rotation) {

    int degrees = 0;
    switch (rotation) {
    case Surface.ROTATION_0:
        degrees = 0;
        break;
        case Surface.ROTATION_90:
        degrees = 90;
        break;
        case Surface.ROTATION_180:
        degrees = 180;
        break;
        case Surface.ROTATION_270:
        degrees = 270;
        break;
    }

    int result;

    CameraInfo cameraInfo = new Camera.CameraInfo();
    Camera.getCameraInfo(cameraId, cameraInfo);

    if (cameraInfo.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
        result = (cameraInfo.orientation + degrees) % 360;
        result = (360 - result) % 360; // compensate the mirror
    } else { // back-facing
        result = (cameraInfo.orientation - degrees + 360) % 360;
    }

    mCamera.stopPreview();
    mCamera.setDisplayOrientation(result);
    mCamera.startPreview();
} 
```

但三星设备忽略`mCamera.setDisplayOrientation(90)`

**编辑：**

我发现忽略了这一点的设备：

Galaxy y(GT-S5360)(Android 2.3.6)

银河王牌(GT-S5830)(Android 2.6.3)

但 Galaxy S2 和其他更高版本的手机运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-30T04:58:23.433

你可以试试

```
 public int getCorrectCameraOrientation(CameraInfo info, Camera camera) {

  int rotation = context.getWindowManager().getDefaultDisplay().getRotation();
  int degrees = 0;

  switch(rotation){
     case Surface.ROTATION_0:
        degrees = 0;
        break;

     case Surface.ROTATION_90:
        degrees = 90;
        break;

     case Surface.ROTATION_180:
        degrees = 180;
        break;

     case Surface.ROTATION_270:
        degrees = 270;
        break;

  }

  int result;
  if(info.facing==Camera.CameraInfo.CAMERA_FACING_FRONT){
    result = (info.orientation + degrees) % 360;
    result = (360 – result) % 360;  
  }else{
    result = (info.orientation – degrees + 360) % 360;
  }

  return result;
} 
```

将此方法用作

```
mCamera.setDisplayOrientation(getCorrectCameraOrientation(mCameraInfo, mCamera)); 
```

这不足以进行旋转处理，您还需要执行以下步骤

```
mCamera.getParameters().setRotation(getCorrectCameraOrientation(mCameraInfo, mCamera)); 
```

# ant - 蚂蚁运行任务：[java] java.lang.NoClassDefFoundError: org/apache/log4j/Logger

> ID：14890772
> 
> 赞同：0
> 
> 时间：2013-02-15T08:33:26.080
> 
> 标签：ant, jar, runtime

我尝试从 ant 运行我的应用程序，该应用程序正在使用 log4j jar 我现在有这个 ant 任务：

```
<property name="main-class"  value="com.controller.core.Controller"/>
<target name="dist"  
        description="generate the distribution" >
    <jar jarfile="${dist}/lib/controller.jar" basedir="${build}">
        <manifest>
            <attribute name="Main-Class" value="${main-class}"/>
        </manifest>
    </jar>
</target>
     <path id="class.path">
          <fileset dir="..\lib">
            <include name="**/*.jar" />
          </fileset>      
      </path>
     <target name="run">
            <java jar="${dist}/lib/controller.jar" fork="true" >         
            <classpath refid="class.path" />
            <classpath>
                <path location="../lib/misc"/>
            </classpath>
           </java>      
      </target> 
```

或者我什至给了它完整的路径，但仍然是同样的错误

```
<target name="run">
        <java jar="${dist}/lib/controller.jar" fork="true" >         
            <classpath>
                <path refid="test.classpath"/>
                <path location="d:\dev\svn\trunk\lib\misc\log4j.jar"/>
            </classpath>     
        </java>
</target> 
```

log4j 在 ../lib/misc 路径中。但我仍然收到此错误：

```
run:
     [java] java.lang.NoClassDefFoundError: org/apache/log4j/Logger
     [java]     at com.controller.core.Controller.<clinit>(Unknown Source)
     [java] Caused by: java.lang.ClassNotFoundException: org.apache.log4j.Logger
     [java]     at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
     [java]     at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
     [java]     at java.security.AccessController.doPrivileged(Native Method)
     [java]     at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
     [java]     at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
     [java]     at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
     [java]     at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
     [java]     ... 1 more
     [java] Exception in thread "main"
     [java] Java Result: 1 
```

现在，当我使用 -v 标志运行 ant 时，它给了我这个消息：

```
[java] When using 'jar' attribute classpath-settings are ignored. See the manual for more information.
    [java] Executing 'c:\Program Files (x86)\Java\jdk1.7.0_05\jre\bin\java.exe' with arguments:
    [java] '-classpath'
    [java] 'd:\dev\svn\trunk\lib\misc\log4j.jar'
    [java] '-jar'
    [java] 'D:\dev\svn\trunk\controller\dist\lib\controller.jar' 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T15:37:34.773

正如它所说：使用`jar`属性时，提供的类路径将被忽略，因为 jar 文件会覆盖它。ant 手册链接到 java 文档，上面写着：

> 使用此选项 [-jar] 时，JAR 文件是所有用户类的来源，其他用户类路径设置将被忽略。

相反，在类路径中包含 jar 并使用 classname 属性。例如，

```
<java classname="${main-class}" fork="true" >         
  <classpath>
    <path refid="class.path" />
    <pathelement location="../lib/misc"/>
    <pathelement location="${dist}/lib/controller.jar"/>
  </classpath>
</java> 
```

# angularjs - 在 AngularJS 中更改路由（动画、加载器等）时触发回调

> ID：14890784
> 
> 赞同：10
> 
> 时间：2013-02-15T08:34:20.433
> 
> 标签：angularjs, angularjs-directive

*我对 AngularJS 比较陌生。*

**当路由改变时，ng-view 改变内容。我希望能够做的是在路线改变时挂钩某些行为。**

1.  例如，我希望能够为我们要离开的视图设置动画（淡出，并向左滑动），当下一个视图可用时，淡入淡出并将视图滑入。这可以通过添加一个类来实现在路由加载时正文，并在路由更改成功时删除一个类

2.  我希望能够将视图堆叠在当前视图的右侧，这样当一个视图向前移动时，下一个视图首先加载到当前视图的右侧，然后视口向右滑动，因此当前视图视图几乎滑出视图，下一个滑入视图（Windows 手机就像画布外导航）

$routeProvider 是执行此操作的正确位置吗？

有没有大师可以为我指明正确的方向？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T18:15:04.250

经过更多研究，为此目的触发了一些事件。

```
$scope.$on('$routeChangeStart', function(scope, next, current){
   //...
});

$scope.$on('$routeChangeSuccess', function(scope, next, current){
   //...
}); 
```

如果一个问题是动画某些东西（例如路线更改），我建议使用 ngAnimate。[在此处](http://www.yearofmoo.com/2013/04/animation-in-angularjs.html#animating-ng-view)阅读有关它的更多信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T11:39:43.737

您可以在根范围级别安装监视以捕获位置变化：

```
$rootScope.$watch(function {
   return $location.path();
   },  
   function(newValue, oldValue) {  
      if (newValue != oldvalue) {
         // here you can do your tasks
      }
      else {
      }
   },
   true); 
```

# sql - 根据单元格的部分、日期和计数删除表格中的行

> ID：14890792
> 
> 赞同：1
> 
> 时间：2013-02-15T08:34:30.997
> 
> 标签：sql, sql-server-2008-r2

我有一个名为 computer 的表，如下所示：

```
DomainPrefixedComputername | LastStartUpDate
OLDDOMAIN\Computer1        |2012-01-25
OLDDOMAIN\Computer2        |2012-02-20
OLDDOMAIN\Computer3        |2012-03-03
OLDDOMAIN\Computer4        |2012-04-15
OLDDOMAIN\Computer5        |2012-12-18
\Computer1                 |2012-01-27 (computer was inserted when it had no domain affinity)
NEWDOMAIN\Computer1        |2012-02-01
NEWDOMAIN\Computer2        |2012-02-22
NEWDOMAIN\Computer3        |2012-03-23 
```

一个进程要么插入新的 DomainPrefixedComputers，要么更新现有的。无法更改进程或数据库。

如果另一个域中有匹配的计算机，我正在尝试做的是删除包含具有最旧 LastStartUpDate 的计算机的行。由于计算机可能被放回旧域中，因此仅删除以 OLDDOMAIN 为前缀的行是不够的。我也不想删除有利于非前缀计算机的行。

以下语句为我提供了无前缀计算机的列表，以及找到的计算机数量：

```
SELECT 
Replace(
Replace(
Replace(DomainPrefixedComputername, 'NEWDOMAIN\', '')
, 'OLDDOMAIN\', '' )
, '\', '' ) AS TempDomainPrefixedComputername
, Count(DomainPrefixedComputername) AS _count_
FROM Computers
GROUP BY 
Replace(
Replace(
Replace(DomainPrefixedComputername, 'NEWDOMAIN\', '')
, 'OLDDOMAIN\', '' )
, '\', '' ) 
```

产量：

```
TempDomainPrefixedComputername | _count_
Computer1                      | 3
Computer2                      | 2
Computer3                      | 2
Computer4                      | 1
Computer5                      | 1 
```

这就是我表达我需要的方式：

> 如果存在另一台具有相同名称的计算机且另一台计算机的前缀为 OLDDOMAIN\ 或 NEWDOMAIN\ ，则删除具有最旧 LastStartUpDate 的行。

我的问题是：我怎样才能完成我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:15:45.637

试试这个：（在我的示例中，列名是 DomainPrefixedComputername > dom，LastStartUpDate > dt）[这是 SQL-Fiddle-Demo](http://sqlfiddle.com/#!3/fea12/20)

```
;with cte as (
  select dom,dt, 
  case when charindex('\',dom,1)=1 then 0 else 1 end hasDom,
  row_number() over (partition by 
                     substring(dom,charindex('\',dom,1)+1,len(dom)) 
                     order by dt desc) rn                   
  from T
)
delete from cte where rn<>1 and hasDom = 1

--Select * results after deleting
|                 DOM |         DT |
------------------------------------
| OLDDOMAIN\Computer4 | 2012-04-15 |
| OLDDOMAIN\Computer5 | 2012-12-18 |
|          \Computer1 | 2012-01-27 |
| NEWDOMAIN\Computer1 | 2012-02-01 |
| NEWDOMAIN\Computer2 | 2012-02-22 |
| NEWDOMAIN\Computer3 | 2012-03-23 | 
```

# ruby-on-rails - Rails 会话管理

> ID：14890795
> 
> 赞同：1
> 
> 时间：2013-02-15T08:34:50.253
> 
> 标签：ruby-on-rails, session, cookies

我正在尝试根据我继承的代码实现记住我的登录选项。

我有以下内容：

```
def login 
if request.post?
  if params[:remember_me]
    # this is where user checked the remember me box
    cookies[:login] = { :value => "XJ12", :expires => Time.now + 120}
  end

    session_user = User.authenticate(params[:user][:email], params[:user][:password])   
    if session_user

      session[:user] = session_user.id
      @user=User.find(session[:user])
      @user.update_attributes(:last_login_time => Time.now(),:is_logged => true)
      @user.save
      flash[:message]  = "Login successful."
      redirect_to "/admin"
    else
      flash[:warning] = "Your email or password is incorrect. Please re-enter."
    end
  end
end 
```

结尾

无论我做什么，cookie 都会自动设置（EXPIRES: session）。如果用户没有选择记住我选项，我想设置 cookie 10 分钟。如果他选择记住我，那么我会设置更长的时间。我可以得到一些指导吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:39:31.210

首先，Time.now + 120 距离现在只有 2 分钟，您应该将其设置为稍后的值。

然后，这可以是您的流程：

1.  尝试获取用户时，检查是否设置了 cookie（我建议您为每个用户创建一个唯一的随机字符串，因为可以在客户端修改 cookie）
2.  如果设置了cookie，则记录相应的用户
3.  如果没有，请尝试会话中的基本日志
4.  连接时，如果用户已选中该框，则注册 cookie

# javascript - django / javascript / jquery / html / css：汇总一个表单的内容以进行显示

> ID：14890799
> 
> 赞同：1
> 
> 时间：2013-02-15T08:35:31.930
> 
> 标签：javascript, jquery, html, css, django

我将为一个网页构建一个 django 表单，允许用户输入两个数字：

```
 <form action="blah" method="post">
    {% csrf_token %}
    number1:
    <input type="number" name="number1" value="{{ number1 }}" />
    number2:
    <input type="number" name="number2" value="{{ number2 }}" />

    <input type="submit" value="Submit" /> 
```

在页面的其他地方，我想在用户输入这两个数字时显示它们的乘积。最有效的方法是什么？

* * *

编辑（2）：我能够通过对提供的代码进行轻微修改来完成所有工作：

```
{% if [test] %} 

<div style="padding-top: 10%; padding-left: 12%">
    <div class="row-fluid" >
        <div class="span10 hero-unit" >

         ...

        </div>
    </div>
</div>

{%  else %}

<div style="padding-top: 10%; padding-left: 20%;">
    <div class="row-fluid" style="vertical-align: middle">
        <div class="span8 hero-unit">

            ...

            <form action="/" method="post">
                {% csrf_token %}
                {% if next %}
                    <input type="hidden" name="next" value="{{ next }}" />
                {% endif %}
                <div class="question"><<Question1>>
                <input type="number" class="pull-right" name = "question1" value="{{ question1 }}" />
                </div>
                <br>
                <div class="question"><<Question2>>
                <input type="number" class="pull-right" name="question2" value="{{ question2 }}" />
                </div>
                <br>
                <div style="padding-right: 10%">
                <input type="submit" class="btn btn-primary button-text pull-right" value="Submit" />
                </div>
                <div id="product_output_container" style="padding-left: 10%;font-weight: bold" ></div>

                <br>
            </form>

        </div>
    </div>
</div>

{% endif %}

<!-- jquery -->

<script type="text/javascript">
    $(document).ready(
            function(){

                var refreshProduct = function(){

                    var question1 = parseInt($('[name="question1"]').val(),10);
                    var question2 = parseInt($('[name="question2"]').val(),10);

                    var product = question1 * question2;

                    var product_container = $('#product_output_container');
                    if (!isNaN(product)){
                        product_container.text(product)
                    }
                    else{
                        product_container.text("")
                    }
                }

                $('[name="question1"]').keyup(refreshProduct);
                $('[name="question2"]').keyup(refreshProduct);
            }
    );
</script>

{% endblock %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:41:02.073

将 jquery keyup 事件附加到您的每个输入。让事件将两个输入相乘并将总数放入输出元素中。

```
$('form input.pull-right').keyup(function() {
    var $inputs = $('form input.pull-right');
    var product = 1;
    for (var i = $inputs.length; i > 0; i--) {
        product *= parseInt($inputs[i].val());
    }
    $('form input.output').val(total);
} 
```

这是关于 jquery 的[keyup](http://api.jquery.com/keyup/)、[selectors](http://api.jquery.com/category/selectors/)和[val](http://api.jquery.com/val/)的文档。

顺便说一句，如果您添加更多输入（类 pull-right），则此代码将起作用。代码循环通过它们所有..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:43:51.650

如果它只是 2 个数字的乘积，你可以做

```
var refreshProduct = function(){
$('#product_output_container').val(parseInt($('[name="number1"]').val(),10)*parseInt($('[name="number2"]').val(),10));
}
$('[name="number1"]').keyup(refreshProduct);
$('[name="number2"]').keyup(refreshProduct); 
```

如果它变得更复杂，你应该考虑使用像 knockout.js 这样的模板库

这是一个工作示例：

```
 <form>

                <input type="number" name="question1" />

                <input type="number" name="question2" />

                <input type="number" class="output"/>
            </form>

<script>

    $(document).ready(function(){
        refreshProduct = function(){
            $('.output').val(parseInt($('[name="question1"]').val(),10)*parseInt($('[name="question2"]').val(),10));
        }

        $('[name="question1"]').keyup(refreshProduct);
        $('[name="question2"]').keyup(refreshProduct);
    });
</script> 
```

# iphone - 无法以编程方式将正确大小的图像添加到 UIBarButtonItem

> ID：14890801
> 
> 赞同：0
> 
> 时间：2013-02-15T08:35:48.817
> 
> 标签：iphone, ios, objective-c

我在尝试使用图像而不是 UIBarButtonItems 的标题时遇到了麻烦。我的理解是，为 UIBarButtonItem 设置图像会自动将图像缩放为 UIBarButtonItem 的正确大小。这是有道理的，因为似乎没有任何方法可以调整图像的大小（您无法设置 imageView，或添加子视图或任何东西）。但是，当我使用两个完全相同尺寸（24x24）的不同图像时，我会得到不同的结果：

```
myAddButton = [[UIBarButtonItem alloc]initWithImage:[UIImage imageNamed:@"plus.png"] style:UIBarButtonSystemItemAdd target:self action:@selector(addButtonTapped)];
self.navigationItem.rightBarButtonItem = myAddButton;

myLeftButton = [[UIBarButtonItem alloc]initWithImage:[UIImage imageNamed:@"gear.png"] style:UIBarButtonSystemItemAdd target:self action:@selector(settingsButtonTapped)];
self.navigationItem.leftBarButtonItem = myLeftButton; 
```

导致以下情况：

![在此处输入图像描述](../Images/badf44af0c9308463ed900eef7f97940.png)

同样，gear.png 和 plus.png 的大小相同，均为 24x24。我已经在 Photoshop 中确认了这一点。

现在，如果我采用完全相同的代码行，只需将 gear 替换为 plus：

```
myAddButton = [[UIBarButtonItem alloc]initWithImage:[UIImage imageNamed:@"plus.png"] style:UIBarButtonSystemItemAdd target:self action:@selector(addButtonTapped)];
self.navigationItem.rightBarButtonItem = myAddButton;

myLeftButton = [[UIBarButtonItem alloc]initWithImage:[UIImage imageNamed:@"plus.png"] style:UIBarButtonSystemItemAdd target:self action:@selector(settingsButtonTapped)];
self.navigationItem.leftBarButtonItem = myLeftButton; 
```

我明白了：

![在此处输入图像描述](../Images/af6f4a13f5e179e185958ae8cc6e5401.png)

颜色的差异是由于一个被启用而另一个没有。

我只想让它们成为 UIButtons，这样我就可以使用 imageViews 并自己手动设置它，除了我喜欢使用 UIBarButtonItem 给我的背景，我不想在 Photoshop 中重新创建它。

关于这里发生了什么以及如何解决它的任何想法？

提前致谢。

编辑：

事实证明，这个问题是因为我需要清除我的构建并从模拟器中删除应用程序，因为它是从我之前使用的 48x48 图像中提取的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:46:22.060

确保您的项目中有正确的图像。而且，是的，有时尝试清理您的项目。从设备/模拟器中删除应用程序也很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T08:44:59.623

您为用于创建按钮的方法传递了不正确的样式：

这里：

```
[[UIBarButtonItem alloc]initWithImage:[UIImage imageNamed:@"plus.png"] style:UIBarButtonSystemItemAdd target:self action:@selector(settingsButtonTapped)]; 
```

您正在使用`initWithImage:style:target:action`，但您分配的样式值`UIBarButtonSystemItemAdd`不是允许的值之一。该方法的文档说它必须`UIBarButtonItemStyle`是定义为的其中之一。尝试使用其中一种来代替，看看你是否能得到你想要的效果。

```
typedef enum {
   UIBarButtonItemStylePlain,
   UIBarButtonItemStyleBordered,
   UIBarButtonItemStyleDone,
} UIBarButtonItemStyle; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:45:27.707

这是您可以尝试的

```
UIButton *leftButton = [ UIButton buttonWithType:UIButtonTypeCustom];    
        [leftButton setFrame:CGRectMake(0,0,44,44)]; // set the frame according to the image size
        [leftButton setBackgroundImage:[UIImage imageNamed:@"plus.png"] forState:UIControlStateNormal];
        [leftButton addTarget:self action:@selector(myActionMethod:)    forControlEvents:UIControlEventTouchUpInside];

        myLeftButton = [[UIBarButtonItem alloc]initWithCustomView:leftButton];
      self.navigationItem.leftBarButtonItem = myLeftButton; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T08:46:23.927

```
self.navigationItem.leftBarButtonItem =[[[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addButtonTapped)]autorelease]; 
```

# c# - prism中的交叉装配属性

> ID：14890803
> 
> 赞同：1
> 
> 时间：2013-02-15T08:35:57.463
> 
> 标签：c#, prism, .net-assembly, custom-attributes

我编写了一个在模块“ **DomainModule** ”中使用的自定义属性，该属性在引用的程序集**“Assembly A”**中使用了一个帮助器类 属性定义在那里：

```
[AttributeUsage(AttributeTargets.Class, AllowMultiple = true)]
public class RidTabAttribute : Attribute 
```

**辅助类“Assembly A”**使用“ **Assembly B”**或此处：`Zepers.Ribb` 将信息和资源带到模块视图中。

我收到下面提到的错误，请告诉我如何解决这个问题。

**错误行：（在域模块中）**

```
return type.GetCustomAttributes(typeof(T), true).OfType<T>(); 
```

**错误概要：**

```
{"Could not load file or assembly 'Zelopers.Ribb, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified.":"Zelopers.Ribb, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"} 
```

**堆栈跟踪 ：**

```
Could not load file or assembly 'Zelopers.Ribb, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' 
or one of its dependencies. The system cannot find the file specified.

   at System.Reflection.CustomAttribute._CreateCaObject(RuntimeModule pModule, IRuntimeMethodInfo pCtor, Byte** ppBlob, Byte* pEndBlob, Int32* pcNamedArgs)
   at System.Reflection.CustomAttribute.CreateCaObject(RuntimeModule module, IRuntimeMethodInfo ctor, IntPtr& blob, IntPtr blobEnd, Int32& namedArgs)
   at System.Reflection.CustomAttribute.GetCustomAttributes(RuntimeModule decoratedModule, Int32 decoratedMetadataToken, Int32 pcaCount, RuntimeType attributeFilterType, Boolean mustBeInheritable, IList derivedAttributes, Boolean isDecoratedTargetSecurityTransparent)
   at System.Reflection.CustomAttribute.GetCustomAttributes(RuntimeType type, RuntimeType caType, Boolean inherit)
   at System.RuntimeType.GetCustomAttributes(Type attributeType, Boolean inherit)
   at Zelopers.Prism.RibbonHelper.XamRibbonRegionBehavior.GetCustomAttributes[T](Type type) in e:\Wyrocco\ProjectsHall\Xz\Inside\Src\Common\Zepers.RibbonHelper\XamRibbonRegionBehavior.cs:line 58
   at Zelopers.Prism.RibbonHelper.XamRibbonRegionBehavior.ActiveViews_CollectionChanged(Object sender, NotifyCollectionChangedEventArgs e) in e:\Wyrocco\ProjectsHall\Xz\Inside\Src\Common\Zelopers.RibbonHelper\XamRibbonRegionBehavior.cs:line 40
   at System.Collections.Specialized.NotifyCollectionChangedEventHandler.Invoke(Object sender, NotifyCollectionChangedEventArgs e)
   at Microsoft.Practices.Prism.Regions.ViewsCollection.OnCollectionChanged(NotifyCollectionChangedEventArgs e)
   at Microsoft.Practices.Prism.Regions.ViewsCollection.NotifyAdd(IList items, Int32 newStartingIndex)
   at Microsoft.Practices.Prism.Regions.ViewsCollection.NotifyAdd(Object item)
   at Microsoft.Practices.Prism.Regions.ViewsCollection.OnItemMetadataChanged(Object sender, EventArgs e)
   at System.EventHandler.Invoke(Object sender, EventArgs e)
   at Microsoft.Practices.Prism.Regions.ItemMetadata.InvokeMetadataChanged()
   at Microsoft.Practices.Prism.Regions.ItemMetadata.DependencyPropertyChanged(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs args)
   at System.Windows.DependencyObject.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
   at System.Windows.DependencyObject.NotifyPropertyChange(DependencyPropertyChangedEventArgs args)
   at System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType)
   at System.Windows.DependencyObject.SetValueCommon(DependencyProperty dp, Object value, PropertyMetadata metadata, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType, Boolean isInternal)
   at System.Windows.DependencyObject.SetValue(DependencyProperty dp, Object value)
   at Microsoft.Practices.Prism.Regions.Region.Activate(Object view)
   at Microsoft.Practices.Prism.Regions.SingleActiveRegion.Activate(Object view)
   at Microsoft.Practices.Prism.Regions.ContentControlRegionAdapter.<>c__DisplayClass2.<Adapt>b__1(Object sender, NotifyCollectionChangedEventArgs e)
   at System.Collections.Specialized.NotifyCollectionChangedEventHandler.Invoke(Object sender, NotifyCollectionChangedEventArgs e)
   at Microsoft.Practices.Prism.Regions.ViewsCollection.OnCollectionChanged(NotifyCollectionChangedEventArgs e)
   at Microsoft.Practices.Prism.Regions.ViewsCollection.NotifyAdd(IList items, Int32 newStartingIndex)
   at Microsoft.Practices.Prism.Regions.ViewsCollection.NotifyAdd(Object item)
   at Microsoft.Practices.Prism.Regions.ViewsCollection.SourceCollectionChanged(Object sender, NotifyCollectionChangedEventArgs e)
   at System.Collections.Specialized.NotifyCollectionChangedEventHandler.Invoke(Object sender, NotifyCollectionChangedEventArgs e)
   at System.Collections.ObjectModel.ObservableCollection`1.OnCollectionChanged(NotifyCollectionChangedEventArgs e)
   at System.Collections.ObjectModel.ObservableCollection`1.InsertItem(Int32 index, T item)
   at System.Collections.ObjectModel.Collection`1.Add(T item)
   at Microsoft.Practices.Prism.Regions.Region.InnerAdd(Object view, String viewName, IRegionManager scopedRegionManager)
   at Microsoft.Practices.Prism.Regions.Region.Add(Object view, String viewName, Boolean createRegionManagerScope)
   at...Common\Zepers.Prism\Base\ModuleBase.cs:line 42
   at Microsoft.Practices.Prism.Modularity.ModuleInitializer.Initialize(ModuleInfo moduleInfo) 
```

**错误消息框中的错误位置：**

```
 {System.Object _CreateCaObject(System.Reflection.RuntimeModule, System.IRuntimeMethodInfo, Byte**, Byte*, Int32*)} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:07:12.727

在您调用以下行的项目中，

```
return type.GetCustomAttributes(typeof(T), true).OfType<T>(); 
```

添加`Zelopers.Ribb`作为参考。

# android - OutputStream write() 方法错误

> ID：14890806
> 
> 赞同：0
> 
> 时间：2013-02-15T08:36:15.317
> 
> 标签：android

```
public class Streams extends Thread {

    private BluetoothSocket clientSocket;
    private InputStream input;
    private OutputStream output;

    public void Streams(BluetoothSocket s)
    {
        clientSocket = s;
        try {
            input = s.getInputStream();
            output = s.getOutputStream();
            Log.d("RTR","Got Socket Streams");
        }catch (Exception e){
            Log.d("RTR","Unable to get Socket IO Streams");
        }

    }
    public void run()
    {
       //create an infinite loop for reading data.This method runs in seperate Thread

    }

    public void write(Byte[] bytes)
    {
        //output.write(bytes);
    }

} 
```

我在最后一条评论行出现错误`output.write(bytes)`。`Cannot resolve method java.lang.Byte[]'`.

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:38:26.970

`write()``OutputStream`接受不属于的`byte[]`对象的方法`Byte[]``java.lang`

```
 public void write(byte[] bytes)
 {
        //output.write(bytes);
 } 
```

看看[这里](http://docs.oracle.com/javase/6/docs/api/java/io/OutputStream.html#write%28byte%5B%5D%29)

# c - 一个很好的 C 随机数生成器

> ID：14890813
> 
> 赞同：10
> 
> 时间：2013-02-15T08:36:40.247
> 
> 标签：c, random

我需要一个好的随机数生成器用于我用 C 编写的程序。如果你有兴趣，它是一个分形火焰生成器。尽管我过去使用相同的算法取得了成功，但我的图像非常粗糙。我终于意识到，不同之处在于我使用的随机数生成器。令人难以置信的是，它产生了巨大的差异。我希望更好的随机数生成器可能会产生更好的结果。答案可能以代码示例或指向预先存在的随机数库的链接的形式出现。最重要的要求：

*   它应该产生相对高质量的随机数流
*   它的周期必须超过百亿
*   它应该足够快并提供良好的性能权衡。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-15T08:38:49.843

这似乎是[Mersenne Twister的一个很好的用例](http://en.wikipedia.org/wiki/Mersenne_twister)

*   它比 rand() 的大多数标准实现更快
*   它的周期很长 (2^19937 − 1)
*   它具有相当高的质量——它通过了大多数标准化的随机性测试
*   这是公共领域

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-13T03:10:20.700

如果您正在寻找一个非常快速、质量不错的算法，您应该考虑`xorshift128+`or `xorshift1024*`。它们几乎和 LCG 一样快（根据我的比较，它们只比简单的内联 LCG 慢 30%），同时具有比 LCG 更好的质量。

你可以在这里找到他们的代码和比较：http: [//xorshift.di.unimi.it/](http://xorshift.di.unimi.it/)

# jquery - 指定要附加 jQuery 事件的元素的选择器

> ID：14890815
> 
> 赞同：0
> 
> 时间：2013-02-15T08:36:56.620
> 
> 标签：jquery

在 jQuery 中，当我们想要使用实时事件（即冒泡的监听事件）时，我们编写如下内容：

```
$dom_element.on('click', some_selector_here, handler); 
```

现在想象一下，当且仅当 $dom_element 也满足某些选择器测试时，我们希望触发点击。当然，我们总是可以这样写：

```
$dom_element.on('click', some_selector_here, function() {
    if ($dom_element.is(yet_another_selector) {
         //do the job!
         ...
    } 
} 
```

我想问有没有办法在处理程序逻辑中设置这个选择器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:56:43.230

有几种不同的方法可以在 jquery 中过滤你的选择器。 `.find()`, `.not`, 甚至是选择器本身的过滤器，例如`:nth-child`, `:even`。但是，如果您真的想发挥创造力，jquery 允许您使用`.filter()`.

我发现你可以用这个变得很有创意。然后，您只需像这样修改上面的代码：

```
$dom_element.filter(yet_another_selector).on('click', some_selector_here, handler); 
```

这允许您在过滤器和处理程序中使用函数或闭包，根据事件冒泡进行必要的修改。

文档`.filter()`：[http ://api.jquery.com/filter/](http://api.jquery.com/filter/)

# javascript - Javascript代码求和素数奇怪地循环

> ID：14890816
> 
> 赞同：0
> 
> 时间：2013-02-15T08:36:59.480
> 
> 标签：javascript, for-loop, primes

我有以下代码，我试图将所有素数相加到 10。

我不是试图为这个问题找到最有效的代码或正确的代码，但我很难理解 for 循环的作用。我特指什么时候`i = 7`。

由于我有 2 个嵌套的 for 循环，由于某种原因，`i = 7`外循环循环不止一次，我的意思是内循环似乎达到了它的终止条件，`j < k`但它似乎坚持继续循环。 `j = 2``k = 2`

这是代码：

```
var array = [2];
var total = 0; 
function isPrime(i, j) {
    if ( i%array[j] === 0 ) {
        console.log("Not P Check: i was " + i + ", j was " + j + " and k was " + k);
        console.log(i + " is not a prime");
        k = j;
    }
    else if ((j + 1) === array.length) {
        console.log(i + " is a prime");
        total += i;
        console.log("total so far is " + total);
        array.push(i);
        console.log(array);
        k = j;
        console.log("is P Check: i was " + i + ", j was " + j + " and k was " + k);
    }
    else {
        j++;
        console.log("Check " + (j + 1) + ": i is " + i + ", j is " + j + " and k is " + k);
        isPrime(i,j);
    }
}

for(var i = 3; i <=10; i++) {
   var k = array.length;
   for(var j = 0; j < k; j++) {
       console.log("Check 1: i is " + i + ", j is " + j + " and k is " + k);
       isPrime(i, j);
   }
}

console.log(total);
console.log(array); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:07:23.250

我为您创建了一个小提琴[http://jsfiddle.net/yLby9/](http://jsfiddle.net/yLby9/)并编辑了几行。基本上，我将 isPrime 更改为返回一个布尔值，并告诉该循环在找到素数后中断。在您的版本中，当它达到 7 时，7 被推入数组（array.length 增加）。现在，当我们已经发现 7 是一个素数时，我们想跳出我们的内部循环并继续使用不同的 i。

```
var array = [2];
var total = 0; 
function isPrime(i, j) {
    if ( i%array[j] === 0 ) {
        console.log("Not P Check: i was " + i + ", j was " + j + " and k was " + k);
        console.log(i + " is not a prime");
        k = j;
        return false;
    }
    else if ((j + 1) === array.length) {
        console.log(i + " is a prime");
        total += i;
        console.log("total so far is " + total);
        array.push(i);
        console.log(array);
        k = j;
        return true;
        console.log("is P Check: i was " + i + ", j was " + j + " and k was " + k);
    }
    else {
        j++;
        console.log("Check " + (j + 1) + ": i is " + i + ", j is " + j + " and k is " + k);
        return isPrime(i,j);
    }
}

for(var i = 3; i <=10; i++) {
   var k = array.length;
   for(var j = 0; j < k; j++) {
       console.log("Check 1: i is " + i + ", j is " + j + " and k is " + k);
       if (isPrime(i, j)) break;
   }
}

console.log(total);
console.log(array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:23:17.453

答案是您的解决方案中不需要内部循环。您的递归函数已经在完成内部循环的工作。内部循环中发生的情况是，一些数字都重复了不必要的次数。

Dygestor 的解决方案是一种方法。另一种方法更简单

```
for(var i = 3; i <= 10; i++) {
  isPrime(i, 0);
} 
```

您的方法的日志：

```
Check 1: i is 3, j is 0 and k is 1
3 is a prime
total so far is 3
[2, 3]
is P Check: i was 3, j was 0 and k was 0
Check 1: i is 4, j is 0 and k is 2
Not P Check: i was 4, j was 0 and k was 2
4 is not a prime
Check 1: i is 5, j is 0 and k is 2
Check 2: i is 5, j is 1 and k is 2
5 is a prime
total so far is 8
[2, 3, 5]
is P Check: i was 5, j was 1 and k was 1
Check 1: i is 6, j is 0 and k is 3
Not P Check: i was 6, j was 0 and k was 3
6 is not a prime
Check 1: i is 7, j is 0 and k is 3
Check 2: i is 7, j is 1 and k is 3
Check 3: i is 7, j is 2 and k is 3
7 is a prime
total so far is 15
[2, 3, 5, 7]
is P Check: i was 7, j was 2 and k was 2
Check 1: i is 7, j is 1 and k is 2
Check 3: i is 7, j is 2 and k is 2
Check 4: i is 7, j is 3 and k is 2
Not P Check: i was 7, j was 3 and k was 2
7 is not a prime
Check 1: i is 7, j is 2 and k is 3
Check 4: i is 7, j is 3 and k is 3
Not P Check: i was 7, j was 3 and k was 3
7 is not a prime
Check 1: i is 8, j is 0 and k is 4
Not P Check: i was 8, j was 0 and k was 4
8 is not a prime
Check 1: i is 9, j is 0 and k is 4
Check 2: i is 9, j is 1 and k is 4
Not P Check: i was 9, j was 1 and k was 4
9 is not a prime
Check 1: i is 10, j is 0 and k is 4
Not P Check: i was 10, j was 0 and k was 4
10 is not a prime
15
[2, 3, 5, 7] 
```

删除内部循环的日志（请记住，这也缺少`console.log`内部循环）：

```
3 is a prime
total so far is 3
[2, 3]
is P Check: i was 3, j was 0 and k was 0
Not P Check: i was 4, j was 0 and k was 0
4 is not a prime
Check 2: i is 5, j is 1 and k is 0
5 is a prime
total so far is 8
[2, 3, 5]
is P Check: i was 5, j was 1 and k was 1
Not P Check: i was 6, j was 0 and k was 1
6 is not a prime
Check 2: i is 7, j is 1 and k is 0
Check 3: i is 7, j is 2 and k is 0
7 is a prime
total so far is 15
[2, 3, 5, 7]
is P Check: i was 7, j was 2 and k was 2
Not P Check: i was 8, j was 0 and k was 2
8 is not a prime
Check 2: i is 9, j is 1 and k is 0
Not P Check: i was 9, j was 1 and k was 0
9 is not a prime
Not P Check: i was 10, j was 0 and k was 1
10 is not a prime
15
[2, 3, 5, 7] 
```

在新解决方案中也不需要该`k`变量。`j`将递增直到它到达素数数组的末尾或直到目标数可整除，以较早者为准。

如果要使用内部循环解决方案，则需要删除递归函数并执行以下操作：

```
var primes = [2];
var sum = 0;

// Start looping
for(var i = 3; i <= 10; ++i) {
  var prime = true; // Prime until proven innocent
  for(var j = 0; j < primes.length; ++j) { // Length stays same until later
    if(i % arr[j] === 0) { // The meat of your isPrime function: divisible?
      prime = false;
      break; // Stop the loop early: number is not prime!
    }
  }
  if(prime) { // We have a prime!
    primes.push(i); // Add it to our list of primes
    sum += i; // Add the prime to the sum
  }
}

// Log the result
console.log("The sum of primes up to 10 (inclusive)", sum);
console.log("These primes were", primes); 
```

# php - 在php中指定文件上传路径

> ID：14890822
> 
> 赞同：-5
> 
> 时间：2013-02-15T08:37:27.120
> 
> 标签：php

我正在用 PHP 做一个项目。我想将文件上传到服务器。我的 PHP 文件位于此文件夹中：

`http://www.example.com/ssl/`

html代码是

```
 <tr> 
    <td width="157" align="right"><font class="text2" size="2" face="Arial, Helvetica, sans-serif"><b>Choose file:</b></font></td>
    <td width="337"> 
    <input type="file" name="Code_1" size="25" maxlength="100">
    </td>
    </tr>

<input type="submit" name="Senden" value="Submit"> 
```

php代码是

```
if (isset($_POST["Senden"])) {
move_uploaded_file($_FILES["Code_1"]["tmp_name"],"uploads/" . $_FILES["Code_1"]["name"]);
echo "File uploaded";
}
}
else{
    echo "File not uploaded"
} 
```

此代码正在运行，文件已上传到[http://www.example.com/ssl/uploads/](http://www.example.com/ssl/uploads/)

我想上传文件到：

`http://www.example.com/uploads/`.

我怎样才能做到这一点？我不知道如何指定路径。我使用了绝对路径，但它不起作用。谁能帮我？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:57:47.497

您可以通过以下方式使用路径：

```
$folder =  "../images/stories/lab_excel/"; 
```

这里，$folder 是路径。这是我的上传功能：

```
function upload($name,$tmp_name){   

    $fileextarr=explode('.',$name);
    $fileextarr[0];
    $fileext=$fileextarr[count($fileextarr)-1];
    $fpath = "../images/stories/lab_excel/";
    $filename = ereg_replace(" ","_",$fileextarr[0]).'.'.$fileext;

    if($fileext=="xls" || $fileext=="xlsx" || $fileext=="doc"|| $fileext=="docx" || $fileext=="jpeg" || $fileext=="png" || $fileext=="gif" || $fileext=="tiff" || $fileext=="bmp" || $fileext=="jpg")
    {
        $uploadedfile = $filename;

    }

    $folder =  "../images/stories/lab_excel/";
    $result =   move_uploaded_file($_FILES['excel']['tmp_name'], $folder.$filename);

    /*echo $folder.$_FILES['excel']['name'];
    die();*/

    if($result){
    $msg="File Uploaded Successfully";
        return $folder.$filename;
    }
    else
    {
        return false;
    }
} 
```

这对我来说很好用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T08:50:53.703

查看您的代码，您需要的唯一更改是

```
move_uploaded_file($_FILES["Code_1"]["tmp_name"],"../uploads/" . $_FILES["Code_1"]["name"]); 
```

所以把**../**放在前面`uploads/`。

[请参阅W3C](http://www.w3schools.com/php/php_file_upload.asp)上的上传代码。

# iphone - 如何在键盘中创建搜索按钮的操作？

> ID：14890826
> 
> 赞同：3
> 
> 时间：2013-02-15T08:37:38.727
> 
> 标签：iphone, search, iphone-sdk-3.0

我在一页中有三个文本字段，当文本字段为空时，键盘应显示返回键盘，否则应显示搜索，通过单击该搜索按钮，我们需要转到另一个视图控制器。可以用示例代码解释吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T10:22:20.923

一套`delegate`你`UITextField`和他们实现的`delegate`功能

显示`search`和`return`键

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    if ([textField.text isEqualToString:@""])
    {
        textField.returnKeyType=UIReturnKeyDefault;
    }
    else{
        textField.returnKeyType=UIReturnKeySearch;
    }
} 
```

键盘返回按钮上的编码

```
-(BOOL) textFieldShouldReturn:(UITextField *)textField
{
    if (textField.returnKeyType==UIReturnKeyDefault)
    {
        //Your Return Key code
    }
    else if(textField.returnKeyType==UIReturnKeySearch)
    {
        //Your search key code
    }
} 
```

# android - Android MediaPlayer 播放半小时后停止

> ID：14890827
> 
> 赞同：1
> 
> 时间：2013-02-15T08:37:40.083
> 
> 标签：android, debugging, android-service, android-mediaplayer

我正在编写一个媒体播放应用程序。它工作正常，但播放约 30 分钟后播放停止，据我所知，它只发生在我外出跑步时。我不认为（但我不确定）当我连接到调试器时会发生这种情况，但是由于发生错误需要很长时间，所以调试起来很烦人。

即使 MediaPlayer 在它自己的（绑定的）服务中运行，我感觉这个错误可能与 android 在屏幕关闭一段时间后暂停/停止我的应用程序有关（这在我调试时不会发生）。然而，这只是一个猜测。

我的问题不是确切的问题是什么，而是如何调试这类问题。我已将 BugSense 附加到我的应用程序中，但它不会引发任何异常。任何关于实用调试策略的想法？

编辑：该服务可以在这里找到：[https ://github.com/bottiger/SoundWaves/blob/5820196924ce9bc731f50c5def991351ed9b3a3b/src/info/bottiger/podcast/service/PlayerService.java](https://github.com/bottiger/SoundWaves/blob/5820196924ce9bc731f50c5def991351ed9b3a3b/src/info/bottiger/podcast/service/PlayerService.java)

我正在使用以下代码来绑定它。

```
public ServiceConnection playerServiceConnection = new ServiceConnection() {
    @Override
    public void onServiceConnected(ComponentName className, IBinder service) {
        mPlayerServiceBinder = ((PlayerService.PlayerBinder) service)
                .getService();
        // log.debug("onServiceConnected");
    }

    @Override
    public void onServiceDisconnected(ComponentName className) {
        mPlayerServiceBinder = null;
        // log.debug("onServiceDisconnected");
    }
}; 
```

并在 onCreate()

```
 getActivity().bindService(bindIntent, playerServiceConnection,
            Context.BIND_AUTO_CREATE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:32:54.943

您不调用 startForeground 和 stopForeground。

> 启动的服务可以使用 startForeground(int, Notification) API 将服务置于前台状态，系统认为它是用户主动意识到的，因此在内存不足时不适合杀死。（理论上，在当前前台应用程序的极端内存压力下，服务仍然可能被杀死，但实际上这不应该是一个问题。）

当系统需要更多资源时，Android 会终止您的服务。这种情况很难调试。这是操作系统特定的行为。

在你的服务中调用 startForeground，当你开始播放和 stopForeground 时停止。

有关服务生命周期的更多信息，您可以在此处阅读：http: [//developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

# javascript - Jquery删除突出显示的类不起作用

> ID：14890829
> 
> 赞同：0
> 
> 时间：2013-02-15T08:37:50.037
> 
> 标签：javascript, jquery, asp.net-mvc, html-lists

我有很多`<li>`元素，其中一些处于正常状态，而另一些处于突出显示状态（具有“hasNews”类）：

```
<ul class="companies">
    @foreach (var item in Model)
      {
        <li id='company_@(item.Id)' data-id='@item.Id' @{if (item.hasNews) { <text>class="hasNews"</text>} } >
                  <a>@item.Name</a>
        </li>
      }
</ul> 
```

我希望当我单击 any`<li>`时，将其 Id 发送给控制器，将该公司设置*为已读*，如果回调为真，则从中删除“hasNews”类`<li>`。我在控制器中有方法可以做到这一点。`<li>`但是如果回调为真，我需要 jquery 的帮助来从单击的项目中删除“hasNews”类。使用以下代码，我向控制器发送请求，执行我的操作并返回*false*或*true*。但是该`<li>`项目仍然突出显示：

```
$('.companies li ').click(function (e) {
    url = '@Url.Action("SetCompanyNewsAsRead", "Company")';
    var data = { id: $(this).attr('data-id') };
    $.post(url, data, function (result) {
      if (result.success) {

      $(this).removeClass('hasNews');  //this does not remove "hasNews" class.

     }
   });
}); 
```

我该如何解决这个问题？

**编辑：** 我想补充：其中一项`<li>`是“当前”。我这样做了：

```
$('#company_' + currentItemId).addClass('current'); 
```

这项工作。这可以防止“hasNews”类删除吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T08:41:24.747

问题是`this`内部（回调）函数与外部函数不同 -`this`根据函数的调用方式设置，它绝对不是从包含函数继承的。在外部函数的变量中保存对它的引用，内部函数可以访问它：

```
$('.companies li ').click(function (e) {
    url = '@Url.Action("SetCompanyNewsAsRead", "Company")';
    var theLI = this,   // <--------- Save reference to this
        data = { id: $(this).attr('data-id') };
    $.post(url, data, function (result) {
      if (result.success) {

        $(theLI).removeClass('hasNews');  //this does not remove "hasNews" class.

     }
   });
}); 
```

有关`this`JavaScript 工作原理的更完整说明，请查看[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)。

编辑：要回答您的编辑，不，其他类的存在应该没有区别。

# php - 如何为 PHP 链接添加样式（即文本装饰：下划线）？

> ID：14890830
> 
> 赞同：0
> 
> 时间：2013-02-15T08:37:55.300
> 
> 标签：php, wordpress

我在 WP 博客上有一个指向作者的链接。但是在查看页面时，链接只是与文本的其余部分融为一体。我想让观众知道作者的名字是一个可点击的链接，如果他们想查看作者的个人资料，他们可以点击那个链接。

所以代码片段是：

```
<div class="postdate">
<?php the_time('l, F jS, Y') ?> by 
    <?php the_author_posts_link(); ?>                        
at
<?php the_time() ?>
</div> 
```

所以当然我必须对**the_author_posts_link**行做点什么。但我不确定如何在其中添加一些东西，例如 style="text-decoration: underline" 或其他东西，所以它在 php.ini 中是可以接受的。任何有关这方面的信息或指导将不胜感激！

澄清

以前，输出是这样的：

```
Thursday, February 14th, 2013 by Jason+ at 10:05 am 
```

建立 Alien 先生提供的 CSS 片段后，输出是相同的：

```
Thursday, February 14th, 2013 by Jason+ at 10:05 am 
```

但是当我将鼠标悬停在它上面时它确实有下划线，这很奇怪。我希望在将鼠标悬停在它上面之前加下划线，就我看到的代码而言，它应该是这样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T08:40:01.667

我不明白你的问题，但如果这个函数`the_author_posts_link();`返回链接，那么你可以这样做

```
.postdate a {
   text-decoration: underline; /* You can use !important declaration if you are
                                  not getting the underline, perhaps something 
                                  must be overriding so... */
} 
```

# mysql - mysql查询中的错误加入和选择最新的日期记录

> ID：14890832
> 
> 赞同：0
> 
> 时间：2013-02-15T08:37:59.083
> 
> 标签：mysql, sql-update

```
UPDATE Fact_List sfl, Respondents_Dim rd SET sfl.Zip = rd.Zip where sfl.Panel_Id=rd.Panel_Id HAVING MAX(rd.Valid_From)

respondents_dim` (
  `Respondents_Key` int(11) NOT NULL AUTO_INCREMENT,
  `Panel_Id` int(11) DEFAULT NULL,
  `First_Name` varchar(100) DEFAULT NULL,
  `Last_Name` varchar(100) DEFAULT NULL,
  `Specialty` varchar(100) DEFAULT NULL,
  `Dataset` varchar(50) DEFAULT NULL,
  `Age` int(11) DEFAULT NULL,
  `Sex` varchar(10) DEFAULT NULL,
  `Zip` varchar(100) DEFAULT NULL,
  `Valid_From` date DEFAULT NULL,
  `Valid_To` date DEFAULT NULL)

CREATE TABLE IF NOT EXISTS `fact_list` (
  `Panel_Id` int(11) DEFAULT NULL,
  `Project_Id` int(11) DEFAULT NULL,
  `Zip` varchar(100) DEFAULT NULL,
  `Employee_Id` int(11) DEFAULT NULL,
  `Created_Date` date DEFAULT NULL
) 
```

第一个更新命令是使用来自 respondent_dim 的 Zip 更新 fact_list 表，其中两个都使用 panel_id 连接，但可能有多个具有该 id 的记录，并且应考虑最新的 valid_from 日期。

我试图执行它，但它给出了以下错误

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“HAVING MAX(rd.Valid_From)”附近使用正确的语法

查询中有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:33:23.960

尝试这个：

```
UPDATE fact_list fl
LEFT JOIN respondents_dim rd
ON rd.Panel_Id = fl.Panel_Id
SET fl. Zip = rd.Zip
WHERE rd.Valid_From = (SELECT MAX(Valid_From) 
                       FROM respondents_dim rd2
                       WHERE rd2.Panel_Id = rd.Panel_Id) 
```

或避免相关子查询：

```
UPDATE fact_list fl
INNER JOIN respondents_dim rd
ON rd.Panel_Id = fl.Panel_Id
INNER JOIN
   (SELECT Panel_Id, MAX(Valid_From) AS max_Valid_From
    FROM respondents_dim 
    GROUP BY Panel_Id) AS rd2
ON rd.Panel_Id = rd2.Panel_Id 
AND rd.Valid_From = rd2.max_Valid_From
SET fl.Zip = rd.Zip 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:42:18.113

尝试左连接：-

**编辑**：删除别名并输入表的名称。

**编辑2**：尝试一次。

```
 UPDATE Fact_List  left join Respondents_Dim  on Fact_List.Panel_Id=Respondents_Dim.Panel_Id SET Fact_List.Zip = Respondents_Dim.Zip 
where Respondents_Dim.Valid_From in (select  MAX(Respondents_Dim.Valid_From) from Respondents_Dim) 
```

# java - 活动未开始

> ID：14890836
> 
> 赞同：0
> 
> 时间：2013-02-15T08:38:15.403
> 
> 标签：java, android, eclipse, android-activity, android-dialog

请看下面的代码

**表单.java**

我的主要活动是 Form.java。在里面，我有一个`AlertDialog`. 当用户单击“是”按钮时，将调用以下类

```
private class PositiveDialogBtnAction implements DialogInterface.OnClickListener
    {

        public PositiveDialogBtnAction()
        {
        }  
        @Override
        public void onClick(DialogInterface arg0, int arg1) {
            // TODO Auto-generated method stub
            //Toast.makeText(getApplicationContext(), databaseConnector.getStreetAddress(selectedBranch), Toast.LENGTH_LONG).show();

            Dialog dialog = new Dialog(context);
            dialog.setContentView(R.layout.activity_call_dialog);
            dialog.setTitle("Select a Phone Number");

            dialog.show();
        }

    } 
```

以下是 XML 文件和 Java 类，它被设置为上面提到的`Dialog`内部`PositiveDialogBtnAction`类。

**activity_call_dialog**

```
<TextView
    android:id="@+id/callNumber1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="" />

<TextView
    android:id="@+id/callNumber2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="" /> 
```

**CallDialog.java**

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.TextView;
import android.widget.Toast;

public class CallDialog extends Activity {

    private DatabaseConnector database = DatabaseHandler.getInstance();
    private TextView ph1,ph2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_call_dialog);

        Toast.makeText(this, "Activity Running", Toast.LENGTH_LONG).show();
        //String selectedBranch = Form.selectedBranch;

        //ph1 = (TextView)findViewById(R.id.callNumber1);
        //ph2 = (TextView)findViewById(R.id.callNumber2);

        //ph1.setText(database.getPhoneNumber1(selectedBranch));
        //ph2.setText(database.getPhoneNumber2(selectedBranch));

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_call_dialog, menu);
        return true;
    }

} 
```

但是，当`PositiveDialogBtnAction`被解雇时，`Toast`中提到的`CallDialog.java`永远不会被解雇。似乎它没有处理`CallDIalog.java.`因此，我也无法将值设置为**activity_call_dialog.xml**中的文本字段。我已经注释掉了这些行。

为什么没有调用与此活动捆绑的这个 Java 文件？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:27:37.350

要创建警报对话框，您应该使用 AlertDialog.Builder。它有一个漂亮流畅的界面，让处理对话变得非常容易。例子：

```
new AlertDialog.Builder(this)
    .setMessage("Someone is calling you")
    .setPositiveButton("Positive", 
            new OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    startActivity(new Intent("com.example.CallDialogActivity"));
            }})
    .create()
    .show(); 
```

为了从点击监听器内部开始一个新的活动，只需`startActivity()`使用在`AndroidManifest.xml`为您注册的 CallDialog 中注册的操作进行调用（我建议您将其重命名为*CallDialogActivity*）。但无论如何，您应该确定在哪里使用对话框或活动。必须相应地处理它们。

# asp.net - 如何发布一个vb项目？

> ID：14890842
> 
> 赞同：0
> 
> 时间：2013-02-15T08:39:02.837
> 
> 标签：asp.net, vb.net, visual-studio-2008, ms-access-2003

我已经使用带有访问数据库的 vb 2008 完成了一个系统。现在我的问题是我不知道如何发布它以供用户测试。谁能帮助我/教我如何发布它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:23:51.057

要发布网站，有一个内置工具可让您将发布的网站文件创建到给定位置。

[请按照此处](http://msdn.microsoft.com/en-us/library/20yh9f1b%28v=vs.100%29.aspx)的步骤执行此操作

希望这可以帮助！

# c++ - Qt 5 支持异常吗？

> ID：14890843
> 
> 赞同：3
> 
> 时间：2013-02-15T08:39:03.920
> 
> 标签：c++, qt, exception, build, qt5

在新版本的Qt中，配置时不能传递命令行参数-exceptions。那么是否有例外？我在我的程序中经常使用异常。因此，如果一劳永逸地禁用异常……那是个坏消息！

你们能解释一下Qt 5中的异常情况吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T08:56:27.997

最初引入禁用异常的能力是为了处理预标准编译器。Qt 已经存在很长时间了。

今天，Qt 支持的所有编译器都支持异常，因此不再需要禁用它们。

# android - 用于 android 数据库的 SQL 或 SQLite

> ID：14890844
> 
> 赞同：0
> 
> 时间：2013-02-15T08:39:04.877
> 
> 标签：android, sql, database, sqlite

我必须做一个项目，Android App Application，它有一个数据库，这是我第一次为 android 编程。

那么，使用 SQL 或 SQLite 更好吗？

事实上，我刚开始使用 SQLite，但我发现外键有问题。即使我在代码中编写了它，但它不起作用！

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T08:40:58.753

SQL 不是数据库。它是一种数据库查询语言。你必须使用 SQLite

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T08:41:52.050

如果您需要使用其他数据库，Android 库仅对 SQLite 提供本机支持，您必须要么寻找已经存在的第三方库。

在这里你可以下载我正在使用的 DBadapter。您只需要指定您的数据库名称和路径。FK也没有问题。在这里我上传了文件： [http ://www.2shared.com/document/Ik6fFuth/DBAdapter.html](http://www.2shared.com/document/Ik6fFuth/DBAdapter.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:45:23.517

这是从android数据库开始的简单教程以及源代码

[点击这里](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T10:15:34.997

默认情况下不强制执行外键约束。您需要执行“PRAGMA foreign_keys=ON;” 打开它们。如果您使用的是默认[SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)您可以在 onOpen 方法中执行此操作：

```
@Override
public void onOpen(SQLiteDatabase db) {
  super.onOpen(db);
  if (!db.isReadOnly()) {
    db.execSQL("PRAGMA foreign_keys=ON;");
  }
} 
```

# c++ - 如何解决错误 LNK2019

> ID：14890847
> 
> 赞同：6
> 
> 时间：2013-02-15T08:39:23.857
> 
> 标签：c++, linker, unresolved-external, lnk2019

我正在用 C++ 发送一封简单的电子邮件。我从以下链接下载了一个示例 C++ 程序。[http://cboard.cprogramming.com/cplusplus-programming/125655-sending-simple-email-cplusplus.html](http://cboard.cprogramming.com/cplusplus-programming/125655-sending-simple-email-cplusplus.html) 示例程序在编译时似乎遇到了以下错误。请帮我解决。

```
Error   8   error LNK2019: unresolved external symbol _send_mail referenced in function _wmain  

Error   9   error LNK2019: unresolved external symbol __imp__recv@16 referenced in function "int __cdecl connect_to_server(char const *)" (?connect_to_server@@YAHPBD@Z)    

Error   10  error LNK2019: unresolved external symbol __imp__connect@12 referenced in function "int __cdecl connect_to_server(char const *)" (?connect_to_server@@YAHPBD@Z) 

Error   11  error LNK2019: unresolved external symbol __imp__htons@4 referenced in function "int __cdecl connect_to_server(char const *)" (?connect_to_server@@YAHPBD@Z)    

Error   12  error LNK2019: unresolved external symbol __imp__socket@12 referenced in function "int __cdecl connect_to_server(char const *)" (?connect_to_server@@YAHPBD@Z)  

Error   13  error LNK2019: unresolved external symbol __imp__getprotobyname@4 referenced in function "int __cdecl connect_to_server(char const *)" (?connect_to_server@@YAHPBD@Z)   

Error   14  error LNK2019: unresolved external symbol __imp__gethostbyname@4 referenced in function "int __cdecl connect_to_server(char const *)" (?connect_to_server@@YAHPBD@Z) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-30T20:34:45.787

我遇到了同样的错误（“LNK2019: unresolved external symbol ....”）。我的标头和调用被正确定义，它只是在调试模式下无法链接（在发布模式下没有抱怨）。原来我的问题是由不正确的`.vcxproj`文件引起的。

当我通过编辑文件向我的项目添加新的依赖项时`vxcproj`，我犯了一个错误：我认为这两个部分除了文件扩展名之外是相同的，所以我从第一行复制粘贴`<ItemGroup>`到最后两行`<ItemGroup>`（见下文）。

有一段时间没有注意到，因为我使用批处理脚本在**发布**模式下编译代码。当我切换到**调试**模式时，项目在链接阶段失败。最终，我发现了我的错误，并通过以下补丁解决了问题：

```
-    <ClCompile Include="crypto/crypto.h" />
-    <ClCompile Include="crypto/rsa_public_key.h" />
+    <ClInclude Include="crypto/crypto.h" />
+    <ClInclude Include="crypto/rsa_public_key.h" /> 
```

文件的错误版本`.vcxproj`：

```
 <ItemGroup>
    ...
    <ClCompile Include="main.cpp" />
    <ClCompile Include="crypto/crypto.cpp" />
    <ClCompile Include="crypto/rsa_public_key.cpp" />
  </ItemGroup>
  <ItemGroup>
    <None Include="main.def" />
  </ItemGroup>
  <ItemGroup>
    ...
    <ClInclude Include="main.h" />
    <ClCompile Include="crypto/crypto.h" />
    <ClCompile Include="crypto/rsa_public_key.h" />
  </ItemGroup>
  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.targets" />
  <ImportGroup Label="ExtensionTargets">
  </ImportGroup>
</Project> 
```

底线：当您获得 LNK2019 并且互联网上没有任何解释帮助时，请检查您的项目设置。如果您使用版本控制，请将当前项目文件与已知良好的旧版本进行比较。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-13T08:42:30.107

可能您已经在类中声明了该函数，但忘记在其定义中使用范围解析运算符。至少这就是给我这个错误的原因。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-20T22:15:54.060

就我而言，这是因为抽象类中的方法是*虚拟*的，但没有在任何子类中实现。

但是，这可能只是导致该 LNK 错误的多种原因之一。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-15T09:24:54.943

如果您查看[错误 LNK2019: unresolved external](http://www.cplusplus.com/forum/beginner/89064/)似乎问题在于设置子系统。您的问题与[错误 LNK2019: unresolved external symbol](https://stackoverflow.com/questions/13318965/error-lnk2019-unresolved-external-symbol)相关。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-14T06:18:12.207

可能你忘记在项目中包含一些源代码文件，或者你忘记实现一个函数等，所以你的编译器找不到它。（“LNK2019：未解析的外部符号 ....”）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-21T14:17:18.053

[MSDN 页面](https://msdn.microsoft.com/en-us/library/799kze2z.aspx)上的第二点应用函数参数作为指针而不是对应于模块范围 decls 的变量名称传递。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-11T11:32:58.847

有时当您没有`int main()`功能时会出现该错误。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-28T17:56:48.073

对于涉及套接字 odbc 和服务器连接的错误，您需要将您的项目与 Microsoft SDK 库链接

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-12-28T09:21:20.057

我遇到了这个错误——我的问题是我调用了一个不存在的函数。所以 Visual Studio 在其他库和 dll 中寻找这个函数。

# java - 如何防止“数据截断：数据过长异常”

> ID：14890850
> 
> 赞同：0
> 
> 时间：2013-02-15T08:39:36.150
> 
> 标签：java, mysql, jpa, glassfish, jersey

用户报告我的服务正在返回错误，报告以下异常：

> 内部异常：com.mysql.jdbc.MysqlDataTruncation：数据截断：第 1 行的列“lastRegResult”的数据太长
> 
> 错误代码：1406

有问题的列定义为`VARCHAR(120)`，我尝试存储的数据很可能有时会更长。我预计数据会被静默截断，但似乎我错了。

我可以在调用之前将数据缩短到 120 个字符`setLastRegResult`，但我不想在我的代码中使用硬编码常量 120，这样如果数据库列大小发生变化，我就不必更新它。我怎样才能干净地做到这一点？

一个解决方案可能是：

*   如何读取列的大小以便我自己截断它？
*   或者，我如何告诉 JPA 为我执行截断？

# php - 使用 php 到数据库的 Simplexml

> ID：14890851
> 
> 赞同：-5
> 
> 时间：2013-02-15T08:39:38.843
> 
> 标签：php, xml, arrays, amazon-web-services, simplexml

我正在使用 amazon api 检索要存储在数据库中的演员列表。我不断收到重复的条目，并希望有人能在可能的情况下帮助我。

这是我正在做的

```
$i = $result->Items->Item->ItemAttributes->Actor;
echo "Actor :"; $alist = array(); foreach ($i as $a) {  $alist[] = $a; print_r($alist);  } 
```

他就是结果。

```
Array ( [0] => SimpleXMLElement Object ( [0] => Tommy Lee Jones ) ) Array ( [0] => SimpleXMLElement Object ( [0] => Tommy Lee Jones ) [1] => SimpleXMLElement Object ( [0] => John Goodman ) ) Array ( [0] => SimpleXMLElement Object ( [0] => Tommy Lee Jones ) [1] => SimpleXMLElement Object ( [0] => John Goodman ) [2] => SimpleXMLElement Object ( [0] => Peter Sarsgaard ) ) Array ( [0] => SimpleXMLElement Object ( [0] => Tommy Lee Jones ) [1] => SimpleXMLElement Object ( [0] => John Goodman ) [2] => SimpleXMLElement Object ( [0] => Peter Sarsgaard ) [3] => SimpleXMLElement Object ( [0] => Kelly Macdonald ) ) Array ( [0] => SimpleXMLElement Object ( [0] => Tommy Lee Jones ) [1] => SimpleXMLElement Object ( [0] => John Goodman ) [2] => SimpleXMLElement Object ( [0] => Peter Sarsgaard ) [3] => SimpleXMLElement Object ( [0] => Kelly Macdonald ) [4] => SimpleXMLElement Object ( [0] => Mary Steenburgen ) ) 
```

任何帮助，将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:49:21.640

将您的 print_r() 函数移到 foreach 循环之外

```
echo "Actor :";
$alist = array();
foreach ($i as $a) {
  $alist[] = $a;
}
print_r($alist); 
```

您的输出随着每次迭代而增长

```
Array ( [0] => SimpleXMLElement Object ( [0] => Tommy Lee Jones ) )
Array ( [0] => SimpleXMLElement Object ( [0] => Tommy Lee Jones ) [1] => SimpleXMLElement Object ( [0] => John Goodman ) )
Array ( [0] => SimpleXMLElement Object ( [0] => Tommy Lee Jones ) [1] => SimpleXMLElement Object ( [0] => John Goodman ) [2] => SimpleXMLElement Object ( [0] => Peter Sarsgaard ) )
Array ( [0] => SimpleXMLElement Object ( [0] => Tommy Lee Jones ) [1] => SimpleXMLElement Object ( [0] => John Goodman ) [2] => SimpleXMLElement Object ( [0] => Peter Sarsgaard ) [3] => SimpleXMLElement Object ( [0] => Kelly Macdonald ) )
Array ( [0] => SimpleXMLElement Object ( [0] => Tommy Lee Jones ) [1] => SimpleXMLElement Object ( [0] => John Goodman ) [2] => SimpleXMLElement Object ( [0] => Peter Sarsgaard ) [3] => SimpleXMLElement Object ( [0] => Kelly Macdonald ) [4] => SimpleXMLElement Object ( [0] => Mary Steenburgen ) ) 
```

如果您更好地格式化代码/输出，您可以更轻松地发现问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:53:55.410

您可以将名称值设置为数组的键；这样重复的名称将覆盖数组中的前一个键。

```
$alist[$a->name] = $a 
```

您必须从 SimpleXMLElement 对象中检索字符串中的名称

我希望我理解你的问题，这些提示会有所帮助

这将删除重复的条目到您的数组中，而不是重复的 print_r 与鞋相同的数组，多一个行吃时间

# vbscript - 使用自定义 appdata 文件夹 VBS 启动程序

> ID：14890853
> 
> 赞同：0
> 
> 时间：2013-02-15T08:39:40.597
> 
> 标签：vbscript, appdata

如何使用 Visual Basic 脚本启动具有自己的自定义 appdata 文件夹的程序。我试图用一个批处理文件来做到这一点：

```
 @echo off
    set APPDATA=%CD%\appdata
    start program.exe 
```

它可以在除学校以外的任何地方使用，因为命令提示符被禁用。我以前成功使用过 VBscripts，所以我认为这可能是个好主意。

（顺便说一句，在有人问之前，是的，我们被允许在计算机上运行其他程序，我只需要将应用数据存储在 USB 上，这样就可以保存我的东西）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:11:24.100

您可以像这样在 Vbscript 中修改用户环境变量，但是您必须从脚本中启动程序，否则当脚本关闭时您的环境将消失，即使那样我也不确定您的程序会看到相同的环境.

```
Set wshShell = WScript.CreateObject("WScript.Shell")

result=savevar("APPDATA","E:\")
result=getvar("APPDATA")
'=>User environment:E:\'
'*********
Function SaveVar (var,szVar)
  Set wshShellEnv = wshShell.Environment("User")
  WSHShellEnv(var)=szVar
End Function
'*********
Function GetVar (var)
  Set wshShellEnv = wshShell.Environment("User")
  wscript.echo "User environment:" & WSHShellEnv(var)
End Function 
```

# oracle - 带有循环和立即执行的过程

> ID：14890855
> 
> 赞同：0
> 
> 时间：2013-02-15T08:39:55.057
> 
> 标签：oracle, pls-00103

最近我开始为定期报告过程准备数据集市，并尝试使用一些带参数的程序。

因此，我阅读[了此指南](http://www.mssqltips.com/sqlservertutorial/162/how-to-create-a-sql-server-stored-procedure-with-parameters/)并尝试复制，但对编译错误感到困惑。

这是我的代码：

```
create or replace procedure mig_rate @rep_date date AS 
    create or replace table mig_temp1(
    report_date date,
    portfolio string,
    bucket integer,
    Q integer);
begin    
    for j in 1..7 loop 
        for t in 0..32 loop
       -- execute immediate 'bla-bla-bla insert statement mig_temp1
        end loop;
    end loop;
end 
```

这导致`PLS-00103`说`@`符号是意外的。

语法有什么问题，我应该如何将参数放入程序中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:07:02.810

主要错误是您试图在 Oracle 数据库中使用 SQL Server 语法。

首先，Oracle[对象名称必须以字母开头](http://docs.oracle.com/cd/E11882_01/server.112/e10592/sql_elements008.htm)（除非您使用带引号的标识符，但请不要）并且......好吧，以下是相关部分：

> 不带引号的标识符必须以数据库字符集中的字母字符开头。带引号的标识符可以以任何字符开头。
> 
> 不带引号的标识符只能包含数据库字符集中的字母数字字符以及下划线 (_)、美元符号 ($) 和井号 (#)。数据库链接还可以包含句点 (.) 和“at”符号 (@)。Oracle 强烈建议您不要在未加引号的标识符中使用 $ 和 #。
> 
> 带引号的标识符可以包含任何字符和标点符号以及空格。但是，带引号和不带引号的标识符都不能包含双引号或空字符 (\0)。

...所以您根本不能`@`在过程名称中使用，也不需要因为这是 SQL Server 的事情（我认为，我不使用它！）。

**编辑**：看，我对 SQL Server 很陌生，我误读了它在做什么。您的过程名称可以，但这不是您声明参数的方式；它应该开始：

```
create or replace procedure mig_rate(rep_date date) as
... 
```

其次，您不能在 Oracle 过程中创建（声明？）这样的表。看起来您在过程期间需要一个临时表，但这不是 Oracle 的工作方式；您可以在过程之外创建一个全局临时表，但它是一个永久数据库对象 - 只有数据是临时的。

您可以改用[PL/SQL 集合](http://docs.oracle.com/cd/E18283_01/appdev.112/e17126/composites.htm#CHDBHJEI)，但这取决于您想用它做什么。如果它是插入普通表之前的暂存区，那么您可以将其作为单个 SQL 命令执行，这样会更好。

我不确定您为什么要`execute immediate`在此处使用动态 SQL ( ) ...

请参阅[PL/SQL 语言参考](http://docs.oracle.com/cd/E18283_01/appdev.112/e17126/overview.htm)和 Oracle 特定站点而不是 SQL Server 特定站点以了解如何操作；它们的工作方式存在很大差异。

# java - AddFolderListener 在某些设备上工作，但在另一个不工作

> ID：14890858
> 
> 赞同：0
> 
> 时间：2013-02-15T08:40:08.113
> 
> 标签：java, blackberry, directory, listener

我正在开发一个应用程序，它可以侦听来自电子邮件帐户的消息并执行特定操作。为此，我使用这个：

```
public class EmailListener implements FolderListener {

public void registerEmailListener(boolean register) {
ServiceBook sb = ServiceBook.getSB();
ServiceRecord[] srs = sb.findRecordsByCid("CMIME");
if (srs != null) {
ServiceRecord sr;
ServiceConfiguration sc;
/* unregister all email listener  to avoid duplicate listeners */
desregisterAllEmailListeners(srs);
for (int i = srs.length - 1; i >= 0; --i) {
sr = srs[i];
try {
sc = new ServiceConfiguration(sr);
registerEmail(sc, register);

} catch (Exception e) {
e.printStackTrace();
}
}

}
}

private void registerEmail(ServiceConfiguration sc, boolean register) {
Session s = Session.getInstance(sc);
if (s != null) {
Folder[] folders = s.getStore().list();
for (int foldercnt = folders.length - 1; foldercnt >= 0; --foldercnt) {
Folder f = folders[foldercnt];
// If the folder doesn't have the service book for this email, we do not want to register it
if (f.getFullName().indexOf(sc.getEmailAddress()) >= 0) {
recurse(f, register);
}
}
} 
}
private void recurse(Folder f, boolean add) {
if (f.getType() == Folder.INBOX) {

f.removeFolderListener(this);
if (add) {
f.addFolderListener(this);
}
}
Folder[] farray = f.list();
for (int fcnt = farray.length - 1; fcnt >= 0; --fcnt) {
recurse(farray[fcnt], add);
}
}

public void desregisterAllEmailListeners(ServiceRecord[] srs) {
ServiceRecord sr;
ServiceConfiguration sc;
for (int i = srs.length - 1; i >= 0; --i) {
sr = srs[i];
try {
sc = new ServiceConfiguration(sr);
registerEmail(sc, false);
} catch (Exception e) {
e.printStackTrace();
}
}
}

public void messagesAdded(final FolderEvent e) {

....

}

....

} 
```

收到电子邮件后，它会执行 messageAdded 并执行特定操作。问题是在某些设备中它可以工作，而在另一些设备中则不起作用。它在每种情况下都正确注册了电子邮件侦听器，但在某些情况下不执行 messageAdded。有什么问题？

它适用于：9300 OS 6.0 和 OS 5.0 和 9220 OS 7.1 它不适用于 9320 OS 7.1、9380 OS 7.1 和 9800 OS 6.0

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:19:12.053

是的！！，它执行 messageAdded....调试。我不知道为什么在某些设备中不显示日志....

道德是：不要只相信 logEvent，使用这个和调试工具，两者都！

# c# - 如何通过属性浏览器定位 GUI 元素

> ID：14890860
> 
> 赞同：0
> 
> 时间：2013-02-15T08:40:21.243
> 
> 标签：c#, visual-studio-2010

一个简单的问题，但我似乎找不到一种舒适的方式或正确的方式来询问 Google：属性浏览器顶部的组合框显示了使用 GUI 设计器创建的所有 GUI 元素。

是否有一种简单的方法可以找到在属性浏览器中选择的 GUI 元素，例如“突出显示元素”或类似的东西？

以及如何删除设计者不再可以访问的“孤立”元素（不要问我这是怎么发生的）？

目前唯一的方法似乎是在 MyForm.Designer.cs 中手动删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:54:04.193

在 VS2012 菜单中。转到查看|其他窗口|文档大纲

![在此处输入图像描述](../Images/3988c3e187606f2802232cd7fb9fd3c2.png)

它将为您提供表单上所有控件的树形列表视图。您可以在窗口中选择它们进行删除 - 然后按 Delete

# java - 检查给定数据的 JTextField

> ID：14890861
> 
> 赞同：0
> 
> 时间：2013-02-15T08:40:23.570
> 
> 标签：java, swing, jtextfield

我使用此代码来确保来自文本字段的每个给定数据都是正确的。

但是在 dateTextField 中，当我给它任何内容或将其留空时，会显示其错误消息，但是当我单击保存按钮时，该数据将保存到我的 JTable 中！

我的错误在哪里？

```
public class AddBookDialog extends javax.swing.JDialog {

public AddBookDialog(JFrame owner){
    super(owner,"New Book",true);
    ...
     }
BookInformation bookinform;

 private void OkButtonActionPerformed(java.awt.event.ActionEvent evt) { 
    bookinform=new BookInformation();

        if(!BookIDControl()){
            return;
        }

        if(!BookNameControl()){
            return;
        }

        if(!BookDateControl()){
            return;
        }

        bookinform.setBorrowStatus("No");

      AddBookDialog.this.dispose();

}

public BookInformation getBookInfos() throws NullPointerException{
    return bookinform;
}
    public boolean BookNameControl(){
       bookinform.setBookName(BookNametextfiled.getText());
    if(bookinform.getBookName().trim().isEmpty()){
        errorLable.setText("Empty Book Name");
        return false;
    }

    if(havedigit(bookinform.getBookName().trim())){
        errorLable.setText("Book Name Have Digit");
        return false;
        }
    return true;
    }

     public boolean BookDateControl(){
     bookinform.setBookDate(BookDatetextfield.getText().trim());
    if(bookinform.getBookDate().trim().isEmpty()){
        errorLable.setText("Empty Book Date");
        return false;
    }
       else if(haveSpace(bookinform.getBookDate().trim())){
        errorLable.setText("Space in Book Date!");
        return false;
    }

   else if(haveletter(bookinform.getBookDate().trim())){
        errorLable.setText("Letter in Book Date");
        return false;
    }
        return true;
    }

    public boolean BookIDControl(){
    bookinform.setBookID(BookidTextfield.getText().trim());
    if(bookinform.getBookID().trim().isEmpty()){
        errorLable.setText("Empty Book ID");
        return false;
    }

    if(haveSpace(bookinform.getBookID().trim())){
        errorLable.setText("Space in Book ID !");
        return false;
    }

    if(haveletter(bookinform.getBookID().trim())){
        errorLable.setText("Letter in Book ID");
        return false;
    }
    return true;
    }
... 
```

二等：

```
public class AllBooksM extends JFrame implements ActionListener{
...
if(e.getSource()==AddBookButton){
    AllBooks allBooks=new AllBooks();
    AddBookDialog add_book=new AddBookDialog(AllBooksM.this);
    add_book.setVisible(true);
    BookInformation B_info=add_book.getBookInfos();
     if(B_info != null){
      allBooks.AddRow(B_info);
     }
 //    bookcount();

    }
...
    } 
```

我的输出：

```
26     thired     62     Yes
29     sixth     92     No
35     vff     53     No
34332     dsds          null
3434     ssdas          null
222     fgfgf          null
77     sds          null 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:17:05.043

下面的代码如果“BookDatetextfield.getText()”为空，那么每次调用 trim() 方法时都会抛出一个异常，如果你的应用没有死，那是因为你正在捕获异常。

```
 public boolean BookDateControl(){
        bookinform.setBookDate(BookDatetextfield.getText().trim());

        if(bookinform.getBookDate().trim().isEmpty()){
            errorLable.setText("Empty Book Date");
            return false;
        } else if(haveSpace(bookinform.getBookDate().trim())){
            errorLable.setText("Space in Book Date!");
            return false;
        } else if(haveletter(bookinform.getBookDate().trim())){
            errorLable.setText("Letter in Book Date");
            return false;
        }

        return true;
    } 
```

如果你有 spring.jar，解决方法是在做某些验证之前，它们有一些非常有用的方法，那么你的代码将如下所示：

```
 public boolean BookDateControl(){
        if(!StringUtils.hasLength(BookDatetextfield.getText()) || !StringUtils.hasText(BookDatetextfield.getText())){
            errorLable.setText("Empty Book Date");
            return false;
        }
        bookinform.setBookDate(BookDatetextfield.getText().trim());

        if(bookinform.getBookDate().trim().isEmpty()){
            errorLable.setText("Empty Book Date");
            return false;
        } else if(haveSpace(bookinform.getBookDate().trim())){
            errorLable.setText("Space in Book Date!");
            return false;
        } else if(haveletter(bookinform.getBookDate().trim())){
            errorLable.setText("Letter in Book Date");
            return false;
        }

        return true;
    } 
```

如果字符串为空或零长度，则作为长度的方法将返回 false。只有当字符串有多个空格时，hasText 才会返回 true。

# c# - 当我将 Webdriver Firefox 配置文件设置为默认下载所有文件时，它不起作用

> ID：14890866
> 
> 赞同：1
> 
> 时间：2013-02-15T08:40:47.723
> 
> 标签：c#, firefox, selenium, webdriver, selenium-webdriver

我将firefox配置文件设置为默认下载所有文件，但是当涉及到图像时，它会弹出一个对话框并询问我保存或查看的天气。我使用的代码如下

```
var folderName = "temp";
            var profile = new FirefoxProfile { EnableNativeEvents = true };
            profile.SetPreference("browser.download.folderList", 2);
            profile.SetPreference("browser.download.manager.showWhenStarting", false);
            profile.SetPreference("browser.download.dir", folderName);
            profile.SetPreference("browser.download.downloadDir", folderName);
            profile.SetPreference("browser.download.defaultFolder", folderName);
            profile.SetPreference("browser.helperApps.neverAsk.saveToDisk", "application/all");

            _webDriver = new FirefoxDriver(profile); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:24:24.483

```
application/all 
```

不是有效的 mime 类型。配置条目将只接受以**逗号分隔**的 MIME 类型列表。

没有办法告诉它“所有文件”。因此，您需要为其提供 MIME 类型列表。

这是**Firefox**而不是 Selenium 的限制。

# wireshark - 如何解码通过 WireShark 接收的数据包并解决一些错误

> ID：14890872
> 
> 赞同：7
> 
> 时间：2013-02-15T08:41:06.790
> 
> 标签：wireshark, packet-capture

我们通过 WireShark 使用 JN5148EK010 节点捕获流量。收到的数据包显示在提供的屏幕截图中。

1.  我想知道如何解码数据
2.  捕获几个数据包后发生错误，还提供了屏幕截图。如何解决此错误？
3.  项目清单

发生另一个错误（请参阅第三个屏幕截图）。

如何解决？

![在此处输入图像描述](../Images/c4f6c0d0c91d15ea97b1a56969c601c4.png) ![在此处输入图像描述](../Images/3319e312e49390847d58a367d3db9e85.png)

![在此处输入图像描述](../Images/ad4cbc1983a05df0cecb20c8cf7c5c61.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:27:00.423

快速的网络搜索表明 Wireshark 正在与定制插件一起使用（由 Jennic 提供？）。

在当前的 Wireshark 资源中找不到字符串“Jennic Sniffer protocol”，这强烈表明正在使用定制版本的 Wireshark。

所以：我怀疑您需要咨询供应商和/或供应商文档（我注意到其中讨论了各种配置首选项）。

* * *

无论如何，如果不分析实际捕获，基本上是不可能多说的；仅基于屏幕截图，我将仅说以下内容。

专家窗口显示“我们不支持使用协议 [version ?] 进行加密”

这是否指的是您突出显示的第 322 帧。如果是这样，则消息的含义就是它所说的（假设尝试的解剖是有效的）。

“格式错误”的消息意味着解析器无法理解数据。

更大的图景：鉴于各种“畸形”和不支持解密的警告，一切皆有可能......

同样，您最好的方法可能是咨询供应商。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-01T16:16:58.033

您的 Wireshark 屏幕截图表明您正在使用[Wireshark 1.6.5](https://www.wireshark.org/news/20120110.html)（或基于 Wireshark 1.6.5 的自定义版本），该版本现已超过 5 年。根据 Wireshark 的[Lifecycle](https://wiki.wireshark.org/Development/LifeCycle) wiki 页面，对 Wireshark 1.6 的支持已于 2013 年 6 月 7 日结束。

[从那时起，IEEE 802.15.4 解析器](https://code.wireshark.org/review/gitweb?p=wireshark.git;a=history;f=epan/dissectors/packet-ieee802154.c;h=7cd95e0fbb71409e6ceee613fe33a40a0aeebb23;hb=HEAD)进行了许多更新，因此，更新后的解析器很有可能会解析您现在感兴趣的数据。

我建议您更新您的[Wireshark](https://www.wireshark.org/#download)版本。

# css - 如何获得这样的动态css布局：

> ID：14890875
> 
> 赞同：2
> 
> 时间：2013-02-15T08:41:22.403
> 
> 标签：css, layout

我是 CSS 和布局的新手，但对一种布局有疑问

我正在尝试用 JS 开发一个应用程序，但我想在纯 css 中使用这个布局。是否可以？

这是一个小提琴：http: [//jsfiddle.net/vxeqL/](http://jsfiddle.net/vxeqL/)

我的主要问题是蓝色框，因为 #left 是 100% 高度，而 #left-top 具有恒定高度：200px;

![在此处输入图像描述](../Images/a3269f093bba0e7ab28b0ac0f13dad7c.png)

我的代码远（HTML）：

```
<div id="header">
</div>

<div id="container">

<div id="left">

    <div id="left-top"></div>
    <div id="left-bottom"></div>
</div>

<div id="right">
</div>

</div>

<div id="footer">
</div> 
```

和 CSS

```
#header {
  height: 60px;
  width: 100%;
}

#container {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 60px;
  bottom: 60px;
  left:0;
}

div#left {
width: 600px;
float: left;
height: 100%;
}

div#left-top {
width: 100%;
height: 200px;
}

div#left-bottom {
#width: ?;
#height: ?;
}

div#right {
width:100%;
height: 100%;
margin-left:600px;
}

div#footer {
position: absolute;
width: 100%;
height: 60px;
bottom: 0;
left: 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:52:22.997

为什么不只使用绝对定位？看看这个：http: [//jsfiddle.net/hPpTV/](http://jsfiddle.net/hPpTV/)

```
#header, #container, #left, #left-top, #left-bottom, #right, #footer {
    position: absolute;
}
#header {
    top:0;
    height: 60px;
    width: 100%;
}
#container {
    width: 100%;
    top: 60px;
    bottom: 60px;
}
#left {
    top: 0;
    bottom:0;
    width: 300px;
}
#left-top {
    top:0;
    left:0;
    width: 100%;
    height: 200px;
}
#left-bottom {
    top: 200px;
    bottom: 0;
    width: 100%;
    overflow:auto;
}
#right {
    top:0;
    left: 300px;
    right: 0;
    bottom: 0;
    overflow:auto;
}
#footer {
    width: 100%;
    height: 60px;
    bottom: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:52:01.063

```
#header {
  height: 60px;
  width: 100%;
}
#container {
 height:100%;
}
div#left {
width: 600px;
float: left;
height: 100%;
}
div#left-top {
width: 100%;
height: 200px;
}
div#left-bottom {
height:150px;
width:100%;
overflow-x:scroll;
overflow-y:hidden;
}
div#left {
width:40%;
float:left;
height: 100%;
}
div#right {
width:60%;
height: 100%;
float:right;
}
div#footer {
width: 100%;
height: 60px;
} 
```

# objective-c - 在objective-c中暂停for循环。可能的？

> ID：14890878
> 
> 赞同：0
> 
> 时间：2013-02-15T08:41:44.740
> 
> 标签：objective-c, for-loop

听起来可能是个愚蠢的问题，但是出于好奇，是否可以在目标 c 中暂停 for 循环？

例如：

```
for (NSManagedObject *a in sortedArray)
{
  //do something that takes time, for example download something
} 
```

在上面的示例中，for 循环将同时开始所有下载，因为在开始下载（或您放在那里的任何操作）之后，它将转到数组中的下一个对象。如果我想等到下载完成怎么办？有没有办法暂停下载或者我是否必须重新启动 for 循环以跳过已经下载的循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:53:16.513

有几种方法可以实现这一点。一种方法是使用 Grand Central Dispatch 信号量。在此处阅读有关调度信号量的信息：http: [//www.mikeash.com/pyblog/friday-qa-2009-09-18-intro-to-grand-central-dispatch-part-iv-odds-and-ends.html](http://www.mikeash.com/pyblog/friday-qa-2009-09-18-intro-to-grand-central-dispatch-part-iv-odds-and-ends.html)。

还要检查这个问题，这可能正是您需要的：[如何向一个线程发出信号以等待下载完成，然后将数据传递给等待线程](https://stackoverflow.com/questions/8397601/how-can-i-signal-one-thread-to-wait-until-a-download-is-finished-and-after-that)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:07:00.767

您需要将 NSThreads / GCD 用于多个进程。

但是您将不得不处理同步和异步方法，有时还需要处理回调。

# apache - RewriteEngine 不适用于子域

> ID：14890880
> 
> 赞同：0
> 
> 时间：2013-02-15T08:42:17.097
> 
> 标签：apache, .htaccess, mod-rewrite

这是我的 .htaccess 文件：

```
RewriteEngine On

RewriteBase /
RewriteRule (.*)tiny_mce_popup\.js$ /d_text.cgi?act=tiny_mce_popup.js [L]
RewriteRule (.*)sitemap\.xml$ /d_text.cgi?act=sitemap.xml [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) /index.cgi?act=select&htmlfile=$1 [QSA] 
```

现在这在主要域（如 example.com、other.com 等）上运行良好，但不适用于子域（如 sub.example.com、mysubdomain.other.com 等）。这里有什么问题？

# filter - 想了解卡尔曼滤波器需要哪些知识

> ID：14890882
> 
> 赞同：1
> 
> 时间：2013-02-15T08:42:24.133
> 
> 标签：filter, kalman-filter

我是一名程序员，我想在工作中使用卡尔曼滤波器，但是因为这些公式很难理解，所以我一直坚持下去，如果我想了解卡尔曼滤波器，你能告诉我需要哪些基础知识吗？顺便说一句，我学过一些基础数据结构和算法，但我的数学不是很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:11:56.780

这取决于您对“理解”的想法。如果您想了解如何推导滤波器、对其进行调整并将其应用于复杂的任务，则您需要一个良好的矩阵代数和算法的掌握，以及对数学建模的非常好的理解，这意味着微分方程。

如果你想了解已经编写好的卡尔曼算法是如何工作的，并且它只是一个更“灵活/自适应”的低通滤波器版本，你只需要一些好书，不要深入研究方程。我可以推荐的最好的书之一是[金菲尔](http://www.amazon.co.uk/Kalman-Filter-Beginners-MATLAB-Examples/dp/1463648359)

如果您想获得更具体的答案，您可能需要像@hd1 已经建议的那样提出更具体的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:47:26.457

你的数据是什么样的？[卡尔曼滤波器](http://www.cs.unc.edu/~welch/kalman/media/pdf/Kalman1960.pdf)完全有可能不是您需要的。我会阅读摘要，也许还有一些参考资料。届时，如果您还有其他问题，请在此处发布具体问题。

# signalr - 跨域 SignalR 组

> ID：14890888
> 
> 赞同：0
> 
> 时间：2013-02-15T08:42:58.423
> 
> 标签：signalr

我在网站 A ( `localhost:6599`) 中使用 SignalR 持久连接。在渲染 A/index.html 并连接到 /goose（我的连接名称！）时，组在 SSE 上受到尊重。将代码复制到网站 B ( `localhost:58660`) 并将 $.connection 更改为绝对 URL ( `http://localhost:6599/goose`) 时，来自网站 B 的 signalR 客户端不会收到发送到同一组的消息。

同时B站可以发送消息，A站客户端会在群里接收。从组消息更改为广播，消息同时到达网站 A 和 B 客户端。

我在网站 A 上的代码：

```
 <div id="data"></div>

    <script>
        $(document).ready(function() {
            var connection = $.connection('/goose', "group=123", true);

            connection.start().done(function() {

                connection.received(function(data) {
                    console.log(data);
                    $("#data").html(data);
                });

                connection.send("123:hooo");
            }
            );

        });

    </script> 
```

在服务器端：

```
public class GooseConnection : PersistentConnection
{
    protected override Task OnConnected(IRequest request, string connectionId)
    {
        var group = request.QueryString["group"];

        return Groups.Add(connectionId, group);
    }

    protected override Task OnReceived(IRequest request, string connectionId, string data)
    {
        // Messages are sent with the following format
        // group:message
        string[] decoded = data.Split(':');
        string groupName = decoded[0];
        string message = decoded[1];

        // Send a message to the specified
        return Groups.Send(groupName, message);
    }

    protected override Task OnDisconnected(IRequest request, string connectionId)
    {
        return Groups.Remove(connectionId, request.QueryString["group"]);
    }

} 
```

我在网站 B 上的代码：

```
var connection = null;
        $(document).ready(function () {
            connection = $.connection('http://localhost:6599/goose', "group=123", true);

            connection.start({ jsonp: true }).done(function () {

                connection.received(function (data) {
                    console.log(data);
                    alert('oooyeah');
                    $("#data").html(data);
                });

                connection.send("123:hooo");
            }
            );

        });

        function tryagain() {
            connection.send("123:hooo");
        } 
```

来自网站 A 的跟踪（对格式感到抱歉）：

```
[21:31:58 GMT+0000 (GMT Standard Time)] SignalR: Negotiating with
'/goose/negotiate'. jquery.signalR-1.0.0-rc2.min.js:10 [21:31:58 GMT+0000 (GMT Standard Time)] SignalR: Attempting to connect to SSE endpoint 'http://localhost:6599/goose/connect?transport=serverSentEvents&connectionId=93b07a1b-779f-44e9-87f3-3eb201a97fdd&group=123&tid=0' jquery.signalR-1.0.0-rc2.min.js:10 [21:31:59 GMT+0000 (GMT Standard Time)] SignalR: EventSource connected jquery.signalR-1.0.0-rc2.min.js:10 [21:31:59 GMT+0000 (GMT Standard Time)] SignalR: Now monitoring keep alive with a warning timeout of 40000 and a connection lost timeout of 60000 jquery.signalR-1.0.0-rc2.min.js:10 hooo localhost:18 [21:44:30 GMT+0000 (GMT Standard Time)] SignalR: EventSource readyState: 0 jquery.signalR-1.0.0-rc2.min.js:10 [21:44:30 GMT+0000 (GMT Standard Time)] SignalR: EventSource reconnecting due to the server connection ending jquery.signalR-1.0.0-rc2.min.js:10 [21:44:32 GMT+0000 (GMT Standard Time)] SignalR: EventSource calling close() jquery.signalR-1.0.0-rc2.min.js:10 [21:44:32 GMT+0000 (GMT Standard Time)] SignalR: EventSource reconnecting 
```

来自网站 B 的跟踪：

```
[21:30:33 GMT+0000 (GMT Standard Time)] SignalR: Auto detected cross domain url. jquery.signalR-1.0.0-rc2.min.js:10 [21:30:33 GMT+0000 (GMT Standard Time)] SignalR: Negotiating with 'http://localhost:6599/goose/negotiate'. jquery.signalR-1.0.0-rc2.min.js:10 [21:30:33 GMT+0000 (GMT Standard Time)] SignalR: SignalR: Initializing long polling connection with server. jquery.signalR-1.0.0-rc2.min.js:10 [21:30:33 GMT+0000 (GMT Standard Time)] SignalR: Attempting to connect to 'http://localhost:6599/goose/connect?transport=longPolling&connectionId=d01cebe3-28f6-4150-a606-b9d64224edd7&group=123&tid=3' using longPolling. jquery.signalR-1.0.0-rc2.min.js:10 [21:30:33 GMT+0000 (GMT Standard Time)] SignalR: Longpolling connected jquery.signalR-1.0.0-rc2.min.js:10 [21:30:33 GMT+0000 (GMT Standard Time)] SignalR: Attempting to connect to 'http://localhost:6599/goose?transport=longPolling&connectionId=d01cebe3-28f…cloud.Spotify.Goose.Connections.GooseConnection.123%22%5D&group=123&tid=10' using longPolling. jquery.signalR-1.0.0-rc2.min.js:10 [21:32:29 GMT+0000 (GMT Standard Time)] SignalR: Attempting to connect to 'http://localhost:6599/goose?transport=longPolling&connectionId=d01cebe3-28f…acloud.Spotify.Goose.Connections.GooseConnection.123%22%5D&group=123&tid=2' using longPolling. jquery.signalR-1.0.0-rc2.min.js:10 
```

我尝试过的事情：

*   将自动重新连接添加到 global.asax ( GlobalHost.HubPipeline.EnableAutoRejoiningGroups();)
*   手动设置 .start({jsonp:true})
*   广播到每个客户端 var context = GlobalHost.ConnectionManager.GetConnectionContext(); context.Connection.Broadcast("这是一个黑客"); 这行得通。

任何进一步的调试建议将不胜感激。安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:38:05.727

您对组的问题可能是由于客户端重新连接时组不会自动重新加入。在同一个域上运行时这不是问题，因为您的客户端可能使用永远帧或服务器发送事件传输，除非底层连接出现问题，否则不会重新连接。

但是，对 SignalR 的跨域访问需要 WebSocket 或长轮询传输。考虑到您在团体中遇到的问题，后者可能会在您的情况下使用。（注意：您的 SignalR 服务器需要在 Windows 8 或 2012 上运行 .NET 4.5 才能支持 WebSockets）。每次接收消息时，长轮询传输都必须重新连接到 SignalR 服务器。

要解决此问题，请添加以下内容：

```
public class GooseConnection : PersistentConnection
{
    protected override IEnumerable<string> OnRejoiningGroups(IRequest request, IEnumerable<string> groups, string connectionId)
    {
        return groups;
    } 
} 
```

通过重写`OnRejoiningGroups`以返回`groups`参数而不是空集合，您允许客户端在重新连接时重新加入他们之前所在的所有组。但是，从 RC2 开始，SignalR 并没有验证重新连接的客户端是否确实以前在他们试图重新加入的那些组中。该`groups`参数只是从重新连接请求的查询字符串中提取的。当然，行为良好的客户端只会尝试重新加入之前所在的组，但是在 RC2 上启用自动重新加入组允许攻击者将自己添加到任何组中。这对许多应用程序来说不是问题，但这就是默认情况下不启用组重新加入的原因。

在 SignalR 的 RTM 版本中，默认情况下将启用自动重新加入组。客户端尝试重新加入的组列表也将由服务器签名，使其更加安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T16:57:17.243

`EnableAutoRejoiningGroups`是 Hubs API 的一项功能，由于您在较低的`PersistentConnection`API 层工作，因此对您没有帮助。正如@halter73 所说，`OnRejoiningGroups`这是在`PersistentConnection`图层上执行此操作的方法。

# sql - 如何加快这个 SQL 查询？

> ID：14890892
> 
> 赞同：2
> 
> 时间：2013-02-15T08:43:08.237
> 
> 标签：sql, performance

在这种情况下，我试图从我的 Oracle DB 中生成一个包含很多行的报告，我现在有大约 5 分钟的查询时间，想看看是否有任何方法可以改变查询以加快查询时间，

```
SELECT ib1.id as InvoiceNumber,
ib1.shipmentno as ShipmentNumber,
ib1.ref as ConsignorRef, 
cons1.name as ConsName,
ib1.consolidation_type as ShipmentType, 
to_char(ib1.custom_field12, 'YYYYMMDDhhmmss') as InvoiceDate, 
ib1.reg_time as HousingDate, 
ib1.list_add_time as Pickup, 
ib1.confirm_date as Date, 
ex1.stat_date as Timestamp, 
ib1.date_prefered as ETA, 
ib1.field7 as Housing, 
ib1.countrycode as Country
FROM Invoice ib1,
     ek_export ex1,
      ek_cons cons1
WHERE ib1.ex_id=124
AND ib1.id=ex1.ib_id
AND ex1.state_type='DELIVERED'
AND ib1.cons_id=cons1.id
AND ex1.ex_id=124
AND trunc(ib1.reg_time) BETWEEN to_date('2009-01-01', 'YYYY-MM-DD') AND to_date('2010-01-01', 'YYYY-MM-DD')
ORDER BY ib1.id 
```

有小费吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T08:53:02.827

您必须检查您的查询是否使用索引。

我认为你必须索引：

*   ex1.ib_id
*   ex1.state_type
*   ib1.cons_id
*   ex1.ex_id
*   ib1.reg_time

另外，避免在查询条件中使用函数，尽量直接放入函数的结果

*   to_date('2009-01-01', 'YYYY-MM-DD') 尽可能替换为结果
*   trunc(ib1.reg_time)，尝试存储已经“截断”的值

然后，像 Ingo 的回答中所说的那样进行连接，以便更好地控制您的连接。

最后，你按 ib1.id 排序你的结果，有必要吗？如果不是，请删除 order 子句。

Check at this documentation of Oracle, it's about analysis of query. [http://docs.oracle.com/cd/B10500_01/server.920/a96533/ex_plan.htm](http://docs.oracle.com/cd/B10500_01/server.920/a96533/ex_plan.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T08:49:01.410

您需要分析查询。您可以查看执行计划并查看在每个参与表上创建的索引。

经验法则是应该在参与 where 子句和 order by 子句的列上创建索引。

另一个类似的问题在这里：[让我的 SQL 查询更高效](https://stackoverflow.com/questions/14599898/making-my-sql-query-more-efficient)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:46:12.217

查询有两个步骤，查询本身和提取，我认为提取不能被压缩。你能说一下每一步的时间吗？（mysql-worbench 提供这两个信息）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T08:48:43.790

您的查询首先对所有表进行交叉连接，然后在 where 子句中过滤巨大的结果......使用内部连接首先只选择重要的行......比如

```
...
from invoice ib1 
join ek_export ex1 on ib1.id = ex1.ib_id
join ek_cons cons1 on ib1.cons_id = cons1.id
... 
```

# jquery - 包含布尔值的 html5 数据属性

> ID：14890895
> 
> 赞同：3
> 
> 时间：2013-02-15T08:43:25.837
> 
> 标签：jquery, asp.net-mvc, visual-studio-2010, html, asp.net-mvc-4

在我们的开发环境中，我们使用 HTML5 数据属性来保存布尔值（我现在知道这不是要走的路）。例如：

```
<div id="x" data-mydata="True"></div> 
```

然后在我们的 JS 代码（使用 jQuery）中，我们成功地获取了布尔值：

```
var v = $('#x').data().mydata;
if(v == 'True') {...} 
```

这非常有效——对于 False 值也是如此。

但是，当我们将其推送到我们的 QA 环境时，它停止工作。尽管我们将值设置为“True”，但 jQuery 选择器读取的值是“data-mydata”（数据属性的名称）。

如上所述，我们已经学习了处理布尔值的正确方法（如果值为 false，则排除数据属性）。

但是，我的问题是：为什么这在我们的开发环境中以一种方式（错误地）工作？我们使用的是相同版本的 jQuery，据我检查，dll 是相同的版本。

仅供参考 - 我们的开发环境目前是：VS2010，ASP.NET MVC4 .NET 4.0。

谢谢

格里夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:48:19.480

我以前似乎`.data`没有这样使用过，但如果它在您的本地机器上工作，我会假设浏览器在 QA 环境中不一样，并且在获取值时遇到问题：

尝试将代码更改为：

```
 var v = $('#x').data("mydata");

 var v = $("#x").attr("data-mydata"); 
```

# firefox - Geb 如何自动填充用户名/密码提示

> ID：14890900
> 
> 赞同：0
> 
> 时间：2013-02-15T08:44:10.577
> 
> 标签：firefox, selenium, acceptance-testing, spock, geb

我使用带有 spock 的 geb 作为我的验收测试框架。一切都很好，除了一些测试存在问题，当它重定向到另一个网站时，我们被提示输入用户名和密码以访问该网站。因为这是浏览器提示而不是我可以提交的表单，有什么方法可以在网站的浏览器配置文件中自动设置或在驱动程序上设置？

我正在使用 firefox 作为浏览器类型进行测试。

编辑：这是我的 build.gradle 文件

```
apply plugin: 'eclipse'
apply plugin: 'groovy'
apply plugin: 'idea'

repositories {
    mavenCentral()
}

task wrapper(type: Wrapper) {
    gradleVersion = '1.3'
}

// The drivers we want to use
ext.drivers = ["firefox"]

dependencies {
    groovy group: 'org.codehaus.groovy', name: 'groovy', version: '1.8.6'

    def gebVersion = "0.7.2"
    def seleniumVersion = "2.26.0"

    // If using Spock, need to depend on geb-spock
    testCompile "org.codehaus.geb:geb-spock:$gebVersion"
    testCompile "org.spockframework:spock-core:0.6-groovy-1.8"

// Drivers
    drivers.each { driver ->
        testCompile "org.seleniumhq.selenium:selenium-$driver-driver:$seleniumVersion"
    }
}

drivers.each { driver ->
    task "${driver}Test"(type: Test) {
        testReportDir = reporting.file("$name/tests")
        testResultsDir = file("$buildDir/test-results/$name")

        systemProperty "geb.build.reportsDir", reporting.file("$name/geb")
        systemProperty "geb.env", driver
        // If you wanted to set the baseUrl in your build…
        // systemProperty "geb.build.baseUrl", "http://myapp.com"
    }
}

task test(overwrite: true, dependsOn: drivers.collect { tasks["${it}Test"] }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:25:23.513

我不知道这是否会起作用，因为 2.25.0 的 changlog 提到它还没有为任何驱动程序实现，但是有一种方法可以使用 WebDriver 切换到警报，然后使用[authenticateUsing(Credentials)](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/Alert.html#authenticateUsing%28org.openqa.selenium.security.Credentials%29)方法。

在您的 Spock 规范中，您可以尝试以下操作：

```
driver.switchTo().alert().authenticateUsing(new UserAndPassword('user', 'pass')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-06T08:13:13.997

为了解决这个问题，我最终在 Firefox 中使用了浏览器配置文件并安装了一个会自动填写提示的插件。然后在 Geb 验收测试中进行设置，以便它自动使用具有正确配置文件的 Firefox。

# javascript - 想要在 HTML 中随机更改图像点击按钮

> ID：14890903
> 
> 赞同：0
> 
> 时间：2013-02-15T08:44:47.613
> 
> 标签：javascript, html

我正在学习 html5 和 javascript ，

我想在单击按钮时随机更改图像，我在本地存储了三张图像，想要设置这些图像，并且还想在数据库中存储哪些图像设置了多少次的数据。

任何人都知道如何做到这一点，在此先感谢。

想要将一些随机数传递给函数 changeImage(randomNumber) 并根据数字想要更改图像

```
<!DOCTYPE html>
<html>
  <head>
    <h1>Click on Image to Change Image </h1>
    <script>
    function changeImage(){
        var image = document.getElementById("image");
        switch(1){
        case 1 :
            image.src = "tulips.JPG";
            break;
        case 2 :
            image.src = "life.JPG";
            break;
        case 3:
            image.src = "Desert.JPG";
            break;
            document.getElememtById("image_change_button").innerHTML = Math.random();
        }   
    }
    </script>
  </head>
  <body>
    <div>
      <img id = "image" src = "life.JPG" width = "480" height = "100" ></img>
    </div>
    <div>
      <button id = "image_change_button" onClick = "changeImage()" width = " 100" height = "100">OnClick</button>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:53:44.060

要在网页上重新加载另一张图片，请使用 jQuery。它具有“.load”功能，您可以使用该功能将内容加载到某个元素中。在加载它之前，您必须生成一个随机数，该数字将从预定义的图像数组中选择图像（案例 1 显示图片 1.jpg，案例 2.. 等等）。

更重要的是 JavaScript 和 jQuery 是在客户端执行的，因此您将无法从它们访问数据库。您将需要某种服务器端语言，例如将数据存储在数据库中的 PHP。

编辑：

没有测试过，但你可以从中得到一个基本的想法：

```
//...
<script>
function changeImage(){
                randInt = Math.random(3)+1;
                switch(randInt){
                case 1 :
                    image = "tulips.JPG";
                    break;
                case 2 :
                    image = "life.JPG";
                    break;
                case 3:
                    image = "Desert.JPG";
                    break;
                document.getElememtById("image_container").innerHTML = 
                    "<img src='" + image + "'/>";
                }
          }
</script>
//...
<div id="image_container"></div><br/>
<div onclick="changeImage()">CLICK ME!</div>
//... 
```

编辑2：

至于使用本地数据库，请参考：

> [http://blog.darkcrimson.com/2010/05/local-databases/](http://blog.darkcrimson.com/2010/05/local-databases/)

例如，您可以将其添加到 changeImage() 函数中：

```
// between the last two curly braces inser a semicolon and then   
if(typeof(Storage)!=="undefined"){
   if (localStorage.clickcount){
localStorage.clickcount=Number(localStorage.clickcount)+1;
}else{
localStorage.clickcount=1;
}
document.getElementById("result").innerHTML="You have clicked the button " +     localStorage.clickcount + " time(s).";
}else{
document.getElementById("result").innerHTML="Sorry, your browser does not support web storage...";
}; 
```

}

现在，创建一个 ID 为“result”的 div，它将显示当前结果。

# c# - 使用 XDocument 在 c# 中将 XML 字符串转换为对象

> ID：14890904
> 
> 赞同：0
> 
> 时间：2013-02-15T08:44:48.273
> 
> 标签：c#, linq, parsing, xml-parsing, linq-to-xml

我似乎无法将我的 xml 字符串解析为自定义对象。这是我的代码：

```
 private Account parseXmlToAccount (String xml)
    {
        XDocument doc = XDocument.Parse(xml);
        Console.Out.WriteLine("a" + xml);
        List<Account> result = 
            (
                from x in doc.Root.Elements("user")
                select new Account()
                {
                    Session = (string) x.Element("session").Value,
                    User = (string) x.Element("user").Value
                }).ToList();
        Console.Out.WriteLine("b");
        return result.First(); 
```

和 Account.cs：

```
class Account
{
    public string Session { get; set; }
    public string User { get; set; }

    public override string ToString()
    {
        return Session + " " + User;
    }
} 
```

和我的 xml 字符串：

```
<user>
  <session>7981239761293767891</session>
  <user>873948797862364</user>
</user> 
```

和我的错误信息：

```
UNHANDLED EXCEPTION: System.NullReferenceException: Object reference not set to an instance of an object
at testMonoAndroidApp.LoginManager.<parseXmlToAccount>m__4 (System.Xml.Linq.XElement) <0x00044>
at System.Linq.Enumerable/<CreateSelectIterator>c__Iterator27`2<System.Xml.Linq.XElement, testMonoAndroidApp.Account>.MoveNext () <0x0015b>
at System.Collections.Generic.List`1<testMonoAndroidApp.Account>.AddEnumerable (System.Collections.Generic.IEnumerable`1<testMonoAndroidApp.Account>) <0x000ab>
at System.Collections.Generic.List`1<testMonoAndroidApp.Account>..ctor (System.Collections.Generic.IEnumerable`1<testMonoAndroidApp.Account>) <0x00093>
at System.Linq.Enumerable.ToList<testMonoAndroidApp.Account> (System.Collections.Generic.IEnumerable`1<testMonoAndroidApp.Account>) <0x0003b>
at testMonoAndroidApp.LoginManager.parseXmlToAccount (string) <0x0012f>
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T08:46:36.960

你的根是`user`元素，所以改变：

```
from x in doc.Root.Elements("user") 
```

到

```
from x in doc.Elements("user") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T09:03:45.410

```
List<Account> result = (from o in doc.Elements()
             select new Account{ 
               User = o.Element("user").Value, 
               Session = o.Element("session").Value 
             }).ToList(); 
```

# mysql - MySQL中具有表比较的多次更新

> ID：14890907
> 
> 赞同：0
> 
> 时间：2013-02-15T08:45:02.637
> 
> 标签：mysql, sql

我不知道如何用一个查询进行多次更新。

这是我的 2 张桌子。

**设备表**

```
DeviceID  Brand     SerialNumber
---------------------------------
1         Nintendo  324234324
2         Nintendo  89978333
3         Sony      Z3432343
4         Sony      Z3424335 
```

**临时表**

```
DeviceID  Brand     SerialNumber
---------------------------------
NULL      Nintendo  324234324
NULL      Nintendo  89978333
NULL      Sony      Z3432343
NULL      Sony      Z3424335 
```

我将如何在temporary_table 中填写DeviceID？我需要什么样的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:52:18.630

您需要使用更新语句：

```
UPDATE  temporary_table
SET     DeviceID = (    SELECT  Devices_table.DeviceID
                        FROM    Devices_table
                        WHERE   Devices_table.Brand = temporary_table.Brand
                        AND     Devices_table.SerialNumber = temporary_table.SerialNumber
                    ); 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!2/38ddb/1)**

或者您可以使用连接而不是相关子查询：

```
UPDATE  temporary_table
        INNER JOIN Devices_table
            ON Devices_table.Brand = temporary_table.Brand
            AND Devices_table.SerialNumber = temporary_table.SerialNumber
SET     temporary_table.DeviceID = Devices_table.DeviceID; 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!2/eeb79/1)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:56:23.367

是的，您可以使用以下查询：

```
UPDATE  temporary_table
SET     DeviceID = Devices_table.DeviceID
FROM    temporary_table
INNER JOIN Devices_table
ON Devices_table.Brand = temporary_table.Brand
AND Devices_table.SerialNumber = temporary_table.SerialNumber; 
```

# c# - 防止 WPF 文本框在获得焦点时改变外观

> ID：14890911
> 
> 赞同：1
> 
> 时间：2013-02-15T08:45:15.163
> 
> 标签：c#, wpf, custom-controls

在我的自定义控件中，我有 2 个文本框。当它们中的任何一个被聚焦时，它会稍微改变它的风格......它会失去一点它的边框。我想阻止这种行为，这似乎是默认的文本框行为。

现在，我假设它与样式有关，可能与文本框模板的一部分有关

```
<Setter Property="FocusVisualStyle" Value="{x:Null}"/> 
```

但是，有没有办法阻止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:08:09.387

@Daniel 你必须编辑`Focussed State StoryBoard`. 对于那个编辑你`TextBox Template`改变状态。如果你有`Expression Blend` 它对你来说很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:19:16.723

您必须编辑`TextBox ControlTemplate`可以在[此处](http://msdn.microsoft.com/en-us/library/ms752068%28v=vs.85%29.aspx)找到的默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:59:33.020

1.  您需要自定义控件的控件模板。
2.  在那里的资源中，您需要设置所有文本框目标类型的样式。这样，您就不会影响常规文本框。

如果您分享一些我们可以查看/修改以实现您需要的代码，将会很有帮助。

# android - Android - 在 imageView 中显示进度对话框（作为空视图），直到从服务器下载图像

> ID：14890912
> 
> 赞同：0
> 
> 时间：2013-02-15T08:45:16.493
> 
> 标签：android, imageview, android-viewpager, progressdialog

我有一个视图寻呼机，它显示从服务器下载的图像。在下载图像时，我默认显示一个空存根。![在此处输入图像描述](../Images/e0d273a32c462ca1eb9e5c1e35e995ae.png)

但是，我希望在下载图像之前在此处显示进度对话框，而不是存根。我怎样才能做到这一点？

图像显示方法：

```
public void DisplayImage(String url, Activity activity, ImageView imageView) {
        imageViews.put(imageView, url);
        Bitmap bitmap = memoryCache.get(url);
        if (bitmap != null)
            imageView.setImageBitmap(bitmap);
        else {
            queuePhoto(url, activity, imageView);
            imageView.setImageResource(stub_id);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T08:52:33.370

建立一个进度对话框：`ProgressDialog.show(context,"loading","loading");`

或者

将`ImageView`与 a `ProgressBar`（最好是中间微调器）一起放在 a 中`FrameLayout`，并通过 切换它们的可见性`setVisibilty()`。

# javascript - document.getElementById('txt1').removeAttribute('ReadOnly') 是否会删除 'txt1' 的内容？

> ID：14890917
> 
> 赞同：0
> 
> 时间：2013-02-15T08:45:46.490
> 
> 标签：javascript, asp.net

我的asp文档中有这个功能：

```
<script type="text/javascript" language="javascript">         
   function OnClientUploadCompleteFn(){
        document.getElementById('ctl00_ContentPlaceHolder1_txt1').removeAttribute('ReadOnly');
   }
</script> 
```

我触发功能`ajax:AsyncFileUpload`

```
<ajax:AsyncFileUpload ID="fuFile" runat="server" Width="250px" 
                   OnClientUploadComplete="OnClientUploadCompleteFn" /> 
```

我成功地实现了我的目标，即`txt1`在客户端上传完成时启用。
我现在的问题是，当我检索时`txt1`，它在这里返回一个空值：

```
obj.Details = string.Format(def.VAL_SPONSOR_ATTACH, Convert.ToInt32(ViewState[def.ID].ToString()),
         txt2.Text.Trim(), txt1.Text.Trim()); 
```

我哪里做错了？

PS
我检查了我的代码以及我的C#代码清除文本框的所有可能性都消失了（注释掉了）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:36:43.103

如果您设置了 TextBox 的 ReadOnly 属性，就会发生这种情况。服务器不会在回发时处理新值。

如果是这样，在您的服务器端代码中，替换

```
txt1.ReadOnly = true; 
```

和

```
txt1.Attributes.Add("readonly", "readonly"); 
```

# ios - IOS - iCloud中的核心数据备份

> ID：14890919
> 
> 赞同：0
> 
> 时间：2013-02-15T08:45:51.227
> 
> 标签：ios, ipad, core-data, icloud

我有一个 iPad 应用程序，它可以跟踪日常开支并做一些额外的事情。该应用程序使用核心数据作为数据存储机制。

我计划添加一个功能来将用户的数据库备份到 iCloud，因为

*   我计划将应用程序转换为通用
*   防止附件数据丢失

我目前的要求是，数据库应该是本地的，并且最近的备份应该在 iCloud 中可用。

1 - 是否可以将整个数据库备份到 iCloud 并将其映射到本地数据库？2 - 或者是否有任何其他推荐的机制来实现这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:51:15.450

由于您只是在问一个一般性问题 - 请查看[Using Core Data with iCloud Programming Notes](http://developer.apple.com/library/ios/#releasenotes/DataManagement/RN-iCloudCoreData/)，如果您有更详细的问题，请返回。

# eclipse - 重命名包中的所有 Java 类（在 Eclipse 中）

> ID：14890920
> 
> 赞同：0
> 
> 时间：2013-02-15T08:45:52.573
> 
> 标签：eclipse

是否可以使用单个命令重命名包中的所有类。现在，我的班级名称就像 com.abc.Class1/com.abc.Class2。现在我正在将所有这些类复制到一个新包 com.xyx 下......在类定义中，我使用“文件搜索”更改了名称......所以现在我如何更改我的包下的名称（一个命令适用于所有包“xyz”下的类）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:55:17.663

如果我理解正确，您想将我们的类移动到另一个包中。为此，在项目资源管理器中单击包并按**Shift+Alt+R**重命名它，有效地将所有包含的类移动到新包中。这不会影响类的名称

**编辑**类名前缀？这至少是非常不寻常的。Eclipse 无法帮助您解决这些问题。但是如果你在一台 linux 机器上，你可以从命令行进行大规模移动。我自己并不流利，所以这里有一个[**mmv 教程**](http://linux.dsplabs.com.au/mmv-copy-append-link-move-multiple-files-under-linux-shell-bash-by-wildcard-patterns-p5/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T12:19:06.000

尝试一些这样，移动然后重命名目录中的所有文件：

```
import java.io.File;

    public class Ls {
        public static void main(String args[]) 
        {
            String[] dir = new java.io.File("test").list();
            java.util.Arrays.sort(dir); 
            File f[] = new File("test").listFiles();
            int len1 = dir.length;
            for (int i=0;i<len1; i++)
            {
                System.out.println(dir[i]);
                String name = f[i].getName();
                System.out.println(name);
                int j=name.indexOf('.');
                System.out.println(j);
                String newname = name.substring(0,j) + "_BS" + name.substring(j,name.length()); 
                System.out.println(newname);
                File newFileName=new File(f[i].getParentFile(), newname);
                System.out.println("newFileName="+newFileName);
                f[i].renameTo(newFileName);   
            }
        }   
    } 
```

# php - 在mysql中插入特殊字符？

> ID：14890926
> 
> 赞同：0
> 
> 时间：2013-02-15T08:46:21.367
> 
> 标签：php, mysql

有人可以告诉我我做错了什么。我有一个表格，我将数据作为文本插入到 mysql 中，但是当你输入撇号或类似的东西时，它会在其中添加一个 \。

有人可以推荐如何让我的 mysql 允许特殊字符吗？

这是我的html表单：

```
<form action="includes/changebio.php" method="post" id="form1">         
 <textarea id="bio" textarea name="bio" data-id="bio" maxlength="710"><?php echo htmlspecialchars($profile['bio']); ?></textarea>
<input type="image" src="assets/img/icons/save-edit.png"class="bio-submit" name="submit" value="submit" id="submit"/>
</form> 
```

我的mysql语句：

```
<?php
require('_config/connection.php');
?>
<?php 
session_start();
include '_config/connection.php'; 
$bio = $_POST['bio'];
$result = mysql_query("SELECT bio FROM ptb_profiles WHERE id=".$_SESSION['user_id']."");
if(!$result) 
{ 
echo "The username you entered does not exist"; 
} 
else 
if($bio!= mysql_result($result, 0)) 
{ 
echo ""; 
    $sql=mysql_query("UPDATE ptb_profiles SET bio ='".addslashes($bio)."' WHERE id=".$_SESSION['user_id'].""); 
}
    if($sql) 
    { 
header("Location: {$_SERVER['HTTP_REFERER']}");
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:52:39.230

为了保存您的字符串，撇号是正常的。并避免 sql 注入想象您的查询`'`在中间有一个。这将类似于`where name = 'your's'`会导致错误的东西。

您可以做的是在获取数据时。`\`您可以通过添加`stripslashes($mystring);`代码来删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:03:29.270

如果要在 Mysql 数据库中插入一些特殊字符，请使用 Unicode 格式。将表的排序规则设置为 utf8_unicode_ci。

添加`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />`到您的html文件头中。

使用以下代码进行数据库连接。

```
define('HOSTNAME', 'localhost');
define('USERNAME', 'user_name');
define('PASSWORD', 'password');
define('DATABASE', 'database_name');

$dbcon= mysql_connect(HOSTNAME, USERNAME, PASSWORD); 
mysql_query("SET character_set_results=utf8", $dbcon);
mb_language('uni');
mb_internal_encoding('UTF-8');
mysql_select_db(DATABASE, $dbcon);
mysql_query("set names 'utf8'",$dbcon); 
mysql_query("SET character_set_client=utf8", $dbcon);
mysql_query("SET character_set_connection=utf8", $dbcon); 
mysql_query("SET character_set_results=utf8", $dbcon); 
```

有关更多信息，请查看下面的链接。它可能对您有用..

[http://www.oyecoder.com/2013/02/store-any-language-data-in-your-mysql.html](http://www.oyecoder.com/2013/02/store-any-language-data-in-your-mysql.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:58:32.973

你为什么使用`adslashes()`函数？例如是为了防止 SQL 注入吗？
改用标准功能`mysql_real_escape_string()`。它是安全的，可以解决问题。
请记住，它与您使用的扩展无关，例如有些人说使用`PDO`扩展

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T08:51:03.697

2 件事。

1) 有人会告诉你停止使用 mysql_* 函数并改用 PDO。这实际上可能对您有很大帮助。2) 添加斜杠*有助于*插入特殊字符和防止 SQL 注入。我肯定会完全实现这一点，您应该使用一整套预防措施。

老实说，我会使用准备好的语句等切换到 PDO 方式。这将减少失败的可能性并提高可靠性。您可能会发现不需要添加斜杠来解决此类问题。

# arrays - 在 Fortran 中读取单个数组中的多个数据文件

> ID：14890931
> 
> 赞同：1
> 
> 时间：2013-02-15T08:46:42.380
> 
> 标签：arrays, file, fortran

我正在使用 fortran 77。我有多个（比如 N 个）数据文件，每个文件都包含相同大小（比如 S）的数据。我想将一个大小 (N*S) 的单个数组中的所有这些数据文件读入我的程序中。数据文件以排列的方式命名（datafile1.dat、datafile2.dat......datafileN.dat）。

任何线索我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:56:15.090

使用 Fortran 95 表示法可能的解决方案可能如下所示：

```
program test
  implicit none

  integer, parameter :: NN = 2
  integer, parameter :: SS = 3
  character(len=128) :: fname
  integer :: data(NN * SS)
  integer :: ii

  do ii = 1, NN
    write(fname, "(A,I0,A)") "datafile", ii, ".dat"
    open(12, file=fname, form="formatted")
    read(12, *) data((ii-1)*SS+1:ii*SS)
    close(12)
  end do
  print *, data

end program test 
```

如果需要，您可以轻松地将其重写为 Fortran 77 表示法，尽管大多数编译器已经理解 Fortran 90/95：

```
 program test
      implicit none

      integer NN, SS
      parameter(NN = 2, SS = 3)
      character*128 fname
      integer data(NN * SS)
      integer ii, jj

      do ii = 1, NN
        write(fname, "(A,I0,A)") "datafile", ii, ".dat"
        open(12, file=fname, form="formatted")
        do jj = 1, SS
          read(12, *) data((ii-1)*SS+jj)
        end do
        close(12)
      end do
      print *, data

      end program test 
```

# bash - 并行ping多个IP并创建列表：多个线程使用相同的变量（同步问题）

> ID：14890936
> 
> 赞同：1
> 
> 时间：2013-02-15T08:47:23.033
> 
> 标签：bash, parallel-processing, synchronization, ping

我需要 ping 设备列表并存储响应 ping 的设备的 IP。我有这段代码：

```
function add_ip_if_pings
{
    ping -c 1 -W 1 $1 > /dev/null
    if [ "$?" = "0" ]; then
        iplist="$iplist $1"
        echo $iplist
    fi
}

# ...

for id in $(seq "$2" "$3"); do
    for nr in $(seq 1 244); do
        add_ip_if_pings "10.$secondIpOctet.$id.$nr" &
    done

done

#waiting for all pings to finish
wait
echo "List: $iplist" 
```

因此，当我打印 in 的值时`$iplist`，`add_ip_if_pings`它总是包含一个 ip。最后我得到输出：

```
List: 
```

我想这是某种同步问题，因为多个线程使用相同的变量。这里最好的解决方案是什么？我需要并行ping所有设备，因为我不想永远等待......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:55:40.447

不要将 IP 添加到变量中，而是使用文件系统。在脚本的开头：

```
DATADIR=/tmp/multiping
rm -fr ${DATADIR} # Clean up data from previous run
mkdir ${DATADIR}  # Create directory 
```

后来在`function add_ip_if_pings`：

```
touch ${DATADIR}/$1 
```

在脚本的末尾：

```
LIST=$( cd ${DATADIR} ; ls ) 
```

# google-api - 谷歌酒店搜索 API

> ID：14890938
> 
> 赞同：3
> 
> 时间：2013-02-15T08:47:47.320
> 
> 标签：google-api

我想找到可以让我的公司写入 Google HotelFinder API 的 API，以便当结果出现在 HotelFinder 中时，我们的预订引擎可以在酒店品牌网站字段下发布价格？有人可以帮忙提供这些信息吗？Rgds

# highcharts - 使用 Overlay 悬停整个容器内容

> ID：14890944
> 
> 赞同：1
> 
> 时间：2013-02-15T08:48:16.867
> 
> 标签：highcharts, highstock

如何在鼠标悬停时在整个 Highcharts 图表上显示叠加效果？

类似于[contentHover的东西](http://www.backslash.gr/demos/contenthover-jquery-plugin/#demo5)

还可以在点击 contentHover 中的任何超链接时添加更多显示另一个图表！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:23:35.563

您可以像这样使用 jQuery 的悬停方法：http: [//jsfiddle.net/3zUGj/](http://jsfiddle.net/3zUGj/)

覆盖 div 的内容可以是任何你喜欢的。叠加层的不透明度为零。在 .hover 事件方法中，可以通过操作不透明度或使用其他 jQuery 效果来显示和隐藏覆盖层：显示、隐藏、淡入淡出、淡出等。

html

```
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
<div id="contentHover" style="min-width: 400px; height: 400px; margin: 0 auto; background:#999; text-align:center; padding:20px;top:0px; position:absolute; z-index:100; opacity:0"><a href="">New Graph</a></div> 
```

js

```
// high chart
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'line',
            marginRight: 130,
            marginBottom: 25
        },
        … highcharts implementation …
    });
});

// show hide the contentHover div on hover
var hover = $('#contentHover');
$('#contentHover').hover( function(){
    hover.css('opacity','1');
}, function(){
    hover.css('opacity','0');
});

// add click event to all links within contentHover, add new chart
$('#contentHover').on('click','a',function(){
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'line'
        },
        … highcharts implementation …
    });
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:29:48.407

您可以将鼠标悬停/鼠标移出操作添加到图表容器 div。

IE。

```
$('#container').mouseover(function(event){ 
```

$('#overlay').show();

}).mouseout(函数(事件){

$('#overlay').hide();

});

其中overlay是div的id（绝对位置），它比图表“over”。

# python - UnboundLocalError：在同步数据库时分配之前引用了局部变量“full_path”

> ID：14890948
> 
> 赞同：0
> 
> 时间：2013-02-15T08:48:26.960
> 
> 标签：python, django, opensuse

有一个[类似的问题](https://stackoverflow.com/questions/10534566/unboundlocalerror-local-variable-full-path-referenced-before-assignment)，但在我今天发现的特定情况下没有回答。

我在 openSUSE 上运行，并且在执行 syncdb 时遇到了这个神秘的错误。我发布我的发现以帮助处于类似情况的其他人。

```
> python manage.py syncdb
Creating tables ...
Installing custom SQL ...
Installing indexes ...
Traceback (most recent call last):
  File "manage.py", line 14, in <module>
    execute_manager(settings)
  File "/usr/local/lib/python2.7/site-packages/django/core/management/__init__.py",     line 459, in execute_manager
    utility.execute()
  File "/usr/local/lib/python2.7/site-packages/django/core/management/__init__.py",     line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/usr/local/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/usr/local/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/usr/local/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 164, in handle_noargs
    call_command('loaddata', 'initial_data', verbosity=verbosity, database=db)
  File "/usr/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 150, in call_command
    return klass.execute(*args, **defaults)
  File "/usr/local/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/usr/local/lib/python2.7/site-packages/django/core/management/commands/loaddata.py", line 239, in handle
    (full_path, ''.join(traceback.format_exception(sys.exc_type,
UnboundLocalError: local variable 'full_path' referenced before assignment 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:48:26.960

错误不是很漂亮（应该已经被捕获，并且应该向用户返回完整的错误消息），但是当您的系统上不存在某些默认或可选的序列化模块时会发生这种情况。

例如，如果在您的 settings.py 中，在`SERIALIZATION_MODULES`dict`wadofstuff.django.serializers.json`中提到了序列化模块，并且没有安装它，它将返回该错误。

安装它，例如：

```
pip install wadofstuff-django-serializers 
```

在 openSUSE 上，另一种可能是`python-xml`模块没有安装（它不是`python-base`包的一部分），因此导入可能会`xml.sax.saxutils`失败。

在这种情况下，请安装`python-xml`，例如通过执行以下操作：

```
sudo zypper in python-xml 
```

它应该可以工作。

如果这不起作用，您可以运行`pdb`以在它失败的地方放置一个断点。例如：

```
> python -m pdb manage.py syncdb
> manage.py(2)<module>() -> from django.core.management import execute_manager
(Pdb) b /usr/local/lib/python2.7/site-packages/django/core/management/commands/loaddata.py:110
Breakpoint 1 at /usr/local/lib/python2.7/site-packages/django/core/management/commands/loaddata.py:110
(Pdb) c
Creating tables ...
Installing custom SQL ...
Installing indexes ...
> /usr/local/lib/python2.7/site-packages/django/core/management/commands/loaddata.py(110)handle()
-> for fixture_label in fixture_labels:
(Pdb) n
> /usr/local/lib/python2.7/site-packages/django/core/management/commands/loaddata.py(111)handle()
-> parts = fixture_label.split('.') 
```

在某些时候，您会发现错误明显弹出：

```
ImportError: 'No module named xml.sax.saxutils' 
```

# java - JSON字符串字符

> ID：14890949
> 
> 赞同：0
> 
> 时间：2013-02-15T08:48:27.863
> 
> 标签：java, javascript, json

我有这些

`JSONObject obj=new JSONObject();`

`obj.put("id","foo");`

我的身份证是`string`。我可以用什么字符代替 foo？我可以放这些`"\!@#$%^&*()'"`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:06:44.240

请参阅**字符串**下的[http://www.json.org/](http://www.json.org/)。您可以使用：

 **> 除 " 或 \ 或控制字符外的任何 UNICODE 字符**

# php - 我正在尝试访问我的插件页面之一，但未找到

> ID：14890953
> 
> 赞同：0
> 
> 时间：2013-02-15T08:48:36.227
> 
> 标签：php, wordpress

我有一个正确验证用户身份的登录页面，问题是它没有找到下一个文件来打开它。

我的文件如下

```
 **Plugin Root directory**
     |                  |
     myindex_2343.php   | 
                        **MyClasses directory**
                          |               |
                          Login_2343.php  Member_2343.php 
```

登录_2343.php

```
<form name="mylogin" action="" method="post">
     .....
</form>
<?php
       if(isset($_POST['username']))
       {
            Authentication code goes here
            if(Authenticate)
            {
              echo '<script type="text/javascript">window.location.href="MyClasses 
              /Member_2343.php";</script>';
             }
        }
  ?> 
```

错误信息如下：

```
 The requested URL /wordpress/wp-admin/MyClasses/Member_2343.php was not 
   found on this server. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:57:57.817

在 window.location.href 添加你的插件根目录

```
<form name="mylogin" action="" method="post">
     .....
</form>
<?php
       if(isset($_POST['username']))
       {
            Authentication code goes here
            if(Authenticate)
            {
              echo '<script type="text/javascript">window.location.href="/pluginroot/MyClasses 
              /Member_2343.php";</script>';
             }
        }
  ?> 
```

# mysql - 在mysql中的两行之间有条件地选择？

> ID：14890954
> 
> 赞同：1
> 
> 时间：2013-02-15T08:48:42.013
> 
> 标签：mysql

我有一张看起来像的桌子

```
id  | package | env     | key     | value  
int | varchar | varchar | varchar | varchar 
```

这是为了存储配置，所以在env所在的数据库中会存在一行`null`

`env`但是同一行可能会以不同的值再次出现（不同的 id 作为自动增量） 。

我想要做的是获取所有行`where package = 'something'`和`env is null`，但是如果存在相同的行`package`，`key`然后`env = 'something_else`我想返回该行而不是行 where `env is null`。

所以，鉴于这些数据

```
1 | something | null        | title  | a default title
2 | something | testing     | title  | a testing title
3 | something | development | title  | a development title
4 | something | null        | byline | a default byline
5 | another   | null        | title  | another default title
6 | another   | testing     | title  | another testing title 
```

如果我使用 package`something`和 env`testing`我想要返回的行是

```
2 | something | testing     | title  | a testing title
4 | something | null        | byline | a default byline 
```

我可以运行两个查询，一个是获取所有行在哪里`package = something`，`env is null`然后是另一个查询在哪里`package = something`，`env = testing`然后将第二个结果合并到第一个，但我希望有一种方法可以用一个查询来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:01:15.127

你可以使用这样的东西：

```
SELECT packages.*
FROM packages
WHERE
  id IN (
  SELECT   coalesce(min(case when env is not null then id end), min(id))
  FROM     packages
  WHERE    (env = 'development' or env is null)
  GROUP BY package, `key`) 
```

[在这里](http://sqlfiddle.com/#!2/b8239/12)看小提琴。

在子查询中，我为每个返回不为空`package, key`的最小 id 。`env`如果没有 env 不为空的行，则使用 COALESCE 我将返回最小 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:56:42.213

你可以试试：

```
SELECT *
FROM `table`
WHERE `package` = 'something'
    AND ( `env` = 'testing'
        OR `env` IS NULL )
GROUP BY `key`
ORDER BY id ASC 
```

# php - 如何将 MySQL 查询 MATCH/AGAINST 转换为 LIKE 以绕过停止词列表

> ID：14890959
> 
> 赞同：0
> 
> 时间：2013-02-15T08:49:03.250
> 
> 标签：php, mysql, search

场景：我正在使用此查询在特定类别中的两列 ProductName 和 Description 上搜索 MySql 表：

```
$query = "SELECT * FROM Products WHERE MATCH(ProductName,Description) AGAINST ('+$terms[0]* +$terms[1]* +$terms[2]* +$terms[3]* +$terms[4]*' IN BOOLEAN MODE) AND category_description='".$search_dept."' OR MATCH(ProductName,Description) AGAINST ('+$terms[0]* +$terms[1]* +$terms[2]* +$terms[3]* +$terms[4]*' IN BOOLEAN MODE) AND category2='".$search_dept."' ORDER BY $orderby LIMIT $offset, $rowsPerPage"; 
```

搜索条件 $terms[x] 来自表单中的文本输入字段，并使用以下格式设置：

```
$slash_term = addslashes($_POST['term']);
$var = @$slash_term;
$trimmed = trim($var);
$terms = explode(' ',$trimmed); 
```

该例程运行良好，直到您使用停用词，然后显然查询被终止。

我在共享服务器上，无法禁用停用词检查。因此，根据我一直在研究的内容，可以使用 LIKE 和 % 通配符来解决这个问题。

那么如何将上述查询转换为 LIKE 查询，我认为它类似于以下内容，但它不起作用。

```
 $query = "select * from Products where category_description='".$search_dept."' AND Description like \"%$trimmed%\" OR category_description='".$search_dept."' AND ProductName like \"%$trimmed%\" ORDER BY $orderby LIMIT $offset, $rowsPerPage"; 
```

我是否会通过仅使用 %$trimmed% 从搜索短语中获取通配符的每个单词？还是我应该这样做？搜索几乎总是包含多个单词。

由于第一个查询似乎几乎完美无缺，我是否值得只添加一个子程序来检查用户输入的停用词并在搜索之前将它们从短语中删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:06:58.687

好的，这是我的解决方案。我检查并从用户输入中删除任何停用词，然后继续执行原始搜索查询。完美运行。

```
// format user's input
$slash_term = addslashes($_POST['term']);
$var = @$slash_term;
$trimmed = trim($var);
$terms = explode(' ',$trimmed);
// check for stop words and remove
$stop_words_file  = "list-of-english-stop-words.txt"; // load stop words file
$contents = addslashes(file_get_contents($stop_words_file)); // escape special characters
$stop_words = explode(',', $contents); // create array
foreach($terms as $key => $value) { // search user input for stop words
    if(in_array($value, $stop_words)) { // stop word found
        unset($terms[$key]); // remove it from array
    }
}
$terms = array_values($terms); // remove empty/NULL values from array
// perform search
$query = "SELECT * FROM Products WHERE MATCH(ProductName,Description) AGAINST ('+$terms[0]* +$terms[1]* +$terms[2]* +$terms[3]* +$terms[4]*' IN BOOLEAN MODE) AND category_description='".$search_dept."' OR MATCH(ProductName,Description) AGAINST ('+$terms[0]* +$terms[1]* +$terms[2]* +$terms[3]* +$terms[4]*' IN BOOLEAN MODE) AND category2='".$search_dept."' ORDER BY $orderby LIMIT $offset, $rowsPerPage"; 
```

# google-bigquery - 输入 url 提供的 OAuth 代码后，“线程“主”java.net.ConnectException：连接被拒绝：连接中的异常：

> ID：14890962
> 
> 赞同：0
> 
> 时间：2013-02-15T08:49:14.547
> 
> 标签：google-bigquery

我是 BigQuery 的新手，我想通过我的 java 类使用 bigquery。我已经获得了授权 BigQuery Access 的 URL，并且我还从 url 中获得了权限代码，但是当我在代码中使用此权限代码时，出现以下错误。

将此 URL 粘贴到网络浏览器以授权 BigQuery 访问： [https ://accounts.google.com/o/oauth2/auth?client_id=488768089408.apps.googleusercontent.com&redirect_uri=urn:ietf:wg:oauth:2.0:oob&response_type=代码&范围=https://www.googleapis.com/auth/bigquery&state](https://accounts.google.com/o/oauth2/auth?client_id=488768089408.apps.googleusercontent.com&redirect_uri=urn:ietf:wg:oauth:2.0:oob&response_type=code&scope=https://www.googleapis.com/auth/bigquery&state) ...并在此处键入您收到的代码：4/-P5SeVJsfX8hcztKa_spJdqcP6XH.ovCNnaPn5t4SOl05ti8ZT3a9jBS6eQI 线程“main”java.net.ConnectException 中的异常：连接被拒绝：在 java.net 的 java.net.PlainSocketImpl.socketConnect(Native Method) 处连接。 PlainSocketImpl.doConnect(PlainSocketImpl.java:333) 在 java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195) 在 java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182) 在 java.net.Socket.connect(Socket .java:519) sun.net.NetworkClient.doConnect(NetworkClient.java:152) sun.net.www.http.HttpClient.openServer(HttpClient.java:388) sun.net.www.http.HttpClient。 openServer(HttpClient.java:500) 在 sun.net.www.protocol.https.HttpsClient.(HttpsClient.java:271) 在 sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:328）在 sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:176) 在 sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:733) 在 sun.net.www .protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:162) 在 sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:836) 在 sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream (HttpsURLConnectionImpl.java:230) 在 com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:84) 在 com.google.api.client.http.HttpRequest.execute(HttpRequest.java:980 ) 在 com.google.api.client.googleapis.auth 的 com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:299)。oauth2.GoogleAuthorizationCodeTokenRequest.execute(GoogleAuthorizationCodeTokenRequest.java:175) 在 com.ymsli.client.BigQueryJavaGettingStarted.exchangeCode(BigQueryJavaGettingStarted.java:250) 在 com.ymsli.client.BigQueryJavaGettingStarted.createAuthorizedClient(BigQueryJavaGettingStarted.java:110) 在 com.ymsli .client.BigQueryJavaGettingStarted.main(BigQueryJavaGettingStarted.java:68)

请帮帮我。

在此先感谢施里康德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:32:30.963

这看起来很像潜在的防火墙问题。您的应用程序在哪里运行？它是否可以访问网络和 HTTPS（端口 443）？

# c - 如何使用纯 C 在 Linux 上使用 GigE 相机获取图像

> ID：14890964
> 
> 赞同：7
> 
> 时间：2013-02-15T08:49:22.940
> 
> 标签：c, linux, camera, gige-sdk

是否有一个库可用于在 Linux 上使用纯 C 从 GigE 相机获取图像？更具体地说，我安装了 Basler GigE 相机和 pylon 软件。还有 C++ 中的示例代码。但我想要并且需要使用 C （在我的工作中，这实际上是**使用 C****的**正确做法）。如果有一些对 GigE有用的[libdc1394 ，那就太好了。](http://damien.douxchamps.net/ieee1394/libdc1394/)

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T17:54:53.527

[“GigE Vision”](http://en.wikipedia.org/wiki/GigE_vision)其实是一种计算机视觉相机标准，大部分相机也实现了调整参数的Genicam标准。至少理论上是这样的——我有一个高速 GigE 相机，由于某种未知原因，Pylon 或 AVT 没有找到它（官方说它只有 Pleora 的 eBus 支持）。您可能可以获得这些标准的规范，但我不确定它们是否可以免费获得。

关于一个库，我刚刚在 Ubuntu12.04 下尝试了[Aravis](https://live.gnome.org/Aravis)，它适用于我的相机（以 190 帧/秒的速度流式传输 512x512 像素）。据我所知，它是用 C 编写的。作为提示，要编译包含的查看器，您必须安装所有 gstreamer-dev 包，包括 libgstreamer-plugins-base0.10-dev。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-29T07:59:56.140

大多数实现将使用 C++，并且充其量会公开一个基于此构建的 c-api，因为 GenICam 实现起来非常复杂 - 并且参考实现有效，是免费的，并且几乎所有 SDK 供应商都在使用。您可以在没有那么多 C 语言的情况下实现很多采集，但很难将 GenICam 排除在循环之外 - 这是因为供应商已将 GenICam XML 文档用作一种特定于领域的编程语言/环境 - 所做的工作可与从头开始实现一个网络浏览器。

[Aravis](https://wiki.gnome.org/action/show/Projects/Aravis)确实存在，但依赖于 gstreamer，而且似乎主要使用 C 语言，但它只能在许多相机所需的复杂 XML 支持上走这么远。除了需要高性能或高效率的地方，我永远不会在关键任务设置或需要可靠操作的地方使用 gstreamer。我相信市场上最好的选择是 Pleora 的 SDK 仅供参考 - 没有关系。话虽如此 - 我已经编写了这样一个库（使用 C++ :-)，我无法分享它来解决我提到的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-15T21:24:44.657

GigE 标准对开源不太友好——您必须向标准组织支付年度许可费用，这就是为什么大多数使用 GigE Vision 的软件都需要花费大量资金的原因。一群公司共同制定标准，他们不太可能很快将其发​​布给全世界。

所以这里有一些你的选择（我能想到的）......

1）自己对协议进行逆向工程。这很复杂，所以这将是一个大项目。

2）也许你会很幸运，找到一家公司有他们可以卖给你的 SDK 的 C 版本？

3) 使用 C++ :-) (jk...)

4) 向标准组织付费，让您可以访问或与其中的公司合作。

5) 使用试图对标准进行逆向工程的开源项目。（我不知道合法性规则是什么）。示例：Aravis 和 OpenGigEVision。这些解决方案可能暂时不完整，但它们至少应该支持基础知识。

如果您没有太多时间或金钱可以花费，我认为#5 是您最好的选择。**

# java - Android - 如何在课堂上使用 AsyncTasks

> ID：14890966
> 
> 赞同：3
> 
> 时间：2013-02-15T08:49:25.023
> 
> 标签：java, android, android-asynctask, httprequest

我正在构建一个与`API`. 我将所有 API 通信代码和数据处理放在一个 API`class`中，这样每次我想使用 API 时，我都有一个所有逻辑所在的中心位置。

问题是，`HTTPRequests`强烈建议使用`AsyncTasks`. 如示例中所示，您`AsyncTask`通过派生整个类来创建一个。

我的课程包含由于 HTTP 调用而需要异步的函数。其他的不要。

我的问题：我只是从 AsyncTask 派生我的整个 API 类，还是应该将我的 API 类更多地划分为普通和异步部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:02:09.027

使用两种方法创建一个接口，一种不在其他线程上执行，另一种在其他线程上执行。使异步方法接受一个回调对象，以便在它们完成时得到通知。例子：

```
public interface MyAPI {
 //--this method runs an AsyncTask and calls supplied Callback object's methods when done
 public void fetchRemoteData(String input, Callback c);

 //--this method just processes input string locally and returns it
 public String doStuff(String input);
}

public interface Callback{
  public void onDone(int doneWhatCode, String result);
} 
```

执行：

```
public class MyWebAPI implements MyAPI{
  @Override
  public void fetchRemoteData(String input, final Callback c){
        AsyncTask<String,Void,String> task = new AsyncTask<String,Void,String>(){

            @Override
            protected String doInBackground(String... strings) {
                String i = strings[0];

                //---connect, fetch data ----
                String result = "result";

                return result;
            }

            @Override
            protected void onPostExecute(String s) {
                super.onPostExecute(s);
                c.onDone(1,s);
            }
        };

      task.execute("new Input url");
    }

  @Override
  public String doStuff(String input){
    return input.replace("i","o");
  }
} 
```

让这些接口公开您的 API。通过这种方式，您可以将所有内容放在一起，也可以将实际实现分开以备将来更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:01:06.860

这里的重点是“你不能在 UI 线程中使用这个类”，然后你创建一个 AsyncTask。如果你有一个服务并想从那里调用一些 API 方法怎么办？您不能从服务线程调用 AsyncTask。
当我想从 UI 调用它时，我会保留这个类并将其包装在 AsyncTask 中。

编辑：这是将现有功能包装到 AsyncTask 中的示例：

```
private class GetAuthorisationUrlTask extends AsyncTask<String, Void, String>
{
    private OAuthBuilder oAuthBuilder;
    private GetAuthorisationUrlTaskCallback callback;

    public GetAuthorisationUrlTask(Context context, OAuthBuilder oAuthBuilder, GetAuthorisationUrlTaskCallback callback)
    {
        this.oAuthBuilder = oAuthBuilder;
        this.callback = callback;
    }

    @Override
    protected String doInBackground(String... params)
    {
        try
        {
            Log.i(TAG, "Getting authorization url...");
            return oAuthBuilder.getAuthorizationUrl();
        }
        catch (Exception e)
        {
            Log.e(TAG, "Unable to get OAuth authorization url: " + e, e);
            return null;
        }
    }

    @Override
    protected void onPostExecute(String result)
    {
        Log.i(TAG, "Authorisation url: " + result);
        if (result == null)
            Toast.makeText(getApplicationContext(), "Error getting authorization url.", Toast.LENGTH_SHORT).show();
        else
            callback.urlCreated(result);
    }

    static interface GetAuthorisationUrlTaskCallback
    {
        void urlCreated(String url);
    }
} 
```

现在，您可以调用 AsyncTask 并在结果准备好时获取回调。

```
GetAuthorisationUrlTask getAuthorisationUrlTask = new GetAuthorisationUrlTask(this,
        new GetAuthorisationUrlTaskCallback()
        {
            @Override
            public void urlCreated(String url)
            {
                webview.loadUrl(url);
            }
        });
getAuthorisationUrlTask.execute(); 
```

我知道有很多样板代码，但它将您的 UI 与您的业务类的逻辑完全分开。它在这里只完成一项任务，但将其扩展为更通用并在不引入新类的情况下做更多事情很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:03:13.057

好吧，这取决于你。您可以让 1`AsyncTask`处理所有事情并进行发布更新等，但如果它有很多不同的请求并且没有直接关系，我会将它们分开。一个好的方法可能是考虑用例并根据它分成不同`AsyncTasks`的用例。

举一个基于用例的方法的例子：

*   Main`Activity`首先启动`AsyncTask`以进行初始化。
*   用户单击登录/或开始其他长时间运行的操作 --> 开始第二次`AsyncTask`。

然后在这两种情况下，您仍然拥有旧类，但`AsyncTasks`会调用在旧类中实现的 api。

# mysql - 在rails应用程序中向mysql表添加一列？

> ID：14890969
> 
> 赞同：1
> 
> 时间：2013-02-15T08:49:41.643
> 
> 标签：mysql, ruby-on-rails, add

我正在开发一个使用 mysql 作为我的数据库的 Rails Web 应用程序。我创建了包含 3 列的表。我已经运行了“rake db:migrate”命令。

但现在我需要在表中再添加 2 列。我试图运行这个命令：

> rails 生成迁移 Add'col1'和'col2'To col1:integer col2:integer

它正在文件`\db\migrate\`夹中创建一个包含以下内容的文件：

```
class Add<col1>And<col2>To<table_name> < ActiveRecord::Migration
  def change
    add_column :<table_name>, :<col1>, :integer
    add_column :<table_name>, :<col2>, :integer
  end
end 
```

但是当我去 mysql 并查看我的表的内容时，没有添加列。我应该如何将列添加到现有表中？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:52:31.443

除了创建迁移之外，您还需要运行它，使用`rake db:migrate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:54:08.257

[http://guides.rubyonrails.org/migrations.html#migrations-are-classes](http://guides.rubyonrails.org/migrations.html#migrations-are-classes)

```
def change
     add_column :products, :part_number, :string
                 ^            ^              ^
                 table        column name    type
end 
```

定义迁移后，您需要再次运行 db:migrate

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:56:01.140

rails 生成迁移 AddCol1AndCol2ToTable col1:integer col2:integer

带有表名的 raplace 表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-14T13:11:13.423

迁移作为文件存储在 db/migrate 目录中，每个迁移类一个。该文件的名称采用 TIMESTAMP_create_products.rb 的形式，即标识迁移的 UTC 时间戳，后跟下划线，后跟迁移名称。Rails 使用此时间戳来确定应该运行哪个迁移以及以什么顺序运行，因此如果您要从另一个应用程序复制迁移或自己生成文件，请注意其在顺序中的位置。

要将特定列添加到数据库中的表中，您应该键入 rails 命令

> > **rails 生成迁移 addColumnToProducts column:type**

完成后，你可以做

> > **耙分贝：迁移**

您可以看到您添加了一个新的迁移，称为：

TIMESTAMP_add_column_to_products.rb 具有以下代码：

```
class addColumnToProducts < ActiveRecord::Migration
  def change
    add_column :products, :column, :type
  end
end 
```

并且您已成功将列添加到数据库的表中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-06T20:39:43.703

所以你想在现有表中添加新列。您可以通过使用迁移执行以下说明来做到这一点。

1 -`rails generate migration AddColumnToTableName`

2 - 打开您将看到的迁移文件

`AddColumnToTableName < ActiveRecord::Migration[5.0] def change end end`

3 - 内部`#change`函数插入你需要的新列

```
 add_column :products, :part_number, :string
           (tablename) (coulmn name) (data type) 
```

4-最后应该是这样的

`class AddPartNumberToProducts < ActiveRecord::Migration[5.0] def change add_column :products, :part_number, :string end end`

[想了解更多关于移民的信息？](http://edgeguides.rubyonrails.org/active_record_migrations.html)

# registry - 禁用电源按钮的事件名称

> ID：14890970
> 
> 赞同：0
> 
> 时间：2013-02-15T08:49:47.443
> 
> 标签：registry, compact-framework, driver, windows-ce, power-management

在 Windown Mobile 6 上，在 Settings\System\Power\Misc 下有一个“禁用电源开关”，我必须以编程方式检查以摆脱弹出菜单。通过比较注册我发现，它可以通过“Drivers\BuiltIn\Power\Settings”注册表项设置，将 DisablePwrSwitch 设置为 1。

问题是，仅设置注册表是不够的，您还必须为驱动程序设置事件以强制他重新加载设置（或者您可以重置设备，但这是一个丑陋的解决方案）。

我可以通过以下方式实现它：

```
private static void DoAutoResetEvent()
{
    string eventString = "OMNIBOOK_EVENT_SHUTDOWN";

    IntPtr newHandle = CreateEvent(IntPtr.Zero, false, false, eventString);
    EventModify(newHandle, (int)EventFlags.EVENT_SET);
    CloseHandle(newHandle);
}

private enum EventFlags
{
    EVENT_PULSE = 1,
    EVENT_RESET = 2,
    EVENT_SET = 3
}

[DllImport("coredll.dll", SetLastError = true)]
private static extern IntPtr CreateEvent(IntPtr lpEventAttributes, bool bManualReset, bool bInitialState, string lpName);

[DllImport("coredll")]
static extern bool EventModify(IntPtr hEvent, int func);

[DllImport("coredll.dll", SetLastError = true)]
private static extern bool CloseHandle(IntPtr hObject); 
```

但我不知道实际的 eventStrign 。`"OMNIBOOK_EVENT_SHUTDOWN"`当然不是正确的。

有人知道，这个驱动程序重新加载设置的 eventName 是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T16:05:53.837

我们的 WM6 设备没有此**禁用电源开关**。

如果这是设备制造商（摩托罗拉、Datalogic 等）添加的内容，您需要联系他们以获取驱动程序以及如何使用它。

# python - Sqlalchemy：来自导入的未定义变量：元数据

> ID：14890972
> 
> 赞同：1
> 
> 时间：2013-02-15T08:49:50.990
> 
> 标签：python, sqlalchemy

当我在外部模块中声明基本变量时出现上述错误。基本变量在模块 db_connect.py 中声明，如本文所述：[如何跨两个不同文件创建 ForeignKey 关系](https://stackoverflow.com/questions/8262014/in-sqlalchemy-how-do-i-create-a-foreignkey-relationship-across-2-different-py)

在**db_connect.py**中，我声明了以下内容：

```
from sqlalchemy import create_engine
from sqlalchemy.ext.declarative import declarative_base
Engine = create_engine('postgresql://postgres:pass@server:5432/mydb')
Base = declarative_base() 
```

在**data_template.py**我有以下内容：

```
from db_connect import Engine, Base

class DataTemplate (Base):
    __tablename__ = 'data_template'
    id = Column(Integer(5), primary_key=True, autoincrement = True)
    version = Column(String(3), nullable = False)
    specification = Column(String(1), nullable = False)
    __table_args__ = (UniqueConstraint("version", "specification"), )

Base.metadata.create_all() 
```

**问题一：**

有了上面的内容，创建的表很好，但是我在**data_template.py 中获得了元数据： Base.metadata.create_all()**突出显示了错误：*导入的未定义变量：元数据*为什么会发生该错误？

**问题二：**

在**load_file.py**我必须从**data_template.py**模块导入 DataTemplateFile 类。如果我不执行此导入，我会收到错误消息

```
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'load_file.data_template_file_id' could not find table 'data_template_file' with which to generate a foreign key to target column 'id' 
```

但是，当我按如下方式导入时，它可以工作并创建表，但我在 Eclipse 中收到“警告”指示，表明 DataTemplateFile 导入未使用。但是，如果我不导入它，则代码将失败，如上文所述。

```
from data_template import DataTemplateFile

class LoadFile (Base):
    __tablename__ = "load_file"
    id = Column(Integer(10), primary_key = True)
    file_name = Column(String(250), nullable = False, unique = True)
    data_template_file_id = Column(Integer, ForeignKey('data_template_file.id'), nullable = False)
    loadfile = relationship("DataTemplateFile",backref=backref('LoadFile', order_by=id)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:56:50.220

实际上我有同样的问题。我通过进入 site-packages 文件夹并将 sqlalchemy 文件夹提升了一个级别来解决它。

所以路径是：

> C:\Python\Python27\Lib\site-packages\sqlalchemy

这对我有用。

乔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-21T10:07:28.717

您必须将 flask.ext 添加到 Forced Builtins

# javascript - JqueryUI 自己的小部件：实例覆盖值（有时）

> ID：14890973
> 
> 赞同：0
> 
> 时间：2013-02-15T08:49:54.533
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-widget-factory

我写了一个小测试来描述我的问题：

```
<div id="test1"></div>
<div id="test2"></div>
<script>
    (function ($) {
        $.widget("mseh.testIt", {
            options : {
                foo : false,
                bar : false
            },

            _settedOptions : {
                foo : false,
                bar : false
            },

            readOptions : function() {
                return this._settedOptions;
            },

            _init : function() {
                this._initializeTest();
            },

            _initializeTest : function() {
                var self = this;
                $.each(self.options, function(key, value) {
                    self._settedOptions[key] = value;
                });
            }
        });
    })(jQuery);

    $('#test1').testIt({ foo : true, bar : false});
    $('#test2').testIt({ foo : true, bar : true});

    console.log($('#test1').testIt('readOptions'));
    console.log($('#test2').testIt('readOptions'));

</script> 
```

在这个例子中，两个日志都给了我一个真实的“foo”（如预期的那样）和一个真实的“bar”（不是预期的）。

这是一个错误还是我做错了什么？

使用 jQuery 1.7.2 和 1.9.1 测试。使用 jQueryUI 1.9.2 和 1.10.0 测试。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:59:41.777

因为 _settedOptions 在 testIt 的每个实例中共享。

如果您检查 _settedOptions 在 test1 和 test2 之间的对象相等性，如下所示，它们指的是同一个对象。

```
console.log( $('#test1').testIt('readOptions') === $('#test2').testIt('readOptions') ); 
```

如果你想把它当作实例变量，写在下面。

```
(function ($) {
    $.widget("mseh.testIt", {
        options : {
            foo : false,
            bar : false
        },

        // This field will be shared in every instance.
        // _settedOptions : {
        //     foo : false,
        //     bar : false
        // },

        readOptions : function() {
            return this._settedOptions;
        },

        _init : function() {
            // like this!!!!!
            this._settedOptions = {
                foo : false,
                bar : false
            };

            this._initializeTest();
        },

        _initializeTest : function() {
            var self = this;
            $.each(self.options, function(key, value) {
                self._settedOptions[key] = value;
            });
        }
    });
})(jQuery); 
```

# iframe - 带有 listType flash 的 youtube iframe 播放列表似乎已损坏

> ID：14890974
> 
> 赞同：0
> 
> 时间：2013-02-15T08:49:56.710
> 
> 标签：iframe, youtube-api, playlist

使用播放列表 iframe 选项时，来自 youtube 的 Flash 播放器似乎坏了。html5播放器运行良好

例子

[http://www.youtube.com/embed/?listType=search&list=jazz](http://www.youtube.com/embed/?listType=search&list=jazz)

错误未定义的视频渲染

我知道 Jeff 正在看这个网站，所以 Jeff 看看

示例测试站点[http://www.cfcms.nl/youtube-responsive/](http://www.cfcms.nl/youtube-responsive/)

更新：这个问题已由 youtube 工程师解决

# visual-studio-2010 - Visual Studio 2010 项目在 VS 2012 中加载是否正常？

> ID：14890977
> 
> 赞同：0
> 
> 时间：2013-02-15T08:50:23.703
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012

几个问题：

1.  我有 Visual Studio 2010 项目。如果我安装 VS 2012，即使它们是为 .Net 4.0 构建的，它是否可以正常加载？

2.  我可以在 VS 2012 中将 4.0 项目转换为 3.5（编译它）吗？

敬茶

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:55:08.753

简单的答案是“是”。

我可以毫无问题地在 VS2012 上打开我所有的 VS2010 解决方案/项目。你有什么错误吗？

# java - 定义独立于平台的应用程序

> ID：14890982
> 
> 赞同：-2
> 
> 时间：2013-02-15T08:50:41.170
> 
> 标签：java, jakarta-ee

使用 Java 开发的独立应用程序可以称为平台无关应用程序。

同样，我可以将运行在浏览器上并使用 Java EE 开发的应用程序称为平台独立应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:01:40.453

Java EE 不能“在浏览器上”运行。您通常会使用 Javascript 和 HTML over HTTP 来连接到 Java EE 后端。您的**Java**代码将在某处的服务器上运行——而不是在每个浏览器中运行。

所以，如果你在谈论 HTML 和 Javascript，那么答案是……很棘手。

Javascript 是一种解释型语言：它通过一个引擎运行。因此，从技术上讲，**它与**平台无关。

# bash - 为什么 sed 不替换这个换行符？

> ID：14890987
> 
> 赞同：2
> 
> 时间：2013-02-15T08:51:09.500
> 
> 标签：bash, sed

我在 Ubuntu 的 Bash shell 中使用 sed 来替换某些文件中的文本。这是我的文字：

```
 BLah </V>
<N> Blah 
```

这是我想将其转换为：

```
Blah" = "Blah 
```

这是我正在使用的 sed 命令：

```
sed -i 's@ </V>\n<N> @" = "@g' 
```

除了这个，我所有的其他`sed`命令都在工作。这是唯一涉及换行符的搜索和替换情况。问题似乎`\n`是与我认为应该的新行字符不匹配。

我的脚本哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T09:00:43.090

事情是`sed`逐行处理文本。*它的缓冲区（称为模式空间*）中没有两条线。您可以通过调整脚本来修复它：

```
sed 'N;s@ </V>\n<N> @" = "@g' 
```

来自`man sed`：

```
 n N    Read/append the next line of input into the pattern space. 
```

这就是这样`N`做的：将下一行附加到模式空间。然后替换工作。

例子：

```
$ sed 'N;s@ </V>\n<N> @" = "@g' <<<' BLah </V>
<N> Blah'
 BLah" = "Blah 
```

然而，这将有 50% 的可能性不起作用，具体取决于模式是从输入中的偶数行还是奇数行开始。为了解决这个问题，您可以像这样修改脚本：

```
sed 'N;s@ </V>\n<N> @" = "@g;P;D' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T20:17:53.883

sed 是用于在单行上进行简单替换的出色工具，对于任何其他文本处理只需使用 awk：

```
$ cat file
Blah </V>
<N> Blah

$ awk -v RS= 'sub(/ <\/V>\n<N> /,"\" = \"")' file
Blah" = "Blah 
```

这种保持模式、子空间中的传输器缓冲区或任何所需的东西都没有——只需将记录分隔符设置为换行符以外的东西，并将多行字符串视为任何其他字符串。

# ios - 带有tabris的ios按钮的背景颜色错误？

> ID：14890988
> 
> 赞同：0
> 
> 时间：2013-02-15T08:51:15.163
> 
> 标签：ios, eclipse, tabris

tabris 中 ios 按钮的背景颜色似乎不正确。在下图中，冬季按钮位于底部黄色。屏幕截图来自 ButtonControlsDemo。有没有办法改变这种颜色？

![来自 ButtonControlsDemo 的屏幕截图](../Images/d40558b971247ed26bc22637ef318b71.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:35:17.110

这种效果是由“焦散高光颜色”引起的。这是一个很好的解释：[http ://www.mlsite.net/blog/?p=235](http://www.mlsite.net/blog/?p=235)

现在这按预期工作。我将把它放在我们的问题列表中以进行改进 - 但我不能保证 1.0 版本的修复。

# python - Flask-Classy url_for 问题（构建错误）

> ID：14890991
> 
> 赞同：0
> 
> 时间：2013-02-15T08:51:22.013
> 
> 标签：python, flask

访问 Flask-Classy 视图方法时，我无法在模板中嵌入 url_for（或在视图中定义）。

/app/routes.py

```
class BaseView(FlaskView):
    route_base '/'

    @route('index', endpoint('index')
    def index():
        return render_template('index.html')

    def resetapp():
        db.drop_all()
        return redirect(url_for('BaseView:index')) 
```

/app/crm/accounts/routes.py

```
class AccountView(FlaskView):
    route_base '/crm/account/'

    @route('create', endpoint='create')
    def create():
        return render_template('path/to/create.html') 
```

现在在'index.html'里面，我有以下

但我收到以下错误：werkzeug.routing.BuildError

> BuildError：（'AccountView.create'，{}，无）

如果您查看第一条路线，则`resetapp`其中使用 url_for 将自身引用为 BaseView:index - 这有效！

我也在 index.html {{ url_for('AccountView:create') }} 中尝试了相同的格式，但同样的错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:00:09.973

您似乎忘记注册视图`BaseView.register(app)`，以下是一个可行的代码：

```
from flask import Flask,url_for,redirect,render_template
from flask.ext.classy import FlaskView,route

app = Flask(__name__)

class BaseView(FlaskView):
    route_base= '/'

    @route('index')
    def index(self):
        print url_for('BaseView:index')
        return render_template("index.html")
    @route('reset')
    def reset(self):
        print url_for('BaseView:reset')
        return redirect(url_for('BaseView:index'))
BaseView.register(app)
if __name__ == '__main__':
    app.run(debug=True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T05:11:09.300

问题是您覆盖了路由装饰器中的端点，但仍在尝试从默认端点访问它们。也是`index`一种*特殊*方法，如果您希望它映射到您的根目录，则不需要路由装饰器`FlaskView`。（您也忘记了`self`参数！）尝试将您的代码更改为：

```
class BaseView(FlaskView):
    route_base '/'

    def index(self):
        return render_template('index.html')

    def resetapp(self):
        db.drop_all()
        return redirect(url_for('BaseView:index')) 
```

现在`url_for('BaseView:index')`会回来`"/"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T20:32:22.323

好的，这需要一段时间 - 但事实证明我带你去追逐野鹅。问题有点像一个人的建议，但主要问题是与有争论的路线有关......

对于那些想知道如何做到这一点的人。这是 Flask-Classy url_for() 的答案

```
@route('update/<client_id>', methods=['POST','GET'])
def update(self, client_id=None):

    if client_id is None:
        return redirect(url_for('ClientView:index')) 
```

在您的模板中：

```
{{ url_for('YourView:update', client_id=some_var_value, _method='GET') }} 
```

以下是你不能做的事情——正确使用 Flask-Classy。

1.  设置一个端点 - 这是一个禁忌。设置端点后，Class:Method 路由将被覆盖。
2.  确保提供正确数量的查询参数。
3.  如果要使用 url_for，则不能定义多个路由

我还专门提供了该方法 - 但这是不必要的。

对于第 3 点 - 这是因为当有超过 1 条路线时 - 它如何知道使用哪条路线？很简单，但这就是我一直在追逐自己的目的。做所有事情，除了删除额外的路线。

# javascript - JavaScript C 样式类型从有符号转换为无符号

> ID：14890994
> 
> 赞同：17
> 
> 时间：2013-02-15T08:51:39.783
> 
> 标签：javascript

如何在javascript中输入一个数字？

```
a = (unsigned int)atoi(arg1);
b = (unsigned int)atoi(arg2); 
```

假设 a 和 b 可以签名。

我想将 4 字节有符号整数转换为 4 字节无符号整数。

我知道在 javascript 中没有类型转换或签名/未签名之类的东西。我正在寻找一种易于理解的算法。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-15T09:03:35.920

您可以尝试`a = arg1>>>0`，但我不确定它会满足您的需求。

有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/1822350/what-is-the-javascript-operator-and-how-do-you-use-it)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-10-23T20:57:38.677

你也可以使用

```
(new Uint32Array([arg1]))[0] 
```

例如

```
< (new Uint32Array([-1]))[0]
> 4294967295 
```

说明：JavaScript 不像 C 那样遵循传统的机器架构整数转换约定，更喜欢类型简单性和可移植性而不是低级效率。然而，JavaScript 中的类型化数组（Uint8Array 等）是专门为高效且定义明确的多字节和位级操作而添加的。因此，我们可以利用这一事实来访问定义明确的内置位转换操作。上例中的语法：

1.  创建输入的自然数数组
2.  从该数字构造一个类型化数组 (Uint32Array)。这是演员将发生的地方。
3.  提取该类型数组的第一个（第 0 个）元素，其中包含转换结果。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-05-29T17:31:37.793

将有符号字节转换为无符号字节，javascript：

```
-5 & 0xff // = 251   , signed to unsigned byte
251 <<24 >>24 // = -5  , unsinged byte to signed 
```

第一个使除第一个字节外的所有第一个位为 0

第二个发现于

[https://blog.vjeux.com/2013/javascript/conversion-from-uint8-to-int8-x-24.html](https://blog.vjeux.com/2013/javascript/conversion-from-uint8-to-int8-x-24.html)

基本上，在一个数字中，有 4 个字节。在正数中，前 3 个字节为 0，所有 0 位均为零。在负数中，前 3 个字节为 1，所有 0 位均为 1，所有 1 位均为 0。以字节为单位，第 4 个字节的最高有效位用于符号；

向左移位使第 1 个字节的第 1 位 1 成为第 4 个字节的第 1 位，然后再次向右移位，拖动最高有效位。因此，如果符号位为 1。它会在前 3 个字节中产生许多 1 位。所以这是转移的副作用，但它有效。

```
for example: like you start from
?1111111 the first bit is a sign bit - ?, 
but in a larger variable,  so it is:

00000000_00000000_00000000_?1111111
shift to left
?1111111_........_........_........
shift to right
????????_????????_????????_?1111111
this is the effect,
it drags the edge bit across the shift 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-15T09:14:54.797

Javascript 中的所有（原始）数字都是 IEEE748 双精度数，为您提供 52 位整数精度。

有符号与无符号的问题在于，除了`>>>`将数字转换为 32 位有*符号*数字之外，所有 Javascript 位运算符 - 也就是说，它们采用最低有效 32 位并丢弃其余位，然后得到的位 31 是符号扩展以给出带符号的结果。

如果您从四个已知的字节值开始，您可以通过使用简单的乘法和加法来解决按位运算符的问题，而不是使用所有 52 位整数精度，例如

```
var a = [ 1, 2, 3, 4];  // 0x01020304
var unsigned = a[0] * (1 << 24) + a[1] * (1 << 16) + a[2] * (1 << 8) + a[3] 
```

# jsf - JSF 中无状态的用处是什么？

> ID：14890995
> 
> 赞同：18
> 
> 时间：2013-02-15T08:51:42.933
> 
> 标签：jsf, jsf-2, mojarra

根据[这个博客](http://weblogs.java.net/blog/mriem/archive/2013/02/08/jsf-going-stateless?force=255)， JSF 正在变得无状态。使用 JSF 的全部意义不在于它使保存和恢复状态成为一件苦差事。JSF 成为无状态的有什么意义？您能否提供一个有用的示例。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-15T15:44:03.637

首先，我想澄清 JSF 本身并不是完全“无状态”。JSF 只是添加了一项新功能，使开发人员能够按需创建无状态视图/表单。

状态保存在动态操作的表单中特别有用，例如有条件的 ajax 渲染部分。它在基于 ajax 的回发中记住表单的状态。换句话说，在这些表单中，您绝对需要一个视图范围的托管 bean，而不是请求范围的托管 bean。在静态表单绑定到请求范围 bean 的情况下，可以根据视图文件在每个请求的基础上轻松地重新创建状态，因此不一定需要保存。

在服务器端状态保存管理的情况下，状态保存具有服务器内存和会话创建方面的成本。此外，它还有一个额外的缺点，即`ViewExpiredException`在会话过期时的回发期间会发生。所有这些都可以通过将状态保存管理设置为客户端来解决。但这反过来又会在网络带宽和由于序列化导致的性能下降方面付出代价。

例如，如果大型网站包含“公共”和“受限”部分，您希望将会话创建推迟到用户实际登录。但是，如果您在公共部分有一个 JSF 登录表单，那么会话仍将通过访问该页面来创建。如果表单本身基本上没有动态状态并且绑定到请求范围的 bean，那么这是不必要的成本。

诚然，如果您拥有最先进的硬件，这个成本可以忽略不计，但如果您有相对较多的访问者和/或相对较差的硬件，它就不可忽略。在这种情况下，测量就是知道。此外，完全无状态并不总是可能的，您将失去动态操作视图/表单的好处和体验。但是，理论上您可以通过摆弄隐藏的输入字段和/或自定义请求参数来维护每个请求的状态。

应该注意的是，无状态还有一个额外的缺点，即如果存在开放的 XSS 漏洞，理论上更容易执行 CSRF 攻击。幸运的是，使用 JSF2/Facelets 已经很难有 XSS 漏洞了。获得它的唯一方法是使用 a`<h:outputText escape="false">`重新显示用户控制的数据。

### 也可以看看：

*   [为什么 JSF 将 UI 组件的状态保存在服务器上？](https://stackoverflow.com/questions/5474316)
*   [在不需要用户登录的 POST 表单中，我是否面临 CSRF 攻击的风险？](https://stackoverflow.com/questions/2397952)
*   [JSF中的CSRF、XSS和SQL注入攻击防范](https://stackoverflow.com/questions/7722159)
*   [JSF 生命周期的不同阶段在包含表单的无状态视图中如何表现](https://stackoverflow.com/questions/31043100)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-15T08:58:28.130

关键是只有在需要维护真实状态时才能维护状态。

JSF 的一大问题是向外扩展。

对于 JSF，您基本上有两种选择：

*   在服务器上存储状态 - 优点：更快的响应时间；缺点：您需要启动加载内存来处理超过 2-300 个“只是浏览”的用户，例如在他们登录或将任何内容添加到购物车之前

*   在客户端存储状态 - 优点：消除内存限制；缺点：增加了服务器带宽，因为每次都必须将组件树发送到客户端

无状态应该确保 JSF 可用于有效地提供内容，而用户无需维护状态。

还有其他改进，例如允许在有意义的地方重用组件树，但想法是让应用程序更好地扩展。

# python - 仅针对特定线程将标准输出重定向到文件

> ID：14890997
> 
> 赞同：11
> 
> 时间：2013-02-15T08:51:52.530
> 
> 标签：python, stdout

我有几个进程都有自己的线程都在写入`stdout`，我可以接受。现在，我必须添加另一个线程，它将大量垃圾转储到标准输出，我不想要这个。

有什么办法可以将`stdout`单个线程重定向到文件？

**更新**

正如[owobeid](https://stackoverflow.com/users/1643661/owobeid)所提到的，我试过这个......我正在重定向`stderr`到一个文件......

```
def startServer():
    fd = os.open("foo.txt", os.O_RDWR|os.O_CREAT )
    fd2 = 2
    os.dup2(fd, fd2)

    # rest of the code

if __name__ == '__main__':
    threading.Thread(target=startServer).start()
    raise Exception("My Exception") 
```

问题：`stderr`整个应用程序被重定向。异常消息也会被重定向到文件中，即使它在线程之外。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-04-27T20:29:51.653

我在寻找一种方法来做到这一点时偶然发现了这篇文章。我想制作一个交互式 Python 控制台，它使用 ajax 将请求代理到服务器，并仅返回执行线程的所有输出。我最终弄清楚了，并想分享我的解决方案。

`werkzeug`python库附带一个类，`local.LocalProxy`它可以使模块级函数表现得像一个属性。例如，这将使`sys.stdout`行为完全正常，但它将通过`LocalProxy`类代理。

```
import sys
import werkzeug
sys.stdout = werkzeug.local.LocalProxy(lambda: sys.stdout) 
```

对此进行扩展，然后我编写了一个函数来代替上面的函数，如果它是不同的线程，则`lambda`返回一个对象：`StringIO`

```
import threading
import sys
import cStringIO
import werkzeug

thread_proxies = {}
def redirect():
    ident = threading.currentThread().ident
    thread_proxies[ident] = cStringIO.StringIO()
    return thread_proxies[ident]

def proxy():
    ident = threading.currentThread().ident
    return thread_proxies.get(ident, sys.stdout)

sys.stdout = werkzeug.local.LocalProxy(proxy) 
```

然后在我想要重定向的任何线程中，我可以调用：

```
string_io = redirect() 
```

并且所有将去的输出`sys.stdout`现在都写入`StringIO`对象。

* * *

可是等等！我需要捕获`sys.stdout`、`sys.__stdout__`、`sys.stderr`和`sys.__stderr__`，所以我编写了这个库，我`stdout_helpers`在我的代码库中调用了它：

```
import threading
import sys
import cStringIO
from werkzeug import local

# Save all of the objects for use later.
orig___stdout__ = sys.__stdout__
orig___stderr__ = sys.__stderr__
orig_stdout = sys.stdout
orig_stderr = sys.stderr
thread_proxies = {}

def redirect():
    """
    Enables the redirect for the current thread's output to a single cStringIO
    object and returns the object.

    :return: The StringIO object.
    :rtype: ``cStringIO.StringIO``
    """
    # Get the current thread's identity.
    ident = threading.currentThread().ident

    # Enable the redirect and return the cStringIO object.
    thread_proxies[ident] = cStringIO.StringIO()
    return thread_proxies[ident]

def stop_redirect():
    """
    Enables the redirect for the current thread's output to a single cStringIO
    object and returns the object.

    :return: The final string value.
    :rtype: ``str``
    """
    # Get the current thread's identity.
    ident = threading.currentThread().ident

    # Only act on proxied threads.
    if ident not in thread_proxies:
        return

    # Read the value, close/remove the buffer, and return the value.
    retval = thread_proxies[ident].getvalue()
    thread_proxies[ident].close()
    del thread_proxies[ident]
    return retval

def _get_stream(original):
    """
    Returns the inner function for use in the LocalProxy object.

    :param original: The stream to be returned if thread is not proxied.
    :type original: ``file``
    :return: The inner function for use in the LocalProxy object.
    :rtype: ``function``
    """
    def proxy():
        """
        Returns the original stream if the current thread is not proxied,
        otherwise we return the proxied item.

        :return: The stream object for the current thread.
        :rtype: ``file``
        """
        # Get the current thread's identity.
        ident = threading.currentThread().ident

        # Return the proxy, otherwise return the original.
        return thread_proxies.get(ident, original)

    # Return the inner function.
    return proxy

def enable_proxy():
    """
    Overwrites __stdout__, __stderr__, stdout, and stderr with the proxied
    objects.
    """
    sys.__stdout__ = local.LocalProxy(_get_stream(sys.__stdout__))
    sys.__stderr__ = local.LocalProxy(_get_stream(sys.__stderr__))
    sys.stdout = local.LocalProxy(_get_stream(sys.stdout))
    sys.stderr = local.LocalProxy(_get_stream(sys.stderr))

def disable_proxy():
    """
    Overwrites __stdout__, __stderr__, stdout, and stderr with the original
    objects.
    """
    sys.__stdout__ = orig___stdout__
    sys.__stderr__ = orig___stderr__
    sys.stdout = orig_stdout
    sys.stderr = orig_stderr 
```

现在在我的应用程序开始时，我调用：

```
stdout_helpers.enable_proxy() 
```

在我现在调用的任何线程中：

```
string_io = stdout_helpers.redirect() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-18T16:16:43.137

这个答案允许重定向到特定文件，但也可以有多个输出（sys.stdout + 文件），并且还可以将主线程日志重定向到每个线程文件日志（这在我的情况下非常有用）。

首先，让我们为新的重定向定义一个类：

```
class SysRedirect(object):
    def __init__(self):
        self.terminal = sys.stdout                  # To continue writing to terminal
        self.log={}                                 # A dictionary of file pointers for file logging

    def register(self,filename):                    # To start redirecting to filename
        ident = threading.currentThread().ident     # Get thread ident (thanks @michscoots)
        if ident in self.log:                       # If already in dictionary :
            self.log[ident].close()                 # Closing current file pointer
        self.log[ident] = open(filename, "a")       # Creating a new file pointed associated with thread id

    def write(self, message):
        self.terminal.write(message)                # Write in terminal (comment this line to remove terminal logging)
        ident = threading.currentThread().ident     # Get Thread id
        if ident in self.log:                       # Check if file pointer exists
            self.log[ident].write(message)          # write in file
        else:                                       # if no file pointer 
            for ident in self.log:                  # write in all thread (this can be replaced by a Write in terminal)
                 self.log[ident].write(message)  
     def flush(self):
            #this flush method is needed for python 3 compatibility.
            #this handles the flush command by doing nothing.
            #you might want to specify some extra behavior here.
            pass 
```

然后，我只需要在我的主线程中初始化

```
sys.stdout=SysRedirect() 
```

然后在每个线程中，我只需要注册并指定一个文件名

```
sys.stdout.register('threadX.log') 
```

在主线程中，我可以重定向例如：

```
sys.stdout.register('mainthread.log') 
```

但在我的情况下，我不想注册主线程，所以主线程中的所有 std 都写在所有其他日志中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-10T01:24:08.803

您不能为单个线程重定向标准输出，但您可以通过例如打开一个文件并`write()`从该线程调用它来写入不同的 fd。stdout 和 stderr 映射到作为整个过程的 fd 表的一部分的特定 fd，因此在任何一个线程中弄乱 stdout/stderr 都会弄乱所有线程。

因此，在这种情况下，您不能简单地在单个线程下弄乱标准输出，以便您仍然可以调用 vanilla 'print'。先前答案中产生的线程和主线程的区别是不相关的。您需要选择的线程实际打印到单独的 fd：

```
with open('blah', 'w') as f:
    f.write('bla blah\n') 
```

我知道这不会给你想要的东西，但对于后来的读者来说，了解这一点很重要。

在概念上可以有所帮助的是了解 print 命令在幕后的作用。`fd.write()`本质上，它与（以格式化细节为模）做同样的事情，但它专门使用 stdout 作为文件句柄。您可以自己使用`sys.stdout.write()`.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-15T08:56:53.337

利用[dup2](http://www.tutorialspoint.com/python/os_dup2.htm)将输出重定向到您选择的文件。将 fd 设置为您的文件描述符，并将 fd2 设置为 1（标准输出）。

注意：在生成的线程中执行此操作，而不是在主线程中。

# ruby - 在 ruby 中创建 .method

> ID：14890999
> 
> 赞同：0
> 
> 时间：2013-02-15T08:52:00.563
> 
> 标签：ruby

如何创建一个将调用它的对象作为变量的方法...

例如在`"Hello".to_s`,`.to_s`中`"Hello"`作为参数。

编辑：

谢谢你回答我的问题！

对于任何想知道如何做到这一点的人，这里有一个例子：

```
 def double
    self*2
  end

  2.double
  =>4 
```

再次感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T09:12:23.160

您需要打开类并扩展它。

```
class String
  def i_love
    "I love #{self}"
  end
end

"Pizza".i_love
=> "I love Pizza" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T08:55:20.767

在您的示例中，在`to_s`正文中您可以参考`"Hello"`using `self`。如果这不是你要问的，你需要更好地描述你的问题。