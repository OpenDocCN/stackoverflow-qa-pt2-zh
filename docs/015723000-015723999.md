# StackOverflow 问答 15723000-15723999

# authentication - MonoTouch 如何为每个 ServiceStack 请求提供 cookie？

> ID：15723002
> 
> 赞同：1
> 
> 时间：2013-03-30T20:11:45.090
> 
> 标签：authentication, cookies, xamarin.ios, servicestack, xamarin

我花了几天时间试图掌握 ServiceStack，它看起来很棒。唯一的问题是身份验证，这似乎是很多摩擦、辛勤工作和眼泪。

我希望 MonoTouch 注册用户，针对 ServiceStack 进行身份验证/针对 OAuth 进行身份验证，并且通常在进行身份验证时尽量减少对数据库的调用。

到目前为止，我得到了这个：

```
 var client = new JsonServiceClient(newbaseUri);

// register a new user:

        var registration  = new Registration {
            FirstName = "john"
            UserName = "user" ,
            Password = "pass",
            Email =   "john@john.com",              
        };

        var registerResponse = client.Send<RegistrationResponse>(registration);

       --------------------------------

// user registered...later on I authenticate:

        var authResponse = client.Send<AuthResponse>(new Auth {
            UserName = "user",
            Password = "pass",
            RememberMe = true
        });

        var authResponse = clientlogin.Send<AuthResponse>(auth);

        --------------------------------    

// somehow I need to store 'authresponse' for later calls, not sure how without a browser 
// tried manually setting the cookies and credentials parameters later but no joy
// but now I need to call a secured ([Authenticate] decorated) service method:

        var client = new JsonServiceClient(newbaseUri);
        var response = client.Send<HelloResponse>(new Hello { Name = "World!" });           
        return response.Result;

-----------------------------------------

// heres the configuration

        var appSettings = new AppSettings();

        //Default route: /auth/{provider}
        Plugins.Add(new AuthFeature(() => new CustomUserSession(),
            new IAuthProvider[] {
                new CredentialsAuthProvider(appSettings),  // never seems to get called
                //new FacebookAuthProvider(appSettings),    // not sure how to get this to work on monotouch
                //new TwitterAuthProvider(appSettings),    // same issue as facebook
                new BasicAuthProvider(appSettings)    // works but what about caching/tokens/cookies?
            }));

        //Default route: /register
        Plugins.Add(new RegistrationFeature());    // how do i send extra params to this as created in mongodb collection

        var mongoClient = new MongoClient("mongodb://localhost");
        var server = mongoClient.GetServer();
        var db = server.GetDatabase("users");

        container.Register<ICacheClient>(new MemoryCacheClient());
        container.Register<IUserAuthRepository>(new MongoDBAuthRepository(db, true)); 
```

我的问题是：

1）我如何启用额外的字段与注册一起传递（因为 mongodb [Servicestack.Authentication.Mongodb] 有很多空字段，即出生日期、第一行、城市、时区等）在 ServiceStack.Common 中不存在.ServiceClient.Web.Registration 对象？

2）如何将“authresponse”中发送的cookie（甚至可能是令牌系统）传输到后续调用，以允许ServiceStack与会话匹配以进行持续身份验证，而不是更多正在进行的数据库调用，这似乎是问题使用“基本身份验证”方法（即不会在服务器端调用 CredentialsAuthProvider）？

请帮助...我已经阅读了文档，运行测试，检查了社交引导程序，现在我为此严重浪费了几天时间，并考虑将 SS 与 simplemembership 集成，甚至完全抛弃 ServiceStack 以获得旧的 skool soap/wcf，这要容易得多通过它的外观来实现:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T06:34:59.380

1）如果您想使用注册插件，我认为您不能添加其他字段，因为注册请求/类已经定义。您可以制作自己的注册服务并调用 RegistrationService/Plugin。此外，[这篇文章](https://stackoverflow.com/questions/11117469/how-can-i-extend-servicestack-authentication)可能会有所帮助。

```
[Route("/myregistration")]
public class MyRegistration : Registration //Add Additional fields for registration
{
    public DateTime? BirthDate { get; set;  }
    public string Gender { get; set; } 
}

public class MyRegisterService : Service
{
    public IUserAuthRepository UserAuthRepo { get; set; }
    public object Post(MyRegistration request)
    {
        using (var registrationService = base.ResolveService<RegistrationService>())
        {
            //handle the registration 
            var response = registrationService.Post(request.TranslateTo<Registration>());
        }

        //save the additional data
        var userAuth = request.TranslateTo<UserAuth>();
        UserAuthRepo.SaveUserAuth(userAuth);

        //can make your own response or grab response from RegistrationService above    
        return new MyRegistrationResponse();
    }
} 
```

2）您可以验证您的 JsonServiceClient 并重用它来发出多个请求。

```
var client = new JsonServiceClient(newbaseUri);
var authResponse = client.Send<AuthResponse>(new Auth {
    UserName = "user",
    Password = "pass",
    RememberMe = true
}); //if successful your 'client' will have a populated CookieContainer with 'ss-id' and 'ss-pid' values

//reusing 'client' (after successful authentication) to make a request
//to a service requiring authentication
var response = client.Send<HelloResponse>(new Hello { Name = "World!" }); 
```

如果不能重用“客户端”，您可以尝试存储 ss-id。我不太了解 MonoTouch 以及它如何存储“浏览器会话”，因此我不确定您将如何完成此操作。验证并存储 ss-id 后，您可以使用请求过滤器将其添加到客户端

```
//Get ss-id value
foreach(Cookie cookie in previousAuthenticatedClient.GetCookies(new Uri(newbaseUri)))
{
    if (cookie.Name == "ss-id") 
    {
        //store ss-id 
    }
}

var newClient = new JsonServiceClient(newbaseUri)
{
    LocalHttpWebRequestFilter = (req) =>
        {
            req.CookieContainer.Add(new Uri("http://localhost:56006"), new System.Net.Cookie("ss-id", ssId));
        }
}; 
```

# oop - 抽象类 VS 枚举（通用 OOP）

> ID：15723003
> 
> 赞同：1
> 
> 时间：2013-03-30T20:11:56.440
> 
> 标签：oop

我真的找不到如何决定哪个选项是最好的。我有一个“产品”类，其中包含要喂养的动物的“推荐年龄”，以及其他属性。

请注意，我只想要每个物种的RecommendedAge 的不同值，我不关心它们的数值等价物（用区分联合表示什么，但由于ORM 问题我不能使用它）。

由于“RecommendedAge”可能的值因 Animal de Product 目标的类型而异，我不知道以下哪种（或任何其他）方法是最好的（所有伪代码）：

```
Class Product {
    Id id;
    String name;
    RecommendedAge recommendedAge;
}

AbstractClass RecommendedAge {
}

Class DogRecommendedAge : RecommendedAge {
    readonly const Int Big;
    readonly const Int Small;
}

Class CatRecommendedAge : RecommendedAge {
    readonly const Int Medium;
    readonly const Int Tiny;
} 
```

或类似的东西：

```
AbstractClass Product {
    Id id;
    String name;
}

Enum DogRecommendedAge {
    Big = 0;
    Small = 1;
}

Enum CatRecommendedAge {
    Medium = 0;
    Tiny= 1;
}

Class DogProduct : Product {
    DogRecommendedAge dogRecommendedAge;
}

Class CatProduct : Product {
    CatRecommendedAge catRecommendedAge;
} 
```

这可能是一个非常愚蠢的，但我被困住了。谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T20:01:46.520

在运行时而不是在编译时存储推荐的年龄怎么样？在你的伪：

```
class RecommendedAges { 
  readonly const RecommendedAge dog = new RecommendedAge(2, 5); // example value
  readonly const RecommendedAge cat = new RecommendedAge(3, 4); // example value 
}

Class Product {
    Id id;
    String name;
    RecommendedAge recommendedAge;
}

Product p = new Product(1, 'dog food', RecommendedAges.dog); 
```

# extjs - Sencha Touch 2 使导航示例地图可平移

> ID：15723004
> 
> 赞同：0
> 
> 时间：2013-03-30T20:12:03.217
> 
> 标签：extjs, sencha-touch, sencha-touch-2

如何在 Sencha Touch 2 给出的示例中制作地图，导航视图可平移：

在线示例：

[http://cdn.sencha.io/touch/sencha-touch-2.1.0/examples/navigationview/index.html](http://cdn.sencha.io/touch/sencha-touch-2.1.0/examples/navigationview/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:36:46.327

您将在煎茶论坛上获得更好的煎茶答案。

这是一个可以满足您需求的扩展程序。

[https://github.com/SwarmOnline/Ext.ux.touch.MapLoader](https://github.com/SwarmOnline/Ext.ux.touch.MapLoader)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:40:28.480

这是因为上面的示例集`mapOptions`禁用了您的`panControl`：

```
mapOptions: {
    zoomControl: false,
    panControl: false,
    rotateControl: false,
    streetViewControl: false,
    mapTypeControl: false,
    zoom: 13
} 
```

您可以查看有关谷歌地图[选项的更多信息](https://developers.google.com/maps/documentation/javascript/reference#MapOptions)

# c - Interpolation Search Program?

> ID：15723006
> 
> 赞同：0
> 
> 时间：2013-03-30T20:12:06.603
> 
> 标签：c, search, interpolation

When I enter a value up to about 200000, there is no problem with it. But if I search a bigger value program just does nothing. Just passes one row down and wait. What is the problem with this?

```
#include<stdio.h>
#include<conio.h>
int isearch(int a[],int key);
int main()
{
  int arr[20000],n,i,key,mid;

  FILE *fptr;

  //read sorted list file!
  if((fptr = fopen("sorted.txt","r"))==NULL){
    printf("Error in reading file !\n");
    return 0;
  }
  //array of sorted list!
  while(!feof(fptr)){
    if(!feof(fptr)){
      fscanf(fptr,"%d",&arr[i]);
      i++;}

  }

  printf("\nEnter element to be found:");
  scanf("%d",&key);
  mid=isearch(arr,key);
  printf("\nFound at position %d",mid+1);
  getch();
  return 0;
}
int isearch(int a[],int key)
{
  int low=0,high=19999,mid;
  while(a[low]<key&&a[high]>=key)
  {
    mid=low+(high-low)*(key-a[low])/(a[high]-a[low]);
    if(a[mid]<key)
      low=mid+1;
    else if(a[mid]>key)
      high=mid-1;
    else
      return mid;
  }
  if(a[low]==key)
    return low;
  else
    return -1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:42:05.470

Your algorithm assumes that all of the values of `a` have been set, but you don't guarantee that ... what if your file has fewer than 20000 entries?

And suppose that `arr[19999]` is, say, 100000, and you search for 200000, `mid` will be set to a value greater than `high` and you get undefined behavior. You need to check that `mid` is within `low` .. `high`. And to avoid the first problem, you should pass low and high as parameters to your search function (or just the array size == `high + 1`, since `low` is always initially 0).

I suggest looking at any of the numerous examples of interpolation search algorithms available on-line and in books on algorithms.

# node.js - How to preserve filename when piping an s3 file download using pkgcloud and express

> ID：15723007
> 
> 赞同：1
> 
> 时间：2013-03-30T20:12:09.203
> 
> 标签：node.js

I'm using an express server to proxy a file to download from amazon s3\. How do I either preserve the filename in the header or set the filename info in the headers so that when a user downloads the filename it doesn't just say s3.jpeg but instead correctly says test.jpg?

```
 app.get("/s3", function(req, res) {
    var client;

    client = require('pkgcloud').storage.createClient({
      provider: "amazon",
      key: "test",
      keyId: "test"
    });
    return client.download({
      container: 'test',
      remote: 'test.jpg'
    }).pipe(res);
  }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T20:18:30.357

Ok, seems easy enough

res.setHeader('Content-disposition', 'attachment; filename=test.jpg');

in coffeescript

```
app.get "/s3", (req, res) ->

    res.setHeader('Content-disposition', 'attachment; filename=test.jpg');

    client.download(
        container:'test'
        remote:'test.jpg'
    ).pipe res 
```

# php - Facebook PHP SDK注销问题

> ID：15723009
> 
> 赞同：1
> 
> 时间：2013-03-30T20:12:31.403
> 
> 标签：php, facebook-graph-api, session-cookies

所以，我*知道*这个问题已被多次提出。但是大多数问题都是老问题，浏览至少一个小时后，我还没有找到这个问题的好答案。

我正在为我的网站使用官方的 Facebook PHP SDK。我的应用程序允许用户登录和注销。问题是，您无法真正注销。返回登录页面的唯一方法是手动清除 cookie。这只是一个基本问题，肯定有一个简单的解决方案吗？

```
$facebook = new Facebook($config);
$me = $facebook->api('/me');

if ($me) {
    $logoutUrl = $facebook->getLogoutUrl();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T05:00:43.147

```
$facebook -> destroySession(); 
```

为我工作。

以及手动清除 fbsr_ cookie

```
setcookie("fbsr_YOUR_APP_ID",'',time()-10); 
```

# javascript - Can I write scripts for hubot in Javascript?

> ID：15723017
> 
> 赞同：33
> 
> 时间：2013-03-30T20:14:07.153
> 
> 标签：javascript, coffeescript, hubot

Hubot is Github's chatroom robot. It's a great tool, except that no one at our company wants to write in Coffeescript....but it appears that we can't write scripts for Hubot in plain old Javascript.
Is this true? Is there something I'm missing here? Coffeescript is "just javascript" but I can't use Javascript with it?
**EDIT**
I was making 2 absurdly simple mistakes:
- I copied the CoffeeScript comment syntax into my JS file
- I had the script under the hubot-scripts node_module, instead of just under the /scripts/ directory in the main project.

Works perfectly now.

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-08-06T20:00:06.350

是的，你可以用纯 JavaScript 编写你的 hubot 脚本。以下是一个用纯 JavaScript 编写的简单 hubot 脚本，放在`/scripts/`我自定义的 hubot 目录下：

```
// Description:
//   holiday detector script
//
// Dependencies:
//   None
//
// Configuration:
//   None
//
// Commands:
//   hubot is it weekend ?  - returns whether is it weekend or not
//   hubot is it holiday ?  - returns whether is it holiday or not

module.exports = function(robot) {
    robot.respond(/is it (weekend|holiday)\s?\?/i, function(msg){
        var today = new Date();

        msg.reply(today.getDay() === 0 || today.getDay() === 6 ? "YES" : "NO");
    });
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-30T20:34:40.093

CoffeeScript 被编译成 JavaScript，但它不是 JavaScript 的超集，因此 JavaScript 代码不一定是有效的 CoffeeScript 代码。

尽管如此，在查看[source](https://github.com/github/hubot/blob/89faa39d5821e709d35a8a1f8319963a2aaead4a/src/robot.coffee#L213)之后，Hubot 似乎可以接受这两者：

```
 # Public: Loads a file in path.
  #
  # path - A String path on the filesystem.
  # file - A String filename in path on the filesystem.
  #
  # Returns nothing.
  loadFile: (path, file) ->
    ext  = Path.extname file
    full = Path.join path, Path.basename(file, ext)
    if ext is '.coffee' or ext is '.js'
      try
        require(full) @
        @parseHelp "#{path}/#{file}"
      catch error
        @logger.error "Unable to load #{full}: #{error.stack}"
        process.exit(1) 
```

此方法由 调用[`loadHubotScripts`](https://github.com/github/hubot/blob/master/src/robot.coffee#L199)。

# hadoop - 如何在整个文件处理结束时发出键值？

> ID：15723018
> 
> 赞同：0
> 
> 时间：2013-03-30T20:14:08.103
> 
> 标签：hadoop, mapreduce

映射器从文件中读取行...在整个扫描文件而不是每行之后，我如何才能最终发出键值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:30:33.417

使用新的 mapreduce API，您可以覆盖该`Mapper.cleanup(Context)`方法并`Context.write(K, V)`像往常在 map 方法中一样使用。

```
@Override
protected void cleanup(Context context) {
  context.write(new Text("key"), new Text("value"));
} 
```

您可以覆盖旧的 mapred API `close()`- 但您需要存储对`OutputCollector`给定 map 方法的引用：

```
private OutputCollector cachedCollector = null;

void map(Longwritable key, Text value, OutputCollector outputCollector, Reporter reporter) {
  if (cachedCollector == null) {
    cachedCollector = outputCollector;
  }

  // ...
}

public void close() {
  cachedCollector.collect(outputKey, outputValue);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:13:07.797

克里斯的答案的另一种选择可能是您可以通过覆盖`run()`Mapper 类（新 API）来实现这一点

```
public static class Map extends Mapper<IntWritable, IntWritable, IntWritable, IntWritable> {

  //map method here

  // Override the run()
  @override
  public void run(Context context) throws IOException, InterruptedException {
    setup(context);
    while (context.nextKeyValue()) {
      map(context.getCurrentKey(), context.getCurrentValue(), context);
    }
  // Have your last <key,value> emitted here
  context.write(lastOutputKey, lastOutputValue);
  cleanup(context);
  }
} 
```

为了确保每个映射器都能处理一个文件，您必须创建自己的版本`FileInputFormat`和*覆盖* `isSplittable()`，如下所示：

```
Class NonSplittableFileInputFormat extends FileInputFormat{

@Override 
    public boolean isSplitable(FileSystem fs, Path filename){ 
        return false; 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T08:31:44.490

您对整个文件或多个文件有一个键值吗？

如果是案例 #1：使用 WholeFileInputFormat。您将收到作为单个记录的完整文件内容。您可以将其拆分为记录，处理所有记录并在处理结束时发出最终键/值

Cae #2：使用相同的文件输入格式。将所有键值存储在临时存储中。最后，访问您的临时存储并发出您想要的任何键/值并抑制您不想要的那些

# java - Creating a JSP Filter to GZip Responses

> ID：15723022
> 
> 赞同：1
> 
> 时间：2013-03-30T20:14:55.747
> 
> 标签：java, jsp, optimization, gzip, web.xml

I have just finished writing a filter to gzip my responses with amazing results. My largest JSP page has gone from 80K to 5.7K. However, the filter I've written gzip's all responses from the server including images. However, [Yahoo](http://developer.yahoo.com/performance/rules.html) says this is a very bad practice.

```
Image and PDF files should not be gzipped because they are already compressed. 
Trying to gzip them not only wastes CPU but can potentially increase file sizes. 
```

Here is my web.xml footprint of the filter I've written

```
<!-- THIS FILTER WILL TAKE MY OUTPUT AND GZIP IT TO LESSEN MY BANDWIDTH FOOTPRINT -->
<filter>
    <filter-name>GZip</filter-name>
    <filter-class>org.instride.gzip.GZIPFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>GZip</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

So as you can see everything that is a response get's gzipped. However, I only want to gzip css js and jsp pages. So you'd think I could just add these guys

```
<url-pattern>*.jsp</url-pattern>
<url-pattern>*.css</url-pattern>
<url-pattern>*.js</url-pattern> 
```

But that would give me an issue b/c all of my jsp pages hide extensions b/c they are servlets, and I also use [tuckey's](http://tuckey.org/urlrewrite/) URL rewrite. So for example the URL of a page I'd want gzipped looks like this.

```
https://example.com/user/1/admin 
```

So the servlet (`user`) doesen't have an extension to pinpoint in the web.xml file, and the servlet is followed by forward slash parameters. So I'm thinking of two possible solutions.

1.  Instead of including file types I'd like gziped I include file types I want skipped like jpeg or gif.
2.  I specify to only gzip files based on their content type like `text/html;charset=UTF-8` for example.

Any guidance on how I could do either of those things, or a much better solution to my problem would be greatly appreciated. Thank you all for reading this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:01:16.183

I went off of the idea I had from number two and wrote this solution. In my solution I look at the accept attribute within the request header. From what I've gathered looking at firebug all of the images on my site no matter what their format have an accept attribute of

```
image/png,image/*;q=0.8,*/*;q=0.5 
```

I honestly have no idea what that means exactly but all jpg's png's and gif's have it and no other file types do so this is what I did.

...

```
public class GZIPFilter implements Filter 
{
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException 
    {
        if (servletRequest instanceof HttpServletRequest) 
        {
            HttpServletRequest httpRequest;
            HttpServletResponse httpResponse;
            String acceptedEncoding, accept;
            GZIPResponseWrapper wrappedResponse;

            httpRequest = (HttpServletRequest) servletRequest;
            httpResponse = (HttpServletResponse) servletResponse;

            accept = httpRequest.getHeader("accept");
            acceptedEncoding = httpRequest.getHeader("accept-encoding");

            if (acceptedEncoding != null && acceptedEncoding.indexOf("gzip") != -1 && !accept.equals("image/png,image/*;q=0.8,*/*;q=0.5")) 
            {
                wrappedResponse = new GZIPResponseWrapper(httpResponse);
                filterChain.doFilter(servletRequest, wrappedResponse);
                wrappedResponse.finishResponse();
                return;
            }

            filterChain.doFilter(servletRequest, servletResponse);
        }
    }

    public void init(FilterConfig filterConfig) 
    {

    }

    public void destroy() 
    {

    }
} 
```

# apache - 不仅仅是 VisualSVN 服务器的存储库？

> ID：15723025
> 
> 赞同：1
> 
> 时间：2013-03-30T20:15:11.663
> 
> 标签：apache, svn, visualsvn-server

我最近安装了 VisualSVN 服务器，并将几个存储库迁移到服务器。它很迷人。

但是，我想知道，除了托管存储库之外，是否可以使用 VisualSVN Server 托管不在本地网络中的存储库中的文件？

具体来说，我所有的存储库都存储在本地目录 F:Repositories 中，它们可以通过“ [https://MyServer.com/svn/](https://MyServer.com/svn/) ”在浏览器中访问。我想要做的是将存储库映射到该位置，以便它们可以照常访问，但我还想使用相同的 Apache 实例将文件托管在 C:\Data 和/或 F:\Data 某处。我想将它托管在“ [https://MyServer.com/Data/](https://MyServer.com/Data/) ”或类似的东西中，甚至作为 /svn/ 的子目录。我可以这样做吗？如果可以，该怎么做？

我找不到任何关于这样做的文档。因此，我尝试以多种方式编辑用于在 VisualSVN 服务器中配置 Apache 服务器的 *.conf 文件，但完全无法取得任何进展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:18:20.620

VisualSVN Server 的 Apache HTTP Server 实例是独立的，不打算用作通用 Web 服务器。

检查免责声明`%VISUALSVN_SERVER%\conf\httpd.conf`：

```
# This is configuration file for Apache HTTP server which is
# part of VisualSVN Server.
#
# DO NOT EDIT THIS FILE IT WILL BE REGENERATED AUTOMATICALLY BY VISUALSVN SERVER
#
# Contact with VisualSVN Ltd. (support@visualsvn.com) if you have suggestions and
# improvements. 
```

我想你可以通过手动修改来完成你描述的任务`%VISUALSVN_SERVER%\conf\httpd-custom.conf`。但是，我强烈建议您考虑使用单独的 Web 服务器来提供常规文件、网页等。

# c# - 第二次打开表单后无法调用 Invoke 或 BeginInvoke

> ID：15723030
> 
> 赞同：0
> 
> 时间：2013-03-30T20:15:32.623
> 
> 标签：c#, multithreading, invoke

我有一个客户端/服务器系统，客户端在该系统上充当服务器的从属。我的一个表格有一个`listview`由客户端上运行的进程填充的表格。同样的表格只能打开一次，因为第二次出现异常：`InvalidOperationException` `Invoke or BeginInvoke cannot be called on a control until the window handle has been created.`

表单构造函数：

```
public ProcessesForm(NetworkStream _stream)
{
    InitializeComponent();

    networkStream = _stream;

    //event on which the process list will be processed
    Server.OnProcessListingReceived += Server_OnProcessListingReceived;

    //request client for process list
    GetProcesses();

    this.ActiveControl = textBox1;
} 
```

事件处理程序：

```
private void Server_OnProcessListingReceived(object sender,
                                             EventArgs.ProcessesEventArgs e)
{
    //exception is thrown here
    listView1.Invoke(new EventHandler(delegate { listView1.Items.Clear(); }));

    processes = new List<ProcessesEventArgs.Process>(e.Processes);

    foreach (var item in e.Processes)
    {
        ListViewItem lvi = new ListViewItem(item.Id);
        lvi.SubItems.Add(item.Name);
        lvi.SubItems.Add((Convert.ToInt64(item.Memory) / 1024).ToString());

        listView1.Invoke(new EventHandler(delegate { listView1.Items.Add(lvi); }));
    }
} 
```

我正在调用 ，`listview`因为接收到的列表处理是在相应的客户端线程上完成的。

正如我在帖子开头所说的那样，在第一次打开表单时，一切正常。

我已经尝试过的：

*   手动创建句柄
*   在表单关闭时取消分配`OnProcessListingReceived`事件。
*   其他没有用的东西，我真的不记得了。

这个问题的原因可能是什么？

编辑：

正如汉斯帕桑特所说，问题可能是`thread race`，但如果是这样的话，不应该`lock`解决问题吗？我尝试实现锁定，但没有奏效：

```
lock(listView1)
{
    listView1.Invoke(new EventHandler(delegate { listView1.Items.Clear(); }));
} 
```

# c# - SELECTing and displayig data from a database onto a form

> ID：15723031
> 
> 赞同：-2
> 
> 时间：2013-03-30T20:15:37.683
> 
> 标签：c#, sql, select, sql-server-ce, database-connection

I have an existing Database created in sql server compact edition (inbuilt in visual c# 2010). I need to select and display data from this database on to a form. My code provided gets the form unresponsive.

```
 private void button1_Click(object sender, EventArgs e)
    {
        SqlDataReader rdr = null;
        SqlConnection conn = null;
        SqlCommand cmd = null;
        using (conn = new SqlConnection(@"Persist Security Info=False;Data              Source=ContactName.sdf;database=ContactName"))
        {
            conn.Open();
            string intero = "SELECT Name,Company FROM People";
            cmd = new SqlCommand(intero);

            rdr = cmd.ExecuteReader();

            lbFound.Items.Clear();
            while (rdr.Read())
            {
                lbFound.Items.Add(rdr["Name"].ToString() +
                " " + rdr["Company"].ToString());
            }

            rdr.Close();
            conn.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:23:29.637

When using SQL Server Compact, use SqlCeDataReader, SqlCeCommand and SqlCeConncetion. In addition, change your connection string to: Data Source=C:\folder\databasename.sdf

# php - 如何从 ePub 书写入服务器

> ID：15723035
> 
> 赞同：1
> 
> 时间：2013-03-30T20:16:05.640
> 
> 标签：php, javascript, xmlhttprequest, epub, epub3

有没有办法从 ePub 书中将数据写入服务器？

我正在尝试创建一个交互式活动来与一些书籍内容一起使用，并且我想将用户在活动中的响应写入服务器上的数据库。

我对活动的所有 JavaScript 和数据库的所有服务器端代码都很满意；但我似乎无法弄清楚如何将数据从 ePub 书获取到服务器。如果有可能呢？

我尝试过将 jQuery 与 AJAX 一起使用，并且我也尝试过使用 XMLHttpRequest。

我最接近的工作导致了一条错误消息：在 XXXX 列的 XXXX 行出错：xmlParseEntityRef：没有名称

这是一个代码片段：

```
var objRequest = new XMLHttpRequest();

objRequest.open("POST", "http://www.example.com/write.php?action=yes", false);
objRequest.send();

if (objRequest.status != 200 && objRequest.status != 0) {
  alert("error");
} else {
  alert("success");
} 
```

我相信错误是在 IF 语句行上报告的。我的 ALERT 语句都没有触发。

请注意，这在浏览器中运行良好。只是不在已编译的 ePub 包中。

任何意见是极大的赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:39:55.633

据我所知，Apple 不会让您从 Internet 获取任何数据到您的 epub（至少在 iBooks 中）。

仍然在 iBooks 中，您不能使用 POST 请求从您的 epub 发送数据。您可以将数据发送到 Internet 的唯一方法是使用 GET 请求，我认为您只能通过创建一个简单的链接而不是使用 AJAX 请求来做到这一点。

```
<a href="http://mywebsite.com/myfile.php?mydata=12324&my_other_data=foo">
Send data to myfile.php
</a> 
```

我不知道其他 epub 阅读器是否也是如此……但 Apple 刚刚锁定了 iBooks。

如果我错了，请告诉我，我有兴趣知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T13:03:25.133

如果您将图书打包在 iBooks author 中并将 JavaScript 创建为 HTML 小部件，Apple 将允许远程连接。我也试过做同样的事情，但为了让它与 epub 一起工作而头疼。试一试小部件和 iBooks 作者，我的书甚至在后台自动更新新数据。Trevor Burnham 有一个出色的小部件模板，您可以在这里使用：[https ://github.com/TrevorBurnham/iBooks-HTML-Widget-Boilerplate](https://github.com/TrevorBurnham/iBooks-HTML-Widget-Boilerplate)

# jquery - Blueimp File Upload SyntaxError: Unexpected token {

> ID：15723043
> 
> 赞同：0
> 
> 时间：2013-03-30T20:17:20.460
> 
> 标签：jquery, file-upload, asyncfileupload, blueimp

我刚刚升级到新的 jQuery（我想我有 1.7，现在是 1.10.2），它破坏了 BlueImp 文件上传，所以我更新了 blueImp 文件。

我无法追踪我遇到的错误。当我上传文件时，它会发送一个无效的 JSON 文件：

```
{"files":
  [{"name":"jpg.jpg","size":8483,"type":"image\/jpeg","url":"orderfiles\/139\/jpg.jpg","delete_url":"\\/public_html\/uploader\/139\/?file=jpg.jpg","delete_type":"DELETE"}]}
{"files":
 [{"name":"jpg (1).jpg","size":0,"type":"image\/jpeg","error":"abort","delete_url":"\\/public_html\/uploader\/139\/?file=jpg%20%281%29.jpg","delete_type":"DELETE"}]} 
```

这是重复的，第二个条目为空。文件被上传。

> 语法错误：意外的令牌 {

我的代码或多或少是从源代码中复制的，稍作修改

```
$('#fileupload').fileupload('option', {
    maxFileSize: 50000000,
    autoUpload: true,
    acceptFileTypes: /(\.|\/)(gif|jpe?g|png|psd|ai|pdf)$/i,
    process: [
        {
            action: 'load',
            fileTypes: /^image\/(gif|jpeg|png|psd|ai|pdf)$/,
            maxFileSize: 50000000 // 50MB
        },
        {
            action: 'save'
        }
    ]
}); 
```

关于为什么会复制 JSON 数据（第二个条目为空）的任何见解？我可以发布更多代码部分，我只是不确定哪些是相关的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-06T20:22:50.063

我不认为你提到你在写什么语言，我打赌说你正在使用 PHP，你可能会调用两次上传类，这发生在我身上。我明确地调用了它一次，但看起来 PHP 或我使用的框架正在为我调用它。

希望能帮助到你。

# ruby-on-rails - How does Depot's cart retain its line items?

> ID：15723048
> 
> 赞同：1
> 
> 时间：2013-03-30T20:18:07.837
> 
> 标签：ruby-on-rails, ruby

The Capturing an Order chapter in Agile Wed Development with Rails uses the following code:

```
# orders_controller.rb
def create
    @order = Order.new(params[:order])
    @order.add_line_items_from_cart(current_cart)
    if @order.save
      Cart.destroy(session[:cart_id])
      session[:cart_id] = nil
      redirect_to store_url
    else
      @cart = current_cart
      render 'new'
    end
end

  # order.rb
  def add_line_items_from_cart(cart)
    cart.line_items.each do |item|
      item.cart_id = nil
      line_items << item
    end
  end 
```

How does the cart retain its line items when there's a validation error? The `add_line_items_from_cart` runs before we know whether the order is valid or not. It associates the line items with the order, then sets the `item.cart_id` to nil:

```
item.cart_id = nil
self.line_items << item # self is an instance of `Order`. 
```

When I submit an empty form then view the cart, all the line items are still there. How is this possible? What have I missed?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:45:57.953

The cart is only destroyed when the order is saved. So I guess it will never lose the items. What happens is when you create the order it probably destroy the current cart and the it creates a new one.

# ios - Adding to a int when UIImages collide

> ID：15723051
> 
> 赞同：0
> 
> 时间：2013-03-30T20:18:39.733
> 
> 标签：ios, uiview, int, collision

Firstly here is my .h files code where i declared everything...

```
 @interface NextlLevel : UIViewController{

     IBOutlet UIImageView *Coin1;
      int score;
      IBOutlet UILabel *scorelable;
  }

 @property (nonatomic, assign) int score;
 @property (nonatomic, retain) IBOutlet UILabel *scorelable;

  @end 
```

I have also synthesised my implementations in my .m file here is the code...

```
 @synthesize score;
    @synthesize scorelable; 
```

Secondly I have some code which just checks if my drag-able image has collided with a still image. Here is the code...

```
-(void) ifCollided {

   if(CGRectIntersectsRect(Coin1.frame,MoneyBag.frame)){
       Coin1.hidden = YES;

    }
  } 
```

This code is just a basic way of checking for a collision but once the image has collided I want to add to a int which is displayed in a label. The only way i thought i could do this was by ...

firstly adding this line of code to 'ifCollided'

```
 [self scorecheck]; 
```

So now 'ifCollided' looks something like this:

```
-(void) ifCollided {

   if(CGRectIntersectsRect(Coin1.frame,MoneyBag.frame)){
       Coin1.hidden = YES;
        [self scorecheck];
    }
  } 
```

Thirdly I had to make 'scorecheck' I did this by...

```
 -(void)scorecheck{
              score++;
        scorelable.text = [NSString stringWithFormat:@"%i", score];

    }

  } 
```

Here is a image to show that the code I'm currently using is not working correctly. And therefore is not just adding just one to the int that i set to 0\. I'm displaying the int in the score label (at the top of my screen). Due to the code not correctly working as long as you touch, drag and hold whilst colliding in the boundaries of the image with the collission rule (in this case the moneybag)

Here is to the image i was talking about:

![enter image description here](../Images/99c15b16c02f12b3affe6b189fee3fe7.png)

Any help would be very appreciated

Edit:Here is what i was meant to do in the void ifCollided

```
-(void) ifCollided {

    if (!Coin1.hidden)
    {
        Coin1.hidden = YES;
        [self scorecheck];
    }
  } 
```

Thanks @Elliott Perry

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:48:35.727

So, to clarify, you would like a mechanism that guarantees that the score will only increment once per each coin colliding with the moneybag?

There are any number of ways to do this but they all require you to keep track of which coins have already been processed in some way. You could give each of your coins a unique reference and store a collection of ids that represent coins that have already been processed, avoiding calling `scorecheck` if the collection contains the id of the coin in question.

Alternatively, and the method I'd go with, you can mark each coin to let yourself know not to process that coin a second time. Since your hiding the coins on collision, why not use the `hidden` property to determine whether to increment the score or not:

```
-(void)ifCollided
{
    if(CGRectIntersectsRect(Coin1.frame,MoneyBag.frame))
    {
        if (!Coin1.hidden)
        {
            Coin1.hidden = YES;
            [self scorecheck];
        }
    }
} 
```

If for whatever reason that isn't feasible here is an example marking the coins using the tag property:

```
-(void)ifCollided
{
    if(CGRectIntersectsRect(Coin1.frame,MoneyBag.frame))
    {
        if (Coin1.tag != 1)
        {
            Coin1.hidden = YES;
            [self scorecheck];
            Coin1.tag = 1;
        }
    }
} 
```

# django - Django table TRUNCATE based on DB type in view

> ID：15723052
> 
> 赞同：2
> 
> 时间：2013-03-30T20:18:46.397
> 
> 标签：django

What is the fastest way to truncate a table in the Django ORM based on the database type in a view? I know you can do this for example

```
Books.objects.all().delete() 
```

but with tables containing millions of rows it is very slow. I know it is also possible to use the cursor and some custom SQL

```
from django.db import connection
cursor = connection.cursor()
cursor.execute("TRUNCATE TABLE `books`") 
```

However, the TRUNCATE command does not work with SQLite. And if the database moves to another db type, I need to account for that.

Any ideas? Would it be easier to just drop the table and recreate in my view?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T20:49:08.797

Django's `.delete()` method is indeed very slow, as it loads the IDs of each object being deleted so that a `post_save` signal can be emitted.

This means that a simple `connection.execute("DELTE FROM foo")` will be significantly faster than `Foo.objects.delete()`.

If that's still too slow, a truncate or drop+recreate is definitely the way to go. You can get the SQL used to create a table with: `output, references = connection.creation.sql_create_model(model, style)`, where `style = django.core.management.color_style()` (this is taken from [https://github.com/django/django/blob/master/django/core/management/sql.py#L14](https://github.com/django/django/blob/master/django/core/management/sql.py#L14)).

# php - PHP Undefined variable in while loop

> ID：15723053
> 
> 赞同：0
> 
> 时间：2013-03-30T20:18:53.943
> 
> 标签：php, loops

**Problem**

While I am fetching information from mysql, I also want to check that some specify column in mysql row is 0.

But then I get the notice Undefined Variabe yet the code works?

**Code** Line 157:

```
 while($row = $fetch->fetch( PDO::FETCH_ASSOC  ) && $row['status'] == 0) { 
```

**Error I get**

```
Notice: Undefined variable: row in C:\xampp\htdocs\recover\admin\index.php on line 157 
```

***My question***:

How do I get rid of that error without creating a if statement under the while loop? I basically want it to handle this in the while loop, if I am not doing that wrong?.

Is using a if statement under the while loop better than using it in the while loop?

What is causing the error? I am already defining what $row is before the && row['status'] == 0.

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T20:20:28.407

You need parentheses:

```
while(($row = $fetch->fetch( PDO::FETCH_ASSOC  )) && $row['status'] == 0) 
```

# c# - 在 Metro Apps C# 中使用自定义数据资源

> ID：15723057
> 
> 赞同：0
> 
> 时间：2013-03-30T20:19:18.743
> 
> 标签：c#, parsing, xaml, microsoft-metro

我是 Metro 应用程序的新手。我想使用 ListView 控件显示图像和一些数据。为此，我搜索并发现我必须放置我的自定义数据资源。我有这个：

```
<DataTemplate x:Key="ImageTextListCollectionTemplate">
    <StackPanel Orientation="Horizontal" Width="500" Height="130">
        <Border Height="110" Width="110" Margin="10,10,0,10">
            <Image Source="/SampleImage.png" Stretch="UniformToFill"/>
        </Border>
        <StackPanel Orientation="Vertical" VerticalAlignment="Top" Margin="0,10,0,0">
            <TextBlock Text="Aellus nec ipsum tempor id laoreet viverra" 
                   Margin="10,0,0,0" Width="350" Height="20" TextTrimming="WordEllipsis" />
            <TextBlock Text="Phasellus faucibus" 
                   Margin="10,2,0,0" Width="350" Height="14" TextTrimming="WordEllipsis" 
                   HorizontalAlignment="Left" FontSize="9" Opacity="0.49"/>
            <TextBlock Text="A Proin leo nulla, scelerisque non congue nec, facilisis a tellus. Sed varius rhoncus metus, et condimentum ipsum luctus ullamcorper." 
                   Margin="10,2,0,0" Width="350" TextTrimming="WordEllipsis" TextWrapping="Wrap"/>
        </StackPanel>
    </StackPanel>
</DataTemplate> 
```

现在到目前为止我可以理解，我必须解析它。我读过[这个](https://stackoverflow.com/questions/15342851/win-8-metro-app-c-sharp-multiple-itemtemplate)和[这个](https://stackoverflow.com/questions/14826510/how-to-bind-image-in-gridview-using-xml-parsing-in-windows-metro-app)，但无法理解。假设我对解析没有/很少，请提供一些有用的链接/解决方案，这使我能够理解利用它的科学。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:26:40.523

为了查看数据，您必须将对象列表绑定到您的列表视图。

所以说你有这样的班级叫人：

```
class Person{
    string Name{get; set;}
} 
```

例如，在负载的代码隐藏中，您应该执行以下操作：

```
List<Person> people = getPeople();  // Load your data from somewhere
this.myListView.ItemsSource = people; 
```

在您的数据模板中，您可以像这样绑定到属性：

```
<TextBlock Text="{Binding Name}" /> 
```

# c++ - 工厂模式 - 在静态成员函数中无效使用成员

> ID：15723058
> 
> 赞同：0
> 
> 时间：2013-03-30T20:19:24.500
> 
> 标签：c++, factory-pattern

我是 C++ 中这种工厂模式的新手，但在尝试实现其中一种方法时，我得到了标题，但出现以下错误：

静态成员函数中成员“creationFunctions”的无效使用

```
typedef Shape (*createShapeFunction)(void);
/* thrown when a shape cannot be read from a stream */
class WrongFormatException { };

class ShapeFactory {

public:

    static void registerFunction(const std::string &string, const createShapeFunction *shapeFunction);
    static Shape *createShape(const std::string &string);
    static Shape *createShape(std::istream &ins);

private:

    std::map<std::string, createShapeFunction *> creationFunctions;
    ShapeFactory();
    static ShapeFactory *getShapeFactory();
};

void ShapeFactory::registerFunction(const std::string &string, const createShapeFunction *shapeFunction)
{
    creationFunctions.at(string) = shapeFunction;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:28:53.210

您不能从静态成员函数访问类的非静态成员。在您的示例中，最好的想法可能是使所有成员函数都不是静态的，除了“getShapeFactory”，它将充当 Mayer 的单例生成器......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T20:30:56.890

`ShapeFactory`我看到的一个问题是您正在从静态函数访问一个私有变量。静态函数与 a 的特定实例无关，`ShapeFactory`因此您无法访问非静态私有变量。另一个副作用是它`this`没有在静态函数的上下文中定义。每次创建`ShapeFactory`一个新实例的实例时，`std::map<std::string, createShapeFunction *> creationFunctions`都会为每个`ShapeFactory`.

我对实现工厂不是很熟悉，但我认为您可能想要做的是`std::map<std::string, createShapeFunction *> creationFunctions`静态化，以便它可以被`ShapeFactory`. 像你的头文件包含的私有构造函数表明`ShapeFactory`它将是一个单例，所以如果你真的希望它是一个单例，`std::map<std::string, createShapeFunction *> creationFunctions`通过静态制作应该是可以的。

根据不修改标题的要求进行编辑：

您可以`registerFunction`从`getShapeFactory()`. 请注意我如何创建一个不是 const 指针的新指针。这允许您将指针插入到地图中。我不确定如何最好地处理`shapeFunction`，因为这种方法似乎并不理想，但我不能 100% 确定这个函数应该做什么。

```
void ShapeFactory::registerFunction(const std::string &string, const createShapeFunction *shapeFunction)
{
    createShapeFunction* shapeFuncPtr = new createShapeFunction(*shapeFunction);
    ShapeFactory* factory = getShapeFactory();
    factory->creationFunctions.insert(std::pair<string, createShapeFunction*>(string, shapeFuncPtr));
} 
```

`getShapeFactory`在其中创建一个工厂的静态变量。每次调用此函数时都会保存此变量的值，因此在第一次调用此函数后，每次都将返回相同的指针。这必须在包含您的标头的 .cpp 文件中实现。

```
ShapeFactory::getShapeFactory()
{
    static ShapeFactory* factory;
    if (factory == NULL)
        factory = new ShapeFactory();
    return factory;
} 
```

# php - 将数组拆分为特定数量的块

> ID：15723059
> 
> 赞同：22
> 
> 时间：2013-03-30T20:19:40.450
> 
> 标签：php, arrays, split

我知道这`array_chunk()`允许将数组拆分为几个块，但是块的数量会根据元素的数量而变化。我需要的是始终将数组拆分为特定数量的数组，例如 4 个数组。

以下代码将数组拆分为 3 个块，两个块每个包含 2 个元素，1 个块包含 1 个元素。我想要的是将数组始终拆分为 4 个块，无论数组具有的总元素数量如何，但始终尝试像 array_chunck 函数一样将元素均匀地划分在块中。我怎样才能做到这一点？是否有任何 PHP 功能？

```
$input_array = array('a', 'b', 'c', 'd', 'e');
print_r(array_chunk($input_array, 2));
print_r(array_chunk($input_array, 2, true)); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-30T20:40:49.983

你可以试试

```
$input_array = array(
        'a',
        'b',
        'c',
        'd',
        'e'
);

print_r(partition($input_array, 4)); 
```

输出

```
Array
(
    [0] => Array
        (
            [0] => a
            [1] => b
        )

    [1] => Array
        (
            [0] => c
        )

    [2] => Array
        (
            [0] => d
        )

    [3] => Array
        (
            [0] => e
        )

) 
```

使用的功能

```
/**
 * 
 * @param Array $list
 * @param int $p
 * @return multitype:multitype:
 * @link http://www.php.net/manual/en/function.array-chunk.php#75022
 */
function partition(Array $list, $p) {
    $listlen = count($list);
    $partlen = floor($listlen / $p);
    $partrem = $listlen % $p;
    $partition = array();
    $mark = 0;
    for($px = 0; $px < $p; $px ++) {
        $incr = ($px < $partrem) ? $partlen + 1 : $partlen;
        $partition[$px] = array_slice($list, $mark, $incr);
        $mark += $incr;
    }
    return $partition;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-30T20:28:32.527

将数组的大小除以您想要的块数，并将其作为每个块的大小。

```
function array_chunks_fixed($input_array, $chunks=3 /*Default chunk size 3*/) {
    if (sizeof($input_array) > 0) {        
        return array_chunk($input_array, intval(ceil(sizeof($input_array) / $chunks)));
    }

    return array();
} 
```

并这样称呼它：

```
array_chunks_fixed($myarray, 2); //override the default number of '3' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-08-20T13:09:45.893

这里有很多复杂的答案。我将发布我的简单解决方案:)

```
function splitMyArray(array $input_array, int $size, $preserve_keys = null): array
{
    $nr = (int)ceil(count($input_array) / $size);

    if ($nr > 0) {
        return array_chunk($input_array, $nr, $preserve_keys);
    }

    return $input_array;
} 
```

用法：

```
$newArray = splitMyArray($my_array, 3); 
```

**更多细节在这里：** [https ://zerowp.com/split-php-array-in-x-equal-number-of-elements/](https://zerowp.com/split-php-array-in-x-equal-number-of-elements/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-04T11:29:36.937

这就是我写的很好用 print_r(array_divide($input,3));

```
function array_divide($array, $segmentCount) {
    $dataCount = count($array);
    if ($dataCount == 0) return false;
    $segmentLimit = 1;
    //if($segmentCount > $segmentLimit)
      //  $segmentLimit = $segmentCount;
    $outputArray = array();
    $i = 0;
    while($dataCount >= $segmentLimit) {

        if( $segmentCount  == $i)
            $i = 0;
        if(!array_key_exists($i, $outputArray))
            $outputArray[$i] = array();
        $outputArray[$i][] =  array_splice($array,0,$segmentLimit)[0] ;
        $dataCount = count($array);

       $i++;
    }
    if($dataCount > 0) $outputArray[] = $array;

    return $outputArray;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-14T18:09:23.033

另一个类似于@Baba 的`partition()`功能的实现。

```
// http://php.net/manual/en/function.array-slice.php#94138
// split the given array into n number of pieces 
function array_split($array, $pieces=2) 
{   
    if ($pieces < 2) 
        return array($array); 
    $newCount = ceil(count($array)/$pieces); 
    $a = array_slice($array, 0, $newCount); 
    $b = array_split(array_slice($array, $newCount), $pieces-1); 
    return array_merge(array($a),$b); 
} 

// Examples: 
$a = array(1,2,3,4,5,6,7,8,9,10); 
array_split($a, 2);    // array(array(1,2,3,4,5), array(6,7,8,9,10)) 
array_split($a, 3);    // array(array(1,2,3,4), array(5,6,7), array(8,9,10)) 
array_split($a, 4);    // array(array(1,2,3), array(4,5,6), array(7,8), array(9,10)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-30T20:43:08.210

这应该有效：

```
function getChunks(array $array, $chunks)
{

  if (count($array) < $chunks)
  {
    return array_chunk($array, 1);
  }

  $new_array = array();

  for ($i = 0, $n = floor(count($array) / $chunks); $i < $chunks; ++$i)
  {

    $slice = $i == $chunks - 1 ? array_slice($array, $i * $n) : array_slice($array, $i * $n, $n);

    $new_array[] = $slice;

  }

  return $new_array;

}

$input_array = array('a', 'b', 'c', 'd', 'e');

echo '<pre>' . print_r(getChunks($input_array, 4), TRUE) . '</pre>'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-27T17:24:43.720

如果有人正在寻找将超级数组划分为较少数量的单独数组的解决方案。

```
$count = count($appArray); //$appArray contains all elements
$repoCount = 3; //No. of parts to divide

$n = floor($count/$repoCount);
$rem = $count % $repoCount;
$j=1;

while($j <= $repoCount){

   ${"arr_" . $j} = array();
   $j++;

}

$j=0;
$k=1;

for($i=0; $i < $count; $i++){

    if($j < $n){

        array_push(${"arr_" . $k}, $appArray[$i]);
        $j++;

    }
    else if($k < $repoCount){

        $j=0;
        $k++;
        --$i;

    }
    if($i >= ($count-$rem)){

        $k=1;

        for($j=0; $j < $rem; $j++, $i++, $k++){

            array_push(${"arr_" . $k},$appArray[$i]);

        }
        break;
    }
} 
```

# c++ - 如何检查接口是否启动

> ID：15723061
> 
> 赞同：9
> 
> 时间：2013-03-30T20:19:43.263
> 
> 标签：c++, linux, ioctl

标题几乎说明了一切。如果我运行`ifconfig`，我会得到这个：

```
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
    inet -snip-  netmask 255.255.255.0  broadcast -snip-
    ... 
```

使用它，我可以知道它是否启动（`<UP,...`），但我希望能够在 C（或 C++，如果那里有更简单的解决方案）中执行此操作，而不依赖于解析外部进程。

* * *

这是我到目前为止所得到的（不起作用）：

```
bool is_interface_online(std::string interface) {
    struct ifreq ifr;
    int sock = socket(PF_INET6, SOCK_DGRAM, IPPROTO_IP);
    memset(&ifr, 0, sizeof(ifr));
    strcpy(ifr.ifr_name, interface.c_str());
    if (ioctl(sock, SIOCGIFFLAGS, &ifr) < 0) {
            perror("SIOCGIFFLAGS");
    }
    close(sock);
    return !!(ifr.ifr_flags | IFF_UP);
} 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-30T20:37:44.103

答案很简单：我使用了按位 OR ( `|`) 运算符而不是 AND ( `&`) 运算符。固定代码是：

```
bool is_interface_online(std::string interface) {
    struct ifreq ifr;
    int sock = socket(PF_INET6, SOCK_DGRAM, IPPROTO_IP);
    memset(&ifr, 0, sizeof(ifr));
    strcpy(ifr.ifr_name, interface.c_str());
    if (ioctl(sock, SIOCGIFFLAGS, &ifr) < 0) {
            perror("SIOCGIFFLAGS");
    }
    close(sock);
    return !!(ifr.ifr_flags & IFF_UP);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-03-12T22:10:16.830

If you care about the up/down state of the interface you might want to use the "IFF_RUNNING" flag instead of the "IFF_UP" flag provided by the current answer.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-31T08:06:25.737

您是否考虑过使用该`strace`命令来查看其`ifconfig`工作原理？您甚至可以看到传递给函数的参数以及其他有趣的`ifconfig`工作细节..

# c++ - SDL 不加载/显示正确的图像

> ID：15723063
> 
> 赞同：0
> 
> 时间：2013-03-30T20:19:51.760
> 
> 标签：c++, sdl, sdl-image

我正在写一个简单的游戏。我被一个错误所困扰，我无法弄清楚是什么原因。在我写的代码中：

```
DxFrame[0] = ImageLoader("Rome/Ball_Dx/RomeDx1.png");
DxFrame[1] = ImageLoader("Rome/Ball_Dx/RomeDx2.png");
DxFrame[2] = ImageLoader("Rome/Ball_Dx/RomeDx3.png");
DxFrame[3] = ImageLoader("Rome/Ball_Dx/RomeDx4.png");
DxFrame[4] = ImageLoader("Rome/Ball_Dx/RomeDx5.png");

SxFrame[0] = ImageLoader("Rome/Ball_Sx/RomeSx1.png");
SxFrame[1] = ImageLoader("Rome/Ball_Sx/RomeSx2.png");
SxFrame[2] = ImageLoader("Rome/Ball_Sx/RomeSx3.png");
SxFrame[3] = ImageLoader("Rome/Ball_Sx/RomeSx4.png");
SxFrame[4] = ImageLoader("Rome/Ball_Sx/RomeSx5.png"); 
```

但是当我在监视器中编译时 DxFrame[4] 不是应该的。事实上，他变成了 SxFrame[0]。我不明白为什么会这样。

编辑这是图像加载器：

```
 SDL_Surface* ImageLoader(string Image) {

        SDL_Surface* LoadedImage    = NULL;

        SDL_Surface* OptimizedImage = NULL;

        LoadedImage = IMG_Load(Image.c_str());

        OptimizedImage = SDL_DisplayFormat(LoadedImage);

        SDL_FreeSurface(LoadedImage);

        return OptimizedImage;
        } 
```

我认为没有更多相关的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:19:10.850

您的数组可以容纳 4 个图像，但您正在向其中写入 5 个图像，这将覆盖它之后的任何内容。

# mobile - nginx 301 从 www 到移动站点导致 404

> ID：15723064
> 
> 赞同：0
> 
> 时间：2013-03-30T20:20:09.797
> 
> 标签：mobile, nginx, rewrite

我正在为我的移动网站的根目录获取 404。我的浏览器检测代码会查找移动用户-aget，设置可变标头和 301 到移动站点。

这是主站点配置

```
server {
  listen 80;
  server_name www.mydomain.com;
  location / {
    if ( $is_mobile) {
      add_header Vary "User-Agent";
      return 301 $scheme://m.mydomain.com$request_uri;  
    }
} 
```

这是移动站点配置

```
server {
  listen 80;
  server_name m.mydomain.com;
  root /var/www/mobile;
  index index.html;

  location / {
    try_files $uri $uri/ @dynamic;
  }

  location @dynamic {
    rewrite ^/(.*)$ /index.html last;
   }      
} 
```

我正在使用 FireFox Override User Agent 扩展进行测试。如果我去 www.mydomain.com 应用程序正确加载。但是，当我切换到移动浏览器时 Nginx 404s。

Nginx 200s 用于手动输入的页面 -

```
http://m.mydomain.com/index.html
http://m.mydomain.com/about.html
http://m.mydomain.com/pricing.html 
```

由于 index 和 root 都设置了，站点不应该将[http://m.mydomain.com/](http://m.mydomain.com/)指向[http://m.mydomain.com/index.html](http://m.mydomain.com/index.html)吗？

如果不是，最好的标准化方法是什么？

**更新：**为移动检测添加了配置

这是我在主 nginx.conf 文件中用于移动检测的配置

```
map $http_user_agent $is_desktop {
default 0;
        ~*linux.*android|windows\s+(?:ce|phone) 0; # exceptions to the rule
        ~*spider|crawl|slurp|bot 1; # bots
        ~*windows|linux|os\s+x\s*[\d\._]+|solaris|bsd 1; # OSes
}

map $is_desktop $is_mobile {
        1 0;
        0 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:07:25.693

看不出有什么不对。我在我的 devbox 中尝试了您的配置文件，它成功了：请求被重定向到 m.mydomain.com 并提供了 index.html。

所以可能是其他原因导致了这个问题。你是如何设置 $is_mobile 的？也许设置 $is_mobile 有一些副作用，如果 nginx 没有选择您问题中的块来服务移动请求。您的移动请求进入了另一个不知道如何处理的位置块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:45:44.883

在 sites-available 中有一个名为 1 的文件，它被符号链接到 site-enabled。不确定它是如何到达那里的，但我取消链接并删除了它，重新启动了 Nginx，并且 / 现在正确解析为 index.html。很奇怪。

# css - How does Impress.js's CSS work?

> ID：15723065
> 
> 赞同：2
> 
> 时间：2013-03-30T20:20:11.780
> 
> 标签：css, impress.js

I was reading about [Impress.js](https://github.com/bartaz/impress.js) and I have some questions about the code below (Part of the Inpress's demo).

```
.impress-enabled .step {
    margin: 0;
    opacity: 0.3;

    -webkit-transition: opacity 1s;
    -moz-transition:    opacity 1s;
    -ms-transition:     opacity 1s;
    -o-transition:      opacity 1s;
    transition:         opacity 1s;
}

.impress-enabled .step.active { opacity: 1 } 
```

**My questions:**

1.  What is .impress-enabled class here for?

2.  So class .active is applied on the step currently displayed? And thus, its opacity changes to 1 when its displayed and back to .3 when its next one is displayed; as described in .impress-enabled .step above it, right?

Thanks for help

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:01:51.393

1.  if javascript is deactivated by the visitors browser, he won't get a .impress-enabled class at all, because it is added via javascript. that's how they could separate a javascript and a non-javascript version (simply deactivate javascript for a moment and visit an example page of impress.js again). So if you have js activated, the class "bored" gets removed and a class called "impress-on-bored" and "impress-enabled" gets activated.
2.  Yes. You're right.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T02:22:08.873

impress-on-ID can be used to add slide specific js or css code when it becomes active. For example, if your slides are small and multiple slides are contained in the browser window, we can initially hide all the slides other than first slide.

Once specific slide becomes active, it will get impress-on-ID class. We can use this class to make the step visible.

If you want to know more, read my book on [Building Impressive Presentations with impress.js](http://www.packtpub.com/building-impressive-presentations-with-impressjs/book)

# ios - 在 3g 上慢到无法使用 - 在 wifi 上很好

> ID：15723072
> 
> 赞同：2
> 
> 时间：2013-03-30T20:20:53.520
> 
> 标签：ios, json, performance, 3g

我的 iOS 应用程序使用 php 脚本向数据库发出请求，并发送回一些数据。数据库命中非常简单，只是根据唯一键获取一些数据。

它在 wifi 上运行良好（延迟不到一秒），但在 3g 上运行缓慢到无法使用的地步。谁能告诉我可能是什么原因，或者我可以在哪里探索更多？我想像 facebook 或 googlemaps 这样的应用程序比我正在做的数据密集得多，但它们的响应速度似乎要快得多。我可能向服务器发送不超过 20-30 个字符（加上 JSON 添加的任何开销），并返回 ~500-1000 个字符（加上 JSON 添加的任何开销）。

我正在同步发送东西，但我认为异步不会对我有帮助......数据不会出现，直到我收到消息。

我的发送和接收代码是：

```
+ (id)queryDBJSON:(NSString*)script inputs:(id)post
{
    NSError *error;
    NSData *jsonPayload = [NSJSONSerialization dataWithJSONObject:post options:NSJSONWritingPrettyPrinted error:&error];

    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@", script]];

    NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
    [theRequest setHTTPMethod:@"POST"];
    [theRequest setHTTPBody:jsonPayload];

    NSHTTPURLResponse* urlResponse = nil;
    NSData *responseData = [NSURLConnection sendSynchronousRequest:theRequest returningResponse:&urlResponse error:&error];
    if ([urlResponse statusCode] != 200)
    {
        return nil;
    }

    NSString *strResult = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    NSData *jsonData = [strResult dataUsingEncoding:NSUTF8StringEncoding];

    id aa = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error];
    return aa;
} 
```

感谢您的任何投入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:44:35.327

这些情况下的问题不是网络带宽，而是网络延迟（一个小请求仍然需要很长时间）。不幸的是，您无法解决网络延迟问题。因此，有几点观察：

1.  As rmaddy says, you simply must do your network operations asynchronously (either with synchronous calls in a background queue or using asynchronous methods). If you don't and your app fails to respond in a timely manner, not only will you suffer a UX with unacceptable delays, but if it takes long enough, iOS may even kill your app. If you don't want iOS killing your app when there is a high network latency, you must use asynchronous network operations.

2.  Beyond the obvious (and necessary) solution of doing asynchronous network operations, you generally cache previous result sets (so rather than just showing the user a `UIProgressView` and stopping all interaction with your app until the asynchronous calls are done, you can show the user the last good results). If you look at apps like Facebook (or, really, any well executed app that interacts with the network), you'll see that they show you what you saw when you last visited that page, they give you some visual indication that further network operations are in progress (e.g. at the very least, the spinning network activity indicator in the status bar), and as new results come in over the network, they then update the view accordingly.

3.  A more sophisticated approach is to initiate the asynchronous network requests that the user will need for subsequent operations as soon as the app starts (rather than waiting until the user navigates to the screen for which that network data is needed). This only works in those cases where the user is navigating to different parts of your app that need to make different network requests, but it's a wonderful way to isolate the user from the network latency in those cases.

4.  If you absolutely can't cache previous result sets for a Facebook-like UX, then still do your network operations asynchronously, but present the user with UI that makes it clear that network operations are in progress (e.g. a `UIProgressView` with perhaps on a black `UIView` with a 50% alpha that covers the rest of the screen). That gives the user a visual indication that your app can't present results until the network operation is done. And because you're doing the operations asynchronously, iOS won't kill your app.

# jquery - jQuery .animate 问题

> ID：15723076
> 
> 赞同：1
> 
> 时间：2013-03-30T20:21:26.317
> 
> 标签：jquery, jquery-animate, background-position

我有以下一段代码。

```
 if ($(checkboxID)[0].checked == false) {
                $(this).animate({
                    'background-position-x': '0%',
                    'background-position-y': '0%'
                }, 200, 'linear');

                $(checkboxID)[0].checked = true;
                $(this).removeClass('off').addClass('on');

            } else {
                $(this).animate({
                    'background-position-x': '100%',
                    'background-position-y': '0%'
                }, 200, 'linear');

                $(checkboxID)[0].checked = false;
                $(this).removeClass('on').addClass('off');

            } 
```

正如您所看到的，if 两边的代码是相同的，但如果它是 true，jquery 不会为过渡设置动画，无论我增加多少持续时间。你们中的任何人都可以看到我错过的错误吗？

编辑：这也是css：

```
 .checkbox-style  {
    display: block;
    width: 87px;
    height: 28px;
    background: url('images/check-square.png') no-repeat;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    overflow: hidden;
    cursor: pointer;
   }
   .on {
    background-position: 0% 0%;
   }
   .off {
    background-position: 100% 0%;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:26:39.417

我会猜测一下，但我想这个`off`类的元素是不可见的。由于类更改是立即执行的，因此您没有时间查看动画。

您可能希望在动画结束时更改类。为此，将回调传递给`animate`，动画完成时将调用它：

```
 $(this).animate({
                'background-position-x': '100%',
                'background-position-y': '0%'
            }, 200, 'linear', function(){
               $(checkboxID)[0].checked = false;
               $(this).removeClass('on').addClass('off');
            }); 
```

# labview - 如何修改labview中的波形图以毫秒而不是秒显示时间轴？

> ID：15723077
> 
> 赞同：0
> 
> 时间：2013-03-30T20:21:44.927
> 
> 标签：labview, waveform

在下面的 LabView 图中：

![在此处输入图像描述](../Images/90603d2836977fab7623690aa58ff2ed.png)

我得到的波形看起来是三角形的，但我希望它看起来更像方脉冲波。如何更改时间轴以毫秒而不是秒显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T15:01:16.987

您可以将 x 格式的显示更改为 %<%3u>T，这可以从属性中选择。

![在此处输入图像描述](../Images/472f99e66ee51c94337d076842a14a61.png)

然而，这会在时间戳中添加一个十进制符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T22:55:50.013

我不认为你可以，但你可以改变 X 轴的显示格式。右键单击指标，选择属性，然后在显示格式选项卡上，将类型设置为浮点数，将数字设置为 3，将精度类型设置为精度数字。然后，双击 X 轴上的 0.1 并将其设置为 0.001。您可以使 X 滚动条可见，以便能够看到整个图形。

您似乎也错过了另一篇文章中所选频率和宽度指标的要点。你不需要它们；您可以使数字显示可见。

# c# - Roslyn 在 AppDomain 中运行代码

> ID：15723079
> 
> 赞同：1
> 
> 时间：2013-03-30T20:21:56.303
> 
> 标签：c#, roslyn

我将 Roslyn 添加到我的项目中。Roslyn 可以从字符串运行脚本

```
using Roslyn.Scripting.CSharp;

namespace RoslynScriptingDemo
{
    class Program
    {
        static void Main(string[] args)
        {
            var engine = new ScriptEngine();
            engine.Execute(@"System.Console.WriteLine(""Hello Roslyn"");");
        }
    }
} 
```

但我想访问表单中的控件、属性和变量。例如表单中有一个文本框。

```
var engine = new ScriptEngine();
engine.Execute(@" textbox1.Text="SK"; "); 
```

我可以访问 Roslyn 中的控件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:37:55.460

您可以为您的脚本会话设置一个主机对象，该对象具有您要访问的控件的公共属性。

# machine-learning - svm 概念查询

> ID：15723084
> 
> 赞同：1
> 
> 时间：2013-03-30T20:22:32.800
> 
> 标签：machine-learning, svm

我有一些关于 SVM 的基本概念查询——如果有人能指导我，那就太好了。我一直在学习书籍和讲座，但无法正确获得这些查询的答案

1.  假设我有 m 个特征数据点 - m > 2。我怎么知道数据点是否线性可分？如果我理解正确，线性可分数据点 - 不需要任何特殊内核来找到超平面，因为不需要增加维度。

2.  说，我不确定数据是否线性可分。我试图得到一个具有线性内核的超平面，一次有松弛，一次没有松弛，拉格朗日乘数。我会看到这两个超平面的训练和测试数据的错误率有什么不同。如果我理解正确，如果数据不是线性可分的，并且如果我没有使用松弛度，那么就不可能有任何最佳平面。如果是这样的话，支持向量机算法是否应该在不同的运行中给我不同的超平面。现在当我引入松弛时——我是否应该总是得到相同的超平面，每次运行？以及如何从超平面的拉格朗日乘数中找出数据是否线性可分。

3.  现在从 2 说，我以某种方式知道数据在 m 维上不是线性可分的。所以我会尝试增加维度，看看它是否可以在更高的维度上分离。我怎么知道我需要走多高？我知道计算不会进入那个空间——但是有什么方法可以从 2 中找出 3 的最佳内核（即我想找到一个线性分离的超平面）。

4.  什么是在 Matlab 中可视化超平面和数据点的最佳方法，其中特征维度可以高达 60 - 并且超平面的维度 > 100（即数百个数据点并使用高斯内核，特征向量会发生变化到 > 100 个维度）。

如果有人能解决这些疑虑，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:33:29.673

我将尝试专注于您的问题（1）、（2）和（3）。在实践中，最重要的问题不是问题是否成为线性可分的，而是分类器在看不见的数据上的表现如何（即它的分类效果如何）。似乎您想找到一个数据线性可分的好内核，并且您将始终能够做到这一点（考虑在每个训练点放置一个极窄的高斯 RBF），但您真正想要的是在看不见的数据上的良好性能. 话虽如此：

*   如果问题不是线性可分的并且不使用松弛，则优化将失败。它取决于实现和具体的优化算法它是如何失败的，它不收敛吗？它没有找到下降方向吗？它会遇到数字困难吗？即使您想确定有松弛的情况，您仍然会遇到数值困难，这会使您的线性可分性算法不可靠
*   你需要走多高？嗯，这是一个基本问题。它被称为数据表示问题。对于直截了当的解决方案，人们使用保留数据（人们不关心线性可分性，他们关心保留数据的良好性能）并在正确的伽马。所以问题就变成了为你的数据找到一个好的伽玛值。参见例如这篇论文：[http ://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.141.880](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.141.880)
*   我认为拉格朗日乘数的值和线性可分性之间没有微不足道的联系。您可以尝试一个值为 C 的高 alpha，但我不确定您能否说得太多。

# java - MediaPlayer() 在设备上播放直播时开始播放时间过长

> ID：15723088
> 
> 赞同：0
> 
> 时间：2013-03-30T20:22:51.127
> 
> 标签：java, android, media-player, live-streaming

我的 android 应用程序将直播的 URL 作为输入并使用 MediaPlayer() 播放它。在模拟器上，MediaPlayer 几乎立即开始播放音频。但在真实设备（Samsung Galaxy Note 2）上，Feed 开始播放需要将近 100 秒。运行模拟器的计算机和设备都在同一个 Wi-Fi 上，因此不会是连接问题。这里可能出了什么问题？

# intuit-partner-platform - Retrieve company name from companymetadata in Intuit IPP devkit QBO

> ID：15723091
> 
> 赞同：0
> 
> 时间：2013-03-30T20:23:03.090
> 
> 标签：intuit-partner-platform, quickbooks-online

I'm trying to retrieve the company name from `companymetadata`. I have this which doesn't work.

```
 Dim oauthValidator As New OAuthRequestValidator(accessToken, accessTokenSecret, consumerKey, consumerSecret)
    Dim context As New ServiceContext(oauthValidator, apptoken, realmid, IntuitServicesType.QBO)
    Dim commonService As New DataServices(context)
    Dim actualCompanyMetaData As Intuit.Ipp.Data.Qbo.CompanyMetaData = TryCast(commonService.FindById(New Qbo.CompanyMetaData()), Qbo.CompanyMetaData)

    Dim cpnyname As String = actualCompanyMetaData.CompanyFileName.ToString 
```

How do I get the company name?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:41:22.300

It is returned in the QBNRegisteredCompanyName property:

```
Intuit.Ipp.Data.Qbo.CompanyMetaData actualCompanyMetaData =commonService.FindById(new Intuit.Ipp.Data.Qbo.CompanyMetaData();
string cpnyname = actualCompanyMetaData.QBNRegisteredCompanyName; 
```

[http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0400_QuickBooks_Online/CompanyMetaData](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0400_QuickBooks_Online/CompanyMetaData)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T20:10:53.563

In QBO v3

```
var dataService = new DataService(context);
var company = dataService.FindById(new Company { Id = oauthAccessToken.RealmId});
return company.CompanyName; 
```

[https://developer.intuit.com/apiexplorer?apiname=V3QBO](https://developer.intuit.com/apiexplorer?apiname=V3QBO)

# html - CSS for changing color of 2nd word in h2

> ID：15723094
> 
> 赞同：2
> 
> 时间：2013-03-30T20:23:23.277
> 
> 标签：html, css

Hello is there any way i can make 2nd word in different color with in a line by using css?

for ex:

```
<h2>Change color by css</h2> 
```

here i want to change "color" will be different color.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T20:41:29.630

For this to work (there is no `:secondWord` pseudo-selector, sadly) you *have* to use JavaScript, so I'll offer a relatively simple suggestion that allows you to define a class-name to use as a style-hook:

```
Object.prototype.styleSecondWord = function(styleHook){
    styleHook = styleHook || 'secondWord';
    var text = '',
        words = [];
    for (var i = 0, len = this.length; i<len; i++){
        words = (this[i].textContent || this[i].innerText).split(/\s+/);
        if (words[1]) {
            words[1] = '<span class="' + styleHook + '">' + words[1] + '</span>';
            this[i].innerHTML = words.join(' ');
        }
    }
};

document.getElementsByTagName('h2').styleSecondWord('classNameToUse'); 
```

[JS Fiddle demo](http://jsfiddle.net/davidThomas/3y7Su/1/).

The above function updated in order to allow a specific element-type to be supplied (though it'll default to a `span` if none is provided):

```
Object.prototype.styleSecondWord = function (styleHook, styleElem) {
    styleHook = styleHook || 'secondWord';
    styleElem = styleElem || 'span';
    var open = '<' + styleElem + ' class="' + styleHook + '">',
        close = '</' + styleElem + '>',
        text = '',
        words = [];
    for (var i = 0, len = this.length; i < len; i++) {
        words = (this[i].textContent || this[i].innerText).split(/\s+/);
        if (words[1]) {
            words[1] = open + words[1] + close;
            this[i].innerHTML = words.join(' ');
        }
    }
};

document.getElementsByTagName('h2').styleSecondWord('classNameToUse', 'em'); 
```

[JS Fiddle demo](http://jsfiddle.net/davidThomas/3y7Su/2/).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T20:31:13.463

In the HTML

```
<h2>Change <span class ="color">color</span> by css</h2> 
```

then the CSS in the stylesheet

```
.color {color: blue;} 
```

replace blue with the colour you want

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T20:24:14.937

You've to style an element in order to achieve that, so you'd have to add a `span` and style it. Or maybe an `em` or `strong` if this particular word is used with some degree of emphasis.

Fiddle: [http://jsfiddle.net/zrsaW/](http://jsfiddle.net/zrsaW/)

I styled all `span` in an `h2` element but in real world, you'll usually add a class to this span and use this class as a selector to your styling instructions ;)

# c# - How to find common objects in multiple lists?

> ID：15723097
> 
> 赞同：1
> 
> 时间：2013-03-30T20:23:36.790
> 
> 标签：c#, linq, list

I have a list of User objects (`List<User>`). Every object in this list has a list of events (`List<Event>`). I need to create a new collection of Events with the common objects in all lists of Events in every user. I mean every user in base collection has every event in new collection of Events.

I think it can be done using foreach loop, but I hope there is more elegant way to do this using LINQ.

Hope, you'll help. Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:25:44.213

You can use the [`Enumerable.Interstect`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx) and [`Enumerable.Aggregate`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aggregate.aspx) methods

```
// first get events for first user
IEnumerable<Event> seed = userList.First().Events;

// intersect with events for users (except the first)
var commonItems = userList.Skip(1).Aggregate(seed, (s, u) => s.Intersect(u.Events)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T20:35:32.073

The idea is to select all events in all users, then create groups of equal events, select only those groups with as many events as users, and then just one event for each of these groups.

```
var x = users.SelectMany(u => u.Events) // select all events at once
  .GroupBy(e => e) // group them
  .Where(g => g.Count() == users.Count) // select groups with as many events as users
  .Select(g => g.Key); // select just one event for each group (the others are the same) 
```

# java - 在哪里可以找到在 Java 中使用 Google 协议缓冲区的 protobuf.jar？

> ID：15723099
> 
> 赞同：23
> 
> 时间：2013-03-30T20:23:47.777
> 
> 标签：java, protocol-buffers

我下载了 protobuf-2.5.0.tar.gz，将其解压缩，然后执行通常的 ./configure、make、make 检查和 make install。但是，在 Java 中使用协议缓冲区似乎需要的文件 protobuf.jar 似乎不是我下载的文件的一部分。更糟糕的是，我在任何地方都找不到这个文件。请告诉我如何进行。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-30T21:58:38.170

您可以将其添加为 Maven 依赖项：

```
<dependency>
    <groupId>com.google.protobuf</groupId>
    <artifactId>protobuf-java</artifactId>
    <version>2.5.0</version>
</dependency> 
```

所有依赖信息都可以在[Maven Central](http://search.maven.org/#artifactdetails%7Ccom.google.protobuf%7Cprotobuf-java%7C2.5.0%7Cbundle)获得，或者直接[下载](http://search.maven.org/remotecontent?filepath=com/google/protobuf/protobuf-java/2.5.0/protobuf-java-2.5.0.jar).jar 文件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-30T12:24:00.260

要生成`protobuf.jar`文件，您需要按照 Bruce Martin 的建议进行操作，但随后需要执行以下操作：

1.  导航到`src/main/java/com/google/protobuf`目录
2.  创建一个名为`bin`
3.  运行以下命令来构建`.java`文件：`$ javac -d bin *.java`
4.  导航到`bin`目录，最后，运行以下命令生成`protobuf.jar`文件：`$ jar cvf protobuf.jar com/`

然后，将 jar 复制并粘贴到您需要的任何位置。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-04-11T11:06:10.767

你可以`ProtoBuf Jar`从下载

[这里](http://mvnrepository.com/artifact/com.google.protobuf/protobuf-java/2.4.1)

然后你可以把`jar`里面的`libs`文件夹

如果想从中获取`Protobuf`存储库，`maven`则添加内部`pom.xml`文件。

希望它会有所帮助..

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-05-30T07:47:52.307

简单的解决方案是您应该自己编译 jar。

1.  [从https://code.google.com/p/protobuf/downloads/list](https://code.google.com/p/protobuf/downloads/list)下载 src 代码
2.  解压缩并按照 README 中的说明进行操作

这是您在 Linux 中应该做的事情

```
./configure  
./make 
```

您可以通过运行 ./make install 来安装协议

然后你需要这个罐子，让我假设你在 ubuntu

先安装 maven sudo apt-get install maven

然后按照 /java/README.txt 中的说明进行操作

如果你想要标准的罐子

```
mvn package 
```

如果你想要精简版

```
mvn package -P lite 
```

然后你可以在/java/target中找到jar

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-30T23:28:33.317

我假设您在 linux 上，尝试转到 java 目录，有一个**自述**文件告诉您如何使用/不使用 maven 创建 jar。您必须从提供的来源创建 jar。

没有 maven 的指令是：

1) 编译 C++ 代码，或获取 protoc 的二进制分布。如果您安装二进制发行版，请确保它与此软件包的版本相同。如果有疑问，请运行：

```
 $ protoc --version 
```

如果您在未安装的情况下构建了 C++ 代码，则编译器二进制文件应位于 ../src 中。

2）调用protoc构建DescriptorProtos.java：

```
 $ protoc --java_out=src/main/java -I../src \
     ../src/google/protobuf/descriptor.proto 
```

3) 使用您喜欢的任何方式编译 src/main/java 中的代码。

4) 在您喜欢的任何地方安装课程。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-12-17T07:11:26.303

你可以从这里下载这个 jar

[http://mirrors.ibiblio.org/maven2/com/google/protobuf/protobuf-java/2.5.0/](http://mirrors.ibiblio.org/maven2/com/google/protobuf/protobuf-java/2.5.0/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-10-17T06:49:57.040

与所有 Maven 项目一样，您可以通过从[项目站点单击“](http://mvnrepository.com/artifact/com.google.protobuf/protobuf-java/2.6.0)[下载（捆绑）](http://central.maven.org/maven2/com/google/protobuf/protobuf-java/2.6.0/protobuf-java-2.6.0.jar) ”来获取项目 jar 。

如果您查看捆绑链接的 URL 方案，您会注意到您可以转到[更高的目录](http://central.maven.org/maven2/com/google/protobuf/protobuf-java/2.6.0/)以查看该版本的所有可用文件，包括源代码和 javadoc jar。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-06-14T09:36:40.577

要使用 protobuf java 创建 protobuf.jar 文件，请执行以下步骤：

1.检查安装的protobuf版本：

```
$protoc --version 
```

2.安装Java和Maven，检查它们的版本：

```
$mvn --version
$java -version 
```

3.生成protobuf.jar文件，进入/protobuf/java目录。运行以下命令，

```
$mvn test
$mvn install
$mvn package 
```

检查 /protobuf/java/core/target/ 目录，.jar 将被放置在“target”目录中。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-10-22T06:33:15.893

[您可以从此链接](http://www.java2s.com/Code/Jar/c/Downloadcomgoogleprotobuf240jar.htm)下载 google 的 protobuf.jar

该页面提供了几乎所有开发所需的 jar。我下载并在项目中使用它

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-27T22:50:56.657

您想下载“.jar”文件并排除 maven。然后

试试链接“ [https://repo1.maven.org/maven2/com/google/protobuf/protobuf-java/2.6.1/](https://repo1.maven.org/maven2/com/google/protobuf/protobuf-java/2.6.1/) ”

应该点击这个链接。“ [https://repo1.maven.org/maven2/com/google/protobuf/protobuf-java/](https://repo1.maven.org/maven2/com/google/protobuf/protobuf-java/) ” 然后你看所有版本。

# c# - how to convert unicode entities to unicode text c#

> ID：15723100
> 
> 赞同：2
> 
> 时间：2013-03-30T20:23:50.937
> 
> 标签：c#, .net, unicode

I have read some text from facebook using graph api and it return me message in form of unicode like this

\u092e\u094b\u0939\u093e\u0932\u0940 \u092e\u0947\u0902

so i want to convert this to text in c#.

like this online app is doing:
[http://www.online-toolz.com/tools/text-unicode-entities-convertor.php](http://www.online-toolz.com/tools/text-unicode-entities-convertor.php)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T20:27:57.383

Use [`Regex.Unescape`](http://msdn.microsoft.com/en-GB/library/system.text.regularexpressions.regex.unescape.aspx):

```
Regex.Unescape("\u092e\u094b\u0939\u093e\u0932\u0940 \u092e\u0947\u0902") 
```

Results in:

```
मोहाली में 
```

# android - An internal error occurred during: "Launching test". org/eclipse/jdt/debug/core/JDIDebugModel In Eclipse

> ID：15723104
> 
> 赞同：0
> 
> 时间：2013-03-30T20:24:27.437
> 
> 标签：android, blackberry-eclipse-plugin, blackberry-10

Installed eclipse plugin with the referance [this link](https://developer.blackberry.com/android/tools/)

but i got error when run project as Blackberry Android Launch

Please check screenshot ![enter image description here](../Images/32b19b89a78cc898c53f961fc48a83dd.png)

![enter image description here](../Images/33fcb1d3e7ca6ca006a8a6b09444212f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:44:24.643

Make sure that eclipse.ini AND the path variable of Windows uses the version 6 of Java, not the 7.

Make sure you have the supported version of eclipse: Eclipse version 3.8 for the latest version of the bb plugin

# linux - 有没有办法用 .htaccess 密码保护目录并让它记住密码？

> ID：15723107
> 
> 赞同：0
> 
> 时间：2013-03-30T20:24:34.937
> 
> 标签：linux, .htaccess

我的经验是使用 .htAccess 对目录进行密码保护，它会弹出一个模式对话框。对于某些浏览器（FF 和 Chrome），不显示“记住”此密码的复选框。

有没有办法让密码保护目录并让用户在网页中填写用户名和密码？

或者，有没有办法强制浏览器记住该密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:09:24.313

tl;博士：不。

我们正在谈论一种叫做[Basic Authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)的东西。

不幸的是，[这些东西是浏览器的特性，不能从服务器端控制](http://apache.active-venture.com/auth-basic.html#basicfaq)。某些浏览器能够永久记住您的密码（通常以“记住我的密码”复选框的形式）。这是否是一个好主意值得商榷，但至少是用户拨打电话；从服务器端强制这个选择确实是个坏主意，我认为任何浏览器都不会允许这样做。为什么？如果使用共享设备（例如，在公共图书馆中），用户可能不想存储他的凭据。

也就是说，使用 Apache .htaccess 文件并不是进行基本身份验证的唯一方法。使用任何动态内容框架（PHP、ASP 等），您可以在用户通过身份验证后存储会话 cookie，并且仅在用户没有身份验证 cookie 时发送 401 响应和基本身份验证标头。既然您谈论 .htaccess，我假设您在 LAMP 堆栈上；看一眼：

*   基本认证： http: [//php.net/manual/en/features.http-auth.php](http://php.net/manual/en/features.http-auth.php)
*   会议：[http ://www.php.net/manual/en/book.session.php](http://www.php.net/manual/en/book.session.php)

# list - (Scheme) Check if a generic procedure is true?

> ID：15723109
> 
> 赞同：1
> 
> 时间：2013-03-30T20:24:55.033
> 
> 标签：list, scheme

I made a program that is supposed to put all the elements that are true for the predicate in a list. It does work but not for things like >, <, etc. It only works for things like zero? and negative? How can I make it so it works for <, >, etc?

```
(define (divide1 pred? ls)
 (if (null? ls) '()
    (if (pred? (car ls))
        (cons (car ls) (divide1 pred? (cdr ls)))
        (divide1 pred? (cdr ls)))))

~(divide1 zero? '(0 0 4 5))
(0 0)
~(divide1 < '(0 -5 8 5))
(-5 5) <- I think... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:36:04.297

In your function, the predicate is given just one argument. That makes it work for predicates like `zero?`, but not for predicates taking two arguments, like `<` and `>`

One possible change to make it compare successive pairs in a list, and then return the elements that satisfies the predicate is this:

```
(define (divide2 pred? ls)
 (cond ((or (null? ls) (null? (cdr ls))))
        '()
       ((pred? (car ls) (cadr ls))
        (cons (car ls) (divide2 pred? (cddr ls))))
       (else
        (cons (cadr ls) (divide2 pred? (cddr ls)))))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T22:27:08.497

You're describing the [`filter`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Flist..rkt%29._filter%29%29) procedure (or `divide1`, as you called it):

```
(filter zero? '(0 0 4 5))
=> '(0 0) 
```

The procedure receives as arguments a one-parameter predicate function and a list. That's the reason why it works for `zero?` and `negative?` (both receive a single parameter), but it will fail for `<`, because it expects *two* parameters - in other words, you have to specify *what* is less than *what*. For instance, to test for items that are less than zero using `<`:

```
(filter (lambda (x) (< x 0)) '(0 -5 8 5))
=> '(5) 
```

In conclusion: to make it work for `<`, `>`, etc. you'll have to pass a `lambda` where one of the arguments is a fixed value (`0` in the above example) and the other is the current element from the list (`x` in the previous example.)

# javascript - ScriptBundle+Optimization return unwanted number

> ID：15723110
> 
> 赞同：3
> 
> 时间：2013-03-30T20:25:09.143
> 
> 标签：javascript, visual-studio, asp.net-mvc-4, minify

I'm using ScriptBundle and set EnableOptimizations to true.

My original script is

```
$('.carousel').carousel({ interval: 5000, pause: "hover" }) 
```

And the result from minification is

```
$(".carousel").carousel({interval:5e3,pause:"hover"}) 
```

Which make the carousel slides super fast! Any idea how to solve this problem? Any escape character should I use to avoid this 5000 turn to 5e3?

Thanks!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T22:42:03.863

you can minify bootstrap but a few rules:

Make sure you dont minify a minified version, Taking out the block comments /* */ seems to make things less buggy. and finally seperate everything out like so:

```
bundles.Add(new ScriptBundle("~/js/jquery").Include(
            "~/assets/js/jquery-{version}.js",
            "~/assets/js/jquery-migrate-{version}.js",
            "~/assets/js/jquery.flexslider.js",
            "~/assets/js/jquery.isotope.js",
            "~/assets/js/jquery.fancybox-{version}.js"
        ));

        bundles.Add(new ScriptBundle("~/js/bootstrap").Include(
            "~/assets/js/bootstrap.js",
            "~/assets/js/jquery.validate.unobtrusive-custom-for-bootstrap.js",
            "~/assets/js/bootstrap-datepicker.js"
        ));

        bundles.Add(new ScriptBundle("~/js/custom").Include(
            "~/assets/js/revolution.custom.js",
            "~/assets/js/custom.js"
            )); 
```

I find that this method seems to calm the beast down and you get good results. i also find that:

```
<script src="~/assets/js/jquery.validate.min.js"></script>
    <script src="~/assets/js/jquery.validate.unobtrusive.min.js"></script> 
```

These file are best done on there own, and cause major issues with the script bundling.

# zend-framework2 - Zend Framework 2 使用 ServiceManager 的自定义元素不起作用

> ID：15723111
> 
> 赞同：0
> 
> 时间：2013-03-30T20:25:10.573
> 
> 标签：zend-framework2, zend-form, zend-form-element, servicemanager

我想创建一个自定义元素并使用短名称将元素添加到表单中，使用 ZF2 V.2.1+ 的新 ServiceManager 技术

我尝试将[zend 文档](https://packages.zendframework.com/docs/latest/manual/en/modules/zend.form.advanced-use-of-forms.html)步骤的相同示例复制到步骤，但它不起作用。

当我使用写入短名称的服务时，它会引发异常，因为找不到服务：

```
 Zend\ServiceManager\Exception\ServiceNotFoundException
    File:
    Zend\ServiceManager\ServiceManager.php:456
    Message:
    Zend\ServiceManager\ServiceManager::get was unable to fetch or create an instance for Test 
```

我想我所有的课程都是一样的，见下文

这是我的自定义元素：

```
 namespace SecureDraw\Form\Element;
    use Zend\Form\Element\Text;
    class ProvaElement extends Text {
    protected $hola;
        public function hola(){
            return 'hola';
        }
    } 
```

这是我的 Module.php 我有我的可调用服务能够使用短名称：

```
 class Module implements FormElementProviderInterface {
        //Rest of class
        public function getFormElementConfig() {
            return array(
                'invokables' => array(
                    'Test' => 'SecureDraw\Form\Element\ProvaElement'
                )               
            );
        } 
    } 
```

在我用于添加元素的表单中，注释行可以正常工作，但短名称不起作用：

```
 $this->add(array(
        'name' => 'prova',
        //'type' => 'SecureDraw\Form\Element\ProvaElement',
        'type' => 'Test',    //Fail
    )); 
```

在我的行动中：

```
 $formManager = $this->serviceLocator->get('FormElementManager');
    $form    = $formManager->get('SecureDraw\Form\UserForm');
    $prova = $form->get('prova');
    echo $prova->hola(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:46:45.177

问题是通过 FormElementManager 创建的元素必须创建到 init 方法中，而不是 __Construct 方法如何在此[页面](https://github.com/zendframework/zf2-documentation/blob/master/docs/languages/en/modules/zend.form.advanced-use-of-forms.rst)中看到。

Zend[文档](https://packages.zendframework.com/docs/latest/manual/en/modules/zend.form.advanced-use-of-forms.html)解释得很糟糕

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T21:49:05.467

解决方法：在您自己的模块中，创建以下两个文件：

1.  带有自定义表单元素的可调用短名称的 FormElementManagerConfig；
2.  子类 Form\Factory 并覆盖 getFormElementManager 并将配置传递给 FormElementManager 构造函数；

然后你使用你自己的工厂来创建你的表单，就像这样（你可以传递一个非常基本的，例如空数组，或者一个或多或少完整的 $spec 到 $factory->createForm()）：

```
$factory = new Factory();
$spec    = array();
$form    = $factory->createForm($spec); 
```

FormElementManagerConfig.php：

```
class FormElementManagerConfig implements ConfigInterface
{
    protected $invokables = array(
        'anything'          => 'MyModule\Form\Element\Anything',
    );

    public function configureServiceManager(ServiceManager $serviceManager)
    {
        foreach ($this->invokables as $name => $service) {
            $serviceManager->setInvokableClass($name, $service);
        }
    }
} 
```

我的工厂.php：

```
class Factory extends \Zend\Form\Factory
{
    public function getFormElementManager()
    {
        if ($this->formElementManager === null) {
            $this->setFormElementManager(new FormElementManager(new FormElementManagerConfig()));
        }
        return $this->formElementManager;
    }
} 
```

# c# - Word文档读取速度很慢

> ID：15723114
> 
> 赞同：0
> 
> 时间：2013-03-30T20:25:45.380
> 
> 标签：c#, performance, ms-word, vsto

我用 MS Interop lib 阅读了 word 文档。但 50 页 word 文档逐字阅读 30 分钟

我的代码：

```
var app = new ApplicationClass();
object file = filePath;
object nullobject = Missing.Value;

var doc = app.Documents.Open
    (ref file, ref nullobject, ref nullobject, ref nullobject,
    ref nullobject, ref nullobject, ref nullobject, ref nullobject,
    ref nullobject, ref nullobject, ref nullobject, ref nullobject,
    ref nullobject, ref nullobject, ref nullobject, ref nullobject);

doc.ActiveWindow.Selection.WholeStory();
doc.ActiveWindow.Selection.Copy();
app.Visible = false; 
```

# playframework - Location of Play! template parser

> ID：15723115
> 
> 赞同：1
> 
> 时间：2013-03-30T20:25:47.007
> 
> 标签：playframework, playframework-2.0

I need to parse tags in posted strings. Where can I find the classes and methods that I can use to accomplish this inside the Play! framework? I need exactly the same functionality as Play! uses to process views templates (the files that are usually ending with .scala.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:40:45.767

Here is the compiler: [https://github.com/playframework/Play20/blob/master/framework/src/templates-compiler/src/main/scala/play/templates/ScalaTemplateCompiler.scala](https://github.com/playframework/Play20/blob/master/framework/src/templates-compiler/src/main/scala/play/templates/ScalaTemplateCompiler.scala)

Here is the compiler call: [https://github.com/playframework/Play20/blob/652f26856356c643f4db44b6a44150183a4b4887/framework/src/sbt-plugin/src/main/scala/PlayCommands.scala#L298](https://github.com/playframework/Play20/blob/652f26856356c643f4db44b6a44150183a4b4887/framework/src/sbt-plugin/src/main/scala/PlayCommands.scala#L298)

# vb.net - 视觉基本参数空异常

> ID：15723119
> 
> 赞同：2
> 
> 时间：2013-03-30T20:26:36.210
> 
> 标签：vb.net, exception, null, arguments

我即将承认失败，我对 VB 还很陌生，我确信我已经设法错过了一些非常基本的东西，

我对以下代码的问题是，当执行 Button3_Click 函数时，如果我忘记在“ListBox2.Items. Add(test.Name)" 然后东西仍然会被吐到列表框中，所以假设那里有东西，

有什么帮助吗？

问候丹

```
Private Sub Button3_Click(sender As System.Object, e As System.EventArgs) Handles
    Button3.Click

    Dim test As comdevice

    Dim usbcoms() As comdevice = FindComs()

    For Each test In usbcoms
        ListBox2.Items.Add(test.Name)
    Next

End Sub    

Private Function FindComs() As comdevice()
    Dim USBClass As New System.Management.ManagementClass("Win32_PNPEntity")
    Dim USBCollection As System.Management.ManagementObjectCollection =   
    USBClass.GetInstances()
    Dim USB As System.Management.ManagementObject
    Dim temp() As comdevice
    Dim n As Integer
    n = 0

    For Each USB In USBCollection
        If USB("Name").ToString().Contains("P") Then
            n += 1
        End If
    Next USB
    ReDim temp(n)

    n = 0
    For Each USB In USBCollection
        If USB("Name").ToString().Contains("COM") Then
            temp(n).Name = USB("Name").ToString()
            temp(n).DeviceID = USB("DeviceID").ToString()
        End If
    Next

    Return temp
End Function

Private Structure comdevice
    Public Name As String   ' This employee's given name.
    Public DeviceID As String   ' This employee's family name.
End Structure 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T21:08:23.340

Your problems lies in the FindComs method.
The first loop search the USBCollection for devices that contains the letter `P` and you count them.
In the second loop, after dimensioning the return array with the number of devices found you try to fill this array with devices that contains the string `COM`, of course there is no relation between devices with `COM` and `P` in their name. You end up with an array bigger than the effective number of devices with `COM` in their name.

When the array returns, you add every slot of the array, but you have slots with NULL values and thus the error.
You can fix the problem dimensioning the array only for the devices with `COM` in their names

```
For Each USB In USBCollection
    If USB("Name").ToString().Contains("COM") Then
        n += 1
    End If
Next USB
ReDim temp(n) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T21:10:39.933

Oded's comment is the most likely cause of this failure.

An easy test is to set the `Name` property to some default string, like "test" in your `comdevice` class.

That way, the `Name` property will never be null and you can see if it ever gets changed.

# python - Pygame、gettext 和 unicode 字符串

> ID：15723121
> 
> 赞同：0
> 
> 时间：2013-03-30T20:26:49.967
> 
> 标签：python, unicode, pygame, gettext

我正在尝试翻译视频游戏[https://github.com/mdtrooper/Obb](https://github.com/mdtrooper/Obb)，但 gettext 方法 _("string") 返回一个非 unicode 字符串。

好吧，我做了一个简单的例子来说明问题：

该文件是utf8编码：

```
# -*- coding: utf-8 -*-

import pygame, os

import locale
import gettext

gettext.textdomain('caca')
_ = gettext.gettext

def main():
    path_i18n = os.getcwd() + '/i18n/'
    gettext.bindtextdomain('caca', path_i18n)

    pygame.init()
    screen = pygame.display.set_mode((640, 480), 0, 32)
    screen.fill(pygame.Color(255, 255, 255, 255))

    font = pygame.font.Font("Isuckatgolf.ttf", 30)

    text = font.render(_("caca"), True, pygame.Color(0, 0, 0, 255))
    screen.blit(text, (0,0))

    unstraslate_text = font.render(u"ñadu", True, pygame.Color(0, 0, 0, 255))
    screen.blit(unstraslate_text, (100, 100))

    pygame.display.update()

    exit = False

    while not exit:
        for e in pygame.event.get():
            if e.type == pygame.QUIT:
                exit = True
            elif e.type == pygame.KEYDOWN:
                if e.key == pygame.K_ESCAPE:
                    exit = True 

    pygame.quit()

if __name__ == '__main__': 
```

这是西班牙语的 po 文件：

```
# SOME DESCRIPTIVE TITLE.
# Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2013-03-30 14:06+0100\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: UTF-8\n"

#: test.py:19
msgid "caca"
msgstr "ñandu" 
```

当然字体没有 Ñ 或 ñ 字符但我已修改为添加此字符，您可以在[http://depositfiles.com/files/dwwmp912m中找到](http://depositfiles.com/files/dwwmp912m)

例如，第一个字符串（翻译后的字符串）显示不好，但第二个显示好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:36:53.743

我已经找到。

我已经在其他文件（i18n.py）中编写了代码：

```
# -*- coding: utf-8 -*-

import locale
import gettext
import os

path_i18n = os.getcwd() + '/i18n/'

t = gettext.translation('Obb', path_i18n)
_ = t.ugettext 
```

但问题是python抛出错误：

```
NameError: global name '_' is not defined 
```

当我尝试用作：

```
from i18n import * 
```

但是使用代码：

```
from i18n import _ 
```

运行良好。

# ruby-on-rails - respond_to 做什么？

> ID：15723124
> 
> 赞同：0
> 
> 时间：2013-03-30T20:27:14.530
> 
> 标签：ruby-on-rails

```
#some instance variables
respond_to do |format|
  format.html
  format.xml {...}
  format.json {...}
end 
```

respond_to 是简单地将所有实例变量发送到下一个网页还是做更多的事情？

我想知道 response_to 会发送多少数据。例如，如果我有很多实例变量@one @two @three 等等。它们都是由respond_to 发送的吗？是否还会捆绑并发送任何其他数据？?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:44:01.960

没有您的指示，您的实例变量不会被发送到任何地方。

您可能有一个 .html.erb 模板，它在收到 HTML 请求时呈现实例变量 (format.html)。

对于 xml 和 json 响应，您需要告诉 Rails 要做什么。例如，您可以提供模板 .xml.builder。Rails 还可以自动为您呈现某些结构（数组等），只需调用`render json: @one`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-11T13:47:55.860

Rails 会遍历注册的格式并尝试找到兼容的格式，否则会引发错误。

例子：

```
def index
  @stories = Story.all
end 
```

`index`动作没有`respond_to`块。如果客户端要求获取 TEXT 格式的页面，则会导致以下异常：

`ActionView::MissingTemplate (Missing template blogs/index ... with { ... :formats=>[:text], ...})`

`respond_to`我们可以通过添加一个块来轻松解决这个问题：

```
def index
  @stories = Story.all

  respond_to do |format|
    format.html
    format.js 
  end
end 
```

更改后，客户端会`406 error`在格式不支持时得到。此外，您的索引操作将响应两种新格式：j​​s 和 HTML。

本文解释了您可以使用[respond_to 块](https://kolosek.com/rails-respond_to-block)的所有方法。

# parsing - How to Get Parsec to Parse Multiple Expressions

> ID：15723125
> 
> 赞同：0
> 
> 时间：2013-03-30T20:27:18.037
> 
> 标签：parsing, haskell

I'm following this scheme interpreter tutorial: [http://en.wikibooks.org/wiki/Write_Yourself_a_Scheme_in_48_Hours/](http://en.wikibooks.org/wiki/Write_Yourself_a_Scheme_in_48_Hours/)

but can't seem to figure out how to setup the REPL or Parsec so I can have the functionality to interpret a whole source file. What I'd like to do is to be able to enter something like this from the REPL:

```
:l ~/myscheme.scm 
```

And the file would be interpreted. Right now, all it does is parse one expression and it ignores the rest. I can see why this is so -- readExpr reads only 1 expression.

Parser excerpt, whole code can be found here: [http://en.wikibooks.org/wiki/Write_Yourself_a_Scheme_in_48_Hours/Parsing](http://en.wikibooks.org/wiki/Write_Yourself_a_Scheme_in_48_Hours/Parsing)

```
 parseExpr :: Parser LispVal
 parseExpr = parseAtom
         <|> parseString
         <|> parseNumber
         <|> parseQuoted
         <|> do char '('
                x <- try parseList <|> parseDottedList
                char ')'
                return x

 readExpr :: String -> String
 readExpr input = case parse parseExpr "lisp" input of
     Left err -> "No match: " ++ show err
     Right _ -> "Found value" 
```

REPL:

```
import System.IO

flushStr :: String -> IO ()
flushStr str = putStr str >> hFlush stdout

readPrompt :: String -> IO String
readPrompt prompt = flushStr prompt >> getLine

evalString :: String -> IO String
evalString expr = return $ extractValue $ trapError (liftM show $ readExpr expr >>= eval) 

evalAndPrint :: String -> IO ()
evalAndPrint expr =  evalString expr >>= putStrLn

until_ :: Monad m => (a -> Bool) -> m a -> (a -> m ()) -> m ()
until_ pred prompt action = do 
  result <- prompt
  if pred result 
     then return ()
     else action result >> until_ pred prompt action

runRepl :: IO ()
runRepl = until_ (== "quit") (readPrompt "Lisp>>> ") evalAndPrint

main :: IO ()
main = do args <- getArgs
          case length args of
              0 -> runRepl
              1 -> evalAndPrint $ args !! 0
              otherwise -> putStrLn "Program takes only 0 or 1 argument" 
```

Would appreciate any help!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:07:08.863

How about `parse (many parseExpr)` instead of `parse parseExpr`?

You then will have to amend the interpreter so that it can interpret a list of expressions.

# android - 如何处理Sqlite数据库中的重复记录和空值异常？

> ID：15723128
> 
> 赞同：0
> 
> 时间：2013-03-30T20:27:37.523
> 
> 标签：android, sqlite, android-sqlite

所以我创建了一个表

```
String createTable = "CREATE TABLE " + TABLE_NAME + "(" + FIELD_FNAME
            + " TEXT NOT NULL," + FIELD_LNAME + " TEXT NOT NULL,"
            + FIELD_ROLLNO + " TEXT NOT NULL PRIMARY KEY" + ")";

    db.execSQL(createTable); 
```

注意：`FIELD_FNAME`, `FIELD_LNAME`,`FIELD_ROLLNO`不为空，`FIELD_ROLLNO`也是主键。

```
i m inserting values in this table from `EditTexts` on a clickEvent of a button, 
```

在插入之前，我想限制用户不要插入重复的 rollNo，`FIELD_ROLLNO`因为它的主键。

如果用户在任何字段中插入空记录，我还想通过对话框引起用户注意。

我在列中的重复条目上遇到此异常`FIELD_ROLLNO`。

```
Error inserting lname=Hussain roll_no=08cs18 fname=Qadir
android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed 
```

我只需要如何捕获此异常和空值异常，以便向用户显示对话框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T20:56:26.070

> android.database.sqlite.SQLiteConstraintException：错误代码19：约束失败

因此，既然`ROLLNO`是`PK`，就隐含地添加了唯一约束，即没有两行可以具有相同的约束`PK`。主键必须始终为`UNIQUE`.

> 在插入之前，我想限制用户不要在 FIELD_ROLLNO 中插入重复的 rollNo，因为它的主键。

所以这可以通过几种方式解决。如果添加了重复/不正确的值，您可能希望在应用层修复它并向用户显示一些消息。所以我的第一个想法是，您需要创建`ROLLNOs`将从表中返回所有内容的方法（您应该将它们存储到某个集合中，例如 to `List`），然后在执行插入之前开始检查 EditTexts 数据。首先，您需要将`ROLLNO`EditText 与`ROLLNOs`db 进行比较，并根据结果显示警告`Toast`或执行适当的操作。

> 如果用户在任何字段中插入空记录，我还想通过对话框引起用户注意。

您提到您正在使用来自的值，`EditText`因此您可以通过“约束”来确定这一点

*“EditText 不能为空，需要填写”*。

## 例子：

```
public List<String> getRolls() {
   List<String> collection = new ArrayList<String>();
   String rollno = null;
   Cursor c = null;
   try {
      db = DbHelper.getReadableDatabase();
      String query = "select " + FIELD_ROLLNO + " from TableName";
      c = db.rawQuery(query, null);
      if (c != null) {
         if (c.moveToFirst()) {
            do {
               rollno = c.getString(c.getColumnIndex(FIELD_ROLLNO));
               collection.add(rollno);
            } while (c.moveToNext());
         }
      }
   }
   finally {
      if (c != null) {
         c.close();
      }
      if (db != null) {
         db.close();
      }
   }
} 
```

以及 Activity 中的用法：

```
List<String> collection = dbHelper.getRolls();
String rollnoBox = editText1.getText().toString();
if (!isDuplicate(collection, rollnoBox)) {
   if (!TextUtils.isEmpty(editText2.getText().toString()) {
      // make insertion
   }
   else {
      Toast.makeText(this, "This cannot be empty!", Toast.LENGTH_SHORT).show();
   }
}
else {
   Toast.makeText(this, "Your rollno already exists!", Toast.LENGTH_SHORT).show();
}

private boolean isDuplicate(List<String> col, String value) {
   boolean isDuplicate = false;   
   for (String s: col) {
      if (s.equals(value) {
         isDuplicate = true;
         break;
      }
   }
   return isDuplicate;
} 
```

我“刚刚”编写的这些代码片段也可以根据个人需求进行改进。它应该可以解决您的问题。看看这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T20:46:28.303

您应该使用[insertOrThrow](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insertOrThrow%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)并捕获异常。

```
try
{
  returnedValue = db.insertOrThrow(TABLE_NAME, null, newEntry);
} 
catch (SQLException e)
{
  Log.e(DATABASE_NAME, e.toString());
} 
```

# php - PHP：一个“等级”系统

> ID：15723130
> 
> 赞同：0
> 
> 时间：2013-03-30T20:27:41.280
> 
> 标签：php, mysql, profile, rank

我有一个由用户组成的 mysql 数据库。在该数据库中，有一个“分数”列。我想为用户制作个人资料，但它会显示他们的排名。我不想在服务器端做这个，所以我试图从个人资料页面本身做。这是我当前的代码：

```
$sql3 = mysql_query("SELECT * FROM members ORDER BY score DESC") or die("Could not allocate information!");
$rank = 0;
while(mysql_fetch_assoc($sql3)){
  $rank++;
}
echo "<b>Rank: </b>#$rank<br/>"; 
```

我也试过：

```
$sql3 = mysql_query("SELECT * FROM members ORDER BY score DESC") or die("Could not allocate information!");
$rank = 0;
while(mysql_fetch_assoc($sql3)){
  $rank++;
  echo "<b>Rank: </b>#$rank<br/>";
} 
```

无论哪种方式，每个用户都有相同的排名，#2。我有什么办法可以做到这一点吗？如果您需要更多信息，请发表评论，不要贬低我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:11:01.187

我认为你真正想要做的是这样的事情。

```
$result = mysql_query("SELECT member_name, score,
       (SELECT COUNT(*)
        FROM members ORDER BY score DESC) AS rank
FROM members
WHERE member_id = 5
LIMIT 1") or die("Could not allocate information!");

$member = mysql_fetch_assoc($result);

echo "<b>#$member['rank']. $member['name']</b> Score:  $member['score']<br />"; 
```

正如其他人之前提到的，请查看 mysqli 和 pdo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T20:30:38.770

你有没有尝试过：

```
$sql3 = mysql_query("SELECT * FROM members ORDER BY score DESC") or die("Could not allocate information!");
$rank = 0;
while(mysql_fetch_assoc($sql3)){
    $rank++;
    echo "<b>Rank: </b>#$rank<br/>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T20:34:59.580

只需使用`<ol>`[有序列表] 标签：

```
<ol>
<?php while($user = mysql_fetch_assoc($sql3)): ?>

    <li><?php echo $user['name']; ?></li>

<?php endwhile; ?>
</ol> 
```

猜测您想要显示用户的某些属性[例如`name`，或者您在表格中调用它的内容]，否则显示数字列表没有多大意义。

无论如何`mysql_*`功能已被弃用，请移至`PDO`或`mysqli`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T20:35:25.630

尝试这样的事情：

```
$sql3 = mysql_query("SELECT * FROM members ORDER BY score DESC") or die("Could not allocate information!");
$rank = 0;
while($row = mysql_fetch_assoc($sql3)) {
     $rank++;
     if ($row['user_id'] == $current_pages_user_id){
           echo "<b>Rank: </b>#$rank<br/>";
     }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T20:35:54.897

尝试

```
while($user = mysql_fetch_assoc($sql3)) {    
  $rank++;    
  echo "<b>#$rank. $user['name'] Score: </b> $user['score']<br />";    
} 
```

但正如 hjpotter92 指出的那样，考虑使用 mysqli 或 pdo。

# java - 如何获取 JList 中的选定项目并使用强制转换

> ID：15723134
> 
> 赞同：1
> 
> 时间：2013-03-30T20:27:58.857
> 
> 标签：java, swing, casting, jlist, getselection

在我的程序的一部分中，我有一个`JList`关于位置的列表，并且我得到了一个 API，它应该使用来自该位置的项目`JList`并打印出该位置的天气。所以现在我不能这样做，因为我使用

```
WeatherAPI chosen =  locList.getSelectedIndex(); 
```

但出现错误：类型不匹配：无法从 int 转换为 WeatherAPI。

这是有效的 API 示例：

```
LinkedList<WeatherAPI> stations = FetchForecast.findStationsNearTo("cityname");
for (WeatherAPI station : stations) {
    System.out.println(station);
}
WeatherAPI firstMatch = stations.getFirst(); 
```

所以我不想得到第一个选项，我想得到用户选择的位置。这都是关于铸造的。我也试过这个没有用：

```
WeatherAPI stations;
WeatherAPI firstMatch = stations.get(locList.getSelectedIndex()); 
```

我得到了其余的代码，它使用“firstMatch”，但它仅在其类型为 WeatherAPI 时才使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T20:39:58.110

你有两个选择。

如果您使用的是 Java 7，并且您已经创建`JList`并`ListModel`使用了正确的泛型签名。假设像...

```
JList<WeatherAPI> locList; 
```

还有一个类似的列表模型声明，您可以使用

```
WeatherAPI chosen =  locList.getSelectedValue(); 
```

否则，您将需要转换结果

```
WeatherAPI chosen =  (WeatherAPI)locList.getSelectedValue(); 
```

有点老派，我通常会在演员之前检查结果

```
Object result =  locList.getSelectedValue();
if (result instanceof WeatherAPI) {
    WeatherAPI chosen =  (WeatherAPI)result
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T20:33:25.543

尝试使用[getSelectedValue()](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html#getSelectedValue%28%29)：

```
WeatherAPI chosen =  locList.getSelectedValue(); 
```

# php - MySql中使用子查询的语法错误

> ID：15723135
> 
> 赞同：-1
> 
> 时间：2013-03-30T20:28:07.530
> 
> 标签：php, mysql, phpmyadmin

下面是MySql查询：

```
$queryfilter = "SELECT * FROM tablename where sector = " .$_SESSION['idfilterdrop']. " AND 
region IN (SELECT region from 
    tablename where sector = " . $_SESSION['sector'] ." OR region = " . 
 $_SESSION['r1'] ." OR theme = " . $_SESSION['theme'] .")"; 
```

帮我找出语法错误。我确定上述查询中存在双引号问题。当我在 MySql 提示符上运行此查询时，它运行良好，但是当我用变量替换常量值时，此查询不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:32:18.873

不幸的是，我们不知道您的`$_SESSION`数组是否包含整数或字符串。如果元素或是字符串`sector`，则需要在 SQL 中引用它们，如下所示：`r1``theme``WHERE sector = '". $_SESSION['sector'] . "' OR`

此外，您的表被命名`database`也无济于事。如果我没记错的话，`DATABASE`是一个保留字，因此您需要在该表名周围加上反引号：

```
... FROM `database` ... 
```

# c++ - 我正在用双 LL 建立一个学生名单

> ID：15723143
> 
> 赞同：0
> 
> 时间：2013-03-30T20:28:42.263
> 
> 标签：c++, linked-list

我正在尝试使用我的双链表类建立一个学生列表。我最终将我的学生和 Node 类结合在一起来做到这一点。我意识到有更好的方法来实现这一点，但这是我选择的路径，我正在努力让它发挥作用。当我 push_back 一个节点（学生）时，它调用我的 Node 类，然后调用我的 Record 类，然后调用我的 Course 类。

在我的主函数中为一个节点调用我的构造函数时，我遇到了一个错误，即我传递的所有字符串都没有“（名称，课程，学期）未在此范围内声明”。我意识到这可能是一团糟，但是任何人都可以告诉我为什么这不起作用吗？

```
#include <iostream>
#include "LinkedList.h"
#include "Stack.h"
#include "Queue.h"
using namespace std;

int main () {

    LinkedList* list = new LinkedList();

    list->push_back(John, Math34, Summer2012);

    return 0;
} 
```

我的 LinkedList 类。我去掉了大部分功能，这样更容易阅读和找到问题的根源。

```
#ifndef LinkedList_H
#define LinkedList_H
#include "Node.h"
#include <iostream>
using namespace std;
class LinkedList{

public:
    LinkedList()
    {
        front = NULL;
        back = NULL;
        size = 0;
    }

    void aCourse(string n, Course* c, string s)
    {  
        if (front == NULL)
        return;
        Node *temp = front;
        for(int i = 0; i < size; i++)
        {
            if(n == temp->name)
            front->addCourse(c, s);

    }       }
    void push_back(string n, Course* c, string s)
    {
        if (back == NULL)
        {
            back = new Node(NULL, NULL, n);
            front = back;
            size++;
            back->addCourse(c, s);
            return; 
        }
        else {

            Node *newnode = new Node(NULL, NULL, n);
            newnode->addCourse(c, s);
            back->next = newnode;
            newnode->prev = back;
            back = newnode;

    }
#endif 
```

我的节点/学生类：

```
#ifndef NODE_H
#define NODE_H
#include "Record.h"
#include "Course.h"
class Node
{
public:
    Node(Node* n = NULL, Node* p = NULL, string v = NULL)
    {   
        prev =  p;
        next = n;
        name = v;
        rec = new Record;
    }

    void addCourse(Course* c, string sem)
    {
        rec->addCourse(c, sem);
    }

    void dropCourse(Course* c)
    {
        rec->dropCourse(c);
    }

    Record* getRecord() { return rec; } 
    void printAllRecords()
    {
        rec->print();
    }

    void setStudentScore(Course* c, int score)
    {
        rec->setCourseScore(c, score);

    }

    string name;
    Record* rec;
    Node* next;
    Node* prev; //for double linked list
    char value;
};
#endif 
```

我的记录类：

```
#ifndef Record_H
#define Record_H
#include "Course.h"
#include <string>
#include <vector>
#include <iostream>
using namespace std;
class Record
{
public:
    Record()
    {
        courses = new vector<Course*>();
        semesters = new vector<string>();
        scores = new vector<int>();
    }
    ~Record()
    {
        delete courses;
        delete semesters;
        delete scores;
    }
    void addCourse(Course* c, string sem)
    {
        courses->push_back(c);
        semesters->push_back(sem);
        scores->push_back(0);

    }

    void dropCourse(Course* c)
    {
        vector<Course*>::iterator it = courses->begin();
        vector<string>::iterator it2 = semesters->begin();
        while ( it != courses->end() && it2 != semesters->end())
        {
            if (c == *it)
                break;
            it++;
            it2++;
        }
        courses->erase(it);
        semesters->erase(it2);
    }

    void setCourseScore(Course* c, int g)
    {
        vector<Course*>::iterator it = courses->begin();
        vector<int>::iterator it2 = scores->begin();
        while ( it != courses->end() && it2 != scores->end())
        {
            if (c == *it)
                break;
            it++;
            it2++;
        }

        it2 = scores->insert(it2, g);
    }
    void computeAccGPA()
    {

    }

    vector<Course*>* getCourses() { return courses; } 
    void print(){
        vector<Course*>::iterator it = courses->begin();
        vector<string>::iterator it2 = semesters->begin();
        vector<int>::iterator it3 = scores->begin();
        while ( it != courses->end() && it2 != semesters->end() && it3 != scores->end())
        {
            (*it)->print();
            cout<<" "<<*it2<<" "<<*it3<<endl;
            it++;
            it2++;
            it3++;
        }
        cout<<endl;
    }
private:
    vector<Course*>* courses;
    vector<string>* semesters;
    vector<int>* scores;
};
#endif 
```

我的课程：

```
#ifndef Course_H
#define Course_H
#include <string>
#include <iostream>
using namespace std;
class Course
{
public:
    Course(string n, string f, int c)
    {
        name = n;
        faculty = f;
        credit =c;
    }
    ~Course() {}

    void print()
    {
        cout<<name<<" "<<faculty<<" ";//<<c<<" ";
    }
private:
    string name;
    string faculty;
    int credit;
};
#endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:32:09.527

我认为这条线`list->push_back(John, Math34, Summer2012);`是问题所在。

你没有传递字符串。将其替换为`list->push_back("John", new Course("Math (course name)", "Math (faculty)", 34), "Summer2012");`

# php - mysqli_real_escape_string：HelperFunction 中的非对象

> ID：15723148
> 
> 赞同：0
> 
> 时间：2013-03-30T20:29:09.873
> 
> 标签：php, mysqli

我对以下代码有疑问。这是一个 PHP 类，我计划将其用作 DB-Handler。对于 INSERT，我使用了一个小辅助函数，主要是因为我懒得手动清理字符串。这是代码：

```
<?php
class Db{
/*
* Configure DB settings here, make sure php is in good health. Check phpinfo(); 
*/

private $MYSQL_HOST = 'localhost';
private $MYSQL_USER = 'root';
private $MYSQL_PASS = '******';
private $db;

function select($selected_db, $sql){
    //Create new object out of connection to db
    $this->db = @new mysqli($this->MYSQL_HOST, $this->MYSQL_USER, $this->MYSQL_PASS, $selected_db);
    //If there aren't any errors
    if(mysqli_connect_errno() == 0){
        $result = $this->db->query($sql);
        if($result){
            $result = $result->fetch_array(MYSQLI_ASSOC);
        }else{
            echo "There is a problem with the query";
        }
    } else { //If you couldn't connect to DB at all
        die("No connection possible: " . mysqli_connect_error());
    }
    //Close connection
    $this->db->close();     
    return $result;
}   

function dirtyLittleHelper($string){
    //Change each character into its HTML equivalent
    $string = htmlentities($string);
    //Create a legal SQL string from input
    $string = $this->db->mysqli_real_escape_string($string);
    return $string;
}   
}

?> 
```

现在对于我得到的错误：

> 致命错误：在第 35 行的 /path/to/file/db_class.php 中的非对象上调用成员函数 mysqli_real_escape_string()

问题只是为什么？我不想使用未经处理的字符串，也不想使用 mysql_real_escape_string 因为它已被弃用。

因为这是我第一次使用 SQL，所以我冒着风险发布一个问题的副本。对我来说，正确学习它很重要，而不仅仅是使用有效的版本，让数据库的方式保持开放。

在此先感谢 Stiller_leser

# 编辑

谢谢，我想我会用难以捉摸的暗示去。我不知道，它准备这样做。无论如何只是为了检查，正确的插入功能可能看起来像那样吗？

```
function insert($selected_db, $sql){
    //Create new object out of connection to db
    $this->db = @new mysqli($this->MYSQL_HOST, $this->MYSQL_USER, $this->MYSQL_PASS, $selected_db);
    //If there aren't any errors
    if(mysqli_connect_errno() == 0){
        //If you could prepare query
        if($result = $db->prepare( $sql )){
            //Execute query
            $result->execute();         
        } else { //If you couldn't prepare query
            echo "There is a problem with the query";
        }
    } else { //If you couldn't connect to DB at all
        die("No connection possible: " . mysqli_connect_error());
    }
    //Close connection
    $this->db->close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:10:57.863

您的课程对我来说似乎不一致且无法使用。

*   您将 $selected_db 传递给您的函数，但从不使用它
*   相反，您正在为您运行的每个查询创建一个新连接（！）
*   可以看到那个小辅助函数没有用。
    *   而且我怀疑它仍然无法使用且不安全
*   调用 prepare/execute **本身并不能保护您的查询**。它必须有变量才能做任何好事
*   mysqli中的绑定变量是**一个痛苦**
*   这就是为什么你被告知要使用 PDO

此外，通过充分实施的占位符，您不需要像 delete() 这样的特殊函数。update() 等，使用传统的 query() 方法来运行它们所有的查询：

```
$data = array('name' => 'John','surname'=>'doe', ...);
$db->query("INSERT INTO ?n SET ?u", $table, $data); 
```

因此，如果您需要将 PHP-Class 用作 DB-Handler，这里有一个[SafeMysql](https://github.com/colshrapnel/safemysql)，它是用一些知识和经验编写的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T20:34:18.743

呼叫应该是这样的

```
$string = $this->db->real_escape_string($string); 
```

请检查[文档](http://php.net/manual/en/mysqli.real-escape-string.php)。

* * *

替代解决方案是：

```
$string = mysqli_real_escape_string($this->db, $string); 
```

# algorithm - 按两两差对数组进行排序

> ID：15723151
> 
> 赞同：5
> 
> 时间：2013-03-30T20:29:34.010
> 
> 标签：algorithm, sorting

例如我们有数组`X[n] = {X0, X1, X2, ... Xn}` ，目标是对这个数组进行排序，使得每对之间的差值按升序排列。

例如`X[] = {10, 2, 7, 4}`

答案是：

```
2 7 10 4
4 10 7 2 
```

我有一些代码，但它是蛮力:)

```
#include <stdio.h>

int main(int argc, char **argv)
{
    int array[] = { 10, 2, 7, 4 };
    int a[4];

    for(int i = 0; i < 4; i++){
        a[0] = array[i];

        for(int j = 0; j < 4; j++){
            a[1] = array[j];
            if(a[0] == a[1])
               continue;

            for(int k = 0; k < 4; k++){
                a[2] = array[k];
                if(a[0] == a[2] || a[1] == a[2])
                    continue;

            for(int l = 0; l < 4; l++){
                a[3] = array[l];
                if(a[0] == a[3] || a[1] == a[3] || a[2] == a[3])
                    continue;
                if(a[0] - a[1] < a[1] - a[2] && a[1] - a[2] < a[2] - a[3])  
                    printf("%d %d %d %d\n", a[0], a[1], a[2], a[3]);
             }
         }
     }
   }
    return 0;
 } 
```

“漂亮”算法的任何想法？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T09:16:32.780

**免责声明**此解决方案将安排项目以绝对值的差异增长。感谢@Will Ness

根据`the difference between every pair is in ascending order`需求提供一种解决方案。

您只需按升序 O(n)*log(n) 对数组进行排序，然后从中间开始。你安排这样的元素：

`[n/2, n/2+1, n/2-1, n/2+2, n/2-2, n/2+3 ...]`如果更多元素位于第 (n/2) 个元素的右侧，则首先转到 +1

`[n/2, n/2-1, n/2+1, n/2-2, n/2+2, n/2-3 ...]`否则你先去-1。

在这里，您会得到上升的成对差异。

**笔记！！！**不能保证这个算法会找到最小的差异并从它开始，但我不认为这是要求。

例子

排序数组：`{1, 2, 10, 15, 40, 50, 60, 61, 100, 101}`

然后，您选择 50（如 10/2 = 5th）、60（10/2+1 = 6）、40 等等......

你会得到：`{40, 50, 15, 60, 10, 61, 2, 100, 1, 101}`

这让你有差异：`10, 35, 45, 50, 51, 59, 88, 99, 100`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T10:05:44.797

让我们来看看。您的示例数组是 {10,2,7,4}，您显示的答案是：

```
2 7 10 4         
 5 3  -6     differences,  a[i+1] - a[i]

4 10 7 2
 6 -3 -5 
```

我在这里展示了翻转的差异，这样分析起来更容易。

`a[i+1] - a[i]` 因此，目标是按*降序*排列差异。显然，一些**正**的差异值会**先**出现，然后是一些**负**的。这意味着数组的最大元素将出现在中间的某个位置。它左侧的正差必须按绝对值的*降序排列，而右侧的负差必须按绝对值的**升序*排列。

我们以另一个数组为例：{4,8,20,15,16,1,3}。我们从排序开始：

```
1 3 4 8 15 16 20
 2 1 4 7  1  4      differences,  a[i+1] - a[i] 
```

现在，20 位于中间，在它之后向右必须**逐渐远离**值。由于解中 20 左侧的差异是正数，因此值本身是升序的，即已排序。因此，在我们选择其中一些移动到最大元素的右侧之后，剩下的任何东西都保持原样，并且（正）差异必须按降序排列。如果是，则找到解决方案。

这里没有解决方案。可能性是：

```
...  20 16 8    (no more)  left:  1 3 4 15    (diffs: 2 1 11 5) 
...  20 16 4    (no more)  left:  1 3 8 15    (diffs: 2 5 7 5)
...  20 16 3    (no more)  left:  1 4 8 15    (diffs: 3 4 7 5)
...  20 16 1    (no more)  left:  3 4 8 15  ....................
...  20 15 8    (no more)  left:  1 3 4 16
...  20 15 4    (no more)  left:  1 3 8 16
...  20 15 3    (no more)  left:  1 4 8 16
...  20 15 1    (no more)  left:  3 4 8 16
...  20 8       (no more)  left:  1 3 4 15 16
...  20 4       (no more)  left:  1 3 8 15 16
...  20 3       (no more)  left:  1 4 8 15 16
...  20 1       (no more)  left:  3 4 8 15 16
...  20         (no more)  left:  1 3 4 8  15 16 
```

没有 1 和 3，有几种解决方案是可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T13:43:05.140

这个问题的解决方案并不总是可行的。例如，数组`X[] = {0, 0, 0}`不能按要求“排序”，因为两个差异总是相等的。

In case this problem has a solution, array values should be "sorted" as shown on the left diagram: some subset of the values in ascending order should form prefix of the resulting array, then all the remaining values in descending order should form its suffix. And "sorted" array should be convex.

![enter image description here](../Images/fbbd908aa9271eb23c964eba4ec32526.png)

This gives a hint for an algorithm: sort the array, then split its values into two convex subsets, then extract one of these subsets and append it (in reverse order) at the end.

A simple (partial) implementation would be: sort the array, find a subset of values that belong to [convex hull](http://en.wikipedia.org/wiki/Convex_hull), then check all the remaining values, and if they are convex, append them at the end. This algorithm works only if one of the subsets lies completely below the other one.

If the resulting subsets intersect (as shown on the right diagram), an improved version of this algorithm may be used: split sorted array into segments where one of the subsets lies completely below other one (A-B, B-C), then for each of these segments find convex hull and check convexity of the remaining subset. Note that X axis on the right diagram corresponds to the array indexes in a special way: for subset intersections (A, B, C) X corresponds to an index in ascending-sorted array; X coordinates for values between intersections are scaled according to their positions in the resulting array.

## Sketch of an algorithm

1.  Sort the array in ascending order.
2.  Starting from the largest value, try adding convex hull values to the "top" subset (in a way similar to [Graham scan algorithm](http://en.wikipedia.org/wiki/Graham_scan)). Also put all the values not belonging to convex hull to the "bottom" subset and check its convexity. Continue while all the values properly fit to either "top" or "bottom" subset. When the smallest value is processed, remove one of these subsets from the array, reverse the subset, and append at the and of the array.
3.  If after adding some value to the "top" subset, the "bottom" subset is not convex anymore, rollback last addition and check if this value can be properly added to the "bottom" subset. If not, stop, because input array cannot be "sorted" as required. Otherwise, exchange "top" and "bottom" subsets and continue with step 2 (already processed values should not be moved between subsets, any attempt to move them should result in going to step 3).

In other words, we could process each value of sorted array, from largest to smallest, trying to append this value to one of two subsets in such a way that both subsets stay convex. At first, we try to place a new value to the subset where previous value was added. This may make several values, added earlier, unfit to this subset - then we check if they all fit to other subset. If they do - move them to other subset, if not - leave them in "top" subset but move current value to other subset.

## Time complexity

Each value is added or removed from "top" subset at most once, also it may be added to "bottom" subset at most once. And for each operation on an element we need to inspect only two its nearest predecessors. This means worst-case time complexity of steps 2 and 3 is O(N). So overall time complexity is determined by the sorting algorithm on step 1.

# sql - Solution to avoid non-sargable argument in where clause

> ID：15723163
> 
> 赞同：1
> 
> 时间：2013-03-30T20:31:01.587
> 
> 标签：sql, sql-server, sql-server-2008, tsql

In the `code_list` CTE in this query I have a row constructor that will eventually take any number of arguments. The column `icd` in the `patient_codes` CTE is a five digit identifier that is most descriptive that the three digit codes that the row constructor has. The table `icd_patient` has a 100 million rows so for performance's sake, I would like to filer the rows on this table before I do any further work. I have

```
;with code_list(code_list)
as
(
    select  x.code_list
      from (values ('70700'),('25002')) as x(code_list)
),patient_codes
as
(

select distinct  icd,pat_id,id
    from icd_patient
    where icd in (select icd from code_list)
)
select distinct pat_id from patient_codes 
```

The problem is, however, is that in the icd_patient table all of the `icd` columns are five digit and more descriptive. If I look at the execution plan of this query it's pretty streamlined. If I do

```
;with code_list(code_list)
as
(
    select  x.code_list
      from (values ('70700'),('25002')) as x(code_list)
),patient_codes
as
(
    select substring(icd,1,3) as icd,pat_id
      from icd_patient2
      where substring(icd,1,3) in (select * from code_list)
)
select * from patient_codes 
```

this if course has a large performance impact because of the substring expression in the where clause. Does something akin to `like in` exist so I can take advantage of my indexes?

Index on icd_patient `CREATE NONCLUSTERED INDEX [ix_icd_patient] ON [dbo].[icd_patient2] ( [pat_id] ASC ) INCLUDE ( [id],`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T20:36:55.417

This much simpler query should be better than (or, at worst, the same as) your existing query.

```
select pat_id
    FROM dbo.icd_patient
    where icd LIKE '707%'
       OR icd LIKE '250%'
GROUP BY pat_id; 
```

Note that sargability only matters if there is actually an index on this column.

An alternative (since `OR` can sometimes give the optimizer fits):

```
SELECT pat_id FROM 
(
  SELECT pat_id
    FROM dbo.icd_patient
    WHERE icd LIKE '707%'
  UNION ALL
  SELECT pat_id
    FROM dbo.icd_patient
    WHERE icd LIKE '250%'
) AS x
GROUP BY pat_id; 
```

To make this extensible beyond a handful of OR conditions, I would use a table-valued parameter (TVP).

```
CREATE TYPE dbo.StringPatterns AS TABLE(s VARCHAR(3) PRIMARY KEY); 
```

Then your stored procedure could say:

```
CREATE PROCEDURE dbo.whatever
  @sp dbo.StringPatterns READONLY
AS
BEGIN
  SET NOCOUNT ON;

  SELECT p.pat_id
    FROM dbo.icd_patient AS p
    INNER JOIN @sp AS sp
    ON p.pat_id LIKE sp.s + '%'
  GROUP BY p.pat_id;
END 
```

Then you can pass in your set of three-character substrings from a `DataTable` or other collection in C#. From T-SQL just as an example:

```
DECLARE @p dbo.StringPatterns;
INSERT @p VALUES('707'),('250');
EXEC dbo.whatever @sp = @p; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T20:38:10.580

Something like `like in` does not exist. The following is sargable:

```
select *
from icd_patient
where icd like '70700%' or
      icd like '25002%' 
```

Because `like` with a constant initial substring is a special case for SQL Server. This does not work when the strings on the right are variables.

One solution is to create an indexed view on the `icd_patient` table with an index on the first five characters of the icd code.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-26T03:20:32.073

Using "IN" makes that part of a command non-sargable on both sides. End of discussion.

Saying he fixes it using substring, completely changes what it would return while it remains non sarged.

Any "fix" should exactly match results. The actual fix is to join the cte so the five characters match or put three characters in the cte and match that in a join or put 4 characters in the cte where the fourth is "%" and join matching by using LIKE

Using a "like" that starts with "%" increases the complexity of the search, but it would still use the index to find the value because parsing the index should use less reading by only getting the full table row when a search is successful.

# algorithm - Algorithm to simplify a weighted directed graph of debts

> ID：15723165
> 
> 赞同：23
> 
> 时间：2013-03-30T20:31:14.000
> 
> 标签：algorithm, graph-theory, graph-algorithm

I've been using a little python script I wrote to manage debt amongst my roommates. It works, but there are some missing features, one of which is simplifying unnecessarily complicated debt structures. For example, if the following weighted directed graph represents some people and the arrows represent debts between them (Alice owes Bob $20 and Charlie $5, Bob owes Charlie $10, etc.):

![graph1](../Images/f9eeb4c84d35fa083d0f0d4f439b2d5a.png)

It is clear that this graph should be simplified to the following graph:

![graph1-simplified](../Images/130c9fa2780fa54aa4f623ceaf2d2c53.png)

There's no sense in $10 making its way from Alice to Bob and then from Bob to Charlie if Alice could just give it to Charlie directly.

The goal, then, in the general case is to take a debt graph and simplify it (i.e. produce a new graph with the same nodes but different edges) such that

1.  No node has edges pointing both in and out of it (no useless money changing hands)
2.  All nodes have the same "flow" through them as they did in the original graph (it is identical in terms of where the money ends up).

By "flow", I mean the value of all inputs minus all outputs (is there a technical term for this? I am no graph theory expert). So in the example above, the flow values for each node are:

*   Bob: +10
*   Alice: -25
*   Charlie: +15

You can see that the first and second graphs have the same flow through each node, so this is a good solution. There are some other easy cases, for example, any cycle can be simplified by removing the lowest valued edge and subtracting its value from all other edges.

This:

![graph2](../Images/d4835e742caec009467cdeed57efd8f0.png)

should be simplified into this:

![graph2-simplified](../Images/f5d9149473431a548b3a790ce8d90cc1.png)

我无法想象没有人研究过这个问题；我只是不知道要搜索哪些术语来查找它的信息（同样，不是图论专家）。我一直在寻找几个小时无济于事，所以我的问题是：根据上面为任何加权有向图指定的条件，什么算法会产生简化（新图）？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-12-19T08:08:24.003

Here is an academic paper which investigates this problem in great detail. There is also some sample code for the different algorithms in Section 8 towards the end.

### [Verhoeff, T. (2004). Settling multiple debts efficiently : an invitation to computing science. Informatics in Education, 3(1), 105-126.](https://research.tue.nl/en/publications/settling-multiple-debts-efficiently-an-invitation-to-computing-sc)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-30T20:44:36.200

## 简单算法

您可以在 O(n) 中找到期望获得或支付的金额。因此，您可以简单地创建两个列表，一个用于借方，另一个用于贷方，然后平衡两个列表的头部，直到它们为空。从你的第一个例子：

*   初始状态：借：（A：25），贷：（B：15，C：10）
*   第一笔交易，A：15 -> B：借：（A：10），贷：（C：10）
*   第二笔交易，A：10 -> C：借：（），贷：（）

The transactions define the edges of your graph. For n persons involved, there will be at most n-1 transactions=edges. In the beginning, the total length of both lists is n. In each step, at least one of the lists (debit/credit) gets shorter by one, and in the last both lists disappear at once.

The issue is that, in general, this graph doesn't have to be similar to the original graph, which, as I get your intention, is a requirement. (Is it? There are cases where the optimal solution consists of adding new edges. Imagine A owing B and B owing C the same amount of money, A should pay C directly but this edge is not in the graph of debts.)

## Less transactions

If the goal is just to construct an equivalent graph, you could search the creditor and debitor lists (as in the section above) for exact matches, or for cases where the sum of credit matches the debit of *one* person (or the other way round). Look for [bin packing](http://en.wikipedia.org/wiki/Bin_packing). For other cases you will have no other choice than splitting the flows, but even the simple algorithm above produces a graph which has one fewer edge than there are persons involved -- at most.

**EDIT**: Thanks to j_random_hacker for pointing out that a solution with less than n-1 edges is possible iff there is a group of persons whose total debts matches the credit of another group of persons: Then, the problem can be split into two subproblems with a total cost of n-2 edges for the transaction graph. Unfortunately, the [subset sum problem](http://en.wikipedia.org/wiki/Subset_sum_problem) is NP-hard.

## A flow problem?

Perhaps this also can be transformed to a [min-cost flow problem](http://en.wikipedia.org/wiki/Minimum-cost_flow_problem). If you want just to simplify your original graph, you construct a flow on it, the edge capacities are the original amounts of debit/credit. The debitors serve as inflow nodes (through a connector node which serves all debitors with edges of capacity that equals their total debt), the creditors are used as outflow nodes (with a similar connector node).

If you want to minimize the number of transactions, you will prefer keeping the "big" transactions and reducing the "small" ones. Hence, the cost of each edge could be modeled as the inverse of the flow on that edge.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-01T11:42:17.963

I've actually encountered this problem in exactly the same situation as you :)

I think krlmlr's various solution don't quite solve the problem exactly. I'll have a think about how to solve it exactly (in the minimum-edges sense), but in the meantime, a practical alternative solution to your problem is to invent a new person, **Steve**:

1.  Steve is not actually a person. Steve is just a bucket, with a piece of paper attached to it.
2.  Everyone calculates the net amount that they owe (or are owed, if negative), and writes it on the piece of paper, alongside their name.
3.  Anyone whose net position is that they owe money gives that net amount of money to Steve when they can, and crosses off their name.
4.  Everyone whose net position is that they are owed money takes that money from Steve when they see Steve has it, and crosses off their name.

If a person who owes money can't pay all of it at once, they can just give Steve what they can currently afford, and take this amount off the total-owing figure against their name. Likewise if you are owed more money than Steve currently has on hand, you can take all of the money he currently has, and take that amount off the total-owed against your name.

If everyone agrees at the start to pay Steve only the full amount, then every net-ower makes exactly one deposit, and every net-owed person make exactly one withdrawal (although this may require multiple checks on Steve to see whether he currently has sufficient cash on hand). The good thing about Steve is that he's always around, and is never too busy to sort out finances. Unfortunately he's very gullible, so Alice, Bob and Charlie need to already trust one another not to take advantage of him.

# ios - Master Detail Application not loading UIViewControllers

> ID：15723174
> 
> 赞同：0
> 
> 时间：2013-03-30T20:31:49.010
> 
> 标签：ios, objective-c, ipad

I am creating an iPad version of Master Detail Application using XCode 4.5 with ARC. I have my iPadMaster.h/.m(as my master) and iPadDetailViewController.h/m(as my detail) set up.

I am trying to load different view controllers from iPadDetailViewController when users click/select the rows on iPadMaster.

On iPadDetailController.h, i set this:

```
@property int itemNumber; 
```

On iPadMaster.h, i called it as:

```
@class iPadDetailViewController; 
```

and proceeded with this:

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    DetailViewController * DVC = [[DetailViewController alloc]init];
    DVC.itemNumber = indexPath.row;
} 
```

On iPadDetailViewController, i set this:

```
- (void)configureView
{
    switch (_itemNumber) {
        case 1:
        {
            iPadLogin *next = [[iPadLogin alloc] init];
            NSMutableArray *mut = [[NSMutableArray alloc]init];
            mut = [self.splitViewController.viewControllers mutableCopy];
            [mut replaceObjectAtIndex:1 withObject:next];
            self.splitViewController.viewControllers = mut;
            break;
        }

        default:{
            self.view.backgroundColor = [UIColor whiteColor];
        }
            break;
    }
}

//then i called it on:
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [self configureView];

} 
```

When i clicked the second row in the master table, item_number should be 1 and load the 'iPadLogin' but nothing happens... Any pointers is much appreciated...

Thanx in advance...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:24:22.107

As I said in my comment, I think you should change the detail controller from the master controller. It is in the master that you're making the decision on what detail controller to go to (by picking a row in the table), so it should be the responsibility of the master controller to make the change. The code below should do that (note, however, if you're using a storyboard for your controllers, then you should be using [self.storyboard instantiateViewControllerWithIdentifier:@"whatever"] to get your next controller rather than alloc init).

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
        switch (indexPath.row) {
            case 1:
            {
                iPadLogin *next = [[iPadLogin alloc] init];
                NSMutableArray *mut = [[NSMutableArray alloc]init];
                mut = [self.splitViewController.viewControllers mutableCopy];
                [mut replaceObjectAtIndex:1 withObject:next];
                self.splitViewController.viewControllers = mut;
                break;
            }
            case 2:
            {
                AnotherVC *another = [[AnotherVC alloc] init];
                NSMutableArray *mut = [[NSMutableArray alloc]init];
                mut = [self.splitViewController.viewControllers mutableCopy];
                [mut replaceObjectAtIndex:1 withObject:another];
                self.splitViewController.viewControllers = mut;
                break;
            }

            default:{
                UIViewController *detail = self.splitViewController.viewControllers[1];
                detail.view.backgroundColor = [UIColor whiteColor];
            }
                break;
        }
    } 
```

# javascript - Firefox 弹出 PHP 会话变量未正确发送

> ID：15723180
> 
> 赞同：0
> 
> 时间：2013-03-30T20:32:27.663
> 
> 标签：javascript, php, session, firefox, popup

在 Chrome 中一切正常，但在 FF 中却不行。这是我的情况：

父页面有一个链接，点击它会创建一个带有文本字段的弹出窗口。该信息存储在`$_SESSION`其中并用于导航（即，“一”将您带到第一页，“二”将您带到第二页，等等）。在弹出窗口中，提交时会发生三件事：

1.  文本字段信息存储在会话中。
2.  父页面使用文本字段数据刷新以告诉它去哪里。
3.  弹出窗口关闭。

请记住，这在 Chrome 中运行良好。但是，在 FF 中，我相信它会在信息发送到父窗口之前关闭弹出窗口，从而丢失`$_SESSION`数据。我相信这一点，因为如果我这样做，弹出窗口不会关闭，它工作正常，所以这不是弹出窗口不将数据发送回父窗口的情况。

所以...我认为我的问题在于我的 JavaScript 的执行顺序，即使我的顺序看起来是正确的。再一次，它在 Chrome 中运行得很好。

这是我的代码，你能解决吗？

（所有页面都有`$_SESSION`标题等，这不是语法问题）

我相信 Firefox 在发送数据之前会关闭弹出窗口`$_SESSION`！我不知道为什么！发生的情况是我的浏览器最终进入`navredirect.php`，没有空会话。它没有得到`$_SESSION data`，所以 PHP if 语句没有告诉它做元重定向。PRINT_R 什么也没产生。

父页面弹出调用：

```
<a href="javascript:void(0)" onClick="window.open('enternav.php', 'Pop Up',  'width=432,height=270,toolbar=0,scrollbars=0,screenX=200,screenY=200,left=200,top=200')">Go to Page</a> 
```

弹出页面的代码。(enternav.php)

```
<head>
    <script type="text/javascript">
        function proceed(){
           opener.location.reload(true);
           window.opener.location.href='http://www.page.com/navredirect.php';  
           self.close();
        }
        </script>
</head>
<body>
<form method="post"  onsubmit="proceed()" action="logscript.php">
<input type = "text" name="page"  />
<input type ="submit" value="Go to page" />
</form>
</body> 
```

logscript.php 的代码（将文本字段转换为会话数据）

```
<? $_SESSION['pw'] = $_POST['page']; ?> 
```

navredirect.php 的代码 (

```
<?
if($_SESSION['pw'] == "one") {
 echo "<meta http-equiv=\"refresh\" content=\"0;URL=pwone.php\">";
} 
elseif($_SESSION['pw'] == "two") {
 echo "<meta http-equiv=\"refresh\" content=\"0;URL=pwtwo.php\">";
} 
else {
 echo "<meta http-equiv=\"refresh\" content=\"0;URL=wrongpw.php\">";
} 
?> 
```

# vb.net - 使用自动点击器刷新页面

> ID：15723183
> 
> 赞同：0
> 
> 时间：2013-03-30T20:32:37.147
> 
> 标签：vb.net, browser, refresh

我有一个自动点击器脚本，每隔几秒提交一次（大约每秒 1 次）。当我测试它时，我注意到它只能运行大约 20 分钟，然后它就会无响应，而我想解决这个问题的唯一方法是有一个每隔几秒刷新一次页面的脚本。但是，当我尝试此操作时，它不起作用，因为它在刷新时仍会尝试自动单击，从而给我一个无响应的错误：[http ://gyazo.com/cfc3d673573d725042e3acc7142a53b9](http://gyazo.com/cfc3d673573d725042e3acc7142a53b9)

我认为解决此问题的唯一方法是在单击按钮刷新时添加暂停或等待文档完成。看起来那会很好用，但我永远无法让它工作...... :\ 有什么帮助吗？如果有帮助，我决定发布我的脚本的来源：http: [//pastebin.com/4WMcn5Ln](http://pastebin.com/4WMcn5Ln) 我会发布更多，但我只能发布 2 个链接......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T02:19:07.087

以下是使用 DocumentCompleted 事件的方法：

```
Private Sub navBtnClick(sender As Object, e As EventArgs)
    Dim wbrowser = New WebBrowser()
    wbrowser.DocumentCompleted += New WebBrowserDocumentCompletedEventHandler(WebBrowser_DocumentCompleted)
    wbrowser.Navigate("http://www.somesite.com/login")
End Sub

Public Sub WebBrowser_DocumentCompleted(sender As Object, e As WebBrowserDocumentCompletedEventArgs)
    Dim webBrowser = TryCast(sender, WebBrowser)
    webBrowser.DocumentCompleted -= WebBrowser_DocumentCompleted
    'MessageBox.Show(webBrowser.Url.ToString())
    webBrowser.Document.GetElementById("login").SetAttribute("value", txtUsername.Text)
    webBrowser.Document.GetElementById("passwd").SetAttribute("value", txtPassword.Text)
    webBrowser.Document.GetElementById("SI").InvokeMember("Click")
End Sub 
```

如果要导航到的文档具有嵌入其他网页的 iframe，则 DocumentCompleted 事件会触发多次。如果您只想接收一次事件，只需取消订阅 DocumentCompleted 处理程序，如上所示。

# ruby-on-rails - 测试 Rspec 时的 FactoryGirl 和 belongs_to 关联

> ID：15723184
> 
> 赞同：4
> 
> 时间：2013-03-30T20:32:38.200
> 
> 标签：ruby-on-rails, rspec, factory-bot

我有以下模型：

```
class Team < ActiveRecord::Base
  # Setup accessible (or protected) attributes for your model
  attr_accessible :name
  validates_presence_of :name

  belongs_to :user

end 
```

由以下人员测试：

```
describe Team do

  before(:each) do
    @attr = FactoryGirl.attributes_for(:team)
  end

  it "should belong to a user" do
    @team = Team.create!(@attr)
    @team.should belong_to(:user)
  end
end 
```

我有以下工厂：

```
FactoryGirl.define do
  factory :team do
    name 'Dream Team'
    sport
    user
  end
end

FactoryGirl.define do
  factory :user do
    name 'Test User'
    last_name 'Last Name'
    email 'example@example.com'
    password 'changeme'
    password_confirmation 'changeme'
  end
end 
```

当我测试规范时，我得到以下失败：

> 1) 团队应该属于一个用户失败/错误：@team = Team.create!(@attr) ActiveRecord::StatementInvalid: SQLite3::ConstraintException: teams.user_id 不能为 NULL: INSERT INTO "teams" ("created_at" , "name", "sport_id", "updated_at", "user_id") 值 (?, ?, ?, ?, ?)

这是为什么？在文档中它说要设置关联，您只需编写工厂名称，在我的情况下是用户。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T20:55:22.667

`FactoryGirl.attributes_for`将为您提供一个仅包含指定模型属性的哈希，不包括关联属性 - 在您的情况下，`user_id`.

That will throw up errors in case `user_id` is a required field and you're trying to create an instance of `Team` by using `FactoryGirl.create(attributes_for(:team))`.

However, if you use `FactoryGirl.create(:team)` it should give you a valid instance of `Team`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T19:48:49.337

You should not be using `before(:each)` with FactoryGirl and Rspec, in fact a more elegant way of creating this test, according to The Rails 4 Way Chapter 21, is by using `let(:team) { FactoryGirl.create(:team }` prior to your it statements

this allows you to not use so many instance variables, if desired I can provide an example if this explanation is not sufficient

# ruby-on-rails - rails 嵌套表单未知属性

> ID：15723189
> 
> 赞同：0
> 
> 时间：2013-03-30T20:33:08.120
> 
> 标签：ruby-on-rails, nested-forms

我在这里阅读了有关此错误的其他几篇文章，但没有人真正适合我的问题。

产生的错误是

```
ActiveRecord::UnknownAttributeError: unknown attribute: practice_id 
```

当我尝试在 rails 控制台中构建 uebung_maps 时，它正在发生：

```
 irb(main):003:0> @p = Practice.new
=> # Practice id: nil, datum: nil, start: nil, end: nil, group: nil, topic: nil, theoab: nil, pracab: nil, action: nil, water: nil, tools: nil, broken: nil, toolkeeper: nil, atw: nil, atfinfo: nil, created_at: nil, updated_at: nil>
irb(main):004:0> @p.uebung_maps.build
ActiveRecord::UnknownAttributeError: unknown attribute: practice_id
    from /home/basti/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.13/lib/active_record/attribute_assignment.rb:88:in `block in assign_attributes' 
```

我的模型等看起来如下

**实践模式**

```
class Practice < ActiveRecord::Base
  has_many :uebung_maps
  has_many :persons
  accepts_nested_attributes_for :uebung_maps
  attr_accessible :uebung_map_attributes, :action, :atfinfo, :atw, :broken, :datum, :end, :group, :pracab, :start, :theoab, :toolkeeper, :tools, :topic, :water
end
```

**Uebung_map 模型**

```
class UebungMap < ActiveRecord::Base
  belongs_to :person
  belongs_to :role
  belongs_to :practice
  belongs_to :vehicle
  attr_accessible :person_id, :role_id, :uebung_id, :vehicle_id
end
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:09:03.797

尝试添加`:practice_id`到您的`attr_accessible`中，如下所示：

```
attr_accessible :person_id, :role_id, :uebung_id, :vehicle_id, :practice_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:18:21.467

我终于找到了问题所在。uebung_map 中应该指向 Pratice 的列被命名为 uebung_id 而不是 practice_id.. 现在它正在工作

# php - Variable function name that points to a method

> ID：15723191
> 
> 赞同：0
> 
> 时间：2013-03-30T20:33:22.220
> 
> 标签：php, function, variables

For functions I can just assign the function name to a string variable, but how do I do it for class methods?

```
$func = array($this, 'to' . ucfirst($this->format));
$func(); // fails in PHP 5.3 
```

This seems to work:

```
$this->{"to{$this->format}"}(); 
```

But it's way too long for me. I need to call this function many times...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:37:21.167

That's not really a function? Why don't use standard method for functions?

```
function func() {
$func = array($this, 'to' . ucfirst($this->format));
return $func;
} 
```

then output it with

```
func(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T21:00:43.467

You can use [`call_user_func`](http://php.net/manual/en/function.call-user-func.php):

```
class A
{

  function thisIsAwesome()
  {
    return 'Hello';
  }

}

$a = new A;

$awesome = 'IsAwesome';

echo call_user_func(array($a, 'this' . $awesome)); 
```

Although it's still quite long. You could write your own function to do it:

```
function call_method($a, $b)
{
  return $a->$b();
}

$a = new A;

$awesome = 'IsAwesome';

echo call_method($a, 'this' . $awesome); 
```

Which is a litter shorter.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T21:06:37.547

One option is to use php's [`call_user_func_array()`](http://php.net/manual/en/function.call-user-func-array.php);

**Example:**

```
call_user_func_array(array($this, 'to' . ucfirst($this->format)), array()); 
```

You can also use the `self` keyword or the class name with the [scope resolution operator](http://www.php.net/manual/en/language.oop5.paamayim-nekudotayim.php).

**Example:**

```
$name = 'to' . ucfirst($this->format);
self::$name();

className::$name(); 
```

However, what you have posted using php's [variable functions](http://php.net/manual/en/functions.variable-functions.php) is also completely valid:

```
$this->{"to{$this->format}"}(); 
```

`call_user_func_array()` is probably considered more readable than using variable functions, but from what I've read (like [here](http://paul-m-jones.com/archives/182)), variable functions tend to out perform `call_user_func_array()`.

What did you mean by the variable function being **too long**?

# selenium - How to "firmly" locate an element in a table? Selenium

> ID：15723193
> 
> 赞同：0
> 
> 时间：2013-03-30T20:33:25.783
> 
> 标签：selenium, xpath, html-table

How can I locate an element "1988" (the fourth line) in the following table:

```
<table border="0" width="820" cellpadding="2" cellspacing="0">
<tbody>
    <tr valign="top">
        <td class="default" width="100%">Results <b>1</b> to <b>10</b> of <b>1988</b></td>
        </tr>
        <tr valign="top">
        <td class="default" bgcolor="#C0C0C0">&nbsp;<font class="resultsheader"> ...etc
        </tr>
    </tbody>
</table> 
```

IMPORTANT: I know one way that works (By.xpath):

```
driver.findElement(By.xpath("//td[@width='100%']")).getText(); 
```

However, this way does not ALWAYS work. The page is dynamic, so I need a way to locate that element no matter what changes happen to the page. I tried the following but I am not sure:

```
By.xpath("//html//body//table//tbody//tr[3]//td//table//tbody//tr//td[2]//table[4]//tbody//tr[1]//td//b[3]" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T22:58:39.300

If you can't change the HTML and want to use attributes for selection, you can write something like this:

```
//table[@border=0][@width=820]//tbody//tr[1]//td//b[3] 
```

# jquery - Flexslider shows 10px of previous image

> ID：15723199
> 
> 赞同：0
> 
> 时间：2013-03-30T20:33:43.810
> 
> 标签：jquery, css, flexslider

Why does flexslider show 10px on the left from the previous image when it slides? What's the way to prevent that from happening?

See what I mean at [http://nworks.nu/projects2013/sthlm/index.html](http://nworks.nu/projects2013/sthlm/index.html)

** I dont want to use overflow: hidden

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:40:04.397

This will do.. change `margin-left: -10px;` in `style.css`

```
.slides {
  max-height: 398px;
  float: left;
  position: relative;
  margin-bottom: 48px;
  margin-left: -10px;
} 
```

# instructions - 用进位指令合成加法

> ID：15723201
> 
> 赞同：1
> 
> 时间：2013-03-30T20:33:58.593
> 
> 标签：instructions, adc, easy68k

我最近被要求在处理器没有的情况下使用其他指令来合成 ADC（带进位加法）指令。我将如何在 68k 机器上解决这个问题？

# c# - How the Application layer will be able to dynamicly query the DB in the DAL layer?

> ID：15723202
> 
> 赞同：0
> 
> 时间：2013-03-30T20:33:58.530
> 
> 标签：c#, linq-to-sql, data-access-layer, business-logic, application-layer

**C#, LINQ to SQL**

Some advice me to open new topic insteed that topic becouse there is no solution for my problem. Now I will need your help to re-design my layers. [Linq To Sql - Making a dynamic search for the Application layer without exposing DAL layer as DLL](https://stackoverflow.com/questions/15721627/linq-to-sql-making-a-dynamic-search-for-the-application-layer-without-exposing)

* * *

My project consist of 3 layers: DAL, BL, Application. The Linq2Sql is exsist in the DAL layer and he auto-generate a class to each table in the data base, and a ContextObject to manage the data base. I cant change anything in this classes becouse any change in the DB will couse re-auto-generation of those classes.

```
[global::System.Data.Linq.Mapping.DatabaseAttribute(Name="ClientDB")]
public partial class LinqClientDBDataContext : System.Data.Linq.DataContext

[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.Clients")]
public partial class Client : INotifyPropertyChanging, INotifyPropertyChanged 
```

those classes are exposed to the BL layer. The Application layer does not need to be exposed to the LinqClientDBDataContext (ContextObject) so I can't expose the Application layer to any auto-generated code of the Linq2Sql (In this case The Client class). Thats why I made a "Duplicate" class of Client that is generated in the BL layer by the DAL.Client Object :

```
private BusinessLogic.Client Convert(ClientDataAccessLayer.Client Client)
        {
            return new BusinessLogic.Client(Client.ClientID,..);
        } 
```

The problem comes when I try give the Application layer a IQueryable so the Application layer can dynamicly creat queries and filter the results as he want:

```
public IQueryable<BusinessLogic.Client> Clients()
        {
            this.MainDB.Clients.Select<ClientDataAccessLayer.Client, BusinessLogic.Client>((ClientDAL1) => Convert(ClientDAL1));
        }
ClientLogic().Clients().Where((ClientBL1)=>ClientBL1.ClientID==4); 
```

Exception: Method 'BusinessLogic.Client Convert(ClientDataAccessLayer.Client)' has no supported translation to SQL.

This code gives this exception and I know why but I cant Find Any better solution for this problem.

Feel free to help me re-design my project so the application can dynamicly query the DB.

Thanks alot, Stav Alfi.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:40:24.510

You cannot call constructors in your linq-to-sql queries. you'll have to write your converter like this

```
// NOTE: this is an expression, not a method
private static Expression<Func<ClientDataAccessLayer.Client, BusinessLogic.Client>> Convert =
    x => new BusinessLogic.Client // NOTE: initializer, not a constructor
    {
        Id = x.Id,
        ...
    };

public IQueryable<BusinessLogic.Client> Clients()
{
    this.MainDB.Clients.Select(Convert);
} 
```

Assuming you have no other parts of your query which are calling arbitrary, non-Linq-to-SQL-compatible functions, the error should go away.

# algorithm - 通过 Mean-Shift 分割计算对象

> ID：15723203
> 
> 赞同：2
> 
> 时间：2013-03-30T20:33:59.390
> 
> 标签：algorithm, opencv, image-processing, image-segmentation

我正在尝试使用均值偏移分割来计算图像中发现的对象。我一直在使用`[pyrMeanShiftFiltering][1]`OpenCV。使用以下代码，我能够生成已分割的图像。但是，我不知道如何实际*计算*该图像中“项目”的数量。

只需`pyrMeanShiftFiltering( img, res, spatialRad, colorRad, maxPyrLevel );`在此图像上运行
![未分段的书籍](../Images/ef684c10320f8ec46263f3b45a026ec1.png)

生成*此*图像 ![在此处输入图像描述](../Images/da8af6beb0803bd20e2c82f6cd74c60a.png)

在这个例子中，它看起来并没有太大的不同，尽管有些图像的分割在颜色等方面产生了巨大的差异。但是，对于大多数测试用例，我将假设颜色**不会**非常明显，并且边缘**不会**明显（如给出的示例中所示）足以在图像本身上使用边缘检测。

基于此，我该如何查找在该图像中找到的对象数量？我正在寻找一些代码，尽管任何朝着正确方向的戳都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:47:32.363

如果对象包含不同的颜色（并且这些颜色是独特的），最简单的方法是计算有多少簇（删除白色的簇，因为页面是白色/黄色的）。

在您展示的图像上，您也可以使用角检测器，因为您有非常独特的角，然后查看周围并按颜色过滤这些角（周围颜色必须包含一些颜色和白色（来自页面））然后匹配角位于同一垂直线上，最后数一数。

另一种想法是从页面推断白色/黄色（聚类+直方图过滤）并计算不同的斑点。

也许最好的方法是通过查找封面颜色（蓝色、绿色）和最接近的白色 => 查找 blob 从页面推断白色/黄色。这些斑点可以标记为最接近的封面颜色。然后你有显示页面并根据最接近的封面颜色标记的 blob。这些斑点可能被分成几部分（一本书部分覆盖另一本书），并且两个不同的斑点可能属于同一个对象（一本有多种颜色封面的书），但现在这些斑点必须是矩形的。因此，您可以在该二值化图像中找到线条并尝试将它们与最近的线条连接起来。然后你最终会得到一个匹配一本书的 blob。最后你可以数一数。

# ruby - Better autocomplete in VIM

> ID：15723209
> 
> 赞同：10
> 
> 时间：2013-03-30T20:34:34.797
> 
> 标签：ruby, vim, autocomplete, rubymotion

All,

I have been working with vim for some time now, and love everything about it - there is only one thing I really miss from IDEs like RubyMine, and that is advanced autocompletion.

For reference, here is my standard VIM setup: [https://github.com/wrwright/.vim](https://github.com/wrwright/.vim)

I have tried ctags with omnicomplete + supertab, and the one major element I miss is the ability to bring up a context sensitive list of attributes/constants/methods. For example, as I learn RubyMotion, I'd love to have some help remembering iOS SDK constants/attributes/methods, but my VIM autocomplete stops with suggesting class names..or if it does suggest methods/attributes, it lists a ton of methods/attributes that don't even apply to the class I'm working with.

I'd like to (simple example) be able to type UIColor.bl and have it autocomplete with UIColor.blueColor (or suggest if there are multiple options that start with "bl" that are properties of UIColor.

RubyMine does this very well, and if I can get VIM to be similarly smart with autocomplete it would be heavenly (and a great boon while learning RubyMotion/iOS Development.

I have also tried SnipMate (and even a RubyMotion tailored variation at [https://github.com/rcyrus/snipmate-snippets-rubymotion](https://github.com/rcyrus/snipmate-snippets-rubymotion)), but that doesn't seem to offer the features I'm looking for either.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T22:07:06.007

Relatively satisfied with stock Vim's omnicomplete + [vim-ruby](https://github.com/vim-ruby/vim-ruby) and [vim-rails](https://github.com/tpope/vim-rails) having completion abilities on par with NetBeans but with all the bells&whistles of Vim and much lower resource requirements, of course.

From my .vimrc concerning completion options :

```
autocmd FileType ruby,eruby let g:rubycomplete_buffer_loading = 1 
autocmd FileType ruby,eruby let g:rubycomplete_classes_in_global = 1
autocmd FileType ruby,eruby let g:rubycomplete_rails = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-05T17:15:23.050

One thing that I have had a bit of luck with Rubymotion is YouCompleteMe and enabling tag Support. you will need a lot of ram(YCM uses ~2GB when indexing a large tag file) because the tags that rubymotion uses are about 40k tags.

The downside is that the rubymotion people don't seem to want to review pull requests and provide any feedback so I am not sure if they will add the needed things to the rake task that creates the tag files for ycm to work correctly out of the box.

To get it to work you need to set the tags files correct

`set tags=./tags;,tags;`

and then you need to setup ycm to complete off tags.

`let g:ycm_collect_identifiers_from_tags_files = 1`

you need to make the ctags file compatible with ycm as well. This pull request does that. You need to add a language field to the ctags creation and then change bridgesupport to ruby.

[pull request for that](https://github.com/weaksauce/RubyMotion/commit/7544872f5012649e644d86ada4013287366d499f)

after that you need to run rake ctags in the root of your project.

If you don't want to modify the project.rb file you could probably create your own rake task that does pretty much the same thing.

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-03-30T21:31:41.860

Yes, Vim is an awesome... text editor.

As such, it can't be expected to match any IDE's "code awareness". Furthermore, it completely relies on the community for providing more than default support for a given language. If google or the rubymotion site didn't help you to find a serious "autocompletion" solution I doubt you'll find it here.

The process explained in the blog post below sounds ok, if not very precise on the vim configuration front.

[http://rayhightower.com/blog/2013/02/12/automatic-ctags-with-rubymotion-and-vim/](http://rayhightower.com/blog/2013/02/12/automatic-ctags-with-rubymotion-and-vim/)

# jquery - jQuery函数是否必须在正文中？

> ID：15723214
> 
> 赞同：1
> 
> 时间：2013-03-30T20:35:19.630
> 
> 标签：jquery, execution

我正在尝试根据较旧的 jQuery 菜单设置动画菜单。较旧的版本，该函数与 jQuery 版本参考链接一起直接放入正文中。我遇到的问题是，该设置与我也想放在页面上的旋转横幅冲突。

实际上，目前它们不能同时运行。它们也都在不同的 jQuery 版本上运行。

我得到了一些帮助，将 jQuery 执行函数放入外部文件，但这并没有解决菜单的问题，因为必须在正文中引用 jQuery 版本和调用才能使其工作。

我之前看过 jQuery 菜单，不需要直接放在正文中。还是他们？我知道下面是一种非常糟糕的方法，因为它位于页面主体内部，而且它使用的是过时的 jQuery 版本，这就是为什么我希望更新它以使其更加稳固。

```
 <body>
       <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="jquery.easing.1.3.js"></script>
       $(document).ready(function() {
          $(function() {
              $('#hn_menu > li').bind('mouseenter',function(){
                 var $elem = $(this);
                 $elem.find('img')
                 .stop(true)
                 .animate({
                    'width':'120px',
                    'height':'120px',
                    'left':'0px'
                 },400,'easeOutBack')
              .andSelf()
              .find('.hn_wrap')
              blah blah blah
             });
          });
         </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:41:34.667

不，脚本不必 b 在正文中。当您使用`ready`事件时，脚本可以位于页面中的任何位置（当然，在加载 jQuery 库之后）。

通常，您会将脚本放在`head`标签中，而不是`body`标签中。`body`如果您希望脚本比其他资源加载得晚，或者如果它们不使用`ready`或事件，那么脚本通常只放在标签中，因此必须将脚本`load`放在它访问的元素之后。

（请注意，您发布的代码缺少`script`脚本周围的标签，因此它只会显示在页面中。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T22:03:25.147

jQuery v1.9.1 适用于所有先前版本的 jQuery，无论他们声称不推荐使用哪些方法。您甚至不需要迁移指南脚本。

例如，这个脚本有

```
 .andSelf() 
```

jQuery 表示已替换为

```
 .addBack(optional param) 
```

它可能已被替换，但 addSelf() 仍然适用于新的 1.9.1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T20:36:52.520

不，你可以把它放在`<script type="text/javascript"> </script>`标签之间的任何地方。在此之前，如果您使用的是 jQuery，则必须加载 jQuery。

# c# - 在 C# 中反序列化 JSON（从 PHP 页面接收）

> ID：15723217
> 
> 赞同：0
> 
> 时间：2013-03-30T20:35:33.583
> 
> 标签：c#, json

我想反序列化从网页接收到的 json 字符串

我正在使用此代码来获取 json 字符串

```
WebClient client = new WebClient();
string downloadString = client.DownloadString("http://www.downmasters.com/api.php"); 
```

但我不确定如何将字符串转换为数组或 C# 中的等价物，以便我可以使用它。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:37:54.187

使用[`DataContractJsonSerializer`](http://msdn.microsoft.com/en-gb/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)类。

> 将对象序列化为 JavaScript 对象表示法 (JSON) 并将 JSON 数据反序列化为对象。这个类不能被继承。

您将需要创建一些对象以对其进行序列化和反序列化，并使用不同的[`DataContract`属性](http://msdn.microsoft.com/en-GB/library/ms733127.aspx)对其进行注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T20:38:49.820

您可以使用[JSON.net](http://json.codeplex.com/)来执行此操作，这是一个使用 WebClient 的示例，就像您目前一样。

```
using Newtonsoft.Json;
using Newtonsoft.Json.Linq;

WebClient client = new WebClient();
string downloadString = client.DownloadString("http://www.downmasters.com/api.php");
var data = JsonConvert.DeserializeObject(downloadString ); 
```

我最近刚刚完成了一个使用 ASP.NET MVC 4.0 的 Web 应用程序，但在`WebClient`使用`HttpWebRequest`. 也就是说，如果您所做的只是使用 DownloadString 方法，那么 WebClient 是一个不错的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T17:36:39.603

为什么不简单地尝试 .Split(char[], stringsplitter.none)

您可以使用字符将数组拆分为所需的类型，这就是我一直这样做的方式。

# php - PHP Login - if(empty)$password 在我的代码中不起作用，为什么？

> ID：15723221
> 
> 赞同：-1
> 
> 时间：2013-03-30T20:35:56.260
> 
> 标签：php, encryption, login, md5

所以我在玩我的简单登录系统，我似乎无法弄清楚的一件事是为什么登录允许我创建一个只有用户名的帐户并将这些数据发送到我的数据库事件，尽管我指定

```
 if($_SERVER['REQUEST_METHOD'] == 'POST') {
$username = mysql_real_escape_string($_POST['username']);
$password = mysql_real_escape_string(md5($_POST['password'])); 
```

和

```
 if(empty($username)) {
      echo("Du ma fylle inn et brukernavn!");
} {
 if(empty($password)) {
      echo("Du ma fylle inn et passord!");
      } else { 
```

当我删除转义字符串中的 (md5 时，它可以工作，但是没有加密，并且密码在数据库中可见。所以反之亦然.. 有人知道我的错误或误解在哪里吗？

**QUICK SUM：它应该给出“您需要填写密码”，但是当我在字符串中解密 md5 时它不会，但是当我删除它时，它允许我。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:38:12.577

`md5`将产生一个字符串，即使输入为空。您需要检查原始输入，直接来自`$_POST`. 如果要验证输入，请始终在处理之前进行检查，因为后续处理（如您在本例中所见）可能导致非空变量，即使原始输入为空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T20:38:35.050

md5 将编码任何内容，甚至是空字符串。无论如何，这将使变量“非空”。

含义：先检查空，然后对密码进行编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T20:38:32.457

一个空字符串仍然有一个 MD5 散列，因此您可以正确检查密码是否等于某个值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T20:48:43.137

您可以在分配 md5- 之前检查该字段是否为空

```
if($_SERVER['REQUEST_METHOD'] == 'POST') 
{
    if (mysql_real_escape_string(empty($_POST['password']))) {
        // do nothing
    } 
    else 
    {
   `    $username = mysql_real_escape_string($_POST['username']);
        $password = mysql_real_escape_string(md5($_POST['password']));

        if(empty($username)) {
             echo("Du ma fylle inn et brukernavn!");
        } {
        if(empty($password)) {
             echo("Du ma fylle inn et passord!");
        } else {
        }
   } 
```

}

# php - Htaccess重定向重写不一起工作

> ID：15723222
> 
> 赞同：0
> 
> 时间：2013-03-30T20:36:27.663
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting

我想使用 Htaccess 从 url 中删除查询字符串，我使用以下代码更改了 url，但在重定向到该 url 后，我收到 404 错误。如果我只使用重写语句，那么新的 url 可以正常工作而不会出现 404 错误，但旧的 url 不会自动重定向到新的 url。

这是我正在修改的 htaccess 和 url

```
Options FollowSymLinks
Options -MultiViews
RewriteEngine on
RewriteCond %{REQUEST_URI} ^/profile\.php$
RewriteCond %{QUERY_STRING} ^user_id=([0-9]*)$
RewriteRule ^(.*)$ http://www.meenmipage.com/user/%1? [R=302,L,NC] 
```

实际网址是：

[http://www.meenmipage.com/profile.php?user_id=2](http://www.meenmipage.com/profile.php?user_id=2)

并修改为：

[http://www.meenmipage.com/user/2](http://www.meenmipage.com/user/2)

如果我删除上面的代码并像这样使用重写语句：

```
RewriteRule ^user/([^/]*)$ /profile.php?user_id=$1 [NC,L] 
```

然后新修改的url有效，旧的也有效

请告诉我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:41:11.470

我认为您需要`$`在此行的末尾删除：

```
RewriteCond %{REQUEST_URI} ^/profile\.php 
```

因为如果请求 URI 有`user_id=2`那么这个条件将不匹配

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-30T20:52:42.910

```
Try This !
-----------

Options -MultiViews
Options +FollowSymlinks
RewriteEngine on
rewritecond %{QUERY_STRING} ^user_id=([0-9]*)
rewritecond %{http_host} ^www.meenmipage.com [nc]
RewriteRule ^([0-9]+)$ //www.www.meenmipage.com?user_id=$1 [L,QSA] 
```

# scala - 如何在不丢失类型推断的情况下隐式扩展函数

> ID：15723223
> 
> 赞同：0
> 
> 时间：2013-03-30T20:36:32.300
> 
> 标签：scala, enrich-my-library

对于 DSL，我需要隐式扩展函数值。例如：

```
trait PimpedFunction[-A, +B] extends Function1[A, B] {
  def foo = 42
}

object PimpedFunction {
  implicit def pimp[A, B](f: Function1[A, B]): PimpedFunction[A, B] = 
    new PimpedFunction[A, B] {
      def apply(a: A) = f(a)
    }
} 
```

使用的函数`PimpedFunction`可以定义为：

```
def takes(f: PimpedFunction[String, Int]) = f.foo 
```

问题出在调用`takes`. 以下按预期工作：

```
takes((_: String).size) 
```

但是，如果我省略参数类型，编译将无法推断它：

```
takes(_.size) 
```

我可以更改任何内容以帮助 scalac 的推理吗？

OBS：真正的用例与此有关：[https ://gist.github.com/xeno-by/4542402](https://gist.github.com/xeno-by/4542402)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T21:12:07.123

如果您可以允许您的`takes`函数自己进行转换，它将起作用：

```
def takes(f: Function1[String, Int])(
  implicit f2pf: Function1[String,Int] => PimpedFunction[String,Int]
) = f2pf(f).foo 
```

（您可以重载`takes`以获取 PF 或常规函数）。

# javascript - 自定义跨浏览器滚动条宽度

> ID：15723229
> 
> 赞同：0
> 
> 时间：2013-03-30T20:37:27.253
> 
> 标签：javascript, jquery, html, css

我有这个 html

[http://jsfiddle.net/XjcYU/1/](http://jsfiddle.net/XjcYU/1/)

我需要将 div 滚动条宽度更改为 50px，

我知道插件`jScrollPane`，但我需要使用纯 css、js/jquery 设置滚动条宽度。

我找到了这个 CSS 解决方案[http://jsfiddle.net/2aHeE/](http://jsfiddle.net/2aHeE/)，但这不是跨浏览器。

如何制作这个跨浏览器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:17:15.160

第一小提琴有什么问题？

您可以使用 css 将宽度设置为 50 px

```
::-webkit-scrollbar {
    width: 50px; 
```

[提琴手](http://jsfiddle.net/2aHeE/211/)

# java - 关闭 1 个 jframe，多个 jframe 处于活动状态不工作

> ID：15723230
> 
> 赞同：0
> 
> 时间：2013-03-30T20:37:29.077
> 
> 标签：java, swing, jframe, dispose

我的程序在屏幕上显示一些窗口（jframe 和 jpanel）和一个主框架。当用户选择删除主框架中这些窗口之一的选项时，它应该关闭所选窗口。

我有一个数组中的那些窗口。当用户选择要关闭的窗口时，它将从数组中删除该 jframe 和它的 jpanel，它应该关闭该 jframe，但它没有。没有显示错误，当我再次运行程序时，一切都如预期的那样：已删除的帧未显示。我的结论是我在关闭 jframe 时无法正常工作，程序的其余部分都很好。

我试过了：

> windows[Frame_to_close].setDefaultCloseOperation(windows[Frame_to_close].DISPOSE_ON_CLOSE);

和

```
windows[Frame_to_close].setVisible(false); 
windows[Frame_to_close].dispose(); 
```

关闭窗口时我做错了什么吗？还有其他关闭窗口的方法（Jframe 和 Jpanel）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:40:37.587

用户将如何选择要关闭的窗口？使用下面的代码，您可以通过按下按钮关闭窗口或直接关闭窗口（在这种情况下，框架不会从列表中删除）：

```
private void createManyFrames() {
    final JFrame mainFrame = new JFrame("Stack Overflow: closing frames");
    mainFrame.setBounds(100, 100, 240, 600);
    mainFrame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    mainFrame.getContentPane().setLayout(new FlowLayout());
    final List<JFrame> frames = initializeFrames(Arrays.asList("one", "two", "three"));
    for (final JFrame frame : frames) {
        final JButton button = new JButton(frame.getTitle());
        mainFrame.getContentPane().add(button);
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(final ActionEvent e) {
                frame.dispose();
                frames.remove(frame);
            }
        });
        frame.setVisible(true);
    }
    mainFrame.setVisible(true);
}

private List<JFrame> initializeFrames(final List<String> frameNames) {
    final List<JFrame> frames = new ArrayList<JFrame>();
    for (final String frameName : frameNames) {
        final JFrame frame = new JFrame(frameName);
        frame.setBounds(480, 120 * (1 + frames.size()), 200, 100);
        final JPanel panel = new JPanel();
        panel.add(new JLabel("Label in panel in frame " + frameName + "."));
        frame.getContentPane().add(panel);
        frames.add(frame);
    }
    return frames;
} 
```

# jquery - GetJson 不会一致地返回 json 结果

> ID：15723231
> 
> 赞同：0
> 
> 时间：2013-03-30T20:37:38.577
> 
> 标签：jquery, json, cordova, jquery-mobile

使用最新的 jquery mobile (" [http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js](http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js) ) 和 jquery ( [http://code.jquery.com/jquery-1.9 .1.min.js](http://code.jquery.com/jquery-1.9.1.min.js)）和我的 pagecreate 事件大部分时间都有效，但是，如果我单击后退按钮然后尝试刷新页面，则不会显示任何内容。我可以看到使用 FireBug 发生的请求，但我不能看不到为什么页面上没有设置 json 结果。

谢谢！

```
$(document).on("pagecreate", "#checkout51", function(event, ui) {
thisPage = $(this);
loadPageContent("checkout51.html", function(data) {
    $(thisPage).prepend(data);
});
});

$(document).on("pageshow", "#checkout51", function(event, ui) {
    $.mobile.loadingMessage = "Please wait - loading coupons ...";
  var couponslist = $('#couponslist');
  $.mobile.showPageLoadingMsg();
  var url = "http://www.test.com/request.php?";
  $.getJSON(url, {
        limit: "100",
    coupon_source : "Checkout51"
    }, function (data) {
            var listContent = "";
            listContent += "<li data-role='list-divider'>Checkout51 Coupons</li>";
    $.each(data, function(index, value){
            listContent += "<li><h2><a class='ui-link-inherit' href='coupondetails.html?id=" + value.coupon_id + "'>" + value.name + "</a></h2></li>";
    });
    $('#couponslist').empty().append(listContent).listview('refresh');
   })
    .error(function() { alert("Error while request processing"); })
    .complete(function() { 
  $.mobile.hidePageLoadingMsg()
    });
}); 
```

使用它作为 HTML：

```
<div class="fixed-header" data-position="fixed" data-tap-toggle="false" data-role="header" data-theme="b">
    <a href="#" data-theme="b" class='ui-btn-left' data-icon='arrow-l'>Back</a>
    <h1>Checkout51 Coupons</h1>
    <a href="#" data-role="button" data-theme="b" data-icon="home" data-iconpos="notext"></a>
</div>
<div data-role="content" data-theme="c"><br /><ul id="couponslist" data-role="listview" role="listbox"></ul><br /></div>
<div data-role="footer" data-position="fixed" data-id="footer"><div data-role="navbar"><ul><li><a href="index.html" id="menu1" data-role="button" data-icon="home">Home</a></li>     <li><a href="search.html" id="menu2" data-role="button" data-icon="search">Search</a></li><li><a href="subscribe.html" id="menu3" data-role="button" data-icon="info">Subscribe</a></li></ul></div></div><!-- /footer --> 
```

我将不胜感激 - 这是针对 Phonegap 应用程序的，但我需要使用浏览器看到它始终如一地工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:52:52.877

`pagecreate`仅在第一次创建页面时触发一次。如果您希望每次在浏览器上加载页面时都触发一个事件，那么您必须考虑`pageshow`. 如果您想在向用户显示页面之前加载您的 json 请求，请考虑使用`pagebeforeshow`.

[在此处了解 JQM 中可用的](http://api.jquerymobile.com/category/events/)不同类型的事件。

# excel - Count by multiple criteria not working

> ID：15723239
> 
> 赞同：0
> 
> 时间：2013-03-30T20:38:20.050
> 
> 标签：excel, excel-formula

I have the below table i neeed to count the no.of.triggers that are enabled.

```
TABLE NAME OBJECT TYPE STATUS   
factory     Triggers    ENABLED 
PRODUCT     Packages    ENABLED
REFERE      Triggers    ENABLED 
```

In 2007 i tried below but they are not working what i am making mistake in this ?

```
=COUNTIFS(D:D,"Triggers",F:F,"ENABLED") 
```

I need a 2003 compatibile formula since COUNTIFS is introducted only in 2007 i tried the below query for 2003 again they also yeileded "0". clearly i am missing some thing here.

```
=SUMPRODUCT((D:D="Triggers")*(F:F="ENABLED")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:26:01.257

The COUNTIFS formula looks OK - if you get zero then it may mean you have some extra characters in those cells, like trailing or leading spaces. What does this give you?

`=COUNTIFS(D:D,"*Triggers*",F:F,"*ENABLED*")`

In Excel 2003 you can use SUMPRODUCT but not with whole columns - you need to restrict the range, e.g.

`=SUMPRODUCT((D1:D1000="Triggers")*(F1:F1000="ENABLED"))`

That one will work assuming you don't have extra characters in the cells, otherwise try

`=SUMPRODUCT(ISNUMBER(SEARCH("Triggers",D1:D1000)+SEARCH("ENABLED",F1:F1000))+0)`

None of the formulas are case-sensistive

# java - Java - What's the difference of double-clicking and running from Terminal for opening a .jar file?

> ID：15723240
> 
> 赞同：7
> 
> 时间：2013-03-30T20:38:24.833
> 
> 标签：java, jar, terminal

I am using a Java-based application (a .jar file) to access a website for online discussion. And recently I've experienced some weird difference between running the application by double-clicking (on both Mac and Ubuntu) and running `java -jar client.jar` from Terminal. When I open the client by double-clicking, it will not allow me to log in, while everything works fine if I run it from Terminal.

I know the description might be too vague, but I just wonder whether there is any general difference between these two ways of running .jar file. Thanks!

My Java environment is shown below:

```
$ java -version
java version "1.7.0_17"
Java(TM) SE Runtime Environment (build 1.7.0_17-b02)
Java HotSpot(TM) Server VM (build 23.7-b01, mixed mode) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T22:44:53.930

根据用于调用程序的方法，当前工作目录可能会改变。通过`java -jar`工作目录运行时由终端设置，通过提示容易识别。双击时，目录默认为用户的主目录。演示的快速测试：

```
public class TestWorkingDirectory { 
    public static void main(String[] args) {
        javax.swing.JOptionPane.showMessageDialog(
                null, System.getProperty("user.dir"));
    }
} 
```

假设 JAR 位于 中`/home/test/Applications`，从终端运行时它将显示此路径。双击时，它只是`/home/test`. 因此，使用这两种方法的路径可能相同（当存档位于 中时`~`），但不一定 - 尝试调试/重现异常行为时遇到困难。

# iphone - Youtube ios 提要缩略图

> ID：15723241
> 
> 赞同：0
> 
> 时间：2013-03-30T20:38:25.523
> 
> 标签：iphone, ios, objective-c, youtube-api

我正在创建一个应用程序来吸引我朋友的 youtube 提要。当我运行应用程序时，我收到一个错误：

```
2013-03-30 16:34:04.973 eastcoastdyes[15395:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSURL initWithString:relativeToURL:]: nil string parameter'
*** First throw call stack:
(0x1a38012 0x1354e7e 0x1a37deb 0xd4a49d 0xdc11e4 0x3859 0x3538fb 0x3539cf 0x33c1bb 0x34cb4b 0x2e92dd 0x13686b0 0x3014fc0 0x300933c 0x3009150 0x2f870bc 0x2f88227 0x2f888e2 0x1a00afe 0x1a00a3d 0x19de7c2 0x19ddf44 0x19dde1b 0x19927e3 0x1992668 0x298ffc 0x231d 0x2245 0x1)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellID = @"Cell Identifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellID];
    }

    NSDictionary *video = [self.videos objectAtIndex:indexPath.row];
    cell.textLabel.text = [video objectForKey:@"title"];
    cell.detailTextLabel.text = [video objectForKey:@"uploader"];

    NSURL *url = [[NSURL alloc] initWithString:[video objectForKey:@"data.items.thumbnail.hqdefault"]];
    [cell.imageView setImageWithURL:url placeholderImage:[UIImage imageNamed:@"placeholder"]];

    return cell; 
```

}

我在 NSURL *url 收到它。请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:57:44.163

您收到错误是因为您的字典为该键返回了一个 nil 对象...因此您应该首先确保您的`video`字典为您的键返回一个非零对象（字符串），`@"data.items.thumbnail.hqdefault"`然后才初始化您的 URL...

例如

```
NSString *imageURLString = [video valueForKeyPath:@"data.items.thumbnail.hqdefault"]; 
if (imageURLString) {
    NSURL *url = [[NSURL alloc] initWithString:imageURLString];
    [cell.imageView setImageWithURL:url placeholderImage:[UIImage imageNamed:@"placeholder"]];
} else {
// set imageView to something else
} 
```

# sql - Why do we use `As foo (geom)` and not `As geom`

> ID：15723248
> 
> 赞同：1
> 
> 时间：2013-03-30T20:39:02.613
> 
> 标签：sql, postgresql, postgis, postgresql-9.1

In the query below, why do we use `As foo (geom)` and not `As geom`? What does `foo()` do?

**SQL Query**

```
SELECT ST_SRID(geom) AS srid, ST_SRID(ST_SetSRID(geom, 4326)) as srid_new
FROM (
    VALUES (
        ST_GeomFromText('POLYGON((70 20, 71 21, 71 19, 70 20))', 4269)), 
        (ST_Point(1,2)
    )
) As foo (geom); 
```

Using `As geom` gives the error:

```
ERROR:  function st_srid(record) does not exist
LINE 1: SELECT ST_SRID(geom) AS srid, ST_SRID(ST_SetSRID(geom, 4326)... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T20:44:45.517

`As foo` is an alias for the subquery, and the `(geom)` attached to it is the column name in it. SQL requires an alias for every subquery. Find an example in the [manual in the chapter **Subqueries**](http://www.postgresql.org/docs/current/interactive/queries-table-expressions.html#QUERIES-SUBQUERIES).

The same goes for a `VALUES` expression used in this place. I quote [the manual here](http://www.postgresql.org/docs/current/interactive/queries-values.html):

> Syntactically, VALUES followed by expression lists is treated as equivalent to:

```
 SELECT select_list FROM table_expression 
```

# asp.net-mvc - 单页应用程序 (SPA) 主页错误

> ID：15723249
> 
> 赞同：0
> 
> 时间：2013-03-30T20:39:03.273
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, asp.net-web-api, single-page-application

我是 asp .net MVC 的新手。我正在尝试为我的新应用程序实现 SPA 模型。我在 asp .net mvc4 项目中使用 asp .net web api。我的项目中只有 api 控制器。我没有任何 MVC 控制器。

我已经从视图文件夹中删除了自动生成的视图。我在视图文件夹之外创建了一个 index.cshtml 页面。此页面是我的布局页面，其中呈现其他页面。我已将此页面设置为启动页面。而且我还注释掉了 routeconfig.cs 文件中的默认 MVC 路由。

问题是当我运行应用程序时，index.cshtml 没有呈现。我收到一条错误消息，提示“未提供此类页面 - 说明：未提供您请求的页面类型，因为它已被明确禁止。扩展名 '.cshtml' 可能不正确。”

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:58:48.257

确保保留根`Views`文件夹，并在其中创建一个名为的文件夹`Home`。将您的`Index.cshtml`文件放在`Home`文件夹中。

**不要注释掉默认的 MVC 路由。**在 MVC 中，您不能像在 WebForms 中那样直接点击视图，这就是为什么当您尝试点击`Index.cshtml`.

确保`HomeController`在根`Controllers`文件夹中有一个名为的操作`Index`，如下所示：

```
public ActionResult Index()
{
  return View();
} 
```

您的视图现在应该在您浏览时呈现，`http://localhost/Home/Index`甚至`http://localhost`默认情况下，控制器和操作将设置为 Home/Index。

# c# - 使用 LINQ 选择 XML 中的特定节点

> ID：15723251
> 
> 赞同：1
> 
> 时间：2013-03-30T20:39:30.287
> 
> 标签：c#, xml, csv

我正在编写一个加载 XML 文档并将其转换为 CSV 的函数。由于我只需要 XML 文件中的一些值，因此我试图实现的目标是仅选择我感兴趣的节点。

这是我的代码：

```
 XDocument csvDocument = XDocument.Load(tempOutput);

        StringBuilder csvBuilder = new StringBuilder(1000);

        foreach (XElement node in csvDocument.Descendants("Sample"))
        {
            foreach (XElement innerNode in node.Elements())
            {
                        csvBuilder.AppendFormat("{0},", innerNode.Value);
                    }

                    csvBuilder.Remove(csvBuilder.Length -1, 1);

                    csvBuilder.AppendLine();
                }
                csvOut = csvBuilder.ToString(); 
```

但是，通过这种方式，我选择了“示例”节点内的所有子节点。

在 XML 中，“Sample”树是：

```
<Sample Type="Object" Class ="Sample">
    <ID>1</ID>
    <Name>10096</Name>
    <Type>2</Type>
    <Rep>0</Rep>
    <Selected>True</Selected>
    <Position>1</Position>
    <Pattern>0</Pattern>
   </Sample> 
```

代码完美无缺，但我只需要选择“ID”和“Selected”并将它们的值写入 CSV 文件中。

有人能指出我正确的方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:57:08.520

在此处了解有关[Linq-to-xml 的](http://msdn.microsoft.com/en-us/library/bb387098.aspx)更多信息。您并没有*真正*利用`XObject`s的“linq-edness”

```
var samples = csvDocument.Descendants("Sample")
                         .Select(el => new {
                             Id = el.Element("ID").Value,
                             Selected = el.Elemnt("Selected").Value
                         }); 
```

这将为您创建一个`IEnumerable<T>`where`'T'`是具有属性的[匿名类型](http://msdn.microsoft.com/en-us/library/vstudio/bb397696.aspx)`Id`和`Selected`。您可以解析（`int.Parse`或`bool.Parse`） Id 和 Selected 值以确保类型安全。但是由于您只是在写一个`StringBuilder`对象，因此您可能不在乎……仅供参考。

然后可以将 StringBuilder 对象编写如下：

```
foreach (var sample in samples) {
    csvBuilder.AppendFormat(myFormattedString, sample.Id, sample.Selected);
} 
```

需要注意的是，您的匿名对象和`for-each`循环应该在同一范围内。但如果有必要，有办法解决这个问题。

与往常一样，给猫剥皮的方法不止一种。

**更新** ...在参考。评论：

```
foreach (XElement node in csvDocument.Descendants("Sample"))
{
    foreach (XElement innerNode in node.Elements())
    {
        //    this logic assumes different formatting for values
        //    otherwise, change if statement to || each comparison
        if(innerNode.Name == "ID") {
            // append/format stringBuilder
            continue;
        }

        if(innerNode.Name == "Selected") {
            // append/format stringBuilder
            continue;
        }
    }

    csvBuilder.Remove(csvBuilder.Length -1, 1);

    csvBuilder.AppendLine();
} 
```

# python - algorithm to get cycle in graph?

> ID：15723256
> 
> 赞同：3
> 
> 时间：2013-03-30T20:40:04.047
> 
> 标签：python, graph-theory, graph-algorithm, graph-traversal

If you have a graph represented as an adjacency list, how can you detect any `odd length-ed` cycles in python?

Suppose you have a graph given as input:

```
A = {
    1: [2, 4],
    2: [1, 5],
    3: [4, 5],
    4: [1, 3, 5],
    5: [2, 3, 4],
    6: []
}

V = {
    1: <node>,
    2: <node>,
    3: <node>,
    4: <node>,
    5: <node>,
    6: <node>
} 
```

`A` is a dictionary where the key is a number and the value is a list of numbers, so there is an edge between the key to all of it's values. `V` is a dictionary which maps a number to the node instance.

How can you detect if there is an odd length-ed cycle?

From the input above, there actually is one which uses nodes `3, 4, 5`.

Basically how can I get the output to be `3 4 5`?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:32:33.027

The common way to find a loop in a graph is to use a [depth-first search](http://en.wikipedia.org/wiki/Depth-first_search) algorithm. In your very case, I would mark each vertex with numbers 1 and 2, so that all neighbouring vertices have different numbers. If once you find, that there are two vertices with same mark, that means you've found a loop of odd length. Here is my brief implementation (I did not make use of `V` dictionaty, assuming `A` describes the graph without as is):

```
import sys

A = {
    1: [2, 4],
    2: [1, 5],
    3: [4, 5],
    4: [1, 3, 5],
    5: [2, 3, 4],
    6: []
}

num_vertices = len(A)
sys.setrecursionlimit(num_vertices + 2)

mark = [None] * (num_vertices + 1)
cur_path = []

def DFS(vertex, cur_mark = 1):
    mark[vertex] = cur_mark
    global cur_path
    cur_path.append(vertex)
    for neighbour in A[vertex]:
        if not mark[neighbour]:
            DFS(neighbour, 3 - cur_mark)
        elif mark[neighbour] == cur_mark:
            print 'Found a loop of odd length: ', cur_path[cur_path.index(neighbour):]
            sys.exit(0)

    cur_path = cur_path[:-1]

# Visit all connected components
for vertex in xrange(1, num_vertices + 1):
    if not mark[vertex]:
        DFS(vertex)

print 'Cycle of odd length not found' 
```

# node.js - 用户特定的新闻源 socket.io 和 node.js

> ID：15723259
> 
> 赞同：0
> 
> 时间：2013-03-30T20:40:21.560
> 
> 标签：node.js, sockets, mongodb, express, feed

我正在尝试使用 Node.js、express 和 sockets.io 创建一个新闻源。

我的问题是它`socket.on("connection", function{});`没有给你会话ID，所以我无法知道连接了哪个用户。我想知道是否有办法在会话连接时传递用户 ID。

我考虑过从客户端连接套接字，在与用户 ID 连接后立即向服务器发送消息，服务器在收到带有用户 ID 的消息后发回正确的新闻提要项目。

我想知道是否有更好/更可扩展/有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:11:20.430

如果您将授权 socket.io 请求，那么您可以过滤用户。

您必须序列化、反序列化用户对象才能使用 socket.io 访问属性

```
passport.serializeUser(function (user, done) {
    done(null, user.id);
});

passport.deserializeUser(function (id, done) {
    User.findById(id, function (err, user) {
        done(err, user);
    });
}); 
```

看看[passportSocketIO](https://github.com/jfromaniello/passport.socketio)。您可以像这样为传入的 socket.io 请求设置授权。

```
sio.set("authorization", passportSocketIo.authorize({
    key:    'express.sid',       //the cookie where express (or connect) stores its session id.
    secret: 'my session secret', //the session secret to parse the cookie
    store:   mySessionStore,     //the session store that express uses
    fail: function(data, accept) {     // *optional* callbacks on success or fail
      accept(null, false);             // second param takes boolean on whether or not to allow handshake
    },
    success: function(data, accept) {
      accept(null, true);
    }
  })); 
```

然后你可以像这样在“连接”回调中过滤掉用户。

```
sio.sockets.on("connection", function(socket){
    console.log("user connected: ", socket.handshake.user.name);

    //filter sockets by user...
    var userProperty = socket.handshake.user.property,             //property 
        // you can use user's property here.

    //filter users with specific property
    passportSocketIo.filterSocketsByUser(sio, function (user) {
      return user.property=== propertyValue;                  //filter users with specific property
    }).forEach(function(s){
      s.send("msg");
    });

  }); 
```

# java - Java方法-如果隔离变量？

> ID：15723263
> 
> 赞同：-1
> 
> 时间：2013-03-30T20:41:04.970
> 
> 标签：java, if-statement, methods

我正在制作一个程序，但我需要添加一个方法来获取公共服务的总金额，但问题在于返回变量被一个值修改，如果......但如果这个值是孤立的......这可能会发生吗？

这是代码：

```
package primer.proyecto.programado;

import javax.swing.JCheckBox;
import javax.swing.JOptionPane;

public class Main 
{

    public static int servicios()
    {
        int servicios=0;
        int servivio11=0;
        int servivio22=0;
        int servivio33=0;
        int servivio44=0;

        String msg = "Servicios:";

        JCheckBox servicio1 = new JCheckBox ("Electricidad");
        JCheckBox servicio2 = new JCheckBox ("Agua");
        JCheckBox servicio3 = new JCheckBox ("Telefono");
        JCheckBox servicio4 = new JCheckBox ("Otros");

        Object[] msgContent = {msg,servicio1,servicio2,servicio3,servicio4};

        int n = JOptionPane.showConfirmDialog(null,msgContent,
                "Title", JOptionPane.YES_NO_OPTION);

        boolean servicio1s = servicio1.isSelected();
        boolean servicio2s = servicio2.isSelected();
        boolean servicio3s = servicio3.isSelected();
        boolean servicio4s = servicio4.isSelected();

        if (servicio1s == true)
        {
            int servicio11 = Integer.parseInt(JOptionPane.showInputDialog(
                    "Favor digite el monto a pagar por el servicio: Electricidad"));
        }
        if (servicio2s == true)
        {
            int servicio22 = Integer.parseInt(JOptionPane.showInputDialog(
                    "Favor digite el monto a pagar por el servicio: Agua"));
        }
        if (servicio3s == true)
        {
            int servicio33= Integer.parseInt(JOptionPane.showInputDialog(
                    "Favor digite el monto a pagar por el servicio: Telefono"));
        }
        if (servicio4s == true)
        {
            int servicio44 = Integer.parseInt(JOptionPane.showInputDialog(
                    "Favor digite el monto a pagar por el servicio: Otro"));
        }

        servicios=servicio11+servicio22+servicio33+servicio44;

        return servicios;

    }

    public static void main(String[] args) 
    {
        servicios();    
    }
} 
```

我正在使用 netbeans 和 JavaApplication 部门......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:44:56.787

此行的所有右侧变量：

```
servicios = servicio11 + servicio22 + servicio33 + servicio44; 
```

范围仅限于以前的`if`语句，因此无法解决。您需要使它们在与您的方法相同的范围内可见`servicios`：

```
int servicio11 = 0;
if (servicio1s) {
   servicio11 = Integer.parseInt(...);
}
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T20:51:07.523

我**认为**你想要的更像是这样的：

```
int servicios = 0;

if (servicio1s == true){
    servicios += Integer.parseInt(JOptionPane.showInputDialog("Favor digite el monto a pagar por el servicio: Electricidad"));
}

if (servicio2s == true){
    servicios += Integer.parseInt(JOptionPane.showInputDialog("Favor digite el monto a pagar por el servicio: Agua"));
}

if (servicio3s == true){
    servicios += Integer.parseInt(JOptionPane.showInputDialog("Favor digite el monto a pagar por el servicio: Telefono"));
}

if (servicio4s == true){
    servicios += Integer.parseInt(JOptionPane.showInputDialog("Favor digite el monto a pagar por el servicio: Otro"));
}

return servicios; 
```

因此，如果所有 servicio 布尔值都为假，则 servicios 为 0。这是你的意图吗？

# android - 来自 MainActivity Android 的片段中的 setText

> ID：15723266
> 
> 赞同：0
> 
> 时间：2013-03-30T20:41:15.977
> 
> 标签：android, android-fragments, textview

所以我试图在我的主要活动中用一个来填充`fragment`另一个。主要活动是两者的父母。布局看起来像这样`fragment``button``fragments`

`fragMoney`包含`TextViews`需要设置的

`fragCalculate`包含`EditText`我从中获取输入以设置 fragMoney 的字段`TextViews`以及`button`计算总数的字段。

`MainActivity`，父母，是我试图做这项工作的地方。

我收到一条很长的错误消息，`null pointer exception`但我似乎无法弄清楚我哪里出错了。我冒昧地猜测这是因为我没有在某段代码之前声明某些内容。无论如何，这里是代码和 logcat。

**主要活动按钮**

```
public void calculateHandler(View view) {
    Log.v("*** DEBUG ***", "calc button");
    dailyView.setText("" + getDaily());
    Log.v("*** DEBUG ***", "getting daily");
    monthlyView.setText("" + getMonthly());
    Log.v("*** DEBUG ***", "getting month");
    annualView.setText("" + getAnnually());
    Log.v("*** DEBUG ***", "getting year");
    totalView.setText("" + getTotal());     
    Log.v("*** DEBUG ***", "getting total");
} 
```

**主要活动方式**

```
public double getDaily() {

    double price = Double.parseDouble(packPrice.getText().toString());      
    double packs = Double.parseDouble(numPacks.getText().toString());

    daily = price * packs;

    return daily;
}

public double getMonthly() {
    double price = Double.parseDouble(packPrice.getText().toString());      
    double packs = Double.parseDouble(numPacks.getText().toString());

    monthly = price * packs * 30.41;

    return monthly;
}

public double getAnnually() {
    double price = Double.parseDouble(packPrice.getText().toString());      
    double packs = Double.parseDouble(numPacks.getText().toString());   

    annually = (price * packs) * 365;

    return annually;
}

public double getTotal () {
    double price = Double.parseDouble(packPrice.getText().toString());      
    double packs = Double.parseDouble(numPacks.getText().toString());
    double years = Double.parseDouble(numYears.getText().toString());

    total = (price * packs) * 365 * years;      

    return total;
} 
```

**日志猫**

```
03-30 16:27:43.443: E/AndroidRuntime(815): FATAL EXCEPTION: main
03-30 16:27:43.443: E/AndroidRuntime(815): java.lang.IllegalStateException: Could not execute method of the activity
03-30 16:27:43.443: E/AndroidRuntime(815):  at android.view.View$1.onClick(View.java:3591)
03-30 16:27:43.443: E/AndroidRuntime(815):  at android.view.View.performClick(View.java:4084)
03-30 16:27:43.443: E/AndroidRuntime(815):  at android.view.View$PerformClick.run(View.java:16966)
03-30 16:27:43.443: E/AndroidRuntime(815):  at android.os.Handler.handleCallback(Handler.java:615)
03-30 16:27:43.443: E/AndroidRuntime(815):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-30 16:27:43.443: E/AndroidRuntime(815):  at android.os.Looper.loop(Looper.java:137)
03-30 16:27:43.443: E/AndroidRuntime(815):  at android.app.ActivityThread.main(ActivityThread.java:4745)
03-30 16:27:43.443: E/AndroidRuntime(815):  at java.lang.reflect.Method.invokeNative(Native Method)
03-30 16:27:43.443: E/AndroidRuntime(815):  at java.lang.reflect.Method.invoke(Method.java:511)
03-30 16:27:43.443: E/AndroidRuntime(815):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-30 16:27:43.443: E/AndroidRuntime(815):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-30 16:27:43.443: E/AndroidRuntime(815):  at dalvik.system.NativeStart.main(Native Method)
03-30 16:27:43.443: E/AndroidRuntime(815): Caused by: java.lang.reflect.InvocationTargetException
03-30 16:27:43.443: E/AndroidRuntime(815):  at java.lang.reflect.Method.invokeNative(Native Method)
03-30 16:27:43.443: E/AndroidRuntime(815):  at java.lang.reflect.Method.invoke(Method.java:511)
03-30 16:27:43.443: E/AndroidRuntime(815):  at android.view.View$1.onClick(View.java:3586)
03-30 16:27:43.443: E/AndroidRuntime(815):  ... 11 more
03-30 16:27:43.443: E/AndroidRuntime(815): Caused by: java.lang.NullPointerException
03-30 16:27:43.443: E/AndroidRuntime(815):  at com.example.smokin4tomsullivan.MainActivity.getDaily(MainActivity.java:162)
03-30 16:27:43.443: E/AndroidRuntime(815):  at com.example.smokin4tomsullivan.MainActivity.calculateHandler(MainActivity.java:199)
03-30 16:27:43.443: E/AndroidRuntime(815):  ... 14 more 
```

As always thank you everyone for any help given

**Update Note**

ok so after debugging it appears this line of code:

`double price = Double.parseDouble(packPrice.getText().toString());` is giving me the trouble. It's an `EditText` field in the `CalcFrag` set to take the type `numDecimals`, to which at this run i entered 8.7 Any ideas?

**2nd Update** This is the code that initialized packPrice, its in onCreate

```
EditText packPrice = (EditText) findViewById(R.id.per_pack_Id); 
```

**3rd Update** this is the code I am running with log.v also see above for modified calcButton

```
public double getDaily() {
    Log.v("*** DEBUG ***", "running getDaily");
    EditText packPrice = (EditText) findViewById(R.id.per_pack_Id);
    Log.v("*** DEBUG ***", "initialized packPrice");
    double price = Double.parseDouble(packPrice.getText().toString());
    Log.v("*** DEBUG ***", packPrice.getText().toString());
    String test = ("" + price);
    Log.v("*** DEBUG ***", test);
    double packs = Double.parseDouble(numPacks.getText().toString());
    String test1 = ("" + packs);
    Log.v("*** DEBUG ***", test1);

    daily = price * packs;

    return daily;
} 
```

When I run it before it crashes log.v spits out this

```
03-30 17:34:15.883: V/*** DEBUG ***(1166): calc button
03-30 17:34:15.883: V/*** DEBUG ***(1166): running getDaily
03-30 17:34:15.893: V/*** DEBUG ***(1166): initialized packPrice
03-30 17:34:15.893: V/*** DEBUG ***(1166): 9.9 <-- the values I entered
03-30 17:34:15.893: V/*** DEBUG ***(1166): 9.9 <-- the values I entered 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:46:53.310

The exception seems pretty clear to me, either `packPrice` or `numPacks` are null or the return from `getText` is null within your `getDaily` method.

You need to figure out which portion of the call is in fact null and work backwards from that.

# php - Creating a bash file with variables with PHP and phpseclib

> ID：15723268
> 
> 赞同：0
> 
> 时间：2013-03-30T20:41:33.803
> 
> 标签：php, bash, variables, cat, phpseclib

I need to create a bash file with PHP using the phpseclib library. This is the code I am using now:

```
 $ssh->exec("cat > $sPath$sSavingCode <<EOF
screen -dmS $1 java -Xincgc -Xmx200M -jar craftbukkit-1.4.7.jar nogui
        "); 
```

The code works, and the file saves, but it skips the "$1". instead, it makes a file with two spaces between -dmS and java.

How can I make it so the $1 is written to the bash file?

Thanks

EDIT

This is the whole function:

```
 {
        $sPath = "minecraft/servers/".$user."/";
        $sSavingCode = "start.sh";
        $ssh->exec("cat > $sPath$sSavingCode <<EOF
screen -dmS $1 java -Xincgc -Xmx200M -jar craftbukkit-1.4.7.jar nogui
        ");
    } 
```

$sPath and $sSavingCode are PHP variables, and the $1 is a bash variable that needs to be in the script.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T20:56:52.363

Why not assigning your command to a simple variable?

```
 $command = ' screen -dmS \$1 java -Xincgc -Xmx200M -jar craftbukkit-1.4.7.jar nogui'

    $ssh->exec("cat > $sPath$sSavingCode <<EOF
$command
        "); 
```

# arrays - Copying the first N keys and values of a Hash of array

> ID：15723270
> 
> 赞同：4
> 
> 时间：2013-03-30T20:41:46.000
> 
> 标签：arrays, perl, hash, subroutine

I have a hash of arrays.

```
%HoA = (
    'C1' =>  ['1', '3', '3', '3'],
    'C2' => ['3','2'],
    'C3' => ['1','3','3','4','5','5'],
    'C4'  => ['3','3','4'],
    'C5' => ['1'],
); 
```

I would like to write a subroutine that returns a "sub copy" hash of arrays that contains the first N keys (and their values) of the original hash of arrays.

Something like this

```
my %HoA2 = new_partition(\%HoA, 3); 
```

And it returns a new HoA data structure:

```
%HoA = (
    'C1' =>  ['1', '3', '3', '3'],
    'C2' => ['3','2'],
    'C3' => ['1','3','3','4','5','5'],
 ); 
```

Is there a way to do this by scratch without using a module?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T20:46:20.653

There are no "first N elements", as the order of hash keys is not defined and thus, cannot be relied upon.

If you want any three elements instead of first three, you could use

```
%HoA = @HoA{ ( keys %HoA )[0..2] }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T21:13:43.963

As has been correctly stated, the order of elements in a hash is undefined. But if you can impose your own order on the elements, then it is simple enough to extract the elements that you require:

```
my %HoA = (
    'C1' => ['1', '3', '3', '3'],
    'C2' => ['3','2'],
    'C3' => ['1','3','3','4','5','5'],
    'C4' => ['3','3','4'],
    'C5' => ['1'],
);

# Use an array slice to grab the first 3 keys from a sorted list of %HoA keys.
# Use map to create a new hash that contains the keys and the values from the
# original hash:
my %HoA2 = map { $_ => $HoA{$_} } (sort keys %HoA)[0..2];

# Alternatively, specify the exact keys that you require:
my %HoA3 = map { $_ => $HoA{$_} } qw(C1 C2 C3);

# { C1 => [1, 3, 3, 3], C2 => [3, 2], C3 => [1, 3, 3, 4, 5, 5] } 
```

**Update**

As [Borodin](https://stackoverflow.com/users/622310/borodin) points out, the above method copies references, so changes to one hash will be reflected in the other:

```
push @{$HoA{C1}}, 9;

# %HoA2 and %HoA3:
# { C1 => [1, 3, 3, 3, 9], C2 => [3, 2], C3 => [1, 3, 3, 4, 5, 5] } 
```

To prevent that, copy the array itself:

```
my %HoA4 = map { $_ => [@{ $HoA{$_} }] } qw(C1 C2 C3); 
```

# macos - 与子进程共享 Mach 端口

> ID：15723273
> 
> 赞同：9
> 
> 时间：2013-03-30T20:42:12.593
> 
> 标签：macos, ipc, mach

我正在比较 Mac OS X 上可用的不同 IPC 机制（管道、套接字、System V IPC 等），我想看看 Mach 端口与更高级别的替代方案相比如何。但是，我遇到了一个非常基本的问题：跨进程（特别是跨父进程和子进程）获得对端口的发送权限。

与文件描述符不同，[端口通常不会转移到派生进程](http://lists.apple.com/archives/darwin-kernel/2002/Dec/msg00063.html)。这意味着必须建立一些其他的传输方式。我能找到的关于这个的唯一相关页面就是[这个](http://fdiv.net/2011/01/14/machportt-inter-process-communication)，他们在更新中声明他们的方法不再有效并且永远不能保证，即使该方法是[由苹果工程师在 2009 年提出的](http://lists.apple.com/archives/darwin-dev/2009/Jan/msg00072.html)。（这意味着替换引导端口，现在这样做会破坏 XPC。）他们建议的替换使用不推荐使用的函数，因此这不是一个非常吸引人的解决方案。

此外，我喜欢旧解决方案的一件事是端口在使用它的进程之间仍然非常私密。不需要广播端口的存在，就像管道（来自`pipe`调用）一旦分叉就可以工作。（如果有其他解决方案，我可能会接受它，但这有点烦人。）

那么，如何将发送权从父进程传递到 Mach 端口到子进程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-04T18:12:32.167

`bootstrap_register`已弃用但`bootstrap_check_in`不是，并且可用于注册您的端口，以后可以使用`bootstrap_look_up`. （不幸的是，这仍然不能提供您正在寻找的隐私）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-04T14:00:56.190

推荐的解决方案是根本不直接使用 Mach IPC，而是将您的子进程实现为 XPC 服务，在这种情况下，您可以使用将在后台使用 Mach IPC 的 XPC API，但您不必处理任何细节。您有一个简单的 API 可以在父级中发送 XPC 消息，还有一个简单的 API 可以在客户端中接收 XPC 消息，这也可以轻松地传回回复。该系统将为您处理所有困难的部分。

[https://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingXPCServices.html](https://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingXPCServices.html)

如果您不能使用 XPC API，请记住，当您注册服务时`bootstrap_check_in()`（不推荐使用），它不会是私有的，但如果您在用户空间进程中这样做，它将对您的登录名私有session：root 进程看不到，其他用户的进程也看不到。但是，如果您在根进程中执行此操作，则所有会话都可以看到它。

但请注意，您可以控制谁可以向您发送 IPC 消息，谁不可以。`mach_msg_audit_trailer_t`您可以在接收到 mach 消息时请求 a 。这样您就可以访问`audit_token_t`发件人的。并使用`audit_token_to_pid()`您可以获得`pid_t`发件人的信息。正如您知道孩子的 PID 一样，您可以简单地忽略所有消息（将其传递`mach_msg_destroy()`以避免泄漏资源），除非消息是由您的子进程发送的。所以你不能避免你的端口是可发现的，但是你可以避免你的子进程以外的任何进程都可以使用这个端口。

最后但并非最不重要的一点是，您可以给您的端口一个随机名称，毕竟只有您的子进程需要知道它，所以您可以在父进程中动态生成一个名称并将其传递给您的子进程，即如果软件扫描端口，则可以看到您的端口，但大多数软件无论如何都只使用硬编码名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T18:17:04.273

您可能会尝试的一件事（尽管这是一个严重的黑客攻击）是将异常端口作为继承机制劫持。将自定义端口设置为父级的异常端口，分叉子级，让子级从其异常端口获取自定义端口，将其任务端口发送给父级，父级重置其异常端口，重置子级的异常端口，然后然后两人从那里通过通信渠道继续前进。见`task_set_exception_ports()`。

# ruby-on-rails - 允许用户在公共和私人档案之间进行选择。在视图中显示此内容的更好方法？

> ID：15723274
> 
> 赞同：0
> 
> 时间：2013-03-30T20:42:19.627
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, radio-button

我这样做是为了让用户可以选择允许他们的个人资料公开或只允许注册用户。

以下是我采取的步骤：

```
rails g migration AddIs_publicToUsers is_public:boolean
rake db:migrate 
```

我的数据库中有 :is_public to default=> true

然后我将它添加到 user.rb 模型中

```
attr_accessible :is_public 
```

现在我正在尝试创建视图，但使用单选框而不是复选框会更好吗？

```
<%= f.label :is_public, "Set Profile as Private" %>
      <%= f.check_box :is_public, :checked => false %> 
```

上面的问题是，在用户将他们的个人资料检查为私有并返回该页面后，它不会保持选中状态，这意味着用户无法再次公开他们的个人资料。

最后，如何确保 is_public 指的是未登录用户与登录用户？例如，如果 is_public 为 true，则包括已登录和未登录在内的所有人都可以查看个人资料。但是，如果 is_public 为 false，则只有网站的登录用户才能查看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:06:03.200

你的问题真的是多个问题合二为一。

### 单选与复选框

鉴于这似乎是具有默认值的强制性和二元选择，单选按钮将是您的最佳选择。作为提示，请确保您的标签设置正确，以便用户可以单击标签，而不必用鼠标（很小）找到单选按钮本身。

### 单选按钮未更新

如果表单提交后单选按钮没有更新，则用户的输入在某处丢失了。检查提交的参数以查看控制器是否正在接收它们，然后确保将它们转换为保存的记录。如果记录正在更新，请确保您的单选按钮反映了表单本身中的数据库值。

### 登录用户与未登录用户

我的建议是在配置​​文件控制器上创建一个`before_filter`，它检查 的值`is_public`，检查用户是否已登录，然后将未经身份验证的用户重定向到您喜欢的任何地方。

# arrays - 如何在 x86 汇编代码中使用数组来替换单词的字母？

> ID：15723276
> 
> 赞同：-1
> 
> 时间：2013-03-30T20:42:46.010
> 
> 标签：arrays, assembly, x86, intel

大家好，所以我正在从事一项涉及装配中数组的任务。我需要让用户输入一个数字，然后清除屏幕。之后，第二个玩家尝试猜测这个词。我做了所有这些，但每次第二个玩家尝试猜测时，我也必须显示一个提示。例如，如果我输入了单词 hello，当第二个玩家尝试猜测时，程序会显示 h!l!o。我已经尝试过了，但无法让它工作。任何帮助将不胜感激，谢谢。

```
.data

chose:
    .ascii "Enter the Secret Word\n"
chose_length:
    .int 22

lets_play_response:
    .ascii "Try to Guess the Word Entered\n"
l_p_response_length:
    .int 30 

wrong_guess:
    .ascii "Incorrect Guess, Try Again\n"
wrong_guess_length:
    .int 27

correct:
    .ascii "Correct Guess, Good Job\n"
correct_length:
    .int 24

Screen_Clearer:
    .ascii "\x1B[H\x1B[2J"          
Screen_Clearer_length:              
    .int 11

letter:                                             
    .space 15                       
guess:
    .space 15                       

.text
.global _start

_start:
mov $chose, %ecx                
mov chose_length, %edx          
mov $4, %eax                    
mov $1, %ebx                    
int $0x80                       

mov $letter, %ecx               
mov $15, %edx                   
mov $3, %eax                    
mov $0, %ebx                    
int $0x80                       

call Screen_Clear               

mov $lets_play_response, %ecx   
mov l_p_response_length, %edx   
mov $4, %eax                    
mov $1, %ebx                    
int $0x80                       

# Method to Print Word With Every Second Letter Replaced With ! 
# This is the area with the problems everything else works

mov $0, %edi

Loop:
    cmp $4, %edi
    jg End 

    mov $33, letter (%edi)
    add $1, %edi
    jmp Loop

End:    
    mov $letter, %ecx
    mov $4, %eax
    mov $1, %ebx
    ret

# End of Method

call GuessLoop                  

mov $1, %eax                    
int $0x80                   

GuessLoop:                          
    mov $guess, %ecx                
    mov $15, %edx                   
    mov $3, %eax                    
    mov $0, %ebx                    
    int $0x80                       

mov guess, %ecx                 
mov letter, %edx                
cmp %ecx, %edx                  
jne Incorrect                   
je Correct                      

Incorrect:                          
    mov $wrong_guess, %ecx          
    mov wrong_guess_length, %edx    
    mov $4, %eax                    
    mov $1, %ebx                    
    int $0x80                       

    jmp GuessLoop                   

Correct:                            
    mov $correct, %ecx              
    mov correct_length, %edx        
    mov $4, %eax                    
    mov $1, %ebx                    
    int $0x80                       
    ret                             

# Method That Clears the Screen #
Screen_Clear:
    mov $Screen_Clearer, %ecx
    mov Screen_Clearer_length, %edx
    mov $4, %eax
    mov $1, %ebx
    int $0x80
    ret
# End of Method to Clear Screen 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:59:33.757

如果你要使用 Assembly，你需要了解[Addressing Modes](http://en.wikipedia.org/wiki/Addressing_mode)，[Addressing Modes on Google](https://www.google.com/search?client=opera&q=memory%20addressing%20modes%20assembly&sourceid=opera&ie=utf-8&oe=utf-8&channel=suggest)

在此示例中，我使用 [Base + Index] 模式。您将需要一个变量来保存您的提示字符串。这不是 AT&T 语法，但它会给你的想法

```
%define sys_exit    1
%define sys_write   4
%define sys_read    3
%define stdin       0
%define stdout      1

SECTION .bss    
hint        resb    15
letter      resb    15
leter_len   equ $ - letter

SECTION .text
global _start
_start:

    mov     ecx, letter
    mov     edx, leter_len
    mov     ebx, stdin
    mov     eax, sys_read
    int     80H

    mov     esi, hint
    mov     edi, letter
    xor     ecx, ecx
    dec     eax

.MakeHint:
    mov     dl, byte [edi + ecx]        ; get byte from pointer + index
    cmp     dl, 10                      ; is it linefeed
    je      .ShowIt

    mov     byte[esi + ecx], dl         ; move byte into hint buffer
    inc     ecx                         ; increase index
    cmp     ecx, eax                    ; at the end?
    je      .ShowIt
    mov     byte[esi + ecx], 33         ; move ! to next index
    inc     ecx                         ; increase index
    cmp     ecx, eax                    ; at end?
    jne     .MakeHint

.ShowIt:
    mov     ecx, hint
    mov     edx, leter_len
    mov     ebx, stdout
    mov     eax, sys_write 
    int     80H

    mov     eax, sys_exit                
    xor     ebx, ebx                      
    int     80h 
```

# firebase - 为什么我的 Firebase 'child_added' 事件出现乱序？

> ID：15723278
> 
> 赞同：6
> 
> 时间：2013-03-30T20:43:06.410
> 
> 标签：firebase

我在同一路径上有 2 个“限制”查询。我首先加载一个“limit(1)”，然后再加载一个“limit(50)”。

当我加载第二个查询时， child_added 事件不会按顺序触发。相反，列表中的最后一项（limit(1) 返回的项）首先被触发，然后所有其他项按顺序触发，如下所示：

```
**Limit 1:**
new Firebase(PATH).limit(1).on('child_added', ...) 
Message 5  

**Limit 2:**
new Firebase(PATH).limit(50).on('child_added', ...) 
Message 5 
Message 1 
Message 2 
Message 3 
Message 4 
```

我很困惑为什么在第二次限制操作中首先调用“消息 5”。为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-30T20:58:41.783

我知道这可能看起来很奇怪，但这实际上是预期的行为。

为了保证本地事件可以在不先与服务器通信的情况下立即触发，Firebase 不保证始终按排序顺序调用 child_added 事件。

如果这令人困惑，请这样想：如果您根本没有互联网连接，并且您设置了一个 limit(50)，然后在该引用上调用 push()，您是否希望立即触发一个事件. 但是，当您重新连接到服务器时，可能会发现服务器上在您推送的项目之前还有其他项目，然后将在您添加的事件之后触发它们的事件。在您的示例中，问题与本地缓存的数据有关，而不是与本地客户端写入的数据有关，但同样的原则也适用。

有关为什么事情需要以这种方式工作的更详细示例，请想象 2 个客户 A 和 B：

1.  离线时，客户端 A 调用 push() 并设置一些数据
2.  在线时，客户端 B 添加一个 child_added 监听器来读取消息
3.  客户端 B 然后调用 push()。它推送的消息会立即在本地触发 child_added 事件。
4.  客户端 A 重新联机。Firebase 同步数据，客户端 B 会为该数据触发 child_added 事件。

现在，请注意，即使客户端 A 添加的消息在列表中排在第一位（因为它具有较早的时间戳），该事件也会在第二个触发。

如您所见，您不能总是依靠事件顺序来反映 Firebase 子项的正确排序顺序。

但别担心，你仍然可以获得你想要的行为！如果您希望数据按排序顺序显示，而不是按事件到达客户端的顺序显示，您有两种选择：

**1）（天真的方法）**使用“值”事件而不是 child_added，并在每次使用 forEach 触发时重新绘制整个项目列表。值事件只会触发完整的数据集，因此 forEach 将始终按顺序枚举所有事件。但是这种方法有几个缺点：（1）值事件在从服务器加载初始状态之前不会触发，因此如果应用程序在“离线模式”下启动，直到可以连接网络，它才会起作用已确立的。(2) 它低效地为每次更改重新绘制所有内容。

**2) （更好的方法）**在 on() 的回调中使用 prevChildName 参数。除了快照之外，当项目按排序顺序放置时，on() 的回调会在查询中传递上一个子项的名称。这允许您以正确的顺序呈现子级，即使事件被无序触发。请参阅：[https ://www.firebase.com/docs/javascript/firebase/on.html](https://www.firebase.com/docs/javascript/firebase/on.html)

请注意，prevChildName 仅给出查询中的前一个孩子，而不是整个 Firebase 位置。因此，查询开头的孩子的 prevChildName 将为 null，即使在它之前的服务器上有一个孩子。

我们的排行榜示例展示了一种操作 DOM 以确保以正确顺序呈现事物的方法。请参阅： [https ://www.firebase.com/tutorial/#example/leaderboard](https://www.firebase.com/tutorial/#example/leaderboard)

# php - 尝试使用另一个表中的值搜索一个表

> ID：15723281
> 
> 赞同：1
> 
> 时间：2013-03-30T20:43:51.650
> 
> 标签：php, sql

我正在尝试使用 SQL 数据库在 PHP 中编写查找工具。

```
$sql="SELECT  
         ID, 
         switch, 
         vlan, 
         circuit_id 
      FROM vlan 
      WHERE switch 
      LIKE LOWER('%" . $name .  "%') OR vlan='" . $name ."' 
      ORDER BY vlan"; 
```

然后再往下，我将结果放入变量中：

```
while($row=mysql_fetch_array($result)){
      $switch  =$row['switch'];
      $vlan=$row['vlan'];
      $circuitID=$row['circuit_id'];
      $ID=$row['ID']; 
```

我想要做的是获取交换机回复并使用它在名为 router 的不同表上执行另一个查询并返回该信息。

我已经搜索了几天，我所有的搜索都在这里结束了，但似乎不太合适。我感谢您提供的任何帮助。

**更新** 有了一些很好的答案，我终于得到了这个工作。这是我的做法。谢谢您的帮助。

```
while($row=mysql_fetch_assoc($result)){
      $switch  =$row['switch'];
      $vlan=$row['vlan'];
      $circuitID=$row['circuit_id'];
      $ID=$row['ID'];
      $sql2 = "SELECT IPAddress FROM router 
                WHERE switch LIKE '%".$switch."%'
                LIMIT 1";         
      $result2 = mysql_query($sql2);
      $row2=mysql_fetch_array($result2);
      $IPAddress = $row2['IPAddress']; 
```

对于更有经验的人来说可能真的很难看，但它确实有效。再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:51:00.443

How many results do you expect? If there's more than one result, you might need to point which row exactly you want to take. Since it's fetch_array, your $row['switch'] or $switch value is still an array. var_dump it for keys and use the key, i.e.

```
SELECT `col` FROM `router` WHERE `switch` = '$switch[1]' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:45:14.363

It would be highly inefficient to run a secondary lookup query in a loop.

What you want is a simple `JOIN` between your two tables based on the `switch` field. What this will do is bring the linked rows in your `router` table alongside the rows in your `vlan` table where values in the `switch` column match up:

```
$sql = '
    SELECT   a.id, a.switch, a.vlan, a.circuit_id, b.ipaddress
    FROM     vlan a
    JOIN     router b ON a.switch = b.switch
    WHERE    a.switch LIKE "%' . strtolower($name) . '%" OR vlan = "' . $name . '"
    ORDER BY a.vlan'; 
```

Then in your same fetch loop, you'll be able to access the linked values from your `router` table without having to run extra database calls:

```
while($row=mysql_fetch_array($result)){
     $switch  =$row['switch'];
     $vlan=$row['vlan'];
     $circuitID=$row['circuit_id'];
     $ID=$row['ID'];
     $ipaddress = $row['ipaddress'];
} 
```

# jquery - 数据表：服务器处理后分页不更新

> ID：15723282
> 
> 赞同：-1
> 
> 时间：2013-03-30T20:43:54.813
> 
> 标签：jquery, jquery-datatables

我正在使用 Datatables 在我正在构建的 Web 应用程序上显示大量信息。但是，即使所有过滤、搜索等工作正常，我的分页也没有更新。似乎认为它只有 1 页，即使我可以始终从服务器获取更多数据。这是本机应该发生的事情，还是每次数据更改时我都需要更新我的分页或重绘它？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-01T13:50:31.187

昨天修复了这个，打算早点更新。服务器代码存在问题，其中没有为总记录值带回正确的行数。

# synchronization - Google Drive SDK - check etag when uploading/synchronizing

> ID：15723284
> 
> 赞同：1
> 
> 时间：2013-03-30T20:44:12.023
> 
> 标签：synchronization, google-drive-api, data-synchronization

I'm trying to implement a file synchronization between a local folder and a distant Google Drive. The classic problem is when some modifications are made on both sides simultaneously. So when I update a file locally, I have to make sure file has not been modified on Google Drive before performing the upload so that I can manage conflicts. Regarding Google Drive SDK, I have multiple options to detect that:

*   Download the file metadata just before uploading to check that etag has not changed since last upload.
*   Consume a changes feed periodically and check file etags in a de-correlated way.

Google seems to privilege the second option. But with both of them, there is no way to be sure that file has not been modified at the time of upload. Basically, I need an atomic upload operation which:

1.  Checks that etag is the same as last update. If not throws an error.
2.  If ok, updates the uploaded file

Is there any way to do this?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:41:50.743

If you add and `If-Match` to your HTTP headers on your PUT requests, it should be rejecting outdated versions and respond with error.

```
If-Match: "S0wCTlpIIip7ImA0X0QI" 
```

# mysql - 按行增量选择

> ID：15723287
> 
> 赞同：0
> 
> 时间：2013-03-30T20:44:43.663
> 
> 标签：mysql, sql

我有一个像这样的 MySQL 数据库：

```
ID | Twin | Tloss
0  |  300 | 250     #first entry 
1  |  301 | 250     #win;  score 1 - 0
2  |  302 | 250     #win;  score 2 - 0
3  |  302 | 251     #lose: score 2 - 1
4  |  303 | 251     #win;  score 3 - 1 
5  |  304 | 251     #end of match1 : Win  4 - 1
6  |  304 | 252     #lose; score 0 - 1
7  |  304 | 253     #lose; score 0 - 2
8  |  304 | 254     #lose; score 0 - 3 
9  |  304 | 255     #end of match2 : Lose 0 - 4
10 |  304 | 256     #lose; score 0 - 1
11 |  305 | 253     #win;  score 1 - 1
12 |  306 | 254     #win;  score 2 - 1 
13 |  306 | 255     #lose; score 2 - 2
14 |  307 | 255     #win;  score 3 - 2 
15 |  307 | 256     #end of match3 : Draw 3 - 3

.... 
```

我想选择与比赛编号“n”对应的所有ID，考虑到一场比赛只要他赢4次或输4次就结束，因为每场比赛的最大轮数为6，所以可以平局。

自 1 个月以来，我经常使用 SQL，但我真的迷失了这一点。

有人可以帮助我吗？

提前谢谢你，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:46:16.293

我假设上面的一些数据被破坏了（记录 11-15，字段 tloss；记录 5 应该是 Win 4 - 1）。我也不知道数字 300 和 250 是什么以及它们在表格中的变化。有了这些假设，您可能想要这个未经测试的 SQL：

（根据 GordonLinoff 的反馈修改）

```
SELECT @matchno := @matchno + 1 AS matchno
FROM (SELECT @matchno := 0) mn,
     (SELECT ID, Twin, Tloss, 
             IF((Twin - @twin) = 4
             OR (Tloss - @tloss) = 4
             OR ((Twin - @twin) = 3 AND (Tloss - @tloss) = 3),
                @twin := Twin AND @tloss := Tloss,
                0)
      FROM   matches, (SELECT @twin := 300, @tloss := 250) AS base
      WHERE  (Twin - @twin) = 4
      OR     (Tloss - @tloss) = 4
      OR     ((Twin - @twin) = 3 AND (Tloss - @tloss) = 3)
      ORDER BY ID
     ) endmatches 
```

# jython - 使用 Grinder API 通过 HTTP PUT 请求发送表单数据

> ID：15723289
> 
> 赞同：0
> 
> 时间：2013-03-30T20:44:46.767
> 
> 标签：jython, grinder

我正在尝试使用[Grinder](http://grinder.sourceforge.net/)复制以下成功的 cURL 操作。

```
curl -X PUT -d "title=Here%27s+the+title&content=Here%27s+the+content&signature=myusername%3A3ad1117dab0ade17bdbd47cc8efd5b08" http://www.mysite.com/api 
```

这是我的脚本：

```
from net.grinder.script import Test
from net.grinder.script.Grinder import grinder
from net.grinder.plugin.http import HTTPRequest
from HTTPClient import NVPair
import hashlib

test1 = Test(1, "Request resource")
request1 = HTTPRequest(url="http://www.mysite.com/api")
test1.record(request1)
log = grinder.logger.info
test1.record(log)
m = hashlib.md5()

class TestRunner:
    def __call__(self):
        params = [NVPair("title","Here's the title"),NVPair("content", "Here's the content")]
        params.sort(key=lambda param: param.getName())
        ps = ""
    for param in params:
            ps = ps + param.getValue() + ":"
        ps = ps + "myapikey"
        m.update(ps)
        params.append(NVPair("signature", ("myusername:" + m.hexdigest())))
        request1.setFormData(tuple(params))
        result = request1.PUT() 
```

测试运行正常，但似乎我的脚本实际上并没有将任何`params`数据发送到 API，我不知道为什么。没有生成错误，但我从 API 收到 401 Unauthorized 响应，表明成功的 PUT 请求到达它，但显然没有签名请求被拒绝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:30:47.423

这不完全是一个答案，更多的是我想出的解决方法，我决定发布这个问题，因为这个问题还没有收到任何回复，它可能会帮助其他任何试图实现同样目标的人。

解决方法基本上是使用 httplib 和 urllib 模块来构建和发出 PUT 请求，而不是使用 HTTPClient 模块。

```
import hashlib
import httplib, urllib

....

params = [("title", "Here's the title"),("content", "Here's the content")]
params.sort(key=lambda param: param[0])
ps = ""
for param in params:
    ps = ps + param[1] + ":"
ps = ps + "myapikey"
m = hashlib.md5()
m.update(ps)
params.append(("signature", "myusername:" + m.hexdigest()))

params = urllib.urlencode(params)
print params
headers = {"Content-type": "application/x-www-form-urlencoded"}
conn = httplib.HTTPConnection("www.mysite.com:80")
conn.request("PUT", "/api", params, headers)
response = conn.getresponse()
print response.status, response.reason
print response.read()
conn.close() 
```

[（基于本](http://www.jython.org/docs/library/httplib.html)文档页面底部的示例。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T01:26:38.610

您必须参考 Grinder 脚本库中的多表单发布示例，但将 Post 更改为 Put。这个对我有用。

文件 = ( NVPair("self", "form.py"), ) 参数 = ( NVPair("run number", str(grinder.runNumber)), )

```
 # This is the Jython way of creating an NVPair[] Java array
    # with one element.
    headers = zeros(1, NVPair)

    # Create a multi-part form encoded byte array.
    data = Codecs.mpFormDataEncode(parameters, files, headers)
    grinder.logger.output("Content type set to %s" % headers[0].value)

    # Call the version of POST that takes a byte array.
    result = request1.PUT("/upload", data, headers) 
```

# perl - How to pass whole file to perl script?

> ID：15723293
> 
> 赞同：0
> 
> 时间：2013-03-30T20:45:17.363
> 
> 标签：perl, stdin

I want to have a Perl script that receives a file and do some computation based on it.

Here is my try:

Perl.pl

```
#!/usr/bin/perl

use strict;
use warnings;

my $book = <STDIN>;

print $book; 
```

Here is my execution of the script:

```
./Perl.pl < textFile 
```

My script only prints the first line of textFile. Who can I load all textFile into my variable $book?

I want the file to be passed in that way, I do not want to use Perl's open(...)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T20:48:14.727

Assigning a value from a file handle to a scalar pulls it one line at a time.

You can either:

*   use a `while` loop to append the lines one by one until there are none left *or*
*   set `$/` (to `undef`) to change your script's idea of what constitutes a line. There is an example of the latter in [perldoc perlvar](http://perldoc.perl.org/perlvar.html#Variables-related-to-filehandles) (read it as it explains best practises for changing it).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T02:07:29.793

Also you can use `Path::Class` for easy. It is a wrapper for many file manipulation modules.

For your purpose:

```
#! /usr/bin/perl
use Path::Class qw/file/;

my $file = file(shift @ARGV);
print $file->slurp; 
```

You can run it by:

```
./slurp.pl textFile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T03:41:27.910

The answer you're looking for is in the Perl FAQ.

[How can I read in an entire file all at once?](http://perldoc.perl.org/5.12.3/perlfaq5.html#How-can-I-read-in-an-entire-file-all-at-once?)

# python - "SyntaxError: non-keyword arg after keyword arg" Error in Python when using requests.post()

> ID：15723294
> 
> 赞同：8
> 
> 时间：2013-03-30T20:45:21.203
> 
> 标签：python, post, arguments

```
response = requests.post("http://api.bf3stats.com/pc/player/", data = player, opt) 
```

After running this line in the python IDLE to test things i encounter the syntax error: non-keyword arg after keyword arg.

Don't know whats going here.

`player` and `opt` are variables that contain a one word string.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-30T20:50:16.397

Try:

`response = requests.post("http://api.bf3stats.com/pc/player/", opt, data=player)`

You cannot put a non-keyword argument after a keyword argument.

Take a look at the docs at [http://docs.python.org/2.7/tutorial/controlflow.html?highlight=keyword%20args#keyword-arguments](http://docs.python.org/2.7/tutorial/controlflow.html?highlight=keyword%20args#keyword-arguments) for more info.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-30T20:52:01.527

It should be something like this:

```
response = requests.post("http://api.bf3stats.com/pc/player/", data=player, options=opt) 
```

Because you can not pass a non-keyword argument (`opt`) after a keyword argument (`data=player`).

# machine-learning - 在 Weka 上绘制趋势

> ID：15723295
> 
> 赞同：2
> 
> 时间：2013-03-30T20:45:27.807
> 
> 标签：machine-learning, weka, polyline

有谁知道我可以自动为 WEKA 中的可视化输出绘制“趋势”线的方法？（见图片）

![在此处输入图像描述](../Images/4e0ef49b1e3ca2a36178d64978f73c61.png)

我想要达到的目标：

![在此处输入图像描述](../Images/42ba8c065d6c259b3c9a7b2e938b2fb5.png)

在第二张图片中，我只是自己绘制折线，这很容易出现偏差和错误。

我想要实现的是一条线，它描述了点的实际位置。喜欢这样做的趋势（作为第二张图片中的近似值）

# random - Octave random Rational Numbers gernrator

> ID：15723296
> 
> 赞同：0
> 
> 时间：2013-03-30T20:45:31.393
> 
> 标签：random, octave, rational-numbers

I just start to study about Octave and I have a question about getting Rational Numbers.

I just check

> [http://www.gnu.org/software/octave/doc/interpreter/Random-Number-Generation.html#Random-Number-Generation](http://www.gnu.org/software/octave/doc/interpreter/Random-Number-Generation.html#Random-Number-Generation)

this page to learn the way to get random Rational Numbers. for example..

if we use rand(1, 3.1)

i would like to get random number between 1 and 3.1 (like 2.34)

However, i am not really sure about function that i have to use..

can you give some example ?

thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:06:08.227

The function `unifrnd` returns random numbers sampled from a uniform distribution. The first two arguments determine the lower and upper bounds. The remaining (optional) arguments determine the shape of the result. So, for example, to get random numbers between 1 and 3.1:

```
octave:12> unifrnd(1, 3.1)
ans =  2.4990
octave:13> unifrnd(1, 3.1)
ans =  3.0240
octave:14> unifrnd(1, 3.1, 2, 3)
ans =

   1.8929   2.9675   2.1239
   2.4756   2.6172   1.6197 
```

(The results are regular [floating point](http://en.wikipedia.org/wiki/Floating_point) numbers. I don't understand why you are asking about [*rational* numbers](http://en.wikipedia.org/wiki/Rational_number).)

# php - 我在 if 语句 php 中哪里出错了？

> ID：15723300
> 
> 赞同：0
> 
> 时间：2013-03-30T20:46:14.800
> 
> 标签：php, if-statement

需要一点帮助，总是得到最后一个值 188490？

```
if(isset($_POST['zapremina']) and is_numeric($_POST['zapremina']))
        {   
if ($_POST['zapremina']<=1050)
$_POST['zapremina']=1030;
if (($_POST['zapremina']>=1151) and ($_POST['zapremina']<=1300));
$_POST['zapremina']=2010;
if (($_POST['zapremina'] >= 1301) and ($_POST['zapremina'] <= 1600));
$_POST['zapremina']=4400;
if (($_POST['zapremina'] >= 1601) and ($_POST['zapremina'] <= 2000));
$_POST['zapremina']=9110;
if (($_POST['zapremina'] >= 2001) and ($_POST['zapremina'] <= 2500));
$_POST['zapremina']=45000;
if (($_POST['zapremina'] >= 2501) and ($_POST['zapremina'] <= 3000));
$_POST['zapremina']=91200;
if ($_POST['zapremina'] > 3001);
$_POST['zapremina']=188490;
        }
else
$_POST['zapremina']=0; 
```

我认为是一个小错误，有人知道吗，txanks a log

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:48:41.240

是的，你需要这样做`else if`。

```
if ($_POST['zapremina']<=1050)
    $_POST['zapremina']=1030;
else if (($_POST['zapremina']>=1151) and ($_POST['zapremina']<=1300))
    $_POST['zapremina']=2010;
else if (($_POST['zapremina'] >= 1301) and ($_POST['zapremina'] <= 1600))
    $_POST['zapremina']=4400; 
```

等等

至于为什么：您正在检查您的变量，然后将其设置为另一个值，该值往往高于您在分配它之后检查的任何值。

所以任何高于最终会产生 188490 的东西。

else 表示：在第一次匹配时停止比较。

此外，您需要删除`;`if 语句之后的，因为这`;`意味着：`End of operation`. 在这种情况下，这意味着`End of If`......这反过来意味着，以下行将始终被执行，此时变量的值甚至不再重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T20:52:30.077

消除 ; [分号] 在每个 if 语句的末尾，并在当前场景中使用 else if 阶梯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T20:55:27.263

```
if(isset($_POST['zapremina']) and is_numeric($_POST['zapremina']))
        {   
if ($_POST['zapremina']<=1050)
$zapremina=1030;
if (($_POST['zapremina']>=1151) and ($_POST['zapremina']<=1300))
$zapremina=2010;
if (($_POST['zapremina'] >= 1301) and ($_POST['zapremina'] <= 1600))
$zapremina=4400;
if (($_POST['zapremina'] >= 1601) and ($_POST['zapremina'] <= 2000))
$zapremina=9110;
if (($_POST['zapremina'] >= 2001) and ($_POST['zapremina'] <= 2500))
$zapremina=45000;
if (($_POST['zapremina'] >= 2501) and ($_POST['zapremina'] <= 3000))
$zapremina=91200;
if ($_POST['zapremina'] > 3001)
$zapremina=188490;
        }
else
$zapremina=0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T20:58:19.320

我至少看到两个错误：
1）几乎每个 if 语句代码行后面都有分号 (;)。这样，这些语句甚至不会影响任何内容，并且您的 POST 变量设置了六次。
2）你将你的 POST 变量设置为新的（更高的）值，然后用这个新的和更高的值进行检查，我猜这不是你试图完成的。

另外 - 正如 datasage 已经说过的 - 避免写入 POST 变量。

# javafx-2 - WebEngine“让我保持登录”功能

> ID：15723308
> 
> 赞同：1
> 
> 时间：2013-03-30T20:46:44.570
> 
> 标签：javafx-2

有没有办法存储状态，基本上是像浏览器一样拥有“让我登录”功能？我一直在研究 CookieManager，并进行了很多搜索，但在这方面找不到任何东西。我有一个社交订阅阅读器，如果用户点击链接，它会在 WebView 上打开。问题是，在我的应用程序的每次运行中，当他们点击指向私人 Facebook 帖子的链接时，他们需要登录到他们的帐户才能查看它，这非常不舒服。感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:07:24.793

我发现了[如何在使用 HTTPUrlConnection 时保留 cookie？](https://stackoverflow.com/questions/12349266/how-do-i-persist-cookies-when-using-httpurlconnection) 这个[http://docs.oracle.com/javase/tutorial/networking/cookies/custom.html](http://docs.oracle.com/javase/tutorial/networking/cookies/custom.html) 允许我创建一个持久的 cookie 处理程序。

# java - Setting a StringBuilder

> ID：15723309
> 
> 赞同：2
> 
> 时间：2013-03-30T20:46:44.583
> 
> 标签：java, stringbuilder

I have 3 buttons: "Q", "W" and "E". When clicked they should append their letter to a `StringBuilder`. Like this:

```
StringBuilder s = new StringBuilder(); 
```

(When "Q" button is clicked):

```
s.append("q"); 
```

(When "W" button clicked):

```
s.append("w"); 
```

But what I want is to have a maximum of 3 characters to be in the `StringBuilder`. 3 digits after reaching the initial character of a key is pressed at the end wiper and write a new one. After the `StringBuilder` reaches three characters, it will remove the initial one and append the next. Like marquee. Example:

```
StringBuilder is "QWW",
When E button clicked StringBuilder must be "WWE".
When W button clicked StringBuilder must be "WEW". 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:01:18.043

The alternative way is to use char array

```
char[] arr = new char[]{'','',''};
...
private void appendChar(char a){
  for(int i=0;i<arr.length-1;i++){
    arr[i] = arr[i+1];
  }
  arr[arr.length-1] = a;
} 
```

And finally:

```
String res = new String(arr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T20:57:05.407

Use [`StringBuilder#deleteCharAt(int index)`](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html#deleteCharAt%28int%29):

```
public static void addToStringBuilder(StringBuilder sb, int max, char letter)
{
    if(sb.length() >= max) sb.deleteCharAt(0);
    sb.append(letter);
} 
```

For example:

```
StringBuilder sb = new StringBuilder();
addToStringBuilder(sb, 3, 'Q');
System.out.println(sb);
addToStringBuilder(sb, 3, 'W');
System.out.println(sb);
addToStringBuilder(sb, 3, 'W');
System.out.println(sb);
addToStringBuilder(sb, 3, 'E');
System.out.println(sb);
addToStringBuilder(sb, 3, 'W');
System.out.println(sb); 
```

**OUTPUT:**

```
Q
QW
QWW
WWE
WEW 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T20:58:51.113

Here you go:

```
StringBuilder sBuilder = new StringBuilder();
public void prepareBuilder(String str)
{
  if (sBuilder.length() < 3)
  sBuilder.append(str);
  else 
  {
    sBuilder.deleteCharAt(0);
    sBuilder.append(str);

  }
} 
```

# d3.js - xCharts - 文本呈现模糊

> ID：15723314
> 
> 赞同：0
> 
> 时间：2013-03-30T20:46:54.230
> 
> 标签：d3.js

我正在测试使用 d3.js 库（[http://tenxer.github.com/xcharts](http://tenxer.github.com/xcharts)）的 xCharts，但是当我尝试在我的网站和 jsfiddle 上呈现图表时，文本是模糊的。您可以在下面看到它看起来有何不同。

[http://jsfiddle.net/JsPxx/](http://jsfiddle.net/JsPxx/)

这是我正在使用的代码。

```
 (function () {

      var data = {
  "xScale": "ordinal",
  "yScale": "linear",
  "main": [
    {
      "className": ".pizza",
      "data": [
        {
          "x": "Pepperoni",
          "y": 4
        },
        {
          "x": "Cheese",
          "y": 8
        }
      ]
    }
  ]
};
      var myChart = new xChart('bar', data, '#myChart');

    }()); 
```

任何关于为什么它看起来不像它应该的方式的帮助（如[http://tenxer.github.com/xcharts](http://tenxer.github.com/xcharts)）将不胜感激/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:00:10.230

两个问题：

1.  轴的刻度线正在消除锯齿，因此它们显示为两个像素宽。通过添加`shape-rendering:crispEdges`到轴的 CSS 类——或者添加到整个图表，如果你愿意的话——你可以禁用抗锯齿。您可以在Scott Murray的这篇[精彩教程中了解更多信息。](http://alignedleft.com/tutorials/d3/axes/)

2.  The text seems to have a stroke applied to it (it may be coming from your code or from your css, or from defaults). Giving it CSS `stroke: none` is one way to take care of it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-17T10:27:20.953

in xchart.css find `.xchart .axis text` selector and add `stroke-width: 0;` rule

# drupal - Drupal 适合吗？

> ID：15723315
> 
> 赞同：-3
> 
> 时间：2013-03-30T20:46:56.540
> 
> 标签：drupal, drupal-7

我需要开发一个 Web 应用程序，用户必须在其中维护某个实体的状态（就像我们在 Jira 中看到的那样）。我可以用 Drupal 实现这一点吗？

实际要求是创建一个类似环境的工作流。

*   用户创建实体（例如订单）
*   该实体可能由文本、图像、zip 文件组成。（需要上传）
*   一旦创建，实体将更新一个状态，比如“创建”，另一组用户将能够观察它们。
*   用户可以更改订单的状态，就像在工作流程中一样，将状态从一个更改为另一个，直到它到达末尾，比如“完成”。

这是核心要求，我想知道我是否可以使用 Drupal 管理这种场景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:49:50.633

Drupal 是一个内容管理系统。Jira 是一个错误跟踪/项目跟踪系统。

问：您可以在 Drupal 中创建错误跟踪和/或项目跟踪系统吗？是的。但这需要您进行一些编程开发。

问：为什么不直接使用 Jira？或者考虑使用开源替代方案（如 Bugzilla）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T00:21:15.670

drupal 中实际上有许多项目管理和工单跟踪选项。大多数存在于 D6 中，但[Case Tracker](http://drupal.org/project/casetracker)正在移植到 D7。

也许您可以使用现有的贡献代码开始构建。

# ios - Objective - C: Hidding a button through a delegate

> ID：15723316
> 
> 赞同：0
> 
> 时间：2013-03-30T20:46:59.233
> 
> 标签：ios, uibutton, int, hidden

I have two views a levelComplete view and a levelSelector view. What I would like to do is when the levelComplete shows or the `ViewDidLoad` occurs on that view I would like to send a delegate to the level selector to show a button in the view and then make that button `UserInteractionEnabled` so then I will then be able to programme that button to do something if its not hidden.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:13:13.567

You want to necessarily do it via a delegate. Coz you can do it in a simpler way as well. When you call your secondView, just tell your button to hide. So your modified code to calling the second view controller becomes:

```
-(IBAction)passdata:(id)sender {
  secondview *second = [[secondview alloc] initWithNibName:nil bundle:nil];  
  self.secondviewData = second; 
  sender.hidden=YES;
  secondviewData.passedValue = textfield.text;
  [self presentModalViewController:second animated:YES];
} 
```

And then you can set it to visible when your view loads up again using viewDidLoad. I can tell you how to do it via delegates if you need. Lemme know what works best.

**EDIT - Solution by Delegates**

Your secondView's Header file will be as follows:

```
@protocol SecondViewHandlerDelegate <NSObject>

- (void)viewHasBeenLoaded:(BOOL)success;

@end

@interface secondview :UIViewController {
  IBOutlet UILabel *label;  
  NSString *passedValue;
}
@property (nonatomic, retain)NSString *passedValue;

-(IBAction)back:(id)sender;

@end 
```

Then, in the implementation file of secondView(.m), synthesise the delegate first by `@synthesize delegate;` . After this, in your `viewDidLoad` of secondView, add the following line:

```
[[self delegate] viewHasBeenLoaded:YES]; 
```

That should be enough for your secondView. Now onto the firstViewController, perform the following steps:

In the header file (.h), import your second view and implement the protocol:

```
@interface ViewController :UIViewController <SecondViewHandlerDelegate>{
..
..
} 
```

In the implementation file (.m) of your firstViewController, implement this method:

```
- (void)viewHasBeenLoaded:(BOOL)success
{
    NSLog("Delegate Method Called");
    [myButton setHidden:YES];
} 
```

And finally, in your code when you call the secondView, add this line: secondview *second = [[secondview alloc] initWithNibName:nil bundle:nil]; second.delegate = self; ...

That should solve your purpose. I'd appreciate if you could mark the answer as correct as well. Thanks :)

# c# - C# 通用处理程序，我有什么误解？

> ID：15723317
> 
> 赞同：2
> 
> 时间：2013-03-30T20:47:08.913
> 
> 标签：c#, .net, generics, event-handling

我不确定为什么这不起作用。它不喜欢 TResponse 用于 out 和 handlerMap 添加，即使 TResponse 是 IResponse？我想我一定是对泛型有误解，或者更可能是对 C# 的误解。为什么这不起作用，有没有更好的方法来完成我在这里尝试做的事情？

```
private static Dictionary<Type, List<IResponseHandler<IResponse>>> _handlerMap;

public static void AddResponseHandler<TResponse>(IResponseHandler<TResponse> handler) where TResponse : IResponse
{
    List<IResponseHandler<TResponse>> handlers;
    _handlerMap.TryGetValue(typeof (TResponse), out handlers);

    if (handlers == null)
    {
        handlers = new List<IResponseHandler<TResponse>>();
        _handlerMap.Add(typeof (TResponse), handlers);
    }

    handlers.Add(handler);
}

public interface IResponseHandler<TResponse> where TResponse : IResponse
{
    void Handle(TResponse response);
} 
```

我在编译期间收到这些错误：

> 错误 1 ​​'System.Collections.Generic.Dictionary>>.TryGe‌​tValue(System.Type, out System.Collections.Generic.List>)' 的最佳重载方法匹配有一些无效参数 C:...\NetworkManager。 cs 39 13 组装‌​-CSharp-vs
> 
> 错误 2 参数 2：无法从 'out System.Collections.Generic.List>' 转换为 'out System.Collections.Generic.List>' C:...\NetworkManager.cs 39 61 Assembly-CSharp-vs

```
If I change TResponse to IResponse within the method, everything above
handlers.Add(handler) compiles fine. I don't understand why I can't add a handler of 
<TResponse : IResponse> to a List<IResponseHandler<IReponse>>? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:10:29.433

C# 中的差异不允许您将 an 分配给 an `IResponseHandler<IResponse>`，`IResponseHandler<T>`即使`T`.

我不知道您要做什么，因为您没有提供此处使用的所有代码；但是，这将编译：

```
public class SomeClass<TResponse> where TResponse : IResponse
{
    private static Dictionary<Type, List<IResponseHandler<TResponse>>> _handlerMap;

    public static void AddResponseHandler(IResponseHandler<TResponse> handler) 
    {
        List<IResponseHandler<TResponse>> handlers;
        _handlerMap.TryGetValue(typeof(TResponse), out handlers);

        if (handlers == null)
        {
            handlers = new List<IResponseHandler<TResponse>>();
            _handlerMap.Add(typeof(TResponse), handlers);
        }

        handlers.Add(handler);
    }       
} 
```

这会将泛型从方法移动到类，因此您可以定义一个兼容的`_handlerMap`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T21:43:14.650

正如其他人所提到的 - 没有办法做到“你正在做的方式”......

a) 你需要`contravariance`- 为了`Add`工作

b) 你需要`covariance`能够`upcast`从`IResponseHandler<TResponse>`到`IResponseHandler<IResponse>`

（你也有另一个编译问题，返回`out`到不同类型的列表，这两种方式都不能工作）......

对于一个解决方案 -如果这满足您`trick`的需求，您可以将它投入工作。`contract`当您失去一些支持时，这更像是一个“实践示例” - 但取决于您需要什么......

```
interface IResponse { }
interface IResponseHandler<out TResponse>
    where TResponse : class, IResponse
{
    // add 'read-only' (simplified) properties only - that support 'covariance' - meaning no 'input parameters' of T etc.
    // void Handle(TResponse response);
}
abstract class ResponseHandler<TResponse> : IResponseHandler<TResponse> 
    where TResponse : class, IResponse
{
    public abstract void Handle(TResponse response);
}
class TestHandler
{
    private static Dictionary<Type, List<IResponseHandler<IResponse>>> _handlerMap = new Dictionary<Type,List<IResponseHandler<IResponse>>>();
    public static void AddResponseHandler<TResponse>(IResponseHandler<TResponse> handler) where TResponse : class, IResponse
    {
        List<IResponseHandler<IResponse>> handlers;
        _handlerMap.TryGetValue(typeof(TResponse), out handlers);
        if (handlers == null)
        {
            handlers = new List<IResponseHandler<IResponse>>();
            _handlerMap.Add(typeof(TResponse), handlers);
        }
        IResponseHandler<IResponse> myhandler = handler;
        handlers.Add(myhandler);
    }
    public static void Handle<TResponse>(TResponse response) where TResponse : class, IResponse
    {
        List<IResponseHandler<IResponse>> handlers;
        _handlerMap.TryGetValue(typeof(TResponse), out handlers);
        if (handlers == null) return;
        foreach (var handler in handlers)
        {
            (handler as ResponseHandler<TResponse>).Handle(response);
        }
    }
}
// and implementation...
class FirstResponse : IResponse { }
class AutomatedResponse : IResponse { }
class FirstHandler : ResponseHandler<FirstResponse>
{
    public override void Handle(FirstResponse response) { }
}
class AutomatedHandler : ResponseHandler<AutomatedResponse>
{
    public override void Handle(AutomatedResponse response) { }
}
// ...and a test...
var firsthandler = new FirstHandler();
var secondhandler = new AutomatedHandler();
TestHandler.AddResponseHandler(firsthandler);
TestHandler.AddResponseHandler(secondhandler);

var first = new FirstResponse();
var second = new AutomatedResponse();
TestHandler.Handle(first);
TestHandler.Handle(second); 
```

有一些有趣的事情，快...

1）你需要`out`-`base interface`才能做到`covariant`

2）你需要`keep it`协变——不要在其中添加任何东西`Add`（见评论）。基本上（并且过于简化）你需要维护它`read only`（标记这不是真的 - 只是更容易这样想）。这也适用于参与其中的所有类型/其他参数等。编译器将引导您出现错误

3）将所有功能从`IResponseHandler`一个`ResponseHandler`类中提取出来——所有的服务器——在那里你可以添加你的`Add`等等——并针对特定情况进行覆盖

4）您需要`cast`找到可以实际“处理”的“处理程序”-`(handler as ResponseHandler<TResponse>).Handle(response);`

## 笔记

...这完全是`futile`如果您的“处理程序”只是“处理”（这`Add`是您真正需要的唯一方法） - 即这完全取决于您的代码和结构以及事物的实现。如果您的基本界面“服务于目的”用于其他目的 - 那么它可能是值得的。否则——你几乎可以用它来做所有这些`object`——然后从那里投`object`下来，你不会对此感到更快乐或更快乐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T21:20:24.880

进一步扩展我的评论，您的`IResponseHandler<T>`界面是*逆变*的`T`（`T`出现在“输入”位置）。没有办法做你想做的事，因为它不是类型安全的。

借用 Eric Lippert 喜欢使用的一个类比，如果香蕉是一种水果，那么认为一碗香蕉就是一碗水果似乎是合理的。然而，如果你问这个碗里有什么，这只是类型安全的？如果你试着往碗里加东西，那就错了。一碗水果应该可以接受任何水果。但是，如果我们可以将您的一碗香蕉视为一碗水果，那么您可以在一碗香蕉中添加一个橙子，然后一团糟。

编译器会阻止您出现这种不一致。您的`IResponseHandler<T>`对象不能接受任何`IResponse`，只有特定的`IResponse`类型。

# c++ - pthread_create b/w fork and exec

> ID：15723319
> 
> 赞同：0
> 
> 时间：2013-03-30T20:47:11.733
> 
> 标签：c++, linux, pthreads, exec, fork

I wish to create a thread in a child process before the respective child process changes it's image using exec system call. However, seemingly, the pthread_create call is being overlooked.

```
 pthread_t thread;
    pthread_attr_t attribute;

    pthread_attr_init(&attribute);
    pthread_attr_setdetachstate(&attribute, PTHREAD_CREATE_DETACHED);

pid_t cid = fork();

if(cid == 0)        //CHILD Process
{
    switch(x->option)
    {
        case 1:     pthread_create(&thread, &attribute, compressShow, NULL);                
                    execl("/home/aamir/Lab/ass3/compression", "compression", source, destination, NULL); 
                    cout<<"Execution failed."<<endl; break; //This segment will execute if exec fails.
    }

else            //PARENT Process
{
    wait(0);        //Prevents termination of original main until forked exec completes execution
    pthread_cancel(thread);
} 
```

The thread is basically just a progress display that is intended to output '.' (dots) in concurrence with the forked child.

If I remove the exec call the thread does execute. I've searched on google and read somewhere that you cannot use pthread_create between a fork and exec, something to do with async safe functions. Can you please help?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:53:34.450

The exec bit zapps everything including threads and just starts a new process. That includes memory etc.

The program might (and usually) does not get to the bit to fire up the thread.

# c# - How to controll how value.ToString works in DataGridViewTextBoxColumn?

> ID：15723321
> 
> 赞同：0
> 
> 时间：2013-03-30T20:47:28.950
> 
> 标签：c#, .net, winforms

Having something like such `DataGridViewTextBoxColumn`:

```
var decayTimeColumn = new DataGridViewTextBoxColumn
{
  DataPropertyName = "DecayTimeUi",
  HeaderText = @"half-life"
}; 
```

That works on top of `List<T>` where T has `.DecayTimeUi` geter returning float how to controll the way it is displayed (set its `value.ToString("E", CultureInfo.InvariantCulture)` instead of default `ToString`)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:27:14.003

Set the [format](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcellstyle.format.aspx) of the cell through the [`DefaultCellStyle`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumn.defaultcellstyle.aspx):

```
var decayTimeColumn = new DataGridViewTextBoxColumn {
  DataPropertyName = "DecayTimeUi",
  HeaderText = @"half-life",
  DefaultCellStyle.Format = "E"
}; 
```

It only supports a string, though, so no strongly-typed culture can be specified in that way; you'd need to find a shorthand formatting string that applies to you circumstance.

# python - networkx 节点着色中的异常行为

> ID：15723324
> 
> 赞同：3
> 
> 时间：2013-03-30T20:47:48.440
> 
> 标签：python, matplotlib, networkx

我正在使用 networkx 绘制一个简单的无向图，但我无法根据特定属性为节点着色。我创建了一个字典，在这种情况下，键引用包含该属性的节点列表。它看起来像这样：

```
{ 
  1 : [1, 2, 3, 4],
  3 : [9, 11, 10, 8],
  2 : [7, 5, 6]
} 
```

我想渲染图表，以便每组节点的颜色不同。这些键用于访问特定颜色。我像这样绘制图表：

```
colors = [(random.random(), random.random(), random.random()) for i in xrange(0, 3)]
pos = nx.circular_layout(G) 
for k,v in node_list_dict.iteritems():
   nc = colors[int(k)-1]
   nx.draw_networkx_nodes(G, pos, nodelist=v, node_color=nc)
nx.draw_networkx_edges(G, pos)  
nx.draw_networkx_labels(G, pos) 
```

这几乎可以工作，但会产生如下图像：

![几乎正确的图表](../Images/cf72d0ea271c9ef6af0c4e733bca7b84.png)

所以看起来前两组正确渲染，但最后一组没有。知道为什么吗？我查看了文档，但我不明白为什么它会失败。

此外，颜色列表通常会这样结束（当我的意思是通常我的意思是生成的颜色有些随机）

```
[(0.982864745272968, 0.038693538759121182, 0.03869353875912118), (0.12848750206109338,    0.9956534627440381, 0.12848750206109338), (0.050388282183359334, 0.050388282183359334, 0.9916284269963801)] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T01:57:32.900

You seem to have discovered an interesting broadcasting problem.

The trigger for this issue is when `len(v) == len(nc)`, as according to the documentation:

```
node_color : color string, or array of floats
   Node color. Can be a single color format string (default='r'),
   or a  sequence of colors with the same length as nodelist.
   If numeric values are specified they will be mapped to
   colors using the cmap and vmin,vmax parameters.  See
   matplotlib.scatter for more details. 
```

so when `len(v) != 3` `nc` is interpreted as RGB triple, when `len(v) == 3`, the floats in `nc` are mapped to RGB via the default color map (which is `jet`).

A possible work-around for this is

```
for k,v in node_list_dict.iteritems():
   nc = colors[int(k)-1]
   if len(v) == 3:
       nc = nc +  (1,)
   nx.draw_networkx_nodes(G, pos, nodelist=v, node_color=nc) 
```

which turns `nc` into a RGBA tuple, which won't trigger the usage of the color map. ![在此处输入图像描述](../Images/9c1531de94388e980344da22d09ad5bb.png)

如果你想追踪这个，主要的工作`draw_network_nodes`是在[这里](https://github.com/networkx/networkx/blob/master/networkx/drawing/nx_pylab.py#L372)通过调用`scatter`. 函数中有一条注释`scatter`（[此处](https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/axes.py#L6266)）将其标记为已知问题，并说明如何消除歧义。如果您对此感觉*非常*强烈，您可以在 github 上创建一个问题，但我认为它不会引起关注，因为这是一个明确的设计决策。

# sql - IF EXISTS in WHERE clause

> ID：15723326
> 
> 赞同：0
> 
> 时间：2013-03-30T20:48:05.407
> 
> 标签：sql, sql-server, where, exists

I ran into a problem this days. In my MS SQL Database I have a table of articles (details of them like insert date, insert user and other staffs) and one table with the body of articles in multiple languages. I want that the articles body to be in user preferred language. But not all the articles are in all languages. So, would be nice, first to search for the article in user's preferred language and, if not exists, to get the body in first language it is.

For this, I use a function. The WHERE clause is like this:

```
WHERE   [tblBody].[Language] = @Language AND
        [tblTitle].[Language] = @Language 
```

but would be nice if it would be like this: SELECT (if body is in my preferred language get that body; else give me one (maybe I understood it))

I hope you understood what I want to do and witch are my problems.

Thank you in advance!

UPDATE

This is my actual query which needs modifications:

```
 ALTER FUNCTION [fx_GetNews]
(   
    @MinimumPermission INT,
    @UserID UNIQUEIDENTIFIER,
    @OwnerID  UNIQUEIDENTIFIER = NULL,
    @Title NVARCHAR(250) = NULL,
    @Body VARCHAR(150) = NULL,
    @InsertDateStart DATETIME = NULL,
    @InsertDateEnd DATETIME = NULL,
    @CreatedByUserID UNIQUEIDENTIFIER = NULL,
    @ExpirationDate DATETIME = NULL,
    @Language VARCHAR(150)
)
RETURNS @News TABLE 
(
    [Id] UNIQUEIDENTIFIER
    ,[OwnerID] UNIQUEIDENTIFIER
    ,[Title] NVARCHAR(250)
    ,[TitlePictureUrl] VARCHAR(150)
    ,[Body] NVARCHAR(max)
    ,[Visible] BIT
    ,[InsertDate] DATETIME
    ,[CreatedByUserId] UNIQUEIDENTIFIER
    ,[ModifiedDate] DATETIME
    ,[ModifiedByUserId] UNIQUEIDENTIFIER
    ,[ModifiedByPerson] VARCHAR(250)
    ,[ExpirationDate] DATETIME
    ,[CreatedByPerson] VARCHAR(250)
    ,[Permission] INT
)
AS
BEGIN
    INSERT INTO @News
           ([Id]
           ,[OwnerID]
           ,[Title]
           ,[TitlePictureUrl]
           ,[Body]
           ,[Visible]
           ,[InsertDate]
           ,[CreatedByUserId]
           ,[ModifiedDate]
           ,[ModifiedByUserId]
           ,[CreatedByPerson]
           ,[ModifiedByPerson]
           ,[ExpirationDate]
           ,[Permission])
        SELECT
                [dbo].[tblNews].[Id]
               ,[dbo].[tblNews].[OwnerID]
               ,CAST([tblTitle].[Text] AS VARCHAR(150))
               ,[dbo].[tblNews].[TitlePictureUrl]
               ,[tblBody].[Text]
               ,[dbo].[tblNews].[Visible]
               ,[dbo].[tblNews].[InsertDate]
               ,[dbo].[tblNews].[CreatedByUserId]
               ,[dbo].[tblNews].[ModifiedDate]
               ,[dbo].[tblNews].[ModifiedByUserId]
               ,[dbo].[tblNews].[CreatedByPerson]
               ,[dbo].[tblNews].[ModifiedByPerson]
               ,[dbo].[tblNews].[ExpirationDate]
               ,[eportofolii].[fx_GetPermissionForObject] (@UserID, [dbo].[tblNews].[ID], 1, 1)
           FROM [dbo].[tblNews] 
                    INNER JOIN [dbo].[tblAdmTranslateText] AS [tblBody] ON
                        [tblBody].[OwnerID] = [dbo].[tblNews].[ID]
                    INNER JOIN [dbo].[tblAdmTranslateText] AS [tblTitle] ON
                        [tblTitle].[OwnerID] = [dbo].[tblNews].[ID]
        WHERE
            [eportofolii].[fx_GetPermissionForObject] (@UserID, [dbo].[tblNews].[ID], 1, 1) >= @MinimumPermission AND
            ([dbo].[tblNews].[OwnerID] = ISNULL(@OwnerID, [dbo].[tblNews].[OwnerID]) OR [dbo].[tblNews].[OwnerID] IS NULL) AND
            [tblTitle].[Text] LIKE '%' + ISNULL(@Title, '') + '%' AND
            [tblBody].[Text] LIKE '%' + ISNULL(@Body, '') + '%' AND
            ([dbo].[tblNews].[InsertDate] BETWEEN ISNULL(@InsertDateStart, ([dbo].[tblNews].[InsertDate] - 7)) AND ISNULL(@InsertDateEnd, [dbo].[tblNews].[InsertDate] + 1)) AND
            [dbo].[tblNews].[CreatedByUserID] = ISNULL(@CreatedByUserID, [dbo].[tblNews].[CreatedByUserID]) AND
            ([dbo].[tblNews].[ExpirationDate] > ISNULL(@ExpirationDate, GETDATE() - 1) OR [dbo].[tblNews].[ExpirationDate] IS NULL) AND
            [tblBody].[UDF_2] = 'Body' AND 
            [tblTitle].[UDF_2] = 'Title' AND 
            [tblBody].[UDF_1] = 'News' AND 
            [tblTitle].[UDF_1] = 'News' AND
            [tblBody].[Language] = @Language AND
            [tblTitle].[Language] = @Language
        ORDER BY [InsertDate] DESC
    RETURN
END 
```

The problem is here at the end:

```
[tblBody].[Language] = @Language AND
[tblTitle].[Language] = @Language 
```

Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:57:54.693

```
;WITH x AS 
(
   SELECT b.[Language], /* other columns from b */
     rn = ROW_NUMBER() OVER (PARTITION BY b.article_id_of_some_kind
       ORDER BY CASE WHEN t.[Language] = @Language THEN 1 ELSE 2 END)
   FROM dbo.tblBody AS b
   INNER JOIN dbo.tblLanguage AS l
    ON b.LanguageID = l.LanguageID -- guessing here
)
SELECT /* cols */ FROM x WHERE rn = 1; 
```

This will return an arbitrary language if the preferred language is not available. You can further refine that by modifying the inner `ORDER BY`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T20:57:48.753

What you want to do is a bit complicated. You want to return articles in the desired language, if present, and in another language if not.

For this, a window function is quite useful:

```
select t.*
from (select blah,
             max(case when [tblBody].[Language] = @Language then 1 else 0 end) over (partition by article) as HasLanguage       
      from whatever
      where [tblTitle].[Language] = @Language
     ) t
where HasLanguage = 1 or [tblBody].[Language] <> @Language 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T22:36:13.280

```
select B.*
from bodies as B
where exists (
  select 1 from (
    select b.article, coalesce( u.language, b.language ) as language
    from bodies as b 
    left join users as u
    on b.language = u.language
    and u.user = @user
    where b.article = @article
    and b.default_language = 'TRUE' -- or whatever
  ) as A
  on A.article = B.Article
  and A.language = B.language
) 
```

You have to choose between two languages: the user's language and the article's language. you could use `UNION` or `coalesce` (because an outer join is a kind of a union), and the latter is simpler.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-30T20:54:28.733

One option is to use the MSSQL "COALESCE" function:

*   [http://msdn.microsoft.com/en-us/library/ms190349.aspx](http://msdn.microsoft.com/en-us/library/ms190349.aspx)

Another might be to use a CASE block.

# spring - 春天mvc和jdbc

> ID：15723328
> 
> 赞同：0
> 
> 时间：2013-03-30T20:48:14.627
> 
> 标签：spring, jdbc

我从 spring 开始，我正在研究 web mvc。当不在 MVC 中时，如某些教程中所指出的，我将在 beans.xml 中指定数据源并使用 ApplicationContext 对象调用此文件，并通过传递数据源来创建对象。这对我有用。当我回到 MVC 时，我通过使用在我的 name-servlet.xml 文件中创建了数据源

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost:3306/hello"/>
    <property name="username" value="root"/>
    <property name="password" value=""/>
</bean> 
```

我有一个超类用于我的服务类进行数据访问，仅使用方法 setDataSource。这是我的样本。

```
@Resource(name="dataSource")
public void setDataSource(DataSource dataSource){
    this.dataSource=dataSource;
    this.jdbcTemplateObject = new JdbcTemplate(dataSource);
} 
```

但是在使用数据源时我仍然遇到空指针异常。请问我错过了什么？

# android - Android - 无法解析 JUnit 测试中的活动仅适用于某些活动

> ID：15723330
> 
> 赞同：3
> 
> 时间：2013-03-30T20:48:28.207
> 
> 标签：android, junit, android-activity

当我为我的一个活动运行 JUnit 测试时，我得到了上述错误，但不是另一个活动。这两个活动都在同一个包中。

这是我不起作用的活动的准系统代码。（起作用的是一样的，只是切换活动名称）。

```
public class CounterTest extends ActivityInstrumentationTestCase2<Reward>{

Activity mActivity;

public CounterTest() {
    super("com.morningsun.caffeinecounter", Reward.class);

}

@Override
protected void setUp(){
    try{
    super.setUp();
    mActivity = this.getActivity();

    }catch(Exception e){
        e.printStackTrace();
    } 

}

public void test(){

    Assert.assertTrue(1==1);

} 
```

这是我的清单仪表信息

`

```
 <<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.missaion.caffeinecounter.test"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="7" />
    <instrumentation 
        android:targetPackage="com.morningsun.caffeinecounter" 
        android:name="android.test.InstrumentationTestRunner" />
    <application android:icon="@drawable/icon" android:label="@string/app_name">

    <uses-library android:name="android.test.runner" />
    </application>
</manifest>

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
        android:installLocation="auto"
        package="com.morningsun.caffeinecounter"
        android:versionCode="2"
         android:versionName="1.05">

    <uses-sdk android:minSdkVersion="7" />

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.VIBRATE" />

    <application 
        android:icon="@drawable/icon" 
        android:label="@string/Title">

        <activity android:name=".CaffeineCounterActivity"
                  android:label="@string/Title"
                  android:launchMode="singleTask">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />

            </intent-filter>
        </activity>

        <activity 
            android:name=".DrinkSelector"
            android:theme="@android:style/Theme.Dialog"
            android:noHistory="true" 
            android:label="@string/Select"  />  

        <activity 
            android:name=".Plot"    
            android:noHistory="true" 
            android:label="@string/PlotData"  />  

        <activity 
            android:name=".Info"    
            android:noHistory="true" 
            android:label="@string/InfoText"  />  

          <activity 
            android:name=".SendDialog"
            android:theme="@android:style/Theme.Dialog"
            android:noHistory="true" 
            android:label="@string/SaveFile"  />    

        <activity 
            android:name=".DrinkDialog"
            android:theme="@android:style/Theme.Dialog"
            android:noHistory="true"
            android:label="@string/AddDrink"  />

        <activity 
            android:name=".DrinkDialogNonLinear"
            android:theme="@android:style/Theme.Dialog"
            android:noHistory="true"
            android:label="@string/AddDrink"  />

        <activity 
            android:name=".EditType"
            android:theme="@android:style/Theme.Dialog"
            android:noHistory="true"
            android:label="@string/EditType"  />

        <activity 
            android:name=".EditTypeStarbucks"
            android:theme="@android:style/Theme.Dialog"
            android:noHistory="true" 
            android:label="@string/Select"  />  

        <activity 
            android:name=".DrinkUpdater"
            android:theme="@android:style/Theme.Dialog"
            android:noHistory="true"
            android:label="@string/EditDrink"  />

        <activity 
            android:name=".AmountDialog"
            android:theme="@android:style/Theme.Dialog"
            android:noHistory="true" />

          <activity 
            android:name=".NewTypeDialog"
            android:theme="@android:style/Theme.Dialog"
            android:noHistory="true" 
            android:label="@string/AddType" />

        <activity 
            android:name=".DayList"
            android:label="@string/DateList"/>

         <activity 
            android:name=".TypeList"
            android:theme="@android:style/Theme.Dialog"
            android:label="@string/Types"/>

         <activity 
            android:name=".DayDrinkList"
            android:label="@string/DateDrinkList">

        </activity>

        <activity 
            android:name=".SodaList"
            android:theme="@android:style/Theme.Dialog"
            android:noHistory="true"
            android:label="@string/SelectDrink"  />

         <activity 
            android:name=".LimitDialog"
            android:theme="@android:style/Theme.Dialog"
            android:noHistory="true" />

    </application>
</manifest> 
```

关于这个主题的其他帖子说检查检测 targetPackage 并检查构造函数 super 中的值，这对我来说似乎没问题。任何帮助，将不胜感激。

以下是错误消息：

```
03-30 13:35:08.853: W/System.err(1727): java.lang.RuntimeException: Unable to resolve activity for: Intent { act=android.intent.action.MAIN flg=0x10000000 cmp=com.morningsun.caffeinecounter/.Reward }
03-30 13:35:08.853: W/System.err(1727):     at android.app.Instrumentation.startActivitySync(Instrumentation.java:371)
03-30 13:35:08.863: W/System.err(1727):     at android.test.InstrumentationTestCase.launchActivityWithIntent(InstrumentationTestCase.java:119)
03-30 13:35:08.863: W/System.err(1727):     at android.test.InstrumentationTestCase.launchActivity(InstrumentationTestCase.java:97)
03-30 13:35:08.863: W/System.err(1727):     at android.test.ActivityInstrumentationTestCase2.getActivity(ActivityInstrumentationTestCase2.java:98)
03-30 13:35:08.863: W/System.err(1727):     at com.missaion.caffeinecounter.test.CounterTest.setUp(CounterTest.java:33)
03-30 13:35:08.863: W/System.err(1727):     at junit.framework.TestCase.runBare(TestCase.java:125)
03-30 13:35:08.863: W/System.err(1727):     at junit.framework.TestResult$1.protect(TestResult.java:106)
03-30 13:35:08.863: W/System.err(1727):     at junit.framework.TestResult.runProtected(TestResult.java:124)
03-30 13:35:08.863: W/System.err(1727):     at junit.framework.TestResult.run(TestResult.java:109)
03-30 13:35:08.863: W/System.err(1727):     at junit.framework.TestCase.run(TestCase.java:118)
03-30 13:35:08.863: W/System.err(1727):     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
03-30 13:35:08.863: W/System.err(1727):     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
03-30 13:35:08.863: W/System.err(1727):     at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:520)
03-30 13:35:08.863: W/System.err(1727):     at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1447) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T21:31:29.267

您正在测试的奖励课程未在您发布的清单中列出。仔细检查您是否有`<activity>`此类的标签。

# clojure - ArityException 在 clojure 生成类具有重载方法的接口时发生

> ID：15723332
> 
> 赞同：1
> 
> 时间：2013-03-30T20:48:36.333
> 
> 标签：clojure

我有一个java接口如下：

```
public interface Wrapper {
  void error( Exception e);
  void error( String str);
} 
```

我正在尝试使用 gen-class 在 clojure 中创建一个实现：

```
(ns myimpl)

(gen-class
 :name myimpl
 :implements [Wrapper]
 :state state
 :init init
 :prefix "w-"
 :main false
 )

(defn- w-error [this ^Exception e]
  (println e))

(defn- w-error [this ^String s]
  (println s)) 
```

然后我尝试创建一个实例并调用repl中的方法：

```
> (def w (myimpl. ))
> (.error w "oops") 
```

这会给我一个 ArityException: Wrong number of args (2) passing to: myimpl$w-error.

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:48:41.183

以下代码恰好是对 Clojure 函数如何工作的误解。

```
(defn- w-error [this ^Exception e]
  (println e))

(defn- w-error [this ^String s]
  (println s)) 
```

用 定义的“常规”函数`defn`不能在类型上分派 - 只能在参数数量上。

我相信这实际上是一个有用且可行的功能，但我们必须改为满足于**多**方法和**协议实现**，它们共同覆盖了 80% 的类型调度需求。

我不知道为什么你会特别得到一个 arity 异常，但我想说这并不重要。

最后，您可能有兴趣在 Java 中实现 Java 接口，将实际功能委托给 Clojure 代码。这将需要 AOT 编译您的 Clojure 项目，或者通过 , 等动态加载`RT`代码`Var`。

# arrays - 在Scala中使用通配符类型交换两个数组的元素

> ID：15723338
> 
> 赞同：0
> 
> 时间：2013-03-30T20:49:00.430
> 
> 标签：arrays, scala, generics, inheritance

我想做如下的事情：

```
class A[T] (_arr: Array[T]) { var arr = _arr }
class C {
  def foo[T <: A[_]](a: Array[T]){
    var ele1 = a(0)
    var ele2 = a(1)
    for(i <- 0 until ele1.arr.length) {
      val temp = ele1.arr(i)
      ele1.arr(i) = ele2.arr(i)
      ele2.arr(i) = temp
    }
  }
} 
```

但我收到以下编译器错误：

```
<console>:15: error: type mismatch;
 found   : temp.type (with underlying type Any)
 required: _$1
             ele2.arr(i) = temp
                           ^ 
```

我不确定为什么 ele1.arr(i) = ele2.arr(i) 会起作用而 ele2.arr(i) = temp 不会。

编辑：根据雷克斯的建议，我将其更改为以下内容：

```
class A[T] (_arr: Array[T]) { var arr = _arr }
class C {
  def foo[T, B <: A[T]](b: Array[B]){
    var ele1 = b(0)
    var ele2 = b(1)
    for(i <- 0 until ele1.arr.length) {
      val temp = ele1.arr(i)
      ele1.arr(i) = ele2.arr(i)
      ele2.arr(i) = temp
    }
  }
} 
```

现在编译得很好。但是当我做一个测试用例时，如下：

```
object Test extends App {
  var p = Array.ofDim[A[Int]](2)
  var g1 = new A[Int](Array(1, 2, 3, 4, 5))
  var g2 = new A[Int](Array(6, 7, 8, 9, 10))
  p(0) = g1
  p(1) = g2

  (new C).foo(p)
  p.foreach{ x => println(x.arr.deep.mkString(",")) }
} 
```

我收到以下编译器错误：

```
src/Test.scala:22: error: inferred type arguments [A[Int],Nothing] do not conform to method foo's type parameter bounds [B <: A[T],T]
  (new C).foo(p)
          ^
src/Test.scala:22: error: type mismatch;
 found   : Array[A[Int]]
 required: Array[B]
  (new C).foo(p)
              ^
two errors found 
```

我知道我可以做 (new C).fooInt, A[Int]，但我真的很想让编译器推断它。否则，它有点违背了我正在做的很多事情的目的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T21:05:41.200

我不明白你为什么在这里使用通配符而不是参数化元素类型。您正在使编译器蒙蔽，并使其更难确保您正在做一些明智的事情。特别是，它意识到由于数组是不变类型的，`ele1.arr(i)`并且`ele2.arr(i)`是相同的类型，因此可以被分配。但是，当您分配给 时`temp`，它意识到它不知道该类型实际上可能是什么，因此它推断`Any`，然后当然不会重新放入数组中，因为它*实际上* `Any`不是; 它只是忘记了它应该是什么。

```
class C {
  def foo[T, B <: A[T]](b: Array[B]){
    var ele1 = b(0)
    var ele2 = b(1)
    for(i <- 0 until ele1.arr.length) {
      val temp = ele1.arr(i)
      ele1.arr(i) = ele2.arr(i)
      ele2.arr(i) = temp
    }
  }
} 
```

允许编译器从头到尾知道类型，这让编译器很开心，你也更安全。

# android-listview - 我可以在同一个屏幕上有多个 ListView 吗？

> ID：15723340
> 
> 赞同：0
> 
> 时间：2013-03-30T20:49:10.130
> 
> 标签：android-listview

我正在为大屏幕设备创建一个 Android 应用程序。从用户的角度来看，我希望至少有两个，也许三个，他们可以滚动浏览的对象列表。

本来是想用ListView的，但是看了文档觉得ListView更适合占据整个屏幕，或者activity

我可以在同一个屏幕上有多个 ListView 吗？如果没有，最简单的方法是什么？

# list - how to use "for x in "

> ID：15723341
> 
> 赞同：0
> 
> 时间：2013-03-30T20:49:17.640
> 
> 标签：list, python-3.x

```
a = []
for index in range(52):
    a.append([])
    for jindex in range(52):
        a[index].append('a')

row,col = [int(x) for x in input().split(" ")]

b = []

for index in range(row):
    str = input()
    for jindex in range(col):
        a[index+1][jindex + 1] = str[jindex]
        if(str[jindex] == 'A'):
            b.append([index,jindex])

#print (a)
# print (b)

ans = max(trav(x[0],x[1]) for x in b 
```

The last line is troublesome, trav(r,c) is a function that return integer values.

I just want to ask is this usage correct? I am very new to python. I tried to extend this line from `row,col = [int(x) for x in input().split(" ")]`

I am trying to store the max value the function trav returns for each list of 2 items stored in the list b.

Like: if the list b is `[[10, 20], [2, 3]]` and lets say the func trav returns the sum of the 2 items in the sublist.

then the first sub list gives us 30, and then second gives us 5\. So ans should have a value 30

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:57:31.127

You should be able to just add the missing right parenthesis at the very end of the last line. The `trav(x[0],x[1]) for x in b` forms a generator expression that generates the value of `trav` for each element of `b`, and then `max()` iterates over that generated sequence and returns the maximum value found.

# highcharts - 标记工具提示与 highstock 上的图表工具提示

> ID：15723344
> 
> 赞同：0
> 
> 时间：2013-03-30T20:49:54.580
> 
> 标签：highcharts

我有一个带有固定工具提示的股票图表，就像股票工具提示定位器示例中显示的那样。现在我想在系列中添加一些标志。当“鼠标悬停”时，每个标志的工具提示应该与该标志相邻，就像工具提示的默认定位/格式一样。此外，每个标志的工具提示都有自己的文本，并且在显示时不应影响固定的工具提示（例如，固定的工具提示会显示股票价格，而标志的工具提示会显示一些与标志相关的文本）

你有任何相关的示例代码我可以看看吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:48:57.670

这不是直接支持但可以实现，看看：http: [//jsfiddle.net/hzYhQ/2/](http://jsfiddle.net/hzYhQ/2/)

1) 为带有标志的 mouseout/mouseover 事件的图表添加自定义属性：

```
 plotOptions: {
        flags: {
            events: {
                mouseOver: function(){
                    this.chart.flagTooltip = true;
                }, 
                mouseOut: function(){
                    this.chart.flagTooltip = false;

                }
            }
        }
    } 
```

2）添加检查工具提示应根据该标志显示的位置：

```
 positioner: function (w,h,p) {
            var x = 10,
                y = 35;
            if(this.chart.flagTooltip) {
                x = p.plotX;
                y = p.plotY;
            }
            return { x: x, y: y };
        } 
```

# ios - 在 iOS 上使用视频自动将广角图像与多个特写焦点相关联

> ID：15723351
> 
> 赞同：1
> 
> 时间：2013-03-30T20:51:21.513
> 
> 标签：ios, image-processing, camera, avfoundation

有人可以在 iOS 设备上为这个用例指明正确的方向吗？

1.  拍摄您想要的任何主题的广角图像，并在原始广角镜头中获得图像的特写。
2.  通过使用视频，将手机的摄像头移近特定的焦点。
3.  当找到所需的特写点时，用户通过按下按钮或一些其他手势来表示这一点。
4.  重复步骤 2 和 3，直到捕捉到所有特写点。

**如果可以通过使用图像识别来自动关联两个图像而无需直接用户输入来省略步骤 3，那就更好了。**

我知道我可能不得不使用[AV Foundation](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/01_UsingAssets.html)，但我不知道在那之后该去哪里。

# android - Android 操作和线程

> ID：15723352
> 
> 赞同：0
> 
> 时间：2013-03-30T20:51:30.670
> 
> 标签：android, multithreading, android-asynctask, httpclient

我目前正在编写和 android 应用程序，我正在使用 HttpClients 和那些类。我花了 2 个小时试图修复一些错误，直到我读到一篇文章说你不能在主线程中执行该操作。所以他们建议我使用 AsyncTask。

所以我的问题是，我怎么知道应该在不同的线程中完成哪些操作？有我可以阅读它们的列表吗？

任何信息都会很好，在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T21:13:53.413

A `NetworkOnMainThreadException` is thrown when an application attempts to perform a networking operation on its main thread. This is only thrown for applications targeting the Honeycomb SDK or higher. Applications targeting earlier SDK versions are allowed to do networking on their main event loop threads, but it's heavily discouraged.

Some examples of other operations that ICS and HoneyComb won't allow you to perform on the UI thread are:

1.  Opening a Socket connection (i.e. new Socket()).
2.  HTTP requests (i.e. HTTPClient and HTTPUrlConnection).
3.  Attempting to connect to a remote MySQL database.
4.  Downloading a file (i.e. Downloader.downloadFile()).

If you are attempting to perform any of these operations on the UI thread, you must wrap them in a worker thread. The easiest way to do this is to use of an `AsyncTask`, which allows you to perform asynchronous work on your user interface. An `AsyncTask` will perform the blocking operations in a worker thread and will publish the results on the UI thread, without requiring you to handle threads and/or handlers yourself.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T21:06:58.847

网络异常是唯一会通过阻塞 UI 线程在 android 中抛出的异常。因此，您必须通过在 android 中编程牢记 3 条规则。

不要让 UI-Thread 处理需要超过 5 秒才能完成的操作。

不要让广播接收器处理需要超过 20 秒才能完成 onReceive() 的操作。

并且不要在 UI-Thread 中处理网络操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T21:09:14.480

正如其他答案所说，Android不是*线程安全*的，这意味着：

*   您不能从后台线程操作 UI
*   您不能在 UI 线程上执行繁重的任务

其他此类操作可能包括处理大量数据/数据库操作/HTTP 请求/网络管理。真的，我相信任何不需要 UI 线程但确实涉及大量处理时间的东西都应该移到单独的线程中。

这是合乎逻辑的，因为如果您要进行繁重的处理，用户会感到延迟并且用户体验会受到影响（当然，肯定会被用来使系统过载等）因此，系统会杀死处理并在蜂窝后抛出错误。

因此，您想要使用异步任务。

[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)实际上只是打开了一个新线程，您可以在该线程上执行繁重的处理或网络连接。对于网络连接，我建议使用[像这样的 AsyncClients](http://loopj.com/android-async-http/)，它以一种更容易使用的格式实现 AsyncTask。还有像[UniversalImageLoader](https://github.com/nostra13/Android-Universal-Image-Loader)这样的库，可以让您将图像加载到网格/列表中。

我还强烈建议您阅读[讨论此问题的官方 Android 文档，并且](http://developer.android.com/guide/components/processes-and-threads.html)[在 Android 博客上](http://android-developers.blogspot.com/2009/05/painless-threading.html)也有一篇有用的帖子。最后，我觉得[这篇文章](http://www.techotopia.com/index.php/A_Basic_Overview_of_Android_Threads_and_Thread_handlers)可能对您有用，因为它可能包含您遇到的错误（错误，因为您在 UI 线程上执行了操作）。

我发现的其他资源：

*   CommonsWare 的[服务](https://github.com/commonsguy/cw-android/tree/master/Service)
*   这个 StackOverflow 问题有一些[很好的解决方案](https://stackoverflow.com/questions/1014528/asynchronous-http-client-for-java)。

总之，[这是一个使用 AsyncTask 的示例。](https://stackoverflow.com/questions/9671546/asynctask-android-example)（很好地回答了@Graham Smith）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T20:53:55.597

任何需要花费大量时间的事情都应该在另一个线程中完成。这包括大型 IO 和网络访问。但是我认为只有网络访问会引发异常，其他任何事情都会导致 UI 无响应。尽管如果您花费的时间太长，您将触发看门狗计时器并且该应用程序将被杀死。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T21:04:37.650

正如 Gabe 所提到的，您应该在单独的线程中执行繁重的任务。

关于 android 线程有两件重要的事情。

1是通用线程..（按照您的要求做的线程）

2是ui线程...（监听用户反应并绘制ui的线程）

您只能通过 ui 线程更改 ui(Views act)。

另一方面，在蜂窝之后，禁止在主线程中进行 http 请求。（称为严格模式）

简而言之，任何阻止用户交互的操作都应该在另一个线程中完成。

我希望这可以帮助你。

# javascript - javascript附加一个选项来选择

> ID：15723354
> 
> 赞同：0
> 
> 时间：2013-03-30T20:51:41.870
> 
> 标签：javascript, html, function

我实现了这个功能来根据选择的月份添加天来选择列表，但它不起作用。

```
function daysInMonth() {
  var year = document.getElementById(year).value;
  var month = document.getElementById(month).value;
  var dayscount = new Date(year,month, 0).getDate();
  var select = document.getElementById(day);
  for (var c = 1 ;  c <= dayscount ; c++){
    var option = document.createElement("option");
    option.text = c ;
    select.appendChild(option);
  }
} 
```

这是html：

```
<select name="evmonth" id = "month" onchange="daysInMonth()"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:16:52.120

只是一个评论：

您可以使用[Option 构造函数](http://www.w3.org/html/wg/drafts/html/master/forms.html#dom-option-tvd)来节省一些输入：

```
for (var c = 1 ;  c <= dayscount ; c++){
  select.appendChild(new Option(c));
} 
```

它也比 得到更广泛的支持`document.createElement`，但您可能不关心这些旧浏览器。

此外，与其每次都创建 28 到 31 个新选项，不如考虑根据需要添加和删除最后 3 个选项，例如：

```
<script>

function update(el) {
    var dayscount = el.value;
    var daysSelect = el.form.days;
    var daysLength = daysSelect.length;
    daysSelect.length = daysLength > 28? 28 : daysLength;

    while (daysSelect.length < dayscount) {
      daysSelect.appendChild(new Option(daysSelect.length + 1));
    }
}

</script>

<form>
  <select name="monthLength" onchange="update(this);">
    <option value="28">28
    <option value="29">29
    <option value="30">30
    <option value="31">31
  </select>

  <select name="days">
  </select>
</form> 
```

# ruby - 检查参数错误文本

> ID：15723361
> 
> 赞同：0
> 
> 时间：2013-03-30T20:52:23.247
> 
> 标签：ruby, rspec

使用 rspec 如何检查参数的错误文本是什么？

我有一个方法，如果你给它一个零，一个 ArgumentError 应该被提出。

```
if amount_paid <= 0
   raise ArgumentError, 'Please insert Money'
end 
```

我必须检查的 rspec 代码是：

```
lambda {@method.check_money("Cola","0.00")}.should raise_exception ArgumentError 
```

该测试通过。当我为该方法提供零时，会引发参数错误。但是，我如何也检查参数错误的文本？我的代码中有不同的参数错误，我想确保它是正确的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:28:01.247

[匹配错误的 RSpec 文档](https://www.relishapp.com/rspec/rspec-expectations/docs/built-in-matchers/raise-error-matcher#match-message-with-a-string)涵盖了您。他们的例子：

```
expect { raise StandardError, 'this message exactly' }.to raise_error('this message exactly') 
```

# jquery-mobile - Prevent JQuery Mobile swipe event over specific element

> ID：15723362
> 
> 赞同：6
> 
> 时间：2013-03-30T20:52:29.840
> 
> 标签：jquery-mobile, jquery, swipe, preventdefault

I am using jquery mobile and I need to prevent swipe event over specific element. Need of doing this is because I am using slider and I don't want the swipe event to be invoked resp. I want it to be prevented when user is manipulating with slider. I was not able to too find any solution so I am asking for help here.

This is my javascript code:

```
$( document ).on( "pageinit", "#demo-page", function() {
  $( document ).on( "swipeleft swiperight", "#demo-page", function( e ) {

  // We check if there is no open panel on the page because otherwise
  // a swipe to close the left panel would also open the right panel (and v.v.).
  // We do this by checking the data that the framework stores on the page element (panel: open).

   if ( $.mobile.activePage.jqmData( "panel" ) !== "open" ) {
     if ( e.type === "swipeleft"  ) {
        $( "#right-panel" ).panel( "open" );
      } else if ( e.type === "swiperight" ) {
           $( "#left-panel" ).panel( "open" );
      }
    }
  });
}); 
```

Thank you.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-30T21:27:53.950

You need to use both, `stopPropagation();` and `preventDefault();`.

As for the `.selector`, it can be a *tag* and *#ID* or *.class*, e.g. `[data-role=page]#PageID` , `div.ui-content`...etc

```
$(document).on('swipeleft swiperight', '.selector', function(event) {
 event.stopPropagation();
 event.preventDefault();
}); 
```

*   Reference: [stopPropagation();](http://api.jquery.com/event.stopPropagation/)

*   Reference: [preventDefault();](http://api.jquery.com/event.preventDefault/)

*   [Working example](http://jsfiddle.net/Palestinian/6APh7/)

# actionscript - .appendText 写在最后一个文本之上，而不在 GeolocationEvent.UPDATE 示例中替换它

> ID：15723366
> 
> 赞同：1
> 
> 时间：2013-03-30T20:52:50.473
> 
> 标签：actionscript, array-push, appendtext

actionscript 的新手并查看 GeolocationEvent.UPDATE 示例，使用 .appendText() 和 array.push 有一些意想不到的结果——我不知道它们是否都只是手机跟不上更新？

首先，文本问题是它覆盖而不是替换上次写入，因此在手机上运行应用程序几分钟后，您无法再读取数字。--使用 this.removeChild() 然后 addChild() 是关于试图让它在再次写入之前删除最后一次写入。

其次，数组的问题在于它在 trace() 中输出随机 .length 数字——长度看起来偶尔会重置为 2 ，然后再次计数，并且计数到看似随机的数字。我知道我不希望最终版本中的数组开销，但我正在尝试从它为什么不起作用中学习。

我已经注释掉了我尝试过的不同的东西——对不起，如果我在这里错过了一些基本的东西

```
var format:TextFormat = new TextFormat();
    format.color = 0xff0066;
    format.font = "Lucida Console";
    format.size = 20;
var fl_GeolocationDisplay:TextField = new TextField();
    fl_GeolocationDisplay.defaultTextFormat = format;   
    fl_GeolocationDisplay.x = 10; 
    fl_GeolocationDisplay.y = 20;
    fl_GeolocationDisplay.selectable = false;   
    fl_GeolocationDisplay.autoSize = TextFieldAutoSize.LEFT;
//fl_GeolocationDisplay.text = "Geolocation is not responding. Verify the device's     location settings.";
fl_GeolocationDisplay.text = " ";
addChild(fl_GeolocationDisplay);

var gpsArray:Array = [42.09646417];

if(!Geolocation.isSupported)
{
    fl_GeolocationDisplay.text = "Geolocation is not supported on this device.";
}
else
{
    var fl_Geolocation:Geolocation = new Geolocation();
    fl_Geolocation.setRequestedUpdateInterval(60000); //android overrides     setRequestedUpdateInterval()
    fl_Geolocation.addEventListener(GeolocationEvent.UPDATE, fl_UpdateGeolocation);
    fl_Geolocation.addEventListener(StatusEvent.STATUS, gpsStatusHandler);
}

function fl_UpdateGeolocation(event:GeolocationEvent):void
{
    //gpsArray.push(event.latitude);
    //gpsArray[gpsArray.length] = event.latitude;
    gpsArray.unshift(event.latitude);
    var speed:Number = event.speed * 2.23693629; 
    if (gpsArray[gpsArray.length - 2] != gpsArray[gpsArray.length - 1]) 
    {       
        trace(gpsArray.length + "|" + gpsArray[gpsArray.length - 2] + "|" +     gpsArray[gpsArray.length - 1]);
        trace(gpsArray[1] + "|" + gpsArray[0]);
        trace(gpsArray[gpsArray.length - 2] - gpsArray[gpsArray.length - 1]);
    }

    //this.removeChild(fl_GeolocationDisplay);
    fl_GeolocationDisplay.parent.removeChild(fl_GeolocationDisplay);
    //fl_GeolocationDisplay = null; //TypeError: Error #2007: Parameter child must be non-null.
    addChild(fl_GeolocationDisplay);
    fl_GeolocationDisplay.text = (event.latitude.toString() + " | " +     event.timestamp.toString());
    //fl_GeolocationDisplay.text = (event.latitude.toString() + "\n");
    //fl_GeolocationDisplay.appendText(event.latitude.toString() + "\n");
    //fl_GeolocationDisplay.appendText(event.longitude.toString() + "\n");
}

function gpsStatusHandler(event:StatusEvent):void {
    if (fl_Geolocation.muted) {
        fl_GeolocationDisplay.text = "Please verify the device's location     settings.";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:39:01.607

我真的无法理解您要做什么，我的意思是您说的是一件事，但您的代码似乎说了一些不同的东西。

还有一个严重的问题是不同代码片段的位置？似乎顶部在构造函数内部。然后底部是他们自己的功能？如果是这种情况，请确保构造函数没有运行多次（这似乎是问题并解释了为什么项目被“覆盖”在彼此之上。

您的问题还说明了有关 appendText 的一些信息，但您似乎想替换文本字段内的文本？AppendText 将在该文本字段内添加额外的文本。

无论如何，我从你的代码中做了一个实现，它从更新事件中获取“经度|纬度”，然后将它们附加到新行的文本字段中。也许这就是你想做的？我注释掉了 gps-array 因为我不知道你试图通过这样做来实现什么：

```
package {
    import flash.events.GeolocationEvent;
    import flash.events.StatusEvent;
    import flash.sensors.Geolocation;
    import flash.text.TextField;
    import flash.text.TextFieldAutoSize;
    import flash.text.TextFormat;

    public class Foobar extends MovieClip {
        var gpsArray:Array = [42.09646417];
        var format:TextFormat = new TextFormat();
        var fl_GeolocationDisplay:TextField = new TextField();
        var fl_Geolocation:Geolocation = new Geolocation();

        public function Foobar() {
            format.color = 0xff0066;
            format.font = "Lucida Console";
            format.size = 20;
            fl_GeolocationDisplay.defaultTextFormat = format;
            fl_GeolocationDisplay.x = 10;
            fl_GeolocationDisplay.y = 20;
            fl_GeolocationDisplay.selectable = false;
            fl_GeolocationDisplay.autoSize = TextFieldAutoSize.LEFT;
            //fl_GeolocationDisplay.text = "Geolocation is not responding. Verify the device's     location settings.";
            fl_GeolocationDisplay.text = " ";
            addChild(fl_GeolocationDisplay);

            if(!Geolocation.isSupported) {
                trace("unsupported");
                fl_GeolocationDisplay.text = "Geolocation is not supported on this device.";
            } else {
                trace("supported");
                fl_Geolocation.setRequestedUpdateInterval(500); //android overrides     setRequestedUpdateInterval()
                fl_Geolocation.addEventListener(GeolocationEvent.UPDATE, fl_UpdateGeolocation);
                fl_Geolocation.addEventListener(StatusEvent.STATUS, gpsStatusHandler);
            }
        }

        function fl_UpdateGeolocation(event:GeolocationEvent):void {
            /*gpsArray.unshift(event.latitude);
            var speed:Number = event.speed * 2.23693629;
            if (gpsArray[gpsArray.length - 2] != gpsArray[gpsArray.length - 1]) {
                trace(gpsArray.length + "|" + gpsArray[gpsArray.length - 2] + "|" +     gpsArray[gpsArray.length - 1]);
                trace(gpsArray[1] + "|" + gpsArray[0]);
                trace(gpsArray[gpsArray.length - 2] - gpsArray[gpsArray.length - 1]);
            }*/

            fl_GeolocationDisplay.appendText(event.latitude.toString() + "|" + event.longitude.toString() + "\n");
        }

        function gpsStatusHandler(event:StatusEvent):void {
            if (fl_Geolocation.muted) {
                fl_GeolocationDisplay.text = "Please verify the device's location     settings.";
            }
        }
    }

} 
```

# c - C Code result Explanation

> ID：15723372
> 
> 赞同：-3
> 
> 时间：2013-03-30T20:53:41.697
> 
> 标签：c

Hello could someone explain to me why this code turns out to show this (00 11 21 32 42) on the command prompt when I run the program?

Here's the code:

```
int main()
{
    int x = 0;
    int y = 0;
    while (x < 5) {
        y = x - y;
        printf("%i%i ", x, y);
        x = x + 1;
    }
    return 0;
} 
```

Thank you.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T20:57:18.957

The program loops 5 times, while `x` is in the range `[0,4]`, printing the values of `x` and `y`
The statement `y = x - y` tells us that `y`'s current value will depend on the current value of `x` and `y`'s previous value

```
 x   y
x = 0  ==>  y = 0 (0 - 0)
x = 1  ==>  y = 1 (1 - 0)
x = 2  ==>  y = 1 (2 - 1)
x = 3  ==>  y = 2 (3 - 1)
x = 4  ==>  y = 2 (4 - 2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T20:58:55.590

first iteration:

`x=0` `y=0-0=0`

second:

`x=1` `y=1-0=1`

third:

`x=2` `y=2-1=1`

forth:

`x=3` `y=3-1=2`

fifth:

`x=4` `y=4-2=2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T21:00:49.313

In each iteration of the loop, x is incremented by 1 and y (the second digit) is the result of the CURRENT x MINUS the PREVIOUS y.

# c# - STA Thread is not loading the Main Window in WPF

> ID：15723373
> 
> 赞同：1
> 
> 时间：2013-03-30T20:53:47.867
> 
> 标签：c#, .net, wpf, multithreading, sta

I am loading MainWindow in App_Startup (). I wanted to show the progress bar while loading the window. But it is not working :

```
void App_Startup(object sender, StartupEventArgs e)
{

    Thread bootStrapThread = new Thread(new ThreadStart(runBootStrapProcess));
    bootStrapThread.SetApartmentState(ApartmentState.STA);
    bootStrapThread.IsBackground = true;
    bootStrapThread.Start();
    _loadingProgressBar = new loadingProgressBar();
    _loadingProgressBar.ShowDialog();

} 
```

I want to load the window from thread :

```
void runBootStrapProcess()
        {
            MetadataReader mr = new MetadataReader();  
            if (currentVersionNo.Equals(remoteVersionNo))
            {
                Application.Current.Shutdown();
            }
            else
            {
                MainWindow mw = new MainWindow();
                mw.Show();
            }

            _loadingProgressBar.ShouldCloseNow = true;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:09:21.627

You can try this:

```
void runBootStrapProcess() {
  MetadataReader mr = new MetadataReader();
  if (currentVersionNo.Equals(remoteVersionNo)) {
    Application.Current.Shutdown();
  } else {
    System.Windows.Application.Current.Dispatcher.BeginInvoke(
    new Action(
      () => {
        MainWindow mw = new MainWindow();
        mw.Show();
      }));
  }
  _loadingProgressBar.ShouldCloseNow = true;
} 
```

You basically from the thread when you want to show the window send it to the main application thread. This thus stops the application from closing down when the thread exits since the `MainWindow` is Shown from the main thread.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:32:54.260

I suspect the window is missing the message pump since the WPF Application class with its Dispatcher is running on a different STA Thread

# kohana - Language in base url for multilingual website on Kohana 3

> ID：15723377
> 
> 赞同：0
> 
> 时间：2013-03-30T20:54:15.410
> 
> 标签：kohana, kohana-3

Couldn't find example for my particular case.

I am creating a multilingual website on Kohana 3.3\. I need to create URLs like:

```
http://example.com for English version
http://es.example.com for Spanish
http://fr.example.com for French 
```

and so on. But all examples, that I could find, were like `http://example.com/lang/`

What do I have to do to accomplish the goal? Do I have to make different applications for every language and then adjust `.htaccess`? Or there is a way to read the language from URL (in case of lang.example.com).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:45:25.710

I've never done this so I am merely attempting to describe how I would approach the problem as if I was faced with it.

Firstly, I'd start with setting up the server so all domains point to one, single application (which I assume you already have in place).

Next, in your `bootstrap.php`, when [setting the language](https://github.com/kohana/kohana/blob/3.3/master/application/bootstrap.php#L61-L64), I'd use a helper function which would define it for me, based on the URL the website is accessed at, and my bootstrap would then probably look like this:

```
/**
 * Set the default language
 */
I18n::lang(MyApp::get_request_language_code()); 
```

I would expect my `MyApp::get_request_language_code()` to return a string that would match the language code used for I18n class. This helper should also redirect the request if the url was invalid (e.g. xxx.example.com).

Then, I'd probably set the base url using `$_SERVER['HTTP_HOST']`, i.e.:

```
Kohana::init(array(
    'base_url'      => $_SERVER['HTTP_HOST'],
)); 
```

Alternatively, I'd have another helper function which would return the domain prefix which I would concatenate with my actual domain, e.g.:

```
Kohana::init(array(
    'base_url'      => MyApp::get_request_language_url_prefix().'example.com',
)); 
```

By setting the domain name with language prefix in `base_url` during Kohana::init() you ensure that all urls generated using either Route or URL class have appropriate language included.

And that's how I would try to solve my problem. Again, I'd like to stress that I am only attempting here to come up with a solution to a problem and the above approach has not been tested.

# javascript - Call Function with Delay When Textbox Changes in AngularJS

> ID：15723381
> 
> 赞同：24
> 
> 时间：2013-03-30T20:55:05.010
> 
> 标签：javascript, angularjs

Can't seem to google up an example of how this is done.

I have successfully created a textbox that calls a function every time it changes. What I would like to do is only call the function when the user has stopped typing for x milliseconds.

I know how to do it in JQuery using the keyup event, and can probably make it work this way, but want to do it "the Angular Way".

**Edit**

Maybe it wasn't clear from the tag or text, but I am using AngularJS, and want to use correct methodology for that framework to create this delay functionality.

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-12-31T15:23:49.573

There is `ng-model-options` for this manner

```
<input id="delayedModel" ng-model="delayedModel" ng-change="callDelayed()" ng-model-options="{ updateOn: 'default blur', debounce: {'default': 500, 'blur': 0} }" /> 
```

the `callDelayed` method only calls after 500 ms from typing the last char or on blur

Here is the documentation [https://docs.angularjs.org/api/ng/directive/ngModelOptions](https://docs.angularjs.org/api/ng/directive/ngModelOptions)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-30T21:09:29.647

For angular approach can inject `$timeout` in controller as dependency and use `$watch` on scope variable you've assigned in `ng-model`.

```
var timer=false;
$scope.ModelName='foo';
$scope.$watch('ModelName', function(){
  if(timer){
      $timeout.cancel(timer)
  }  
  timer= $timeout(function(){
      /* run code*/
   },delay)
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-25T07:53:58.793

While @charlietfl provided totally acceptable answer I would like to share with you another approach without using `$watch` method:

**Template:**

```
<input id="delayedModel" ng-model="delayedModel" ng-change="callDelayed()"/> 
```

**Controller:**

```
 (function (timer, delay) {
        $scope.callDelayed= function () {
            if(timer){
                $timeout.cancel(timer)
            }
            timer = $timeout(function(){

                /* run code*/

            }, delay)
        };
    })(false, 500); 
```

Maybe it's worth to point out why self-executing anonymous function is used. The main reason is to not pollute controller scope with `time` and `delay` variables. In this case they are defined in local function scope.

**[UPDATE]**

I've also found an interesting AngularJS project called [angular-debounce](https://github.com/shahata/angular-debounce) that makes it really easy to achieve same effect. Using `debounce` directive it's possible to dealy model update like this:

```
<input type="text" ng-model="delayedModel" debounce="500"></input> 
```

# ios - 来自 UIButton 的自定义 segue 转换

> ID：15723385
> 
> 赞同：0
> 
> 时间：2013-03-30T20:55:27.607
> 
> 标签：ios, ios6, storyboard, uistoryboardsegue

我的故事板上必须有 4 个场景，一切都很好，但现在我有一个带有垂直过渡覆盖的模态样式。我想要有模态风格，但有一个水平的封面过渡。

我使用圆形矩形按钮从一个场景切换到另一个场景，因为我的场景没有导航栏（因为我不需要它）。

我找到了一个教程，并创建了一个新类来覆盖 perform 方法。

这是我使用 perfom 方法的实现文件。

```
#import "JHCustomSegue.h"
#import "QuartzCore/QuartzCore.h"

@implementation JHCustomSegue

- (void) perform {

    UIViewController *sourceViewController = (UIViewController*)[self sourceViewController];
    UIViewController *destinationController = (UIViewController*)[self destinationViewController];

    CATransition* transition = [CATransition animation];
    transition.duration = .25;
    transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    transition.type = kCATransitionPush; //kCATransitionMoveIn; //, kCATransitionPush, kCATransitionReveal, kCATransitionFade
    transition.subtype = kCATransitionFromRight; //kCATransitionFromLeft, kCATransitionFromRight, kCATransitionFromTop, kCATransitionFromBottom

    [sourceViewController.navigationController.view.layer addAnimation:transition
                                                                forKey:kCATransition];

    [sourceViewController.navigationController pushViewController:destinationController animated:NO];

}

@end 
```

但是过渡不起作用我可以机会到我的任何场景，我总是停留在第一个屏幕上。

我做错了什么，因为该示例运行良好，但他们使用导航栏。

在此先感谢您的帮助。

# asp.net-mvc-3 - IIS (AWS) Deployment Issues

> ID：15723388
> 
> 赞同：1
> 
> 时间：2013-03-30T20:55:54.780
> 
> 标签：asp.net-mvc-3, iis, amazon-web-services

I am having some problems deploying an app I created to IIS on Amazon AWS. I have basically taken a sabbatical from development and haven't deployed an app in over a year.

The app has been transferred across fine and runs to the point of causing errors and displaying that frameworks are missing etc. I solved this in the past by:

1.  Changing what version of .NET was being used on the server
2.  Including all DLLs when the programme actually transferred (not what it does by default)

For the life of me, I cannot remember how to include all DLLs when deploying the programme so those can be relied on instead of the system's frameworks. Can someone please remind me?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T22:06:18.217

You can do Right Click on Project and select **Add Deployable Dependencies** from the context menu

![enter image description here](../Images/400055e087f42008bb8a534497994907.png)

> As of MVC4, all necessary assemblies to run an MVC application are automatically added to the bin directory, and any MVC4 application is bin-deployable (means you can run it in a server without explicitly installing MVC) . For this reason, the Include Deployable Assemblies dialog has been removed from Visual Studio 2012

More here: [https://stackoverflow.com/a/10441585/1241400](https://stackoverflow.com/a/10441585/1241400)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:44:35.770

Are you by any chance talking about [Bin Deploying MVC](http://www.hanselman.com/blog/BINDeployingASPNETMVC3WithRazorToAWindowsServerWithoutMVCInstalled.aspx)? It's kind of a pain to do, considering you need to remember to make sure those dependencies are in your bin folder any time you either move the application around, put it on a new server, etc.

What errors is your displaying? I think you'd probably be better off resolving those, if possible. Windows has gotten much friendlier with installing updates in the past few years.

# javascript - start next function after success

> ID：15723390
> 
> 赞同：0
> 
> 时间：2013-03-30T20:56:09.467
> 
> 标签：javascript, ajax, function, callback

i want to start a function after a successful ajax call. What i do now is this

```
function ajaxCall(url, types, next) {
    $.ajax({
        url: url,
        type: 'POST',
        beforeSend: function () {

            $("#plaatsMelding").append("<div id=\"" + types + "verwerkt\"><div class=\"progress-label\">" + types + " verwerken...</div></div>");
        },
        success: function (data) {
            $('#plaatsMelding').empty();
            $("#plaatsMelding").append("<div id=\"" + types + "verwerkt\"><div class=\"progress-label\">" + data + "</div></div>");
            //run next script
            if (next.length) {
                alert(next);
                next(); //this won't work because it will search for the next() function
            }

        }
    });
} 
```

i start this function with this function:

```
function saveRace() {
    ajaxCall("verwerkRace.php", "race", "savePlayers");
} 
```

so when that function is ready i want it to run the function "savePlayers". How can i do this?

```
function savePlayers() {
    ajaxCall("verwerkPlayers.php", "players");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T20:59:01.980

Don't pass a string, pass a function:

```
function saveRace() {
    ajaxCall("verwerkRace.php", "race", savePlayers);
} 
```

Then in your `success` you can do this:

```
if (next) {
    next(); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T20:59:26.607

Just pass in the function itself:

```
function saveRace() {
  ajaxCall("verwerkRace.php", "race", savePlayers);
} 
```

The JavaScript knows nothing of turning your string into a function to be called.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T21:01:56.873

As suggested, pass a function instead of a string

```
function saveRace() {
    ajaxCall("verwerkRace.php", "race", savePlayers);
} 
```

In success you can then check to ensure you're passing a function, and then fire it:

```
 if (next && typeof(next) === 'function') {
    next(); 
 } else {
    console.error('Error firing the callback!');
 } 
```

# mysql - mysql - It is ok to have n amount of columns?

> ID：15723391
> 
> 赞同：0
> 
> 时间：2013-03-30T20:56:22.640
> 
> 标签：mysql

I know it's possible to have n amount of columns, but is it proper mysql "coding standard"?

Here is what I'm doing:

I am a table `student` which includes all the students info including testScores:

```
student
-------
studId
name
age
gender
testId 
```

Instead of putting each individual test answer within the `student` table, I made a separate table called `testAnswers` that will hold each students test results:

```
testAnswers
-----------
testId
ques1
ques2
.
.
.
quesN 
```

Each entry in the `testAnswers` table corresponds to a specific student in the table `student`.

Of course, there will be an admin that will be able to add questions and remove questions as each year the test questions may change. So, if the admin were to remove an answer, than that means one of the columns would be removed.

只是重申一下自己，我知道这可以在 mysql 中编辑和删除表中的列，但是好的“编码标准”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:59:29.090

**使用两张桌子！**

您所描述的是一种`one to many`关系，因为可以有`one`学生到`many`考试成绩。您需要将一些`id`作为外键`student_id`并将其放在`id`表`testAnswers`中。然后，您可以设置约束，告诉数据库如何处理数据的删除。

正如一位评论者所提到的，使用一个表会导致中断`1nf`，或者`first normal form`这基本上是说在给定特定记录的情况下，您不能为单个列有多个值 - 您不能在给定表中为同一用户提供多个测试分数，而是将数据分成两个表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T21:04:13.550

The answer is a simple and clear: *No*. That's just not how you should do it except for very few corner cases.

The usual way to approach this is to normalize your database. Normalization follows a standard procedure that (among other things) avoids having a table with columns names `ques1, ques2, ques3 ...`.

This process will lead you to a database with *three* tables:

`students` - id, name, and other stuff that applies to one student each

`questions` - id and question text for each question

`answers` - this is a N:M relation between students: student_id, question_id, answer_value

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T21:37:16.157

...of course 2 tables, also could use 3, just remember to insert a studId column also in the testAnswers table (with REFERENCE to the student table) and an INNER JOIN testAnswers ON student.studId=testAnswers.studId at the SELECT query (to read the data).

# ruby-on-rails - delete method in Rails

> ID：15723392
> 
> 赞同：0
> 
> 时间：2013-03-30T20:56:24.237
> 
> 标签：ruby-on-rails

What's the difference between delete and destroy?

If we generate a scaffold, the default method to remove an date entry is `method: :delete`, while delete is actually not defined in the controller. So how does rails actually figure out what to do?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T21:15:52.677

`DELETE` is `HTTP` verb while `destroy` is an action in the controller. If you use resources in your application, `HTTP DELETE` requests are routed to `destroy` action in the controller (unless you change the default behaviour).

`method: :delete` in `link_to` options means that clicking a link would trigger `HTTP DELETE` request.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-30T21:07:20.983

As far as I know:

`Delete` method uses an `SQL DELETE` statement without instantiating the objects or running any callback.

`Destroy` makes the SQL call to the database and deletes the row in the table where the current object is contained, you can still manage the object as long as you have it scoped.

Hope this helps.

# python - memory management with objects and lists in python

> ID：15723396
> 
> 赞同：1
> 
> 时间：2013-03-30T20:56:53.090
> 
> 标签：python

I am trying to understand how exactly assignment operators, constructors and parameters passed in functions work in python specifically with lists and objects. I have a class with a list as a parameter. I want to initialize it to an empty list and then want to populate it using the constructor. I am not quite sure how to do it.

Lets say my class is --

```
class A:
    List = []                   # Point 1

    def __init1__(self, begin=[]): # Point 2
        for item in begin:
            self.List.append(item)

    def __init2__(self, begin):  # Point 3
        List = begin

    def __init3__(self, begin=[]): # Point 4
        List = list()
        for item in begin:
            self.List.append(item)

listObj = A()

del(listObj)

b = listObj 
```

I have the following questions. It will be awesome if someone could clarify what happens in each case --

1.  Is declaring an empty like in Point 1 valid? What is created? A variable pointing to NULL?

2.  Which of Point 2 and Point 3 are valid constructors? In Point 3 I am guessing that a new copy of the list passed in (begin) is not made and instead the variable List will be pointing to the pointer "begin". Is a new copy of the list made if I use the constructor as in Point 2?

3.  What happens when I delete the object using del? Is the list deleted as well or do I have to call del on the List before calling del on the containing object? I know Python uses GC but if I am concerned about cleaning unused memory even before GC kicks in is it worth it?

4.  Also assigning an object of type A to another only makes the second one point to the first right? If so how do I do a deep copy? Is there a feature to overload operators? I know python is probably much simpler than this and hence the question.

EDIT: 5\. I just realized that using Point 2 and Point 3 does not make a difference. The items from the list begin are only copied by reference and a new copy is not made. To do that I have to create a new list using list(). This makes sense after I see it I guess.

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:16:33.713

In order:

1.  using this form is simply syntactic sugar for calling the list constructor - i.e. you are creating a new (empty) list. This will be bound to the class itself (is a static field) and will be the same for all instances.
2.  apart from the constructor name which must always be ***init***, both are valid forms, but mean different things.
    *   The first constructor can be called with a list as argument or without. If it is called without arguments, the empty list passed as default is used within (this empty list is created once during class definition, and not once per constructor call), so no items are added to the static list.
    *   The second **must** be called with a list parameter, or python will complain with an error, but using it without the *self.* prefix like you are doing, it would just create a new local variable name *List*, accessible only within the constructor, and leave the static *A.List* variable unchanged.
3.  Deleting will only unlink a reference to the object, without actually deleting anything. Once all references are removed, however, the garbage collector is free to clear the memory as needed. It is usually a bad idea to try to control the garbage collector. instead. just make sure you don't hold references to objects you no longer need and let it make its work.
4.  Assigning a variable with an object will only create a new reference to the same object, yes. To create a deep copy use the [related functions](http://docs.python.org/2/library/copy.html) or write your own.
5.  Operator overloading (use with care, it can make things more confusing instead of clearer if misused) can be done by overriding some [special methods](http://docs.python.org/2/reference/datamodel.html#special-method-names) in the class definition.

About your edit: like i pointed above, when writing *List=list()* inside the constructor, without the *self.* (or better, since the variable is static, *A.*) prefix, you are just creating an empty variable, and **not** overriding the one you defined in the class body.

For reference, the usual way to handle a list as default argument is by using a *None* placeholder:

```
class A(object):
   def __init__(self, arg=None):
      self.startvalue = list(arg) if arg is not None else list()
      # making a defensive copy of arg to keep the original intact 
```

As an aside, do take a look at the python tutorial. It is **very** well written and easy to follow and understand.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T22:54:26.837

"It will be awesome if someone could clarify what happens in each case" isn't that the purpose of the dis module ? [http://docs.python.org/2/library/dis.html](http://docs.python.org/2/library/dis.html)

# image - Windows 8 Store Apps - BitmapImage

> ID：15723404
> 
> 赞同：1
> 
> 时间：2013-03-30T20:57:25.860
> 
> 标签：image, windows-8, visual-studio-2012, windows-store-apps

I need to use BitMapImage framework in my Windows Store Application. I need to create item in GridView and fill it by image. I know the following example:

```
Image img = new Image();
img.Source = new BitmapImage(new Uri(url));
imagesGrid.Items.Add(img); 
```

But, when I'm trying to use BitmapImage, I can't. Visual Studio doesn't have this object. I think i need to import framework, so does someone know that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:05:19.520

`BitmapImage` is in the `Imaging` namespace. You need to use this include:

```
using Windows.UI.Xaml.Media.Imaging; 
```

# php - 如何使用 Composer 要求项目的特定文件？

> ID：15723407
> 
> 赞同：2
> 
> 时间：2013-03-30T20:57:36.253
> 
> 标签：php, json, requirejs, composer-php

我有一个`composer.json`像这样的文件：

```
{
    "require": {
        "components/jquery": "*",
        "ajbdev/requirejs": "dev-master"
    }
} 
```

但我只想得到`ajbdev/requirejs/require.js`文件。我怎样才能用 Composer 做到这一点？

*编辑：*

正如@dev-null-dweller 建议的那样，以下对我有用，但它是最好的解决方案吗？

```
{
    "require": {
        "components/jquery": "*"
    },
    "scripts": {
        "post-autoload-dump": "rm -rf vendor/ajbdev && mkdir vendor/ajbdev && mkdir vendor/ajbdev/requirejs && wget -q --no-check-certificate -O vendor/ajbdev/requirejs/require.js https://raw.github.com/ajbdev/requirejs/master/require.js"
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:31:05.663

You can use [scripting hook](http://getcomposer.org/doc/articles/scripts.md) and get this file by providing full URL to it, ie:

```
{
    "require": {
        "components/jquery": "*"
    },
    "scripts": {
        "post-autoload-dump": "wget -q -P vendor/file/output/dir/ --no-check-certificate https://raw.github.com/ajbdev/requirejs/master/require.js"
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T21:05:58.743

*编辑*

*   在 github 上 fork 包，
*   删除除您希望在项目中包含的文件和包 composer.json 之外的所有文件。
*   将您的 fork 添加为自定义存储库：

    ```
    {
        "repositories": [
             {
                 "type":"vcs",
                 "url":"git@github.com:Shalkydri/requirejs.git"
             }
        ],
        "require": {
             "components/jquery": "*",
             "ajbdev/requirejs": "dev-master"
        }
    } 
    ```

*编辑*

要仅获取引用的“require.js”文件，您可以在在 github上找到文件及其原始版本之前从 packagist ( [https://packagist.org/packages/ajbdev/requirejs](https://packagist.org/packages/ajbdev/requirejs) )找到相应的 github 包：

[https://github.com/ajbdev/requirejs/blob/master/require.js](https://github.com/ajbdev/requirejs/blob/master/require.js) [https://raw.github.com/ajbdev/requirejs/master/require.js](https://raw.github.com/ajbdev/requirejs/master/require.js)

*Original Answer*

You can execute the following command before providing any version constraint such as "dev-master"

```
php composer.phar require ajbdev/requirejs 
```

# jquery - 使用图像高度（）设置另一个元素的边距

> ID：15723410
> 
> 赞同：1
> 
> 时间：2013-03-30T20:57:48.927
> 
> 标签：jquery, height

我试图使一个 DIV 的上边距等于另一个元素的高度。

我无法让它在 Chrome 中工作。在 FF 和 IE9 中似乎很好。

我正在使用 height() 来获取图像的高度。

然后我从另一个 DIV 的上边距中减去该值

```
var GalleryImgHeight = $("#container #gallery img").height();
$("#content_container").css("margin-top", - GalleryImgHeight);

<div id="container">
<div id="gallery"><img src="images/1.jpg" alt=""></div>
<div id="content_container">Lorem ipsum dolor sit amet, consectetuer.......</div>
</div> 
```

我在调整大小函数中有相同的代码，因此如果他们调整浏览器大小，它会重新计算。

对于 Chrome，它仅适用于调整大小。我猜初始函数是在加载图像之前获取高度。

我没有收到任何错误。

我应该尝试预加载图像吗？

这是完整的代码：[http ://troythobodeaux.com/temp/webdev/](http://troythibodeaux.com/temp/webdev/)

我这样做的原因是让一个 DIV 堆叠在另一个 DIV 之上。两个DIV是相对放置的，因为底部DIV的宽度是100%，所以它的尺寸取决于浏览器的大小。如果我错了，请告诉我，但我不能将顶部 DIV 的位置设置为绝对位置，因为我希望它在浏览器中居中。所以我不能真正将“left”属性设置为静态值。

Mabye 我采取了错误的方法，但很想听听另一种看法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T21:16:24.383

Gordan 的回答很好，但需要更改代码才能使以下行正常工作：

```
var origMarginTop = $("#content_container").css("margin-top"); 
```

因为它返回一个完整的css值的字符串，即。“10 像素”。显然你不能从 10px 中取一个纯数字，你需要它只是 10。（例如 10px-180 不起作用，10-180 会）

为了让它工作，我建议以下几行（添加了 1 行，更改了第 3 行）：

```
var marginTopString = origMarginTop.slice(0, -2);

if (GalleryImgHeight !== 0) {
$("#content_container").css("margin-top", marginTopString - GalleryImgHeight); 
```

对代码的这种修改对我来说很好。

# jekyll - Jekyll 自动重装

> ID：15723412
> 
> 赞同：42
> 
> 时间：2013-03-30T20:58:03.530
> 
> 标签：jekyll

第一次使用 Jekyll，看起来自动重新加载功能（运行`jekyll --auto --server`）仅由 Markdown 文件的更新触发。

这是正常行为吗？是否有任何方法可以更改其他类型的文件，如 css（我正在使用 scss）或 html 文件`_layouts`以触发自动重新加载？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-08-15T09:03:11.933

从 3.7 版开始运行`jekyll serve --livereload`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-31T09:38:08.227

[如此处](https://stackoverflow.com/questions/15591000/jekylls-auto-doesnt-work/15610676#15610676)所述，您需要降级 directory_watcher gem，它最近更新了一个重大更改。

```
sudo gem uninstall directory_watcher && sudo gem install directory_watcher -v 1.4.1 
```

（或者使用 jekyll 的最新 master 分支，该分支已修复为依赖于旧版本的目录观察程序）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T21:46:40.043

我没有发现这种情况，但也许你可以更新你的版本

```
git clone --depth 1 git://github.com/mojombo/jekyll.git
cd jekyll
gem build jekyll.gemspec
gem install jekyll 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-28T00:21:27.293

jekyll watch 选项的问题是只重建 _site 目录，

我建议你[喝 sass](https://github.com/shakyShane/jekyll-gulp-sass-browser-sync/blob/master/README.md)

有了它，您不仅可以构建 _site 文件夹，还可以自动重新加载完整的浏览器，每当您在任何文件中按 ctrl+s 时，浏览器都会重新加载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-26T17:38:05.663

如果您经常运行它，[Repla](https://repla.app) macOS 应用程序可以轻松启动 Jekyll，从而自动刷新。安装 Repla 后，您可以从 Jekyll 博客的根目录运行它并将`jekyll serve`命令传递给它。例如：

```
repla server "bundle exec jekyll serve --watch --drafts" -r "...done" 
```

Repla 将被配置为每次`...done`在控制台中打印时刷新，Jekyll 在完成编译您的站点时打印。

Repla 在显示您的站点的浏览器拆分下方的拆分中运行 Jekyll 服务器进程：

[![Repla 中的杰基尔](../Images/fdc77176b90425632498709a3d7bd339.png)](https://i.stack.imgur.com/3j92f.png)

Jekyll 在 Repla 中运行后，您还可以使用 将配置保存到文件中`⌘S`，通过关闭窗口将其关闭，然后双击文件再次运行。换句话说，您下次只需打开文件即可再次启动您的 Jekyll 博客，而完全不涉及终端。

披露：我维护 Repla 应用程序。

# objective-c - 如何确定 NSTableView 中代表特定对象实例的行？

> ID：15723414
> 
> 赞同：0
> 
> 时间：2013-03-30T20:58:19.663
> 
> 标签：objective-c, macos, cocoa, core-data, nstableview

我有一个由 NSManagedObject/CoreData 驱动的 NSTableView 和一个在同一表单上的自定义图形视图，它根据一些派生计算在 X/Y 网格上绘制每一行。图表视图上的每个点都会导致和事件在我的窗口控制器上运行（SEL）选择器。

我被困住了！我希望能够将 NSTableView 中的选择更改为图形视图选择并返回的对象。IE。使用图表更改 NSTableView 列表中的选择/行。

我有一个方法如下：

```
-(void)setSelectedOpportunity:(Opportunity *)opty
{
    _selectedOpportunity = opty;
    [_opportunityTable selectRowIndexes:???? byExtendingSelection:NO]; 
} 
```

_opportunityTable 是一个 NSTableView，它从名为 _opportunityAC 的 NSArrayController 获取内容。这个数组控制器从一个包含 NSManaged 对象的 NSManagedObjectContext 中获取数据，称为 Opportunity。

谁能告诉我如何确定表中代表对象 opty 的行。

谢谢伊恩

# php - heroku buildpack that supports the php imap

> ID：15723415
> 
> 赞同：0
> 
> 时间：2013-03-30T20:58:22.040
> 
> 标签：php, heroku, command-line-interface, heroku-toolbelt, buildpack

I am trying to locate or build a heroku buildpack that supports the php imap functions such as imap_open() Do I really need to recompile php and then store the binary on amazon?

The current buildpack I am using is [https://github.com/Americastestkitchen/heroku-wordpress-php.git](https://github.com/Americastestkitchen/heroku-wordpress-php.git)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:45:34.477

First try the [Winglian Buildpack](https://github.com/winglian/heroku-buildpack-php), a dramatically improved fork of the standard PHP buildpack (the standard PHP buildpack has a single blocking worker thread and does not even use Heroku's own vulcan build system to compile binaries). If that buildpack doesn't have imap installed yet, then at the very least it will be much easier to fork and improve it than to fork and improve the default buildpack.

There are other buildpacks on github, some of which may have imap already, but few of which are as professional as Winglian's.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:14:33.120

I needed this feature as well, so I forked the [Winglian Buildpack](https://github.com/winglian/heroku-buildpack-php), added imap support and cleaned some things up. The buildpack is available here, feel free to try it out ;) [https://github.com/mattiasottosson/heroku-buildpack-php](https://github.com/mattiasottosson/heroku-buildpack-php)

Demo app just showing php-config: [php-imap.herokuapp.com](http://php-imap.herokuapp.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:11:56.410

Well it turns out that yes you do need to recompile the binaries for custom extensions to php such as imap, sometimes there are no shortcuts!

# objective-c - NoMethodError with MacRuby call to objective-c method

> ID：15723416
> 
> 赞同：0
> 
> 时间：2013-03-30T20:58:29.823
> 
> 标签：objective-c, macruby

I'm trying to call and objective-c method from a MacRuby application and it works fine as long as I only have one variable in the method. If I add a second variable I get a NoMethodError.

I have a feeling this is something small, but I can't seem to figure it out.

This is the method that works:

`- (int)testMethod:(int) x`

and this is the one that doesn't:

`- (int)testMethod:(int) x secondVariable:(int)y`

When I call the first method through the MacRuby testClass.testMethod(1) everything works well but when I call the second I get: in `test_command': undefined method`testMethod' for :testClass (NoMethodError)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:35:36.393

The syntax for the second method in latest MacRuby should be the following:

```
testClass.testMethod(x, secondVariable:y) 
```

# python - What is wrong with my python program?

> ID：15723417
> 
> 赞同：-3
> 
> 时间：2013-03-30T20:58:36.147
> 
> 标签：python

I'm learning to code in python using Project Euler. I've written the following program, which I think should work:

```
a=1
b=1
c=1

while(a<=998):
while(b<=998):
    c=(1000-(a+b)

    if (a*a+b*b==c*c):
        print a,b,c
    b=b+1
a=a+1 
```

However, when I actually run the program from the terminal, the interpreter says that line 9

```
if (a*a+b*b==c*c): 
```

is invalid. Can anyone tell me why this is?

thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T20:59:40.737

The immediately preceding line is missing a closing parenthesis:

```
 c=(1000-(a+b) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T21:02:03.423

Assuming you are looking for Pythagorean triplets that satisfy a condition and you don't want triangles with negative sides:

```
for a in range(1, 999):
    for b in range(1, 1000 - a):
        c = 1000 - (a + b)
        if a * a + b * b == c * c:
            print a, b, c 
```

And you can get the unique triplets in increasing order like this:

```
for a in range(1, 999):
    for b in range(a, 1000 - a):
        c = 1000 - (a + b)
        if a * a + b * b == c * c:
            print a, b, c 
```

And there was a typo in your original code: `c=(1000-(a+b)`

# php - Select field and retrieve corresponding id

> ID：15723425
> 
> 赞同：0
> 
> 时间：2013-03-30T20:59:10.047
> 
> 标签：php, forms, select

I'm searching a way to retrieve an ID corresponding to a 'select' without execute any other query when I select an item from Database:

I use the select item in a form.

Here is the way I select some names from a table from Database:

```
 $sql = "SELECT ID, Name,Surname FROM Table;";
    $result = mysql_query($sql);
    if(!$result) die ('Unable to run query:'.mysql_error());
    $la = "<SELECT name='names'>";
    $la .= "<OPTION selected='selected' disabled='disabled' >Choose a name</OPTION>";

    while(list($id, $name) = mysql_fetch_row($result)) {
        $selectnames .= "<OPTION >$name</OPTION>";
    }
    $selectnames .= "</SELECT>"; 
```

I want to know the ID corresponding to the '$selectnames' I select from a form,

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:07:35.337

You need to set the `value` of the option to `$id`:

```
while(list($id, $name) = mysql_fetch_row($result)) {
    $selectnames .= "<OPTION value='$id'>$name</OPTION>";
} 
```

And then when the form is posted you can check `$_POST['names']` to get the ID. As you might have noticed, if you don't specify the `value` then `$_POST['name']` will contain the `$name` value rather than the `$id` value.

# php - 执行多个 GET 方法的表单

> ID：15723428
> 
> 赞同：0
> 
> 时间：2013-03-30T20:59:30.733
> 
> 标签：php

**问题**

我有一个选择框，它将执行一些操作，但我需要指定操作以导致如下所示：

```
recover=1&action=accept 
```

我没有以这种形式处理 recover=1 GET，所以我真的很困惑我该怎么做？有链接很简单，我只是把`recover=".$row['recover_id']."&action=accept`

我尝试过但没有成功：

```
 <form action='' method='GET'>                   
                <select name='recover=".$row['recover_id']."&action' class='select'>
                    <option value='accept'>Accept</option>
                    <option value='deny'>Deny</option>
                    <option value='delete'>Delete Recovery</option>
                </select>
                <input type='submit' value='GO' class='go'> 
```

但是然后链接是这样的：

```
?recover%3D59%26action=accept 
```

如果我手动输入链接，例如：

恢复=59&动作=接受

有用。

**问题**

我如何让它像我想要的那样工作？还有其他方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:07:38.453

您可能想尝试隐藏输入：

```
<input type="hidden" name="recover" value="<?php echo $row['recover_id']; ?>"> 
```

看起来您将 HTML 作为 PHP 字符串输出（您不应该这样做），但如果是这种情况，语法将如下所示：

```
<input type='hidden' name='recover' value='" . $row['recover_id'] . "'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:10:04.070

您想将另一个变量放在隐藏字段中。它不会显示给用户，但会在用户提交表单时发送。

```
<form action='' method='GET'>                   
    <select name='action' class='select'>
        <option value='accept'>Accept</option>
        <option value='deny'>Deny</option>
        <option value='delete'>Delete Recovery</option>
    </select>
    <input type='hidden' name='recover' value='<?php echo $row['recover_id']; ?>'>
    <input type='submit' value='GO' class='go'>
</form> 
```

确保您正在检查该`recover_id`值是否不会返回任何可能引发 HTML 的内容！每当涉及数据时，请务必检查输入和输出，以避免损坏网页（或其他坏东西）。

# php - 使用 AJAX 会话更新购物车数量值

> ID：15723429
> 
> 赞同：0
> 
> 时间：2013-03-30T20:59:32.067
> 
> 标签：php, jquery, ajax, wordpress

我正在使用 WP 站点，我有一个购物车（插件）和产品页面，其中列出了产品，它有一个 calss eStore_button。

```
<input class="eStore_button" type="image" alt="Add to Cart" src="http://localhost/met/wp-content/uploads/2013/03/add-to-cart.gif"> 
```

所以我在 WP Header 页面上做了一个 div 区域，其中将显示购物车数量

```
<td align="center" valign="middle" width="110" class="numberincart"><a href="<?php bloginfo('url'); ?>/shoppingcart" class="start-selling-first"><span id="numberincart"><p><?php echo $_GET['inCart'] ?></p></span></a></td> 
```

而且我尝试过当用户添加产品时，最近它会在标题顶部更新，所以我在下面写了一些东西但没有工作（结果没有在标题上更新，而使用萤火虫我没有发现任何错误）。

```
<script type="text/javascript">
jQuery(document).ready(function($){
     $(".eStore_button").live("click",function(event){
        $.ajax({ url: "<?php bloginfo('url'); ?>/products?inCart=<?php $_SESSION['inCart']?>",
        }
        error: function() {
            alert('Error occured');
        }
            });

        });
    });
</script> 
```

只有我这样放才有效，但不是没有刷新...

```
 <td align="center" valign="middle" width="110" class="numberincart"><a href="<?php bloginfo('url'); ?>/shoppingcart" class="start-selling-first"><span id="numberincart"><p><?php echo $_SESSION['inCart'] ?></p></span></a></td> 
```

# php - 两阶段 in_array 检查问题，不允许处理第二条语句

> ID：15723430
> 
> 赞同：0
> 
> 时间：2013-03-30T20:59:33.687
> 
> 标签：php, mysql, arrays, scope

### 背景：

我正在创建一种从一个表中提取信息的方法，检查它是否存在于第二个表中，如果不存在则插入信息。在比较数据时，首先要检查姓名是否匹配，然后再检查帐号是否与对应的姓名相符。此代码有大量注释，因此也可以遵循逐步过程。我非常感谢 stackexchange 的大师们提供的所有帮助，所以在摸索了一会儿之后，我把我的问题提出来了。

显然，即使存在匹配的名称，我的代码在检查帐号时也会中断。根据我最好的技能，所有代码都应该可以完美运行。

通过 all_validation_names 的 print_f 以及 all_validation_accounts 可以看到，第一个通过语句的信息包含在带有检查的数组中。

我的问题如下：为什么不能将存储在具有相应键（$check_account_number）的数组中的varchar变量传递给in_array。该函数总是返回 else，尽管变量为“1”，但使用 $all_validation_accounts 中的相应键找不到它。

请帮忙！

### 脚本处理代码

```
 if (in_array($check_agency_name,$all_validation_names))
        { 

            //Set a marker for the key index on which row the name was found
            $array_key= array_search($check_agency_name, $all_validation_names);

            //Now check if the account corresponds to the right account name
            if (in_array($check_account_number,$all_validation_accounts["$array_key"]))
            //NOTE: i've even tried strict comparison using third parameter true    
            {
            //Bounce Them If the Account Matches with a name So theres no duplicate entry (works)
            }

            //If the account doesn't correspond to the right account name, enter the information
            else
            //ALSO DOESNT WORK: if (!(in_array($check_account_number,$all_validation_accounts["$array_key"])))
            {
            // The account doesn't exist for the name, so enter the information
            //CODE TO ENTER INFORMATION THEN BOUNCE (works)
            break;  
            }
        } 
```

### 输出：

> 传递名称以匹配：a 和帐户：1
> 
> 存在帐户，因此所有验证数组如下： all_validation_names: Array ( [0] => a [1] => a [2] => b )
> 
> 所有验证帐户：数组（ [0] => 1 [1] => 2 [2] => 2 ）
> 
> 系统在数组 all_validation_names 中找到了 check_agency_name，所以让我们用这个键检查帐号：0
> 
> 账户名存在，但系统没有找到账号匹配，所以必须输入，就好像该账户从未存在过一样
> 
> 以下是应输入的信息：used_selector:0 Agency_name:A address: city: state: zip: account_number: 1
> 
> 现在系统应该输入信息，并将客户端弹回

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:44:26.053

这不是一个答案。您的代码充满了冗余，并且极难阅读。在向 SO 寻求帮助之前，您需要自己做更多的工作来缩小问题的范围。任何人都不太可能有耐心单步执行您的代码，尤其是因为如果没有您的不可见数据库的副本，他们也无法运行它。

但是，我觉得有义务告诉您，您的`__trim()`函数命名不当*，而且*对于它的作用来说太复杂了。它不是“修剪器”，因为与真实的不同，`trim()`它从字符串的“内部”以及末端删除字符。而且你的实现太复杂了。

它与这个单行函数相同：

```
function __trim($str, $charlist=" \t\r\n\0\x0B") {
    return str_replace(str_split($charlist), '', $str);
} 
```

一旦我看到那个 40 行的`__trim`函数，我就失去了阅读问题中更多代码的意愿。

## 更新

你缩小了你的问题范围，很好。在这一点上，我将尝试推断程序的状态。（这是你应该为我们做的事情......）

将您的代码精简到最低限度：

```
if (in_array($check_agency_name, $all_validation_names)) { 
    $array_key = array_search($check_agency_name, $all_validation_names);
    if (in_array($check_account_number, $all_validation_accounts["$array_key"])) {
        error_log('IF-BRANCH');
    } else {
        error_log('ELSE-BRANCH');
        // break;  // Removed because it makes no sense here.
    }
} 
```

让我们看看这些变量的值是什么：

```
$check_agency_name = 'a'
$all_validation_accounts = array(1, 2, 2);
$all_validation_names = array('a', 'a', 'b');
$array_key = "0";
$check_account_number = ??? 
```

你还没有告诉我们是什么`$check_account_number`。然而，我们仍然知道足以看到至少一件事是错误的。以下行都是相同的（只是用值替换变量名）：

```
in_array($check_account_number, $all_validation_accounts["$array_key"])
in_array($check_account_number, $all_validation_accounts["0"])
in_array($check_account_number, $all_validation_accounts[0])
in_array($check_account_number, 1) 
```

在这里我们看到，无论 , 的值如何`$check_account_number`，`in_array()`都会返回 false，因为它的第二个参数***不是数组***！

（顺便说一句，不要引用键查找：`$all_validation_accounts[$array_key]`更直接——引用除了掩盖你的意图之外什么也没做。）

此代码也会产生错误`Warning: in_array() expects parameter 2 to be array, integer given in /file/name.php on line ##`。这会立即指出问题所在，如果您检查了错误日志，您就会看到它。将您的 PHP 错误报告设置得非常高（`E_ALL | E_STRICT`），观察您的错误日志，并确保您的程序在正常运行时不会产生任何错误输出。如果您看到任何内容，请修复您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:21:12.997

**警告：这不是问题的答案**

让我们从你对类固醇的修剪开始：

使用内置的 php 函数更好地优化它，如下所示：

```
function __trim($str, $charlist = '') {
     $result = '';
     /* list of forbidden chars to be trimmed */
     $forbidden_list = array(" ", "\t", "\r", "\n", "\0", "\x0B");

     if (empty($charlist)) {
         for ($i = 0; $i < strlen($str); $i++){ 
             if(!in_array($str[$i],$forbidden_list))$result .= $str[$i];
         }
     } else {           // else means in case if (condition) was not met
         for ($i = 0; $i < strlen($str); $i++) {
             if(strpos($charlist, $str[$i])===false)$result .= $str[$i]; 
         }
     }
     return ($result);
 } 
```

**仪式讲座**

停止使用 mysql。它已被**弃用**。使用它意味着招来麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T22:29:38.300

通过重新思考检查背后的逻辑，我已经回答了我自己的问题。
感谢您的所有回复。

这是解决方案的链接。我已将其发布在网上以分享和优化，因为 SO 的所有伟大思想都值得拥有！

[https://stackoverflow.com/questions/15775444/entry-of-items-checking-sharing-optimization-from-post-form](https://stackoverflow.com/questions/15775444/entry-of-items-checking-sharing-optimization-from-post-form)

# ios - 是否可以使用 NSTimer 将越狱的 iPhone 从深度睡眠中唤醒？

> ID：15723432
> 
> 赞同：4
> 
> 时间：2013-03-30T20:59:44.390
> 
> 标签：ios, objective-c, iphone, jailbreak

注意：在编辑的更下方，有一些简单的代码会产生问题，而没有我的原始程序的全部复杂性。

我正在尝试为越狱的 iOS 编写一个闹钟应用程序。我有一个 UI 设置为一个独立的应用程序来安排警报，然后将警报信息保存到磁盘。保存文件由始终运行的启动守护程序读取，该守护程序处理实际调度警报。

我正在安排警报（编辑：在守护程序中）（`NSDate *fireDate`之前计算过）：

```
NSTimer *singleTimer = [[NSTimer alloc] initWithFireDate:fireDate
                                                interval:0
                                                  target:self
                                                selector:@selector(soundAlarm:)
                                                userInfo:alarm
                                                 repeats:NO];
[[NSRunLoop currentRunLoop] addTimer:singleTimer
                             forMode:NSRunLoopCommonModes];
[self.timers addObject:singleTimer];
[singleTimer release]; 
```

* * *

编辑：上面的代码在一个名为 的方法中运行，该方法`createTimers`由`reloadData`. `reloadData`从共享的保存文件中读取有关计时器的信息，并在`AMMQRDaemonManager`的 init 函数中调用它，以及每当管理器收到`notify_post`UI 应用程序已更新保存文件的通知时（使用 ）。

`soundAlarm:`方法（编辑：也在守护进程中）是：

```
- (void)soundAlarm:(NSTimer *)theTimer {
    NSLog(@"qralarmdaemon: sounding alarm");

    extern CFStringRef kCFUserNotificationAlertTopMostKey;

    CFMutableDictionaryRef dict = CFDictionaryCreateMutable(NULL, 3, &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks);
    CFDictionaryAddValue(dict, kCFUserNotificationAlertTopMostKey, kCFBooleanTrue);
    CFDictionaryAddValue(dict, kCFUserNotificationAlertHeaderKey, CFSTR("Title"));
    CFDictionaryAddValue(dict,kCFUserNotificationDefaultButtonTitleKey, CFSTR("OK"));

    SInt32 err = 0;
    CFUserNotificationRef notif = CFUserNotificationCreate(NULL,
              0, kCFUserNotificationPlainAlertLevel, &err, dict);

    CFOptionFlags response;
    if((err) || (CFUserNotificationReceiveResponse(notif, 0, &response))) {
        // do stuff
    } else if((response & 0x3) == kCFUserNotificationDefaultResponse) {
        // do stuff
    }
    CFRelease(dict);
    CFRelease(notif);

    // Do some other stuff
} 
```

这很好用，并显示手机是否解锁或锁定的警报。但是，如果手机被锁定足够长的时间进入深度睡眠，那么计时器将无法触发。

我不需要它来打开屏幕（尽管那会很好），因为除了显示警报之外，我还会播放声音，但我确实需要触发计时器，以便我知道何时启动声音。

有任何想法吗？

* * *

编辑：这是`main`守护进程的功能。

```
int main(int argc, char **argv, char **envp) {

    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    NSLog(@"qralarmdaemon: launched");

    AMMQRDaemonManager *manager = [[AMMQRDaemonManager alloc] init];

    NSTimer *keepRunningTimer = [[NSTimer alloc] initWithFireDate:[NSDate distantFuture]
                                                         interval:1000
                                                           target:manager
                                                         selector:@selector(keepRunning:)
                                                         userInfo:nil
                                                          repeats:YES];

    [[NSRunLoop currentRunLoop] addTimer:keepRunningTimer
                                 forMode:NSRunLoopCommonModes];

    // Execute run loop
    NSRunLoop *runLoop = [NSRunLoop currentRunLoop];
    [runLoop run];

    [manager release];

    NSLog(@"qralarmdaemon: exiting");

    [pool release];

    return 0;
} 
```

（不包括注册来自主应用程序的通知以了解何时读取保存文件等的代码，但我认为这不相关）。

* * *

编辑（再次）：我在运行循环中添加了一个计时器，该计时器在`[NSDate distantFuture]`. 这似乎可以延长计时器（在手机锁定后 1 分 45 秒安排的计时器关闭，并唤醒手机）但不是无限期地（在手机锁定后 7 分 30 秒安排的计时器没有关闭）。

* * *

编辑：我构建了以下玩具示例来说明问题，而不必担心与我的代码的其他部分的交互。

我编译了这段代码，通过 SSH 连接并运行它，然后锁定了我的手机。如果我将 更改`dateByAddingTimeInterval:480`为`dateByAddingTimeInterval:30`，我会得到以下输出：

```
2013-03-31 12:21:25.555 daemontimertest[6160:707] daemon-timer-test: launched
2013-03-31 12:21:56.265 daemontimertest[6160:707] daemon-timer-test: timer fired 
```

但是当它设置为 480 时，我等了 8 多分钟，只看到第一行：

```
2013-03-31 12:08:09.331 daemontimertest[6049:707] daemon-timer-test: launched 
```

* * *

`main.m`：

```
#import "MyClass.h"

int main(int argc, char **argv, char **envp) {

    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    NSLog(@"daemon-timer-test: launched");

    MyClass *obj = [[MyClass alloc] init];

    NSTimer *singleTimer = [[NSTimer alloc] initWithFireDate:[[NSDate date] dateByAddingTimeInterval:480]
                                                    interval:0
                                                      target:obj
                                                    selector:@selector(fireTimer:)
                                                    userInfo:nil
                                                     repeats:NO];

    [[NSRunLoop currentRunLoop] addTimer:singleTimer
                                 forMode:NSRunLoopCommonModes];

    // Execute run loop
    [[NSRunLoop currentRunLoop] run];

    [pool release];

    return 0;
} 
```

* * *

`MyClass.m`：

```
#import "MyClass.h"

@implementation MyClass

- (void)fireTimer:(NSTimer *)theTimer {
    NSLog(@"daemon-timer-test: timer fired");
}

@end 
```

* * *

编辑（3/31/13 5:50 EDT）：我在玩具应用程序代码中添加了以下代码，以纳入 Nate 关于使用 GCD`dispatch_after`功能的建议，但它似乎受到相同的时间限制。作为附加说明，主 UI 应用`/Applications`程序安装在`/usr/bin`.

```
 double delayInSeconds = 10.0;
    NSLog(@"daemon-timer-test: delay is %f",delayInSeconds);
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        NSLog(@"daemon-timer-test: time has passed.");
    }); 
```

* * *

编辑（3/31 5:54 PM）：另一个快速说明。在系统日志似乎进入深度睡眠之前，以下几行（不连续）出现在系统日志中，并且在我唤醒手机之前没有更多消息。我选择了看起来可能相关的那些；最后一条消息是深度睡眠前发送到 syslog 的最后一条消息。

```
Mar 31 17:34:23 Andrew-MacKie-Masons-iPhone lockdownd[50]: 002c1000 -[hostWatcher handleSleepNotification:service:messageArgument:]: <hostWatcher: 0x1cd59890> [CC535EDB-0413-4E5E-A844-4DA035E7217C 169.254.2.141:54757] [fd=13]: kIOMessageCanSystemSleep
Mar 31 17:34:23 Andrew-MacKie-Masons-iPhone lockdownd[50]: 002c1000 -[hostWatcher handleSleepNotification:service:messageArgument:]: <hostWatcher: 0x1cd59890> [CC535EDB-0413-4E5E-A844-4DA035E7217C 169.254.2.141:54757] [fd=13]: kIOMessageSystemWillSleep
...
Mar 31 17:34:29 Andrew-MacKie-Masons-iPhone lockdownd[50]: 00343000 __63-[hostWatcher handleSleepNotification:service:messageArgument:]_block_invoke_0: Allowing Sleep
Mar 31 17:34:29 Andrew-MacKie-Masons-iPhone powerd[42]: PM scheduled RTC wake event: WakeImmediate inDelta=645.40
Mar 31 17:34:29 Andrew-MacKie-Masons-iPhone powerd[42]: Idle Sleep Sleep: Using BATT (Charge:76%)
...
Mar 31 17:34:29 Andrew-MacKie-Masons-iPhone kernel[0]: en0::stopOutputQueues
...
Mar 31 17:34:29 Andrew-MacKie-Masons-iPhone kernel[0]: pmu wake events: menu 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T09:45:13.477

## 简答

是的，这是可能的（我已经做到了）。

我尝试了几种不同的方法，但我无法让我的守护进程/`NSTimer`以您描述的方式**失败。**但是，我还没有看到定义您的应用程序的所有文件/代码，所以我至少还关心一件事。

## 保持守护进程活着

如果您查看 Apple 文档中的[NSRunLoop run](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSRunLoop_Class/Reference/Reference.html#//apple_ref/occ/instm/NSRunLoop/run)：

> 如果没有输入源或计时器附加到运行循环，则此方法立即退出；否则，它通过重复调用 runMode:beforeDate: 在 NSDefaultRunLoopMode 中运行接收器。换句话说，此方法有效地启动了一个无限循环，该循环处理来自运行循环的输入源和计时器的数据。
> 
> 从运行循环中手动删除所有已知的输入源和计时器并不能保证运行循环将退出。OS X 可以根据需要安装和删除额外的输入源，以处理针对接收者线程的请求。因此，这些来源可能会阻止运行循环退出。

在您为守护`main`程序显示的代码中，您不会（直接）创建任何计时器。当然，我不知道你在做什么`[[AMMQRDaemonManager alloc] init]`，所以也许我错了。然后你使用：

```
NSRunLoop *runLoop = [NSRunLoop currentRunLoop];
[runLoop run]; 
```

启动运行循环。问题是，如果此时**没有**计时器，我不确定你的守护进程是否会继续存在。如果您查看上面的第二段，它还表明它*可能*还活着，所以也许这就是为什么我在尝试使用您的代码时没有看到我的守护进程死亡的原因。

你的*评论*说你看到守护进程活着，警报应该响起。但是，我想知道您的守护进程是否确实死了，然后**重新启动**。也许您还可以向我们展示您用于启动守护程序的 .plist 文件（位于 中`/System/Library/LaunchDaemons`）。

一个快速的实验，可能是**不***自动*启动你的守护进程。只需从文件夹中卸载 plist 文件`LaunchDaemons`，并确保终止该进程。然后，从命令行手动启动它，通过 ssh 进入手机：

```
$ /Applications/MyApp.app/MyDaemon 
```

然后，观察命令行。你会看到它是否死了，因为它实际上并没有被运行，所以如果它死`launchd`了就不会*重新启动。*

## 解决方案？

如果事实证明您**确实**遇到了它死亡的问题，那么我会尝试添加一个计时器，该计时器总是在您的守护进程执行时启动。如果您查看[我的其他示例](https://stackoverflow.com/a/15455596/119114)或[Chris Alvares 的守护程序教程](http://chrisalvares.com/blog/7/creating-an-iphone-daemon-part-1/)，它会显示这一点。在 daemon`main()`中，您设置一个`NSTimer`来触发一个`run:`方法。在该`run:`方法中，您可以使用`while`循环和`sleep()`调用。或者只是安排计时器以较慢的间隔重复。

我也不确定你的整个应用程序是如何工作的。它只是用于安排 ( `NSTimer`) 警报的工具吗？如果是这样，则可能在任何时候都没有设置警报。也许另一种解决方案，而不是使用`UIApplication`来`notify_post()`与守护进程通信一个新的计时器，您可以将守护进程配置为[简单地监视一个数据文件](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLaunchdJobs.html#//apple_ref/doc/uid/10000172i-SW7-SW8)。只要有新的`UIApplication`计时器，就会写出数据文件。然后，iOS 可以唤醒你的守护进程来安排`NSTimer`.

无论如何，这可能是与您的原始问题不同的问题，但它也可能是构建闹钟守护程序的更有效方法，因为如果没有活跃的警报，它实际上并不需要运行。

如果这些想法不能帮助您解决问题，请发布更多信息（`[AMMQRDaemonManager init]`可能会有所帮助）。

## 更新

还有两个建议：

*   确保您的应用程序（守护程序和 UI）安装在`/Applications`. 这是越狱应用程序的正常位置，但我只是想确保您没有将其安装在*沙盒*区域。

*   尝试用GCD 块替换您的`NSTimer`实现（对于**警报**，您可以保留`main()`守护进程*keepalive计时器）：*

```
 // you have used notify_post() to tell the daemon to schedule a new alarm:
   double delayInSeconds = 1000.0;
   dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
   dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
      // put timer expiration code here
   }); 
```

## 更新二

我还注意到，在您原来的`alarm:`回调中，您使用`CFUserNotificationReceiveResponse()`的是无限超时。这意味着如果用户不关闭弹出窗口，计时器回调将不会完成，我相信这意味着后续安排的计时器回调不会触发。可能，您应该将所有`CFUserNotification`代码放入它自己的方法（例如`showPopup`）中，然后让您的计时器回调如下：

```
- (void)soundAlarm:(NSTimer *)theTimer {
   dispatch_async(dispatch_get_main_queue(), ^(void) {
       [self showPopup];
   });
} 
```

然后是主程序（在您放在 Dropbox 上的代码中）。我建议将您的*主*计时器（您直接从中调用`main()`）更改为重复计时器，间隔相对较小，而不是使用带有`distantFuture`. 如果你愿意，你什么都做不了。这只是一个心跳。

主.m：

```
NSTimer *singleTimer = [[NSTimer alloc] initWithFireDate:[NSDate date]
                                                interval:5*60   // 5 minutes
                                                  target:obj
                                                selector:@selector(heartbeat:)
                                                userInfo:nil
                                                 repeats:YES];

[[NSRunLoop currentRunLoop] addTimer:singleTimer
                             forMode:NSRunLoopCommonModes]; 
```

我的班级.m：

```
- (void)heartbeat:(NSTimer *)theTimer {
   NSLog(@"daemon-timer-test: heartbeat timer fired");
} 
```

My last comment is that I don't use `syslogd`. I'm wondering if any of your tests are failing, not because timers aren't running, but because `NSLog` statements aren't showing up in your log file. I've done all tests where I actually run the daemon executable at the command line, ssh'd into the phone, and I just watch the console for `NSLog` output. Take logging out of the list of possible failure points ...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T05:26:04.777

I've worked out a method that works for me. As per my long exchange with Nate (and I definitely wouldn't have been able to work out what was going on without his help), this seems to happen automatically on some systems, but not on others. The problem on my phone seemed to be that `powerd` was putting the phone into some sort of deep sleep that paused the `NSTimer`s and didn't allow them to fire properly.

Rather than disabling deep sleep (which I suspect has negative power implications) I scheduled a power event:

```
NSDate *wakeTime = [[NSDate date] dateByAddingTimeInterval:(delayInSeconds - 10)];
int reply = IOPMSchedulePowerEvent((CFDateRef)wakeTime, CFSTR("com.amm.daemontimertest"), CFSTR(kIOPMAutoWake)); 
```

This successfully wakes the phone 10 seconds before the alarm is supposed to go off. (The interval isn't precise. I wanted it to be short enough that the phone wouldn't go back to sleep, but long enough that if the phone takes a moment to wake up the timer can still go at the right time. I'll probably shorten it to just 3 or 4 seconds.

The remaining problem is that the `NSTimer` for the alarm itself won't update automatically, and so it'll be late by whatever period the phone was asleep for. To fix this you can cancel and reschedule the NSTimer whenever the phone wakes up. I did this by registering for a notification that the power management system posts whenever the power state changes:

```
int status, notifyToken;
status = notify_register_dispatch("com.apple.powermanagement.systempowerstate",
                                  &notifyToken,
                                  dispatch_get_main_queue(), ^(int t) {
                                      // do stuff to cancel currently running timer and schedule a new one here
                                  }); 
```

The inefficiency here is that the notification is posted both on sleeps and wakes, but I haven't been able to find an alternative yet.

I hope this is helpful to anyone else who was struggling with this issue.

# objective-c - 动画调整 NSImageView 大小的最有效方法

> ID：15723434
> 
> 赞同：3
> 
> 时间：2013-03-30T21:00:08.060
> 
> 标签：objective-c, cocoa

我正在尝试在 0.1 秒的动画块中将 NSImageView 缩放/调整为其原始大小的 120%，然后在动画块完成后返回其原始大小。这样做的最快和最少 cpu 密集型的方法是什么？

我基本上是在寻找与 iOS 中使用的以下代码等效的代码，但我需要它用于 Mac 应用程序：

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration: 0.1];
image.transform = CGAffineTransformScale(image.transform, newSize, newSize);
[UIView setAnimationDelegate:self];
[UIView commitAnimations];
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration: 0.1];
image.transform = CGAffineTransformScale(image.transform,  originalSize, originalSize);
[UIView setAnimationDelegate:self];
[UIView commitAnimations]; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T05:00:57.200

`NSImageView`它可能会占用一些 CPU ，具体取决于图像是否在`NSAnimationContext`.

```
NSRect oldFrame = self.imageView.frame;
NSRect newFrame = NSMakeRect(self.imageView.frame.origin.x,
                             self.imageView.frame.origin.y,
                             self.imageView.frame.size.width*1.2f,
                             self.imageView.frame.size.height*1.2f);

[NSAnimationContext runAnimationGroup:^(NSAnimationContext *context){
    // Animating to the new frame...
    [context setDuration:0.1f];
    [[self.imageView animator] setFrame:newFrame];
} completionHandler:^{
    [NSAnimationContext runAnimationGroup:^(NSAnimationContext *context){
        // Back to the old frame...
        [context setDuration:0.1f];
        [[self.imageView animator] setFrame:oldFrame];
    } completionHandler:nil];
}]; 
```

但这种方式适用于 OS X 10.7 及更高版本。

这也可以通过看起来有点像`UIView`代码的方式完成，并且适用于 10.5 及更高版本：

```
- (void)whatever {
    NSRect oldFrame = self.imageView.frame;
    NSRect newFrame = NSMakeRect(self.imageView.frame.origin.x,
                                 self.imageView.frame.origin.y,
                                 self.imageView.frame.size.width*1.2f,
                                 self.imageView.frame.size.height*1.2f);

    [self performSelector:@selector(animateImageViewToFrame:)
               withObject:[NSValue valueWithRect:newFrame]
               afterDelay:0];
    [self performSelector:@selector(animateImageViewToFrame:)
               withObject:[NSValue valueWithRect:oldFrame]
               afterDelay:0.1f];
}

- (void)animateImageViewToFrame:(NSValue*)frameValue {
    [NSAnimationContext beginGrouping];
    [[NSAnimationContext currentContext] setDuration:0.1f];
    // Get smaller
    [[self.imageView animator] setFrame:[frameValue rectValue]];
    [NSAnimationContext endGrouping];
} 
```

当然，如果这行得通，那就太好了：

```
[NSAnimationContext beginGrouping];
[[NSAnimationContext currentContext] setDuration:0.1f];
[[self.imageView animator] setFrame:newFrame];
[NSAnimationContext endGrouping];

[NSAnimationContext beginGrouping];
[[NSAnimationContext currentContext] setDuration:0.1f];
[[self.imageView animator] setFrame:oldFrame];
[NSAnimationContext endGrouping]; 
```

甚至更好：

```
[NSAnimationContext beginGrouping];
[[NSAnimationContext currentContext] setDuration:0.1f];
[[self.imageView animator] setFrame:newFrame];
[[self.imageView animator] setFrame:oldFrame];
[NSAnimationContext endGrouping]; 
```

但是这些都没有做任何事情，原因我无法弄清楚。

有关更多信息，请参阅[NSAnimationContext 类参考](http://developer.apple.com/library/mac/#documentation/cocoa/reference/NSAnimationContext_class/Introduction/Introduction.html)。

# javascript - Javascript回调函数返回空对象

> ID：15723440
> 
> 赞同：0
> 
> 时间：2013-03-30T21:01:09.370
> 
> 标签：javascript, asynchronous, callback

我似乎无法正确获取此回调函数。

```
dispatch: function (query, callback) {
  var result = new Object() ;
  var qd = new queryDispatcher.init();
  var google = qd.callGoogle(query, function(a,b) {
    result.gdocs = a ; 
    result.gtotal = b ; 
  }) ;       

  var bing = qd.callBing(query, function(a,b) {
    result.bdocs = a ; 
    result.btotal = b ;            
  }) ; 

  var yahoo = qd.callYahoo(query, function(c,d) {
    result.ydocs = c ; 
    result.ytotal = d ; 
  }) ; 

  callback(result);
}, 
```

如您所见，查询已分派，结果将附加到结果对象。但是，回调（结果）仍然向父函数返回一个空对象，如下所示。

```
var results = meta.dispatch(query, 
  function(result) {
    console.log(result);
  });
}); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:17:55.283

重要的是要记住，使用异步方法，执行流程与代码流程不同。设置异步函数后，执行流程将继续，但异步函数的结果可能尚未准备好。在这种情况下，当执行到达时`callback(result)`，还没有在`result`对象上设置任何内容，因为没有一个异步函数完成。所以你需要以某种方式链接你的异步函数。“蛮力”（非并行）方法类似于：

```
qd.callGoogle(query, function(result1) {
    qd.callBing(query, function(result2) {
        qd.callYahoo(query, function(result3) {
             callback(combinedResult);
        });
    })
}) 
```

但我真的建议您研究一个流库，例如[node-seq](https://github.com/substack/node-seq)如果您使用的是 nodejs，或者[jQuery Deferred/Promise](http://api.jquery.com/category/deferred-object/)用于浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:18:03.570

您的回调是同步的，但属性是异步获取的。当你回调被调用时，你得到的确实是一个空对象。

您应该只在获得所有三个答案后才调用回调（例如，使用计数器）。

```
dispatch: function(query, callback) {
  var result = new Object(),
      qd = new queryDispatcher.init(),
      counter = 3;

  var google = qd.callGoogle(query, function(a,b) {
    result.gdocs = a ; 
    result.gtotal = b ; 
    checkCallback();
  }) ;       

  var bing = qd.callBing(query, function(a,b) {
    result.bdocs = a ; 
    result.btotal = b ;   
    checkCallback();         
  }) ; 

  var yahoo = qd.callYahoo(query, function(c,d) {
    result.ydocs = c ; 
    result.ytotal = d ; 
    checkCallback();
  });

  function checkCallback() {
    if (--counter == 0) {
      callback(result);
    }
  }
} 
```

但我宁愿选择[承诺](http://blogs.msdn.com/b/ie/archive/2011/09/11/asynchronous-programming-in-javascript-with-promises.aspx)而不是回调。这是一种强大的方法。

# jquery - 自定义工具提示 JQVMap

> ID：15723444
> 
> 赞同：4
> 
> 时间：2013-03-30T21:01:31.127
> 
> 标签：jquery, jqvmap

我有一个正在可视化一些数据的 JQVMap。地图上的每个国家都有特定的颜色，并有一个从 0 到 10 的特定数字。

我知道如何显示默认工具提示，您只需切换`showTooltip`到`true`，它就会显示国家名称`onmouseover`。我怎样才能在这些工具提示上显示与每个国家对应的数字？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T16:00:20.590

onLabelShow 有一个事件。从文档...

> **onLabelShow**函数（事件、标签、代码）
> 
> 在显示标签之前调用的回调函数。标签 DOM 对象和国家代码将作为参数传递给回调。

也许这样的事情对你有用？

```
$(document).ready(function () {
            jQuery('#vmap').vectorMap({
                map: 'usa_en',
                selectedRegion: 'co',
                backgroundColor: '#ffffff',
                color: '#E6E7E9',
                hoverColor: '#03235E',
                enableZoom: false,
                showTooltip: true,
                onLabelShow: function(event, label, code) {
                    if (states.toLowerCase().indexOf(code) <= -1) {
                        event.preventDefault();
                    } else if (label[0].innerHTML == "Colorado") {
                        label[0].innerHTML = label[0].innerHTML + " - The state where I live!!";
                    }
                },                
            });
        }); 
```

# c++ - calloc 的等效代码

> ID：15723445
> 
> 赞同：13
> 
> 时间：2013-03-30T21:01:51.487
> 
> 标签：c++, c

在给定的 c 代码片段中，该行的等效代码是 `int *count = (int *)calloc(sizeof(int), 256);`什么？

```
int *getCharCountArray(char *str)
{
   int *count = (int *)calloc(sizeof(int), 256);
   int i;
   for (i = 0; *(str+i);  i++)
      count[*(str+i)]++;
   return count;
} 
```

是否可以在不使用 calloc 的情况下做到这一点？我们如何在 c++ 中使用 malloc 和 new 声明它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-30T21:09:55.543

`calloc`基本上相当于`malloc`将`memset`所有数据设置为零字节：

```
void *like_calloc(size_t size, size_t num) { 
    void *ret = malloc(size * num);

    if (ret)  
        memset(ret, 0, size * num);
    return ret;
} 
```

C++ 提供了一种语法`new`，让您可以更简单地执行此操作：

```
int *count = new int[256](); 
```

Note the parens at the end. Also note, however, that you generally do *not* want to do this in C++ at all -- you'd normally want to write the code something like this:

```
std::vector<int> getCharCountArray(unsigned char const *str) { 
     std::vector<int> count(std::numeric_limits<unsigned char>::max()+1);

     for (int i=0; str[i]; i++)
         ++count[str[i]];
     return count;
} 
```

This obviously simplifies the code a fair amount, but there's more simplification than may be immediately obvious too. Specifically, this avoids the rest of the code having to track when the returned value is no longer needed, and deleting the memory at that point (but no sooner) as is needed with either the C version or the version using `new` in C++.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-30T21:07:15.320

这将分配 256 个整数，并将数组[值初始化](http://en.cppreference.com/w/cpp/language/value_initialization)为`0`

这会`calloc`在您的代码中执行此操作。

```
int *count = new int[256]();
//                       ^^ value-initialization 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T21:07:18.083

`calloc``malloc`与后面相同`memset`

# php - 为什么不使用包含变量？

> ID：15723449
> 
> 赞同：1
> 
> 时间：2013-03-30T21:02:36.417
> 
> 标签：php, html, seo, include

这是一个php新手提出的一个相当基本的问题，所以请耐心等待......为什么大多数关于php站点维护的教程都告诉你使用php包含但没有提到使用变量？例如，这个有什么问题吗：

```
<title><?php include 'includes/meta.php';
echo "$title_index";?></title>
<meta name="description" content=<?php include 'includes/meta.php';
echo "$desc_index";?>> 
```

...如果与此相比：

```
<title><?php include 'includes/sitename.php';?></title>
<meta name="description" content=<?php include 'includes/description.php';> 
```

?

在这种特殊情况下，将所有与 SEO 相关的元标记内容放在一个文件中，而不是将它们或其中的一部分分散在单独的文件中，不是更容易吗？

所以回到要点：是否有一些理由避免使用“主文件”，从而将包含的内容分散到多个文件中，这些文件在这里和那里都包含在它们的整体中？还是我只是读错了文章？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:13:40.100

这一切都归结为偏好。例如，Wordpress 在单独的文件中定义了方法，因此它更接近于您的第一个示例，例如

```
<?php include 'functions.php' ?>
<title><?= get_title() ?></title>
<body><?= get_body() ?></body>
etc. 
```

在我工作的闭源项目中，我们定义了所有变量，例如

```
<?php
$title = 'What';
$body = 'foo'; 
```

然后我们从那里包含模板文件。

```
include 'template.php'; 
```

模板的样子

```
<title><?= $title ?></title>
<body><?= $body ?></body>
etc. 
```

有很多方法可以在这里射击自己。选择你自己的冒险！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:05:03.507

我相信他们这样做是为了让您处理变量而不是直接的 HTML。这样，您可以更好地控制如何显示信息。

# r - 跨 10 个大型数据集相交并自动合并

> ID：15723452
> 
> 赞同：0
> 
> 时间：2013-03-30T21:02:50.603
> 
> 标签：r, loops, merge, automation, set

我有 10`data.frame`秒，有 2 列名称`s`和`p`. `s`是为了`sequence`和`p`是为了`p-values`。我想找到与所有`data.frame`s 相交的序列，所以我这样做了：

```
# 10 data.frames are a, b, c, ..., j
masterseq_list <- Reduce(intersect, list(a$s, b$s, c$s, d$s, e$s, f$s, g$s,h$s, i$s,j$s)) 
```

我想通过这个新的简化序列来`masterseq_list`合并每个数据帧`a:j`，所以我留下每个数据帧作为新列而不是`data.frame`保持完整。我知道我可以以某种方式使用此代码，但如果我想要的列当前是一个列表，我真的不确定该怎么做。`masterseq_list``s``p-values`

```
total <- merge(data frameA,data frameB,by="s") 
```

这些文件真的很大，所以我想找到一种方法来自动化这个，我怎样才能更快更有效地循环呢？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:54:12.173

我首先将所有`data.frame`s`list`放在首位：

```
my_l <- list(a,b,c)
# now get intersection
isect <- Reduce(intersect, lapply(my_l, "[[", 1))
> isect
# [1] "gtcg"  "gtcgg" "gggaa" "cttg" 

# subset the original data.frames for just this intersecting rows
lapply(my_l, function(x) subset(x, s %in% isect)) 
```

# prolog - prolog中的递归-基本情况下的错误

> ID：15723453
> 
> 赞同：0
> 
> 时间：2013-03-30T21:02:57.013
> 
> 标签：prolog

我正在尝试编写谓词 range\3 ，它接受三个参数，第一个是开始，第二个是结束，并在第三个参数中返回生成的列表。

例如响（1,5，L）。

```
L = [1, 2, 3, 4, 5] 
```

我用了这段代码

```
range(E,E,[E]).

range(S,E,L):-
    S1 is S + 1,
    range(S1,E,[S|L]). 
```

但它不起作用，当我使用跟踪命令知道错误在哪里时，我认识到基本情况是无用的，我也尝试了绿色切割！在基本情况下但它不起作用 range(E,E,[E ]),!.

所以，如果有人知道是什么问题，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:18:00.873

您正在以“错误”的方式构建列表。考虑一下，当您调用基本案例时，它将收到 consed 列表。如何匹配单个元素列表？试试吧

```
range(S,E,[S|L]):-
    S1 is S + 1,
    range(S1,E,L). 
```

# java - 带有 getInputStream() 的代码与 Java 1.6 兼容，但不再与 1.7 兼容

> ID：15723460
> 
> 赞同：1
> 
> 时间：2013-03-30T21:03:58.197
> 
> 标签：java

我有一个在 PC 和机器之间建立通信的软件，它曾经在 Java 1.6 中工作，但在 1.7 中不再适用。IOException --> "Invalid Http response" 是我在调用 getInputStream() 方法后立即得到的。似乎该方法得到了改进并且更加敏感，这意味着在 Java 1.6 中没有特别检查 responseCode= -1 结果。

借助 Wireshark，我检查了两个版本（1.6 和 1.7）是否发送和接收相同的以太网帧，两者也是如此。

我只能从 PC（客户端）端解决这个问题……这意味着无法编辑或更改服务器代码。

对于如何修改或实现新的东西以使代码与版本兼容，我将不胜感激。1.7 因为我不是前程序员...谢谢

**序列：**

1.  get 被称为
2.  返回 readResponse(..) 被调用
3.  getInputStream() --> IOException
4.  catch (Exception e) {System.out.println("发送get请求出错" + getURL() + " string: " + requestString); 返回错误。以太网异常；//去做

**这里是控制台输出：**

-1 发送获取请求时出错 ... 字符串：*APPLETCOMMINFO_ strResponse：以太网异常

**和守则：**

```
private String get(String requestString)/* throws ComunicationException*/ {
    HttpURLConnection httpURLConnection = null;
    OutputStream out = null;        

    try {   
        String encodedRequestString = URLEncoder.encode(requestString, "iso-8859-1");
        String path = getURL().getPath();
        if (!path.endsWith("/")) path = path + "/";
        path = path + encodedRequestString;
        URL fullURL = new URL(getURL().getProtocol(), getURL().getHost(), getURL().getPort(), path);
        httpURLConnection = (HttpURLConnection)fullURL.openConnection();
        httpURLConnection.setRequestMethod("GET");
        httpURLConnection.setDoOutput(false);
        httpURLConnection.setDoInput(true);
        httpURLConnection.setUseCaches(false);

        // Set timeout at 5s
        httpURLConnection.setConnectTimeout(m_nTimeOut);
        httpURLConnection.setReadTimeout(m_nTimeOut);

        return readResponse(httpURLConnection);

    } catch (Exception e) {
        System.out.println("error sending get request " + getURL() + " string: " + requestString);
        return Error.ethernetException; //TODO
    } finally {
        if (out != null) {
            try {
                out.close();
            } catch (Throwable t) {
                System.out.println("GET: out.close(), Class: Client");
            }
        }

        if (httpURLConnection != null) {
            try {
                httpURLConnection.disconnect();
            } catch (Throwable t) {
                System.out.println("GET: httpURLConnection.disconnect(), Class: Client");
            }
        }
    }       
}

/**
 * Reads the response from the server into a string.
 * The content length header must be set!
 * @param connection
 * @return
 * @throws IOException
 */
private String readResponse(HttpURLConnection connection) throws IOException {
    if (connection == null) throw new IllegalStateException("connection must not be null");

     connection.connect();

    int status = connection.getResponseCode();
    System.out.println(status);

    // InputStream aaa = connection.getInputStream();

    Reader reader = null;
    try {           
        reader = new InputStreamReader(connection.getInputStream(), "iso-8859-1");

        int readBufferSize = connection.getContentLength();
        if (readBufferSize < 0) {
            // use default buffer size
            readBufferSize = DEFAULT_READ_BUFFER_SIZE;
        }

        // if content length was set, read will be done in a single 
        // iteration because buffer fits... 
        StringBuffer response = new StringBuffer();
        char[] readBuffer = new char[readBufferSize];
        int len;
        while ((len = reader.read(readBuffer)) > 0) {
            response.append(new String(readBuffer, 0, len));                    
        }
        return response.toString();

    } catch (IOException ioe) {
        throw ioe;      
    } finally {
        if (reader != null) {
            try {
                reader.close();
            } catch (Throwable t) {
                System.out.println("readResponse: reader.close(), Class: Client");
                //log
            }
        }
    }
}

/**
 * 
 * @return the url
 */
public URL getURL() {
    return url;
} 
```

}

# android - A way to list all user or app-created broadcasters?

> ID：15723461
> 
> 赞同：0
> 
> 时间：2013-03-30T21:04:04.220
> 
> 标签：android, broadcastreceiver

Is there any way to list all broadcasts that were created by non-system applications?

I want to obtain a list of every app, service or broadcastReceiver that listens to system (or whatever) intents. Is is possible?

I hope the question is clear enough.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:22:42.107

> Is there any way to list all broadcasts that were created by non-system applications?

No.

> I want to obtain a list of every app, service or broadcastReceiver that listens to system (or whatever) intents. Is is possible?

You are welcome to build yourself a list of all "system (or whatever) intents", whatever that means. You are then welcome to use `PackageManager` and methods like `queryIntentActivities()` to determine what components will respond to them. This will not cover any `BroadcastReceivers` registered dynamically via `registerReceiver()`.

# javascript - Grid/Row view with jquery or javascript

> ID：15723464
> 
> 赞同：0
> 
> 时间：2013-03-30T21:04:23.540
> 
> 标签：javascript, jquery, jquery-ui

I would to make a javascript based grid/row view table.
For example, in a page that has like 10 pictures, the user has the ability to either see these picture as grid or to see it as rows. So, when he clicks on the grid icon he see the picture as grid, else he will see it as rows.
Can you give me some tips on how to do it ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:40:39.657

Basic mechanics for this is very simple. Just toggle a class on list container. In CSS set a set of rules for items that are descendent of that class to change floats or columns or css table properties . Also use that main list class to determine what you want displayed within the items, or how you want them displayed

Once class is removed they go back to block elements and default css

Simple example:

HTML:

```
<ul id="itemList">
    <li>
         <h3 class="title">Item # 1</h3>
        <div class="details">Detals # 1</div>
    </li>
</ul> 
```

CSS:

```
.grid li{ float:left; width:30%;margin-right:5px}
.grid .details{display:none} 
```

JS:

```
$('button').click(function(){
    var txt=$(this).text();
    txt= txt=='Grid view'? 'List view' : 'Grid view';
    $(this).text( txt);
    $('#itemList').toggleClass('grid')
}); 
```

DEMO: [http://jsfiddle.net/kzDNe/](http://jsfiddle.net/kzDNe/)

# c++ - 你如何为地图编写可选的比较函子？

> ID：15723465
> 
> 赞同：0
> 
> 时间：2013-03-30T21:04:34.033
> 
> 标签：c++

假设我有：`map<map_data, int, decltype(compare)> the_map`

```
struct map_data{
   int data1;
   int data2;
} 
```

我试过写比较：

```
struct
{
   bool operator()(map_data one, map_data two) const
   {
      if(one.data1 == two.data1)
         return one.data2 > two.data2;
      else
         return one.data1 < two.data1;
   }
}compare; 
```

但我得到了很多编译错误。我在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:05:24.463

我想它必须是这样的：

```
struct compare
{
   bool operator()(map_data const& one, map_data const& two) const
   {
      if(one.data1 == two.data1)
         return one.data2 > two.data2;
      else
         return one.data1 < one.data2;
   }
}; 
```

此外，您不需要`decltype`. 直接使用仿函数类的名称：

```
std::map<map_data, int, compare> the_map;
//                      ^^^^^^^ 
```

在这里，您可以看到上述代码编译的[实时示例。](http://liveworkspace.org/code/48Ihhx%24144)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T21:34:21.097

**`map_data`您忘记了定义后的分号。修复该问题，[C++11 中的编译成功](https://ideone.com/jE1ZeS)**：

```
#include <map>

using std::map;

struct map_data{
   int data1;
   int data2;
};

struct
{
   bool operator()(map_data one, map_data two) const
   {
      if(one.data1 == two.data1)
         return one.data2 > two.data2;
      else
         return one.data1 < two.data1;
   }
}compare;

int main() {
    map<map_data, int, decltype(compare)> the_map;
} 
```

* * *

但是，为此需要 C++11 并在您真正需要的只是类型时`decltype`实例化一个对象似乎有点浪费。`compare`

为什么不[传统](https://ideone.com/A78TDP)呢？

```
#include <map>

using std::map;

struct map_data {
   int data1;
   int data2;
};

struct map_data_comparator
{
   bool operator()(const map_data& one, const map_data& two) const
   {
      if (one.data1 == two.data1)
         return one.data2 > two.data2;
      else
         return one.data1 < two.data1;
   }
};

int main()
{
    map<map_data, int, map_data_comparator> the_map;
} 
```

You can see that I've also made your comparator arguments *const references*, just for the sake of it really.

# html - 复选框中断无表格表单布局

> ID：15723482
> 
> 赞同：0
> 
> 时间：2013-03-30T21:06:10.040
> 
> 标签：html, css, css-float

我有一个表单构建，`<ul>`但是当我在某处添加复选框时出现问题。
它打破了整个布局。
问题出在标签样式的某个地方，但不知道是什么？ [这是小提琴](http://jsfiddle.net/vlada/rB8Lc/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:15:04.507

您的下一行堆叠在浮动到其左侧的标签顶部，因为该复选框没有输入字段那么高。一个简单的解决方案是在你的 CSS 中添加另一个规则来清除它：

```
ul li { clear: left } 
```

[请参阅 jsFiddle。](http://jsfiddle.net/hAMJp/)

# c - gcc command for keeping addresses as they were?

> ID：15723493
> 
> 赞同：1
> 
> 时间：2013-03-30T21:07:28.663
> 
> 标签：c, gcc, assembly, compiler-construction

Is there a way to keep the offsets of all functions and variables as they were, everytime I'm compiling the program?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T21:27:35.860

No. This is not a limitation of the compiler per se, but a "logical" limitation. Imagine you have a box that is full of stuff. Now you want to add stuff on box A but you don't want a new box. Well, you can't, it's a physical limitation.

Or talking more *"computerish"*:

Function `a()` occupies from address 0 to 0xA00 (size 0xA00)

Function `b()` occupies from address 0xA01 to 0xB00 (size 0x100)

Now you modify `a()` so that's it's bigger, let's say its size is now 0xB00\. How would you keep both `a()` and `b()` in the same address? You can't unless you do some nasty tricks like splitting the function `a()` into 2 parts, but I think this is not what you want.

This without considering that modern OS have [ASLR](http://en.wikipedia.org/wiki/Address_space_layout_randomization) and other security methods.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T21:31:15.007

Yes and no. No because what m0skit0 says. Yes becayse you can tell the linker to set certain symbols at specified addresses - at least I know that's possible with GCC's ports for various embedded targets. It's relatively frequent to see code that uses this technique for instance to load firmware from a module that's loaded later or something like that.

The answers to [this question](https://stackoverflow.com/questions/682697/fixed-address-variable-in-c) tells you some ways to do it. This is very non-portable though, but I'm sure you understand all the pitfalls of doing this :)

# c - threads have the same id

> ID：15723498
> 
> 赞同：1
> 
> 时间：2013-03-30T21:07:58.790
> 
> 标签：c, linux, pthreads

I learn threads. I have read that thread terminates after it is out of a function (that is passed as parameter to pthread_create function). So I create threads in the loop, they are executed and afterwards they are terminated. (sorry for some long code)

But when I call a function pthread_create, new threads get the same ids. Why?

```
 struct data {
   FILE *f;
 };

void *read_line_of_file(void *gdata) {
  pthread_mutex_lock(&g_count_mutex); // only one thread can work with file, 
                                   //doing so we block other threads from accessing it
  data *ldata = (data *) gdata;
  char line[80];
  int ret_val  =fscanf(ldata->f,"%s",line);

  pthread_mutex_unlock(&g_count_mutex); // allow other threads to access it

  if (ret_val != EOF)
    printf("%s   %lu\n  ", line, pthread_self());

 // some time consuming operations, while they are being executed by one thread,
 // other  threads are not influenced by it (if there are executed on different cores)
  volatile int a=8;
  for (int i=0;i <10000;i++ )
  for (int i=0;i <10000;i++ ) {
     a=a/7+i;
  }

  if (ret_val == EOF)     // here thread ends
     pthread_exit((void *)1);
   pthread_exit((void *)0);
 }

int main() {
  int kNumber_of_threads=3, val=0;

  pthread_t threads[kNumber_of_threads];
  int ret_val_from_thread=0;

  data  mydata;

  mydata.f = fopen("data.txt","r");
  if ( mydata.f == NULL) {
    printf("file is not found\n");
    return 0;
  }

  for( ; val != 1 ;) {

    // THIS IS THAT PLACE, IDs are the same (according to the number of processes),
    // I expected them to be changing..
    for(int i=0; i<kNumber_of_threads; i++) {
      pthread_create(&threads[i],NULL,read_line_of_file, &mydata);
    }

    for(int i=0; i<kNumber_of_threads; i++) {
      pthread_join(threads[i], (void **) &ret_val_from_thread);
      if (ret_val_from_thread != 0)
        val = ret_val_from_thread;
    }

    printf(" next  %d\n",val);
  }
  printf("work is finished\n");

  fclose(mydata.f);
  return 0;
} 
```

as result, I see that id of threads are not being changed:

![enter image description here](../Images/c194d10773d00d8198d9e736c5709e5f.png)

I wonder, are new threads really created?

Thanks in advance!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T21:20:04.023

Thread IDs are only guaranteed to be different among currently running threads. If you destroy a thread and create a new one, it may well be created with a previously used thread ID.

# php - 会话不进行

> ID：15723503
> 
> 赞同：0
> 
> 时间：2013-03-30T21:08:34.230
> 
> 标签：php, session, logging

我有一个 account.php 页面，用户可以在其中更改保存在 mySQL 数据库中的帐户信息。当我单击它的链接时，我收到一条消息，提示“在访问此页面之前返回并登录！” 我的代码如下。

pro.php（登录后定向到的页面）

```
<?php

//STEP 1 Connect To Database
$connect = mysql_connect("Localhost","mlec2013_danny","8764963d");
if (!$connect)
{
die("MySQL could not connect!");
}

$DB = mysql_select_db('mlec2013_database');

if(!$DB)
{
die("MySQL could not select Database!");
}

//STEP 2 Declare Variables

$Name = $_POST['username'];
$Pass = $_POST['password'];
$Query = mysql_query("SELECT * FROM Users WHERE Username='$Name' AND Password='$Pass'");
$NumRows = mysql_num_rows($Query);
$_SESSION['username'] = $Name;
$_SESSION['password'] = $Pass;

//STEP 3 Check to See If User Entered All Of The Information

if(empty($_SESSION['username']) || empty($_SESSION['password']))
{
die("Go back and login before you visit this page!");
}

if($Name && $Pass == "")
{
die("Please enter in a name and password!");
}

if($Name == "")
{
die("Please enter your name!" . "</br>");
}

if($Pass == "")
{
die("Please enter a password!");
echo "</br>";
}

//STEP 4 Check Username And Password With The MySQL Database

if($NumRows != 0)
{
while($Row = mysql_fetch_assoc($Query))
{
$Database_Name = $Row['username'];
$Database_Pass = $Row['password'];
}
}
else
{
die("Incorrect Username or Password!");
}

//end of PHP scripting. Information displayed below is in the form of HTML, CSS, or Javascript.
?> 
```

帐户.php

```
<?php require_once('../../Connections/mySQL.php'); ?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_POST["MM_update"])) && ($_POST["MM_update"] == "form1")) {
  $updateSQL = sprintf("UPDATE Users SET first_name=%s, last_name=%s, mdcps_idnumber=%s, phone=%s, Username=%s, Password=%s, email=%s, class_code=%s WHERE id=%s",
                       GetSQLValueString($_POST['first_name'], "text"),
                       GetSQLValueString($_POST['last_name'], "text"),
                       GetSQLValueString($_POST['mdcps_idnumber'], "text"),
                       GetSQLValueString($_POST['phone'], "text"),
                       GetSQLValueString($_POST['Username'], "text"),
                       GetSQLValueString($_POST['Password'], "text"),
                       GetSQLValueString($_POST['email'], "text"),
                       GetSQLValueString($_POST['class_code'], "int"),
                       GetSQLValueString($_POST['id'], "int"));

  mysql_select_db($database_mySQL, $mySQL);
  $Result1 = mysql_query($updateSQL, $mySQL) or die(mysql_error());

  $updateGoTo = "account.php";
  if (isset($_SERVER['QUERY_STRING'])) {
    $updateGoTo .= (strpos($updateGoTo, '?')) ? "&" : "?";
    $updateGoTo .= $_SERVER['QUERY_STRING'];
  }
  header(sprintf("Location: %s", $updateGoTo));
}

$colname_Recordset1 = "-1";
if (isset($_GET['Username'])) {
  $colname_Recordset1 = $_GET['Username'];
}
mysql_select_db($database_mySQL, $mySQL);
$query_Recordset1 = sprintf("SELECT * FROM Users WHERE Username = %s", GetSQLValueString($colname_Recordset1, "text"));
$Recordset1 = mysql_query($query_Recordset1, $mySQL) or die(mysql_error());
$row_Recordset1 = mysql_fetch_assoc($Recordset1);
$totalRows_Recordset1 = mysql_num_rows($Recordset1);

$maxRows_DetailRS1 = 10;
$pageNum_DetailRS1 = 0;
if (isset($_GET['pageNum_DetailRS1'])) {
  $pageNum_DetailRS1 = $_GET['pageNum_DetailRS1'];
}
$startRow_DetailRS1 = $pageNum_DetailRS1 * $maxRows_DetailRS1;

$colname_DetailRS1 = "-1";
if (isset($_GET['recordID'])) {
  $colname_DetailRS1 = $_GET['recordID'];
}
mysql_select_db($database_mySQL, $mySQL);
$query_DetailRS1 = sprintf("SELECT * FROM Users  WHERE id = %s", GetSQLValueString($colname_DetailRS1, "int"));
$query_limit_DetailRS1 = sprintf("%s LIMIT %d, %d", $query_DetailRS1, $startRow_DetailRS1, $maxRows_DetailRS1);
$DetailRS1 = mysql_query($query_limit_DetailRS1, $mySQL) or die(mysql_error());
$row_DetailRS1 = mysql_fetch_assoc($DetailRS1);

if (isset($_GET['totalRows_DetailRS1'])) {
  $totalRows_DetailRS1 = $_GET['totalRows_DetailRS1'];
} else {
  $all_DetailRS1 = mysql_query($query_DetailRS1);
  $totalRows_DetailRS1 = mysql_num_rows($all_DetailRS1);
}
$totalPages_DetailRS1 = ceil($totalRows_DetailRS1/$maxRows_DetailRS1)-1;

//STEP 1 Connect To Database
$connect = mysql_connect("Localhost","mlec2013_danny","8764963d");
if (!$connect)
{
die("MySQL could not connect!");
}

$DB = mysql_select_db('mlec2013_database');

if(!$DB)
{
die("MySQL could not select Database!");
}

//STEP 2 Declare Variables

$Name = $_POST['username'];
$Pass = $_POST['password'];
$Query = mysql_query("SELECT * FROM Users WHERE Username='$Name' AND Password='$Pass'");
$NumRows = mysql_num_rows($Query);
$_SESSION['username'] = $Name;
$_SESSION['password'] = $Pass;

//STEP 3 Check to See If User Entered All Of The Information
//STEP 4 Check Username And Password With The MySQL Database
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:09:51.647

您需要[`session_start()`](http://php.net/manual/en/function.session-start.php)在脚本的开头添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:10:33.973

我在您的任何脚本上都没有看到[session_start() ？](http://php.net/manual/en/function.session-start.php)[session_start()](http://php.net/manual/en/function.session-start.php)需要在所有正在使用/访问会话的页面上使用。确保在标头/输出发送到浏览器之前使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T21:10:43.553

确保`session_start()`在每个使用会话的文档中打开 PHP 标记后立即添加。

# java - Java编译器项目

> ID：15723504
> 
> 赞同：1
> 
> 时间：2013-03-30T21:08:35.237
> 
> 标签：java, compiler-construction, compilation, nullpointerexception

我正在制作一个项目，它将在运行时编译 Java 源文件。

我遇到的问题是该`StandardJavaFileManager fileManager = compiler.getStandardFileManager(diagnostics, null, null);`行引发了 NullPointerException。

任何人都可以帮助解决这个问题吗？

```
JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();

DiagnosticCollector<JavaFileObject> diagnostics = new DiagnosticCollector<JavaFileObject>();

StandardJavaFileManager fileManager = compiler.getStandardFileManager(
        diagnostics, null, null);

System.out.println("Searching for scripts...");

File[] javaFiles = src.listFiles(new FilenameFilter() {
    public boolean accept(File src, String name) {
        return name.toLowerCase().endsWith(".java");
    }
});

Iterable<? extends JavaFileObject> compilationUnits = fileManager
        .getJavaFileObjectsFromFiles(Arrays.asList(javaFiles));

JavaCompiler.CompilationTask task = compiler.getTask(null, fileManager,
        diagnostics, null, null, compilationUnits); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:17:29.900

从[JavaDoc](http://docs.oracle.com/javase/7/docs/api/javax/tools/ToolProvider.html#getSystemJavaCompiler%28%29)的`getSystemJavaCompiler()`：

> 返回： 此平台提供的编译器；如果没有提供编译器，则返回 null

不存在系统编译器的最可能原因是您在不提供编译器的 JRE（Java 运行时环境）中执行程序。尝试改用 JDK（Java 开发工具包）环境。

# c# - 如何使用 Linq 的查询语法返回随机记录？

> ID：15723506
> 
> 赞同：0
> 
> 时间：2013-03-30T21:08:53.810
> 
> 标签：c#, .net, sql, linq

如何使用 Linq 的查询语法返回随机记录？

类似于以下 tsql 语句：

```
select top 10 * from sometable ORDER BY NewID() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:11:29.750

这应该是等效的：

```
var query =
    (from s in sometable      
    orderby Guid.NewGuid()    //Ordering by Guid.NewGuid() is the same as newid()
    select s)
    .Take(10);                //This cannot be done in query syntax. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T21:11:21.703

您可以[`Guid.NewGuid()`](http://msdn.microsoft.com/en-us/library/system.guid.newguid.aspx)与 linq 一起使用

```
var results = db.sometable.OrderBy(r => Guid.NewGuid()).Take(10); 
```

或在查询语法中：

```
var results = (from s in sometable orderby Guid.NewGuid() select s).Take(10); 
```

# database - 如何（快速）确定“类表继承”关系数据库模型中的子类型？

> ID：15723507
> 
> 赞同：0
> 
> 时间：2013-03-30T21:08:56.200
> 
> 标签：database, relational-database

假设我通过以下方式使用类表继承：

```
CREATE TABLE person
(
   id INT(10) NOT NULL PRIMARY KEY AUTO_INCREMENT,
   forename VARCHAR(30) NOT NULL,
   surname VARCHAR(30) NOT NULL
);

CREATE TABLE employee
(
   id INT(10) NOT NULL,
   salary INT(10),
   FOREIGN KEY (id) REFERENCES person (id)
);

CREATE TABLE volunteer
(
   id INT(10) NOT NULL,
   FOREIGN KEY (id) REFERENCES person (id)
); 
```

好的，现在说我想检查我网站上的权限，即我需要检查一个人是员工还是志愿者。我可以将“人”中的外键放入“类型”表，但这肯定会带来问题，因为员工的子类型可能会更改为志愿者，并且超类中的这种“类型”也需要更新。

如果没有这个，我将不得不在任一表中搜索 id 的存在以找到它的子类型，这将是非常低效的。我需要一种可以使用单个字段来确定子类型的方法。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:02:44.393

最简单的方法是使用视图。

```
create view persons_all as (
select p.id, p.forename, p.surname, 'employee' as category
from person p
inner join employee e
        on p.id = e.id
union all 
select p.id, p.forename, p.surname, 'volunteer' as category
from person p
inner join volunteer v
        on p.id = v.id
); 
```

您可以考虑将该文本缩短为员工的“E”和志愿者的“V”。

您应该声明“员工”和“志愿者”的主键。

您的设计中没有任何内容可以防止同一个人同时作为员工和志愿者进入。那*可能*不是你想要的。

# c++ - 可以使用delete释放按值返回给main函数的内存吗？

> ID：15723508
> 
> 赞同：-5
> 
> 时间：2013-03-30T21:09:01.100
> 
> 标签：c++, visual-c++

当我了解到这一点时，我的理解是 C++ 关键字 delete 只能安全地删除由 new 分配的内存。我想知道您是否可以从函数中按值返回结构，然后在 main.xml 中将其删除。这是我要问的一个例子......

```
#include <stdio>
#include <new>
using namespace std;

struct structure {
   int i;
   float f;
}

struct get_struct();

int main() {
   structure structure_1;
   structure_1 = get_struct();

   delete &structure_1;
   return 0;
}

struct get_struct() {
   struct test_struct = new struct;
   return test_struct;
} 
```

我知道我可以从函数返回一个指针并在 main 中分配一个指针以指向函数的返回值，这不是我要问的。我也尝试使用删除...

```
delete &struct; 
```

这不起作用，我得到一个 Visual Studio 错误。

所以我要问的是，有没有人知道一种方法可以通过 new 值从函数中返回结构，并使用 delete 来释放 main 中的内存。也许这是一个非常简单的任务，但我很难过。感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:26:42.253

## 一般部分

你的问题的一般答案是**不**，你不能。

*   `new`and`delete`运算符总是处理指针，而不是任何其他值类型。

*   您将永远不必手动删除任何值类型，并且永远，永远，永远（！）永远都不应该尝试这样做。

原因是，用于存储任何值的内存是从主内存的不同部分分配的，与用于存储`new`操作员返回的指针指向的值的内存不同。

一旦程序流进入函数，用于存储函数中使用的值的内存位置称为**堆栈**将自动分配，并在函数离开后自动清理。

（当然，在内部有一些工作要做，但你永远不必自己处理它，因为编译器会生成所需的设置和清理代码）

`new`另一方面，用于存储使用运算符生成的指针值的内存是从根本不会自动清理的内存的另一部分（通常称为*堆）分配的。*

## 以你的例子

看一下您的示例代码：

```
struct get_struct() {
   struct test_struct = new struct;
   return test_struct;
} 
```

第一个问题是，即使修复了一些语法错误：

```
struct structure get_struct() {
   struct structure test_struct = new structure;
   return test_struct;
} 
```

该代码将无法编译，编译器会抛出一些错误，例如：

```
error: conversion from ‘structure*’ to non-scalar type ‘structure’ requested 
```

因为`new structure`不使用该值，但只有指向该值的指针可用。要使两种类型都匹配，您必须使用`struct strcuture *test_test = new structure;`To 仍然按值返回，您可能会想到执行以下操作：

```
struct structure get_struct() {
   struct structure *test_struct = new structure;
   return *test_struct;
} 
```

其中 in 将按值返回为 test_struct 分配的数据的副本。

这种方法的问题是，现在您已经产生了一个内存漏洞，正如您通过仔细查看将要发生的事情所看到的那样：

*   `struct structure`在进入函数时，将在堆栈上分配足够的内存来保存指向 a 的指针的值。
*   操作员将`new`分配一些内存来保存*堆上*`struct structure`的a ，这是我已经讨论过的另一部分内存的通用名称。
**   指向此内存位置的指针将存储在 test_struct

    *   将制作 test_struct 指向的结构结构的副本。

    *   `struct structure`当进入函数时分配用于存储指针值的内存将被释放。* 

 *这种方法的问题是，在离开 get_structure 时只有指针，而不是指向的数据被返回给系统。由于您没有保留它的任何副本，因此内存实际上丢失了，因为没有机会`delete`再次在任何语句中引用它。

发生的事情如下：

```
 call to                    return
  main()    --------->  get_struct()    -------->
           get_struct()                            
 STACK
  +--------------+      +--------------+        +--------------+
  | structure_1; |      | structure_1  |        | structure_1  |
  +--------------+      +--------------+        +--------------+
  |              |      | ...          |        |              |
                        |              |
                        | test_struct *--+
                        +--------------+ | 
                        |              | |
                                         |              
 HEAP                                    |
                                         |
  |              |      |              | |      |              |
  |              |      +--------------+ |      +--------------+
  |              |      | structure    |<+      | structure    |
  |              |      | data         |        | data         |
  +--------------+      +--------------+        +--------------+ 
```

为了防止记忆丧失，你必须`delete`在离开之前`get_structure()`这样做，可能使用类似的东西：

```
struct structure get_struct() {
   struct structure *test_struct = new structure;
   struct ret = *test_struct;

   delete test_struct;
   return ret;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:13:01.117

经过一番思考，我将正确的解决方案移至顶部：

```
struct S { int a; S(int a) : a(a) { } };
S foo () { return S(5); }

int main() {
    S s = foo();
} 
```

此解决方案*不会*复制 S；它将被移动。由于它不涉及手动内存管理，因此更安全，因此被推荐。

* * *

如果这是一个愚蠢的任务，你绝对必须使用`new`：

```
struct S {};

S* foo () { return new S; }

int main () {
    S* ptr = foo();
    delete ptr;
} 
```

但它不被认为是现代 C++；您可以安全地按值返回，因为编译器会选择退出任何副本。*

# c++ - How to get the zero based indexes all sub-menus in a CMenu object

> ID：15723513
> 
> 赞同：0
> 
> 时间：2013-03-30T21:09:21.180
> 
> 标签：c++, mfc, win32com

I have a CMenu instance. I would like to dynamically traverse all menu and sub-menu items in the menu.

The API for getting a sub-menu is called CMenu::GetSubMenu. Its lone parameter is the sub-menu's position (zero based index) within the parent menu.

How do I get the positions of all sub-menus?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T21:13:40.027

Call [`CMenu::GetMenuItemCount()`](http://msdn.microsoft.com/en-us/library/bxha0csx.aspx) to determine the number of menu items. Iterate over the menu items, calling [`CMenu::GetSubMenu(nPos)`](http://msdn.microsoft.com/en-us/library/dtfc356x.aspx) for each to determine whether that menu item has a submenu (i.e. the call does not return `NULL`).

# objective-c - NSImageView - Huge memory leak?

> ID：15723516
> 
> 赞同：0
> 
> 时间：2013-03-30T21:09:49.427
> 
> 标签：objective-c, macos, cocoa, memory-leaks, nsimageview

For some reason, the allocation of two `NSImageView`s creates a huge memory leak.
Although `dealloc` method gets called in both `NSImageView`s.

I'm using `ARC`.

* * *

## With `NSImageView`s

As soon as the following getter method is called, a lot of memory is used.
This would be ok, but it doesn't get deallocated when the window is being closed...

```
- (NSView *)animationView {
    if (!_animationView) {
        _animationView = [[NSView alloc] initWithFrame:self.bounds];

        self.oldCachedImageView = [[NSImageView alloc] initWithFrame:self.bounds];
        [_animationView addSubview:self.oldCachedImageView];
        self.oldCachedImageView.wantsLayer = YES;

        self.cachedImageView = [[NSImageView alloc] initWithFrame:self.bounds];
        [_animationView addSubview:self.cachedImageView];
        self.cachedImageView.wantsLayer = YES;

        self.animationView.wantsLayer = YES;
    }

    return _animationView;
} 
```

![enter image description here](../Images/7a4e8ecdee9e21599be66e7e19928953.png)

The first circle is when the getter method above is called.
The second is when the window is deallocated.

* * *

## Without `NSImageView`s

Not with the two `NSImageView`s commented out.

```
- (NSView *)animationView {
    if (!_animationView) {
        _animationView = [[NSView alloc] initWithFrame:self.bounds];
        /*
        self.oldCachedImageView = [[NSImageView alloc] initWithFrame:self.bounds];
        [_animationView addSubview:self.oldCachedImageView];
        self.oldCachedImageView.wantsLayer = YES;

        self.cachedImageView = [[NSImageView alloc] initWithFrame:self.bounds];
        [_animationView addSubview:self.cachedImageView];
        self.cachedImageView.wantsLayer = YES;

        self.animationView.wantsLayer = YES;
         */
    }

    return _animationView;
} 
```

![enter image description here](../Images/0cff85f3c356f111f0ba00b324bd348b.png)

No memory leak here...

* * *

Anyone an idea why this happens?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:30:32.453

Use Instruments to trace the "Leaks". There is a Leaks tool in Instruments. Run it through the use of your app, all the way until you close your it completely. Make sure ARC isn't just deallocating it at a later time, which is possible. Keeping it in memory for a while allows for a faster retrieval if needed again.

However, if you do see a leak displayed, then there is an issue. Make sure there are no references to it you aren't noticing.

Use the leaks tool to figure out the memory location that is leaking if it displays some. Then try to match it with some object in your code. In other words, make sure it is the NSImageView that is leaking.

You can use:

`NSLog(@"Location = %@",NSObjectHere);`

To get the memory location. If it matches, then go back, once more, and find the reference you have to it. Unless it's an ARC bug, which is possible, though unlikely, then you are holding a reference to it somewhere.

For any more detail, please update your question with more code, no one can debug it for you without seeing more code.

Good luck!

## EDIT

Tutorial explaining the use of the Leaks tool at [http://mobileorchard.com/find-iphone-memory-leaks-a-leaks-tool-tutorial/](http://mobileorchard.com/find-iphone-memory-leaks-a-leaks-tool-tutorial/)

# django - Django admin - adding actions in Add page view

> ID：15723522
> 
> 赞同：0
> 
> 时间：2013-03-30T21:10:33.233
> 
> 标签：django, django-forms, django-templates, django-admin, django-views

I have a question about admin: i've defined an admin action 'create pdf', now i can see it in the select widget of the changelist view. I'd like to see it as a button in the add page, i've specified both actions_on_bottom and actions_on_top to True, but i see only the usual buttons (save and add another, save and continue, save).

how can i fix it?

thanks, Luke.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:59:39.793

Actions are only registered to the dropdown menus you'll have to add a button with javascript or override the changelist template(s)

# ruby-on-rails - RoR - 调用 fields_for 可变次数的辅助方法

> ID：15723526
> 
> 赞同：0
> 
> 时间：2013-03-30T21:10:47.550
> 
> 标签：ruby-on-rails, fields-for

在我的 Rails 应用程序中，我有一个`fields_for`多次使用的表单，有时嵌套调用`fields_for`.

不幸的是，图形设计师坚持输入字段的排序方式不能根据它们所属的模型进行分组。因此，我想制作一个`fields_for`可以为我轻松构建块的助手，但我看不到如何让助手方法嵌套可变数量的块。

为了说明，我设想代码如下所示：

```
<%= form_for @object do |f| %>
  <!-- The helper method should have a similar effect to the following... -->
  <%= f.fields_for :assoc_a do |assoc_a_builder| %>
    <%= assoc_a_builder.fields_for :assoc_b do |assoc_b_builder| %>
      <%= assoc_b_builder.text_field :field_name %>
    <% end %>
  <% end %>      
  <!-- ...when given the following data... -->
  <%= my_helper [f, :assoc_a, :assoc_b], :text_field, :field_name %>

<% end %> 
```

知道我怎么能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T18:25:01.140

我实现了以下辅助方法（可能不是最好的方法）。

视图中的示例函数调用：

```
<%= form_for @object do |builder| %>
  <%= nested_form_field 'My label text', [builder, :association_name, :field_name], :collection_select, :my_model_id, MyModel.all, :id, :name %>
<% end %> 
```

函数定义：

```
 # Outputs a label and input, nesting calls to fields_for if 'form' arg is an Array.
  # e.g. <%= nested_form_field nil, [builder, :approved_details], :collection_select, :my_model_id, MyModel.all, :id, :name %>
  # Make label_text nil for just the input tag, no wrapping elements.
  def nested_form_field label_text, form, helper_method, field, *args_for_helper_method
    if form.is_a? Array
      if form.length > 1
        form.shift.fields_for form.first do |builder|
          form[0] = builder
          nested_form_field label_text, form, helper_method, field, *args_for_helper_method
        end
      else
        nested_form_field label_text, form.first, helper_method, field, *args_for_helper_method
      end
    else
      if label_text.nil?
        form.send helper_method, field, *args_for_helper_method
      else
        %Q(<div class=row>
        <div class=span4>#{label_text}</div>
        #{ form.send helper_method, field, *args_for_helper_method }
        </div>).html_safe
      end
    end
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T10:42:46.080

```
<%= simple_form_for(@primer3) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <% @primer3.attributes.each_pair do |name, value| %>
      <%= f.input name if value %>
    <% end %>
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

# javascript - 检测代码中的 node.js/javascript 内存泄漏

> ID：15723532
> 
> 赞同：8
> 
> 时间：2013-03-30T21:11:43.953
> 
> 标签：javascript, node.js, memory-leaks

我有[一些](http://pastie.org/private/twjvxnigdph4qjd30s9arw)正在运行的代码，但是其中存在内存泄漏。

在 node.js 中跟踪内存泄漏的一些好的策略是什么？

查找此类泄漏时应遵循哪些步骤？

如何跟踪代码中的泄漏？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-30T21:23:49.603

您可以通过分析应用程序的内存使用情况来解决这个问题。

Javascript 对象是在堆上分配的，因此您需要一个可以转储堆的工具。获取堆转储后，您可以检查它并查看存在多少给定对象（或函数）的实例。

例如，对于您的代码，您知道每当用户连接时您都会创建一个套接字。在连接三个用户时转储堆应该显示约 3 个套接字。在这些用户断开连接后转储堆应该显示 ~0 个套接字。

* * *

您实际上可以将 Chrome 堆转储分析器与 Node.js 堆转储一起使用。

*   关于 Chrome 堆转储分析器的文档：[https ://developers.google.com/chrome-developer-tools/docs/heap-profiling](https://developers.google.com/chrome-developer-tools/docs/heap-profiling)

*   允许您获取 Node.js 堆转储并在 chrome 中检查它们的项目：[https ://github.com/bnoordhuis/node-heapdump](https://github.com/bnoordhuis/node-heapdump)

* * *

仅供参考，函数将显示在该`(closure)`部分下的堆转储中。

您需要确保为函数命名（即使它们不需要名称），以便它们在堆转储中显示为有用的东西。

例如，像

`function() { }`

只会显示`function()`在堆转储中。然而：

`function taggedFunction() { }`

将显示`function taggedFunction()`在堆转储中。如果您创建 100 个 taggedFunction，那么您将在堆转储中看到 100 次 taggeFunction。基本上，命名你的函数可以让你弄清楚你是否继续创建和泄漏它们。

# php - MySQL sort images by most viewed

> ID：15723534
> 
> 赞同：1
> 
> 时间：2013-03-30T21:11:46.957
> 
> 标签：php, mysql, sorting

I have an images table which stores an image id, title, the user who uploads it, a timestamp and file extension.

I also have a views table which records when an image has been viewed. the columns are id, image id, timestamp and the user who viewed the image.

What i need and have no idea how to do is to run an SQL query which will return a set of images in order of the most viewed.

I've been looking around on here and Google but just don't know what to actually search.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T21:16:24.643

```
SELECT images.*, count(views.view_id) view_count
FROM images
LEFT JOIN views on views.image_id = images.image_id
GROUP BY images.image_id
ORDER BY view_count DESC 
```

[http://sqlfiddle.com/#!2/a669b/5](http://sqlfiddle.com/#!2/a669b/5)

The GROUP BY clause tells the "aggregate functions" (count, sum, min, max, etc) how to behave. In this case, we are grouping by image and grabbing the count of views per image. `COUNT` only count non-null values, and we don't want to count the views that don't exist, so we're keying off `views.view_id`.

If you do an INNER JOIN rather than a LEFT JOIN, it will only return the images which have views. The LEFT JOIN allows us to get counts of zero.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:16:59.630

You need to be looking at joins, join the images table to the images viewed table, then you can run one query across both tables.

# c# - Visual Studio 不会在单独的 .cs 文件中找到类

> ID：15723535
> 
> 赞同：5
> 
> 时间：2013-03-30T21:11:50.143
> 
> 标签：c#, visual-studio-2010, class, reference, .net-assembly

在我正在处理的项目中，我在单独的文件中有两个类。Windows 窗体类专门。当我尝试使用 .cs 文件中的一个类时，Visual Studio 找不到它。它强调代码行并询问我是否缺少指令或程序集引用。我不知道为什么它没有看到另一个类，因为两个 .cs 文件都在同一个目录中。有没有人知道为什么会发生这种情况以及如何解决它？

此外，其中一个 .cs 文件是从单独的项目中复制的，所以我不知道这是否会导致某种问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T21:14:24.837

> 此外，其中一个 .cs 文件是从单独的项目中复制的，所以我不知道这是否会导致某种问题。

您应该检查所涉及的名称空间。我的猜测是来自另一个项目的那个位于不同的命名空间中。所以，如果你有：

```
namespace FirstNamespace
{
    class Foo
    {
        private Bar bar = null;
    }
} 
```

和

```
namespace SecondNamespace
{
    class Bar 
    {
    }
} 
```

然后在第一堂课中你需要：

```
using SecondNamespace; 
```

to allow you to use `Bar` without any qualification.

Or - possibly better - you could just change them so they're both in the same namespace.

Better yet, you could avoid copying anything from a different project, and instead use class libraries for code sharing.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-19T11:42:23.467

In my case namespace was fixed but still visual studio did not recognized classes. I solve it by right click on the class file and click 'Include In Project'.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T21:14:57.207

If you copied the second file from another project, it could be that the class it contains is in a different namespace.
Add a `using <namespace>` at the beginning of the other file...

# html - CSS3 Rotation Snapback

> ID：15723542
> 
> 赞同：1
> 
> 时间：2013-03-30T21:12:29.033
> 
> 标签：html, css

I am trying to create a little fun toy to play with on my website, basically whenever you hover the logo, it rotates until you remove the cursor. I have achieved this by using rotate in CSS3, and it is working. But i was wondering if there is a way to prevent the "Snapback" (Smoothly bring it back to its original position when you unhover instead of it just jumping back instantly)

The code i am using is this:

```
 #logo1:hover{
    -webkit-animation: spin 0.7s infinite linear;
-moz-animation: spin 0.7s infinite linear;
-o-animation: spin 0.7s infinite linear;
-ms-animation: spin 0.7s infinite linear;
}
@-webkit-keyframes spin {
0% { -webkit-transform: rotate(0deg);}
100% { -webkit-transform: rotate(360deg);}
}
@-moz-keyframes spin {
0% { -moz-transform: rotate(0deg);}
100% { -moz-transform: rotate(360deg);}
}
@-o-keyframes spin {
0% { -o-transform: rotate(0deg);}
100% { -o-transform: rotate(360deg);}
}
@-ms-keyframes spin {
0% { -ms-transform: rotate(0deg);}
100% { -ms-transform: rotate(360deg);}
} 
```

im thankful for any help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:15:59.437

What you are trying can be easily accomplished by simply using CSS3 transforms, animation is not required here as you are starting from 0 to 360 deg so try this

```
.class {
   -moz-transform: rotate(0deg);
   /* Add up other required proprietary properties here */
   transition: all 1s; /* This will handle the transition to be 
                          smooth on mouse out */
}

.class:hover {
   -moz-transform: rotate(360deg);
   /* Add up other required proprietary properties here and 
      transition property is not required here */
} 
```

# android - 如何使用 adobe air 在状态栏中将我的应用程序图标显示为通知

> ID：15723543
> 
> 赞同：0
> 
> 时间：2013-03-30T21:12:34.830
> 
> 标签：android, actionscript-3, air, adobe

我使用 adobe air 创建了自己的 mp3 播放器以在 android 上使用。我需要在最小化时显示我的应用通知图标。当我单击通知图标时，我的应用程序将激活。我不知道该怎么写。如果这对你来说很容易，请给我很大的帮助。:-)

# java - Java error: Exception in thread "main" java.lang.NoSuchMethodError: main

> ID：15723544
> 
> 赞同：1
> 
> 时间：2013-03-30T21:12:41.780
> 
> 标签：java

I got this problem when running the following code in Java:

```
public class comparison
{
    public static boolean main(String[] args)
    {
        if (0.1 + 0.1 + 0.1 == 0.3) return true;
        else return false;
    }
} 
```

Can anybody tell me why and how to modify the code?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T21:13:33.240

`main` method should be:

`public static void main(String[] args)`

and not:

`public static boolean main(String[] args)`

You probably wanted to do something like this:

```
 public static boolean check() 
 {
     if (0.1 + 0.1 + 0.1 == 0.3) return true;
        else return false;
 } 
```

and then call it from the *static main*:

```
public static void main(String[] args)
{
    boolean result = check();
    //now you can print, pass it to another method.. etc..
} 
```

**Why main is void (doesn't return anything)?**

*   Think about it. Once the main method finishes, it doesn't mean that the program finished. If it spawns a *new thread* it might be that these threads are still running.

**Why main is public?**

*   The *main* method is called by the JVM to run the method which is outside the scope of project.

**Why main is static?**

*   When the JVM calls the main method, there is *no object* existing for the class being called. So it has to have static method to allow this from class.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:14:55.060

To be executable from the commandline, Java classes must implement a static method with signature

public static void main(String[] args) {

Because yours returns "boolean" instead of "void", the JVM doesn't know how to execute it. You'll need to either modify that method, or wrap it in another similar one with return type "void".

# javascript - Tabs in backbone, underscore, jquery page

> ID：15723546
> 
> 赞同：4
> 
> 时间：2013-03-30T21:13:04.477
> 
> 标签：javascript, jquery, backbone.js, underscore.js, single-page-application

I'm making a toy app, trying to learn about these libraries and was hoping to understand how I would present a "tab" interface. I'd like to have a few buttons (or links, whatever is most common) on top. When one selected, it looks selected and the main content on the page changes to present what's on that tab.

My learning app is very simple at the moment:

```
<body>
    <div class="content"></div>
</body> 
```

And a backbone view:

```
var ContentView = Backbone.View.extend({
    el: $('.content'),
    // .. 
```

So far, I've looked into using <% tag in the html to make a partial, making the ContentView somehow responsible for rendering different stuff in there. The other idea I've had but don't quite know how to pursue is several Backbone views taking turns being in charge of changing the one div.

Would sure appreciate some advice about the canonical approach here, including how to present the tabs buttons and how to cleanly separate view logic for the different tabs.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T21:43:24.407

Follow a 'separation of concerns' model. You've got a main content view, which handles tab navigation. Anytime someone clicks on a tab, that main content view should tell the view that the tab belongs to that it is now active. Then that sub-view handles things from there. Here's some example code:

Let's say this is the HTML:

```
<div id="tabContainer" class='tabs'>
    <div class='tab' id="content1Tab"></div>
    <div class='tab' id="content2Tab"></div>
    <div class='tab' id="content3Tab"></div>
</div>
<div id="contentContainer">

</div> 
```

This might be the javascript.

```
ContentView = new (Backbone.View.extend({}
    events: {
        'click .tab': 'openTab'
    },

    el: $("#tabContainer"),

    tabViews: {},

    openTab: function (e) {
        var el = $(e.currentTarget);
        $("#contentContainer").children().detach();

        if(!this.tabViews[el.attr('id')]) {
            this.tabViews[el.attr('id')] = this.createTabViewForEl(el);
        }

        this.tabViews[el.attr('id')].render($("#contentContainer"));
    },

    createTabViewForEl: function (el) {
        var tab;
        switch(el.attr('id')) {
            case "content1Tab":
                tab = new FirstContentTab();
                break;
            /* etc */
        }
        return tab;
    }
))();

FirstContentTab = Backbone.View.extend({
    render: function (targetEl) {
        this.setElement($("#someContentEl"));
        this.$el.appendTo(targetEl);
    }
    /** stuff like loading in content for tab, or making a monkey dance when it opens **/
}); 
```

There are more elegant ways of doing this, like referencing the module that the tab belongs to, then using requirejs or some other module loader to load in that module and give it the tab in question. But, either way, don't let that one main view do too much. Otherwise you'll end up with something that's way more complicated than it needs to be.

# php - 使用 POST 方法的未定义变量 user_name 和 num_guess

> ID：15723550
> 
> 赞同：0
> 
> 时间：2013-03-30T21:13:16.037
> 
> 标签：php, ajax

我不明白为什么它在 PHP 的 $_POST 部分中说未定义的变量 num_guess 和 user_name。

这是**HTML 部分**：

```
<div id="user">
    <img src="Design/Chest12.gif" alt="Chest" name="Chest">
    <div id="msgbox"><span id="msg"></span></div>
    <form id="score_form">
<div class="formtags">
        <ul>
            <li><label for="user">Name: </label></li>
            <li><label for="num_guess">Guesses: </label></li>
        </ul>
</div>
<div class="forms">
  <ul>
    <li><input type="text" name="user_name" id="user_name"/></li>
    <li><input type="text" name="num_guess" id="num_guess"/></li>
  </ul>
</div>
<div class="button">
  <ul>
        <li><input type="submit" id="submit" value="Submit"/></li>
        <li><input type="submit" id="cancel" value="Play Again"/></li>
      </ul>
</div>
</form> 
```

这是**AJAX 部分**：

```
 $(document).ready(function() {   
     $("#user #msgbox").hide();
     $("#user .button ul li #submit").click( function(){
         $.request("utilities.php",{
         'user_name':$("#user_name").val(),
         'num_guess':$("#num_guess").val(),
         },
          function(response){
         $("#msgbox #msg").html("Score Submitted");
         $("#msgbox").slideUp().slideDown("slow");
         });
      return false;
    });
    $("#user #msgbox").click(function(){
    $(this).slideUp("slow");
   });
}); 
```

这是**PHP 部分**：

```
 function insertScore($name,$num_guess){
       opendb();
       $query = mysqli_query($GLOBALS['dbconn'],"INSERT INTO game VALUES     (0,'$name',$num_guess)");
       closedb();
    }
    $name = $_POST['user_name'];
    $num_guess =(int) $_POST['num_guess'];
    insertScore($name,$num_guess);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:17:45.307

您可以使用：

```
if(isset($_POST['user_name'])){
 $name = $_POST['user_name'];
}
if(isset($_POST['num_guess'])){
 $num_guess =(int) $_POST['num_guess'];
}
//now
   if(isset($name) && isset($num_guess)){
        insertScore($name,$num_guess);
   } 
```

您收到的通知是正常的，如果发现任何未定义的变量，PHP 将触发该通知，处理此问题的唯一方法是在分配任何变量之前检查 $_POST。

# java - 实现特定类的 LinkedList，而不是泛型类型

> ID：15723554
> 
> 赞同：0
> 
> 时间：2013-03-30T21:13:41.600
> 
> 标签：java, generics, data-structures, linked-list

我有一个简单的问题。

我正在使用我自己定义的链接节点定义一个类，作为一个嵌套类。

我只想将此节点用于字符串的 ArrayLists 的节点，而不是用于泛型类型。

我为泛型类型 T 定义了 Node，即 HNode<T>，但我想在这个使用 ArrayList 方法的 Node 类上添加方法。例如，

```
 public void forward(int n) { //return boolean??
        HNode<T> targetNode;
        for(int i=0; i<n; i++) {
            targetNode = this._next;
        }
        targetNode._datum.add(this._datum.remove(this._datum.size()-1));
    } 
```

在我的 Node 类中。

它不断发出警告，类型 T 的方法 size() 未定义，这就是为什么我正在考虑将类定义更改为 String 的 ArrayList 的节点。

（第一个问题是这样的：）这是正确的方法，还是有更好的方法？或者我可以忽略警告，只要我使用

另一个问题是这个。我声明了变量 targetNode，并在 for 循环中分配了它。但是，它会发出需要分配 targetNode 的警告。

```
 public void forward(int n) { //return boolean??
        HNode<T> targetNode = this;
        for(int i=0; i<n; i++) {
            targetNode = targetNode._next;
        }
        targetNode._datum.add(this._datum.remove(this._datum.size()-1)); 
```

这可能是一个更好的选择吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:23:42.537

***有更好的方法来做到这一点！***

由于您希望使用[`.size()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html#size)an 的方法[`Arraylist`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html)，我建议您将节点（和包含类）设置为[`Collection`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html)接口类型。

该[`Collection`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html)接口保证该对象将实现一个[`.size()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html#size)方法，这将消除您的编译错误。

[`Arraylist`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html)继承自[`Collection`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html)如下：
[`Collection`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html)`-->`[`AbstractList`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/AbstractList.html)`-->`[`Arraylist`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html)

通过您的课程[`Collection`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html)代替泛型`T`：

```
HNode<Collection> targetNode; 
```

这将允许您的类处理实现[`Collection`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html)接口的所有类，这是一组广泛的类。这样可以维护您的抽象并显着增加代码的可重用性，然后将整个类提交给仅[`Arraylist`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:23:35.160

“我只想将此节点用于字符串的 ArrayLists 的节点，而不是用于泛型类型”

然后像这样创建你的类型，删除泛型，使用：HNode 而不是`HNode<T>`

并创建一个类型的字段`Arraylist<String>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T21:34:20.990

为了能够使用 List 接口的方法，您只需要替换

```
HNode<T> 
```

和

```
HNode<List> 
```

出现警告“需要分配目标节点”是因为如果 n=0，则不会执行您的 for 循环。这就是可能未分配 targetNode 的原因。这就是为什么你应该添加范围检查或者你可能会在这一行得到 NullPointerException

```
targetNode._datum.add(this._datum.remove(this._datum.size()-1)); 
```

* * *

**Edit:** Also it looks like your last line is logically incorrect. remove() method returns result of operation (boolean), not the removed object itself. You need to get this element explicitly before removing, or just change you collection to LinkedList and call removeLast() method.

# c# - 从 TextBoxes 在 ListBox 中的数据表中显示结果

> ID：15723559
> 
> 赞同：0
> 
> 时间：2013-03-30T21:14:00.863
> 
> 标签：c#, visual-studio-2010

我正在对我的应用程序中有三个文本框的生物种群进行分配，这将获得用户对“生物起始数量”（StartingNumOfOrganismsTextBox）、“平均每日增长”（DailyIncreaseTextBox）和“天数”的输入乘”（NumOfDaysTextBox）。

```
 int NumOfOrganisms = 0, DailyIncrease = 0, NumOfDays = 1;

        StartingNumOfOrganisms = int.Parse(StartingNumOfOrganismsTextBox.Text);
        DailyIncrease = int.Parse(DailyIncreaseTextBox.Text);
        NumOfDays = int.Parse(NumOfDaysTextBox.Text); 
```

当用户在这些文本框中输入整数时，应该有一个计算按钮，当按下时，它应该自动将用户输入显示到一个名为 (PopulationsListBox) 的单独列表框中，如下所示的数据表：

例如，如果用户在提到的 TextBoxes 中输入以下输入： StartingNumOfOrganismsTextBox: 2 DailyIncreaseTextBox: 30% NumOfDaysTextBox: 5

按下计算按钮，应用程序应在 ListBox 控件中的两列中显示以下数据表。（天）列和（近似人口）列。

第 1 天，近似人群 2。第 2 天，近似人群 2.6。第 3 天，大约人口 3.38。第 4 天大约人口 4.394。第 5 天，大约人口 5.7122。

有人会给我提示如何获取所有三个用户输入，（StartingNumOfOrgranisms，DailyIncrease[%] 然后有机体将留下来繁殖的 NumOfDays，并在 ListBox 控件中显示表格的数据？这对于我，如果有人能帮助我完成这项任务，我将非常感激。谢谢。

另外，我尝试使用 ListView 代码格式来添加我的数据：

```
 PopulationsListBox.Items.Add("1");
        PopulationsListBox.Items[0].SubItems.Add(StartingNumOfOrganisms.ToString());
        for (int i=2;i<=NumOfDays;++i)
        {
           PopulationsListBox.Items.Add(i.ToString());
           PopulationsListBox.Items[PopulationsListBox.Items.Count-1].SubItems.Add((StartingNumOfOrganisms+StartingNumOfOrganisms*DailyIncrease).ToString()); 
```

But, "SubItems" is not a property ListBoxes use. Perhaps someone could suggest trying something similar to that for me? I will be thankful.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:52:41.953

I haven't tested this but you want to do something like this:

```
 listbox.Items.Add("Day 1, Approximate Population:" + txtStartingNumberOfOrganisms.Text);
        int ApproximatePopulation = Convert.ToInt16(txtStartingNumberOfOrganisms.Text);             

        for (int i = 2; i <= numOfDays; i++)
        {
            ApproximatePopulation = ApproximatePopulation + ((ApproximatePopulation * Convert.ToDouble(txtDailyIncrease.text)) / 100);
            listbox.Items.Add("Day " + Convert.ToString(i) + ", Approximate Population:" + Convert.ToString(ApproximatePopulation));
        } 
```

Apologies if the sums are all over the place but you can figure those out ;)

# python - 在 Python 3.2 中制作 .txt 文件日历而不使用 .calendar

> ID：15723562
> 
> 赞同：0
> 
> 时间：2013-03-30T21:14:36.650
> 
> 标签：python, datetime, text-files, datetime-format, python-3.2

我正在尝试编写一个程序，它会给我一个很好的 .txt 文件来显示今年的日历，但是，我不想使用日历功能，而是使用**datetime**。

我希望它具有以下格式（我希望它旁边有一周中每一天的前 3 个字母）：

周二 1 月 1 日

1月2日星期三

一直到

12月31日星期二

（基本上 365 行，每行 10 个字符，每行以换行符“\n”结尾）。这是我从各种堆栈流问题、教程和模块中收集到的。至今没有成功。

```
import datetime
from datetime import date
textfile = file('new_file.txt','wt')
your_date.isoformat()
your_date.strftime("%A %d. %B %Y") 
```

My main issue is that I am unfamiliar with how I get python to give me a range of dates (here being the year 2013, but it could also be just any increment in time such as June 2011 to December 2014) and of course to print the day of the week next to it. This way it could be adapted to any time period you might need this small calendar for. I was thinking maybe assigning every day's number (1 being Monday, 2 being Tuesday is the pattern if I'm correct) the first 3 letters of a day in the week so it's all neat and of the same length.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:24:37.947

Here's one way to do the looping:

```
inc = datetime.timedelta(days=1)
curr = datetime.date(2013, 1, 1)
end = datetime.date(2014, 1, 1)
while curr < end:
    # print out the date and whatnot
    curr += inc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:59:39.737

```
#!/usr/bin/env python3
import sys
from datetime import date, timedelta

def gen_calendar(year=None):
    if year is None:
        year = date.today().year

    current = date(year, 1, 1)
    delta   = timedelta(days=1)

    while current.year == year:
        yield current.strftime('%a %b %d')
        current += delta

if __name__ == '__main__':
    year = None
    if len(sys.argv) > 1:
        year = int(sys.argv[1])

    for str_date in gen_calendar(year):
        print(str_date) 
```

this will print to stdout so you can redirect it to a file from the console, which is the usual but if you want to write to the file directly from the script replace the last two lines with this:

```
 with open('calendar.txt', 'w') as f:
        for str_date in gen_calendar(year):
            print(str_date, file=f) 
```

# javascript - Jquery 表单验证错误显示 Div

> ID：15723571
> 
> 赞同：0
> 
> 时间：2013-03-30T21:15:33.843
> 
> 标签：javascript, jquery, forms, validation

我对 jQuery 相当陌生，所以我的代码可能不是最精简的。我正在尝试编写自己的表单验证脚本，一切正常。

但为了减少 CSS，我想在同一个 div 标签中显示每个表单输入的错误消息。所以valid_prompt的div标签被放置在每个输入字段之后。

我目前遇到的问题是所有错误消息都显示在 div 标签的第一次出现中，这是预期的，但我需要某种方法将每个唯一输入字段链接到显示错误的 div。

表单输入示例

```
<input name="email1" id="email1" type="text" size="30"  maxlength="80"
value="<?php echo "$email1"; ?>" /><span id="valid_prompt"></span>
              <br/>
              <br/>
              <label><span class="reqfieldstar"> * </span>Confirm E-mail Address:</label>

                <input name="email2" id="email2" type="text" size="30"  maxlength="40" value="<?php echo "$email2"; ?>" /><span id="valid_prompt"></span> 
```

jQuery代码

```
var form = $("#SignupForm"); // Id of Form

var email = $("#email1"); // Email Address ID
var email_compare = $("#email2"); // Compare Email Address ID 

var valid_prompt = $("#valid_prompt");

var lettersReg = /^([a-zA-Z,-]|\s)*$/;
var emailReg = /^(\S+@\S+(\.\S+)*\.(\S{2,4}))?$/i;

email.keyup(validateEmail);
email_compare.keyup(validateEmail_Compare);
firstname.keyup(validateFirstname);
surname.keyup(validateSurname);

email.blur(validateEmail);
email_compare.blur(validateEmail_Compare);
firstname.blur(validateFirstname);
surname.blur(validateSurname);

form.submit(function() {
    if (validateEmail() && validateEmail_Compare() && validateFirstname() && validateSurname()) {
        return true;
    } else {

        return false;

    }

});

function validateEmail() {
    if (email.val().length == 0) {
        email.addClass("error");
        valid_prompt.removeClass("correct");
        valid_prompt.text("You Must Enter Your E-mail Address");
        valid_prompt.removeClass("correct");
        valid_prompt.addClass("error");

        return false;
    } else {
        if (!emailReg.test(email.val())) {
            email.addClass("error");
            valid_prompt.removeClass("correct");
            valid_prompt.text("Please Enter a Valid E-mail Address");
            valid_prompt.removeClass("correct");
            valid_prompt.addClass("error");

            return false;
        } else {
            email.removeClass("error");
            valid_prompt.text("");
            valid_prompt.addClass("correct");
            valid_prompt.removeClass("error");

            return true;
        }
    }
} // Email Function End

function validateEmail_Compare() {
    if (email_compare.val().length == 0) {
        email_compare.addClass("error");
        valid_prompt.removeClass("correct");
        valid_prompt.text("You Must Confirm Your E-mail Address");
        valid_prompt.removeClass("correct");
        valid_prompt.addClass("error");

        return false;
    } else {
        if (!emailReg.test(email_compare.val())) {
            email_compare.addClass("error");
            valid_prompt.removeClass("correct");
            valid_prompt.text("Please Enter a Valid E-mail Address");
            valid_prompt.removeClass("correct");
            valid_prompt.addClass("error");

            return false;
        } else {
            if (email.val() != email_compare.val()) {
                email_compare.addClass("error");
                valid_prompt.removeClass("correct");
                valid_prompt.text("Your E-mail Addresses Do Not Match");
                valid_prompt.removeClass("correct");
                valid_prompt.addClass("error");

                return false;
            } else {
                email_compare.removeClass("error");
                valid_prompt.text("");
                valid_prompt.addClass("correct");
                valid_prompt.removeClass("error");

                return true;
            }
        }
    }
} // Email Compare Function End 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:58:55.750

您可以根据任何不正确的输入值“移动”错误 div。例如：

```
$("input[type=text]").click(function(){
   $("#errorDiv").insertAfter($(this)); 
}); 
```

示例：http: [//jsfiddle.net/62A6a/](http://jsfiddle.net/62A6a/)

# php - 使用php和mysql将6行2列显示为2行4列

> ID：15723576
> 
> 赞同：-1
> 
> 时间：2013-03-30T21:15:44.453
> 
> 标签：php

我有 2 列有 6 个项目

```
column A  column B
a         200
a         300
a         300
b         600
b         200
b         500 
```

当我在我的 html 表中获取列时，我希望它表示如下：

```
column A column B column C column D
a        200      300      300 
b        600      200      500 
```

使用普通的 php 和 mysql

请问任何1可以给我解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:35:37.153

1)`SELECT colA, colB FROM your_table`

2）将数据保存在关联数组中；

```
 $colAdata=array();
   $colBdata=array();

   foreach ($results as $r) {
     if ($r["colA"]=="a")
          $colAdata[] = $r;
     else
          $colBdata[] = $r;
    } 
```

3) 根据它们对应的 col 打印：

```
 echo "<table>";

    echo "<tr>";
    echo "<td>A</td>";
    foreach ($colAdata as $r)
           echo "<td>".$r["colB"]."</td>";
    echo "</tr>";

    echo "<tr>";
    echo "<td>B</td>";
    foreach ($colBdata as $r)
           echo "<td>".$r["colB"]."</td>";

    echo "</tr>";

    echo "</table>"; 
```

**更新**

2)

```
 foreach ($results as $r) {
          $item = $r["colA"];

          if (!isset($coldata[$item])
              $coldata[ $item ] = $r;
    } 
```

3)

```
 $possibilities=array_keys($coldata);

    foreach ($possibilities as $p) {
       echo "<tr>";
       echo "<td>$p</td>";
       foreach ($coldata[$p] as $r)
              echo "<td>".$r["colB"]."</td>";
       echo "</tr>";
    } 
```

# google-chrome-extension - Request to server with sensitive data

> ID：15723578
> 
> 赞同：2
> 
> 时间：2013-03-30T21:15:57.220
> 
> 标签：google-chrome-extension, security, httprequest, password-protection

From my chrome extension, I am making a request to my server with sensitive information, namely the user's email and password, in order to log them into the service. A naive way to do this would be to make a request to something like

```
www.myserver.com/login?email=email&pass=pass. 
```

That however seems terrible. What's the standard, secure way to perform this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T21:18:09.823

A standard secure way is to use an encrypted channel, such as HTTPS. That way, only the connection to `https://myserver.com` will be seen, and the `GET /login?email=email&pass=pass` request will be encrypted. However, by doing the authentication solely via parameters to the GET request, you'll have to carry it around with you on every page you want to visit. Usually this is solved by the server giving you an authentication token (for instance a cookie) that grants you access for some time, when you login. This token of access is usually called a "session". How it's implemented differ greatly, but usually it comes down to giving you a sort of key in exchange for a valid login.

Other methods for obtaining a valid session include sending the username in clear, and the password as a derived key, for instance seeded and hashed.

If there's something in my answer you don't understand, please comment on it, and I'll elaborate or give more examples :)

**EDIT:**

> On the backend, I am using a standard salt+hash from the werkzeug python library. If the JS performed the same operation and then passed along the derived password, would that be sufficient?

Yes. If you do the salt+hash scheme, you can use whatever JS library you want. I often just use the native XmlHTTPRequest to do it.

> Also, your first suggestion was to use HTTPS. If I go that route and return the session key, what's to stop someone from snooping the session key?

If you're going with SSL, what's stopping someone from sniffing the session? Well the encryption hopefully :) Once the SSL connection is setup, everything going back and forth between you and the server will be encrypted, so there's nothing to snoop. Without encryption though, that becomes a big problem. Remember all the fuzz about facebook and sniffing session cookies when Firebug came out (or was it Firesheep?) ?

Of course your SSL tunnel may fall victim to man-in-the-middle, but public key infrastructure like this is the best you'll get. SSLv3 is considered safe these days.

# java - Java Split() 函数给出空指针异常错误

> ID：15723588
> 
> 赞同：0
> 
> 时间：2013-03-30T21:17:05.433
> 
> 标签：java, nullpointerexception

```
public class url {

 public static void main(String[] args) throws Exception {

    URL imdb = new URL("http://www.omdbapi.com/?t=The%20incredible%20Hulk");

    URLConnection yc = imdb.openConnection();

    BufferedReader in = new BufferedReader(new InputStreamReader(
                                yc.getInputStream()));
    String inputLine;

    while ((inputLine = in.readLine()) != null) 
        System.out.println(inputLine);

    String[] strarr = inputLine.split(",");

    System.out.println("splits.size: " + strarr.length);

    in.close();
}
} 
```

错误是：“imdb.url.main(url.java:25) 处的线程“main”java.lang.NullPointerException 中的异常”

请向我解释如何删除它。我在使用拆分函数和空指针异常方面搜索了很多，但就是不明白我做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T21:19:39.757

如果从`in.readLine()`in 返回 null：

```
 while ((inputLine = in.readLine()) != null) 
    System.out.println(inputLine); 
```

然后循环将退出并`inputLine`保持为空。

从逻辑上讲，循环结束时`inputLine`将**始终为空，因此***不可避免*的异常！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-30T21:20:24.760

当您的 while 循环退出时，`inputLine`为空，因此调用`inputLine.split()`将始终产生一个`NullPointerException`. 我相信您想要做的是将大括号括在`System.out.println()`调用及其之间的所有内容中，以便它们都包含在循环迭代中：

```
 while ((inputLine = in.readLine()) != null)
 {
    System.out.println(inputLine);

    String[] strarr = inputLine.split(",");

    System.out.println("splits.size: " + strarr.length);
} 
```

这有预期的效果吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-30T21:20:30.953

您的 while 循环中缺少括号。`inputLine`当您尝试它时导致为空`split()`。尝试

```
 while ((inputLine = in.readLine()) != null) {
    System.out.println(inputLine);

    String[] strarr = inputLine.split(",");

    System.out.println("splits.size: " + strarr.length);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-30T21:22:16.603

到达时`String[] strarr = inputLine.split(",");`，您已经阅读了整个响应 - 但此时`inputLine`已`null`到达，因此您无法拆分它。

How to fix this depends on what you are trying to do. If you want to split the whole document, try collecting all the data in one big string:

```
String inputLine;
String allData = "";

while ((inputLine = in.readLine()) != null) {
    System.out.println(inputLine);
    allData += inputLine+"\n";
}

String[] strarr = allData.split(","); 
```

(This code is a bit inefficient, but it should work.)

However, your URL points to a JSON document, so you might want to use a JSON parser instead of doing this. It will be more reliable and probably also easier than trying to parse JSON manually. For information on JSON and JSON libraries for various languages, see [http://json.org](http://json.org) .

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-30T21:18:33.527

这是因为`inputline`上次在`While`循环中读取时，没有任何内容被读取`inputLine`。因此，`while`当您尝试执行循环后`spli`，`inputline`它会给出`NullPointerExcpetion`.

```
while ((inputLine = in.readLine()) != null) 
        System.out.println(inputLine);
System.out.println(inputLine);//InputLine is null here.
String[] strarr = inputLine.split(",");//throwing NPE 
```

解决方法是使用 StringBuilder，如下所示：

```
StringBuilder sbuilder = new StringBuilder();
while ((inputLine = in.readLine()) != null) 
            sbuilder.append(inputLine);
String[] strarr = (sbuilder.toString()).split(","); 
```

# ios - when I need use copy?

> ID：15723594
> 
> 赞同：3
> 
> 时间：2013-03-30T21:17:17.790
> 
> 标签：ios, objective-c, copy

I try to understand when I need use `copy`? I thought that `copy` allocate new memory, but it doesn't. So, for example:

```
NSArray *array = @[@"111", @"111"];
NSArray *array1 = array.copy;
NSMutableArray *array2 = array.copy;
NSMutableArray *array3 = array.mutableCopy;
NSArray *array4 = array.mutableCopy; 
```

New memory allocated only for array3 and array4\. So, I can do for array1 and array2 simply:

```
NSArray *array1 = array;
NSMutableArray *array2 = array; 
```

When I can use copy, it is only make immutable array2, when it will be helpfull for me?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T21:21:50.133

In Cocoa, the `copy` method can be very smart: if an object is *immutable*, it could return itself without making a copy, because there is no point in copying objects that cannot be changed. In your example, `NSArray` is immutable, and `NSMutableArray` is mutable. That is why only mutable objects make actual copying. Of course all mutable copies must allocate new memory, too.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:29:31.373

There is a difference between:

```
NSArray *array1 = array.copy; 
```

and

```
NSArray *array1 = array; 
```

In the first case, the retain count of `array` is increased. In the second it is not. So if you ever release `array`, `array1` may become invalid in the second case, while it will still be valid in the first one.

*Exact consequences may depend of you using ARC or manual reference counting.*

Mutable objects will be copied no matter what, so that you can modify the original without affecting the copy. This is unnecessary for immutable objects, as they can't be modified.

# node.js - 从一组数据库条目（Mongodb、Mongoose）中获取最新更新

> ID：15723595
> 
> 赞同：1
> 
> 时间：2013-03-30T21:17:24.217
> 
> 标签：node.js, mongodb, sorting, mongoose, feed

我正在尝试创建一个新闻源，并且我试图想出最好的方法（或某种意义上的算法）来获取用户使用猫鼬订阅的一堆对象，然后从所有这些对象中返回按时间顺序排列的最新更新：

IE。使用猫鼬模式：

```
var UserSchema = new Schema({
    subscribed: [ObjectSchema]
  });

var ObjectSchema = new Schema({
    updates: [UpdateSchema]
});

var UpdateSchema = new Schema({
    date_updated: Date,
    message: String
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:13:30.783

你已经有了答案。您只需找到按 date_updated 属性排序的所有更新。

也许我不明白你的问题，但按照要求，你只需要这样做。告诉我你是否想要别的东西。

# php - How would I transfer a large amount of data to a MySQL server in one value?

> ID：15723597
> 
> 赞同：0
> 
> 时间：2013-03-30T21:17:31.320
> 
> 标签：php, mysql, data-transfer, large-data

I am making a PHP script which uploads a very large amount of data to a MySQL server. I do not have administrator rights for the MySQL server, so I can not change the maximum packet size, but I want to be able to transfer at least one Gigabyte of data to a single value on the server.

Because I am limited to the packet size max of the MySQL server, I am unable to transfer a large amount of data. Is there some keyword in MySQL for adding onto a value? If so, I could transfer the data in segments of the maximum amount of data the packets could be.

I have not found anything like this so far.

Is there some strategy I could use to store large (1 GB or more) amounts of data in a single MySQL value? Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:22:32.853

You could use the concat mysql method and UPDATE the data

```
UPDATE `table` SET `table`.`data` = concat(`table`.`data`, '$input') 
  WHERE `table`.`id` = $id; 
```

# c++ - 如何基于 QProcess 将窗口设置为活动窗口？

> ID：15723619
> 
> 赞同：0
> 
> 时间：2013-03-30T21:20:50.677
> 
> 标签：c++, qt, window, focus, qt5

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <QMessageBox>
#include <QTextStream>
#include <QTime>
#include <QProcess>

bool started = false;
QString path;

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    ui->statusBar->showMessage("Waiting for input...");
    QFile file("path.txt");
    if(!file.open(QIODevice::ReadOnly)) {
        QMessageBox::information(0, "Error", file.errorString());
    }
    QTextStream in(&file);
    path = in.readLine();
    file.close();
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_pushButton_2_clicked()
{
    qApp->exit();
}

void delay(int n)
{
    QTime dieTime = QTime::currentTime().addSecs(n);
    while(QTime::currentTime() < dieTime)
        QCoreApplication::processEvents(QEventLoop::AllEvents, 100);
}

void MainWindow::on_pushButton_clicked()
{
    if(!started) {
        started = true;

        qint32 waitSecs = ui->plainTextEdit->toPlainText().toInt();
        QTime launchTime = QTime::currentTime().addSecs(waitSecs);

        while(waitSecs > 0) {
            waitSecs = QTime::currentTime().secsTo(launchTime);
            ui->statusBar->showMessage(QString("Waiting %1 seconds to launch BLR launcher.").arg(waitSecs));
            delay(1);
        }

        ui->statusBar->showMessage("Launching BLR launcher!");

        QProcess *process = new QProcess(this);
        process->start(path, QStringList() << "");
    }
} 
```

正如您从上面的代码中看到的（阅读最后几行），我有一个已启动的进程。我想确保（通过该过程）启动的窗口是焦点。

我知道有这个功能：http: [//qt-project.org/doc/qt-4.8/qapplication.html#setActiveWindow](http://qt-project.org/doc/qt-4.8/qapplication.html#setActiveWindow)

它需要一个 QWidget 作为参数。也许我需要将 QProcess 转换为 Qwidget？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:48:20.770

不仅仅是在调用 QProcess::start 时直接调用可执行文件，而是将其用作操作系统中相关打开命令的参数。

例如，在 OSX 中我会使用

```
process->start("open programToRun.app"); 
```

如果您在 Windows 中，我敢肯定有一个等价物，也许使用：

```
process->start("cmd programToRun.exe"). 
```

希望有帮助。

# ruby-on-rails - 使用 Devise 身份验证和 Rails 登录后用户帖子丢失？

> ID：15723620
> 
> 赞同：3
> 
> 时间：2013-03-30T21:20:53.883
> 
> 标签：ruby-on-rails, redirect, login, devise

在我的 Rails 应用程序（使用设计身份验证）中，任何人都可以开始创建帖子，但如果在点击保存/创建/发布时未登录，他们首先必须创建用户名或登录 = 完美。

我的代码：

```
 before_filter :authenticate_user!, :except => [:show, :index, :new, :edit] 
```

可悲的是，一旦他们登录，要么重定向到索引页面，要么返回帖子，但一切都消失了，随后用户必须重新开始。

如何更改重定向以及如何在再次登录后阻止帖子丢失？

我知道它与以下内容有关：

```
 def after_sign_up_path_for(resource)
  new_user_confirmation_path
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:57:09.917

[HTTP 是无状态](https://stackoverflow.com/questions/4913763/what-does-it-mean-when-they-say-http-is-stateless)的——发布参数（以及所有其他参数）仅对一个请求有效。基本上，http 无法知道重定向之前传输了哪些参数。

这是会话可能派上用场的地方 - 您可以在控制器中执行类似的操作来解决您的两个问题。

```
before_filter :authenticate_user!, :except => [:show, :index, :new, :edit, :create]
# include create action inside except hash

def create
  if !user_signed_in? # check whether user is logged in manually
    session[:post] = params[:post] # assign post data to session if not
    redirect_to new_user_session_path
  else
    # ...
  end
end 
```

通过该会话，http 变为“有状态”，因为您的会话哈希在多个请求中都可用（直到您销毁它）。

然后，当用户登录后，使用表单中的会话来预填充表单字段。

# javascript - Why is my model value null if I don’t wrap the script code in a click event?

> ID：15723621
> 
> 赞同：0
> 
> 时间：2013-03-30T21:20:57.507
> 
> 标签：javascript, asp.net-mvc-3

I have a javascript at the end of my view that creates an array of the selected checkboxes. The button that submits the form allows me to access form collection and other parameters. If I attach a click event to the same button to run the java script, the data in the javascript gets sent but the form collection parameter is null. If I remove the click function from the script, my script model parameter is null and the other parameters are ok.

Here’s how my script data gets to the controller gets.

I’m using a model: namespace SchoolIn.ViewModels { public class EnrollmentOptionsVM {

```
 public virtual string OptionID{ set;get;}
   public virtual string UserChoice { set;get;}

     }
 }

 [HttpPost]
    public ActionResult Edit(int id, FormCollection formCollection, String[] options,     List<EnrollmentOptionsVM> model, String[] instructorString, String[] selectedteacher,string[]  selectedCourses, Student student, string course, Enrollment enrolls, Assignment assignment, String[]  searchString)

 <script type="text/javascript">
        var $checkboxes = $('input[type="checkbox"]');

        $(document).ready(function () {
               var options= [];
 $.each($checkboxes, function () {
    if ($(this).is(':checked')) {
  var item={ "UserChoice" : "checked", "OptionID": "YouCanSetIDHere"};
  }
  else
    {
      var item={ "UserChoice" : "unchecked", "OptionID": "YouCanSetIDHere"};
    }
     options.push(item);
  })
   $.ajax({ type: 
  'POST', url: '@Url.Action("Edit","Student")',
            contentType: 'application/json',
            data: JSON.stringify(options)
        }).done(function (html) {

         });

       alert('success')
        });

        </script> 
```

And here’s the signature of the Edit Post.

```
 [HttpPost]
    public ActionResult Edit(int id, FormCollection formCollection, String[] options,   List<EnrollmentOptionsVM> model, String[] instructorString, String[] selectedteacher,string[] selectedCourses, Student student, string course, Enrollment enrolls, Assignment assignment, String[] searchString) 
```

I put an alert() in the script to be sure it runs ok and it does. Why is my model value null if I don’t wrap the script code in a click event?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:28:04.267

If your script is in the head tag then when you reference the checkboxes `var $checkboxes = $('input[type="checkbox"]');` they aren't in the page yet so $checkboxes will be an empty jQuery object

You need to put the `$checkboxes = $('input[type="checkbox"]');` inside the `$(document).ready` function

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T07:16:18.837

Ok I see what’s happening. Although my Javascript and the Razor post to the same action, their parameters won’t be sent at the same time in same post. To solve this I created a different action and used the click function to trigger the event.

# iphone - 使用 Core Data 将 iOS 应用程序部署到 App Store 的最佳实践？

> ID：15723624
> 
> 赞同：4
> 
> 时间：2013-03-30T21:21:30.297
> 
> 标签：iphone, ios

我目前正在开发一个本机（Objective C）iOS 应用程序（适用于 iPhone 和 iPad），我计划将它放到 App Store（在 Mountain Lion 10.8.3 上使用 Xcode 4.6.1 的 iOS 6.1）。

此应用程序需要在设备本地存储一些数据，以使我的应用程序在离线（无网络）时仍然可以工作。我选择使用 Core Data 是因为它易于使用，而且你仍然可以用它做一些更复杂的事情。

我的问题......关于使用 Core Data 数据库将应用程序部署到 App Store 的最佳实践是什么？

1) 使用空的 Core Data 数据库部署我的应用程序，并让它在首次启动或用户单击某些刷新按钮时自动下载数据？

优点：

*   用户可以偶尔单击一些刷新按钮来更新应用程序数据（无需更新整个应用程序，只需更新数据）。

缺点：

*   在填充数据库之前，该应用程序将无法使用。
*   必须在某处的服务器上维护和托管 Web 服务以响应来自应用程序的调用（托管成本，必须开发全新的 Web 服务，另一个故障点）

2) 使用预填充的 Core Data 数据库部署我的应用程序，并在我偶尔更改数据时让用户从 App Store 更新应用程序？

优点：

*   从 App Store 下载后，该应用程序将立即运行。
*   不需要有服务器端。

缺点：

*   如果我想刷新数据，用户必须从 App Store 更新整个应用程序。

对我来说，开发人员最简单的方法是＃2，因为我不必部署服务器端应用程序......但这甚至可以做到吗？我可以轻松地创建一个虚拟类来填充我的 iPhone 模拟器上的数据库，但是是否可以将此数据库与我的应用程序捆绑在一起并将其部署到 App Store？＃1是唯一的方法（或最好的方法）吗？有没有我没有想到的第三种选择？

我很想知道你在这方面的经历......并且不要害怕提出你能想到的任何建议。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T21:41:52.083

这真的取决于你需要/想要做什么。这两种方法都是有效且可行的。我亲自实施了两者。

以下是我可以告诉你的：

*   **信息会改变**：除非你正在编写一个关于数学的应用程序，否则事情很可能永远不会改变（除非最初有错误）。它可以使您的应用程序很快变得不正确/过时。发送应用更新需要一些时间。

*   **互联网可能不可靠**：您可以假设用户将有数据连接来下载应用程序。但是，这并不意味着他们第一次打开应用程序时就会拥有一个。有时他们会将其设置为下载并将其设备放在一边。他们可能稍后会打开应用程序，并且可能不存在数据连接。

*   **You can do a mix of both**: We developed an app that was meant as a self-guided tour of a place where there is poor cell reception. Visitors were encouraged to use the Information Center WIFI to download the app, but once they stepped out of the door it cell reception was poor/unavailable. We had to include a pre-populated SQL in the bundle. If there is no internet when the app is first opened, then it will load automatically from the bundle, otherwise it downloads it from a simple service (pretty much a dump) where information can be easily updated.

Again, it really depends on what you are trying to do and what your requirements and contraints are. In essence they are both valid and doable approaches. I personally prefer having a way to updating information without having to send an app update that, in my experience, can take weeks before it becomes publicly available.

There are libraries out there that will do most of the web service client implementation for you (JSON and XML parsers). Including them is fairly easy. All you have to do is to display that information through a url.

Back to your "can I include bundle a database" question. Yes, you can. This is how you can import a SQLite file from your bundle:

Do this in your `persistendStoreCoordinator` in your app delegate

```
 NSFileManager *fileManager = [NSFileManager defaultManager];

    if(![fileManager fileExistsAtPath:directoryPath(@"YourSQLFile.sqlite")]) {

        NSString *defaultStorePath = [[NSBundle mainBundle] pathForResource:@"YourSQLFile" ofType:@"sqlite"];

        NSError *error = nil;

        if(defaultStorePath) {
            [fileManager copyItemAtPath:defaultStorePath toPath:[storeURL path] error:&error];
        }

    } 
```

# javascript - Change the innerHTML of EVERY element with specified id

> ID：15723625
> 
> 赞同：1
> 
> 时间：2013-03-30T21:21:37.760
> 
> 标签：javascript, jquery, liquid

I am trying to change the innerHTML value of **every** element with id 'filename', but only the first one gets updated.

My problem is that **only the first** element with id 'filename' is updated.

HTML code is generated as a liquid template, but I don't think it should change anything.

Here is the HTML:

```
 <ul>
    {% for product in products %}
      <li>
      <p>{{ product.title }}</p>
      {% for image in product.images %}
        <img src={{ image.src }} height="200px" />
        <p>1) Is your image name descriptive? {{ image.src }}</p>
        <p>2) Is your alt tag descriptive enough? {{ product.title }}</p>
        <p>3) Is your image file type JPEG? <div id="filename">{{ image.src }}</div></p>
      {% endfor %}
      </li>
      <hr>
      {% endfor %}
    </ul> 
```

And the javascript:

```
<script type="text/javascript">
  $("#filename").each(function()  {
    $(this).html("ext!");
  });
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T21:22:36.780

**[ID's need to be unique](http://www.w3.org/TR/html4/struct/global.html#adef-id)** - you should try replacing all elements with `id="filename"` to `class="filename"` instead, and then replacing `#filename` with `.filename` in your `each()` function, so it resembles the following:

```
$(".filename").each(function()  {
    $(this).html("ext!");
}); 
```

# php - json encode � values become null

> ID：15723627
> 
> 赞同：0
> 
> 时间：2013-03-30T21:21:51.517
> 
> 标签：php, mysql, json

I have a string stored in the database as: `Nüguns`, and when I do a `print_r` I get this:

```
array (
     [0] => N�guns
) 
```

Then when I do `json_encode`, the value becomes `null`

Is there something I need to do in order for json to encode it correctly?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T21:26:53.050

You need to check the following:

1- set character encoding while connecting to database by adding this after you select the database:

```
mysql_query("SET NAMES UTF8") 
```

or

```
$mysqli->set_charset("utf8") 
```

2- Add UTF-8 as header, you can use

```
header('Content-Type: text/html; charset=utf-8'); 
```

or using just HTML

```
<meta charset="UTF-8"> 
```

# python - Pandas - 制作列 dtype 对象或因子

> ID：15723628
> 
> 赞同：61
> 
> 时间：2013-03-30T21:21:57.247
> 
> 标签：python, pandas

在 pandas 中，如何将 DataFrame 的列转换为 dtype 对象？或者更好的是，成为一个因素？（对于那些说 R 语言的人，在 Python 中，我该怎么做`as.factor()`？）

`pandas.Factor`另外，和有什么区别`pandas.Categorical`？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-03-30T21:54:21.303

您可以使用该[`astype`](http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.astype.html)方法来转换系列（一列）：

```
df['col_name'] = df['col_name'].astype(object) 
```

或整个 DataFrame：

```
df = df.astype(object) 
```

* * *

### 更新

[从 0.15 版开始，您可以](http://pandas.pydata.org/pandas-docs/stable/categorical.html)在系列/列中使用类别数据类型：

```
df['col_name'] = df['col_name'].astype('category') 
```

*注意：`pd.Factor`已被弃用并已被删除以支持`pd.Categorical`.*

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-11-18T15:35:07.800

There's also pd.factorize function to use:

```
# use the df data from @herrfz

In [150]: pd.factorize(df.b)
Out[150]: (array([0, 1, 0, 1, 2]), array(['yes', 'no', 'absent'], dtype=object))
In [152]: df['c'] = pd.factorize(df.b)[0]

In [153]: df
Out[153]: 
   a       b  c
0  1     yes  0
1  2      no  1
2  3     yes  0
3  4      no  1
4  5  absent  2 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-30T22:04:14.190

`Factor`据我所知，并且`Categorical`是相同的。我认为它最初被称为因子，然后改为分类。要转换为分类也许你可以使用`pandas.Categorical.from_array`，像这样：

```
In [27]: df = pd.DataFrame({'a' : [1, 2, 3, 4, 5], 'b' : ['yes', 'no', 'yes', 'no', 'absent']})

In [28]: df
Out[28]: 
   a       b
0  1     yes
1  2      no
2  3     yes
3  4      no
4  5  absent

In [29]: df['c'] = pd.Categorical.from_array(df.b).labels

In [30]: df
Out[30]: 
   a       b  c
0  1     yes  2
1  2      no  1
2  3     yes  2
3  4      no  1
4  5  absent  0 
```

# python - Python：搜索和删除字典的嵌套列表

> ID：15723630
> 
> 赞同：4
> 
> 时间：2013-03-30T21:22:00.717
> 
> 标签：python, list, dictionary, nested

我有一个嵌套列表和字典树，我需要递归地遍历并删除与特定条件匹配的整个字典。例如，我需要删除所有“类型”为“文件夹”且没有子级（或空的子级列表）的字典。

我仍然是 Python 初学者，所以请原谅蛮力。

这是一个为便于复制和粘贴而格式化的示例字典。

```
{'children': [{'children': [{'key': 'group-1',
                         'name': 'PRD',
                         'parent': 'dc-1',
                         'type': 'Folder'},
                        {'children': [{'key': 'group-11',
                                       'name': 'App1',
                                       'parent': 'group-2',
                                       'type': 'Folder'}],
                         'key': 'group-2',
                         'name': 'QA',
                         'parent': 'dc-1',
                         'type': 'Folder'},
                        {'key': 'group-3',
                         'name': 'Keep',
                         'parent': 'dc-1',
                         'type': 'Host'}],
           'key': 'dc-1',
           'name': 'ABC',
           'parent': 'root',
           'type': 'Datacenter'}],
'key': 'root',
'name': 'Datacenters',
'parent': None,
'type': 'Folder'} 
```

在这本字典中，唯一应该保留的树是 /root/dc-1/group-3。应首先删除 group-11 文件夹，然后删除其父文件夹（因为子文件夹不再存在），等等。

我尝试了许多不同的递归方法，但似乎无法使其正常工作。任何帮助将不胜感激。

```
def cleanup(tree):
    def inner(tree):
        if isinstance(tree, dict):
            if 'type' in tree and tree['type'] == 'Folder':
                if 'children' not in tree or not tree['children']:
                    print 'Deleting tree: ' + str(tree['name'])
                    if str(tree['key']) not in del_nodes:
                        del_nodes.append(str(tree['key']))
                else:
                    for item in tree.values():
                        inner(item)
                        # Delete empty folders here
                        if del_nodes:
                            print 'Perform delete here'
                            if 'children' in tree and isinstance(tree['children'], (list, tuple)):
                                getvals = operator.itemgetter('key')
                                tree['children'].sort(key=getvals)
                                result = []
                                # groupby is the wrong method.  I need a list of tree['children'] that doesn't contain keys in del_nodes
                                for k, g in itertools.groupby(tree['children'], getvals):
                                    result.append(g.next())

                                    tree['children'][:] = result

                            del_nodes = []
            else:
                for item in tree.values():
                    inner(item)
        elif isinstance(tree, (list, tuple)):
            for item in tree:
                inner(item)

                if isinstance(item, dict):
                    if 'type' in item and item['type'] == 'Folder':
                        if 'children' not in item or not item['children']:
                            print 'Delete ' + str(item['name'])
                            if str(item['key']) not in del_nodes:
                                del_nodes.append(str(item['key']))
                elif isinstance(item, (list, tuple)):
                    if not item:
                        print 'Delete ' + str(item['name'])
                        if str(item['key']) not in del_nodes:
                            del_nodes.append(str(item['key']))

    inner(tree) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T21:40:51.180

我建议您编写一个函数来遍历您的数据结构并在每个节点上调用一个函数。

*更新以避免“从迭代序列​​中删除项目”错误*

**例如**

```
def walk(node,parent=None,func=None):
  for child in list(node.get('children',[])):
    walk(child,parent=node,func=func)
  if func is not None:
    func(node,parent=parent)

def removeEmptyFolders(node,parent):
  if node.get('type') == 'Folder' and len(node.get('children',[])) == 0:
    parent['children'].remove(node)

d = {'children': [{'children': [{'key': 'group-1',
                         'name': 'PRD',
                         'parent': 'dc-1',
                         'type': 'Folder'},
                        {'children': [{'key': 'group-11',
                                       'name': 'App1',
                                       'parent': 'group-2',
                                       'type': 'Folder'}],
                         'key': 'group-2',
                         'name': 'QA',
                         'parent': 'dc-1',
                         'type': 'Folder'},
                        {'key': 'group-3',
                         'name': 'Keep',
                         'parent': 'dc-1',
                         'type': 'Host'}],
           'key': 'dc-1',
           'name': 'ABC',
           'parent': 'root',
           'type': 'Datacenter'}],
'key': 'root',
'name': 'Datacenters',
'parent': None,
'type': 'Folder'} 
```

**笔记**

*   *Walk*函数使用三个参数，子节点、父节点和*工作*函数。
*   *walk*函数在访问完子节点后调用*work函数。*
*   *工作*函数将子节点和父节点都作为参数，因此修剪子节点就像`parent['children'].remove(child)`
*   *更新*：如评论中所述，如果您在迭代时从序列中删除，它将跳过元素。`for child in list(node.get('children',[]))`在`walk`函数中复制子列表，允许从父键中删除条目而不跳过。

**Then**:

```
>>> walk(d,func=removeEmptyFolders)
>>> from pprint import pprint
>>> pprint(d)
{'children': [{'children': [{'key': 'group-3',
                             'name': 'Keep',
                             'parent': 'dc-1',
                             'type': 'Host'}],
               'key': 'dc-1',
               'name': 'ABC',
               'parent': 'root',
               'type': 'Datacenter'}],
 'key': 'root',
 'name': 'Datacenters',
 'parent': None,
 'type': 'Folder'} 
```

# asp.net - 在 C# asp.net Web 表单项目中更改 Web 引用 IP

> ID：15723634
> 
> 赞同：3
> 
> 时间：2013-03-30T21:22:22.933
> 
> 标签：asp.net, web-services, web-reference

我正在做一个不是我创建的项目。此项目包含对在远程计算机上运行的某些 Windows 服务的 Web 引用。

在 Visual Studio 2010 中，它看起来像这样：

![在此处输入图像描述](../Images/0cfe837e0618909034a6ad8235a0e14b.png)

我使用VS的搜索来获取解决方案中的IP，并在一个项目的5个地方看到它。此外，似乎在 3 个地方有代码（其他是 web.config 和 config.config 文件）以及由 Visual Studio 生成的 IP 引用。

我从未使用过 Web 引用 - 是否可以在不重新编译的情况下更改指向该 Web 服务的 IP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:27:36.340

如果我理解正确，您必须将代理 URL 更改为动态的。然后，您将能够通过应用程序的配置文件访问它。

[CodeProject 上的这篇文章](http://www.codeproject.com/Articles/12317/How-to-make-your-Web-Reference-proxy-URL-dynamic)应该可以很好地为您解释。

# event-sourcing - 为什么我的命令事件字符串字段被检索为空

> ID：15723640
> 
> 赞同：1
> 
> 时间：2013-03-30T21:23:16.037
> 
> 标签：event-sourcing, neventstore

我正在编写我的第一个 EventStore 测试应用程序，我正在从流中重新水化我的对象，虽然它正确获取了 numberSold，但标题为空，我不明白为什么 - 从流中检索的命令具有标题设置为空，但我确信它写得很好。

一双新鲜的眼睛能看出我做错了什么吗？

```
private static void Main()
{
    using (store = WireupEventStore())
    {
        var newBook = new Book("my book", 0);
        newBook.ChangeBookName("renamed book");
        newBook.AdjustBooksSold(5);
        var idToRetrieveLater = newBook.bookId;

        var bookRepo = new BookRepository(store);
        bookRepo.Put(newBook);

        var bookReadBack = bookRepo.Get(idToRetrieveLater);
        // book name is set to null here, but count==5 is OK
} 
```

书类

```
public class Book
{ 
    public readonly Guid bookId;
    private int numberSold;
    private string title { get; set; }
    private List<object> eventsToCommit = new List<object>();

    public Book(string title, int sold)
    {
        this.bookId = Guid.NewGuid();
        this.title = title;
        this.numberSold = sold;
    }

    public Book(Guid id, IEnumerable<EventMessage> events)
    {
        this.bookId = id;
        foreach (var ev in events)
        {
            dynamic @eventToCall = ev.Body;
            Apply(@eventToCall);
        }
    }

    public void ChangeBookName(string name)
    {
        var nameChanged = new BookNameChanged(this.bookId, name);
        this.RaiseEvent(nameChanged);
    }

    public void AdjustBooksSold(int count)
    {
        var booksSold = new BookSold(this.bookId, count);
        this.RaiseEvent(booksSold);
    }

    private void Apply(BookNameChanged nameChanged)
    {
        this.title = nameChanged.title;
    }

    private void Apply(BookSold bookSold)
    {
        this.numberSold += bookSold.count;
    }

    protected void RaiseEvent(object eventToRaise)
    {
        dynamic @ev = eventToRaise;
        Apply(@ev);
        this.eventsToCommit.Add(eventToRaise);
    }

    public ICollection<object> GetEvents()
    {
        return this.eventsToCommit;
    }

    public void ResetEvents()
    {
        this.eventsToCommit = new List<object>();
    }
} 
```

图书存储库

```
public class BookRepository
{
    IStoreEvents store;

    public BookRepository(IStoreEvents store)
    {
        this.store = store;
    }

    public void Put(Book book)
    {
        using (var stream = this.store.OpenStream(book.bookId, 0, int.MaxValue))
        {
            foreach (object o in book.GetEvents())
            {
                stream.Add(new EventMessage { Body = @o });
            }
            stream.CommitChanges(Guid.NewGuid());
            book.ResetEvents();
        }
    }

    public Book Get(Guid id)
    {
        using (var commits = this.store.OpenStream(id, 0, int.MaxValue))
        {
            var eventsToReply = commits.CommittedEvents;
            return new Book(id, eventsToReply);
        }
    }
} 
```

命令

```
public class BookNameChanged
{
    public readonly Guid id;
    public readonly string title;

    public BookNameChanged(Guid id, string bookName)
    {
        this.id = id;
        this.title = bookName;
    }
}

public class BookSold
{
    public readonly Guid id;
    public readonly int count;

    public BookSold(Guid id, int count)
    {
        this.id = id;
        this.count = count;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:02:00.137

第一次做的不错。根据您连接字段的方式，它们具有野兔`readonly`以及缺少无参数公共构造函数的事实可能会导致大多数序列化机制出现问题 - 即使它们成为自动属性。

While I generally like to protect invariants by constraining stuff as you have, it's important to balance this with the fact that an event, once it has happened is fully baked - so a POCO with writable properties isnt as crazy as you'd think.

One other thing I'd do is get rid of the ids out of the events.

(And go join the DDD-CQRS mailing list - there's a recent discussion that touched on the notion of fat events - i.e. restating stuff that can be gleaned from previous events [on the basis that you know what an event handler needs to react to an event] which I agree is a bad idea).

I must post my `AggregateBase` - there's a of subtleties you got right but lots of litle things I'd change. Poke me in a week if I haven't done it sooner...

# linux - bash 文件中出现意外的 eof 错误

> ID：15723641
> 
> 赞同：0
> 
> 时间：2013-03-30T21:23:16.467
> 
> 标签：linux, bash, scripting

我正在创建一个做一些简单数学运算但无法运行的小程序。它只是输出“文件意外结束”。我似乎找不到错误..？

```
#!/bin/bash

until [ $second_num -ne 0 ]; do
    echo "Enter number 1:"
    read first_num
    echo "Enter number 2:"
    read second_num
    echo "Cannot divide by 0\. Start over."
done

result=0
if [ $first_num -ne 999 && $second_num -ne 999 ]; then
    let result=$((first_num/second_num))
    echo $result    
    echo "Program finished!"
else
    echo "You have exited the program."
    exit 0 
fi  

number=1
while [ $number -lt 100 ]; do
    echo $number
    let number=$(( $number % 5 ))
    echo $number >> sample.txt
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:42:59.637

乍一看，我发现您的脚本存在 2 个问题：

*   `until [ $second_num -ne 0 ]; do`

    您没有初始化`$second_num`，因此您试图将 0 与无进行比较。

*   `if [ $first_num -ne 999 && $second_num -ne 999 ]; then`

    `&&`是一个[条件执行运算符](http://tldp.org/LDP/abs/html/ops.html)。（单个）方括号内的两个表达式的 AND 运算符是`-a`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T22:11:20.877

我不知道您要做什么，但是以下代码应该可以正常工作而不会出现任何错误

```
 #!/bin/bash

until [ $second_num -ne 0 ]; do
    echo "Enter number 1:"
    read first_num
    echo "Enter number 2:"
    read second_num
    echo "Cannot divide by 0\. Start over."
done

result=0
if [ "$first_num" -ne "999" -a "$second_num" -ne "999" ];

then
    let result=$(($first_num/$second_num))
    echo $result    
    echo "Program finished!"
else
    echo "You have exited the program."
    exit 0
fi

number=1
while [ $number -lt 100 ]; do
    echo $number
    let number=$(( $number % 5 ))
    echo $number >> sample.txt
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T10:46:48.673

我在 bash 版本 4 下执行，没有问题（没有语法错误），但是有些语义错误，变量 second_num 未定义，并且 if 语句第 3 行中的 &&：[：-ne：一元运算符预期输入数字 1：34 输入数字 2：54不能除以 0。重新开始。第 12 行：[:missing `]' 你已经退出了程序。

再次向您发送脚本

# delphi - Translating Delphi collection to C++ Builder code (TIdPOP3)

> ID：15723644
> 
> 赞同：-1
> 
> 时间：2013-03-30T21:23:24.893
> 
> 标签：delphi, c++builder, indy

Can someone help me translate a line from this code to C++ Builder:

[http://blog.onkeysoft.com/2011/04/20/how-to-prepare-a-connection-to-pop3-server-with-indy-tidpop3/](http://blog.onkeysoft.com/2011/04/20/how-to-prepare-a-connection-to-pop3-server-with-indy-tidpop3/)

I was doing good until this line:

```
 POP3Client.SASLMechanisms.Add.SASL := tidsasl(con_sasl_anonymous); 
```

Additional question - is there a "good" order of SASL mechanisms to try out - from most secure to least secure? In other words, what would be a good order of them? I would try with SHA1 first, then MD5 then... something here... and PlainText as last one.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T01:30:31.200

For future googlers - thanks to TLama:

```
TIdSASLListEntry *se = POP3Client->SASLMechanisms->Add();
se->SASL = (TIdSASL*)con_sasl_anonymous; 
```

Or if you prefer C++ style casts:

```
TIdSASLListEntry *se = POP3Client->SASLMechanisms->Add();
se->SASL = static_cast<TIdSASL*>(con_sasl_anonymous); 
```

# c++ - 计算二叉搜索树的高度

> ID：15723646
> 
> 赞同：2
> 
> 时间：2013-03-30T21:23:30.090
> 
> 标签：c++, binary-tree, binary-search-tree

我一直在寻找如何计算二叉搜索树的高度，我的研究使我得到了以下实现。我仍在努力思考为什么它应该起作用，但我也不确定它为什么不起作用。这是我的高度函数。

```
int BinaryTreeNode::height() const {
    int lefth = left->height();
    int righth = right->height();
    if(lefth > righth) {
        return lefth + 1;
    } else {
        return righth + 1;
    }
} 
```

这是我对节点的类定义

```
class BinaryTreeNode {
  public:
    Data * nodeData;
    BinaryTreeNode * left;
    BinaryTreeNode * right; 
```

当我尝试运行它时，我的程序锁定并崩溃。我错过了一些明显的东西吗？

编辑：为什么这不起作用？

```
int BinaryTreeNode::height() const {
    int l = 0;
    if (left != NULL) {
        left->height();
    }
    int r = 0;
    if (right != NULL) {
        right->height();
    }
    if (l > r) {
        return l + 1;
    }
    else {
        return r + 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-30T21:28:16.320

Your tree is not infinite. So, I suppose some nodes do not have left or right childs, and the pointers `left` and/or `right` are null in this case. You have to check for their existence before trying to use them.

Try that function instead:

```
int BinaryTreeNode::height()
{
    int l = left ? left->height() : 0;  // height of left child, if any
    int r = right ? right->height() : 0; // idem for right child
    return 1 + max(l, r);
} 
```

Note: I have simplified your computations of height.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T21:26:14.443

问题是您的函数从不检查子指针是否为`NULL`，因此除了取消引用无效指针之外，您还有一个缺少基本情况的递归函数：

试试这个版本：

```
int BinaryTreeNode::height() const 
{
    int lefth = 0;
    if (left != NULL) { lefth = left->height(); }

    int righth = 0;
    if (righth != NULL) { righth = right->height(); }

    if (lefth > righth) { return lefth + 1; } 
    else { return righth + 1; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-03T03:13:32.743

Even I was facing the same problem, well the problem with your code is that in your function you are using recurssion twice and you are going to the left and right extremities, but you arent checking the possibility if the right child of one of the parent node in left subtree has its own children, hence your are not traversing to the last leaf node in your tree! hope this helps

# php - 做一个while循环后，检查是否有任何行，如果没有，回显一些PDO

> ID：15723647
> 
> 赞同：-1
> 
> 时间：2013-03-30T21:23:30.683
> 
> 标签：php, pdo

我有一个从 MySQL 数据库中获取行的 while 循环。

但我想检查是否有行，如果表为空，则回显错误。

我有一个肮脏的方式来做到这一点：

```
while($row = $fetch->fetch( PDO::FETCH_ASSOC ) $random[] = $row['a_column'] ) {
    if (count($random) == 0) {
    echo ' It's empty... ';
    } else {
echo $row['a_column'];
} 
```

问题是我有很多专栏，我确信这是一种非常肮脏的方式。

**问题**

我正在使用 PDO，但我不确定如何检查表中是否有任何行。

**问题**

我如何发现该表不包含任何行，如果不包含，则回显错误。如果包含，则回显 a_column 的结果？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:26:59.207

您可以使用[`$fetch->columnCount()`](http://www.php.net/manual/en/pdostatement.columncount.php). 如果没有结果，它将返回`0`。也可以使用[`$fetch->rowCount()`](http://php.net/manual/en/pdostatement.rowcount.php)，尽管手册不建议将其用于`SELECT`语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T05:20:18.337

您必须以最直接的方式进行操作，但由于某种原因，您必须以最复杂的方式进行操作。
你真正需要的是

*   从数据库中获取数据
*   检查你是否有任何
*   使用数据

所以，给你

```
 //to get data from DB
$data = $fetch->fetchAll();
//to check if you got any
if (!$data) {
    // It's empty
} else {
    // to use the data
    foreach ($data as $row){
        //use it
    }
} 
```

# modelica - 设计继电器

> ID：15723653
> 
> 赞同：1
> 
> 时间：2013-03-30T21:24:09.413
> 
> 标签：modelica, dymola

我正在尝试构建一个继电器，但我总是收到一个对我来说没有任何意义的错误。

该错误表示缺少地面对象或未连接组件，
但我找不到任何丢失的东西。

我尝试以不同的方式构建继电器，但总是出现相同的错误......

![在此处输入图像描述](../Images/c3d1fb43ee9d8bae2459fd640d994efa.png)

我测试继电器的课程：

```
model test

Relay relay  annotation (Placement(transformation(extent={{-20,4},{0,24}})));
ConstantVoltage constantVoltage annotation (Placement(transformation(
    extent={{-10,-10},{10,10}},
    rotation=-90,
    origin={-74,10})));
ConstantVoltage constantVoltage1 annotation (Placement(transformation(
    extent={{-10,-10},{10,10}},
    rotation=-90,
    origin={52,12})));
Modelica.Electrical.Analog.Basic.Ground ground
annotation (Placement(transformation(extent={{-42,-30},{-22,-10}})));
equation 
connect(relay.n1, constantVoltage.n)  annotation (Line(
  points={{-20,9},{-46,9},{-46,0},{-74,0}},
  color={0,0,255},
  smooth=Smooth.None));
connect(constantVoltage.p, relay.p1)  annotation (Line(
  points={{-74,20},{-48,20},{-48,19},{-20,19}},
  color={0,0,255},
  smooth=Smooth.None));
connect(relay.n1, ground.p)  annotation (Line(
  points={{-20,9},{-26,9},{-26,-10},{-32,-10}},
  color={0,0,255},
  smooth=Smooth.None));
connect(relay.p2, constantVoltage1.p)  annotation (Line(
  points={{0,19},{26,19},{26,22},{52,22}},
  color={0,0,255},
  smooth=Smooth.None));
connect(constantVoltage1.n, relay.n2)  annotation (Line(
  points={{52,2},{26,2},{26,9},{0,9}},
  color={0,0,255},
  smooth=Smooth.None));
connect(ground.p, relay.n2)  annotation (Line(
  points={{-32,-10},{-16,-10},{-16,9},{0,9}},
  color={0,0,255},
  smooth=Smooth.None));
annotation (Diagram(coordinateSystem(preserveAspectRatio=false, extent={{-100,
        -100},{100,100}}), graphics));
 end test; 
```

继电器类：很简单，我只看v1，如果电压为正，继电器应该让电流通过。

```
model Relay
extends Modelica.Electrical.Analog.Interfaces.TwoPort;

Boolean off;

equation 
off = v1 < 0;

v2 = if off then 0 else v2;
i2 = if off then 0 else i2;

annotation (Diagram(coordinateSystem(preserveAspectRatio=false, extent={{-100,
        -100},{100,100}}), graphics));
end Relay; 
```

错误日志：

```
Check of MTS.test:

The model has the same number of unknowns and equations: 27

The problem is structurally singular.
It has 27 scalar unknowns and 27 scalar equations.
The Real part has 26 unknowns and 26 equations.
The Integer part has 0 unknowns and 0 equations.
The Boolean part has 1 unknowns and 1 equations.
The String part has 0 unknowns and 0 equations.

Attempting to further localize singularity.

Singularity of MTS.test is at the top level.

The model MTS.test is structurally singular.

The problem is structurally singular for the element type Real.
The number of scalar Real unknown elements are 26.
The number of scalar Real equation elements are 26.

The model includes the following hints:
An electrical current cannot be uniquely calculated.
The reason could be that
- a ground object is missing (Modelica.Electrical.Analog.Basic.Ground)
to define the zero potential of the electrical circuit, or
- a connector of an electrical component is not connected.

The problem has no elements of type Integer.

The problem is structurally regular for the element type Boolean.
The number of scalar Boolean elements are 1.

The problem has no elements of type String.

ERROR: 2 errors were found

WARNING: 2 warnings were issued 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:22:36.087

Here is a different approach that may be worth investigating:

Using a variable resistor on the switch side, and if the switch is open then set the resistance to very large and if it is closed set the resistance to very small.

There are probably more accurate methods but you could probably implement this in such a way to avoid events.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T12:31:53.443

At a glance, the thing that strikes me is that you don't have any load in either circuit. It says it cannot compute the current but the ground issue is only a hint. Looking at the circuit, you have to ask yourself, what would these circuits do if there was no ground? Without a load of some kind in the circuit, I don't see a way to compute the currents in either loop.

So try putting some resistors in each loop and see if that helps.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T00:46:47.750

我不认为 i2 和 v2 在您的继电器模型中应该同时为零。试试这个。一方面是理想的电压传感器。另一个在设定电压以下开路，在其之上短路。正如另一个响应指出的那样，您需要添加一个串联负载来解决电流问题。模型继电器扩展了 Modelica.Electrical.Analog.Interfaces.TwoPort；布尔关闭；参数 Modelica.SIunits.Voltage disconnectVoltage = 0；

```
 equation 
     off = v1 < disconnectVoltage;
     i1=0;
     if off then
       i2 = 0;
     else
       v2 = 0;
     end if;
   end Relay; 
```

如果您必须避免模型中的任何负载，您可以使用 Modelica 标准库中的理想开关之一构建类似的东西。它们包括小电阻和电导，因此在您的示例中应该可以在不增加负载的情况下求解电流。

```
model relay2

  Modelica.Electrical.Analog.Ideal.IdealOpeningSwitch idealOpeningSwitch 
    annotation (Placement(transformation(
        extent={{-10,10},{10,-10}},
        rotation=-90,
        origin={60,0})));
  Modelica.Electrical.Analog.Sensors.VoltageSensor voltageSensor annotation (
      Placement(transformation(
        extent={{-10,10},{10,-10}},
        rotation=-90,
        origin={-60,0})));
  Modelica.Blocks.Logical.GreaterThreshold greaterThreshold(threshold=0) 
    annotation (Placement(transformation(
        extent={{10,-10},{-10,10}},
        rotation=180,
        origin={0,0})));
  Modelica.Electrical.Analog.Interfaces.PositivePin p1
    annotation (Placement(transformation(extent={{-110,50},{-90,70}})));
  Modelica.Electrical.Analog.Interfaces.NegativePin n1
    annotation (Placement(transformation(extent={{-110,-70},{-90,-50}})));
  Modelica.Electrical.Analog.Interfaces.PositivePin p2
    annotation (Placement(transformation(extent={{90,50},{110,70}})));
  Modelica.Electrical.Analog.Interfaces.NegativePin n2
    annotation (Placement(transformation(extent={{90,-70},{110,-50}})));
  annotation (Diagram(coordinateSystem(preserveAspectRatio=true,extent={{-100,-100},
            {100,100}}), graphics), uses(Modelica(version="3.2")));
equation 

  connect(greaterThreshold.u, voltageSensor.v) annotation (Line(
      points={{-12,0},{-12,0},{-50,0},{-50,0}},
      color={0,0,127},
      smooth=Smooth.None));
  connect(idealOpeningSwitch.control, greaterThreshold.y) annotation (Line(
      points={{50,0},{45,0},{15,0},{15,0},{15,0}},

      color={255,0,255},
      smooth=Smooth.None));

  connect(idealOpeningSwitch.n, n2) annotation (Line(
      points={{60,-10},{60,-60},{100,-60}},
      color={0,0,255},
      smooth=Smooth.None));
  connect(idealOpeningSwitch.p, p2) annotation (Line(
      points={{60,10},{60,60},{100,60}},
      color={0,0,255},
      smooth=Smooth.None));
  connect(voltageSensor.p, p1) annotation (Line(
      points={{-60,10},{-60,60},{-100,60}},
      color={0,0,255},
      smooth=Smooth.None));
  connect(voltageSensor.n, n1) annotation (Line(
      points={{-60,-10},{-60,-60},{-100,-60}},
      color={0,0,255},
      smooth=Smooth.None));
end relay2 
```

# php - Using regex to filter year of fixed length 0 or 4 digit

> ID：15723663
> 
> 赞同：3
> 
> 时间：2013-03-30T21:25:37.983
> 
> 标签：php, javascript, regex

i want to filter year using regex in php or javascript.

which contain only number and its length is 0(if not input) or 4 if(insert) it is not accept 1, 2 or 3 length for ex 123.

i know regex for 0 to 4 digit which is `^[0-9]{0,4}$` or `^\d{0,4}$`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-30T21:28:53.767

Try the following:

```
^([0-9]{4})?$ 
```

`^` - start of line

`([0-9]{4})?` - four numbers, optionally (because of the `?`)

`$` - end of line

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T16:35:17.397

I know this question has already been answered but just to be more clear and as an alternate solution i would come up with this:

In your pattern:

```
^[0-9]{0,4}$ 
```

`{0,4}` will allow to match numbers of length 0, 1, 2, 3 and 4\. To eliminate length 1, 2 and 3 you can also use something like:

```
^\d{4}?$ 
```

Here:

```
^    = beginning of line
\d   = any digit - equivalent of [0-9]
{4}  = exactly four times
?    = makes the preceding item optional
$    = end of line 
```

Hope it helps!

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-30T21:51:25.983

You do not need to use regular expressions for something as simple as matching a year:

```
if (ctype_digit($year) && strlen($year) === 4) {
    echo 'This is a year';
} else {
    echo 'Not a year';
} 
```

# php - Wordpress 简码无效

> ID：15723666
> 
> 赞同：-1
> 
> 时间：2013-03-30T21:26:01.160
> 
> 标签：php, wordpress, shortcode

我为 wordpress 创建了这个简码，但没有用

```
<?php
function theme_tfw_posts()
{
?>
<?php
    global $post;
    $args = array( 'numberposts' => 5, 'offset'=> 1, 'category' => 1 );
    $myposts = get_posts( $args );
    foreach( $myposts as $post ) :
        setup_postdata($post);
?>
        $a=<a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>;
    <?php endforeach; ?>
<?php
    return $a;
}
?>
<?php
add_shortcode('tfw_posts','theme_tfw_posts');
?> 
```

我认为问题出在标签或其他东西上，但这是我的第一个简码，问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:42:14.790

至少有一件事看起来是错误的，`$a`当你返回它时不会被定义。原因是您的行`$a=<a href...`不在 PHP 代码块内。

`$a`每次`foreach`循环执行时也会被覆盖。也许您想将每个链接附加到上一个链接？

这可能会更好（尽管我不完全确定您要做什么，所以可能不会）：

```
<?php
function theme_tfw_posts()
{
    $args = array( 'numberposts' => 5, 'offset'=> 1, 'category' => 1 );
    $myposts = get_posts( $args );
    $a = '';
    foreach( $myposts as $post )
    {
        setup_postdata($post);
        $a .= '<a href="' . the_permalink() . '">' . the_title() . '</a>';
    }
    return $a;
}
add_shortcode('tfw_posts','theme_tfw_posts');
?> 
```

# umbraco - 如何在 Umbraco 的用户控件中连接 Sql 服务器数据库？

> ID：15723668
> 
> 赞同：0
> 
> 时间：2013-03-30T21:26:12.360
> 
> 标签：umbraco

我是 Umbraco 的新手。我正在尝试使用 dot net 用户控件在 umbraco 中开发自定义注册页面。为此，我在 umbraco 数据库中创建了一个名为“registerTable”的自定义表。我只想使用 Usercontrol 将数据插入到该表中。. 连接字符串“CM_Connection”位于 Webconfig 文件中。

这是代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Configuration;

namespace thesis
{
       public partial class test : System.Web.UI.UserControl
       {
          protected void Page_Load(object sender, EventArgs e)
          {
          }

        protected void Button1_Click(object sender, EventArgs e)
        {
                using (SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["CM_Connection"].ConnectionString))
                {
                    SqlCommand cmd = new SqlCommand();
                    Guid guid;
                    guid = Guid.NewGuid();
                    string sql = "INSERT INTO registerTable (Firstname) VALUES (@Name)";
                    cmd.Parameters.AddWithValue("@Name", TextBox1.Text.Trim() );
                    cmd.Connection = con;
                    cmd.CommandText = sql;
                    con.Open();
                    try
                    {
                        cmd.ExecuteNonQuery();
                        Label1.Text = "Registered successfully.";
                    }
                    catch (Exception ex)
                    {
                        throw new Exception(ex.Message);
                    }
                }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-26T15:48:11.170

这将使您继续前进 - 此代码是 Umbraco 术语中的宏。IT 只是获取当前的数据库大小——但您当然可以随意更改查询。

```
@using Umbraco.Core
    <div>
    @{
        var context = ApplicationContext.Current;

        var databaseContext = context.DatabaseContext;

        databaseContext.Database.OpenSharedConnection();

        var db = ApplicationContext.Current.DatabaseContext.Database;

        var sql = "SELECT (SUM(reserved_page_count) * 8192)  FROM sys.dm_db_partition_stats";
        var result = db.ExecuteScalar<int>(sql);        
}

@if (databaseContext.Database.Connection.State == System.Data.ConnectionState.Open)
    {
    <span> Database is Open </span>
    <span> Size: @result</span>
    }
else
    {
    <span> Database is Closed</span>
    } 
```

基本上你所做的就是

1.  获取应用程序上下文
2.  获取数据库上下文
3.  打开数据库
4.  执行您的查询
5.  显示结果

为此，您需要使用 Umbraco.Core。

# c# - 视图控制器如何找出视图控制器的名称？

> ID：15723670
> 
> 赞同：0
> 
> 时间：2013-03-30T21:26:22.897
> 
> 标签：c#, xamarin.ios, xamarin

我有一个名为 ReadingMaintView 的 tableviewcontroller。每行都有一个标签和一个数据收集控件，例如阅读日期有一个文本字段。为了允许用户使用他们的拇指滚动一个日期选择器来选择他们想要放置在阅读日期文本字段中的日期，我有另一个名为 AccessoryViewController 的 ViewController。这个视图上的所有内容都是一个日期选择器。当用户触摸accessorydetails 按钮时，我有一个启动AccessoryViewController 的segue。这样用户就可以选择他们想要的日期。

现在，我想让任何 Viewcontroller 能够调用 AccessoryViewController 到它需要的日期。这意味着 AccessoryViewController 需要知道调用 ViewController 的名称，以便它可以返回。我怎样才能做到这一点 ？我在 ReadingMaintView 中设置了 segue 准备，当我触摸附件按钮时它会触发。但是我必须在 AccessoryViewController 中做什么来检索被调用的名称（在本例中为 ReadingMaintView）来执行回调？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:33:59.763

如果我理解你的问题，这里有几个建议。`ReadingMainView`在构造函数中将作为参数传递给您的`AccessoryViewController`

```
public class AccessoryViewController : UIViewController {
    public AccessoryViewController(UIViewController parent) {}
} 
```

（编辑：@LarryOBrian 当然是正确的。这已经由`ParenViewController`物业处理，所以这不是一个很好的建议......）

或者让你`AcessoryViewController`发出一个事件，控制器启动它可以注册一个事件处理程序

```
// Somewhere in ReadingMaintView
var accessoryViewController = new AccessoryViewController();
accessoryViewController.ActionCompleted += (eventArgs) => {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T04:01:55.127

每个`UIViewController`都有`ParentViewController`type 的属性`UIViewController`。或者，如果您在层次结构中处于低位，您可以抓住`UIWindow`'s`RootViewController`并按照自己的方式向下工作。`ChildViewControllers`

另外，我可能会误解您的用例，但似乎您可能只是调用`UIViewController.PerformSegue(String identifier)`.

# excel - 如何从字符串中删除除句点和空格之外的所有非字母数字字符？

> ID：15723672
> 
> 赞同：21
> 
> 时间：2013-03-30T21:26:28.883
> 
> 标签：excel, vba

我需要从字符串中删除所有非字母数字字符，除了 Excel 中的句点和空格。使用 VBA 而不是纯 excel 函数的解决方案就可以了。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-30T21:39:09.617

将此函数插入​​到 Visual Basic 编辑器中的新模块中：

```
Function AlphaNumericOnly(strSource As String) As String
    Dim i As Integer
    Dim strResult As String

    For i = 1 To Len(strSource)
        Select Case Asc(Mid(strSource, i, 1))
            Case 48 To 57, 65 To 90, 97 To 122: 'include 32 if you want to include space
                strResult = strResult & Mid(strSource, i, 1)
        End Select
    Next
    AlphaNumericOnly = strResult
End Function 
```

现在您可以将其用作用户定义函数，即如果您的数据在单元格中`A1`，则将此公式放在一个空单元格中`=AlphaNumericOnly(A1)`。

如果您想直接转换大范围，即在不离开源代码的情况下替换所有非字母数字字符，您可以使用另一个 VBA 例程执行此操作：

```
Sub CleanAll()
    Dim rng As Range

    For Each rng In Sheets("Sheet1").Range("A1:K1500").Cells 'adjust sheetname and range accordingly
        rng.Value = AlphaNumericOnly(rng.Value)
    Next
End Sub 
```

只需将此子程序放在同一模块中并执行它。但请注意，这将替换该范围内的任何公式。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-11-06T13:24:25.970

这是使用模式匹配从字符串中删除“您想要的任何字符”的另一种方法。

*   下面的示例删除了*除*字母、数字、空格和句点 ( `[A-Z.a-z 0-9]`) 之外的所有内容

*   为了提高效率，它还利用了 VBA在字符串和字节数组之间的[无缝转换：](https://stackoverflow.com/a/51244433/8112776)

> # `cleanString`功能：
> 
> ```
> Function cleanString(str As String) As String
>     Dim ch, bytes() As Byte: bytes = str
>     For Each ch In bytes
>         If Chr(ch) Like "[A-Z.a-z 0-9]" Then cleanString = cleanString & Chr(ch)
>     Next ch
> End Function 
> ```

* * *

## 更多信息：

*   有关为`Like`运算符创建模式的更多信息，请参阅：
    *   [VBA：**Like 运算**](https://docs.microsoft.com/dotnet/visual-basic/language-reference/operators/like-operator#pattern-options)**符描述**
    *   better info in the [VB.NET: **Like Operator**](https://docs.microsoft.com/office/vba/language/reference/user-interface-help/like-operator) **description**
*   More about how [**Byte Arrays and Strings are basically interchangeable**](https://stackoverflow.com/a/51244433/8112776)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-04-23T12:36:14.933

I was looking for a more elegant solution than the one I came up with. I was going to use ashleedawg's code above as it certainly is neater than my code. Ironically, mine ran 30% quicker. If speed is important (say you have a few million to do), try this:

```
 Public Function AlphaNumeric(str As String) As String
    Dim i As Integer

    For i = 1 To Len(str)
        If InStr(1, "01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz. ", Mid(str, i, 1)) Then AlphaNumeric = AlphaNumeric & Mid(str, i, 1)
    Next
End Function 
```

There's a surprise around every corner with VBA. I'd never imagine this would be quicker...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-07T10:01:14.230

我编写了以下代码，就我测试它而言，它可以工作，它由两个函数组成。第一个检查字符串是否为字母数字，第二个进行替换（它也删除空格）

```
Public Function Isalphanumeric(cadena As String) As Boolean

    Select Case Asc(UCase(cadena))
        Case 65 To 90 'letras
            Isalphanumeric = True
        Case 48 To 57 'numeros
            Isalphanumeric = True
        Case Else
            Isalphanumeric = False

    End Select

End Function 
```

这里是删除功能

```
Function RemoveSymbols_Enhanced(InputString As String) As String

 Dim InputString As String
 Dim CharactersArray()
 Dim i, arrayindex, longitud As Integer
 Dim item As Variant

 i = 1
 arrayindex = 0
 longitud = Len(InputString)

'We create an array with non alphanumeric characters
 For i = 1 To longitud

  If Isalphanumeric(Mid(InputString, i, 1)) = False Then
    ReDim Preserve CharactersArray(arrayindex)
    CharactersArray(arrayindex) = Mid(InputString, i, 1)
    arrayindex = arrayindex + 1

  End If

  Next

 'For each non alphanumeric character we do a replace
 For Each item In CharactersArray
  item = CStr(item)
  InputString = Replace(InputString, item, "")
 Next

End Function 
```

# r - 在 R 中对多个数据帧进行排序并对其求和

> ID：15723673
> 
> 赞同：4
> 
> 时间：2013-03-30T21:26:35.690
> 
> 标签：r, sum, ranking, data-manipulation

我有 10 个数据框，每个数据框有 2 列，我将数据框称为 a、b、c、d、e、f、g、h、i 和 j。

每个数据帧中的第一列称为 s 用于序列，第二列称为 p 用于对应于每个序列的 p 值。s 列包含所有 10 个数据帧的相同序列，本质上唯一的区别在于 p 值。下面是数据框 a 的简短版本，它有 600,000 行。

```
s       p
gtcg    0.06
gtcgg   0.05
gggaa   0.07
cttg    0.05 
```

我想按 p 值对每个数据帧进行排名，最小的 p 值应该得到 1 的等级，相等的 p 值应该得到相同的等级。每个最终数据帧应采用以下格式：

```
 s       p_rank_a
    gtcg    2
    gtcgg   1
    gggaa   3
    cttg    1 
```

我用它来做一个：

> r<-rank(a$p)
> 
> cbind(a$s,r)

但我对循环不是很熟悉，也不知道如何自动执行此操作。最终，我想要一个具有 s 列的最终文件，在下一列中是每个特定序列的所有数据帧中所有等级的等级总和。所以基本上是这样的：

```
s       ranksum_P_a-j
gtcg    34
gtcgg   5
gggaa   5009093
cttg    499 
```

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:37:56.207

我把所有的都`data.frames`放在一个`list`然后使用`lapply`和`transform`如下：

```
my_l <- list(a,b,c) # all your data.frames
# you can use rank but it'll give you the average in case of ties
# lapply(my_l, function(x) transform(x, rank_p = rank(p)))

# I prefer this method instead
my_o <- lapply(my_l, function(x) transform(x, p = as.numeric(factor(p))))

# now bind them in to a single data.frame
my_o <- do.call(rbind, my_o)

# now paste them
aggregate(data = my_o, p ~ s, function(x) paste(x, collapse=","))

#       s     p
# 1  cttg 1,1,1
# 2 gggaa 3,3,3
# 3  gtcg 2,2,2
# 4 gtcgg 1,1,1 
```

**编辑**，因为你已经要求一个潜在的更快的解决方案（由于大数据），我建议像@Ricardo，一个`data.table`解决方案：

```
require(data.table)
# bind all your data.frames together
dt <- rbindlist(my_l) # my_l is your list of data.frames

# replace p-value with their "rank"
dt[, p := as.numeric(factor(p))]

# set key
setkey(dt, "s")

# combine them using `,`
dt[, list(p_ranks = paste(p, collapse=",")), by=s] 
```

试试这个：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T22:39:13.113

对于单个 data.frame，您可以一行完成，如下所示：
*感谢@Arun 指出使用`as.numeric(factor(p))`*

```
library(data.table)
aDT <- data.table(a)[, p_rank := as.numeric(factor(p))] 
```

我建议将所有 data.frames 保存在一个列表中，以便您可以轻松地遍历它们。由于您的 date.frames 是字母，因此很容易收集其中的十个：

```
# collect them all
allOfThem <- lapply(letters[1:10], get, envir=.GlobalEnv)   
# keep in mind you named an object `c`

# convert to DT and create the ranks
allOfThem <- lapply(allOfThem, function(x) data.table(x)[, p_rank := as.numeric(factor(p))]) 
```

* * *

单独说明：开始避免命名对象“ `c`”和`R`. 否则，您会发现您将开始遇到许多“无法解释”的行为，在您将头撞到墙上尝试调试它一个小时后，您会意识到您已经覆盖了函数的名称。 *这从来没有发生在我身上:)*

# sparql - 如何使用 Jena 获取 Dbpedia 资源详细信息？

> ID：15723674
> 
> 赞同：2
> 
> 时间：2013-03-30T21:26:41.200
> 
> 标签：sparql, semantic-web, jena, dbpedia, arq

在通过其**Sparql 端点**查询**dbpedia**后，我将结果作为对象。那么我怎样才能得到这个资源的详细信息呢？例如，如果这个资源是一个人；我怎样才能得到他/她？**`Jena ResourceImpl``birthDate`**

 **我试过这个；但它总是返回 null。

```
QuerySolution querySolution = resultSet.next();
RDFNode x = querySolution.get("x");
ResourceImpl resource = (ResourceImpl) x;
Property property = new PropertyImpl("http://dbpedia.org/property/birthDate");
Resource propertyResourceValue = resource.getPropertyResourceValue(property); // NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:50:51.587

如果您想获得有关资源的更多详细信息，您可能需要进行后续 SPARQL 查询。例如，

```
String nextQuery = "DESCRIBE " + FmtUtils.stringForNode(resource.asNode(), (SerializationContext)null);
Query describeQuery = QueryFactory.create(nextQuery);
QueryExecution exec = QueryExecutionFactory.sparqlService("http://endpoint", describeQuery);
Model m = exec.execDescribe(); 
```

然后，您应该能够在结果模型上使用资源 API 来获取所需的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T16:39:53.217

假设您的 SPARQL 查询是 a `SELECT ...`， the`ResultSet`是一个表，并且每个`QuerySolution`都是该表中的一行。当你`get`从`Resource`这样的一行中，你只有一个`Resource`; 属性不会自动附加。`Resource`因此，在return上获得一个属性值`null`。

看起来[RDFOutput](http://jena.apache.org/documentation/javadoc/arq/com/hp/hpl/jena/sparql/resultset/RDFOutput.html)符合您的预期：将 SPARQL 查询`ResultSet`转换为 RDF `Model`。**

# neventstore - EventStore 仅在 Payload 列中显示十六进制字符串

> ID：15723678
> 
> 赞同：2
> 
> 时间：2013-03-30T21:26:56.380
> 
> 标签：neventstore

据我所知，我应该在我的 SQL 数据库 Commits 表的 Payload 列中显示 JSON，但是我有一个很长的十六进制字符串。

我的连线代码根据示例进行了以下编辑：

```
private static IStoreEvents WireupEventStore()
{
        return Wireup.Init()
        .LogToOutputWindow()
        .UsingInMemoryPersistence()
        .UsingSqlPersistence("EventStore") // Connection string is in app.config
            .WithDialect(new MsSqlDialect())
            .EnlistInAmbientTransaction() // two-phase commit
            .InitializeStorageEngine()
            .UsingJsonSerialization()
        .HookIntoPipelineUsing(new[] { new AuthorizationPipelineHook() })
        .UsingSynchronousDispatchScheduler()
            .DispatchTo(new DelegateMessageDispatcher(DispatchCommit))
        .Build();
} 
```

知道如何获取 JSON 并使调试更容易吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T08:51:02.170

只需创建以下视图：

```
CREATE VIEW [dbo].[DeserializedCommits]
    AS 
    SELECT 
         [StreamId]
        ,[StreamRevision]
        ,[Items]
        ,[CommitId]
        ,[CommitSequence]
        ,[CommitStamp]
        ,[Dispatched]
        ,CAST([Headers] AS VARCHAR(MAX)) AS [Headers]
        ,CAST([Payload] AS VARCHAR(MAX)) AS [Payload]
    FROM [dbo].[Commits] 
```

然后，您可以使用`LIKE`on`Payload`列查询事件存储中的特定事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:54:38.867

与此类似的查询将为您提供 Payload 列的字符串内容：

```
Commits
.Select(c => System.Text.Encoding.UTF8.GetString(c.Payload.ToArray()))
.ToList(); 
```

# file - cvSaveImage 没有在这个范围内声明？

> ID：15723681
> 
> 赞同：0
> 
> 时间：2013-03-30T21:27:07.740
> 
> 标签：file, opencv, header

直到今天，我的代码已经完美运行了几个月。它在 C++ 中

```
#include <iostream>
#include <cv.h>
#include <highgui.h>
#include <stdio.h>

using namespace std;

int main()
{
IplImage* img = cvLoadImage("C:/Users/Amadeus/Documents/H1/cat.png");

int result=cvSaveImage("C:/Users/Amadeus/Documents/H1/cat.png",img); <----- Problem

return 0;
} 
```

它一直说“未在此范围内声明 cvSaveImage”。在所有人都说出来之前可以完美编译的文件。我不明白为什么它工作了好几个月，今天它说它没有被宣布。我什至打开了我知道肯定有效的文件，甚至那些没有。这就像头文件损坏或什么？你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:49:54.250

显然，您的系统发生了一些变化。我假设你不知道具体是什么。开始发现它的好点是在预处理完成后查看您的文件。例如，请参阅有关如何执行此操作的[问题。](https://stackoverflow.com/questions/277258/c-c-source-file-after-preprocessing)很可能您`cv.h`出于某种原因指向错误或损坏的文件。

顺便说一句，你为什么不使用现代 C++ OpenCV 函数`imread`和`imwrite`？他们在*各*方面都比他们的老 C 祖先好。

# git - git-clone 致命，权限被拒绝

> ID：15723683
> 
> 赞同：2
> 
> 时间：2013-03-30T21:27:10.890
> 
> 标签：git, git-clone

我有一个新的 git，由于某种原因我无法在一台机器上克隆。克隆在我的笔记本电脑和各种台式机上都可以正常工作，但是从带有 git --version 1.5.2.1 的旧服务器上我收到以下错误：

```
git clone git@git.assembla.com:sbpy.git

Initialized empty Git repository in /home/pkp/test/sbpy/.git/
Permission denied (publickey,keyboard-interactive).
fatal: The remote end hung up unexpectedly
fetch-pack from 'git@git.assembla.com:sbpy.git' failed. 
```

我无法升级本地 git。谁能帮我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T07:27:09.633

您需要生成 ssh 密钥，上面发布的链接是一个很好的链接。

要将您的公共 ssh 密钥（显然您可以上传多个密钥，可能在不同的计算机上使用）上传到[assembla](https://www.assembla.com/home?affiliate=acroitor)，请转到：用户个人资料页面上的[管理 Ssh 密钥选项卡。](https://www.assembla.com/user/edit/edit_git_settings?affiliate=acroitor)

确保您已登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T22:46:32.183

如果这是你的回购。首先，您必须配置您的 ssh 密钥。

按照[https://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)但不要将密钥复制到 github。然后将您的公钥 (id_rsa.pub) 的内容添加到您在 assembla.com 中的帐户（我不知道 Assembla 用户界面，但必须通过选项添加您的密钥）

然后克隆你的仓库。

# pushdown-automaton - Can a pushdown automata have zero final states?

> ID：15723702
> 
> 赞同：2
> 
> 时间：2013-03-30T21:28:33.133
> 
> 标签：pushdown-automaton

As per the question, can a pushdown automata have zero final states?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T21:42:56.513

Yep! There are many different definitions of PDAs, but usually the definition says that a PDA has a set of accepting states, which must be a subset of the set of all states in the PDA. The empty set is a valid set, so the PDA doesn't necessarily ever have to accept. This is how it's possible to build a PDA for the empty language, for example, which is known to be context-free.

Hope this helps!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T01:16:12.240

Some forms of push-down automaton accept by halting with an empty stack at end of input. For this form, there is no such thing as a final state.

# mysql - SELECTING with multiple WHERE range conditions on same column

> ID：15723709
> 
> 赞同：1
> 
> 时间：2013-03-30T21:29:11.263
> 
> 标签：mysql, sql

I have tables like these:

```
 A table                            B table
--------------------       -----------------------------------
item_ID | item_Name         item_ID | option_ID | option_Value 
--------------------       -----------------------------------
   1      item_a               2         34         2000
   2      item_b               2         45         3400
   3      item_c               2         12         1200  
   4      item_d               3         34         500
   5      item_e               3         13         500
   6      item_f               4         45         700 
```

I wrote a query to get items, for example which have **option 34 = 2000** and **option 12 = 1200** is:

```
SELECT A.item_ID, A.item_name
FROM A
LEFT JOIN B ON A.item_ID = B.item_ID
WHERE B.option_ID IN (34, 1200) AND
      B.option_Value IN (1200, 2000) AND
GROUP BY A.item_ID
HAVING COUNT(A.item_ID) >= 2 /* count of option used for search, can be more*/ 
```

My problem is for some options I want to get range result , for example: where **option id 34** is between **1000** and **2000** and **option 12** is lower than **4000**

**Note** : (option_id, option_value) pair is unique and i want to get items that match all of the conditions

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:41:28.887

How about this?

```
SELECT A.item_ID, A.item_name
FROM A
LEFT JOIN B ON A.item_ID = B.item_ID
WHERE (B.option_ID=34 AND B.option_value BETWEEN 1000 AND 2000)
      OR (B.option_ID=12 AND B.option_value BETWEEN 0 AND 4000)
GROUP BY A.item_ID
HAVING COUNT(A.item_ID) >= 2 
```

Maybe I didn't understand the question completely?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T21:42:07.003

This should give you what you want:

```
WHERE
  B.option_ID = 34 AND B.option_Value BETWEEN 1000 AND 2000
  OR
  B.option_ID = 12 AND B.option_Value < 4000 
```

There might be a better way to do this if there was some rule according to which you want to filter... Otherwise, just use `OR` and `AND` to achieve what you want.

# wordpress - add_action not working in wordpress

> ID：15723711
> 
> 赞同：0
> 
> 时间：2013-03-30T21:29:28.280
> 
> 标签：wordpress, url-rewriting, rewrite

I am setting a WP that it should redirect all the request made to sub-directory to file inside that directory. For example if there a visit on `example.com/link/me` then it should send the user to `/link/index.php?me`

To achieve this, I am trying to add rewrite rule in theme function file. Here's what my code looks like:

```
function moin_add_rewrite_rules() {  
    add_rewrite_rule(  
        '^([^/]*)/(link)/(?:[a-z][a-z0-9_]*)?$',  
        '/link/index.php?$matches[1]',  
        'top'  
    );  
}  
add_action( 'init', 'moin_add_rewrite_rules' ); 
```

It is not working, visiting `example.com/link/me`shows a 404 (as link is outside WP). Is there any problem with regex code? or anywhere else? What could be other possible solution?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:24:47.307

Looking at the example in [the Codex](http://codex.wordpress.org/Rewrite_API/add_rewrite_rule), the matched expression doesn't have the leading `/`.

Stripping the leading bit out of your regex, then, I think this should work (sorry, I don't have a test environment handy):

```
add_rewrite_rule('^link/([a-z][a-z0-9_]*)/?$','/link/index.php?$matches[1]','top'); 
```

Alternatively, you could do something similar in your `.htaccess` file.

As a side note, I think as it's currently coded, you should be using `$matches[3]` not `$matches[1]`, as the value you're interested in is the third parameter in parentheses (the Codex notes "capture group data starts at 1, not 0").

# ios - Can I build a static library for iOS without using the Xcode IDE?

> ID：15723713
> 
> 赞同：4
> 
> 时间：2013-03-30T21:29:38.227
> 
> 标签：ios, xcode, makefile

I can't handle the Xcode IDE for this particular project anymore!

I have a simple C project I want to build into a static library for iOS, and I don't want to use the Xcode IDE.

I'm familiar with `xcodebuild` but my understanding is that I'd first need to create an Xcode project to use it - and simply being able to build the project on the command line isn't my goal.

I want a standard make-style build process for this project but can't seem to find any information about doing such a thing. It seems like I can't. Is that true?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T22:08:15.917

You absolutely CAN use a makefile project. It's just a matter of using the correct paths, etc...

Here's something to get you started:

[iOS static lib cross-compile script](https://gist.github.com/j0sh/895945)

# php - 会话没有进行

> ID：15723714
> 
> 赞同：0
> 
> 时间：2013-03-30T21:29:41.857
> 
> 标签：php, session

我有一个 account.php 页面，用户可以在其中更改保存在 mySQL 数据库中的帐户信息。当我单击它的链接时，我收到一条消息，提示“在访问此页面之前返回并登录！” 我的代码如下。

pro.php（登录后定向到的页面）

```
<?php

//STEP 1 Connect To Database
$connect = mysql_connect("Localhost","mlec2013_danny","8764963d");
if (!$connect)
{
die("MySQL could not connect!");
}

$DB = mysql_select_db('mlec2013_database');

if(!$DB)
{
die("MySQL could not select Database!");
}

//STEP 2 Declare Variables

$Name = $_POST['username'];
$Pass = $_POST['password'];
$Query = mysql_query("SELECT * FROM Users WHERE Username='$Name' AND Password='$Pass'");
$NumRows = mysql_num_rows($Query);
$_SESSION['username'] = $Name;
$_SESSION['password'] = $Pass;

//STEP 3 Check to See If User Entered All Of The Information

if(empty($_SESSION['username']) || empty($_SESSION['password']))
{
die("Go back and login before you visit this page!");
}

if($Name && $Pass == "")
{
die("Please enter in a name and password!");
}

if($Name == "")
{
die("Please enter your name!" . "</br>");
}

if($Pass == "")
{
die("Please enter a password!");
echo "</br>";
}

//STEP 4 Check Username And Password With The MySQL Database

if($NumRows != 0)
{
while($Row = mysql_fetch_assoc($Query))
{
$Database_Name = $Row['username'];
$Database_Pass = $Row['password'];
}
}
else
{
die("Incorrect Username or Password!");
}

//end of PHP scripting. Information displayed below is in the form of HTML, CSS, or Javascript.
?> 
```

帐户.php

```
<?php
session_start()
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:30:28.927

也放在页面`session_start()`顶部`pro.php`。

# java - What does "this" refer to exactly in this code?

> ID：15723716
> 
> 赞同：0
> 
> 时间：2013-03-30T21:29:50.500
> 
> 标签：java, linked-list, this

```
public CharList(CharList l) 
{
    // Whatever method your CharList provides to get the 
    // first node in the list goes here
    CharNode pt = l.head(); 

    // create a new head node for *this* list
    CharNode newNode = new CharNode();
    this.head = newNode;

    // Go through old list, copy data, create new nodes 
    // for this list.
    while(pt != null)
    {
        newNode.setCharacter(pt.getCharacter());
        pt = pt.getNext();
        if (pt != null)
        {
            newNode.setNext(new CharNode());
            newNode = newNode.getNext();
        }

    }
} 
```

I thought that this is used to refer to the Object A as in "A.addElement(car);", but in this case I don't know what this refers to... And I don't see the point in doing: this.head = newNode; since this.head is never used again.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T21:32:00.613

`this` refers to the current instance of `CharList`, and `this.head` refers to the instance field `head`. You can discard `this` keyword to access instance fields if there are no local variables with the same name.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T21:31:12.303

The [docs](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html) explain what *this* is:

> Within an instance method or a constructor, this is a reference to the current object — the object whose method or constructor is being called. You can refer to any member of the current object from within an instance method or a constructor by using this.

The keyword `this` refers to the current instance of `CharList`. It is useful for referring to variables that may share the same at class level, otherwise it can be omitted.

Here, no local variable `head` does not appear in the constructor of `CharList`, so can be written as:

```
head = newNode; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T21:34:07.920

> this.head is never used again.

Since `head` is a member variable of the class, the value set in the constructor will be used in other methods of the class.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T21:34:29.627

Possible duplicate of [What is the meaning of "this" in Java?](https://stackoverflow.com/questions/3728062/what-is-the-meaning-of-this-in-java), but anyway:

It's a reference to the specific instance of the object you're working with. So, if I have (going to write this in C#, sorry):

```
public class MyObject
{
    public MyObject(string AString) 
    {
         MyString = AString;
    }

    private string MyString;

    public string WhatsMyStringCalled()
    {
         return this.MyString;
    }
} 
```

If I were to construct an instance of MyObject, I would expect WhatsMyStringCalled to return the MyString property associated with that particular instance.

# javascript - 如何使用jQuery向除每四个元素之外的每个元素添加类？

> ID：15723717
> 
> 赞同：-1
> 
> 时间：2013-03-30T21:29:50.467
> 
> 标签：javascript, jquery

我有一个网站，我将在其中将元素作为瓷砖连续放置 4 个。我想添加到每个元素`margin-left: 13px`中，除了每行中的每个第一个元素。有人可以指出我如何使用 jQuery 来完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T21:32:07.073

就像是：

```
$('element:not(:nth-child(4n))') 
```

演示：http: [//jsfiddle.net/G84B8/](http://jsfiddle.net/G84B8/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T21:33:43.217

工作示例：http: [//jsfiddle.net/ZVd6Y/](http://jsfiddle.net/ZVd6Y/)

假设包装行有一类`row`......

和给定的**HTML：**

```
<div class="row">
    <p class="first">first row</p>
    <p>second row</p>
    <p>third row</p>
</div>

<div class="row">
    <p class="first">first row</p>
    <p>second row</p>
    <p>third row</p>
</div> 
```

你会想使用：

```
$(document).ready(function(){
    $('.row').children("p:not(.first)").addClass("extra-margin");
}); 
```

使用以下**CSS：**

```
.extra-margin{
    margin-left: 13px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T21:37:10.030

试试这个：

```
var count = 0;
    $('.classname').each(function(){
        count++;
        if(count !== 4){
             $(this).css("margin-left", "13px");
        } else {
            count = 0;
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T21:38:08.087

您可以使用[`:not`](http://api.jquery.com/not-selector/)和[`:nth-child()`](http://api.jquery.com/nth-child-selector/)选择器。例子：

```
$('div:not(:nth-child(4n))').css('margin-left', '13px'); 
```

演示：http: [//jsfiddle.net/HsbUv/1/](http://jsfiddle.net/HsbUv/1/)

# php - Proxy to connect to Apple Push Notification Service

> ID：15723724
> 
> 赞同：0
> 
> 时间：2013-03-30T21:30:45.647
> 
> 标签：php, proxy, apple-push-notifications

I am using NetworkRedux shared hosting and following the APNs setup instructions at [http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12) then I get this:

```
Warning: stream_socket_client() [function.stream-socket-client]: unable to
connect to ssl://gateway.sandbox.push.apple.com:2195 (Connection timed out) in
FILEPATH on line 21
Failed to connect: 110 Connection timed out 
```

It looks like they are blocking this, lame. **Is there a may I can use my same script including my private key and everything to connect to a proxy that will connect to Apple?** I am not interested in services that "do push for you" or web APIs or anything. I want a temporary fix that I can build off of and then remove when I migrate this to a real host, that doesn't block those ports.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T16:31:07.043

Actually it is possible, but direct is the best way if possible in your environment. If you have to use an HTTP Proxy, then all you need to do is connect to the proxy, then create an HTTP Tunnel through the proxy to Apple's servers - don't initiate the TLS with Apple until after the proxy connection is create. Here is some good documentation on creating such a HTTP Tunnel with PHP: [http://kakku.wordpress.com/2007/11/25/proxy-hacks-final-httptunnel-tcpip-connections-over-plain-old-get-and-post-requests/](http://kakku.wordpress.com/2007/11/25/proxy-hacks-final-httptunnel-tcpip-connections-over-plain-old-get-and-post-requests/)

# applescript - Applescript for Contacts: how to process only addresses from local contacts and skip addresses from Facebook?

> ID：15723725
> 
> 赞同：0
> 
> 时间：2013-03-30T21:30:46.293
> 
> 标签：applescript, abaddressbook

On the Mac, when using integration with Facebook, Contacts (Address Book) shows Facebook contacts as well as local/iCloud contacts. In the Groups view (Cmd-1) it is possible to view All Contacts, or only iCloud, or only Facebook contacts.

I have created an Applescript script that processes addressed, but it should only process the non-Facebook addresses/contact. How can I determine that a address/contact is a **regular** address/contact, not a **Facebook** address/contact?

I checked all the groups, it does not show group names like "iCloud" or "Facebook", so I can not filter on that.

E.g. I could have "John Doe" stored locally with his work address, and in Contacts it is combined with the Facebook details, so also his home address is shown. When editing I see the Facebook "F" next to his home address. In my script I only want to process (for John) his work address.

Suggestions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:10:21.697

This is not very satisfactory, but it seems to work: Facebook entries appear to only ever be members of a single group, with name "addressbook".

# c - how to attach a child process in gdb?

> ID：15723726
> 
> 赞同：1
> 
> 时间：2013-03-30T21:30:56.550
> 
> 标签：c, multithreading

My program spawns a child thread with execvp to run another program in xterm:

```
char *argv[] = {"xterm",
        "-e",
                "./anotherProgram",
        0
};

execvp("xterm", argv); 
```

I know anotherProgram is running but in gdb, "info thread" doesn't show it. How can I attach the child thread and debug it? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:37:09.990

Maybe it's sufficient for you to just find the process id of the child using `ps aux | grep anotherProgram` and then attach to it using a new gdb instance like this? `gdb ./anotherProgram <pid>`

If not, you could just patch the source code like this and recompile:

```
char *argv[] = {"xterm",
                "-e",
                "gdb",
                "./anotherProgram",
                0
};

execvp("xterm", argv); 
```

I don't know a cleaner way to do this.

# vb.net - 使用 Streamreader 搜索多个结果

> ID：15723729
> 
> 赞同：0
> 
> 时间：2013-03-30T21:31:05.813
> 
> 标签：vb.net

有谁知道允许您使用 StreamReader 通过文本文件搜索字符串的方法，该方法允许您考虑查找结果的多个实例。基本上我正在创建一个预订应用程序，每次客户预订座位时，都会生成他们的 PrimaryKey、FirstName、LastName 以及数据网格上座位的坐标（我已将其用作预订座位的方法）然后保存到一个文本文件。

我希望能够读取 PrimaryKey 的多个实例，然后找到列出此 PrimaryKey 的每一行的座位坐标，并用这些坐标重新填充另一个类似的 datagridview，这些坐标都将由组合框驱动指数变化。

理解起来似乎有点复杂，但如果有人可以提供帮助，请告诉我。

我只需要如何搜索多个实例的知识，所以在它找到字符串一次然后查看文件的其余部分以找到另一个实例后，我可以自己完成其余的工作。

我正在使用 Visual Basic.Net 进行编码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:33:05.457

是的，可以多次搜索文件，但您要么必须重新打开文件，要么倒回流 (FileStream.Seek)。虽然非常低效。如果它必须保持未排序和非结构化文件，请为其构建内存索引。

如果您的键是整数，请`Dictionary<int,int>`在流中创建一个键和位置。然后，当您想找到键 X 时，您`FileStream.Seek`可以移动到它，并读取一行以获取数据。如果您发现自己按 aeroplaneID 进行分组，请构建一个`Dictionary<Int, List<Int,Int>>` 其中键是飞机 ID，列表是文件中主键和位置的列表。

您可以将所有这些都推到后台线程。您可以尝试变得非常聪明，并根据需要建立它们。就个人而言，虽然我会尝试将我的存储移动到更合适的格式。你努力做到这一点并不是因为你错过了一门课，你在努力是因为你不应该这样做。

就像是

```
Dictionary<int, int> _fileIndex = new Dictionary<int,int>();
using(FileStream fs = new FileStream(DataFileName,FileMode.Open,FileAccess.Read))
{
   StreamReader reader = new StreamReader(fs);
   int lastPosition = 0;
   string currentLine = null;
   while(currentLine = reader.ReadLine() != null)
   {
      String[] data = currentLine.Split(new char[] {','});
      int key = int.Parse(data[0]);
      fileIndex.Add(key,lastPosition);
      lastPosition = fs.Position;
   }
} 
```

NB 没有测试上述内容，应该有更多的错误检查。如果行中有很多数据，那么最好不要使用 split 并将所有内容拉到正确的分隔符处。还要小心你保持多少索引，不久之后它们会占用更多的空间，而不是仅仅将整个内容读入内存。

然后你可以创建一个类或结构来实现文件中的一行，并编写一些代码来使用 FileStream.Seek) 到达那里。如果您想加载一堆它们，那么获取文件中每个位置的位置列表然后按顺序对它们进行排序是有意义的，那么您可以按照“顺序”将它们取出来翻阅文件。

# perl - twiki "加载 perl 模块 FindBin 失败。"

> ID：15723734
> 
> 赞同：1
> 
> 时间：2013-03-30T21:31:28.480
> 
> 标签：perl, twiki

我正在尝试让 TWIKI 工作（虚拟服务器 Hosteurope .. PLESK 11 CentOS 6）。当我运行配置脚本时，出现以下错误：

```
 [root@lvpsx.x.x.x bin]# ./configure
Failed to load the perl module FindBin. The module was found at /usr/share/perl5/FindBin.pm

Please ensure that:
   1 FindBin is installed,
   2 that the module is available on the @INC path,
   3 that the webserver user (root) has permission to read the FindBin.pm file.
The detailed error seen was:
Subroutine export_fail redefined at /usr/share/perl5/Carp.pm line 25.
Compilation failed in require at /usr/share/perl5/FindBin.pm line 95.
BEGIN failed--compilation aborted at /usr/share/perl5/FindBin.pm line 95.
Compilation failed in require at (eval 3) line 2.
BEGIN failed--compilation aborted at (eval 3) line 2. 
```

我对 shell 的使用知之甚少，而使用 Perl 的经验则少得多。

我以 root 身份运行配置脚本。据我所知，Apache 也以 root 身份运行（PLESK 11）。 `FindBin.pm`位于命名目录中，我已经尝试将其设置为 777。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:58:41.790

尝试安装 VMS::Filespec，这似乎是 FindBin 试图要求的模块。

在外壳上：

`cpanm VMS::Filespec`

如果这不起作用（命令失败），请先尝试：

`cpan App::cpanminus`

...然后再次尝试第一个命令。

高温高压

弗朗西斯科

# django - How to traverse ForeignKeys in Django AdminSite?

> ID：15723737
> 
> 赞同：0
> 
> 时间：2013-03-30T21:31:43.180
> 
> 标签：django

How do I have the AdminSite show a list of all related_set objects pointing to a specific object.

The code:

```
from django.db import models
from django.contrib.auth.models import User

class Contact(models.Model):
    user = models.ForeignKey(User)
    user_contact = models.ForeignKey(User)

from django.contrib import admin
class UserAdmin(admin.ModelAdmin):
    pass
class ContactAdmin(admin.ModelAdmin):
    pass

admin.site.register(User, UserAdmin)
admin.site.register(Contact, ContactAdmin) 
```

I want the UserAdmin object view to show a list of all Contact objects that points to the specific User object.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:36:27.573

Use [InlineModelAdmin objects](https://docs.djangoproject.com/en/1.5/ref/contrib/admin/#inlinemodeladmin-objects).

# javascript - 使用 jquery 通过 json 对象渲染 javascript

> ID：15723738
> 
> 赞同：0
> 
> 时间：2013-03-30T21:31:58.347
> 
> 标签：javascript, jquery, json, jsonp

我正在开发 Rails 中的公共 api，非常简单。目前，我的标记类中有一个 jsonp 回调，调用时如下所示。

JSON：

```
{
    "tag": 
    {
        "id": 1,
        "tag_code": "<script type=\"text\/javascript\">alert(\"hello world\");      <\/script>"
    }
} 
```

我的目标是将此代码放到远程页面上。

我曾尝试使用 ajax 来做到这一点，但是我知道 jquery 不允许出于安全目的将外部脚本标签加载到页面上。

远程页面上的 JQuery

```
function fetchTagData(id) 
{
    $.ajax(
    {
        url: "http://localhost:3000/tag/" + id + ".js",
        dataType: "jsonp",
        type: "GET",
        processData: false,
        contentType: "application/json",
        success: function(data) 
        {
            var code = data['tag']['tag_code'];
            console.log(code);
            $('#test').append(code);
        }
    });
}; 
```

当我查看控制台时，我看到了 js 的所有荣耀，并出现了警告框。当我查看源代码或检查元素时，js 不在页面上。

有谁知道我如何使用类似或相同的方法让 js 出现在页面上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T03:23:09.787

像这样的json

```
{
   "tag": 
   {
      "id": 1,
      "tag_code": "alert(\"hello world\");"
   }
} 
```

**使用eval**运行代码

 **```
function fetchTagData(id) 
{
$.ajax(
{
    url: "http://localhost:3000/tag/" + id + ".js",
    dataType: "jsonp",
    type: "GET",
    processData: false,
    contentType: "application/json",
    success: function(data) 
    {
        var code = data['tag']['tag_code'];
        console.log(code);
        eval(code);
    }
});
}; 
```**

# css - 我的 jsp 页面没有看到 css 样式

> ID：15723748
> 
> 赞同：0
> 
> 时间：2013-03-30T21:32:40.027
> 
> 标签：css, jsp

我知道谷歌有很多类似的问题，但我找不到对我有帮助的..

当我在我的 JSP 页面中包含一个 css 文件时，它不起作用：

```
<link rel="stylesheet" type="text/css" ../../css/car_rental.css"> 
```

如果我试试这个：

```
<%@ include file="../../css/style.css"%> 
```

它抛出异常

```
/WEB-INF/view/../../css/style.css" file not found 
```

如何摆脱*WEB-INF/view/*前缀？

PS我的jsp页面位于*/WEB-INF/view/*文件夹，我的css文件位于*/css/*文件夹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:42:11.760

看起来您正在通过服务器端包含引用您的样式表。该`<%@ include file="../../css/style.css"%>`标记会将命名文件的内容注入到包含该标记的 JSP 中，就好像它被复制和粘贴一样。您的 JSP 代码不太可能需要修改级联样式表的内容。

尝试用`<%@ include file="../../css/style.css"%>`HTML 标记替换该标记以包含您的样式表。 `<LINK href="/css/style.css" rel="stylesheet" type="text/css">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:53:26.080

`<%@ include file="XYZ" %>`静态包含文件的内容作为编译的 servlet 响应的一部分。因此，即使它成功找到了 CSS 文件，其内容也会被视为普通文本，并会被刷新以作为响应。这意味着您的页面将仅显示 CSS 的内容，并且不会实际出现任何样式

您需要`link`在`head`. 它指示浏览器应用样式。

`include`此外，从错误中可以看出，相对路径在 中不起作用。

利用：

```
<link href="../../css/style.css" rel="stylesheet" type="text/css"> 
```

# segmentation-fault - unordered_map，映射值自动更改，收到信号“SIGSEGV”。描述：分段错误

> ID：15723749
> 
> 赞同：0
> 
> 时间：2013-03-30T21:32:41.040
> 
> 标签：segmentation-fault, unordered-map

我已经坚持了很长时间。我的代码很大，我尽力抽象出有问题的代码。

我正在用 C++ 编程，我使用 unordered_map 来存储几个变量。

```
class INFO
   {int interestingInfo1;
   double interestingInfo2;}
INFO *info;
typedef std::tr1::unordered_map<index,Info*,hashIndex> newMap;

line1:newMap myMap;
line2:myMap[index]=info;
line3:myMap[index]->interestedInfo1; 
```

在我的程序中，每个对象都会被多次访问，在第一轮访问中，unordered_map 运行良好，我可以获取 指向的感兴趣的信息`Info`，但是在第二轮访问同一个对象时，第 3 行代码 intriguers 错误的`Segmentation fault`。

我打印出 myMap 中的元素，包括`index`所指向的interestingInfo 的地址和地址`Info`（或者说，`Info`它本身的值），

```
index1  0x9765ad8 
... 
```

第二次访问，打印出同样的内容：

```
index1 0x98ba128
...... 
```

指针的值`Info`改变了！我猜这个改动会让 line3 崩溃，

我现在很确定我没有对 做任何事情`myMap`，但是为什么指针作为一个元素被改变了呢？

请帮我！非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:12:38.983

我认为您的自定义哈希算法可能是可疑的。我想有些东西会导致它在您访问它的不同时间产生不同的结果（也许您在两者之间更改了一些东西？）这样当您在该键上访问它时它不再产生相同的值 - 或任何值，就此而言，因此分段错误。

# android - BOOT_COMPLETED 意图动作的广播无法正常工作

> ID：15723750
> 
> 赞同：4
> 
> 时间：2013-03-30T21:32:41.247
> 
> 标签：android, broadcastreceiver, action, bootcompleted

我有一个接收器类监听几个动作，但它无法捕捉到`android.intent.action.BOOT_COMPLETED`动作。我做错了什么？这是我的清单文件：

```
<uses-sdk android:minSdkVersion="7" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <!--<receiver android:name=".OtherReceiver">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
    </receiver>-->
    <receiver android:name="com.myApp.AppReceiver" android:permission="android.permission.RECEIVE_BOOT_COMPLETED">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
             <action android:name="android.intent.action.PACKAGE_ADDED"/>
             <action android:name="com.myApp.wifitimer"/>
            <action android:name="android.intent.action.PACKAGE_REPLACED" />
            <data android:scheme="package" android:path="com.myApp" />
    </intent-filter>
    </receiver> 
```

可以看出，我在接收器中再次添加了权限，并且接收器的名称得到了这个[答案](https://stackoverflow.com/a/10080852/1342413)所暗示的类的全名。
这是广播接收器类：

```
@Override
public void onReceive(Context arg0, Intent arg1) {

    String action1 = arg1.getAction();

    if(action1.equals(Intent.ACTION_BOOT_COMPLETED)) {
        Log.d("receiver","action is: boot");
    }
    if(action1.equals("android.intent.action.PACKAGE_REPLACED")) {
        Log.d("receiver","action is: package");
    }
} 
```

当我运行应用程序时，接收器会捕捉到，`android.intent.action.PACKAGE_REPLACED`但是当我重新启动手机时，接收器不会捕捉到`BOOT_COMPLETED`.
但是，当我在 Mainfest 文件中发表评论时，`.OtherReceiver`它*可以*捕捉到它！
这是这个类的代码：

```
public class OtherReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context arg0, Intent arg1) {

    String action = arg1.getAction();

    if(action.equals(Intent.ACTION_BOOT_COMPLETED)) {
        Log.d("new receiver","action is: boot");
    }

}   
} 
```

just the same as the other one. So my question is why I need define a separate receiver for the `BOOT_COMPLETED` action?
**Edit:** I also tried to send the action via **adb** according to [this](https://stackoverflow.com/a/9886091/1342413), and without any permission I could catch it with the *AppReceiver* class:

```
am broadcast -a android.intent.action.BOOT_COMPLETED -c android.intent.category.HOME -n com.blubuk/.AppReciever 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-30T21:41:29.880

First, remove `android:permission="android.permission.RECEIVE_BOOT_COMPLETED"` from your `<receiver>` element.

Second, your `<data>` portion of your `<intent-filter>` is applying **to all `<action>` elements** within that `<intent-filter>`, which you do not want. There is no `Uri` on `ACTION_BOOT_COMPLETED`.

However, rather than creating a separate `<receiver>` element, you could just create a separate `<intent-filter>` element on your original `<receiver>` element. Move your `<action android:name="android.intent.action.BOOT_COMPLETED" />` to the new `<intent-filter>` (and perhaps that `com.myApp.wifitimer` one too), so that they are unaffected by the `<data>` of your first `<intent-filter>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-18T05:50:23.267

Replace your Manifest with this and I am sure it will work. Placing android:permission in the receiver tag was incorrect.

```
 <receiver
        android:name="com.myApp.AppReceiver"
        android:enabled="true"
        android:exported="false">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver> 
```

# ruby-on-rails - 使用回形针上传大文件

> ID：15723754
> 
> 赞同：0
> 
> 时间：2013-03-30T21:33:41.393
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, paperclip

我正在使用 Paperclip 作为我的项目的文件上传器。它是非常棒的 gem，我已将其配置为上传多个文件、转换等。

一切都会非常好，但是我在上传大文件时遇到了问题。当我上传 10 张 5MB 的图片时，Mozilla 崩溃了。我能做些什么来避免它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:20:21.887

您的问题似乎与您的 Mozilla 浏览器有关，而不是与回形针有关。回形针只有在文件在浏览器和您的网络服务器之间完全传输后才会发挥作用。

# c# - .NET 中的快速向量数学 - 有哪些选项？

> ID：15723756
> 
> 赞同：16
> 
> 时间：2013-03-30T21:33:56.920
> 
> 标签：c#, .net, sse, simd, slimdx

我使用 SlimDX 用 C# 编写的 3D 图形软件在 CPU 上执行大量矢量操作。（在这种特定情况下，无法将工作卸载到 GPU）。

我怎样才能让我的向量数学更快？到目前为止，我已经找到了这些方法：

*   在 Mono 而不是 Microsoft .NET 上运行，因为它们支持 SIMD。不是这个项目的选择。
*   [SlimGen](http://code.google.com/p/slimgen/)，一个在运行时注入高性能数学代码的项目。不幸的是，该项目尚未处于可用状态。
*   使用使用 SSE 指令的编译器在 C++ 中编写 DLL。从 C# 与该 DLL 互操作。

有没有其他选项可以在 .NET 中完成更快的矢量数学？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T23:48:19.703

使用 Microsoft Visual C++ 的编译器编写一个 DLL。将标准 C++ 与 SSE 内在函数和/或 OpenMP 用于繁重的数字代码，使用`#pragma unmanaged`. 用于`#pragma managed`定义 C# 可以使用的干净的 C++/CLI API。

C++ 互操作比 p/invoke 快很多。C++/CLI 是处理垃圾回收内存和本机函数假设（内存块不会移动）的唯一优雅方法。

您可能会发现将一些 OpenGL 调用移动到 C++，并直接使用 C++ 分配的内存缓冲区来加载 VBO 等，也会带来很大的性能提升。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-04T15:00:08.387

微软刚刚宣布支持在其[.NET Native 编译器](http://blogs.msdn.com/b/dotnet/archive/2014/04/02/announcing-net-native-preview.aspx)中生成矢量化指令，这要归功于后端 C++ 编译器优化，更重要的是，在其最新版本的 JIT（“RyuJIT”）中对 SIMD 向量类型的原生支持。在此处查看一些[示例](http://code.msdn.microsoft.com/SIMD-Sample-f2c8c35a)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-20T13:36:28.303

.NET 的最新发展包括一个名为 System.Numerics.Vector 的 SIMD 专用向量/矩阵库：

[使用 System.Numerics.Vector 进行图形编程](https://devblogs.microsoft.com/dotnet/using-system-numerics-vector-for-graphics-programming "使用 System.Numerics.Vector 进行图形编程")

这将在新的 JIT 编译器“RyuJIT”成为默认值时启用，公告在这里：

[RyuJIT：.NET 的下一代 JIT 编译器](https://devblogs.microsoft.com/dotnet/ryujit-the-next-generation-jit-compiler-for-net "RyuJIT：.NET 的下一代 JIT 编译器")

所以很快（希望是 2015 年）我们将在 .NET 中拥有非常快速的 SIMD 向量，而无需任何编程开销。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-04T15:22:06.613

如果你想用 C# 编写汇编代码，另一个选择是[NAsmJit](https://github.com/tunnelvisionlabs/nasmjit)项目，它是[AsmJit](https://github.com/kobalicekp/asmjit)到 C# 的一个端口。我没有更新它以反映该项目的最新变化，但大部分支持在最后一次检查时非常有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T23:48:13.337

将 .NET 与本机代码混合。在这种情况下，您将需要一个用于 x86 的版本和另一个用于 x64 的版本。您可以查看[混合（本机和托管）](http://msdn.microsoft.com/en-us/library/x0w2664k.aspx)程序集[MSDN]

# android - 按钮不会使用 Eclipse 更改活动

> ID：15723760
> 
> 赞同：0
> 
> 时间：2013-03-30T21:34:08.143
> 
> 标签：android, android-activity

我一直在开发一个 android 应用程序，最近我在代码中遇到了困难。出于某种原因，当我点击应用程序中应该更改活动的按钮时，它一直说“应用程序已意外停止”并退出。我已经对如何做到这一点进行了大量研究，并尝试了许多代码变体以尝试使其正常工作，但我仍然得到错误。这是我一直在使用的：

```
 semester = (Button) findViewById(R.id.bSemester);
    semester.setOnClickListener(new View.OnClickListener() {
         public void onClick(View arg0) {
         Intent isemester = new Intent(getApplicationContext(),MainActivity.class);
         startActivity(isemester);
           }
        }); 
```

那么这段代码有什么问题吗？此外，是否有一些代码必须放在第二个活动 java 文件（在本例中为 MainActivity）中才能更改？

编辑：我像 Oren 说的那样看着 LogCat，看到它在说

“java.lang.RuntimeException：无法启动活动 ComponentInfo{com.william.android.test/com.william.android.test.MainActivity}：java.lang.NullPointerException”

这是我的测试清单中的内容：

```
<activity
        android:name=".MainActivity" android:label="Semester Grade" >
        <intent-filter>
            <action android:name="com.william.android.test.MainActivity" />
            <catagory android:name="android.intent.catagory.DEFAULT" />
        </intent-filter>
    </activity> 
```

这是我在 OnCreate() 下的内容：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    gradehave = (EditText) findViewById(R.id.etGradeHave);
    gradewant = (EditText) findViewById(R.id.etGradeWant);
    finalworth = (EditText) findViewById(R.id.etFinalWorth);

    needed = (TextView) findViewById(R.id.tvNeeded);
    calc = (Button) findViewById(R.id.bCalc);
    calc.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            gw = Double.parseDouble(gradewant.getText().toString());
            gh = Double.parseDouble(gradehave.getText().toString());
            pf = Double.parseDouble(finalworth.getText().toString());
            pf = (pf/100);
            pg = (1 - pf);
            n = (gw - (pg * gh)) / pf;
            needed.setText(" " + n);

        }

    });
home.setOnClickListener(new View.OnClickListener() {
        public void onClick(View arg0) {
            Intent i = new Intent(MainActivity.this, Welcome_Screen.class);
            startActivity(i);
        }
    });

} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:17:51.877

在您的 oncreate 方法中，您没有定义“家”。如果它是一个按钮，你应该在设置点击监听器之前先findviewbyid它。

# css - Make text fields' positions match buttons' positions + keep controls where they are

> ID：15723761
> 
> 赞同：0
> 
> 时间：2013-03-30T21:34:11.193
> 
> 标签：css, html

**New question:**

On my page [http://goo.gl/](http://goo.gl/) t3Ofk (remove the space in your browser, please don't replace the link here as I don't want google to link this page to my site.) when you resize your browser to something smaller than about 300 pixels width, the controls below Ortseingabe change position in an undesired way. How do I keep *Übersicht* to the left, the slider in the middle and *Detail* on the right(the button may move) regardless of browser size?

```
**Old question:**

On my page http://goo.gl/ t3Ofk (remove the space in your browser, please don't replace the link here as I don't want google to link this page to my site.) when you resize your browser the grey text fields don't match the buttons' positions.

Two questions:

 1\. What do I need to change for the text fields' right borders to stay apart 2 pixels from the buttons' right borders?
 2\. When you resize your browser to something smaller than about 300 pixels width, the controls below Ortseingabe change position in an undesired way. How do I keep *Übersicht* to the left, the slider in the middle and *Detail* on the right(the button may move) regardless of browser size? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:30:03.790

give your input field a width of 100% not 97%. Then wrap that input field and button in a div, give that div a left and right padding of 10px.

```
<div class="block search-bl">           
<h3><i class="pull-right" id="suchen"></i>Was suchen Sie?</h3>
<div style="padding: 0 10px;">            
    <input type="search" name="suchbegriff" id="name">
    <button class="search-button" value="Suche beginnen" name="suche" type="submit" onclick="changeAction('eingabe.php?lat=50.94567147679&amp;lon=6.97363018295688&amp;ortsangabe=Position nicht ermittelbar&amp;radius=14&amp;breite=800')">Suchen                                                                                     
    </button>  
</div>        
<p class="info-help">Hinweis: Drücken Sie die Eingabetaste statt auf Suchen zu klicken.              
</p> 
```

# iphone - 实现一个水平的 UIRefreshControl

> ID：15723770
> 
> 赞同：2
> 
> 时间：2013-03-30T21:35:52.857
> 
> 标签：iphone, ios, uirefreshcontrol

我该如何去实现一个 UIRefreshControl，当从左侧或右侧拉出时它会刷新？

标准的 UIRefreshControl 可以吗？或者是否有任何 API 可以创建这种效果？我一直在寻找很多线索，但我找不到任何东西。

我只能找到关于 SO 的[这个](https://stackoverflow.com/a/13833016/593336)答案，但它是用我不太熟悉的 C# 编写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:10:01.247

您可以使用旋转 90 度的 UITableViewController。

在设置期间添加`[self.view setTransform:CGAffineTransformMakeRotation(-M_PI / 2)];`UITableViewController 类。

使用 UITableView（而不是 UITableViewController）的示例：

```
table_ = [[UITableView alloc] initWithFrame:self.bounds];
[table_ setDelegate:self];
[table_ setDataSource:self];
[table_ registerClass:[UITableViewCell class] forCellReuseIdentifier:@"Cell"];
[table_ setTransform:CGAffineTransformMakeRotation(-M_PI / 2)];

UIRefreshControl *ctrl = [[UIRefreshControl alloc] init];
[ctrl setBackgroundColor:[UIColor yellowColor]];
[table_ addSubview:ctrl];

[self addSubview:table_]; 
```

请务必记住将内容再次向相反方向旋转！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-30T22:07:33.957

对此没有默认的刷新控制。您必须创建自定义刷新控件才能获得此行为。

# mysql - 将 SQL 数据库中的值相加并使用 PHP 在表中显示它们

> ID：15723771
> 
> 赞同：0
> 
> 时间：2013-03-30T21:36:00.343
> 
> 标签：mysql

我有一个名为 member_id 和分数的“结果”表。每个 member_id 将有几行，我想将每个 member_id 的分数加在一起，并将它们输出到一个有两列的表中，成员一个分数。

同时，我需要加入一个名为 Members 的表（它与 Results 共享一个公共字段 member_id），以便提取值“fullname”并在输出数据时将其显示在 Member 列中。

我想我可以在一个 SQL 查询中完成所有工作，然后简单地将其输出到一个表中（我已经可以这样做），但我正在努力编写一个可以正确输出数据的查询。

这是来自结果表的数据示例

*   member_id: 分数:
*   45：5：
*   45：6：
*   26：7：
*   26：2：

并从成员表

*   member_id： 全名：
*   45：鲍勃·琼斯
*   26：约翰史密斯：

以及我如何希望可以从 SQL 查询中返回数据

*   会员： 评分：
*   鲍勃琼斯：11：
*   约翰史密斯：9：

忽略冒号，我只是在这里使用它们来分隔值，以便更容易看到。请记住，Results 表中将有未知数量的用户和未知数量的行需要迭代。

编辑：

这是我现在拥有的

```
$sql = "SELECT Members.fullname 'Name', Results.score 'Score' FROM Members
JOIN Results ON Results.member_id=Members.member_id
GROUP BY Members.member_id, Members.fullname
";
  $result = mysql_query($sql)or die(mysql_error());

  echo "<table>";
  echo "<tr>

  <th>Name</th>
  <th>Score</th>
  </tr>";

  while($row = mysql_fetch_array($result)){
  $names      = $row['Name'];
  $score     = $row['Score'];

  echo "<tr>
    <td style='width: 100px;'>".$names."</td>
    <td style='width: 100px;'>".$score."</td>
    </tr>";

}
echo "</table>";

?> 
```

再次编辑：帖子已更正，问题现已解决。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:40:16.503

这个选择应该可以解决问题：

```
SELECT Members.fullname, SUM(Results.score) FROM Members 
LEFT JOIN Results ON Members.member_id=Results.member_id
GROUP BY Members.member_id, Members.fullname 
```

我使用了 a`LEFT JOIN`这样没有任何结果的成员仍然会出现（总和为 NULL）。使用常规连接会将这些排除在外。

# android - @android 资源 ID

> ID：15723774
> 
> 赞同：2
> 
> 时间：2013-03-30T21:36:19.447
> 
> 标签：android, listview

在 Android 布局文件中，我在 ListView 小部件中看到以下属性：

```
android:id="@android:id/list" 
```

如何`ID`在 Java 程序中使用类似以下的内容访问它（这不起作用）

```
ListView myLV = (ListView) findViewById(R.id.list); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T21:37:01.620

如果您在 xml中添加 了， 则用于`ListView myLV = (ListView) findViewById(android.R.id.list);`获取对 ListView 的引用`ListView``android:id="@android:id/list"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T21:41:57.713

您的问题是您`@android:id/list`在布局中设置了 id，但试图从**您的**项目中`R.id.list`找到`R`资源类

 **所以你有两种方法来解决这个问题：

1.  将布局中的 id 更改为`"@+id/list`
2.  或将代码中的 id 更改为`android.R.id.list`

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-30T21:39:14.137

尝试将第一行更改为以下内容：

```
android:id="@+id/list" 
```**

# c++ - ifstream::tellg differs on MSVC2012 and gcc (mingw) when file has trailing newline

> ID：15723778
> 
> 赞同：1
> 
> 时间：2013-03-30T21:36:56.613
> 
> 标签：c++, iostream

**ANSWER**

Even though everything was compiled and run on windows, I completely forgot `tellg` behaves as an *unformatted* input function and cannot be used reliably in text mode which is why I see the discrepancy. See [std::basic_istream::tellg](http://en.cppreference.com/w/cpp/io/basic_istream/tellg) for details.

**ORIGINAL**

The following extremely simple program is giving me different results with gcc 4.7.1 (mingw) and MSVC2012:

```
#include <iostream>
#include <fstream>
int main()
{
    std::ifstream in("test.txt");
    int i;
    in >> i;
    std::cout << in.tellg() << std::endl;
} 
```

The `test.txt` is as follows (**IMPORTANT NOTE:** There **is** a newline after the `1`)

> 1

MSVC Output:

> 1

gcc 4.7.1 (mingw) Output:

> 2

**Question**

I believe gcc is correct since `operator>>` should extract the newline, but am not certain. Which compiler is correct?

(**Note**: Both programs were compiled and run on windows).

**HEX of text file**

`31 OD OA`

If I create a linux-like line ended file, i.e. `31 0A`, MSVC outputs `0` and gcc outputs `1`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T22:02:38.710

Following my comment, Please refer to this *excellent* post [Why does my program produce different results on Windows and Linux, about file reading with ifstream?](https://stackoverflow.com/questions/9817806/why-does-my-program-produce-different-results-on-windows-and-linux-about-file-r)

# quadtree - 计算四叉树象限数

> ID：15723789
> 
> 赞同：0
> 
> 时间：2013-03-30T21:38:14.720
> 
> 标签：quadtree

我正在使用点四叉树，我需要知道如何计算 在四叉树上插入点后生成**的象限数？**

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:55:10.287

要么在四叉树的插入方法中增加一个计数器，要么在之后通过迭代四叉树来计算它。

# java - How to search a directory of mp3 files and filter results by artists ?

> ID：15723791
> 
> 赞同：1
> 
> 时间：2013-03-30T21:38:39.990
> 
> 标签：java, directory, mp3, metadata

I'm trying to find out how to list the music on my computer by a certain artist. I understand how to list all the music in the directory but I can't find a way to show only the music from one of the artists. Below is the code I'm using to list all the music in the directory.

How do I search the meta data for the artist's name and filter those files? Feel free to comment on the code if that's not a good way to list the files, I'm pretty new to all of this.

Code Fragment:

```
File musicList = new File("C:\\Users\\Music");
String[] fileNames = musicList.list();
String songsResponse = "";

int number = 1;
for(int i = 0; i < fileNames.length; i++)
{
    if(fileNames[i].endsWith(".mp3"))
    {
        songsResponse += (number + ". ") + fileNames[i] + "\n";
        number++;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:59:02.283

You could also try [Java ID3 Tag Library](http://javamusictag.sourceforge.net/index.html), which supports ID3v1, ID3v1.1, Lyrics3v1, Lyrics3v2, ID3v2.2, ID3v2.3, and ID3v2.4 tags as well as reading MP3 Frame Headers:

```
private void printArtistFromMp3() {
    final String DIRECTORY = "C:\\Freek\\Dropbox\\Freek\\Muziek\\Queens of the Stone Age\\2000 - R\\";
    try {
        final MP3File mp3File = new MP3File(DIRECTORY + "01-Feel good hit of the summer.mp3");
        if (mp3File.hasID3v1Tag())
            System.out.println("Artist (ID3v1 tag): " + mp3File.getID3v1Tag().getArtist());
        if (mp3File.hasID3v2Tag())
            System.out.println("Lead artist (ID3v2 tag): " + mp3File.getID3v2Tag().getLeadArtist());
    } catch (IOException e) {
        e.printStackTrace();
    } catch (TagException e) {
        e.printStackTrace();
    }
} 
```

The code above printed "Lead artist (ID3v2 tag): Queens of the Stone Age" on my laptop.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T21:53:12.470

Take a look at [Jaudiotagger](http://www.jthink.net/jaudiotagger/):

> *   Supports MP3 ID3v1,ID3v11, ID3v2.2, v2.3 and v2.4 are transparently

# c# - I am trying to get an unique CPU ID

> ID：15723793
> 
> 赞同：3
> 
> 时间：2013-03-30T21:38:59.643
> 
> 标签：c#, cpu

I am using the code below to get a unique CPU ID, i found various samples on the web using this. However. By chance I happen to own 2 Asus Laptops. One is a quad core i5 the other an heavy duty i7 octocore both are 64 bit machines.. To my big surprise they both produce the same "unique" CPU ID ???.

So this code isnt working for me, are there other methods to get unique CPU ids or do i do something wrong here. What I hope to get is a number that specific for each CPU that is made

```
string cpuID = string.Empty;
ManagementClass mc = new ManagementClass("win32_processor");
ManagementObjectCollection moc = mc.GetInstances();

foreach (ManagementObject mo in moc)
{
 if (cpuID == "")
 {
      //Remark gets only the first CPU ID
      cpuID = mo.Properties["processorID"].Value.ToString();

 }
}
return cpuID; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T04:42:23.187

Maybe the `UUID` property of the `Win32_ComputerSystemProduct` object will suit your needs. It is supposed to be unique per-motherboard, as long as the manufacturer configures it in the first place. It's not too common for the CPU to move around without the motherboard coming along for the ride, anyways.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T23:06:45.447

try

```
ManagementClass managClass = new ManagementClass("win32_processor");
ManagementObjectCollection managCollec = managClass.GetInstances();

foreach (ManagementObject managObj in managCollec)
{
    cpuInfo = managObj.Properties["processorID"].Value.ToString();
    break;
} 
```

working fine here...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T04:32:45.393

Although there is a clear machine instruction to ask CPUID of a CPU, this is not guaranteed to return a unique ID, therefore it is virtually impossible to get a universal unique CPUID no matter which method you use. We examined the low level assembly routines and get the same id for two different AMD cpus.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-15T06:11:36.037

```
 var mbs = new ManagementObjectSearcher("Select ProcessorID From Win32_processor");
    var mbsList = mbs.Get();

    foreach (ManagementObject mo in mbsList)
    {
        cpuid = mo["ProcessorID"].ToString();
        textBox1.Text=cpuid;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T01:22:09.853

I came to the conclusion that this is just not a good method to get unique ID's. So instead of this method, I wrote a much larger piece of code in which I requested much more hardware identifiers of the system to build an unique identifier.

Its way better as this method would even produce different numbers if I would run it on cloned hardware, or if hardware gets changed. There is a lot of WMI info around and I think that's the place where people should look for creating something unique and not use ProcessorID.

# android - Android - 阻止 TalkBack 大声宣布 TextView 标题

> ID：15723797
> 
> 赞同：12
> 
> 时间：2013-03-30T21:39:16.503
> 
> 标签：android, accessibility, textview, talkback

我正在开发一个可访问的 android 应用程序，人们将使用 Explore by Touch 和 TalkBack 辅助功能服务来使用我的应用程序。

这是我的 Android XML 代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout" 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <TextView
        android:id="@+id/forename"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dip"
        android:layout_marginLeft="15dip"
        android:textSize="20sp"
        android:text="@string/forenameText" 
        android:contentDescription="@null"/>

    <EditText
        android:id="@+id/EditTextForename"
        android:layout_width="285dp"
        android:layout_height="65dp"
        android:layout_marginTop="10dip"
        android:layout_marginLeft="15dip"
        android:hint="@string/forenameHint"
        android:inputType="textPersonName"
        android:lines="1"
        android:singleLine="true"
        android:textSize="20sp" >
    </EditText>

</LinearLayout> 
```

字符串.xml

```
<string name="forenameText">Forename</string>
<string name="forenameHint">Enter your forename here</string> 
```

TextView 显示标题“Forename”，EditText 允许我在表单字段中输入一些详细信息。我遇到的问题是，当我使用“触摸浏览”在屏幕上拖动手指时，TalkBack 会拾取 TextView 的标题并将其大声宣布为“Forename”。我希望 TextView 只显示文本而不提供任何声音反馈。

从上面的代码中可以看出，我已将 contentDescription 设置为 @null，但是当我的手指位于 TextView 上方时，TalkBack 仍会宣布“Forename”。

我还尝试在我的 Java 类中设置 contentDescription：

```
TextView forename=(TextView)findViewById(R.id.forename);
forename.setContentDescription(""); 
```

但是，我仍然遇到同样的问题。有没有其他方法可以将 contentDescription 设置为 null/empty 并防止 TalkBack 大声宣布它？

Java代码：

```
public class MainActivity extends Activity{

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        View forename = findViewById(R.id.forename);

        forename.setAccessibilityDelegate(new AccessibilityDelegate() {
          public boolean performAccessibilityAction (View host, int action, Bundle args){
            return true;
          }
        });
    }

} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-06-23T19:58:57.203

Since API 16, Android introduced the following:

```
android:importantForAccessibility="no" 
```

or

```
setImportantForAccessibility(View.IMPORTANT_FOR_ACCESSIBILITY_NO) 
```

Which allows developers to disable talkback all together for certain views.

[http://developer.android.com/reference/android/view/View.html](http://developer.android.com/reference/android/view/View.html)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-09-23T11:48:47.583

For better backwards compatibility:

```
ViewCompat.setImportantForAccessibility(
        decorativeTextView,
        ViewCompat.IMPORTANT_FOR_ACCESSIBILITY_NO); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-05-09T19:50:35.463

I was trying to do the same today, and was able to set an `'empty'` contentDescription on a `TextView` like so (using a non-breaking whitespace):

```
decorativeTextView.setContentDescription("\u00A0"); 
```

now `TalkBack` doesn't say anything for that `TextView`.

but I agree with Nick about leaving the label as readable in your case, because hint is only read for empty `EditTexts`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-07T20:31:13.107

我有一个类似的问题。我最终通过使用`setAccessibilityDelegate`方法和覆盖`View.AccessibilityDelegate's` `performAccessibilityAction`方法解决了它。

试试这个：

```
View forename = findViewById(R.id.forename);

forename.setAccessibilityDelegate(new AccessibilityDelegate() {
  public boolean performAccessibilityAction (View host, int action, Bundle args){
    return true;
  }
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-29T10:25:41.113

为什么您不希望 TextView 说出“名字”？它被用作 EditText 的标签。一旦用户输入了一些文本，将不再说出“在此处输入您的名字”的提示 - 据我所知 - 因此 TextView 为用户提供了一些 EditText 的上下文。

Similarly the announcement of "editbox" gives the user the role of the EditText control. While "form field" might be better it would not be the same behavior as in other apps and in the OS.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T06:00:09.903

我有同样的问题，唯一对我有用的是`android:contentDescription=" "`（空白）。

# java - 在 Java 中寻找 UPDATE SQL 的模式

> ID：15723801
> 
> 赞同：1
> 
> 时间：2013-03-30T21:39:59.987
> 
> 标签：java, jdbc, prepared-statement

我正在寻找以下使用 Java 中准备好的语句更新 SQL 表的最佳编码模式。

SQL 表名是 table1 和 attr1, att2, att3, att4, attr5 and .... in table1。

目前我的伪

```
If (want to update att1 only) {
    PreparedStatement pst = Connection.prepareStatement("UPDATE table1 SET attr1 = ?");
} else if (want to update attr1 & attr2 only) {
    PreparedStatement pst = Connection.prepareStatement("UPDATE table1 SET attr1 = ?, attr2 = ?");
} else if (want to update attr1 & attr2 & attr3) {
    PreparedStatement pst = Connection.prepareStatement("UPDATE table1 SET attr1 = ?, attr2 = ?, attr3 = ?");
}  else if (want to udpate attr1 & attr3) {
   PreparedStatement pst = Connection.prepareStatement("UPDATE table1 SET attr1 = ?, attr3 = ?");
} ......

.... else {
    Bad Request
} 
```

上面的代码会使 WHERE SQL 条件变得更加复杂。我不喜欢这里的 if - else if - else 模式，因为很难维护。

是的，我知道其他选项是动态生成 UPDATE SQL 查询并使用 ORM 解决方案。我相信动态生成 SQL UPDATE Query 逻辑会变得复杂。

请提供最适合此处的任何其他模式或解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:10:33.587

您可以只编写一个更新语句来更新所有非关键字段并每次调用它。

```
public class MyThing {
     private long uniqueID;
     private String attr1;
     private String attr2;
     private String attr3;
     // ++ rest of attriutes, getters and setters  
}

public MyThing getMyThing(long uniqueID) {
    // code to retrieve MyThing from table1, poulating all attributes
}

public void updateMyThing(MyThing myThing) {
    PreparedStatement pst = Connection.prepareStatement
        (" UPDATE table1 SET attr1 = ?, attr2 = ?, attr3 = ?, attr4 = ?, attr5 = ?" +
         " WHERE id = ? );
    pst.SetString(1, myThing.getAttr1());
    pst.SetString(2, myThing.getAttr2());
    pst.SetString(3, myThing.getAttr3());
    pst.SetString(4, myThing.getAttr4());
    pst.SetString(5, myThing.getAttr5());
    pst.SetString(6, myThing.getId());

    // etc.
} 
```

So retrieve a MyThing object from the DB. Update whatever attributes you want then call the update method. All attributes updated whether they have changed or not

# objective-c - 如何将 NSButton 插入 NSTextView？（排队）

> ID：15723803
> 
> 赞同：1
> 
> 时间：2013-03-30T21:40:05.347
> 
> 标签：objective-c, macos, cocoa, button, nstextview

我有一个 NSTextView 和一个自定义 NSButton。我想要做的是将该按钮（60x16 大小）插入到 NSTextView 的末尾。
我怎么能做这样的事情？我一直在尝试搜索如何做到这一点，但我没有得到任何地方。
我应该从哪里开始？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:56:59.513

我相信这个问题和你的很相似：

[NSTextView / NSTextStorage 中的按钮](http://www.cocoabuilder.com/archive/cocoa/148790-buttons-inside-an-nstextview-nstextstorage.html)

**引用问题：**

> *如何让 NSButton 出现在文本中并对点击做出反应？*

请注意，该问题尚未完全解决，但似乎 OP 有一个良好的开端。希望你能从讨论中得到一些线索。

**这是一个答案：**

> NSTextAttachment 保存附件的内容；它是属性字符串中 NSAttachmentCharacter 的 NSAttachmentAttributeName 属性的值。内容通常由 NSFileWrapper 给出，但这不是必需的；您可以使用 nil 文件包装器创建一个空的 NSTextAttachment。
> 
> NSTextAttachmentCell 处理附件的显示和用户交互。默认情况下，一个 NSTextAttachment 将创建一个 NSTextAttachmentCell 来显示自己，这取决于附件的内容；在一般情况下，这只是一个显示图标的图像单元格。
> 
> 然而，如果你愿意，你可以为你的附件提供一个自定义的 NSTextAttachmentCell。它不必是 NSTextAttachmentCell 类的成员；它只需要符合 NSTextAttachmentCell 协议。实际上，即使那样也不是绝对必要的。它只需要实现一些基本的尺寸和绘图方法。大多数细胞已经这样做了。
> 
> 但是，您需要自己处理鼠标事件。您可能想要实现的方法是 wantToTrackMouseForEvent:inRect:ofView:atCharacterIndex: 和 trackMouse:inRect:ofView:atCharacterIndex:。这里的字符索引应该让您确定文本的哪个部分是相关的。

# c++ - Distribution of .o or .a files with headers

> ID：15723809
> 
> 赞同：0
> 
> 时间：2013-03-30T21:41:14.283
> 
> 标签：c++

When using .a files, do I have to distribute the .cpp files with it or just the .h files?

For example, I wrote a large amount of classes and compiled all the code into .o files. I then archived the .o files into .a files.

When I attempt to use the .a files with the .h files in other projects, it requires me to have the .cpp file sometimes.

For some of the headers, it doesn't ask me for the .cpp files but for stuff like sockets it gives undefined references to **impl_shutdown** unless I include the .cpp file.

This happens even though I link all necessary libs.

Why? What are .o/.a files really and why do I need to distribute the .cpp files with it? Libraries like Zlib and LibPng don't seem to have to distribute anything but the .h and the .a files.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:45:28.680

> When using .a files, do I have to distribute the .cpp files with it or just the .h files?

Only the headers.

> What are .o/.a files really

.o files are [object code](http://en.wikipedia.org/wiki/Object_file), .a are archives (collections of object files). They're compiled and assembled machine code, that need to be linked in order an executable file to be created.

> and why do I need to distribute the .cpp files with it?

You don't.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T21:45:14.270

Just the libraries and the headers will be fine.

Make sure that if your objects are over multiple libraries, there are no circular dependencies. If there are, you need to specify the libraries multiple times in order for the linker to pick them up.

# php - php move_uploaded_file 不起作用

> ID：15723810
> 
> 赞同：-5
> 
> 时间：2013-03-30T21:41:14.977
> 
> 标签：php, file

我知道这是一个老问题，我找到了很多关于 SO 的教程，但是它们无法解决我的问题。

我使用我的 Mac 为网络编程设置了一个本地主机，并尝试将一个 jpg 文件上传到我的本地主机目录“/Library/WebServer/Documents”。但它给出了无法移动的提示。

我的前端代码是：

```
<form action="upload_file.php" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file"><br>
<input type="submit" name="submit" value="Submit">
</form> 
```

php(upload_file.php) 代码是（还有一些其他的 php 文件检查代码，从 w3school 复制）：

```
move_uploaded_file($_FILES["file"]["tmp_name"] , "/Library/WebServer/Documents" . $_FILES["file"]["name"]); 
```

在我点击提交按钮后，屏幕上打印了一些错误。

此外，我在文件“/private/var/tmp”中没有找到任何 tmp 文件，其中应该是一个 tmp 文件...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T21:48:14.533

1.  确保您的 php 文件有足够的权限写入目录。
2.  检查是否`print_r($_FILES);`列出任何内容，尤其是大小很重要。

# mysql - Mysql查询以提取最新行而不显示具有相同ID的其他人

> ID：15723811
> 
> 赞同：0
> 
> 时间：2013-03-30T21:41:15.940
> 
> 标签：mysql

我需要一些有关 mysql 查询的帮助。

我有三张桌子：

*   成员（ID、姓名、公司）
*   问题（id，问题）
*   questionanswerxref(id,userid,questionid,answer)

当成员回答预定义的问题时，它被插入到 questionanswerxref 表中。随着情况的变化和时间的推移，他们最终会多次回答相同的问题。我需要运行一个查询，该查询将为我提供每个问题和特定成员的最新答案（我根据登录者添加 memberid）。

到目前为止，我有以下内容，但我已经尝试了它的几个变体如果他们没有回答问题，我也想在没有答案的情况下显示它。

```
SELECT MAX( qq.id ) , coalesce( qq.answer, '' ) AS answer, q.question
FROM `questionanswerxref` qq
LEFT JOIN questions q ON q.id = qq.questionid
WHERE qq.userid = ".mysql_real_escape_string($userid)."
GROUP BY qq.id,q.id
ORDER BY q.id" 
```

另一个版本是..

```
select q.id,q.question, coalesce(qq.answer,'') as answer from questions q
left join questionanswerxref qq on q.id = qq.questionid AND qq.userid = ".mysql_real_escape_string($userid)."
group by q.id,qq.id 
```

我不断收到很多问题。因此，如果他们回答相同的问题 4 次，则会显示每个问题。我只想要他们提交的最后一个答案。

似乎应该很容易，但我很难过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:20:24.750

您的查询的一个问题是您按 questionanswerxref.id 分组，因此实际上根本没有分组，因为 id 可能是该表中的主键。

另一个问题是您选择的字段既不是聚合函数也不是子句中提及的`group by`字段，这会给出不确定的结果或错误，具体取决于 dbms。

假设您想要每个用户和答案具有最高 id 的答案，您可以使用按 userid 和 questionid 分组的子查询来查找最新答案的 id，然后将其加入问题和答案：

```
SELECT q.id, q.question, coalesce(qq.answer,'') as answer
FROM questions AS q
LEFT JOIN 
    (SELECT userid, questionid, MAX(id) AS maxid
     FROM questionanswerxref
     GROUP BY userid, questionid) AS maxids  -- find latest answerid 
ON maxids.questionid = q.id
LEFT JOIN questionanswerxref AS qq           -- then join to answer
on qq.id = maxids.maxid
WHERE qq.userid = :userid
ORDER BY q.id 
```

# html - 网站没有样式 内容

> ID：15723814
> 
> 赞同：0
> 
> 时间：2013-03-30T21:41:35.060
> 
> 标签：html, css, stylesheet, styling

我认为有些东西超出了我的文字样式，但我不太确定它是什么。在我的代码中，我有“#column-right”和“#column-right h1”，它的样式正确。现在我正在尝试设置段落文本的样式。我有“#full_width”和“#full_width p”但是我无法正确设置 p 的样式。我的代码有什么问题导致这个问题？

**更新：**

它应该如下所示：[屏幕截图 1](http://i46.tinypic.com/5yupw7.png)

它看起来像这样：[屏幕截图 2](http://i47.tinypic.com/2s9xix1.png)

*INB4：构建完成后，我会将样式拉出到外部工作表中。*

```
<!DOCTYPE html>
<html>
<head>

<style>

/** -------------------------------MAIN - DON'T EDIT---------------------------------- **/

html {
max-width:56em;
margin:0 auto;
padding:1.25em;
font:100% "Helvetica Neue",sans-serif;
color:#222;
background:#e2e7e8;
}

* {
margin: 0;
padding: 0;
}

.clear { 
clear:both; 
}

/** ---------------------------HEADER COLUMN LEFT------------------------------------- **/

#headermanager {
-webkit-box-shadow:0px 5px 10px #1c1c1c;
-moz-box-shadow:0px 5px 10px #1c1c1c;
box-shadow:0px 5px 10px #1c1c1c;
}

#column-left {
width: 230px;
float: left;
padding-top:20px;
padding-left:20px;
padding-bottom:20px;
background:rgba(255,255,255,0.75);
}

* {
 -webkit-box-sizing: border-box;
 -moz-box-sizing: border-box;
  -ms-box-sizing: border-box;
      box-sizing: border-box;
}

.pic {
 border: 10px solid #fff;  
 float: left;
 height: 180px;
 width: 180px;
 overflow: hidden;

 -webkit-box-shadow: 5px 5px 5px #111;
      box-shadow: 5px 5px 5px #111;  
}

.morphimg {
 -webkit-transition: all 0.5s ease;
 -moz-transition: all 0.5s ease;
   -o-transition: all 0.5s ease;
  -ms-transition: all 0.5s ease;
      transition: all 0.5s ease;
}

.morphimg:hover {
border-radius: 50%;
-webkit-transform: rotate(360deg);
 -moz-transform: rotate(360deg);
   -o-transform: rotate(360deg);
  -ms-transform: rotate(360deg);
      transform: rotate(360deg);          
}

/** -------------------------------HEADER COLUMN CENTER------------------------------- **/

#column-center {
background:rgba(255,255,255,0.75);
width: 316px;
float: left;
padding-top:20px;
padding-left:20px;
padding-bottom:20px;
}

/** ---------------------------------HEADER COLUMN RIGHT------------------------------ **/

#column-right {

text-align:right;
background:rgba(255,255,255,0.75);
width: 310px;
float:right;
padding-top:20px;
padding-right:20px;
padding-bottom:20px;
}

#column-right h1 {

font-size:3em;
font-weight:200;
text-align:right;
width: 310px;
float:right;
}   

#column-right h2 {

font-size:1.3em;
font-weight:100;
text-align:right;
width: 310px;
float:right;
}   

#column-right h3 {

font-size:0.9em;
font-weight:200;
text-align:right;
width: 310px;
float:right;
} 

#progress_bar {
background:rgba(255,255,255,0.75);
width: 310px;
}

/** -----------------------------------SECTION HEADERS-------------------------------- **/

#section_header {
background: #e94939;
padding: 1rem;  
}

#section_header h1 {
font-size: 0.65em;
font-weight: 500;
letter-spacing: 0.35em;
text-transform: uppercase;
color: white;
text-align: center;

/** ---------------------------------------------------------------------------------- **/
/** -------------------------------------TEXT LAYOUTS--------------------------------- **/
/** ---------------------------------------------------------------------------------- **/

/** --------------------------------------ABOUT ME------------------------------------ **/

#full_width{    
padding-left:7.8em;
padding-right:7.8em;
padding-top:2.85em;
padding-bottom:2.85em;
background:rgba(255,255,255,0.75);
}

#full_width p { 
text-align:left;
font-size:0.8em;
font-weight:200;
}

</style>

</head>
<body>

<!--***********************************************************************************-->    
<!--********************************* HEADER STARTS ***********************************-->    
<!--***********************************************************************************-->    

<!----------------------------------COLUMN LEFT STARTS----------------------------------->    
    <div id="column-left">
        <div class="morphimg pic">
            <img src="http://i50.tinypic.com/11r4nwh.png" alt="beach">
        </div>
    </div>

 <!------------------------------- COLUMN CENTER STARTS ---------------------------------->

<div id="column-center">Social Hover</div>

<!----------------------------------COLUMN RIGHT STARTS---------------------------------->  
 <div id="headermanager">
<div id="column-right">
    <h1>John Doe</h1>
        <h2>lipsium ordium consecultar</h2>
            <h3>www.jdoedesign.com<br>
            me@jdoedesign.com<br>
            256-220-8360<br>
            141 Ritter Street Huntsville, AL 35816</h3>
    </div>
       <div class="clear"></div>
 </div>

<div id="section_header">
<h1>Hello World</h1>
</div>

<div id="full_width">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis dui
        lorem, dictum non varius eget, accumsan ut tellus. Mauris sed nunc
        vitae lectus egestas aliquam eu eu libero. Cras tempus euismod
        interdum. Aenean rutrum orci nec mauris venenatis eu blandit est
        eleifend. Cras elit magna, tempus eu luctus quis, dapibus et purus.
        Suspendisse et quam ut est interdum porta. Morbi sed rhoncus risus.
        Pellentesque eu libero justo, at varius purus. Duis faucibus ultrices
        ipsum vitae eleifend. Suspendisse viverra congue dolor faucibus
        feugiat. Etiam pulvinar congue tellus sit amet dapibus. Morbi et
        ultricies diam. Suspendisse id vehicula lacus. Integer quis risus diam,
        a facilisis justo.<br><br>Vestibulum ante ipsum primis in
        faucibus orci luctus et ultrices posuere cubilia Curae; Sed lobortis
        aliquet lorem, at placerat orci fermentum non. Nam ut tortor eu eros
        gravida semper. Cras eget est ante. Sed vehicula justo et urna lacinia
        volutpat. Vestibulum dolor ante, sollicitudin vel ultricies nec, mattis
        non urna. Donec eget lorem ligula, quis ornare odio</p>
</div>

<!--***********************************************************************************-->    
<!--******************************** ABOUT ME STARTS **********************************-->    
<!--***********************************************************************************-->      

<!--***********************************************************************************-->    
<!--***************************** WORK EXPERIENCE STARTS ******************************-->    
<!--***********************************************************************************-->

<!--***********************************************************************************-->    
<!--******************************** EDUCATION STARTS *********************************-->    
<!--***********************************************************************************-->  

<!--***********************************************************************************-->    
<!--***************************** TECHNICAL SKILLS STARTS *****************************-->    
<!--***********************************************************************************-->

<!--***********************************************************************************-->    
<!--********************************** AWARDS STARTS **********************************-->    
<!--***********************************************************************************-->  

<!--***********************************************************************************-->    
<!--********************************** CONTACT STARTS *********************************-->    
<!--***********************************************************************************-->      
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T21:56:15.000

你忘了关门`}`

```
#section_header h1 {
  font-size: 0.65em;
  font-weight: 500;
  letter-spacing: 0.35em;
  text-transform: uppercase;
  color: white;
  text-align: center;
/* } Was not placed */ 
```

看看这个[小提琴](http://jsfiddle.net/xnSTn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T21:59:09.877

Your `#section_header h1` selector is missing its closing bracket.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T21:44:34.597

使用以下选择器进行具体说明：

```
#full_width > p {
 /*myStyles*/
} 
```

这样，您将选择 full_width div 内的所有段落。

# java - IntelliJ IDEA 插件持久化状态 xml 有重复行

> ID：15723824
> 
> 赞同：0
> 
> 时间：2013-03-30T21:42:53.423
> 
> 标签：java, xml, intellij-idea, jdom, intellij-plugin

我有以下组件：

```
@State(
    name = "SessionConfiguration",
    storages = {
        @Storage(id = "default", file = StoragePathMacros.PROJECT_FILE),
        @Storage(id = "dir", file = StoragePathMacros.PROJECT_CONFIG_DIR + "/tabsession.xml", scheme = StorageScheme.DIRECTORY_BASED)
    }
)
public class SessionComponent implements ProjectComponent, PersistentStateComponent<Element> {

...

    @Nullable
    @Override
    public Element getState() {
        LOG.debug("Saving state");

        final Element element = new Element("tabsession");

        // meta configuration information
        final Element stateElement = new Element("state");
        stateElement.setAttribute("version", Integer.toString(STATE_VERSION));
        element.addContent(stateElement);

        // session data
        final Element sessionsElement = new Element("sessions");
        for(SessionState.Session session : sessionState.sessions) {
            final Element sessionElement = new Element("session");
            sessionElement.setAttribute("name", session.name);
            final Element filesElement = new Element("files");
            for(String path : session.files) {
                final Element fileElement = new Element("file");
                fileElement.setAttribute("path", path);
                filesElement.addContent(fileElement);
            }
            filesElement.setAttribute("focusedFile", session.focusedFile);
            sessionElement.addContent(filesElement);
            sessionsElement.addContent(sessionElement);
        }
        element.addContent(sessionsElement);

        return element;
    }

...

} 
```

这工作得很好并生成目标文件`tabsession.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="SessionConfiguration">
    <state version="1" />
    <sessions>
      <session name="first">
        <files focusedFile="$PROJECT_DIR$/src/First.java">
          <file path="$PROJECT_DIR$/src/First.java" />
          <file path="$PROJECT_DIR$/src/Second.java" />
        </files>
      </session>
    </sessions>
  </component>
</project> 
```

但是如果用不同的数据再次保存状态，则不会删除旧行。例如，如果我打开另一个文件并保存状态，则 xml 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="SessionConfiguration">
    <state version="1" />
    <sessions>
      <session name="first">
        <files focusedFile="$PROJECT_DIR$/src/First.java">
          <file path="$PROJECT_DIR$/src/First.java" />
          <file path="$PROJECT_DIR$/src/Second.java" />
          <file path="$PROJECT_DIR$/src/First.java" />
          <file path="$PROJECT_DIR$/src/Second.java" />
          <file path="$PROJECT_DIR$/src/Third.java" />
        </files>
      </session>
    </sessions>
  </component>
</project> 
```

这显然是错误的。有什么想法可以在删除旧行的同时仅保存当前状态吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:06:34.573

我发现问题出在我创建`session.files`数组的代码上。我没有检查重复项。之后，一切都按预期工作。

# python - Python 线程未处理异常

> ID：15723825
> 
> 赞同：7
> 
> 时间：2013-03-30T21:42:55.213
> 
> 标签：python, multithreading, sockets

**问题**

1.  异常的原因是什么？

2.  [客户端](http://pastebin.com/C2PjVWUU)是否导致任何错误？

3.  如果可能，请解释其他错误。

**背景**

我正在创建一个 Python GUI 套接字服务器。当客户端连接到我的服务器时，GUI 窗口将打开（我仍在处理此问题）。但是，当客户端连接时，我收到一个错误：

```
Unhandled exception in thread started by <function clientthread at 0x10246c230> 
```

由于实际脚本相当长，我[提供了一个 pastebin 链接。](http://pastebin.com/5UG6tBCM)

这是线程代码。`s`是我的`socket`对象的名称。

```
def clientthread(s):

    #Sending message to connected client
    #This only takes strings (words
    s.send("Welcome to the server. Type something and hit enter\n")

    #loop so that function does not terminate and the thread does not end
    while True:

        #Receiving from client
        data = s.recv(1024)
        if not data:
            break
        s.sendall(data)
        print data
    s.close() 
```

**追溯**

感谢莫腾的[建议](https://stackoverflow.com/users/700170/morten-jensen)。这是追溯。

```
Socket Created
Socket Bind Complete
Socket now listening
Connected
Traceback (most recent call last):
  File "/Users/BigKids/Desktop/Coding/Python 2/Sockets/Function/Server GUI Alpha Function.py", line 80, in clientthread
    s.send("Welcome to the server. Type something and hit enter\n")
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 170, in _dummy
    raise error(EBADF, 'Bad file descriptor')
error: [Errno 9] Bad file descriptor 
```

就个人而言，我相信许多错误是由于 GUI 造成的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T21:47:30.863

一方面，您可以捕获异常，打印它并查看它是什么:)

这样做，例如通过用 try/except 子句包围它并打印发生的任何异常。

```
def clientthread(s):
    try:
        #Sending message to connected client
        #This only takes strings (words
        s.send("Welcome to the server. Type something and hit enter\n")

        #loop so that function does not terminate and the thread does not end
        while True:

            #Receiving from client
            data = s.recv(1024)
            if not data:
                break
            s.sendall(data)
            print data
        s.close()
    except Exception:
        import traceback
        print traceback.format_exc() 
```

我猜这是客户端断开连接的原因。这将导致异常，您应该适当地处理它。如果客户端可以通过多种方式断开连接。通过告诉您，通过超时，在您尝试发送某些内容时断开连接等。所有这些情况都是合理的异常情况，您应该测试并处理它们。希望这将帮助您继续前进，如果没有，请发表评论:)

# vb.net - VB.NET 搜索客户编号的文本文件并在列表框中显示整个客户记录

> ID：15723831
> 
> 赞同：0
> 
> 时间：2013-03-30T21:43:32.370
> 
> 标签：vb.net

我是 Visual Basic 2010 的新手，我一直在用这个把头撞到墙上。

我有一个接受用户输入并将其保存到以下格式的文本文件的表单：

“客户编号：”00

能源部，约翰

10350 某街

城市，州邮政编码

电话号码

"账户余额：$" 00.00

“最后付款日期：”月/日/年

我有一个文本框，用户根据选中的复选框输入客户编号或姓氏。这样做的目的是通过姓氏或客户编号在文本文件中搜索客户记录。

搜索时，我希望在列表框中显示搜索中使用的姓氏或客户编号的客户。

这是我下面的代码：

```
Private Sub btnSearch_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)   Handles btnSearch.Click
    'Local Variables

    Dim ReadCustomerRecords As StreamReader
    Dim strCustomerNumber As String

    ' Validate Search Criteria
    If chkCustomerNumber.Checked = False And chkLastName.Checked = False Then
        MessageBox.Show("Please select either Customer Number OR Last Name" & vbNewLine   & "to narrow your search.", "Attention")

    End If
    If chkCustomerNumber.Checked And chkLastName.Checked Then
        MessageBox.Show("You may only search by Customer Number OR Last Name." & vbNewLine & "Please revise your search.", "Attention")
    End If

    If chkCustomerNumber.Checked Then
        ReadCustomerRecords = File.OpenText(strCustomerRecordsFile)
        strCustomerNumber = ReadCustomerRecords.ReadLine()
        Do Until strCustomerRecordsFile.Contains(txtSearchFile.Text)

            If strCustomerNumber.Contains(txtSearchFile.Text) Then
                lstCustomerSearch.Items.Add(strCustomerNumber)
                lstCustomerSearch.Items.Add(ReadCustomerRecords.ReadLine())
                lstCustomerSearch.Items.Add(ReadCustomerRecords.ReadLine())
                lstCustomerSearch.Items.Add(ReadCustomerRecords.ReadLine())
                lstCustomerSearch.Items.Add(ReadCustomerRecords.ReadLine())
                lstCustomerSearch.Items.Add(ReadCustomerRecords.ReadLine())
                lstCustomerSearch.Items.Add(ReadCustomerRecords.ReadLine())
            Else
                MessageBox.Show("The customer number you entered is not valid." & vbNewLine & "Please try again or search by Last Name.", "Attention")
            End If
            Return
        Loop
        ReadCustomerRecords.Close()
    End If

    If chkLastName.Checked Then
        ReadCustomerRecords = File.OpenText(strCustomerRecordsFile)
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:35:29.200

这里面的条件：

```
Do Until strCustomerRecordsFile.Contains(txtSearchFile.Text) 
```

可能会导致您的循环无法正确终止，因为这意味着在文件名包含搜索词之前，请执行循环内的代码。由于文件名永远不会更改，因此您的循环可能无法正确终止。

关于搜索文本文件，您可以执行以下操作：

```
If chkCustomerNumber.Checked Then
    Dim custRecords() as String = File.ReadAllLines(strCustomerRecordsFile)
    Dim isRecordFound as Boolean = false

    For i As Integer = 0 To custRecords.Length - 1
         If custRec(i).Contains(txtSearchFile.Text) Then
             isRecordFound = true;

             lstCustomerSearch.Items.Add(custRec(i))
             lstCustomerSearch.Items.Add(custRec(i + 1))
             lstCustomerSearch.Items.Add(custRec(i + 2))
             lstCustomerSearch.Items.Add(custRec(i + 3))
             lstCustomerSearch.Items.Add(custRec(i + 4))
             lstCustomerSearch.Items.Add(custRec(i + 5))
             lstCustomerSearch.Items.Add(custRec(i + 6))

             Exit For
         End If            
    Next

    If Not isRecordFound Then
         MessageBox.Show("The customer number you entered is not valid." & vbNewLine & "Please try again or search by Last Name.", "Attention")
    End If
End If 
```

所以有点不同，但是：

1.  我们使用[`File.ReadAllLines`](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)将文本文件中的所有行读入字符串数组（每个数组元素为一行）。您仍然可以`StreamReader`像现在一样使用，但为简单起见，示例使用`File.ReadAllLines`
2.  一旦我们获得了您文件的内容，我们就可以遍历并找到相关的客户 ID（有关此问题的评论，请参见下文）
3.  Once we have found the customer ID we replicate what you were doing with reading the next lines via the `StreamReader` with looking at the next elements in the array (noting that each array element is a file line)...A defensiveness check for you to implement here would be that we are trying to "look ahead" in the array by a number of elements but if there aren't that many elements left in the array you'll get an exception about the index being out of bounds
4.  We can `Exit For` from the loop after a record has been found because it's a bit pointless to proceed any further

**PS.** For your file format an alternative for you to consider is to have an entire record on one line and delimited (e.g. you could use a "|" or something like that to separate records) instead of on multiple lines.

**PPS.** Be careful with using the `Contains` clause for searching because "02" would also match an address like "1002 Fake Street" instead of an ID you are looking for so you might dredge up false positives. Tweaking your file format should help you get around this.

# backbone.js - Marionette CollectionView 具有一个独特的 ItemView

> ID：15723832
> 
> 赞同：2
> 
> 时间：2013-03-30T21:43:44.470
> 
> 标签：backbone.js, marionette, collectionview

有没有办法可以在 Marionette CollectionView 中创建一个独特的视图？我的意思是这样的：

集合视图

*   StartView（这是唯一的视图）
*   常规项目视图
*   常规项目视图
*   常规项目视图
*   等等

唯一，我的意思是“开始 ItemView”必须使用唯一的模板，并且没有与常规 ItemViews 关联的方法。

我尝试过的事情：

*   仅将开始视图添加到 CollectionView 的 el 是不可取的，因为我的 CollectionView 的方法作用于它的子视图。

*   在 Marionette 文档中，建议针对这种情况覆盖 buildItemView（我认为？）。我不确定如何覆盖它。只是调用 buildItemView 不起作用，因为 StartView 没有关联的模型或任何选项。好像我不能把这些参数排除在外，或者它只是返回未定义。

*   我不能在我的 CollectionView 模板中包含 StartView 的标记，因为... Marionette CollectionViews 不能有模板。

*   从 Marionette 文档来看，这似乎不适合 CompositeView 的用例。但也许我错了。

我可能遗漏了一些相当明显的东西。在此先感谢您的帮助。

编辑：格式化

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T19:43:51.200

创建 2 个不同的视图，“StartView”和“NormalView”：

```
StartView = Marionette.ItemView.extend({
    template:"#start-template'
});
NormalView = Marionette.ItemView.extend({
    template:"#normal-template"
}); 
```

In your collection view, override getItemView and return your 'StartView' and 'NormalView'... something like this:

```
MyCollectionView = Marionette.CollectionView.extend({
   getItemView:function(item){
       if(item.get("ImTheFirst")===true)
          return StartView;
        else
          return NormalView;
    }
}); 
```

On the first item in your collection, add a property 'ImTheFirst' (for example) and set it to true.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T19:19:51.903

What you are looking for here is a [`CompositeView`](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.compositeview.md). A `CompositeView` is a mash-up between an `ItemView` and a `CollectionView`. Essentially, the `CompositeView` itself would act as your `StartView`, and then you define an ItemView to act as your "Regular ItemView"'s.
Something like this:

```
RegularItemView = Backbone.Marionette.ItemView.extend({
  template: "#regular-itemview-template"
});

CompositeView = Backbone.Marionette.CompositeView.extend({
  itemView: RegularItemView,
  template: "#start-template"
}); 
```

# java - 自定义 AbstractTableModel 未正确显示数据

> ID：15723834
> 
> 赞同：0
> 
> 时间：2013-03-30T21:44:30.110
> 
> 标签：java, swing, jtable, abstracttablemodel

我想根据我使用 AbstractTableModel 指定的列从数据库中的表中提取数据。表中有 8 列，但只想显示 8 列中的 3 列。

例如：

数据库有这些列：ID、First_Name、Last_Name、....、Phone_Number。如果我指定要在表中显示 First_Name、Last_Name、Phone_Number，它会显示 ID、First_Name 和 Last_Name。我想我应该从数据库中指定列名的索引以显示正确的列，但不知道如何在我的自定义 AbstractTableModel 类中实现它。

```
public class PhysicianModelController extends AbstractTableModel 
{
    PhysicianBroker pb = PhysicianBroker.getPhysicianBroker();

private String[] columnNames =  {"First Name", "Last Name", "Phone Number"};

private ArrayList<Physician> ph = pb.getAllPhysicians();

@Override
public int getRowCount() {
    return ph.size();
}

@Override
public int getColumnCount() {
    return columnNames.length;
}

@Override
public String getColumnName(int col)
{
    System.out.println(col);
    return columnNames[col];
}   

@Override
public String getValueAt(int rowIndex, int columnIndex) {  
    System.out.println(rowIndex + " : " + columnIndex);
    Physician p = ph.get(rowIndex);
    switch (columnIndex)
    {
        case 0:
            return Integer.toString(p.getEmployeeId());                
        case 1:
            return p.getFirstName();
        case 2:
            return p.getLastName();
        case 3:
            return p.getBirthDate();
        case 4:
            return p.getStartDate();
        case 5:
            return p.getEndDate();
        case 6:
            return p.getAddress();
        case 7:
            return p.getPhoneNumber();
        default:
            return "Incorrect input";                          
    }
}

public void addRow(Physician p) 
{
    ph.add(p);
    int row = ph.size();
    fireTableRowsInserted(row,row);
    fireTableDataChanged();
}

@Override
public Class getColumnClass(int c)
{
    return getValueAt(0,c).getClass();
} 
```

}

我已经用我的实现覆盖了 getRowCount()、getColumnCount()、getColumnName()、getValueAt() 和 getColumnClass() 方法。一旦我提供了数据库表中的所有列，一切都会正常工作。

有人会好心帮助我如何做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:05:09.547

注意你的`getValueAt`方法。您只有三列。所以你应该根据那个返回值。发生了什么，对于第 0 列，您正在获取员工 ID，而您想要 Firstname..So on...

```
@Override
public String getValueAt(int rowIndex, int columnIndex) {  
    System.out.println(rowIndex + " : " + columnIndex);
    Physician p = ph.get(rowIndex);
    switch (columnIndex)
    {

        case 0:
            return p.getFirstName();
        case 1:
            return p.getLastName();
        case 2:
            return p.getPhoneNumber();
        default:
            return "Incorrect input";                          
    }
} 
```

**更新**
这是一个在 JTable 中添加一行的代码演示。看看它：

```
import javax.swing.*;
import javax.swing.border.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.table.*;
import java.util.*;
class Person
{
    String name;
    String roll;
    String subject;
    public Person(String name,String roll,String subject)
    {
        this.name = name;
        this.roll = roll;
        this.subject = subject;
    }
    public String getName()
    {
        return name;
    }
    public String getRoll()
    {
        return roll;
    }
    public String getSubject()
    {
        return subject;
    }
    public void setName(String name)
    {
        this.name = name;
    }
    public void setRoll(String roll)
    {
        this.roll = roll;
    }
    public void setSubject(String subject)
    {
        this.subject = subject;
    }
}
class TableRowAdd extends JFrame  
{
    private JTable table;
    private JScrollPane jsPane;
    private MyModel myModel;
    private JPanel dialogPanel;
    private JTextField tf[];
    private JLabel     lbl[];
    private JButton    button;
    JDialog dialog;
    public void prepareAndShowGUI()
    {
        myModel = new MyModel();
        table = new JTable(myModel);
        jsPane = new JScrollPane(table);
        button = new JButton("Add");
        button.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent evt)
            {
                dialog.setVisible(true);
            }
        });
        getContentPane().add(button,BorderLayout.SOUTH);
        getContentPane().add(jsPane);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        prepareDialogPanel();
        pack();
        setVisible(true);

    }
    private void prepareDialogPanel()
    {
        dialogPanel = new JPanel();
        int col = table.getColumnCount();
        dialogPanel.setLayout(new GridLayout(col,2));
        tf = new JTextField[col];
        lbl = new JLabel[col];
        for (int i = 0; i < col; i++)
        {
            lbl[i] = new JLabel(table.getColumnName(i));
            tf[i] = new JTextField(10);
            dialogPanel.add(lbl[i]);
            dialogPanel.add(tf[i]);
        }
        dialog = new JDialog(this,"Enter details",true);
        dialog.getContentPane().add(dialogPanel);
        JButton okButton = new JButton("OK");
        dialog.getContentPane().add(okButton,BorderLayout.SOUTH);
        okButton.addActionListener( new ActionListener()
        {
            public void actionPerformed(ActionEvent evt)
            {
                dialog.dispose();
                myModel.addRow(new Person(tf[0].getText(),tf[1].getText(),tf[2].getText()));
            }
        });
        dialog.pack();
    }
    private class MyModel extends AbstractTableModel 
    {
        String[] columns = {
                            "Roll No.",
                            "Name",
                            "Subject"
                            };
        ArrayList<Person> inData = new ArrayList<Person>()
                            {
                                {
                                    add(new Person("1","Anthony Hopkins","CS01"));
                                    add(new Person("2","James William","CS02"));
                                    add(new Person("3","Mc. Donald","CS03"));
                                }
                            };
        @Override
        public void setValueAt(Object value, int row, int col)
        {
            Person person = inData.get(row);
            switch(col)
            {
                case 0: 
                    person.setRoll((String)value);
                    break;
                case 1:
                    person.setName((String)value);
                    break;
                case 2:
                    person.setSubject((String)value);
                    break;
                default:
                    System.out.println("Invalid col");

            }
            fireTableCellUpdated(row,col);
        }
        @Override
        public Object getValueAt(int row, int col)
        {
            Person person = inData.get(row);
            switch(col)
            {
                case 0: 
                    return person.getRoll();
                case 1:
                    return person.getName();
                case 2:
                    return person.getSubject();
                default:
                    return null;
            }
        }
        @Override
        public int getColumnCount()
        {
            return columns.length;
        }
        @Override 
        public int getRowCount()
        {
            return inData.size();
        }
        @Override
        public String getColumnName(int col)
        {
            return columns[col];
        }
        @Override
        public boolean isCellEditable(int row ,int col)
        {
            return true;
        }
        //This method adds a row to the table
        public void addRow(Person person)
        {
            inData.add(person);
            fireTableRowsInserted(inData.size() - 1 ,inData.size() - 1);
        }
    }
    public static void main(String st[])
    {
        SwingUtilities.invokeLater( new Runnable()
        {
            @Override
            public void run()
            {
                TableRowAdd td = new TableRowAdd();
                td.prepareAndShowGUI();
            }
        });
    }
} 
```

# java - 弹跳球的度数计算

> ID：15723836
> 
> 赞同：3
> 
> 时间：2013-03-30T21:44:32.977
> 
> 标签：java, android

我正在做一个简单的突破游戏，我有一些问题如何计算球击中顶部边界时的角度。当球以 180 度角向上移动时，它会以 0 度角向下弹回。但是当球以 170 度的角度向上移动时，它应该以镜像的角度向下弹回，例如 10 度。我可以像`180-170 = 10`度数一样计算这个，但是如果球以 190 度的角度向上移动怎么办！？那么它应该以350度的角度向下弹回，但我不知道如何计算！？

有没有一种简单的方法来计算或反映球的向上移动角度的值？Preciate一些帮助，因为我的数学不好！谢谢！

编辑：我正在像这样移动球：

```
xPos += speed * Math.sin(Math.toRadians(direction));
yPos += speed * Math.cos(Math.toRadians(direction)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T22:29:11.337

要回答有关角度和反射的问题：

1.  决定您的角度测量系统。你告诉过一个向上移动的球的角度为`180°`，所以我猜`0°`它是向下的，并且角度在逆时针方向增加（`90°`指向右侧等）。保持一致很重要。让`d`是该系统中球运动的角度。

2.  定义边界法线向量的角度。如果顶部的边界是水平的，它的法向量垂直于它并且有一个角度`0°`（在点 1 中定义的测量系统中）。让我们`n`成为那个角度。垂直边框将具有`n = 90°`.

3.  球的出射角`o`由下式给出：

    `o = 2*n - d - 180°`

    请注意，您可能必须规范化这个角度，即添加/减去`360°`o 直到`0° <= o < 360°`。

你的例子`d = 190°, n = 0°`：

```
o = 2*0° - 190° - 180° = -370° 
```

正如预期的那样，这将导致`o = 350°`标准化后的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T11:02:57.767

这简单。当球在水平表面反弹时，只需改变其垂直速度的符号。并且当它撞到垂直墙壁时，垂直速度会发生变化。我希望你有速度和坐标作为 2D 向量（一对水平和垂直分量），比如 x,y 作为球坐标，vX, vY 作为球速。

也许这是一个好主意，当球击中砖块时，将它向后移动一步，就在击球之前，然后进行速度分量符号反转。

# c - Segmentation fault after using MPI_Finalize()

> ID：15723840
> 
> 赞同：3
> 
> 时间：2013-03-30T21:45:01.947
> 
> 标签：c, mpi

I am programming in c using openMPI. My code is posted below. What happens is that I receive a segmentation fault error whenever I run this program. I believe that I have isolated the problem by using these printf statements. The segmentation seems to happen after the MPI_Finalize(). Any help is greatly appreciated.

The error I receive is:

```
[linuxscc003:10019] *** Process received signal ***
[linuxscc003:10019] Signal: Segmentation fault (11)
[linuxscc003:10019] Signal code: Address not mapped (1) 
```

and my code:

```
#include <stdio.h>
#include <stdlib.h>
#include <mpi.h> 

int main(int argc, char** argv) 
{
    int i = 0; //index
    int comm_sz, my_rank;
    int part_sum = 0;
    //size of the array is hard-coded in, 

    MPI_Init(NULL,NULL);
    MPI_Comm_size(MPI_COMM_WORLD, &comm_sz);
    MPI_Comm_rank(MPI_COMM_WORLD, &my_rank);

    if(my_rank == 0)
    {
        int* array;
        //generate the array of n elements
        printf("There are %d array elements\n", comm_sz);
        array = (int*)malloc(sizeof(int*)*comm_sz);
        for(i = 0; i < comm_sz; i++)
        {
            //we don't want to count zero in here
            //nobody likes zero
            array[i] = (i+1); 
        }
        for(i = 1; i < comm_sz; i++)
        {
            MPI_Send(&array[i], sizeof(int*), MPI_INT, i, 0, MPI_COMM_WORLD);
        }   
        //part_sum = 1;
        free(array);
        printf("freed array!\n");
    }

    if(my_rank != 0)
    {
        MPI_Recv(&part_sum, sizeof(int*), MPI_INT, 0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);
        printf("proc %d out of %d, I have received %d!\n", my_rank, comm_sz, part_sum);

    }

    printf("proc %d signing off!\n",my_rank);
    MPI_Finalize();
    printf("proc %d signed off!\n",my_rank);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T22:02:47.117

In this line:

```
array = (int*)malloc(sizeof(int*)*comm_sz); 
```

`sizeof(int*)` should be `sizeof(int)`.

In this line:

```
MPI_Send(&array[i], sizeof(int*), MPI_INT, i, 0, MPI_COMM_WORLD); 
```

`sizeof(int*)` should be 1\. You are specifying how many `MPI_INT`s you are sending (not how many bytes). `sizeof(int)` is likely 4 or 8, so you are overreading your buffer.

In this line:

```
MPI_Recv(&part_sum, sizeof(int*), MPI_INT, 0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE); 
```

`sizeof(int*)` should be 1, same thing.

The segfault may be happening before `MPI_Finalize()` on some process and you believe it happens after because other processes have completed its `MPI_Finalize()`. Or it's possible that because you have overwritten `part_sum` on the stack the corrupted stack doesn't cause a problem until `MPI_Finalize()` is called.

# c++ - 为什么这段代码会给出错误，“模板专业化需要'模板<>'”？

> ID：15723850
> 
> 赞同：11
> 
> 时间：2013-03-30T21:46:45.693
> 
> 标签：c++, templates, clang, template-specialization, crtp

当我尝试用 Clang 编译它时

```
template<class T>
struct Field
{
    char const *name;
    Field(char const *name) : name(name) { }
};

template<class Derived>
class CRTP { static Field<Derived> const _field; };

class Class : public CRTP<Class> { };
Field<Class>   const CRTP<Class>::_field("blah");

int main() { } 
```

我明白了

```
error: template specialization requires 'template<>'
Field<Class>   const CRTP<Class>::_field("blah");
                     ~~~~~~~~~~~  ^ 
```

我根本不明白这个错误。我的定义有什么问题，我`_field`该如何解决？

（请注意，`_field`所有子类的参数不一定相同。）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-30T21:55:10.147

为了让编译器将此识别为模板特化（例如，能够检查语法），您需要以下`template`关键字：

```
template<>
Field<Class> const CRTP<Class>::_field("blah"); 
```

它的括号是空的，因为所有模板参数都是专用的，但你不能就这样离开它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T21:58:01.027

该错误准确地说明了缺少的内容。 `template<>`在该行之前丢失。

```
template<>
Field<Class> const CRTP<Class>::_field("blah"); 
```

但是请注意，`Field<Class>`如果您键入的 是唯一的，则可用于构造`Field<Class>`具有给定字符串的所有实例。

```
template<typename T>
struct field_trait;

template<class T>
struct Field
{
    char const *name;
    Field() : name(field_trait<T>::get_name()) {}
};

template<class Derived>
class CRTP { static Field<Derived> const _field; };
template<class Derived>
class CRTP<Derived>::_field;

class Class;

template<>
struct field_traits<Class> {
  static const char* get_name() { return "blah"; }
};

class Class : public CRTP<Class> { };

int main() { } 
```

这意味着 的每个实例都`Field<Class>`始终具有名称`"blah"`。

我会问的一个问题是，你真的需要存储来表示`Field<Class>`实际上有一个指向字符串的指针吗？如果需要，它是否需要是唯一的，如果需要，它是否需要“裸露”？因为找出`static`实例存在的位置有点烦人。

连同`field_traits`上面：

```
template<class Derived>
class CRTP { static Field<Derived>& field() const { static Field<Derived> _field( field_traits<Derived>::get_name()); return _field; }; 
```

这将“存储在哪里`_field`”的问题变成了编译器的问题。它由 的内容初始化`field_traits<T>::get_name()`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-30T21:58:12.743

A static data member must have both a declaration and a definition. If this was a plain class it would look like this:

```
// header:
class C {
    static int i;
};

// source:
int C::i = 3; 
```

Templates aren't ordinarily defined in source files, so the code would look something like this:

```
// header:
template <class T>
class C {
    static int i;
};

template <class T>
int C<T>::i = 3; 
```

In your code, you don't have the definition of the static data member. That's okay if you don't use it. But the code that the compiler is complaining about defines a static data member for `CRTP<Class>`; that's a specialization (because it's not applicable to all instantiations of `CRTP`, just to this one), and the compiler is saying that you have to tell it that it's a specialization. So do as you're told:

```
template <>
Field<Class> const CRTP<Class>::_field("blah"); 
```

or, to write the non-specialized template version, use the usual template syntax:

```
template <class T>
Field<T> const CRTP<T>::_field("blah"); 
```

# sesame - Why is Sesame limited to, lets say, 150m triples?

> ID：15723851
> 
> 赞同：3
> 
> 时间：2013-03-30T21:46:45.967
> 
> 标签：sesame

I wouldn't exactly say it is limited but as long as I can see the recommendations given are of the sort of "If you need to go beyond that you can change the backend store... ". Why? Why is Sesame not as efficient as lets say OWLIM or Allegrgraph when goes beyond 150-200m triples. What optimizations are implemented in order to go that big? Are the underlying data structures different?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-26T16:57:44.440

Answered here by @Jeen Broekstra: [http://answers.semanticweb.com/questions/21881/why-is-sesame-limited-to-lets-say-150m-triples](https://web.archive.org/web/20130830045209/http://answers.semanticweb.com/questions/21881/why-is-sesame-limited-to-lets-say-150m-triples)

> 1.  the actual values that make up an RDF statements (that is, the subjects, predicates, and objects) are indexed in a relatively simple hash, mapping integer ids to actual data values. This index does a lot of in-memory caching to speed up lookups but as the size of the store increases, the probability (during insertion or lookup) that a value is not present in the cache and needs to be retrieved from disk increases, and in addition the on-disk lookup itself becomes more expensive as the size of the hash increases.
> 2.  data retrieval in the native store has been balanced to make optimal use of the file system page size, for maximizing retrieval speed of B-tree nodes. This optimization relies on consecutive lookups reusing the same data block so that the OS-level page cache can be reused. This heuristic start failing more often as transaction sizes (and therefore B-trees) grow, however.
> 3.  as B-trees grow in size, the chances of large cascading splits increase.

# ruby-on-rails - 使用 Rspec 测试“关联”的正确方法？

> ID：15723856
> 
> 赞同：48
> 
> 时间：2013-03-30T21:47:32.937
> 
> 标签：ruby-on-rails, rspec, associations

我正在尝试测试以下场景：

-> 我有一个名为 Team 的模型，当它由用户创建时才有意义。因此，每个 Team 实例都必须与一个 User 相关联。

为了测试这一点，我做了以下事情：

```
describe Team do

...

  it "should be associated with a user" do
    no_user_team = Team.new(:user => nil)
    no_user_team.should_not be_valid
  end

...

end 
```

这迫使我将团队模型更改为：

```
class Team < ActiveRecord::Base
  # Setup accessible (or protected) attributes for your model
  attr_accessible :name, :user

  validates_presence_of :name
  validates_presence_of :user

  belongs_to :user
end 
```

这对你来说是否正确？我只是担心将 :user 属性设置为可访问（批量分配）。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-30T21:52:35.373

我通常使用这种方法：

```
describe User do
  it "should have many teams" do
    t = User.reflect_on_association(:teams)
    expect(t.macro).to eq(:has_many)
  end
end 
```

更好的解决方案是使用 gem [shoulda](https://github.com/thoughtbot/shoulda)，它可以让您简单地：

```
describe Team do
  it { should belong_to(:user) }
end 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-04-30T14:56:59.760

```
 it { Idea.reflect_on_association(:person).macro.should  eq(:belongs_to) }
  it { Idea.reflect_on_association(:company).macro.should eq(:belongs_to) }
  it { Idea.reflect_on_association(:votes).macro.should   eq(:has_many) } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-16T22:08:59.120

```
class MicroProxy < ActiveRecord::Base
    has_many :servers
end

describe MicroProxy, type: :model do
    it { expect(described_class.reflect_on_association(:servers).macro).to eq(:has_many) }
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-25T12:27:22.247

RSpec is a ruby test framework, and not a rails framework. belongs_to is a rails construct, and not a ruby construct. Gems like [shoulda-matchers](https://github.com/thoughtbot/shoulda-matchers) connect ruby and rails things and help you write good tests.

Having the above in mind and following official documentation, should help you stay up to date and understand what you are writing.

So, below is what I would write.

User model:

```
RSpec.describe User, type: :model do
  context 'associations' do
    it { should have_many(:teams).class_name('Team') }
  end
end 
```

Team model:

```
RSpec.describe Team, type: :model do
  context 'associations' do
    it { should belong_to(:user).class_name('User') }
  end
end 
```

# html - Excel 文件下载而不是在 iframe 中显示

> ID：15723859
> 
> 赞同：0
> 
> 时间：2013-03-30T21:47:52.923
> 
> 标签：html, excel, asp.net-mvc-4

我的控制器类中有这个：

```
 public ActionResult ExcelDoc()
    {
        var doc = Server.MapPath("~/Content/Sheet1.xlsx");
        return File(doc, "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
    } 
```

在我看来：

```
<iframe src="/Centres/ExcelDoc"></iframe> 
```

它根本不会在 iframe 中显示文件。相反，它开始将 sheet1.xlsx 下载为 ExcelDoc.xlsx。非常令人沮丧，因为之前的问题帮助我开发了这个解决方案来解决我之前尝试在 iframe 中显示动态生成的 excel 文件的问题。我正在使用谷歌浏览器，如果相关的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:49:16.030

返回文件会使您的浏览器尝试下载它，这是预期的行为。我认为不可能在浏览器窗口中按原样显示 excel 文件，除非您使用插件之类的东西。

# ios - 防止 UIActionSheet 在 ipad 上关闭

> ID：15723864
> 
> 赞同：0
> 
> 时间：2013-03-30T21:48:35.573
> 
> 标签：ios, ipad, uiactionsheet

我有一个使用 UIActionSheet 的通用应用程序。选择是强制性的，这在 iphone 上运行良好，但在 iPad 上显示为弹出框，因此在它之外点击会关闭它，这是我不想允许的。

我知道我可以使用 UIPopoverController 的委托方法，但我认为我无法访问 UIActionSheet 的弹出框控制器来设置委托等...

有谁知道我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:43:12.627

可以使用未记录的 API，请参阅在 iPad 上为[UIActionSheet 访问 UIPopoverController 以](https://stackoverflow.com/questions/2806988/accessing-uipopovercontroller-for-uiactionsheet-on-ipad)了解更改哪个是.`passthroughViews``UIPopoverView``UIActionSheet`

另一种解决方案是覆盖`[UIApplication sendEvent:]`和过滤来自操作表之外的触摸。

我建议您使用不同的小部件进行模态选择。用户不希望`UIActionSheet`是模态的，所以这只会让他们感到困惑。

# dynamics-crm-2011 - CRM 2011：如何覆盖错误窗口 - 可能性

> ID：15723866
> 
> 赞同：1
> 
> 时间：2013-03-30T21:48:46.917
> 
> 标签：dynamics-crm-2011

我想在 CRM 错误处理期间覆盖一些行为（特别是错误窗口）。可能吗？有人能指出我正确的方向吗？

是否可以在 - js、工作流、插件之前和之后调用事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:20:05.450

您始终可以处理您编写的代码的错误，这样做是一种很好的做法，因为用户通常不知道如何处理本机错误处理程序或它们的含义。将您自己的 try/catch 块添加到代码中，然后将这些错误写入日志文件、日志实体、电子邮件支持等。即使使用 JS，您也可以添加自己的 try/catch 块并根据需要处理它们。

如果您希望修改本机 MSCRM 错误的错误处理，则需要您打开源代码并修改 JS/HTML 文件等。这样做可能会导致升级、热修复、处理 MS 支持和为什么这是一个坏主意的一大堆其他原因。

# php - 限制对php网站上单个用户的访问

> ID：15723868
> 
> 赞同：0
> 
> 时间：2013-03-30T21:48:59.257
> 
> 标签：php, jquery, ajax

更新----我找到了一个简单的解决方案，适用于我的情况。我将使用文件存在语句来检查 lock.txt 是否存在。每次有人在我的服务器上请求页面时，都会重新创建 Lock.txt。lock.txt 将由以下 php 脚本检查：

```
<?php

$file = "lock.txt";

    $filelastmodified = filemtime($file);

    if((time() - $filelastmodified) > 30)
    {
       unlink($file);
    }

?> 
```

此脚本将由等待使用该应用程序的用户启动....所以一旦 lock.txt 被删除（自上次修改后 30 秒），他们将被允许登录...不是一个完美的解决方案，但应该限制同时连接......

* * *

过去两天我一直在寻找一个简单的解决方案来解决我的问题。

我已经设置了一个由 PHP 5 和 Windows IIS 7 驱动的家庭 Web 服务器。我正在尝试设置一个 PHP 网页，在任何给定时间只能由一个用户访问。单个用户将通过串行 COM1 接口访问控制器。如果一个以上的用户可以访问控制器，则会出现不希望的效果。我尝试使用 PHP 会话锁定网页，但如果用户未正确注销，会话仍将处于活动状态。我也尝试在 AJAX 中使用模糊功能来检测浏览器是否关闭，但它并非在所有情况下都有效。

理想情况下，最好设置一个等待排队系统，让某人可以在给定的设定时间内使用控制器，并在时间到期时将其注销，但这需要更多的努力。我只需要一些简单的东西，一次只允许一个用户访问，并拒绝任何其他请求，直到它再次打开。有什么建议么？提前致谢！

# c++ - 在 Emacs 中保存-编译-执行 C++ 程序的单一快捷方式？

> ID：15723871
> 
> 赞同：2
> 
> 时间：2013-03-30T21:49:47.277
> 
> 标签：c++, windows, emacs, g++, user-input

我一直在尝试找出一种方法来有效地保存程序，编译它然后在 emacs 中运行它。我只成功了一部分。

我使用 smart-compile.el 来简化工作（[http://emacswiki.org/emacs/smart-compile.el](http://emacswiki.org/emacs/smart-compile.el)）。我已经将 C++ 相关部分编辑到下面，以便在我键入`M-x smart-compile RET`后跟一个`RET`.

```
(defcustom smart-compile-alist '(
  ;; g++-3 is used instead of g++ as the latter does not
  ;; work in Windows. Also '&& %n' is added to run the
  ;; compiled object if the compilation is successful
  ("\\.[Cc]+[Pp]*\\'" . "g++-3 -O2 -Wall -pedantic -Werror 
  -Wreturn-type %f -lm -o %n && %n")
  .. 
```

举个例子，对于一个程序 sqrt.cpp，smart-compile auto 会生成以下编译命令：

```
g++-3 -O2 -Wall -pedantic -Werror -Wreturn-type sqrt.cpp -lm -o sqrt && sqrt 
```

只要我的 .cpp 没有任何`cin`声明，它就可以工作。对于带有`cin`语句的代码，控制台窗口会显示用户应该输入数据的位置。但是我无法输入任何内容，并且编译状态一直停留在运行状态。

为了使带有用户输入的代码起作用，我必须删除该`&& FILENAME`部分，然后`./FILENAME`在 emacs' 中手动运行`eshell`。

我在 Windows 中运行 emacs 24.3。我安装了 Cygwin 并将它的 bin 添加到 Windows 环境变量 Path 中（这就是 g++-3 编译工作的原因）。

如果有人可以指导我如何使用单个命令在 emacs 中保存 - 编译 - 运行用户输入所需的 .cpp 程序，我将不胜感激。或者至少我需要如何修改上面的 g++-3 命令以使 compile+run 对用户输入程序起作用。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T22:21:22.000

Emacs is programmable, so if something requires two steps, you can write a command that combines them. The simples code would look like this:

```
(defun save-compile-execute ()
  (interactive)
  (smart-compile 1)                          ; step 1: compile
  (let ((exe (smart-compile-string "%n")))   ; step 2: run in *eshell*
    (with-current-buffer "*eshell*"
      (goto-char (point-max))
      (insert exe)
      (eshell-send-input))
    (switch-to-buffer-other-window "*eshell*"))) 
```

The above code is simple, but it has one flaw: it doesn't wait for the compilation to finish. Since `smart-compile` doesn't support a flag for synchronous compilation, this must be achieved by temporarily hooking into the `compilation-finish-functions`, which makes the code more complex:

```
(require 'cl)  ; for lexical-let

(defun do-execute (exe)
  (with-current-buffer "*eshell*"
    (goto-char (point-max))
    (insert exe)
    (eshell-send-input))
  (switch-to-buffer-other-window "*eshell*"))

(defun save-compile-execute ()
  (interactive)
  (lexical-let ((exe (smart-compile-string "./%n"))
                finish-callback)
    ;; when compilation is done, execute the program
    ;; and remove the callback from
    ;; compilation-finish-functions
    (setq finish-callback
          (lambda (buf msg)
            (do-execute exe)
            (setq compilation-finish-functions
                  (delq finish-callback compilation-finish-functions))))
    (push finish-callback compilation-finish-functions))
  (smart-compile 1)) 
```

The command can be run with `M-x` `save-compile-execute` `RET` or by binding it to a key.

# iphone - Navigation(posh/pop) inside ViewControler exist in UIScrollView

> ID：15723875
> 
> 赞同：1
> 
> 时间：2013-03-30T21:50:12.933
> 
> 标签：iphone, ios, uiscrollview, uinavigationcontroller

in my app i have UIScrollView that contains N ViewControllers that can be swiped to the left or right

In each controller i want to be able to push new viewController and i managed to do that im getting back to the original ViewController by executing [self.navigationController popToRootViewControllerAnimated:YES];

the issue is when i execute this code the K+1(k original controller) viewController get Showed and then it pushed back to the wanted view controller

the project code can be downloaded from the link

[link to the project zip](http://moblix.co.il/TestCusomNavogationSweap.zip)

please advice how i can make the pop smooth without showing controller K+1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:08:43.463

After some research I solved your problem: you have to enable in Interface Builder the Clip Subviews flag (right side in IB) on the View object (left side of IB) in that xib which contains the scrollview (in your example this is the TSFirstViewController.xib).

For more clarity here is a screenshot what have to be set:

![enter image description here](../Images/3df5fe58a3b1b462a66c99ed34c63f3c.png)

# arrays - convert a specific value to the value between [0 1] in MATLAB

> ID：15723877
> 
> 赞同：1
> 
> 时间：2013-03-30T21:50:17.463
> 
> 标签：arrays, matlab

I have a range of values as [12,540 108 201,120 17] in an array.

I am going to convert these values in a range of [0 1] in MATLAB.

Is there any function in MATLAB?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T22:10:37.143

Check [mapminmax](http://www.mathworks.com/help/nnet/ref/mapminmax.html) function from Neural Network Toolbox.

With this function you can map you data into `[YMIN YMAX]` interval:

```
[Y,PS] = mapminmax(X,YMIN,YMAX) 
```

It returns mapping parameters allowing you to use the same mapping with the new data:

```
Y = mapminmax('apply',X,PS) 
```

or to revert the mapping to get your data back to the original space:

```
X = mapminmax('reverse',Y,PS) 
```

But if you don't need to apply the same mapping twice or to revert it, then it's easier just to divide your data by the maximum value:

```
Y = (X - min(X)) / (max(X) - min(X)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T21:54:17.523

Assuming all values are positive (as in your example) and the relationship between the variables in the original array and the [0 1] array is linear:

```
 x = [12,540 108 201,120 17];
 y = x/max(x); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-01-15T16:38:08.020

```
[Y,PS] = mapminmax(X,0,1) 
```

Define your variable as `x` which can be matrix and use above comment in your code.

# ruby-on-rails - Rails has_one association setup

> ID：15723879
> 
> 赞同：1
> 
> 时间：2013-03-30T21:50:38.937
> 
> 标签：ruby-on-rails, associations, belongs-to, has-one

Hi I'm new to rails and have been going in circles with this has_one association for hours. I have Products and Skins and when I create a new product via the form I'd like to use a select box to choose a skin to associate with the product.

I want to then render the product with a haml file in /skin/templates directory after having saved the name of the haml file in the templates column of the skins table.

The current error I'm getting is:

```
undefined method `template' for nil:NilClass 
```

for this line in the controller:

```
render "/skins/templates/#{@product.skin.template}" 
```

However I've tried other various configurations using skin_id as well and haven't been able to get past this.

Here's the code:

# products_controller.rb

```
class ProductsController < ApplicationController
  def show
    @product = Product.find(params[:id])

    if request.path != product_path(@product)
      redirect_to @product, status: :moved_permanently
    else 
      render "/skins/templates/#{@product.skin.template}"
    end
  end

  def new
    @product = Product.new

    respond_to do |format|
      format.html # new.html.haml
      format.json { render json: @product }
    end
  end

  def create
    @product = Product.new(params[:product])

    respond_to do |format|
      if @product.save
        format.html { redirect_to @product, notice: 'Product was successfully created.' }
        format.json { render json: @product, status: :created, location: @product }
      else
        format.html { render action: "new" }
        format.json { render json: @product.errors, status: :unprocessable_entity }
      end
    end
  end
end 
```

# product.rb

```
class Product < ActiveRecord::Base
  attr_accessible :name, :skin
  has_one :skin
end 
```

# skin.rb

```
class Skin < ActiveRecord::Base
  attr_accessible :product, :name, :template
  belongs_to :product
end 
```

# _form.html.haml

```
= form_for @product do |f|

  - if @product.errors.any?
    #error_explanation
      %h1= "#{pluralize(@product.errors.count, "error")} prohibited this product from being saved:"
      %ul
        - @product.errors.full_messages.each do |msg|
          %li= msg

  .field
    = f.label :name
    = f.text_field :name

  = f.select :skin_id, Skin.all.collect{|t| [t.name, t.id]}

  .actions
    = f.submit 'Save' 
```

# products table

```
id  |     name     |         created_at         |         updated_at         
----+--------------+--------------------------------------------------------
  1 | test         | 2013-03-30 18:01:42.102505 | 2013-03-30 18:01:42.102505 
```

# skins table

```
 id |  name   | template |         created_at         |         updated_at         | product_id  
----+---------+----------+----------------------------+----------------------------+------------
  1 | Product | product  | 2013-03-30 20:13:26.374145 | 2013-03-30 20:13:26.374145 | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:58:54.610

product_id in skin record is empty... but looks like your product should "belongs_to" skin

1) add skin_id to your products table and remove product_id from skins table 2) change Product model

```
 class Product < ActiveRecord::Base
      attr_accessible :name, :sku, :skin_id
      belongs_to :skin
      validates_presence_of :skin  #add validation
    end 
```

3) Skin model

```
class Skin < ActiveRecord::Base
  attr_accessible  :name, :template
  has_many :products
end 
```

# c# - C# vs 2008 crystal reports exception on client machine

> ID：15723880
> 
> 赞同：0
> 
> 时间：2013-03-30T21:50:50.857
> 
> 标签：c#, crystal-reports, x86, runtime-error

my client machine is 64 bit but the application i build is in x86 target platform in C# Visual studio 2008 with win7 32 bit. Now the problem is when i click crystal report button on my application it gives me this error. It works perfectly fine on development machine but on client i just see this message box again and again.

"An error has occurred while attempting to load the Crystal Reports runtime.

Either the Crystal Reports registry key permissions are insufficient or the Crystal Reports runtime is not installed correctly."

![enter image description here](../Images/97798ba4ecc5902b75f311637bc2766f.png)

I have checked crystal reports even in prerequisites just like the attached picture ![enter image description here](../Images/09948f75632673a7825a9326906e402f.png)

Also i have installed manually crystal reports runtime from [http://downloads.businessobjects.com/akdlm/cr4vs2010/CRforVS_redist_install_32bit_13_0.zip](http://downloads.businessobjects.com/akdlm/cr4vs2010/CRforVS_redist_install_32bit_13_0.zip)

But error seems not leaving my life at all.

I am using first time crystal reports in C# but it gave me very hard time just to install it on the client machine. I have googled and found solutions most of them i have tried like setting prerequisites and changing mode from Any CPU to x86 but none has fix my error.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:08:31.997

IIRC I've had a similar problem in the past caused by deploying Crystal with the Setup package. Have you tried uninstalling Crystal Runtime from the target machine and installing the correct (64-bit) runtime version onto it directly?

You can leave your target CPU as Any.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:20:19.863

I found the answer what i did is i have opend the directory in my development machine C:\Program Files\Microsoft SDKs\Windows\v6.0A\Bootstrapper\Packages\CrystalReports10_5 and copied the runtime exe for crystal reports and than i have ran it manually on the client machine. By doing this my client machine is now able to run crystal reports perfectly fine. I believe i should store this crystal report runtimes in my setup program for other clients.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-10T07:11:14.960

Your application is targeting x86 version and you are installing in 64 bit machine,right? I think crpt x64 installer is corrupted. After making installer,go to debug folder and find crystal report folder.You can see two crpt installer,one is x86 and another is x64\. Delete x64 installer. copy x86 to another place and rename it as x64.Then recopy to crpt folder.Now check installation. I think I can make you understand.

# android - How to clear Maven 3 cache

> ID：15723881
> 
> 赞同：0
> 
> 时间：2013-03-30T21:51:16.613
> 
> 标签：android, maven, maven-3

I develop an Android application using Maven.

I removed several depdendencies from the `pom.xml` file, then ran `mvn clean install` and noticed that the removed dependencies are still used in dex invocation (`android-maven-plugin:3.5.0:dex`).

I deleted `.m2/cache` directory and put following code in my settings file as an attempt to fix this problem:

```
<settings>
    <profiles>
      <repositories>
        <repository>
          <releases>
            <enabled/>
            <updatePolicy>always</updatePolicy>
            <checksumPolicy/>
          </releases>
          <snapshots>
            <enabled/>
            <updatePolicy>always</updatePolicy>
            <checksumPolicy/>
          </snapshots>
          <id/>
          <name/>
          <url/>
          <layout/>
        </repository>
      </repositories>       
    </profiles>
</settings> 
```

But it didn't help.

How can make Maven aware of the fact that the old dependencies (which I removed from the POM) should not be used in compilation of the application?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:58:58.033

I suggest running `mvn dependency:tree` and making sure that the dependencies you expect to be removed aren't pulled by something else.

# c++ - C++: how to find max_element using boost::range?

> ID：15723885
> 
> 赞同：4
> 
> 时间：2013-03-30T21:52:02.437
> 
> 标签：c++, boost, boost-lambda, boost-range

I am trying to return an iterator to the largest element in a filtered range. Here is what I have so far:

```
#include <boost/lambda/lambda.hpp>
#include <boost/range/adaptors.hpp>
#include <boost/range/algorithm.hpp>
#include <vector>
#include <iostream>

using namespace boost::adaptors;
using namespace boost::lambda;
using namespace std;

int main ()
{
  vector<double> x = {100, 150, 200, 110};
  auto it = boost::max_element(x | indexed(0) | filtered(_1>100)); /* problem here */
  cout << it.index() << endl;

  return 0;
} 
```

I expected the code to print out the index in the vector x which has the largest element (ie 2), but unfortunately it does not compile (Linux 64bit, GCC 4.7.2), the problem being in the line indicated above. The first compilation error I get from the compiler (amongst others) is the following:

/boost/tuple/detail/tuple_basic.hpp:396:36: error: assignment of read-only member ‘boost::tuples::cons::head’</p>

Any ideas what I am doing wrong? Or how else I can achieve what I am trying to do? Thanks in advance!

EDIT:

Changing the problematic line to :

```
auto it = boost::max_element<boost::return_found>(x | sliced(1,4) |   filtered(boost::function<bool(double)>(_1>100))); 
```

seems to return the iterator to the largest element. However, is there a way to check that the iterator is within the range? Comparing it with boost::end(x) gives me an error. The only thing I can think of is to return

```
auto another_range = boost::max_element<boost::return_found_end>(x | sliced(1,4) |   filtered(boost::function<bool(double)>(_1>100))); 
```

and check if boost::empty(another_range). Is this the only option? Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T00:18:58.877

The specific error you've encountered appears because boost lambdas are not CopyAssignable. Here's a simpler way to achieve the same message:

```
auto f1 = _1 > 100;
auto f2 = f1;
f2 = f1; // same error 
```

If you provide a CopyAssignable functor to `filtered`, boost.phoenix (which you should be using anyway, boost.lambda is on the road to deprecation in favor of phoenix), a hand-written struct, or the old faithful `std::bind2nd(std::greater<double>(), 100)`, this line compiles with clang++:

bind2nd demo: [http://liveworkspace.org/code/2xKZIf](http://liveworkspace.org/code/2xKZIf)

phoenix demo: [http://liveworkspace.org/code/18425g](http://liveworkspace.org/code/18425g)

It fails with gcc due to some boost.concept check, which is probably a bug, but it's a moot point because the result of `filtered` is `boost::filtered_range`, whose iterators don't have the `.index()` member function.

EDIT in response to comment: comparing iterator into filtered_range with the iterator into the original vector wouldn't work. However, since you used vector, and since it's still accessible, you can compare addresses, since neither `indexed` nor `filtered` make copies

```
#include <vector>
#include <iostream>
#include <cassert>
#include <boost/range/adaptors.hpp>
#include <boost/range/algorithm.hpp>
#include <boost/phoenix.hpp>

using namespace boost::adaptors;
using namespace boost::phoenix::placeholders;

int main ()
{
    std::vector<double> x = {100, 150, 200, 110};
    auto it = boost::max_element( x | indexed(0) | filtered(arg1 < 110) );
    assert(&x[0] <= &*it && &*it < &x[0] + x.size());
    std::cout << "Element " << *it << " is at index " << &*it - &x[0] << '\n';
} 
```

demo [http://liveworkspace.org/code/1zBIJ9](http://liveworkspace.org/code/1zBIJ9)

Or, for a more general solution, you could transform your vector into a vector of pairs (when boost gets zip adaptor, it could be neatly zipped with counting_range), and carry the original sequence index along with the value through all the transformations.

# iphone - iOS 推送通知在我的设备上不起作用

> ID：15723886
> 
> 赞同：1
> 
> 时间：2013-03-30T21:52:33.300
> 
> 标签：iphone, ios, apple-push-notifications

我在本教程中做了所有事情：

[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

我创建了证书、app_id 和配置文件，并尝试在委托文件中使用带有简单代码的推送通知服务：

```
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];

// Let the device know we want to receive push notifications
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:
        (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)]; 
```

我在 iPad 上尝试了我的应用程序，但它不起作用。iOS 不会询问我是否允许我的应用使用推送通知，也不会在“设置”>“通知”列表中显示我的应用。我在编译或运行我的应用程序时没有收到错误..

![在此处输入图像描述](../Images/8975c4d3171f5c7564ee19b47902f5f6.png)

**错误**

我刚刚实现了“didFailToRegisterForRemoteNotificationsWithError”方法，运行应用程序时出现此错误

```
2013-03-31 00:11:10.481 PushAppCalisma [272:907] {
    NSLocalizedDescription = "no valid 'aps-environment' entitlement string found for application";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:21:16.030

您需要创建一个开发配置文件，链接到该特定应用程序 ID（您创建的推送通知），然后记得在真实设备中测试它，模拟器无法接收推送通知！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T22:52:53.307

好吧，我解决了这个问题。可能刚接触 ios 并第一次使用 Push Notifications 的人会犯这个错误。

**解决方案：**

完成本教程中的所有操作：

[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

之后，请按照下列步骤操作：

1- 打开 XCode 并打开 Organizer (Window>Organizer) 2- 在左侧窗格中的 Library 部分下，单击 Provisioning Profile 选项卡并刷新表。如果您看不到刚刚创建的配置文件，请单击“导入”并选择“*.mobileprovision”文件（教程说明了如何创建配置文件和下载配置文件）。导入后，重新启动 Xcode，单击项目名称 3- 在 Code Signing Identity（在 Build Settings 选项卡下）中，将“Targets”和“Projects”选项卡的属性设置为 Provisioning Profile。

# javascript - Change text with javascript

> ID：15723891
> 
> 赞同：-1
> 
> 时间：2013-03-30T21:52:48.890
> 
> 标签：javascript

My website is based on a platform and I can change a little bit of the layout, but certain parts render code automatically. My problem? It is in English and I need it in Spanish. I can add javascript before the body of the website but I can't change the html directly so I was thinking I could use onload to change the text. What do you guys think? I can use jQuery, too, if that helps.

I need to change this:

```
 <div class="c_wrapper">
     <h3 class="d_customize_title" align="left">
         <span id="left_title">
            Playera Max
        </span>
         <a onclick="d.showProductInfo(); return false;" href="#">
            Product details
        </a>
    </h3>
 </div> 
```

to this:

```
<div class="c_wrapper">
    <h3 class="d_customize_title" align="left">
        <span id="left_title">
            Playera Max
        </span>
        <a onclick="d.showProductInfo(); return false;" href="#">
            Detalles del producto
        </a>
    </h3>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:57:28.460

Two options:

1.  Find the part in the theme (platform) that is rendering the code and change it from there (best option)

2.  Use jQuery to replace the `html`:

* * *

```
$(".c_wrapper a").text("Detalles del producto"); 
```

Example:

```
<script type="text/javascript">
    $(".c_wrapper a").text("Detalles del producto");
</script>

</body> 
```

**Working Example:** [http://jsfiddle.net/vtHBV/](http://jsfiddle.net/vtHBV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T22:10:26.313

As others have mentioned it's a bit hacky to do this with Javascript but here's another way to do it without jQuery:

```
// helper to make sure we get a sibling that is an element
function getNextSibling(node){
    sibling = node.nextSibling;
    while (sibling.nodeType != 1){
        sibling = sibling.nextSibling;
    }
    return sibling;
}

// set text
getNextSibling(document.getElementById('left_title')).innerHTML = 'Detalles del producto'; 
```

Demo: [http://jsfiddle.net/louisbros/dkymR/](http://jsfiddle.net/louisbros/dkymR/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T22:29:56.687

This is perfect for jQuery, if you don't have control over the content when you initially load it it may be the best option. Below is a working sample for your example:

```
$(function(){
      $("#left_title + a").text("Detalles del producto");
}); 
```

# jquery - 动画突出显示的链接（animer unlien surligné）

> ID：15723892
> 
> 赞同：1
> 
> 时间：2013-03-30T21:52:49.613
> 
> 标签：jquery, css, hyperlink, transform, highlight

有一段时间，我尝试重现链接创建的突出显示标题的效果。 [http://www.platige.com/en/](http://www.platige.com/en/)

但我无法重现这种效果。我想知道是否可以仅在 css3 中使用此效果？还是只能在 jquery 中使用？

我测试了一些 jquery，但我无法达到预期的效果。

我只是请求一点帮助。谢谢你 ！我不能把我的链接小提琴...;-(

`<p> <span class="lien"><a href="#">Titre</a></span></p> <p> <span class="lien"><a href="#">Titre long long long long long long long</a></span></p>`

css

`.lien a {color: #585858; text-decoration: none; transition: all 0.2s ease 0s;} .lien a:hover {background:#585858; color:#b4b4b4; padding:0 10px;}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:21:47.383

这是我放在一起的一个基本示例：http: [//jsfiddle.net/Czh8R/](http://jsfiddle.net/Czh8R/)

HTML：

```
<a href=http://www.example.com>Link to an example page</a> 
```

CSS：

```
a{
    font-size: 20px;
    color: #000;
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAxJREFUGFdj+M/AAAADAQEAYyRV0wAAAABJRU5ErkJggg==);
    background-size: 1% 100%;
    background-repeat: no-repeat;
    transition: 0.5s all
}
a:hover{
    background-size: 100% 100%;
    transition: 0.5s all
} 
```

The `background-image` data uri is for a 1px light red image. I generated it with [http://dopiaza.org/tools/datauri/index.php](http://dopiaza.org/tools/datauri/index.php) An image must be used because the transition requires `background-size`. I did not vendor prefix the `transition`, so you will have to add `-webkit-`, `-moz-`, etc. accordingly.

# php - “警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在...中给出”但我的查询是正确的

> ID：15723897
> 
> 赞同：0
> 
> 时间：2013-03-30T21:53:37.883
> 
> 标签：php, mysql

好的，所以我知道关于“为什么我会收到 mysql_fetch_array... 的警告”的问题已经被问了好几次了，我的问题是所有接受的答案都表明服务器吐出这个警告的原因是因为查询本身是不正确的...这不是我的情况。

下面是代码：

```
$dbhost = "host";
$dbuser = "user";
$dbpass = "pass";
$dbname= "db";
$conn = mysql_connect($dbhost, $dbuser, $dbpass);
mysql_select_db($dbname) or die ('<META HTTP-EQUIV="Refresh" CONTENT="0;URL=Failed.php?dberror=1">');    

$token = mysql_escape_string($_GET['token']); 

$query = "SELECT * FROM newuser WHERE token='$token'";
$result = mysql_query($query) or die(mysql_error());

while($row=mysql_fetch_array($result)) {
   do stuff...
} 
```

'while' 语句中的所有内容都执行得很好——它对数据库进行了一些更改，我可以验证这些更改正在发生。更重要的是，查询永远不会吐出任何错误细节。我已经尝试测试 $result===false 并询问错误信息但它也不会返回任何内容的情况。据我所知，查询字符串很好，没有失败。

我在这里做错了什么？除了 SQL 语句之外，PHP 不喜欢我的 While 参数是否有任何其他原因是不好的（我再次确信它还不错）？

另外，我知道我应该使用 mysqli/PDO ....我计划在不久的将来切换到它，但我只是想把头发拉出来，我不知道为什么它会失败吨。在这一点上，这更像是个人的事情......

感谢您的帮助，如果您需要任何其他信息，请告诉我。（PHP 5.3 版）

这是查询字符串 ($query) 的回显：

```
 SELECT * FROM newuser WHERE token='6e194f2db1223015f404e92d35265a1b' 
```

这是查询结果的 var_dump ($result): resource(3) of type (mysql result)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T22:54:35.640

```
$query = "SELECT * FROM newuser WHERE token='$token'";
$result = mysql_query($query) or die(mysql_error());

while($row=mysql_fetch_array($result)) {
   do stuff...
} 
```

If the `die` statement is not executed, `$result` is OK when you enter the while loop. The problem then is probably that you use `$result` for a query inside the loop as well, eventually leading to it being set to false.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T22:35:41.857

So for now i can say that the problem is not the `mysql_escape_string` nether the using of `mysql` at all neither access privilege from `user name` and `password` and what i want to tell you is to test the `$result` and if it is a resource proceed with your `while` block like this

```
if(is_resource($result))
    {
        while($row = mysql_fetch_array($result))
            {//process your code here}
    } 
```

and tell me if the code has been also executed :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T21:59:41.217

根据 查询***不***正确`mysql_`。您收到的错误告诉您这`$result`是布尔值（假）。

`$token`来自哪里？您最好停止使用`mysql_`函数并使用准备好的语句和绑定参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T22:06:50.360

你的逃跑是错误的试试这个

```
 $token = mysql_real_escape_string($_GET['token']); 
```

代替`$token = mysql_escape_string($_GET['token']);`

**此扩展自 PHP 5.5.0 起已弃用，并将在未来删除。**

[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

# list - 列表索引超出范围？不应该

> ID：15723898
> 
> 赞同：0
> 
> 时间：2013-03-30T21:53:43.680
> 
> 标签：list, python-3.x

```
def trav(r,c):
  #print("(",r,",",c,")")
  ch = a[r+1][c+1]

  lu= a[r][c]
  #print(lu)
  u = a[r][c+1]
  #print(u)
  ru= a[r][c+2]
  #print(ru)

  l = a[r+1][c]
  #print(l)
  r = a[r+1][c+2]
  #print(r)

  ld= a[r+2][c]
  #print(ld)
  d = a[r+2][c+1]
  #print(d)
  rd= a[r+2][c+2]
  #print(rd)

  a1 = a2 = a3 = a4 = a5 = a6 = a7 = a8 = 0

  if(ch == lu-1):
    a1 = trav(r-1,c-1)

  if(ch == u-1):
    a2 = trav(r-1,c)

  if(ch == ru-1):
    a3 = trav(r-1,c+1)

  if(ch == l-1):
    a4 = trav(r,c-1)

  if(ch == r-1):
    a5 = trav(r,c+1)

  if(ch == ld-1):
    a6 = trav(r+1,c-1)

  if(ch == d-1):
    a7 = trav(r+1,c)

  if(ch == rd-1):
    a8 = trav(r+1,c+1)

  return max(a1,a2,a3,a4,a5,a6,a7,a8) + 1

while(1):
  row,col = [int(x) for x in input().split(" ")]

  if(row == 0):
    break

  a = []
  for index in range(10):
    a.append([])
    for jindex in range(10):
      a[index].append('a')

  b = []
  for index in range(row):
    str = input()
    for jindex in range(col):
      a[index+1][jindex + 1] = ord(str[jindex])
      if(str[jindex] == 'A'):
        b.append([index,jindex])

  #print (a)
  #print (b)

  ans = max([trav(x[0],x[1]) for x in b])

  print(ans) 
```

该代码正在生成以下错误

```
 Traceback (most recent call last):   File "C:/Users/DELL/Desktop/ABCPATH.py", line 80, in <module>
    ans = max([trav(x[0],x[1]) for x in b])   File "C:/Users/DELL/Desktop/ABCPATH.py", line 80, in <listcomp>
    ans = max([trav(x[0],x[1]) for x in b])   File "C:/Users/DELL/Desktop/ABCPATH.py", line 17, in trav
    ld= a[r+2][c] IndexError: list index out of range 
```

但据我说不应该，而且我对 python 非常陌生，我无法调试它。请帮忙

采样输入：

```
4 3
ABC
CFG
BDH
ABC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:39:48.693

它*必须*打破

r = a[r+1][c+2]

您正在重新分配该行中 'r' 的值。另请注意，您不应将字符串命名为“str”，因为它是 python 字符串模块的名称，您将无法使用它。

# c++ - 使用 vector::push_back() 方法时，C++ 向量编译错误

> ID：15723900
> 
> 赞同：3
> 
> 时间：2013-03-30T21:53:50.433
> 
> 标签：c++, vector, compiler-errors

我在我的程序中使用 std::vector 编译时出现此错误：

> /usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/bits/vector.tcc：在成员函数'User& User::operator=(const User&)'中：
> 
> /usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/bits/vector.tcc:238：从`void std::vector<_Tp, _Alloc>::_M_insert_aux(__gnu_cxx::__normal_iterator<typename _Alloc::pointer, std::vector<_Tp, _Alloc> >, const _Tp&) [with _Tp = User, _Alloc = std::allocator<User>]' /usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/bits/stl_vector.h:564: instantiated from`void std::vector<_Tp, _Alloc>::push_back(const _Tp&) [with _Tp = 用户，_Alloc = std::allocator]'
> 
> main.cpp:100：从这里实例化
> 
> /usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/bits/vector.tcc:238：错误：非静态常量成员`const std::string User::NAME'，可以' t 使用默认赋值运算符

我有“用户”和“用户”类：

```
class User {
    public:
        const string NAME;

        User(const string &name, const bool &isMain = false) : NAME(name), isMain(isMain) {};
        void addFollower(User * user);
        void addReplier(User * user, const int &count);
        void addMentioner(User * user, const int &count);
        void addRetweeter(User * user, const int &count);

    private:
        vector<User *> followedBy, repliedBy, mentionedBy, retweetedBy;
        vector<int> replyCount, mentionCount, retweetCount;
        bool isMain;
    };

class Users {
    public:
        vector<User> users;

        void addUser(const string &name, bool isMain = false);
        User * findUser(const string &name);
        friend ostream & operator <<(ostream &outStream, const Users &users);
        User & operator [] (unsigned int index);
    }; 
```

事情就是这样。错误是由方法Users::addUser()引起的：

```
void Users::addUser(const string &name, bool isMain) {
    User newUser(name, isMain);
    users.push_back(newUser);
} 
```

如果我删除第二行

```
users.push_back(newUser); 
```

它工作得很好，但是，它不像你看到的那样工作，因为它阻止我将新记录添加到“用户”向量数组中。如果有人告诉我是什么原因，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T21:58:07.523

您必须提供一个复制构造函数才能使用`push_back`，因为您的类包含一个非静态`const`成员。

您可以改用 getter 轻松解决此问题：

```
class User{
public:
    string NAME() const { return m_name; }
    /* ... */
private:
    string m_name;
    /* ... */
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T22:02:11.497

大多数时候，编译器会为你提供一个复制赋值运算符，但由于你有一个 const 成员变量，编译器不可能这样做。

# delphi - Delphi access violation inside TLanguages utility

> ID：15723909
> 
> 赞同：5
> 
> 时间：2013-03-30T21:55:18.460
> 
> 标签：delphi, delphi-7, locale

For some reason, trying to create a TLanguages object provided by the SysUtils header by using the singleton or by calling the constructor directly is causing trouble in the wild, where some users report this error (X varies):

```
Access violation at address X. Write of address X (at address X) 
```

... when the following seemingly innocent line of code is executed:

```
TLanguages.Create; 
```

To clarify, this is not related to context. I can put this line in any place I like (as the only line of code of an empty program for example), but the problem remains.

The weird part is that this class is part of Delphi's standard headers, which should not fail (right?).

```
constructor TLanguages.Create;
type
  TCallbackThunk = packed record
    POPEDX: Byte;
    MOVEAX: Byte;
    SelfPtr: Pointer;
    PUSHEAX: Byte;
    PUSHEDX: Byte;
    JMP: Byte;
    JmpOffset: Integer;
  end;
var
  Callback: TCallbackThunk;
begin
  inherited Create;
  Callback.POPEDX := $5A;
  Callback.MOVEAX := $B8;
  Callback.SelfPtr := Self;
  Callback.PUSHEAX := $50;
  Callback.PUSHEDX := $52;
  Callback.JMP     := $E9;
  Callback.JmpOffset := Integer(@TLanguages.LocalesCallback) - Integer(@Callback.JMP) - 5;
  EnumSystemLocales(TFNLocaleEnumProc(@Callback), LCID_SUPPORTED);
end; 
```

The constructor attempts to use a member function as the EnumSystemLocales callback, which seems to be causing the crashes, because copying the **TLanguages.LocalesCallback** function to global scope and passing that to EnumSystemLocales works perfectly fine.

The struct contains the following Intel x86 assembly, where each item is given by its opcode:

```
pop  edx
mov  eax Self
push eax
push edx
jmp  JmpOffset 
```

**Can anyone explain how the trick works and tell me why it's not working as expected?**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T15:07:03.933

It appears to be a known issue with older Delphi versions, related to DEP, as I guessed in comments to the question. It's clear that the code in the RTL cannot work when DEP is enabled.

Here's a link to confirm the theory: [http://codecentral.embarcadero.com/Item/23411](http://codecentral.embarcadero.com/Item/23411)

Although that CodeCentral article includes code to fix the problem in Delphi 5, it looks like it will work in Delphi 7 too. The fix works by hooking the `SysUtils.Languages` function. So make sure you always use that rather than calling `TLanguages.Create` yourself, for obvious reasons.

# python - 谷歌应用引擎 GET /index.html HTTP/1.1" 404 -

> ID：15723911
> 
> 赞同：1
> 
> 时间：2013-03-30T21:55:31.367
> 
> 标签：python, google-app-engine

我有以下 main.py 文件：

```
 import webapp2

 class MainPage(webapp2.RequestHandler):
 def get(self):
    if self.request.url.endswith('/'):
        path = '%sindex.html'%self.request.url
    else:
        path = '%s/index.html'%self.request.url

    self.redirect(path)

 app = webapp2.WSGIApplication([('/.*', MainPage)],
                                     debug=True) 
```

app.yaml 文件：

```
 application: gtryapp
 version: 1
 runtime: python27
 api_version: 1
 threadsafe: yes 
```

处理程序：

*   url: /images/(. *.(gif|png|jpg)) static_files: static/img/\1 上传: static/img/(.* .(gif|png|jpg))

*   url: */css/(..css) mime_type: text/css static_files: static/css/\1 上传: static/css/(..css* )

*   url: */js/(..js) mime_type: text/javascript static_files: static/js/\1 上传: static/js/(..* js)

*   url: /(. *.html) mime_type: text/html static_files: static/\1 上传: static/(.* .html)

*   网址：.* 脚本：main.app

图书馆：

*   名称：webapp2 版本：“2.5.2”

这是目录和文件的列表.. 那么为什么我得到 404 呢？

![在此处输入图像描述](../Images/db6bcf80cb946dea5b52cf7b63d09c72.png)

如果我写

*   网址：/index.html

    mime_type：文本/html

    静态文件：index.html

    上传：index.html

它向我展示了 index.html 页面，但没有图像......这很奇怪图像的正则表达式发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T00:59:44.923

好吧，我这样解决了：

```
 application: gtryapp
 version: 1
 runtime: python27
 api_version: 1
 threadsafe: yes

handlers:

- url: /images
  static_dir: images

- url: /css
  mime_type: text/css
  static_dir: css

- url: /js
  mime_type: text/javascript
  static_dir: js

- url: /scripts/1.1
  mime_type: text/javascript
  static_dir: scripts/1.1

- url: /(.*\.xml)
  mime_type: application/xml
  static_files: static/\1
  upload: static/(.*\.xml)

- url: /index.html
  mime_type: text/html
  static_files: index.html
  upload: index.html

- url: /ydc-contacts.html
  mime_type: text/html
  static_files: ydc-contacts.html
  upload: ydc-contacts.html

- url: /ydc-graphic.html
  mime_type: text/html
  static_files: ydc-graphic.html
  upload: ydc-graphic.html

- url: /ydc-graphic_design-bauer_bodoni.html
  mime_type: text/html
  static_files: ydc-graphic_design-bauer_bodoni.html
  upload: ydc-graphic_design-bauer_bodoni.html

- url: /ydc-graphic_design-humac.html
  mime_type: text/html
  static_files: ydc-graphic_design-humac.html
  upload: ydc-graphic_design-humac.html

- url: /ydc-graphic_design-olo.html
  mime_type: text/html
  static_files: ydc-graphic_design-olo.html
  upload: ydc-graphic_design-olo.html

- url: /ydc-graphic_design-software.html
  mime_type: text/html
  static_files: ydc-graphic_design-software.html
  upload: ydc-graphic_design-software.html

- url: /ydc-interior-anagnina.html
  mime_type: text/html
  static_files: ydc-interior-anagnina.html
  upload: ydc-interior-anagnina.html

- url: /ydc-interior-ied_meets_cinecitto.html
  mime_type: text/html
  static_files: ydc-interior-ied_meets_cinecitto.html
  upload: ydc-interior-ied_meets_cinecitto.html

- url: /ydc-interior.html
  mime_type: text/html
  static_files: ydc-interior.html
  upload: ydc-interior.html

- url: /ydc-interior_design-unofficial.html
  mime_type: text/html
  static_files: ydc-interior_design-unofficial.html
  upload: ydc-interior_design-unofficial.html

- url: /ydc-lighting-design.html
  mime_type: text/html
  static_files: ydc-lighting-design.html
  upload: ydc-lighting-design.html

- url: /ydc-lighting-pixelight.html
  mime_type: text/html
  static_files: ydc-lighting-pixelight.html
  upload: ydc-lighting-pixelight.html

- url: /ydc-lighting.html
  mime_type: text/html
  static_files: ydc-lighting.html
  upload: ydc-lighting.html

- url: /ydc-lighting_design_monochromenature.html
  mime_type: text/html
  static_files: ydc-lighting_design_monochromenature.html
  upload: ydc-lighting_design_monochromenature.html

- url: /ydc-manifesto.html
  mime_type: text/html
  static_files: ydc-manifesto.html
  upload: ydc-manifesto.html

- url: /ydc-members.html
  mime_type: text/html
  static_files: ydc-members.html
  upload: ydc-members.html

- url: /ydc-news.html
  mime_type: text/html
  static_files: ydc-news.html
  upload: ydc-news.html

- url: /ydc-page_under_construction.html
  mime_type: text/html
  static_files: ydc-page_under_construction.html
  upload: ydc-page_under_construction.html

- url: /ydc-pictures.html
  mime_type: text/html
  static_files: ydc-pictures.html
  upload: ydc-pictures.html

- url: /ydc-product.html
  mime_type: text/html
  static_files: ydc-product.html
  upload: ydc-product.html

- url: /ydc-product_design-ciabattalibro.html
  mime_type: text/html
  static_files: ydc-product_design-ciabattalibro.html
  upload: ydc-product_design-ciabattalibro.html

- url: /ydc-product_design-dog_s_tent.html
  mime_type: text/html
  static_files: ydc-product_design-dog_s_tent.html
  upload: ydc-product_design-dog_s_tent.html

- url: /ydc-product_design-kubo.html
  mime_type: text/html
  static_files: ydc-product_design-kubo.html
  upload: ydc-product_design-kubo.html

libraries:
- name: webapp2
  version: "2.5.2" 
```

非常感谢大家没有回答我，因为我不得不独自完成：）我现在对自己更满意了：D

# javascript - Javascript数组索引

> ID：15723913
> 
> 赞同：2
> 
> 时间：2013-03-30T21:55:50.413
> 
> 标签：javascript

很抱歉问了一个菜鸟问题，但如果我有一个数组：

```
MyArray["2cd"]="blah1";
MyArray["3cx"]="blah3";
MyArray["8cz"]="blah2"; 
```

和一个字符串`myStr="2cd";` 然后我使用 MyArray[myStr] 来获取 blah 的值，在这种情况下如何获取我在对象/数组中访问的数字或 0？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T21:59:07.823

如果我可以在字里行间看到，听起来您在想您发布的代码：

```
MyArray["2cd"] = "blah1";
MyArray["3cx"] = "blah3";
MyArray["8cz"] = "blah2"; 
```

将自动成为等价于：

```
MyArray[0] = MyArray["2cd"] = "blah1";
MyArray[1] = MyArray["3cx"] = "blah3";
MyArray[2] = MyArray["8cz"] = "blah2"; 
```

因此您可以`"blah1"`通过以下两种方式之一获取字符串：

```
var foo = MyArray[0];  // sets foo to "blah1"
var bar = MyArray["2cd"]  // also sets bar to "blah1" 
```

但这不是 JavaScript 的工作方式。

您当然*可以进行*设置，这样您就可以使用 my `MyArray[0]`and`MyArray["2cd"]`来获取相同的值，但是您必须像我的示例中那样明确地执行此操作。

您没有提到的一件事是您如何声明`MyArray`自己。是一个`Array`还是一个`Object`？也就是说，在您发布代码之前，您是否`MyArray`使用：

```
var MyArray = {};  // or equivalently, var Array = new Object; 
```

或者：

```
var MyArray = [];  // or equivalently, var Array = new Array; 
```

第一个示例创建一个`Object`，第二个示例创建一个`Array`。

有点令人困惑的是，JavaScript 同时具有这两种类型，在许多情况下，您可以在某种程度上互换使用它们。但是，`Object`当您在对象中使用任意（通常但不一定非数字）键时，通常使用 an ，如您的示例中所示。`Array`相反，当您主要使用严格的数字索引时，通常使用 an 。

In fact, JavaScript's `Array` type *inherits* from the `Object` type. An `Array` is simply an `Object` with some additional behavior:

*   An `Array` has additional methods such as `.push()` which appends an item to the array.

*   An `Array` has a `.length` property which is automatically updated when you add elements with `.push()` or a direct `array[123]` assignment, or when you remove elements with `.pop()` or other methods.

What JavaScript doesn't have, as Fabrício pointed out, is an "associative array" that behaves like what you might find in some other languages. It has Objects and it has Arrays (which inherit from Objects), and you have to deal with each of those on their own terms.

# php - 使用javascript将下拉选择选项传递给url

> ID：15723922
> 
> 赞同：0
> 
> 时间：2013-03-30T21:57:03.367
> 
> 标签：php, javascript, html, drop-down-menu, combobox

使用javascript将下拉选择选项传递给url，它工作正常，但问题是现在`<option>Select</option>`也传递给url，我怎么能 `<option>Select</option>`在将选择选项值传递给url时禁用？我只想将名称发送到网址，除了`<option>Select</option>`？

```
function getComboC(sel) { 
var name=document.getElementById("name");
var input_val = document.getElementById("name").value;
name.action = "searchexpense.php?name="+input_val+"";
name.submit();

<form name="name" id="name"><select class="select10" 
name="pname" id="name" style="width:150px;"  onChange="getComboC(this)">

<option value="0"><--Select--> </option>

<?php 
$query=mysql_query("SELECT pname from expenses order by id");
while($row=mysql_fetch_assoc($query))
{
$val2=$row['pname'];
?>
<option  value="<?=$val2;?>"  <? if ($_GET['pname']  == $val2)
{ echo "selected='selected'"; }?> >
<?=$row['pname'];?>

</option>

<?php }?>

</select></form> 
```

URL While Select `<option>Select</option>`
**searchexpense.php?pname=0**

动态选项选择
**searchexpense.php?pname=Test**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:55:41.207

你`id`对多个元素使用相同的，比如表单和选择。**id 必须是唯一的**，所以尝试：

```
<form name="my_frm" id="my_frm">
<select class="select10" name="pname" id="name" style="width:150px;"  onChange="getComboC(this)">
.... 
```

和js函数：

```
function getComboC(sel) { 
  //do not submit if default "select" is selected
  if( sel.value != "0" ) {
    var selected_value = sel.value; //selected dropdown value
    document.my_form.action = "searchexpense.php?name="+selected_value;
    document.my_form.submit();
  }
} 
```

# javascript - 递归查找唯一用户名

> ID：15723923
> 
> 赞同：0
> 
> 时间：2013-03-30T21:57:06.030
> 
> 标签：javascript, recursion

我正在尝试确定递归在下面的用例中是否有效。

我`firstName`作为参数传入，并为我的用户生成一个唯一的用户名。

```
getUniqueUsername: function(firstName) {

    if (!firstName) {
        var randomNum = Math.floor(Math.random() * 9000) + 1000;
        var username = firstName.substring(0, 4) + randomNum;

        // check if username is already used - using recursion evaluate for performance
        var user = Users.find({username: username}, {"_id": 1});
        if (user) {
            //call recursion method here
        }
        return username
    } else {
        return "";
    }
} 
```

是否有更好的方法来继续生成和查询数据库，直到找到唯一的用户名。我想到了在返回 true 时对同一方法的递归调用，`user`但正在寻找可能的更好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:04:28.043

暂时解决您的功能

```
getUniqueUsername: function(firstName) {
  if(!firstName) return "";
  do {
    var randomNum = Math.floor(Math.random() * 9000) + 1000;
    var username = firstName.substring(0, 4) + randomNum;
    var user = Users.find({username: username}, {"_id": 1});
  } while(user);
  return username;
} 
```

# java - 获取 .jar 文件

> ID：15723926
> 
> 赞同：-1
> 
> 时间：2013-03-30T21:57:21.437
> 
> 标签：java, jar

我在您的论坛上阅读了一篇帖子，它告诉我使用此过程获取 .jar 文件，但它在我的电脑上不起作用。

我有这两个类：

```
Main.java

package somma;

public class Main extends Somma {
    public static void main(String[] args) {
        int a = 1;
        int b = 2;
        int s = somma(a, b);
        System.out.println(s);
    }
}

Somma.java

package somma;

public class Somma {
    public static int somma(int a, int b) {
        int s = a + b;
        return s;
    }
} 
```

我会得到一个 .jar 文件来单独编写一个此类：

```
MainCheUsaLaLibreria.java

package t; //This is into new project!

public class MainCheUsaLaLibreria {

    public static void main(String[] args) {
        int a = 1;
        int b = 2;
        int s = somma(a, b);
        System.out.println(s);
    }
} 
```

是否有可能，我该怎么做才能获得工作的 .jar 文件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:33:38.853

还不够清楚，我知道您正在尝试将您的类打包成一个 jar 文件并在其他 java 程序中使用它。

如果是这样，您可以使用命令行工具“jar”来创建文件：

> jar cvx somma.jar somma

（假设您已经编译了这两个类） ant、maven 或 Eclipse IDE 等工具对编译和构建 jar 文件非常有帮助。

然后将其添加到项目 (MainCheUsaLaLibreria) 的类路径中，并从 jar 文件中导入您的类。

# html - Relative positioning goes wrong according to absolute

> ID：15723930
> 
> 赞同：0
> 
> 时间：2013-03-30T21:58:00.580
> 
> 标签：html, css, position

So I made [JsFidle link](http://jsfiddle.net/gy3FU/1/) and I'm troubled about relative and absolute positiong. So I made absolute div called top. I've got relative long (wide) blue panel with title that is positionend properly - top 0px. but when i'm making 2nd div in div id=top it has relative positioning top=70px (70 px is size of wide blue panel above). Sounds okey, right? But it isn't. I have no idea why It has so bad positoning . its relative to div="top" div, right? So why it moves so to bottom. Help please.

```
#top {
position: absolute;
top:0;
height:420px;

#panel {
margin:auto;
position:relative;
top:0px;

#panel-pic {
position: relative;
top: 70px;
height:350px;
background-color:black;
background-position: center;
background-size:cover;
box-shadow: 1px 1px 9px black; 
```

}

panel-pic goes wrong!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T22:09:39.480

I think you're mixing the two. :) The parent should be relative and all elements you want to place relative-ly to it, should be absolute. So just change #top's position to relative, and all others to absolute.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:06:34.217

under `#panel-pic p {`

`margin-top: 175px;`

should be

`margin-top: 0px;`

working example: [http://jsfiddle.net/gy3FU/7/](http://jsfiddle.net/gy3FU/7/)

# jquery - jquery validation: call ajax and close bootstrap modal form after entire form validates

> ID：15723934
> 
> 赞同：4
> 
> 时间：2013-03-30T21:58:13.653
> 
> 标签：jquery, ajax, twitter-bootstrap, jquery-validate

I'm using Bootstrap layout and [the jQuery Validation Plugin](http://bassistance.de/jquery-plugins/jquery-plugin-validation/). I click on a button, a modal with the form opens. The user inputs some data and improves it until everything is correct. When he submits it, it should make `ajax` call and close the modal form (but if the validation fails, there should be no ajax and no modal closing). Below is my code:

ajax call

```
$('#outcomeFormDialog form').on( "submit", function( event ) {
    var form = $(this);
    $.ajax({
        type: form.attr('method'),
        url: "../php/client/json.php",
        data: form.serialize(),
        success: function(data, status) {
            $(this).modal('hide');
        }
    });

    event.preventDefault();
}); 
```

current validation code:

```
 $('#outcomeFormDialog form').validate(
 {
  rules: {
    amount: {
      money: true,
      required: true
    },
    comment: {
      required: false
    }
  },
  highlight: function(element) {
    $(element).closest('.control-group')
    .removeClass('success').addClass('error');
  },
  success: function(element) {
    element
    .addClass('valid').closest('.control-group')
    .removeClass('error').addClass('success');
  }
 }); 
```

As far as I understood, jquery validation's `success` corresponds to each form element rather than entire form - so checking entire form validation should be done some other way.

This is my form (mustache-driven):

```
<div id="outcomeFormDialog" class="modal hide fade" role="dialog">
    <form class="form-horizontal well" data-async data-target="#outcomeFormDialog" method="POST">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">×</button>
            <h3 id="myModalLabel">Add outcome</h3>
        </div>
        <div class="modal-body">
            <fieldset>
                <input name="type" type="hidden" value="add_outcome" />
                <div class="control-group">
                    <label class="control-label" for="amount">Amount</label>
                    <div class="controls">
                        <div class="input-prepend">
                            <span class="add-on">{{ currency }}</span>
                            <input type="text" name="amount" class="input-xlarge" placeholder="00.01" />
                        </div>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="comment">Comment</label>
                    <div class="controls">
                        <input type="text" name="comment" class="input-xlarge" placeholder="Comment here..." />
                    </div>
                </div>
            </fieldset>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary">Save outcome</button>
        </div>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T04:39:40.177

You have a couple popular issues and misconceptions regarding this plugin:

*   You do not need a `submit` handler. The `click` event of the `submit` button is automatically captured and handled by this plugin.

*   [As per the docs](http://docs.jquery.com/Plugins/Validation/validate#toptions), you are supposed to put your `ajax` within the plugin's `submitHandler` callback option.

> **submitHandler**: Callback, Default: default (native) form submit
> 
> Callback for handling the actual submit when the form is valid. Gets the form as the only argument. Replaces the default submit. **The right place to submit a form via Ajax after it validated.**

**Assuming your `ajax` is written properly, re-arrange your code into something more like this:**

```
$(document).ready(function () {

    $('#outcomeFormDialog form').validate({  // initialize plugin
        rules: {
            amount: {
                // money: true, //<-- no such rule
                required: true
            },
            comment: {
                required: false // superfluous; "false" same as leaving this rule out.
            }
        },
        highlight: function (element) {
            $(element).closest('.control-group')
                .removeClass('success').addClass('error');
        },
        success: function (element) {
            element.addClass('valid').closest('.control-group')
                .removeClass('error').addClass('success');
        },
        submitHandler: function (form) {
            // form validates so do the ajax
            $.ajax({
                type: $(form).attr('method'),
                url: "../php/client/json.php",
                data: $(form).serialize(),
                success: function (data, status) {
                    // ajax done
                    // do whatever & close the modal
                    $(this).modal('hide');
                }
            });
            return false; // ajax used, block the normal submit
        }
    });

}); 
```

**Working DEMO: [http://jsfiddle.net/duAkn/](http://jsfiddle.net/duAkn/)**

# javascript - pathJS 不起作用 - 不加载任何内容

> ID：15723940
> 
> 赞同：0
> 
> 时间：2013-03-30T21:58:42.853
> 
> 标签：javascript, jquery, zurb-foundation, path.js

我尝试将 pathJS 实现到我的项目中，该项目已经将 zurb.Foundation 与 jQuery 结合使用。

到目前为止，我的 JS 非常干净，所以应该没有任何问题。

[我刚刚创建了一个小提琴来简化测试 http://jsfiddle.net/Vyuz5/](http://jsfiddle.net/Vyuz5/)

Chrome 开发工具指出了这个错误：`Uncaught TypeError: Cannot call method 'apply' of undefined`

当我通过 localhost 加载文件时，我只会收到警报“地图”（立即，无需单击任何内容）。由于文档非常少，我不知道我在哪里遇到这些问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:23:07.630

好吧。。修好了。我只需要在调用后删除处理程序：

```
Path.map("#/link1").to(function(){
  doNothing("it did it!");
  $('#loading').html('bazinga');
}).enter(doNothing('map_link1')); 
```

至

```
Path.map("#/link1").to(function(){
  doNothing("it did it!");
  $('#loading').html('bazinga');
}); 
```

就是这样..为什么:)

[修订版 1](http://jsfiddle.net/danielwinter/Vyuz5/1/)

# iphone - Unable to create NSMutableArray using for-loop

> ID：15723941
> 
> 赞同：-5
> 
> 时间：2013-03-30T21:58:45.827
> 
> 标签：iphone, ios, objective-c, nsmutablearray

i want to have an array with values "25 kg", "26 kg"... "149 kg", "150 kg". To simplify task i wrote this:

```
-(NSMutableArray*)weightArray{

    NSMutableArray *myArray;
    for (int i=25; i++; i<150){
        NSString *weightString;
        weightString = [NSString stringWithFormat:@"%d kg", i];
        [myArray addObject:weightString];
    }
    return myArray;
} 
```

And then in viewDidload in my view i wrote: `NSLog (@"%@", [self weightArray]);` But it looks like it's not working. I might be missing something obvious like syntax. Why is it not working?

UPDATE: Finally i found a solution - first, i declare weightArray in @implementation section, then i wrote:

```
-(void)fillingArray{

    if (!weightArray){
        for (int i=25; i<150 ;i++){
            NSString *weightString = [[NSMutableArray alloc] init];
            weightString = [NSString stringWithFormat:@"%d kg", i];
            [weightArray addObject:weightString];
            NSLog(@"%@", weightString);
        }
    }

} 
```

In viewDidLoad i wrote:

```
[self fillingArray];  
 NSLog(@"%@", weightArray); 
```

I think, my problem was in that string NSLog(@"%@", [self weightArray]); In square brackets it suppose to be method name, but i was trying to point at array, and nothing happening.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T22:09:46.603

There are 3 problems with what you are doing.

1.  You need to create your array like this: `NSMutableArray *myArray = [[NSMutableArray alloc] init];` so that it will actually exist.
2.  Your `NSLog` needs to be `NSLog (@"%@", [self weightArray]);` since you are lgging an array and not a number.
3.  (thanks rmaddy for pointing this out) The 2nd and 3rd part of your `for` statement are reversed. So, `i++` is your condition and is always non-zero. This infinite loop is what causes your machine to lock up.

EDIT: Here's a better way that only creates the array once.

```
-(NSMutableArray*)weightArray{

    static NSMutableArray *myArray;
    if (!myArray){
        myArray = [[NSMutableArray alloc] init];
        for (int i=25; i<150 ;i++){
            NSString *weightString;
            weightString = [NSString stringWithFormat:@"%d kg", i];
            [myArray addObject:weightString];
        }
    }
    return myArray;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T22:03:29.573

You don't allocate and initialize the array. So it has an indeterminate value, and your program invokes undefined beahvior. Create it actually:

```
NSMutableArray *myArray = [NSMutableArray new]; 
```

# apache - 重写 Apache 重定向规则

> ID：15723942
> 
> 赞同：0
> 
> 时间：2013-03-30T21:58:51.053
> 
> 标签：apache, .htaccess, redirect

如何编写执行以下操作的通用重定向规则：

```
/phpBB2/viewtopic.php?f=31&t=51574 
```

变成：

```
/forum/viewtopic.php?f=31&t=51574 
```

换句话说，f 和 t 的参数值是占位符

这将是一个永久重定向，所以我想我已经弄清楚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:19:40.040

这似乎一般工作：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RedirectMatch 301 /phpBB2(.*) /forum$1 
```

它回显所有 URL 参数，在这种情况下应该没问题，因为我不知道 phpBB2 的任何参数不适用于 phpBB3。

[这个工具](http://www.htaccessredirect.net/index.php)有帮助。

# arduino - 用 Ada 编程 Arduino

> ID：15723946
> 
> 赞同：10
> 
> 时间：2013-03-30T21:59:03.803
> 
> 标签：arduino, ada, avr

我无法让 avr-elf-windows 和 WinAVR 工作。我已经设法构建了 avr-elf-windows ( [ATmega2560](http://www.atmel.com/devices/atmega2560.aspx) ) 提供的示例。但是，如果我尝试扩展以使用另一个芯片或开始使用 WinAVR 提供的包和项目，我会不断收到错误，我无法解决。

### 方法一：

修改 ATmega2560 示例以使用 WinAVR 包。

改变：

```
with Atmega2560; use Atmega2560; 
```

到：

```
with AVR; use AVR;
with AVR.Atmega328p; use AVR.atmega328p; 
```

创建一个项目文件以包括：

```
with "C:\WinAVR-20100110\lib\gnat\avr.gpr";
with "C:\WinAVR-20100110\lib\gnat\avr_app.gpr"; 
```

运行 make 我得到以下错误：

> avr-gnatmake: "C:\WinAVR-20100110\lib\gnat\avr_lib\avr-int_img.adb" 编译错误

太好了，我有一个编译问题，但我看不到错误。

### 方法二：

在 GPS 中打开上述工程文件。将构建设置更改为 gnatmake。GPS 现在开始报告错误和警告：

> 项目警告：找不到对象目录“avr_lib/avr5/obj” 项目库目录“C:\WinAVR-20100110\lib\gnat\avr_lib\avr5\lib\”不存在

后一个问题很明显是我没有正确设置 GPS 来告诉它微控制器和架构的价值，但我似乎找不到任何解决这个问题的方法。

### 方法三：

要使用直接使用 makefile 设置的 WinAVR，则会出现错误：

> avr-gnatmake：RTS 路径无效：缺少 adainclude 和 adalib 目录

如果我按照我可以通过搜索网络找到的说明进行操作，我只能找到在 Linux 下构建所需库的详细信息。

平台：Windows 7。

* * *

结合上面的两个答案，我现在已经设法链接我的示例代码。至于它是否可以在 Arduino 上工作，这是一个不同的问题。

非常感谢您的帮助。

我发现走到这一步有点令人沮丧，我想知道是否还有其他人可能会放弃 Arduino 上的 Ada 并返回 Arduino IDE，因此错过了学习语言的机会更多的结构。那里有许多误导性的页面也无济于事。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T23:27:33.837

您可能想查看[在 Ada 中集成 8 位 AVR 微控制器的](http://www.academia.edu/2490736/Integrating_8-bit_AVR_Micro-Controllers_in_Ada)论文。基本上你可以使用 GPS 项目文件`arduino.gpr`，如

```
project Arduino is

   for Source_Dirs use (".", "src");
   for Object_Dir use "obj";
   for Exec_Dir use "bin";
   for Main use ("main.adb");

   package Compiler is 
    for Default_Switches ("ada") use ("-mmcu=avr5");
   end Compiler;

   package Ide is
      for Gnat use "avr-gnat";
      for Gnatlist use "avr-gnatls";
      for Debugger_Command use "avr-gdb";
   end Ide;

   package Builder is
      for Executable_Suffix use ".elf";
      for Default_Switches ("ada") use ("--RTS=rts-zfp");
   end Builder;

   package Linker is
      for Default_Switches ("ada") use ("obj\crtm328p._o", "-nostdlib", "-lgcc", "-mavr5", "-Tdata=0x00800200", "-mmcu=avr5");
   end Linker;

end Arduino; 
```

你可以为你的 ATmega328P 编写一个规范，比如

```
with Interfaces; use Interfaces;
with System;

package ATmega328P is

   -- PORTB: Port B Data Register
   PORTB : Unsigned_8;
   for PORTB'Address  use System'To_Address (16#25#);

   -- DDRB: Port B Data Direction Register
   DDRB : Unsigned_8;
   for DDRB'Address  use System'To_Address (16#24#);

   -- PINB: Port B Input Pins
   PINB : Unsigned_8;
   for PINB'Address  use System'To_Address (16#23#);

end ATmega328P; 
```

由您的主文件或库导入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T23:37:13.137

如果这不是直接的答案，请耐心等待；我只在 Linux 上使用过 AVR-Ada 工具链，所以除非其他人首先发现问题，否则我们可能不得不迭代解决方案。

首先要破译的是您拥有哪个版本的 AVR-Ada 工具：

您曾经需要的项目文件（使用 avr-ada 1.1）

```
with "C:\WinAVR-20100110\lib\gnat\avr.gpr"; 
```

现在使用 avr-ada 1.2.1 你需要（而不是）

```
with "C:\WinAVR-20100110\lib\gnat\avr_app.gpr"; 
```

用于构建应用程序和`<same path>/avr_lib.gpr`库。

我不相信你永远都需要！而且它们可能会相互冲突。

我不知道 Windows 二进制构建的状态，但如果您需要最新版本（推荐：这是一个真正的改进），您可能需要从源代码构建它。

**方法 1**：您是从命令行运行 Make 吗？如果是这样，我希望看到他们所有血腥细节中的错误。

**方法2**：这里帮不了你，我对GPS不太了解。但是我可以说在 Linux 上 [wherever]/avr/lib/gnat/avr_lib 中没有“avr5”文件夹。（AVR5 对 328p 是正确的）

Instead there IS a [wherever]/avr/lib/avr5 containing libc and other C-related objects - including the `crtm328p.o` that Rego names in his linker switches, and a [wherever]/lib/gcc/avr/4.7.2/avr5 folder containing libgcc.a. You probably need to find the former and point GPS at it...

**Method 3** : This looks the easiest to fix. The "gnatmake" command needs an --RTS= option pointing at the correct RTS for the 328p. This should be `--RTS=rts/avr5` assuming the RTS is correctly installed.

Alternatively a full path ought to work. Here, that would be

```
--RTS=/opt/avr_472_gnat/lib/gcc/avr/4.7.2/rts/avr5 
```

on Windows you may have to poke around to find the correct path. Using Method 1 this --RTS option is automatically generated by avr_app.gpr.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-27T07:08:54.467

It appears that having a mix of 3 or 4 tool chains installed that provide one of aspects of WinAvr, AvrAda causes significant problems (these included WinAvr, Avr-Ada, Cygwin, AVR compiler by Adacore and MinWG).

Starting with a brand new Win7 or Win8 installation perform the following:

```
Install WinAVR-20100110 to C:\WinAVR-20100110

Copy the content of the Avr-Ada-1.2.0_bin to C:\avr-ada-1.2.0

Add C:\avr-ada-1.2.0\bin to the PATH 

Compiling the content of each of the examples in C:\avr-ada-1.2.0\share\doc\avr-ada\apps identifies that some DLLs are missing: libiconv-2.dll, libgmp-10.dll, libmpc-2.dll, libmpfr-1.dll

These can be found in a MinGW installtion. 
Create a virtual machine to install MinGW on, in order to ensure it did not mess with the main PC. 
Copy the missing DLLs in C:\WinAVR-20100110\bin

The example in DS1820 will not compile due to crc_lib being missing. 

In order to upload to the Arduino the makefiles must be modified for your local installation, board type etc. 
```

# c# - How to communicate with other software from my onscreen keyboard?

> ID：15723951
> 
> 赞同：0
> 
> 时间：2013-03-30T21:59:12.853
> 
> 标签：c#, java, api, textbox, on-screen-keyboard

I need to make a C# or Java application somewhat like "windows onscreen keyboard". I am not sure how to fill the alphabets into other applications on clicking buttons on my form. How do I communicate with the focused textbox or textarea on any given windows software, browser etc.? Any hints or code examples please?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:26:14.973

There is an informative video on youtube about this very subject:

[http://www.youtube.com/watch?v=VgFXwWQwE9k](http://www.youtube.com/watch?v=VgFXwWQwE9k)

And this is the source: [http://pastebin.com/drWY3qnz](http://pastebin.com/drWY3qnz)

# javascript - Inspecting custom exceptions

> ID：15723958
> 
> 赞同：0
> 
> 时间：2013-03-30T22:00:47.447
> 
> 标签：javascript, exception

I'm trying to create a custom exception with some useful debug information:

```
var customError = function(name, message) {

    this.message = message;
    this.name = name;

    this.prototype = new Error(); // to make customError "inherit" from the 
                                  // default error
};

throw new customError('CustomException', 'Something went wrong'); 
```

But all I'm getting are fuzzy messages in the console:

**IE**: "SCRIPT5022: Exception thrown and not caught "

**Firefox**: "uncaught exception: [object Object]"

What do I need to change in order to get something useful out of my exceptions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:07:53.730

Wrong usage of prototype:

```
var customError = function(name, message) {    
    this.message = message;
    this.name = name;
};

customError.prototype = new Error(); // to make customError "inherit" from the 
                                     // default error

throw new customError('CustomException', 'Something went wrong'); 
```

`prototype` is a property of the constructor (`customError`), not of the constructed object (`this`), see ECMA sec [4.2.1](http://www.ecma-international.org/ecma-262/5.1/#sec-4.2.1) and [4.3.5](http://www.ecma-international.org/ecma-262/5.1/#sec-4.3.5).

# c++ - C++中随机决策森林实现的比较

> ID：15723959
> 
> 赞同：5
> 
> 时间：2013-03-30T22:01:10.063
> 
> 标签：c++, machine-learning, random-forest

我目前正在将一些 R 代码转换为 C++ 代码，我需要一个“好的”C++ 随机决策森林实现。

到目前为止，我发现了三个大的实现（tmva、alglib 和 openCv），一些“小/过时”的（比如 librf），我需要从中选择一个：

你们有一些好的/坏的经验和/或关于这些库（或其他一些）的一些建议吗？例如，使用的简单性、可移植性、内存使用、速度、错误消息的可读性、错误（？）、关于实现中选择的注释等。

如果您想知道，我正在使用 Visual Studio，但我的代码（并且应该保持）与 Linux 兼容。速度和内存使用对我来说非常重要，因为我将计算大量随机森林并将其保存在内存中。我正在开发的代码是符号时间序列的机器学习算法。

先感谢您，

# security - 如何在 UserProvider 中获取子域

> ID：15723961
> 
> 赞同：1
> 
> 时间：2013-03-30T22:01:25.690
> 
> 标签：security, symfony, dependency-injection, fosuserbundle

我正在做多租户服务，我在其中验证用户：

用户名、密码、子域

我使用 FOSUserBundle

我想使用 UserProvider 从它调用的 wchich 域中了解它，然后让用户找到。

问题是我无法访问@request 无论我尝试容器或设置我得到的注入

“ScopeWideningInjectionException：检测到范围扩大注入”

是否有任何适当的方法可以扩展 FOSUserBundle 以在验证（使用户登录）用户名时了解请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:46:53.383

您是否尝试过“更改 UserProvider 的范围？[http ://symfony.com/doc/current/cookbook/service_container/scopes.html](http://symfony.com/doc/current/cookbook/service_container/scopes.html)

```
my_user_provider:
    class: Acme\HelloBundle\UserProvider
    scope: request
    arguments: [@request] 
```

不确定它在这种情况下是否有效。安全的东西很棘手。

另一种方法可能是创建一个 REQUEST 侦听器，让它拉取子域，然后将其注入用户提供程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:41:37.257

我遇到了同样的问题，使用 Symfony 2.1 我可以直接在我的提供程序中将 @service_container 作为参数提供，然后获取请求......

自从我更新到 SF 2.2，**不再工作了！**

即使您在配置中设置了“范围：活动”或“公共：真”。

如果您尝试通过中间侦听器获取请求，它也不起作用......从 SF2.2 开始，请求似乎没有及时注入或类似的东西。

所以在这里我如何在提供者内部获取请求，我不知道它是否干净但这是我找到的唯一解决方案，我粘贴了 2 个解决方案，用于 sf 2.2 和 sf 2.1 ：

**SF 2.2**

提供者类：

```
use Symfony\Component\HttpFoundation\Request;

// ...

class WebsiteUserProvider implements UserProviderInterface
{
    private $websiteUrl;

    // ...

    public function __construct(UserManager $userManager)
    {
        $this->userManager = $userManager;

        // Works for sf2.2, init manually the request
        $request = Request::createFromGlobals();
        $this->websiteUrl = $request->getHost();
    }

    // ...
} 
```

就是这样 ！

* * *

**SF 2.1**

提供者类：

```
// ...

class WebsiteUserProvider implements UserProviderInterface
{
    private $websiteUrl;

    // ...

    public function __construct($container, UserManager $userManager)
    {
        $this->userManager = $userManager;

        if ($container->isScopeActive('request')) {
            $this->websiteUrl = $container->get('request')->getHost();
        }
    }

    // ...
} 
```

配置 ：

```
sybio_website.user_provider:
    class: Sybio\Bundle\WebsiteBundle\Security\Authentication\Provider\WebsiteUserProvider
    arguments: [@service_container, @sybio.user_manager] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T22:00:28.783

Finaly I did it this way:

Used [SyndMultiTenantBundle](https://github.com/SyndicateTheory/SyndMultiTenantBundle) for multitenant propose with domainstrategy

and to make it work with FOSUserBundle:

1.  Create new UserManager & UserRepository classes
2.  Override your UserManager:loadUserByUsername method to query your repository directly
3.  Compiler pass to use your custom use manager (change
    class of definition)
4.  Add a listener on tenant.found to call
    $userManager->setTenant($event->getTenant()) to pass tenant into
    scope of repository

Thanks to Adrian from SyndicateTheory

It works like a charm - Enjoy!

# python - Using map on methods in Python

> ID：15723963
> 
> 赞同：3
> 
> 时间：2013-03-30T22:01:37.720
> 
> 标签：python, map

I have some classes in Python:

```
class Class1:
    def method(self):
        return 1
class Class2:
    def method(self):
        return 2 
```

and a list `myList` whose elements are all either instances of `Class1` or `Class2`. I'd like to create a new list whose elements are the return values of `method` called on each element of `myList`. I have tried using a "virtual" base class

```
class Class0:
    def method(self):
        return 0
class Class1(Class0):
    def method(self):
        return 1
class Class2(Class0):
    def method(self):
        return 2 
```

But if I try `map(Class0.method, myList)` I just get `[0, 0, 0, ...]`. I'm a bit new to Python, and I hear that "duck typing" is preferred to actual inheritance, so maybe this is the wrong approach. Of course, I can do

```
[myList[index].method() for index in xrange(len(myList))] 
```

but I like the brevity of `map`. Is there a way to still use `map` for this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T22:03:16.713

You can use

```
map(lambda e: e.method(), myList) 
```

But I think this is better:

```
[e.method() for e in myList] 
```

PS.: I don't think there is *ever* a need for `range(len(collection))`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T22:06:27.380

The [operator.methodcaller](http://docs.python.org/3/library/operator.html#operator.methodcaller) tool is exactly what you're looking for:

```
map(methodcaller("method"), myList) 
```

Alternatively you can use a list comprehension:

```
[obj.method() for obj in myList] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-30T22:02:57.517

This is best:

```
[o.method() for o in myList] 
```

Map seems to be favored by people pining for Haskell or Lisp, but Python has fine iterative structures you can use instead.

# java - 如何使用 RequestDispatcher 转发保持请求的 url？

> ID：15723965
> 
> 赞同：0
> 
> 时间：2013-03-30T22:01:51.543
> 
> 标签：java, servlets, requestdispatcher

我有一个 JSP 页面来搜索客户。该页面调用控制器，控制器执行返回客户列表并转发到源 URL 的方法；

我曾经转发：request.getRequestDispatcher(urlOrigin).forward(request, response);

（注 1：request.getHeader("Referer") 用于获取完整的原始 URL）

（注 2：有一种方法可以拆分完整的原始 URL 并获取名称页面）

从那以后，我在浏览器中有以下网址：

```
(http://domain/ProjetoT/mvc) 
```

它是我的控制器的网址

如果我再次搜索客户将不起作用，因为控制器 url 将被识别为原始 url。

我尝试使用： response.Sendredirect(urlOrigin);

但是我丢失了我的对象并且没有呈现客户列表。

任何人都可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T01:00:29.147

您可以通过用于处理搜索的同一控制器访问它，而不是直接在浏览器中直接访问 JSP 页面。为此，您必须对控制器进行编程以检测您是处于初始显示模式还是处于“提交”模式。这通常通过检查提交中发送的参数的存在来完成。

因此，在初始显示模式下，您的控制器只会转发到 JSP 而不进行任何进一步处理，而在提交模式下，它会执行当前正在执行的操作。这样，您将对初始显示和提交使用相同的 URL，并且您描述的问题应该消失（也就是说，如果我正确理解您的问题）。

# c# - 条件 OR 对 Linq-to-entities 没有影响？

> ID：15723978
> 
> 赞同：1
> 
> 时间：2013-03-30T22:02:58.270
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我今天在我的一个 Linq-To-Entitites 查询中偶然发现了一个 null ref 异常，并想知道这怎么可能。似乎用作 OR 门的条件 OR 在 Linq-To-Entities 中没有效果。我的查询的一个简化示例是这样的：

```
from a in db.Articles
where a.Author == "John Doe"
&& (tag == null || a.Tags.Any(t => t.TagName == tag.TagName))
select a; 
```

现在，当 tag 为 NULL 时，仍然会执行 where 查询的右侧，并且 tag.TagName 上会发生 NULL 引用异常。也许这是因为 Linq-To-Entities 总是将完整的语句翻译成 SQL？

无论如何......如何解决这个问题？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T13:11:07.780

```
var query = db.Articles.Where(x => x.Author == "John Doe");
query = tag == null
    ? query
    : query.Where(x => x.TagName == tag.TagName); 
```

或者：

```
var query = from a in db.Articles
            where a.Author == "John Doe"
            select a;

    query = tag == null
        ? query
        : from a in query
            where a.Tags.Any(t => t.TagName == tag.TagName)
            select a; 
```

就个人而言，我发现第一个更清洁

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T13:28:45.083

Think about sql. Linq converts your code as a whole into sql query passing 'outside' objects as parameters and evaluating them. That's why it fails on evaluation of your `null` object.

It's a good practice to construct a linq query bit by bit based on conditions to reduce number of unnecessary code in resulted query, so it's better to split your query:

```
var query = db.Articles.Where(x => x.Author == "John Doe");
if( tag != null)
  query = query.Where(x => x.TagName == tag.TagName); 
```

Because your query will be evaluated and executed on selection you are welcome to add more conditions without worrying about multiple requests.

# php - Dreamweaver 在 mySQL 上更改数据

> ID：15723988
> 
> 赞同：1
> 
> 时间：2013-03-30T22:03:42.183
> 
> 标签：php, mysql, dreamweaver, records

我试图使用 Dreamweaver 更新记录来创建一个页面，用户可以在其中编辑他们的帐户，但是一旦我提交，数据库中的任何内容都不会更新。有什么建议么？代码如下。请帮忙..

```
<?php require_once('../../Connections/mySQL.php'); ?>
<?php

session_start();

if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_POST["MM_update"])) && ($_POST["MM_update"] == "form1")) {
  $updateSQL = sprintf("UPDATE Users SET first_name=%s, last_name=%s, mdcps_idnumber=%s, phone=%s, Username=%s, Password=%s, email=%s, class_code=%s WHERE id=%s",
                       GetSQLValueString($_POST['first_name'], "text"),
                       GetSQLValueString($_POST['last_name'], "text"),
                       GetSQLValueString($_POST['mdcps_idnumber'], "text"),
                       GetSQLValueString($_POST['phone'], "text"),
                       GetSQLValueString($_POST['Username'], "text"),
                       GetSQLValueString($_POST['Password'], "text"),
                       GetSQLValueString($_POST['email'], "text"),
                       GetSQLValueString($_POST['class_code'], "int"),
                       GetSQLValueString($_POST['id'], "int"));

  mysql_select_db($database_mySQL, $mySQL);
  $Result1 = mysql_query($updateSQL, $mySQL) or die(mysql_error());

  $updateGoTo = "../pro.php";
  if (isset($_SERVER['QUERY_STRING'])) {
    $updateGoTo .= (strpos($updateGoTo, '?')) ? "&" : "?";
    $updateGoTo .= $_SERVER['QUERY_STRING'];
  }
  header(sprintf("Location: %s", $updateGoTo));
}

$colname_Recordset1 = "-1";
if (isset($_GET['Username'])) {
  $colname_Recordset1 = $_GET['Username'];
}
mysql_select_db($database_mySQL, $mySQL);
$query_Recordset1 = sprintf("SELECT * FROM Users WHERE Username = %s", GetSQLValueString($colname_Recordset1, "text"));
$Recordset1 = mysql_query($query_Recordset1, $mySQL) or die(mysql_error());
$row_Recordset1 = mysql_fetch_assoc($Recordset1);
$totalRows_Recordset1 = mysql_num_rows($Recordset1);

//STEP 1 Connect To Database
$connect = mysql_connect("Localhost","mlec2013_danny","8764963d");
if (!$connect)
{
die("MySQL could not connect!");
}

$DB = mysql_select_db('mlec2013_database');

if(!$DB)
{
die("MySQL could not select Database!");
}

//STEP 2 Declare Variables

$Name = $_POST['username'];
$Pass = $_POST['password'];
$Query = mysql_query("SELECT * FROM Users WHERE Username='$Name' AND Password='$Pass'");
$NumRows = mysql_num_rows($Query);
$_SESSION['username'] = $Name;
$_SESSION['password'] = $Pass;

//STEP 3 Check to See If User Entered All Of The Information

if(empty($_SESSION['username']) || empty($_SESSION['password']))
{
die("Go back and login before you visit this page!");
}

if($Name && $Pass == "")
{
die("Please enter in a name and password!");
}

if($Name == "")
{
die("Please enter your name!" . "</br>");
}

if($Pass == "")
{
die("Please enter a password!");
echo "</br>";
}

//STEP 4 Check Username And Password With The MySQL Database

if($NumRows != 0)
{
while($Row = mysql_fetch_assoc($Query))
{
$Database_Name = $Row['username'];
$Database_Pass = $Row['password'];
}
}
else
{
die("Incorrect Username or Password!");
}

//end of PHP scripting. Information displayed below is in the form of HTML, CSS, or Javascript.

?>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<title>Beautiful advanced jQuery background image slideshow</title>
<link rel="stylesheet" type="text/css" href="../../css/style.css"/>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
<script type="text/javascript" src="../../js/script.js"></script>
<script src="../../SpryAssets/SpryMenuBar.js" type="text/javascript"></script>
<style type="text/css">
<!--
#apDiv1 {
    position:absolute;
    width:200px;
    height:115px;
    z-index:1001;
    left: -29px;
    top: 642px;
}
#loginregis {
    position: absolute;
    left: 997px;
    top: 4px;
    width: 399px;
    height: 55px;
    z-index: 1001;
    border: 0;
}
.indentation {
    text-indent: 15px;
}
#content table tr td p .indentation {
    font-style: italic;
}
-->
</style>
<link href="../../SpryAssets/SpryMenuBarVertical.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="top" id="header">
    <!-- jQuery handles to place the header background images -->
  <div id="headerimgs">
        <div id="headerimg1" class="headerimg"></div>
        <div id="headerimg2" class="headerimg"></div>
    </div>
    <!-- Top navigation on top of the images -->
    <div id="nav-outer">
      <div id="navigation"></div>
      <div id="searchdiv">
        <form action="" method="get" enctype="application/x-www-form-urlencoded"
            name="search">
          <input name="search" size="25" maxlength="50" type="text">
          <label for="submit2"></label>
          <input name="submit" id="submit2" value="Submit"
              type="submit">
        </form>
      </div>
      <div> </div>
      <div>
        <ul id="MenuBar1" class="MenuBarVertical">
          <li><a href="../../index.html" class="MenuBarItemSubmenu">Home</a>
            <ul>
              <li><a href="file:///C|/Users/Danny/Desktop/ebusiness/lr/login.php">Login</a></li>
            </ul>
          </li>
          <li><a href="../../about.html" class="MenuBarItemSubmenu">About Us</a>
            <ul>
              <li><a href="../../about.html">About Us</a></li>
            </ul>
          </li>
          <li><a href="../../news.html" class="MenuBarItemSubmenu">News</a>
            <ul>
              <li><a href="file:///C|/Users/Danny/Desktop/ebusiness/news/archives.html">Archived Issues</a></li>
              <li><a href="file:///C|/Users/Danny/Desktop/ebusiness/news/nov12">Nov. 2012</a></li>
              <li><a href="file:///C|/Users/Danny/Desktop/ebusiness/news/dec12">Dec. 2012</a></li>
              <li><a href="file:///C|/Users/Danny/Desktop/ebusiness/news/jan13">Jan. 2013</a></li>
              <li><a href="file:///C|/Users/Danny/Desktop/ebusiness/news/feb13">Feb. 2013</a></li>
              <li><a href="file:///C|/Users/Danny/Desktop/ebusiness/news/mar13">Mar. 2013</a></li>
            </ul>
          </li>
          <li><a href="../../programmes.html" class="MenuBarItemSubmenu">Academy Resources</a>
            <ul>
              <li><a href="#">Academies</a></li>
              <li><a href="#">C.A.P. Corner</a></li>
              <li><a href="#">Capstone Resources</a></li>
            </ul>
          </li>
          <li><a href="#" class="MenuBarItemSubmenu">Student Interests</a>
            <ul>
              <li><a href="#">Clubs/ Organizations</a></li>
              <li><a href="#">Sports</a></li>
            </ul>
          </li>
          <li><a href="#" class="MenuBarItemSubmenu">Events</a>
            <ul>
              <li><a href="#">Requirements Checker</a></li>
              <li><a href="#">Graduation</a></li>
              <li><a href="#">Other Events</a></li>
            </ul>
          </li>
          <li><a href="#" class="MenuBarItemSubmenu">M-DCPS</a>
            <ul>
              <li><a href="http://www.dadeschools.net">M-DCPS</a></li>
              <li><a href="http://mlec.dadeschools.net">MLEC School Site</a></li>
              <li><a href="http://www.flvs.net">FLVS</a></li>
            </ul>
          </li>
          <li><a href="#" class="MenuBarItemSubmenu">Contact Us</a>
            <ul>
              <li><a href="#">Contact S.G.A.</a></li>
              <li><a href="#">Contact MLEC</a></li>
            </ul>
          </li>
        </ul>
</div>
      <div> </div>
  </div>
    <!-- Slideshow controls -->
    <!-- jQuery handles for the text displayed on top of the images -->
</div>
<div id="content" style="width:1346px align:center">
  <div id="content2"></div>
  <table width="100" border="0" cellspacing="0" cellpadding="100">
  <tr>
    <th scope="row"><div align="center" class="sidebarbackground" id="sidebar">
      <h1>Log-in</h1>
      <h2>Hello, <? echo $_SESSION['username'] ?> </h2>
      <blockquote>
        <p><a href="account.php">Account</a></p>
        <p>Settings</p>
        <p>Messages</p>
        <p>Log-off</p>
      </blockquote>
      <h2>S.G.A.</h2>
      <p>About S.G.A.</p>
      <p>MLEC S.G.A. Team</p>
      <p>Join S.G.A.</p>
      <p>Events</p>
<h2>ASGP</h2>
<p>About ASGP (Accel. <br>
  Student Gov. Protocal)</p>
<p>Event Tickets</p>
<p>Help</p>
<p>FAQs</p>
<p>&nbsp;</p>
      <h5>&nbsp;</h5>
    </div></th>
    <td width="1096"><p><img src="../../images/titles/welcome.png" width="104" height="27">
    <br>
      </p>
      <p>&nbsp;</p>
      <form method="post" name="form1" action="<?php echo $editFormAction; ?>">
        <table align="center">
          <tr valign="baseline">
            <td nowrap align="right">First_name:</td>
            <td><input type="text" name="first_name" value="<?php echo htmlentities($row_Recordset1['first_name'], ENT_COMPAT, 'iso-8859-1'); ?>" size="32"></td>
          </tr>
          <tr valign="baseline">
            <td nowrap align="right">Last_name:</td>
            <td><input type="text" name="last_name" value="<?php echo htmlentities($row_Recordset1['last_name'], ENT_COMPAT, 'iso-8859-1'); ?>" size="32"></td>
          </tr>
          <tr valign="baseline">
            <td nowrap align="right">Mdcps_idnumber:</td>
            <td><input type="text" name="mdcps_idnumber" value="<?php echo htmlentities($row_Recordset1['mdcps_idnumber'], ENT_COMPAT, 'iso-8859-1'); ?>" size="32"></td>
          </tr>
          <tr valign="baseline">
            <td nowrap align="right">Phone:</td>
            <td><input type="text" name="phone" value="<?php echo htmlentities($row_Recordset1['phone'], ENT_COMPAT, 'iso-8859-1'); ?>" size="32"></td>
          </tr>
          <tr valign="baseline">
            <td nowrap align="right">Username:</td>
            <td><input type="text" name="Username" value="<?php echo htmlentities($row_Recordset1['Username'], ENT_COMPAT, 'iso-8859-1'); ?>" size="32"></td>
          </tr>
          <tr valign="baseline">
            <td nowrap align="right">Password:</td>
            <td><input type="text" name="Password" value="<?php echo htmlentities($row_Recordset1['Password'], ENT_COMPAT, 'iso-8859-1'); ?>" size="32"></td>
          </tr>
          <tr valign="baseline">
            <td nowrap align="right">Email:</td>
            <td><input type="text" name="email" value="<?php echo htmlentities($row_Recordset1['email'], ENT_COMPAT, 'iso-8859-1'); ?>" size="32"></td>
          </tr>
          <tr valign="baseline">
            <td nowrap align="right">Class_code:</td>
            <td><input type="text" name="class_code" value="<?php echo htmlentities($row_Recordset1['class_code'], ENT_COMPAT, 'iso-8859-1'); ?>" size="32"></td>
          </tr>
          <tr valign="baseline">
            <td nowrap align="right">&nbsp;</td>
            <td><input type="submit" value="Update record"></td>
          </tr>
        </table>
        <input type="hidden" name="MM_update" value="form1">
        <input type="hidden" name="id" value="<?php echo $row_Recordset1['id']; ?>">
      </form>
      <p>&nbsp;</p>
<p><br>
        This is your personal profile page for the Accelerated Student Government Protocal system! This is the system to be used for the purchase of S.G.A. sponsored events, pay for class dues, and much more. If you need help getting around the system visit the help page.</p>
      <p>What do you wish to do?</p>
      <table border="0" id="menuu">
        <tr>
          <th>Buy an event ticket</th>
          <th>Make a payment</th>
        </tr>
        <tr>
          <th>Edit the your settings</th>
          <th>Apply to S.G.A.</th>
        </tr>
        <tr>
          <th>View your account information</th>
          <th>Read your messages</th>
        </tr>
      </table>
      <p>&nbsp;</p>
      <p><br>
</p>
      <p><br>
        If you need to reset your password for any reason please <a href="../reset.html">click here</a>. For any other question regarding the ASGP please email us at <a href="mailto:asgp@mlec2013.x10.mx">asgp@mlec2013.x10.mx</a>.<br>
        <br>
  </p>
      <p>&nbsp;</p>
      <p>&nbsp; </p>
      <p></p>
      <p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
      <p>&nbsp;</p>
    </td>
  </tr>
</table>
</div>
<script type="text/javascript">
var MenuBar1 = new Spry.Widget.MenuBar("MenuBar1", {imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});
</script>
</body>
</html>
<?php
mysql_free_result($Recordset1);
?> 
```

# actionscript-3 - 为什么此 AS3 代码会生成“错误 #2006：提供的索引超出范围”？

> ID：15723993
> 
> 赞同：0
> 
> 时间：2013-03-30T22:04:13.370
> 
> 标签：actionscript-3

所以我要做的是遍历数组“maps”的每个元素，其中包含4个movieclips和look，以及每个movieclips中的孩子，看看哪些是“Block”类型。但是我收到 #2006 错误，我不知道为什么，有人可以帮忙吗？

```
function findBlocks() 
{
    trace("findBlocks()");

    for (i=0; maps.length; i++)
    {
        for (var j=0; maps[i].numChildren; j++)
        {
            var mc = maps[i].getChildAt(j);
            if (mc is Block)
            {
                blocks.push(mc);
            }
        }
    }
    trace("blocks array: " + blocks);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T22:11:53.753

你的 for 循环条件不正确，试试这个：

```
for (var i=0; i < maps.length; i++){
    for (var j=0; j < maps[i].numChildren; j++){
        var mc = maps[i].getChildAt(j);
        if (mc is Block){
            blocks.push(mc);
        }
    }

} 
```

您必须记住，数组和显示列表从 0 开始，因此列表中最后一个元素的索引是长度为 1，在显示列表的情况下为 numChildren-1

```
i < maps.length 
```

和

```
j < maps[i].numChildren 
```

是什么解决了问题

# sse - SSE 和 AVX 的 SIMD 数学库

> ID：15723995
> 
> 赞同：15
> 
> 时间：2013-03-30T22:04:14.267
> 
> 标签：sse, simd, avx, math.h

我正在寻找 SSE 和 AVX 的 SIMD 数学库（最好是开源的）。我的意思是，例如，如果我有一个带有 8 个浮点值的 AVX 寄存器 v，我希望 sin(v) 一次返回所有八个值的 sin。

AMD 有一个专有库 LibM [http://developer.amd.com/tools/cpu-development/libm/](http://developer.amd.com/tools/cpu-development/libm/)，它有一些 SIMD 数学函数，但 LibM 只有在检测到英特尔 CPU 没有的 FMA4 时才使用 AVX。此外，我不确定它是否完全使用 AVX，因为所有函数名称都以 s4 (d2) 而不是 s8 (d4) 结尾。它比 Intel CPU 上的标准数学库提供更好的性能，但也好不了多少。

英特尔将 SVML 作为其 C++ 编译器的一部分，但编译器套件在 Windows 上非常昂贵。此外，英特尔会削弱非英特尔 CPU 上的库。

我找到了以下 AVX 库[http://software-lisc.fbk.eu/avx_mathfun/](http://software-lisc.fbk.eu/avx_mathfun/)，它支持一些数学函数（exp、log、sin、cos 和 sincos）。它为我提供了非常快的结果，比 SVML 更快，但我没有检查准确性。它仅适用于单浮点，在 Visual Studio 中不起作用（尽管这很容易修复）。它基于另一个 SSE 库。

有没有人有任何其他建议？

编辑：我找到了一个 SO 线程，它在 C 中对这个主题 [Vectorized Trig 函数有很多答案？](https://stackoverflow.com/questions/5109864/vectorized-trig-functions-in-c)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T17:14:43.620

我已经将 Vecmathlib [https://bitbucket.org/eschnett/vecmathlib/](https://bitbucket.org/eschnett/vecmathlib/)实现为其他两个项目（爱因斯坦工具包和 pocl [http://pocl.sourceforge.net/](http://pocl.sourceforge.net/)）的通用库。Vecmathlib 是开源的，是用 C++ 编写的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-23T10:11:14.523

[Gromacs](http://www.gromacs.org/)是一个高度优化的分子动力学软件包，用 C++ 编写，使用 SIMD。据我所知，数学 SIMD 功能尚未拆分到单独的库中，但我猜该实现可能对其他人有用。

[https://github.com/gromacs/gromacs/blob/master/src/gromacs/simd/simd_math.h](https://github.com/gromacs/gromacs/blob/master/src/gromacs/simd/simd_math.h)

[http://manual.gromacs.org/documentation/2016.4/doxygen/html-lib/simd__math_8h.xhtml](http://manual.gromacs.org/documentation/2016.4/doxygen/html-lib/simd__math_8h.xhtml)

# html - 如何使用 IF ELSE 函数编写正则表达式

> ID：15723996
> 
> 赞同：0
> 
> 时间：2013-03-30T22:04:17.583
> 
> 标签：html, regex, web-scraping

我正在尝试构建一个刮板来从网站中提取关键指标。其中一项指标是在网站上查找产品的型号。我使用 Outwit 作为基础程序，但是当涉及到站点源代码中的一些异常时，我现在陷入困境。

以下是源代码示例：

```
var zx_description = "Test Dress<br/><br/>Model: Nice01j<br/> 
```

我要提取的信息是：`Nice01j`

问题在于，对于某些产品，Modell 一词拼写为 Model，并且实际型号名称/编号的结尾并不总是以换行符结尾，但在某些情况下，代码可能如下所示：

```
var zx_description = "Test Dress<br/><br/>Model: Nice01j"; 
```

我已设法在 Modell 编号之前创建 RegEx，如下所示：

```
/var zx_description[\s\S]+?Modell:/ 
```

所以现在我想改变它，以便它还考虑到拼写可能是只有一个“l”的模型。

此外，第二部分是创建一个正则表达式，用于在实际模型名称之后捕获 te 信息，其中应该类似于：

```
IF: < br comes before "; then < br ELSE "; 
```

这是否可以在正则表达式中说明，如果可以，我将如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:12:54.727

根据您对 [\s\S] 的使用，在我看来您需要完成正则表达式教程。对于您的问题，请特别关注可选项目和捕获组。

[http://www.regular-expressions.info/tutorial.html](http://www.regular-expressions.info/tutorial.html)