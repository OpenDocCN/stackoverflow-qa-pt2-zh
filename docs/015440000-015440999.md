# StackOverflow 问答 15440000-15440999

# python - Python - 集合

> ID：15440015
> 
> 赞同：1
> 
> 时间：2013-03-15T18:48:21.197
> 
> 标签：python

我是 Python 新手，想知道如何使用 Key 在字典中存储不同 DataType 的列表

例如 -

```
{[Key1,int1,int1,String1] , [Key2,int2,int2,String2], [Key3,int3,int3,String3] } 
```

如何创建字典并添加这些元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:49:36.750

假设您的意思是您的数据是：

```
lst = [[Key1,int1,int1,String1] , [Key2,int2,int2,String2], [Key3,int3,int3,String3]] 
```

然后你可以做类似的事情：

```
{x[0]:x[1:] for x in lst} 
```

您实际上拥有的是试图`set`从一堆列表中创建一个列表 - 这不会起作用，因为`list`对象不可散列。

# security - XXTEA 是 PIC 微控制器的良好加密算法吗？

> ID：15440019
> 
> 赞同：5
> 
> 时间：2013-03-15T18:48:42.713
> 
> 标签：security, encryption, cryptography, embedded, xxtea

我需要一个好的 PIC 微控制器加密算法。经过一番谷歌搜索，似乎 XXTEA 是唯一的选择，但是，[“XXTEA 容易受到需要 2^59 次查询和可忽略的工作的选择明文攻击”](http://eprint.iacr.org/2010/254.pdf)。

我不擅长密码学，所以我想问一下：上面的说法有多准确？我可以在商业安全应用程序中使用 XXTEA 吗？如果没有，是否有任何可用的算法可以用于我的嵌入式系统？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T19:20:20.503

您无法知道是什么使加密算法安全。*没有人*知道是什么使加密算法安全。我们拥有的最好的是“多年来一直受到数百名密码学家严格审查的算法，并且仍然相对毫发无损”。这是[AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)的情况，而不是[XXTEA](http://en.wikipedia.org/wiki/XXTEA)的情况。我们可能会注意到，对 XXTEA 的攻击仍然非常昂贵，处于可行的边缘，并且可能不适用于大多数“商业”情况，但该算法仍然被证明是不稳定的。因此，如果您重视您的安全性，请不要对您的加密货币进行创意；使用经过严格审查的标准。

*为什么*要使用 XXTEA？它对你有什么作用，而 AES 没有？您可能想看一下[这个问题](https://electronics.stackexchange.com/questions/13275/smallest-aes-implementation-for-microcontrollers)，以获取一些指向某些 PIC 微控制器的 AES 实现的指针。

（TEA 及其衍生产品（如 XXTEA）的主要设计标准是具有紧凑的*源代码*，以便可以背诵并在计算机上再次输入。这不会立即转化为*编译代码*的紧凑性。（X*）TEA算法往往很慢并且依赖于不适合小型微控制器的 32 位操作。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-15T17:51:48.920

如果他们希望块大小小于 128 位，他们会寻找其他加密方法，例如 XXTEA。因为您可能拥有带宽非常低的通信介质，例如嘈杂环境中的电力线通信。只有几个字节的有用数据传输，如 4 或 5 个字节的有效载荷。在这种情况下，如果使用 AES，则块大小变为 16 字节，并在可用带宽上产生大量开销。在 XXTEA 的情况下，块大小仅为 64 位（8 字节），因此产生的开销更少。

# sql - 如果当前表中不存在，则从其他表中选择行

> ID：15440025
> 
> 赞同：0
> 
> 时间：2013-03-15T18:48:59.173
> 
> 标签：sql, sql-server-2008

我有两张桌子：

表格1

```
id   name       qty
1    Tedd       6
2    Jim        7
3    Sally      8
4    Victoria   1 
```

表2

```
id   name       qty
1    Tedd       2
2    Jim        2
3    Sally      2
4    Victoria   1
5    Alex       9 
```

我需要从 Table1 中选择所有行。但是，如果 Table2 中存在 Table1 中不存在的行，我需要将其包含在结果集中。所以，最后，我的查询应该返回这个：

```
id   name       qty
1    Tedd       6
2    Jim        7
3    Sally      8
4    Victoria   1
5    Alex       9 
```

有没有办法我可以做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:52:34.410

您可以使用`FULL OUTER JOIN`：

```
select 
  coalesce(t1.id, t2.id) id,
  coalesce(t1.name, t2.name) name,
  coalesce(t1.qty, t2.id) qty
from table1 t1
full outer join table2 t2
  on t1.id = t2.id 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/8cfd7/2)

# freemarker - 在 freemarker 中访问嵌套地图时出现无效的引用异常

> ID：15440026
> 
> 赞同：0
> 
> 时间：2013-03-15T18:48:59.487
> 
> 标签：freemarker

我有嵌套地图。

```
Map<String, Map<String, Long>> domains; 
```

当我以以下方式访问它时，我得到 InvalidReferenceException

```
<#list somelist as item>
  <#list domains[item]?keys as key>
    ${key}
  </#list>
</#list> 
```

表达式域[item] 未在线定义...

我尝试使用 BeansWrapper 和 DefaultObjectWrapper。我还检查了地图上的内容，没有一个值为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:21:54.663

对我都适用`DefaultObjectWrapper`and `BeansWrapper`，所以我猜`somelist`它包含一些坏键。

这是我使用的测试代码；将模板放入`test.ftl`以下类所在的同一目录中：

```
package adhoc;

import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.OutputStreamWriter;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import freemarker.ext.beans.BeansWrapper;
import freemarker.template.Configuration;
import freemarker.template.TemplateException;

public class TestTemplateRunner {

    public static void main(String[] args) throws FileNotFoundException, IOException, TemplateException {
        Configuration cfg = createConfiguration(false);

        cfg.getTemplate("test.ftl").process(
                createDataModel(),
                new OutputStreamWriter(System.out));
    }

    private static Configuration createConfiguration(boolean useBeansWrapper) {
        Configuration cfg = new Configuration();
        cfg.setClassForTemplateLoading(TestTemplateRunner.class, "");
        if (useBeansWrapper) {
            BeansWrapper bw = new BeansWrapper();
            bw.setSimpleMapWrapper(true);
            cfg.setObjectWrapper(bw);
        }
        return cfg;
    }

    private static Map<String, Object> createDataModel() {
        Map<String, Object> dataModel = new HashMap<String, Object>();

        Map<String, Map<String, Long>> domains = new HashMap<String, Map<String, Long>>();
        dataModel.put("domains", domains);

        Map<String, Long> domain1Hits = new HashMap<String, Long>();
        domain1Hits.put("/index", 1234L);
        domain1Hits.put("/about", 123L);
        domains.put("site1.com", domain1Hits);

        Map<String, Long> domain2Hits = new HashMap<String, Long>();
        domain2Hits.put("/", 2234L);
        domain2Hits.put("/contact", 223L);
        domains.put("site2.com", domain2Hits);

        List<String> somelist = new ArrayList<String>();
        somelist.add("site1.com");
        somelist.add("site2.com");
        dataModel.put("somelist", somelist);

        return dataModel;
    }

} 
```

# python - 虽然循环不起作用（python）

> ID：15440030
> 
> 赞同：-2
> 
> 时间：2013-03-15T18:49:14.347
> 
> 标签：python, batch-file

我决定我想自动解决一个数学谜题，但是，它在 python 中不起作用，虽然我已经成功地批量完成了它：

```
@echo off
set people=1
set handshakes=0
set cnt=0
:LOOP
set /A people+=1
set /A cnt+=1
set /A handshakes+=%cnt%
echo.handshakes:%handshakes%,people=%people%
if "%handshakes%" NEQ "66" Goto :LOOP
echo.---------Final Result------------
echo.Handshakes:%handshakes%
echo.People:%people%
pause > nul
exit /b 
```

但是出于一个非常奇怪的原因，以下 python 代码不起作用：

```
people = 1
handshakes = 0
cnt = 0
while a < 66:
    people+=1
    cnt+=1
    handshakes+=cnt
print (handshakes)
print (people)
raw_input() 
```

谜语：在聚会上，每个人都与其他人握手。有66次握手。聚会有多少人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:50:38.070

您的循环检查一个名为`a`. 但是，您永远不会在循环内分配`a`或修改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:52:08.073

在您的循环中，您的退出条件是，但您在程序中的任何位置`a < 66`都没有命名变量。`a`将此更改为`handshakes < 66`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:59:46.723

您忘记了定义`a`，并且您永远不会`a`在 while 循环中更新，而且这`raw_input`并没有真正做某事。

# .net - .NET WebMethods 中的 @WebParam 等价物是什么？

> ID：15440031
> 
> 赞同：2
> 
> 时间：2013-03-15T18:49:14.870
> 
> 标签：.net, web-services, asmx, webmethod

我有一个这样定义的 Java JWS WebService：

```
@WebService
public class Foo
{
    @WebMethod
    public int foo(@WebParam(name = "externalName") String internalName)
    {
        ...
    }
} 
```

C# .NET 中的等效项似乎是

```
[WebService]
public class Foo : System.Web.Services.WebService
{
    [WebMethod]
    public int foo(/* ??? */ string internalName)
    {
        ...
    }
} 
```

应该用什么代替`/* ??? */`？我找不到这方面的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:04:45.837

我相信您可能正在寻找`[XmlElement]`：

```
[WebMethod]
public int foo([XmlElement("externalName")] string internalName)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:43:56.330

> 是的，我需要在 C# 中定义一个名称为关键字的参数

该`@`符号将允许您使用 c# 的保留字

```
[WebMethod]
public int foo(int @int)
{
    @int += 2;
    ...
} 
```

# cassandra - 卡桑德拉，Cassandra.yaml

> ID：15440032
> 
> 赞同：2
> 
> 时间：2013-03-15T18:49:18.733
> 
> 标签：cassandra

我对 Cassandra 有一些疑问，首先我想在 storage-conf.xml 中创建列和键空间，（我没有，但我认为 cassandra.yaml 在最新版本中取代了它）我试图写这个cassandra.yaml 通过在记事本中打开它，但它似乎不起作用，因为我无法在 datastax Web 界面中看到我的新键空间。

```
<Keyspace>
<Keyspace Name="Sales">
<ColumnFamily Name="Customer" CompareWith="UTF8Type" />
<ReplicaPlacementStrategy>org.apache.cassandra.locator.RackUnawareStrategy
</ReplicaPlacementStrategy>
<ReplicationFactor>1</ReplicationFactor
<EndPointSnitch>org.apache.cassandra.locator.EndPointSnitch</EndPointSnitch>
</Keyspace> 
```

我究竟做错了什么？

我还想知道是否有一种简单的方法可以将关系 sql server 数据库迁移到 cassandra？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T19:09:55.673

`cassandra.yaml`您正在尝试通过将上述内容添加到您无法做到这一点来创建键空间和列。其次，您添加的内容确实没有意义，cassandra.yaml 是一个[YAML](http://en.wikipedia.org/wiki/YAML)文件，上面是 XML 标记。[Cassandra.yaml](http://www.datastax.com/docs/1.0/configuration/node_configuration)仅用于配置。如果要添加键空间/列，则必须使用 cassandra 接口（[cassandra APIs](http://www.datastax.com/docs/1.0/configuration/node_configuration)）。

至于迁移，有没有简单的方法？[不，真的](https://stackoverflow.com/questions/12867951/migrate-from-sql-server-to-cassandra)。B̶u̶t̶ ̶w̶i̶t̶h̶ ̶l̶o̶t̶s̶ ̶o̶f̶ ̶d̶e̶n̶o̶r̶m̶a̶l̶i̶z̶a̶t̶i̶o̶n̶ ̶a̶n̶d̶ ̶r̶e̶s̶e̶a̶r̶c̶h̶ ̶i̶t̶ ̶c̶a̶n̶ ̶b̶e̶ ̶d̶o̶n̶e̶.̶ ̶H̶e̶r̶e̶ ̶i̶s̶ ̶a̶ ̶[̶b̶l̶o̶g̶]̶[̶5̶]̶ ̶t̶h̶a̶t̶ ̶g̶o̶e̶s̶ ̶o̶v̶e̶r̶ ̶a̶ ̶b̶a̶s̶i̶c̶ ̶w̶a̶y̶ ̶o̶f̶ ̶a̶t̶t̶e̶m̶p̶t̶i̶n̶g̶ ̶t̶o̶ ̶d̶o̶ ̶s̶o̶.

**更新** 博客不见了。oreilly 的本[教程](https://www.oreilly.com/ideas/cassandra-data-modeling)很好地概述了如何为 Cassandra 修改典型的 RDMS 数据模型。

# c# - 通过 Ajax.BeginForm 的 MVC4 Pass 模型

> ID：15440041
> 
> 赞同：3
> 
> 时间：2013-03-15T18:49:48.373
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-mvc-4, razor

我试图在这里遵循一些[好的帖子](https://stackoverflow.com/questions/5410055/using-ajax-beginform-with-asp-net-mvc-3-razor)来让它工作，但是每次我单击 ajax 回发时，我的控制器中的断点都会显示一个具有空值的模型。此页面显示模型值仅供查看，但我尝试将它们放在自己的形式中，并将它们包装在 ajax 形式中，但似乎没有任何效果。

```
@model VendorProfileIntranet.Models.VendorProfile

$(function () {
$("form").submit(function () {
    if ($(this).valid()) {
        $.ajax({
            url: this.action,
            type: this.method,
            data: $(this).serialize(),
            success: function (result) {
                $("#message").html(result);
            }
        });
    }
    return false;
}); 
```

});

```
 @using (Ajax.BeginForm("SelectVendor", "Home", new AjaxOptions { HttpMethod="post", InsertionMode=InsertionMode.Replace, UpdateTargetId="message" }))
{
    <div style="float:right; width:500px">
        <div id="message"></div>
        <input id="btnSubmit" type="submit" value="Select Vendor" />
    </div> 
```

视图真的很长（仅显示模型值以供查看）在这里缩写。

```
<div id="viewform">
    <div id="viewform-contact" style="float:left;">
    <fieldset>
        <legend>Contact Information</legend>
        @Html.HiddenFor(model => model.ProfileID)
        <div class="view-field">
            @Html.LabelFor(model => model.Name)
            @Html.DisplayFor(model => model.Name)
        </div>
        <br />
        <div class="view-field">
            @Html.LabelFor(model => model.Email)
            @Html.DisplayFor(model => model.Email)
        </div>
        <br />
        <div class="view-field">
            @Html.LabelFor(model => model.Phone)
            @Html.DisplayFor(model => model.Phone)
        </div>
        <br />
        <div class="view-field">
            @Html.LabelFor(model => model.Website)
            @Html.DisplayFor(model => model.Website)
        </div>
        <br />
        <div class="view-field">
            @Html.LabelFor(model => model.CompanyName)
            @Html.DisplayFor(model => model.CompanyName)
        </div>
        <br />
        <div class="view-field">
            @Html.LabelFor(model => model.Address1)
            @Html.DisplayFor(model => model.Address1)
        </div>
        <br />
        <div class="view-field">
            @Html.LabelFor(model => model.Address2)&nbsp;
            @Html.DisplayFor(model => model.Address2)
        </div>
        <br />
        <div class="view-field">
            @Html.LabelFor(model => model.City)
            @Html.DisplayFor(model => model.City)
        </div>
        <br />
        <div class="view-field">
            @Html.LabelFor(model => model.State)
            @Html.DisplayFor(model => model.State)
        </div>
        <br />
        <div class="view-field">
            @Html.LabelFor(model => model.Zip)
            @Html.DisplayFor(model => model.Zip)
        </div>
        <br />
        <div class="view-fieldwide">
            @Html.LabelFor(model => model.VendorNotes)
        </div>
        <br />
        <div class="view-fieldwide">
            @Html.DisplayFor(model => model.VendorNotes)
        </div>
        <br /><br />
        </fieldset>
    </div>
} 
```

控制器。我已经以一种或两种形式尝试了上述方法。使用上面的代码，模型包含所有空值，除了填充在隐藏输入字段中的 ProfileID。我认为传递模型应该可以工作，而不必为每个模型值创建一个隐藏字段？

```
[HttpPost]
        public ActionResult SelectVendor(VendorProfile pageModel)
    {
        // handle selected vendor
            _DAL.SelectVendor(pageModel.ProfileID);
            return Content("This Vendor has been selected", "text/html");
    } 
```

**回答**

由于使用 DisplayFor，模型值未绑定

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T21:10:09.307

如评论中所述，您实际上希望在您的模型中看到您使用`DisplayFor`. `DisplayFor`字段**不会发布**，它们只是为了显示。为了将这些值发回，您需要`HiddenFor`为每个要发布的字段提供一个，以便模型绑定能够正常工作。

# c++ - 可以复制/复制 CCLayer 吗？

> ID：15440042
> 
> 赞同：0
> 
> 时间：2013-03-15T18:50:04.150
> 
> 标签：c++, cocos2d-x

我正在创建一个包含项目列表的场景，例如商店菜单。理想情况下，我想在 CocosBuilder 中为单个商店项目创建布局。然后，在代码中，我访问该布局并为我的所有商店物品制作多个副本，这些物品可以添加到场景中。

这在 cocos2d-x 中可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:27:47.527

如果您拥有的所有项目都是 CCSprite，则可以使用此代码进行复制：

```
CCSprite* copy=CCSprite::spriteWithTexture(source->getTexture()); 
```

您可以复制图层中的所有精灵，然后将它们添加到新图层。

# python - 从文件中读取日期以用于绘图

> ID：15440047
> 
> 赞同：0
> 
> 时间：2013-03-15T18:50:27.810
> 
> 标签：python, date, numpy, matplotlib

我正在尝试从数据记录器中读取日期戳并在图中使用这些日期。我一直在使用 matplotlib 日期 date2num、datestr2num 和 datetime，但我不断收到格式错误，并且无法找到正确的语法和关键字来执行此操作（以及它们的含义）。我一直在阅读 matplotlib 帮助，但运气不佳。如果您有任何帮助或更好的方式来阅读此信息，我会喜欢反馈。

```
import numpy as n
import matplotlib.pyplot as p
import matplotlib.dates as d
import datetime as dt

fileobj=open("filename",'r')
data=fileobj.readlines()
fileobj.close()
time=n.empty(len(data))
for i in range(len(data)):
  strings=data[i].split(',')
  if i >5:
    some_time_dt = dt.datetime.strptime(str(strings[0]), '%Y-%m-%d %H:%M:%S')
    time = d.date2num(some_time_dt) 
```

示例数据：

```
"2013-02-28 16:53:30",1588,11.85,24.35,22.93,24.1,25.05,22.06,22.2,30.94,21.99,22.7,21.91,22‌​.02,21.79 ,21.72 
"2013-02-28 16:53:31",1589,11.85,24.35,23,24.12,25.05,22.09,22.25,31.19,21.97,22.71,21.91,22‌​.02,21.78 ,21.72
"2013-02-28 16:53:32",1590,11.85,24.35,22.98,24.12,25.05,22.12,22.3,31.35,21.98,22.68,21.9,2‌​2.01,21.7 4,21.69 
"2013-02-28 16:53:33",1591,11.85,24.35,22.95,24.14,25.06,22.15,22.33,31.49,21.96,22.67,21.87‌​,22,21.73 ,21.66 
```

2013 年 3 月 20 日，我能够绘制此图，但我需要知道如何摆脱打印的 UTC 标签，因为时间不是 UTC，而是 PST。我宁愿根本不显示时区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:43:46.857

一个简单的解决方案是解析文件两次，一次用于日期，一次用于数据：

```
import numpy as np
import datetime as dt

D = np.loadtxt("filename",delimiter=",",usecols=[0],dtype="str")
Z = np.loadtxt("filename",delimiter=",",usecols=range(1,10))

DATES = [dt.datetime.strptime(d,'"%Y-%m-%d %H:%M:%S"') for d in D] 
```

您还可以使用该`converters`参数将 lambda 函数传递给，`loadtxt()`以便它为您执行字符串到日期时间对象的转换。它不会为您节省任何代码行，我只是注意到它的一些变化：

```
datey = lambda x: dt.datetime.strptime(x,'"%Y-%m-%d %H:%M:%S"')

D = np.loadtxt("filename",delimiter=",",usecols=[0],
               dtype=dt.datetime,converters={0:datey})
Z = np.loadtxt("filename",delimiter=",",usecols=range(1,10)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:54:57.333

听起来您在解析日期时遇到错误。您使用的日期格式字符串可能有问题。

这里有一张表，其中包含可用于日期时间解析的所有选项：http: [//docs.python.org/2/library/datetime.html#strftime-strptime-behavior](http://docs.python.org/2/library/datetime.html#strftime-strptime-behavior)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:20:17.697

我通常用 pandas 做这种事情（见我上面的评论），但这是一个使用 Python 内置 CSV 模块的粗略解决方案。

```
import csv
import datetime
data = []
for row in csv.reader(open('file.txt')):
    row[0] = datetime.datetime.strptime(row[0], '%Y-%m-%d %H:%M:%S') # Parse date.
    row[1:] = map(float, row[1:]) # Convert data from strings to floats.
    data.append(row) 
```

有更花哨的方法，但这是一种简单的方法。

在上面的数据上运行这个，我得到

```
[[datetime.datetime(2013, 2, 28, 16, 53, 30), 1588.0, 11.85...], ...] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T19:25:59.303

您需要 `"` 从您的时间字符串中剥离！

如果每行只有一次，我会更改 for 循环，如下所示：

```
import time as time_module  # there's is a var named time
lineNumber = 0
for line in data:
    lineNumber += 1
    if line <= 5:
        continue  # skip the first 5 lines

    line = line.split(',')
    timeString = line[0].strip('"')
    print timeString
    print time_module.strptime(timeString, '%Y-%m-%d %H:%M:%S')
    time = d.date2num(time_module.strptime(timeString, '%Y-%m-%d %H:%M:%S')) 
```

# xml - 从 xml 模式中删除复杂类型。有人可以帮忙吗？

> ID：15440048
> 
> 赞同：1
> 
> 时间：2013-03-15T18:50:29.010
> 
> 标签：xml

需要从此代码中删除复杂类型。有人可以帮忙。我不断收到错误消息：当我尝试在 SSIS 包中使用 XML 源适配器时，它不支持混合内容或复杂类型

```
<?xml version="1.0"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="AMRDEF">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="ScheduleExecution">
          <xs:complexType>
            <xs:sequence>
              <xs:element minOccurs="0" name="ScheduleInfo">
                <xs:complexType>
                  <xs:attribute name="ServiceProvider" type="xs:string" use="optional" />
                  <xs:attribute name="Role" type="xs:string" use="optional" />
                  <xs:attribute name="Irn" type="xs:unsignedByte" use="optional" />
                  <xs:attribute name="Type" type="xs:unsignedByte" use="optional" />
                  <xs:attribute name="Tolerance" type="xs:unsignedShort" use="optional" />
                  <xs:attribute name="DestinationDir" type="xs:string" use="optional" />
                  <xs:attribute name="Name" type="xs:string" use="optional" />
                  <xs:attribute name="Description" type="xs:string" use="optional" />
                  <xs:attribute name="ObservesDst" type="xs:boolean" use="optional" />
                  <xs:attribute name="IsBilling" type="xs:boolean" use="optional" />
                  <xs:attribute name="TimeZoneIndex" type="xs:unsignedByte" use="optional" />
                  <xs:attribute name="Timezone" type="xs:string" use="optional" />
                  <xs:attribute name="TimeZoneOffset" type="xs:unsignedByte" use="optional" />
                </xs:complexType>
              </xs:element>
              <xs:element minOccurs="0" name="MetersNotRead">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element minOccurs="0" maxOccurs="unbounded" name="Meter">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element minOccurs="0" name="Status">
                            <xs:complexType>
                              <xs:attribute name="Code" type="xs:unsignedByte" use="optional" />
                              <xs:attribute name="Text" type="xs:string" use="optional" />
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                        <xs:attribute name="MeterIrn" type="xs:unsignedShort" use="optional" />
                        <xs:attribute name="MeterName" type="xs:string" use="optional" />
                        <xs:attribute name="IsActive" type="xs:boolean" use="optional" />
                        <xs:attribute name="SerialNumber" type="xs:string" use="optional" />
                        <xs:attribute name="MeterType" type="xs:string" use="optional" />
                        <xs:attribute name="Description" type="xs:string" use="optional" />
                        <xs:attribute name="InstallDate" type="xs:string" use="optional" />
                        <xs:attribute name="RemovalDate" type="xs:string" use="optional" />
                        <xs:attribute name="AccountIdent" type="xs:string" use="optional" />
                        <xs:attribute name="AccountName" type="xs:string" use="optional" />
                        <xs:attribute name="SdpIdent" type="xs:string" use="optional" />
                        <xs:attribute name="Location" type="xs:string" use="optional" />
                        <xs:attribute name="TimeZoneIndex" type="xs:unsignedByte" use="optional" />
                        <xs:attribute name="Timezone" type="xs:string" use="optional" />
                        <xs:attribute name="TimeZoneOffset" type="xs:unsignedShort" use="optional" />
                        <xs:attribute name="ObservesDaylightSavings" type="xs:boolean" use="optional" />
                        <xs:attribute name="MediaType" type="xs:string" use="optional" />
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element minOccurs="0" name="MetersRead">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element minOccurs="0" maxOccurs="unbounded" name="Meter">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element minOccurs="0" name="Status">
                            <xs:complexType>
                              <xs:attribute name="Code" type="xs:unsignedByte" use="optional" />
                              <xs:attribute name="Text" type="xs:string" use="optional" />
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                        <xs:attribute name="MeterIrn" type="xs:unsignedShort" use="optional" />
                        <xs:attribute name="MeterName" type="xs:string" use="optional" />
                        <xs:attribute name="IsActive" type="xs:boolean" use="optional" />
                        <xs:attribute name="SerialNumber" type="xs:string" use="optional" />
                        <xs:attribute name="MeterType" type="xs:string" use="optional" />
                        <xs:attribute name="Description" type="xs:string" use="optional" />
                        <xs:attribute name="InstallDate" type="xs:string" use="optional" />
                        <xs:attribute name="RemovalDate" type="xs:string" use="optional" />
                        <xs:attribute name="AccountIdent" type="xs:string" use="optional" />
                        <xs:attribute name="AccountName" type="xs:string" use="optional" />
                        <xs:attribute name="SdpIdent" type="xs:string" use="optional" />
                        <xs:attribute name="Location" type="xs:string" use="optional" />
                        <xs:attribute name="TimeZoneIndex" type="xs:unsignedByte" use="optional" />
                        <xs:attribute name="Timezone" type="xs:string" use="optional" />
                        <xs:attribute name="TimeZoneOffset" type="xs:unsignedByte" use="optional" />
                        <xs:attribute name="ObservesDaylightSavings" type="xs:boolean" use="optional" />
                        <xs:attribute name="MediaType" type="xs:string" use="optional" />
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element minOccurs="0" name="ErrorSection">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element minOccurs="0" maxOccurs="unbounded" name="Meter">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element minOccurs="0" name="Status">
                            <xs:complexType>
                              <xs:attribute name="Code" type="xs:unsignedByte" use="optional" />
                              <xs:attribute name="Text" type="xs:string" use="optional" />
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                        <xs:attribute name="MeterIrn" type="xs:unsignedShort" use="optional" />
                        <xs:attribute name="MeterName" type="xs:string" use="optional" />
                        <xs:attribute name="IsActive" type="xs:boolean" use="optional" />
                        <xs:attribute name="SerialNumber" type="xs:string" use="optional" />
                        <xs:attribute name="MeterType" type="xs:string" use="optional" />
                        <xs:attribute name="Description" type="xs:string" use="optional" />
                        <xs:attribute name="InstallDate" type="xs:string" use="optional" />
                        <xs:attribute name="RemovalDate" type="xs:string" use="optional" />
                        <xs:attribute name="AccountIdent" type="xs:unsignedInt" use="optional" />
                        <xs:attribute name="AccountName" type="xs:string" use="optional" />
                        <xs:attribute name="SdpIdent" type="xs:unsignedByte" use="optional" />
                        <xs:attribute name="Location" type="xs:string" use="optional" />
                        <xs:attribute name="TimeZoneIndex" type="xs:unsignedByte" use="optional" />
                        <xs:attribute name="Timezone" type="xs:string" use="optional" />
                        <xs:attribute name="TimeZoneOffset" type="xs:unsignedByte" use="optional" />
                        <xs:attribute name="ObservesDaylightSavings" type="xs:boolean" use="optional" />
                        <xs:attribute name="MediaType" type="xs:string" use="optional" />
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element minOccurs="0" name="TamperSection">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element minOccurs="0" maxOccurs="unbounded" name="Meter">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element minOccurs="0" name="Status">
                            <xs:complexType>
                              <xs:attribute name="Code" type="xs:unsignedByte" use="optional" />
                              <xs:attribute name="Text" type="xs:string" use="optional" />
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                        <xs:attribute name="MeterIrn" type="xs:unsignedShort" use="optional" />
                        <xs:attribute name="MeterName" type="xs:string" use="optional" />
                        <xs:attribute name="IsActive" type="xs:boolean" use="optional" />
                        <xs:attribute name="SerialNumber" type="xs:string" use="optional" />
                        <xs:attribute name="MeterType" type="xs:string" use="optional" />
                        <xs:attribute name="Description" type="xs:string" use="optional" />
                        <xs:attribute name="InstallDate" type="xs:string" use="optional" />
                        <xs:attribute name="RemovalDate" type="xs:string" use="optional" />
                        <xs:attribute name="AccountIdent" type="xs:string" use="optional" />
                        <xs:attribute name="AccountName" type="xs:string" use="optional" />
                        <xs:attribute name="SdpIdent" type="xs:string" use="optional" />
                        <xs:attribute name="Location" type="xs:string" use="optional" />
                        <xs:attribute name="TimeZoneIndex" type="xs:unsignedByte" use="optional" />
                        <xs:attribute name="Timezone" type="xs:string" use="optional" />
                        <xs:attribute name="TimeZoneOffset" type="xs:unsignedByte" use="optional" />
                        <xs:attribute name="ObservesDaylightSavings" type="xs:boolean" use="optional" />
                        <xs:attribute name="MediaType" type="xs:string" use="optional" />
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
            <xs:attribute name="Irn" type="xs:unsignedByte" use="optional" />
            <xs:attribute name="started" type="xs:string" use="optional" />
            <xs:attribute name="finished" type="xs:string" use="optional" />
            <xs:attribute name="Initiator" type="xs:string" use="optional" />
          </xs:complexType>
        </xs:element>
        <xs:element minOccurs="0" maxOccurs="unbounded" name="MeterReadings">
          <xs:complexType>
            <xs:sequence>
              <xs:choice maxOccurs="unbounded">
                <xs:element minOccurs="0" name="Meter">
                  <xs:complexType>
                    <xs:attribute name="MeterIrn" type="xs:unsignedShort" use="optional" />
                    <xs:attribute name="MeterName" type="xs:string" use="optional" />
                    <xs:attribute name="IsActive" type="xs:boolean" use="optional" />
                    <xs:attribute name="SerialNumber" type="xs:string" use="optional" />
                    <xs:attribute name="MeterType" type="xs:string" use="optional" />
                    <xs:attribute name="Description" type="xs:string" use="optional" />
                    <xs:attribute name="InstallDate" type="xs:string" use="optional" />
                    <xs:attribute name="RemovalDate" type="xs:string" use="optional" />
                    <xs:attribute name="AccountIdent" type="xs:string" use="optional" />
                    <xs:attribute name="AccountName" type="xs:string" use="optional" />
                    <xs:attribute name="SdpIdent" type="xs:string" use="optional" />
                    <xs:attribute name="Location" type="xs:string" use="optional" />
                    <xs:attribute name="TimeZoneIndex" type="xs:unsignedByte" use="optional" />
                    <xs:attribute name="Timezone" type="xs:string" use="optional" />
                    <xs:attribute name="TimeZoneOffset" type="xs:unsignedByte" use="optional" />
                    <xs:attribute name="ObservesDaylightSavings" type="xs:boolean" use="optional" />
                    <xs:attribute name="MediaType" type="xs:string" use="optional" />
                  </xs:complexType>
                </xs:element>
                <xs:element minOccurs="0" name="Clock">
                  <xs:complexType>
                    <xs:attribute name="MeterTime" type="xs:string" use="optional" />
                    <xs:attribute name="ServerTime" type="xs:string" use="optional" />
                    <xs:attribute name="DaylightAdjustmentInEffectAtMeter" type="xs:boolean" use="optional" />
                    <xs:attribute name="ActiveSeason" type="xs:string" use="optional" />
                    <xs:attribute name="ActiveTier" type="xs:string" use="optional" />
                    <xs:attribute name="ActiveDayType" type="xs:string" use="optional" />
                  </xs:complexType>
                </xs:element>
                <xs:element minOccurs="0" name="ReadingQualityIndicator">
                  <xs:complexType>
                    <xs:attribute name="Name" type="xs:string" use="optional" />
                    <xs:attribute name="Value" type="xs:boolean" use="optional" />
                  </xs:complexType>
                </xs:element>
                <xs:element minOccurs="0" maxOccurs="unbounded" name="ConsumptionData">
                  <xs:complexType>
                    <xs:sequence>
                      <xs:element minOccurs="0" name="ConsumptionSpec">
                        <xs:complexType>
                          <xs:attribute name="UOM" type="xs:string" use="optional" />
                          <xs:attribute name="Direction" type="xs:string" use="optional" />
                          <xs:attribute name="TouBucket" type="xs:string" use="optional" />
                          <xs:attribute name="MeasurementPeriod" type="xs:string" use="optional" />
                          <xs:attribute name="Multiplier" type="xs:decimal" use="optional" />
                        </xs:complexType>
                      </xs:element>
                      <xs:element minOccurs="0" name="Reading">
                        <xs:complexType>
                          <xs:attribute name="TimeStamp" type="xs:string" use="optional" />
                          <xs:attribute name="Value" type="xs:decimal" use="optional" />
                        </xs:complexType>
                      </xs:element>
                    </xs:sequence>
                  </xs:complexType>
                </xs:element>
                <xs:element minOccurs="0" maxOccurs="unbounded" name="MaxDemandData">
                  <xs:complexType>
                    <xs:sequence>
                      <xs:element minOccurs="0" name="MaxDemandSpec">
                        <xs:complexType>
                          <xs:attribute name="UOM" type="xs:string" use="optional" />
                          <xs:attribute name="Direction" type="xs:string" use="optional" />
                          <xs:attribute name="TouBucket" type="xs:string" use="optional" />
                          <xs:attribute name="MeasurementPeriod" type="xs:string" use="optional" />
                          <xs:attribute name="Multiplier" type="xs:decimal" use="optional" />
                        </xs:complexType>
                      </xs:element>
                      <xs:element minOccurs="0" name="Reading">
                        <xs:complexType>
                          <xs:attribute name="TimeStamp" type="xs:string" use="optional" />
                          <xs:attribute name="Value" type="xs:decimal" use="optional" />
                        </xs:complexType>
                      </xs:element>
                    </xs:sequence>
                  </xs:complexType>
                </xs:element>
                <xs:element minOccurs="0" maxOccurs="unbounded" name="CumulativeDemandData">
                  <xs:complexType>
                    <xs:sequence>
                      <xs:element minOccurs="0" name="CumulativeDemandSpec">
                        <xs:complexType>
                          <xs:attribute name="UOM" type="xs:string" use="optional" />
                          <xs:attribute name="Direction" type="xs:string" use="optional" />
                          <xs:attribute name="TouBucket" type="xs:string" use="optional" />
                          <xs:attribute name="MeasurementPeriod" type="xs:string" use="optional" />
                          <xs:attribute name="Multiplier" type="xs:decimal" use="optional" />
                        </xs:complexType>
                      </xs:element>
                      <xs:element minOccurs="0" name="Reading">
                        <xs:complexType>
                          <xs:attribute name="Value" type="xs:unsignedShort" use="optional" />
                          <xs:attribute name="TimeStamp" type="xs:string" use="optional" />
                        </xs:complexType>
                      </xs:element>
                    </xs:sequence>
                  </xs:complexType>
                </xs:element>
                <xs:element minOccurs="0" name="Message">
                  <xs:complexType>
                    <xs:attribute name="Text" type="xs:string" use="optional" />
                  </xs:complexType>
                </xs:element>
                <xs:element minOccurs="0" name="DemandResetCount">
                  <xs:complexType>
                    <xs:attribute name="Count" type="xs:unsignedByte" use="optional" />
                    <xs:attribute name="TimeStamp" type="xs:string" use="optional" />
                    <xs:attribute name="UOM" type="xs:string" use="optional" />
                  </xs:complexType>
                </xs:element>
                <xs:element minOccurs="0" name="Statuses">
                  <xs:complexType>
                    <xs:sequence>
                      <xs:element minOccurs="0" maxOccurs="unbounded" name="Status">
                        <xs:complexType>
                          <xs:attribute name="Id" type="xs:unsignedShort" use="optional" />
                          <xs:attribute name="Name" type="xs:string" use="optional" />
                          <xs:attribute name="Category" type="xs:string" use="optional" />
                          <xs:attribute name="Type" type="xs:string" use="optional" />
                          <xs:attribute name="Value" type="xs:string" use="optional" />
                        </xs:complexType>
                      </xs:element>
                    </xs:sequence>
                  </xs:complexType>
                </xs:element>
                <xs:element minOccurs="0" name="OutageCountSummary">
                  <xs:complexType>
                    <xs:sequence>
                      <xs:element minOccurs="0" name="OutageCount">
                        <xs:complexType>
                          <xs:attribute name="ReadingTime" type="xs:string" use="optional" />
                          <xs:attribute name="Value" type="xs:unsignedByte" use="optional" />
                          <xs:attribute name="PreviousReadingTime" type="xs:string" use="optional" />
                          <xs:attribute name="PreviousValue" type="xs:unsignedByte" use="optional" />
                        </xs:complexType>
                      </xs:element>
                    </xs:sequence>
                  </xs:complexType>
                </xs:element>
                <xs:element minOccurs="0" maxOccurs="unbounded" name="InstrumentationValue">
                  <xs:complexType>
                    <xs:attribute name="Name" type="xs:string" use="optional" />
                    <xs:attribute name="Value" type="xs:decimal" use="optional" />
                    <xs:attribute name="Timestamp" type="xs:string" use="optional" />
                    <xs:attribute name="Phase" type="xs:string" use="optional" />
                  </xs:complexType>
                </xs:element>
                <xs:element minOccurs="0" name="ReverseEnergySummary">
                  <xs:complexType>
                    <xs:sequence>
                      <xs:element minOccurs="0" name="ReverseEnergy">
                        <xs:complexType>
                          <xs:attribute name="CurrentValue" type="xs:unsignedShort" use="optional" />
                          <xs:attribute name="PreviousValue" type="xs:unsignedShort" use="optional" />
                        </xs:complexType>
                      </xs:element>
                    </xs:sequence>
                  </xs:complexType>
                </xs:element>
                <xs:element minOccurs="0" name="EventData">
                  <xs:complexType>
                    <xs:sequence>
                      <xs:element minOccurs="0" name="EventSpec">
                        <xs:complexType>
                          <xs:attribute name="Type" type="xs:string" use="optional" />
                          <xs:attribute name="Category" type="xs:string" use="optional" />
                        </xs:complexType>
                      </xs:element>
                      <xs:element minOccurs="0" name="Event">
                        <xs:complexType mixed="true">
                          <xs:sequence minOccurs="0">
                            <xs:element minOccurs="0" name="EventAttribute">
                              <xs:complexType>
                                <xs:attribute name="Name" type="xs:string" use="optional" />
                                <xs:attribute name="Value" type="xs:unsignedShort" use="optional" />
                              </xs:complexType>
                            </xs:element>
                          </xs:sequence>
                          <xs:attribute name="DiscoveredAt" type="xs:string" use="optional" />
                          <xs:attribute name="Source" type="xs:string" use="optional" />
                          <xs:attribute name="EventInfo" type="xs:string" use="optional" />
                          <xs:attribute name="TimeStamp" type="xs:string" use="optional" />
                          <xs:attribute name="EndTime" type="xs:string" use="optional" />
                        </xs:complexType>
                      </xs:element>
                    </xs:sequence>
                  </xs:complexType>
                </xs:element>
              </xs:choice>
            </xs:sequence>
            <xs:attribute name="Irn" type="xs:unsignedShort" use="optional" />
            <xs:attribute name="Source" type="xs:string" use="optional" />
            <xs:attribute name="SourceName" type="xs:string" use="optional" />
            <xs:attribute name="SourceIrn" type="xs:unsignedShort" use="optional" />
            <xs:attribute name="Initiator" type="xs:string" use="optional" />
            <xs:attribute name="Purpose" type="xs:string" use="optional" />
            <xs:attribute name="CollectionTime" type="xs:string" use="optional" />
          </xs:complexType>
        </xs:element>
      </xs:sequence>
      <xs:attribute name="Purpose" type="xs:string" use="optional" />
      <xs:attribute name="version" type="xs:decimal" use="optional" />
      <xs:attribute name="CreationTime" type="xs:string" use="optional" />
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:10:52.387

你不能那样做。A`simpleType`只能包含一个文本节点。如果不使用声明，就不可能在 XSD 中声明嵌套元素和属性`complexType`。

# html - 父灰色 div 隐藏了石灰框的底部

> ID：15440049
> 
> 赞同：-2
> 
> 时间：2013-03-15T18:50:35.807
> 
> 标签：html, css, position

父灰色 div**隐藏了石灰框的底部**。

*   我可以保持石灰盒的底部可见吗？
*   **使用溢出**的正确方法是什么：隐藏；这里？

保存父灰色框的 100% 宽度也很重要。

[示例 1 - 放大问题](http://jsfiddle.net/DbJSf/1/)

[示例 2 - 缩小问题](http://jsfiddle.net/3GQkq/)

**我们怎样才能使灰线 100% 宽度（放大和缩小）？**

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

<style>
/* Start BG RECT */
.bg-rect {
    position: absolute; 
    top: 50px;
    left:0; right:0;    /* Required to be 100% 100% */
    min-width: 980px;   /* max for iPad */  
    height: 263px;
}

#bg-rect-important {
    overflow: hidden;   /* Disable right bg breaking by words on the right! */
    /* overflow hidden: disallows child be taller then parent?! */
    background-color: #656565;
}

/* Start BASE RECT */
.base-rect {
    position: relative; /* margin: auto works only with position: relative  */ 
    margin: 0 auto;     /* Centralize! */
/*!SPACE>*/top:32px; width:940px;
    /*left: -300px; /* unfortunately scroll doen't work */
}

#base-rect-lime {
    background-color: #3F3;
    height:249px;
}

    /* Start LIME RECT : left, right */
    #left-text {
        position:absolute;
        left:-200px; 
        width:200px; height:218px;
    }
    #right-text {
        position:absolute;
        right:-200px;
        width:200px; height:218px;
    }
    /* End LIME RECT : left, right */

/* End BASE RECT */
/* End BG RECT */
</style>

</head>

<body>

<div class="bg-rect" id="bg-rect-important">
    <div class="base-rect" id="base-rect-lime">
        <div id="left-text"></div>       
        <div id="right-text"></div>
    </div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:02:17.893

我们认为，

```
#bg-rect-important {
background-color: #656565;
} 
```

将使您的石灰盒的底部可见

它还节省了父灰盒的 100% 宽度

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:13:11.637

我很确定这就是你想要的：

```
#bg-rect-important {
    overflow-y: auto;
    overflow-x: hidden;
    background-color: #656565;
    width: 100%;
} 
```

在这里小提琴 - [http://jsfiddle.net/h2E7v/](http://jsfiddle.net/h2E7v/)

# opengl - glGetShaderiv() 中的“iv”代表什么？

> ID：15440050
> 
> 赞同：31
> 
> 时间：2013-03-15T18:50:37.233
> 
> 标签：opengl

`iv`末尾的`glGetShaderiv()`代表什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-15T19:04:17.177

它描述了返回的参数，在本例中是一个**ints****向量**。例如，相同的命名法用于更新整数或浮点数的向量。**`glTexParameteriv``glTexParameterfv`**

 *** * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-28T10:09:18.007

`OpenGL`有一些关于它们在库中的例程的有组织的命名约定。

**前缀**

所有例程`gl`前面都有一个。您必须用`glu`and观察到类似的事情`glut`。一些供应商库也有前缀，就像人们在硬件功能标志中`NVidia`放置了前缀一样。`NV_`

**后缀**

后缀通常指示该方法采用何种参数。

*   一些指定函数的上下文。例如`1D`，`2D`或`3D` 例如`glTexCoord2D`

*   类型的值类型是函数的参数。例如`glTranslatef`接受`GLfloat`参数（注意即使数据类型也遵循相同的命名约定）并`glTranslated`接受`GLdouble`.

*   顶点的来源（通常当有太多顶点并将它们存储在单个数组中时）采用您提到的方法： `glGetShaderiv`是一个函数，采用参数为`shaders`，其中数据类型为，数据`GLint`源为`vector`( `v`) .

您可以采用此类约定来轻松识别哪种方法采用哪种参数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-15T19:03:11.270

它表示您想要获得一个整数数组的值。函数参考可以在[这里](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glGetShaderiv.xml)找到，如您所见，返回参数是 a `GLint *`。这与诸如 的函数形成对比`glGetInternalFormati64v`，后者的返回参数为`GLint64 *`。我相信，但目前无法定位，已经有函数使用`fv`后缀来表示浮点数，可能还有其他函数。**

# c++ - 最大数 < x?

> ID：15440052
> 
> 赞同：6
> 
> 时间：2013-03-15T18:50:38.403
> 
> 标签：c++, templates, math, stl, generic-programming

在 C++ 中，假设我有许多`x`类型`T`，可以是整数或浮点类型。我想找到最多的`y`类型。该解决方案需要模板化，以透明地处理整数和浮点数。您可能会忽略已经是可以在 a 中表示的最小数字的边缘情况。`T``y < x``x``T`

**可能的用例：**这个问题被标记为过于本地化，因此我想提供一个我认为更通用的用例。请注意，我不是 OP 的原作者。

考虑这个结构：

```
struct lower_bound {
    lower_bound(double value, bool open) : value(open? value+0.1 : value) {}
    double value;
    bool operator()(double x) { return x >= value; }
}; 
```

此类模拟可以打开或关闭的下限。当然，在现实（双关语）生活中我们不能这样做。**由于S**都是实数，因此无法计算流动（或至少相当棘手） 。

![在此处输入图像描述](../Images/b58300043afb9c8cc8519ce0534bdf75.png)

然而，当**S**是浮点数的集合时，这是一个非常有效的原则，因为我们本质上是在处理一个可数集合；那么就没有开放或封闭的界限这样的东西了。也就是说，>= 可以用 > 来定义，就像在 lower_bound 类中所做的那样。

为简化代码，我使用 +0.1 来模拟开放的下限。当然，0.1 是一个粗略的值，因为在浮点表示中可能存在值 z 使得 value < z <= value+0.1 或 value+0.1 == value。因此@brett-hale 的回答非常有用:)

您可能会考虑另一种更简单的解决方案：

```
struct lower_bound {
    lower_bound(double value, bool open) : open(open), value(value) {}
    bool open;
    double value;
    bool operator()(double x) { return (open ? x > value : x>=value); }

}; 
```

但是，由于 sizeof(Lower_bound) 较大，因此效率较低，并且 operator() 需要执行更复杂的语句。第一个实现非常高效，也可以简单地实现为 double，而不是结构。从技术上讲，使用第二种实现的唯一原因是因为您假设双精度数是连续的，而事实并非如此，我想在可预见的将来它不会出现在任何地方。

我希望我已经创建并解释了一个有效的用例，并且我没有冒犯原作者。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T19:18:23.920

如果你有 C++11，你可以使用`std::nextafter`in `<cmath>`：

```
if (std::is_integral<T>::value)
    return (x - 1);
else
    return std::nextafter(x, - std::numeric_limits<T>::infinity()); 
```

# python - 如何递归打印每个文件或文件夹的路径名

> ID：15440053
> 
> 赞同：0
> 
> 时间：2013-03-15T18:50:51.490
> 
> 标签：python, python-3.x

这是我的代码和错误！请给我一个提示

```
import os
def traverse(path, d):
    for item in os.listdir(path):
        item = os.path.join(path, d)
        try:
            traverse(path,d)
        except:
            print (path) 
```

我的错误：

```
traverse ("test",0)
Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    traverse ("test",0)
  File "C:\Users\Phuchu\Desktop\Python\homework8.py", line 65, in traverse
    for item in os.listdir(path):
FileNotFoundError: [WinError 3] The system cannot find the path specified: 'test\\*.*' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:41:38.313

使用 os.walk

```
import os

def traverse(current_dir):
    for root, dirs, files in os.walk(current_dir):
        #print all files  recursively
        for file in files:
             print os.path.join(root,file)
         #print all folders recursively
        for dir in dirs:
             print os.path.join(root,dir) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:15:25.177

您可能更喜欢使用更 Pythonic 的[os.walk](http://docs.python.org/2/library/os.html#os.walk)。它将递归变成一个简单易懂的循环，并为您管理遍历目录。

# java - 在尝试将 gps 坐标传递给 web 服务时遇到泄漏窗口

> ID：15440055
> 
> 赞同：0
> 
> 时间：2013-03-15T18:50:54.177
> 
> 标签：java, android, web-services

我的应用程序有问题，我正在获取我的 android 手机的 gps 位置，然后在获得坐标后，我想将该数据传递给我的 web 服务，但我遇到了这个错误，它在 localhost 中运行完美。

这些是我得到的错误：

**

```
03-15 18:43:45.856: E/WindowManager(1906): Activity com.example.projectthesis.LocationPassing has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@412dd820 that was originally added here
03-15 18:43:45.856: E/WindowManager(1906): android.view.WindowLeaked: Activity com.example.projectthesis.LocationPassing has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@412dd820 that was originally added here
03-15 18:43:45.856: E/WindowManager(1906):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:344)
03-15 18:43:45.856: E/WindowManager(1906):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
03-15 18:43:45.856: E/WindowManager(1906):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
03-15 18:43:45.856: E/WindowManager(1906):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
03-15 18:43:45.856: E/WindowManager(1906):  at android.view.Window$LocalWindowManager.addView(Window.java:537)
03-15 18:43:45.856: E/WindowManager(1906):  at android.app.Dialog.show(Dialog.java:278)
03-15 18:43:45.856: E/WindowManager(1906):  at com.example.projectthesis.LocationPassing$phpconnect.onPreExecute(LocationPassing.java:74)
03-15 18:43:45.856: E/WindowManager(1906):  at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:561)
03-15 18:43:45.856: E/WindowManager(1906):  at android.os.AsyncTask.execute(AsyncTask.java:511)
03-15 18:43:45.856: E/WindowManager(1906):  at com.example.projectthesis.LocationPassing.onCreate(LocationPassing.java:58)
03-15 18:43:45.856: E/WindowManager(1906):  at android.app.Activity.performCreate(Activity.java:4465)
03-15 18:43:45.856: E/WindowManager(1906):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
03-15 18:43:45.856: E/WindowManager(1906):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
03-15 18:43:45.856: E/WindowManager(1906):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
03-15 18:43:45.856: E/WindowManager(1906):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
03-15 18:43:45.856: E/WindowManager(1906):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
03-15 18:43:45.856: E/WindowManager(1906):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-15 18:43:45.856: E/WindowManager(1906):  at android.os.Looper.loop(Looper.java:137)
03-15 18:43:45.856: E/WindowManager(1906):  at android.app.ActivityThread.main(ActivityThread.java:4424)
03-15 18:43:45.856: E/WindowManager(1906):  at java.lang.reflect.Method.invokeNative(Native Method)
03-15 18:43:45.856: E/WindowManager(1906):  at java.lang.reflect.Method.invoke(Method.java:511)
03-15 18:43:45.856: E/WindowManager(1906):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-15 18:43:45.856: E/WindowManager(1906):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-15 18:43:45.856: E/WindowManager(1906):  at dalvik.system.NativeStart.main(Native Method) 
```

**

这是我的课：

**

```
public class LocationPassing extends Activity{
    TextView txtLatitude;
    TextView txtLongitude;

    public static String strLat;
    public static String strLong;

    // ** This declarations was for passing of data to web service
        // Progress Dialog
        private ProgressDialog pDialog;
        // JSONParser Object creation
        JSONParser jsonParser = new JSONParser();
        // url to pass location to web
            private static String url_create_product = "xxxxxxxxxxxxxxxxxxxxxxxxxxxx/location_adding.php";
         //private static String url_create_product = "http://10.0.2.2/TheCalling/location_adding.php";

        // JSON Node names
        private static final String TAG_SUCCESS = "success";
         private static final String TAG_PID = "pid";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.locationpassing);

        txtLatitude = (TextView) findViewById(R.id.txtLatitude);
        txtLongitude = (TextView) findViewById(R.id.txtLongitude);

        strLat = Double.toString(Mapping2.ILatitude);
        strLong = Double.toString(Mapping2.ILongitude);

        this.txtLatitude.setText(strLat);
        this.txtLongitude.setText(strLong);

        new phpconnect().execute();

    }

    class phpconnect extends AsyncTask<String, String, String> {
        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(LocationPassing.this);
            pDialog.setMessage("Logging in..");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }
        @Override
        protected String doInBackground(String... args) {
            String strLatitude = strLat;
            String strLongitude = strLong;

            String.valueOf(strLatitude);
            String.valueOf(strLongitude);

            // Building parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("latitude", strLatitude));
            params.add(new BasicNameValuePair("longitude", strLongitude));
            // getting JSON Object
            // Note that create product url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                    "POST", params);
            // check log cat fro response
            Log.d("Create Response", json.toString());
            try {
                int success = json.getInt(TAG_SUCCESS);
                if (success == 1) {
                    // successfully updated
                    Intent i = new Intent(getApplicationContext(),
                            Mapping2.class);

                    startActivity(i);
                    // closing this screen
                    finish();
                } else {
                    // failed to create product
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }
            return null;
        }
    }
} 
```

**

提前谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:56:42.430

您在 中创建一个对话框，`onPreExecute`但不要在 中将其关闭`onPostExecute`。

您`AysncTask`完成并`pDialog`超出范围（它已被破坏），但窗口仍在屏幕上，因此已泄漏。

您还需要在开始另一个活动或调用`finish()`.

还要添加它，`onPause()`以便在您的活动被强制到背景时将其关闭并重新显示它，如果您需要，在`onResume()`

```
@Override
public void onPause(){

    super.onPause();

    if(pDialog != null){
        pDialog.dismiss();
    }        

    ...

} 
```

基本上，如果您的任务完成或您离开活动，请不要将对话框留在屏幕上。

# sql-server - 将 Access 项目升级到 SQL Server 后，我可以删除 *_local 表吗？

> ID：15440060
> 
> 赞同：1
> 
> 时间：2013-03-15T18:51:15.190
> 
> 标签：sql-server, ms-access, ms-access-2010

我将 Access 2010 项目（.accdb 文件）升级到 SQL Server。我只移动了表格，现在表格列表显示了链接的表格及其本地副本（例如 tbl_local）。

我可以删除这些本地表还是用于某些用途？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:54:10.287

访问是基于文件的。复制并删除本地文件。它们应该不需要，但如果有问题，您可以从副本中导入。如果您启用了“曲目名称自动更正”，则可能某些内容已更改为使用重命名的表格。

# java - UnknownHostException 访问 virtualBox 上的服务

> ID：15440062
> 
> 赞同：2
> 
> 时间：2013-03-15T18:51:18.823
> 
> 标签：java, linux, ubuntu

Oracle NoSQL 是一个应该托管在 Linux 上的数据库，所以我有一个在 Oracle VM VirtualBox 中运行的虚拟 Ubuntu。

当您运行 KvStore for Oracle NoSQL 时，它使用端口 5000 访问数据库，使用端口 5001 访问管理控制台。从我的电脑上，我可以访问在 linux 虚拟机上运行的管理控制台，如下所示：

```
http://192.168.0.25:5001/ 
```

其中 192.168.0.25 是我从 linux 机器的 ifconfig 命令获得的 inet 地址。

但是，如果我尝试从 java 连接到数据库，则将主机和端口号传递给 java，如下所示：

```
KVStoreConfig kvconfig = new KVStoreConfig("kvstore", "192.168.0.25:5000"); 
```

我收到以下错误：

```
Exception in thread "main" oracle.kv.FaultException: Could not contact any RepNode at: [192.168.0.25:5000] (11.2.2.0.26)
Fault class name: oracle.kv.KVStoreException
    at oracle.kv.KVStoreFactory.getStore(KVStoreFactory.java:123)
    at nosql.Test.main(Test.java:18)
Caused by: oracle.kv.KVStoreException: Could not contact any RepNode at: [192.168.0.25:5000]
    at oracle.kv.impl.util.TopologyLocator.getInitialTopology(TopologyLocator.java:226)
    at oracle.kv.impl.util.TopologyLocator.get(TopologyLocator.java:85)
    at oracle.kv.impl.api.RequestDispatcherImpl.<init>(RequestDispatcherImpl.java:285)
    at oracle.kv.KVStoreFactory.getStore(KVStoreFactory.java:118)
    ... 1 more
Caused by: java.rmi.UnknownHostException: Unknown host: coraythan-VirtualBox; nested exception is: 
    java.net.UnknownHostException: coraythan-VirtualBox
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:616)
    at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:216)
    at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:202)
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:128)
    at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:194)
    at java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:148)
    at com.sun.proxy.$Proxy0.getSerialVersion(Unknown Source)
    at oracle.kv.impl.util.registry.RemoteAPI.<init>(RemoteAPI.java:60)
    at oracle.kv.impl.rep.admin.RepNodeAdminAPI.<init>(RepNodeAdminAPI.java:63)
    at oracle.kv.impl.rep.admin.RepNodeAdminAPI.wrap(RepNodeAdminAPI.java:70)
    at oracle.kv.impl.util.TopologyLocator.getInitialTopology(TopologyLocator.java:191)
    ... 4 more
Caused by: java.net.UnknownHostException: coraythan-VirtualBox
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:178)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at oracle.kv.impl.util.registry.ClientSocketFactory.createSocket(ClientSocketFactory.java:300)
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:613)
    ... 14 more 
```

当我在我的普通计算机上托管 KvStore 并尝试使用 java 连接到它（使用普通计算机的 IP 地址）时，我可以让它正常工作。

另一个奇怪的事情是，如果我在虚拟机中，我可以通过以下方式访问管理员：

```
coraythan-virtualbox:5001 
```

但是，如果我尝试从我的主计算机上执行此操作，它会给我一个“找不到”错误。

我尝试将我的 java 连接更改为 coraythan-virtualbox:5000，但这也不起作用。

有谁知道我在这里做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:11:54.773

问题是 linux 计算机没有自动向我公司的网络注册其网络名称。我必须让网络管理员手动为计算机添加网络名称。KVStore 需要使用它看起来的网络名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:59:29.123

您正在使用命名地址创建套接字，即 DNS 不知道这样的名称。尝试将其更改为IP地址。

[未知主机异常](http://docs.oracle.com/javase/7/docs/api/java/net/UnknownHostException.html)

> 抛出表示无法确定主机的 IP 地址。

# jquery - jquery mobile 和 asp.net mvc post

> ID：15440066
> 
> 赞同：0
> 
> 时间：2013-03-15T18:51:30.430
> 
> 标签：jquery, asp.net-mvc, jquery-mobile

我有一个使用 jQuery mobile 的基本 MVC4 页面，我想做的只是一个 POST 方法，通常在 ASP.Net MVC 中，它只会查看我的控制器以获取我的帖子，例如在我的 MVC 页面上一个简单的提交按钮：

```
<input type="submit" value="Save"  data-theme="b" /> 
```

我希望它调用控制器 post 方法

```
 [HttpPost]
        public ActionResult MobileEdit(MobileClient client)
        {..} 
```

但它没有调用这个actionresult，我认为这是由于jQuery拦截了post方法并想做一个AJAX调用？

所以我的问题是我需要更改/添加什么来调用我的控制器发布方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:53:49.877

尝试将 FormMethod.Post 添加到您的表单中

```
using (Html.BeginForm("method","controller",FormMethod.Post)) 
```

您可以尝试的另一件事是使用保存按钮将`data-ajax="false"`或`rel="external"`放在`<a>`将您带到此页面的标签上

# haskell - 为什么“ZonedTime”没有“Eq”或“Ord”实例

> ID：15440068
> 
> 赞同：8
> 
> 时间：2013-03-15T18:51:31.740
> 
> 标签：haskell, time

在[`time`](http://hackage.haskell.org/package/time)包中，我们有`ZonedTime`代表和`LocalTime`乘积的类型。有和的实例，但没有。在我看来，仍然应该从绝对参考系中比较 s —— 至少尽可能多地比较s 。`localDay :: Day``localTimeOfDay :: TimeOfDay``LocalTime``Eq``Ord``ZonedTime``ZonedTime``LocalTime`

为什么也没有`ZonedTime`和`Eq`实例`Ord`？

值得注意的是，`time`重写[`thyme`](http://hackage.haskell.org/package/thyme)实际上确实有`Eq`和`Ord`实例，尽管除非需要，否则我不希望使用非标准时间类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T19:17:22.050

我只能推测原因是不完全清楚应该如何比较具有不同区域的时间，如果这是预期的，很容易将它们转换为`UTCTime`使用和比较结果。`zonedTimeToUTC`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:23:14.110

也许这是由于夏令时？就像，有时英国时间 = 法国时间，但在一年中的其他时间有 1 小时的差异......

# javascript - 使用 onmouseover 调用函数

> ID：15440069
> 
> 赞同：0
> 
> 时间：2013-03-15T18:51:40.260
> 
> 标签：javascript, onmouseover

我的网页上有 id 的圈子`circle`。现在，我想要的是当鼠标悬停在圆圈上时，应该显示一条消息。这是我在 javascript 文件中的代码：

```
document.getElementById("circle").onmouseover=function(){
    var information = document.getElementById("toast");
    message = "hello";
    if (alert == null){
            var toastHTML = '<div id="toast">' + message + '</div>';
            document.body.insertAdjacentHTML('beforeEnd', toastHTML);
        }
    else
        information.style.opacity = 0.9;
    intervalCounter = setInterval("hideToast",1000);
}; 
```

但似乎有一些错误，javascript终端给出：

```
Uncaught TypeError: Cannot set property 'onmouseover' of null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:00:59.747

将您的代码包装在`onload`事件中，例如

```
window.onload=function(){
    document.getElementById("cicrle").onmouseover=function(){
        // code goes here
    };
}; 
```

# python - ValueError：Python函数中关闭文件的I/O操作

> ID：15440070
> 
> 赞同：0
> 
> 时间：2013-03-15T18:51:45.853
> 
> 标签：python, function, append, runtime-error, pycharm

我有嵌套的“最终”函数来保存带有附加模式的文本文件。当我在控制台模式下（使用 PyCharm）执行选择时，我收到此消息

```
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\IPython\core\interactiveshell.py", line 2721, in run_code
    exec code_obj in self.user_global_ns, self.user_ns
  File "<ipython-input-62-9c259f95cff2>", line 1, in <module>
    f.write(line)
ValueError: I/O operation on closed file
0
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\IPython\core\interactiveshell.py", line 2721, in run_code
    exec code_obj in self.user_global_ns, self.user_ns
  File "<ipython-input-63-f015ac76386b>", line 12, in <module>
    f.write(line)
ValueError: I/O operation on closed file 
```

我的功能如下。

```
def segmentation_accuracy(reference, segmented, output, method="ke", threshold=0.1, sep="space", header=True):
    if not check_suffix(reference) or not check_suffix(segmented):
        raise ValueError('the input files need to be ESRI shapefile (*.shp)')
    ref_shp = ogr.Open(os.path.abspath(reference))
    if ref_shp is None:
        raise SystemExit('Unable to open %s' % reference)
    seg_shp = ogr.Open(os.path.abspath(segmented))
    if seg_shp is None:
        raise SystemExit('Unable to open %s' % segmented)
    if method == "ke" or method == "pu":
        if threshold is None:
            raise AccuracyException("threshold need to be set with a value between 0.0 and 1.0")
    ref_layer = ref_shp.GetLayer()
    ref_layer_num = ref_layer.GetFeatureCount()
    seg_layer = seg_shp.GetLayer()
    seg_layer_num = seg_layer.GetFeatureCount()
    if ref_layer.GetGeomType() != 3:
        raise ValueError("s% is not a single-part polygons" % (os.path.split(reference)[1]))
    if ref_layer.GetGeomType() != 3:
        raise ValueError("s% is not a single-part polygons" % (os.path.split(segmented)[1]))
    # get shapely polygons
    ref_list = polygon_list(ref_layer)
    seg_list = polygon_list(seg_layer)
    # create text file
    ref_path = os.path.split(os.path.abspath(reference))[0]
    filename = set_outputfile(output, path=ref_path)
    with open(filename, "a") as f:
        if header is True:
            line = ["FID", "centroidX", "centroidY", "area", "perimeter", "segments", "ra_or", "ra_os", "over_seg", \
                    "under_seg", "over_merge", "under_merge", "sim_size", "sim_size_std", "AFI", "qr", "seg_error", \
                    "d_sr", "d_max", "rp_sr"]
            line = sepType[sep].join([str(e) for e in line])+ "\n"
            f.write(line)
        for FID, ref in enumerate(ref_list):
            print FID
            seg_overlap = list()
            for seg in seg_list:
                if ref.intersects(seg):
                    if threshold_type[method](ref, seg, threshold):
                        seg_overlap.append(seg)
            if len(seg_overlap) != 0:
                accuracy = Accuracy(ref, seg_overlap)
                line = [FID] + accuracy.data
                line = sepType[sep].join([str(e) for e in line])+ "\n"
                f.write(line)
            else:
                accuracy = Accuracy(ref)
                line = [FID] + accuracy.data
                line = sepType[sep].join([str(e) for e in line])+ "\n"
                f.write(line) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:12:16.220

该错误与该行有关

```
line = ["FID", "centroidX", "centroidY", "area", "perimeter", "segments", "ra_or", "ra_os", "over_seg", \
                    "under_seg", "over_merge", "under_merge", "sim_size", "sim_size_std", "AFI", "qr", "seg_error", \
                    "d_sr", "d_max", "rp_sr"] 
```

pycharm更喜欢以下形式

```
line = (["FID", "centroidX", "centroidY", "area", "perimeter", "segments", "ra_or", "ra_os", "over_seg", 
"under_seg", "over_merge", "under_merge", "sim_size", "sim_size_std", "AFI", "qr", "seg_error", 
"d_sr", "d_max", "rp_sr"]) 
```

![在此处输入图像描述](../Images/62865836de96487ddb6bde35430b9dd2.png)

# javascript - 简化 onclick jquery/JavaScript 函数

> ID：15440072
> 
> 赞同：-2
> 
> 时间：2013-03-15T18:52:02.420
> 
> 标签：javascript, jquery

我正在尝试简化网站上的所有 .js 功能，以提高页面加载速度和网站的整体性能。我自己设法完成了大部分工作，但在开始时得到了堆栈，以最小化几个函数，这些函数主要是从页面头中的 functions.js 调用的回调和 onclick 函数。

所以这是我的问题，如何从以下 2 个函数中创建一个函数以使脚本更短且不丢失任何功能，或者是否有任何替代方法可以使其比现在更简单？

```
function user_dialog(dialog_content, download_button) {
    if (typeof jQuery.ui != 'undefined') {
        $("#dialog").attr("title", "Lets share it").html(dialog_content);
        $("#dialog").dialog({
            modal: false,
            width: 400,
            buttons: {
                Cancel: function() {
                    $(this).dialog("close");
                },
                "Download": function () {
                    $(this).dialog("close");
                    window.location = download_button;
                }
            }
        });
    } else {
        window.location = download_button;
    }
}

function user_notice(link_source) {
    download_link = $(link_source).attr("href");
    $.ajax({
        type: "POST",
        url: "/includes/json.php",
        data: "action=reminder&thepath=" + download_link,
        dataType: "json",
        error: function() {
            window.location = download_link;
        },
        success: function(resp_dialog) {
            if (resp_dialog.status == 1) {
                user_dialog(resp_dialog.html, download_link);
            }
        }
    });
} 
```

提前感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:56:53.543

在你的函数变量中添加一个动作变量，比如 us_action 和 un_action 然后使用 if 语句说 if 是 us_acion，如果 un_action 执行此操作，则执行此操作

# jsf - 使用 JSF 模板时无法正常工作的 Primefaces（或 myfaces）文件上传

> ID：15440075
> 
> 赞同：1
> 
> 时间：2013-03-15T18:52:04.657
> 
> 标签：jsf, file-upload

我在使用 fileUpload 和 JSF2 的模板机制时遇到了问题。我进行了广泛的搜索，并且还有其他类似问题的问题（例如[here](https://stackoverflow.com/questions/14260225/viewscoped-bean-rebuilt-when-fileuploadlistener-called-using-prettyfaces)和[here](https://stackoverflow.com/questions/8875818/how-to-use-primefaces-pfileupload-listener-method-is-never-invoked)，但我的问题似乎与我对模板机制的使用直接相关，因为它在该机制之外可以正常工作。

`<ui:insert>`我有一个 xhtml 表单，我使用模板和`<ui:composition`/在表单中插入模板`<ui:define>`。用于文件上传的 bean 上的侦听器永远不会被调用。但是，如果我修改表单以便能够成为独立页面，则上传工作正常。因此，显然，与模板过程有关的东西正在改变我的结果。

我知道使用模板机制和下面的代码片段会产生两个嵌套的表单，但我尝试删除一个并且没有任何变化。生成的 HTML 在浏览器中看起来很合理，那么会发生什么？

我的 xhtml 表单...

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:myfaces="http://myfaces.apache.org/tomahawk"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:composition template="MJLSConsole.xhtml">

        <ui:param name="title" value="Sender Info" />

        <ui:define name="content"> 
            <h:form id="senderInfo">
                <h:panelGrid columns="2" >
                    <p:outputLabel for="imageId" id="icon" value="Organisation Icon"/>
                    <p:fileUpload id="imageId" value="#{senderInformationBean.file}" required="true" mode="simple"/>
                </h:panelGrid>
                <p:commandButton value="Save" action="#{senderInformationBean.save}" ajax="false" />

            </h:form>
        </ui:define>
    </ui:composition>
</html> 
```

这是我的模板

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    </h:head>

    <h:body>
        <h:form id="testpage" enctype="multipart/form-data">
            <p:growl id="messages" sticky="true" autoUpdate="true" />
            <ui:insert name="content">Content</ui:insert>
        </h:form>
    </h:body>
</html> 
```

和我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
    <web-app id="WebApp_ID" version="2.5" 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <display-name>Mjls_main</display-name>
    <context-param>
        <description>Specifies the root of the spring application context</description>
        <param-name>contextConfigLocation</param-name>
        <param-value>WEB-INF/cxf-beans.xml</param-value>
    </context-param>

    <listener>
        <description>Starts spring application context</description>
        <listener-class>
            org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener>
    <listener>
        <description>Bridges http requests to ContextLoaderListener</description>
        <listener-class>
            org.springframework.web.context.request.RequestContextListener
        </listener-class>
    </listener>
    <listener>
        <listener-class>com.sun.xml.ws.transport.http.servlet.WSServletContextListener</listener-class>
    </listener>
    <servlet>
        <description>JSF server</description>
        <servlet-name>facesServlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <filter>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <servlet-name>facesServlet</servlet-name>
    </filter-mapping>

    <servlet>
        <servlet-name>MJActionService</servlet-name>
        <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>MJEnvelopeService</servlet-name>
        <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>MJActionEventService</servlet-name>
        <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>SenderInformationBlockService</servlet-name>
        <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>MJTemplateService</servlet-name>
        <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>MJmlService</servlet-name>
        <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>Notification_Portal_SignallingService</servlet-name>
        <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>MJInboundMessageService</servlet-name>
        <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>MjogServiceImplService</servlet-name>
        <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>facesServlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>facesServlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
    <servlet>
        <description>Provides soap services via Apache CXF</description>
        <display-name>cxf</display-name>
        <servlet-name>cxf</servlet-name>
        <servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>cxf</servlet-name>
        <url-pattern>/services/*</url-pattern>
    </servlet-mapping>
    <filter>
        <description>Provides an ACL and role-based checks for associated services</description>
        <filter-name>shiroFilter</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
        <init-param>
            <param-name>targetFilterLifecycle</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>shiroFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <filter>
        <filter-name>restrictAccessFilter</filter-name>
        <filter-class>com.mjog.mjls.filter.RestrictAccessFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>restrictAccessFilter</filter-name>
        <url-pattern>/console/*</url-pattern>
    </filter-mapping>
    <welcome-file-list>
        <welcome-file>mjlsLogin.jsf</welcome-file>
    </welcome-file-list>
    <filter>
        <filter-name>MyFacesExtensionsFilter</filter-name>
        <filter-class>org.apache.myfaces.webapp.filter.ExtensionsFilter</filter-class>
        <init-param>
            <param-name>uploadMaxFileSize</param-name>
            <param-value>20m</param-value>
        </init-param>
    </filter>
    <!-- extension mapping for adding <script/>, <link/>, and other resource tags to JSF-pages  -->
    <filter-mapping>
        <filter-name>MyFacesExtensionsFilter</filter-name>
        <!-- servlet-name must match the name of your javax.faces.webapp.FacesServlet entry -->
        <servlet-name>facesServlet</servlet-name>
    </filter-mapping>
    <!-- extension mapping for serving page-independent resources (javascript, stylesheets, images, etc.)  -->
    <filter-mapping>
        <filter-name>MyFacesExtensionsFilter</filter-name>
        <url-pattern>/faces/myFacesExtensionResource/*</url-pattern>
    </filter-mapping>
    <servlet-mapping>
        <servlet-name>MJActionService</servlet-name>
        <url-pattern>/MJActionService</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>MJEnvelopeService</servlet-name>
        <url-pattern>/MJEnvelopeService</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>MJActionEventService</servlet-name>
        <url-pattern>/MJActionEventService</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>SenderInformationBlockService</servlet-name>
        <url-pattern>/SenderInformationBlockService</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>MJTemplateService</servlet-name>
        <url-pattern>/MJTemplateService</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>MJmlService</servlet-name>
        <url-pattern>/MJmlService</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Notification_Portal_SignallingService</servlet-name>
        <url-pattern>/Notification_Portal_SignallingService</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>MJInboundMessageService</servlet-name>
        <url-pattern>/MJInboundMessageService</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>MjogServiceImplService</servlet-name>
        <url-pattern>/MjogServiceImplService</url-pattern>
    </servlet-mapping>
    <session-config>
        <!-- logs inactive web users out after n minutes-->
        <session-timeout>20</session-timeout>
    </session-config>

    <context-param>
        <param-name>primefaces.THEME</param-name>
        <param-value>mjog</param-value>
    </context-param>

    <servlet>
        <servlet-name>imageServlet</servlet-name>
        <servlet-class>com.mjog.mjls.filter.ImageServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>imageServlet</servlet-name>
        <url-pattern>/file/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

最后我的豆子是

```
 @ManagedBean(name = "senderInformationBean")
    public class SenderInformationBean implements Serializable {

    transient private ConsoleService consoleService;
    private UploadedFile file;

    public void setConsoleService(ConsoleService consoleService) {
        this.consoleService = consoleService;
    }

    public UploadedFile getFile() {
        return file;
    }

    public void setFile(UploadedFile file) {
        this.file = file;
    }

    public String save() throws IOException {
        consoleService.save(accountName, contactAddress, contactNumber, emailId, accountUrl, file.getBytes());
        populateSenderInfo();
        return "/console/senderInformation.xhtml?faces-redirect=true";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:11:10.870

插入模板定义后，您的组件树实际上会像这样结束：

```
<h:body>
    <h:form id="testpage" enctype="multipart/form-data">
        <p:growl id="messages" sticky="true" autoUpdate="true" />
        <h:form id="senderInfo">
            <h:panelGrid columns="2" >
                <p:outputLabel for="imageId" id="icon" value="Organisation Icon"/>
                <p:fileUpload id="imageId" value="#{senderInformationBean.file}" required="true" mode="simple"/>
            </h:panelGrid>
            <p:commandButton value="Save" action="#{senderInformationBean.save}" ajax="false" />
        </h:form>
    </h:form>
</h:body> 
```

看，你最终得到了一个嵌套的表单。这在 HTML 中是[非法的。](http://validator.w3.org/)提交这种嵌套表单的实际行为是未指定的，并且取决于所使用的浏览器。摆脱`<h:form id="testpage">`并设置`enctype`on`<h:form id="senderInfo">`这样你的组件树有效地结束了：

```
<h:body>
    <p:growl id="messages" sticky="true" autoUpdate="true" />
    <h:form id="senderInfo" enctype="multipart/form-data">
        <h:panelGrid columns="2" >
            <p:outputLabel for="imageId" id="icon" value="Organisation Icon"/>
            <p:fileUpload id="imageId" value="#{senderInformationBean.file}" required="true" mode="simple"/>
        </h:panelGrid>
        <p:commandButton value="Save" action="#{senderInformationBean.save}" ajax="false" />
    </h:form>
</h:body> 
```

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)- 第 2 点

# java - 基于 String 返回可切换的值

> ID：15440080
> 
> 赞同：1
> 
> 时间：2013-03-15T18:52:12.820
> 
> 标签：java

不知道我将如何攻击这个。

基本上我所拥有的是不同长度的输入，一次或多次，这将导致一个动作。它来自输入的输入、文件等。

我不知道通过什么以及如何解决这个问题。最好有一个函数返回`int`对应于 an `public static final int FOO = 1;`、`enum`an 或其他方式的 an 吗？

我现在拥有的是一系列 if 语句，如：

```
if (str.equals("foo") || str.equals("F")) {
      blah;
} else if (str.equals("beach")) {
      more blah;
} 
```

这和任何一样好，还是有更好的方法？看过`enum`但似乎比在例如 C 中更重要。这可能是错误的，但它会朝着这个方向发展吗？

```
class Mother
{

    HappyCamping() {
        switch (ValInput(str)) {
        case FOO: do fo; break;
        case BAR: do bar; break;
        case BAZ: do fo bar: break
        ...
    }

    private enum ValInput(String str)
    {
         FOO("foo"), BAR("bar"), BAZ("baz");

         private int value;

         private ValInput(String str) {
              if (str.equals("blah"))
                   this.value = 1;
              ...
         }
    }
} 
```

要点是采用更清洁的方法并将“解析”与主程序分开。这里有什么好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:55:42.293

> 这和任何一样好，还是有更好的方法？看过枚举，但似乎比在例如 C 中更重要。这可能是错误的，但它会朝着这个方向发展吗？

然后去学习枚举是如何工作的。不要仅仅因为它具有更多功能而避免可能解决您的问题的功能。如果您想要一组固定的操作，您的设计可能会想要使用 Java 样式的枚举。

```
enum Action { CLICK("click"), CLEAR("erase"); } 
```

等是一个好的开始。

Java（我认为从 6 开始，可能是 7）也支持`switch`使用字符串而不是整数或枚举值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:56:16.330

不确定我是否理解整个问题，但您可以在 Java 中轻松地将字符串转换为枚举。

如果条目字符串是有限且预定义的，并且您想将其解析为枚举使用

```
EnumType.valueOf("foo") 
```

我推荐阅读 Java 枚举，与 C 枚举相比，它们非常强大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T18:56:55.863

在 Java 7 中，您可以`String`在`switch`表达式中使用。参考[这篇文章](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)：

```
switch (str) {
  case "blah":
    // some action
    break;
  case "beach":
    // another blah
    break;
  default:
    // default action
    break;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T19:02:39.913

您的 if 语句似乎是解决此问题的最合乎逻辑的方法。不需要让你的生活变得复杂，只要保持简单。任何其他方法都有权衡和复杂性。

* * *

[考虑使用 Map 和命令模式，如此处](https://stackoverflow.com/a/934532/942596)所示。您可以隐藏所有将关键字映射到功能，而不必使用`if`or `switch`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T19:02:57.290

一种方法是编写一个返回标记的解析器。令牌可以用整数或枚举表示。这会以您建议的方式模块化您的代码。

另一种方法是使用枚举。

```
public enum Token {

   FOO("foo", "f"),
   BAR("bar", "b");

   private String keyword;
   private String abbreviation;

   private Token(String keyword, String abbreviation) {
       this.keyword = keyword;
       this.abbreviation = abbreviation;
   }

   public String getKeyword() { 
       return this.keyword; 
   }
   public String getAbbreviation() { 
       return this.abbreviation;
   }

   public static Token valueOf(String s) {
       for (Token token : values()) {
           if (token.getKeyword().equals(s) || token.getAbbreviation().equals(s)) {
               return token;
           }
       }
       throw new IllegalArgumentException("No such keyword:  " + s);
   }
} 
```

然后您可以执行以下操作：

```
switch (Token.valueOf(inputString)) {
    case BAR : doBarStuff(); return;
    case FOO : doFooStuff(); return;
} 
```

# google-maps - 我想使用我公司的安装来模拟 Google 地方信息

> ID：15440081
> 
> 赞同：0
> 
> 时间：2013-03-15T18:52:21.290
> 
> 标签：google-maps

我正在尝试创建一个应用程序，让用户知道他离我们 1,000 多个位置中的哪 5 个左右。我查看了 Places 文档（因为 Places 似乎提供了类似的功能），但没有找到我正在寻找的确切内容，或者如果我有，我还没有认识到它。我假设我必须传递用户的当前位置以及我们所有安装位置的列表，除非有办法让 Google 保留我们可以在每次调用时引用的安装位置。如果有人能指出我正确的方向，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:13:20.483

如果您只对最接近的乌鸦类型感兴趣，那么您甚至根本不需要地图。

您只需要用户和各个办公室位置的长纬度，并直接计算它们之间的距离。

```
 $sql = "SELECT *,(((acos(sin((".$latitude."*pi()/180)) * sin((`Latitude`*pi()/180))+cos((".$latitude."*pi()/180)) * cos((`Latitude`*pi()/180)) * cos(((".$longitude."- `Longitude`)*pi()/180))))*180/pi())*60*1.1515) as distance FROM `MyTable` WHERE distance <= ".$distance.";//** Miles **// 
```

那是一个sql字符串，可以在一定距离内获取所有内容。

要获得最接近的五个，您只需使用“order by”和“top 5”

# python - 如何使用 Python 在 Gtk3 中显示 png 图像？

> ID：15440088
> 
> 赞同：6
> 
> 时间：2013-03-15T18:52:49.727
> 
> 标签：python, user-interface, gtk3, pygobject

首先，重要的是要提到我正在学习**Python**和**Gtk+ 3**，所以我不是这些语言的高级程序员。

**我正在尝试在 Gtk3 中为创建png**图像的 Python 脚本创建一个图形界面，并且我想显示它，但是**PyGobject**文档非常稀缺，以至于我还没有找到一种方法来做到这一点。到目前为止，我的界面如下所示：

![在此处输入图像描述](../Images/daa5a670f34009942968b741fa7fbacc.png)

按钮和文本条目排列在网格中，我想将右侧的大空间（由大按钮表示）留空，直到脚本完成构建图像，然后在该区域显示。代码在[这里](https://dl.dropbox.com/u/10411539/makeRGB.py)。

有没有办法在 Gtk3 中使用 Python 来做到这一点？

提前致谢，

德语。

## 编辑

看看@gpoo 指出的演示，我发现了**Frame**小部件，并在我的 GUI 中实现了它。这是它的样子：

![在此处输入图像描述](../Images/7f1f8c1c5c93722b6bfb799bb29560d1.png)

在窗口类中，我将 Frame 添加到网格中：

```
self.frame_rgb = Gtk.Frame(label='RGB image')
self.frame_rgb.set_label_align(0.5, 0.5)
self.frame_rgb.set_shadow_type(Gtk.ShadowType.IN)
self.grid.attach_next_to(self.frame_rgb, self.label_img_name,
                         Gtk.PositionType.RIGHT, 3, 8) 
```

我还将运行按钮连接到一个回调函数，这样当我单击它时，我的脚本会创建并显示 png 图像：

```
self.button_run = Gtk.Button(stock=Gtk.STOCK_EXECUTE)
self.button_run.connect('clicked', self.on_button_run_clicked)
self.grid.attach_next_to(self.button_run, self.entry_b_img,
                         Gtk.PositionType.BOTTOM, 1, 1) 
```

最后，我的回调函数是（还没有计算，仅将图像渲染到 Frame 以进行测试）：

```
def on_button_run_clicked(self, widget):
    self.img = Gtk.Image.new_from_file('astro-tux.png')
    self.frame_rgb.add(self.img) 
```

但是当我单击运行按钮时出现以下错误：

> (makeRGB.py:2613): Gtk-WARNING **: 试图将 GtkImage 类型的小部件添加到 GtkFrame，但作为 GtkBin 子类，GtkFrame 一次只能包含一个小部件；它已经包含一个 GtkImage 类型的小部件

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T22:17:35.030

你可以使用 Gtk.Image。如果你生成一个文件，你可以使用：

```
img = Gtk.Image.new_from_file('/path/to/my_file.png') 
```

并添加`img`到容器中（`GtkGrid`在您的情况下）。或者，如果你已经有了`Gtk.Image`，你可以使用：

```
img.set_from_file('/path/to/my_file.png') 
```

而不是`...from_file`你可以使用`from_pixbuf`，你可以`Gdk.Pixbuf`从流中创建一个。

通常，您可以使用[C 的文档](https://developer.gnome.org/gtk3/stable/GtkImage.html)并将习语更改为 Python。此外，您可以查看[PyGObject](https://gitlab.gnome.org/GNOME/pygobject/tree/master/examples/demo)中可用的演示，特别是[处理图像](https://gitlab.gnome.org/GNOME/pygobject/blob/master/examples/demo/demos/images.py)的演示。

# crystal-reports - 我如何总结从水晶子报告中提取的数据

> ID：15440095
> 
> 赞同：0
> 
> 时间：2013-03-15T18:53:01.623
> 
> 标签：crystal-reports, crystal-reports-2008

我可以使用共享 numbervar sub1Total 从子报表中提取一个字段；但我需要在组的末尾添加它们。如果我尝试对主报告中的字段进行求和，则会收到一个错误，即该字段不能与 sum 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:22:41.130

您可以通过在主报表中通过全局变量跟踪从子报表传回的值来相加。

```
//Initialize the variable in the Group Header of the main report
whileprintingrecords;
numbervar groupsub := 0;

//Update the variable in the Details section of the main report
whileprintingrecords;
numbervar groupsub;
shared numbervar subval;

groupsub := groupsub + subval;

//Print the accumulated group value in the Group Footer of the main report
whileprintingrecords;
numbervar groupsub; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-04T13:32:13.267

注意：仅适用于总和

groupsub := groupsub + subval;

在**详细信息部分**

# visual-studio - C++ 的 DLL 参考问题（CLR 支持）

> ID：15440096
> 
> 赞同：0
> 
> 时间：2013-03-15T18:53:01.650
> 
> 标签：visual-studio, visual-c++, unmanaged, lync-client-sdk

我正在使用由 Lync Client 2013 SDK（Microsoft.Lync.Model.dll -- 版本 15.0.4454.1509）在 C++ 代码（支持 /CLR）中提供的 DLL 文件之一。但是在构建项目期间，它没有给我任何与 Lync SDK 类的代码相关的错误。但是在运行时它向我抛出了一条错误消息：

（scanuser.exe 中发生了“System.IO.FileNotFoundException”类型的未处理异常附加信息：无法加载文件或程序集“Microsoft.Lync.Model，Version=15.0.0.0，Culture=neutral，PublicKeyToken=71e9bce111e9429c”或一个其依赖关系。系统找不到指定的文件。）

```
//DLL I want to use
#using <Microsoft.Lync.Model.dll>

//namespace provided that DLL
using namespace Microsoft::Lync::Model;

//Function which is using that DLL
void getusername()
{
LyncClient ^lyncClient;
String     ^text=lyncClient->Self->Contact->GetContactInformation(ContactInformationType::DisplayName)->ToString();
Console::WriteLine(text);

} 
```

我还添加了“**附加 #using 目录**”，其中存在该 DLL 文件，即：“C:\Program Files\Microsoft Office\Office15\LyncSDK\Assemblies\Desktop”

*此 DLL 在用 C# 编写的示例应用程序中运行良好。所以我想DLL的子版本没有问题*

**Visual Studio 2012 Ultimate，Windows 7 Ultimate 32 位，Lync 客户端 SDK 2013**

那么有什么想法吗？

# php - php如何访问数组内的数组

> ID：15440097
> 
> 赞同：-2
> 
> 时间：2013-03-15T18:53:04.483
> 
> 标签：php

我有一个数组，它在 PHP 中具有以下形式-

```
Array(
 0 => 
  array (
    0 => 'var1=\'some var1\'',
    1 => 'var2=\'some_var2\'',
    2 => 'var3=\'some_var3\'',
  )) 
```

我希望它显示为——

```
array (
    0 => 'var1=\'some var1\'',
    1 => 'var2=\'some_var2\'',
    2 => 'var3=\'some_var3\'',
  ) 
```

那么该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:55:05.817

你有没有尝试过...

```
$inner_array = $outer_array[0];

var_dump($inner_array); 
```

...？

[在手册中](http://www.php.net/manual/en/language.types.array.php)阅读有关 php.ini 数组的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:58:42.180

多维数组一般工作如下图

```
$shop = array( array("rose", 1.25 , 15),
           array("daisy", 0.75 , 25),
           array("orchid", 1.15 , 7) 
         ); 

echo $shop[0][0]." costs ".$shop[0][1]." and you get ".$shop[0][2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:59:41.730

foreach 构造的语法如下：

```
foreach ($array_expression as $value) {
   statement
}

foreach ($array_expression as $key => $value) {
   statement
} 
```

第一种形式循环遍历 $array_expression 给出的数组。在每个循环中，将当前元素的值分配给 $value 并且内部数组指针前移一个，以便在下一个循环中访问下一个元素。

第二种形式做同样的事情，除了当前元素的键将在每个循环中分配给变量 $key 。

上面的 foreach 语法也类似于下面的 while 构造：

```
while (list(, $value) = each($array_expression)) {
   statement
}

while (list($key, $value) = each($array_expression)) {
   statement
} 
```

甚至 for 循环也可用于处理和循环数组的所有元素，语法如下：

```
$count = sizeof($arr_expression);
for ($i = 0; $i < $count; $i++) {
   $value = $arr_express[$i];
   statement
}

for ($i = 0, $item = ''; false != ($value = $arr_expression[$i]); $i++) {
   statement
} 
```

“foreach”的嵌套循环也可用于访问多维数组。这是一个示例数组以及访问其值数据的方法。例如：

```
foreach ($array_expression as $arr_value) {
   foreach ($array_value as $value) {
      statement
   }
} 
```

这是访问数组的示例代码：

```
$contents = array(
   "website_1" => array("name" => "StackOverFlow",
                        "url" => "http://www.stackoverflow.com",
                        "favorite" => "yes"),
   "website_2" => array("name" => "Tip and Trick",
                        "url" => "http://www.tipandtrick.net",
                        "favorite" => "yes")
); 
```

要检索数据，程序员可以使用以下语法直接指定导致值的键，这将打印“我的数字生活”。

```
echo $contents['website_1']['name']; 
```

但是，在处理大型数组或键和值的名称动态更改时，上述语法变得不实用。在这种情况下，“foreach”函数可用于递归访问数组。

```
foreach ($contests as $key => $list) {
   echo "Website No.: " . $key . "\n";
   echo "Name: " . $list['name'] . "\n";
   echo "URL: " . $list['url'] . "\n";
} 
```

输出将是：

```
Website No.: website_1
Name: StackOverFlow
URL: http://www.stackoverflow.com/
Website No.: website_2
Name: Tip and Trick
URL: http://www.tipandtrick.net/ 
```

# php - PHP中的捷克语字符编码

> ID：15440105
> 
> 赞同：2
> 
> 时间：2013-03-15T18:53:39.620
> 
> 标签：php, encoding, utf-8

我需要制作一个解析 .htm 文件的脚本。这些 .htm 文件来自捷克网站，在记事本中打开文件时，我可以看到例如单词：Číslo

我首先将源代码导入字符串：

```
mb_internal_encoding("UTF-8");
$content = file_get_contents($filename); 
```

然后我尝试在其中找到 Číslo ：

```
$str_init = "Číslo";
$init = mb_strpos($content, $str_init) ; 
```

$init 返回 FALSE...

任何的想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:12:08.687

将您的 PHP 文件保存`with`为 BOM。

# php - 获取相关对象时是否推进缓存标准？

> ID：15440113
> 
> 赞同：0
> 
> 时间：2013-03-15T18:54:17.313
> 
> 标签：php, propel

我有一个 Propel 1.6 生成的类 Group，它具有与之相关的 Inits，而 Inits 具有与它们相关的 Resps。很简单。

我不明白这两段 Propel 代码之间的区别。`$notDeleted`在第一个中，我在每个循环上重新创建标准。这段代码做了我想要的——它将所有的 Resps 放入`$data`数组中。

```
foreach ($group->getInits() as $init) {
    $notDeleted = RespQuery::create()->filterByIsDeleted(false);
    foreach ($init->getResps($notDeleted) as $resp) {
        $data[] = $resp;
    }
} 
```

在第二个代码中`$notDeleted`，出于（我认为的）明显的效率原因，我将标准拉出循环。这段代码不能按我想要的方式工作——它只能从其中一个 Inits 中获取 Resps。

```
$notDeleted = RespQuery::create()->filterByIsDeleted(false);
foreach ($group->getInits() as $init) {
    foreach ($init->getResps($notDeleted) as $resp) {
        $data[] = $resp;
    }
} 
```

我认为这一定与`getResps()`方法如何缓存结果有关，但这不是文档或代码在该方法中读取的方式。文档和代码说，如果传入的条件`getResps()`不为空，它将始终从数据库中获取结果。也许其他一些 Propel 缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:07:45.987

（首先，我猜你的意思是在你的循环中使用`$init`vs `$initiative`。或者还有一些我们在这里没有看到的其他代码。）

这是我的猜测：在第二个示例中，您拉出`$notDeleted` `Criteria`对象，但每次通过内部`foreach`调用`getResps($notDeleted)`都会使 Propel使用当前实例`filterByInit()`对实例执行 a 。这将为 SQL 添加一个新条件，但显然 a只能有一个值，因此是唯一的结果。`Criteria``Init``WHERE``Resp``Init.Id`

不过，我认为没有充分的理由将其拉出来，在幕后 Propel 只是创建了一个新的 Criteria 对象，克隆了您传入的对象 - 因此没有保存真正的内存。

# python - 作为 python setup.py 安装的一部分，我将如何运行脚本文件？

> ID：15440115
> 
> 赞同：13
> 
> 时间：2013-03-15T18:54:18.850
> 
> 标签：python, setuptools, setup.py

**问题**

我知道如何使用`setup.py`setuptools[来](https://pypi.python.org/pypi/setuptools)注册脚本。我将如何运行另一个脚本文件（比如说一个`make`文件）作为`python setup.py install`.

**背景**

我想我会使用类似的东西：

```
os.system('make maketarget') #from somewhere in the package 
```

但是`setuptools.setup`收到一个 dict 所以我不能只在`setup()`/ 中添加这一行，而且我需要在基本包安装后运行脚本`setup.py install`。

我知道我可以添加一个命令，`setup.py`但我希望在安装步骤中调用这个脚本。

我也可以默认只放置一个：

```
if sys.argv[-1] == 'install':
    os.system('do something in the shell') 
```

并将这个块放在 setup() 之后，但不知何故这看起来不是很 pytonic （而且也容易出错，我需要找到这个包的确切安装位置等）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-17T12:28:00.707

您可以从 setuptools 继承现有的安装命令，并使用所需的功能对其进行扩展。之后，您可以将其注册为安装功能中的安装命令：

```
from setuptools.command.install import install

class MyInstall(install):

    def run(self):
        install.run(self)
        print("\n\n\n\nI did it!!!!\n\n\n\n")

# in the setup function:
cmdclass={'install': MyInstall} 
```

而不是打印语句，只需调用您的脚本。

请注意，打包python软件（鸡蛋等）的方式有很多种。如果您仅在安装步骤中调用脚本，则不会以这些方式调用您的脚本。

# python - 用 Python 中的另一个列表刷新列表内容

> ID：15440120
> 
> 赞同：1
> 
> 时间：2013-03-15T18:54:38.260
> 
> 标签：python, list, extend

如何在不使用该方法的情况下用另一个给定列表扩展给定列表的内容`.extend()`？我想我可以在字典中使用一些东西。

**代码**

```
>>> tags  =['N','O','S','Cl']
>>> itags =[1,2,4,3]

>>> anew =['N','H']
>>> inew =[2,5] 
```

我需要一个返回刷新列表的函数

```
tags  =['N','O','S','Cl','H'] 
itags =[3,2,4,3,5] 
```

当一个元素已经在列表中时，将添加另一个列表中的数字。如果我使用该`extend()`方法，该元素`N`将出现在列表中`tags`两次：

```
>>> tags.extend(anew)
>>>itags.extend(inew)
>>> print tags,itags
     ['N','O','S','Cl','N','H'] [1,2,4,3,5,2,5] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T18:59:12.630

您可能需要一个[计数器](http://docs.python.org/2/library/collections.html?highlight=collections#collections.Counter)。

```
from collections import Counter
tags = Counter({"N":1, "O":2, "S": 4, "Cl":3})
new = Counter({"N": 2, "H": 5})

tags = tags + new
print tags 
```

输出：

```
Counter({'H': 5, 'S': 4, 'Cl': 3, 'N': 3, 'O': 2}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:00:29.843

如果元素的顺序很重要，我会这样使用`collections.Counter`：

```
from collections import Counter

tags  = ['N','O','S','Cl']
itags = [1,2,4,3]

new  = ['N','H']
inew = [2,5]

cnt = Counter(dict(zip(tags, itags))) + Counter(dict(zip(new, inew)))
out = tags + [el for el in new if el not in tags]
iout = [cnt[el] for el in out]

print(out)
print(iout) 
```

如果顺序无关紧要，有一种更简单的方法来获取`out`and `iout`：

```
out = cnt.keys()
iout = cnt.values() 
```

如果您不必*使用*一对列表，那么`Counter`直接使用是解决您的问题的自然之选。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:03:35.853

如果您需要维护订单，您可能需要使用 OrderedDict 而不是 Counter：

```
from collections import OrderedDict

tags = ['N','O','S','Cl']
itags = [1,2,4,3]

new = ['N','H']
inew = [2,5]

od = OrderedDict(zip(tags, itags))
for x, i in zip(new, inew):
    od[x] = od.setdefault(x, 0) + i

print od.keys()
print od.values() 
```

在 Python 3.x 上，使用`list(od.keys())`和`list(od.values())`.

# ruby - 如何使用ckan gem 综合知识档案网

> ID：15440132
> 
> 赞同：-1
> 
> 时间：2013-03-15T18:55:33.747
> 
> 标签：ruby, gem, ckan

有没有人有关于如何使用 Ruby 'ckan' gem（综合知识档案网络）的教程的链接。我想访问 gov.uk 数据，我下载了 gem，但是如何获取数据？该领域的文档似乎有点稀疏

非常感谢您的帮助。到目前为止，我的谷歌搜索一无所获，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:46:22.317

CKAN gem 的文档位于[https://github.com/apohllo/ckan](https://github.com/apohllo/ckan)的存储库中。请注意，它不是 OKFN 的 CKAN 存储库。

查看他们的代码，他们似乎在[https://github.com/apohllo/CKAN/blob/master/lib/ckan.rb#L2对](https://github.com/apohllo/CKAN/blob/master/lib/ckan.rb#L2)[http://datahub.io](http://datahub.io) API 端点进行了硬编码。因此，如果不更改其代码，您将无法访问 data.gov.uk。

但是，由于 Ruby 是一种动态语言，您可以覆盖该常量，如

```
CKAN::API_BASE = 'http://data.gov.uk/api/1' 
```

现在你可以在 GitHub 上关注他们的文档，它应该可以工作了。

干杯!

# iphone - 如何在 Xcode 中将自定义图像添加到 UITableviewController？

> ID：15440136
> 
> 赞同：-2
> 
> 时间：2013-03-15T18:55:52.587
> 
> 标签：iphone, xcode, uitableview

我是 Xcode 的新手，目前正在构建我的第一个应用程序。我已经搜索了很长时间并努力尝试找到合适的教程，但我找不到。我正在寻找一种能够在我的 UITableViewController 中插入自定义背景的方法。我可以改变颜色，但就是这样。我要做的是将我的 PNG 图像设置在我创建的静态单元格后面，然后将不透明度放在这些单元格上，以便自定义图像通过。有人可以通过IB（故事板）或通过编码给我一种方法吗？非常感激！！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:01:49.387

我认为更简单和正确的方法是：

```
[tableView setBackgroundView:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"yourimage.png"]]]; 
```

您可以在 viewDidLoad 中包含此代码以使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:12:35.580

对于单元格的背景：，在`willDisplayCell:atIndexPath:`方法 中执行此操作

```
 UIImageView *cellImageView = [[UIImageView alloc] initWithImage:[UIImageimageNamed:@"image.png"]]];
CGRect Frame = cell.backgroundView.bounds;
cellImageView.frame = newFrame;

[cell.backgroundView addSubview:cellImageView]; 
```

对于 tableview 背景，在`viewDidLoad:`方法中执行此操作

```
self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"BackgroundPattern.png"]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T06:45:29.527

```
 UIImageView *ivwCellBackground=[[UIImageView alloc]init];
   [ivwCellBackground setImage:[UIImage imageNamed:CELL_BACKGROUNGIMAGE]];
cell.backgroundColor=[UIColor clearColor];

    [cell setBackgroundView:ivwCellBackground];    

    [ivwCellBackground release];
    ivwCellBackground=nil; 
```

# stream - 如何在 M3 Dart 上读取控制台输入

> ID：15440138
> 
> 赞同：6
> 
> 时间：2013-03-15T18:55:56.923
> 
> 标签：stream, console, stdin, dart

在 M3 中，类似 StringInputStream 的类被替换为[Stream](http://api.dartlang.org/docs/bleeding_edge/dart_async/Stream.html)。如何读取服务器应用程序上的标准输入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T18:59:40.023

尝试这个：

```
import 'dart:io';
import 'dart:async';

void main() {
  print("Please, enter a line \n");
  Stream cmdLine = stdin
      .transform(new StringDecoder())
      .transform(new LineTransformer());

  StreamSubscription cmdSubscription = cmdLine.listen(
    (line) => print('Entered line: $line '),
    onDone: () => print(' finished'),
    onError: (e) => /* Error on input. */);

} 
```

# r - 打印数据框列表

> ID：15440140
> 
> 赞同：0
> 
> 时间：2013-03-15T18:56:03.337
> 
> 标签：r

我是 R 的相对新手。我已经搜索了最后两个工作日试图解决这个问题，但失败了。我有一个函数生成的因素列表。我在不同长度的列表中有 9 个项目。

```
>summary(list_dataframes)
      Length Class  Mode   
 [1,] 1757   factor numeric
 [2,] 1776   factor numeric
 [3,] 1737   factor numeric
 [4,] 1766   factor numeric
 [5,] 1783   factor numeric
 [6,] 1751   factor numeric
 [7,] 1744   factor numeric
 [8,] 1749   factor numeric
 [9,] 1757   factor numeric 
```

部分数据样本如下：

> list_dataframes

```
[[1]]

[1] 1776234_at   1779003_at   1776344_at   1777664_at   1772541_at   1774525_at  

 [[2]]

 [1] 1771703_at   1776299_at   1772744_at   1780116_at   1775451_at   1778821_at  

[7] 1774342_at 

 [[3]]

[1] 1780116_at   1776262_at   1775451_at   1780200_at   1775704_at 
```

我不确定为什么它说模式是“数字”。各个条目是数字和字母的混合，例如“S35_at”。

我想把它变成一个九列和 1783 行的表，而不产生重复的值。（因此我尝试使用 do.call 但它没有用。我最终得到了一堆重复的东西。）较短的那些可以在空白处有 NA 或为空白。

我需要能够最终得到可以放入电子表格的东西。

必须有办法做到这一点。谢谢！

我想我应该添加它最初是当我有四列数据时作为数据框出现但我只需要一列数据并且当我对创建此列表的函数进行子集化以仅创建我实际需要的一列时不再是数据框。

```
dput(head(list_dataframes))
list(structure(c(3605L, 5065L, 3663L, 4349L, 1655L, 2700L, 5692L, plus many more
.Label = c("1769308_at", 
"1769311_at", "1769312_at", "1769313_at", "1769314_at", "1769317_at", plus many more
this pattern is repeated nine more times 
```

我想要做的是生成一个看起来像这样的表：

```
a= xyz,tuv,efg,hij,def
b= xyz,tuv,efg
c= tuv,efg,hij,def 
```

我想做的是一张桌子

```
a    b    c
xyz  xyz  tuv
tuv  tuv  efg
efg  efg  hij
hij  NA   NA
NA   NA   NA

NA could be blank as well. 
```

在阅读了关于列表的手册部分之后，我确定我已经生成了一个隐藏的列表列表。它有九个项目，其中包含我想要将数据隐藏两层的数据，即我必须使用 [[1]] 才能看到它。也因为 R 中的某些东西导致单列数据框成为一个因素，而不是保留一个数据框，它变得更加复杂。为了修复它（有点），我在方程式中添加了一个步骤，以便将该因素更改为数据框。

之后，当我使用 lapply 生成结果时，至少因素问题得到了解决。然后，我可以使用以下步骤将数据框拉出。

```
first <- list_dataframes[[1]]
second <- list_dataframes[[2]]
third <- list_dataframes[[3]]
fourth <- list_dataframes[[4]]
fifth <- list_dataframes[[5]]
sixth <- list_dataframes[[6]]
seventh <- list_dataframes[[7]]
eighth <- list_dataframes[[8]]
nineth <- list_dataframes[[9]]

all_results <- cbindX(first,second,third,fourth,fifth,sixth,seventh, eighth,nineth) 
```

然后我可以使用 write.csv 编写 csv 文件并获得我想要的正确结果。所以我想我有我的答案。我的意思是它现在确实有效。

但是，我仍然认为我在使这项工作达到最佳状态时遗漏了一些东西，即使它现在给了我想要的正确结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:29:45.367

因子类变量是具有附加属性的整数模式向量，该属性是指定用于显示整数值的标签的字符向量。我认为将这些绑定在一起的最安全方法是将因子列转换为字符类，然后转换为`merge`with `all=TRUE`。为什么不发布一个包含三个数据框或因素的简单示例...我实际上无法从摘要输出中确定结构...长度为 10、9 和 8 的数据具有任何复杂程度？

如果你想让它们都具有一组共同的水平，那么使用这个：

```
 shared_levels <- unique( c( unlist( lapply(list_dataframes) ) ) )
 length(shared_levels)
 new_list <- lapply(list_dataframes, factor, levels=shared_levels) 
```

正如评论中所述，我仍然不明白你想象的是什么样的桌子。需要一个具体的例子。

# regex - 捕获源字符串中不存在的子字符串

> ID：15440147
> 
> 赞同：0
> 
> 时间：2013-03-15T18:56:23.033
> 
> 标签：regex, string, url-rewriting, pattern-matching

我想要正则表达式搜索和替换如下：

*   输入字符串以`images`, `videos`,结尾`friends`
    *   输出字符串包含**匹配**的后缀
*   别的
    *   输出字符串包含后缀`profile`

示例输入/输出：

*   `/john-smith-images`->`/user-images`
*   `/john-smith-videos`->`/user-videos`
*   `/john-smith`->`/user-profile`

我尝试了这个捕获后缀（如果存在）的正则表达式：

```
/.+?(images|videos|friends)?$/ 
```

我***仅限于一种正则表达式***和***仅正则表达式的解决方案***。我需要在 mod_rewrite/IIRF/IIS URL 重写中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:29:11.350

Give this a try:

```
text.replace(/[\w-]+(?=(images|videos|friends))/, 'user-').replace(/[\w-]+-(?!(images|videos|friends))\w*/, 'user-profile') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:10:24.820

不要使用 .replace()，而是考虑在条件中使用 .match() 或 .test()，并分别处理不匹配的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:34:50.127

将 String#replace 与回调一起使用，如下所示：

```
var regexp = /.+?(images|videos|friends|)$/;
function cb ($0, $1) {
   r = $1 ? $1 : 'profile';
   return '/user-' + r;
}
console.log("/john-smith-images".replace(regexp, cb));
console.log("/john-smith-videos".replace(regexp, cb));
console.log("/john-smith".replace(regexp, cb)); 
```

**输出：**

```
/user-images
/user-videos
/user-profile 
```

### 现场演示：http: [//ideone.com/MVRcku](http://ideone.com/MVRcku)

# c# - 针对 Active Directory 对 ASP.NET 用户进行身份验证时遇到问题

> ID：15440149
> 
> 赞同：1
> 
> 时间：2013-03-15T18:56:25.123
> 
> 标签：c#, asp.net, ldap, iis-7.5

我用“demo”替换了我们的域名...请忽略下图中缺少的逗号等。

我的问题如下：

我想在我的 ASP.NET Web 应用程序中验证 SBSUsers。我无法弄清楚我的活动目录路径需要什么才能让它工作......

当我将其设置如下时，它无法进行身份验证（我假设因为我的用户不在该路径下）......但它没有给我一个错误：

```
string adPath = "LDAP://ac-dc01.demo.local:389/CN=Configuration,DC=demo,DC=local";
string domainAndUsername = domain + @"\" + username;
DirectoryEntry entry = new DirectoryEntry(adPath, domainAndUsername, pwd);
// Bind to the native AdsObject to force authentication.
Object obj = entry.NativeObject;
DirectorySearcher search = new DirectorySearcher(entry);
search.Filter = "(SAMAccountName=" + username + ")";
search.PropertiesToLoad.Add("cn");
SearchResult result = search.FindOne();
if (null == result)
{
    return false;
}
// Update the new path to the user in the directory
adPath = result.Path;
_filterAttribute = (String)result.Properties["cn"][0]; 
```

当我将它设置为我认为应该的值时，它在 entry.NativeObject 行上出错。

```
string adPath = "ldap://ac-dc01.demo.local:389/OU=SBSUsers,OU=Users,OU=MyBusiness,DC=demo,DC=local"; 
```

有任何想法吗？我是否需要以某种方式打开它以进行“全局”访问？如果是这样，我将如何去做？

![LDAP](../Images/bc079818f5c7e435a5537ba142bbba48.png)

我能够使用另一款软件成功连接...

![LDAP](../Images/d916a0ed9ffb02d262c54e60cfbca451.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:11:03.587

这就是我们连接到 AD 的方式，并且效果很好：

```
<yourConfig>LDAP://ADServerName/OU=GROUPNAME,DC=domainName,DC=com</YourConfig> 
```

以下是有关如何验证用户的示例代码：

```
using (PrincipalContext oPrincipalContext = new PrincipalContext(ContextType.Domain,
                                                            ENTER YOUR DOMAIN NAME,
                                                            This is where the config that I mentioned above comes in,
                                                            ContextOptions.Negotiate,
                                                            ENTER YOUR AD SERVICE NAME,
                                                            ENTER YOUR AD PASSWORD))
            {
                UserPrincipal oUser = UserPrincipal.FindByIdentity(oPrincipalContext, THE USERNAME THAT YOU WANT TO VALIDATE);
                if (oUser != null)
                {
                    oADAcct = new CUserADAcct();
                    oADAcct.dumpAcctAttrs(oUser);
                }
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:12:51.233

这就是你可以尝试的。你确定你的 DC=Demo 和 DC=Local 对我来说看起来像 OU

```
const string Domain = "ServerAddress:389";
const string constrParts = @"OU=Users,DC=domain,DC=com";
const string Username = @"someusername";
PrincipalContext principalContext = new PrincipalContext(ContextType.Domain, Domain, constrParts);
UserPrincipal userPrincipal = UserPrincipal.FindByIdentity(principalContext,  username); 
```

# debugging - 如何更改 GDB 中的 eflags 寄存器值？

> ID：15440154
> 
> 赞同：14
> 
> 时间：2013-03-15T18:56:37.093
> 
> 标签：debugging, assembly, gdb, flags

`set $eflags`不改变`eflags`价值。

例如，旧`eflags`值仍然存在。`=>$set $eflag=0x243`[这只是一个示例输入]。

或者，有没有办法设置单独的标志`eflags`？

我正在寻找类似的东西：`set ZF[zero flag]`. 有没有一个 gdb 命令可以做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-07-10T11:15:23.743

`set $eflags`没有括号在 GDB 7.7.1 中有效

要设置单个标志，请使用其索引。例如，ZF 是第 6 位，所以我们可以设置它：

```
set $ZF = 6                 # define a GDB variable: no effect on registers
set $eflags |= (1 << $ZF)   # set bit 6 in EFLAGS, the ZF bit. 
```

所有其他按位运算也是如此：[如何设置、清除和切换单个位？](https://stackoverflow.com/questions/47981/how-do-you-set-clear-and-toggle-a-single-bit-in-c-c)

```
# Clear
set $eflags &= ~(1 << $ZF)

# Toggle
set $eflags ^= (1 << $ZF) 
```

造成混淆的原因是许多位要么被保留，不能被任何指令直接修改，要么不能从用户模式修改，另请参见：[如何直接读写 x86 标志寄存器？](https://stackoverflow.com/questions/1406783/flags-registers-can-we-read-or-write-them-directly)所以 GDB 不会碰它们。

例如：

```
(gdb) set $eflags = 0
(gdb) i r eflags
eflags         0x202    [ IF ]
(gdb) set $eflags = 0xFFFFFFFF
(gdb) i r eflags
eflags         0x54fd7  [ CF PF AF ZF SF TF IF DF OF NT RF AC ] 
```

`0x202`二进制是：

```
0010 0000 0010 
```

`0x54fd7`二进制是：

```
0101  0100 1111 1101 0111 
```

TODO 通过查看手册[http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures了解为什么设置了这些位中的每一个-software-developer-vol-1-manual.pdf](http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-vol-1-manual.pdf)和 GDB 源代码。

我理解的那些：

*   所有保留的寄存器都保留在它们的固定值：1 表示第 1 位，0 表示第 3、5、15 和 22-31 位

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-18T14:35:18.160

```
set ($eflags)=0x243 
```

在我的任何十六进制值的测试中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-05T00:27:12.683

在`eflags`寄存器中设置所有标志是错误的。所以保留一些位，必须为 0。（3、5、15、22 和更大）位 1 必须为 1。也有`rflags`。但一切`hi dword`都是零。所以没有必要使用`rflags`代替`eflags`所有操作更改的标志。但我知道有些人使用免费位供自己使用。

比较适合`rflags hi dword`。因此，在 64 位架构中，有足够的空闲寄存器可供使用。但在 32 位架构中，没有。所以强烈建议这样做。

因为在未来的架构中可能会使用其中一些位。但是从 32 位到 64 位并没有触及这些标志。如果唯一的寄存器可能根本不会改变。因此，任何情况下的所有可能原因都已使用。我不认为在任何情况下可能会使用一些额外的标志直到现在才使用。这可能是对一些主要的处理器架构的改变。我不认为有些人会出于明显的原因决定这样做，所有软件都必须从一开始就被抛弃和重写。这是一项极其艰巨和艰巨的工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-15T19:03:05.247

```
eflags [ ZF ] 
```

如果你想设置任意值使用这个

标志 0x42

# jquery - rcarousel 一次滑动一个，没有跳跃

> ID：15440156
> 
> 赞同：0
> 
> 时间：2013-03-15T18:56:41.437
> 
> 标签：jquery

我在启用 step:1 的情况下实现 rcarousel，但是滑块会在最后一张图像之后跳转以将第一张图像放在第一个位置，而不是仅移动 1 张幻灯片。您可以在此示例中看到问题：

[http://ryrych.github.com/rcarousel/examples/custom_step_and_visible.html](http://ryrych.github.com/rcarousel/examples/custom_step_and_visible.html)

是否有任何选项可以让滑块在下一个/上一个上连续滑动 1 个元素，而无需此跳转？

```
$( ".carousel" ).rcarousel({
  visible: 4,
  step: 1,
  width: 190, 
  height: 550,
  margin: 65,
  speed: 1000
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T01:00:07.703

尝试在[https://github.com/ryrych/rcarousel/pull/64](https://github.com/ryrych/rcarousel/pull/64)使用文件 b1fb8fb替换原来的 jquery.ui.rcarousel.js

在选项中，设置无缝{启用：真，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T09:55:35.053

尝试以下操作：

```
$('.carousel').rcarousel({
 itemOffset: 100,
 infiniteScroll: 1
}); 
```

从头开始抱歉-您实际上解决了我的问题！

我正在使用[http://labs.juliendecaudin.com/barousel/](http://labs.juliendecaudin.com/barousel/)而不是我认为没有那个跳跃步骤会更好！

谢谢，詹姆斯

# javascript - 使用 CryptoJS 在 JavaScript 中加密并在 C# 中解密

> ID：15440161
> 
> 赞同：2
> 
> 时间：2013-03-15T18:56:51.030
> 
> 标签：javascript, asp.net, encryption, aes, cryptojs

我正在尝试使用 CryptoJS 在 JavaScript 中加密并在 C# 中解密。花了很多时间试图让这两种技术返回相同的输出。尽管如此，输出还是不同的——CryptoJS 生成的加密字符串与 C# 生成的加密字符串不同。我究竟做错了什么？谢谢您的帮助。

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Test.aspx.cs" Inherits=".com.Test" %>
<%@ Import Namespace="System.Security.Cryptography" %>
<p id="output"></p>
<script src="/Scripts/aes.js"></script>
<script>
    var encrypted = CryptoJS.AES.encrypt(
        CryptoJS.enc.Utf8.parse("test"),
        CryptoJS.enc.Utf8.parse("607490BE-18CA-43D7-B11A-57E2621B0137"),
        {
            mode: CryptoJS.mode.CBC, 
            padding: CryptoJS.pad.Pkcs7,
            iv: CryptoJS.enc.Utf8.parse("2D59831C-78AC-4227-B3F3-CE656636C23E")
        });
    document.getElementById('output').innerText = encrypted.ciphertext.toString(CryptoJS.enc.Base64);
</script>

<%
    var encryptor = new AesCryptoServiceProvider
        {
            Key = Encoding.UTF8.GetBytes("607490BE-18CA-43D7-B11A-57E2621B0137").Take(32).ToArray(),
            IV = Encoding.UTF8.GetBytes("2D59831C-78AC-4227-B3F3-CE656636C23E").Take(16).ToArray(),
            Mode = CipherMode.CBC,
            Padding = PaddingMode.PKCS7
        }.CreateEncryptor();
    var dataToEncrypt = Encoding.UTF8.GetBytes("test");
    Response.Write(Convert.ToBase64String(encryptor.TransformFinalBlock(dataToEncrypt, 0, dataToEncrypt.Length)));
%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-16T20:50:46.110

我最近不得不做类似的事情，这是你正在拍摄的工作版本 - 这使用 System.Security.Cryptography 的 AES 提供程序在 C# 中加密服务器上的字符串，然后将加密文本发送到客户端它使用 CryptoJS 库在 JavaScript 中对其进行解密：

```
<%@ Page Language="C#" %>
<%@ Import Namespace="System.Security.Cryptography" %>
<%@ Import Namespace="System.IO" %>

<script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/aes.js"></script>
<script>
    window.onload = function (e) {
        var key = CryptoJS.enc.Base64.parse(document.getElementById('key').innerText);
        var iv = CryptoJS.enc.Base64.parse(document.getElementById('iv').innerText);
        var ciphertext = document.getElementById('ciphertext').innerText;
        var decrypted = CryptoJS.AES.decrypt(ciphertext, key, { iv: iv });

        document.getElementById('output').innerText = decrypted.toString(CryptoJS.enc.Utf8);
    }
</script>

<%
    string plaintext = "the quick brown fox jumped over the lazy dog";
    string ciphertext;
    string decryptedtext;

    UTF8Encoding utf8 = new UTF8Encoding();

    AesCryptoServiceProvider aes = new AesCryptoServiceProvider();

    using (ICryptoTransform encryptor = aes.CreateEncryptor(aes.Key, aes.IV)) { 
        MemoryStream ms = new MemoryStream();
        CryptoStream cs = new CryptoStream(ms, encryptor, CryptoStreamMode.Write);
        byte[] bytes = utf8.GetBytes(plaintext);
        cs.Write(bytes, 0, bytes.Length);
        cs.FlushFinalBlock();
        ms.Position = 0;
        bytes = new byte[ms.Length];
        ms.Read(bytes, 0, bytes.Length);
        ciphertext = Convert.ToBase64String(bytes);
    }

    using (ICryptoTransform decryptor = aes.CreateDecryptor(aes.Key, aes.IV))
    {
        MemoryStream ms = new MemoryStream();
        CryptoStream cs = new CryptoStream(ms, decryptor, CryptoStreamMode.Write);
        byte[] bytes = Convert.FromBase64String(ciphertext);
        cs.Write(bytes, 0, bytes.Length);
        cs.FlushFinalBlock();
        ms.Position = 0;
        bytes = new byte[ms.Length];
        ms.Read(bytes, 0, bytes.Length);
        decryptedtext = utf8.GetString(bytes);
    }    
%>

<h1>Server-side in C# using System.Security.Cryptography</h1>
Key:<div id="key"><% Response.Write(Convert.ToBase64String(aes.Key)); %></div>
IV:<div id="iv"><% Response.Write(Convert.ToBase64String(aes.IV)); %></div>
Plain text:<div id="plaintext"><% Response.Write(plaintext); %></div>
Cipher text:<div id="ciphertext"><% Response.Write(ciphertext); %></div>
Decrypted text:<div id="decryptedtext"><% Response.Write(decryptedtext); %></div>

<h1>Client-side in JS using CryptoJS)</h1>
<div id="output"></div> 
```

# .net - 水平图表条 (Silverlight Toolkit)

> ID：15440171
> 
> 赞同：0
> 
> 时间：2013-03-15T18:57:27.950
> 
> 标签：.net, xaml, charts, silverlight-toolkit, bar-chart

是否可以水平显示条形图？

```
 <Grid x:Name="LayoutRoot" Background="White">
        <StackPanel>
            <toolkit:Chart Height="400" Width="600" Title="Mered data" >              
                    <toolkit:ColumnSeries ItemsSource="{Binding AverageImpressionLengths}" IndependentValueBinding="{Binding SeqName}"
                                          DependentValueBinding="{Binding Time}"  
                                          HorizontalAlignment="Left" Height="304" VerticalAlignment="Top" Width="266"/>

            </toolkit:Chart>
        </StackPanel>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:15:25.767

是的，有可能，您应该替换`ColumnSeries`为`BarSeries`：

```
<toolkit:Chart Height="400" Width="600" Title="Mered data" >              
    <toolkit:BarSeries ItemsSource="{Binding AverageImpressionLengths}" 
            IndependentValueBinding="{Binding SeqName}"
            DependentValueBinding="{Binding Time}"  />
</toolkit:Chart> 
```

# database - 使我的数据库和文件系统保持同步

> ID：15440172
> 
> 赞同：25
> 
> 时间：2013-03-15T18:57:30.243
> 
> 标签：database, file-storage

我正在开发一种将文件存储在文件系统中的软件，以及对数据库中这些文件的引用。因此可以在数据库中查询上传的文件，而无需访问文件系统。从我在其他帖子中读到的内容来看，大多数人说最好使用文件系统进行文件存储，而不是将二进制数据作为 BLOB 直接存储在数据库中。

所以现在我试图了解设置它的最佳方法，以便数据库和文件系统保持同步，并且我不会最终引用不存在的文件，或者文件占用空间未引用的文件系统。以下是我正在考虑的几个选项。

**选项 1：首先添加文件引用**

```
//Adds a reference to a file in the database
database.AddFileRef("newfile.txt"); 

//Stores the file in the file system
fileStorage.SaveFile("newfile.txt",dataStream); 
```

这个选项会有问题，因为对文件的引用是在实际文件之前添加的，因此另一个用户可能最终会在文件实际存储在系统中之前尝试下载文件。虽然，由于对文件的引用是事先创建的，因此在存储文件时可以使用主键值。

**选项 2：首先存储文件**

```
//Stores the file
fileStorage.SaveFile("newfile.txt",dataStream); 

//Adds a reference to the file in the database
//fails if reference file does not existing in file system
database.AddFileRef("newfile.txt"); 
```

此选项更好，但可以让某人将文件上传到从未被引用的系统。虽然这可以通过删除任何未引用文件的“Purge”或“CleanUpFileSystem”功能来解决。此选项也不允许使用数据库中的主键值存储文件。

**选项 3：待定状态**

```
//Adds a pending file reference to database
//pending files would be ignored by others
database.AddFileRef("newfile.txt"); 

//Stores the file, fails if there is no 
//matching pending file reference in the database
fileStorage.SaveFile("newfile.txt",dataStream); database

//marks the file reference as committed after file is uploaded
database.CommitFileRef("newfile.txt"); 
```

此选项允许在文件上传之前创建主键，但也可以防止其他用户在文件上传之前获得对文件的引用。虽然，文件可能永远不会被上传，并且文件引用可能会被挂起。然而，从数据库中清除待处理的引用也是相当简单的。

我倾向于选项 2，因为它很简单，而且我不必担心用户在上传文件之前会尝试请求文件。存储很便宜，所以如果我最终得到一些未引用的文件占用空间，这并不是世界末日。但这似乎也是一个常见问题，我想听听其他人如何解决它或我应该考虑的其他因素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:00:08.153

我想提出另一种选择。使文件名始终等于其内容的哈希值。然后，您可以随时安全地编写*任何内容，*前提是您在其他地方添加对它的引用之前这样做。

由于内容永远不会改变，因此永远不会出现同步问题。

这为您提供了免费的重复数据删除功能。删除变得更加困难。我推荐一个夜间垃圾收集过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:15:01.063

数据库的真正用途是什么？如果它只是一个文件列表，我认为您根本不需要它，并且没有它可以为您节省同步的麻烦。

如果您确信您需要它，那么从技术角度来看，选项 1 和 2 完全相同——这两个资源可能不同步，您需要一个常规流程来再次整合它们。所以在这里你应该选择最适合应用程序的选项。

选项 3 没有任何优势，但会使用更多资源。

请注意，按照 usr 的建议，使用散列具有理论上的冲突风险。而且你还需要一个定期整合过程，就像选项 1 和 2 一样。

另一个问题是您如何处理部分上传和正在进行的上传。这里可以使用选项 2，但您也可以使用在上传开始之前创建的第二个“标志”文件，并在上传完成后删除。这将帮助您确定哪些上传已被中止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T10:06:23.907

为了弥补您提到的*选项 1*的缺点，我使用类似的东西`fileStorage.FileExists("newfile.txt");`并过滤掉它返回负数的结果。

用`Python`行话：

```
import os
op = os.path

filter(lambda ref: op.exists(ref.path()), database.AllRefs()) 
```

# javascript - JavaScript：一般地从其类型创建对象并调用其构造函数

> ID：15440175
> 
> 赞同：1
> 
> 时间：2013-03-15T18:57:43.930
> 
> 标签：javascript, object, constructor

假设有一个带有 childType 属性的 JavaScript 对象，它是一个对象构造函数，并且您想编写一个通用的 addChild 方法。它需要创建 this.childType 的实例，并调用它的构造函数，将传入的任何参数传递给 addChild。

需要明确的是，重点是每个集合自己创建子对象，使用继承的泛型 addChild 方法及其已知的 childType，而不是验证传入的子对象的类型。

我不认为这很难做到，但我尝试了各种方法，但到目前为止都失败了。

**更新：**

我已经用迄今为止我所知道的最佳解决方案更新了[演示 plunk ，并在代码中包含了一些关于该问题的评论。](http://plnkr.co/edit/XrsGkwGBXT3vyCpylI6i)下面讨论的失败尝试不再存在。此解决方案要求所有潜在的 chold 对象都具有“新的不可知论构造函数”，因此仍然不理想。进一步的想法是最受欢迎的。

* * *

我知道这条线是错误的，有两个原因：

```
var child = new this.childItemType.call(args); 
```

首先是我认为需要将某种“this”传递给调用函数，但我看不出它会在那里。

第二个大概是第一个的结果，浏览器报错：

```
Uncaught TypeError: function call() { [native code] } is not a constructor 
```

我认为这应该是可行的，但是到目前为止，从 this.childType 和传递的参数创建该子对象的语法让我无法理解。有人可以在这里指出丢失的脑细胞吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:24:51.300

可能最简洁的方法是让 Dog ' `new`Agnostic'（参见 Effective JavaScript Item 33）。注意`Dog`构造函数现在将如何返回一个新`Dog`的，不管你如何调用它。

```
var Dog = function (name)
{
  if(!(this instanceof Dog)){
    return new Dog(name);
  }

  this.name = name;
  return this;
}; 
```

并使用“应用”而不是调用。

```
var child = this.childItemType.apply(null,arguments); 
```

虽然对于所有构造函数来说这似乎有点仪式感，但无论如何这实际上是一个不错的主意。我发现自己让我的大部分对象都是`new`不可知的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-14T15:00:37.473

而且不可知`new`的`arguments`oneliner看起来像这样:)

```
var Dog = function( name ) {
    if ( !(this instanceof Dog) ) { return new (Dog.bind.apply( Dog, [null].concat( Array.prototype.slice.apply( arguments ) ) )); }

    this.name = name;

    return this;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T00:45:21.330

你可以试试`Object.create();` [http://plnkr.co/edit/KjqQfev1k42bH0jAUrrA?p=preview](http://plnkr.co/edit/KjqQfev1k42bH0jAUrrA?p=preview)

```
var child = Object.create(this.childItemType,props); 
```

这会改变您的结构，但它使您不必编写弹性构造函数方法。另请注意，您将原型作为`childItemType`

```
Collection.call(this, Dog.prototype); 
```

而不是将参数传递给子对象的构造函数，而是传递一个属性对象：

```
smiths.addChild({name:{value:'Rover'}}); 
```

属性对象是这里的权衡。有关 Object.create 和“第二个参数”的更多信息[http://dailyjs.com/2012/06/04/js101-object-create/](http://dailyjs.com/2012/06/04/js101-object-create/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T14:11:37.220

> var child = new this.childItemType.call(args);

不，这确实试图`Function.prototype.call`用作构造函数（正如异常消息告诉你的那样）。但是，根本没有理由使用`call`：

```
var child = new this.childItemType(arg, arg2, …); 
```

> 首先是我认为需要将某种“this”传递给调用函数，但我看不出它会在那里。

是的，[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)期望某些东西被用作`thisArg`函数。然而，你似乎想要[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)一个[argumens 数组](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments) `args`。

那么构造函数应用于什么？这是新的实例——就像[`new`操作员](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)那样。所以为了模仿它，我们会使用

```
var child = Object.create(this.childItemType.prototype);
this.childItemType.apply(child, args); 
```

对于不使用`Object.create`构造函数并检查构造函数的返回类型的解决方案，请参阅[使用 .apply() 和 'new' 运算符。这可能吗？](https://stackoverflow.com/questions/1606797/use-of-apply-with-new-operator-is-this-possible).

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-15T19:14:04.533

正确答案是

```
var child = new this.childItemType(args); 
```

当您想在 javascript 中创建类/函数的对象时，您可以直接执行`new ClassName(arguments)`，调用和应用通常用于调用具有不同范围的类/函数的任何方法

# enthought - 如何使用 ScatterInspector 和 ScatterInspectorOverlay？

> ID：15440178
> 
> 赞同：1
> 
> 时间：2013-03-15T18:57:59.247
> 
> 标签：enthought, chaco, enaml

我想使用 chaco 工具`ScatterInspector`和/或`ScatterInspectorOverlay`enaml。我已经设置了一个非常简单的控制器和视图（下面的源代码），但无法确定如何进行。我尝试遵循我发现的最小和旧示例，但没有成功。

如果我取消注释覆盖部分`ScatterInspectorOverlay`，代码将无法运行

> 文件“.../chaco/scatter_inspector_overlay.py”，第 51 行，如果不是 plot 或不是 plot.index 或不是 getattr（plot，“value”，True）：

如果我注释掉覆盖部分，我当然不会得到我想要的覆盖行为，而且在移动鼠标时，得到

> 文件“.../chaco/tools/scatter_inspector.py”，第 48 行，在 normal_mouse_move index = plot.map_index((event.x, event.y), threshold=self.threshold)

view.enaml 来源：

```
from enaml.widgets.api import (
        Window, Container, EnableCanvas,
    )

enamldef ScatterView(Window):
    attr controller
    title = "Scatter Inspector Test"
    initial_size = (640,480)

    Container:

        EnableCanvas:
            component = controller.scatter_plot 
```

控制器.py 来源：

```
import enaml
from enaml.stdlib.sessions import show_simple_view
from traits.api import HasTraits, Instance
from chaco.api import Plot, ArrayPlotData, ScatterInspectorOverlay
from chaco.tools.api import ScatterInspector
from numpy import linspace, sin

class ScatterController(HasTraits):
    scatter_plot = Instance(Plot)

    def _scatter_plot_default(self):
        # data
        x = linspace(-14, 14, 100)
        y = sin(x) * x**3
        plotdata = ArrayPlotData(x = x, y = y)

        # plot
        scatter_plot = Plot(plotdata)
        renderer = scatter_plot.plot(("x", "y"), type="scatter", color="red")

        # inspector
        scatter_plot.tools.append(ScatterInspector(scatter_plot))

        # overlay
        # scatter_plot.overlays.append( ScatterInspectorOverlay(
        #         scatter_plot,
        #         hover_color = 'red',
        #         hover_marker_size = 6,
        #         selection_marker_size = 6,
        #         selection_color = 'yellow',
        #         selection_outline_color='purple',
        #         selection_line_width = 3
        #     ))

        #return
        return scatter_plot

if __name__ == "__main__":
    with enaml.imports():
        from view import ScatterView

    main_controller = ScatterController()
    window = ScatterView(controller=ScatterController())
    show_simple_view(window) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:40:29.823

我上面的代码的问题是我添加`ScatterInspector`了 to`scatter_plot`而不是 to`renderer`并且我错过了`[0]`get 的索引`renderer`。

不过，我真正想做的关键是在鼠标悬停在数据点上和/或选择数据点时收到通知。我添加了`when_hover_or_selection_changes`它显示了如何做到这一点。

工作控制器.py：

```
...
# plot
scatter_plot = Plot(plotdata)
renderer = scatter_plot.plot(("x", "y"), type="scatter", color="lightblue")[0]

# inspector
renderer.tools.append(ScatterInspector(renderer))

# overlay
renderer.overlays.append(ScatterInspectorOverlay(renderer,
                hover_color="red",
                hover_marker_size=6,
                selection_marker_size=6,
                selection_color="yellow",
                selection_outline_color="purple",
                selection_line_width=3))

...

# get notified when hover or selection changes
@on_trait_change('renderer.index.metadata')
def when_hover_or_selection_changes(self):
    print 'renderer.index.metadata = ', self.renderer.index.metadata 
```

# drupal - 我遵循了一些指南，但我的 Local Drupal 7 Multisite 仍然无法正常工作

> ID：15440182
> 
> 赞同：0
> 
> 时间：2013-03-15T18:58:54.447
> 
> 标签：drupal, apache2, localhost, local

因此，我遵循了一些指南*，尝试在 Mac OsX 10.6 上让本地 Drupal 7 Multisite 与我的 apache2 服务器一起工作，每当我尝试访问我的子站点时，我仍然会被定向到“主”站点。我还搜索了 stackoverflow 的任何相关答案，但无济于事。

我已经包含了我的 HOSTS、HTTPD-VHOSTS.CONF、HTTPD.CONF、SITES.PHP 和 Drupal 的 .HTACCESS 文件。

-- 主机 --

```
127.0.0.1   localhost
255.255.255.255 broadcasthost
::1             localhost 
fe80::1%lo0 localhost

127.0.0.1       sdmdrupaldev.local
127.0.0.1       moduleshed.sdmdrupaldev.local
127.0.0.1       themeshed.sdmdrupaldev.local 
```

-- 结束主机 --

-- 虚拟主机 --

```
NameVirtualHost *:80

<VirtualHost *:80>
    DocumentRoot "/Library/WebServer/Documents"
    ServerName localhost
    ErrorLog "/Users/seviforeman/Sites/vhost_status/apache_sites_errorlog.txt"
    CustomLog "/Users/seviforeman/Sites/vhost_status/apache_sites_custom_errorlog.txt" common
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot "/Library/WebServer/Documents/sdmdrupaldev.com"
    ServerName sdmdrupaldev.local
    ServerAlias *.sdmdrupaldev.local
    ErrorLog  "/Users/seviforeman/Sites/vhost_status/apache_sites_errorlog.txt"
    CustomLog "/Users/seviforeman/Sites/vhost_status/apache_sites_custom_errorlog.txt" common
</VirtualHost>

<VirtualHost *:80>
   DocumentRoot "/Library/WebServer/Documents/sdmdrupaldev.com/sites/moduleshed.com"
   ServerName moduleshed.sdmdrupaldev.local
   ErrorLog "/Users/seviforeman/Sites/vhost_status/apache_sites_errorlog.txt"
</VirtualHost>

<VirtualHost *:80>
   DocumentRoot "/Library/WebServer/Documents/sdmdrupaldev.com/sites/themeshed.com"
   ServerName themeshed.sdmdrupaldev.local
   ErrorLog "/Users/seviforeman/Sites/vhost_status/apache_sites_errorlog.txt"
</VirtualHost> 
```

-- 结束虚拟主机 --

-- HTTPD --

```
#
# This is the main Apache HTTP server configuration file.  It contains the
# configuration directives that give the server its instructions.
# See <URL:http://httpd.apache.org/docs/2.2> for detailed information.
# In particular, see 
# <URL:http://httpd.apache.org/docs/2.2/mod/directives.html>
# for a discussion of each configuration directive.
#
# Do NOT simply read the instructions in here without understanding
# what they do.  They're here only as hints or reminders.  If you are unsure
# consult the online docs. You have been warned.  
#
# Configuration and logfile names: If the filenames you specify for many
# of the server's control files begin with "/" (or "drive:/" for Win32), the
# server will use that explicit path.  If the filenames do *not* begin
# with "/", the value of ServerRoot is prepended -- so "/private/var/log/apache2/foo_log"
# with ServerRoot set to "/usr" will be interpreted by the
# server as "/usr//private/var/log/apache2/foo_log".

#
# ServerRoot: The top of the directory tree under which the server's
# configuration, error, and log files are kept.
#
# Do not add a slash at the end of the directory path.  If you point
# ServerRoot at a non-local disk, be sure to point the LockFile directive
# at a local disk.  If you wish to share the same ServerRoot for multiple
# httpd daemons, you will need to change at least LockFile and PidFile.
#
ServerRoot "/usr"

#
# Listen: Allows you to bind Apache to specific IP addresses and/or
# ports, instead of the default. See also the <VirtualHost>
# directive.
#
# Change this to Listen on specific IP addresses as shown below to 
# prevent Apache from glomming onto all bound IP addresses.
#
#Listen 12.34.56.78:80
Listen 80

#
# Dynamic Shared Object (DSO) Support
#
# To be able to use the functionality of a module which was built as a DSO you
# have to place corresponding `LoadModule' lines at this location so the
# directives contained in it are actually available _before_ they are used.
# Statically compiled modules (those listed by `httpd -l') do not need
# to be loaded here.
#
# Example:
# LoadModule foo_module modules/mod_foo.so
#
LoadModule authn_file_module libexec/apache2/mod_authn_file.so
LoadModule authn_dbm_module libexec/apache2/mod_authn_dbm.so
LoadModule authn_anon_module libexec/apache2/mod_authn_anon.so
LoadModule authn_dbd_module libexec/apache2/mod_authn_dbd.so
LoadModule authn_default_module libexec/apache2/mod_authn_default.so
LoadModule authz_host_module libexec/apache2/mod_authz_host.so
LoadModule authz_groupfile_module libexec/apache2/mod_authz_groupfile.so
LoadModule authz_user_module libexec/apache2/mod_authz_user.so
LoadModule authz_dbm_module libexec/apache2/mod_authz_dbm.so
LoadModule authz_owner_module libexec/apache2/mod_authz_owner.so
LoadModule authz_default_module libexec/apache2/mod_authz_default.so
LoadModule auth_basic_module libexec/apache2/mod_auth_basic.so
LoadModule auth_digest_module libexec/apache2/mod_auth_digest.so
LoadModule cache_module libexec/apache2/mod_cache.so
LoadModule disk_cache_module libexec/apache2/mod_disk_cache.so
LoadModule mem_cache_module libexec/apache2/mod_mem_cache.so
LoadModule dbd_module libexec/apache2/mod_dbd.so
LoadModule dumpio_module libexec/apache2/mod_dumpio.so
LoadModule ext_filter_module libexec/apache2/mod_ext_filter.so
LoadModule include_module libexec/apache2/mod_include.so
LoadModule filter_module libexec/apache2/mod_filter.so
LoadModule substitute_module libexec/apache2/mod_substitute.so
LoadModule deflate_module libexec/apache2/mod_deflate.so
LoadModule log_config_module libexec/apache2/mod_log_config.so
LoadModule log_forensic_module libexec/apache2/mod_log_forensic.so
LoadModule logio_module libexec/apache2/mod_logio.so
LoadModule env_module libexec/apache2/mod_env.so
LoadModule mime_magic_module libexec/apache2/mod_mime_magic.so
LoadModule cern_meta_module libexec/apache2/mod_cern_meta.so
LoadModule expires_module libexec/apache2/mod_expires.so
LoadModule headers_module libexec/apache2/mod_headers.so
LoadModule ident_module libexec/apache2/mod_ident.so
LoadModule usertrack_module libexec/apache2/mod_usertrack.so
#LoadModule unique_id_module libexec/apache2/mod_unique_id.so
LoadModule setenvif_module libexec/apache2/mod_setenvif.so
LoadModule version_module libexec/apache2/mod_version.so
LoadModule proxy_module libexec/apache2/mod_proxy.so
LoadModule proxy_connect_module libexec/apache2/mod_proxy_connect.so
LoadModule proxy_ftp_module libexec/apache2/mod_proxy_ftp.so
LoadModule proxy_http_module libexec/apache2/mod_proxy_http.so
LoadModule proxy_scgi_module libexec/apache2/mod_proxy_scgi.so
LoadModule proxy_ajp_module libexec/apache2/mod_proxy_ajp.so
LoadModule proxy_balancer_module libexec/apache2/mod_proxy_balancer.so
LoadModule ssl_module libexec/apache2/mod_ssl.so
LoadModule mime_module libexec/apache2/mod_mime.so
LoadModule dav_module libexec/apache2/mod_dav.so
LoadModule status_module libexec/apache2/mod_status.so
LoadModule autoindex_module libexec/apache2/mod_autoindex.so
LoadModule asis_module libexec/apache2/mod_asis.so
LoadModule info_module libexec/apache2/mod_info.so
LoadModule cgi_module libexec/apache2/mod_cgi.so
LoadModule dav_fs_module libexec/apache2/mod_dav_fs.so
LoadModule vhost_alias_module libexec/apache2/mod_vhost_alias.so
LoadModule negotiation_module libexec/apache2/mod_negotiation.so
LoadModule dir_module libexec/apache2/mod_dir.so
LoadModule imagemap_module libexec/apache2/mod_imagemap.so
LoadModule actions_module libexec/apache2/mod_actions.so
LoadModule speling_module libexec/apache2/mod_speling.so
LoadModule userdir_module libexec/apache2/mod_userdir.so
LoadModule alias_module libexec/apache2/mod_alias.so
LoadModule rewrite_module libexec/apache2/mod_rewrite.so
LoadModule bonjour_module     libexec/apache2/mod_bonjour.so
LoadModule php5_module        libexec/apache2/libphp5.so
#LoadModule fastcgi_module     libexec/apache2/mod_fastcgi.so

<IfModule !mpm_netware_module>
<IfModule !mpm_winnt_module>
#
# If you wish httpd to run as a different user or group, you must run
# httpd as root initially and it will switch.  
#
# User/Group: The name (or #number) of the user/group to run httpd as.
# It is usually good practice to create a dedicated user and group for
# running httpd, as with most system services.
#
User _www
Group _www

</IfModule>
</IfModule>

# 'Main' server configuration
#
# The directives in this section set up the values used by the 'main'
# server, which responds to any requests that aren't handled by a
# <VirtualHost> definition.  These values also provide defaults for
# any <VirtualHost> containers you may define later in the file.
#
# All of these directives may appear inside <VirtualHost> containers,
# in which case these default settings will be overridden for the
# virtual host being defined.
#

#
# ServerAdmin: Your address, where problems with the server should be
# e-mailed.  This address appears on some server-generated pages, such
# as error documents.  e.g. admin@your-domain.com
#
#ServerAdmin example@example.com

#
# ServerName gives the name and port that the server uses to identify itself.
# This can often be determined automatically, but we recommend you specify
# it explicitly to prevent problems during startup.
#
# If your host doesn't have a registered DNS name, enter its IP address here.
#
#ServerName www.example.com:80
ServerName localhost80
#
# DocumentRoot: The directory out of which you will serve your
# documents. By default, all requests are taken from this directory, but
# symbolic links and aliases may be used to point to other locations.
#
DocumentRoot "/Library/WebServer/Documents"

# 
# Each directory to which Apache has access can be configured with respect
# to which services and features are allowed and/or disabled in that
# directory (and its subdirectories). 
#
# First, we configure the "default" to be a very restrictive set of 
# features.  
#
<Directory />
    Options FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
</Directory>

#
# Note that from this point forward you must specifically allow
# particular features to be enabled - so if something's not working as
# you might expect, make sure that you have specifically enabled it
# below.
#

#
# This should be changed to whatever you set DocumentRoot to.
#
<Directory "/Library/WebServer/Documents">
    #
    # Possible values for the Options directive are "None", "All",
    # or any combination of:
    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
    #
    # Note that "MultiViews" must be named *explicitly* --- "Options All"
    # doesn't give it to you.
    #
    # The Options directive is both complicated and important.  Please see
    # http://httpd.apache.org/docs/2.2/mod/core.html#options
    # for more information.
    #
    Options Indexes FollowSymLinks MultiViews

    #
    # AllowOverride controls what directives may be placed in .htaccess files.
    # It can be "All", "None", or any combination of the keywords:
    #   Options FileInfo AuthConfig Limit
    #
    AllowOverride All

    #
    # Controls who can get stuff from this server.
    #
    Order allow,deny
    Allow from all

</Directory>

#
# DirectoryIndex: sets the file that Apache will serve if a directory
# is requested.
#
<IfModule dir_module>
    DirectoryIndex index.(html|php)
</IfModule>

#
# The following lines prevent .htaccess and .htpasswd files from being 
# viewed by Web clients. 
#
<FilesMatch "^\.([Hh][Tt]|[Dd][Ss]_[Ss])">
    Order allow,deny
    Deny from all
    Satisfy All
</FilesMatch>

#
# Apple specific filesystem protection.
#
<Files "rsrc">
    Order allow,deny
    Deny from all
    Satisfy All
</Files>
<DirectoryMatch ".*\.\.namedfork">
    Order allow,deny
    Deny from all
    Satisfy All
</DirectoryMatch>

#
# ErrorLog: The location of the error log file.
# If you do not specify an ErrorLog directive within a <VirtualHost>
# container, error messages relating to that virtual host will be
# logged here.  If you *do* define an error logfile for a <VirtualHost>
# container, that host's errors will be logged there and not here.
#
ErrorLog "/private/var/log/apache2/error_log"

#
# LogLevel: Control the number of messages logged to the error_log.
# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
#
LogLevel debug

<IfModule log_config_module>
    #
    # The following directives define some format nicknames for use with
    # a CustomLog directive (see below).
    #
    LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
    LogFormat "%h %l %u %t \"%r\" %>s %b" common

    <IfModule logio_module>
      # You need to enable mod_logio.c to use %I and %O
      LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio
    </IfModule>

    #
    # The location and format of the access logfile (Common Logfile Format).
    # If you do not define any access logfiles within a <VirtualHost>
    # container, they will be logged here.  Contrariwise, if you *do*
    # define per-<VirtualHost> access logfiles, transactions will be
    # logged therein and *not* in this file.
    #
    CustomLog "/private/var/log/apache2/access_log" common

    #
    # If you prefer a logfile with access, agent, and referer information
    # (Combined Logfile Format) you can use the following directive.
    #
    #CustomLog "/private/var/log/apache2/access_log" combined
</IfModule>

<IfModule alias_module>
    #
    # Redirect: Allows you to tell clients about documents that used to 
    # exist in your server's namespace, but do not anymore. The client 
    # will make a new request for the document at its new location.
    # Example:
    # Redirect permanent /foo http://www.example.com/bar

    #
    # Alias: Maps web paths into filesystem paths and is used to
    # access content that does not live under the DocumentRoot.
    # Example:
    # Alias /webpath /full/filesystem/path
    #
    # If you include a trailing / on /webpath then the server will
    # require it to be present in the URL.  You will also likely
    # need to provide a <Directory> section to allow access to
    # the filesystem path.

    #
    # ScriptAlias: This controls which directories contain server scripts. 
    # ScriptAliases are essentially the same as Aliases, except that
    # documents in the target directory are treated as applications and
    # run by the server when requested rather than as documents sent to the
    # client.  The same rules about trailing "/" apply to ScriptAlias
    # directives as to Alias.
    #
    ScriptAliasMatch ^/cgi-bin/((?!(?i:webobjects)).*$) "/Library/WebServer/CGI-Executables/$1"

</IfModule>

<IfModule cgid_module>
    #
    # ScriptSock: On threaded servers, designate the path to the UNIX
    # socket used to communicate with the CGI daemon of mod_cgid.
    #
    #Scriptsock /private/var/run/cgisock
</IfModule>

#
# "/Library/WebServer/CGI-Executables" should be changed to whatever your ScriptAliased
# CGI directory exists, if you have that configured.
#
<Directory "/Library/WebServer/CGI-Executables">
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
</Directory>

#
# DefaultType: the default MIME type the server will use for a document
# if it cannot otherwise determine one, such as from filename extensions.
# If your server contains mostly text or HTML documents, "text/plain" is
# a good value.  If most of your content is binary, such as applications
# or images, you may want to use "application/octet-stream" instead to
# keep browsers from trying to display binary files as though they are
# text.
#
DefaultType text/plain

<IfModule mime_module>
    #
    # TypesConfig points to the file containing the list of mappings from
    # filename extension to MIME-type.
    #
    TypesConfig /private/etc/apache2/mime.types

    #
    # AddType allows you to add to or override the MIME configuration
    # file specified in TypesConfig for specific file types.
    #
    #AddType application/x-gzip .tgz
    #
    # AddEncoding allows you to have certain browsers uncompress
    # information on the fly. Note: Not all browsers support this.
    #
    #AddEncoding x-compress .Z
    #AddEncoding x-gzip .gz .tgz
    #
    # If the AddEncoding directives above are commented-out, then you
    # probably should define those extensions to indicate media types:
    #
    AddType application/x-compress .Z
    AddType application/x-gzip .gz .tgz

    #
    # AddHandler allows you to map certain file extensions to "handlers":
    # actions unrelated to filetype. These can be either built into the server
    # or added with the Action directive (see below)
    #
    # To use CGI scripts outside of ScriptAliased directories:
    # (You will also need to add "ExecCGI" to the "Options" directive.)
    #
    #AddHandler cgi-script .cgi

    # For type maps (negotiated resources):
    #AddHandler type-map var

    #
    # Filters allow you to process content before it is sent to the client.
    #
    # To parse .shtml files for server-side includes (SSI):
    # (You will also need to add "Includes" to the "Options" directive.)
    #
    #AddType text/html .shtml
    #AddOutputFilter INCLUDES .shtml
</IfModule>

#
# The mod_mime_magic module allows the server to use various hints from the
# contents of the file itself to determine its type.  The MIMEMagicFile
# directive tells the module where the hint definitions are located.
#
#MIMEMagicFile /private/etc/apache2/magic

#
# Customizable error responses come in three flavors:
# 1) plain text 2) local redirects 3) external redirects
#
# Some examples:
#ErrorDocument 500 "The server made a boo boo."
#ErrorDocument 404 /missing.html
#ErrorDocument 404 "/cgi-bin/missing_handler.pl"
#ErrorDocument 402 http://www.example.com/subscription_info.html
#

#
# EnableMMAP and EnableSendfile: On systems that support it, 
# memory-mapping or the sendfile syscall is used to deliver
# files.  This usually improves server performance, but must
# be turned off when serving from networked-mounted 
# filesystems or if support for these functions is otherwise
# broken on your system.
#
#EnableMMAP off
#EnableSendfile off

# 6894961
TraceEnable off

# Supplemental configuration
#
# The configuration files in the /private/etc/apache2/extra/ directory can be 
# included to add extra features or to modify the default configuration of 
# the server, or you may simply copy their contents here and change as 
# necessary.

# Server-pool management (MPM specific)
Include /private/etc/apache2/extra/httpd-mpm.conf

# Multi-language error messages
#Include /private/etc/apache2/extra/httpd-multilang-errordoc.conf

# Fancy directory listings
Include /private/etc/apache2/extra/httpd-autoindex.conf

# Language settings
Include /private/etc/apache2/extra/httpd-languages.conf

# User home directories
Include /private/etc/apache2/extra/httpd-userdir.conf

# Real-time info on requests and configuration
#Include /private/etc/apache2/extra/httpd-info.conf

# Virtual hosts
Include /private/etc/apache2/extra/httpd-vhosts.conf

# Local access to the Apache HTTP Server Manual
Include /private/etc/apache2/extra/httpd-manual.conf

# Distributed authoring and versioning (WebDAV)
#Include /private/etc/apache2/extra/httpd-dav.conf

# Various default settings
#Include /private/etc/apache2/extra/httpd-default.conf

# Secure (SSL/TLS) connections
#Include /private/etc/apache2/extra/httpd-ssl.conf
#
# Note: The following must must be present to support
#       starting without SSL on platforms with no /dev/random equivalent
#       but a statically compiled-in mod_ssl.
#
<IfModule ssl_module>
SSLRandomSeed startup builtin
SSLRandomSeed connect builtin
</IfModule>

Include /private/etc/apache2/other/*.conf 
```

-- 结束 HTTPD --

-- 网站 --

```
<?php
// sdmdrupaldev.com sub sites
$sites['themeshed.sdmdrupaldev.com'] = 'themeshed.com';
$sites['moduleshed.sdmdrupaldev.com'] = 'moduleshed.com'; 
```

-- 终点站 --

-- DRUPAL 的 .HTACCESS 文件 --

```
#
# Apache/PHP/Drupal settings:
#

# Protect files and directories from prying eyes.
<FilesMatch "\.(engine|inc|info|install|make|module|profile|test|po|sh|.*sql|theme|tpl(\.php)?|xtmpl)$|^(\..*|Entries.*|Repository|Root|Tag|Template)$">
  Order allow,deny
</FilesMatch>

# Don't show directory listings for URLs which map to a directory.
Options -Indexes

# Follow symbolic links in this directory.
Options +FollowSymLinks

# Make Drupal handle any 404 errors.
ErrorDocument 404 /index.php

# Set the default handler.
DirectoryIndex index.php index.html index.htm

# Override PHP settings that cannot be changed at runtime. See
# sites/default/default.settings.php and drupal_environment_initialize() in
# includes/bootstrap.inc for settings that can be changed at runtime.

# PHP 5, Apache 1 and 2.
<IfModule mod_php5.c>
  php_flag magic_quotes_gpc                 off
  php_flag magic_quotes_sybase              off
  php_flag register_globals                 off
  php_flag session.auto_start               off
  php_value mbstring.http_input             pass
  php_value mbstring.http_output            pass
  php_flag mbstring.encoding_translation    off
</IfModule>

# Requires mod_expires to be enabled.
<IfModule mod_expires.c>
  # Enable expirations.
  ExpiresActive On

  # Cache all files for 2 weeks after access (A).
  ExpiresDefault A1209600

  <FilesMatch \.php$>
    # Do not allow PHP scripts to be cached unless they explicitly send cache
    # headers themselves. Otherwise all scripts would have to overwrite the
    # headers set by mod_expires if they want another caching behavior. This may
    # fail if an error occurs early in the bootstrap process, and it may cause
    # problems if a non-Drupal PHP file is installed in a subdirectory.
    ExpiresActive Off
  </FilesMatch>
</IfModule>

# Various rewrite rules.
<IfModule mod_rewrite.c>
  RewriteEngine on

  # Block access to "hidden" directories whose names begin with a period. This
  # includes directories used by version control systems such as Subversion or
  # Git to store control files. Files whose names begin with a period, as well
  # as the control files used by CVS, are protected by the FilesMatch directive
  # above.
  #
  # NOTE: This only works when mod_rewrite is loaded. Without mod_rewrite, it is
  # not possible to block access to entire directories from .htaccess, because
  # <DirectoryMatch> is not allowed here.
  #
  # If you do not have mod_rewrite installed, you should remove these
  # directories from your webroot or otherwise protect them from being
  # downloaded.
  RewriteRule "(^|/)\." - [F]

  # If your site can be accessed both with and without the 'www.' prefix, you
  # can use one of the following settings to redirect users to your preferred
  # URL, either WITH or WITHOUT the 'www.' prefix. Choose ONLY one option:
  #
  # To redirect all users to access the site WITH the 'www.' prefix,
  # (http://example.com/... will be redirected to http://www.example.com/...)
  # uncomment the following:
  # RewriteCond %{HTTP_HOST} !^www\. [NC]
  # RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
  #
  # To redirect all users to access the site WITHOUT the 'www.' prefix,
  # (http://www.example.com/... will be redirected to http://example.com/...)
  # uncomment the following:
  # RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  # RewriteRule ^ http://%1%{REQUEST_URI} [L,R=301]

  # Modify the RewriteBase if you are using Drupal in a subdirectory or in a
  # VirtualDocumentRoot and the rewrite rules are not working properly.
  # For example if your site is at http://example.com/drupal uncomment and
  # modify the following line:
  # RewriteBase /drupal
  #
  # If your site is running in a VirtualDocumentRoot at http://example.com/,
  # uncomment the following line:
  # RewriteBase /

  # Pass all requests not referring directly to files in the filesystem to
  # index.php. Clean URLs are handled in drupal_environment_initialize().
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^ index.php [L]

  # Rules to correctly serve gzip compressed CSS and JS files.
  # Requires both mod_rewrite and mod_headers to be enabled.
  <IfModule mod_headers.c>
    # Serve gzip compressed CSS files if they exist and the client accepts gzip.
    RewriteCond %{HTTP:Accept-encoding} gzip
    RewriteCond %{REQUEST_FILENAME}\.gz -s
    RewriteRule ^(.*)\.css $1\.css\.gz [QSA]

    # Serve gzip compressed JS files if they exist and the client accepts gzip.
    RewriteCond %{HTTP:Accept-encoding} gzip
    RewriteCond %{REQUEST_FILENAME}\.gz -s
    RewriteRule ^(.*)\.js $1\.js\.gz [QSA]

    # Serve correct content types, and prevent mod_deflate double gzip.
    RewriteRule \.css\.gz$ - [T=text/css,E=no-gzip:1]
    RewriteRule \.js\.gz$ - [T=text/javascript,E=no-gzip:1]

    <FilesMatch "(\.js\.gz|\.css\.gz)$">
      # Serve correct encoding type.
      Header set Content-Encoding gzip
      # Force proxies to cache gzipped & non-gzipped css/js files separately.
      Header append Vary Accept-Encoding
    </FilesMatch>
  </IfModule>
</IfModule> 
```

-- 结束 .HTACCESS --

每个文件的权限如下：

主机

-rw-r--r--

虚拟主机

-rw-r--r--

HTTPD

-rw-r--r--

网站

-rw-rw-rw-

DRUPAL 的 HTACCESS

-rw-r--r--

任何帮助将非常感激。谢谢你。

我尝试遵循的指南：

[http://drupal.org/node/238805](http://drupal.org/node/238805)

[http://groups.drupal.org/node/121989](http://groups.drupal.org/node/121989)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:00:14.583

`ServerAlias *.sdmdrupaldev.local`vhosts 文件中第二个 VirtualHost 中的指令拦截所有后续服务器名称。

当您的 Web 服务器收到对 moduleshed.sdmdrupaldev.local 或 themeeshed.sdmdrupaldev.local（或任何.sdmdrupaldev.local）的请求时，由于您在ServerAlias 指令。

# c - Makefile 包含头文件

> ID：15440183
> 
> 赞同：18
> 
> 时间：2013-03-15T18:58:59.667
> 
> 标签：c, makefile

我是 Linux 编程的新手，我尝试编译一个简单的测试结构。但是编译时出现错误。添加 inc.c （在应用程序：行中）也不起作用。我应该如何正确包含文件？

生成文件：

```
app: main.c inc.h
    cc -o app main.c 
```

终端：

```
make
cc -o app main.c
/tmp/ccGgdRNy.o: In function `main':
main.c:(.text+0x14): undefined reference to `test'
collect2: error: ld returned 1 exit status
make: *** [app] Error 1 
```

主.c：

```
#include <stdio.h>
#include "inc.h"

int main()
{
    printf("Kijken of deze **** werkt:\n");
    test();

    getchar();
    return 0;
} 
```

英寸

```
#ifndef INCLUDE_H

#define INCLUDE_H

void test();

#endif 
```

公司

```
#include <stdio.h>

void test()
{
    printf("Blijkbaar wel!");
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-15T19:00:30.793

您必须链接到`inc.o`您通过编译获得的编译单元`inc.c`。

一般来说，这意味着您必须提供所有包含在`main.c`（传递）中使用的函数的目标文件。您可以使用 的隐式规则编译这些`make`，无需指定额外的规则。

你可以说：

```
app: main.c inc.o inc.h
    cc -o app inc.o main.c 
```

并且`make`会自己知道如何编译`inc.o`，`inc.c`尽管在确定是否必须重建时*不会*考虑。为此，您*必须*指定自己的规则。`inc.h``inc.o`

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T19:01:12.917

你没有编译inc.c文件

```
app: main.c inc.h
    cc -o app main.c inc.c 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-01T11:24:41.290

你也需要编译`inc.c`。一种合适的方法（更好地扩展到更大的应用程序）是将 Makefile 拆分为不同的目标。这个想法是：每个目标文件都有一个目标，然后是最终二进制文件的一个目标。要编译目标文件，请使用`-c`参数。

```
app: main.o inc.o
    cc -o app main.o inc.o

main.o: main.c inc.h
    cc -c main.c

inc.o: inc.c inc.h
    cc -c inc.c 
```*

# mysql - 无法连接到 SQL Server AppHarbor

> ID：15440189
> 
> 赞同：2
> 
> 时间：2013-03-15T18:59:26.223
> 
> 标签：mysql, sql-server, connection-string, appharbor

```
 <entityFramework>
    <defaultConnectionFactory  type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework> 
```

以上有关系吗？我只是把它放在那里，以免进一步搞砸。但下面是我感兴趣的，是我本地sql server的连接字符串

```
 <connectionStrings>
    <add name="ApplicationServices" connectionString="Data Source=localhost;Initial Catalog=TestDB;User ID=lews;Password='therin'" providerName="System.Data.SqlClient" /> 
```

**“当您在 Sequelizer 上创建数据库时，您可以指定连接字符串别名。这是在 Sequelizer 附加页面上完成的（按照应用程序概览中的“转到...”链接）。如果您将此名称设置为配置文件中连接字符串的名称，我们会在部署代码时自动将其替换为您的 Sequelizer 连接字符串。”**

这是 Appharbor 文档中的一个片段。所以我假设 AppHarbor 会自动将数据源、初始目录、用户 ID 和密码替换为正确的值。但是由于某种原因无法连接。

下面是我这次与 MySQL 一起使用的另一个字符串，我再次假设 AppHarbor 应该自动注入正确的值，但它给出的错误是：

“在应用程序配置文件中找不到人员实体”这是怎么回事？

```
 <add name="PeopleEntities" connectionString="metadata=res://*/Context.People.csdl|res://*/Context.People.ssdl|res://*/Context.People.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;server=localhost;user id=root;database=people&quot;" providerName="System.Data.EntityClient" />
      </connectionStrings> 
```

顺便说一句，名称“PeopleEntities”和“ApplicationServices”在 AppHarbor 上用作别名。而且我不知道如何使用文档中给出的代码，数据库不是我的事。我如何同时使用本地和远程连接字符串？我在代码的哪里构建字符串并注入它？每当我创建 DBContext 实例时都必须这样做吗？ETC..

任何想法都会很棒，谢谢！

**编辑：** 顺便说一句，如果我在 app.config 中硬编码连接字符串并使用 wcftestclient，它可以工作，它会查询数据库..但这不是一个好主意，显然连接字符串可以在没有警告的情况下更改。

无论如何，如果我使用硬编码的字符串部署它并使用我的站点连接到数据库.. 它不会查询 SQL 服务器.. 真的很困惑:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:20:15.927

[http://support.appharbor.com/discussions/problems/2687-solved-mysql-provider-with-entity-framework-problem](http://support.appharbor.com/discussions/problems/2687-solved-mysql-provider-with-entity-framework-problem) 对于实体​​框架：这段标记非常重要：

```
 <system.data>
          <DbProviderFactories>
            <clear />
            <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient"
            description=".Net Framework Data Provider for MySQL"
            type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, 
            Version=6.4.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
          </DbProviderFactories>
        </system.data> 
```

哦，确保 MySQL 连接器组件是本地的。它也应该在您的 web.config 文件中，以确保将其放在 WCF 的 App.config 中。在连接字符串中使用相同的插件别名。

对于 SQL Server 插件：您需要在 web.config 中使用此标记：

```
<system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5"/>
     <membership>
      <providers>
        <clear />
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
      </providers>
    </membership>
    <profile>
      <providers>
        <clear />
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
      </providers>
    </profile>
    <roleManager enabled="true">
      <providers>
        <clear />
        <add connectionStringName="ApplicationServices" applicationName="/" name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" />
        <add applicationName="/" name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" />
      </providers>
    </roleManager>
  </system.web> 
```

你应该很高兴去..

# javascript - Facebook登录行为奇怪

> ID：15440192
> 
> 赞同：0
> 
> 时间：2013-03-15T18:59:32.900
> 
> 标签：javascript, facebook, login, defined

我有一个通过 facebook 选项登录的网站

我不知道出了什么问题，我遇到了两种错误

第一个，即使对我来说它有效（Chrome，资源管理器）我的朋友收到“new_fb_login（）未定义”错误

刚才我开始收到那些模棱两可的错误（chrome debug）：

```
Unsafe JavaScript attempt to access frame with URL **facebooky URL** from
frame with URL http://site.co.il/. The frame being accessed set
'document.domain' to 'facebook.com', but the frame requesting access did not.
Both must set 'document.domain' to the same value to allow access. 
```

我认为这可能与我当前受密码保护的网站有关，因为现在当我放回密码时，我才开始获取它们，但是禁用后它们并没有停止，可能需要一些时间来刷新？...

我希望能对此有所了解，谢谢！

这是我的代码，就在标签之后

```
<div id="fb-root"></div>
<script>
    function new_fb_login() {  //
        if(!fb_connected){
            FB.login(function(response) {
                if (response.authResponse) {
                    fb_connected = true;
                    console.log('connected'); //Approved the app just now
                    login(true);
                } else {
                    fb_connected = false;
                    console.log('cancelled');
                }
            });
        }
        else{
            FB.api('/me', function(response) {
                login(true);
            });
        }
    }
function testAPI() {
    console.log('Logged');
    FB.api('/me', function(response) {
        console.log('Welcome, ' + response.name + '.');
    });
}
window.fbAsyncInit = function() {
    FB.init({
      appId      : 'MyActualCode', // App ID
      channelUrl : '//WWW.site.CO.IL/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional init code here
    FB.getLoginStatus(function(response) {
      if (response.status === 'connected') {
        console.log('connected');
        fb_connected = true;
        //testAPI();
      } else if (response.status === 'not_authorized') {
          fb_connected = false;
          console.log('not_authorized');
        //login();
      } else {
        console.log('not_logged_in');
        fb_connected = false;
        //login();
      }
     });
};

// Load the SDK Asynchronously
(function(d){
var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
if (d.getElementById(id)) {return;}
js = d.createElement('script'); js.id = id; js.async = true;
js.src = "//connect.facebook.net/en_US/all.js";
ref.parentNode.insertBefore(js, ref);
}(document)); 
```

# javascript - JQuery Mobile 自动添加奇怪的加载消息

> ID：15440200
> 
> 赞同：1
> 
> 时间：2013-03-15T18:59:55.110
> 
> 标签：javascript, jquery, css, html, jquery-mobile

我在我的网站 ( [http://www.simpleprods.com](http://www.simpleprods.com) ) 上添加了对 Jquery Mobile 的引用，以获取事件 vmousedown、vmouseup 等。我只需要这些，尽管 JQuery mobile 烦人地向我的网页添加了一些丑陋的自动加载消息。它 100% 来自 JQuery 手机。**我只想要 vmousedown、vmouseup 和 vmousemove，我不需要任何加载消息和那个橙色框。**我已经知道如何取消消息，但橙色框就是无法摆脱。

有谁知道该怎么做？**如果有人能告诉我如何在没有 JQuery mobile 拥有的所有其他东西的情况下获得 vmousedown、vmouseup 和 vmousemove，我会很高兴......**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:09:08.140

您可以重建 jQuery Mobile 框架以仅具有您需要的功能。

去这个网站：

[http://jquerymobile.com/download-builder/](http://jquerymobile.com/download-builder/)

选择：

**虚拟鼠标 (vmouse) 绑定**

之后，只需单击**Build My Download**。

例子：

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script type="text/javascript" src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>   
    <script src="jquery.mobile.custom.js"></script> 
    <script>
        $(document).on('vmousedown', '[data-role="content"]', function(){       
            alert('asdas');
        }); 
    </script>   
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
        </div><p></p>

        <div data-role="content" style="height: 100px; width: 500px; background: #aabbcc;">
            <div data-role="popup" id="initialpopup" data-overlay-theme="a" data-theme="a">Foobar</div>
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>   
</body>
</html> 
```

您只需要从构建器工具中提供一个**jquery.mobile.custom.js**文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:38:54.190

确保您没有在`<body>`标签中包含脚本。这可能会导致加载标签在不应该出现的时候出现。

# jquery - 根据其他 2 个 div 上的文本动态更改一个 div 中的文本

> ID：15440206
> 
> 赞同：0
> 
> 时间：2013-03-15T19:00:30.150
> 
> 标签：jquery

我有三个div。数量、价格和成本。成本只是价格*数量的乘积。

```
<div class="qty">1</div>
<div class="price">49</div>
<div class="cost"><div>

<div class="add">ADD</div> 
```

然后我有一个增加数量值的添加按钮。

jQuery

```
$('.add').on('click',function(){
        $('.qty').text(parseInt($('.qty').text()) + 1);
}); 
```

现在我想在“成本” div 中添加一个文本，即 qty*price。这应该随着数量的变化而动态变化。这个应该怎么做？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T19:08:16.593

如果更改的唯一方法`qty`是按`add`然后 a 将成本更新更改代码放在那里是微不足道的：

```
$('.add').on('click',function(){
     var qty = parseInt($('.qty').text()) + 1,
         price = parseInt($('.price').text());
     $('.qty').text(qty);
     $('.cost').text(qty * price);
}); 
```

如果您打算添加一个`remove`按钮，那么您应该创建一个单独的更新函数：

```
$('.add').on('click',function(){
    $('.qty').text(parseInt($('.qty').text()) + 1);
    update_cost();
});
$('.remove').on('click',function(){
    $('.qty').text(parseInt($('.qty').text()) - 1);
    update_cost();
});

var update_cost = function() {
    var qty = parseInt($('.qty').text()),
        price = parseInt($('.price').text());
    $('.cost').text(qty * price);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:05:57.963

```
$('.add').on('click',function(){
        $('.qty').text(parseInt($('.qty').text()) + 1);
        $('.cost').text(parseInt($('.qty').text()) * parseInt($('.price').text());
}); 
```

# javascript - 使用边界框内的数据更新 Leaflet GeoJSON 层

> ID：15440216
> 
> 赞同：5
> 
> 时间：2013-03-15T19:01:11.060
> 
> 标签：javascript, ajax, leaflet, geojson

我第一次使用传单/JavaScript，我想显示一张地图，它的 GeoJSON 层会随着每一步的变化而变化……只显示该区域的点。

这是我的代码源：

```
// Function to refresh points to display
function actualiseGeoJSON() {
    // Default icon for my points
    var defaultIcon = L.icon({
        iconUrl: '../images/icones/cabane.png',
        iconSize: [16, 16],
        iconAnchor: [8, 8],
        popupAnchor: [0, -8]
    });

    // We create each point with its style (from GeoJSON file)
    function onEachFeature(feature, layer) {
        var popupContent = '<a href="' + feature.properties.url + '">' + feature.properties.nom + "</a>";
        layer.bindPopup(popupContent);
        var cabaneIcon = L.icon({
            iconUrl: '../images/icones/' + feature.properties.type + '.png',
            iconSize: [16, 16],
            iconAnchor: [8, 8],
            popupAnchor: [0, -8]
        });
        layer.setIcon(cabaneIcon);
    }

    // We download the GeoJSON file (by using ajax plugin)
    var GeoJSONlayer = L.geoJson.ajax('../exportations/exportations.php?format=geojson&bbox=' + map.getBounds().toBBoxString() + '',{
        onEachFeature: onEachFeature,

        pointToLayer: function (feature, latlng) {
            return L.marker(latlng, {icon: defaultIcon});
        }
    }).addTo(map);
}

// We create the map
var map = L.map('map');
L.tileLayer('http://maps.refuges.info/hiking/{z}/{x}/{y}.png', {
    attribution: '&copy; Contributeurs d\'<a href="http://openstreetmap.org">OpenStreetMap</a>',
    maxZoom: 18
}).addTo(map);

// An empty base layer
var GeoJSONlayer = L.geoJson().addTo(map);

// Used to only show your area
function onLocationFound(e) {
    var radius = e.accuracy / 2;
    L.marker(e.latlng).addTo(map);
    actualiseGeoJSON();
}
function onLocationError(e) {
    alert(e.message);
    actualiseGeoJSON();
}
function onMove() {
    // map.removeLayer(GeoJSONlayer);
    actualiseGeoJSON();
}

map.locate({setView: true, maxZoom: 14});

// Datas are modified if
map.on('locationerror', onLocationError);
map.on('locationfound', onLocationFound);
map.on('moveend', onMove); 
```

我试图在我的第一个函数中删除图层，但未定义 GeoJSONlayer 我试图在 onMove() 中删除图层，但没有出现任何内容>

如果有人可以帮助我……</p>

*对不起，我的英语不好，法语函数名称的法语家伙*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T13:09:25.177

我看到您正在使用传单 ajax 插件。

让您的地图工作的最简单方法是在开始时下载所有可用数据，提供一个巨大的边界框，然后将其添加到地图中一次。这可能会工作得很好，除非有很多疯狂的小屋和东西要下载。

* * *

但是如果你想定期刷新数据，基于边界框，你可以使用[leaflet-ajax插件](https://github.com/calvinmetcalf/leaflet-ajax)中的刷新方法：

> 您还可以添加一组 url 而不仅仅是一个，请记住“addUrl”会将新 url(s) 添加到当前列表中，但如果要替换它们，请使用刷新，例如：
> 
> ```
> var geojsonLayer = L.geoJson.ajax("data.json");
> geojsonLayer.addUrl("data2.json");//we now have 2 layers
> geojsonLayer.refresh();//redownload those two layers
> geojsonLayer.refresh(["new1.json","new2.json"]);//add two new layer replacing the current ones 
> ```

所以最初：

```
var defaultIcon = ...
function onEachFeature(feature, layer) ...

// Do this in the same scope as the actualiseGeoJSON function, 
// so it can read the variable
var GeoJSONlayer = L.geoJson.ajax(
    '../exportations/exportations.php?format=geojson&bbox=' 
    + map.getBounds().toBBoxString() + '',{
    onEachFeature: onEachFeature,

    pointToLayer: function (feature, latlng) {
        return L.marker(latlng, {icon: defaultIcon});
    }
}).addTo(map); 
```

然后对于每次更新：

```
function actualiseGeoJSON() {
    // GeoJSONLayer refers to the variable declared
    // when the layer initially got added
    GeoJSONlayer.refresh(
        ['../exportations/exportations.php?format=geojson&bbox=' 
        + map.getBounds().toBBoxString() + '']);
} 
```

或者，您可以将图层设置为地图的属性，而不是`var`：

```
map.geoJsonLayer = L.geoJson.ajax(...) 
```

稍后将其引用如下：

```
map.geoJsonLayer.refresh(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T16:24:11.270

这个传单插件更适合您的目的，管理地图事件和缩放。缓存远程请求等等。

[http://labs.easyblog.it/maps/leaflet-layerjson/](http://labs.easyblog.it/maps/leaflet-layerjson/)

```
var ajaxUrl = "search.php?lat1={minlat}&lat2={maxlat}&lon1={minlon}&lon2={maxlon}";
map.addLayer( new L.LayerJSON({url: ajaxUrl }) ); 
```

使用更多功能扩展 L.GeoJSON 并支持 ajax 或 jsonp 请求。有关更多文档，请参阅源代码注释。

# servicestack - ServiceStack Rockstars - 为什么它不使用 IIS Express 重定向到文件夹/？

> ID：15440219
> 
> 赞同：1
> 
> 时间：2013-03-15T19:01:17.467
> 
> 标签：servicestack

我正在试用 ServiceStack，并从 Github 克隆了 RazorRockstars 示例。

如果我在 Visual Studio 2012 中打开并启动`RazorRockstars.WebHost`项目，它在 VS 开发服务器中运行良好。

如果我随后将项目更改为使用 IIS Express 8，则死/活菜单中的 URL 将不再正常工作。

事实证明，菜单中的链接指向没有斜杠的目录名称：`http://localhost:2000/stars/alive/vedder`，并且在执行时，服务器将返回 a`302`并重定向到`http://localhost:2000/stars/alive/vedder/`（注意尾部斜杠），之后一切正常。

然而，在 IIS Express 中，不会发生这种重定向，并且浏览器中的 url 仍然没有斜杠，这反过来又会破坏页面。

然而，有趣的部分是`default.cshtml`页面将从目录执行，但包含的部分`content.md`不会。看起来 SS 似乎知道这是一个文件夹，并且会正确查找`default.cshtml`，但后来不知何故无法查找`content.md`部分。

这是 SS 实现的错误还是预期的行为？`301`在这种情况下，ServiceStack 本身返回 a 可能是有意义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T20:09:33.447

我只是有同样的问题。

我必须下载 IIS 的 URL 重写模块。并在 RazorRockstars.WebHost 项目的 web.config 文件中创建重写规则。

有关更详细的说明，请参阅此链接。[http://www.tugberkugurlu.com/archive/remove-trailing-slash-from-the-urls-of-your-asp-net-web-site-with-iis-7-url-rewrite-module](http://www.tugberkugurlu.com/archive/remove-trailing-slash-from-the-urls-of-your-asp-net-web-site-with-iis-7-url-rewrite-module)

# sqlite - 将 Sqlite3 与 MFC VS2012 集成

> ID：15440220
> 
> 赞同：0
> 
> 时间：2013-03-15T19:01:18.673
> 
> 标签：sqlite, visual-studio-2012

我正在开发小型 MFC VC++ 应用程序。为此，我需要将 Sqlite3 与现有的 MFC 应用程序集成。

我在网上冲浪，发现一些对我不起作用的教程。

所以请让我知道这些步骤。

PS：我已经从 sqlite.org 网站下载了源代码和库和 dll。我正在使用 VS2012。

提前致谢。

谢谢，塞尔瓦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T18:02:54.203

我成功配置了我的 VS2012。这些是我遵循的步骤。1.从 sqlite web 下载 sqlite3.dll、sqlite3.h、sqlite3.exp 和 sqlite3.def。2.使用 LIB 命令从 .def 文件创建 sqlite3.lib。导航到 vs 2012 安装 /bin 找到 LIB 文件以运行命令。3.在vs2012工作区新建一个项目，将sqlite3.h、sqlite3.exp和sqlite.lib复制到你的项目文件位置。4.在您的驱动器中创建一个新文件夹并复制 dll、lib 和 exp。5.右键单击->项目的属性并将dll文件夹添加为附加库。就是这样。

您已准备好在 cpp 文件中编程 sqlite，包括 sqlite3.h。

谢谢你。

# visual-studio - 我想在 Direct X 窗口中放置一个 Visual Studio 代码编辑器。这可行吗？

> ID：15440224
> 
> 赞同：1
> 
> 时间：2013-03-15T19:01:24.803
> 
> 标签：visual-studio, ide, directx, slimdx

是否可以使用 VS SDK API 来获取 Visual Studio 中使用的代码编辑器“控件”？我可以将此控件绘制到 Visual Studio 之外的其他地方吗？

我想在我正在考虑开发的应用程序中拥有 C# 编辑功能（使用代码编辑器提供的 IDE 支持）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:06:37.773

我有个主意：

```
HWND WINAPI FindWindow(
  _In_opt_  LPCTSTR lpClassName,
  _In_opt_  LPCTSTR lpWindowName
); 
```

首先，您使用 Spy++ 获得一个 lpWindowName，然后通过使用 FindWindow，您可以获得该窗口的句柄，并可以将其显示/放置在您想要的任何位置。

# jquery - 使用ajax在div内打开一个url

> ID：15440225
> 
> 赞同：-3
> 
> 时间：2013-03-15T19:01:24.753
> 
> 标签：jquery, html, ajax

```
<html>
<head>
<script>
function showUser(str,st1)
{
if (str=="" AND st1=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }

xmlhttp.open("GET","http://www.tndte.com/Result/Default2.aspx?Value="+str"regul="+st,true);
xmlhttp.send();
}
</script>
</head>
<body>
<center>
<form>
Enter the Register No: &nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="reg"/><br /><br />
<input type="radio" value="K"  name="s1" >K/L/R/O/N-scheme &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" value="J" name="s1" >J/C/D/G-scheme
<br /><br />
<input type="submit" value="View" name="submit" id="valuebtn" onClick="oload()" /> 
</form>
</center>

<br>
<div id="txtHint"><b>Person info will be listed here.</b></div>

</body>
<script type="text/javascript">
function oload(){
    document.getElementById('valuebtn').onclick = function() {
    var s = document.getElementById('reg').value;
    var ss = document.getElementById('s1').value;
    showUser(s,ss);
    }
}   
</script>
</html> 
```

上面的程序是为了自己在原网站的帮助下检查结果而编写的。在 ajax XMLHttpRequest 的帮助下，通过函数传递值。但它没有反应。谁能帮我。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:04:39.980

他们是同一个起源吗？如果不：

[http://en.wikipedia.org/wiki/XMLHttpRequest#Cross-domain_requests](http://en.wikipedia.org/wiki/XMLHttpRequest#Cross-domain_requests)

和

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:05:27.243

`AND`不是 javascript 关键字。`&&`在你的`if`陈述中使用。

# r - 高级错误处理：系统地尝试一系列处理程序

> ID：15440226
> 
> 赞同：3
> 
> 时间：2013-03-15T19:01:38.597
> 
> 标签：r, error-handling, event-handling, try-catch, conditional-statements

另一个跟进[this](https://stackoverflow.com/questions/15295004/disregarding-simple-warnings-errors-in-trycatch?noredirect=1#comment21587644_15295004)和[this](https://stackoverflow.com/questions/15363004/advanced-condition-handling)。

# 实际问题

## 问题 1

在遇到某种情况（比如 a `simpleError`）时，我如何调用一个相应的重新启动处理程序来系统地测试一系列实际处理程序函数，直到找到一个不会导致另一种情况的处理程序？如果尝试了最后一个可用的处理程序，则应调用默认的中止重启处理程序 ( `invokeRestart("abort")`)。该实现应该允许对要使用的实际“处理程序套件”进行灵活规范。

## 问题2

我不明白 a) 与重启处理程序一起指定的*测试*函数是如何工作的，以及 b) 在哪里使用它是有意义的。有什么建议么？一个简短的例子会很棒！

的帮助页面`withRestarts`说：

> > 重启规范最灵活的形式是一个列表，可以包含多个字段，包括处理程序、描述和测试。测试字段应包含一个参数的函数，即条件，如果重新启动适用于条件，则返回 TRUE，否则返回 FALSE；默认函数对所有条件都返回 TRUE。

* * *

## 对于那些对更多细节感兴趣的人

下面你会发现我关于问题 1 的第一种方法，但我确信那里有更干净/更直接的东西；-)

```
foo <- function(x, y) x + y
fooHandled <- function(
    x,
    y,
    warning=function(cond, ...) {
        invokeRestart("warninghandler", cond=cond, ...)},
    error=function(
        cond, 
        handlers=list(
            expr=expression(x+"b"),
            expr=expression(x+"c"),
            expr=expression(x+100)
        ),
        ...) {
            invokeRestart("errorhandler", cond=cond, handlers=handlers, ...)
        }
) {
    expr <- expression(foo(x=x, y=y))
    withRestarts(
        withCallingHandlers(
            expr=eval(expr),
            warning=warning,
            error=error 
        ),
        warninghandler=function(cond, ...) warning(cond),
        errorhandler=function(cond, handlers, ...) {
            idx <- 1
            do.continue <- TRUE
            while (do.continue) {
                message(paste("handler:", idx))
                expr    <- handlers[[idx]]                            
                out     <- withRestarts(
                    tryCatch(
                        expr=eval(expr),
                        error=function(cond, ...) {
                            print(cond)
                            message("trying next handler ...")
                            return(cond)
                        }
                    )
                )
                idx <- idx + 1
                do.continue <- inherits(out, "simpleError")
            }
            return(out)
        }
    )
}

> fooHandled(x=1, y=1)    
[1] 2
> fooHandled(x=1, y="a")
handler: 1
<simpleError in x + "b": non-numeric argument to binary operator>
trying next handler ...
handler: 2
<simpleError in x + "c": non-numeric argument to binary operator>
trying next handler ...
handler: 3
[1] 101 
```

* * *

## 编辑

我也有兴趣了解如何用`tryCatch`零件替换`withCallingHandlers`零件。似乎`withCallingHandlers()`并没有真正返回任何可以用来确定价值的东西`do.continue`

# spring - CreateProcess error=2, 系统找不到指定的文件 Roo

> ID：15440227
> 
> 赞同：7
> 
> 时间：2013-03-15T19:01:39.070
> 
> 标签：spring, spring-roo

我正忙于做披萨教程，当我得到执行测试命令时，我得到了上述错误。我检查了 Windows 路径并将所有必要的链接添加到 STS 文件。我很茫然。这是我第四次尝试本教程并陷入此命令。请帮忙，这让我很沮丧。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-10-17T14:06:48.373

万一有人再次偶然发现这个问题，最新版本的 maven for windows 将可执行文件重命名为`mvn.cmd`Spring Roo 期望`mvn.bat`在那里。只需复制 mvn.cmd 并将副本重命名为 mvn.bat 并且`perform`命令应该可以工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T01:28:57.637

Check that you have Maven installed and that it's included in your PATH. (the "perform" commands in Roo Console are actually invoking Maven)

# c# - 起订量不遵守 OUT 参数

> ID：15440239
> 
> 赞同：0
> 
> 时间：2013-03-15T19:02:47.937
> 
> 标签：c#, moq

我正在尝试使用 Moq 来模拟具有两个 OUT 参数的方法。这应该根据此处的 Moq 示例工作： [https ://code.google.com/p/moq/wiki/QuickStart](https://code.google.com/p/moq/wiki/QuickStart)

```
var moqDB = new Mock<IMyDB>();

int Value1 = 500000;
decimal Value2 = 0.2M;

moqDB.Setup(db => db.DoSomething(out Value1, out Value2)).Returns(true); 
```

但它没有在我正在测试的方法中设置值：

```
public virtual void TestMethod(IMyDB db)
{
    int Value1 = 0;
    decimal Value2 = 0.0M;

    db.DoSomething(out Value1, out Value2);

    // Check Values
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:11:45.133

moq 实际上并没有改变输出值。在您发布的示例中，他们将输出值初始化为他们想要的值（`var outString = "ack";`）。在您的代码中，您从 0 开始并期望函数返回正确的值。

我没有看到任何文件表明您可以最小起订量。相反，您的代码应该是；

```
public virtual void TestMethod(IMyDB db)
{
    int Value1 = 500000;
    decimal Value2 = 0.2M;

    db.DoSomething(out Value1, out Value2);

    // look the out values are 500000 and .2M, OMG!!!
 } 
```

有点蹩脚...

# ios - iPhone中弹出自定义注释？

> ID：15440244
> 
> 赞同：0
> 
> 时间：2013-03-15T19:02:59.683
> 
> 标签：ios, iphone

我正在为 iPhone 构建一个应用程序，我需要在用户单击图钉时自定义弹出的注释。但关键是我不想使用默认的注释视图，并且我创建了自己的 UIView（自定义 UIView），每当用户单击图钉时，该自定义视图就会加载到屏幕顶部。

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:11:15.537

有几个解决方案。查看：

[https://github.com/nfarina/calloutview](https://github.com/nfarina/calloutview)用于创建自定义 calloutViews 的好项目。

[这里](http://nfarina.com/post/29883229869/callout-view)也有一篇不错的文章。

# c# - 强制类注册事件

> ID：15440248
> 
> 赞同：0
> 
> 时间：2013-03-15T19:03:11.363
> 
> 标签：c#, interface

是否可以强制一个类注册一个事件？我想用一个事件来验证我的属性，如果属性无效就会触发。在类的构造函数中，我想获得一个 IValid 接口，它强制所有类实现该接口（如果他们想使用我的类）。所以我的属性的验证是安全的，永远不会得到无效值。还是有更好的机会？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:17:49.273

如果需要，您可以在构造函数中接受事件处理程序：

```
public class Foo
{
    public event Action<string> Bar;
    public Foo(Action<string> initialHandler)
    {
        Bar += initialHandler;
    }
} 
```

现在，从技术上讲，有人可以传入`null`for `initialHandler`，因此您需要检查这一点，但希望它有助于让此类的用户清楚地知道，在使用该类型之前需要提供事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:10:00.087

您可以使您的类型不可变并在构造时验证。

就像是：

```
public class MyClass
{
   public MyClass(string aString, int anInt)
   {
     // Check for validity - throw exception if not valid

      ValidString = aString;
      ValidInt = anInt;
   }

   public string ValidString { get; private set; }
   public int ValidInt { get; private set; }
} 
```

这确保您的实体/类永远不会进入无效状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:52:14.693

事件最好用于订阅者数量可能合法地从零开始的任何情况。如果一个对象的构造需要它在某个地方发送通知，那么构造函数应该接收一个实现通知接口的对象或一个将执行适当通知操作的委托。如果使用一个委托，则不应将其添加到事件列表中，而应存储在其自己的字段中。对接口或委托进行健全性检查以确保它不为空可能是值得的，但在大多数情况下，除此之外没有任何偏执的理由。

# r - 在 R 中的 x 轴上提供日期

> ID：15440253
> 
> 赞同：0
> 
> 时间：2013-03-15T19:03:50.900
> 
> 标签：r

谁能告诉我如何在 R 的时间序列中给出开始和结束的日期。我知道如何给出一个序列，比如：

```
ts <- ts(temp, start=1, end=10) 
```

但我想从 1 月 1 日开始到 1 月 10 日结束，而不是 1 到 10 日。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:51:18.860

中的基本时间序列功能`ts`可能对您来说还不够。有很多[可用的工具可](http://cran.r-project.org/web/views/TimeSeries.html)用于在 R 中处理时间序列，但该`ts`课程旨在表示

> “规则间隔的时间序列（使用数字时间戳）。因此，它特别适合年度、月度、季度数据等”

如果您正确描述您的数据，该`print`命令将很好地格式化它。如果您希望将数据分成几个月，您可以执行以下操作（注意`frequency`12 的）：

```
> print(ts(round(rnorm(44)), start = c(2012,3), frequency = 12), calendar = TRUE)
     Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
2012           2   1  -2  -1   1   1   0  -1   1  -1
2013   1   0   2   1  -1   1  -1  -1   0   2   1   2
2014   2   0  -1   0   1   1   0   0   2  -1   0   0
2015   2   0   0  -1   0   0   0   1   2   0 
```

由于您需要每日间隔，因此您需要设置`frequency`为 365：

```
> print(ts(letters, start = c(2013, 1), frequency = 365), calendar = TRUE)
     p1 p2 p3 p4 p5 p6 p7 p8 p9 p10 p11 p12 p13 p14 p15 p16 p17 p18 p19 p20 p21
2013  a  b  c  d  e  f  g  h  i   j   k   l   m   n   o   p   q   r   s   t   u
     p22 p23 p24 p25 p26
2013   v   w   x   y   z 
```

这看起来会很尴尬，但会解决您的问题，因为它不仅会为您提供每天的数字。但是，如文档中所述，`ts`该类仅支持“数字时间戳”，因此这可能是您使用内置`ts`功能获得的最佳效果。

如果您想要更高级的功能，我会查看[本文档](http://cran.r-project.org/web/views/TimeSeries.html)中的一些工具。

# wpf - WPF 混乱，当使用 WPF 设计器打开任何 xaml 时，Visual Studio 2010 崩溃

> ID：15440258
> 
> 赞同：2
> 
> 时间：2013-03-15T19:04:07.997
> 
> 标签：wpf, xaml

所以我是一个非常大的 WPF 应用程序的新架构师。我的主要目标是性能，但我个人的目标是能够在 WPF 设计器中查看 xaml 而不会出现硬 VS 崩溃。我们目前正在xml编辑器中编辑xaml，至少可以说效率很低。我完全不知道我能做些什么来找到问题的根源，因为 VS 确实说了很多关于它为什么崩溃的问题。如果有人能把我的屁股踢到正确的方向，将不胜感激。

一些可能有助于解决问题的事实。我们正在使用 VS 2010 Premium 大约有 70 个合并的字典文件。我们正在使用 Telerik 控件。我们在 .net 4 它是一个主要的 VB.Net 应用程序

让我知道我是否可以提供任何其他有用的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:09:01.240

您有时可以使用 UserControl 加载事件

```
private void connectionControl_Loaded(object sender, RoutedEventArgs e)
{
if (System.ComponentModel.DesignerProperties.GetIsInDesignMode(this) ==  false)
{
//act normally
}
} 
```

# java - 使用 HTMLUnit 访问 JavaScript 变量

> ID：15440259
> 
> 赞同：3
> 
> 时间：2013-03-15T19:04:08.757
> 
> 标签：java, javascript, html, htmlunit

如何使用`HTMLUnit`框架从 JavaScript 变量中获取值？就像我有`var important = "Few important words"`，我想得到这个字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:10:23.717

如果变量是全局范围的，我会尝试使用该[`executeJavaScript(...)`](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/html/HtmlPage.html#executeJavaScript%28java.lang.String%29)函数。

但是如果变量不是全局范围的，我认为你不走运：

```
(function(){
    var important = "Few important words";
    // ...
}()); 
```

在这种情况下，您可能不得不依靠屏幕抓取或实际解析 HTML/JavaScript 来提取信息。祝你好运。

另请参阅[如何使用 BeautifulSoup 从网页上的某些 JavaScript 中提取一长串文本？](https://stackoverflow.com/questions/4113552/how-do-i-extract-a-long-string-of-text-from-some-javascript-on-a-web-page-using)- 这个问题是关于 Python 的，但最终的答案 - “使用正则表达式” - 似乎它可以在 Java 中工作。[使用 RegEx 解析 HTML/JavaScript 不是理想的解决方案](https://stackoverflow.com/a/1732454/248129)，但如果您没有其他选择...

# sql - 动态 SQL 花费的时间比硬编码的等价物要长得多

> ID：15440260
> 
> 赞同：8
> 
> 时间：2013-03-15T19:04:09.307
> 
> 标签：sql, sql-server

我有一段动态的 SQL。运行大约需要 4 分钟。如果我改为获取 SQL 的输出并运行它，则大约需要 20 秒。为什么会出现差异？我知道在动态版本中构建 SQL 需要一些时间，但我无法想象它会那么贵。

有人有想法么？这两个查询应该是相同的，所以我怀疑查询计划缓存有点奇怪，但并没有太多的想法。

**编辑：** 通过输出来澄清我的意思。

在动态 SQL 中，最后一行是

```
EXEC sp_executesql @myQuery,
    N'@var1 INT,
    @var2 INT,
    @var2 INT',
    @var1,
    @var2,
    @var3 
```

我取了 myQuery 的值并将其放入它自己的 SQL 文件中。运行时间为 20 秒，而使用 execute 的动态运行时间为 4 分钟。

**编辑 2** 我删除了参数。我得到了有趣的结果。动态 SQL 语句的性能得到了提升。硬编码版本对性能产生了巨大影响。现在两人差不多。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T19:18:53.380

我将假设您使用的是 Microsoft SQL Server（您只标记了您的问题“sql”）。

在某些情况下，不同的参数值可能会导致不同的优化计划。然后缓存该优化计划，并在下次使用不同的参数值执行查询时使用。但优化方案并不是后续参数值的最佳方案。

这是一篇关于这个问题和一些解决方法的文章： [https ://www.simple-talk.com/sql/t-sql-programming/parameter-sniffing/](https://www.simple-talk.com/sql/t-sql-programming/parameter-sniffing/)

所以是的——在某些情况下，与在没有参数化的情况下运行相同的查询相比，使用参数化查询可能会导致性能下降。

如果您不能自由发布代码，我们无法知道这是否适用于您的情况。

我尊重你不能这样做——通过发布到 StackOverflow，[你隐含地使用 Creative Commons license 许可你的代码和/或文字](https://blog.stackoverflow.com/2009/06/attribution-required/)。但是，除非他们同意，否则共享您的雇主拥有的代码是不合适的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-23T13:27:50.940

正如比尔卡尔文所说，这可能是一个“参数嗅探”问题。尝试包括以下行：

```
OPTION (RECOMPILE) 
```

在您的 SQL 查询结束时。

这里有一篇文章解释什么是参数嗅探：http: [//blogs.technet.com/b/mdegre/archive/2012/03/19/what-is-parameter-sniffing.aspx](http://blogs.technet.com/b/mdegre/archive/2012/03/19/what-is-parameter-sniffing.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-12-27T16:11:39.107

如果您使用的是 SQL Server 2008 或更高版本，请使用 OPTIMIZE FOR UNKNOWN 查询提示。将以下内容添加到动态查询的末尾：

```
OPTION (OPTIMIZE FOR (@var1 UNKNOWN, @var2 UNKNOWN, @var3 UNKNOWN)) 
```

尝试更改输入或输出@var1、@var2 和@var3 三个输入。是的，如果查询优化器尝试对真正临时的事物使用统计信息，这确实会很昂贵。如果您的一个或多个变量是相当可预测的，请针对特定值优化这些变量，并针对未知值优化其余变量。查看此链接以获取更多详细信息。

[https://blogs.msdn.microsoft.com/sqlprogrammability/2008/11/26/optimize-for-unknown-a-little-known-sql-server-2008-feature/](https://blogs.msdn.microsoft.com/sqlprogrammability/2008/11/26/optimize-for-unknown-a-little-known-sql-server-2008-feature/)

需要明确的是，这可能是一个参数嗅探问题，如上面的 ninjaPixel 所示。 `OPTIMIZE FOR UNKNOWN`与重新编译每个查询相比，它可以为您提供更好的结果，因为查询优化器依赖于统计信息来进行编译。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-29T10:18:11.963

为您的动态查询添加评论。输入变量@var1、@var2、@var3 等的注释值。

它看起来像：

```
EXEC sp_executesql @myQuery,
    /* var1Value, var2Value, var3Value */    
    N'@var1 INT,
    @var2 INT,
    @var2 INT',
    @var1,
    @var2,
    @var3 
```

因此，执行计划将仅针对不同的值重新编译。

# c++ - 关于歧义排列的代码问题

> ID：15440262
> 
> 赞同：0
> 
> 时间：2013-03-15T19:04:17.960
> 
> 标签：c++, stl

考虑这个问题：[歧义排列](http://www.spoj.com/problems/PERMUT2/)。我的代码是**使用 G++ 4.7.2 用 C++11编写的**

```
#include<iostream>
#include<vector>

using std::cin;
using std::cout;
using std::vector;

int main()
{
    int h;
    while((cin >> h) && (h!=0))
    {
        int num;
        bool c=true;
        vector<int> arr;
        while((cin >> num) && (h!=0))
        {
            arr.push_back(num);
            --h;
        }
        const auto n = arr.size();
        for(int i=0; i!=n; ++i)
        {
            if(arr[arr[i]-1] != (i+1))
            {
                c = false;
                cout << "Not Ambiguous\n";
                break;
            }
        }
        if(c==true)
            cout << "Ambiguous\n";
    }
    return 0;
} 
```

只要我在换行符中输入每个数字，此代码就可以正常工作。如果我开始提供由空格分隔的输入（用于排列），那么代码会出现意外行为。它要求条件 while((cin >> num) 的输入无效，并在一轮输入后退出。有什么建议可以消除这个问题吗？我还想知道使用[STL 数组](http://www.cplusplus.com/reference/array/array/)是否是一个不错的选择。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:19:55.433

您输入不正确，特别是在这里-

```
 while((cin >> num) && (h!=0)) //WRONG!
    {
        arr.push_back(num);
        --h;
    } 
```

一种更清晰（因此没有错误）的方法是 -

```
for (int i = 0; i < h; i++)
{
    cin >> num;
    arr.push_back(num);
} 
```

对于你的第二个问题-

> 我还想知道使用 STL 数组是否是一个不错的选择。

我建议`std::vector`在这里使用（并且用于大多数目的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:23:13.250

你的代码有问题。1.当你得到每个排列的数字时，你应该使用 h!=1，在你当前的实现中，这很奇怪，如果 h =4，你会要求 5 个数字，这没有意义 2.你可以当然，在以空格分隔的一行中读取每个测试用例的这些数字，如下所示：

```
#include<iostream>
#include<vector>

using std::cin;
using std::cout;
using std::vector;

int main()
{
   int h;
   while((cin>> h) && (h!=0))
   {
        int num;
        bool c=true;
        vector<int> arr;
        while((cin >>  std::skipws >> num) && (h!=1))
        {            //^^^^^^^^^^^^^(add this) ^^^^^^^here should be 1 not 0
           arr.push_back(num);
           --h;
        }

        const auto n = arr.size();
        for(int i=0; i!=n; ++i)
        {
            if(arr[arr[i]-1] != (i+1))
            {
                 c = false;
                 cout << "Not Ambiguous\n";
                 break;
            }
         }

         if(c==true)
             cout << "Ambiguous\n";
     }
     return 0;
} 
```

但是，无论哪种情况，您的结果都不正确，它会输出以下内容：

```
4
1 4 3 2
Not Ambiguous

5
2 3 4 5 1
Not Ambiguous
1
1
Ambiguous 
```

虽然第一个应该是“歧义”，但您可能需要检查检查歧义的逻辑。

# php - Symfonys Autoloader - 实现父命名空间

> ID：15440264
> 
> 赞同：0
> 
> 时间：2013-03-15T19:04:24.907
> 
> 标签：php, class, symfony, namespaces, autoloader

我正在将 Symfonys Autoloader 用于具有以下文件夹/类结构的项目：

```
App
+- Package1
|
+- Package2
  +- Class1.php
|
- Interface1.php 
```

我现在如何从父命名空间实现一个类。比如`Interface1`从`Class1`。这不起作用：

```
namespace App\Package1

Class1 implements App\Interface1
{
    //implement some functions here...
} 
```

Autoloader 会尝试将其包含在内`App\Package2\Class1\App\Interface1`。

最好的祝福，

曼努埃尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:11:00.423

symfony 的类加载器效果很好:)

在这种情况下，这是一个 php 语法问题。

您需要使用“use”或更轻松地导入命名空间，您只需要在类名前面加一个反斜杠

例如：

```
namespace App\Package1;

use App\Interface1;

Class1 implements Interface1
{
    //implement some functions here...
} 
```

或者

```
namespace App\Package1;

Class1 implements \App\Interface1;
{
    //implement some functions here...
} 
```

# windows - 驱动程序 I/O 管道重定向

> ID：15440282
> 
> 赞同：1
> 
> 时间：2013-03-15T19:06:03.220
> 
> 标签：windows, pipe

我正在尝试使用多个复合窗口对 I/O 进行沙盒处理，并且我需要通过管道传输沙盒应用程序的整个驱动程序 I/O。

我知道如何在 Windows 上通过管道传输标准输出 stdin stderr，但我想通过管道传输所有可用的输出输入设备。在 C/C++ 中。

我如何列出它们？

我可以存放旧设备管端吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:18:42.450

可以通过 win32 API 中的 DeviceIOControl 或类 unix 操作系统中的 ioctl 列出它们。

# ios - ios iframe 与 webview 的问题

> ID：15440283
> 
> 赞同：1
> 
> 时间：2013-03-15T19:06:04.743
> 
> 标签：ios, iframe, webview

我遇到了 UIWebView 的问题。如果 iframe 正在加载某些内容并且由于某种原因我更改了源或删除了元素，我会收到以下异常：

```
MyApp[5812:11303] shouldStartLoadWithRequest
2013-03-14 18:48:45.899 MyApp[5812:11303] shouldStartLoadWithRequest
2013-03-14 18:48:45.900 MyApp[5812:11303] *** WebKit discarded an uncaught exception in the webView:decidePolicyForNavigationAction:request:frame:decisionListener: delegate: <NSInvalidArgumentException> *** setObjectForKey: key cannot be nil
2013-03-14 18:48:45.901 MyApp[5812:13603] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** setObjectForKey: key cannot be nil'
*** First throw call stack:
(0x1c94012 0x10d1e7e 0x1d170de 0x26e35ce 0x26e5693 0x26d44b5 0x2bf8747 0x2bf5610 0x2ec841a 0x2ec6c49 0xb0108ef 0x6619e11 0x6572fc3 0x2dd9d34 0x2eacd15 0x2b31eac 0x2b31c76 0x317bce9 0x2b176d5 0x2b184a5 0x316ade9 0x2b1772e 0x317cc6d 0x2b1e3f4 0x2b1f97b 0x2b2382f 0x26f1f7b 0x356182c 0x3561795 0x3564b2f 0x35648bb 0x356bffb 0x356487c 0x1e50f4 0x356bffb 0x1e4deb 0x1e5787 0x356c548 0x1c17f3f 0x1c17a39 0x1c3a734 0x1c39f44 0x1c39e1b 0x356bc50 0x97efced9 0x97f006de)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

我需要在我的代码中添加一些东西来处理这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T15:13:32.003

就我而言，这是因为我在加载 webWiew 之前在 viewWillAppear 中调用了我的方法 scrollToId

```
- (void)scrolToID
{
    NSString *jsCall = [NSString stringWithFormat:@"window.location.hash='#%@'", currentID];
   [self.webView stringByEvaluatingJavaScriptFromString:jsCall];
} 
```

它应该在 webViewDidFinishLoad 中调用

# android - android 应用程序中的 Google Admob SDK 替换问题

> ID：15440284
> 
> 赞同：0
> 
> 时间：2013-03-15T19:06:05.913
> 
> 标签：android, admob, google-ad-manager

我有一个 android 应用程序，这个应用程序使用 Google admob `GoogleAdMobAdsSdk-4.1.0`版本。现在我想更新我的 google admob SDK。

这是 google admob 网站[Here](https://developers.google.com/mobile-ads-sdk/download#downloadandroid)上的消息。

```
We are deprecating all SDK versions that were released in 2010 or earlier. For Android, this includes any SDK released on or before November 9, 2010\. If your code references com.admob.android.ads.*, then you will need to update your SDK. 
```

我只是尝试将此`GoogleAdMobAdsSdk-4.1.0`版本替换为`GoogleAdMobAdsSdk-6.3.1`.

但我收到关于导入的错误`com.admob.android.ads.*`。

请让我知道有关此的解决方案

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:15:43.007

`com.admob.android.ads.*`引用 2010 年或更早发布的旧 AdMob SDK。如果您的应用仅使用`GoogleAdMobAdsSdk-4.1.0`，则您应该只引用`com.google.ads.*`.

可以查看[文档](https://developers.google.com/mobile-ads-sdk/docs/admob/intermediate#android-targeting)以了解如何设置位置。你会用`com.google.ads.AdRequest#setLocation(location)`. 但是，AdMob 建议您仅在您的应用已使用位置信息时才在 AdRequest 中传递位置信息，因为这需要在您的应用中添加额外的权限。

# ios - Google YouTube API v3 iOS 应用密钥，403 错误代码

> ID：15440285
> 
> 赞同：5
> 
> 时间：2013-03-15T19:06:06.770
> 
> 标签：ios, google-api, youtube-api

我创建了一个新项目并打开了 YouTube Data API v3。在 API 访问窗格中，我创建了浏览器应用程序（带有引用）的密钥，女巫工作正常。我继续为 iOS 应用程序创建了 Key（带有捆绑标识符）。一切看起来都很好，我已经检查了 10 次捆绑包 ID，我确信它是正确的。但是，如果我继续使用 iOS API 密钥从我的 iOS 应用程序创建 NSURLRequest，我会收到错误响应：

```
error =     {
    code = 403;
    errors =         (
                    {
            domain = usageLimits;
            message = "Access Not Configured";
            reason = accessNotConfigured;
        }
    );
    message = "Access Not Configured";
};
} 
```

使用相同的 url 只传递我的浏览器应用程序的密钥（带有引用者）工作没有任何问题。

```
NSString *string=[NSString stringWithFormat:@"https://www.googleapis.com/youtube/v3/videos?id=7lCDEYXw3mM&key=%@&fields=items(id,snippet(channelId,title,categoryId),statistics(viewCount))&part=snippet,statistics",key]; 
```

我真的很困惑这里的问题是什么，我现在一直在尝试让它与 iOS 应用程序 Key hours 一起工作。有什么明显的我失踪了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T15:39:58.363

如果您从任何应用程序（iOS 或其他）发出原始 HTTP 请求，那么您可以包含“浏览器应用程序的密钥”作为`key=`URL 参数，它应该足够了（至少对于只读、非身份验证的调用） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-03T15:28:58.827

如果您将 API 限制为 iOS 应用程序，则必须`x-ios-identifier-bundle-identifier`在请求的标头中包含带有参数的包 ID

[https://groups.google.com/forum/#!topic/google-cloud-endpoints/I-u3sAUU3Ts](https://groups.google.com/forum/#!topic/google-cloud-endpoints/I-u3sAUU3Ts)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-28T16:12:16.630

这似乎有效 - 添加为 HTTP 引荐来源网址，就像完整的 www 域一样：

```
chrome-extension://${chrome.runtime.id}/ 
```

# android - 如何从所有正在运行或暂停的活动中释放内存并返回已开始的活动

> ID：15440287
> 
> 赞同：0
> 
> 时间：2013-03-15T19:06:14.327
> 
> 标签：android, performance, android-activity, android-lifecycle, android-memory

我整个星期都在研究 android 堆内存控制。

故事是我们将登录屏幕背景更改为更高清的内容。这造成了严重的问题。它比以前消耗更多的内存，所以其余的活动，特别是从它打开一个大图像时，会导致内存不足的问题。

用DDMS分析后，终于找到了解决办法。我在图像启动时添加了位图控件，并在用户离开活动时回收它。这是我的代码：

```
protected void findByViews() {

    //Find all widgets view on the layout by ID
    background = (RelativeLayout) findViewById(R.id.mainTableLayout);

    Bitmap bm = BitmapFactory.decodeResource(this.getResources(), R.drawable.pbackground);
    BitmapDrawable bd = new BitmapDrawable(this.getResources(), bm);
    background.setBackgroundDrawable(bd);
    } 
```

当用户离开或停止活动时：

```
public void onPause() {
    super.onPause();
    java.lang.System.out.println("MAIN onPause");
            //Clear Image from Heap.
    BitmapDrawable bd = (BitmapDrawable)background.getBackground();
    background.setBackgroundResource(0);
    bd.setCallback(null);
    bd.getBitmap().recycle();
} 
```

通过这样做，应用程序的其余部分将在大约 40%-50% 的可用内存下运行。之前它只运行不到 10%。

然而，这并不是一个好的结局。我遇到了另一个问题。我有一个功能可以让用户注销并返回主屏幕。然而，登录屏幕本身需要大约 80% 的堆空间才能运行。在运行时（登录后），其余活动需要大约 50%-60% 才能运行。

简而言之，我只是没有足够的堆内存来从运行时再次午餐主屏幕！

这是退出和重新午餐时的代码：

```
 public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        String serviceType = intent.getStringExtra("serviceType").trim();
        System.out.println("serviceType:" + serviceType);
        if (serviceType.equals("exit")) {
            AlertDialog.Builder alertDialog = new AlertDialog.Builder(
                    getCurrentActivity());
            alertDialog.setTitle("Logout");
            alertDialog.setMessage("Do you want to logout?");
            alertDialog.setPositiveButton("Yes",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int which) {
                            // Unreg from App server so do not receive
                            // notification when logout
                            MultiData.getMultiData().serverLogOut();// never
                                                                    // serverlogout
                                                                    // before
                                                                    // DeviceRegistrar.unregisterWithServer
                            ImageManagerMemCache.INSTANCE.clear();
                            Intent intent = null;
                            intent = new Intent(getCurrentActivity(),
                                    main.class);
                            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            // intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                            startActivity(intent);
                        }
                    });
            alertDialog.setNegativeButton("No",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int which) {
                            // here you can add functions
                        }
                    });
            alertDialog.show();
        } 
```

我该如何改进这些代码，以释放应用程序堆的所有内存，然后从头开始重新启动主要活动？或者只有我能做的就是减少登录屏幕的内存使用（我怀疑这真的很难）。

谢谢！

# asp.net - 如何根据多个复选框选择向 sql server 表添加多行？

> ID：15440288
> 
> 赞同：0
> 
> 时间：2013-03-15T19:06:15.543
> 
> 标签：asp.net, visual-studio-2010, sql-server-2008, checkbox

我有两张桌子：`ServiceType`和`ServiceTerm`。

这些表相互关联，并组合成关联表 ServiceRate。一个人`ServiceType`可以有多个`ServiceTerms`，但并不总是全部。

在我的 asp.net 表单 (VB) 上，我想将其编码到可以使用复选框将每一行添加到数据库的位置，以选择`ServiceTerms`适用于所选`ServiceType`.

我对 asp.net 完全陌生，对 SQL Server 2008 也很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:47:56.583

这是我在其中一个项目中完成的示例：其中 chSportsList 是复选框列表的 ID

```
List<ListItem> list_chSportsList = new List<ListItem>();
foreach (ListItem chsli in chSportsList.Items)
{
    Guid gui2 = Guid.Parse("00000000-0000-0000-0000-000000000000");
    try
    {
        gui2 = Guid.Parse(chsli.Value.ToString());
    }
    catch { Response.Redirect("default.aspx"); }
    db = new IRANSportEntities();
    Customer_Sports customer_Sport = new Customer_Sports();
    customer_Sport = db.Customer_Sports.FirstOrDefault(x => x.Id_Customer == gui1 && x.Id_Sports == gui2);
    if (customer_Sport == null)
    {
        if (chsli.Selected == true)
        {
            db = new IRANSportEntities();
            Customer_Sports _save = new Customer_Sports() { Id = Guid.NewGuid(), Id_Customer = gui1, Id_Sports = gui2 };
            db.Customer_Sports.AddObject(_save);
            db.SaveChanges();
        }
    }
    else
    {
        if (chsli.Selected == false)
        {
            db.Customer_Sports.DeleteObject(customer_Sport);
            db.SaveChanges();
        }

    }
} 
```

# javascript - JavaScript 需要有关如何“暂停”while 循环的想法

> ID：15440289
> 
> 赞同：0
> 
> 时间：2013-03-15T19:06:17.020
> 
> 标签：javascript, html, loops, while-loop

所以我有一个循环，将文本文件中的 html 表显示到页面上，并且它会这样做，直到它使用了与我在代码的另一部分中预先确定的数组中的行匹配的所有可用 txt 文件。

唯一的问题是，当循环进行时，所有的表都在加载，页面只是坐在那里，看起来是空白的。加载可能需要很长时间，尤其是在互联网速度较慢的情况下。我需要能够一次加载大约 10 个表，然后在页面底部有一个按钮，上面写着“单击此处显示更多结果”，这会导致再加载 10 个表，直到所有可用表都加载完毕用过的。

我该怎么办？我尝试将循环放在循环中并使用一堆复杂的 if 语句，但都无济于事。

这是循环：

```
 arrayFinal[arrayln2]="end";
  var displayNumber=0;
  while(arrayFinal[displayNumber].charAt(0) != "e"){
    var boxPath="camper_htmls/"+arrayFinal[displayNumber]+".txt";
    boxhttp = new XMLHttpRequest();
    boxhttp.open("GET",boxPath,false);
    boxhttp.send(null);
    var boxHTML = boxhttp.responseText;
    var setDivId=document.createAttribute("id");
    setDivId.value=("div_"+displayNumber);
    var node = document.createElement("div");
    node.setAttributeNode(setDivId);
    document.getElementById("resultContainer").appendChild(node);
    var divIdNumber = ("div_"+displayNumber);
    document.getElementById(divIdNumber).innerHTML=boxHTML;
    displayNumber++;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:19:57.903

我不会使用循环，而是使用 的回调在`XMLHttpRequest`完成时请求下一项

```
arrayFinal[arrayln2]="end";
var displayNumber=0;
function callback(){
    if((arrayFinal[displayNumber].charAt(0) != "e"){
        var boxPath="camper_htmls/"+arrayFinal[displayNumber]+".txt";
        boxhttp = new XMLHttpRequest();
        boxhttp.open("GET",boxPath,true);
        boxhttp.onreadystatechange(function(){
            var boxHTML = boxhttp.responseText;
            var setDivId=document.createAttribute("id");
            setDivId.value=("div_"+displayNumber);
            var node = document.createElement("div");
            node.setAttributeNode(setDivId);
            document.getElementById("resultContainer").appendChild(node);
            var divIdNumber = ("div_"+displayNumber);
            document.getElementById(divIdNumber).innerHTML=boxHTML;
            callback();
        });
        displayNumber++;
        boxhttp.send(null);            
    }
}
callback(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:09:49.427

```
The `setTimeout()`

    var i = 1;                     //  set your counter to 1

    function myLoop () {           //  create a loop function
       setTimeout(function () {    //  call a 3s setTimeout when the loop is called
          alert('hello');          //  your code here
var boxPath="camper_htmls/"+arrayFinal[displayNumber]+".txt";
boxhttp = new XMLHttpRequest();
boxhttp.open("GET",boxPath,false);
boxhttp.send(null);
var boxHTML = boxhttp.responseText;
var setDivId=document.createAttribute("id");
setDivId.value=("div_"+displayNumber);
var node = document.createElement("div");
node.setAttributeNode(setDivId);
document.getElementById("resultContainer").appendChild(node);
var divIdNumber = ("div_"+displayNumber);
document.getElementById(divIdNumber).innerHTML=boxHTML;
displayNumber++;
    enter code here
          i++;                     //  increment the counter
          if (i < 10) {            //  if the counter < 10, call the loop function
             myLoop();             //  ..  again which will trigger another 
          }                        //  ..  setTimeout()
       }, 3000)
    }

    myLoop(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:10:01.257

编辑：我会给你一个很好的 jsfiddle，展示如何正确使用异步请求。

在这里试试这个（它现在是异步的，那样它就不会像你描述的那样做）：

```
arrayFinal[arrayln2]="end";
var displayNumber=0;
while(arrayFinal[displayNumber].charAt(0) != "e"){
var boxPath="camper_htmls/"+arrayFinal[displayNumber]+".txt";
boxhttp = new XMLHttpRequest();
boxhttp.open("GET",boxPath,true);
boxhttp.send(null);
var boxHTML = boxhttp.responseText;
var setDivId=document.createAttribute("id");
setDivId.value=("div_"+displayNumber);
var node = document.createElement("div");
node.setAttributeNode(setDivId);
document.getElementById("resultContainer").appendChild(node);
var divIdNumber = ("div_"+displayNumber);
document.getElementById(divIdNumber).innerHTML=boxHTML;
displayNumber++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T19:10:04.597

为什么不在你的 while 循环中添加一个计数器呢？IE

```
function runTenTimes(){
    var i=0;
    while((there_is_text)&&(i<10){
        do stuff;
        i++;
    }
} 
```

# git - 有没有办法让 git flow 显示它在幕后执行的命令？

> ID：15440291
> 
> 赞同：6
> 
> 时间：2013-03-15T19:06:25.023
> 
> 标签：git, git-flow

有什么方法可以让 git-flow 提前告诉我当我执行 flow 命令时它将执行的确切 git 命令；或者告诉我它是东东吗？

我只能看到输出和摘要吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-16T17:14:07.463

您可以使用 Git 的`GIT_TRACE` [环境变量](http://git-scm.com/docs/git#_environment_variables)来获取执行命令的详细跟踪。例如：

```
GIT_TRACE=true git flow feature start bar 
```

... 显示 ...

```
trace: exec: 'git-flow' 'feature' 'start' 'bar'
trace: run_command: 'git-flow' 'feature' 'start' 'bar'
trace: built-in: git 'config' '--get' 'gitflow.branch.master'
trace: built-in: git 'branch' '--no-color'
trace: built-in: git 'config' '--get' 'gitflow.branch.develop'
trace: built-in: git 'branch' '--no-color'
trace: built-in: git 'config' '--get' 'gitflow.branch.master'
trace: built-in: git 'config' '--get' 'gitflow.branch.develop'
trace: built-in: git 'config' '--get' 'gitflow.branch.master'
trace: built-in: git 'config' '--get' 'gitflow.branch.develop'
trace: built-in: git 'config' '--get' 'gitflow.origin'
trace: built-in: git 'config' '--get' 'gitflow.prefix.feature'
trace: built-in: git 'branch' '--no-color'
trace: built-in: git 'branch' '-r' '--no-color'
trace: built-in: git 'branch' '--no-color'
trace: built-in: git 'branch' '-r' '--no-color'
trace: built-in: git 'checkout' '-b' 'feature/bar' 'develop'
Switched to a new branch 'feature/bar'

Summary of actions:
- A new branch 'feature/bar' was created, based on 'develop'
- You are now on branch 'feature/bar'

Now, start committing on your feature. When done, use:

     git flow feature finish bar 
```

如果您想要更多详细信息，可以使用[`sh`shell](http://linux.die.net/man/1/sh) `xtrace`选项：

> 在扩展每个简单命令后，for command、case 命令、select 命令或算法 for command，显示 PS4 的扩展值，然后是命令及其扩展参数或相关单词列表。

编辑`git-flow`脚本并在第一行`set -x`之后添加。`#!/bin/sh`执行上面的命令，`git flow feature start bar`会显示很多信息（比答案中包含的更多）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-09T04:54:27.293

使用`--showcommands`开关，例如：

```
git flow feature start FEATURENAME --showcommands 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T21:45:41.027

[有些命令有一个详细的标志](https://github.com/nvie/gitflow/wiki/Command-Line-Arguments)，但我相信你的问题的答案是“否”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T21:57:01.297

[您可以通过检查源](https://github.com/nvie/gitflow)来查看每个命令的作用。它有据可查，因此即使不了解 bash，您也可以了解正在发生的事情。

实际上，在检查了源代码之后，似乎确实有一种方法可以记录 git flow 内部使用的命令；至少他们中的大多数。该功能是[通过此提交](https://github.com/nvie/gitflow/commit/5bca8d9358f5b08af40ac32f289bb14b18965cec)和`show_commands`设置提示引入的。您应该能够使用 启用它`--show_commands`，并且它将打印出它在内部使用的大多数 git 命令。

# ios - iOS CLGeocode 地址字典

> ID：15440296
> 
> 赞同：1
> 
> 时间：2013-03-15T19:06:36.783
> 
> 标签：ios, dictionary, geocode, clgeocoder

我正在尝试使用 CLGeocoder 对地址进行反向地理编码，并希望以编程方式创建地址字典以用于地理编码。我怎样才能做到这一点？我在上面找不到任何东西！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:23:53.900

CLGeocoder 头文件中的文档为您提供所需的信息：

```
// geocodeAddressDictionary:completionHandler: takes an address dictionary as defined by the AddressBook framework.
// You can obtain an address dictionary from an ABPerson by retrieving the kABPersonAddressProperty property.
// Alternately, one can be constructed using the kABPersonAddress* keys defined in <AddressBook/ABPerson.h>.

- (void)geocodeAddressDictionary:(NSDictionary *)addressDictionary completionHandler:(CLGeocodeCompletionHandler)completionHandler; 
```

# ios - 任何好的 iOSOpenDev 示例代码/参考资料？

> ID：15440303
> 
> 赞同：5
> 
> 时间：2013-03-15T19:06:50.927
> 
> 标签：ios, xcode, jailbreak, cydia, tweak

我有一些开发 iOS 应用程序的经验，我目前正在研究我对 Cydia 进行调整的想法。该调整适用于操作菜单，向菜单添加一个新按钮，并在点击按钮时显示一个界面。

我正在尝试使用 iOSOpenDev 上的操作菜单模板来执行此操作。我目前安装了 iOSOpenDev 并使用操作菜单模板创建了一个新项目。但是，我不知道在此之后如何进行。

我正在寻找一些关于如何使用 iOSOpenDev 创建调整的示例代码或参考资料，但到目前为止我什至还没有找到一个示例项目。是否有关于如何使用 iOSOpenDev 创建 Cydia 调整的最新文档或教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:21:26.100

示例代码：

*   [iPodTouchFans 上的 Mobile Substrate 教程](http://www.ifans.com/forums/threads/tutorial-hooking-springboard.103558/)
*   [iPhone Development Wiki 上的 MobileSubstrate 参考和示例](http://iphonedevwiki.net/index.php/MobileSubstrate)

编写完所有代码后，您需要执行以下操作：

1.  我不使用 iOSOpenDev，但如果我没记错的话，它会将你的调整打包到一个 Debian 包文件中。如果是这种情况，您只需将该文件复制到您的设备，安装它（可能使用`dpkg -i <filename.deb>`，然后重新启动 SpringBoard.

2.  如果没有，那么您只需获取结果`.dylib`和`.plist`文件，并将它们复制到设备的`/Library/MobileSubstrate/DynamicLibraries`目录中，然后再一次重新启动。

# php - PHP Facebook API - 访问对象数组项

> ID：15440304
> 
> 赞同：0
> 
> 时间：2013-03-15T19:06:56.560
> 
> 标签：php, arrays, facebook, facebook-graph-api, object

我有一个对象数组（显示在底部），可以通过以下方式访问数据：

```
echo $MyVariable->id;
echo $MyVariable->type; 
```

等等。但是，我无法通过执行以下操作访问项目 [count]：

```
echo $MyVariable->id; 
```

有人知道为什么吗？计数似乎用于其他用途，也许是计数？

```
 stdClass Object (
[id] => 573948779291487 
[from] => stdClass Object (
[category] => Bar 
[category_list] => Array (
[0] => stdClass Object (
[id] => 218693881483234 
[name] => Pub 
) 
[1] => stdClass Object (
[id] => 164049010316507 
[name] => Gastropub 
) ) 
[name] => The Melbourne Arms 
[id] => 533195070033525 
) 
[name] => The Melbourne Arms Gallery 
[location] => The Melbourne Arms 
[place] => stdClass Object (
[id] => 533195070033525 
[name] => The Melbourne Arms 
[location] => stdClass Object (
[street] => Main Street 
[city] => Melbourne 
[country] => United Kingdom 
[zip] => YO42 4QJ 
[latitude] => 53.8872441 
[longitude] => -0.8554097 
) ) 
[link] => http://www.facebook.com/album.php?fbid=573948779291487&id=533195070033525&aid=1073741825 
[cover_photo] => 573948812624817 
[count] => 28 
[type] => normal 
[created_time] => 2013-03-13T22:22:45+0000 
[updated_time] => 2013-03-13T22:34:40+0000 
[can_upload] => 
[likes] => stdClass Object (
[data] => Array (
[0] => stdClass Object (
[id] => 1361671776 
[name] => Lesley Maiden 
) 
[1] => stdClass Object (
[id] => 518580863 
[name] => Diane Maiden 
) 
[2] => stdClass Object (
[id] => 1254875611 
[name] => Vanessa Wilson 
) 
[3] => stdClass Object (
[id] => 533195070033525 
[name] => The Melbourne Arms 
) 
[4] => stdClass Object (
[id] => 100001664649752 
[name] => Bowen Lee 
) ) 
[paging] => stdClass Object (
[next] => https://graph.facebook.com/573948779291487/likes?limit=25&offset=25&__after_id=100001664649752 
) ) ) 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:12:08.697

尝试以不同的方式处理您的数据

```
$data  = file_get_contents("https://graph.facebook.com/573948779291487");
$data = json_decode($data, true);
echo $data['count']; 
```

# matlab - matlab：制作脚本来分析excel文件中的数据

> ID：15440307
> 
> 赞同：0
> 
> 时间：2013-03-15T19:07:01.427
> 
> 标签：matlab, variables, if-statement

我正在分析来自行为实验的数据。我正在将我的数据从**一个**excel 文件读入 matlab。

```
% load data
[num,text,raw] = xlsread('stop');
data=num(:,10); % column 10 in original excel file 
```

调用的变量`data`是一个包含所有受试者结果的单列向量 (25000x1)。

```
data(1:227) is from subject 1\. 
data(228:420) is from subject 2, and so on. 
```

在下面查看我的部分数据：

```
Subject ID    Data
10011         384
10011         290
10011         508
10033         322
10033         361
10033         522 
```

我需要得到一个名为`"data"`. 这些变量 ( `"data"`) 应包含每个主题的所有数据。

到目前为止，我已经为每个主题手动创建了一个变量 - 这是不切实际的（100 个主题）：

```
x1=find(num(:,1)==10011);
px1=data(x1,:); and so on up to 100th subject. 
```

如果这个过程可以像我在下面尝试过的那样自动化，那就更好了：

```
subjects=[10011; 10033...];
for i=1:length(subjects)
 data=num((find(num(:,1)==subjects(i))),10);
end 
```

如果我与我交换`data`，`data(i)`我会收到一条错误消息。我该怎么做？

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:35:23.817

你可以这样做：

```
subjects=unique(num(:,1)); %note that 'subjects' will be sorted.
data=[];
for i=1:length(subjects)
    temp1=num((find(num(:,1)==subjects(i))),10);
    %now two options, either save the data for each subject in a different cell, as follows:
    data{i}=temp1; %if you do this, you can replace temp with data{i}. Also remove the line: data=[];
    %or save it in a matrix but then you cannot differentiate between data of different subjects. For that, you have to write another code.
    data=[data;temp]; %this is where you need temp
end 
```

# jakarta-ee - “Java EE SDK”和“Java EE Web Profile SDK”有什么区别？

> ID：15440311
> 
> 赞同：4
> 
> 时间：2013-03-15T19:07:43.460
> 
> 标签：jakarta-ee, jax-ws

这让我很困惑！我刚开始学习\开发 Web 服务（即`jax-ws`），我无法包含`WSServletDelegate`，所以我认为它应该在`Java EE SDK`.

所以我去了`Java EE` [下载页面](http://www.oracle.com/technetwork/java/javaee/downloads/index.html)，发现这两个项目听起来最接近我的需要：

* * *

**Java EE 6 SDK 更新 4**

一个免费的集成开发工具包，用于构建、测试和部署 Java EE 6 应用程序。
包括：

*   GlassFish 开源版 3.1.2.2
*   Java EE 6 代码示例
*   Java EE 6 API 文档
*   Java EE 6 教程
*   你的第一杯：Java EE 平台简介

**Java EE 6 Web 配置文件 SDK 更新 4**

一个免费的集成开发工具包，用于构建、测试和部署 Java EE 6 Web 应用程序。
包括：

*   GlassFish 开源版 Web Profile 3.1.2.2
*   Java EE 6 代码示例
*   Java EE 6 API 文档
*   Java EE 6 教程
*   你的第一杯：Java EE 平台简介

* * *

两个下载包含相同的内容，但两个标题之间的**唯一**区别是“ **Web Profile** ”，后者的描述说它用于开发“Web 应用程序”。我唯一能想到的是后者有与`Servlets`or相关的 jars `JSP`，但那不应该已经包含在第一次下载中`Servlets`并且`JSP`被认为是`Java EE`技术规范吗？

如果我继续使用`Java EE`提供的 jar 进行开发，我应该在运行我的应用程序的机器上**安装** `Java EE`SDK，还是可以只在我的类路径中包含所需的 jar？

有人请帮我解决这个困惑！谢谢你。

# javascript - 如何获得设备的真实尺寸？

> ID：15440313
> 
> 赞同：2
> 
> 时间：2013-03-15T19:07:44.877
> 
> 标签：javascript, screen-size

我有这个问题：我想编写一个根据使用的设备显示不同的网站。我想要的是这样的：

```
if (screen.width < 400) useLayout(1);
else if (screen.width >=400 and screen.width < 800) useLayout(2);
else useLayout(3); 
```

现在的问题是，当我为移动设备编写代码时，javascript 报告的屏幕宽度是我使用元标记视口设置的。所以如果我创建一个文件：

```
<meta id='viewport' name='viewport' content='width=410'> 
```

那么当使用javascript（`window.screen.width`和`document.documentElement.clientWidth`）时，返回的值正好是410。这个值不反映真实的显示大小......

我真正需要的是了解该设备上 100 像素有多少英寸（或厘米）...

有什么办法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:13:48.257

我知道这是标记为 JavaScript，但我认为这不是合适的解决方案。CSS 内置了这一点。最好将您的设计层尽可能地保留在脚本之外。查看 CSS 响应式设计/[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)。

例子：

```
@media screen and (max-width:399px) { 
    body {
        background-color : 'red';
    }
}
@media screen and (min-width:400px) and (max-width:799px) { 
    body {
        background-color : 'blue';
    }
}
@media screen and (min-width:800px) { 
    body {
        background-color : 'green';
    }
} 
```

您还可以将它们隔离到自己的 CSS 文件中，以最大程度地减少不适用用户的冗余 CSS 数据传输：

```
<link rel="stylesheet" media="screen and (max-width:399px)" href="layout1.css" />
<link rel="stylesheet" media="screen and (min-width:400px) and (max-width:799px)" href="layout2.css" />
<link rel="stylesheet" media="screen and (min-width:800px)" href="layout3.css" /> 
```

要回答您关于来自 JS 的屏幕不准确的问题，它并[没有那么简单和干燥](http://tripleodeon.com/2011/12/first-understand-your-screen)，需要一些[解释差异](http://tripleodeon.com/wp-content/uploads/2011/12/table.html)的空间。

# php - 来自mysql的php输出不一致的引号和其他标点符号

> ID：15440317
> 
> 赞同：0
> 
> 时间：2013-03-15T19:07:58.923
> 
> 标签：php, mysql, character-encoding

我有来自 mysql 数据库的信息，我通过 php 获取并回显到页面中。我首先注意到了我的问题，因为我在输出中看到了一些 \' 以及一些带有问号的黑色菱形。我做了一些研究并意识到了两件事。

1.  我设计的工具将信息输入我的数据库很糟糕，因为它包含转义字符。

2.  我可以通过调用 stripslashes 来解决这个问题。

使用带斜杠从输出中删除了 \，但是无法识别的字符仍然存在。我调查了一下，意识到这是某种字符编码问题。但我不明白的是，我在数据库中有一些字段被转义（\），而另一些则没有。例如：

今天的菜是昨天的菜。

我不明白为什么一个单引号会被转义而一个不会。其他一些无法识别的字符包括一些双引号 (")、一些逗号 (,) 甚至一些句点（特别是省略号 ...）。

我错过了什么？

此外，我的数据库是 utf-unicode 格式，只是为了澄清我在某些数据库条目的同一字段中同时拥有 \' 和 ' 。如果这有所作为，这些条目是 varchar。

如果我需要提供任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:14:31.970

`PHP` `.net`这是粘贴在一起的两段代码。它使用 PDO 与数据库通信。这比使用 stripslashes 好很多`msqli_real_escape_string`。

```
<?php
/* Connect to an ODBC database using driver invocation */
$dsn = 'mysql:dbname=testdb;host=127.0.0.1';
$user = 'dbuser';
$password = 'dbpass';

try {
    $dbh = new PDO($dsn, $user, $password);
    /* Execute a prepared statement by binding PHP variables */
    $calories = 150;
    $colour = 'red';
    $sth = $dbh->prepare('SELECT name, colour, calories
        FROM fruit
        WHERE calories < :calories AND colour = :colour');
    $sth->bindParam(':calories', $calories, PDO::PARAM_INT);
    $sth->bindParam(':colour', $colour, PDO::PARAM_STR, 12);
    $sth->execute();
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}

?> 
```

# c++ - 访问 QGraphicsScene 中的其他项目内容

> ID：15440321
> 
> 赞同：0
> 
> 时间：2013-03-15T19:08:21.607
> 
> 标签：c++, qt, qgraphicsview, qgraphicsitem, qgraphicsscene

我有一个*dialog.cpp*文件，在这里我创建了`QGraphicsScene`使用`QGraphicsView`.

我创建了两个继承`QGraphicsPixmapItem`和的`"Vehicle"`类`"Junction"`。这两个对象都添加到`QGraphicsScene`我的*dialog.cpp*文件中。

`"Junction"`我想从我的`"Vehicle"`对象中调用一个成员方法。该方法返回一个我需要的布尔值。

这更像是一个面向 c++ 的问题，因为我确信有一个简单的解决方案可以利用访问父级。

关于项目的背景信息：每个人都`"Vehicle"`沿着一条路移动并接近一个`"Junction"`。车辆必须向路口询问“我的车道是否有绿灯要开？”，路口会回复`"true/false"`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:31:19.853

通过 QT 文档查看可能的解决方案后，我已部分解决了该问题。

调用`this->scene()`允许访问添加对象的场景的成员函数。由于我知道我调用的对象的坐标，因此`this->scene()->itemAt(240,0);`可以检索指向该项目的指针。

返回的指针是场景中提供的坐标处的最上面的项目。如果这提供了一个问题，则交替使用`scene()->items()`检索场景中所有项目的列表。

但是，这只能访问*项目*，而不是存储项目的向量。我一直在研究使用该`->parent()`函数并认为这可能是解决方案，并结合动态将其转换为所需的指针。如果我找到完整的解决方案，将更新答案。

# linux - 在 mac osx 的启动脚本上？

> ID：15440327
> 
> 赞同：0
> 
> 时间：2013-03-15T19:08:42.227
> 
> 标签：linux, macos

`/etc/rc.d`在 mac osx （等）上启动时是否有任何等效的脚本运行？

比如我们可以在linux中找到：

[https://stackoverflow.com/questions/3036/files-and-scripts-that-execute-on-boot](https://stackoverflow.com/questions/3036/files-and-scripts-that-execute-on-boot)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:46:22.570

这一般由`launchd`. 确切的操作方式（LaunchAgent 与 LaunchDaemon）取决于您希望它作为系统进程还是用户进程运行。有关详细信息，请参阅[守护程序和服务编程指南](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/DesigningDaemons.html#//apple_ref/doc/uid/10000172i-SW4-BBCBHBFB)。

# javascript - 从视图中获取值并发送到控制器

> ID：15440328
> 
> 赞同：0
> 
> 时间：2013-03-15T19:08:42.160
> 
> 标签：javascript, asp.net-mvc

在我的剃须刀视图页面中，我有照片列表。我想标记一张或多张照片，这些照片将被发送到控制器进行进一步操作。

如何获取此值（每张选定照片的 id (int)）以及如何使用 javascript 将此整数列表发送到控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:17:23.823

取一个隐藏的字段

```
<input type="hidden" name="hdnSelecetdPhotos" id="hdnSelecetdPhotosId" value="" /> 
```

.然后在每张照片的“onclick”事件中调用一个javascript/jQuery函数并将它们的id分配给以逗号分隔的隐藏字段。

然后在操作的 HttpPost 处从参数中发送隐藏字段名称，例如：

```
[HttpPost]
public ActionResult Index(string hdnSelecetdPhotos)
{
   //Here you can get the all selected photo ids by the "hdnSelecetdPhotos" parameter.
} 
```

# nosql - 如何最好地绕过 CouchDB 的非 RDBMS 限制

> ID：15440332
> 
> 赞同：2
> 
> 时间：2013-03-15T19:08:57.687
> 
> 标签：nosql, couchdb, relational-database

我们有两种文档“类型”：`Post`和`User`：

典型帖子：

```
{
   "_id": "3847345345",
   "Schema": "Post",
   "Text": "Hello World! This is a post!",
   "IsFeatured": true,
   "UserID": "12345345345234234"
} 
```

典型用户：

```
{
   "_id": "12345345345234234",
   "Schema": "User",
   "Username": "georgepowell"
   "PostIds": ["3847345345","5135345345","9987453236", ... ]
} 
```

在显示 的网页上，`Post`该`Username`帖子的 （以及有关该用户的任何其他可变信息）显示在帖子旁边。类似于 SO： ![用户信息](../Images/f85e29a815ebd0029d701a7167520aab.png)

这是一个典型的例子，说明 SQL JOIN 是完美的，但当然 CouchDB 不支持这样的事情。相反，我们可以创建一个视图来索引`User`文档和's`Post`上的文档。像这样：`Post``_id`

```
function(doc) {
    if (doc.Schema = 'Post') {
        emit([doc._id, 0], null);
    } else if (doc.Schema = 'User') {
        foreach (string id in doc.PostIds) // not javascript I know. shhh
            emit([id, 1], null);
    }
} 
```

效果很好，因为我们可以有效地检索给定单个`Post`'s所需的所有信息`_id`。

但是，如果我想创建一个列出所有帖子`IsFeatured == true`以及所有用户数据的视图，我会卡住！

```
function(doc) {
    if (doc.Schema = 'Post' && doc.IsFeatured) {
        emit([doc._id, 0], null);
    } else if (doc.Schema = 'User') {
        foreach (string id in doc.PostIds)
            emit([id, 1], null); // I can't check if the post is featured!
    }
} 
```

我是否达到了 CouchDB 对关系数据的限制？或者这种索引在 CouchDB 中是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:17:10.467

由于它是一种不同的技术，因此需要权衡取舍。有时虽然事情看起来在短期内会占用更多资源（额外的请求），但它可能是无关紧要的，从长远来看，如果你需要这种东西，可能会提供显着的可扩展性。

CouchDB 可以同时处理许多不同的“数据库”，您可以将它们视为不同的模型空间。因此，使用相同的 CouchDB 运行实例，您可以拥有`/users`和`/posts`. 这绝对不需要 CouchDB 的配置或性能方面的额外工作。

这可以使您的地图代码更直接，因为您不需要拥有“架构”字段并将其合并到每个地图功能中。

此外，您可以（并且应该）在给定的设计视图中拥有多个不同的 map/reduce 对。这很重要，因为如果您有两个不同的文档“架构” `emit(doc.id, doc.val)` ，您如何分辨哪个用于减少目的。

查看数据的更 CouchDB 惯用方式是您不将 post_ids 保存在用户身上。只是 Posts 上的 UserID，然后为 Posts 提供类似以下的地图：

```
(doc) ->
  emit([doc.user_id, doc.isFeatured], null);
  emit([doc.isFeatured, doc.createdAt], doc.user_id); 
```

然后对视图 API 的请求带有参数 like`?start_key=['12345345345234234']&end_key=['12345345345234234',{}]`会得到他们所有的帖子。

一个`?key=['12345345345234234', 1]`人只会得到他们的特色帖子。

第二次发出还使您能够快速获取按日期排序的整个系统中的所有帖子——如果您想要这些数据，请注明是谁制作的，而无需将整个帖子发送到管道中。

# string - 计算字符串中的字符串数？

> ID：15440333
> 
> 赞同：12
> 
> 时间：2013-03-15T19:08:59.673
> 
> 标签：string, powershell

您将如何使用 Powershell 计算字符串中的字符串数？

例如：

```
$a = "blah test <= goes here / blah test <= goes here / blah blah" 
```

`<= goes here /`我想计算上面出现了多少次。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-15T20:37:20.647

一行中的另一种方式（类似于@mjolinor 方式）：

```
([regex]::Matches($a, "<= goes here /" )).count 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-20T22:30:22.760

我有一根绳子，里面有一堆管子。我想知道有多少，所以我用这个来得到它。只是另一种方式:)

```
$ExampleVar = "one|two|three|four|fivefive|six|seven";
$Occurrences = $ExampleVar.Split("|").GetUpperBound(0);
Write-Output "I've found $Occurrences pipe(s) in your string, sir!"; 
```

*   马库斯

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-15T19:32:51.543

使用正则表达式：

```
$a = "blah test <= goes here / blah test <= goes here / blah blah"
[regex]$regex = '<= goes here /'
$regex.matches($a).count
2 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-15T19:23:29.740

您可以使用采用`[.NET String.Split][1]`字符串对象数组的方法重载，然后计算获得的拆分次数。

```
($a.Split([string[]]@('<= goes here /'),[StringSplitOptions]"None")).Count - 1 
```

请注意，您必须将搜索的字符串转换为字符串数组，以确保获得正确的`Split`重载，然后从结果中减去 1，因为 split 将返回搜索字符串周围的所有字符串。同样重要的是“无”选项，如果您的搜索字符串在开头或结尾返回，它将导致拆分在数组中返回空字符串（您可以计算）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-08-28T18:46:38.510

还有另一种替代方案：`(Select-String "_" -InputObject $a -AllMatches).Matches.Count`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-08-11T07:35:06.370

我很惊讶没有人提到`-split`运营商。

对于区分大小写的匹配，请选择`-cSplit`运算符，因为`-split`/`-iSplit`都不区分大小写。

```
PS Y:\Power> $a = "blah test <= goes here / blah test <= goes here / blah blah"

# $a -cSplit <Delimiter>[,<Max-substrings>[,"<Options>"]]
# Default is RegexMatch (makes no difference here):
PS Y:\Power> ($a -cSplit '<= goes here /').Count - 1
2

# Using 'SimpleMatch' (the 0 means return no limit or return all)
PS Y:\Power> ($a -cSplit '<= goes here/',0,'simplematch').Count - 1
2 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-19T18:49:16.610

只是为了扩展 BeastianSTI 的优秀答案：

查找文件行中使用的最大分隔符数（运行时行未知）：

```
$myNewCount = 0
foreach ($line in [System.IO.File]::ReadLines("Filename")){
    $fields = $line.Split("*").GetUpperBound(0);
    If ($fields -gt $myNewCount)
    {$myNewCount = $fields}
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-08-24T12:16:52.173

不是最好的解决方案，但很实用：

```
$a.Replace("<= goes here /","♀").Split("♀").Count 
```

确保您的文本不包含“♀”字符。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-12-27T20:18:20.363

Select-String 的另一种解决方案

```
$a = "blah test <= goes here / blah test <= goes here / blah blah"

($a | Select-String -Pattern "<= goes here /" -AllMatches).Matches.Count 
```

选择字符串文档：

[https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/select-string](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/select-string)

# android - Ndk-stack-trace 工具在 Windows 上不起作用

> ID：15440340
> 
> 赞同：2
> 
> 时间：2013-03-15T19:09:35.340
> 
> 标签：android, android-ndk, stack-trace

我在 Windows 上执行 NDK 堆栈跟踪工具时遇到问题。可能只是一个非常愚蠢的错误，所以这是我尝试的：

```
...\android-ndk-r8d\ndk-stack.exe -sym ".../JNITest/obj/local/x86/" -dump ".../crash.txt" 
```

我收到的消息如下：

```
********** Crash dump: **********
...

Stack frame #00  eip: 30303030: Unable to open symbol file .../JNITest/obj/local/x86//☺. Error (123): Unknown error 
```

所以这个文件夹中有一个 .so 文件应该包含符号（顺便说一句：我如何检查是否是这种情况？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:35:55.040

当您使用 ndk-build 构建本机库时，它会创建一个`.so`包含所有调试信息的文件，通常在目录`<proj>/obj/local/armeabi`中，然后通过剥离调试符号将该文件*安装到该文件中。*`<proj>/lib/armeabi`后者被打包到 APK 中。

**上面的armeabi**最常用，因为那里的大多数 Android 设备都使用 ARM CPU。您的帖子指的是**x86**子目录。你真的在这个项目中使用了英特尔驱动的设备吗？您是否为 x86 构建了本机库？如果你这样做了，你能在你的`<proj>\obj\local\x86`目录中找到这个文件吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T14:46:04.383

在 Windows 7 上使用 Android NDK Release 9，64 位时，我遇到了同样的 ndk-stack.exe 崩溃。更新到更新的 NDK 版本，Release 9c，64 位，问题就消失了。显然是 NDK 早期版本中的一个错误。

格雷格

# android - Google Place API，REQUEST_DENIED

> ID：15440343
> 
> 赞同：0
> 
> 时间：2013-03-15T19:09:39.650
> 
> 标签：android, google-places-api

Stackoverflow 上有很多 Google Place api REQUEST_DENIED 帖子，但我没有答案。

1.  我在 Google API 控制台上创建了一个项目

2.  在该项目下，使用 SHA1 证书指纹（debug.keystore）和包名生成 Android API 密钥

3.  已经在 Googel API 控制台上开启了“Place API”服务。

4.  请求 URL 来自[此处](https://developers.google.com/places/documentation/search)的 google 示例，并且已经替换了生成的 android API 密钥 [https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor =false&key=AddYourOwnKeyHere](https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AddYourOwnKeyHere)

但仍然得到 REQUEST_DENIED.......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:14:05.527

像这样设置请求 URL。

[https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=API_KEY](https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=API_KEY)

如果您正确配置了 Google Place API，我相信它会起作用。使用您的 API 密钥。

> 如何获取 API 密钥。

![在此处输入图像描述](../Images/ebe359c8bc35dbc3b9e812f1b7fa37b5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T09:14:08.763

我刚刚解决了这个问题。您应该在API控制台中打开“Places API”服务，然后结果将是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-29T07:46:54.137

如果您的 keyApi 是一个 android 密钥将不起作用，因为您需要创建另一个浏览器 api（保留为黑色以允许所有访问）并在您的项目中混合两者。原因在[这里](https://stackoverflow.com/questions/16224080/request-denied-with-google-places-api-browser-key-or-app-key)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-19T11:41:49.147

**要使用 Places API，您必须在所有 API 请求中包含一个 API 密钥，并且您必须为每个项目启用计费。**

[https://developers.google.com/places/web-service/usage-and-billing](https://developers.google.com/places/web-service/usage-and-billing)

# actionscript-3 - ActionScript 3 Access 从一个类（不是文档类）手动添加了 MovieClip 实例

> ID：15440354
> 
> 赞同：0
> 
> 时间：2013-03-15T19:10:32.000
> 
> 标签：actionscript-3, reference, instance

如果我有一个名为“btnExit”的实例，我将它手动添加到主时间线，我可以通过键入它的名称从我的文档类中引用它，例如。

```
package{
    public class Engine extends MovieClip{

        public function Engine(){
            trace(btnExit.x);
        }
    }
} 
```

但是现在我有一个嵌套在另一个影片剪辑中的实例，我想从一个类（而不是文档类）中访问它。

假设我的图书馆中有“菜单”电影剪辑。

然后我手动将“ButtonExit”按钮拖到“Menu”影片剪辑时间轴上，我将实例命名为“btnExit”，因此“btnExit”是“Menu”影片剪辑的子项。

“菜单”电影剪辑将通过代码动态添加到主时间轴。

现在我想从“Menu”类文件中访问“btnExit”，所以我写了这些代码。

文档类：

```
package{
    public class Engine extends MovieClip{

        public var menu:Menu;

        public function Engine(){
            menu = new Menu();
            addChild(menu);
        }
    }
} 
```

其他类：

```
package{
    public class Menu extends MovieClip{

        public function Menu(){
            trace(btnExit.x);
        }
    }
} 
```

但是由于无法访问 btnExit 而出现错误 #1009（空对象引用）；

任何人都可以帮助我，好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:29:00.943

确保 ButtonExit 的实例存在于菜单时间轴的每一帧上，并且它的实例在每一帧上都有适当的名称，或者编写一个 if 语句以仅在 Button 当前位于正确的帧上时才运行您的代码。

菜单剪辑动画时的每一帧都会重新实例化帧上的所有内容，因此如果您的第二/第三/第四/等帧没有名为 btnExit 的剪辑，则在为该帧调用构造函数时会抛出错误.

# android - 贴纸小部件的 AppWidgetProvider

> ID：15440360
> 
> 赞同：0
> 
> 时间：2013-03-15T19:10:55.110
> 
> 标签：android, android-activity, widget, appwidgetprovider

伙计们。

我正在创建一个贴纸小部件，女巫基本上是用户可以放在主屏幕上的图像（在某个维度上）。它完全没有任何作用。

这个想法是出售带有一些非营利组织徽标的贴纸，因此它可以作为捐赠，比方说。有5个不同的标志，就是这样。

我必须创建 AppWidgetProvider，但所有更改都将在设置活动中发生。所以，我的问题是：我在 AppWidgetProvider 中到底放了什么？我可以把它留空吗？o_o

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:54:35.900

如果您谈论通过 AppWidgetProvider() 传递某些内容，是的，您将其保留为空。但是，当它启用时，您将不得不传递它所在的上下文。

# java - Spring - 动态原型 Bean

> ID：15440361
> 
> 赞同：4
> 
> 时间：2013-03-15T19:10:57.913
> 
> 标签：java, spring, annotations

我想即时创建 Spring Prototype bean（其中包含 @Injects），但没有看到如何执行此操作。一个简单的例子：

```
@Named
public class Foo{
    public void someMethod(){
        for(int x=0; x < 10; x++){
            MyObject obj = new MyObject(); // How would this work with Prototype
            obj.setSomeField("Hello");
        }
    }
}

@Named
@Scope("prototype")
public class MyObject{
  @Inject
  SomeDependency blah;

  public void setSomeField(String word){}
} 
```

如果我将类 Foo 修改为如下所示，我将无法保证获得一个新实例：

```
@Named
public class Foo{
    @Inject MyObject obj;

    public void someMethod(){
        for(int x=0; x < 10; x++){
            obj.setSomeField("Hello");
        }
    }
} 
```

如果我创建一个配置类，它似乎也保持为单例

```
public class Configuration {

    @Bean
    public MyObject getMyObject(){
        return new MyObject();
    }
}

@Named
public class Foo{
    @Inject Configuration config;

    public void someMethod(){
        for(int x=0; x < 10; x++){
            MyObject obj = config.getMyObject();
            obj.setSomeField("Hello");
        }
    }
} 
```

我在这里错过了什么吗？

## 更新

我最终混合了所有提到的东西。

我用@Named 和@Scope("prototype") 标记了非单例，并使用通用方法调用它们：

```
@Named
public MyFileFactory implements ApplicationContextAware{
    private ApplicationContext context;

    @Override
    public void setApplicationContext(ApplicationContext ac) throws BeansException {
        context = ac;
    }

    public <T> T getNewInstance(final Class<T> type) {
       return context.getBean(type);
    }
} 
```

前任：

```
@Named
public class SomeClass{
    @Inject
    private MyFileFactory myFileFactory;

    public void foo(){
        final MyObject myObject = myFileFactory.getNewInstance(MyObject.class);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:22:14.513

我会使用“工厂”来创建`MyObject`.

```
@Named
public class MyObjectFactory {
    public MyObject newInstance() {
        return new MyObject();
    }
} 
```

然后，我会将这个工厂`@Inject`'ed 到我的`Foo`对象中。在那里，只要我需要一个，我就可以要求一个新的实例。

如果您希望通过 Spring 中的 bean 配置新实例，则可能必须将它们注入工厂，并在返回之前在对象上设置。像这样的东西：

```
@Named
public class MyObjectFactory {
    @Inject
    private MyOtherObject otherObject;

    public MyObject newInstance() {
        return new MyObject(otherObject);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:15:22.903

也许`@Configurable`注释是您正在寻找的：[文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/aop.html#aop-atconfigurable)

```
@Configurable
public class MyObject {
   // ...
} 
```

如果您使用`@Configurable`注释实例化对象，spring 将对这些对象执行依赖注入。

# r - 第二多项式的复根

> ID：15440369
> 
> 赞同：0
> 
> 时间：2013-03-15T19:11:39.317
> 
> 标签：r

我正在处理 seconf 阶多项式的根，我只需要存储复数根（只有虚部的根）。当我做：

```
Im(roots)) 
[1] -1.009742e-28  1.009742e-28 
```

所以程序说不等于0。所以条件

```
Im(roots) ==0 
```

从来都不是真的。我也存储了所有真实的根。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:24:02.313

这可能是 FAQ 7.31 的一个案例（处理浮点数的表示和比较）。该`all.equal`功能在这种情况下可用。最好的用途是

```
> isTRUE(all.equal(roots[1], 0) )
[1] TRUE
> isTRUE(all.equal(roots[2], 0) )
[1] TRUE 
```

阅读`?all.equal`所有血腥细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T19:35:41.713

DWin 几乎可以肯定是正确的，由于浮点运算的不精确性，您得到的数字很小。

要在您的应用程序中更正它，您可能需要使用`zapsmall(x, digits)`. `zapsmall()` 是一个很好的实用函数，可以将非常接近（在`digits`小数点内）的数字舍入为 0。

在这里，从其帮助页面中复制一个示例：

```
thetas <- 0:4*pi/2
coords <- exp(1i*thetas)
coords
# [1]  1+0i  0+1i -1+0i  0-1i  1-0i

## Floating point errors obscure the big picture
Im(coords) == 0
# [1]  TRUE FALSE FALSE FALSE FALSE
Re(coords) == 0
# [1] FALSE FALSE FALSE FALSE FALSE

## zapsmall makes it all better
Im(zapsmall(coords)) == 0
# [1]  TRUE FALSE  TRUE FALSE  TRUE
Re(zapsmall(coords)) == 0
# [1] FALSE  TRUE FALSE  TRUE FALSE 
```

# css - 在 Visual Studio 中定义自定义颜色？

> ID：15440371
> 
> 赞同：1
> 
> 时间：2013-03-15T19:11:50.337
> 
> 标签：css, visual-studio-2012, rgb

例如，在 Visual Studio 中，我可以在 CSS 值中键入“蓝色”，它会将其转换为适当的 RGB。是否可以定义自定义颜色？我希望能够定义“companyBlue”或“companyOrange”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:36:11.853

由于您使用的是`CSS`文件，因此您不应该使用任何颜色名称，例如`Blue`, `Green`,... 因为浏览器会自行决定它们赋予这些颜色的颜色值。与 Google Chrome 相比，IE 中的颜色`Green`可能完全不同。

我建议使用十六进制值，而不是：

```
#000 /* Black */
#fff /* White */
#f00 /* Red */ 
```

您可以使用这个类似 Photoshop 的颜色选择器轻松获取十六进制值：[http ://www.2createawebsite.com/build/hex-colors.html](http://www.2createawebsite.com/build/hex-colors.html)

现在，回到你原来的问题，你怎么能像`companyOrange`在 CSS 中那样使用变量？简单地说......只有CSS你不能使用任何变量。但是，您可以将值“存储”在 CSS 文件顶部的注释中，如下所示：

```
/*
    COLORS
    Black:          #000    
    Company Orange: #f64;
    Company grey:   #444;
*/ 
```

如果你真的想使用变量，你可以使用 CSS 预处理器，例如 SASS、LESS、Stylus，...所有这些都使用变量。

**阅读更多：**

*   [http://sass-lang.com/](http://sass-lang.com/)
*   [http://lesscss.org/](http://lesscss.org/)
*   [http://learnboost.github.com/stylus/](http://learnboost.github.com/stylus/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:14:45.703

我找到了这个，但不是很喜欢这个解决方案：http: [//24ways.org/2006/faster-development-with-css-constants/](http://24ways.org/2006/faster-development-with-css-constants/)

> 要真正实现常量，您需要在将文件发送到浏览器之前使用 CSS 以外的东西来处理文件。您可以使用任何脚本语言——PHP、ASP、ColdFusion 等来解析您已在其中输入常量的 CSS 文件。因此，在 CSS 文件的常量部分中，您将拥有：
> 
> ```
> $darkgrey = '#333333'; 
> $darkblue = '#000066'; 
> ```
> 
> CSS 文件的其余部分与正常情况一样，只是当您使用常量值时，您将使用常量名称而不是添加颜色：
> 
> ```
> p { color: $darkgrey; } 
> ```
> 
> 然后，您的服务器端脚本可以解析 CSS 文件，将常量名称替换为常量值，并将有效的 CSS 文件提供给浏览器。Christian Heilmann 已经为 PHP 做到了这一点，但是这可以适用于您服务器上可用的任何语言。
> 
> Shaun Inman 提出了另一种执行此操作的方法，它无需链接到 PHP 脚本，还可以使用 at-rules 的语法添加常量。此方法再次使用 PHP，需要您编辑 .htaccess 文件。
> 
> 另一种方法是使用本地脚本生成静态 CSS 文件（如果常量只是为了加快开发速度）或作为 Web 应用程序本身的一部分。使用常量名称存储模板样式表来代替您要更新的值意味着您的脚本可以简单地打开模板、替换变量并将结果保存为新的样式表文件。
> 
> 虽然 CSS 常量对开发人员来说是一个真正的帮助，但它们也可以用来为您的应用程序添加新功能。与我在本文开头使用的电子邮件地址示例一样，结合使用 CSS 和服务器端脚本，您可以使站点管理员能够选择新主题的颜色，以便在托管内容的页面上使用地点。通过使用常量，您只需让他们选择更改 CSS 的某些部分，而不是上传完全不同的 CSS 文件，这可能会导致一些有趣的结果！
> 
> 由于今年圣诞节我们不太可能在树下找到真正的 CSS 常量，因此上述方法是更好地管理样式表的一些可能性。但是，如果您有更好的方法、CSS Constant 恐怖故事或任何其他建议，请在下方添加您的评论。

# ios - 将对象从孩子传递给父母

> ID：15440374
> 
> 赞同：0
> 
> 时间：2013-03-15T19:12:06.737
> 
> 标签：ios, pointers, automatic-ref-counting, parent-child, exc-bad-access

我的问题是我想将对象从子视图（控制器）返回给父视图（控制器）。我通过这样的调用传递对象：

`parentView.someObject=objectFromChild;`

一切都很好，直到子视图被删除（因为它被弹出并且没有指针显示在上面）但是从子视图传递到父视图的对象也被删除。谁能告诉我如何保存我的对象（即使创建它的视图已被删除）？使用 NSString 我的方法效果很好......但是对于对象我总是得到 EXC_BAD_ACCESS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:17:55.970

确保父对象保留它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:29:37.070

Sounds like there are a couple of challenges here and I'll try to give some simple tips.

**Passing Data**
If you want to pass an object upward from a child to a parent, design your Child class so that the object or variable is a public property. Then, any other object (*like Parent objects that own the Child*) can access that property.

**Keeping Data Alive**
Usually EXC_BAD_ACCESS means the object has already been deleted by the system. Tell the system you want to hang on to the object by setting 'strong' in the property declaration, and this will take care of your EXC_BAD_ACCESS problem.

Take a look at the following code for an example of how to implement a very simple parent/child data relationship and retain data.

```
//****** Child.h

@interface Child : NSObject

// Child has a public property
// the 'strong' type qualifier will ensure it gets retained always
// It's public by default if you declare it in .h like so:
@property (strong, nonatomic) NSString *childString;

@end

//****** ParentViewController.h
#import <UIKit/UIKit.h>
#import "Child.h"

@interface ParentViewController : UIViewController

@property (strong, nonatomic) Child *myChild;

@end

//****** ParentViewController.m

@implementation ParentViewController

@synthesize myChild;

- (void)viewDidLoad {

    [super viewDidLoad];

    // create child object
    self.myChild = [[Child alloc] init];

    // set child object (from parent in this example)
    // You might do your owh setting in Child's init method
    self.myChild.childString = @"Hello";

    // you can access your childs public property
    NSLog(@"Child string = %@", self.myChild.childString;
} 
```

# security - Chrome 扩展登录安全

> ID：15440377
> 
> 赞同：0
> 
> 时间：2013-03-15T19:12:37.887
> 
> 标签：security, login, google-chrome-extension

我有一个用户可以注册的网站，我想使用 chrome 扩展提供一些功能，我有点担心安全性：

我的想法是在弹出窗口中显示一个登录表单，然后使用用户名/密码（使用 HTTPS）向我的服务器发送一个 ajax 请求，然后将一个令牌存储到 localStorage 中，用于跟踪 ajax 调用。

这是不安全的吗？为什么？我不明白这比在我的网站上使用表单或记录从客户端 js 框架发送 ajax 请求更不安全

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:24:36.900

这是安全的，只要您在客户端正确处理令牌（即仅将其提交到您的站点，而不是其他站点）。危险在于，您实际上是在绕过 Google 和开源社区为保护 Chrome/Chromium 免受 XSS、CSRF 和其他令牌窃取攻击所做的工作。确保没有其他站点可以从您的扩展程序请求令牌（这是通过同域强制在浏览器中完成的）。您将需要使用证书签名来验证请求的来源（您应该能够重用用于 SSL 的私有证书）。

将所有客户端请求视为恶意请求很重要，即使它们来自您的扩展程序。服务器必须执行所有安全处理，就好像客户端完全受到威胁一样。在服务器端，您甚至不应该知道用户使用的是您的扩展程序还是常规浏览器，因为从安全角度来看，这并不重要。

至于在客户端存储登录凭据，您永远不应该以纯文本形式存储密码。您应该对其进行加盐和散列，然后将该散列提交给服务器。根据您的问题，听起来您无论如何都不会存储用户的凭据，只是一个令牌。如果是这种情况，并且令牌不包含任何敏感内容，那么存储它应该没有问题。确保您在服务器端使令牌过期并定期强制重新验证。

*已编辑答案以进行澄清和错别字*

# php - 相当于 file_get_contents("php://input"); 在经典的 asp

> ID：15440378
> 
> 赞同：2
> 
> 时间：2013-03-15T19:12:40.077
> 
> 标签：php, asp-classic

是这个吗？

我正在尝试转换`$data = file_get_contents("php://input");`为经典的 asp...

```
 Set xmlhttp = CreateObject("MSXML2.ServerXMLHTTP.6.0") 
    xmlhttp.open "GET", php://input, false 
    xmlhttp.setRequestHeader "Content-type", "application/x-www-form-urlencoded"
    xmlhttp.send
    TOKEN = xmlhttp.responseText 
```

编辑：回答约翰的问题......

实时更新

> 成功订阅后，Facebook 将在每次发生更改（所选字段或连接）时继续调用您的端点。对于每次更新，它都会发出一个 HTTP POST 请求。
> 
> 该请求将具有 application/json 的内容类型，并且正文将包含一个 JSON 编码的字符串，其中包含一个或多个更改。
> 
> PHP 开发人员注意事项：在 PHP 中，要获取编码数据，您将使用以下代码：
> 
> $data = file_get_contents("php://input"); $json = json_decode($data);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:35:03.177

编辑#2

这是基于您的 Facebook 信息的有根据的猜测 - 尝试

```
Set xmlhttp = CreateObject("MSXML2.ServerXMLHTTP.6.0") 
xmlhttp.open "GET", Request, false 
xmlhttp.setRequestHeader "Content-type", "application/json"
xmlhttp.send
TOKEN = xmlhttp.responseText 
```

基本上这是您最初的想法，在第 2 行和第 3 行稍作更改。您也可以在第 2 行尝试 Request.Form 而不是 Request，因为脚本正在接收 POST 数据

编辑 - 是的，看起来你的代码可以工作，只需稍作改动。您的网址需要放在双引号内 - 即

```
xmlhttp.open "GET", "php://input", false 
```

谢谢你的问题。我今天学到了一些东西。我会把我原来的答案作为背景阅读

你能告诉我更多关于你想要达到的目标吗？看起来您想要获取外部 URL 的内容，然后在您的 ASP 页面中使用它。只要您的外部 URL 的输出是有效的 XML，您当然可以使用 XML 对象。代码看起来像这样。

```
set xml = Server.CreateObject("Msxml2.DomDocument")
xml.setProperty "ServerHTTPRequest", true
xml.async = false
xml.validateOnParse = false
xml.load("http://yoururl") 
```

然后你有一个 xml 对象，这里只是称为“xml”，你可以根据需要使用它。例如，如果您只是希望它按原样出现在页面中，您将添加

```
Response.write xml 
```

如果您的外部 URL 输出不是有效的 XML，那么我认为 Classic ASP 无法自行执行此操作，您可能需要在您的服务器上安装第三方组件，例如 AspTear

[http://www.alphasierrapapa.com/ComponentCenter/AspTear/](http://www.alphasierrapapa.com/ComponentCenter/AspTear/)

您在上面建议的代码或其变体可能会很好用，我将对其进行试验。Classic ASP 本身已经十多年没有更新，但微软的 XML 处理器肯定已经更新了

# python - 在 Python 3 中转换为不同的位置符号

> ID：15440379
> 
> 赞同：3
> 
> 时间：2013-03-15T19:12:45.917
> 
> 标签：python, numbers

我正在尝试编写一个函数，该函数允许我将数字从某个位置符号转换为另一种选择，从二进制一直到 * *hexa* *trigesimal 基数。为了做到这一点，我首先需要能够将我的初始数字（以字符串形式给出）转换为十进制数，以便进一步转换。

但是，我的功能似乎有一个错误。

我有的：

```
def decimal(number, base1):
    number_dec = 0
    val = '0123456789abcdefghijklmnopqrstuvwxyz'

    if base1 != 10:
        for digit in number[::-1]:
            factor = val.find(digit)
            for exp in range(0, len(number)):
                number_dec += factor * base1 **exp
    else:
        number_dec = number
    return number_dec 
```

例如，如果我输入：

```
decimal('4d2', 16) 
```

该函数返回“5187”而不是正确的“1234”。

错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:16:13.253

*您为每个数字*执行整个循环：

```
 for exp in range(0, len(number)):
        number_dec += factor * base1 **exp 
```

如果您不必*自己*推出，则可以使用内置工具：

```
In [2]: int('4d2', 16)
Out[2]: 1234 
```

# php - 如何根据下拉选择更改跨度的内容

> ID：15440387
> 
> 赞同：1
> 
> 时间：2013-03-15T19:13:13.697
> 
> 标签：php, javascript, html

我有以下代码。当用户单击“添加另一项运动”时，我试图获取它，kpsport1 将根据用户单击的次数增加到 2、3、4 等。
此外，当他们选择一项运动时，我希望将“选择您的运动”（formSectionHeader）替换为他们选择的运动。尽管在 JS 部分工作了数天，但在使其正常工作时遇到了重大问题。欣赏任何见解！太感谢了！！

```
<div id="copy">
    <div id="personalInfo">
                <h1>Sporting Experience</h1>

                <form action="" name="signUp-pg1" id="signUp-pg1">

                    <div class="singleSportWrap">
                        <h2 class="formSectionHeader"><strong>CHOOSE YOUR SPORT</strong> <span>you can add another sport later.</span></h2>

                      <div class="singleSport">

                     <div id="KPspecialityPosition" class="formSection">

                         <div id="sportSelectField" class="selectStyled">
                              <select class="longField styled KPsportSelecter" name="KPsport1" id="KPsport1">
                                 <option value="default">Sport</option>
                                 <option value="basketball">Basketball</option>
                                 <option value="soccer">Soccer</option>
                                 <option value="football">Football</option>
                                 <option value="baseball">Baseball</option>
                                 <option value="hockey">Hockey</option>
                             </select>

                             <div class="checkboxInput"><input type="checkbox" name="primarySport" value="primarySport"><span>This my primary sport</span></div>

                         </div><!-- //selectStyled -->

                                             </div><!-- //formSection -->
                 </div><!-- //singleSport -->
                 </div><!-- //singleSportWrap -->

                 <p id="addAnotherSport" class="addMoreBtn">Add Another Sport</p>

                 <div id="formStepControls">
                     <a id="saveForm">Save for Later</a>
                     <a href="sign-up-3.php" id="proceedForm">Proceed to Vouching</a>
                 </div><!-- //formStepControls -->

             </form>

    </div><!-- personal info -->

</div><!-- copy --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:23:06.697

这里有一些 JavaScript 应该做你所要求的（或者至少我如何解释你所要求的）：

```
document.getElementById("addAnotherSport").onclick = function () {
    var kps = document.getElementById("KPsport1");

    var i = kps.selectedIndex;
    i++;
    if (i >= kps.options.length) i = kps.options.length - 1;

    kps.selectedIndex = i;

    document.getElementsByTagName("strong")[0].innerHTML = kps.options[kps.selectedIndex].text;
}

document.getElementById("KPsport1").onchange = function () {
    document.getElementsByTagName("strong")[0].innerHTML = this.options[this.selectedIndex].text;
} 
```

如果您将其添加到页面底部的脚本标记中，就在结束正文标记之前，它应该可以工作。

# css - 如何控制 `div` 在 html 中重叠

> ID：15440391
> 
> 赞同：5
> 
> 时间：2013-03-15T19:13:24.050
> 
> 标签：css, html, overlap

我正在创建一个网页，并且我有两个`div`s，例如 A 和 B。A 的位置是`fixed`并且它在页面顶部，但 B 的位置是`absolute`并且在页面中间的某个位置。当它们重叠时，B 位于 A 之上，但我希望这是相反的。我希望 A 能够胜过任何事情，但我不知道该怎么做。

请注意，改变他们的位置不是一种选择。

先感谢您。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T19:15:46.980

您可以使用`z-index`css 设置来修改非静态定位元素顺序：

```
div#A { z-index: 2; }
div#B { z-index: 1; } 
```

A 将显示在 B 上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T19:15:06.453

使用 z-index 值将它们相应地调整为图层。它是一个样式属性：style="z-index:200"....

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T19:32:15.983

注意：z-index 仅适用于**定位**元素（**position:absolute**、**position:relative**或**position:fixed**）。

```
<html>
  <div id="divA" style="width:100%; height:50px; z-index:2; position:fixed; background-color: red">
  </div>
  <div id="divB" style="width:100%; height:50px; z-index:1; position:absolute; top:30px; left:20px; background-color:green ">
  </div>
</html> 
```

divA 现在将位于 divB 之上（由于 z-index 属性）。但请确保为 div 定义**位置**属性。如果我们删除**position:fixed** for divA，这将不起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T19:15:37.570

给 A 一个`z-index`比 B 更大的属性。

```
div.a {
    z-index:2;
}
div.b {
    z-index:1;
} 
```

您可以在 MDN 上阅读[z-index](https://developer.mozilla.org/en-US/docs/CSS/z-index)的作用，但简而言之，“当元素重叠时，z-order 确定哪个覆盖另一个。具有较大 z-index 的元素通常覆盖具有较低 z-index 的元素。”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T19:19:28.027

如果确实存在重叠，您可以使用 css 媒体查询并更改属性值。

或者使用javascript来测试它是否重叠。这是你有一天写的一种方法：[https ://github.com/yckart/jquery.overlaps.js](https://github.com/yckart/jquery.overlaps.js)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-15T19:30:36.403

使用 CSS 为 Div A 提供高 Z-Index。

```
#a{
  z-index: 100;  
} 
```

这将意味着 Div A 肯定会停留在所有/大多数其他元素之上，值越高，它就越有可能高于其他所有元素，具体取决于页面上有多少其他元素。如果您需要对多个元素进行更精确的重叠控制，请为您的元素分配特定的 z-index 值，该值越高，元素的顶部就越多。您也可以使用负值。

# jquery - 如何以编程方式调整 jquery mobile 中面板的选项？

> ID：15440394
> 
> 赞同：2
> 
> 时间：2013-03-15T19:13:46.693
> 
> 标签：jquery, html, function, css, jquery-mobile

在浏览 JQuery Mobile 上的面板文档时，它提供了以下作为如何打开面板的示例：

```
$( "#idofpanel" ).panel( "open" , optionsHash ); 
```

但是，我很难弄清楚它到底是什么样子。例如，我想让位置在右边。如果我使用 data-position 属性而不是试图通过 javascript 操作它，那将起作用。它继续打开面板但忽略我的选项覆盖。

我尝试过的最正确的（imo）外观：

```
$('#rightpanel').panel(
    "open",
    {
        position: "right",
        animate: false,
        dismissable: false
    }
); 
```

我将不胜感激任何帮助。谢谢！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T19:30:44.243

那我要让你失望了，jQuery Mobile 是有问题的和平框架，更不用说面板首次出现在上一个 jQuery Mobile 版本中。这使他们成为越野车。

目前，从您的示例中，只有位置选项有效，并且只有在面板打开之前设置。

我给你做了一个工作示例：http: [//jsfiddle.net/Gajotres/znygq/](http://jsfiddle.net/Gajotres/znygq/)

```
$(document).on('pagebeforeshow', '#index', function(){       
    $(document).on('click', '#openpanel', function() {              
        $('#rightpanel').panel({ position: "right"});       
        $('#rightpanel').panel("open");          
    });        
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:22:44.857

```
$('#rightpanel').panel(
    "open",
    {
      options: {
        position: "right",
        animate: false,
        dismissable: false
      }
    }
); 
```

我更喜欢你的方式，但看起来这就是他们在演示网站上的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-12T03:49:07.257

如果您手动设置类，您可以做到最好，但为了将来改进 JQM，也许您现在可以同时做这两个：

我刚刚改进了[Gajotres](https://stackoverflow.com/questions/15440394/how-do-i-programmatically-adjust-options-for-a-panel-in-jquery-mobile#15440655)的答案并导致了[jsFiddle](http://jsfiddle.net/Gigapedia/znygq/38/)

```
var panel = $("#rightpanel"),
    DEFAULT = {
    POSITION: {
        left: {type: "left"},
        right: {type: "right"}
    },
    DISPLAY: {
        overlay: { type: "overlay" , className: "ui-panel-display-overlay"},
        reveal: { type: "reveal" , className: "ui-panel-display-reveal"},
        push: { type: "push" , className: "ui-panel-display-push"}
    }
},
lastState = {
    display: DEFAULT.DISPLAY.push,
    position: DEFAULT.POSITION.left
};

function options (key, value) {
    return panel.panel("option", key, value);
}

function position (pos) {
    // { left | right }
    if (
        DEFAULT.POSITION[pos] && 
        DEFAULT.POSITION[pos].type !== lastState.position.type
    ){
        panel.panel("close");
        lastState.position = DEFAULT.POSITION[pos]
        panel
            .toggleClass("ui-panel-position-left ui-panel-position-right");
        return options("position", pos);
    }
}

function display (disp) {
    // { overlay | reveal | push }
    if (
        DEFAULT.DISPLAY[disp] &&
        DEFAULT.DISPLAY[disp].type !== lastState.display.type
    ) {
        panel.panel("close");
        lastState.display = DEFAULT.DISPLAY[disp]
        panel
            .removeClass("ui-panel-display-reveal ui-panel-display-overlay ui-panel-display-push")
            .addClass(display.className);
        return options("display", disp);
    }
}

$(document).on('pagebeforeshow', '#index', function(){
    $(document).on('click', '#openpanel', function() {
        position("right");
        panel.panel("open")
    });
}); 
```

# java - Android - 以编程方式通过蓝牙发送图像

> ID：15440398
> 
> 赞同：3
> 
> 时间：2013-03-15T19:14:01.923
> 
> 标签：java, android, image, bluetooth, chat

我已经修改了 Android 蓝牙聊天示例应用程序，现在可以发送图像。这对于第一张图像来说很好。它被发送并正确显示。当我尝试发送另一个图像时，它似乎发送了 20 多次以前的图像，而它应该只发送一次新图像。我尝试过使用oef，但无济于事。

这发送图片：

```
 Bitmap icon = BitmapFactory.decodeResource(context.getResources(), R.drawable.rc_a);

        ByteArrayOutputStream bytes = new ByteArrayOutputStream();
        icon.compress(Bitmap.CompressFormat.JPEG, 40, bytes);
        byte[] image = bytes.toByteArray();

        mConnection.write(image); 
```

这是在 ConnectedThread 中：

```
 public void run() {
        byte[] buffer = new byte[1024];
        byte[] imgBuffer = new byte[1024 * 1024];
        int pos = 0;

        // Keep listening to the InputStream while connected
        while (true) {
            try {
                // Read from the InputStream
                int bytes = mmInStream.read(buffer);
                System.arraycopy(buffer,0,imgBuffer,pos,bytes);
                pos += bytes;

                mHandler.obtainMessage(BtoothSetupActivity.MESSAGE_READ,
                        pos, -1, imgBuffer).sendToTarget();

            } catch (IOException e) {
                connectionLost();
                break;
            }
        }
    } 
```

这会读回数据：

```
 case MESSAGE_READ:
    byte[] readBuf = (byte[]) msg.obj;
    Bitmap bmp = BitmapFactory.decodeByteArray(readBuf, 0, msg.arg1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:18:47.987

对于传输文件，您可以显式调用`ACTION_SEND`使用意图。

使用`ACTION_SEND`，将弹出一个菜单，其中包含可以处理您要发送的文件类型的应用程序，用户需要从中选择蓝牙，然后选择要发送文件的设备。

```
File sourceFile = new File("//mnt/sdcard/file.apk"); 
Intent intent = new Intent();
intent.setAction(Intent.ACTION_SEND);
Intent.setType("image/jpeg"); 
intent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(sourceFile));
startActivity(intent); 
```

附加帮助：

*   [蓝牙文件传输安卓](https://stackoverflow.com/questions/9748219/bluetooth-file-transfer-android)
*   [安卓蓝牙文件发送](https://stackoverflow.com/questions/11502497/android-bluetooth-file-sending)

# python - 循环期间字典中的值

> ID：15440403
> 
> 赞同：0
> 
> 时间：2013-03-15T19:14:13.207
> 
> 标签：python, list, loops, dictionary

在字典中循环时，如何更改循环中的值。例如：

```
listt=[1,4,2]
mydict=[a:d, c:b, q:r] 
```

我正在尝试制作：

```
for i in listt:
     for key in mydict:
           mydict[key]=i 
```

但这不起作用。发生的是第 i 个值最终成为最后一个值。在我的新字典中，所以它始终是 a:2、c:2 等。而不是`a:1, b:4, q:2`. 我需要存储我认为的第 i 个值，然后使用它来更改字典中的值。虽然我不确定我在做什么！任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:16:52.573

dicts 中的键没有排序。因此，您无法控制`listt`dict 中的项目和键之间的配对`mydict`。

但是，[OrderedDict中的键](http://docs.python.org/2/library/collections.html#collections.OrderedDict) *是*有序的：

```
import collections

listt=[1,4,2]
mydict=collections.OrderedDict([('a','d'), ('c','b'), ('q','r')])
for item, key in zip(listt, mydict):
    mydict[key] = item

print(mydict) 
```

产量

```
OrderedDict([('a', 1), ('c', 4), ('q', 2)]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:17:55.687

这里有几个误解`dict`：

似乎您想使用相同的键和新值（使用从新列表提供的值）“更新”字典。问题是，字典不能保持存储的项目井井有条；字典`{a:d, c:b, q:r}`并不意味着您可以按顺序遍历字典`[a, c, q]`。

此外，您正在使用嵌套的 for 循环，这就是为什么每个值最终都作为`listt`.

你可以使用 collections.OrderedDict 来保持秩序。并且，而不是嵌套的 for 循环，用于`zip`组合迭代器。

所以，你的代码是：

```
from collections import OrderedDict

listt = [1, 4, 2]
mydict = OrderedDict([(a, d), (c, b), (q, r)])

mydict = OrderedDict(zip(mydict.keys(), listt)) 
```

# javascript - Html5 画布和 javascript document.getElementById() 返回 null

> ID：15440404
> 
> 赞同：1
> 
> 时间：2013-03-15T19:14:16.633
> 
> 标签：javascript, html, canvas

我正在尝试使用 html5 画布，当我这样做时

```
 var c=document.getElementById('myCanvas');
    var ctx=c.getContext('2d');
    ctx.fillStyle="#FF0000";
    ctx.fillRect(0,0,150,75); 
```

这是html

```
 <!DOCTYPE html>
    <html>
    <head>
    <script type="text/javascript" src="game.js"></script>
    </head>
    <body>
    <canvas id="myCanvas" width="512" height="480" style="border:1px solid #000000;">
    </canvas>
    </body>
    </html> 
```

我不知道出了什么问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T19:15:46.830

您的脚本可能在您的 DOM 准备好并且窗口已加载之前运行，例如：

```
window.onLoad=function(){
    var c=document.getElementById('myCanvas');
    var ctx=c.getContext('2d');
    ctx.fillStyle="#FF0000";
    ctx.fillRect(0,0,150,75);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:49:55.417

尝试在结束正文标记之前插入脚本。

像：

```
...
    <script src="game.js"></script>
</body>
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:18:32.100

您可以在加载 DOM 之前尝试获取它吗？尝试在此块内调用您的代码：

```
window.onload = function() {
    var c=document.getElementById('myCanvas');
    var ctx=c.getContext('2d');
    ctx.fillStyle="#FF0000";
    ctx.fillRect(0,0,150,75);
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T19:27:22.483

如果您想通过 访问`DOM Element`，`javascript`请确保您的 java 脚本代码应该在 DOM 加载后触发，使用`document.onload`或`window.onload`回调来触发您的 javascript 代码。

享受编码..

# c# - 无法访问 log4net.GlobalContext - 为什么不呢？

> ID：15440405
> 
> 赞同：0
> 
> 时间：2013-03-15T19:14:19.410
> 
> 标签：c#, .net, logging, ado.net, log4net

我有一个 AdoNetAppender 记录到 SQL Server 数据库。它工作正常；但是，我想添加一些自定义参数。我见过如下方法：

```
log4net.GlobalContext.Properties["MyColumn"] = "MyValue"; 
```

但是，当我尝试做同样的事情时，我收到以下消息：

```
Cannot access internal class 'GlobalContext' here. 
```

我究竟做错了什么？

# javascript - 如何提交此表格？

> ID：15440406
> 
> 赞同：0
> 
> 时间：2013-03-15T19:14:22.443
> 
> 标签：javascript, jquery, web-applications

我正在尝试将此表单提交给 servlet，但没有成功。我知道它有一大段代码，但它工作正常，唯一的问题是单击按钮即可打开一个表单，并且在验证并提交后，什么也没有发生。查找“问题在这里”评论以找出我在哪里调用提交方法。谢谢你的帮忙！

注意：我正在使用 jstl 和 jqueryui。

```
<!doctype html>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>

<html lang="en">
<head>
<meta charset="utf-8" />
<title>News</title>
<script

<script>
$(function() {

        var assunto2 = $("#assunto2"), autor2 = $("#autor2"), dtPublicacao2 = $("#dtPublicacao2"), endereco2 = $("#endereco2"), id2 = $("#id2"), imagem2 = $("#imagem2"), texto2 = $("#texto2"), titulo2 = $("#titulo2"), cartola2 = $("#cartola2"), dtValidade2 = $("#dtValidade2"), destaque2 = $("#destaque2"), allFields2 = $(
                []).add(autor2).add(assunto2).add(dtPublicacao2).add(endereco2)
                .add(id2).add(imagem2).add(texto2).add(titulo2).add(cartola2).add(
                        destaque2).add(dtValidade2), tips2 = $(".validateTips");

        function updateTips(t) {
            tips.text(t).addClass("ui-state-highlight");
            setTimeout(function() {
                tips.removeClass("ui-state-highlight", 1500);
            }, 500);
        }

        function checkLength(o, n, min, max) {
            if (o.val().length > max || o.val().length < min) {
                o.addClass("ui-state-error");
                updateTips("O tamanho de " + n + " deve estar entre " + min
                        + " e " + max + ".");
                return false;
            } else {
                return true;
            }
        }

        function checkRegexp(o, regexp, n) {
            if (!(regexp.test(o.val()))) {
                o.addClass("ui-state-error");
                updateTips(n);
                return false;
            } else {
                return true;
            }
        }

        $("#dialog-form-alt")
        .dialog(
                {
                    autoOpen : false,
                    height : 750,
                    width : 400,
                    modal : true,
                    buttons : {
                        "Alterar noticia" : function() {
                            var bValid = true;
                            allFields.removeClass("ui-state-error");

                            //bValid = bValid && checkLength( assunto, "assunto", 1, 2 );
                            //bValid = bValid && checkLength( auntor, "autor", 7, 7 );
                            //bValid = bValid && checkLength( dtPublicacao, "Data Publicacao", 10, 10 );
                            bValid = bValid
                                    && checkLength(endereco2,
                                            "endereco2", 0, 255);
                            //bValid = bValid && checkLength( dtPublicacao, "id", 10, 10 );
                            bValid = bValid
                                    && checkLength(imagem2, "imagem2", 0,
                                            255);
                            bValid = bValid
                                    && checkLength(texto2, "texto2", 10,
                                            1000);
                            bValid = bValid
                                    && checkLength(titulo2, "titulo2", 5,
                                            100);
                            bValid = bValid
                                    && checkLength(cartola2, "cartola2",
                                            0, 255);
                            //bValid = bValid && checkLength(destaque2, "destaque2", 1, 1);
                            //bValid = bValid && checkRegexp( titulo, /^[a-z]([0-9a-z_])+$/i, "Username may consist of a-z, 0-9, underscores, begin with a letter." );
                            // From jquery.validate.js (by joern), contributed by Scott Gonzalez: http://projects.scottsplayground.com/email_address_validation/
                            //bValid = bValid && checkRegexp( email, /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i, "eg. ui@jquery.com" );
                            //bValid = bValid && checkRegexp( password, /^([0-9a-zA-Z])+$/, "Password field only allow : a-z 0-9" );

                            if (bValid) {

//PROBLEM IS HERE!!!                                $(this).attr("action", "/Controller?logica=ManterNoticia&operacao=3"); 

                                $(this).submit();
                                $(this).dialog("close");
                            }

                        },
                        Cancel : function() {
                            $(this).dialog("close");
                        }
                    },
                    close : function() {
                        allFields.val("").removeClass("ui-state-error");
                    }
                });

        $("#create-news").button().click(function() {
            $("#dialog-form").dialog("open");
        });

        $("#update-news").button().click(function() {
            $("#dialog-form-alt").dialog("open");
            var noticias = ${sessionScope.gnots};
            var not = null;
            for(var i=0; i<=noticias.length; i++){
                if(noticias[i].id=($(this).attr("value"))){
                    not = noticias[i];
                    break;
                };
            };
            $("#dialog-form-alt").dialog("open");
            $("#id2").val(not.id);
            $("#titulo2").val(not.titulo);
            $("#cartola2").val(not.cartola);
            $("#assunto2").val(not.assunto);
            $("#endereco2").val(not.endereco);
            $("#imagem2").val(not.imagem);
            $("#destaque2").val(not.destaque);
            $("#dtPublicacao2").val(not.dtPublicacao);
            $("#dtValidade2").val(not.dtValidade);
            $("#texto2").val(not.texto);
            });

    });
</script>
<script>

  $(function() {
    $( "#dtPublicacao2" ).datepicker({});
   });

  $(function() {
        $( "#dtValidade2" ).datepicker({});
  });
</script>
</head>
<body>

    <div id="dialog-form-alt"  title="Alterar noticia">
        <p class="validateTips">Preencher todos os campos.</p>

        <form>
            <fieldset>

                <label for="id2">ID</label> 
                <input type="text" disabled name="id2" id="id2" class="text ui-widget-content ui-corner-all" /> 

                <label for="titulo2">Titulo</label> 
                <input type="text" name="titulo2" id="titulo2" class="text ui-widget-content ui-corner-all" /> 

                <label for="cartola2">Cartola</label> 
                <input type="text" name="cartola2" id="cartola2" class="text ui-widget-content ui-corner-all" />

                <label for="assunto2">Assunto</label> 
                <input type="text" name="assunto2" id="assunto2" class="text ui-widget-content ui-corner-all" />

                <label for="endereco2">Endereco</label> 
                <input type="text" name="endereco2" id="endereco2" class="text ui-widget-content ui-corner-all" />

                <label for="imagem2">Caminho da imagem</label> 
                <input type="text" name="imagem2" id="imagem2" class="text ui-widget-content ui-corner-all" />

                <label for="destaque2">Destaque</label> 
                <input type="checkbox" name="destaque2" id="destaque2" class="text ui-widget-content ui-corner-all" />

                <label for="dtPublicacao2">Data de Publicacao</label> 
                <input name="dtPublicacao2" type="text" name="dtPublicacao2" id="dtPublicacao2" class="text ui-widget-content ui-corner-all"/>

                <label for="dtValidade2">Data de Validade</label> 
                <input name="dtValidade2" type="text" name="dtValidade2" id="dtValidade2" class="text ui-widget-content ui-corner-all"/>

                <label for="texto2">Texto</label> 
                <textarea name="texto2" rows="6" cols="48" id="texto2" class="text ui-widget-content ui-corner-all"></textarea>

            </fieldset>
        </form>
    </div>

    <div id="users-contain" class="ui-widget">
        <h1>News DataBase:</h1>

        <table id="users" class="ui-widget ui-widget-content">
            <thead>
                <tr class="ui-widget-header ">
                    <th>ID</th>
                    <th>Titulo</th>
                    <th>Assunto</th>
                    <th>Destaque</th>
                    <th>Data de Publicacao</th>
                    <th>Data de Validade</th>
                    <th>Autor</th>
                    <th>Acao</th>
                </tr>
            </thead>
            <tbody>
                <c:forEach var="noticia" items="${sessionScope.noticias}">
                    <tr>
                        <td width="15%" align="left">${noticia.id}</td>
                        <td width="40%" align="left">${noticia.titulo}</td>
                        <td width="5%" align="left">${noticia.assunto}</td>
                        <td width="5%" align="left">${noticia.destaque}</td>
                        <td width="10%" align="left"><fmt:formatDate
                                value="${noticia.dtPublicacao}" pattern="dd/MM/yyyy HH:mm" /></td>
                        <td width="10%" align="left"><fmt:formatDate
                                value="${noticia.dtValidade}" pattern="dd/MM/yyyy HH:mm" /></td>
                        <td width="10%" align="left">${noticia.autor.id} -
                            ${noticia.autor.name}</td>
                        <td><button id="update-news" value="${noticia.id}">Alterar</button></td>
                    </tr>
                </c:forEach>
            </tbody>
        </table>
    </div>

    <button id="create-news">Create News</button>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:20:19.023

在 HTML 表单代码中添加这个`<form>`标签

```
<form action="/someurl" method="post"> 
   <input type="submit" id="btnSubmit" value="Submit Form" />
</form> 
```

如果您想在查看错误后提交，请使用 Jquery

```
$('form').submit(function(e){
     e.preventDefault(); // prevent from submitting
    //review form errors then submit
    $(this).submit();

}); 
```

# ruby-on-rails - Rails 应用程序的 Heroku Dyno 要求

> ID：15440416
> 
> 赞同：1
> 
> 时间：2013-03-15T19:15:23.573
> 
> 标签：ruby-on-rails, heroku, hosting

假设我有以下与我的 Rails 应用程序相关的统计数据。（我凭空提取了这些数字）。

```
pL = page load time (ms): 250 #total page load time from start to finish    
U = Users Online: 10
ULT = User Idle Time(s): 5  
R = Req Per Page: 5 #this includes js/css/html/images etc for each page, for sanity lets say caching is off. 
```

假设我的应用程序需要 Heroku 的单个网络测功机是否安全？随着在线用户数量的增加，我该如何计算？

我目前有一个单独的工作人员测功机专门用于后端任务，例如发送电子邮件和其他废话。

我用公式..

```
1000/250 = 4 requests per second 
```

但是您如何将其与每页请求和在线分配的用户联系起来？

# android - 从数据库中删除所有数据时如何重置自动增量int？

> ID：15440419
> 
> 赞同：2
> 
> 时间：2013-03-15T19:15:33.443
> 
> 标签：android, database, sqlite

这是我的数据库

```
db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                 KEY_CATEGORY + " TEXT NOT NULL, " +
                KEY_DATE + " TEXT, " +
                KEY_PRICE + " LONG, " +
                KEY_DETAILS + " TEXT NOT NULL);" 
                ); 
```

这是删除所有数据的方法

```
public void deleteall() {
        // TODO Auto-generated method stub
        ourDatabase.delete(DATABASE_TABLE, null, null);

    } 
```

这是删除特定数据的方法

```
public void deletentry(long l) {
        // TODO Auto-generated method stub
        ourDatabase.delete(DATABASE_TABLE, KEY_ROWID + " = " + l,null);

    } 
```

在这里使用我删除的数据，但增加的行 ID 仍然存在，我想将其重置为 1，因为如果我删除特定数据，行 ID 也会按顺序更改它的值，因此数据也被删除，应该没有间隙行 ID 之间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:31:37.673

我不认为这`autoincrement`是你最好的选择。如果您的目标是创建一个没有间隙的简单编号表，则使用带有列的表来处理此问题可能会容易得多，以便您手动跟上您的 ID。

如果您创建了这样的表，则可以在代码中为以下操作编写辅助方法：addColumn、removeColumn、emptyTable。

您的`addColumn`方法将查询表并确定`max(ID)`然后加 1 并将该数字用于下一个条目。

您的`removeColumn`方法可以按 ID 删除条目，然后使用该 ID 对其上方的所有内容重新排序。或者，如果顺序不重要，它可能会占用最后一行并重新识别以填补空白。

您的`emptyTable`方法可以删除所有条目。

**更新** 也许这可以让你开始。这些方法需要在您的程序中定义。您必须将代码放入其中，然后将它们设置为被调用。

例如：

```
public void addColumn(String category, long date, String details) {
    //code here would need to determine the max of ID and add one
    //to it. the sql below would retrieve max, i dont know the sql lite code
    //off the top of my head.
    //SELECT MAX(ID) FROM DATABASE_TABLE;
    int newID = max + 1;
    //add row to the database using newID
}

public void removeColumn(int id) {
    //remove column from database
    //DELETE FROM DATABASE_TABLE WHERE ID = id;
    //change last entry to use id
    //UPDATE DATABASE_TABLE SET ID = id WHERE id = (SELECT MAX(ID) FROM DATABASE_TABLE);
}

public void emptyTable() {
    //DELETE FROM DATABASE_TABLE;
} 
```

要调用这些方法，您可以像类中的任何其他 java 方法一样调用它们：

```
addColumn(12, 'text', (long)100, 'text');
removeColumn(10);
emptyTable(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-08T06:40:58.753

SQLite 在特殊的 SQLITE_SEQUENCE 表中保留最大的 ROWID。您可以将该表删除为：

```
db.delete("SQLITE_SEQUENCE","NAME = ?",new String[]{TABLE_NAME}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T19:24:37.357

不幸的是，SQLite`AUTOINCREMENT`不能保证按你的意愿工作。引用[文档](http://www.sqlite.org/autoinc.html)：

> 如果插入时没有指定 ROWID，或者指定的 ROWID 的值为 NULL，则会自动创建适当的 ROWID。通常的算法是给新创建的行一个比插入前表中最大的 ROWID 大一的 ROWID。如果表最初为空，则使用 1 的 ROWID。如果最大的 ROWID 等于最大可能的整数 (9223372036854775807)，则数据库引擎开始随机挑选正候选 ROWID，直到找到以前未使用的 ROWID。如果在合理的尝试次数后找不到未使用的 ROWID，则插入操作将失败并出现 SQLITE_FULL 错误。如果没有显式插入负 ROWID 值，则自动生成的 ROWID 值将始终大于零。

如果您需要您描述的这种特定行为，唯一的解决方案是您手动控制`KEY_ROWID`您的表，确保您正确考虑插入和删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-09T08:16:56.583

您还可以从`SQLite_Sequence`使用中删除您的表

```
sqlDb.execSQL("DELETE FROM SQLITE_SEQUENCE WHERE NAME = 'YOUR_TABLE_NAME'"); 
```

# ios - 如何让自定义类从多个超类继承？

> ID：15440428
> 
> 赞同：9
> 
> 时间：2013-03-15T19:16:01.030
> 
> 标签：ios, inheritance, uiviewcontroller

我有一个 iPhone 应用程序，其中**A**类是**UIViewController**的子类：

![在此处输入图像描述](../Images/f7734653ff975454481889cd3bcafc29.png)

现在我正在创建一个新应用程序，我想在其中重新使用**A**，但是让它从**B**子类化，这很好，因为**B**从**UIViewController**子类化：

![在此处输入图像描述](../Images/451878435849a5b34f69fb298a696b00.png)

但现在我有另一个类**C**，它是**GLKViewController**的子类：

![在此处输入图像描述](../Images/684d8a7d1368639de21b7ea5ed21a2b7.png)

当我尝试制作第三个重新使用**B**而没有任何更改的应用程序时，问题就来了。由于**B**从**UIViewController**继承，我需要以某种方式告诉**C**它应该从**B** *和* **GLKViewController**继承，我认为这是多重继承的情况：

![在此处输入图像描述](../Images/cd0bf12699670af01d7b7beafdcf7290.png)

从我正在阅读的内容来看，处理此问题的最佳方法是使用*composition*，但我不明白如何最好地将其应用于我的情况。

作为一个替代解决方案，我意识到我可以创建一个*包装器*类**D**，然后我可以逐个应用程序对其进行修改，以便从适当的超类中为手头的任务进行子类化：

![在此处输入图像描述](../Images/7a34ceea94e4c51371f318f45895257e.png)

![在此处输入图像描述](../Images/8e449e4bab5d5ecbc23b9c8c6f5d7cd5.png)

但这似乎有点骇人听闻。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T22:15:39.417

Objective C 只支持单继承。在这种情况下，您可能希望将协议用于常见功能。您可以使用辅助对象来实现协议方法。在这种情况下，您不关心您的对象是否是特定类的成员，而是它是否实现了一组特定的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T19:23:27.897

你不能在 Objective-C 中做到这一点是单继承——就像 java 或大多数其他现代语言一样。

使用组合或委托的范式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T20:59:32.153

您可能会通过使用类别来涵盖这一点。它当然与多重继承不同，但有时可以完成这项工作。

让我为一个类别起草一个示例，看看它是否符合您的目标。

标题：`UIViewController+MyAwesomeExtension.h`

```
@interface UIViewController (MyAwesomeExtension)
- (void)doSomething;
@end 
```

执行：`UIViewController+MyAwesomeExtension.m`

```
@implementation UIViewController (MyAwesomeExtension)
- (void)doSomething
{
    NSLog(@"doing something totally awesome");
}
@end 
```

现在您正在您的`UIViewController`子类之一中使用它，其中还包括`GLKViewController`...

执行：

```
#import "UIViewController+MyAwesomeExtension.h"
...
[self.viewControllerDerivedClass doSomething];
... 
```

请注意，此类类别确实有其局限性。要了解更多信息，如何进一步研究该主题。

* * *

总的来说，我认为“最”正确的答案是使用协议尽可能接近多重继承，正如 Mike C. 在他的答案中起草的那样。我的回答主要是针对简单情况的解决方法。

# ruby - 挽救 EventMachine::Deferrable 中的错误

> ID：15440432
> 
> 赞同：1
> 
> 时间：2013-03-15T19:16:18.407
> 
> 标签：ruby, eventmachine

我试图弄清楚如何使`EventMachine::Deferrable`回调不引发任何异常。我不是`begin ... rescue`在每个回调块中都有，而是试图用方法调用以某种方式包装块，以便该方法挽救异常：

```
require 'eventmachine'

def to_proc
  proc
rescue Exception => e
  puts "e=#{e}"
end

EventMachine::run {
  d = EventMachine::DefaultDeferrable.new
  f =  to_proc {raise 'error'}

  d.callback &f

  EventMachine.next_tick {d.succeed}
} 
```

这当然行不通。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:32:01.070

在语句中`d.callback &f`，调用了 to_proc。无法捕获您试图捕获的异常`d.succeed`，因为我们已经超出了您的异常处理的上下文。

我实际上不确定您要捕获什么错误。如果您让 EventMachine 做的事情出错，您可以创建一个`#errBack`来捕获它们。如果您真的想捕获仅在回调中发生的异常，那么您可能应该只在回调中编写异常处理程序（针对您期望的特定异常！）。

但是，如果您真的想捕获所有 proc 中的所有错误，则需要覆盖 Proc 类中的调用：

```
# Note this code hasn't been tested and is only provided as an example
class Proc
  alias_method :old_call, :call
  def call(*args)
    begin
      old_call(*args)
    rescue Exception => e
      # Handle exception
    end
  end
end 
```

但是我不推荐这种方法

# javascript - javascript Date().valueOf() 正在开发 PC 上工作，但不在服务器提供的页面上

> ID：15440433
> 
> 赞同：1
> 
> 时间：2013-03-15T19:16:21.480
> 
> 标签：javascript, date, value-of

当我从服务器启动页面时单步执行代码时，IE9 调试器（F12 开发人员工具 -> 脚本调试器）会在 Locals 窗口中显示以下内容：

```
 midnight  Fri Mar 15 00:00:00 EDT 2013      Object, (Date) 
 myDate    Fri Mar 15 00:00:00 EDT 2013      Object, (Date) 
```

然而，以下对值相等的条件测试解析为`false`：

```
 if (midnight.valueOf() === myDate.valueOf() ) {
    // these lines of code are never reached
     .
     .
     .
 } 
```

奇怪的是， === 测试`true`在我的开发 PC 上解析。我无法弄清楚为什么它会`false`在服务器提供的页面上解析。调试器清楚地表明它应该解析为真。

该文档处于“IE9 标准”模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:23:11.877

valueOf 方法以数字数据类型返回 Date 对象的原始值，即自 UTC 1970 年 1 月 1 日午夜以来的毫秒数。

调试器仅向您显示秒数，因此变量实际上可能不同。

# winforms - 使用就地编辑器设置 XtraGrid 的问题（使用 GridLookUpEdit）

> ID：15440436
> 
> 赞同：0
> 
> 时间：2013-03-15T19:16:49.460
> 
> 标签：winforms, linq-to-entities, devexpress, xtragrid, inplace-editing

我需要一个具有 GridLookupEdit 的 XtraGrid 控件来输入列值。

到目前为止我设法做的事情：

1) 我已经配置了 XtraGrid 控件

```
columns: ID, Name, Number
in-place GridLookUp Editors for Name and Number columns 
```

2) 在表单加载事件中，我从数据库加载数据并设置 XtraGrid 数据源和 repositoryItem(..) 数据源、valuemember 和 displaymember

a) 数据加载到 XtraGrid 中，我可以激活单元格但不能从下拉列表中选择值（从 repositoryItem(..)）或手动输入值（我可以激活“*”新行中的单元格但它有同样的问题 - 可以不要从下拉列表中选择或手动输入值）=> 为什么？

b）如果我没有为 XtraGrid 设置数据源，那么两个下拉菜单都是活动的，我可以使用 GridLookupEdit 选择值，但是当我退出单元格时，单元格会被清除 => 我相信这是因为在这种情况下没有 xtraGrid.DataSource设置？

```
 var model = (from TableA a in _dbE.TableA select new {ID, Name, Number}).ToList();

        //if i comment this line out, then i can choose values from GridLookUpEdit
        gridControl1.DataSource = model; 

        repositoryItemNosaukums.DataSource = model;
        repositoryItemNosaukums.ValueMember = "ID";
        repositoryItemNosaukums.DisplayMember = "Name";

        repositoryItemPieteikumaNr.DataSource = model;
        repositoryItemPieteikumaNr.ValueMember = "ID";
        repositoryItemPieteikumaNr.DisplayMember = "Number"; 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:49:49.537

问题是，我的数据源“模型”是一个列表，但它应该是具有属性 AllowNew==True 和 AllowEdit==True 的 BindingList。

在 DevExpress 支持询问数据源是否为只读后，我发现这篇文章终于让我大开眼界：

[DataGridView 中的一个问题：datagridview 对用户来说似乎是只读的（WinForms）](https://stackoverflow.com/questions/5528611/a-problem-in-datagridview-datagridview-seems-readonly-to-user-winforms)

### 正确版本的代码

```
 //no projections (select new ...) for IBindingList<T>..
       //var model = (from TableA a in _dbE.TableA select new {ID, Name, Number}).ToList();
    var model = (from TableA a in _dbE.TableA).ToList(); 

    //convert to BindingList
    var bindingModel= new BindingList<TableA>(model);
    bindingModel.AllowNew=true;
    bindingModel.AllowEdit=true;

    //bind BindingList to datagrid
    gridControl1.DataSource = bindingModel; //model; 

    //... no changes to repositoryItem(..) stuff
    repositoryItemNosaukums.DataSource = model;
    repositoryItemNosaukums.ValueMember = "ID";
    repositoryItemNosaukums.DisplayMember = "Name";

    repositoryItemPieteikumaNr.DataSource = model;
    repositoryItemPieteikumaNr.ValueMember = "ID";
    repositoryItemPieteikumaNr.DisplayMember = "Number"; 
```

# python - 如何创建一个 for 循环来初始化我的类的对象，而不是一一进行

> ID：15440440
> 
> 赞同：1
> 
> 时间：2013-03-15T19:17:16.747
> 
> 标签：python, loops, for-loop, pygame

```
def main():
    screen = pygame.display.set_mode((675, 480))
    pygame.display.set_caption("Space Invaders")

    background = pygame.Surface(screen.get_size())
    background.fill((0, 0, 0))

    allSprites = pygame.sprite.Group()

    for j in range(0, 5):
        for i in range(0, 10):
            invader1 = Invader1(screen, (0, 0))
            invader1.x += 75
            invader1.add(allSprites)
        invader1.y += 75 
```

我正在尝试为一个项目创建一个太空侵略者游戏，但我在 for 循环方面遇到了一些麻烦，我想创建 10 个敌人的实例而不必输入每个实例，我知道 for 循环就是答案，我只是不确定如何初始化它。我想从 (0, 0) 开始第一个敌人并在 x 轴上将每个敌人移动 75 个空格，在创建 10 个敌人后在 y 轴上向下移动 75 个空格并重复该过程。有谁知道我将如何实现这一目标？提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T19:20:09.477

使用带`step`参数的范围。

```
In [4]: range(0, 75 * 5, 75)
Out[4]: [0, 75, 150, 225, 300] 
```

```
allSprites = pygame.sprite.Group()
for y in range(0, 75 * 5, 75):
    for x in range(0, 75 * 10, 75):
        Invader1(screen, (x, y)).add(allSprites) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:34:14.843

如果您使用嵌套列表推导，您可以在一行中得到 Pavel 的全部答案

```
invaders =  [ Invader1(screen, (x, y)) for x in range(0, 750, 75) for y in range(0, 325, 75) ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T01:18:02.700

将您的代码更改为如下所示：

```
def main():
screen = pygame.display.set_mode((675, 480))
pygame.display.set_caption("Space Invaders")

background = pygame.Surface(screen.get_size())
background.fill((0, 0, 0))

allSprites = pygame.sprite.Group()

for j in range(0, 5):
    for i in range(0, 10):
        invader1 = Invader1(screen, (75*i,75*j ))
        invader1.add(allSprites) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T11:50:18.383

```
invader_list = []
for y in range(n):
    for x in range(10):
        invader_list.append(Invader(x * w, y * h)) 
```

1）创建一个列表来存储对象

2）做一个for循环迭代n次（行数）

3）做一个嵌套的for循环迭代10次（列数）

4) 在两个 for 循环中，使用 x*w 和 y*h 制作 Invader 对象

# java - 数据库将 null 返回到布尔变量

> ID：15440453
> 
> 赞同：2
> 
> 时间：2013-03-15T19:18:00.293
> 
> 标签：java, nullpointerexception

所以我有这个方法：

```
class A(){

private Boolean Flag;

public java.lang.Boolean getFlag()
    {
        return this.Flag;
    }

public java.lang.Boolean setFlag(Boolean Flag)
    {
        this.Flag = Flag ;
    }
}

classB(){

boolean navalFlag = fancyObj.getFlag()
form.setNavalFlag(navalFlag?"Y":"N";

} 
```

数据库返回 null 并`Flag`设置为 null。

什么是我可以**100% 避免**NPE 的万无一失的方法？我知道铸造不是从[这里](https://stackoverflow.com/questions/11185321/when-should-null-values-of-boolean-be-used)`Boolean`看到的保证`boolean`

更新：单步执行代码，NPE 被抛出`fancyObj.getFlag()`......这对我来说没有意义。我希望NPE投入`.setNavalFlag....`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:19:26.120

> 什么是我可以 100% 避免 NPE 的万无一失的方法？

一种万无一失的方法是明确检查`null`并且不尝试拆箱，`Boolean`除非您知道它不是`null`.

以您当前的代码为例：

```
boolean navalFlag = fancyObj.getFlag() 
```

这试图拆箱布尔值。如果是`null`，您将获得 NPE。

下面的修改不会有这个问题：

```
Boolean navalFlag = fancyObj.getFlag()
form.setNavalFlag((navalFlag != null && navalFlag) ? "Y" : "N"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:21:35.887

```
Boolean navalFlag = fancyObj.getFlag()
form.setNavalFlag((navalflag != null && navalFlag) ? "Y" : "N"); 
```

**编辑的编辑，因为我错误地理解了你的评论：**

请参阅我对评论的回答：`boolean navalFlag = fancyObj.getFlag()`自动翻译为`boolean navalFlag = fancyObj.getFlag().booleanValue()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:35:31.023

改变你的方法

```
public java.lang.Boolean getFlag()
{
    return this.Flag;
} 
```

类似于

```
public java.lang.Boolean getFlag()
{
    (Flag==null) ? Boolean.FALSE : Flag;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T08:16:57.327

在值对象中使用布尔原始类型，而不是包装器。

如果您自己从数据库中检索值，则必须小心，您必须了解如何解释 null，通常它是 false。

# c# - 此枚举器绑定的列表已被修改。仅当列表未更改时才能使用枚举器

> ID：15440454
> 
> 赞同：-1
> 
> 时间：2013-03-15T19:18:00.523
> 
> 标签：c#, winforms, checkedlistbox

我创建了下面的代码，从来没有给我任何错误：

```
foreach (var item in clb_frente_campos.CheckedItems)
{
    if (item == "numero_carteira")
    {            
        clb_frente_impressao.Items.Add(item);
        break;
    }
    else
    {
        if (!clb_frente_impressao.Items.Contains(item))
        {
            clb_frente_impressao.Items.Add(item);
            break;
        }
    }
} 
```

此代码是一个按钮，用于将`checked`值从一个传递`CheckedListBox`到另一个。
请注意，虽然该项目`numero_carteira`是`checked`它会一遍又一遍地添加到我的另一个`CheckedListBox`。因为该项目`numero_carteira`是唯一可以多次添加的项目。但我希望他**只**在它是时添加`selected`，这就是我制作这个新代码的原因：

```
foreach (var item in clb_frente_campos.CheckedItems)
{
    if (item == "numero_carteira")
    {
        if (clb_frente_campos.SelectedItem.ToString() == "numero_carteira")
        {
            clb_frente_impressao.Items.Add(item);
            break;
        }
    }
    else
    {
        if (!clb_frente_impressao.Items.Contains(item))
        {
            clb_frente_impressao.Items.Add(item);
            break;
        }
    }
} 
```

而这个新代码就是`error`标题中给我的东西。
**也是我见过的最奇怪的事情**。当我`breakpoints`逐步使用和调试它时......它**工作**如何？为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:57:19.003

如果它在您使用调试器时有效，则几乎可以肯定您遇到了线程问题。没有看到你的其余代码就很难调试，但我的直觉是寻找你可能循环的其他地方`clb_frente_impressao.Items`。

# sql-server-2012 - SSIS 表达式任务看不到由包含 foreach 循环填充的变量

> ID：15440455
> 
> 赞同：2
> 
> 时间：2013-03-15T19:18:08.027
> 
> 标签：sql-server-2012, ssis-2012

我正在尝试从目录中收集文件路径列表，将它们连接在一起，然后将该值发送到执行过程任务。为此，我使用了一个 ForEach 循环，其中包含一个表达式任务，该任务应该将循环每次迭代的路径填充到一个变量中。问题是当表达式任务运行时，它会抛出以下错误。

```
Error: The type of the value (Empty) being assigned to variable "User::CombinedPath"
differs from the current variable type (String). Variables may not change type
during execution. Variable types are strict, except for variables of type Object. 
```

表达任务基本上是这样的：

```
@[User::PathFromForEach] + ";" 
```

但是，@[User::PathFromForEach] 似乎是空的。

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:44:30.357

我猜你已经将 Expression 任务的 ExecValueVariable 属性设置为变量@[User::CombinedPath]。好吧，这不是正确的地方。您需要将 changeExecValueVariable 恢复为 None，并将表达式写为：

```
@[User::CombinedPath]=@[User::PathFromForEach] + ";" 
```

就是这样，我们只需要使用 Expression 属性，没有别的。“ **Expression** ”属性是变量实际赋值的地方。我想将属性称为“Assignment”而不是“Expression”会更好。

# python - Python CGI Ajax 调用导致内部服务器错误

> ID：15440461
> 
> 赞同：1
> 
> 时间：2013-03-15T19:18:31.610
> 
> 标签：python, ajax, cgi

我正在尝试踏入 Web 开发世界，但我在理解为什么我的基本 hello world 脚本失败时遇到了一些麻烦。我对 python cgi 脚本进行了简单的 AJAX 调用，该脚本返回了一小部分 HTML，但是调用失败并且我收到“内部服务器错误”作为错误消息。这是我的代码：

Python脚本：

```
#!/usr/local/bin/python

print "Content-Type: text/html\n"
print """\
<html>
<body>
<h2>Hello World!</h2>
</body>
</html>
""" 
```

AJAX 调用：

```
$(function(){
            $('#clickme').click(function(){
                $.ajax({
                    url: "cgi-bin/ajaxpost.cgi",
                    dataType: "html",
                    type: "POST",
                    success: function(response){
                        alert(response);
                    },
                    error: function(XMLHttpRequest, textStatus, errorThrown) {
                        alert(errorThrown);
                    }
                });
            });
        }); 
```

这是我的服务器错误日志所说的：

```
CGI ERROR: A system problem prevented your request from being completed., referer: [my test page]
Premature end of script headers: ajaxpost.cgi, referer: [my test page] 
```

我仔细检查了我的服务器，“#!/usr/local/bin/python”是 python 的正确路径。此外，他们说他们没有指定的 cgi-bin 文件夹，任何 cgi 都可以从任何文件夹运行，只要它具有 .cgi 扩展名。编辑：另外，我允许在服务器上执行 .cgi。

我会继续承认我可能需要一个“像我五岁一样解释它”的答案。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:48:33.600

第一行末尾有一个斜杠字符。在三引号内，这是一个字面斜线。去掉它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:00:44.340

你需要两个 \n 在末尾

打印“内容类型：文本/html\n”

而不仅仅是一个。

尝试：打印“内容类型：文本/html\n\n”

见[https://httpd.apache.org/docs/2.2/howto/cgi.html#writing](https://httpd.apache.org/docs/2.2/howto/cgi.html#writing)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T20:48:06.237

我只是通过在 WinSCP 中删除服务器上的 .cgi 文件并重新上传它而不是在更新之间覆盖它来让它工作。除此之外，我确保它以文本而不是二进制文件的形式上传。我怀疑这可能是问题所在，因为它可能保留了 Windows 文本文件格式。一个菜鸟的错误，我敢肯定。谢谢您的帮助。

# microsoft-metro - 来自 VS2012 Javascript 模板的空白和网格应用程序未通过 WACK 性能测试

> ID：15440466
> 
> 赞同：1
> 
> 时间：2013-03-15T19:18:49.613
> 
> 标签：microsoft-metro, windows-runtime, windows-store-apps, winjs, app-certification-kit

我已经尝试在 3 台不同的机器（带有 i5 进程、4-8 GB RAM、SSD/旋转磁盘）上为这些应用程序中的每一个运行 WACK 2.2。在它们中的每一个上，这些应用程序都失败了，应用程序启动时间在 5 到 11 秒之间变化。

例如，在机器 1 上，应用启动性能测试失败并显示以下信息：

```
Error Found: The performance launch test collected the following results:.?App Launch Time: 11.195 Seconds. Launch times more than 5.0 Seconds will fail on low end systems
?
?Information only:
?- CPU Utilization: 0.74%
?- File I/O: 0.151 MB
?- Process Private Memory: 0 MB 
```

我没有发现任何特别可疑的地方。当我检查 JS 控制台中的 window.performance.timing 值时（在通过 VS2012 的不同运行中），我注意到应用程序从 navigationStart 到 loadEventEnd 的时间不超过 300 毫秒。

我曾尝试使用 Windows 性能分析器（第一次使用它）分析 App_LaunchData.etl。我注意到 jscript9.dll 在应用程序启动后 11 秒后加载。因此，主机直到那时才将控制权交给用户代码。我没有发现任何高 CPU 或 I/O。

我尝试在其他 2 台 WIN8 机器上重复 WACK 测试以查看类似的启动时间。[我已经在http://sdrv.ms/16xNvio](http://sdrv.ms/16xNvio)上传了应用程序包、验证报告和 App_LaunchData.etl 文件。

可能出了什么问题，有什么出路？

我们开发的一个应用程序在 WACK 测试中被阻止。非常感谢您对解决此问题的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:06:32.923

我找到了解决方案。将目标平台更改为**x86**（从默认的“任何 CPU”）使应用程序启动得非常快。Blank/Grid 应用程序以及我们的应用程序以绿色通过了 WACK。

我还不知道 x64 上的应用程序启动缓慢的原因。

# opengl - 奇怪的 sdl opengl 链接器

> ID：15440470
> 
> 赞同：0
> 
> 时间：2013-03-15T19:19:01.923
> 
> 标签：opengl, linker, compiler-errors, sdl

继承人的错误之一：

```
unresolved external symbol _SDL_SetVideoMode referenced in function _SDL_main 
```

这是被链接的：

```
sdl.lib
sdlmain.lib
glu32.lib
opengl32.lib 
```

我打电话给`sdl`和`sdl_opengl`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T05:54:09.863

有时链接时顺序确实很重要。先链接到 sdlmain，然后再链接到 sdl，看看是否可行。

# javascript - 如何在 Processing.js 的 update() 中侦听键盘输入

> ID：15440472
> 
> 赞同：0
> 
> 时间：2013-03-15T19:19:23.020
> 
> 标签：javascript, keyboard, user-input, processing, processing.js

我一直在做一个 processing.js 演示，其中物体围绕一个中心点运行。我正在尝试为输入添加一个侦听器，该侦听器检查是否`s`每次更新都按下了键，如果是，则调用一种方法以将每个物体的轨道大小减小指定的因子。

该示例在[jsfiddle](http://jsfiddle.net/QKLLr/53/)上。

基本上我已经在 update() 方法中放置了代码来监听按键：

```
 void update()
    {
        //detect input
        if(keyPressed)
        {
            debugger; //debug

            if(key == 's' || key == 'S')
            {
                //shrink orbit
                ShrinkOrbit(planets,.9);
            }

        }    
    } 
```

调用`ShrinkOrbit(ArrayList <OrbitingBody> orbs, float reductionFactor)`方法：

```
/*
* Reduces size of orbit for specified group of orbiting bodies
*/
void ShrinkOrbit(ArrayList<OrbitalBody> orbs, float reductionFactor)
{   
    for(OrbitalBody b:orbs)
    {
        b.x *= reductionFactor;
        b.y *= reductionFactor
    }
} 
```

但是，目前不仅调试断点没有触发，而且我看到 chrome 开发人员工具中出现了一些错误：

```
Uncaught SyntaxError: Unexpected reserved word 
Uncaught TypeError: Cannot read property 'reason' of null Actions.js:333
(anonymous function) Actions.js:333
(anonymous function) moo-clientcide-1.3.js:212
Array.implement.each moo-clientcide-1.3.js:329
(anonymous function) moo-clientcide-1.3.js:212
Class.JSLintValidate Actions.js:330
wrapper.extend.$owner moo-clientcide-1.3.js:3798
Class.jsLint Actions.js:277
wrapper.extend.$owner moo-clientcide-1.3.js:3798
(anonymous function) moo-clientcide-1.3.js:1027
defn 
```

假设这`update()`是一个全局方法，`setup`在任何草图中都可以调用等效的方法，我错了吗？我已经看到它在另一个功能正常的 jsFiddle 中如此使用，这是我得出结论的地方。如果有任何帮助，我的目标是 Processing.js 1.4.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T02:19:34.210

不要那样做。1）update确实不是全局函数，你得到的只有Processing API函数，两个主要的调用是setup()，开始时调用一次，draw()，每帧调用一次（除非你发出noLoop ()，然后它仅在您手动调用 redraw() 时运行），并且 2）使用事件处理程序，这就是它们的用途 =）

```
boolean reduce = false;

void keyPressed() {
  if(str(key).equals("s")) reduce = true;
}

void keyReleased() {
  if(str(key).equals("s")) reduce = false;
}

void draw() {
  if(reduce) { doWhateverYouNeedToDo(); }
  drawStuff();
} 
```

# visual-studio-2010 - OpenGL和VS2010未解决的外部

> ID：15440476
> 
> 赞同：1
> 
> 时间：2013-03-15T19:19:32.270
> 
> 标签：visual-studio-2010, opengl, windows-7, glut, unresolved-external

我想使用 GLUT 来简化我的代码和工作。

我正在使用 Windows 7（64 位）和 Visual Studio 2010。我做了[本教程](http://logs.tobinelectronics.com/installing-glut-in-windows-visual-studio-2010/)中的所有操作，但仍然无法编译我的代码...我收到以下错误：

```
Error 2 error LNK1120: 1 unresolved externals <path>
Error   1   error LNK2019: unresolved external symbol _WinMain@16 referenced in function ___tmainCRTStartuL 
```

我使用的代码：

```
#include <GL/glew.h> 
#include <GL/glut.h> 

void display (void) {  
   glClearColor(1.0f, 0.0f, 0.0f, 1.0f);  
   glClear(GL_COLOR_BUFFER_BIT); 
   glLoadIdentity(); 

   glFlush(); 
}  

int main (int argc, char **argv) {  
   glutInit(&argc, argv); 
   glutInitDisplayMode (GLUT_SINGLE); 
   glutInitWindowSize (500, 500); 
   glutInitWindowPosition (100, 100); 
   glutCreateWindow ("Your first OpenGL Window");  

   glutDisplayFunc(display); /

   glutMainLoop(); 
} 
```

有人知道问题出在哪里以及如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:31:47.593

似乎您创建的**Windows**应用程序而不是*控制台*应用程序。有关如何更改/选择 Windows 子系统的信息，请参见下图

![在此处输入图像描述](../Images/c733452315c4f911f3c4315554ca38b0.png)

# javascript - 我需要计算申请日期和事件日期之间的天数

> ID：15440477
> 
> 赞同：0
> 
> 时间：2013-03-15T19:19:39.883
> 
> 标签：javascript, date

我们正在设计在线许可申请

我需要计算活动日期和申请日期之间的天数活动日期是 9 月 16 日和 12 月 31 日。

用于计算天数的 Java 脚本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:31:20.400

另一种方法是比较日期，直到它们相同。可能要慢很多，所以不要使用它，除非你想用额外的细节来扩展比较。

小提琴：http: [//jsfiddle.net/rudiedirkx/Szvfd/](http://jsfiddle.net/rudiedirkx/Szvfd/)

```
Date.prototype.getYMD = function() {
    return this.getFullYear() + '-' + (this.getMonth()+1) + '-' + this.getDate();
};

Date.prototype.getDaysDiff = function(d2) {
    var d1 = this,
        delta = d1 < d2 ? +1 : -1;

    var days = 0;
    while (d1.getYMD() != d2.getYMD()) {
        days++;
        d1.setDate(d1.getDate() + delta);
    }
    return delta * days;
}

d1 = new Date('October 16 2012');
d2 = new Date('November 7 2012');

console.log(d1.getDaysDiff(d2)); // 22
console.log(d2.getDaysDiff(d1)); // -22 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:00:16.743

通过使用 Javascript 日期对象，您可以使用以下函数：

```
var firstDate = new Date("October 16, 1975 11:13:00");
var secondDate = new Date("October 14, 1975 11:13:00");

function dateDifference(start, end)
{
    return Math.round((start-end)/(1000*60*60*24));
}

alert(dateDifference(firstDate.getTime(), secondDate.getTime())); 
```

# xaml - 将 Metro Studio 2 Vector XAML 与 MahApps MetroCircleButton 相结合

> ID：15440478
> 
> 赞同：1
> 
> 时间：2013-03-15T19:19:41.693
> 
> 标签：xaml, button, microsoft-metro, geometry

我目前正在开发一个使用[MahApps](http://mahapps.com/MahApps.Metro/)作为 WPF 扩展来创建 Win8 Metro 风格的应用程序。

MahApps 具有用于按钮的 MetroCircleButton 样式，但是关于如何在按钮中显示自己的矢量图形的文档有点短。我正在使用[Metro Studio 2](http://www.syncfusion.com/downloads/metrostudio)为我的应用程序设计按钮图标，它以以下形式向我输出 XAML 资源代码：

```
<Viewbox x:Key="xx">
    <Grid Width="48" Height="48" Visibility="Visible">
        <Grid Visibility="Visible">
            <Rectangle Fill="#FF000000" Visibility="Visible" />
            <Ellipse Fill="#FF000000" Visibility="Collapsed" />
            <Path Data="..." Stretch="Fill" Fill="#FF000000" Visibility="Collapsed" />
        </Grid>
        <Path Data=".." Stretch="Uniform" Fill="#FFFFFFFF" Width="26" Height="26" Margin="0,0,0,0" />
    </Grid>
</Viewbox> 
```

到目前为止，一切都很好。然而 MahApps 建议使用 VisualBrush 来显示自己的矢量图形：

```
<Rectangle Fill="Black">
<Rectangle.OpacityMask>
    <VisualBrush Visual="{StaticResource appbar_add}" Stretch="Fill" />
</Rectangle.OpacityMask> 
```

我查看了他们的 repo 以查看他们使用的格式，它有点不同：

```
<Canvas Width="48.0067" Height="48.0067" Clip="F1 M 0,0L 48.0067,0L 48.0067,48.0067L 0,48.0067L 0,0" x:Key="appbar_alien">
    <Path Width="22.005" Height="16.0048" Canvas.Left="12.9999" Canvas.Top="16.9998" Stretch="Fill" Fill="{DynamicResource BlackBrush}" Data="..." />
</Canvas> 
```

现在我的问题是：我能否以某种方式使用 Metro Studio 给我的格式让我的图标显示在按钮中，保持 circlebutton 的鼠标悬停动画，而无需手动将所有按钮转换为正确的格式（并且可能丢失数据） ?

问候， 赛瑟

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:00:32.007

其实很简单。只需在 MetroStudio 中删除符号周围的圆圈，然后将 StaticResource 设置为按钮的“内容”。完毕 ：）

问候， 赛瑟

# javascript - 在 Google Map 上创建 1000 个标记构成 API 调用

> ID：15440479
> 
> 赞同：0
> 
> 时间：2013-03-15T19:19:49.257
> 
> 标签：javascript, google-maps, google-maps-api-3

我想知道，如果给我 1000 个 (x,y) 坐标，其中每对 (x,y) 代表一个客户地址

如果我必须在地图顶部加载 1000 个地址作为其坐标（纬度、经度）的标记，则通过方法 createMarker(x,y,message) 设置的每个标记将构成对 api 调用。

我主要关心的是：如果给出 30000 个地址并且我尝试为每个地址删除 pin，我会在单个地图加载时触摸 API。

请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:51:28.050

不，每个标记都不算作 API 调用。您可以加载任意数量的标记，重要的是 API 脚本的加载。地理编码器等服务具有配额和速率限制，但不计入您的 API 配额（[在此处描述](https://developers.google.com/maps/documentation/javascript/usage)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:24:13.420

That can be done using KML's (which is a xml).single call will load all the markers.

go through this link [https://developers.google.com/kml/documentation/mapsSupport](https://developers.google.com/kml/documentation/mapsSupport)

# ruby-on-rails - form_for 实例变量错误的参数数量

> ID：15440480
> 
> 赞同：0
> 
> 时间：2013-03-15T19:19:50.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我的 form_for 没有作为表单传递。我通常可以解决问题，但这一个我无法弄清楚为什么 2 个参数是从`@image`. 这是我的代码

**错误**

```
wrong number of arguments (2 for 1) 
```

**看法**

```
<% form_for @image, :action => "edit" do |f| %>
    <%= f.text_field :title %>
    <%= f.submit "Update" %>
<% end %> 
```

**控制器**

```
class Admin::ImagesController < ApplicationController
    respond_to :html, :json
    def index
        @album = Album.find(params[:album_id])
        @images = Image.all
    end
    def new
        @album = Album.find(params[:album_id])
        @image = @album.images.new(params[:image_id])
    end
    def create
        @album = Album.find(params[:album_id])
        @image = @album.images.new(params[:image])
        if @image.save
            flash[:notice] = "Successfully added image!"
            redirect_to [:admin, @album, :images]
        else
            render :action => 'new'
        end
    end
    def show
        @album = Album.find(params[:album_id])
        @image = @album.images(params[:id])
    end
    def edit
        @album = Album.find(params[:album_id])
        @image = @album.images(params[:id])
    end
    def update
        @album = Album.find(params[:album_id])
        @image = @album.images(params[:id])
        if @image.update_attributes(params[:image])
            flash[:notice] = "Successfully updated Image"
            redirect_to @image
        else
            render :action => "edit"
        end
    end
    def destroy
        @album = Album.find(params[:album_id])
        @image = Image.find(params[:id])
        @image.destroy
        redirect_to admin_album_images_path(@album)
    end

end 
```

**路线**

```
Admin::Application.routes.draw do
  get "albums/index"

  get "dashboard/index"

  namespace :admin do
    root :to => "dashboard#index"
    resources :dashboard
    resources :albums do
      resources :images
     end
    get "admin/album"
    end
    get "logout" => "sessions#destroy", :as => "logout"
  get "login" => "sessions#new", :as => "login"
  get "signup" => "users#new", :as => "signup"
    # resources :users
  resources :basic
    root :to => "basic#index" 
```

**模型**

```
class Image < ActiveRecord::Base
    attr_accessible :title, :description, :image_name, :image_id, :album_id
    belongs_to :album
    accepts_nested_attributes_for :album
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:25:08.370

您缺少`find`关键字：

```
 def edit
        @album = Album.find(params[:album_id])
        @image = @album.images.find(params[:id])
 end 
```

控制器中的`update`and`show`操作也是如此。

和：

```
 @image = @album.images(params[:id]) 
```

您`@images`将包含相册中的所有图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:44:23.987

尝试将您的表单代码更改为以下内容：

```
<%= form_for @image, :url => { :action => "edit" } do |f| %>
    <%= f.text_field :title %>
    <%= f.submit "Update" %>
<% end %> 
```

# ios - 将 json 数组发布到 url

> ID：15440481
> 
> 赞同：0
> 
> 时间：2013-03-15T19:19:53.733
> 
> 标签：ios, objective-c, json, post, asihttprequest

```
-(void)makeSecondRequestWithQuestionID:(NSString*)questionID value:(NSString*)value andArray:(NSArray*)array{
NSURL * url = [NSURL URLWithString:URL];
ASIFormDataRequest * request = [ASIFormDataRequest requestWithURL:url];
[request setPostValue:questionID forKey:@"question_id"];
[request setPostValue:value forKey:@"value"];
[request setPostValue:[array JSONRepresentation] forKey:@"array"];
[request setDelegate:self];
[request startAsynchronous]; 
```

我的值是一个数组，每次按下操作按钮时都会改变。如何发布这个数组？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:22:55.510

您必须为 POST 请求正确设置 HTTP 标头：

```
 NSURL *url = [NSURL URLWithString:@"http://localhost:8080/get-game"];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    [request setHTTPMethod:@"POST"];
    //this is your array. Init it as you need
        NSArray *array;
    //we need to create dict with your data and key
        NSDictionary *jsonDict = [NSDictionary dictionaryWithObject:array forKey:@"array"];
        NSError *err;
    //data which will be actually sent to server in post request
        NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDict options:NSJSONReadingAllowFragments error:&err];
    //now we need to tell that we send json data in our POST request. 
        [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
        [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
        [request setValue:[NSString stringWithFormat:@"%d", [jsonData length]] forHTTPHeaderField:@"Content-Length"];
        [request setHTTPBody:jsonData];
    //lets verify what will be sent    
        NSLog(@"request: %@", request);
        NSLog(@"request headers: %@", [request allHTTPHeaderFields]);
        NSLog(@"requet body: %@", [[NSString alloc] initWithData:[request HTTPBody] encoding:NSUTF8StringEncoding] );
        //send it!
        NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self];
    //continue with delegate methods for NSURLConnection 
```

# c# - EntityFramework 5 Code First 多重继承映射 (TPC)

> ID：15440485
> 
> 赞同：8
> 
> 时间：2013-03-15T19:20:03.097
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-5, entity-framework-mapping

好吧，可能这个问题之前已经回答过，但我一直在研究，我只是找不到解决我的具体问题的方法

[此示例的代码 - Visual Studio 2012 - 控制台应用程序](http://sdrv.ms/WtfcVr)

所以我有一个具有多个继承对象的 EntityFramework Code First 模型。我创建了这个代表我的问题的例子：

### 模型

```
public abstract class Person
{
    [Key]
    public Guid PersonId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

public class Employee : Person
{
    public decimal BaseSalary { get; set; }
}

public class ExecutiveEmployee : Employee
{
    public string Title { get; set; }
} 
```

### 语境

```
public class MyContext : DbContext
{
    public DbSet<Employee> Employees { get; set; }
    public DbSet<ExecutiveEmployee> ExecutiveEmployees { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Employee>().Map(x =>
            {
                x.MapInheritedProperties();
                x.ToTable("Employees");
            });

        modelBuilder.Entity<ExecutiveEmployee>().Map(x =>
            {
                x.MapInheritedProperties();
                x.ToTable("ExecutiveEmployees");
            });
    }
} 
```

我想使用[TPC (Table Per Concrete Type) 映射](http://weblogs.asp.net/manavi/archive/2011/01/03/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-3-table-per-concrete-type-tpc-and-choosing-strategy-guidelines.aspx)

运行迁移并更新我的数据库后，结果如下：

![在此处输入图像描述](../Images/b60ef20eb028069b59bd0c759ccbb144.png)

*这是我的期望。到目前为止，一切都很好。*

*但是后来.......*我决定像这样`Gender`向我的类添加一个对象和一个属性`Person`：（这不是我的真实模型，它只是一个示例）

```
public class Gender
{
    [Key]
    public Guid GenderId { get; set; }

    [Required]
    [MaxLength(250)]
    public string Name { get; set; }
}

public abstract class Person
{
    ....
    public Gender Gender { get; set; }
    ....
}

public class MyContext : DbContext
{
    ....
    public DbSet<Gender> Genders { get; set; }
    ....
 } 
```

应用迁移并更新数据库后，这是数据库模型：

![在此处输入图像描述](../Images/d1fdd86b0c57fb8d1e7c9dbe15127893.png)

**为什么？**

我错过了什么？我只希望 EF 在我的继承层次结构中映射我的*引用*属性。我期望该表包含一个完全一样`ExecutiveEmployees`的外键和`Genders``Employees``Genders`

我在我的`MyContext.OnModelCreating`：

```
modelBuilder.Entity<ExecutiveEmployee>().Map(x =>
    {
        x.MapInheritedProperties();
        x.Properties(c => c.Gender);// <<-- does not work
        x.ToTable("ExecutiveEmployees");
    }); 
```

但是当我尝试添加迁移时，我收到了这个错误：

> 无法映射类型“ExecutiveEmployee”上的属性“Gender”，因为它已从模型中显式排除，或者它属于正在使用的 DbModelBuilderVersion 不支持的类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T00:18:47.310

好吧，这很奇怪，我将您的示例运行到 Visual Studio 并使用 EF Power Tools 来查看 EDMX 生成器如何可视化这些关系，这就是我得到的结果： ![实体数据模型](../Images/d1cec0ac3c26d18626f879242c33dd1b.png)
从这个图中我可以看到为什么这会出错，因为现在实体框架是假设已经在父类中找到了导航属性。现在至于如何，我认为这是一个关于使用 TPC 的 Code First 中的多级继承的错误，应该修复。

# jquery - 使用 jQuery 向下钻取菜单，是否可以调整大小？

> ID：15440487
> 
> 赞同：0
> 
> 时间：2013-03-15T19:20:11.697
> 
> 标签：jquery, html

我正在使用[jQuery 向下钻取菜单](http://www.designchemical.com/lab/jquery-drill-down-menu-plugin/getting-started/)，效果很好。我遇到的唯一问题是尺寸。我有 12 个需要显示的导航项。默认情况下它只支持 8。

我正在寻找熟悉该产品并能告诉我菜单的高度属性在哪里的人。

```
 <div class="pull-left demo-dd demo-container span3">

        <ul id="drilldown-3">
            <li><a href="#">Record Check</a></li>
            <li><a href="#">Reports/Statistics</a>
            <ul>
                <li><a href="#">USN</a>
                <ul>
                    <li><a href="#">Aclohol Incidents and Status Reports</a>
                    <ul>
                        <li><a href="#">Alcohol Incidents(By FY)</a>
                        <ul>
                            <li><a href="#">Fiscal Year</a></li>
                            <li><a href="#">Category</a></li>
                        </ul></li>
                        <li><a href="#">Alcohol Status Reports</a></li>
                    </ul></li>
                    <li><a href="#">Urinalysis Reports</a></li>
                    <li><a href="#">DAAR Listing</a></li>
                    <li><a href="#">Laboratory Positive Status Report</a></li>
                    <li><a href="#">Screening Listing</a></li>
                    <li><a href="#">Group Profile</a></li>
                    <ul>
                        <li><a href="#">With Details</a></li>
                        <li><a href="#">Without Details</a></li>
                    </ul>
                    <li><a href="#">Unit Profile</a></li>
                    <li><a href="#">ADMITS User and UIC Listings</a></li>
                    <ul>
                        <li><a href="#">ADMITS User Listing</a></li>
                        <li><a href="#">UIC Listing</a></li>
                    </ul>
                </ul></li>
                <li><a href="#">USMC</a></li>
                <li><a href="#">STAFF</a></li>
                <li><a href="#">DAPA/UPC</a></li>
            </ul></li>
            <li><a href="#">DAAR Data</a></li>
            <li><a href="#">Training</a></li>
            <li><a href="#">Edit Unit</a></li>
            <li><a href="#">Screening</a></li>
            <li><a href="#">Facility</a></li>
            <li><a href="#">Treatment</a></li> //only gets to this point on the menu
            <li><a href="#">Waiver Data</a></li>
            <li><a href="#">New Report - Test</a></li>
            <li><a href="#">UIC Search</a></li>
            <li><a href="#">Spice</a></li>
            <li><a href="#">Breathalyzer</a></li>
        </ul>
    </div> 
```

我在[这里](http://jsfiddle.net/6TFg7/)和[这里搜索了 CSS](http://jsfiddle.net/ndQuN/)

以及文件的[JavaScript](http://jsfiddle.net/ASGen/)，但没有找到默认设置的高度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:49:55.947

所以这是我找到的解决方案：

向下钻取菜单不使用静态设置的高度，因为没有必要，它使用一个元素高度，该高度取决于有多少

*   你有的水平。

    这

    *   大小由使用的浏览器的默认字体大小加上填充设置：

    .demo-dd .dd-menu a {padding: 8px 10px;} 每次在菜单上添加另一个链接时，大小都会增加，您可以通过在菜单的 UL 元素上设置静态高度来覆盖它，如下所示：

    .drilldown-3 {height:auto!important;} 或者如果你想使用滚动条

    .drillddown-3 {overflow-y:auto;} 或者，您可以在 JavaScript 中编辑最大 var，但会花费大量时间重新编写代码。就个人而言，您应该使用 height:auto!important

# html - iPhone上的Twitter Bootstrap粘页脚？

> ID：15440497
> 
> 赞同：-1
> 
> 时间：2013-03-15T19:20:31.250
> 
> 标签：html, ios, twitter-bootstrap

我是否需要对我的移动应用程序做任何特别的事情才能让[Twitter 粘滞页脚](http://getbootstrap.com/2.3.2/examples/sticky-footer-navbar.html)在 iPhone 上运行？

**HTML：**

生日提醒

```
<div class="container">
  <p>Please use the tabs below to add a birthday reminder!</p>
      <div id="footer">
    <p>footer</p>
</div><!-- /footer -->
</div> <!-- /container -->
    <script type="text/javascript" src="js/cordova-2.5.0.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:25:20.320

不，但我建议在常规 css 文件之外使用 bootstrap-responsive.css 文件。

# css - Typekit 在 IE8 中不起作用

> ID：15440498
> 
> 赞同：3
> 
> 时间：2013-03-15T19:20:33.657
> 
> 标签：css, drupal, internet-explorer-8, font-face, typekit

我在 Drupal 的一个站点上工作，我有一个字体 (Dax)，我正在使用 Typekit 加载它，它没有在 IE8 中显示。

我对谷歌做了一些研究，但似乎 Typekit 应该在 IE8 中工作。我一直在使用 Typekit 编辑器将字体添加到 CSS 选择器。我尝试将字体名称直接添加到我的 CSS 文件中的堆栈中，并使用此页面上讨论的包含权重的特殊字体名称：http: [//help.typekit.com/customer/portal/articles/6855-using -多种权重和样式](http://help.typekit.com/customer/portal/articles/6855-using-multiple-weights-and-styles)

它仍然不起作用。我不确定这是否是与 Drupal 相关的问题，因为我通常不在 Drupal 中工作。这也是我第一次使用 Typekit。

这是链接：http: [//inclusionbc.hhdev.hothousemarketing.com](http://inclusionbc.hhdev.hothousemarketing.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:54:44.580

坏消息，它在（我的）IE 9 中也不起作用。它不应该与 Drupal 有任何关系。我在使用缩小的 css/javascript 和 Typekit 时遇到了问题，但我可以看到你没有压缩任何东西。

我看到您将 typekit 称为 head 中的最后一个脚本。试着把它移到顶部。并改用高级嵌入代码。我更喜欢使用常规的 font-face 声明，但 Typekit 不支持这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T09:43:10.790

如此处所述[http://outwardfocusdesign.com/ie-error-invalid-argument-when-using-typekit/](http://outwardfocusdesign.com/ie-error-invalid-argument-when-using-typekit/)未封闭的标签是错误的。（使用[http://validator.w3.org/check](http://validator.w3.org/check)您的代码并查找“未关闭”错误；其他错误不会影响 typekit 的 JS）

正确关闭标签在 IE8 中对我有用

# ios - 在 Storyboard 中创建的 TabbarController 无法以编程方式更改视图

> ID：15440502
> 
> 赞同：0
> 
> 时间：2013-03-15T19:20:49.727
> 
> 标签：ios, objective-c, ipad, uitabbarcontroller

创建了一个`tabbarcontroller`作为 splitview 控制器的详细视图。我可以通过单击模拟器上`item1`的`item2`图标来更改视图，但不能以编程方式更改视图。

我`null` 在尝试打印`viewcontrollers`时得到`nslog`。在 MasterView 中：

```
@property (strong, nonatomic) TabBarRootViewController *detailViewController;
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.detailViewController=[[TabBarRootViewController alloc] init];
//tried also
self.detailViewController = (TabBarRootViewController *)[self.splitViewController.viewControllers objectAtIndex:1];

}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //this sends object info to detail
    if (indexPath.section==0) {
        //send row number
       NSNumber *i = [NSNumber numberWithInteger:indexPath.row];
        NSLog(@"Selected index %@",i);

        self.detailViewController.detailItem = i;
    }
} 
```

详细（标签栏）：

```
@property (strong, nonatomic) id detailItem;

if (self.detailItem) {
    NSInteger i=[self.detailItem integerValue];
    NSLog(@"recieved integer is %i",i);

    //tried this
    self.tabBarController.selectedIndex=i;
    self.tabBarController.selectedViewController = [self.tabBarController.viewControllers objectAtIndex:i];

    //list of viewcontrollers
    NSArray *array;
    array = [[self tabBarController] viewControllers];
    NSLog(@"array %@",array);

} 
```

![在此处输入图像描述](../Images/019370568215cc3bc20695b5fdc68f5c.png)

```
NSLOG:
recieved integer is 1
array (null) 
```

如何以编程方式更改视图？

谢谢，

小号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:35:13.757

看起来您的标签栏控制器是`nil`. 也许没有与故事板正确链接？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:25:27.763

您需要`performSegueWithIdentifier:sender:`在当前控制器上使用。

这是因为您的控制器现在由情节提要控制，并且它必须保持状态等。

请注意，您需要在情节提要编辑器中为您的 segues 提供一个 ID，并且您不能使用自己的 init，而是必须重写`prepareForSegue:sender:`以注入属性。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T19:07:02.840

问题是无法获得指向 Tabbar 控制器的确切指针。

我删除了导航控制器，只留下了标签栏控制器。还删除了`[topcontroller]`主视图和 appdelegate 中的请求。

所以最终的工作代码是

应用代理：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    return YES;
} 
```

masterview: - (void)viewDidLoad

```
{
    [super viewDidLoad];

    self.detailViewController = (TabBarRootViewController *)[self.splitViewController.viewControllers objectAtIndex:1];

} 
```

在 tabbarcontroller （细节控制器）

```
@property (strong,nonatomic) UITabBarController *rootController;

        self.rootController= (TabBarRootViewController *)[self.splitViewController.viewControllers objectAtIndex:1];
        self.rootController.selectedIndex=i; 
```

# jquery - 使 Foundation Zurb Off-Canvas 侧边栏选项向右滑动而不是向左滑动

> ID：15440503
> 
> 赞同：1
> 
> 时间：2013-03-15T19:20:50.070
> 
> 标签：jquery, zurb-foundation

有谁知道我如何将 Foundation Zurb 的 Off-Canvas 侧边栏菜单选项的功能切换为向右滑动而不是向左滑动？

注意：您必须缩小屏幕才能看到响应功能。

[http://www.zurb.com/playground/playground/off-canvas/offcanvas-4.html](http://www.zurb.com/playground/playground/off-canvas/offcanvas-4.html)

我尝试切换 css，所以现在剩下的一切都是正确的，但这并没有完全奏效。这是示例：http: [//josephsjoblom.com/offcanvas/offcanvas-4-alt.html](http://josephsjoblom.com/offcanvas/offcanvas-4-alt.html)

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T02:59:04.883

尝试这个：

```
<div class="off-canvas-wrap">
  <div class="inner-wrap">
   <nav class="tab-bar">
  <section class="right-small">
    <a class="right-off-canvas-toggle menu-icon" ><span></span></a>
  </section>
</nav>

<aside class="right-off-canvas-menu">
  <ul class="off-canvas-list">
    <li><label>Users</label></li>
    <li><a href="#">Hari Seldon</a></li>
    ...
  </ul>
</aside>

<section class="main-section">
  <!-- Main content goes here -->
</section> 
```

来自文档： http: [//foundation.zurb.com/docs/components/offcanvas.html](http://foundation.zurb.com/docs/components/offcanvas.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T14:43:51.357

更改 offcanvas_right.css:30

```
[role="complementary"] {
margin-right: -200%; 
```

代替

```
[role="complementary"] {
margin-left: -100%; 
```

# android - 更改 ActionBar 样式：将文本置于图标下方

> ID：15440505
> 
> 赞同：1
> 
> 时间：2013-03-15T19:21:10.810
> 
> 标签：android, styles, android-actionbar

我有一个选项卡式应用程序，它使用主题 Holo.Light

是否可以在更高 API 的选项卡图标下方显示选项卡的名称，用于操作栏？如果是这样，那怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:33:28.743

您必须创建自定义布局视图并像这样添加

```
ActionBar.Tab tabA= bar.newTab().setCustomView(R.layout.actionbar_custom_tab); 
```

“actionbar_custom_tab”是我自定义的布局，在这里你可以根据你的要求设置图标和文本视图

# java - 如何查找 CPU 和 IO 时间？

> ID：15440506
> 
> 赞同：4
> 
> 时间：2013-03-15T19:21:13.937
> 
> 标签：java, rest, io, visualvm, cpu-time

我们有一个基于 REST 的服务，它调用外部 API 并从该 API 获取响应。

我在这里提交容量请求，以确保我们的盒子在我们托管服务时能够处理流量。

所以Capacity的人问我——

`Any idea what is the estimated CPU and IO time for these calls?`

谁能告诉我`simple language`这些术语是什么意思？我应该采取什么方法来粗略估计电话？

谢谢您的帮助。

**更新：-**

假设这是我的程序。

```
public class RestLnPTest {

    private final static Logger LOG = Logger.getLogger(NokiaLnPTest.class.getName());
    private static int noOfThreads = 10;

    public static void main(String[] args) {

        ExecutorService service = Executors.newFixedThreadPool(noOfThreads);

        try {

            for (int i = 0; i < 100 * noOfThreads; i++) {
                service.submit(new ThreadTask());
            }

            service.shutdown();
            service.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);

        } catch (InterruptedException e) {

        } catch (Exception e) {

        } finally {
            logHistogramInfo();
        }
    }

    private static void logHistogramInfo() {

     System.out.println(ThreadTask.lookupHistogram);

    }
}

class ThreadTask implements Runnable {

    public static ConcurrentHashMap<Long, AtomicLong> lookupHistogram = new ConcurrentHashMap<Long, AtomicLong>();
    private static final String URL = "SOME_URL";

    @Override
    public void run() {

        RestTemplate restTemplate = new RestTemplate();

        long start = System.nanoTime();

        String result = restTemplate.getForObject(URL, String.class);

        long end = System.nanoTime() - start;

        final AtomicLong before = lookupHistogram.putIfAbsent(end / 1000000, new AtomicLong(1L));

        if (before != null) {
            before.incrementAndGet();
        }
    }
} 
```

那么如何计算 CPU 和 IO 时间呢？目前我正在Unix环境中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:27:31.093

我相信您需要测量由您的应用程序活动引起的 CPU 消耗和 IO 负载。

如果你在类 Unix 系统上，你可以使用

1.  `top`手动监控命令
2.  `vmstat`用于整机自动监控
3.  `ps`有适当的选项来监控特定的过程。

在 Windows 上从使用任务管理器开始。您还可以使用 WMI 实现`vbs`或`jscript`获取相同数据的脚本。

如果您需要在 java 中实现平台无关的方式，您可以使用 JMX。系统 bean 至少提供了关于 CPU 消耗的有限信息。

# svn - 如何使用 hgsvn 从本地（file:///）SVN 存储库克隆？

> ID：15440508
> 
> 赞同：0
> 
> 时间：2013-03-15T19:21:28.617
> 
> 标签：svn, hgsubversion

目前我正在尝试运行一个远程颠覆存储库的克隆。远程存储库只能通过一个非常慢的链接获得，所以我`svnsync`创建了一个本地 subversion 存储库。将近 30 小时后，我现在拥有了 subversion 存储库的本地副本。

我现在如何将其克隆到新的 mercurial 存储库？问题是以下两种使用形式`file:///`似乎都不起作用：

```
$ hg clone svn+file:///home/user/repo repo.hg
abort: repository svn+file:///home/user/repo not found!
$ hg clone file+svn:///home/user/repo repo.hg
abort: repository file+svn:///home/user/repo not found!
$ hg clone file:///home/user/repo repo.hg
abort: repository /home/user/repo not found! 
```

相反`svn info file:///home/user/repo` *，确实*给了我信息并证明那个地方有一个适当的颠覆存储库。`svn://`显然没有意义，因为我没有在本地运行服务器。

我也试过：

```
$ hgimportsvn file:///home/user/repo repo.hg
SVN branch isn't a copy
Finished! You can now pull all SVN history with 'hgpullsvn'. 
```

但`hgpullsvn`前半打修订唯一成功，然后出错：

```
Interrupted, please wait for cleanup!

External program failed (return code 1): hg '--encoding' 'utf-8' 'remove' '-A' 'branches/Company/CVSROOT'
branches/Company/CVSROOT: No such file or directory 
```

（显然，这`CVSROOT`源于之前从 CVS 转换*为Subversion。这是在我之前。）*

即使我尝试强制使用它也不理解协议说明`hgsvn`符？`file:///``svn+file:///`

注意：我曾尝试通过`hg`和`hgsvn`之前进行克隆，但`hgsvn`一段时间后通过同步时出现错误。由于克隆整个历史需要很长时间，所以我使用了本地颠覆存储库副本，我打算从中克隆，`hgsvn`就像我过去所做的那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T08:42:42.000

只是意见：不要使用 2010 年以来“处于维护模式”的 hgsvn，将 hgsubversion 扩展添加到 Mercurial 并用它克隆 Subversion 存储库

**PS：** “svn+”前缀仅对 http 服务的存储库有用（因为您可以将 http:// 用于 Subversion、Mercurial、Git）。本地 Subversion 存储库（使用 hgsubversion 克隆）将是 file:///

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T19:16:40.013

我又遇到了这个问题。这也是配置错误或未安装`hgsubversion`扩展的症状之一。

确保您的`.hgrc`or （全局或本地）中有适当的行，如[HgSubversion 的文档站点上](http://mercurial.selenic.com/wiki/HgSubversion)`Mercurial.ini`所指出的那样。示例（根据需要调整路径）：

```
[extensions]
hgsubversion = ~/hgsubversion/hgsubversion 
```

然后检查：

```
hg help hgsubversion
hg help subversion 
```

我的猜测是，没有扩展 Hg 根本不知道文件夹中会发生什么，因此需要一个无法找到的 Mercurial 存储库。

在我的情况下，这*又是由*覆盖本地`~/.hgrc`.

# php - 从 json Google Maps 解码后读取数组

> ID：15440511
> 
> 赞同：0
> 
> 时间：2013-03-15T19:21:45.187
> 
> 标签：php, arrays, json, api, maps

我有一个问题，我无法理解如何获取编写此脚本生成的'array 的 address_components 的字段 long_name 示例：

```
$url = 'http://maps.googleapis.com/maps/api/geocode/json?latlng='.$lat.','.$lng.'&sensor=true';
$data = @file_get_contents($url);
$jsondata = json_decode($data , true);

if(is_array($jsondata ))
{
      $long_name= $jsondata ['results']['address_components'][0]['long_name'];
} 
```

看一个建议

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:28:41.697

`$results` is an array. If you want to get the first result:

```
$jsondata ['results'][0]['address_components'][0]['long_name'] 
```

# android - 在意图之间共享 Uri 以用作电子邮件附件的最佳方式是什么？

> ID：15440517
> 
> 赞同：0
> 
> 时间：2013-03-15T19:22:17.867
> 
> 标签：android, email, photo

我正在尝试制作一个应用程序，它可以让我拍摄一些照片，然后通过电子邮件将它们发送给某人。拍照和发送电子邮件确实有效，但如何将照片附加到电子邮件中？

这是我用来在意图一中拍照的代码：

```
public void maak_foto(View view) {

    Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

    File pictureFileDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);
    File FileDir = new File(pictureFileDir, "offerte_fotos");

    try {
        FileDir.mkdirs();
    }finally {

    }

    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyymmddhhmmss", Locale.getDefault());
    String date = dateFormat.format(new Date());
    String photoFile = "OfferteFoto_" + date + ".jpg";

    String filename = pictureFileDir.getPath() + File.separator + photoFile;

    File photo = new File(filename);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
    imageUri = Uri.fromFile(photo);
    startActivityForResult(intent, TAKE_PICTURE);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode) {
    case TAKE_PICTURE:
        if (resultCode == Activity.RESULT_OK) {
            Uri selectedImage = imageUri;
            getContentResolver().notifyChange(selectedImage, null);
            ContentResolver cr = getContentResolver();

            try {
                bitmap = android.provider.MediaStore.Images.Media.getBitmap(cr, selectedImage);

                bitmap.recycle();
                Toast.makeText(this, selectedImage.toString(), Toast.LENGTH_LONG).show(); 
                Log.i("IMAGE_PATH", selectedImage.toString());
            } catch (Exception e) {
                Toast.makeText(this, "Failed to load", Toast.LENGTH_SHORT).show();
                Log.e("Camera", e.toString());
            }
        }
    }
} 
```

这是我用来以另一种意图发送电子邮件的代码。（点击下一步时）

```
 String to = "email adres goes here";
    String verkoopmail[] = { to } ;
    String message = "Hallo verkoop, "
            + '\n' + "Dhr./Mevr. " + contactpersoon + " van " + bedrijfsnaam + " wil graag een offerte ontvangen voor een " + soortbouw + "." 
            + '\n' + "De algemeene contact gegevens zijn:"
            + '\n' + "Adres: " + adres
            + '\n' + "Telefoon nummer: " + telefoon
            + '\n' + "Email adres: " + email;

    Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE);
    emailIntent.setType("image/jpeg"); //text/plain
    emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, verkoopmail);
    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Offerte aanvraag");
    emailIntent.putParcelableArrayListExtra(android.content.Intent.EXTRA_STREAM, uris);

    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, message);
    startActivity(emailIntent); 
```

我不知道如何从拍照意图获取 URI 到发送电子邮件意图。我可能在某处做错了什么。

希望有人可以提供帮助。

# ruby-on-rails - Web 服务 - CURL vs VS2008 vs SoapUI

> ID：15440521
> 
> 赞同：1
> 
> 时间：2013-03-15T19:22:31.877
> 
> 标签：ruby-on-rails, xml, web-services, visual-studio-2008, curl

使用 CURL ...我能够运行以下命令

```
 C:\curl>curl -H  "SOAPAction: http://172.16.255.7:5000/client_smart/"
 --data @soap.xml http://172.16.255.7:5000/client_smart 
```

在我的 C:\ 驱动器中，我有一个如下定义的 soap.xml 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<env:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:env="http://schemas.xmlsoap.org/soap/envelope/">
  <env:Body>
    <n1:get_client env:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
        xmlns:n1="urn:ActionWebService">
      <client_id xsi:type="xsd:int">1</client_id>
    </n1:get_client>
  </env:Body>
</env:Envelope 
```

当我运行命令时，它按预期执行并返回信息。

* * *

* * *

但是，当我打开 Visual Studio 2008 并尝试将其添加为参考时，我收到此消息

```
 The document at the url http://172.16.255.7:5000/client_smart/wsdl was
 not recognized as a known document type. The error message from each
 known type may help you fix the problem:
 - Report from 'DISCO Document' is 'Discovery document at the URL 
 http://172.16.255.7:5000/client_smart/wsdl could not 
```

![在此处输入图像描述](../Images/5802eb9f39696b7bc92df1d0b969eee8.png)

我也试过没有 /wsdl 在 VS2008 的 URL 中...但是得到“无法显示页面”。

* * *

* * *

对 URL 使用 SoapUI，我收到消息“无法确定 'action_web_service/xsd:string' 的命名空间”

关于为什么 Web 服务可以在 CURL 中工作，但不能在 VS2008 或 SoapUI 中工作的任何想法？

该服务是在 Ruby on Rails 中开发的。

# sql - 选择 B 列仅具有 A 列不同实例的所有记录

> ID：15440525
> 
> 赞同：0
> 
> 时间：2013-03-15T19:22:47.440
> 
> 标签：sql, sql-server, select

我不知道如何解释这种情况，这有点棘手，所以我会尝试给你一个我拥有的数据和我需要的输出的例子：

```
CREATE TABLE #TempTable( A int, B int)
INSERT INTO #TempTable (A,B)
VALUES 
(1,1),
(1,2),
(1,2),
(1,4),
(3,2),
(3,2),
(3,2),
(3,3),
(3,3); 
```

我不知道如何选择所有记录，以便最终输出为：

```
1,1
1,4
3,3
3,3 
```

~~我需要B列只有A列的不同实例的记录。所有其他实例都应该被忽略......~~我觉得这应该很简单，但我正在空白，我无法弄清楚。

**更新：**

我一直很难解释这一点，但我认为这是正确的逻辑：对于给定的 A，您可以拥有 B 的重复实例，但不能在不同的 A 中拥有 B 的重复实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:29:34.833

```
SELECT A, B FROM TempTable
WHERE B IN (
  SELECT B
  FROM TempTable
  GROUP BY B
  HAVING COUNT(DISTINCT A) = 1
) 
```

MS SQL 2012 上的工作示例：[http ://sqlfiddle.com/#!6/d235a/4](http://sqlfiddle.com/#!6/d235a/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T19:31:02.707

尝试：

```
with cte as
(select t.*, min(A) over (partition by B) minA, max(A) over (partition by B) maxA
 from #TempTable t)
select A, B
from cte
where minA=maxA 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T19:35:11.920

```
SELECT A, B, COUNT(A) as NumPairs 
FROM TempTable 
GROUP BY A, B 
HAVING COUNT(A)=1 
```

SQLFiddle - [http://sqlfiddle.com/#!6/ee6c5/9](http://sqlfiddle.com/#!6/ee6c5/9)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T19:35:59.793

```
SELECT t1.A, t1.B
  FROM TempTable t1
  LEFT JOIN TempTable t2
    ON t1.B=t2.B AND t1.A<>t2.A
WHERE t2.A IS NULL; 
```

[http://sqlfiddle.com/#!6/d235a/5](http://sqlfiddle.com/#!6/d235a/5)

# c# - 如何拆分数字>字母或字母>数字

> ID：15440527
> 
> 赞同：-1
> 
> 时间：2013-03-15T19:22:53.577
> 
> 标签：c#, regex

我需要这样的东西：

```
test123tersre23 
```

变成这样的东西：

```
{"test", "123", "tersre", "23"} 
```

我见过很多使用组的解决方案，但我需要在这里使用 Regex.Split（因为我已经有一些其他的自定义拆分逻辑）。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:34:15.660

您可以使用环视断言进行拆分：

```
string[] result = Regex.Split("test123tersre23", @"(?<=\d)(?=[a-zA-Z])|(?<=[a-zA-Z])(?=\d)"); 
```

这具有分裂断言所寻找的字符之间的空白（空白空间）的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T19:34:01.820

怎么样：

```
Regex.split(input, "(\d+)"); 
```

[根据此示例](http://msdn.microsoft.com/en-us/library/8yttk7sy.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-4)，使用一组捕获括号，它应该输出任何一系列数字作为分隔符。这对您打算如何解析做出了一些假设，但无论如何似乎是正确的想法。

* * *

根据下面的评论，您正在寻找类似的东西

```
@"($|%|\d+)" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:39:16.397

这将是您正在寻找的正则表达式：

> \d+|\D+

然后，使用[**Regex.Matches**](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.matches.aspx)方法获取结果。代码如下所示：

```
var input = "test123tersre23"
var pattern = @"\d+|\D+"
var results = Regex.Matches(input, pattern); 
```

这个结果包含一个[**MatchCollection**](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.matchcollection.aspx)。遍历它们以获取值：

```
foreach(Match m in results)
{
    var current = m.Value;
} 
```

**编辑：**

抱歉，没有看到您需要拆分方法的解决方案，我深表歉意。

# z3 - Z3 中的不同集合

> ID：15440528
> 
> 赞同：1
> 
> 时间：2013-03-15T19:22:55.027
> 
> 标签：z3

我有以下程序：

```
;;; Sets
(declare-fun lock_0 (Int) Bool)
(declare-fun lock_1 (Int) Bool)
(declare-fun lock_2 (Int) Bool)
(declare-fun lock_3 (Int) Bool)

;;; verify if sets lock_0 and lock_1 haven't elements in common
(assert (exists ((x Int)) (=> (lock_0 x) (not (lock_1 x)))))

;;; verify if sets lock_2 and lock_3 haven't elements in common
(assert (exists ((x Int)) (=> (lock_2 x) (not (lock_3 x)))))

;;; Sets only contain 1 for Lock_0 and lock_1 or 2 for lock_2 or lock_3
(assert (forall ((x Int)) (= (lock_0 x) (= x 2))))
(assert (forall ((x Int)) (= (lock_1 x) (= x 2))))
(assert (forall ((x Int)) (= (lock_2 x)  (= x 1))))
(assert (forall ((x Int)) (= (lock_3 x)  (= x 1))))

;;; set [l1]
(declare-fun SL1 (Int) Bool) 
;;; set only contain 1
(assert (forall ((x Int)) (= (SL1 x) (= x 1))))
;;; SL1 subset lock_2
(assert (forall ((x Int)) (=> (SL1 x) (lock_2 x))))

;; sat
(check-sat)
( get-value (( lock_0 1 )))
( get-value (( lock_0 2 )))
( get-value (( lock_1 1 )))
( get-value (( lock_1 2 )))
( get-value (( lock_2 1 )))
( get-value (( lock_2 2 )))
( get-value (( lock_3 1 )))
( get-value (( lock_3 2 )))
( get-value (( SL1 1 )))
( get-value (( SL1 2 ))) 
```

结果：

```
sat
((( lock_0 1 ) false))
((( lock_0 2 ) true))
((( lock_1 1 ) false))
((( lock_1 2 ) true))
((( lock_2 1 ) true))
((( lock_2 2 ) false))
((( lock_3 1 ) true))
((( lock_3 2 ) false))
((( SL1 1 ) true))
((( SL1 2 ) false)) 
```

我需要生成`lock_0`以下`lock_1`集合：

```
[] - Empty set
[2] 
```

`lock_2`并生成`lock_3`以下集合：

```
[] - Empty set
[1] 
```

但集合`lock_0`并`lock_1`不能有共同的元素。

但最后我得到：

```
( get-value (( lock_0 2 ))) true
( get-value (( lock_1 2 ))) true 
```

结果对每个人都是正确的，在一种情况下应该是错误的，例如：

```
( get-value (( lock_0 2 ))) false
( get-value (( lock_1 2 ))) true 
```

因为集合不能包含相等的元素。

`lock_2`和的问题相同`lock_3`。

如果我添加：

```
;;; Set [l2]
(declare-fun SL2 (Int) Bool)

;;; set only contain 2
(assert (forall ((x Int)) (= (SL2 x) (= x 2))))
;;; SL2 is subset lock_0
(assert (forall ((x Int)) (=> (SL2 x) (lock_0 x))))

;; unsat
(check-sat) 
```

我希望结果是不满意的，但是由于集合（`lock_0 and lock_1`或`lock_2 and lock_3`）相等，我会坐下来。

例如：如果我得到`lock_0 = []`and`lock_1 = [2]`和`lock_2 = [1]`and `lock_3 = []`，程序是正确的。

我怎么解决这个问题？

**开始编辑**

添加这段代码： `(assert (forall ((x Int)) (or (not (lock_0 x)) (not (lock_1 x)))))`

结果不满意。它应该是坐着的。

那么如何为同一个集合、空集合或集合 {2} 生成？还是不可能做到？

如果这是不可能的，那么我们可以让元素 0 是空集吗？但为此，我只能拥有以下套装：

```
[0] - empty set 
[2] 
```

所以我这样做：`(assert (forall ((x Int)) (= (lock_1 x) (or (= x 0) (= x 2)))))`

但是，如果我想要这些集合`lock_0`并且`lock_1`可能也有 3 作为一个元素应该得到：

```
[0] - empty set
[2]
[3]
[2,3] - may not include zero, since only the zero should be used as the singleton set [0] 
```

所以我这样做：`(assert (forall ((x Int)) (= (lock_1 x) (or (= x 0) (and (!= x 0) (or (= x 2) (= x 3)))))))`

是对的吗？

另一个问题：如果我想创建一个接受集合的函数？因为集合是一个函数。例如：

```
(define-fun example ((s1 Set) (s2 Set) (x Int)) Int
  (if (and (s1 x) (not (s2 x)))
      (* x x)
      0)) 
```

但我不知道用什么来代替 Set (Set s1)，请帮帮我。

**结束编辑**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:12:19.710

我发现您的编码存在一些问题。

一、命令

```
;;; verify if sets lock_0 and lock_1 haven't elements in common
(assert (exists ((x Int)) (=> (lock_0 x) (not (lock_1 x))))) 
```

断言存在一个`x`不在`x`或`lock_0`不在`x`的元素`lock_1`。这种说法几乎是空洞的。它只是防止两个“集合”同时包含所有整数。您的评论表明您实际上是在尝试断言

```
(assert (forall ((x Int)) (or (not (lock_0 x)) (not (lock_1 x))))) 
```

也就是说，两个集合的交集都是空的。

其次，您说您期望/需要`lock_0`并且`lock_2`是空集，但是您断言

```
(assert (forall ((x Int)) (= (lock_0 x) (= x 2))))
(assert (forall ((x Int)) (= (lock_2 x)  (= x 1)))) 
```

这两个断言本质上说的`lock_0`是单例集`{2}`，并且`lock_2`是单例集`{1}`。

顺便说一句，如果我们更换

`(assert (exists ((x Int)) (=> (lock_0 x) (not (lock_1 x)))))`

和

`(assert (forall ((x Int)) (or (not (lock_0 x)) (not (lock_1 x)))))`, (1)

在我们断言之后，问题变得微不足道

`(assert (forall ((x Int)) (= (lock_0 x) (= x 2))))` (2)

`(assert (forall ((x Int)) (= (lock_1 x) (= x 2))))` (3)

因为，(1) 是说`lock_0`并且`lock_1`没有共同的元素，并且 (2) 和 (3) 是说它们是单例集`{2}`。

**编辑**（额外问题）

如果我们想说那`lock_0`是空集，我们可以说它总是假的

```
(assert (forall ((x Int)) (not (lock_0 x)))) 
```

命令

```
(assert (forall ((x Int)) (= (lock_1 x) (or (= x 0) (= x 2))))) 
```

断言那`lock_1`是 set `{0, 2}`。如果我们想说那`lock_1`是空集或集合`{2}`，我们应该断言：

```
(assert (or (forall ((x Int)) (not (lock_1 x))) 
            (forall ((x Int)) (= (lock_1 x) (= x 2))))) 
```

要说它`lock_1`可能只包含值 2 和 3，我们应该断言：

```
(assert (forall ((x Int)) (=> (lock_1 x) (or (= x 2) (= x 3))))) 
```

请注意，我使用的是蕴含 ( `=>`) 而不是相等。在这种情况下，我们有`lock_1`可能是以下集合之一：（`{}`空集）`{2}`、、、`{3}`或`{2, 3}`。

该命令`define-fun`不将函数作为参数。该命令`define-fun`只是定义一个宏。它不会为 Z3 增加任何额外的动力。

如果你想要一种更强大的语言来与 Z3 交互，你应该考虑 Z3Py，它是 Z3 的 Python 前端。这是一个使用 Z3Py 的示例（也可以[在此处](http://rise4fun.com/Z3Py/feB3)在线获得）。

```
# Declare a function from Int to Bool
lock_1 = Function('lock_1', IntSort(), BoolSort())
x = Int('x')

s = Solver()
# Assert that lock_1 is the empty set
s.add(ForAll(x, Not(lock_1(x))))
print(s.check())

# Declare a function that returns x*x if x is in s1 but not in s2
# Remark: example is a Python function that builds a Z3 expression.
def example(s1, s2, x):
    # Remark: the function If creates a Z3 if expression.
    return If(And(s1(x), Not(s2(x))), x*x, 0)

lock_2 = Function('lock_2', IntSort(), BoolSort())

s = Solver()
a = Int('a')
s.add(a == example(lock_1, lock_2, 3))
s.add(lock_1(3))
s.add(Not(lock_2(3)))
print(s)
print(s.check())
m = s.model()
print(m[a]) 
```

**结束编辑**

# ios - Cordova 2.4.0 或 2.5.0 或 2.6.0 和 requirejs

> ID：15440529
> 
> 赞同：9
> 
> 时间：2013-03-15T19:22:57.430
> 
> 标签：ios, cordova, requirejs

Cordova 2.4.0 及更高版本支持 AMD 加载到 javascript。我特别希望将 Cordova 2.5.0 与最新版本的 RequireJS、骨干网、jquery、jquery mobile 一起使用。

我还没有看到任何关于如何通过 requirejs 正确使用新版本的 Cordova 的教程或帖子。当 Cordova 不支持 AMD（2.3.0 及更早版本）时，我确实看到了大量关于如何合并 Cordova 和 requirejs 的帖子。

如果有人可以发布或指出一个简单的例子，将不胜感激。

编辑：具体来说，我的目标是 iOS 开发。

编辑：我想更具体一些，包括我遇到的确切问题。

**main.js**

```
require.config({
    paths: {
        cordova: 'libs/cordova/cordova.ios',//cordova-2.5.0',//2.5.0*/
        jquery: 'libs/jquery/jquery.min',//1.9.1
        text: 'libs/require/text',
        domReady: 'libs/require/domReady',
        underscore: 'libs/underscore/underscore-min',
        backbone: 'libs/backbone/backbone-min',
        'jquery.mobile-config': 'libs/jquery-mobile/jqm-config',
        'jquery.mobile': 'libs/jquery-mobile/jquery.mobile.min'
    },
    shim: {
        backbone: {
            deps: ['jquery', 'underscore'],
            exports: 'Backbone'
        },
        underscore: {
            exports: '_'
        },
        'jquery.mobile': {
            deps: ['jquery', 'jquery.mobile-config']
        }
    }
});

require(['app'], function(App){
    App.initialize();
}); 
```

**应用程序.js**

```
define([
    'cordova',
    'jquery',
    'underscore',
    'backbone',
    'router'
], function(cordova, $, _, Backbone, Router){
    var initialize = function(){
        Router.initialize();
    }
    return {
        initialize: initialize
    };
}); 
```

需要明确的是，在我优化 require.js 项目之前一切正常。当我尝试使用 r.js（require.js 的一部分）优化项目时，优化器会抛出一个错误，如下所示。

![错误 channel.js](../Images/45738224023e41172c2878bd17b63e7b.png)

我不确定 channel.js 是什么，以及它为什么要它，但我可以在 github 上找到它 [https://github.com/apache/cordova-js/tree/master/lib/common](https://github.com/apache/cordova-js/tree/master/lib/common)

创建它要查找的子目录后，我将 channel.js 文件放入其中。我不再收到该错误，但现在出现了不同的错误，如下所示。

![在此处输入图像描述](../Images/e105f348053a46c5200ded7adf8e0ec9.png)

我还能够在 cordova-js github 站点上找到该文件。将该文件放入子目录后，我不会收到任何错误消息并且项目成功构建。

现在，当我尝试使用单个优化的 js 文件运行应用程序时，我在 javascript 控制台中收到此错误，并且设备上只有一个空白屏幕。

“ReferenceError：找不到变量：出口”

这是我用来运行优化的 build.js 文件

```
({
    baseUrl: "../js",
    mainConfigFile: "../js/main.js",
    name: "../js/main",
    out: "../js/big.js",
    preserveLicenseComments: false,
    paths: {
        requireLib: "../js/libs/require/require"
    },
    include: "requireLib"
}) 
```

**编辑 4/11/13：** **回答** 感谢 SA 用户 asgeo1 的帮助，我的问题得到了解决。事实证明，您不能将 main.js 中的变量命名为“cordova”，因为它与名为“cordova”的内部变量冲突。

解决方案如下。

**main.js**

```
require.config({
    paths: {
        'cordova.ios': 'libs/cordova/cordova.ios',//cordova-2.5.0' THIS IS CHANGED
        jquery: 'libs/jquery/jquery.min',//1.9.1
        text: 'libs/require/text',
        domReady: 'libs/require/domReady',
        underscore: 'libs/underscore/underscore-min',
        backbone: 'libs/backbone/backbone-min',
        'jquery.mobile-config': 'libs/jquery-mobile/jqm-config',
        'jquery.mobile': 'libs/jquery-mobile/jquery.mobile.min'
    },
    shim: {
        backbone: {
            deps: ['jquery', 'underscore'],
            exports: 'Backbone'
        },
        underscore: {
            exports: '_'
        },
        'jquery.mobile': {
            deps: ['jquery', 'jquery.mobile-config']
        }
    }
});

require(['app'], function(App){
    App.initialize();
}); 
```

**应用程序.js**

```
define([
    'cordova.ios',//THIS IS CHANGED
    'jquery',
    'underscore',
    'backbone',
    'router'
], function(cordova, $, _, Backbone, Router){
    var initialize = function(){
        Router.initialize();
    }
    return {
        initialize: initialize
    };
}); 
```

此解决方案有效，并已使用 Cordova 2.5.0 和 2.6.0 进行了测试

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T06:39:40.330

我也有同样的问题。他们如何构建与 Cordova 2.4 / 2.5 一起分发的 cordova.ios.js 文件似乎是一个问题

如您所见，cordova.ios.js 文件中的`cordova/channel`and`cordova/utils`部分的顺序不正确。

这就是为什么 RequireJS 尝试加载单个文件的原因，因为这些模块还没有出现在 cordova.ios.js 文件中。

不幸的是，当您将 channel.js 和 utils.js 文件放入项目中时，您实际上并没有解决问题的根本原因。

当然，这允许它构建，但`ReferenceError: Can't find variable: exports`随后会发生错误，因为 RequireJS 会将 utils.js/channel.js 的内容放在其余的 cordova.ios.js 内容之上 - 这不好，因为它们依赖于导出的东西在 cordova.ios.js 内部设置。

更不用说您现在在您的构建文件中还有*两个*channel.js/utils.js 代码副本......

解决方案是您必须自己修改cordova.ios.js。将 cordova/channel 和 cordova/utils 移动到 cordova.ios.js 的顶部（但在定义了 exports/requirejs 的东西之后）

您可以在这里获得我为自己准备的一个：[https ://gist.github.com/asgeo1/5361227](https://gist.github.com/asgeo1/5361227)

另外，另一个提示 - 在您的 main.js 中，不要将 cordova.ios.js 称为“cordova”。这会发生冲突，因为 cordova.ios.js 已经在内部使用了这个模块名称。

改用“cordova.ios”：

```
require.config({
    paths: {
        'cordova.ios': 'libs/cordova/cordova.ios',
        ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:15:47.573

要使用延迟加载，一种选择是使用 requireJS 中的 domReady 插件（参见[http://requirejs.org/docs/api.html#pageload](http://requirejs.org/docs/api.html#pageload)）。

一旦 requireJS 确认 DOM 已准备就绪，您就可以使用常规的 deviceready 侦听器等待设备准备就绪。

```
require(['require/domReady','cordova/cordova-ios-2.5.0'], function (domReady) {
    domReady(function () {
    console.log("The DOM is ready - waiting for the device");
    document.addEventListener("deviceready", startWhenReady, false);
    }
 });

function startWhenReady()
{
  console.log("dom and device ready : we can start...");
  // your app
} 
```

为我工作！

# javascript - 如何在 ASP.NET 网络表单上使用 javascript 设置文本框的值

> ID：15440541
> 
> 赞同：3
> 
> 时间：2013-03-15T19:23:35.460
> 
> 标签：javascript, asp.net, html

所以在一个表单中，我有以下控制：

```
<asp:TextBox runat="server" ID="monthlyAmount" ClientIDMode="Static"/> 
```

ClientIDMode 静态是因为母版页正在使用中。

然后我有这个按钮：

```
<input type="button" id="calculate" onclick="AutoFillEstimate()" value="Calculate Estimate" /> 
```

连接到这个脚本：

```
<script type="text/javascript">
    function AutoFillEstimate() {
        document.getElementById("monthlyAmount").nodeValue = "test";
    }
</script> 
```

我觉得我只是在使用 nodeValue 而不是我应该使用的东西，但我不知道在哪里可以找到这些东西的参考。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T19:27:06.537

如果我理解正确，您只是想设置值，只需使用：

```
document.getElementById("monthlyAmount").value = "test"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-24T19:37:59.697

正确的方法是：

```
document.getElementById("<%= monthlyAmount.ClientID %>").value = "test"; 
```

# phpmyadmin - phpmyadmin - 没有密码无法登录

> ID：15440542
> 
> 赞同：0
> 
> 时间：2013-03-14T17:06:07.313
> 
> 标签：phpmyadmin

我将 AllowNoPassword 设置为 true，但我仍然没有密码无法登录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:30:12.127

您是否通过删除`//`?

```
$cfg['Servers'][$i]['AllowNoPassword'] = TRUE 
```

# html - 让父 DIV 高度根据子 DIV 高度自动调整大小

> ID：15440545
> 
> 赞同：0
> 
> 时间：2013-03-15T19:23:49.383
> 
> 标签：html, css

我有一个封装了许多子容器的父容器。子容器的高度取决于它们容纳的文本量。我希望子容器确定父容器的高度。所以如果一个子容器的高度是 40px，那么父容器的高度应该是 80px。如果子容器的高度是 100px，那么父容器的高度应该是 140px（40px 固定 + 100px 可变）。

我尝试将父容器的高度未定义或设置为自动或设置为 100%，但它们都使我的父容器的高度太小而无法容纳子容器。如果我给我的父容器高度一个设定的像素，那么问题就会消失。

我的父 DIV 具有固定的高度（div 的行为符合预期）

```
.resultsbox{
    width: 800px;
    position: relative;
    left: 0px;
    right: 0px;
    margin-left: auto;
    margin-right: auto;
    border-top-style: solid;
    border-top-width: 2px;
    border-top-color: #DDD;
    border-radius: 5px;
    height: 400px;
} 
```

设置高度的 jsFiddle 示例：

[http://jsfiddle.net/Uj5FP/6/](http://jsfiddle.net/Uj5FP/6/)

我的父 DIV 没有设置高度（父高度不足以容纳孩子）

```
.resultsbox{
    width: 800px;
    position: relative;
    left: 0px;
    right: 0px;
    margin-left: auto;
    margin-right: auto;
    border-top-style: solid;
    border-top-width: 2px;
    border-top-color: #DDD;
    border-radius: 5px;
} 
```

没有设置高度的jsFiddle：

[http://jsfiddle.net/Uj5FP/7/](http://jsfiddle.net/Uj5FP/7/)

如何正确自动调整父级高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:57:37.183

这是另一个尝试。将您的绝对位置元素包装在`<div class='absolute-panel'>`：

```
<div class='resultsbox'>
    <div class='absolute-panel'>
        <div class='reviewtitle'>    
          <strong>Fun</strong>
        </div>
        .
        .
        .
        <div class='reviewstatsright'>    
            <span class='text-info'>
                <dt>Rate</dt><dd>$50</dd>
            </span>
            <span class='text-info'>
                <dt>Tip</dt><dd>$10</dd>
            </span>
        </div>
    </div><!-- .absolute-panel -->
    <div class='reviewbody'>
        <p>What a great time!</p>
         <cite>-Rodger</cite>
    </div>
</div> 
```

对于 CSS：

```
.absolute-panel {
    border: 1px solid blue;
    width: 800px;
    height: 150px;
    position: relative;
    left: 0px;
    right: 0px;
} 
```

对于`.resultsbox`，取出绝对定位...

```
.resultsbox {
    width: 800px;
    margin-left: auto;
    margin-right: auto;
    border-top-style: solid;
    border-top-width: 2px;
    border-top-color: #DDD;
    border-radius: 5px;
    border-left: 1px solid red;
} 
```

对于`.reviewbody`取出绝对定位...并添加 40px 底部填充（如果需要）：

```
.reviewbody {
    margin-top: 20px;
    margin-bottom: 20px;
    padding-bottom: 40px;
    border: 1px dotted red;
} 
```

**评论**
我添加了一些彩色边框来跟踪事物，这些可以被删除。

诀窍是定义一个固定高度的面板来添加所有精确定位的元素。

在此之后，添加具有可变高度的评论正文。

小提琴：http: [//jsfiddle.net/audetwebdesign/8mRVp/](http://jsfiddle.net/audetwebdesign/8mRVp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:41:02.023

这个页面上有很多事情你可以做不同的事情，而且要简单得多，但这是一个不同的对话。

我认为您真正要问的是明确的修复选项。最基本的只是添加溢出：隐藏到父元素。

我用于清除修复的另一个选项是： http: [//nicolasgallagher.com/micro-clearfix-hack/](http://nicolasgallagher.com/micro-clearfix-hack/)

不同之处在于，如果您有任何内容溢出，overflow:hidden 将隐藏它，而 micro clearfix 将显示它。

# c# - c#中List时如何判断对象的类型 is given? my method look something like: Boolean actions(List input) { if (input.element is String) {...} else if (input.element is PSObject) {...} } 问问题 问问题 2013-03-15T19:23:59.647 10390 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. my method look something like: Boolean actions(List input) { if (input.element is String) {...} else if (input.element is PSObject) {...} } I tried input.getType().GetGenericArguments()[0] == new PSObject().GetType()) but input.getType().GetGenericArguments()[0] says it is object type... Check whether the app.config file exists or not in console app C# I create a console app in C#. I want to use an app.config file in my project. My problem is: before reading from app.config, I want to make sure that the app.config exists. How to check it? Please help me! Thanks all c#listtypescovariancecontravariance 4 3 回答 3 This answer is useful 7 也许您的问题只是您试图用来input.element从列表中取出一个项目。这不是检查列表中元素类型的正确方法。 仅使用它来测试第一项： bool actions(List input) { var element = input.FirstOrDefault(); if (element is String) {...} else if (element is PSObject) {...} } 或者这样单独测试每个项目： bool actions(List input) { foreach (var element in input) { if (element is String) {...} else if (element is PSObject) {...} } } 或者，如果您想确保列表的所有元素都属于给定类型，您可以使用泛型： bool actions<t>(List <t>input) { if (typeof(String).IsAssignableFrom(typeof(T)) {...} else if (typeof(PSObject).IsAssignableFrom(typeof(T)) {...} } 于 2013-03-15T19:26:54.320 回答 This answer is useful 2 You have to get the type of the instances in the list, not the type of the list. Boolean actions(List input) { foreach (object o in input) { if (o is String) { ... } else if (o is PSObject) { ... } } } Alternatively, if you know that all the objects in the list are of the same type, you could check the type of the first item (input[0]) and then do the same thing to all items depending on that. 于 2013-03-15T19:28:32.640 回答 This answer is useful 2 but input.getType().GetGenericArguments()[0] says it is object type... Well, as List <t>is invariant, the generic argument of the list passed in will always match the generic argument of the method parameter, exactly. In this case, the list will always be a list of objects. Now, each item in the list may not be an object (as it's most derived type), it could be a string, or a PSObject. However you can't assume that all of them are any type other than object. So you could check if there is a more derived type for a particular item in the list, but not of the list as a whole. So it's more likely that you'll have to refactor the code to do: Boolean actions(List input) { foreach(object element in input) { if (element is String) {...} else if (element is PSObject) {...} } } If it's important for all of the items to be of the same type then you can use generics: Boolean actions<t>(List <t>input) { if (typeof(T) == typeof(string)) {...} if(typeof(T) == typeof(PSObject)) {...} } 于 2013-03-15T19:29:37.083 回答 Related 3 ruby-on-rails - ActiveModel::ForbiddenAttributesError in PasswordResetsController#update 1 node.js - 将 Unity3d 与 Node.js 连接起来 2 c# - 如何解析布尔表达式并将其加载到类中？ 1 python - 字符串“赵孟俯”的gbk编码 1 xml - XML，find() 方法在布尔上下文中失败 1 java - org.hibernate.LazyInitializationException：无法初始化代理 - 请快速不需要会话帮助 0 python - apache 上的 web.py 在非套接字上提供了 Socket 操作 2 c++ - C++ 运算符 -> 0 solr4 - Solr edismax 具有多个函数查询和请求中的增强查询 1 android - 从资产文件夹加载时，电子邮件中的图像预览意图不显示 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15440546
> 
> 赞同：1
> 
> 时间：
> 
> 标签：c#, list, types, covariance, contravariance

my method look something like:

```
Boolean actions(List<Object> input)
{
    if (input.element is String)
    {...}
    else if (input.element is PSObject)
    {...}
} 
```

I tried `input.getType().GetGenericArguments()[0] == new PSObject().GetType())`

but `input.getType().GetGenericArguments()[0]` says it is object type...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T19:26:54.320

也许您的问题只是您试图用来`input.element`从列表中取出一个项目。这不是检查列表中元素类型的正确方法。

仅使用它来测试第一项：

```
bool actions(List<Object> input)
{
    var element = input.FirstOrDefault();
    if (element is String)
    {...}
    else if (element is PSObject)
    {...}
} 
```

或者这样单独测试每个项目：

```
bool actions(List<Object> input)
{
    foreach (var element in input)
    {
        if (element is String)
        {...}
        else if (element is PSObject)
        {...}
    }
} 
```

或者，如果您想确保列表的所有元素都属于给定类型，您可以使用泛型：

```
bool actions<T>(List<T> input)
{
    if (typeof(String).IsAssignableFrom(typeof(T))
    {...}
    else if (typeof(PSObject).IsAssignableFrom(typeof(T))
    {...}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T19:28:32.640

You have to get the type of the instances in the list, not the type of the list.

```
Boolean actions(List<Object> input) {
  foreach (object o in input) {
    if (o is String) {
      ...
    } else if (o is PSObject) {
      ...
    }
  }
} 
```

Alternatively, if you know that all the objects in the list are of the same type, you could check the type of the first item (`input[0]`) and then do the same thing to all items depending on that.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T19:29:37.083

> but input.getType().GetGenericArguments()[0] says it is object type...

Well, as `List<T>` is invariant, the generic argument of the list passed in will **always** match the generic argument of the method parameter, exactly.

In this case, the list will **always** be a list of `object`s.

Now, each item in the list may not be an `object` (as it's most derived type), it could be a string, or a `PSObject`. However you can't assume that *all* of them are any type other than `object`.

So you could check if there is a more derived type for a particular item in the list, but not of the list as a whole.

So it's more likely that you'll have to refactor the code to do:

```
Boolean actions(List<Object> input)
{
    foreach(object element in input)
    {
        if (element is String)
        {...}
        else if (element is PSObject)
        {...}
    }
} 
```

If it's important for all of the items to be of the same type then you can use generics:

```
Boolean actions<T>(List<T> input)
{
    if (typeof(T) == typeof(string))
    {...}
    if(typeof(T) == typeof(PSObject))
    {...}
} 
```</t></t></t></t></t>

# c# - 检查控制台应用程序 C# 中是否存在 app.config 文件

> ID：15440547
> 
> 赞同：0
> 
> 时间：2013-03-15T19:24:00.193
> 
> 标签：c#, console, app-config

我在 C# 中创建了一个控制台应用程序。我想`app.config`在我的项目中使用一个文件。

我的问题是：在阅读之前`app.config`，我想确保`app.config`存在。如何检查？

请帮我！谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:31:55.477

虽然您可以简单地使用`if( File.Exists( Assembly.GetEntryAssembly().Location + ".config" ) )`它，但它有点笨拙和脆弱，如果配置文件位于另一个目录中，它就不起作用。

我认为最好的方法是尝试显式加载配置并捕获异常（因为缺少`.ConfigurationExists`属性），如下所示：

```
try {
    ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
} catch(ConfigurationErrorsException) {
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:28:40.317

In your get and set methods of your app.config property (or if you have multiple properties) you can make sure if the file exists first by calling File.Exists(path). If it doesn't, you can throw an exception if you want.

[http://msdn.microsoft.com/en-us/library/system.io.file.exists(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/system.io.file.exists(v=vs.85).aspx)

# asp.net - 非数组属性的 JSON 反序列化

> ID：15440550
> 
> 赞同：0
> 
> 时间：2013-03-15T19:24:18.100
> 
> 标签：asp.net, vb.net, json, deserialization

我是 JSON 反序列化的新手，需要帮助解决我遇到的问题。当 JSON 中的所有类都表示为数组时，我创建了可以工作的类。但是，如果您仔细查看我需要使用的 JSON，您会注意到“属性”成员实际上是成员的成员，而不是数组。这似乎是我的代码失败的地方，我认为我在类定义中为产品使用了错误的“类型”。

**以下是 JSON 的示例：**

```
{
 "kind": "shopping#products",
 "items": 
   [{
   "kind": "shopping#product",
   "id": "tag:google.com,2010:shopping/products/8040/8382012077897342942",
   "product": {
    "googleId": "8382012077897342942",
    "title": "LEGO Star Wars™: Jabba's Palace™ (9516)",
    "description": "Rescue Han Solo from Jabba the Hutt's desert palace!",
    "inventories": [
     {
      "price": 119.99,
      "shipping": 12.95,
      "currency": "USD"
     }
    ]
   }
  }
 ]
} 
```

**这是我的代码：**

```
Imports System.Web.Script.Serialization

Public Class g_JSON
    Public Property items As List(Of Items)
End Class

Public Class Items
    Public Property product As List(Of product)
    Public Property kind As String
    Public Property id As String
End Class

Public Class product
    Public Property googleid As String
    Public Property title As String
    Public Inventories As List(Of inventories)
End Class

Public Class inventories
    Public Property price As Double
    Public Property shipping As Double
End Class

Partial Class JSON_Test
    Inherits System.Web.UI.Page

    Protected Sub getbutton_Click(sender As Object, e As System.EventArgs) Handles getbutton.Click

        ' 1\. Get JSON string
        Dim google_json_string As String
        google_json_string = json_text.Text

        '2\. Deserialize JSON
        Dim jss As New JavaScriptSerializer
        Dim ds_results = jss.Deserialize(Of g_JSON)(google_json_string)
        result1.Text = ds_results.items(0).id
        result2.Text = ds_results.items(0).kind
        result3.Text = ds_results.items(0).product(0).title 'errors here

    End Sub
End Class 
```

当我尝试获取 product(0) 的计数时，它应该返回 1 时什么也不返回。如果我尝试返回 product(0).title，则会收到以下错误：

*指数超出范围。必须是非负数且小于集合的大小。参数名称：索引*

该消息暗示没有为产品返回任何内容。非常感谢任何提示或帮助！

PS 顺便说一句，当我将 JSON 更改为包含产品作为参数 [] 时，如下所示，它可以工作。

```
{
 "kind": "shopping#products",
 "items": 
   [{
   "kind": "shopping#product",
   "id": "tag:google.com,2010:shopping/products/8040/8382012077897342942",
   "product": [{
    "googleId": "8382012077897342942",
    "title": "LEGO Star Wars™: Jabba's Palace™ (9516)",
    "description": "Rescue Han Solo from Jabba the Hutt's desert palace!",
    "inventories": [
     {
      "price": 119.99,
      "shipping": 12.95,
      "currency": "USD"
     }
    ]
   }
  ]
 }
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:13:56.160

行。我得到它。

所以在这种情况下它真的很容易。问题顶部的 json 示例表明每件商品只能有一个产品。您的类结构定义了产品列表 - 因此反序列化失败。将列表更改为单个产品。

如果您仍有问题 - 请在此处发表评论，我们可以通过聊天查看。

对于 SO 来说，这确实是一个过于本地化的场景。

# java - Use Mapped Diagnostic Context (MDC) for passing colum values to log4j prepared statement

> ID：15440551
> 
> 赞同：1
> 
> 时间：2013-03-15T19:24:20.487
> 
> 标签：java, logging, log4j, mdc

Is it safe to Use MDC to pass column values and xmls dynamically to a preparedstatement in log4j.xml. If yes, then how and when can i clear it to avoid memory leaks.

FYI - many threads are going to use my log4j simultaneously.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T13:32:25.490

如果您对安全性的关注是并发性，那么我会说您的信息是完全安全的。作为参考，您可以查看[logback 网站](http://logback.qos.ch/manual/mdc.html)

`A copy of the mapped diagnostic context can not always be inherited by worker threads from the initiating thread. This is the case when java.util.concurrent.Executors is used for thread management. For instance, newCachedThreadPool method creates a ThreadPoolExecutor and like other thread pooling code, it has intricate thread creation logic.`

我们在处理请求时将值放在 MDC 中（通常在 J2EE 应用程序的情况下放在 ServletFilter 中），并且我们总是在请求处理即将完成时删除这些值。

# javascript - 阻止用户提交

> ID：15440553
> 
> 赞同：0
> 
> 时间：2013-03-15T19:24:34.040
> 
> 标签：javascript

我想阻止用户在表单中提交数据，但是当我用 JavaScript 测试它时它没有返回 true。

这是提交按钮：

```
 input type="submit" value="S'inscrire" name="inscrire" onsubmit="return Verifier(this.form);"> 
```

这是JS测试功能的代码：

```
 function Verifier()
        {
            var mdp1 = document.form.mdp.value,
                        mdp2 = document.form.confirmer.value,
                        email = document.form.email.value,
                        pseudo = document.form.pseudo.value;

            var testMdpIdentique = (function() {

                    if(mdp1 == mdp2) return true;
                    else return false;
                 })();

            if(!testMdpIdentique || mdp1 == "" || mdp2 == "" || email == "" || pseudo== "" )
            {
                alert ('Il faut remplir tous les champs');
                return false;
            }
            return true;

        } 
```

问题是即使测试无效，它也在提交信息，我尝试在 Valider 函数中尝试一条警报消息，但没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:27:55.667

在普通的 Javascript 中

您可以使用函数的返回值来阻止表单提交

```
<form name="myForm" onsubmit="return validateMyForm();"> 
```

和功能一样

```
<script type="text/javascript">
function validateMyForm()
{
  if(check if your conditions are not satisfying)
  { 
    alert("validation failed false");
    returnToPreviousPage();
    return false;
  }

  alert("validations passed");
  return true;
}
</script> 
```

在 jQuery 中

```
$('#form').submit(function (evt) {
    evt.preventDefault();
    window.history.back();
}); 
```

在道场

```
dojo.connect(form, "onsubmit", function(evt) {
    evt.preventDefault();
    window.history.back();
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T19:37:50.810

我认为下面的代码在语法上是不正确的。

```
var testMdpIdentique = (function() {

                if(mdp1 == mdp2) return true;
                else return false;
             })(); 
```

用。。。来代替

```
var testMdpIdentique = function() {

                if(mdp1 == mdp2) return true;
                else return false;
             }; 
```

此外，您不需要在 onClick 事件中传递 (this.form)。一般提交按钮提交表单是你的onClick回调方法中存在语法错误。

# boost - 如何使用 boost 库获得 SAMPLE 标准差？

> ID：15440557
> 
> 赞同：4
> 
> 时间：2013-03-15T19:24:38.163
> 
> 标签：boost, sample, standard-deviation

这是我所做的：

```
accumulator_set<double, stats<tag::variance> > accumulator;
accumulator = for_each(x.begin(), x.end(), accumulator);
double sDeviation = sqrt(variance(accumulator)); 
```

但返回的标准差是总体标准差。我需要样本标准差（除以 n-1）。

Boost能做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-16T15:17:33.530

在取平方根之前，只需将方差乘以 n/(n-1)。请参阅有关数学标准差的[维基百科页面](http://en.wikipedia.org/wiki/Standard_deviation#Rapid_calculation_methods)。请记住，虽然样本方差是无偏的，但如果您不知道所讨论的分布，则在取平方根后样本标准差总是会略有偏差。

# java - 从 Spring MVC XML 文件迁移到 javaconfig。我真的对我的数据库 XML 文件感到迷茫

> ID：15440559
> 
> 赞同：6
> 
> 时间：2013-03-15T19:24:46.573
> 
> 标签：java, spring, hibernate, spring-mvc

我从 Spring MVC XML 文件转移到 javaconfig。我真的对我的数据库 XML 文件感到迷茫。我不知道如何让 Hibernate4 工作和我的 JBoss JNDI 数据源工作。有人可以告诉我如何使 javaconfig 类像这个 XML 一样工作。

这是我的database.xml：

```
?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xmlns:jee="http://www.springframework.org/schema/jee"

    xsi:schemaLocation="http://www.springframework.org/schema/beans
                            http://www.springframework.org/schema/beans/spring-beans.xsd
                            http://www.springframework.org/schema/context
                            http://www.springframework.org/schema/context/spring-context-3.1.xsd
                            http://www.springframework.org/schema/tx
                            http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
                            http://www.springframework.org/schema/jdbc
                            http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
                            http://www.springframework.org/schema/jee
                            http://www.springframework.org/schema/jee/spring-jee-3.0.xsd">

    <context:property-placeholder location="classpath:app.properties" />

    <context:component-scan base-package="org.uftwf" />

    <tx:annotation-driven transaction-manager="hibernateTransactionManager" />

    <jee:jndi-lookup id="dataSource" jndi-name="java:jboss/datasources/mySQLDB"
        expected-type="javax.sql.DataSource" />

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>org.uftwf.inquiry.model.MemberInquiryInformation</value>

            </list>
        </property>

        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${hibernate.dialect}</prop>
                <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
                <prop key="hibernate.use_sql_comments">${hibernate.use_sql_comments}</prop>
                <prop key="format_sql">${format_sql}</prop>
            </props>
        </property>
    </bean>

    <bean id="hibernateTransactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>
</beans> 
```

这是我的 javaconfig 类：

```
@Configuration
@EnableWebMvc
@ComponentScan(basePackages= {"org.uftwf.inquiry"})
@ImportResource("/WEB-INF/spring/root-config.xml")
public class WebMVCConfig extends WebMvcConfigurerAdapter {

    private static final String MESSAGE_SOURCE = "/WEB-INF/classes/messages";

    private static final Logger logger = LoggerFactory.getLogger(WebMVCConfig.class);

    @Value("${jdbc.driverClassName}")
    private String driverClassName;

    @Value("${jdbc.url}")
    private String url;

    @Value("${jdbc.username}")
    private String username;

    @Value("${jdbc.password}")
    private String password;

    @Value("${hibernate.dialect}")
    private String hibernateDialect;

    @Value("${hibernate.show_sql}")
    private String hibernateShowSql;

    @Value("${hibernate.hbm2ddl.auto}")
    private String hibernateHbm2ddlAuto;

    @Bean
    public PropertyPlaceholderConfigurer getPropertyPlaceholderConfigurer()
    {
        PropertyPlaceholderConfigurer ppc = new PropertyPlaceholderConfigurer();
        ppc.setLocation(new ClassPathResource("application.properties"));
        ppc.setIgnoreUnresolvablePlaceholders(true);
        return ppc;
    }

    @Bean()
    public DataSource getDataSource()
    {
        DriverManagerDataSource ds = new DriverManagerDataSource();
        ds.setDriverClassName(driverClassName);
        ds.setUrl(url);
        ds.setUsername(username);
        ds.setPassword(password);
        return ds;
    }

    @Bean
    public LocalSessionFactoryBean sessionFactory()
    {

        LocalSessionFactoryBean factoryBean = new LocalSessionFactoryBean();
        factoryBean.setDataSource(getDataSource());
        factoryBean.setHibernateProperties(getHibernateProperties());
        factoryBean.setPackagesToScan("org.uftwf.inquiry.model");

        return factoryBean;
    }

    @Bean
    public Properties getHibernateProperties()
    {
        Properties hibernateProperties = new Properties();

        hibernateProperties.setProperty("hibernate.dialect",  hibernateDialect);
        //hibernateProperties.setProperty("hibernate.show_sql", "true");
        //hibernateProperties.setProperty("hibernate.format_sql", "true");
        hibernateProperties.setProperty("hibernate.hbm2ddl.auto", "update");
        hibernateProperties.setProperty("javax.persistence.validation.mode", "none");

        //Audit History flags
        hibernateProperties.setProperty("org.hibernate.envers.store_data_at_delete", "true");
        hibernateProperties.setProperty("org.hibernate.envers.global_with_modified_flag", "true");

        return hibernateProperties;
    }

    @Bean
    @Autowired
    public HibernateTransactionManager transactionManager(SessionFactory sessionFactory)
    {
        HibernateTransactionManager htm = new HibernateTransactionManager();
        htm.setSessionFactory(sessionFactory);
        return htm;
    }

    @Bean
    public  ViewResolver resolver() {
        UrlBasedViewResolver url = new UrlBasedViewResolver();
        url.setPrefix("/WEB-INF/view/");
        url.setViewClass(JstlView.class);
        url.setSuffix(".jsp");
        return url;
    }

    @Bean(name = "messageSource")
    public MessageSource configureMessageSource() {
        logger.debug("setting up message source");
        ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();
        messageSource.setBasename(MESSAGE_SOURCE);
        messageSource.setCacheSeconds(5);
        messageSource.setDefaultEncoding("UTF-8");
        return messageSource;
    }

    @Bean
    public LocaleResolver localeResolver() {
        SessionLocaleResolver lr = new SessionLocaleResolver();
        lr.setDefaultLocale(Locale.ENGLISH);
        return lr;
    }

    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        logger.debug("setting up resource handlers");
        registry.addResourceHandler("/resources/").addResourceLocations("/resources/**");
    }

    @Override
    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
        logger.debug("configureDefaultServletHandling");
        configurer.enable();
    }

    @Override
    public void addInterceptors(final InterceptorRegistry registry) {
        registry.addInterceptor(new LocaleChangeInterceptor());
    }

    @Bean
    public SimpleMappingExceptionResolver simpleMappingExceptionResolver() {
        SimpleMappingExceptionResolver b = new SimpleMappingExceptionResolver();

        Properties mappings = new Properties();
        mappings.put("org.springframework.web.servlet.PageNotFound", "p404");
        mappings.put("org.springframework.dao.DataAccessException", "dataAccessFailure");
        mappings.put("org.springframework.transaction.TransactionException", "dataAccessFailure");
        b.setExceptionMappings(mappings);
        return b;
    }

    @Bean
    public RequestTrackerConfig requestTrackerConfig()
    {
        RequestTrackerConfig tr = new RequestTrackerConfig();
        tr.setPassword("Waiting#$");
        tr.setUrl("https://uftwfrt01-dev.uftmasterad.org/REST/1.0");
        tr.setUser("root");

        return tr;
    }

} 
```

我认为我缺少的部分如下，但请仔细检查我的课程

```
<context:property-placeholder location="classpath:app.properties" />

    <context:component-scan base-package="org.uftwf" />

    <tx:annotation-driven transaction-manager="hibernateTransactionManager" />

    <jee:jndi-lookup id="dataSource" jndi-name="java:jboss/datasources/mySQLDB"
        expected-type="javax.sql.DataSource" /> 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-15T19:39:04.083

为了

```
<tx:annotation-driven transaction-manager="hibernateTransactionManager" /> 
```

`WebMVCConfig`用_

```
@EnableTransactionManagement 
```

为了

```
<context:component-scan base-package="org.uftwf" /> 
```

将包字符串添加到您的`@ComponentScan`字段`basePackages`

为了

```
<context:property-placeholder location="classpath:app.properties" /> 
```

用注释你的配置类

```
@PropertySource(value = "classpath:app.properties") 
```

并制定你的`PropertyPlaceholderConfigurer` `@Bean`方法`static`。

为了

```
 <jee:jndi-lookup id="dataSource" jndi-name="java:jboss/datasources/mySQLDB"
    expected-type="javax.sql.DataSource" /> 
```

[我认为你可以做到](http://www.swiftmind.com/de/2011/06/22/spring-3-1-m2-testing-with-configuration-classes-and-profiles/)

```
@Bean
public DataSource dataSource() throws Exception {
    Context ctx = new InitialContext();
    return (DataSource) ctx.lookup("java:jboss/datasources/mySQLDB");
} 
```

无需自动装配会话工厂，只需调用您的`@Bean`方法

```
@Bean
public HibernateTransactionManager transactionManager()
{
    HibernateTransactionManager htm = new HibernateTransactionManager();
    htm.setSessionFactory(sessionFactory());
    return htm;
} 
```

# macos - 使用 awk 按列拆分 CSV 文件

> ID：15440560
> 
> 赞同：3
> 
> 时间：2013-03-15T19:24:49.887
> 
> 标签：macos, bash, csv, awk

我有一个需要按日期拆分的 CSV 文件。我尝试使用下面列出的 AWK 代码（在[其他地方](https://stackoverflow.com/a/9590374/297780)找到）。

`awk -F"," 'NR>1 {print $0 >> ($1 ".csv"); close($1 ".csv")}' file.csv`

我已经尝试在 OS X 和 Debian 的终端中运行它。在这两种情况下都没有错误消息（因此代码似乎运行正常），但也没有输出。没有输出文件，命令行也没有响应。

我的输入文件有大约 6k 行数据，如下所示：

```
date,source,count,cost
2013-01-01,by,36,0
2013-01-01,by,42,1.37
2013-01-02,by,7,0.12
2013-01-03,by,11,4.62 
```

我想要的是创建一个新的 CSV 文件，其中包含特定日期的所有行。我在看什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T20:07:59.253

我已经解决了这个问题。按照[这个线程](https://stackoverflow.com/a/2652526/297780)的逻辑，我用命令检查了我的行尾，`file`并了解到该文件具有旧式 Mac 行终止符。我用 Text Wrangler 打开了我的输入 CSV 文件，并用 Unix 风格的行结尾再次保存了它。一旦我这样做了，`awk`上面列出的命令就会按预期工作。创建 63 个按日期划分的新 CSV 文件大约需要 5 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-28T15:21:27.793

使用“;”检索日志文件中的信息 我使用的分隔符：

```
grep "END SESSION" filename.log | cut -d";" -f2 
```

在哪里

```
 -d, --delimiter=DELIM   use DELIM instead of TAB for field delimiter
  -f, --fields=LIST       select only these fields;  also print any line
                          that contains no delimiter character, unless
                          the -s option is specified 
```

# java - 信封中带有标题和正文的 Spring Web 服务

> ID：15440565
> 
> 赞同：1
> 
> 时间：2013-03-15T19:25:14.340
> 
> 标签：java, spring, soap, wsdl, spring-ws

我们正在创建一个来自 WSDL 的 web 服务，soap 消息在请求和响应中都有标头和正文。您如何设置它以与 Spring WS 一起使用？我找不到任何例子？？？？

**在 WSDL 中**

```
<wsdl11:message name="createCourseSectionRequest">
<wsdl11:part name="Parameters" element="tns:createCourseSectionRequest"/>
<wsdl11:part name="HeaderInfoParameters" element="tns:imsx_syncRequestHeaderInfo"/>
</wsdl11:message>
<wsdl11:message name="createCourseSectionResponse">
<wsdl11:part name="Response" element="tns:createCourseSectionResponse"/>
<wsdl11:part name="HeaderInfoResponse" element="tns:imsx_syncResponseHeaderInfo"/>
</wsdl11:message> 
```

**端点**

```
@PayloadRoot(localPart="CreateCourseSectionRequest", namespace="")
    @ResponsePayload
    public CreateCourseSectionResponse createCourseSection(CreateCourseSectionRequest req) {

        //TODO 
        return null;
    } 
```

**例子**

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ims="http://www.imsglobal.org/services/lis/cmsv1p0/wsdl11/sync/imscms_v1p0">
   <soapenv:Header>
      <ims:imsx_syncRequestHeaderInfo>
         <ims:imsx_version>?</ims:imsx_version>
         <ims:imsx_messageIdentifier>?</ims:imsx_messageIdentifier>
         <!--Optional:-->
         <ims:imsx_sendingAgentIdentifier>?</ims:imsx_sendingAgentIdentifier>
      </ims:imsx_syncRequestHeaderInfo>
   </soapenv:Header>
   <soapenv:Body>
      .....
   </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:38:04.667

这是我想出的解决方案。它可以工作，但我希望 Soap 消息的标题部分是强类型的。.NET 会为您解决这个问题，而在 Java 中，您似乎需要做更多的工作才能为标头复制强类型对象。至少我可以使用 MessageContext 访问信封的请求/响应标头。

```
@PayloadRoot(localPart="readCourseSectionRequest", namespace="http://www.imsglobal.org/services/lis/cmsv1p0/wsdl11/sync/imscms_v1p0")
    @ResponsePayload
    public ReadCourseSectionResponse readCourseSection(@RequestPayload ReadCourseSectionRequest parameters, MessageContext messageContext) {

        //SaajSoapMessage response = (SaajSoapMessage) messageContext.getResponse();
        //SoapHeader header = response.getSoapHeader();
        //header.addHeaderElement(new QName("http://www.w3.org/2005/08/addressing", "MessageID", parameters.getSourcedId()));

        return new ReadCourseSectionResponse();
    } 
```

# java - 如何将 BufferedImage 数据直接传递给 OpenCL？

> ID：15440566
> 
> 赞同：2
> 
> 时间：2013-03-15T19:25:15.870
> 
> 标签：java, arrays, graphics, opencl

我正在尝试使用 JavaCL OpenCL 绑定库在我的图形渲染引擎中利用 OpenCL 内核。

我遇到的问题是我需要将 BufferedImage 像素数据数组直接传递到 OpenCL 内核中，以便对其进行修改。复制到本机指针对象然后在计算后重新复制可能会首先消除使用 OpenCL 的性能优势，所以我真的试图避免这种情况。

我希望使用 IntBuffer 直接修改像素数据，但分配的缓冲区必须是直接的，如果您使用这是不可能的`wrap(int[])`（有关更多信息，请参阅 BridJ[文档](http://nativelibs4java.sourceforge.net/bridj/api/stable/org/bridj/Pointer.html)）。

所以现在我被困在如何使这项工作上。我正在寻求任何建议的解决方案或解决方法，无论是直接使用数组还是仅仅使用带有图像、指针等的不同 OpenCL 功能。

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T00:26:24.200

您可以尝试使用 java.nio.ByteBuffer。我相信你可以做这样的事情：

```
byte[] temp = new byte[54]; 
```

`ByteBuffer buffer = ByteBuffer.allocateDirect(54);`

接着：`buffer.putInt(int someInt[]);`

# android - 使用对类成员的严格访问和模块化代码使得逆向工程 APK 变得更加困难

> ID：15440567
> 
> 赞同：1
> 
> 时间：2013-03-15T19:25:17.090
> 
> 标签：android, security, coding-style, decompiler

使用私有方法和私有字段是否会使某人更难使用常见的反编译器对代码进行逆向工程。

就像这里提到的一样在 [APK 上反编译 .smali 文件](https://stackoverflow.com/questions/5582824/decompile-smali-files-on-an-apk)

或者它没有任何效果，因为这些反编译器允许人们阅读类中的每一行混淆代码。

如何在类和方法上使用 final 以避免类被扩展和方法被覆盖，当我读到反编译器无法生成反编译的工作代码时，它们是否有帮助。或者它是否无关紧要，因为删除反编译类中的最终属性很简单。

使用许多小的模块化类是否会使人们更难反编译和破解代码，或者使用具有长方法的大类会使阅读混淆代码变得更加困难。

如果这些问题被视为菜鸟问题，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:53:59.973

> 或者它没有任何效果，因为这些反编译器允许人们阅读类中的每一行混淆代码。

反编译器反编译所有代码，包括私有方法。

> 如何在类和方法上使用 final 以避免类被扩展和方法被覆盖，当我读到反编译器无法生成反编译的工作代码时，它们是否有帮助。

更改需要按 Delete 键五次（每次`final`）。对于大多数人来说，这不会是一个重大挑战。

> 使用许多小的模块化类是否会使人们更难反编译和破解代码，或者使用具有长方法的大类会使阅读混淆代码变得更加困难。

不是物质上的，恕我直言。

FWIW，我完全同意西蒙的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:51:47.673

没有。混淆可以提供帮助，但它真正做的只是为攻击者增加了额外的障碍。不存在通过默默无闻的安全性。Arxan、Via Forensics 等公司创建了一些昂贵的工具。

# perl - 我们如何知道 Perl 核心模块何时被弃用？

> ID：15440578
> 
> 赞同：3
> 
> 时间：2013-03-15T19:25:57.910
> 
> 标签：perl, module, deprecated

给定一个过去作为 Perl 核心的一部分被支持的特定模块，我如何判断我想要升级到的 Perl 版本是否支持它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T19:25:57.910

[perlpolicy](http://perldoc.perl.org/perlpolicy.html#BACKWARD-COMPATIBILITY-AND-DEPRECATION)说

> 从 Perl 5.12 开始，不推荐使用的特性和模块会在用户使用它们时发出警告。

有提供此警告的[弃用模块。](https://metacpan.org/module/deprecate)一个模块至少在一个周期内被弃用，然后才被实际删除。如果您跳过几个 perl 版本，这并没有多大帮助。

[Module::CoreList 也](http://www.metacpan.org/module/Module::CoreList)跟踪不推荐使用的模块。

回退是读取*perldelta*页面以查找他们正在使用的版本和他们想要升级的版本之间的更改。

# string - Bash 脚本：查找和删除超过 7 天的文件夹，文件不包含特定字符串

> ID：15440582
> 
> 赞同：0
> 
> 时间：2013-03-15T19:26:02.797
> 
> 标签：string, bash, find

我需要提出一个 Bash 脚本，如果它们满足以下两个条件，它将删除目录中的任何文件夹：

1.  超过 7 天。
2.  其中有一个不包含特定字符串的 xml 文件。

我知道此命令适用于删除目录中超过*n*天的所有文件夹：

```
find ./ -type d -mtime +7 -exec rm -rf {}\; 
```

此命令会删除所有名为 kittens.xml 且没有字符串的文件`<claws>18</claws>`：

```
find ./* -name "kittens.xml" -type f\! -exec grep -L "<claws>18</claws>" {} \;| xargs rm -fv 
```

但是如何删除所有超过一周*且不*包含该字符串的文件夹？

仅供参考，我以前对 Bash 的经验很少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:28:50.243

```
for dir in `find /WHERE/ARE/THOSE/DIRS -type d -mtime +7 2>/dev/null` ; do
  fgrep '<claws>18</claws>' "${dir}/kittens.xml" &>/dev/null || rm -fv "${dir}"
done 
```

它遍历找到的目录，然后通过 fgrep 检查文件中所需的字符串，如果未找到（例如，不在文件中或文件丢失），则删除该目录。

注意：它可能会造成损坏，所以在运行之前请三思。我会先像这样运行它，这样它会显示它将删除的内容......

```
 fgrep '<claws>18</claws>' "${dir}/kittens.xml" &>/dev/null || echo "rm -fv ${dir}" 
```

此外，如果有子目录，它可能会导致问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-26T08:58:14.207

尝试使用 grep`v`或`--invert-match`标签：

```
find ./* -name "kittens.xml" -type f\! -exec grep -L -v "<claws>18</claws>" {} \;| xargs rm -fv 
```

您可以通过在终端中使用它来找到有关*grep invert的更多信息：*

```
grep --help | grep invert 
```

# java - 为什么 Java 使用修改后的 UTF-8 而不是 UTF-8？

> ID：15440584
> 
> 赞同：12
> 
> 时间：2013-03-15T19:26:07.833
> 
> 标签：java, unicode, utf-8, java-native-interface

为什么 Java 使用[修改后的 UTF-8](http://en.wikipedia.org/wiki/UTF-8#Modified_UTF-8)而不是标准的 UTF-8 进行对象序列化和 JNI？

一种可能的解释是，修改后的 UTF-8 不能嵌入空字符，因此可以使用对以空字符结尾的字符串进行操作的函数。还有其他原因吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T20:57:55.337

处理补充字符（不处理它们）更快更简单。

Java 将*字符*表示为 16 位`char`，但 unicode 已经发展到包含超过 64K 的字符。所以一些字符，补充字符，必须`char`在 Java 中以 2 s（代理对）编码。

严格的 UTF-8 要求编码器将代理对转换为字符，然后将字符编码为字节。解码器需要将补充字符拆分回代理对。

```
chars -> character -> bytes -> character -> chars 
```

由于两端都是Java，我们可以走一些捷径，直接在`char`关卡上编码

```
char -> bytes -> char 
```

编码器和解码器都不需要担心代理对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:28:41.810

我怀疑这是主要原因。在 C 语言中，必须处理包含嵌入 NUL 的字符串会使事情复杂化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T18:56:54.570

[在Unicode Explained - Page 306](http://books.google.com/books?id=PcWU2yxc8WkC&pg=PA306)中有对 Modified UTF-8 的很好描述，但它没有解释**为什么**决定使用 Modified UTF-8。

Java 自己的文档中也有一个非常详细的解释，说明了对非 BMP Unicode 字符的支持最初是如何添加到 Java[中的：Java 平台中的补充字符](http://www.oracle.com/technetwork/articles/javase/supplementary-142654.html)。但同样，没有解释**为什么**决定使用 Modified UTF-8。

我认为除非您直接询问 Java 架构师，否则您不会找到**原因。**

# jquery - 使用 php/jQuery 的拉链效果，如“zipper google doodle”

> ID：15440585
> 
> 赞同：1
> 
> 时间：2013-03-15T19:26:17.850
> 
> 标签：jquery, zipper

是否可以使用 jquery 而不是 flash 在页面上制作拉链效果？

例如以下但没有闪光灯（并且垂直坐着）： [http ://activeden.net/item/interactive-zipper/92456](http://activeden.net/item/interactive-zipper/92456)

我能做的最好的就是让我的拉链下降，然后两侧打开水平滑动哈哈，但我不太擅长 jQuery 业务哈哈

任何帮助或建议将不胜感激，

我的尝试，

```
$("#openbox").click(function() {

    $("#openbox").stop().delay(0).animate({
        "top": "+=600px"
    }, 600);
    $curtainopen = false;

    $(".leftcurtain").stop().delay(600).animate({
        "left": "-=380px"
    }, 3000);

    $(".rightcurtain").stop().delay(600).animate({
        "right": "-=390px"
    }, 3000);

    $curtainopen = true;

    return false;
}); 
```

CSS

```
#openbox {
    width:38px;
    height:100px;
    background-image:url(images/zip.png);
    position:absolute;
    top:100px;
    left:420px;
    z-index:6
}
.leftcurtain {
    width: 50%;
    height: 100%;
    top: 0px;
    left: 0px;
    position:absolute;
    background-position:right;
    z-index: 5;
    background-image:url(images/frontcurtain-left.jpg);
    background-repeat:no-repeat;
}
.rightcurtain {
    width: 52%;
    height: 100%;
    right: 0px;
    top: 0px;
    position: absolute;
    z-index: 5;
    background-image:url(images/frontcurtain-right.png);
    background-repeat:no-repeat;
}
.rightcurtain img, .leftcurtain img {
    width: 100%;
    height: 100%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:33:48.993

是的...我通常说在 jQuery 中可以在 Flash 中完成的任何事情都是可能的。但是您可能在较旧的浏览器上遇到问题。这是尝试此操作的一种可能方法。

你需要3张图片。

1.  拉链把手和嘴
2.  上滑索的图像
3.  下高空滑索的图像

基本上，您将在 2 个 zip 图像顶部有一个黑色 div，手柄/嘴位于中间。当拉链向左移动时，您需要更改黑色 div 的宽度，并更改与该移动相关的左侧两个拉链图像的位置。将您的溢出设置为图像的容器，然后blamo....您有一个jquery zipper，当您压缩时，它下面的内容会被发现。

# html - CSS Box Shadow 在 iPhone 上不起作用

> ID：15440589
> 
> 赞同：14
> 
> 时间：2013-03-15T19:26:27.737
> 
> 标签：html, css

出于某种原因，我无法在 iPhone 上的 Safari 或 Chrome 上显示 CSS box-shadow。这是代码：

```
input.error {
  box-shadow: 0 0 5px 1px rgba(224, 39, 14, 1);
  -webkit-box-shadow: 0 0 5px 1px rgba(224, 39, 14, 1); 
  -moz-box-shadow: 0 0 5px 1px rgba(224, 39, 14, 1);
} 
```

该代码正在 HTML 输入字段中使用，这会导致任何问题吗？我究竟做错了什么？

在浏览器中显示正常...

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-15T19:29:31.903

如果这是在表单块中，请添加

```
-webkit-appearance: none; 
```

iPhone 会弄乱表格。见[这里](https://stackoverflow.com/questions/10757146/iphone-ios-will-not-display-box-shadow-properly)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T19:30:03.877

尝试添加`-webkit-appearance: none;`iOS 往往会弄乱表单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T19:29:37.890

因为你写错了
试试这个：

```
-webkit-box-shadow: 0 5px 1px rgba(224, 39, 14, 1); 
```

你只需为它写 3 个尺寸

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-25T14:11:38.370

我已经尝试了互联网上列出的所有内容，以静态方式解决此问题。我唯一能做的就是使用 -webkit-box-shadow 样式，但是像这样添加#222：

-webkit-filter: 阴影(0.5px 1px 1px #222);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-31T14:29:41.430

就我而言，我修复了添加所有这些规则：

```
-webkit-appearance: none;
border:0;
border-radius: 1px;
height: 1px; 
```

In particular setting also the `height`.

# udp - ARP 超时。为什么是固定周期？

> ID：15440592
> 
> 赞同：6
> 
> 时间：2013-03-15T19:26:42.513
> 
> 标签：udp, real-time, arp

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T20:10:45.853

[Internet 主机的 RFC1122 要求](http://www.ietf.org/rfc/rfc1122.txt)对此进行了讨论。

```
 2.3.2.1  ARP Cache Validation

        An implementation of the Address Resolution Protocol (ARP)
        [LINK:2] MUST provide a mechanism to flush out-of-date cache
        entries.  If this mechanism involves a timeout, it SHOULD be
        possible to configure the timeout value.

      ...

       DISCUSSION:
             The ARP specification [LINK:2] suggests but does not
             require a timeout mechanism to invalidate cache entries
             when hosts change their Ethernet addresses.  The
             prevalence of proxy ARP (see Section 2.4 of [INTRO:2])
             has significantly increased the likelihood that cache
             entries in hosts will become invalid, and therefore
             some ARP-cache invalidation mechanism is now required
             for hosts.  Even in the absence of proxy ARP, a long-
             period cache timeout is useful in order to
             automatically correct any bad ARP data that might have
             been cached. 
```

网络可以是非常动态的；当旧的租用时间到期时（使当前的 ARP 数据无效），DHCP 服务器可以将相同的 IP 地址分配给不同的计算机，可能存在除非定期发出 ARP 请求，否则永远不会注意到的 IP 冲突等。

它还提供了一种检查主机是否仍在网络上的机制。假设您正在通过 UDP 将视频流式传输到某个 IP 地址 192.168.0.5。如果你永远缓存那台机器的 MAC 地址，即使主机出现故障，你也会继续发送垃圾邮件 UDP 数据包。时不时地执行 ARP 请求将停止流并出现目的地不可达错误，因为没有人响应该 IP 的 MAC。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T22:39:43.020

它起源于对路由协议的不信任，尤其是在非以太网世界（尤其是 MIT 的 CHAOS 网络）。早期“ARPAnauts”之一的 Chris Moon 在原始 ARP RFC 中专门引用了这一点。

当然，您可以通过主动广播您自己的 ARP 公告来防止其他人的 ARP 缓存超时。大多数以太网层将在其缓存中接受无偿的 ARP 响应，而不会尝试将它们与之前发送的 ARP 请求相关联。

# django - 告诉 Django 的模型使用一组外键作为主键

> ID：15440593
> 
> 赞同：0
> 
> 时间：2013-03-15T19:26:53.497
> 
> 标签：django, django-models, foreign-keys, primary-key

我有`Person`s 和`Proposal`s。现在我想将`Person's`投票存储在`Proposals`. 为此，我将创建另一个提供“中间”表的类。目标是将 a`Person`与 a联系起来`Proposal`并关联投票`direction`（upvote 或 downvote）。下面的代码：

```
class Persons(models.Model):
   #code
class Proposal(models.Model):
   #code
class Vote(models.Model):
    """A Person (who) votes up or down (direction) a Proposal (what)."""
    who = models.ForeignKey(Person)
    what = models.ForeignKey(Proposal)
    direction = models.BooleanField()   # true = upvote = vote in favor 
```

我希望投票的 PrimaryKey 是（谁，什么）在一起。相反，Django 创建了一个默认`AUTO-INCREMENTED id`为 PrimaryKey 的表。**如何将 ForeignKey（或一组 ForeignKey）设置为 PrimaryKey？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:28:33.477

Django ORM 不支持复合主键：[https ://code.djangoproject.com/wiki/MultipleColumnPrimaryKeys](https://code.djangoproject.com/wiki/MultipleColumnPrimaryKeys)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-06T05:00:34.073

我也有类似的问题，我能够通过使用 unique_together 元（在你的情况下在类 Vote 下）来解决它。阅读更多关于 unique_together 的信息

[https://docs.djangoproject.com/en/dev/ref/models/options/](https://docs.djangoproject.com/en/dev/ref/models/options/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T19:36:02.643

不幸的是，您可能无法使用**SQLAlchemy**，因为标准 ORM 无法做到这一点。

# php - 引导问题，“文件上传”在模式内不起作用

> ID：15440598
> 
> 赞同：3
> 
> 时间：2013-03-15T19:27:03.623
> 
> 标签：php, javascript, twitter-bootstrap

So, i am using a bootstrap modal, and inside of the modal, i want to use image upload, but when an image is selected, nothing happens, i am asuming it is a javascript issue, the script and the css is included outside of标头中的模态。

[http://jasny.github.com/bootstrap/javascript.html#fileupload](http://jasny.github.com/bootstrap/javascript.html#fileupload)

有什么建议么？我认为这是一个javascript问题

```
<?php 
if (isset($_SESSION['login']) and !empty($_SESSION['login']) and $_SESSION['rank'] == 3) {

echo '
    <!-- Modal -->
    <div id="insert_post_modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
       <div class="modal-header">
       <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
       <h3 id="myModalLabel">Insert Post</h3>
      </div>
      <div class="modal-body">
      <p>

    <form action="insert_post_sql" method="post" enctype="multipart/form-data">

        <table border="0">

<div class="fileupload fileupload-new" data-provides="fileupload">
    <div class="fileupload-new thumbnail" style="width: 200px; height: 150px;"><img src="http://www.placehold.it/200x150/EFEFEF/AAAAAA&text=no+image" />
    </div>
<div class="fileupload-preview fileupload-exists thumbnail" style="max-width: 200px; max-height: 150px; line-height: 20px;">
    </div>
<div>
    <span class="btn btn-file"><span class="fileupload-new">Select image</span>
        <span class="fileupload-exists">Change</span><input type="file" /></span>
        <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
</div>
</div>
          </table>
     </form>

     </p>
     </div>
     <div class="modal-footer">
     <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
     <input type="submit" button class="btn btn-primary" value="Submit Post">
     </div>
   </div>
   </form>
   ';
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:46:17.837

尝试使用**Document Ready 功能**，因为脚本是在模态 HTML 之前加载的

```
 $('document').ready(function(){
        $('#insert_post_modal').on('shown', function(){

           $('.fileupload').fileupload();

        }); 

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:35:38.083

[尝试在显示](http://twitter.github.com/bootstrap/javascript.html#modals)的模式上调用文件上传（即当用户打开它时）：

```
$('#insert_post_modal').on('shown', function(){

   $('.fileupload').fileupload();

}); 
```

不过现在不能测试，对不起

# c# - 在 xaml 中使用自定义 RoutedUICommand 会引发异常

> ID：15440600
> 
> 赞同：6
> 
> 时间：2013-03-15T19:27:09.300
> 
> 标签：c#, wpf, xaml

我已经按照[这篇](http://codeblitz.wordpress.com/2009/03/17/wpf-commands-part-3-custom-routeduicommand/)文章和其他一些文章创建了一个自定义 RoutedUICommand。我正在使用 Infragistics Ribbon，但我认为问题不在于那里。

```
<igRibbon:XamRibbonWindow x:Class="MyRibbonWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
xmlns:igRibbon="http://infragistics.com/Ribbon"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:MyNamespaceTag="clr-namespace:MyNamespace"
xmlns:igWPF="http://schemas.infragistics.com/xaml/wpf" mc:Ignorable="d" 
WindowState="Maximized">    
<igRibbon:XamRibbonWindow.Resources>
<!-- Some DataTempaltes here -->
</igRibbon:XamRibbonWindow.Resources>
<igRibbon:RibbonWindowContentHost x:Name="ribbonWindowContentHost" >
  <igRibbon:RibbonWindowContentHost.Ribbon>
    <igRibbon:XamRibbon x:Name="xamRibbon" Theme="[current]">
      <igRibbon:XamRibbon.ApplicationMenu>
        <igRibbon:ApplicationMenu>
          <igRibbon:ApplicationMenu.FooterToolbar>
            <igRibbon:ApplicationMenuFooterToolbar>
              <igRibbon:ButtonTool Name="appMenuOptions" Caption="Opt_ions"/>
            </igRibbon:ApplicationMenuFooterToolbar>
           </igRibbon:ApplicationMenu.FooterToolbar>
      </igRibbon:ApplicationMenu>
    </igRibbon:XamRibbon.ApplicationMenu>
   </igRibbon:XamRibbon>
  </igRibbon:RibbonWindowContentHost.Ribbon>       
  <ContentControl Content="{Binding MyContent}"
      ContentTemplateSelector="{StaticResource myContentTemplateSelector}" />       
</igRibbon:RibbonWindowContentHost>    
</igRibbon:XamRibbonWindow> 
```

我们需要更改 Infragistics 功能区的外观和感觉，Infragistics 社区的一名团队成员建议添加一种样式。问题是当我们将它添加到功能区的资源部分时，它不起作用。所以我们被迫做以下事情：

```
var resourceDictionary = new ResourceDictionary();
resourceDictionary.Source = new Uri(
    @"/MyNamespace;component/Resources/RibbonResources.xaml", 
    UriKind.RelativeOrAbsolute);
xamRibbon.Resources.MergedDictionaries.Add(resourceDictionary); 
```

这会正确应用功能区中的样式，但在 RibbonResources.xaml 中我们有一个按钮：

```
<Button Name="myButton" 
    Command="MyNamespaceTag:MyCommands.MyCommand" 
    Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}">
    <Image Source="MyImage.png" Width="16" Height="16" />
</Button> 
```

MyCommand 和 MyCommands 类完全按照我提到的文章创建。但是当我运行应用程序时，我收到以下错误：

> XamlParseException：无法从文本 MyNamespace:MyCommands.MyCommand' 创建“命令” InnerException：类型引用找不到名为“{clr-namespace:MyNamespace}MyCommands”的类型。

如果我改用这样的命令：

```
Command="{x:Static MyNamespaceTag:MyCommands.MyCommand}" 
```

我得到以下异常：

> XamlParseException：在“System.Windows.Markup.StaticExtension”上提供值引发了异常。InnerException：类型引用找不到名为“{clr-namespace:MyNamespaces}MyCommands”的类型。

在代码隐藏中，我们像这样绑定命令：

```
CommandBindings.Add(
    new CommandBinding(
        MyCommands.MyCommand, 
        Show, 
        CanShow)); 
```

如果我们将按钮直接放在我们拥有 XamRibbonWindow 的位置，它就可以正常工作。

我对 WPF 还是很陌生，我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:31:15.023

你走在正确的道路上`MyNamespace:MyCommands.MyCommand`。看起来您`MyNamespace`在 xaml 文件中包含“Shell”。在顶部的`igRibbon:XamRibbonWindow`标签中，您应该包含一个`xmlns:MyNamespace=[whatever]`属性，或者将命令从

`MyNamespace:MyCommands.MyCommand`

至

`Shell:MyCommands.MyCommand`.

# ruby-on-rails-3 - ActiveAdmin default_actions 导致路由错误

> ID：15440601
> 
> 赞同：0
> 
> 时间：2013-03-15T19:27:21.113
> 
> 标签：ruby-on-rails-3, activeadmin

我正在尝试创建一个基本的 ActiveAdmin 应用程序来处理 MySQL 表的内容。该视图工作正常，New Store Group 按钮和表单也是如此。但是，当我尝试添加`default_actions`基本 CRUD 时，出现路由错误。知道为什么会这样吗？

我在 app/admin/ 下的注册码：

```
ActiveAdmin.register StoreGroup do
index do                            
  column "Group ID", :GRP_ID                     
  column "Group Name", :GRP_NM        
  column "Location Number", :LOC_NBR           
end                                 

filter :GRP_NM, :label => "Group Name"                       
filter :LOC_NBR, :label => "Location Number"                       

form do |f|                         
  f.inputs "Store Group Details" do       
    f.input :GRP_ID, :label => "Group ID"                  
    f.input :GRP_NM, :label => "Group Name"               
    f.input :LOC_NBR, :label => "Location Number"  
  end                               
  f.actions                         
end                                 
end 
```

这么多工作正常。当我在下面添加`default_actions`时`column "Location Number", :LOC_NBR`，当我导航到页面时出现以下错误：

```
No route matches {:action=>"show", :controller=>"admin/store_groups", :id=>#<StoreGroup GRP_ID: 10, GRP_NM: "Damien", LOC_NBR: "99999">} 
```

这是我数据库中的一个有效对象，并且在 default_actions 不存在时显示得很好。

作为参考，这是我的模型：

```
class StoreGroup < ActiveRecord::Base
  establish_connection "zeus_#{Rails.env}"
  set_table_name "str_grp"

# Setup accessible (or protected) attributes for your model
  attr_accessible :GRP_ID, :GRP_NM, :LOC_NBR, :email
end 
```

我正在运行 Ruby 版本 1.9.3p385 和 Rails 3.2.12。

谢谢你。

# sql - SQL 查询运行缓慢

> ID：15440604
> 
> 赞同：-1
> 
> 时间：2013-03-15T19:27:35.333
> 
> 标签：sql

我得到了这个查询，但它真的很慢。我是 SQL 新手，因此我们将不胜感激任何有关 Tuning 的帮助。

```
SELECT 
    REPLACE(LoweredUserName,'@domain.com','') as Name, 
    COUNT(LoweredUserName) as Numb
FROM 
    aspnet_Users 
JOIN 
    WarrantyRegistration ON CHARINDEX('Added by ' + aspnet_Users.LoweredUserName, 
WarrantyRegistration.Comment) > 0
GROUP BY
    aspnet_Users.LoweredUserName 
ORDER BY
    LoweredUserName ASC 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:36:43.520

如果`WarrantyRegistration`表有添加注册的用户的 id，您应该加入这些 ID 而不是进行`CHARINDEX()`加入。如果您不能进行外键连接，您应该认真考虑修改您的架构，以便在可能的情况下这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:31:54.163

您正在执行`aspnet_Users`* 和 *的 CROSS JOIN `WarrantyRegistration`，即使这可能不明显，因为必须（再次）搜索每个 aspnet_Users 记录的每个 WarrantyRegistration 记录。

你能在`WarrantyRegistration.Comment`* 上创建一个索引来支持这个查询吗？

# asp.net-mvc - MapRoute() 中的 name 参数会发生什么？

> ID：15440607
> 
> 赞同：0
> 
> 时间：2013-03-15T19:27:46.323
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

命名maproute有什么意义？这让我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:29:22.083

[您可以在RedirectToRoute](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.redirecttoroute%28v=vs.98%29.aspx)等方法中按名称引用路由。

```
return RedirectToRoute("MyRouteName"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:32:33.177

`Url.RouteUrl`您可以通过调用和传递参数来生成url

```
Url.RouteUrl(routeName, RouteValueDictionary) 
```

# windows - Is there a file in a directory with a modified date of today - Batch File

> ID：15440612
> 
> 赞同：0
> 
> 时间：2013-03-15T19:28:12.440
> 
> 标签：windows, date, for-loop, batch-file, cmd

I am new to batch files and have some basic understanding and can edit batches if I see them in front of me. I wonder if you could help me with the following requirement for my batch file.

```
Is there a file in a directory with a modified date of today
If yes
Is there a certain text string of ‘test’ in the file
    If yes
        echo ‘test string found’
    Else
        echo ‘test string NOT found’
Else 
    Echo ‘no file today’ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:54:08.690

不要将批处理放在搜索到的文件夹中（批处理文件包含`test string`！）：

```
@echo off &setlocal
:: first modify the search path here!
set "searchpath=."
set "text=test"

dir /a-d | find "%date%" >nul || (echo no file today&goto :eof)
for /f "tokens=3*" %%i in ('dir /a-d %searchpath% ^| find "%date%"') do (
    for /f %%k in ('findstr /mc:"%text%" "%searchpath%\%%j"') do (
        if not "%%k"=="" set "found=true"
    )
)
if not defined found (echo test string NOT found) else echo test string found
endlocal 
```

编辑：此版本适用于欧洲日期格式，例如`dd.mm.yyyy`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:33:13.203

使用我在此处列出的每个命令，您可以`commandname /?`获取更多信息。

`%date%`环境变量的第二个标记和`date /t`命令以与列表相同的格式显示今天的日期`dir`。

该`dir`命令有一个可用的`/a`开关，它允许仅显示具有（或不具有）特定属性的文件。要排除目录（例如`.`和`..`），请使用`dir /a:-d`.

您可以使用 捕获命令的输出`for /f`。

`find`最后，您可以使用或`findstr`命令 测试字符串是否存在。`findstr`让您使用正则表达式进行搜索以获得更大的灵活性。但是，如果您只想搜索文字字符串，`find`则可以正常工作。

把所有这些放在一起：

```
@echo off

rem "setlocal" prevents any variables you set within your batch script
rem from remaining as environment orphans after the script completes.
setlocal

rem set variable %today% as the second token of %date%
for /f "tokens=2" %%I in ("%date%") do set today=%%I

rem dir list, skip directories, skip this batch script, include only files with a date matching %today%
for /f "tokens=4*" %%H in ('dir /a-d ^| findstr /v /i "%~nx0$" ^| find "%today%"') do (

    rem record success for later
    set found=1

    rem search file %%I for "string" (case-insensitive).
    find /i "string" "%%I">NUL

    rem Was last command successful?
    if %ERRORLEVEL%==0 (
        echo Test string found
    ) else (
        echo Test string NOT found
    )
)

rem if success was not recorded
if not defined found echo No file today 
```

然后，当您开始将编码更多地视为一种艺术表达的手段而不是达到目的的手段时，您可以执行更高级的技巧以使用更少的代码行来执行相同的任务。

```
@echo off
setlocal
for /f "tokens=2" %%I in ("%date%") do set today=%%I
for /f "tokens=4*" %%H in ('dir /a-d ^| findstr /v /i "%~nx0$" ^| find "%today%" ^|^| echo No file today 1^>^&2') do (
    (find /i "string" "%%I" >NUL && (
        echo Test string found.
    )) || echo Test string not found.
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T20:29:44.107

```
@ECHO OFF
SETLOCAL
:: Point to the target directory. establish target file and string required
SET target=.
SET targfile=example.txt
SET targtxt=FIND me
::
SET targfile="%target%\%targfile%"
IF NOT EXIST %targfile% ECHO No file today& GOTO :EOF 
:dfloop
SET filename=q%random%.q$q
SET fullname="%target%\%filename%"
IF EXIST %fullname% GOTO dfloop
:: create a dummy file dated today
COPY nul: %fullname% >nul
 FOR /f %%i IN ('dir %fullname% ^|find /i "%filename%"') DO SET today=%%i
DEL %fullname%
FOR /f %%i IN ('dir %targfile% ') DO IF %today%==%%i (SET today=)
IF DEFINED today ECHO No file today&GOTO :eof
FIND /i "%targtxt%" %targfile% >NUL
IF ERRORLEVEL 1 (ECHO test string NOT found) ELSE (ECHO test string found) 
```

我已将目标目录设置为`.`- 当前目录 - 用于测试。将 替换为`.`您的目标目录名称。

在目标文件“example.txt”中查找字符串

现在 - 假设您正在寻找可能出现/修改的特定文件名，例如`...\myappdir\myapp.log`

如果您的意思是“今天创建/修改的任何文件[匹配某些文件掩码]”将被搜索字符串，那么一个稍微修改的例程：

```
@ECHO OFF
SETLOCAL
:: Point to the target directory. establish target filemask and string required
SET target=\destdir
SET targfile=examp*.txt
SET targtxt=FIND me
::
SET targfile="%target%\%targfile%"
IF NOT EXIST %targfile% ECHO No file today& GOTO :EOF 
:dfloop
SET filename=q%random%.q$q
SET fullname="%target%\%filename%"
IF EXIST %fullname% GOTO dfloop
:: create a dummy file dated today
COPY nul: %fullname% >nul
FOR /f %%i IN ('dir %fullname% ^|find /i "%filename%"') DO SET today=%%i
DEL %fullname%
SET count=0
FOR /f %%i IN ('dir %targfile% ') DO IF %today%==%%i (SET /a count+=1)
IF %count% equ 0 ECHO No file today&GOTO :eof
FOR /f "tokens=1*delims=:" %%i IN (
 'dir /b/a-d/o-d %targfile%^|findstr /n /v "*" '
  ) DO IF %%i leq %count% (
FIND /i "%targtxt%" "%target%\%%j" >NUL
IF NOT ERRORLEVEL 1 (SET today=)
)
IF DEFINED today (ECHO test string NOT found) ELSE (ECHO test string found) 
```

在这里，将检查`examp*.txt`今天创建/修改的任何文件匹配的目标字符串。`\destdir`

# linux - How to batch download files from url with two range in linux

> ID：15440615
> 
> 赞同：0
> 
> 时间：2013-03-15T19:28:29.817
> 
> 标签：linux, batch-file, download, range

I want to download file from a site that provides download link as

[http://abc.com/blahblahblah/XXX/PQR/XXX.jpeg](http://abc.com/blahblahblah/XXX/PQR/XXX.jpeg)

here XXX change over a range. i have tried using curl but it wont work it start downloading combinations of both the ranges. i want both XXX before and after PQR to change simultaneously (both have to be same all the time)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T02:42:48.223

您是否考虑过使用[bash for 循环](http://www.cyberciti.biz/faq/bash-for-loop/)？

```
#!/bin/bash

for x in {001..020}; do
    wget "http://abc.com/blahblahblah/$x/PQR/$x""_jpeg.jpeg"
done 
```

如果你想`XXX`在路径和`YYY`文件名中相互独立，你可以嵌套两个`for`循环：

```
#!/bin/bash

for x in {001..020}; do
    for y in {001..099}; do
        wget "http://abc.com/blahblahblah/$x/PQR/$y""_jpeg.jpeg"
    done
done 
```

# mysql - 子查询返回多行..如何处理它？

> ID：15440620
> 
> 赞同：6
> 
> 时间：2013-03-15T19:28:40.010
> 
> 标签：mysql, subquery

```
SELECT requestID
FROM request
WHERE userId = (
    SELECT userID
    FROM department
    WHERE desig = 'E'
    AND dept = (
        SELECT dept
        FROM department
        WHERE userId = it18
        AND desig = 'FM'
      )
); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-15T19:34:47.030

使用以下方式编写此查询会更清晰[`JOIN`](http://dev.mysql.com/doc/refman/5.0/en/join.html)：

```
select distinct r.requestID 
from 
    request r
    join department d
        on d.userId = r.userID
        and desig = 'E'
    join department d2
        on d2.dept = d.dept
        and d2.desig = 'FM'
        and d2.userId = 'it18' 
```

或者，您可以简单地替换`=`为[`IN`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)：

```
SELECT requestID
FROM request
WHERE userId IN (
    SELECT userID
    FROM department
    WHERE desig = 'E'
    AND dept IN (
        SELECT dept
        FROM department
        WHERE userId = it18
        AND desig = 'FM'
      )
); 
```

它们应该返回相同的结果，但同时尝试两者以查看性能是否有任何差异。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T19:39:58.570

有两种处理方法：

选项 1：更改为`WHERE ... IN (SELECT ...)`，如下所示：

```
SELECT requestID
FROM request
WHERE userId IN (
    SELECT userID
    FROM department
    WHERE desig = 'E'
    AND dept IN (
        SELECT dept
        FROM department
        WHERE userId = it18
        AND desig = 'FM'
      )
); 
```

选项 2：使用聚合函数（如 ）仅强制一个结果`MAX()`，如下所示：

```
SELECT requestID
FROM request
WHERE userId = (
    SELECT MAX(userID)
    FROM department
    WHERE desig = 'E'
    AND dept = (
        SELECT MAX(dept)
        FROM department
        WHERE userId = it18
        AND desig = 'FM'
      )
); 
```

# iphone - Slide in a popover like UISplitViewController

> ID：15440625
> 
> 赞同：0
> 
> 时间：2013-03-15T19:28:55.403
> 
> 标签：iphone, ios, objective-c, ipad

How do you slide in a popover like the UISplitViewController does in portrait mode?

This has to be a property of popovers now since the UISplitViewController passes back a reference to a popover. But I can't find anything on popovers that explains how this is done.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:13:30.663

我非常有信心它不是 UIPopoverController 意义上的弹出框。这很可能只是在另一个之上呈现的另一种观点。我可能会使用容器视图来实现这一点。详细视图和侧视图都将是容器中的同级视图。容器保留对侧视图的引用，并在适当的时候将其滑入滑出。

# java - Filter events in Google Calendar by date

> ID：15440627
> 
> 赞同：3
> 
> 时间：2013-03-15T19:29:02.283
> 
> 标签：java, google-api, google-calendar-api, google-apps

How can I filter the events by start date and end date.

Example: start 03/15/2013, ending 03/20/2013;

I want to show all dates of these events, including those that began before and ending during or after the end, and those who started between the dates but will end after the final date

Exemple:

```
This include:

    Start: 03/10/2013, ending 03/17/2013
    Start: 03/10/2013, ending 03/22/2013
    Start: 03/17/2013, ending 03/18/2013
    Start: 03/17/2013, ending 03/22/2013

And exclude:

    Start: 03/10/2013, ending 03/12/2013
    Start: 03/22/2013, ending 03/23/2013 
```

I'm using Google Calendar API V3 for Java

In my code, I have:

```
List find = service.events().list(calendarID); 
```

I can use `find.setTimeMin` and `find.setTimeMax`, but this is not enough

# asp.net - 将 xml 转换为多列 html 表

> ID：15440628
> 
> 赞同：0
> 
> 时间：2013-03-15T19:29:09.453
> 
> 标签：asp.net, xml, xslt

我想要以下 XML：

```
<?xml version="1.0" standalone="yes"?>
<NewDataSet>
  <categories>
    <name>Badges &amp; Holders</name>
    <value>1000111</value>
  </categories>
  <categories>
    <name>Clips, Tacks &amp; Rubber Bands</name>
    <value>1000113</value>
  </categories>
  <categories>
    <name>Clocks</name>
    <value>1000114</value>
  </categories>
  <categories>
    <name>Indexing Flags &amp; Tabs</name>
    <value>1000115</value>
  </categories>
  <categories>
    <name>Magnification</name>
    <value>1000116</value>
  </categories>
  <categories>
    <name>Pad Holders</name>
    <value>1000117</value>
  </categories>
  <categories>
    <name>Paper Punch Accessories</name>
    <value>1000118</value>
  </categories>
  <categories>
    <name>Paper Punches</name>
    <value>1000119</value>
  </categories>
  <categories>
    <name>Scissors, Rulers &amp; Paper Trimmers</name>
    <value>1000120</value>
  </categories>
  <categories>
    <name>Signs &amp; Nameplates</name>
    <value>1000121</value>
  </categories>
  <categories>
    <name>Stamps &amp; Pads Accessories</name>
    <value>1000122</value>
  </categories>
  <categories>
    <name>Stapler Accessories</name>
    <value>1000123</value>
  </categories>
  <categories>
    <name>Staplers</name>
    <value>1000124</value>
  </categories>
  <categories>
    <name>Tags &amp; Tickets</name>
    <value>1000125</value>
  </categories>
  <categories>
    <name>Tape, Glue &amp; Adhesives</name>
    <value>1000126</value>
  </categories>
</NewDataSet> 
```

并将其转换为 HTML（表格），如下所示：

```
<table>
  <tr>
    <td>
      <div>
        <img src="Path/" + {value} + ".jpg"></img>
      </div>
      <div>
        <span onclick="Critia(this, '{value}')">
          <xsl:value-of select="name"/>
        </span>
      </div>
    </td>
  </tr>
</table> 
```

不过，这是踢球者。我只需要它有 5 列 TD，然后从新的 TR 重新开始.. 一直向下。如果它在 XML 中有 12 个项目，那么我需要它继续并有 15 个 TD（我假设），以便表格是一个漂亮的正方形。

将来，我们将在这个 XML 中为每个“类别”项目提供一个“PictureURL”或类似的内容，就像名称和值一样。我敢打赌，如果我现在可以让这个工作，我以后可以自己工作。

非常感谢您的帮助！经过几天的尝试和谷歌搜索后，XSLT 语法让我仍然感到困惑。

这是我一直在努力工作但无法完成的事情：

```
<table>
  <xsl:for-each select="categories[position() mod 5 = 1]">
    <xsl:variable name="pos" select="position() - 1" />
    <tr>
      <td >
        <xsl:value-of select="."/>
        <span onclick="Critia(this, '{value}')">
          <xsl:value-of select="name[position() = ($pos * 5)]"/>
        </span>
      </td>
      <td>
        <xsl:value-of select="//categories[position() = ($pos * 5) + 2]"/>
        <span onclick="Critia(this, '{value}')">
          <xsl:value-of select="name[position() = ($pos * 5) + 2]"/>
        </span>
      </td>
      <td>
        <xsl:value-of select="//categories[position() = ($pos * 5) + 3]"/>
        <span onclick="Critia(this, '{value}')">
          <xsl:value-of select="name[position() = ($pos * 5) + 3]"/>
        </span>
      </td>
      <td>
        <xsl:value-of select="//categories[position() = ($pos * 5) + 4]"/>
        <span onclick="Critia(this, '{value}')">
          <xsl:value-of select="name[position() = ($pos * 5) + 4]"/>
        </span>
      </td>
      <td>
        <xsl:value-of select="//categories[position() = ($pos * 5) + 5]"/>
        <span onclick="Critia(this, '{value}')">
          <xsl:value-of select="name[position() = ($pos * 5) + 5]"/>
        </span>
      </td>
    </tr>
    </xsl:for-each>
</table> 
```

这就是我尝试将 JLRishe 的答案集成到我现有的 XSLT 中的方式：

```
 <!--================-->
  <!--    Categories  -->
  <!--================-->
  <xsl:template name="WriteCategories">
    <xsl:if test="categories">
      <div>
        <!-- set the class, if browsing it's a larger font -->
        <xsl:choose>
          <xsl:when test="$pBrowse='True'">
            <xsl:attribute name="class">critGroup lg</xsl:attribute>
          </xsl:when>
          <xsl:otherwise>
            <xsl:attribute name="class">critGroup</xsl:attribute>
          </xsl:otherwise>
        </xsl:choose>

        <xsl:variable name="numCols" select="5" />

        <xsl:template match="/*">
          <table>
            <xsl:apply-templates select="categories[position() mod $numCols = 1]"
                                 mode="row" />
          </table>
        </xsl:template>

        <xsl:template match="categories" mode="row">
          <tr>
            <xsl:variable name="thisRowItems"
                          select=". | following-sibling::categories[position() &lt; $numCols]" />
            <xsl:apply-templates select="$thisRowItems" />
            <xsl:call-template name="addCells">
              <xsl:with-param name="count" select="$numCols - count($thisRowItems)" />
            </xsl:call-template>
          </tr>
        </xsl:template>

        <xsl:template match="categories">
          <td>
            <xsl:value-of select="."/>
            <span onclick="Critia(this, '{value}')">
              <xsl:value-of select="name" />
            </span>
          </td>
        </xsl:template>

        <xsl:template name="addCells">
          <xsl:param name="count" />

          <xsl:if test="$count > 0">
            <td></td>
            <xsl:call-template name="addCells">
              <xsl:with-param name="count" select="$count - 1" />
            </xsl:call-template>
          </xsl:if>
        </xsl:template>
        <div>
          <!-- if not browsing, write expandable area if there are more than 5 items -->
          <xsl:if test="$pBrowse='False' and count(categories)>5">
            <div id="divCritHdnMore_Category" class="moreHidden">
              <xsl:for-each select="categories">
                <xsl:if test="position()>5">
                  <div>
                    <span onclick="Critia(this, '{value}')">
                      <xsl:value-of select="name" disable-output-escaping="yes" />
                    </span>
                    <xsl:value-of select="concat(' (', count, ')')" />
                  </div>
                </xsl:if>
              </xsl:for-each>
            </div>
          </xsl:if>
        </div>

        <!-- more link -->
        <xsl:if test="$pBrowse='False' and count(categories)>5">
          <div class="moreLink">
            <span id="spnCritMore_Category" onclick="CriteriaMore('Category')">More . . .</span>
          </div>
        </xsl:if>
      </div>
    </xsl:if>
  </xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:38:17.483

这就是您可以进行表格行分组的方式。我不认为`<td>`在最后一行中有正确数量的 s 是绝对必要的，但我也添加了该功能：

将此添加到`WriteCategories`模板中您希望表格所在的位置：

```
<table>
  <xsl:apply-templates select="categories[position() mod $numCols = 1]"
                       mode="row" />
</table> 
```

并将其添加到任何其他模板之外：

```
 <xsl:variable name="numCols" select="5" />

  <xsl:template match="categories" mode="row">
    <tr>
      <xsl:variable name="thisRowItems"
                    select=". | following-sibling::categories
                                                   [position() &lt; $numCols]" />
      <xsl:apply-templates select="$thisRowItems" />
      <xsl:call-template name="addCells">
        <xsl:with-param name="count" select="$numCols - count($thisRowItems)" />
      </xsl:call-template>
    </tr>
  </xsl:template>

  <xsl:template match="categories">
    <td>
      <xsl:value-of select="."/>
      <span onclick="Critia(this, '{value}')">
        <xsl:value-of select="name" />
      </span>
    </td>
  </xsl:template>

  <xsl:template name="addCells">
    <xsl:param name="count" />

    <xsl:if test="$count > 0">
      <td></td>
      <xsl:call-template name="addCells">
        <xsl:with-param name="count" select="$count - 1" />
      </xsl:call-template>
    </xsl:if>
  </xsl:template> 
```

当在您的示例输入上运行并`categories`删除最后 3 个以制作 12 个项目时，结果是：

```
<table>
  <tr>
    <td>
    Badges &amp; Holders
    1000111
  <span onclick="Critia(this, '1000111')">Badges &amp; Holders</span></td>
    <td>
    Clips, Tacks &amp; Rubber Bands
    1000113
  <span onclick="Critia(this, '1000113')">Clips, Tacks &amp; Rubber Bands</span></td>
    <td>
    Clocks
    1000114
  <span onclick="Critia(this, '1000114')">Clocks</span></td>
    <td>
    Indexing Flags &amp; Tabs
    1000115
  <span onclick="Critia(this, '1000115')">Indexing Flags &amp; Tabs</span></td>
    <td>
    Magnification
    1000116
  <span onclick="Critia(this, '1000116')">Magnification</span></td>
  </tr>
  <tr>
    <td>
    Pad Holders
    1000117
  <span onclick="Critia(this, '1000117')">Pad Holders</span></td>
    <td>
    Paper Punch Accessories
    1000118
  <span onclick="Critia(this, '1000118')">Paper Punch Accessories</span></td>
    <td>
    Paper Punches
    1000119
  <span onclick="Critia(this, '1000119')">Paper Punches</span></td>
    <td>
    Scissors, Rulers &amp; Paper Trimmers
    1000120
  <span onclick="Critia(this, '1000120')">Scissors, Rulers &amp; Paper Trimmers</span></td>
    <td>
    Signs &amp; Nameplates
    1000121
  <span onclick="Critia(this, '1000121')">Signs &amp; Nameplates</span></td>
  </tr>
  <tr>
    <td>
    Stamps &amp; Pads Accessories
    1000122
  <span onclick="Critia(this, '1000122')">Stamps &amp; Pads Accessories</span></td>
    <td>
    Stapler Accessories
    1000123
  <span onclick="Critia(this, '1000123')">Stapler Accessories</span></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</table> 
```

# php - PHP script listening on a directory

> ID：15440631
> 
> 赞同：1
> 
> 时间：2013-03-15T19:29:21.420
> 
> 标签：php, linux, automation

I have a PHP script configured to loop endlessly using `set_time_limit(0)` and `for(;;)`. The script is coded to listen on a specific directory and wait for files. When files are detected, execute some commands and keep the loop going. So far this has been very successful for my needs, but I have concerns.

Are there any performance disadvantages to creating an infinite loop in PHP? How can I configure my server so that this script never stops running? Or perhaps alerts me when it has stopped running? I'd like it to launch on startup too. I have a SUSE SLES 10 box.

```
for (;;) {
    // Check for empty directory
    if (isEmptyDir($finishedDir)) {         
        // If so, move on
        continue;
    } else {
       // do stuff.
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:46:57.233

这可能有效，但 PHP 并不是真正为这些类似守护进程的工作而设计的。Linux/Unix 有这样的定制工具`inotify`，可以保证性能更好，并且可以在更改事件发生时触发 PHP 脚本。

请参阅此 SO 问题：[Monitor Directory for Changes](https://stackoverflow.com/questions/511463/monitor-directory-for-changes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:50:31.920

您可以考虑使用内存（例如：memcached、apc）而不是使用文件，因为访问文件比访问内存更昂贵。并考虑使用一点`sleep()`s 来增加时间间隔。

# django - Sphinx autodoc not importing modules

> ID：15440635
> 
> 赞同：2
> 
> 时间：2013-03-15T19:29:31.047
> 
> 标签：django, fabric, autodoc

Hi I am writing some documentation for a Django project using sphinx.

My project (Django 1.4) looks like this:

```
/funproject
   /documentation
       # this is where sphinx files live
       /source
           conf.py
           ... 
   /funproject
       __init__.py
       settings.py
       admin.py
       models.py
   /app1
   /app2
   fabfile.py
   manage.py 
```

I have sphinx setup in the conf.py:

```
 import sys, os

 sys.path.append(os.path.join(os.path.dirname(__file__), '../..'))

 os.environ['DJANGO_SETTINGS_MODULE'] = 'funproject.settings'

 from funproject import settings
 from django.core.management import setup_environ
 setup_environ(settings) 
```

So in my sphinx source files I can do this:

```
 .. automodule:: app1.models
    :members: 
```

which works fine. However, these two examples do not work:

1.

```
 .. automodule:: funproject.models
    :members: 
```

2.

```
 .. automodule:: fabfile
    :members: 
```

The second works if I move the fabfile into app1 and use `app1.fabfile`

I'm guessing I have some issue with my `conf.py` but I have tried many derivations but I cannot import my `fabfile.py` unless it is under an app dir (though under `/funproject` it doesn't work either).

Any help with this would be much appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-28T06:41:24.037

您可以尝试使用fabric fabfile 目录样式吗？也许是 automodule 不查看单个文件模块的情况？这种其他风格的文档在[这里](http://docs.fabfile.org/en/1.8/usage/fabfiles.html?highlight=fabfile#fabfile-discovery)

# actionscript-3 - Aligning movieclips after drop

> ID：15440644
> 
> 赞同：0
> 
> 时间：2013-03-15T19:29:49.413
> 
> 标签：actionscript-3, flash-cs5

I have a drag-and-drop game and I'm having some trouble with the alignment of the pieces once they get dropped onto their zone. There are 12 MCs, and there are 4 columns x 3 rows of targets that are perfectly aligned. When all of movieclips are dropped, the horizontal/vertical alignment isn't perfectly even with one-another.

I know this deals with the registration point on each mc, and I'm trying to center each piece's point as much as possible using FreeTransform, but it's all visual and leaves room for error.

Is there a way to align all 12 of these pieces once they are dropped onto their target?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:52:05.683

我不确定我是否完全理解你的问题。如果您只是想重新对齐剪辑以确保它完全居中；你不必在视觉上做到这一点。

只需进入剪辑点击 ctrl+a 选择所有内容并查看高度和宽度。剪辑的中心点应位于：

x = -(宽度/2) y = -(高度/2)

所以你可以浏览每个剪辑并手动设置它。

* * *

如果您的所有剪辑都具有相同的注册点，则可以在代码中完成类似的代数，以计算它们在居中时应该放置的位置。

听起来那是行不通的，因为您已经手动移动了它们的注册点，在这种情况下，您可能应该直接进入并使用以前的方法手动计算它们的中心。

# c# - 我应该创建多个 ASP.Net ASCX 控件还是单个控件来执行多项操作

> ID：15440645
> 
> 赞同：0
> 
> 时间：2013-03-15T19:29:50.107
> 
> 标签：c#, asp.net, user-controls, ascx

我有一个网站，经常同时有 500 名观众。我正在寻找一些使用 ASCX 控件的指南。

我想确保网站具有快速响应时间，但我也想重用我的代码。

我正在创建一个自定义控件，该控件显示一个充满信息的表格。表格是分页的（包含页码和表格上方的上一个/下一个按钮）。我希望此控件可重复使用，并且在某些情况下，页码也可能显示在表格下方或而不是在表格上方。
我知道 GridView 控件，但在这种情况下我想要一个自定义控件。

我应该为页码创建一个单独的控件吗？还是我应该拥有一个包含顶部按钮、中间内容和底部按钮的大型控件？页码源自与数据表相同的数据。如果我创建单独的控件，每次从页面调用控件时都需要提取此数据，对吗？

你会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:33:12.230

在这种情况下，您可能需要一个控件。

您可能会制作多个自定义控件（一个用于页码，一个用于表格等），然后另一个将较简单的控件聚合到您的数据*主*视图中。

你有一件事，我肯定会确保将数据与演示文稿分离。不要将您的控制权与数据联系起来！

上面的规则意味着，例如，当您的控件表示页码或按钮时，它们应该足够抽象以由您的*主*控件控制，或者表示 _master_control 上的操作不一定与主控件的数据*交互*直接控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:33:04.330

您是否期望创建没有分页的网格？如果这样做，最好将它们分开控制。但是，如果您决定将其作为一个大控件，请以易于分离它们的方式对其进行编码。

如果性能是一个问题，请确保您的控件输出尽可能少的 HTML，并缓存您的输出。

# android - 缩放位图保持纵横比

> ID：15440647
> 
> 赞同：71
> 
> 时间：2013-03-15T19:29:53.650
> 
> 标签：android, bitmap, scaling

我想将 a 缩放`Bitmap`到与运行时相关的宽度和高度，其中保持纵横比并`Bitmap`填充整个宽度并垂直居中图像，要么裁剪多余的部分，要么用 0 alpha 像素填充间隙。

我目前正在自己​​重绘位图，方法是创建一个`Bitmap`所有 0 的 alpha 像素并在其`Bitmap`上绘制图像，缩放到精确的指定宽度并保持纵横比，但是，它最终会丢失/搞砸像素数据。

这是我的做法：

```
Bitmap background = Bitmap.createBitmap((int)width, (int)height, Config.ARGB_8888);
float originalWidth = originalImage.getWidth(), originalHeight = originalImage.getHeight();
Canvas canvas = new Canvas(background);
float scale = width/originalWidth;
float xTranslation = 0.0f, yTranslation = (height - originalHeight * scale)/2.0f;
Matrix transformation = new Matrix();
transformation.postTranslate(xTranslation, yTranslation);
transformation.preScale(scale, scale);
canvas.drawBitmap(originalImage, transformation, null);
return background; 
```

是否有一个库或一些更好的代码可以更好地做到这一点？我希望图像看起来尽可能清晰，但我知道我的函数不会提供很好的结果。

我知道我可以通过使用整数缩放而不是浮点缩放来使图像保持正常，但我需要 100% 填充宽度。

另外，我知道 an`ImageView`的`Gravity.CENTER_CROP`功能，但是，它也使用整数缩放，因此它会在不应该的时候切断图像的宽度。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2015-02-06T13:49:18.600

这将尊重 maxWidth 和 maxHeight，这意味着生成的位图的尺寸永远不会大于：

```
 private static Bitmap resize(Bitmap image, int maxWidth, int maxHeight) {
    if (maxHeight > 0 && maxWidth > 0) {
        int width = image.getWidth();
        int height = image.getHeight();
        float ratioBitmap = (float) width / (float) height;
        float ratioMax = (float) maxWidth / (float) maxHeight;

        int finalWidth = maxWidth;
        int finalHeight = maxHeight;
        if (ratioMax > ratioBitmap) {
            finalWidth = (int) ((float)maxHeight * ratioBitmap);
        } else {
            finalHeight = (int) ((float)maxWidth / ratioBitmap);
        }
        image = Bitmap.createScaledBitmap(image, finalWidth, finalHeight, true);
        return image;
    } else {
        return image;
    }
} 
```

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2013-03-15T20:12:57.330

那这个呢：

```
Bitmap background = Bitmap.createBitmap((int)width, (int)height, Config.ARGB_8888);

float originalWidth = originalImage.getWidth(); 
float originalHeight = originalImage.getHeight();

Canvas canvas = new Canvas(background);

float scale = width / originalWidth;

float xTranslation = 0.0f;
float yTranslation = (height - originalHeight * scale) / 2.0f;

Matrix transformation = new Matrix();
transformation.postTranslate(xTranslation, yTranslation);
transformation.preScale(scale, scale);

Paint paint = new Paint();
paint.setFilterBitmap(true);

canvas.drawBitmap(originalImage, transformation, paint);

return background; 
```

我添加了一个`paint`来过滤缩放的位图。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2015-05-04T06:52:58.310

这是我的 Utils 类中的一个方法，它可以完成这项工作：

```
public static Bitmap scaleBitmapAndKeepRation(Bitmap targetBmp,int reqHeightInPixels,int reqWidthInPixels)
    {
        Matrix matrix = new Matrix();
        matrix .setRectToRect(new RectF(0, 0, targetBmp.getWidth(), targetBmp.getHeight()), new RectF(0, 0, reqWidthInPixels, reqHeightInPixels), Matrix.ScaleToFit.CENTER);
        Bitmap scaledBitmap = Bitmap.createBitmap(targetBmp, 0, 0, targetBmp.getWidth(), targetBmp.getHeight(), matrix, true);
        return scaledBitmap;
    } 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2014-07-25T07:31:51.300

在这里，我有一个经过测试的解决方案，我从位图文件中创建了一个缩放位图：

```
 int scaleSize =1024;

    public Bitmap resizeImageForImageView(Bitmap bitmap) {
        Bitmap resizedBitmap = null;
        int originalWidth = bitmap.getWidth();
        int originalHeight = bitmap.getHeight();
        int newWidth = -1;
        int newHeight = -1;
        float multFactor = -1.0F;
        if(originalHeight > originalWidth) {
            newHeight = scaleSize ;
            multFactor = (float) originalWidth/(float) originalHeight;
            newWidth = (int) (newHeight*multFactor);
        } else if(originalWidth > originalHeight) {
            newWidth = scaleSize ;
            multFactor = (float) originalHeight/ (float)originalWidth;
            newHeight = (int) (newWidth*multFactor);
        } else if(originalHeight == originalWidth) {
            newHeight = scaleSize ;
            newWidth = scaleSize ;
        }
        resizedBitmap = Bitmap.createScaledBitmap(bitmap, newWidth, newHeight, false);
        return resizedBitmap;
    } 
```

请注意，我需要最大尺寸为 4096x4096 像素的缩放位图，但在调整大小时需要保持纵横比。如果您需要其他宽度或高度值，只需替换值“4096”。

这只是对 Coen 答案的补充，但他的代码中的问题是他计算比率的那一行。将两个整数相除得到一个整数，如果结果 < 1，它将舍入为 0。所以这会引发“除以零”异常。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-09-27T16:31:07.003

以上答案都没有为我工作，我只是创建了一个方法，将所有尺寸设置为所需的尺寸，并将空白区域涂成黑色。这是我的方法：

```
/**
 * Scale the image preserving the ratio
 * @param imageToScale Image to be scaled
 * @param destinationWidth Destination width after scaling
 * @param destinationHeight Destination height after scaling
 * @return New scaled bitmap preserving the ratio
 */
public static Bitmap scalePreserveRatio(Bitmap imageToScale, int destinationWidth,
        int destinationHeight) {
    if (destinationHeight > 0 && destinationWidth > 0 && imageToScale != null) {
        int width = imageToScale.getWidth();
        int height = imageToScale.getHeight();

        //Calculate the max changing amount and decide which dimension to use
        float widthRatio = (float) destinationWidth / (float) width;
        float heightRatio = (float) destinationHeight / (float) height;

        //Use the ratio that will fit the image into the desired sizes
        int finalWidth = (int)Math.floor(width * widthRatio);
        int finalHeight = (int)Math.floor(height * widthRatio);
        if (finalWidth > destinationWidth || finalHeight > destinationHeight) {
            finalWidth = (int)Math.floor(width * heightRatio);
            finalHeight = (int)Math.floor(height * heightRatio);
        }

        //Scale given bitmap to fit into the desired area
        imageToScale = Bitmap.createScaledBitmap(imageToScale, finalWidth, finalHeight, true);

        //Created a bitmap with desired sizes
        Bitmap scaledImage = Bitmap.createBitmap(destinationWidth, destinationHeight, Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(scaledImage);

        //Draw background color
        Paint paint = new Paint();
        paint.setColor(Color.BLACK);
        paint.setStyle(Paint.Style.FILL);
        canvas.drawRect(0, 0, canvas.getWidth(), canvas.getHeight(), paint);

        //Calculate the ratios and decide which part will have empty areas (width or height)
        float ratioBitmap = (float)finalWidth / (float)finalHeight;
        float destinationRatio = (float) destinationWidth / (float) destinationHeight;
        float left = ratioBitmap >= destinationRatio ? 0 : (float)(destinationWidth - finalWidth) / 2;
        float top = ratioBitmap < destinationRatio ? 0: (float)(destinationHeight - finalHeight) / 2;
        canvas.drawBitmap(imageToScale, left, top, null);

        return scaledImage;
    } else {
        return imageToScale;
    }
} 
```

例如;

假设您有一个 100 x 100 的图像，但所需的尺寸是 300x50，那么此方法会将您的图像转换为 50 x 50 并将其绘制为尺寸为 300 x 50 的新图像（空文件将为黑色） .

另一个例子：假设您有一个 600 x 1000 的图像，并且所需的尺寸再次为 300 x 50，那么您的图像将被转换为 30 x 50 并绘制成一个尺寸为 300 x 50 的新创建的图像。

我认为这就是它必须的，Rs。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-01-10T11:04:27.780

更简单的解决方案：注意我们将宽度设置为 500 像素

```
 public void scaleImageKeepAspectRatio()
    {
        int imageWidth = scaledGalleryBitmap.getWidth();
        int imageHeight = scaledGalleryBitmap.getHeight();
        int newHeight = (imageHeight * 500)/imageWidth;
        scaledGalleryBitmap = Bitmap.createScaledBitmap(scaledGalleryBitmap, 500, newHeight, false);

    } 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-04-05T15:19:23.473

也可以通过自己计算比率来完成，像这样。

```
private Bitmap scaleBitmap(Bitmap bm) {
    int width = bm.getWidth();
    int height = bm.getHeight();

    Log.v("Pictures", "Width and height are " + width + "--" + height);

    if (width > height) {
        // landscape
        int ratio = width / maxWidth;
        width = maxWidth;
        height = height / ratio;
    } else if (height > width) {
        // portrait
        int ratio = height / maxHeight;
        height = maxHeight;
        width = width / ratio;
    } else {
        // square
        height = maxHeight;
        width = maxWidth;
    }

    Log.v("Pictures", "after scaling Width and height are " + width + "--" + height);

    bm = Bitmap.createScaledBitmap(bm, width, height, true);
    return bm;
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-02-02T07:09:20.113

在 Gowrav 的答案中添加了 RESIZE_CROP。

```
 enum RequestSizeOptions {
    RESIZE_FIT,
    RESIZE_INSIDE,
    RESIZE_EXACT,
    RESIZE_CENTRE_CROP
}
static Bitmap resizeBitmap(Bitmap bitmap, int reqWidth, int reqHeight, RequestSizeOptions options) {
    try {
        if (reqWidth > 0 && reqHeight > 0 && (options == RequestSizeOptions.RESIZE_FIT ||
                options == RequestSizeOptions.RESIZE_INSIDE ||
                options == RequestSizeOptions.RESIZE_EXACT || options == RequestSizeOptions.RESIZE_CENTRE_CROP)) {

            Bitmap resized = null;
            if (options == RequestSizeOptions.RESIZE_EXACT) {
                resized = Bitmap.createScaledBitmap(bitmap, reqWidth, reqHeight, false);
            } else {
                int width = bitmap.getWidth();
                int height = bitmap.getHeight();
                float scale = Math.max(width / (float) reqWidth, height / (float) reqHeight);
                if (scale > 1 || options == RequestSizeOptions.RESIZE_FIT) {
                    resized = Bitmap.createScaledBitmap(bitmap, (int) (width / scale), (int) (height / scale), false);
                }
                if (scale > 1 || options == RequestSizeOptions.RESIZE_CENTRE_CROP) {
                    int smaller_side = (height-width)>0?width:height;
                    int half_smaller_side = smaller_side/2;
                    Rect initialRect = new Rect(0,0,width,height);
                    Rect finalRect = new Rect(initialRect.centerX()-half_smaller_side,initialRect.centerY()-half_smaller_side,
                            initialRect.centerX()+half_smaller_side,initialRect.centerY()+half_smaller_side);
                    bitmap = Bitmap.createBitmap(bitmap,  finalRect.left, finalRect.top, finalRect.width(), finalRect.height(), null, true);
                    //keep in mind we have square as request for cropping, otherwise - it is useless
                    resized = Bitmap.createScaledBitmap(bitmap, reqWidth, reqHeight, false);
                }

            }
            if (resized != null) {
                if (resized != bitmap) {
                    bitmap.recycle();
                }
                return resized;
            }
        }
    } catch (Exception e) {
        Log.w("AIC", "Failed to resize cropped image, return bitmap before resize", e);
    }
    return bitmap;
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2021-06-03T03:07:28.920

Kotlin 扩展功能版本基于 joaomgcd 的回答

```
private fun Bitmap.resize(maxWidth: Int, maxHeight: Int): Bitmap {
    return if (maxHeight > 0 && maxWidth > 0) {
        val width = this.width
        val height = this.height
        val ratioBitmap = width.toFloat() / height.toFloat()
        val ratioMax = maxWidth.toFloat() / maxHeight.toFloat()
        var finalWidth = maxWidth
        var finalHeight = maxHeight
        if (ratioMax > ratioBitmap) {
            finalWidth = (maxHeight.toFloat() * ratioBitmap).toInt()
        } else {
            finalHeight = (maxWidth.toFloat() / ratioBitmap).toInt()
        }
        Bitmap.createScaledBitmap(this, finalWidth, finalHeight, true)
    } else this
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-06-20T05:37:34.577

如果您不想重新发明轮子，[这是来自 ArthurHub 的一个很棒的库，可以以编程方式和交互方式处理图像裁剪。](https://github.com/ArthurHub/Android-Image-Cropper)

但是如果你喜欢像我这样不臃肿的版本..，这里显示的内部函数是一个相当复杂的执行图像缩放的标准选项

```
/**
 * Resize the given bitmap to the given width/height by the given option.<br>
 */

enum RequestSizeOptions {
    RESIZE_FIT,
    RESIZE_INSIDE,
    RESIZE_EXACT
}

static Bitmap resizeBitmap(Bitmap bitmap, int reqWidth, int reqHeight, RequestSizeOptions options) {
    try {
        if (reqWidth > 0 && reqHeight > 0 && (options == RequestSizeOptions.RESIZE_FIT ||
                options == RequestSizeOptions.RESIZE_INSIDE ||
                options == RequestSizeOptions.RESIZE_EXACT)) {

            Bitmap resized = null;
            if (options == RequestSizeOptions.RESIZE_EXACT) {
                resized = Bitmap.createScaledBitmap(bitmap, reqWidth, reqHeight, false);
            } else {
                int width = bitmap.getWidth();
                int height = bitmap.getHeight();
                float scale = Math.max(width / (float) reqWidth, height / (float) reqHeight);
                if (scale > 1 || options == RequestSizeOptions.RESIZE_FIT) {
                    resized = Bitmap.createScaledBitmap(bitmap, (int) (width / scale), (int) (height / scale), false);
                }
            }
            if (resized != null) {
                if (resized != bitmap) {
                    bitmap.recycle();
                }
                return resized;
            }
        }
    } catch (Exception e) {
        Log.w("AIC", "Failed to resize cropped image, return bitmap before resize", e);
    }
    return bitmap;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-12-09T12:38:23.457

```
public static Bitmap scaleBitmap(Bitmap bitmap, int wantedWidth, int wantedHeight) {
    float originalWidth = bitmap.getWidth();
    float originalHeight = bitmap.getHeight();
    Bitmap output = Bitmap.createBitmap(wantedWidth, wantedHeight, Config.ARGB_8888);
    Canvas canvas = new Canvas(output);
    Matrix m = new Matrix();

    float scalex = wantedWidth/originalWidth;
    float scaley = wantedHeight/originalHeight;
    float xTranslation = 0.0f, yTranslation = (wantedHeight - originalHeight * scaley)/2.0f;

    m.postTranslate(xTranslation, yTranslation);
    m.preScale(scalex, scaley);
    // m.setScale((float) wantedWidth / bitmap.getWidth(), (float) wantedHeight / bitmap.getHeight());
    Paint paint = new Paint();
    paint.setFilterBitmap(true);
    canvas.drawBitmap(bitmap, m, paint);

    return output;
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-12-06T13:36:56.090

我的解决方案是这样，它保持纵横比，并且只需要一个尺寸，例如，如果你有一个 1920*1080 和一个 1080*1920 的图像并且你想将其调整为 1280，第一个将是 1280*720，第二个将是 720*1280

```
public static Bitmap resizeBitmap(final Bitmap temp, final int size) {
        if (size > 0) {
            int width = temp.getWidth();
            int height = temp.getHeight();
            float ratioBitmap = (float) width / (float) height;
            int finalWidth = size;
            int finalHeight = size;
            if (ratioBitmap < 1) {
                finalWidth = (int) ((float) size * ratioBitmap);
            } else {
                finalHeight = (int) ((float) size / ratioBitmap);
            }
            return Bitmap.createScaledBitmap(temp, finalWidth, finalHeight, true);
        } else {
            return temp;
        }
    } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-07-26T18:22:41.253

重新缩放图像涉及简单的数学运算，请考虑以下代码片段并遵循以下步骤： 1\. 假设您有 720x1280 的 Imaan 图像，并且您希望适合 420 宽度，获得给定数学所需的缩小百分比，

```
originalWidth = 720;
wP = 720/100;
/*  wP = 7.20 is a percentage value */ 
```

2.  现在从原始宽度中减去所需的宽度，然后将结果乘以`wP`。您将获得宽度减小的百分比。

`difference = originalWidth - 420; dP = difference/wP;`

这里`dP`将是 41.66，表示您正在减小大小 41.66%。因此，您必须将高度降低 41.66( `dP`) 以保持该图像的比例或比例。计算如下给出的高度，

```
hP = originalHeight / 100;
//here height percentage will be 1280/100 = 12.80
height = originalHeight - ( hp * dP);
// here 1280 - (12.80 * 41.66) = 746.75 
```

这是您的合适比例，您可以在 420x747 中调整图像/位图的大小。它将返回调整大小的图像而不会丢失比率/比例。

**例子**

```
public static Bitmap scaleToFit(Bitmap image, int width, int height, bool isWidthReference) {
    if (isWidthReference) {
        int originalWidth = image.getWidth();
        float wP = width / 100;
        float dP = ( originalWidth - width) / wP;
        int originalHeight = image.getHeight();
        float hP = originalHeight / 100;
        int height = originalHeight - (hP * dP);
        image = Bitmap.createScaledBitmap(image, width, height, true);
    } else {
        int originalHeight = image.getHeight();
        float hP = height / 100;
        float dP = ( originalHeight - height) / hP;
        int originalWidth = image.getWidth();
        float wP = originalWidth / 100;
        int width = originalWidth - (wP * dP);
        image = Bitmap.createScaledBitmap(image, width, height, true);
    }
    return image;
} 
```

在这里，您只是参考高度或宽度参数来缩放图像以适应所需的标准。

# ruby-on-rails-3 - 控制器中的更新操作未更改

> ID：15440649
> 
> 赞同：1
> 
> 时间：2013-03-15T19:30:01.223
> 
> 标签：ruby-on-rails-3, attributes, params

我正在尝试将名为 listing_status 的属性的状态从 Active 更改为 Terminated。我像这样尝试过，但它不起作用。知道我做错了什么吗？

```
<%=link_to("Terminate", listing_path(listing, :listing_status => "Terminated"), :method => :put, :confirm => "Are you sure you want to TERMINATE this listing?", :class => 'btn btn-danger')%> 
```

列出控制器更新操作

```
def update  
@listing = Listing.find(params[:id])

respond_to do |format|
  if @listing.update_attributes(params[:listing])
    if @listing.listing_status == "Active"
        @listing.sold.destroy if @listing.sold
    end 
    flash[:notice] = 'house was successfully updated'
    format.html { redirect_to :action=> "show" }
    format.json { head :no_content }
  else
    format.html { render action: "edit" }
    format.json { render json: @listing.errors, status: :unprocessable_entity }
  end
end 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:11:57.337

您将状态传递为`params[:listing_status]`，但尝试使用 更新列表`params[:listing]`。由于没有具有该名称的参数，因此不会发生更新。

您可能希望更改链接以适应预期的参数格式：

```
<%= link_to("Terminate", 
  listings_path(listing, 'listing[listing_status]' => "Terminated"),
  :method => :put, :confirm => "Are you sure you want to TERMINATE this listing?", 
  :class => 'btn btn-danger') %> 
```

# php - Login and then checkout PHP

> ID：15440656
> 
> 赞同：0
> 
> 时间：2013-03-15T19:30:44.900
> 
> 标签：php, html, login

When a person logs in, it directs them to the index.php band lets them checkout on my checkout page. When i change where i am directing them when they click login it doesnt work, then when they go to check out it keeps asking them to login. Anyone know where i may be going wrong?

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">  
 <head>  
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  
 </head>  
 <body>  
 <div id="main">
 <?php
 include "base.php"; 
 if(!empty($_SESSION['LoggedIn']) && !empty($_SESSION['Email']))
 {
      ?>

     <h1>Member Area</h1>
        <p>Thanks for logging in! Your email address is: <b><?=$_SESSION['Email']?><b> 

     <ul>
          <li><a href="logout.php">Logout.</a></li>
     </ul>

      <?php
  }
  elseif(!empty($_POST['email']) && !empty($_POST['password']))
 {
     $email = mysqli_real_escape_string($_SESSION['base'], $_POST['email']);
     $password = md5(mysqli_real_escape_string($_SESSION['base'], $_POST['password']));

     $checklogin = mysqli_query($_SESSION['base'], "SELECT * FROM Users WHERE Email =   '".$email."' AND Password = '".$password."'");

     if(mysqli_num_rows($checklogin) == 1)
     {
        $row = mysqli_fetch_array($checklogin);
            $email = $row['Email'];

         $_SESSION['Email'] = $email;
         $_SESSION['LoggedIn'] = 1;

     }
     else
      {
         echo "<h1>Error</h1>";
         echo "<p>Sorry, your account could not be found. Please <a href=\"index.php\">click here to try again</a>.</p>";
     }
 }
 else
 {     
    ?>

    <h1>Member Login</h1>

    <p>Thanks for visiting! Please either login below, or <a href="register.php">click here to register</a>.</p>

     <form method="post" action="index.php" name="loginform" id="loginform">
     <fieldset>
    <label for="email">Email:</label><input type="text" name="email" id="email" />   <br />
        <label for="password">Password:</label><input type="password" name="password"     id="password" /><br />
        <input type="submit" name="login" id="login" value="Login" />
         </fieldset>
         </form>

    <?php
 }
 ?>
 </div>
 </body>
 </html> 
```

And here is the base.php

```
 <?php
 session_start();

 $dbhost = "localhost"; // this will ususally be 'localhost', but can sometimes differ
 $dbname = "Abandoned"; // the name of the database that you are going to use for this project
 $dbuser = "root"; // the username that you created, or were given, to access your database
 $dbpass = ""; // the password that you created, or were given, to access your database
 $base = mysqli_connect($dbhost, $dbuser, $dbpass, $dbname); if (!$base){
            echo "<p>server connection error:
 mysqli_connect_error()</p>";
 }
 $_SESSION['base'] = $base; //database connection status transfer;
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:52:05.190

要使用基于 cookie 的会话，必须在向浏览器输出任何内容之前调用 session_start()。参考： http: [//php.net/manual/en/function.session-start.php](http://php.net/manual/en/function.session-start.php)

要解决此问题，您可以移至 `include "base.php";` 第一行 html 之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:39:54.033

改变：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">  
 <head>  
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  
 </head>  
 <body>  
 <div id="main">
 <?php
 include "base.php"; 
```

至

```
<?php include "base.php"; ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">  
 <head>  
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  
 </head>  
 <body>  
 <div id="main"> 
```

请记住，我假设 session_start() 在您的 base.php 文件中。如果不是，它可能应该是:) session_start() 需要在任何输出/标题之前运行。没有它，您的会话将无法正常工作。

# php - 从mysql字段中选择数据使用值作为php变量

> ID：15440657
> 
> 赞同：1
> 
> 时间：2013-03-15T19:30:45.820
> 
> 标签：php, mysql

我是 php 和 mysql 的新手。以下代码来自登录页面。我正在尝试在名为 users 的 mysql 数据库中使用 boolean(tinyint) 值。如果“付费”字段的值为 0，我想将用户发送到我的 pay.php 页面，如果值为 1 并且登录详细信息正确，我想将用户发送到 index.php。然而，无论数据库中的值是 0 还是 1，代码都会将用户发送到 pay.php。任何帮助将不胜感激！

```
$query = mysql_query("SELECT * FROM `users` WHERE username = '$username' AND password = '$password'") or die (mysql_error()); // mySQL query

$r = mysql_num_rows($q); // Checks to see if anything is in the db.
$row = mysql_fetch_array($query);
if($row['paid'] == 0);{     //NOT WORKING!!!    
    header ("location:pay.php");// go to pay.php
    exit( );// Stops the rest of the script.
}

if ($r == 1) { // There is something in the db. The username/password match up.
    $_SESSION['logged'] = 1; // Sets the session.
    header ("location:index.php");// go to index.php
}
else { // Invalid username/password.
    exit("Incorrect username/password!"); // Stops the script with an error message.        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:43:26.153

```
if($row['paid'] == 0);{ 
```

去掉那里的分号：

```
if($row['paid'] == 0){ 
```

# ios - XCode (4.6) Analyzer - 为什么在一种情况下检测到泄漏而不在另一种情况下检测到泄漏？

> ID：15440658
> 
> 赞同：3
> 
> 时间：2013-03-15T19:30:52.253
> 
> 标签：ios, xcode

下面的两种方法都分配一个 NSString 并泄漏它。运行 XCode (4.6) Anaylzer 成功标记了 bar2 中的泄漏，但在 bar1 中没有提及它。

我不明白为什么。

在我的实际项目中，我们发现了一个泄漏，我们希望以一种明显的方式捕获它，就像 bar2 中的那样，但由于 bar1 中的行为相同，它没有被发现。

请帮我理解为什么。谢谢！

```
-(void)bar1
{
    NSString* foo = [[NSString alloc] initWithString:@"foo"];
    NSLog(@"%@", foo);

    for (int i=0; i<4; i++) {
    }
}

-(void)bar2
{
    NSString* foo = [[NSString alloc] initWithString:@"foo"];
    NSLog(@"%@", foo);
} 
```

你们中的一些人提到静态字符串的情况是“过分做作的”。这个不那么做作的示例显示了相同的行为：

```
-(void)bar1
{
    NSString* foo = [[NSString alloc] initWithFormat:@"%d",rand()];
    NSLog(@"%@", foo);

    for (int i=0; i<4; i++) {
    }
}

-(void)bar2
{
    NSString* foo = [[NSString alloc] initWithFormat:@"%d",rand()];
    NSLog(@"%@", foo);
} 
```

感谢那些指出迭代次数会产生影响的人。使用 3，它报告泄漏，使用 4，它不报告。这是一个没有死代码的新示例，只有迭代不同：

报告泄漏：

```
-(void)bar1
{
    int i=0;
    while (i<3) {
        i++;
    }

    NSString* foo = [[NSString alloc] initWithFormat:@"%d",i];
    NSLog(@"%@", foo);
} 
```

不报告泄漏：

```
-(void)bar2
{
    int i=0;
    while (i<4) {
        i++;
    }

    NSString* foo = [[NSString alloc] initWithFormat:@"%d",i];
    NSLog(@"%@", foo);
} 
```

我已经向 Apple 开具了 DTS 票证，因为在我看来，这个精致的示例清楚地表明这是 Analyzer 中的一个错误。

[DTS 要求我使用https://bugreport.apple.com](https://bugreport.apple.com)将其作为错误打开，我已经完成了。这是问题 ID 13491388。

2013 年 3 月 29 日更新：Apple 报告我的错误 13491388 是错误 11486907 的欺骗。但是，我无法打开或阅读有关错误 11486907 的任何内容，因此该信息完全无用。

苹果开发者支持失败:-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T03:24:56.480

Clang 的静态分析器似乎是基于控制流的：报告总是“如果你遵循这个代码路径，就会发生这种坏事”。我最好的猜测是，这是 SA 的不同位之间的不良交互：

*   泄漏检测器可能仅在下次写入变量或函数返回时才注意到泄漏。
*   它通过一个循环的次数是有限制的（以避免永远进行搜索）——检查两次迭代应该足以检测到大多数循环错误。
*   在达到迭代限制时，静态分析器“知道”它还不会退出循环（因为`i`仍然小于 4），所以它放弃了。

我怀疑减少迭代次数会导致检测到泄漏。

如果优化器确定变量在`NSLog()`返回后已失效并将此信息用于 SA，则在启用优化的情况下进行分析（我认为 Xcode 支持如果您编辑方案）可能会给出不同的结果。

您可能还可以调整报告问题时的保守程度（通过命令行选项，或直接从命令行运行 clang？），但如果不标记大量误报，这可能很难做到。

静态分析也不能替代像 Leaks 这样的泄漏检查器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T15:04:13.100

另一个答案是正确的。我想为后代提供更多细节。

检漏仪实际上*确实*注意到了这种泄漏。问题是泄漏被认为是低重要性的分析器结果，如果泄漏后的每条路径都以“接收器”结束（基本上是分析的异常终止），则不会报告泄漏。这是为了防止嘈杂或误报的泄漏报告；例如：

```
NSString *foo = [[NSString alloc] initWithString:@"foo"];
if (SOME_CONDITION) { 
    NSLog(@"OH NO!");
    exit(-1); 
} else { 
    [foo release]; 
} 
```

这将产生一个泄漏报告，因为如果条件评估为真，但在`exit`运行之前，将会有一个泄漏报告，因为 foo 不再被引用但仍然拥有。（这段代码看起来很奇怪，但正常的断言也会触发完全相同的误报。）通过抑制（总是）导致接收器的路径上的泄漏，这里不会产生误报。

不幸的是，当分析器放弃时，通过“太多”次循环也会产生接收器。这由命令行参数控制`-analyzer-max-loop`；如果您通过`-analyzer-max-loop 5`了，那么您将获得带有示例代码的泄漏报告。

这也解释了为什么使用类似的东西`rand()`而不是`4`工作；在探索程序状态时，分析器会考虑我们没有通过循环的情况，一次，两次，三次等。任何更高的循环计数都会导致接收器，但由于并非*所有路径*都通过接收器，所以你仍然得到泄漏报告。（即分析器第一次看到`i < rand()`错误的路径，我们离开函数，因此报告泄漏。）

# php - PHP：如何验证英国的固定电话和手机号码？

> ID：15440662
> 
> 赞同：1
> 
> 时间：2013-03-15T19:31:11.793
> 
> 标签：php, regex, preg-match

如何验证英国电话号码？我从这个网站复制了答案，但这个答案只接受手机号码。我想同时接受固定电话和手机号码。可能吗？

```
 # @reference: http://stackoverflow.com/questions/8099177/validating-uk-phone-numbers-in-php

            $telephone = "01752311149"; // not ok.
            $telephone = "07742055388"; // ok.
            $pattern = "/^(\+44\s?7\d{3}|\(?07\d{3}\)?)\s?\d{3}\s?\d{3}$/";

            if (!preg_match($pattern, $telephone))
            {
                $error = true;
                $message.='<error elementid="telephone" message="invalid" />';
            } 
```

我已经尝试使用下面的这个正则表达式，但它根本不起作用，

```
#http://stackoverflow.com/questions/14512810/regular-expression-mobile-and-landline-number
$pattern = "/^\(0\d{1,2}\)\d{3}-\d{4}$/"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:47:08.770

[在用于验证和格式化 GB 电话号码](http://www.aa-asterisk.org.uk/index.php/Regular_Expressions_for_Validating_and_Formatting_GB_Telephone_Numbers)的正则表达式中有一系列用于验证电话号码的正则表达式：

或者，[RegExLib.com](http://regexlib.com/REDetails.aspx?regexp_id=2632&AspxAutoDetectCookieSupport=1)上的一个似乎运行良好：

```
^((\(44\))( )?|(\(\+44\))( )?|(\+44)( )?|(44)( )?)?((0)|(\(0\)))?( )?(((1[0-9]{3})|(7[1-9]{1}[0-9]{2})|(20)( )?[7-8]{1})( )?([0-9]{3}[ -]?[0-9]{3})|(2[0-9]{2}( )?[0-9]{3}[ -]?[0-9]{4}))$ 
```

**编辑：**

这将允许移动、固定电话和特殊服务号码（999、123 等）——假设空间已被剥离：

`'/^(?>(?>\+44|0)(?>(?!7624)(?>[12389]\d|5[56]|7[06])\d{8}|(?>(?>[58]00|1\d{2})\d{6})|(?>8001111|845464\d)|7(?>[45789]\d{8}|624\d{6}))|999|112|100|101|111|116|123|155|118\d{3}|(?>\+44|0)(?>800111|8454647))$/D'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T19:59:09.900

您最好使用现有的库，而不是尝试自己的验证，因为规则有些复杂并且可能会随着时间而改变。

例如，这个[PHP 版本](https://github.com/davideme/libphonenumber-for-PHP)的 Google 的[libphonenumber](https://code.google.com/p/libphonenumber/)：

```
$phoneUtil = PhoneNumberUtil::getInstance();
try {
    $numberProto = $phoneUtil->parse('02012345678', 'GB');
} catch (NumberParseException $e) {
    echo $e;
} 
```

然后您可以通过以下方式检查号码的有效性：

```
$phoneUtil->isValidNumber($numberProto); 
```

此外，此库允许您检测电话号码类型（固定线路、移动电话、voip 等）

# c# - HttpRequest 结束时的事件？

> ID：15440664
> 
> 赞同：0
> 
> 时间：2013-03-15T19:31:31.077
> 
> 标签：c#, asp.net, linq, webforms

我正在使用 asp.net 表单。有一个`Page_Load`事件，但有一个结束事件吗？

我在页面加载时创建了一个 linq 数据上下文，我想在完成后处理它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T19:34:13.777

您可能应该在`Page_Unload`Event 是页面生命周期中的最后一个事件时执行此操作。有关页面事件的更多信息，请查看[此](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T21:57:51.683

正如 Emmanuel N 所说，有`Page_Unload`事件发生。但是，如果您使用`using`，则无需担心处置`DataContext`。

这是一个[例子](http://www.thereforesystems.com/linq-to-sql-tutorial/)。

```
protected void buttonSearch_Click(object sender, EventArgs e)
{
  using (var context = new NorthwindDataContext())
  {
    var customers =
      from c in context.Customers
      select c;

    gridViewCustomers.DataSource = customers;
    gridViewCustomers.DataBind();
  }
} 
```

[使用优于处置。](https://stackoverflow.com/a/1034656/296861)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:44:10.453

顺便说一句，如果您使用的是实体框架，则不必处理 DbContext：默认行为是在需要时打开连接并在完成时关闭它（[更多详细信息](http://blog.jongallant.com/2012/10/do-i-have-to-call-dispose-on-dbcontext.html#.UUN4_hwwp2M "一些细节")）。

# sql - 检索项目的最新交易

> ID：15440666
> 
> 赞同：1
> 
> 时间：2013-03-15T19:31:34.957
> 
> 标签：sql

我有一张列出许多物品交易的表格。我需要获取每个项目的最后一条记录（最新的记录）。

例如，我的表如下所示：

```
Item    Date    TrxLocation
XXXXX   1/1/13   WAREHOUSE
XXXXX   1/2/13   WAREHOUSE
XXXXX   1/3/13   WAREHOUSE

aaaa    1/1/13   warehouse
aaaa    2/1/13   WAREHOUSE 
```

我希望数据返回如下：

```
XXXXX    1/3/13   WAREHOUSE
AAAA     2/1/13   WAREHOUSE 
```

我尝试做这样的事情，但它带回了错误的日期

```
select Distinct ITEMNMBR 
TRXLOCTN,
DATERECD
from TEST
where DateRecd = (select max(DATERECD)
        from TEST) 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:38:23.153

你在正确的轨道上。您只需要将您的子查询更改为相关子查询，这意味着您为外部查询提供了一些上下文。如果你自己运行你的子查询（`select max(DATERECD) from TEST`），你会得到什么？无论项目如何，您都会得到一个日期，它是整个表中的最新日期。您需要通过链接 ITEMNMBR 列将子查询绑定到外部查询，如下所示：

```
SELECT ITEMNMBR, TRXLOCTN, DATERECD
FROM TEST t
WHERE DateRecd = (
  SELECT MAX (DATERECD) 
  FROM TEST tMax 
  WHERE tMax.ITEMNMBR = t.ITEMNMBR) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:06:08.513

不需要子查询。您正在查询单个表，需要选择 MAX(date) 和 GROUP BY item 和 TrxLocation。

```
SELECT Item, max(DATERECD) AS max_dt_recd, TrxLocation
 FROM test
GROUP BY Item, TrxLocation
/ 
```

# jquery - 如何实时显示数据库

> ID：15440669
> 
> 赞同：-2
> 
> 时间：2013-03-15T19:31:38.253
> 
> 标签：jquery, mysql, ajax

我对实时数据库有一些疑问。

这意味着当数据库更改该值时，页面将直接显示类似 Live Chat 的内容。

```
 Language : Jquery + PHP

Example:

    MySQL Database:
    Table : user
    column : username,Status,Date,TodayOnline
    Data : [Kenny, Online,15/03/2013,0],[David, Offline,16/03/2013,1]

Action:

    When David going to online, it will show at page directly by using replace the "Kenny is now Online" with "David is now online"
    and show Today online time mean how many time he is only today.

Screen Show:

    David Is Now Online (Today Online : 1) 
```

希望你们明白我的意思，我不知道如何通过 ajax 来做到这一点，或者谁能告诉我如何让 ajax 每秒运行或任何其他好主意来立即/实时显示它？

提前致谢。

**更新**

这是我的代码 JS

```
$.ajax({
        type: "post",
        url: "/checkOnline.php",
        cache: false,
        data:{ date: $("#date").val(),time: $("#time").val()},
        success: function(responds){
            var obj = JSON.parse(responds);
                try{
                    ('#online').text(responds+" Is Now Online");
                }catch(e){      
                    alert('Exception while request..');
                }
        },
        error: function(XMLHttpRequest, textStatus, errorThrown){
                    alert(XMLHttpRequest.status);
                    alert(XMLHttpRequest.readyState);
                    alert(textStatus);
        }
    }); 
```

在这里和我的索引代码，我添加了隐藏输入框以获取当前日期时间。

```
 <input name="date" id="date" value="<?= date('Y-m-d') ?>" style="display:none"/>
        <input name="time" id="time" value="<?= date('H:i:s') ?>" style="display:none"/> 
```

这是我的 checkOnline.php

```
<?php
$query = "Select username FROM user WHERE status='online'";
$result = mysql_query($query);

echo json_encode($result)
?> 
```

当有人使用 jquery 加载页面时，我运行 ajax，但我知道这是一个坏主意，但我不知道如何让它生效。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:39:07.123

基本上，为了给人一种持久性和实时更新的错觉，你需要做一些认真的开发。

但是有一些 javascript 领域随着数据更新而真正进入实时视图渲染：谷歌搜索“backbone”和“backbone marionette”和“pubsub javascript”和“comet”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:39:41.817

您需要实施[Push](http://en.wikipedia.org/wiki/Push_technology)或[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)技术。有关如何实施评论的更多信息，`PHP`请查看[此](http://www.zeitoun.net/articles/comet_and_php/start)

# c - fread 返回值 1 字节，即使文件被完全读取

> ID：15440671
> 
> 赞同：4
> 
> 时间：2013-03-15T19:31:39.960
> 
> 标签：c, file-io

我正在阅读这样的 tarfile：

```
fh = fopen(filename, "r");

if (fh == NULL) {
    printf("Unable to open %s.\n", filename);
    printf("Exiting.\n");
    return 1;
}

fseek(fh, 0L, SEEK_END);
filesize = ftell(fh);
fseek(fh, 0L, SEEK_SET);

filecontents = (char*)malloc(filesize + 1);     // +1 for null terminator

byteCount = fread(filecontents, filesize, 1, fh);
filecontents[filesize] = 0; 

fclose(fh);

if (byteCount != filesize) {
    printf("Error reading %s.\n", filename);
    printf("Expected filesize: %ld bytes.\n", filesize);
    printf("Bytes read: %d bytes.\n", byteCount);
} 
```

然后我继续解码 tarfile 的内容并提取其中存储的文件。一切正常，文件被提取得很好，但`fread()`返回`1`而不是`filesize`. 我得到的输出是：

```
Error reading readme.tar.
Expected filesize: 10240 bytes.
Bytes read: 1 bytes. 
```

根据[CPP Reference on`fread`](http://www.cplusplus.com/reference/cstdio/fread/)，返回值应该是读取的字节数。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T19:36:44.110

试试这个：

```
//byteCount = fread(filecontents, filesize, 1, fh);
byteCount = fread(filecontents, 1, filesize, fh); 
```

# python - 获取转发用户名？

> ID：15440673
> 
> 赞同：2
> 
> 时间：2013-03-15T19:31:47.380
> 
> 标签：python, python-twitter

如何使用 Python-Twitter 从我的时间线上查看每个转发的用户名？这是我到目前为止所拥有的，它可以在没有转发用户名的情况下恢复时间线：

```
import twitter
api = twitter.Api(xxxxxx)
statuses = api.GetUserTimeline('username', include_rts=True)
for tweet in statuses:
    print tweet 
```

我认为您会使用的方法是 GetTweets，它需要一个 statusID，我不确定您如何将状态 ID 从时间线调用传递到 GetRetweets 调用？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:29:12.307

试试这个：

```
import twitter

t = twitter.Api(...)

statuses = t.GetUserTimeline('username', include_rts=True)

for tweet in statuses:
    retweets = t.GetRetweets(tweet.GetId())
    users = [retweet.GetUser().GetScreenName() for retweet in retweets]
    print tweet.GetId(), users 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T15:24:56.707

我想添加到@alecxe 的答案，但有评论我无法粘贴太多代码。在我的应用程序中，我发现在获得转发之前检查推文是否有转发很有用。这在 API 配额方面节省了一点。我修改了@alecxe 的代码以满足我的需要：

```
import twitter, json

t = twitter.Api(...)

statuses = t.GetUserTimeline('username', include_rts=True)

for tweet in statuses:
    json_tweet = json.loads(str(tweet))

    rts = 0
    try:
        rts = json_tweet['retweet_count']
    except:
        rts = 0

        if rts > 0:
            retweets = t.GetRetweets(tweet.GetId())
            users = [retweet.GetUser().GetScreenName() for retweet in retweets]
            print tweet.GetId(), users 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-03T15:28:29.897

或者你也可以试试这个。

```
import twitter

t = twitter.Api(...)

statuses = t.GetUserTimeline('username', include_rts=True)

for tweet in statuses:
    retweets = t.GetRetweets(tweet.GetId())
    users = [retweet.GetUser().GetScreenName() for retweet in retweets]
    print tweet.GetId(), users
    print tweet.GetRetweets() 
```

# click - 绑定颜色选择器插件到点击功能

> ID：15440678
> 
> 赞同：0
> 
> 时间：2013-03-15T19:31:58.903
> 
> 标签：click, jquery, color-picker

我正在尝试将一个名为 miniColors ( [http://bit.ly/Mq88mU](http://bit.ly/Mq88mU) ) 的 jQuery 插件绑定到我拥有的单击功能，以将幻灯片添加到幻灯片管理器。我似乎无法弄清楚如何正确绑定它。有任何想法吗？

这是我的添加幻灯片功能

```
el.on('click', '.addSlide', function (e) {
    e.preventDefault();
    var templ = $('#slideTemplate').html();
    var id = parseInt( $('ul.ui-sortable li').last().find('.order').val() ) || 0;
    var slide = templ.replace(/%id%/g, id).replace(/%id1%/g, id + 1);
    $(templ).find('.minicolors').minicolors();
    $(slide).hide().insertAfter($('ul.ui-sortable li').last()).fadeIn(300);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:39:51.250

看起来您正在尝试初始化 DOM 上不存在的插件。

```
var templ = $('#slideTemplate').html();
var id = parseInt( $('ul.ui-sortable li').last().find('.order').val() ) || 0;
var slide = templ.replace(/%id%/g, id).replace(/%id1%/g, id + 1);

$('PARENT').append($(templ));
$(templ).find('.minicolors').minicolors(); 
```

或者，如果您想直接从 DOM 工作：

```
var templ = $('#slideTemplate');
var id = parseInt( $('ul.ui-sortable li').last().find('.order').val() ) || 0;
var slide = templ.html().replace(/%id%/g, id).replace(/%id1%/g, id + 1);
templ.find('.minicolors').minicolors(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:49:13.880

您是否尝试绑定它以使其出现在点击中？我想你只需要做类似的事情......

```
$('.minicolors').minicolors(); 
```

您可以使用 jQuery 选择器来选择类“minicolors”的 div。

我不确定你使用 find() 做什么，但我很确定你不想使用 slideTemplate div 中的任何 HTML 作为它前面的选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T22:04:13.080

不确定这是否是完成它的正确方法，但通过使用 fadeIn 函数，我已经能够完成我想要的。

```
$(slide).hide().insertAfter($('ul.ui-sortable li').last()).fadeIn(function(){
    $(this).find('.minicolors').minicolors();
}); 
```

# mule - 如何不在肥皂请求和响应中发送骡头

> ID：15440691
> 
> 赞同：1
> 
> 时间：2013-03-15T19:33:15.140
> 
> 标签：mule

我有一个请求-响应`http endpoint`定义如下：

```
<http:inbound-endpoint address="${mvi.service.address}" exchange-pattern="request-response">
   <cxf:proxy-service wsdlLocation="classpath:mvi.wsdl" namespace="http://pennmutual.com/services/mvi" service="MVIService" />
</http:inbound-endpoint> 
```

它发送回客户端的响应具有如下附加的 mule 标头：

```
 <soap:Header>
  <mule:header xmlns:mule="http://www.muleumo.org/providers/soap/1.0">
     <mule:MULE_CORRELATION_ID>4784545a-4fad-44ac-171e-1bc150ccdcb2</mule:MULE_CORRELATION_ID>
     <mule:MULE_CORRELATION_GROUP_SIZE>-1</mule:MULE_CORRELATION_GROUP_SIZE>
     <mule:MULE_CORRELATION_SEQUENCE>-1</mule:MULE_CORRELATION_SEQUENCE>
  </mule:header> 
```

我怎样才能摆脱`<mule:header>`元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:34:41.233

添加：

```
enableMuleSoapHeaders="false" 
```

在你的`cxf:proxy-service`. 并且还添加了一个全局 CXF 配置元素：

```
<cxf:configuration enableMuleSoapHeaders="false"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-04T05:43:14.460

有一种替代方法可以通过使用`cxf:outInterceptors`和 java 类来删除 Mule 标头，如下所示：-

```
<http:inbound-endpoint address="${mvi.service.address}" exchange-pattern="request-response"/>
<cxf:proxy-service wsdlLocation="classpath:mvi.wsdl" namespace="http://pennmutual.com/services/mvi" service="MVIService" >
<cxf:outInterceptors >
  <spring:bean id="outfault" class="com.SOAPInterceptorOutboundHeaderRemover"/>
</cxf:outInterceptors> 
</cxf:proxy-service> 
```

在您的 SOAPInterceptorOutboundHeaderRemover java 类中：-

```
public class SOAPInterceptorOutboundHeaderRemover extends AbstractSoapInterceptor {

public SOAPInterceptorOutboundHeaderRemover() {
super(Phase.PRE_PROTOCOL);
}

@Override
public void handleMessage(SoapMessage arg0) throws Fault {
List<Header> headerList = arg0.getHeaders();
Header muleHeader = null;
boolean isMuleHeader = false;
for (Header header : headerList) {
ElementNSImpl element = (ElementNSImpl) header.getObject();
if ("mule:header".equals(element.getNodeName())) {
isMuleHeader = true;
muleHeader = header;
}
}
if (isMuleHeader) {
arg0.getHeaders().remove(muleHeader);
}

}
} 
```

这个`cxf:outInterceptors`java类是响应中的Mule标头并且工作正常

# mysql - PHP Mysql 我的表中有四行 1234 但我只想显示 123 行

> ID：15440693
> 
> 赞同：-3
> 
> 时间：2013-03-15T19:33:21.397
> 
> 标签：mysql, phpmyadmin

我的表 1234 中有四行，但我只想显示 123 行，或者就像我有 N 行，我想在 php Mysql 查询中显示 N-1 行。请帮我解决它。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:35:25.530

您可以根据需要使用“LIMIT”来获取该行数。

编辑。

您在 SQL 中使用的这个“限制”。[http://php.about.com/od/mysqlcommands/g/Limit_sql.htm](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:35:52.833

使用 mysql 子句限制加入查询

前任：

```
select * from extable limit 30 
```

# javascript - d3：具有不同y域的多条线相同的图？

> ID：15440694
> 
> 赞同：1
> 
> 时间：2013-03-15T19:33:23.123
> 
> 标签：javascript, d3.js, graphing

我有所有时间序列的数据，所以我的 d3 图表的 x 轴始终是时间。我需要支持在一张图上有多条线，但不同的线对于 y 轴数据可以有截然不同的域。例如第 1 行可以是

```
1    2     3     4     5     for times 1-5
5000 10000 15000 20000 25000 for times 1-5 
```

尝试在 d3 中处理此问题的好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T02:58:49.747

您可以有两个单独的 Y 轴。一个在图表的左侧，一个在右侧。

这篇文章描述了设置一个两线图。[http://www.d3noob.org/2013/01/adding-more-than-one-line-to-graph-in.html](http://www.d3noob.org/2013/01/adding-more-than-one-line-to-graph-in.html)

这篇文章描述了为与您描述的具有类似比例问题的线条设置两个不同的 y 轴。[http://www.d3noob.org/2013/01/using-multiple-axes-for-d3js-graph.html](http://www.d3noob.org/2013/01/using-multiple-axes-for-d3js-graph.html)

最终结果是这样的。 ![在此处输入图像描述](../Images/63de2dd12d6db46a790f1e073579acc3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:42:17.127

您是否考虑过在相同的 x 轴刻度上堆叠两个图？或者为了快速比较，我有时会重新缩放一个数据系列以将其带入另一个领域，然后在图例中注明。“系列 1（x10 缩放）”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:39:54.550

如果 y 值没有零，我建议使用对[数刻度。](https://github.com/mbostock/d3/wiki/Quantitative-Scales#wiki-log)在任何情况下，只需创建一个范围从所有行的最小值到最大值的单个 y 刻度，并将其用于所有内容。

# php - SimpleTest（PHP 单元测试器）似乎报告了不正确的测试用例计数

> ID：15440697
> 
> 赞同：1
> 
> 时间：2013-03-15T19:33:42.743
> 
> 标签：php, unit-testing, simpletest

这是我的两个测试用例：

```
<?php
require_once(dirname(__FILE__) . '/../simpletest/unit_tester.php');

class Tests extends UnitTestCase {
    function test_1() {
        $this->assertTrue(true);
    }
    function test_2() {
        $this->assertTrue(true);
    }
}
?> 
```

和我的测试驱动程序：

```
<?php
require_once(dirname(__FILE__) . '/../simpletest/simpletest.php');

$test = new TestSuite();
$test->addFile(dirname(__FILE__) . '/ex1.php');
$test->run(new TextReporter());
?> 
```

我得到这个输出：

```
TestSuite
OK
Test cases run: 1/2, Passes: 2, Failures: 0, Exceptions: 0 
```

当我从终端运行这样的驱动程序文件（ex2.php）时：

```
curl 'http://localhost/~marc/simpletestexample/ex2.php' 
```

现在，为什么它报告“测试用例运行：1/2”而不是“测试用例运行：1/1”？似乎某处没有运行的幻像测试用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T12:38:32.447

```
<?php  
  require_once(dirname(__FILE__) . '/simpletest/autorun.php');  
  require_once('/classes/hello.php');     
  class Testhello extends UnitTestCase {  
    function testViewhelloWithEntries()  
    {  
      $hello= new hello();
      $hello->add("Bob", "Hi, I'm Bob.");  
      $hello->add("Tom", "Hi, I'm Tom.");  
      $hello->add("jack", "Hi, I'm Jack.");  
      $entries = $hello->viewAll(); 
      $count_is_greater_than_zero = (count($entries) > 0);  
      $this->assertTrue($count_is_greater_than_zero);  
      $this->assertIsA($entries, 'array');  
      foreach($entries as $entry) {  
          $this->assertIsA($entry, 'array');  
          $this->assertTrue(isset($entry['name']));  
          $this->assertTrue(isset($entry['message']));
      }
    }
    public function hi($name ,$message)
    {
       self::$_entries[] = array('name' => $name, 'message' => $message ); //fixed!  
    return true;  
    }
     function testViewhelloWithNoEntries()  
    {  
        $hello = new hello();  
        $hello->deleteAll(); // Delete all the entries first so we know it's an empty table  
        $hello->jay();
        $entries = $hello->viewAll();  
        $this->assertEqual($entries, array());  
    }  

}
    ?> 
```

在类文件夹中创建一个 hello.php

```
 <?php  
class hello  
{
 private static $_entries = array(  
        array (  
            'name' => 'Kirk', 
            'message' => 'Hi, I\'m Kirk.'  
        ),  
        array (  
            'name' => 'Ted',  
            'message' => 'Hi, I\'m Ted.'  
        )  
    );  

 public function viewAll() {  
        // Here, we should retrieve all the records from the database.  
        // This is simulated by returning the $_entries array  
        return self::$_entries;  
    }  

    public function add( $name, $message ) {  
        // Here, we simulate insertion into the database by adding a new record into the $_entries array  
        // This is the correct way to do it: self::$_entries[] = array('name' => $name, 'message' => $message );  
        //    print_r(     self::$_entries[] = array('name' => $name, 'message' => $message )); //oops, there's a bug here somewhere  
      echo  " <br> ";
  echo "My name is a {$name}"."&nbsp;"."{$message}";
        return true;  
    }  

    public function deleteAll() {  
        // We just set the $_entries array to simulate   
        self::$_entries = array();  
        return true;  
    }  
     public function jay() {  

        // We just set the $_entries array to simulate   
        //echo "hello world";
        self::$_entries = array();  
        return true;  
    }  

}  
?> 
```

# c++ - std::put_time() 的问题

> ID：15440700
> 
> 赞同：2
> 
> 时间：2013-03-15T19:33:49.133
> 
> 标签：c++, visual-c++, c++11, chrono

嗨，我在这里有一个非常简单的测试用例，可以在 Visual Studio 2012 下编译。但是它会产生运行时失败。产生此故障的行与 cppreference.com 上的许多与时间功能相关的示例完全相同。带有示例的页面就像这样[http://en.cppreference.com/w/cpp/chrono/c/localtime](http://en.cppreference.com/w/cpp/chrono/c/localtime)

```
#include <fstream>
#include <iomanip>
#include <time.h>
#include <stdio.h>
#include <chrono>
#include <string>

using namespace std;

ofstream & GetTimeStr(ofstream & ofs)
    {
    time_t rawTime = std::chrono::system_clock::to_time_t(std::chrono::system_clock::now());

    // fails on this line, very deep inside the runtime code.
    ofs << std::put_time(std::localtime(&rawTime), "%c %Z");
    return ofs;
    }

int main()
    {
    std::ofstream ofs;
    ofs.open("Logger.txt");

    if (ofs.good())
        {
        ofs << "some text " << GetTimeStr(ofs) << " more text ";   
        }
    } 
```

为了保持这篇文章干净，我把堆栈跟踪放在这里 [http://ideone.com/WaeQcf](http://ideone.com/WaeQcf)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T20:02:06.163

我猜这是 VC 运行时中的一个错误，它是由使用`%Z`in触发的`strftime`（由 调用`std::put_time`）：

[http://connect.microsoft.com/VisualStudio/feedback/details/759720/vs2012-strftime-crash-with-z-formatting-code](http://connect.microsoft.com/VisualStudio/feedback/details/759720/vs2012-strftime-crash-with-z-formatting-code)

不幸的是，它看起来不像是微软的高优先级错误。

# macos - 为 git 添加 README 时，“$ touch README”命令中的关键字“touch”有什么作用？

> ID：15440701
> 
> 赞同：3
> 
> 时间：2013-03-15T19:33:51.460
> 
> 标签：macos, github, terminal

我试图了解`touch`在 Mac 中将 README 添加到 Github 存储库时使用的关键字。

```
$ touch README 
```

这会添加一个名为`README`. 那么触摸真正代表什么？例如，如果`$ subl README`-`subl`将启动 sublime 文本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T19:36:08.907

touch 所做的只是更新文件的时间戳（如果文件存在），或者创建一个具有该名称的空文件。见[http://ss64.com/bash/touch.html](http://ss64.com/bash/touch.html)

# django - 成功 URL 重定向不适用于 django-allauth 中的自定义视图

> ID：15440702
> 
> 赞同：2
> 
> 时间：2013-03-15T19:33:54.847
> 
> 标签：django, django-views, django-allauth

我创建了自己的类 LocalSignup，它使用我自己的表单和我自己的验证逻辑扩展了基础 django-allauth SignupView 类。问题是，成功后，我无法将视图重定向到`LOGIN_REDIRECT_URL`settings.py 中的 django 以外的任何内容。我`success_url`在基于班级的视图中包含了一个字段；我尝试过覆盖该`get_success_url`功能（见下文）；我也尝试过使用 `LocalSignup.as_view(success_url="/add_account_select/")`. 没有一个工作。关于我做错了什么的任何想法？

```
class LocalSignup(SignupView):
    form_class = AllAuthUserForm
    template_name = 'signup/social_login.html'
    success_url = '/add_account_select/'  #reverse_lazy('add_account_select')    

    def get_success_url(self):
        return '/add_account_select/'  #reverse('add_account_select')

    def dispatch(self, request, *args, **kwargs):
        # self.sociallogin = request.session.get('socialaccount_sociallogin')
        return super(LocalSignup, self).dispatch(request, *args, **kwargs)

    def form_valid(self, form):
        ret = super(LocalSignup, self).form_valid(form)
        ### MY FORM VALIDATION LOGIC
        return ret

    def get_context_data(self, **kwargs):
        ret = super(LocalSignup, self).get_context_data(**kwargs)
        ret.update(dict(username=self.sociallogin.account.user.first_name,
                        photo_url=self.sociallogin.account.get_avatar_url() ))
        return ret 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-24T09:35:40.017

在默认视图中，如果登录表单视图中有“下一个”字段，allauth 将自动重定向到它。

```
<input id="login_redirect" type="hidden" name="next" value="#" /> 
```

**完整的表格**

```
 <form method="POST" action="{% url "account_login" %}">
        {% csrf_token %}
        {{form}}
        <input  type="hidden" name="next" value="/add_account_select/" />
        <button type="submit" class="btn btn-primary">Sign IN</button>
      </form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-11T13:17:57.690

只是为了提供最新的答案：

使用 django-allauth=0.30.0，以下内容在`views.py`

```
from allauth.account.views import SignupView

class LocaLSignupView(SignupView):
    success_url = '/page/to/redirect/to' 
```

# winapi - Win32：如何向 Windows 中不同用户运行的进程发布消息？

> ID：15440710
> 
> 赞同：1
> 
> 时间：2013-03-15T19:34:16.580
> 
> 标签：winapi, ipc, inter-process-communicat, window-messages, interprocess

我们运行两个应用程序，每个应用程序都使用 RegisterWindowMessage() 注册相同的消息：应用程序 A 作为普通用户，应用程序 B 作为管理员在机器上的同一用户会话中，并且这些应用程序将这个消息发送给另一个。当 A 和 B 作为同一个用户运行时，一切都很好，我们能够使用 PostMessage() 消息进行通信。现在，由于应用程序 B 以管理员身份运行，消息不再通过。我们对于它可以做些什么呢？

这种情况是否要求我们使用其他机制（消息除外）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-16T04:20:18.023

在 Windows Vista 及更高版本中，[用户界面特权隔离 (UIPI)](http://blogs.msdn.com/b/vishalsi/archive/2006/11/30/what-is-user-interface-privilege-isolation-uipi-on-vista.aspx)可防止较低完整性进程将窗口消息发送到较高完整性进程。在早期的 Windows 版本中，恶意代码可以通过滥用窗口消息来攻击管理进程。默认情况下，UIPI 会阻止所有值高于 的`WM_USER`消息，其中包括通过 注册的消息`RegisterWindowMessage()`。因此，为了允许 A 向 B 发送此类消息，B 必须首先调用它想要从较低完整性进程接收的每个阻塞消息[`ChangeWindowMessageFilter()`](http://msdn.microsoft.com/en-us/library/ms632675.aspx)。[`ChangeWindowMessageFilterEx()`](http://msdn.microsoft.com/en-us/library/dd388202.aspx)

# javascript - 未捕获的 ReferenceError：未定义 stripeResponseHandler

> ID：15440713
> 
> 赞同：3
> 
> 时间：2013-03-15T19:34:28.913
> 
> 标签：javascript, jquery, stripe-payments

我正在尝试将 Stripe 集成到信用卡表单中。

js和html可以在[http://pastie.org/private/f4flb1hktzdahl9snr4jma](http://pastie.org/private/f4flb1hktzdahl9snr4jma)查看（供参考，文档头部包含jquery）

出于某种原因，我收到以下错误：

```
Uncaught ReferenceError: stripeResponseHandler is not defined 
```

错误在第 11 行触发：

```
Stripe.createToken($form, stripeResponseHandler); 
```

基于此，Stripe.js 似乎没有正确加载？但是，这条线`Stripe.setPublishableKey('something');`工作正常。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T19:51:38.163

```
var stripeResponseHandler = function(status, response) {
  var $form = $('#payment-form');

  if (response.error) {
    // Show the errors on the form
    $form.find('.payment-errors').text(response.error.message);
    $form.find('button').prop('disabled', false);
  } else {
    // token contains id, last4, and card type
    var token = response.id;
    // Insert the token into the form so it gets submitted to the server
    $form.append($('<input type="hidden" name="stripeToken" />').val(token));
    // and submit
    $form.get(0).submit();
  }
}; 
```

您缺少部分代码，请参见此处：[https ://stripe.com/docs/tutorials/forms](https://stripe.com/docs/tutorials/forms)

# javascript - 全局“窗口”引用如何影响 iife 中的垃圾收集？

> ID：15440715
> 
> 赞同：2
> 
> 时间：2013-03-15T19:34:31.287
> 
> 标签：javascript, garbage-collection, iife

```
function BigObject() {
  var a = '';
  for (var i = 0; i <= 0xFFFF; i++) a += String.fromCharCode(i);
  return new String(a); // Turn this into an actual object
}

// iife 1 / window gets compressed into w
(function (w, $) {
    var x = new BigObject();
    $("#foo").click(function () {
      w._gaq.push("foo");
    });
})(window, window.jQuery);

// iife 2 / window reference left global
(function ($) {
    var x = new BigObject();
    $("#foo").click(function () {
      window._gaq.push("foo");
    });
})(window.jQuery); 
```

鉴于我对垃圾收集以及项目如何保存在内存中的了解最少，`1`与`2`. 在这一点上更多的是一个学术问题，而不是一个实际的瓶颈......球帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:30:38.283

您正在向后考虑垃圾收集。从广义上讲，当您无法从根源追踪到它们时，它们就会被标记为垃圾。对全局对象有本地引用并不意味着全局对象对您有引用，因此它不会影响任何东西的生命周期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T20:47:59.667

如果您要以另一种方式执行此操作：

```
(function (w) {

    var name = "bob",
        obj1 = { a : 1, b : 2 },
        obj = (function () {
            var a = obj1,
                return { items : a, getName : function () { return name; } };
        }());

    w.thing = obj;
}(window)); 
```

现在你遇到了垃圾障碍。Window 有对 obj 的引用。Obj 有一个对 obj1 的引用，并且有一个对 name 的引用的函数...

...因此，这些闭包中的任何一个都不是可垃圾收集的，直到程序绝对没有`window.thing`.

# matlab - 根据条件元素挑选行

> ID：15440720
> 
> 赞同：0
> 
> 时间：2013-03-15T19:35:00.163
> 
> 标签：matlab

我有一个 Nx3 矩阵，我想挑选出第一列和第二列满足特定条件的所有行。这是一个（非工作）示例，显示了我想要的内容：

```
a = [1 3 0; 2 3 1; 4 9 2];
a = a(a(:, 1)>3 && a(:, 2)>3) 
```

是否有办法在不必求助于计算密集型循环的情况下完成此任务`for`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:38:20.010

另一种方法：

```
ind1=find(a(:,1)>3);
ind2=find(a(:,2)>3);
a=a(intersect(ind1,ind2),:); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:41:19.213

这应该适合你：

```
a = [1 3 0; 2 3 1; 4 9 2];
a = a(a(:, 1)>3 & a(:, 2)>3,:) %you should put element-wise and (&) and put the colon (:) operator which indicates 'all columns'

ans =

 4     9     2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:37:32.627

for 循环实际上不是计算密集型的，它实际上与输入的大小成线性关系。循环N是要走的路。

# asp.net - COM 端口连接问题

> ID：15440726
> 
> 赞同：0
> 
> 时间：2013-03-15T19:35:24.397
> 
> 标签：asp.net, serial-port

我正在做一个项目，使用 asp.net 向连接到我的计算机的移动设备发送短信。我不会问怎么做。我希望有人帮我找到我的 COM 端口号

我试过 1\. 设备管理器 > 端口（com&lpt）问题：设备管理器的列表中没有端口（COM&LPT）。

1.  我以编程方式尝试我得到了这个代码

    ```
    imports System.IO.Ports

    Private Shared Sub SendSampleData()
     ' Instantiate the communications
     ' port with some basic settings
     Dim port As New SerialPort("COM1", 9600, Parity.None, 8, StopBits.One)

     ' Open the port for communications
     port.Open()

     ' Write a string
     port.Write("Hello World")

     ' Write a set of bytes
     port.Write(New Byte() {&Ha, &He2, &Hff}, 0, 3)

     ' Close the port
     port.Close()
    End Sub 
    ```

    坦率地说，我不知道如何在其中输入电话号码。

some1可以帮助我实现我的目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:40:57.623

如果设备管理器说您的计算机没有任何串行端口，那么您需要确保您的系统首先可以检测到串行端口。

...假设您的计算机有一个串行端口。可以？

如果确实如此（我假设确实如此），那么它可能在 BIOS 中被禁用。您需要在启动时进入计算机的 BIOS 或 EFI 固件并启用串行端口。

此外，切勿在代码中硬编码串行端口名称，例如`"COM1"`，使用`SerialPort.GetPortNames()`获取计算机上可用端口的列表并让用户从列表中进行选择。

# sql-server - vb.net 搜索 sql 数据库以验证客户帐号

> ID：15440729
> 
> 赞同：1
> 
> 时间：2013-03-15T19:35:32.377
> 
> 标签：sql-server, vb.net, validation

组，请原谅我可能是一个非常简单的解释和答案。但是，我正在自学 Visual Basic，并且对此完全陌生。所以你知道，我使用的是 Visual Studio 2010 Express。

我创建了一个包含客户记录表的数据库。通过我正在处理的订单输入模块，我想允许用户输入客户帐号。但是，在继续执行其余程序例程之前，我需要验证此条目。我想我知道如何连接到数据库，但我不确定如何让用户输入的数字与表格进行比较以验证客户编号。这是我写的：

```
 Dim conn As SqlClient.SqlConnection = New SqlClient.SqlConnection
            Dim dbSource As String = "Data Source = DataDesign.mdf"
            Dim dbProvider As String = "PROVIDER=SQL Server 10.0.5500;"
            Dim ds As New DataSet
            Dim sql As String = "SELECT * FROM AR_CUSTOMERS"
            Dim da As SqlClient.SqlDataAdapter = New SqlClient.SqlDataAdapter(sql, conn)
            conn.ConnectionString = dbProvider & dbSource 
            Dim search1 As Integer = Integer.Parse(txbCustomerNo.Text)
            Dim cmd1 As SqlCommand = New SqlCommand
            conn.Open() 
```

我现在卡住了。我已经定义了我的“搜索”（search1），但是我现在如何告诉程序查看表格以查看是否有匹配的客户编号？

我不想请你帮我写代码。但是我在这里一无所知，我无法找到一个很好的例子来帮助我理解这个过程并自己编写代码。

如果您发现任何语法错误，请不要犹豫，大声说出来！！

* * *

根据您的一些答案和进一步的研究，我修改了我的代码。现在是这样写的：

```
 Dim conn As SqlClient.SqlConnection = New SqlClient.SqlConnection
  Dim dbSource As String = "Data Source=.;AttachDbFilename=C:\Users\Don\Documents\DataDesign.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True"
  Dim dbProvider As String = "PROVIDER=System.Data.SqlClient;"
  Dim ds As New DataSet
  Dim sql As String = "SELECT FROM AR_CUSTOMER"
  Dim da As SqlClient.SqlDataAdapter = New SqlClient.SqlDataAdapter(sql, conn)
  conn.ConnectionString = dbProvider & dbSource
  Dim search1 As String = "%" & txbCustName & "%"
  Dim sqlQ1 As String = sql & " WHERE ARC-CUSTOMER-NAME LIKE search1"
  Dim cmd1 As New SqlCommand(sqlQ1, conn)
  conn.Open() 
```

希望这种语法（搜索）看起来更好、更准确。如果不是，请帮我改正。

假设这是正确的，我需要什么命令代码来获取完整的 ARC-CUSTOMER-NAME（并且可能有多个发现）以及相应的 ARC-CUSTOMER-NUMBER(s)？我假设这些数据将进入两个字符串（我需要“暗淡”这些以接收数据吗？），以便可以将其放入表单上的复选框和文本框。

对不起，我没有更好地理解这一点。我希望通过这个，我脑子里的灯泡终于亮了！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T20:40:51.313

如果您只是想知道客户是否存在于数据库中，您可以编写这样的代码

```
Using conn = new SqlConnection(connectionString)
    conn.Open()
    Dim cmd1 = new SqlCommand("SELECT COUNT(*) FROM AR_CUSTOMERS WHERE customerNo = @custNo")
    cmd1.Parameters.AddWithValue("@custNo", Convert.ToInt32(txbCustomerNo.Text))
    Dim result = cmd1.ExecuteScalar()
    if Convert.ToInt32(result) > 0 then
        MessageBox.Show("Customer Found")
    End If
End Using 
```

SqlCommand 对象的[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)方法可以用于如果您有兴趣只查找具有单个结果的单行并且在这种情况下通常非常快。

除此之外，我对您的连接字符串感到非常困惑。它似乎不是一个有效的。
在这里您可以找到大量适用于 Sql Server 的连接字符串示例：http: [//www.connectionstrings.com/sql-server-2012](http://www.connectionstrings.com/sql-server-2012)

**编辑** 根据您的评论，现在很清楚简单的 ExecuteScalar 是不够的。我们应该使用 SqlDataReader 并使用 ExecuteReader。当然查询完全不同

```
Using conn = new SqlConnection(connectionString)
    conn.Open()
    Dim cmd1 = new SqlCommand("SELECT CustomerNo, CustomerName FROM AR_CUSTOMERS " + 
                              "WHERE customerName LIKE= @custName")
    cmd1.Parameters.AddWithValue("@custName", "%" + txtSearchText.Text.Trim() + "%")

    Dim reader As SqlDataReader = cmd1.ExecuteReader()
    If Not reader.HasRows Then
        txbCustName.Text = "No customer found!"
    Else
        While reader.Read()
           txbCustName.Text = reader(0).ToString
           cbxCustNo.Text = reader(1).ToString
        Loop
    End If
End Using 
```

然而，这种方法有其问题。如果使用 LIKE 的搜索返回多行怎么办？在这种情况下，您的文本框将填充最新找到的客户的值。
也许使用 DataTable 会更好，如果有多个客户，请让用户从可用的数据表中进行选择

```
Using conn = new SqlConnection(connectionString)
    conn.Open()
    Dim cmd1 = new SqlCommand("SELECT CustomerNo, CustomerName FROM AR_CUSTOMERS " + 
                              "WHERE customerName LIKE= @custName")
    cmd1.Parameters.AddWithValue("@custName", "%" + txtSearchText.Text.Trim() + "%")

    Dim adapter As SqlDataAdapter = new SqlDataAdapter(cmd1)
    Dim table As DataTable = new DataTable()
    adapter.Fill(table)
    If table.Rows.Count = 0 Then
        txbCustName.Text = "No customer found!"
    Else if table.Rows.Count = 1 Then
        Dim row as DataRow = table.Rows(0)
        txbCustName.Text = row("CustomerName").ToString
        cbxCustNo.Text = row("CustomerNo").ToString
    Else
        MessageBox.Show("More  than one customer found!")
        ..... code to show the table in a datagridview .... 
    End If
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:50:54.807

最简单的方法应该是编写已经按客户编号过滤的 sql 查询... SELECT * FROM AR_CUSTOMERS WHERE costerNo = txbCosumerNo.Text，然后您可以使用 DataSet 存储从数据库检索到的数据...（按照您的代码..）

```
DataSet data = new DataSet();
da.fill(data); 
```

...您可以从数据中获取DataTable ..（DataSet 是DataTables 的集合），可以很容易使用。

# r - 从点阵和 r 内的密度图中提取数据

> ID：15440730
> 
> 赞同：2
> 
> 时间：2013-03-15T19:35:33.580
> 
> 标签：r, extract, histogram, lattice, kernel-density

在 R 中并使用 Lattice，我试图按年份提取直方图和密度图数据以供其他程序使用。到目前为止，我有直方图部分工作：

```
library(lattice)

x <- round(runif(1000, 1999.5, 2012.5))
y <- rlnorm(1000, meanlog = log(40000), sdlog = log(40000) - log(33000)) 
data <- data.frame(cbind(x,y))
data$y <- data$y + 2000*(data$x-2000)

GenerateBinComputations <- function(x, breaks, equal.widths=TRUE, type="percent", nint,...) { hist(x, breaks = breaks, plot = FALSE) }

a <- histogram(~data$y | data$x, type="percent", nint=101, endpoints=c(-500, 100500), equal.widths = TRUE)
results <- data.frame(seq(0, 100000, 1000))
colnames(results)[1] <- "Midpoint"
for (index in 1:13) {
    b <- trellis.panelArgs(a, index)
    b$breaks <- seq(-500, 100500, by=1000)
    c <- do.call(GenerateBinComputations, b)
    results <- cbind(results, c$density)
    colnames(results)[index+1] <- index + 1999
}

print(results) 
```

现在，问题是如何用密度图做到这一点。我认为它会是类似的东西，但是我遇到了中断问题（它们不包含在密度图格子对象中）以及在密度图格子对象中找到正确的对象以用于生成箱的密度/百分位数。这是我到目前为止所拥有的：

```
d <- densityplot(~data$y | data$x, type="percent", nint=101, endpoints=c(-500, 100500)) 
```

我应该参考的密度图格子中是否有不同的位置？还是我必须直接使用密度函数，比如这样的？

```
density.estimate      <- density(data$y, n = 512 * 8)
density.interpolation <- approxfun(x = density.estimate$x, y = density.estimate$y)
density.results       <- within(data, Density <- density.interpolation(y)) 
```

*提前致谢！*

# c++ - G++ -M32 -M64 在 Windows 上切换

> ID：15440747
> 
> 赞同：1
> 
> 时间：2013-03-15T19:36:14.783
> 
> 标签：c++, c++11, codeblocks, gcc4.7

如何为支持 32 和 64 编译的代码块安装 gcc 4.7.2？

如果我安装 x32 位编译器：x32-4.7.2-release-win32-sjlj-rev10 它将使用 -m32 进行编译，但会为 -m64 提供一堆链接器错误

如果我安装 x64 位编译器：x64-4.7.2-release-win32-sjlj-rev10 它将使用 -m64 进行编译，但会为 -m32 提供一堆链接器错误

均来自：http: [//sourceforge.net/projects/mingwbuilds/](http://sourceforge.net/projects/mingwbuilds/)

再说一遍，我怎样才能让我的 Mingw 或 Gcc 能够使用 -m 开关为两者进行编译？

我正在使用 Windows 8 Pro x64。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T01:36:28.827

创建 makefile 后，我可以使用 -m32 和 -m64 进行编译。

所以我认为必须有一种方法可以在 Codeblocks 中做到这一点。我做了以下事情：

CompilerSettings->Other options 并添加 -m32

然后在其他链接器选项下的链接器设置中，我添加了 -m32

我只安装了 x64 编译器。它包含 lib32 文件夹，这就是它起作用的原因。

它编译了 32 位和 64 位 dll。在两台不同的机器上测试，x64 不能在 32 位机器上加载。:) 32 另一方面加载两者。

# python - / 不支持的操作数类型：“_io.TextIOWrapper”和“float”

> ID：15440753
> 
> 赞同：1
> 
> 时间：2013-03-15T19:36:47.787
> 
> 标签：python, types, io, compiler-errors, syntax-error

尝试编译以下程序时收到错误消息。目标是分析非线性摆的行为和一个特定的庞加莱截面。我试图将钟摆行为的数据打印到一个文件中，并将对应于 Poincare 部分的输出打印到另一个文件中。

python shell中列出的错误如下：

```
Traceback (most recent call last):
File "C:\Python32\Lib\site-packages\visual\examples\JMB312.py", line 39
    thetaDotDot = -(g / L) * sin(theta) - q * thetaDot + Fd * sin(Ohm * t)
TypeError: unsupported operand type(s) for /: '_io.TextIOWrapper' and 'float' 
```

我真的不明白为什么 io.TextIOWrapper 会出现在这个错误中，或者如何解决这个问题。任何帮助表示赞赏！

代码：

```
from visual import *
from visual.graph import *

scene.title = 'Pendulum'
scene.autoscale = False
scene.height = scene.width = 500
pivot = array([0,0,0])      # pivot position of pendulum
scene.center = pivot            # center scene on pendulum pivot
framesPerSecond = 400

myWindow1 = gdisplay(x=500, title = "Phase Space", xtitle="Theta", ytitle="ThetaDot", height=500, width=500)
f1 = gdots(gdisplay=myWindow1, color = color.cyan, size = 1)

myWindow2 = gdisplay(title="Poincare Section", xtitle="Theta", ytitle="ThetaDot",y=400, x=500, height=500, width=500)
f2 = gdots(gdisplay=myWindow2, color = color.yellow)

#initial conditions for pendulum 1
g = 9.8         # gravity
m = 1           # mass at end of rod
L = 9.8         # length of rod
theta = 0.2     # initial angle (from vertical)
thetaDot = 0    # start pendulum at rest
thetaDotDot = 0 # acceletation
dt = 0.04       # time step
t = 0           # time
Fd = 1.2        # drive force coefficient
Ohm = 2/3       # oscillatory coefficient for drive force
q = 0.5         # coefficient of friction

#pendulum 1 rod
rod = cylinder(pos=pivot, axis = (L*sin(theta),-L*cos(theta),0), radius = 0.1, color=color.cyan)

f=open('JMB312 data 1.txt','w')

g=open('JMB312 data 2.txt','w')

while t < 100000: #a lot of data
    thetaDotDot = -(g / L) * sin(theta) - q * thetaDot + Fd * sin(Ohm * t)
    thetaDot = thetaDot + thetaDotDot * dt
    theta = theta + thetaDot * dt

    time = str(t)
    angle = str(theta)
    angular_velocity = str(thetaDot)

    if t < 750:
        f.write(time)
        f.write(",")
        f.write(angle)
        f.write(",")
        f.write(angular_velocity)
        f.write("\n")

    f1.plot(pos=(theta,thetaDot))

    if -dt**2/4 < Fd * sin(Ohm * t) < dt**2/4: #print poincare section data to separate file        
        g.write(time)
        g.write(",")
        g.write(angle)
        g.write(",")
        g.write(angular_velocity)
        g.write("\n")

        f2.plot(pos=(theta,thetaDot)) 

    if theta > 2 * pi:
        theta = theta - 2 * pi
    if theta < -2 * pi:
        theta = theta + 2 * pi

    rod.axis = (L*sin(theta), -L*cos(theta), 0)

    t = t+dt    
g.close()
f.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:56:56.793

您`g`用于存储重力并打开文件，将`g=open('JMB312 data 2.txt', 'w')`行中的名称更改为其他值，它应该可以工作。

# jquery - jquery 如何访问 $(this) 及其内联类

> ID：15440754
> 
> 赞同：0
> 
> 时间：2013-03-15T19:36:50.723
> 
> 标签：jquery

鉴于此 HTML：

`<div class="term qtip">something</div>`

我需要访问`.term.qtip`

`.term`如果我存储为 ，我该怎么做`$(this)`？

`$(this).find('.qtip')`显然不会工作，因为它正在寻找一个子元素。解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:38:29.677

```
$(this).filter('.qtip') 
```

这将过滤您的元素集合`($(this))`并仅返回那些包含类“qtip”的元素。

# jquery - 克隆并添加删除按钮在我的模板文件中，我有类似的东西： <select name="author[]">{section name="something" loop=$something} <option value="{$something[something].name }">{$something[something].name}</option>> {/section}</select> 我想要创建一个按钮，添加另一个选择元素

> ID：15440755
> 
> 赞同：1
> 
> 时间：2013-03-15T19:36:53.613
> 
> 标签：jquery, html, smarty

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T19:41:52.390

您可以使用[jquery clone](http://api.jquery.com/clone/)。

像这样的东西：

```
$('[name="author[]"]').clone().appendTo('#your_div_id_where_you_want_it'); 
```

您可能希望给您的选择框一个 id，以使选择和克隆它看起来更干净。此外，`[]`在 name 属性中可能会导致问题，因此创建一个 id 也可以解决这个问题。如果要添加 id，则选择如下所示：

```
<select id="author" name="author[]"> 
```

然后克隆行将如下所示：

```
 $('#author').clone().appendTo('#your_div_id_where_you_want_it'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T14:49:04.723

jQuery 的 API 具有[*强大的选择器*](http://api.jquery.com/jQuery/)，您可以（并且应该）使用它：

当您处理动态 DOM 操作（这是规则）时，仅关注 ID 会使您的代码复杂化 - 建议改用类选择器。您的代码可以很简单：

```
jQuery(function($){
    $(".add").click(function() {
        $("#select").clone()
            .removeAttr("id")
            .append( $('<a class="delete" href="#">Remove</a>') )
            .appendTo("#additionalselects");
    });
    $("body").on('click',".delete", function() {
        $(this).closest(".input").remove();
    });
}); 
```

这是[**jsfiddle 的链接**](http://jsfiddle.net/martyk/gGSxa/4/)

# c# - C# 中的线程导致无限循环并阻止我的应用程序

> ID：15440758
> 
> 赞同：2
> 
> 时间：2013-03-15T19:36:59.553
> 
> 标签：c#

我创建了一个线程，在其中我只是将一个单选按钮从表单的左侧移动到右侧。这运行了，但是我的应用程序被阻塞了，我不能移动表单，什么都没有（我认为这是创建线程的原因，同时做多个事情）这是我的代码，我希望你明白我的意思问。提前致谢

```
 private void moveRight( )
    {
        radioButton1.Left++;
    }
    private void moveLeft()
    {
        radioButton1.Left--;
    }
    public void run()
    {
        while (true)
        {
            while (radioButton1.Left != this.ClientSize.Width - 10)
            {
                if (InvokeRequired)
                {
                    Invoke(new MethodInvoker(moveRight));
                }
                else
                {
                    moveRight();
                }
            }
            while (radioButton1.Left != 10)
            {
                if (InvokeRequired)
                {
                    Invoke(new MethodInvoker(moveLeft));
                }
                else
                {
                    moveLeft();
                }
            }
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        t = new Thread(new ThreadStart(run)); 
        t.Start();
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T19:39:12.727

当您调用`Invoke`控件时，您是在告诉它在 UI 线程中运行提供的代码。

鉴于此，您的代码正在启动一个新线程，然后在该线程中告诉 UI 线程去运行一堆永远运行的代码。

现在你明白为什么我希望 UI 线程被阻塞了吗？

您需要在后台线程（即不在`Invoke`调用内部）中有您的主要 while 循环，并将调用限制`Invoke`为专门用于更新 UI 的小代码块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:39:46.500

好吧，您的方法存在一些问题：

1.  你在线程中的代码永远不会结束..你有一个无限循环
2.  即使您正在创建一个线程，您仍然在 UI 线程上运行所有内容（使用 Invoke）

这两个组合意味着您基本上无限阻塞了 UI 线程。

本质上，这是：

```
while (true)
{
    while (radioButton1.Left != this.ClientSize.Width - 10)
    {
        moveRight();
    }
    while (radioButton1.Left != 10)
    {
        moveLeft();
    }
} 
```

永远不会结束。而且由于它是在 UI 线程上调用的，所以 UI 将被无限期地阻塞，而只是更新控件的左坐标，而实际上没有任何东西被渲染。

# javascript - 修改 JQuery 表达式

> ID：15440760
> 
> 赞同：0
> 
> 时间：2013-03-15T19:37:20.467
> 
> 标签：javascript, regex

```
<script type="text/javascript">
    $(function() {
        $('#theEmail').keyup(function() {
            if (this.value.match(/[^a-zA-Z0-9 ]/g)) {
                this.value = this.value.replace(/[^a-zA-Z0-9 ]/g, '');
            }
        });
    });
</script> 
```

我要修改什么以确保表达式允许我在上述脚本中输入“_”和“-”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T19:39:04.707

更改此正则表达式的两个实例

```
/[^a-zA-Z0-9 ]/ 
```

到

```
/[^\-_a-zA-Z0-9 ]/ 
```

尽管据我所知，最初的`.match`测试是完全没有必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:41:14.403

```
var pattern = /^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/; 
```

或者

```
function validateEmail(email) { 
    var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\
".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA
-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(email);
} 
```

# android - 是否可以将 Google Drive 用作我的应用数据的主机？那么应用数据可以在线吗？

> ID：15440763
> 
> 赞同：4
> 
> 时间：2013-03-15T19:37:39.493
> 
> 标签：android, android-asynctask, google-drive-api, google-docs, google-docs-api

对不起，如果这最终是冗长的。

就像您可以在其中拥有数据并且用户可以使用正确的代码访问它的服务器一样。我可以将我的文本文件放在 Google Drive 上，将它们公开，然后允许我的应用程序访问它们吗？

我已经使用我创建的本地网络服务器完成了这项工作。`AsyncTask`与服务器上的 .php 文件交互，php 文件从 mySQL 数据库调用数据。这当然可行，但由于我付不起服务器费用，我是否可以选择将我的数据放入文本文件并将它们托管在 Google Drive 上？然后只使用 AsyncTask 来调用它们？尝试时出现错误。我开始认为这是不可能的。

本质上，我有什么办法可以将 Google Drive 用作服务器？如果我不能使用它，有谁知道任何其他可靠的免费网站？我知道我的 AyncTask 代码可以正常工作，因为当我使用 XAMPP 在旧笔记本电脑上创建本地服务器时，我能够托管如上所述工作的 mySQL 数据库和 .php 文件。

我的应用目前处于离线状态，仅我想更改它，因此我不必每周通过 Play 商店向用户发送应用更新。有什么建议吗？

感谢您的帮助，我知道这与代码无关，或者如果可以使用 Google Drive 则可能是这样。

这是我的应用程序，因此您可以了解我正在使用的数据以及我希望如何显示它：[https ://play.google.com/store/apps/details?id=com.history.f1historyfree](https://play.google.com/store/apps/details?id=com.history.f1historyfree)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:09:29.090

如果您选择 Google Drive 公共文件选项，那么您甚至可能不需要 Drive SDK。

[Google Drive 发布站点功能的带宽限制？](https://stackoverflow.com/questions/13675084/bandwidth-limits-for-google-drives-publish-site-feature)

[http://support.google.com/drive/bin/answer.py?hl=en&answer=2494827](http://support.google.com/drive/bin/answer.py?hl=en&answer=2494827)

如果这些是您的应用程序的数据文件，并且听起来您只有几个用户，您可以使用 Google App Engine 来托管文件和/或进行任何服务器端处理。查看免费配额：

[https://developers.google.com/appengine/docs/quotas](https://developers.google.com/appengine/docs/quotas)

任何提供“免费”托管服务的人，包括谷歌在内，都期待您“做大”并达到升级配额。

为了将来进行校对，请设置您的应用程序，以便您拥有一个小的在线控制文件来重定向大量数据所在的位置，而无需更改应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T11:29:10.690

您可以查看本教程 [https://developers.google.com/live/shows/192808437/](https://developers.google.com/live/shows/192808437/) 我已经运行了我的应用程序，这种方式非常易于使用，因为我们可以直接在电子表格上更改数据。

+point ：您可以将数据设为私有，使用您自己的电子邮件 ID 进行部署，并使其可供“匿名”访问（即所有人，即使对于尚未在其设备上登录其 gmail 帐户的用户）。这样，您的数据库仍然是私有的，只能通过应用程序访问。

M 仍在努力将电子表格中的“图像”导入应用程序：-/

祝你教程好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T19:54:35.253

是的你可以。使用**[Google Drive SDK](https://developers.google.com/drive/quickstart-android)**，还有一个 android 特定示例，您可以在[https://developers.google.com/drive/integrate-android-ui查看](https://developers.google.com/drive/integrate-android-ui)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-07T10:37:50.300

> 是的你可以

Google 允许您免费托管您的文件。上传您的文件> 共享该（公共）> 从其链接中复制其 ID。 **要直接下载，您可以使用此链接： http: *[//googledrive.com/host/[id ]/](http://googledrive.com/host/[id]/)***

我有一个博客，我使用谷歌驱动器来托管数据。

看到这个：[http ://crackit9.blogspot.in/2016/05/beautiful-wallpapers-for-android.html](http://crackit9.blogspot.in/2016/05/beautiful-wallpapers-for-android.html)

# html - 何时在 HTML 表格中使用 tbody、colgroup、thead 等？

> ID：15440764
> 
> 赞同：14
> 
> 时间：2013-03-15T19:37:40.077
> 
> 标签：html, html-table

当我学习 HTML 表格时，并没有教我 tbody、thead、tfoot、colgroup。你应该什么时候使用它们？我去了 W3Schools 网站，我了解它们是如何工作的，但不知道何时使用或不使用它们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T19:41:06.823

如果您想提供有关您的表格的附加信息并组织其中的内容，您可以使用它们。它们还可以在某些方面影响表格的视觉呈现（尽管这可能因浏览器而异——例如，对`<colgroup>`/`<col>`的支持*非常*不完整）。

例如，如果您在顶部和底部有标题行，您可以将它们分别分组在 a`<thead>`和 a`<tfoot>`中，并将数据行分组在 a 中`<tbody>`。浏览器将确保`<tfoot>`始终呈现在底部，无论您是否将其放置在任何`<tbody>`或`<tr>`元素¹之前或之后，或者您的表中有多少数据，如果您的表可能有很多行，这将很有用：

```
<table>
  <caption>High Scores</caption>
  <thead>
    <tr><th>#</th><th>Name</th><th>Score</th></tr>
  </thead>
  <tfoot>
    <tr><th>#</th><th>Name</th><th>Score</th></tr>
  </tfoot>
  <tbody>
    <tr><td>1</td><td>Alice</td><td>10000</td></tr>
    <tr><td>2</td><td>Bob</td><td>9000</td></tr>
    <tr><td>3</td><td>Carol</td><td>8500</td></tr>
    <tr><td>4</td><td>Dave</td><td>8000</td></tr>
    <!-- Up to 100 data rows -->
  </tbody>
</table> 
```

否则，默认情况下，所有行都被分组为一个`<tbody>`（即使您没有明确使用`<tbody></tbody>`表中的标签）。因此，如果表格底部有标题行，则必须将它们放在表格的最底部，以便它们最后出现：

```
<table>
  <caption>High Scores</caption>
  <tr><th>#</th><th>Name</th><th>Score</th></tr>

  <tr><td>1</td><td>Alice</td><td>10000</td></tr>
  <tr><td>2</td><td>Bob</td><td>9000</td></tr>
  <tr><td>3</td><td>Carol</td><td>8500</td></tr>
  <tr><td>4</td><td>Dave</td><td>8000</td></tr>
  <!-- Up to 100 data rows -->

  <tr><th>#</th><th>Name</th><th>Score</th></tr>
</table> 
```

当然，如果您关心这类事情，这也可以说是不那么语义化。

* * *

¹ [请注意，如果您使用 a ，则*需要*将 a`<tfoot>`放置在*之前*规范中的任何`<tbody>`或`<tr>`元素之前，直到并包括[HTML 4](http://www.w3.org/TR/html401/struct/tables.html#h-11.2.3)和 XHTML 1，以便根据这些文档类型进行验证。[从HTML5](http://www.w3.org/TR/html-markup/tfoot.html)开始，这不再适用。]

# python - 在 Python 中访问列表中的最后一个元素

> ID：15440765
> 
> 赞同：2
> 
> 时间：2013-03-15T19:37:49.107
> 
> 标签：python

例如，我有一个列表：list_a = [0,1,3,1]

我正在尝试遍历此循环中的每个数字，如果它命中列表中的最后一个“1”，则打印“这是列表中的最后一个数字”

由于有两个 1，有什么方法可以访问列表中的最后一个 1？

我试过了：

```
 if list_a[-1] == 1:
      print "this is the last"  
   else:
     # not the last 
```

这不起作用，因为第二个元素也是 1。尝试：

```
if list_a.index(3) == list_a[i] is True:
   print "this is the last" 
```

也没有工作，因为有两个1

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-15T19:38:31.007

`list_a[-1]`是访问最后一个元素的方式

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T19:39:53.610

您可以使用[enumerate](http://docs.python.org/3/library/functions.html?highlight=enumerate#enumerate)来遍历列表中的项目以及这些项目的索引。

```
for idx, item in enumerate(list_a):
    if idx == len(list_a) - 1:
        print item, "is the last"
    else:
        print item, "is not the last" 
```

结果：

```
0 is not the last
1 is not the last
3 is not the last
1 is the last 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T19:43:16.187

***在 Python 2.7.3 上测试***

此解决方案适用于任何大小的列表。

```
list_a = [0,1,3,1] 
```

^ 我们定义`list_a`

```
last = (len(list_a) - 1) 
```

^我们计算列表中元素的数量并减1。这是最后一个元素的坐标。

```
print "The last variable in this list is", list_a[last] 
```

^我们显示信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T20:59:34.323

为确保您找到“1”的最后一个实例，您必须查看列表中的所有项目。最后一个“1”有可能不是列表中的最后一项。所以，你必须浏览列表，记住最后找到的索引，然后你可以使用这个索引。

```
list_a = [2, 1, 3, 4, 1, 5, 6]

lastIndex = 0

for index, item in enumerate(list_a):
    if item == 1:
        lastIndex = index

print lastIndex 
```

输出：

```
4 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T20:00:43.400

```
a = [1, 2, 3, 4, 1, 'not a number']
index_of_last_number = 0

for index, item in enumerate(a):
    if type(item) == type(2):
        index_of_last_number = index 
```

输出为 4，即数组 a 中最后一个整数的索引。如果要包含整数以外的类型，可以将 type(2) 更改为 type(2.2) 或其他内容。

# c - 如何将结构中的 void 指针分配给另一个结构？

> ID：15440767
> 
> 赞同：4
> 
> 时间：2013-03-15T19:37:51.297
> 
> 标签：c, data-structures, void-pointers, doubly-linked-list

在使用双向链接列表时，我需要一些帮助，其中节点的结构包含指向 void 的指针。如果我定义了另一个结构，我想在其中插入节点的实际数据，如何将它分配给指向 void 的指针？另外，如何打印列表？

我的节点的结构，在头文件中定义：

```
typedef struct nodetype
{
    struct nodetype *prev, *next;
    void *data;
} NodeT; 
```

我要在每个节点中插入的数据结构，在 main.c 中定义：

```
typedef struct dataStructure
{
    int birthday;
    char *name;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T19:48:29.880

您需要正确定义第二个 typedef，例如

```
typedef struct dataStructure
{
    int birthday;
    char *name;
} dataStructure; 
```

然后，一旦您分配/定义了结构，您就可以像往常一样将第一种类型的指针设置为第二种：

```
dataStructure mydatastruct;
node->data = &mydatastruct;  //(void *) can point to anything 
```

或者

```
node->data = malloc(sizeof (dataStructure));  // direct allocation 
```

`(dataStructure *)`如果要通过节点结构访问数据结构的成员，则需要将 void 指针转换为，例如

```
((dataStructure *)node->data)->birthday = 1980; 
```

宏可以帮助减少这种丑陋。

如果您的节点结构只指向该数据结构，那么直接指向它会简单得多，而不是使用 void 指针。

# grails - Grails Jasper 插件错误

> ID：15440768
> 
> 赞同：1
> 
> 时间：2013-03-15T19:37:56.887
> 
> 标签：grails, jasper-plugin

我已经为 Jasper 1.6.1 安装了插件，并且可以在我的插件目录中看到它。然而，根据[http://grails.org/plugin/jasper](http://grails.org/plugin/jasper)，它说当你运行你的应用程序时，通过转到 (app-url)/jasper/demo 来测试插件。当我尝试这样做时，它不起作用。我很确定我遗漏了一些东西，但文件没有说。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:01:24.253

我能够使用下面的 URL 显示它。奇怪的是，URL 是区分大小写的，所以你必须在 jasperDemo 中将 D 大写...

```
http://localhost:8080/testGrailsProject01/jasperDemo/demo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:57:27.243

插件文档是错误的。查看存在[的代码](https://github.com/sebastianhohns/grails-jasper/blob/master/grails-app/controllers/org/codehaus/groovy/grails/plugins/jasper/JasperDemoController.groovy)`JasperDemoController`，所以我认为您可以通过 url 访问：`jasperdemo/demo`

# python - Ply.lex 未指定的令牌错误

> ID：15440769
> 
> 赞同：-1
> 
> 时间：2013-03-15T19:38:03.263
> 
> 标签：python, token, lex, unspecified

您好我正在尝试制作一个简单的词法分析器来阅读 KML（谷歌地图）。但我在几个部分有问题。并得到一个“未指定的令牌错误”（仅包括导致错误的部分）

```
import ply.lex as lex
import re
tokens = (
'PLACEMARKER_1'
'ENTRYNAME',
'COORDINATES'
'PLACEMARKER_2',
)
t_PLACEMARKER_1  = r'<Placemark>'
t_ENTRYNAME      = r'<name>.*</name>'
t_COORDINATES    = r'<Point>\n<coordinates>[0-9]+(?:\.[0-9]+)*,[0-9]+(?:\.[0-9]+)*,0</coordinates>\n</Point>'
t_PLACEMARKER_2  = r'</Placemark>'
t_ignore         = ' t\v\r'
hl = lex.lex()
hl.input(Test_1)
while True:
    tok = hl.token()
    if not tok: break
    print tok 
```

请帮助，将不胜感激...：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:06:41.427

记住使用逗号...永远记住使用逗号！

# c# - 更新或插入新值

> ID：15440773
> 
> 赞同：2
> 
> 时间：2013-03-15T19:38:13.210
> 
> 标签：c#, asp.net

我在 asp.net 中有以下 SQL 命令：

```
cmd = connection.CreateCommand();
cmd.CommandText = "INSERT INTO userscore (username, score)VALUES(@username,   @score)";
cmd.Parameters.AddWithValue("@username", username);
cmd.Parameters.AddWithValue("@score", userscore);
cmd.ExecuteNonQuery(); 
```

此命令有效，但每次单击按钮时它都会在 my sql 数据库中存储两个值。它从文本框中获取分数值，但是当数据库中已经存在用户名 + 分数时，我想更新该值。有人可以帮我查询以完成此操作吗？

为了澄清我的问题：我想存储新分数，即使它低于当前分数，并且用户名在表中是唯一的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:47:33.533

我假设您只想为每个用户名存储一个高分，而不是只存储一个全局高分。

```
DECLARE @highscore int NULL
SELECT @highscore = MAX(score) FROM userscore WHERE username = @username

IF @highscore IS NULL BEGIN

    INSERT INTO userscore ( username, score ) VALUES ( @username, @score )

END ELSE IF @score > @highscore BEGIN

    UPDATE userscore SET score = @score WHERE username = @username

END 
```

此 T-SQL 脚本需要两个参数，`@username`和`@score`. 变量在`@highscore`脚本中声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T19:52:16.297

如果 SQL 2008 或更高版本：

```
MERGE INTO userscore as target
  USING(VALUES(@username, @score)) AS source(UserName, Score)
  ON (target.UserName = source.UserName)
  WHEN MATCHED THEN
    UPDATE SET Score = source.Score)
  WHEN NOT MATCHED THEN
    INSERT(UserName, Score) VALUES(source.UserName, source.Score)
; 
```

如果匹配的`MERGE`记录存在，则语句执行更新，否则执行插入。这也是一个语句，因此您不必先检查记录是否存在。

复制/粘贴版本是：

```
cmd.CommandText = "MERGE INTO userscore as target USING(VALUES(@username, @score)) AS Source(UserName, Score) ON (target.UserName = source.UserName) WHEN MATCHED THEN UPDATE SET Score = source.Score) WHEN NOT MATCHED THEN INSERT(UserName, Score) VALUES(source.UserName, source.Score);"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T20:19:08.723

您可以使用存储过程，如果没有分数则插入分数，如果分数低于新分数，则更新用户分数

代码

```
cmd = connection.CreateCommand();
cmd.CommandText = "update_highscore";
cmd.CommandType = CommandType.StoredProcedure;
cmd.Parameters.AddWithValue("@username", username);
cmd.Parameters.AddWithValue("@score", userscore);
cmd.ExecuteNonQuery(); 
```

执行此操作以创建存储过程

```
CREATE PROCEDURE update_highscore
@username VARCHAR(30),
@userscore INT
AS
UPDATE userscore 
SET score = @score
WHERE username = @username

IF @@ROWCOUNT = 0
    INSERT userscore (username, score) VALUES (@username, @score) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T19:47:41.110

如果用户名对于表来说应该是唯一的，那么您可以使用更新查询加上 SqlCommand.ExecuteNonQuery ( [http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery。 .aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)）。

就像是：

```
cmd.CommandText = "UPDATE userscore SET score = @score WHERE username = @username";
cmd.Parameters.AddWithValue("@username", username);
cmd.Parameters.AddWithValue("@score", userscore);
var numRowsAffected cmd.ExecuteNonQuery();
if(numRowsAffected == 0)
{
  cmd.CommandText = "INSERT INTO userscore (username, score)VALUES(@username,   @score)";
  cmd.ExecuteNonQuery();
} 
```

# c# - HtmlAgilityPack 从 html 页面读取数据

> ID：15440774
> 
> 赞同：0
> 
> 时间：2013-03-15T19:38:14.830
> 
> 标签：c#, html-agility-pack

我正在尝试使用 html 敏捷包从 html 表中获取数据，但只获取第一个表行中的数据。

我正在阅读的 html 代码如下：

```
<div id="mainDiv">
    <table id="tbl">
        <thead>
            <tr>
                <th class="tbl_col1">UserName</th>
                <th class="tbl_col2">Points</th>
            </tr>
        </thead>
        <tbody>     
          <tr data-source="provider1">
            <td class="tbl_col1">
                <a href="/Users/1090" id="UserLink" target="_blank">UserName1</a>           
            </td>
            <td class="tbl_col2">
                <a href="/UserPoints/1090" id="PointLink" target="_blank">1892 <span class="up_arrow">&nbsp;</span></a>             
            </td>           
          </tr>
          <tr data-source="provider2">
            <td class="tbl_col1">
                <a href="/Users/1090" id="UserLink" target="_blank">UserName2</a>           
            </td>
            <td class="tbl_col2">
                <a href="/UserPoints/1090" id="PointLink" target="_blank">3217 <span class="down_arrow">&nbsp;</span></a>               
            </td>           
         </tr>
        </tbody>
    </table>
</div> 
```

我正在使用此代码

```
var UserTable = htmlDocument.DocumentNode.SelectSingleNode("//div[@id='mainDiv']").SelectSingleNode("//table[@id='tbl']").SelectSingleNode("//tbody").SelectNodes("//tr");
foreach (var row in UserTable)
{
    if (row.Attributes["data-source"] != null)
    {
        string Source = row.Attributes["data-source"].Value;
        string UserName = row.SelectSingleNode("td[@class='tbl_col1']").SelectSingleNode("//a[@id='UserLink']/text()").InnerText;
        string Points = row.SelectSingleNode("td[@class='tbl_col2']").SelectSingleNode("//a[@id='PointLink']/text()").InnerText;
        Console.WriteLine(Source + "\t" + UserName + "\t" + Points);
    }
} 
```

但我不断得到这个输出：

```
provider1       UserName1       1892
provider2       UserName1       1892 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:26:10.293

您做出了错误的假设：`//a[@id='UserLink']/text()`并`//a[@id='PointLink']/text()`在整个文档中进行了搜索。这就是你获得第一个`tr`节点的原因。只需使用：

```
string UserName = row.SelectSingleNode("td[@class='tbl_col1']/a[@id='UserLink']/text()").InnerText;
string Points = row.SelectSingleNode("td[@class='tbl_col2']/a[@id='PointLink']/text()").InnerText; 
```

您还可以真正简化其余代码：

```
var UserTable = doc.DocumentNode.SelectNodes("//div[@id='mainDiv']/table[@id='tbl']/tbody/tr");
foreach (var row in UserTable)
{
    if (row.Attributes["data-source"] != null)
    {
        string Source = row.Attributes["data-source"].Value;
        string UserName = row.SelectSingleNode("td[@class='tbl_col1']/a[@id='UserLink']/text()").InnerText;
        string Points = row.SelectSingleNode("td[@class='tbl_col2']/a[@id='PointLink']/text()").InnerText;
        Console.WriteLine(Source + "\t" + UserName + "\t" + Points);
    }
} 
```

# java - netbeans中的空指针异常

> ID：15440783
> 
> 赞同：-3
> 
> 时间：2013-03-15T19:38:31.500
> 
> 标签：java, swing, netbeans-7

我正在尝试一些代码，但我得到了 NullPointerException。代码片段如下：

```
 String dialogmessage = "Welcome - " +user;
            int dialogtype = JOptionPane.PLAIN_MESSAGE;
            dialogtype = JOptionPane.INFORMATION_MESSAGE;
            String dialogs = null;
            JOptionPane.showMessageDialog((Component)null, dialogmessage, dialogs,                     dialogtype);
            usrname.setText("");
            pswrd.setText("");
            frame.setVisible(false); 
```

请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:56:01.697

尽管我完全同意@djechlin 的评论，但我仍然没有足够的声誉来投票，所以......

**FIRST** - StackOverflow 不是要求别人解决你的作业的地方，更不用说即使没有调查或付出一点努力。

**SECOND** - NullPointerException 与其他异常一样，提供了引发它的行，因此它过去相当容易修复。你什么都没说，没有解决。我的赌注？未分配 usrname、pswrd 或 frame 变量。意识到这是在声明：

```
JFrame frame; 
```

这是分配：

```
frame = new JFrame(); 
```

如果您只声明然后尝试使用该变量，因为它在内部初始化为 null，那么您要告诉机器的是：

```
do null.someStuff() 
```

你有你的例外。

**编辑：**我还想提一下，据我所知（或至少 NullPointerException），异常不依赖于 IDE（即您在 NetBeans 中获得 NullPointer，在 eclipse 中也会如此）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:56:09.960

- 你在第一行设置变量“用户”吗？

-您将字符串“对话框”设置为空，（这将是标题），建议在此处检查 api [http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JOptionPane .html](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JOptionPane.html)

建议将字符串对话框设置为“标题”，看看是否能解决问题......

# python - 将文本文件读入字典删除标题/尾随换行符

> ID：15440785
> 
> 赞同：0
> 
> 时间：2013-03-15T19:38:37.327
> 
> 标签：python, dictionary, text-files

如果我只是向您展示我正在使用的文本文件和我拥有的代码，这将更容易理解。这是名为 employees.txt 的文本文件：

```
7
John
Doe
33
272838
M
Mary
Johnson
38
3849383
..... 
```

* * *

现在我有两个功能。他们来了：

```
def employee_write(file):
    employee_dict = {}
    employee_dict["First"] = file.readline()
    employee_dict["Last"] = file.readline()
    employee_dict["Experience"] = file.readline()
    employee_dict["ID"] = file.readline()
    employee_dict["Gender"] = file.readline()
    return employee_dict

def main():
    file = open("employees.txt", "r")
    n = int(file.readline())
    x1 = employee_write(file)
    employee_list = []
    for i in range(n):
        employee_list.append(x1)
        x2 = employee_list
    print(x2) 
```

不幸的是，当我打印出字典列表时，我在第一个函数中附加到键的值都带有一个换行符，如下所示：

```
[{'ID': '272838\n', 'Last': 'Doe\n', 'First': 'John\n', 'Experience': '33\n', 'Gender': 'M\n'}, {'ID': '272838\n', 'Last': 'Doe\n', 'First': 'John\n', 'Experience': '33\n', 'Gender': 'M\n'}, {'ID': '272838\n', 'Last': 'Doe\n', 'First': 'John\n', 'Experience': '33\n', 'Gender': 'M\n'}, {'ID': '272838\n', 'Last': 'Doe\n', 'First': 'John\n', 'Experience': '33\n', 'Gender': 'M\n'}, {'ID': '272838\n', 'Last': 'Doe\n', 'First': 'John\n', 'Experience': '33\n', 'Gender': 'M\n'}, {'ID': '272838\n', 'Last': 'Doe\n', 'First': 'John\n', 'Experience': '33\n', 'Gender': 'M\n'}, {'ID': '272838\n', 'Last': 'Doe\n', 'First': 'John\n', 'Experience': '33\n', 'Gender': 'M\n'}] 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T19:40:17.810

无论你在哪里阅读 using `readline()`，使用`readline().strip()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:44:49.620

`.strip()`没有参数会删除所有空格/制表符/换行符

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T19:56:47.027

[社区维基，因为这真的是一个很长的评论]

(1) 我会调用你的函数`employee_read`而不是`employee_write`.

(2) 而不是所有的重复，我可能会这样做：

```
def employee_read(source):
    keys = "First Last Experience ID Gender".split()
    employee_dict = {key: next(source).strip() for key in keys}
    return employee_dict 
```

(3) 您的 main 函数可以改为编写

```
def main():
    with open("employees.txt") as fp:
        n = int(next(fp))
        employees = [employee_read(fp) for i in range(n)]
    print employees 
```

这使

```
>>> main()
[{'Gender': 'M', 'Last': 'Doe', 'ID': '272838', 'Experience': '33', 'First': 'John'},
{'Gender': 'F', 'Last': 'Johnson', 'ID': '3849383', 'Experience': '38', 'First': 'Mary'}] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T19:42:46.233

附加`.rstrip('\n')`到您的`readline`呼叫中以清除换行符。

# mysql - MySQL“加入”？

> ID：15440790
> 
> 赞同：1
> 
> 时间：2013-03-15T19:38:51.493
> 
> 标签：mysql, sql

我有两个表连接在一起：

![表格图表](../Images/53408ea932e4cb98b0bea2ae595c7b9d.png)

`book_types_purchased`是`ENUM('paperback','hardcover')`。_ 我想返回这种类型的行：

```
书名 | 平装书_购买日期 | 精装日期购买

```

有没有办法在 MySQL 中做到这一点？

* * *

# 更新

以下是匹配表名和左连接的答案：

```
SELECT title,
  paperback.date_purchased AS paperback_date_purchased,
  hardcover.date_purchased AS hardcover_date_purchased

FROM book_projects

LEFT JOIN book_types_purchased AS paperback 
  ON paperback.book_project_id = book_projects.id
  AND paperback.type = 'paperback'

LEFT JOIN book_types_purchased AS hardcover 
  ON hardcover.book_project_id = book_projects.id
  AND hardcover.type = 'hardcover' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T19:42:08.857

你可以`JOIN`在`book_types_purchased`桌子上两次。每种类型一个。

```
SELECT title,
  paperback.date_purchased AS paperback_date_purchased,
  hardcover.date_purchased AS hardcover_date_purchased

FROM book_projects

JOIN date_purchased AS paperback ON paperback.book_project_id = book_projects.id
  AND paperback.type = 'paperback'

JOIN date_purchased AS hardcover ON hardcover.book_project_id = book_projects.id
  AND hardcover.type = 'hardcover' 
```

# mysql - 有没有办法从 Amazon Redshift 进行 SQL 转储

> ID：15440794
> 
> 赞同：16
> 
> 时间：2013-03-15T19:38:55.403
> 
> 标签：mysql, sql, amazon-s3, amazon-redshift, dump

有没有办法从 Amazon Redshift 进行 SQL 转储？

您可以使用 SQL 工作台/J 客户端吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-01-08T15:32:15.113

`pg_dump`的模式在过去可能不起作用，但现在可以。

`pg_dump -Cs -h my.redshift.server.com -p 5439 database_name > database_name.sql`

*CAVEAT EMPTOR：* `pg_dump`仍然会产生一些 postgres 特定的语法，并且还会忽略表的 Redshift`SORTKEY`和`DISTSTYLE`定义。

另一个不错的选择是[使用已发布的 AWS 管理脚本视图](https://github.com/awslabs/amazon-redshift-utils/blob/master/src/AdminViews/v_generate_tbl_ddl.sql)来生成 DDL。它处理 SORTKEY/DISTSTYLE，但我发现它在捕获所有外键时有问题，并且不处理表权限/所有者。您的里程可能会有所不同。

要获得数据本身的转储，不幸的是，您仍然需要在每个表上使用该[`UNLOAD`命令。](http://docs.aws.amazon.com/redshift/latest/dg/r_UNLOAD.html)

这是一种生成它的方法。请注意，`select *`如果您的目标表与源表的列顺序不同，则语法将失败：

```
select
  ist.table_schema,
  ist.table_name,
  'unload (''select col1,col2,etc from "' || ist.table_schema || '"."' || ist.table_name || '"'')
to ''s3://SOME/FOLDER/STRUCTURE/' || ist.table_schema || '.' || ist.table_name || '__''
credentials ''aws_access_key_id=KEY;aws_secret_access_key=SECRET''
delimiter as '',''
gzip
escape
addquotes
null as ''''
--encrypted
--parallel off
--allowoverwrite
;'
from information_schema.tables ist
where ist.table_schema not in ('pg_catalog')
order by ist.table_schema, ist.table_name
; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-30T15:38:54.107

我们目前正在通过 Redshift 成功使用 Workbench/J。

关于转储，当时 Redshift 中没有可用的模式导出工具（pg_dump 不起作用），尽管始终可以通过查询提取数据。

希望有所帮助。

**编辑：**请记住，排序和分配键之类的内容不会反映在 Workbench/J 生成的代码上。查看系统表`pg_table_def`以查看每个字段的信息。它说明一个字段是 sortkey 还是 distkey，以及此类信息。该表上的文档：

[http://docs.aws.amazon.com/redshift/latest/dg/r_PG_TABLE_DEF.html](http://docs.aws.amazon.com/redshift/latest/dg/r_PG_TABLE_DEF.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-27T10:27:47.870

是的，您可以通过多种方式做到这一点。

1.  UNLOAD() 到 S3 存储桶 - 这是最好的。您几乎可以在任何其他机器上获取数据。（更多信息：http: [//docs.aws.amazon.com/redshift/latest/dg/r_UNLOAD.html](http://docs.aws.amazon.com/redshift/latest/dg/r_UNLOAD.html)）

2.  使用您拥有的 Linux 实例将表的内容通过管道传输到数据文件。所以，运行：

    $> psql -t -A -F 'your_delimiter' -h 'hostname' -d 'database' -U 'user' -c "select * from myTable" >> /home/userA/tableDataFile 将为您解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-02T16:49:40.777

如果您使用的是 Mac，我使用的是 Postico，它运行良好。只需右键单击表，然后单击导出。

# axis2 - WSO2 身份服务器 - 无法从 STS 获取 SAML 令牌

> ID：15440803
> 
> 赞同：1
> 
> 时间：2013-03-15T19:39:16.890
> 
> 标签：axis2, wso2, rampart

遇到了很多麻烦，我得到了一个示例控制台应用程序，直到向身份服务器 STS 发送请求以获取安全令牌。

以下是身份服务器报告的异常：

```
[2013-03-15 14:31:04,563] ERROR {org.wso2.carbon.identity.provider.AttributeCallbackHandler} -  Error occuerd while populating claim
java.lang.NullPointerException
        at org.wso2.carbon.identity.provider.AttributeCallbackHandler.loadClaims(AttributeCallbackHandler.java:136)
        at org.wso2.carbon.identity.provider.AttributeCallbackHandler.handle(AttributeCallbackHandler.java:68)
        at org.apache.rahas.impl.SAMLTokenIssuer.createAttributeAssertion(SAMLTokenIssuer.java:544)
        at org.apache.rahas.impl.SAMLTokenIssuer.createHoKAssertion(SAMLTokenIssuer.java:419)
        at org.apache.rahas.impl.SAMLTokenIssuer.issue(SAMLTokenIssuer.java:173)
        at org.apache.rahas.TokenRequestDispatcher.handle(TokenRequestDispatcher.java:69)
        at org.apache.rahas.STSMessageReceiver.invokeBusinessLogic(STSMessageReceiver.java:57)
        at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
        at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
        at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:180)
        at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
        at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
        at org.wso2.carbon.core.transports.CarbonServlet.doPost(CarbonServlet.java:231)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.wso2.carbon.tomcat.ext.servlet.DelegationServlet.service(DelegationServlet.java:68)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.wso2.carbon.tomcat.ext.filter.CharacterSetFilter.doFilter(CharacterSetFilter.java:61)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.wso2.carbon.tomcat.ext.valves.CompositeValve.invoke(CompositeValve.java:172)
        at org.wso2.carbon.tomcat.ext.valves.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:156)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
        at org.wso2.carbon.tomcat.ext.valves.CarbonContextCreatorValve.invoke(CarbonContextCreatorValve.java:52)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
org.apache.rahas.TrustException: Error in creating a SAMLToken using Opensaml library
        at org.apache.rahas.impl.SAMLTokenIssuer.createAttributeAssertion(SAMLTokenIssuer.java:585)
        at org.apache.rahas.impl.SAMLTokenIssuer.createHoKAssertion(SAMLTokenIssuer.java:419)
        at org.apache.rahas.impl.SAMLTokenIssuer.issue(SAMLTokenIssuer.java:173)
        at org.apache.rahas.TokenRequestDispatcher.handle(TokenRequestDispatcher.java:69)
        at org.apache.rahas.STSMessageReceiver.invokeBusinessLogic(STSMessageReceiver.java:57)
        at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
        at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
        at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:180)
        at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
        at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
        at org.wso2.carbon.core.transports.CarbonServlet.doPost(CarbonServlet.java:231)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.wso2.carbon.tomcat.ext.servlet.DelegationServlet.service(DelegationServlet.java:68)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.wso2.carbon.tomcat.ext.filter.CharacterSetFilter.doFilter(CharacterSetFilter.java:61)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.wso2.carbon.tomcat.ext.valves.CompositeValve.invoke(CompositeValve.java:172)
        at org.wso2.carbon.tomcat.ext.valves.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:156)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
        at org.wso2.carbon.tomcat.ext.valves.CarbonContextCreatorValve.invoke(CarbonContextCreatorValve.java:52)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: org.opensaml.MalformedException: AttributeStatement is invalid, requires at least one attribute
        at org.opensaml.SAMLAttributeStatement.checkValidity(Unknown Source)
        at org.opensaml.SAMLObject.toDOM(Unknown Source)
        at org.opensaml.SAMLSubjectStatement.toDOM(Unknown Source)
        at org.opensaml.SAMLAttributeStatement.toDOM(Unknown Source)
        at org.opensaml.SAMLAssertion.toDOM(Unknown Source)
        at org.opensaml.SAMLObject.toDOM(Unknown Source)
        at org.opensaml.SAMLSignedObject.toDOM(Unknown Source)
        at org.opensaml.SAMLObject.toDOM(Unknown Source)
        at org.opensaml.SAMLSignedObject.sign(Unknown Source)
        at org.opensaml.SAMLSignedObject.sign(Unknown Source)
        at org.apache.rahas.impl.SAMLTokenIssuer.createAttributeAssertion(SAMLTokenIssuer.java:581)
        ... 39 more 
```

从所有文档中，我已经按照所有步骤来保护 STS 服务并正确配置它。似乎某些东西未配置为知道要发回哪些声明。

[客户端代码来自“安全令牌服务器](http://docs.wso2.org/wiki/display/IS410/Security+Token+Service+with+WSO2+Identity+Server)”的 4.1.0 版本的身份服务器文档

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:14:58.010

问题是您必须至少发送 1 个索赔，我建议这样做：

```
private static OMElement getRSTTemplate() throws Exception {
        OMFactory fac = OMAbstractFactory.getOMFactory();
        OMElement elem = fac.createOMElement(Constants.RST_TEMPLATE);
        TrustUtil.createTokenTypeElement(RahasConstants.VERSION_05_02, elem)
                .setText(XML.SAML_NS);
        TrustUtil.createKeyTypeElement(RahasConstants.VERSION_05_02, elem,
                RahasConstants.KEY_TYPE_SYMM_KEY);
        TrustUtil.createKeySizeElement(RahasConstants.VERSION_05_02, elem, 256);
        TrustUtil.createClaims(RahasConstants.VERSION_05_02, elem,"http://wso2.org");
        addClaimType(elem,"http://wso2.org/claims/givenname");
        return elem;
       }

       private static void addClaimType(OMElement parent,String uri) {
        OMElement element = null;
        element = parent.getOMFactory().createOMElement(new QName("http://schemas.xmlsoap.org/ws/2005/05/identity", "ClaimType", "wsid"),
                      parent);
        element.addAttribute( parent.getOMFactory().createOMAttribute("Uri",null,uri));
       } 
```

# haskell - 使用 INLINABLE pragma 的缺点

> ID：15440804
> 
> 赞同：24
> 
> 时间：2013-03-15T19:39:22.317
> 
> 标签：haskell, optimization, ghc

我问这个问题是为了完善 Simon Marlow 对上一个问题给出的答案`INLINABLE`，链接在这里：

[有什么理由不对函数使用 INLINABLE pragma 吗？](https://stackoverflow.com/q/9709823/1026598)

我意识到这几乎是那个问题的重复，除了 Simon Marlow 没有回答对许多图书馆作者来说最重要的关键问题：**从纯粹的性能角度来看**，只`INLINABLE`为所有内容添加 pragma 是否安全？

据我所知，唯一的缺点是：

*   较慢的编译时间

*   较大的接口文件（即`*.hi`）

但我真正想知道的是代码是否会因为添加`INLINABLE`编译指示而运行得更慢？换句话说，`INLINABLE`编译指示是否会导致 GHC 选择不太理想的优化？

我问的原因是，包括我自己在内的许多库作者并不关心接口文件的大小，并且在添加`INLINABLE`pragma 时我们没有观察到编译速度明显减慢，因此很容易在任何地方反射性地添加它们，因为这样做似乎没有任何成本。

相反，将它们排除在外的代价是，当模块变得非常大时，`ghc`开始有选择地从接口文件中省略一些函数以节省空间，这有时确实会导致更糟糕的优化，并且很难预测这会在什么时候发生，并且它将省略哪些功能。

我个人从未见过由于`INLINABLE`注释而导致函数运行速度变慢，但这可能完全是由于运气。如果在某些情况下`INLINABLE`会减慢速度，我想知道为什么会这样，以便我可以更好地推断何时添加编译指示，而不是对编译器编译指示的每个排列进行乏味的基准测试。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T23:00:37.647

不确定这是否符合纯粹的功能观点，它肯定不是你问题的完整答案，但它是一点点。

从系统管理的角度或角度来看，使所有内容都可以 INLINEABLE 意味着对任何功能的每一个微小更改都会导致接口发生变化，并且您会获得一个新的包 id，并且需要根据该模块重新编译所有内容。

例如，这会导致发行版出现问题：我们尝试将安全修复程序反向移植到 Debian stable 中的软件包。如果修复没有改变 ABI，我们可以简单地更新一个包（并重建所有静态构建的程序）。如果它确实改变了 ABI，我们可能不得不重建几十个或更多的包。这样的问题[让 Haskell](https://lists.debian.org/debian-devel/2013/02/msg00068.html)对那些不得不处理这些问题但并不特别关心 Haskell 的人来说很糟糕。

# oracle - 需要在Oracle 11G 中复制一个非常大的表的内容

> ID：15440805
> 
> 赞同：2
> 
> 时间：2013-03-15T19:39:22.503
> 
> 标签：oracle, oracle11g

我们有一个每天存储数十亿行的数据库。它是一个 11G 的 Oracle 数据库，为同一站点 HA 启用 RAC，为跨站点启用活动数据保护。我们不得不将块大小从 16k 更改为 8k。由于这不是在线更改，我们不得不用几个月的数据重命名表并创建一个新表。现在我们需要将原始表中的数据放入新表中。

直接路径插入会锁定表，而常规插入会导致大量 RAC 等待。想知道是否有人有任何最佳实践可以将大量数据从一个表移动到另一个表而不阻止其他进程将数据写入新表（快速）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:54:08.533

```
CREATE TABLE new_table_name
TABLESPACE table_space_name
NOLOGGING
PARALLEL 4
AS SELECT * FROM existing_table_name ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-31T12:12:22.547

```
create table <new table name> as <existing table name>;   
// its create a clone table with data.

create table <new table name> as <existing table name> 
where 1==2 <any false condition>;                        
// its create a clone table without data. 
```

# javascript - 替换 observableArray 中的项目

> ID：15440810
> 
> 赞同：34
> 
> 时间：2013-03-15T19:39:37.573
> 
> 标签：javascript, knockout.js, ko.observablearray

我正在尝试`observableArray`用新内容替换项目的所有内容。

```
var oldLocation = ko.utils.arrayFirst(self.locations(), function (item) {
    return item.id == value.id;
});
self.locations.replace(self.locations.indexOf(oldLocation), new location(value));
self.locations.valueHasMutated(); 
```

我也试过

```
self.locations[self.locations.indexOf(location)] = new fizi.ko.models.location(value); 
```

但没有任何工作。正在正确检索索引，但没有更新项目。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-15T19:49:27.507

replace 函数接受两个参数，要替换的项目和要替换的新项目。您正在传递索引来代替要替换的项目，因此它不起作用。

替换调用应该是：

```
self.locations.replace(oldLocation, new location(value)); 
```

附带说明一下，您不需要在`valueHasMutated()`那里调用，它将被调用`replace()`调用。

* * *

旁注，许多原生 Array 函数可用于可观察数组。它们被转发到底层数组值，根据需要触发突变通知。这些包括：

`pop`, `push`, `reverse`, `shift`, `sort`, `splice`, `unshift`, `slice`（只读）。

Knockout 提供了这些应在[此处](https://knockoutjs.com/documentation/observableArrays.html)记录的附加方法（当前为 v3.5.1）：

`remove`, `removeAll`, `destroy`, `destroyAll`, `indexOf`, `replace`, `sorted`,`reversed`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-05T12:23:57.427

我只想提一种替代方法：

```
self.locations.splice(
  self.locations.indexOf(location),   // Index of the 1st element to remove
  1,                                  // Number of elements to remote at this index
  new fizi.ko.models.location(value)  // A param for each element to add at the index
); 
```

Knockout 包含`splice`在其文档中，但不包括`replace`：[Knockout Obervable Arrays Docs](http://knockoutjs.com/documentation/observableArrays.html)。但是，如果您查看源代码，您会发现这两个功能都实现了（至少在 KO 3.0 中，我不知道`replace`在以前的版本中是否缺少）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T19:48:17.693

我不知道 JavaScript 中数组或 Knockout 中的替换方法。我错过了什么吗？

如果您想使用第二种方法，那么您需要以可观察的形式访问位置：

```
self.locations()[self.locations.indexOf(location)] = new fizi.ko.models.location(value);
self.locations.valueHasMutated(); 
```

虽然你在使用 indexOf 时不这样做，因为有一个用于可观察数组的 Knockout 版本。

# python - 数据框操作

> ID：15440812
> 
> 赞同：1
> 
> 时间：2013-03-15T19:39:42.043
> 
> 标签：python, pandas

目标：将一列添加到由标签组成的数据框中，如下所示：

```
(-10,5]=-2

(-5,0]= -1

[0,5)  = 0

[5,10)=  1

[10,15)= 2 
```

....ETC

如果`df.ptdelta`介于两者之间`(-10,5]`，则将 -2 添加到`df`.

尝试1：

```
df=pd.read_csv("___.csv",names="a b c d e f".split())
df.set_index(["a", "b"], inplace=True)
d=df["d"]<5 
u=df["d"]>=0

p=df["d"][d & u] 
```

这似乎找不到任何实例：`Series([], dtype=object)`

`df["d"]`但在这个范围内确实有双打。

尝试2：

```
zero=[x for x in df["d"] if (0<=df["d"]) & (df["d"]<5)] 
```

结果是：

```
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all() 
```

为什么其中任何一个都失败了？非常感谢。

```
df.head() gives: 

        price   ptdelta     II  pl
date    time                
date    time    price   ptdelta II  pl
1/5/2009    930     842     0   -   0
            1620    845.2   3.2     -   6.6
1/6/2009    930     851.8   6.6     -      -3.6
            1620    848.2   -3.6    -   -13 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:00:10.847

您正在对数据进行分箱并按 bin 对其进行标记。很高兴，`numpy.digitize`可以为您做到这一点。

```
bins = [-10, -5, 0, 5, 10, 15]
labels = np.digitize(data, bins) - 3 
```

例子：

```
In[1]: df = DataFrame({'d': np.random.randint(-20, 20, 100)})

In[2]: bins = [-10, -5, 0, 5, 10, 15]

In[3]: df['labels'] = np.digitize(df['d'], bins) - 3

In[4]: df.head()
Out[4]:
   d  labels
0 -8      -2
1  4       0
2 -7      -2
3 -3      -1
4  5       1 
```

这些箱在左侧关闭，如 [-10, 5)。我认为您指定的垃圾箱不是自洽的。（我应该将 0 标记为 -1 还是 0？）无论如何，如果边缘情况至关重要，请参阅文档以获取更多选项。

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.digitize.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.digitize.html)

任何小于 -10 或大于 15 的数据点将分别标记为 -3 和 3。如果需要，您可以丢弃它们。

# c - 如何保留从分叉进程中读取的 stdout 和 stderr 顺序？

> ID：15440819
> 
> 赞同：1
> 
> 时间：2013-03-15T19:40:09.693
> 
> 标签：c, select, fork

我有一个父进程，它派生了一个子进程。我为子进程的 stdin/out/err 创建管道，将父进程中另一端的 fds 存储为`pipe[0]`, `pipe[1]`, `pipe[2]`.

我看到一个竞争条件，`select()`由于数据准备就绪，将返回`pipe[2]`，但随后数据准备就绪，`pipe[1]`并且`pipe[1]`的数据首先写入，`if`因为`pipe[1]`.

有没有办法让我避免这种竞争条件并保留关于子进程何时写信给他们的顺序？

以下是相关代码：

```
// pipe[0] = in of child
// pipe[1] = out of child
// pipe[2] = err of child

char buf[2048];

fd_set rfds;
while (keepRunning) {
    FD_ZERO(&rfds);
    FD_SET(pipe[1], &rfds);
    FD_SET(pipe[2], &rfds);

    int rc = select(pipe[2]+1, &rfds, NULL, NULL, NULL);
    if (rc) {
        if (FD_ISSET(pipe[1], &rfds)) {
            write(1, buf, read(pipe[1], buf, sizeof(buf)));
        }
        if (FD_ISSET(pipe[2], &rfds)) {
            write(2, buf, read(pipe[2], buf, sizeof(buf)));
        }
    } else if (rc == -1) {
        perror("select()");
    }
} 
```

# mongodb - MongoDB的地图功能中的多个文件输入

> ID：15440821
> 
> 赞同：0
> 
> 时间：2013-03-15T19:40:12.863
> 
> 标签：mongodb

实际上我想在 mongodb 中实现一种数据聚类算法。我有两个文件。

1.  数据文件：它有带有时间戳的数据点。

前任：

```
Time stamp | data
6| 46, 36, A    [46,26,A is a data with three dimensions and 6 is  time stamp  at which data came]
7|90,45,B
8|45,12,C
9|34,67,D 
```

1.  配置文件（元数据）

维度类别粒度

```
0, N, 4,0,100  [ 0 th dimesion is numeric has granularity 4 and starts from 0 & goes till 100 i.e. 0-25, 26-50, 51-75,76-100]
1,N,2,0,50      [Ist dimension has gran = 2 thus 0-25, 26-50]
2,C,A,B,C,D [2nd dimension is categorical and as values a,b,c,d therefore granularity 4] 
```

现在我必须在 mongodb 中构建一个 MAP-REDUCE 函数，它通过 tking 来自上述文件的输入为我提供时间戳数据的签名：

```
6- 1,1,0 
7- 3,1,1 
```

等等……

我必须运行 map reduce 将两个文件作为输入.. 但我找不到任何方法在 mongodb map-reduce 中输入多个文件。如果有任何想法，任何人都可以指导如何去做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:27:47.260

mapReduce 作业的输入是 MongoDB 集合，不能是数据文件。

但是，在您的情况下，您不需要 mapReduce()，因为没有“减少”部分 - 您所做的只是将输入记录 1:1 转换为输出记录。

因此，第一步是将数据文件存储到集合“inp”中——将时间序列作为数组存储在文档中。如果您的数据文件应生成大于 16MB 的文档，则必须将其拆分为多个文档 - 出于示例的目的，每个文档我将仅存储 2 个时间戳元素。我在 JavaScript 中为 mongo shell 做了示例：

```
PATH = "/home/ronald/mongotest/";
DATA = "data.file";
ELEMS_PER_DOC = 2; // number of emelements in "series" per document

db.data.drop();
data = cat( PATH + DATA );
lines = data.split("\n")
lines = lines.splice(0,lines.length-1);
series = [];
lines.forEach(function( line ) {
    if ( series.length >= ELEMS_PER_DOC ) {
        db.data.insert({ "series": series });
        series = [];
    }
    l = line.split("|");
    timestamp = l[0];
    d = l[1].split(",");
    series.push( { "ts": timestamp, "data": d } );
});
db.data.insert({ "series": series }); 
```

对于给定的数据文件：

```
6|46,36,A
7|90,45,B
8|45,12,C
9|34,67,D 
```

这将产生以下集合：

```
> db.data.find().pretty()
{
    "_id" : ObjectId("515e735657a0887a97cc8d23"),
    "series" : [
        {
            "ts" : "6",
            "data" : [
                "46",
                "36",
                "A"
            ]
        },
        {
            "ts" : "7",
            "data" : [
                "90",
                "45",
                "B"
            ]
        }
    ]
}
{
    "_id" : ObjectId("515e735657a0887a97cc8d24"),
    "series" : [
        {
            "ts" : "8",
            "data" : [
                "45",
                "12",
                "C"
            ]
        },
        {
            "ts" : "9",
            "data" : [
                "34",
                "67",
                "D"
            ]
        }
    ]
} 
```

[ 注意：如果您不想将输入数据存储在 MongoDB 中，那么只需构建“系列”数组并将其用作第三步中的输入。观察客户端机器上的内存使用情况！]

下一步是从配置文件生成 JavaScript 函数，这些函数将用于根据规则集转换数据。实际上，这将是一个函数数组，以避免对三个维度的硬编码限制。

```
PATH = "/home/ronald/mongotest/";
CONFIG = "config.file";

config = cat( PATH + CONFIG );
lines = config.split("\n")
lines = lines.splice(0,lines.length-1);
// array of functions - index = dimension
funcs = [];
lines.forEach(function( line ) {
    x = line.split(",");
    f = "";
    if ( x[1] == "N" ) {
        // Numeric rule: 
        // x[2] = granularity
        // x[3],x[4] lower,upper range
        // the function to be called for the given value looks like:
        //    function( val ) returns: the interval or "n/a" if outside range
        // the interval is given by (val - (val modulo intervalSize)) / intervalSize
        // the intervalSize is (max - min) / granularity
        intervalSize = (x[4] - x[3]) / x[2];
        f = "function (val) {";
        f += "  if ( val < "+x[3]+" || val > "+x[4]+" ) return 'n/a';";
        f += "  return (val - val % "+intervalSize+") / "+intervalSize+";";
        f += "}";
    } else if ( x[1] == "C" ) {
        // Categoric rule: 
        // return the position of value in the array of params
        // skip dimension and rule type
        x = x.splice(2, x.length-1);
        // build parameter array
        pa = '[';
        x.forEach( function(p) { pa += '"' + p + '",' } );
        pa += ']';
        // the function will return -1 if value not found in array
        f = "function (val) { return "+pa+".indexOf(val) }";
    }
    else {
        // unknown rule type
        f = "function (val) { return 'rule err' }";
    }
    eval( "fx = "+f );
    funcs.push( fx );
}); 
```

对于给定的配置文件：

```
0,N,4,0,100
1,N,2,0,50
2,C,A,B,C,D 
```

这将生成以下函数数组：

```
> funcs
[
    function (val) {  if ( val < 0 || val > 100 ) return 'n/a';  return (val - val % 25) / 25;},
    function (val) {  if ( val < 0 || val > 50 ) return 'n/a';  return (val - val % 25) / 25;},
    function (val) { return ["A","B","C","D",].indexOf(val) }
] 
```

现在，第三部分也是最后一部分：从输入集合创建输出集合：

```
db.out.drop();
cursor = db.data.find();
cursor.forEach( function (doc) {
    doc.series.forEach( function (serie) {
        for ( i=0; i<serie.data.length; i++ ) {
            // apply transformation function for each dimension
            serie.data[i] = funcs[i]( serie.data[i] );            
        }
    });
    db.out.insert( doc );
}) 
```

最后的结果是：

```
> db.out.find().pretty()
{
    "_id" : ObjectId("515e974c57a0887a97cc8d2f"),
    "series" : [
        {
            "ts" : "6",
            "data" : [
                1,
                1,
                0
            ]
        },
        {
            "ts" : "7",
            "data" : [
                3,
                1,
                1
            ]
        }
    ]
}
{
    "_id" : ObjectId("515e974c57a0887a97cc8d30"),
    "series" : [
        {
            "ts" : "8",
            "data" : [
                1,
                0,
                2
            ]
        },
        {
            "ts" : "9",
            "data" : [
                1,
                "n/a",
                3
            ]
        }
    ]
} 
```

# algorithm - 反转一个简单的加密算法

> ID：15440823
> 
> 赞同：1
> 
> 时间：2013-03-15T19:40:17.670
> 
> 标签：algorithm, encryption

我正在尝试对一个已被废弃的相当旧的应用程序进行一些更新我在数据库中找到了一些管理员密码，它似乎是一个非常简单的哈希值，但我之前没有遇到过任何问题。我可以更改用户通行证而不是管理员通行证，这样做我试图破译模式。

这里有些例子

=> 哈希到

```
1234 => rebrmyrj

david@work => wbczyjwbxmftfredjmra

password => tfczyyttkjfefpej

lana@work => wyczpewyxtejeffwrc

abcdefghijklmnop => wecrpywjxzfrerearerbapmcwerzfmmc

qrstuvwxyz => tedryytjkzerfrfajejb 
```

有谁熟悉这个？？

提前致谢

*编辑

将 Bjorn 和 Oscar 输入的哈希更改为加密

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:57:54.867

看起来这是散列还是真正的加密。相同的字符将在相同的位置给出相同的两个字符输出：

```
char, pos = output
a   , 2   = cz
w   , 7   = fr
s   , 3   = yy 
```

如果您查看相同位置的字符，您会注意到从某个起始值开始倒计时：

```
char, pos = output
a   , 1   = we
d   , 1   = wb 
```

字符 'a' + 3 = 'd'，结果是 'we' - 3 = 'wb'。

所以你只需要找到原始字符串，从中减去密码的字符。我认为其余的应该是例行工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T20:57:58.653

这似乎是一个[多字母替换密码](http://en.wikipedia.org/wiki/Substitution_cipher#Polyalphabetic_substitution)。输入中的每个字母总是映射到输出中的两个字母，但每个输入字母究竟映射*到哪*两个字母取决于它在字符串中的位置。

例如，请注意，如果它是第一个字母，则`a`总是映射到`we`，但如果它是第二个字母，则`a`映射到`cz`，等等。

由于您选择了明文，因此这很容易破解；只需对短语`aaaaaaaaaaa...`, `bbbbbbbbbbb...`,`ccccccccccc...`等进行编码，以确定字符串中每个点上哪个字母映射到哪个字符*（您可能还需要映射大写字母： `AAAAAAAAAA...`等）*。如果您开始看到重复，则意味着该密码很可能是[Vigenère 密码](http://en.wikipedia.org/wiki/Vigen%C3%A8re_cipher)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T19:41:51.630

根据定义，哈希算法是*不*可逆的：是一个不可逆的函数。此外，虽然不太可能，但多个输入可能会散列到相同的值（冲突）。

# java - 我想我想出了比较两个日期的最糟糕的方法；有没有可能让它变得更好？

> ID：15440825
> 
> 赞同：3
> 
> 时间：2013-03-15T19:40:21.587
> 
> 标签：java, android, android-sqlite

我的应用程序通过日期选择器片段接受来自用户的日期，并将其存储在数据库中，其中日、月和年作为字符串类型的单独列。

现在，我正在创建一个函数，稍后将使用系统的当前日期检查每个日期。如果当前日期早于用户输入的日期（并存储在数据库中），则增加一个标志变量。

这是代码：

```
public int checkDate() {                                    //Method to check date and take action
                                                                                //NOT COMPLETE. STILL FIGURING IT OUT.  

        String isstatus = "Ongoing";
        String[] columns = new String[] {KEY_ROWID, DAY, MONTH, YEAR ,PROJECT_STATUS}; 
        Cursor c = projectDatabase.query(DATABASE_TABLE, columns, PROJECT_STATUS + "=" + isstatus, null, null, null, null);
        int result = 0;
        int flag = 0;

        int iRow = c.getColumnIndex(KEY_ROWID);
        int iDay = c.getColumnIndex(DAY);
        int iMonth = c.getColumnIndex(MONTH);
        int iYear = c.getColumnIndex(YEAR);

        final Calendar cal = Calendar.getInstance();                        //fetch current system date
        int cyear = cal.get(Calendar.YEAR);
        int cmonth = cal.get(Calendar.MONTH);
        int cday = cal.get(Calendar.DAY_OF_MONTH);

        for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {

            String id = c.getString(iRow);

            int fday = Integer.parseInt(c.getString(iDay));
            int fmonth = Integer.parseInt(c.getString(iMonth));
            int fyear = Integer.parseInt(c.getString(iYear));

            if(cday>fday && cmonth>fmonth && cyear>fyear) {

                flag++;
                updateStatus(id, "Missed");

            }

               else

            if(cday>fday && cmonth==fmonth && cyear==fyear) {

                flag++;
                updateStatus(id, "Missed");

            }

               else

            if(cday==fday && cmonth>fmonth && cyear>fyear) {

                flag++;
                updateStatus(id, "Missed");

            }

               else

            if(cday==fday && cmonth==fmonth && cyear>fyear) {

                    flag++;
                    updateStatus(id, "Missed");

            }

               else

            if(cmonth>fmonth && cyear>fyear) {

                    flag++;
                    updateStatus(id, "Missed");

            }

               else

            if(cmonth>fmonth && cyear==fyear) {

                    flag++;
                    updateStatus(id, "Missed");

            }

            result = flag;

        }

        return result;
    } 
```

如您所见，我必须比较未来日期的所有可能情况。而且我个人认为这不是最有效的方法。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:50:40.007

我从未真正使用过日期，但我将概述一种算法，该算法至少可以减少您需要进行的比较次数。

```
if(currentYear > dataYear) {
    //We're obviously past that date. Move on
} else if(currentYear == dataYear) {
    //We're in the same year. Let's check for months
    if(currentMonth > dataMonth) {
        //Missed the date again, move on
    } else if(currentMonth == dataMonth) {
        //We're in the same year and the same month! Let's check days
        if(currentDay > dataDay) {
            //Date is still in the past. Keep moving on
        } else if(currentDay == dataDay) {
            //Date is today
        } else {
            //Date is in the future
        }
    }
} else {
    //Date is in the past
} 
```

这也不会是非常高效的，您可能会通过`&&`策略性地使用来减少 if 语句的数量（尽管编译器优化可能会为您做到这一点）。

更好的方法是将日期保存为 UNIX 时间，并获取当前的 UNIX 时间并比较两个长整数。没有比这更简单的了。

您还可以从存储的日期构造另一个 Calendar 对象并使用[before()](http://developer.android.com/reference/java/util/Calendar.html#before%28java.lang.Object%29)。但是，原始的 long 与 long 比较将比比较两个日历更有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T20:00:44.840

建议使用 joda datetime 库进行日期比较，有一些有用的功能，例如 isBefore 和 isAfter

[http://joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T20:06:11.540

仅[`Date`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)用于比较

```
Date now = new Date();
Calendar cal = Calendar.getInstance();
cal.setTime(now); // make sure the time part is the same
for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
    String id = c.getString(iRow);

    int fday = Integer.parseInt(c.getString(iDay));
    int fmonth = Integer.parseInt(c.getString(iMonth));
    int fyear = Integer.parseInt(c.getString(iYear));

    cal.set(Calendar.YEAR, fyear);
    cal.set(Calendar.MONTH, fmonth);
    cal.set(Calendar.DAY_OF_MONTH, fday);
    Date d = cal.getTime();
    if (now.after(d)) {
        flag++;
        updateStatus(id, "Missed");
    }

    result = flag;
} 
```

# iphone - 检查按钮是否已滑过，并检查其标签？(iOS)

> ID：15440827
> 
> 赞同：-5
> 
> 时间：2013-03-15T19:40:37.640
> 
> 标签：iphone, ios, objective-c, xcode, uibutton

在我的代码中，我在一个数组中创建了点，并使用该数组创建了 10 个按钮。我将每个按钮的标签按顺序设置为 0 - 9。我想要做的是检查一个按钮何时被滑过（不仅仅是点击），然后能够检查它的标签并根据标签是什么做一些事情！

这是我的代码：

```
 #import "LevelOneController.h"

@interface LevelOneController ()

@end

@implementation LevelOneController
@synthesize whereStuffActuallyHappens, squareLocations;

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"View loaded");

    squareLocations = [[NSMutableArray alloc] init];

    CGPoint dotOne = CGPointMake(1, 25);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotOne]];

    CGPoint dotTwo = CGPointMake(23, 25);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotTwo]];

    CGPoint dotThree = CGPointMake(45, 25);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotThree]];

    CGPoint dotFour = CGPointMake(67, 25);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotFour]];

    CGPoint dotFive = CGPointMake(89, 25);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotFive]];

    CGPoint dotSix = CGPointMake(111, 25);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotSix]];

    CGPoint dotSeven = CGPointMake(133, 25);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotSeven]];

    CGPoint dotEight = CGPointMake(155, 25);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotEight]];

    CGPoint dotNine = CGPointMake(177, 25);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotNine]];

    CGPoint dotTen = CGPointMake(199, 25);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotTen]];

    int numby = [squareLocations count];

    for (int i = 0; i < numby; i++)
    {
        NSValue *pointLocation = [squareLocations objectAtIndex:i];
        CGPoint tmpPoint = [pointLocation CGPointValue];
        UIImage *theSquare = [UIImage imageNamed:@"square.png"];

        UIButton *squareButton = [[UIButton alloc] init];

        squareButton = [UIButton buttonWithType:UIButtonTypeCustom];
        squareButton.frame = CGRectMake(tmpPoint.x, tmpPoint.y, theSquare.size.width, theSquare.size.height);
        squareButton.tag = *(&i);
        [squareButton setImage:theSquare forState:UIControlStateNormal];

        [whereStuffActuallyHappens addSubview:squareButton];

    }
} 
```

有谁知道实现这一目标的好方法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:53:13.780

我想你可以做这样的事情，但不知道它的性能如何：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
     [super touchesMoved:touches withEvent:event];
     for (UITouch *touch in touches) {
          CGPoint locationInView = [touch locationInView:touch.view];
          for (NSValue *pointValue in squareLocations) {
               CGPoint point = [pointValue CGPointValue];
               if (CGRectContainsPoint(CGRectMake(point.x, point.y, 50, 50),locationInView) == YES) {
                      //This button or location has been dragged over
                }
          }
     }
} 
```

# .net - 面向 4.0 部署要求的 Async Await

> ID：15440829
> 
> 赞同：6
> 
> 时间：2013-03-15T19:40:46.643
> 
> 标签：.net, .net-4.0, async-await, c#-5.0, targeting

Microsoft 已更新 .net 4.0 的 async/await 目标，现在建议使用[nuget上提供的](https://nuget.org/packages/Microsoft.Bcl.Async/)[Microsoft.Bcl.Async](http://blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework-4-5.aspx)库。

在发行说明中，它指出需要带有[KB 2468871](http://support.microsoft.com/kb/2468871)的 .net 4。

1.  KB2468871 是构建要求还是部署要求？
2.  KB2468871 的哪些方面需要它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-07T08:56:07.253

引用自[http://support.microsoft.com/kb/2468871/en-us](http://support.microsoft.com/kb/2468871/en-us)

> 功能 5 对支持可移植库的更改。这些更改包括 API 更新和活页夹修改。此更新使 CLR 能够成功绑定到可移植库，以便单个 DLL 可以在 .NET Framework 4、Silverlight、Xbox 或 Windows Phone 上运行。此更新将公共 Silverlight API 添加到同一位置的 .NET Framework 4。API 签名将在整个平台上保持一致。所有修改都是 100% 兼容的，不会破坏任何现有代码。

事实证明，如果没有安装这个 kb，Microsoft.Bcl 就会崩溃（它会尝试绑定到`System.Core`不在系统上的 silverlight 库）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-06T12:03:36.087

在不安装 KB2468871 的情况下在支持 xp 用户的 .net 4.0 中使用 async/await 的唯一安全方法是在 vs 2010 SP1、nuget microsoft bcl async 中安装 async CTP v3 并实现自己的 AsyncTaskMethodBuilder 和 AsyncVoidMethodBuilder。（并删除异步 ctp dll 引用）

这是 .net4 与 2010 中任何非异步 CTP 异步实现的唯一方法，无需安装 vs 2012、net 4.5 或 KB2468871 即可工作。

任何其他在 .net4 上准备使用的异步实现都使用了在编译过程中实现和桥接异步代码的新方法，这就是为什么您需要安装异步 CTP，它是 .net4 的唯一异步实现，修改 csc编译器来支持它。

微软已经改变了编译器在 c#5 和 .net 4.5 中使用的类型来生成异步代码，基本上他们可以为 .net4 轻松完成，但是他们选择强制任何人安装 vs 2012 和 .net 4.5，这是不可接受的对于需要支持 xp 用户的公司，因为您将无法查看和修复在 .net 4.5 中修复的任何 .net 4 错误。

Microsoft.Bcl.Async、AsyncTargetingPack、AsyncBridge 如果没有安装 .net 4.5 或 .net 4.0 的 KB2468871，它们都将无法工作。

如果您自己实现 AsyncTaskMethodBuilder 和 AsyncVoidMethodBuilder，它们将全部工作，您甚至可以从 async ctp v3 复制/粘贴它的实现，只需稍作更改，它就会正常工作。

因此，如果您真的担心部署要求和其他与支持 xp 用户相关的事情，我强烈建议您按照我的描述进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T20:49:21.907

发行说明详细信息：

> 针对以下任何平台（或更高版本）时：
> 
> ```
> • .NET Framework 4.0 (with KB2468871) 
> ```

因此，这意味着您的目标是 4.0 w/KB2468871，因为必须在目标计算机上部署 KB2468871 才能支持该库。

没有关于 Microsoft.Bcl.Async 需要 KB2468871 的哪些部分的详细信息。我建议您联系 BCL 团队，在博客上发帖，或联系 Nuget 包所有者了解更多详细信息。我不清楚知道需要 KB 的哪些部分会有什么不同...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-24T09:22:11.477

可以在没有 KB2468871 的情况下使用 AsyncBridge 可移植来获得异步/等待功能。[https://www.nuget.org/packages/AsyncBridge.Portable/](https://www.nuget.org/packages/AsyncBridge.Portable/)

# wcf - WCF：发出并发请求时出现异常

> ID：15440832
> 
> 赞同：2
> 
> 时间：2013-03-15T19:40:59.257
> 
> 标签：wcf

我在我的应用程序中看到了几个问题。这是重现问题的示例代码。

服务：

```
[ServiceContract]
    public interface IService1
    {
        [OperationContract]        
        string GetData(int value, int minDelaySeconds, int maxDelaySeconds);     
    }

    [ServiceBehavior(
    InstanceContextMode = InstanceContextMode.Single,
    ConcurrencyMode = ConcurrencyMode.Multiple)]    
    public class Service1 : IService1
    {
        /// <summary>
        /// Simulates an operation. Generates a random string, and sleeps for sometime to simulate a long running operation.
        /// </summary>
        /// <param name="value">length of string</param>
        /// <param name="min">minimum time delay. units: seconds</param>
        /// <param name="max">maximum time delay. units: seconds</param>
        /// <returns></returns>
        public string GetData(int value, int min, int max)
        {            
            var r = new Random();
            var bytes = new byte[value];
            r.NextBytes(bytes);
            var s = Convert.ToBase64String(bytes);
            Thread.Sleep(TimeSpan.FromSeconds(r.NextDouble() * (max - min) + min));
            return s;
        }
    } 
```

服务配置（使用自定义绑定）：

```
<customBinding>
        <binding name="myHttpBinding">
          <reliableSession />
          <binaryMessageEncoding />
          <httpTransport  maxReceivedMessageSize="2147483647" maxBufferSize="2147483647"/>
        </binding>
      </customBinding> 
```

客户端（对服务进行并行调用）：

```
static void Main(string[] args)
        {
            using (var tw = Console.Out)
            {
                try
                {
                    ServicePointManager.DefaultConnectionLimit = 100;
                    int numberOfthreads, minDelay, maxDelay, minPayLoad, maxPayLoad, numberOfRequests;
                    ParseCmdArgs(args, out numberOfthreads, out minDelay, out maxDelay, out minPayLoad, out maxPayLoad, out numberOfRequests);
                    var interceptor = new Interceptor();                    
                    var r = new Random();
                    using (var svc = new ServiceReference1.Service1Client())
                    {
                        svc.Endpoint.EndpointBehaviors.Add(interceptor);
                        var tasks = new Task[numberOfthreads];
                        int threadId = 0;
                        for (int ctr = 0; ctr < numberOfthreads; ctr++)
                        {
                            tasks[ctr] = Task.Run(async () =>
                            {
                                int id = Interlocked.Increment(ref threadId);
                                var count = 0;
                                while (count < numberOfRequests)
                                {                                    
                                    Thread.CurrentThread.Name = id.ToString();                                
                                    await svc.GetDataAsync(r.Next(minPayLoad, maxPayLoad), minDelay, maxDelay);
                                    // you will be on a different thread now, than the thread which made the call
                                    Debug.Assert(string.IsNullOrEmpty(Thread.CurrentThread.Name)); // note
                                    count++;
                                }
                                tw.WriteLine("Thread {0} is exiting...", id);
                            });
                        }
                        Task.WaitAll(tasks);
                    }
                }
                catch (Exception e)
                {
                    LogException(e, tw);
                }
            }         
        } 
```

客户端配置：

```
<system.net>
    <connectionManagement>
      <add address="*" maxconnection="100"/>
    </connectionManagement>
  </system.net>
...
<customBinding>              
                <binding name="myHttpBinding">
                    <reliableSession />
                    <binaryMessageEncoding />
                    <httpTransport maxReceivedMessageSize="2147483647" maxBufferSize="2147483647"/>
                </binding>
            </customBinding> 
```

问题：

1.  我只看到串行请求处理。为什么？
2.  通常在消息离开服务器和到达客户端之间存在很大的时间延迟（多大？有时超过 60 秒）。中间发生了什么？服务和客户端都在同一台机器上。我在下面显示了客户端时间，为简洁起见省略了服务跟踪。
3.  当线程即将退出时，客户端发生异常。见下文。为什么，以及如何解决这个问题？
4.  有人可以告诉我如何修改客户端方法，使其不会创建多个线程来发出并发请求吗？该解决方案应受到不使用任何锁定语句的约束。

// 命令行参数说明：并行5个请求，延时5-30s之间，消息大小100kb-1MB之间，每个“线程”调用5次才退出

```
c:\Users\me\Documents\Visual Studio 2012\Projects\ConsoleApplication8\Test
Client1\bin\Debug>run2 5 5 30 100000 1000000 5  
[2] 1 Sending request...Received Response 502,492.00 bytes in 18.8 sec  
[3] 2 Sending request...Received Response 313,662.00 bytes in 29.0 sec  
[4] 3 Sending request...Received Response 1,236,254.00 bytes in 27.5 sec  
[1] 4 Sending request...Received Response 1,250,170.00 bytes in 36.3 sec  
[5] 5 Sending request...Received Response 151,803.00 bytes in 54.8 sec  
[2] 6 Sending request...Received Response 625,859.00 bytes in 26.8 sec  
[4] 7 Sending request...Received Response 395,976.00 bytes in 47.6 sec  
[3] 8 Sending request...Received Response 945,664.00 bytes in 45.1 sec  
[1] 9 Sending request...Received Response 1,287,904.00 bytes in 73.5 sec  
[2] 10 Sending request...Received Response 1,312,428.00 bytes in 52.9 sec  
[5] 11 Sending request...Received Response 1,045,727.00 bytes in 103.3 sec  
[3] 12 Sending request...Received Response 190,310.00 bytes in 107.5 sec  
[4] 13 Sending request...  
[2] 14 Sending request...  
[1] 15 Sending request...  
[5] 16 Sending request...Received Response 1,323,274.00 bytes in 36.4 sec  
[3] 17 Sending request...Received Response 1,090,367.00 bytes in 13.4 sec  
[5] 18 Sending request...Received Response 458,598.00 bytes in 28.8 sec  
[3] 19 Sending request...Received Response 1,185,986.00 bytes in 28.3 sec  
[5] 20 Sending request...Received Response 731,178.00 bytes in 27.0 sec  
Thread 3 is exiting...  
Thread 5 is exiting...  

One or more errors occurred.  
   at System.Threading.Tasks.Task.WaitAll(Task[] tasks, Int32 millisecondsTimeout, CancellationToken cancellationToken)  
   at System.Threading.Tasks.Task.WaitAll(Task[] tasks, Int32 millisecondsTimeou
t)  
   at System.Threading.Tasks.Task.WaitAll(Task[] tasks)  
   at TestClient1.Program.Main(String[] args) in c:\Users\me\Documents\Vis  
ual Studio 2012\Projects\ConsoleApplication8\TestClient1\Program.cs:line 48  
The message could not be transferred within the allotted timeout of 00:01:00\. Th  
ere was no space available in the reliable channel's transfer window. The time a  
llotted to this operation may have been a portion of a longer timeout.  
   at System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult result)  
   at System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.End(SendAsyncR  
esult result)  
   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[  
] outs, IAsyncResult result)  
   at System.ServiceModel.Channels.ServiceChannelProxy.TaskCreator.<>c__DisplayC  
lass5`1.<CreateGenericTask>b__4(IAsyncResult asyncResult)  
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar,  
Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchron  
ization)  
--- End of stack trace from previous location where exception was thrown ---  
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)  
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNot  
ification(Task task)  
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()  
   at TestClient1.Program.<>c__DisplayClass8.<<Main>b__0>d__a.MoveNext() in c:\U  
sers\me\Documents\Visual Studio 2012\Projects\ConsoleApplication8\TestClie  
nt1\Program.cs:line 40 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:30:17.760

1.  见（2）。
2.  我最初的想法是并发模式没有设置为多个。但是，我看到这毕竟是设置的。你可能会受到限制。我相信会话默认为 10。因此，如果您没有为会话设置限制，这可能是导致它的原因。尝试将 ServiceThrottlingBehavior 中的 maxConncurentSessions 提高到更高的数字（例如 20）。

3.  1 和 2 的解决方案可能会解决此问题，因为您似乎超出了空闲超时设置。如果你能更开放一点，那么我认为这会消失。

您可能想要更改的是 using 构造 .... 在客户端上使用 (var svc = new ServiceReference1.Service1Client())。有关详细信息，请参阅此文档。 [http://msdn.microsoft.com/en-us/library/aa355056.aspx](http://msdn.microsoft.com/en-us/library/aa355056.aspx)。在使用 WCF 代理时，您应该使用 try/finally 构造。

# c++ - g++ vs intel/clang 参数传递顺序？

> ID：15440833
> 
> 赞同：7
> 
> 时间：2013-03-15T19:41:00.273
> 
> 标签：c++, c++11, arguments, standards-compliance, chrono

考虑以下代码（[LWS](http://liveworkspace.org/code/JOaST%247)）：

```
#include <iostream>
#include <chrono>

inline void test(
   const std::chrono::high_resolution_clock::time_point& first, 
   const std::chrono::high_resolution_clock::time_point& second)
{
   std::cout << first.time_since_epoch().count() << std::endl;
   std::cout << second.time_since_epoch().count() << std::endl;
}

int main(int argc, char* argv[])
{
   test(std::chrono::high_resolution_clock::now(), 
        std::chrono::high_resolution_clock::now());
   return 0;
} 
```

您必须多次运行它，因为有时没有明显的区别。`first`但是当和的求值时间有明显差异时，`second`在 g++ 下的结果如下：

```
1363376239363175
1363376239363174 
```

以及 intel 和 clang 下的以下内容：

```
1363376267971435
1363376267971436 
```

这意味着在 g++ 下，`second`首先评估参数，而在 intel 和 clang 下，`first`首先评估参数。

根据 C++11 标准，哪一个是正确的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-15T19:41:49.840

> 根据 C++11 标准，哪一个是正确的？

两者都是允许的。引用标准（§8.3.6）：

> 函数参数的求值顺序未指定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-16T16:15:11.563

我有一个稍微简单的例子来说明同样的问题。

```
bash$ cat test.cpp
#include <iostream>
using namespace std;
int x = 0;
int foo() 
{
    cout << "foo" << endl;
    return x++;
}
int bar()
{
    cout << "bar" << endl;
    return x++;
}
void test_it(int a, int b)
{
    cout << "a = " << a << endl
        << "b = " << b << endl;

}
int main(int argc, const char *argv[])
{
    test_it(foo(),bar()); 
    return 0;
}

bash$ clang++ test.cpp && ./a.out
foo
bar
a = 0
b = 1
bash$ g++ test.cpp && ./a.out
bar
foo
a = 1
b = 0 
```

# java - 如何在 mahout 中使用朴素贝叶斯分类器创建我们自己的情感分析模型？

> ID：15440846
> 
> 赞同：1
> 
> 时间：2013-03-15T19:41:39.153
> 
> 标签：java, machine-learning, mahout, sentiment-analysis

我是mahout的初学者。我不知道如何在 mahout 中使用朴素贝叶斯分类器创建我们自己的情感分析模型。我想创建自己的模型来对一些日志数据进行情绪分析。是否有执行此操作的分步程序。比如我们必须实现哪些类以及如何创建模型或我们如何在 mahout 中使用现有模型。任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:56:23.873

您可以在[此演示文稿](http://www.slideshare.net/jpatanooga/sea-hug-navebayes24042011v5)中看到有关在 Mahou 中使用朴素贝叶斯分类器进行分析的步骤的良好指南。这是一个循序渐进的过程。

> 用朴素贝叶斯深入分类。在此过程中，我们将查看 Ian Witten 的数据挖掘书中的一些基础知识并深入研究算法......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:57:28.223

那么你看过[快速入门](https://cwiki.apache.org/confluence/display/MAHOUT/Quickstart)吗？

第一步是评估你的语料库。您的日志数据是如何标记的？你有多少数据？如果您有标记的语料库，那么只需按照快速入门并用您的语料库替换示例中的语料库即可。

在你开始编写代码之前，你必须拥有一个高质量的语料库。确保您的示例是平衡的，并且您有足够的数据进行训练。您可以查看一些研究语料库，以大致了解培训所需的内容。我建议使用 Reuters-21578 语料库，或者如果你能获得 RCV-1 语料库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-13T16:58:30.887

你可以看下面的博客，这里一步一步的详细解释：http: [//instantjavasolutions.blogspot.in/2014/10/how-to-train-my-own-model-using-mahout.html](http://instantjavasolutions.blogspot.in/2014/10/how-to-train-my-own-model-using-mahout.html)

# c# - 如何创建具有 n 个字节的数组？

> ID：15440850
> 
> 赞同：1
> 
> 时间：2013-03-15T19:41:44.987
> 
> 标签：c#, arrays, byte, enumerable

如何`byte[] digits;`用 n 个字节创建？

我知道我可以做到`Enumerable.Range(1, n).ToArray();`，但这会创建一个 int[]。有没有办法创建一个字节[]？

我的首要任务是快速的表现。牢记这一点，是否有更快的方法（代码稍多）可以创建它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T19:50:40.553

如果你真的喜欢 LINQ，你可以这样做

```
byte[] digits = Enumerable.Range(1, n).Select(i => (byte)i).ToArray(); 
```

还有可能

```
byte[] digits = new byte[n];
for (byte b = 1; b <= n; ++b)
    digits[b - 1] = b; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T19:42:23.397

只创建一个字节数组实例有什么问题？

```
byte[] digits = new byte[n]; 
```

如果您想使用从 1 到 n 的值进行初始化，那么我认为：

```
for(int i = 1; i <= n; i++)
   digits[i-1] = (byte)i; // index is 0-based 
```

还将尽快为您提供所需的结果。当然，其中 n < 256！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T19:50:02.930

要创建一个字节数组并用字节 1 到 n 填充它，您只需创建数组并使用循环：

```
byte[] digits = new byte[n];
for (int i = 0; i < n; i++)
{
    digits[i] = (byte) (i + 1);
} 
```

请注意，then`digits[0]`将是 1 等...这是您想要的吗？

但是，如果您将这些值存储为字节的原因纯粹是为了性能，那么您*可能*正在进行微优化。你的绩效目标是什么？如果您使用 an`int[]`代替，那会错过它们吗？该数据的*自然*类型是什么？你用它做什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T19:43:10.667

你可以这样做：

```
byte[] digits=new byte[2024]; 
```

# mips - 装配转换协助

> ID：15440866
> 
> 赞同：0
> 
> 时间：2013-03-15T19:42:33.827
> 
> 标签：mips

这就是我要转换的代码的样子：

```
 # R = first number in input file - the upper bound on the rest of the
 #     numbers in the input file. If R = 100, then the rest of the
 #     input file must be non-negative integers < 100, and the last one < 0.
 # n = count of non-negative integers (except R) read from input.
 # n = size of arrays A and B, and R = size of array C.
 # for i = 0 to R-1
 #   C[i] = 0
 # end for 
```

这些是我想使用的寄存器：

```
 # $a0 = base address of array A (1st input in file)
 # $a1 = base address of array B (2nd input in file)
 # $a2 = base address of array C
 # $a3 = n, size of arrays A and B
 # $s0 = size of array C - upper bound on numbers (R)

 # $t0 = i
 # $t1 = j
 # $t2 = adress of C[i] 
```

这是我目前不确定如何格式化数组的地方：

```
 bucket:  li $t0,0        #set to 0/i
          li $t3,         #set to R
          sub  
          beq $t0,$t3,then#for loop
          add
          sll 
          sw $t2,
 then:    ... 
```

我只是想知道我是否正在使用这段代码朝着正确的方向前进，还是应该重新开始。非常感谢任何提示或帮助，如果这很难理解，可以发布更多代码。

# html - 将 div 覆盖在三个浮点数上

> ID：15440868
> 
> 赞同：0
> 
> 时间：2013-03-15T19:42:41.977
> 
> 标签：html, css

我需要一些帮助来覆盖`<div>`超过 3 个在它们自己的容器`<div>`中设置样式的其他元素。`float:left`

现在看起来像这样（[http://i.imgur.com/2xk4tax.jpg](http://i.imgur.com/2xk4tax.jpg)），我希望文本覆盖在三个浮动颜色线的顶部。

这是我的 hmtl/css 任何帮助将不胜感激。

## HTML

```
<body>  

<div id="introtextcontainer">
    <p>hi</p>
</div>
<div id="linecontainer">
    <div id="line1">
    </div>
    <div id="line2">
    </div>
    <div id="line3">
    </div>
</div>

</body> 
```

## CSS

```
#introtextcontainer {
    margin: 0px auto 0px auto;
    width: 500px;
    height: 100px ;
    text-align:center;
    font-color: black;
    float:middle;
}

#linecontainer {
    margin: 0px auto 0px auto;
    width: 500px;
    height: 3000px ;
}

#line1 {
    width:160px;
    height:2000px;
    background-color: #00A7B0;
    float:left;
}

#line2 {
    width:160px;
    height:2000px;
    background-color: #D1DE3E;
    float:left;
}

#line3{
    width:160px;
    height:2000px;
    background-color: #DE006B;
    float:left;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:45:12.247

只需将`position:absolute`and添加`width:100%`到您的`introtextcontainer`容器中，它似乎就可以工作：

```
#introtextcontainer {
    margin: 0px auto 0px auto;
    height: 100px;
    text-align:center;
    font-color: black;
    position:absolute;
    width:100%;
} 
```

[**jsFiddle 示例**](http://jsfiddle.net/j08691/VNmUD/1/)

请注意，没有这样的`float:middle;`属性（仅左或右）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:59:27.550

您还可以定位：绝对 #linecontainer 以在文本后面向上滑动（我也将它与 left:50%; margin-left:- 0.5 * width 居中）。您可能必须给文本一个位置：相对；z-索引：1；强制它在上面。

```
#introtextcontainer {
    margin: 0px auto 0px auto;
    height: 100px;
    text-align:center;
    font-color: black;
    position:relative;
    width:100%;
    z-index:1;
}
#linecontainer {
    margin: 0 0 0 -250px;
    width: 500px;
    height: 3000px;
    position:absolute;
    top:0;
    left:50%;
} 
```

或者更好的是，使用渐变生成器，删除 3 个 div 并将条形设置为背景： http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

```
#introtextcontainer {
    margin: 0px auto 0px auto;
    height: 100px;
    text-align:center;
    font-color: black;
    position:absolute;
    width:100%;
    background: rgb(0,167,176); /* Old browsers */
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIzMyUiIHN0b3AtY29sb3I9IiMwMGE3YjAiIHN0b3Atb3BhY2l0eT0iMSIvPgogICAgPHN0b3Agb2Zmc2V0PSIzMyUiIHN0b3AtY29sb3I9IiNkMWRlM2UiIHN0b3Atb3BhY2l0eT0iMSIvPgogICAgPHN0b3Agb2Zmc2V0PSIzNCUiIHN0b3AtY29sb3I9IiNkMWRlM2UiIHN0b3Atb3BhY2l0eT0iMSIvPgogICAgPHN0b3Agb2Zmc2V0PSI2NiUiIHN0b3AtY29sb3I9IiNkMWRlM2UiIHN0b3Atb3BhY2l0eT0iMSIvPgogICAgPHN0b3Agb2Zmc2V0PSI2NiUiIHN0b3AtY29sb3I9IiNkZTAwNmIiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
    background: -moz-linear-gradient(left,  rgba(0,167,176,1) 33%, rgba(209,222,62,1) 33%, rgba(209,222,62,1) 34%, rgba(209,222,62,1) 66%, rgba(222,0,107,1) 66%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, right top, color-stop(33%,rgba(0,167,176,1)), color-stop(33%,rgba(209,222,62,1)), color-stop(34%,rgba(209,222,62,1)), color-stop(66%,rgba(209,222,62,1)), color-stop(66%,rgba(222,0,107,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(left,  rgba(0,167,176,1) 33%,rgba(209,222,62,1) 33%,rgba(209,222,62,1) 34%,rgba(209,222,62,1) 66%,rgba(222,0,107,1) 66%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(left,  rgba(0,167,176,1) 33%,rgba(209,222,62,1) 33%,rgba(209,222,62,1) 34%,rgba(209,222,62,1) 66%,rgba(222,0,107,1) 66%); /* Opera 11.10+ */
    background: -ms-linear-gradient(left,  rgba(0,167,176,1) 33%,rgba(209,222,62,1) 33%,rgba(209,222,62,1) 34%,rgba(209,222,62,1) 66%,rgba(222,0,107,1) 66%); /* IE10+ */
    background: linear-gradient(to right,  rgba(0,167,176,1) 33%,rgba(209,222,62,1) 33%,rgba(209,222,62,1) 34%,rgba(209,222,62,1) 66%,rgba(222,0,107,1) 66%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00a7b0', endColorstr='#de006b',GradientType=1 ); /* IE6-8 */

} 
```

# c# - 简单的 XML 反序列化 #2

> ID：15440871
> 
> 赞同：0
> 
> 时间：2013-03-15T19:43:03.020
> 
> 标签：c#, .net, xml, deserialization, rdf

我正在学习 XML 序列化行为和限制。我有如下简单的 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"   xmlns:cim="http://iec.ch/TC57/2001/CIM-schema-cim10#">
  <cim:BaseVoltage rdf:ID="BaseVoltage_01">
    <cim:BaseVoltage.nominalVoltage>42</cim:BaseVoltage.nominalVoltage>
  </cim:BaseVoltage>
</rdf:RDF> 
```

c#代码：

```
public class Voltage
{
    public double value;
    public String units;

    public Voltage() 
    { 
    }
}

public class BaseVoltage 
{
    private Voltage volt; 

    public BaseVoltage()
    {
        volt = new Voltage();
        ConductingEquipment = new ConductingEquipment[10];
        VoltageLevel = new VoltageLevel[10];
    }

   [XmlElement("BaseVoltage.nominalVoltage")]
    public Voltage NominalVoltage
    {
        get { return volt; }
        set { volt = value; }
    }   
} 
```

当我反序列化 xml 文件时，我的 c# 对象显示

```
baseVoltage.NominalVoltage.value = 0.0 
```

我期待

```
baseVoltage.NominalVoltage.value = 42. 
```

XML 序列化让我感到困惑。在这种情况下，为什么我没有得到 42 的价值？

# nasm - 在 NASM 中增加变量

> ID：15440872
> 
> 赞同：1
> 
> 时间：2013-03-15T19:43:03.350
> 
> 标签：nasm

我正在尝试编写一个 NASM 程序来翻转矩阵并将所有数字相加。

在过去的两个小时里，我一直在试图让增量操作起作用。

我试过

```
mov DX, 0
inc DX 
```

和

```
mov DX, DX+1 
```

和

```
mov CX, counter    ; a variable initialized to 0
inc CX 
```

还有更多，但没有任何效果。

请帮我 ！

**更新**

具体来说，我收到了错误：

```
/usr/bin/ld: warning: i386 architecture of input file `a3.o' is incompatible with i386:x86-64 output
a3.o: In function `main':
a3.asm:(.text+0x18): relocation truncated to fit: R_386_16 against `.bss'
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:11:17.150

这是 32 位 / 64 位不匹配。

对于 32 位可执行文件，请执行以下操作：

```
nasm -f elf32 -o main.o main.asm
ld -m elf_i386 -o main main.o 
```

对于 64 位可执行文件，请执行以下操作：

```
nasm -f elf64 -o main.o main.asm
ld [-m elf_x86_64] -o main main.o 
```

要与 gcc 链接，请将第二个命令替换为：

```
gcc -m32 -o main main.o      # 32 bits
gcc [-m64] -o main main.o    # 64 bits 
```

方括号中的内容不是绝对必要的。

# matlab - 具有最大值/最小值的 accumarray 索引

> ID：15440874
> 
> 赞同：3
> 
> 时间：2013-03-15T19:43:10.610
> 
> 标签：matlab, max, min, summary

我有一个大小相同的向量和一个单元格数组（带有重复的字符串）。元胞数组定义组。我想在每个组的向量中找到最小/最大值。

例如：

```
value = randperm(5) %# just an example, non-unique in general
value =
     4     1     2     3     5
group = {'a','b','a','c','b'};
[grnum, grname] = grp2idx(group); 
```

我为此使用[ACCUMARRAY](http://www.mathworks.com/help/matlab/ref/accumarray.html)函数：

```
grvalue = accumarray(grnum,value,[],@max); 
```

所以我有一个具有唯一组名 ( `grname`) 和新向量 ( `grvalue`) 的新单元格数组。

```
grname = 
    'a'
    'b'
    'c'
grvalue =
     4
     5
     3 
```

但我还需要从旧向量中找到已包含在新向量中的值的位置索引。

```
gridx = 1 5 4 
```

有任何想法吗？没有必要使用 accumarray 但我正在寻找快速矢量化解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:38:36.617

我能看到的最佳矢量化答案是：

```
gridx = arrayfun(@(grix)find((grnum(:)==grix) & (value(:)==grvalue(grix)),1),unique(grnum)); 
```

但我不能称其为“快速”矢量化解决方案。 `arrayfun`确实很有用，但通常不比循环快。

* * *

然而，最快的答案并不总是矢量化的。如果我在您编写代码时重新实现代码，但使用更大的数据集：

```
nValues = 1000000;
value = floor(rand(nValues,1)*100000);
group = num2cell(char(floor(rand(nValues,1)*4)+'a'));
tic;
[grnum, grname] = grp2idx(group);
grvalue = accumarray(grnum,value,[],@max);
toc; 
```

我的电脑给了我 0.886 秒的 tic/toc 时间。（注意，所有 tic/tock 时间都来自文件中定义的函数的第二次运行，以避免一次性 pcode 生成。）

添加“矢量化”（实际上`arrayfun`）单行 gridx 计算会导致 tic/tock 时间为 0.975 秒。还不错，额外的调查显示大部分时间都在`grp2idx`通话中消耗。

如果我们将其重新实现为非矢量化的简单循环，包括`gridx`计算，如下所示：

```
tic
[grnum, grname] = grp2idx(group);
grvalue = -inf*ones(size(grname));
gridx = zeros(size(grname));
for ixValue = 1:length(value)
    tmpGrIdx = grnum(ixValue);
    if value(ixValue) > grvalue(tmpGrIdx)
        grvalue(tmpGrIdx) = value(ixValue);
        gridx(tmpGrIdx) = ixValue;
    end
end
toc 
```

tic/toc 时间约为 0.847 秒，比原始代码略快。

* * *

更进一步，大部分时间似乎都在单元阵列内存访问中丢失了。例如：

```
tic; groupValues = double(cell2mat(group')); toc  %Requires 0.754 seconds
tic; dummy       =       (cell2mat(group')); toc  %Requires 0.718 seconds 
```

如果您最初将组名定义为数字数组（例如，我将`groupValues`按照上面的定义使用），即使使用相同的代码，时间也会减少很多：

```
groupValues = double(cell2mat(group'));  %I'm assuming this is precomputed
tic
[grnum, grname] = grp2idx(groupValues);
grname = num2cell(char(str2double(grname))); %Recapturing your original names
grvalue = -inf*ones(size(grname));
gridx = zeros(size(grname));
for ixValue = 1:length(value)
    tmpGrIdx = grnum(ixValue);
    if value(ixValue) > grvalue(tmpGrIdx)
        grvalue(tmpGrIdx) = value(ixValue);
        gridx(tmpGrIdx) = ixValue;
    end
end
toc 
```

这会产生 0.16 秒的 tic/tock 时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T03:46:51.583

当遇到类似的问题*时，我想出了这个解决方案：

*   定义以下函数（在 .m 文件中）

    ```
     function i=argmax(x)
       [~,i]=max(x);
       end 
    ```

*   然后您可以找到最大位置

    ```
     gridx = accumarray(grnum,grnum,[],@(i)i(argmax(value(i))) ); 
    ```

*   最大值为

    ```
     grvalue = value(gridx); 
    ```

（*如果我正确理解您的问题）

# azure - 关闭在 Azure 操作日志中记录 pfx 密码

> ID：15440879
> 
> 赞同：1
> 
> 时间：2013-03-15T19:43:20.837
> 
> 标签：azure, certificate, pfx

在 Windows Azure 管理门户的“操作日志”中，我看到了操作“AddCertificates”。详细来说，我可以看到 base64 格式的 pfx 证书和纯文本密码。

我认为在日志中存储证书和密码是不对的。

如何禁用此功能？

UPD：来自操作日志的日志条目

```
<SubscriptionOperation xmlns="http://schemas.microsoft.com/windowsazure" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <OperationId>7b52fbab-3cfe-40b4-9910-02d26d575503</OperationId>
    <OperationObjectId>/094cc12d-f8f7-4f5f-804a-57b16bc87f1b/services/hostedservices/MyServiceName</OperationObjectId>
    <OperationName>AddCertificates</OperationName>
    <OperationParameters xmlns:d2p1="http://schemas.datacontract.org/2004/07/Microsoft.WindowsAzure.ServiceManagement">
        <OperationParameter>
            <d2p1:Name>subscriptionID</d2p1:Name>
            <d2p1:Value>094cc12d-f8f7-4f5f-804a-57b16bc87f1b</d2p1:Value>
        </OperationParameter>
        <OperationParameter>
            <d2p1:Name>serviceName</d2p1:Name>
            <d2p1:Value>MyServiceName</d2p1:Value>
        </OperationParameter>
        <OperationParameter>
            <d2p1:Name>input</d2p1:Name>
            <d2p1:Value><?xml version="1.0" encoding="utf-16"?><CertificateFile xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/windowsazure">
                <Data>**BASE64CertificateData**</Data>
                <CertificateFormat>pfx</CertificateFormat>
                <Password>**PLAIN_PASSWORD**</Password></CertificateFile></d2p1:Value>
        </OperationParameter>
    </OperationParameters>
    <OperationCaller>
        <UsedServiceManagementApi>true</UsedServiceManagementApi>
        <SubscriptionCertificateThumbprint>THUMBPRINT</SubscriptionCertificateThumbprint>
        <ClientIP>95.221.82.19</ClientIP>
    </OperationCaller>
    <OperationStatus>
        <ID>7b52fbab-3cfe-40b4-9910-02d26d575503</ID>
        <Status>Succeeded</Status>
        <HttpStatusCode>200</HttpStatusCode>
    </OperationStatus>
    <OperationStartedTime>2013-03-16T04:45:41Z</OperationStartedTime>
    <OperationCompletedTime>2013-03-16T04:45:44Z</OperationCompletedTime>
</SubscriptionOperation> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:39:24.270

Alexey，您写道，操作日志确实以明文形式显示 PFX 密码，即使在通过 PS 部署证书时，密码也是明文形式，即使通信通道通过 SSL 加密，如下所示：

```
HTTP Method:
POST

Absolute Uri:
https://management.core.windows.net/*****/services/hostedservices/avkashnewpass/certificates

Headers:
x-ms-version                  : 2012-12-01
x-ms-client-id                : ***********
User-Agent                    : Windows Azure Powershell/v.0.6.11

Body:
 <?xml version="1.0" encoding="utf-16"?>
 <CertificateFile xmlns="http://schemas.microsoft.com/windowsazure"
    xmlns:i="http://www.w3.org/2001/XMLSchema-instance">

   <Data>*************************************</Data>
   <CertificateFormat>pfx</CertificateFormat>
   <Password>clear_text_password</Password>
 </CertificateFile> 
```

我已经接受了您的反馈，并将其提供给能够正确解决问题的适当人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:03:11.860

在新版本的管理门户中，Azure 团队已经修复了这个错误。

现在日志条目看起来像

```
<SubscriptionOperation xmlns="http://schemas.microsoft.com/windowsazure" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <OperationId>7e28942a-457b-4362-8fb5-f671e415cb4f</OperationId>
    <OperationObjectId>/094cc12d-f8f7-4f5f-804a-57b16bc87f1b/services/hostedservices/MyServiceName</OperationObjectId>
    <OperationName>AddCertificates</OperationName>
    <OperationParameters xmlns:d2p1="http://schemas.datacontract.org/2004/07/Microsoft.WindowsAzure.ServiceManagement">
        <OperationParameter>
            <d2p1:Name>subscriptionID</d2p1:Name>
            <d2p1:Value>094cc12d-f8f7-4f5f-804a-57b16bc87f1b</d2p1:Value>
        </OperationParameter>
        <OperationParameter>
            <d2p1:Name>serviceName</d2p1:Name>
            <d2p1:Value>MyServiceName</d2p1:Value>
        </OperationParameter>
        <OperationParameter>
            <d2p1:Name>input</d2p1:Name>
            <d2p1:Value i:nil="true" />
        </OperationParameter>
    </OperationParameters>
    <OperationCaller>
        <UsedServiceManagementApi>true</UsedServiceManagementApi>
        <SubscriptionCertificateThumbprint>1B1745A3F688994E4310025E6AC8502319142D0E</SubscriptionCertificateThumbprint>
        <ClientIP>91.103.66.206</ClientIP>
    </OperationCaller>
    <OperationStatus>
        <ID>7e28942a-457b-4362-8fb5-f671e415cb4f</ID>
        <Status>Succeeded</Status>
        <HttpStatusCode>200</HttpStatusCode>
    </OperationStatus>
    <OperationStartedTime>2013-03-18T02:24:50Z</OperationStartedTime>
    <OperationCompletedTime>2013-03-18T02:24:53Z</OperationCompletedTime>
</SubscriptionOperation> 
```

谢谢！

# python - python cmd 3rd子级别未退出

> ID：15440882
> 
> 赞同：1
> 
> 时间：2013-03-15T19:43:31.413
> 
> 标签：python

我正在处理来自这个rec​​ipy [http://code.activestate.com/recipes/280500/](http://code.activestate.com/recipes/280500/)
的一些代码我从github用户jochem代码获得的EPP代码（仅导入）：Python-EPP（为了清楚起见，我做了不要自己创建 EPP 代码）

我添加了

```
def do_A_register(self, args):
    i = A_register()
    i.cmdloop() 
```

这导致我：（编辑：格式搞砸了）

```
class A_register(cmd.Cmd):
   prompt = "(A register) "
   def do_handles(self, args):
       # Goto sub command
       i = A_registerHandles()
       i.prompt = self.prompt[:-1]+'-> handles $ '
       i.cmdloop()

   def do_domain(self, args):
       # Goto sub command
       pass

   def do_exit(self, args):
       return True

   def do_EOF(self, args):
       return self.do_exit(args) 
```

如果我在此子菜单中退出或 crtl-D，我会返回我想要的 1 级，但如果我向上 1 级到句柄（第 2 级），我将无法返回第 1 级（其中第 0 级是外壳）

3级代码是这个

```
class A_registerHandles(cmd.Cmd):
config = {
    'host': 'epp.a_registar.com',
    'port': 700,
    'user': '<username>',
    'pass': '<password>',
    'handle': '<defaultHandle>',
}

def do_handleAvailable(self, args):
    print "Give handle:",
    handle = raw_input().strip()
    self.epp = EPP(**self.config)
    self.contact = Contact(self.epp, handle)
    canCreate = self.contact.available()
    if bool(canCreate):
        print "Handle %s is free to use." % handle
    else:
        print "Handle %s is in use!" % handle

def do_handleInfo(self, args):
    print "Give handle: ",
    handle = raw_input().strip()
    self.epp = EPP(**self.config)
    self.contact = Contact(self.epp, handle)
    handleInfo = self.contact.info()

def do_exit(self, args):
    return True

def do_EOF(self, args):
    return self.do_exit(args) 
```

所以我想知道如何从2级回到1级（或者3级到2级或4到3级，你明白我的意思）

我创建了一个从 2 级返回到 1 级但不是从 3 级返回到 2 级的工作示例。由于长度的原因，我将代码添加到了 pastebin [http://pastebin.com/qjF4LPXZ](http://pastebin.com/qjF4LPXZ)

我正在运行的python版本：

> linux2 上的 Python 2.7.3（默认，2012 年 9 月 26 日，21:51:14）[GCC 4.7.2]

感谢您的回复。保罗。

# android - 每次我尝试运行我的代码时，我的模拟器都会崩溃

> ID：15440886
> 
> 赞同：0
> 
> 时间：2013-03-15T19:43:44.173
> 
> 标签：android, debugging, crash, emulation, logcat

我在网上四处寻找类似的主题，但没有一个有用。

我正在尝试完成制作 onClick 按钮声音的简单任务。我连续工作了几个小时试图让代码正确，一旦它看起来可以工作，它甚至都不会运行。

它说：“不幸的是，尝试已停止。” 我的 LogCat 文件打开时会显示 200 多条毫无意义的错误消息。

你能看看我的代码并告诉我问题是什么吗？谢谢你。

```
package com.example.attempt;

import android.app.Activity;
import android.content.Context;
import android.media.AudioManager;
import android.os.Bundle;
import android.view.SoundEffectConstants;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity implements OnClickListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button button=(Button) findViewById(R.id.muteButton);
        button.setOnClickListener(this);
    }

        AudioManager audioManager =
                (AudioManager) this.getSystemService(Context.AUDIO_SERVICE);

    public void onClick(View v) {
        audioManager.playSoundEffect(SoundEffectConstants.CLICK);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T19:45:38.697

`AudioManager`将方法内的 audioManager 实例初始化`onCreate`为：

```
 AudioManager audioManager;  //<<<< declare here...
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button button=(Button) findViewById(R.id.muteButton);
        button.setOnClickListener(this);

         /// initialize here
        audioManager =
                (AudioManager) this.getSystemService(Context.AUDIO_SERVICE);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:46:22.470

这个

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button button=(Button) findViewById(R.id.muteButton);
    button.setOnClickListener(this);
}

    AudioManager audioManager =
            (AudioManager) this.getSystemService(Context.AUDIO_SERVICE); 
```

将其更改为

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

 AudioManager audioManager =
                (AudioManager) this.getSystemService(Context.AUDIO_SERVICE);
        Button button=(Button) findViewById(R.id.muteButton);
        button.setOnClickListener(this);
    } 
```

# linux - 尝试通过 http-bind 连接时出现 openfire 错误

> ID：15440897
> 
> 赞同：1
> 
> 时间：2013-03-15T19:44:30.743
> 
> 标签：linux, xmpp, openfire, pidgin

您好，我安装在我的本地机器 openfireserver 中。

下面是我的 http-binding 配置： ![Openfire 配置 http-config][1]

我还在 Pidgin 中添加了新用户：

1.  协议：Xmpp
2.  用户名：test
3.  域：本地主机
4.  资源：测试
5.  通过：测试

**先进的：**

1.  端口：7070
2.  服务器：（无）
3.  文件传输代理：proxy.eu.jabber.org
4.  网址 BOSH 协议：`http://localhost/http-bind/`

但连接失败。

如果我尝试使用此选项：

1.  端口：7070
2.  波什网址：`http://localhost:7070/http-bind/`

我在openfire中遇到了另一个错误：

```
2013.03.15 20:50:15 org.eclipse.jetty.servlet.ServletHandler - /http-bind/
java.util.concurrent.RejectedExecutionException: Task org.jivesoftware.openfire.http.HttpSessionManager$HttpPacketSender@65e92309 rejected from java.util.concurrent.ThreadPoolExecutor@18ee24bf[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0]
at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2048)
at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:821)
at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1372)
at org.jivesoftware.openfire.http.HttpSessionManager$HttpPacketSender.init(HttpSessionManager.java:417)
at org.jivesoftware.openfire.http.HttpSessionManager$HttpPacketSender.access$200(HttpSessionManager.java:405)
at org.jivesoftware.openfire.http.HttpSessionManager.forwardRequest(HttpSessionManager.java:319)
at org.jivesoftware.openfire.http.HttpBindServlet.handleSessionRequest(HttpBindServlet.java:254)
at org.jivesoftware.openfire.http.HttpBindServlet.parseDocument(HttpBindServlet.java:176)
at org.jivesoftware.openfire.http.HttpBindServlet.doPost(HttpBindServlet.java:145)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:547)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:480)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:225)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:941)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:409)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:186)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:875)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) 
```

在 xmpp pidigin 控制台中我有错误：

```
<auth xmlns='urn:ietf:params:xml:ns:xmpp-sasl' mechanism='DIGEST-MD5' client-uses-full-bind-result='true'/>
<head>
<meta http-equiv='Content-Type' content='text/html;charset=ISO-8859-1'/>

<title>Error 500 Task org.jivesoftware.openfire.http.HttpSessionManager$HttpPacketSender@20a88f61 rejected from java.util.concurrent.ThreadPoolExecutor@18ee24bf[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0]</title>

</head>
<body>
<h2>HTTP ERROR: 500</h2>

<p>Problem accessing /http-bind/. Reason:
<pre>    Task org.jivesoftware.openfire.http.HttpSessionManager$HttpPacketSender@20a88f61 rejected from java.util.concurrent.ThreadPoolExecutor@18ee24bf[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0]</pre>
</p>
<hr/>
<i>
<small>Powered by Jetty://</small>
</i> 
```

我如何尝试通过pidigin连接到openfire并使用http绑定？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T04:43:14.973

用于处理入站 BOSH 请求的线程池的大小似乎已设置为零。默认情况下，这个值应该是 16，但是这个值可以被两个 Openfire 系统属性中的任何一个覆盖：

```
xmpp.httpbind.worker.threads
xmpp.client.processing.threads 
```

如果这两个属性中的任何一个已设置为零或负值，您只需使用管理控制台上的“系统属性”页面删除无效的键/值对，然后重新启动 Openfire。

# date - groovy 中日期格式字符串的完整列表是什么？

> ID：15440899
> 
> 赞同：0
> 
> 时间：2013-03-15T19:44:40.477
> 
> 标签：date, groovy, formatting

在哪里可以找到 Groovy 在输出日期时可以使用的所有格式字符串的列表？Groovy 文档在这个问题上似乎非常稀少。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T20:00:22.310

[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)的文档可能是一个不错的起点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:44:40.477

去查找 java.util 的格式信息。[格式化程序](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html)。有很长的格式化程序列表以及它们的作用。

# php - 检索接下来的 15 个 mysql 字段，即使它们的 ID 不是连续的

> ID：15440901
> 
> 赞同：1
> 
> 时间：2013-03-15T19:44:43.037
> 
> 标签：php, mysql, sql, limit

我不知道如何命名这个问题，因为它有点难以理解；

我有一个存储博客文章的数据库表，我正在使用 AJAX 在页面上创建这些博客文章的无限滚动。最初，当访问该页面时，会显示 10 个最近的博客。

我在 MySQL 查询中使用`$start`和`$limit`变量，所以它知道从哪个博客开始抓取，然后从数据库中抓取多少。我的问题是因为我的 ID 没有按顺序删除博客，所以我不能只做一个标准的`SELECT * FROM blogs ORDER BY blog_id DESC LIMIT $start, $limit`.

现在我正在做`SELECT * FROM blogs WHERE blog_id <= $start ORDER BY blog_id DESC LIMIT $limit`它返回所有博客，但它为数据库中的最后一个博客创建了一个无限循环。如果我删除`=`from`<=`那么它不会有无限循环，但它会跳过最近的博客。

如何在 SQL 语句中使用`$start`and`$limit`子句从数据库中获取所有博客，包括最近的博客，而不会导致无限循环？

**编辑：**这是执行查询的 JavaScript 代码：

```
var loading = false;
$(window).scroll(function(){
    var h = $('.post-container').height();
    var st = $(window).scrollTop();

    if(st >= 0.6*h && !loading && h > 400){
        loading = true;
        $('#ajaxLoader').show();
        $.ajax({
            url: "/ajax/blog.process.php?lastid=" + $(".post:last").attr("id"),
            success: function(html){
                if(html){
                    $(".post-container").append(html);
                    $('div#ajaxLoader').hide();
                }else{
                    $('div#ajaxLoader').html('<center>No more posts to show.</center>');
                }
                loading = false;
            }
        });
    }
}); 
```

**编辑 x2：**

如果我像这样切换`$start`和`$limit`变量，`LIMIT $limit,$start`那么我开始得到结果，但它们是最旧的结果......我想要通过按降序获取 ID 的最新结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:13:34.087

如果 MySQL 中有分析函数，那么您可以使用`ROW_NUMBER()`非顺序 ID 对行进行排序。然后在 where 子句中使用行号。

这是使用的一般示例`ROW_NUMBER()`：

```
SELECT * FROM
(
SELECT empno, deptno, ename, sal
 , ROW_NUMBER() OVER (ORDER BY ename) Row_Seq 
FROM scott.emp
)
WHERE row_seq BETWEEN 1 AND 3
/

EMPNO    DEPTNO    ENAME    SAL    ROW_NUM
--------------------------------------------
7876    20    ADAMS    1100        1
7499    30    ALLEN    1600        2
7698    30    BLAKE    2850        3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T22:49:57.680

所以我无法弄清楚为什么`LIMIT $start, $limit`不工作的原因，但我能够通过使用这个函数来解决这个问题：

```
public function getLastBlogId() {
    $sql = $this->mysqli->query("SELECT * FROM blogs ORDER BY blog_id DESC LIMIT 1");

    $row = $sql->fetch_assoc();

    $num = $this->mysqli->real_escape_string(intval($row['blog_id']));
    $num = $num + 1;
    return $num;
} 
```

要获得表中最高的博客 ID，然后向其添加 +1，这样我就不必`<=`在查询中使用。该`=`标志是导致无限循环的部分，我需要它来包含最新的博客。因此，为最高博客 ID 添加 +1 将获得低于该 ID 的所有博客，即所有博客。

# codeigniter - AngularJS 中的实时更新

> ID：15440908
> 
> 赞同：2
> 
> 时间：2013-03-15T19:45:19.237
> 
> 标签：codeigniter, optimization, angularjs, real-time

为了学习 Angular 和 Codeigniter，我扩展了最初的新教程（来自 CI）。在当前阶段，它会自动显示新帖子并从页面中删除已删除的帖子，当然还会更新模型/数据库。——**我认为我这样做并不是对 AngularJS 最有效的方法。对我的代码的反馈将对此有所帮助。**--

但是，我主要关心的是***如何在 Angular 中进行差异更新？*** 当我通过 jQuery 完成此操作时，我只是在我的 ajax url 上附加了一个时间戳。然后我会在控制器中抓住那个时间并将其分配给一个变量并进行比较以提取任何其他帖子。效果很好。它只会拉新故事（如果它们存在），如果它们不存在，那么不会有太多开销。

然而，目前在 Angular 中，它会在每个请求（每 5 秒）中提取整个 JSON 数据——对于大型应用程序，这将消耗过多的带宽。我如何区分这一点并只拉新帖子？

**controllers.js（角度控制器）**

```
var timestamp = '';
function NewsListCtrl($scope, $http, $timeout) { 

$scope.newsRequest = function(){
    $http.get('/ci/index.php/news/get_news_ajax/' + timestamp).success(function(data) {
        timestamp = $.now();
        $scope.news = data;
    });
};
$scope.newsRequest();
setInterval(function(){
    $scope.$apply(function(){
           $scope.newsRequest();
    });
}, 5000);

} 
```

上面的代码成功地将时间传递到 URL 的第 3 段（根据 Codeigniter 的第 3 段）。当页面最初加载时，所有帖子都会出现。然后在 newsRequest() 再次触发后，我得到一个空白页。我假设因为没有任何更新的帖子，它会将空数组分配给我的 $scope.news。**我将如何解决这个问题以便附加较新的帖子？**

（就像我说的，我假设我没有充分利用 AngularJS ng-repeat。如果有人有更好的解决方案，请赐教！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:59:27.130

您需要将加载的数据连接到 $scope.news。如果它是一个数组 - 容易

```
 $scope.news.concat(data); 
```

否则，您可能需要遍历加载的数据并添加新位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:17:37.280

我最终让事情按照我需要的方式工作。我的逻辑有一个很大的缺陷。在上面的代码中，我一直在尝试传入当前时间*$.now()*，但为了获得有效的逻辑，我需要传入上一篇文章的时间。这样我就可以比较在我拉的最后一个帖子之后是否有任何帖子。

```
var timestamp = '';
function NewsListCtrl($scope, $http, $timeout) { 
    $scope.news = [];
    $scope.newsRequest = function(){
        $http.get('/ci/index.php/news/get_news_ajax/' + timestamp).success(function(data) {
            $scope.news = data.recent.concat($scope.news); 
            if (data.recent[0] != null){
                timestamp = data.recent[0].time;
            }
        });
    };
$scope.newsRequest();
setInterval(function(){
    $scope.$apply(function(){
           $scope.newsRequest();
    });
}, 5000); 
```

另一个大问题是在我的*数据*对象中，我有一个数组。所以我需要访问那个数组中的东西。在我看来，我已经对它进行了一些补偿，但这只是有点草率。让我的 Angular 控制器处理它更干净。

需要指出的是这行代码：

```
$scope.news = data.recent.concat($scope.news); 
```

在第一次让它工作之后，我最初将 data.recent*连接*到*$scope.news*的末尾。但是这样做会将新项目显示到视图的末尾 - 而不是在顶部。*通过将$scope.news*连接到我的新对象/数组来使其附加到顶部是一个简单的修复。

# postgresql - 通过 VBA 在 MS Access 中自动链接/刷新 ODBC 链接表

> ID：15440910
> 
> 赞同：1
> 
> 时间：2013-03-15T19:45:31.513
> 
> 标签：postgresql, vba, ms-access

有人知道在 MS-Access 2010 中自动链接和刷新 Postgres 链接表（通过 ODBC）的 VBA 程序吗？这是因为我正在寻找一个没有 DSN 的连接，以使用户更轻松。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:00:13.677

以下 VBA 代码将创建具有无 DSN 连接的 PostgreSQL 链接表...

```
Sub linkTo_PostgreSQL()
    createLinkedTable_PostgreSQL "public.table1"
    ' repeat as necessary...
End Sub

Sub createLinkedTable_PostgreSQL(PostgreSQL_tableName As String)
    Dim cdb As DAO.Database, tbd As DAO.TableDef
    Set cdb = CurrentDb
    Set tbd = New DAO.TableDef

    tbd.Connect = "ODBC;Driver={PostgreSQL ODBC Driver(UNICODE)};Server=localhost;Port=5432;Database=linkedDB;Uid=pgUser1;Pwd=pgUser1password;"
    tbd.SourceTableName = PostgreSQL_tableName
    tbd.Name = Replace(PostgreSQL_tableName, ".", "_", 1, -1, vbTextCompare)  ' e.g. "public.table1"->"public_table1"
    tbd.Attributes = dbAttachSavePWD

    cdb.TableDefs.Append tbd
    Set tbd = Nothing
    Set cdb = Nothing
End Sub 
```

以下代码将刷新任何现有 PostgreSQL 链接表的链接：

```
Sub refreshLinked_PostgreSQL()
    Dim cdb As DAO.Database, tbd As DAO.TableDef
    Set cdb = CurrentDb
    For Each tbd In cdb.TableDefs
        If tbd.Connect Like "ODBC;Driver={PostgreSQL*" Then
            Debug.Print "Refreshing [" & tbd.Name & "] ..."
            tbd.RefreshLink
        End If
    Next
    Debug.Print "Done."
    Set tbd = Nothing
    Set cdb = Nothing
End Sub 
```

# unit-testing - Visual Studio 2012 单元测试客户端和服务调试

> ID：15440913
> 
> 赞同：5
> 
> 时间：2013-03-15T19:45:46.043
> 
> 标签：unit-testing, debugging, visual-studio-2012

愚蠢的问题，但由于某种原因，我似乎无法弄清楚如何调试单元测试，在客户端上打断点并进入 Web 服务。在 VS 2010 中，我只是将我的解决方案设置为多个启动项目，并将调试设置为客户端 UI 测试以及 Web 服务。当我在 UI 测试中遇到断点时，我可以进入 Web 服务。在 VS 2012 中，我看不到这样做的方法。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-11T16:07:27.343

1.  在不调试的情况下启动网站（如果它尚未运行）。
2.  在单元测试中设置断点。
3.  开始你的单元测试。
4.  命中断点时，使用**Debug > Attach to Process**附加到**iisexpress.exe**。

[官方说明](http://msdn.microsoft.com/en-us/library/ms243172.aspx)是错误的。他们说首先附加调试器，但如果你这样做，启动单元测试的命令将被禁用。

总是不得不手动附加可能会很痛苦。似乎没有办法[从 Command Window](https://stackoverflow.com/q/6443298/145173)快速完成。如果我必须进行很多调试周期，我会临时将测试代码复制到 Web 应用程序中，该应用程序将在启动时运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T00:56:48.053

运行两个 Visual Studio 实例。在一种情况下，调试网站。另一方面，运行单元测试。

要阻止单元测试实例尝试启动网站，请选择网站项目，单击**View > Properties Window**，并确保**Always Start When Debugging**为**False**。

# c++ - 向量中的显式指针或间接分配

> ID：15440914
> 
> 赞同：0
> 
> 时间：2013-03-15T19:45:46.793
> 
> 标签：c++, performance, memory-management, vector, tree

我正在构建一棵树，并且我有一个`Node`包含两个或三个整数、一个向量和一个指针的类。向量存储`Node`实例，如下 - 命名`Node`为`A`：

```
class A {
public:
    A(A *parent) :
    _parent(parent) {
    }
    std::vector<INSTANCES_OF_A> v;
private:
    A *_parent;
}; 
```

我确实可以使用：

```
class A {
public:
    A(A *parent) :
    _parent(parent) {
    }
    std::vector<A *> v;
private:
    A *_parent;
};

// Insertion
A a;
a.v.push_back(new A(&a)); 
```

或者：

```
class A {
public:
    A(A *parent) :
    _parent(parent) {
    }
    std::vector<A> v;
private:
    A *_parent;
};

// Insertion
A a(NULL);
a.v.push_back(A(&a)); 
```

在第一种情况下，除了实例本身之外，我会为每个指向`A`.

在第二种情况下，这 4~8 个字节将被保存，但以下场景配置：

*   `a.v.push_back(A(&a))`推回-动态分配，我想-从`A(&a)`;构建的实例
*   向量将推回这些元素，但一旦达到临时限制，向量将被重新分配，它可能会被移动；
*   移动向量会改变在构造每个成员实例期间建立的地址`A`关联`A *_parent`。

**约束**：

*   我**不**知道初始向量的确切大小；
*   每次发生矢量重新分配时重新处理/重建链接必然会产生**过多的**额外处理。

**问题**：

有没有办法解决这个悬空指针问题，尊重这两个限制？或者，有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:12:32.610

我们不知道您打算如何处理您的`A`对象，以及它们是否相对较大。例如，如果它们可以链接在一起（通过存在于`v`another 的向量中`A`），那么第二选择是一个坏主意。`A`如果您的班级包含多个成员，而且他们的内存非常饥饿，这也是一个坏主意。正如您所指出的，这可能会导致矢量调整大小移动大量数据。最重要的是，您的信息可能会因为具有`A`绝对相等成员的不同实例而变得多余。

我会通过存储指向您的`A`实例的指针或引用来采用第一种方法，但您必须注意范围。例如，**不要**添加如下指针：

```
void inSomeFunc(A& a)
{
    A b(NULL); // consider using nullptr if you can compile in C++11
    a.v.push_back(&b); // pushing the memory address of local variable 'b'
} // b goes out of scope, so the &b in a.v becomes invalid 
```

在这种情况下，如果您尝试访问添加的元素，`v`最终可能会出现运行时错误。

也许就您的目标提供更准确的信息以获得更具体的答案。

**编辑附加信息：**

构建树（尤其是具有 n 个子节点）的常用方法是存储指向子节点的指针。**如果你有一个静态**树，也许你*可以*直接存储节点而不是指针（构建一次并且永远不会修改：只读）。而且，如果您有大量的孩子，它最终会为矢量调整大小做很多工作。

 **除了特定情况外，拥有一个常量树并不是那么有用，因此绝对好的方法是存储指向节点的指针。这使得对树的修改更快（您只需管理从向量中添加和删除指针）并且与管理对象一样简单。您唯一需要关心的是内存处理。您的节点必须在堆上分配并由析构函数释放或在您确定它们不会超出范围的地方声明为局部变量（不推荐）。

我会做这样的事情：

```
class A {
public:
    A(A *parent) :
    _parent(parent) {}

    /* This will recursively free all the nodes in your tree but BEWARE :
       it would probably not work if you have loops in your tree          */
    ~A()
    {
        for(int i = 0; i < v.size(); ++i)
            if(v[i] != NULL)
                delete v[i];
    }

    void addChild(A *node)
    {
        v.push_back(node);
    }

    A* addNewChild()
    {
        A* a = new A(this);
        addChild(a);
        return a;
    }

    // others accessors you need, for example operator[]

private:
    A *_parent;
    std::vector<A *> v;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:16:55.193

请注意，它`push_back`会复制一个对象，因此您`push_back`编辑到向量的对象的地址对向量来说是没有意义的。是的，如果向量类的存储内存太少，它会重新分配内存。树的经典方法是存储指针。您可能会发现可以实现自己的向量，以便手动重新分配它，从而能够相应地更改所有孩子的父母。

存储指向数据的`std::vector`指针，否则不允许包含`vector<A>`在`A`. 所以你有这些“悬空”指针（它们不是悬空的，对我来说更“冗余”）。

另请注意，在内存中移动实际数据可能很耗时，并且还会增加内存碎片（如果您关心冗余指针，那么它对您来说一定很重要）。

如果您正在为内存不是非常有限的非嵌入式系统编程，我建议使用第一种方法，使用显式指针。否则你会浪费时间。正常时间与记忆。**

# perl - CPAN 验证简单 LDAP HTTP 错误

> ID：15440915
> 
> 赞同：1
> 
> 时间：2013-03-15T19:45:58.920
> 
> 标签：perl, apache

我已经使用 CPAN 安装了 LDAP.pm：

```
install Authen::Simple::LDAP 
```

我尝试在 Apache 中加载模块：

```
PerlLoadModule Authen::Simple::LDAP 
```

每当我尝试启动服务器时，都会收到一条错误消息：

```
Syntax error on line 285 of /etc/httpd/conf/httpd.conf:
Attempt to reload Authen/Simple/LDAP.pm aborted.\nCompilation failed in require at (eval 12) line 3.\n 
```

我的 httpd 配置文件的第 285 行：

```
PerlLoadModule Authen::Simple::LDAP 
```

LDAP perl 模块的安装有问题吗？还有其他方法可以安装此模块吗？我是否缺少任何其他模块，我如何知道哪些模块？

附加信息：运行

```
perl -MAuthen::Simple::LDAP -e '' 
```

回报：

```
Bareword "Params::Validate::SCALAR" not allowed while "strict subs" in use at /usr/local/share/perl5/Authen/Simple/Adapter.pm line 42.
Bareword "Params::Validate::SCALAR" not allowed while "strict subs" in use at /usr/local/share/perl5/Authen/Simple/Adapter.pm line 42.
Compilation failed in require at (eval 2) line 3.
...propagated at /usr/share/perl5/base.pm line 94.
BEGIN failed--compilation aborted at /usr/local/share/perl5/Authen/Simple/LDAP.pm line 5.
Compilation failed in require.
BEGIN failed--compilation aborte 
```

# bash - 替换bash中的多行模式

> ID：15440917
> 
> 赞同：2
> 
> 时间：2013-03-15T19:46:05.297
> 
> 标签：bash, replace

*我想替换这个：*

```
 }
      ]
  }
  {
      "commits":[ 
```

*和：*

```
 }, 
```

*使用`bash`*.

上面的文本是[从`bash`脚本本身](https://github.com/dreamyguy/git-log-to-json/blob/51534bbea0fda32f9bce44348d6c0e528c3a6daf/gitlog.json "gitlog.json")（而不是文件）中解析的。“输入”是`git log`由 4 个不同的管道命令解析的内容，这些命令将输出咀嚼并吐出到文件中。管道看起来像这样：

```
git log (...) | paste (...) | tail (...) | awk (...) > output.file 
```

到目前为止，我的策略是添加一个额外的管道和一个将 a 替换为 a 的命令，`multi-line pattern`例如`single-line pattern`：

```
git log (...) | paste (...) | tail (...) | awk (...) | 'replace-multiline' (...) > output.file 
```

换句话说，我还没有找到正确的`replace-multiline`命令。也许你能帮助我？;)

### 我试过的

我已经用了三天时间尝试不同的旋转，`awk`甚至（声称解决多行搜索和替换挑战的那些）。他们都没有在我的背景下工作。我不精通这些命令中的任何一个，所以我一直在黑暗中进行刺激。*我真的很感激任何指示！*`sed``grep``perl`

 *> 背景
> 
> 我正在编写一个输出到有效输出的`bash`脚本（ [github 上的项目](https://github.com/dreamyguy/git-log-to-json "gitlog-to-json")）。当脚本从存储库的根目录运行时它工作得很好，但我想扩展它以便它从包含所有存储库的目录运行，因此在一次调用中以格式输出所有存储库的格式。`git log``JSON``git log``JSON`
> 
> 该脚本已移至父目录并在每个子目录（即`git`存储库）上运行，返回以下输出（该脚本还用于将存储库名称作为每个对象项中的属性输出）。

**当前输出：**

```
 {
      "commits":[
          {
              "repository":"repo1",
              "commit_nr":"1",
              /* ... */
          },
          {
              "repository":"repo1",
              "commit_nr":"2",
              /* ... */
          },
          {
              "repository":"repo1",
              "commit_nr":"3",
              /* ... */
          }
      ]
  }
  {
      "commits":[
          {
              "repository":"repo2",
              "commit_nr":"1",
              /* ... */
          },
          {
              "repository":"repo2",
              "commit_nr":"2",
              /* ... */
          },
          {
              "repository":"repo2",
              "commit_nr":"3",
              /* ... */
          }
      ]
  }
  {
      "commits":[
          {
              "repository":"repo3",
              "commit_nr":"1",
              /* ... */
          },
          {
              "repository":"repo3",
              "commit_nr":"2",
              /* ... */
          },
          {
              "repository":"repo3",
              "commit_nr":"3",
              /* ... */
          }
      ]
  } 
```

**想要的输出：**

```
 {
      "commits":[
          {
              "repository":"repo1",
              "commit_nr":"1",
              /* ... */
          },
          {
              "repository":"repo1",
              "commit_nr":"2",
              /* ... */
          },
          {
              "repository":"repo1",
              "commit_nr":"3",
              /* ... */
          },
          {
              "repository":"repo2",
              "commit_nr":"1",
              /* ... */
          },
          {
              "repository":"repo2",
              "commit_nr":"2",
              /* ... */
          },
          {
              "repository":"repo2",
              "commit_nr":"3",
              /* ... */
          },
          {
              "repository":"repo3",
              "commit_nr":"1",
              /* ... */
          },
          {
              "repository":"repo3",
              "commit_nr":"2",
              /* ... */
          },
          {
              "repository":"repo3",
              "commit_nr":"3",
              /* ... */
          }
      ]
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:55:44.357

您想为此使用 perl：

```
$echo "          {
              "repository":"repo2",
              "commit_nr":"3",
              /* ... */
          }
      ]
  }
  {
      "commits":[
          {
              "repository":"repo3",
              "commit_nr":"1",
              /* ... */
          }," | perl -pn -e "BEGIN{undef $/;} s/\}\s*\]\s*\}\s*\{\s*commits:\[/},/g" 
```

产量

```
 {
              repository:repo2,
              commit_nr:3,
              /* ... */
          },
          {
              repository:repo3,
              commit_nr:1,
              /* ... */
          }, 
```

**注意**：您可能需要在单词`\"`周围添加（这是一个，消失，因为它们没有被我的复制粘贴转义）`commit``echo``"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:56:40.927

听起来您*想要*的是 perl 中的触发器运算符，但由于您*拥有*（从我可以从您当前的输出中收集到的）是一堆格式良好的 perl 哈希，您可以通过组合旧哈希创建一个新哈希任何你喜欢的结构。然后，此 perl 脚本可以位于管道的末端并处理数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:06:28.890

如果您只想使用 sed，则以下内容适用于您的示例输入：

```
sed -En '1h;1!H;${;g;s/( +)}\n +\]\n + }\n +{\n + "commits":\[\n/\1};/g;p;}' 
```*

# java - 代码编译错误，java中的布尔值？

> ID：15440919
> 
> 赞同：-1
> 
> 时间：2013-03-15T19:46:10.857
> 
> 标签：java

我只是想知道是否可以在尝试修复此公共布尔方法时提供一些帮助，我无法编译此代码，请谁能告诉我哪里出错了？谢谢

//这是正确编译之前的方法，但下一个布尔方法与此相反，发生错误。

```
public void uncover(int thisCol, int thisRow) {
    if (areIndexesValid(thisCol, thisRow)) {
        is_hidden[thisCol][thisRow] = false;
    }
} 
```

//这是需要修复的布尔值。

```
public boolean isCovered(int thisCol, int thisRow) {
        // TODO check the indexes.  If not valid, then return false else      return
        if (areIndexesValid(thisCol, thisRow)) {
        return is_hidden[thisCol][thisRow]  
        else 
        return false
    } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:58:21.003

我更喜欢这样：

```
public boolean isCovered(int thisCol, int thisRow) {
    return areIndexesValid(thisCol, thisRow) && is_hidden[thisCol][thisRow]; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:47:06.717

是的！事实上，你的编译错误会告诉你发生了什么。阅读并修复导致问题的行。

其次，我建议使用 IDE，例如 Eclipse。它会在您的问题下方添加一条红色波浪线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:53:36.167

```
 public boolean isCovered(int thisCol, int thisRow) {
        // TODO check the indexes.  If not valid, then return false else      return
        if (areIndexesValid(thisCol, thisRow)) 
            return is_hidden[thisCol][thisRow] ; 
        else 
            return false;
    } 
```

（你有多余的 {）

它抱怨的原因有两个：

1.  你的语法错误
2.  任何在 Java 中返回值的方法都必须在所有路径上返回一个值。这段代码

    ```
    public boolean isCovered(int thisCol, int thisRow) {

        // TODO check the indexes.  If not valid, then return false else      return
        if (areIndexesValid(thisCol, thisRow)) 
           return is_hidden[thisCol][thisRow] ; 

    } 
    ```

也会返回语法错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T19:56:19.447

您的`else`声明不属于任何`if`. 我想这也是编译器所说的。

这是它的样子：

```
if (areIndexesValid(thisCol, thisRow)) {
    return is_hidden[thisCol][thisRow];
} else 
    return false; 
```

我认为您需要阅读有关[if 语句](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/if.html)的内容。

# javascript - AngularJS：ContentEditable 的问题

> ID：15440922
> 
> 赞同：0
> 
> 时间：2013-03-15T19:46:18.513
> 
> 标签：javascript, angularjs

我的代码如下：

```
<!doctype html>
<html ng-app="flyerGen">
<head>
<script src="http://code.angularjs.org/1.0.5/angular.min.js"></script>
<script>
angular.module('flyerGen', []).directive('contenteditable', function() {
    return {
        require: 'ngModel',
        link: function(scope, elm, attrs, ctrl) {
            // view -> model
            elm.bind('keyup', function() {
                scope.$apply(function() {
                    ctrl.$setViewValue(elm.html());
                });
            });

            // model -> view
            ctrl.$render = function() {
                elm.html(ctrl.$viewValue);
            };

            // load init value from DOM
            ctrl.$setViewValue(elm.html());
        }
    };
});
function FlyerCtrl($scope) {
    $scope.Flyer = { bgColor : '231,233,230', title : 'WIE WAREN WIR HEUTE?', description: 'Bitte scannen Sie den QR-Code und geben Sie uns Feedback' }
}

</script>
</head>
<Body>
<div contentEditable ng-model="Flyer.title">{{ Flyer.title }}</div>
Test: {{ Flyer.title }}
</div>
</Body>
</html> 
```

加载页面时，我在控制台中看到以下错误：**错误：无控制器：ngModel**。我还尝试设置“FlyerCtrl”，也设置“Flyer”而不是“ngModel”，但没有任何效果。

错误在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:35:35.620

几个项目：

*   HTML应该`contenteditable`没有`contentEditable`
*   不要从 DOM 加载初始值——你的模型中已经有了它，所以从你的 HTML 中删除它： <div...> ~~{{ Flyer.title }}~~ </div> 并且不要调用 $setViewValue最初。

[笨蛋](http://plnkr.co/edit/lKiXTdLFcYkZ8Onz5nuy?p=preview)。

# unix - 排序，唯一并显示最大计数

> ID：15440924
> 
> 赞同：-2
> 
> 时间：2013-03-15T19:46:22.703
> 
> 标签：unix, sorting, awk, uniq

在下表中，删除重复项并在某个时间点说 12:06 只应显示最大计数值

```
3/12/2013 12:00 639 Count
3/12/2013 12:06 693 Count
3/12/2013 12:12 636 Count
3/12/2013 12:18 649 Count
3/12/2013 12:24 658 Count
3/12/2013 12:30 926 Count
3/12/2013 12:36 721 Count
3/12/2013 12:42 797 Count
3/12/2013 12:48 717 Count
3/12/2013 12:00 639 Count
3/12/2013 12:06 700 Count
3/12/2013 12:12 636 Count
3/12/2013 12:18 649 Count
3/12/2013 12:24 658 Count
3/12/2013 12:30 726 Count
3/12/2013 12:36 721 Count
3/12/2013 12:42 850 Count
3/12/2013 12:48 900 Count
3/12/2013 12:00 639 Count
3/12/2013 12:06 693 Count
3/12/2013 12:12 636 Count
3/12/2013 12:18 649 Count
3/12/2013 12:24 658 Count
3/12/2013 12:30 926 Count
3/12/2013 12:36 721 Count
3/12/2013 12:42 797 Count
3/12/2013 12:48 950 Count 
```

输出应如下所示：

```
3/12/2013 12:00 639 Count
3/12/2013 12:06 700 Count
3/12/2013 12:12 636 Count
3/12/2013 12:18 649 Count
3/12/2013 12:24 658 Count
3/12/2013 12:30 926 Count
3/12/2013 12:36 721 Count
3/12/2013 12:42 850 Count
3/12/2013 12:48 900 Count 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:56:05.033

你想要`sort`并且`uniq`：

```
$ sort -k2,2 -rk3,3  file | uniq -w15 | sort -k2,2
3/12/2013 12:00 639     Count
3/12/2013 12:06 700     Count
3/12/2013 12:12 636     Count
3/12/2013 12:18 649     Count
3/12/2013 12:24 658     Count
3/12/2013 12:30 926     Count
3/12/2013 12:36 721     Count
3/12/2013 12:42 850     Count
3/12/2013 12:48 950     Count 
```

或与一些`awk`：

```
$ awk '{if($3>a[$1" "$2])a[$1" "$2]=$3}END{for(k in a)print k,a[k],"\tCount"}' file | sort
3/12/2013 12:00 639     Count
3/12/2013 12:06 700     Count
3/12/2013 12:12 636     Count
3/12/2013 12:18 649     Count
3/12/2013 12:24 658     Count
3/12/2013 12:30 926     Count
3/12/2013 12:36 721     Count
3/12/2013 12:42 850     Count
3/12/2013 12:48 950     Count 
```

# sqlite - 如何在 SQL 中选择使用命令名称的列？

> ID：15440929
> 
> 赞同：1
> 
> 时间：2013-03-15T19:46:53.287
> 
> 标签：sqlite

有人决定将 sqlite 列命名为“来自”。问题是我无法选择没有语法错误的列，因为这是一个 SQL 命令。如何在 SQLite 中选择数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:48:40.783

[来自关键字的 sqlite 文档](http://www.sqlite.org/lang_keywords.html)：

> 如果要使用关键字作为名称，则需要引用它。SQLite中有四种引用关键字的方式：
> 
> *   `'keyword'` 单引号中的关键字是字符串文字。
> *   `"keyword"` 双引号中的关键字是标识符。
> *   `[keyword]` 方括号中的关键字是标识符。这不是标准 SQL。此引用机制由 MS Access 和 SQL Server 使用，并包含在 SQLite 中以实现兼容性。
> *   ``keyword`` 用重音符号（ASCII 代码 96）括起来的关键字是标识符。这不是标准 SQL。MySQL 使用这种引用机制，并包含在 SQLite 中以实现兼容性。

# ajax - 为什么我的基本 AJAX 没有运行

> ID：15440932
> 
> 赞同：-1
> 
> 时间：2013-03-15T19:46:59.247
> 
> 标签：ajax

我有一个程序，我在其中使用 ajax 并从名为“text.txt”的文件中获取文本，但我未能成功获取数据

```
<html>
<head>
<script type="text/javascript">
    function changeText()
    {
        request=new XMLHttpRequest();
        request.onreadystatechange=function()
        {
            if(request.readyState==4 && request.status==200)
            {
                alert(request.responseText);
            }
        }
        request.open("GET","**text.txt**",true);
        request.send();
    }
</script>
</head>
<body>
    <p id="para">Hello world</p>
    <input type="button" value="click to change text" onClick="changeText()"></input>
</body>
</html> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:54:36.527

这取决于您使用的浏览器。所以你应该使用模式工厂来为 ajax 创建对象。

有关更多详细信息，请查看[xmlhttp](http://www.quirksmode.org/js/xmlhttp.html)

# php - 编程方法理论。何时编写单一用途函数？

> ID：15440933
> 
> 赞同：6
> 
> 时间：2013-03-15T19:47:01.323
> 
> 标签：php, coding-style, theory, code-organization

非常抱歉，但我无法定义我试图弄清楚的这个“东西”。

在编写函数时，我们可以采取不同的方法，我做了一些“占位符”示例：

```
--------A---------
getImageSmall();
getImageLarge();
getTextSmall();
getTextLarge();
--------B---------
getImage('small');
getImage('large');
getText('small');
getText('large');
--------C---------
get('image','small');
get('image','large');
get('text','small');
get('text','large');
--------D---------
get(array('type'=>'image','size'=>'small'));
get(array('type'=>'image','size'=>'large'));
get(array('type'=>'text','size'=>'small'));
get(array('type'=>'text','size'=>'large'));
--------E---------
get('{"type":"image","size"=>"small"}');
get('{"type":"image","size"=>"large"}');
get('{"type":"text","size"=>"small"}');
get('{"type":"text","size"=>"large"}'); 
```

我也可以包含对象，但我现在更喜欢保持简单。

“D”中的数组是一个 php 数组，用于显示使用 json 的示例“E”之间的区别。

您可能会看到该方法如何逐渐从一种思维方式转变为另一种思维方式，其中功能定义转向信息交换。这并不意味着“get”函数是一个可以做所有事情的主函数，它可能是一个调用其他函数的信使函数，它的唯一目的可能是把应用程序变成一个服务。

## 问题是：

*   这种编码风格的转变叫什么？**（主要问题）**
*   什么时候最好使用哪个？
*   我在哪里可以阅读更多关于此的信息？

欢迎澄清和评论/问题/答案以改进此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:57:37.193

命名函数并将值传递给函数一直是众多讨论的主题之一。我建议您查看通常称为“清洁代码”的内容。它包含命名和构造函数的理论。这是一本值得一看的好书

[http://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882](https://rads.stackoverflow.com/amzn/click/com/0132350882)

并在 YouTube 上查看*Clean Code*，您可能会发现一些不错的演讲。

我的想法是，在构造函数时你可以做*一百万种*不同的方式。理论上，除了您的示例之外，您还可以有一个名为*Get*的函数，该函数接受一个指向函数的指针，该函数返回要获取的事物的类型。但这唯一增加的是复杂性。我们想要实现的基本上是易于其他人阅读和理解的自我注释代码。为此，每个函数都应该遵循设定的规则，根据它的执行情况如何命名，允许更改和返回什么等。这将使代码更容易进入。

这适用于上课。不要有一些类在它的构造函数中设置一百万个东西。如果需要，则创建函数来封装行为并从构造函数调用这些函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:11:32.187

在你编辑了你的问题之后，我明白了你想要得到什么，在这里。我将把它作为答案发布，并冒着被否决的风险——我稍后可能会编辑它。

似乎您正在尝试通过您的函数构建路由层次结构；类似于 Web API 甚至 MVC 应用程序中的路由。基本上，您正在构建一棵树-在其根部，您拥有`get`（这是函数名称），然后您可以将参数传递给可能相互依赖或不相互依赖的函数。

沿逻辑界限概括您的 API 调用确实是一种不同的编码风格，但我不知道它是否适用于您在这里选择的语言。

**这种编程风格的转变叫什么？（主要问题）**

我不确定，但我会尝试找到它并重新编辑这篇文章。

**什么时候最好使用哪个？**

您的函数在列表中变得更加通用。因此，我会在特定范围内使用更具体的函数（例如，作为类中的助手），并且我只会将通用函数作为更大公共接口的一部分公开。

**我在哪里可以阅读更多关于此的信息？**

我必须自己阅读一些内容-我理解这个概念，但我不知道我是否看过正式的定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:59:48.160

C 和 D/E 之间的区别根本不影响函数的逻辑，只是你调用它的方式。我将 C 用于更简单的功能，并在几种情况下切换到 D 和 E：

1.  参数列表足够长，以至于调用和定义很笨拙。传递关联数组可以让您逐个构建参数。

2.  您要作为参数传递的值已经在数组或对象中出现，因此传递它比先解包更方便。

3.  您的函数有很多可选参数。PHP 不支持命名参数，所以如果你想调用一个有 15 个可选参数的函数并且你提供了 5 个参数，传递一个参数数组比记住你的 5 个参数进入 15 个位置中的哪个位置要容易得多，并在它们之间写很多`null`s。

对于采用少量全部或大部分必需参数的函数，C 语言可能很有用，因为它使您的代码的其他读者更容易一目了然地了解函数的设计及其要求。

# c# - 如何测试内部类库？

> ID：15440935
> 
> 赞同：73
> 
> 时间：2013-03-15T19:47:04.207
> 
> 标签：c#, unit-testing, wrapper, internal

我想编写一个类库，它为我创建一个复杂的对象，但应该尽可能少地暴露。我希望它被包含到其他项目中，并且我只有一次调用这个库，例如返回一个内部创建的类的对象。我不想让其他人显式地创建这些对象，但我仍然想为这个类库创建一个测试项目。

例如：

```
var result = Manager.Instance.Create(definition) 
```

这应该是对类库的唯一访问。

根据定义参数，它使用不同的子类来创建请求的实例并相应地设置其属性。因此，我想通过测试以某种方式确保整个创建过程运行良好。但是由于我也不想暴露结果对象的极少内部属性，因此我无法仅使用此公共访问方法进行测试，因为我没有任何要断言的属性。

我知道你不应该测试内部机制，这通常是糟糕的设计，我也正在阅读[这篇文章](https://stackoverflow.com/questions/606137/testing-an-internal-class)，但是否有任何方法可以创建库和单元测试项目，然后可能会限制对此类的访问? 用包装纸什么的？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2013-03-15T19:50:55.030

在 .NET 中，您可以使用类库中的[InternalsVisibleToAttribute](https://docs.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.internalsvisibletoattribute) 使您的内部类型对单元测试项目可见。

这样，您可以将您的类保留在内部，并且仍然可以从您授予访问权限的其他程序集中使用它。

你像这样使用它：

```
[assembly:InternalsVisibleTo("NameOfYourUnitTestProject")] 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-05-18T08:50:42.240

对于最新的csproj 2017格式化项目，如果你的项目没有该`AssemblyInfo.cs`文件，可以添加如下设置：

```
 <ItemGroup>
    <AssemblyAttribute Include="System.Runtime.CompilerServices.InternalsVisibleTo">
      <_Parameter1>$(MSBuildProjectName).Tests</_Parameter1>
    </AssemblyAttribute>
  </ItemGroup> 
```

您也可以使用其他变量来替换`MSBuildProjectName`，例如`AssemblyName`或直接使用 unittest 项目名称。

您可以通过添加来检查`ProjectName.AssemblyInfo.cs`obj 文件夹 ( `obj\Debug\netstandard2.0`) 是否已更新`InternalsVisibleTo`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-30T11:39:09.317

在我的情况下（.NET5 应用程序）我需要两个 csproj 条目：

```
<ItemGroup>
    <AssemblyAttribute Include="System.Runtime.CompilerServices.InternalsVisibleTo">
        <_Parameter1>MyAppName.UnitTests</_Parameter1>
    </AssemblyAttribute>
</ItemGroup> 
```

以及我的班级的 internalvisibleto 属性以使其正常工作：

```
[assembly: InternalsVisibleTo("DynamicProxyGenAssembly2, PublicKey=0024000004800000940000000602000000240000525341310004000001000100c547cac37abd99c8db225ef2f6c8a3602f3b3606cc9891605d02baa56104f4cfc0734aa39b93bf7852f7d9266654753cc297e7d2edfe0bac1cdcf9f717241550e0a7b191195b7667bb4f64bcb8e2121380fd1d9d46ad2d92d2d15605093924cceaf74c4861eff62abf69b9291ed0a340e113be11e6a7d3113e92484cf7045cc7")] 
namespace MyAppName.Api.Something... 
```

# sharepoint-designer - 将第二步添加到 Sharepoint 工作流会导致错误“启动时失败（重试）”

> ID：15440938
> 
> 赞同：0
> 
> 时间：2013-03-15T19:47:09.147
> 
> 标签：sharepoint-designer, sharepoint-workflow

我正在共享点设计器中设计一个工作流来管理信息路径表单的审批流程。我正在使用 sharepoint server 2007。我的 sharepoint 站点已经有一个专门用于批准表单的表单库，并且我已经将我的工作流程附加到了表单库。我的问题是，当我尝试向自定义工作流添加第二步时，当我在表单上启动工作流时，总是在表单库的工作流状态列中收到错误“启动失败（重试）”。但是，如果我在工作流程中只使用一个步骤，则不会出错。那么有谁知道为什么向工作流程添加多个步骤会导致此错误？这非常令人沮丧。谢谢。

我的工作流程如下：

可以手动启动，也可以通过创建项目自动启动 第 1 步

条件：无

动作：（步骤 1 中的所有动作并行执行）

向多个共享点组发送电子邮件

向项目的创建者发送电子邮件

将当前项目中的一个字段（称为“工作流状态”）设置为数字 1

相同的任务分配给多个共享点组（第一个操作中引用的相同组）。

第2步

条件：

如果当前项目中的字段等于“是”操作：

将当前（称为“工作流状态”）中的一个字段设置为数字 5 条件：

否则，如果当前项目中的字段等于“否”操作：

将当前（称为“工作流状态”）中的字段设置为数字 0

将任务分配给项目的创建者。

注意：我会发布一个屏幕截图，但我刚刚加入了堆栈溢出。所以我还不能发布图片：/

编辑：如果有人想知道，我重新发布了这个问题，因为我做的一个类似的问题被移到了共享点堆栈交换站点。但是，该站点上的活动很少，因此为了获得一些帮助，我重新发布了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:51:31.977

为什么不在每个步骤将工作流变量的各种输入/输出添加到工作流日志中。我通常将其作为调试方法。这将有助于定位错误。

# sql-server-2008-r2 - 通过 JDBC 使用 Google Apps 脚本查询 SQL Server

> ID：15440939
> 
> 赞同：2
> 
> 时间：2013-03-15T19:47:22.923
> 
> 标签：sql-server-2008-r2, google-apps-script

我正在使用 SQL Server 2008 R2 并尝试使用 Google Apps 脚本对其进行查询。我正在使用应该填充电子表格的建议脚本之一，但我在连接 SQL 时遇到问题。

我已经检查了我指定的端口是否正确，所以我怀疑问题是否存在，我非常感谢确认我的连接字符串是正确的。

这是代码 -

服务器/实例：1433；数据库名称=xxxx；用户=xxxx；密码=xxxx")；

```
function foo() {
  var conn = Jdbc.getConnection   ("jdbc:sqlserver/instance:1433;databaseName=xxxx;user=xxxx;password=xxxx");
  var stmt = conn.createStatement();
  stmt.setMaxRows(100);
  var start = new Date();
  var rs = stmt.executeQuery("select top 1000 from SOP10100");

  var doc = SpreadsheetApp.getActiveSpreadsheet();
  var cell = doc.getRange('a1');
  var row = 0;
  while(rs.next()) {
    cell.offset(row, 0).setValue(rs.getString(1));
    cell.offset(row, 1).setValue(rs.getString(2));
    cell.offset(row, 2).setValue(rs.getString(3));
    cell.offset(row, 3).setValue(rs.getString(4));
    row++;
  }
  rs.close();
  stmt.close();
  conn.close();
  var end = new Date();
  Logger.log("time took: " + (end.getTime() - start.getTime())); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:53:58.010

我认为您的连接字符串格式略有错误。我相信您`sqlserver://`在服务器名称/实例之前需要一个。

我没有方便的 SQL Server 实例，但我针对 SQL Azure 测试了以下代码，它运行良好。我能够从名为 helloworld 的表中选择数据并将其写入电子表格。

我已经用占位符替换了我的凭据。

```
function readAzure() {
  var conn = Jdbc.getConnection("jdbc:sqlserver://XYZ.database.windows.net:1433;databaseName=MYDATABSENAME","USERNAME","PASSWORD");
  var stmt = conn.createStatement();
  var rs = stmt.executeQuery("select * from helloworld");

  var doc = SpreadsheetApp.create('azure');
  var cell = doc.getRange('a1');
  var row = 0;
  while(rs.next()) {
    cell.offset(row, 0).setValue(rs.getString(1));
    cell.offset(row, 1).setValue(rs.getString(2));
    row++;
  }
  rs.close();
  stmt.close();
  conn.close();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-26T20:38:27.160

我在 GitHub 上有一个完整的项目，它是一个 Mysql 和 SQL Server JDBC 连接应用程序。你可以在这里找到它：[GitHub 项目](https://github.com/ebarreat/Google-Spreadsheet-JDBC)。我已经在下面发布了相关代码。SQL Server 案例是您为连接实例化参数的地方，下面是连接的其余部分。要获得整个工具，请使用 GitHub 项目。

```
 function readFromTable(queryType, queryDb, query, tab, startCell) {
  // Replace the variables in this block with real values.
  var address;
  var user;
  var userPwd ;
  var dbUrl;

  switch(queryType) {
    case 'sqlserver':
      address = '%YOUR SQL HOSTNAME%';
      user = '%YOUR USE%';
      userPwd = '%YOUR PW%';
      dbUrl = 'jdbc:sqlserver://' + address + ':1433;databaseName=' + queryDb;
      break;
    case 'mysql':  
      address = '%YOUR MYSQL HOSTNAME%';
      user = '%YOUR USER';
      userPwd = '%YOUR PW%';
      dbUrl = 'jdbc:mysql://'+address + '/' + queryDb;
    break;
  }

  var conn = Jdbc.getConnection(dbUrl, user, userPwd);
  var start = new Date();
  var stmt = conn.createStatement();
  var results = stmt.executeQuery(query);
  var sheet = SpreadsheetApp.getActiveSpreadsheet();
  var sheetTab = sheet.getSheetByName(tab);
  var cell = sheetTab.getRange(startCell);
  var numCols = results.getMetaData().getColumnCount();
  var numRows = sheetTab.getLastRow();
  var headers ;
  var row =0;

  clearRange(tab,startCell,numRows, numCols);

  for(var i = 1; i <= numCols; i++){
    headers = results.getMetaData().getColumnName(i);
      cell.offset(row, i-1).setValue(headers);
      }

  while (results.next()) {
    var rowString = '';
    for (var col = 0; col < numCols; col++) {
      rowString += results.getString(col + 1) + '\t';
      cell.offset(row +1, col).setValue(results.getString(col +1 ));
    }
    row++
    Logger.log(rowString)
  }

  results.close();
  stmt.close();

  var end = new Date();
  Logger.log('Time elapsed: %sms', end - start);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-18T11:10:10.703

我已经破解了 :).... 至少对于我们的 SQL Server 和 google 电子表格！

感谢所有的帮助。我一直在这里阅读一些问题，现在我想分享您帮助我构建的内容。我已经构建了一个函数，它可以接受 SQL 查询并将结果输出到其所在的电子表格中。

要获取电子表格上的数据，您需要打开一个谷歌电子表格并转到“工具”>“<> 脚本编辑器”。然后通过下面的代码说明并包含“/ **** .....”。接下来，您将不得不更新代码中的这些位

```
var address = 'yourServerUrl:yourPortNumber';
var user = 'yourUserName';
var userPwd = 'yourPassword';
var db = 'yourDatabaseName'; 
```

然后你需要保存它并返回到电子表格并输入

```
=SQLTOGOOGLOOGLESPREADSHEET("yourSqlQuery") 
```

进入电子表格单元格

```
/***********************

@CUSTOMFUNCTION

*/

function SQLTOGOOGLOOGLESPREADSHEET(sqlQuery) {
    var address = 'yourServerUrl:yourPortNumber';
    var user = 'yourUserName';
    var userPwd = 'yourPassword';
    var db = 'yourDatabaseName';
    var msSqlUrlSyntax ='jdbc:sqlserver://'

    var dbUrl = msSqlUrlSyntax + address + ';databaseName=' + db;

    // msSqlUrlSyntax = 'youOptionalTestingQuery'
    var conn = Jdbc.getConnection(dbUrl, user, userPwd);

    var start = new Date();
    var stmt = conn.createStatement();
    stmt.setMaxRows(1000);

    var results = stmt.executeQuery(sqlQuery);
    var numCols = results.getMetaData().getColumnCount();
    var numRows = results.getFetchSize()
    Logger.log(numRows)
    var dataArray = [];

    while (results.next()) {
        var rowString = [];   
        rowString = [];

        for (var col = 0; col < numCols; col++)     
        {
            rowString.push(results.getString(col + 1))
        }

        dataArray[dataArray.length]=rowString;
    }

    Logger.log("dataArray =" + dataArray)
    return dataArray

    results.close();
    stmt.close();

    var end = new Date();
    Logger.log('Time elapsed: %sms', end - start);
} 
```

# c# - 收据打印机未收到“收据空”案例的状态消息

> ID：15440944
> 
> 赞同：1
> 
> 时间：2013-03-15T19:47:44.657
> 
> 标签：c#, .net, epson, opos, pos-for-.net

我正在使用 TM U220 收据打印机。我正在使用 Epson OPOS ADK for .Net 和 Microsoft PosFor.Net 来开发我的收据打印应用程序。

我正在尝试从设备获取状态信息，例如收据为空和收据接近空。但我总是得到成功的状态，即使打印机中没有收据。

```
PosPrinter m_Printer; // Name of printer instance.
//Initialisation of printer.
//

m_Printer.Open();
m_Printer.Claim();
m_Printer.Enabled = true;

if(m_Printer.RecEmpty || m_Printer.RecNearEmpty)
{
//Show the status message.
} 
```

上面的代码用于测试这种情况。无论打印机中的收据情况如何，我总是将这些布尔值视为错误。

请帮助我。我是否应该采取更多行动来获取这些状态信息。POS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-26T05:07:51.763

尝试为 m_printer 对象添加事件处理程序。并在此块上放置一个 try catch，以便通知您正在发生的事情！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-04T02:22:28.057

Epson OPOS 改变了这一点，即使在其最新版本 (2.80) 中也是如此。对于 TM-U220 型号，我使用以下内容：

启用 PowerNotify

```
m_Printer.PowerNotify = 1 
```

然后获取打印机Powerstate

```
Select Case m_Printer.PowerState
    Case 2000       'DESCONOCIDO, NO TIENE LA CAPACIDAD, NO HACER NADA
    Case 2001       'EN LINEA
    Case 2002, 2003, 2004    'APAGADA 'FUERA DE LINEA 'APAGADA
    msgbox "check printer"
End Select 
```

这不适用于 TM-U950 型号。

# iphone - 解开 Segue 问题

> ID：15440945
> 
> 赞同：1
> 
> 时间：2013-03-15T19:47:44.920
> 
> 标签：iphone, ios, objective-c, segue

我正在关注本教程以了解 unwind segues

[http://pragmaticstudio.com/blog/2013/2/5/unwind-segues](http://pragmaticstudio.com/blog/2013/2/5/unwind-segues)

一切正常，直到结束：

```
- (IBAction)completeSignIn:(UIStoryboardSegue *)segue {
   DSTSignInViewController *signInVC = segue.sourceViewController;
   self.greetingLabel.text = signInVC.signInName;
} 
```

我收到错误“未知类型名称“DSTSignInViewController”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:20:34.260

根据评论中的讨论...听起来您想要以下内容。

```
@protocol DSTSSignInController

@property (nonatomic, strong) NSString signInName;

@end 
```

进而

```
- (IBAction)completeSignIn:(UIStoryboardSegue *)segue {
   UIViewController<DSTSSignInController> *signInVC = segue.sourceViewController;
   self.greetingLabel.text = signInVC.signInName;
} 
```

这样，您可以只导入定义`DSTSSignInController`协议的标头，而不是导入`DSTSignInViewController`任何其他可能的实现/符合者。

# ruby-on-rails - 在 mongoid 中按金额排序

> ID：15440952
> 
> 赞同：0
> 
> 时间：2013-03-15T19:48:26.150
> 
> 标签：ruby-on-rails, ruby, mongoid, currency

我有带有嵌入式列表的产品。

因此，我想要一份按价格排序的清单。我正在使用 mongoid & Money gem。但是，我后来添加了新创建的列表（来自外部 api），所以通过 mongoid 排序没有意义。

清单包含：价格。Price 是 Money 类型，包含 :cents 和 :currency。

清单.rb：

```
scope :order_on_price, order_by("price.cents" => "desc") 
```

这也不起作用：

```
 scope :order_on_price, sort_by{ |price| price[:cents]} 
```

products_controller.rb（加载外部 api 后）：

```
@product.listings = @product.listings.order_on_price 
```

我究竟做错了什么？谢谢..

**更新：**

添加了控制台输出：

```
1.9.3-p327 :005 > Product.last.listings
 => [#<Listing _id: 514374bc98d12b3a3f00a164, created_at: 2013-03-15 19:21:32 UTC, updated_at: 2013-03-15 19:21:32 UTC, price: {"cents"=>3755, "currency_iso"=>"EUR"}, availability: true, scan_id: "513f4cdf3e15fce2eaec43b6">] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:49:10.230

在 Listing 类上，定义一个 <=> 方法。

```
def <=>(other)
  other.price <=> price
end 
```

现在您可以像这样引用列表：

```
product.listings.sort 
```

或者定义一个方法，listings_by_price：

```
def listings_by_price
  listings.sort
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:07:56.563

如果您必须按顺序列出清单，我会这样做：

```
Product.all.each do |product|
  reordered_listings = product.listings.order_on_price
  product.listings.clear
  reordered_items.each { |i| product.listings.create i.attributes }
end 
```

每次您输入新列表时，这都会以错误的顺序排列，因此我可能只会在您每次检索产品时对列表进行排序。

# jquery - 仅当类存在（或方法）时，Wordpress 才使用脚本

> ID：15440953
> 
> 赞同：2
> 
> 时间：2013-03-15T19:48:27.497
> 
> 标签：jquery, wordpress, methods

我在 wordpress 中遇到了脚本问题。我在主题文件夹中的functions.php中包含了脚本

```
function my_scripts_method() {
   wp_register_script( 'my-js-file',
       get_template_directory_uri() . '/js/my-js.js',
       array( 'jquery' ),
       '1.0',
       false );

   wp_enqueue_script( 'my-js-file' );
}

add_action( 'wp_enqueue_scripts', 'my_scripts_method' ); 
```

我的脚本在我的 datepicker ui 中进行了一些调整。但是该脚本一直包含在内，并且当带有 datepicker 的表单不在页面上时，它不知道“datepicker”及其方法。Web比没有背景和其他问题。

我发现，我可以检查表单日期字段的类是否存在或整个插件（其可视表单构建器）是否在该页面上，但它不起作用。即使课程不在当前页面上，Wordpress 也会处理该脚本。

我尝试了很多事情，比如

```
if ($(".visual-form-builder-container")){ 
```

但它仍然在主页上加载该脚本，该元素不存在。请帮忙

这是那个脚本：

```
if($(".visual-form-builder-container").length > 0) { <-- Im trying to stop that here

    jQuery(document).ready(function($) {
        $.datepicker.setDefaults({
                    firstDay: 1,
                    minDate: 0,
        });    
    });

} 
```

编辑：也许我发现了一些东西。当我在脚本中没有任何“if”的情况下打开我的网站并检查 chrome 控制台时，会出现： Uncaught TypeError: Cannot call method 'setDefaults' of undefined 所以如果我可能需要类似的东西：如果方法已定义并且它应该可以工作但我不知道任何检查方法的功能....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:57:26.237

好的，可能解决了它。我刚刚在脚本中添加了 try and catch （这是我的代码）：

```
jQuery(document).ready(function($) {
   try{
     $.datepicker.setDefaults({
            firstDay: 1,
            minDate: 0,
     });     
     $( '#vfb-datum-75' ).datepicker({
            beforeShowDay:  ..........,
     }); 
   }catch(err){

   }    
}); 
```

所以现在它可以工作了，当一切正常且未定义时，它什么也不做，这很好无论如何感谢您的帮助；）

# php - 在php中访问json对象

> ID：15440956
> 
> 赞同：1
> 
> 时间：2013-03-15T19:48:37.620
> 
> 标签：php, json

我有以下代码：

```
$string = '{"tracking_url":{"11":{"affiliate":"OMG","url_part1":<<some url>>,"url_part2":<<some url>>"}}}';
$points = json_decode( $string, true ); 
```

我如何访问`url_part1`和`url_part2`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T19:50:41.357

您给定的字符串不是有效的 JSON。

我假设你有这样的东西

```
{ "tracking_url":{"11":{"affiliate":"OMG","url_part1":<<some url>>,"url_part2":<<some url>>"}} } 
```

然后你可以通过解析后访问属性

```
$obj = json_decode( '{ "tracking_url":{"11":{"affiliate":"OMG","url_part1":<<some url>>,"url_part2":<<some url>>"}} }', true ); 
```

我忘记了输出部分。由于将第二个参数设置`json_decode()`为 true，结果是一个关联数组，您可以像这样访问/输出它：

```
echo $obj['tracking_url']['11']['url_part1'];
echo $obj['tracking_url']['11']['url_part2']; 
```

# c# - 有什么方法可以知道对象是什么时候创建的？

> ID：15440961
> 
> 赞同：5
> 
> 时间：2013-03-15T19:48:54.870
> 
> 标签：c#

我对此没有实际需要，但我想知道：

对于任何两个任意对象，C# 中是否有知道哪个是首先创建的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T19:50:02.607

不。除非对象具有存储对象创建日期和时间的只读属性，否则无法知道。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-15T19:50:19.617

仅当您在对象的构造函数中存储当前日期/时间（请注意，`DateTime.Now`几乎可以肯定没有足够的精度来使用）并提供一些公开公开该信息的方法时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:02:50.687

缺少`storing`它 - 你也可以`log`在某处使用时间戳。
（因为这样做最明显的目的可能是某种有意义的调试形式）

除非您完全控制，否则它仍然不适用于任意对象。

大多数解决方案都源于实际需求，这种情况很少出现 - 如果您需要类似的东西，您可以`custom factory`为第 3 方对象制作一个，或者为您拥有的对象制作您自己的实现。

# php - 在 sql 查询的结果周围包装一个 href 并使其可点击？

> ID：15440963
> 
> 赞同：0
> 
> 时间：2013-03-15T19:48:59.910
> 
> 标签：php, html, sql

在 report_path 字段中，我试图使图像路径可点击并将用户传递给图像。

```
$query = ("select 
        a.id as id,
        a.result, 
        a.result_date, 
        a.created_at, 
        b.employee as 'Created By',
        case
            when a.in_range='1' then 'IN' else 'OUT'
        end as in_range, 
        case when a.fax='1' then 'YES' else 'NO' end + ' | ' +
        case when a.email= '1' then 'YES' else 'NO' end as 'Pending<br>Fax | Email',
        report_path as '<a href='' + url + ''>report_path</a>',
        result
    from " . table('inrult') . " a
    left outer join " . table('emp') . " b on a.created_by=b.id
    where a.patient_id={$patient->hex} and (a.inactive is null or a.inactive=0) order by result_date desc"); 
```

它并不完全按照我想象的方式工作。我究竟做错了什么？

检查元素显示表格行事件链接而不是字段事件链接。

```
<td onclick="go2(&quot;index.php?ae/nic/edit&amp;_id=ACS00&amp;id=5&quot;);">_INR\5_2013-03-15.pdf</td> 
```

因此，当我单击该行上的任何位置时，它会转到上面的链接，但我无法为表中的特定字段指定不同的链接...我希望这更有意义。

# java - java.util.Calendar 未正确设置月份

> ID：15440968
> 
> 赞同：1
> 
> 时间：2013-03-15T19:49:23.997
> 
> 标签：java, date, calendar

这个问题很简单。我想要的是创建一个日历并使用以下属性进行设置：日：17 月：10（十月）年：1989

但是日历没有正确设置 MONTH。

这是代码：

```
Calendar fecha = new GregorianCalendar();
fecha.set(Calendar.DAY_OF_YEAR, 17);
fecha.set(Calendar.MONTH, Calendar.OCTOBER);
System.out.println(new SimpleDateFormat("dd/MM/yyyy").format(fecha.getTime())); 
```

我得到的是：17/01/2013 ------------>这个月不是十月

这有什么问题？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T19:50:45.070

如果您要设置月份和年份，那么当您设置日期时，请使用[`DAY_OF_MONTH`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#DAY_OF_MONTH)而不是`DAY_OF_YEAR`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T19:51:03.640

```
fecha.set(Calendar.DAY_OF_YEAR, 17); 
```

属于一月

你需要设置`Calendar.DATE`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T19:52:03.167

代替：

```
Calendar fecha = new GregorianCalendar();
fecha.set(Calendar.DAY_OF_MONTH, 17);
fecha.set(Calendar.MONTH, Calendar.OCTOBER);
System.out.println(new SimpleDateFormat("dd/MM/yyyy").format(fecha.getTime())); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T19:50:56.497

您需要使用 DAY_OF_MONTH 而不是 DAY_OF_YEAR

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-11T04:43:03.957

试试这个，效果很好，还可以用文字显示月份。

```
 `Calendar fecha = new GregorianCalendar();
    fecha.set(Calendar.DAY_OF_MONTH, 17);
    fecha.set(Calendar.MONTH, Calendar.OCTOBER);
    System.out.println(new SimpleDateFormat("dd/MMMM/yyyy").format(fecha.getTime()));` 
```

# python - 将字典写入 csv 时遇到问题，其中键作为标题，值作为列

> ID：15440970
> 
> 赞同：3
> 
> 时间：2013-03-15T19:49:35.247
> 
> 标签：python, csv, dictionary

我有一本看起来像这样的字典：

```
mydict = {"foo":[1,2], "bar":[3,4], "asdf":[5,6]} 
```

我正在尝试将其写入 CSV 文件，使其看起来像：

```
foo,bar,asdf
1,3,5
2,4,6 
```

我花了最后一个小时寻找解决方案，我发现最接近的一个建议做这样的事情：

```
headers = mydict.keys()
with open("File2.csv","w") as f:
    writer = csv.writer(f)
    writer.writerow(headers)
    writer.writerows(zip(mydict.values()) 
```

这会写入标题，但不会写入值。这是我的输出：

```
foo,bar,asdf
[1,2]
[3,4]
[5,6] 
```

如何获得我需要的输出？我真的很感激一些帮助。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T19:56:03.820

而不是`zip(mydict.values())`，使用`zip(*mydict.values())`. 这是区别：

```
>>> zip(mydict.values())
[([1, 2],), ([3, 4],), ([5, 6],)]
>>> zip(*mydict.values())
[(1, 3, 5), (2, 4, 6)] 
```

基本上第二个版本和`zip([1, 2], [3, 4], [5, 6])`. 这在文档中称为[解包参数列表。](http://docs.python.org/2/tutorial/controlflow.html#unpacking-argument-lists)

要强制排序，请使用以下命令：

```
>>> zip(*([k] + mydict[k] for k in sorted(mydict)))
[('asdf', 'bar', 'foo'), (5, 3, 1), (6, 4, 2)] 
```

这包括标题，因此只需将其传递给`writerows()`并删除您`writerow()`对标题的调用。

当然，您可以为那里`key`的函数提供一个参数来`sorted()`进行任何您喜欢的排序。例如，为了确保与您在问题中的顺序相同：

```
>>> order = {'foo': 0, 'bar': 1, 'asdf': 2}
>>> zip(*([k] + mydict[k] for k in sorted(mydict, key=order.get)))
[('foo', 'bar', 'asdf'), (1, 3, 5), (2, 4, 6)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:52:25.490

你用过tablib吗？

我通常将 tablib 用于此用途。使用起来非常简单：[https ://pypi.python.org/pypi/tablib/0.9.3](https://pypi.python.org/pypi/tablib/0.9.3)

[http://docs.python-tablib.org/en/latest/api/](http://docs.python-tablib.org/en/latest/api/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:25:27.313

此外，不使用`csv`：

```
mydict = {"foo":[1,2], "bar":[3,4], "asdf":[5,6]}

with open("File2.csv","w") as f:
    f.write(",".join(mydict.keys()) + "\n")
    for row in zip(*mydict.values()):
        f.write(",".join(str(n) for n in row) + "\n")
    f.close() 
```

# ruby - 使用 puppet 设置环境变量

> ID：15440972
> 
> 赞同：11
> 
> 时间：2013-03-15T19:49:41.183
> 
> 标签：ruby, deployment, environment-variables, environment, puppet

我正在尝试找出使用 puppet 设置一些环境变量的最佳方法。

我可以使用 exec 而只是做`export VAR=blah`. 但是，这只会持续到当前会议。我还考虑过将它添加到 bashrc 等文件的末尾。但是，我认为没有可靠的方法来检查那里是否一切就绪；所以它最终会随着木偶的每一次运行而被添加。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-15T22:48:15.020

我会看看[这个相关的问题](https://stackoverflow.com/questions/2891972/how-to-programatically-set-a-permanent-environment-variable-in-linux/2892026#2892026)。

`*.sh`在用户登录时读取脚本`/etc/profile.d`（正如帖子所说，同时`/etc/profile`来源）

`export`因此，放置在任何脚本中的变量-ed`/etc/profile.d`将可供您的用户使用。

然后，您可以使用[`file`](http://docs.puppetlabs.com/references/3.1.latest/type.html#file)资源来确保此操作是[幂等](http://docs.puppetlabs.com/guides/introduction.html)的。例如：

```
file { "/etc/profile.d/my_test.sh":
  content => 'export MYVAR="123"'
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T05:07:50.243

或者替代方法来获得一个不等的结果：

**例子**

```
if [[ ! grep PINTO_HOME /root/.bashrc | wc -l > 0 ]] ; then
        echo "export PINTO_HOME=/opt/local/pinto" >> /root/.bashrc ;
fi 
```

此选项允许在 pinto 应用程序的存在使其受到警告时设置此环境变量，而不必编写用户的环境变量，而 `.bash_profile`不管盒子上可能会出现什么应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:22:59.850

如果你将它添加到你的 bashrc 中，你可以检查它是否在 ENV 哈希中

```
ENV[VAR] 
```

哪个会返回 => "blah"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-03T17:10:04.587

如果你看一下[Github 的 Boxen](http://boxen.github.com "Github 的 Boxen")，他们会从 ~/.profile 获取一个脚本 (/opt/boxen/env.sh)。这个脚本运行了一堆东西，包括：

```
for f in $BOXEN_HOME/env.d/*.sh ; do
  if [ -f $f ] ; then
    source $f
  fi
done 
```

反过来，这些脚本为其各自的模块设置环境变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-25T16:09:26.087

如果您希望变量影响所有用户 /etc/profile.d 是要走的路。

但是，如果您希望它们用于特定用户，则 .bashrc 之类的东西更有意义。

为了回应“我认为没有可靠的方法来检查它是否在那里准备就绪；所以它最终会随着 puppet 的每次运行而被添加”，现在 puppetlabs[标准库模块](https://forge.puppet.com/puppetlabs/stdlib#file_line)提供了一个 file_line 资源：

“确保给定的行包含在文件中。实现匹配整行，包括开头和结尾的空格。如果给定文件中不包含该行，Puppet 将该行附加到文件末尾以确保所需的状态。可以声明多个资源以管理同一文件中的多行。

例子：

```
file_line { 'sudo_rule':
  path => '/etc/sudoers',
  line => '%sudo ALL=(ALL) ALL',
}

file_line { 'sudo_rule_nopw':
  path => '/etc/sudoers',
  line => '%sudonopw ALL=(ALL) NOPASSWD: ALL',
} 
```

# javascript - 定义隔离范围时指令行为发生变化

> ID：15440973
> 
> 赞同：1
> 
> 时间：2013-03-15T19:49:41.083
> 
> 标签：javascript, angularjs, angularjs-directive, angularjs-scope

我有一个 javascript 网格库 slickgrid 的指令。

[http://plnkr.co/edit/KWZ9i767ycz49hZZGswB?p=preview](http://plnkr.co/edit/KWZ9i767ycz49hZZGswB?p=preview)

我想要做的是将选定的行传回控制器。所以我想使用隔离范围（使用'='）来获得控制器和指令之间的双向绑定。

如果我在没有任何范围声明的情况下定义指令，一切正常：

```
<slickgrid id="myGrid" data="names" selected-item="selectedItem"></slickgrid>

app.directive('slickgrid', function() {
  return {
  restrict: 'E',
  replace: true,
  //scope: {
  //  selectedItem: '='
  //},
  template: '<div></div>',
  link: function($scope, element, attrs) {
   ...
    var redraw = function(newScopeData) {
    grid.setData(newScopeData);
    grid.render();
};
$scope.$watch(attrs.data, redraw, true); 
```

但是，如果我取消注释上面的行（app.js 中的第 19-21 行），它看起来就像 $scope.$watch 正在监视 attrs.data 对象正在调用重绘，但 attrs.data 被传入未定义。

我的分析可能是错误的，但我不确定为什么定义范围会导致这种情况。有人可以解释为什么会这样吗？

.内森。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:03:36.780

如果您定义了一个隔离范围，那么您指令中的任何 $watch 都将在您的隔离范围上寻找任何`attrs.data`评估结果。 `attrs.data`评估为 string `names`，因此 $watch 正在寻找`$scope.names`您的隔离范围，该范围不存在。（没有隔离范围，该指令使用与 MainCtrl 相同的范围，并且`$scope.names`存在于那里。）

要使用隔离范围，您需要定义另一个隔离范围属性以传入`names`：

```
scope: {
  selectedItem: '=',
  data: '='
},
...
$scope.$watch('data', redraw, true); 
```

HTML 可以保持不变。

# vim - 正常模式下的条件映射？

> ID：15440985
> 
> 赞同：2
> 
> 时间：2013-03-15T19:50:31.037
> 
> 标签：vim, map, conditional

在 vim 中是否可以在正常模式下进行条件映射？我已经看到它用于插入模式。我想根据函数的结果重新映射 gq。就像是：

```
nnoremap gq if(g:set_formatprg()) | gq | else | = | endif 
```

请注意，它`g:set_formatprg()`并不总是具有相同的值，因此它**不能**被替换为

```
if(!g:set_formatprg()) | nnoremap gq = | endif 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T20:06:03.060

表情图让一切变得简单

```
nnoremap <expr> gq g:set_formatprg() ? 'gq' : '=' 
```

如需更多帮助，请参阅

```
:h map-expression 
```

# cakephp - 身份验证登录时出现致命错误

> ID：15440993
> 
> 赞同：1
> 
> 时间：2013-03-15T19:50:45.077
> 
> 标签：cakephp, authentication, cakephp-model

尝试登录用户时出现以下错误：

```
Call to a member function login() on a non-object 
```

我的登录操作使用外部模型。动作是：

```
public function login() {

        $this->loadModel('User');

        if ($this->request->is('post')) {

           $theUser = $this->User->find('first', array('conditions' => array('User.username' => $this->request->data['User']['username'])));    

            if($theUser['User']['activated'] == TRUE){

                if ($this->Auth->login($this->request->data)){

                   $this->Session->setFlash('Logged in successfully');

                    $this->redirect(array('controller' => 'admin', 'action' => 'index'));
                } else {

                    $this->Session->setFlash('Username or password is incorrect');
                }
            }else $this->Session->setFlash('User not yet activated. Please Contact administrator.');
        }
    } 
```

传递给的请求数据`$this->Auth->login`是：

```
array(
    'User' => array(
        'password' => '*****',
        'username' => 'admin'
    )
) 
```

`$this->Auth->login($this->request->data)`是导致致命错误的行。

有人可以解释错误的确切含义以及可能导致它的原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T19:53:21.290

您需要检查是否已将 Auth 组件包含在控制器中。例如：

```
class UsersController extends AppController {

    public $components = array(
        'Auth'
    );

    public function login() { ... }
} 
```

正如@thaJeztah 指出的那样-检查[文档](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#identifying-users-and-logging-them-in)是否正确使用，因为您的代码（基于 的用法`$this->request`，意味着您使用的是2.x）不正确，并且不会测试用户是否存在并且可以登录-但是而是直接将用户登录到他们在登录表单中输入的任何内容。

# windows-8 - 适用于 Windows 8 的平滑流式传输 SDK - 插入耳机时出错

> ID：15440999
> 
> 赞同：1
> 
> 时间：2013-03-15T19:50:58.150
> 
> 标签：windows-8, microsoft-metro, smooth-streaming-player

我正在使用适用于 Windows 8 的 Smooth Streaming Client SDK 进行一些测试，并且我有一个非常基本的应用程序正在播放全屏视频：

```
private MediaExtensionManager extensions = new MediaExtensionManager();

public MainPage()
{
    this.InitializeComponent();
extensions.RegisterByteStreamHandler("Microsoft.Media.AdaptiveStreaming.SmoothByteStreamHandler", ".ism", "text/xml");
extensions.RegisterByteStreamHandler("Microsoft.Media.AdaptiveStreaming.SmoothByteStreamHandler", ".ism", "application/vnd.ms-sstr+xml");
}

protected override void OnNavigatedTo(NavigationEventArgs e)
{
    string url = "http://my.smooth.streaming.url/manifest";
    this.slPlayer.Source = new Uri(url);
    this.slPlayer.Play();
} 
```

这似乎工作正常，除非我插入耳机，此时应用程序停止工作。为 MediaFailed 事件添加处理程序会通知我收到 MF_MEDIA_ENGINE_ERR_SRC_NOT_SUPPORTED 错误。

知道可能是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:03:36.300

Badaro，我刚刚尝试过，但无法重现该问题（在 x86 和 x64 上，无论是否开始使用耳机并在播放期间切换）。我的猜测是您要么：1）遇到驱动程序问题。2）您的流的编码方式有一些特定的原因会导致这种情况。

我建议通过尝试几台不同的机器来排除#1。或者，通过尝试示例平滑 SDK 流排除 #2：http: [//mediadl.microsoft.com/mediadl/iisnet/smoothmedia/Experience/BigBuckBunny_720p.ism/Manifest](http://mediadl.microsoft.com/mediadl/iisnet/smoothmedia/Experience/BigBuckBunny_720p.ism/Manifest)