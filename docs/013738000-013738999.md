# StackOverflow 问答 13738000-13738999

# mysql - MySQL数据库相关

> ID：13738001
> 
> 赞同：0
> 
> 时间：2012-12-06T06:16:19.590
> 
> 标签：mysql

我有两张桌子：

```
purchase_mis(id, user_id, total_purchased, date)
daily_purchase(id, user_id, product_id, paid_amount, purchase_date) 
```

我有一个每天晚上运行的 CRON 文件，它计算`"daily_purchase"`表中的每日购买量并运行`insert into "purchase_mis"`.

例如：

```
SELECT
    COUNT(*) AS purchase_count,
    purchase_date
FROM daily_purchase
GROUP BY user_id; 
```

这`purchase_count`将为每个用户返回 ，然后将其插入到`"purchase_mis"`表中。

```
INSERT INTO
    purchase_mis(user_id, total_purchased, date)
VALUES
    ('2', 'purchase_count', 'purchase_date'); 
```

但是在插入之前，需要检查`user_id = 2`某个日期“ `purchase_date`”的购买信息是否已经插入，所以不要再次插入。

我想要类似下面的查询：

```
INSERT INTO
    purchase_mis(user_id, total_purchased, date)
VALUES
    ('2', 'purchase_count', 'purchase_date')
WHERE date NOT EXISTS (SELECT date FROM purchase_mis WHERE user_id = '2'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T06:20:02.310

在日期列上创建一个键，然后使用`INSERT IGNORE`or`INSERT ... ON DUPLICATE KEY UPDATE`语法。有关更多信息，请参见：[“INSERT IGNORE”与“INSERT ... ON DUPLICATE KEY UPDATE”](https://stackoverflow.com/questions/548541/insert-ignore-vs-insert-on-duplicate-key-update)

此外，您可能可以使用触发器或过程来代替 cron 作业；可能会让生活更轻松一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:56:32.367

```
insert into purchase_mis
   (user_id, total_purchased, date)
select * 
from (
   select 2 as id, 
          100 as user_id, 
          str_to_date('2012-12-04', '%Y-%m-%d') as purchase_date
) t 
where not exists (SELECT 1 
                  FROM purchase_mis pm
                  WHERE pm.user_id = t.id 
                  and pm.date = t.purchase_date); 
```

# javascript - 通过html表单旋转tabindex

> ID：13738008
> 
> 赞同：2
> 
> 时间：2012-12-06T06:17:16.837
> 
> 标签：javascript, jquery, ajax, html

我有一个 PHP 生成的表单，用作发票接口。用户通过按 来浏览表单`tab`。我需要在表单中旋转制表键，直到他们完成发票流程。

例如，使用这种形式：

```
 <form>

 <input type = "text" name="a" tabindex=1>
 <input type = "text" name="b" tabindex=2>
 <input type = "text" name="c" tabindex=3>
 <input type = "text" name="d" tabindex=4>
 <input type = "text" name="e" tabindex=5> 
 <input type = "text" name="f" tabindex=6>
 <input type = "button" name="g" tabindex=7>

 <input type = "submit" name="h" tabindex=8>

 </form> 
```

我需要将选项卡索引从 1 移动到 7，然后选项卡应将它们移回字段 a。它需要旋转，当我按下 ESC 时，我需要将光标移动到 h。

例子 -

**TAB 键将光标从 a->b->c->d->e->f->g->a->b->......->g 移动**

**ESC 键 只需将光标移动到 h**

如何在 HTML 或 javascript 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:32:04.290

我使用 id 而不是名称。猜猜这有帮助：

```
 <form>
     <input type = "text" id="a" tabindex=1/>
     <input type = "text" id="b" tabindex=2/>
     <input type = "text" id="c" tabindex=3/>
     <input type = "text" id="d" tabindex=4/>
     <input type = "text" id="e" tabindex=5/> 
     <input type = "text" id="f" tabindex=6/>
     <input type = "button" id="g" value="next" tabindex=7/>
     <input type = "submit" id="h" value="ok" tabindex=8/>
 </form>
    <script type="text/javascript">
    $('input').keydown(function(event){
        if(event.keyCode == 9 && $(event.target).is('#g') ){
            $('#a').focus(); 
            event.preventDefault();
        }
        else if (event.keyCode == 27){
            $('#h').focus(); 
            event.preventDefault();
        }
    });
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:37:44.043

我对这个问题使用了以下代码并获得了成功。

```
 <script> 
   window.history.forward(1); 
   document.attachEvent("onkeydown", my_onkeydown_handler); 
   function my_onkeydown_handler() 
   { 
   switch (event.keyCode) 
   { 

   case 9 :
   document.form.a.focus();
   event.keyCode = 0;
   break;

   case 27 :
   document.form.h.focus();
   event.keyCode = 0;
   break;
   } 
   } 
   </script> 
```

# python - 在 django 的管理表单中使用多对多相关模型的字段作为内联

> ID：13738017
> 
> 赞同：1
> 
> 时间：2012-12-06T06:18:11.450
> 
> 标签：python, django-admin

我面临在管理表单中将字段添加为内联的问题。我的模型如下：-

```
class Enrollment(BaseTableCore):
    iclass = models.ForeignKey(InstituteClass,blank=True,null=True,on_delete=models.SET_NULL )
    batch = models.ForeignKey(Batch,blank=True,null=True,on_delete=models.SET_NULL)
    icourse = models.ForeignKey(InstituteCourse,blank=True,null=True,on_delete=models.SET_NULL)
    enroll_num=models.CharField(max_length=20)**

class RegistrationProfile(models.Model):
    user = models.OneToOneField(User,related_name='userregistrationprofile')
    activeflag = models.BooleanField(blank=True) # This would be true when the student profile is activated by admin.
    usertype = models.IntegerField(choices=USER_TYPES)
    email = models.EmailField(null=True,blank=True)
    dob = models.DateField(blank=True,null=True)
    gender = models.IntegerField(choices=GENDER_CHOICE,null=True,blank=True)
    mobile_no = models.IntegerField(null=True,blank=True,help_text="Please Enter Your Mobile No : ")
    enrollment = models.ManyToManyField(Enrollment, through='ProfileEnrollment')
    courses_applied = models.ManyToManyField(InstituteCourse,through='AppliedForCourse')

class ProfileEnrollment(models.Model):
    profile = models.ForeignKey(RegistrationProfile)
    enrollment = models.ForeignKey(Enrollment)

class AppliedForCourse(models.Model):
    profile = models.ForeignKey(RegistrationProfile)
    courses = models.ForeignKey(InstituteCourse)
    batch = models.ForeignKey(Batch) 
```

我遇到问题的管理表单如下：-

```
class AppliedForCourseInline(admin.TabularInline):
    model = AppliedForCourse
    fieldsets = ((None,{
        'fields':('courses','batch')}),
    )
    extra =0

class ProfileEnrollementInline(admin.TabularInline):
    model = ProfileEnrollment
    extra = 0

class RegistrationProfileAdmin(admin.ModelAdmin):
    form = RegistrationProfileAdminForm
    inlines = [AppliedForCourseInline,ProfileEnrollementInline]
    fieldsets = ((None,{
        'fields':('user','activeflag','usertype')}),
    ) 
```

内联 for`AppliedForCourse`像往常一样工作，但问题在于`ProfileEnrollmentInline`我需要在内联中显示模型的`icourse`, `iclass`, `batch`&`enroll_num`字段`Enrollment`。

我似乎无法弄清楚解决方案，如何解决这个问题？

# javascript - Javascript Uncaught TypeError：非法调用

> ID：13738024
> 
> 赞同：0
> 
> 时间：2012-12-06T06:18:49.530
> 
> 标签：javascript

> **可能重复：**
> [Chrome 在调用 log 时无法识别 console.log](https://stackoverflow.com/questions/9612398/chrome-doesnt-recognize-console-log-when-its-called-log)

谁能告诉我为什么当我将方法设置为时这不起作用`console.log`？

```
var met = "console.log";
var msg = "HELLO WORLD";
var n = met.split(".");
var f = this;
$.each(n, function(k, v){
    f = f[v];
});
f(msg); 
```

当我尝试使用时，这似乎有效`alert`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:26:11.563

这是因为控制台的日志功能被分配给`f`变量，但是在执行时它不再引用控制台范围。在处理回调或传递函数时，Javascript 作用域可能会变得很棘手。

至于@Murali 的评论，它的工作原理，一些浏览器实现console.log 方法的方式与其他浏览器不同。

作为一个实验，尝试运行这段代码，看看它是否有效：

```
var met = "console.log";
var msg = "HELLO WORLD";
var n = met.split(".");
n[1].call(n[0], msg); 
```

使用该`.call`方法可以让您执行一个函数并声明其范围。如果这对您有用，那么重构您的循环场景应该很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:20:54.600

解决了。

```
var met = "console.log";
var msg = "HELLO WORLD";
var n = met.split(".");
var tail = n.pop();
var f = this;
$.each(n, function(k, v){
    f = f[v];
});
var func = function(){ f[tail].apply(f, arguments); }
func(msg); 
```

在 Chrome、Firefox、Opera 和 Safari 上进行了测试。似乎在 IE9 上不起作用。

我从[Link](https://stackoverflow.com/questions/9612398/chrome-doesnt-recognize-console-log-when-its-called-log)上 的 @muistooshort 和[Link上的 @jasonbunting 那里得到了想法](https://stackoverflow.com/questions/359788/how-to-execute-a-javascript-function-when-i-have-its-name-as-a-string)

# c# - jQuery document.ready 抛出错误

> ID：13738027
> 
> 赞同：0
> 
> 时间：2012-12-06T06:19:27.133
> 
> 标签：c#, jquery, asp.net

我正在将 jQuery 多选控件动态添加到这样的页面上：

```
 var captionCell = new HtmlTableCell { InnerHtml = control.Caption };
 var inputCell = new HtmlTableCell();
 inputCell.Controls.Add(inputControl);
 var row = new HtmlTableRow();
 row.Cells.Add(captionCell);
 row.Cells.Add(inputCell);
 tbl.Rows.Add(row); 
```

并像这样构建我的javascript字符串：

```
 StringBuilder sb = new StringBuilder();
 sb.AppendLine("<script type=\"text/javascript\">");
 sb.AppendLine("var $callback = $(\"#callback\");");
 sb.AppendLine("$(document).ready(function () {");
 sb.Append("$(\"#");
 sb.Append(multiSelectControl.ClientID);
 sb.AppendLine("\").multiselect(");
 sb.AppendLine("{");
 sb.AppendLine("show: \"fade\",");
 sb.AppendLine("hide: \"fade\",");
 sb.AppendLine("click: function (event, ui){");
 sb.AppendLine("$callback.text(ui.text + ' ' + (ui.checked ? 'checked' : 'unchecked'));");
 sb.AppendLine("},");
 sb.AppendLine("});");
 sb.AppendLine("});");
 sb.AppendLine("</script>"); 
```

然后将脚本添加到页面中，如下所示：

```
ScriptManager.RegisterClientScriptBlock(this.Page, Page.GetType(), "CreateControl" + inputControl.ClientID,
                            sb.ToString(), false); 
```

但是在尝试执行此操作时出现以下错误：

> Microsoft JScript 运行时错误：对象不支持此属性或方法

请各位大侠帮忙。

提前致谢。

![在此处输入图像描述](../Images/c06c64750dc1055605fae7129b5b5b06.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:21:09.473

您需要在页面中包含 jQuery 才能使用 document.ready，您没有添加脚本标签以在页面中包含 jquery，添加脚本标签以包含 jquery。

```
<script type="text/javascript" src="/jQueryFolder/jquery.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:38:09.260

```
 var $callback = $("#callback");
 $(document).ready(function() {
    $("#ClientID").multiselect({
    show: "fade",
    hide: "fade",
    click: function(event, ui) {
        $callback.text(ui.text + ' ' + (ui.checked ? 'checked' : 'unchecked'));
    }
});
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T08:55:57.940

我通过创建用户控件解决了这个问题，当我需要使用上面的脚本时，我只是加载了用户控件。

解决了所有问题并且效果很好。

# ejb-3.0 - 在 WAS7.0 中使用没有 XML 配置的 @MessageDriven

> ID：13738029
> 
> 赞同：2
> 
> 时间：2012-12-06T06:19:28.197
> 
> 标签：ejb-3.0

因为我将 WAS7.0 用于消息驱动 Bean，并且我已经通过注释配置了 MDB。我没有在 xml 中配置任何东西，`ibm-ejb-jar-bnd.xml`我`ejb-jar.xml`在配置中提供了所有配置，`@MessageDriven`但我的 MDB 没有从队列中侦听消息 请在使用`@MessageDrive`注释时告知我是否还需要在 XML 中配置 MDB。我正在使用下面的注释。

```
@MessageDriven(activationConfig = {
        @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue"),
        @ActivationConfigProperty(propertyName = "acknowledgeMode", propertyValue = "Auto-acknowledge"), 
         @ActivationConfigProperty(propertyName = "useJNDI", propertyValue = "true"),
         @ActivationConfigProperty(propertyName = "connectionFactoryJndiName",propertyValue = "jms/TestChangeSubscriptionConnectionFactory"), 
         @ActivationConfigProperty(propertyName = "destinationJndiName",propertyValue = "jms/ETestChangeSubscriptionQueue") 
 }, mappedName = "jms/TestChangeSubscriptionQueue")
@TransactionManagement(TransactionManagementType.BEAN) 
```

# php - 如何使用访问令牌获取 facebook 用户详细信息

> ID：13738030
> 
> 赞同：3
> 
> 时间：2012-12-06T06:19:40.293
> 
> 标签：php, facebook, facebook-graph-api

我正在facebook中创建一个应用程序，当用户输入我的应用程序时，将进行身份验证，之后我将获得用户的访问令牌和ID，现在我想要同一用户的详细信息，我必须将其存储在数据库中.. ..怎么做这个我试过的代码是

```
 <?php 

     $app_id = "xxxxxxxxxxx";

     $canvas_page = "xxxxxxxxxxxxx";

     $auth_url = "https://www.facebook.com/dialog/oauth?client_id=" 
            . $app_id . "&redirect_uri=" . urlencode($canvas_page)."&scope=email,user_birthday";

     $signed_request = $_REQUEST["signed_request"];
     //print_r($signed_request);

     list($encoded_sig, $payload) = explode('.', $signed_request, 2); 
     //print_r($payload);

     $data = json_decode(base64_decode(strtr($payload, '-_', '+/')), true);
     //print_r($data);

      if(!isset ($_GET['code'])) {
                        if (empty($data["user_id"])) {
                          echo("<script> top.location.href='" . $auth_url . "'</script>");
                   } else {
                        $accessToken = $data["oauth_token"];

                          echo ("<br/><br/>Welcome User: " . $data["user_id"]);
                   } 
      } else {
          echo("<script> top.location.href='" . $pageUrl . "'</script>");
      }

 ?> 
```

现在我想要字符串或数组格式的用户名和其他详细信息......请帮助我......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-06T06:33:25.443

使用这个 Graph api：

```
https://graph.facebook.com/me?access_token=XXXXXXXXXXXXXXX 
```

您可以使用 fields 查询参数选择要返回的字段：

[https://graph.facebook.com/me?fields=id,name](https://graph.facebook.com/me?fields=id,name)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:06:35.700

您可以使用自动处理这种情况并设置访问令牌的[Facebook PHP SDK ，或者您可以使用手动指定访问令牌](https://github.com/facebook/facebook-php-sdk)

> setAccessToken($access_token) 方法

并将您的用户的访问令牌传递给它，并使用 api() 方法进行 Graph API 调用以获取有关用户的数据。如果您想取消 SDK，则需要将访问令牌作为参数添加到 Graph API 端点。

# android - 将位图从一个 Activity 传输到另一个 Activity 时无法启动 Activity

> ID：13738032
> 
> 赞同：0
> 
> 时间：2012-12-06T06:19:45.273
> 
> 标签：android

> **可能重复：**
> [如何将图像数据从一个活动传递到另一个活动？](https://stackoverflow.com/questions/6646979/how-to-pass-image-data-from-one-activity-to-another-activity)
> [将位图图像从一个活动传递到另一个活动](https://stackoverflow.com/questions/13577664/pass-a-bitmap-image-from-one-activity-to-another)

我试图从如下视图中获取位图

```
 View s = ml.getRootView();
                s.setDrawingCacheEnabled(true);

            Bitmap  b = s.getDrawingCache();

                System.out.println(b.isRecycled());

                Log.e("ok","ok");
                Intent i=new Intent(CameraActivity.this,Update.class);
                 i.putExtra("data",b);
                 startActivity(i);
//                 s.setDrawingCacheEnabled(false);
                 s.setVisibility(View.GONE);
                 finish();

I tried to transfer the bitmap from this Activity to another,but it is showing me black screen and app gets crashed.
       s.setVisibility(View.GONE); If I dont give this statement it is showing me this modified Activity and then it is showing Black screen. 
```

我认为传输此位图需要很多时间。

我该如何解决这个问题？

请帮忙

谢谢

出现黑屏后的Logcat

```
12-06 11:23:34.654: E/AndroidRuntime(16900): FATAL EXCEPTION: main
12-06 11:23:34.654: E/AndroidRuntime(16900): java.lang.NullPointerException
12-06 11:23:34.654: E/AndroidRuntime(16900):    at android.app.ActivityThread.handleStopActivity(ActivityThread.java:2595)
12-06 11:23:34.654: E/AndroidRuntime(16900):    at android.app.ActivityThread.access$1800(ActivityThread.java:124)
12-06 11:23:34.654: E/AndroidRuntime(16900):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:985)
12-06 11:23:34.654: E/AndroidRuntime(16900):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-06 11:23:34.654: E/AndroidRuntime(16900):    at android.os.Looper.loop(Looper.java:123)
12-06 11:23:34.654: E/AndroidRuntime(16900):    at android.app.ActivityThread.main(ActivityThread.java:3806)
12-06 11:23:34.654: E/AndroidRuntime(16900):    at java.lang.reflect.Method.invokeNative(Native Method)
12-06 11:23:34.654: E/AndroidRuntime(16900):    at java.lang.reflect.Method.invoke(Method.java:507)
12-06 11:23:34.654: E/AndroidRuntime(16900):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-06 11:23:34.654: E/AndroidRuntime(16900):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-06 11:23:34.654: E/AndroidRuntime(16900):    at dalvik.system.NativeStart.main(Native Method)
12-06 11:23:36.490: W/InputManagerService(1318): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@40a84730 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:25:05.390

您正在将位图传递到 Intent 并从捆绑包中获取下一个活动中的位图，但问题是如果您的位图/图像大小当时很大，则图像未在下一个活动中加载。

使用以下 2 个解决方案来解决此问题。

1）首先将图像转换为字节数组，然后传递到意图，并在下一个活动中从捆绑中获取字节数组并转换为图像（位图）并设置为ImageView。

将位图转换为字节数组：-

```
Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray(); 
```

将字节数组传递给意图：-

```
Intent intent = new Intent(this, NextActivity.class);
intent.putExtra("picture", byteArray);
startActivity(intent); 
```

从 Bundle 中获取字节数组并转换为位图图像：-

```
Bundle extras = getIntent().getExtras();
byte[] byteArray = extras.getByteArray("picture");

Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length);
ImageView image = (ImageView) findViewById(R.id.imageView1);

image.setImageBitmap(bmp); 
```

2）首先将图像保存到 SDCard 中，然后在下一个活动中将此图像设置为 ImageView。

# google-apps-script - Apps 脚本的资源规则配置

> ID：13738034
> 
> 赞同：0
> 
> 时间：2012-12-06T06:20:11.923
> 
> 标签：google-apps-script

是否有人将 Apps Script 和 UrlFetchApp 与 useIntranet:true 一起使用？如果是这样，您能否在 SDC 代理配置的 resourceRules.xml 中提供您的节点？该文档没有关于此的信息，我不断收到地址不可用错误，甚至知道该资源适用于小工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:46:31.863

Google 文档中有关[安装和配置](https://developers.google.com/secure-data-connector/docs/1.3/config)SDC 的错误。要使用 Apps 脚本，该元素应为`<service>Apps-Script</service>`.

使用`<service>Apps Script</service>`和指定 appId 时，SDC 代理将抛出错误并且无法启动。

# python - django中的异步芹菜任务调用没有被推入rabbitmq队列

> ID：13738035
> 
> 赞同：1
> 
> 时间：2012-12-06T06:20:15.660
> 
> 标签：python, django, rabbitmq, celery

我的系统中安装了 celery==3.0.12 和 djcelery==3.0.11，django 版本为 1.4.1。我试图在我的一个项目中使用 celery 异步处理一些任务，但它不起作用。因此，为了进行测试，我开始了一个新的 django 项目，定义了示例任务`add`并像这样从 shell 调用它

```
 >>>res = add.delay(3, 5) 
```

我试过了`res.status`，`res.get()`而且`res.ready()`，所有这些都被阻止了。我正在`celery`使用 rabbitmq 管理插件在浏览器中监视 rabbitmq 队列。`celery`队列处于空闲状态，没有收到任何消息。

以下是目录树。

```
|-- manage.py
|-- new_app
|   |-- __init__.py
|   |-- __init__.pyc
|   |-- models.py
|   |-- models.pyc
|   |-- tasks.py
|   |-- tasks.pyc
|   |-- tests.py
|   `-- views.py
`-- testapp
    |-- __init__.py
    |-- __init__.pyc
    |-- settings.py
    |-- settings.pyc
    |-- urls.py
    `-- wsgi.py 
```

以下是文件内容

new_app/tasks.py

```
from celery import task

@task
def add(x ,y):
    return x + y 
```

testapp/settings.py

```
import djcelery
djcelery.setup_loader()

BROKER_URL = 'amqp://'
CELERY_RESULT_BACKEND = 'amqp://'
CELERY_TASK_SERIALIZER = 'json'
CELERY_RESULT_SERIALIZER = 'json'

BROKER_HOST = 'localhost'
BROKER_PORT = 5672
BROKER_USER = 'guest'
BROKER_PASSWORD = 'guest'
BROKER_VHOST = '/' 
```

当我运行时`python manage.py celeryd -l INFO`，它正在创建`celery`队列。以下是控制台输出。 [http://dpaste.com/841960/](http://dpaste.com/841960/)

RabbitMQ 版本为 3.0.0

的输出`rabbitmqctl list_queues`

```
Listing queues ...
celery  0
h4ckb0x.celery.pidbox   0
...done. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-11T22:33:13.843

尝试将您的操作与以下内容进行比较，并找出您的应用中缺少的内容：

配置兔子：

首先安装它（在我们的例子中是 ubuntu）：

```
sudo apt-get update
sudo apt-get install rabbitmq-server
sudo mkdir /etc/rabbitmq/rabbitmq.conf.d 
```

设置用户/psw/vhost：

```
sudo rabbitmqctl delete_user guest
sudo rabbitmqctl add_user <username> <password>
sudo rabbitmqctl set_user_tags <username> administrator
sudo rabbitmqctl add_vhost <some_name_for_vhost>
sudo rabbitmqctl set_permissions -p <some_name_for_vhost> <username> ".*" ".*" ".*"') 
```

## 定义设置：

## 设置.py

```
RABBIT_USERNAME = <username>
RABBIT_PASSWORD = <password>
RABBIT_HOST = 'localhost' #or some server dns/ip
RABBIT_VHOST = <some_name_for_vhost>
BROKER_URL = 'amqp://%s:%s@%s:5672/%s' % (RABBIT_USERNAME,RABBIT_PASSWORD,RABBIT_HOST,RABBIT_VHOST)

CELERY_ACCEPT_CONTENT = ['json']
CELERY_TASK_SERIALIZER = 'json'
CELERY_TIMEZONE = 'UTC'
CELERY_ENABLE_UTC = True
CELERY_CREATE_MISSING_QUEUES = True 
```

## 定义芹菜：

## 芹菜.py

```
from __future__ import absolute_import

import os

from celery import Celery

from django.conf import settings

# set the default Django settings module for the 'celery' program.
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'yourapp.settings')

app = Celery('yourapp')

# Using a string here means the worker will not have to
# pickle the object when using Windows.
app.config_from_object('django.conf:settings')
app.autodiscover_tasks(lambda: settings.INSTALLED_APPS) 
```

## 定义任务：

## 任务.py

```
from celery import task

@task(queue="my_queue")
def do_something_in_background(x1,x2):   
    #start doing something in the task
    #enter you code in here 
```

运行工人：

## （很好地杀死所有现有的，运行 10 个名为 app_worker 的工作人员，将它们连接到您的任务队列：my_queue）

## run_workers.sh

```
#!/bin/bash
ps auxww | grep 'yourapp worker' | awk '{print $2}' | xargs kill
celery -A yourapp worker -Q my_queue -n app_worker -l info -c 10 -Ofair 
```

## 定义一些测试：

## 测试.py

```
import tasks
def my_func():
    tasks.do_something_in_background.delay(x1,x2) 
```

# python - base64 未命中编码字符串

> ID：13738043
> 
> 赞同：3
> 
> 时间：2012-12-06T06:21:13.827
> 
> 标签：python, base64

```
import base64
if __name__ == '__main__':
    res = base64.encodestring('srcdasd')        
    print(res) 
```

我在控制台 python base64.py 中运行，得到以下错误消息。

但我可以在 textMate 中正确运行它。

AttributeError：“模块”对象没有属性“编码字符串”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T06:25:58.940

您的文件名不应该是 base64.py，它与您正在使用的模块冲突。重命名文件，应该可以解决。

# ruby-on-rails-3 - 使用 kaminari 进行反向分页

> ID：13738045
> 
> 赞同：18
> 
> 时间：2012-12-06T06:21:29.340
> 
> 标签：ruby-on-rails-3, pagination, kaminari

我想为消息传递系统创建分页，其中显示的第一页包含最旧的消息，后续页面显示较新的消息。

例如，如果`{a,b,c,d,e,f,g,h,i}`每页 3 个的正常分页是：

```
{a,b,c}, {d,e,f}, {g,h,i} 
```

然后反向分页将是：

```
{g,h,i}, {d,e,f}, {a,b,c} 
```

我计划在页面前添加，因此结果与正常分页相同，只是从最后一页开始。

这可能`kaminari`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-06T17:42:48.960

`Kaminary.paginate_array`不会产生带有偏移量和限制的查询。出于优化原因，您不应该使用它。

相反，您可以这样做：

```
@messages = query_for_message.order('created_at DESC').page(params[:page]).per(3) 
```

Where`query_for_message`代表您用于检索分页记录的任何查询。例如，它可以是特定对话的所有消息。

现在在视图文件中，您只需要以`@messages`相反的顺序显示。例如：

```
<%= render :collection => @messages.reverse, :partial => 'message' %>
<%= paginate @messages %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T10:20:02.440

Github 上有一个很好的示例 repo，在 github 上称为[reverse_kaminari](https://github.com/Djo/reverse_kaminari)。它建议按照这些思路实施[（来源）](https://github.com/Djo/reverse_kaminari/blob/master/app/controllers/cities_controller.rb)。

```
class CitiesController < ApplicationController

  def index
    @cities = prepare_cities City.order('created_at DESC')
  end

  private

  def prepare_cities(scope)
    @per_page = City.default_per_page
    total_count = scope.count
    rest_count = total_count > @per_page ? (total_count % @per_page) : 0
    @num_pages = total_count > @per_page ? (total_count / @per_page) : 1

    if params[:page]
      offset = params[:page].sub(/-.*/, '').to_i
      current_page = @num_pages - (offset - 1) / @per_page
      scope.page(current_page).per(@per_page).padding(rest_count)
    else
      scope.page(1).per(@per_page + rest_count)
    end
  end

end 
```

所有功劳[归于 Andrew Djoga](https://github.com/Djo)。他还主持了该应用程序作为[工作演示](http://reverse-kaminari.heroku.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T17:22:35.437

解决此问题的一种方法是： [使用 kaminari 进行反向分页？](https://stackoverflow.com/questions/14547991/reverse-pagination-with-kaminari#15461464) 它看起来不是很干净也不是最理想的，但它可以工作:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T22:01:55.403

是的，但我想出的方法并不完全漂亮。实际上，您必须设置自己的订单：

```
Message.page(1).per(3).order("created_at DESC").reverse! 
```

这种方法的问题是双重的：

先说反了！call 将作用域解析为一个数组并执行查询，使用 AR 作用域削弱了 kaminari 的一些令人敬畏的方面。

其次，与任何反向分页一样，您的偏移量将移动，这意味着在两次重复调用之间，您可能会发送恰好 3 条新消息，并且您将获得完全相同的数据。这个问题是反向分页所固有的。

另一种方法是询问“最后”页码并将您的页码向下增加到 1。

# android - 在 android 中与 Tumblr 和 Flickr 共享图像

> ID：13738046
> 
> 赞同：1
> 
> 时间：2012-12-06T06:21:54.663
> 
> 标签：android, tumblr, image-uploading, android-image, flickr

我已经搜索了很多关于 tumblr 和 flickr 使用 android 应用程序发布图像的信息。不幸的是，我无法获得有关它的更多详细信息。

那么任何人都可以给我一些示例或链接或教程来从 android 应用程序上传照片吗？任何示例示例也可以用于理解目的。

任何建议将不胜感激。

# c# - MVVMLight Simple IOC - 动态注册和注销数据服务实现

> ID：13738049
> 
> 赞同：9
> 
> 时间：2012-12-06T06:22:10.280
> 
> 标签：c#, wpf, design-patterns, mvvm, mvvm-light

我有一个支持 MVVM Light Toolkit 的 WPF 应用程序。该应用程序具有以下场景。该应用程序有两种数据连接模式。一种是**WCF 服务**，另一种是**Direct Database**。应用程序应通过上述模式之一连接到数据库。连接模式选择位于登录窗口中。最终用户可以选择一种连接模式（WCF 服务或直接数据库），并基于该选择在组合框中加载连接配置列表。（请查看附件图片以获取更多信息）。连接配置位于本地 xml 配置文件中。我还有一个默认连接配置，如果选择了任何连接配置，则应分配该配置。

![在此处输入图像描述](../Images/8a333afcb797c4c059a5cefa40c5e4a3.png)

在 View Model Locator 中，我正在注册默认服务，如下所示

```
public ViewModelLocator()
        {
            ServiceLocator.SetLocatorProvider(() => SimpleIoc.Default);

            if (ViewModelBase.IsInDesignModeStatic)
            {
                // Create design time view services and models
                if (!SimpleIoc.Default.IsRegistered<IDataService>())
                    SimpleIoc.Default.Register<IDataService, MockDataClient>();
            }
            else
            {
                // Create run time view services and models
                if (!SimpleIoc.Default.IsRegistered<IDataService>())
                {
                    switch (DefaultConnectionConfiguration.ConnectionMode)
                    {
                        case DataConnectionMode.WcfService:
                            var wcfServiceConfiguration = (WcfServiceConfiguration)CurrentConnectionConfiguration;
                            SimpleIoc.Default.Register<IDataService>(
                                () =>
                                wcfServiceConfiguration != null
                                    ? new DataServiceClient("WSHttpBinding_IDataService",
                                                                 wcfServiceConfiguration.EndpointUrl)
                                    : null);
                            break;

                        case DataConnectionMode.Database:
                            SimpleIoc.Default.Register<IDataService, DbClient>();
                            break;
                    }
                }

            }
        SimpleIoc.Default.Register<LoginViewModel>();
        SimpleIoc.Default.Register<ManageConfigurationsViewModel>(); 
```

DbClient**和 DataServiceClient 都实现了 IDataservice**。

如果配置文件中已经指定了默认连接，则当视图模型定位器在应用程序启动时注册视图模型时，上述代码可以正常工作。即 IDataservice 使用默认连接配置注册。

现在真正的问题是当用户选择连接配置时，该连接配置成为默认配置，我希望 MVVM Light 取消注册以前的数据服务并注册新选择的服务，并使用它来连接数据。

我在登录按钮单击中尝试了以下代码，但失败了:(

```
void SignInButtonClick()
{
        if(SimpleIoc.Default.IsRegistered<IDataService>())
                                    SimpleIoc.Default.Unregister<IDataService>();

    switch (DefaultConnectionConfiguration.ConnectionMode)
                            {
                                case DataConnectionMode.WcfService:
                                    var wcfServiceConfiguration = (WcfServiceConfiguration)CurrentConnectionConfiguration;
                                    SimpleIoc.Default.Register<IDataService>(
                                        () =>
                                        wcfServiceConfiguration != null
                                            ? new DataServiceClient("WSHttpBinding_IDataService",
                                                                         wcfServiceConfiguration.EndpointUrl)
                                            : null);
                                    break;

                                case DataConnectionMode.Database:
                                    SimpleIoc.Default.Register<IDataService, DbClient>();
                                    break;
                            }
//perform authentication process
} 
```

**更新代码**

```
public class ViewModelLocator
    {
        public ViewModelLocator()
        {
            ServiceLocator.SetLocatorProvider(() => SimpleIoc.Default);

            if (ViewModelBase.IsInDesignModeStatic)
            {
                // Create design time view services and models
                if (!SimpleIoc.Default.IsRegistered<IDataService>())
                    SimpleIoc.Default.Register<IDataService, MockDataClient>();
            }
            SimpleIoc.Default.Register<LoginViewModel>();
        }

        public LoginViewModel LoginViewModel
        {
            get
            {
                return ServiceLocator.Current.GetInstance<LoginViewModel>();
            }
        }

        public static void Cleanup()
        {
            // TODO Clear the ViewModels
            ServiceLocator.Current.GetInstance<LoginViewModel>().Cleanup();
        }
    }

public class LoginViewModel : ViewModelBase
    {
        ICometDataService service;

    #region Constructor
        public LoginViewModel()
        {

        }
        public LoginViewModel(IDataService dataService)
            : base(dataService)
        {
            service = dataService;
        }

        #endregion
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:44:53.650

我只是删除：

```
if (!SimpleIoc.Default.IsRegistered<IDataService>())
                {
                    switch (DefaultConnectionConfiguration.ConnectionMode)
                    {
                        case DataConnectionMode.WcfService:
                            var wcfServiceConfiguration = (WcfServiceConfiguration)CurrentConnectionConfiguration;
                            SimpleIoc.Default.Register<IDataService>(
                                () =>
                                wcfServiceConfiguration != null
                                    ? new DataServiceClient("WSHttpBinding_IDataService",
                                                                 wcfServiceConfiguration.EndpointUrl)
                                    : null);
                            break;

                        case DataConnectionMode.Database:
                            SimpleIoc.Default.Register<IDataService, DbClient>();
                            break;
                    }
                } 
```

从您的 ViewModelLocator 并将 SignInButtonClick 中的代码更改为：

```
void SignInButtonClick()
{

    switch (DefaultConnectionConfiguration.ConnectionMode)
                            {
                                case DataConnectionMode.WcfService:
                                    var wcfServiceConfiguration = (WcfServiceConfiguration)CurrentConnectionConfiguration;
                                    SimpleIoc.Default.Register<IDataService>(
                                        () =>
                                        wcfServiceConfiguration != null
                                            ? new DataServiceClient("WSHttpBinding_IDataService",
                                                                         wcfServiceConfiguration.EndpointUrl)
                                            : null);
                                    break;

                                case DataConnectionMode.Database:
                                    SimpleIoc.Default.Register<IDataService, DbClient>();
                                    break;
                            }
//perform authentication process
} 
```

通过这样做，您只需注册一次服务，就可以保证您注册的是正确的接口。

# iphone - 将文本框数据写入 Plist

> ID：13738054
> 
> 赞同：2
> 
> 时间：2012-12-06T06:22:43.310
> 
> 标签：iphone, ios, ipad, uitextfield, plist

我有两个文本框，当我按下提交时，我想将此文本框的数据存储到 Plist 中。到目前为止我已经完成了编写代码，但问题是如何编写文本框的数据？就像我有 textbox1 和 textbox2 。想将数据存储到 plist

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"Comments" ofType:@"plist"];
NSMutableArray *plistArray = [[NSMutableArray alloc] initWithContentsOfFile:filePath];

NSMutableDictionary *newComment = [NSMutableDictionary dictionary];
[newComment setValue:commentTitle.text forKey:@"title"];
[newComment setValue:comment forKey:@"comment"];

[plistArray addObject:newComment];
[plistArray writeToFile:filePath atomically:NO]; 
```

请建议我正确的方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T06:35:50.803

让你的文本框是 textbox1 和 textbox2

```
- (IBAction) saveData
{
// get paths from root direcory
NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
// get documents path
NSString *documentsPath = [paths objectAtIndex:0];
// get the path to our Data/plist file
NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"Comments.plist"];

// set the variables to the values in the text fields
self.title = textbox1.text;
self.comment = textbox2.text;

// create dictionary with values in UITextFields
NSDictionary *plistDict = [NSDictionary dictionaryWithObjects: [NSArray arrayWithObjects: title, comment, nil] forKeys:[NSArray arrayWithObjects: @"title ", @"comment", nil]];

NSString *error = nil;
// create NSData from dictionary
NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:plistDict format:NSPropertyListXMLFormat_v1_0 errorDescription:&error];

// check is plistData exists
if(plistData) 
{
    // write plistData to our Data.plist file
    [plistData writeToFile:plistPath atomically:YES];
}
else 
{
    NSLog(@"Error in saveData: %@", error);
    [error release];
  }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:47:52.330

在 plist 中创建一个名为 as 的数组`title` ，然后执行此操作，

```
-(void) SubmitAction {
    NSString *path = [NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *finalPath = [path stringByAppendingPathComponent:@"your_plist_name"];
    NSMutableDictionary *plistDict = [NSMutableDictionary dictionaryWithContentsOfFile:finalPath];
    NSMutableArray *titleArray=[plistDict valueForKey:@"title"];

    [titleArray addObject:textbox1.text];

    [plistDict setValue:titleArray forKey:@"title"];

    [plistDict writeToFile:finalPath atomically:NO];
} 
```

首先尝试一个文本框......确保它会工作......

# c# - 如何让 C# 计时器在创建它的同一线程上执行？

> ID：13738059
> 
> 赞同：5
> 
> 时间：2012-12-06T06:22:50.533
> 
> 标签：c#, .net, multithreading, timer

我想`IMessageFilter`在必须写入 excel 的 Excel 插件上启用。我从[这里](http://blogs.msdn.com/b/andreww/archive/2008/11/19/implementing-imessagefilter-in-an-office-add-in.aspx)举了一个例子，上面写着：

> 消息过滤器是每个线程的，因此我们将此线程注册为消息过滤器（不是创建加载项的主线程 - 因为那是 Excel 的主线程

我的问题是我的系统在计时器过去时写入 excel，这导致从 ThreadPool 线程调用写入方法，该线程`IMessageFilter`由于 excel 无法访问 的`RetryRejectedCall`部分而中断`IMessageFilter`，因为它位于调用者线程上，而不是由生成的执行线程计时器。

*所以，我的问题是：有没有一种方法可以强制计时器的 Elapsed 事件在初始化计时器的同一线程上运行？*

> 编辑：

`IMessageFilter`我的问题是，当它抛出拒绝/忙碌时，我如何捕捉 excel 错误？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T07:48:48.920

您可以使用`Timer.SynchronizingObject`属性来编组在间隔已过时发出的事件处理程序调用。

这里来自[MSDN](http://msdn.microsoft.com/en-us/library/system.timers.timer.synchronizingobject.aspx)：

> 当 Elapsed 事件由可视 Windows 窗体组件（例如按钮）处理时，通过系统线程池访问组件可能会导致异常或可能无法正常工作。通过将 SynchronizingObject 设置为 Windows 窗体组件来避免这种影响，这会导致在创建组件的同一线程上调用处理 Elapsed 事件的方法。

假设您使用的是 WinFrom 并且您正在从主窗体中创建计时器实例：

```
System.Timers.Timer t = new System.Timers.Timer();
t.SynchronizingObject = this;
t.Elapsed += t_Elapsed;
t.Start(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T08:45:04.023

完整答案如下：

问题：将数据写入 excel 的类无法处理来自 excel 的“忙/拒绝”响应消息。

[解决方案：按照此处](http://blogs.msdn.com/b/andreww/archive/2008/11/19/implementing-imessagefilter-in-an-office-add-in.aspx)所述实现`IMessageFilter`接口

`IMessageFilter`定义（来自链接）：

```
namespace ExcelAddinMessageFilter
{
        [StructLayout(LayoutKind.Sequential, Pack = 4)]
        public struct INTERFACEINFO
        {
            [MarshalAs(UnmanagedType.IUnknown)]
            public object punk;
            public Guid iid;
            public ushort wMethod;
        }

        [ComImport, ComConversionLoss, InterfaceType((short)1),
        Guid("00000016-0000-0000-C000-000000000046")]
        public interface IMessageFilter
        {
            [PreserveSig, MethodImpl(MethodImplOptions.InternalCall,
                MethodCodeType = MethodCodeType.Runtime)]
            int HandleInComingCall([In] uint dwCallType, [In] IntPtr htaskCaller,
                [In] uint dwTickCount,
                [In, MarshalAs(UnmanagedType.LPArray)] INTERFACEINFO[]
                lpInterfaceInfo);

            [PreserveSig, MethodImpl(MethodImplOptions.InternalCall,
                MethodCodeType = MethodCodeType.Runtime)]
            int RetryRejectedCall([In] IntPtr htaskCallee, [In] uint dwTickCount,
                [In] uint dwRejectType);

            [PreserveSig, MethodImpl(MethodImplOptions.InternalCall,
                MethodCodeType = MethodCodeType.Runtime)]
            int MessagePending([In] IntPtr htaskCallee, [In] uint dwTickCount,
                [In] uint dwPendingType);
        }
    } 
```

`IMessageFilter`我的课程的实施部分（见链接）：

```
#region IMessageFilter Members

        int ExcelAddinMessageFilter.IMessageFilter.
            HandleInComingCall(uint dwCallType, IntPtr htaskCaller, uint dwTickCount, ExcelAddinMessageFilter.INTERFACEINFO[] lpInterfaceInfo)
        {
            // We're the client, so we won't get HandleInComingCall calls.
            return 1;
        }

        int ExcelAddinMessageFilter.IMessageFilter.
        RetryRejectedCall(IntPtr htaskCallee, uint dwTickCount, uint dwRejectType)
        {
            // The client will get RetryRejectedCall calls when the main Excel
            // thread is blocked. We can handle this by attempting to retry
            // the operation. This will continue to fail so long as Excel is 
            // blocked.
            // As an alternative to simply retrying, we could put up
            // a dialog telling the user to close the other dialog (and the
            // new one) in order to continue - or to tell us if they want to
            // abandon this call
            // Expected return values:
            // -1: The call should be canceled. COM then returns RPC_E_CALL_REJECTED from the original method call.
            // Value >= 0 and <100: The call is to be retried immediately.
            // Value >= 100: COM will wait for this many milliseconds and then retry the call.
            return 1;
        }

        int ExcelAddinMessageFilter.IMessageFilter.
            MessagePending(IntPtr htaskCallee, uint dwTickCount, uint dwPendingType)
        {
            return 1;
        }

        #endregion 
```

定义和实现接口后，我设置了`IMessageFilter`一个 STA`Thread`和一个`Timers.Timer`如下：

线：

```
thread = new Thread(WriteToExcel);
thread.SetApartmentState(ApartmentState.STA); 
```

定时器：

```
timer = new System.Timers.Timer();
timer.Interval = 2000;
timer.Elapsed += new ElapsedEventHandler(StartSTAThread_Handler); 
```

其中`StartSTAThread_Handler`定义为：

```
void StartSTAThread_Handler(object source, ElapsedEventArgs e)
{
     thread.Start();
     thread.Join();
     thread = null;
} 
```

该线程调用我用来写入 Excel 的方法，并使用上述`IMessageFilter`接口处理被拒绝的消息。我要做的最后一件事是完全限定 excel OM 引用，即；代替：

```
Excel.Range rng = app.ActiveSheet.Range["range_name"];
rng.Copy(); // ERRROR: message filter's RetryRejectedCall is NOT called 
```

我必须使用完全限定的引用：

```
app.ActiveSheet.Range["range_name"].Copy // OK: calls RetryRejectedCall when excel dialog etc is showing 
```

[虽然这似乎符合我的需要，但它似乎与此处](https://stackoverflow.com/questions/158706/how-to-properly-clean-up-excel-interop-objects)另一张海报描述的“两点规则”相矛盾......

# android - “平均访问时长”和“参与度”指标在移动应用上是否准确？

> ID：13738062
> 
> 赞同：0
> 
> 时间：2012-12-06T06:23:06.817
> 
> 标签：android, ios, google-analytics, flurry

我们在我们的 iOS 和 Android 应用程序上使用用于 Google Analytics 的移动 SDK。对我们 API 服务器的每次调用都伴随着带有适当标签的 GA 调用。

到目前为止，分析数据看起来还不错，但是我们在数据中看到了以下异常：

“平均访问时间”为 30 分钟。对于移动应用程序来说，这似乎很长。在 Engagement 下，12% 的访问和 22.56% 的浏览量是 1800 秒以上。同样，这似乎异常长。我们在 GA 电话中是否有任何会影响这一点的错误？我可以确认我们只是在用户直接与应用程序交互时才拨打电话（无论如何你不能在 iOS 中拨打后台电话）。或者这是 GA 的一个已知问题？我们很快将与几位投资者会面，需要能够提取准确的分析数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:29:57.447

在 Flurry 上，会话长度被简单地定义为开始应用程序事件和结束应用程序事件之间的时间长度，可能因平台而异。在某些情况下，包括应用程序崩溃，无法记录结束时间，因此会话长度未知。这些实例不包括在平均和中值会话长度计算中。如果您不遵循建议的做法，会话的长度可能会根据您将 SDK 集成到应用程序中的方式而有所不同。（全面披露：我在 Flurry 的支持团队工作）

# wordpress - 我可以为 Wordpress 的 add_action() 的 Action Hook 参数使用变量而不是字符串吗？

> ID：13738063
> 
> 赞同：3
> 
> 时间：2012-12-06T06:23:23.993
> 
> 标签：wordpress

我需要在 foreach 循环中动态构建几个 add_action() 函数，该循环遍历用户可能创建的各种自定义分类法。

操作挂钩的名称是“category_add_form_fields”，但挂钩的“类别”部分会随自定义分类的每个名称而变化。

**示例 1** 因此，如果插件用户创建了一个名为“Colors”的分类法，那么钩子将是“colors_add_form_fields”并且 add_action 看起来像：

```
add_action('colors_add_form_fields', 'myFunction',10,2); 
```

**示例 2** 或者，如果插件用户创建了一个名为“sizes”的分类法，那么钩子将是“sizes_add_form_fields”，而 add_action 将是：

```
add_action('sizes_add_form_fields', 'myFunction',10,2); 
```

由于显然无法提前知道每个用户将为其自定义类别命名什么，我使用了一个 foreach 循环，它将每个类别名称存储为 $customcat，我将其附加到字符串“_add_form_fields”并存储结果字符串在 $final 中用于 add_action() 函数

问题是，尽管我尝试了各种方法将此变量插入到 add_action() 中，但它似乎无法识别它们。

我搜索了谷歌，但找不到任何东西，甚至没有人问同样的问题。

有谁知道我应该做什么？或者，如果变量根本无法使用，有没有其他方法可以使用 PHP 实现我的目标？

这些是我迄今为止尝试过的一些排列...

```
$final = $customcat . "_add_form_fields"; 
$final = "'" . $customcat . "_add_form_fields'"; 

add_action( $final, 'my_function', 10, 2);
add_action( "$final", 'my_function', 10, 2);
add_action( strval($final), 'my_function', 10, 2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:50:10.710

使用 a 作为钩子名称应该没有问题`$variable`。如果这对您不起作用 - 检查您的钩子是否已设置，或者 arg. 数字实际上是 2，或者发射顺序或除此特定问题之外的任何其他问题..

# objective-c - 单击自定义删除按钮删除 UITableViewCell

> ID：13738070
> 
> 赞同：1
> 
> 时间：2012-12-06T06:24:31.677
> 
> 标签：objective-c, ios

我基本上有一个 UITableViewCell 类，在使用 Pan Gesture 滑动单元格时会出现一个自定义删除按钮。

像这样的东西。_delBtn 是我的删除按钮。单击它应该删除 TableCell。请帮助我

```
- (void)handlePan:(UIPanGestureRecognizer *)recognizer
  {

   CGPoint translation = [recognizer translationInView:self];
   recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x, recognizer.view.center.y);
   [recognizer setTranslation:CGPointMake(0, 0) inView:_baseView];

if (recognizer.state == UIGestureRecognizerStateEnded) 
{

    translation.y = 0;
    CGPoint velocity = [recognizer velocityInView:_baseView];
    CGFloat magnitude = sqrtf((velocity.x * velocity.x));
    CGFloat slideMult = magnitude / 1000;
    NSLog(@"magnitude: %f, slideMult: %f", magnitude, slideMult);

    float slideFactor = 0.1 * slideMult;

    velocity.x = velocity.x + 1000;
    velocity.y = 0;

    CGPoint finalPoint = CGPointMake(recognizer.view.center.x + (velocity.x * slideFactor),
                                     recognizer.view.center.y + (velocity.y * slideFactor));
    finalPoint.x = MIN(MAX(finalPoint.x, 0), _baseView.bounds.size.width);
    finalPoint.y = MIN(MAX(finalPoint.y, 0), _baseView.frame.size.height);

    [UIView animateWithDuration:slideFactor*2 delay:0 options:UIViewAnimationOptionCurveLinear animations:^{

        recognizer.view.center = finalPoint;

    } completion:nil];

    if (finalPoint.x >= 195) 
    {

        _delBtn = [[UIButton alloc] initWithFrame:CGRectMake(5, 10, 60, 60)];
        [_delBtn setImage:[UIImage imageNamed:@"delBtn3.jpg"] forState:UIControlStateNormal];
        [_delBtn addTarget:self action:@selector(deleteClicked) forControlEvents:UIControlEventTouchUpInside];
        _delBtn.hidden = NO;
        [_baseView insertSubview:_delBtn atIndex:0];
        _delBtn.alpha = 0;
        [UIView animateWithDuration:slideFactor delay:0.4 options:UIViewAnimationOptionCurveLinear animations:^{

            recognizer.view.center = finalPoint;

        } completion:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:19:49.267

在您的`deleteClicked`方法中，您需要`UITableView`删除单元格。单元格需要引用`UITableView`包含它的单元格以及它在表中表示的行和部分的知识。

`UITableView`可以使用该属性获取父级`self.superview`，但将弱引用存储在您自己的自定义属性中可能更安全，或者更好的是，存储对`UIViewController`管理`UITableView`. 这样，您可以简单地在控制器中创建一个方法，您可以调用该方法来删除单元格。

如果您还没有在单元格类的其他自定义属性中访问此信息，您还需要创建一个属性来存储`NSIndexPath`您当前在表中表示的信息。当您最初创建或 deque 时，您将在方法`UITableViewCell`中设置这些属性。`UITableViewDataSource``tableView:cellForRowAtIndexPath:``UITableViewCell`

在您的`deleteClicked`方法中，您可以调用您的方法，`UIViewController`例如，将需要删除的单元格的`deleteCellAtIndexPath:`传递给它。`NSIndexPath`

在此`deleteCellAtIndexPath:`，您将做两件事。`UITableView`首先，通过删除要删除的单元格的数据对象来修改您的支持数据源。这可能是某种`NSMutableArray`.

删除支持数据后，调用 上的方法`deleteRowsAtIndexPaths:withRowAnimation:`，`UITableView`将其`NSIndexPath`作为唯一的对象传递给`NSArray`. 然后应该删除您的单元格，并按照`UITableViewRowAnimation`参数指定的方式对其进行动画处理。有关这些方法的更多信息，请参阅[`UITableView`文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UITableView)。

# javascript - 将区域从可点击更改为“不可点击”

> ID：13738072
> 
> 赞同：1
> 
> 时间：2012-12-06T06:24:42.123
> 
> 标签：javascript, jquery

我正在编写一个基于 javascript 的井字游戏。

我想做到这一点，以便在用户完成游戏后，没有任何开放空间可以再次点击，因此使他们无法继续将 x 添加到板上。

目前我开始使用 JQuery 来制作网格点，如下所示：

```
 $('#upleft').click(function() 
```

其余的都是正确的，但这就是我理解它可以点击的原因。

每个空间在具有上面指定的唯一 id 的同时也有一个 tictactoe 类，所以我想通过这样做来关闭“可点击性”：

```
 $(document).off("click", ".tictactoe"); 
```

但是，它似乎不起作用。有什么建议么？我对其他功能等持开放态度。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:28:03.803

尝试使用

```
$('.tictactoe').off("click"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:30:08.663

`off`您应该在元素上调用该方法。

```
$('#upleft').on('click', function() { });
//...
$('.tictactoe').off('click'); 
```

# python - Python 存储变量

> ID：13738073
> 
> 赞同：-1
> 
> 时间：2012-12-06T06:25:00.773
> 
> 标签：python, variables, store

我想将整数存储为速率、剩余、电池和千瓦时。请帮助修改它，以便我可以存储变量并在代码底部执行方程。

```
Rate = 0
while (Rate < 0.5) or (Rate > 2.0):
    Rate = int(raw_input("Enter Desired Rate of Charge: ")) #User will be prompted to enter the charge rate of the system
    if Rate < 0.5:
    #If the charge rate entered is less than 0.5 kWhs
        print "Charge Rate Too Low: Please consider revision" #Tells the user the rate is too low
    elif Rate > 2.0:
    #Also, if the charge rate entered is greater than 2.0 kWhs...
        print "Charge Rate Too High: Please consider revision" #Tells the user the rate is too high
    else:
    #Otherwise, for any number entered between the bounds of 0.5 and 2.0 kWhs...
        print '\n' #Page break for new conditions.

import random
Remaining = random.randint(0, 80) #Simulates remaining charge left over from the last use of the car. Defines the variable as "Remaining"

Battery = 0
while (Battery <=0) or (Battery >=80):
    Battery = int(raw_input("Enter Current Battery Life: "))
    #User will be prompted to enter the current battery level of the car. Defines that variable as "Battery"
    if Battery < 0:
    #If user input level is less than 0 kWh...
        print "Insufficient Entry (Too Low): Please consider revision" # Tells the user that the battery level entered is too low
    elif Battery > 80:
    #Also, if the user input level is greater than 80 kWh...
        print "Insufficient Entry (Too High): Please consider revision" # Tells the user that the battery level entered is too high
    kWh = 80 - Battery - Remaining
    print '\n' #Page break
    if kWh <=0:
        print "Battery Fully Charged!"
        print "There were " Remaining, " kWhs remaing from the last charge. 0 kWhs were charged."
        print "Buckle up! The rewards of the journey far outweigh the risk of leaving the garage!"
    else:
        print "Battery Fully Charged!"
        print "There were " Remaining, " kWhs remaing from the last charge. " kWh, "kWhs were added to recharge battery."
        print "Buckle up! The rewards of the journey far outweigh the risk of leaving the garage!" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:26:50.060

代替

```
else:
    while Battery >=80:
        kWh=80-'Battery'-'Remaining'
        print kWh, "kWh" 
```

只是简单

```
kWh = 80 - Battery - Remaining
print(kWh, "kWh") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:09:25.300

如果您告诉我们问题出在哪里（完全追溯错误），我们本可以立即为您提供帮助并告诉您

```
print "There were " Remaining, " kWhs remaing from the last charge. 0 kWhs were charged."
print "There were " Remaining, " kWhs remaing from the last charge. " kWh, "kWhs were added to recharge battery." 
```

问题是：您缺少`,`before`Remaining`和 before `kWh`。

采用

```
print "There were", Remaining, "kWhs remaing from the last charge. 0 kWhs were charged."
print "There were", Remaining, "kWhs remaing from the last charge. ", kWh, "kWhs were added to recharge battery." 
```

一切都会好起来的。

如果您遇到类似的错误，请查看那里发生的情况并纠正它，直到它运行为止。

顺便说一句：您重复代码。最好做

```
print "Battery Fully Charged!"
print "There were", Remaining, "kWhs remaing from the last charge. ", # notice the ,
if kWh <=0:
    print "0 kWhs were charged."
else:
    print "kWh, "kWhs were added to recharge battery."
print "Buckle up! The rewards of the journey far outweigh the risk of leaving the garage!" 
```

（而且我不确定是否只写`kWh`而不是更好`kWhs`。单位缩写有复数形式吗？我不这么认为......）

# java - 在休眠会话上设置保存点

> ID：13738077
> 
> 赞同：0
> 
> 时间：2012-12-06T06:25:15.957
> 
> 标签：java, hibernate, session, savepoints

我是休眠的新手。我的项目需要以下场景。

例如，我正在插入 20 条记录数据类`TestHBDemo`。

```
hbsession = HibernateUtil.getCurrentSession();
tx = hbsession.beginTransaction();
for(int index = 0; index < 20; ++index){
    TestHBDemo obj = new TestHBDemo();
    //setting data

    hbsession.save(obj);
}
tx.commit(); 
```

如何通过省略中间记录来仅插入 1 - 10 和 15 - 20 条记录

```
hbsession = HibernateUtil.getCurrentSession();
tx = hbsession.beginTransaction();
for(int index = 0; index < 20; ++index){
    TestHBDemo obj = new TestHBDemo();
    //setting data

    hbsession.save(obj);

    if(somecondition)
    // setting save points
}
//omitting unnecessary insertions
tx.commit(); 
```

请最好在hibernate中为我提供解决方案，而不是使用javax.sql。

谢谢.....

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-06T06:58:14.690

我通过使用以下代码实现了它：

```
hbsession = HibernateUtil.getCurrentSession();
    tx = hbsession.beginTransaction();
    for(int index = 0; index < 20; ++index){

    TestHBDemo obj = new TestHBDemo();
    //setting data

        hbsession.save(d5campaingObj);
        if(index == 9){
            hbsession.flush();
            hbsession.clear();
        }
        if(index == 14){
            hbsession.clear();               
        }
    }
tx.commit(); 
```

但我正在等待专家提供更好的方法。谢谢....

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T07:09:25.723

```
hbsession = HibernateUtil.getCurrentSession();
tx = hbsession.beginTransaction();
for(int index = 0; index < 20; ++index){
    TestHBDemo obj = new TestHBDemo();
    //setting data
    **if(index>10 && inxex<15)
        continue**;
    hbsession.save(obj);
    // setting save points
}
tx.commit(); 
```

# spring - 我们可以在 tomcat 服务器上开发一个 spring 应用程序并将其部署在其他一些应用程序服务器上吗？

> ID：13738079
> 
> 赞同：3
> 
> 时间：2012-12-06T06:26:00.203
> 
> 标签：spring, tomcat, application-server

我们可以在 tomcat 服务器上开发一个 struts+spring+hibernate 应用程序，然后将其部署在说 Web Sphere 或 Web 逻辑应用程序服务器上吗？

如果可以做到，请解释部署过程？如果这不能完成，请告诉我原因？

我是使用应用程序服务器的新手。解释将非常有帮助。

谢谢，user181333

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T07:38:50.797

大多数时候，Spring 与应用程序服务器无关（但是，人们[总是](http://blog.springsource.org/2010/10/19/spring-3-on-a-java-ee-6-server/)，[总是在](http://www.theserverside.com/discussions/thread.tss?thread_id=61023)争论这样的事情）。这意味着您在不同的容器中部署 Web 应用程序应该没有问题。

无论如何，可能会出现一些可移植性问题。我唯一知道的是[类路径加载资源](http://static.springsource.org/spring/docs/3.1.3.RELEASE/spring-framework-reference/htmlsingle/spring-framework-reference.html#resources-classpath-wildcards)，因为类加载的 servlet 容器实现。另一个是如果您注册了[TomcatInstrumentableClassLoader](http://static.springsource.org/spring/docs/3.1.3.RELEASE/javadoc-api/org/springframework/instrument/classloading/tomcat/TomcatInstrumentableClassLoader.html)或类似的东西。也许[JtaTransactionManager 查找](http://static.springsource.org/spring/docs/3.1.3.RELEASE/spring-framework-reference/htmlsingle/spring-framework-reference.html#transaction-application-server-integration)。

有关部署 Web 应用程序的确切详细信息，请参阅特定应用程序服务器的文档。

# objective-c - NSDictionary 按存储为值的对象的属性排序

> ID：13738082
> 
> 赞同：6
> 
> 时间：2012-12-06T06:26:11.673
> 
> 标签：objective-c, ios

我将数据存储在`NSMutableDictionary`存储 Web 服务接收到的数据中。

我想以 alpha 顺序显示数据，但我们知道 Dictionary 以自己的方式存储数据，所以我得到了 iOS 5 和 iOS 6 的不同顺序。iOS 5 很好，但在 iOS 6 中它改变了顺序。

我将 int 键和对象存储为值。

对象包含 ID、名称和描述。

```
EX:
  key  value
  1 -  (12,bhgjksd,kijdh)
  6 -  (13,kjfd,ikjk)
  2 -  (14,ljiuhbdf,dsjhfj) 
```

如何按 Object.Name 属性对我的字典进行排序。或根据 Object.Name 排序顺序获取密钥。

我不想按键排序我想按 Object.Name 排序，它作为对象存储在值部分中。

欢迎任何形式的帮助.....提前谢谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T06:54:16.547

试试这个，

```
NSArray *sortedKeys = [dict keysSortedByValueUsingComparator: ^(id obj1, id obj2) {

     return (NSComparisonResult)[obj1.name compare:obj2.name];;
}]; 
```

您将获得`sortedKeys`数组中的所有键，按`object.name`属性顺序排序。您可以使用这些键从字典中获取值作为`[dict valueForKey:[sortedKeys objectAtIndex:i]]`. 有关更多详细信息，请[查看苹果文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/keysSortedByValueUsingComparator:)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T07:00:32.063

```
NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"Object.Name" ascending:YES];
[items sortUsingDescriptors:[NSArray arrayWithObjects:descriptor,nil]]; 
```

还，

```
NSArray *ordered = [myDictionary keysSortedByValueUsingComparator:^NSComparisonResult(id obj1, id obj2){
    return [obj1.name compare:obj2.name];
}]; 
```

# r - 如何从第二个较小的数据框中替换数据框中的值？

> ID：13738086
> 
> 赞同：0
> 
> 时间：2012-12-06T06:26:32.403
> 
> 标签：r, replace, dataframe

我对 R 比较陌生，我对数据框有疑问。我有一个很长的数据框（df1），其中包含一些坐标 xy 和值 z。我有一个较短的数据框（df2），具有相同的列但行数较少。当 df2 中的 xy 相等时，我想替换 df1 中的值。

```
x = c(1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4) 
y = c(1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4)
z = c(8, 5, 3, 1, 2, 6, 8, 5, 3, 2, 8, 4, 4, 6, 2, 1) 
df1 = data.frame(x, y, z)      

x1=c(1,3,4)
y1=c(2,1,4)
z1=c(58,37,23)

df2=data.frame(x1,y1,z1)
names(df2) <- c("x", "y", "z") 
```

我认为我可以将 ifelse 函数用作：

```
df1$znew<-ifelse((df1[,1]== df2[,1])&(df1[,2]==df2[,2]), df2[,3], df1[,3]) 
```

但这两个物体的尺寸不一样。

我尝试使用循环，因此它分析每一行以比较 x 和 y，然后决定使用什么 z，但我无法使其工作。

最后，我想要一个带有新变量 z 的数据框来比较这些值并证实它确实改变了这些值。我的最终数据框如下所示：

```
 znew = c(8,58,3,1,2,6,8,5,37,2,8,4,4,6,2,23) 
```

我真的很感激任何帮助，如果其他人发布了类似的问题，我很抱歉，我整天都在试图弄清楚，但我找不到任何适合我的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:35:24.353

假设这两个数据框实际上具有相同的列名（可能只是您的问题中的一个错字），您可以这样做`merge`：

```
tmp <- merge(df1,df2,all.x = TRUE,by = c('x','y'))
tmp$z.x[!is.na(tmp$z.y)] <- tmp$z.y[!is.na(tmp$z.y)]
> tmp
   x y z.x z.y
1  1 1   8  NA
2  1 2   4   4
3  1 3   3  NA
4  1 4   1  NA
5  2 1   2  NA
6  2 2   6  NA
7  2 3   8  NA
8  2 4   5  NA
9  3 1   4   4
10 3 2   2  NA
11 3 3   8  NA
12 3 4   4  NA
13 4 1   4  NA
14 4 2   6  NA
15 4 3   2  NA
16 4 4   3   3 
```

然后只需删除额外的列并重命名这些列。

# .net - 如何在 PowerShell 中删除所有导入的模块？

> ID：13738087
> 
> 赞同：6
> 
> 时间：2012-12-06T06:26:34.600
> 
> 标签：.net, powershell, module

我想在导入之前删除所有导入的模块，这样我就可以通过覆盖内存中的模块来获得新的模块。

如何在 PowerShell 中删除所有导入的模块？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T06:29:44.870

这应该这样做：

```
get-module | Remove-Module 
```

这也删除了`$profile`.

[更多关于这个](http://technet.microsoft.com/en-us/magazine/ff642467.aspx)

# android - 使用 mupdf n android 将 PDF 转换为位图图像

> ID：13738091
> 
> 赞同：5
> 
> 时间：2012-12-06T06:26:53.040
> 
> 标签：android, pdf, mupdf

我在我的 android 应用程序中使用 mupdf 库来查看 pdf 文件。谁能告诉我如何使用 mupdf 库获取 pdf 每一页的位图图像？提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T07:26:55.213

我找到了生成位图的解决方案。

```
ThumbnailsActivity.mBitmapList=new ArrayList<Bitmap>();
                for(int i=0;i<core.countPages();i++){
                     Bitmap bitmap=core.drawPage(i, 200, 200, 0, 0, 200, 200);
                     if(bitmap!=null){
                         ThumbnailsActivity.mBitmapList.add(bitmap);
                     }
                } 
```

我希望这可以帮助别人。谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T05:21:00.313

use function in `MUPDFcore.class`,it is called `drawPage(int page, int PDF width,int PDF height, 0,0,int bitmap width,int bitmap height)`

This function return bitmap image. 1st parameter is the page that will be rendered.

The 2nd and 3rd parameter are the size of PDF.

The 4th and 5th parameter are the beginning of the bitmap position to be filled with PDF rendered image (this is assumption, because there is no exact documentation regarding these parameters)

THe 6th and 7th parameter are the bitmap size that will be filled with PDF rendered image.

I have already done it within the sample project given by them. Now I'm trying to use it in another project but I still have difficulties.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-07T19:18:18.790

该库似乎已更新，并且如果调用 drawPage() 则不会渲染图像，但如果我们提供 updatePage() 则可以正常工作

从示例源代码中找到下面的片段

```
//Activity onCreate()

int x = Utils.getScreenSize(this)[0];
int y = Utils.getScreenSize(this)[1];

final ImageView imageView = (ImageView) findViewById(R.id.holderimageview); 
final Bitmap mSharedHqBm = Bitmap.createBitmap(x,y, Bitmap.Config.ARGB_8888);

new CancellableAsyncTask<Void, Void>(getDrawPageTask(mSharedHqBm, x,y, 0, 0, x, y)) {

        @Override
        public void onPreExecute() {
            imageView.setImageBitmap(null);
            imageView.invalidate();

            // Show some imageholder/spinner/progress etc.
        }

        @Override
        public void onPostExecute(Void result) {
            imageView.setImageBitmap(mSharedHqBm);
            imageView.invalidate();
        }
    }

// method in activity
protected CancellableTaskDefinition<Void, Void> getDrawPageTask(final Bitmap bm, final int sizeX, final int sizeY, final int patchX, final int patchY, final int patchWidth, final int patchHeight) { return new MuPDFCancellableTaskDefinition<Void, Void>(core) {
        @Override
        public Void doInBackground(MuPDFCore.Cookie cookie, Void ... params) {
            // Workaround bug in Android Honeycomb 3.x, where the bitmap generation count
            // is not incremented when drawing.
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB &&                       Build.VERSION.SDK_INT < Build.VERSION_CODES.ICE_CREAM_SANDWICH)                 bm.eraseColor(0);
            core.updatePage(bm, somepagenumber, sizeX, sizeY, patchX, patchY, patchWidth, patchHeight, cookie);
            return null;
            }
        };
} 
```

# android - Android - 突出显示按钮

> ID：13738095
> 
> 赞同：0
> 
> 时间：2012-12-06T06:27:17.947
> 
> 标签：android, button, border, drawable

我有几个按钮，我只想在边框处突出显示。

也就是说，我希望按钮的边框在执行某些操作时以特定颜色发光。如何以编程方式更改边框？

可以用drawables吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:30:16.880

您可以有两个drawable，一个用于选定状态，一个用于正常状态，请通过以下链接：

[StateListDrawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:32:21.217

见这里：http: [//developer.android.com/reference/android/widget/ImageButton.html](http://developer.android.com/reference/android/widget/ImageButton.html)

还有这里：[http](http://groups.google.com/group/android-developers/tree/browse_frm/thread/1906f24707594f67/17322a04f7af1a5b) : //groups.google.com/group/android-developers/tree/browse_frm/thread/1906f24707594f67/17322a04f7af1a5b 罗曼盖伊的回答：

在 res/drawable 中，创建一个名为 mybutton_background.xml 的文件，并在其中放入如下内容：

```
<?xml version="1.0" encoding="utf-8"?> 
<selector xmlns:android="http://schemas.android.com/apk/res/android"> 
    <item android:state_focused="true" android:state_pressed="false" 
android:drawable="@drawable/button_background_focus" /> 
    <item android:state_focused="true" android:state_pressed="true" 
android:drawable="@drawable/button_background_pressed" /> 
    <item android:state_focused="false" android:state_pressed="true" 
android:drawable="@drawable/button_background_pressed" /> 
    <item android:drawable="@drawable/button_background_normal" /> 
</selector> 
```

然后将此drawable设置为按钮的背景

```
android:background="@drawable/mybutton_background" 
```

# jquery - jquery将值设置为select的null选项

> ID：13738099
> 
> 赞同：0
> 
> 时间：2012-12-06T06:27:49.503
> 
> 标签：jquery

如何为选项的空值或空值设置默认值：

HTML：

```
<select name="master_id" id='master_id' >
    <option value="">  -   -   -   </option> 
```

或者

```
<select name="master_id" id='master_id' >
    <option>  -   -   -   </option> 
```

[演示](http://jsfiddle.net/didierg/cL5NH/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:08:07.507

我找到了：

```
<select name="master_id" id='master_id' >
    <option>  -   -   -   </option> 
```

查询

```
$('#test option:not([value])').prop('selected', true) 
```

# mysql - MySQL Query 有几个“for each”

> ID：13738104
> 
> 赞同：1
> 
> 时间：2012-12-06T06:28:06.693
> 
> 标签：mysql, sql

我有这张桌子：

```
idTransactions  idCampaignsList idMemberCard    amountOriginal  amountFinal   dateTransaction
1   2   1   50.00   100.00          2012-10-31 12:45:41
2   3   1   0.00    -50.00          2012-10-31 12:47:25
3   2   2   255.00  255.00          2012-10-31 17:19:07
4   1   2   95.00   95.00           2012-11-02 20:38:36
5   3   2   0.00    -400.00         2012-11-02 20:39:50
24  1   4   10.00   2.00            2012-11-03 11:16:3 
```

有了这个查询

```
SELECT  SUM(amountOriginal) AS euro,
SUM(amountFinal) AS deducted,
EXTRACT(YEAR_MONTH FROM(dateTransaction)) AS period
FROM transactions 
INNER JOIN campaignsList ON campaignsList.idCampaignsList = transactions.idCampaignsList 
INNER JOIN customers ON customers.idCustomer = campaignsList.idCustomer 
WHERE   customers.idCustomer = 14
        AND
        transactions.idCampaignsList = 2
GROUP BY period
ORDER BY period 
```

我得到这个结果

```
euro             deducted   period
305.00           305.00         201210
14860.46            -22758.50   201211
1845.00         -34710.00   201212 
```

过去 12 个月，“充电”和放电的总和。

现在，idCampaignsList 可能是 1、2，也可能是 500，这取决于我的 idCustomer 有多少“活动”（通过 JOIN 检索）。

我想要一个动态查询，即“对于每个”idCampaignsList，打印我的 amountOriginal 和 amountFinal 的总和。

打算从 previos 表中，我想

```
idCampaignsList    SUM(amountOriginal)   SUM(amountFinal)  period
1                  50                    50                201210
2                  255                   255               201210
2                  95                    -305              201211
4                  10                    2                 201211 
```

因此，对于每个时期，对每个不同的 idCampaignsList 列求和，其中 idCampaignsList 是动态的（SELECT idCampaignsList FROM myOtherTable where idCustomer = 14）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:32:28.170

> 我想要一个动态查询，即“对于每个”idCampaignsList，打印我的 amountOriginal 和 amountFinal 的总和。

我认为`several For each`你的意思是一个`GROUP BY transactions.idCampaignsList`.

尝试将 添加`transactions.idCampaignsList`到列表中，从子句`SELECT`中删除谓词并在子句中列出该列，如下所示：`transactions.idCampaignsList = 2``WHERE``GROUP BY`

```
SELECT  
  transactions.idCampaignsList
  SUM(amountOriginal) AS euro,
  SUM(amountFinal) AS deducted,
  EXTRACT(YEAR_MONTH FROM(dateTransaction)) AS period
FROM transactions 
INNER JOIN campaignsList
        ON campaignsList.idCampaignsList = transactions.idCampaignsList 
INNER JOIN customers 
        ON customers.idCustomer = campaignsList.idCustomer 
WHERE customers.idCustomer = 14
GROUP BY period, transactions.idCampaignsList
ORDER BY period 
```

# c - 从c中的字符缓冲区转换对象

> ID：13738108
> 
> 赞同：-1
> 
> 时间：2012-12-06T06:28:09.763
> 
> 标签：c, casting

谁能解释为什么这段代码无法编译？

**主程序**

```
typedef struct ext2_group_desc
{
    unsigned long bg_block_bitmap;  /* Blocks bitmap block */
    unsigned long bg_inode_bitmap;  /* Inodes bitmap block */
    unsigned long bg_inode_table;       /* Inodes table block */
    unsigned int bg_free_blocks_count;  /* Free blocks count */
    unsigned int bg_free_inodes_count;  /* Free inodes count */
    unsigned int bg_used_dirs_count;    /* Directories count */
    unsigned int bg_pad;
    unsigned long bg_reserved[3];
} group_desc;

int main() {
    char buf[1024];
    group_desc gd;

    gd = (group_desc) buf;

    return(0);
} 
```

**终端**

```
$ bcc -ansi -c test.c
test.c:7.26: error: need scalar or pointer or void
test.c:7.26: error: assignment to/from struct/union of a different type
$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T06:31:06.413

您缺少一些定义`ext2_group_desc`（可能在某些包含的文件中？）。我猜是一些`struct`。然后你可能会编码

```
 gd = *(ext2_group_desc*) buf; 
```

如果要将内存复制`buf`到`gd`结构中。

请阅读一本关于 C 编程的好书。学习 C 需要很多天的工作。

还要启用编译器中的所有警告。

# objective-c - 在 Objective-c 中，我们如何拥有一个范围是整个类（但不包括子类）的变量

> ID：13738109
> 
> 赞同：0
> 
> 时间：2012-12-06T06:28:12.313
> 
> 标签：objective-c, xcode4.5

我创建了大量的 UITableViewCell 子类。每一个都是额外的 BGBaseTableViewCell 类的子类。

当被问及高度时，我认为告诉用户 UITableViewCell 的典型大小是多少会很有用。

一种方法是指定两次。

一次是我在 xib 中设计 UITableViewCell，第二次是我硬编码典型尺寸。

这是一个设计缺陷，因为当我在 xib 中更改内容时，我需要记住更改硬编码的典型大小。

我不想要那个。我想在 xib 中设计我的 UITableViewCell 并且在初始化类时我想存储默认高度。

所有子类的默认高度需要不同。但是，对于该子类的所有实例，它必须相同。

如果我使用简单的 ivar，那么我将不得不为所有实例存储一个默认大小。

如果我使用静态变量，那么 BGBaseTableViewCell 中的静态变量将被它的所有子类使用。

所以我该怎么做？

这就是我现在正在做的事情：

```
static CGFloat defaultHeightSet = 0; //this one is used by all subclasses. I want each subclass have it's own defaultHeightSet, but I want to specify that fact once.

+(void)initialize
{
    BGBaseTableViewCell * typical = [[self alloc]init];
    defaultHeightSet = typical.bounds.size.height;
}
+(CGFloat) defaultHeight
{
    return defaultHeightSet;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:01:26.743

在整个班级中可见但对子班级不可见？您可以为您的 .m 文件尝试此代码：

```
@interface ClassYouNeed ()
static VariableClass* variableVisibleInClassButNotInSubclass;
@end 
```

只需在您的实现附近的类上创建一个“隐藏”类别，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:12:02.713

为什么我没有想到。

使静态变量成为字典并将类名设置为键:)

女士们先生们，各个年龄段的孩子们。Sharen Eayrs 的产品自豪地展示了静态保护的变量：

```
static NSMutableDictionary * defaultHeightDictionary= nil;
static NSMutableDictionary * defaultBoundsDictionary =nil;
//static CGFloat defaultHeightSet = 0;

+(void)initialize
{
    BGBaseTableViewCell * typical = [[self alloc]init];

    if (defaultHeightDictionary==nil) {
        defaultHeightDictionary = [NSMutableDictionary dictionary];
        defaultBoundsDictionary = [NSMutableDictionary dictionary];
    }
    [defaultHeightDictionary setValue:@(typical.bounds.size.height) forKey:NSStringFromClass([self class])];
    CGRect bounds = typical.bounds;

    NSValue * boundsValue = [NSValue valueWithCGRect:bounds];
    [defaultHeightDictionary setValue:boundsValue forKey:NSStringFromClass([self class])];

}
+(CGFloat) defaultHeight
{
    NSNumber * result = [defaultHeightDictionary valueForKey:NSStringFromClass([self class])];
    return result.floatValue;
}

+(CGRect) defaultBounds
{
    NSValue * result = [defaultBoundsDictionary valueForKey:NSStringFromClass([self class])];
    return [result CGRectValue];
} 
```

# ios - opengl es(iphone) 从文件渲染

> ID：13738110
> 
> 赞同：2
> 
> 时间：2012-12-06T06:28:23.820
> 
> 标签：ios, opengl-es, render

对不起我的英语不好

我想显示文件中的视频，其中每像素 4 字节的帧，BRGA，1280x720？

在 mac 上，我只是取出框架并绘制了这个 glDrawPixels，在 Mac 上运行，但在 opengl es 中完全不同。

这是来自mac的代码

```
int pos = 0;
NSData *data = [[NSData alloc] initWithContentsOfFile:@"video.raw"];
glViewport(0,0,width,height);
glLoadIdentity();
glOrtho(0, width, 0, height, -1.0, 1.0);
glPixelZoom(1, -1);
glClear(GL_COLOR_BUFFER_BIT);
//glRasterPos2i(0, height);
glRasterPos2i(0, 0);
glDrawPixels(1280, 720, GL_BGRA, GL_UNSIGNED_BYTE, [data bytes]+pos);
glFinish(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:01:51.080

使用“glTexSubImage2D”将这些数据推送到纹理并渲染纹理。请注意，尽管纹理必须是 2 的幂，因此对于您的情况，您可以制作 (2048, 1024) 但您只能更新 (1280, 720) 部分：

```
CGSize videoSize;
CGSize textureSize;
GLuint dimension = 1;
while (videoSize.width > dimension) {
    dimension <<= 1;
}
textureSize = CGSizeMake(dimension, .0f);
dimension = 1;
while (videoSize.height > dimension) {
    dimension <<= 1;
}
textureSize = CGSizeMake(textureSize.width, dimension);

GLuint texture;
glGenTextures(1, &texture);
glBindTexture(GL_TEXTURE_2D, texture);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, textureSize.width, textureSize.height, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL);

GLfloat textureCoordinates[] = {
    .0f, .0f,
    .0f, videoSize.height/textureSize.height,
    videoSize.width/textureSize.width, .0f,
    videoSize.width/textureSize.width, videoSize.height/textureSize.height
}; 
```

要更新纹理：

```
void *data;
glTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, videoSize.width, videoSize.height, GL_RGBA, GL_UNSIGNED_BYTE, data); 
```

然后画出你的纹理四边形。

# sql - 需要子 sql 选择的总和，但需要子选择中的变量

> ID：13738112
> 
> 赞同：2
> 
> 时间：2012-12-06T06:28:29.083
> 
> 标签：sql, postgresql, jira

我正在为现有软件（Atlassian Jira）构建 SQL QUERY，但无法对数据库进行任何更改。

我们在 Jira 中确实有几个问题（表：jiraissue），它们在单独的表（表：工作日志）中有 0 到 n 个工作日志条目。每个工作日志还具有记录工作的用户的用户 ID，并且该用户是一个或多个用户组的成员。这些问题（表：jiraissue）中的每一个都与另一个问题（在另一个 jira 项目中，但我认为这与非 jira 专家无关）相关联，该问题被称为“成本单位”。

意味着我们想知道每个“成本单位”记录了多少工作。因此，我们需要有一个查询来返回所有“成本单位”和每个用户组在链接问题上记录的时间。最后一点是，“成本单位”是市场，有一个组件可以知道哪些“成本单位”属于一起。因此，要仅显示与报表用户相关的“成本单位”，查询正在使用组件进行选择。

到目前为止我发现的效果很好，但是返回的“成本单位”行与链接问题一样多，但我需要所有链接问题的总和。

我应该能够以某种方式总结子查询的所有结果，但这些似乎是不可能的。我还尝试使用 FROM 之后的子选择语句，但后来我无法使用 jiraissue.id。

这是我的实际查询：

```
SELECT 
  myktr.pkey,
  myktr.summary,
  sum(worklog_dev),
  (SELECT 
    sum(worklog.timeworked) 
  from
    worklog 
  WHERE worklog.issueid = jiraissue.id 
    AND worklog.author IN 
    (SELECT 
      child_name 
    FROM
      CWD_MEMBERSHIP 
    where lower_parent_name = 'jira-team-sdqm')) AS worklog_sdqm,
  (SELECT 
    sum(worklog.timeworked) 
  from
    worklog 
  WHERE worklog.issueid = jiraissue.id 
    AND worklog.author IN 
    (SELECT 
      child_name 
    FROM
      CWD_MEMBERSHIP 
    where lower_parent_name = 'jira-productowner')) AS worklog_pm 
FROM
  component,
  nodeassociation,
  jiraissue AS myktr 
  INNER JOIN issuelink 
    ON (issuelink.source = myktr.id) 
  INNER JOIN jiraissue 
    ON (
      issuelink.destination = jiraissue.id
    ),
  (SELECT 
    sum(worklog.timeworked) AS worklog_dev 
  FROM
    worklog 
  WHERE worklog.issueid = jiraissue.id 
    AND worklog.author IN 
    (SELECT 
      child_name 
    FROM
      CWD_MEMBERSHIP 
    where lower_parent_name = 'jira-developers')) AS worklog_dev_table 
WHERE myktr.pkey IN 
  (SELECT 
    jiraissue.pkey 
  from
    jiraissue,
    project 
  WHERE project.id = jiraissue.project 
    AND project.pkey = 'KTR') 
  AND component.ID = nodeassociation.SINK_NODE_ID 
  and myktr.id = nodeassociation.SOURCE_NODE_ID 
  and nodeassociation.ASSOCIATION_TYPE = 'IssueComponent' 
  and component.cname = 'Project-Component' ; 
```

你对我有什么建议吗？仅供参考：我们正在使用 postgreSQL。

最好的问候，斯特凡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:20:59.750

为了使聚合正常工作，您需要[`GROUP BY`](http://www.postgresql.org/docs/8.0/static/sql-select.html#SQL-GROUPBY)在主选择中使用 - 子句：

```
...
GROUP BY component
... 
```

# mysql - 大数据在成本和性能方面适合频繁写入数据还是频繁读取数据？

> ID：13738116
> 
> 赞同：1
> 
> 时间：2012-12-06T06:28:44.897
> 
> 标签：mysql, google-app-engine, nosql, cloud, bigdata

大数据在成本和性能上是否适合频繁写入数据或频繁读取数据。我说的是 GAE 中的数据存储，其中 write 是一项昂贵的功能，他们还提出了一种混合解决方案，其中 sql 和 nosql 可以在alnongside 中使用。所以在这样的结构中，你更喜欢在 SQL 中存储什么，在 noSQL 中存储什么，区分频繁读取和频繁写入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:57:59.563

“大数据”是一个非常广泛的术语，涉及很多东西。但是，App Engine 数据存储区和其他 NoSQL 数据库针对读取频率远高于写入频率进行了优化，大多数 Web 应用程序就是这种情况。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T11:51:11.170

[Google I/O 2012 - SQL 与 NoSQL：后端之战](http://www.youtube.com/watch?v=rRoy6I4gKWU)

# android - 如何在 Linux 中从 C 调用自定义系统调用

> ID：13738117
> 
> 赞同：0
> 
> 时间：2012-12-06T06:28:48.223
> 
> 标签：android, linux, java-native-interface, system

我已经`sys_mycall`为 ARM 架构实现了一个自定义系统调用。在手机上构建和下载后，日志显示`sys_mycall`正在运行。

我的疑问是：

1.  如何从 C 文件调用此系统调用。
2.  我可以以某种方式从java调用这个系统调用（使用JNI或其他东西）。只需要一些关于如何在 Android 上实现此功能的提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T06:34:57.737

1）看看你应该能够调用你的系统调用并传递你需要/想要的参数`man 2 syscall`。`int syscall(int number, ...)`

2）是的，为此使用JNI。创建一个 JNI 函数来调用您的 C 代码，然后从那里进行系统调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:49:51.437

这可以使用 Android NDK 完成

[这](http://marakana.com/forums/android/examples/49.html)是一个从 Android 应用程序调用 C 代码的示例。

# javascript - 带有剑道 UI 的简单滑块

> ID：13738120
> 
> 赞同：1
> 
> 时间：2012-12-06T06:29:00.767
> 
> 标签：javascript, kendo-ui

我正在尝试使内容滑块正常工作。我们正在使用**Kendo UI**作为我正在开发的应用程序的 UI 框架，我不太热衷于编写自己的**jQuery 滑块**或使用其中一个 self.

我想知道是否有人尝试过使用 Kendo UI 来构建一个简单的内容滑块。喜欢[http://www.sequencejs.com/](http://www.sequencejs.com/)

# ruby-on-rails - 在rails上进行单元测试时，我得到路径的“NameError：未定义的局部变量或方法” - rails 3

> ID：13738122
> 
> 赞同：3
> 
> 时间：2012-12-06T06:29:27.363
> 
> 标签：ruby-on-rails, unit-testing

这是我写为 project_test.rb 的单元测试

```
require 'test_helper'

class ProjectTest < ActiveSupport::TestCase
  test "projects" do
    visit new_project_path
    click_link "new_Project"
    fill_in "Title", :with => "test app"
    fill_in "Project_type", :with => "basic"
    fill_date "Date_fielded" , :with => "2012/12/3"
    fill_in "Owner name", :with => "chetan"
    fill_in "Status", :with => "new"
    fill_in "Brand", :with => "nike"
    click_link "Create_Project"            
 end
end 
```

我将此视为错误

```
1) Error:
test_projects(ProjectTest):
NameError: undefined local variable or method `new_projects_path' for #<ProjectTest:0xaa6a25c>
test/unit/project_test.rb:5:in `block in <class:ProjectTest>' 
```

我尝试更改路径以检查路径中的错误，但这没有用，还检查了 rake 路由以检查路径

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:42:07.410

那应该是`new_project_path`，即`project`应该是单数而不是复数。[有关详细信息，请参阅路径和 URL](http://guides.rubyonrails.org/routing.html#paths-and-urls)上的 Rails 路由文档部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:52:15.243

您需要从子类`ActionDispatch::IntegrationTest`化来编写集成测试（以及`ActionController::TestCase`控制器功能测试）。

`ActionDispatch::IntegrationTest`为您设置了诸如 url helpers 之类的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T06:44:28.370

看到一个转储会很有用

```
rake routes 
```

但我怀疑链接名称是错误的，应该是

```
new_project_path 
```

代替

```
new_projects_path 
```

此外，如果您使用的是 RESTful 路由，则很可能在 new_project_path 页面上没有 new_Project 链接，它更有可能在索引 (projects_path) 上，但 rake 路由将有助于缩小范围。

# c# - 任何简单的方法来投射列表 列出

> ID：13738125
> 
> 赞同：4
> 
> 时间：2012-12-06T06:29:47.583
> 
> 标签：c#, .net

目前我使用`List<int> ints = tuple.Item2.Select(s => s.Value).ToList()`，但是当 tuple.Item2 有 1000 个项目时，这看起来效率低下。有更好的方法来实现这一点吗？除了使用 for 循环。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T06:45:46.513

`List<T1>`将每个元素转换为一个元素并将结果存储在另一个元素中的内置方法`List<T2>`是[`List<T1>.ConvertAll`](http://msdn.microsoft.com/en-us/library/73fe8cwf%28v=vs.80%29.aspx).

```
List<int> ints = tuple.Item2.ConvertAll(s => s.Value); 
```

与`.Select(...).ToList()`or不同`.Cast(...).ToList()`，此方法预先知道列表大小，并防止`.ToList()`无法避免的不必要的重新分配。

为此，`tuple.Item2`必须确实是一个`List<int?>`. 它不是扩展方法，它不能在通用`IEnumerable<int?>`接口上工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T06:34:00.590

你可以简单地使用 Linq`Cast<>`来实现这一点。

```
List<int> ints = tuple.Item2.Cast<int>(); 
```

但是如果一个元素不能转换为TResult类型，这个方法会抛出异常。你必须考虑捕获异常。

# facebook - Sharekit2.0 无法将“URL-linked text, image”信息一起发布到facebook wall

> ID：13738126
> 
> 赞同：1
> 
> 时间：2012-12-06T06:29:52.060
> 
> 标签：facebook, sharekit

我正在从旧的 sharekit 升级到最新的 Sharekit2.0。

最终我需要在 Facebookshare 上实现这一点：[https ://s3-ap-southeast-1.amazonaws.com/eight29/demo.png](https://s3-ap-southeast-1.amazonaws.com/eight29/demo.png)

在旧的 sharekit 中，我可以通过 dialog.attachment (FBStreamDialog) 来做到这一点，如下所示。但是，在最新版本中，缺少此功能。

```
BStreamDialog* dialog = [[[FBStreamDialog alloc] init] autorelease];
        dialog.delegate = self;
        dialog.userMessagePrompt = @"Post Item to Facebook";
        dialog.attachment = [NSString stringWithFormat:@"{\"name\":\"example\",\"href\":\"http://apps.facebook.com/example/?%d\",\ 
```

怎么可能做到？

谢谢！

梁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T07:53:47.877

FBStreamDialog 在技术上不是 ShareKit 的一部分，但它属于 Facebook-ios-sdk，它恰好在 ShareKit 中使用。

FBStreamDialog 不再存在于 FB 的 sdk 中，并且其他 FBDialog 系列类已被弃用。我建议您使用[他们的图形 api](http://developers.facebook.com/docs/reference/api/)，检查“发布”部分以获取所有可能的参数。希望有些会适合你的目的。

至于实现，请查看 SHKFacebook 的`- (void)doSend`方法。然后你可以继承 SHKFacebook 并实现你自己的。

# vb.net - 从不同的用户运行进程，没有密码，但从管理员（VB.NET）

> ID：13738127
> 
> 赞同：0
> 
> 时间：2012-12-06T06:29:58.957
> 
> 标签：vb.net, passwords, impersonation

我需要监控 Windows Server 上的其他帐户，并且已经发现要做到这一点，我必须能够在它们上运行监控进程。主程序从完全访问（可能是 NT_AUTHORITY）帐户运行，但所有启动进程的方式似乎都需要用户密码！请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:51:12.783

您可以将其创建为服务，并在安装时为服务属性提供密码（您希望以哪个用户身份运行它）。然后重新输入密码的需要应该消失了。

# iphone - 我正在尝试获取 TableView 的 Twitter Hashtag，但是我收到了带有当前代码的 SIGABRT

> ID：13738129
> 
> 赞同：1
> 
> 时间：2012-12-06T06:30:09.983
> 
> 标签：iphone, ios, twitter, hashtag

我可以让它用用户时间线填充我的表格视图，但不是特定的主题标签。我已经检查了 Twitter API 版本 1.1，但效果不佳。我想知道是否有人有任何提示或解决方案？我正在使用的代码部分如下：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return tweets.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath            *)indexPath
{
static NSString *CellIdentifier = @"TweetCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier   forIndexPath:indexPath];

NSDictionary *tweet = [tweets objectAtIndex:indexPath.row];
NSString *name = [tweet objectForKey:@"name"];
NSString *text = [tweet objectForKey:@"text"];
cell.textLabel.text = name;
cell.detailTextLabel.text = text;

NSLog(@"Count Number in tweets array: %d",tweets.count);

    if (cell == nil) {
    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault     reuseIdentifier:CellIdentifier];

}

return cell;
}

-(void)fetchTweets
{
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0),^
{

    NSData* data2 = [NSData dataWithContentsOfURL: [NSURL URLWithString:      @"http://search.twitter.com/search.json?q==%23twitter"]];

    NSError * error;

    tweets = [NSJSONSerialization JSONObjectWithData:data2 options:kNilOptions error:&error];

    dispatch_async(dispatch_get_main_queue(), ^{[self.tableView reloadData];
    });
});
} 
```

正如我之前所说，我已经检查了 Twitter API 1.1，它提供了这个 URL 作为示例：[https ://api.twitter.com/1.1/search/tweets.json?q=%23freebandnames&since_id=24012619984051000&max_id=250126199840518145&result_type=mixed&count =4](https://api.twitter.com/1.1/search/tweets.json?q=%23freebandnames&since_id=24012619984051000&max_id=250126199840518145&result_type=mixed&count=4) 感谢您的帮助和您的时间，我真的很感激！:)

# php - 在用户登录的情况下通过视图打印注销按钮（使用codeigniter）

> ID：13738133
> 
> 赞同：-1
> 
> 时间：2012-12-06T06:30:27.130
> 
> 标签：php, codeigniter, parse-error

我一直在修改 echo 语句以使我的注销按钮打印在我的标题中（当用户登录时），但我总是遇到这种性质的错误：

解析错误：语法错误，意外的 T_ECHO，期待 ',' 或 ';' 在 /vagrant/web/Project/application/views/_header.php 第 19 行调用堆栈：0.0013 634608 1\. {main}() /vagrant/web/Project/index.php:0 0.0123 636728 2\. require_once('/ vagrant/web/Project/system/core/CodeIgniter.php') /vagrant/web/Project/index.php:202 0.1486 1025392 3\. call_user_func_array() /vagrant/web/Project/system/core/CodeIgniter.php:359 0.1486 1025528 4\. Fp_controller->index() /vagrant/web/Project/system/core/CodeIgniter.php:0 0.1486 1025976 5\. Viewlib->loadview() /vagrant/web/Project/application/controllers/fp_controller.php ：12 0.1487 1026192 6\. CI_Loader->view() /vagrant/web/Project/application/libraries/Viewlib.php:16 0.1487 1027600 7\. CI_Loader->_ci_load() /vagrant/web/Project/system/core/Loader .php:419

或者 url 将完全搞砸（它实际上将具有“base_url();”而不是我在配置文件中声明的实际基本 url 名称。有人可以帮助我吗？

标题视图

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Final Project Incorporated</title>
    </head>
    <body>
        <h1>Navigation:</h1>

        <ul>
            <li><a href="<?php echo base_url(); ?>fp_controller/index">Home</a></li>
            <li><a href="<?php echo base_url(); ?>fp_controller/directory">Employee Directory</a></li>
            <li><a href="<?php echo base_url(); ?>fp_controller/form">Add Employee Form</a></li>
            <li><a href="<?php echo base_url(); ?>fp_controller/login">Login</a></li>

                <?php 

            if ($this->session->userdata('isLoggedIn')) {
Line 19>>>>              echo "<li>" . "<a href=" . "'" echo base_url();"'" .     "fp_controller/logout" . ">" . "Logout" . "</a>" . "</li>";
            }

            ?>

        </ul>

        <hr />
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:32:20.843

您不能在 php 语句中放置回显，只需连接：

```
echo "<li>" . "<a href=" . "'".base_url()."'" ."fp_controller/logout" . ">" . "Logout" . "</a>" . "</li>"; 
```

你也可以使用 site_url() 来处理 url 的构建：

```
echo '<li><a href="'.site_url('fp_controller/logout').'">Logout</a></li>"; 
```

另一种写法，简写：

```
<?php if ($this->session->userdata('isLoggedIn')) : ?>
   <li><a href="<?php echo site_url('fp_controller/logout');?>">Logout</a></li>
<?php endif; 
```

通过这种方式，您可以通过转义引号等减少任何可能的错误，只需编写纯 html 并使用 php 作为模板引擎。就个人而言，我发现这种方式更易于阅读且不易出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:43:16.907

我在我的应用程序中使用的一个简单的注销示例。我假设您将使用数组名称在会话中保存用户数据`$logged_in_user`。

```
View:

<p class="user">Hello, <?php echo $logged_in_user['user_name'] ?> | <a href="<?php echo ROOT_FOLDER ?>/controller_name/logout_function_name">Logout</a></p>

Controller:

public function logout_function_name(){
        $this->model_file_name->logout_function_name();
        redirect("/controller_function_name/page_name_where_you_want_to_redirect");
    }

Model:

public function logout()
{
    $this->session->sess_destroy();
} 
```

# php - 带有 Smtp 身份验证的 Web 表单（回复）

> ID：13738134
> 
> 赞同：1
> 
> 时间：2012-12-06T06:30:33.697
> 
> 标签：php, email, send

我的联系表格来自 TEST - 如下面的代码所示，但我需要它来自填写表格的人，以便在回复电子邮件时，它会发送到输入的地址，而不是 TEST。

我是 PHP 新手，我可以在实现回复方面寻求帮助吗？我已经尝试过并且一直缺少一些东西。

这是我的原始代码。谢谢！

```
<?php
if(isset($_POST['email'])) {

function died($error) {
// your error code can go here
echo "We are very sorry, but there were error(s) found with the form you submitted. ";
echo "These errors appear below.<br /><br />";
echo $error."<br /><br />";
echo "Please go back and fix these errors.<br /><br />";
die();
}

// validation expected data exists
if(!isset($_POST['contact_name']) ||
!isset($_POST['email']) ||
!isset($_POST['telephone']) ||
!isset($_POST['comments'])) {
died('We are sorry, but there appears to be a problem with the form you submitted.');   
}

$contact_name = $_POST['contact_name']; // required
$email_from = $_POST['email']; // required
$telephone = $_POST['telephone']; // required
$comments = $_POST['comments']; // not required

$error_message = "";
$email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
$error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
$string_exp = "/^[A-Za-z 0-9.'-]+$/";
  if(!preg_match($string_exp,$contact_name)) {
$error_message .= 'The Contact Name you entered does not appear to be valid.<br />';
  }
   if(!preg_match($string_exp,$telephone)) {
$error_message .= 'The Telephone # you entered does not appear to be valid.<br />';
  }

  if(strlen($error_message) > 0) {
died($error_message);
  }
$email_message = "Form details below.\n\n";

function clean_string($string) {
  $bad = array("content-type","bcc:","to:","cc:","href");
  return str_replace($bad,"",$string);
}

$email_message .= "Contact Name: ".clean_string($contact_name)."\n";
$email_message .= "Email: ".clean_string($email_from)."\n";
$email_message .= "Telephone: ".clean_string($telephone)."\n";
$email_message .= "Comments: ".clean_string($comments)."\n";

ini_set('display_errors',1);
error_reporting(E_ALL); 

  require_once "Mail.php";

$from = "TEST<todd@xxxxxx.com>";
$to = "<anyone@xxxxxxxx.com>";
$subject = "Test message";
$body = "$email_message";

$host = "mail.xxxxxxxx.com";
$username = "todd@xxxxxxxx.com";
$password = "xxxxxxxxxx";

headers = array ('From' => $from,
'To' => $to,
'Subject' => $subject);
$smtp = Mail::factory('smtp',
  array ('host' => $host,
'auth' => true,
'username' => $username,
'password' => $password));

$mail = $smtp->send($to, $headers, $body);

if (PEAR::isError($mail)) {
  echo("<p>" . $mail->getMessage() . "</p>");
} else {
  echo("<p></p>");
}
?>

<!-- include your own success html here -->
message sent

<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:31:58.363

尝试：

```
$from = $_POST['contact_name']; 
```

或者，如果您希望显示他们的电子邮件：

```
$from = $_POST['email']; 
```

# sql-server - SQL Server - 错误的执行计划？

> ID：13738135
> 
> 赞同：0
> 
> 时间：2012-12-06T06:30:36.443
> 
> 标签：sql-server, sql-execution-plan

我有一张非常大的桌子，里面有很多行和很多列（我知道这很糟糕，但让我们把它放在一边）。

具体来说，我有两列 - `FinishTime, JobId`. 第一个是行的完成时间，第二个是它的 id（不是唯一的，但几乎是唯一的 - 只有少数记录具有相同的 id）。

我有关于 jobid 的索引和关于完成时间的索引。

我们一直在插入行，主要按完成时间排序。我们还会定期更新每个索引的统计信息。

现在解决问题：

当我使用过滤器运行查询时`jobid==<some id> AND finishtime > <now minus 1 hour>`-此查询需要很多时间，并且在显示估计的执行计划时，我看到该计划是遍历`finishtime`索引，即使遍历`jobid`索引应该会好得多。在查看索引统计信息时，我看到服务器“认为”最后一小时的作业数为 1，因为我们没有更新此索引的统计信息。

当我使用过滤器运行查询时`jobid==<some id> AND finishtime > <now minus 100 days>`- 这很好用，因为 SQL Server 知道要检查正确的索引 - 作业 ID 索引。

所以基本上我的问题是为什么如果我们不一直更新索引统计信息（这很耗时），服务器会假设最后一个桶之后的记录数是 1？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:51:38.173

[您可以使用DBCC SHOW_STATISTICS](http://msdn.microsoft.com/en-us/library/ms174384.aspx)获得统计信息包含的索引的直方图，例如

```
DBCC SHOW_STATISTICS ( mytablename , myindexname ) 
```

对于基于日期的记录，查询总是容易出现不正确的统计信息。运行这个应该显示直方图中的最后一个桶在[今天之前/今天之后]的范围内几乎没有任何记录。但是，在所有其他条件相同的情况下，如果两者都是没有包含列的单列索引，SQL Server 仍然应该优先使用`job_id`索引。`finishtime`这是因为 job_id (int) 的查找速度比 finishtime (datetime) 快。

注意：如果您`finishtime`正在覆盖查询，这将严重影响查询优化器选择它，因为它消除了书签查找操作。

为了解决这个问题，要么

1.  定期更新统计数据
2.  在数据上创建多个过滤索引（2008+ 功能），其中一个分区更新频率更高
3.  对敏感查询使用索引提示

# asp.net-mvc-3 - 在没有 Visual Studio 的服务器上安装 mvc 4

> ID：13738137
> 
> 赞同：2
> 
> 时间：2012-12-06T06:30:43.400
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

我正在启动并运行构建服务器（Windows Server 2008 R2）。

该应用程序将是 MVC 4。

我需要在盒子上安装 MVC3 和 MVC4 吗？还是只是 MVC4？

不过，我不想在构建服务器上安装一大堆 Visual Studio kerfuffle。Web 平台安装程序似乎都包含在其中。

为任何 MVC 4 智慧干杯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:32:00.827

如果您的应用程序将使用 MVC 4，那么您只需要安装 ASP.NET MVC 4。您不需要安装 Visual Studio。MVC 安装程序检查 VS 是否已安装，如果已安装，则将项目模板添加到 VS 2010。否则，它仅将运行时程序集部署到 GAC。

# java - 程序不承认输入语句？

> ID：13738138
> 
> 赞同：0
> 
> 时间：2012-12-06T06:30:46.583
> 
> 标签：java

我正在为我的最终项目尝试这个。出于某种原因，我的程序没有识别出我正在提示用户输入，并且程序没有给用户输入信息的空间，而是退出了。这是代码：

```
int choice;
Scanner input = new Scanner (System.in);
System.out.println("Enter a number between 1 and 4.");
choice = input.nextInt(); 
if (choice > 0 && choice < 5) {
     System.out.print("To return to the main menu, enter 'main'. To return to the Forces Menu, enter 'forces'. To quit, enter 'quit'.");
     choice2 = input.nextLine();
     if (choice2.compareToIgnoreCase(MM) == 0) {
         mainMenu();
     } else if (choice2.compareToIgnoreCase(F) == 0) {
         forces();
     } else if (choice2.compareToIgnoreCase(X) == 0) {
         System.out.println("Thank you! Goodbye!"); 
     }   
} 
```

MM、F 和 X 只是用户输入第二选择时使用的字符串变量。在它说“要返回主菜单......输入'退出'。”之后，程序停止而不是提示用户输入。如果我用 while(choice...) 替换 if(choice...) 它只是重复提示是否退出或返回的语句。我读了一篇类似的帖子，它建议替换第一个 input.nextInt(); 使用 input.nextLine();，但这对我不起作用。顺便说一句，我正在使用 Netbeans 7.2 进行编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:36:42.850

这是您需要的行

```
choice = Integer.parseInt(input.nextLine()); 
```

代替`choice = input.nextInt();`

或者放

```
input.nextLine(); 
```

在你之后

`choice = input.nextInt();`

# java - SQL 关键字的黑名单过滤数据

> ID：13738141
> 
> 赞同：2
> 
> 时间：2012-12-06T06:31:03.773
> 
> 标签：java, validation, security, sql-injection

我正在尝试在将数据插入数据库（POSTGRESQL）之前验证数据。使用 Apache Commons Validator 可以轻松验证与电子邮件、邮政编码等对应的数据。但在名称的情况下，我使用了这个：

```
^[a-zA-Z][ a-zA-Z]{1-30}$ 
```

这可以防止将任何特殊字符添加为名称，但无法防止用户添加`DROP or GRANT`为名称。在我使用时`PreparedStatement`，我认为这不会成为问题，但现在要求 SQL 关键字不应进入数据库，因为它可能导致*二阶 SQL 注入。*

我曾想过将所有 SQL 关键字列入黑名单（当然，这会阻止 Huge Grant 登录我们的网站。:P）但似乎有超过 64 个关键字。这**（SQL 关键字的黑名单过滤数据）是****防止二阶 SQL 注入**的正确方法吗？我有哪些选择？

我正在使用这段代码：

```
String sql="INSERT INTO users (username, password, name) VALUES (?,?,?);";
        try{
            conn=SomeStaticClass.createConnection();
            ps=conn.prepareStatement(sql);
            ps.setString(1, dataBean.getUsername());
            ps.setString(2, dataBean.getPassword());
            ps.setString(3, dataBean.getName());
            ps.execute();
        }catch(SQLException e){
            e.printStackTrace()
        }catch(Exception e){
            e.printStackTrace();
        }finally{
            try{
                if(ps!=null){
                    ps.close();
                }
                conn.close();
            }catch(SQLException e){
                e.printStackTrace();
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:42:53.687

> 对于这种情况，这是正确的方法吗？

不。

当您通过连接字符串来组装 SQL 查询时，就会发生 SQL 注入。

防止 SQL 注入的“最佳实践”方法是使用[`PreparedStatement`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html)具有参数占位符的常量 SQL 查询。然后使用准备好的语句`set`方法为每个占位符参数设置值。这种方法将保证任何包含 SQL 关键字的“讨厌的”字符串参数都将被解释为文字字符串。

* * *

**更新**-`PreparedStatements`一致使用也应该防止二阶攻击......假设你指的是这样的东西：

[http://download.oracle.com/oll/tutorials/SQLInjection/html/lesson1/les01_tm_attacks2.htm](http://download.oracle.com/oll/tutorials/SQLInjection/html/lesson1/les01_tm_attacks2.htm)

你只需要确保你没有从任何可能被污染的东西中构建 SQL 查询字符串。如果您使用占位符处理任何可能受到污染的数据，那么它来自哪里并不重要。

（黑名单 SQL 关键字将有助于将垃圾排除在您的数据库之外。但正如您所提到的，它可能会损坏合法数据并影响您系统的可用性。我不会这样做。最好依靠 good程序员纪律......和彻底的代码审查。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:49:01.360

仅当您将关键字存储在数据库中，然后以不安全的方式使用它们时，才会发生二阶注入。如果您使用准备好的语句并且它们被正确参数化，它将不会发生。思科对 SQL 注入的理解有一个很好的总结：

[http://www.cisco.com/web/about/security/intelligence/sql_injection.html](http://www.cisco.com/web/about/security/intelligence/sql_injection.html)

除了您的“Grant”示例之外，还有许多诸如 IF、BY、IS、IN、TO 等会在英语/名称中非常常见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T10:14:47.193

确保数据库中的所有数据都可以与任何脚本语言（如 SQL 或 HTML）一起使用，即使不是不可能，也是非常困难的，而且将来没有适当的转义。在你现在如何使用这些字符之前，不可能区分“安全”和“不安全”字符。

试图在将所有数据插入数据库之前对其进行转义和清理可能会让您相信数据库中用户生成的数据是“安全的”，这是一种非常危险的信念。只有知道如何使用数据才能知道数据是否安全，并且只有在实际使用数据时才能知道数据是否安全（因为数据库中的数据可以存在很长时间）。

避免此类问题的最佳策略是在实际使用所有数据时始终对其进行转义，或者像您一样使用 PreparedStatement，在 html 中使用它们时正确转义它们，当您将它们插入电子邮件时转义它们等。等等

我在这个答案中举了一些例子：

[如何使用 OWASP HTML Sanitizer 允许特定字符？](https://stackoverflow.com/questions/12558471/how-to-allow-specific-characters-with-owasp-html-sanitizer/12610759#12610759)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T06:53:48.920

除了使用 PreparedStatement 之外，您还必须在您的网页上检查用户提供的输入。

所以现在你有 2 个不同的检查。1\. 在您的网页上，这将减少处理时间。2\. 如果某些内容通过了您的初始检查，那么preparedstatement 将确保您的查询被正确解析。

例如，用户正在搜索某个项目..

用户输入是

```
' OR ITEM in (Select ITEM from SOME_TABLE) OR ITEM = '' 
```

你正在构建你的 SQL，通过连接字符串，然后它将使 SQL 命令为

```
Select * from TABLE_X WHERE ITEM = '' OR ITEM in (Select ITEM from SOME_TABLE) OR ITEM = '' 
```

所以你的数据库被黑了，但在其他情况下 PreparedStatement 它将解析你的查询并且不会让用户修改 SQL ......

# python - 在python 2.7中将url缩短为字符串中的域名

> ID：13738148
> 
> 赞同：0
> 
> 时间：2012-12-06T06:31:31.030
> 
> 标签：python, regex, python-2.7

假设我有一个字符串 `This is a good doll http://www.google.com/a/bs/jdd/etc/etc/a.py`

我想得到这样的东西 `This is a good doll www.google.com`

我在 python 中尝试`print re.sub(r'(http://|https://)',"",a))`了函数，但我只能从中删除`http://`部分。关于如何在 python 2.7 中实现这一点的任何想法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T06:44:19.880

```
>>> import re
>>> s = 'This is a good doll http://www.google.com/a/bs/jdd/etc/etc/a.py'
>>> re.sub(r'(?:https?://)([^/]+)(?:\S+)', r"\1", s)
'This is a good doll www.google.com' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T06:46:16.440

如果你想使用正则表达式，那么你可以这样做：

```
>>> import re
>>> the_string = "This is a good doll http://www.google.com/a/bs/jdd/etc/etc/a.py"
>>> def replacement(match):
...     return match.group(2)
... 
>>> re.sub(r"(http://|https://)(.*?)/\S+", replacement, the_string)
'This is a good doll www.google.com' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T06:38:50.727

```
>>> string = "This is a good doll http://www.google.com/a/bs/jdd/etc/etc/a.py"
>>> print string.replace('http://', '').split('/')[0]
This is a good doll www.google.com 
```

# iphone - 在iOS中更改句子的部分文本颜色

> ID：13738149
> 
> 赞同：2
> 
> 时间：2012-12-06T06:31:35.273
> 
> 标签：iphone, ios, xcode

> **可能重复：**
> [TTT 属性标签多色字体帮助](https://stackoverflow.com/questions/6081005/ttt-attributed-label-multi-colored-font-help)

我怎样才能在iphone中像这张照片一样？任何人都可以帮助我。我应该使用 Core Animation 或 Text Core 还是其他东西？ [http://s7.postimage.org/qgbhw7c3v/Capture.png](http://s7.postimage.org/qgbhw7c3v/Capture.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:42:42.447

```
 NSString *test = @"How can i Do that? (just only one string and don't devided into 2 part)";

    CFStringRef string =  (CFStringRef) test;
    CFMutableAttributedStringRef attrString = CFAttributedStringCreateMutable(kCFAllocatorDefault, 0);
    CFAttributedStringReplaceString (attrString,CFRangeMake(0, 0), string);

    /*
     Note: we could have created CFAttributedStringRef which is non mutable, then we would have to give all its
     attributes right when we create it. We can change them if we use mutable form of CFAttributeString.
     */

    CGColorRef _red=[UIColor redColor].CGColor;

    CFAttributedStringSetAttribute(attrString, CFRangeMake(0, 11),kCTForegroundColorAttributeName, _red); 
```

**注意**=> 在项目中添加 CoreText 框架并导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:36:08.660

您可以使用 OHAtrributedLabel 来简单有效地完成此操作： [https ://github.com/AliSoftware/OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)

# c++ - 在同一步骤中构造新对象和赋值

> ID：13738154
> 
> 赞同：1
> 
> 时间：2012-12-06T06:32:03.417
> 
> 标签：c++

```
const ClassA& curShot = vec_shots[curShotIndx]; 
```

在上面的代码中，curShot 对象是在同一步骤中构造和分配的。我的问题是上述语句中使用了哪个构造函数。我认为它将是默认构造函数，后跟赋值运算符，但它似乎调用了复制构造函数。为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T06:33:07.820

发生的事情是

```
vec_shots[curShotIndx]; 
```

返回您分配给 的引用`const ClassA& curShot`。此步骤不涉及对象创建。因此没有调用构造函数（既不是默认构造函数也不是复制构造函数）。

也不会调用赋值运算符，因为您没有将一个对象实例分配给另一个，而只是一个引用。您在此代码中处理的不是多个（现有）对象实例。因此，不会调用任何构造或赋值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:33:14.877

没有使用构造函数，`curShot`是一个引用，一个已经存在的对象的别名，而不是一个独立的对象本身。

此外，初始化和赋值不能在同一步骤完成。例如，假设你有

```
 ClassA original;
 ClassA copy = original; 
```

在这里，`copy`没有赋值`original`，它是使用初始化的`original`。这称为复制初始化。

如果你做了

```
 ClassA copy2(original); 
```

这将被称为直接初始化。

在这两种情况下都会调用复制构造函数。（可能会发生[复制](https://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization)省略，所以它可能不会被调用，但它必须是可用的）

赋值是当你`operator =`在一个已经存在的对象上使用时：

```
 ClassA x;
 ClassA y;
 x = y;     //assignment 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T06:37:55.920

既然你写了“它似乎调用了复制构造函数”，**我认为你问题中的 & 是一个错字**。
在那种情况下，如果你愿意

```
const ClassA curShot = vec_shots[curShotIndx]; 
```

它被评估为复制构造。它和丑陋的一样`const ClassA curShot( vec_shots[curShotIndx] )`。

但是，如果你写

```
ClassA curShot;  // I skipped the "const", because otherwise the example would be invalid.
curShot = vec_shots[curShotIndx]; 
```

然后调用默认构造函数并`opearator=`在第二行调用 an 。

* * *

此外，“=”这么多可能意味着调用 NEITHER 复制构造函数 NOR `operator=`，你可以拥有这个：

```
const ClassA f(){ return ClassA(); }
//...
const ClassA curShot = f();  // we would expect here a copy constructor call 
```

这里——如果编译器使用返回值优化并且通常它会这样做——只有一个默认构造函数被调用用于curShot。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T06:33:34.877

该语句只是将 curShot 定义为引用，它不是一个新对象。

# objective-c - 使用 CGContextShowTextAtPoint 打印时，在 ° 符号之前打印 ¬ 的 unicode 符号

> ID：13738158
> 
> 赞同：1
> 
> 时间：2012-12-06T06:32:12.153
> 
> 标签：objective-c, ios, xcode, graphics

我正在使用 CGContextShowTextAtPoint 调用在我的视图上打印 ° 或 µ。代码行如图所示。

```
int number = 100;
NSString *theText2 = [NSString stringWithFormat:@"%d°", number];
CGContextShowTextAtPoint(context, 10, 5, [theText2 cStringUsingEncoding:NSUTF8StringEncoding], [theText2 length]); 
```

输出结果为

“100-”

如果我增加打印字符串的长度，它会显示以下内容

“100°”

预期的输出应该是：

“100°”

这肯定与打印 unicode 字符有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:38:56.430

因为`CGContextShowTextAtPoint`您必须将字符串转换为`CGContextSelectFont`. 这很可能是“Mac Roman”编码。的最后一个参数`CGContextShowTextAtPoint`是*转换后的字符串*的长度，而不是的长度`NSString`：

```
CGContextSelectFont(context, "Helvetica", 10.0, kCGEncodingMacRoman);

int number = 100;
NSString *theText2 = [NSString stringWithFormat:@"%d°µ", number];
const char *s = [theText2 cStringUsingEncoding:NSMacOSRomanStringEncoding];
CGContextShowTextAtPoint(context, 10, 5, s, strlen(s)); 
```

请注意，这仅在您使用“Mac Roman”字符集中的字符时才有效。（由于 Mac Roman 编码的一些历史变化，它也不适用于 Euro 字符。）

对于一般的 Unicode 字符串，该`NSString`方法`drawAtPoint:withFont:`可能更适合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:24:02.363

我知道它有一些编码问题。但这里有一个小修复在 161 代表度数符号的地方使用这个

```
char str[20] = {0};
sprintf(str, "%d%c",number,161);
CGContextShowTextAtPoint(context, 10, 5, str, strlen(str)); 
```

# jboss - 如果客户端突然发生故障而没有关闭资源，则连接不会被清理

> ID：13738163
> 
> 赞同：0
> 
> 时间：2012-12-06T06:32:30.797
> 
> 标签：jboss, jms, jmx, hornetq

我正在使用 hornetq-2.2.14 Final 并且在 hornetq-jms.xml 中配置的 connection-ttl 是 60000ms 。我有一个向主题发送消息的发布者程序和一个使用来自该主题的消息的消费者程序。我的消费者程序在没有关闭资源的情况下突然退出。我等了 1 分钟，因为 ttl 是 60000 毫秒，但服务器即使在一分钟后也没有清理资源。如果这是配置问题，任何人都可以帮助我解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:49:15.247

有时它可能需要 2X TTL，具体取决于它是如何发生的。我们最近对 master 进行了修复，以确保它始终接近配置的 TTL。

# c# - 使用 C# 以编程方式运行命令行代码

> ID：13738168
> 
> 赞同：22
> 
> 时间：2012-12-06T06:32:53.170
> 
> 标签：c#, asp.net, asp.net-mvc-3

我正在使用此代码在 Windows 命令提示符下运行.. 但我需要使用 C# 代码以编程方式完成此操作

> C:\Windows\Microsoft.NET\Framework\v4.0.30319>aspnet_regiis.exe -pdf "连接字符串" "C:\Users\XXX\Desktop\连接字符串\DNN"

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-06T07:06:36.653

试试这个

```
ExecuteCommand("Your command here"); 
```

使用过程调用它

```
 public void ExecuteCommand(string Command)
    {
        ProcessStartInfo ProcessInfo;
        Process Process;

        ProcessInfo = new ProcessStartInfo("cmd.exe", "/K " + Command);
        ProcessInfo.CreateNoWindow = true;
        ProcessInfo.UseShellExecute = true;

        Process = Process.Start(ProcessInfo);
    } 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-06T06:34:11.900

您可以使用以下[`Process.Start`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)方法：

```
Process.Start(
    @"C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe",
    @"-pdf ""connection Strings"" ""C:\Users\XXX\Desktop\connection string\DNN"""
); 
```

或者，如果您想对 shell 进行更多控制并能够捕获例如标准输出和错误，您可以[`the overload`](http://msdn.microsoft.com/en-us/library/0w4h05yb.aspx)使用`ProcessStartInfo`：

```
var psi = new ProcessStartInfo(@"C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe")
{
    Arguments = @"-pdf ""connection Strings"" ""C:\Users\XXX\Desktop\connection string\DNN""",
    UseShellExecute = false,
    CreateNoWindow = true
};
Process.Start(psi); 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-12-06T06:38:23.560

您应该能够使用流程来做到这一点

```
 var proc = new Process();
        proc.StartInfo.FileName = @"C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe ";
        proc.StartInfo.Arguments = string.Format(@"{0} ""{1}""" ""{2}""","-pdf","connection Strings" ,"C:\Users\XXX\Desktop\connection string\DNN");
        proc.StartInfo.UseShellExecute = false;
        proc.StartInfo.RedirectStandardOutput = true;
        proc.Start();
        string outPut = proc.StandardOutput.ReadToEnd();

        proc.WaitForExit();
        var exitCode = proc.ExitCode;
        proc.Close(); 
```

# java - 通知替换旧的 android

> ID：13738177
> 
> 赞同：0
> 
> 时间：2012-12-06T06:33:22.937
> 
> 标签：java, android, google-cloud-messaging

我在 android 中使用 GCM 接收通知。当我同时收到两个通知时，第二个会替换第一个通知。如何堆叠通知？

我尝试了不同的 id 来通知。锄头来解决这个问题？

```
 notify ( int id, Notification notification) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:46:25.990

如果 2 个通知的通知 ID 相同，通常会出现此问题。

尝试将时间戳作为值提供给 notificationId，以便对于每条 GCM 消息

通知 ID 将是唯一的。

只需检查一次您的代码，我认为可能存在一些小错误

通知 ID。

我希望它有所帮助。

# android - E/Push 示例 - UALib：PackageManager 不知道所需的权限 com.google.android.c2dm.permission.RECEIVE

> ID：13738179
> 
> 赞同：2
> 
> 时间：2012-12-06T06:33:28.740
> 
> 标签：android, urbanairship.com

有人可以帮我解决这个问题，我在这里面临什么问题，为什么会出现这种错误。

UALib：所需的权限 com.google.android.c2dm.permission.RECEIVE 对 PackageManager 来说是未知的。

我正在使用 android urbanirship SDK 进行推送通知，在 emulator 上运行。它没有提供 PUSH APID ：

```
the manifest file looks like this

<?xml version="1.0" encoding="utf-8"?>enter code here
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      android:versionCode="1"
      android:versionName="1.0" package="com.younix.push.sample">

    <!-- minSdkVersion sets runtime compatibility ("will run on API level 4") -->
    <!-- targetSdkVersion should be set to the latest version tested, to disable compatibility modes 
            ("was tested with API level 9 features") -->
    <uses-sdk android:minSdkVersion="4" 
        android:targetSdkVersion="9"/>

    <!-- REQUIRED PERMISSIONS (for Urban Airship GCM) -->
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.VIBRATE"/>
    <uses-permission android:name="android.permission.GET_ACCOUNTS" /><!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" /> <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" /><!-- This app has permission to register with GCM and receive message -->

    <!-- MODIFICATION REQUIRED - Replace "com.urbanairship.push.sample" with your package name -->
    <permission android:name="com.younix.push.sample.permission.C2D_MESSAGE" android:protectionLevel="signature" />
    <uses-permission android:name="com.younix.push.sample.permission.C2D_MESSAGE" />
    <!-- The two elements above ensure that only this application can receive the messages and registration result -->

    <!--  END Urban Airship Required Permissions -->

    <!-- OPTIONAL Urban Airship Settings -->
    <!-- REQUIRED FOR LOCATION -->
    <!-- Use ACCESS_COARSE_LOCATION if GPS access is not necessary -->
    <!-- uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /-->
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <!--  OPTIONAL - This permission is only necessary if your app has multiple processes -->
    <!--  <uses-permission android:name="android.permission.BROADCAST_STICKY" /> -->

    <!-- END OPTIONAL Urban Airship Settings -->

    <application android:label="@string/app_name" 
        android:icon="@drawable/icon" 
        android:name="com.younix.push.sample.MyApplication" 
        android:debuggable="true"
        android:allowClearUserData="true" 
        android:enabled="true">

        <activity android:name="com.younix.push.sample.MainActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="com.younix.push.sample.PushPreferencesActivity" />
        <activity android:name="com.younix.push.sample.LocationActivity" />

        <!-- REQUIRED for Urban Airship GCM-->
        <receiver android:name="com.urbanairship.CoreReceiver" />

        <receiver android:name="com.urbanairship.push.GCMPushReceiver" android:permission="com.google.android.c2dm.permission.SEND">        
          <intent-filter>
              <action android:name="com.google.android.c2dm.intent.RECEIVE" />
              <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

              <!-- MODIFICATION REQUIRED - Use your package name as the category -->
              <category android:name="com.younix.push.sample" />
          </intent-filter>
        </receiver>

        <service android:name="com.urbanairship.push.PushService" android:label="Push Notification Service"/>
        <service android:name="com.urbanairship.push.PushWorkerService" android:label="Push Notification Worker Service"/>
        <service android:name="com.urbanairship.analytics.EventService" android:label="Event Service"/>

        <!-- This is required for persisting preferences related to push and location -->
        <provider android:name="com.urbanairship.UrbanAirshipProvider"
            android:authorities="com.younix.push.sample.urbanairship.provider"
            android:exported="false"
            android:multiprocess="true" />
        <!-- END OF REQUIRED ITEMS -->

        <!-- OPTIONAL (for segments support) -->
        <service android:name="com.urbanairship.location.LocationService" android:label="Segments Service"/>

        <!-- OPTIONAL, if you want to receive push, push opened and registration completed intents -->
        <!-- Replace the receiver below with your package and class name -->
        <receiver android:name="com.younix.push.sample.IntentReceiver" />

    </application>

</manifest> 
```

Logcat 看起来像这样

```
12-06 11:27:51.052: D/Push Sample - UALib(848): Airship Take Off! Lib Version: 2.0.2 / App key = *******************
12-06 11:27:51.052: D/Push Sample - UALib(848): In Production? false
12-06 11:27:51.102: E/Push Sample - UALib(848): Required permission com.google.android.c2dm.permission.RECEIVE is unknown to PackageManager.
12-06 11:27:51.702: D/Push Sample - UALib(848): Initializing Push.
12-06 11:27:51.712: D/Push Sample - UALib(848): Initializing Location.
12-06 11:27:51.902: D/Push Sample - UALib(848): Location or background location are not enabled - deferring service start until foreground event.
12-06 11:27:51.902: D/Push Sample - UALib(848): Initializing Analytics.
12-06 11:27:52.102: D/Push Sample APID(848): null
12-06 11:27:52.222: V/Push Sample - UALib(848): New session: e9889d8c-e8c8-40b6-a3af-75987c61c55a
12-06 11:27:52.322: V/Push Sample - UALib(848): com.urbanairship.analytics.AppForegroundEvent - {"data":{"time_zone":19800,"session_id":"e9889d8c-e8c8-40b6-a3af-75987c61c55a","notification_types":["sound","vibrate"],"daylight_savings":false,"carrier":"Android","lib_version":"2.0.2","connection_type":"cell","package_version":"1.0","os_version":"4.1.2","connection_subtype":"UMTS"},"type":"app_foreground","event_id":"2e12ccce-0c4b-40fd-9c44-e5dd8401b0a5","time":"1354773472"}
12-06 11:27:52.332: V/Push Sample - UALib(848): com.urbanairship.analytics.ActivityStartedEvent - {"data":{"class_name":"com.younix.push.sample.MainActivity","session_id":"e9889d8c-e8c8-40b6-a3af-75987c61c55a"},"type":"activity_started","event_id":"e8739e18-5d22-4064-b416-ce5002fcba1b","time":"1354773472"}
12-06 11:27:52.332: I/Push Sample - UALib(848): Service is not bound
12-06 11:27:52.382: D/Push Sample - UALib(848): Push Service started with intent=Intent { act=com.urbanairship.push.START cmp=com.younix.push.sample/com.urbanairship.push.PushService }
12-06 11:27:52.412: E/Push Sample - UALib(848): Push enabled: false
12-06 11:27:52.422: V/Push Sample - UALib(848): Push is disabled.  Not starting Push Service.
12-06 11:27:52.473: V/Push Sample - UALib(848): com.younix.push.sample.urbanairship.analytics.APP_FOREGROUND
12-06 11:27:52.662: D/dalvikvm(848): GC_CONCURRENT freed 223K, 4% free 8183K/8519K, paused 13ms+99ms, total 168ms
12-06 11:27:52.712: V/Push Sample - UALib(848): Push Service destroyed
12-06 11:27:52.782: D/gralloc_goldfish(848): Emulator without GPU emulation detected.
12-06 11:27:53.542: V/Push Sample - UALib(848): EventService startService
12-06 11:27:53.842: V/Push Sample - UALib(848): EventService startService
12-06 11:28:52.103: V/Push Sample - UALib(848): Next upload time is in the past. Not scheduling a future upload.
12-06 11:28:52.442: D/Push Sample - UALib(848): Notifying of change to content://com.younix.push.sample.urbanairship.provider/preferences/com.urbanairship.analytics.LAST_SEND/insert
12-06 11:28:52.454: V/Push Sample - UALib(848): Notified of change of key com.urbanairship.analytics.LAST_SEND
12-06 11:28:52.522: I/Push Sample - UALib(848): Sending 2 events.
12-06 11:28:52.562: V/Push Sample - UALib(848): Set Timeout: 60000
12-06 11:28:52.562: V/Push Sample - UALib(848): Set Socket Buffer Size: 16384
12-06 11:28:52.572: V/Push Sample - UALib(848): GZIP'd: 592 into 352 (expected 148)
12-06 11:28:52.642: I/Push Sample - UALib(848): Sending Analytics to: https://combine.urbanairship.com/warp9/
12-06 11:28:56.252: I/Push Sample - UALib(848): Warp 9 response: 200
12-06 11:28:56.352: D/Push Sample - UALib(848): Notifying of change to content://com.younix.push.sample.urbanairship.provider/preferences/com.urbanairship.analytics.MAX_TOTAL_DB_SIZE/insert
12-06 11:28:56.362: V/Push Sample - UALib(848): Notified of change of key com.urbanairship.analytics.MAX_TOTAL_DB_SIZE
12-06 11:28:56.423: D/Push Sample - UALib(848): Notifying of change to content://com.younix.push.sample.urbanairship.provider/preferences/com.urbanairship.analytics.MAX_BATCH_SIZE/insert
12-06 11:28:56.432: V/Push Sample - UALib(848): Notified of change of key com.urbanairship.analytics.MAX_BATCH_SIZE
12-06 11:28:56.483: D/Push Sample - UALib(848): Notifying of change to content://com.younix.push.sample.urbanairship.provider/preferences/com.urbanairship.analytics.MAX_WAIT/insert
12-06 11:28:56.492: V/Push Sample - UALib(848): Notified of change of key com.urbanairship.analytics.MAX_WAIT
12-06 11:28:56.572: D/Push Sample - UALib(848): Notifying of change to content://com.younix.push.sample.urbanairship.provider/preferences/com.urbanairship.analytics.MIN_BATCH_INTERVAL/insert 
```

关于正在发生的事情或我忘记添加到项目中的任何提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T06:35:38.213

嗨，我遇到了同样的问题。解决方案非常简单。只需制作一个支持 Google API 的新模拟器。它将在您的虚拟管理器中。那就是问题所在 ：）

# oracle - Oracle中分页的最佳实践？

> ID：13738181
> 
> 赞同：33
> 
> 时间：2012-12-06T06:33:33.540
> 
> 标签：oracle, pagination

问题：我需要编写将返回单页行的结果集和总行**数**的存储过程。

解决方案 A：我创建了两个存储过程，一个返回单个页面的结果集，另一个返回标量 - 总行数。解释计划说第一个 sproc 的成本为 9，第二个的成本为 3。

```
SELECT  *
FROM    ( SELECT ROW_NUMBER() OVER ( ORDER BY D.ID DESC ) AS RowNum, ...
        ) AS PageResult
WHERE   RowNum >= @from
    AND RowNum < @to
ORDER BY RowNum

SELECT  COUNT(*)
FROM    ... 
```

解决方案 B：我通过将相同的`TotalRows`数字添加到结果集中的*每一*行，将所有内容放在一个存储过程中。这个解决方案感觉很老套，但成本为 9 且只有一个存储过程，所以我倾向于使用这个解决方案。

```
SELECT * 
FROM ( SELECT ROW_NUMBER() OVER ( ORDER BY D.ID DESC  ) RowNum, COUNT(*) OVER () TotalRows,
WHERE RowNum >= from
        AND RowNum < to
ORDER BY RowNum; 
```

Oracle中是否有分页的最佳实践？上述哪种解决方案在实践中最常用？他们中的任何一个被认为是完全错误的吗？请注意，我的数据库现在并且将保持相对较小（小于 10GB）。

我正在使用 Oracle 11g 和带有 VS2010 SP1 和 Entity Framework 4.4 的最新 ODP.NET。我需要最终解决方案才能在 EF 4.4 中工作。我确信一般来说可能有更好的分页方法，但我需要它们与 EF 一起工作。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-06T09:04:38.633

如果您已经在使用分析 ( `ROW_NUMBER() OVER ...`)，那么在同一分区上添加另一个分析函数将为查询增加可忽略不计的成本。

另一方面，还有许多其他方法可以进行分页，其中一种使用`rownum`：

```
SELECT * 
  FROM (SELECT A.*, rownum rn
          FROM (SELECT *
                  FROM your_table
                 ORDER BY col) A
         WHERE rownum <= :Y)
 WHERE rn >= :X 
```

如果您在排序列上有适当的索引，则此方法会更好。在这种情况下，使用两个查询可能更有效（一个查询总行数，一个查询结果）。

这两种方法都是合适的，但一般来说，如果你想要行数和分页集，那么使用分析会更有效，因为你只查询行一次。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T14:07:01.597

这可能会有所帮助：

```
 SELECT * FROM 
     ( SELECT deptno, ename, sal, ROW_NUMBER() OVER (ORDER BY ename) Row_Num FROM emp)
     WHERE Row_Num BETWEEN 5 and 10; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-07-16T11:06:45.297

在 Oracle 12C 中，您可以使用限制`LIMIT`和`OFFSET`分页。

示例 - 假设您有一个表，需要使用分页根据数据类型列按降序`tab`从中获取数据。`DATE``dt`

```
page_size:=5

select * from tab
order by dt desc
OFFSET nvl(page_no-1,1)*page_size ROWS FETCH NEXT page_size ROWS ONLY; 
```

解释：

**page_no=1 page_size=5**

`OFFSET 0 ROWS FETCH NEXT 5 ROWS ONLY`- 仅获取第一 5 行

**page_no=2 page_size=5**

`OFFSET 5 ROWS FETCH NEXT 5 ROWS ONLY`- 获取接下来的 5 行

等等。

参考页 -

[https://dba-presents.com/index.php/databases/oracle/31-new-pagination-method-in-oracle-12c-offset-fetch](https://dba-presents.com/index.php/databases/oracle/31-new-pagination-method-in-oracle-12c-offset-fetch)

[https://oracle-base.com/articles/12c/row-limiting-clause-for-top-n-queries-12cr1#paging](https://oracle-base.com/articles/12c/row-limiting-clause-for-top-n-queries-12cr1#paging)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-30T05:18:43.787

组织 SQL 代码的一种简洁方式可能是 trough`WITH`语句。

*精简版*还实现**了结果**总数和**总页数**。

例如

```
WITH SELECTION AS (
    SELECT FIELDA, FIELDB, FIELDC FROM TABLE), 
NUMBERED AS (
    SELECT 
    ROW_NUMBER() OVER (ORDER BY FIELDA) RN, 
    SELECTION.*
    FROM SELECTION)
SELECT
    (SELECT COUNT(*) FROM NUMBERED) TOTAL_ROWS,
    NUMBERED.*
FROM NUMBERED
WHERE 
    RN BETWEEN ((:page_size*:page_number)-:page_size+1) AND (:page_size*:page_number) 
```

此代码为您提供了一个分页结果集，其中包含另外两个字段：

*   `TOTAL_ROWS`与您完整的总行数`SELECTION`
*   `RN`记录的行号

它需要 2 个参数：`:page_size`和`:page_number`切片你的`SELECTION`

### 精简版

选择已实现`ROW_NUMBER()`字段

```
WITH SELECTION AS (
    SELECT 
        ROW_NUMBER() OVER (ORDER BY FIELDA) RN,
        FIELDA, 
        FIELDB, 
        FIELDC 
    FROM TABLE) 
SELECT
    :page_number PAGE_NUMBER,
    CEIL((SELECT COUNT(*) FROM SELECTION ) / :page_size) TOTAL_PAGES,
    :page_size PAGE_SIZE,
    (SELECT COUNT(*) FROM SELECTION ) TOTAL_ROWS,
    SELECTION.*
FROM SELECTION 
WHERE 
    RN BETWEEN ((:page_size*:page_number)-:page_size+1) AND (:page_size*:page_number) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-19T17:46:54.053

试试这个：

```
select * from ( select * from "table" order by "column" desc ) where ROWNUM > 0 and ROWNUM <= 5; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-19T17:56:23.327

抱歉，这个适用于排序：

```
SELECT * FROM (SELECT ROWNUM rnum,a.* FROM (SELECT * FROM "tabla" order by "column" asc) a) WHERE rnum BETWEEN "firstrange" AND "lastrange"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-11T07:32:05.553

我也遇到了类似的问题。我尝试了上述所有解决方案，但没有一个能给我带来更好的性能。我有一张包含数百万条记录的表格，我需要以 20 页的形式在屏幕上显示它们。我已经完成了以下操作来解决问题。

1.  在表中添加一个新列 ROW_NUMBER。
2.  将该列设为主键或在其上添加唯一索引。
3.  使用填充程序（在我的例子中是 Informatica）用 rownum 填充列。
4.  使用 between 语句从表中获取记录。（从 LOWER_RANGE 和 UPPER_RANGE 之间的 ROW_NUMBER 表中选择 *）。

如果我们需要在一个巨大的表上进行无条件的分页获取，这个方法是有效的。

# android - 使用phonegap在android中异步上传多个图像

> ID：13738194
> 
> 赞同：0
> 
> 时间：2012-12-06T06:35:15.267
> 
> 标签：android, android-asynctask, phonegap-plugins, asyncfileupload

我有多个图像上传到 php 服务器的问题。下面给出的代码适用于 android 2.x 版本，但相同的代码不适用于 android 4.x 及更高版本。我搜索了一下，发现数据发布必须由 AsyncTask 异步完成。但我不知道如何通过phonegap（调用异步任务）来完成。

在这里我有我的代码：

```
package com.mymedlinks.hybrid;

import java.util.TimeZone;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.content.ContextWrapper;
import android.provider.Settings;
import android.util.Log;

public class SamplePlugin extends Plugin{
    public String ACTION_POST_DATA="post_data";

    @Override
    public PluginResult execute(String arg0, JSONArray arg1, String arg2) {
        // TODO Auto-generated method stub
        PluginResult pluginRes;
        if(ACTION_POST_DATA.equals(arg0)){
            try {
                pluginResult = imgsUpload(args.getString(0),
                        args.getString(1), args.getString(2));
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } else{
            pluginRes = new PluginResult(PluginResult.Status.INVALID_ACTION);;
        }
        return pluginRes;
    }

    private PluginResult imgsUpload(String date,String time,
             String fileNames) {
             PluginResult pluginResult=null;
        HttpURLConnection conn = null;
        DataOutputStream dos = null;
        DataInputStream inStream = null;
        ByteArrayOutputStream baos = null;
        byte[] imgData = null;
        String urlString = "https://www.mysampledata.com/upload_imgs.php";

                //opening of http connection
                try {
            URL url = new URL(urlString);
            conn = (HttpURLConnection) url.openConnection();
            conn.setDoInput(true);
            conn.setDoOutput(true);
            conn.setUseCaches(false);
            conn.setRequestMethod("POST");
            conn.setRequestProperty("Connection", "Keep-Alive");
            conn.setRequestProperty("Content-Type",
                    "multipart/form-data;boundary=---------------------------1177141514664");
            String msg = "";
            StringBuffer buffr = new StringBuffer(msg);

            buffr.append("-----------------------------1177141514664");
            buffr.append(CrLf);
            buffr.append("Content-Disposition: form-data; name=\"date\";"
                    + CrLf);
            buffr.append(CrLf);
            buffr.append(date + CrLf);

            buffr.append("-----------------------------1177141514664");
            buffr.append(CrLf);
            buffr.append("Content-Disposition: form-data; name=\"time\";"
                    + CrLf);
            buffr.append(CrLf);
            buffr.append(time + CrLf);

            buffr.append("-----------------------------1177141514664");
            buffr.append(CrLf);
            buffr.append("Content-Disposition: form-data; name=\"MAX_FILE_SIZE\";"
                    + CrLf);
            buffr.append(CrLf);
            buffr.append("100000000072000" + CrLf);

            buffr.append("-----------------------------1177141514664");
            buffr.append(CrLf);
            buffr.append("Content-Disposition: form-data; name=\"method\";"
                    + CrLf);
            buffr.append(CrLf);
            buffr.append("upload.snapshots" + CrLf);

            String msg1 = "";
            StringBuffer buffr1 = new StringBuffer(msg1);
            List<byte[]> byetsInfo = new ArrayList<byte[]>();
            ArrayList<String> filenames = new ArrayList<String>();
            try {
                JSONObject jObj = new JSONObject(new String(fileNames));
                JSONArray jArray = jObj.getJSONArray("snapshot_images");
                String drPath = android.os.Environment
                        .getExternalStorageDirectory().toString();

                for (int i = 0; i < jArray.length(); i++) {
                    String img = jArray.getString(i);
                    Log.e("sample app", " imageName " + img);

                    File f = new File(drPath + "/sample_app_images/" + img);
                    Uri ur = Uri.fromFile(f);
                    filenames.add(img);
                    Bitmap bmp;
                    try {
                        bmp = Media.getBitmap(this.cordova.getActivity()
                                .getContentResolver(), ur);
                        baos = new ByteArrayOutputStream();
                        bmp.compress(CompressFormat.JPEG, 90, baos);

                        imgData = baos.toByteArray();
                        Log.e("sample app", " img data size " + imgData.length);

                    } catch (FileNotFoundException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    byetsInfo.add(imgData);

                }

            } catch (JSONException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            String msg3 = "";
            StringBuffer buffr3 = new StringBuffer(msg3);
            buffr3.append(CrLf);
            buffr3.append("-----------------------------4664151417711--");
            buffr3.append(CrLf);

            conn.setChunkedStreamingMode(0);

            for (int i = 0; i < byetsInfo.size(); i++) {
                dos = new DataOutputStream(conn.getOutputStream());

                buffr1.delete(0, buffr1.length());
                buffr1.append("-----------------------------1177141514664");
                buffr1.append(CrLf);
                buffr1.append("Content-Disposition: form-data; name=\"snapshotUpload[]\"; filename=\""
                        + filenames.get(i) + "\"" + CrLf);
                buffr1.append("Content-Type: image/jpeg" + CrLf);
                buffr1.append(CrLf);

                dos.write(buffr.toString().getBytes());
                dos.write(buffr1.toString().getBytes());

                int index = 0;
                int size = 1024;
                do {

                    if ((index + size) < byetsInfo.get(i).length) {
                        size = byetsInfo.get(i).length - index;
                    }
                    dos.write(byetsInfo.get(i), index, size);
                    index += size;
                } while (index < byetsInfo.get(i).length);
                Log.e("file upload ", " written: " + index);

                dos.write(buffr3.toString().getBytes());

            }

            Log.e("Debug", "File is written");
            Log.e("activity upload demo ",
                    " in file upload " + conn.getResponseMessage());
            dos.flush();

        } catch (Exception ec) {
            ec.printStackTrace();
        }

           String s=null;
        // Read the response
        try {
            inStream = new DataInputStream(conn.getInputStream());
            char buff = 512;
            int len;
            byte[] data = new byte[buff];
            do {
                len = inStream.read(data);
                if (len > 0) {
                    System.out.println(new String(data, 0, len));
                    s+=new String(data, 0, len);
                    Log.e("sample app", "  "
                            + new String(data, 0, len));
                }
            } while (len > 0);
            Log.e("file upload ", " DONE ");

            dos.close();
            inStream.close();

        } catch (Exception ex) {
            ex.printStackTrace();
        }

                try {
            if(conn.getResponseMessage().equalsIgnoreCase("OK") && s!=null){
                pluginResult = new PluginResult(PluginResult.Status.OK, s);
            } else {
                pluginResult = new PluginResult(PluginResult.Status.ERROR,
                        false);
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return pluginResult;

    }

} 
```

代码中的数据是我从 js 代码中获得的文件名、日期和时间，这些数据将被发送到上述类。谁能给我一个关于如何通过Phonegap调用异步任务的示例（即，在imgsUpload（）中调用它）

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:04:47.790

下面是我用于将图像上传到您可以与 AsynTask 一起使用的服务器的工作代码。

```
//this method takes Inputs (Image name and Image file path where it stored)
//and after upload it returns json response

public String pushImage(String filepath,String imageName){

    Log.v(TAG, "path is:"+filepath);
    Log.v(TAG, "image name is:"+imageName);
    HttpURLConnection conn = null;

    DataInputStream inStream = null;

    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary =  "---------------------------14737809831466499882746641449";
    int bytesRead, bytesAvailable, bufferSize;
    byte[] buffer;
    int maxBufferSize = 1*1024*1024;

    String reponse_data=null;
    try{
        //------------------ CLIENT REQUEST      

        //set request properties
        // here baseURL is url for uploading image
        URL url = new URL(baseURL);        
        conn = (HttpURLConnection) url.openConnection();        
        conn.setDoInput(true);       
        conn.setDoOutput(true);       
        conn.setUseCaches(false);       
        conn.setRequestMethod("POST");
        conn.setRequestProperty("Connection", "Keep-Alive");
        conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

        //add request body        

        DataOutputStream dos = new DataOutputStream( conn.getOutputStream() );

        dos.writeBytes(lineEnd+twoHyphens + boundary + lineEnd);        

        dos.writeBytes("Content-Disposition: form-data; name=\"uploaded\";filename=\"" + imageName + "\"" + lineEnd);     

        dos.writeBytes("Content-Type: application/octet-stream\r\n\r\n");

        //now add image data

        FileInputStream fileInputStream = new FileInputStream(new File(filepath) );

        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);

        while (bytesRead > 0){
            dos.write(buffer, 0, bufferSize);
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        }     

        dos.writeBytes(lineEnd);
        dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

        fileInputStream.close();
        dos.flush();
        dos.close();
    }
    catch (MalformedURLException ex){
       ex.printStackTrace();
    }
    catch (IOException ioe){
        ioe.printStackTrace();
    }

    //------------------ read the SERVER RESPONSE
    try {
        if(conn !=null){
            inStream = new DataInputStream ( conn.getInputStream() );
        }

        String str=null;

        if(inStream !=null){
             while (( str = inStream.readLine()) != null){
                 Log.e("Debug","Server Response "+str);
                 reponse_data=str;
             }

             inStream.close();
        }

    }
    catch (IOException ioex){
        ioex.printStackTrace();
    }
   return reponse_data;
} 
```

您可以从此链接下载[commons](http://commons.apache.org/io/download_io.cgi) - io **-2.4.jar**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:45:52.663

我有一个解决方案，这里是 [Multiple Image Upload using AsyncTask in Android using Phonegap](https://stackoverflow.com/questions/13796306/multiple-image-upload-using-asynctask-in-android-using-phonegap)

无论哪种方式，一旦删除以下代码行，代码似乎在所有设备上都可以正常工作

```
conn.setChunkedStreamingMode(0); 
```

# networking - IP数据包在接收方有尾部，但在发送方没有

> ID：13738206
> 
> 赞同：4
> 
> 时间：2012-12-06T06:36:08.960
> 
> 标签：networking, tcp, ip, wireshark

我有一个简单的 C++ 代码，它构建 SYN 数据包并通过原始套接字发送它。我为此分配了 54 个字节（以太网 14 个字节）。

发送方的 Wireshark 显示 54 字节，但接收方的 Wireshark 显示 60 字节。将 6 个字节作为尾部添加到数据包的末尾。

如果我用 scapy 发送数据包，也会发生同样的情况。（发送方 54，接收方 60）

你能请教吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T06:44:13.190

以太网不能发送短于 64 字节的帧，其中 60 字节是有效负载，4 字节是校验和（FCS）。FCS 被硬件剥离，软件永远不会看到。这就是为什么应用程序只能看到 60 个字节的原因。

因此，您看到添加的额外字节由硬件添加，您对此无能为力。预告片应该全为零。

Wireshark 在他们的 wiki 上有很好的信息：[http ://wiki.wireshark.org/Ethernet](http://wiki.wireshark.org/Ethernet)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:05:27.857

正如@Gille 提到的，由于以太网的限制，额外的数据是填充的。但是 IP 有一个“长度”字段，它会告诉您数据包中有多少是真正的有效载荷，有多少是填充。您的代码（以及任何适当的代码）必须能够处理填充，这就是“长度”字段的用途。

假设您使用的是 IPv4，请查看：[http](http://en.wikipedia.org/wiki/IPv4#Packet_structure) ://en.wikipedia.org/wiki/IPv4#Packet_structure 。我说的是“总长度”字段。

# android - 屏幕宽度和高度错误

> ID：13738207
> 
> 赞同：1
> 
> 时间：2012-12-06T06:36:09.400
> 
> 标签：android, android-layout, android-emulator

使用下一个代码在 android 中获取屏幕宽度和高度之间有什么区别：

```
 public HorseView(Context context) {
        super(context);
    DisplayMetrics metrics = context.getResources().getDisplayMetrics();
    int height = metrics.heightPixels;
.............
} 
```

并使用另一个：

```
public void surfaceCreated(SurfaceHolder holder) {
    thread.setRunning(true);
    thread.start();
    int height = this.getHeight();
} 
```

任何人都知道为什么在第一种情况下，高度设置为 508；第二种情况是533；

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T06:58:06.777

*   533 * 1.5 = 800。
*   508 * 1.5 = 762。

这两个值之间的差异是因为通知栏的高度，即 38px 高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:40:58.137

尝试一下。

```
Display display = getWindowManager().getDefaultDisplay();
     int height=display.getHeight();
              int width=display.getWidth(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:48:15.567

模拟器或设备有不同的密度：

*   ldpi=.75,
*   mdpi=1,
*   hdpi=1.5,
*   xhdpi=2

状态栏图标的高度为 25dp (mdpi)。对于所有密度，条形高度：25*(ldpi=.75, mdpi=1, hdpi=1.5, xhdpi=2) = (19px, 25px, 38px, 50px)。

我们可以使用 25dp 作为基础并将其乘以密度（向上取整）以获得任何设备上的状态栏高度：

```
int statusBarHeight = (int) Math.ceil(25 * context.getResources().getDisplayMetrics().density); 
```

最后，如果您有上下文，应用程序可以使用的维度是：

```
int heightAreaWork = context.getResources().getDisplayMetrics().heightPixels - statusBarHeight; 
```

# windows-phone-7 - wp7：如何在使用控件中传递数据？

> ID：13738210
> 
> 赞同：0
> 
> 时间：2012-12-06T06:36:27.917
> 
> 标签：windows-phone-7, user-controls

我想将数据从我的表单传递到 wp7 应用程序中的用户控件。但它的用户控制给出错误 system.windows.control.childview 不包含“OnNavigateTo”的定义。

form1代码是

```
NavigationService.Navigate(new Uri(string.Format("LoginChildWindow.xaml?param1={0}", path), UriKind.Relative)); 
```

用户控制代码：

```
public partial class SongChildview : ChildWindow
    {
        public SongChildview()
        {
            InitializeComponent();
        }
        protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
        {
            base.OnNavigatedTo(e);   
           string newparameter1 = this.NavigationContext.QueryString["param1"];
        }
} 
```

请帮助他如何在用户控件中从我的表单中获取数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:31:43.540

是的，您的 SongChildview 调用不包含 OnNavagate 方法，因为它在 CHildview 中继承，并且导航方法仅适用于页面。

如果你想将路径发送给用户控制，那么第二种方法是设置你的路径而不是访问它。

试试这个链接

[在 Windows Phone 7 页面之间传递值的不同方式](http://www.c-sharpcorner.com/UploadFile/deepak.sharma00/different-ways-of-passing-values-between-windows-phone-7-pag/)

希望你有解决方案

# google-drive-api - Google API 和 Google SDK 有什么区别？

ID：13738213

赞同：0

时间：2012-12-06T06:36:39.550

标签：google-drive-api

# android - 使用加速度计传感器时 Android 应用程序崩溃

> ID：13738215
> 
> 赞同：0
> 
> 时间：2012-12-06T06:36:49.210
> 
> 标签：android, accelerometer, sensors

我想计算android手机用户的步数（基本上我想实现一个基本的计步器）。我使用的逻辑是，如果 z 方向上的加速度变化大于某个阈值，则必须将其计为一步。

我的应用程序使用以下代码使用加速度计来计算所采取的步数

```
package com.bhaskar.workout_helper_app;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

   public class CountActivity extends Activity implements SensorEventListener {

private float mLastZ,mLastY,mLastX;
private int stepcount;
private TextView tv;
private SensorManager mSensorManager;
private Sensor mAccelerometer;
private Boolean mInitialized;

// constants
private final float LEG_THRSHOLD_AMPLITUDE = (float) 5.0;
private static final float NOISE = (float) 2.0;

/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.countactivity);

    // initialise variables
    stepcount = 0;
    tv = (TextView) findViewById(R.id.textView3);
    mInitialized=false;
    // initialise sensor manager and check whether accelerometer is present
    mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
    mAccelerometer = mSensorManager
            .getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
    if (mAccelerometer == null) {
        Log.d("HARDWARE", "ACCELEROMETER NOT PRESENT!!!");
        startActivity(new Intent(CountActivity.this, workoutdata.class));
    } else {
        if (mAccelerometer.getMinDelay() != 0) {
            Log.d("ACCELEROMETER",
                    "reports data only when the value of accelerometer is changed!!!");
            //tv.setText("at regular interval "+SensorManager.SENSOR_DELAY_NORMAL);
        }
        mSensorManager.registerListener(this, mAccelerometer,
                SensorManager.SENSOR_DELAY_NORMAL);
    }
    Button b = (Button) findViewById(R.id.button1);
    b.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            tv.setText(stepcount);
            // TODO Auto-generated method stub
            startActivity(new Intent(CountActivity.this, MainActivity.class));
        }
    });
}

@Override
public void onAccuracyChanged(Sensor sensor, int accuracy) {
    // TODO Auto-generated method stub

}

@Override
public void onSensorChanged(SensorEvent event) {
    if (event.sensor.getType() != Sensor.TYPE_ACCELEROMETER) {
        return;
    }
    float x = event.values[0];
    float y = event.values[1];
    float z = event.values[2];

    if(Math.abs(z) > LEG_THRSHOLD_AMPLITUDE)
        stepcount++;
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    if (mAccelerometer != null)
        mSensorManager.registerListener(this, mAccelerometer,
                SensorManager.SENSOR_DELAY_NORMAL);
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    if (mAccelerometer != null)
        mSensorManager.unregisterListener(this);
}
} 
```

但是每当我在手机上测试它时它就会崩溃，请帮助我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T04:58:45.017

用这个

```
 tv.setText(""+stepcount); 
```

代替

```
 tv.setText(stepcount); 
```

# php - 如何指定框架是否应该对 url 友好？

> ID：13738216
> 
> 赞同：0
> 
> 时间：2012-12-06T06:36:52.730
> 
> 标签：php, .htaccess

我正在开发一个框架。我想指定 url 格式是否为

```
http://mydomain/mypage/somevars or http://mydomain?mypage&myvars 
```

基于 config.ini.php 文件重写值

```
[rewrite]
rewrite = FALSE; 
```

如果重写值为 FALSE，则 url 形式应该是`http://mydomain?mypage&myvars` else `http://mydomain/mypage/somevars`

我该如何实施？

# c# - 如何脉冲等待列表中的最后一个线程？

> ID：13738220
> 
> 赞同：1
> 
> 时间：2012-12-06T06:37:36.630
> 
> 标签：c#, locking

我正在尝试同时访问一些资源，所以我正在使用`lock`.

```
object lockObject = new object();
lock(lockObject)
{
    //Acquire some resources and do some operations  
}
//Pulse only the most recently joined thread in waiting list 
```

但我想要的只是只脉冲最后一个线程（等待列表中最近加入的线程）并忽略其他线程（死锁、中止或饥饿不是这里的问题）。我能想到的一种选择是使用消息队列并忽略除处理最后一条消息之外的所有消息。除此之外，我怎么能简单地脉冲最后一个线程而忽略其他线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:56:50.673

有很多方法可以实现这一点。这是一种方法。

您将拥有一个“线程管理器”，每个线程都会调用它来“等待”资源。

这个线程管理器本质上将[管理](http://msdn.microsoft.com/en-us/library/system.threading.waithandle.aspx)一堆[WaitHandles](http://msdn.microsoft.com/en-us/library/system.collections.stack.aspx)。当一个线程调用管理器时，它会创建一个新的，并将其推入堆栈，然后将实例交给线程，它可以等待。`WaitHandle`

当您的代码想让最后一个等待线程进入`pulse`时，它将从堆栈中弹出最顶部的等待句柄，然后`signal`它。

（请注意，此架构依赖于调用线程在 WaitHandle 上等待。）

高温高压

# wpf - Windows 8 桌面应用程序的未来

> ID：13738224
> 
> 赞同：3
> 
> 时间：2012-12-06T06:37:48.460
> 
> 标签：wpf, windows-8, directx, multimedia

有很多帖子讨论 Windows 8 上 WPF/Silverlight/HTML5 的存在，我只需要澄清有关桌面应用程序的图片，我有以下问题向专家咨询

1.  有哪些技术可用于在 Windows 8 上开发桌面应用程序？

2.  我可以使用哪些技术来创建丰富的多媒体应用程序。目前我有一个带有 DirectX 9 和 WPF 的应用程序。如果我要为 Windows 8 开发类似的东西，那么我可以使用哪些选项，以及这些选项的优缺点是什么。

3.  在 Windows 8 上继续使用相同的 DirectX 9 代码是否是个好主意？与 DirectX 等效的最佳选择是什么，是 XNA 还是 DirectX 11 或其他？

性能和可扩展性对我来说是关键点。欢迎所有建议。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T07:03:49.303

Windows 8 继续支持 DirectX。您可以在 Windows 7 上创建桌面应用程序的许多桌面技术（如果不是全部）在 Windows 8 中仍然可以使用。无论是 DirectX、MFC、XNA、 WPF、Windows 窗体等。所以是的，您可以继续使用 DirectX 9。

使用 DirectX 11 当然会让您受益于 11 相对于 DirectX 9 的新功能。

桌面应用程序将继续存在相当长的一段时间。并非每个应用程序都非常适合成为 Windows 应用商店应用程序（想想新的开始屏幕）。在可预见的未来，IDE、世界上的 Photoshop、世界上的 Pro Tools（数字音频工作站）等应用程序可能会继续成为桌面应用程序。所以说真的，与 Windows 7 相比，Windows 8 中的桌面应用程序故事并没有太大变化。

一个例外当然是 Windows RT（基于 ARM），其中不支持部署/安装第 3 方桌面应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T06:54:00.743

Angular JS、Infragistics Knowckout JS 框架将 MVVM 从 C#/XAML 转化为等效的 HTML5/JQuery 技术对。

它们值得检查。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T14:46:02.593

1\. 有哪些技术可用于在 Windows 8 上开发桌面应用程序？

可用于 Windows 7 的完全相同的技术可用于 Windows 8 桌面，但 ARM 除外。您的 x86 和 x64 目标将是相同的，无论是 Silverlight、WPF 还是其他任何东西。

2\. 我可以使用哪些技术来创建丰富的多媒体应用程序。目前我有一个带有 DirectX 9 和 WPF 的应用程序。如果我要为 Windows 8 开发类似的东西，那么我可以使用哪些选项，以及这些选项的优缺点是什么。

您可以在 Windows 8 桌面中使用相同的技术，并且利弊没有什么不同。

3\. 在 Windows 8 上继续使用相同的 DirectX 9 代码是否是个好主意？与 DirectX 等效的最佳选择是什么，是 XNA 还是 DirectX 11 或其他？

这是一个加载的问题。“好主意”是什么意思？您是否关心向后兼容性或支持？显然，保持最新版本可确保与您的应用程序具有最长的相关性。XNA 我不相信它是 Windows 8 的目标，它更多地涉及 Xbox 和 Windows Phone 开发，我怀疑它可能会随着目标平台更紧密地结合而消失。

# xml - XSLT 中的行号

> ID：13738227
> 
> 赞同：1
> 
> 时间：2012-12-06T06:38:00.680
> 
> 标签：xml, xslt

有一个 XML 文件包含重复的 Id。

我想根据重复的 ID 添加一些行号。

示例 XML 文件如下所示：

```
<ROOT>
<record1>
        <ID>123</ID>
        <Name>abc</Name>
</record1>
<record2>
        <ID>123</ID>
        <Name>def</Name>
</record2>
<record3>
        <ID>456</ID>
        <Name>ghi</Name>
</record3>
</ROOT> 
```

我需要以下格式::

```
<ROOT>
<record1>
        <ID>123_1</ID>
        <Name>abc</Name>
</record1>
<record2>
        <ID>123_2</ID>
        <Name>def</Name>
</record2>
<record3>
        <ID>456</ID>
        <Name>ghi</Name>
</record3>
</ROOT> 
```

任何人都可以让我以正确的方式，如何为此编写XSL？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T02:39:13.450

如果您将此模板添加到 XSLT 身份转换，您应该已准备就绪：

```
<xsl:template match="ID">
    <xsl:copy>
        <xsl:value-of select"." />
        <xsl:if test="//ID[. = current()]">
              <xsl:value-of select="concat('_', count(preceding::ID[. = current()]) + 1)" />
        </xsl:when>
    </xsl:copy>
</xsl:template> 
```

# c - 为什么延迟在 gcc 中不可用

> ID：13738229
> 
> 赞同：-5
> 
> 时间：2012-12-06T06:38:10.907
> 
> 标签：c, linux

为什么延迟在 gcc 中不可用？根据我的理解，延迟功能暂停程序，而睡眠功能使程序进入睡眠状态并执行上下文切换。如果我想停止我的程序 gcc 中的可用选项是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T06:47:33.050

因为`delay`据我所知，不在 C99 或 C2011 标准中。

C 标准在 API 上很差（它主要知道`FILE*`一些内存操作，如`malloc`，一些字符串操作，和`setjmp`......；它不知道目录或延迟）。

上下文切换在纯标准 C 中没有意义。（它只在多任务操作系统 à la Unix 上有意义）。

（非标准C）编程环境应提供延迟功能。在 Linux 上，它是 Posix 的超集，确实具有[睡眠](http://pubs.opengroup.org/onlinepubs/009695399/functions/sleep.html)和许多其他功能。您可以使用[sched_yield(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/sched_yield.2.html)系统调用来“强制”上下文切换。

你应该**读一些像[Advanced Linux Programming](http://advancedlinuxprogramming.com/)**这样的书。也许要停止您想要使用[sync(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/sync.2.html)和[reboot(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/reboot.2.html)系统调用的系统，但这可能是个坏主意；您可能想要运行，例如`system(3)`，使用`shutdown`or`halt`命令。

如果您只想停止您的特定程序（并让系统的其余部分照常运行其他进程），只需调用C 标准中的exit *(* [3) 。](http://www.kernel.org/doc/man-pages/online/pages/man3/exit.3.html)

 *PS。如果您编写内核设备驱动程序，您应该在问题中明确说明，您确实应该了解更多关于 Linux 的信息。在某些驱动程序中，您可能会在遇到严重麻烦时调用一些恐慌函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:53:23.310

如果你这样做了，`sleep()`那么操作系统会立即切换上下文。这种行为不满足你吗？换句话说，你想在给定的时间段内持有 CPU 并且什么都不做吗？然后做busy_waiting；`for(; ; ;) break_if_time_elapses`. 即使这样，您也无法逃脱操作系统基于时间片的上下文切换。所以它在很短的时间内有意义，小于操作系统的时间片。*

# mysql - MySQL 报告 CONCAT 不存在

> ID：13738230
> 
> 赞同：0
> 
> 时间：2012-12-06T06:38:18.340
> 
> 标签：mysql, sql

出于某种原因，以下查询中出现错误，它给出“FUNCTION j.CONCAT 不存在”当我删除 concat 并只输入 .price 没有问题，所以问题必须在 concat 中的某个地方...... sql 检索还从数据库中购买了物品。

```
SELECT k.productid_with             AS productid_with, 
   g.product                    AS product_with_product, 
   j.CONCAT('&euro; ', price)   AS productid_with_price, 
   Replace(o.image_path, 
   '/home/user/domains/domain.com/public_html', 
   'http://www.domain.com') AS productid_with_image, 
   Replace(l.image_path, 
   '/home/user/domains/domain.com/public_html', 
   'http://www.domain.com') AS productid_with_bigImage, 
   k.productid, 
   h.product, 
   i.CONCAT('&euro; ', price) AS price, 
   Replace(m.image_path, 
   '/home/user/domains/domain.com/public_html', 
   'http://www.domain.com') AS image, 
   Replace(n.image_path, 
   '/home/user/domains/domain.com/public_html', 
   'http://www.domain.com') AS bigImage 
FROM   xcart_also_bought k 
   JOIN xcart_products_categories c 
     ON c.productid = 8863 
   JOIN xcart_categories d 
     ON c.categoryid = d.categoryid 
        AND d.parentid = 0 
   JOIN xcart_products a 
     ON k.productid_with = a.productid 
        AND a.forsale = 'Y' 
   JOIN xcart_products_categories e 
     ON a.productid = e.productid 
        AND e.categoryid = d.categoryid 
   JOIN xcart_products_lng g 
     ON a.productid = g.productid 
   JOIN xcart_pricing j 
     ON a.productid = j.productid 
   JOIN xcart_thumbnails o 
     ON a.productid = o.productid 
   JOIN xcart_bigthumbnails l 
     ON a.productid = l.productid 
   JOIN xcart_products b 
     ON k.productid = b.productid 
        AND b.forsale = 'Y' 
   JOIN xcart_products_categories f 
     ON b.productid = f.productid 
        AND f.categoryid = d.categoryid 
   JOIN xcart_products_lng h 
     ON b.productid = h.productid 
   JOIN xcart_pricing i 
     ON b.productid = i.productid 
   JOIN xcart_thumbnails m 
     ON b.productid = m.productid 
   JOIN xcart_bigthumbnails n 
     ON b.productid = n.productid 
WHERE  ( k.productid = '8863' 
      OR k.productid_with = '8863' ) 
ORDER  BY bought DESC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T06:41:11.970

请问可以这样用吗？

```
CONCAT('&euro; ', j.price)   AS productid_with_price, 

CONCAT('&euro; ', i.price) AS price, 
```

告诉你一个秘密：D MYSQL 没有`j.CONCAT`和`i.CONCAT`............它只有`CONCAT`

明确指出，您将表别名放在`CONCAT`函数上，因为您应该将它放在您的`fields`:)

# forms - 如何在没有 javascript 的情况下启用禁用的按钮

> ID：13738233
> 
> 赞同：0
> 
> 时间：2012-12-06T06:38:22.263
> 
> 标签：forms, html, button

我正在使用 Twitter 引导程序。它有一个按钮功能，称为`data-loading-text`; `button`当用户提交表单时，它将替换为文本。它还会禁用该按钮。

问题出在这里：如果我不再启用按钮（使用 javascript），并且用户重新加载页面（使用`F5`），按钮将保持禁用状态......

为了解决这个问题，我想在打印时休息按钮（使用PHP），但是应该删除哪个属性？我可以设置`disabled="false"`按钮吗？或类似的东西。

欢迎任何其他解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:42:20.007

ON 按下 F5 页面被重新加载。您需要重置所有控件和按钮，并使

```
禁用=假
```

一旦加载完成。

# .net - 如何强制 Powershell 脚本等待覆盖文件，直到另一个进程完成读取它？

> ID：13738236
> 
> 赞同：2
> 
> 时间：2012-12-06T06:38:42.867
> 
> 标签：.net, powershell, locking, copy

假设我有一个共享文件夹 MyShared：

用户 A 每 30 秒获取文件 \MyShared:\Foo.txt。

而且我每 28 秒后也覆盖 \MyShared:\Foo.txt （在我的 PowerShell 脚本中）

在 PowerShell 中，如何防止自己在用户获取该文件时覆盖它？（我不想破坏文件的内容或在用户检索文件时尝试覆盖它而导致出现一些错误）

**如果我改写问题**：如何强制 Powershell 脚本等待覆盖文件，直到另一个进程完成读取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:45:06.557

在某些情况下，如果文件打开，您可能无法覆盖它。

否则，您将不得不设计一些其他机制来表示读者已完成阅读。这与powershell并没有真正的关系。例如，读取器可以创建一个“锁定文件”来通知写入器该文件正在被读取，读取完成后它会删除该文件。如果锁定文件不存在，powershell 脚本可以删除该文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:46:34.420

我使用这个函数来测试文件是否被锁定，但是在记事本打开的文件 txt 中，例如文件没有被锁定：

```
function Test-FileLock {

  param (
        [parameter(Mandatory=$true)]
        [string]$Path
    )

  $oFile = New-Object System.IO.FileInfo $Path    
  if ((Test-Path -Path $Path) -eq $false)
  {
    $false
    return
  }      
  try
  {
      $oStream = $oFile.Open([System.IO.FileMode]::Open, [System.IO.FileAccess]::ReadWrite, [System.IO.FileShare]::None)
      if ($oStream)
      {
        $oStream.Close()
      }
      $false
  }
  catch
  {
    # file is locked by a process.
    $true
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T07:01:34.680

您可以使用 System.IO.File 类中的静态 Open 方法。如果您尝试打开一个文件并且它正被另一个进程使用，它将引发异常，如果您将其包装在 try/catch 块中，您将能够判断是否已引发异常，因此在catch 块，这意味着它正在使用中。

```
function Get-FileStatus([string]$Path)
{
     try
     {
        [System.IO.File]::Open($Path, [System.IO.FileMode]::Open, [System.IO.FileAccess]::ReadWrite, [System.IO.FileShare]::None)
        return $false
     }
     catch
     {
        return $true
     }
}

if((Get-FileStatus -Path "C:\myfile.bin"))
{
   Write-Host "File in Use"
}
else
{
   Write-Host "File Not in Use"
} 
```

# sqlite - 在 windows playframework 中设置 sqlite db 文件：如何设置路径？

> ID：13738239
> 
> 赞同：3
> 
> 时间：2012-12-06T06:39:02.047
> 
> 标签：sqlite, playframework

我正在尝试使用以下几行在 windows playframework 中设置我的 sqlite db 文件：

```
db.default.driver=org.sqlite.JDBC
db.default.url="jdbc:sqlite:E:\\Test.db" 
```

但我收到以下错误：

```
"Cannot connect to database [default]" 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:44:34.940

尝试：

```
db.default.driver=org.sqlite.JDBC
db.default.url="jdbc:sqlite:E:/Test.db" 
```

Java 正确地替换了路径分隔符。

# ember.js - Ember 计算属性不起作用

> ID：13738240
> 
> 赞同：1
> 
> 时间：2012-12-06T06:39:08.810
> 
> 标签：ember.js, javascript-framework, handlebars.js

我有一个具有计算属性的视图。当依赖项被更新时，观察者会正确触发，但计算属性不会。可能是什么原因？

在车把中：

```
{{#view viewName currencyBinding="changingValue"}}
    {{view.prefix}}
{{/view}} 
```

在视图中：

```
prefix: (function() {
  //does not get called!!! 
  console.log('computed property fired');
  return this.get('currency');
}).property('currency')

observeCurrency: (function() {
  //gets called!
  return console.log('observer fired');
}).observes('currency') 
```

当“changedValue”更新但属性没有更新时，观察者会被触发！另外，如果我在观察者中设置“前缀”：

```
observeCurrency: (function() {
    //gets called!
    console.log('observer fired');
    return this.set('prefix', this.get('currency'));
}).observes('currency') 
```

除非我对视图进行显式重新渲染，否则我的 html 不会得到更新。为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T19:34:04.433

如果没有你的所有代码，很难说发生了什么，但是让我们看看......所以也许你应该像我在评论中所说的那样删除计算属性周围的环绕，这样你的视图就会有一个看起来有点像这样的属性：

```
SomeView: Em.View.extend({
    // other stuff...
    prefix: function() {
        console.log('prefix being called');
        // code that returns something goes here
    }.property('currency'),
    // other stuff...
}) 
```

现在我认为是问题所在，我制作了一个小提琴来模拟这种场景，在该场景中您指示您想要哪种货币，并且计算的属性具有确定前缀是什么的逻辑。（您可以在[**此处**](http://jsfiddle.net/MmWk2/69/)查看源代码）。

在您的代码中，当您 bind 时`changingValue`，您没有指定此属性的来源，而是传递了 Ember 无法解析为应用程序中对象属性的路径。在我写的小提琴中，请注意该属性`changingValue`属于我的应用程序（我将其命名为 SomeApp）。然后这个属性的路径是`SomeApp.changingValue`，我在把手中的绑定最终是：

`{{view SomeApp.SomeView currencyBinding="SomeApp.changingValue"}}'`

另外，请注意，在那个小提琴上，我创建了一个子视图，它将其`content`属性与来自父视图的货币值绑定。我只在此处添加了它，因此您可以看到如果*代码*`changingValue`中的属性属于父视图，路径将如何。

 *我希望这有帮助。*

# svn - 获取 svn 存储库详细信息

> ID：13738243
> 
> 赞同：4
> 
> 时间：2012-12-06T06:39:19.220
> 
> 标签：svn, command-line

我刚刚签出了一个 SVN 存储库——有什么方法可以通过在本地运行 SVN 命令来获取我从何处签出的详细信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T06:42:03.183

`svn info`在该目录中运行。
完整信息在这里：[http ://svnbook.red-bean.com/en/1.6/svn.ref.svn.c.info.html](http://svnbook.red-bean.com/en/1.6/svn.ref.svn.c.info.html)

# coldfusion - ColdFusion -> 带有 oauth 2 和服务帐户的 Google Analytics API

> ID：13738244
> 
> 赞同：2
> 
> 时间：2012-12-06T06:39:26.937
> 
> 标签：coldfusion, oauth-2.0, google-analytics-api

我正在编写一个 ColdFusion (CF) 应用程序，该应用程序需要访问其自己的 Google Analytics (GA) 数据（而不是其他用户的）。一些研究表明我想使用简单的 API 密钥，但后来我遇到了警告说这已被弃用，我应该使用 Oauth 2 和服务帐户。

[我在这里](http://www.cf-jensbits.com/demos/cf/ga/login.cfm)找到了一个有效的 CF/Oauth2 演示，但它不是为使用服务帐户而设计的。然后我[在 StackOverflow](https://stackoverflow.com/a/12892625/1317792)上找到了一个帖子，其中包含服务帐户身份验证的说明，但代码是用 PHP 编写的。

我已经在 GA 中创建了一个服务帐户，注册了应用程序，下载了私钥等。但我不知道如何使它与 CF 一起工作。我可以在网上找到服务帐户身份验证或 CF Oauth 2 身份验证的示例，但不能同时找到两者。

有人可以提供一个使用 Oauth 2 和服务帐户向 Google Analytics 进行身份验证的 ColdFusion 工作示例吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-29T04:20:24.707

`.jar`将可从[Google Analytics API Client Library for Java](https://developers.google.com/api-client-library/java/apis/analytics/v3)下载的 Google 文件安装到 CF 服务器的 WEB-INF/lib 文件夹中。

在 ColdFusion 中创建对象。这是一个例子：

```
variables.HTTP_Transport = createObject("java", "com.google.api.client.http.javanet.NetHttpTransport").init(); 
```

然后，您将*几乎*完全按照 Google 的说明使用 java 对象。

有太多行要列出（但它不是太疯狂）所以你可以关注这篇文章：[Accessing Google Analytics API with Service Account and Coldfusion](https://web.archive.org/web/20140201100424/http://www.jensbits.com/2013/12/28/google-analytics-api-offline-access-with-service-account-and-coldfusion/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:38:03.503

看看： [https ://web.archive.org/web/20160409194848/http://www.jensbits.com/2012/04/05/google-analytics-reporting-api-using-oauth-2-with -冷熔/](https://web.archive.org/web/20160409194848/http://www.jensbits.com/2012/04/05/google-analytics-reporting-api-using-oauth-2-with-coldfusion/)

创建登录 URL 并检索登录 URL 的“代码”参数

当应用程序在 Google API 控制台中注册 api 访问权限时，Google 会设置客户端 ID 和客户端密码。

重定向 uri 是用户在身份验证后发送到的服务器上的一个位置。此 uri 在应用注册期间在 Google API 控制台中注册。

这些值可以包含在 application.cfc 中：

```
<cfset request.oauthSettings = {scope = "https://www.googleapis.com/auth/analytics.readonly",
      client_id = "YOUR-CLIENT-ID.apps.googleusercontent.com",
      client_secret = "YOUR-CLIENT-SECRET",
      redirect_uri = "YOUR-REDIRECT-URI",
      state = "optional"} /> 
```

用户登录网址

登录 URL 将提示用户允许通过应用访问他们的 Google 内容，并且 URL 中将返回一个“代码”请求变量。有关更多详细信息，请参阅形成 URL。

```
<!--- create login url --->
<cfset loginURL = "https://accounts.google.com/o/oauth2/auth?scope=" & request.oauthSettings["scope"]
                   & "&redirect_uri=" & request.oauthSettings["redirect_uri"]
                   & "&response_type=code&client_id=" & request.oauthSettings["client_id"]
                   & "&access_type=online" /> 
```

使用有权访问分析的 Google 帐户登录

# php - 带有 JQuery 的时尚滑动菜单

> ID：13738246
> 
> 赞同：-1
> 
> 时间：2012-12-06T06:39:36.347
> 
> 标签：php, jquery, slideshow

我正在使用带有 JQuery 的时尚滑动菜单。

```
<script type="text/javascript">
        $(function(){
        $('ul.child').hide();
        $('ul.parent a.slide').click(function(){
        $('ul.child').slideUp('slow');
        $(this).next().find('a').show();
        $(this).next().slideDown('fast');
        return false;
        });
        });
        </script>

        <ul class="parent">
        <li>
        <a href="#" class="slide">Title One</a>
        <ul class="child">
        <li><a href="#">Link One</a></li>
        <li><a href="#">Link Two</a></li>
        <li><a href="#">Link Three</a></li>
        <li><a href="#">Link Four</a></li>
        <li><a href="#">Link Five</a></li>
        </ul>
        </li>
        </ul> 
```

滑动菜单工作正常。但是在最后打开的“child ul”中打开后不会关闭。我必须在一段时间后重新设置。知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:32:18.687

看到这个：http: [//jsfiddle.net/fd46R/](http://jsfiddle.net/fd46R/)

```
 $(function(){
    $('ul.child').hide();
    $('ul.parent a.slide').click(function(){
    $('ul.child').slideUp('slow');
    $(this).next().find('a').show();
        if( $(this).next().is(':hidden') ) {
    $(this).next().slideDown('fast');
        }
    return false;
    });
    });​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:11:00.697

请参阅这是打开 .child 并等待 1000 毫秒（1 秒）然后向上滑动的更新代码。

> **[http://jsfiddle.net/fBYNy/3/](http://jsfiddle.net/fBYNy/3/)**

```
$(function() {
    $('ul.child').hide();
    $('ul.parent li').click(function() {
        $('ul.child',this).slideDown('slow').delay(1000).slideUp('fast');
    //                               -----^^^^^^^^^^---- this will slide 
    //                              the opened menu after 1 second of delay            
        $(this).next().children('.child').slideUp('fast');
        $(this).prev().children('.child').slideUp('fast');
        return false;
    });
}); 
```

# java - 添加 pacman 图像

> ID：13738248
> 
> 赞同：3
> 
> 时间：2012-12-06T06:39:47.407
> 
> 标签：java, swing, nullpointerexception, paint, paintcomponent

我是 Ap 计算机科学专业的学生，​​该课程的项目是创建您选择的游戏。我正在创建一个吃豆人游戏。我们在 GUI 上的工作不多，所以我对整个概念还是很陌生，但这是我目前所拥有的：

```
import java.awt.*;
import java.awt.event.KeyEvent;
import java.awt.image.*;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.*;

public class GameHandler extends JFrame{

JPanel jpanel = new JPanel();
Graphics g;
BufferedImage pacman;
int frame;
int direction;
int x, y;
//final int STEP = 2; If you want to change the speed at which pacman moves accross the screen;

public void popupWindow() {
    setSize(400, 400);
    setResizable(false);
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame = 0;
    direction = KeyEvent.VK_LEFT;
    x = 300;
    y = 300;

    try {
        pacman = ImageIO.read(new File("pacman.png"));
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

    }
          image();
}

public void keyPressed(KeyEvent e) {
    direction = e.getKeyCode();
}

public void update() {
    frame++;
    if (frame > 2) {
        frame = 0;
    }

    switch(direction) {
        case KeyEvent.VK_LEFT:
            x--;
            break;
        case KeyEvent.VK_RIGHT:
            x++;
            break;
        case KeyEvent.VK_UP:
            y--;
            break;
        case KeyEvent.VK_DOWN:
            y++;
            break;
    }
}

public void image() {   
    super.paintComponents(g);
    g.drawImage(pacman.getSubimage(frame*10, 0, 37, 30), x, y, null);
}
} 
```

我的问题是我无法将此图像输出到屏幕上（我知道我`g.drawImage dimensiones`是关闭的，因为我无法在没有任何输出的情况下调整它）

当我尝试在方法中调用该方法`image()`时，出现`popupWindow()`此错误：

```
Exception in thread "main" java.lang.NullPointerException
at sun.awt.SunGraphicsCallback.runComponents(SunGraphicsCallback.java:70)
at java.awt.Container.paintComponents(Container.java:1890)
at GameHandler.image(GameHandler.java:69)
at GameHandler.popupWindow(GameHandler.java:38)
at Main.main(Main.java:7) 
```

我尝试在不同的位置以及在 try/catch 中调用 image 方法。我搞不清楚了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T06:43:07.880

```
public void image() {   
    super.paintComponents(g);
    g.drawImage(pacman.getSubimage(frame*10, 0, 37, 30), x, y, null);
} 
```

`g`尚未设置用于此方法。您的班级定义`Graphics g;`但没有在任何地方设置！所以，你问，我如何设置它？一个`Graphics`物体从哪里来？

* * *

您当前代码库的最快答案可能是：

```
JPanel jpanel = new JPanel();
Graphics g = jpanel.getGraphics(); 
```

但这根本不是一个理想的解决方案。

* * *

通常可以在`paintComponent`.

你应该瞄准的是这样的：

```
@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.drawImage(...);
} 
```

您可以覆盖`paintComponent`任何[JComponent](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html)，例如 JPanel（它是 JComponent 的子类）。所以，我向你推荐的是

*   添加一个覆盖 JPanel 的新类
*   用于`JFrame.setContentPane()`将其设置为主 JFrame 的内容窗格
*   覆盖该面板中的paintComponent
*   使用该面板进行任何 UI 更改（仅 JFrame 上的顶级内容，内容窗格上的所有其他内容）

# linq-to-sql - 从 Telerik 扩展网格中获取分页、过滤并传递给存储过程

> ID：13738249
> 
> 赞同：2
> 
> 时间：2012-12-06T06:39:48.267
> 
> 标签：linq-to-sql, asp.net-mvc-4, kendo-ui, telerik-mvc, mvcextensions

我想使用 MVC 网格过滤，但不想使用 linq。当前示例使用 linq 进行过滤。但是，我想将过滤选项传递给存储过程。你有一个例子吗？

我已经看到 Telerik 扩展网格的示例，它在控制器内部使用 GridActionAttribute 和 GridModel 从数据库接收所有记录后过滤记录。

```
[GridAction]
    public ActionResult _Paging()
    {
        return View(new GridModel<Order>
        {
            Data = GetOrders()
        });
    } 
```

我想要这个过滤器，在执行数据库查询之前分页信息。这样我就只能从数据库中获取 pagesize 记录。不是整个数据库记录来过滤它（使用storedproc）。另外，从数据库 LINQ 或 ENTLIB DAL 获取记录的最佳实践是什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T07:18:05.993

我得到了解决方案。这是我的助手类，它为我构建过滤器查询。

```
using Telerik.Web.Mvc;

/// <summary>
/// TODO: Update summary.
/// </summary>
public class GridBinder
{
    public int PageNumber
    {
        get { return _pageNumber; }
        set { _pageNumber = value; }
    }

    public int PageSize
    {
        get { return _pageSize; }
        set { _pageSize = value; }
    }

    public int RecordCount { get; set; }

    public SortInfo SortInfo
    {
        get { return _sortInfo; }
        set { _sortInfo = value; }
    }

    private readonly GridCommand _command;
    private int _pageNumber = 1;
    private int _pageSize = 10;
    private SortInfo _sortInfo = new SortInfo() { Direction = SortDirection.Asc, Member = string.Empty };

    public GridBinder(GridCommand command)
    {
        this._command = command;
        GetSortDescriptor();
    }

    private void GetSortDescriptor()
    {
        SortInfo sortInfo;
        foreach (SortDescriptor descriptor in this._command.SortDescriptors)
        {
            this.SortInfo.Member = descriptor.Member;
            this.SortInfo.Direction = descriptor.SortDirection == ListSortDirection.Ascending ? SortDirection.Asc : SortDirection.Desc;
        }
    }

    public string GetFilterDescriptor()
    {
        string filters = string.Empty;
        foreach (IFilterDescriptor filter in this._command.FilterDescriptors)
        {
            filters += ApplyFilter(filter);
        }

        return filters;
    }

    private static string ApplyFilter(IFilterDescriptor filter)
    {
        var filters = string.Empty;
        if (filter is CompositeFilterDescriptor)
        {
            filters += "(";
            var compositeFilterDescriptor = (CompositeFilterDescriptor)filter;
            foreach (IFilterDescriptor childFilter in compositeFilterDescriptor.FilterDescriptors)
            {
                filters += ApplyFilter(childFilter);
                filters += " " + compositeFilterDescriptor.LogicalOperator.ToString() + " ";
            }
        }
        else
        {
            string filterDescriptor = "{0} {1} {2}";
            var descriptor = (FilterDescriptor)filter;
            if (descriptor.Operator == FilterOperator.StartsWith)
            {
                filterDescriptor = string.Format(filterDescriptor, descriptor.Member, "LIKE", "'" + descriptor.Value + "%'");
            }
            else if (descriptor.Operator == FilterOperator.EndsWith)
            {
                filterDescriptor = string.Format(filterDescriptor, descriptor.Member, "LIKE", "'%" + descriptor.Value + "'");
            }
            else if (descriptor.Operator == FilterOperator.Contains)
            {
                filterDescriptor = string.Format(filterDescriptor, descriptor.Member, "LIKE", "'%" + descriptor.Value + "%'");
            }
            else if (descriptor.Operator == FilterOperator.DoesNotContain)
            {
                filterDescriptor = string.Format(filterDescriptor, descriptor.Member, "NOT LIKE", "'%" + descriptor.Value + "%'");
            }
            else if (descriptor.Operator == FilterOperator.IsEqualTo)
            {
                filterDescriptor = string.Format(filterDescriptor, descriptor.Member, "=", "'" + descriptor.Value + "'");
            }
            else if (descriptor.Operator == FilterOperator.IsNotEqualTo)
            {
                filterDescriptor = string.Format(filterDescriptor, descriptor.Member, "<>", "'" + descriptor.Value + "'");
            }
            else if (descriptor.Operator == FilterOperator.IsGreaterThan)
            {
                filterDescriptor = string.Format(filterDescriptor, descriptor.Member, ">", "'" + descriptor.Value + "'");
            }
            else if (descriptor.Operator == FilterOperator.IsGreaterThanOrEqualTo)
            {
                filterDescriptor = string.Format(filterDescriptor, descriptor.Member, ">=", "'" + descriptor.Value + "'");
            }
            else if (descriptor.Operator == FilterOperator.IsLessThan)
            {
                filterDescriptor = string.Format(filterDescriptor, descriptor.Member, "<", "'" + descriptor.Value + "'");
            }
            else if (descriptor.Operator == FilterOperator.IsLessThanOrEqualTo)
            {
                filterDescriptor = string.Format(filterDescriptor, descriptor.Member, "<=", "'" + descriptor.Value + "'");
            }

            filters = filterDescriptor;
        }

        filters = filters.EndsWith("And ") == true ? filters.Substring(0, filters.Length - 4) + ")" : filters;
        filters = filters.EndsWith("Or ") == true ? filters.Substring(0, filters.Length - 4) + ")" : filters;

        return filters;
    }
}
public class SortInfo
{
    public string Member { get; set; }
    public SortDirection Direction { get; set; }
}

public enum SortDirection
{
    Asc, Desc
} 
```

我只是称这种方法对我来说很好用。我还没有测试过日期时间列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:14:59.360

考虑使用自定义 Ajax 绑定。检查这[部分文档](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-data-binding-custom-binding.html)和[这个](http://demos.telerik.com/aspnet-mvc/grid/custombinding)演示以获得这个想法。

# wicket-1.5 - wicket AjaxTabbedPanel，添加新标签时原始数据丢失

> ID：13738252
> 
> 赞同：2
> 
> 时间：2012-12-06T06:40:04.467
> 
> 标签：wicket-1.5

我有一个页面来捕获个人详细信息，并且人数是动态的。我尝试使用 AjaxTabbedPanel 来实现。当我向 tabPanel 添加新选项卡时，我丢失了每个选项卡中的原始数据。即使添加新选项卡，我也想保留以前选项卡中的值。在输入每个人的信息之前，我也不想提交表格。任何其他建议也值得赞赏。提前致谢。

```
List<ITab> tabs = new ArrayList<ITab>();
Set<Borrower> borrowers;
AjaxTabbedPanel ajaxTabbedPanel;
Form form = new Form("mainForm");
form.add(new AjaxLink("addBorrower") {
    @Override
    public void onClick(AjaxRequestTarget ajaxRequestTarget) {
      tabs.add(new AbstractTab(new Model(panelId)) {
            public Panel getPanel(String panelId) {
                return new BorrowerInfoComponent(panelId);
            }
        });
    ajaxRequestTarget.addComponent(ajaxTabbedPanel);                
  }
});
tabs.add(new AbstractTab(new Model("borr1")) {
     public Panel getPanel(String panelId) {
    return new BorrowerInfoComponent(panelId);
    }
});
ajaxTabbedPanel = new AjaxTabbedPanel("tabs", tabs);
form.add(ajaxTabbedPanel);
add(form); 
```

在这里，每当我添加一个新标签（借款人）时，在前一个借款人标签中输入的数据都会丢失。

# c# - 在 MVC 4 中查询当前用户的 AD 信息的最佳方法

> ID：13738254
> 
> 赞同：1
> 
> 时间：2012-12-06T06:40:10.630
> 
> 标签：c#, active-directory, asp.net-mvc-4

我有一个 MVC4 内网页面，想从 Active Directory 中获取 homeDireoctry 属性。想知道从 AD 获取属性的最快方法。

发现这个[链接](https://stackoverflow.com/questions/315403/getting-authenticate-ad-users-objectguid-from-asp-net)可以追溯到 2008 年，现在是否有更有效的类可用而不是我们编写代码来查询 LDAP？还是其他更好的方法？Linq to LDAP 比这更快吗？请指教。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:44:55.053

您链接中的示例将起作用，但请避免使用 anr。这是一个模糊搜索，它会命中多个属性（其中一些可能没有被索引）。您很可能拥有用户名（我假设它是一个 Intranet 站点），因此请改用 samaccountname 并从 HttpContext.Current.User.Identity.Name 获取登录信息。您还可以使用 System.DirectoryServices.AccountManagement 中的 UserPrincipal 类获取信息：

```
UserPrincipal.Current.HomeDirectory; 
```

如果您计划从目录请求更多非标准属性，则使用更健壮的框架（如[LINQ to LDAP](http://linqtoldap.codeplex.com/)或[LINQ to AD](http://linqtoad.codeplex.com/) ）可能会很有用。

# java - 为什么我应该使用 JSF 而不是使用简单的 ZK 框架

> ID：13738256
> 
> 赞同：5
> 
> 时间：2012-12-06T06:40:23.570
> 
> 标签：java, jsf, zk

我发现 ZK Java Web 框架非常简单，因为它内置了对 Ajax 的支持，那么我为什么要使用 JSF？我发现 JSF 的 Ajax 即 A4J 不如 ZK 的 Ajax。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T09:17:10.313

答案实际上是：**这取决于**. 这个问题没有灵丹妙药。

JSF 2 带有内置的 AJAX 支持。或者，如果您想要具有 AJAX 支持的丰富 GUI，PrimeFaces、ICEFaces 和其他具有丰富的内置功能。

本质上，您的视图层将主要依赖于 GUI，但在服务层中，不需要参考 PrimeFaces 代码，只需 Faces API。

这完全取决于个人喜好：如果您发现 ZK 框架比 JSF 更易于使用，请务必使用它。归根结底，客户**永远不会关心**您使用什么框架或体系结构来构建您的系统，只要系统完成它应该做的事情。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T09:26:31.050

你决定

1.  JSF 是 Java EE 标准
2.  ZK 比 JSF 快得多
3.  ZK 具有“ZK JSF 组件”但仅与 JSF 1.2 兼容
4.  ZK 具有易于使用的内置 Ajax 支持，而 JSF 2.0 也很好地支持 Ajax
5.  ZK 更容易学习
6.  最后，Stackoverflow 中有 12000 个 JSF 相关问题，而 ZK 有 250 个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T07:07:18.993

如果您喜欢 zk，请使用它。有，afaik，没有理由反对 zk。
我的意思是，它是开源的，没有已知的大问题。
因此，正如 Buhake Sindi 所提到的，权衡是 zk 与外部依赖的特征
，而这你需要了解自己。

# excel-formula - Excel Countif 公式计算其值在字符串列表中的单元格

> ID：13738257
> 
> 赞同：0
> 
> 时间：2012-12-06T06:40:35.397
> 
> 标签：excel-formula

我想计算C列，其值在单元格A1中指定的字符串列表中，以'，'作为分隔符，例如A1 =“A，B，C，D”，该值可以是“A”中的任何一个、“B”、“C”或“D”。

公式是这样的：

```
B1=COUNTIFS(C:C,Split(A1,",")) 
```

我也有 A2="1,2,3,4"，我想做同样的事情：

```
B2=COUNTIFS(C:C,Split(A2,",")) 
```

当然它不能工作，有没有人有想法让它工作？

ColumnB 是结果列，我想计算 ColumnA 中用“，”拆分的项目的出现次数：

```
ColumnA        ColumnB       ColumnC
-----------------------------------
1,2,3,4        8              1
1,2            6              1
2,3            2              1
3,4            2              1
                              1
                              2
                              3
                              4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:02:18.537

您可以使用这样的数组公式来做到这一点：

```
{=SUM(IF(NOT(ISERROR(FIND(C:C,A1))),1,0))} 
```

如果您之前没有使用过数组公式，您只需将上面的公式输入到单元格中，但没有大括号 {}，然后按 CTRL + SHIFT + ENTER。只按 ENTER 是行不通的。

这也适用于数字，前提是 A1 单元格中的数字是按顺序排列的。

# asp.net - 如何将上标添加到 asp.net 按钮控件？

> ID：13738258
> 
> 赞同：0
> 
> 时间：2012-12-06T06:40:39.820
> 
> 标签：asp.net, formatting, aspbutton

我在 ajax AccordionPane 中使用了一个 asp.net 按钮控件，我想将 superscipt 应用于按钮的文本，例如“Button1 ^(*Demo) ”。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:26:51.100

像普通的 HTML/CSS 一样设置它的样式：

```
<button ID="btn" runat="server">Button 1 <sup>*Demo</sup></button> 
```

# c# - 我的自定义 sharepoint 2010 计时器作业未运行

> ID：13738263
> 
> 赞同：2
> 
> 时间：2012-12-06T06:41:06.863
> 
> 标签：c#, sharepoint, sharepoint-2010, sharepoint-timer-job

我创建了一个自定义计时器服务来创建一个列表。它使用 FeatureActivated 事件在几分钟内安排。我可以在全球范围内部署该解决方案。但是我的计时器作业没有运行。它显示上次运行时间不适用。有什么解决办法吗？

我的执行方法

```
 public override void Execute(Guid targetInstanceId)
    {
        ClientContext clientContext = new ClientContext("http://mymachine:0909");
        Web site = clientContext.Web;

        ListCreationInformation listCreationInfo = new ListCreationInformation();
        listCreationInfo.Title = "Test Mailer List";
        listCreationInfo.TemplateType = (int)ListTemplateType.GenericList;
        List list = site.Lists.Add(listCreationInfo);

        Field field1 = list.Fields.AddFieldAsXml(
                  @"<Field Type='Choice'
                  DisplayName='Category'
                  Format='Dropdown'>
             <Default>Specification</Default>
             <CHOICES>
               <CHOICE>Specification</CHOICE>
               <CHOICE>Development</CHOICE>
               <CHOICE>Test</CHOICE>
               <CHOICE>Documentation</CHOICE>
             </CHOICES>
           </Field>", true, AddFieldOptions.DefaultValue);
        Field field2 = list.Fields.AddFieldAsXml(
            @"<Field Type='Number'
                  DisplayName='Estimate'/>", true, AddFieldOptions.DefaultValue);
        clientContext.ExecuteQuery();
    } 
```

和事件接收器类

```
public class Feature1EventReceiver : SPFeatureReceiver
{

    public const string jobName = "BdayTimer";
    public override void FeatureActivated(SPFeatureReceiverProperties properties)
    {
        SPWebApplication webApp = properties.Feature.Parent as SPWebApplication;
        DeleteJob(webApp.JobDefinitions);
        TimerJobTest myJob = new TimerJobTest(webApp);

        SPMinuteSchedule schedule = new SPMinuteSchedule();
        schedule.BeginSecond = 0;
        schedule.EndSecond = 59;
        schedule.Interval = 1;

        myJob.Schedule = schedule;
        myJob.Update();

    }

    // Uncomment the method below to handle the event raised before a feature is deactivated.

    public override void FeatureDeactivating(SPFeatureReceiverProperties properties)
    {
        SPWebApplication webApp = properties.Feature.Parent as SPWebApplication;
        DeleteJob(webApp.JobDefinitions);
    }

    public void DeleteJob(SPJobDefinitionCollection job1)
    {
        foreach (SPJobDefinition job in job1)
        {
            if (job.Name.Equals(jobName))
                job.Delete();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:44:50.553

部署 SharePoint 项目时，应始终重新启动`sptimer`流程。尝试进入命令提示符（具有管理员访问权限）并键入：

```
net stop sptimerv4 
```

然后

```
net start sptimerv4 
```

您的代码现在应该可以正常工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T19:51:57.023

重置. `Central Administration Pool`_ `Internet Information Services`看来工作卡住了。重置池后，一切都重新开始工作。

# android - MediaPlayer 无法寻求无缓冲位置

> ID：13738264
> 
> 赞同：2
> 
> 时间：2012-12-06T06:41:08.347
> 
> 标签：android, video-streaming, media-player, seek

这仅发生在所有版本的 Android 中的某些特定视频文件（例如[此文件](http://stream1.s3.tv.zdn.vn/streaming/05b00e9f2e4d751d1a80f90dafec681c/50c03d36/2012/1203/bb/bbf9748f01bdfd83d873882afd3921c8.mp4)）中，但在 iOS 或 WP 甚至在使用 Vitamio 插件的 Andorid 中播放时，它是可搜索的。我认为流媒体视频文件必须满足一些条件才能被搜索。是对的吗？如果是这样，请告诉我使流式视频可搜索的条件。谢谢。

当我试图寻找上述文件的无缓冲位置时，这是错误日志。

```
12-06 12:01:50.705: E/MediaPlayer(909): Error (1,-1007) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T08:02:21.657

对于它的价值，谷歌浏览器和 Internet Explorer 也无法查找该文件，除非它已完全下载。

可能是网络服务器的问题，而不是文件的问题？

服务器必须支持通过 content-range 请求标头进行搜索才能进行搜索。（这里的机制描述：http: [//benramsey.com/blog/2008/05/206-partial-content-and-range-requests/](http://benramsey.com/blog/2008/05/206-partial-content-and-range-requests/)）。还需要准确的内容类型。而且我*认为 android*媒体播放器在某些情况下也会在 HTTP 响应中使用 DLNA 标头，尽管我不确定这一点。

您可能想要比较有效和无效网站的 HTTP 响应中的标头。

特别感兴趣的是响应中的“接受范围”标头。如果那不存在，Android 肯定不会寻求。它还可能需要或受益于响应中的“ContentFeatures.DLNA.ORG”标头，这是一个 DLNA 标头，描述了服务器的流式传输和搜索功能，以及对视频编码的更详细描述。

# php - 如何在 PHP 中将 MySQL 数据库文件 (.sql) 转换为 SQLite 文件？

> ID：13738270
> 
> 赞同：3
> 
> 时间：2012-12-06T06:41:33.837
> 
> 标签：php, mysql, sqlite, mysqldump

我有一个“.sql”格式的 MYSQL 数据库转储文件，但我需要“SQLite”文件，是否可以使用 php 脚本或任何其他方式将 .sql 文件转换为 SQLite 文件？

我也尝试过 shell 脚本代码，但这个脚本只创建 0 字节的文件。

谢谢 2 全部

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:18:36.730

基本上，转储文件包含表构建数据和要插入的行。在大多数情况下，这些`INSERT`命令应该可以在 SQLlite 上运行，但可能需要修改表构建。确切需要的更改取决于您如何获得 sql 转储文件（在哪个实用程序、版本、定义等中）。建议您尝试直接导入，并一一处理错误。比您可以编写自己的转换脚本。

如果您有任何问题，请在此处粘贴转储文件的问题部分。

祝你好运！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T06:44:08.200

转到 phpmyadmin 单击导出数据库下载为 sql 文件。

下载它....

转到您的 sql lite 管理软件导入 .sql 文件

完毕...

**如果您无权访问 PhpMyAdmin，您可以使用 mysql dump 命令并使用此文件将其导入您的 sqlite 数据库** [http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

# php - 两个或多个文件输入

> ID：13738271
> 
> 赞同：0
> 
> 时间：2012-12-06T06:41:55.053
> 
> 标签：php, html, file, file-upload

我有多个文件类型的输入

```
<form  name="vform" method="post" enctype="multipart/form-data" >
  <input type=file name='thumbs1' />
  <input type=file name='thumbs2' />
  <input type=file name='thumbs3' />
  ... etc
</form> 
```

假设我得到了文件输入的计数= 3

```
$i = 1;
while($i <= 3)
{
   $thumb = "thumbs".$i;
   $fileName = $_FILES['$thumb']['name'];
   $tmpName  = $_FILES['$thumb']['tmp_name']; 
   $filePath = "directory/";

   if(move_uploaded_file($tmpName, $filePath)){echo " ";}else{echo " ";}

   $i++;
} 
```

这里发生的是只有第一个获得文件名，但没有一个移动到预期的目录或其他任何地方。

处理多个文件输入时是否有特定的声明方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:46:25.937

删除单引号`$_FILES['$thumb']`并将其更改为`$_FILES[$thumb]`

PHP 不会解析单引号内的变量`' '`。

在`move_uploaded_file`功能上，您需要在移动之前指定目的地的文件名

```
$i = 1;
while($i <= 3)
{
   $thumb = "thumbs".$i;
   $fileName = $_FILES[$thumb]['name'];
   $tmpName  = $_FILES[$thumb]['tmp_name']; 
   $filePath = "directory/";

   if(move_uploaded_file($tmpName, $filePath.$fileName)){echo " ";}else{echo " ";}

   $i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:51:23.860

也许中的单引号`files`会是问题，试试这个

```
$i = 1;
while($i <= 3)
{
   $thumb = "thumbs".$i;
   $fileName = $_FILES[$thumb]['name'];
   $tmpName  = $_FILES[$thumb]['tmp_name']; 
   $filePath = "directory/".$filename;

   if(move_uploaded_file($tmpName, $filePath)){echo " ";}else{echo " ";}

   $i++;
} 
```

# r - 多元线性回归，其中所有列都是自变量

> ID：13738272
> 
> 赞同：0
> 
> 时间：2012-12-06T06:41:59.150
> 
> 标签：r, statistics, data-modeling, linear-regression

> **可能重复：**
> [构建模型时需要许多变量的简短公式](https://stackoverflow.com/questions/5774813/short-formula-call-for-many-variables-when-building-a-model)

我有一个包含 22,000 行和 2,000 列的数据框。列是样本，行是基因。

在这 22,000 个基因中，有 1,000 个是预测/独立变量。其余 21,000 个基因是响应/因变量。

我想编写一个模型，其中所有 1,000 个自变量预测因变量的结果，因此每个因变量的模型看起来像这样：

```
y ~ x1 + x2 + x3 + ... + x1000 
```

我知道在 R 中编写多元回归模型的方式是这样的：

```
example <- lm( y ~ x1 + x2 + x3, data=test) 
```

现在，数据框的所有变量都在行中，但我可以轻松地转换数据集。所以我有三个问题：

1.  如何编写上面的示例代码，这样我就可以合并所有 1000 个因变量而无需输入 x1 + ... + x1000？

2.  是否可以编写这个方程，以便可以从数据框中提取所有 1000 个因变量作为 ROWS？如果是这样，怎么做？

3.  我们如何自动保存来自 lm 输出的每个因变量的所有系数值？

# c# - 文本框中的工具提示

> ID：13738275
> 
> 赞同：0
> 
> 时间：2012-12-06T06:42:04.350
> 
> 标签：c#, winforms

大家好，我`ErrorProvider`在 C# 中使用，但我对它不满意。我希望它是这样的。工具提示仅出现在鼠标指针中。有什么想法吗？

**我希望它是这样的**：

![弹出工具提示](../Images/9650557940d1c7625b84c59cd41d6732.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:50:34.843

您可以像这样使用 ErrorProvider：

`errorProvider1.SetError(textBox1, "UserName is required")`

如果要设置错误以响应用户操作，则在对`Validating`来自文本框的事件做出反应时。一旦用户输入新的数据`Validated`事件将被触发，此时您可以删除错误：

`errorProvider1.SetError(textBox1, null)`

# android - 显示软键盘时隐藏视图

> ID：13738284
> 
> 赞同：3
> 
> 时间：2012-12-06T06:42:54.333
> 
> 标签：android, android-view, android-softkeyboard

下面的图片会更好地告诉你我到底想要什么（）..

在显示软键盘屏幕之前是..

![在此处输入图像描述](../Images/01910f1ea7cb5b514233e434ab58825f.png)

和

显示软键盘后，它应该看起来像这样..

![在此处输入图像描述](../Images/c66edc8ba5aa557fe3f50fb74aff95ce.png)

我的问题是，当软键盘显示它时，它隐藏了我不想隐藏但应该像上图一样显示的底部视图

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T06:46:29.510

在相应活动的清单中将 windowSoftInputMode 指定为“adjustResize”示例：

```
<activity android:label="@string/app_name" android:name=".LoginActivity" android:windowSoftInputMode="adjustResize"> 
```

# ruby - 带有 % 的 Google 图表格式数字

> ID：13738286
> 
> 赞同：1
> 
> 时间：2012-12-06T06:43:04.257
> 
> 标签：ruby, google-visualization

我正在尝试以百分比显示 vAxis 上的数字。我收到的数据范围是 0-100。我的 vAxis 应该在 0 到 100 之间，间隔为 20 点。

除了我想将数字显示为 10% 或 30% 之外，所有这些都有效。使用 format: '##%' 将数字乘以 100，如文档中所述。有什么简单有效的方法可以将数字显示为百分比？

```
{
  title: 'VP',

  vAxis: {
          title: 'G %',  
          titleTextStyle: {color: 'red'}, 
          gridlines: {count: 7}, 
          viewWindow: { min: 0, 
                        max: 100, 
                        valueLabelsInterval: 20
                      }
        },

  hAxis: {
          title: 'PD',  
          titleTextStyle: {color: 'red'}, 
          slantedText: true
        },

  pointSize: 4

} 
```

这就是我已经拥有的。图一

![这就是我所拥有的](../Images/2c0c42178c388870de2534229e247681.png)

如果我将 pointSize: 4 替换为 Series:

系列： {

```
 0: {

              lineWidth: 0,

              color: '#ff6600',

              pointSize: 4

           },

           1: { color: '#339999'}

        } 
```

然后这就是我得到的

![这就是我要的](../Images/29b4c875ef3259f480109062d68d16c8.png)

这就是我想要的。图 3 ![这也很容易](../Images/134c64dbd266014eb5db225d890e7fd5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:01:30.270

```
vAxis: {
          title: 'G %',  
          titleTextStyle: {color: 'red'}, 
          gridlines: {count: 7}, 
          viewWindow: { min: 0, 
                        max: 100, 
                        valueLabelsInterval: 20
                      },
          format:'##%',
        }, 
```

刚刚添加了`vAxis.format`属性。

# php - 使用 force_download 后无法调用控制器中的函数

> ID：13738288
> 
> 赞同：0
> 
> 时间：2012-12-06T06:43:08.407
> 
> 标签：php, codeigniter

这是我的代码。

```
$data = file_get_contents("gpsfile/".$name); // Read the file's contents
    force_download($name, $data);
$this->viewall(); 
```

如果我评论`force_download(),` `$this->viewall`函数调用有效'是 force_download() 不让调用.. 请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:26:03.093

使用后您不能调用任何函数`force_download`，根据帮助程序，`force_download`退出以便在执行后没有其他任何内容。所以你需要在你的视图文件中使用一些javascript来下载文件，然后在下载完成后调用所需的控制器函数。

# java - 在 Swing JFrame 上添加/删除 JFXPanel

> ID：13738294
> 
> 赞同：1
> 
> 时间：2012-12-06T06:43:28.840
> 
> 标签：java, swing, javafx-2, layout-manager, event-dispatch-thread

我想`JFXPanel`在`JFrame`容器上添加和删除，但不能这样做。我被困在这里并且在按钮单击时没有得到适当的解决方案我想添加和删除`JFXPanel` 控件。

这段代码有什么问题？

```
 public class abc extends JFrame
  {
  JFXPanel fxpanel;
  Container cp;
  public abc()
  {
  cp=this.getContentPane();
  cp.setLayout(null);
  JButton b1= new JButton("Ok");
  JButton b2= new JButton("hide");
  cp.add(b1);
  cp.add(b2);
  b1.setBounds(20,50,50,50);
  b2.setBounds(70,50,50,50);
  b1.addActionListener(this);
  b2.addActionListener(this);
  fxpanel= new JFXPanel();
  cp.add(fxpanel);
  fxpanel.setBounds(600,200,400,500);
 }

  public void actionPerformed(ActionEvent ae)
 { 
 if(ae.getActionCommand().equals("OK"))
  {
    fxpanel= new JFXPanel();
    cp.add(fxpanel);
    fxpanel.setBounds(600,200,400,500);

   }
  if(ae.getActionCommand().equals("hide"))
   { 
    cp.remove(fxpanel);
    }
   }
    public static void main(String args[])
   {

      abc f1= new abc();
      f1.show();
    }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:53:56.330

*   `JFrame`不要不必要地延长通话时间

*   不要使用`null`/`Absolute` `LayoutManager`

*   为什么`show()`要设置`JFrame`可见？你应该使用`setVisible(true)`

*   不要忘记 Swing 组件应该创建一个可操作的 `Event Dispatch Thread`via`SwingUtilities.invokeXXX`和 JavaFX 组件 via`Platform.runLater()`

除了上述之外，您遇到的最大问题是您在添加/删除组件后不刷新 GUI/容器，因此没有显示任何更改。：

调用`revalidate()`和实例以反映在可见容器中添加/删除组件后的更改`repaint()`。`JFrame`

# python - 在 Python 中根据来自客户端的事件触发事件并向服务器发送消息

> ID：13738298
> 
> 赞同：0
> 
> 时间：2012-12-06T06:44:07.310
> 
> 标签：python, multithreading, sockets, python-multithreading

假设我们在 localhost 的 6000 端口上运行一个服务器（比如服务器 A）。我们有自己的客户端与该服务器通信（向服务器 A 发送消息）。服务器 A 不时向运行在端口 7000 上的另一台服务器（例如服务器 B）发送消息，该服务器也在我们的控制之下。我们的客户端应该根据服务器 B 收到的某些消息向服务器发送消息。

这是我想要实现的一组示例步骤

1.  OurClient 向 ServerA 发送消息（JOIN）
2.  ServerA 向 ServerB 发送消息（确认）
3.  ServerA 向 ServerB 发送消息 (PATH_CLEAR)
4.  ServerB 通知 (PATH_CLEAR) 给 OurClient
5.  OurClient 向 ServerA 发送消息 (MOVE_FORWARD)
6.  ServerA 向 ServerB 发送消息 (MOVED_FORWARD_BY_A_CELL)
7.  ServerA 向 ServerB 发送消息（OBSTACLE_AHEAD）
8.  ServerB 通知 (OBSTACLE_AHEAD) 给 OurClient
9.  OurClient 向 ServerA 发送消息（STOP）
10.  ServerA 向ServerB 发送消息（已停止）...... ...

我在 Python 中使用套接字模块连接到服务器并创建我们的客户端和服务器。我应该使用线程来实现这种行为吗？如果是这样，我该怎么做？

我试图这样做这是我使用的代码 [How to trigger to response from a server using python socket programming](https://stackoverflow.com/questions/13501007/how-to-trigger-to-responses-from-a-server-using-python-socket-programming)

但是一旦另一台服务器接受了我的“#JOIN”消息，我就无法再发送消息了。我的客户在第一条消息之后没有发送消息。我该如何解决？

是否有任何替代方法可以做到这一点，或者我应该对我的代码进行任何更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:15:31.233

您不需要使用多线程，您可以使用模块“select”，我建议使用方法 poll，以了解哪些文件描述符已准备好使用。

一般来说，使用 select 或 poll 比使用线程更快。

# symfony - Symfony2 连接表以从另一个表中获取列

> ID：13738299
> 
> 赞同：1
> 
> 时间：2012-12-06T06:44:08.603
> 
> 标签：symfony, doctrine-orm

我对 MySQL 和 Doctrine 有点陌生，

我基本上有两张桌子`User`，`Role`就像这样

```
+--------------------------------------+--------------------+
|User                                  |   Role             |
|id    username    password    role    |   id    name       |
|1     testuser    something   1       |   1     ROLE_USER  |
+--------------------------------------+--------------------+ 
```

我按照 Symfony 网站上的教程进行操作，但我真的不知道如何`name`从用户实体中的角色获取。

目前它是这样写的：

[角色实体](http://pastebin.com/GfnZmdb1)

[用户实体片段](http://pastebin.com/hnpvkrKm)

老实说，我不知道它是否正确加入，任何帮助都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:04:20.743

您必须阅读学说文档。有[OneToMany](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html#many-to-one-unidirectional)关系映射的描述。

所以角色实体应该只包含`$id`和`$name`字段映射，但用户实体`$role`字段应该看起来像

```
/**
 * @ManyToOne(targetEntity="Role")
 * @JoinColumn(name="role", referencedColumnName="id")
 **/
private $role; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:26:44.163

除了我使用多对多关系外，我对用户和角色有类似的设置。毕竟，我认为大多数应用程序都希望能够为用户分配多个角色。

需要像下面这样设置关联。当然，您需要创建适当的 getter/setter 来为用户分配角色。

**用户**

```
/**
 * @ORM\ManyToMany(targetEntity="Role", cascade={"persist"})
 * @ORM\JoinTable(name="user_roles",
 *     joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id", onDelete="CASCADE")},
 *     inverseJoinColumns={@ORM\JoinColumn(name="role_id", referencedColumnName="id", onDelete="CASCADE")}
 * )
 */
protected $roles;

public function __construct() {
    $this->roles = new ArrayCollection();
} 
```

**角色**

```
/**
 * @ORM\ManyToMany(targetEntity="User", mappedBy="roles")
 */
protected $users;

public function __construct() {
    $this->users = new ArrayCollection();
} 
```

以上将允许您使用这样的角色：

```
$user = $this->getDoctrine()->getRepository('YourBundle:User')->find($id);
print_r($user->getRoles()->toArray()); 
```

# python - 在 PyScripter 中清理屏幕的命令？

> ID：13738301
> 
> 赞同：3
> 
> 时间：2012-12-06T06:44:18.840
> 
> 标签：python, pyscripter

每次在 PyScripter 中运行代码时，是否有一个命令可以清理 Python 解释器的屏幕？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T19:38:07.187

转到 pyscripter 菜单并在运行前选中清除输出框。工具>选项> IDE选项> Python解释器>运行前清除输出。

在交互式会话中非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:35:43.433

```
import os #top of script`
os.system('cls') #call whenever you want to clear terminal 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T14:27:10.780

```
import os
os.system('cls' if os.name=='nt' else 'clear') 
```

或者按照 jadkik94 的建议：

```
import subprocess
subprocess.call('cls' if os.name=='nt' else 'clear', shell=True) 
```

**更新**

我现在了解到您正在尝试清除 IDE 应用程序“PyScripter”中的解释器屏幕。我对这个 IDE 没有任何经验，但通常 IDE 是用于开发而不是用于实际部署，所以如果这是应用程序的一部分，并且您想查看它是否正常运行，您应该在命令中运行它/console 窗口并使用我和其他人在此处发布的方法。

如果您只想创建一个“干净”的窗口，但不介意它是否真的清除了控制台，您可以执行以下操作：

```
print "\n" * 100 
```

# codeigniter - 编辑时如何隐藏添加项目时可见的字段？

> ID：13738303
> 
> 赞同：1
> 
> 时间：2012-12-06T06:44:23.750
> 
> 标签：codeigniter, hidden-field, grocery-crud

我在编辑添加条目时必须可见的条目时尝试隐藏字段时遇到问题。

我的表结构如下：

```
equip_items
--------------
id (pk)
equip_type_id (fk to equip_types)
site_id (fk to sites)
equip_status_id (fk to equip_status)
name 
```

(equip_type_id, site_id, name) 是数据库中的复合唯一键约束。我已经在处理唯一约束的grocery_CRUD验证的名称字段上实现了一个回调 - 考虑到编辑现有的或添加新的equip_items。

```
function unique_equip_item_check($str, $edited_equip_item_id){
$var = $this->Equip_Item_model->is_unique_except($edited_equip_item_id,$this->input->post('site_id'),$this->input->post('equip_type_id'),$this->input->post('name'));

if ($var == FALSE) {
$s = 'You already have an equipment item of this type with this name.';
$this->form_validation->set_message('unique_equip_item_check', $s);
return FALSE;
} else {
return TRUE;
}
} 
```

我将 site_id 和equip_type_id 设置为隐藏字段，因为我不希望用户更改这些 - 没问题。

```
$crud->field_type('site_id', 'hidden', $site_id);
$crud->field_type('equip_status_id', 'hidden', iQS_EqStatus_InUse); 
```

当用户添加equip_item 时，我希望他们能够从类型列表中选择equip_type - 没问题，这是默认的grocery_CRUD 行为。

```
$crud->add_fields('equip_status_id', 'site_id', 'equip_type_id', 'name'); 
```

当用户编辑equip_item 时，我不希望用户能够编辑equip_type。我认为没问题我可以将edit_fields设置为排除equip_type_id：

```
$crud->edit_fields('equip_status_id', 'site_id', 'name', 'barcode_no'); 
```

但是这对我的验证回调造成了严重破坏，因为equip_type_id 字段的值在编辑表单上没有，而且我的验证例程显然需要它。

所以我需要让equip_type_id 字段在添加新记录时可见并正常运行，但在编辑记录时隐藏。

我已经尝试过所有黑客的黑客攻击：

```
if ($this->uri->segment(4)!= FALSE){$crud->field_type('equip_type_id', 'hidden');} 
```

我的理论是“$this->uri->segment(4)”仅在添加新记录时给出错误结果，但它不起作用。

我也试过：

```
$crud->callback_edit_field('equip_type_id', array($this,'edit_equip_type_field_callback')); 
```

和

```
function edit_equip_type_field_callback($value = '', $primary_key = null){
return '<input type="hidden" value="'.$value.'" name="equip_type_id"';
} 
```

但这不起作用，它只会破坏表单字段的布局——“类型”标签等仍然可见。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T22:03:41.653

我认为问题在于您必须将字段equip_status_id 添加到编辑字段中。

因此，在您的情况下，这将简单地解决您的问题：

```
$crud->edit_fields('equip_status_id', 'site_id', 
                        'name', 'barcode_no','equip_status_id'); 
```

或者

```
$crud->fields('equip_status_id', 'site_id', 'name',
                 'barcode_no','equip_status_id');  //for both add and edit form 
```

当然，您还必须使用您的技巧：

```
if ($this->uri->segment(4)!= FALSE) {
    $crud->field_type('equip_type_id', 'hidden');
} 
```

或者你可以用更合适的方式做到这一点：

```
$crud = new grocery_CRUD();

if ($crud->getState() == 'edit') {
    $crud->field_type('equip_type_id', 'hidden');
}

... 
```

通过这种方式，您还将记住为什么要对代码进行这种黑客攻击。

# asp.net-mvc - 我应该将 System.Web.Mvc 导入 Orchard 内容部分驱动程序吗？

> ID：13738306
> 
> 赞同：0
> 
> 时间：2012-12-06T06:44:32.313
> 
> 标签：asp.net-mvc, asp.net-mvc-4, orchardcms

我正忙于按照 Orchard 文档中的教程向*用户*内容类型添加自定义内容部分。它使用一个视图模型来声明一个用于下拉列表的列表，如下所示：

```
public IEnumerable<SubscriptionPackageRecord> Packages { get; set; }
...
Packages = _userSubscriptionService.GetPackages() 
```

`GetPackages`在哪里`IEnumerable<SubscriptionPackageRecord> GetPackages()`。然后，在编辑器模板中，他们使用有点笨拙的代码来填充下拉列表：

```
@Html.DropDownListFor(model => model.PackageId,
                  Model.Packages.Select(s => new SelectListItem {
                      Selected = s.Id == Model.PackageId,
                      Text = s.Name,
                      Value = s.Id
                  }),
                  "Choose a package...") 
```

我希望将模型的 Packages 属性声明为 SelectList 类型，并使用简单的一行调用`DropDownListFor`，但我怀疑在更接近业务层类（内容部分驱动程序）中创建选择列表的实践是否良好。`System.Web.Mvc`导入驱动程序类并在那里创建和分配一个`SelectList`对象会是不好的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:05:11.503

就保持纯业务对象而言，部件已经与 Orchard 相关联，我认为您不会使其变得更加依赖。如果感觉不对，也许只是为这个视图使用一个单独的模型？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:18:55.563

SelectListItem 是一个纯粹与 UI 相关的实体，在视图中创建它是正确的做法。在这里，我们将包的视图模型转换为 DropDownListFor 方法所需的对象。

将 SelectListItems 的创建移到驱动程序中相当于将视图逻辑移到控制器中。它使驱动程序对将如何渲染做出假设。如果您覆盖该形状以使用 HTML 以外的其他技术或一些基于脚本的精美 UI 元素怎么办？如果该列表有多个表示形式怎么办？

# android - Launcher2 中的 BubbleTextView

> ID：13738309
> 
> 赞同：0
> 
> 时间：2012-12-06T06:44:48.367
> 
> 标签：android, view, android-launcher

我是一个新的Android程序员。我正在探索 Android 源代码包中的 Laucher2 应用程序。有一个从 TextView 扩展的奇怪视图 - application.xml 和 folder_icon.xml 中使用的“BubbleTextView”。有人知道这种观点的真正含义吗？它的目的是什么？（我已经浏览了文件 BubbleTextView.java 但我仍然对此感到困惑）非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:50:39.703

图标是在launcher2 中的BubbleTextView 的帮助下放置的。setCompundDrawableWithIntrinsicBounds() 用于将图标放置在 BubbleTextView 上方。TextView 在这里实现以创建某种效果，我猜

# android - 如何在android listfragment中加载多个列表？

> ID：13738314
> 
> 赞同：0
> 
> 时间：2012-12-06T06:45:15.567
> 
> 标签：android, android-fragments

我的 android 应用程序中有多个列表片段。我想通过从第一个列表片段中获取输入来加载第二个列表片段。如何通过从第一个片段中获取点击位置来加载第二个列表片段。目前第二个 listfragment 仅显示加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:55:45.033

这个问题意味着您知道如何显示新片段，并且您知道如何为列表项设置点击事件。因此，您应该在第二个列表片段中定义以下代码：

```
public class SecondListFragment extends ListFragment {

public static SecondListFragment newInstance(int positionFromPreviousList){
            SecondListFragment f = new SecondListFragment();

            Bundle args = new Bundle();
            args.putInt("position", positionFromPreviousList);
            f.setArguments(args);

            return f;
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){

            ...

            int position = getArguments().getInt("position");
            //Show what you want with this position
            ...
        }
} 
```

在您的列表项中单击侦听器将新片段初始化为

```
Fragment fr = SecondListFagment(position); 
```

# php - Zencart 主页定制

> ID：13738319
> 
> 赞同：0
> 
> 时间：2012-12-06T06:45:27.620
> 
> 标签：php, html, zen-cart

我正在定制一个 zen-cart 模板。我想编辑 newProduct、FeaturedProduct 部分，但我不明白应该编辑哪些文件。

我知道我可以用 css 设置它们的样式，但我想将 html 表结构更改为 html 无序列表结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:56:24.713

假设您要编辑中心框部分，而不是边框​​或新/特色页面，您需要编辑 include/modules/new_products.php 和 includes/modules/featured_products.php（它也可能在您的自定义模板文件夹中，因此请确保检查覆盖文件是否存在于 include/modules/YOUR_TEMPLATE_NAME/ 目录中）。

# android - 字段中最大值的Android SQLite语法

> ID：13738323
> 
> 赞同：3
> 
> 时间：2012-12-06T06:45:43.517
> 
> 标签：android, sqlite

尝试通过 SQLite 查询获取列中的最大值。从我正在阅读的所有内容中，我的代码应该可以工作。但事实并非如此。这是代码：

```
SQLiteDatabase db = myDBOpenHelper.getWritableDatabase(); 
Cursor cursor = db.rawQuery("SELECT MAX(GAME_COLUMN) FROM GAMES_TABLE", null); 
```

此时桌子是空的，我认为这并不重要。这是错误：

> sqlite 返回：错误代码 = 1，msg = 接近“null”：语法错误

我一定是写错了，但我没有看到错误。正确输入表名和列名。有人能发现这个吗？

如果我忽略了一些愚蠢的事情，请提前道歉。SQLite 很新。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T07:20:11.990

似乎`GAMES_TABLE`&`GAME_COLUMN`是 String 类型的变量。

如果这些是可变的，那么您必须编写查询

`"SELECT MAX("+GAME_COLUMN+") FROM "+GAMES_TABLE`

最好使用查询而不是 rawQuery，如下所示

```
db.query(GAMES_TABLE, new String [] {"MAX("+GAME_COLUMN+")"}, null, null, null, null, null); 
```

# opengl-es - opengl制作许多纹理2的幂

> ID：13738325
> 
> 赞同：2
> 
> 时间：2012-12-06T06:45:48.493
> 
> 标签：opengl-es, textures

我有许多（113）由搅拌机创建的纹理图像（一个 obj 和一个引用纹理的 mtl 文件）不是 2 的幂。当我尝试使用单个纹理（2 的幂）渲染一个简单对象时，它工作正常，但是对于我上面描述的复杂对象，它只绘制几何图形（一切都是白色的，没有纹理）。

这是因为我的纹理尺寸吗？如果是，是否有解决方案可以在运行时制作许多纹理/位图的二次幂？（我不知道尺寸。）

我也怀疑是否`glbindtexture`正确使用（我正在使用 Android。）首先，我调用`glgentextures(<number_of_objects>, textureArray)`. 然后，在每个对象的循环中，我调用`glbindtexture(..._2D, textureArray[i])`了 GLutils.texImage2D(...)。最后，在绘图时间，我调用`glbindtexture(..., textureArray[i])`然后`gldrawarrays`。

这有什么问题吗？（已编辑）我忘了说，我正在使用 opengl es 1.1，我在某处读到 opengl es 1.1 不支持 NPOT 纹理。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:06:17.347

运行此方法以检查 OpenGL 驱动程序状态错误：

```
public void checkGlError(String op) {
    int error;
    while ((error = GLES20.glGetError()) != GLES20.GL_NO_ERROR) {
            Log.e("ShadingZen", op + ": glError " + error);
            //throw new RuntimeException(op + ": glError " + error);
    }
 } 
```

根据您的测试设备，可能无法使用两种纹理的非幂次。此代码向您展示如何将它们转换为 ^2 大小（在 android 中）：

```
int calculateUpperPowerOfTwo(int v)
{
    v--;
    v |= v >>> 1;
    v |= v >>> 2;
    v |= v >>> 4;
    v |= v >>> 8;
    v |= v >>> 16;
    v++;
    return v;

}

boolean isPowerOfTwo(int i){
    return ( i & (i - 1)) == 0;
}

boolean loadAsTexture2D(Context context, String id, int resource_id, BitmapTexture.Parameters params){
    _bmps = new Bitmap[1];
    Matrix flip = new Matrix();
    flip.postScale(1f, -1f);

    BitmapFactory.Options opts = new BitmapFactory.Options();
    opts.inScaled = false;
    Bitmap textureBmp = BitmapFactory.decodeResource(context.getResources(), resource_id, opts);

    if(!isPowerOfTwo(textureBmp.getWidth()) || !isPowerOfTwo(textureBmp.getHeight())){
        int target_width = calculateUpperPowerOfTwo(textureBmp.getWidth());
        int target_height = calculateUpperPowerOfTwo(textureBmp.getHeight());

        Log.i("ShadingZen", "Texture id=" + id + " has no power of two dimesions " + textureBmp.getWidth() + "x" + textureBmp.getHeight() + " adjusting to " + target_width + "x" + target_height);

        Bitmap temp =  Bitmap.createBitmap(textureBmp, 0, 0, textureBmp.getWidth(), textureBmp.getHeight(), flip, false);
        _bmps[0] = Bitmap.createScaledBitmap(temp, target_width, target_height, false);
        temp.recycle();
    } else{
        _bmps[0]  = Bitmap.createBitmap(textureBmp, 0, 0, textureBmp.getWidth(), textureBmp.getHeight(), flip, false);
    }

    textureBmp.recycle();
    // At this point _bmp[0] contains a ^2 bitmap

} 
```

检查此类以获取更多信息：[https ://github.com/TraxNet/ShadingZen/blob/master/library/src/main/java/org/traxnet/shadingzen/core/BitmapTexture.java](https://github.com/TraxNet/ShadingZen/blob/master/library/src/main/java/org/traxnet/shadingzen/core/BitmapTexture.java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T08:08:24.447

当您生成纹理时，要使用非 2 个纹理的幂，您需要启用这些参数

```
glGenTextures(1, &nID);
glBindTexture(GL_TEXTURE_2D, nID);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR); //should probably use these
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE); //these let you use NPOT textures
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
```

# jsp - 使用检查双精度值 JSTL 声明

> ID：13738326
> 
> 赞同：0
> 
> 时间：2012-12-06T06:46:02.177
> 
> 标签：jsp, jstl

我有这样的代码，

```
<c:if test="${total gt "+"<%=assignedValue%>"+"}">
<p>Your total value is greater than the assignedValue</p>
</c:if> 
```

并且“addignedValue”是从java返回的，

```
<%
      Calculate cal = new Calulate();
      double assignedValue = Double.parseDouble(cal.getAssignedValue());%> 
```

但是我无法在标签内检查...

任何帮助将不胜感激。谢谢你...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:21:02.667

您必须从脚本变量创建一个作用域变量。而不是使用

```
<%
  Calculate cal = new Calulate();
  double assignedValue = Double.parseDouble(cal.getAssignedValue());%> 
```

利用

```
<%
   Calculate cal = new Calulate();
   pageContext.setAttribute("assignedValue", cal.getAssignedValue());
%> 
```

和

```
<c:if test="${total gt assignedValue}">
    <p>Your total value is greater than the assignedValue</p>
</c:if> 
```

# android-gridview - 将图像从 sd 卡加载到网格视图导致位图超出 VM 预算

> ID：13738328
> 
> 赞同：0
> 
> 时间：2012-12-06T06:46:10.763
> 
> 标签：android-gridview, bitmapimage, image-loading

在我的应用程序中，我在网格视图中从 sd 卡加载图像几乎 40 到 50 个图像为此我创建了适配器，其中构造函数将图像从 sd 卡加载到位图数组列表的全局变量，在获取视图中我从数组列表返回位图问题从这个活动用户将移动到其他活动，删除后他将删除图像用户将返回网格活动并必须再次加载适配器，这会创建“位图超出 vm 预算”。所以我不知道这种从 sd 卡加载图像的方法有没有更好的方法可以用于从 sd 卡加载图像而没有内存泄漏的任何库

```
public class PicAdapter extends BaseAdapter {

    int defaultItemBackground;

    private Context galleryContext;

    Bitmap placeholder;

    public PicAdapter(Context c) {

        // instantiate context
        galleryContext = c;

        // create bitmap array
        bitmaplist=new ArrayList<Bitmap>();
        GlobalData.imageBitmaps = new WeakReference<ArrayList<Bitmap>>(bitmaplist);
        imageDescription = new ArrayList<String>();
        imagetitle = new ArrayList<String>();

        picturesCursor.moveToFirst();
        int i = 0;
        for (i = 0; i < picturesCursor.getCount(); i++) {

            String imagepath = picturesCursor.getString(picturesCursor
                    .getColumnIndex("img"));
            File cacheimage=new File(imagepath);

            if(!cacheimage.exists())
            {
                dBopenHelper.deleteHappyMoments(imagepath);

            }
            else
            {
            Bitmap bitmap = 
                    ViewUtils.decodeSampledBitmapFromResource(imagepath,
                            AppConstants.FRAME_WIDTH,
                            AppConstants.FRAME_HEIGHT);

            ViewUtils.recycleBitmapFrame();
            GlobalData.imageBitmaps.get().add(bitmap);
            imageDescription.add(picturesCursor.getString(picturesCursor
                    .getColumnIndex("image_description")));
            imagetitle.add(picturesCursor.getString(picturesCursor
                    .getColumnIndex("image_title")));
            picturesCursor.moveToNext();
            }

        }

        if (i == picturesCursor.getCount()) {

            Bitmap bitmap = (Bitmap) BitmapFactory.decodeResource(getResources(), R.drawable.add_new);
            GlobalData.imageBitmaps.get().add(bitmap);
            imageDescription.add(
                    "Click Add to new Pictures..............");
        }

        // get the styling attributes - use default Andorid system resources

    }

    // BaseAdapter methods

    // return number of data items i.e. bitmap images
    public int getCount() {

        return bitmaplist.size();
    }

    // return item at specified position
    public Object getItem(int position) {
        return position;
    }

    // return item ID at specified position
    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        if (convertView == null) {
            convertView = (ImageView) getLayoutInflater().inflate(
                    R.layout.item_grid_image, null);

            convertView.setLayoutParams(new GridView.LayoutParams(
                    AppConstants.FRAME_WIDTH, AppConstants.FRAME_HEIGHT));

        }
        galleryImageView = (ImageView) convertView;

        galleryImageView.setImageBitmap(GlobalData.imageBitmaps.get().get(position));

    public void addPic(Bitmap newPic) {
        // set at currently selected index
        GlobalData.imageBitmaps.get().add(currentPic, newPic);
    }

    // return bitmap at specified position for larger display
    public Bitmap getPic(int posn) {
        // return bitmap at posn index
        return GlobalData.imageBitmaps.get().get(posn);
    }
} 
```

示例代码对我有很大帮助

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:16:44.973

1.  如果您的图像具有高尺寸 - 您需要使用某种队列逐个显示它们。
2.  确保正确解码它们。

# c# - IEnumerable 上的 ToList() 如何工作？

> ID：13738329
> 
> 赞同：8
> 
> 时间：2012-12-06T06:46:11.193
> 
> 标签：c#, .net, list, ienumerable

扩展方法如何`ToList()`工作？假设我有`IEnumerable`10000 个项目。将`ToList()`创建一个新的`List`并迭代`IEnumerable`10000 个项目，然后返回给我一个`List`或 .NET 是否以其他方式做到这一点？

这个[MSDN 链接](http://msdn.microsoft.com/en-us/library/bb342261.aspx)讨论了立即执行数据库查询。我的问题只是关于转换`IEnumerable`为`List`.

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-06T06:49:50.483

它不一定会迭代，尽管那是“最坏的情况”。基本上它调用`new List<T>(source)`，但这有一些技巧：如果源实现`ICollection<T>`，构造函数可以调用[`ICollection<T>.CopyTo()`](http://msdn.microsoft.com/en-us/library/0efx51xw.aspx)以将完整的数据复制到数组中。这可能比单步迭代更有效地实现。同样在这种`ICollection<T>`情况下，新列表知道开始的最终大小，因此它不需要继续扩展其内部缓冲区。

有关更多详细信息，请参阅我的[Edulinq`ToList()`博客文章](http://codeblog.jonskeet.uk/2011/01/01/reimplementing-linq-to-objects-part-20-tolist)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T06:50:38.133

`.ToList`扩展方法调用构造函数，[`List<T>`](http://msdn.microsoft.com/en-us/library/fkbw11z0.aspx)将`IEnumerable<T>`. 此构造函数将遍历并以返回的相同顺序`IEnumerable<T>`复制 的元素。`IEnumerable<T>`

# css - 嵌套 CSS 有哪些问题/缺点？

> ID：13738336
> 
> 赞同：0
> 
> 时间：2012-12-06T06:46:29.587
> 
> 标签：css, nested, sass

我通常更喜欢 Sass 而不是 CSS，一个重要原因是它允许我编写嵌套规则，这通常会减少我编写的代码量。

但是，我想知道这个想法是否有任何缺点。编写嵌套 CSS 代码时会出现什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:51:53.807

你应该只在你需要使用 CSS 时尽可能具体 - 它很容易被带走并最终得到像这样的选择器`div#body #content #sidebar ul.results li a`，这是 a) 难以阅读，b) 浏览器解释速度较慢，c) 几乎不可能如果需要，可以覆盖。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-06T06:54:56.323

我认为使用 SASS 或 LESS 进行调试会有点困难

# ios - 如何在 iOS 中找到线程的状态？

> ID：13738339
> 
> 赞同：1
> 
> 时间：2012-12-06T06:46:39.897
> 
> 标签：ios, multithreading, time, state, performance

我已经实现了一些线程函数（我使用过`NSInvocaionOperation`），这些函数在不干扰 UI 响应的情况下执行一些后台进程。一切正常，我在操作队列中添加的所有选择器都被调用了。（我通过将 NSLog 放在所有选择器方法中来这么说）。

我想知道更多细节来检查/检查每个线程的状态。

那是，

*   我可以测量选择器完成的时间吗？
*   我可以知道特定线程的当前状态吗？

如果您添加更多关于线程优化的要点，这将非常有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T08:28:47.017

您可以通过调用诸如 –isExecuting –isFinished –isCancelled 之类的方法来获取线程执行状态，这些方法返回 bool。

[也看看这个](http://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Classes/NSThread_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:34:01.100

目前，在 iOS 上进行线程优化的最佳方法是忘记显式线程管理，而改用 Grand Central Dispatch。这并不适用于所有情况，但是如果您只是在编写时在后台调用一些选择器，那么显式线程显然是矫枉过正的。

这是使用 GCD 将选择器旋转到后台的方式：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    [self doSomeLongerTask]; // runs in a background thread
    dispatch_async(dispatch_get_main_queue(), ^{
        [self reportOperationDone]; // runs on the UI thread
    });
}); 
```

# java - 在java中导入类文件

> ID：13738343
> 
> 赞同：8
> 
> 时间：2012-12-06T06:47:00.130
> 
> 标签：java, import, package, javac

我有一个主目录（包含 main.java）和一个子目录（包含 child.java）。

我的问题是如何在 main.java 中实例化 child.java

1.  我已经公开了子类。& 将第 1 行添加为`package mypackage`
2.  我已经编译`child.class`了它，`javac -d . child.java`它创建了一个新的 mypackage 目录。
3.  我尝试按如下方式在 main 中导入子类：（`import subdirectory.mypackage.*`注意 -d 选项将 child.class 放在 mypackage 文件夹中）
4.  我用“javac main.java”编译了 main.java 文件

我收到以下错误：

```
mainAESE.java:9: cannot access subdirectory.child
bad class file: RegularFileObject[./subdirectory/child
class file contains wrong class: mypackage.child
Please remove or make sure it appears in the correct subdirectory of the class
child childInstance= new child();
^
1 error 
```

请帮我！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T07:06:42.143

确保包文件夹`mypackage`与`Main.class`父文件夹共享。

```
package mypackage;
public class Child {} 
```

我假设`Main` 该类是在`default`包中创建的。

```
public class Main {
   public static void main(String []args){
         mypackage.Child child=new mypackage.Child();
   }
} 
```

你的目录结构应该是：

```
main-directory/
              |
              |----/mypackage/
                            Child.class
              |
              | Main.class
              | Main.java
              | Child.java 
```

并启动/加载`Main`以下命令的问题，

> java 主程序

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T06:51:35.820

你需要做两件事。

1.  将您当前的导入替换为`import mypackage.child`

    导入需要反映您要导入的类的[完全限定名称。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.7)它与您机器上类文件的位置无关。您也可以`import mypackage.*`从包中导入所有类，`mypackage`而不是单独指定您想要的类……这只是一种编码风格选择。

2.  添加`subdirectory`到您的类路径

    另一方面，类路径*确实*与您机器上类文件的位置有关。顾名思义，它列出了 JVM 应在其中查找程序使用的类的所有位置的路径。或者，正如 Oracle 所说，[“类路径告诉 JDK 工具和应用程序在哪里可以找到第三方和用户定义的类。”](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html) 您不需要告诉 Java 在哪里可以找到它附带的特殊类（例如`String`）。

    #2 的说明取决于您运行程序的方式（从命令行或 Eclipse 或其他方式）。由于您使用的是命令行（根据您的评论），因此您需要使用`-classpath`标志或其简写形式，`-cp`如下所示：`java -cp ./subdirectory main`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T06:59:46.100

您有以下文件：

main.java mypackage/child.java

在 main.java 中，第一行应该是：

```
import mypackage.child; 
```

从 main.java 所在的目录运行

```
javac mypackage/child.java 
```

接着：

```
javac main.java 
```

mypackage 应该包含 child.java 和 child.class

java main 应该可以工作，因为它会在名为 mypackage 的子目录中查找子目录。

# iphone - 移动位于键盘下方的 UITextField

> ID：13738344
> 
> 赞同：0
> 
> 时间：2012-12-06T06:47:03.847
> 
> 标签：iphone, ios, ios6, uitextfield, uikeyboard

所以就像我确定每个 iOS 程序员我都遇到了一个问题，当试图让一个页面充满 UITextFields 时，很明显当键盘出现时它覆盖了其中的一半。所以我去了Apple的文档并阅读了所有相关内容并为其编写了代码，但它对我不起作用。每次我运行视图它都会崩溃。在此先感谢您的帮助。

`.h`文件

```
 @interface NewUserViewController : UIViewController{

   } 

    - (IBAction)signMeUpButtonPressed:(id)sender;

    @property (weak, nonatomic) IBOutlet UITextField *activeField;
    @property (weak, nonatomic) IBOutlet UIScrollView *contentScrollView;
    @property (weak, nonatomic) IBOutlet UIButton *backButton;
    @property (weak, nonatomic) IBOutlet UILabel *firstNameLabel;
    @property (weak, nonatomic) IBOutlet UITextField *firstNameInput;
    @property (weak, nonatomic) IBOutlet UILabel *lastNameLabel;
    @property (weak, nonatomic) IBOutlet UITextField *lastNameInput;
    @property (weak, nonatomic) IBOutlet UILabel *usernameLabel;
    @property (weak, nonatomic) IBOutlet UITextField *usernameInput;
    @property (weak, nonatomic) IBOutlet UILabel *emailLabel;
    @property (weak, nonatomic) IBOutlet UITextField *emailInput;
    @property (weak, nonatomic) IBOutlet UILabel *passwordLabel;
    @property (weak, nonatomic) IBOutlet UITextField *setPasswordInput;
    @property (weak, nonatomic) IBOutlet UILabel *reenterPasswordLabel;
    @property (weak, nonatomic) IBOutlet UITextField *checkSetPasswordInput;
    @property (weak, nonatomic) IBOutlet UIButton *signMeUpButton; 
```

所有都连接到他们的插座（除了活动场。我不确定它属于哪里或应该连接到什么）

`.m`文件

```
@implementation NewUserViewController

@synthesize contentScrollView;
@synthesize activeField;
@synthesize firstNameLabel, lastNameLabel, usernameLabel, emailLabel, passwordLabel, reenterPasswordLabel;
@synthesize firstNameInput, lastNameInput, usernameInput, emailInput, setPasswordInput, checkSetPasswordInput;
@synthesize backButton, signMeUpButton;
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
activeField = textField;
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
activeField = nil;
}

- (void)registerForKeyboardNotifications
{
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWasShown:)
                                                 name:UIKeyboardDidShowNotification object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillBeHidden:)
                                                 name:UIKeyboardWillHideNotification object:nil];

}

// Called when the UIKeyboardDidShowNotification is sent.
- (void)keyboardWasShown:(NSNotification*)aNotification
{
    NSDictionary* info = [aNotification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);
    contentScrollView.contentInset = contentInsets;
    contentScrollView.scrollIndicatorInsets = contentInsets;

    // If active text field is hidden by keyboard, scroll it so it's visible
    // Your application might not need or want this behavior.
    CGRect aRect = self.view.frame;
    aRect.size.height -= kbSize.height;
    if (!CGRectContainsPoint(aRect, activeField.frame.origin) ) {
        CGPoint scrollPoint = CGPointMake(0.0, activeField.frame.origin.y-kbSize.height);
        [contentScrollView setContentOffset:scrollPoint animated:YES];
    }
}

// Called when the UIKeyboardWillHideNotification is sent
- (void)keyboardWillBeHidden:(NSNotification*)aNotification
{
    UIEdgeInsets contentInsets = UIEdgeInsetsZero;
    contentScrollView.contentInset = contentInsets;
    contentScrollView.scrollIndicatorInsets = contentInsets;
}

- (IBAction)signMeUpButtonPressed:(id)sender {
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:25:52.277

试试这个：

```
- (void)keyboardWasShown:(NSNotification *)notification {

    NSDictionary* userInfo = [notification userInfo];

    CGRect keyboardEndFrame;

    [[userInfo objectForKey:UIKeyboardFrameEndUserInfoKey] getValue:&keyboardEndFrame];
//offset is global
    offset = contentScrollView.contentOffset;

    CGRect viewFrame = contentScrollView.frame;
    CGRect keyboardFrame = [self convertRect:keyboardEndFrame toView:nil];
    viewFrame.size.height -= keyboardFrame.size.height;
    contentScrollView.frame = viewFrame;

    UITextField *current = (UITextField *)[self findFirstResponder];
    CGRect textFieldRect = current.frame;

    [contentScrollView scrollRectToVisible:textFieldRect animated:YES];

}
- (UIView *)findFirstResponder {
    for (UIView *subView in  scrollView.subviews) {
        if ([subView isFirstResponder]){
            return subView;
        }
    }
    return nil;
}

- (void) keyboardWillBeHidden:(NSNotification *)notification {

//scrollViewFrame is global the first frame of you scrollview
    contentScrollView.frame = scrollViewFrame;

    contentScrollView.contentOffset =offset;

} 
```

这不是一个完整的代码，这只是执行您想要做的事情的一个小逻辑。

# jquery - jQuery下载列表中的所有文件

> ID：13738345
> 
> 赞同：2
> 
> 时间：2012-12-06T06:47:03.300
> 
> 标签：jquery, download

是否可以使用 jQuery 使用按钮或链接下载 ul 列表中的所有文件？

```
<ul>
  <li> <a href="/downloads/1231/file-01.zip">file-01.zip</a> </li>
  <li> <a href="/downloads/5432/file-02.jpg">file-02.jpg</a> </li>
  <li> <a href="/downloads/2234/file-03.pdf">file-03.pdf</a> </li>
</ul>
<a href="#">Download all files</a> 
```

如果可以压缩它们会很好，但不是必需的（可以下载多个文件）。

我看过以下[https://github.com/biesiad/multiDownload](https://github.com/biesiad/multiDownload)

```
<ul>
  <li> <a id="1" href="/downloads/1231/file-01.zip">file-01.zip</a> </li>
  <li> <a id="2" href="/downloads/5432/file-02.jpg">file-02.jpg</a> </li>
  <li> <a id="3" href="/downloads/2234/file-03.pdf">file-03.pdf</a> </li>
</ul>
<a id='t' href="">trigger</a>

  <script type="text/javascript" language="javascript" charset="utf-8">
    $('#1').multiDownloadAdd();
    $('#2').multiDownloadAdd();
    $('#3').multiDownloadAdd();
    $('#t').multiDownload('click');
  </script> 
```

但是，我的下载列表中将包含不同数量的列表项，并且我将在同一页面上有多个下载列表。

我需要一些可以计算列表中所有项目的代码，并将它们添加到“multiDownloadAdd”

需要有一种方法，只允许同一 UL 中的文件一起下载。

服务器还会为每次下载创建一个文件夹，因此每个文件都有一个单独的文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:54:28.850

创建所有多个文件的存档或 zip，然后像这样使用它`<a href="/download/file.zip">Download all files</a>`。

如果文件列表是动态的，则使用此[javascript 插件](http://gildas-lormeau.github.com/zip.js/)创建 zip 文件并在 html 页面中提供相同的链接。

# c++ - 代码中对象的大小

> ID：13738346
> 
> 赞同：0
> 
> 时间：2012-12-06T06:47:09.367
> 
> 标签：c++

什么线 **int Test::i;** 在下面的程序中。有人请解释

```
// Assume that integers take 4 bytes.
#include<iostream>

using namespace std;   

class Test
{
  static int i;
  int j;
};

int Test::i;

int main()
{
    cout << sizeof(Test);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:47:53.623

`static`这是定义类成员的语法。它初始化`Test::i`为`0`。

为了给它另一个价值，你可以做

```
int Tent::i = 42; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T06:52:21.190

```
int Test::i; 
```

默认情况下定义初始化它`i`的类的静态成员。`Test``0`

```
static int i; 
```

只是声明成员`i`但没有定义它。您需要单独放置定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T07:02:51.630

有问题的行定义（实例化）类 Test 中的静态变量 i 并将其初始化为默认值零。

程序写出类型为 Test 的对象的大小，即 int "j" 的大小（以字节为单位）。该数字取决于平台。一个32位的Windows程序会写4。变量“i”没有进入，因为它不是Test类对象的成员，而是一个“静态成员”，它就像一个全局变量，只是它是只能通过类 Test 的命名空间访问。

# sharepoint - 如何根据 sharepoint 2010 中的日期差异限制列表条目

> ID：13738352
> 
> 赞同：0
> 
> 时间：2012-12-06T06:47:49.507
> 
> 标签：sharepoint, sharepoint-2010, validation

我在 SharePoint 2010 中有一个问题，我在一个列表中有两列`STARTDATE`AND 。`ENDDATE`如果开始日期和结束日期之间的差等于 12 个月，则插入记录，否则显示错误。

我使用了以下公式，但即使我输入了正确的值，我也无法在列表中插入记录。

```
Values:
Start date 6/12/2012
End date 24/12/2013 
```

公式：`DATEDIFF([Start Date],[End Date],"ym") = 12`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:23:49.933

尝试以 MM/dd/yyyy 格式而不是 dd/MM/yyyy 格式插入日期，然后查看结果。

# ant - ANT：使用目标属性时 Foreach 不排除文件

> ID：13738355
> 
> 赞同：0
> 
> 时间：2012-12-06T06:47:53.087
> 
> 标签：ant, ant-contrib

我有一个 foreach 标签来执行特定目录中的所有文件。作为文件集的一部分，我排除了两个文件。

但不管排除文件，参数仍然将这两个文件传递给目标“runpART”

我不想调用排除文件的目标。

让我知道是否有任何方法可以做到这一点。以下似乎不起作用

```
 <foreach target="runART" param="p.schedulerFile" inheritall="true" inheritrefs="true">
        <path>
            <fileset dir="${p.dir}" casesensitive="no">
                <!--<include name="**\*.xml"/>-->
                <excludesfile name="${pART.dir}\CodeCoverage_NSR.xml"/>
                <excludesfile name="${pART.dir}\CodeCoverageRegression_HLR.xml"/>
            </fileset>
        </path> 
    </foreach> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:48:00.557

你不想要 <excludesfile >，它需要一个包含排除模式的文件，你想要

```
 <exclude name="CodeCoverage_NSR.xml">
 <exclude name="CodeCoverageRegression_HLR.xml"> 
```

现在，假设您打算拥有 ${p.dir} == ${pART.dir}。文件集中的排除模式必须相对于文件集的根目录（这里是它的 dir="${p.dir}"）。有关详细信息，请参阅：[http ://ant.apache.org/manual/Types/fileset.html](http://ant.apache.org/manual/Types/fileset.html)

# svn - 签出 SVN 存储库并导出到另一台服务器

> ID：13738356
> 
> 赞同：2
> 
> 时间：2012-12-06T06:47:55.027
> 
> 标签：svn

我正在尝试签出一个 SVN 存储库并将其推送到另一个远程存储库，同时尝试维护所有提交历史记录。

做以下正确的方法吗？

*   svn co [网址]
*   svn 出口 [新网址]

进行代码更改，添加新文件，提交：-

*   svn commit -m '提交信息'

但是，我担心提交会发生在`url`而不是`new-url`. 为了进行提交，`new-url`我是否必须`new-url`再次签出回购然后提交？

这是做这件事的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:55:15.993

1.  `svn export`创建您的工作副本的**无版本副本**，即：它不能提交到任何地方，它不包含任何（需要的）元信息
2.  svn-sync 真的是更自然的方式

但是，如果你**真的想**手动支持镜像存储库（我仍然建议从原始数据转储创建镜像），从*some-rev*开始，你**可以**做到（以下 SRC 和 MIRROR 是“原始” repo 的简写和“克隆”）。

起点：您拥有 SRC@SOME-REV、MIRROR@SOME-REV 和 SRC 的工作副本

工作流程

1.  黑客黑客黑客代码
2.  `svn ci -m "message"`
3.  `svn relocate MIRROR`
4.  `svn ci -m "message"`
5.  `svn relocate SRC`
6.  见第 1 页

# solr - solr 中的符号链接

> ID：13738357
> 
> 赞同：-1
> 
> 时间：2012-12-06T06:47:59.603
> 
> 标签：solr, symlink, solr-schema

什么是solr中的符号链接。solr 中是否存在与模式相关的任何概念..？是否与 schema.xml.. 中指定的类对象的创建相关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:38:01.443

符号链接是计算中的一个概念，而不是 Solr。

> 在计算中，[符号链接](http://en.wikipedia.org/wiki/Symbolic_link)（也称为符号链接或软链接）是一种特殊类型的文件，它以绝对或相对路径的形式包含对另一个文件或目录的引用，并影响路径名解析。

当您需要符号链接时，其中一个例子是，如果您使用包管理器安装 solr，那么它会安装默认配置文件（schema.xml、solrconfig.xml）。因此，您需要通过创建符号链接将这个默认配置替换为您的配置。

[检查这个帖子](http://docs.ckan.org/en/latest/solr-setup.html)，它可以给你一个想法。

# css - 从表格中删除单元格填充、单元格间距和边框

> ID：13738358
> 
> 赞同：2
> 
> 时间：2012-12-06T06:48:05.880
> 
> 标签：css, html-table, html-email

我尝试使用 oscommerce 平台发送简单的时事通讯，内容是带有少量图像的简单表格。在我发送预览之前看起来不错（否`cellspacing`或`cellpadding`）

预习：

![在此处输入图像描述](../Images/288133e8330251a4cc788b6610f808e4.png)

但是在我收到并使用 gmail 打开后：

![在此处输入图像描述](../Images/0b684e0a7796e1a59d4b20b98586ff2c.png)

你可以看到表是不同的；我的意思是白色边框。

这是为时事通讯生成表格和内容的代码。

```
<table border="0" cellspacing="0" cellpadding="0">
   <tbody>
      <tr>
         <td><img alt="" src="http://www.sfbeautyskin.com/uploads/image/Newsletter/Newsletter.jpg" style="width: 950px; height: 1187px;" /></td>
      </tr>
      <tr>
         <td><a href="http://www.sfbeautyskin.com/images//banners/Promotion_Dec_Xmas.jpg"><img alt="" src="http://www.sfbeautyskin.com/uploads/image/Newsletter2.jpg" style="width: 950px; height: 114px;" /></a></td>
      </tr>
      <tr>
         <td><a href="http://www.sfbeautyskin.com/index.php"><img alt="" src="http://www.sfbeautyskin.com/uploads/image/Newsletter3.jpg" style="width: 950px; height: 158px;" /></a></td>
      </tr>
      <tr>
         <td><a href="http://www.sfbeautyskin.com/contact_us.php"><img alt="" src="http://www.sfbeautyskin.com/uploads/image/Newsletter4.jpg" style="width: 950px; height: 440px;" /></a></td>
      </tr>
   </tbody>
</table> 
```

问题是如何完全删除边框属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T06:53:10.643

我以前在电子邮件方面也遇到过类似的问题。如果我没记错的话，我通过在 td use 中制作图像（或尝试'a'标签）来修复它`display: block`。

尝试这样的事情：

```
<td><img alt="" style="display: block;" src="http://www.sfbeautyskin.com/uploads/image/Newsletter/Newsletter.jpg" style="width: 950px; height: 1187px;" /></td> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:53:45.830

`style="line-height:0"`为每个 td添加

```
<td style="line-height:0"><img ... /></td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T07:04:14.100

检查小提琴。 [http://jsfiddle.net/tuD6L/12/](http://jsfiddle.net/tuD6L/12/)

```
margin: -5px 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T06:51:15.867

在每个`tr`,`td`和`img`元素上，添加`style="margin:0;padding:0;"`

或者只是一起删除你的表。他们似乎没有任何目的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T06:52:49.420

**现在定义你的** `img`标签`vertical-align:top`

```
<img src="some.jpg" style="vertical-align:top;" /> 
```

***[演示](http://tinkerbin.com/NKeG2Z4D)***

## --------

# cocoa - 区分 NSAutosaveElsewhereOperation 中的用例

> ID：13738359
> 
> 赞同：1
> 
> 时间：2012-12-06T06:48:21.093
> 
> 标签：cocoa, core-data, autosave, nspersistentdocument, nsfilewrapper

我尝试将 AutoSave 支持添加到[Core Data File Wrapper 示例](https://developer.apple.com/library/mac/#samplecode/PersistentDocumentFileWrappers/Introduction/Intro.html)

现在，如果我有一个`writeSafelyToURL`使用 NSAutosaveElsewhereOperation 类型调用的新/无标题文档。

不好的是，我在两个典型用例中都得到了这种类型 - 新文件：它通过创建文件包装器和持久存储文件来存储一个完整的新文档 - 保存差异：文件包装器已经存在并且只需要更新.

其他人是否已经处理过这个主题或者是否有人已经迁移了这个？

原始示例使用`originalStoreURL`来区分这两个用例，哪种解决方案最适合您？

谢谢

# c# - 使用 C# 备份 MySQL 数据库

> ID：13738361
> 
> 赞同：2
> 
> 时间：2012-12-06T06:48:32.817
> 
> 标签：c#, mysql, mysqldump

我正在尝试备份 mysql 数据库。我创建的代码是

```
ProcessStartInfo proc = new ProcessStartInfo();
string cmd = string.Format(@"-u{0} -p{1} -E -R -h{2} {3}", UserName, PWD, hostname, dbname);
proc.FileName = "Path to mysqldump.exe";
proc.RedirectStandardInput = false;
proc.RedirectStandardOutput = true;
proc.Arguments = cmd;
proc.UseShellExecute = false;
Process p = Process.Start(proc);
string res;
res = p.StandardOutput.ReadToEnd();
file.WriteLine(res);
p.WaitForExit();
file.Close(); 
```

问题是当数据库大小很小时它可以正常工作，但是`Out Of Memory Exception`当我尝试备份大型数据库（大约 800 MB）时我得到了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:03:30.630

为什么不通过命令行直接将其写入文件，而不是读取 C# 中的标准输出？

我通常使用以下命令获取我的 mysqldumps。它适用于 Windows 和 Linux。

```
mysqldump -u{user} -p{password} --routines --triggers --result-file={dest_filename} {dbname} 
```

-或者-

```
mysqldump -u{user} -p{password} --routines --triggers {dbname} > {dest_filename} 
```

您遇到的`Out of memory`异常可能是在尝试将 mysqldump 的整个输出读取到下一行的 C# 中的内存时引起的（通常发生在字符串超过特定大小时）。

```
res = p.StandardOutput.ReadToEnd(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:40:00.037

看起来很大的字符串吃掉了内存。

尝试使用 OutputDataReceived 事件将数据写入输出文件。

这是两个带有示例的链接-

1.  [Process.OutputDataReceived 事件](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.outputdatareceived.aspx)
2.  [Process.BeginOutputReadLine 方法](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.beginoutputreadline.aspx)

# soap - 将值从请求传输到响应（soapUI 模拟服务）

> ID：13738362
> 
> 赞同：2
> 
> 时间：2012-12-06T06:48:35.823
> 
> 标签：soap, mocking, request, response, soapui

我收到了一个 15 位数的用户 ID，并想修剪其最后 3 位数，然后发回给请求发件人。索取样品如下：

```
<env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/">
   <env:Header/>
   <env:Body>
      <lookupSubscriberInfo xmlns="http://testID.com/V1_0">
         <callingParty>testParty</callingParty>
         <subscriberRequestList>
            <testId>888905425616681</opaqueId>
         </subscriberRequestList>
      </lookupSubscriberInfo>
   </env:Body>
</env:Envelope> 
```

我已阅读此 [http://www.soapui.org/Service-Mocking/creating-dynamic-mockservices.html](http://www.soapui.org/Service-Mocking/creating-dynamic-mockservices.html) 但无法弄清楚..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:58:08.410

另一方面，我无法通过 XPATH 做到这一点 XmlSlurper 已经工作了..

```
import groovy.util.XmlSlurper
def parsedContent = new XmlSlurper().parseText(mockRequest.requestContent)
context.MSISDN = parsedContent.Body.lookupSubscriberInfo.subscriberRequestList.opaqueId.toString().substring(3,15) 
```

为了使用 MSISDN 值，你应该使用以下

${MSISDN}

# iphone - 旋转CGPath而不改变它的位置

> ID：13738364
> 
> 赞同：12
> 
> 时间：2012-12-06T06:48:57.173
> 
> 标签：iphone, objective-c, ios, core-graphics

我想旋转 a `CGPath`，我正在使用以下代码：

```
CGAffineTransform transform = CGAffineTransformMakeRotation(angleInRadians);
CGPathRef rotatedPath = CGPathCreateCopyByTransformingPath(myPath, &transform); 
```

此代码工作正常，但它改变了路径的位置！我希望路径保持与旋转前相同的位置。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-06T07:08:47.077

路径没有“位置”。路径是一组点（由线段和曲线段定义）。每个点都有自己的位置。

也许您想围绕特定点旋转路径，而不是围绕原点。诀窍是创建一个组合了三个单独变换的复合变换：

1.  将原点平移到旋转点。
2.  旋转。
3.  反转步骤 1 中的翻译。

例如，这里有一个函数，它接受一个路径并返回一个新路径，该路径是围绕其边界框中心旋转的原始路径：

```
static CGPathRef createPathRotatedAroundBoundingBoxCenter(CGPathRef path, CGFloat radians) {
    CGRect bounds = CGPathGetBoundingBox(path); // might want to use CGPathGetPathBoundingBox
    CGPoint center = CGPointMake(CGRectGetMidX(bounds), CGRectGetMidY(bounds));
    CGAffineTransform transform = CGAffineTransformIdentity;
    transform = CGAffineTransformTranslate(transform, center.x, center.y);
    transform = CGAffineTransformRotate(transform, radians);
    transform = CGAffineTransformTranslate(transform, -center.x, -center.y);
    return CGPathCreateCopyByTransformingPath(path, &transform);
} 
```

请注意，此函数返回一个具有 +1 保留计数的新路径，您在完成后负责释放该路径。例如，如果您尝试旋转形状图层的路径：

```
- (IBAction)rotateButtonWasTapped:(id)sender {
    CGPathRef path = createPathRotatedAroundBoundingBoxCenter(shapeLayer_.path, M_PI / 8);
    shapeLayer_.path  = path;
    CGPathRelease(path);
} 
```

### 更新

这是一个使用 Swift Playground 的演示。我们将从一个显示路径并用十字准线标记原点的辅助函数开始：

```
import UIKit
import XCPlayground

func showPath(label: String, path: UIBezierPath) {
    let graph = UIBezierPath()
    let r = 40
    graph.moveToPoint(CGPoint(x:0,y:r))
    graph.addLineToPoint(CGPoint(x:0,y:-r))
    graph.moveToPoint(CGPoint(x:-r,y:0))
    graph.addLineToPoint(CGPoint(x:r,y:0))
    graph.appendPath(path)
    XCPCaptureValue(label, graph)
} 
```

接下来，这是我们的测试路径：

```
var path = UIBezierPath()
path.moveToPoint(CGPoint(x:1000,y:1000))
path.addLineToPoint(CGPoint(x:1000,y:1200))
path.addLineToPoint(CGPoint(x:1100,y:1200))
showPath("original", path) 
```

![原始路径](../Images/50a13d66b0ec7b36366bf0998aa0ca2b.png)

（请记住，十字准线是原点，不是我们正在转换的路径的一部分。）

我们得到中心并变换路径，使其以原点为中心：

```
let bounds = CGPathGetBoundingBox(path.CGPath)
let center = CGPoint(x:CGRectGetMidX(bounds), y:CGRectGetMidY(bounds))

let toOrigin = CGAffineTransformMakeTranslation(-center.x, -center.y)
path.applyTransform(toOrigin)
showPath("translated center to origin", path) 
```

![路径转换为原点](../Images/9c4f82034405e5f653b8112cce44e92b.png)

然后我们旋转它。所有旋转都围绕原点发生：

```
let rotation = CGAffineTransformMakeRotation(CGFloat(M_PI / 3.0))
path.applyTransform(rotation)
showPath("rotated", path) 
```

![路径旋转](../Images/19eb085d9944f12730043845db135b6d.png)

最后，我们将其翻译回来，完全颠倒原始翻译：

```
let fromOrigin = CGAffineTransformMakeTranslation(center.x, center.y)
path.applyTransform(fromOrigin)
showPath("translated back to original center", path) 
```

![从原点翻译的路径](../Images/df25b1b9a052164895545ae88248e45c.png)

请注意，我们必须**反转原始翻译**。我们不按其新边界框的中心进行平移。回想一下（在此示例中），原始中心位于 (1050,1100)。但在我们将其平移到原点并旋转后，新边界框的中心位于 (-25,0)。将路径平移 (-25,0) 不会使其接近其原始位置！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-11-11T17:56:44.810

Swift 5 版本：

```
func rotate(path: UIBezierPath, degree: CGFloat) {
    let bounds: CGRect = path.cgPath.boundingBox
    let center = CGPoint(x: bounds.midX, y: bounds.midY)

    let radians = degree / 180.0 * .pi
    var transform: CGAffineTransform = .identity
    transform = transform.translatedBy(x: center.x, y: center.y)
    transform = transform.rotated(by: radians)
    transform = transform.translatedBy(x: -center.x, y: -center.y)
    path.apply(transform)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-02T22:27:04.060

一个 Swift 3 方法来围绕它的中心旋转一个矩形：

```
func createRotatedCGRect(rect: CGRect, radians: CGFloat) -> CGPath {
    let center = CGPoint(x: rect.midX, y: rect.midY)
    let path = UIBezierPath(rect: rect)
    path.apply(CGAffineTransform(translationX: center.x, y: center.y).inverted())
    path.apply(CGAffineTransform(rotationAngle: radians))
    path.apply(CGAffineTransform(translationX: center.x, y: center.y))
    return path.cgPath
} 
```

所有 rob mayoff 将其应用于路径及其边界框的代码仍然适用，所以我没有看到重复它们的理由。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-20T09:42:52.100

如果您想旋转和/或缩放 UIBezierPath，或缩放 CAShapeLayer，同时保持 UIBezierPath 的中心。这里是 Swift 4/5 的函数。它基于 rob mayoff 的回答。

```
extension UIBezierPath {

/// perform scale on UIBezierPath and keep the position in the path's center
  func scale(scale:CGFloat) {
    let bounds = self.cgPath.boundingBox

    let center = CGPoint(x:bounds.midX,y:bounds.midY)
    var transform = CGAffineTransform.identity.translatedBy(x: center.x, y: center.y)
    transform = transform.scaledBy(x: scale, y: scale)
    transform = transform.translatedBy(x: -center.x, y: -center.y);

    self.apply(transform)
  }

  /// perform rotate on UIBezierPath and keep the center unchanged
  func rotate(radians:CGFloat) {
    let bounds = self.cgPath.boundingBox

    let center = CGPoint(x:bounds.midX,y:bounds.midY)
    var transform = CGAffineTransform.identity.translatedBy(x: center.x, y: center.y)
    transform = transform.rotated(by: radians)
    transform = transform.translatedBy(x: -center.x, y: -center.y);

    self.apply(transform)
  }
} 
```

# mysql - Mysql - 显示每个唯一字段的 1 个最新条目

> ID：13738368
> 
> 赞同：0
> 
> 时间：2012-12-06T06:49:17.070
> 
> 标签：mysql, greatest-n-per-group

我在 mysql 上失败了，真的可以得到一些帮助。我不知道它会被称为什么，我所有尝试使用 DISTINCT 和 GROUP BY 的组合都没有成功。

我有一个包含这些列的服务器监控数据表：

```
nStatusNumber
Bandwidth
Load 
Users
ServerNumber 
DiskFree 
MemFree
TimeStamp

**nStatusNumber** - A unique number increasing for each entry

**ServerNumber** - A unique number for each server 
```

为此，我需要在仪表板的顶部显示每个唯一服务器的最新报告。

// 我们监控了多少台服务器？

```
$nNumServers = mysql_numrows(mysql_query("SELECT DISTINCT(ServerNumber) FROM server_status;")); 
```

// 获取我们的服务器列表

```
$strQuery = "SELECT * FROM server_status ORDER BY nStatusNumber DESC limit ".$nNumServers.";"; 
```

然后循环遍历结果，直到我们点击 $nNumServers 。起初这很有效，直到服务器开始停机/上升并且报告顺序变得混乱。假设有 20 台服务器，最近的 20 个结果不一定是每台服务器的 1 个。

我试图尽快解决这个问题，但失败了。到目前为止，我已经尝试了 DISTINCT 和 GROUP BY 的各种组合，但都没有成功，并且希望能就我看不到答案的可能是一个令人尴尬的简单问题提供任何指导。

谢谢！

PS - 这是我一直在尝试的示例查询，显示了我遇到的问题。检查“nStatusNumber”字段，这些应该只显示每个服务器的最新结果 - [http://pastebin.com/raw.php?i=ngXLRhd6](http://pastebin.com/raw.php?i=ngXLRhd6)

PPS - 设置 max(nStatusNumber) 不会给出准确的结果。我不想要一些平均/总和/中位数，我需要每台服务器报告的最新实际数据。以下是查询的更多示例结果：http://pastebin.com/raw.php?i= [eyuPD7vj](http://pastebin.com/raw.php?i=eyuPD7vj)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:53:10.683

出于您的目的，您需要找到 a`nServerNumber`和唯一的行`TimeStamp`。这并不像你说`MAX(TimeStamp)`的那么简单，你需要找到它对应的行。

虽然我不是 SQL 专家，但您可以尝试一下，看看它是否有效。

```
SELECT A.nServerNumber, A.nStatusNumber, A.nVNStatsBandwidth, A.fLoad, A.nUsers,
    A.nUsersPaid, A.nServerNumber, A.nFreeDisk, A.nTotalDisk, A.nFreeMemory,
    A.nTotalMemory, A.TimeStamp
FROM server_status A
INNER JOIN
(
    SELECT nServerNumber, MAX(TimeStamp) as `TimeStamp`
    FROM server_status
    GROUP BY nServerNumber
) B
ON A.nServerNumber = B.nServerNumber
AND A.TimeStamp = B.TimeStamp
ORDER BY A.nServerNumber ASC; 
```

此查询将为您提供所有服务器及其最新信息。因此，如果您想要服务器总数，只需`mysql_numrows(...)`在此结果上运行该函数，如果您想要数据只需遍历相同的结果（无需触发两个单独的 SQL 查询）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:54:18.207

尝试这个 ：：

```
Select 
Select MAX(nStatusNumber) from table,
Bandwidth,
Load,
Users,
ServerNumber,
DiskFree,
MemFree,
MAX(`TimeStamp`)

from your table 
group by ServerNumber 
```

# java - 在“ListView”中拖放

> ID：13738371
> 
> 赞同：18
> 
> 时间：2012-12-06T06:49:38.690
> 
> 标签：java, android, drag-and-drop, android-listview, scroll

`ListView`我正在尝试在 android(Ice Cream Sandwich) 中实现拖放。因此，当拖动的对象到达 边缘时`ListView`，我正在`ListView`向相关方向滚动。问题是当我们滚动时，有时适配器会`View`根据需要创建新的，而这些新`View`的没有`ACTION_DRAG_STARTED`更早地接收到事件，因此没有接收到`DragEvent`更新。有什么方法可以将事件发送到这些视图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:57:09.407

在列表视图中实现拖放的最简单方法是使用这个很棒的库。 [https://github.com/commonsguy/cwac-touchlist](https://github.com/commonsguy/cwac-touchlist) 值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:43:24.280

查看 View 的源代码，我看到：

```
static final int DRAG_CAN_ACCEPT              = 0x00000001;
int mPrivateFlags2;

boolean canAcceptDrag() {
    return (mPrivateFlags2 & DRAG_CAN_ACCEPT) != 0;
} 
```

mPrivateFlags2 是包私有的，SDK 不公开。但是，您应该能够通过执行以下操作在子类中更改它：

```
try {
    Field mPrivateFlags2 = this.getClass().getField("mPrivateFlags2");
    int currentValue = mPrivateFlags2.getInt(this);
    mPrivateFlags2.setInt(this, currentValue | 0x00000001);
} catch (Exception e) {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T18:09:58.077

我有[同样的问题](https://stackoverflow.com/questions/14118984/drag-and-drop-listview-and-item-views-that-miss-the-action-drag-started-event)。我没有解决这个回收问题，但我发现了一个可能的解决方法，仍然使用拖放框架。这个想法是改变视角：而不是在列表中的`OnDragListener`每个上使用a `View`，它可以直接用于`ListView`。

然后的想法是在进行拖放时找到手指在哪个项目之上，并`ListAdapter`在`ListView`. 然后诀窍是找到我们在哪个项目视图之上，以及在哪里完成放置。

为了做到这一点，我将`id`适配器创建的每个视图的`ListView`位置设置为 - with ，这样我以后可以使用和`View.setId()`的组合找到它。`ListView.pointToPosition()``ListView.findViewById()`

作为一个拖动监听器示例（我提醒您，它应用于`ListView`），它可以是这样的：

```
// Initalize your ListView
private ListView _myListView = new ListView(getContext());

// Start drag when long click on a ListView item
_myListView.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {
    @Override
    public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
        DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(view);
        view.startDrag(null, shadowBuilder, _myListView.getItemAtPosition(position), 0);
        return true;
    }
});

// Set the adapter and drag listener
_myListView.setOnDragListener(new MyListViewDragListener());
_myListView.setAdapter(new MyViewAdapter(getActivity()));

// Classes used above

private class MyViewAdapter extends ArrayAdapter<Object> {
    public MyViewAdapter (Context context, List<TimedElement> objects) {
        super(context, 0, objects);
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View myView = convertView;
        if (myView == null) {
            // Instanciate your view
        }
        // Associates view and position in ListAdapter, needed for drag and drop
        myView.setId(position);
        return myView;
    }
}

private class MyListViewDragListener implements View.OnDragListener {
    @Override
    public boolean onDrag(View v, DragEvent event) {
        final int action = event.getAction();
        switch(action) {
            case DragEvent.ACTION_DRAG_STARTED:
                return true;
            case DragEvent.ACTION_DRAG_DROP:
                // We drag the item on top of the one which is at itemPosition
                int itemPosition = _myListView.pointToPosition((int)event.getX(), (int)event.getY());
                // We can even get the view at itemPosition thanks to get/setid
                View itemView = _myListView.findViewById(itemPosition );
                /* If you try the same thing in ACTION_DRAG_LOCATION, itemView
                 * is sometimes null; if you need this view, just return if null.
                 * As the same event is then fired later, only process the event
                 * when itemView is not null.
                 * It can be more problematic in ACTION_DRAG_DROP but for now
                 * I never had itemView null in this event. */
                // Handle the drop as you like
                return true;
         }
    }
} 
```

现在，如果您在进行拖放时需要视觉反馈，有几种策略。例如，您可以在活动中拥有 2 个实例变量，名为：

```
private boolean ongoingDrag = false; // To know if we are in a drag&drop state
private int dragPosition = 0; // You put the itemPosition variable here 
```

在进行拖放时，`MyListViewDragListener`您可以修改这些变量，并使用它们的状态`MyViewAdapter`。当然不要忘记使用类似 `_myListView.getAdapter()).notifyDataSetChanged()`或可能的`_myListView.invalidate()`方法来更新 UI（当然在事件线程中，使用处理程序）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-04T22:13:38.893

问题是因为 listView.getPositionForView(view) 如果视图在调用时不可见，则返回 -1。因此，当您滚动列表时，依赖它会失败。因此，您可以在调用 startDrag() 的列表项上设置 listView.setOnItemLongClickListener() 而不是设置 view.setOnLongClickListener()。onItemLongClick() 为您提供可以在 startDrag() 的 myLocalState 参数中传递的位置。然后在 onDrag() 中使用 event.getLocalState() 恢复它并将其转换为 Integer。像这样...

```
 listView.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {
        @Override
        public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
            position -= listView.getHeaderViewsCount();
            DragShadowBuilder dragShadow = new View.DragShadowBuilder(view);
            view.startDrag(null, dragShadow, position, 0);
            return true;
        }
    }); 
```

然后在你的 OnDragListener ...

```
@Override
public boolean onDrag(View eventView, DragEvent event) {
    Integer dragViewPos = ((Integer) event.getLocalState());
    int eventViewPos = listView.getPositionForView(eventView) - listView.getHeaderViewsCount();
    ...
} 
```

# objective-c - 如何在完全下载之前开始使用云端硬盘文件的内容？

> ID：13738375
> 
> 赞同：2
> 
> 时间：2012-12-06T06:49:55.817
> 
> 标签：objective-c, ios5, ios-simulator, google-drive-api

我为 ipad 创建了一个应用程序。它已经有视图部分。在其中集成了用于列表文件的谷歌驱动器。列出当用户单击查看文件时，它会下载然后由用户查看。

直到完成下载用户无法打开这本书。如果该文件内容太大，则需要太多时间。当用户单击文件以立即打开时，是否还有其他方式.. 或者在剩余页面在后台加载后首先显示 2 或 3 页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:51:41.820

你有2个选择。[`Range`例如，您可以使用HTTP 标头逐段](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.2)下载内容。另一种可能性是流式传输响应对象（在 Java 中，我会通过读取响应的 InputStream 中的字节来实现）。太糟糕了，我缺乏 Objective-C 技能，无法进一步帮助您。

# php - 删除标签但在php中的标签之间保留字符串

> ID：13738376
> 
> 赞同：2
> 
> 时间：2012-12-06T06:50:06.210
> 
> 标签：php, string, tags

我有从我的其他网站获取内容的文件。它包括很多：

```
<script>
[random] string 1
</script>

<script>
[random] string 2
</script>
....
<script>
[random] string n
</script>

<script type="text/javascript">
must keeping script
</script>

<script type=text/javascript'>
must keeping script
</script> 
```

我想删除`<script>`，`</script>`但使用 PHP 在它们之间保留内容“[随机] 字符串 ...”。

注意： str_replace 可以删除它们，但可能会使其他脚本`<script type="text/javascript">must keeping</script>`和`<script type='text/javascript'>must keeping</script>`. 它将丢失`</script>`必须保留脚本的紧密标记

感谢您的帮助

//解决：

```
$content = preg_replace('/(<script>)(.*?)(<\/script>)/s', '$2', $content); 
```

无论如何，谢谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T07:07:27.580

```
<?php
 $text = '<p>Test paragraph.</p><!-- Comment --> <a href="#fragment">Other text</a>';
 echo strip_tags($text);

 ?> 
```

要获取有关条形标签的更多信息，请参阅[http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T07:10:39.823

尝试这个

```
$content = "
    <script>
    [random] string 1
    </script>

    <script>
    [random] string 2
    </script>
    ....
    <script>
    [random] string n
    </script>    
";

$content = str_replace(array("<script>", "</script>"), "", $content); 
```

编辑：既然你想摆脱`<script></script>`并同时保持`<script type="text/javascript"></script>`，并且因为使用正则表达式来解决这类问题[是一个坏主意](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)，那么尝试使用`DOMDocument`这样的：

```
$dom = new DOMDocument();

$content = "
    <script>
    [random] string 1
    </script>

    <script>
    [random] string 2
    </script>
    ....
    <script>
    [random] string n
    </script>

    <script type='text/javascript'>
    must keeping script
    </script>

    <script type='text/javascript'>
    must keeping script
    </script>    
";

$dom->loadHTML($content);
$scripts = $dom->getElementsByTagName('script');

foreach ($scripts as $script) {
    if (!$script->hasAttributes()) {
        echo $script->nodeValue . "<br>";
    }
} 
```

这将输出：

[随机] 字符串 1
[随机] 字符串 2
[随机] 字符串 n

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T07:13:01.137

如果文件是 test.txt，请使用此代码

```
<?php
$myFile = "test.txt";
$fh = fopen($myFile, 'r');
$theData = fread($fh, 5000);
echo str_replace("</script>","",str_replace("<script>","",$theData));
fclose($fh);
 ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T06:55:48.113

如果内容是字符串类型，那么您可以使用[str-replace](http://php.net/manual/en/function.str-replace.php)或[str-ireplace](http://php.net/manual/en/function.str-ireplace.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T07:01:05.337

然后尝试 strip_tags 函数[http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)？

# android-layout - Android 中的列表视图 (eclipse)

> ID：13738377
> 
> 赞同：1
> 
> 时间：2012-12-06T06:50:24.920
> 
> 标签：android-layout

我用下面的代码制作了列表视图，并在值中制作了数组列表。但是当我运行我的程序时看不到我的列表。我能做些什么？

```
public class ListView extends ListActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);;

        ArrayAdapter<string>adapter;
        adapter=new ArrayAdapter<string>(this,android.R.layout.simple_list_item_1,com.example.listview.R.array.countries);

        setListAdapter(adapter);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:23:00.117

缺少这一行： setContentView(R.layout.simple_list_item_1); ， 不？尝试这个。

# oracle11g - ORA-12516: TNS:listener 找不到具有匹配协议栈的可用处理程序

> ID：13738383
> 
> 赞同：1
> 
> 时间：2012-12-06T06:50:44.353
> 
> 标签：oracle11g

当我运行 emca 时，我一直收到这些错误，如下所示：

```
Dec 3, 2012 5:25:29 PM oracle.sysman.emcp.EMConfig perform
INFO: This operation is being logged at C:\Oracle\11g\cfgtoollogs\emca\DB01\emca_2012_12_03_17_24_36.log.
Dec 3, 2012 5:25:29 PM oracle.sysman.emcp.ParamsManager checkListenerStatusForDBControl
WARNING: ORA-12516: TNS:listener could not find available handler with matching protocol stack

Dec 3, 2012 5:25:29 PM oracle.sysman.emcp.EMConfig perform
SEVERE:

Database connection through listener failed.  Fix the error and run EM Configuration Assistant again.

Some of the possible reasons may be:

1) Listener port 1521 provided is incorrect.  Provide the correct port.
2) Listener is not up.  Start the Listener.
3) Database service DB01.world is not registered with listener.  Register the database service.
4) Listener is up on physical host and ORACLE_HOSTNAME environment variable is set to virtual host.  Unset ORACLE_HOSTNAME environment variable.
5) Listener is up on virtual host.  Set environment variable ORACLE_HOSTNAME=(virtual host).
6) /etc/hosts/ does not have correct entry for hostname.

Refer to the log file at C:\Oracle\11g\cfgtoollogs\emca\DB01\emca_2012_12_03_17_24_36.log for more details.
Could not complete the configuration.  Refer to the log file at C:\Oracle\11g\cfgtoollogs\emca\DB01\emca_2012_12_03_17_24_36.log for more details. 
```

请访问以下链接，以获取有关此问题的更多信息：

[Oracle 论坛上发布的问题](https://forums.oracle.com/forums/thread.jspa?threadID=2468277&tstart=0)

# android - Android startActivityForResult 未返回日历数据

> ID：13738389
> 
> 赞同：9
> 
> 时间：2012-12-06T06:51:11.950
> 
> 标签：android, events, android-intent, calendar

```
 The code Written below works for me

                Intent intent = new Intent(Intent.ACTION_EDIT);
                intent.setType("vnd.android.cursor.item/event");
                intent.putExtra("title", "Hi this me");
                intent.putExtra("description", "Some description");
                intent.putExtra("beginTime", eventStartInMillis);
                intent.putExtra("endTime", eventEndInMillis);
                startActivityForResult(intent, 1); 
```

我的问题是我无法在 OnActivityResult 中备份 android 日历数据，我不知道为什么请帮我解决这个问题。

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

if (requestCode == 1) {

     if(resultCode == RESULT_OK){

      String result=data.getStringExtra("title");

}

And i am getting data.getExtras() is null !!!!! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T14:23:03.017

如果您查看官方文档： http: [//developer.android.com/reference/android/app/Activity.html#setResult(int, android.content.Intent)](http://developer.android.com/reference/android/app/Activity.html#setResult%28int,%20android.content.Intent%29) 您会看到您在 onActivityResult() 中获得的 Intent实际上取决于您正在调用的活动。更具体地说，它取决于被调用的 Activity 是否使用带有附加功能的 Intent 的 setResult(int, android.content.Intent)。

通过快速的互联网搜索，您使用的代码似乎是用于在日历中添加事件，但这并不意味着您将从日历应用程序中获取事件数据。Perhups 你必须在之后查询日历才能得到它们。

至于 Contacts 应用程序，它在[Contacts Provider Guide](http://developer.android.com/guide/topics/providers/contacts-provider.html)中明确说明，如果您使用 startActivityForResult，您可以在 onActivityResult() 中获取联系人数据。在 Calendar Provider Guide 中没有这样的声明，因此它可能不受支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T07:27:42.250

这是因为结果代码总是返回 0 在日历隐式意图的 android 日历活动结果中尝试在 onActivity 结果中使用 RESULT_CANCEL

public void onActivityResult(int reqCode, int resultCode, Intent data) {

super.onActivityResult(reqCode, resultCode, data);

开关（reqCode）{

if (resultCode == Activity.RESULT_CANCEL)

而且您必须检查[下一个事件 ID](https://stackoverflow.com/questions/9482514/android-calendar-get-event-id)它会起作用希望它会对您有所帮助..

戈文德

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T07:08:55.003

问题是您将数据直接放入意图并通过 Bundle 检索它。

尝试这个：

像这样创建一个捆绑对象：

```
Intent i = new Intent("yourFullyQualifiedClassName");

 Bundle extras = new Bundle();
 extras.putString("title", "Hi this me");
 extras.putString("description", "Some description");
 i.putExtras(extras); 
```

然后从包中检索数据，如下所示：

```
Bundle bundle = data.getExtras();

bundle.getString("title"); 
```

希望这能解决您的问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-06T08:53:58.713

It is because you are passing the data to the activity that you started (Activity B) by startActivityForResult from Activity A. onActivityResult() will only get the data passed by Activity B and not by Activity A.

Here's a nice tutorial about android intents.

[http://www.vogella.com/articles/AndroidIntent/article.html](http://www.vogella.com/articles/AndroidIntent/article.html)

and this site too

[http://saigeethamn.blogspot.jp/2009/08/android-developer-tutorial-for_31.html](http://saigeethamn.blogspot.jp/2009/08/android-developer-tutorial-for_31.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-06T06:59:21.370

您可以使用以下代码：

```
public void onActivityResult(int reqCode, int resultCode, Intent data) {
super.onActivityResult(reqCode, resultCode, data);
switch (reqCode) {
 if (resultCode == Activity.RESULT_OK) {
        Bundle extras = data.getExtras();
        String title=extras.getString("title");
        String description=extras.getString("description");
        String beginTime=extras.getString("beginTime");
        String endTime=extras.getString("endTime"); 
```

# node.js - 如何使用 Node.js 和请求库将文件附加到 Mailgun 的 API 的 POST 请求

> ID：13738392
> 
> 赞同：3
> 
> 时间：2012-12-06T06:51:13.807
> 
> 标签：node.js, request, mailgun

我正在编写一些代码来通过[Mailgun 电子邮件服务](http://mailgun.net)发送带有附件的电子邮件。他们在[使用 CURL 的 API 文档](http://documentation.mailgun.net/user_manual.html#sending-messages)中给出了以下示例，我需要弄清楚如何在 Node.js 中做同样的事情（最好使用请求库）。

```
curl -s -k --user api:key-3ax6xnjp29jd6fds4gc373sgvjxteol0 \
    https://api.mailgun.net/v2/samples.mailgun.org/messages \
    -F from='Excited User <me@samples.mailgun.org>' \
    -F to='obukhov.sergey.nickolayevich@yandex.ru' \
    -F cc='sergeyo@profista.com' \
    -F bcc='serobnic@mail.ru' \
    -F subject='Hello' \
    -F text='Testing some Mailgun awesomness!' \
    -F html='\<html\>HTML version of the body\<\html>' \
    -F attachment=@files/cartman.jpg \
    -F attachment=@files/cartman.png 
```

我当前的代码（Coffescript）如下所示：

```
r = request(
  url: mailgun_uri
  method: 'POST'
  headers:
    'content-type': 'application/x-www-form-urlencoded'
  body: email
  (error, response, body) ->
    console.log response.statusCode
    console.log body
)
form = r.form()
for attachment in attachments
  form.append('attachment', fs.createReadStream(attachment.path)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T10:25:49.527

For the basic authorization part you have to set the right headers and send username and password base64 encoded. See this [SO question](https://stackoverflow.com/questions/3905126/how-to-use-http-client-in-node-js-if-there-is-basic-authorization) for more information. You can use the `headers` option for this.

How to send a POST request with form fields is described in the [request docs](https://github.com/mikeal/request#forms):

```
var r = request.post('http://service.com/upload')
var form = r.form()
form.append('from', 'Excited User <me@samples.mailgun.org>') // taken from your code
form.append('my_buffer', new Buffer([1, 2, 3]))
form.append('my_file', fs.createReadStream(path.join(__dirname, 'doodle.png')) // for your cartman files
form.append('remote_file', request('http://google.com/doodle.png')) 
```

There also some existing modules on npm that support mailgun, like

*   [node-mailgun](https://github.com/shz/node-mailgun)
*   [nodemailer](https://github.com/andris9/nodemailer) (awesome module!)

an example for nodemailer would be

```
var smtpTransport = nodemailer.createTransport("SMTP",{
    service: "Mailgun", // sets automatically host, port and connection security settings
    auth: {
        user: "api",
        pass: "key-3ax6xnjp29jd6fds4gc373sgvjxteol0"
    }
});

var mailOptions = {
  from: "me@tr.ee",
  to: "me@tr.ee",
  subject: "Hello world!",
  text: "Plaintext body",
  attachments: [
    {   // file on disk as an attachment
        fileName: "text3.txt",
        filePath: "/path/to/file.txt" // stream this file
    },
    {   // stream as an attachment
        fileName: "text4.txt",
        streamSource: fs.createReadStream("file.txt")
    },
  ]
}

transport.sendMail(mailOptions, function(err, res) {
  if (err) console.log(err);
  console.log('done');
}); 
```

Haven't tested it because I don't have a mailgun account but it should work.

# sass - SCSS：使用我自己的自定义框架 - 文件路径并包括 webfonts

> ID：13738394
> 
> 赞同：0
> 
> 时间：2012-12-06T06:51:15.583
> 
> 标签：sass

我创建了自己的一组自定义 SCSS 框架，我想在项目之间使用它们。

[这个](http://vimeo.com/13804978)视频展示了如何做到这一点。但是，我遇到了一些问题：

1) 自定义 SCSS 框架的路径必须是绝对路径 根据视频，框架的路径必须是绝对路径（例如加载“/Users/USERNAME/frameworks/MYFRAMEWORK”）。有没有办法使这个相对，所以如果我改变机器，框架参考仍然是正确的？

2) 在我的自定义框架中，我包含了一些 webfonts。当样式表被编译时，这些字体的路径是错误的。有没有办法让我的项目中包含字体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T12:05:40.017

最后，我为此使用了 Codekit：http: [//incident57.com/codekit/](http://incident57.com/codekit/)

这真的很容易。只需在包含您的框架的计算机上拥有一个文件夹，然后将其设置为 Codekit 框架。

然后，您可以使用任何 SCSS 文件中的导入命令从框架中导入文件。

你甚至可以拥有一个 javascript/jquery 文件框架。

这很容易成为 Web 开发的最佳工具。我无法想象没有它的发展。

# javascript - Dreamviewer 图像映射“坐标”属性是否会更改浏览器视口大小？

> ID：13738399
> 
> 赞同：0
> 
> 时间：2012-12-06T06:51:33.797
> 
> 标签：javascript, html, dreamweaver, imagemap

我在基于地图的网页上添加了图像地图。由于它应该适用于不同的分辨率，因此当浏览器视口大小发生变化时，必须动态更改图像映射中定义的热点。

例如：当我最初在印度放置热点并更改浏览器大小时，它仍应放置在印度而不是其他地方。

我看到有一个名为“coords”的属性包含 3 个参数。

1.  这些属性在更改浏览器视口大小时是否会动态更改？
2.  或者我可以让它们动态变化吗？
3.  还是推荐使用javascript？

（据我测试，它们固定在绝对位置。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:03:58.557

我对图像地图进行了一些研究并发现了这一点；

1.  当它改变浏览器视口大小时，它们不会动态改变它们的位置
2.  我没有尝试动态地改变它们。希望你可以用 javascript 做到这一点
3.  javascript是我的问题的解决方案

使用javascript；

浏览器视口宽高可以取

相对于该宽度或高度，您可以定位元素

Dreamviewer 中的图像映射不是解决此问题的方法

# ios - 分解核心数据实体

> ID：13738408
> 
> 赞同：0
> 
> 时间：2012-12-06T06:52:27.757
> 
> 标签：ios, core-data

如果我有一个实体 Person，它有姓名、出生日期、电子邮件等信息，然后它也有 houseNo、街道、地标、城市、国家等信息。

这个实体代表 iPad 上的一个大表格。

是否可以将其分解为较小的实体，例如 Address ？

然后将地址与人员相关联，但这将是一对一的关系，可以吗？

我之所以这样问，是因为一个人基于一种形式的太多属性变得难以管理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:44:31.753

鼓励您使用更多实体来反映数据模型的逻辑。这无疑是一个很好的设计原则，将为您项目的未来发展提供更大的灵活性。

但是，我不同意你关于复杂性的论点。事实上，关系型核心数据模型比平面模型更复杂。使用一种形式仅引用具有大量属性的一个实体肯定没有与其他实体的关系*那么复杂。*

因此，如果您认为您的原始数据模型足以满足您的目的，则没有充分的理由对其进行更改。

# php - 数组搜索键=>值

> ID：13738410
> 
> 赞同：0
> 
> 时间：2012-12-06T06:52:44.997
> 
> 标签：php

我有一个数组，

```
$arr=(
    [0] => Array
        (
            [groupid] => 1
            [groupname] => Red
            [members] => Array
                (
                    [0] => Array
                        (
                            [mid] => 9
                            [name] => Anith
                        )

                    [1] => Array
                        (
                            [mid] => 11
                            [name] => Aravind
                        )

                    [2] => Array
                        (
                            [mid] => 10
                            [name] => Lekshmi
                        )

                )

        )

    [1] => Array
        (
            [groupid] => 2
            [groupname] => Blue
            [members] => Array
                (
                    [0] => Array
                        (
                            [mid] => 6
                            [name] => Yamuna
                        )

                    [1] => Array
                        (
                            [mid] => 2
                            [name] => Kamala K
                        )

                    [2] => Array
                        (
                            [mid] => 13
                            [name] => Sooraj K
                        )

                )

        ) 
```

我想检查`[mid] => 2`是否在数组中..如果它存在我想删除它（即取消设置数组）-----

```
[1] => Array
                        (
                            [mid] => 2
                            [name] => Kamala K
                        )
;;; 
```

例如： - `unset($arr[1]['members'][2];`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T06:55:31.927

这应该可以解决问题

```
foreach ($arr as $group => $subarray) {
    foreach ($subarray['members'] as $k => $v) {
        if ($v['mid'] == 2) {
            unset($arr[$group]['members'][$k]);
            break;
        }
    }
}

var_dump($arr); 
```

如果你想变得狡猾，你可以这样做：

```
// note: requires PHP >= 5.3
foreach ($arr as $key => &$value) {
    $value['members'] = array_filter(
        $value['members'],
        function($member) {
           return $member['mid'] != 2;
        }
    );
}

var_dump($arr); 
```

# ios - 确定 tableView 模式分组时的自定义节标题框架

> ID：13738414
> 
> 赞同：0
> 
> 时间：2012-12-06T06:53:19.630
> 
> 标签：ios, uitableview

我通过 tableView 的委托方法提供了一个自定义部分标题。它在平面模式下工作正常，但我无法确定分组样式的正确边距。

![截屏](../Images/6c919ee63d76d1dcca1016cf77287aa2.png)

有谁知道如何使节标题与 tableView 单元格对齐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:07:17.590

您可以创建自定义标签并相应地调整其框架。例如。

```
- (UIView *)tableView:(UITableView *)aTableView viewForHeaderInSection:(NSInteger)section

{

UIView *view=[[UIView alloc] initWithFrame:aTableView.tableHeaderView.frame];

 UILabel *label=[[UILabel alloc] initWithFrame: CGRectMake(//set frame of the label as you want)];

[label setFont:[UIFont fontWithName: size:]];

[label setTextColor:[UIColor blackColor]];

[label setShadowOffset:CGSizeMake(0.0f, 1.0f)];

[label setShadowColor:[UIColor redColor];

label.backgroundColor=[UIColor clearColor];

if(section==0)

{

 [label setText://set your section0 title];

 }

else if(section ==1)

{

[label setText://set your section1 title];

 }

[view addSubview:label];

[label release];

 return [view autorelease];
}

Hope this helps :) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:37:31.730

没有在每种口味中都经过测试，但这是一个很好的起点。将tableView.style
`- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section`
参数传递给您自己提供标题的方法。 如果您有分组的 tableView 样式，请创建一个类似框架
`CGRect(0,0,CGRectGetWidth(tableView.frame), CGRectGetHeight(tableView.frame)`
的视图，但添加一个带有框架的子视图。
`CGRectInset(frame, 30,0)`
将 autoresizingMask 设置为灵活宽度，它可以工作。

稍微修改了一下，我不得不为 SectionHeaderView 的创建方法提供一个附加参数，因为presentationStyle FullScreen和Formsheet的边距不同。

```
 CGFloat margin = 0;
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
        margin = style == UITableViewStyleGrouped ? modalStyle == UIModalPresentationFormSheet ? 28 : 38 : 0;
    }
    else {
        margin = style == UITableViewStyleGrouped ? 5 : 0;
    }

    UIView *view = [[UIView alloc] initWithFrame:CGRectInset(frame, margin, 0)];
    view.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    [self addSubview:view]; 
```

# objective-c - 图像处理 - 如何从 ios 上的图像中检测阵列相似颜色

> ID：13738420
> 
> 赞同：1
> 
> 时间：2012-12-06T06:53:48.630
> 
> 标签：objective-c

当用户触摸图像视图上的一个点时，我想创建一个颜色相似的区域。谁知道解决 ios 问题的库或技术。

原图链接：

[http://cannshine.com/images/1.jpg](http://cannshine.com/images/1.jpg)

用户触摸后，链接：

[http://cannshine.com/images/2.jpg](http://cannshine.com/images/2.jpg)

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:59:36.003

在我看来你想创造一个魔杖工具，对吗？我无法帮助您想出一种方法来处理这个问题，而且我不知道有任何库可以根据容差选择一组相似颜色的像素，但是[我找到了这篇文章](http://losingfight.com/blog/2007/08/28/how-to-implement-a-magic-wand-tool/)。它涵盖了使用 Objective-C 实现魔术棒工具。我[在 SO 上类似问题的答案中](https://stackoverflow.com/questions/7456148/color-overlaying-algorithm)找到了它。

# ruby-on-rails - 是否可以将用户会话从 PHP 或 Rails 应用程序传递到流星应用程序？

> ID：13738424
> 
> 赞同：2
> 
> 时间：2012-12-06T06:54:09.867
> 
> 标签：ruby-on-rails, meteor, php

我想创建一个 Web 应用程序，其中应使用 PHP 框架或 RoR 构建主应用程序。但是，只有某些部分需要实时更新（例如，协作编辑、实时提要）等。如果用户在 PHP/RoR 应用程序上进行了身份验证，是否可以将用户会话数据传递给流星应用程序？2个应用程序可以共享同一个数据库吗？关于如何实施这一点的任何见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:00:47.470

虽然可以按照您的要求去做，但您应该问问自己，您是否无法通过一个技术堆栈来实现您的目标。拥有像 Meteor 和 RoR / PHP 这样的多个技术堆栈意味着任何想要在您的代码库上工作的人都需要了解所有这些框架。此外，您可能能够使用 PHP 或 RoR 实现您对协作编辑和实时提要的要求。

由于您尚未发布您的要求，因此很难提出具体建议，但也许您应该列出您的要求，使用最简单的技术堆栈来实现它。

您是否知道 RoR 4 内置了对流媒体的支持：http: [//tenderlovemaking.com/2012/07/30/is-it-live.html](http://tenderlovemaking.com/2012/07/30/is-it-live.html)

您可能能够使用 JS 库（如 Angular 或 Ember JS）来实现您的协作需求，这些库使用 Ajax 来保持用户屏幕与其他用户正在做的事情同步。

此外，这篇关于如何实现 Trello 的博文可能会给您一些想法。他们有一个很好的协作网络界面：http: [//blog.fogcreek.com/the-trello-tech-stack/](http://blog.fogcreek.com/the-trello-tech-stack/)

关于您的问题：

1.  以两种不同技术实现的两个应用程序可以共享同一个数据库。您将需要选择一个您想要使用的两种技术堆栈都支持的数据库。之后，将两个应用程序指向同一个数据库。
2.  如果您在 PHP/RoR 应用程序中对用户进行身份验证，则可以为该用户设置 cookie。假设您的 Meteor 应用程序是从同一个域提供的，那么您可以读取此 cookie，该 cookie 可能包含经过身份验证的用户会话的某种标识符。然后，您的 Meteor 应用程序可以检查数据库以查看这是否是经过身份验证的用户的有效会话。

# mysql - 最好在 sql 查询中使用“小于等于”或“in”

> ID：13738426
> 
> 赞同：0
> 
> 时间：2012-12-06T06:54:16.087
> 
> 标签：mysql, sql

如果我必须更新表中超过 10000 行，并且表包含超过 700000 条记录，并且我们必须更新其主键的行是连续的。更好地获取最大主键然后在sql查询中使用“小于等于”还是我必须在查询中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:56:21.843

最好的将是使用`between`

假设您要更新其 entity_id(PK) 范围为 10 和 10000 的表的 column1。

```
update table set column1=somevalue where id between 10 and 10000 
```

Using`in`子句将需要从子查询中获取 id，或者您需要放入大括号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:08:51.390

由于它们是相同的，因此在速度或其他方面确实没有区别。更好用更自然给你。

您可以简单地使用**小于或等于**

```
UPDATE table_name SET column_name=value WHERE row_id <= 10000 
```

需要注意的一件事是，如果您对 DATETIME 使用它，则结束日期的匹配将是一天的开始：

<= 6/12/2012 与： <= 6/12/2012 23:59:59 不同（**它将与 <= 6/12/2012 00:00:00.000 匹配**）

# perl - 通过 perl 脚本进行 SVN 结帐

> ID：13738429
> 
> 赞同：0
> 
> 时间：2012-12-06T06:54:24.893
> 
> 标签：perl, svn

我想使用 perl 脚本进行 SVN 结帐。基本上想自动化SVN结帐过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:03:41.417

为此，您可以使用[SVN::Client 。](https://metacpan.org/module/SVN::Client)另请查看[此答案](https://stackoverflow.com/a/13272000/257635)。

# vbulletin - 如何在 vBulletin 中设置从数据库配置？

> ID：13738435
> 
> 赞同：1
> 
> 时间：2012-12-06T06:55:01.100
> 
> 标签：vbulletin

如何在 vBulletin 中设置从属数据库配置？我是这样设置的：

$config['Database']['dbtype'] = 'mysql';

$config['Database']['dbname'] = 'xyz';

$config['Database']['tableprefix'] = 'vbulletin1_';

$config['Database']['technicalemail'] = 'xyz@abc.com';

$config['Database']['force_sql_mode'] = false;

$config['MasterServer']['servername'] = 'xyz';

$config['MasterServer']['port'] = 3306;

$config['MasterServer']['username'] = 'x';

$config['MasterServer']['password'] = 'xxxx';

$config['MasterServer']['usepconnect'] = 0;

$config['SlaveServer']['servername'] = 'abc';

$config['SlaveServer']['port'] = 3306;

$config['SlaveServer']['username'] = 'a';

$config['SlaveServer']['password'] = 'xxxx';

$config['SlaveServer']['usepconnect'] = 0;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-04T09:30:16.353

这仅取决于您的从数据库凭据。而“从属数据库”意味着您已经在主机上复制了数据库（vBulletin 无法做到这一点，它应该由您的 Web 服务器自动完成）。因此，如果您没有复制数据库，则不应设置从数据库。

主从设置是为了性能。您将写入查询发送到主服务器，并将大多数读取查询发送到从服务器。它有助于提高性能，因为写入查询会根据数据库表类型锁定表/行，而读取不会。 [vBulletin 论坛](http://www.vbulletin.com/forum/forum/vbulletin-legacy-versions-products/legacy-vbulletin-versions/vbulletin-3-5-how-do-i-questions-and-troubleshooting/155225-slave-database-configuration)

# php - 如何使用带有 FK 的列字段默认值插入新记录

> ID：13738436
> 
> 赞同：0
> 
> 时间：2012-12-06T06:55:18.590
> 
> 标签：php, mysql

我正在尝试将`INSERT`新记录添加到表 ( `employee`) 中，其中一些列`FK`是链接到其他表 (`license`和`car`)`PK`的。table(1) 为这些列设置了默认值，这些列反映了 table(2+3) 中列出的相同值`PK`。

例子：

```
INSERT INTO employee (Emp_ID, Lic_ID, Car_ID) Values ('1234', ' ', ' ')

Tables:

table(1) = employee
      PK = Emp_ID
      FK = Lic_ID, default = 1
      FK = Car_ID, default = 1

table(2) = license
      PK = Lic_ID
 records = 1 through 8

table(3) = car
      PK = Car_ID
 records = 1 through 6 
```

问题是，每当我尝试运行该插入语句时，我都会得到：

`Error: 1452 "Cannot add or update a child row: a foreign key constraint fails"`

我不想在创建员工时在`Lic_ID`or`Car_ID`字段中输入值，因为他们可能没有分配给他们的任何一个。我想要的是表使用默认值'1'，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:11:28.590

如果要使用默认值，请从 INSERT 语句中删除字段名称 -

```
INSERT INTO employee (Emp_ID) Values ('1234'); 
```

# php - 处理动态页面

> ID：13738438
> 
> 赞同：-1
> 
> 时间：2012-12-06T06:55:26.367
> 
> 标签：php, mysql

我一直在使用 URL id 参数从数据库中获取数据。我面临`syntax error`同样的问题。谁能告诉我这段代码有什么问题。

```
<?php
$con = mysql_connect("localhost","root","");
if (!$con)
{
    die('Could not connect: ' . mysql_error());
}
$per = $_GET['id'];

$query = mysql_query("select * from dynamic_data where id=".$_GET['id']");

while($row = mysql_fetch_array($query))
{
    echo "<label>" . $row['name'] . "</label>";
    echo "<label>" . $row['desc'] . "</label>";
    echo "<label>" . $row['cell'] . "</label>";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:04:52.047

用这个替换您的查询，您的查询中有语法错误。

```
$query = mysql_query("select * from dynamic_data where id=".(int)$_GET['id']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:02:30.670

这是有效的

```
<?php
$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

$per = $_GET['id'];
$query = mysql_query("select * from dynamic_data where id=$per");

while($row = mysql_fetch_array($query))
  {
  echo "<label>" . $row['name'] . "</label>";
  echo "<label>" . $row['desc'] . "</label>";
  echo "<label>" . $row['cell'] . "</label>";
  }

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T07:02:50.467

首先，停止使用`mysql_`；使用`PDO`或`mysqli`了解准备好的陈述。

您可以从自己的帖子中看出语法错误的来源。有一个无与伦比的双引号。

以下构造应该可以帮助您编写更安全的查询：

```
$sql = sprintf("select * from dynamic_data where id='%s'", mysql_real_escape_string($_GET['id']));

$result = mysql_query($sql); 
```

它确保时髦的字符被正确转义。在您的情况下， id 是一个数字，所以这也可以：

```
$sql = sprintf("select * from dynamic_data where id=%d", (int)$_GET['id']);

$result = mysql_query($sql); 
```

# java - 如何初始化一个两列数组列表？

> ID：13738441
> 
> 赞同：8
> 
> 时间：2012-12-06T06:55:33.687
> 
> 标签：java, android, arraylist

我需要创建一个记录两列 {int, String} 的列表。我认为 ArrayList 是我需要的，但我无法理解它。我从数据库中提取了字符串，int 是我需要识别字符串位置以供以后使用的索引值。

`List<List<String>> strArray = ArrayList<List<String>>;`

那么我可以为从数据库中提取的每一行执行类似 strArray.add().add() 的操作吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-06T07:00:35.600

另一种方法是制作一个自定义对象：

```
Class CustomObject {
    int value1;
    String value2;

    CustomObject(int v1, String v2) {
        value1 = v1;
        value2 = v2;
    }
} 
```

然后使用它：

```
List<CustomObject> myList = new ArrayList<CustomObject>();
CustomObject o1 = new CustomObject(1, "one");
myList.add(o1);
// etc. 
```

如果`int`值是唯一的并且您想将它们视为键，那么 a`Map`将按照其他人的建议工作。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-06T06:59:28.990

我认为如果你的值是唯一的，你应该使用`HashMap`with`int`作为键和值。`String``int`

```
Map<Integer,String> myMap = new HashMap<Integer,String>();
myMap.put(1,"ABC"); 
```

请注意，作为`Map`集合，Java 集合不存储原始类型`int`，它们存储对象，因此您必须为您的值使用`Integer`包装类。`int`

参考这个链接[为什么 Java Collections 不能直接存储 Primitives 类型？](https://stackoverflow.com/questions/2504959/storing-primitive-values-in-a-java-collection)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-06T07:01:49.147

如果您只需要两个值，则可以使用本机[Pair](http://developer.android.com/reference/android/util/Pair.html)类

```
List<Pair> mPairs = new ArrayList<Pair>();

Pair pair = new Pair(123,"your string");
mPairs.add(pair); 
```

如果您的 int 值不是唯一的，那么这将是一个不错的决定，因此您不能使用 HashMap

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T07:28:26.753

如果您的 ID 不是唯一的，您仍然可以使用 Map ：

```
Map<Integer, String> map = new IdentityHashMap<Integer, String>();
map.put(new Integer(1), "string"); 
```

IdentityHashMap - 为每个 OBJECT 使用本地 hashCode 实现，因此您不需要唯一的 ID，但您必须通过 operator 'new' 创建所有整数，并且不要使用自动装箱，因为有一些[缓存机制](https://stackoverflow.com/questions/3131136/integers-caching-in-java)。

还有 JVM 参数，它控制缓存大小'-XX:AutoBoxCacheMax='。但是使用这个参数你不能禁用缓存，如果你将大小设置为零，那么缓存将忽略它并使用默认值：[-128; 127]。此参数仅适用于 Integers，Long 没有此类参数。

**更新** 对于非唯一键，您可以使用某种多映射： Map> map

并使用非唯一键将您的值存储在其中：

```
map.put(1, new ArrayList<String>());
map.get(1).add("value1");
map.get(1).add("value2"); 
```

例如，您可以使用 HashMap。

您还可以在 google-collections: 'guava' 中找到 MultiMap 实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T06:59:19.253

我认为您可以将 int 和 string 包装在一个类中，然后将类对象放入 List 中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T06:59:27.537

> Map 是将键映射到值的对象。地图不能包含重复的键；每个键最多可以映射到一个值。

我认为如果你使用`Map<Integer,String>`where`key(Integer)`将是指向`String`价值的索引会更好。

```
Map<Integer,String> map = new HashMap<Integer,String>();
map.put(1,"str1");
map.put(2,"str2");
... 
```

# linq-to-entities - 如何使用 linq to entity 从多个表中填充水晶报表

> ID：13738445
> 
> 赞同：1
> 
> 时间：2012-12-06T06:55:47.077
> 
> 标签：linq-to-entities

我已经完成了单表水晶报表。现在我想在水晶报表中显示多个表格数据，但它给了我异常“DataSet 不支持 System.Nullable<>。” 请指导我解决这个问题，或者给我其他解决方案。守则是

ReportDocument 报告 = new ReportDocument();

```
 report.Load(Server.MapPath("Assets.rpt"));
        using (var matr = new InventoryDBEntities())
        {
            report.SetDataSource(from p in matr.Issueds
                                select new
                                 {
                                     SerialNo = p.SerialNo,
                                     FixedAssetNO = matr.Items.Where(b => b.SerialNo == p.SerialNo).Select(b => b.FixedAssetNO).FirstOrDefault(),
                                     Category = matr.Items.Where(b => b.SerialNo == p.SerialNo).Select(b => b.Type).FirstOrDefault(),
                                     ModelNo = matr.Items.Where(b => b.SerialNo == p.SerialNo).Select(b => b.ModelNo).FirstOrDefault(),
                                     IssueToUser = p.IssuedPerson,
                                     IssueToDept = p.IssuedDept,
                                     UpdatedBy = matr.Emploees.Where(b => b.EID == p.EID).Select(b => b.Name).FirstOrDefault(),
                                     IssuedDate = p.IssuedDate,
                                  });

        }

            CrystalReportViewer1.ReportSource = report; 
```

# c# - 扩展 OpenFileDialog 以同时选择文件夹和文件

> ID：13738447
> 
> 赞同：1
> 
> 时间：2012-12-06T06:55:54.313
> 
> 标签：c#, openfiledialog

我想要实现的是 从 OpenFileDialog**同时选择多个文件夹和文件。**
建议的设置解决方案：

```
OpenFileDialog.Multiselect = true;
OpenFileDialog.ValidateNames = false;
OpenFileDialog.CheckFileExists = false;
OpenFileDialog.CheckPathExists = true;
OpenFileDialog.FileName = "Dummy";
OpenFileDialog.Filter = string.Empty; 
```

当用户**同时**选择文件夹和文件时，此设置将失败。

我正在寻找一种解决方案，当用户按下**打开**按钮并获取所选文件和文件夹的路径时，我可以通过该解决方案关闭对话框。

![](../Images/d6e41f68dd0b7a6c085576c0591aae98.png)

# spring - Spring3 上的 Struts2 和 BlazeDS

> ID：13738448
> 
> 赞同：0
> 
> 时间：2012-12-06T06:55:55.137
> 
> 标签：spring, struts2, flex4, blazeds

我想同时配置在 springframework 上运行的 blazeds 和 Struts2 的设置。我像下面这样配置了 web.xml。但是一个工作另一个不起作用。因为 Struts2 过滤了 AMF 协议。

如果我注释掉其中一个，它可以工作。反之亦然。

有没有办法配置 struts2 设置以同时工作？

* * *

web.xml

```
<!-- Struts2 Settings  
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
        <init-param>
            <param-name>struts.devMode</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
-->

    <!-- Flex Settings -->
    <listener>
        <listener-class>flex.messaging.HttpFlexSession</listener-class>
    </listener>

    <!-- MessageBroker Servlet -->
    <servlet>
        <servlet-name>MessageBrokerServlet</servlet-name>
        <display-name>MessageBrokerServlet</display-name>
        <servlet-class>flex.messaging.MessageBrokerServlet</servlet-class>
        <init-param>
            <param-name>services.configuration.file</param-name>
            <param-value>/WEB-INF/flex/services-config.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>MessageBrokerServlet</servlet-name>
        <url-pattern>/messagebroker/*</url-pattern>
    </servlet-mapping> 
```

* * *

**发展**

JDK1.6

Spring3.0.1

Tomcat6.0

弹性4.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:27:43.990

您可以从 Struts2 过滤器中排除一些模式。`struts.action.excludePattern`在`struts.xml`文件中定义常量。

```
<constant name="struts.action.excludePattern" value=".*unfiltered.*,.*\\.nofilter"/> 
```

# python - Python 创建原始音频

> ID：13738449
> 
> 赞同：2
> 
> 时间：2012-12-06T06:55:56.933
> 
> 标签：python, audio, audio-streaming

我使用 Windows 7。我想做的就是创建原始音频并将其流式传输到扬声器。在那之后，我想创建可以产生正弦进行的类（基本上，一种慢慢变得越来越尖锐的音调）。之后，我想将我的原始音频放入音频编解码器和 .WAV 和 .MP3 等容器中，而不会发疯。**在不使用标准安装不附带的依赖**项的情况下，我如何能够在 Python 中实现这一点？

我从这里和整个互联网上查找了大量文件、描述和相关问题。我阅读了有关 PCM 和 ADPCM 以及 A/D 转换器的信息。我迷路的地方是字节输入的比率-> Kbps 输出和所有这些东西之间的某个地方。

真的，我想要的只是有人能够指出我正确的方向来精确地学习音频格式，以及如何在 Python 中使用它们（但首先我想从原始音频开始）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T21:41:04.217

这个问题实际上有两个部分：

1.  如何生成音频信号
2.  如何通过扬声器播放音频信号。

我围绕 python std lib 的`wave`模块编写了一个简单的包装器，称为[pydub](http://pydub.com)，您可以将其视为（在[github 上](https://github.com/jiaaro/pydub)）作为如何操作原始音频数据的参考点。

我通常只是将音频数据导出到文件中，然后使用 VLC 播放器播放。恕我直言，除非您正在制作合成器、游戏或其他一些实时应用程序，否则没有理由编写一堆代码来播放音频。

无论如何，我希望这可以帮助您入门:)

# android - 如何将上下文菜单添加到列表视图项的 onclick 事件

> ID：13738450
> 
> 赞同：2
> 
> 时间：2012-12-06T06:55:59.413
> 
> 标签：android, listview

我正在使用列表视图。我使用高效适配器添加项目。我正在为每一行的 onclick 事件使用警报对话框。但它只给了我两个选择。我想要更多选项，所以我希望在列表视图的每一行上长按上下文菜单。这是我的代码：

```
 public View getView(final int position,  View convertView, ViewGroup parent) {
        // A ViewHolder keeps references to children views to avoid unneccessary calls
        // to findViewById() on each row.
        final ViewHolder holder;
        if (convertView == null) {
             convertView = mInflater.inflate(R.layout.list, null);              

             convertView.setOnClickListener(new OnClickListener() {
                    private int pos=position;

                    @Override
                    public void onClick(View v) {                           

                            AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(curr_inst);

                        alertDialogBuilder.setTitle("Data selection");                              
                        alertDialogBuilder
                            .setMessage("Do you wish to capture new data or access already stored data?")
                            .setCancelable(false)
                            .setPositiveButton("Capture new data",new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,int id) {
                                    Bundle b=new Bundle();
                                    String array = DATA[pos];
                                    b.putString("user",array);                                      
                                    Intent intent = new Intent(curr_inst, BluetoothConnect.class);
                                    intent.putExtras(b);            

                                    curr_inst.startActivity(intent);

                                }
                              })
                            .setNegativeButton("Access stored data",new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,int id) {
                                    Bundle b=new Bundle();
                                    //String[] name={ "adi","MEGAN","DAVE","JOHN","HENDRIX"};
                                    String array = DATA[pos];
                                    b.putString("key",array); 
                                    Intent i =new Intent(curr_inst,List13.class);
                                    i.putExtras(b);     

                                    curr_inst.startActivity(i)  ;                               
                                }
                            });

                            // create alert dialog
                            AlertDialog alertDialog = alertDialogBuilder.create();

                            // show it
                            alertDialog.show();     
                            alertDialog.setCancelable(true);

                    }
                });
            // Creates a ViewHolder and store references to the two children views
            // we want to bind data to.

            holder = new ViewHolder();
            holder.text = (TextView) convertView.findViewById(R.id.text);
            holder.text1 = (TextView) convertView.findViewById(R.id.text1);
            holder.text2 = (TextView) convertView.findViewById(R.id.text2); 
```

我想使用上下文菜单代替此警报对话框，谁能告诉我该怎么做。我尝试使用`registerForContextMenu(convertView);`，但它说不能从 Activity 类型对非静态方法 registerForContextMenu(View) 进行静态引用

更新代码：

```
 public class List14 extends ListActivity {
//; 
static List14 curr_inst;
boolean FirstUSe1 = false;
boolean FirstUSe2 = true;
int count = 1; 

public int counter() {
    return DATA.length;
}

public static void update()
{
    EfficientAdapter k=new EfficientAdapter(curr_inst);
    //convertView.setTag(holder);
    k.notifyDataSetChanged();       
    curr_inst.setListAdapter(k);
}

private static class EfficientAdapter extends BaseAdapter {

    private LayoutInflater mInflater;

    public EfficientAdapter(Context context) {
        // Cache the LayoutInflate to avoid asking for a new one each time.
        mInflater = LayoutInflater.from(context);

    }

    /**
     * The number of items in the list is determined by the number of speeches
     * in our array.
     *
     * @see android.widget.ListAdapter#getCount()
     */
    public int getCount() {
        return DATA.length;
    }

    /**
     * Since the data comes from an array, just returning the index is
     * sufficent to get at the data. If we were using a more complex data
     * structure, we would return whatever object represents one row in the
     * list.
     *
     * @see android.widget.ListAdapter#getItem(int)
     */
    public Object getItem(int position) {
        return position;
    }

    /**
     * Use the array index as a unique id.
     *
     * @see android.widget.ListAdapter#getItemId(int)
     */
    public long getItemId(int position) {
        return position;
    }

    /**
     * Make a view to hold each row.
     *
     * @see android.widget.ListAdapter#getView(int, android.view.View,
     *      android.view.ViewGroup)
     */
    public View getView(final int position,  View convertView, ViewGroup parent) {
        // A ViewHolder keeps references to children views to avoid unneccessary calls
        // to findViewById() on each row.
        final ViewHolder holder;
        pos = position;

        // When convertView is not null, we can reuse it directly, there is no need
        // to reinflate it. We only inflate a new View when the convertView supplied
        // by ListView is null.
        if (convertView == null) {
             convertView = mInflater.inflate(R.layout.list, null);              

             convertView.setOnClickListener(new OnClickListener() {

                 public void onClick(View v1){
                     pos = position;
                     curr_inst.registerForContextMenu(v1);
                    }                      
            });
            // Creates a ViewHolder and store references to the two children views
            // we want to bind data to.

            holder = new ViewHolder();
            holder.text = (TextView) convertView.findViewById(R.id.text);
            holder.text1 = (TextView) convertView.findViewById(R.id.text1);
            holder.text2 = (TextView) convertView.findViewById(R.id.text2);             

            convertView.setTag(holder);
        } else {
            // Get the ViewHolder back to get fast access to the TextView
            // and the ImageView.
             convertView.setOnClickListener(new OnClickListener() {                     
                     public void onClick(View v2){
                         pos=position;
                         curr_inst.registerForContextMenu(v2);
                        }
                   });
            // Creates a ViewHolder and store references to the two children views
            // we want to bind data to.

            holder = new ViewHolder();
            holder.text = (TextView) convertView.findViewById(R.id.text);
            holder.text1 = (TextView) convertView.findViewById(R.id.text1);
            holder.text2 = (TextView) convertView.findViewById(R.id.text2);             
            }

        // Bind the data efficiently with the holder.
        holder.text.setText(DATA[position]);
        holder.text1.setText(DATA_NAME[position]);
        holder.text2.setText(DATA_AGE[position]);
        //holder.del.setImageBitmap(mIcon3);

        return convertView;
    }

    static class ViewHolder {
        TextView text;          
        TextView text1;
        TextView text2;             
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:04:18.680

我不确定问题是什么，但我尝试了以下方式，它没有向我显示任何错误。

试试这个，

```
if (convertView == null) {

            convertView = mInflater.inflate(R.layout.gallery_element, null);

            holder = new ViewHolder();
            convertView.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                      m_Activity.registerForContextMenu(v);

                }
            });
         } 
```

这里**m_Activity**是一个 Activity 对象。请注意 Context 对象在这种情况下将不起作用。您需要传递您的 Activity 对象来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T10:28:25.467

```
@Override
     public void onListItemClick(ListView l, View view, int position, long id)
        {
            item_pos= (Integer) getListAdapter().getItem(position);     
            registerForContextMenu(l);
            openContextMenu(l);//           
          } 
```

上面的代码有效。以前我使用视图代替列表视图。现在它完美地工作了。

# monodevelop - 通过单击 Unity3d 中的控制台来实现 Monodevelop 错误

> ID：13738451
> 
> 赞同：2
> 
> 时间：2012-12-06T06:56:02.413
> 
> 标签：monodevelop, unity3d

Unity 在 Monodevelop 中使用相同的文件打开两个选项卡。如何摆脱这个问题？Monodevelop 3.0.5 视频：[http ://www.youtube.com/watch?v=ABSbI8sMHLU](http://www.youtube.com/watch?v=ABSbI8sMHLU)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-08T07:38:29.453

也许 Visual Studio 是替代 Mono 的一个不错的选择。通过使用视觉你甚至可以检查元数据，而且它肯定只在同一个项目中打开一个选项卡。

# websphere - 在 WebSphere Application Server 7.0 上设置 URL 资源？

> ID：13738457
> 
> 赞同：6
> 
> 时间：2012-12-06T06:56:34.810
> 
> 标签：websphere, jndi, web.xml, websphere-7

我需要在 WebSphere 中设置一个 URL 资源，并且正在学习[本](http://www.ibm.com/developerworks/websphere/library/techarticles/0502_botzum/0502_botzum.html#sec3b)教程。但是，本教程需要使用 WebSphere Studio修改 WebSphere 的*web.xml*和*ibm-web-bnd.xml 。*我没有 WebSphere Studio，所以我需要使用文本编辑器手动修改这些文件。我试图“搜索”这两个文件，但“搜索结果”太多了，我不知道哪个是正确的文件。

我在哪里可以找到这 2 个文件？我还需要为`resource-ref`id 设置什么值？我注意到 WebSphere Studio 没有用于设置`resource-ref`'s 的任何文本字段，但它在其代码视图中有一个值。

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-06T07:27:24.670

`web.xml`是一个标准的 JavaEE 文件，其结构在 Servlet 规范中有详细记录。在`web.xml`中，您声明在本地 JNDI 命名空间 ( `java:comp/env`) 中已知的 URL。

`web.xml`应该位于`WEB-INF`WAR 项目结构下方的内部。如果您使用 IDE（例如 Eclipse）来创建 Web 项目，则应该已经为您创建了该文件（除非您使用 Servlet Specification 2.5 及更高版本 - JavaEE 5.0 中包含 Servlet Specification 2.5 - 其中部署描述符是可选的）。

`ibm-web-bnd.xml`是特定于 WebSphere 的文件。它包含将声明的工件（例如 URL 定义）*绑定到**真正的*工件中。您应该参考 IBM 的文档以确定该文件的格式。

该`ibm-web-bnd.xml`文件应位于与`web.xml`.

的`id`属性`resource-ref`可以设置为您喜欢的任何值，只要它被`id`内部匹配的属性交叉引用即可`ibm-web-bnd.xml`。这就是 WebSphere 可以如何将 in`ibm-web-bnd.xml`中的定义与`web.xml`. 您在教程中看到的随机字符串是由 RAD 或 WSAD 创建的；您可以在那里放置任何标识符。

**编辑**（添加说明）

简而言之，过程是这样的：

1.  在`web.xml`中，您定义*本地*JNDI 名称。这将是您的 Java 代码引用 URL 的名称。例如，`myWebsiteUrl`。您的代码必须对`java:comp/env/myWebsiteUrl`. 定义如下：

    ```
    <resource-env-ref>
        <resource-env-ref-name>myWebsiteUrl</resource-env-ref-name>
        <resource-env-ref-type>java.net.URL</resource-env-ref-type>
    </resource-env-ref> 
    ```

2.  在 WebSphere 本身中，添加一个 URL 定义。关键是*WebSphere 的 JNDI 树中*的 JNDI 名称，通过该名称可以知道 URL。您可以在此处设置任何值，但建议（按照惯例）在其前面加上`url/`. 例如：`url/test`。

3.  在`ibm-web-bnd.xml`中，您需要绑定`myWebsiteUrl`（由您的应用程序查找）到`url/test`（WebSphere 通过它知道 URL 的 JNDI 名称）。定义将遵循以下原则：

    ```
    <resource-env-ref name="myWebsiteUrl" binding-name="url/test"/> 
    ```

步骤 3 不是必需的。如果`ibm-web-bnd.xml`在部署时不存在，那么基于 GUI 的部署流程（在您通过 WAS 管理控制台部署应用程序时使用）将提示您输入绑定值。（如果您使用脚本进行部署，您仍然可以省略该`ibm-web-bnd.xml`文件，只要您以不同的方式指定绑定，但这超出了此答案的范围。阅读有关*策略文件*的 IBM 文档和`AdminApp.installApplication`）

注意：只要您使用 JavaEE 5.0 及更高版本，就不需要`id`定义中的属性。顺便说一句，您正在阅读的文章已经过时了。

# .net - BAT 文件以构建解决方案并执行单元测试

> ID：13738461
> 
> 赞同：2
> 
> 时间：2012-12-06T06:56:47.937
> 
> 标签：.net, visual-studio-2010

我正在尝试创建 bat 文件，它将在 .Net 中构建解决方案并执行单元测试用例

有没有人做过类似的事情，或者有什么意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:04:10.797

此处提供了有关用于构建解决方案的命令行参数的信息：

[http://msdn.microsoft.com/en-us/library/xee0c8y7(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/xee0c8y7(v=vs.80).aspx)

您的构建命令将类似于以下内容：

"C:\Program Files(x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe" "SolutionName.sln" /build Release

如果它们是 MSTest，则要运行单元测试，那么您将需要使用与 devenv.exe 位于同一文件夹中的 MSTest.exe。MSTest 的命令行选项可在此处获得：

[http://msdn.microsoft.com/en-us/library/ms182489(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms182489(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T07:06:56.187

检查这篇文章[如何从命令行运行单元测试测试？](https://stackoverflow.com/questions/3930445/how-to-run-unit-testing-tests-from-command-line)很有用。目前，在命令行帮助下使用 devenv.exe 和 mstest.exe 似乎很容易。你可以试试。 `MSTest /help` 或 `devenv /help` 在开发人员命令提示符中。

# css - CSS Nth 子选择器 - 样式

> ID：13738464
> 
> 赞同：0
> 
> 时间：2012-12-06T06:57:04.200
> 
> 标签：css, css-selectors

```
<a class="abc">
     <span class="def">foo</span>
     bar
   </a> 
```

我如何定位栏以使其粗体 - 我不能给它任何 css 类，尝试了第 n 个孩子但没有工作 - 像这样尝试了第 n 个孩子：但没有工作 - 在 ff 上测试。

```
abc a:nth-child(2) {
text-weight:bold !important;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:02:08.563

您对 css 规则有疑问。把它写成

```
 .abc a:nth-child(2) {
    font-weight:bold !important;
    } 
```

并实现您想要的效果，将您的 CSS 更改为

```
 a.abc {
    font-weight:bold!important;
    }
.def{
    font-weight:normal!important;
    }

​ 
```

**[稍后见 JsFiddle Demo](http://jsfiddle.net/96e32/9/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:46:29.057

当您以 nth-child css 为目标时，您必须将条形文本放在 span coz 中，您必须显示相同的标签，我已经创建了两个示例检查这个小提琴[http://jsfiddle.net/sarfarazdesigner/ShRnY/](http://jsfiddle.net/sarfarazdesigner/ShRnY/)

并使用下面的代码

```
.abc :nth-child(2) {
    font-weight:bold;
}

<a class="abc">
     <span class="def">foo</span>
     <span>bar</span>
   </a>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T07:20:13.073

你可以做一个技巧来做到这一点。

```
.abc
{
  font-weight:bold;
}
.def{

font-weight:normal;
} 
```

**HTML**

```
<a class="abc">
     <span class="def">foo</span>
     bar
</a> 
```

检查这个[小提琴](http://jsfiddle.net/96e32/2/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-06T07:16:41.680

**现在试试这个**

```
.abc:nth-child(2) {
font-weight:bold !important;
} 
```

***[演示](http://jsfiddle.net/FpXh6/)***

# javascript - 改变中间隔速度的最有效方法？

> ID：13738469
> 
> 赞同：0
> 
> 时间：2012-12-06T06:57:19.497
> 
> 标签：javascript

我想在运行时更改 steininterval() 的速度我尝试过这样的事情：

```
inteval = 1;
setInterval(function(){
    }, interval);
interval = 2; 
```

然后我尝试了这个不使用间隔的方法，但似乎工作正常：

```
// Time
inteval = 1;
function refresh() {
    setTimeout(function() {refresh()},interval);
    }
refresh();
interval = 2; 
```

我宁愿使用 setinterval() 但这种方法效果很好。但是在另一个类似的问题中，有一种更长的方法：[在运行时更改 SetInterval 的间隔](https://stackoverflow.com/questions/1280263/changing-the-interval-of-setinterval-while-its-running)

如果我的代码段在效率方面好？有没有更有效的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:12:17.390

像这样的东西怎么样：

```
var interval = 1000;
var times = 0;

function runInterval() {
    times ++;
    if(times == 5) {
        interval = 3000;
        clearInterval(s);
        s = setInterval(runInterval, interval);
    }
    console.log(times);
}
var s = setInterval(runInterval, interval);​ 
```

如果你想使用 setInterval，这是一种方法。我希望它可以帮助你

# meteor - 在 DOM 初始化后加载数据时显示加载器

> ID：13738483
> 
> 赞同：2
> 
> 时间：2012-12-06T06:58:16.550
> 
> 标签：meteor

在服务器上部署流星应用程序时，从 mongodb 获取数据需要相当长的时间（3-4 秒）。在我的应用程序中，我有一个通过#each 块助手绑定到数据的模板。

```
{{#each items}}
    {{> item_info}}
{{else}}
    No items yet.
{{/each}} 
```

因此，当应用程序在新的浏览器会话中加载时，用户会看到该消息`No items yet`，直到数据加载完成。当数据可用时，该消息将替换为实际数据。但这会导致糟糕的用户体验，因为在这 3-4 秒内，一些用户实际上认为他们丢失了数据。

我的问题是——是否可以在获取数据时将“其他”消息更改为“正在加载...”之类的内容？或者这个问题有更优雅的解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T09:14:55.083

我认为你应该在里面使用`Session`with`onComplete()`函数`Meteor.subscribe()`

这将在订阅完成时自动执行，即您的收藏已完成加载到客户端。

例如。

```
Meteor.subscribe('yourCollection', function onComplete(){

         // set a session to true indicating your collection is loaded.
         Session.set('itemsLoaded', true);
}); 
```

然后根据会话值调用您的模板助手：

```
Template.yourTemplate.isLoaded = function(){

     return Session.get('itemsLoaded'); 
} 
```

您的 html 将如下所示：

```
<template name="yourTemplate">
    {{#if isLoaded}}
        {{#each items}}
          {{> item_info}}
        {{/each}}
    {{/if}}

    {{#unless items}}
         <img src="images/loader.gif">
    {{/unless}}
</template> 
```

# android - 在android中使用json

> ID：13738484
> 
> 赞同：2
> 
> 时间：2012-12-06T06:58:17.227
> 
> 标签：android, json, sqlite

我正在使用具有销售和采购管理的项目的详细方法开发一个 android 应用程序。

为此，我正在使用登录和其他屏幕应用程序..

我的项目已在`SQLite`数据库中正确运行，我怎样才能使其成为集中使用`JSON`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T07:05:44.627

[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

有关 Jsonparsing 教程，请参阅上面的链接。基本上，您将需要从 url 返回 json 对象的示例中的 JSONParser.java。

链接还包括可下载的代码。但请确保您使用 AsyncTask 来执行所有基于网络的任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T07:07:19.880

您可以将 Json 与 PHP 和 MYSQL 一起用于集中式应用程序。

有关登录活动，请参阅以下教程，..

[登录](http://www.youtube.com/watch?v=wW3nQzw6PnY)

以及其他数据库活动，如创建、插入、获取、更新和删除服务器端数据库上的数据，请遵循本教程，..

[PHP 和 MYSQL](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

这里重要的是，您需要为您的应用程序创建一个服务器端数据库。

而下面的 java 文件对于 JSON 活动更重要，..

```
JSONParser.java
 package com.example.androidhive;

 import java.io.BufferedReader;
 import java.io.IOException;
 import java.io.InputStream;
 import java.io.InputStreamReader;
 import java.io.UnsupportedEncodingException;
 import java.util.List;
 import org.apache.http.HttpEntity;
 import org.apache.http.HttpResponse;
 import org.apache.http.NameValuePair;
 import org.apache.http.client.ClientProtocolException;
 import org.apache.http.client.entity.UrlEncodedFormEntity;
 import org.apache.http.client.methods.HttpGet;
 import org.apache.http.client.methods.HttpPost;
 import org.apache.http.client.utils.URLEncodedUtils;
 import org.apache.http.impl.client.DefaultHttpClient;
 import org.json.JSONException;
 import org.json.JSONObject;
 import android.util.Log;
 public class JSONParser {
 static InputStream is = null;
static JSONObject jObj = null;
static String json = "";
 // constructor
public JSONParser() {
 }
 // function get json from url
// by making HTTP POST or GET method
public JSONObject makeHttpRequest(String url, String method,
        List<NameValuePair> params) {
     // Making HTTP request
    try {
         // check for request method
        if(method == "POST"){
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));
             HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
         }else if(method == "GET"){
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url);
             HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }           
     } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }
     // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }
     // return JSON String
    return jObj;
 }
} 
```

# c# - 列表 序列化性能问题

> ID：13738485
> 
> 赞同：1
> 
> 时间：2012-12-06T06:58:17.207
> 
> 标签：c#, serialization

假设我们有 1000 个字符串或对象的列表，将其序列化到文件中，下次想要更新其中一个并再次序列化。

当前场景：序列化 1000 个项目。反序列化所有这些更新元素之一，然后再次序列化所有 1000 个元素。我们不需要保存\加载所有项目来更新一个元素，这是一种更好的方法吗？

**更新**

我的所有数据都在列表 itemTosave 的实例中。下面的类序列化 itemTosave。

```
[System.Serializable]
internal sealed class SaveAndLoadContainer : ISerializable {

private  List<SaveAndLoadItem> loadedItems;
public  static SaveAndLoadContainer  Instance_Save;
public  static SaveAndLoadContainer  Instance_Load;
private  List<SaveAndLoadItem> loadedItems;
public List<SaveAndLoadItem> LoadedItems {
    get {
        return this.loadedItems;
    }
}   

public  SaveAndLoadContainer(){
    Instance_Save = this;
}
private SaveAndLoadContainer(SerializationInfo info, StreamingContext contex){
    loadedItems = (List<SaveAndLoadItem>)info.GetValue("UnsavedItems", typeof(List<SaveAndLoadItem>));
    SaveAndLoadManager.ItemsToSave.Clear(); 
    SaveAndLoadManager.ItemsToSave.TrimExcess();)
    SaveAndLoadManager.ItemsToSave.AddRange(loadedItems);
}

public void GetObjectData (SerializationInfo info, StreamingContext context){
    List<SaveAndLoadItem> unsavedItems = SaveAndLoadManager.ItemsToSave;
    info.AddValue("UnsavedItems", unsavedItems, typeof(List<SaveAndLoadItem>));
}

} 
```

SaveAndLoadItem 类是：

```
[System.Serializable]
internal sealed class SaveAndLoadItem {
public SaveAndLoadItem(){
    UniqueName = "--Nothing--";
    Value = null;
    ValueType = null;   
    IsClient = false;
}
public SaveAndLoadItem(string uniqueName, object value,Type typeOfValue,bool isClient){
    UniqueName = uniqueName;
    Value = value;
    ValueType = typeOfValue;
    IsClient = isClient;
}

public string UniqueName;
public System.Object Value;
public Type   ValueType;
public bool   IsClient;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:00:10.193

我的所有数据都在列表 itemTosave 的实例中。下面的类序列化 itemTosave。

```
[System.Serializable]
internal sealed class SaveAndLoadContainer : ISerializable {

private  List<SaveAndLoadItem> loadedItems;
public  static SaveAndLoadContainer  Instance_Save;
public  static SaveAndLoadContainer  Instance_Load;
private  List<SaveAndLoadItem> loadedItems;
public List<SaveAndLoadItem> LoadedItems {
    get {
        return this.loadedItems;
    }
}   

public  SaveAndLoadContainer(){
    Instance_Save = this;
}
private SaveAndLoadContainer(SerializationInfo info, StreamingContext contex){
    loadedItems = (List<SaveAndLoadItem>)info.GetValue("UnsavedItems", typeof(List<SaveAndLoadItem>));
    SaveAndLoadManager.ItemsToSave.Clear(); 
    SaveAndLoadManager.ItemsToSave.TrimExcess();)
    SaveAndLoadManager.ItemsToSave.AddRange(loadedItems);
}

public void GetObjectData (SerializationInfo info, StreamingContext context){
    List<SaveAndLoadItem> unsavedItems = SaveAndLoadManager.ItemsToSave;
    info.AddValue("UnsavedItems", unsavedItems, typeof(List<SaveAndLoadItem>));
} 
```

}

SaveAndLoadItem 类是：

```
[System.Serializable]
internal sealed class SaveAndLoadItem {
public SaveAndLoadItem(){
    UniqueName = "--Nothing--";
    Value = null;
    ValueType = null;   
    IsClient = false;
}
public SaveAndLoadItem(string uniqueName, object value,Type typeOfValue,bool isClient){
    UniqueName = uniqueName;
    Value = value;
    ValueType = typeOfValue;
    IsClient = isClient;
}

public string UniqueName;
public System.Object Value;
public Type   ValueType;
public bool   IsClient; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:20:27.363

如果它是字符串列表，您应该只使用文本文件。

对于对象，如果与批量读/写相比，更新单个对象非常普遍，那么您应该单独序列化每个对象或使用分区方案对它们进行批处理。最佳分区方案将取决于您的用例。例如，如果是联系人列表，您可以按姓氏的第一个字母进行分区。

另一种选择是序列化单个对象并将每个对象记录在关系数据库中，例如 Sql Server。您可以使用如下表将序列化对象记录在二进制列中：

```
CREATE TABLE Objects
(
    Id varchar(255),
    Bytes varbinary
) 
```

当字节 blob 的大小非常小（例如 >4KB）时，关系数据库将比文件系统执行得更好。

# algorithm - 中提琴琼斯实验（训练集）

> ID：13738486
> 
> 赞同：2
> 
> 时间：2012-12-06T06:58:22.657
> 
> 标签：algorithm, image-processing, machine-learning, face-detection, adaboost

据说“4916 个正例训练样本经过手工挑选，对齐、归一化并缩放到 24x24 的基本分辨率。通过从 9500 张不包含人脸的图像中随机挑选子窗口来选择 10,000 个负例样本。” 在论文“Robust Real-Time Face Detection by Paul Viola & Michael Jones”中

我的问题是他们对手工挑选的对齐、标准化和缩放到 24x24 的基本分辨率意味着什么？

“手工挑选对齐”是否意味着他们有 4916 张不同面孔的 4916 张正面图像？“标准化”是否意味着 4916 张图像中的每一张都具有相同的特征[文件大小、文件类型、图片颜色（灰度/彩色）]？“缩放到 24x24 的基本分辨率”是否意味着 4916 个图像中的每一个都被重新调整为 24x24 像素？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:47:44.210

> “手工挑选对齐”是否意味着他们有 4916 张不同面孔的 4916 张正面图像？

不一定是不同的——但是是的，他们给出了 4916 张不同的面孔照片。这些面孔是由“人类专家”手动发现的。

> “标准化”是否意味着 4916 张图像中的每一张都具有相同的特征[文件大小、文件类型、图片颜色（灰度/彩色）]？

他们只使用了灰度像素，归一化意味着他们确保没有“黑色”和“白色”图片。如果图片很暗 - 它会自动变亮，如果不够暗 - 它会变暗。这可以通过自动组件轻松完成。

> “缩放到 24x24 的基本分辨率”是否意味着 4916 个图像中的每一个都被重新调整为 24x24 像素？

Yes, they made sure each "face" is exactly 24x24 pixels by applying some processing on the picture.

# node.js - LoadBalancerPorts 的参数集类型

> ID：13738488
> 
> 赞同：1
> 
> 时间：2012-12-06T06:58:30.737
> 
> 标签：node.js

我正在尝试使用 awssum.io 删除负载均衡器侦听器（http://awssum.io/amazon/elb/delete-load-balancer-listeners.html），但我无法弄清楚参数集类型是什么样的. 我试过 [1000, 2000] 但没有用。这是部分代码：

```
var params = { LoadBalancerName: 'my_balancer_name',
               LoadBalancerPorts: [2000, 3000] };

var config = {};
config.accessKeyId = 'abc';
config.awsAccountId = '123';
config.secretAccessKey = 'def';
config.region = 'us-1';

var elb = new Elb(config);

elb.DeleteLoadBalancerListeners(params, function(err, data)
{
    ....
}); 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:12:48.977

我发现这是 lib 错误。这是修复，文件**node_modules/awssum/lib/elb-config.js**，从**type: 'param-set'**更改为**type: 'param-array'**，

```
DeleteLoadBalancerListeners : {
    url : 'http://docs.amazonwebservices.com/ElasticLoadBalancing/latest/APIReference/API_DeleteLoadBalancerListeners.html',
    defaults : {
        Action : 'DeleteLoadBalancerListeners'
    },
    args : {
        Action : {
            required : true,
            type : 'param',
        },
        LoadBalancerName : {
            required : true,
            type : 'param',
        },
        LoadBalancerPorts : {
            required : true,
            // type : 'param-set',
            type : 'param-array',
            prefix : 'member',
        },
    },
}, 
```

# linux - 谁在做恶魔化？

> ID：13738507
> 
> 赞同：1
> 
> 时间：2012-12-06T06:59:42.340
> 
> 标签：linux, daemon, nohup

有多种技巧可以守护一个 linux 进程，即在终端关闭后运行命令。

`nohup`用于此目的，和`fork()`/`setsid()`组合可用于 C 程序中，使自己成为守护进程。

以上是我对linux守护进程的了解，但是今天我注意到退出终端并没有真正终止从`&`命令末尾开始的进程。

```
$ while :; do echo "hi" >> temp.log ; done &
[1] 11108
$ ps -ef | grep 11108
username   11108 11076 83 15:25 pts/0    00:00:05 /bin/sh
username   11116 11076  0 15:25 pts/0    00:00:00 grep 11108
$ exit
(after reconnecting)
$ ps -ef | grep 11108
username   11108     1 91 15:25 pts/0    00:00:17 /bin/sh
username   11130 11540  0 15:25 pts/0    00:00:00 grep 11108 
```

显然，该进程的 PPID 更改为 1，这意味着它以某种方式被守护了。

这与我的知识相矛盾，这`&`还不够，必须使用`nohup`或其他一些技巧来处理“守护进程”。

有谁知道谁在做这个守护进程？

我使用的是 CentOS 6.3 主机，而 putty/cygwin/sshclient 产生了相同的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T16:47:48.160

如果进程不响应 SIGHUP 信号，您可以将其守护进程。

当 bash shell 在运行后台任务时终止时，bash shell 会向所有任务发送 SIGHUP（挂断信号）。但是 bash 不会等到子进程完全终止。如果子进程没有响应 SIGHUP 信号，则该进程将成为孤儿进程。（其父 pid 改为 1 - init 进程 - 防止成为无用的僵尸进程）

Subshel​​l 执行基本上不响应 SIGHUP 信号，因此您的命令在从第一个 shell 注销后仍将运行。

# iphone - 如何对数组进行排序？

> ID：13738511
> 
> 赞同：1
> 
> 时间：2012-12-06T06:59:49.990
> 
> 标签：iphone, ios

> 我被困在这里我在这里有纬度和经度数组，从 JSON Parsing 获取

```
Arr_Lat=[[[[main valueForKey:@"responseData"]valueForKey:@"results"]valueForKey:@"lat"] copy];
Arr_Long=[[[[main valueForKey:@"responseData"]valueForKey:@"results"]valueForKey:@"lng"] copy]; 
```

我已经计算了当前位置和经纬度索引数组之间的距离，并存储到一个数组中......

```
CLLocation *currLoc = [[CLLocation alloc] initWithLatitude:appDel.curr_lat longitude:appDel.curr_long];

CLLocation *destLoc = [[CLLocation alloc] initWithLatitude:appDel.str_lat longitude:appDel.str_long];

distance = [destLoc distanceFromLocation:currLoc]/1000;

DistStr = [[NSMutableString alloc]initWithFormat:@" %0.3f",distance];

    [appDel.Arr_distance addObject:DistStr]; 
```

我对距离进行了这样的排序

```
NSSortDescriptor *sortDescriptor = [[[NSSortDescriptor alloc] initWithKey:@"self" ascending:YES]autorelease];

sortedFloats = [appDel.Arr_distance sortedArrayUsingDescriptors:
                             [NSArray arrayWithObject:sortDescriptor]]; 
```

我已经显示了标题、地址和距离，但地址和距离不匹配我想根据升序距离数组对地址进行排序....

提前感谢您的帮助........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:19:09.650

Arr_distance 是 NSString ，我认为这样对数组进行排序是不正确的。试试这个：

```
sortedFloats = [appDel.Arr_distance sortedArrayUsingComparator:^(NSString *dis1, NSString *dis2){
    if ([dis1 floatValue] < [dis2 floatValue]) {
        return (NSComparisonResult)NSOrderedDescending;
    } else {
        return (NSComparisonResult)NSOrderedAscending;
    }
}];] 
```

您可能需要根据需要交换 NSOrderedDescending 或 NSOrderedAscending。

# asp.net - 如何在 iis 7 服务器中创建默认网站？

> ID：13738516
> 
> 赞同：1
> 
> 时间：2012-12-06T07:00:32.577
> 
> 标签：asp.net, iis-7, web

我是 ASP.Net 的新手。我`Default website`不小心删了。如何在 IIS 7 中创建默认网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:12:18.073

如果您在重新安装 IIS 之前卸载了 Windows Process Activation Service 功能（IIS 功能包的依赖包）。然后您将能够检索默认网站。

# google-chrome - XAMPP 中的白屏和 Chrome 中的 PHPMYADMIN

> ID：13738518
> 
> 赞同：0
> 
> 时间：2012-12-06T07:00:42.813
> 
> 标签：google-chrome, phpmyadmin, xampp

我最近安装了 XAMPP 1.8.1 并且在 Mozilla Firefox 16.0.2 中完全正常。但是当我尝试在 Chrome (17.0.963.2) 上调用 localhost/phpmyadmin 和 localhost/xampp 时它只显示白屏。但我怀疑由于缓存和历史记录，我清除了所有浏览器的历史记录和缓存等。但它仍然作为 whitescreen 存在。但是当我尝试将 xampp/index.php 编辑为

```
<?php echo "something"; ?> 
```

它将在两个浏览器上通过白屏显示“某些东西”。你有什么想法来解决它吗？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:16:00.000

从头开始重新安装 Chrome 并解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-25T12:27:37.410

当我发现我的 C: 驱动器上有零字节可用时，我发生了这种情况。

# git - 如何将 Gerrit 中的几个顶级项目转移到另一个“容器”项目下？

> ID：13738526
> 
> 赞同：3
> 
> 时间：2012-12-06T07:01:15.123
> 
> 标签：git, gerrit

我有一个 Gerrit 安装，其中有几个相关的项目（每个项目都在一个 git 存储库中）。另一个即将上线的项目也将使用gerrit，但为了整洁，我想将现有的一组项目放在一个新的超级项目下（以便在顶层看到“伞”项目. 我还想保留我们为此拥有的数据（例如，审查历史）。

如何去做这样的事情？另一种看待这个问题的方式是，如何将 gerrit 中的子项目从一个超级项目移动到另一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:01:11.410

感谢今天早上我偶然发现的[这篇博文，我找到了解决问题的可靠途径！](http://www.lowlevelmanager.com/2012/09/modify-submit-type-for-gerrit-project.html)虽然它并不完全简单，但它很健壮并且可以工作。

确保您已经创建了要将子项目重新设置为子项目的总括项目，并执行以下步骤：

```
MYGERRIT=ssh://${MYGERRIT_IP}:${MYGERRIT_PORT}

mkdir ~/x
cd ~/x

# Clone the repo for the subproject you want to re-parent
git clone ${MYGERRIT}/<subproject>
cd <subproject>

git fetch origin refs/meta/config:refs/remotes/origin/meta/config
git checkout meta/config

# Make changes to project.config
-----> inheritFrom = <your_umbrella_project_name>

# Commit changes
git add -A
EDITOR=vi git commit -a

# Push changes
git push origin meta/config:meta/config # If pushing directly
#git push origin meta/config:refs/for/meta/config # If going through gerrit

# Flush gerrit caches
ssh -p ${MYGERRIT_PORT} ${MYGERRIT_IP} gerrit flush-caches --cache project_list
ssh -p ${MYGERRIT_PORT} ${MYGERRIT_IP} gerrit flush-caches --cache projects 
```

# iphone - 未使用 NSXMLParser 解析 XML

> ID：13738532
> 
> 赞同：0
> 
> 时间：2012-12-06T07:01:35.490
> 
> 标签：iphone, xml, nsxmlparser

我正在尝试使用 NSXMLParser 解析一个简单的 XML 文件……这是我的代码……

```
 -(void) parseXml{        
        NSString *XmlPath=[[NSBundle mainBundle] pathForResource:@"myXML" ofType:@"xml"];         
        //NSLog(@"%@",XmlPath); path found!       

         NSData *xml=[[NSData alloc] initWithContentsOfFile:XmlPath];
         //NSLog(@"%@",Xml); outputs : xml in hexadecimal coded form   

        self.Xmlparser=[[NSXMLParser alloc]initWithData:xml];
        //NSLog(@"%@",self.Xmlparser); outputs : some hexadecimal code

        self.Xmlparser.delegate=self;

        NSLog(@"%@",self.Xmlparser);        

        if([self.Xmlparser parse])
            NSLog(@"PARSED");
        else
            NSLog(@"NotPARSED");
    } 
```

输出是“NotPARSED”......出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:09:04.637

嘿，你可以检查它的解析是否在它的委托方法中是波纹管..

```
- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError {
    NSString * errorString = [NSString stringWithFormat:@"Unable to download story feed from web site (Error code %i )", [parseError code]];
    NSLog(@"error parsing XML: %@", errorString);

    UIAlertView * errorAlert = [[UIAlertView alloc] initWithTitle:@"Error loading content" message:errorString delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [errorAlert show];
     NSLog(@"NotPARSED");
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI 
 qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
     NSLog(@"PARSED");
    if([elementName isEqualToString:@"item"]){
        currentFilm       = [Film alloc];
        currentNodeContent =[[NSMutableString alloc] init];
    }
} 
```

我希望这可以帮助你...

# sql - 将 varchar 转换为日期 - SQL Server

> ID：13738534
> 
> 赞同：1
> 
> 时间：2012-12-06T07:01:39.673
> 
> 标签：sql, datetime, varchar

我在 SQL Server 2005 中对 StartDate 和 EndDate 字段使用 varchar 数据类型。示例查询如下所示：

*我遵循 dd/MM/yyyy 日期格式。

```
select * from dbo.SubDetails
where
((
DATEADD(DAY,DATEDIFF(DAY, 0, convert(datetime,StartDate,105)), 0) <= 
DATEADD(DAY,DATEDIFF(DAY, 0, convert(datetime,'16/11/2012',105)), 0)
)
AND 
(
DATEADD(DAY, DATEDIFF(DAY, 0, convert(datetime,EndDate,105)), 0) >= 
DATEADD(DAY, DATEDIFF(DAY, 0, convert(datetime,'11/9/2012',105)), 0)
)) 
```

这个查询给了我所有的记录，不管日期范围之间的记录。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:11:01.993

首先 - 如果必须 - 不要将日期值存储在 varchar 列中 - 使用`YYYYMMDD`格式。第二 - 您可以比较日期：

```
select *
from dbo.SubDetails
where
    convert(datetime, StartDate, 105) <= convert(datetime,'16/11/2012', 105) and
    convert(datetime, EndDate, 105) >= convert(datetime,'11/9/2012', 105) 
```

此外，您的查询将返回与给定数据范围相交的所有数据范围（2012 年 9 月 11 日 - 2012 年 11 月 16 日）。那是你想做的吗？

**更新：**如果您需要 2012 年 11 月 9 日至 2012 年 11 月 16 日之间的记录`StartDate`，`EndDate`您可以这样做（假设`StartDate`<= `EndDate`）：

```
select *
from dbo.SubDetails
where
    convert(datetime, StartDate, 105) >= convert(datetime,'09/11/2012', 105) and
    convert(datetime, EndDate, 105) <= convert(datetime,'16/11/2012', 105) 
```

# asp.net - 重定向时默认 url 属性不起作用

> ID：13738536
> 
> 赞同：0
> 
> 时间：2012-12-06T07:01:42.907
> 
> 标签：asp.net, .net, url

我面临一个问题。我已经在 web.config 中设置了默认 url

```
 <authentication mode="Forms">
        <forms loginUrl="Home.aspx" defaultUrl="Admin/AdminHome.aspx">
            <credentials passwordFormat="Clear">
                <user name="admin" password="admin"/>
            </credentials>
        </forms>
    </authentication> 
```

但是当我尝试使用用户名，密码登录时，我认为它使用 url 重定向到页面本身

```
 /Home.aspx?ReturnUrl=%2fAdmin%2fAdminHome.aspx 
```

请告诉我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:58:45.703

> 但是当我尝试使用用户名登录时，密码

具有此用户名/密码的用户似乎无权访问该`Admin/AdminHome.aspx`页面。这就是您被重定向到`loginUrl`使用`ReturnUrl`参数定义的页面的原因。

要完成这项工作，请确保登录用户有权访问`/Admin`文件夹（甚至`Admin/AdminHome.aspx`页面）。

# mongoose - 如何构建这个猫鼬shema？

> ID：13738540
> 
> 赞同：0
> 
> 时间：2012-12-06T07:01:53.463
> 
> 标签：mongoose, database, nosql

这就是我想要的

```
var ImgSchema = new Schema({
      thum_src:String,
      Img_name:String,
      Img_path:String,
 })

var ProductSchema = new Schema({
      owner_id:{type:Schema.Types.ObjectId,ref:'User'},
      shop_id:{type:Schema.Types.ObjectId,ref:'Shop'},
      product_name:String,
      product_category:String,
      product_price:Number,
      product_thum:String,

      product_img:[ImgSchema ],

      add_date:{type:Date,default:Date.now()}
}) 
```

是否可以像我所做的那样定义 product_img ，这就是我想要的，

以及如何将数据保存到 product_img 字段中，

我用

```
 <input  name='thum_src' value="thum_src">
       <input name='img_name' value="img_name">
       <input name='img_path' value="img_path"> 
```

它不会工作 product_img 字段是一个空数组。</p>

我做了一个ajax post来发布数据，在服务器端这就是我所做的

```
 image = mongoose.model('image')
 exports.add = function(req, res){
// console.log(req.body)
    image = {
           thum_src:req.body.thum_src,
           img_name:req.body.img_name,
           img_path:req.body.img_path,
         }
  var data = new Product({
           owner_id:req.user.id,
           shop_id:req.user.shop_id,
           product_name:req.body.product_name,
           product_category:req.body.product_category,
           product_price:req.body.product_price,
           product_thum:req.body.product_thum,
})

data.product_img.push(image);
Product.create(data,function(err,products){
    if(err) console.log(err)
    // console.log(data);
    res.send(products);
})
}; 
```

# java - 如何删除 URL 中的应用程序名称？Tomcat + httpd

> ID：13738546
> 
> 赞同：9
> 
> 时间：2012-12-06T07:02:13.750
> 
> 标签：java, tomcat, apache

每个人

我通过 Apache Click Framework 制作了一个 Web 应用程序，然后将它扔到 httpd 后面的 tomcat 中。

（假设我的域名是 www.domain.com。）所以我可以通过 URL 访问我的应用程序：www.myDomain.com/myApp/pages/login.htm

我的问题是，如何通过 httpd 或 tomcat 中的配置删除此 url 中的“myApp”部分？因为我的域名已经有一些像“myApp”这样的词。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T08:21:44.440

只需命名您的战争文件`root.war`并将其部署到 tomcat。如果存在，您可能必须首先删除`ROOT/`tomcat 中的预配置目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T07:10:27.500

您需要进行大多数框架支持的 URL 重写，如 struts、spring mvc，您可以在 web.xml 中配置，以防 java web 应用程序

请检查您是否可以通过以下方式使用tomcat server.xml（但我不确定，URL重写会解决您的问题）

参考：http: [//tomcat.apache.org/tomcat-6.0-doc/virtual-hosting-howto.html](http://tomcat.apache.org/tomcat-6.0-doc/virtual-hosting-howto.html)。

**etc/hosts**添加如下内容

127.0.0.1 mydomain.com

**server.xml 更改**

```
<Host name="bbstats.localhost" appBase="webapps/myapp"
      unpackWARs="true" autoDeploy="true"
      xmlValidation="false" xmlNamespaceAware="false">
</Host>

<Context path="/myapp" docBase="bbstats" debug="5" reloadable="true" crossContext="true"> 
</Context> 
```

# javascript - IE 7 DIV 类名更改问题

> ID：13738548
> 
> 赞同：0
> 
> 时间：2012-12-06T07:02:26.660
> 
> 标签：javascript, html, css, internet-explorer-7

当我尝试更改特定`DIV`.

基本上有2个类，一个是灰色按钮，另一个是普通按钮。两个类都在某些条件下切换。在 IE7 中，当我第一次尝试更改类名时，它会正确更改，但是当我尝试将其切换回来时，它会消失，一旦我再次单击页面，它就会回来。

这似乎是一些渲染问题。我无法弄清楚为什么第一个类正确地变为灰色状态，但是当切换条件发生变化时它不能正常工作，因此按钮应该恢复正常，而是变得不可见？

IE 8+ 和 firefox，chrome 正在正确渲染它。有什么想法吗？

PS注意：掩码类没有样式属性，只是一个名称标识符。

CSS 代码：

```
.darkClass
{
    background-color: rgb(241, 241, 241);
    filter:alpha(opacity=50); /* IE */
    opacity: 0.5; /* Safari, Opera */
    -moz-opacity:0.50; /* FireFox */
    z-index: 200;
    height: 100%;
    width: 100%;
    background-repeat:no-repeat;
    background-position:center;

    display: block;
} 
```

JS代码：

```
if(flagButton==true) //toggle condition
{                          
    // this block shows the normal button    
    document.ChangePwdExpiredForm.submitHidden1.disabled=false;
    document.getElementById('changPwdsubmit').className='mask';
}
else
{                          
   // this block shows the greyedout 
   buttondocument.ChangePwdExpiredForm.submitHidden1.disabled=true;
   document.getElementById("changPwdsubmit").className="darkClass";
} 
```

HTML 代码：

```
<div class="button_login" id="button_login">
  <div class="mask" id="changPwdsubmit">
    <div class="imageButton2">
      <a href="javascript:submitMask1();" onclick="submitMask1();return false" class="loginButton2_right">
        <span >
          <bean:message key="button.transaction.continue"/>
        </span>
      </a>
    </div>
  </div>
</div> 
```

# ssas - SSAS：多个分区

> ID：13738553
> 
> 赞同：0
> 
> 时间：2012-12-06T07:02:41.630
> 
> 标签：ssas, bids

我有一种情况，我在不同年份的 SSAS BIDS 2008 中有 3 个分区。我需要知道当前上下文中正在使用哪个分区，为什么？如何手动更改？

比如我要分区：P2001、P2002和P2001-2002；用户查询 2002 年的销售额。在这种情况下，什么分区起作用，为什么只有那个分区？我该如何改变这一点。当用户查询 2002 年的销售时，我想使用 P2001（这在逻辑上没有意义，但会澄清我的疑问）

我希望我在阐述我的想法时有意义吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:15:51.183

首先，您的分区不应该有重叠的数据。它将读取重叠数据两次（或此数据所在的分区数）。您无法控制正在读取哪个分区，SSAS 知道每个键在哪个分区上，因此它只会在运行查询时读取该分区。

您可以使用 SQL Server Profiler 查看正在运行的查询以查看正在读取哪些分区，这是来自网络的示例：

![在此处输入图像描述](../Images/0bd79ef29d9f42da68c9fbf5a0b671c8.png)

为了能够在没有任何缓存数据的情况下进行查询（以确保查看正在读取哪些分区），您可以运行此 XMLA 来清除多维数据集的缓存，然后再次运行查询：

```
<Batch xmlns="http://schemas.microsoft.com/analysisservices/2003/engine">
   <ClearCache>
      <Object>
         <DatabaseID> database id </DatabaseID>
         <CubeID> cube id </CubeID>
      </Object>
   </ClearCache>
</Batch> 
```

# version-control - 在二进制文件中添加 RCS 标头

> ID：13738567
> 
> 赞同：2
> 
> 时间：2012-12-06T07:03:49.037
> 
> 标签：version-control, header, binaryfiles, rcs

我正在使用 RCS 源代码管理，需要签入二进制文件（gif 图像和 jar 文件）如何添加 $Header$ 关键字，以便在签入期间替换此文件中的版本信息并在我发布时显示“识别”命令。

对于 Java、XML 等文本文件，我们通常添加 RCS 标头注释和公共字符串，但不知道二进制文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:15:53.323

基本上，你没有。

二进制文件格式通常没有办法拥有可变长度的任意数据块。即使文件的某个区域可以包含任意数据，扩展的长度也可能因一次检出而异（例如，如果它从版本 1.9 变为 1.10），这很可能会弄乱文件。

为此，二进制格式必须能够容忍标题字符串大小的变化。例如，如果版本号从`1.9`变为`1.10`，RCS`co`命令（它不知道二进制文件格式）将就地替换字符串，改变字符串后面所有数据的偏移量。如果文件格式有注释部分，并且该部分的大小存储为数字，`co`则不会更新该数字。

编译器生成的对象和可执行文件通常包含 RCS 版本信息，但通常是从源文件生成的；对象和可执行文件本身通常不存储在版本控制系统中。

在初始签入二进制文件之前，您应该运行`rcs -i -kb filename`，以便 RCS`co`命令不会尝试进行关键字替换（以防文件碰巧*包含*看起来像 RCS 关键字的内容）。

如果您有一个已从 RCS 系统检出的二进制文件，并且您想知道它是哪个版本，则必须将它与 RCS 中的每个版本进行比较。（我自己的[`get-versions`](https://github.com/Keith-S-Thompson/get-versions)可能对此有用。）

如果您有一种在文件中存储文本元数据的方法，您还可以考虑使用时间戳注释您的二进制文件。然后，您可以通过查看 RCS 日志将时间戳与修订相关联。

您提到了 Excel 文件。我只是尝试了一些实验。新`.xlsx`格式实际上是一个 zip 文件；您放在评论部分的任何内容都将被压缩，并且对`ident`. 旧`.xls`格式，至少对于我尝试过的小文件，确实将注释部分存储在可读文本中，所以`ident`有效 - 但是当我签入文件时，RCS 将注释`"$Header:$"`从`"$Header: /home/kst/2012-12-06/RCS/foo.xls,v 1.1 2012-12-06 11:47:48-08 kst Exp kst $"`; 当我尝试用 Excel 打开它时，我得到了：

```
Excel found unreadable content in 'foo.xls'. 
```

并且无法恢复内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-14T14:01:41.103

一般来说你不能，但某些二进制文件有一个 ASCII 插槽来放置 RCS 标头。

例如 ZIP 文件

```
% zip -z archive.zip
 $Header$ 
```

然后，在 CVS 处理之后：

```
% unzip -l archive.zip 
$Header: /cygdrive/c/cvsroot/archive.zip,v 1.2 2020/10/14 13:46:06 omg Exp $ 
```

有很多扩展扩展实际上是一个 zip 文件，您可以在其中执行此操作：odt、pdf、... 但请**谨慎使用**并更喜欢短 RCS 标头，如版本或日期，因为 RCS 不知道插槽大小，并且可能损坏文件。

# android - android在旋转时显示加载图像

> ID：13738568
> 
> 赞同：1
> 
> 时间：2012-12-06T07:03:54.037
> 
> 标签：android, image, rotation, loading

我有一个Android apk，主要是一个访问html5 web 的webview。每次我旋转屏幕时，它都会在重新加载/重新渲染网页时显示一个空白屏幕。由于网页需要通过服务器获取数据，因此可能需要几秒钟的时间。

我只是想知道，是否有一种简单的方法可以在旋转时显示加载图像或徽标图像，而不是空白屏幕？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:10:23.110

您应该使用[WebView 规范](https://developer.android.com/reference/android/webkit/WebView.html)中描述的[WebViewClient](https://developer.android.com/reference/android/webkit/WebViewClient.html)回调以及显示[ProgressBar](http://developer.android.com/reference/android/widget/ProgressBar.html)类型

`style="@android:style/Widget.ProgressBar.Large"`例如。

您的活动应包括以下内容：

```
private void onCreate(Bundle savedInstanceState){

        webView = (WebView) findViewById(R.id.webView);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.setWebChromeClient(webChromeClient);

        spinner = (ProgressBar) findViewById(R.id.progress);
    }

    private WebChromeClient webChromeClient = new WebChromeClient() {
        public void onProgressChanged(WebView view, int progress)   
        {
            if(progress == 100)
                spinner.setVisibility(View.GONE);
          }
        }; 
```

并且应该在您的 xml 布局中定义一个进度条：

```
<ProgressBar
        android:id="@+id/progress"
        style="@android:style/Widget.ProgressBar.Large"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:indeterminate="true"
        android:visibility="visible" /> 
```

# ios - 使用 Nineveh gl frsmework 更改纹理

> ID：13738569
> 
> 赞同：1
> 
> 时间：2012-12-06T07:03:58.540
> 
> 标签：ios

如果我在前一个纹理仍在进行中时尝试更改另一个纹理，应用程序正在崩溃..

这是我的代码。

-(IBAction)changeTexture:(id)sender{

```
self.text = [arrayEyes objectAtIndex:[sender tag]];
NGLTexture *texture;
texture = [NGLTexture texture2DWithFile:self.text];

NGLMaterialMulti *material = (NGLMaterialMulti *)mesh.material;

[[material materialWithName:@"lambert16SG"] setDiffuseMap:texture];

mesh.material = material;
[mesh compileCoreMesh]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:22:36.520

我将假设这段代码在程序执行开始时就被命中了。因此，模型仍然在后台线程中加载。

因此，很可能 NGLTexture 正在分配给网格的材质，而它正在另一个线程中进行处理。您可能会遇到会引发异常或彻底崩溃的分配问题。尝试等待模型加载器完成处理，然后再对其进行分配。查找 NGLMeshDelegate 协议并尝试在您的 -meshLoadingDidFinish: 处理程序中进行分配。

# c++ - 可能的范围问题 C++

> ID：13738571
> 
> 赞同：0
> 
> 时间：2012-12-06T07:04:07.803
> 
> 标签：c++, oop, vector

```
#include<iostream>
#include<vector>
using namespace std;
class t{
    public:
        t();
        void updateSize();
        int getSize();
        void insert();
        int get(int a);
    private:
        int size;
        vector<int> v;

};

t::t(){
    size =0;
}
void t::updateSize(){
    size++;
}
int t::getSize(){
    return size;
}
int t::get(int a){
    return v[a];
}
 void t::insert(){
    v.push_back(size);

    ++size;
}

int main(){
   t xa;
   xa.insert();
   xa.insert();
   xa.insert();
       xa.insert();
   cout<<xa.get(3);//expect to output 3 but instead outputs 0

   return 0;
} 
```

这段代码应该在我每次调用 insert 时增加大小，并将具有该大小值的整数放入该大小的相同索引处的向量中。但由于某种原因，它没有将更新后的大小放入我的向量中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T07:07:01.077

您正在插入 3 个元素，但您正在阅读第 4 个元素（因为索引是基于 0 的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:15:27.003

您发布的程序将打印“3”。证明阅读您的代码。

# android - 数组索引越界异常android

> ID：13738572
> 
> 赞同：0
> 
> 时间：2012-12-06T07:04:10.653
> 
> 标签：android

我正在尝试通过 php 文件从数据库表中获取数据并将其显示在 android 中。在 php 文件中，我用“#”分隔每一列。所以现在我得到了像 4#2012-11-06#test1#test2 这样的值。但是对于某些列，没有数据。所以这些值就像 5### 一样。在这里，当我用 # 拆分并显示数据时，它会抛出越界异常。我该如何解决这个问题？

代码：

```
String st="1#2012-10-30#test1@2#2012-10-30#test2@3#2012-11-06#test3@9##test1@21##@22##@23##@";
    String[] val = st.trim().split("@");

for (int i = 0; i < val.length; i++)
        {
            String str = val[i];

            String arr[] = str.split("#");
                  System.out.println("arr0" + arr[0]);
            System.out.println("arr1" + arr[1]);
            System.out.println("arr2" + arr[2]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:14:34.147

尝试使用[Pattern.compile](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)来拆分您当前的字符串：

```
String your_string = "4#2012-11-06#test1#test2";
Pattern pattern = Pattern.compile("#");
String[] strarray =pattern.split(your_string); 
```

用于处理如果数组索引包含空字符串将您的代码更改为：

```
for (int i = 0; i < val.length; i++)
        {
    String your_string =val[i];
    Pattern pattern = Pattern.compile("#");
    String[] strarray =pattern.split(your_string);

     for(int j=0;j<strarray.length;j++){
       if(strarray[j].trim().length() >0){

        System.out.println("arr"+j+"::" + strarray[j]);
       }
      else{

       }
     }
} 
```

# php - jcrop 稍后缩放、旋转、裁剪和调整大小

> ID：13738576
> 
> 赞同：0
> 
> 时间：2012-12-06T07:04:21.510
> 
> 标签：php, javascript, jquery, jquery-ui-draggable, jcrop

[http://hollywoodlacewigs.netsmartz.us/](http://hollywoodlacewigs.netsmartz.us/) 我正在从事上述项目。用户上传图片表单“上传”按钮，然后“选择区域”，然后单击“混合”按钮。这会将裁剪区域显示到其他图像上。单击电子邮件链接将组成两个图像。

但在此之前，我想让用户在裁剪图像之前“旋转”、“放大/缩小”图像。

我正在使用 jcrop，jquery ui 可拖动

这是脚本：

```
$(document).ready(function() { 
    $('#UploadForm').change('submit', function(e) {
        e.preventDefault();
        $('#SubmitButton').attr('disabled', ''); // disable upload button
        $('#left-pic').hide();
        $('#output').show();
        //show uploading message
        $("#output").html('<img style="margin:45px 0px 0px 35px; " src="images/ajax-loader.gif" alt="Please Wait"/>');
        $(this).ajaxSubmit({
            target: '#output',
            success:  afterSuccess //call function after success
        });
    });

}); 

function afterSuccess(){ 
    $('#UploadForm').resetForm();  // reset form
    $('#SubmitButton').removeAttr('disabled'); //enable submit button
    $('#cropbox').Jcrop({       
        aspectRatio: 1,
        onSelect: updateCoords,
        bgOpacity: 0.5,
        bgColor: 'white',
        addClass: 'jcrop-dark',
        setSelect: [ 34, 50, 134, 155 ]
    });     
}

function updateCoords(c){
    $('#x').val(c.x);
    $('#y').val(c.y);
    $('#w').val(c.w);
    $('#h').val(c.h);
}

function checkCoords(){
    if (parseInt($('#w').val())) return true;
    alert('Please select a crop region then press submit.');
    return false;
}

$(function() {
    $('#draggable3').draggable({
        containment: $('#draggable3').parent(),
        cursor: "move", cursorAt: { top: 56, left: 56 },
         drag: function(event, ui) {
            // Show the current dragged position of image
            var currentPos = $(this).position();
            // $("#xpos").text("CURRENT: \nLeft: " + (currentPos.left-580) + "\nTop: " + (currentPos.top-82));
            $('#x3').val(currentPos.left-580);
            $('#y3').val(currentPos.top-82);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:50:29.370

你可以使用[http://www.cropzoom.com.ar/demo/](http://www.cropzoom.com.ar/demo/)，我用过并且喜欢它。在 IE 中存在一个错误 -[在 IE 8 中的大小更改（高度、宽度）时 VML 中的 Draggable 元素卡住](https://stackoverflow.com/questions/9422937) （我想在评论中添加答案，但没有权限）中描述了修复

# facebook - 使用 Facebook API 创建测试帐户返回电子邮件格式不正确的响应

> ID：13738577
> 
> 赞同：0
> 
> 时间：2012-12-06T07:04:22.880
> 
> 标签：facebook, facebook-graph-api

我在通过 API 创建新用户测试帐户时遇到了问题，响应中的电子邮件格式不正确。

这是我的回应：

{“id”：“xxxx”，“access_token”：“xxxx”，“login_url”：“xxxx”，“email”：“qapuvvl_schrockstein_1354772402\u0040tfbnw.net”，“密码”：“xxxx”}

因此它将“@”符号更改为反斜杠。

任何建议为什么会发生？

谢谢。阿列克谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:45:10.613

facebook 上测试用户的电子邮件 ID 属于域`tfbnw.net`，因此它不会将“@”更改为反斜杠，但返回的 JSON 包含“@”符号的 Unicode 形式。

[http://en.wikipedia.org/wiki/List_of_Unicode_characters](http://en.wikipedia.org/wiki/List_of_Unicode_characters)

您可以在反序列化 JSON 数组时将其更改回来。

# android - 当我再次按下活动时，如何解决一次又一次调用Web服务？

> ID：13738578
> 
> 赞同：0
> 
> 时间：2012-12-06T07:04:22.347
> 
> 标签：android, android-layout, android-emulator, android-widget, android-webview

在我的应用程序中，我首先显示家庭活动。在家庭活动中，我从 web 服务获取值并解析值并显示给用户。从家庭活动用户单击它将显示到文章显示活动。如果用户单击，则从 artcile 显示活动它将再次回家活动。它一次又一次地调用 Web 服务并解析它需要时间的值。

如何在第一次存储 web 服务解析的值并获取所有活动的值。而不是一次又一次地调用 web 服务，任何人都可以举个例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:06:05.307

当您第一次收到响应时，设置一个布尔值。并始终在调用 web 服务之前检查变量。

还将响应值存储在应用程序类变量或活动中的静态/非静态变量中。

```
boolean callWebService = true;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //your code here

    if(callWebService){
        //call webservice in background thread -> Async Task, Service, whatever
        callWebService = false;
    }else{
        //process stored response
    }

} 
```

还要记住，如果不处理配置更改将破坏活动并再次调用 onCreate。同时处理这些场景。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:17:23.920

您能否显示一小段代码，显示您调用服务的位置。

另请注意

服务中的`onCreate`方法只运行一次，直到服务的整个生命周期。但是，`onStartCommand`可以通过调用多次调用方法`startService`。如果您的服务被销毁然后再次运行，`onCreate`则会再次调用。

[这](http://developer.android.com/guide/components/services.html)就是本文档所说的：

```
onCreate() 
```

系统在首次创建服务时调用此方法，以执行一次性设置过程（在调用`onStartCommand()`或之前`onBind()`）。如果服务已在运行，则不调用此方法。

# c# - 当用户选择相同日期时要考虑哪个日历事件

> ID：13738579
> 
> 赞同：3
> 
> 时间：2012-12-06T07:04:27.120
> 
> 标签：c#, asp.net, calendar, selectionchanged

我正在使用链接按钮来切换日历`calendar.selection_changed`。我使用事件来获取日期并隐藏日历控件。但是如果用户尝试再次选择相同的日期，我应该考虑什么事件来获取日期并更改日历的可见性。

谢谢 PS：如果我使用`enable view state`属性，它适用于同一日期，但切换停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:37:18.480

您可以在 page_load中使用`Calendar.SelectedDates.Clear();`属性。编辑：我不知道它所需的事件......但这有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:44:54.140

仅当控件中的用户操作更改日期选择时才会引发该事件。例如，如果用户两次单击同一日期，则第二次单击不会引发事件。如果您以编程方式设置日期范围，也不会引发该事件。

# jira - 是否存在与 Splunk 的fogbugz 集成，类似于 Jira 集成？

> ID：13738581
> 
> 赞同：1
> 
> 时间：2012-12-06T07:04:46.807
> 
> 标签：jira, fogbugz, splunk

[在http://splunkbase.splunk.com/apps/All/3.x/Operations/Change_Management/app:Splunk+for+Jira](http://splunkbase.splunk.com/apps/All/3.x/Operations/Change_Management/app:Splunk+for+Jira)中提到了 Jira 集成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:18:15.390

我看到您可以通过 HTTP Post 向 Fogbugz 提交错误。

在 Splunk 中有一个称为[工作流操作](http://docs.splunk.com/Documentation/Splunk/latest/Knowledge/CreateworkflowactionsinSplunkWeb)的功能。

您可以使用它来[HTTP 将错误发布到 Fogbugz](http://docs.splunk.com/Documentation/Splunk/5.0.1/Knowledge/CreateworkflowactionsinSplunkWeb#Set_up_a_POST_workflow_action)以响应某些事件类型或某些字段的存在。

# ios - 需要有关“在 iphone5 上无法正常工作”的帮助

> ID：13738585
> 
> 赞同：0
> 
> 时间：2012-12-06T07:05:06.493
> 
> 标签：ios

昨天我尝试在 iphone 5 上测试我的应用程序，但我的应用程序底部没有响应。我搜索了这个问题 我找到了这些[解决方案](https://stackoverflow.com/questions/12414817/iphone-5-4-bottom-toolbar-not-responding)

将 window.xib 设置为“启动时全屏不起作用”我不知道为什么。

`self.view.frame = [UIScreen mainScreen].bounds;`这需要在每个视图上完成。

即使这对我不起作用`self.window.frame = [UIScreen mainScreen].bounds;`

我只需要一个全局解决方案，不想在我的应用程序的每个视图上都设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:21:09.993

不同`UIViewControllers`的可能需要不同的调整。`UIView`通常从XIB设置根上的 Auto-Sizing 以`UIViewController's`在高度上重新调整大小是可行的。但是你应该独立照顾每一个`UIView`......你可能正在做的一些动画可能依赖于 UIView 的总高度，所以你应该注意这一点。我使用这个宏来检查我使用的是哪种设备：

```
#define IS_IPHONE_5 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON ) 
```

它取自[这个](https://stackoverflow.com/questions/12446990/how-to-detect-iphone-5-widescreen-devices)，答案。

# c# - Datagridview 滚动事件处理程序

> ID：13738586
> 
> 赞同：0
> 
> 时间：2012-12-06T07:05:11.037
> 
> 标签：c#, winforms, datagridview

我想知道如何在`Datagridview`. 我有一张大约 20 列的非常大的桌子。它会适合屏幕。

因此，当我在水平方向滚动时，当特定列失去焦点时，我需要调用一些函数。

任何想法，如何实现它？

相似的东西 ：

```
 private void datagridview_Scroll(object sender, ScrollEventArgs e)
        {
            //If namecol go out of focus
             //foo();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:08:12.773

这是我所做的：

```
 private void datagridview_Scroll(object sender, ScrollEventArgs e)
        {
            if (e.ScrollOrientation == ScrollOrientation.HorizontalScroll)
            {

                if (e.NewValue > this.check1.Width/2 )
                   foo();
                else
                   hoo();
            }
        } 
```

谢谢

# c# - 如何在 C# 中使用 Outlook 互操作库发送传真？

> ID：13738588
> 
> 赞同：1
> 
> 时间：2012-12-06T07:05:37.510
> 
> 标签：c#, office-interop

我们正在尝试使用 c# 代码发送传真，我们希望通过 microsoft Outlook 互操作库来触发它。有使用 Outlook 的邮件代码，但我们正在寻找从 Outlook 库中触发传真的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:15:53.223

示例代码：

```
using FAXCOMLib;
using FAXCOMEXLib;

FaxServerClass fs = new FaxServerClass();
fs.Connect(“&lt;your_computer_name>”); //specifies the machinename
object obj = fs.CreateDocument(“&lt;your_filename>”);
FaxDoc fd = (FaxDoc)obj;
fd.FaxNumber = “&lt;your_fax_number_to_send_to”;
fd.RecipientName = “&lt;your_recipients_name”;
int i = fd.Send();
MessageBox.Show(i.ToString());
fs.Disconnect(); 
```

有关更多详细信息，请参见[此处](http://zakariarouf.wordpress.com/2008/11/09/sending-fax-using-c-and-net/)

# c# - 在 Asp.Net MVC 应用程序中启用/创建 SSO（单点登录）

> ID：13738589
> 
> 赞同：3
> 
> 时间：2012-12-06T07:05:38.750
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, authentication, single-sign-on

我想在我的应用程序上实施/启用 SSO（单点登录）`Asp.Net MVC`。

请考虑以下几点以获得您的建议：

*   我有 3 个`Asp.Net MVC`应用程序，我想为它们启用 SSO。

*   我知道我可以通过`ADFS`（活动目录联合服务）实现 SSO，**但我不想使用它**，因为我希望我的外部用户（最终用户）通过 SSO 登录我的所有 3 个应用程序。

*   （纠正我如果我在这里错了，因为据我所知，`ADFS`可以用于 Active Directory 用户（意思是公司范围的内部用户）而**不是**外部最终用户。如果我们可以`ADFS`用于外部用户，请告诉我我们应该如何实现它。

*   我也不想用`OpenID`。

*   我想为这 3 个应用程序构建自己的 SSO，并希望在它们之间启用 SSO。

*   我想为这 3 个应用程序构建可用于生产环境的 SSO。

考虑到以上几点，您能否就如何实现 SSO 给我您的建议？

提前致谢，欢迎提出所有建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:28:14.877

建议是使用 IdentityServer (http://thinktecture.github.com/Thinktecture.IdentityServer.v2/)，它是 ADFS 的替代品，它使用相同的身份验证协议 (WS-Federation)，但允许您插入自定义会员提供者。

此外，IdentityServer 还支持 ADFS 缺乏的一些功能，并且具有很强的可扩展性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:39:17.460

Are your applications in the same domain? If so, can you use [Forms Authentication Across Applications](http://msdn.microsoft.com/en-us/library/eb0zx8fc(v=vs.100).aspx)?

# sql - Oracle：使用嵌套查询与使用映射

> ID：13738594
> 
> 赞同：0
> 
> 时间：2012-12-06T07:06:33.663
> 
> 标签：sql, oracle

我不确定我是否正确命名了这个问题，但解释可能有助于向您解释我的问题。

我有一个主表，说 PROJ_MASTER 包含数百万条记录。它包含具有映射到其他表以获取这些代码详细信息的代码的列，例如 PROJ_SUB_1 和 PROJ_SUB_2。

在主表上编写查询的最佳方法是什么 1）映射列

```
 SELECT PM.SOME_COL_1,
       PM1.COL1,
       PM1.COL2
  FROM PROJ_MASTER PM, PROJ_SUB_1 PS1, PROJ_SUB_2 PS2
 WHERE PM1.COL1 = PS1.COL1
   AND PM1.COL2 = PS2.COL2 
```

2）或使用嵌套查询

```
 SELECT PM.SOME_COL_1,
       (SELECT DISTINCT PM1.COL1
         FROM PROJ_SUB_1 PS1
       WHERE PM.COL1 = PS1.COL1) AS COL1
       (SELECT DISTINCT PM1.COL2
         FROM PROJ_SUB_2 PS2
       WHERE PM.COL2 = PS2.COL2) AS COL2
  FROM PROJ_MASTER PM 
```

我在使用别名时犯了一些错误（PM1 和 PM2 而不是 PM）。

我正在显示查询计划第一个查询）

```
 SELECT STATEMENT, GOAL = ALL_ROWS   Cost=23827  Cardinality=1037978 Bytes=76810372
 HASH UNIQUE                Cost=23827  Cardinality=1037978 Bytes=76810372
  HASH JOIN             Cost=5638   Cardinality=1037978 Bytes=76810372
   TABLE ACCESS FULL    Object owner=USER   Object name=PROJ_MASTER 
                                    Cost=5  Cardinality=557         Bytes=17267
   HASH JOIN                Cost=5619   Cardinality=872654  Bytes=37524122
    TABLE ACCESS FULL   Object owner=USER   Object name=PROJ_SUB_1

                                    Cost=28 Cardinality=9827    Bytes=294810
    TABLE ACCESS FULL   Object owner=USER   Object name=PROJ_SUB_2

                                    Cost=5579   Cardinality=872654  Bytes=11344502 
```

第二次查询）

```
 SELECT STATEMENT, GOAL = ALL_ROWS     Cost=9810 Cardinality=872654  Bytes=11344502
 TABLE ACCESS FULL  Object owner=USER   Object name=PROJ_SUB_1

                      Cost=5    Cardinality=1           Bytes=31
 TABLE ACCESS FULL  Object owner=USER   Object name=PROJ_SUB_2

                      Cost=28   Cardinality=1           Bytes=30
 HASH UNIQUE                  Cost=9810 Cardinality=872654  Bytes=11344502
  TABLE ACCESS FULL Object owner=USER   Object name=PROJ_MASTER 
                      Cost=5579 Cardinality=872654  Bytes=11344502 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:16:16.093

第一种方法是最好的，原因有很多。它更易于阅读和理解。根据功能和性能，第一个也更好。在大量数据中，您可以填补差异。这是我的经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:00:41.253

像 Oracle 这样的数据库就是为了加入而诞生的。你的第一个查询是做你想做的事情的“正常”方式，而且会很快。

说了这么多，有几点：

[大多数人更喜欢 ANSI 连接语法](http://www.orafaq.com/node/2618)，因此这将更容易阅读：

```
SELECT PM.SOME_COL_1,
       COL1,
       COL2
  FROM PROJ_MASTER PM 
       JOIN PROJ_SUB_1 USING (COL1) 
       JOIN PROJ_SUB_2 USING (COL2) 
```

当然，您可能会包含来自`PROJ_SUB_1`和的一些列`PROJ_SUB_2`。

第二个查询同样可能应该从`SUB`表中选择一些东西，否则这将毫无意义，但我假设这是一个错字。在这种情况下，功能上的区别在于：

*   如果有多个匹配行，查询将失败（但从问题来看，假设表之间存在 FK 关系似乎很自然）
*   这个查询通常比第一个查询更冗长、更慢、可读性更差，但它有一个特殊的属性：你可以一眼看出，如果查询成功，每行将返回一行，而无需*知道*`PROJ_SUB_2`查找键和关系。

最后，`DISTINCT`如果确实存在强制执行的 FK/PK 关系，则 是多余的。

# java - Apache POI 退出而不抛出异常

> ID：13738601
> 
> 赞同：0
> 
> 时间：2012-12-06T07:07:01.783
> 
> 标签：java, apache, apache-poi

首先，下面的代码已经运行了一段时间没有问题。我从一位同事那里收到了 excel 文件，我用这个程序阅读并上传了这些文件。最近同事换了，收到别人发的文件。我会和他核实一下他对 excel 文件做了什么。

无论如何，我从新同事那里收到的第一个 excel 文件让我很沮丧。下面的代码在`WorkbookFactory.create(fis)`调用时退出。没有抛出异常，程序直接进入`finally`子句......

```
try {
        fis = new FileInputStream(f);            

        Workbook wb = WorkbookFactory.create(fis);

        Sheet ws = wb.getSheetAt(0);
        if (ws == null) {
            throw new ParseException("No sheet found on index 0", 1);
        }

        Iterator rowIt = ws.rowIterator();

        while (rowIt.hasNext()) {
            Row row = (Row) rowIt.next();
            if (row.getRowNum() != 0 && isArticleRow(row)) {
                Article article = parseArticleData(row);

                if (article != null) {
                    priceList.getArticles().add(article);
                }
            }
        }

        String vendorNumber = getVendorNumber(priceList);
        priceList.setVendorNumber(vendorNumber);

        priceList.setReadCorrectly(true);
        System.out.println("DONE");

    } catch (Exception e) {
        System.out.println(e.getMessage());

        _log.error(e.getMessage());
        if (priceList != null) {
            priceList.setReadCorrectly(false);
        }

    } finally {
        if (fis != null) {
            fis.close();
        }
        return priceList;
    } 
```

我尝试调试，但我遇到了相同的行为，并且没有抛出异常，我不确定如何继续。

提前感谢您的反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:14:15.177

捕获 Throwable 并查看而不是异常。它应该工作。

```
} catch (Throwable e) {
    System.out.println(e.getMessage());

    _log.error(e.getMessage());
    if (priceList != null) {
        priceList.setReadCorrectly(false);
    }

} 
```

# wpf - MvvmLight 良好实践：通过 ViewModel 显示表单

> ID：13738603
> 
> 赞同：2
> 
> 时间：2012-12-06T07:07:06.427
> 
> 标签：wpf, mvvm, mvvm-light

我是 WPF、MVVM 的新手。现在，我一直在研究 MVVM Light。我有些困惑。我感谢你们所有人的帮助。提前感谢您查看这篇文章。

1.  我们可以绝对删除 View 后面的代码吗（例如：在 .xaml 中的某处调用 InitializeComponent() --> 在某些简单情况下不再需要 view.xaml.cs）。

2.  我有很多观点洞察我的项目，需要多少定位器？我打算为每个视图制作单独的定位器。而且我想知道如果我在 app.xml 中注册所有定位器，是否所有视图都在用户运行应用程序后立即初始化和注册？如果是，是否不利于性能？

3.  主要问题：我有一个场景：我有很多形式：例如：

    1.  MainForm：这是应用程序调用的第一个表单。
    2.  ImportForm：当用户单击 Import（来自 MainForm）时调用

假设：我确实完成了与绑定相关的所有内容（例如按钮 Import --> RelayCommand(OnImport)） 实现此场景的最佳实践是什么？1\. 只需执行初始化并显示 ImportForm 如下所示：

```
public void OnImport()
{
   ImportForm importForm = new ImportForm();
   importForm.ShowDialog();
} 
```

这很简单，但我想知道这种方式是否遵循 MVVM 的范式？

1.  所以，我做了一些研究并做了另一种方式，比如：

    public void OnImport() { //// 只发送消息 Messenger.Default.Send(new NotificationMessage(this, "OnImport")); }

在代码后面：MainForm.xaml.cs

```
public MainForm()
    {
        InitializeComponent();
        Messenger.Default.Register<NotificationMessage>(this, (nm) =>
        {
           if (nm.Sender == this.DataContext)
           {    
                if (nm.Notification == "OnImport")
                {  
                    ImportForm importForm = new ImportForm();
                    importForm.ShowDialog();
                }
           }
        });
    } 
```

这样，我必须在后面的代码里面写一些代码 --> 有问题吗？

上述两种解决方案都可以正确完成上述场景，但我混淆了哪个更好，或者那里有任何真正正确的解决方案？

再次感谢您对长问题的耐心等待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:41:34.193

1.  你不能。`InitializeComponent()`在屏幕上绘制 UI。MVVM 的目的是将与 View 无关的逻辑分离并存储在 ViewModel 中。它不倾向于或旨在删除代码隐藏。
2.  这取决于你。您可以为所有 ViewModel 创建一个 Locator，或者为每个 ViewModel 创建一个 Locator。无论如何，我发现 Locator 不能很好地扩展并且难以在更大的项目中管理。它在 View、Locators 和 ViewModel 之间创建依赖关系。我个人更喜欢使用 DI 框架而不是 Locator，即使它是一个小项目。
3.  你可以两者都做，取决于你的要求。**(a)**如果单击主窗体上的按钮仅显示一个对话框，那么我将使用`Click`事件，因为它与视图相关。它与任何逻辑无关，因此将其保留在后面的代码中对我来说是最好的解决方案。**(b)**顺便说一句，如果单击按钮执行某些操作，例如，连接到数据库，则如果条件为真则显示对话框。在这种情况下，我会使用 Messenger 将 View 和 ViewModel 分开。

# utf-8 - 如何将字符串保存到 UTF-8 ini 文件

> ID：13738604
> 
> 赞同：1
> 
> 时间：2012-12-06T07:07:07.533
> 
> 标签：utf-8, save, inno-setup, ini, unicode-string

我正在尝试将字符串保存到一个 UTF-8 格式的 ini 文件中。我想编辑其中一个字符串值，但我不能。

有人可以提供一个例子来帮助吗？

```
 Source: test.ini; DestDir: {app}; 

[INI]
Filename: {app}\test.ini; Section: testclient; Key: PlayerName; String: "{code:GetUserName}";

procedure InitializeWizard();
var
NameEdit: TNewEdit;

function GetUserName(Param: String): string;
begin
result := NameEdit.Text;
end;

procedure InitializeWizard0();

begin

  PlayerSettingsPage := CreateCustomPage(wpSelectComponents, 'Test', '');
  NameEdit := TNewEdit.Create(WizardForm);
  NameEdit.Parent := PlayerSettingsPage.Surface;
  NameEdit.Left := 25;
  NameEdit.Top := NameLabel.Top + 43;
  NameEdit.Width := 130;
  NameEdit.Text :='Enter your Pla';
end; 
```

必须将 ini 保存为 UTF-8，因为我使用的软件只接受 UTF-8 格式的 ini 文件。

如果要编辑的ini是ansi格式，将无法正确保存unicode字体，只会显示：?????，如果ini是unicode [UTF-16LE]，则ini显示unicode字符正确，但是当游戏加载时它不会显示它们。

然后，如果要编辑的ini是UTF-8格式，则inno设置不会正确地将文本保存在其中。然后我在互联网上看到，inno setup 有一个特殊的代码可以做到这一点，但我不知道如何很好地使用它。

```
SaveStringsToUTF8File 
```

我正在使用 Inno Setup Unicode。

# design-patterns - 存储库模式：在哪里放置涉及多个实体的功能？

> ID：13738605
> 
> 赞同：0
> 
> 时间：2012-12-06T07:07:08.710
> 
> 标签：design-patterns, repository-pattern

我正在使用存储库模式，并且已经使用了很长时间，但是有一件事我从来没有真正找到一个好的解决方案。我经常需要访问与多个实体相关的数据，而且我找不到什么感觉像是放置该功能的好解决方案。几个案例：

假设系统中有拥有任务的用户：

*   我需要检索每个用户的最新任务列表作为用户到任务的配对，例如`Dictionary<int, int> GetUsersRecentTask()`
*   我需要生成该月所有用户及其任务的报告。
*   我需要生成系统中所有对象的统计信息。

现在通常我会把它放在说用户存储库中，但*感觉不对*。

我也尝试将它放在更高级别的服务中，但*将数据访问放在那里感觉不对*。

所以我最好把它放在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:16:54.457

不要将存储库模式视为教条。这只是一个概念。因此，UsersRepository 具有 GetUsersRecentTask，而您有不同的存储库，例如：带有 GetUsersReport（包括任务）的 ReportsRepository 和带有 Get[Object]Stats 的 StatisticsRepository。

虽然存储库模式最初只处理业务对象，但如果您需要“较小”的对象（例如视图模型或只是数据结构（无行为）的报告数据），它仍然是一个很好的模式。因此，向 ReportsRepository 请求某个报告是有意义的。

您唯一需要注意的是，一些存储库处理业务对象，而其他存储库处理 DTO。

# c# - MSDN WCF 服务示例不起作用

> ID：13738608
> 
> 赞同：2
> 
> 时间：2012-12-06T07:07:17.220
> 
> 标签：c#, wcf, windows-services, nettcpbinding

这个问题是我之前的一个后续问题，我发现它在我的计算机上不能 100% 工作：[WCF 服务未在非开发机器上运行](https://stackoverflow.com/questions/13678004/wcf-service-not-running-on-non-dev-machine)

我正在研究这个例子：

[http://msdn.microsoft.com/en-us/library/ff649818.aspx](http://msdn.microsoft.com/en-us/library/ff649818.aspx)

事实证明，InstallUtil 步骤在这里并没有真正起作用。我发现如果 VS2010 打开了项目，并且您像教程的第 8 步那样添加服务引用，VS2010 实际上会启动服务主机，因此会创建一个引用。

这是我到目前为止的调试方式：

*   按照InstallUtil安装服务，关闭VS2010解决方案；然后打开一个完全不同的解决方案（TESTWCF）尝试添加服务引用，但失败 - 在指定地址找不到

*   再次打开 WCFServiceLibrary1 项目作为 VS2010 的单独实例。尝试添加对 TESTWCF 的服务引用，但它失败了。

*   在 WCFServiceLibrary1 中，尝试第 8 步 - 添加服务引用。这会导致服务主机启动并找到服务。

*   在服务主机仍在运行的情况下，在 TESTWCF 中我尝试添加服务并且它可以工作。

*   关闭服务主机并尝试在 TESTWCF 中添加引用，它再次不起作用。

这一切似乎完全独立于由 InstallUtil 安装的运行或不运行的服务。

我还通过从头开始创建新的虚拟服务器并逐个加载内容来验证这一点。并且只有在安装 VS2010 时它才开始工作 - 当我在上面观察到时。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:37:18.677

> WCF 服务可以在应用程序（例如控制台或 Windows 窗体应用程序）中自托管

我认为您过于复杂了，您甚至不必使用 InstallUtil 安装它。InstallUtil 安装它以作为 Windows 服务运行，您可以制作将作为 WCF 服务的控制台应用程序。

您必须导入：

```
System.ServiceModel
System.ServiceModel.Web
System.Web.Services 
```

我认为如果您想将其用作带有 get 和 post 的 Web 服务，则需要那些具有 Web 的功能。

然后您需要为客户端和服务器指定合同。

```
[ServiceContract(Name = "SomeService", Namespace = "http://some.domain.com/some/someservice",SessionMode=SessionMode.Required)]
    public interface ISomeService
    {
        [OperationContract]
        string Execute(string expression);
    } 
```

你有合同，现在你必须在服务中实施它。没有什么特别的，只是使用这个界面。

非常重要的是 app.config，您必须为客户端和服务指定它。在配置中，您拥有所有指向服务的东西。

在客户端中，您必须添加服务作为参考，它应该像第 8 点一样找到它，但前提是您的配置正常！

在客户端中，只需在代码中执行以下操作：

```
 using (ChannelFactory<ISomeService> channel = new ChannelFactory<ISomeService>("SomeService"))
            {
                ISomeService svc = channel.CreateChannel();
                svc.Execute("my expression to evaluate by the service");
             } 
```

尝试在没有 InstallUtil 的情况下使其成为最简单的方法，它不必是 Windows 服务来通过网络提供服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:02:46.460

成功 ！经过 4 天的努力，MSDN 教程有一个致命的缺陷。

在本教程的第一步中，您将创建一个 wcf 服务库，默认情况下它将服务命名为 Service1。在本教程的步骤 2.6 中，您被要求指定基地址：

```
net.tcp://localhost:8523/Service1 
```

第 3 步要求您创建一个新的 Windows 服务，默认情况下这也称为 Service1。

在步骤 5.2 中，您被要求引用 System.ServiceModel 和 WcfServiceLibrary1。

在步骤 5.6 中，您替换 Onstart 方法来启动服务，步骤 8 显示最终代码为：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Diagnostics;
using System.Linq;
using System.ServiceProcess;
using System.Text;
using System.ServiceModel;
using WcfServiceLibrary1;

namespace WindowsService1
{
public partial class Service1: ServiceBase
{
    internal static ServiceHost myServiceHost = null; 

    public WCFServiceHost1()
    {
        InitializeComponent();
    }
    protected override void OnStart(string[] args)
    {
        if (myServiceHost != null)
        {
            myServiceHost.Close();
        }
        myServiceHost = new ServiceHost(typeof(Service1));
        myServiceHost.Open();
    }
    protected override void OnStop()
    {
        if (myServiceHost != null)
        {
            myServiceHost.Close();
            myServiceHost = null;
        }
    }
}
} 
```

错误的关键代码行是：

```
 myServiceHost = new ServiceHost(typeof(Service1)); 
```

好吧，它在 VS2008 或 2005 中的行为可能有所不同，或者它可能是 VS2010 中的配置，但是，我的 VS2010 将 Service1 解释为包含类的，即：

```
WindowsService1.Service1 
```

而实际上应该是：

```
WcfServiceLibrary1.Service1 
```

我在 4 天前注意到了这一点，但我认为我对 WCF 的了解不够，而且不知何故我错了——尤其是当它似乎工作时，因为 VS2010 自己启动了它。

# jasperserver - jasper 服务器有条件地强制输入控件

> ID：13738613
> 
> 赞同：0
> 
> 时间：2012-12-06T07:07:54.877
> 
> 标签：jasperserver

我的问题与 jasper server 3.71 有关

我怎样才能有条件地强制输入控件。我希望强制用户从一个或另一个查询中进行选择。就我而言，他们必须从部门列表或客户列表中进行选择。

感谢

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:59:43.800

这不是直接支持的，但是您可以使用定义第三个参数的场景，该参数检查是否设置了一个或另一个参数。如果配置无效，您会在报告中显示错误消息而不是数据。

参数：

*   **parameter1**，类型：字符串，默认值：无 - 部署为输入控件
*   **parameter2**，类型：字符串，默认值：无 - 部署为输入控件
*   **验证**，类型：布尔值，默认值：`$P{parameter1} != null || $P{parameter2} != null`-未部署为输入控件

波段/场配置：

*   作为您添加的详细信息带的 printWhen 表达式，这意味着只有在*验证*参数`$P{verification}`的默认表达式为 时才会显示它。*`true`*
**   在例如标题带中定义一个文本字段，给出需要填写*参数*1和*参数*2 之一的错误消息。*

# c# - 铸造/拆箱泛型类型

> ID：13738616
> 
> 赞同：1
> 
> 时间：2012-12-06T07:08:10.307
> 
> 标签：c#

再会，

我有一个类用于存储类型 T 的值，直到运行时我才知道该类型是什么。我想取消装箱/强制转换，不确定正确的术语是什么，将特定类型（在本例中为可为空的小数）返回类型对象。

请原谅我的代码布局：

类片段：

```
public abstract class Types
    {
        public class ValueField<T>
        {
            [XmlAttribute]
            public int TemplateID { get; set; }

            [XmlAttribute]
            public int FieldID { get; set; }

            [XmlIgnore]
            [ScriptIgnore]
            public TemplateApprovalField Field { get; set; }

            [XmlIgnore]
            [ScriptIgnore]
            public InstanceTemplateActivityValues Values { get; set; }

            [XmlAttribute]
            public T Value { get; set; }
        }
    } 
```

函数片段：

我被困在“values.Add((Types.ValueField)field);”这一行，不知道如何转换它。在那一刻，var 字段是一个 Types.ValueField。

```
 Values = new Func<XmlDocument, List<Types.ValueField<object>>>(xml =>
 {
  List<Types.ValueField<object>> values = new List<Types.ValueField<object>>();

if (xml != null)
{
  foreach (XmlNode node in xml.SelectNodes("//Field"))
  {

    if (node.Attributes["Type"].Value == "Numeric")
      {
        var field = new Types.ValueField<decimal?>()
        {
          Field = ApprovalFields.Find(f => f.FieldID == int.Parse(node.Attributes["ID"].Value)),
          FieldID = int.Parse(node.Attributes["ID"].Value),
          TemplateID = int.Parse(node.SelectSingleNode("../@ID").Value)
        };
        field.Value = new Func<string, decimal?>(val =>
          {
            if (string.IsNullOrEmpty(val))
              return null;
            else
            {
              decimal parsed = 0;
              if (decimal.TryParse(val, out parsed))
                return parsed;
            }
            return null;
        })(node.InnerText);

      values.Add((Types.ValueField<object>)field); //This is where my problem occurs...
   }
 }

}
   return values;
   })(row["Form_Values"] != DBNull.Value ? 
      new XmlDocument() { InnerXml =  row["Form_Values"].ToString() } : null) 
```

任何输入将不胜感激。

问候 YP

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T07:12:32.333

您正在创建一个`ValueField<decimal?>`. 那*不是*`ValueField<object>`- 你的课程`ValueField<T>`不是协变的`T`，也不可能是。（类不能是协变的，并且您的 API`T`也包含在“in”位置。）

为了证明为什么这*不能*工作：

```
 Value<decimal?> foo = new Value<decimal?>();
 Value<object> bar = foo; // Imagine this worked
 bar.Value = "hello";
 decimal? x = foo.Value; 
```

你希望它做什么？第二行以外的一切都无可非议，所以我们*必须*让第二行失败，它确实做到了。

这里的简单答案是首先创建 a `Value<object>`，而不是 a `Value<decimal?>`。

# c++ - 如何使用 QProcess 通过 Ping 检测“网络不可达”？

> ID：13738620
> 
> 赞同：0
> 
> 时间：2012-12-06T07:08:45.767
> 
> 标签：c++, c, linux, qt

我在使用 QProcess ping 到目标/本地 IP 时遇到问题。当 ping 成功时，QProcess 返回“0”，而当 ping 给出“网络无法访问”错误时（在终端上手动查看）。

实际上我需要检查我的应用程序中的网络连接。为了实现它，我使用了一个非常简单的使用 QProcess 的 ping 概念。如果有任何网络错误，我需要弹出一个消息框，否则应用程序正常启动而没有任何弹出消息。

这是我的 ping 代码：

```
 bool App::pingPcuStatus(void)
   {
     const QString IP ="192.168.49.44";
     bool ret = false;
     int status;

     if ( IP == "0.0.0.0") {
        status = 1;
     }
    else {
            QProcess pingProcess;
            QString exec = "ping";
            QStringList params;
            params << "-c" << "1" << IP;
            status = pingProcess.execute(exec, params); //status = 0 , if Ping Successfull
            pingProcess.close();
     }

    ret = (status) ? false : true;
    return ret;
    } 
```

但是在调试时我发现，即使我没有连接到网络，它也会返回“true”。（我尝试在终端上使用相同的命令手动 ping，它给出“网络无法访问”错误）。

在我的情况下，这导致了一个大错误。

使用 QProcess 或任何其他解决方法来捕获此错误的最佳方法是什么？？？

欢迎任何想法或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:19:56.823

[来自https://stackoverflow.com/a/2148360/793796](https://stackoverflow.com/a/2148360/793796)的原始答案：

```
QProcess pingProcess;
QString exec = "ping";
QStringList params;
params << "-c" << "1" << IP;
pingProcess.start(exec,params,QIODevice::ReadOnly);
pingProcess.waitForFinished(-1);

QString p_stdout = pingProcess.readAllStandardOutput();
QString p_stderr = pingProcess.readAllStandardError(); 
```

然后你可以解析标准输出和标准错误。

# java - 在xml中定义Spring @PropertySource 并在Environment中使用

> ID：13738623
> 
> 赞同：19
> 
> 时间：2012-12-06T07:08:48.793
> 
> 标签：java, spring, properties, spring-environment

在 Spring JavaConfig 中，我可以定义属性源并注入 Environment

```
@PropertySource("classpath:application.properties")

@Inject private Environment environment; 
```

如果在 xml 中，我该怎么做？我正在使用 context:property-placeholder，并在 JavaConfig 类 @ImportResource 上导入 xml。但我无法使用 environment.getProperty("xx") 检索属性文件中定义的属性

```
<context:property-placeholder location="classpath:application.properties" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T16:03:31.413

AFAIK，纯 XML 无法做到这一点。不管怎样，这是我今天早上做的一个小代码：

一、测试：

```
public class EnvironmentTests {

    @Test
    public void addPropertiesToEnvironmentTest() {

        ApplicationContext context = new ClassPathXmlApplicationContext(
                "testContext.xml");

        Environment environment = context.getEnvironment();

        String world = environment.getProperty("hello");

        assertNotNull(world);

        assertEquals("world", world);

        System.out.println("Hello " + world);

    }

} 
```

然后上课：

```
public class PropertySourcesAdderBean implements InitializingBean,
        ApplicationContextAware {

    private Properties properties;

    private ApplicationContext applicationContext;

    public PropertySourcesAdderBean() {

    }

    public void afterPropertiesSet() throws Exception {

    PropertiesPropertySource propertySource = new PropertiesPropertySource(
            "helloWorldProps", this.properties);

    ConfigurableEnvironment environment = (ConfigurableEnvironment) this.applicationContext
            .getEnvironment();

    environment.getPropertySources().addFirst(propertySource);

    }

    public Properties getProperties() {
        return properties;
    }

    public void setProperties(Properties properties) {
        this.properties = properties;
    }

    public void setApplicationContext(ApplicationContext applicationContext)
            throws BeansException {

        this.applicationContext = applicationContext;

    }

} 
```

和 testContext.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans ...>

    <util:properties id="props" location="classpath:props.properties" />

    <bean id="propertySources" class="org.mael.stackoverflow.testing.PropertySourcesAdderBean">
        <property name="properties" ref="props" />
    </bean>

</beans> 
```

和 props.properties 文件：

```
hello=world 
```

这很简单，只需使用一个`ApplicationContextAware`bean 并`ConfigurableEnvironment`从`(Web)ApplicationContext`. 然后只需添加`PropertiesPropertySource`一个`MutablePropertySources`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-11-13T23:17:32.393

如果您只需要访问文件“application.properties”的属性“xx”，则无需 Java 代码即可通过在 xml 文件中声明以下 bean 来实现：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="application.properties"/>
</bean> 
```

然后，如果您想在 bean 中注入该属性，只需将其作为变量引用：

```
<bean id="myBean" class="foo.bar.MyClass">
        <property name="myProperty" value="${xx}"/>
</bean> 
```

# java - JFileChooser - 自定义文件名（创建新文件）

> ID：13738625
> 
> 赞同：4
> 
> 时间：2012-12-06T07:08:51.953
> 
> 标签：java, swing, file-io, save, jfilechooser

我可能在`JFileChooser`API 中遗漏了一些明显的东西，但是当我尝试使用 a`JFileChooser`来保存文件时，我只能选择要保存到的预先存在的文件，而不能输入新名称并保存到该文件。这是否可能使用`JFileChooser`或者我应该使用不同的 API？

我有这段代码可以尝试做我正在尝试的事情：

```
public static File getUserFile() {      
    final SaveFileChooser fc = new SaveFileChooser();

    fc.setAcceptAllFileFilterUsed(false);

    for(FileFilter ch : FileFilterUtils.getAllFilters()) {
        fc.addChoosableFileFilter(ch);
    }       

    int option = fc.showSaveDialog(JPad.getFrame());

    if (option == JFileChooser.APPROVE_OPTION) {
        return fc.getSelectedFile();
    } 
    return null;
}

public static class SaveFileChooser extends JFileChooser {
    private static final long serialVersionUID = -8175471295012368922L;

    @Override
    public void approveSelection() {
        File f = getSelectedFile();
        if(f.exists() && getDialogType() == SAVE_DIALOG){
            int result = JOptionPane.showConfirmDialog(JPad.getFrame(), "The file exists, overwrite?", "Existing file", JOptionPane.YES_NO_CANCEL_OPTION);

            switch(result){
            case JOptionPane.YES_OPTION:
                super.approveSelection();
                return;
            case JOptionPane.NO_OPTION:
                return;
            case JOptionPane.CLOSED_OPTION:
                return;
            case JOptionPane.CANCEL_OPTION:
                cancelSelection();
                return;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T07:30:08.773

检查您的`if`状况：

```
if(f.exists() && getDialogType() == SAVE_DIALOG) 
```

如果`f`不存在会发生什么（这是您希望成为可能的）？

你可以试试：

```
if(getDialogType() == SAVE_DIALOG) {
    if(f.exists()) {
        // your overwrite checking
    } else {
        super.approveSelection();
        return;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:22:55.070

试试这个

```
 File file = null;
    String path = "";
    JFileChooser chooser = new JFileChooser();
    chooser.addChoosableFileFilter(new ImageFileFilter());
    int returnVal = chooser.showOpenDialog(null);

    if (returnVal == JFileChooser.APPROVE_OPTION) {
        file = chooser.getSelectedFile();
        path = file.getPath();

        repaint();

    }

}                                        

class ImageFileFilter extends FileFilter {

    public boolean accept(File file) {
        if (file.isDirectory()) {
            return false; //or ur code what file u want to return
        }} 
```

# php - 为网络爬虫优化 PHP CURL

> ID：13738629
> 
> 赞同：0
> 
> 时间：2012-12-06T07:09:15.503
> 
> 标签：php, linux, curl, curl-multi

我正在尝试使用 curl 编写基于 PHP 的爬虫。我有 20,000-30,000 个我必须抓取的 URL 的数据库。每次调用 curl 来获取网页大约需要 4-5 秒。

如何优化这一点并减少获取页面所需的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:15:14.440

你可以使用`curl_multi_*`它。您附加到一个多句柄的 curl 资源数量就是它将执行的并行请求数量。我通常从 20-30 个线程开始，具体取决于返回内容的大小（确保您的脚本不会因内存限制而终止）。

请注意，只要运行*最慢*的请求，它就会运行。因此，如果请求超时，您可能会等待很长时间。为避免这种情况，最好将超时设置为某个可接受的值。

[您可以在此处](https://stackoverflow.com/questions/13738836/uploading-multiple-files-using-php-via-curl?answertab=oldest#tab-top)的另一个线程中查看我的回答中的代码示例。

# android - 具有相等行高的表格布局

> ID：13738630
> 
> 赞同：17
> 
> 时间：2012-12-06T07:09:23.297
> 
> 标签：android

我创建了一个 TableLayout，我希望每一行都具有相同的高度，而不管它的内容如何。 **我怎样才能做到这一点？**

这是我的代码。每个行元素的宽度相同，但高度不相等。我究竟做错了什么？

```
 <TableLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"                    android:background="@color/grey"
                android:padding="1dip" >

                <TableRow
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:background="@color/grey" >

                    <LinearLayout
                        android:layout_width="0dip"
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:background="@color/white"
                        android:orientation="vertical" >

                        <TextView
                            android:layout_width="fill_parent"
                            android:layout_height="fill_parent"
                            android:layout_gravity="center_vertical"
                            android:layout_marginBottom="5dip"
                            android:layout_marginTop="2dip"
                            android:layout_weight="1"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_make"
                            android:textStyle="bold" />

                        <TextView
                            android:id="@+id/carMake"
                            android:layout_width="fill_parent"
                            android:layout_height="fill_parent"
                            android:layout_gravity="center_vertical"
                            android:layout_marginLeft="1dip"
                            android:layout_weight="1"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_detail" />
                    </LinearLayout>

                    <LinearLayout
                        android:layout_width="0dip"
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:background="@color/white"
                        android:orientation="vertical" >

                        <TextView
                            android:layout_width="fill_parent"
                            android:layout_height="fill_parent"
                            android:layout_gravity="center_vertical"
                            android:layout_marginBottom="5dip"
                            android:layout_marginTop="2dip"
                            android:layout_weight="1"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_model"
                            android:textStyle="bold" />

                        <TextView
                            android:id="@+id/carModel"
                            android:layout_width="fill_parent"
                            android:layout_height="fill_parent"
                            android:layout_gravity="center_vertical"
                            android:layout_weight="1"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_detail" />
                    </LinearLayout>

                    <LinearLayout
                        android:layout_width="0dip"
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:background="@color/white"
                        android:orientation="vertical" >

                        <TextView
                            android:layout_width="fill_parent"
                            android:layout_height="fill_parent"
                            android:layout_gravity="center_vertical"
                            android:layout_marginBottom="5dip"
                            android:layout_marginTop="2dip"
                            android:layout_weight="1"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_version"
                            android:textStyle="bold" />

                        <TextView
                            android:id="@+id/carYear"
                            android:layout_width="fill_parent"
                            android:layout_height="fill_parent"
                            android:layout_gravity="center_vertical"
                            android:layout_weight="1"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_year" />
                    </LinearLayout>
                </TableRow>

                <TableRow
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_marginTop="1dip"
                    android:layout_weight="1"
                    android:background="@color/grey" >

                    <LinearLayout
                        android:layout_width="0dip"
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:background="@color/white"
                        android:orientation="vertical" >

                        <TextView
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_vertical"
                            android:layout_marginBottom="5dip"
                            android:layout_marginTop="2dip"
                            android:background="@color/white"
                                android:gravity="center_horizontal"
                            android:text="@string/car_year"
                            android:textStyle="bold" />

                        <TextView
                            android:id="@+id/carYear"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_vertical"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_year" />
                    </LinearLayout>

                    <LinearLayout
                        android:layout_width="0dip"
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:background="@color/white"
                        android:orientation="vertical" >

                        <TextView
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_vertical"
                            android:layout_marginBottom="5dip"
                            android:layout_marginTop="2dip"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_mileage"
                            android:textStyle="bold" />

                        <TextView
                            android:id="@+id/carYear"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_vertical"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_year" />
                    </LinearLayout>

                    <LinearLayout
                        android:layout_width="0dip"
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:background="@color/white"
                        android:orientation="vertical" >

                        <TextView
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_vertical"
                            android:layout_marginBottom="5dip"
                            android:layout_marginTop="2dip"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_engine_capacity"
                            android:textStyle="bold" />

                        <TextView
                            android:id="@+id/carYear"
                            android:layout_width="fill_parent"
                            android:layout_height="fill_parent"
                            android:layout_gravity="center_vertical"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_year" />
                    </LinearLayout>
                </TableRow>

                <TableRow
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_marginTop="1dip"
                    android:layout_weight="1"
                    android:background="@color/grey" >

                    <LinearLayout
                        android:layout_width="0dip"
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:background="@color/white"
                        android:orientation="vertical" >

                        <TextView
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_vertical"
                            android:layout_marginBottom="5dip"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_engine_type"
                            android:textStyle="bold" />

                        <TextView
                            android:id="@+id/carYear"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_vertical"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_year" />
                    </LinearLayout>

                    <LinearLayout
                        android:layout_width="0dip"
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:background="@color/white"
                        android:orientation="vertical" >

                        <TextView
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_vertical"
                            android:layout_marginBottom="5dip"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_exterior_color"
                            android:textStyle="bold" />

                        <TextView
                            android:id="@+id/carYear"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_vertical"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_year" />
                    </LinearLayout>

                    <LinearLayout
                        android:layout_width="0dip"
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:background="@color/white"
                        android:orientation="vertical" >

                        <TextView
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_vertical"
                            android:layout_marginBottom="5dip"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_city"
                            android:textStyle="bold" />

                        <TextView
                            android:id="@+id/carYear"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_vertical"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_year" />
                    </LinearLayout>
                </TableRow>

                <TableRow
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_marginTop="1dip"
                    android:layout_weight="1"
                    android:background="@color/grey" >

                    <LinearLayout
                        android:layout_width="0dip"
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:background="@color/white"
                        android:orientation="vertical" >

                        <TextView
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_vertical"
                            android:layout_marginBottom="5dip"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_transmittion"
                            android:textStyle="bold" />

                        <TextView
                            android:id="@+id/carYear"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_vertical"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_year" />
                    </LinearLayout>

                    <LinearLayout
                        android:layout_width="0dip"
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:background="@color/white"
                        android:orientation="vertical" >

                        <TextView
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_vertical"
                            android:layout_marginBottom="5dip"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_area"
                            android:textStyle="bold" />

                        <TextView
                            android:id="@+id/carYear"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_vertical"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_year" />
                    </LinearLayout>

                        <LinearLayout
                        android:layout_width="0dip"
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:background="@color/white"
                        android:orientation="vertical" >

                        <TextView
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_vertical"
                            android:layout_marginBottom="5dip"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_registered_city"
                            android:textStyle="bold" />

                        <TextView
                            android:id="@+id/carYear"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_vertical"
                            android:background="@color/white"
                            android:gravity="center_horizontal"
                            android:text="@string/car_year" />
                    </LinearLayout>
                </TableRow>
            </TableLayout> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-09-06T16:24:26.313

在 API 11 中引入，您可以`android:measureWithLargestChild="true"`在每个.`TableLayout``android:layout_weight="1"``TableRow`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T07:22:48.950

这是您的解决方案：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TableRow
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:weightSum="4" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dp"
                android:layout_weight="1"
                android:background="#B0B0B0" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dp"
                android:layout_weight="1"
                android:background="#B0B0B0" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dp"
                android:layout_weight="1"
                android:background="#B0B0B0" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="#B0B0B0" />
        </TableRow>

        <TableRow
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="1dp"
            android:orientation="vertical"
            android:weightSum="4" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dp"
                android:layout_weight="1"
                android:background="#B0B0B0" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dp"
                android:layout_weight="1"
                android:background="#B0B0B0" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dp"
                android:layout_weight="1"
                android:background="#B0B0B0" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="#B0B0B0" />
        </TableRow>

        <TableRow
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="1dp"
            android:orientation="vertical"
            android:weightSum="4" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dp"
                android:layout_weight="1"
                android:background="#B0B0B0" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dp"
                android:layout_weight="1"
                android:background="#B0B0B0" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dp"
                android:layout_weight="1"
                android:background="#B0B0B0" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="#B0B0B0" />
        </TableRow>

        <TableRow
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="1dp"
            android:orientation="vertical"
            android:weightSum="4" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dp"
                android:layout_weight="1"
                android:background="#B0B0B0" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dp"
                android:layout_weight="1"
                android:background="#B0B0B0" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dp"
                android:layout_weight="1"
                android:background="#B0B0B0" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="#B0B0B0" />
        </TableRow>

        <TableRow
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="1dp"
            android:orientation="vertical"
            android:weightSum="4" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dp"
                android:layout_weight="1"
                android:background="#B0B0B0" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dp"
                android:layout_weight="1"
                android:background="#B0B0B0" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dp"
                android:layout_weight="1"
                android:background="#B0B0B0" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="#B0B0B0" />
        </TableRow>

        <TableRow
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="1dp"
            android:orientation="vertical"
            android:weightSum="4" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dp"
                android:layout_weight="1"
                android:background="#B0B0B0" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dp"
                android:layout_weight="1"
                android:background="#B0B0B0" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginRight="1dp"
                android:layout_weight="1"
                android:background="#B0B0B0" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="#B0B0B0" />
        </TableRow>
    </TableLayout>

</LinearLayout> 
```

![在此处输入图像描述](../Images/c13b89e904a7ed740ba02b64b05666b4.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-09T21:17:47.400

这是一个解决方案：

```
<TableLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    <TableRow
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical">

       <TextView
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:layout_gravity="fill"
        />
       <TextView
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:layout_gravity="fill"
        />
    </TableRow>
    <TableRow
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical">

       <TextView
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:layout_gravity="fill"
        />
       <TextView
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:layout_gravity="fill"
        />
    </TableRow> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-15T20:07:43.730

我刚刚遇到这个问题并解决了它。事实证明，桑尼的回答对我有用。

虽然正如评论中提到的，我可以通过阅读它来判断它是否有效。我是新手，所以既不能发表评论也不能投票给它有用。因此，我将其发布在这里。

这个想法是让你`TableRow`决定行的高度。通过设置`layout_height`为`wrap_content`，行的高度取决于内容`TextView`。

由于单元格的边界线将是 的边界 `TextView`，因此`layout_height`应该是`match_parent`。

我希望它对 Android newbee 有帮助（是的，我也是 android 新手）。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-06T07:12:02.713

```
<TableRow
                android:layout_width="fill_parent"
                android:layout_height="xxdip"  // HERE define a fixed size 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-12-06T09:19:45.533

以下答案现已弃用：

您可以更改 TableRow **->** LinearLayout

```
<LinearLayout
                    android:layout_width="0dip"
                    android:layout_height="wrap_content"    
                    android:layout_weight="1"
                    android:background="@color/white"
                    android:orientation="vertical" > 
```

# .net - 如何在 PowerShell 中检查字符串是否为空或为空？

> ID：13738634
> 
> 赞同：514
> 
> 时间：2012-12-06T07:09:28.757
> 
> 标签：.net, string, powershell, null

在 PowerShell中是否有类似内置的`IsNullOrEmpty`函数来检查字符串是否为空或空？

到目前为止我找不到它，如果有内置方法，我不想为此编写函数。

* * *

## 回答 #1

> 赞同：715
> 
> 时间：2012-12-06T16:21:37.947

你们这太难了。PowerShell 非常优雅地处理这个问题，例如：

```
> $str1 = $null
> if ($str1) { 'not empty' } else { 'empty' }
empty

> $str2 = ''
> if ($str2) { 'not empty' } else { 'empty' }
empty

> $str3 = ' '
> if ($str3) { 'not empty' } else { 'empty' }
not empty

> $str4 = 'asdf'
> if ($str4) { 'not empty' } else { 'empty' }
not empty

> if ($str1 -and $str2) { 'neither empty' } else { 'one or both empty' }
one or both empty

> if ($str3 -and $str4) { 'neither empty' } else { 'one or both empty' }
neither empty 
```

* * *

## 回答 #2

> 赞同：589
> 
> 时间：2012-12-06T07:48:30.367

您可以使用`IsNullOrEmpty`静态方法：

```
[string]::IsNullOrEmpty(...) 
```

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2012-12-06T08:30:54.067

除了`[string]::IsNullOrEmpty`为了检查 null 或空之外，您还可以将字符串显式地转换为布尔值或在布尔表达式中：

```
$string = $null
[bool]$string
if (!$string) { "string is null or empty" }

$string = ''
[bool]$string
if (!$string) { "string is null or empty" }

$string = 'something'
[bool]$string
if ($string) { "string is not null or empty" } 
```

输出：

```
False
string is null or empty

False
string is null or empty

True
string is not null or empty 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2015-03-30T12:50:43.193

如果它是函数中的参数，您可以使用`ValidateNotNullOrEmpty`以下示例进行验证：

```
Function Test-Something
{
    Param(
        [Parameter(Mandatory=$true)]
        [ValidateNotNullOrEmpty()]
        [string]$UserName
    )

    #stuff todo
} 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2016-02-10T14:04:08.083

就个人而言，我不接受将空格 ($STR3) 视为“非空”。

当一个只包含空格的变量被传递给一个参数时，它通常会出错，参数值可能不是'$null'，而不是说它可能不是一个空格，一些删除命令可能会删除一个根文件夹而不是一个subfolder 如果子文件夹名称是“空格”，那么在许多情况下，所有理由不接受包含空格的字符串。

我发现这是实现它的最佳方法：

```
$STR1 = $null
IF ([string]::IsNullOrWhitespace($STR1)){'empty'} else {'not empty'} 
```

空的

```
$STR2 = ""
IF ([string]::IsNullOrWhitespace($STR2)){'empty'} else {'not empty'} 
```

空的

```
$STR3 = " "
IF ([string]::IsNullOrWhitespace($STR3)){'empty !! :-)'} else {'not Empty :-('} 
```

空的！！:-)

```
$STR4 = "Nico"
IF ([string]::IsNullOrWhitespace($STR4)){'empty'} else {'not empty'} 
```

不是空的

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2019-05-21T12:39:05.407

PowerShell 2.0 的替代品`[string]::IsNullOrWhiteSpace()`是`string -notmatch "\S"`

（“ **\S** ” = 任何非空白字符）

```
> $null  -notmatch "\S"
True
> "   "  -notmatch "\S"
True
> " x "  -notmatch "\S"
False 
```

性能非常接近：

```
> Measure-Command {1..1000000 |% {[string]::IsNullOrWhiteSpace("   ")}}
TotalMilliseconds : 3641.2089

> Measure-Command {1..1000000 |% {"   " -notmatch "\S"}}
TotalMilliseconds : 4040.8453 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-01-30T22:00:51.250

我有一个必须在计算机上运行的 PowerShell 脚本，它已经过时以至于没有 [String]::IsNullOrWhiteSpace()，所以我自己编写了。

```
function IsNullOrWhitespace($str)
{
    if ($str)
    {
        return ($str -replace " ","" -replace "`t","").Length -eq 0
    }
    else
    {
        return $TRUE
    }
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2018-03-05T02:45:59.337

```
# cases
$x = null
$x = ''
$x = ' '

# test
if ($x -and $x.trim()) {'not empty'} else {'empty'}
or
if ([string]::IsNullOrWhiteSpace($x)) {'empty'} else {'not empty'} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-02-06T21:37:25.647

以纯 PowerShell 方式完成此操作的另一种方法是执行以下操作：

```
("" -eq ("{0}" -f $val).Trim()) 
```

这会成功评估 null、空字符串和空格。我将传递的值格式化为空字符串以处理 null（否则调用 Trim 时 null 将导致错误）。然后只需使用空字符串评估相等性。我认为我仍然更喜欢 IsNullOrWhiteSpace，但如果您正在寻找另一种方法，这将起作用。

```
$val = null    
("" -eq ("{0}" -f $val).Trim())
>True
$val = "      "
("" -eq ("{0}" -f $val).Trim())
>True
$val = ""
("" -eq ("{0}" -f $val).Trim())
>True
$val = "not null or empty or whitespace"
("" -eq ("{0}" -f $val).Trim())
>False 
```

无聊时，我玩了一些并使它更短（尽管更神秘）：

```
!!(("$val").Trim()) 
```

或者

```
!(("$val").Trim()) 
```

取决于你想要做什么。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-11-27T19:37:49.287

请注意，`"if ($str)"`and`"IsNullOrEmpty"`测试并非在所有情况下都具有可比性：`$str=0`对两者的赋值都会产生 false，并且取决于预期的程序语义，这可能会产生意外。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-05T08:45:02.323

基思希尔的答案的扩展（考虑空格）：

```
$str = "     "
if ($str -and $version.Trim()) { Write-Host "Not Empty" } else { Write-Host "Empty" } 
```

对于空值、空字符串和带有空格的字符串，这将返回“Empty”，而对于其他所有内容，则返回“Not Empty”。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-09-26T13:13:16.077

您可以使用条件语句`IsNullOrWhitespace()`和`isNullOrEmpty()`静态方法来测试空格或空值。例如，在插入`MySQL`数据库之前，我循环遍历将输入的值并使用条件来避免空值或空白值。

```
// RowData is iterative, in this case a hashtable,
// $_.values targets the values of the hashtable

```PowerShell
$rowData | ForEach-Object {
    if(-not [string]::IsNullOrEmpty($_.values) -and
        -not [string]::IsNullOrWhiteSpace($_.values)) {
            // Insert logic here to use non-null/whitespace values
    }
} 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2021-07-11T11:11:49.683

有点相关的 hack - 您可以排除空值（例如 Excel 习惯在复制到 PowerShell 时包含一个额外的空单元格），如下所示：

```
get-clipboard | ? {$_} 
```

# ios - PhoneGap ios应用地图无法显示

> ID：13738637
> 
> 赞同：1
> 
> 时间：2012-12-06T07:10:17.073
> 
> 标签：ios, google-maps, cordova

我已经尝试了很多方法来在在线提供的 phonegap 应用程序中显示 mapView。但仍然无法正常工作。这是我的代码。希望有人可以帮助我解决问题提前谢谢

这是 map.js 文件代码

```
function onMapLoad(){
        if(isConnected){
            //load google api
            var fileref=document.createElement('script');
            fileref.setAttribute("type","text/javascript");
            fileref.setAttribute("src","http://maps.googleapis.com/maps/api/js?sensor=true&callback="+"getGeolocation");
            document.getElementByTagName("head")[0].appendChild(fileref);
        }
        else{
            alert("Must be connected to the internet");
        }
    }

 function getGeolocation(){
    var options ={
    maximumAge:3000,
    timeout:5000,
    enableHighAccuracy:true
    };
    navigator.geolocation.getCurrentPosition(loadMap,geoError,options);
   }

  function loadMap(position){
var latlng = new google.maps.LatLng(
                                    position.coords.latitude,position.coords.longitude);
var myOptions ={
zoom:8;
center:latlng,
myTypeId:google.maps.MapTypeId.ROADMAP
};
var mayObj = document.getElementById("map_canvas");
var map = new google.maps.Map(mapObj,myOptions);
var marker = new google.maps.Marker({
                                    position:latlng,
                                    map:map,
                                    title:"You"

                                    });
 }
  function geoError(error){
alert('code: '+error.code +'\n' +'message: '+error.message +'\n');
 }
  $(document).bind("pageload",onMapLoad); 
```

这是 map.html 文件

```
 <!DOCTYPE html>
 <html>
<head>
    <title>Map page</title>
<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1,    minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />

    <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.2.0.css" />
    <script type="text/javascript" src="cordova-2.2.0.js"></script>
    <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.21.custom.min.js"></script>
    <script type="text/javascript" src="js/jquery.mobile-1.2.0.js"></script>

       </head>
<body>
    <div data-role ="page" id="map-page">
    <div id ="map_canvas" style =" width:300px; height:400px">
    </div>
         <script type="text/javascript" charset ="utf-8" src="js/map.js"></script>
        </div>
</body>
</html> 
```

# c++ - 我们是否需要删除对非新对象的引用？

> ID：13738643
> 
> 赞同：2
> 
> 时间：2012-12-06T07:10:45.450
> 
> 标签：c++, reference

```
classA objA (0, NULL);
classA & objB (objA); 
```

假设以上是全局的，它会导致内存泄漏吗？原因？

实际上通过 Valgrind，我得到了一个错误：

`5 bytes in 1 blocks are still reachable`
`...`
`global constructors keyed to classA`

这说明什么？

**更新：**

确切的错误在这里。

```
at 0x4C2659D: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)
==6653==    by 0x4EA7BB7: newterminal (in /usr/lib64/R/lib/libR.so)
==6653==    by 0x4EA7D4E: Rf_InitConnections (in /usr/lib64/R/lib/libR.so)
==6653==    by 0x4F420DD: setup_Rmainloop (in /usr/lib64/R/lib/libR.so)
==6653==    by 0x4FEC76A: Rf_initEmbeddedR (in /usr/lib64/R/lib/libR.so)
==6653==    by 0x5C3A8DB: RInside::initialize(int, char const* const*, bool) (in /usr/lib64/R/library/RInside/lib/libRInside.so)
==6653==    by 0x5C3AF60: RInside::RInside(int, char const* const*, bool) (in /usr/lib64/R/library/RInside/lib/libRInside.so)
==6653==    by 0x40D105: global constructors keyed to R 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:11:43.557

对象本身没有泄漏，因为它不是动态分配的。

**但**上述情况可能会导致内存泄漏，例如：

```
class classA
{
   classA() { new int[42]; }
}; 
```

这可以通过提供析构函数或使用 RAII 来解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T07:12:02.067

不，你从来没有打电话`new`，所以你不必打电话`delete`。

您应该`delete`只调用动态分配的对象。你的对象不是动态分配的，所以你不需要。如果这样做，将导致未定义的行为。

当然，假设您没有`class A`构造函数会泄漏内存或导致未定义的行为，这是显而易见且相当自然的。

* * *

另外，请注意，所谓的内存泄漏是可以解释的。

在您的情况下，所讨论的对象是全局的，并且保证在您的程序的整个生命周期中都存在。即使这个对象泄漏内存，它也根本不重要。
这个对象被安排在你的程序结束之前一直存在，即使它泄漏了内存，内存泄漏的持续时间是这个全局对象的销毁到程序中的最后一条语句，之后泄漏的内存将被操作系统回收一旦你的程序结束。

所以，实际上这个对象是否泄漏并不重要，当然 valgrind 会将它报告为泄漏，但是当它对你的程序无关紧要时它就会泄漏。

您应该担心的泄漏类型是***重复性泄漏***、函数或构造，它们会在程序的生命周期内反复泄漏内存。这充其量只是***有限的泄漏***情况，这并不重要。

# sql-server-2008 - 将日期时间四舍五入为四分之一分钟

> ID：13738645
> 
> 赞同：3
> 
> 时间：2012-12-06T07:10:46.263
> 
> 标签：sql-server-2008

我有一个函数可以将日期时间四舍五入到最近的一刻钟。但是有没有办法四舍五入到最近的四分之一？

例子。

```
08:14:00 becomes 08:00:00
08:03:00 becomes 08:00:00
08:29:00 becomes 08:15:00 
08:55:00 becomes 08:45:00 
```

这就是我现在必须四舍五入到最近的四分之一。

```
(
@dt datetime
)
returns datetime
as
begin
declare @result datetime
declare @mm int
set @mm=datepart(minute,@dt)
set @result = dateadd(minute,-@mm + (round(@mm/cast(15 as float),0)*15) , @dt )

return @result 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:53:22.817

使用 SQL Server：

```
select cast( 
         FLOOR( cast( GetDate() as float)*(24*4)) / (24*4) 
       as smalldatetime) AS "datetime_quarter" 
```

策略是：

*   将日期转换为浮点数，`*24`以获取小时数，`*4`以获取季度数
*   四舍五入`FLOOR`
*   转换回天数`/(24*4)`
*   将天数转换为日期时间。`smalldatetime`用于避免浮点舍入问题。

这可以很容易地调整为使用`ROUND`或`CEILING`代替；或使用其他小时倍数而不是`4`（季度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-01T09:27:44.863

这是获取当前季度上限和下限的过程。

```
declare QUARTER_FLOOR datetime;
declare QUARTER_CEIL datetime;
declare CURRENT_DATETIME datetime;
declare CURRENT_MINUTE int;
// get current datetime without second and millisecond
SET CURRENT_DATETIME = dateformat(getdate(), 'YYYY-MM-DD hh:NN:00.000');
set CURRENT_MINUTE = datepart(minute,CURRENT_DATETIME); // get current minute
// GET CURRENT QUARTER FLOOR
set QUARTER_FLOOR = dateadd(minute, -CURRENT_MINUTE + (round(CURRENT_MINUTE/cast(15 as float),0)*15) , CURRENT_DATETIME );
// GET CURRENT QUARTER FLOOR
set QUARTER_CEIL = dateadd(minute, ((round(CURRENT_MINUTE/cast(15 as float),0)+1)*15) - CURRENT_MINUTE , CURRENT_DATETIME );

 // RETURN
select  QUARTER_FLOOR, QUARTER_CEIL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-01T22:45:00.850

当我们将月份除以 4 时，这种方法依赖于整数除法。原则上它应该是可移植的，当然要修改`dateadd()`/`date_add()`和`month()`/的语法`year()`。

```
SELECT DATEADD(
  MONTH,
  3 * (
       MONTH( my_date ) / 4
       ),
  CONCAT(
    YEAR( my_date ),
    '0101' )
  ) AS my_date_rounded_to_quarter 
```

# iphone - 如何以编程方式从 iPhone 的名片中获取姓名、电子邮件 ID 和电话号码？

> ID：13738646
> 
> 赞同：4
> 
> 时间：2012-12-06T07:10:53.677
> 
> 标签：iphone, objective-c, ios, tesseract

我知道如何使用 Tesseract 从图像中提取文本，谁能告诉我如何从名片中提取姓名、电话号码和电子邮件（通过扫描图像文件）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T07:24:09.150

正方体光学字符识别 (OCR) [http://maniacdev.com/2011/08/example-tesseract-optical-character-recognition-ocr-demo-with-source/](http://maniacdev.com/2011/08/example-tesseract-optical-character-recognition-ocr-demo-with-source/)

从图像中读取文本。获得文本后，您可以编写自己的方法，该方法将获取文本并返回所需的结果。

```
 void detectCharacters(String text){
/**
if you want to detect email search for keyword "Email","email","e-mail",
 "mail-id", etc and read the characters till next empty space or new line is found.
use same thing for name, phonenumber.
**/

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-21T05:22:17.157

我用了Camcard，很好。他们需要更多时间来批准 SDK 请求，但它易于使用且直接。

试试 - [http://dev.camcard.com](http://dev.camcard.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-30T05:26:47.077

使用 NSDataDetector_Class 在给定的字符串中查找电子邮件、电话号码、链接、时区、日期、地址、持续时间等。

[参考](https://developer.apple.com/library/mac/documentation/Foundation/Reference/NSDataDetector_Class/)

[示例代码](http://nshipster.com/nsdatadetector/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-20T11:13:35.093

我已将 NSDataDetector 用于电话号码和链接。它工作正常。地址检测不起作用。

# html - chrome显示“页面是马来语”，但我的网页是用英文写的

> ID：13738648
> 
> 赞同：3
> 
> 时间：2012-12-06T07:11:00.660
> 
> 标签：html, google-chrome, toolbar, language-translation

> **可能重复：**
> [为什么 Chrome 会错误地确定页面是不同的语言并提供翻译？](https://stackoverflow.com/questions/2467454/why-does-chrome-incorrectly-determine-page-is-in-a-different-language-and-offer)

我的整个页面都是用英语而不是马来语写的。但是，chrome显示该页面是马来语的。我应该对我的代码进行哪些更改？是我没有遵守的一些 HTML 标准吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:20:27.930

这取决于您用来保存文件的编辑器。假设你用的是Dreamweaver，有个东西叫BOM（字节序标记），当你在Dreamweaver中查看页面属性时，应该有编码设置和BOM的复选框。页面可能是用马来语编码保存的。BOM 表示文本流（文件）在设置时是 Unicode。

# .net - 无法在 Visual Studio 2010 中编译 v3.5 .NET 项目

> ID：13738650
> 
> 赞同：0
> 
> 时间：2012-12-06T07:11:12.010
> 
> 标签：.net, visual-studio-2010

我已将 wsp 解决方案转换为 vs 2010 解决方案。但是在尝试编译其中一个项目时，出现以下编译错误：

```
The type "System.Func<T,TResult> exists in both 'c:\program files (x86)\Reference assemblies\Microsoft\Framework\v3.5\System.Core.dll' and 'c:\windows\microsoft.NET\Framework64\4.0.30319\mscorlib.dll' 
```

我已经删除了 System.Core.dll，并确保项目中的目标框架设置为 v3.5。但是错误仍然出现。

我已经尝试过 stackoverflow 线程中提出的众多解决方案。到目前为止，没有一个工作过。

我正在尝试使用 v.3.5 框架进行编译。我的想法已经用完了...是否还有其他 Microsoft 参考资料悄悄地使用 v4.0 进行编译？这造成了很多悲伤...

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:22:45.260

修改您的项目文件。

```
<Reference Include="System.Core">
    <RequiredTargetFramework>3.5</RequiredTargetFramework>
</Reference> 
```

# jboss - jBPM 5.4 中的决策制定

> ID：13738651
> 
> 赞同：0
> 
> 时间：2012-12-06T07:11:14.100
> 
> 标签：jboss, jbpm, business-process-management

我是 jBPM 5.4 的新手，也是 BPM 工作流类型的新手。

我有一个简单的要求来提交产品，而相关主管需要接受或拒绝它。

根据做出的决定，流向不同的路径。

```
 No
                       ------------ State A
Approval -------------|
                       ------------ State B
                         Yes 
```

这是需要实现的简单工作流程。

我的问题是“批准”必须由用户执行。

如何使用 eclipse 工具在 jBPM 5.0 中模拟这样的人工任务。

还如何将此项目上传到 jBPM 控制台并以编程方式调用流程。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:29:16.593

您应该使用用户任务对批准请求进行建模，并使用结果映射将答案映射到流程变量。然后，您可以在例如独占网关中使用此变量来根据用户的响应做出决定。

jbpm-examples 模块中有一个类似的示例：使用人工任务请求批准： [https ://github.com/droolsjbpm/jbpm/blob/master/jbpm-examples/src/main/resources/人类任务/HumanTask.bpmn](https://github.com/droolsjbpm/jbpm/blob/master/jbpm-examples/src/main/resources/humantask/HumanTask.bpmn)

克里斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T17:31:39.853

在 Web Designer 中，条件不是在网关中设置，而是在其每个传出流中设置。您需要做什么才能单击其中一个传出流，并在其“条件表达式”属性中写入：

返回批准 == true;

确保“连续表达式语言”设置为“java”

重复第二个流程的步骤。

参考： [https ://community.jboss.org/thread/204303](https://community.jboss.org/thread/204303)

# wordpress - 在 wordpress 中自定义 wp_list_comments 中的子评论

> ID：13738664
> 
> 赞同：1
> 
> 时间：2012-12-06T07:12:22.567
> 
> 标签：wordpress, comments

我想要的是这样[的：点击查看图片](http://www.liyingqing.com/wp-content/themes/adv/2012-12-05_151436.png)

但是，最后它想出了这样： [点击查看图片](http://www.liyingqing.com/wp-content/themes/adv/2012-12-05_151459.png) （我不能放图片，所以我把图片网址放在这里！）

这是我的comment.php中的代码显示评论的地方：

```
`<?php wp_list_comments('type=comment&callback=comment_activity_list');?>` 
```

这是我的function.php中函数“comment_activity_list”的代码：

```
 <?php if (!function_exists("comment_activity_list")){
        function comment_activity_list($comment, $args, $depth){
        $GLOBALS['comment'] = $comment;
?>
            <ol class="clist">
                    <li id="discussion-<?php comment_ID() ?>" class="discussion">
                        <div class="discussion-post clearfix">
                            <div class="gravatar"><?php echo get_avatar( $comment, 45); ?></div>
                            <div class="block">
                                <a class="discussion-username"><?php echo get_comment_author_link() ?></a>
                                <div class="discussion-text">
                                    <?php comment_text()?>
                                    <?php if ($comment->comment_approved == '0') : ?>
                                        <p><em><?php _e('Your comment is awaiting moderation.'); ?></em></p>
                                    <?php endif; ?>
                                </div>
                                <!--.discussion-text-->
                    <div class="discussion-meta">
                         <?php delete_comment_link($comment->comment_ID,'class="btn red"')?>- <?php comment_reply_link(array_merge( $args, array('depth' => $depth, 'max_depth' => $args['max_depth']))) ?> - <?php if(!function_exists('how_long_ago')){comment_date('M d, Y'); } else { echo how_long_ago(get_comment_time('U')); } ?>
                    </div>
                    <!--.discussion-meta-->
                            </div>
                            <!-- .discussion-post -->
                        </div>
                        <!-- .discussion-post -->
            </li>
        </ol>
<?php
        }
    }?> 
```

如何自定义孩子的评论？任何人都可以帮助我吗？

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-19T10:09:19.093

您可以通过检查以下内容来检查评论是否是孩子

```
<?php if( $comment->comment_parent ) : ?>
// This is a CHILD comment
<?php else: ?>
// This is a NORMAL comment
<?php endif; ?> 
```

# objective-c - 在纵向模式下捕获横向视图的图像？

> ID：13738665
> 
> 赞同：0
> 
> 时间：2012-12-06T07:12:24.940
> 
> 标签：objective-c, uiview, ios6, xcode4.5, graphicscontext

希望你会做得很好。

当我处于横向时，我需要捕获我的视图。

我在纵向拍摄时轻轻地拍摄，但是当我切换到横向时，我只能拍摄到一半的图像。

我正在做这样的事情

```
UIGraphicsBeginImageContext(self.view.frame.size);
        [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
        viewImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil); 
```

当我在横向定位时我应该怎么做。

**要记住的事情**:: 当我在横向时，我在滚动视图中有内容，直到我向下滚动它们才会显示。

是否有问题（滚动视图）？

感谢期待。

# iphone - 如何修复整个应用程序的页眉和页脚，就像标签栏应用程序一样？

> ID：13738667
> 
> 赞同：0
> 
> 时间：2012-12-06T07:12:36.467
> 
> 标签：iphone, ios6, ios-simulator

对于这个要求，我使用`[self.veiw addSubView:myview];`

我还设置了屏幕尺寸`myview.frame=(0,40,320,400);`

页眉和页脚大小为 320x40。

它运行良好，但问题是当我呈现或导航视图时，它不起作用：它调整为 320x480 的视图大小。

任何想法这个问题的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:48:14.863

**firstOption** 正如我从您的问题中了解到的那样，您想在当前视图的顶部添加一个视图。

你可以试试这个：`viewWillAppear`在你的 ViewControllers 的每个函数中添加这样的东西。

```
UIView* myView = [get your view from appDelegate/yourAnyClass];
//and then add to the top of the view
    [self.navigationController.view addSubview:myView];
//It will add the view every time to the topView of your app. 
```

**或 secondOption：** 您可以调整[ViewController 的框架。](https://stackoverflow.com/questions/4929578/iphone-how-to-set-uiviewcontroller-frame) [苹果文档](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/BasicViewControllers/BasicViewControllers.html#//apple_ref/doc/uid/TP40007457-CH101)。并将自定义视图添加到 appdelegate 中的窗口`[self.window add subView:yourView];`。

# php - 从 /images 中的多个文件夹获取图像，并将每个文件夹的内容放在自己的 div 中

> ID：13738672
> 
> 赞同：2
> 
> 时间：2012-12-06T07:13:17.937
> 
> 标签：php, html, foreach, gallery, auto-populate

我正在尝试让 php 执行以下操作。

我的根目录中有一个文件夹结构。/images/1234、/images/2345、/images/3456 等（多个文件夹都在图像中）

我想获取每个文件夹的内容并将其内容放入自己的 div 中，使用 php 而不是硬编码，因为文件夹和文件会定期更改。

```
<div><img src="images/1234/1.jpg"><img src="images/1234/2.jpg"><img src="images/1234/3.jpg"></div>
<div><img src="images/2345/1.jpg"><img src="images/2345/2.jpg"><img src="images/2345/3.jpg"></div>
<div><img src="images/3456/1.jpg"><img src="images/3456/2.jpg"><img src="images/3456/3.jpg"></div> 
```

文件/文件夹将不断添加，因此这些 div 必须在图像目录中找到的每个文件夹的某种 foreach 循环中。

本质上，images 文件夹中的每个文件夹都是一个 div，如果存在新文件夹，则当浏览器刷新时，div 会自动填充。

我可以让它与 php 一起工作以显示所有图像并放在页面上，但我需要这个结构。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:42:49.813

```
foreach (glob('images/*') as $dir) {
  echo '<div>'; // One div per directory
  foreach (glob($dir."/*.jpg") as $img) {
    echo "<img src='$img'/>";
  }
  echo "</div>\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:27:56.503

您需要将所有数据结构以字符串格式存储在一个地方。示例（sql 数据库）。然后执行 sql 查询以检索道路图像文件的所有位置。然后用 php 函数包装以应用路径（路径）。

这应该和他的一样。

**使用 SQL 数据库**

```
<?php
// Formulate Query
$querySQL = "SELECT imageURL FROM tableImage";

// Perform Query
$result = mysql_query($querySQL );

//Gets all channels url images in an array variable
//Then attributed to code html image tag

<div><img src=".$result[0]." ></div>
<div><img src=".$result[1]." ></div>
<div><img src=".$result[2]." ></div>

?> 
```

**如果没有 SQL** ，则可以在没有 sql 的情况下使用完整路径检索图像文件列表。只有文件夹路径应该是已知的并且很难给出。

```
<?php
//path to directory to scan
$directory = "../images/team/harry/";

//get all image files with a .jpg extension.
$images = glob($directory . "*.jpg");

<div><img src="$directory.$images[0]." ></div>
<div><img src="$directory.$images[1]." ></div>
<div><img src="$directory.$images[2]." ></div>

?> 
```

# android - EditText 框的正确布局

> ID：13738675
> 
> 赞同：0
> 
> 时间：2012-12-06T07:13:30.587
> 
> 标签：android, xml, android-layout

我想知道我的布局有什么问题。
[这](http://i49.tinypic.com/kd72f6.png)是一个屏幕截图。

问题是文本在编辑文本框中被截断。
我想在那些编辑文本框中输入时文本的 XY 坐标有问题；光标对我来说闪烁得很好。

[这](http://pastebin.com/svqgq2D9)是我的 XML 布局的 pastebin（不放在这里，因为它很长）。

任何建议将被认真考虑。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:20:42.387

edittext 中文本的文本大小对于硬编码的 30dp 高度的 edittext 来说很大。您可以将 edittext 高度设置为 wrapcontent 或减小 edittext (10-14sp) 的 textsize 以使其适合内部。

android 建议将可点击区域的最小高度设置为至少 48dp。 [http://developer.android.com/design/style/metrics-grids.html](http://developer.android.com/design/style/metrics-grids.html)

# caching - 缓存的虚拟路径中的起始“/”

> ID：13738676
> 
> 赞同：0
> 
> 时间：2012-12-06T07:13:44.333
> 
> 标签：caching, uri, g-wan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:53:20.933

感谢您指出手册和（旧）标题之间的这种差异。

正确的表示法是*没有*斜杠，如 G-WAN 分布的 cache.c 示例所示：

```
 static char szpath[] = "cache1.html";
   int expire = 15;
   if(!cacheadd(argv, szpath, reply->ptr, reply->len, ".html", 200, expire))
   {
      printf("* error: could not add cache entry #1\n");
      return 503;
   } 
```

头文件注释中的注释将被更新。如有疑问，尝试可能是检查有效方法的最佳方法。

# c# - 如何使用后端查询在gridview中动态绑定checkboxlist

> ID：13738682
> 
> 赞同：0
> 
> 时间：2012-12-06T07:14:21.540
> 
> 标签：c#, asp.net, telerik-grid

对于通常复选框列表，我使用这些绑定是有效的，但是如何在 gridview 中动态绑定每一行。

```
 List<string> availableItems = new List<string> { "Item1", "Item2", "Item3", "Item4", "Item5" };
        List<string> selectedItems = new List<string> { "Item1", "Item3", "Item4", "Item6" };

        // add available items to checkboxlist control
        foreach (string item in availableItems)
            chkItems.Items.Add(new ListItem(item));

        // check pre-selected items
        var query = from ListItem listItem in chkItems.Items
                    join item in selectedItems
                    on listItem.Value equals item
                    select listItem;

        foreach (ListItem listItem in query)
            listItem.Selected = true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:26:45.953

在 RadGrid ItemCreated 中使用 FindControl 找到 checkBoxList 并绑定它。

# r - 为什么我的数据中的第三个四分位数小于平均值？

> ID：13738685
> 
> 赞同：1
> 
> 时间：2012-12-06T07:14:26.690
> 
> 标签：r, data-science, mean, quartile

我将一个名为 gob 的数据集加载到 R 中并尝试了方便的`summary`功能。请注意，第三个四分位数小于平均值。怎么会这样？是我的数据大小还是其他类似的东西？

我已经尝试为digits 参数传入一个较大的值（例如10），但这并不能解决问题。

```
> summary(gob, digits=10)

   customer_id         100101.D            100199.D            100201.D        
 Min.   :   1083   Min.   :0.0000000   Min.   :0.0000000   Min.   :0.0000000  
 1st Qu.: 965928   1st Qu.:0.0000000   1st Qu.:0.0000000   1st Qu.:0.0000000  
 Median :2448738   Median :0.0000000   Median :0.0000000   Median :0.0000000  
 Mean   :2660101   Mean   :0.0010027   Mean   :0.0013348   Mean   :0.0000878  
 3rd Qu.:4133368   3rd Qu.:0.0000000   3rd Qu.:0.0000000   3rd Qu.:0.0000000  
 Max.   :6538193   Max.   :1.0000000   Max.   :1.0000000   Max.   :0.7520278 
```

请注意，对于 gob$100201.D，平均值是 0.0000878，但第三个 Qu。= 0。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-06T07:19:43.237

这不是错误，只是您的数据包含很多 0 值。例如，如果我用 12 个 0 和 1 个 1 制作 x，我得到的结果是第 3 个四分位数小于平均值

```
 x<-c(0,0,0,0,0,0,0,0,0,0,0,0,1)
summary(x)

  Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
0.00000 0.00000 0.00000 0.07692 0.00000 1.00000 
```

尝试在列上使用 table() 来查看值的分布

```
table(x)
 x
 0  1 
 12  1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T07:22:54.317

第三个分位数可能低于平均值。它不是最高值的 75%，而是从最低到最高排序时向量计数的 75% 处的值。换句话说：

```
Vector <- c(0,0,0,0,0,0,0,1)
mean(Vector)
[1] 0.125
quantile(Vector, 0.75)
[1] 0 
```

为了找到第三个分位数，R 将所有数据从最低到最高排序，然后选择最接近该向量长度的 75% 的值。所以基本上：

```
3rdQuar = Vector[round(length(Vector)*0.75)] 
```

（请注意，如果它落在两个整数之间，R 实际上会平均这两个数字。但这是基本思想）

# git - 回家时保存工作目录的内容

> ID：13738688
> 
> 赞同：0
> 
> 时间：2012-12-06T07:14:44.207
> 
> 标签：git

*没有玩过 git，所以这更像是一个“git 是否支持这样的东西”的问题。*

你在工作……工作……你刚刚做了一个很大的改变，它构建了，你做了一个提交，然后立即开始着手*下一个大特性*。对文件进行了一些更改，但不足以提交，并且*铃声响了*。您想继续在家工作，但又不想通过部分提交弄脏历史树。

理想情况下，您可以将历史树上传到 GitHub 和工作树的内容，然后继续在家工作。

git 支持这样的东西吗？

*我总是可以将整个内容上传到 USB 并从那里继续，但这破坏了整个想法。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T07:23:36.643

提交并推送您的部分更改（最好在故事分支上），然后将中间提交压缩为最终提交，如下所述：http: [//gitready.com/advanced/2009/02/10/squashing-commits-with- rebase.html](http://gitready.com/advanced/2009/02/10/squashing-commits-with-rebase.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:45:14.240

只需提交您的更改，然后在家中撤消最后一次提交（在您拉出之后）：

```
git reset HEAD^ 
```

但是你将不得不进行强制推送（`push -f`），如果其他人在这个分支上工作，你就会遇到麻烦。有两种解决方案：

1.  提交到不同的分支：

    ```
    git checkout -b my-temp-branch
    git commit -am "dirty state"
    git push origin my-temp-branch 
    ```

    然后在家里，检查正确的分支，将其移动到 temp 分支，还原最后一次提交并删除 temp 分支：

    ```
    git checkout **branch**
    git pull origin my-temp-branch
    git reset HEAD^
    git push --delete origin my-temp-branch 
    ```

2.  提交到不同的回购。如果您不想在临时分支中乱扔中央存储库，只需在 github 上创建自己的存储库（如果我们谈论的是公司代码，则为私有存储库），将其设置为另一个远程并执行与步骤 1 相同的操作。

    ```
    git remote add private **repo** 
    ```

    这需要做一次，然后当你回家时：

    ```
    git commit -am "dirty state"
    git push private **branch** 
    ```

    然后在家里，你只需从你的私人仓库中提取并重置脏提交

    ```
    git checkout **branch**
    git pull private **branch**
    git reset HEAD^ 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T07:25:26.537

Git 是一个分布式版本控制和源代码。

因此，无论何时，我们都会进行更改，但它们还没有准备好进行最终提交，因此为了避免整个返回并开始工作，请切换到新分支并提交您的工作。

```
git checkout -b <new-branch>
git add .
git commit 
```

检查这个：[将现有的、未提交的工作移动到 Git 中的新分支](https://stackoverflow.com/questions/1394797/move-existing-uncommited-work-to-a-new-branch-in-git)

# php - 如何在 MySQL 中存储和检索文本数据，保留换行符？

> ID：13738690
> 
> 赞同：1
> 
> 时间：2012-12-06T07:15:18.417
> 
> 标签：php, mysql, filter

如何在 MySQL 数据库中存储和检索数据，`textarea`但保留换行符？在用户无法进行跨站点脚本或 SQL 注入攻击的情况下，如何以最安全的方式进行操作？

我应该先通过`mysql_real_escape()`函数过滤用户的输入数据，然后`INSERT INTO`是数据库，然后在检索时使用`htmlspecialchars()`函数吗？

我只想知道如何安全地存储数据并保留换行符。我希望有人可以给我一个这样的例子：

```
<?php
    $con = mysql_connect(host,username,password);
    mysql_select_db(contents_db);

    //Filtering process to prevent SQL-Injection
    $content = mysql_real_escape($_POST['content']);

    mysql_query('INSERT INTO contents_db (content, time) VALUES ({$content},{time()}');

    if(mysql_insert_id() > 1){
        $query = mysql_query('SELECT * FROM contents_db ORDER BY time DESC LIMIT 1');
        $text = mysql_fetch_object($query);

        //Outputting process to preserve line-breaks
        echo htmlspecialchars($text->content);
    }

    mysql_close($con);
?> 
```

如果我的例子是正确的，谁能告诉我如何让它变得更好和更安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T07:35:03.777

那是使用的完整示例**`PDO`**。举个例子，您可以通过多种方式改进它（例如，创建单个函数，例如`getDatabaseResult($query)`使查询异常检查更容易）。

```
try{
    $PDO = new PDO("mysql:host=".$db_host.";dbname=".$db_name, $db_user, $db_pass);
}
catch(PDOException $e){
    die('mysql connection error');
}

// if post data is set - add new row
if(isset($_POST['content']))
{
    try{
        $query = $PDO->prepare('INSERT INTO contents_db (content, time) VALUES ?,?');
        $res   = $query->execute(array($content,time()));
    }
    catch(PDOException $e){
        die('insert query failed');
    }
}

// if last query was executed - select data
// or you can call for "$PDO->lastInsertId();"
if($res){
    try{
        $query = $PDO->prepare('SELECT * FROM contents_db ORDER BY time DESC LIMIT 1');
        $res   = $query->execute();
        $res   = $query->fetchAll(PDO::FETCH_ASSOC);
    }
    catch(PDOException $e){
        die('select query failed');
    }

    //Outputting process to preserve line-breaks
    echo nl2br($text['content']);
} 
```

# arrays - 使用宏在excel单元格中插入数组值

> ID：13738700
> 
> 赞同：-1
> 
> 时间：2012-12-06T07:16:13.943
> 
> 标签：arrays, excel, vba

我将单元格`A5`数据作为单个单元格中的多行，

```
 Line_1
 Line_2
 Line_3 
```

我需要通过添加`"<p>"`到每一行来更新同一单元格：

```
 <p>Line_1</p>
 <p>Line_2</p>
 <p>Line_3</p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:02:37.807

您实际上可以使用公式来执行此操作。假设您的文本是单元格 A1：

```
="<p>" & SUBSTITUTE(A1,CHAR(10),"</p>" & CHAR(10) & "<p>") & "</p>" 
```

# javascript - Javascript prevent dot comma etc

> ID：13738710
> 
> 赞同：0
> 
> 时间：2012-12-06T07:16:57.767
> 
> 标签：javascript, jquery, jquery-validate, validation

I have javascript validation code, now I want to prevent **. ; , ` :**

this my code so far :

```
jQuery.validator.addMethod("noSpace", function(value, element) {
    return !value.match(/\s/g);
});

$().ready(function() {
    $("#signup_form").validate( {
        rules: {
            full_name: "required",
            username: {
                required: true,
                minlength: 2,
                noSpace: true,
            },
            password: {
                required: true,
                minlength: 5
            },
            email: {
                required: true,
                email: true
            },
        },
        messages: {
            full_name: "<div class='spacing'>Please enter your full name</div>",
            username:
            {
                required: "<div class='spacing'>Please enter an username</div>",
                minlength: "<div class='spacing'>Your username must consist of at least 2 characters</div>",
                noSpace: "<div class='spacing'>No space allowed</div>",
            },
            password:
            {
                required: "<div class='spacing'>Please provide a password</div>",
                minlength: "<div class='spacing'>Your password must be at least 5 characters long</div>"
            },
            email: "<div class='spacing'>Please enter a valid email address</div>"
        }
    });
}); 
```

I want to prevent in username rules. So if I input `. , ;` etc, it will show message that it can't allowed.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:31:37.490

Not tested, but this should work:

```
jQuery.validator.addMethod("userNameRule", function(string, element) { 
    return !string.match(/[.;,]/g);
}, "Your username contains invalid characters!");

username: {
    required: true,
    minlength: 2,
    noSpace: true,
    userNameRule: true
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:33:22.950

You need a regex like this ?

```
jQuery.validator.addMethod("noSpecials", function(value, element) {
    return !value.match(/[.;,]/g);
}); 
```

# php - 如何在 cakephp 中获取基本 URL？

> ID：13738711
> 
> 赞同：12
> 
> 时间：2012-12-06T07:16:59.040
> 
> 标签：php, cakephp, url-routing

我正在使用`Html Helper css()`方法来链接我的样式表，就像这样：`<?php echo $this->Html->css('reset.css');?>`但是如果我的 CakePHP 应用程序是通过路径以外的路径访问的`http://site.domain.com`，即`http://site.domain.com/my_app`

链接我的样式表的最佳命令是什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-06T07:41:47.477

完全相同的命令应该可以工作：

```
<?php 
echo $this->Html->css('reset.css');
?> 
```

`'reset.css'`如果给定的路径不以斜杠开头，它会自动将路径添加到 CSS 文件夹。

顺便说一句，如果您确实需要在 Cake 中获取基本 url，您可以使用`Router`该类：

```
//with http://site.domain.com/my_app
echo Router::url('/')       //-> /my_app
echo Router::url('/', true) //-> http://site.domain.com/my_app 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T09:18:56.367

有几种不同的方法可以获取基本路径。我用

```
echo $this->webroot; //Note: auto appends trailing slash 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-25T10:29:12.547

将此用于baseurl

```
echo $this->html->url('/', true); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-11-26T17:28:10.843

在相关说明上。

如果您需要主题网址，您可以这样做：

```
$this->webroot.'theme/'.$this->theme 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-12-13T02:10:09.073

您必须格式化： WWW_ROOT 。DS 。'css/file.css';

# c# - 迭代“Win32_Processor”以查找多个处理器？它是这样工作的吗？

> ID：13738715
> 
> 赞同：0
> 
> 时间：2012-12-06T07:17:44.750
> 
> 标签：c#, wmi

当我有以下情况时：

```
ManagementObjectSearcher searcher = new ManagementObjectSearcher("SELECT * FROM Win32_Processor");
ManagementObjectCollection myobject = searcher.Get();
        foreach (ManagementObject item in myobject)
        {
           //Name
           Console.WriteLine(item["Name"].ToString());
        } 
```

这是否通过每个物理处理器并获得该特定处理器的名称？我还没有看到一个实例是`foreach()`迭代移动不止一次......我曾经使用过`Win32_Processor`, `Win32_BIOS`, `Win32_ComputerSystem`, 等等......

在这种情况下，如果服务器有超过 1 个物理处理器，这`for-each`是否会有不止一个迭代？它是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:36:32.017

是的，这是真的，通过使用以下查询：

```
SELECT * FROM Win32_Processor 
```

每个物理处理器都有一个迭代。您可能有兴趣查看`DeviceId`,`SocketDesignation`和`NumberOfCores`属性。

# android - 如何限制 BroadcastReceiver onReceive 只为来电调用

> ID：13738716
> 
> 赞同：3
> 
> 时间：2012-12-06T07:17:47.370
> 
> 标签：android, broadcastreceiver

我有一个应用程序可以监听来电，并根据号码向该号码发送短信。一切都在传入`onReceive`被呼叫并发送短信，但一旦呼叫被被叫或呼叫方拒绝，`onReceive`再次呼叫并再次发送短信。我怎样才能限制这一点，所以当接到电话时才`onReceive`被叫？

以下是我的代码的简单版本：

我的广播接收器

导入 android.content.BroadcastReceiver；导入android.content.Context；导入android.content.Intent；导入android.util.Log；

```
public class Telephone extends BroadcastReceiver {

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        // TODO Auto-generated method stub

        Log.d("onReceive", "Got Call Signal");

    }

} 
```

在清单中：

```
 <receiver android:name="com.example.testbroadcastreceiver.Telephone" >
            <intent-filter android:priority="1000" >
                <action android:name="android.intent.action.PHONE_STATE" />
            </intent-filter>
        </receiver> 
```

使用的权限：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:27:27.410

您可以像这样在逻辑上处理它：

```
public class ServiceReceiver extends BroadcastReceiver {

  @Override    
  public void onReceive(Context context, Intent intent) {
    MyPhoneStateListener phoneListener=new MyPhoneStateListener();
    TelephonyManager telephony = (TelephonyManager) 
    context.getSystemService(Context.TELEPHONY_SERVICE);
    telephony.listen(phoneListener,PhoneStateListener.LISTEN_CALL_STATE);
  }
}

public class MyPhoneStateListener extends PhoneStateListener {
  public void onCallStateChanged(int state,String incomingNumber){
  switch(state){
    case TelephonyManager.CALL_STATE_IDLE:
      Log.d("DEBUG", "IDLE");
    break;
    case TelephonyManager.CALL_STATE_OFFHOOK:
      Log.d("DEBUG", "OFFHOOK");
    break;
    case TelephonyManager.CALL_STATE_RINGING:
      Log.d("DEBUG", "RINGING");
//place your sms code here
    break;
    }
  } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:27:52.257

您需要注册一个[PhoneStateListener.LISTEN_CALL_STATE](http://developer.android.com/reference/android/telephony/PhoneStateListener.html#LISTEN_CALL_STATE)以便在 BroadcastReceiver 中只接收来电：

```
public class Telephone extends BroadcastReceiver {

    private Context mContext;
    private Intent mIntent;

    @Override
    public void onReceive(Context context, Intent intent) {
        mContext = context;
        mIntent = intent;
        TelephonyManager tm = (TelephonyManager)              
                 context.getSystemService(Context.TELEPHONY_SERVICE);
        int events = PhoneStateListener.LISTEN_CALL_STATE;
        tm.listen(phoneStateListener, events);
    }

    private final PhoneStateListener phoneStateListener = 
                                                new PhoneStateListener() {
        @Override
        public void onCallStateChanged(int state, String incomingNumber) {
            String callState = "UNKNOWN";
            switch (state) {
            case TelephonyManager.CALL_STATE_IDLE:

                break;
            case TelephonyManager.CALL_STATE_RINGING:
                                // DO YOUR WORK HERE
                break;
            case TelephonyManager.CALL_STATE_OFFHOOK:
                          if(incomingNumber.length() >0){

                                  // incoming call
                                 // DO YOUR WORK HERE when call is received
                                 // SEND SMS HERE
                            }
                           else{
                                      // outgoing call
                              }
                break;
            }

            super.onCallStateChanged(state, incomingNumber);
        }
    };

} 
```

# html - \n 表示“下一行”，但我应该怎么做才能在同一行中创建一个空白制表符？

> ID：13738718
> 
> 赞同：-1
> 
> 时间：2012-12-06T07:17:53.627
> 
> 标签：html, xml

好的...基本上，我想要的是这个..

abcd12345 到

（空白）abcd12345

我知道 \n 确实创建了一个新行，但是应该在同一行中创建一个空白制表符空间？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:27:24.917

如果您的意思是“制表符空间”，就像按键盘上的**Tab**键一样，您可以使用`\t`

# java - 这两个字符串声明之间的区别

> ID：13738721
> 
> 赞同：-1
> 
> 时间：2012-12-06T07:17:59.853
> 
> 标签：java, string, declaration

```
Option 1
++++++++++
String s1;
String s2;
String s3; 
```

.

```
Option 2
++++++++++
String s1,s2,s3; 
```

我想知道声明字符串的前两种方式之间的实际区别是什么。？那里可能有任何内存或执行速度变化。？还是两者都一样。？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T07:30:12.203

我像下面一样检查自己。

```
public class Declare1 {
    String s1, s2, s3;
}

public class Declare2 { 
    String s1;
    String s2;
    String s3;
} 
```

编译每个 java 文件并用文本编辑器打开每个 Declare1.class,m Declare2.class.. the.. 除了无法识别的字符.. 完全相同。

```
Declare1
java/lang/Object s1 Ljava/lang/String; s2 s3 <init> ()V Code
LineNumberTable LocalVariableTable this 
LDeclare1; 
SourceFile 
Declare1.java

Declare2
java/lang/Object s1 Ljava/lang/String; s2 s3 <init> ()V Code
LineNumberTable LocalVariableTable this 
LDeclare2; 
SourceFile 
Declare2.java 
```

毕竟。编译制作一个完全相同的类文件。所以每个性能都是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:40:52.773

没有区别，就是口味问题。唯一的区别是定义数组的时候。例如

```
String[] s1, s2[], s3; 
```

在这种情况下`s1`and `s3`are`String[]`和`s2`is`String[][]`

# python - 仅在从另一个程序运行时出现 Unicode 错误？

> ID：13738722
> 
> 赞同：2
> 
> 时间：2012-12-06T07:18:01.117
> 
> 标签：python, unicode

我有一个显示温度的有趣程序。一切正常，直到我尝试从 Conky 使用它：

```
Traceback (most recent call last):
  File "/home/naftuli/Documents/i7zdaemon/get-i7z-value", line 85, in <module>
    main()
  File "/home/naftuli/Documents/i7zdaemon/get-i7z-value", line 28, in main
    get_temp_value(args)
  File "/home/naftuli/Documents/i7zdaemon/get-i7z-value", line 63, in get_temp_value
    print fmt % (temp if not args.in_fahrenheit else temp * (9.0/5.0) + 32, )
UnicodeEncodeError: 'ascii' codec can't encode character u'\xb0' in position 2: ordinal not in range(128) 
```

为什么这只会在从另一个程序中使用时抛出错误？当我直接从终端运行它时，一切看起来都很好。

这就是我正在做的事情：

```
fmt = u"%d\u00B0C" if not args.in_fahrenheit else u"%d\u00B0F"
# ...
print fmt % (temp if not args.in_fahrenheit else temp * (9.0/5.0) + 32, ) 
```

最后一行杀死了一切。是什么赋予了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:57:18.433

当您打印 unicode 时，必须对打印的文本进行编码以匹配用于输出流的任何编码。例如，对于 Linux 终端，现在通常是 UTF-8。

但是当您使用不同的程序来运行您的 python 脚本时，输出流编码（管道，或终端以外的程序窗口）可能会使用*不同*的编码。在这种情况下，似乎没有设置编码，python 然后回退到 ASCII。`\u00B0`字符无法编码为 ASCII 并且编码失败。

也许对于这个程序，打印一个小写`o`就足够了？

或者，正如[Conky FAQ](http://conky.sourceforge.net/faq.html)似乎建议的那样，明确编码为拉丁语 1 (ISO 8859-1) 以输出度数符号：

```
print (fmt % (temp if not args.in_fahrenheit else temp * (9.0/5.0) + 32, )).encode('latin1') 
```

[这个帖子](https://bbs.archlinux.org/viewtopic.php?pid=765995)似乎暗示编码为 UTF-8 也是一种选择（取决于 Conky 配置）？`latin1`在上面的示例中替换`utf8`为尝试该编码。

另请参阅[Python Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)，它指定了如何处理输出编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:32:16.523

尝试在 src 文件的顶部设置编码，如下所示：

```
# coding: UTF-8 
```

# android - Android：未输入尝试块

> ID：13738723
> 
> 赞同：1
> 
> 时间：2012-12-06T07:18:02.740
> 
> 标签：android

[我从http://www.labbookpages.co.uk/audio/javaWavFiles.html](http://www.labbookpages.co.uk/audio/javaWavFiles.html)下载了一个 WavFile 包

我想使用它来读取给定 *.wav 文件的数据块。因此，我在我的 android 项目中创建了一个新包并添加了这些类文件，然后在我的 android 项目中使用。代码片段如下所示：

```
 File f=new File("/sdcard/", "a.wav");
          Log.d(TAG, "File found");

            WavFile fp;
    try {
        fp = WavFile.openWavFile(f);
        Log.d(TAG, "Wav file found");
                    //Displays info about wav file
        fp.display();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (WavFileException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我的程序中没有错误，但是执行时输出只是第一个日志消息，而不是 try 块中的日志消息。这里也不例外。谁能告诉我这有什么问题。或提供另一种从 wav 文件中检索数据的方法。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:52:13.657

您的文件位置不对。

从 sdcard 打开文件如下：

```
File file = new File(Environment.getExternalStorageDirectory() + "a.wav"); 
```

或者将您的文件“a.wav”放在项目的 /res/raw 文件夹中，然后在 MediaPlayer 中打开它，如下所示：

```
 MediaPlayer mp = MediaPlayer.create(this, R.raw.a);
  mp.start(); 
```

# javascript - Javascript 和正则表达式验证

> ID：13738725
> 
> 赞同：0
> 
> 时间：2012-12-06T07:18:28.743
> 
> 标签：javascript, html, regex

我在尝试让 JavaScript 和 Regex 识别来自我正在处理的 HTML 文件的输入时遇到问题。

```
function validateSchoolClass(field)
{
if(field == "") 
{
    return "No class ID was entered.\n";
}
else if (field.length != 4)
{
    return "Class ID must be 4 characters.\n";
}
else if (/[^A-Z]{2}[^0-9]{2}/.test(field))
{
    return "Class Name must be two capital letters followed by two numbers.\n";
}
return "";
} 
```

我想要发生的是输入到传递的字段中将包含 4 个字符，前 2 个是大写字母，接下来的 2 个是数字。我不知道我是否遗漏了一些东西，但从我读过的所有内容来看，这应该可以工作，但它不起作用，并且传递的任何 4 个字符输入仍然算作有效！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:20:25.233

我会改变那个`else if`决赛

```
else if (!/^[A-Z]{2}[0-9]{2}$/.test(field)) 
```

该正则表达式测试两个大写字母后跟两个数字，然后我使用`!`反转结果，因此您可以报告不匹配的内容。（我还在开头和结尾添加了锚点，但是根据您之前的长度检查，它们在技术上可能是多余的。）

# coldfusion - MVC 的传出消息队列

> ID：13738731
> 
> 赞同：1
> 
> 时间：2012-12-06T07:19:18.823
> 
> 标签：coldfusion, qoq, fw1

我所有的 FW/1 控制器都扩展了扩展 base.cfc。在 base.cfc 中有一个名为**addMessage()**的函数。消息类似于“您已成功登录”。“您的数据有错误”、“处理请求时发生错误。

**addMessage()**将消息附加到一个名为`request.arMessage`（数组）的变量中。当我到达布局文件时，布局文件会遍历所有消息并将它们显示在页面上。

我正在考虑用`request.arMessage`request.qryMessage 替换。这样我就可以运行 QoQ 并按严重程度排序，而不是后进后出。见下文

```
void function addMessage(required string message, numeric priority=0) output="false"    {

param request.qryMessageQueue = QueryNew("Priority,Message", "integer,varchar");

QueryAddRow(request.qryMessageQueue);
QuerySetCell(request.qryMessageQueue, "Priority", arguments.priority);
QuerySetCell(request.qryMessageQueue, "Message", trim(arguments.message));
} 
```

这种方法是否与 MVC 和 FW/1 的做法一致？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:11:24.353

我不能代表 MVC 或 FW/1 的要求，但我可以告诉你如何做到这一点是你的 cfc。

与其构建一个数组，不如构建一个查询对象。然后用你的 Q of Q 对它进行排序。然后使用 ListToArray 和 ValueList 的组合来创建排序数组。

# data-access-layer - 在 web2py 中使用 IS_IN_DB 指定时不遵守唯一约束

> ID：13738733
> 
> 赞同：0
> 
> 时间：2012-12-06T07:19:29.260
> 
> 标签：data-access-layer, web2py

我定义了一个表如下：

```
db.define_table('special_users',
    Field('sp_user', db.auth_user, required=True, notnull=True, label='Special User', represent=lambda lead,row: lead.first_name + ' ' + lead.last_name, unique=True),
    format=lambda row: (row.lead.first_name + ' ' + row.lead.last_name) or 'N/A') 
```

我指定了 requires 约束如下

```
db.special_users.lead.requires = IS_IN_DB(db, db.auth_user, '%(first_name)s %(last_name)s', zero=None) 
```

现在，当我使用它为表生成表单时，我`SQLFORM(db.special_users)`可以根据需要多次添加用户，这违反了`unique=True`约束。我怎样才能纠正这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:13:36.480

出于某种原因，我认为可能 notnull 和唯一约束不会应用于引用字段。在任何情况下，如果插入通常是通过表单进行的，则最好[`IS_NOT_IN_DB()`](http://web2py.com/books/default/chapter/29/07#Database-validators)在字段上使用验证器，因为这将在处理表单时启用正确的错误处理和显示。仅依赖于`unique=True`重复插入尝试会导致异常，这将为最终用户生成非特定的 500 服务器错误。

# batch-file - 不知道如何将另一个值初始化为批处理文件中的变量

> ID：13738734
> 
> 赞同：0
> 
> 时间：2012-12-06T07:19:36.863
> 
> 标签：batch-file

```
@echo off
set test=%1

if "%1"=="" (
set test=default
echo %test%
) else (
set test=%1
echo %test%
) 
```

测试：

```
test.bat 
```

输出：

```
ECHO is off 
```

问题：不能将“默认”字符串作为值分配给变量“测试”。我发现测试字符串的值仍然是 %1 没有价值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T10:03:41.710

这是标准的批处理初学者错误。如您所料，括号中的百分比扩展不起作用。在解析完整块时，在执行任何行之前，它会扩展。

所以`%test%`被扩展为空，它进入块之前的值。

解决方案是在这里使用延迟扩展，因为`!test!`将在执行而不是解析时进行扩展。

```
@echo off
setlocal EnableDelayedExpansion
set test=%1

if "%1"=="" (
  set test=default
  echo !test!
) else (
  set test=%1
  echo !test!
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:28:51.600

我没有意识到它是这样工作的，但它似乎是一个范围问题，内部块中更改的值没有被传播。以下似乎工作正常：

```
@echo off

if "%1"=="" (
    set test=default
) else (
    set test=%1
)
echo %test% 
```

# jquery - jqgrid：如何为特定列设置编辑选项 false 并更新其值

> ID：13738740
> 
> 赞同：0
> 
> 时间：2012-12-06T07:20:12.817
> 
> 标签：jquery, asp.net-mvc, jqgrid

我有一个带有内联编辑的 jqgrid 工作正常，我的要求是我想禁用 studentId 的编辑选项，我为那个 studentId 列声明了可编辑：false，但是当我单击保存按钮时，我得到了错误......参数字典包含用于方法.....的不可为空类型“System.Int32”的参数“StudentId”的空条目

我的jQuery

```
 <script type="text/javascript">
    $(function () {
        var lastsel;

        jQuery("#list").jqGrid({
            url: '/Home/GetStudents/',
            datatype: 'json',

            mtype: 'POST',
            colNames: ['StudentID', 'FirstName', 'LastName', 'Email', 'Actions', ],

            colModel: [
      { name: 'StudentID', sortable: false, key: true,editable:false },
      { name: 'FirstName', key: true },
      { name: 'LastName', sortable: false, key: true },
      { name: 'Email', width: 200, sortable: false, key: true },
      { name: 'act', index: 'act', width: 75, sortable: false, editable: false}],
            cmTemplate: { align: 'center', editable: true },
            pager: '#pager',
            width: 750,
            rowNum: 15,
            rowList: [5, 10, 20, 50],
            sortname: 'StudentID',
            sortorder: "asc",
            viewrecords: true,
            caption: ' My First JQgrid',
            gridview: true,
            width: 850,

            gridComplete: function () {
                var ids = jQuery("#list").jqGrid('getDataIDs');

                for (var i = 0; i < ids.length; i++) {
                    var cl = ids[i];

                    be = "<input style='height:22px;width:20px;' type='button' value='E' onclick=\"jQuery('#list').editRow('" + cl + "');\"  />";
                    se = "<input style='height:22px;width:20px;' type='button' value='S' onclick=\"jQuery('#list').saveRow('" + cl + "');\"  />";
                    ce = "<input style='height:22px;width:20px;' type='button' value='C' onclick=\"jQuery('#list').restoreRow('" + cl + "');\" />";
                    jQuery("#list").jqGrid('setRowData', ids[i], { act: be + se + ce });
                }
            }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:37:14.987

目前尚不清楚哪些信息等待您的服务器部分。你可以尝试使用

```
prmNames: {id: "StudentID"} 
```

它将`id`当前发送到服务器的参数重命名为`StudentID`.

# rubygems - --no-ri --no-rdoc 默认

> ID：13738746
> 
> 赞同：0
> 
> 时间：2012-12-06T07:20:29.947
> 
> 标签：rubygems

有没有办法将选项 --no-ri --no-rdoc 作为默认选项，这样我就不必在生产服务器中随时键入它们？

我搜索了信息，但我找不到任何关于此的信息。

感谢，并有一个愉快的一天。

# javascript - 如果由输入元素设置 DatePicker 格式不起作用

> ID：13738747
> 
> 赞同：0
> 
> 时间：2012-12-06T07:20:33.283
> 
> 标签：javascript, jquery, formatting, datepicker, kendo-ui

我有实时更新输入值的可观察对象。问题是 Kendo DatePicker 不知道输入值何时更新，因此不会进行任何格式化。可以在此处查看此行为的示例：http: [//jsfiddle.net/basememara/kMkSd/](http://jsfiddle.net/basememara/kMkSd/)

```
$("#sampleDate1, #sampleDate2").kendoDatePicker({
    format: "dd MMM yyyy",
    parseFormats: ["yyyy/MM/dd"]
});
$("#sampleDate1").val('2012/09/25') //no formatting happens => 2012/09/25
$("#sampleDate2").data('kendoDatePicker').value('2012/09/25') //works => 25 Sep 2012 
```

DatePicker 期望我总是通过 Kendo 对象更新值。如何告诉 DatePicker 输入值已更新（但这不应该自动完成）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:04:33.420

这应该重新触发格式化功能：

```
$("#sampleDate2").data('kendoDatePicker').value($("#sampleDate2").val())
//Set the contents of #sampleDate2 to it's contents, through the kendoDatePicker 
```

# html - Chrome 将 div 移动 1 取决于窗口大小是奇数还是偶数 px

> ID：13738748
> 
> 赞同：1
> 
> 时间：2012-12-06T07:20:39.617
> 
> 标签：html, css, google-chrome

我在一个宽为 2205p 的大 div 中有三个 div。它居中并且比大多数屏幕都大。

其中两个 div 是绝对定位的，一个在左侧，一个在右侧。它们是半透明的。

第三个 div 的宽度为 2205p，包含一个宽度也为 2205p 的图像。此图像绘制的框与其他两个 div 应该在的位置相匹配。

在 IE9、Firefox 和 Safari 中运行良好。

但在 Chrome（Windows 或 Mac）中，如果窗口宽度为奇数像素，则位置会发生变化。（如果窗口宽度为偶数，则工作正常。

使用 chrome 并调整窗口大小以查看。

[http://nicecomputersny.com/chrome-bug.php](http://nicecomputersny.com/chrome-bug.php)

Chrome 正在将大 div 的大小从 2205px 更改为 2206px，我认为这是在创建这种效果。

编辑：我重新创建了宽度为 2206px 的 div 的问题，Chrome 没有更改 div 的大小，但问题仍然存在。

[http://nicecomputersny.com/chrome-bug2.php](http://nicecomputersny.com/chrome-bug2.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:53:26.747

我在另一个大 div 内的大 div 的背景（内联）css 规则中添加了“中心”。我猜这也是由于 claesv 建议的自动边距的舍入问题。

[http://nicecomputersny.com/chrome-bug3.php](http://nicecomputersny.com/chrome-bug3.php)

我的实际问题（我认为我已经重新创建）已使用建议的 javascript 修复。

# java - OnMessage 我想打开 Google Play android

> ID：13738750
> 
> 赞同：1
> 
> 时间：2012-12-06T07:20:47.077
> 
> 标签：java, android, google-cloud-messaging

我从 GCM 收到通知，当我收到通知时，我想显示 google play 以安装应用程序。

我尝试这样

```
 NotificationManager notificationManager = (NotificationManager) context
            .getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(icon, message, when);

    Intent notificationIntent = new Intent(Intent.ACTION_VIEW);
    notificationIntent.setData(Uri.parse("market://details?id=com.karya.kot"));
    notificationIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    PendingIntent intent = PendingIntent.getActivity(context, 0,                 notificationIntent, 0);
    notification.setLatestEventInfo(context, title, message, intent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notificationManager.notify( 0, notification); 
```

但是当我点击通知时，它不会去谷歌播放？我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T07:36:32.867

我已经在我的手机中测试了这段代码并且它正在工作

```
AudioManager audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
        int sb2value = audioManager.getStreamMaxVolume(AudioManager.STREAM_RING);
        NotificationManager notificationManager = (NotificationManager) getApplicationContext().getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.ic_launcher, "Testomg", System.currentTimeMillis() + 5000);

        Intent notificationIntent = new Intent(Intent.ACTION_VIEW);
        notificationIntent.setData(Uri.parse("market://details?id=com.karya.kot"));
        notificationIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        PendingIntent intent = PendingIntent.getActivity(getApplicationContext(), 0, notificationIntent, 0);
        notification.setLatestEventInfo(getApplicationContext(), "Google Play", "Download app", intent);

        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notificationManager.notify(0, notification); 
```

# c++ - 使用 std::initializer_list 参数将原始数组传递给函数

> ID：13738753
> 
> 赞同：0
> 
> 时间：2012-12-06T07:20:55.050
> 
> 标签：c++, c++11, initializer-list

使用以 std::initializer_list 作为参数的函数，如下所示

```
int sumOf(std::initializer_list<int> numbers) {
    int sum = 0;  
    for (auto x : numbers) {
        sum += x;
    }
    return sum;
} 
```

此代码有效

`auto sum = sumOf({ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 });`

但不是这个

```
 int i[]  = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
 auto x = sumOf(i); 
```

为什么第二种形式不起作用？还是我做错了什么？

**编辑：**
从 std::initializer_list 的 gcc 4.7.2 实现中，intializer_list 的构造函数是私有的，编译器需要传递数组的大小。

```
 // The compiler can call a private constructor.
  constexpr initializer_list(const_iterator __a, size_type __l)
  : _M_array(__a), _M_len(__l) { } 
```

我猜编译器在某些情况下无法从变量“i”判断数组的大小。如果是这样，编译器 (?) 不支持将静态数组传递给 intializer_list。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:21:21.580

`i`不是一个`initializer_list`。`initializer_list`不是“静态数组”的简写。这是一个特殊的对象，只能通过使用花括号初始化列表（即：`{...}`语法）来创建（在复制构造之外）。

当您这样做时，您正在对*数组*`int i[] = {...};`执行聚合初始化。是s 的数组，而不是.*`i``int``initializer_list`*

 *你想要的是一个模板函数，它可以接受任何你可以使用的基于范围的东西：

```
template<typename Rng>
int sumOf(const Rng &numberRange) {
    int sum = 0;  
    for (auto x : numberRange) {
        sum += x;
    }
    return sum;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T15:41:07.460

您可以执行索引元组技巧，就像许多人之前使用的那样

```
template<int N, int ...X>
struct I : struct I<N-1, N, X...> {};

template<int X...>
struct I<0, X...> {
  typedef I type;
};

template<typename F, typename T, int N, int ...X>
decltype(f(std::declval<std::initializer_list<T>>()))
make_list(T const (&a)[N], F f, I<X...>) 
{
   return f(std::initializer_list<T>{a[X]...});
}

template<typename F, typename T, int N>
decltype(f(std::declval<std::initializer_list<T>>()))
make_list(T const(&a)[N], F f) {
   return make_list(a, f, typename I<N-1>::type());
} 
```

使用简单

```
make_list(i, &sumOf); 
```

或使用 lambda

```
make_list(i, [](std::initializer_list<int> x) {
  return sumOf(x);
}); 
```*

# ios - 从 AppDelegate 更新 WebView 时出现 NSInvalidArgumentException

> ID：13738759
> 
> 赞同：0
> 
> 时间：2012-12-06T07:21:27.180
> 
> 标签：ios, webview, viewcontroller, appdelegate

我必须从 Appdelegate.m 更新我的 WebView

我这样尝试：

```
[self performSelectorOnMainThread:@selector(loadWebViewWithContent:) withObject:requestObj waitUntilDone:NO]; 
```

loadWebViewWithContent 方法在 ViewController.m 中效果很好，但在 Appdelegate 中效果不佳。

我已经在我的 Appdelegate.h 中写了这个：

```
-(void)loadWebViewWithContent:(NSURLRequest *)requestObj; 
```

怎么了？请帮我。我仍然是 IOS 的大菜鸟。

错误：

```
-[AppDelegate loadWebViewWithContent]: unrecognized selector sent to instance 0x1f86a5e0*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[AppDelegate loadWebViewWithContent]: unrecognized selector sent to instance 0x1f86a5e0' 
```

更新（新尝试）：`UIViewController *view = [[UIViewController alloc] init]; [view performSelectorOnMainThread:@selector(loadWebViewWithContent:) withObject:requestObj waitUntilDone:NO];`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:01:48.027

看来您`AppDelegate`本身就是在调用方法。`AppDelegate`但是调用中没有方法`loadWebViewWithContent:`

如果你想从 to 调用方法`AppDelegate`，`ViewController`你应该使用`ViewController`实例来调用该方法，像这样使用

`[viewController performSelectorOnMainThread:@selector(loadWebViewWithContent:) withObject:requestObj waitUntilDone:NO];`

# html - 使用 CSS3 只选择一个孩子

> ID：13738761
> 
> 赞同：2
> 
> 时间：2012-12-06T07:21:33.203
> 
> 标签：html, css, css-selectors

我有一个关于选择适当子节点的简单 CSS3 问题。

这是当前 HTML 元素结构的片段：

```
<nav>
    <ul>
        <li>
            <a href="#"><div class="adminNavButton"><p>Pages</p></div></a>
            <ul>
                <li><a href="#">Make a new page</a></li>
                <li><a href="#">Manage pages</a></li>
                <li><a href="#">Delete pages</a></li>
            </ul>
        </li>
and more .... </ul> </nav> 
```

在 CSS3 中，我试图选择只 `<a href="#"><div class="adminNavButton"><p>Pages</p></div></a>`使用

```
nav ul li a{
} 
```

但是，它会选择每个子锚标签，包括`<ul><li>`. 我必须给它一个类选择器来解决这个问题吗？IE

```
<nav>
    <ul>
        <li>
            <a class="something" href="#"><div class="adminNavButton"><p>Pages</p></div></a> 
```

如果您知道一种适用于所有浏览器的技术，如果您能与我分享，我将不胜感激。

提前致谢，

================================== 谢谢大家的评论，:first-child 和 :nth-child( 1）在我的主项目中不起作用，所以我创建了一个新项目并测试了该方法。但它不起作用所以这里是 HTML 结构和 CSS3。

```
<!DOCTYPE html>

<html>

<head>
    <meta charset="UTF-8">
    <title>asf</title>
    <style>
        ul li a:first-child{
            color: red;
        }
    </style>
</head>

<body>
    <ul>
        <li>
            <a href="">asf</a>
            <div>
                <a href="">asf</a>
            </div>
        </li>
        <li>
            <a href="">asfd</a>
            <div>
                <a href="">asf</a>
            </div>
        </li>
        <li>
            <a href="">asf</a>
            <div>
                <a href="">asf</a>
            </div>
        </li>
    </ul>
</body>

</html> 
```

hmm heh =/（ps 我在 Firefox 和 Chrome 浏览器上测试过，但没有用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:25:35.927

您可以使用[第一个子](http://www.w3.org/wiki/CSS/Selectors/pseudo-classes/%3afirst-child)伪类：

```
nav > ul > li > a:first-child
{

} 
```

另一个可以满足您需求的选项是`>`选择器：

```
nav > ul > li > a
{

} 
```

以上仅适用于`Pages`锚点。是子选择器，`>`因此元素必须是直接子元素，这与使用针对所有后代的空间不同。如果您有兄弟姐妹，`Pages`那么这些兄弟姐妹也将成为目标，而第一个示例则不会。

**[jsFiddle 演示](http://jsfiddle.net/3MJY8/)**

来自[W3C 文档](http://www.w3.org/wiki/CSS/Selectors/pseudo-classes/%3afirst-child)：

> :first-child 伪类表示一个元素，它是某个其他元素的第一个子元素。与 :nth-child(1) 相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:24:36.117

这应该可以解决问题：

```
nav ul li a:first-child{
} 
```

你也可以使用一个类，但如果结构保持不变（在第一个位置），上面的例子是最好的路线。

# javascript - 如何在我的项目中单独使用 Twitter 引导脚本？

> ID：13738763
> 
> 赞同：0
> 
> 时间：2012-12-06T07:21:48.867
> 
> 标签：javascript, jquery, css, twitter-bootstrap

如何在我的项目中使用**Twitter Bootstrap 脚本**（如 scrollspy、affix ...）而不包含所有 bootstarp CSS 和 JS。我尝试使用 scrollspy.js，但在所有示例中，它们都包含完整的 bootstrap.css 并且更改了我的模板，并且事件脚本不起作用！（总是选择最后一个导航栏元素。）有什么明确的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:23:23.267

您至少需要包含`jquery.js`才能使 Bootstrap 插件正常工作。您还可以仅包含引导 CSS 的某些部分。下载 git 会给你几十个单独的`.less`文件。在您的情况下，您可以简单地抓取`variables.less`并`scrollspy.less`创建您的 CSS 文件，其中仅包含您实际需要的那些部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:52:33.440

在动画、过渡和其他效果方面，Twitter Bootstrap 与 css 结合得非常紧密。但是 JS 文件本身应该适用于大多数情况，因为它们以类或数据属性为目标。只需在没有 CSS 文件的情况下包含 JS 文件并添加与您的项目一起使用所需的类，您应该获得所需的功能而无需引导样式。

# pagination - FuelPHP：搜索结果中的分页

> ID：13738765
> 
> 赞同：0
> 
> 时间：2012-12-06T07:21:54.893
> 
> 标签：pagination, fuelphp

我遇到了分页问题。实际上，文档并没有说明如何实现它。我有一个显示搜索结果的搜索页面。我希望它分解成页面，因为如果有很多数据，它们可以编译很多。

按照教程，这是我的控制器（为方便起见，我将其粘贴在 pastebin 上）： http: [//pastebin.com/9yqYdPuE](http://pastebin.com/9yqYdPuE)

这是我的看法 [http://pastebin.com/x5jUL5n4](http://pastebin.com/x5jUL5n4)

还有我的模型 [http://pastebin.com/C6fxNX5C](http://pastebin.com/C6fxNX5C)

如您所见，分页显示良好：http: [//screencast.com/t/U7lh3UwPQH](http://screencast.com/t/U7lh3UwPQH)

我还在 router.php 上路由它，因为如果您按预期单击两个，它会在 uri 中添加 /:number，因此我将其添加。

当然，当我点击它时，我只是被定向到一个空白的搜索页面。我认为这是因为单击两个时未传递搜索参数，因为 $_POST 为空。

那么我能做些什么来完成这项工作呢？我应该将表单方法更改为 GET 而不是 POST 吗？我在模型中遗漏的任何其他东西？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:19:42.853

Fuel 的分页不关心 $_POST 参数。

所以你需要自己去关心它。例如，更改在单击时使用 JavaScript 发布参数的分页模板。

# android - What am I missing in this intent registration?

> ID：13738766
> 
> 赞同：1
> 
> 时间：2012-12-06T07:21:58.553
> 
> 标签：android, usb

I'm in ICS and am attempting to get a receiver attached that will be called when a USB device and/or accessory is plugged in/out of the tablet.

Based on the documentation and other Stack questions, it *looks like all I should need is the code beneath, however when I run this code nothing happens... it's hard to tell, cause my device has the USB accessory being plugged into/out of it, so my debugging is just me writing stuff to file, rather than actual debugging, but it doesn't *appear to do anything at all.

```
 IntentFilter attachFilter = new IntentFilter();
  attachFilter.addAction(ACTION_USB_PERMISSION);
  attachFilter.addAction(UsbManager.ACTION_USB_ACCESSORY_ATTACHED);     
  registerReceiver(mAttachReceiver, attachFilter);

  IntentFilter detachFilter = new IntentFilter();
  detachFilter.addAction(ACTION_USB_PERMISSION);
  detachFilter.addAction(UsbManager.ACTION_USB_ACCESSORY_ATTACHED);
  registerReceiver(mDetachedReceiver, detachFilter); 
```

the receivers look like this (I've cut them down for brevity but they're valid receivers)...

```
private final BroadcastReceiver mAttachReceiver = new BroadcastReceiver() {
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        logMsg("ACTION = " + action);
        ... } 
```

}

And my manifest contains this entry:

```
<uses-feature android:name="android.hardware.usb.host" /> 
```

Is there something I'm missing? I've tried ACTION_USB_DEVICE_ATTACHED instead of ACCESSORY but that doesn't seem to produce any different results. Also, I CAN talk to the device in the app once its attached, so, it's being recognized and the subsequent code that sends/receives messages from the attached device (it's a NFC card reader) works as expected. The only thing that is persistently failing is the notification of the initial cable connection.

TIA

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T07:58:16.793

`ACTION_USB_DEVICE_ATTACHED` can only be a intent filter for an Activity and not a BroadCastReciever.

The UsbManager only resolves activities(neither service not BroadcastReciever) and launches them.

So you are not recieving any broadcast.

**Edit:** Android Developer site does say its a broadcast, but Android Source is only resolving activities. Though you can use `ACTION_USB_ACCESSORY_DETACHED` for detach updates in reciever

**Edit2**: There is nothing wrong in your code as far as Receiver is concerned. Your code is not working due to the way in which USB_ACCESSORY_ATTACHED is broadcast. The USB_ACCESSORY_ATTACHED is not a broadcast in true sense, Android Frameworks only launches the intent for activities, so you are not receiving the intent in broadcast Receiver.

You can only use Activity for ATTACHED Intent and not receiver

```
<activity android:name=".YourActivity" android:label="@string/app_name">
    <intent-filter>
        <action android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED" />
    </intent-filter>

    <meta-data android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED"
               android:resource="@xml/accessory_filter" />
</activity> 
```

# android - Android HttpURLConnection POST 给出 HTTP 错误 411

> ID：13738769
> 
> 赞同：3
> 
> 时间：2012-12-06T07:22:10.630
> 
> 标签：android, android-emulator, android-networking

我在 POST 请求和在模拟器上运行时遇到问题。

设备问题：发送 POST 请求时，我收到此 411 错误（需要内容长度）。添加该请求属性没有帮助。

模拟器问题：向 Web 客户端键入 REST url 时，它可以工作。但是当使用应用程序客户端运行它时，我得到了 UnkownHostExpection。

到目前为止，我对如何解决我的问题一无所知，所以我希望你能指出一些解决这些问题的技巧。

谢谢。

以下是相关代码：

```
 URL url = new URL("http://etc..");

    HttpURLConnection conn = (HttpURLConnection) url.openConnection();

    conn.addRequestProperty("Accept", "application/json");
    conn.addRequestProperty("Content-Type", "application/json");
    conn.setRequestProperty("Accept-Charset", CHARSET_UTF8);

    conn.setRequestMethod("POST");
    conn.setDoOutput(true);
    conn.setChunkedStreamingMode(0);
    conn.getOutputStream().write(myPostParams.getBytes(CHARSET_UTF8));

    conn.connect(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:46:48.690

您是否尝试过设置使用 setFixedLengthStreamingMode() 而不是 setChunkedStreamingMode(0)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-21T06:16:10.700

这个“ `setFixedLengthStreamingMode()`”对我有用

# drupal - 尝试在不使用视图的情况下在 Drupal 7 中的页面模板上显示字段类型的项目列表

> ID：13738771
> 
> 赞同：2
> 
> 时间：2012-12-06T07:22:29.597
> 
> 标签：drupal, drupal-7

我对此一无所知，所以我希望这里有人能指出我正确的方向。我有一个名为portfolio_item 的内容类型，其中包含一个名为field_portfolio_description 的文本字段。我正在尝试在不使用视图的情况下打印该字段存在的每个值的列表。这是我的 template.php 文件中的 preprocess_page 函数：

```
function blocks_preprocess_page(&$vars, $hook) {
  $node = menu_get_object();
  if ($node->type == 'portfolio_item') {
    $portfolios = field_get_items('node', $node, 'field_portfolio_description');
    $items = array();
    foreach ($portfolios as $folio) {
      $items['data'] = $folio['value'];
    }
    $vars['description'] = theme('item_list', array('items' => $items));
  }
} 
```

最后我试图在我的页面模板上调用它，如下所示：

```
<?php print render($description); ?> 
```

我尝试了几种不同的变体都无济于事。任何帮助/建议将不胜感激。

更新：好吧，我终于得到了一些调试结果。我收到以下错误：注意：尝试在 blocks_preprocess_page() 中获取非对象的属性（/sites/all/themes/blocks/template.php 的第 24 行），这是第 24 行：

```
if ($node->type == 'portfolio_item') { 
```

Portfolio_item 是内容类型的机器名称，所以这不是问题。

更新 2：好的，所以我已经将函数一直剥离到 $node = menu_get_object(); 行并执行了 var_dump（dpm 不工作）并发现非对象错误导致在访问页面时，portfolio_item 不存在于输出中。唯一存在的投资组合项目是在访问实际投资组合项目时。

因此，我会以完全错误的方式来解决这个问题。Views 似乎也不允许我显示该字段中项目的简单列表。

稍后我可能会重新讨论这个问题，如果我找到解决方案，我一定会发布最终代码。再次，如果其他人有想法，我愿意尝试。再次感谢那些插话的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:38:13.810

`hook_preprocess_page()`已经获得了一个节点对象；无需再次加载它。然后，您的代码仅使用文本字段中包含的值之一，即使它循环遍历数组内容，因为它始终将值保存在`$items['data']`.

您应该编写的代码类似于以下代码。

```
function blocks_preprocess_page(&$vars, $hook) {
  $items = array();

  if (!empty($vars['node']) && $vars['node']->type == 'portfolio_item') {
    $portfolios = field_get_items('node', $vars['node'], 'field_portfolio_description');
    foreach ($portfolios as $folio) {
      $items[] = $folio['value'];
    }

    $vars['description'] = theme('item_list', array('items' => $items));
  }
} 
```

您可以安全地将字符串传递给`render()`，因为它首先检查它获取的参数的数据类型。

```
function render(&$element) {
  if (is_array($element)) {
    show($element);
    return drupal_render($element);
  }
  else {
    // Safe-guard for inappropriate use of render() on flat variables: return
    // the variable as-is.
    return $element;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:52:29.213

尝试这个：

```
$node = menu_get_object();
if ($node->type == 'portfolio_item') {
  $portfolios = field_get_items('node', $node, 'field_portfolio_description');
  $vars['description'] = array(
    '#theme' => 'item_list',
    '#items' => $portfolios
  );
} 
```

为了使用渲染函数，你必须传递一个渲染数组。field_get_items 函数已经返回一个数组或可渲染元素。然后你所要做的就是将它的返回值传递到一个结构正确的渲染数组中。然后，渲染函数会将其转换为标记。

```
theme('item_list', array('items' => $items)); 
```

此主题函数调用返回标记，因此您无需通过渲染函数传递它。您的代码不起作用的另一个原因是因为您在每次迭代时都重置了 $items['data'] 值

```
$items['data'] = $folio['value']; 
```

应该

```
$items['data'][] = $folio['value']; 
```

上面的解决方案应该为你做，它是 Drupal 7 渲染标记的方式

请参阅：Drupal 7 中的渲染数组 - [http://drupal.org/node/930760](http://drupal.org/node/930760)

# linux - Windows 文件命名问题

> ID：13738777
> 
> 赞同：1
> 
> 时间：2012-12-06T07:22:51.313
> 
> 标签：linux, windows, wordpress, svn

我有一个在 Linux 上制作的 wordpress 设置，现在我正在尝试在 Windows 上进行 svn checkout。
这造成了一个问题，因为在 Linux 上进行设置的人为某些文件保留了相同的名称，但大小写不同（文件名类似于**File_name.jpg 和 file_name.jpg**。）现在在 Windows 上进行更新时会引发错误因为它认为该文件已经存在。
有没有简单的方法来解决这个问题？目前我正在从 SVN 中删除重复文件，将重命名并稍后添加它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:04:50.533

据我所知，没有“快速解决方案”。想想看，SVN 不知道将文件重命名为什么。我不知道 SVN 有任何“自动修复案例问题”脚本。

但是您应该联系在 Linux 上进行设置的人并告诉他们这个问题。他们可能不知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:14:59.520

我认为无论在 Windows 还是 Linux 中，都应该首先删除同一目录下名为**File_name.jpg**和**file_name.jpg的文件。**即使 Linux 区分大小写，文件名仍然令人困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T08:42:33.077

您需要重命名文件，因此无论大小写如何，它们都是不同的。您可以直接在服务器上执行此操作，无需删除并重新添加它们。使用类似的东西`svn mv svn+ssh://example.com/repos/trunk/File.Txt svn+ssh://example.com/repos/trunk/file.txt`来做到这一点。

# c# - 列出客户端打印机

> ID：13738782
> 
> 赞同：2
> 
> 时间：2012-12-06T07:24:04.103
> 
> 标签：c#

如何使用 c# 在 asp.net 中列出客户端打印机？

我的代码：这将列出连接到服务器的打印机。

```
ManagementScope scope = new ManagementScope(@"\root\cimv2");
scope.Connect();
ManagementObjectSearcher searcher = new ManagementObjectSearcher("SELECT * FROM Win32_Printer");
foreach (ManagementObject printer in searcher.Get())
{
    string printerName = printer["Name"].ToString().ToLower();
    Response.Write("chethann            ");
    Response.Write(printerName);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:36:15.693

```
PrinterInformation info = new PrinterInformation();
var printers = info.GetPrinters();
foreach (var printer in printers)
{
Response.Write(string.Format("Machine Name : {0} - Printer Name: {1}", Environment.MachineName, printer.DeviceName));
} 
```

# java - 为什么有些 Java 代码会再次导入同一个包？

> ID：13738784
> 
> 赞同：8
> 
> 时间：2012-12-06T07:24:13.343
> 
> 标签：java, import, playframework

> **可能重复：**
> [Java 导入混淆](https://stackoverflow.com/questions/1335327/java-import-confusion)

当我阅读播放框架文档时，我发现了这一点。

```
import play.*;
import play.mvc.*; 
```

在第一行本身，他们已经导入了 play 包下的所有类。那么第二行有什么用。检查此[链接](http://www.playframework.org/documentation/2.0/JavaGlobal)。转到“提供应用程序错误页面”部分。

如果我在进口概念上错了，请纠正我。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-06T07:26:46.503

> 如果我在进口概念上错了，请纠正我。

你是。

像这样的东西：

```
import foo.bar.*; 
```

*仅从*包中导入类型`foo.bar`。它*不会*从“子包”中导入，例如`foo.bar.baz`.

测试这个很容易：

```
import java.util.*;

class Test {
    public void foo() {
        Pattern p = null;
    }
} 
```

这不会编译，但如果你添加：

```
import java.util.regex.*; 
```

那么它会的。

Java 并没有真正将包视为形成层次结构。*作为人类，我们*确实如此，但就 Java 语言而言，包`java.util`和包`java.util.regex`完全不相关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T07:26:40.697

```
import play.*; 
```

将导入其中的所有类型；子包内的除外。

```
import play.mvc.*; 
```

将导入`mvc`包内的所有类型，这是`play`.

您会发现这个答案也很有帮助：[Java 导入混淆](https://stackoverflow.com/questions/1335327/java-import-confusion)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T07:29:23.347

第一行将导入同级别游戏中的所有类、枚举和接口。* 但没有子包。因此，您需要第二行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T07:31:11.623

它们是不同的包。Java中没有子包的概念。play.* 导入的类也可能在工作中。*。从 JVM 的角度来看，它们与 play.mvc.* 下的类无关。命名约定只是为了方便您了解这些包是相关的，而 play.mvc 可能在很大程度上依赖于 play。

# json - 在javascript中动态创建jsonp对象（发送json对象到跨域）

> ID：13738790
> 
> 赞同：1
> 
> 时间：2012-12-06T07:24:52.760
> 
> 标签：json, jquery, cross-domain, jsonp

我正在尝试将 json 对象发送到 servlet 。

但它显示如下错误： **XMLHttpRequest cannot load http://192.168.10.113:8080/collective-intellegence/SaveFeedback。Origin http://192.168.9.185 是 Access-Control-Allow-Origin 不允许的**

**我的代码**

```
var feedbackData = [];

        for (j in storeData.collection) {
            var fromData="abc";
            feedbackData.push({
                "queryid": queryId,
                "from": fromData,
                "to": GetUserDetails(storeData.item(j)),
                "isresolved": document.getElementById(("chk" + j)).checked
            });
        }
$.ajax({
                type: 'POST',
                url: saveDataURL,
                data: "{ 'feedback': '" + feedbackData + "' }",
                dataType: 'json',
                success: function (data) {
                    alert('Success');
                },
                error: function () {
                    alert('Error');
                }
            }); 
```

这显示错误

我用谷歌搜索，发现我们无法将 json 对象传递给跨域。

所以我决定创建一个可以传递给跨域的 jsonp 对象。

请帮助解决问题

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:28:35.080

您必须将数据类型更改为**JSONP**

```
function hello(data){ // my call back function
            console.log(data);
        }

        $(function(){
            //It's not actually working, but htis code should work well
            //Let's say that you put your docStats in an object
            //like docStats = data.response.clickStats.docStats

            $.ajax({
                url:'http://example.com',
                type : 'POST' ,
                dataType: 'jsonp',
                data : {
                    fq: 'param1',
                    wt: 'param2',
                    "json.wrf" : 'hello' // how i call my callback function

                }
            });

        }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:34:31.337

您应该阅读 JSONP 的工作原理：[http ://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

由于 JSONP 通过创建标签来工作，因此您只能将 JSONP 与 GET HTTP 方法一起使用，而不是 POST。**您使用 JSONP发送**的所有数据都在 URL 查询参数中发送（因为 GET 请求没有正文）。

我认为您应该检查 CORS 并检查它是否是解决跨域问题的好方法：[http ://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

# html - 在asp文件中使用html标签

> ID：13738791
> 
> 赞同：0
> 
> 时间：2012-12-06T07:24:53.237
> 
> 标签：html, asp-classic

嘿，我正在编写一个小项目网站。

我遇到了一个非常烦人的问题。

我正在用 ASP 编写服务器端页面，并在 babyweb 服务器上运行它。

有时当我在 asp 文件中编写 HTML 标签时，一切正常。

但有时当我编写 HTML 标签时会遇到问题，当我尝试加载页面时，它会说：

> 在第 0 行检测到脚本错误。
> **源行**：`Response.Write " "`
> **描述**：未完成的字符串常量

我想这意味着我必须贴上`Response.write`每个 html 标签，

因为当我将 HTML 标签更改为此

（例如，`<html>`到`<% Response.write "<html>"%>`）。

那是什么？也许babyweb服务器有问题？有办法解决吗？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:41:07.867

在你的例子中......

```
<% Response.write "< html>"%> 
```

间距不对，试试...

```
<% Response.write "<html>" %> 
```

请注意，我在结束标记之前添加了一个空格...“%>”

# php - 从 1.5 到 1.7 的 Magento 产品数据传输

> ID：13738793
> 
> 赞同：-1
> 
> 时间：2012-12-06T07:25:00.013
> 
> 标签：php, database, magento, magento-1.5, magento-1.7

我在 Magento 1.7 中制作了网站，我的旧网站在 Magento 1.5 中。现在我想将我所有的产品数据从 Magento 1.5 导入 Magento 1.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:21:30.137

如果您尚未删除旧的 magento 站点，则需要通过转到 Magento Admin > System > Import/Export > Export 下载产品 csv 文件

然后在您的新 Magento 1.7 安装中，您可以通过转到 Admin > System > Import/Export > Import 来导入产品 csv 文件

希望这会帮助你。

# java - 将文本文件中的数据显示到 JTable

> ID：13738794
> 
> 赞同：2
> 
> 时间：2012-12-06T07:25:25.213
> 
> 标签：java, swing, jtable, nullpointerexception, abstracttablemodel

我的文本文件包含以下数据：sample.txt
MEMHEAD 1 1 NA SetString srcCode

MEMHEAD 1 2 NA SetString memIdnum

LGLNAME 1 5 NA SetString onmfirst

我创建的`MyClassModel`类扩展`AbstractTableModel`为：

```
 public class MyClassModel extends AbstractTableModel 
{

    Vector data;
    Vector columns;
    public MyTableModel() {
            String line;

            try {
                    FileInputStream fis = new FileInputStream("sample.txt");
                    BufferedReader br = new BufferedReader(new InputStreamReader(fis));
                    StringTokenizer st1 = new StringTokenizer(br.readLine(), ",");
                    while (st1.hasMoreTokens())
                           columns.addElement(st1.nextToken());
                    while ((line = br.readLine()) != null) {
                            StringTokenizer st2 = new StringTokenizer(line, ",");
                            while (st2.hasMoreTokens())
                                    data.addElement(st2.nextToken());
                    }
                    br.close();
            } catch (Exception e) {
                    e.printStackTrace();
            }
    }

    public int getRowCount() {
            return data.size() / getColumnCount();
    }

    public int getColumnCount() {
            return columns.size();
    }

    public Object getValueAt(int rowIndex, int columnIndex) {
            return (String) data.elementAt((rowIndex * getColumnCount())
                            + columnIndex);
    }
}
} 
```

通过这种方式，我从文件中检索数据。现在，当我`JTable`使用`table.setModel(MyTableModel)`. 我得到一个`NullPointerException`.

继续：

文本文件数据显示在 JTable 中，但 JTable 还包含一些带有一些垃圾数据的额外行，当我按下这些行时 `java.lang.ArrayIndexOutOfBoundsException: 180 >= 180`，会引发此异常。但是，我发现线路有问题

```
public Object getValueAt(int rowIndex, int columnIndex) {
        return (String) data.elementAt((rowIndex * getColumnCount()) + columnIndex);
} 
```

但不知道是什么问题。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:42:08.037

您正在向两者添加数据`Vectors`而不初始化它们。

```
Vector data;
Vector columns; 
```

在添加元素之前初始化它们。

```
Vector data = new Vector();
Vector columns = new Vector(); 
```

执行此操作后检查您是否收到[NullPointerException](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/NullPointerException.html)。

如果你仍然得到`NPE`那么我怀疑你没有初始化`JTable`。因此，发布代码以使我们知道异常的确切位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:52:58.667

文本文件中的数据也可以使用 DefaultTableModel 添加到 JTable 中。这是执行此操作的简单有效的方法。

```
 FileInputStream fis = new FileInputStream("sample.config");
        BufferedReader br1 = new BufferedReader(new InputStreamReader(fis));
        DefaultTableModel dtm= new DefaultTableModel(0,6);  
    // (for each line in file)
    while ((line = br1.readLine()) != null) 
          {
    dtm.addRow(line.split(" ")); 
     }
    br.close();
    dtm.setColumnIdentifiers(new Object[] { "Attribute"," #","Position",         "Transformation","Assignment","Field","Constant" }); 
```

# jquery - 删除文本框中的部分字符串

> ID：13738798
> 
> 赞同：0
> 
> 时间：2012-12-06T07:25:44.927
> 
> 标签：jquery

我有几个类名为“检查”的文本框。它已经有 '12/12/2001 00:00:00' 字符串。我想从每个文本框中删除 '00:00:00' 部分。我如何从 jquery 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:28:57.243

只需获取值并在第一个空格处截断它。

```
$("input.check").each(function() {
    var index = this.value.indexOf(" ");
    if (index >= 0) {
        this.value = this.value.substring(0, index);
    }
}); 
```

您可以使用更短的代码来完成它`split`，但它更难：

```
$("input.check").each(function() {
    this.value = this.value.split(' ')[0];
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:30:58.600

这应该可以解决问题

```
$('input.check').each( function() {
    var elem = $(this);
    var value = elem.val().split(' ')[0];
    elem.val(value);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T07:31:14.807

不知道您的服务器端代码，您可能会这样做

```
$(document).ready(function () {
    $('.check').each(function () {

            $(this).val($(this).val.replace(" 00:00:00",""));

    }) }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T07:31:40.003

**jQuery/Javascript**

```
var val = $(".check").val();
$(".check").val(val.substring(1, val.indexOf("00:00:00")-1)); 
```

**HTML**

```
<input class="check" value="12/12/2001 00:00:00"/> 
```

示例：http: [//jsfiddle.net/VkcFm/](http://jsfiddle.net/VkcFm/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-06T07:30:28.217

```
$('.check').each(function(i){
  var checkValue= $(this).val();
  checkValue.replace('00:00:00','');
  $(this).val(checkValue);
}); 
```

试试这个代码

# android - 将动态线性布局添加到列表视图

> ID：13738799
> 
> 赞同：1
> 
> 时间：2012-12-06T07:25:45.767
> 
> 标签：android, listview

我正在使用列表视图在其上显示一些数据并将其与自定义适配器一起使用，现在在某个时间实例中，我想将图像视图显示为其中的列表项。对于这种情况，我制作了动态线性布局并在其中添加了图像视图。现在我希望在某些情况下，这个图像视图布局应该作为列表视图的最后一个列表项显示为添加到列表中的新项目。

动态生成布局

```
LinearLayout linearLayout = new LinearLayout(UserChatActivity.this);

            LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
                     LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);

            ImageView img = new ImageView(UserChatActivity.this);
            img.setImageBitmap(BitmapFactory.decodeFile(picturePath));

            linearLayout.addView(img, layoutParams);

            mList.addView(linearLayout); 
```

但它给出了一个名为： - 视图不能直接添加到适配器视图中的错误。我知道我们必须为适配器膨胀视图，但是如何使用列表中的先前数据添加新视图。？？？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T07:30:20.337

我认为[MergeAdapter](https://github.com/commonsguy/cwac-merge)完美地解决了您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T07:41:05.717

您可以试试这个，将代码放入适配器中的 getView() 中。

```
if (view == null) 
{
LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    view = vi.inflate(R.layout.list, null);
                    **// list.xlm is your layout**
} 

**lnHolder is in list.xml**
LinearLayout lnHolder = (LinearLayout ) view.findViewById(R.id.lnHolder);

LinearLayout linearLayout = new LinearLayout(UserChatActivity.this);

LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
                         LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);    
ImageView img = new ImageView(UserChatActivity.this);
img.setImageBitmap(BitmapFactory.decodeFile(picturePath));   
linearLayout.addView(img, layoutParams);
 lnHolder.addView(linearLayout); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T07:45:01.243

您的 getView() 方法将如下所示，

```
public View getView(int position, View convertView, ViewGroup parent) {

            if (position == 10) //if you already know the position use static position
                //  else mydatalist.get(position).hasImage()== true and 
                // make one function hasImage in your data structure which checks weather its a image or text 
            {
                convertView = _inflater.inflate(R.layout.simplelinearlayout,
                        null);

                LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
                        LinearLayout.LayoutParams.WRAP_CONTENT,
                        LinearLayout.LayoutParams.WRAP_CONTENT);

                ImageView img = new ImageView(UserChatActivity.this);
                img.setImageBitmap(BitmapFactory.decodeFile(picturePath));

                convertView.addView(img, layoutParams);
            } else {
                if (convertView == null) {
                    convertView = _inflater.inflate(R.layout.missingitem_row,
                            null);
                    viewHolder = new ViewHolder();
                    viewHolder.textTitle = (TextView) convertView
                            .findViewById(R.id.txtTitle);

                    convertView.setTag(viewHolder);

                } else {
                    viewHolder = (ViewHolder) convertView.getTag();
                }

                viewHolder.textTitle.setText(messageText);
            }
            return convertView;
        } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-06T08:23:28.167

notifyDataSetChange() 方法用于更新适配器

[listView 动态添加项](https://stackoverflow.com/questions/1998483/listview-dynamic-add-item)

# oracle - 在 Oracle 过程中运行 DDL - ORA-06508 - 如何在运行时重新编译？

> ID：13738800
> 
> 赞同：2
> 
> 时间：2012-12-06T07:25:47.120
> 
> 标签：oracle, plsql, procedure, ddl

我有一个 oracle 程序，它调用了一些其他程序。

程序
1 程序 2
程序 3
..

现在发生的是在后续过程 3 及以后的过程中使用的一些从属表上`PROCEDURE2`执行 DDL ( )。`EXECUTE IMMEDIATE 'DDL PROCESS'`这运行良好，直到它击中`PROCEDURE3`它抛出的地方`ORA-06508 - Program / Unit being called not found`。

我们不能修改它以不使用 DDL，我们必须使用它们。我曾尝试在 DDL 语句之后重新编译，但它不起作用（`ALTER PROCEDURE PROCEDURE3 RECOMPILE`）无论是 in`PROCEDURE1`还是 in `PROCEDURE2`.

我怀疑它`PROCEDURE1`本身变得无效并且在运行时编译它会导致无限循环。我试过了，不行。

所以我需要使用一些技巧，在对依赖对象完成 DDL 之后，使这些过程在运行时再次有效。

提前感谢参与回答的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:56:45.087

在这种情况下，与许多其他情况一样，创建一个包而不是一堆独立的程序会更好。包打破依赖链。这是一个例子：

```
 SQL> create table tb_t(
     2    col1 number
     3  )
     4  ;

    Table created 
```

1.  独立程序

    ```
    SQL> create or replace procedure Proc1
      2  is
      3  begin
      4    execute immediate 'alter table tb_t add (col2 number)';
      5  end;
      6  / 
    ```

    创建的程序

    ```
    SQL> create or replace procedure Proc2
     2  is
     3    l_var number;
     4  begin
     5    select count(*)
     6      into l_var
     7      from tb_t;
     8    dbms_output.put_line(to_char(l_var));
     9  end;
     10  /

     Procedure created

     SQL> begin
      2    proc1;
      3    proc2;
      4  end;
      5  / 
    ```

我们得到

```
 ORA-06508: PL/SQL: could not find program unit being called 
```

1.  包裹

    ```
    SQL> create or replace package test_pkg
      2  is
      3    procedure proc1;
      4    procedure proc2;
      5  end;
      6  /

    Package created

    SQL> create or replace package body test_pkg
      2  is
      3    procedure proc1
      4    is
      5    begin
      6      execute immediate 'alter table tb_t add (col3 number)';
      7    end;
      8  
      9    procedure proc2
     10    is
     11     l_var number;
     12    begin
     13      select count(*)
     14        into l_var
     15        from tb_t;
     16      dbms_output.put_line(to_char(l_var));
     17    end;
     18  
     19  end;
     20  /

     Package body created

     SQL> begin
       2    test_pkg.proc1;
       3    test_pkg.proc2;
       4  end;
       5  /

       0

       PL/SQL procedure successfully completed 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:49:44.240

```
alter procedure PX3 compile; -- not "recompile" 
```

这按预期工作：

```
set serveroutput ON

create table X as select 42 A from DUAL;

create procedure PX3
as
  a int;
begin
  select max(A) into a from X;
  dbms_output.put_line(a);
end;
/

create procedure PX2
as
begin
  execute immediate 'alter table X add (B int)';
  execute immediate 'alter procedure PX3 compile';
  PX3;
end;
/

create procedure PX1
as
begin
  PX2;
end;
/

begin
  PX1;
end;
/

drop procedure PX1;
drop procedure PX2;
drop procedure PX3;
drop table X; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:06:00.693

如果我没记错的话，与 Oracle >=10 相比，Oracle 9 在依赖和失效方面更加严格。

我在 Oracle 9 中遇到过一些在它们所依赖的表上执行 DDL 的过程和/或包的案例。我得出的结论是，最实用的解决方案是让它们*不*依赖于这些表。ie而不是做静态SQL

```
select COL1 into my_var from MY_CHANGING_TABLE ...; 
```

将其作为动态 SQL

```
execute immediate 'select COL1 from MY_CHANGING_TABLE ...' into my_var; 
```

# mysql - 如何在 MySQL 中编写从现在到今天午夜之间的查询？

> ID：13738801
> 
> 赞同：12
> 
> 时间：2012-12-06T07:25:49.450
> 
> 标签：mysql

我有如下查询

```
SELECT * FROM programs where startTime between now() and now() + INTERVAL 1 DAY; 
```

是否可以在 MySQL 中使用从现在到今天午夜之间的时间编写查询？

像下面的东西

```
SELECT * FROM programs where startTime between now() and now() + midnight 12; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-06T08:07:17.907

我建议您始终使用 clopen（封闭-开放）间隔进行日期和时间比较。`BETWEEN`表示封闭的间隔（从两侧）。[@Aaron Bertrand 的](https://stackexchange.com/users/24165/aaron-bertrand?tab=accounts)博文中有一个很好的解释： **[BETWEEN 和魔鬼有什么共同点？](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)**. 这是编写查询的一种方法：

```
SELECT * 
FROM programs 
WHERE startTime >= NOW() 
  AND startTime < CURRENT_DATE() + INTERVAL 1 DAY ; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T07:28:15.560

```
SELECT * FROM programs where startTime between now() and CURRENT_DATE() + INTERVAL 1 DAY; 
```

当前日期返回一天的开始，然后我们添加 1 天以到达它的结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T08:02:56.970

您可以尝试以下方法：虽然可能很长。

**样品表：**

```
ID  STIME                               ETIME
1   December, 05 2012 05:23:00+0000     December, 05 2012 07:30:00+0000
2   December, 05 2012 10:23:00+0000     December, 05 2012 12:30:00+0000
3   December, 06 2012 22:45:00+0000     December, 07 2012 01:00:00+0000
4   December, 06 2012 22:23:00+0000     December, 06 2012 23:55:00+0000
5   December, 06 2012 20:23:00+0000     December, 06 2012 22:55:00+0000
6   December, 07 2012 10:23:00+0000     December, 07 2012 12:30:00+0000 
```

**询问**

```
SELECT  *,curtime() FROM prog
WHERE date(stime) = date(now())
AND date(etime) = date(now())
AND time_to_sec(SUBTIME(etime,'24:00:00')) >= 0
; 
```

**结果**

```
ID  STIME                               ETIME   
4   December, 06 2012 22:23:00+0000     December, 06 2012 23:55:00+0000     
5   December, 06 2012 20:23:00+0000     December, 06 2012 22:55:00+0000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T09:09:31.670

```
SELECT *
FROM   programs
WHERE  DATE(startTime) = CURRENT_DATE AND startTime > CURRENT_TIMESTAMP 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T07:30:00.750

尝试这个 ：：

```
SELECT * FROM programs where startTime between now() and DATE_SUB(CURDATE(), INTERVAL 1 DAY) 
```

# c++ - Visual Studio 2012 不生成 .exe

> ID：13738802
> 
> 赞同：1
> 
> 时间：2012-12-06T07:25:51.197
> 
> 标签：c++, visual-studio-2012, exe

我刚刚安装并尝试构建一个简单的 Hello world 程序，但是我似乎找不到 .exe，也找不到任何可以看到程序生成“hello world”的方式。附件是我正在尝试构建的屏幕截图，以及我认为应该在其中输出 .exe 的文件夹

[http://i.imgur.com/HKAmK.png](http://i.imgur.com/HKAmK.png) http://i.imgur.com/WK2Hb.png （也不在子文件夹中）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T08:41:12.760

1.  确保 CPP 文件位于项目的 SourceFiles 中。如果不是，它将不会被构建。

2.  检查项目的属性（尤其是“常规”选项卡）以获取项目文件的输出目录。

3.  构建您的项目。Visual Studio 在输出窗口中通知二进制文件在哪里，例如。

```
    1>----- 构建开始：项目：NativeConsoleSketchbook，配置：Debug Win32 ------
    1>构建开始于 2012-12-06 09:39:35。
    1>初始化构建状态：
    1> 创建“Debug\NativeConsoleSketchbook.unsuccessfulbuild”，因为指定了“AlwaysCreate”。
    1>Cl编译：
    1> 主.cpp
    1>链接：
    1> NativeConsoleSketchbook.vcxproj -> D:\Dokumenty\Dev\VS\Sketchbook\Debug\NativeConsoleSketchbook.exe
    1>完成构建状态：
    1> 删除文件“Debug\NativeConsoleSketchbook.unsuccessfulbuild”。
    1> 触摸“Debug\NativeConsoleSketchbook.lastbuildstate”。
    1>
    1>构建成功。
    1>
    1>经过时间 00:00:02.81
    ========== 构建：1 成功，0 失败，0 最新，0 跳过 ==========

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-15T12:55:47.107

我也收到了构建成功的消息，但没有生成 exe。

在 Visual Studio 解决方案资源管理器窗格中，右键单击源文件并选择属性。确保它没有设置为“**不参与构建**”

使用下拉列表将其更改为“ **C/C++ 编译器”。**

![源文件属性页](../Images/acf71336fff6234003193975a5bb6d3f.png)

# android - Android - png 图像创建一个白色补丁

> ID：13738803
> 
> 赞同：2
> 
> 时间：2012-12-06T07:25:51.323
> 
> 标签：android, button, drawing, png, drawable

我有一个 .png 文件，当我放上一个按钮时，它会给出一个白色补丁而不是透明背景。

我在用

```
btn6.setBackgroundResource(R.drawable.f); 
```

这会将 png 放在按钮上，但不包括图像的区域会被修补为白色。该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:16:44.287

我认为这不是一个透明的背景 png 文件。您应该使用 PhotoShop 删除白色补丁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:32:52.950

我猜你正在使用 ImageButton。

尝试将 XML 文件中 ImageButton 的背景设置为 @null

机器人：背景=“@null”

并在您的代码中尝试设置 imageResource 而不是背景。

btn6.setImageResource(R.drawable.f);

**编辑：** Sikp Xml 编辑并执行

btn6.setImageResource(R.drawable.f);
btn6.setBackgroundDrawable(null);

# opengl - 用于绘制网格的 OpenGL 窗口大小

> ID：13738805
> 
> 赞同：0
> 
> 时间：2012-12-06T07:25:52.500
> 
> 标签：opengl, grid, coordinates

我正在尝试在 OpenGL 窗口中绘制一个 50x50 的网格。我绘制网格的代码是

```
void GLGrid::draw() {

int y=-width;
int yIncrement = width / 50;
int x=-length;
int xIncrement = length / 50;

glColor3f(0.0f,0.0f,0.0f);
for(y = -width; y < width; y+=yIncrement) {
    glBegin(GL_LINES);
        glVertex3f(-width,y,0);
        glVertex3f(width,y,0);
    glEnd();
}

for(x = -length; x < length; x+=xIncrement) {
    glBegin(GL_LINES);
        glVertex3f(-length,x,0);
        glVertex3f(length,x,0);
    glEnd();
}
} 
```

请注意，在我执行 x=0;x < length 等操作之前，这使得该行（我看到的唯一一行）从屏幕中间开始，而不是最左边。另外，当我在整个窗口上绘制一个矩形时，我必须从负 300x300 开始，而不是 0,0。

我唯一看到的是屏幕中间的一条水平线。我认为问题是我不知道我的窗口大小实际上是多少。每当我点击时打印出来

```
static void mouseEvent(int button, int state, int x, int y) {
cout<<"\nMouse Event!";
cout<<"\n\tbutton:"<<button;
cout<<"\n\tstate:"<<state;
cout<<"\n\tx:"<<x;
cout<<"\n\ty:"<<y<<"\n";
} 
```

它打印出左上角是 0,0，右下角是 300,300。所以我将我的 GLGrid 长度和宽度设置为 300。我应该将窗口长度和宽度设置为其他值吗？如果是这样，是什么？我对OpenGL很陌生，所以请原谅我的无知。为了彻底，因为我不知道是否有其他微妙的问题可能是问题，我将包含更多代码

```
static void initOpenGL() {
//set clear color to white
glClearColor(0.0f,0.0f,0.0f,1.0f);

glMatrixMode( GL_PROJECTION );
glLoadIdentity();
glMatrixMode( GL_MODELVIEW );
glLoadIdentity();
}

/*OpenGL calls*/
static void display(void)
{
glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

if (!init)
{
    initOpenGL();
}

renderScene();

//...more code below in this function but pretty positive its irrelevant

static void renderScene() {

    drawBackground();

    drawGrid();

}

static void drawBackground() {
//draw a white rectangle for background
    glColor3f(1.0f,1.0f,1.0f);
    glBegin(GL_QUADS);
        glVertex3f(-windowMaxX, -windowMaxY, 0);
        glVertex3f(windowMaxX, -windowMaxY, 0);
        glVertex3f(windowMaxX, windowMaxY, 0);
        glVertex3f(-windowMaxX, windowMaxY, 0);
    glEnd();
}

static void drawGrid() {
    GLGrid.draw();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:35:25.167

当您绘制垂直线时，您需要更改您的`x`值，而不是您的`y`值：

```
glBegin(GL_LINES);
    glVertex3f(x,-length,0);
    glVertex3f(x,length,0);
glEnd(); 
```

可能还有更多错误，但这是要改变的一件事。

# sql - 具有和子查询的 linq

> ID：13738806
> 
> 赞同：1
> 
> 时间：2012-12-06T07:25:52.033
> 
> 标签：sql, linq, entity-framework

如何编写包含有和子查询的 linq 到实体查询？例如：

```
SELECT * 
FROM   dbo.Gavahi g 
WHERE  g.id  NOT IN (
    SELECT    GavahiID
    FROM      dbo.AsnadMaliDetail  ad 
    GROUP BY  GavahiID 
    HAVING SUM (MablaghMoredEstefade) >= (
        SELECT mablagh
        FROM   dbo.Gavahi g 
        WHERE  g.id = ad.GavahiID
    )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:27:22.163

如评论中所述，最好研究如何使用 LINQ 操作集合，而不是在 SQL 中思考，然后尝试找到合适的翻译。Microsoft 尝试为 LINQ 方法使用 SQLish 名称，但事实是它们并不相似。

以下 LINQ 查询执行您在 SQL 中表达的内容，假设 GavahiId 是 Gavahi.Id 的外键：

```
var mablaghs = AsnadMaliDetails
        .GroupBy(x => x.Gavahi)
        .Where(g => g.Sum(y => y.MablaghMoredEstefade) < g.Key.Mablagh)
        .Select(x => x.Key); 
```

请注意，在 MablaghMoredEstefade 的 SUM 上反转条件，允许直接选择`GroupBy`键（Gavahi），而不是在`NOT IN`其他地方使用主键。

如果您是 LINQ 新手，但您精通 SQL，我建议您尝试[LINQPad](http://www.linqpad.net/)，它可以让您一目了然地看到生成的 SQL。不过，免费版本不包括自动完成功能。

# java-me - J2me——执行系统代码

> ID：13738807
> 
> 赞同：2
> 
> 时间：2012-12-06T07:26:00.637
> 
> 标签：java-me, system, nokia-s40, imei

有没有办法在 J2me 中执行 *#06#(to get IMEI) 之类的系统代码？

# svn - 如果我单击 svn 的 svn upgrade 工作副本，那对我的工作空间有什么影响

> ID：13738811
> 
> 赞同：-1
> 
> 时间：2012-12-06T07:26:23.793
> 
> 标签：svn

在一段时间之前，我切换了 doscms 文件夹的分支。之后，当我右键单击 doscms 文件夹时，它不显示 SVN 更新和 SVN 提交，感染它显示 SVN 升级工作副本。所以你能告诉我如果我单击 SVN Upgrate 工作副本，那么它将在我的 doscms 文件夹中显示什么类型的影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:20:03.643

[检查相关的 Apache Subversion 1.7 发行说明条目](http://subversion.apache.org/docs/release-notes/1.7.html#wc-upgrade)是有意义的：

> Subversion 1.7 对工作副本格式进行了重大更改。在以前的 Subversion 版本中，当执行写入操作时，Subversion 会自动将工作副本更新为新格式。然而，Subversion 1.7 将使这成为一个手动步骤。在将 Subversion 1.7 与他们的工作副本一起使用之前，用户需要运行一个新命令 svn upgrade 以将元数据更新为新格式。此命令可能需要一段时间，对于某些用户来说，简单地签出新的工作副本可能更实用。

*请注意，您不能将升级后的工作副本用于旧客户端（例如 SVN 1.6 和更早版本）。*

# php - 重写重定向文件夹

> ID：13738814
> 
> 赞同：3
> 
> 时间：2012-12-06T07:26:38.647
> 
> 标签：php, html, .htaccess, mod-rewrite

经过所有的研究，我还没有找到答案。

在旧网站上，html 文件的格式为[http://www.example.com/folder/file.html](http://www.example.com/folder/file.html) 我在 wordpress 中使用 url 格式[http://www.example.com/folderfile/](http://www.example.com/folderfile/)建立了新网站 我有使用重写器剥离 .html 没有问题，但是如何删除 / after 文件夹？有什么方法可以制作

[http://www.example.com/folder/file.html](http://www.example.com/folder/file.html)自动 重定向到 [http://www.example.com/folderfile/](http://www.example.com/folderfile/) ？

任何建议表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:43:59.323

试试这个：

```
RewriteRule ^(.*)/(.*).html$ ./$1$2/ [QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:03:46.717

我认为你所需要的只是这样的：

```
RewriteEngine On
RewriteRule .* http://www.example.com/folderfile/ [L] 
```

`http://www.example.com/folder/file.html`重定向到

`http://www.example.com/folderfile/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T04:57:04.357

这很好用：

```
 RewriteRule ^moreinfo/(.*)$ /moreinfo$1 [R=301]
 RewriteRule ^healthsolutions/(.*)$ /healthsolutions$1 [R=301] 
```

/moreinfo/ 和 /healthsolutions/ 是文件夹

# sql - SQL Server：子查询返回超过 1 个值

> ID：13738816
> 
> 赞同：3
> 
> 时间：2012-12-06T07:26:40.730
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个表 Orders，其中包含一个名为 OrderSummary 的列。OrderSummary 具有以下格式的数据

```
123,0,0,0,0,0|223,1,1,1,1,1|323,2,2,2,2,2|423,3,3,3,3,3|523,4,4,4,4,4| 
```

现在我想得到`|`分隔符之后的第一个数字，即我希望输出是这样的：

```
123
223
323
423
523 
```

我有一个拆分函数，它将分隔符作为第一个输入，将字符串作为第二个输入。

我已经编写了以下查询，但出现错误。

```
SELECT SUBSTRING(T.Value,1,CHARINDEX(',',T.Value)-1) 
 FROM (
    Select * 
    FROM Split('|',(
         SELECT OrderSummary 
         FROM SAM_STORE_OM_Orders 
         GROUP BY OrderSummary)))
    T 
```

子查询可以返回多行：

```
SELECT OrderSummary FROM SAM_STORE_OM_Orders GROUP BY OrderSummary 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:33:05.913

请试试：

```
SELECT SUBSTRING(T.Value,1,CHARINDEX(',',T.Value)-1) FROM
    (SELECT VALUE FROM SAM_STORE_OM_Orders CROSS APPLY Split('|', OrderSummary)
)T 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:46:18.950

对不起，但我不使用你的功能；）

```
;WITH cte (OrderSummaryXML) AS
 (  
  SELECT CAST('<r>' + REPLACE(SUBSTRING(OrderSummary, 1, LEN(OrderSummary)-1), '|', '</r><r>') + '</r>' AS XML)
  FROM SAM_STORE_OM_Orders
  GROUP BY OrderSummary 
  )
SELECT SUBSTRING(OrderSummary, 0, CHARINDEX(',', OrderSummary))
FROM cte
  CROSS APPLY (SELECT Tbl.Col.value('.', 'nvarchar(250)') AS OrderSummary
               FROM OrderSummaryXML.nodes('/r') Tbl(Col)) AS List 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/257d5/1/0)上的演示[](http://sqlfiddle.com/#!3/257d5/1/0)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:25:03.030

我已经建立了一个解决方案，但是非常感谢您的回复。我建立的解决方法是 DECLARE @SKUID Varchar(MAX)

DECLARE @mytemp Table(mykey INT IDENTITY(1,1),OrderSummary Varchar(MAX))

声明 @mykey INT

插入 @mytemp(OrderSummary) 从 SAM_STORE_OM_Orders 中选择 OrderSummary

设置@SKUID = ''

从 @mytemp 中选择 @mykey = min( mykey )

而@mykey 不为空开始选择@SKUID = @SKUID + OrderSummary from @mytemp where mykey = @mykey select @mykey = min( mykey) from @mytemp where mykey > @mykey end

SELECT SUBSTRING(T.Value,1,CHARINDEX(',',T.Value)-1) FROM ( Select * FROM Split('|',@SKUID) )T**

# r - 在 R 之间

> ID：13738820
> 
> 赞同：0
> 
> 时间：2012-12-06T07:27:18.200
> 
> 标签：r

我想检查向量`a`的元素是否在 R 中的向量元素之间`b`。我该怎么做？表示介于 2 和 4 之间的 3，如果是则出现在结果中，如果不是则不出现。刚才提到我不想检查向量a的第一个和最后一个元素。结果应该只有 3。

```
 a = c(1, 3, 8, 12)
      b = c(0, 2, 4, 6, 8) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-06T07:34:48.553

这是我的做法：

```
> Interval <- cut(a, b, FALSE)            ## Which 'slot' of b does a fit into?
> Interval
[1]  1  2  4 NA
> Interval == 1:length(a)                 ## Does it fit sequentially?
[1]  TRUE  TRUE FALSE   NA 
```

由于完全`a[4]`超出`b`，您可以使用之后（即）替换所有`NA`值，或者在 cut 函数中使用而不是使用。`FALSE``Vec[is.na(Vec)] <- F``c(b,max(a))``b`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T08:53:49.750

你为什么不只使用一个循环？

```
> a = c(1, 3, 8, 12)
> b = c(0, 2, 4, 6, 8)
> for (i in 2:(length(a)-1)){ if (b[i] < a[i] && a[i] <b[i+1]) {print (a[i])}}
[1] 3 
```

# jquery - 如果 class=n，jQuery 改变值

> ID：13738823
> 
> 赞同：-1
> 
> 时间：2012-12-06T07:27:24.483
> 
> 标签：jquery, html, class

如果它的类等于其他 div 的（编号 2）类值，我想更改 div 容器（编号 1）的值。

首先，我得到 2 号 div 的值：

```
 var classId = $(this).attr('class').split(' ')[1]; 
```

它有两个类，第二个是我正在使用的。

接下来，我尝试比较值并更改 div 编号 1 内的数据：

```
$.ajax(test.base_url + "name/name/" + ID, {
cache: false,
success: function(data, textStatus, jqXHR) {
    if ($("#redChar").attr("class") == classId) {
        $("#redChar").find('.'+classId).html(data);
    }
    else {
        $("#redChar").html();
    }

},
dataType:"html"
}); 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:30:47.537

你应该使用`$("#redChar").hasClass(classId)`

此外，如果您想更改 的内容`$("#redChar")`，您可以将其取出`find()`并将更改直接应用于它：`$("#redChar").html(data);`

# c# - 使用 c# 和 ASP.NET 用 SQL 表格结果填充页面上的表格单元格

> ID：13738825
> 
> 赞同：0
> 
> 时间：2012-12-06T07:27:27.603
> 
> 标签：c#, asp.net

我想使用我的 SQL 表格结果在 aspx 页面中创建表格，并在我的网页上填充**表格行、列和单元格。**

我将我的问题分为 3 个步骤，如下图所示。

![在此处输入图像描述](../Images/6b5af489fbf2e97cd87dcade9c854e76.png)

这是2,3步骤

![在此处输入图像描述](../Images/70fb7dd942c865aaa1ac19bb6f4392ec.png)

这是我显示结果的代码

可以只显示**第 1 步**

```
 DataClassesDataContext conx = new DataClassesDataContext();
    var resulttable =
              from s in conx.tbl_UserAnswers
              group s by  s.Matrixy into g
              select new
              {
                  rowKey = g.Key,
                  rowData = g.Select(s => new { result = s.result, Amount = s.landa })//.OrderBy(s => s.Product.Label)
              };
    // Create a new HtmlTable object.
    HtmlTable table1 = new HtmlTable();
    HtmlTableRow row;
    HtmlTableCell cell;     
    foreach (var tableRow in resulttable)
    {
        // Create a new row and set its background color.
        row = new HtmlTableRow();
        foreach (var sale in tableRow.rowData)
        {
            // Create a cell and set its text.
            cell = new HtmlTableCell();
            cell.InnerHtml = sale.result.ToString(); 
            tableRow.rowKey.Value.ToString();// "Row: ";//+ i.ToString()+ "<br />Cell: " + j.ToString();
            // Add the cell to the current row.
            row.Cells.Add(cell);
        }
        // Add the row to the table.
        table1.Rows.Add(row);
    }

    // Add the table to the page.
    myPlaceHolder.Controls.Add(table1);
} 
```

# gcov - 在文件夹上运行 gcov 工具

> ID：13738826
> 
> 赞同：5
> 
> 时间：2012-12-06T07:27:35.657
> 
> 标签：gcov

我`.c`使用`gcc -fprofile-arcs -ftest-coverage [filenames]`. command
但是为这个命令提供文件名是非常乏味的工作。
相反，我需要帮助，我可以**在包含所有源文件的文件夹上运行 gcov 工具**。
这可能吗？请帮我解决问题。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T07:12:52.593

我遇到了同样的问题，我的项目包含约 3000 个文件。编写一个 shell 脚本，使用 find exec 将所有 .c .gcno 和 .gcda 文件抓取到一个公共文件夹，然后使用相同的命令运行 gcov。样本：

```
LOCATION=your_gcov_folder_name
find -name '*.c' -exec cp -t $LOCATION {} +
find -name '*.gcno' -exec cp -t $LOCATION {} +
find -name '*.gcda' -exec cp -t $LOCATION {} +
cd $LOCATION
find -name '*.c' -exec gcov -bf {} \; 
```

在包含您的项目的代码文件夹上运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-26T13:54:43.710

[LCOV][1] 自动提供用户友好的报告，首先我建议看一下。

如果您真的想使用 gcov 显示覆盖率数据，您可以尝试

> 寻找 。-name "*.cpp" -exec sh -c 'gcov {} -o "$(dirname {})"' \;

这将根据您的 gcno 和 gcda 文件创建 gcov 文件。

而且通常移动 gcno/gcda 文件并不是一个完美的主意。这将导致查找源代码时出现问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-24T06:40:28.580

首先，您在问题中指定的命令用于编译 c/c++ 文件并对其进行检测，以便在执行时稍后生成覆盖率。

该命令也可以如下使用： gcc --coverage g++ --coverage

注意：您也必须为链接指定相同的标志。

现在关于这个问题，如果您的问题是关于编译多个文件，那么无论多么复杂，都有很多方法可以构建项目。您可以为此使用自动构建。

如果您的问题是关于为多个文件生成覆盖率报告，那么：

您可以使用 gcovr 生成各种形式的报告，只需使用“-r 或 --root=ROOT”标志指定根目录（src 和 obj 上方的目录）。请参阅本[用户指南](http://gcovr.com/guide.html#gcovrCommand)。

如果您真的只想使用 gcov 而别无其他，其他人给出的答案也可以。但在我看来，gcovr 满足了 gcov 可以实现的所有目的（除了功能级别的详细信息，您可以获得行级别的详细信息）。

# php - iframe 和标头位置问题

> ID：13738831
> 
> 赞同：0
> 
> 时间：2012-12-06T07:27:53.213
> 
> 标签：php, redirect, iframe, parent

我正在使用运行另一个小型应用程序的 iframe。在 iframe 的某个页面中，我尝试将 url 重定向到父索引页面。但是如果我使用的是 header('location:fullpath/index.php')。然后它重定向到提到的页面，但在 iframe 内。我需要它将在 iframe 之外打开。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T04:50:05.517

如果您不想使用 javascript 并且您可以控制目标页面，则可以将此元标记放在目标页面的顶部，它应该在新窗口中打开。

```
<META HTTP-EQUIV="Window-target" CONTENT="_blank"> 
```

这是您可以尝试的其他`CONTENT`选项的列表，因为我不确定是什么`beyond the iframe`意思。

```
Same Frame  -_self
Whole Page    -_top
New Window  -_blank
Parent Frame-_parent 
```

# codeigniter - codeigniter，ion_auth logout() 会话错误

> ID：13738833
> 
> 赞同：1
> 
> 时间：2012-12-06T07:28:08.543
> 
> 标签：codeigniter, ion-auth

最近我在我的 hmvc 系统中实现了 ion_auth。现在的问题是，当我从我的 cms 注销时，注销正在工作，但在销毁会话之前向我显示了这些错误：

> 未定义索引：session_id
> 
> 未定义索引：ip_address
> 
> 未定义索引：user_agent
> 
> ......

现在我不知道下一行错误原因是什么，仅持续 1 秒，然后正在破坏会话。这可能是一个安全问题吗？因为如果我关闭开发模式，它就不再显示了。任何建议如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:28:29.307

我会自己回答这个问题，因为没有人愿意帮助我:)所以这是导致问题的原因

```
line 102-103
//log the user out
function logout()
{
    $this->data['title'] = "Logout";

    //log the user out
    $logout = $this->ion_auth->logout();

    //redirect them to the login page
    $this->session->set_flashdata('message', $this->ion_auth->messages());
    redirect('auth/login', 'refresh');
} 
```

我将其更改为：

```
//log the user out
function logout()
{
    if($this->ion_auth->logged_in())
    {
        $this->ion_auth->logout();
        redirect('admin/login', 'refresh');
    }

} 
```

资料来源：我测试了自己并且工作得很好:)

# php - 通过 curl 使用 PHP 上传多个文件

> ID：13738836
> 
> 赞同：3
> 
> 时间：2012-12-06T07:28:18.783
> 
> 标签：php, curl, upload, ftp

我正在尝试使用 cURL 通过 PHP 传输两个文件。我知道通过命令行的方法是

```
curl -T "{file1,file2,..filex}" ftp://ftp.example.com/ -u username:password 
```

在php中，您可以通过以下代码上传1个文件

```
$ch = curl_init();
$localfile = "somefile";
$username = "Someusername@someserver.com";
$password = "somerandomhash";
$fp = fopen($localfile, 'r');
curl_setopt($ch, CURLOPT_URL, "ftp://ftp.domain.com/");
curl_setopt($ch, CURLOPT_USERPWD, "$user:$pass");
curl_setopt($ch, CURLOPT_UPLOAD, 1);
curl_setopt($ch, CURLOPT_INFILE, $fp);
curl_setopt($ch, CURLOPT_INFILESIZE, filesize($localfile));
curl_exec ($ch);
$error_no = curl_errno($ch);
curl_close ($ch); 
```

但是我将如何使用上述方法处理多个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:07:06.950

如果您可以使用相同的凭据并行连接到 FTP，则可以尝试通过`curl_multi_*`以下代码以最少的更改来做到这一点：

```
$chs = array();
$cmh = curl_multi_init();
for ($i = 0; $i < $filesCount; $i++)
{
    $chs[$i] = curl_init();
    // set curl properties
    curl_multi_add_handle($cmh, $chs[$i]);
}

$running=null;
do {
    curl_multi_exec($cmh, $running);
} while ($running > 0);

for ($i = 0; $i < $filesCount; $i++)
{
    $content = curl_multi_getcontent($chs[$t]);
    // parse reply
    curl_multi_remove_handle($cmh, $chs[$t]);
    curl_close($chs[$t]);
}
curl_multi_close($cmh); 
```

# php - Magento 网站中缺少 Jquery 移动样式

> ID：13738838
> 
> 赞同：0
> 
> 时间：2012-12-06T07:28:23.440
> 
> 标签：php, jquery, magento, jquery-mobile

我正在使用 jquery mobile 开发我的 magento 网站的移动版本。我的问题是，我没有为我最近安装的模块获取 jquery mobile 的按钮和下拉样式。

该模块是为客户设置的商店提货。我在我的结帐页面中缺少它的 jquery 移动样式，在运输方式选项下。我有两个下拉菜单和一个文本框。它显示了普通样式而不是 jquery mobile 的样式。

问题是，当我定义一个按钮时，

```
<input type="button" value="Save" /> 
```

在我的文件“pickup.phtml”中，它带有普通样式。但是，如果我使用手动编写的 jquery 样式输入，例如

```
 <div class="ui-btn ui-shadow ui-btn-corner-all ui-fullsize ui-btn-block ui-btn-up-c" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-icon="" data-iconpos="" data-theme="c" data-inline="false" data-mini="false" aria-disabled="false">
<span class="ui-btn-inner ui-btn-corner-all">
<span class="ui-btn-text">Continue</span>
</span>
<button class="button ui-btn-hidden" onclick="shippingMethod.save()" type="button" aria-disabled="false">
</button>
</div> 
```

它带有 Jquery 移动样式。即样式存在于页面中，但默认情况下按钮不会拾取它。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:13:45.713

终于明白了……！！！！！！

创建触发器修复它！查找缺少 jquery-mobile 样式的页面并粘贴...

```
jQuery('.yourdivsclass').trigger("create"); 
```

希望它对其他人有帮助。

# java - 简单的 HTML 无法从 servlet (java) + mysql 中获取 JSON

> ID：13738841
> 
> 赞同：1
> 
> 时间：2012-12-06T07:28:24.867
> 
> 标签：java, jquery, mysql, json, getjson

我试图从一个简单的 HTML 中获取 JSON，但我无法成功：c .. 我从一个 java Servlet、MySQL 生成 JSON，就像这样......

**Prueba.java (Servlet)**

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub

    response.setContentType("text/html");

    PrintWriter out = response.getWriter();

    try{

        Connection conn = ConexionBD.obtenerConexion();
        Statement stmt = conn.createStatement();
        ResultSet rs = stmt.executeQuery("SELECT * FROM grifo where id=1");

            while(rs.next()){
                String grifo = rs.getString("grifo");
                String distrito = rs.getString("distrito");
                String latitud = rs.getString("latitud");
                String longitud = rs.getString("longitud");

                JSONObject json = new JSONObject();
                json.put("grifo", grifo);
                json.put("distrito", distrito);
                json.put("latitud", latitud);
                json.put("longitud", longitud);

                    out.print(json);
            }

        } catch (Exception e){
            out.print(e);
        }
} 
```

所以，当我运行它时，我得到了 JSON：

```
{"grifo":"Grifo Libertad","distrito":"San Juan de Lurigancho",
"latitud":"-123.059028347924","longitud":"93.945783454234234"} 
```

在我的 java 项目中，我有另一个名为[index.jsp](http://freetexthost.com/4xp6w0kxc0)的页面，它获取 JSON。

我正确获取了 json，但是当我使用相同的代码创建**.html**（在桌面：file:///C:/Users/Jhonatan/Desktop/prueba.html 中的网络浏览器）时： [http://freetexthost。 com/w2xgabhaks](http://freetexthost.com/w2xgabhaks)

我无法获取 JSON，只显示任何内容！服务器上的文件（.jsp）、其他位置（桌面：.html）或数据库（mysql）是否有问题？

那么[https://graph.facebook.com/zombies](https://graph.facebook.com/zombies)是如何工作的呢？

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T21:45:17.340

你看过 JS 控制台说什么了吗？我的猜测是它会抛出类似`Origin null is not allowed by Access-Control-Allow-Origin`.

JavaScript 请求具有*同源*策略。您要做的是[跨域请求](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。

简单的解决方法是让您的服务器返回以下标头：

```
Access-Control-Allow-Origin: * 
```

但我建议您阅读[所有相关内容](http://enable-cors.org/)并了解其含义。

# html - Facebook iframe(likebox) 底部截止

> ID：13738842
> 
> 赞同：2
> 
> 时间：2012-12-06T07:28:26.387
> 
> 标签：html, css, facebook

这似乎发生在除 Opera 和 IE10 之外的所有浏览器中（Opera 和 IE10 是吗？） [http://jsfiddle.net/puh67/](http://jsfiddle.net/puh67/)

CSS：

```
.Facebook,
.Facebook iframe
{
    height: 400px;
}​ 
```

html:

```
<div class="Facebook">
  <iframe src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fpages%2FFriskisSvettis-Landskrona%2F299504533446227&width=292&height=395&show_faces=false&colorscheme=light&stream=true&border_color&header=false" scrolling="no" frameborder="0" allowtransparency="true"></iframe>
</div>​ 
```

![图片](../Images/cbc5b66994a03cacbeaf91329e6b6506.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-07T17:07:57.340

如果页面完全加载，我会建议使用 javascript 来调整 iframe 的大小...

```
$("#frame")[0].setAttribute("height", "200"); 
```

# android - if语句判断不能通过

> ID：13738844
> 
> 赞同：0
> 
> 时间：2012-12-06T07:28:51.007
> 
> 标签：android

获取服务器返回信息时，LOGCAT显示1 2 3，结果为1、5、6。

判断if语句时，有错误。我认为结果是 1，但它仍然是错误的。

```
try {
    URL url=new URL(urlstr);
    URLConnection conn = null;
    Log.i("Text", "1");
    try {
        conn = url.openConnection();
        Log.i("Text", "2");
        InputStream in=conn.getInputStream();
        Log.i("Text", "3");
        byte[] buffer=new byte[in.available()];
        in.read(buffer);
        String result=new String(buffer);
        Log.i("Text", "result="+result);
        if(result.equals("1"))
        {    
            Log.i("Text", "4");
        } else {
            Log.i("Text", "5");
        }
        Log.i("Text", "6");
    }
} 
```

我不知道为什么。有人可以帮我吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T07:33:07.740

目前尚不清楚您要达到的目标，但是这三行存在三个问题：

```
byte[] buffer=new byte[in.available()];
in.read(buffer);
String result=new String(buffer); 
```

1.  你几乎*不*应该使用`available()`. 相反，创建一个固定大小的缓冲区（听起来您不希望有太多数据，所以只需要一个小缓冲区就可以了。）如果调用时没有可用数据`available()`怎​​么办？您将创建一个空数组 - 当然您不想这样做。
2.  您忽略了`InputStream.read()`. *永远不要*那样做。您不知道实际读取了多少数据。
3.  您正在`String`从 a创建一个`byte[]`而不指定编码。不要那样做。*数据实际*使用的是哪种编码？

我的猜测是，您*要么*传入一个空数组，*要么*实际上读取了多个字节。

# android - 使用电话间隙的 Android 应用程序

> ID：13738848
> 
> 赞同：0
> 
> 时间：2012-12-06T07:29:21.240
> 
> 标签：android, shell, android-layout

我在 android 中成功完成了我的应用程序，并在真实设备和模拟器中运行。我的应用程序需要互联网访问，因此在 manifest.xml 文件中提供了访问权限。

代码是这样的：

```
uses-permission android:name="android.permission.INTERNET" />   
uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

现在的问题是我的应用程序仅在 wifi 开启但未通过移动设备中的互联网连接运行时运行。我必须在我的设备中运行没有 wifi 的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:08:13.720

我正在使用 Apache 2.2.0 版本。好的，没问题我的问题解决了我添加了代码通道`super.setIntegerProperty("loadUrlTimeoutValue", 100000);`，现在它正在运行。

# java - 使用 youtube api 批量请求 - 从多个渠道获取最新的视频信息

> ID：13738859
> 
> 赞同：6
> 
> 时间：2012-12-06T07:30:43.637
> 
> 标签：java, android, youtube-api, http-post

我有 10 个我喜欢的 youtube 频道，我想获取每个频道的最新视频信息。现在我正在做 10 个不同的电话，比如这个：

```
http://gdata.youtube.com/feeds/api/users/USERNAME/uploads?v=2&alt=jsonc&start-index=1&max-results=1 
```

我想通过使用批处理请求将这 10 个调用替换为单个调用。

我试过这个：

```
String xml = "<feed xmlns='http://www.w3.org/2005/Atom' xmlns:batch='http://schemas.google.com/gdata/batch'>" +
             "    <batch:operation type='query'/>" +
             "    <entry>" +
             "        <id>http://gdata.youtube.com/feeds/api/videos/VIDEO_ID_1</id>" +
             "    </entry>" +
             "    <entry>" +
             "        <id>http://gdata.youtube.com/feeds/api/videos/VIDEO_ID_2</id>" +
             "    </entry>" +
             ...
             "    <entry>" +
             "        <id>http://gdata.youtube.com/feeds/api/videos/VIDEO_ID_10</id>" +
             "    </entry>" +
             "</feed>";

HttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost("https://gdata.youtube.com/feeds/api/videos/batch?v=2");
StringEntity se = new StringEntity(xml);
se.setContentType("text/xml");
httpPost.setEntity(se);
HttpResponse response = httpClient.execute(httpPost); 
```

我在 HTTPResponse 对象中获得了一个包含有用数据的 XML。

但是如果我想获取最新的 10 个视频信息，我不会知道 videoId。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:58:14.483

您不能发出`http://gdata.youtube.com/feeds/api/users/USERNAME/uploads?v=2`在请求正文中包含 10 个不同 URL 的批处理请求。

您需要请求`http://gdata.youtube.com/feeds/api/users/USERNAME/uploads?v=2&max-results=1`10 次，每次请求一次`USERNAME`。

或者，如果您有某种服务器端进程有兴趣了解新视频何时上传到给定频道，您可以使用[PubSubHubbub](http://apiblog.youtube.com/2010/10/pubsubhubbub-for-youtube-activities.html)或[SUP](https://developers.google.com/youtube/2.0/developers_guide_protocol_sup)更有效地处理该场景。因为你的问题被标记为`android`我假设你关心做这个客户端，不过。

# sql - 棘手的选择语句

> ID：13738865
> 
> 赞同：3
> 
> 时间：2012-12-06T07:31:00.363
> 
> 标签：sql, sql-server, tsql, select

我有一个包含类别的表，每个类别作为一个 ID、一个名称和一个 ParentID。问题是有3个级别，父类别，子类别和子类别。

我可以用一个简单的`SELECT`和一个`WHERE ParentID IS NULL`子句来提取父类别：

```
SELECT *
FROM Category
WHERE ParentID IS NULL 
```

但是，`WHERE ParentID IS NOT NULL`子句将返回子类别和子类别。

我正在寻找一种仅提取子类别和子类别的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T08:04:08.330

通常，对于这类问题，最好使用[Recursive Queries Using Common Table Expressions](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)。像这样：

```
;WITH CategoriesTree(CategoryID, CategoryName, ParentName, CategoryLevel)
AS
(
   SELECT 
     c.ID, 
     c.Name, 
     CAST('No Parent' AS VARCHAR(50)) AS ParentName, 
     0 AS CategoryLevel
   FROM @Categories c
   WHERE c.ParentID IS NULL
   UNION ALL
   SELECT c.ID, c.Name, p.CategoryName, p.CategoryLevel + 1
   FROM CategoriesTree p
   INNER JOIN @Categories c ON c.ParentID = p.CategoryID
)
SELECT * 
FROM CategoriesTree
Where CategoryLevel = some id; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/6963)

这会给你：

```
CATEGORYID       CATEGORYNAME         PARENTNAME      CATEGORYLEVEL
    1         Root Cateogry         No Parent               0
    2         Sub Cateogry 1        Root Cateogry           1
    3         Sub Cateogry 2        Root Cateogry           1
    4         Sub Cateogry 3        Root Cateogry           1
    8         sub Cateogry 1 of 3   Sub Cateogry 3          2
    7         Sub Cateogry 1 of 2   Sub Cateogry 2          2
    5         Sub Cateogry 1 of 1   Sub Cateogry 1          2
    6         sub Cateogry 2 of 1   Sub Cateogry 1          2 
```

* * *

## 这是如何运作的？

使用此查询，您可以控制要选择的类别级别。例如，对于我在之前的演示中使用的示例数据，这里是类别树：

```
 1: RootCategory                Category Level:  0
                               |
                               |
                 ---------------------------- 
                 |             |            |
                 |             |            |
              2: Sub1        3: Sub2      4: sub3      Category Level:   1
                 |             |            |
          ------------         |            |
          |          |         |            |
          |          |         |            |
     5: Sub1of1  6: Sub2of1   7: sub1of2   8: sub1of3  Category Level:   2 
```

此查询将为您提供带有新生成`CategoryLevel`列的类别树。

**请注意：**在我在演示中使用的示例数据中，只有一个父类别（`parentid`IS NULL 的类别）。但是，如果有很多父类别，查询将可以正常工作。这是因为 CTE 的锚查询，即：

```
SELECT 
     c.ID, 
     c.Name, 
     CAST('No Parent' AS VARCHAR(50)) AS ParentName, 
     0 AS CategoryLevel
FROM @Categories c
WHERE c.ParentID IS NULL; 
```

然后，您可以使用生成的列`CategoryLevel`仅选择您感兴趣的级别的子类别。

例如，如果您只需要选择根类别的第一个子类别的子类别，您可以使用谓词获取这些类别`CategoryLevel = 2`：

```
;WITH CategoriesTree(CategoryID, CategoryName, ParentName, CategoryLevel)
AS
(
    ...
)
SELECT * 
FROM CategoriesTree
WHERE CategoryLevel = 2; 
```

这会给你：

```
CATEGORYID       CATEGORYNAME         PARENTNAME      CATEGORYLEVEL
    8        sub Cateogry 1 of 3    Sub Cateogry 3          2
    7        Sub Cateogry 1 of 2    Sub Cateogry 2          2
    5        Sub Cateogry 1 of 1    Sub Cateogry 1          2
    6        sub Cateogry 2 of 1    Sub Cateogry 1          2 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/6965)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T07:45:35.610

第一级类别 - 你有它：

```
SELECT *
FROM Category
WHERE ParentID IS NULL 
```

对于二级类别，您可以尝试：

```
SELECT * FROM Category
WHERE ParentID IN (SELECT ID FROM Category WHERE ParentID IS NULL). 
```

对于第三个：

```
SELECT * FROM Category
WHERE ParentID IN (SELECT ID FROM Category WHERE ParentID IS NOT NULL) 
```

*（未测试）*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T07:48:51.117

怎么样：

```
-- Root parents
select c.* from categories c where c.ParentID is null

-- Second level. Select where parentid is a root category.
select c.* from categories c 
where c.ParentID in (select c1.ID from categories c1 where c1.ParentID is null);

-- Third level. Select where parentid is a second level category
with second_level_cats (ID) as (
  select c.ID from categories c 
  where c.ParentID in (select c1.ID from categories c1 where c1.ParentID is null)
  )
select c.* from categories c 
where c.ParentID in (select l2.ID from second_level_cats l2) 
```

可能不是完全最佳的，但它似乎有效。如果只有相对较少的行数并且您只会进入三个级别，那么它就足够了。

# ruby-on-rails - 运行 ruby 服务器时出错，提示未建立连接

> ID：13738870
> 
> 赞同：0
> 
> 时间：2012-12-06T07:31:17.613
> 
> 标签：ruby-on-rails, ruby, postgresql, ruby-on-rails-3.2

我正在使用 rails 3.2.9 和 postgres 数据库。

我已经通过以下方式编辑了 database.yml 文件，并且`gem pg`也安装了..

当我运行 bundle 命令时，它会在该列表中显示 pg gem。但是，如果我运行 rails server 命令，它会显示未建立活动连接。

```
 development:
      adapter: postgresql
      database: db_pchamara/development.postgresql
      pool: 5
      username: database username
      password: password
      host: database ip address

    test:
      adapter: postgresql
      database: database name/test.postgresql
      pool: 5
      username:database username
      password: password

    production:
      adapter: postgresql
      database: database name/production.postgresql
      pool: 5
      username: database username
      password: password 
```

但是当我运行命令时`rails server`，它显示如下：

```
[root@vdimc04 my_app]# rails server
=> Booting WEBrick
=> Rails 3.2.9 application starting in development on http
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2012-12-06 12:49:35] INFO  WEBrick 1.3.1
[2012-12-06 12:49:35] INFO  ruby 1.9.3 (2012-11-10) [i686-linux]
[2012-12-06 12:49:35] INFO  WEBrick::HTTPServer#start: pid=7536 port=3000

Started GET "/assets/rails.png" for 127.0.0.1 at 2012-12-06 12:49:53 +0530

ActiveRecord::ConnectionNotEstablished (ActiveRecord::ConnectionNotEstablished):
  activerecord (3.2.9) lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection'
  activerecord (3.2.9) lib/active_record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve_connection'
  activerecord (3.2.9) lib/active_record/connection_adapters/abstract/connection_specification.rb:145:in `connection'
  activerecord (3.2.9) lib/active_record/query_cache.rb:67:in `rescue in call'
  activerecord (3.2.9) lib/active_record/query_cache.rb:61:in `call'
  activerecord (3.2.9) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `_run__626989987__call__446659449__callbacks'
  activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.9) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.9) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.9) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.9) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.9) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.9) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.9) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.9) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.9) lib/rails/engine.rb:479:in `call'
  railties (3.2.9) lib/rails/application.rb:223:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.9) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

  Rendered /usr/local/rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /usr/local/rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (3.0ms)
  Rendered /usr/local/rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (29.4ms) 
```

```
 Please help me to solve this problem. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:17:48.343

问题在于文件的配置：

```
development:
  adapter: postgresql
  database: db_pchamara/development.postgresql
  pool: 5
  username: database username
  password: password
  host: database ip address 
```

将其更改为：

```
development:
  adapter: postgresql
  database: name_of_database
  pool: 5
  username: db_user
  password: db_pass
  host: db_host 
```

大多数时候 db_host 只是 localhost

另外，在实际尝试连接 rails 之前，请确保您可以连接 psql。

如果数据库不存在，则必须使用

```
rake db:create 
```

欢呼；）

# java - 如何使用 Spring 解析 Outlook 电子邮件

> ID：13738871
> 
> 赞同：0
> 
> 时间：2012-12-06T07:31:34.620
> 
> 标签：java, spring, outlook

我有一个用例，我需要读取 Outlook 收件箱中的邮件内容并将其转换为 xml 并将其发送到不同的系统。是否有任何库可以帮助我解析内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:41:40.870

Outlook 是电子邮件服务器的客户端。（可能是交换服务器）。您实际上需要连接到服务器才能阅读电子邮件。如果你知道服务器，你可以找到它的 API。

如果您尝试访问交换服务器，请查看此 URL：http: [//archive.msdn.microsoft.com/ewsjavaapi](http://archive.msdn.microsoft.com/ewsjavaapi)

# autocomplete - CSS 和 JavaScript 的 PhpStorm 代码完成和非物理文件路径

> ID：13738881
> 
> 赞同：0
> 
> 时间：2012-12-06T07:32:02.920
> 
> 标签：autocomplete, minify, phpstorm

使用 minify，而不是直接包含单个 CSS/JavaScript 文件，我的 HTML 文件中有这样的内容：

```
<link rel="stylesheet" href="/min/g=css8" type="text/css"/> 
```

CSS 或 JavaScript 的自动完成功能在此 html 中不起作用。

我尝试寻找能够将单个文件指定给 PhpStorm 以在自动完成中使用的方法，但找不到任何选项。建议？

# java - 用户和密码认证

> ID：13738883
> 
> 赞同：0
> 
> 时间：2012-12-06T07:32:14.853
> 
> 标签：java, database, netbeans

我对编码很陌生，所以我需要帮助。我在 netbeans 中构建了一个应用程序，该应用程序连接到一个数据库，我可以在其中存储和检索客户详细信息。我现在要做的是让用户输入登录名和密码，然后才能继续。所以在我的数据库中，我有一个名为 LoginPassword 的表，它存储（你可以猜到）用户登录名和密码。我需要帮助的是一些代码，它将用户输入的登录名和密码与我的数据库中的登录名和密码进行比较。我应该从哪里开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:36:42.593

制作一张名为“用户”的表。其中包含“用户名”和“密码”

单击登录按钮后，对“用户”表进行查询以获取用户记录是否不存在。如果在登录屏幕中输入的“用户名”和“密码”相同，则导航到详细信息屏幕，否则显示失败消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:40:36.743

```
String username= request.getParamaeter("username");
String passowrd= request.getParamaeter("passowrd");
Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection ("jdbc:mysql://localhost:3306/aeses","root","password");
            Statement stmt = con.createStatement();
            ResultSet rs = stmt.executeQuery("SELECT * from loginPassword");
            while (rs.next()){
                if(username.equals(rs.getString("username")))
                {
                    System.out.print("username matched");
if(username.equals(rs.getString("password")))
                {
                    System.out.print("password matched you can redirect to home page here");

                }
                }
                else
                {
                    System.out.println("Date changed");
                }
                temp = rs.getString(1);
                System.out.println("Current Max Date is ===>>>"+rs.getString(1));
            }*/
        }
        /*catch (SQLException e) {
            e.printStackTrace();
        }*/
        catch (Exception e) {
            e.printStackTrace();
        }
        finally {
        } 
```

# php - 将带有字符 %20 的 url 作为 ajax 变量传递

> ID：13738886
> 
> 赞同：2
> 
> 时间：2012-12-06T07:32:22.093
> 
> 标签：php, jquery, ajax, url

我需要将 url 传递给 php 页面。url 可能包含也可能不包含特殊字符和编码变量。例如考虑 ajax 请求。

```
var url = 'http://siteaddr.com/abc%20cdf%202012%20movies%20software/';
$.get('check_link.php',{url:url},function(){
    //some function
}); 
```

`$_GET['url']`php 页面中变量的回显结果是`http://siteaddr.com/abc cdf 2012 movies software/` %20 被转换为空格。我需要按原样接收网址。尝试对网址进行编码和解码。但我没有得到我需要的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:08:38.440

1.  您不应该使用将用作键的名称来定义变量。
2.  再次对 URL 进行编码，在发送之前将使 PHP 对双重编码的 URL 进行解码。

    ```
    var link = 'http://siteaddr.com/abc%20cdf%202012%20movies%20software/';
    $.get('check_link.php',{url: encodeURIComponent(link)}, function(){
        //some function
    });
    // Double encoded URL: Note that % has become %25
    // http%3A%2F%2Fsiteaddr.com%2Fabc%2520cdf%25202012%2520movies%2520software%2F 
    ```

[http://jsfiddle.net/zNqac/](http://jsfiddle.net/zNqac/)

# c# - 创建网络文件夹 C#

> ID：13738887
> 
> 赞同：0
> 
> 时间：2012-12-06T07:32:25.163
> 
> 标签：c#, networking, directory

我在域 booleanarray.com 上有 2 台机器 EX001 和 Ex002。我有域用户的凭据（用户名 ABC 和密码 pwd123）可以登录域 booleanarray.com 上的 EX002。EX002 上有一个文件夹 C:\EWS。

我想编写一个在 EX001 上运行的 C# Windows 应用程序，并在 Ex002 上的文件夹 C:\EWS\ 下创建一个新文件夹。C:\EWS 不是共享文件夹，但是当用户 ABC 登录到 EX002 时，ABC 可以访问。

谁能建议我如何在 C# 中同一域的不同计算机上创建这样一个新文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:50:40.247

我无法给你详细的答复。但是您可能可以首先在域中的其他机器 2 上验证您的 Windows 应用程序。可能您可以使用 ConnectionOptions 对象。然后您可能可以将创建目录的命令发送到远程机器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:57:00.677

如果 c:\ews 不是共享文件夹，我相信您需要通过管理共享来完成。所以像：

```
String path = @"\\EX002\c$\EWS\";
Directory.CreateDirectory(path + "new folder name"); 
```

顾名思义，这要求该帐户具有对 EX002 的管理访问权限。

# android - 我有一个 ListView，其中每一行都包含一个 EditText 字段和 textview，我在 Edittext 中输入了什么我想在 textview 中看到？

> ID：13738888
> 
> 赞同：0
> 
> 时间：2012-12-06T07:32:26.817
> 
> 标签：android

在这里，我有以下代码：-

```
public class OrderActivity extends ListActivity implements OnClickListener{

ArrayList<String> data,rate, num;
OrderAdapter orderAdapter;
int i = 0;
int s;
TextView tvNumber,tvName,tvRate;
EditText etQty,etRemarks;
Button sendToConfirm,edit,saveAndAdd;
//  EditText qty,remarks;
//OrderAdapter orderAdapter;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.order);
    Init(); 
```

在这里，我从以前的活动中获取数组列表

```
 Bundle extras = getIntent().getExtras(); 
    data = extras.getStringArrayList("list");
    rate = extras.getStringArrayList("rate");
    num = extras.getStringArrayList("number");
    for(String str : data)  {
        Log.d("data", str);

    }
    for(String str1 : rate) {
        Log.d("data", str1);
        //s = Integer.parseInt(st)

    }
    //Log.d("total", s);
    for(String strnum : num)    {
        Log.d("data", strnum);

    }

    String[] captionArray = (String[]) data.toArray(
            new String[data.size()]);

    orderAdapter = new OrderAdapter(
            OrderActivity.this, R.layout.order_list,
            captionArray);
    setListAdapter(orderAdapter);
    return ;
} 
```

初始化按钮

```
public void Init() {
    sendToConfirm = (Button) findViewById(R.id.bsendtoconfirm);
    edit = (Button) findViewById(R.id.bEdit);
    saveAndAdd = (Button) findViewById(R.id.bsave);
    sendToConfirm.setOnClickListener(this);
    edit.setOnClickListener(this);
    saveAndAdd.setOnClickListener(this);
    //etQty.addTextChangedListener(this);
} 
```

这是 baseAdapter 类。

```
private class OrderAdapter extends BaseAdapter {
    String[] items;

    public OrderAdapter(Context context, int textViewResourceId,
            String[] items) {
        this.items = items;
    } 

    public View getView(final int POSITION, View convertView,
            ViewGroup parent) {

        //          TextView tvNumber,tvName,tvRate;
        //          EditText etQty,etRemarks;

        View view = convertView;

        if (view == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = vi.inflate(R.layout.order_list, null);

        } 
        tvNumber = (TextView) view.findViewById(R.id.itemnumber);
        tvName = (TextView) view.findViewById(R.id.itemname);
        tvRate = (TextView) view.findViewById(R.id.itemrate);
        etQty = (EditText) view.findViewById(R.id.editqty);
        etRemarks = (EditText) view.findViewById(R.id.editremarks);
        etQty = (EditText) view.findViewById(R.id.editqty);
        //tvRate = (TextView) v.findViewById(R.id.itemrate); 
```

Ontextchange 监听器。在这里，无论我在编辑文本中输入什么，我都需要在 textview 中获取？请帮我解决这个问题。

```
 etQty.addTextChangedListener(new TextWatcher() {

            public void onTextChanged(CharSequence s, int start, int before, int count) {
                // TODO Auto-generated method stub

            }

            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub

            }

            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub
                String text;
                text=etQty.getText().toString();
                if(text!=null)
                {
                    tvRate.setText(text);
                }
                else {
                    tvRate.setText("You Have Not type anything");
                }
            }
        });

        tvNumber.setText(num.get(POSITION));
        tvName.setText(data.get(POSITION));
        tvRate.setText(rate.get(POSITION));

        return view; 
    }

    public int getCount() {
        // TODO Auto-generated method stub
        return items.length;
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }
}
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.bsendtoconfirm:
        Log.d("click", "send");
        break;

    case R.id.bEdit:
        Log.d("click", "edit");
        break;
    case R.id.bsave:
        Log.d("click", "saved");
        finish();
        break;
    }
}
//  public void afterTextChanged(Editable s) {
//      // TODO Auto-generated method stub
////        String text;
////        text=etQty.getText().toString();
////        if(text!=null)
////        {
////        tvRate.setText(text);
////        }
////        else {
////        tvRate.setText("You Have Not type anything");
////        }
//  }
//  public void beforeTextChanged(CharSequence s, int start, int count,
//          int after) {
//      // TODO Auto-generated method stub
//
//  }
//  public void onTextChanged(CharSequence s, int start, int before, int count) {
//      // TODO Auto-generated method stub
//
//  } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:10:48.233

嗨，您可以使用下面的代码来执行此操作，

来源： [https ://dl.dropbox.com/u/68130108/ListViewEditItem.rar](https://dl.dropbox.com/u/68130108/ListViewEditItem.rar)

```
public class OrderActivity extends ListActivity implements OnClickListener{
// create static object to hold your widget in listview
static TextView sTxt;
static EditText sEdTxt;
static int p;

.
.
.
.

etQty.setId(position);
etQty.setTag(tvRate);           
etQty.setOnFocusChangeListener(new OnFocusChangeListener() {

public void onFocusChange(View v, boolean hasFocus) {
    sPosition = v.getId();
    sTxt = (TextView) v.getTag();
    EditText e = ((EditText) v);
    if (!e.getText().toString().equals("")) {
        if (hasFocus) {
                // change your num arraylist values at the position
                // because you can’t save anything on ListView Item.
            num.set(sPosition,e.getText().toString());                          
        }                       
    }
}
});

editText.addTextChangedListener(new TextWatcher() {
   @Override
   public void onTextChanged(CharSequence s, int start,int before, int count) {}
   @Override
   public void beforeTextChanged(CharSequence s, int start,int count, int after) { }
   @Override
   public void afterTextChanged(Editable s) {
       // every text change setText of textview 
       sTxt.setText(s);
   }
});

tvRate.setText(num.get(position));
.
.
.
. 
```

![在此处输入图像描述](../Images/5a32dbc3bb65de358671c4ba41e26c45.png)

# sql - 将外键约束添加到具有现有数据的表的主键列

> ID：13738890
> 
> 赞同：2
> 
> 时间：2012-12-06T07:32:30.297
> 
> 标签：sql, sql-server-2008-r2, foreign-keys, foreign-key-relationship

我正在尝试在现有表（表 A）的新创建列和新创建表（表 B）的主键列上添加外键约束。这是在 sql server 2008 上。当我添加关系时，Alter 表脚本失败。我还创建了在表 A 上创建的新列以允许空值。但是，当我尝试在检查现有数据时以 NO 保存时 - 我能够保存关系。这是在现有数据上创建外键约束的好方法，还是应该创建一个模拟多对多关系的新表（表 c）而不是将新列添加到表 A，这将使我能够创建外键约束，而不必对现有数据指定“不检查”，尽管实际关系是一对多的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:41:42.183

是的，你可以这样做`Checking Existing Data On Creation Or Re-Enabling = No`

> 如果您不想针对现有数据验证新的 CHECK 或 FOREIGN KEY 约束，请使用 WITH NOCHECK

![在创建时检查现有数据](../Images/c19c3011f82dd68ce030068b7c8c190f.png)

# sync - 适用于 SQL Server 和 Azure 的 Microsoft Sync Framework，主从？

> ID：13738900
> 
> 赞同：0
> 
> 时间：2012-12-06T07:33:32.137
> 
> 标签：sync, microsoft-sync-framework

如果我使用 Sync Framework，sql server 和 sql azure 数据库之间的同步如何工作？

它有主从规则吗？或者

它是否在连接之间发送双向数据并将更改附加到另一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:54:17.340

这取决于您，您可以使用集线器（主从）或点对点……您可以仅上传、仅下载或双向。

请参阅：[同步 SQL Azure](http://msdn.microsoft.com/en-us/library/ff928514.aspx)

如果你想要一个 n 层设置，也可以看看这个：[Walkthrough of Windows Azure Sync Service Sample](http://social.technet.microsoft.com/wiki/contents/articles/1568.walkthrough-of-windows-azure-sync-service-sample.aspx)

或者，如果您想要开箱即用的同步解决方案，请查看[Azure SQL 数据同步服务](http://msdn.microsoft.com/en-us/library/hh456371.aspx)

# django - 在 django 中查询多对多字段的正确方法是什么

> ID：13738903
> 
> 赞同：0
> 
> 时间：2012-12-06T07:34:04.667
> 
> 标签：django, django-models, django-orm

所以我有一个模型，

```
class Category(SmartModel):
    item=models.ManyToManyField(Item)
    title=models.CharField(max_length=64,help_text="Title of category e.g BreakFast")
    description=models.CharField(max_length=64,help_text="Describe the category e.g the items included in the category")
    #show_description=check box if description should be displayed
    #active=check box if category is still avialable
    display_order=models.IntegerField(default=0)
    def __unicode__(self):
        return "%s %s %s %s " % (self.item,self.title, self.description, self.display_order) 
```

如您所见，它有一个多对多字段

```
item=models.ManyToManyField(Item) 
```

我想返回模板中的所有项目，这是我的views.py

```
def menu(request):
    categorys= Category.objects.all()
    items= categorys.all().prefetch_related('item')
    context={
        'items':items,
        'categorys':categorys
    }
    return render_to_response('menu.html',context,context_instance=RequestContext(request)) 
```

这是我在模板中的做法，

```
 <ul>
{% for item in items %}
 <li>{{ item.item }}

 </li>
</ul>
{% endfor %} 
```

毕竟这就是它在我的网页中返回的内容，

```
<django.db.models.fields.related.ManyRelatedManager object at 0xa298b0c> 
```

我在做什么错，我真的环顾四周，但都是徒劳的，希望你能帮助我并提前感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:44:04.253

尝试使用：

```
categorys= Category.objects.prefetch_related('item').all() 
```

然后在模板中：

```
{% for category in categorys %}
    {% for item in category.item.all %}
        {{ item }}
    {% endfor %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:15:52.507

确切地说，您有一个多对多的经理。你需要实际查询一些东西......比如`all()`

```
{% for item in items %}
   {% for i in item.item.all %}
        {{ i }}
   {% endfor %}
{% endfor %} 
```

根据您的变量命名，我认为您将结果混淆`prefetch_related`为一堆`item`s. 它实际上是返回 Category 对象的 QuerySet。

所以称它们为类别会更直观。

```
{% for category in categories %}
   {% for item in category.item.all %} 
       {{ item }} {# ...etc #} 
```

# gwt - TabLayoutPanel 仅显示小部件 选项卡项可见

> ID：13738904
> 
> 赞同：2
> 
> 时间：2012-12-06T07:34:07.177
> 
> 标签：gwt, gwt2

TabLayoutPanel 不显示容器小部件的简单示例仅显示选项卡项。出了问题是它适用于 IE8

```
public class DemoGWT implements EntryPoint {
    RootPanel rp = RootPanel.get();

    public void onModuleLoad() {
        TabLayoutPanel panel = new TabLayoutPanel(25, Unit.PX);
        Label a = new Label("One Container");
        panel.add(a, "One Hdr");
        panel.add(new Label("Two Container"), "Two Hdr");
        panel.add(new Label("Three Container"), "Three Hdr");
        panel.add(new Label("Four Container"), "Four Hdr");
        panel.add(new Label("Five Container"), "Five Hdr");
        panel.add(new Label("Six Container"), "Six Hdr");

        rp.add(panel);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:03:24.667

不要混淆**Layout panel**和**panel**。使用 TabLayoutPanel 等布局面板时，请确保其父级及其上至 RootPanel 的父级都是布局面板。使用**RootLayoutPanel**而不是**RootPanel**。TabLayoutPanel 不会显示数据，除非您提及它的绝对高度。（注意 100% 或任何其他 % 都不起作用）。它必须是绝对的。

更改`RootPanel`和`RootLayoutPanel`使用`setHeight(height)`您的`TabLayoutPanel`. **不要以 %age 为单位提及身高。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-30T16:12:47.683

我遇到了 ie8 的问题，无法显示选项卡客户区。

我们已经创建了 ui XML 模板面板。我们的设置是在另一个 TabLayoutPanel 的选项卡中显示一个 TabLayoutPanel。第一个 TabLayoutPanel 是完全可见的，子 TabLayoutPanel 是不可见的，但不是“隐藏”的。

顺便说一句，这个问题在 Firefox 下没有表现出来！！！！！！

使 ResizeComposite 的所有子面板和根布局面板的最终子面板没有区别。但是我保留了那个 mod，因为它似乎是编码布局面板的正确 GWT 方式。

事实证明，问题的解决方案非常令人惊讶和出乎意料。

我在 EM 单位中指定了复合板的尺寸。当我将子 TabLayoutPanel 切换到 PX 单元并且它的子选项卡面板切换到 PX 单元时，一切都显示正常。

# python - 如何在不破坏程序的情况下应用 wx.NO_BORDER？

> ID：13738905
> 
> 赞同：1
> 
> 时间：2012-12-06T07:34:14.977
> 
> 标签：python, wxpython

我希望我的程序没有边框，但是每当我将 wx.NO_BORDER 设置为框架时，我都会得到这个蓝色的小盒子，它会带走所有东西。

我怎样才能设置 wx.no_border 而不破坏一切？

我已经尝试了一切！

谢谢。

代码：

```
import wx
class nGUI(wx.Frame):
  def __init__(self,parent,id):
    wx.Frame.__init__(self,parent,id,size=(500,160),style=wx.DEFAULT_FRAME_STYLE & wx.NO_BORDER & ~wx.SYSTEM_MENU)
    panel=wx.Panel(self)
    self.Centre()
    image_file = '../nGFX/nPySlim.png'
    bmp1 = wx.Image(image_file, wx.BITMAP_TYPE_ANY).ConvertToBitmap()
    panel.bitmap1 = wx.StaticBitmap(panel, -1, bmp1, (0, 0))
    textbox = wx.TextCtrl(panel.bitmap1, -1, pos=(245,50), size=(210, 28))
    font = wx.Font(14,wx.FONTFAMILY_SWISS,wx.FONTSTYLE_SLANT,wx.FONTWEIGHT_NORMAL)
    textbox.SetFont(font)
    wx.Button(panel.bitmap1, -1, pos=(413,90), size=(60, 25), label="Generate")

if __name__=='__main__':
  app=wx.PySimpleApp()
  frame=nGUI(parent=None,id=-1)
  frame.Show()
  app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:31:15.657

您需要使用`|`添加样式，并`^`删除它们

所以`wx.DEFAULT_FRAME_STYLE | wx.NO_BORDER ^ wx.SYSTEM_MENU`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:04:57.813

我不知道为什么你的程序只因`wx.NO_BORDER`标志而失败，但我不存在这个问题。

但是我运行它，我得到了一个分段错误（这表明 wxPython 的 C 代码有问题）

问题是`textbox`and的父级`wx.Button`是`panel.bitmap1`，而它应该是`panel`。这是有道理的，因为位图并不意味着有子项目。奇怪的是它是如何失败的，这是 wx.xml 的问题。

我正在运行这个版本的 wxPython：`2.8.12.1 (gtk2-unicode)`在 Python 2.7 上。考虑到问题出在 wxPython 本身，这可能很重要。

# android - 如果用户在不同的图像视图上滑动手指，如何检测 ImageViews 是否被触摸

> ID：13738906
> 
> 赞同：3
> 
> 时间：2012-12-06T07:34:14.183
> 
> 标签：android

这背后的基本思想是检测用户在滑动手指到一定数量的图像视图后滑动手指的不同视图的触摸事件，如果它们具有相似的颜色将破坏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:05:42.370

尝试这个..

```
public class SimpleActivity extends Activity implements SimpleGestureListener{

    private SimpleGestureFilter detector;
    private ImageView imgview;  
    private Bitmap bm; 
    private String image_URL="http://4.bp.blogspot.com/-k8Zxa7NXx5c/UAdrZw92MpI/AAAAAAAAAWI/KZ8n8sziFb4/s1600/Adobe-PDF-Alternative.jpg";
    private File file;
    private File folder;
    private int no=1;
    private int totalfiles;
    private int count;

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
             imgview=(ImageView)findViewById(R.id.imageView1);

             //Download from URL
             Downloadfromurl(image_URL);

            detector = new SimpleGestureFilter(this,this);
        }

     public boolean dispatchTouchEvent(MotionEvent me){ 
       this.detector.onTouchEvent(me);
      return super.dispatchTouchEvent(me); 
     }

     public void onSwipe(int direction) {
      String str = "";

      switch (direction) {

      case SimpleGestureFilter.SWIPE_RIGHT :
          {
              str = "Swipe Right";
              imgfrwd();
               break;
          }
      case SimpleGestureFilter.SWIPE_LEFT :
      {
          str = "Swipe Left";
          imgbkwd();
           break;
      }
      case SimpleGestureFilter.SWIPE_DOWN : 
          {
              str = "Swipe Down";
              imgbkwd();
               break;
          }
      case SimpleGestureFilter.SWIPE_UP : 
      {
          str = "Swipe Up";
          imgfrwd();
          break;
      }

      } 
       Toast.makeText(this, str, Toast.LENGTH_SHORT).show();
     }

     public void onDoubleTap() {
        Toast.makeText(this, "Double Tap", Toast.LENGTH_SHORT).show(); 
     }

     private Bitmap LoadImage(String URL, BitmapFactory.Options options)
      {     
       Bitmap bitmap = null;
       InputStream in = null;     
          try {
              in = OpenHttpConnection(URL);
              bitmap = BitmapFactory.decodeStream(in, null, options);
              in.close();
          } catch (IOException e1) {
          }
          return bitmap;             
      }

    private InputStream OpenHttpConnection(String strURL) throws IOException{
     InputStream inputStream = null;
     URL url = new URL(strURL);
     URLConnection conn = url.openConnection();

     try{
      HttpURLConnection httpConn = (HttpURLConnection)conn;
      httpConn.setRequestMethod("GET");
      httpConn.connect();

      if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
       inputStream = httpConn.getInputStream();
      }
     }
     catch (Exception ex)
     {
     }
     return inputStream;
    }

    void dispimg()
    {
          Bitmap bmp = BitmapFactory.decodeFile(folder + "/page"+no+".PNG");
          imgview.setImageBitmap(bmp);

    }

    void loadfromurl()
    {
         BitmapFactory.Options bmOptions;
           bmOptions = new BitmapFactory.Options();
           bmOptions.inSampleSize = 1;
           bm = LoadImage(image_URL, bmOptions);
          imgview.setImageBitmap(bm);
    }

void imgfrwd()

{

no+=1;
    count=countfiles();
    if(count>=no)
        dispimg();
}
void imgbkwd()
{

    no-=1;
    if(no>=0)
    dispimg();
}

int countfiles()
{
    String[] fileNames = folder.list();
    totalfiles = 0;
    for (int i = 0; i< fileNames.length; i++)
    {
      if (fileNames[i].contains(".PNG"))

          totalfiles++;

      }

    return totalfiles;
}
} 
```

# svn - 如何在 SVN 中设置自定义属性（并取回所有已设置的文件）？

> ID：13738910
> 
> 赞同：2
> 
> 时间：2012-12-06T07:34:31.500
> 
> 标签：svn, tortoisesvn

我有一个 svn 存储库，并且正在寻找向文件添加自定义属性的可能性。

稍后我想从存储库中获取包含具有给定值的给定属性的所有文件。

例子：

我想设置一个名为`label`具有值的文件属性`123_ABC`。

之后我想从存储库中取出所有标记为“123_ABC”的文件。

这有可能吗？

我正在使用 SVN 和 TortoiseSVN

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:39:16.920

1.  你应该明白，**属性使用的相反方向**隐含
2.  您无法获取仅具有已知属性值的文件，而忽略属性名称，因为同一文件的不同属性可以具有相同的值
3.  对于您的任务（从属性到文件），您必须
    *   对存储库中的所有文件使用枚举
    *   应用`svn propget label`（或`svn proplist`）并验证结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:50:43.923

您是否正在为所有修订搜索具有此属性的所有文件？是的，这是可能的，但它很慢而且不容易做到：

```
$ svn log --diff $REPO 
```

这将对日志进行差异化。当它看到属性差异时，它会打印出属性差异，就像 Subversion 对文件进行比较时所做的那样。当然，这将区分日志中的所有文件，这非常非常慢并产生大量输出。您可以使用`grep`或类似的东西来查找版本。

但是，如果你这样做，你还不如跑到楼下的星巴克，在等待的时候喝杯咖啡。哎呀，沿着街区跑到那家不错的咖啡店，在你等待的时候喝一杯拿铁。更好的是，飞到意大利，跑到海岸，在等待的时候在咖啡馆里喝一杯拿铁。这需要一段时间。

如果您发现这会阻止您进行此练习，那很好！

* * *

或者，您只是在当前工作目录中的特定文件上搜索此属性？如果是这样，事情并没有那么糟糕：

```
$ svn plist --depth=infinity --verbose . 
```

这将打印出工作目录中所有文件的所有属性及其值。这将需要一段时间，但不会很长。你会很幸运能在它完成之前下楼到星巴克。再一次，我会将它传送到`less`然后搜索我正在寻找的属性。由于您使用的是 Windows，请保存此命令生成的输出，并使用 Notepad++ 之类的工具来搜索该文件。

# c# - 发送用户控件作为参考？

> ID：13738914
> 
> 赞同：1
> 
> 时间：2012-12-06T07:34:50.487
> 
> 标签：c#, .net, winforms, controls

我有一个主窗体和几个用户控件。现在，我正在使用活动表单通过另一个用户控件访问其中一个用户控件，然后引用该用户控件。但是，如果焦点在其他窗口上，这将变得很困难。有没有办法在不实例化用户控件的新实例或使用活动表单的情况下获取用户控件的实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:41:12.737

您可以通过[`Application.OpenForms`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.openforms.aspx)属性访问托管用户控件的表单，稍后您可以从表单中获取用户控件列表，例如：

```
if ((Application.OpenForms["yourForm"] as Form1) != null)
{
    var YourUserControlList = 
                      (Application.OpenForms["yourForm"] as Form1)
                                    .Controls.OfType<YourUserControl>()
                                    .ToList();
} 
```

`yourForm`您的表单的 ID在哪里，并且`YourUserControl`是您的用户控件的类名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:42:42.703

也许您需要做的实际上是将一个表单上的事件公开并向另一个表单添加处理程序，以便在第一个表单触发其事件时触发它。这种方式有一种正式的方式供一个人参考或与另一个人关联。

# c# - 为对象收集引发事件

> ID：13738918
> 
> 赞同：0
> 
> 时间：2012-12-06T07:35:15.247
> 
> 标签：c#

如果集合被修改，如何引发事件。类型是对象，如：

```
public object Source
{
   get;
   set;
} 
```

我想在 OnPropertyChanged 中引发 Source 的 NotifyCollectionChangedEvent

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:47:48.263

```
private object _Source;
public object Source
{
    get{
        return this._Source;
    }
    set{
        this._Source = value;
        NotifyPropertyChanged("Source");
    }
} 
```

# django - 如何翻译 django 模型

> ID：13738919
> 
> 赞同：1
> 
> 时间：2012-12-06T07:35:16.213
> 
> 标签：django, django-models, django-admin

如何`verbose_name`在每个字段上不使用参数的情况下翻译 django 模型？发生通过寻找添加新字段并`verbose_name`通过字段名称自动为其提供参数的中间类继承所有模型的练习？还是将翻译整合到表格中的最佳实践？也许我应该`verbose_name`在创建时提供每个模型属性？

我不想这样做：

```
class Currency(models.Model):
    name=models.CharField(max_length=32, verbose_name=_("name"))
    symbol=models.CharField(max_length=32, verbose_name=_("symbol"))
    iso_4217=models.CharField(max_length=3)

    def __unicode__(self):
        return self.name

    class Meta:
        verbose_name=_(u'currency')
        verbose_name_plural=_(u'currencies') 
```

我想做这样的事情：

```
class BaseModel(models.Model):
    __setattr__(self, name, value):
        ''' Some needles parts of method was cutted out to make it easily
        '''
        value.verbose_name=_(name)
        value.verbose_name_plural=_("%ss" % name)
        self.super(BaseModel, name, value)

class Currency(models.Model):
    ''' Every field of this class whould be supplied by verbose_name and verbose_name_plural
    '''
    name=models.CharField(max_length=32)
    symbol=models.CharField(max_length=32)
    iso_4217=models.CharField(max_length=3) 
```

也许 django 有自己的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:41:54.100

我认为你需要阅读[这篇文章](https://docs.djangoproject.com/en/dev/topics/i18n/translation/)。

要本地化您的应用程序，您需要将每个 eglish 字符串包装到函数 ugettext 的参数中，例如`'foo'`-> `ugettext('foo')`。

然后就可以运行了`manage.py makemessages --locale=<locale>`，哪里`<locale>`是[语言代码](https://docs.djangoproject.com/en/dev/topics/i18n/#term-language-code)。

它在 ./locale/language_code/*.po 内创建一个文件，您需要将此文件中的字符串翻译成您的语言，例如

```
#: env_website/lib/python2.6/site-packages/Django-1.3.1-py2.6.egg/django  /conf/global_settings.py:44
msgid "Arabic"
msgstr "Арабский" 
```

之后，您需要运行命令`manage.py compilemessages`

而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T15:12:11.517

您可以覆盖模型的[add_to_class](https://github.com/django/django/blob/master/django/db/models/base.py#L254)类方法。每个添加的字段都会调用它。

如果未提供属性名称，请查看字段中的[contribute_to_class如何从属性名称中设置。](https://github.com/django/django/blob/master/django/db/models/fields/__init__.py#L253)`verbose_name`

但是，我不推荐这种方法，因为`gettext`无法为该字段创建翻译目录。

# php - implode() [function.implode]：当 $_POST['duration'] == EMPTY 时传递的参数无效

> ID：13738920
> 
> 赞同：1
> 
> 时间：2012-12-06T07:35:18.050
> 
> 标签：php, mysql

我有一个多选字段

```
<select name="duration[]" id="duration" title="Duration" multiple="multiple" size="3">
<option value="1">1 Months</option>
<option value="2">2 Months</option>
<option value="3">3 Months</option>
</select> 
```

我的 php 代码内爆多个值，即 123 为 1、2、3 并将其插入数据库。问题是该字段不是必填字段，当我将其留空时，它会给我错误（传递的参数无效）

我的php代码如下

```
$duration = array();
$duration = $_POST['duration'];
if($duration)
   {
   foreach($duration as $value)
   {
   $months[] = $value;
   }
}
$sql = "SELECT * FROM tbl_courses WHERE duration IN (".implode($months, ',').") "; 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:45:14.820

您遇到的两个问题是您尝试对可能不是数组的用户输入进行内爆，并且您的代码容易受到 SQL 注入的攻击。

要解决这些问题，您应该首先检查它是否是一个带有 的数组`is_array()`，然后检查它是否有任何带有 的元素`count()`，最后 implode 但用于`array_map()`过滤值以防止 SQL 注入。这不仅可以防止 SQL 注入，还可以防止查询中的语法错误，因为字符串必须在`IN`子句中引用。

```
function getInt($i) {
    return (int)$i;
}

$inClause = '';

if(isset($_POST['duration']) && is_array($_POST['duration']) && count($_POST['duration']) > 0)
{
    $inClause = 'WHERE ';
    $inClause .= implode(', ', array_map('getInt', $_POST['duration']));
}

$sql = "SELECT * FROM tbl_courses $inClause"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:52:45.450

```
$duration = array();
$duration = $_POST['duration'];
$sql = FALSE;
if($duration&&is_array($duration))
   {
   foreach($duration as $value)
   {
   $months[] = $value;
   }
 $sql = "SELECT * FROM tbl_courses WHERE duration IN (".implode($months, ',').") ";
}

if($sql){
//do something with sql
} 
```

使用 is_array 检查 $duration 是否是一个数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T07:37:54.873

如果不需要，只需删除 WHERE 条件

```
$sql = "SELECT * FROM tbl_courses";

if (count($months)>0)
    $sql .= " WHERE duration IN (".implode($months, ',').") "; 
```

并更好地使用`isset($_POST["x"])`，而不仅仅是一个`if`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T07:38:18.667

所以让我们说`$_POST['duration']`是`null`。

```
$duration = array();
$duration = $_POST['duration']; 
```

那么你就没有内爆的价值，因为你`foreach`不会被执行。一种解决方案是将您的代码`if( $_POST['duration'] )`分别放入`if( count($months) )`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T07:44:22.517

选项之一是类型转换。

```
$duration = (array)$_POST['duration']; 
```

由于您在查询中使用 $_POST['duration'] 的内容，请注意 SQL 注入技术。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T07:49:22.943

检查是否`$_POST['duration']`已设置并构建您的 WHERE 语句，如果没有，请将其留空：

```
$where = !$_POST['duration'] ? '' : 'WHERE duration IN ('.implode($_POST['duration'],',').')';
$sql = 'SELECT * FROM tbl_courses '.$where; 
```

我还删除了一些不必要的变量声明和循环`$duration`。

请注意，您需要清理数据以防止 SQL 注入。在这种情况下，最简单的方法是遍历这些值并将它们转换为`int`：

```
foreach($_POST['duration'] as $value) {
   $months[] = (int)$value;
}
$where = !$months ? '' : 'WHERE duration IN ('.implode($months,',').')';
$sql = 'SELECT * FROM tbl_courses '.$where; 
```

# sql - 搜索字符串中的字符集

> ID：13738922
> 
> 赞同：2
> 
> 时间：2012-12-06T07:35:34.120
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

如何查询我是否要检查字符串是否包含任何顺序的数字（字符），如 1、2、3、4、5、6、7。可以通过在第 1,2 号的子句上编写`AND`语句来实现，如下所示，`LIKE`

```
Where days like '%1%' and days like '%2%' ...... So on 
```

是否有任何查询检查字符串中存在的特定字符。或者上面的例子如何通过简写查询来实现。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:25:57.467

一种方法是创建一个包含您想要搜索的所有字符串的表。

例如

```
DECLARE  @searchstr TABLE (s VARCHAR(10))
INSERT INTO @searchstr VALUES ('1'),('2'),('3'),('4'),('5'),('6'),('7')

DECLARE  @tbl TABLE (days VARCHAR(100))
INSERT INTO @tbl VALUES ('1234567'),('123'),('1122334'),('7654321')  

SELECT   t.days 
FROM @tbl t
LEFT JOIN  @searchstr s 
        ON t.days LIKE '%' + s.s+ '%'
GROUP BY t.days HAVING COUNT(DISTINCT s.s) = 7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:08:52.750

我会`isnumeric`用来确保它们都是数字，然后测试 0、8 或 9 而不是 1-7，因为它更短。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T07:40:31.853

不会[CONTAINS()](http://msdn.microsoft.com/en-us/library/ms187787.aspx)为您工作吗？

还要注意如何[将 word 拆分为 char array](https://stackoverflow.com/questions/8517816/t-sql-split-word-into-characters)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T14:59:11.623

您可以使用 CHARINDEX

```
CHARINDEX(stringthatcontainschars1, '1', numofpositiontostartlookingat)
Output: 24, the position that your searched for char is at. returns zero if not found 
```

如果您要在列或字符串中查找数字 1，您可以输入：

```
CHARINDEX(columnname, '1', 1)
This would search for '1' beginning at position 1. 
```

您可以根据它是否返回 0 来确定 char 是否在字符串中，然后编写您需要的任何代码来执行条件语句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T08:00:25.273

我建议调查一下`[PATINDEX][1]`。来自 MSDN：

> 在所有有效的文本和字符数据类型上，返回指定表达式中第一次出现模式的起始位置，如果未找到该模式，则返回零。

你可能最终会使用类似的东西`WHERE PATINDEX(%[0-9]%', foo) > 0`

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-06T07:56:34.007

如果天是昏迷分开的，你可以使用[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)

```
SELECT FIND_IN_SET(1, days) AND FIND_IN_SET(2, days); 
```

它是不同的，不是更好，但据我所知，没有其他原生方式。LIKE 可能会比 find_in_set 快得多

# cordova - 无法在 PhoneGap 中将文件写入 Android 2.3 设备

> ID：13738926
> 
> 赞同：0
> 
> 时间：2012-12-06T07:35:42.217
> 
> 标签：cordova

当我在真正的 Android 2.3 设备上运行基于 PhoneGap 的 Android 应用程序时，我刚刚发现 window.requestFileSystem 无法执行并报告错误代码 9。

但它在虚拟 Android 4.2 设备中成功执行。

任何人都可以帮助我吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:19:52.290

听起来您需要执行以下操作：

*   检查您对应用程序的权限 - 如果应用程序在 Android 4.2 的模拟器上运行，它们很可能是正确的
*   确保您的 SD 卡已安装且未被手机软件自动安装。根据设备的不同，当您将设备插入计算机时，它可能会尝试自动安装 SDCard，使其无法被手机读取。

Google Group 上有一个类似的帖子： [https ://groups.google.com/forum/?fromgroups=#!topic/phonegap/J6UXAwmj040](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/J6UXAwmj040)

# android - SQLite 难以从光标中检索值

> ID：13738928
> 
> 赞同：1
> 
> 时间：2012-12-06T07:35:51.637
> 
> 标签：android, sqlite

谁能告诉我我做错了什么？我正在查询的表是空的，所以我认为游标应该是空的。但相反，它返回一个具有 1 行和 1 列的游标。即便如此，我不明白为什么这会导致错误。我要做的就是从我的查询中返回单个值（如果存在）。

有人可以帮我理解这一点吗？谢谢！

```
Cursor cursor = db.rawQuery("SELECT max(GAME_COLUMN) FROM GAMES_TABLE", null); 
if (cursor.moveToNext()) {
     System.err.println("why am I here?");
     nextGame = cursor.getInt(cursor.getColumnIndex("GAME_COLUMN"));
} 
```

> 对字段槽 0,-1 的错误请求。numRows = 1，numColumns = 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:41:02.283

这是因为结果中没有名为 GAME_COLUMN 的列。进行查询

```
SELECT max(GAME_COLUMN) AS GC FROM GAMES_TABLE 
```

然后查询GC：-

```
Cursor cursor = db.rawQuery("SELECT max(GAME_COLUMN) AS GC FROM GAMES_TABLE", null); 
if (cursor.moveToNext()) {
    System.err.println("why am I here?");
    nextGame = cursor.getInt(cursor.getColumnIndex("GC"));
} 
```

# c# - WebClient.DownloadString 提供第一次机会异常

> ID：13738931
> 
> 赞同：6
> 
> 时间：2012-12-06T07:36:25.773
> 
> 标签：c#, exception, first-chance-exception

对 WebClient.DownloadString 的调用给出了第一次机会异常：

```
IOException: The specified registry key does not exist. 
```

一段时间以来，我收到了在现有代码中运行我们的软件的第一次机会异常。

我们的政策是我们的代码应该在不给出第一次更改异常的情况下运行，以使调试更容易。

在调用 DownloadString 时和远程主机不可用的远程处理场景中，WebClient 类中发生第一次机会异常。

有谁知道我们如何防止这种第一次机会异常？

我在 Windows 8 机器上运行 VS 2010。据我所知，我没有运行任何防病毒或防火墙。

该代码在启用调试的 .Net 框架 4.0 的 x86 模式下运行。代码是 VB.Net 和 C# 的混合体

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-13T17:56:58.960

这是一个 .NET 问题，Microsoft 在这里发布了更新：

[http://technet.microsoft.com/en-us/security/bulletin/ms12-074](http://technet.microsoft.com/en-us/security/bulletin/ms12-074)

您可以添加缺少自己的注册表项：

```
Registry location: HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework  
DWORD (32-bit) Value name: LegacyWPADSupport
Value data: 0 
```

对于 64 位机器：

```
Registry location: HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\.NETFramework
DWORD (32-bit) Value name: LegacyWPADSupport
Value data: 0 
```

# macos - 如何将整数从 NPAPI 插件返回到 JavaScript

> ID：13738932
> 
> 赞同：1
> 
> 时间：2012-12-06T07:36:28.023
> 
> 标签：macos, safari, npapi, firebreath

我正在用 NPAPI 编写一个 safari 插件。如何将整数从 NPAPI 插件（不使用 FireBreath）返回到 JavaScript？javascript:

```
<html>
<head>
<script>
function run() {
    var plugin = document.getElementById("pluginId");
    var number = plugin.getBrowserName();
    alert(number);
}
</script>
</head>
<body >
<embed width="0" height="0" type="test/x-open-with-default-plugin" id="pluginId">
<button onclick="run()">run</button>
</body>
</html> 
```

插件代码：

```
bool plugin_invoke(NPObject *obj, NPIdentifier methodName, const NPVariant *args, uint32_t argCount, NPVariant *result) {
// Make sure the method called is "open".
NPUTF8 *name = browser->utf8fromidentifier(methodName);
if(strcmp(name, plugin_method_name_getBrowserName) == 0) {
  //what can i do here?
}
return true; 
```

}

如何从 plugin.getBrowserName() 返回一个数字？

请帮忙！

我找到了这个线程：[Return an integer/String from NPAPI plugin to JavaScript(Not using FireBreath)](https://stackoverflow.com/questions/12837946/return-an-integer-string-from-npapi-plugin-to-javascriptnot-using-firebreath)，但我不知道这些代码在哪里

```
char* npOutString = (char *)pNetscapefn->memalloc(strlen(StringVariable) + 1);
if (!npOutString) return false; strcpy(npOutString, StringVariable); 
STRINGZ_TO_NPVARIANT(npOutString, *result); 
```

放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:16:30.103

你看过[http://npapi.com/tutorial3](http://npapi.com/tutorial3)吗？

返回值出现在 NPVariant* 结果中。去看看[NPVariant](https://developer.mozilla.org/en-US/docs/NPVariant)的文档，你会看到有一个类型，然后是一个用于不同类型数据的联合。您正在谈论的字符串代码将代替您的“//我可以在这里做什么？” 评论。要返回一个整数，你可以这样做：

```
bool plugin_invoke(NPObject *obj, NPIdentifier methodName, const NPVariant *args, uint32_t argCount, NPVariant *result) {
// Make sure the method called is "open".
NPUTF8 *name = browser->utf8fromidentifier(methodName);
if(strcmp(name, plugin_method_name_getBrowserName) == 0) {
  result->type = NPVariantType_Int32;
  result->intValue = 42;
}
return true; 
```

您还可以使用 *_TO_NPVARIANT 宏（在上面的[NPVariant 文档](https://developer.mozilla.org/en-US/docs/NPVariant)链接中记录），如下所示：

```
bool plugin_invoke(NPObject *obj, NPIdentifier methodName, const NPVariant *args, uint32_t argCount, NPVariant *result) {
// Make sure the method called is "open".
NPUTF8 *name = browser->utf8fromidentifier(methodName);
if(strcmp(name, plugin_method_name_getBrowserName) == 0) {
  INT32_TO_NPVARIANT(42, *result);
}
return true; 
```

如果您查看[INT32_TO_NPVARIANT 宏的源代码，](http://code.google.com/p/npapi-sdk/source/browse/trunk/headers/npruntime.h#155)您会发现它的作用与我在上面所做的相同，因此两者是等价的。

# asp.net - 使用 ASP.NET 打开本地文件

> ID：13738936
> 
> 赞同：0
> 
> 时间：2012-12-06T07:36:39.513
> 
> 标签：asp.net, html, hyperlink, asp.net-4.0

我正在使用 ASP.Net 4，此代码用于打开本地文件（此站点是 IISlocal 和本地 25.docx 文件）

地址文件：

```
\\shear_file\Site\Files\25.docx 
```

关联：

```
 <a href="file://///shear_file/Site/Files/25.docx" >25</a> 
```

如果我使用 IIS 运行该站点并单击链接，它不会打开。但是保存此页面并打开页面存储并单击链接。它打开的打开文件！

并使用此代码：

```
Response.Redirect(@"file://///shear_file/Site/Files/25.docx"); 
```

打不开文件！

# iphone - 我的子视图没有响应点击事件

> ID：13738941
> 
> 赞同：0
> 
> 时间：2012-12-06T07:36:54.710
> 
> 标签：iphone, ios, gridview, touch

我正在创建一个显示像 ActionSheetView 这样的子视图的应用程序，并且我已经通过插座添加了 UIGridView 和 UIPageControll，但是现在当我单击它没有响应的单元格时，我的子视图是一个带有 nib 文件的 ViewController。

如果我创建一个按钮并以编程方式添加到我的弹出视图中，那么它将显示，并获得点击事件，但插座中的任何内容都没有响应。

我试图在我的子视图中设置用户交互启用，但它没有任何好处。

这是我通过单击 barbutton 显示子视图的第一个视图的代码：

```
- (void)popUpView:(id)sender {
    //self.view.backgroundColor = [UIColor darkGrayColor];

   bGView = [[UIView alloc] init];   /this is the background view and all view is added in it
    bGView.frame = CGRectMake(0,0,320,490);
    bGView.backgroundColor = [UIColor clearColor];
    bGView.alpha = 0.8 ;

    CGRect  viewFrame = CGRectMake(10, 90, 300, 300);
    aPopUpViewController = [[PopUpViewController alloc] initWithNibName:@"PopUpViewController" bundle:nil];        //this is my view controller and when this shows on screen it display my greed view

    aPopUpViewController.view.frame = viewFrame; 
    aPopUpViewController.view.userInteractionEnabled = YES;

    [bGView addSubview:aPopUpViewController.view];

    button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button addTarget:self 
               action:@selector(aMethod:)
     forControlEvents:UIControlEventTouchDown];
    button.backgroundColor = [UIColor clearColor];
    [button setBackgroundImage:[UIImage imageNamed:@"close_button.png"] forState:UIControlStateNormal];
    button.frame = CGRectMake(-1, 80, 30, 30);
    [bGView addSubview:button];

    //for view animation

    /*
    // from bottom to center animation

    [bGView setFrame:CGRectMake( 0.0f, 480.0f, 320.0f, 480.0f)]; //notice this is OFF screen!
    [UIView beginAnimations:@"animateTableView" context:nil];
    [UIView setAnimationDuration:0.4];
    [bGView setFrame:CGRectMake( 0.0f, 0.0f, 320.0f, 480.0f)]; //notice this is ON screen!
    [UIView commitAnimations];*/

    //for page like effect

    /*[UIView transitionWithView:self.view duration:0.5
                       options:UIViewAnimationOptionTransitionCurlUp //change to whatever animation you like
                    animations:^ { [self.view addSubview:bGView]; }
                    completion:nil];*/

    /*CATransition *transition = [CATransition animation];
     transition.duration = 1.0;
     transition.type = kCATransitionReveal; //choose your animation
     [bGView.layer addAnimation:transition forKey:nil];
     [self.view addSubview:bGView];*/

    aPopUpViewController.view.userInteractionEnabled = YES;
    bGView.userInteractionEnabled = YES;
    self.view.userInteractionEnabled = YES;

    bGView.transform = CGAffineTransformMakeScale(0.01, 0.01);
    [UIView animateWithDuration:0.2 delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
        bGView.transform = CGAffineTransformIdentity;
    } completion:^(BOOL finished){
        // do something once the animation finishes, put it here
    }];

     [self.view addSubview:bGView];

    addLabel.enabled = NO;
    clipArt.enabled = NO;
    emailItem.enabled = NO;
    closeButton.enabled = NO;
    self.navigationController.topViewController.title = @"Choose ClipArt";

    ExampleAppDataObject* theDataObject = [self theAppDataObject];

   theDataObject.navBarHide = @"no";

}

- (void)aMethod:(id)sender
{
    //[aPopUpViewController.view removeFromSuperview];
    //[button removeFromSuperview];

    /*[UIView transitionWithView:self.view duration:0.5
                       options:UIViewAnimationOptionTransitionCrossDissolve//change to whatever animation you like
                    animations:^ { [bGView removeFromSuperview]; }
                    completion:nil];*/

    [bGView removeFromSuperview];

    addLabel.enabled = YES;
    clipArt.enabled = YES;
    emailItem.enabled = YES;
    closeButton.enabled = YES;

    self.navigationController.topViewController.title = @"Greeting's";

    ExampleAppDataObject* theDataObject = [self theAppDataObject];

    theDataObject.navBarHide = @"yes";
} 
```

这就是我的屏幕的样子 ![在此处输入图像描述](../Images/2d1bc8be0b034352135ddff6f89a6526.png)

**更新**

现在我发现了我的问题，问题是我给了我的整个视图一个点击列表，现在我将网格视图添加为子视图，所以当我点击单元格而不是选择单元格时，它会生成视图点击手势，这就是为什么单元格没选过，我就是这么想的。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:39:54.967

在主视图中添加每个子视图后添加此行..

```
[self.view bringSubviewToFront:yourGridView]; 
```

# android - 使用 int[] 数组设置微调器的下拉列表

> ID：13738942
> 
> 赞同：0
> 
> 时间：2012-12-06T07:36:56.527
> 
> 标签：android, spinner, android-arrayadapter

在我的应用程序中，我有一个微调器，用户可以在其中选择一个数字。我尝试了以下方法，它可以工作，但它需要`string-array`values.XML 文件中的一个，这对我来说是不切实际的，因为我有几个范围不同（80-100 个项目长）。

```
 ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
        R.array.number_array, android.R.layout.simple_spinner_item);
    spinner.setAdapter(adapter); 
```

这行得通，但它需要这个；

```
<string-array name="number_array">
<item>1</item>
.....
</string-array> 
```

所以我创建了一个 int 数组 -

```
 int [] intArray = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}; 
```

但是像这样创建一个数组适配器是行不通的

```
 ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
        intArray, android.R.layout.simple_spinner_item); 
```

有什么办法可以做到这一点，还是`string-arrays`我的 values.xml 文件中有很多长数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:20:38.437

好的，由于该问题下的评论中提供的链接，我解决了我的问题，方法是首先`int[]`使用此链接将我的数组转换为字符串数组

*   [将 int 数组转换为 String 数组](https://stackoverflow.com/questions/3619850/converting-an-int-array-to-a-string-array)

然后我使用此链接中的答案将微调器的值设置为字符串数组

*   [Android：以编程方式从数组创建微调器](https://stackoverflow.com/questions/2784081/android-create-spinner-programmatically-from-array)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:16:31.667

使用下面的代码

```
 String[] array = {"1", "2","3", "4","5","6","7","8","9","10"};
  ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>
  (this,android.R.layout.simple_spinner_item, array); 
```

代替

```
 ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
  intArray, android.R.layout.simple_spinner_item); 
```

# c - 如何使用 char 数组将位字段打包成短整数？

> ID：13738944
> 
> 赞同：1
> 
> 时间：2012-12-06T07:37:04.683
> 
> 标签：c, bit-fields, bit-packing

在以下 2 个结构中，

```
typedef struct _a {
    short a1:13 __attribute__((packed));
    char a2[4]  __attribute__((packed));
} a;

typedef struct _b {
    short b1:10 __attribute__((packed));
    short b2:10 __attribute__((packed));
    short b3:12 __attribute__((packed));
} b; 
```

在`struct b`中，我发现 b2 的位与 b1 打包在一起，而 b3 的位与 b2 打包。它最终产生 4 个字节的值。

我期待有类似的行为，`struct a`但我没有看到相同的行为。前 2 个字节被 a1（未使用的 5 位）占用，随后的 4 个字节用于 a2。

这种行为是预期的吗？为什么我不能将 char[4] 与 short:13 一起打包？有没有办法实现它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T08:01:41.500

`a2`不是位域，因此它永远不会与`a1`. 标准说

> 存储在任何其他对象类型的非位域对象中的值由 n × CHAR_BIT 位组成，其中 n 是该类型对象的大小，以字节为单位。该值可以被复制到 unsigned char [n] 类型的对象中（例如，通过 memcpy）；结果的字节集称为值的对象表示。

因此，这样的子对象*必须*是可寻址单元，并且该规则不可能有例外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:52:29.613

（评论太长，所以我把它作为答案）

要将所有字段打包在一起，您必须将数组替换为 4 个字段：

```
typedef struct _a {
    short a1:13 __attribute__((packed));
    char a2_0:8 __attribute__((packed));
    char a2_1:8 __attribute__((packed));
    char a2_2:8 __attribute__((packed));
    char a2_3:8 __attribute__((packed));
} a; 
```

# python - 空列表的所有内置函数

> ID：13738955
> 
> 赞同：2
> 
> 时间：2012-12-06T07:37:49.167
> 
> 标签：python

任何人都可以解释为什么在这种情况下在 python 内置 buinction中`all`返回？`True``all([])`

```
In [33]: all([])
Out[33]: True

In [34]: all([0])
Out[34]: False

In [35]: __builtins__.all([])
Out[35]: True 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T08:56:32.337

我不相信任何其他答案都真正解决了*为什么*会这样的问题。

Python 的定义`all()`来自布尔逻辑。例如，如果我们说“所有天鹅都是白色的”，那么一只黑天鹅就反驳了这个说法。然而，如果我们说“所有的独角兽都是粉红色的”，逻辑学家会认为这是一个正确的陈述，因为没有非粉红色的独角兽。或者换句话说，“所有”都是[空洞的](http://en.wikipedia.org/wiki/Vacuous_truth)。

实际上，它给了我们一个有用的不变量。如果`all(A)`和`all(B)`都为真，那么 的组合`all(A + B)`也为真。如果`all({})`是假的，我们应该有一个不太有用的情况，因为组合两个表达式，其中一个是假的突然会给出一个意想不到的真结果。

因此 Python`all([]) == True`取自布尔逻辑，并与其他具有类似结构的语言保持一致。

回到 Python 中，在许多情况下，空洞的事实使算法变得更简单。例如，如果我们有一棵树并且想要验证所有节点，我们可能会说一个节点是有效的，如果它满足某些条件并且它的所有子节点都是有效的。有了另一种定义，`all()`它变得更加复杂，因为我们不得不说它是有效的，如果它满足条件并且没有孩子或者它的所有孩子都是有效的。

```
class Node:
    def isValid(self):
        return some_condition(self) and all(child.isValid for child in self.children) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T07:40:00.497

从[文档](http://docs.python.org/2/library/functions.html#all)：

> 如果可迭代对象的所有元素都为真（或可迭代对象为空），则返回 True。

所以，粗略地说，它只是这样定义的。

你可以通过使用来解决这个问题

```
list = []
if list and all(list):
    pass 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T07:40:10.457

[正如文档所说](http://docs.python.org/2/library/functions.html#all)，`all`相当于：

```
def all(iterable):
    for element in iterable:
        if not element:
            return False
    return True 
```

对于空`iterable`的循环体永远不会执行，所以`True`会立即返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T15:09:26.983

任何表达式`all`都可以重写，`any`反之亦然：

```
not all(iterable)
# is the same as:
any(not x for x in iterable) 
```

并且对称

```
not any(iterable)
# is the same as:
all(not x for x in iterable) 
```

这些规则要求`all([]) == True`.

* * *

该函数`all`对于可读的断言非常有用：

```
assert all(required_condition(x) for x in some_results_being_verified) 
```

（如果一个任务没有结果，那还不错，但是如果任何结果不正确，那么事情就会很糟糕。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T13:30:29.790

对此的另一种解释是`all`和是二元运算符和任意长参数`any`的泛化。因此，和可以定义为：`and``or``all``any`

```
def all(xs):
  return reduce(lambda x,y: x and y, xs, True)

def any(xs):
  return reduce(lambda x,y: x or y, xs, False) 
```

和参数表明`True`和。`False``all([]) == True``any([]) == False`

# iphone - 如何在iphone的方法中调用方法

> ID：13738956
> 
> 赞同：0
> 
> 时间：2012-12-06T07:37:50.900
> 
> 标签：iphone, objective-c

当我在像这样的另一个类的方法中调用方法时，我遇到了问题，当有人单击按钮//在 ViewController.m 按钮方法中时，我有按钮方法

```
-(IBAction)login:(id)sender
{
    DBHelper *objdb = [[DBHelper alloc] init];
    [objdb loginnow:textname.text andpassword:textpassword.text]; 
} 
```

并且此按钮方法在 DBhelper.m 文件中调用此方法并成功调用此方法

```
-(void) loginnow:(NSString *) username andpassword:(NSString *) password
{
    [self createEditableCopyOfDatabaseIfNeeded];
    [self initializeDatabase];
    const char *sql;

    NSString *querySQL = [NSString stringWithFormat: @"SELECT username, password FROM CONTACT WHERE username='%@' AND password='%@'",username,password]; 
    sql = [querySQL UTF8String];

    if (sqlite3_prepare_v2(database, sql, -1, &init_statement, NULL) != SQLITE_OK) {
        NSAssert1(0, @"Error: failed to prepare statement with message '%s'.", sqlite3_errmsg(database));
    }

    while (sqlite3_step(init_statement) == SQLITE_ROW) 
    {
        NSLog(@"char sql = %s" ,sql);

        dbusername = [NSString stringWithUTF8String:(char *)sqlite3_column_text(init_statement,0)];
        dbpassword = [NSString stringWithUTF8String:(char *)sqlite3_column_text(init_statement,1)];

    }
    if ([dbusername isEqualToString:username] && [dbpassword isEqualToString:password])
    {
        //DBHelper.callingViewController = self;

        [self.callingViewController addview]; 
    }

    else if (dbusername != username ||  dbpassword != password)
    {

        NSLog(@"dbusername is = %@" ,dbusername);
        NSLog(@"dbpassword is = %@" ,dbpassword);
        UIAlertView *alert = [[UIAlertView alloc]
                              initWithTitle:@"Login Failed"
                              message:@"Username Or Password is not Correct"
                              delegate:nil
                              cancelButtonTitle:nil
                              otherButtonTitles:@"OK ", nil];
        [alert show];
        [alert release];
    }
    sqlite3_reset(init_statement);
    [self closeDatabase];

} 
```

并在 DBhelper.hi 中为此定义属性

```
@property (strong) ViewController * callingViewController; 
```

如果密码和用户名成功匹配，则在 lognow 方法中的条件下，我在 Viewcontroller.com 文件中调用此方法，但无法调用 //ViewController.m

-（无效）添加视图 {

```
DBHelper *f = [[DBHelper alloc] init];
f.callingViewController = self;

newview.center = CGPointMake(1000, 1000); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:46:34.163

尽管在 DBhelper 中保存 viewController 是不明智的（它会破坏 MVC），但您可以将 ViewController 的方法作为代码调用，但请记住将 ViewController 设置为将 ViewController 传递给 DBhelper。也许是这样的：

```
//ViewController.m
-(IBAction)login:(id)sender
{
    DBHelper *objdb = [[DBHelper alloc] init];
    [objdb loginnow:textname.text andpassword:textpassword.text viewController:self]; 
}

//DBHelper.m
-(void) loginnow:(NSString *) username andpassword:(NSString *)password viewController:(ViewController *)vc
{ ...

    if ([dbusername isEqualToString:username] && [dbpassword isEqualToString:password])
    {
        [vc addview]; 
    }
  ...
} 
```

但实际上你应该在这里使用委托（或块或通知，但委托是大多数情况）。像这样：

在 DBHelper.h 中，@interface 之前，添加

```
@class DBHelper;
@protocol DBHelperDelegate <NSObject>
-(void) DBHelp:(DBHelper *)helper didFinishedLoginSuc:(BOOL)suc;
@end 
```

在@interface 和@end 标签之间，添加（假设你没有使用ARC）@property (nonatomic, assign) id delegate；

在 DBHelper.m 中，在 @implementation 中，添加（假设您没有使用自动合成）

```
@synthesize delegate = _delegate; 
```

现在，您可以更改 [self.callingViewController addview]；至

```
if (self.delegate && [self.delegate responseToSelector:@selector(DBHelp:didFinishedLoginSuc:)]) {
    [self.delegate DBHelp:self didFinishedLoginSuc:YES];
} 
```

现在，您为每个遵循 DBHelperDelegate 的视图控制器准备了一个委托。在您的 ViewController.h 中，通过在类声明后面添加来告诉编译器它服从 DBHelperDelegate：

```
@interface ViewController:UIViewController<DBHelperDelegate> 
```

并将 addView 方法名称更改为

```
-(void) DBHelp:(DBHelper *)helper didFinishedLoginSuc:(BOOL)suc 
```

最后，当您单击按钮时，将 self 设置为 objdb 的委托

```
-(IBAction)login:(id)sender
{
    DBHelper *objdb = [[DBHelper alloc] init];
    objdb.delegate = self;
    [objdb loginnow:textname.text andpassword:textpassword.text]; 
} 
```

现在，当您成功登录时， ViewController.m 中的 -(void) DBHelp:(DBHelper *)helper didFinishedLoginSuc:(BOOL)suc 将被调用，您可以处理您的视图。

请记住，当您的 viewController 获得 dealloc 时，将委托设置为 nil，否则您会遇到内存错误。当心。

# asp.net-mvc - for循环内的linq查询

> ID：13738957
> 
> 赞同：0
> 
> 时间：2012-12-06T07:37:53.117
> 
> 标签：asp.net-mvc, linq

我的查询是这样的，

```
var currentUsrId = Convert.ToInt16(Membership.GetUser().ProviderUserKey);
var Ids = Context.audits
          .Where(i => i.usr_id == currentUsrId)
          .Select(i => new
                 {
                      profile_id = i.profile_id
                 }).ToArray();

for ( var m=0; m < (Ids.Length); m++)
{
    var Query = Context.audits
                .Where(j => j.usr_id == currentUsrId && j.profile_id == Convert.ToInt16(Ids[m].profile_id))
                .Select(j => j.profile_id).Count();

    var TotalQuery = Context.audits
                     .Where(i => i.usr_id == currentUsrId)
                     .Select(i => new
                     {
                         Id = currentUsrId,
                         count = Query
                     }).Distinct().ToArray();

    //return json(TotalQuery,JsonRequestBehavior.AllowGet);
    ----strucked at this part-----
} 
```

我想使用for循环发送记录，我想知道如何发送这些值，如果我在循环内使用return json，循环只执行一次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:47:25.797

尝试这样的事情：

```
List<T> queries = new List<T>();

for ( var m=0; m < (Ids.Length); m++)
{
    var Query = Context.audits
                .Where(j => j.usr_id == currentUsrId && j.profile_id == Convert.ToInt16(Ids[m].profile_id))
                .Select(j => j.profile_id).Count();

    var TotalQuery = Context.audits
                     .Where(i => i.usr_id == currentUsrId)
                     .Select(i => new
                     {
                         Id = currentUsrId,
                         count = Query
                     }).Distinct().ToArray();

    queries.add(TotalQuery);
}

return json(queries,JsonRequestBehavior.AllowGet); 
```

# javascript - 如何在 FireFox 中关闭 showModalDialog，在 javascript 中关闭 Chrome

> ID：13738964
> 
> 赞同：2
> 
> 时间：2012-12-06T07:38:31.323
> 
> 标签：javascript, alert, showmodaldialog

```
var userChoice = showModalDialog("../Iframe.aspx?FormName=sample.aspx", window,     "dialogTop:300px;dialogLeft:350px;dialogHeight:182px;dialogWidth:370px;help:no;scroll:no;status:no;");        
alert(userChoice); /* here iam not able to get 'Y' */      
if (userChoice == 'Y')       
  return true; else return false;     

 Below is the Sample aspx page:  

  input type="button" value="Yes" onclick="choice('Y')"    

function userChoice(option)     
{       
 window.returnValue = option;    
 alert(window.returnValue);  /* here iam getting 'Y' */
 parent.close(); // I have tried with self.close() also  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:10:15.663

您无法`parent.window`从模式对话框中关闭。使用`window.close()`或`top.close()`关闭模式。

Chrome 内部有一个错误`returnValue`，似乎尚未修复，请尝试以下方法：

[showModalDialaog 未在 Chrome 中返回值](https://stackoverflow.com/q/10213530/1169519)

[铬/问题/详细信息？id=42939](http://code.google.com/p/chromium/issues/detail?id=42939)

# git - 我如何在 Git 中创建分支或其他东西

> ID：13738965
> 
> 赞同：-3
> 
> 时间：2012-12-06T07:38:35.923
> 
> 标签：git, version-control

我不知道确切的术语是什么，但我会告诉你我想要什么。

假设我正在编写网站，并且我已经在 bitbucket 上上传了最基本的代码。

现在我将对代码进行连续更改，但我想将存储库分成多个部分，以便我可以克隆任何版本。

就像假设我可以在`Sample App without database`提交一个月后将分支设为 1，我想要另一个名为 Sample app 的分支，其中添加了数据库并继续运行。

这样我就可以随时克隆这些分支中的任何一个。新分支将有一些新文件、代码图像等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:54:18.153

在我看来，您正在寻找**[tags](http://git-scm.com/book/en/Git-Basics-Tagging)**。

您可以将标签应用于提交，以便以后更容易找到它。它通常用于标记发布等。当前版本被标记为`v1.2.3`这样的标签：

```
git tag v1.2.3 
```

您还可以将标签应用于旧版本，如下所示：

```
git tag v1.2.3 9fceb02 
```

`9fceb02`提交的校验和/修订在哪里。必须使用显式命令推送标签：

```
git push origin --tags 
```

稍后，您可以像这样在工作区中签出标签：

```
git checkout v1.2.3 
```

# bit-manipulation - 在低位检测两个具有相同/匹配位模式的数字

> ID：13738967
> 
> 赞同：1
> 
> 时间：2012-12-06T07:38:40.300
> 
> 标签：bit-manipulation, bitwise-operators

我们有两个低位具有相同位模式的数字。例如：010011 **10110**和 10110 是两个数字，它们与它们的低位匹配。

有没有一种简单的方法可以找出答案？我有一个移动位然后比较的解决方案，有没有更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T07:51:32.483

您可以将它们一起异或并检查最后 N 个低位是否全为零（其中 N 是两个数字中较小的位数）。

例如：使用您提供的样本编号 01001110110 和 10110：

```
01001110110 XOR 10110 = 01001100000 
```

请注意，结果中的最后 5 位全为零。

在 C/C++/Java 中，您可以`^`为此目的使用运算符，然后使用如下掩码提取最后 N 位：

```
int a = 0x276; // 01001110110
int b = 0x16;  //       10110

if (((a ^ b) & 0x1F) == 0) { // Mask 0x1F assumes least significant 5 bits for match
    // match!
} 
```

当然，这假设您知道每个数字中的有效位数（本例中为 5）。相反，如果未指定匹配位的数量，则需要计算连续尾随 0 的数量以计算出匹配的位数。在这种情况下，您可能会执行其他一些技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:51:19.970

用 屏蔽数字`&`：

```
if (number1 & 0x1f == number2 & 0x1f) 
```

# c# - 在 C# 中将查询字符串值访问到多个页面

> ID：13738968
> 
> 赞同：0
> 
> 时间：2012-12-06T07:38:40.243
> 
> 标签：c#, asp.net, query-string

我使用 c#(asp.net) 并创建了 a.aspx 、b.aspx、c.aspx 之类的三个不同页面....

我在 a.aspx 中使用以下代码

```
<asp:TextBox ID="txt" runat="server"></asp:TextBox>
<asp:TextBox ID="txt1" runat="server"></asp:TextBox>    
<asp:Button ID="btn" runat="server" OnClick="OnClick" Text="Click" /> 
```

该页面后面的代码如下：a.aspx.cs

```
protected void OnClick(object sender, EventArgs e)
{
    Response.Redirect("b.aspx?Site=google&Code=123?Name=" + txt.Text+"&second="+txt1.Text);
} 
```

之后，我在 b.aspx 页面中放置了两个标签...并且我使用以下代码来接收该值...

b.aspx.cs

```
public String txt1
{
    get
    {
       return Convert.ToString(Request.QueryString["txt1"]);
    }
} 
```

……

**现在我不仅想访问这些值到 b.aspx 我想将这些值传递给 c.aspx**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:52:33.183

您可以使用会话变量来保存所有值，而不是将其放入查询字符串中。通过这种方式，您将能够从任何页面访问这些值。

设定值-

```
Session["Name"] = txt.Text;
Session["second"] = txt1.Text; 
```

现在您可以从任何页面访问这些值 - (b.aspx, c.aspx)

```
public String txt1
{
    get
    {
       return Session["second"];
    }
} 
```

# android - 如何在android中移动摇动时获得时差？

> ID：13738969
> 
> 赞同：0
> 
> 时间：2012-12-06T07:38:45.323
> 
> 标签：android

我的问题是如何通过在 android 中使用加速度计来获得摇动手机之间的持续时间。我的默认阈值为800，速度计算公式为：

```
speed = Math.abs(x+y+z - last_x - last_y - last_z)/ diffTime * 10000; 
```

在这里，我想获得第一次摇动和下一次摇动之间的持续时间。如果持续时间超过 10 秒，则意味着必须生成警报。

我不知道如何计算传感器概念中的时间间隔。请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:46:04.130

只需用于 `System.currentTimeMillis()`获取第一次摇动的时间并将其保存到某个变量中`preTime`，例如当用户再次摇动时，您可以像这样简单地减去时差 `diffTime = System.currentTimeMillis() - preTime`

现在如果值`diffeTime/(1000 *10) > 10`then 做你剩下的计算

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:47:32.007

要检查您的手机旋转，您可以使用加速度计传感器，

[http://www.techrepublic.com/blog/app-builder/a-quick-tutorial-on-coding-androids-accelerometer/472](http://www.techrepublic.com/blog/app-builder/a-quick-tutorial-on-coding-androids-accelerometer/472)

但是您需要使用此传感器检查完全旋转并增加旋转值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T07:54:10.103

```
 private static final int FORCE_THRESHOLD = 800;
    private static final int TIME_THRESHOLD = 100;
    private static final int SHAKE_TIMEOUT = 500;
    private static final int SHAKE_DURATION = 1000;
    private static final int SHAKE_COUNT = 3;
    private float mLastX=-1.0f, mLastY=-1.0f, mLastZ=-1.0f;
    private long mLastTime;
    private Context mContext;
    private int mShakeCount = 0;
    private long mLastShake;
    private long mLastForce;

    public void onSensorChanged(SensorEvent event) {
                                if(event.sensor.getType() != Sensor.TYPE_ACCELEROMETER) return;

    Log.v("sensor","sensor change is verifying");
    long now = System.currentTimeMillis();

    if ((now - mLastForce) > SHAKE_TIMEOUT) {
        mShakeCount = 0;
    }

    if ((now - mLastTime) > TIME_THRESHOLD) {
      long diff = now - mLastTime;
      float speed = Math.abs(event.values[SensorManager.DATA_X] + event.values[SensorManager.DATA_Y] + event.values[SensorManager.DATA_Z] - mLastX - mLastY - mLastZ) / diff * 10000;
      if (speed > FORCE_THRESHOLD) {
        if ((++mShakeCount >= SHAKE_COUNT) && (now - mLastShake > SHAKE_DURATION)) 
        {
           mLastShake = now;
           mShakeCount = 0;
            //call the reaction you want to have happen
            onShake();
         }
         mLastForce = now;
       }
         mLastTime = now;
         mLastX = event.values[SensorManager.DATA_X];
         mLastY = event.values[SensorManager.DATA_Y];
         mLastZ = event.values[SensorManager.DATA_Z];
      }
  } 
```

# linux - 如何强制 RPM 将文件安装在单个目录中，可以吗？

> ID：13738970
> 
> 赞同：9
> 
> 时间：2012-12-06T07:38:49.863
> 
> 标签：linux, installation, rpm

rpm install 命令，在各处安装文件，例如：/usr/bin、/usr/sbin、/etc/、/usr/share

这样就很难弄清楚安装的所有内容。是否可以强制 rpm 将所有内容安装在单个目录中？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-06T07:41:47.953

您可以使用`--relocate`更改安装过程的 1 个目录

```
rpm -i --relocate /usr/sbin=/some/other/path/sbin packagename.rpm 
```

或`--prefix`用于整个安装过程

```
rpm  -i --prefix=/some/other/path/ packagename.rpm 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-06T09:56:21.970

如其他地方所述，**不要那样做**。

但是，如果您想查看哪些文件将安装在哪里：

```
rpm -qlp packagename.rpm 
```

如果您想将它们提取到不同的根目录以检查它们（例如查看配置​​文件等），请*从临时目录*：

```
rpm2cpio /path/to/rpm/packagename.rpm | cpio -div 
```

# javascript - 想要同时匹配大写和小写字母

> ID：13738980
> 
> 赞同：2
> 
> 时间：2012-12-06T07:39:35.910
> 
> 标签：javascript, regex

我的代码：

我尝试了以下代码

```
var str="I like green and want to build a GREENERY Earth with greening!"; 
var n=str.match(/green/g); 
```

它给出的结果为

```
green,green 
```

但我需要结果为

```
green,GREEN,green 
```

也就是说，我想同时匹配大写和小写字母。在这种情况下，总共找到 3 个绿色单词。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-06T07:41:34.500

使用`i`标志，它将忽略区分大小写：

```
var n=str.match(/green/gi); 
//                      ^----here it is 
```

[演示](http://jsfiddle.net/8ej59/)

# iphone - 如何将 NSMutableArry 数据拆分为两部分？

> ID：13738981
> 
> 赞同：1
> 
> 时间：2012-12-06T07:39:42.213
> 
> 标签：iphone, xcode, uitableview, directory, nsmutablearray

我正在录制应用程序。在这个应用程序中，我用我自己的文本保存我的录音，它还用当前日期和时间保存录音。如下面的代码所示

```
-(IBAction)RecButtonPress:(id)sender
{
    NSLog(@"Song name:%@",mySongname);
    NSMutableDictionary* recordSetting = [[NSMutableDictionary alloc] init];
    [recordSetting setValue :[NSNumber numberWithInt:kAudioFormatLinearPCM] forKey:AVFormatIDKey];
    [recordSetting setValue:[NSNumber numberWithFloat:44000.0] forKey:AVSampleRateKey]; 
    [recordSetting setValue:[NSNumber numberWithInt: 1] forKey:AVNumberOfChannelsKey];
    [recordSetting setValue: [NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
    [recordSetting setValue: [NSNumber numberWithBool:NO] forKey:AVLinearPCMIsBigEndianKey];
    [recordSetting setValue: [NSNumber numberWithBool:NO] forKey:AVLinearPCMIsFloatKey];
    NSDate* now = [NSDate date];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"dd:MMM:YY_hh:mm:ss a"];
    NSString *file= [dateFormatter stringFromDate:now];
    NSString *fina=[file stringByAppendingString:mySongname];
    NSArray  *dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docsDir  = [dirPaths objectAtIndex:0];
    NSString *soundFilePath = [docsDir stringByAppendingPathComponent:@"MyRecordings"];
    if (![[NSFileManager defaultManager] fileExistsAtPath:soundFilePath])
        [[NSFileManager defaultManager] createDirectoryAtPath:soundFilePath withIntermediateDirectories:NO attributes:nil error:nil];
            soundFilePath = [soundFilePath stringByAppendingPathComponent:fina];
    recordedTmpFile = [NSURL fileURLWithPath:soundFilePath];
    NSLog(@"Uf:%@",recordedTmpFile);
    recorder = [[ AVAudioRecorder alloc] initWithURL:recordedTmpFile settings:recordSetting error:&error];
    [recorder setDelegate:self];
    [recorder prepareToRecord];
    [recorder record];
        [recordSetting release];
       [dateFormatter release];
} 
```

现在保存记录后，当我转到 SaveRecording 类时，实际上我在 Tableview 中显示所有这些记录。这里我的代码是

```
- (void)viewWillAppear:(BOOL)animated {
[super viewWillAppear:animated];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *documentPath = [documentsDirectory stringByAppendingPathComponent:@"MyRecordings"];
directoryContent = [[NSFileManager defaultManager] directoryContentsAtPath:documentPath];
NSLog(@"file found %i",[directoryContent count]);
NSLog(@"arraydata: %@", directoryContent );
[directoryContent retain];
[self.tableView reloadData];
 } 
```

之后，我将我的 NSMutablArray 的“directoryContent”分配给 UITableview。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
  return [directoryContent count];
} 
```

///////////////////////////////////////// ////////////////////////////////////

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";
static NSInteger StateTag = 1;
static NSInteger CapitalTag = 2;
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    UILabel *capitalLabel = [[UILabel alloc] initWithFrame:CGRectMake(2, 2, 120, 20)];
    //capitalLabel.text=@"mydata";
    capitalLabel.backgroundColor=[UIColor redColor];
    capitalLabel.tag = CapitalTag;
    [capitalLabel setFont:[UIFont systemFontOfSize:9]];
    [cell.contentView addSubview:capitalLabel];
    [capitalLabel release];

    UILabel *stateLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 22, 310, 20)];
    stateLabel.tag = StateTag;
    [stateLabel setFont:[UIFont systemFontOfSize:14]];
    stateLabel.adjustsFontSizeToFitWidth=YES;
    [cell.contentView addSubview:stateLabel];
    [stateLabel release];

  }
UILabel * stateLabel = (UILabel *) [cell.contentView viewWithTag:StateTag];
//UILabel * capitalLabel = (UILabel *) [cell.contentView viewWithTag:CapitalTag];

stateLabel.text = [directoryContent objectAtIndex:indexPath.row];
//capitalLabel.text = [datesaving objectAtIndex:indexPath.row];

return cell;
} 
```

最后我的 UITableView 在屏幕截图下面看起来像这样 ![在此处输入图像描述](../Images/6e9a3cffc8bf89091e4889e7b775d2eb.png)

我所有这些简短讨论的目的是，当我的屏幕截图显示 UITableview 单元格显示我的文本和当前日期和时间。现在我想将此目录内容数组数据拆分为两个 prats。我想要的包含当前日期和时间的部分将它分配给 UITableview 中单元格的红色部分的大写标签，并将文本分配给位于 UITableview 中单元格部分下方的 stateLabel。任何帮助都将得到应用。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:32:21.293

嗨，莉娜，您可以尝试以下方法

1) 字典数组

将您的日期和歌曲名称分别保存在字典中

```
 NSDictionary *myData    =   [NSDictionary dictionaryWithObjectsAndKeys:myDateObj,@"SongDate",mySongName,@"SongName", nil];

[myMutableArray addObject:myData]//myMutableArray is a NSMutableArray; 
```

现在您可以按如下方式使用它

```
NSDictionary *dict = [directoryContent objectAtIndex:indexPath.row];
stateLabel.text =    [dict objectForKey:@"SongName"];
capitalLabel.text =  [dict objectForKey:@"SongDate"]; 
```

或者

2）你可以做一个小技巧:)

```
NSString *fina=[file stringByAppendingFormat:@"+%@",mySongname];

NSArray *Array  =   [fina componentsSeparatedByString:@"+"];

capitalLabel.text =  [Array objectAtIndex:0];

stateLabel.text =    [Array objectAtIndex:1]; 
```

在这里追加时，您可以使用格式并添加任何特殊字符，以后可以使用这些字符来拆分字符串。

希望这会以任何方式帮助你:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:45:47.083

首先你需要像这样附加你的字符串

```
NSString *file3 = [file stringByAppendingString:@"+"];

NSString *fina= [file3 stringByAppendingString:mySongname]; 
```

之后你需要把它分开

```
NSArray *Array = [str componentsSeparatedByString:@"+"]; 
NSLog(@"myindex0str:%@",[Array objectAtIndex:0]); 
NSLog(@"myindex1str:%@",[Array objectAtIndex:1]); 
```

因此您将分别获得时间和歌曲名称。

# android - 谷歌地图 android api v2 选择折线

> ID：13738982
> 
> 赞同：2
> 
> 时间：2012-12-06T07:39:43.507
> 
> 标签：android, google-maps-android-api-2

我在使用 android google map api v2 时遇到问题。

我想从地图中选择一条折线，就像我选择一个标记一样。用我使用的标记`onTap`。

是否可以选择折线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-10T15:19:43.490

只需[`PolyUtil#isLocationOnPath(...)`](http://googlemaps.github.io/android-maps-utils/javadoc/com/google/maps/android/PolyUtil.html#isLocationOnEdge-LatLng-java.util.List-boolean-double-)从[android map utils](https://github.com/googlemaps/android-maps-utils)使用。这正是你想要的。

例子：

```
googleMap.setOnMapClickListener(new GoogleMap.OnMapClickListener() {
    @Override
    public void onMapClick(LatLng latLng) {
        boolean isOnRoute = PolyUtil.isLocationOnPath(latLng, latLngs, true, tolerance);
        // do what you want
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:23:01.100

您必须为此编写自己的算法并在 OnMapClickListener 中进行检查。

# eclipse - Eclipse Mobile Tools for Java 1.1.0 插件

> ID：13738990
> 
> 赞同：1
> 
> 时间：2012-12-06T07:40:05.513
> 
> 标签：eclipse, java-me

我试图`Mobile Tools for Java 1.1.0`在 eclipse juno 中添加插件，但它显示以下错误

```
Error
Thu Dec 06 12:20:33 IST 2012
No repository found at http://download.eclipse.org/dsdp/mtj/updates/1.1.0/stable. 
```

有没有其他方法可以添加这个插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:24:54.003

[http://download.eclipse.org/mtj/updates/1.1.2/stable/](http://download.eclipse.org/mtj/updates/1.1.2/stable/)上已经有 1.1.2 版本，
但`MTJ`以不使用`Juno`. 请用`Indigo`.

# sharepoint - 系统重新启动后 iFilter 的注册表项不保留

> ID：13738994
> 
> 赞同：0
> 
> 时间：2012-12-06T07:40:13.953
> 
> 标签：sharepoint, wss, wss-3.0, sharepoint-search, wss-3.0-sp2

我们按照[http://support.microsoft.com/kb/927675/en-us](http://support.microsoft.com/kb/927675/en-us)上的文章实现了 wss 3.0 的 pdf 过滤器。但是如果我们重新启动系统，步骤 2 中提到的注册表项（在**HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Shared Tools\Web Server Extensions\12.0\Search\Applications\GUID\Gather\Search\Extensions\ExtensionList**下添加一个新条目）将丢失.

有谁知道为什么会发生这种情况？我们安装了adobe reader 10并尝试为wss 3.0配置pdf过滤器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:12:06.197

好的，找到问题了。更改注册表后，您必须停止并重新启动共享点搜索服务。不知道它们是如何相关的！

以下是命令： net stop spsearch net start spsearch

# c# - 通过 C# 命令截屏

> ID：13738995
> 
> 赞同：-2
> 
> 时间：2012-12-06T07:40:16.743
> 
> 标签：c#

我需要创建一个 C# 应用程序，它允许我捕获屏幕并保存图像文件。

请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:44:41.973

```
 Point curPos = new Point(Cursor.Position.X, Cursor.Position.Y);
            Size curSize = new Size();
            curSize.Height = Cursor.Current.Size.Height; curSize.Width = Cursor.Current.Size.Width;
            System.Threading.Thread.Sleep(250);
            Rectangle r1 = Screen.GetBounds(Screen.GetBounds(Point.Empty));
            Bitmap b1 = new Bitmap(r1.Width, r1.Height);
            Graphics g1 = Graphics.FromImage(b1);
            g1.CopyFromScreen(Point.Empty, Point.Empty, r1.Size);
            Rectangle r2 = new Rectangle(curPos, curSize);
            Cursors.Default.Draw(g1, r2);
            b1.Save(@"C:\file1.bmp", ImageFormat.Bmp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:46:06.263

```
ScreenCapture sc = new ScreenCapture();
// capture entire screen, and save it to a file
Image img = sc.CaptureScreen();
// display image in a Picture control named imageDisplay
this.imageDisplay.Image = img;
// capture this window, and save it
sc.CaptureWindowToFile(this.Handle,"C:\\temp2.gif",ImageFormat.Gif); 
```

完整项目来自： http: [//www.developerfusion.com/code/4630/capture-a-screen-shot/](http://www.developerfusion.com/code/4630/capture-a-screen-shot/)

# c++ - int a = 0 和 int a(0) 差异

> ID：13738996
> 
> 赞同：40
> 
> 时间：2012-12-06T07:40:18.703
> 
> 标签：c++

> **可能重复：**
> [复制初始化和直接初始化在 C++ 中有区别吗？](https://stackoverflow.com/questions/1051379/is-there-a-difference-in-c-between-copy-initialization-and-direct-initializati)

我刚开始学习C++。

为了用一个值初始化一个变量，我遇到了

```
int a = 0; 
```

和

```
int a(0); 
```

这让我很困惑。我可以知道哪个是最好的方法吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-06T07:57:57.307

`int a = 0;`并且`int a(0);`对机器生成的代码没有任何影响。他们是一样的。

以下是在 Visual Studio 中生成的汇编代码

```
int a = 10;   // mov dword ptr [a],0Ah  
int b(10);    // mov dword ptr [b],0Ah 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-06T07:42:24.887

它们都是一样的，所以真的没有一个*“最好的方法”*。

我个人使用

```
int a = 0; 
```

因为我觉得它更清晰，并且在实践中使用得更广泛。

*这适用于您的代码，其中类型为`int`. 对于类类型，第一个是复制初始化，而另一个是直接初始化，所以在这种情况下会有所不同*。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-06T07:52:49.923

没有“最好”的方式。对于标量类型（如`int`您的示例），两种形式的效果完全相同。

引入了非类类型的`int a(0)`语法以支持类和非类类型的统一直接初始化语法，这在类型无关（模板）代码中非常有用。

在非模板代码中`int a(0)`不需要。是否要使用`int a(0)`语法，或者更喜欢坚持更传统的语法，完全取决于您`int a = 0`。两者都做同样的事情。在我看来，后者更具可读性。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-06T08:00:09.937

从实际的角度来看：我**只会**使用`int a = 0;`.

`int a(0)`可能允许但从未在实践中使用。

* * *

我认为它不应该在你的水平上打扰你，但让我们走得更远。

假设这`a`是一个类，而不是一个 int。

```
class Demo{
public:
  Demo(){}; 
  Demo(int){};
};
Demo a;
Demo b(a);   
Demo c = a;  // clearly expressing copy-init 
```

在这个例子中，两者都`b(a)`做`c=a`同样的事情，我不鼓励你使用第一种解决方案。我的原因是，这看起来类似于`c(2)`从论点构建的。

这种括号式初始化只有两种**有效用途：**

*   初始化列表（`Demo(int i):data(i){}`如果 Demo 有一个 int 数据成员`data`），
*   消息：`Demo *p=new Demo(a); // copy constructing a pointer`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-06T07:46:37.357

就是这么简单。（嗯，几乎——有些东西你不能命名你的变量，我们将在下一节中讨论）

您还可以在声明时为变量赋值。当我们使用赋值运算符（等号）为变量赋值时，它被称为显式赋值：

```
int a= 5; // explicit assignment 
```

您还可以使用隐式赋值为变量赋值：

```
int a(5); // implicit assignment 
```

尽管隐式赋值看起来很像函数调用，但编译器会跟踪哪些名称是变量，哪些是函数，以便正确解析它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T09:42:42.713

在教科书和文献中，一种是直接初始化，另一种是复制初始化。但是，就机器代码而言，没有区别。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-06T08:27:19.187

不同之处在于`()`初始化是当您明确希望它仅采用一个参数时，例如：

您可以：
`int a = 44 + 2;`
但您不能：
`int a(44) + 2;`

# iphone - 从IOS应用程序拨打电话号码后如何获得回拨？

> ID：13738999
> 
> 赞同：3
> 
> 时间：2012-12-06T07:40:34.040
> 
> 标签：iphone, objective-c, ios

根据Apple的文档，为了从我的应用程序拨打电话，我需要这样实现：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"telprompt://11223344"]]; 
```

当我完成通话时，我的应用程序通过此方法返回前台：

```
- (void)applicationWillEnterForeground:(UIApplication *)application 
```

这是我的问题：

调用者 applicationWillEnterForeground: 没有告诉我呼叫已结束的符号。**那么我怎么知道 applicationWillEnterForeground: 在电话后被调用呢？**