# StackOverflow 问答 12697000-12697999

# c# - 我可以从数据库中读取图像，但我不知道如何在 asp.net 页面中查看图像？

> ID：12697002
> 
> 赞同：0
> 
> 时间：2012-10-02T19:32:40.363
> 
> 标签：c#, asp.net

我有以下代码从数据库中读取图像：

```
cn = new SqlConnection(@"Data Source=ADMIN-PC;Initial Catalog=imagedata;Integrated Security=True");

cmd = new SqlCommand("select *  from image where imgid=1", cn);
cn.Open();
SqlDataReader dr;

try
{
    dr = cmd.ExecuteReader();

    if (dr.Read())
    {
        byte[] imgarr = (byte[])dr["img"];
        ms = new MemoryStream(imgarr);
        ms.Seek(0, SeekOrigin.Begin);
   }
}
catch(Exception ex)
{
    MessageBox.Show(ex.Message);
}
finally
{
   cn.Close();
} 
```

如何更新它以在 ASP.Net 页面上显示图像？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T19:36:23.663

在 ASP.Net 中，此代码属于与要显示图像的页面不同的资源（文件/页面）。通常我`*.ashx`为此使用处理`*.aspx`程序（将现有代码移动到 ProcessRequest() 方法（处理程序）或 Page_Load() 方法（Page），并更改代码，以便它写入响应流而不是内存流。您还需要设置适当的内容类型标头。

完成后，更新要显示图像的页面。使用普通`<img`元素或`<asp:Image`控件（两者都可以）并将`src`属性设置为使用我们在上一段中创建的资源。您可能需要使资源足够智能，以检查会话、查询字符串或 cookie 之类的数据，以获取数据告诉它要为图像提取的数据库记录的键。如果您使用了查询字符串，请确保此时也将其设置为 src 属性的一部分。

# jquery - 为什么我必须用视图渲染 jquery

> ID：12697005
> 
> 赞同：0
> 
> 时间：2012-10-02T19:32:52.930
> 
> 标签：jquery, asp.net-mvc-3, razor, asp.net-mvc-4

我似乎在查询和绑定方面遇到了一些问题。

在我的 _Layout 中，我在页面底部找到了 jquery，它有一个`.on('click')`

在得到一个具有“添加项目”链接的 partialView 中，当我单击它时，它会`$.post()`返回一个 parialview 并将其填充到 div 容器中。

下次当我尝试通过单击同一链接添加另一个项目时，它就像一个链接并刷新了站点，就像它失去了与 jquery 的绑定一样。如果我选择让 jquery 每次都在它上面渲染的部分工作，但是为了结构我不想在页面中间有 jquery 脚本。

为什么会这样，我该怎么办？

**编辑：**
这是我得到的绑定。它像以前一样工作一次。

```
$('.menu-day').on('click', 'a.addItem', function (e) {
          e.preventDefault();
          console.log('ok');
          addRow($(this).attr('id'));
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:38:46.887

使用 $().on('click', function() { ... }) 的工作方式很像传统的 .click() 绑定，因为在绑定*之前*元素必须存在于页面上。例如：

```
$("ul li").on('click', function() { ... }) 
```

所以这不适用于动态添加的列表元素。您可以做的是在单击中指定一个选择器，该选择器将侦听冒泡到上下文的事件。例如：

```
$("ul").on('click', 'li', function() { ... }); 
```

现在，无论何时添加，单击列表项都会触发，因为它是绑定的容器列表，并且只是在侦听特定的 eventTarget。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:42:59.403

您可以使用 delegate() 方法来绑定 Dom 中存在的事件和将来添加的元素。通过这个[链接](http://api.jquery.com/delegate/)

# sql-server - 如何在 App Harbor / Sequelizer 中维护每日 SQL Server 备份

> ID：12697007
> 
> 赞同：10
> 
> 时间：2012-10-02T19:33:17.880
> 
> 标签：sql-server, backup, appharbor

我已经看过一些关于此的帖子，但我只是想确保我没有遗漏任何东西。

我正在认真考虑从 Azure 迁移到 App Harbor，但我有点沮丧，似乎没有办法维护日常 SQL Server 数据库备份。

我了解 App Harbor 维护每日文件系统快照。这对于从灾难性故障中恢复非常有用，但对于从用户错误中恢复没有太大作用。例如，如果我不小心删除了一大块行，我可能想恢复几天前的数据库以帮助恢复。

我知道这些用于向/从 App Harbor 传输数据的工具： - SQL Management Studio 中的“生成脚本”工具 - 批量复制工具：[https ://github.com/appharbor/AppHarbor-SqlServerBulkCopy](https://github.com/appharbor/AppHarbor-SqlServerBulkCopy)

这些对于进行一次性备份或恢复都很好，但我正在寻找某种方法来自动备份数据，最好将其保存到 AWS S3 存储中。有没有可以做到这一点的工具或服务？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T21:39:13.903

我创建了一个简单的控制台应用程序，它每天对 SQL Server 数据库中的表进行备份。然后将输出压缩并上传到 Amazon S3 存储。此应用程序可以部署为 AppHarbor 后台工作程序。无需本地 SQL 服务器！

有关说明和限制，请参阅自述文件中的注释。这可以满足我们现在的需要，但如果您想扩展它，我很乐意让其他人参与该项目。

[https://bitbucket.org/ManicBlowfish/ah-dbbackup](https://bitbucket.org/ManicBlowfish/ah-dbbackup)

# makefile - 将变量从 include 指令传递到 sub-make

> ID：12697012
> 
> 赞同：12
> 
> 时间：2012-10-02T19:33:36.207
> 
> 标签：makefile

在makefile中寻找将变量从一个级别传递到下一个级别的帮助。我有一个需要构建以在各种目标架构上运行的源代码树。为了保持更高级别的 makefile 干净，我创建了单独的 makefile，其中包含特定于体系结构的信息，并且仅包含使用 include 指令所需的那个：)

稍后在 makefile 中，我转移到另一个目录来构建源文件。构建失败，我看到失败是由未传递特定于体系结构的变量引起的。

```
ifeq ($(ARCH), my_arch)        |
include build/my_archdefs.mk   |  section 1 
endif                          |

<more commands>
debug:
      $(MAKE) -C src debug 
```

用于构建代码树的 makefile 位于 src 目录中。作为权宜之计，我在较低级别的 makefile 中包含了上面引用的第 1 节，在这种情况下，我注意到变量 ARCH 没有被传递下去。

这是我发现的几个链接，它们似乎相关，但我无法弄清楚我需要做什么才能完成这项工作。 [http://www.gnu.org/software/make/manual/html_node/Options_002fRecursion.html#Options_002fRecursion](http://www.gnu.org/software/make/manual/html_node/Options_002fRecursion.html#Options_002fRecursion) [http://www.gnu.org/software/make/manual/html_node/Include.html](http://www.gnu.org/software/make/manual/html_node/Include.html)

在我看来，我需要的信息隐藏在我上面引用的链接中，但我只是没有看到它。任何指针将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T19:56:00.677

这个链接应该有帮助：[http ://www.gnu.org/software/make/manual/html_node/Variables_002fRecursion.html#Variables_002fRecursion](http://www.gnu.org/software/make/manual/html_node/Variables_002fRecursion.html#Variables_002fRecursion)

在您的顶级 Makefile 中，只需添加该行`export`，您的所有变量都将导出到您的 submakes。

例子：

文件`Makefile`：

```
ID=asdf
export
all:
    @echo ${ID}
    @make -f Makefile2 
```

文件`Makefile2`：

```
all:
    @echo ${ID} 
```

输出：

```
$ make
asdf
make[1]: Entering directory `/home/user/Desktop/a'
asdf
make[1]: Leaving directory `/home/user/Desktop/a' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-07T16:25:25.870

供您参考的示例：

下面是顶层的“Makefile”。

> 生成文件

```
export ROOT_DIR=${PWD}

all:        
       $(MAKE) -C test 
```

然后，在“test”文件夹内（相对于当前位置）还有另一个“Makefile”，如下所示：

> 生成文件

```
all:    
        echo $(ROOT_DIR) 
```

当您在顶级文件夹中说“make all”时，它将随后根据当前位置-Makefile 构建，然后根据上述规则在“test”文件夹位置进行构建（在“test”位置获取 Makefile用于构建规则）。因此，当父 Makefile 导出某个变量时，对于该构建环境，导出的变量将对所有子目录 Makefile 可见。

但是，如果您尝试显式进入“test”文件夹并尝试“make all”，那么您必须在它之前显式设置环境变量（在以前的情况下，在顶级 Makefile 中设置） .

[更多信息](http://www.gnu.org/savannah-checkouts/gnu/make/manual/html_node/Variables_002fRecursion.html)。

# coldfusion - 将 ColdFusion 实例绑定到单个 IP？

> ID：12697014
> 
> 赞同：1
> 
> 时间：2012-10-02T19:33:54.570
> 
> 标签：coldfusion, coldfusion-9, coldfusion-8

我正在将我们的服务器迁移到新的 IP 范围（存在于新网络上），因此我添加了第二条虚拟网络线路，然后将新 IP 添加到该线路。我们在使用 IIS 7.5 作为 Web 服务器的 Windows 2008 R2 上使用多个 IP 在一个 CF9 安装上运行多个网站。我目前正在使用我们的开发服务器来测试该过程，然后再转移到各种生产服务器。

以前的行为 - 当只有一个网卡时，即使有多个 IP，ColdFusion 也会将自己绑定到系统的根 IP。这很有用，因为我们可以获得到该内部 IP 的静态 IP 映射，因此该单个 IP 可以允许任何从网络到外部资源（FTP、SQL 等）的出站调用。这已经为 CFMX/CF7/CF8/CF9 工作了 5 年以上。

新行为 - 在添加额外的网络线路、向其添加 IP 并重新启动计算机之后，ColdFusion 现在已选择新接口上的各种 IP 之一进行绑定。它绑定的IP甚至不是那个网卡的根IP。这导致所有出站呼叫现在都被阻止，因为它们不再来自它们最初来自的特定 IP。

问题 - 如何在 ColdFusion 8/9 启动时将其绑定到单个特定 IP，以确保它始终在同一个 IP 上进行出站通信？我已经进行了大量搜索并查看了 CF 本身的各种文件，但我还没有找到关于如何具体执行此操作的好的资源或答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:16:12.180

听起来您在 jRun 之上运行 ColdFusion 8 和 9——Adobe ColdFusion 的默认 servlet 容器。查看 jRun 文档[http://www.adobe.com/support/documentation/en/jrun/index.html#manuals](http://www.adobe.com/support/documentation/en/jrun/index.html#manuals)。我记得看到一些关于默认值为“*”的 BindAddress 的内容。

希望这可以帮助。

**来自 OP 的解决方案**-*有了这些信息，我能够解决这个问题。*

这些是执行此操作所需的步骤。

```
\runtime\servers\coldfusion\server-inf\jrun.xml
Locate the section relating to port 51800 and within that section add the following using the specific IP;
<attribute name="BindAddress">1.1.1.1</attribute>

Restart the CF Application Service

\runtime\lib\wsconfig\1\jrun_iis6_wildcard.ini
Change the bootstrap info to match your IP;
bootstrap=127.0.0.1:51800 -> bootstrap=1.1.1.1:51800

\runtime\lib\wsconfig\wsconfig.properties
Change the srv value to match your new IP;
1.srv=localhost,"coldfusion" -> 1.srv=1.1.1.1,"coldfusion" 
```

# css - CSS 定位：为什么这些 div 的宽度属性不起作用？

> ID：12697020
> 
> 赞同：1
> 
> 时间：2012-10-02T19:34:18.530
> 
> 标签：css, html, width

我正在开发一个新的 HTML/CSS 屏幕。我两个领域：

*   个人手机
*   个人电邮

两者都由同一个 CSS 类（eci_text）控制，都在一个 div 中。为该类输入宽度值似乎对 div 没有影响。为什么会这样，我能做些什么呢？我希望上面两个字符串旁边的文本字段垂直排列（这就是为什么我要调整 eci_text divs 的宽度）

非常感谢提前

史蒂夫

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <title>Acme Emergency Page</title>
    <style TYPE="text/css">
        body 
        {
            background-color:white;
        }
        #container
        {
            margin-left:auto;
            margin-right:auto;
            text-align:center;
            width: 99%;
            font-family:Arial,Helvetica;
            font-size:10pt;
        }
        #eci_container
        {
            margin-left:auto;
            margin-right:auto;
            width:500px;
            text-align:center;
        }
        .paragrah_left
        {
            text-align:left;
        }
        .eci_textfield_container
        {
            text-align:left;
        }
        .eci_text
        {
            text-align:left;
            display:inline;
            width:150px;
        }
        .eci_textfield
        {
            text-align:left;
            display:inline;
        }
        .eci_checkbox
        {
            margin-left:40px;
            text-align:left;
        }

    </style>
</head>

<body>

 <div id="container">
     <!-- Content: Start div content: Main content area -->
     <div id="content">
     <h2>ACME Emergency Contact Information </h2>

<!-- Start: ECI Container -->
<div id = "eci_container">

    <p class = "paragrah_left">
        This voluntary information will only be used by the ACME Emergency 
        Fruit & Vegetable System (FAV) to tell you about emergencies when they 
        arise, whether you are at work or not.
    </p>

    <div class = "eci_textfield_container">
        <div class = "eci_text">        
            Personal Cell*: 
        </div>
        <div class = "eci_textfield">  
            <input type = "text" name= "personal_cell_phone_number">
        </div>
    </div>

    <div class = "eci_checkbox">
        <input type = "checkbox" name = "checkBoxVisiblePersonalCellPhoneNumber">
        Make my personal cell phone number visible to Mark Zuckerberg's staff
    </div>

    <div class = "eci_checkbox">
        <input type = "checkbox" name = "checkBoxUsePersonalCellPhoneNumberForAlerts">
        Use this number for ENS SMS text alerts
    </div>

    <p class = "paragrah_left">
        If you do not want your personal cell phone used, please call
    </p>

    <div class = "eci_textfield_container">
        <div class = "eci_text">
            Personal Email*:
        </div>
        <div class = "eci_textfield">  
            <input type = "text" name= "personal_email">
        </div>
    </div>

    <p class = "paragrah_left">
        If you do not want your personal email used please call
    </p>

<!-- End: ECI Container -->
</div>
<!-- Content: Close div id ="content"  -->
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T19:41:00.573

您是否尝试过显示：块和向左浮动？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T19:41:18.303

使用列表和标签而不是 DIV。DIV 没有任何意义。列表和标签是使用语义 HTML 的一个很好的部分。

见：[http ://www.ajaxprojects.com/ajax/tutorialdetails.php?itemid=406](http://www.ajaxprojects.com/ajax/tutorialdetails.php?itemid=406)

```
<form action="#" class="myform">
    <fieldset>
        <legend>Leave a Comment</legend>
        <ul>
            <li>
                <label for="name">Name:</label>
                <input id="name" />
            </li>
        </ul> 
```

... ETC...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T19:44:12.597

```
 .eci_textfield_container
    {
        text-align:left;
        float:left;
        width:100%;
    }
    .eci_text
    {
        text-align:left;
        display:block;
        width:150px;
        float:left;
    }

    .eci_textfield
    {
        text-align:left;
        display:block;
        float:left;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T19:44:14.220

宽度应用于包含字段标签的两个 div。如果您在 Firefox 中使用 Firebug 扩展，您可以检查元素并查看标签是否为您在 CSS 中指定的宽度 (150px)。您实际上在哪个浏览器中看到此问题？

此外，对于字段标签，您应该使用标签。

# .net - 正则表达式替换外部方括号内的右方括号

> ID：12697027
> 
> 赞同：0
> 
> 时间：2012-10-02T19:34:50.567
> 
> 标签：.net, regex, mdx

我正在尝试使用 RegEx 转义 MDX 成员引用，但未成功。

这是输入字符串：

```
[dim[e]nsion].[this] [member] name] 
```

这是我试图输出的内容：

```
[dim[e]]nsion].[this]] [member]] name] 
```

（注意双右方括号）

我将如何使用 .Net 使用 RegEx 完成此操作？

更多示例：

```
Input:  [dim[en]sion n[a]me ].[this [member] name]

Output: [dim[en]]sion n[a]]me ].[this [member]] name] 

Input:  [[dimension] name].[this member [name]]

Output: [[dimension]] name].[this member [name]]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:19:40.010

规则非常简单 insert ] on ] 但只有在 [

```
string str = "[dim[e]nsion].[this] [member] name]";
char[] chars = str.ToArray();
StringBuilder sb = new StringBuilder();
bool leftLast = false;
foreach (char c in chars)
{
    sb.Append(c);
    if (c == '[')
    {
        leftLast = true;
    }
    else if (leftLast && c == ']')
    {
        sb.Append(']');
        leftLast = false;
    }
}
Debug.WriteLine(str);
Debug.WriteLine(sb.ToString()); 
```

正则表达式会找到每个 ']' 然后应用回顾。
这个 char[] 循环消除了不必要的反向分析。
如果 lastLeft 为假，那么甚至没有理由进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:19:43.660

不需要循环。`.`我们希望匹配除最后一个和紧接在点 ( ) 分隔符之前的每个右括号。我们只要求我们的右括号后面跟着一个字符，并指定它必须是一个非点字符。我不确定正确的 .NET 方式来表达这一点，但您想要匹配`]([^\.])`并替换`]]$1`where`$1`是对匹配模式中括号中内容的反向引用。如果您希望输入末尾有空格，我建议先清理它，因为`]`如果后面跟着空格，这将替换最后一个。

你可以在这里测试：[http ://www.regular-expressions.info/javascriptexample.html](http://www.regular-expressions.info/javascriptexample.html)

**编辑 1：**使用上述测试仪验证：http: [//imgur.com/a/VfR7W](http://imgur.com/a/VfR7W)

**编辑2：**验证`sed`（需要到一台真正的电脑）：

```
~ $ echo "                              
[dim[e]nsion].[this] [member] name]
[dim[en]sion n[a]me ].[this [member] name]
[[dimension] name].[this member [name]]
" > input.txt
~ $ cat input.txt

[dim[e]nsion].[this] [member] name]
[dim[en]sion n[a]me ].[this [member] name]
[[dimension] name].[this member [name]]

~ $ sed 's/]\([^\\.]\)/]]\1/g' input.txt

[dim[e]]nsion].[this]] [member]] name]
[dim[en]]sion n[a]]me ].[this [member]] name]
[[dimension]] name].[this member [name]]]

~ $ 
```

**编辑 3：**在最初的答案中，匹配模式给`]([^\.])`出了点 ( `.`) 转义以指示它是文字点字符。根据您的语言，您可能需要转义匹配中的其他字符。

# linux - 使用 perf_events/oprofile 在 Linux 上分析 JIT 的输出？

> ID：12697028
> 
> 赞同：2
> 
> 时间：2012-10-02T19:35:06.837
> 
> 标签：linux, profiling, jit, oprofile, perf

我想使用硬件性能计数器来分析由 Linux 上的 JIT 生成的代码。据我所知，最常见的分析器是`oprofile`和`perf`。

如何集成 JIT 和 oprofile/perf？

我的 JIT 不是 oprofile 已经支持的 JAVA。（性能？）

例如，我们可以考虑 LLVM 的 JIT。我想要

1.  查看 JIT-ted 代码中最热门的函数（它们的名称）
2.  查看最热门函数的反汇编，并为每条指令分配性能计数器统计信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-07T14:48:11.333

要使用 perf 分析 JITed 代码，请下载、编译和安装[perf-map-agent](https://github.com/jrudolph/perf-map-agent)库，然后（对于 java 代码）将其添加 `-agentpath:<path>/libperfmap.so`到命令行。

对于非 java 代码，只要生成了`/tmp/perf-$pid.map`符号映射文件，perf 就会在生成性能报告时使用这些文件。

Brendan Gregg 有一篇[博文](http://www.brendangregg.com/blog/2014-09-17/node-flame-graphs-on-linux.html)，其中包含相关参考资料。

# r - 将绘图另存为图像，然后在其上绘图

> ID：12697030
> 
> 赞同：1
> 
> 时间：2012-10-02T19:35:07.417
> 
> 标签：r

我正在开发一个 R 包，它允许用户通过单击和拖动图表上的点来编辑时间序列。

我需要在图表上始终显示 6 条线，尽管只有一条线是“活动的”并且可以用鼠标进行编辑。

现在可以正常工作了，但是因为当“单击和拖动”功能处于活动状态时，我要绘制很多线并每秒绘制多次，所以屏幕闪烁很多，这对眼睛很不利。

我想用非活动系列制作一个图，然后将此图另存为图像，然后将图像写入设备并在事件循环的其余部分在图像上绘制“活动”线。据我估计，这会将图表中的“层”数量从 6 降低到 2。

评论中的一些人说一些真实的代码会有所帮助。这是我的代码：

```
near.point<-function(point,x.vec,y.vec){   #this function takes 'point' which is an x,y val and then finds the point in x.vec, y.vec which is nearby, and returns it
    dis.vec<- sqrt(abs(x.vec/(max(x.vec)-min(x.vec))-point[1]/(max(x.vec)-min(x.vec)))^2 + abs(y.vec/(max(y.vec)-min(y.vec))-point[2]/(max(y.vec)-min(y.vec)))^2) #vector of total distances of #pointer click from line points
    return(which(dis.vec==min(dis.vec)) )
}

savepar <- par(ask=FALSE)
picker.mover <- function(bl,scenarios,date.labs,target,name) { #this function allows one to edit #line points with the mouse

#plot the baseline (the first time series)
plot(unlist(bl),col="black",type="l",lwd=2,xaxt="n",main=name,xlab="",
     ylab="Add function to bring in units, later",sub=paste(paste("S",target,sep=""),"active",sep=" "),ylim=c(.96*min(scenarios),1.04*max(scenarios)))
axis(1,at=seq(1,length(date.labs),12),labels=date.labs[seq(1,length(date.labs),12)])
#plot the nontarget scenarios, the other lines to show in the graph but not be edited with mouse
for(i in c(1:6)[-which(c(1:6)==target)]){ #this 'which' structure returns a sequence from #1 to 6 excluding the target scenario     
    lines(scenarios[,i],col=(i),pch=5,lwd=1)
    }
    #plot the target scenario
    lines(unlist(scenarios[,target]),type="b",col="blue",lwd=3)
    #####legend structure###################################################
    l.widths <-rep(1,7);l.widths[target+1] <-3 
    l.colors<-c("black",1:6);l.colors[target+1]<-"blue" 
    legend("bottomright",c("BL","S1","S2","S3","S4","S5","S6"),lty=c(1,1,1,1,1,1,1),lwd=l.widths,col=l.colors)
        ####End legend structure###############################################    

#some graphics events functions, Frankensteined from the getGrapnicsEven R help example

devset <- function()
    if (dev.cur() != eventEnv$which) dev.set(eventEnv$which)

dragmousedown <- function(buttons, x, y) { #what happens when we click
    start.x <- grconvertX(x,"ndc","user") #<<- super assignment
    start.y <- grconvertY(y,"ndc","user")
    #devset()

    temp.point<<-near.point(c(start.x,start.y),
        1:length(unlist(bl)),scenarios[,target])
    points(temp.point,scenarios[temp.point,target],col="Red"
       ,pch=21,bg="red",lwd=2)

          eventEnv$onMouseMove <- dragmousemove
    NULL
}

dragmousemove <- function(buttons, x, y) { #what happens when we move after clicking
    #devset()

    y.scaled<-grconvertY(y,"ndc","user")
    scenarios[temp.point,target]<<-y.scaled

#och plotta hela grej igen
#plot the baseline
plot(unlist(bl),col="black",type="l",lwd=2,xaxt="n",xlab="",
     ylab="Add function to bring in units, later",sub=paste(paste("S",target,sep=""),"active",sep=" "),main=name,ylim=c(.96*min(scenarios),1.04*max(scenarios)))
      axis(1,at=seq(1,length(date.labs),12),labels=date.labs[seq(1,length(date.labs),12)])

#plot the nontarget scenarios
for(i in c(1:6)[-which(c(1:6)==target)]){ #this 'which' structure returns a sequence from 1 to 6 excluding the target scenario      
    lines(scenarios[,i],col=(i),pch=5,lwd=1)
    }
    #plot the target scenario
    lines(unlist(scenarios[,target]),type="b",col="blue",lwd=3)
    ####legend structure###################################################
    l.widths <-rep(1,7);l.widths[target+1] <-3 
    l.colors<-c("black",1:6);l.colors[target+1]<-"blue" 
    legend("bottomright",c("BL","S1","S2","S3","S4","S5","S6"),lty=c(1,1,1,1,1,1,1),lwd=l.widths,col=l.colors)
        ####End legend structure###############################################

    points(temp.point,scenarios[temp.point,target],col="Red"
       ,pch=21,bg="red",lwd=2)

  temp.text<- paste(as.character(date.labs[temp.point]),":",sep="") #report date
temp.text <- paste(temp.text,paste(round(100*(scenarios[temp.point,target]/unlist(bl)[temp.point]-1),3),"%",sep=""),sep=" ")
temp.text<- paste(temp.text,"from BL")
legend("topleft",temp.text)
    NULL
}

mouseup <- function(buttons, x, y) {    
    eventEnv$onMouseMove <- NULL
}   

keydown <- function(key) {
    if (key == "q") return(invisible(1))
    eventEnv$onMouseMove <- NULL
    NULL
}

setGraphicsEventHandlers(prompt="Click and drag, hit q to quit",
                 onMouseDown = dragmousedown,
                 onMouseUp = mouseup,
                 onKeybd = keydown)
eventEnv <- getGraphicsEventEnv()
} 
```

我的`datas`数据框很大，但假装它只有时间序列向量。

第一个 col 是日期，然后 col 2 是“基线”预测，3 到 8 是替代方案。

我只是使用下面的行来测试，我还有另一个函数来运行整个事情

```
picker.mover(bl=datas[,2],scenarios=datas[,3:8],date.labs=datas[,1],target=1,name=colnames(datas)[2])
getGraphicsEvent()
par(savepar) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:13:49.467

您可能想查看[http://www.image.ucar.edu/GSP/Software/Fields/Help/add.image.html](http://www.image.ucar.edu/GSP/Software/Fields/Help/add.image.html) - 原则上应该可以将图像添加到绘图中，因此您可以保存图像，然后创建一个以它为背景的新图形并在其上绘制。但是，您将遇到缩放等问题。

# java - SWT - 获取当前日期并附加到字符串

> ID：12697031
> 
> 赞同：0
> 
> 时间：2012-10-02T19:35:20.530
> 
> 标签：java, date, swt

我允许用户重命名系统生成的文件名。选项之一是将当前日期和时间附加到文件名。我已经搜索了如何在没有运气的情况下获取当前数据时间。我确实看到了一个 SWT 小部件 DateTime。但是不明白您是否必须从不同的调用中建立价值。

例子

```
DateTime month = datetime.getMonth();
DateTime day = datetime.getDay();

etc.....

String date = (month + "." + day + etc.....); 
```

我基本上只是想要一个方法 getCurrentDate() ，它返回一个格式为 mm.dd.yy.hr.mn 的字符串

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:42:24.827

看看[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)。您可以按如下方式使用它：

```
public String getCurrentDate()
{
    DateFormat dateFormat = new SimpleDateFormat("MM.dd.yy.HH.mm");
    Date date = new Date();
    String date = dateFormat.format(date);
    return date;
} 
```

[这](http://docs.oracle.com/javase/tutorial/i18n/format/simpleDateFormat.html)是日期格式的 Oracle 教程。

但是，为了获得更好的排序结果，您应该使用：

```
DateFormat dateFormat = new SimpleDateFormat("yyyy.MM.dd.HH.mm"); 
```

# xml - 减小 XML 大小的技术

> ID：12697036
> 
> 赞同：1
> 
> 时间：2012-10-02T19:35:31.237
> 
> 标签：xml, http, soap

可能我会以一种奇怪的方式提出这个问题，但我对 XML 并不熟悉。

我想知道，是否有办法减小 XML 文档的大小，使其类似于：

原始 XML

```
<root>
<longelementname xmlns="long namespace path">Text content</longelementname>
<longelementname xmlns="long namespace path">Text content</longelementname>
<!--................. A lot of elements ...................-->
<longelementname xmlns="long namespace path">Text content</longelementname>
</root> 
```

为命名空间创建快捷方式并通过它引用元素：

```
<root xmlns:x="long namespace path">
<x:longelementname>Text content</x:longelementname>
<x:longelementname>Text content</x:longelementname>
<!--................. A lot of elements ...................-->
<x:longelementname>Text content</x:longelementname>
</root> 
```

我可以为“<x:longelementname>”创建快捷方式“s”，使其类似于：

```
<root>
<s>TextContent</s>
<s>TextContent</s>
<!--................. A lot of elements ...................-->
<s>TextContent</s>
</root> 
```

# ruby-on-rails - 切换用户接收电子邮件开/关 (Rails 3)

> ID：12697037
> 
> 赞同：1
> 
> 时间：2012-10-02T19:35:33.437
> 
> 标签：ruby-on-rails, ruby-on-rails-3, email, actionmailer

我正在编写一个演示应用程序，该应用程序涉及当另一个用户关注他们时向用户发送电子邮件，这一切都已设置并正在工作。我的问题是我无法弄清楚如何在用户设置中添加一个选项来切换这些电子邮件的发送（例如，用户将它们关闭）。

您能解释一下如何实现这一目标吗？也许在我的用户模型中添加一个名为 follow_email 的布尔字段或类似的东西？

我查看了 action mailer 文档，但找不到任何信息。帮助将不胜感激。

更新：进一步看后似乎我应该使用 register_inceptor，这是正确的吗？我很想知道它们是如何实现的。

谢谢

（导轨 3.2 / Ruby 1.9.2）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:39:00.493

向 User 模型添加一个布尔列。

```
can_recieve_emails:boolean 
```

发送电子邮件时：

```
@users.each do |user| # or mail.send if user.can_recieve_emails
   if user.can_recieve_emails
       #Send email
   end
end 
```

# javascript - 为非 JavaScript 用户编程

> ID：12697039
> 
> 赞同：1
> 
> 时间：2012-10-02T19:35:42.757
> 
> 标签：javascript, jquery

为了确保我的网站对非 JavaScript 用户友好，我在构建它时不使用 JavaScript，并在构建网站后添加它。

所以现在我有一个链接如下：

```
<a href="http://example.com/panel" id="showPanel">Expand</a> 
```

但是如果启用了 JavaScript，我将使用以下代码：

```
$("#showPanel").attr("href", "#showPanel"); 
```

使链接指向 #showPanel 而不是[http://example.com/panel](http://example.com/panel)

虽然这一切都很好，但我不禁想知道是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:41:12.863

在页面底部加载 JS 文件。如果您正在运行的 JavaScript 是页面已经加载后，那么应该没有问题。

```
$(document).ready(function() {
    // change links.
}); 
```

如果您试图减少 JS 的原始行数，您可以尝试遵循一些约定并自动更改 URL：

```
var changeAllLinks = function () {
    var allLinks = $("a[href^='http://example.com']");
    for (int i = 0; i < allLinks.length; i++) {
        allLinks[i].attr("href", "#show" + /* substring for the path */);
    }
}; 
```

只是一个想法，因为类似的东西（从概念上）可能有效。您可以遵循一个约定，其中没有 JS 的所有链接都在表单中`<a href="http://example.com/foo">`，并使用 JS 将它们更改为`<a href="#showFoo">`. 这样，您可以遍历所有链接和子字符串以获取路径，将第一个字母大写，将 a添加到前面，然后像您正在做的那样`#show`将其弹出到属性中。`href`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:56:34.933

您在评论中提到这种方法非常繁琐。这将是我最关心的问题。您可能想找到一种方法来自动执行此操作。我使用 rel-attribute 作为选择器提出了这个解决方案。

```
<a href="showThing1" rel="javascriptable">This links via javascript</a>
<a href="showThing2">Always links to a new page</a> 
```

```
// load when ready
$(document).ready(function() {
    // Find all links with the correct rel attribute
    $('a[rel="javascriptable"]').each(function(index) {
        // Change the href attribute
        oldlink = $(this).attr('href');
        newlink = # + oldlink;
        $(this).attr('href', newlink);
    });
}); 
```

我的 jquery 有点生锈，所以我猜复制/粘贴并不能正常工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T20:10:49.077

不要太担心页面加载时间。
这只是衡量内容停止下载需要多长时间的衡量标准，而不是衡量一个人能够使用该网站需要多长时间的衡量标准。

令人担忧的*是*，页面加载何时会阻止使用页面（或查看页面）的能力 - 例如，如果您在页面顶部加载所有 JS，在加载 CSS 之前。

就个人而言，我认为您的格式很好，但看起来您正在做很多`id`-assignment 和 jQuery***手动***监听，这是一件可怕的事情。

为什么不做类似使用 html5`data-set`属性的事情呢？

```
<a data-linkType="JS-Override" data-methodName="doSomethingInternally">link</a> 
```

然后，您可以从您的程序中调用`dataset`该元素。

```
var anchors = document.getElementsByTagName("a");
[].forEach.call(anchors, function(anchor) {
    if (anchor.dataset.linkType !== "JS-Override") { return; }

    var extension = anchor.dataset.methodName;
    anchor.addEventListener("...", function () { setHash(extension); }, false); 
}); 
```

这是一个非常微不足道的例子，但它确实有效。目前对数据集的支持很好。为了让它在包括旧 IE 在内的所有浏览器上工作，它需要被包装在一个简单的 API 中（新浏览器从数据集中读取，旧浏览器需要通过它们的属性列表来读取“data-XXX”属性——jQuery 包装了这个进入`.data();`

And of course, you might have a lot of anchors on your page, and only a handful of them are going to do the thing that you're looking for right now... ...so the trick there would be to grab them by a class that you give them, so that you aren't sorting by every `a` on the page.

...or, alternatively, if you know that each `a` which is a special internal page, is contained within a menu div, or a settings div or whatever, then just grab those ones:

```
var menu = document.getElementById("myMenu"),
    jsLinks = menu.getElementsByTagName("a");

[].forEach.call(jsLinks, function (anchor) { /* everything mentioned before */ }); 
```

# javascript - JavaScript 对象和元素 ID

> ID：12697043
> 
> 赞同：0
> 
> 时间：2012-10-02T19:36:02.213
> 
> 标签：javascript, html, dom

我的项目的目标是创建一个匹配的图片游戏，用户点击两个图像。每次单击图像后，它将翻转到其备用图像。如果两张图片匹配，那么我将删除（或隐藏）这两张图片。当所有图片都被删除时，游戏结束。

我有一段 HTML，如下所示。

```
<body>
    <img src = "somepicture.jpg" onclick = "SomeFunction()" id = "pic0">
    <img src = "someotherpicture.jpg" onclick = "SomeFunction()"  id = "pic1">
    ...etc...
</body> 
```

我也有 JavaScript 代码，它生成每个元素并赋予每个元素属性。

每次我生成一个 img 时，我都想将它与一个我自己声明的片段对象链接起来。片对象的想法是能够存储一个成员变量状态，它决定了图片是面朝下（未点击）还是面朝上（选中）。但我不确定如何将每个 img 元素的 id 属性与我创建的片段对象链接起来。或者，如果这甚至是解决这个问题的最佳方法......

我正在考虑制作一系列碎片。数组的索引应该与 img 元素的 id 属性的最后一个字符匹配。

例如，piece[10] 将映射到 document.getElementById("pic10")。但我不确定如何做到这一点。

提前感谢您的投入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:38:37.170

数组可以包含文本键。用那个。

```
var pieces = [];
pieces['pic10'] = "active"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:39:46.860

对于一个非常简单但不是非常优雅的解决方案，您可以从前缀和数组索引构建 id 字符串。

对于数组中的映射索引 i，

```
document.getElementById("pic" + i) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T19:41:06.937

代替`onclick`属性，将“单击”事件处理程序附加到您的图像。事件处理程序接收一个[事件对象](https://developer.mozilla.org/en-US/docs/DOM/event)作为第一个属性。事件对象的`target`属性包含对引发事件的 dom 元素的引用。所以你可以得到引发事件的图像的 id `event.target.id`。

# c++ - 访问私有嵌套类定义的不一致行为

> ID：12697045
> 
> 赞同：3
> 
> 时间：2012-10-02T19:36:11.930
> 
> 标签：c++, standards, standards-compliance

我有代码将子类模板声明为私有，然后将成员声明为受保护：

```
class X {
private:
    template <class T>
    class Y {
    public:
        void somethingToDo();
        // definition
    };
protected:
    Y<SomeType> _protectedMember;
    // More definition
};

class Z : public virtual X{
public:
    void f();
}
void Z::f() {
    ...
    _protectedMember.somethingToDo();
} 
```

最初我用 gcc 4.3.4 编译它并接受它。然后我将它发送出去，尝试在各种平台上针对 GCC、IBM 和 Microsoft 编译器进行构建，但非 gcc 编译器拒绝了它。现在这*似乎*是对（这个版本的）gcc 标准合规性的控诉。但在得出任何结论之前，我想验证一下技术上是正确的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:56:47.620

您的程序对我来说似乎是有效的（嗯，除了`Y::somethingToDo`荒谬的私人）。`Z::f()`不要求访问任何`private`名称，仅要求访问名称`protected`。

如果`Z::f()`试图引用`Y<T>`，那么编译器应该会出错。但`Z::f()`只是访问`_protectedMember`，这肯定是允许的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:39:54.173

我很确定我以前见过这个。这是当时 GCC 中的一个[已知错误](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=32519)，此后已得到修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T20:40:30.500

您`Y`的模板是私有的，不能在非私有代码中使用，例如`_protectedMember`打算从派生类访问的女巫，您还应该将其声明为受保护，因此其成员对派生类可见。

作为一般规则，如果您希望您的变量在某个范围内完全可访问，那么它的类型必须在该范围内完全可访问。当然，您的代码在以下情况下对当前设计很有用：

```
class Base {
    class PrivateClass {};
protected:
    PrivateClass _val;
    void doSomething( PrivateClass& v );
} 
```

现在派生类可以`_val`用来调用`doSomething`，但不能调用它的方法或使用它的属性。

# python - 使用 django 将社区元素添加到网站

> ID：12697047
> 
> 赞同：2
> 
> 时间：2012-10-02T19:36:12.107
> 
> 标签：python, django, web, messaging, django-socialauth

我想知道有关 Django 社区元素的最佳信息来源。我已经完成了一些很棒的 Django 书籍和教程，但是我无法找到涵盖我正在寻找的内容的网站或教程。

我想添加一个私人用户 - 用户消息系统，以及某种评级系统。还有关于“添加朋友”和其他类似的信息。但这可能超出了我的知识范围。

此外，任何关于最好的 django 教程、书籍或屏幕投射的建议都会很棒。我不是初学者，但我仍然需要学习很多东西。

感谢您的任何回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:58:59.820

尝试[django-userena](http://www.django-userena.org/)进行 pm 和邀请

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:12:20.670

我不知道在哪里可以找到构建社交/社区网站所需的一切，但是：

[Pinax](http://pinaxproject.com/)拥有大量用于社交网络（评分、民意调查、用户资料、朋友关系、评论、通知、活动流）、帐户管理、openid 等的出色应用程序。应该能让你到达那里大约 90% 的路程。

至于学习而不是现成的应用程序，你应该学习一些基于 Django 构建的开源社交网络等。

您还可以在 DjangoSites.com 上找到网站，这些网站既有[社区建设](http://www.djangosites.org/tag/community-building/)，又有[源](http://www.djangosites.org/with-source/)代码，并研究它们的源代码。

[http://www.packtpub.com/article/building-friend-networks-with-django-1.0](http://www.packtpub.com/article/building-friend-networks-with-django-1.0)有很多好东西，尽管它使用的是旧版本。

# cocoa - 带有 Core Data/Mogenerator 的 OCMock 抛出异常 NSInvalidArgumentException [NSProxy doesNotRecognizeSelector]

> ID：12697058
> 
> 赞同：1
> 
> 时间：2012-10-02T19:36:39.667
> 
> 标签：cocoa, unit-testing, core-data, ocmock, mogenerator

我在单元测试中使用 OCMock 来模拟 NSManagedObjects。我使用 Mogenerator 为我的核心数据对象生成机器和人类可读的文件。我试图模拟一个 NSManagedObject 以返回一个布尔值和一个字符串。两者都是我的核心数据实体的属性。当我模拟 时`BOOL`，该值从对象正确返回，我的类使用它，并且测试成功通过。当我尝试`NSString`在同一个对象上存根属性时，它会抛出一个`NSInvalidArgumentException [NSProxy doesNotRecognizeSelector]`.

这是调用代码：

```
id biller = [OCMockObject mockForClass:[Biller class]];
// passes
[[[biller stub] andReturnValue:OCMOCK_VALUE((BOOL){NO})] billerValidatedValue];
// throws exception
[[[biller stub] andReturn:@"Test"] name]; 
```

这是一个例外：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSProxy doesNotRecognizeSelector:name] called!' 
```

我知道有[一些建议](http://iamleeg.blogspot.com/2009/09/unit-testing-core-data-driven-apps.html)在 NSManagedObject 前面有一个用于测试目的的接口，但这似乎在 Mogenerator 机器/人类文件之上增加了复杂性。

在不完全重新配置此代码的情况下，是否有任何其他建议？该代码已经投入生产，我们正在尝试在开发新功能时添加单元测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T23:28:19.670

问题的症结在于您的核心数据模型在测试中不可用，因此当您尝试存根读取的属性时，该方法不存在。Core Data 在运行时动态拦截属性访问器。

为了使您的模型可用，您需要确保您的 .xcdatamodeld 包含在您的单元测试目标中，并且您需要在测试中设置模型。我不确定您是否能够模拟动态属性，但在测试中对 Core Data 对象执行 CRUD 操作变得微不足道，因此无需模拟它们。这是在测试中初始化模型的一种方法：

```
static NSManagedObjectModel *model;
static NSPersistentStoreCoordinator *coordinator;
static NSManagedObjectContext *context;
static NSPersistentStore *store;

-(void)setUp {
    [super setUp];
    if (model == nil) {
        @try {
            NSString *modelPath = [[NSBundle bundleForClass:[self class]] pathForResource:@"my-model" ofType:@"mom"];
            NSURL *momURL = [NSURL fileURLWithPath:modelPath];
            model = [[NSManagedObjectModel alloc] initWithContentsOfURL:momURL];
        }
        @catch (NSException *exception) {
            NSLog(@"couldn't get model from bundle: %@", [exception reason]);
            @throw exception;
        }
    }
    coordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:model];
    NSError *error;
    store = [coordinator addPersistentStoreWithType: NSInMemoryStoreType
                                      configuration: nil
                                                URL: nil
                                            options: nil
                                              error: &error];
    assertThat(store, isNot(nil));
    context = [[NSManagedObjectContext alloc] init];
    [context setPersistentStoreCoordinator:coordinator];
}

-(void)tearDown {
    // these assertions ensure the test was not short-circuited by a failure to initialize the model
    assertThat(model, isNot(nil));
    assertThat(context, isNot(nil));
    assertThat(store, isNot(nil));
    assertThat(coordinator, isNot(nil));
    NSError *error = nil;
    STAssertTrue([coordinator removePersistentStore:store error:&error],
                 @"couldn't remove persistent store: %@", [error userInfo]);
    [super tearDown];
} 
```

或者，您可以使用[MagicalRecord](https://github.com/magicalpanda/MagicalRecord)显着简化事情。即使您不在应用程序中使用它，您也可以在测试中使用它来封装所有核心数据设置。这是我们的单元测试设置在带有 MagicalRecord 的应用程序中的样子：

```
-(void)setUp {
    [super setUp];
    [MagicalRecordHelpers setupCoreDataStackWithInMemoryStore];
}

-(void)tearDown {
    [MagicalRecordHelpers cleanUp];
    [super tearDown];
} 
```

# xml - XML 验证错误

> ID：12697067
> 
> 赞同：1
> 
> 时间：2012-10-02T19:37:11.233
> 
> 标签：xml, validation, w3c

我是 xml 的新手，所以如果有人能指出我这里出了什么问题，我会很高兴。

我基本上是在尝试验证表单中的 xml 文档

```
<?xml version="1.1" encoding="UTF-8"?>

<tag1>foo</tag1>
<tag2>bar</tag2>
<tree>
    <moreStuffBelow></moreStuffBelow>
    <!-- // -->
</tree> 
```

并从 W3C 验证器收到这些错误消息：

```
Errors found while checking this document as XML!
document type does not allow element "tag2" here
document type does not allow element "tree" here 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:40:45.987

每个 XML 必须有一个根元素。在您的情况下，没有根元素。

[根元素](http://en.wikipedia.org/wiki/Root_element)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:38:45.287

所有 XML 都需要一个且只有一个[根元素](http://en.wikipedia.org/wiki/Root_element)：

```
<Something>
   <tag1>1</tag1>
   <tag2>Cipret</tag2>
   <tree>
       <moreStuffBelow></moreStuffBelow>
       <!-- // -->
   </tree>
</Something> 
```

# r - 比较两个因子的水平

> ID：12697071
> 
> 赞同：1
> 
> 时间：2012-10-02T19:37:38.840
> 
> 标签：r, r-factor

是否可以评估两个因素，查看它们是否具有相同数量的级别，如果是，哪些级别不存在于一个或另一个中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T19:42:21.427

如果`factor1`和`factor2`是您的两个因素，只需查看`levels(factor1)`和`levels(factor2)`。

相同的级别数：

```
length(levels(factor1)) == length(levels(factor2)) 
```

一个值而不是另一个值：

```
setdiff(levels(factor1), levels(factor2))
setdiff(levels(factor2), levels(factor1)) 
```

# iphone - 地图卷曲效果

> ID：12697072
> 
> 赞同：3
> 
> 时间：2012-10-02T19:37:39.810
> 
> 标签：iphone, ios, animation

我想制作像 iPhone 5 地图一样的地图卷曲效果。App store 上的许多应用程序已经有这个功能，但我找不到任何好的资源来实现它。请帮我。它应该从卷曲的角开始，当触摸它时它会扩展到屏幕的一半。弯角不是图像。

看看这个参考。 [https://www.dropbox.com/sh/d51z86xtb93exc2/yRnbgpz6cc](https://www.dropbox.com/sh/d51z86xtb93exc2/yRnbgpz6cc)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:04:24.350

也许 XBPageCurl 可以帮助你：

[https://github.com/xissburg/XBPageCurl/downloads](https://github.com/xissburg/XBPageCurl/downloads)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:47:58.697

我相信它是这样的：

```
SampleViewController *sampleView =  [SampleViewController new];
[sampleView setModalTransitionStyle:UIModalTransitionStylePartialCurl];
[self presentViewController:sampleView animated:YES completion:^void(){}]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-03T03:58:59.550

它是苹果的 UIPageViewController。 [http://developer.apple.com/library/ios/#Documentation/UIKit/Reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html](http://developer.apple.com/library/ios/#Documentation/UIKit/Reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)

我已经尝试过了，它正在工作。

# java - 使用非泛型类扩展泛型类时的 Javadoc

> ID：12697076
> 
> 赞同：6
> 
> 时间：2012-10-02T19:37:45.893
> 
> 标签：java, generics, javadoc

假设我有两个类：

```
abstract class GenericA<E> {
    public void go(E e) {...}
}

public class IntegerA extends GenericA<Integer> {
} 
```

请注意，这`GenericA`是包私有和通用的，并且`IntegerA`是公共的而不是通用的。

`IntegerA`现在，当我生成公共 Javadoc（使用 Eclipse）时，我在方法部分看到以下内容：

```
public void go(E e) 
```

问题是该 Javadoc 的读者不知道`E`它是什么。即，`E`表示`Integer`。我宁愿让 Javadoc 说

```
public void go(Integer e) 
```

有没有办法让 Javadoc 以我想要的方式运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:44:57.327

我知道的唯一方法是`IntegerA`用 Integer 覆盖方法，然后调用超级方法。

```
 @Override
 public void go(Integer e) {
    super.go(e);
} 
```

# c - 什么是“__gmon_start__”符号？

> ID：12697081
> 
> 赞同：25
> 
> 时间：2012-10-02T19:38:03.463
> 
> 标签：c, linux, gcc, elf, binutils

我正在编译这段代码`gcc hello.c -o hello -O3`：

```
#include <stdio.h>

int main(void) {
    printf("Hello world\n");
    return 0;
} 
```

当我列出我得到的重定位时：

```
test@southpark$ readelf -r hello | grep gmon
080495a4  00000106 R_386_GLOB_DAT    00000000   __gmon_start__
080495b4  00000107 R_386_JUMP_SLOT   00000000   __gmon_start__ 
```

当我列出此文件中的符号时，我得到：

```
test@southpark$ readelf -s hello | grep gmon
     1: 00000000     0 NOTYPE  WEAK   DEFAULT  UND __gmon_start__
    48: 00000000     0 NOTYPE  WEAK   DEFAULT  UND __gmon_start__ 
```

`gmon_start`与gprof有什么关系吗？为什么即使我没有用`-pg`or编译/链接，它也会为那个符号重新定位`-g`？哪个库会解析这个符号？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T20:34:42.033

做了一点谷歌搜索，从[这里](http://www.mentalcases.net/texts/security/TextSectionStudy.txt)找到了这个：

> 函数 call_gmon_start 初始化 gmon 分析系统。该系统在使用 -pg 标志编译二进制文件时启用，并创建用于 gprof(1) 的输出。在场景二进制 call_gmon_start 的情况下，直接执行该 _start 函数。call_gmon_start 函数查找全局偏移表中的最后一个条目（也称为 __gmon_start__），如果不为 NULL，则将控制权传递给指定地址。__gmon_start__ 元素指向 gmon 初始化函数，该函数开始记录 profiling 信息并使用 atexit() 注册一个清理函数。然而，在我们的例子中，gmon 没有被使用，因此 __gmon_start__ 为 NULL。

**所以...**

1.  是的，它确实与 gprof 有关
2.  我不确定为什么符号会留在里面。也许只是为 gprof 编译时的占位符？

***更新：***

好的，所以我编译了有和没有`-pg`. 它看起来像`__gmon_start__`被映射到已编译程序中的地址。因此，话虽如此，我认为没有一个库可以解析该符号，而是程序本身。

**与`-pg`：**

```
akyserr@orion:~$ readelf -r hello

Relocation section '.rel.dyn' at offset 0x32c contains 1 entries:
 Offset     Info    Type            Sym.Value  Sym. Name
08049fec  00000806 R_386_GLOB_DAT    08048460   __gmon_start__

Relocation section '.rel.plt' at offset 0x334 contains 6 entries:
 Offset     Info    Type            Sym.Value  Sym. Name
0804a000  00000607 R_386_JUMP_SLOT   080483b0   _mcleanup
0804a004  00000107 R_386_JUMP_SLOT   00000000   __monstartup
0804a008  00000207 R_386_JUMP_SLOT   00000000   mcount
0804a00c  00000307 R_386_JUMP_SLOT   00000000   __cxa_atexit
0804a010  00000407 R_386_JUMP_SLOT   00000000   puts
0804a014  00000507 R_386_JUMP_SLOT   00000000   __libc_start_main 
```

**__gmon_start__ 代码的 objdump：**

```
akyserr@orion:~$ objdump -S hello  | grep "460 <__gmon_start__>:" -A 20

08048460 <__gmon_start__>:
 8048460:       83 ec 1c                sub    $0x1c,%esp
 8048463:       a1 20 a0 04 08          mov    0x804a020,%eax
 8048468:       85 c0                   test   %eax,%eax
 804846a:       75 2a                   jne    8048496 <__gmon_start__+0x36>
 804846c:       c7 05 20 a0 04 08 01    movl   $0x1,0x804a020
 8048473:       00 00 00 
 8048476:       c7 44 24 04 36 86 04    movl   $0x8048636,0x4(%esp)
 804847d:       08 
 804847e:       c7 04 24 30 84 04 08    movl   $0x8048430,(%esp)
 8048485:       e8 36 ff ff ff          call   80483c0 <__monstartup@plt>
 804848a:       c7 04 24 b0 83 04 08    movl   $0x80483b0,(%esp)
 8048491:       e8 1a 01 00 00          call   80485b0 <atexit>
 8048496:       83 c4 1c                add    $0x1c,%esp
 8048499:       c3                      ret    
 804849a:       90                      nop
 804849b:       90                      nop
 804849c:       90                      nop
 804849d:       90                      nop 
```

在`__gmon_start__`编译后的`hello`程序中，你可以看到它`__monstartup`被调用了。（[monstartup 手册页](http://www.unix.com/man-page/FreeBSD/3/monstartup/)）

**没有`-pg`：**

```
akyserr@orion:~$ readelf -r hello 

Relocation section '.rel.dyn' at offset 0x290 contains 1 entries:
 Offset     Info    Type            Sym.Value  Sym. Name
08049ff0  00000206 R_386_GLOB_DAT    00000000   __gmon_start__

Relocation section '.rel.plt' at offset 0x298 contains 3 entries:
 Offset     Info    Type            Sym.Value  Sym. Name
0804a000  00000107 R_386_JUMP_SLOT   00000000   puts
0804a004  00000207 R_386_JUMP_SLOT   00000000   __gmon_start__
0804a008  00000307 R_386_JUMP_SLOT   00000000   __libc_start_main 
```

您可以在这里看到， 的符号值`__gmon_start__`设置为`00000000`。

# iphone - Unity 应用程序在第一个场景中崩溃

> ID：12697103
> 
> 赞同：8
> 
> 时间：2012-10-02T19:39:31.773
> 
> 标签：iphone, ios, xcode, unity3d

我在 Xcode 上收到以下关于统一应用程序启动的日志。

```
2012-10-03 00:28:58.721 salah[1357:707] -> registered mono modules 0xe5d53c
-> applicationDidFinishLaunching()
Mono path[0] = '/var/mobile/Applications/6466AD40-4714-4F2A-A20F-5B6803CDC1ED/salah.app/Data/Managed'
Invalid serialized file version. File: "/var/mobile/Applications/6466AD40-4714-4F2A-A20F-5B6803CDC1ED/salah.app/Data/mainData". Expected version: 3.5.5f2\. Actual version: 3.5.5f3.

(Filename: /Applications/buildAgent/work/14194e8ce88cdf47/Runtime/Serialize/SerializedFile.cpp Line: 709)

Failed to read file '/var/mobile/Applications/6466AD40-4714-4F2A-A20F-5B6803CDC1ED/salah.app/Data/mainData' because it is corrupted.

(Filename: /Applications/buildAgent/work/14194e8ce88cdf47/Runtime/Serialize/SerializedFile.cpp Line: 430)

PlayerInitEngineNoGraphics settings: Could not preload global game manager #0
   engine intialization failed 
```

这导致我的统一 3d 应用程序在第一个场景出现之前崩溃。

有人知道解决方法吗？

应用程序已经切换了很多不同版本的统一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-16T19:03:17.530

“没有找到 GlobalGameManagers 文件，正在退出播放器！” 至少有时会发生，因为一些随机问题阻止了编辑器一直到构建结束。
通常，您应该能够在控制台中看到不是编译错误的错误，如果您清理控制台，很容易错过。

在我的情况下，我的测试需要一个 Windows dll“NSpec.dll”，但错误地不在`Editor`路径下（并且没有从构建中排除，通过检查器中的复选标记）所以在构建期间，Unity 想要将它包含在我的 iOS 构建中，但随后抱怨并中途停止，而完成一半的项目看起来还不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-08T11:35:45.303

就我而言，发生此错误（在 VisualStudio 中）是因为我在 Unity 中构建了解决方案并同时在 VisualStudio 中调试了相同的解决方案，因此 Unity 构建没有完全运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T02:35:27.550

由于发生了从不同的统一版本切换项目。Xcode 项目中有一个名为“Data”的文件夹（在 finder 中打开），您使用的是最新的（f3）意味着统一用最新的统一版本替换了该 Data 文件夹，而应用程序期待旧的“f2”。因此，如果您可以从旧项目中复制和替换“数据”文件夹，那么这将解决问题。

或更新统一也将解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-29T12:08:28.513

任何进一步的解决方案？替换“数据”文件夹对我不起作用..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-13T10:00:58.923

我有同样的问题并解决[这个问题。](https://stackoverflow.com/a/31663393/2049325)

项目 > 方案 > 编辑 > 运行 > 选项 > GPU 帧捕获 > 禁用

[![在此处输入图像描述](../Images/e3c05e1fbaf43b452d362ff3b335f8ce.png)](https://i.stack.imgur.com/wFK8D.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-13T12:03:55.453

您应该尝试从所需的文件夹中删除库和临时文件夹，在 Xcode 打开之前，您必须从统一构建它。

# php - 替换重音字符

> ID：12697107
> 
> 赞同：1
> 
> 时间：2012-10-02T19:39:38.197
> 
> 标签：php, character-encoding

我一直在阅读其他一些问题，但我仍然坚持将包含重音字符的字符串转换为纯字符（我的意思是 az）的问题

我有一个产品名称“Áhkká”，它已经编码为`"&Aacute;hkk&aacute;"`

我想将此解码为带重音符号的字符串，然后将其转换为“Ahkka”

到目前为止，我已经尝试过：

```
function convert($name) {
   $name = html_entity_decode($name,ENT_COMPAT,"UTF-8");
   $name = iconv('UTF-8', 'ASCII//TRANSLIT', $name);
   return $name;
} 
```

我从 iconv 收到错误：“检测到输入字符串中的非法字符”

我也尝试过使用 htmlspecialchars_decode($name); 但这给了我“hkk”</p>

我还找到了一个字符串替换函数来清除重音符号，但我似乎无法将非 html 字符串传递给它

```
$name = strtr($name,'àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝ','aaaaaceeeeiiiinooooouuuuyyAAAAACEEEEIIIINOOOOOUUUUY'); 
```

有人可以提供解决方案吗？服务器正在运行 PHP 5.2.13。iconv 已启用 glibc 2.5（输入/内部/输出编码在 phpinfo 中为 ISO-8859-1）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:59:38.150

试图找到解决您的问题的方法，我发现了这个问题：

[多字节 strtr() -> mb_strtr()](https://stackoverflow.com/questions/2758736/multibyte-strtr-mb-strtr)

在选择的答案中，Alix Axel 编写了一个正是您需要的函数：

```
function Unaccent($string)
{
    return preg_replace('~&([a-z]{1,2})(?:acute|cedil|circ|grave|lig|orn|ring|slash|th|tilde|uml|caron);~i', '$1', htmlentities($string, ENT_QUOTES, 'UTF-8'));
}

echo Unaccent(html_entity_decode('&Aacute;hkk&aacute;')); 
```

印刷`Ahkka`

# node.js - 哪个版本的 node.js 在 Windows Azure 网站上运行？

> ID：12697113
> 
> 赞同：7
> 
> 时间：2012-10-02T19:39:58.017
> 
> 标签：node.js, azure, azure-web-app-service

哪个版本的 node.js 实际上在 Windows Azure 网站上运行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-01T04:01:13.350

Windows Azure 网站服务器上预装了许多版本的节点，您可以通过在 package.json 文件中指定所需的最低版本来选择使用哪一个。说明[在这里](http://www.windowsazure.com/en-us/develop/nodejs/common-tasks/specifying-a-node-version/)。

可用版本定期更改，但为了让您了解，当前可用版本（截至 2013 年 11 月 1 日）为：0.6.17、0.6.20、0.8.2、0.8.19、0.8.26、 0.10.5、0.10.18、0.10.21。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T19:39:58.017

事实证明，在撰写本文时：**v0.6.20**。

通过以下脚本快速发现：

```
var http = require('http');
http.createServer(function(req, res){
    res.writeHead(200, {'content-type': 'text/plain'})
    res.end('Version - ' + process.version);
}).listen(process.env.port || 1337) 
```

要跟随并亲自尝试，请[按照以下步骤操作](http://blog.krisvandermast.com/FindOutWhichVersionOfNodejsCurrentlyRunsOnWindowsAzureWebSites.aspx)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-04T22:10:33.067

我发现了这个： [http ://hardcoded.se/2015/01/07/node-js-version-on-azure-websites/](http://hardcoded.se/2015/01/07/node-js-version-on-azure-websites/)

在您的应用程序的 KUDU 环境中（如果您的网站有 url deletemesoon.azurewebsites.net，可通过 url deletemesoon.scm.azurewebsites.net 访问）点击运行时版本，您将收到可用版本的 JSON 表示。
希望这能回答你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-28T12:57:32.540

默认情况下 0.6.20

**但是**您可以设置自己的版本：

1.  将 (ftp) 节点可执行文件（不是安装程序！）上传到**wwwroot中的****bin**文件夹或您喜欢的任何位置。即从这里得到它：[http ://nodejs.org/dist/v0.10.12/node.exe](http://nodejs.org/dist/v0.10.12/node.exe)
***   添加

    ```
    nodeProcessCommandLine: "D:\home\site\wwwroot\bin\node.exe" 
    ```** 

 **到**iisnode.yml**（必须位于**server.js**所在的位置）

[来源： http: [//www.windowsazure.com/en-us/develop/nodejs/common-tasks/specifying-a-node-version/](http://www.windowsazure.com/en-us/develop/nodejs/common-tasks/specifying-a-node-version/) ]**

# php - 将目标空白添加到超链接

> ID：12697116
> 
> 赞同：-2
> 
> 时间：2012-10-02T19:40:09.303
> 
> 标签：php

我在将 target=_blank 添加到链接时遇到问题。我的链接来自数据库的一个变量。

```
buy it:<?php echo $abc ?> 
```

如果我使用 firebud，那么它看起来像：

```
 buy it:<a href="https://rads.stackoverflow.com/amzn/click/com/B007DB7O2Q" rel="nofollow noreferrer"> Amazon </a> 
```

请让我知道如何将 target=_blank 添加到此链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:42:15.593

您可以将标签添加`base`到文档的头部，这将更改所有链接的目标。

```
<head>
    <base target="_blank">
</head> 
```

在锚标记上指定不同的目标将覆盖此默认选项，如果您有其他不希望目标为空白的链接，这很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:44:05.440

如果您的链接在数据库中，您可以执行类似 str_replace("<a ", "<a target='_blank' ", $var) 的操作：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T19:48:39.850

好吧，如果你在客户端做这种工作会更好。

使用 javascript

```
document.getElementsByTagName('a')[0].target="_blank"; 
```

# bash - 字符乱序？

> ID：12697120
> 
> 赞同：1
> 
> 时间：2012-10-02T19:40:26.453
> 
> 标签：bash, character

我做了一个简短的测试，因为冒号字符似乎有`:`问题。脚本打印字符，很明显冒号出现在 之后`9`，但在运行字符串测试之后，它看起来实际上出现在正斜杠之后`/`。是什么赋予了？

```
$ cat chartest.sh
#!/bin/sh
echo $LANG

for i in {33..126}; do
  printf -v hex "%x" "$i"
  printf "\x$hex"
done

echo
[[ : > 9 ]] && echo true || echo false
[[ : > / ]] && echo true || echo false

$ ./chartest.sh
en_US.UTF-8
!"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnop
qrstuvwxyz{|}~
false
true 
```

我发现如果我使用旧的测试功能它可以正常工作

```
$ [ : \> 9 ] && echo true || echo false
true 
```

也相关

[http://tiswww.case.edu/php/chet/bash/COMPAT](http://tiswww.case.edu/php/chet/bash/COMPAT)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:20:28.303

当你用 [[ > ]] 比较字符串时，bash 使用区域感知比较。在 en_US.UTF-8 中，最常见的标点符号出现在数字之前，而不管 ASCII 代码（或 Unicode 代码点，就此而言）。如果您将您的语言环境（或至少 LC_COLLATE）更改为 C 或 C.UTF-8，那么您应该会发现排序规则更符合您的预期。

请注意，区域感知比较并不像音译代码那么简单。我个人认为有必要将我的 LANG 设置为 C，否则该`sort`实用程序对空格的处理会破坏我的许多脚本。我不知道为什么 Ubuntu 选择这样做：

```
$ echo $LANG
en_GB.UTF-8
$ [[ "week night" > "wee knight" ]] && echo yes || echo no
yes
$ [[ "week light" > "wee knight" ]] && echo yes || echo no
no 
```

# r - 在R中，矩阵行或列的匹配函数

> ID：12697122
> 
> 赞同：10
> 
> 时间：2012-10-02T19:40:33.927
> 
> 标签：r

中的[值匹配功能](http://stat.ethz.ch/R-manual/R-patched/library/base/html/match.html)`R`非常有用。但据我了解，它不足以支持二维或高维输入。

例如，假设`x`和`y`是具有相同列数的矩阵，我想将 的行与`x`的行匹配`y`。'R' 函数调用`match(x,y)`不这样做。列表的输入也会出现同样的不足。

我已经实现了我自己的版本`matchMat(xMat, yMat)`（附在下面），但我想知道你对这个任务有什么解决方案。

```
matchMat = function(xMat, uMat, dimn=1) {
    ind = rep(-1, dim(xMat)[dimn])
    id = 1 : dim(uMat)[dimn]
    for (i in id) {
        e = utilSubMat(i, uMat, dimn)
        isMatch = matchVect(e, xMat, dimn)
        ind[isMatch] = i
    }
    return(ind)
}

matchVect = function(v, xMat, dimn) {
    apply(xMat, dimn, function(e) {
        tf = e == v
        all(tf)
    })
}

unittest_matchMat = function() {
    dimn = 1
    uMat = matrix(c(1, 2, 2, 3, 3, 4, 4, 5), ncol=2, byrow=T)
    ind = sample(dim(uMat)[1], 10, replace=T)
    print(ind)
    xMat = uMat[ind, ]
    rst = matchMat(xMat, uMat, dimn)
    print(rst)
    stopifnot(all(ind == rst))

    xMat2 = rbind(c(999, 999), xMat, c(888, 888))
    rst2 = matchMat(xMat2, uMat, dimn)
    print(rst2)
    stopifnot(all(c(-1, ind, -1) == rst2))
    print('pass!')   
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-02T19:56:55.687

`match`将适用于`list`s 的原子向量。因此，要将一个矩阵的行与另一个矩阵匹配，您可以执行以下操作：

```
match(data.frame(t(x)), data.frame(t(y))) 
```

`t`将行转置为列，然后在转置矩阵中`data.frame`创建一个列。`list`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-30T03:58:33.593

`row.match`包中的函数`prodlim`允许您识别一个矩阵中的行，这些行也在另一个矩阵中找到（相同）。非常方便且易于使用。

```
library(prodlim)
row.match(x,y) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-14T12:47:19.803

您可以在不使用任何功能的情况下做到这一点：

假设 `adj1`是*colnames*和*row.names*的`3*3`矩阵，并且是您希望矩阵转换为的顺序：**`c('V1','V2','V3')``vec1`**

 **```
vec1 <- c('V2','V3','V1') 
```

您可以简单地使用以下代码：

```
adj1[vec1,vec1] 
```

这会给你带来魔力。

干杯!

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-26T12:08:46.650

您可以使用`asplit`创建一个`list`可供匹配使用的。但是手册说*列表被转换为字符向量*，并且*列表匹配可能非常慢，最好避免，除非在简单的情况下*。

```
match(asplit(x, 1), asplit(y, 1))
#[1] NA  1  2 
```

所以也许使用`interaction`or`paste`是一种选择。

```
match(interaction(data.frame(x)), interaction(data.frame(y)))
#[1] NA  1  2

match(apply(x, 1, paste, collapse =" "), apply(y, 1, paste, collapse =" "))
#[1] NA  1  2 
```

数据：

```
(x <- matrix(1:9, 3))
#     [,1] [,2] [,3]
#[1,]    1    4    7
#[2,]    2    5    8
#[3,]    3    6    9

(y <- matrix(2:10, 3))
#     [,1] [,2] [,3]
#[1,]    2    5    8
#[2,]    3    6    9
#[3,]    4    7   10 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-21T23:23:38.933

你可以使用`apply`：

```
z <- apply(x, 1, function(a) apply(y, 1, function(b) all(a==b))) 
```

这将生成一个包含`nrow(x)`行和`nrow(y)`列的矩阵，其条目标记匹配的索引。**

# tsql - T-SQL SYNTAX ISSUE - 在 CASE 语句中使用 OR

> ID：12697127
> 
> 赞同：10
> 
> 时间：2012-10-02T19:40:55.783
> 
> 标签：tsql, syntax, case

我想构建一个包含以下逻辑的 CASE 语句，但 sql 编译器不喜欢我的语句中的“或”：

```
CASE expression
WHEN expression1 OR expression2
THEN <yadda yadda>
ELSE <yadda yadda>
END 
```

**下面更具体的代码：**

```
CASE @var1
WHEN '99' OR '22'   
            THEN        
                (CASE @var2
                WHEN 'All' THEN col1
                ELSE @var2
                END)
END 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T19:43:58.090

```
DECLARE @Variable INT;
SET @Variable = 1;

SELECT
    CASE
        WHEN @Variable = 1 OR @Variable = 2 THEN 'It is 1 or 2'
        WHEN @Variable = 3 THEN 'It is 3'
        ELSE 'It is not 1, 2, or 3'
    END AS [SomeField] 
```

[CASE](https://docs.microsoft.com/en-us/sql/t-sql/language-elements/case-transact-sql)、[OR](https://docs.microsoft.com/en-us/sql/t-sql/language-elements/or-transact-sql)和[Expressions](https://docs.microsoft.com/en-us/sql/t-sql/language-elements/expressions-transact-sql)的 MSDN 文档。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T20:02:02.340

根据您的编辑，您甚至不需要`OR`声明：

```
CASE 
    WHEN @var1 IN ('99', '22')                
    THEN                         
         (CASE @var2                 
          WHEN 'All' 
          THEN col1                 
          ELSE @var2                 
          END) 
    END 
```

# c# - Windows 8 UI 和服务参考

> ID：12697133
> 
> 赞同：2
> 
> 时间：2012-10-02T19:41:09.133
> 
> 标签：c#, windows, windows-8, visual-studio-2012

我有一个连接到 API 的简单程序，它列出了我在远程位置拥有的一些文件。我为 Win7 创建了这个程序，它工作得很好。我将代码复制到 Visual Studio 2012 的 Metro/Windows 8 UI 应用程序中，我得到：

“Api.Client”不包含“GetId”的定义，并且找不到接受“Api.Client”类型的第一个参数的扩展方法“GetId”（您是否缺少 using 指令或程序集引用？）

编码：

```
public static Api.Client ClientApi = new Api.Client();

private void btnDisplay_Click(object sender, RoutedEventArgs e)
{
lvFileList.Items.Clear();

var return = ClientApi.GetId();
string strClientName = return.Member.Name.toString();
string strId = return.Member.Id.toString();
//etc
} 
```

这是在 Visual Studio 2010 上运行良好的完全相同的代码。我错过了什么吗？还是 API 方面有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:08:17.857

Windows 应用商店应用程序（以前称为 Metro）使用 .Net API 的缩减版本。我怀疑您的 Api.Client Dll 无法添加到您的 Windows 应用商店应用程序中，因为它不适合新框架。它可能适用于 VS2012 中的标准 Windows 应用程序。

请参阅[.NET for Windows Store 应用程序 - 支持的 API](http://msdn.microsoft.com/en-us/library/windows/apps/br230232.aspx)

# java - 使用 Java Swing 选择一个文件路径并使用该选择执行某些操作

> ID：12697138
> 
> 赞同：4
> 
> 时间：2012-10-02T19:41:18.327
> 
> 标签：java, swing, file, jfilechooser

我一直在阅读 javax.swing 中的 JFileChooser。* 我知道 showOpenDialog() 方法将允许我选择一个文件并单击“选择”，但我有一个我希望它工作的特定方式。

我想使用两个 JFileChooser（可能在 JPanel 中并排）来选择 TO 和 FROM 路径，然后单击一个按钮，该按钮将从两个“Chooser”获取用户输入并执行某些操作。

也许如果有人有一个像这样只做一个 JFileChooser 的例子？本质上只是在选择器中突出显示文件/目录并单击一些其他按钮以从“选择器”中获取输入（也隐藏了 JFileChoosers 按钮（取消和选择））。

这个“其他”按钮很可能只是向代码发出信号以从 JFileChooser 对象中获取值。

我希望作为 Swing 的新手，我还缺少另一个可以完成我所描述的内容的课程，但它只是没有出现在我一直在制作的 Google 搜索中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T20:03:16.303

这是我的第一次通过（我在我的 Mac 上，所以我在遍历 JDK 源代码时遇到了一些问题；））

问题是，摆脱`cancel`和`okay`按钮......

![在此处输入图像描述](../Images/7d55e417e822efdb8f389a09c1faa45a.png)

```
public class TestFileChooser2 {

    public static void main(String[] args) {
        new TestFileChooser2();
    }

    public TestFileChooser2() {

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new MainPane());
                frame.setSize(800, 400);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

            }
        });

    }

    protected class MainPane extends JPanel {

        private JFileChooser fileChooser;
        private JPanel filePane;

        private JTextField fileField;

        public MainPane() {

            setLayout(new BorderLayout());

            fileChooser = new JFileChooser();
            fileChooser.addPropertyChangeListener(new PropertyChangeListener() {

                @Override
                public void propertyChange(PropertyChangeEvent evt) {
                    if (evt.getPropertyName().equals("SelectedFileChangedProperty")) {
                        File file = fileChooser.getSelectedFile();
                        if (file != null) {
                            setFile(file);
                        }
                    }
                }
            });

            add(fileChooser, BorderLayout.WEST);

            filePane = new JPanel(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.weightx = 1;
            gbc.fill = GridBagConstraints.HORIZONTAL;

            fileField = new JTextField(10);
            filePane.add(fileField, gbc);

            add(filePane);

        }

        protected void setFile(File file) {

            fileField.setText(file.getPath());

        }

    }
} 
```

**更新**

显然 Windows 不喜欢与属性更改侦听器玩得很好......

![在此处输入图像描述](../Images/99e07f850bea0f4e1b13d2718345a87c.png)

毫无疑问，这是一个完整的黑客......

```
public class TestFileChooser2 {

    public static void main(String[] args) {
        new TestFileChooser2();
    }

    public TestFileChooser2() {

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {

                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new MainPane());
                frame.setSize(800, 400);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

            }
        });

    }

    protected class MainPane extends JPanel {

        private JFileChooser fileChooser;
        private JPanel filePane;
        private JTextField fileField;

        public MainPane() {

            setLayout(new BorderLayout());

            fileChooser = new JFileChooser();
            fileChooser.setApproveButtonText("delete");
            removeButtons(fileChooser);

            JList list = findFirstChildren(fileChooser, JList.class);
            list.addListSelectionListener(new ListSelectionListener() {
                @Override
                public void valueChanged(ListSelectionEvent e) {
                    if (!e.getValueIsAdjusting()) {
                        File file = (File)((JList)e.getSource()).getSelectedValue();
                        if (file != null) {
                            setFile(file);
                        }
                    }
                }
            });

//            fileChooser.addPropertyChangeListener(new PropertyChangeListener() {
//                @Override
//                public void propertyChange(PropertyChangeEvent evt) {
//                    System.out.println(evt.getPropertyName());
//                    if (evt.getPropertyName().equals("SelectedFileChangedProperty")) {
//                        File file = fileChooser.getSelectedFile();
//                        if (file != null) {
//                            setFile(file);
//                        }
//                    }
//                }
//            });

            add(fileChooser, BorderLayout.WEST);

            filePane = new JPanel(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.weightx = 1;
            gbc.fill = GridBagConstraints.HORIZONTAL;

            fileField = new JTextField(10);
            filePane.add(fileField, gbc);

            add(filePane);

        }

        protected void setFile(File file) {

            fileField.setText(file.getPath());

        }

        protected void removeButtons(Container container) {
            for (Component child : container.getComponents()) {

                if (child instanceof JButton) {
                    JButton btn = (JButton) child;
                    if (btn.getText() != null && (btn.getText().equals(fileChooser.getApproveButtonText()) || btn.getText().equals("Cancel"))) {
                        container.remove(child);
                    }
                } else if (child instanceof Container) {
                    removeButtons((Container) child);
                }

            }
        }

        public <T extends Component> T findFirstChildren(JComponent component, Class<T> clazz) {

            T child = null;
            for (Component comp : component.getComponents()) {

                if (clazz.isInstance(comp)) {

                    child = (T) comp;
                    break;

                } else if (comp instanceof JComponent) {

                    child = findFirstChildren((JComponent) comp, clazz);
                    if (child != null) {
                        break;
                    }

                }

            }

            return child;

        }
    }
} 
```

更好的解决方案是[`FileSystemView`](http://docs.oracle.com/javase/7/docs/api/javax/swing/filechooser/FileSystemView.html)直接利用并构建您自己的视图，但这比我现在有时间更努力:(

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T21:13:28.003

此[示例](https://stackoverflow.com/a/4054307/230513)`JFileChooser`通过覆盖批准和取消方法扩展为直接处理选择。

```
class MyChooser extends JFileChooser {

    @Override
    public void approveSelection() {
        ...
    }

    @Override
    public void cancelSelection() {
        ...
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T19:52:42.240

编辑：根据@MadProgrammer，这是不正确的。

`JFileChooser`是一个旨在执行打开和保存内容的**对话框。**您可以更改按钮的名称并可能删除取消。但是您不能将其作为面板打开。

但是，它是一个对话框，需要进行相当多的修改才能将其嵌入到页面中。源是可用的，所以它是可能的。您可以重用这些`javax.swing.filechooser`类。

# git - Trac 在每次 git 重置时与 repo 失去同步

> ID：12697139
> 
> 赞同：1
> 
> 时间：2012-10-02T19:41:30.740
> 
> 标签：git, trac

我已经设置了 Trac 1.0 并与我的 git repo 同步。
在使用[CommitTicketUpdater](http://trac.edgewall.org/wiki/CommitTicketUpdater)并尝试使用提供的语法关闭 git commit 的问题时：“关闭 #1”或“关闭 #1”或“修复 #1”[which-did-not-work]，我不得不重置一对次分支反转我的命令提交。每次我 dd 重置时，trac 都失去了同步，我不得不重新同步：

> trac-admin /path/to/project 存储库重新同步“*”

这狗屎很讨厌，需要一些时间才能完成。有什么我想念的吗？有没有办法重置分支而不是失去同步？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T00:50:34.717

Trac 和 git 在不同的范式上运行。Git 非常高兴允许您通过取消提交、重新排序修订等来更改历史记录。Trac 假设一个线性的、不可变的时间线（请记住，它是为与 Subversion 一起使用而设计的）。当您使用关闭票证的消息提交时，票证在 Trac 的数据库中关闭。当您重置提交时，Trac 不会返回并更新自己的时间线以匹配新的 git 时间线。重新同步是一个费力的过程（正如您所发现的），但这是您告诉 Trac 时间线已更改的唯一方法。

解决此问题的一种方法是让 Trac 监视与您用于开发工作的存储库不同的存储库。仅在您对 Trac 的存储库进行测试后才将更改推送到它们，并且可以相当确定您不必还原。从 Trac 的角度来看，这将使时间线保持线性，但仍允许您正常使用 git 的所有功能。

这实际上是任何系统都难以解决的问题。当您更改 git 存储库的时间线以影响使用工单打开/关闭命令（例如）的提交时，您可能会更改工单的工单编号或工单注释的顺序。这会破坏对这些项目的任何现有链接或引用。

确保您的存储库更改与您的问题跟踪器保持同步的一种方法是使用一个类似于[bugs](http://bugseverywhere.org/)的系统，该系统将错误列表/详细信息存储在存储库中。像这样的工具通常不像 Trac 那样功能齐全，但它们的分布式特性可能更适合分布式版本控制系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T18:08:26.757

为了使用 CommitTicketUpdater，我创建了一个裸存储库并向其中添加了以下钩子：[https](https://gist.github.com/kenaniah/5471280) ://gist.github.com/kenaniah/5471280 （将它们放在 repo 的钩子目录中，不带 .sh 扩展名并使其可执行）。

然后我添加了一个 cron 作业来调用`git fetch; hooks/post-fetch`，现在无论分支结构如何，都会自动通知 trac 仅新提交。

# mysql - Rails Mysql 查找已加入表的已加入表，按创建日期不在 n 个月内

> ID：12697142
> 
> 赞同：0
> 
> 时间：2012-10-02T19:41:39.353
> 
> 标签：mysql, ruby-on-rails

我很难查询。这是在rails（2.1）中，但也许我需要一个find_by_sql。

我有一张公司表，里面有很多客户，有很多组。我需要找到在一定时间内（比如 3 个月）内没有任何客户的公司。

我想出的最好的是：

```
Company.all(:include => { :clients => :groups },
:conditions => ["(SELECT count(*) FROM groups WHERE
groups.client_id = clients.id AND clients.company_id = companies.id
AND groups.created_at > ?) = 0 AND companies.is_active = 1 AND
clients.is_active = 1", 3.months.ago]) 
```

理想情况下，这也会返回为每家公司制作的最后一组的时间（不知道从哪里开始）。为此，我一直在为每家公司使用单独的查询：

```
Group.last(:include => { :client => :company },
:conditions => { "companies.id" => company.id }) 
```

当我运行报告时，我得到的公司在上个月左右创建了组，所以看起来我的初始查询不正确。但我不知道从这里去哪里。

编辑：这是表的表创建语句。我确实删除了大部分字段并留下了相关的内容。我希望这行得通。

```
mysql> show create table companies;
| Table     | Create Table | | companies | CREATE TABLE `companies` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `created_on` date DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1646 DEFAULT CHARSET=latin1 |
1 row in set (0.00 sec)

mysql> show create table clients;
| Table   | Create Table | clients | CREATE TABLE `clients` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `company_id` int(11) DEFAULT NULL,
  `created_on` date DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `CompanyID` (`company_id`)
) ENGINE=InnoDB AUTO_INCREMENT=3374 DEFAULT CHARSET=latin1 |
1 row in set (0.00 sec)

mysql> show create table groups;
| Table  | Create Table | groups | CREATE TABLE `groups` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `client_id` int(11) DEFAULT NULL,
  `created_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `ClientID` (`client_id`)
) ENGINE=InnoDB AUTO_INCREMENT=157006 DEFAULT CHARSET=latin1 |
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:24:55.310

如果您使用当前的逻辑，您将被迫使用 NOT IN ()，方法是选择在过去 3 个月内创建的具有组的所有公司的公司 ID，然后使用 NOT IN () 选择 ID 不在该列表中的公司. 请注意，您根本不需要 count(*) ，因为计数为 0 的记录无论如何都不会存在。NOT IN () 查询通常是个坏主意，因为它们会进行全表扫描。也许最好选择一个 MAX(groups.created_at) 并过滤 MAX(groups.created_at) < 3.months.ago

```
select c.* from companies c 
inner join clients cl on cl.company_id = c.id 
inner join (select g.client_id from groups g group by g.client_id 
having max(g.created_at) < '2012-06-01') t on t.client_id = cl.id; 
```

这个应该可以工作，并且应该更快一些。或者是这样的：

```
select c.* from companies c 
inner join clients cl on cl.company_id = c.id 
where cl.id not in (select distinct g.client_id from groups g 
where g.created_at > '2012-06-01'); 
```

不确定哪一个对真实数据的表现更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:09:14.767

你能尝试一个没有子选择的真正查询吗？

```
SELECT companies.* FROM companies
 JOIN clients ON clients.company_id = companies.id 
 JOIN groups ON groups.client_id = clients.id
 GROUP BY companies.id
 HAVING MAX(groups.created_at) < '2012-06-01'; 
```

# iphone - 如何创建在没有预处理器的类中访问的全局 CGFloat

> ID：12697146
> 
> 赞同：1
> 
> 时间：2012-10-02T19:42:19.683
> 
> 标签：iphone, objective-c, ios, ipad

我的 .h 类中有以下内容：

```
extern CGFloat tableMarginSide;
extern CGFloat tableMarginTop;
extern CGFloat fromImageSize;
extern CGFloat keyboardHeightPortrait;
extern CGFloat keyboardHeightLandscape; 
```

在我的初始化中我做了：

```
 CGFloat tableMarginSide = 20;
    CGFloat tableMarginTop = 20;
    CGFloat fromImageSize = 50;

    CGFloat keyboardHeightPortrait  = 210;
    CGFloat keyboardHeightLandscape  = 160;

    if (IS_IPAD){
        CGFloat tableMarginSide = 80;
        CGFloat tableMarginTop = 65;
        CGFloat fromImageSize = 50;

        CGFloat keyboardHeightPortrait = 260;
        CGFloat keyboardHeightLandscape = 350;
    } 
```

为什么我收到警告并且我不能在课堂上使用这个浮点数？哦，顺便说一句，我不想​​使用预处理器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:50:37.183

您正在重新标记`init`. 在`init`方法内部，声明对该块是本地的。你的意思是这样的：

## 标题

```
extern CGFloat tableMarginSide;
extern CGFloat tableMarginTop;
extern CGFloat fromImageSize;
extern CGFloat keyboardHeightPortrait;
extern CGFloat keyboardHeightLandscape; 
```

## 暗示

```
CGFloat tableMarginSide = 20;
CGFloat tableMarginTop = 20;
CGFloat fromImageSize = 50;

CGFloat keyboardHeightPortrait  = 210;
CGFloat keyboardHeightLandscape  = 160;

@interface ...
- (id)init {
   self = [super init];
   if (self) {
     if (IS_IPAD)
       tableMarginSide = 80;
       tableMarginTop = 65;
       fromImageSize = 50;

       keyboardHeightPortrait = 260;
       keyboardHeightLandscape = 350;
     }
   }
} 
```

也就是说，这正是 nib 文件和故事板旨在处理的问题。

即使没有 nib 文件，我也会避免这种方法。这非常依赖于确保您`init`在访问这些全局变量之前调用（如果您不是很小心，这很容易不会发生）。更好的方法是为这些创建类或实例方法，而不是创建“伪常量”（它们并不是真正的常量，因为它们在运行时会发生变化）。

# iphone - ios如何检查特定索引中数组中的对象是否存在？

> ID：12697150
> 
> 赞同：5
> 
> 时间：2012-10-02T19:42:34.970
> 
> 标签：iphone, ios, ipad, nsmutablearray

我有 nsmutable 数组，我想在特定索引处添加对象，如何检查特定索引处的数组是否有对象？

我正在这样做：

```
if ([self.myArray objectAtIndex:index] !=nil) { 
```

但我大部分时间都遇到异常，因为“超出范围”

我会非常感谢你的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T19:48:20.003

最简单（可能不是最好的）将是

```
if ([self.myArray count] > index && [self.myArray objectAtIndex:index] !=nil) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T19:47:58.150

我的理解是你不能拥有数组的索引，除非你有并且反对那里。我建议将数组中的所有索引设置为`[NSNull null]`，然后在 if 语句中检查该索引处的对象是否是 NSNull 对象。`if([[self.myArray objectAtIndex:index] isKindOfClass:[NSNull class]])`然后如果返回true，让它用你的对象替换空对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T19:46:39.693

```
if( self.myArray != nil && [self.myArray count] >= (index - 1) ) { ... } 
```

# arrays - 使用 Mongoose，如何通过表单将键值对作为对象插入到数组中？

> ID：12697159
> 
> 赞同：0
> 
> 时间：2012-10-02T19:42:58.263
> 
> 标签：arrays, forms, node.js, express, mongoose

考虑以下简单模式：

```
var PostSchema = new Post({
  body : String,
  tags : []
} 
```

通过表单 POST（我正在开发的 REST HTTP API），我想将键/值对插入到`tags`数组中，以便生成的 mongodb 文档如下所示：

```
{
  "body" : "This is the post body",
  "tags" : [
              {"Color" : "Orange"},
              {"Color" : "Blue"},
              {"Person" : "Ted"},
              {"Person" : "Fred"},
              {"Person" : "Joe"},
              {"Stone" : "Diamond"}
           ]
} 
```

我的问题是，如何命名表单字段`tags`来完成此操作？我在想`tags[0][color]`每种颜色的东西，但这不起作用，它为标签数组中的每个键创建一个单独的数组，其中包含值列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:21:35.310

我现在有点傻。解决方案是（显然）提供`tags`类似的东西：

```
tags[0][color] = orange
tags[1][color] = blue
tags[2][person] = ted
tags[3][person] = fred
tags[4][person] = joe
tags[5][stone] = diamond 
```

我的大脑一直卡在将它们全部归为一组`tags[0]`——不知道为什么。

# javascript - 在 JS 中构建时间轴滑块

> ID：12697166
> 
> 赞同：1
> 
> 时间：2012-10-02T19:44:07.990
> 
> 标签：javascript, jquery

我正在构建时间线，但我的滑块遇到了一些问题。在示例中（更新： http: [//jsfiddle.net/WMnsc/3/](http://jsfiddle.net/WMnsc/3/)），每次我滑动绿色 div 时，div“支架”都会向绿色 div 的方向滑动。持有人 div 包含时间轴中每个 li 的 div，表示一年。

我正在使用乘法来计算“持有人” div 的速度，因此年份排列正确，这是有效的，但我需要的是当绿色 div 滑动超过十年时滑动速度减慢，然后恢复正常速度当它不是。

从星期天开始，我已经绞尽脑汁想了一千种方法，但我仍然不知道如何计算。

另外，如果您查看 jsfiddle 示例，您会发现我是根据拖动的方向递增/递减。告诉滑块的工作方式，但基于此的递增/递减总是关闭........

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T11:10:50.250

零，

他们并没有给你设置一个简单的任务，但幸运的是，这是我真正喜欢解决的问题。我花了一天中最好的时间，而且我工作得很快。

这是我的测试页面，包含 CSS、HTML 和 javascript——这三个都是你原来的修改版本：

```
<!DOCTYPE html>
<html>
<head>
<style>
#box {
    position: absolute;
    width: 400px;
    height: 400px;
    background-color: #e0e0c0;
    top: 100px;
    overflow: hidden;
}
#holder {
    position: absolute;
    width: auto;
    height: 400px;
}
.boxes {
    position: relative;
    width: 398px;
    height: 400px;
    border-right: 2px solid blue;
    float: left;
}
.year {
    position: relative;
    float: left;
    border-right: 1px solid blue;
    height: 13px;
    min-width: 8px;
}
.year:first-child {
    border-left: 1px solid blue;
}
#trackWrapper {
    position: relative;
    top: 10px;
    width: auto;
}
#trackWrapper .track {
    position: absolute;
    margin: 0;
    padding: 0;
    list-style-type: none;
    top: 21px;
    width: auto;
}
#trackWrapper .slider1, #trackWrapper .slider2 {
    position:absolute;
}
#trackWrapper .slider1 {
    background-color: green;
    width: 8px;
    height: 20px; 
    top: 0px;
    left: 0px;
}
#trackWrapper .slider2 {
    background-color: orange;
    width: 12px;
    height: 10px;
    top: 37px;
    left: 220px;
    /* 
    display: none; 
    */
}
#msg {
    position: absolute;
    left: 480px;
    top: 80px;
    height: 1.0em;
}
</style>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type='text/javascript'>
$(function() {
    function log(x){
        var logSwitch = false;
        if(logSwitch) { console.log(x); }
    }

    //Put numbers in the boxes for testing
    $(".boxes").each(function(i) {
        $(this).text(i);
    });

    function courseFineSlider($trackWrapper, $holder, sensitivityDivider) {
        var $slider1 = $trackWrapper.find(".slider1"),
            $slider2 = $trackWrapper.find(".slider2"),
            $track = $trackWrapper.find(".track"),
            $boxes = $(".boxes"),
            $year = $(".year");
        var $slider = null;
        var trackLength = $track.width();// - $year.width() / 2;
        var startX = null;
        var sliderOffSet = null;
        var _pos1 = 0;
        var ePos = 0;

        sensitivityDivider = (!sensitivityDivider) ? 10 : sensitivityDivider;

        $holder.width($boxes.outerWidth() * $boxes.length);
        var holderScale = $boxes.outerWidth() * ($boxes.length - 1);

        function hold(e) {
            log('hold');
            e.preventDefault();
            $slider = $(e.target);
            $(window).on('mousemove', $slider, move);
            startX = e.clientX;
            sliderOffSet = parseInt($slider.css('left'));
            _pos1 = getPos($slider1);
            e.returnValue = false;
        }
        function release(e) {
            if(!$slider) return;
            log('release');
            if($slider.get(0) === $slider2.get(0)) {//if it's the orange slider
                setPos($slider1, ePos);//adjust green according to any movement in orange
                setPos($slider2, 0.5, true);//recenter the orange slider
            }
            $slider = null;
            $(window).off('mousemove');
        }
        function move(e) {
            //console.log('move');
            e.preventDefault();
            var trueSliderX = e.pageX - $trackWrapper.get(0).offsetLeft;
            setPos($slider, applyLimits(0, trueSliderX / trackLength, 1));
            //$holder.css('left', shape(sliderPos()) + 'px'); // *** totally linear ***
            $holder.css('left', -holderScale * shape2(sliderPos()) + 'px'); // *** non-linear - slows down at the decade boundaries ***
        }

        // *** Equations ***
        function sliderPos() {
            var pos1 = getPos($slider1);//green position (0 to 1)
            var pos2 = getPos($slider2);//orange position (0 to 1)
            if($slider.get(0) === $slider1.get(0)) {//if it's the green slider
                ePos = applyLimits(0, (pos1 + (pos2 - 0.5) / sensitivityDivider), 1);
            }
            else {
                ePos = applyLimits(0, (_pos1 + (pos2 - 0.5) / sensitivityDivider), 1);
            }
            return ePos;//effective position of green, taking orange into account
        }

        var LINEAR = function(x1, y1) {//Namespace pattern to keep the $(function(){...}) closure uncluttered
            function Line(m, c) {//Constructor
                this.calc = function(x) {
                    return m * x + c;
                };
            }
            var m1 = y1/x1;
            var m2 = (1-y1)/(1-x1);
            var c1 = 0;
            var c2 = y1 - m2 * x1;
            return {
                x1: x1,
                y1: y1,
                line_1: new Line(m1, c1),
                line_2: new Line(m2, c2)
            };
        }(0.7, 0.90);// change these params as required. 
        /*
     * First param:  Determines the leading edge of the "sluggish zone". 0.7 is about right for the test data.
     * Second param: Determines the height of the two slopes at their intersection. ie. where steep changes to shallow. 
     * Try playing with the second param in the range 0.7 (completely linear) to 0.999999 (comatose). 
     * If the value of the 2nd param is set to something less than the first param, then the "zone" will be more sensitive rather than more sluggish.
         */

        // *** Shaping functions ***
        function shape(x) {
            return x;
        }
        function shape2(x) { //0...1
            var c = 4, //The number of cycles (decades)
                n = x * c,//0...4
                d = Math.floor(n),//"decade" //0, 1, 2, 3, 4
                r = n - d,//remainder //0
                y = (r < LINEAR.x1) ? LINEAR.line_1.calc(r) : LINEAR.line_2.calc(r),
                rtn = (y + d) / c;//unscaled return value
/*
            inspect([
                'x: ' + x.toFixed(2),
                '<br>n: ' + n.toFixed(5),
                '<br>d: ' + d,
                '<br>r: ' + r.toFixed(2),
                '<br>y: ' + y.toFixed(2),
                '<br>rtn: ' + rtn.toFixed(2)]);
*/
            return rtn;
        }

        // *** Utilitiy functions ***
        function applyLimits(min, x, max) {
            return Math.max(min, Math.min(max, x));
        }
        function getPos($sl) {
            return (parseInt($sl.css('left')) + $sl.width() / 2) / trackLength;
        }
        function setPos($sl, val, animate) {
            val = (val * trackLength) - ($sl.width() / 2);
            if(animate) { $sl.animate({left: val}, 'fast'); }
            else { $sl.css({left: val}); }
        }
        function inspect(arr){ //for debugging
            $("#msg").html(arr.join(', '));
        }

        setPos($slider1, 0);//center the green slider
        setPos($slider2, 0.5);//center the orange slider

        $slider1.on('mousedown', hold);
        $slider2.on('mousedown', hold);
        $(window).on('mouseup', release);
    }
    var x = new courseFineSlider($("#trackWrapper"), $('#holder'), 5);
});
</script>
</head>

<body>

<div id="msg"></div>
<div id="trackWrapper">
    <div class='slider1'></div>
    <div class='slider2'></div>
    <ul class='track'>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'>2000</li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'>2010</li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'>2020</li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'></li>
        <li class='year'>2030</li>
    </ul>
</div>

<div id='box'>
    <div id="holder">
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
        <div class="boxes"></div>
    </div>
</div>

</body>
</html> 
```

**[演示](http://jsfiddle.net/ZJe66/4/show/)**

你会看到我从你的设计简介和我的橙色辅助滑块中实现了“迟缓区域”，这与我最初的概念略有不同（算术和变量范围界定变得相当激烈）。要在没有橙色滑块的情况下运行`#slider2`，只需`display:none`在样式表中设置它的样式即可。不需要更改 javascript。有一天，当设计师意识到他们做了一个花哨的事情时，你可以揭开奥兰治先生的面纱。

我没有时间详细描述它是如何工作的，但是代码中有很多注释。

查看`LINEAR`脚本底部的命名空间下方，了解如何控制“迟缓区”的位置和灵敏度。

如果您需要我解释其他任何事情，请告诉我。

# java - javap说有main方法，java说我疯了

> ID：12697170
> 
> 赞同：0
> 
> 时间：2012-10-02T19:44:23.613
> 
> 标签：java

我有一些来自 .jar 文件的类文件。我正在寻找一个带有 Main 方法的类，这样我就可以看到这个程序在没有网络包袱的情况下是如何工作的。

```
>javap HaploGrepServer/HaploGrepMain
Compiled from "HaploGrepMain.java"
public class HaploGrepServer.HaploGrepMain extends java.lang.Object{
    public HaploGrepServer.HaploGrepMain();
    public static void main(java.lang.String[])       throws java.io.IOException;
} 
```

伟大的！我找到了

```
>java HaploGrepServer/HaploGrepMain
Exception in thread "main" java.lang.NoClassDefFoundError: org/restlet/Component
    at java.lang.ClassLoader.... 
```

好的，我可以添加

```
>java -cp org.restlet.jar HaploGrepServer/HaploGrepMain
Exception in thread "main" java.lang.NoClassDefFoundError: HaploGrepServer/HaploGrepMain
Caused by: java.lang.ClassNotFoundException: HaploGrepServer.HaploGrepMain
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: HaploGrepServer/HaploGrepMain. Program will exit. 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:46:39.517

当您在包中调用类时，请尝试使用点来分隔包组件，而不是斜线：

```
java -cp .:org.restlet.jar HaploGrepServer.HaploGrepMain 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:03:35.353

如果`HaploGrepServer`在当前目录中，则需要在类路径中包含当前目录`.`：

```
java -cp .:org.restlet.jar HaploGrepServer.HaploGrepMain 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T20:05:24.143

命令：

```
 java HaploGrepServer.HaploGrepMain 
```

使用“ ”的默认类路径`.`。当您提供类路径时：

```
 java -cp restlet.jar HaploGrepServer.HaploGrepMain 
```

类路径现在*只*包含 restlet jar。

因此，您需要包含两个位置的类路径：

```
 java -cp restlet.jar:. HaploGrepServer.HaploGrepMain 
```

注意：如果您在 Windows 平台上，请使用分号 to 而不是冒号。

# javascript - 我将如何在 Json 文件中编写此数据的结构？

> ID：12697171
> 
> 赞同：0
> 
> 时间：2012-10-02T19:44:27.297
> 
> 标签：javascript, html, json

我想包含一个保存数据的 Json 文件，以便我可以将其拉入我的 HTML 文件以用于创建动态选择选项表单。

例如，如果第一个选择选项询问您是男性还是女性，并将男性和女性列为选项，则动态创建的下一个选择选项将具有特定于您之前选择的选项，并且这些选项将被取消来自 Json 文件。

如果我说喜欢，我希望能够获得这些数据

```
 Var data= new object();
     Data['male']=['tall', 'short'];
     data['tall']=['rich', 'poor']; 
```

我认为这种结构类似于关联数组，但我不太确定。所以在上面的几行中，如果这个人选择男性，他们将获得高或矮的选项，如果你选择了所有，他们将获得富或穷的选择。

我认为Json会像

```
 {"data": {

  man:[];
   woman:[];
  }

  } 
```

如果您可以通过示例为我指出如何做到这一点的正确方向，我将非常感激，我自己没有太多编写 Json 的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:52:57.077

你在正确的轨道上，除非有几个问题：

```
{
  "data": {
    "male": [
      "tall",
      "short"
    ],
    "tall": [
      "rich",
      "poor"
    ]
  }
} 
```

请记住，JSON 应始终`""`对键和内容使用双引号 ( )。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:52:57.483

您还可以使用以下 JSON 语法在 Javascript 中声明对象：

```
var data = {
    'male': ['tall', 'short'],
    'tall': ['rich', 'poor']
}; 
```

`{}`基本上，您可以使用而不是声明一个 javascript 对象`new Object();`，您可以通过这种方式声明任意数量的属性`"name": value`。

可以通过 2 种方式访问​​对象中的属性：`data.male`或`data["male"]`.

# unit-testing - Visual Basic 6 和单元测试

> ID：12697175
> 
> 赞同：2
> 
> 时间：2012-10-02T19:44:57.527
> 
> 标签：unit-testing, vb6

> **可能重复：**
> [是否有任何适用于 VB6 的好的 TDD 工具或资源？](https://stackoverflow.com/questions/467789/are-there-any-good-tdd-tools-or-resources-for-vb6)

我的任务是为旧的 VB6 应用程序创建一些升级。有没有 VB6 可以轻松实现的单元测试解决方案？

老实说，自 1999 年以来我还没有看过任何 VB6！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T19:54:30.223

[SimplyVBUnit](http://simplyvbunit.sourceforge.net/)怎么样？

[使用 SimplyVBUnit](https://stackoverflow.com/questions/1556025/unit-testing-in-vb-6-with-simplyvbunit) MiniTutorial 在 VB 6 中进行单元测试：[VB6 是否有任何好的 TDD 工具或资源？](https://stackoverflow.com/questions/467789/are-there-any-good-tdd-tools-or-resources-for-vb6/468225#468225)

# mysql - MySQL 不报告索引唯一性？

> ID：12697177
> 
> 赞同：4
> 
> 时间：2012-10-02T19:45:04.200
> 
> 标签：mysql

我正在尝试使用 MySQL 命令`show indexes from table_name`来找出哪些索引是唯一的。但它错误地报告所有索引都是非唯一的：

```
mysql> desc books;
+------------------+--------------+------+-----+---------+-------+
| Field            | Type         | Null | Key | Default | Extra |
+------------------+--------------+------+-----+---------+-------+
| id               | int(11)      | NO   | PRI | NULL    |       |
| name             | varchar(255) | YES  |     | NULL    |       |
| author_id        | int(11)      | YES  |     | NULL    |       |
| coauthor_id      | int(11)      | YES  |     | NULL    |       |
| publisher_id     | int(11)      | YES  |     | NULL    |       |
| isbn             | varchar(255) | YES  |     | NULL    |       |
| publication_year | int(11)      | YES  |     | NULL    |       |
| shelf_id         | int(11)      | YES  |     | NULL    |       |
+------------------+--------------+------+-----+---------+-------+
8 rows in set (0.00 sec)

mysql> show indexes from books;
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| books |          0 | PRIMARY  |            1 | id          | A         |           0 |     NULL | NULL   |      | BTREE      |         |               |
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
1 row in set (0.00 sec)

mysql> create unique index books_isbn on books (isbn);
Query OK, 0 rows affected (0.23 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> show indexes from books;
+-------+------------+------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| Table | Non_unique | Key_name   | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |
+-------+------------+------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| books |          0 | PRIMARY    |            1 | id          | A         |           0 |     NULL | NULL   |      | BTREE      |         |               |
| books |          0 | books_isbn |            1 | isbn        | A         |           0 |     NULL | NULL   | YES  | BTREE      |         |               |
+-------+------------+------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
2 rows in set (0.00 sec)

mysql> insert into books (id, name, isbn) values (0, 'foo', 'bar');
Query OK, 1 row affected, 1 warning (0.04 sec)

mysql> insert into books (id, name, isbn) values (1, 'foo2', 'bar');
ERROR 1062 (23000): Duplicate entry 'bar' for key 'books_isbn'
mysql> 
```

为什么会`show indexes`在列中报告错误的内容`non_unique`，以及如何获得关于哪些索引是唯一的真实答案？

（这是 MySQL 5.5.24，表是 InnoDB。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T19:50:20.413

如果你查看 MySQL Manuals 它说：

```
 Non_unique

0 if the index cannot contain duplicates, 1 if it can. 
```

查看 MySQL[手册](http://dev.mysql.com/doc/refman/5.0/en/show-index.html)

# c# - 如何处理 StorageFile 操作的并发性？

> ID：12697178
> 
> 赞同：1
> 
> 时间：2012-10-02T19:45:07.117
> 
> 标签：c#, windows-8, microsoft-metro

我正在尝试写入文件，但“偶尔”我遇到了我认为归结为并发的问题，因为*有时*，我收到一条`System.UnauthorizedAccessException`消息：

> 访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）

...来自以下内容：

```
public async void SubmitChanges()
{
    DataContractSerializer serializer = 
        new DataContractSerializer(typeof(LocalCache<T>));

    StorageFile file = await ApplicationData.Current.LocalFolder
            .CreateFileAsync(GetFileNameForType(), 
                CreationCollisionOption.ReplaceExisting);

    //Occasionally throws here
    using (var fi = await file.OpenTransactedWriteAsync())
    {
        serializer.WriteObject(fi.Stream.AsStreamForWrite(), this);
        await fi.CommitAsync();
    }
} 
```

我只能假设这是由于某种并发性，或者它仍然可以在其他地方读取，但我似乎找不到等待它可用的方法 - 我通常会`lock`围绕它，但这是不允许，`await`那么其他选项是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T19:55:01.203

通常，您只是在前一个操作完成之前不开始下一个操作。

提示：避免`async void`；改为使用`async Task`。这使您能够知道上一个操作何时完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:08:44.380

这里可能会发生很多事情。正如斯蒂芬上面提到的，您的封装方法不会返回任务。这意味着调用**SubmitChanges**的任何方法都使用“即发即弃”模式调用它，并且该调用之后的代码可以并行运行。这可能*不是*你想要的。

此外，我注意到您正在使用**StorageFile.OpenTransacted**。[我以前没有使用过它，但注释表明 OpenTransacted 仅在支持ReplaceFile](http://msdn.microsoft.com/en-us/library/windows/apps/aa365512.aspx)的操作系统上受支持。此功能实际上允许新文件假定旧文件的身份，但我很确定如果旧文件打开，该操作将失败。

我认为在事务文件关闭之前不会尝试交换文件身份，这将发生在**Dispose**上，由于**using**语句而自动发生，这是您有时会看到异常的行。

我建议您改为返回 Task ，并且我还会考虑使用常规**StorageFile.OpenAsync**。

# java - 特殊字符和 Java 字符串

> ID：12697183
> 
> 赞同：0
> 
> 时间：2012-10-02T19:45:43.177
> 
> 标签：java, string, control-characters

我有应该包含的文本字符串（Java 字符串）`'gerald.o'leary'`。

实际上，除了其余的“c2”之外，它还包含一个控制字符。我已经包含了十六进制转储，请参阅`image1.png`十六进制转储。

![在此处输入图像描述](../Images/1c7d0edcfad749313f6ba70d42fca9c3.png)

当我将它保存到数据库并通过在客户端运行 SQL 并将其复制粘贴到十六进制编辑器中读取它时，我看到 c2 被 3f 替换，请参阅`image2.png`.

![在此处输入图像描述](../Images/6d07516821486b743d7b15b5939c81da.png)

我本可以接受它，但是当这两个字符串在 Java 中使用 String.equals() 进行比较时，返回 false。

有人可以解释一下这里发生了什么吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:54:36.280

我不知道你是如何得到十六进制转储的，但是 java 字符串是 unicode 字符串，所以字符和字节之间没有 1:1 的对应关系。我怀疑您的字符串包含无法用单个字节表示的 unicode 字符，并且您的字符处理（假设是这种情况）是错误的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T19:55:39.613

您是否检查过您的 SQL DB 是否可以存储 UTF-8/Unicode 字符（即不是 ISO-8859-1、ASCII 或类似字符）？

*   首先将 String 输出到标准输出，看看它是否真的包含正确的字符（? 在输出中很好，但 ?? 或 0xC2 0x92 = Â´ 不是）。
*   然后检查您的数据库字符集。见其手册。

# ruby-on-rails - 对 Rails 使用多个回调 (:after_commit)？

> ID：12697186
> 
> 赞同：12
> 
> 时间：2012-10-02T19:46:09.323
> 
> 标签：ruby-on-rails, callback

如果我在 Rails 中有多个相同性质的回调，会有冲突吗？像同一个模型的几个 after_commit ？

我想我可以将它们加入一种方法，但出于可读性原因，我宁愿不......

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-02T19:52:40.210

不，他们会一个接一个地被处决

```
after_commit :callback_one, :callback_two 
```

# c# - Listview 到剪贴板和 ContextMenu

> ID：12697188
> 
> 赞同：0
> 
> 时间：2012-10-02T19:46:17.030
> 
> 标签：c#, wpf, listview, contextmenu, clipboard

我对 WPF 中的列表视图有两个问题： 1：如何将整个项目从列表视图复制到剪贴板？这是我的代码，它只复制带有绑定标题的一行（每一列都绑定到一个列表）

```
ListView1.SelectAll();
System.Windows.Clipboard.SetText(ListView1.SelectedItems.ToString()); 
```

2：我的列表视图上有一个上下文菜单，我想获取所选行的行号。我不知道该怎么做。我搜索了谷歌，但找不到任何有效的解决方案:(感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:49:02.753

1) 迭代每个项目，调用 ToString() 并在 StringBuilder 中累积。然后 SetText 到剪贴板。

2）您应该能够利用[SelectedIndex](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedindex.aspx)。

# typescript - TypeScript 与 Windows 8 应用商店应用程序的集成

> ID：12697189
> 
> 赞同：2
> 
> 时间：2012-10-02T19:46:22.643
> 
> 标签：typescript, windows-store-apps

如何在基于 JavaScript 的 Windows 8 应用商店应用中使用 TypeScript？我没有看到任何明显的方法来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T19:52:19.513

打字稿网站上的百科全书示例回答了您的许多问题。

> [http://www.typescriptlang.org/Samples/#Encyclopedia](http://www.typescriptlang.org/Samples/#Encyclopedia)

由于 TypeScript 生成 JavaScript，Windows 8 和 Windows 应用商店将它们视为普通的基于 JavaScript 的 Windows 应用商店应用程序。引用的示例包含对项目文件的修改以自动`.ts`构建`.js`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T19:53:47.967

尽管 Encyclopedia 示例是如何使用 TypeScript 的表示，但没有内置功能可以这样做。请参阅以下链接以查看完整的演练。

[http://blog.tattoocoder.com/2012/10/typescript-for-windows-8-store-apps.html](http://blog.tattoocoder.com/2012/10/typescript-for-windows-8-store-apps.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T19:50:07.577

查看 TypeScript 示例源代码，他们以完整的 Win 8 应用程序为例： [http ://typescript.codeplex.com/SourceControl/changeset/view/d397c54a55db](http://typescript.codeplex.com/SourceControl/changeset/view/d397c54a55db)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-29T17:45:49.830

我最近构建了一个项目模板，以便在使用 TypeScript 构建商店应用程序时更快地开始。

[http://timmykokke.com/2014/01/store-app-typescript-project-template/](http://timmykokke.com/2014/01/store-app-typescript-project-template/)

* * *

***更新：*** 我已将模板添加到[http://sidewaffle.com/](http://sidewaffle.com/)，这使它们更易于使用。

# android - 如何签署亚马逊 apk？

> ID：12697191
> 
> 赞同：0
> 
> 时间：2012-10-02T19:46:25.720
> 
> 标签：android, amazon, apk, sign, jarsigner

我正在尝试签署一个亚马逊包装的 apk，以便我可以将我的应用加载到亚马逊应用商店。我必须这样做，因为我的应用程序使用 Google APIs。在解释如何使用 jarsigner 时，所有这方面的教程都很复杂。如何从 Eclipse 访问 jarsigner？我可以像 Android Tools..Export Signed Application 一样轻松访问它吗？

编辑

使用[本](http://dimitar.me/how-to-sign-an-unsigned-android-package-apk-file/)教程，我可以通过命令行访问 jarsigner，但是当我为我的密钥库输入密码时，它说“jarsigner：找不到证书链：和。并且必须引用包含私钥和相应公钥的有效 KeyStore 密钥条目密钥证书链。” 我不知道如何从这里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:59:01.500

是的，亚马逊没有自己的 APK 格式 - 它使用 Android 的默认 APK 格式。在 Eclipse 中，转到 ProjectName -> Android Tools -> Export Signed Application Package。

您必须创建一个密钥库来签署应用程序。请记住将密钥库凭据保存在安全的地方，很容易忘记！

# c# - 名称“'IMGUserLabel' 在当前上下文中不存在”

> ID：12697199
> 
> 赞同：0
> 
> 时间：2012-10-02T19:46:43.660
> 
> 标签：c#, asp.net, data-binding, webforms

这是 IMGUserlabel 在 .Apsx 中的位置：

![在此处输入图像描述](../Images/169d9bc7bf0b227608702000b7b8ef4a.png)

这是 Aspx.Cs ：

```
public void GetUserDetails(int id)
{   
    string getUserDetail = "Select ID,Email,Name,Country,Convert(varchar (20), RegisterDate, 106) RegisterDate,Convert(varchar (20), LastLogin, 106) LastLogin ,Description,ImageName FROM [User] where Id='" + id + "'";

    dt = dbClass.ConnectDataBaseReturnDT(getUserDetail);
    if (dt.Rows.Count > 0)
    {
        IMGUserLabel.Text = dt.Rows[0]["Name"].ToString();
        NameLabel.Text = dt.Rows[0]["Name"].ToString();
        UserImage.ImageUrl = "~/UserImage/" + dt.Rows[0]["ImageName"].ToString();
        lblCreated.Text = dt.Rows[0]["RegisterDate"].ToString();
        LabelLastLogin.Text = dt.Rows[0]["LastLogin"].ToString();
        lblCreated.Text = dt.Rows[0]["RegisterDate"].ToString();
        LabelAboutMe.Text = dt.Rows[0]["Description"].ToString();
    }
} 
```

并显示错误：名称“'IMGUserLabel' 在当前上下文中不存在”但是其他标签正确显示数据

好的，我已经添加了这个，并且没有错误:) 但是标签上没有显示任何数据，它只是说“标签”：

```
void Item_Bound(Object sender, DataListItemEventArgs e)
{
    string getUserDetail = "Select ID,Email,Name,Country,Convert(varchar (20), RegisterDate, 106) RegisterDate,Convert(varchar (20), LastLogin, 106) LastLogin ,Description,ImageName FROM [User] where Id='" + e + "'";
    {
        // Retrieve the Label control in the current DataListItem.
        Label IMGUserLabel = (Label)e.Item.FindControl("IMGUserLabel");
        IMGUserLabel.Text = dt.Rows[0]["Name"].ToString();
    }
} 
```

这是 Result ，标签应该显示该图像的用户 ![在此处输入图像描述](../Images/85ab829816822d0fc7893b203cc36030.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:07:38.700

lblCreated 和 NameLabel 正在工作，因为它们是在 DataList 之外定义的。要从您的方法中访问 IMGUserLabel，您需要先在 DataList 中找到它。

```
Label IMGUserLabel = (Label)e.FindControl( "IMGUserLabel");
IMGUserLabel.Text = dt.Rows[0]["Name"].ToString(); 
```

'e' 是 DataBound 事件处理程序中的 DataListItemEventArgs 实例。您需要修改 GetUserDetails 方法以接收 DataListItemEventArgs 实例或直接传入 Label 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T04:06:12.713

我找到了答案，一直都是：

```
 IMGUserLabel.Text = dt.Rows[0]["Name".]ToString(); 
```

感谢所有试图提供帮助的人。

# java - 在不使用 HashSet 的情况下删除 ArrayList 中的重复元素

> ID：12697202
> 
> 赞同：6
> 
> 时间：2012-10-02T19:46:50.087
> 
> 标签：java, algorithm, arraylist

我的逻辑混乱了。我只是想找出一种在不使用 HashSet 的情况下删除 ArrayList 中的重复项的方法。

```
public static void main(String[] args) {
    ArrayList<String> wordDulicate = new ArrayList<String>();
    wordDulicate.add("Tom");
    wordDulicate.add("Jones");
    wordDulicate.add("Sam");
    wordDulicate.add("Jamie");
    wordDulicate.add("Robie");
    wordDulicate.add("Helen");
    wordDulicate.add("Tom");
    wordDulicate.add("Troy");
    wordDulicate.add("Mika");
    wordDulicate.add("Tom");

    for (String dupWord : wordDulicate) {
        if (wordDulicate.equals(dupWord))
            System.out.println(wordDulicate.get(dupWord));
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T19:49:38.227

您可以创建另一个列表，并向其中添加项目，跳过重复项：-

```
ArrayList<String> wordDulicate = new ArrayList<String>();
ArrayList<String> tempList= new ArrayList<String>();

wordDulicate.add("Tom");
wordDulicate.add("Jones");
wordDulicate.add("Sam");

for (String dupWord : wordDulicate) {
    if (!tempList.contains(dupWord)) {
        tempList.add(dupWord);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T19:49:02.397

您应该对列表进行排序并删除与前一个相同的元素。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-02T19:50:03.097

这种方法需要有另一个列表：

```
 ArrayList<String> wordDulicate = new ArrayList<String>();

        wordDulicate.add("Tom");
        wordDulicate.add("Jones");
        wordDulicate.add("Sam");
        wordDulicate.add("Jamie");
        wordDulicate.add("Robie");
        wordDulicate.add("Helen");
        wordDulicate.add("Tom");
        wordDulicate.add("Troy");
        wordDulicate.add("Mika");
        wordDulicate.add("Tom");

        ArrayList<String> nonDupList = new ArrayList<String>();

        Iterator<String> dupIter = wordDulicate.iterator();
        while(dupIter.hasNext())
        {
        String dupWord = dupIter.next();
        if(nonDupList.contains(dupWord))
        {
            dupIter.remove();
        }else
        {
            nonDupList.add(dupWord);
        }
        }
      System.out.println(nonDupList); 
```

输出：

```
[Tom, Jones, Sam, Jamie, Robie, Helen, Troy, Mika] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-05T04:28:51.490

派对似乎有点晚了，但只有一个数组列表，

这是没有哈希集的代码......

```
strings = new ArrayList<>();
    strings.add("a1");
    strings.add("a2");
    strings.add("ss");
    strings.add("asd");
    strings.add("asd");
    strings.add("a1");
    strings.add("ss");
    strings.add("ss");
    System.out.println(Collections.frequency(strings, "ss"));
    for(int i = 0; i< strings.size();i++){
        int frequency = Collections.frequency(strings, strings.get(i));
        if(frequency>1){
            String string = strings.get(i);
            for(int j = 1 ; j < frequency ; j++)
                strings.remove(string);
        }
    }
    System.out.println(Collections.frequency(strings, "ss"));
    System.out.println(strings); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-27T09:17:54.940

```
import java.util.ArrayList;
import java.util.LinkedList;
import java.util.List;

public class ArrayListDuplicateRemove {

    public static void main(String[] args) {

       List<String> lst = new LinkedList<String>();
        lst.add("ABC");
        lst.add("ABC");
        lst.add("ABCD");
        lst.add("ABCD");
        lst.add("ABCE");

        System.out.println("Duplicates List "+lst);

        Object[] st = lst.toArray();
          for (Object s : st) {
            if (lst.indexOf(s) != lst.lastIndexOf(s)) {
                lst.remove(lst.lastIndexOf(s));
             }
          }

        System.out.println("Distinct List "+lst);

    }

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-15T08:47:35.697

```
package arraylist;

import java.util.ArrayList;
import java.util.Iterator;

class Student{
    String name;
    String dob;
    public Student(String name, String dob) {
        super();
        this.name = name;
        this.dob = dob;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getDob() {
        return dob;
    }
    public void setDob(String dob) {
        this.dob = dob;
    }

    public String toString() {
        return name+"\t"+dob;
    }
}

public class RemoveDuplicate {

    public static void main(String[] args) {

        ArrayList<Student> list=new ArrayList<Student>();
        list.add(new Student("prakash", "89"));
        list.add(new Student("prakash", "89"));
        list.add(new Student("saurabh", "79"));
        list.add(new Student("saurabh", "79"));

        Iterator<Student> it=list.iterator();
        while(it.hasNext()){
            System.out.println(it.next());
        }

        int size=list.size();
        for(int i=0;i<size-1;i++){
            for(int j=i+1;j<size-1;j++){
                if(list.get(i).getName().equals(list.get(j).getName())){
                    list.remove(j);
                }
            }
        }
            System.out.println(list);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-02T19:51:59.230

```
 ArrayList l1 = new ArrayList();
ArrayList l2 = new ArrayList();

Iterator iterator = l1.iterator();

    while (iterator.hasNext())
    {
        YourClass o = (YourClass) iterador.next();
        if(!l2.contains(o)) l2.add(o);
    } 
```

l1 是原始列表，l2 是没有重复项的列表（确保 YourClass 具有根据您要代表相等的内容的 equals 方法）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-09T16:42:01.160

```
ArrayList<Integer> al = new ArrayList<Integer>();

Scanner sc = new Scanner(System.in);
for(int i=0;true;i++){
    System.out.println("Enter your Element:");
     String s1= sc.nextLine();
     if(s1.equals("Exit")){
         break;
     }
     int x1= Integer.parseInt(s1);
     al.add(x1);

     for(int j=0;j<al.size();j++){
         for(int k=j+1;k<al.size();k++){

             int temp;
             if(al.get(j).intValue()>al.get(k).intValue()){
                 temp =al.get(j).intValue();
                 al.set(j, al.get(k).intValue());
                 al.set(k, temp);

             }//if
         }//for
     }//for
}//for
System.out.println(al); 
```

# javascript - 不允许在文本输入中键入或粘贴空格并保持文本和插入符号位置相同

> ID：12697203
> 
> 赞同：3
> 
> 时间：2012-10-02T19:47:02.087
> 
> 标签：javascript, validation, input

我有一个不想输入空格的文本输入。如果有人键入空格或粘贴带有空格的文本，我想将文本更改回输入空格之前的状态，并保留插入符号的位置相同的。也许有一种更简单的方法可以做到这一点，但我无法弄清楚。

这是我到目前为止所拥有的：

```
<html><head><title>Test</title></head><body>

<input type=text id="inputText" value="testValue" onInput=doIt(this);>

</body></html>​ 
```

以及将包含的 javascript（我使用了 jsFiddle）：

```
var editedValue = "testValue";

// alert(editedValue);

function doIt(that)
{

var caretPos = that.selectionStart;

if (that.value.indexOf(" ") != -1)
{
that.value = editedValue;
// alert(caretPos);
that.selectionStart = caretPos;
}
else
{
editedValue = that.value;
}

}​ 
```

似乎一切正常，除了如果插入符号位于文本中间，并且您键入或粘贴空格，插入符号不会返回到原始位置。

谁能帮我解决这个问题？或者向我展示一种全新/更简单/更简单的方法来不允许在文本输入中输入或粘贴空格？

如果有帮助，这是我尝试使用的 jsfiddle：http: [//jsfiddle.net/djSnL/4/](http://jsfiddle.net/djSnL/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:57:30.523

[http://jsfiddle.net/djSnL/5/](http://jsfiddle.net/djSnL/5/)

您要捕获`onkeydown`事件：

```
function doIt(e)
{
    var e = e || event;

    if (e.keyCode == 32) return false; // 32 is the keycode for the spacebar

}

window.onload = function(){
    var inp = document.getElementById("inputText");

    inp.onkeydown = doIt;
}; 
```

请注意，他们仍然可以将空格粘贴到输入中，因此您也必须处理它。

要处理粘贴，它很简单：http: [//jsfiddle.net/djSnL/7/](http://jsfiddle.net/djSnL/7/)

```
function pasteIt(e)
{
    var e = e || event;

    this.value = this.value.replace(/\s/g,'');

} 
```

两者都有，您将获得所需的效果。

我不是 100% 确定，但我相信只有 webkit 浏览器会在粘贴之前让您知道数据是什么：http: [//jsfiddle.net/djSnL/8/](http://jsfiddle.net/djSnL/8/)

```
function pasteIt(e)
{
    var e = e || event;
    var data = e.clipboardData.getData("text/plain");

    if (data.match(/\s/g)) return false;    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:53:35.973

好的，我想我明白了，使用 jQuery。感谢所有的帮助！

// 绑定事件

```
function bindEvents()
{
$(inputText).bind('keydown paste', checkForSpaces);
} 
```

// 检查空格

```
function checkForSpaces()
{
if (event.type == "keydown" && event.which == 32) {return false;}
if (event.type == "paste" && event.clipboardData.getData('text/plain').indexOf(" ") != -1) {return false;}
} 
```

# macos - HDFS 和 Hadoop 1.0.3 中的疑点

> ID：12697204
> 
> 赞同：0
> 
> 时间：2012-10-02T19:47:23.903
> 
> 标签：macos, hadoop, hdfs

我对 Hadoop 相当陌生，我一直在尝试设置我的本地机器并运行一些示例来了解该过程是如何工作的。我已经在我的 MAC 上设置了 hadoop 1.0.3。我有一系列问题，我会在描述我到目前为止所做的事情时问他们。我按照[这里](http://blogs.msdn.com/b/brandonwerner/archive/2011/11/13/how-to-set-up-hadoop-on-os-x-lion-10-7.aspx)的说明进行操作。

我虽然设置了独立操作，但最终使用了伪分发。**Q1.) 有什么区别？**

编辑了我的 .bash_profile

```
export HADOOP_HOME=/Library/hadoop-1.0.3
export JAVA_HOME=$(/usr/libexec/java_home) 
```

在 OS X 上创建到 localhost 的无密码 ssh。然后`$ ssh localhost`。

然后`$ $HADOOP_HOME/bin/hadoop namenode -format`。**Q2.) 每次我开始一项新工作时我应该格式化 namenode 吗？什么被格式化了？**

然后`$HADOOP_HOME/bin/start-all.sh`。

我想运行 wordcount 示例。所以我不得不把输入放在 HDFS 中。为此我做到了`hadoop fs -mkdir WordCount_input`。

Q3.)**[这里](http://hadoop.apache.org/docs/r1.0.3/file_system_shell.html#ls)****的文档要求我使用它，但这给了我 hdfs: command not found 错误？`bin/hdfs dfs``$HADOOP_HOME/bin/hdfs dfs -mkdir WordCount_input`**

我使用**put**将文件放在 HDFS 中。

```
hadoop dfs -put
/Users/yv/Documents/Hadoop-Workspace/file01
/Users/yv/Documents/Hadoop-Workspace/file02
/user/yv/WordCount_input 
```

**Q4）使用 copyFromLocal 而不是 put 更好吗？**

**Q5.) 我创建的这些文件位于 /user/yv/ 中。/user/yv/ 到底在哪里？它们是否在我在 core-site.xml 中指定的 hadoop.tmp.dir 位置内**

然后我运行了这个例子

> hadoop jar Documents/Hadoop-Workspace/wordcount.jar org.myorg.WordCount /user/yv/WordCount_input/ output

因此，如果我必须再次运行相同的示例，我必须删除输出文件并创建一个新文件。

运行几个示例后，数据节点没有足够的空间？在集群摘要下 NameNode 的 Web 界面中，所有内容都变为 0（例如：DFS Remaining：0GB，Live Node：0）。不知道为什么。

所以我做到了`$HADOOP_HOME/bin/stop-all.sh`。并重新格式化了namenode。因此namenode和datanode的namespaceID变得不同。这是个问题。

所以我不得不删除我的 hadoop.tmp.dir 并从头开始做所有事情

**Q.6）如果数据节点没有足够的空间，有人可以提供一个简单的解决方案吗？如何释放空间？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:33:06.343

1.  我相信独立模式在一个进程中运行整个作业，而伪分布式只是将作业跟踪器和任务节点拆分为单独的进程，就像它们在真实集群中一样。伪分布式可能是发展的方式。

2.  您不应多次运行 format 。它初始化名称节点的元数据。

3.  我不确定它为什么这么说。`hadoop fs -mkdir WordCount_input`是你应该使用的。

4.  他们是一样的。

5.  数据存储在 中的`dfs.data.dir`属性指定的位置`hdfs-site.xml`。但是，它可能无法直接理解，因为 HDFS 使用非用户友好的目录和命名结构。如果你想检查内容，你应该使用`hadoop fs`命令。

6.  这完全取决于硬件。没有什么复杂的事情发生 - 如果您的文件比磁盘上的空间多，那么除了购买更大的驱动器或删除文件之外，您无能为力。对于本地开发/测试，您也可以设置`dfs.replication`为 1，但这对于生产系统来说是一个非常糟糕的主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T23:41:23.977

Q1）请参阅此页面：[http](http://hadoop.apache.org/docs/r1.0.3/single_node_setup.html) ://hadoop.apache.org/docs/r1.0.3/single_node_setup.html ，但通常 Standalone 会将所有文件存储在本地文件系统（无 HDFS）上，并且当您运行 MapReduce 作业时，您将在单个 JVM 中运行该作业。您可以在独立模式下执行的操作有一些限制（例如，仅限于单个 reducer，并且没有分布式缓存）。

伪分布式模式意味着您正在运行一个真实的 Hadoop 实例（NameNode、DataNode、Job Tracker、Task Tracker），但它们都在 localhost 上运行。您可以访问 hadoop 的更多特性/功能（多个减速器、分布式缓存、HDFS 等），但缺少一些只有适当的分布式集群才能提供的东西（数据复制/冗余、任务故障转移）

Q2) 如果您想删除 HDFS（分布式文件系统）中的所有内容，您应该只重新格式化名称节点。您不需要在作业之间对其进行格式化

Q3）这在文档中似乎是错误的（可能是与 Hadoop 2 相关的文档）。bin 文件夹中没有 hdfs 脚本（根据您看到的错误消息）。

要创建一个目录，您应该使用`bin/hadoop fs -mkdir WordCount_input`

Q4）这两个命令是同义词（`hadoop fs -help copyFromLocal`实际上在它显示的帮助中注意到了这一点）

Q5）它们存储在HDFS中，你不能直接在本地文件系统上找到文件，但是它们存储在 hdfs-site.xml 属性中配置的位置`dfs.data.dir`，但是文件存储为块，并且namenode维护了一个映射在文件名和块名之间。

Q6) 您配置的分区上有多少可用空间`dfs.data.dir`？如果磁盘上没有剩余空间，那么您就没有太多可以做的其他释放空间或移动到新分区了。

# twitter-bootstrap - 引导轮播延迟加载

> ID：12697216
> 
> 赞同：16
> 
> 时间：2012-10-02T19:48:17.137
> 
> 标签：twitter-bootstrap, twitter-bootstrap-2

我正在尝试让引导轮播延迟加载。看起来这应该是直截了当的，但我什至没有在这里遇到任何错误来进行故障排除。JS：

```
<script type="text/javascript">
    $('#bigCarousel').on("slid", function() {
        // load the next image after the current one slid
        var $nextImage = $('.active.item', this).next('.item').find('img');
        $nextImage.attr('src', $nextImage.data('lazy-load-src'));
    });

</script> 
```

然后是html：

```
<div id="bigCarousel" class="carousel slide">
  <div class="carousel-inner">
    <div class="active item">
        <img src="assets/bigimage1.jpg" class="img-big">
    </div>
    <div class="item">
        <img data-lazy-load-src="assets/menu-header2.jpg" class="img-big">
    </div>
 </div>
</div> 
```

firebug 中没有 JS 错误或我能弄清楚的任何其他错误，但我的图像没有加载。可能这里有些愚蠢的简单...

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-01-26T13:53:39.450

最简单的解决方案是：

```
<div id="carousel" class="carousel slide lazy-load" data-ride="carousel" data-interval="false">
<div class="carousel-inner">
  <div class="item active"><img src="image1.jpg"></div>
  <div class="item"><img data-src="image2.jpg"></div>
  <div class="item"><img data-src="image3.jpg"></div>
</div>
<!-- controls -->
<ol class="carousel-indicators">
    <li data-target="#carousel" data-slide-to="0" class="active"></li>
    <li data-target="#carousel" data-slide-to="1"></li>
    <li data-target="#carousel" data-slide-to="2"></li>
  </ol>
</div>

<script>
$(function() {
    $('.carousel.lazy-load').bind('slide.bs.carousel', function (e) {
        var image = $(e.relatedTarget).find('img[data-src]');
        image.attr('src', image.data('src'));
        image.removeAttr('data-src');
    });
});
</script> 
```

而已！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-18T04:41:10.317

我认为问题出在你的 nextImage 变量中的 $ 。除非您尝试提前预加载 1 张幻灯片，否则我也会切换到“幻灯片”事件而不是“幻灯片”事件。此外，您可能应该考虑向前和向后滚动。这包括检查从第一张照片到最后一张照片的循环，反之亦然。

```
$('#myCarousel').on("slide", function(e) {

        //SCROLLING LEFT
        var prevItem = $('.active.item', this).prev('.item');

        //Account for looping to LAST image
        if(!prevItem.length){
            prevItem = $('.active.item', this).siblings(":last");
        }

        //Get image selector
        prevImage = prevItem.find('img');

        //Remove class to not load again - probably unnecessary
        if(prevImage.hasClass('lazy-load')){
            prevImage.removeClass('lazy-load');
            prevImage.attr('src', prevImage.data('lazy-load-src'));
        }

        //SCROLLING RIGHT
        var nextItem = $('.active.item', this).next('.item');

        //Account for looping to FIRST image
        if(!nextItem.length){
            nextItem = $('.active.item', this).siblings(":first");
        }

        //Get image selector
        nextImage = nextItem.find('img');

        //Remove class to not load again - probably unnecessary
        if(nextImage.hasClass('lazy-load')){
            nextImage.removeClass('lazy-load');
            nextImage.attr('src', nextImage.data('lazy-load-src'));
        }

    }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-17T06:03:21.043

我有一个解决方案，你只需要在临时图像属性中设置 img-url/path，见下面的代码 img 有属性**url**

```
<div class="item">
 <img url="./image/1.jpg" src="">
  <div class="carousel-caption">
   <h4>title</h4>
   <p>content</p>
  </div>
</div> 
```

当事件**滑动**时，设置值：**src = url**

```
$('document').ready(function() {     
        $('#myCarousel').on('slid', function (e) {
            var url = $('.item.active').find("img").attr('url'); 
            $('.item.active').find("img").attr("src", url); //set value : src = url
        });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T22:25:36.403

```
$('#myCarousel').on('slid', function() {
    var $nextImage = $('.active.item', this).next('.item').find('img');
    $nextImage.attr('src', $nextImage.data('data-lazy-load-src'));
}); 
```

您正在加载，`$nextImage.data('lazy-load-src')`但它应该`$nextImage.data('data-lazy-load-src')`根据脚本。

# android - 将 iText 创建的 PDF 作为 MODE_WORLD_READABLE 保存到内存

> ID：12697220
> 
> 赞同：1
> 
> 时间：2012-10-02T19:48:36.580
> 
> 标签：android, itext

该文件生成良好。如果设备没有外部存储，或者外部存储设置为只读，我决定添加一些逻辑来处理；在这种情况下，我会尝试将文件保存到我的应用程序文件系统中的特定目录中。这也很好用。问题是在尝试让第三方应用程序显示文件时。我知道我应该将文件保存为 Mode_World_Readable，但只是无法从我找到的示例中使其正常工作。

这是我的代码的摘录：

```
//Build a filename from the data provided
String reportTitle = args.getFromDate() + "_" + args.getToDate() + ".pdf";

: : : :
: : : :

} else {
   //Something else is wrong. 
   //Maybe there isn't a SD Card
   //It may be one of many other states, but all we need
   //to know is we can neither read nor write to external storage
   mExternalStorageAvailable = mExternalStorageWriteable = false;
   try {

      //Get the absolute path to the filesystem directory 
      //where the internal files are saved. 
      File painReportFolder = ctx.getFilesDir();
      //The string of the sub directory we want to access
      String filename = "Reports/PainReports/";
      //Create a new 'file' to build the directory
      File file = new File(painReportFolder, filename);
      //Make the directory if it doesn't exist
      file.mkdirs();

      //Build a FileOutputStream with the filename appended
      theFile = new FileOutputStream(file + java.io.File.separator + reportTitle);

      //This is what the examples suggest,
      //But it doesn't work.
      //In this configuration, at least
      //FileOutputStream fos = openFileOutput(filename, Context.MODE_WORLD_READABLE);

: : : :
: : : :

// creation of the different writers
PdfWriter writer;
if(mExternalStorageAvailable == false &&  mExternalStorageWriteable == false){
   //if no sd card, or sd card is read-only,
   //write to specific directory in internal
   writer = PdfWriter.getInstance(document, theFile );
}else{
   //otherwise, write to a dir on the sd card
   writer = PdfWriter.getInstance(document, new FileOutputStream(currentDirectory + java.io.File.separator + reportTitle));
} 
```

所以 PdfWriter.getInstance() 将接受 FileOutputStream，但它不会接受由 openFileOutput 创建的 FileOutputStream，我无法将 MODE_WORLD_READABLE 添加到“theFile”

过去一周我一直在研究这个，并尝试了不同的代码变体。我在 Stackoverflow 或其他任何地方都找不到直接回答我的查询的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T23:27:39.290

不知道为什么这被否决了，或者是谁（可能是一些巨魔，因为没有留下评论），但进一步的研究向我表明没有解决方案。

为什么？

拿出你的sd卡，试着拍照；它说它需要一张卡 - 它不会保存到内部；这是一个捆绑的应用程序。

所以我回滚了我所有的 sd 检查代码：

如果有sd；节省

如果有sd，但是是只读的；显示错误页面

如果没有sd；显示错误页面

# sql-server - 来自asp.net中两个数据库的SQL Server查询

> ID：12697224
> 
> 赞同：0
> 
> 时间：2012-10-02T19:48:53.413
> 
> 标签：sql-server

我有一个在多个服务器上使用多个数据库的 asp.net 应用程序。现在我需要连接来自不同服务器上两个数据库的两个表。

我使用两个连接字符串，我应该写什么？

```
query = select studentcode,mobile 
        from learning.dbo.students 
        where stcode in (select stcode from hs.dbo.currentetrm)

Dim ds As New DataSet()
ad.Fill(ds)

GridView1.DataSource = ds
GridView1.DataBind() 
```

一台服务器上的一个数据库在哪里`learning`有自己的登录名，`hs`另一个数据库在哪里有另一个登录名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:55:41.550

您不能从 ASP.NET 中执行此操作，而不是使用两个连接字符串。

实现此目的的一种方法是将这些数据库设置为[链接服务器](http://msdn.microsoft.com/en-us/library/ms189580.aspx)- 这将允许您使用一次登录在其中一台服务器上运行查询，并通过链接服务器执行连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:17:48.367

您不能使用没有链接服务器的单个查询来执行此操作，但您可以单独查询它们，然后根据 .NET 代码中第二个表的值过滤您的第一个表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T19:54:35.750

编辑：简而言之，你可以但他们必须被链接：见奥德的回答。

~~简而言之，你不能。~~

SQL 查询由单个 SQL 服务器处理和执行。这意味着单个查询不能连接两个不同服务器上的两个表。

根据具体情况，最好将表从一台服务器导入到另一台服务器，然后在该服务器上执行查询。因此，问题是“为什么您在两台不同的服务器上有相关数据？”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T22:15:06.350

您有 2 个选项：

1.  使用链接服务器，以便您可以使用单个连接字符串完成所有操作。
2.  使用 2 个连接并将数据带到应用程序端 (C#)。现在您将两个数据集放在同一个位置，您可以应用所需的逻辑。

# asp.net-mvc-4 - ASP.NET MVC 4 中的缩小和构建配置

> ID：12697229
> 
> 赞同：1
> 
> 时间：2012-10-02T19:49:22.133
> 
> 标签：asp.net-mvc-4, minify

我有一个 ASP.NET MVC 4 应用程序。我正在尝试利用内置的缩小功能。目前，我的 web.config 文件中有以下内容：

```
<system.web>
  <compilation debug="false" targetFramework="4.5" />
  ...
</system.web> 
```

当我执行此操作时，我注意到我的 HEAD 部分中的以下内容：

```
<link href="/Content/css?v=WMr-pvK-ldSbNXHT-cT0d9QF2pqi7sqz_4MtKl04wlw1" rel="stylesheet"/>
<script src="/bundles/modernizr?v=jmdBhqkI3eMaPZJduAyIYBj7MpXrGd2ZqmHAOSNeYcg1"></script> 
```

据我所知，这是捆绑正在发挥作用的信号。但是，它看起来不像缩小工作。我期待我的所有 HTML 都被压缩。但是，当我查看源代码时，它的格式看起来很整齐。当我查看 JavaScript 时，这些文件看起来被缩小了。但是，我希望 HTML 中的空格也会被删除。有什么我不明白的吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:56:16.103

捆绑和缩小仅适用于脚本和样式。用于`IIS dynamic compression`您的页面。

*   [启用动态内容的 HTTP 压缩 (IIS 7)](http://technet.microsoft.com/en-us/library/cc753681%28v=ws.10%29.aspx)

或者

*   [IIS 7 中的动态压缩](http://www.codeproject.com/Tips/106947/Dynamic-Compression-in-IIS-7)

但它只会压缩数据（没有缩小）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:52:17.687

只有您的 JS 和 CSS 会被缩小和捆绑。您的 HTML 将保持不变。缩小 HTML 不太有用，因为 HTML 文件通常比 JS 库小得多*。*

# asynchronous - 在 HTML 正文中加载 requireJS 模块？

> ID：12697238
> 
> 赞同：13
> 
> 时间：2012-10-02T19:50:08.887
> 
> 标签：asynchronous, javascript, requirejs, js-amd

我正在将 RequireJS 集成到 CMS 中，因此我将其放在页面模板的底部：

```
<html>
<body>
  {Placeholder1}
  <script src="scripts/require.js" data-main="scripts/main"></script>
  {Placeholder2}
</body>
</html> 
```

然后在每个页面上，我想创建一个利用 RequireJS 的函数。所以我试着把它放在页面底部：

```
<html>
<body>
    <h1>Home</h1>
    <div class="slider">Slider content</div>

    <script src="scripts/require.js" data-main="scripts/main"></script>

    <script type="text/javascript">
      require([
        'jquery',
        'utils',
        'slider'
      ], function ($, utils, slider) {
        slider.start();
      });
    </script>
</body>
</html> 
```

但我在 jquery、utils 和滑块 js 文件上得到 404。似乎它没有读取我拥有的 main.js 配置：

```
require.config({
    paths: {
        jquery: 'libs/jquery-1.8.1.min',
        utils: 'libs/utils',
        slider: 'libs/jquery.slider.min'
    },
    shim: {
        slider: ['jquery']
    }
});

require([ 'utils' ], function (utils) {
    utils.init();
}); 
```

我尝试在页眉中加载 RequireJS 和 main，但结果不一致。有时 jquery、utils 和 slider 会及时加载，有时则不会。就好像页面底部的内联“require”不知道页面上的主要 RequireJS 或依赖规则，但是我的断点在 main.js 中命中，所以我知道它正在被调用。是因为 main.js 是异步加载的，但是页面底部的内联“require”块是在页面渲染时加载的？我该如何解决这个问题？

我之前成功使用过 RequireJS，但没有使用 CMS。我总是使用“定义”并且总是异步调用模块，但从来不需要像这样内联调用 RequireJS 函数。关于正确方法的任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T08:03:24.727

这里重要的是在请求任何模块之前设置配置选项。正如您正确识别的那样，存在竞争条件，这意味着您的配置选项`main.js`没有及时加载。`require.js`最简单的方法是在加载脚本之前将配置选项内联。

```
<script>
var require = {
    baseUrl: <?= $someVar ?>,
    paths: {
        // etc
    }
}
</script>
<script src="scripts/require.js" data-main="scripts/main"></script> 
```

在页面下方：

```
<script>
    require([
        'jquery',
        'utils',
        'slider'
      ], function ($, utils, slider) {
        slider.start();
      });
</script> 
```

另请参阅[RequireJS 如何处理多个页面和部分视图？](https://stackoverflow.com/questions/10815454/how-does-requirejs-work-with-multiple-pages-and-partial-views)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T21:03:15.417

似乎正在发生的事情是 main.js 正在异步加载，而内联 require 被立即调用。这就是结果不一致的原因。解决方案是不使用 data-main 属性并通过 require.js 脚本标签下的脚本标签调用 main.js 文件。

您仍然可以通过在其中执行以下操作从加载的 main.js 文件中确定 baseUrl：

```
//DETERMINE BASE URL FROM CURRENT SCRIPT PATH
var scripts = document.getElementsByTagName("script");
var src = scripts[scripts.length-1].src;
var baseUrl = src.substring(src.indexOf(document.location.pathname), src.lastIndexOf('/'));

//CONFIGURE LIBRARIES AND DEPENDENCIES VIA REQUIREJS
require.config({
    baseUrl: baseUrl,
.... 
```

# package - RequireJS 加载问题（带有包）

> ID：12697240
> 
> 赞同：1
> 
> 时间：2012-10-02T19:50:14.923
> 
> 标签：package, requirejs, amd, amplifyjs

我正在使用 RequireJS 2.0.6。有时我的一个库（amplifyjs）有一个问题。

项目：

```
libs/
    amplify.js
    handlebars.js
    jquery.js
    require.js
packages/
    core/
        main.js
index.html
main.js 
```

我的 main.js：

```
require.config({
    paths: {
        'jquery': '../libs/jquery',
        'amplify': '../libs/amplify',
        'handlebars': '../libs/handlebars'
    },
    shim: {
        'jquery': {
            exports: '$'
        },
        'amplify': {
            deps: ['jquery'],
            exports: 'amplify'
        },
        'handlebars': {
            exports: 'handlebars'
        }
    },
    packages: ['core'],
    baseUrl: './packages/'
});

require(['jquery', 'amplify', 'handlebars', 'core'], function() {
}); 
```

索引.html：

```
<script type="text/javascript" data-main="main" src="libs/require.js"></script> 
```

75% 的时间它可以工作，但有时我会收到此错误：

```
GET http://localhost:8888/aa/test/packages/libs/amplify.js 404 (Not Found) 
Uncaught Error: Script error
    http://requirejs.org/docs/errors.html#scripterror 
```

路径不对！但我无法弄清楚为什么会发生这种情况？为什么只是有时？

（我很确定它必须对包做一些事情，但我不知道为什么会这样做）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T00:32:00.753

我想出了另一种方法来做到这一点，它的工作原理！

```
require.config({
    paths: {
        libs: '../libs'
    },
    packages: ['core'],
    shim: {
        'libs/amplify': {
            deps: ['libs/jquery'],
            exports: 'amplify'
        },
        'libs/handlebars': {
            deps: ['libs/jquery'],
            exports: 'handlebars'
        },
        'core': {
            deps: ['libs/amplify', 'libs/handlebars']
        }

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T21:10:44.260

> （我很确定它必须对包做一些事情，但我不知道为什么会这样做）

这个词`packages`指的是标准的 CommonJS，因为 requirejs 支持加载位于[CommonJS Packages](http://wiki.commonjs.org/wiki/Packages/1.1)目录结构中的模块，并且模块本身应该是 RequireJS 可以理解的模块格式。

# wcf - Visual Studio 未生成 PollingDuplex 代理客户端

> ID：12697249
> 
> 赞同：0
> 
> 时间：2012-10-02T19:50:52.417
> 
> 标签：wcf, silverlight, pollingduplexhttpbinding

Visual Studio 没有为我的 PollingDuplex 代理创建构造函数。WCF 客户端应该有 8 个构造函数，其中一个构造函数包括 HttpPollingDuplexBinding 对象和一个端点地址。但是只有5个重载并且客户端没有Callback方法。我该如何解决这个问题？

```
 var address = new EndpointAddress("http://"
            + App.Current.Host.Source.DnsSafeHost
            + ":"
            + App.Current.Host.Source.Port.ToString(CultureInfo.InvariantCulture)
            + "/PService.svc");
        return new ServiceClient(binding, address); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:05:50.337

This is a known issue as mentioned here

[http://blogs.msdn.com/b/silverlightws/archive/2010/04/04/some-known-wcf-issues-in-silverlight-4.aspx](http://blogs.msdn.com/b/silverlightws/archive/2010/04/04/some-known-wcf-issues-in-silverlight-4.aspx)

But still can not produce all the constructors. Though I believe this could be an answer for someone who faces this problem.

Edit:

Very strange.

```
[ServiceContract]
public interface IMyCallback
{

    [OperationContract(IsOneWay = true, AsyncPattern = true)]
    IAsyncResult BeginNotify(Message message, AsyncCallback callback, object state);
    void EndNotify(IAsyncResult result);

    [OperationContract(IsOneWay = true)]
    void OnX();
} 
```

works fine. But this

```
[ServiceContract]
public interface IPokerClient
{

    [OperationContract(IsOneWay = true)]
    void OnX();

    [OperationContract(IsOneWay = true, AsyncPattern = true)]
    IAsyncResult BeginNotify(Message message, AsyncCallback callback, object state);
    void EndNotify(IAsyncResult result);

} 
```

is not working fine here. I have no idea but I'm changing nothing but this and getting a proxy with callback functions.

# c++ - char * 指针初始化

> ID：12697251
> 
> 赞同：2
> 
> 时间：2012-10-02T19:51:07.177
> 
> 标签：c++, c

> **可能重复：**
> [C 字符串文字：它们去哪儿了？](https://stackoverflow.com/questions/2589949/c-string-literals-where-do-they-go)

如果我有以下代码

```
char *str = "Tryout" ; 
```

字符串将存储在哪里？堆？如果是堆栈，那么指针是否指向堆栈位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T19:52:05.693

该字符串具有静态存储类（可能在只读数据中）并且`str`是具有自动存储功能的局部变量。这就是为什么最好将其声明为`const char *`.

# javascript - 使用 AJAX 修改 DOM 的最简洁方法是什么

> ID：12697254
> 
> 赞同：0
> 
> 时间：2012-10-02T19:51:23.207
> 
> 标签：javascript, ajax, dom

我已经在互联网上搜索了如何在 ajax 请求后修改我的 HTML 页面。我找到了许多不同的解决方案，但我不知道该使用哪一个。以下是我考虑的选项：（顺便说一下，我没有使用 jQuery，而是从 AJAX 开始）

1.  服务器使用一些“回声”在 PHP 中构建所有 DOM，我们只`innerHTML = xhr.responseText`在客户端使用。

2.  服务器构建一个 XML 文档，JavaScript 使用 XML 文件更改 DOM。对于第二个解决方案，我不知道该怎么做。

您知道使用哪种解决方案吗？我会忘记其他一些解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:52:27.467

使用`echo`as`innerHTML`是乞求人们在你的代码中注入各种有趣的东西。

在游戏的这一点上，您可能应该使用 JSON 来回发送消息，并编写 JS 来创建您希望在浏览器中看到的内容。

如果我正在创建一个消息传递系统，我可能会这样：

**浏览器** *内（无样式）*

```
• Norguard  
  My message
  2012-10-02 10pm

• Norguard
  Message 2
  2012-10-02 11pm 
```

**HTML**

```
<!-- basic idea of what I'm working with in the end result -->
<ul id="message-list">
    <li><span class="username">Norguard</span><p class="content">My Message</p><time datetime="2012-10-02T22:00:00.000Z" pubdate>2012-10-02 10pm</time>
</ul> 
```

**JS** *（程序）*

```
// This might be a really basic implementation of functions to display messages
var Messager = {
    parent : document.getElementById("message-list"),
    update : function () { /* get messages from server */ },
    buildMessage : function (message) {
        var frag = document.createDocumentFragment,
            name = document.createElement("span"),
            body = document.createElement("p"),
            time = document.createElement("time");

        name.className = "username";
        body.className = "content";
        time.setAttribute("pubdate", "pubdate");

        name.innerText = message.userName;
        body.innerText = message.content;
        time.setAttribute("datetime", message.timestamp);
        time.innerText = message.friendlyDate;

        frag.appendChild(name);
        frag.appendChild(body);
        frag.appendChild(time);

        return frag;
    },

    buildMessages = function (messages) {
        var parentFrag = document.createDocumentFragment(),
            messenger = this;

        messages.forEach(function (message) {
            var li = document.createElement("li"),
                messageFrag = messenger.buildMessage(message);
            li.appendChild(messageFrag);
            parentFrag.appendChild(li);
        });

        return parentFrag;
    },

    writeMessages = function (newMessages) {
        this.domElement.appendChild(newMessages);
        // or do whatever sorting is required, et cetera
    }
}; 
```

**JS** *（结果处理）*

```
// this might be like what your XHR callback looks like (this is really basic)
xhr.onreadystatechange = function () {
    if (!this.readyState === 4 && (!this.status == 200 || !this.status == 302)) { return; }

    var json = "",
        data = "",
        messages;

    json = this.responseText;
    data = JSON.parse(json);
    messages = Messager.buildMessages(data);
    Messager.writeMessages(messages);
}; 
```

**JSON** *（响应文本）*

```
// What your JSON response would be
[
    {
        "username"  : "Norguard",
        "content"   : "My message",
        "timestamp" : "2012-10-02T22:00:00.000Z",
        "friendlyDate" : "2012-10-02 10pm"
    }, {
        "username"  : "Norguard",
        "content"   : "Message 2",
        "timestamp" : "2012-10-02T23:00:00.000Z",
        "friendlyDate" : "2012-10-02 11pm"
    }
] 
```

请注意，您不应该在 JSON 中添加友好的日期，而是应该使用 JS 和每条消息中的时间戳转换为用户的本地时间......但这是一个演示如何用尽可能少的装饰来完成整个包装。

从 PHP 中，您可以以任何存储方式获取消息（数据库、csv、不同的文本文件... ...从 Twitter 流式传输... ...随便），然后将它们全部放在一个数组中.

**PHP**

```
// Your PHP for the data above might look like this:
$msgArray = array(

    array( "username" => "Norguard",
           "content"  => "My message",
           "timestamp" => "2012-10-02T22:00:00.000Z",
           "friendlyDate" => "2012-10-02 10pm"        ),

    array( "username" => "Norguard",
           "content"  => "Message 2",
           "timestamp" => "2012-10-02T22:00:00.000Z",
           "friendlyDate" => "2012-10-02 11pm"        )
);

$jsonData = json_encode($msgArray);

echo $jsonData; 
```

这很可能有错误——我没有在密码键盘上写这个，我只是在这里写的，从我的头顶开始。

它也不意味着是 100% 完整的代码。例如，我没有介绍如何设置 XMLHttpRequest，或者进行任何事件处理，或者做任何 UI 工作（比如按时间戳对消息进行排序，或者删除重复项或添加更新按钮）。

这只是将 JSON 数据从 PHP 获取到 JS（Chrome/FF/Safari/newer IE）的基本必需品，以及将这些数据放入 HTML 并将其放入页面的非常简单的策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:57:39.777

“最干净的方式” imo 是使用跨浏览器解决方案，将对象返回到您的响应逻辑。您可以使用 echo 但这将是“肮脏的方式” imo haha​​。

我建议查看通过 ajax 调用返回的 json 对象。

# spring-mvc - 我如何集群一个spring mvc应用程序？

> ID：12697257
> 
> 赞同：7
> 
> 时间：2012-10-02T19:51:38.310
> 
> 标签：spring-mvc, spring-security, distributed-computing

我在码头服务器上有一个用 spring 编写的 Web 应用程序。由于负载平衡，我必须在 Web 服务器上复制 http 会话和 spring-security 上下文。

任何人都可以指出一个工作示例如何使这成为可能吗？

mvc 控制器是 spring-security-oauth2 的一部分，因此我影响它们的能力有限，而码头是我们环境的先决条件。对于大部分数据和缓存，我们将使用 infinispan。

我找不到任何当前信息如何 tu 与 spring 集群，所以我很感激每一个帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T19:57:29.277

1.  什么是无状态的，自动扩展（就像大多数 Spring bean 和控制器一样）

2.  共享的内容，必须复制或集群中的所有实例必须共享

    1.  必须复制 HTTP 会话。如果是，那么 Spring 安全性（在会话中存储安全上下文将*正常工作*

    2.  数据库可以正常工作——你要么只使用一个，要么也复制它

    3.  Infinispan 应该处理内存缓存的复制

如果您只将`Serializable`项目存储在 HTTP 会话和缓存中，那么集群您的应用程序应该可以正常工作。注意同步代码（应该分发锁吗？）和有状态的 bean。

# 也可以看看

*   [会话未在两台服务器之间共享](https://stackoverflow.com/questions/12598919)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-06T16:25:25.143

虽然我迟到了，但我认为春季课程可能是一个潜在的候选人。在另一个 Stackoverflow 问题中查看解决方案。

[通过 Tomcat/Jetty 使用 Spring 会话和 Hazelcast 进行会话复制](https://stackoverflow.com/questions/27513673/spring-boot-with-hazelcast-and-tomcat)

[春季会议文档](http://docs.spring.io/spring-session/docs/current/reference/html5)

# image - 更改稀疏矩阵的图像点分辨率

> ID：12697258
> 
> 赞同：-1
> 
> 时间：2012-10-02T19:51:40.370
> 
> 标签：image, matlab, image-processing, sparse-matrix

我有一个图像（或矩阵），其中绝大多数点等于 NaN，只有几个点（在示例中显示为蓝色）是已知的。我想更改此图像（或矩阵）的分辨率，如 imresize。但是，问题是 imresize 不适用于填充 NaN 的矩阵，如果我想用其他值替换 NaN 值，最终的插值也不正确。有什么解决办法吗？一种解决方案可能是使用特定邻域的反距离，然后找到新的粗分辨率值。

![显示稀疏点的示例图](../Images/a096b6c650344bfaeefe14caed9aaeed.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:44:46.403

您可以使用简单的最近邻：

```
img2 = kron(img, ones(2))  %# for scale factor 2
img2 = kron(img, ones(3))  %# for scale factor 3
... 
```

唯一的缺点是你只能有整数值的比例因子。这是完全有道理的，因为`NaN`用插值调整大小是完全不可能的。

作为替代方案，您可以使用

```
img(isnan(img)) = -1;          %# or something else more suited
img2 = imresize(img, 1.2)      %# resize your img normally

img2(img2~=1 | img~=0) = NaN;  %# make everything that's not valid NaN again 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:16:12.060

我只会勾勒出一个可行的解决方案：

1.  在值有效的地方制作矩阵的掩码
2.  调整该蒙版的大小
3.  重新填写值

前两个步骤非常简单：

```
mask      = ~isnan(data);
largeMask = imresize(mask, factor);
largeImage = largeMask; 
```

棘手的部分是在最后一步，我不会实施，而只是展示我会尝试做的事情。我会在未调整大小的`index = find(~isnan(data))`数据`x,y`（在小矩阵中，自己将其转换为大矩阵，找到它的邻居并填充。

*编辑：*当您调整掩码大小时，您可能会得到很好的结果，`NaN`用一些不会扭曲点值的值替换数据大小，然后将转换后的掩码重新应用于您的图像以将 NaN 放回原位。无论如何，这只是在黑暗中拍摄，因为您没有指定数据应该如何插值或者您何时认为这些值有效与否。

对于某些问题，我认为一个很好的起点是尝试手动执行操作（或例如使用 GIMP/Photoshop），然后尝试在代码中实现它。

# windows - 如何在 Windows 中查找路径长度大于 260 个字符的文件？

> ID：12697259
> 
> 赞同：93
> 
> 时间：2012-10-02T19:51:40.130
> 
> 标签：windows, windows-xp, xcopy, max-path

我在 XP windows 脚本中使用 xcopy 递归地复制目录。我不断收到“内存不足”错误，我理解这是因为我尝试复制的文件路径太长。我可以轻松减少路径长度，但不幸的是我无法确定哪些文件违反了路径长度限制。复制的文件被打印到标准输出（我将其重定向到日志文件），但错误消息被打印到终端，所以我什至无法大致确定错误是针对哪个目录给出的.

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-10-02T20:08:33.053

做一个`dir /s /b > out.txt`然后在位置 260 添加一个指南

在PowerShell中`cmd /c dir /s /b |? {$_.length -gt 260}`

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-10-24T23:39:26.490

为此，我创建[了路径长度检查器工具，这是一个不错的免费 G​​UI 应用程序，您可以使用它来查看给定目录中所有文件和目录的路径长度。](https://github.com/deadlydog/PathLengthChecker)

我还[写过一个](http://blog.danskingdom.com/powershell-script-to-check-path-lengths/)关于获取文件和目录长度的简单 PowerShell 脚本并写过博客。它将输出文件的长度和路径，并可选择将其写入控制台。它不限于显示仅超过一定长度的文件（易于修改），而是按长度降序显示它们，因此仍然非常容易查看哪些路径超过了您的阈值。这里是：

```
$pathToScan = "C:\Some Folder"  # The path to scan and the the lengths for (sub-directories will be scanned as well).
$outputFilePath = "C:\temp\PathLengths.txt" # This must be a file in a directory that exists and does not require admin rights to write to.

$writeToConsoleAsWell = $true   # Writing to the console will be much slower.

# Open a new file stream (nice and fast) and write all the paths and their lengths to it.
$outputFileDirectory = Split-Path $outputFilePath -Parent
if (!(Test-Path $outputFileDirectory)) { New-Item $outputFileDirectory -ItemType Directory }
$stream = New-Object System.IO.StreamWriter($outputFilePath, $false)
Get-ChildItem -Path $pathToScan -Recurse -Force | Select-Object -Property FullName, @{Name="FullNameLength";Expression={($_.FullName.Length)}} | Sort-Object -Property FullNameLength -Descending | ForEach-Object {
    $filePath = $_.FullName
    $length = $_.FullNameLength
    $string = "$length : $filePath"

    # Write to the Console.
    if ($writeToConsoleAsWell) { Write-Host $string }

    #Write to the file.
    $stream.WriteLine($string)
}
$stream.Close() 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2016-02-13T15:51:50.540

作为最简单解决方案的改进，如果您不能或不想安装 Powershell，只需运行：

```
dir /s /b | sort /r /+261 > out.txt 
```

或（更快）：

```
dir /s /b | sort /r /+261 /o out.txt 
```

超过 260 的行将排在列表的顶部。请注意，您必须将 1 添加到 SORT 列参数 (/+n)。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-04-02T21:58:52.180

我已经替代了此处使用 PowerShell 的其他好的答案，但我的也将列表保存到文件中。将在这里分享，以防其他人需要类似的东西。

**警告：**代码会覆盖当前工作目录中的“longfilepath.txt”。我知道你不太可能已经有了，但以防万一！

故意想要在一行中：

```
Out-File longfilepath.txt ; cmd /c "dir /b /s /a" | ForEach-Object { if ($_.length -gt 250) {$_ | Out-File -append longfilepath.txt}} 
```

**详细说明：**

1.  运行 PowerShell
2.  遍历您要检查文件路径长度的目录（C：有效）
3.  复制粘贴代码【在PowerShell中右键粘贴，或者Alt + Space > E > P】
4.  等到它完成，然后查看文件：`cat longfilepath.txt | sort`

**解释：**

`Out-File longfilepath.txt ;`– 创建（或覆盖）一个名为“longfilepath.txt”的空白文件。用分号分隔命令。

`cmd /c "dir /b /s /a" |`– 在 PowerShell 上运行 dir 命令，`/a`以显示所有文件，包括隐藏文件。`|`管。

`ForEach-Object { if ($_.length -gt 250) {$_ | Out-File -append longfilepath.txt}}`– 对于每一行（表示为 $_），如果长度大于 250，则将该行附加到文件中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-20T07:25:27.740

来自[http://www.powershellmagazine.com/2012/07/24/jaap-brassers-favorite-powershell-tips-and-tricks/](http://www.powershellmagazine.com/2012/07/24/jaap-brassers-favorite-powershell-tips-and-tricks/)：

```
Get-ChildItem –Force –Recurse –ErrorAction SilentlyContinue –ErrorVariable AccessDenied 
```

第一部分只是遍历这个文件夹和子文件夹；using`-ErrorVariable AccessDenied`意味着将有问题的项目推入 powershell 变量`AccessDenied`。

然后您可以像这样扫描变量

```
$AccessDenied |
Where-Object { $_.Exception -match "must be less than 260 characters" } |
ForEach-Object { $_.TargetObject } 
```

如果您不关心这些文件（在某些情况下可能适用），只需删除该`-ErrorVariable AccessDenied`部分即可。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-03T14:41:25.690

您可以重定向标准错误。

更多解释[here](http://www.robvanderwoude.com/redirection.php)，但有如下命令：

```
MyCommand >log.txt 2>errors.txt 
```

应该获取您正在寻找的数据。

此外，作为一个技巧，如果路径以`\\?\`( [msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx) )为前缀，Windows 会绕过该限制

如果您有一个以长路径开头的根或目的地，则另一个技巧可能`SUBST`会有所帮助：

```
SUBST Q: "C:\Documents and Settings\MyLoginName\My Documents\MyStuffToBeCopied"
Xcopy Q:\ "d:\Where it needs to go" /s /e
SUBST Q: /D 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-06-21T02:21:37.860

TLPD（“太长的路径目录”）是拯救我的程序。非常容易使用：

[https://sourceforge.net/projects/tlpd/](https://sourceforge.net/projects/tlpd/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-15T15:43:19.097

疯狂地，这个问题仍然是相关的。尽管 E235 给了我基础，但没有一个答案给了我想要的东西。我还打印出名称的长度，以便更容易查看需要修剪的字符数。

```
Get-ChildItem -Recurse | Where-Object {$_.FullName.Length -gt 260} | %{"{0} : {1}" -f $_.fullname.Length,$_.fullname } 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-03-07T11:05:48.327

对于大于 260 的路径：
您可以使用：

```
Get-ChildItem | Where-Object {$_.FullName.Length -gt 260} 
```

14 个字符的示例：
查看路径长度：

```
Get-ChildItem | Select-Object -Property FullName, @{Name="FullNameLength";Expression={($_.FullName.Length)} 
```

获取大于 14 的路径：

```
Get-ChildItem | Where-Object {$_.FullName.Length -gt 14} 
```

截屏：
![在此处输入图像描述](../Images/61c7ee912f18ba48dbf039a5523d6a6e.png)

对于大于 10 的文件名：

```
Get-ChildItem | Where-Object {$_.PSChildName.Length -gt 10} 
```

截屏：
![在此处输入图像描述](../Images/1bc39dc71b68292dbdb6408452159bb3.png)

# ios - 当兄弟姐妹随自动布局更改时视图不会重绘

> ID：12697260
> 
> 赞同：1
> 
> 时间：2012-10-02T19:51:48.453
> 
> 标签：ios, uikit, ios6, autolayout

我有一个应用程序，其 UI 设置如下

```
V:[statusBarView][contentView][footerView] 
```

虽然我在 IB 中做了布局（见下文）。statusBarView 和 footerView 的高度固定，并且它们的顶部/底部空间（分别）与父视图（VC 的视图）齐平。

在屏幕截图中，您可以看到当屏幕旋转并重绘视图时，中间的 contentView 容器及其子视图会调整大小并正确布局。

我将这些按钮之一的操作设置为调整（蓝色）footerView 的大小。我的期望是，由于设置了约束，因此 contentView 的底部等于 footerView 的顶部，如果我调整页脚的大小，contentView 将自行处理它的大小调整。这没有发生。无论我是否使 footerView 更高或更短，或者将其向上或向下移动，contentView 都保持不变。

我试过 setNeedsUpdateConstraints、setNeedsLayout 等，但都没有效果。

也许我完全错过了自动布局的重点，或者只是如何实现它。为什么当窗口/超级视图更改时视图能够正确布局，而不是约束实际依赖的兄弟视图？

谢谢

![默认垂直布局](../Images/e1f0ae59e541ca13601dcf60705512e4.png) ![默认水平布局](../Images/2e41f8a136fea460723f8c483ff93796.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:26:13.887

当您尝试调整页脚大小时，您只是设置框架，还是更新约束？

您应该能够用新的（具有更新的高度）替换高度约束。在下面的代码中，我使用这种技术来更改名为 _leftNavBar 的视图的前导值，该视图直接位于 self.view 中。您应该能够很容易地修改它以找到高度约束，并在其上设置新值。

```
[self.view.constraints enumerateObjectsUsingBlock:^(NSLayoutConstraint *con, NSUInteger idx, BOOL *stop) {
    if ([con.firstItem isEqual:_leftNavBar]
        && [con.secondItem isEqual:self.view]
        && con.firstAttribute == NSLayoutAttributeLeading
        && con.secondAttribute == NSLayoutAttributeLeading) {
        [self.view removeConstraint:con];
    }
}];
[self.view addConstraint:[NSLayoutConstraint constraintWithItem:_leftNavBar
                                                      attribute:NSLayoutAttributeLeading
                                                      relatedBy:NSLayoutRelationEqual
                                                         toItem:self.view
                                                      attribute:NSLayoutAttributeLeading
                                                     multiplier:1.0f
                                                       constant:(newLeftNavX - self.getLeftNavBarWidth)]];
[self.view setNeedsUpdateConstraints]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:52:02.467

定义一个 IBOutlet 以引用页脚的高度约束。当改变它的值时，它也应该改变内容视图的高度。

# objective-c - 在块内使用 NSUndoManager

> ID：12697262
> 
> 赞同：1
> 
> 时间：2012-10-02T19:52:04.863
> 
> 标签：objective-c, macos, nsundomanager

我试图向块代码添加一些撤消/重做（从 NSOpenPanel 导入一些文件），只要代码源自块，主代码就可以工作，但 NSUndoManager 代码不会保存并且不会给出任何错误。NSUndoManager 代码在其他任何地方都可以工作，只要它不在块中

示例 NSUndoManager 代码如下：

```
// Undo Work
id  undoObject = [NSApp targetForAction:@selector(undoManager) to:nil from:self];
NSUndoManager *undoManager = [undoObject undoManager];
[[undoManager prepareWithInvocationTarget:self] deleteImages];
[undoManager setActionName:@"import images"]; 
```

下面显示了代码在哪里起作用和不起作用：

```
/* NSUndoManager code works */ 
NSOpenPanel *openPanel = [NSOpenPanel openPanel];
[openPanel beginSheetModalForWindow:[self.windowController window]
                  completionHandler:^(NSInteger result) {
                      if (result == NSFileHandlingPanelOKButton) {
                          /* NSUndoManager code does not work, 
                             it also does not work inside importImages: */
                          [self importImages:[openPanel URLs]];
                      } else {
                          [openPanel close];
                      }
                  }];
/* NSUndoManager code works */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T23:36:17.580

该块在堆栈上，所以当撤消操作被调用时，可能撤消管理器对象已经被释放（或者如果不是这样，则设置为 nil）。因此确保撤消管理器将处于活动状态，声明为类实例，或使用 __block 语法（无 ARC）：

```
__block NSUndoManager* undoManager;
NSOpenPanel *openPanel = [NSOpenPanel openPanel];
[openPanel beginSheetModalForWindow:[self.windowController window]
                  completionHandler:^(NSInteger result) {
                      if (result == NSFileHandlingPanelOKButton) {
                          id  undoObject = [NSApp targetForAction:@selector(undoManager) to:nil from:self];
                          undoManager=[undoObject undoManager];
                          [[undoManager prepareWithInvocationTarget:self] deleteImages];
                          [undoManager setActionName:@"import images"];
                          [self importImages:[openPanel URLs]];
                      } else {
                          [openPanel close];
                      }
                  }]; 
```

完成撤消管理器后，可以将其设置为 nil。

# apache-flex - 在基于桌面的应用程序中跟踪窗口外的鼠标？

> ID：12697266
> 
> 赞同：0
> 
> 时间：2012-10-02T19:52:11.267
> 
> 标签：apache-flex, air, flex4, flex4.5

*离开一段时间后，我将返回 Flex/AIR，所以这可能是一个非常基本的问题。*

我有一个基于窗口的桌面 AIR 应用程序。它有一个侧边栏/控制面板类型的功能，在用户将鼠标 X 移动到舞台/窗口左侧 < 5 px 之前，它会一直隐藏。然后，如果显示侧边栏，如果用户将鼠标 X 移动到 > 220，它就会被隐藏。简单。

我遇到了一个愚蠢的问题，用户可以将鼠标太快地向左移动，越过窗口的左侧，而我打开侧边栏的例程不会被调用。我尝试过单独或组合使用 ENTER_FRAME、MOUSE_MOVE 和 MOUSE_OUT，但仍然很容易让侧边栏例程失败。

```
this.stage.addEventListener(Event.ENTER_FRAME, controlPanelDisplayHandler);
this.stage.addEventListener(MouseEvent.MOUSE_MOVE, controlPanelDisplayHandler);
this.stage.addEventListener(MouseEvent.MOUSE_OUT, controlPanelDisplayHandler); 
```

在我显示/隐藏侧边栏的例程中，我看到了 ENTER_FRAME 事件的痕迹，但它保留了在鼠标离开窗口之前它知道的最后一个 mouseX 位置，而不是桌面矩形内的当前鼠标位置。

我似乎记得在这方面有一些安全问题，但已经有一段时间了。谁能建议我可以完成这个简单功能的方法？

```
private function controlPanelDisplayHandler(event:Event):void
{
trace("mouseX" + this.stage.mouseX);

if (sidebarDisplayed == false){
    if (mouseX <= 5){ 
        sidebarDisplayed = true;
        showSidebar();  
    }
} else if (sidebarDisplayed == true){

    if (mouseX >= 240){
        sidebarDisplayed = false;
        hideSidebar();  
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:34:35.983

也是 Flex 的新手，可能没有帮助，但是您尝试过`Event.MOUSE_LEAVE`吗？

可能会给你同样的问题，但不确定。

# c++ - 在构建 quickfix 1.13.3 时从 python 捕获 C++ 异常

> ID：12697269
> 
> 赞同：1
> 
> 时间：2012-10-02T19:52:13.443
> 
> 标签：c++, python, unit-testing, exception, quickfix

我正在 Linux Fedora 上构建 Quickfix 1.13.3。python单元测试失败。测试将错误的 FIX 消息传递给 python，python 应该捕获错误，并抛出适当的异常。发生了什么，是 c++ 层正在捕获错误，抛出 c++ 异常，并且测试失败并出现 c++ 核心转储。我假设 python 应该捕获这些异常，但事实并非如此

有人对此有经验吗？

# java - 在 Jetty 中配置 WebSphere SIB 组件以供应用程序使用

> ID：12697273
> 
> 赞同：1
> 
> 时间：2012-10-02T19:52:22.353
> 
> 标签：java, queue, jms, websphere, jetty

我想使用来自在 Jetty 上运行的 Spring JMS 应用程序的远程消息传递将消息放置到在 WebSphere 8.5 上的服务集成总线中配置的队列中。我有一个使用 ActiveMQ 的 jetty-env.xml 的工作示例。

```
<New id="cf" class="org.eclipse.jetty.plus.jndi.Resource">
    <Arg>jms/connectionFactory</Arg>
    <Arg>
        <New class="org.apache.activemq.ActiveMQConnectionFactory">
            <Arg>tcp://localhost:61616</Arg>
        </New>
     </Arg>
</New> 
```

我在 WebSphere 中有 SIB_ENDPOINT 的端口，我认为远程处理将使用 IIOP 协议：

```
<New id="cf" class="org.eclipse.jetty.plus.jndi.Resource">
    <Arg>jms/connectionFactory</Arg>
    <Arg>
        <New class="com.ibm.ws.sib.api.jms.impl.JmsConnectionFactoryImpl">
            <Arg>iiop://localhost:7280</Arg>
        </New>
    </Arg>
</New> 
```

但是，尝试这样做会产生 IllegalStateException，因为显然此类不包含构造函数。我究竟做错了什么？如何在 Jetty 上的 Spring 应用程序中配置适当的代理以访问本地 WAS85 实例上的 SIB？

# javascript - 使用 TypeScript 的开放式函数参数

> ID：12697275
> 
> 赞同：163
> 
> 时间：2012-10-02T19:52:25.997
> 
> 标签：javascript, typescript

IMO，[TypeScript](http://www.typescriptlang.com)语言的主要关注点之一是支持现有的 vanilla JavaScript 代码。这是我第一眼的印象。看看以下完全有效的 JavaScript 函数：

> 注意：我并不是说我喜欢这种方法。我只是说这是一个有效的 JavaScript 代码。

```
function sum(numbers) { 

    var agregatedNumber = 0; 
    for(var i = 0; i < arguments.length; i++) { 
        agregatedNumber += arguments[i];
    }

    return agregatedNumber;
} 
```

因此，我们使用任意数量的参数来使用这个函数：

```
console.log(sum(1, 5, 10, 15, 20)); 
```

[但是，当我使用TypeScript Playground](http://www.typescriptlang.org/Playground/)进行尝试时，它会出现编译时错误。

我假设这是一个错误。假设我们没有兼容性问题。那么，有没有办法用开放式参数编写这种类型的函数呢？比如`params`C#中的特性？

* * *

## 回答 #1

> 赞同：311
> 
> 时间：2012-10-02T19:57:08.073

TypeScript 的做法是将省略号运算符 ( `...`) 放在参数名称之前。上面会写成，

```
function sum(...numbers: number[]) {
    var aggregateNumber = 0;
    for (var i = 0; i < numbers.length; i++)
        aggregateNumber += numbers[i];
    return aggregateNumber;
} 
```

然后，这将正确键入检查

```
console.log(sum(1, 5, 10, 15, 20)); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-03-19T09:37:11.590

除了@chuckj 回答：您还可以在 TypeScript 中使用 an （在 Java / .NET 中`arrow function expression`是一种 a ）`lambda`

```
function sum(...nums: number[]): number {
    return nums.reduce((a, b) => a + b, 0);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-05-10T06:56:14.223

在 Typescript 中它是**Rest Parameter**的概念，它是接收多个相似类型值的参数。如果我们以 typescript 为目标，那么我们必须编写代码**ECMAScript 6**标准，然后 typescript transpiler 将其转换为等效的 java 脚本代码（这是**ECMAScript 5**标准）。如果我们使用 typescript，那么我们必须使用三个 dot(...) preferx 和 restparameter 变量名称，例如函数 sum(...numbers: number[])，然后它会起作用。

**注意：** Rest Parameter 必须是参数列表中的最后一个参数。类似函数 sum(name:string,age:number,...numbers: number[])。

# postgresql - 授予在 PostgreSQL 中创建用户

> ID：12697281
> 
> 赞同：1
> 
> 时间：2012-10-02T19:52:55.800
> 
> 标签：postgresql, role, grant, createuser

我只需要创建一个用户来创建其他用户，但是，我不知道如何为此创建授权？存在这种方法，还是我需要使用`GRANT ALL PRIVILEGES`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:56:45.967

您可以在这里找到可用的权限：[http ://www.postgresql.org/docs/9.1/static/sql-createuser.html](http://www.postgresql.org/docs/9.1/static/sql-createuser.html)

我相信你正在寻找的是`CREATEUSER`

您要执行的完整命令是：

```
CREATE USER username WITH CREATEUSER; 
```

# php - PHPMailer 给出错误消息：“PHP 解析错误：解析错误，第 23 行的 mailer.php 中出现意外 '{'”

> ID：12697286
> 
> 赞同：0
> 
> 时间：2012-10-02T19:53:09.247
> 
> 标签：php, phpmailer, parse-error

我为我大学的一个俱乐部制作了一个网站，并使用了 PHPMailer。当我在自己的服务器上尝试时，它运行良好。但是，在我将网站上传到学校的 FTP 后，我的 PHPMailer 无法正常工作。我联系了学校的IT，他们说：“服务器上的PHP版本是4.3.9。你写的代码必须适合它。在服务器的错误日志中我们得到以下错误：PHP Parse error: parse error, unexpected '{' 在第 23 行的 mailer.php 中"。我检查了我的代码十亿次，但我无法解决这个问题。这是我的代码：

```
<?
if(!empty($_POST['sender_mail'])
    || !empty($_POST['sender_name'])
    || !empty($_POST['sender_surname'])
    || !empty($_POST['sender_major'])
    || !empty($_POST['sender_schoolyear'])
    || !empty($_POST['sender_id']))
{
  phpinfo();
    require_once('class.phpmailer.php');
    include("class.smtp.php"); // optional, gets called from within class.phpmailer.php if not already loaded
    $smail = $_POST['sender_mail'];
    $name = $_POST['sender_name'];
    $surname = $_POST['sender_surname'];
    $major = $_POST['sender_major'];
    $schoolyear = $_POST['sender_schoolyear'];
    $id = $_POST['sender_id'];

    $mail = new PHPMailer(true); // the true param means it will throw exceptions on errors, which we need to catch

    $mail->IsSMTP(); // telli ng the class to use SMTP

    try { // Here is 23th line
      $mail->SMTPAuth   = true;                  // enable SMTP authentication
      $mail->SMTPSecure = "ssl";                 // sets the prefix to the servier
      $mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
      $mail->Port       = 465;                   // set the SMTP port for the GMAIL server
      $mail->Username   = "xxxxx@gmail.com";  // GMAIL username
      $mail->Password   = "xxxxxxx";            // GMAIL password
      $mail->AddAddress('xxxxx@gmail.com', 'Membership');
      $mail->SetFrom('xxxxx@gmail.com', 'GGK');
      $mail->Subject = 'New Membership';
      $mail->IsHTML(true);
      $mail->Body = '<h3>New Membership</h3><br/><i><b>Name: </i></b><i>' . $name . '</i><br/><b><i>Surname: </i></b><i>' . $surname . '</i><br/><b><i>Mail: </i></b><i>' . $smail . '</i><br/><b><i>ID: </i></b><i>' . $id .  '</i><br/><b><i>Schoolyear: </b></i><i>' . $schoolyear . '</i><br/><b><i>Major: </b></i><i>' . $major . '</i>';
      $mail->Send();
      echo "Message Sent OK</p>\n";
    } catch (phpmailerException $e) {
        echo -1;
      echo $e->errorMessage(); //Pretty error messages from PHPMailer
    } catch (Exception $e) {
      echo -1;  
      echo $e->getMessage(); //Boring error messages from anything else!
    }
}
else{
    echo -1;
}
?> 
```

注意：我使用 ajax 获取表单的所有值并将它们发布到 mailer.php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:03:08.750

Try/catch 仅在 PHP5 版本中。您需要进行其他错误捕获（if/else）才能进行测试。

# macos - 可可应用程序随机崩溃

> ID：12697288
> 
> 赞同：1
> 
> 时间：2012-10-02T19:53:14.600
> 
> 标签：macos, debugging, crash

我的 Mac OS X 应用程序**随机**崩溃，并且没有迹象表明我的代码中有错误。如何调试此类错误？我无法访问随机崩溃的用户计算机。

以下是崩溃日志的示例：

```
OS Version:      Mac OS X 10.8 (12A269)

Report Version:  10

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)

Exception Codes: KERN_INVALID_ADDRESS at 0x000000008fe00000

VM Regions Near 0x8fe00000:
MALLOC_SMALL           0000000082000000-0000000083800000 [ 24.0M] rw-/rwx SM=PRV  

__TEXT                 000000008fe05000-000000008fe38000 [  204K] r-x/rwx SM=COW  /usr/lib/dyld

Application Specific Information:

objc_msgSend() selector name: _absorbDeferredNeedsDisplayRegion

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread

0   libobjc.A.dylib                 0x994d3c0b objc_msgSend + 27

1   com.apple.AppKit                0x9502985f -[_NSDisplayOperationStack exitDisplayOperationForWindow:] + 602

2   com.apple.AppKit                0x95181f8b -[NSView(NSLayerKitGlue) _drawViewBackingLayer:inContext:drawingHandler:] + 2523

3   com.apple.AppKit                0x951814fe -[NSView(NSLayerKitGlue) drawLayer:inContext:] + 167

4   com.apple.QuartzCore            0x91fe2b6a -[CALayer drawInContext:] + 136

5   com.apple.QuartzCore            0x920e0b5f backing_callback(CGContext*, void*) + 88

6   com.apple.QuartzCore            0x91fe1bbd CABackingStoreUpdate_ + 3241

7   com.apple.QuartzCore            0x91fe0943 CA::Layer::display_() + 1369

8   com.apple.QuartzCore            0x91fe03e4 -[CALayer _display] + 20

9   com.apple.QuartzCore            0x91fe03c5 CA::Layer::display() + 221

10  com.apple.QuartzCore            0x91fe02e3 -[CALayer display] + 20

11  com.apple.QuartzCore            0x91fe020b CA::Layer::display_if_needed(CA::Transaction*) + 673

12  com.apple.QuartzCore            0x91fdfa84 CA::Layer::layout_and_display_if_needed(CA::Transaction*) + 38

13  com.apple.QuartzCore            0x91fd4cfa CA::Context::commit_transaction(CA::Transaction*) + 338

14  com.apple.QuartzCore            0x91fd4a70 CA::Transaction::commit() + 362

15  com.apple.QuartzCore            0x91fd487d CA::Transaction::observer_callback(__CFRunLoopObserver*, unsigned long, void*) + 67

16  com.apple.CoreFoundation        0x98c7b51e __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 30

17  com.apple.CoreFoundation        0x98c7b45d __CFRunLoopDoObservers + 381

18  com.apple.CoreFoundation        0x98c54d85 CFRunLoopRunSpecific + 405

19  com.apple.CoreFoundation        0x98c54bdb CFRunLoopRunInMode + 123

20  com.apple.HIToolbox             0x9a0ef8aa RunCurrentEventLoopInMode + 242

21  com.apple.HIToolbox             0x9a0ef619 ReceiveNextEventCommon + 374

22  com.apple.HIToolbox             0x9a0ef494 BlockUntilNextEventMatchingListInMode + 88

23  com.apple.AppKit                0x94fefa5a _DPSNextEvent + 724

24  com.apple.AppKit                0x94fef28c -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 119

25  com.apple.AppKit                0x94fe56dc -[NSApplication run] + 855

26  com.apple.AppKit                0x94f888e6 NSApplicationMain + 1053

Thread 1:: Dispatch queue: com.apple.libdispatch-manager

0   libsystem_kernel.dylib          0x95af69ae kevent + 10

1   libdispatch.dylib               0x94e00cc5 _dispatch_mgr_invoke + 993

2   libdispatch.dylib               0x94e007fd _dispatch_mgr_thread + 53

Thread 2:: com.apple.CFSocket.private

0   libsystem_kernel.dylib          0x95af5be6 __select + 10

1   com.apple.CoreFoundation        0x98c99320 __CFSocketManager + 1632

2   libsystem_c.dylib               0x9918b557 _pthread_start + 344

3   libsystem_c.dylib               0x99175cee thread_start + 34

Thread 3:

0   libsystem_kernel.dylib          0x95af37d2 mach_msg_trap + 10

1   libsystem_kernel.dylib          0x95af2cb0 mach_msg + 68

2   com.apple.CoreFoundation        0x98c4fcc9 __CFRunLoopServiceMachPort + 185

3   com.apple.CoreFoundation        0x98c556af __CFRunLoopRun + 1247

4   com.apple.CoreFoundation        0x98c54d6a CFRunLoopRunSpecific + 378

5   com.apple.CoreFoundation        0x98c54bdb CFRunLoopRunInMode + 123

6   com.apple.Foundation            0x97b2ca86 -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 278

7   com.apple.Foundation            0x97abe8f0 -[NSRunLoop(NSRunLoop) run] + 76

8   [cut by author]                0x003de1dd +[HTTPServer bonjourThread] + 173

9   com.apple.Foundation            0x97b27318 -[NSThread main] + 45

10  com.apple.Foundation            0x97b2729b __NSThread__main__ + 1396

11  libsystem_c.dylib               0x9918b557 _pthread_start + 344

12  libsystem_c.dylib               0x99175cee thread_start + 34

Thread 4:: com.apple.NSURLConnectionLoader

0   libsystem_kernel.dylib          0x95af37d2 mach_msg_trap + 10

1   libsystem_kernel.dylib          0x95af2cb0 mach_msg + 68

2   com.apple.CoreFoundation        0x98c4fcc9 __CFRunLoopServiceMachPort + 185

3   com.apple.CoreFoundation        0x98c556af __CFRunLoopRun + 1247

4   com.apple.CoreFoundation        0x98c54d6a CFRunLoopRunSpecific + 378

5   com.apple.CoreFoundation        0x98c54bdb CFRunLoopRunInMode + 123

6   com.apple.Foundation            0x97ac329a +[NSURLConnection(Loader) _resourceLoadLoop:] + 395

7   com.apple.Foundation            0x97b27318 -[NSThread main] + 45

8   com.apple.Foundation            0x97b2729b __NSThread__main__ + 1396

9   libsystem_c.dylib               0x9918b557 _pthread_start + 344

10  libsystem_c.dylib               0x99175cee thread_start + 34

Thread 5:

0   libsystem_kernel.dylib          0x95af60ee __workq_kernreturn + 10

1   libsystem_c.dylib               0x9918e04c _pthread_workq_return + 45

2   libsystem_c.dylib               0x9918de19 _pthread_wqthread + 448

3   libsystem_c.dylib               0x99175cca start_wqthread + 30

Thread 6:

0   libsystem_kernel.dylib          0x95af60ee __workq_kernreturn + 10

1   libsystem_c.dylib               0x9918e04c _pthread_workq_return + 45

2   libsystem_c.dylib               0x9918de19 _pthread_wqthread + 448

3   libsystem_c.dylib               0x99175cca start_wqthread + 30

Thread 7:

0   libsystem_kernel.dylib          0x95af60ee __workq_kernreturn + 10

1   libsystem_c.dylib               0x9918e04c _pthread_workq_return + 45

2   libsystem_c.dylib               0x9918de19 _pthread_wqthread + 448

3   libsystem_c.dylib               0x99175cca start_wqthread + 30

Thread 8:

0   libsystem_kernel.dylib          0x95af60ee __workq_kernreturn + 10

1   libsystem_c.dylib               0x9918e04c _pthread_workq_return + 45

2   libsystem_c.dylib               0x9918de19 _pthread_wqthread + 448

3   libsystem_c.dylib               0x99175cca start_wqthread + 30

Thread 9:

0   libsystem_kernel.dylib          0x95af60ee __workq_kernreturn + 10

1   libsystem_c.dylib               0x9918e04c _pthread_workq_return + 45

2   libsystem_c.dylib               0x9918de19 _pthread_wqthread + 448

3   libsystem_c.dylib               0x99175cca start_wqthread + 30

Thread 10:

0   libsystem_kernel.dylib          0x95af60ee __workq_kernreturn + 10

1   libsystem_c.dylib               0x9918e04c _pthread_workq_return + 45

2   libsystem_c.dylib               0x9918de19 _pthread_wqthread + 448

3   libsystem_c.dylib               0x99175cca start_wqthread + 30

Thread 11:

0   libsystem_kernel.dylib          0x95af60ee __workq_kernreturn + 10

1   libsystem_c.dylib               0x9918e04c _pthread_workq_return + 45

2   libsystem_c.dylib               0x9918de19 _pthread_wqthread + 448

3   libsystem_c.dylib               0x99175cca start_wqthread + 30

Thread 0 crashed with X86 Thread State (32-bit):

  eax: 0x818950b0  ebx: 0xac76a5d8  ecx: 0x9592966f  edx: 0x90000000

  edi: 0x8fe00000  esi: 0x00000000  ebp: 0xbfff8c88  esp: 0xbfff8c54

   ss: 0x00000023  efl: 0x00010282  eip: 0x994d3c0b   cs: 0x0000001b

   ds: 0x00000023   es: 0x00000023   fs: 0x00000000   gs: 0x0000000f

  cr2: 0x8fe00000

Logical CPU: 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:56:29.617

1.  启用 NSZombie (Product->Edit Scheme->Diagnostics)
2.  添加异常断点（Cmd-6，然后按左下角的+按钮）

之后你应该有更好的堆栈跟踪

# nservicebus - 是否可以将 NServiceBus 与 Visual Studio Express 或Sharp Develop 一起使用？

> ID：12697289
> 
> 赞同：0
> 
> 时间：2012-10-02T19:53:14.923
> 
> 标签：nservicebus, visual-studio-express, sharpdevelop

是否可以将 NServiceBus 与 Visual Studio Express 或Sharp Develop 一起使用？

我想评估产品，并且更喜欢在免费的开发环境中工作。

部分解决方案也是相关的。

编辑

该文档基于与 VS express 不兼容的 Visual Studio 插件。是否有关于在没有插件的情况下开发服务的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:58:46.720

是的，NSB 不需要任何特殊工具。

# jquery - $.getJSON 和 Google Maps API V3 的问题

> ID：12697290
> 
> 赞同：0
> 
> 时间：2012-10-02T19:53:17.313
> 
> 标签：jquery, google-maps, getjson, jsfiddle

谁能解释我在这里做错了什么？我正在使用 jQuery $.getJSON 和谷歌地图，我都是新手。最初我使用的是标准 JavaScript，但决定使用 jQuery，因为 XMLHttpRequest 在 Chrome 或 jsfiddle 中不起作用，据我了解，我不必担心使用 .$getJSON 的这些问题，但是我现在必须重建我的代码在 jQuery 中正常工作。

```
 <!DOCTYPE html>
    <html> 
    <head> 
      <meta http-equiv="content-type" content="text/html; charset=UTF-8" /> 
      <title>Google Maps Multiple Markers - jQuery JSON</title> 
      <script src="http://maps.google.com/maps/api/js?sensor=false" 
              type="text/javascript"></script>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
      <script type="text/javascript" src="js/jquery.ui.map.js"></script>
    </head> 
    <body>
      <div id="map_canvas" style="width: 800px; height: 600px;"></div>

      <script type="text/javascript">
          $(function(){
    $('#map_canvas').gmap().bind('init', function(){
        $.getJSON('http://www.artectodesignstudios.com/RSSData.txt', function(data){
            $.each(data.title, function(i, marker){
                $('#map_canvas').gmap('addMarker',{
                    'position': new google.maps.LatLng(marker[i]["geo:lat"], marker[i]["geo:long"]),
                    'bounds':true
            }).click(function(){
                $('#map_canvas').gmap('openInfoWindow', {'content': marker.content}, this);
            });

           });
        });
    });
});
    <script>
        </body>
        </html> 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T21:32:59.040

您需要处理您的 url 字符串，因为它不起作用。我建议你从一些简单的东西开始，比如（[http://jquery-ui-map.googlecode.com/svn/trunk/demos/json/demo.json](http://jquery-ui-map.googlecode.com/svn/trunk/demos/json/demo.json)），然后使用 JSON 格式来编辑你的测试数据。来自您想要的 [http://www.artectodesignstudios.com/RSSData.txt](http://www.artectodesignstudios.com/RSSData.txt)请求的响应。希望能帮助到你。:)

# php - php preg_match_all 构造模式

> ID：12697291
> 
> 赞同：0
> 
> 时间：2012-10-02T19:53:18.747
> 
> 标签：php, regex, preg-match-all

我正在尝试构造`preg_match_all`以搜索在以 开头`[$_`和结尾的字符串中找到的所有值`_$]`，并将找到的值存储在数组中。

因此，在以下示例中：

```
$str = "I have a [$_dog_$], a [$_cat_$], but not a ferret.";
preg_match_all($regex_pattern, $str, $normalPets); 
```

`$normalPets`应该包含`[$_dog_$]`和`[$_cat_$]`。

这是`$regex_pattern`为了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:58:01.677

应该：

```
$regex_pattern = '/\[\$_.+_\$\]/U'; 
```

# python - 检测反射 DLL 注入

> ID：12697292
> 
> 赞同：22
> 
> 时间：2012-10-02T19:53:22.300
> 
> 标签：python, c, windows, delphi, winapi

在过去的几年里，恶意软件（以及一些渗透测试工具，如 Metasploit 的 Meterpreter 有效负载）已经开始使用[反射 DLL 注入 (PDF)](http://www.harmonysecurity.com/files/HS-P005_ReflectiveDllInjection.pdf)将 DLL 加载到进程的内存中。好处是文件永远不会写入磁盘并且很难检测到。我看到的许多例子都是基于[Joachim Bauch 的工作](http://www.joachim-bauch.de/2012/04/09/memorymodule-0-0-3-released/)。

然而，在[DEF CON 20 上，Andrew King 证明他能够使用反射 DLL injection 检测 DLL 的注入](https://vimeo.com/38371656)。他的演讲名为“ [Detecting Reflective Injection](https://www.defcon.org/html/defcon-20/dc-20-speakers.html#King) ”。~~不幸的是，他没有发布源代码（他当然没有义务这样做）。~~

> **更新**：显然我错过了，但安德鲁几年前做了开源这项工作：[https ://github.com/aking1012/dc20](https://github.com/aking1012/dc20)

此外，一个名为“ [Antimeter](http://www.mertsarica.com/antimeter-tool/) ”的工具可以在使用反射dll注入加载时检测到meterpreter引擎。再次，闭源。

我知道 Andrew King 的工具和 Antimeter 都是用 Python 编写的，并且使用 pydbg/pydasm 来枚举正在运行的可执行文件的内存。

有没有人愿意分享一些通用的源代码（Python、C、Delphi 或其他）来演示如何检测反射 DLL 注入？有内存取证工具可以分析内存转储并找到它，但我希望在正在运行的系统上执行应用程序（就像 antimeter 一样）并找到反射注入 DLL 的进程。

如果您有兴趣了解反射 DLL 注入的工作原理，有一些[用 Delphi 编写的开源代码](https://github.com/dsplayer/memorymodule/)展示了如何做到这一点。

**更新**：我进行了测试，我可以在没有管理员权限的情况下（并且作为普通用户）反射性地注入 DLL，但当然作为用户，我只能注入以相同完整性级别运行的进程（以及在我的会话中）......但是仍然涵盖 Office 套件、Internet Explorer 等应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T13:07:41.450

挂钩 VirtualProtect API 怎么样。因为加载自身的 DLL 肯定会在其内存代码范围内设置执行。这是因为（正如您所提到的）他们使用用户访问权限，因此他们必须使用进程用户空间 API。

```
NTSYSAPI NTSTATUS NTAPI ZwProtectVirtualMemory(
    IN HANDLE ProcessHandle,
    IN PVOID *  BaseAddress,
    IN SIZE_T *     NumberOfBytesToProtect,
    IN ULONG    NewAccessProtection,
    OUT PULONG  OldAccessProtection 
); 
```

如果您在程序的一开始就挂钩，您可以过滤掉可疑的保护调用（启用代码执行的调用）。然后，我会在请求的页面前面扫描 PE 标头等，以了解它是一个可加载的模块...**注意：我认为常规 DLL 不会调用此功能，因为 LoadLibrary 在内核空间内处理此问题。正确的？待办事项：验证**

通常，PE 标头位于第一个可执行代码前面的 0x1000（4096）字节或一页。所以一个非常基本的方法可以是扫描“MZ”标签：

```
char* pe = ((char*)BaseAddress) - 0x1000;
if ((NewAccessProtection == PAGE_EXECUTE || ... ) & pe[0] == 'M' && pe[0] == 'Z')
{
    // do checks here
} 
```

如果您需要有关 API 挂钩的更多信息，请询问或阅读网络上的大量文章。另一个挂钩候选者是：FlushInstructionCache(...)。但我认为只有暴雪将它用于守望者反作弊模块，因为 x86 架构没有理由调用它。

... 只是一个想法，

将要

# php - HTTP Post 多个值数组 PHP

> ID：12697294
> 
> 赞同：-1
> 
> 时间：2012-10-02T19:53:41.180
> 
> 标签：php, mysql, arrays, http, post

我正在寻找这是否可能。

我希望使用 PHP 作为中间件将一组多个值发布到服务器。我有一个移动应用程序，用户将在其中完成问卷调查。我想在一个 api 调用中发布每个问题的问题、答案和日期。

是否可以发布和处理一组值。类似答案 = [[问题，答案，日期]，[问题，答案，日期]，[问题，答案，日期]，[问题，答案，日期]]

任何想法或最佳实践请在下面发布。

更新：如果可能的话，您可以提供一个示例或链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:00:53.310

你可以通过几种不同的方式来做到这一点。第一种方法是发布一个数组并像这样访问它：

```
foreach($_POST['answers'] as $answer){

    $thisQuestion = $answer['question'];
    $thisAnswer =   $answer['answer'];
    $thisDate =     $answer['date'];

    // Do something with this current Question/Answer/Date combo
} 
```

第二种方法是发送一个`json`字符串并在 PHP 中对其进行解码：

```
$answers = json_decode($_POST['answer']); 
```

您选择的方法实际上归结为最容易发送数据的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:58:17.307

检查这个 O'Really Array 的 PHP 手册。它真的对我使用数组进行编程有很大帮​​助。

[关联](http://oreilly.com/catalog/progphp/chapter/ch05.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T20:00:17.317

最快/最黑客的方法是在每组上放一个数字并以这种方式解析出来。换句话说，实际上不要传递数组，而是传递值：[question0,answer0,date0],[question1,answer1,date1] 等。其他选项包括为每个选项传递数组（我相信你可以这样做)，传递 JSON (www.json.org) 或数组的序列化，这有点复杂。希望这三个中的一个会有所帮助。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T20:15:18.420

是的，你绝对可以做到这一点。试试下面的代码片段：

```
<?php

if($_POST) {
    echo $_POST ['questions'][1];
    echo $_POST ['questions'][2];
    var_dump($_POST);
}

else {

?>

<form method="post">
    <input type = "text" name = "questions[2]">
    <input type = "text" name= "questions[1]">
    <input type="submit" name = "submit" value "Submit">
</form>

<?php
    }
?> 
```

现在，如果您`world`在第一个文本输入和`hello`第二个输入中提交，您将看到`helloworld`我回应它的方式。

甚至你可以自己设置这个数组***的索引***，你可以看到我已经设置了它。这是 $_POST 数组的 var_dump，让您更清楚：

```
array(2) {
  ["questions"]=>
  array(2) {
    [2]=>
    string(5) "world" 
    [1]=>
    string(5) "hello"
  }
  ["submit"]=>
  string(0) ""
} 
```

希望能消除您的困惑。根据您的需要修改它。快乐的编码伙伴:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T19:57:49.673

当然在 PHP 和 HTML 中你会做这样的事情：

```
<?
for($i=0;$i<10;$i++) {
    echo "<input type=text name='qa[$i][question]'>";
    echo "<input type=text name='qa[$i][answer]'>";
    echo "<input type=text name='qa[$i][date]'>";
}
?> 
```

但听起来您希望在没有浏览器的情况下发布值，您可以简单地手动构建您的发布字符串并使用 PHP 的 curl 支持。

通常，您将通过循环遍历可用值并调用`urlencode`以正确编码 POST 字符串来构造 POST 字符串。

```
<?
$poststr = "qa[0][question]=some+question&qa[0][answer]=some+anser&qa[0][date]=2012-10-02&qa[1][question]=another+question&qa[1][answer]=another+answer&qa[1][date]=2012-09-27";

$ch = curl_init();
curl_setopt ($ch, CURLOPT_URL, $url);
curl_setopt ($ch, CURLOPT_POST, 1);
curl_setopt ($ch, CURLOPT_POSTFIELDS, $poststr);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_exec ($ch);
curl_close ($ch);
?> 
```

然后获取值（对于上述任一方法）

```
<?
$answer_array = $_POST['qa'];
?> 
```

`$answer_array`将基本上格式化如下：

```
$answer_array = array(
   0 => array(
      "question"=>"some question",
      "answer"=>"some answer",
      "date"=>"2012-10-02"),
   1 => array(
      "question"=>"another question",
      "answer"=>"another answer",
      "date"=>"2012-09-27")
); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T20:09:51.880

我会让每个表单元素名称都像这样的数组

```
<input type='text' name='question[]' />
<input type='text' name='answer[]' />
<input type='text name='date[]'/> 
```

现在，您可以根据需要多次重复这些表单元素，并且每个值都将存储为数组中的一个位置。例如，如果您有 5 个问题，您可以访问第五个问题的值，例如：

```
<?php 
    $questions = $_POST['question];
    $fifth_question = $questions[4] //arrays start at position 0 so 4 would be the 5th position 
```

您还可以遍历每个表单元素数组并创建一个像上面请求的多维数组。那看起来像：

```
<?php
    $questions = $_POST[question'];
    $answers = $_POST['answer'];
    $date = $_POST['date'];
    $combined = array();

    for($i = 0; $i < count($questions); $i++_
    {
         $combined[] = array('question'=> $questions[$i], 
                             'answer'=>$answers[$i], 'date'=>$dates[$i]);
    } 
```

希望这有帮助。

# grails - 在 Grails GORM 中搜索域对象的子对象

> ID：12697295
> 
> 赞同：1
> 
> 时间：2012-10-02T19:53:44.940
> 
> 标签：grails, groovy, grails-orm

如何在 Groovy / Gorm 中正确编写此代码？

我有一个包含许多*Content的**PageComponent*域类。我想查看特定的*PageComponent*是否包含带有特定*键的**Content*。

 ***我以为我可以说：

```
def pageComponent = PageComponent.get(1);

if (pageComponent.contents.findByKey("textnode") {
  // update
} else {
  // insert
} 
```

目前，我正在使用它。不是很优雅...

```
def pageComponent = PageComponent.get(1);

def content = Content.withCriteria {
    eq "pageComponent.id", pageComponent.id
    eq "key", "textnode"
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T20:20:36.523

您还可以使用动态查找器：

```
Content.findByPageComponentAndKey(pageComponent, "textnode") 
```***

# svn - 我如何从记事本++连接到svn repo并签出文件

> ID：12697296
> 
> 赞同：0
> 
> 时间：2012-10-02T19:53:51.643
> 
> 标签：svn, notepad++

> **可能重复：**
> [将 SVN 与 Notepad++ 集成？](https://stackoverflow.com/questions/4544939/integrating-svn-with-notepad)

我如何从记事本++连接到svn repo并签出文件

[同样的问题也被问到这里](https://stackoverflow.com/a/12697061/1582805)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:48:43.383

[这是一个](http://www.incrediblejunior.com/npp_plugins/)将 Tortoise SVN 集成到 Notepad++ 中的插件。

实现此目的的另一种方法是使用[Explorer 插件](http://sourceforge.net/projects/npp-plugins/files/)，然后简单地将其显示在 Notepad++ 中，并在系统上安装 TortoiseSVN 后，右键单击任何文件或文件夹以更新/提交/恢复它...

您可以从 Notepadd++ 菜单添加它：`Plugins`> `Plugin Manage`> `Show Plugin Manager then select the`Explorer `plugin and click the`Install` 按钮。

# python - 有没有办法在 python 中读回随机种子？

> ID：12697299
> 
> 赞同：4
> 
> 时间：2012-10-02T19:54:10.897
> 
> 标签：python, random, seed

我知道如何在 python 中设置随机种子

`random.seed([x])`

设置种子后，有什么方法可以将其读回并找出传递给 seed() 函数的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T19:57:30.260

虽然 Python 的 Random (Mersenne Twister) 的底层算法是确定性的，但种子不会存储在实现的内存空间中的任何位置。如有必要，由调用者存储种子。

[http://docs.python.org/library/random.html#module-random](http://docs.python.org/library/random.html#module-random)

有关 Python 实现的更多信息（或用您自己的种子存储随机类覆盖它），请参阅：

[http://hg.python.org/cpython/file/0b650272f58f/Lib/random.py](http://hg.python.org/cpython/file/0b650272f58f/Lib/random.py)

和

[http://hg.python.org/cpython/file/0b650272f58f/Python/random.c](http://hg.python.org/cpython/file/0b650272f58f/Python/random.c)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T20:03:16.443

没有办法取回种子本身。种子用于更新随机数生成器的内部状态，并不直接存储在任何地方。

但是，有一种方法可以保存当前状态！random 模块基于 Mersenne Twister 伪随机数生成器，它是用 C 语言实现的（带有 _random 扩展模块）。你可以这样做：

```
import random
r = random.Random()
# Use the r object to generate numbers
# ...
curstate = r.__getstate__()
# Use it even more..
#
r.__setstate__(curstate) # Go back to previous state 
```

换句话说， random.Random() 对象可以被腌制，您可以使用腌制对象（或`__getstate__`/`__setstate__`方法直接）回到以前的状态。

# javascript - Javascript拆分不识别中间点

> ID：12697300
> 
> 赞同：2
> 
> 时间：2012-10-02T19:54:16.450
> 
> 标签：javascript, split, special-characters

我正在尝试根据中间点拆分字符串。由于某种原因，它无法识别它。我可以使用“管道”字符，所以我知道其他一切都在工作，但不是中间点。我需要避开中间点吗？如果是这样，怎么做？

Javascript

```
 var sTags = $(this).text();
    // alert(sTags);
    sSplitTags = sTags.split(' | ');
    // Split isn't recognizing the middot
    // var sSplitTags = sTags.split(' &middot; ');
    // var sSplitTags = sTags.split(' · ');
    // var sSplitTags = sTags.split(' &#183; ');
    alert(sSplitTags[0]); 
```

HTML

```
 <div>Upscale &middot; Gadget</div>
    <div>Expensive · Widget</div>
    <div>Expensive &#183; Widget</div> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T19:59:37.483

`' \267 '`应该是你要找的。Javascript 对特殊字符使用八进制编码，这与 html/css 编码语法不同。

这是一个带有漂亮查找表的网站：[http ://www.evotech.net/blog/2007/04/named-html-entities-in-numeric-order/](http://www.evotech.net/blog/2007/04/named-html-entities-in-numeric-order/)

-编辑-

ruak 提出了这个版本，`' \u00B7 '`它也同样有效。您会注意到页面上有一个十六进制代码列，中间点是`B7`. 在 css 中你会写`\00B7`，但在 javascript 中，我们需要通过在前面附加小 'u' 来限定这不是八进制，你最终会得到`\u00B7'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:17:18.283

当包含 JavaScript 代码的文档的字符编码已正确声明时，该代码可以正常工作。例如，当代码以 UTF-8 编码出现在一个整体以 UTF-8 编码的 HTML 文档中并且该编码被充分声明时，它就可以工作。对于外部 JavaScript 文件，应使用 HTTP 标头来声明编码。请参阅有关字符编码的 W3C 文档：http: [//www.w3.org/International/O-charset.en.php](http://www.w3.org/International/O-charset.en.php)

# javascript - Ajax 到 Spring MVC 控制器并返回

> ID：12697301
> 
> 赞同：0
> 
> 时间：2012-10-02T19:54:19.713
> 
> 标签：javascript, jquery, ajax, spring-mvc, modelandview

这是我正在寻找的所需流程：

1.  大数据（表）通过 javascript 函数传递给 Spring Controller。
2.  控制器处理数据。
3.  控制器返回一个新的 ModelAndView
4.  在屏幕上渲染这个新的 ModelAndView。

我正在尝试使用 Ajax 调用将数据发送到控制器。但是，返回的模型和视图最终会作为对 ajax 调用的响应，因此不会在屏幕上呈现。

有没有我可以避免这种行为的方法。或者，一种实现我正在寻找的流程的方法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:01:35.663

如果你想刷新整个页面，使用 AJAX 并没有带来任何好处。

如果您只想刷新页面的某些部分，那么您需要提供一个 JavaScript 回调函数，该函数将使用 AJAX 响应，并修改当前页面的 DOM。

# asp-classic - 复制 Volusion 网上商店以进行测试

> ID：12697309
> 
> 赞同：0
> 
> 时间：2012-10-02T19:54:51.913
> 
> 标签：asp-classic, volusion

我正在开发一个 Volusion 网店。我正在做一些自定义模板、设计更改并集成了一些漂亮的 JavaScript 库。但我想对网上商店的生产版本非常谨慎。如果其中一些设计更改出现严重错误，潜在客户也会看到这些错误。

Volusion 支持中心有以下文章：

> 有时您可能需要暂时关闭店面。例如，您可能需要通过导入更新您的产品线或进行大量设计更改——您可能不希望客户在您处理商店时浏览商店。暂时关闭您的商店：转到管理区域中的设置 > 维护。单击关闭我的商店。要在进行更改后重新打开商店，请单击打开我的商店。
> 
> 关闭商店不会妨碍您访问管理区域。商店关闭时，您会在店面顶部看到一条消息，说明商店目前对客户关闭，但您仍然可以浏览它。您店面的访问者将收到一条默认消息，说明该站点暂时关闭以进行维护，并将很快恢复在线。您可以通过单击在此处自定义您的维护消息来定制此消息。

可悲的是，这不是我想要的。我希望我的生产网店继续运行，同时我对副本进行一些设计更改，以便能够评估我的工作质量。如果我对此感到满意，我想将设计更改移至生产网络商店。

什么是实现这一目标的好方法？我一直在考虑从 FTP 服务器复制所有文件并尝试在本地 IIS 服务器上运行它们？但这似乎是很多工作，我不确定是否值得付出努力。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T10:28:27.467

您将无法简单地将文件从您的 FTP 区域复制到另一台服务器 - 它们不包含任何核心 Volusion 脚本，仅包含模板和上传的文件（产品图像等） - 您只需没有做任何事情的文件集合。

据我所知，这样做的唯一方法是为第二家商店支付 volusion 费用以用作临时站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:50:03.717

是的，不幸的是，您必须为第二家商店付费，如果您在网站上进行大量修改，这将非常有用。但话又说回来，它需要额外的费用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-04T02:02:32.653

澄清一下，volusion 是否允许您复制店面以在发布前进行更改以进行审核。我也在 shopify 做网站，他们允许这个功能。

# asp.net-mvc - Web API 模型绑定器不适用于 HttpPostedFileBase？

> ID：12697310
> 
> 赞同：5
> 
> 时间：2012-10-02T19:54:52.287
> 
> 标签：asp.net-mvc, asp.net-web-api

测试用于文件上传的 Web API，有一个简单的视图模型，如下所示：

```
public class TestModel {
    public string UserId {get;set;}
    public HttpPostedFileBase ImageFile {get;set;}
} 
```

在方法中使用：

```
[HttpPost]
public void Create(TestModel model) 
```

当我尝试将 multipart/form-data 编码的表单发布到操作时，我收到此异常：

```
System.InvalidOperationException: No MediaTypeFormatter is available to read an object of type 'TestModel' from content with media type 'multipart/form-data'.
   at System.Net.Http.HttpContentExtensions.ReadAsAsync[T](HttpContent content, Type type, IEnumerable`1 formatters, IFormatterLogger formatterLogger)
   at System.Net.Http.HttpContentExtensions.ReadAsAsync(HttpContent content, Type type, IEnumerable`1 formatters, IFormatterLogger formatterLogger)
   at System.Web.Http.ModelBinding.FormatterParameterBinding.ReadContentAsync(HttpRequestMessage request, Type type, IEnumerable`1 formatters, IFormatterLogger formatterLogger)
   at System.Web.Http.ModelBinding.FormatterParameterBinding.ExecuteBindingAsync(ModelMetadataProvider metadataProvider, HttpActionContext actionContext, CancellationToken cancellationToken)
   at System.Web.Http.Controllers.HttpActionBinding.<>c__DisplayClass1.<ExecuteBindingAsync>b__0(HttpParameterBinding parameterBinder)
   at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()
   at System.Threading.Tasks.TaskHelpers.IterateImpl(IEnumerator`1 enumerator, CancellationToken cancellationToken) 
```

这适用于默认的 MVC 模型绑定器，但显然不适用于 Web API。发现一些提到上传文件时不能使用视图模型，并且只是将数据分成两个调用。这对我不起作用，因为我需要发布其他字段才能对上传的文件进行实际操作。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T22:01:57.923

您可以编写自定义`MediaTypeFormatter`以方便您的场景，也可以使用`MultipartFormDataStreamProvider.FormData.AllKeys`集合手动将数据从请求中提取出来。这样，您可以在一个请求中同时发布文件和其他字段。

Mike Wasson 的一个很好的教程可以在这里找到：[http ://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T22:43:26.600

请参阅我的原始答案 [https://stackoverflow.com/a/12603828/1171321](https://stackoverflow.com/a/12603828/1171321)

基本上结合我的博客文章中的方法和 TryValidateProperty() 建议来维护模型验证注释。

编辑：我继续在博客文章中对我的代码进行了代码增强。我将很快发布这个更新的代码。这是一个简单的示例，它验证每个属性并允许您访问结果数组。只是一种方法的示例

```
public class FileUpload<T>
{
    private readonly string _RawValue;

    public T Value { get; set; }
    public string FileName { get; set; }
    public string MediaType { get; set; }
    public byte[] Buffer { get; set; }

    public List<ValidationResult> ValidationResults = new List<ValidationResult>(); 

    public FileUpload(byte[] buffer, string mediaType, string fileName, string value)
    {
        Buffer = buffer;
        MediaType = mediaType;
        FileName = fileName.Replace("\"","");
        _RawValue = value;

        Value = JsonConvert.DeserializeObject<T>(_RawValue);

        foreach (PropertyInfo Property in Value.GetType().GetProperties())
        {
            var Results = new List<ValidationResult>();
            Validator.TryValidateProperty(Property.GetValue(Value),
                                          new ValidationContext(Value) {MemberName = Property.Name}, Results);
            ValidationResults.AddRange(Results);
        }
    }

    public void Save(string path, int userId)
    {
        if (!Directory.Exists(path))
        {
            Directory.CreateDirectory(path);
        }
        var SafeFileName = Md5Hash.GetSaltedFileName(userId,FileName);
        var NewPath = Path.Combine(path, SafeFileName);
        if (File.Exists(NewPath))
        {
            File.Delete(NewPath);
        }

        File.WriteAllBytes(NewPath, Buffer);

        var Property = Value.GetType().GetProperty("FileName");
        Property.SetValue(Value, SafeFileName, null);
    }
} 
```

# postgresql - 使用 psql 的 \copy 命令时出现“没有这样的文件或目录”错误消息

> ID：12697314
> 
> 赞同：2
> 
> 时间：2012-10-02T19:55:08.633
> 
> 标签：postgresql

对于这个 psql 的 \copy 命令，我一直收到“没有这样的文件或目录”的错误消息：

`\copy household from '/home/kihong/hh.csv' with csv header;`

你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T06:37:12.580

如果我是你，我会将文件移动到不同的文件夹（这对我有用）。我尝试从桌面上传我的 CSV 文件并收到您收到的错误消息。同样正如 Craig Ringer 建议的那样，使用 copy 而不是 \copy。

以下是有关如何将数据从电子表格（Excel 或 OpenOffice Calc）加载到 postgreSQL 的分步说明：

将电子表格页面保存为 CSV 文件。首选方法是在 OpenOffice Calc 上打开电子表格并进行保存。在“导出到文本文件”窗口中，选择字符集为 Unicode (UTF8)、字段分隔符：“,”和文本分隔符“”。将显示消息说只保存活动工作表。注意：此文件必须保存在文件夹中，但不能保存在桌面上，并且必须以 UTF8 格式保存（默认的 postgreSQL 是 UTF8 编码的升级）。如果保存在桌面上，postgreSQL 将给出“拒绝访问”消息并且不会上传。

在 PostgreSQL 中，创建一个与电子表格具有相同列数的空表。

注意：在每一列上，列名必须相同，数据类型必须相同。另外，请记住字符随足够字段而变化的数据长度。

然后在 postgreSQL 上，在 SQL 窗口上，输入代码：

复制 "ABC"."def" 从 E'C:\\tmp\\blabla.csv' delimiters ',' CSV HEADER;

注意：这里 C:\\tmp 是保存 CSV 文件“blabla”的文件夹。“ABC”.“def”是在 postgreSQL 上创建的表，其中“ABC”是模式，“def”是表。然后按顶部的绿色按钮执行“执行查询”。当 CSV 表在每列的开头都有标题时，需要“CSV HEADER”。

如果一切正常，则不会显示错误消息，并且 CSV 文件中的表数据将被加载到 postgreSQL 表中。但如果出现错误信息，请执行以下操作：

如果错误消息表明特定列的数据太长，则增加列大小。这主要发生在字符和字符变化列上。然后再次运行“执行查询”命令。

如果错误消息表明数据类型与特定列不匹配，则更改 postgreSQL 表列上的数据类型以匹配 CSV 表中的数据类型。

# html - div 嵌套在代码中

> ID：12697317
> 
> 赞同：0
> 
> 时间：2012-10-02T19:55:21.053
> 
> 标签：html

我使用一系列`div`和`span`标签作为 CSS 样式的钩子，以突出显示我想在网络博客上发布的代码行的语法。每行都放在有序列表中它自己的列表元素上。

所以它可能看起来像这样，例如：

```
<div class="json">
    <ol>
    <li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li>
    <li class="li2"><div class="de2"> <span class="st0">&quot;files&quot;</span><span class="sy0">:</span><span class="br0">&#91;</span></div></li>
    <li class="li1"><div class="de1">  <span class="br0">&#123;</span></div></li>
    <li class="li2"><div class="de2">  <span class="st0">&quot;url&quot;</span><span class="sy0">:</span><span class="st0">&quot;http://www.blah.com&quot;</span><span class="sy0">,</span></div></li>
    <li class="li1"><div class="de1">  <span class="st0">&quot;lastModified&quot;</span><span class="sy0">:</span><span class="nu0">1348750586000</span></div></li>
    <li class="li2"><div class="de2">  <span class="br0">&#125;</span></div></li>
    <li class="li1"><div class="de1"> <span class="br0">&#93;</span></div></li>
    <li class="li2"><div class="de2"><span class="br0">&#125;</span></div></li>
    </ol>
</div> 
```

我想通过将标记放在标签之间来赋予标记额外的语义意义`code`，因为它实际上是代码行（尽管有额外的标记），例如

```
<code>
    <div class="json">
        <ol>
        <li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li>
        <li class="li2"><div class="de2"> <span class="st0">&quot;files&quot;</span><span class="sy0">:</span><span class="br0">&#91;</span></div></li>
        <li class="li1"><div class="de1">  <span class="br0">&#123;</span></div></li>
        <li class="li2"><div class="de2">  <span class="st0">&quot;url&quot;</span><span class="sy0">:</span><span class="st0">&quot;http://www.blah.com&quot;</span><span class="sy0">,</span></div></li>
        <li class="li1"><div class="de1">  <span class="st0">&quot;lastModified&quot;</span><span class="sy0">:</span><span class="nu0">1348750586000</span></div></li>
        <li class="li2"><div class="de2">  <span class="br0">&#125;</span></div></li>
        <li class="li1"><div class="de1"> <span class="br0">&#93;</span></div></li>
        <li class="li2"><div class="de2"><span class="br0">&#125;</span></div></li>
        </ol>
    </div>
</code> 
```

但是，`code`不能包含`div`每个 html5 w3c 验证服务的元素。那么我是否`code`完全放弃使用标签？或者我是否尝试在没有`div`' 的情况下重写所有内容？我不确定，因为在我的特殊用途中，`code`我为 CSS 语法高亮目的添加了额外的标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:05:17.347

为什么不直接使用`code`标签而不是`span`标签呢？我认为它们都是内联元素，所以应该没问题。

# php - 价值已发布，但 isset() 说不

> ID：12697319
> 
> 赞同：3
> 
> 时间：2012-10-02T19:55:24.830
> 
> 标签：php, isset

请参阅下面给出的代码。自从过去 5 个小时以来，我一直在与这段代码作斗争，以了解为什么 isset() 将条件评估为假，如果值发布的正是它应该发布的内容。如果我取消注释行号。- 4,5,6,7,8 并将其余代码从第 1 行放入。10 到 28 我可以看到 POSTED 值。任何人都可以通过任何指导或建议对此提供帮助。我会很感激的。

```
<?php
include 'dbconnection.php';
include 'functions.php';

// var_dump($_POST); what happens when you uncomment this line?

//sec_session_start();
 //  $email = $_POST['logemail'];
 //  $password = $_POST['p'];
//  echo $password;
//  echo $email;
 // Our custom secure way of starting a php session. 

if(isset($_POST['logemail'], $_POST['p'])) { 
   $email = $_POST['logemail'];
   $password = $_POST['p']; // The hashed password.
   if(login($email, $password, $mysqli) === true) {
      // Login success
      //$url = 'mwq';
    //echo '<META HTTP-EQUIV=Refresh CONTENT="0; URL='.$url.'">';  
    echo $password;
    echo $email;

   } else {
      // Login failed
      header('Location: login.php?error=1');
   }
} else { 
   // The correct POST variables were not sent to this page.
   echo 'Invalid Request Data Not POSTED';
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:19:57.913

在没有看到表格的情况下，我只能推测会发生什么：

1.  您从一张白纸开始，表格显示，您输入用户名和密码并提交
2.  代码通过条件，然后执行登录
3.  `login(...) !== true`无论出于何种原因（密码错误或代码中的错误）的结果
4.  页面重定向到`login.php?error=1`。

现在，`$_POST`是空的并且`$_REQUEST`包含`array('error' => 1)`。也许不`login.php`应该重定向到自身，而是重定向回您显示表单的页面。

# jsf-1.2 - 关闭 Rich:modalPanel 后丢失 url 参数

> ID：12697322
> 
> 赞同：0
> 
> 时间：2012-10-02T19:55:26.963
> 
> 标签：jsf-1.2

我们有一个模态面板，用户可以在上面上传图像。图片上传不适用于 ajax 提交，所以我们使用 h:commandLink 提交。不幸的是，这导致我们的 url 参数消失。目前视图看起来像这样。

```
 <rich:modalPanel domElementAttachment="parent" id="profilePanel" styleClass="popUp" resizeable="false" moveable="false" autosized="true" zindex="200" top="-10">
        <h:form enctype="multipart/form-data" id="profilePanelFormId">
            <k:box title="Edit Advocacy Profile" width="width6x" wantFocus="true">

                <s:div id="profilePanelForm">
                    <rich:messages rendered="#{messagesUtil.errorsExist}"/>
                    <a4j:include viewId="/panel/advocacy/advocateProfileEdit.xhtml"/>
                </s:div>

                <h:commandLink id="cancel" immediate="true" value="Cancel" action="#{advocateManager.cancelEditCommitment}" styleClass="button cancel" tabindex="100">
                    <f:param name="confirmationCode" value="3C5VNP5"/>
                </h:commandLink>
                <h:commandLink id="save" value="Save" action="#{advocateManager.saveCommitment}" styleClass="button submit" tabindex="101">
                    <f:param name="confirmationCode" value="3C5VNP5"/>
                </h:commandLink>

            </k:box>
        </h:form>
    </rich:modalPanel> 
```

但是当您单击取消或保存时的网址是：view.html 而不是 view.html?confirmationCode=3C5VNP5&conversationId=x 就像我期望的那样。

有谁知道为什么这不起作用或可以做些什么来解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:20:17.227

您做了一个解决方法，导致整个页面重新加载......更好地修复richfaces的文件上传，而不是通过管理请求的页面参数来解决这个问题。

# java - Web 服务响应包含无效的 XML 字符

> ID：12697323
> 
> 赞同：3
> 
> 时间：2012-10-02T19:55:30.507
> 
> 标签：java, web-services, axis

我的应用程序正在连接到 Web 服务 rpc/encoded。我使用轴 1.4。当 web 服务发送响应时，它会发送一个无效字符，然后是一个异常：

```
http://xml.apache.org/axis/}stackTrace:org.xml.sax.SAXParseException: 
  An invalid XML character (Unicode: 0x3) was found in the element content of the document. 
```

xml 编码为“ISO-8859-1”。我认为这就是问题所在。

我的问题是：我可以在我的应用程序中进行任何配置来接受这个无效字符吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:42:32.500

“我的应用程序正在连接到 Web 服务 rpc/encoded。”

这就是问题所在。该服务是不符合 WS-I 的“rpc/encoded”。开发人员在过去某个时候经过激烈讨论后决定[不“修复”此错误](https://issues.apache.org/jira/browse/AXIS-2025)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T13:36:36.520

我解决了在 org.apache.axis.handlers.LogHandler 中放置一个方法来搜索和销毁非法字符的问题，然后再解析 xml 响应中的内容。

[创建自己的 LogHandler](http://wiki.apache.org/ws/FrontPage/Axis/AxisClientConfiguration/ViewSOAPMessages)

[查找和销毁非法字符的方法](http://blog.mark-mclaren.info/2007/02/invalid-xml-characters-when-valid-utf8_5873.html)

在新 LogHandler 的 logMessages 方法中放入以下内容： `private void logMessages(MessageContext msgContext) throws AxisFault { ... msgContext.setResponseMessage(new Message( **stripNonValidXMLCharacters**(((Message) msgContext .getResponseMessage()).getSOAPPartAsString()))); ... }`

# scala - 如何在 Scala 中将运行时工厂对象用于半环实现？

> ID：12697326
> 
> 赞同：3
> 
> 时间：2012-10-02T19:55:49.587
> 
> 标签：scala, type-conversion, factory

我正在尝试在 Scala 中对代数半环进行建模。我遇到了类型转换问题，这使得我无法在 Scala 中做我想做的事情。我希望有人可以指导我了解我误解的 Scala 打字系统方面。

（请耐心等待这个问题的长时间设置。我已经尽可能地减少了它。）

半环是一组项目，在其上定义了二进制加法 (+) 和乘法 (*) 运算符及其标识元素，分别称为零和一。例如，整数半环定义在整数上，其中 + 和 * 是算术的标准运算，零和一个是整数 0 和 1。一个更奇特的例子是布尔半环，它是在值 True 和 False 上定义的，其中+是逻辑或，*是逻辑与，零是假，一是真。

为了对此建模，我定义了一个特征，该特征指定了适当的二元运算符。

```
trait SemiringElement {
  /**
   * The element type
   */
  type E
  /**
   * The type returned by the the addition and multiplication operators
   */
  type R <: SemiringElement
  val value: E

  def +(that: R): R

  def *(that: R): R

  override def toString = value.toString
} 
```

案例类实例化特定半环的元素。例如，布尔半环看起来像这样。

```
case class BooleanSemiringElement(init: Boolean) extends SemiringElement {
  type E = Boolean
  type R = BooleanSemiringElement
  val value = init

  def +(that: BooleanSemiringElement#R) = BooleanSemiringElement(value || that.value)

  def *(that: BooleanSemiringElement#R) = BooleanSemiringElement(value && that.value)
} 
```

我还有一个 Semiring 特征，它指定零和一个元素。

```
trait Semiring {
  type E <: SemiringElement
  /**
   * The addition identity
   */
  val zero: E
  /**
   * The multiplication identity
   */
  val one: E
} 
```

特定的半环对象返回相应类型的零和一元素。

```
object BooleanSemiring extends Semiring {
  type E = BooleanSemiringElement

  val zero = BooleanSemiringElement(false)
  val one = BooleanSemiringElement(true)
} 
```

Semiring 对象本质上是工厂单例，它们知道如何返回适当类型的标识元素。

我希望能够编写通常与半环元素一起使用的算法。我使用 Semiring 工厂对象是为了能够在运行时而不是编译时指定特定的半环。例如，假设我有一个对象维护字符串和半环元素之间的映射。

```
class ElementMap(s: Semiring) {
  val m = mutable.Map[String, SemiringElement]()
} 
```

如果我用这样的调用实例化它：

```
val x = new ElementMap(BooleanSemiring) 
```

我希望 xm 成为 String->BooleanSemiringElement 映射。问题是我实际上是一个 String->SemiringElement 映射。

```
scala> val x = new ElementMap(BooleanSemiring)
x: ElementMap = ElementMap@46cf97b
scala> x.m
res2: scala.collection.mutable.Map[String,SemiringElement] = Map()
scala> x.m("one") = BooleanSemiring.one
scala> x.m("one") + BooleanSemiring.one
<console>:12: error: type mismatch;
 found   : BooleanSemiring.one.type (with underlying type BooleanSemiring.BooleanSemiringElement)
 required: _1.R where val _1: SemiringElement
              x.m("one") + BooleanSemiring.one
                                       ^ 
```

如果我愿意在编译时而不是运行时指定类型，我可以使元素类型成为通用类型，如下所示：

```
class ElementMap[BooleanSemiring]... 
```

但是我需要一个工厂方法来创建所有不同类型的 ElementMap 对象。将工厂智能放入 Semiring 特质中在架构上更有意义。我想说的是这样的：

```
class ElementMap(s: Semiring) {
  val m = mutable.Map[String, s.E]()
} 
```

即：创建从字符串到提供给构造函数的 Semiring 对象返回的元素类型 E 的映射。我不知道该怎么做。我尝试了各种语法技巧和隐式转换都无济于事。

有没有办法编写一个在运行时配置有 Semiring 构造函数参数的 ElementMap，还是我采取了错误的方法？我是 Scala 的新手，并试图以 Scala 风格的方式做事。我觉得我在这里把自己画到了一个角落里，但我不确定错误到底在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:46:06.127

您是否尝试过将特定类型捕获`s`为类型参数？

```
scala> class ElementMap[S <: Semiring](s: S) {
     |   val m = collection.mutable.Map[String, S#E]()
     | }
defined class ElementMap

scala> val x = new ElementMap(BooleanSemiring)
x: ElementMap[BooleanSemiring.type] = ElementMap@6544c984

scala> x.m("one") = BooleanSemiring.one

scala> x.m("one") + BooleanSemiring.one
res0: BooleanSemiringElement = true 
```

您可以对元素类型执行类似的操作：

```
scala> class ElementMap[SE <: SemiringElement](s: Semiring { type E = SE }) {
     |   val m = collection.mutable.Map[String, SE]()
     | }
defined class ElementMap

scala> val x = new ElementMap(BooleanSemiring)
x: ElementMap[BooleanSemiringElement] = ElementMap@4cf353e5

scala> x.m("one") = BooleanSemiring.one

scala> x.m("one") + BooleanSemiring.one
res1: BooleanSemiringElement = true 
```

您的版本的问题在于您丢弃了所有关于的类型信息`s`——从 . 的角度来看`ElementMap`，它只是一个`Semiring`.

（作为旁注，通过类型类的临时多态性可能是在 Scala 中解决此问题的一种更自然的方法。例如，参见[Scalaz 7](http://code.google.com/p/scalaz/)表示类似代数结构的方式。）

# objective-c - 带有连接路径前缀的 Objective-C #import

> ID：12697329
> 
> 赞同：1
> 
> 时间：2012-10-02T19:56:00.923
> 
> 标签：objective-c, c-preprocessor

我目前有条件工作`#import`：

```
#ifdef MY_IMPORT_PREFIX
#import "MyFramework/MyHeader.h"
#else
#import "MyHeader.h"
#endif 
```

我在 XCode 项目中定义 MY_IMPORT_PREFIX 的地方如下： ![XCode 项目中的预处理器宏](../Images/1ba10ce61b99ef29283a98560e72f129.png)

但我想尝试将其优化为一行，将 MY_IMPORT_PREFIX 的值（通常是 undef 但可能已定义）连接到我要导入的文件。

我尝试了以下方法无济于事：

```
#define MY_CONCAT_2(c,d) c ## d
#define MY_CONCAT(a,b) MY_CONCAT_2(a,b)

#import MY_CONCAT(MY_IMPORT_PREFIX, MyHeader.h) 
```

有人愿意挑战吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:06:19.947

如果您只是想缩短您必须编写的内容，也许您可​​以将这些`#ifdef...`行放在一个单独的头文件中，然后将该文件导入您要`MyHeader.h`使用条件前缀导入的所有源文件中。

# ios - iOS 6 和 iAds 发出太多警告

> ID：12697330
> 
> 赞同：3
> 
> 时间：2012-10-02T19:56:01.703
> 
> 标签：ios, xcode, warnings, iad

这是我的 iAd 代码，我收到了关于

```
setRequiredContentSizeIdentifiers - deprecated in iOS 6
ADBannerContentSizeIdentifier320x50 - deprecated in iOS 4.2
ADBannerContentSizeIdentifier480x32 - deprecated in iOS 4.2
setCurrentContentSizeIdentifier - deprecated in iOS 6
ADBannerContentSizeIdentifier480x32 - deprecated in iOS 4.2 
```

我该如何解决这个问题，所以没有警告。

```
- (int)getBannerHeight:(UIDeviceOrientation)orientation
{
    if (UIInterfaceOrientationIsLandscape(orientation)) {
        return 32;
    } else {
        return 50;
    }
}

- (int)getBannerHeight
{
    return [self getBannerHeight:[UIDevice currentDevice].orientation];
}

- (void)createAdBannerView
{
    Class classAdBannerView = NSClassFromString(@"ADBannerView");
    if (classAdBannerView != nil) {
        self->adView = [[classAdBannerView alloc]
                              initWithFrame:CGRectZero];
        [adView setRequiredContentSizeIdentifiers:[NSSet setWithObjects:
                                                          ADBannerContentSizeIdentifier320x50,
                                                          ADBannerContentSizeIdentifier480x32, nil]];
        if (UIInterfaceOrientationIsLandscape([UIDevice currentDevice].orientation)) {
            [adView setCurrentContentSizeIdentifier:
             ADBannerContentSizeIdentifier480x32];
        } else {
            [adView setCurrentContentSizeIdentifier:
             ADBannerContentSizeIdentifier320x50];
        }
        [adView setFrame:CGRectOffset([adView frame], 0,
                                             -[self getBannerHeight])];
        [adView setDelegate:self];

        [self.view addSubview:adView];        
    }
}

- (void)fixupAdView:(UIInterfaceOrientation)toInterfaceOrientation
{
    if (adView != nil) {
        if (UIInterfaceOrientationIsLandscape(toInterfaceOrientation)) {
            [adView setCurrentContentSizeIdentifier:
             ADBannerContentSizeIdentifier480x32];
        } else {
            [adView setCurrentContentSizeIdentifier:
             ADBannerContentSizeIdentifier320x50];
        }
        [UIView beginAnimations:@"fixupViews" context:nil];
        if (bannerIsVisible) {
            CGRect adBannerViewFrame = [adView frame];
            adBannerViewFrame.origin.x = 0;
            adBannerViewFrame.origin.y = 0;
            [adView setFrame:adBannerViewFrame];
            CGRect contentViewFrame = _contentView.frame;
            contentViewFrame.origin.y =
            [self getBannerHeight:toInterfaceOrientation];
            contentViewFrame.size.height = self.view.frame.size.height -
            [self getBannerHeight:toInterfaceOrientation];
            _contentView.frame = contentViewFrame;
        } else {
            CGRect adBannerViewFrame = [adView frame];
            adBannerViewFrame.origin.x = 0;
            adBannerViewFrame.origin.y =
            -[self getBannerHeight:toInterfaceOrientation];
            [adView setFrame:adBannerViewFrame];
            CGRect contentViewFrame = _contentView.frame;
            contentViewFrame.origin.y = 0;
            contentViewFrame.size.height = self.view.frame.size.height;
            _contentView.frame = contentViewFrame;
        }
        [UIView commitAnimations];
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T20:26:19.617

您正在使用**已弃用**的方法/符号。

弃用意味着方法/符号仍然存在，并且通常仍然有效，但它们可能会在未来的 iOS 版本中被删除。

官方文档总是列出不推荐使用的方法/符号，并且通常提供新的方法/符号。

所以我不想这么说，作为一个答案，但只是**阅读文档**。

关于 iOS 6 的警告并不算太糟糕，因为 iOS 6 是相当新的。
但如果可以的话，也要修复它们。已完成的事情已经完成。

但似乎您也在使用在 iOS 4.2 上已弃用的方法/符号！
这实际上是一个问题。iOS 4 支持目前正在下降，因此您的实际代码可能无法长时间运行。

因此，请再次阅读文档，了解新方法并修复代码。

例如：

```
ADBannerContentSizeIdentifier320x50 - deprecated in iOS 4.2 
```

在[文档](http://developer.apple.com/library/ios/#documentation/userexperience/Reference/ADBannerView_Ref/Reference/Reference.html)中，您可以阅读以下内容：

> ADBannerContentSizeIdentifier320x50 表示横幅视图的大小为 320 点乘 50 点。此尺寸在 iPhone 上用于纵向广告。**（已弃用。改用 ADBannerContentSizeIdentifierPortrait。）**适用于 iOS 4.0 及更高版本。在 iOS 4.2 中已弃用。在 ADBannerView_Deprecated.h 中声明。

因此`ADBannerContentSizeIdentifier320x50`，只需使用`ADBannerContentSizeIdentifierPortrait`.
对`ADBannerContentSizeIdentifier480x32`. 改为使用`ADBannerContentSizeIdentifierLandscape`。

这样您就安全了，您将不再收到有关此的警告。

然后简单地对其他符号执行相同的操作。

**编辑**

* * *

如您的评论所述，`ADBannerContentSizeIdentifierPortrait`并且`ADBannerContentSizeIdentifierLandscape`在 iOS 6 上也已弃用。

这与 和 的弃用`setCurrentContentSizeIdentifier`有关`setRequiredContentSizeIdentifiers`。

Apple 建议不要再使用这种方法，而是使用 iOS 的**自动调整大小**功能。

# objective-c - NSScrollView 左右跳动，在底部添加 padding

> ID：12697335
> 
> 赞同：2
> 
> 时间：2012-10-02T19:56:10.097
> 
> 标签：objective-c, macos, cocoa, nsscrollview

我在 Mac 应用程序中有一个 NSScrollView，我正在迭代地添加（相同的）子视图。但是，当窗口出现时，滚动视图的底部是可见的，但是，滚动条位于顶部。向上或向下滚动最初会导致滚动视图快速跳转到某个位置，然后它会像往常一样平滑滚动。此外，它似乎在底部添加了一个大的空白区域，但这可能只是我的代码。

```
 for (int i=0; i<[userList count]; i++) {  ///user list is an array of ID strings
    PaneViewController *pane = [[PaneViewController alloc] initWithNibName:@"PaneViewController" bundle:nil];
    [pane setPaneID:[userList objectAtIndex:i]];
    pane.view.frame = CGRectMake(0, (i*pane.view.frame.size.height), pane.view.frame.size.width, pane.view.frame.size.height);
    [self.scrollView.contentView addSubview:pane.view];
}
[self.scrollView.documentView setFrame:CGRectMake(0, 0, self.scrollView.frame.size.width, ([userList count])*125)]; /// 125 is the height of the paneView
[self.scrollView.verticalScroller setFloatValue:0.0]; 
```

当该行显示相同的行为

```
[self.scrollView.contentView addSubview:pane.view]; 
```

改为

```
[self.scrollView.documentView addSubview:pane.view]; 
```

最后，虽然我没有测试它，因为视图是相同的，但我的直觉告诉我这将从下到上填充，即，`[userList objectAtIndex:0]`将分配给列表底部的视图，因为 Cocoas 古怪的坐标系统。这是真的吗？如果是这样，我该如何解决？

PS - 滚动视图在 Interface Builder 中设置，如果这很重要。此外，出于多种原因，使用 NSListView 而不是 NSScrollView 并不是一个真正的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T16:25:14.527

*   你在哪里初始化上面的代码？
*   您是否尝试过 setFlipped:YES 或覆盖 isFlipped: 并在所有自定义视图上返回*YES ？*
*   更换你的

    > [self.scrollView.verticalScroller setFloatValue:0.0];

和

```
[self.scrollView reflectScrolledClipView:self.scrollView.contentView]; 
```

*   您想将子视图添加到文档视图。
*   您是否在视图上尝试过 setAutoResizeMask？

# python - 为什么函数对象在 python 中评估为 True？

> ID：12697338
> 
> 赞同：3
> 
> 时间：2012-10-02T19:56:27.407
> 
> 标签：python, function, function-pointers

在 python 中，进行如下构造是有效的：

```
def a(): 
    return 0

if a: 
    print "Function object was considered True"
else:  
    print "Function object was considered False" 
```

我想问一个函数指针被评估为 True 的逻辑是什么。

为什么要在语言中插入这种结构？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T19:59:43.663

很多东西都`True`在 Python 中进行评估。从[有关布尔运算符的文档中](http://docs.python.org/reference/expressions.html#boolean-operations)：

> 在布尔运算的上下文中，以及当控制流语句使用表达式时，以下值被解释为 false：`False`, `None`, 所有类型的数字零，以及空字符串和容器（包括字符串、元组、列表、字典、集合和冻结集）。所有其他值都被解释为 true。

Python 中的函数和很多东西一样，都是*对象*，而不是空的。因此，在布尔上下文中，它们评估为 True。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T20:00:17.720

评估“真实性”的规则在 Python 文档中关于[Truth Value Testing](http://docs.python.org/library/stdtypes.html#truth-value-testing)的章节中。

特别注意

> 所有其他值都被认为是真的——所以许多类型的对象总是真的。

综上所述; 函数对象始终为真。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T20:00:06.953

python 中为 False 的对象列表：

*   `None`
*   `[]`
*   `{}`
*   `empty set`
*   `empty frozenset`
*   `False`
*   `0`
*   `0.0`
*   `0L`
*   `0j`
*   空的`defaultdict`
*   `Classes`已实现`__nonzero__()`方法并返回虚假值的，否则`__len__()`将被调用。在 python 3x中`__bool__()`替换了`__nonzero__()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-21T14:17:34.137

在@Magnus Hoff 链接到的真值测试中，我发现最有启发性的陈述是：

> 默认情况下，除非对象的类定义了返回 False的 _ *bool* _() 方法或返回零的 _ *len _() 方法，否则对象被认为是 true，当与对象一起调用时。*

我尝试定义自己的类，似乎 _ *bool* _() 优先于 _ *len* _()，这是有道理的：

```
class Falsish(object):
    def __init__(self):
        self.val = "False, even though len(self) > 0"
    def __bool__(self):
        return False
    def __len__(self):
        return 2

class StillFalsish(object):
    def __init__(self):
        self.val = "False, even though len(self) > 0"
    def __len__(self):
        return 2
    def __bool__(self):
        return False

class Truish(object):
    def __init__(self):
        self.val = "True, even though len(self) = 0"
    def __bool__(self):
        return True
    def __len__(self):
        return 0

class StillTruish(object):
    def __init__(self):
        self.val = "True, even though len(self) = 0"
    def __len__(self):
        return 0
    def __bool__(self):
        return True

class NowFalsish(object):
    def __init__(self):
        self.val = "False, with no __bool__(), since len(self) = 0"
    def __len__(self):
        return 0

class NowTruish(object):
    def __init__(self):
        self.val = "True, with no __bool__(), since len(self) > 0"
    def __len__(self):
        return 2

class EvenThisIsTruish(object):
    pass

mybool1 = Falsish()
mybool2 = StillFalsish()
mybool3 = Truish()
mybool4 = StillTruish()
mybool5 = NowFalsish()
mybool6 = NowTruish()
mybool7 = EvenThisIsTruish()
if mybool1: print("mybool1 is true")
if mybool2: print("mybool2 is true")
if mybool3: print("mybool3 is true")
if mybool4: print("mybool4 is true")
if mybool5: print("mybool5 is true")
if mybool6: print("mybool6 is true")
if mybool7: print("mybool7 is true") 
```

上述代码的输出是：

```
mybool3 is true
mybool4 is true
mybool6 is true
mybool7 is true 
```

# python - 使用python进行作者关系分析

> ID：12697345
> 
> 赞同：1
> 
> 时间：2012-10-02T19:56:56.983
> 
> 标签：python, relationship

所以这是一个大问题：

我有一份各种出版物的作者和合著者名单。此列表可能如下所示：

```
[[['A','uni'],[['B','uni'],['C','uni'],['D','uni'],['E','uni']]],

[['E','uni'],[['A','uni'],['F','uni'],['G','uni']]]] 
```

因此，作者 A 与作者 B、C 和 D 合作了一个出版物，作者 E 与作者 A、F 和 G 合作了另一个出版物。

我需要的是一份所有作者的名单，即使他们只是被列为共同作者（B、C、D、F、G）以及他们与谁一起写了多少篇论文。因此，所有主要作者（A 和 E）都与他们的共同作者（A 与 B、C、D、E；E 与 A、F、G）一起工作，但论文的共同作者也一起工作（B 与 C、D、E还有 A 等等）。最重要的是，我需要知道他们一起工作了多少篇论文。

所以这个小例子的最终结果是：

```
[[['A','uni'],[['B','uni',1],['C','uni',1],['D','uni',1],['E','uni',2],['F','uni',1],['G','uni',1]]],

[['B','uni'],[['A','uni',1],['C','uni',1],['D','uni',1],['E','uni',1]]],

[['C','uni'],[['A','uni',1],['B','uni',1],['D','uni',1],['E','uni',1]]],

[['D','uni'],[['A','uni',1],['B','uni',1],['C','uni',1],['E','uni',1]]],

[['E','uni'],[['A','uni',2],['B','uni',1],['C','uni',1],['D','uni',1],['F','uni',1],['G','uni',1]]],

[['F','uni'],[['A','uni',1],['E','uni',1],['G','uni',1]]],

[['G','uni'],[['A','uni',1],['E','uni',1],['F','uni',1]]]] 
```

好吧，老实说，这有点令人困惑，但我希望你明白我的意思。（uni 条目代表作者工作的大学。可能仍包含其他信息，但这与此任务无关）

我有这个初始列表，我使用我编写的用于解析数据库的 python 脚本获得。我想创建一个图表，显示我和谁以及多久写一次。

我现在玩了一段时间，我只是找不到一个好的解决方案。我想我可以写出一些有用的东西，但它不会很好或没有效率并且非常耗时。那么有没有一种快速的、pythonic 的方法来解决这个问题呢？我的示例现在只有两个出版物，但我必须分析大约 10000 个出版物，其中一些有几百个共同作者......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:40:01.903

```
from collections import defaultdict

L = [[['A','uni'],[['B','uni'],['C','uni'],['D','uni'],['E','uni']]],
     [['E','uni'],[['A','uni'],['F','uni'],['G','uni']]]]

res = defaultdict(set)

for x, y in L:
    x = [tuple(x)]
    y = map(tuple, y)
    row = x+y
    for i in row:
        print set(row)
        res[i] |= set(row)

for k, v in res.items():
    v.remove(k)
    print k, list(v) 
```

输出：

```
('B', 'uni') [('A', 'uni'), ('D', 'uni'), ('E', 'uni'), ('C', 'uni')]
('A', 'uni') [('B', 'uni'), ('F', 'uni'), ('D', 'uni'), ('G', 'uni'), ('E', 'uni'), ('C', 'uni')]
('F', 'uni') [('A', 'uni'), ('G', 'uni'), ('E', 'uni')]
('D', 'uni') [('A', 'uni'), ('B', 'uni'), ('E', 'uni'), ('C', 'uni')]
('G', 'uni') [('A', 'uni'), ('E', 'uni'), ('F', 'uni')]
('E', 'uni') [('B', 'uni'), ('A', 'uni'), ('F', 'uni'), ('D', 'uni'), ('G', 'uni'), ('C', 'uni')]
('C', 'uni') [('A', 'uni'), ('D', 'uni'), ('B', 'uni'), ('E', 'uni')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:44:17.920

您不需要数据库，但首先需要一些数据结构来保存和表示您的所有信息。我不会写完整的类，只写它们的重要属性。

```
class Author(object):
    name
    university        

class Publication(object):
    name
    date

class Authorship(object)
    author
    publication
    main_author(bool) 
```

接下来，您必须组织这些对象。Authors 和 Publications 应该是唯一的东西，因此如果您的数据集不超过数百 MB，您可以将它们分别放在普通字典中。它们必须由唯一属性索引。如果 author.name 还不够，请使用大学和作者姓名的元组，或者更好的生日或与作者相关的内容（如果有的话），因为大学可能会改变。

对于作者身份，您应该创建不同的索引，这样您就可以更快地搜索，而无需一直遍历整个列表。也许你想要一些 defaultdict(list)，由包含他们出版物的作者索引，否则另一个 defaultdict(list)，用出版物索引。注意保持一致性（重复，数据错误可能很残酷）。

之后，您*只需*遍历您的数据集并填充您的结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T20:47:16.797

我的版本：

```
from collections import defaultdict
from collections import Counter
from itertools import chain

L = [[['A', 'uni'], [['B', 'uni'], ['C', 'uni'], ['D', 'uni'], ['E', 'uni']]], [['E', 'uni'], [['A', 'uni'], ['F', 'uni'], ['G', 'uni']]]]

d = defaultdict(Counter)
for publication in L:
    authors = [tuple(a) for a in chain([publication[0]], publication[1])]
    for author in authors:
        d[author].update(authors)

for k, v in d.iteritems():
    print k, [(author[0], author[1], counter)
              for author, counter in v.iteritems() if author[0] != k[0]] 
```

输出：

```
('B', 'uni') [('A', 'uni', 1), ('D', 'uni', 1), ('E', 'uni', 1), ('C', 'uni', 1)]
('A', 'uni') [('B', 'uni', 1), ('F', 'uni', 1), ('D', 'uni', 1), ('G', 'uni', 1), ('E', 'uni', 2), ('C', 'uni', 1)]
('F', 'uni') [('A', 'uni', 1), ('G', 'uni', 1), ('E', 'uni', 1)]
('D', 'uni') [('A', 'uni', 1), ('B', 'uni', 1), ('E', 'uni', 1), ('C', 'uni', 1)]
('G', 'uni') [('A', 'uni', 1), ('E', 'uni', 1), ('F', 'uni', 1)]
('E', 'uni') [('B', 'uni', 1), ('A', 'uni', 2), ('F', 'uni', 1), ('D', 'uni', 1), ('G', 'uni', 1), ('C', 'uni', 1)]
('C', 'uni') [('A', 'uni', 1), ('D', 'uni', 1), ('B', 'uni', 1), ('E', 'uni', 1)] 
```

# php - PHP 使用 SOAP 上传 Dom XML

> ID：12697346
> 
> 赞同：0
> 
> 时间：2012-10-02T19:56:58.870
> 
> 标签：php, xml, web-services, soap

我想用soap每月将我的发票上传到远程服务器，但是上传以某种方式失败而没有错误消息。

我使用数据库中的 DomDocument生成 XML 文件*（发票） 。*然后我根据 XSD 对其进行验证，如果返回正常，我将启动 SOAP 请求。

远程 SOAP 服务器的文档说，首先我必须调用身份验证服务来识别我自己并获取会话 ID，然后我才能开始上传。但是上传不起作用，我没有收到错误消息。我对肥皂不熟悉，所以我现在不知道该怎么办。

我就是这样做的：

```
$xml = $doc->saveXML(); /*before this is a very long code which creates the XML*/
$xmlauth = new DomDocument();
$xmlauth = loadXML($xml);
if(!$xmlauth->schemaValidate('https://test.e-szamla.hu/apeh_xml.xsd')){
echo 'Error: <br />';
libxml_display_errors(); /*this is a function that formats the error code and saves it to a log file*/
}
else {
    try {
      $trace = '1';
      $url = 'https://test.e-szamla.hu/soap/AuthenticationService.wsdl';
      $client = new SoapClient($url, array('trace' => $trace));
      $params = array(
        'username' => 'hu-0000000x-x-xx',
        'password' => 'XXXXXXX'
      );
    }
    catch(exception $e){
      echo '<h2>Error in connection: </h2>';
      echo $e->getMessage();
    }
    try {
      $result = $client->startSession($params);
      $_SESSION['sessid'] = $result->sessionid;
      //echo $_SESSION['sessid'];
    }
    catch(exception $e) {
      echo '<h2>Something went wrong:</h2>';
      echo $e->getMessage();
    }
    try {
    $urlinv = 'https://test.e-szamla.hu/soap/InvoiceService.wsdl';
    $clientinv = new SoapClient($urlinv, array('trace' => $trace));
    $paramsinv = array('sessionid' => $_SESSION['sessid'], 'partner' => 'hu-xxxxxxxx-x-xx', 'xml' => $xmlauth);
    }
    catch(exception $err) {
      echo '<h2>ERROR:</h2>';
      echo $err->getMessage();
    }
    try {
      $resultinv = $clientinv->uploadInvoice($paramsinv);
      echo 'Uploaded with this session id: '. $_SESSION['sessid'];
    }
    catch(exception $err){
      echo '<h2>Something went wrong: </h2>';
      echo $err->getMessage();
    }
} 
```

XSD 和 WSDL URL 都是测试服务的真实 URL，这里是一个测试 XML：[https ://test.e-szamla.hu/samples/dijbekero.xml](https://test.e-szamla.hu/samples/dijbekero.xml)

这是文档中的示例：

**授权。服务**

```
$client = new SoapClient($url."AuthenticationService.wsdl", array('trace' => $trace));
$params = array(
"username" => "hu-12345678-1-90",
"password" => "12345678"
);
$result = $client->startSession($params);
$_SESSION["sessid"] = $result->sessionid; 
```

**发票服务**

```
$client = new SoapClient($url."InvoiceService.wsdl", array('trace' => $trace));
$xml = file_get_contents("samples/invoice.xml");
$params = array(
"sessionid" => $_SESSION["sessid"],
"partner" => "hu-00000000-2-00",
"xml" => $xml
);
$result = $client->uploadInvoice($params); 
```

我怎样才能使这项工作或至少得到一条错误消息。如您所见，我正在传递每个必需的变量，例如用户名、密码和合作伙伴 ID，而我唯一更改的是我没有从文件中加载 XML。

# c# - Microsoft.Expression.Controls 标注点锚点到控件

> ID：12697347
> 
> 赞同：5
> 
> 时间：2012-10-02T19:57:00.183
> 
> 标签：c#, wpf

有没有办法将 Callout 控件的 PointAnchor 设置为`Microsoft.Expression.Controls`WPF Control ，

我试过类似的东西

```
public static void PointMe(this Callout me,UIElement ui)
{
         Me.AnchorPoint = ????? // don't know how to get the ui coordinates
} 
```

![在此处输入图像描述](../Images/8d5158ecfb70fec92cc6cf9377524fdf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:29:32.567

有几种方法可以实现这一点。一种是将所有内容放在 a 中`Canvas`，然后`Callout`根据您想要将标注放置在旁边的控件的 x/y 画布坐标移动 。

一种更灵活的方法是使用[TransformToAncestor](http://msdn.microsoft.com/en-us/library/ms608865%28v=vs.100%29.aspx)方法来定位要将标注锚定到的控件相对于某个祖先元素的位置。在这种情况下，定位的最佳元素是根元素。

这是一个工作示例：

**XAML**

```
<Grid x:Name="LayoutRoot">
    <ed:Callout x:Name="MyCallout"
                Width="200"
                Height="100"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                AnchorPoint="0,1.5"
                CalloutStyle="Rectangle"
                Content="Callout"
                Stroke="Black" />

    <Button x:Name="LeftButton"
            Width="75"
            Margin="100,0,0,150"
            HorizontalAlignment="Left"
            VerticalAlignment="Bottom"
            Click="OnLeftButtonClick"
            Content="Left" />

    <Button x:Name="RightButton"
            Width="75"
            Margin="300,0,0,150"
            HorizontalAlignment="Left"
            VerticalAlignment="Bottom"
            Click="OnRightButtonClick"
            Content="Right" />

</Grid> 
```

**代码背后**

```
private void OnLeftButtonClick( object sender, RoutedEventArgs e )
{
    MoveCallout( LeftButton );
    e.Handled = true;
}

private void OnRightButtonClick( object sender, RoutedEventArgs e )
{
    MoveCallout( RightButton );
    e.Handled = true;
}

private void MoveCallout( FrameworkElement element )
{
    // find the position of the element to anchor against relative to the root object
    Point point = element.TransformToAncestor( LayoutRoot ).Transform( new Point( 0, 0 ) );

    // take into account the width of the anchor element
    double x = point.X + element.ActualWidth;

    // take into account the height of the anchor element and the callout
    // add a little wiggle room as well
    double y = point.Y - element.ActualHeight - MyCallout.ActualHeight - 10;

    MyCallout.Content = element.Name;

    // Move the callout to the new coordinates
    MyCallout.RenderTransform = new TranslateTransform( x, y );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:51:10.873

**注意：**根据 OP 的重新解释，即所需的结果是移动 AnchorPoint 而不是整个标注，我正在添加另一个答案，以便我的第一个答案可以在需要时留给其他人使用，因为它移动了标注。

* * *

似乎没有任何内置框架方法可以相对于屏幕上的另一个元素移动 Callout 的 AnchorPoint。

标注的锚点基于标注的上角和左角的*相对位置。*您可以通过计算标注与任何其他元素之间的距离来移动 AnchorPoint，然后进行一些数学运算以得出相对定位。以下*应该*有效：

**XAML**

```
<Window x:Class="so.ExpCallout.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ed="http://schemas.microsoft.com/expression/2010/drawing"
        Title="Callout Anchor Point"
        Width="625"
        Height="350"
        WindowStartupLocation="CenterScreen">

    <Grid x:Name="LayoutRoot">
        <ed:Callout x:Name="MyCallout"
                    Width="200"
                    Height="100"
                    Margin="200,50,0,0"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    AnchorPoint="0,1.5"
                    CalloutStyle="Rectangle"
                    Content="Callout"
                    Stroke="Black" />

        <Button x:Name="LeftButton"
                Width="100"
                Height="25"
                Margin="50,200,0,0"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Click="OnLeftButtonClick"
                Content="Left" />

        <Button x:Name="RightButton"
                Width="100"
                Height="25"
                Margin="450,200,0,0"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Click="OnRightButtonClick"
                Content="Right" />

    </Grid>

</Window> 
```

**代码背后**

```
using System.Windows;
using System.Windows.Media;

namespace so.ExpCallout
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void OnRightButtonClick( object sender, RoutedEventArgs e )
        {
            AdjustCalloutAnchor( RightButton );
            e.Handled = true;
        }

        private void OnLeftButtonClick( object sender, RoutedEventArgs e )
        {
            AdjustCalloutAnchor( LeftButton );
            e.Handled = true;
        }

        private void AdjustCalloutAnchor( FrameworkElement el )
        {
            // locate the positions of the callout and the element to point to
            Point calloutPoint = MyCallout.TransformToAncestor( LayoutRoot ).Transform( new Point( 0, 0 ) );
            Point elementPoint = el.TransformToAncestor( LayoutRoot ).Transform( new Point( 0, 0 ) );

            double vertOffset = calloutPoint.Y + MyCallout.ActualHeight;
            double horizOffset = elementPoint.X;
            if( calloutPoint.X > elementPoint.X )
            {
                // increase the horizontal offset if the callout 
                // is to the right of the element
                horizOffset += el.ActualWidth;
            }

            double vertDistance = ( elementPoint.Y + el.ActualHeight ) - vertOffset;
            double horizDistance = calloutPoint.X - horizOffset;

            // add some cushion between the element and the new AnchorPoint
            int pad = 5;

            // the AnchorPoint is a relative distance based on the actual height
            // and width of the callout.
            double x = ( horizDistance / ( MyCallout.ActualWidth + pad ) ) * -1;
            double y = ( vertDistance / ( MyCallout.ActualHeight + pad ) ) + 1;

            // set the new AnchorPoint location
            MyCallout.AnchorPoint = new Point( x, y );

            MyCallout.Content = string.Format( "I'm pointing at {0}", el.Name );
        }
    }
} 
```

# haskell - 是否有使用 ConstraintKinds 来概括所有基类型类以允许约束的库？

> ID：12697348
> 
> 赞同：20
> 
> 时间：2012-10-02T19:57:03.563
> 
> 标签：haskell, constraint-kinds

我们可以使用扩展 ConstraintKinds 来扩展基类型类的功能以允许约束。例如，我们可以将未装箱的向量设为函子：

```
class Functor f where
    type FunctorConstraint f x :: Constraint
    type FunctorConstraint f x = ()
    fmap :: (FunctorConstraint f a, FunctorConstraint f b) => (a -> b) -> f a -> f b

instance Functor VU.Vector where
    type FunctorConstraint VU.Vector x = VU.Unbox x
    fmap = VU.map 
```

（有关详细信息，请参阅这些[博客](http://blog.omega-prime.co.uk/?p=127) [文章）。](https://dorchard.wordpress.com/2011/10/18/subcategories-in-haskell-exofunctors/)

我注意到自己以这种新风格实现了相当大部分的基本库类型类（基本上我希望能够在未装箱的向量和列表之间互换工作），并且想知道是否已经存在我应该使用的库，或者我是否应该充实我的并将其添加到hackage中。

* * *

编辑：另外，是否有计划将其直接添加到基地？看起来它不应该仅仅通过直接更新类定义来破坏其他任何东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T19:11:19.093

因为听起来没有其他人有图书馆，所以我将我所做的转换为一个名为 ConstraintKinds 的单独项目并将[其上传到 github](https://github.com/mikeizbicki/ConstraintKinds)。目前它非常简单，可能还没有涵盖任何其他人的用例，但您可以随意进行更改或提交请求。

在将项目上传到 hackage 之前，我可能会等待更多关于这是否是一个好的方向的反馈。

# php - FilesMatch 下载文件而不是加载

> ID：12697353
> 
> 赞同：0
> 
> 时间：2012-10-02T19:57:29.397
> 
> 标签：php, .htaccess

Rightio...我即将添加图片上传到我的网站。在阅读了一些安全博客之后，我将以下内容添加到了我的 htaccess 文件中。

```
 ForceType application/octet-stream
        <FilesMatch "(?i)\.jpe?g$">
                ForceType image/jpeg
        </FilesMatch>
        <FilesMatch "(?i)\.gif$">
                ForceType image/gif
        </FilesMatch>
        <FilesMatch "(?i)\.png$">
                ForceType image/png
        </FilesMatch> 
```

当我浏览到 PHP 页面时，它会下载 file.php 而不是在浏览器中显示该页面。

任何想法将不胜感激。

我正在本地研究 MAMP。

非常感谢刘易斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:28:12.830

> 当我浏览到 PHP 页面时，它会下载 file.php 而不是在浏览器中显示该页面

那是因为你有这条线：

```
ForceType application/octet-stream 
```

本身，没有任何条件。这意味着，**一切都**应该具有 mime-type `application/octet-stream`，浏览器将其视为应下载的二进制内容。不确定这是如何改进安全性，因为它使您的整个站点可以作为代码下载和查看，而不是任何动态生成的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T15:54:05.503

您必须将该 .htaccess 代码放在只有图像文件的目录中。如果您自己的目录中没有图像，请为它们创建一个目录并将它们放在那里（并更新指向它们的任何链接）。

# javascript - ExtJS：存储已加载，记录在表单中但不在字段中

> ID：12697363
> 
> 赞同：4
> 
> 时间：2012-10-02T19:58:14.843
> 
> 标签：javascript, forms, extjs, store

我一开始就在为我的申请而苦苦挣扎。

```
this.getScoresStore().on('load', function(score, records) {
    var view = Ext.getCmp('scoreView');
    view.down('form').loadRecord(records[0].data);
    console.log(view.down('form').getRecord());
    console.log(view.down('form').getValues());
}); 
```

加载商店后，我将记录添加到表单中。控制台说它已添加，但字段一直为空。

```
Object { playerOne="301", playerTwo="301" }
Object { playerOne="", playerTwo="" } 
```

任何人有想法什么可能是错的？

控制器：

```
Ext.define('Darts.controller.Scores', {
    extend: 'Ext.app.Controller',

    views: [
        'score.View',
        'score.Hit'
    ],

    stores: [
        'Scores'
    ],

    models: [
        'Score'
    ],

    init: function() {
        this.getScoresStore().on('load', function(score, records) {
            var view = Ext.getCmp('scoreView');
            view.down('form').loadRecord(records[0].data);
            console.log(view.down('form').getRecord());
            console.log(view.down('form').getValues());
        });

        this.control({
            'scoreView' : {
                afterrender: this.formRendered
            }
        });
    },

    formRendered: function(obj) {
        console.log(obj.down('form').getRecord());
        console.log('form rendered');
    }
}); 
```

意见：

```
Ext.define('Darts.view.score.Hit' ,{
    extend: 'Ext.panel.Panel',
    alias : 'widget.scoreHit',

    title : 'Hits',
    score : 'Scores',

    initComponent: function() {
        this.items = [
            {
                xtype: 'form',
                items: [
                    {
                        xtype: 'textfield',
                        name : 'playerTwo',
                        fieldLabel: 'Player 1'
                    }
                ]
            }
        ];

        this.callParent(arguments);
    }
});

Ext.define('Darts.view.score.View' ,{
    extend: 'Ext.panel.Panel',
    alias : 'widget.scoreView',
    id    : 'scoreView',

    title : 'Player Scores',
    score : 'Scores',

    initComponent: function() {
        this.items = [
            {
                xtype: 'form',
                items: [
                    {
                        xtype: 'numberfield',
                        name : 'playerOne',
                        fieldLabel: 'Player 1'
                    }, {
                        xtype: 'textfield',
                        name : 'playerTwo',
                        fieldLabel: 'Player 2'
                    }
                ]
            }
        ];

        this.buttons = [
            {
                text: 'Start Game',
                action: 'start'
            }
        ];

        this.callParent(arguments);
    }
}); 
```

店铺

```
Ext.define('Darts.store.Scores', {
    extend: 'Ext.data.Store',
    model : 'Darts.model.Score',
    autoLoad: true,

    proxy: {
        type: 'ajax',
        api: {
            read: 'data/scores.json',
            update: 'data/updateScores.json'
        },
        reader: {
            type: 'json',
            root: 'scores',
            successProperty: 'success'
        }
    }
}); 
```

模型：

```
Ext.define('Darts.model.Score', {
    extend: 'Ext.data.Model',
    fields: ['playerOne', 'playerTwo']
}); 
```

数据：

```
{
    success: true,
    scores: [
        {id: 1, playerOne: '301', playerTwo: '301'}
    ]
} 
```

我已经尝试过数字字段、文本字段以及将数据从 ' 更改为没有 ' 和混合......似乎没有任何帮助。

在加载存储之前呈现字段（测试输出仍在代码中）

我真的没有想法，我已经看到了很多主题，但没有一个适合我的问题或解决我的问题。表单字段总是保持空白。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T23:22:34.407

我认为您的问题是您需要将模型记录传递给 loadRecord 方法而不是基础数据。所以尝试将第 3 行更改为

> view.down('form').loadRecord(records[0]);

作为旁注，加载整个商店只是为了获得一条记录有点奇怪。您可能想探索`Model.load( id, {callback config} )`加载所需的确切记录的方法。

# java - 访问矩阵的框

> ID：12697365
> 
> 赞同：0
> 
> 时间：2012-10-02T19:58:19.677
> 
> 标签：java

我想创建一个像这样的矩阵：

![矩阵](../Images/555cedf73d1f212e9db52642e88a7a1b.png)

它是矩阵中图的变换，其中、`a`等是顶点，值表示顶点是否断开连接以及它们是否连接。`b``c``0``1`

我随机取两个顶点（即`c`和`d`），我想以 M[c][d] 和 M[d][c] 的形式访问矩阵中这些顶点的值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:01:08.313

如果您将使用整数索引而不是字母，您将能够说`m[2][3]`，如果矩阵定义为`int[][] m`：

如果您需要使用字符串坐标访问值，可能您应该查看来自 Guava 的 Table 类，请参阅：[http ://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/收集/Table.html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Table.html)。这样，您将能够声明您的矩阵，如：并使用：方法`Table<String,String,String>`插入值并使用访问它们`put(String rowKey, String columnKey, String value)``get(String rowKey, String columnKey)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:19:09.430

如果您想使用字母 ( `chars`) 作为索引，那么您将不得不采取另一种方法。您可以创建自己的结构`char`作为索引。由于二维数组可以看作是数组的数组，因此可以使用 a`Map`或`Map`对象。

您将无法以您期望的方式访问对象，而是必须调用`map.get('c').get('d')`.

另一种方法是创建一种“罗塞塔石碑”，将您`char`的索引转换为相应的索引。这对于小图特别有用，因为大图会生成大量矩阵，并且在那里获取索引取决于您将如何处理它们。例如：

```
public class IndexInterpreter {

    //Using a switch here to illustrate, you can make your own mapping logic.
    public static int getIndex(char letter) {
        switch(letter) {
            case 'a':
                return 0;
            case 'b':
                return 1;
            //the swtich goes on and on...         
        }
    }
} 
```

然后，在调用矩阵时，您只需将字母转换为相应的索引：

```
int i1 = IndexInterpreter.getIndex('c');
int i2 = IndexInterpreter.getIndex('d');  
m[i1][i2] 
```

或者，如果你喜欢

```
m[IndexInterpreter.getIndex('c')][IndexInterpreter.getIndex('d')] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T20:06:01.230

矩阵将是一个二维数组

```
String[][] matrix = new String[6][7] 
```

然后你可以使用

```
matrix[1][1] = "1"; 
```

为了得到你想要的细胞，你会做

```
String val = mattix[3][5]; 
```

此[链接](http://www.leepoint.net/notes-java/data/arrays/arrays-2D.html)可能会有所帮助

# wordpress - 从今天开始在wordpress中查询接下来的几天

> ID：12697366
> 
> 赞同：1
> 
> 时间：2012-10-02T19:58:23.133
> 
> 标签：wordpress

我有一个运行 Wordpress 2.8.5 的令人毛骨悚然的网站。它的目的是展示我所在州（巴伊亚/巴西）的事件。
每个事件都将发布日期作为事件的日期，并且主题显示未来的帖子，绕过 WP 的默认显示直到今天。
它有一张带有一些特色事件的幻灯片，这就是它现在选择要在幻灯片中显示的内容的方式：

```
$mes = date('n');
$ano = date('Y');
query_posts("
  meta_key=dest_principal&
  meta_value=1&
  showposts=6&
  year=$ano&
  monthnum=$mes&
  order=ASC
"); 
```

使用此代码，幻灯片会显示当月的前 6 个帖子。我遇到的问题是无法显示从*今天*开始的接下来的 6 个帖子。（要明确，*今天*我的意思是访问日）
我找到了这个条目“ [wordpress query - next two events by metadata date](https://stackoverflow.com/questions/8682804/wordpress-query-next-two-events-by-metadata-date) ”，但无法将其转化为我的需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:49:06.523

目前尚不清楚您要做什么。您是否尝试显示从今天开始的 6 个帖子并返回到之前的 6 个帖子？所以本质上是 6 个最新的帖子？

如果是这样，试试这个代替 query_posts ......

```
$recent = new WP_Query("cat=3&showposts=6");
while($recent->have_posts()) : $recent->the_post(); 
```

您可以使用“cat=3”来显示来自特定类别的帖子，只需将“3”更改为您的类别 ID。否则，如果您不需要这样做，请删除此 'cat=3&'。

顺便说一句，我有一个专注于巴伊亚的网站，如果您对链接交换感兴趣，请与我们联系。

# mysql - 用 sphinx 和或 mysql 搜索两个表？

> ID：12697371
> 
> 赞同：2
> 
> 时间：2012-10-02T19:58:49.743
> 
> 标签：mysql, sphinx

我有两张桌子。一种用于艺术家（artist_id、artist_name），一种用于曲目（track_id、artist_id、track_title）。

我希望能够处理诸如“better man Pearl jam”之类的查询，但我在思考这将如何工作的逻辑时遇到了麻烦。更好的人是曲目标题，而珍珠果酱是艺术家的名字。

我们目前正在使用 sphinx 来处理我们的搜索引擎（单独的艺术家和曲目）。

有没有一种有效的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:04:27.060

我认为，如果有人进行了匹配曲目和艺术家的搜索，他们正在寻找曲目。在这种情况下，您希望的行为是什么？

根据您的评论，您的 sphinx 查询应如下所示：

```
SELECT track_id, track_title, artists.artist_id, artist_name FROM tracks
LEFT JOIN artists WHERE artists.artist_id = tracks.artist_id; 
```

如果您使用的是 PHP，您的代码将类似于：

$res = $sc->Query($searchString, "SphinxIndexName");

```
if (isset($res['matches']) && sizeof($res['matches']) > 0) {
  ids = join(",", array_keys($res["matches"]));
  $query = "SELECT track_id, track_title, artists.artist_id, artist_name FROM tracks
    LEFT JOIN artists WHERE artists.artist_id = tracks.artist_id ORDER BY FIELD(track_id, $ids)";
   // ... query MySQL and display results
}
else {
   echo "no results";
} 
```

# asp.net-mvc - 检查权限的最佳实践

> ID：12697384
> 
> 赞同：0
> 
> 时间：2012-10-02T20:00:11.733
> 
> 标签：asp.net-mvc

我怀疑应该在哪里完成权限。例如，我有一个 PersonController，它有两个方法，一个 HttpGet create 和一个 HttpPost create，我正在使用一个与存储库层通信的服务层。现在，最好的方法是什么？

1：

```
[HttpPost]
public ActionResult Create(Person person)
{
    if (ModelState.IsValid)
    {
        new PersonService().Save(person, (int)Session["UserId"]);//I check here permission here

        return RedirectToAction("Home","Home");
    }

    return View();
} 
```

2：

```
 [HttpPost]
    public ActionResult Create(Person person)
    {
        if (ModelState.IsValid)
        {
            var personService = new PersonService();

            if(personService.UserHasPermission((int)Session["UserId"]){
                 personService.Save(id);
            }

            return RedirectToAction("Home","Home");
        }

        return View();
    } 
```

换句话说，我应该在业务层还是在控制器中做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:33:15.987

这是一个无论“UI”技术如何都应该实现的业务细节，所以我建议检查业务层而不是控制器的访问权限。

如果您要创建类似 Web 服务或任何其他需要调用 PersonService.Save(id) 的 UI，这将使您无需重新实现即可保持 DRY

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T01:25:14.433

这取决于您是在谈论访问资源的权限还是在您的域中执行操作的权限。

您应该使用[[Authorize]](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.100%29.aspx)属性来控制对**资源**的访问。例如：

> URL **/admin/index**应该只对管理员可用。

您应该使用您的域来强制执行特定操作的业务逻辑。例如：

> 只有满足条件 C，用户 A 才能执行操作 B。

您应该根据场景混合使用这两种做法。

# python - python ftp文件线程或多进程

> ID：12697385
> 
> 赞同：1
> 
> 时间：2012-10-02T20:00:13.300
> 
> 标签：python

我们不断地从我们的数据库中生成数据文件，然后通过 FTP'D 传输到不同的位置。我们有一个持续监控这个文件夹的poler，一旦它看到文件，它就会通过FTP发送它们

目前这个过程是连续的，当文件变大时，会有一个导致严重延迟的备份。我想并行处理事情，即一次 FTP 多个文件。我不确定线程​​/多处理以及这对我来说如何工作。

这是我的代码

```
import ftplib
ftp = ftplib.FTP('domainname.com')
ftp.login("username","password")
infiles = [file1,file2,file3.....filen]
for x in infiles:
    f = open(x,'rb')
    ftp.storbinary('STOR %s' %x, f)
    f.close()
ftp.quit() 
```

我在想，因为这是 I/O 密集型多处理是要走的路，关于如何进行的任何想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T20:28:57.717

您可能会发现[`multiprocessing.Pool`](http://docs.python.org/library/multiprocessing.html#module-multiprocessing.pool)作为更高级别的接口很有用。

```
from multiprocessing import Pool
def upload(file): 
    ftp = ftplib.FTP('domainname.com')
    ftp.login("username","password")
    f = open(file,'rb')
    ftp.storbinary('STOR %s' %x, f)
    f.close()
    ftp.quit()

infiles = [file1,file2,file3.....filen]

pool = Pool(10) # submit 10 at once
pool.map(upload,infiles) 
```

这很好，因为它的`map`行为类似于内置函数。对于调试，只需替换`pool.map`--> `map`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:40:44.137

我手头没有代码片段，但对于生产环境，我肯定会看[Twisted](http://twistedmatrix.com/trac/)。Twisted 不是最容易上手的工具，但它带来了很多东西，你以后可以自己实现。所以我建议至少花几个小时检查一下。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T20:15:51.303

把耗时的任务放到一个函数中

```
from multiprocessing import Process

def upload_file(filename):
    ftp = ftplib.FTP('domainname.com')
    ftp.login("username","password")
    f = open(x,'rb')
    ftp.storbinary('STOR %s' %x, f)
    f.close()
    ftp.quit() 

def multi_ftp():
    files = [file1, file2, ...]
    processes = []
    for filename in files:
        p = Process(target=filename, args=(filename,))
        p.start()
        processes.append(p)

    for p in processes:
        p.join() 
```

# php - 如何替换动态字符串？

> ID：12697389
> 
> 赞同：0
> 
> 时间：2012-10-02T20:00:19.233
> 
> 标签：php, regex

我有`$menu`如下变量类型数组：

```
$menu = array('<li class="page_item page-item-155">',
              '<li class="page_item page-item-49">',
              '<li class="page_item page-item-72">',
              '<li class="page_item page-item-18">',
              '<li class="page_item page-item-50">'); 
```

我想替换第一个原始字符串

```
<li class="page_item page-item-155">' 
```

至

```
<li class="current"> 
```

在字符串的末尾它可以是任何数字，数字不是恒定的。

我想我需要使用正则表达式，但我不知道如何实现它。

```
$menu = str_replace($original_strs_array, $replacement_strs_array, $menu); 
```

我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:25:25.210

# 代码

### 所有 $menu 值：将 class="*" 替换为 class="current"

```
$menuA = preg_replace('~class=".+"~', 'class="current"', $menu);
print_r($menuA); 
```

### 所有 $menu 值：将 className "current" 添加到当前类

```
$menuB = preg_replace('~class="(.+?)"~', 'class="$1 current"', $menu);
print_r($menuB); 
```

### 所选菜单：将 class="*" 替换为 class="current"

```
$menuC = preg_replace('~class=".*?page-item-'.$selectedMenuId.'"~', 'class="current"', $menu);
print_r($menuC); 
```

### 选定菜单：将className“current”添加到当前类

```
$menuD = preg_replace('~class="(.*?)page-item-('.$selectedMenuId.')"~', 'class="$1page-item-$2 current"', $menu);
print_r($menuD); 
```

# 输出

```
$menuA = Array
(
    [0] => <li class="current">
    [1] => <li class="current">
    [2] => <li class="current">
    [3] => <li class="current">
    [4] => <li class="current">
)
$menuB = Array
(
    [0] => <li class="page_item page-item-155 current">
    [1] => <li class="page_item page-item-49 current">
    [2] => <li class="page_item page-item-72 current">
    [3] => <li class="page_item page-item-18 current">
    [4] => <li class="page_item page-item-50 current">
)
$menuC = Array
(
    [0] => <li class="page_item page-item-155">
    [1] => <li class="page_item page-item-49">
    [2] => <li class="current">
    [3] => <li class="page_item page-item-18">
    [4] => <li class="page_item page-item-50">
)
$menuD = Array
(
    [0] => <li class="page_item page-item-155">
    [1] => <li class="page_item page-item-49">
    [2] => <li class="page_item page-item-72 current">
    [3] => <li class="page_item page-item-18">
    [4] => <li class="page_item page-item-50">
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:05:11.943

尝试这个 ：

```
preg_replace('/page_item page-item-\d+/','current',$menu); 
```

或者这是一个通用的类移除器/替换器：

```
preg_replace("/class\s*=\s*('|\")[^'\"]*('|\")/",'class="current"',$menu); 
```

# asp.net - Fluent NHibernate 会话在 ASP.NET Web 应用程序中不起作用

> ID：12697393
> 
> 赞同：1
> 
> 时间：2012-10-02T20:00:34.113
> 
> 标签：asp.net, nhibernate, fluent-nhibernate

我在 ASP.NET Web 应用程序中设置了 Fluent NHibernate。我有一个 http 模块，它拦截请求并为每个请求创建一个新会话：

```
private static void BeginRequest( object sender, EventArgs e )
{

    ISession session = _sessionFactory.OpenSession();

    session.BeginTransaction();

    CurrentSessionContext.Bind( session );
} 
```

它是这样配置的：

```
private static ISessionFactory CreateSessionFactory()
{
    return Fluently
        .Configure()
        .Database( MsSqlConfiguration.MsSql2005
            .ConnectionString( c => c
                .FromConnectionStringWithKey( "RecruitmentApp" ) ) )
        .Mappings( 
            m => m.FluentMappings.AddFromAssemblyOf<RecruitmentAppLibrary.Applicant>()
        )
        .ExposeConfiguration( c => c.SetProperty(NHibernate.Cfg.Environment.CurrentSessionContextClass, "web"))
        .BuildSessionFactory();
} 
```

我确实将当前会话上下文类设置为“web”，但是当调用 _sessionFactory.GetCurrentSession() 时代码无法获取会话。它说“没有会话绑定到当前上下文”。我已经对其进行了一些调试，并且会话被插入到 Http 上下文中，但由于某种原因它无法将其拉回（即使调用我的 Page_Load 时它仍在上下文中）。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:05:45.673

尝试使用 ManagedWebSessionContext 而不是 CurrentSessionContext：

```
ManagedWebSessionContext.Bind(HttpContext.Current, session); 
```

# javascript - 书签，行为差异

> ID：12697394
> 
> 赞同：0
> 
> 时间：2012-10-02T20:00:43.193
> 
> 标签：javascript, jquery, css

我用 jquery 和 css 文件的引用制作了 .js 书签，如此[处所述](https://stackoverflow.com/questions/12696034/reference-from-one-js-file-to-another)

当我尝试在不同的网站上使用它时，我会得到不同的结果。例如，当我使用只有一个类的简单 css 文件时：

```
.someClass{
color:#F00;
} 
```

当我去[https://stackoverflow.com/](https://stackoverflow.com/) 并使用书签时，我得到了正确的结果（所有超链接都是红色的）![在此处输入图像描述](../Images/2d35eb8d0e45af7983a28fc3df0d2f97.png)

但是当我导航到[http://developer.android.com/reference/packages.html](http://developer.android.com/reference/packages.html) 并使用 Bookmarklet 时，我没有得到正确的结果（超链接仍然是蓝色的）：

![在此处输入图像描述](../Images/c0a63f27ae78ca007b3d9675c1f49b49.png) 为什么小书签在一种情况下是完美的，而在另一种情况下却如此糟糕？我可以修复它吗？

# magento - Nginx 和 Magento 重定向

> ID：12697398
> 
> 赞同：1
> 
> 时间：2012-10-02T20:01:02.120
> 
> 标签：magento, nginx

Magento 在我的 Nginx + PHP-FPM 堆栈上运行得很好，但是每次我从购物车中删除产品或在产品页面上添加标签时，我都会被重定向到主页。

我知道用`$this->_redirectReferer(Mage::getUrl('*/*'));`app `$this->_redirect('checkout/cart');`/code/core/Mage/Checkout/controllers/CartController.php 替换“修复”购物车问题，但是标签一呢？有什么规则我可以​​在 nginx.conf 上添加/改进而不是破解 Magento 核心？奇怪的是，这只发生在 Ngix 上，而不是 Apache 上。

这是我的配置的摘录：

```
 location @handler { ## Magento uses a common front handler
            rewrite / /index.php;
        }

        location ~ .php/ { ## Forward paths like /js/index.php/x.js to relevant handler
            rewrite ^(.*.php)/ $1 last;
        }

        # Pass PHP scripts on to PHP-FPM
        location ~* \.php$ {
            if (!-e $request_filename) { rewrite / /index.php last; } ## Catch 404s that try_files miss
            #expires        off; ## Do not cache dynamic content
            fastcgi_pass    unix:/var/spool/phpfpm.sock; ## php-fpm socket
            fastcgi_param   SCRIPT_FILENAME  $document_root$fastcgi_script_name;
            #fastcgi_param  MAGE_RUN_CODE default; ## Store code is defined in administration > Configuration > Manage Stores
            #fastcgi_param  MAGE_RUN_TYPE store;
            include         fastcgi_params; ## See /etc/nginx/fastcgi_params
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:23:18.540

回顾 Magento CE 1.4.2，库存的 Magento `CartController.php`控制器类没有任何看起来像这样的代码

```
$this->_redirectReferer(Mage::getUrl('/')); 
```

我怀疑你正在处理一个已经被黑的系统。我会下载一个全新的安装并比较你的`CartController.php`文件。根据您提供的信息，我猜有人替换了以下行

```
$this->_redirectReferer(Mage::getUrl('*/*')); 
```

上面的行会导致您的问题。

# python - python - 如何计算列中的数字数量？

> ID：12697401
> 
> 赞同：0
> 
> 时间：2012-10-02T20:01:12.623
> 
> 标签：python

我有一个包含以下输入数据的文件：

```
 IN   OUT
data1  2.3  1.3
data2  0.1  2.1
data3  1.5  2.8
dataX  ...  ... 
```

有成千上万个这样的文件，每个文件都有相同的 data1，data2，data3，...，dataX 我想计算所有文件中每个数据和列的每个值的数量。例子：

在文件“data1-IN”（文件名）中

```
2.3 - 50    (times)
0.1 - 233   (times)
... - ...   (times) 
```

在文件“data1-OUT”（文件名）中

```
2.1 - 1024 (times)
2.8 - 120  (times)
... - ...  (times) 
```

在文件“data2-IN”（文件名）中

```
0.4 - 312    (times)
0.3 - 202   (times)
... - ...   (times) 
```

在文件“data2-OUT”（文件名）中

```
1.1 - 124 (times)
3.8 - 451  (times)
... - ...  (times) 
```

在文件 'data3-IN' ...

哪种 Python 数据结构最适合计算此类数据？我想使用多维字典，但我正在努力解决 KeyErrors 等问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:07:15.710

你真的想用[`collections.Counter`](http://docs.python.org/library/collections.html#counter-objects)，也许包含在一个[`collections.defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)：

```
import collections
import csv

counts = collections.defaultdict(collections.Counter)

for filename in files:
    for line in csv.reader(open(filename, 'rb')):
         counts[filename + '-IN' ][line[1]] += 1
         counts[filename + '-OUT'][line[2]] += 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:50:52.077

我最近开始使用[Pandas](http://pandas.pydata.org/)数据框。它有一个 CSV 阅读器，使切片和切块数据非常简单。

# cocos2d-iphone - 如何从文档目录加载 CCSpriteBatchNode？

> ID：12697402
> 
> 赞同：1
> 
> 时间：2012-10-02T20:01:18.083
> 
> 标签：cocos2d-iphone, ccspritebatchnode

在调用此方法之前，我在文档目录中有一个文件，我验证该文件确实存在：

```
CCSpriteBatchNode *batchNode = [[CCSpriteBatchNode alloc] initWithFile:filePath capacity:9]; 
```

报告的错误是：

```
-[CCFileUtils fullPathFromRelativePath:resolutionType:]  : cocos2d: Warning: File not found: decompressed_file.png

cocos2d: CCTexture3d: Can't create Texture.  cgImage is nil; 
```

使用 Cocos2d 2.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-18T14:53:14.610

您可以使用 CCSpriteBatchNode 并通过设置从 Documents 目录（或您想要的任何其他目录）中提取文件`searchPath`，例如：

```
NSString *documentDirectory = aDirectory;
NSMutableArray * loadSearchPath = [[CCFileUtils sharedFileUtils].searchPath mutableCopy];
[loadSearchPath addObject:documentDirectory];
[CCFileUtils sharedFileUtils].searchPath = [loadSearchPath copy]; 
```

这将添加`aDirectory`到 Cocos2D 将在其中查找具有您在其中指定的名称的文件的可搜索路径`[CCSpriteBatchNode batchNodeWithFile:@"aFile"];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:34:20.163

cocos2d 函数文件方法假设您是从捆绑资源加载的。我不认为您可以直接加载文件，但您可以将其加载到 UIImage 中，然后使用 CGImage 创建 CCTexture2D。使用您的 CCTexture2D，您可以创建一个 CCSpriteBatchNode。

```
UIImage *img = [UIImage imageWithContentsOfFile:filePath];
CCTexture2d *tex = [[CCTextureCache sharedTextureCache] addCGImage:[img CGImage] forKey:@"myTexture"];
CCSpriteBatchNode *batch = [CCSpriteBatchNode batchNodeWithTexture:tex capacity:9]; 
```

当您使用常规方法创建 CCSpriteBatchNode 时，这些步骤无论如何都是在后台发生的。除了捆绑假设。

如果由于某种原因多次制作精灵批处理节点，则可以在重新加载 UIImage 之前检查纹理是否已存在于缓存中。

# java - ArrayList.remove() 没有删除对象

> ID：12697407
> 
> 赞同：10
> 
> 时间：2012-10-02T20:01:41.313
> 
> 标签：java, arraylist

我知道这是一个混乱的实现，但我基本上有这个代码（我写了所有的），并且当使用适当的菜单选项时，我需要能够从列表中删除学生或教师。代码中的所有其他内容都有效，只是菜单选项 3 和 4 无效。我在尝试删除时输入了完全相同的对象信息。这是代码。所有三个类都在下面。

驱动类：

```
import java.util.ArrayList;
import java.util.Scanner;

public class Driver {
private ArrayList<Student> students;
private ArrayList<Instructor> instructors;

public static void main(String[] args) {        
    Driver aDriver = new Driver();
    aDriver.run();      
}

public Driver() {
    students = new ArrayList<Student>();
    instructors = new ArrayList<Instructor>();
}

private void run() {
    Student aStudent;
    Instructor anInstructor;
    Scanner inp = new Scanner(System.in);
    int choice = -1;
    String str = "Enter a menu option:\n";

    str += " 0: Quit\n";
    str += " 1: Add new student\n";
    str += " 2: Add new instructor\n";
    str += " 3: Delete existing student\n";
    str += " 4: Delete existing instructor\n";
    str += " 5: Print list of students\n";
    str += " 6: Print list of instructors\n";
    str += "Your choice: ";

    do {
        System.out.print(str);
        choice = inp.nextInt();

        switch(choice) {
        case 0:
            System.out.println("Thanks! Have a great day!");
            break;
        case 1:
            aStudent = getStudentInfo();
            addStudent(aStudent);
            break;
        case 2:
            anInstructor = getInstructorInfo();
            addInstructor(anInstructor);
            break;
        case 3:
            aStudent = getStudentInfo();
            deleteStudent(aStudent);
            break;
        case 4:
            anInstructor = getInstructorInfo();
            deleteInstructor(anInstructor);
            break;
        case 5:
            printStudents();
            break;
        case 6:
            printInstructors();
            break;
        default:
            System.out.println("Invalid menu item " + choice);  
        }
    }
    while(choice != 0);
}

public Student getStudentInfo() {
    Student aStudent;
    String name = null;
    String id = null;
    double GPA = 0.0;
    Scanner inp = new Scanner(System.in);

    System.out.print("\n\nEnter the student's name: ");
    name = inp.nextLine();
    System.out.print("Enter the student's ID: ");
    id = inp.nextLine();
    System.out.print("Enter the student's GPA: ");
    GPA = inp.nextDouble();

    aStudent = new Student(name, id, GPA);
    return aStudent;
}

public Instructor getInstructorInfo() {
    Instructor anInstructor;
    String name = null;
    String id = null;
    String dept = null;
    String email = null;
    Scanner inp = new Scanner(System.in);

    System.out.print("\n\nEnter the instructor's name: ");
    name = inp.nextLine();
    System.out.print("Enter the instructor's ID: ");
    id = inp.nextLine();
    System.out.print("Enter the instructor's department: ");
    dept = inp.nextLine();
    System.out.print("Enter the instructor's email address: ");
    email = inp.nextLine();

    anInstructor = new Instructor(name, id, dept, email);
    return anInstructor;
}

public void addStudent(Student aStudent) {
    students.add(aStudent);
}

public void addInstructor(Instructor anInstructor) {
    instructors.add(anInstructor);
}

public void deleteStudent(Student aStudent) {
    students.remove(aStudent);
}

public void deleteInstructor(Instructor anInstructor) {
    instructors.remove(anInstructor);
}

public void printStudents() {
    System.out.println("\n\n" + Student.printHeader());

    for(int i = 0; i < students.size(); i++) {
        System.out.print(students.get(i));
    }

    System.out.print("\n\n");
}

public void printInstructors() {
    System.out.print("\n\n" + Instructor.printHeader());

    for(int i = 0; i < instructors.size(); i++) {
        System.out.print(instructors.get(i));
    }

    System.out.print("\n\n");
}
} 
```

学生班级：

```
public class Student {
private String name;
private String id;   //String to allow for the possibility of leading zeroes
private double GPA;

public Student() {
    name = "TestFirst TestLast";
    id = "00000";
    GPA = -1.00;
}

public Student(String name1, String id1, double GPA1) {
    name = name1;
    id = id1;
    GPA = GPA1;
}

public static String printHeader() {
    String str = String.format("%-25s%-7s%-6s\n", "Name", "ID", "GPA");
    return str;
}

public String toString() {
    String str = String.format("%-25s%-7s%-6.3f\n", name, id, GPA);
    return str;
}

public String getName() {
    return name;
}

public void setGPA(double GPA2) {
    GPA = GPA2;
}
} 
```

导师班：

```
public class Instructor {
private String name;
private String id;
private String dept;
private String email;

public Instructor() {
    name = "TestFirst TestLast";
    id = "-00001";
    dept = "TestDept";
    email = "test@test.net";
}

public Instructor(String name1, String id1, String dept1, String email1) {
    name = name1;
    id = id1;
    dept = dept1;
    email = email1;
}

public static String printHeader() {
    String str = String.format("%-30s%-6s%-15s%-15s\n", "Name", "ID", "Department", "Email Address");
    return str;
}

public String toString() {
    String str = String.format("%-30s%-6s%-15s%-15s\n", name, id, dept, email);
    return str;
}

public String getName() {
    return name;
}
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-02T20:03:29.127

您必须正确覆盖和类的`equals()`方法。`Student``Instructor`

当覆盖等于时，最好也覆盖`hashCode()`。新学生（姓名，身份证，GPA）；

例如，像这样：

```
public boolean equals(Object o) {
  if (!(o instanceof Student)) {
    return false;
  }
  Student other = (Student) o;
  return name.equals(other.name) && id.equals(other.id) && GPA == other.GPA;
}

public int hashCode() {
  return name.hashCode();
} 
```

这样，您就有机会`ArrayList`找出哪个对象对应于您在删除时作为参数传递的对象。如果您不覆盖上述方法，它将使用 中的默认实现`Object`，它比较在您删除新`Student`对象时肯定不同的内存地址。

您可以在 .java 文档中阅读有关这两种方法的更多信息`Object`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-02T20:03:50.243

您需要覆盖 equals 和 hashcode 方法才能使集合正常工作。

```
@Override
public boolean equals(Object obj) {
    if (obj == null)
        return false;
    if (!(obj instanceof Student))
        return false;
    Student other = (Student) obj;
    return id == null ? false : id.equals(other.id);//Compare Id if null falseF
} 
```

由于您只使用 ArrayList ，因此不会使用 hashcode 方法，但提供它仍然是一种好习惯。

```
 @Override
public int hashCode() {
    return id == null ? 0 : id.hashCode();
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-02T20:04:00.890

您没有覆盖and的[`equals`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)方法。`Student``Instructor`

此方法用于`ArrayList`检查 2 个对象是否相同。如果没有自定义实现，它只会检查引用，这在您的情况下会有所不同，因为它们是两个不同的对象。

要提供自定义相等，您必须检查所涉及类的所有字段是否相同。这可以通过调用`equals`实例变量递归地完成。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-02T20:05:35.770

覆盖 Student 和 Instructor 的 equals 方法将起作用：

以下是 Student 类的示例：

```
public boolean equals(Object other){
    if(other == null) return false;
    if(other == this) return true;
    if(!(other instanceof Student)) return false;
    Student otherStudent = (Student)other;
    return otherStudent.id.equals(this.id);
} 
```

您可能还想覆盖`hashCode()`：

```
public String hashCode(){
    return new HashCodeBuilder(17, 31).
        append(name).
        append(id).
        toHashCode();
} 
```

# html - 表单框在 chrome 和 safari 中出现了非常不同的情况。并且难以放置图像

> ID：12697421
> 
> 赞同：-2
> 
> 时间：2012-10-02T20:03:00.120
> 
> 标签：html, css

需要一些操作才能将用户名和密码表单框放在一起。我在 chrome 上看起来不错，但是当我去 safari 和 firefox 时，这些盒子的高度截然不同。

该站点是 www.EpicSwap.com 我似乎无法正确格式化代码 感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:10:52.587

试着让你的表格更宽一点，减少`padding-right`（我完全把它拿出来）`formleft` 元素，并让`formright`浮动也离开。请注意，我也把表格拿出来了`float:left`，因为它是不必要的。

像这样：

```
form {
padding-top:6em;
width:450px;
}

#formleft {
float:left;
}

#formright {
float:left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:58:48.740

我建议您删除浮动并使用定位，如此处所示

```
#formright 
{
//float: right;
position: relative;
left: 250px;
top: -58px;
} 
```

# excel - 清除组合框的选择

> ID：12697427
> 
> 赞同：10
> 
> 时间：2012-10-02T20:03:21.307
> 
> 标签：excel, vba, combobox

我有一个组合框，其中的值在被选中时会导致其他问题。

我有一个按钮，我想成为一个“向上一级”按钮，它可以清除以下所有问题。它应该将组合框的显示重置为空，就像在选择任何选项之前一样，以便用户可以进行选择。

我尝试设置 Value = 0，ListIndex = -1。

我不想使用“清除”，因为我想保留组合框中的值。

我查看了组合框的属性，但无法挑选出哪个可以满足我的要求。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T20:27:30.800

```
Listbox.Value=null 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-14T22:45:41.943

如果您使用：`ComboBox1.ListIndex = -1`没有列表项，则不会有任何效果。如果您动态加载项目，这将是一个问题。用途：`ComboBox1.Value = Null`清除上面提到的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-25T07:24:23.710

我遇到了同样的问题，可能我们有同样的情况。

我知道您不想运行 clear 方法并使当前列出的项目消失，而只是使组合没有价值。

如果在尝试将组合值设为 null 或空白字符串 ("") 或 ListIndex=-1 之前，您已经用新的项目集重新填充了组合，这可能会发生。在用新项目重新填充组合之前，您应该调用 clear 方法，然后用新项目重新填充组合，然后将值设置为 null 或空白字符串 ("") 值。

# python - Winzip cannot open an archive created by python shutil.make_archive on windows. On ubuntu archive manager does fine

> ID：12697431
> 
> 赞同：1
> 
> 时间：2012-10-02T20:03:30.997
> 
> 标签：python, django, zip, shutil

I am trying to return a zip file in django http response, the code goes something like...

```
archive = shutil.make_archive('testfolder', 'zip', MEDIA_ROOT, 'testfolder')
response = HttpResponse(FileWrapper(open(archive)),
                           content_type=mimetypes.guess_type(archive)[0])
response['Content-Length'] = getsize(archive)
response['Content-Disposition'] = "attachment; filename=test %s.zip" % datetime.now()
return response 
```

Now when this code is executed on ubuntu the resulting downloaded file opens without any issue, but when its executed on windows the file created does not open in winzip (gives error 'Unsupported Zip Format').

Is there something very obvious I am missing here? Isn't python code supposed to be portable?

**EDIT:**

Thanks to [J.F. Sebastian](https://stackoverflow.com/a/13040316/805156) for his comment...

There was no problem in creating the archive, it was reading it back into the request. So, the solution is to change second line of my code from,

```
response = HttpResponse(FileWrapper(open(archive)),
                           content_type=mimetypes.guess_type(archive)[0]) 
```

to,

```
response = HttpResponse(FileWrapper(open(archive, 'rb')),  # notice extra 'rb'
                           content_type=mimetypes.guess_type(archive)[0]) 
```

checkout, [my answer to this question](https://stackoverflow.com/a/13040316/805156) for more details...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:38:17.613

The code you have written should work correctly. I've just run the following line from your snippet to generate a zip file and was able to extract on Linux and Windows.

```
archive = shutil.make_archive('testfolder', 'zip', MEDIA_ROOT, 'testfolder') 
```

There is something funny and specific going on. I recommend you check the following:

1.  Generate the zip file outside of Django with a script that just has that one liner. Then try and extract it on a Windows machine. This will help you rule out anything going on relating to Django, web server or browser
2.  If that works then look at exactly what is in the folder you compressed. Do the files have any funny characters in their names, are there strange file types, or super long filenames.
3.  Run a md5 checksum on the zip file in Windows and Linux just to make absolutely sure that the two files are byte by byte identical. To rule out any file corruption that might have occured.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T22:28:02.057

Thanks to [J.F. Sebastian](https://stackoverflow.com/users/4279/j-f-sebastian) for his comment...

I'll still write the solution here in detail...

There was no problem in creating the archive, it was reading it back into the request. So, the solution is to change second line of my code from,

```
response = HttpResponse(FileWrapper(open(archive)),
                           content_type=mimetypes.guess_type(archive)[0]) 
```

to,

```
response = HttpResponse(FileWrapper(open(archive, 'rb')),  # notice extra 'rb'
                           content_type=mimetypes.guess_type(archive)[0]) 
```

because apparently, hidden somewhere in [python 2.3 documentation](http://docs.python.org/library/functions.html#open) on `open`:

> The most commonly-used values of mode are 'r' for reading, 'w' for writing (truncating the file if it already exists), and 'a' for appending (which on some Unix systems means that all writes append to the end of the file regardless of the current seek position). If mode is omitted, it defaults to 'r'. The default is to use text mode, which may convert '\n' characters to a platform-specific representation on writing and back on reading. **Thus, when opening a binary file, you should append 'b' to the mode value to open the file in binary mode, *which will improve portability*.** (Appending 'b' is useful even on systems that don’t treat binary and text files differently, where it serves as documentation.) See below for more possible values of mode.

So, in simple terms while reading binary files, using `open(file, 'rb')` increases portability of your code (it certainly did in this case)

Now, it extracts without troubles, on windows...

# internet-explorer - Wp-电子商务和 Internet Explorer 结帐电子邮件验证

> ID：12697432
> 
> 赞同：0
> 
> 时间：2012-10-02T20:03:32.903
> 
> 标签：internet-explorer, wordpress

所以我使用的是 WP-Ecommerce 版本 3.8.8.5。该网站已经上线了几个月，我刚刚意识到在使用 IE 时，任何电子邮件都不会在结帐时进行验证。

我什至尝试从包含 => ajax.functions.php 文件中删除预匹配检查，但仍然收到错误，因此不允许 IE 上的任何人购买我们的任何产品。

我正在使用默认的结帐表单，而导致悲伤的字段是 billingemail 输入。我已经删除了对该字段的验证检查但它仍然无法验证的事实让我认为某处一定存在命名问题。

任何人都可以就为什么电子邮件验证脚本无法在 Internet Explorer 上运行但在我测试过的所有其他浏览器上完全按预期运行的原因提供建议吗？已测试 IE 版本 8 和 9。

------编辑---------- 所以我从管理员那里取消了必填字段，我现在可以通过 IE 处理交易，但它仍然没有将电子邮件信息保存为一部分IE中的顺序，所以我很确定这是一个命名问题，尽管仍然不确定如何修复。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:11:16.673

因此，如果其他人在这里遇到过类似的问题，那就是为我修复它的解决方案。在主题文件 wpsc-shopping_cart_page.php 中，我刚刚删除了以下代码，现在一切都在 IE 中运行。

```
}elseif( $wpsc_checkout->checkout_item->unique_name == 'billingemail'){ ?>
<?php $email_markup =
"
" . __('Enter your email address', 'wpsc') . "
" . wpsc_checkout_form_field();
if(wpsc_the_checkout_item_error() != '')
$email_markup .= "" . wpsc_the_checkout_item_error() . "";
$email_markup .= ""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T15:23:30.477

我的版本是 3.8.11.1，现在仍然如此。

代码现在略有不同；将其注释掉或删除它仍然具有相同的效果：现在签出适用于 ie。

```
/*
}elseif( $wpsc_checkout->checkout_item->unique_name == 'billingemail'){ ?>
<?php $email_markup =
"<div class='wpsc_email_address'>
<p class='" . wpsc_checkout_form_element_id() . "'>
<label class='wpsc_email_address' for='" . wpsc_checkout_form_element_id() . "'>
" . __('Enter your email address', 'wpsc') . "
</label>
<p class='wpsc_email_address_p'>
<img src='https://secure.gravatar.com/avatar/empty?s=60&amp;d=mm' id='wpsc_checkout_gravatar' />
" . wpsc_checkout_form_field();

if(wpsc_the_checkout_item_error() != '')
$email_markup .= "<p class='validation-error'>" . wpsc_the_checkout_item_error() . "</p>";
$email_markup .= "</div>";
*/ 
```

IE 问题仅在我打开 test-gateway 时发生。

# c - C混淆中的结构

> ID：12697434
> 
> 赞同：1
> 
> 时间：2012-10-02T20:03:39.327
> 
> 标签：c, struct, typedef

我有一个以我调用 stringtable 的结构开头的 ac 文件，看起来像这样

```
struct stringtable {
   int table[];
   int numElements = 15;
}; 
```

我有一个标题，它有这个 typedef

```
typedef stringtable *stringtable_ref; 
```

当我使用 gcc 编译时，出现错误：预期标识符或 '(' before '[' token expected ':' before 'int'

就像我宣布结构错误一样。我以前在 C 中做过这样的结构，所以我的问题是：我在声明我的结构时犯了错误吗？分号前需要加标签吗？是否只允许我在某些地方声明结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:06:14.367

```
struct stringtable {
   int table[];
   int numElements = 15;
}; 
```

一个灵活的数组成员 like`int table[];`只能是 a 的*最后一个*成员`struct`（至少还有一个成员）。

而且您不能在`struct`声明中为成员分配默认值，C 不支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:06:20.093

除非您的结构中有`static`成员，否则您不能在声明时初始化成员。

您需要在初始化成员之前创建结构的实例：

```
 struct stringtable str_table;
 str_table.numElements = 15; 
 //etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T20:13:41.990

我也希望你需要在标题中`typedef struct stringtable *stringtable_ref`

# javascript - 为什么我需要 JavaScript 模块加载，所有这些加载器之间有什么区别？

> ID：12697437
> 
> 赞同：9
> 
> 时间：2012-10-02T20:04:01.390
> 
> 标签：javascript, amd, commonjs

**问题一**：

为什么我需要在网页中异步加载我的 JavaScript 文件？我可以在服务器端看到它的基本原理，但是如果我知道我需要在客户端加载的所有文件，为什么我不应该将所有源文件连接到 1 个文件中并在页面加载时加载呢？第一个初始页面加载是否如此重要，以至于将来的操作可能会由于检索每个 JS 文件的延迟而减慢？

**问题 2**：

假设问题1的答案是我需要单独加载JS文件：

AMD 异步加载每个 JS 文件，CommonJS 同步加载。服务器端加载需要 CJS（如果我没记错的话，这就是 Node.js 的工作方式）。AMD 似乎更适合客户。因此，在客户端使用 CJS 的唯一原因是与服务器共享代码。

有没有办法让 AMD 和 CJS 玩得很好，以便客户端 JS 文件可以异步加载但仍然具有 CJS 语法？

（require.js 到底是做什么的？我一生都无法在他们网站上的字里行间阅读。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:24:11.940

仅连接文件的部分问题不在于下载所花费的时间，而是在每个页面上编译所花费的时间。

如果你有一个 20,000 行的文件，而你只需要其中的 600 行就可以让所有东西都启动并运行（假设所有东西都是模块化和异步的，使用任何模式来管理资源），那么你'如果您为核心程序提供服务并根据需要进行扩展（或在延迟的计时器上，为彼此密切相关的大量功能提供服务），那么您可能会节省半秒或更长时间。

下载所花费的总时间更长。
使用的 HTTP 连接总数更高。
但是使页面对用户可见所需的时间较短。
向页面添加基本功能所需的时间较短。
然后额外的功能可以在加载和初始化之后，或者根据用户的要求，在这两种情况下，只要你输入的代码专注于做那个，就可以输入额外的功能事情，并且不要求六个其他依赖项，请求和添加功能之间的时间将是最短的。

RequireJS 基本上使用了一个承诺系统。

它允许您预先声明依赖项，并在处理完所有依赖项之后提交要实现的代码（作为回调）。
如果这些依赖项有任何依赖项，那么在加载它们的依赖项之前***它们***不会被初始化。
如果你只想加载它并且顺序并不重要，那么你不需要给它依赖。

总的道理是，如果你有一个所有文件都很小的系统，页面上 JS 的总重量非常小，你只需要几百行就可以在页面上做你想做的一切...... ...另外，您知道所有依赖项在哪里，您在服务器上有一个系统来确保它们的顺序正确，等等（另外，您有很好的文档，或者您是唯一的一个谁接触了这段代码，而你每天都生活在其中）......那么做你正在做的事情就没有任何问题。

如果编译时间超过了您发出的 HTTP 请求的数量，您可能根本看不到任何差异。但是对于具有数万（或数十万）行长的整体应用程序，其中任何一个页面上只需要该功能的一小部分，就可以大大节省页面加载到页面加载时间之间的感知时间。应用程序已“准备好”进行用户的基本交互。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T21:25:58.647

如果您想为每个页面加载整个 javascript 源代码，请确保将其编译到一个文件中。如果您根据用户执行的操作或加载的页面加载不同的代码，请使用 AMD 加载的模块。另一种选择是列出一堆脚本标签，当然一次只能加载一个并且可能需要一段时间。

AMD 不是一个特定的库，它实际上是加载您提到的大多数加载器使用的 javascript 模块的标准。这意味着它们都使用相似的语法来定义和加载模块。他们正在考虑让 AMD 成为 ECMA 脚本规范的一部分。它的用处在于您还可以定义依赖项，因此如果您的代码需要运行 jQuery，您可以将其列为依赖项，并将其加载到您的模块命名空间中。

```
define( [ 'jquery' ], function ( $ ) {
    // use jquery in here without clouding up the global namespace

    return {}; // return your module for use in a different module or whatever
}; 
```

在此示例中，在下载 jquery 模块之前，不会运行已定义模块中的代码。然后它将 jquery 模块作为参数直接注入到您新定义的模块中`$`。

您现在可以将代码整齐地组织到包含模块的文件中。您的任何模块都不会混淆全局命名空间。您的所有依赖项都将确保在您的模块运行之前已加载（没有加载依赖代码段的竞争条件错误）。

另一个优点是您可以将加载程序设置为对同一模块使用不同的路径，因此您可以将`jquery`模块的路径定义为“https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/ jquery.min.js' 在您的代码中的一个位置，即使它几乎可以在每个模块中使用。`jquery`现在，当我需要将我的 jquery 版本更新到 1.8.3 时，我可以简单地在我的代码中的一个位置更改路径，它将为每个用作依赖项的模块使用此路径。当您使用模块存根或调试某些模块的版本时，这对于在测试时轻松切换也很有用。

现在，小型项目不一定需要这样做。但是，您的项目越大，这种类型的加载就越有意义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T20:09:14.317

您不需要“需要”异步或通过某些自定义加载器加载 javascript 文件。以下是异步加载或自定义加载可能带来好处的一些原因：

*   当通常不需要 javascript 文件并且您可能希望按需而不是一直加载它时
*   当初始页面显示不需要 javascript 文件并且您希望最大化页面的首次显示速度时
*   当您想控制加载 javascript 文件的确切时间时
*   当您根据某些条件决定是否加载 javascript 文件时（例如，如果从 CDN 加载失败，您可能会从备份位置加载）
*   当您希望脚本加载与其他事情并行进行而不是一个接一个地序列化时

如果您不需要任何这些好处或程序加载提供的其他好处，那么您可以只使用普通`<script>`标签并让它们同步加载。

# php - PDO "exception safety" and writing it to a log file PHP

> ID：12697438
> 
> 赞同：2
> 
> 时间：2012-10-02T20:04:03.293
> 
> 标签：php, exception, pdo

I am writing a PDO wrapper and having this issue with catching exceptions.

I am trying to maintain *exception safety* practice,so I wanted to know how to catch an exception,writing it to a log file,and using exception safety to to do something, probably tell the user to retry action again or navigate to an error page or whatever (anything you can suggest).

So how is it done if possible?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T20:09:52.957

Look at this code snippet, it shows how it is done:

```
class MyDb extends PDO 
{
  protected $error;

  function __construct( $logger )
  {
    try {
      parent::__construct( 'mysql:host=localhost;dbname=xxxx', 'xxx', 'xxx' );
      $this->setAttribute( PDO::ATTR_EMULATE_PREPARES, false );

    }
    catch ( Exception $e ) {
       $this->error = $e->getMessage();
       // do your log writing stuff here
       $logger->Add( $this->error ); 
    }
  }
} 
```

**update:**

usage of the class:

```
$logger = new MyLogger();
$db = new MyDb( $logger ); 
```

of course, you need a logger class with a add method:

```
class MyLogger
{
  const FILENAME = '/tmp/mylog.txt' ;

  function Add( $error )
  {
    file_put_contents( self::FILENAME, $error, FILE_APPEND);
  }
} 
```

# python - 使用函数的多个python列表

> ID：12697441
> 
> 赞同：-4
> 
> 时间：2012-10-02T20:04:22.793
> 
> 标签：python

我有一个多个 python 列表，每个列表都应该转换为一个字符串。

例如：

```
lista = ['a','b']
listb = ['c','d']
listc = ['e','f']
listd = ['g','h'] 
```

输出：

```
stra = "'a','b'"
strb = "'c','d'"
strc = "'e','f'"
strd = "'g','h'" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:11:25.140

```
In [101]: lista=['a','b']
In [103]: ",".join(map(repr,lista))
Out[103]: "'a','b'" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T20:10:24.260

```
"'"+"','".join(lista)+"'" 
```

where`lista`表示字符串元素的列表。应该可以写得更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T20:08:28.877

大概是这样的？假设您将引号从输出中删除

```
stra = str(lista)[1:-1]
strb = str(listb)[1:-1]
strc = str(listc)[1:-1]
strd = str(listd)[1:-1] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T20:12:47.747

要将列表转换为元组，请使用元组内置函数：

```
list = ['a', 'b']
t = tuple(list)
print t
>> ('a', 'b') 
```

要使包含列表元素的字符串与其他字符串分隔，请使用：

```
list = ['a', 'b']
s = ', '.join(list)
print s
>> a, b 
```

# c# - 正则表达式逻辑或

> ID：12697442
> 
> 赞同：4
> 
> 时间：2012-10-02T20:04:24.877
> 
> 标签：c#, regex

这是一个纯粹的学术练习，与正则表达式和我对分组多个模式的理解有关。我有以下示例字符串

```
<xContext id="ABC">
<xData id="DEF">
<xData id="GHI">
<ID>JKL</ID>
<str>MNO</str>
<str>PQR</str>
<str>
<order id="STU">
<str>VWX</str>
</order>
<order id="YZA">
<str>BCD</str>
</order>
</str>
</xContext> 
```

使用 C# Regex 我试图提取 3 个大写字母的组。

目前，如果我使用模式`>.+?</`，我会得到

```
Found 5 matches:
>JKL</
>MNO</
>PQR</
>VWX</
>BCD</ 
```

如果我然后使用`id=".+?">`我得到

```
Found 5 matches:
id="ABC">
id="DEF">
id="GHI">
id="STU">
id="YZA"> 
```

现在我试图通过`|`对两边的每个术语使用逻辑或来组合它们`id="|>.+?">|</`

但是，这并没有给我两种模式的组合结果

我的问题是：

1.  有人可以解释为什么这不能按预期工作吗？

2.  如何更正模式以使两个结果以列出的正确顺序组合在一起

3.  如何进一步增强组合模式以仅给出字母？我希望它仍然存在`?<=`，`?=<`但只是想检查一下。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T20:06:31.670

您的正则表达式不知道从哪里开始或停止由 . 分隔的替代选项`|`。所以你需要把它们放在子模式中：

```
(id="|>).+?(">|</) 
```

但是，[正则表达式不是解析 XML 的正确工具。](https://stackoverflow.com/a/1732454/1633117)

这些圆括号还添加了捕获子模式。这个可以自己退。所以这：

```
(id="|>)(.+?)(">|</) 
```

将在索引 0 处返回整个匹配，在索引 1 处返回前分隔符，在索引 2 处返回您想要的实际匹配，在索引 3 处返回最后一个分隔符。在大多数正则表达式引擎中，您可以这样做：

```
(?:id="|>)(.+?)(?:">|</) 
```

以避免捕获分隔符。现在索引 0 将有整个匹配，索引 1 只有 3 个字母。不幸的是，我不能告诉你如何在 C# 中检索它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T20:11:37.790

您需要将备选方案组合在一起

```
(?:id="|>).+?(?:">|</) 
```

并且为了得到这些字母，只使用正向的[lookbehind和lookahead断言](http://www.regular-expressions.info/lookaround.html)

```
(?<=id="|>).+?(?=">|</) 
```

[在 Regexr 上](http://regexr.com?32b5t)查看

`?<=`以和开头的组`?=`是零宽度断言，这意味着它们不匹配（它们匹配的不是结果的一部分），它们只是“看”后面或前面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T20:19:08.697

我**建议**你使用正则表达式模式`(?:(?<=id=")|(?<=>)).+?(?=">|</)`

[在RegExr](http://regexr.com?32b63)上测试它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T20:37:36.373

捕获组 FTW！

```
@">(?<content>.+?)<|id=""(?<content>.+?)""" 
```

具体来说，*命名*捕获组，因为 .NET 正则表达式风格允许您在同一个正则表达式中多次使用相同的组名。调用`Groups["content"]`Match 对象将返回内容而不考虑其位置（即，在两个标签之间或在一个`id`属性中）。

# java - Maven 突然给我“无法收集依赖项”错误，发生了什么变化？

> ID：12697444
> 
> 赞同：2
> 
> 时间：2012-10-02T20:04:26.960
> 
> 标签：java, maven, maven-3

出于某种原因，我遇到了以下 Maven 错误，这是以前工作的，所以我不知道发生了什么变化（除了 Eclipse 自行更新，但我不知道：

> [错误] 无法在项目放大上执行目标：无法解析项目 com.o:a:jar:0.0.1-SNAPSHOT 的依赖项：无法收集 [org.simpleframework:simple:jar:4.1.21 的依赖项（编译), org.testng:testng:jar:6.7 (测试), org.jsoup:jsoup:jar:1.6.3 (编译), com.restfb:restfb:jar:1.6.9 (编译), com.google.guava :guava:jar:13.0 (编译), com.google.code:morphia:jar:0.91 (编译), org.imgscalr:imgscalr-lib:jar:4.2 (编译), commons-io:commons-io:jar: 20030203.000550（编译）、org.apache.commons:commons-lang3:jar:3.1（编译）、net.java.dev.jets3t:jets3t:jar:0.8.1（编译）、org.jooq:jooq:jar:2.4 .0（编译）、org.jooq:jooq-meta:jar:2.4.0（编译）、mysql:mysql-connector-java:jar:5.1.21（编译）、com.jolbox:bonecp:jar:0.8。 0-alpha1 (编译), com.google.code.gson:gson:jar:2.2.2 (编译), org.antlr:stringtemplate:jar:4.0.2 (编译), org.mockito:mockito-all:jar:1.9.5-rc1 (编译), rome:rome:jar:1.0 (编译), rome:modules:jar:0.3.2 (编译), args4j:args4j:jar:2.0.16 (编译), ch.qos.logback:logback-core:jar:1.0.6 (编译), ch.qos.logback:logback-classic:jar:1.0。 6（编译）、joda-time:joda-time:jar:2.1（编译）、rhino:js:jar:1.7R2（编译）、org.apache.commons:commons-math3:jar:3.0（编译）、javax .mail:mail:jar:1.4.5（编译），quickdt:quickdt:jar:0.0.1（编译），com.amazonaws:aws-java-sdk:jar:1.3.11（编译）]：没有可用的版本对于 org.codehaus.jackson:jackson-mapper-asl:jar:[1.8,1.9) 在指定范围内 -> [帮助 1]ch.qos.logback:logback-core:jar:1.0.6 (编译), ch.qos.logback:logback-classic:jar:1.0.6 (编译), joda-time:joda-time:jar:2.1 ( compile), rhino:js:jar:1.7R2 (compile), org.apache.commons:commons-math3:jar:3.0 (compile), javax.mail:mail:jar:1.4.5 (compile), quickdt:quickdt :jar:0.0.1 (compile), com.amazonaws:aws-java-sdk:jar:1.3.11 (compile)]: 没有可用于 org.codehaus.jackson:jackson-mapper-asl:jar:[1.8 的版本,1.9) 在指定范围内 -> [帮助 1]ch.qos.logback:logback-core:jar:1.0.6 (编译), ch.qos.logback:logback-classic:jar:1.0.6 (编译), joda-time:joda-time:jar:2.1 ( compile), rhino:js:jar:1.7R2 (compile), org.apache.commons:commons-math3:jar:3.0 (compile), javax.mail:mail:jar:1.4.5 (compile), quickdt:quickdt :jar:0.0.1 (compile), com.amazonaws:aws-java-sdk:jar:1.3.11 (compile)]: 没有可用于 org.codehaus.jackson:jackson-mapper-asl:jar:[1.8 的版本,1.9) 在指定范围内 -> [帮助 1]org.codehaus.jackson:jackson-mapper-asl:jar:[1.8,1.9) 在指定范围内没有可用的版本 -> [帮助 1]org.codehaus.jackson:jackson-mapper-asl:jar:[1.8,1.9) 在指定范围内没有可用的版本 -> [帮助 1]

我正在使用 Maven 版本 3.0.3。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:13:01.883

检查您的 pom.xml 配置为连接到哪个外部存储库...我以前见过它，当时意外删除了外部 maven 存储库中的一个众所周知的库，导致类似的错误（无法收集依赖项）。为确保不是这种情况，只需转到该公共存储库并检查您的工件版本是否可用。

最好的方法是拥有自己的（公司/部门范围的）maven 存储库，您应该在其中部署所有版本的工件。这样，您就可以完全控制存储库中可用/不可用的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:14:19.650

aws 和 spring 的 jackson-mapper-asl 依赖项存在损坏**的元数据。**此后已解决。我会进行清理，看看是否能解决问题。在这里查看[错误](http://jira.codehaus.org/browse/JACKSON-871)

这也与[这个问题有关。](https://stackoverflow.com/questions/12651959/maven-build-error-no-versions-available-for-org-codehaus-jacksonjackson-core-as)

# ruby-on-rails - Rails 3.2：链接 lambda 范围？

> ID：12697446
> 
> 赞同：0
> 
> 时间：2012-10-02T20:04:42.947
> 
> 标签：ruby-on-rails, named-scopes

在我的 Rails 3.2.8 应用程序中，我有一些命名范围，我想在某些情况下将它们链接在一起。

因此，例如，我有这两个范围：

```
scope :by_status, lambda { |status| if status == "All" then WorkRequest.all else WorkRequest.find_all_by_status(status) end }
scope :in_date_range, lambda { |start_date, end_date| includes([:person, :pier_module]).where("(status_date >= ?) AND (status_date <= ?)", start_date, end_date) } 
```

我单独使用它们，但我也希望能够像这样一起调用它们：

```
WorkRequest.by_status("Accepted").in_date_range("2012-01-01", "2012-10-02") 
```

当我尝试它抱怨 in_date_range 不是 Array 的方法时。

但我有另一个范围，

```
scope :active, includes([:person, :pier_module]).where("status = 'New Request'") 
```

如果我这样做

```
WorkRequest.active.in_date_range("2012-01-01", "2012-10-02") 
```

有用！显然活动范围返回一个关系，而 lambda 范围返回数组，因此不能被链接。

我很想知道为什么更简单的作用域和 lambda 作用域之间的区别，参数如何影响它，以及除了我已经完成的编写组合作用域之外我还能做些什么。

```
scope :by_status_in_date_range, lambda { |status, start_date, end_date|  includes([:person, :pier_module]).where("(status = ?) AND (status_date >= ?) AND (status_date <= ?)", status, start_date, end_date) } 
```

有效，但不是很干燥（因为我也需要单独的范围）或 Rails 风格。在这里和其他地方搜索我已经看到了类似的问题，但似乎没有一个适用于这种情况，我试图用参数链接两个 lambdas。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T20:16:59.980

发生这种情况是因为在您的范围内

```
scope :by_status, lambda { |status| if status == "All" then WorkRequest.all else WorkRequest.find_all_by_status(status) end } 
```

方法`all`和`find_all_by_status`返回`Array`而不是`ActiveRecord::Relation`. 例如，您应该将其替换`where`为。

```
scope :by_status, lambda { |status| where(:status => status) unless status == "All" } 
```

# perl - 将 LWP 与 SSL 和客户端证书一起使用

> ID：12697450
> 
> 赞同：8
> 
> 时间：2012-10-02T20:05:12.883
> 
> 标签：perl, ssl, openssl, lwp, lwp-useragent

我正在将应用程序从 PHP/cURL 移植到 Perl 和 LWP::UserAgent。我需要向 Web 服务器发出 POST 请求并提供客户端证书和密钥文件。我试图复制的 PHP 代码是这样的：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); 
curl_setopt($ch, CURLOPT_SSLCERT, "/path/to/certificate.pem"); 
curl_setopt($ch, CURLOPT_SSLKEY, "/path/to/private.key"); 
curl_setopt($ch, CURLOPT_SSLKEYPASSWD, "secretpassword"); 
```

这是我的 Perl 代码：

```
my $ua = LWP::UserAgent->new();
$ua->ssl_opts(
   SSL_verify_mode => 0,
   SSL_cert_file   => '/path/to/certificate.pem',
   SSL_key_file    => "/path/to/private.key",
   SSL_passwd_cb   => sub { return "secretpassword"; }  
); 
```

PHP 代码成功连接到服务器，但 Perl 代码失败：

SSL 读取错误错误：14094410：SSL 例程：SSL3_READ_BYTES:sslv3 警报握手失败

我无法弄清楚我错过了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:02:12.583

上面emazep的回答解决了我的问题。我正在使用来自 UPS 的示例 Perl 代码通过 XML 连接到他们的 Rate 服务。根据我的测试，这将在任何时候调用 LWP::UserAgent 而不使用您可以直接控制的参数，如果您使用其他一些为您调用 LWP 的模块，这将很方便。只需使用 Net::SSL（除了已经使用 LWP 的任何包）并设置一些环境变量：

```
...
use Net::SSL;
$ENV{HTTPS_VERSION} = 3;
$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;
my $browser = LWP::UserAgent->new();
... 
```

而已！您甚至不需要使用 $ENV{PERL_LWP_SSL_CA_FILE} 指定服务器根证书的路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T12:45:35.293

```
sub send_command(){
        my $command = shift;
        my $parser = XML::LibXML->new('1.0','utf-8');

        print color ("on_yellow"), "SEND: ", $command, color ("reset"), "\n";

        # Create a request
        my $req = HTTP::Request->new( GET => $Gateway.$command );

        # Pass request to the user agent and get a response back
        my $res;
        eval {
                 my $ua;
                 local $SIG{'__DIE__'};
                 $ua = LWP::UserAgent->new(); #  или 
                 $ua->ssl_opts( #$key => $value 
                    SSL_version         => 'SSLv3',
                    SSL_ca_file         => '/ca.pem',
                    #SSL_passwd_cb       => sub { return "xxxxx\n"; },
                    SSL_cert_file       => '/test_test_cert.pem',
                    SSL_key_file        => '/test_privkey_nopassword.pem',
                ); # ssl_opts => { verify_hostname => 0 }
                 $ua->agent("xxxxxx xxxx_tester.pl/0.1 ");
                 $res = $ua->request($req);

        };  
        warn $@ if $@;
        # Check the outcome of the response
        if ( $res->is_success ) {
                open  xxxLOG, ">> $dir/XXXX_tester.log";
                my $without_lf = $res->content;
                $without_lf =~ s/(\r|\n)//gm;
                print PAYLOG $without_lf,"\n";
                close PAYLOG;
        }
        else {
                 return $res->status_line;
        }       
        print  color ("on_blue"), "RESPONSE: ", color ("reset"), respcode_color($res->content), color ("reset"),"\n\n";
        return $res->content;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-24T12:39:43.597

确实，这有点混乱。根据您的设置，LWP::UserAgent 可能使用（至少）两个 SSL 模块之一来处理 SSL 连接。

*   IO::Socket::SSL
*   网络::SSL

第一个应该是较新版本的 LWP::UserAgent 的默认值。您可以通过在终端中为每个模块运行标准命令来测试安装了哪些：

```
perl -e 'use <module>;' 
```

IO::socket::SSL 需要带有 ssl_opts 的 SSL 配置，如您的示例所示。

Net::SSL 需要环境变量中的 SSL 配置，如 goddogsrunnings 的答案。

就我个人而言，我属于第二类，并从 [Crypt::SSLeay 页面](http://search.cpan.org/~nanis/Crypt-SSLeay-0.72/SSLeay.pm)中获得了很好的灵感。特别是名为“客户证书支持”的部分。

# mysql - 是否可以使用来自 1 个模式的 binlog 并使用 mysqlbinlog 将它们发送到另一个模式？

> ID：12697454
> 
> 赞同：3
> 
> 时间：2012-10-02T20:05:25.943
> 
> 标签：mysql, mysqldump, binlog

每天晚上，我们从生产环境运行 mysqldump 并将其转储到另一个模式，以在同一台服务器上用作测试或开发服务器。随着数据库的增长，完成需要花费很多时间。我正在想办法加快速度。我想因为我正在运行 binlog，所以我想可能每周执行一次 Mysqldump，然后在一周的剩余时间里更新 binlogs 中的其他模式。当然，如果可能的话，所有这些都需要编写脚本。

此外，mysqldump 和从一个模式导入到另一个模式是否更快，或者使用从一个模式到另一个模式的更新来更新所有表是否更快？

是否可以在同一个 mysql 实例上有一个主/主？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T04:52:19.047

您是否研究[过 MySQL 复制](http://dev.mysql.com/doc/refman/5.5/en/replication.html)？这正是它的作用。从 master 读取 binlog 并在 slave 上执行。

有一些限制，例如，为了数据完整性，它假设你不写你的奴隶。

如果您对数据进行分区，以便在不同的服务器上不会更改相同的部分，则主-主复制在技术上是可行的。不确定您是否可以对同一实例执行此操作。

# c# - 将 dll 用于 C# 控制台应用程序中的资源

> ID：12697455
> 
> 赞同：0
> 
> 时间：2012-10-02T20:05:32.790
> 
> 标签：c#, visual-studio, dllimport

我在 C# 中有一个使用外部 dll 的“控制台应用程序”，例如

```
[DllImport("utils\\rapi.dll")] 
internal static extern int CeRapiInit();
..
.. 
```

然后，我需要将此 dll (radi.dll) 从资源加载到控制台应用程序中。这个怎么做？

# php - 更新返回 true 但不更新数据库

> ID：12697456
> 
> 赞同：0
> 
> 时间：2012-10-02T20:05:33.527
> 
> 标签：php, mysql, sql, mysqli

我有一个更新函数，可以更新表中的特定行。sql 查询在 PHPmyadmin 中工作，我总是在函数上返回 true。但是，数据库没有更新。我查看了代码，没有出现任何错误。可能是什么问题呢。`primary_id`是表的主 ID，唯一的另一列是`fund_max`.

```
function change_fund_max ($mysqli, $project_id, $fund_max) {

if ($stmt = $mysqli->prepare("UPDATE `project_fund_max` SET `fund_max` = ? WHERE 
    `project_id` = ?")){
    $stmt->bind_param('ii', $project_id, $fund_max);
    $return = $stmt->execute();
    $stmt->close();
    return $return;
} else {return false;}      

} 
```

这里是函数的使用。

```
$fund_max = 11.55;
$project_id = 1;
$row43 =  change_fund_max ($mysqli, $project_id, $fund_max);
var_dump($row43); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:12:03.350

Execute 只会`false`在*失败*时返回......就像你搞砸了 SQL 之类的东西。您真正想知道的是该命令是否实际更新了行...检查[`mysqli_stmt_affected_rows`](http://www.php.net/manual/en/mysqli-stmt.affected-rows.php)是否有超过零行发生了更改。

此外，您的`project_id`和`fund_max`参数在您的`bind`;)中是错误的

结果：

```
function change_fund_max ($mysqli, $project_id, $fund_max) {
  if ($stmt = $mysqli->prepare("UPDATE `project_fund_max` SET `fund_max`=? WHERE 
     `project_id` = ?")){
     $stmt->bind_param('di', $fund_max, $project_id);
     if (!$stmt->execute()) return false;
     $count=$stmt->affected_rows;
     $stmt->close();
     return ($count>0);
  } else {
     return false;
  }
} 
```

**更新：**对于鬼鬼祟祟的“fund_max 是小数”评论......如果 fund_max 是小数，则需要绑定到双精度，否则在命令期间您将丢失小数位的任何内容`bind_param`（我的代码已更新）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:08:19.797

一个疯狂的猜测，但似乎传入的值在`$project_id`数据库中不存在。

这将使`UPDATE`命令运行，不会失败，但也不会更新任何记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T20:12:58.060

另一个猜测，`project_id`和/或`fund_max`可能不是两个整数。你可以查看[手册](http://php.net/manual/en/mysqli-stmt.bind-param.php)

此外，列的名称不应被引号（`）包围，除非它出现在名称本身中，在更新查询中。

**编辑：**

```
function change_fund_max ($mysqli, $project_id, $fund_max) {

if ($stmt = $mysqli->prepare("UPDATE project_fund_max SET fund_max = ? WHERE 
 project_id = ?")){
 $stmt->bind_param('di', $fund_max, $project_id);
 $return = $stmt->execute();
 $stmt->close();
 return $return;
}  else {return false;}      

} 
```

# android - 应用程序未运行时的 Iphone/Android GPS

> ID：12697460
> 
> 赞同：0
> 
> 时间：2012-10-02T20:05:42.057
> 
> 标签：android, iphone, gps

嘿，所以我很好奇手机的应用程序开发，以及是否有可能创建一个跟踪用户位置的应用程序，即使该应用程序当前在手机上未处于活动状态。（通过活动我的意思是用户已经打开它）。我对 iphone 做了一些初步调查，看起来你可以订阅“区域更改”，但不能订阅实际位置。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:42:37.783

是的，对于 iPhone，这是您在应用程序处于后台状态时可以执行的特定操作之一 - 请参阅 Apple 文档“ [iOS 应用程序编程指南：应用程序状态和多任务处理](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20)”。

# html - css div没有对齐浮动

> ID：12697461
> 
> 赞同：0
> 
> 时间：2012-10-02T20:05:42.963
> 
> 标签：html, css

嗨，我已经对我的 wordpress 博客的新闻内容进行了编码，我使内容向右浮动，日期和评论在内容的左侧浮动，现在除了一件事之外它完全浮动。

第一篇文章的日期和评论是一致的，但第二篇文章的日期和评论也与第一篇文章一致，而它应该与第二篇文章一致。第二个帖子下的日期和评论应该是第三个帖子的，这使得最后一个帖子没有日期时间或评论​​。下面的例子。

![在此处输入图像描述](../Images/48f63b0c9270d4349ba782e34a5b0865.png)

这是我的CSS

```
 #content {
width: 1070px;
}
.right{
position:relative;
float:right;
right:215px;
}

.left{
position:relative;
float:left;
left:200px; 
display:block;
}

.date{
width:80px;
margin: 0px 0px 0px 0px;
padding: 0px 0px 0px 0px; 
clear:left;
}

.month {
color:#fff;
font-size:15px;
font-family:eurofurence;
text-transform:uppercase;  
}

.year {
color:#fff;
padding:0 0 7px 0;
font-size:30px;
font-family:eurofurence;
text-transform:uppercase;  
}

.commentbubble{
  background: url('http://bleedartmedia.com/mock/wp-content/themes/KellyRowland/images/commentb.png') no-repeat;
  width:40px;
  height:49px;
  padding:4px 0 0 14px;
 }
    .entry {
margin: 0px 0px 0px 0px;
padding: 0px 10px 0px 10px;
border-bottom: 0px solid #cccccc;
    font-family:eurofurence;
    font-size:17px;
    width:610px;
    background:#000;
}

    .entry-top {
margin: 0 0 0px 0;
padding: 0 0 0px 0;
text-align: left;

}

    .entry-top .entry-title {
color: #fff;
    font-family:eurofurence light;
    font-size:28px;
}

    .entry-top .entry-author {
font-style: italic;
}

    .entry-title {
margin: 0;
padding: 0;
font-size: 1.3em;
font-weight: bold;
line-height: normal;
font-stretch: narrower;
}

    .entry-title a:link,
    .entry-title a:visited {
color: #fff;
    font-family:eurofurence light;
    font-size:28px;
}

    .entry-title a:hover {
color: #3E7AB9;
text-decoration: none;
}

    .entry-content {
margin: 10px 0 10px 0;
padding: 0px 10px 10px 10px; 
    font-family:eurofurence;
    font-size:17px;
} 
```

这是我的编码

```
 <div id="content">
      <?php while ( have_posts() ) : the_post() ?>

  <div class="date left">
      <div class='month'><?php the_date('M');?></div>
      <div class='year'><?php the_time('d');?></div>

     <div class="commentbubble">
   <?php comments_popup_link( __( '0', 'wpbx' ), __( '1', 'wpbx' ), __( '%', 'wpbx' ) ) ?>
      </div>
      Comments
    </div>

            <div class="entry right">
    <div class="entry-top">
            <h2 class="entry-title"><?php the_title() ?></h2>
    </div>
            <div class="entry-content clearfix">

        <div class="entry-content">
                <div id="text"><?php the_content() ?></div>
                </div>

            </div>
            <div class="entry-meta">

            </div>

    </div><!-- .post -->
      <br>
      <?php endwhile; ?>

    </div><!-- #content --> 
```

任何人都有解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:08:15.327

Try adding this to clear the float:

```
.date.left { clear: left; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:09:28.537

我猜你的 php while 循环在显示的 html 之外开始？我在这里要做的是确保您将 date-left 和 entry-right 包含在一个 div 中，并使用 php while 来重复 div。我认为您所要做的就是找到您的 while 循环开始的位置，添加一个 div，然后在它结束之前添加一个关闭 div。

```
<loop start>
<div>
....(divs containing entry and date here)
</div>
<loop end> 
```

# javascript - 在文本区域中实现片段

> ID：12697462
> 
> 赞同：0
> 
> 时间：2012-10-02T20:05:53.660
> 
> 标签：javascript, textarea

我正在尝试将片段实现到 html 文本区域中。你写了一个单词，它会查看键值对象并扩展文本（如果存在）。这是我所做的：

```
var textarea = document.getElementById("whatever");
var snippets = {
    'hello': 'Hello and welcome to my great site'
}
var prepend = "";

var checkCaps = function(e){
  if (e.keyCode != 9) return;
  e.preventDefault();
  var string = "";
  var pos = textarea.selectionStart;
  var text = textarea.value.split("");
  while (pos) {
    char = text.pop(pos);
    prepend =  (char == " ") ? " ": ""; 
    if (char == " ") break;
    string += char 
    pos -= 1;
  }
  if (snippets[string.reverse()]) {
      textarea.value = text.join("")
      textarea.value += prepend + snippets[string.reverse()]
  }
}

textarea.addEventListener("keydown", checkCaps, false);

String.prototype.reverse=function(){return this.split("").reverse().join("");} 
```

[http://jsfiddle.net/JjTmd/](http://jsfiddle.net/JjTmd/)

问题是该片段仅适用于 textarea 的最后一个单词`value`，我似乎无法确定问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:40:30.173

`Array.pop`不接受参数。它从数组中删除并返回最后一项。用于`splice`删除特定索引处的项目。

我按如下方式修改了您的功能，它似乎具有所需的行为：

```
var checkCaps = function(e){
  if (e.keyCode != 9) return;
  e.preventDefault();
  var string = "";
  var pos = textarea.selectionStart;
  var text = textarea.value.split("");
  while (pos) {
    char = text.splice(pos-1,1);
    prepend =  (char == " ") ? " ": ""; 
    if (char == " ") break;
    string += char 
    pos -= 1;
  }
  if (snippets[string.reverse()]) {
      var start = text.splice(0, pos);
      var end = text.splice(pos + string.length);

      textarea.value = start.join("") + snippets[string.reverse()] + prepend + text.join("") + end.join("");
  }
} 
```

[http://jsfiddle.net/JjTmd/1/](http://jsfiddle.net/JjTmd/1/)

此外，您可能还需要检查换行符：

```
while (pos) {
    char = text.splice(pos-1,1);

      if (char == " " || char == "\n") {
          prepend = char;
          break;
      }
    string += char 
    pos -= 1;
} 
```

[http://jsfiddle.net/JjTmd/2/](http://jsfiddle.net/JjTmd/2/)

# javascript - 如何使用纯 JavaScript 删除里面的所有内容？

> ID：12697463
> 
> 赞同：2
> 
> 时间：2012-10-02T20:05:53.210
> 
> 标签：javascript, html

我正在搜索一个 js one-liner 来删除`<html>`标签内的所有内容。

我想删除在这些之外声明的`<head>`、 the`<body>`和其他所有内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T20:11:58.017

`document.write()`将创建空页面，或者实际上是以下代码：

```
<html>
  <head></head>
  <body></body>
</html> 
```

但我不确定如果代码在外部文件中这是否不会发生冲突

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T20:15:28.697

它不是单线器，但它可以完成您要求的工作。

```
document.open();
document.write("");
document.close(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T20:20:07.977

1个班轮:)

```
window.onload = function(){ document.getElementsByTagName("html")[0].innerHTML = "";}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T20:16:44.913

加载 HTML 页面后，javascript 将加载到浏览器内存中。因此，例如，如果您要加载 jQuery，您可以简单地调用；

```
$('html').empty(); 
```

使用 Google Chrome 的 Javascript 控制台试一试。输入上面的代码，你仍然可以访问 jQuery 并操作 DOM。

**编辑**

回答你的评论约翰。你没有在你的问题中说明不能使用 jQuery。

# objective-c - NSImage 无法缩放

> ID：12697465
> 
> 赞同：8
> 
> 时间：2012-10-02T20:06:04.677
> 
> 标签：objective-c, macos, cocoa, nsimage

我正在开发一个快速应用程序，其中我有一种方法可以将@2x 图像重新缩放为常规图像。问题是它没有:(

为什么？

```
-(BOOL)createNormalImage:(NSString*)inputRetinaImagePath {

    NSImage *inputRetinaImage = [[NSImage alloc] initWithContentsOfFile:inputRetinaImagePath];

    NSSize size = NSZeroSize;
    size.width = inputRetinaImage.size.width*0.5;
    size.height = inputRetinaImage.size.height*0.5;

    [inputRetinaImage setSize:size];

    NSLog(@"%f",inputRetinaImage.size.height);

    NSBitmapImageRep *imgRep = [[inputRetinaImage representations] objectAtIndex: 0];

    NSData *data = [imgRep representationUsingType: NSPNGFileType properties: nil];

    NSString *outputFilePath = [[inputRetinaImagePath substringToIndex:inputRetinaImagePath.length - 7] stringByAppendingString:@".png"];

    NSLog([@"Normal version file path: " stringByAppendingString:outputFilePath]);
    [data writeToFile:outputFilePath atomically: NO];
    return true;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T19:18:10.390

你必须非常小心 NSImage 的 size 属性。它不一定指的是 bitmapRepresentation 的像素尺寸，它可以指例如显示的大小。一个 NSImage 可能有许多 bitmapRepresentations 用于不同的输出大小。

同样，更改 NSImage 的 size 属性不会改变 bitmapRepresentations

所以你需要做的是计算出你想要输出图像的大小，然后使用来自源 NSImage 的 bitmapRepresentation 以该大小绘制一个新图像。

获得该大小取决于您如何获得输入图像以及您对它的了解。例如，如果您确信您的输入图像只有一个 bitmapImageRep，您可以使用这种类型的东西（作为 NSImage 上的一个类别）

```
 - (NSSize) pixelSize
{
    NSBitmapImageRep* bitmap = [[self representations] objectAtIndex:0];
    return NSMakeSize(bitmap.pixelsWide,bitmap.pixelsHigh);
} 
```

即使您有多个 bitmapImageRep，第一个应该是最大的，如果这是创建 Retina 图像的大小，那么它应该是您所追求的 Retina 大小。

计算出最终尺寸后，您可以制作图像：

```
- (NSImage*) resizeImage:(NSImage*)sourceImage size:(NSSize)size
{

    NSRect targetFrame = NSMakeRect(0, 0, size.width, size.height);     
    NSImage* targetImage = nil;
    NSImageRep *sourceImageRep =
    [sourceImage bestRepresentationForRect:targetFrame
                                   context:nil
                                     hints:nil];

    targetImage = [[NSImage alloc] initWithSize:size];

    [targetImage lockFocus];
    [sourceImageRep drawInRect: targetFrame];
    [targetImage unlockFocus];

return targetImage; 
```

}

**更新**

这是 NSImage 上像素大小获取类别的更详细版本......让我们假设没有关于图像，它有多少 imageReps，它是否有*任何*bitmapImageReps......这将返回它可以找到的最大像素尺寸. 如果它找不到 bitMapImageRep 像素尺寸，它将使用它可以得到的任何其他东西，这很可能是边界框尺寸（由 eps 和 pdf 使用）。

NSImage+PixelSize.h

```
#import <Cocoa/Cocoa.h>
#import <QuartzCore/QuartzCore.h>

@interface NSImage (PixelSize)

- (NSInteger) pixelsWide;
- (NSInteger) pixelsHigh;
- (NSSize) pixelSize;

@end 
```

NSImage+PixelSize.m

```
#import "NSImage+PixelSize.h"

@implementation NSImage (Extensions)

- (NSInteger) pixelsWide
{
    /*
     returns the pixel width of NSImage.
     Selects the largest bitmapRep by preference
     If there is no bitmapRep returns largest size reported by any imageRep.
     */
    NSInteger result = 0;
    NSInteger bitmapResult = 0;

    for (NSImageRep* imageRep in [self representations]) {
        if ([imageRep isKindOfClass:[NSBitmapImageRep class]]) {
            if (imageRep.pixelsWide > bitmapResult)
                bitmapResult = imageRep.pixelsWide;
        } else {
            if (imageRep.pixelsWide > result)
                result = imageRep.pixelsWide;
        }
    }
    if (bitmapResult) result = bitmapResult;
    return result;

}

- (NSInteger) pixelsHigh
{
    /*
     returns the pixel height of NSImage.
     Selects the largest bitmapRep by preference
     If there is no bitmapRep returns largest size reported by any imageRep.
     */
    NSInteger result = 0;
    NSInteger bitmapResult = 0;

    for (NSImageRep* imageRep in [self representations]) {
        if ([imageRep isKindOfClass:[NSBitmapImageRep class]]) {
            if (imageRep.pixelsHigh > bitmapResult)
                bitmapResult = imageRep.pixelsHigh;
        } else {
            if (imageRep.pixelsHigh > result)
                result = imageRep.pixelsHigh;
        }
    }
    if (bitmapResult) result = bitmapResult;
    return result;
}

- (NSSize) pixelSize
{
    return NSMakeSize(self.pixelsWide,self.pixelsHigh);
}

@end 
```

您将`#import "NSImage+PixelSize.h"`在当前文件中使其可访问。

使用此图像类别和 resize: 方法，您将修改您的方法：

```
//size.width = inputRetinaImage.size.width*0.5;
//size.height = inputRetinaImage.size.height*0.5;
size.width  = inputRetinaImage.pixelsWide*0.5;
size.height = inputRetinaImage.pixelsHigh*0.5;

//[inputRetinaImage setSize:size];
NSImage* outputImage = [self resizeImage:inputRetinaImage size:size];

//NSBitmapImageRep *imgRep = [[inputRetinaImage representations] objectAtIndex: 0];
NSBitmapImageRep *imgRep = [[outputImage representations] objectAtIndex: 0]; 
```

那*应该*为您解决问题（附带条件：我尚未在您的代码上对其进行测试）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T20:24:13.730

我修改了我用来为你缩小图像的脚本:)

```
-(BOOL)createNormalImage:(NSString*)inputRetinaImagePath {

    NSImage *inputRetinaImage = [[NSImage alloc] initWithContentsOfFile:inputRetinaImagePath];

    //determine new size
    NSBitmapImageRep* bitmapImageRep = [[inputRetinaImage representations] objectAtIndex:0];
    NSSize size = NSMakeSize(bitmapImageRep.pixelsWide * 0.5,bitmapImageRep.pixelsHigh * 0.5);

    NSLog(@"size = %@", NSStringFromSize(size));

    //get CGImageRef
    CGImageSourceRef source = CGImageSourceCreateWithData((__bridge CFDataRef)[inputRetinaImage TIFFRepresentation], NULL);
    CGImageRef oldImageRef =  CGImageSourceCreateImageAtIndex(source, 0, NULL);
    CGImageAlphaInfo alphaInfo = CGImageGetAlphaInfo(oldImageRef);
    if (alphaInfo == kCGImageAlphaNone) alphaInfo = kCGImageAlphaNoneSkipLast;

    // Build a bitmap context
    CGContextRef bitmap = CGBitmapContextCreate(NULL, size.width, size.height, 8, 4 * size.width, CGImageGetColorSpace(oldImageRef), alphaInfo);

    // Draw into the context, this scales the image
    CGContextDrawImage(bitmap, CGRectMake(0, 0, size.width, size.height), oldImageRef);

    // Get an image from the context
    CGImageRef newImageRef = CGBitmapContextCreateImage(bitmap);

    //this does not work in my test.
    NSString *outputFilePath = [[inputRetinaImagePath substringToIndex:inputRetinaImagePath.length - 7] stringByAppendingString:@".png"];

    //but this does!
    NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString* docsDirectory = [paths objectAtIndex:0];
    NSString *newfileName = [docsDirectory stringByAppendingFormat:@"/%@", [outputFilePath lastPathComponent]];

    CFURLRef url = (__bridge CFURLRef)[NSURL fileURLWithPath:newfileName];
    CGImageDestinationRef destination = CGImageDestinationCreateWithURL(url, kUTTypePNG, 1, NULL);
    CGImageDestinationAddImage(destination, newImageRef, nil);

    if (!CGImageDestinationFinalize(destination)) {
        NSLog(@"Failed to write image to %@", newfileName);
    }

    CFRelease(destination);

    return true;
} 
```

# footer - 需要用 xsl-fo 创建一个静态页脚

> ID：12697466
> 
> 赞同：0
> 
> 时间：2012-10-02T20:06:06.640
> 
> 标签：footer, xsl-fo

在我的文档底部，我有一个地址，我需要将其保留在底部，以便可以在窗口邮件中使用该地址。我曾尝试使用静态内容标签来实现这一点，但我的文档每次都会出错。我对此很陌生，所以我猜我错过了一些东西。我希望“承包商”模板在页脚中是静态的。

```
 <xsl:template match="/" >
<fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
<fo:layout-master-set>
<!-- Setup up page size (Can be in inches or centimeters)-->
  <fo:simple-page-master
    master-name="page"
    page-width="8.50in"
    page-height="11.00in"
    margin-top="0.50in"
    margin-bottom="0.50in"
    margin-left="0.50in"
    margin-right="0.50in">
    <fo:region-body margin-top="0cm"/>
    <fo:region-before extent="0cm"/>
    <fo:region-after extent="0cm"/>
  </fo:simple-page-master>
</fo:layout-master-set>

<xsl:apply-templates select="/Permits/Permit" />

</fo:root>
</xsl:template>

<xsl:template match="Permit">
<fo:page-sequence master-reference="page">
  <fo:flow flow-name="xsl-region-body">
    <fo:block font-size="10pt">
      <xsl:call-template name="header"/>
      <xsl:call-template name="permitdetails"/>
      <xsl:call-template name="permitdetails2"/>
      <xsl:call-template name="parties"/>
      <xsl:call-template name="feesummary"/>
      <xsl:call-template name="inspections"/>
      <xsl:call-template name="contractor"/>
    </fo:block>
  </fo:flow>
  </fo:page-sequence>
  </xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:48:14.703

`<fo:static-content>``<fo:page-sequence>`如果您只是试图将`<xsl:call-template name="contractor"/>`上面的内容包装在静态内容标签中，那么它应该是它的孩子。您可以发布带有错误的模板吗？

像这样的东西应该工作：

```
<xsl:template match="Permit">
  <fo:page-sequence master-reference="page">
    <fo:static-content flow-name="xsl-region-after">
      <fo:block>
        <xsl:call-template name="contractor"/>
      </fo:block>
    </fo:static-content>
      <fo:flow flow-name="xsl-region-body">
        <fo:block font-size="10pt">
          <xsl:call-template name="header"/>
          <xsl:call-template name="permitdetails"/>
          <xsl:call-template name="permitdetails2"/>
          <xsl:call-template name="parties"/>
          <xsl:call-template name="feesummary"/>
          <xsl:call-template name="inspections"/>
        </fo:block>
      </fo:flow>
    </fo:page-sequence>
  </xsl:template>
</xsl:template> 
```

`<fo:static-content>`应该在正文流之前声明，即使它出现在输出中的正文之后。

# ios - 在 XCode 中调试 - 通过代码和断点运行

> ID：12697473
> 
> 赞同：7
> 
> 时间：2012-10-02T20:06:34.737
> 
> 标签：ios, xcode, ios-simulator

我想知道如何在 xcode 中进行最佳调试。我知道如何设置断点，但理想情况下我希望模拟器停止然后单步执行代码......

不是单步执行断点，而是逐行执行代码，这样我就可以看到它的去向、运行的方法等......

这可能吗，如果可以，怎么办？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-02T20:18:25.283

![Xcode 中的调试控件图标](../Images/1bca9960ff4d9a1aecaa7cf3385e6431.png)

在 Xcode 4 中代码窗口的左下方，您可以看到调试步骤控件。每个都有一个简短的替代文本来解释它。我将在这里稍微详细地解释一下。学习成为专家调试器是许多教科书的主题。

播放按钮替代文本：**继续程序执行**。你可能已经发现了这个。按下它会前进到下一个断点。

跳跃箭头替代文字：**跨过**。重复按此按钮将允许您在当前范围级别上推进您的程序，就像您的程序一样。它将允许您通过当前方法逐步观察程序的行为。当前方法完成后，Step over 会将您带到程序堆栈中上一级的调用方法。

向下箭头替代文本：**进入**. 按下此按钮将跟随新方法进入其范围，并允许您查看被调用方法中的代码（如果已编译用于调试）。例如，在上述调试窗口中的当前代码行上单击此按钮将带您进入 _generateSources 方法，然后您可以使用 Step over 继续执行该方法。

向上箭头替代文本：**Step out**。将您带出当前上下文并进入程序堆栈中的调用方法。这与使用 Step over 完成方法的行为相同，正常执行程序并在原始范围内执行您未使用 Step over 调试的所有代码行。

![调用堆栈视图](../Images/46e0a12ecd72610039992eda7d8eb335.png)

单击带有蓝色背景的剪影以查看当前调用堆栈。调用堆栈将始终从您当前的范围一直前进到为启动程序而调用的第一个方法。您在此处看到的每个方法都按顺序调用以到达 -[HelloWorldLayer init]。当您按下**Step out 时**，当前执行代码行将返回到 -[CCNode node]，如果您有它的源代码，您可以浏览它。

左侧是当前正在执行的代码行范围内可见的当前局部变量（此图中的第 76 行）。这些变量是您真正使用上述命令的方式，例如**Step over**。 *background*和*winSize*是在此范围内定义且当前正在使用的局部变量。当范围退出时，它们将消失。 *_cmd*是指向当前在 Objective-C 中调用的选择器的指针：-[HelloWorldLayer init]。在您成为高级调试器之前，您将不需要它。 *self*是指向一个对象的指针，该对象包含属于当前执行的类、HelloWorldLayer 和objc_super 的*所有 ivars*是指向 HelloWorldLayer 父类的指针。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-02T20:28:50.060

我会在@Thomson Corner 的答案中添加键盘快捷键。

*   使用“c”继续。's' 代表下一步，'n' 代表下一步，'f' 代表完成。我不喜欢用鼠标操作调试器。这些图标太小了，将指针放在它们上面很痛苦（偶尔）。我一直是键盘侠，对键盘真的很舒服。

*   您还应该尝试使用**po** - 它会打印出带有提前输入建议的变量值。像**po _varName**。可以轻松检查变量是否为零值等，

*   您还可以通过修改`~/.lldbinit`.

这是官方教程： http: [//lldb.llvm.org/tutorial.html](http://lldb.llvm.org/tutorial.html)。还有另一个教程：[http](http://www.informit.com/articles/article.aspx?p=1829415&seqNum=6) ://www.informit.com/articles/article.aspx?p=1829415&seqNum=6 。我上面指出的是程序员最常执行的最基本的调试功能。还有更多选项，例如异常断点和加载程序，但如果您刚刚开始，我很确定它们是另一天。

# java - 如何使用 Java API 在 Rally 中检查文件夹之间的关系

> ID：12697477
> 
> 赞同：2
> 
> 时间：2012-10-02T20:06:55.893
> 
> 标签：java, parent-child, rally

我正在尝试使用如下所示`"Parent"`的文件夹的属性`"QueryFilter"`：

```
myFolder.setQueryFilter(new QueryFilter("TestFolder.Name", "=", foldername)
    .and(new QueryFilter("Parent", "=", ??????))); 
```

我正在尝试检查此文件夹是否是另一个文件夹的子文件夹。

我不知道该放什么代替`??????`。

更新：我正在使用以下代码，但它抛出了一个空指针异常。我正在尝试查询父文件夹，因此我将 Parent 设为空。我不知道我是否应该得到空指针异常。如果是，我应该如何处理？

QueryRequest parent1 = new QueryRequest("TestFolder");

parent1.setFetch(new Fetch("Name","Project"));

parent1.setQueryFilter(new QueryFilter("name", "=", foldername).and(new QueryFilter("Parent", "=", null)).and(new QueryFilter("Project", "=", proj_ref) ));

QueryResponse parent2 = batman.query(parent1);

parent_ref = parent2.getResults().get(0).getAsJsonObject().get("_ref").getAsString();

System.out.println("父引用："+parent_ref);

System.out.println("父文件夹已经存在");

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:16:43.387

在 Rally 的 WSAPI 字段中，引用另一个对象（如 Parent）可以使用 ref url 来引用。

```
//no parent
new QueryFilter("Parent", "=", null);

//specific parent 
new QueryFilter("Parent", "=", "/testfolder/12345"); 
```

# wpf-controls - 使用调度程序从非 UI 线程访问 UI 不起作用

> ID：12697484
> 
> 赞同：1
> 
> 时间：2012-10-02T20:07:34.707
> 
> 标签：wpf-controls

我是 C# .net 的初学者。我在 wpf 中有一个简单的应用程序，它从用户线程访问列表框。在winforms中我可以使用invokerequired，使用调度程序的wpf等价物没有帮助。我的系统也为按钮挂起，所以调试是。请为以下代码提供解决方案。提前致谢

```
private void Monitor_mtd()
        {
                while (AppStatus != 0)
                {
                    if (flag2 == 1)
                    {
                        listBox1.Dispatcher.BeginInvoke(DispatcherPriority.Normal,
                            new list1MtdDelegate(list1Mtd), "Best practice");

                    }
               }
        }
        private delegate void list1MtdDelegate(string ls1);
        private void list1Mtd(string ls1)
        {
            listBox1.Items.Add(ls1);
        }

        private void button1_Click_1(object sender, RoutedEventArgs e)
        {
            Monitor = new Thread(new ThreadStart(Monitor_mtd));
            Monitor.Start();
            flag1 = 1;
        }
        private void button2_Click(object sender, RoutedEventArgs e)
        {
            flag2 = 1;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:08:39.063

您的方法中出现了几个问题。首先，将数据绑定到 ListBox 的方式，其次尝试从用户线程更新 ListBox。

您可以通过使用 ObservableCollection 解决 ListBox 的绑定问题，以便使用必要的值更新 UI（有关此内容的更多信息，请查看[这篇](https://stackoverflow.com/questions/6058280/wpf-binding-list-to-listbox)文章）。然而，这也引发了另一个问题，那就是 ObservableCollection 不能从另一个线程调用，而不是它正在调度的线程（也可以在[此处](https://stackoverflow.com/questions/2104614/updating-an-observablecollection-in-a-separate-thread)查看更多信息）。这意味着您需要 ObservableCollection 的另一个实现。Thomas Levesque 制作了一个[AsyncObservableCollection](http://www.thomaslevesque.com/2009/04/17/wpf-binding-to-an-asynchronous-collection/)，可以从任何线程进行修改，并且在修改时仍会通知 UI。

我做了一个示例实现，您可以[在此处](http://sdrv.ms/Vik6pJ)下载它，显示完整的解决方案。

# c# - 如何搜索对象是否具有值为 C# 的属性

> ID：12697489
> 
> 赞同：5
> 
> 时间：2012-10-02T20:07:40.420
> 
> 标签：c#, reflection

我想创建一个函数，我可以在其中传入任意对象并检查它是否具有具有特定值的特定属性。我试图使用反射来做到这一点，但反射仍然让我有点困惑。我希望有人能指出我正确的方向。

这是我尝试的代码，但显然它不起作用：

```
 public static bool PropertyHasValue(object obj, string propertyName, string propertyValue)
{
    try
    {
        if(obj.GetType().GetProperty(propertyName,BindingFlags.Instance).GetValue(obj, null).ToString() == propertyValue)
        {
            Debug.Log (obj.GetType().FullName + "Has the Value" + propertyValue);
            return true;    
        }

        Debug.Log ("No property with this value");
        return false;
    }
    catch
    {
        Debug.Log ("This object doesnt have this property");
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T20:13:33.003

您将需要`BindingFlags`在`Type.GetProperty`方法调用中指定更多内容。您可以使用一个`|`字符和其他标志来执行此操作，例如`BindingFlags.Public`. 其他问题不是从您的调用中检查空`obj`参数或空结果。`PropertyInfo.GetValue`

为了在你的方法中更明确，你可以这样写，然后在你认为合适的地方折叠。

```
public static bool PropertyHasValue(object obj, string propertyName, string propertyValue)
{
    try
    {
        if(obj != null)
        {
            PropertyInfo prop = obj.GetType().GetProperty(propertyName, BindingFlags.Instance | BindingFlags.Public);
            if(prop != null)
            {
                object val = prop.GetValue(obj,null);
                string sVal = Convert.ToString(val);
                if(sVal == propertyValue)
                {
                    Debug.Log (obj.GetType().FullName + "Has the Value" + propertyValue);
                    return true;    
                }
            }
        }

        Debug.Log ("No property with this value");
        return false;
    }
    catch
    {
        Debug.Log ("An error occurred.");
        return false;
    }
} 
```

在我看来，您应该接受`propertyValue`并`object`平等地比较对象，但这会表现出与原始样本不同的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-02T07:33:52.473

在这里回答这个问题为时已晚。但我正在寻找同样的问题，并用`LINQ`and以更简洁的方式解决了它`Reflection`。因此，如果您对`LINQ`. 你可以像这样得到它。

```
String propertyValue = "Value_to_be_compared";

Bool Flag = YourObject.GetType().GetProperties().Any(t => t.GetValue(objEmailGUID, null).ToString().Contains(propertyValue));

if(Flag)
{
  //spread love if true
} 
```

代码将检查您对象的任何属性是否[包含](https://stackoverflow.com/questions/2369022/using-contains-in-linq-to-sql)`Value_to_be_compared`

如果您想匹配确切的值，那么您可以选择：

```
Bool Flag = YourObject.GetType().GetProperties().Any(t => t.GetValue(objEmailGUID, null).ToString() == propertyValue); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T20:13:00.933

检索成员时，除了指定实例/静态之外，您还必须指定 Public/NonPublic：

例如，要检索公共属性，您将使用：

```
GetProperty(propertyName,BindingFlags.Instance | BindingFlags.Public) 
```

要检索所有属性，您必须同时检索 Public 和 NonPublic。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T20:22:44.330

您应该查看[msdn](http://msdn.microsoft.com/en-us/library/system.reflection.bindingflags.aspx)并阅读有关绑定标志的信息。具体来说：

### 您必须指定 Instance 或 Static 以及 Public 或 NonPublic，否则将不返回任何成员。

# parsing - 基于二次舍入域显着性的值域awk舍入

> ID：12697491
> 
> 赞同：0
> 
> 时间：2012-10-02T20:07:49.813
> 
> 标签：parsing, awk, rounding, extraction, standard-deviation

我想接受以下输入

`Average Box 1: 0.520522 Std. Dev. Box 1: 0.00297154`

...打印舍入到某个数字的第一个数字（平均值），其中该数字由 ROUNDED 标准的第一个有效数字定义。开发。

例如 --> Rounded Std 0.003 <-- (所以第三个数字)
--> 0.521 (在这种情况下)

给出一个边界情况：
`Average Box 1: 0.52156 Std. Dev. Box 1: 0.0099675`
--> Rounded Std 0.01 <-- （所以第二个数字）
--> 0.52 （在这种情况下）

我可以通过某种方式的 Awk 魔法来完成这一切吗？如果是这样，怎么做？如果没有，我可以用什么来做（我最后的手段是 C 程序，但 shell 程序似乎更有效）？

（这是用于研究项目的数据提取，又名 /nothomework。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:56:52.417

这是一种方法`awk`。

假设`infile`内容：

```
Average Box 1: 0.520522 Std. Dev. Box 1: 0.00297154
Average Box 1: 0.52156 Std. Dev. Box 1: 0.0099675 
```

运行以下脚本：

```
awk '
    ## For every line...
    { 
        ## Get number in form "[-]d.dddddde[+-]dd."
        num = sprintf( "%e", $NF ); 
        e = num;

        ## Get exponent.
        sub( /^.*e-/, "", e ); 

        ## Get the decimal number without zero digits at the beginning.
        sub( /e.*$/, "", num ); 

        ## Round the number.
        num = int(num+0.5);

        ## Apply the exponent to this no-fractional rounded number 
        for ( i = 1; i <= int(e); i++ ) {
            num = num / 10;
        }

        ## Get the position of the digit in the decimal number.
        ## Examples:
        ## If number is 0.003 the position will be two below its length
        ## Same if number is 0.01,
        ## etc.
        num = length(num) - 2;

        ## Print rounded floating point number
        printf( "%." num "f\n", $4 ) 
    }
' infile 
```

这会产生：

```
0.521
0.52 
```

# php - 两个复选框和 1 个文本字段 jquery

> ID：12697492
> 
> 赞同：0
> 
> 时间：2012-10-02T20:07:50.353
> 
> 标签：php, jquery

我有两个复选框和一个文本字段。我想在选中一个复选框时将一些数据放入字段中，并在选中另一个复选框时放入另一个数据，并且不应同时选中这两个复选框。但是，当未选中这些复选框时，文本字段应为空。当我的两个复选框都未使用以下 jquery 代码选中时，除了清空字段外，我已经实现了所有功能。

```
jQuery(document).ready(function() {
jQuery('#a').click(function() {
if(jQuery('#a').is(":checked")) {
    jQuery('#b').removeAttr('checked');
    name = "hello World!"; 
jQuery('#c').val(name);
}

});
jQuery('#b').click(function() {
    if(jQuery('#b').is(":checked")) {
        jQuery('#a').removeAttr('checked');
        name = "Not hello World!"; 
    jQuery('#c').val(name);

    }
});
jQuery('#a,#b').click(function(){
if(jQuery('#a,#b').not(":checked")){
name = "";
jQuery('#c').val(name);
}
});
    }); 
```

这是我的html：

```
 <input type="textarea" id="c" />
<input type="checkbox" id="a" />
<input type="checkbox" id="b" /> 
```

请告诉我如何在未选中两个复选框时清空文本字段。

另外，如何获取一个文本字段的值并将其放入另一个文本字段，如果第一个文本字段的值是某种类型的 html 或 javascript 代码怎么办。

还有一件事我还希望我的变量“名称”的值应该是 php 代码。请告诉我我该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:15:13.270

我认为如果你把它全部写在一个函数中会很容易。见下文，

**演示：http:** [//jsfiddle.net/XqypD/1/](http://jsfiddle.net/XqypD/1/)

1.  用来`.change`代替`.click`hander
2.  您的代码实际上有 2 个用于使您的逻辑更难的复选框的处理程序。

**代码：**

```
$(function () {
    $('#a, #b').change(function () {
        var $a = $('#a'), $b = $('#b'), $c = $('#c');
        if (this.id == 'a' && this.checked) {
           $c.val('Hello World!');
           $b.prop('checked', false);
        } else if (this.id == 'b' && this.checked) {
           $c.val('Not hello World!');
           $a.prop('checked', false);
        } else {
           $c.val('');
        }
    });
}); 
```

# javascript - Parse.com 云代码：链接函数？

> ID：12697497
> 
> 赞同：6
> 
> 时间：2012-10-02T20:08:11.357
> 
> 标签：javascript, parse-platform

我确信这是一个简单的方法，但我无法让链式函数在 Parse.com 的 Cloud Code 中工作。我知道这是可能的——所以这可能是对我的 javascript n00bness 的控诉。;>

下面是一个简单的测试函数链，它显示了我认为它应该如何工作 - 但事实并非如此。在`response.error`事件中，我似乎得到了错误，但在成功时我得到：

`{"code":141,"error":"success/error was not called"}`

以下是测试功能：

```
Parse.Cloud.define("initialFunction", function(request, response) {

  var player = request.params.player;

  Parse.Cloud.run("chainedFunction",{ player: player.id },{
    sucess: function(results) {

      response.success(results);

    },
    error: function(results, error) {
      response.error(errorMessageMaker("running chained function",error));
    }
  });

});

Parse.Cloud.define("chainedFunction", function(request, response) {

  var player = Parse.Object.extend("User");
  var findPlayer = new Parse.Query(player);
  findPlayer.get(request.params.player, {

    success: function(player) {
      var games = player.relation("games");
      games.query().find({

        success: function(games) {

          response.success(games);

        },
        error: function(players, error) {
          response.error(errorMessageMaker("finding games",error));
        }

      });
    },
    error: function(player,error) {
      response.error(errorMessageMaker("finding player",error));
    }

  });
}); 
```

..这是我对该函数的初始调用，以供参考（尽管我确信这不是问题）：

```
curl -X POST \
   -H "X-Parse-Application-Id: <id>" \
   -H "X-Parse-REST-API-Key: <id>" \
   -H "Content-Type: application/json" \
   -d '{"player":"<id>"}' \
   https://api.parse.com/1/functions/initialFunction 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T02:15:48.540

您在第一个选项对象中拼错了“成功”。

# javascript - getAttribute JS 的 IE 7 问题

> ID：12697498
> 
> 赞同：0
> 
> 时间：2012-10-02T20:08:11.963
> 
> 标签：javascript, internet-explorer, dojo, internet-explorer-7

朋友们，我需要一些帮助来解决 IE 7 问题。这是我的代码。

```
<div id="thumb-slider-tabs">
<ul class="ibm-tabs">
<li class="active"><a href="#slide1" rel="0" class="no-mobile show-tab"><img
src="/i/slider/featured_icon_1.jpg" alt=""/></a><span class="icon-overlay"></span><span>Announcement</span></li> 
```

这就是我使用以下内容定位我的 href 的方式：

```
dojo.query('#thumb-slider-tabs a').onclick(function(event){
var test = dojo.attr(event.currentTarget, 'rel');
alert(test);
switchTabs(dojo.attr(event.currentTarget, 'rel'), this.parentNode);
sliderClick = true;
}); 
```

IE 7 无法识别 onclick 并且不会发出警报，它也不会在测试中显示 rel 属性。

任何建议请让我知道我可以做些什么来解决 IE 7 中的这个问题。这适用于 Chrome、Safari、Firefox、IE 8 和 9。我需要让它在 IE 7 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:06:12.520

我有两个 ID**为 thumb-slider-tabs 的**元素，这是 xhtml 违规。在 IE 中，dojo 仅找到第一个节点并忽略第二个节点，因此 dojo.query('#thumb-slider-tabs a') 以页面上的前 3 个链接为目标，而不是像 firefox、chrome 和 safari 中的其他链接。最重要的是，我的“onclick”处理程序从未附加到实际节点，因此不会在选项卡上触发点击。

```
var anchors = dojo.query('[id="thumb-slider-tabs"] a').forEach(function(element){
        dojo.connect(element, 'onclick', function(ev){
            dojo.stopEvent(ev);
            switchTabs( dojo.attr(element, 'rel'), element.parentNode);
            sliderClick = true;
            console.log(sliderClick + " " + "sliderClick value");
        });
    }); 
```

我对我的代码进行了此更改，当我单击选项卡时会触发 onclick 事件处理程序。

# google-bigquery - 如何返回我的大型 Google BigQuery v2 响应？

> ID：12697499
> 
> 赞同：0
> 
> 时间：2012-10-02T20:08:13.010
> 
> 标签：google-bigquery

我试图运行一个简单的查询，但我得到了错误`response too large to return`

> SELECT accno, year, month, count(*) as cnt
> FROM eric.accesslogs_tbl
> GROUP BY accno, year, month
> ORDER BY cnt, year, month limit 1000;

我的数据表统计：

> 表大小：64.7 GB
> 行数：59,971,371

有解决方法吗？否则，我们无法使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:09:19.433

您达到的限制不是您可以返回的行数，限制是`GROUP BY`操作内部使用的数据量。

有一个实验性功能可以让您消除此限制：尝试使用`GROUP EACH BY`而不是`GROUP BY`.

或者，您可以在不使用实验功能的情况下使用该`TOP` [函数](https://developers.google.com/bigquery/docs/query-reference#top-function)来执行此操作。您的案例`TOP`有点棘手，因为您想要三个不同字段的最佳结果，但您可以将它们连接在一起：

```
SELECT TOP(acct_month, 1000), COUNT(*) AS cnt FROM (
    SELECT CONCAT(CONCAT(CONCAT(CONCAT(
        STRING(accno), '-'), STRING(year)), '-'), STRING(month)) 
        AS acct_month 
    FROM eric.accesslogs_tbl) 
```

结果会有点不稳定，因为它们只有一个字段 accno-year-month。

# php - 从另一个选项卡操作 Xcode 中的选项卡式 WebView

> ID：12697505
> 
> 赞同：1
> 
> 时间：2012-10-02T20:08:36.547
> 
> 标签：php, xcode, url, uiwebview, barcode

好的，我完成了正确设置一切的最初障碍，并且我有一个很棒的选项卡式应用程序，它几乎可以完成我需要的一切：

我有两个选项卡，一个扫描和一个工单选项卡。工单选项卡显示允许用户选择工单的 Web 视图。一旦他们选择了一张票，他们就可以开始扫描。扫描仪读取条形码，此条形码被成功解码并存储为名为 scanResults 的属性。从这一点开始，我希望将一个新 URL 发送到我的 Web 视图，它是当前 URL 的直接副本，但将扫描的数字添加为 php 参数。问题是，每当我尝试这个时，我的 web 视图都会冻结。看来我无法从控制它的选项卡外部操作我的 web 视图。理想情况下，我只想有一个每次扫描条形码时都会更改的 url 格式，例如：

"www.mywebsite.com?scannedNumbers="（扫描号码在这里）

谁能建议我从这里做什么？如果我需要发布我可以的代码，我知道我的扫描仪可以工作，并且我知道如果我在不首先使用扫描仪的情况下加载网站，我的 Web 视图将正常工作，因此各个元素都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:17:52.637

有一种简单的方法可以将您的网址与扫描的号码联系起来。

首先，您需要将 url 保存为字符串和扫描的号码。现在您可以使用此代码将它们组合在一起...

NSString * combinedUrl = [stringURL stringByAppendingString:stringScannedNumber];

现在您可以简单地将 NSString 转换为 NSURL 并将其粘贴到您的 web 视图中（我从未使用过 web 视图，所以我真的不知道如何摆脱 webview 问题。）

（您也可以使用共享应用程序方法在 safari 中打开 url，但这需要放在 IBAction 中...

[[UIApplication sharedApplication] openURL:[NSURL URLWithString: combinedUrl]];

)

我希望我能帮助你:)

# windows-8 - Metro Windows 8 应用程序中的全屏图像

> ID：12697506
> 
> 赞同：1
> 
> 时间：2012-10-02T20:08:37.020
> 
> 标签：windows-8, microsoft-metro

我正在开发一个 Windows 8“地铁”应用程序。在这个应用程序中，我想将图像作为壁纸。图像为 1600x900 像素大。现在，当我在模拟器中尝试更大的屏幕时，图像不会缩放以填充整个屏幕。我怎样才能做到这一点？我尝试遵循不同屏幕尺寸的 Microsoft 指南，例如将图像放在画布中，但它不起作用。有人能帮我吗？

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:29:41.307

在我的一个应用程序中，我通过使用以下 CSS 使用全屏图像作为背景水印：

```
.watermark {
    position: absolute;
    z-index: -1;
    width: 100%;
    height: 140%;
    opacity: 0.05;
} 
```

然后，在标记中，我只需添加一个带有水印类的图像标签：

```
<img class="watermark" src="#" /> 
```

就我而言，我在页面的 JS 文件中动态设置图像源，如下所示：

```
element.querySelector(".watermark").src = item.maptileUrl; 
```

上面的行从传递给页面的选定项目中获取图像（地图图块）的 URL。

我在模拟器中测试了我的应用程序，无论屏幕大小和分辨率如何，它都能正常工作。

请注意，根据您的图像是什么，使用 100% 的宽度/高度可能会导致您的图像被垂直或水平拉伸。

另一个可能更简单的解决方案是简单地将 body 标签的背景图像样式设置为所需的图像。[您可以在http://www.w3schools.com/cssref/pr_background-image.asp](http://www.w3schools.com/cssref/pr_background-image.asp)阅读更多关于此属性的信息（以及背景重复、背景大小等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T03:46:44.397

我不确定您到底尝试了什么，或者您正在查看哪些指南。但是你总是可以`ImageBrush`像这样向你的 Grid 添加一个。

```
<Page
    x:Class="App3.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App3"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid>
        <Grid.Background>
            <ImageBrush ImageSource="Assets/img101.jpg"/>
        </Grid.Background>
        <TextBlock Name="txt1" HorizontalAlignment="Center" VerticalAlignment="Center" Text="Hello World" FontFamily="Arial" FontSize="60" ></TextBlock>
    </Grid>
</Page> 
```

# php - 在 mustache.php 中替换 php switch 语句的简单方法？

> ID：12697508
> 
> 赞同：0
> 
> 时间：2012-10-02T20:08:43.377
> 
> 标签：php, mustache, mustache.php

我正在研究如何用 Mustache.php 做一些常见的事情。此时，我正在尝试替换模板中的原生 php switch 语句。

给定一个“状态”标志，例如`'A'`Active，

和一组显示选项`A => Active, I => Inactive, P=>Pending, D=>Deleted`，例如

如何通过修改模板中的数据在 Mustache.php 中制作一个漂亮的显示字符串？

表的示例数据：

```
$users = array(
array('username'=>'william', 'status'=>'A', 'date_created'=>'7-01-2012'),
array('username'=>'john', 'status'=>'P', 'date_created'=>'5-17-2012')
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:34:11.017

Mustache 的重点是让您的模板从所有逻辑中清除。小胡子模板应该是无逻辑的。对于新手来说，这是一种完全不同且令人困惑的方法。

为了解决您的问题，您需要预先重新处理`$users`数组以包含您的 Mustache 模板所需的所有内容。*例如*，如果`status`字段`switch`语句旨在显示人类可读的状态，那么您的 View 类应该类似于：

```
class View_User {

    public $_users;

    public function users()
    {
        $users = array();
        foreach ($this->_users as $user)
        {
            $user->status_label = // Use your 'switch' statement here
            $users[] = $user;
        }
        return $users;
    }
} 
```

然后你所有的 Mustache 模板需要做的，是`{{status_label}}`这样的输出：

```
<ul>
    {{#users}}
        <li>Status: {{status_label}}</li>
    {{/users}}
</ul> 
```

在 View 类中包含您的逻辑，并使您的 Mustache 模板无逻辑。以这种方式分离的 UI 代码使得以后更容易维护和重构。

# .net - Dapper dot net 中的 buffered 参数有什么作用？

> ID：12697509
> 
> 赞同：49
> 
> 时间：2012-10-02T20:08:50.640
> 
> 标签：.net, sqldatareader, dapper

Dapper dot net 有一个`buffer`参数（一个布尔值），但据我所知，它*唯一*要做的就是在返回结果之前将结果转换为列表。

根据[文档](https://github.com/StackExchange/Dapper#buffered-vs-unbuffered-readers)：

> Dapper 的默认行为是执行您的 sql 并在返回时缓冲整个阅读器。这在大多数情况下是理想的，因为它最大限度地减少了数据库中的共享锁并减少了数据库网络时间。
> 
> 但是，在执行大量查询时，您可能需要最小化内存占用并仅根据需要加载对象。为此，将 buffered: false 传递到 Query 方法中。

我不确定将结果转换为列表如何实现这一点。我错过了什么吗？我唯一的想法是它应该为 to 设置`CommandBehavior`（`ExecuteReader`但`CommandBehavior.SequentialAccess`它没有）。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-02T21:16:16.540

> 但据我所知，它唯一做的就是在返回结果之前将结果转换为列表

你没有错过任何东西。这是关键的区别。除非它不是这样的*强制转换*：实际返回的对象非常不同。基本上，有两种读取数据的方式：

*   在流式 API 中，每个元素都是单独产生的；这是非常节省内存的，但是如果您对每个项目进行大量后续处理，则意味着您的连接/命令可能会在很长一段时间内处于“活动状态”
*   在缓冲 API 中，所有行都在产生任何内容*之前被读取*

如果您正在读取大量数据（数千到数百万行），那么非缓冲 API 可能更可取。否则会使用大量内存，甚至在第一行可用之前可能会有明显的延迟。但是，在大多数常见场景中，读取的数据量都在合理的范围内，因此在将其交给调用者之前将其推送到列表中是合理的。这意味着命令/阅读器等在返回**之前已经完成。**

作为旁注，缓冲模式还避免了常见的“连接上已经有一个打开的阅读器”（或任何确切的措辞）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-05-19T16:34:44.723

在这点上我不得不不同意@chris-marisic...`data.ToList()`当使用**buffered:true**时，我在该行 ( ) 处遇到了多个“内存不足”异常。这不是一个“亿万行 X 亿列”查询，只是一个常规的 5-6k 行 SQL 结果，大约有 30 列。

这真的取决于你的配置。例如，您的 SQL 和 IIS 是否在同一台物理机器上运行。以及在 IIS 机器上安装了多少内存，以及页面文件设置是什么等。如果 Web 服务器有 2 GB 或更少 - 考虑为超重报告设置“缓冲：假”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-27T21:47:19.720

在实践中，最好**不要使用** `buffered: false`.

我发现甚至阅读了数百万行，使用缓冲结果比使用无缓冲结果更快，内存效率更高。*如果您的表有 500 列并且*您正在读取数以百万计或数以亿计的行，则可能存在交叉点。

如果您的结果集小于数十亿个值，则`buffered: false`出于任何原因都不值得使用。

在实际分析过程中，我感到震惊的是，在标准缓冲模式下，从 Sql Server 读取千兆字节数据的速度更快（快 2-6 倍）和内存效率更高。性能提升甚至考虑了可能的最微小操作，通过索引将对象添加到稀疏数组到不调整大小的数组。使用多 GB 稀疏数组从无缓冲切换到有缓冲，加载时间提高了 2 倍。使用缓冲写入字典时，在插入数百万条记录时加载时间提高了 6 倍（字典使用表的 int PK 作为键，以便尽可能地进行哈希码计算）。

与有关性能的所有事情一样，您必须始终进行分析。但是我可以非常肯定地告诉你，**总是从 Dapper 的默认缓冲**行为开始。

# android - 在经过身份验证的 HTTP 代理后面安装 ADT 插件

> ID：12697513
> 
> 赞同：2
> 
> 时间：2012-10-02T20:09:20.980
> 
> 标签：android, eclipse, adt, proxy-authentication

我正在尝试将 Android ADT 插入 Windows 7 家庭高级机器上的 64 位 eclipse indigo 安装。我的系统位于经过身份验证的 http 代理后面。

我尝试设置 http & https（不是 SOCKS，因为这会导致其他错误），它基本上会下载 ADT 下的包列表，但无法下载包（每次都会卡在 35% 左右）。

按照某些论坛的建议对 eclipse.ini 进行更改会导致 eclipse 甚至无法下载软件包列表。

问题是eclipse不想下载一些文件，尽管它设法获得了一些文件（尽管永远不足以安装一个完整的包）

我在 1) 主要浏览器 - Firefox 2) 控制面板中的 Internet 选项 3) eclipse 中设置了代理设置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:57:32.970

打开 E-Riz 提到的链接并下载 zip 文件并打开 eclipse 并添加新软件 - add-archive（定位到你下载的地方）这将帮助你安装插件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T03:20:12.527

您可以将 ADT 插件下载为存档并在本地安装。有关详细说明，请参阅[http://developer.android.com/sdk/installing/installing-adt.html#Troubleshooting](http://developer.android.com/sdk/installing/installing-adt.html#Troubleshooting)

# android - Android - 在活动 onCreate 时填充菜单

> ID：12697518
> 
> 赞同：1
> 
> 时间：2012-10-02T20:09:58.780
> 
> 标签：android, menu, contextmenu, oncreate

也许我错过了明显的，但我的菜单只有在调用 onCreateOptionsMenu(Menu menu) 时才被创建和填充，就像在[这个](http://developer.android.com/guide/topics/ui/menus.html#options-menu)例子中一样，而且这似乎只是在我按下菜单按钮后才被调用。

我想在创建活动时填充菜单，如何实现？

更新：

或许更好的问题是：如何获取我的 Activity 的 Menu 实例？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:00:43.353

创建一个包含这些状态的类，然后从 onCreateOptionsMenu() 中该类的属性设置您的启用/检查等

```
class MenuStates{

   public static boolean userDidPressTheButton;
   public static boolean serverDidRespond;
   public static boolean colorWasChanged;

}

void someEventHandler(){

   MenuStates.userDidPressTheButton = true;

}

void onCreateOptionsMenu(){

    myCheckBox.setChecked(MenuStates.userDidPressTheButton);

} 
```

[编辑]

您没有说为什么要获取菜单实例。一种方法：

```
Menu optsMenu;

...

// this is called once only before the end of the Activity onCreate().
onCreateOptionsMenu(Menu menu){

    opstMenu = menu;
    super.onCreateOptionsMenu(menu);

} 
```

之后，根据需要修改菜单。在 onPrepareOptionsMenu() 中执行任何“弹出时”的工作。

关键理解是 onCreateOptionsMenu() 和 onPrepareOptionsMenu() 的区别。

[更多编辑]

要完全控制自己：

```
Menu optsMenu;

onCreate(){
    openOptionsMenu()    // the menu won't show in onCreate but onCreateOptionsMenu is shown
    closeOptionsMenu()

}

onCreateOptionsMenu(Menu menu){
     optsMenu = menu;
}

onPrepareOptionsMenu(Menu menu){

   menu.clear();
   for (int i=0;ioptsMenu.size();i++){
       menu.add(optsMenu.get(i).getTitle());
   }

   return super.onPrepareOptionsMenu(menu);

} 
```

从文档

> 您可以安全地保留菜单（以及从它创建的任何项目），根据需要对其进行修改，直到下次调用 onCreateOptionsMenu()。

[http://developer.android.com/reference/android/app/Activity.html#onCreateOptionsMenu%28android.view.Menu%29](http://developer.android.com/reference/android/app/Activity.html#onCreateOptionsMenu%28android.view.Menu%29)

# jsp - JSF 1.2 - 遍历包含集合的 Map

> ID：12697519
> 
> 赞同：7
> 
> 时间：2012-10-02T20:10:00.417
> 
> 标签：jsp, jsf, jsf-1.2

使用 JSF **1.2**和**JSP** ....

是否可以遍历其值包含集合的 Map？

我有一个看起来像这样的地图：

`Map<String, List<Foo>> myMap;`

我想遍历 myMap 并为每个键绘制一个单独的表。

每个表将包含多行。

每行将代表 ArrayList 中映射到当前键的 Foo 对象。

遗憾的是，我们使用的是 JSF 1.2 和 JSP。

我希望我可以使用嵌套`<h:dataTable>`标签，但我没有任何成功。

* * *

***编辑***：

在咨询 BalusC 的答案后，这是我当前的 JSP 代码：

```
 <c:forEach items="#{someModule$someBean.prefMap}" var="mapEntry">
                        <br/><br/><p>Key: <h:outputText value="#{mapEntry.key}"/></p>
                        <h:dataTable value="#{mapEntry.value}" var="pref">
                            <h:column><h:outputText value="#{pref.defaultFieldLabel}"/></h:column>
                            <h:column><h:outputText value="#{pref.fieldLabel}"/></h:column>
                        </h:dataTable>
                    </c:forEach> 
```

它会导致以下异常：

`javax.servlet.jsp.JspTagException: Don't know how to iterate over supplied "items" in <forEach>`

* * *

这是我的托管 Bean 中的一些代码。

请注意，我使用的是 HashMap 和 ArrayList 而不是 Map 和 List

（我在某个地方读到你不能使用接口，这也不起作用）

```
private HashMap<String, ArrayList<Foo>> prefMap;

public HashMap<String, ArrayList<Foo>> getPrefMap()
{
  if (prefMap == null)
  {
    buildPrefMap();
  }
  return prefMap;
}

private void buildPrefMap()
{
  prefMap = new HashMap<String, ArrayList<Foo>>();
  for (Foo mdp : getFooArray())
  {
    String cat = mdp.getField().getCategory();
    if (! prefMap.containsKey(cat))
    {
      ArrayList<Foo> mpl = new ArrayList<Foo>();
      mpl.add(mdp);
      prefMap.put(cat, mpl);
    }
    else
    {
      prefMap.get(cat).add(mdp);
    }
  }
}

private void dumpMapInfo()
{
  StringBuilder sb = new StringBuilder();
  Map<String, ArrayList<Foo>> theMap = getPrefMap();
  for (String key : theMap.keySet())
  {
    sb.append(key + ": " + theMap.get(key).size());
  }
  System.out.println("\n\n" + sb.toString());
} 
```

在呈现页面之前调用`dumpMapInfo`确认 Map 不为 null 并且按预期填充。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-02T23:32:23.440

JSF 没有任何可以迭代[`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html). 只有[JSTL](https://stackoverflow.com/tags/jstl/info) [`<c:forEach>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/forEach.html)可以迭代`Map`. 每次迭代都会为您提供一个[`Map.Entry`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html)back ，该 back 又具有`getKey()`和`getValue()`方法。您可以反过来使用 a[`<h:dataTable>`](http://docs.oracle.com/javaee/5/javaserverfaces/1.2/docs/tlddocs/h/dataTable.html)来迭代地图值。

```
<c:forEach items="#{bean.map}" var="entry">
    <p>Key: <h:outputText value="#{entry.key}" /></p>
    <h:dataTable value="#{entry.value}" var="foo">
        <h:column><h:outputText value="#{foo.prop1}" /></h:column>
        <h:column><h:outputText value="#{foo.prop2}" /></h:column>
        <h:column><h:outputText value="#{foo.prop3}" /></h:column>
    </h:dataTable>
</c:forEach> 
```

* * *

**仅当您使用 JSTL 1.2 时**更新此功能。**这在 JSTL 1.1 中失败，因为`#{}`在 JSTL 1.1 标记中无法识别，因此您被迫使用`${}`，但这反过来又在嵌套的 JSF 组件中失败，因为它们`#{}`只接受。您基本上需要在整段代码中回退到“普通”JSP/HTML，或者，更好的是，使用 Tomahawk 的`<t:dataList>`.**

# c - 在没有算术运算符的情况下执行位除法

> ID：12697523
> 
> 赞同：-1
> 
> 时间：2012-10-02T20:10:31.193
> 
> 标签：c, assembly, bit-manipulation, division

我正在尝试完成一项要求我为二进制算术编写三个函数的作业。badd() 是为我提供的，所以我用它来帮助编写 bsub() 和 bmult() 函数。但是，我无法理解应该如何执行 bdiv() 函数。我知道我需要使用右移和我的 bsubb() 函数来遍历这些位，但我不知道如何实现它。以下是我到目前为止编写的函数。如果您注意到我在编写它们时犯的任何错误（意思是 bsub() 和 bmult()），请告诉我。谢谢。

```
/** This function adds the two arguments using bitwise operators. Your      
* implementation should not use arithmetic operators except for loop
* control. Integers are 32 bits long.  This function prints a message
* saying "Overflow occurred\n" if a two's complement overflow occurs
* during the addition process. The sum is returned as the value of
* the function.
*/
int badd(int x,int y){

int i;

char sum;
char car_in=0;
char car_out;
char a,b;

unsigned int mask=0x00000001;
int result=0;

for(i=0;i<32;i++){

  a=(x&mask)!=0;
  b=(y&mask)!=0;
  car_out=car_in & (a|b) |a&b;
  sum=a^b^car_in;

  if(sum) {
     result|=mask;
  }

  if(i!=31) {
     car_in=car_out;
  } else {
     if(car_in!=car_out) {
 printf("Overflow occurred\n");
     }
  }

  mask<<=1;
}

 return result;
 }

// subracts two integers by finding the compliemnt
// of "y", adding 1, and using the badd() function
// to add "-y" and "x"
int bsub(int x, int y){

return badd(x, badd(~y, 1));
}

//add x to total for however many y
int bmult(int x,int y){

int total;
int i;
for(i=0; i < = y; i++)
{
 total = badd(total,x)
}
 return total;
}

// comment me
unsigned int bdiv(unsigned int dividend, unsigned int divisor){

// write me
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T22:48:46.513

这里不多说，只是base-2中的一些基本数学：

```
unsigned int bmult(unsigned int x, unsigned int y)
{
    int total = 0;
    int i;

    /* if the i-th bit is non-zero, add 'x' to total */
    /* Multiple total by 2 each step */
    for(i = 32 ; i >= 0 ; i--)
    {
        total <<= 1;
        if( (y & (1 << i)) >> i )
        {
            total = badd(total, x);
        }
    }

    return total;
}

unsigned int bdiv(unsigned int dividend, unsigned int divisor)
{
    int i, quotient = 0, remainder = 0;

    if(divisor == 0) { printf("div by zero\n"); return 0; }

    for(i = 31 ; i >= 0 ; i--)
    {
        quotient <<= 1;
        remainder <<= 1;
        remainder |= (dividend & (1 << i)) >> i;

        if(remainder >= divisor)
        {
            remainder = bsub(remainder, divisor);
            quotient |= 1;
        }
    }

    return quotient;
} 
```

这两篇文章足以对这些示例进行编码：[Div](http://en.wikipedia.org/wiki/Division_%28digital%29)和[Mul](http://en.wikipedia.org/wiki/Kochanski_multiplication)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T00:58:05.070

在下面的代码中，我使用与问题中相同的想法来实现加法和减法。唯一实际的区别是，在我的实现中，这两个函数也接受一个进位/借入位并产生一个进位/借出位。

进位位用于通过加法实现减法，该位有助于获得进位和借出位的正确值。基本上，我使用状态寄存器中的进位标志实现典型的类似 CPU 的加法和减法。

然后使用进位/借位位通过减法实现比较。我在没有运算符的情况下实现比较`>=`，我也考虑算术，因为它不是按位计算的。由于使用了[恢复除法算法](http://en.wikipedia.org/wiki/Division_%28digital%29#Restoring_division)，除法函数中需要比较函数。

我也避免使用`!`运算符，`^1`而是使用。

除法函数将除数作为 2 `unsigned ints`，它的最重要和最不重要的部分。最后，它用余数代替最重要的部分，用商代替最不重要的部分。因此，它同时进行除法和模运算，并以典型的类似 CPU 的方式（例如 x86`DIV`指令）进行处理。该函数在成功时返回 1，在溢出/除以 0 时返回 0。

main 函数做一个简单的测试。它将除法函数的结果与直接除法的结果进行比较，并在不匹配时以错误消息终止。

我`unsigned long long`在测试部分使用能够测试除数 =`UINT_MAX`而不会陷入无限循环。测试被除数和除数的整个值范围可能需要太多时间，这就是为什么我将它们分别设置为 0xFFFF 和 0xFF 而不是 at `UINT_MAX`。

代码：

```
#include <stdio.h>
#include <limits.h>

unsigned add(unsigned a, unsigned b, unsigned carryIn, unsigned* carryOut)
{
  unsigned sum = a ^ b ^ carryIn;
  unsigned carryOuts = a & b | (a | b) & carryIn;
  *carryOut = 0;
  if (sum & (carryOuts << 1))
    sum = add(sum, carryOuts << 1, 0, carryOut);
  else
    sum |= carryOuts << 1;
  *carryOut |= (carryOuts & (UINT_MAX / 2 + 1)) >> (sizeof(unsigned) * CHAR_BIT - 1); // +-*/ are OK in constants
  return sum;
}

unsigned sub(unsigned a, unsigned b, unsigned borrowIn, unsigned* borrowOut)
{
  unsigned diff = add(a, ~b, borrowIn ^ 1, borrowOut);
  *borrowOut ^= 1;
  return diff;
}

unsigned less(unsigned a, unsigned b)
{
  unsigned borrowOut;
  sub(a, b, 0, &borrowOut);
  return borrowOut;
}

int udiv(unsigned* dividendh, unsigned* dividendl, unsigned divisor)
{
  int i;
  unsigned tmp;

  if (less(*dividendh, divisor) ^ 1/* *dividendh >= divisor */)
    return 0; // overflow

  for (i = 0; i < sizeof(unsigned) * CHAR_BIT; i++)
  {
    if (less(*dividendh, UINT_MAX / 2 + 1) ^ 1/* *dividendh >= 0x80...00 */)
    {
      *dividendh = (*dividendh << 1) | (*dividendl >> (sizeof(unsigned) * CHAR_BIT - 1));
      *dividendl <<= 1;

      *dividendh = sub(*dividendh, divisor, 0, &tmp);/* *dividendh -= divisor; */
      *dividendl |= 1;
    }
    else
    {
      *dividendh = (*dividendh << 1) | (*dividendl >> (sizeof(unsigned) * CHAR_BIT - 1));
      *dividendl <<= 1;

      if (less(*dividendh, divisor) ^ 1/* *dividendh >= divisor */)
      {
        *dividendh = sub(*dividendh, divisor, 0, &tmp);/* *dividendh -= divisor; */
        *dividendl |= 1;
      }
    }
  }

  return 1;
}

int udiv2(unsigned* dividendh, unsigned* dividendl, unsigned divisor)
{
  unsigned long long dividend =
    ((unsigned long long)*dividendh << (sizeof(unsigned) * CHAR_BIT)) | *dividendl;

  if (*dividendh >= divisor)
    return 0; // overflow

  *dividendl = (unsigned)(dividend / divisor);
  *dividendh = (unsigned)(dividend % divisor);

  return 1;
}

int main(void)
{
  unsigned long long dividend, divisor;

  for (dividend = 0; dividend <= /*UINT_MAX*/0xFFFF; dividend++)
    for (divisor = 0; divisor <= /*UINT_MAX*/0xFF; divisor++)
    {
      unsigned divh = 0, divl = (unsigned)dividend, divr = (unsigned)divisor;
      unsigned divh2 = 0, divl2 = (unsigned)dividend;

      printf("0x%08X/0x%08X=", divl, divr);

      if (udiv(&divh, &divl, divr))
        printf("0x%08X.0x%08X", divl, divh);
      else
        printf("ovf");

      printf(" ");

      if (udiv2(&divh2, &divl2, divr))
        printf("0x%08X.0x%08X", divl2, divh2);
      else
        printf("ovf");

      if ((divl != divl2) || (divh != divh2))
      {
        printf(" err");
        return -1;
      }

      printf("\n");
    }

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T21:02:12.307

1.  而除数<除数在商的小数点后加零并将被除数右移1
2.  现在检查除数中的位数是否等于被除数中的位数，如果不是，则将除数左移直到被除数中的位数等于除数中的位数。
3.  现在减去除数，除数并将商加 1，确保商在正确的位置有 1（如小数位）

重复该过程，直到股息为 0 或 1

# python - 如何在服务器上对地址进行地理编码

> ID：12697524
> 
> 赞同：3
> 
> 时间：2012-10-02T20:10:35.023
> 
> 标签：python, geocoding, google-geocoding-api

我正在使用 python 使用 Google App Engine 编写一个应用程序，我正在将一个大型维基百科列表转换为电子表格，然后将列表行输入到 Locations 中。例如这个：[http](http://en.wikipedia.org/wiki/List_of_North_Carolina_state_parks) ://en.wikipedia.org/wiki/List_of_North_Carolina_state_parks我需要把每个公园的名字变成一个地址，我想他们不会是准确的，但只要他们几乎是正确的和我一起好吧。

有什么办法可以在服务器端使用 python 来做到这一点？我知道谷歌的地理编码服务，但它都是用 javascript 完成的，而且速度有限。

有没有可以做到这一点的服务？

更新：geopy 正是我想要的。我想知道处理多个结果的最佳方法是什么。这是我的尝试：

```
 try:
             place, (lat, lng) = g.geocode(title+", North Carolina")
        except ValueError:
             geocodespot = g.geocode(title+", North Carolina", exactly_one=False)
             place, (lat, lng) = geocodespot[0] 
```

它工作得很好，但我想知道是否有更好的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T20:19:50.567

有[**`geopy`**图书馆](http://code.google.com/p/geopy/)。

示例（来自[入门页面](http://code.google.com/p/geopy/wiki/GettingStarted)）：

```
from geopy import geocoders

g = geocoders.Google()
place, (lat, lng) = g.geocode("10900 Euclid Ave in Cleveland")
print "%s: %.5f, %.5f" % (place, lat, lng) 
```

```
    10900 Euclid Ave, Cleveland, OH 44106, USA: 41.50489, -81.61027  

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:28:07.323

Google 地理编码不需要任何密钥即可使用。

可以找到有关最新版本的所有信息：

[https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)

您所要做的就是提出请求：

（例子） `http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=false`

然后使用 urllib

```
import urllib
// pull lat and lng from your parks database and construct a url like:
url = 'http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=false'

resp = urllib.urlopen(url)
resp.read() // json string convert to python dict 
```

它是速率有限的，但它是一项免费服务。肯定不是全部用 javascript 完成的。如果您只是对 nc 公园的静态列表进行地理编码，那么如果速率限制有什么关系呢？

# ruby-on-rails-3 - CarrierWave：从未处理的图像创建拇指

> ID：12697525
> 
> 赞同：1
> 
> 时间：2012-10-02T20:10:37.643
> 
> 标签：ruby-on-rails-3, carrierwave

我有 Rails 图像上传器的以下代码：

```
class PhotoUploader < BaseUploader
  ...

  # Create different versions of your uploaded files:
  version :thumb do
    process :resize_to_fill => [80, 80]
  end

  # Process files as they are uploaded:
  process resize_to_fit: [618, 412]
  process convert: 'png'
  process :watermark
  process convert: 'jpg'

  def watermark
    manipulate! do |img|
      logo = Magick::Image.read("#{Rails.root}/app/assets/images/watermark.png").first
      img = img.composite(logo, Magick::NorthEastGravity, 0, 20, Magick::OverCompositeOp)
    end
  end

end 
```

基本上，我想要两件事：

*   为原始图像添加水印
*   创建原始图像的缩略图（不带水印）

但是，水印处理似乎是在创建缩略图之前进行的，有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T10:57:01.393

事实证明这是不可能的。对原始版本的任何处理都会影响所有`versions`.

唯一的方法是保持原始版本干净并从中创建 2 个版本：`version :thumb`和`version :watermarked`.

# ios - 多选输入不会禁用 iOS Safari 上的默认值

> ID：12697526
> 
> 赞同：1
> 
> 时间：2012-10-02T20:10:42.557
> 
> 标签：ios, drop-down-menu, safari

我的网站上有一个搜索表单，其中的选择控件大致如下所示：

```
<select name="foo" size="5"  multiple="multiple">
  <option value="" selected="selected">All</option>
  <option value="AAAS">African and African American Studies</option>
  <option value="ANTH">Anthropology and Archaeology</option>
  <option value="APMA">Applied Mathematics</option>
  ...
</select> 
```

在桌面浏览器上，默认情况下会选择“全部”，但是当单击不同的值时，除非按下修饰键，否则全部都将变为未选择。显然，iOS 上没有修饰键，因此行为不同，即使单击“应用数学”或其他任何内容，“全部”仍保持选中状态。

因此，最简单的答案是要么在任何浏览器上不选择任何内容，要么接受 iOS 行为。两者都不是非常可口。我想要的是在做出另一个选择时取消选择默认值，但从那时起允许多选按照 iOS 的预期工作。我应该只输入一点 javascript，还是有纯 html 解决方案？

# php - 如何将此特定的 HTML 表解析为 php 数组？

> ID：12697527
> 
> 赞同：0
> 
> 时间：2012-10-02T20:10:41.857
> 
> 标签：php, html, simple-html-dom, domparser

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)
> [如何用 PHP 解析 HTML？](https://stackoverflow.com/questions/3650125/how-to-parse-html-with-php)

[http://www.nfl.com/widget/gc/2011/tabs/cat-post-boxscore?gameId=2012093000](http://www.nfl.com/widget/gc/2011/tabs/cat-post-boxscore?gameId=2012093000)

我希望从上面链接之类的页面中抓取数据（即游戏级别的 NFL 数据）。

NFL.com 有一个方便的 JSON API，可以让大量此类数据可访问。也就是说，对于 2010 年及以后的游戏。对于早期的游戏，我将不得不解析类似于上述页面的 HTML。

我一直在使用简单的 HTML Dom，但是在收集 tr class='tbdy1' 标记中的所有数据（因为它的长度可变）时遇到了麻烦。

# vba - VBA创建If语句来检查小时

> ID：12697532
> 
> 赞同：0
> 
> 时间：2012-10-02T20:10:53.990
> 
> 标签：vba, if-statement

我如何创建一个需要几个小时作为参数的函数。像这样的东西，

```
Function BREAK_TIME(work_time)
    If 4 <= work_time < 9.5 Then
        BREAK_TIME = 30
    End If
    If work_time >= 9.5 Then
        BREAK_TIME = 60
    End If
End Function 
```

但我怎么能说这是一个时间呢？我想做的是：花几个小时，例如`07:40:00`，告诉我员工有多少分钟的休息时间，这里是 30 分钟。

我为令人难以置信的丑陋代码道歉。第一次使用 VBA，工作起来并不容易（任何代码改进也值得赞赏:)）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:20:24.720

您可以使用具有存储各种时间单位功能的 Date 对象，也可以将小时数作为浮点数（在您的示例中为 7.666666）或作为一组小时、分钟和秒。

我修改了你的功能：

```
Function BREAK_TIME(work_time as Single) as Single
    If work_time < 4 Then
        BREAK_TIME = 0
    ElseIf work_time >= 4 And work_time < 9.5 Then
        BREAK_TIME = .5
    ElseIf work_time >= 9.5 Then
        BREAK_TIME = 1
    End If
End Function 
```

它使用浮点值来表示小时，并以小时而不是分钟返回一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:44:43.067

另一种可能性是只输入开始和结束时间。

```
Function BREAK_TIME(time_to_meet, time_you_are_off)
    'Difference in minutes
    worked = DateDiff("n", time_to_meet, time_you_are_off)

    Select Case worked
    Case Is <= 240
        BREAK_TIME = 0
    Case Is < 570
        BREAK_TIME = 30
    Case Is >= 570
        BREAK_TIME = 60
    End Select
End Function 
```

输入可能是：`BREAK_TIME #7:40:00 AM#, #2:30:00 PM#`

# php - 安装 Chamilo LMS - 找不到远程服务器或文件

> ID：12697534
> 
> 赞同：1
> 
> 时间：2012-10-02T20:11:06.147
> 
> 标签：php, apache, module

安装 Chamilo 1.9 后，我得到：

```
Remote server or file not found 
```

在 domain.com/chamilo/index.php

当我打开 domain.com/chamilo/version.php（只是 ）时，它显示 5.3.15，其中 Chamilo 需要 5.3.X。

我以为这是我的 .htaccess 文件，但它不包含任何突兀的东西：

```
# Use PHP 5.3
 AddType application/x-httpd-php53 .php
 # Check that your Apache virtualhost have this settings:

#<Directory "/var/www/chamilo-classic">
#  AllowOverride All
#  Order allow,deny
#  Allow from all
#</Directory>

RewriteEngine on 
RewriteCond %{QUERY_STRING} ^id=(.*)$
RewriteRule ^certificates/$ certificates/index.php?id=%1 [L]
RewriteRule ^([^/.]+)/?$ user.php?$1 [L]

# This will transform
# http://my.chamilo.net/certificates/?id=123     to  http://my.chamilo.net/    certificates/index.php?id=123 
# http://my.chamilo.net/juliomontoya        to       http://    my.chamilo.net/user.php?juliomontoya 
```

但我看到我的托管服务提供商关闭了 php 错误并记录了它：

```
[02-Oct-2012 19:59:20 UTC] PHP Warning:  PHP Startup: magickwand: Unable to initialize module
Module compiled with module API=20060613
PHP    compiled with module API=20090626
These options need to match in Unknown on line 0
[02-Oct-2012 19:59:20 UTC] PHP Warning:  PHP Startup: imagick: Unable to initialize module
Module compiled with module API=20060613
PHP    compiled with module API=20090626
These options need to match in Unknown on line 0
[02-Oct-2012 19:59:20 UTC] PHP Warning:  PHP Startup: PDO: Unable to initialize module
Module compiled with module API=20060613
PHP    compiled with module API=20090626
These options need to match in Unknown on line 0
[02-Oct-2012 19:59:20 UTC] PHP Warning:  PHP Startup: pdo_sqlite: Unable to initialize module
Module compiled with module API=20060613
PHP    compiled with module API=20090626
These options need to match in Unknown on line 0
[02-Oct-2012 19:59:20 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20060613/sqlite.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20060613/sqlite.so: undefined symbol: third_arg_force_ref in Unknown on line 0
[02-Oct-2012 19:59:20 UTC] PHP Warning:  PHP Startup: pdo_mysql: Unable to initialize module
Module compiled with module API=20060613
PHP    compiled with module API=20090626
These options need to match in Unknown on line 0
[02-Oct-2012 19:59:20 UTC] PHP Warning:  PHP Startup: SourceGuardian: Unable to initialize module
Module compiled with module API=20060613
PHP    compiled with module API=20090626
These options need to match in Unknown on line 0
[02-Oct-2012 19:59:20 UTC] PHP Fatal error:  Uncaught exception 'Exception' with message 'DateTime::__construct() [<a href='datetime.--construct'>datetime.--construct</a>]: It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected 'America/Chicago' for 'CDT/-5.0/DST' instead' in /home/domain/chamilo/main/inc/lib/symfony/Twig/Extension/Core.php:420
Stack trace:
#0 /home/domain/chamilo/main/inc/lib/symfony/Twig/Extension/Core.php(420): DateTime->__construct('now')
#1 /home/domain/chamilo/main/inc/lib/symfony/Twig/Extension/Core.php(390): twig_date_converter(Object(Twig_Environment), 'now', NULL)
#2 /home/domain/chamilo/archive/twig/89/5c/c0f0daf45dd618c8ea2e2bbaf856.php(121): twig_date_format_filter(Object(Twig_Environment), 'now', 'Y')
#3 /home/domain/chamilo/main/inc/lib/symfony/Twig/Template.php(278): __TwigTemplate_8 in /home/domain/chamilo/main/inc/lib/symfony/Twig/Template.php on line 282 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T16:35:54.487

在代码中添加以下行来设置应用程序的时区

date_default_timezone_set ('America / Sao_Paulo');

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T00:04:01.430

您在日志中遇到的唯一错误是（如果您向右滚动）您的 date.timezone 参数未在 php.ini 中设置（我认为您也可以使用 php_flag 在 .htaccess 中设置它）。例如，如果您在柏林，您将设置：

`php_flag date.timezone Europe/Berlin`

在您的 .htaccess 中（或者只是在您的 php.ini 中查找“时区”）。

如果您想包含下面提供的时区设置命令 date_default_timezone_set()，请将其放在 main/inc/global.inc.php 中，该命令由 Chamilo 中的所有脚本加载。在文件的开头，它应该可以工作......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T20:23:26.493

好吧，显然在 htaccess 文件中设置 PHP 扩展（5.3）不使用更新 PHP 模块。所以你需要有完整的 5.3 支持而不是这个 hacky htaccess 包括

# javascript - dijit.layout.StackContainer 大小为第一个孩子

> ID：12697539
> 
> 赞同：0
> 
> 时间：2012-10-02T20:11:56.350
> 
> 标签：javascript, dojo, dijit.layout

我是 dojo 的新手，但不是 JavaScript 的新手。

我正在测试功能并尝试构建一个基本的 dijit.layout.StackContainer（以声明方式和编程方式）。我所拥有的是我的堆栈容器的大小是根据第一个子元素的大小来确定的。我想要的是根据我放置它的元素的大小来调整它的大小。我怎样才能做到这一点？我查看了参考指南、API 文档等，但似乎没有任何帮助。:(

提前致谢

我能够让它工作的唯一方法是，如果我在希望附加我的 StackContainer 的元素上定义 height 属性，然后在声明 StackContainer 的 style 属性时手动查找 height 属性。像这样...

```
<div id="content" style="height: 100%; background-color: green;"></div>
<script>
    var domNode, controller, container;
    domNode = document.getElementById('content');
    controller = new StackController({
        containerId:"mainStack"
    }).placeAt(domNode);
    container = new StackContainer({
        id: "mainStack",
        isLayoutContainer: true,
        style: "background-color: yellow; height: "+domNode.style.height
    });
    container.addChild(new ContentPane({
        title: "Search for Images...",
        tooltip: "Click here to begin your search.",
        content: searchTemplate
    }));
    container.addChild(new ContentPane({
        title: "View Results..",
        tooltip: "After you search for a topic, click here to view your results.",
        content: resultTemplate
    }));
    container.placeAt(domNode);

    container.startup();
    controller.startup();
</script> 
```

这行得通，但由于缺乏使用道场的经验，我感觉就像是一个黑客。有没有人有任何想法或建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:14:07.400

您想将`doLayout`StackContainer 上的属性设置为 false。根据[文档](http://dojotoolkit.org/api/dijit/layout/StackContainer#doLayout)：

```
doLayout
Defined by dijit/layout/StackContainer
If true, change the size of my currently displayed child to match my size 
```

这相当于

```
container = new StackContainer({
   id: "mainStack",
   isLayoutContainer: true,
   style: "background-color: yellow;",
   doLayout:false
}); 
```

你可能还需要`doLayout:false`对孩子。

# cron - 可以写出这个每周的 crontab 表达式吗？

> ID：12697543
> 
> 赞同：0
> 
> 时间：2012-10-02T20:12:05.907
> 
> 标签：cron, crontab

我需要写一个 cron 表达式，但我真的不知道是否可以写

```
from 5 to five weeks once at 0am at tuesday 
```

所以今天运行只会从现在开始执行 5 周..

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:30:33.480

5周后运行一次命令？Cron 对此不是很方便，请尝试“at”。

```
at 00:00 + 5 weeks
at> /home/user/command
at> ^D 
```

# c++ - 在 glutKeyboardFunc 中进行的 OpenGL 状态更改不会立即可见

> ID：12697544
> 
> 赞同：1
> 
> 时间：2012-10-02T20:12:07.483
> 
> 标签：c++, opengl, glut

我有一个函数 glutKeyboardFunc(keyboard)，其中键盘有：

```
void keyboard(unsigned char key, int x, int y){
    float alpha = 1.0;
    switch(key){
    case 'c':
        glClearColor(1,0,0,alpha);
        printf("success");
        break;
    }
} 
```

这是功能的总结；它可以正常工作，但只有在发生其他一些操作后才能正常工作。例如，printf 语句在击键 'c' 时立即报告成功，但在我单击画布上的其他位置之前，背景颜色不会变为活动状态。我希望所有击键都能立即生效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:18:01.083

您需要刷新屏幕：

```
void keyboard(unsigned char key, int x, int y){
    float alpha = 1.0;
    switch(key){
    case 'c':
        glClearColor(1,0,0,alpha);
        printf("success");
        glutPostRedisplay(); // trigger the screen redisplay
        break;
    }
} 
```

# java - Math.round() 无法正常工作

> ID：12697546
> 
> 赞同：2
> 
> 时间：2012-10-02T20:12:26.150
> 
> 标签：java, android, rounding, rounding-error

这是我的程序。非常简单地说，它应该将输入的数字四舍五入到给定的小数位数。即 4.245 四舍五入到 2 位小数将得到 4.25。但是，我总是只把它四舍五入到一个整数后面......为什么？让我感到困惑的是，我在 android 中使用了相同的代码，而且它完美无缺

```
import java.util.Scanner;

public class Rounder {

public static void main(String[] args) {
    double input1, roundednumber;
    int input2;
    Scanner keyboard = new Scanner(System.in);
    System.out.println("number to round ");
    input1 = keyboard.nextDouble();
    System.out.println("decimals");
    input2 = keyboard.nextInt();

    roundednumber = rounder(input1, input2);
    System.out.println(roundednumber);
}

public static double rounder(double number, int decimals){
    int multiplier = (int) Math.pow(10, decimals);
    double roundednumber;
    roundednumber = Math.round(number*multiplier)/multiplier;
    return roundednumber;       
}
} 
```

这是我的android类的片段

```
double result1 = fv1/(Math.pow(1+(r1/n1),n1*t1));
result1 = (double) (Math.round(result1 * 100)) / 100; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T20:16:39.547

除以整数会产生整数，因此您可以使用：

```
Math.round(number * multiplier) / (double)multiplier; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:15:23.607

尝试

```
roundednumber = Math.round(number*multiplier)/((double)(multiplier)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T20:17:08.697

那是因为 Math.round() 返回一个 int 并且您正在除以一个 int。从而导致int。

# c++ - 无法打开或找到文件“afxwin.h”，使用 .dff 进行修补（Building Doom 3 源代码）

> ID：12697547
> 
> 赞同：0
> 
> 时间：2012-10-02T20:12:39.200
> 
> 标签：c++, visual-studio-2010, express, src

我在构建 Doom 3 源代码时遇到问题，因为 VS2012 Express 指示指定的文件丢失。我在网上搜索了解决方案，似乎 Doom 3 中存在 MFC 依赖项，而 VS 的 Express 版本则没有。幸运的是，我发现人们遇到了同样的问题，并且已经找到了删除依赖文件的方法。他们在修补原始源代码时提供了指向 .diff 文件的链接，立即从 D3 中删除依赖项。我不知道如何用这些文件修补 VS 或代码。帮助将不胜感激。谢谢你。

[https://bugzilla.icculus.org/show_bug.cgi?id=5290](https://bugzilla.icculus.org/show_bug.cgi?id=5290)

我尝试使用的补丁之一：[https ://bugzilla.icculus.org/attachment.cgi?id=3130&action=edit](https://bugzilla.icculus.org/attachment.cgi?id=3130&action=edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:18:49.410

Doom 3 需要使用 MFC。Visual Studio 的速成版没有 MFC，您不能只是“添加”它。

从我在链接上看到的它是一个变更日志，我不知道您需要哪个程序，但您需要将它输入到程序中并选择源的目标文件夹，程序应该对您的项目进行更改。

/+ 表示添加了一行

/- 表示删除的行

/@@ 是当前文件中的位置（我的幸运猜测？）

不幸的是，还有一些其他的事情我（还）不知道。

也许您可以从页面尝试“建议补丁的附加文件（1.51 KB，应用程序/八位字节流）”？

编辑：

将 MFC 支持添加到 express 版本有一个技巧，它正在下载 Windows Server 2003（现在您可能想要下载 2010 / 2012 版本？）驱动程序开发工具包（DDK）并安装它，将 Express 指向 MFC 位置瞧。

可以在此处找到包含下载链接和步骤的更多信息：

[http://www.codeproject.com/Articles/30439/How-to-compile-MFC-code-in-Visual-C-Express](http://www.codeproject.com/Articles/30439/How-to-compile-MFC-code-in-Visual-C-Express)

不要指望奇迹，它有它的局限性和缺点。

# ruby-on-rails - Rails：如何在“创建”操作中重定向到嵌套资源的“显示”操作？

> ID：12697553
> 
> 赞同：6
> 
> 时间：2012-10-02T20:12:57.810
> 
> 标签：ruby-on-rails

嗨，我目前有 3 个模型：用户、相册、照片。我已经进行了注册，但还没有登录/会话，因为我试图先完成相册/照片的创建。但是，当我创建相册时，URL 会从

`http://localhost:3000/users/13/albums/new`（没问题）

至

`http://localhost:3000/albums/76/photos/76`（问题）

这里的问题是： 1\. user_id 从 url 中消失。2\. 它把我送到了错误的网址。正如您在下面看到的，我正在重定向到 [@user, @album]。这不应该是专辑控制器的表演动作吗？我想要像 /users/13/albums/1 这样的网址。相反，它把我送到`photos#show`. 3\. 虽然链接错了，为什么相册ID和照片ID总是一样的？76/76 77/77 等等……我不知道那是从哪里来的……

这是我的文件：

专辑控制器

```
def show
  @user = User.find(params[:user_id])
  @album = @user.albums.find(params[:id])
  @photo = @album.photos.build(params[:photo])
  respond_to do |format|
    if @album.save
      format.html { redirect_to album_photo_path(@album), notice: 'Album was successfully created.' }
      format.json { render json: @album, status: :created, location: @album}
    else
      format.html { render action: "new" }
      format.json { render json: @album.errors, status: :unprocessable_entity }
    end
  end
end

def update
end

def edit
end

def create
  @user = User.find(params[:user_id])
  @album = @user.albums.build(params[:album])
  respond_to do |format|
    if @user.save
      format.html { redirect_to [@user, @album], notice: 'Album was successfully created.' }
      format.json { render json: @album, status: :created, location: @album}
    else
      format.html { render action: "new" }
      format.json { render json: @album.errors, status: :unprocessable_entity }
    end
  end 
end 
```

专辑/new.html.erb

```
<%= form_for (@album), url: user_albums_path, :html => { :id => "uploadform", :multipart => true } do |f| %>

<div>
    <%= f.label :name %>
    <%= f.text_field :name %>

    <%= f.label :description %>
    <%= f.text_area :description %>

    <br>

    <%=f.submit %>
</div>
<% end %> 
```

配置/路由

```
Pholder::Application.routes.draw do
resources :users do
  resources :albums 
end

resources :albums do
  resources :photos
end 
```

让我知道您是否需要更多文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T21:05:59.720

Here's the series of requests that your use case runs through:

First, the form submits some data to your `Album#create` action.

After the `Album#create` request succeeds, the request is redirected to the `Albums#show` action.

In the `Albums#show` action, the controller instantiates `@user` and `@album` with your current User and the new Album, then builds a new Photo object within the Album's `photos` collection.

The action *then* saves the `Album` record again. Since nothing has changed, this doesn't actually do anything. But it does do nothing *successfully*, so it proceeds to redirect the request to `album_photo_path`, and **this is where things go pear-shaped**. This route, as defined, leads to a `Photo#show` action, in the context of the photo's parent Album. The route expects *two* arguments, an Album and a Photo. As invoked in your code, it *shouldn't work*—throwing a Routing Error exception instead. (Believe me, I tried.)

Instead of getting hung up on minutae like that, though, I'm going to make a blind recommendation instead!

It sounds like you didn't intend for your `Album#show` action to save the album and redirect to `Photo#show` via a malformed route. I think this is the source of all three of your issues. And, ultimately, I think your `AlbumsController`'s `show` action needs to look like this:

```
def show
  @user = User.find(params[:user_id])
  @album = @user.albums.find(params[:id])
end 
```

Hope this helps!

* * *

### Edited to address Edmund's comment:

Absolutely, you can set up the `Album#show` action to allow users to add photos. This would involve two changes to what I suggest above.

In your controller, you would instantiate a new Photo on `@album`'s Photos collection, much as you had earlier:

```
def show
  @user = User.find(params[:user_id])
  @album = @user.albums.find(params[:id])
  @photo = @album.photos.build
end 
```

Then, in the `Album#show` template (e.g. `app/views/albums/show.html.erb`), you'd include a form for submitting a new photo:

```
<%= form_for [@user, @album, @photo] do |f| %>
  <%= f.text_field :caption %>
  <%= f.file_field :image %>
<%- end %> 
```

This form would submit its contents to the `user_album_photos_path`, which you may note does not yet exist. So the final change would be to nest Photos as a resource in `routes.rb`:

```
resources :users do
  resources :albums do
    resources :photos
  end
end 
```

This will provide you with the route needed to use the form. Now you'll just need to add a `Photo#create` action to handle the form submission, and you're off to the races!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:20:38.510

我相信您的创建操作应如下所示：

```
def create
  @user = User.find(params[:user_id])
  @album = @user.albums.build(params[:album])
  respond_to do |format|
    if @user.save
      format.html { redirect_to user_album_path(@album), notice: 'Album was successfully created.' }
      format.json { render json: @album, status: :created, location: @album}
    else
      format.html { render action: "new" }
      format.json { render json: @album.errors, status: :unprocessable_entity }
    end
  end 
end 
```

# ssis - 用于限制运行总计的 CTE 替代方案

> ID：12697558
> 
> 赞同：1
> 
> 时间：2012-10-02T20:13:15.317
> 
> 标签：ssis, common-table-expression

在我进入技术细节之前，我应该解释一下这个场景。我有一个表格，其中包含在特定日期到期的工作订单列表。这些工作订单用于产品托盘，一个工作订单可以包含 1 个托盘或多个托盘。我需要获取工作订单列表，其中托盘的运行总数等于或略大于固定数量（如 10 个托盘）。由于工单不能拆分，如果一个工单上达到多个托盘的托盘数，则应包括工单编号。

例如，假设我有 10 个托盘，其中（按顺序）数量为 2、3、1、2、5、1、1、2、3、1。我将返回自 2+3+1+2+5=13 以来的前 5 条记录（13 是第一个等于或大于 10 的总数）。

很抱歉长篇大论，但我想从数学的角度清楚地说明我的情况。

我创建了这个 CTE，它在技术上有效：

```
DECLARE @r INT = 10;--Set the limit of number of pallets

WITH CTE
AS (
    SELECT TOP 100 WONumber --Get only a sample of records.
        ,PalletCount
        ,RunningID = ROW_NUMBER() OVER (
            ORDER BY [Sequence Complete Date]
                ,WONumber
            )
    FROM [MyDB].[dbo].[TableName]
    WHERE ShuttleStatus IS NULL --Get pallets not already captured.
    )
SELECT WONumber
    ,PalletCount
FROM CTE AS A
WHERE (
        SELECT SUM(PalletCount)
        FROM CTE
        WHERE RunningID < A.RunningID
        ) < @r --Limit to a specific number of pallets
    OR A.RunningID = 1 
```

但是，考虑到该表包含的记录少于 1000 条，并且我已经在查询中将其限制为 100 条，它非常慢（5-10 秒）。

在这一点上，我正在寻找如何更有效地完成此任务的任何建议。我在 SSIS 有一些经验，我愿意在那里做。但是，如果不求助于脚本任务，我无法弄清楚如何做到这一点，这有点混乱。

我将不胜感激任何建议。谢谢！

# php - 邮政柜台每日、每周、每月、所有时间 php 和 mysql

> ID：12697563
> 
> 赞同：0
> 
> 时间：2012-10-02T20:13:40.530
> 
> 标签：php, mysql, wordpress

我有一个网站，上面有几篇帖子/文章，我可以在过去 24 小时、上周、上个月以及每个帖子的所有时间查看之前对其进行跟踪。

我将时间戳保存在数据库中的每个视图上。当有人打开主页时，我循环这些时间戳并将它们相应地保存到数据库中的最后 24 小时/上周/上个月/所有时间。这工作“好”（但有问题）。

**现在的问题：**

如果我有 5000 个帖子怎么办！php 脚本必须循环所有 5000 个帖子并进行节省，这会导致性能问题。该功能完成后，该站点不会立即显示。我已经收到一条错误消息“允许的内存大小已用尽......”。

我怎么解决这个问题？有什么解决办法。

在打开主页时运行此功能以获取准确的计数器数据非常重要。

如果我只在帖子视图上执行此功能，然后仅针对此帖子，数据将不准确。想象一下帖子已经好几天没有被查看了，计数器数据也不会更新。

*注意：它适用于在这种情况下不是很重要的 Wordpress 主题。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:57:18.373

您可以考虑使用 WordPress 的 cron 函数**wp_cron** ([这里](http://codex.wordpress.org/Function_Reference/wp_cron))

*注意：*与“真正的 cron 作业”不同，它确实依赖于对火的访问。

另外，考虑使用**Transients API**。瞬态使性能大幅提升！（[这里](http://codex.wordpress.org/Transients_API)）

* * *

Transients API 简单来说就是缓存一个循环。因此，不是每次循环 5000 个帖子，而是循环*一次*然后设置一些数据。在后续加载时，它将获取该缓存数据。如果数据不存在或已过期，它将循环帖子以缓存新数据。

看看这个伪代码

```
if ( false === ( $query = get_transient( 'query' ) ) ) {
    // It wasn't there, so regenerate the data and save the transient
    $query = new WP_Query( '//Your Loop Stuff' );
    set_transient( 'query', $query );
}
$timestamps = $query->TIMESTAMP(or whatever you use); 
```

# php - Phonegap 原生应用，通过实时服务器上的 PHP 邮件程序提交表单

> ID：12697566
> 
> 赞同：0
> 
> 时间：2012-10-02T20:13:42.020
> 
> 标签：php, jquery, html, cordova

我正在尝试通过本地应用程序中的实时服务器处理我的表单，而无需离开页面。下面是我用于表单、JQuery 和 PHP 的代码，但是当我发送它时，页面变为空白并将字符串放在 URL 栏中。请给我一些关于我的代码的帮助。我缩短了表格以使其更易于阅读，我还有很多其他领域。我是否需要将它们全部列在 javascript 中？

**表单上的 HTML**

```
<form action="http://mobile.koolantkoolers.com/mailer.php" method="get">
  <div data-role="fieldcontain">
    <label for="name">Name:</label>
    <input type="text" name="name" id="name" value=""  />
</div>
<div data-role="fieldcontain">
  <label for="email">Email:</label>
  <input type="email" name="email" id="email" value=""  />
</div>

  <div data-role="fieldcontain">
    <label for="company">Company:</label>
    <textarea cols="40" rows="8" name="company" id="company"></textarea>
  </div>
<input type="button" onclick="submit()" value="submit" data-icon="star" data-theme="b" />              
  </div>
  </form> 
```

**JavaScript：**

```
$.post('http://mobile.koolantkoolers.com/mailer.php', {

// These are the names of the form values

Name: $('name').val(),
Email: $('email').val(),
Company: $('company').val()

// HTML function

}, function (html) {
    // Place the HTML in a astring
    var response=html;

    // PHP was done and email sent
    if (response=="success") {
        alert("Message sent!"); 
    } else {

        // Error postback
        alert("Sorry please fill all fields!"); 
    return false;
   }
}); 
```

**然后是 PHP**

```
<?php

// VARS
$Name=$_GET["name"];
$Email=$_GET["email"];
$Company=$_GET["company"];
$Headers = "From:" . $Email;

//VALIDATION
if(
$Name=="" ||
$Email=="" ||
$Company==""
) {
    echo "Error";
} else {
    mail("nnorman@dimplexthermal.com","mobile app message",$MessageText, $Headers);
    echo "Success";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:49:43.903

我最终在我的 php.ini 上使用了以下代码和发布方法。您只需要确保您的 div 命名约定与您的代码相匹配。这将发布表单的结果并用感谢信息交换 div。请参阅下面的 HTML 和 Javascript。

```
<div data-role="content">
<form id="myform">
  <div data-role="fieldcontain">
    <label for="name">Name:</label>
    <input type="text" name="name" id="name" value=""  />
</div>
<div data-role="fieldcontain">
  <label for="email">Email:</label>
  <input type="email" name="email" id="email" value=""  />
</div>
<div data-role="fieldcontain">
  <label for="company">Company Name:</label>
  <input type="text" name="company" id="company" value=""  />
</div>        
<input type="submit" name="submit" value="Submit" data-icon="star" data-theme="b" />
</form>

</div>
<div data-role="content" style="display:none" id="formResponse">
    thank you, your quote has been received and you will hear back from us shortly.
    </div> 
```

**Javascript：**

```
$(document).ready(function() {
            //When the form with id="myform" is submitted...
            $("#myform").submit(function() {
                //Send the serialized data to mailer.php.
                $.post("mailer.php", $("#myform").serialize(),
                    //Take our repsonse, and replace whatever is in the "formResponse"
                    //div with it.

                    function(data) {
                    $("#myform").html( $("#formResponse").html() );
                    }
                );
                return false;
            });

        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:37:02.427

这真的很简单，在脚本中，您使用要发布的数据和要发送到的 URL 指定表单 ID，每个表单将数据发送到您指向的 URL，而无需更改 PHP 中的任何内容，只需将此添加到在您的提交按钮中调用的 javascript 函数中。

```
var form = document.getElementById('form-id');
var formData = new FormData(form); 
```

这个新的 FormData 实例是您传递 send() 调用所需的全部内容：

```
var xhr = new XMLHttpRequest();
// Add any event handlers here...
xhr.open('POST', '/upload/path', true);
xhr.send(formData); 
```

检查[链接](http://blog.new-bamboo.co.uk/2012/01/10/ridiculously-simple-ajax-uploads-with-formdata)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T07:12:21.400

一个简单的方法是使用 jQuery 进行这样的 post 调用。

event.preventDefault(); 防止以通常的方式提交表单，以便您可以留在同一页面上。

$("#ID_OF_FORM").submit(函数(事件) {

event.preventDefault();

$.post("http://mobile.koolantkoolers.com/mailer.php", $("ID_OF_FORM").serialize()); }

# sql - 使用联合和派生别名表从存储过程中的第一个表中排除结果

> ID：12697567
> 
> 赞同：2
> 
> 时间：2012-10-02T20:13:42.270
> 
> 标签：sql, union, derived-table

我有一个带有联合和派生表情况的存储过程。存储过程基本上需要返回所有`Cases`行 where `Cases.AssnKey = AssnCtrl.pKey`，包括不符合第一个表（因此是第二个）中的条件的行。

我已经尝试了几种方法。我的第一次尝试返回了所有符合条件的行，然后我了解到客户希望查看包含的所有案例。有一次，我有一个版本，它返回所有`Case`行加上符合第一个表中条件的行的重复项。在第二个表中，我试图从第一个表中排除记录以防止重复。

我已经到达以下，它解析，但抛出一个错误

> “无效的对象名称'A'”。

我没有包括我的输入参数或声明，但它们都工作正常。任何帮助是极大的赞赏！

```
SELECT * 
FROM
   (SELECT 
       c.pKey, c.Name, c.LName, c.Balance, 
       SUM(cs.CAmount * @InterestRate * @DaysDiff) AS InterestAccrued, 
       ch.CollDesc, ac.Name AS AssociationName, (ac.IntrRate/100) AS IntrRate,
       SUM(CAmount) AS ChargeCodeBalance, c.MgmtKey,
       CASE c.PayPlanFlg
            WHEN 0 THEN 'No'
            WHEN 1 THEN 'Yes'
       END AS PayPlanFlg,
       CASE c.HoldFlg
            WHEN 0 THEN 'No'
            WHEN 1 THEN 'Yes'               
       END AS HoldFlg,
       CASE ac.AssmtChrgFreq
            WHEN 'D' THEN 'Daily'
            WHEN 'M' THEN 'Monthly'
            WHEN 'B' THEN 'Bi-monthly'
            WHEN 'Q' THEN 'Quarterly'
            WHEN 'A' THEN 'Annually'
            WHEN 'S' THEN 'Semi-annually'
            ELSE 'Unknown'
        END AS AssmtChrgFreq
    FROM Cases c 
    LEFT JOIN CaseSumm cs ON c.ClientKey = cs.ClientKey AND c.pKey = cs.CaseKey 
    INNER JOIN CollectHead ch ON c.ClientKey = ch.ClientKey AND ch.pKey = c.CollHeadKey 
    INNER JOIN AssnCtrl ac ON c.ClientKey = ac.ClientKey AND c.AssnKey = ac.pKey
    WHERE 
         c.ClientKey = @ClientKey
         AND c.AssnKey = @AssnKey   
         AND cs.TranCode IN (SELECT ChargeCode.RefNum.value('.', 'INT')
                             FROM @ChargeCodesXML.nodes('/chargecode/refnum') AS ChargeCode(RefNum))
        AND cs.TranDate >= @BeginDate 
        AND cs.TranDate <= @EndDate
        AND c.Active = 1
    GROUP BY c.pKey, c.Name, c.LName, c.Balance, ch.CollDesc, c.PayPlanFlg, c.HoldFlg, ac.Name, ac.IntrRate, ac.AssmtChrgFreq, c.MgmtKey) As A

    UNION       

    SELECT * FROM
    (SELECT c2.pKey, c2.Name, c2.LName, c2.Balance, 0 AS InterestAccrued, ch2.CollDesc, ac2.Name AS AssociationName, 0 AS IntrRate,
        0 AS ChargeCodeBalance, c2.MgmtKey,
        CASE c2.PayPlanFlg
            WHEN 0 THEN 'No'
            WHEN 1 THEN 'Yes'
        END
        AS PayPlanFlg,
        CASE c2.HoldFlg
            WHEN 0 THEN 'No'
            WHEN 1 THEN 'Yes'               
        END
        AS HoldFlg,
        CASE ac2.AssmtChrgFreq
            WHEN 'D' THEN 'Daily'
            WHEN 'M' THEN 'Monthly'
            WHEN 'B' THEN 'Bi-monthly'
            WHEN 'Q' THEN 'Quarterly'
            WHEN 'A' THEN 'Annually'
            WHEN 'S' THEN 'Semi-annually'
            ELSE 'Unknown'
        END
        AS AssmtChrgFreq
    FROM Cases c2 INNER JOIN CollectHead ch2
        ON c2.ClientKey = ch2.ClientKey
        AND ch2.pKey = c2.CollHeadKey INNER JOIN AssnCtrl ac2
        ON c2.ClientKey = ac2.ClientKey
        AND c2.AssnKey = ac2.pKey
    WHERE c2.ClientKey = @ClientKey
        AND c2.AssnKey = @AssnKey               
        AND c2.Active = 1
        AND c2.pKey NOT IN (SELECT pKey FROM A)
    GROUP BY c2.pKey, c2.Name, c2.LName, c2.Balance, ch2.CollDesc, c2.PayPlanFlg, c2.HoldFlg, ac2.Name, ac2.IntrRate, ac2.AssmtChrgFreq, c2.MgmtKey) As B 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:22:11.190

在您`(select pKey from A)`接近尾声时，您正在尝试使用 UNION 第一部分中子查询中的 A。您无法从那里访问它。这样做的方法是将 A 定义为 CTE，并访问它两次。

但是，请注意 A 会被**评估两次**，并且在极少数情况下，两者`A's`实际上可能会略有不同。

```
;WITH A AS (
    SELECT 
       c.pKey, c.Name, c.LName, c.Balance, 
       SUM(cs.CAmount * @InterestRate * @DaysDiff) AS InterestAccrued, 
       ch.CollDesc, ac.Name AS AssociationName, (ac.IntrRate/100) AS IntrRate,
       SUM(CAmount) AS ChargeCodeBalance, c.MgmtKey,
       CASE c.PayPlanFlg
            WHEN 0 THEN 'No'
            WHEN 1 THEN 'Yes'
       END AS PayPlanFlg,
       CASE c.HoldFlg
            WHEN 0 THEN 'No'
            WHEN 1 THEN 'Yes'               
       END AS HoldFlg,
       CASE ac.AssmtChrgFreq
            WHEN 'D' THEN 'Daily'
            WHEN 'M' THEN 'Monthly'
            WHEN 'B' THEN 'Bi-monthly'
            WHEN 'Q' THEN 'Quarterly'
            WHEN 'A' THEN 'Annually'
            WHEN 'S' THEN 'Semi-annually'
            ELSE 'Unknown'
        END AS AssmtChrgFreq
    FROM Cases c 
    LEFT JOIN CaseSumm cs ON c.ClientKey = cs.ClientKey AND c.pKey = cs.CaseKey 
    INNER JOIN CollectHead ch ON c.ClientKey = ch.ClientKey AND ch.pKey = c.CollHeadKey 
    INNER JOIN AssnCtrl ac ON c.ClientKey = ac.ClientKey AND c.AssnKey = ac.pKey
    WHERE 
         c.ClientKey = @ClientKey
         AND c.AssnKey = @AssnKey   
         AND cs.TranCode IN (SELECT ChargeCode.RefNum.value('.', 'INT')
                             FROM @ChargeCodesXML.nodes('/chargecode/refnum') AS ChargeCode(RefNum))
        AND cs.TranDate >= @BeginDate 
        AND cs.TranDate <= @EndDate
        AND c.Active = 1
    GROUP BY c.pKey, c.Name, c.LName, c.Balance, ch.CollDesc, c.PayPlanFlg, c.HoldFlg, ac.Name, ac.IntrRate, ac.AssmtChrgFreq, c.MgmtKey
)
SELECT * 
FROM A

    UNION       

    SELECT * FROM
    (SELECT c2.pKey, c2.Name, c2.LName, c2.Balance, 0 AS InterestAccrued, ch2.CollDesc, ac2.Name AS AssociationName, 0 AS IntrRate,
        0 AS ChargeCodeBalance, c2.MgmtKey,
        CASE c2.PayPlanFlg
            WHEN 0 THEN 'No'
            WHEN 1 THEN 'Yes'
        END
        AS PayPlanFlg,
        CASE c2.HoldFlg
            WHEN 0 THEN 'No'
            WHEN 1 THEN 'Yes'               
        END
        AS HoldFlg,
        CASE ac2.AssmtChrgFreq
            WHEN 'D' THEN 'Daily'
            WHEN 'M' THEN 'Monthly'
            WHEN 'B' THEN 'Bi-monthly'
            WHEN 'Q' THEN 'Quarterly'
            WHEN 'A' THEN 'Annually'
            WHEN 'S' THEN 'Semi-annually'
            ELSE 'Unknown'
        END
        AS AssmtChrgFreq
    FROM Cases c2 INNER JOIN CollectHead ch2
        ON c2.ClientKey = ch2.ClientKey
        AND ch2.pKey = c2.CollHeadKey INNER JOIN AssnCtrl ac2
        ON c2.ClientKey = ac2.ClientKey
        AND c2.AssnKey = ac2.pKey
    WHERE c2.ClientKey = @ClientKey
        AND c2.AssnKey = @AssnKey               
        AND c2.Active = 1
        AND c2.pKey NOT IN (SELECT pKey FROM A)
    GROUP BY c2.pKey, c2.Name, c2.LName, c2.Balance, ch2.CollDesc, c2.PayPlanFlg, c2.HoldFlg, ac2.Name, ac2.IntrRate, ac2.AssmtChrgFreq, c2.MgmtKey) As B 
```

# grails - 如何使 Spock Helper 方法在所有规格或全局范围内可用

> ID：12697568
> 
> 赞同：2
> 
> 时间：2012-10-02T20:13:43.053
> 
> 标签：grails, groovy, spock

我在特定规范中有 Spock Helper 方法。此方法生成字符串以测试大小约束：

```
def genString(size) {
    def nameTooLong = 'x'
    size.times { nameTooLong <<=  "x" }
    return nameTooLong
} 
```

我也想在其他规范中重用这个辅助方法。怎么做？

感谢您的帮助

ps 是否有 groovy kung-fu 可以在一条短线中完成同样的事情，所以我可以在初始化实例时作为参数传递？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-01T20:26:54.663

你也可以使用继承。

```
class SharedFixture extends Specification {
    def sharedMethod() {
       ......
    }
} 
```

然后

```
class TestClass extends SharedFixture {
    def test() {
       sharedMethod()
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T20:34:46.150

我对 Spock 测试和跨规范重新使用生成测试数据的辅助方法有类似的需求。

这些辅助方法始于一个规范。

我刚刚重构并创建了一个带有静态方法的辅助类。

您也可以这样做，创建一个辅助类并像这样移动您的测试方法：

```
class TestDataGen {

    ....
    public static String genString(size) {
        def nameTooLong = 'x'
        size.times { nameTooLong <<=  "x" }
        return nameTooLong
    }
    ....
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T08:52:09.357

您还可以将功能更改为：

```
def genString(size) {
  'x' * ( size + 1 )
} 
```

或者

```
def genString(size) {
  'x'.padLeft( size + 1, 'x' )
} 
```

第二个，您可能可以内联到您的测试中，因为它非常独立

# c# - 如何从 C# DLL 绘制到非 .Net 主机窗口？

> ID：12697570
> 
> 赞同：1
> 
> 时间：2012-10-02T20:13:50.773
> 
> 标签：c#, delphi, window, draw, handle

我在 Delphi 6 中有一个应用程序，由于库问题，我需要用 C# 或 C++ 编写一个组件，该组件将存在于 Delphi 表单中。该程序目前是 Delphi 和 C#，它调用 C# 进行对话框。我需要一些嵌入到 TForm 中的东西，它可以让我在 C# 中绘制该组件。

我想我可以在 Delphi 中创建一个组件，在它的`Paint`例程中我只是调用 DLL 中的函数。但是我应该将什么传递给 C# DLL 以便它可以在该窗口中进行绘制，以及如何让 C# 真正做到这一点？

我想只要能够在 C# 中按需绘制一些任意 DC 就是我需要做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:34:32.207

C＃

```
public static void DoIt(IntPtr srcWindow)
{
Graphics g = Graphics.FromHwnd(srcWindow);
g.DrawLine(new Pen(Color.Red), new Point(0, 0), new Point(400, 400));
} 
```

德尔福：

```
type
    intPtrArgs = procedure(hand : hwnd); StdCall;

procedure T_CS.RePaint;  //extends TWinControl
var
  Hm: HModule;
  ExtDoIt: intptrArgs;  
begin
  Hm := LoadLibrary(pchar('my.dll'));
  try
    @ExtDoIt := GetProcAddress(Hm, 'DoIt');
    ExtDoIt(Handle);
  finally
    FreeLibrary(Hm);
  end;
end; 
```

在每种油漆上加载卸载是很愚蠢的，但例如，它可以工作。

对于尝试执行此操作的其他人，您将需要搜索“反向 P/Invoke”，以便能够以另一种语言查看 C# DLL 过程。

反向 P/Invoke 示例 [http://www.blong.com/Conferences/BorConUK2002/Interop1/Win32AndDotNetInterop.htm](http://www.blong.com/Conferences/BorConUK2002/Interop1/Win32AndDotNetInterop.htm)

# ruby - 从 Ruby 方法返回变量/数组时出错

> ID：12697573
> 
> 赞同：0
> 
> 时间：2012-10-02T20:14:40.907
> 
> 标签：ruby

在我的 capistrano 任务中，我正在调用该`superfunction`方法。不幸的是，它抛出了一个`Unexpected Return`错误。我需要从`superfunction`方法中获取输出，以便在我的任务中进一步解析它。

```
def superfunction(cmd_type, command, client)
    run "#{command}" do |channel, stream, data|
        hostname = "#{channel[:host]}".tr('"','')
        result = "#{data}".to_s.strip
        return hostname, result
    end

end

task :gather, :roles => :hosts do
...
   servername, redhat_version = superfunction("redhat_version", "cat /etc/redhat-release", client)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:29:31.423

正在生成错误，因为您的块在方法返回后被调用（可能 capistrano 将其存储在内部）。作为一种简单的解决方法，您可以使用块获取所需的变量：

```
def superfunction(cmd_type, command, client)
  run "#{command}" do |channel, stream, data|
    hostname = "#{channel[:host]}".tr('"','')
    result = "#{data}".to_s.strip
    yield(hostname, result)
  end
end

task :gather, :roles => :hosts do
  superfunction("redhat_version", "cat /etc/redhat-release", client) do |servername, redhat_version|
    # Use servername and redhat_version here
  end
end 
```

# php - set_error_handler 回调函数中的 $errno 是什么？

> ID：12697574
> 
> 赞同：1
> 
> 时间：2012-10-02T20:14:43.870
> 
> 标签：php, error-handling

set_error_handler 回调函数接受 2 个强制参数和 3 个可选参数。其中之一是 $errno （第一个）。

它有什么用？它是 E_ALL 还是 E_NOTICE .... 的整数表示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:17:26.280

从[`set_error_handler()`](http://php.net/manual/en/function.set-error-handler.php)有关*错误处理程序*的文档中：

> 第一个参数**errno**包含引发的错误级别，作为一个整数。

它将是[预定义的误差常数](http://www.php.net/manual/en/errorfunc.constants.php)之一，例如`E_USER_WARNING`,`E_NOTICE`等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T20:19:17.420

$errno 包含引发错误的级别，作为整数。

我认为这个例子会说清楚（不是我的代码）：

```
 switch ($errno) {
    case E_USER_ERROR:
        echo "<b>My ERROR</b> [$errno] $errstr<br />\n";
        echo "  Fatal error on line $errline in file $errfile";
        echo ", PHP " . PHP_VERSION . " (" . PHP_OS . ")<br />\n";
        echo "Aborting...<br />\n";
        exit(1);
        break;

    case E_USER_WARNING:
        echo "<b>My WARNING</b> [$errno] $errstr<br />\n";
        break;

    case E_USER_NOTICE:
        echo "<b>My NOTICE</b> [$errno] $errstr<br />\n";
        break;

    default:
        echo "Unknown error type: [$errno] $errstr<br />\n";
        break;
    } 
```

# powerpivot - 使用 SQL 查询将数据导入 Power Pivot 表

> ID：12697577
> 
> 赞同：0
> 
> 时间：2012-10-02T20:14:53.443
> 
> 标签：powerpivot

我遇到了一个让我有点困惑的路障，希望你们能给我一个提示。我正在尝试从 oracle 数据库中的视图导入数据。非常简单的选择语句，如下所示：

```
select n."A", n"B", p."C", p."D", p2."F" from N n, P p, Q p2 where n."A"=p."A" and n."E"=p2."E" 
```

其中 N 是视图，P、Q 是 Oracle 数据库中的表。上面是实际 SQL 语句的简单版本，因为后者实际上比上面的语句有更多的字段，但问题的性质是相同的。我从 SQL Developer 运行了该语句，它运行完美，没有错误。当我选择“从表和视图列表中选择以选择要导入的数据”时，从 power pivot 中，我可以看到视图和表。但是，如果我选择“编写将指定要导入的数据的查询”并在 SQL 语句框中输入上述语句，则会收到错误“ORA-00942：表或视图不存在”。我很确定我是否从上面的语句定义的 SQL 开发人员创建了另一个视图并选择了第一个选项（“

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:31:21.047

看来你有错别字...

```
SELECT n."a", 
       n"B", 
       p."c", 
       p."d", 
       p2."f" 
FROM   n n, 
       p p, 
       q p2 
WHERE  n."a" = p."a" 
       AND n."e" = p2."e" 
```

应该...

```
SELECT n."a", 
       n."B",
       p."c", 
       p."d", 
       p2."f" 
FROM   n n, 
       p p, 
       q p2 
WHERE  n."a" = p."a" 
       AND n."e" = p2."e" 
```

注意每个代码块的第 2 行的区别... n"B" vs n."B"

# css - css 边框和背景色未在 webkit 浏览器上呈现

> ID：12697579
> 
> 赞同：0
> 
> 时间：2012-10-02T20:15:00.290
> 
> 标签：css, webkit

这可能是一个非常愚蠢的问题，但显然我无法独自解决。

如果您使用非 webkit 浏览器访问[此](http://cluster006.ovh.net/~printroo/category/shop/)页面，您会注意到底部的三篇文章如何具有黑色边框和白色背景，但如果您使用 chrome 或 safari 进行相同操作，这些 css 属性就会消失。

该元素的 CSS 如下所示：

```
body.category-shop article{
-moz-box-flex:1;    
-webkit-box-flex:1;
-o-box-flex:1;      

border:solid #000;
background-color:#FFF;
height:250px;
width:100%;
margin:0 10px;
padding:5px;} 
```

有任何想法吗？

非常感谢，对于这个超级私人的问题，我们深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:46:21.443

由于您使用的是 flexbox 模型，因此您不需要浮动。

一旦您`float: left`从`body.archive article`.

# ado.net - SSIS流ADO.net源任务带参数

> ID：12697584
> 
> 赞同：2
> 
> 时间：2012-10-02T20:15:19.277
> 
> 标签：ado.net, ssis, getdate

我正在使用 ADO.NET 源将数据从 ODBC 服务器带到我的 SQL。我使用导入和导出向导来创建我的数据流任务。

我需要附加具有字段 GPMTADDT>(yesterday date) 的新记录，例如，如果今天 20121002 以下查询完美运行：

```
SELECT  PARTICIP.* 
FROM PARTICIP
WHERE GPMTADDT > 20121001 
```

我试过了：

```
SELECT  PARTICIP.* 
FROM PARTICIP
WHERE GPMTADDT > Format(now(),"yyyymmdd") 
```

但它不起作用，服务器将“格式”视为一列。我尝试创建一个变量`@date`

```
SELECT  PARTICIP.* 
FROM PARTICIP
WHERE GPMTADDT > @date 
```

服务器再次拒绝了“@”。

```
Also tried:
SELECT  PARTICIP.* 
FROM PARTICIP
WHERE GPMTADDT > (SELECT MAX PARTICIP.GPMTADDT FROM PARTICIP) 
```

我确定我缺少一些简单的东西，我们将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:20:21.743

你有没有尝试过：

```
SELECT PARTICIP.*
FROM PARTICIP
WHERE GPMTADDT > DATEADD(dd, -1, GETDATE()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:27:50.360

您没有提到您的数据源实际上是什么，但您尝试过的 SQL 语法中似乎有几个错误。例如，第一个查询应该在日期周围有单引号，最后一个应该将参数`MAX()`放在括号中等。

但是要尝试回答您的基本问题，ADO.NET 源不支持参数，这与 OLE DB 不同。一些可能的解决方案是：

1.  如果您可以在源本身中生成值，请不要使用参数；这就是您在上一个示例中尝试执行的操作以及 Jeff 的建议
2.  使用 SSIS 表达式`SqlCommand`和 SSIS 变量一起设置连接对象的属性（如此[处](http://blogs.msdn.com/b/sqlforum/archive/2011/04/11/forum-faq-how-do-i-use-parameters-in-an-ssis-ado-net-source.aspx)所述）
3.  作为 #2 的替代方法，使用脚本任务构建完整的`SELECT`查询，将其分配给 SSIS 变量，然后使用该变量作为`SqlCommand`值

就我个人而言，我会说选项 1 是最简单的，但如果无法从源系统中访问变量，当然并不总是可行的。2 和 3 是同一解决方案的变体，但我更喜欢 3，因为我发现编写脚本比使用表达式更容易。

# java - 将从文件中读取的数据放入记录中

> ID：12697590
> 
> 赞同：1
> 
> 时间：2012-10-02T20:15:45.167
> 
> 标签：java, record, java.util.scanner

我有员工记录。六个字段长，例如

```
private String name;
private String id;
private double salary; 
```

我需要从包含 18 行数据的 .txt 文件中读取三个不同员工（每位员工 6 行）的原始数据，并将数据放入特定的员工记录中。到目前为止，这就是我的主要方法中的内容：

```
public static void main(String[] args)
{
    //employee declarations
    Employee e1 = new Employee();
    Employee e2 = new Employee();
    Employee e3 = new Employee();
    int count = 0;
    int emp_count = 0;

    File in_file = new File("EmployeeData.txt");
    Scanner fscan = new Scanner(in_file);

    while(fscan.hasNext())
    {
        e1.set_name 
```

不太确定如何从 txt 文件中获取适当的数据行到员工记录中的相应插槽中。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:28:51.753

您可以创建一个单独的函数，一次只读取一个员工记录

```
public static Employee readEmployeeData(Scanner scanner) {

    Employee employee = new Employee();
    if (scanner.hasNext())
        employee.name = scanner.next();//Use getter setters
    if (scanner.hasNext())
        employee.id = scanner.next();
    if (scanner.hasNextDouble())
        employee.salary = scanner.nextDouble();
    else
        scanner.next();// For double case

    return employee;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:22:01.553

您可以将反射用于 Employee 类的字段，它可以表示为数组或其他东西。数组全部填满后，可以换成另一个对象来填充。

唯一的问题是，txt文件中的数据顺序与对象的字段列表相同。您可能应该做一些事情来调整对象中的字段和 txt 文件中的数据行之间的顺序。

# iphone - UIStoryboardSegue 第二次导致 EXC_BAD_ACCESS 崩溃

> ID：12697591
> 
> 赞同：1
> 
> 时间：2012-10-02T20:15:46.257
> 
> 标签：iphone, objective-c, exc-bad-access, uistoryboard, uistoryboardsegue

我一直在尝试创建一个 UIStoryboardSegue，它模仿“Cover Vertical”模态 segue，但使视图“Uncover”，以便这些 segues 看起来很自然。这是我的 UIStoryboardSegue 子类：

```
//RetreatVertical.m

#import "RetreatVertical.h"
@implementation RetreatVertical

-(void)perform {
    UIView *oldView = [self.sourceViewController view];
    UIView *newView = [self.destinationViewController view];
    [oldView.window insertSubview:newView belowSubview:oldView];

    [UIView animateWithDuration:0.3 animations:^{
        oldView.center = CGPointMake(oldView.center.x, oldView.center.y + oldView.frame.size.height); }
        completion:^(BOOL finished){ [oldView removeFromSuperview]; }
     ];
}

@end 
```

当用户点击一个按钮时，UIViewController 使用模态 segue “Cover Vertical”滑入焦点。当用户点击新 UIViewController 上的按钮时，该 UIViewController 会向下滑动，显示旧的 UIViewController（使用我的自定义 segue“RetreatVertical”）。这一切都很好，但是，每当我在两个动画完成后点击任何其他按钮或界面元素时，应用程序都会因“EXC_BAD_ACCESS”而崩溃。我不知道为什么，过去一小时的搜索没有找到任何结果。

谢谢！

**编辑：** 为什么这个策略不起作用？

```
- (void) perform {
    UIView *sourceView = [self.sourceViewController view];
    UIView *destView = [self.destinationViewController view];
    [[self.sourceViewController superview] insertSubview:destView belowSubview:sourceView];

    [UIView animateWithDuration:0.3 animations:^{
        sourceView.center = CGPointMake(sourceView.center.x, sourceView.center.y + sourceView.frame.size.height); }
        completion:^(BOOL finished){ [sourceView removeFromSuperview]; }
     ];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T00:06:59.210

直接使用应用程序窗口（以及它的子视图）总是很棘手，而且很难做到正确；有很多你无法解释的隐藏的东西。所以让我们稍微改变你的层次结构，让一切变得更容易。

**现在你有：**

***A** = 根 VC*

***B** = 新 VC*

过渡： **窗口**{ **A** -----> **B** }

**更好的解决方案：**

***A** = 根 VC*

***B** = 新 VC*

***C** = 旧 VC*

过渡：窗口 { **A** { **C** -----> **B** } }

这意味着你的 Root 只是一个普通的 VC，它有一个空白视图，你可以将你的视图放在上面。这将使您可以轻松地执行任何您想要的动画，而不必担心搞砸主窗口。

# css - css - 隐藏最大宽度/最大高度/溢出的div内的垂直对齐图像？

> ID：12697592
> 
> 赞同：1
> 
> 时间：2012-10-02T20:15:49.610
> 
> 标签：css, overflow

我的文章中有几个带有图像的 div，我正在使用 max-width/height 和 overflow:hidden 裁剪图像，效果很好，但是它从顶部裁剪图像，我希望它们在 div 中垂直居中.

```
.image_div {
    max-height: 150px; 
    max-width:99%; 
    overflow: hidden; 
    margin:0px; 
    text-align:center;
}
.image_div img {

} 
```

我正在使用最大宽度/高度来避免在图像很小的情况下出现一大块白色。我正在寻找的可能是 css 吗？

还应该提到 CSS3 解决方案也会很棒，因为这是一个移动站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:43:25.250

```
<style type="text/css">
.imgsquare {
    display: table-cell;
    text-align: center;
    vertical-align: middle;
    padding: 2px;
    border: solid 1px #666;
    background-color: #333;
    border-radius: 4px;
}
.imgsquare * {
    vertical-align: middle;
}

.imgsquare {
    display: block;
}
.imgsquare span {
    display: inline-block;
    height: 100%;
    width: 1px;
}
</style>

<!--[if lt IE 8]>
<style>
.imgsquare span {
    display: inline-block;
    height: 100%;
}
</style>
<![endif]--> 
```

这将使用以下方法绘制一个正方形 div，其具有垂直/水平居中的原始纵横比图像
：

```
<div class="imgsquare" style="width:280px; height:280px;">
    <span></span>
    <img style="max-width:260px; max-height:260px;" src="yourPicture.jpg" alt="No Image">
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:50:10.160

我相信你可以像这样使用垂直对齐：

```
.image_div {
    max-height: 150px; 
    max-width:99%; 
    overflow: hidden; 
    margin:0px; 
    text-align:center;
    vertical-align:text-top;
} 
```

您可以将“文本顶部”更改为许多内容，w3c 在此处列出它们：http: [//www.w3schools.com/cssref/pr_pos_vertical-align.asp](http://www.w3schools.com/cssref/pr_pos_vertical-align.asp)

# c - C 文件 I/O 中的段错误

> ID：12697594
> 
> 赞同：1
> 
> 时间：2012-10-02T20:15:53.300
> 
> 标签：c, file-io

我正在尝试从 FILE* 中读取一串文本，但每次尝试时都会遇到分段错误。这是我在程序中唯一要做的事情，所以我不太确定为什么会这样。

```
#include <stdio.h>

int main(){
  FILE* file;
  char* string;
  file = fopen("practice.txt", "r");
  fgets(string, 100, file);
  printf("%s", string);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T20:17:06.543

您还没有为您的字符串分配任何内存。您可以使用[malloc](http://www.cplusplus.com/reference/clibrary/cstdlib/malloc/)为字符串分配内存，或使用数组`char string[100];`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T20:20:05.810

请务必分配内存来存储您要阅读的内容：

```
char string[101]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T20:26:42.437

那是因为`string`未初始化。`string`是 a`char *`并且最初将垃圾值保存为地址，该地址被`fgets`函数取消引用，从而导致未定义的行为。

要么做

```
char string[BUFFER_LEN]; 
```

并`BUFFER_LEN`适当定义

或者做

```
char *string;
string = malloc (sizeof (char) * buf_siz); 
```

其中`buf_siz`保存缓冲区的长度。当您动态分配字符串时，请记住，`free (string)`当您完成使用分配的内存块时`malloc`，这是一个很好的做法，并且可以防止较大程序中的内存泄漏。

始终通过检查 的返回值来检查文件是否已成功打开`fopen`。如果它返回`NULL`，则打开操作失败。否则它将返回`FILE`指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T20:27:50.440

`char *string`声明一个指针，但没有将它设置为指向任何有意义的地方；您还没有分配任何内存来存储从文件中读取的文本。

您要么需要分配一个数组，如下所示：

```
char string[101] = {0}; 
...
fread(string,100,file);
printf("%s\n", string); 
```

或在运行时分配内存：

```
char *string;
...
string = calloc(101, sizeof *string);
if (string)
{
  fread(string,100,file)
  printf("%s\n", string);
  free(string);
} 
```

在这两种情况下，我们都为 101 个字符分配了足够的内存来解释 0 终止符，并且由于`fread`不会将 0 终止符写入输入的末尾，因此我们在两种情况下都将内存初始化为全位为零（第一个由使用初始化程序，第二个调用`calloc`)。

# python - 南迁移使初始模式迁移不正确

> ID：12697595
> 
> 赞同：0
> 
> 时间：2012-10-02T20:16:17.800
> 
> 标签：python, django, migration, django-south

我正在尝试向南运行迁移，但是当我运行时：`manage.py schemamigration <my_app> --initial` 它进行了错误的修改，创建了“ `Added model treinoclub_app.Endereco Added model treinoclub_app.Academia`”。

但我没有对这张桌子做任何改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:26:18.117

`--initial`不是关于检测变化，你不应该期望它。

它获取表的当前状态并将它们导出为创建表语句，以使您的第一次迁移开始，这样在新安装时，您只需运行“python manage.py migrate”即可从头到尾构建表。

无论您运行多少次`--initial`，它都会生成这些带有全表输出的迁移。同样，它不是关于检测任何东西 - 它只是输出表的当前状态，并且旨在用作“初始/第一次”迁移。

# vb6 - 如何使用 VB6 和 SAPI 4 将文本到语音保存到 wav 文件

> ID：12697599
> 
> 赞同：2
> 
> 时间：2012-10-02T20:16:24.803
> 
> 标签：vb6, text-to-speech, sapi

我已经设法使用这种方法记录到文件中：

包括 Microsoft 直接语音合成组件。工具栏上显示一个类似于嘴巴的组件

将该组件放在表单上并为单击事件编写一些代码：

```
DirectSS1.filename = "audiofile.wav"
DirectSS1.Speak "Insert a long text here" 
```

这行得通，但对我来说有两个问题：

1.  生成 wav 文件的时间太长，因为组件以正常的语速读取文本。我需要更快地生成文件。

2.  它是异步的。我需要以某种方式等到文件准备好才能继续。

（不能使用 SAPI 5，因为我需要使用 SAPI 4 声音。）

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T02:51:43.237

您正在使用的 VB6 组件经过精心设计，可以完全按照您的描述进行。它不是简单地接受字符串并立即创建 WAV 文件的 API。

因此，您将需要研究较新的技术，而不是使用 Visual Basic 6 组件来做您想做的事情。我确信有多种选择，尽管 Google 搜索将是您的起点。

# ajax - ajax POST 调用在 IE 中不起作用但在所有其他浏览器中

> ID：12697601
> 
> 赞同：0
> 
> 时间：2012-10-02T20:16:30.820
> 
> 标签：ajax, internet-explorer, jquery, post

嘿，我有以下 ajax POST 调用：

```
function callAjax(what2Do)
    {
        jQuery.ajax({
            url: "count.php?do=" + what2Do,
            type: "POST",
            data: "",
            cache: false,
            success: function(response, textStatus, jqXHR){
                alert('done!');
            },
            error: function(jqXHR, textStatus, errorThrown){
                alert(
                    "The following error occured: "+
                    textStatus, errorThrown
                );
            }
        });
    } 
```

而且我不断收到**错误发生以下错误：**在 iE9 中运行页面时出错，但在所有其他浏览器中都可以正常工作。

如果不让它在 IE 中工作，我会错过什么？返回是简单的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T00:28:15.393

不幸的是，我不得不参加有关遗留 IE 行为的速成课程，以处理几乎相同的情况。在我的情况下，归结为 IE 顽固地[坚持](http://lists.w3.org/Archives/Public/public-appformats/2008Mar/0021.html)使用他们自己专有的 XDomainRequest 对象来处理 CORS。一些很好的链接：

*   [对情况的全面了解以及解决相关问题的一些方法](http://www.kendoui.com/blogs/teamblog/posts/11-10-03/using_cors_with_all_modern_browsers.aspx)
*   [Microsoft 的 XDomainRequest 对象文档](http://msdn.microsoft.com/en-us/library/cc288060%28VS.85%29.aspx)
*   [一篇涵盖 XDomainRequest 的一些特性的内部 MS 博客文章](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)

尽管为拒绝遵循标准的浏览器设置例外是令人厌恶的，但我在我的项目中使用类似以下的内容来解决必要的情况：

```
// This is necessary due to IE<10 having no support for CORS.
function fallbackXDR(callObj) {
    if (window.XDomainRequest) { 
        var xdrObj = new XDomainRequest();
        xdrObj.timeout = callObj.timeout;
        xdrObj.onload = function() {
            handleSuccess(xdrObj.responseText);
        };
        xdrObj.onerror = function() {
            handleError(xdrObj);
        };
        xdrObj.ontimeout = function() {
            callObj.xdrAttempts = callObj.xdrAttempts++ || 1;
            if (callObj.xdrAttempts < callObj.maxAttempts) {
                fallbackXDR(callObj);
            }
        };
        xdrObj.onprogress = function() {
            // Unfortunately this has to be included or it will not work in some cases.
        };

        // Use something other than $.param() to format the url if not using jQuery.
        var callStr = callObj ? '?'+$.param(callObj.urlVars) : '';
        xdrObj.open("get", callObj.url+callStr);
        xdrObj.send();
    } else {
        handleError("No XDomainRequest available.", callObj);
    }
}//fallbackXDR() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:30:50.447

尝试这个：

```
function callAjax(what2Do)
{
    jQuery.ajax({
        url: "./count.php",
        type: "GET",
        data: { 'do': what2Do },
        cache: false,
        success: function(response, textStatus, jqXHR){
            alert('done!');
        },
        error: function(jqXHR, textStatus, errorThrown){
            alert(
                "The following error occured: "+
                textStatus, errorThrown
            );
        }
    });
} 
```

# perl - Perl XML Create 有错误的节点

> ID：12697603
> 
> 赞同：-1
> 
> 时间：2012-10-02T20:16:32.223
> 
> 标签：perl

我有一个哈希值，想把它们放在 XMLOut 中。

```
'rp' => {
           'tr' => {
                'tsu' => {
                    'ct' => {
                        'data' => "1" 
```

发生的情况是 XMLout 将彼此放在自己的`<name></name>`节点中：

```
<rp>
   <name>tr</name>
      <tsu>
          <name>ct</name>
          <data>1</data> 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:45:18.187

看起来您正在使用`XML::Simple`序列化 XML。您没有显示 XMLout 调用的语法，但作为起点，您可能希望查看 KeyAttr 选项。你可以尝试这样的事情：

```
XMLout(\%my_hash, KeyAttr => []); 
```

# android - Android CWAC-Adapter：为什么在构造函数中注册DataSetObserver？

> ID：12697608
> 
> 赞同：0
> 
> 时间：2012-10-02T20:16:54.770
> 
> 标签：android, commonsware-cwac

正如标题所说，我很难理解`registerDataSetObserver`in the `Constructor`of`cwac-adapter`

```
 /**
  * Constructor wrapping a supplied ListAdapter
  */
  public AdapterWrapper(ListAdapter wrapped) {
    super();

    this.wrapped=wrapped;

    wrapped.registerDataSetObserver(new DataSetObserver() {
      public void onChanged() {
        notifyDataSetChanged();
      }

      public void onInvalidated() {
        notifyDataSetInvalidated();
      }
    });
  } 
```

这不会创建对 的递归调用`notifyDataSetChanged()`吗？

我的理解是，`notifyDataSetChanged()`将调用`onChanged`所有注册的观察者`Adapter`。因此，调用`notifyDataSetChanged()`将`onChanged()`创建递归调用。

我的理解错了吗？如果是的话，这里到底发生了什么？如果不是，那么进行这种递归调用有什么用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:21:28.833

你有两个适配器，我们称它们为 List 和 Wrapper。当您在列表中获得更改时，您会通知包装器。不再执行代码。

# macos - Windows上的存折开发

> ID：12697610
> 
> 赞同：3
> 
> 时间：2012-10-02T20:17:03.590
> 
> 标签：macos, windows-7, ios6, passbook

我完成了基本 Passbook 开发的本教程： [http ://www.raywenderlich.com/20734/beginning-passbook-part-1](http://www.raywenderlich.com/20734/beginning-passbook-part-1)

我将使用 Windows 机器进行开发，我看到使用了两个 Apple 特定工具：

1.  OpenSSL 命令——我相信这个命令有一个 Windows 版本，所以它是可行的。
2.  Keychain - 用于存储、导入和导出证书。有Windows替代品吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T06:03:49.360

我设法在这位绅士的代码的帮助下使用 Passbook：

[https://github.com/tomasmcguinness/dotnet-passbook](https://github.com/tomasmcguinness/dotnet-passbook)

他还对如何使证书顺利运行进行了非常有用的翻译：

[http://www.tomasmcguinness.com/2012/06/28/generating-an-apple-ios-certificate-using-windows/](http://www.tomasmcguinness.com/2012/06/28/generating-an-apple-ios-certificate-using-windows/)

感谢托马斯·麦吉尼斯！

# php - 如何重新填充动态字段？

> ID：12697611
> 
> 赞同：0
> 
> 时间：2012-10-02T20:17:03.687
> 
> 标签：php, ajax, jquery, field

请参见下图，它将允许我根据需要添加许多产品。首先，我从下拉列表中选择一个类别，然后通过 Ajax 在 Items 下拉列表中生成相关条目。通过单击“添加另一个产品”，我可以根据需要添加许多产品。

如果我完成了产品的选择，我将需要单击提交/订购按钮，然后通过 PHP（无 Ajax）验证字段，然后再添加到销售中。如果验证未通过 - 我需要重新填充所有选定的类别和条目（换句话说，再次创建产品字段） - 如何做到这一点？

注意：所有数据将存储在`$_POST`

![在此处输入图像描述](../Images/149e5b92d431759fb15e0801fbe6a6fd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:34:24.563

您的选择：

*   使用 $_POST 数据生成包含用户创建的字段的 html
*   存储 $_POST 数据（例如在会话中）并将用户重定向回原始表单，如果找到保存的数据，则必须包含代码以生成用户创建的字段。

首选第二个选项。

编辑：关于选项二的额外信息。

当验证失败时，将 $_POST 数据保存在 session: 中`$_SESSION['stored post'] = $_POST;`并重定向到原始表单（POST 源自的表单）：`header('Location: /url/of/the/original-form.html);`

在生成订单表格的代码中添加以下内容：

```
if ( isset($_SESSION['stored post']) 
     && is_array($_SESSION['stored post']) 
     && count($_SESSION['stored post']) > 0 ) //check if there is POST stored
{
    //generate fields from data stored in $_SESSION['stored post'] here

    unset($_SESSION['stored post'];  //remove the stored data
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:21:41.797

对于输入框，就这么简单

```
<input name="fname" value="<?php if(isset($_POST['fname'])) echo $_POST['fname']' ?>"> 
```

对于选择框，您必须遍历选项以找出应选择的对象。

# ruby - Ruby：注入中的三元运算符

> ID：12697613
> 
> 赞同：0
> 
> 时间：2012-10-02T20:17:07.353
> 
> 标签：ruby

我正在学习使用 Ruby 构建hangman 应用程序的教程。它有一个隐藏单词的功能 masquerade，它只是从文件中导入的国家名称。问题是我不明白这实际上是如何掩盖这些词的，或者三元运算符是如何在注入中工作的。它正在检查字符是否为空白（即“”），如果是，则将其设置为空白（即“”），但如果不是，则将其设为  。该函数似乎没有处理单词具有实际字符（即字母）的事实。

谁能解释这种菜鸟，我误解了什么？另外，为什么它在最后（在结束之前）再次添加“伪装”？

```
def masquerade(word)

      word.each_char.inject([]) { |disguise, char| disguise << (char == " " ? " " : "&nbsp;"); disguise }

end 
```

游戏词举例

```
Afghanistan
Albania
Algeria
Andorra
Angola
Antigua & Deps
Argentina
Armenia 
```

**整个Word课**

```
class Word

  class << self
    def get_random
      content = File.read("countries.txt")
      words = content.split("\n")
      words[rand(words.size)].upcase
    end

    def masquerade(word)
      word.each_char.inject([]) { |disguise, char| disguise << (char == " " ? " " : "&nbsp;"); disguise }
    end

    def reveal(last_revealed_word, char_clicked, final_word)
      chars = final_word.each_char.to_a

      last_revealed_word.each_index do |i|
        last_revealed_word[i] = chars[i] if last_revealed_word[i] == "&nbsp;" and chars[i] == char_clicked
      end
    end

    def chars_left(revealed_word)
      revealed_word.count { |c| c == "&nbsp;" }
    end

  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:54:48.157

让我们假设 word = 'Albania'。word.each_char 返回一个 Enumerable 对象，其中每个“项目”都是单词中的一个字母。

想象一下使用#each 而不是#inject

```
word.each_char.each { |letter| puts letter }
A
l
b
... 
```

#inject 旨在获取枚举中的所有项目，并以某种方式组合它们。在这种情况下，它们被组合成一个数组。您可以看出这是因为将一个空数组作为 .inject([]); 中的参数传递给注入。它也可能是注入（Array.new）。无论传入什么，都将成为注入“备忘录”的默认值，该对象用于在遍历项目时跟踪最终结果。在这种情况下，该备忘录对象称为伪装。

在注入循环期间，伪装备忘录将从一次迭代传递到下一次迭代。每次迭代都将处理调用注入的枚举中的一项（字母）。在块内，该项目称为 char。

无论块返回什么，都将成为下一次注入迭代的备忘录（伪装）的新值。

所以在这里，第一次迭代将有 disguise=[] 和 char='A'。if/else 表示“如果 char 是单个空格，则将单个空格附加到伪装数组，否则，将不间断空格附加到伪装数组。

Array#push() 的结果（这是 << 在这里所做的），是新项目被推送后的数组。因此，如果您有 [1,2].push(3)，则返回 [1,2,3]。在这种注入的情况下，他们希望将推送的结果传递给下一次迭代，因此基本上通过伪装来确保数组是块返回的内容；在最后。就目前而言，没有必要。如果在 push 和块结束之间发生了其他操作，则需要显式返回伪装数组，否则第二次操作的结果将存储在备忘录中。

至于 if/else 如何处理单词的字母，基本上任何时候它都是它放在   字符串中的字母。

因此，在第一次迭代中，char='A' 不是单个空格，因此 nbsp 被推入空数组，并且该数组 [" "] 由块返回。伪装现在等于 [" "]。在第二次迭代中，char='l'，也不是空格，所以另一个   被推入数组，变成 [" ", " "]。这就是第三次迭代中block的结果和disguise的值。

对于所有字母，注入将继续这样，然后返回伪装的最终值。

在大多数情况下，这将导致 [" ", " ", " ", etc]，或者如果国家名称中有空格，您将得到 [" ", " ",  "," ", “”等]。如果不了解结果数组是如何在视图中使用或以某种方式呈现给用户的，就很难说出其中的意义。

*   我删除了 ; 来自 nbsp，所以他们会出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:31:43.840

`disguise`不需要在最后添加。已经改变了`<<`对象。

你看不出有什么区别：

```
[1] pry(main)> "wor d".each_char.inject([]) { |d, c| d << ( c == " " ? " " : "&nbsp;"); d }
=> ["&nbsp;", "&nbsp;", "&nbsp;", " ", "&nbsp;"]

[2] pry(main)> "wor d".each_char.inject([]) { |d, c| d << ( c == " " ? " " : "&nbsp;") }
=> ["&nbsp;", "&nbsp;", "&nbsp;", " ", "&nbsp;"] 
```

**upd：**这里的屏蔽是用不间断的空格替换字符

# git - retro 从备份目录创建一个 git 存储库

> ID：12697617
> 
> 赞同：4
> 
> 时间：2012-10-02T20:17:17.933
> 
> 标签：git, backup

我有几个备份目录，我想将它们放入 git。

目录是：

```
web_backup_2012-03-07
web_backup_2012-06-03
web_backup_2012-06-21
web_backup_2012-06-25
web_backup_2012-07-02
web_backup_2012-07-15
web_backup_2012-07-21 
```

现在我想把它们放在 git 上。最好的方法是什么？（每个备份大约 1.1 G，20k 个文件。）

这是我认为应该做的：

• cd 到最早的备份目录。

```
git init
git add .
git commit . -m"initial commit" 
```

然后将 .git 目录移动到第二个目录中，然后执行

```
git add .
git commit . -m"commit. ‹date here›" 
```

重复上述。

然后，在最后一个目录中，我完成了。我可以删除所有以前的备份目录。（然后我可以将 .git 目录移动到我当前工作的 web 目录中并重复。这样我的带有历史记录的 web 目录现在都在 git 中。）

根据我的测试，每一步都需要 10 分钟。

我是 git 新手。另外，是否有人可以告诉我是否/如何添加日期标签（如果它对此有好处。）

有没有更好的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T20:40:31.810

我建议不要`git add .`总是添加文件，而是`git add -A`“查找新文件以及暂存修改的内容并删除不再在工作树中的文件”（来自[git docs](http://www.kernel.org/pub/software/scm/git/docs/git-add.html)）。

我会编写一个看起来像这样的脚本：

```
#!/bin/bash
git init
GIT_DIR=$(pwd)
for dir in $(find . -maxdepth 1 -name web_backup_\* | sort); do
  pushd $dir
  git add -A
  git commit -m "Backup for $dir."
  git tag $dir
  popd
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:35:59.687

如果要在一个目录中创建包含所有备份的存储库，请执行以下操作：

```
1\. cd to parent directory and run git init
2\. run git add *
3\. run git commit -a -m "initial commit" 
4\. run git push -u <repository> master 
```

要使用使用 bitbucket 作为提供程序的完整示例，您可以执行以下操作：

```
git init
git remote add origin ssh://git@bitbucket.org/username/repositoryname.git
git add *
git commit -a -m "Initial commit" 
git push -u origin master 
```

然后，当您想将更改推送到 repo 时，您更改到父目录并执行

```
 git commit -a -m "commit message"
 git push -u origin master 
```

此外，如果您要查看是否有任何更改，您可以使用：`git status`从父存储库目录。

要查看更改内容，请`gitk`从父目录尝试。

# css - Twitter Bootstrap：更改了导航栏折叠阈值，下拉菜单的副作用

> ID：12697618
> 
> 赞同：3
> 
> 时间：2012-10-02T20:17:20.197
> 
> 标签：css, twitter-bootstrap, media-queries

我在[Twitter Bootstrap Github 页面](http://twitter.github.com/bootstrap/examples/hero.html)`Twitter Bootstrap 2.1.1`上使用并使用类似于此示例的导航栏折叠和导航栏下拉菜单

我知道它在 979 像素处折叠并在 980 像素处展开，我根据**接受的答案**将其更改为在 779 像素处折叠：

[如何使用 Twitter 引导响应更改导航栏折叠阈值？](https://stackoverflow.com/questions/9405610/how-to-change-navbar-collapse-threshold-using-twitter-bootstrap-responsive)

我修改**了 bootstrap.responsive.css**

```
@media (max-width: 979px) {...} 
```

至

```
@media (max-width: 779px) {...} 
```

效果很好，我看到导航栏现在在 779 像素处折叠并在 780 像素处展开。

但是，我看到了副作用。

当我将浏览器的宽度调整为 780 像素到 979 像素之间（导航栏不再折叠的范围）并且单击下拉菜单时，它不会呈现下拉选项。如果我将大小调整为 980 像素或更宽，那么我会看到下拉选项。

我正在使用 Firefox Firesizer，所以我可以观察宽度。事实上，如果我点击一个下拉菜单然后拖动窗口大小，我可以看到它在 980 像素处绘制下拉选项，然后当我低于 979 像素时它们会消失。

有没有人遇到过这个？

我怀疑在更改导航栏折叠阈值时需要更改下拉菜单（或其相关类）的其他媒体查询。但是，我一直无法找到解决方案。我将非常感谢任何帮助、见解或建议。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T17:27:02.920

迟到了，但为了后代：

调整导航栏的大小时，您需要调整/覆盖`bootstrap-responsive.css`文件中的两个项目。

*   `@media (max-width: 979px)`=>`@media (max-width: 1120px)`

和：

*   `@media (max-width: 780px)`=>`@media (max-width: 1121px)`

（`1120px`是导航栏崩溃的阈值）

查看更多：[https ://gist.github.com/4269590](https://gist.github.com/4269590)

# c# - 使用正则表达式搜索在 Rss 中解析和格式化 HTML 标签

> ID：12697619
> 
> 赞同：1
> 
> 时间：2012-10-02T20:17:22.357
> 
> 标签：c#, regex, windows-phone-7, rss

我有内容：来自 rss 的如下编码文本：

```
<content:encoded><![CDATA[<P><B>Wednesday, September 26, 2012</B></P>It is Apple.<P>Shops are closed.<br />Parking is not allowed here. Go left and park.<br />All theatres are opened.<br /></P><P><B>Thursday, September 27, 2012</B></P><P>Shops are open.<br />Parking is not allowed here. Go left and park.<br  />All theatres are opened.<br /></P>]]></content:encoded> 
```

使用以下方法，我可以从 HTML 中提取文本：

```
public static string StripHTML(this string htmlText)
    {
        var reg = new Regex("<[^>]+>", RegexOptions.IgnoreCase);
        return HttpUtility.HtmlDecode(reg.Replace(htmlText, string.Empty));
    } 
```

但是我希望将其中的文本`<b></b>`插入到 dateArray[] 中，并将其中的文本`<p></p>`插入到 descriptionArray[] 中，以便我可以显示如下： ![在此处输入图像描述](../Images/aea12ef1fbd7d918d628b579f71c6f7e.png)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:45:58.250

```
//http://htmlagilitypack.codeplex.com/
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

var result = doc.DocumentNode.Descendants()
                .Where(n => n is HtmlAgilityPack.HtmlTextNode)
                .Select(n=>new {
                    IsDate = n.ParentNode.Name=="b" ? true: false,
                    Text = n.InnerText,
                })
                .ToList(); 
```

# c# - DynamicResource 的后备值

> ID：12697622
> 
> 赞同：5
> 
> 时间：2012-10-02T20:17:32.300
> 
> 标签：c#, wpf, data-binding

`XAML`我的应用程序从单独文件中定义的资源字典中加载所有字符串。在运行时密钥可能`DynamicResource`不存在。

```
<CheckBox Content="{DynamicResource myKeyThatIsMissing}"/> 
```

在普通绑定中，有一个可以像这样使用的后备值：

```
Text="{Binding StringToShow, FallbackValue=DefaultValue} 
```

`DynamicResource`如果资源键不存在，是否可以为使用a 的属性集设置默认的后备值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-28T13:45:49.230

该类是未密封的，因此也许您可以扩展它并通过覆盖该方法`System.Windows.DynamicResourceExtension`来添加您想要的逻辑。`ProvideValue`

不幸的是，默认实现返回内部`ResourceReferenceExpression`类的一个实例，因此您可能需要做一些反射或其他魔法才能使其工作。

# c++ - 初始化列表中的 try / catch 是如何工作的？

> ID：12697625
> 
> 赞同：12
> 
> 时间：2012-10-02T20:17:49.197
> 
> 标签：c++, exception, exception-handling, try-catch, in-class-initialization

我们认为可能会发生初始化异常。所以我们写了 try/catch 块。

```
int f(){
    throw 1;
}

class A
{
public:
    A() try : _k(f())
    {}
    catch (int)
    {
        std::cout << "Exception 1" << std::endl;
    }

private:
    int _k;
}; 
```

但是 catch 在更深一层上重新抛出异常。这意味着下一个代码

```
try
{
    A a;
} catch(int)
{
    std::cout << "Exception 2" << std::endl;
} 
```

将输出：

```
Exception 1
Exception 2 
```

**为什么这个 try / catch 块的行为与普通的 try / catch 块不同？**

完整代码示例：http: [//ideone.com/XjY2d](http://ideone.com/XjY2d)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T20:22:44.857

您的问题似乎是：为什么函数级 try/catch 会自动重新抛出异常？从对象的构造中抛出异常，这个对象在它复活之前就被认为是死的。它的所有子对象都被销毁。也就是说，如果在构造过程中抛出异常，则没有对象。如果异常不会抛出，您将得到一个对象的外壳。这显然是不可取的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T20:21:41.253

您正在构建的对象尚未真正构建，因此简单的 return 不是一种选择。这种 try0-catch 总是重新抛出（除非你从 catch 子句中抛出你自己的异常）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T20:27:20.490

因为它不是普通的 try-catch 块，而是函数级的 try/catch。除非您使用`throw`.

# javascript - 适合添加到地图的所有点

> ID：12697628
> 
> 赞同：1
> 
> 时间：2012-10-02T20:18:04.797
> 
> 标签：javascript, google-maps, google-maps-api-3

我刚刚用 Wordpress 创建了一个动态谷歌地图。

现在我正在寻找一种方法，在我在谷歌地图上生成所有点之后，重新居中/缩放地图以将所有生成的点放入容器中，比如说，每边都有 10% 的边距。

我搜索了 API 并没有找到看起来有帮助的东西。

有没有办法做到这一点，还是我需要一个片段？

PS：我正在使用带有 Javascript 的 API V3（通过 PHP 填充地图）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T20:23:37.730

您必须循环标记数组并扩展边界。此示例假定您之前使用添加到地图的每个标记填充了一个标记[] 变量。

```
var bounds = new google.maps.LatLngBounds(),
    markerIndex = 0;
for (markerIndex; markerIndex < markers.length; markerIndex++) {
    var marker = this.markers[markerIndex];
    bounds.extend(marker.position);
}
map.fitBounds(bounds); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:26:44.370

基本上，您需要一个坐标列表，例如：

```
var LatLngList = array(new google.maps.LatLng(52.537,-2.061), new google.maps.LatLng(52.564,-2.017)); 
```

实例`LatLngBounds`：

```
var bounds = new google.maps.LatLngBounds(); 
```

将每个 LatLng 扩展到此实例：

```
for (var i = 0, LtLgLen = LatLngList.length; i < LtLgLen; i++) {
  bounds.extend(LatLngList[i]);
} 
```

并且`fitBounds()`：

```
map.fitBounds(bounds); 
```

# java - 多部分形式生成格式错误的数据包

> ID：12697632
> 
> 赞同：0
> 
> 时间：2012-10-02T20:18:28.700
> 
> 标签：java, rest, jersey, forms, multipart

我正在尝试在表单提交中包含电子邮件附件。我的后端有一个使用 jersey 的 tomcat 服务器来接收 RESTful 调用。

当我尝试使用此表单生成帖子时（所有样式都已被剥离）

```
<form  name="composeMailForm" enctype="multipart/form-data" method="POST" action="/myTarget">
    <input id="mailTo" type="text" name="to" class="span12" />                                                        
    <input type="text" name="subject" class="span8" />
    <textarea name="body" rows="5" class="span8">-</textarea>
    <input type="file" name="file" size=100 />
    <button type="submit" >Send</button>
</form> 
```

我得到一个 405 回来。

我在后端的函数定义是

```
 @Path("/myTarget")
@POST
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response sendMail(
        @FormDataParam("to") String recipients,
        @FormDataParam("subject") String subject,
        @FormDataParam("body") String body,
        @FormDataParam("file") File loadedFile,
        @FormDataParam("file") FormDataContentDisposition headerDisp,
        @CookieParam("USER_COOKIE") String USER_COOKIE){ 

```

我能看到的最大问题是，当我在 Wire Shark 中观看会话时，它说请求数据包格式不正确

它给出了一个错误

> [畸形数据包：UASIP]
> 
> > [专家信息（错误/格式错误）：格式错误的数据包（发生异常）]

任何关于表格或处理过程中出现问题的想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:24:37.933

一个不相关的错字导致 Jersey 无法正确映射函数。

格式错误的数据包源于我的计算机将校验和计算推迟到路由器的事实，因此数据包具有错误的校验和，但在它到达外部线路时已解决。

# mysql - DB中如何高效存储城镇距离

> ID：12697635
> 
> 赞同：5
> 
> 时间：2012-10-02T20:18:37.757
> 
> 标签：mysql, database-design, architecture, nosql, graph-databases

我需要能够显示从用户选择的特定位置到*n个城市/城镇的距离。*就像点击地图，得到100英里内的所有目的地，只是它不会是地图，而是网页上的链接。

我需要选择一种解决方案，该解决方案可以从一个州内扩展到一个国家，甚至可能扩展到全球——这意味着从数千个位置扩展到十万个位置。

我虽然将 CITY1_ID、CITY2_ID 和 DISTANCE 存储在关系 DB 表中，但我怀疑它是否能很好地扩展到 Web 应用程序（数百万行）。

使用 NoSQL Database 或 Graph DB 可以更有效地完成这项工作吗？或者 RDBMS 是否足以通过适当的设计解决这个问题？

补充：如果我不存储在 DB 中，那么我将如何获得类似：***让我在圣何塞 100 英里内的所有城市？***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T20:20:09.160

您应该`city_id, latitude, longitude`为每个城市存储一个 - 然后根据运行时输入计算距离。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T07:09:42.670

不是计算 2 个城市之间的距离，而是计算 100 英里的边界框，然后您有 4 个浮点变量可以插入数据库 - 浮点比较比数据库中的距离计算快得多。缺点是你在角落里有更多的距离。

PHP函数计算边界框

```
函数 getBoundingBox($lat_degrees,$lon_degrees,$distance_in_miles)
{
       $半径=3963.1；// 以英里为单位的地球

        // 轴承
        $due_north = 0;
        $due_south = 180;
        $due_east = 90;
        $due_west = 270;

        // 将纬度和经度转换为弧度
        $lat_r = deg2rad($lat_degrees);
        $lon_r = deg2rad($lon_degrees);

        // 找到最北端、最南端、最东端和最西端的角 $distance_in_miles
        //原始公式来自
        // http://www.movable-type.co.uk/scripts/latlong.html

        $northmost = asin(sin($lat_r) * cos($distance_in_miles/$radius) + cos($lat_r) * sin ($distance_in_miles/$radius) * cos($due_north));
        $southmost = asin(sin($lat_r) * cos($distance_in_miles/$radius) + cos($lat_r) * sin ($distance_in_miles/$radius) * cos($due_south));

        $eastmost = $lon_r + atan2(sin($due_east)*sin($distance_in_miles/$radius)*cos($lat_r),cos($distance_in_miles/$radius)-sin($lat_r)*sin($lat_r)) ;
        $westmost = $lon_r + atan2(sin($due_west)*sin($distance_in_miles/$radius)*cos($lat_r),cos($distance_in_miles/$radius)-sin($lat_r)*sin($lat_r)) ;

        $northmost = rad2deg($northmost);
        $southmost = rad2deg($southmost);
        $eastmost = rad2deg($eastmost);
        $westmost = rad2deg($westmost);

        //返回2个点NW角和SE角
        返回数组($northmost,$westmost,$southmost,$eastmost);
}

```

那么你的 SQL 是

`SELECT * FROM table WHERE latitude <= $northmost AND longitude >= $westmost AND latitude >= $southmost AND longitude <= $eastmost`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T20:54:11.247

我多次使用过的一个*简单*`some_distance_function`解决方案（但不是使用 mysql）是创建一个用户定义的函数，它有四个参数`latitude1`, `longitude1`, `latitude2`，`longitude2`它返回距离，然后针对该距离函数测试所有内容并查看每个项目，无论是否距离小于或等于给定值。如果您只有几千个位置，这是非常好的和有效的。

如果您需要针对数百万条记录运行此查询，您可能希望查看哪些 GIS（地理信息系统）扩展可用于您选择的数据库，因为有更好的（至少在搜索能力方面）持久数据结构用于搜索大量位置。

编辑：举一个微软如何做的例子，见[http://technet.microsoft.com/en-us/library/bb964712(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/bb964712(v=sql.105).aspx)

看起来 MySQL 通常支持空间扩展：

[http://dev.mysql.com/doc/refman/5.0/en/gis-introduction.html](http://dev.mysql.com/doc/refman/5.0/en/gis-introduction.html)
[http://dev.mysql.com/doc/refman/5.0/en/spatial-extensions.html](http://dev.mysql.com/doc/refman/5.0/en/spatial-extensions.html)

编辑二：

看起来这个问题也可能有帮助。

[在 MYSQL 中求两点之间的距离。（使用点数据类型）](https://stackoverflow.com/questions/2270181/find-the-distance-between-two-points-in-mysql-using-the-point-datatype)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T06:49:26.260

这是使用 RDBMS 的解决方案。保留两张桌子

*   CityByLat { latitude, city_id } 在纬度上具有聚集索引和
*   CityByLng { logitude, city_id } 在经度上具有聚集索引

当您需要从给定的纬度和经度查找一定半径内的城市时，您可以对两个表进行有效的范围查询，以获取一定纬度和经度范围内的城市。然后，您可以仅计算与检索到的城市的实际距离。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T20:46:08.560

正如其他人所指出的，您可以存储每个条目的纬度/经度坐标，并在运行时使用类似于以下内容的方法计算距离，它提供公里/英里距离输出：

```
function distance($lat1, $lng1, $lat2, $lng2, $miles = true)
{
        $pi80 = M_PI / 180;
        $lat1 *= $pi80;
        $lng1 *= $pi80;
        $lat2 *= $pi80;
        $lng2 *= $pi80;

        $r = 6372.797; // mean radius of Earth in km
        $dlat = $lat2 - $lat1;
        $dlng = $lng2 - $lng1;
        $a = sin($dlat / 2) * sin($dlat / 2) + cos($lat1) * cos($lat2) * sin($dlng / 2) * sin($dlng / 2);
        $c = 2 * atan2(sqrt($a), sqrt(1 - $a));
        $km = $r * $c;

        return ($miles ? ($km * 0.621371192) : $km);
} 
```

编辑：这不适用于半径搜索中的*n 个匹配项。*鉴于给定半径内城镇/城市的密度，最好将距离计算移到 SQL 中，因为它的速度要快得多，并且您可以与*x*公里/英里内的那些进行匹配。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T20:23:31.810

不要存储它，用经度和纬度计算它的运行时间。与节省城市之间的所有距离相反，可扩展性极强。

您有一个参考点（圣何塞）并遍历所有城市记录并计算它的运行时间（如果有很多记录，请由客户端完成此计算，可能使用 javascript 或其他东西，因为如果您让服务器执行此操作，它很快就会付出代价）。JavaScript 可能看起来像这样：

```
var R = 6371; // Radius of the earth in km
var dLat = (lat2-lat1).toRad();  // Javascript functions in radians
var dLon = (lon2-lon1).toRad(); 
var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.cos(lat1.toRad()) * Math.cos(lat2.toRad()) * 
        Math.sin(dLon/2) * Math.sin(dLon/2); 
var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
var d = R * c; // Distance in km 
```

上面的代码来自[这里](https://stackoverflow.com/questions/27928/how-do-i-calculate-distance-between-two-latitude-longitude-points)

注意：它以公里为单位，因为我是荷兰人，因此使用公制

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-02T20:34:08.727

我正在将[Neo4J](http://neo4j.org/)用于类似的东西，它可以很好地扩展任何可以表示为图表的数据类型。

# php - 链接项目和框架路径 netbeans PHP

> ID：12697640
> 
> 赞同：1
> 
> 时间：2012-10-02T20:19:05.253
> 
> 标签：php, netbeans, hyperlink, project

我正在尝试开发一个 OpenCart 模块。我已经这样做了，但现在，我想有不同的途径来开发它更舒适：

我希望将 OpenCart 安装（因为它是一个框架或其他任何东西）及其所有文件放在不同的路径中，并将我的小模块放在另一个路径中。运行项目时有什么方法可以“导入”所有 OpenCart 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:29:59.647

您应该将其添加到您的包含路径中，这样它会看到安装但与您的项目不在同一路径中。

在项目资源管理器中转到您的项目，展开以查看文件夹“包含路径”> 右键单击​​ > 属性 > PHP 包含路径 > 添加文件夹。

# plsqldeveloper - Pl/SQL oracle 函数

> ID：12697644
> 
> 赞同：0
> 
> 时间：2012-10-02T20:19:12.287
> 
> 标签：plsqldeveloper

我正在尝试比较 SRC 和目标表之间的姓氏，名称相同但它们可能有额外的空格或字符，我该如何忽略它？这是进行比较的最佳方法吗 ltrim(rtrim(upper(substr(PERSON_LAST_NAME,1,3))))=ltrim(rtrim(upper(substr(CUST_LAST_NAME,1,3))))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:50:40.490

您必须在 Trim 之前然后 substr 字符串如下

上（substr（ltrim（rtrim（PERSON_LAST_NAME）），1,3））=上（substr（ltrim（rtrim（CUST_LAST_NAME）），1,3））

希望这有帮助

# java - 玩！框架 - 未找到公共文件

> ID：12697647
> 
> 赞同：1
> 
> 时间：2012-10-02T20:19:16.353
> 
> 标签：java, web, playframework-2.0

我添加了一个文件作为项目公共资产的一部分：
`public/style/style.css`

这是`routes`文件中公共资产的路径：
`# Map static resources from the /public folder to the /assets URL path GET /assets/*file controllers.Assets.at(path="/public", file)`

这是 style.css 文件的链接：
`http://localhost:9000/assets/style/style.css`

但是，不知何故，这个链接被打破了。这是为什么？
其他文件（例如 js 库）都可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:24:07.870

有两件事要检查，应该对您有所帮助：

*   确保它`public/style/style.css`不为空。
*   确保您没有可用于 LESS 的类似文件路径，即：`app/assets/style`或`app/assets/style/style.css`

虽然只是猜测我有时会遇到类似的问题，这通常是由上述几点之一引起的。

# java - 如何清除 JTree 模型？（删除所有节点）

> ID：12697650
> 
> 赞同：8
> 
> 时间：2012-10-02T20:19:30.663
> 
> 标签：java, model, jtree

所以这是我的一种方法，每次添加新节点时都会调用它。我需要每次都清除模型。DefaultListModel 有一个 .clear() 方法。DefaultTreeModel 没有。帮助？

```
 public void fillUserList(){

    List<User> userFriends = ClientController.getInstance().getPrieteniiUserului(user);

    for(int i=0;i<userFriends.size();i++){
        User user = userFriends.get(i);

        model.insertNodeInto(new DefaultMutableTreeNode(user.getNume()), root, i);

    }

    System.out.println(userFriends);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T20:42:50.653

我解决了。新代码看起来像这样。

```
public void fillUserList(){    
    List<User> userFriends = ClientController.getInstance().getPrieteniiUserului(user);
    root.removeAllChildren(); //this removes all nodes
    model.reload(); //this notifies the listeners and changes the GUI
    for(int i=0;i<userFriends.size();i++){
        User user = userFriends.get(i);
        model.insertNodeInto(new DefaultMutableTreeNode(user.getNume()), root, i);        
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-20T05:51:18.713

如果您确实需要*删除**包括根节点在内*的所有节点，则应使模型为空。像这样：

```
mytree.setModel(null) 
```

# objective-c - 使用 dispatch_get_main_queue() 运行块不起作用并挂起应用程序

> ID：12697652
> 
> 赞同：3
> 
> 时间：2012-10-02T20:19:40.773
> 
> 标签：objective-c, ios

如果使用以下功能运行同步块：`dispatch_sync`使用从应用程序中检索到的队列`dispatch_get_main_queue()`挂起并且该块未执行，而如果我通过从获得的队列：`dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)`它可以正常工作。

```
dispatch_queue_t q;
q = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

//q = dispatch_get_main_queue();  //If uncommented the app hang

dispatch_sync(q , ^{
    NSLog(@".");
}); 
```

为什么使用从`dispatch_get_main_queue()`导致应用程序挂起并且块没有被执行的队列？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T20:22:52.783

如果您从主队列同步调度到主队列，它*应该*冻结。您要求它向主队列分派一段代码，但因为它是同步的 ( `dispatch_sync`)，您要求它冻结当前队列（主队列），直到分派队列（也是主队列）响应您刚刚添加的内容！它显然不能这样做。

要么做`dispatch_async`，要么分派到不同的队列！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:30:21.660

除了 Rob 的回答，这里是 Grand Central Dispatch 的文档（[编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091)、[参考](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)）。这是一组很棒的库，并且使并发几乎没有痛苦，但它并不是万无一失的。

# c++ - 请求非类类型的成员类*

> ID：12697662
> 
> 赞同：0
> 
> 时间：2012-10-02T20:20:21.740
> 
> 标签：c++, compiler-errors

我正在编写两个用于评估方程式中的表达式的类，即：方程式和表达式。Equation 类包含两个 Expression* 成员变量，需要使用它们来计算方程的右侧和左侧。为了解决他们如何访问每个持有的表达式（一个字符串）的问题，我为 Exression 类的构造函数创建了以下定义和实现：

```
#ifndef EXPRESSION_H
#define EXPRESSION_H
#include <string>

using namespace std;

class Expression
{
    private:
        int l, r;       

    public:
        Expression(string part);        
        string equationPart;

};
#endif

#include "Expression.h"
#include<cmath>
#include<iostream>
using namespace std;

Expression::Expression(string part)
{
    int len = part.length();
    equationPart[len];

    for(int i = 0; i < len; i++)
    {
        equationPart[i] = part[i];
    }   
} 
```

我还为 Equation 类的实现编写了以下内容：

```
#ifndef EQUATION_H
#define EQUATION_H
#include "Expression.h"
#include <string>

using namespace std;

class Equation
{
    public:
        Equation(string eq);
        ~Equation();
        int evaluateRHS();
        int evaluateLHS();
        void instantiateVariable(char name, int value);

    private:
        Expression* left;
        Expression* right;

};
#endif

#include "Equation.h"
#include<cmath>
#include<iostream>
#include<cstdlib>
#include<cstring>

using namespace std;

Equation::Equation(string eq)
{
    int length = eq.length();

    string l;
    string r;
    bool valid = false;
    short count = 0;

    for(int i = 0; i < length; i++)
    {
        if(eq[i] == '=')
        {
            valid = true;
            for(short j = i+1; j < length; j++)
            {
                r += eq[j];
            }

            for(short j = i-1; j > 0; j--)
            {
                count++;
            }

            for(short j = 0; j < count; j++)
            {
                l += eq[j];
            }   
        }   
    }

    if(valid == false) 
    {
        cout << "invalid equation" << endl;
    }
    else if(valid == true)
    {
        left = new Expression(l);
        right = new Expression(r);
    }
} 
```

当我运行如上所示的程序时，它会编译；但是当我尝试访问 Equation 中声明的左右 Expression 对象的字符串成员变量时，如下所示：

```
void Equation::instantiateVariable(char name, int value)
{
    string s1 = left.equationPart; 
    string s2 = right.equationPart; 

    short length1 = s1.length();
    short length2 = s2.length();

    bool found1 = false;

    for(short i = 0; i < length1; i++)
    {
        found1 = true;
        if(left.equationPart[i] == name)
        {
            left.equationPart[i] = itoa(value);
        }          
    }

    //and so on...
} 
```

我最终得到一个编译器错误：

```
error: request for member 'equationPart' in '((Equation*)this)->Equation::left', which is of non-class type 'Expression*' 
```

仅在 instantiateVariable 函数中，此错误就会多次出现。任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:23:08.647

`left`和都是指针，因此您需要通过 访问它们`right`，例如：`Expression``operator->`

```
string s1 = left->equationPart; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:21:51.787

“left”是一个指针，用“->”访问。改“左”。到“左->”

# php - NicEdit：图片上传到自己的服务器不起作用 -> 配置错误？

> ID：12697664
> 
> 赞同：4
> 
> 时间：2012-10-02T20:20:24.440
> 
> 标签：php, image, upload, nicedit

更准确地说，我对 textareas 的 nicEditor 有疑问；图片上传按钮。

我的文件 index.php 包含调用 nicEditor 的位置。在同一个文件夹中还有另外两个文件夹：“images”，我想在其中存储文件和“includes”，其中 nicEdit.js 和 nicUpload.php（其中包含从官方网站提供的上传代码）。

我的问题是：当我想通过nicEdit上传图片时，错误信息“上传图片失败”。出现，虽然我已经设置了以下参数：

*   在 nicEdit.js 中，nicURI 设置为“includes/nicUpload.php”
*   在 nicUpload.php 中，NICUPLOAD_PATH 被定义为“./images”，而 NICUPLOAD_URI 被定义为“images”（我在这里尝试了其他几种组合，但似乎都不起作用）
*   文件夹“images”的权限为 777

我只是在尝试和错误上浪费了几个小时，但这样做却没有得到任何积极的结果......

**[编辑]：**

当我上传更大的文件时，我可以看到上传栏正在处理，但是一旦完成，就会出现“上传图片失败”

nicEdit.js 中的代码包括：

```
var nicUploadButton=nicEditorAdvancedButton.extend({nicURI:'includes/nicUpload.php',errorText:"Failed to upload image",addPane:function ...... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-02T12:16:30.407

> **解决方案简单！！！**

**1 - 创建文件 image.php 并粘贴代码：**

```
<?php
//Check if we are getting the image
if(isset($_FILES['image'])){
        //Get the image array of details
        $img = $_FILES['image'];       
        //The new path of the uploaded image, rand is just used for the sake of it
        $path = "upload/" . rand().$img["name"];
        //Move the file to our new path
        move_uploaded_file($img['tmp_name'],$path);
        //Get image info, reuiqred to biuld the JSON object
        $data = getimagesize($path);
        //The direct link to the uploaded image, this might varyu depending on your script location    
        $link = "http://$_SERVER[HTTP_HOST]"."/nicedit/".$path;
        //Here we are constructing the JSON Object
        $res = array("upload" => array(
                                "links" => array("original" => $link),
                                "image" => array("width" => $data[0],
                                                 "height" => $data[1]
                                                )                              
                    ));
        //echo out the response :)
        echo json_encode($res);
}
?> 
```

**2 - 打开并编辑 nickedit.js：**

```
Find the line starting like nicURI:"http://api.imgur.com/2/upload.json" 
Replace it with

nicURI:"image.php"

DONE ! Now try uploading something and it would go directly to your server :) 
```

**字体： http:** *[//manzzup.blogspot.com.br/2014/03/customize-nicedit-image-upload-to.html](http://manzzup.blogspot.com.br/2014/03/customize-nicedit-image-upload-to.html)*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T10:38:29.003

nicEdit 开发人员做了一些**坏事**。

他们更新了`nicUpload.js`与`imgur.com`不兼容的版本`nicUpload.php`。当您从他们的页面下载 lib 时，服务器只需将`imgur`版本包含到`nicEdit.js`.

我想出了如何使这项工作。

在版本 23 上签出他们的 svn 存储库

```
 svn checkout http://svn.nicedit.com//trunk/nicUpload/
  svn update -r 23 
```

编辑未压缩版本`nicEdit.js`，**删除**之间的代码

```
/* START CONFIG */
var nicUploadOptions = {
    buttons : {
        'upload' : {name : 'Upload Image', type : 'nicUploadButton'}
    } 
```

和

```
nicEditors.registerPlugin(nicPlugin,nicUploadOptions); 
```

粘贴你从 svn 获得的`nicUpload.js`。`nicUpload/`

并删除这一行：

```
/* NICEDIT_REMOVE_START */,iconFiles : {'upload' : 'src/nicUpload/icons/upload.gif'}/* NICEDIT_REMOVE_END */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-03T19:52:29.637

如果您从 htaccess 保护区上传，则必须删除

```
C.setRequestHeader("Authorization","Client-ID c37fc05199a05b7"); 
```

...在 var`nicUploadButton`中以避免弹出提示，而不是获取您的登录值。似乎现在可以工作了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-06T22:13:14.627

没有一个答案对我有用，所以我制作了一个 PHP 上传器文件，该文件检索几乎与 imgur 相同的对象。

这是文件：

***上传者.php***

```
<?php
require_once 'controllers/utils.php';

$target_image_dir = "views/images/inner_img/";
$target_file = ""; 

$response =  array('data' => [], 'success' => false, "status" =>499 );
$fotoLink = json_encode($_FILES);

if(!empty($_FILES["image"]['tmp_name'])){
        $imagen = $_FILES["image"];                     
        list($width, $height) = getimagesize($imagen['tmp_name']);
        $imageFileType = pathinfo($imagen["name"],PATHINFO_EXTENSION);
        $fileNameCoded = uniqid('', false).'.'. strtolower($imageFileType);
        $target_file = $target_image_dir.$fileNameCoded;
        $fotoLink = $target_file;        

       if (move_uploaded_file($imagen["tmp_name"], $target_file)){
            strtolower($imageFileType));    
            $littleImage = '/views/images/inner_img/'.$fileNameCoded;
            $fotoLink = SITE_URL.$littleImage;

            $data = array( "type"=> "image/".strtolower($imageFileType),                                    
                            "width"=> $width ,
                            "height"=> $height,                            
                            "name"=> "",                      
                            "link"=> $fotoLink);
            $response =  array('data' => $data, 'success' => true, "status" => 200 );
        }
}

$response =  array('data' => $data, 'success' => true, "status" => 200);

echo json_encode($response); 
```

utils.php 检查图像属性：

***实用程序.php***

```
define('KB', 1024);
define('MB', 1048576);
define('GB', 1073741824);
define('TB', 1099511627776);
define('semana',  array('','Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado','Domingo'));

function checkImageAttrs($image, $targeFile)
{
    if(getimagesize($image["tmp_name"]) === false)
    {      
        return "El archivo de el archivo no es una imagen.";
    }

    if ($image["size"] > 10*MB) 
    {
       return "Ups, el archivo es muy grande.";        
    }

    $imageFileType = pathinfo($image["name"],PATHINFO_EXTENSION);

    if($imageFileType!="jpg" && $imageFileType!="png" && $imageFileType!="jpeg"  && $imageFileType!="gif" )
    {
        return "Ups, sólo están permitidos los archivos de tipo JPG, JPEG, PNG y GIF.";
    }

   return "OK";
}

function randomPassword($characters_count) {
    $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789";
    $pass = array(); //remember to declare $pass as an array
    $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache
    for ($i = 0; $i < $characters_count; $i++) {
        $n = rand(0, $alphaLength);
        $pass[] = $alphabet[$n];
    }
    return implode($pass); //turn the array into a string
} 
```

**警告：** 如果您将其用作开放式上传器，我确信这不够安全，但我必须为受限页面执行此操作，所以它可以完成工作。

这适用于从以下网址下载的 0.9 r25 版：http: [//nicedit.com/download.php](http://nicedit.com/download.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-02T15:22:46.513

简单的解决方案仍然适用于修订版 25（压缩）。res 数组是要替换的，如上所述。确保语法正确。
文件大小也有一些限制 - 实际上是 2M。尝试在代码或文件中更改它。并且不要忘记先创建上传文件夹并添加正确的链接。
希望这可以帮助某人。保持冷静。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-08T06:47:31.090

上传到同一服务器上的图像时，我也收到此错误**[object ProgressEvent]**，因为 **从源“** **[http://example.com](http://example.com)** **”访问“ [http://example.com/upload-editor-images](http://example.com/upload-editor-images) ”的 XMLHttpRequest已被阻止通过 CORS 策略：对预检请求的响应未通过访问控制检查：预检请求不允许重定向。**

解决方法：将**nicURI:" [http://example.com/upload-editor-images](http://example.com/upload-editor-images) "**改为**nicURI:"upload-editor-images"**

# c# - C# MVVM 升级到 EF5 - 实体成员函数去了哪里？

> ID：12697669
> 
> 赞同：2
> 
> 时间：2012-10-02T20:21:09.710
> 
> 标签：c#, .net, visual-studio, entity-framework, mvvm

我有一个大型 MVVM 类型的解决方案，我最初使用带有 .NET4 的 VS2010 Express 编写。该模型使用实体来访问 SQL Server 2012 数据库。

我最近设法丢失了 Model 项目，这似乎没什么大不了的，因为它实际上由自动生成的实体和一些小的修改组成。因此，我使用带有 .NET4.5 和 EF5 的 VS2012 重新创建了模型项目。我已将 ViewModel 升级到 .NET4.5 并使用包管理器导入了 EntityFramework。

问题是，我的 ViewModel（一个单独的类库）抛出了几个我无法弄清楚的编译时错误。这些围绕：

1.  主实体类（在我的例子中是 CN2Entities）不再有一个接受连接字符串的构造函数。自动完成证实了这一点，它只提供了一个无参数的构造函数。
2.  映射到数据库表的各个数据库对象类，例如“地址”不再包含它们的静态成员。例如：

    地址_ = 地址。创建地址（-1）；

这段代码用来为我提供一个漂亮的空地址记录来填充并添加到数据库中。这不再有效。事实上，Address 类的唯一静态成员似乎是“Equals”和“ReferenceEquals”。

1.  主 Entities 类不再包含 AddToAddress(Address) 函数，该函数将获取新的 Address 对象（表示 Addresses 表的一行）并将其添加到数据库中。然后我会调用 Entities.SaveChanges() 来提交添加。这个功能似乎仍然存在。

任何人都可以帮我解决发生了什么吗？这与 EF5 的新工作方式有关，还是我有一个损坏的解决方案没有为我提供正确的参考？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T21:21:59.513

乳清，您重新创建了模型项目，您使用了具有完全不同的 API（和不同的自动生成策略）的 Entity Framework 5。自 EF 4.1 以来，EF 有两个 API，但在 VS 2010 中，第二个 API（DbContext API）是可选的，只有在引用单独的程序集后才可用。在 VS 2012 中，当您添加 EDMX（VS 从 NuGet 下载该附加程序集）时，默认设置为 DbContext API。

您仍然可以使用旧 API - 在解决方案资源管理器中展开 EDMX 文件并删除所有扩展名为 .tt 的文件。之后打开 EDMX 图并在属性中将*Code Generation Strategy*从*None*更改为*Default*并保存图。它应该为旧 API 生成类，但我不知道代码生成器是否与以前在 VS 2010 中的相同。

# mysql - mysql 5.6 RC InnoDB全文搜索缓慢

> ID：12697675
> 
> 赞同：3
> 
> 时间：2012-10-02T20:21:31.583
> 
> 标签：mysql, full-text-search, innodb, myisam

由于 mysql 5.6 是 RC，我尝试将 myisam 表转换为 innodb，因为我读到 FTS 引擎更快、更强大，而 FTS 是唯一阻碍我使用 myisam 的东西。

令我失望的是，我在 myisam 中运行的同样复杂的 FTS 查询快了大约 5 倍。它甚至比没有 FTS 索引还要慢。

我必须在 innoDB 中设置什么以使其更快地使用 FTS 吗？与myisam相比有什么限制吗？我在 5.6 的手册中没有找到任何内容。

我对查询做了解释，显示使用了 FTS 索引。

**更新：**我的意思是 SELCT 查询太慢了，没有尝试制作索引和测量它。在将 myisam 转换为 innodb 并再次创建并优化表后记后，我删除了索引。没有帮助。

# vim - 在 gVim 和 Windows 7 中使用带空格的文件路径

> ID：12697676
> 
> 赞同：4
> 
> 时间：2012-10-02T20:21:31.333
> 
> 标签：vim, windows-7

这是我从上下文菜单 Windows Explorer 复制的路径：`"C:\Vim Python\getTime.py"`我正在尝试使用 Derek Wyatt 的[博客](http://www.derekwyatt.org/vim/vim-tutorial-videos/vim-advanced-tutorial-videos/)中所见的 Vim 表达式寄存器将给定 Python 脚本的输出插入缓冲区。

我已经尝试了所有我能想到的斜杠和引号的组合，以获取以下命令来绑定`<c-j>d`以插入脚本的输出，如下所示：

`imap <c-j>d <c-r>=system("C:\Vim Python\getTime.py")<cr>`

但如果不插入以下错误，我似乎无法让它工作：

`'C:\Vim' is not recognized as an internal or external command, operable program or batch file.`

为了使用带有空格的文件路径，我需要更改什么？

如果你想看看我的尝试，看看[pastebin](http://pastebin.com/bdYK5rc4)来开怀大笑。我所做的搜索将我带到了[几个](http://vim.1045645.n5.nabble.com/Backslash-spaces-in-windows-path-td1193484.html) [不同的](https://stackoverflow.com/questions/1531232/gvim-on-windows-execute-buffer-and-paths-with-spaces) [地方](http://vim.1045645.n5.nabble.com/Annoying-spaces-in-Path-td1171981.html)，但没有一个能解决我的问题，或者至少，我没有正确阅读它们。

* * *

对我来说正确的解决方案是：

```
imap <c-j>d <c-r>=system(shellescape('C:\Vim Python\getTime.py'))<cr> 
```

感谢[这里的Chiel](https://stackoverflow.com/a/12698017/541208)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T20:44:11.430

使用 vim 的 shellescape 功能。输入`:help shellescape`vim 以获取特定信息。

因此，将您的线路更改为`imap <c-j>d <c-r>=system(shellescape("C:\Vim Python\getTime.py"))<cr>`应该可以完成这项工作。

# google-chrome - 具有线性渐变的 CSS3 多个背景在 Google Chrome 中出现错误

> ID：12697682
> 
> 赞同：0
> 
> 时间：2012-10-02T20:21:58.493
> 
> 标签：google-chrome, css, webkit, background-image

谁知道下面的 CSS 语句有什么问题？Chrome (22) 和 Safari（在 Windows 上）抛出错误“无效的属性值”。

```
background-image: url("../img/radio_default.png"), -webkit-linear-gradient(to bottom, #fff 40%, #ececec); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:42:16.660

这是因为它还没有实现`to bottom`，你必须使用just `top`or `bottom`instead。

编辑：正如评论中指出的，`top`对应`to bottom`

```
-webkit-linear-gradient(top, #fff 40%, #ececec); 
```

# loops - 装配计数为零

> ID：12697685
> 
> 赞同：1
> 
> 时间：2012-10-02T20:22:02.153
> 
> 标签：loops, assembly, mov

我正在尝试自学组装（出于好奇和学习的兴趣），并开发了一些从 5 到 0 的代码。仅此而已。我想知道以下代码是否有效？

```
.386
.model flat, stdcall

.data
i dd 5

.code
main:
    MOV cx, 5
    lp:
    LOOP lp
    MOVZX eax, cx  
RET 
END main 
```

请注意，我使用`MOVZX`指令复制`cx`into的值`eax`（我的编译器用来返回的值）。我这样做是因为如果我只使用`MOV`. 使用`MOVZX`可取吗？或者有没有更有效的方法我应该这样做？

您还会在我的代码中注意到`i dd 5`我最初的计划是，`MOV cx, i`但是当我尝试这样做时，我的编译器拒绝汇编。（`MOVSX`产生相同的结果）。所以我的第二个问题是，如何将 的值移动`i`到`cx`寄存器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:26:37.887

如果您正在编写 32 位目标，则使用`ecx`寄存器而不是 16 位`cx`寄存器。然后，您将能够在`mov eax, ecx`没有汇编器抱怨操作数大小的情况下使用。此外，该`loop`指令隐式使用`ecx`，因此您需要确保整个寄存器初始化为 5，而不仅仅是低 16 位。

使用后`ecx`，该指令`mov ecx, i`可能会起作用-但您没有说明尝试该操作时遇到的实际错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:27:48.540

您的代码效率不高，不。LOOP 指令已经过时并且很少使用了，因为它的性能不如简单地手动递减。

您可以通过与自身进行异或来将寄存器归零，然后您可以通过立即 ADD 将数字加载到其中。我不经常使用汇编，所以我没有牢牢掌握语法，不幸的是无法发布示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T20:30:44.573

这是一个与您的类似的 C 示例：

```
#include <stdio.h>

int i = 5;

int
main (int argc, char *argv[])
{
  while (--i >= 0)
    ;
  return 0;
} 
```

这是 Visual Studio 汇编程序输出 (cl /Fa)：

```
 .386P
include listing.inc
if @Version gt 510
.model FLAT
else
_TEXT   SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT   ENDS
_DATA   SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA   ENDS
CONST   SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST   ENDS
_BSS    SEGMENT DWORD USE32 PUBLIC 'BSS'
_BSS    ENDS
_TLS    SEGMENT DWORD USE32 PUBLIC 'TLS'
_TLS    ENDS
FLAT    GROUP _DATA, CONST, _BSS
    ASSUME  CS: FLAT, DS: FLAT, SS: FLAT
endif
PUBLIC  _i
_DATA   SEGMENT
_i  DD  05H
_DATA   ENDS
PUBLIC  _main
_TEXT   SEGMENT
_main   PROC NEAR
; File x.c
; Line 7
    push    ebp
    mov ebp, esp
$L342:
; Line 8
    mov eax, DWORD PTR _i
    sub eax, 1
    mov DWORD PTR _i, eax
    cmp DWORD PTR _i, 0
    jl  SHORT $L343
; Line 9
    jmp SHORT $L342
$L343:
; Line 10
    xor eax, eax
; Line 11
    pop ebp
    ret 0
_main   ENDP
_TEXT   ENDS
END 
```

# c# - Linq-to-Entity 在插入 Oracle 时获取主键

> ID：12697686
> 
> 赞同：2
> 
> 时间：2012-10-02T20:22:09.627
> 
> 标签：c#, oracle, entity-framework, linq-to-entities

我是一个带有 Linq-to-Entity 的菜鸟。这些是我的数据库表。

```
create table Jobs 
( ID            NUMBER PRIMARY KEY,
  ....
)

create table Responsibilities
( ID            NUMBER PRIMARY KEY,
  JobID         NUMBER
  ....
) 
```

JobID 列是引用 Jobs(ID) 的外键。

使用这些表，我在 Visual Studio 中自动创建允许我与这些表交互的类。然后我尝试创建作业并将它们插入数据库。我在每个表上都有触发器来为每个表的主键生成一个唯一的 ID。下面是创建 Job 的代码片段。

```
using (Workflow.WorkflowEntities entity = new Workflow.WorkflowEntities(connectionString))
{
    JOBS j = new JOBS();
    entity.AddToJOBS(j);
    entity.SaveChanges(); 
```

我遇到的一个问题是，当作业被保存时，我没有得到它的主键。当我想创建 Responsibilities 对象并将它们添加到 Job 然后整体保存所有内容时，这尤其是一个问题。就像它没有在 Responsibilities 对象中正确填充 JobID 字段一样。

这样做的正确方法是什么？非常感谢任何指针，

米

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:54:54.200

我找到了答案。本页末尾的第三篇文章。

[https://forums.oracle.com/forums/thread.jspa?messageID=9904561](https://forums.oracle.com/forums/thread.jspa?messageID=9904561)

显然 Visual Studio 2010 没有在 XML 中正确保存 StoreGeneratedPattern 属性。

编辑 1：我认为 Visual Studio 2010 服务包 1 解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:31:00.400

您需要在列的属性中设置 StoreGeneratedPattern="Identity"

# javascript - 扫描元素类的所有 HTML，然后在该类上运行 javascript？

> ID：12697689
> 
> 赞同：2
> 
> 时间：2012-10-02T20:22:43.297
> 
> 标签：javascript, jquery, html

我正在尝试执行此过程：

1.  查找所有以“i18n_”开头的类
2.  捕获该类名，然后将该类的 .html 值设置为与该类同名的变量。

基本上，我有一个从服务器获取的列表，其中包含所有字符串，从 i18n_ 开始。例如 i18n_t23 = "Back" 什么的。我想把`<span class="i18n_t23"></span>`它的值设置为变量 i18n_t23。

目前我有大量的手工编码 $("span.i18n_t189").html(i18n_t189); 并且必须检查它们是否都在那里变得很累。必须有一种方法让它自动执行此操作。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T20:27:11.157

只需使用：

```
$('span[class^=i18n_]').text(
    function(){
        return this.className;
    }); 
```

值得注意的是，这会将元素的*文本*设置为元素的类名；a`span`没有`value`属性，并且`html()`没有必要设置它（尽管在这种情况下它具有几乎相同的结果）。

顺便说一句，根据您的需要，您可以使用简单的 CSS 来模拟它（支持“现代”浏览器）：

```
span[class=^=i18n_]::before {
    content: attr(class);
} 
```

一种处理多个类的方法：

```
$('span[class]').filter(
    function(i, e) {
        var el = $(e),
            classes = el.attr('class').split(/\s+/);
        for (var i = 0, len = classes.length; i < len; i++) {
            var assessed = classes[i].indexOf('i18n_');
            if (assessed === 0) {
                el.data('classMatch',classes[i]);
                return true;
            }
        }
    }).text(function(){ return $(this).data('classMatch'); });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/KVfFS/)。

以及一种处理查找的方法（使用返回的类名从对象中检索分配的值：

```
var lookup = {
    'i18n_something' : 'Something for the "something" suffixed class.',
    'i18n_somethingElse' : 'Something for the "somethingElse" version.',
    'i18n_AndSomethingElse' : 'And...well, you know the drill.'
};

$('span[class]').filter(
    function(i, e) {
        var el = $(e),
            classes = el.attr('class').split(/\s+/);
        for (var i = 0, len = classes.length; i < len; i++) {
            var assessed = classes[i].indexOf('i18n_');
            if (assessed === 0) {
                el.data('classMatch',classes[i]);
                return true;
            }
        }
    }).text(function(){ return lookup[$(this).data('classMatch')]; });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/KVfFS/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:47:25.847

这是一种方法：

```
 var _regClassMatch = /i18n_t([0-9]+)/;
    jQuery.each(jQuery('span'), function () {
        var _oCurrSpan = jQuery(this);
        var _sCurrClass = _oCurrSpan.attr('class');

        var _mClassMatch = _sCurrClass.match(_regClassMatch);
        if (_mClassMatch) {
            alert(_mClassMatch[1]);
        }
    }); 
```

_mClassMatch[1] 是您的数值，_oCurrSpan 对象是您当前的跨度。只需在 document.ready 上运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T20:31:58.970

你试一下。 `$("*[class*='i18n_']).attr("class")`或者当元素只有一个类名时`$("*[class^='i18n_']).attr("class")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T20:38:04.013

我建议您稍微更改设置，从而简化您拥有的 javascript 代码：

```
<div data-i18="a">a</div>

<div data-i18="b">b</div>

var i18 = { a: 'a2', b: 'b2' }

$('div[data-i18]').each(function(ind, el) {
    var key = $(el).data('i18')
    $(el).html(i18[key])        
});​

// or in case of global variables 

$('div[data-i18]').each(function(ind, el) {
    var key = $(el).data('i18')
    $(el).html(window[key])        
});​ 
```

`i18_something`因此，您要设置自定义数据属性 data-i18 并将值放在这里，而不是 class 。

# ruby - Jira4R：Jira 5.1 中的观察者字段

> ID：12697692
> 
> 赞同：1
> 
> 时间：2012-10-02T20:22:46.710
> 
> 标签：ruby, gem, jira

我们的 JIRA 管理员最近从 JIRA 4.* 升级到了 Jira 5.1。我们中的一些人编写了使用 JIRA soap API 的 webapps，而我正在使用 Jira4R ruby​​ gem。

观察者领域因这次升级而崩溃。以前我会通过 jira4r 发布以下内容：

```
JIRA_WATCHER_FIELD = "customfield_10060"
JIRA_WATCHERS = ["me", "prod.mgr", "vendor.management"]

    issue.customFieldValues= [
        JiraTicket.create_custom_field(JIRA_WATCHER_FIELD, JIRA_WATCHERS),
    ]

    issue = jira.createIssue(issue) 
```

突然之间，返回： 无法创建 jira 票证：com.atlassian.jira.rpc.exception.RemoteValidationException：自定义字段 ID 'customfield_10060' 无效。

所以我想这不再是自定义字段了。它看起来也不是 Jira4R::RemoteIssue 的一部分。

有没有人找到让它工作的方法？我正在考虑制作自己的 Jira4R 分支并对 gem 进行向后不兼容的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:13:13.947

“Watchers”字段从来都不是 JIRA 中的自定义字段。我的猜测是您安装了[JIRA Watcher Field Plugin](https://marketplace.atlassian.com/plugins/com.atlassian.jira.plugin.workflow.jira-watcher-field)。这个插件实际上将“观察者”添加为自定义字段。也许在 JIRA 升级之后，该插件不再兼容并且该字段消失了。

请让您的 JIRA 管理员检查您是否安装了该插件，以及他是否也可以升级该插件以使其与升级后的 JIRA 一起使用。之后，请他确认“10060”是否是该字段的ID（如果您重新安装插件，它可能会改变）。

# jquery - 根据属性值隐藏元素

> ID：12697693
> 
> 赞同：2
> 
> 时间：2012-10-02T20:22:49.260
> 
> 标签：jquery, jquery-selectors

我有一个按钮，用于在显示是/否“政策内”div 之间切换

```
<form>
<input type="radio" id="Policy0" name="Policy" value="0" onclick="filterHotel();"><label for="Policy0">All</label>
</form>
<script type="application/javascript">
var Policy = $('input:radio[name=Policy]:checked').val()
if (Policy == 0) {  
 $('form [data-policy="0"]').toggle();              
}
</script>

<div id="24448" data-policy="0">Data here</div>
<div id="24448" data-policy="1">Data here</div> 
```

使用上面的代码，我可以成功显示/隐藏正确的 div，但我的问题是我不想将输入包装在表单元素中。有没有办法根据属性中的值进行引用？

我试过`$('input[attr=data-policy][value="0"]').toggle();`了，但这似乎不起作用。我确定我错过了一些简单的东西，有人可以指出我正确的方向吗？

编辑：`$('input[data-policy="0"]').toggle();`不起作用，我没有收到错误，但它不会隐藏具有属性的 div`data=policy="0"`我也尝试`data-policy=0`过但没有运气

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T20:24:45.967

这应该足够了：

```
$('[data-policy="0"]').toggle(); 
```

有关更多信息，您可以查看[Attribute Equals Selector [name="value"]](http://api.jquery.com/attribute-equals-selector/)文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:26:40.893

看看这里：[http ://api.jquery.com/attribute-equals-selector/](http://api.jquery.com/attribute-equals-selector/)

本质上，您希望像这样使用属性名称：

```
$('input[data-policy="0"]').toggle(); 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T20:25:56.747

正确的 CSS（以及 jQuery）选择器是`[attribute=value]`，因此，要选择项目，`data-policy="0"`您应该使用`[data-policy=0]`.

其他可用的选择器是 "has attribute": `[attribute]`、 "contains": `[attribute*=value]`、 "starts with":`[attribute^=value]`和 "ends with": `[attribute$=value]`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T20:29:47.993

ID 是唯一的，为什么不使用 ID 呢？

```
var Policy = $('#Policy0:checked').val();
$('#Policy0').toggle(Policy===0); 
```

# algorithm - 如果我使用动态规划来解决硬币找零，那么用于记忆的矩阵将是什么？

> ID：12697694
> 
> 赞同：0
> 
> 时间：2012-10-02T20:22:51.050
> 
> 标签：algorithm, dynamic-programming, coin-change

我对硬币问题的动态编程技术的矩阵应该是什么样子感到困惑。假设我有 1c、5c、10c 和 25c 的面额，我称之为 make-change(10)。即我想为 10 美分进行更改，我的最终矩阵/数组应该是什么样子。我需要知道这一点，因为我想在程序的开头分配一个数组。我不是在这里寻找代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:20:02.057

您可以使用一个矩阵，其中一个维度显示您现在正在计算的总和，另一个显示您可以使用哪些硬币 - 例如，第一行显示仅使用 1c 硬币获得给定总和的方法数量，第二行 - 1c 和 5c，第三行 - 1c、5c 和 10c 等等。

因此，在您的示例中，它可能如下所示：

```
Sum:  0 1 2 3 4 5 6 7 8 9 10
Ways: 1 1 1 1 1 1 1 1 1 1 1   (using only 1c coins - N x 1c)
      1 1 1 1 1 2 2 2 2 2 3   (using 1c and 5c coins - either Nx1c, 1x5c + (N - 5)*1c or 2x5c)
      1 1 1 1 1 2 2 2 2 2 4   (using 1c, 5c and 10c coins - one of the above, or 1x10c) 
```

不过，您实际上并不需要存储整个矩阵 - 最后一行应该总是足够的。

**摆脱大部分矩阵的解释：**

假设您在仅使用 1c 硬币时找到了答案（这并不是一件非常困难的事情），并且它存储在单个数组中，例如`DP`. 现在，您有了这些信息，并且想知道 1c 和 5c 硬币的答案。

您可以从 开始`sum = 0 to 10`，保持以下不变量：

*   当您计算 的答案时，从 0 到包含0的每个数字`sum`的条目显示使用 1c 和 5c 硬币的方法数。仅使用 1c 硬币时，所有其余条目（从数组末尾到数组末尾）都包含答案。`DP``x``sum - 1``sum``sum`

并且维护它实际上非常容易：当您计算 的答案时`x`，您知道：

*   `x`仅使用 1c 硬币的方法数量- 这是`DP[x]`，因为我们还没有覆盖它；
*   `x`使用至少一个 5c 硬币的方法数 - 即，`DP[x - 5]`即在我们移除 5c 后获得剩余硬币数量的方法数（或 0，如果`x - 5 < 0`）。

然后您可以将这两个数字相加并将结果存储在`DP[x]`. 然后继续类似地处理其余的硬币。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:33:13.800

我认为一个将金额映射到硬币列表的哈希图。所以它看起来像：

```
{0 => (),
 1 => (1),
 2 => (1,1),
 3 => (1,1,1),
 ...
 13 => (10,1,1,1)
 ...
} 
```

# mysql - 为什么当它存储在数据库中时会出现 JPEG 错误 42？

> ID：12697699
> 
> 赞同：5
> 
> 时间：2012-10-02T20:23:15.787
> 
> 标签：mysql, delphi, delphi-7, jpeg

我在使用 Delphi 的 MySql 数据库中的 TImage 中显示我的图片时遇到问题。

我使用此代码将图片保存到我的数据库并完美地工作。

```
var
  AStream : TMemoryStream;

AStream := TMemoryStream.Create;
  try
    Image1.Picture.Graphic.SaveToStream(AStream);
    AStream.Position := 0;
    if ADODataSet1.Active then
    begin
      ADODataSet1.Edit;
      TBlobField(ADODataSet1.FieldByName('MyField')).LoadFromStream(AStream);
      ADODataSet1.Post;
    end;
  finally
    AStream.Free;
  end; 
```

但是，问题是当我想检索那些图片时。我使用此代码，但我只能显示数据库中的第一张图像。我在 DBGrid 事件上使用此代码 - OnDrawColumnCell。当我使用此代码时，我收到消息 JPEG 错误 #42！

```
var
  AStream : TMemoryStream;
begin
  AStream := TMemoryStream.Create;
  try
    if ADODataSet1.Active then
    begin
      TBlobField(ADODataSet1.FieldByName('MyField')).SaveToStream(AStream);
      AStream.Position := 0;
      Image1.Picture.Graphic.LoadFromStream(AStream);
    end;
  finally
    AStream.Free;
  end;
end; 
```

有人可以告诉我如何解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T20:30:26.673

截断流时报 JPEG 错误 42。例如，如果您尝试将零长度文件加载到 a中，`TJPEGImage`则错误 42 是最终结果。

如果显示了一些图像，但不是全部，那么最可能的解释是数据无法以某种方式往返于数据库并返回。

写出时检查 BLOB 字段的大小。当您将文件写入磁盘文件时，请检查它是否与文件的大小相符。检查磁盘文件是否为有效的 JPEG。然后确认 BLOB 字段在重新读取时具有完全相同的长度。也许您的数据库代码有问题并且流被截断。

因此，这里的第一步是确认您可以恢复您最初放入数据库的完全相同的数据。

我唯一的另一个想法是图像控件中的图形并不总是JPEG。用于加载图像的代码`Image1.Picture.Graphic.LoadFromStream()`假定数据是 JPEG。如果您保存了 JPEG 以外的其他内容，那么`LoadFromStream()`将会失败。

# java - JPA 3 路连接注释

> ID：12697703
> 
> 赞同：11
> 
> 时间：2012-10-02T20:23:25.943
> 
> 标签：java, jpa, orm, jpql

将三个表建模为三个实体：

```
@Entity
@Table(name="event")
public class Event {
  public Long datetime;
  public String name;
  public Long processId;
}

@Entity
@Table(name="process")
public class Process {
  public Long Id;
  public Long sequence;
  public Name name;
}

@Entity
@Table(name="operation")
public class Operation {
  public Long Id;
  public Long datetime;
  public Long sequence;
} 
```

任何唯一的 process-operation-sequence 单条记录都由具有 3-way join 约束的 SQL 获得：

```
SELECT *
FROM event e, process p, operation q 
WHERE e.processId = p.id
  AND e.datetime = q.datetime
  AND p.sequence = q.sequence 
```

为了在 JPA 中实现它，我必须列出一个操作列表，通过 JQPL 相等 p.sequence = q.sequence 将其明确缩小到单个记录

```
@Entity
@Table(name="event")
public class Event {
  public Long datetime;
  public String name;
  public Long processId;
  @OneToOne
  @JoinColumn(
    name = "processId", referencedColumnName="id",
    insertable=false, updatable=false)
  private Process process;

  @OneToMany
  @JoinColumn(
    name = "datetime", referencedColumnName="datetime",
    insertable=false, updatable=false)
  private List<Operation> operations;
} 
```

其中 JPQL 指定了传递的第三个连接约束：

```
SELECT e FROM Event e
INNER JOIN FETCH e.process p
INNER JOIN FETCH e.operations q
WHERE p.sequence = q.sequence 
```

但是，我希望在实体 POJO 中对所有三个约束进行建模。不应该有办法单独使用 JPA 注释进行三向连接吗？如以下实体伪代码所示：

```
@Entity
@Table(name="event")
public class Event {
  public Long datetime;
  public String name;
  public Long processId;
  @OneToOne
  @JoinColumn(
    name = "processId", referencedColumnName="id",
    insertable=false, updatable=false)
  private Process process;

  @OneToOne
  @JoinColumn(
    name = "datetime", referencedColumnName="datetime",
    insertable=false, updatable=false)
  @JoinColumn(
    name = "process.sequence", referencedColumnName="sequence",
    insertable=false, updatable=false)
  private Operation operations;
} 
```

这样就没有必要在 JPQL 中指定传递连接约束

```
SELECT e FROM Event e
INNER JOIN FETCH e.process p
INNER JOIN FETCH e.operations q 
```

如何使用 JPA 注释对传递连接进行建模？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:05:30.913

您似乎正在尝试为查询建模，而不是您的数据。您应该正确地对数据建模，然后编写查询。

你好像有

事件

*   过程
*   多对一（进程 ID）

过程

*   事件 - 一对多
*   操作 - 一对多

手术

*   流程 - ManyToOne (sequence)（这个有点奇怪，因为序列不是 Id，这超出了 JPA 规范，但一些 JPA 提供者可能支持它）

要查询事件的所有操作，您可以使用，

```
Select o from Operation o join o.process p join p.events e where e.datetime = o.datetime 
```

要让所有对象重新使用，

```
Select o, p, e from Operation o join o.process p join p.events e where e.datetime = o.datetime 
```

如果您确实需要将查询建模为关系，这超出了 JPA 规范，但一些 JPA 提供程序可能支持它。在 EclipseLink 中，您可以使用 DescriptorCustomizer 来配置任何关系以使用任何表达式条件，或者您拥有 SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-09T18:17:36.803

您的伪映射几乎是正确的解决方案，您只需将两个`@JoinColumn`s 分组在 a 中[`@JoinColumns`](https://docs.oracle.com/javaee/7/api/javax/persistence/JoinColumns.html)：

```
@OneToOne
@JoinColumns({
  @JoinColumn(
    name = "datetime", referencedColumnName="datetime",
    insertable=false, updatable=false),
  @JoinColumn(
    name = "sequence", referencedColumnName="sequence",
    insertable=false, updatable=false)
})
private Operation operations; 
```

# c++ - 如何构造本地唯一标识符名称？

> ID：12697709
> 
> 赞同：5
> 
> 时间：2012-10-02T20:23:41.287
> 
> 标签：c++, visual-studio-2010, visual-c++, uniqueidentifier, c-preprocessor

我想动态创建一个唯一的变量名。

这是我的代码：

```
int call(int i)
{
    return i;
}

#define XCAT3(a, b, c)    a ## b ## c

#define CALL_2(arg, place, line) int XCAT3(cl, place, line) = call(arg);

#define CALL_1(arg)    CALL_2(arg, __FUNCTION__, __LINE__)

int main(int argc, char* argv[])
{
    CALL_1(1); /* this is line 20 */
    return 0;
} 
```

这在 GCC ( [http://ideone.com/p4BKQ](http://ideone.com/p4BKQ) ) 中有效，但不幸的是在 Visual Studio 2010 或 2012 中无效。

错误信息是：

> test.cpp(20)：错误 C2143：语法错误：缺少 ';' 在'function_string'之前
> 
> test.cpp(20)：错误 C2143：语法错误：缺少 ';' 在“常数”之前
> 
> test.cpp(20): 错误 C2106: '=' : 左操作数必须是左值

如何使用 C++ 创建动态唯一变量名？

**解决方案：**

```
#define CAT2(a,b) a##b
#define CAT(a,b) CAT2(a,b)
#define UNIQUE_ID CAT(_uid_,__COUNTER__)

int main(int argc, char* argv[])
{
    int UNIQUE_ID = 1;
    int UNIQUE_ID = 2;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T14:59:39.433

对于唯一标识符，许多实现都提供了`__COUNTER__`预处理器宏，随着每次使用，它的数量会不断增加。

```
#define CAT(a,b) CAT2(a,b) // force expand
#define CAT2(a,b) a##b // actually concatenate
#define UNIQUE_ID() CAT(_uid_,__COUNTER__)

auto UNIQUE_ID() = call(1); // may be _uid_0
auto UNIQUE_ID() = call(2); // may be _uid_1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T20:29:06.860

您需要将令牌粘贴推迟到参数之后，`place`并`line`在宏中递归展开`CALL_LATER2`。你可以通过将`##`操作移动到一个单独的宏来做到这一点——只要`##`没有出现在 的主体中`CALL_LATER2`，它的所有参数都将被预先扫描为宏：

```
#define XCAT3(a, b, c)    a ## b ## c
#define CALL_LATER2(fun, h, place, line) \
    auto XCAT3(calllater, place, line) = \
        call_later((fun), (h)); 
```

但是，这仍然不能满足您的要求，因为它`__FUNCTION__`会扩展为带有`"`字符的字符串，而不是可以粘贴到标识符中的内容。相反，您需要以创建的名称为基础，`__LINE__`并确保最终可以在不同的编译单元中出现重复的事实不是问题（如果它们是某些函数的本地，那应该没问题，或者您可以将它们放在在匿名命名空间中。）

# c# - 使用自定义 PrintTicket 在 WPF 中打印 PDF 文件

> ID：12697711
> 
> 赞同：2
> 
> 时间：2012-10-02T20:24:03.750
> 
> 标签：c#, wpf, pdf, printing, reporting-services

在当前项目中，我需要打印从 SSRS 收到的 Pdf 格式的报告。到目前为止，我了解到 Pdf 和 WPF 根本不是朋友。但还有更多的要求：

*   Pdfs 应该打印到打印机而不显示打印对话框。
*   一些报告需要来自特定 InputBin 的纸张（因此这必须
    是可配置的）

我已经看到了很多方法。我还调查了一些 WPF – PDF 库，但没有一个涵盖这些要求。

我的解决方案是从 SSRS 获取作为 Imagesource 的报告，然后`Image`为每个源创建一个 WPF 控件。然后创建一个`FixedDocument`包含所`Image`创建控件的每个页面。

这可行，但是，创建的文件非常大，打印它们需要很长时间。因此，打印本机 PDF 文件方法会更好。

我想要的是这样的：

```
var bytes = GetSomeReportFromReportingServices();
var pdfDocuments = new PdfDocument(bytes);

var printQueue = LocalPrintServer.GetDefaultPrintQueue();
var printTicket = printQueue.DefaultPrintTicket();

//Extension method to set the input bin
printTicket.SetInputBin("SomeInputBinDifferentFromDefault");

//Set some other PrintTicket Properties
//[...]

pdfDocument.Print(printQueue, printTicket); 
```

就这么简单。我想要的只是配置一个 PrintTicket 并将该 pdf 打印到打印机。是否有一些库/组件能够做这样的事情？

# ios - 图像未填满外部屏幕

> ID：12697715
> 
> 赞同：0
> 
> 时间：2012-10-02T20:24:16.087
> 
> 标签：ios, xamarin.ios

我正在构建一个 MonoTouch 应用程序，该应用程序在 iOS 设备屏幕上具有 UI，并通过 HDMI 在第二个屏幕上显示图像。在 UIImageView 中显示图像时，图像不会填满第二个屏幕。下面是在外部屏幕上设置和显示图像的代码。UIScreen.Screens[1] 宽度和高度给了我正确的值 1920/1080。显示图像时，顶部/底部有 1 英寸边框，左/右有 1.5 英寸边框。使用具有类似外部屏幕设置的 MPMoviePlayerController 填充屏幕。

```
 public void SetImageExternal(string imageFile)
    {
        if(string.IsNullOrEmpty(imageFile) == false)
        {
            UIScreen externalScreen;
            UIWindow externalWindow;
            UIView externalView;
            UIImageView externalImageView;
            SizeF externalScreenSize;

            if(UIScreen.Screens.Length > 1)
            {

                if(externalWindow != null)
                    externalWindow.Dispose();
                externalWindow = null;

                externalScreenSize = new SizeF();
                externalScreenSize.Width = 0;
                externalScreenSize.Height = 0;
                UIScreenMode maxScreenMode = null;
                externalScreen = UIScreen.Screens[1];

                // Use the screen with the largest width
                for(int i = 0; i < externalScreen.AvailableModes.Length; i++)
                {       
                    UIScreenMode current = UIScreen.Screens[1].AvailableModes[i];
                    if(current.Size.Width > externalScreenSize.Width)
                    {
                        externalScreenSize = current.Size;
                        maxScreenMode = current;
                    }
                }

                externalScreen.CurrentMode = maxScreenMode;

                externalWindow = new UIWindow(new RectangleF(0, 0, externalScreenSize.Width, externalScreenSize.Height));
                externalWindow.RootViewController = new UIViewController(); // create dummy root view controller
                externalWindow.UserInteractionEnabled = false;

                externalImageView = new UIImageView(externalWindow.Frame);          
                externalImageView.Image = UIImage.FromBundle(imageFile);
                externalImageView.ContentMode = UIViewContentMode.ScaleToFill;

                externalView = new UIView(externalWindow.Frame);
                externalView.AddSubview(externalImageView);

                foreach(UIView view in externalWindow.Subviews)
                    view.RemoveFromSuperview();
                externalWindow.AddSubview(externalView);
                externalWindow.MakeKeyAndVisible();
                externalWindow.Hidden = false;
                externalWindow.Screen = externalScreen;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:58:56.167

我相信 ContentMode 决定了内容的预渲染版本如何缩放。

但是 UIImageView 会根据 UIImage 的 LeftCapWidth 和 TopCapHeight 的参数来决定图像的缩放方式，只有在没有设置的情况下才会使用 ContentMode。

# android - 如何解决此 Listview 和复选框组合？

> ID：12697718
> 
> 赞同：1
> 
> 时间：2012-10-02T20:24:43.407
> 
> 标签：android, android-listview, android-arrayadapter, android-checkbox

我收到**空指针异常**- 错误，因为我的查看器没有找到任何复选框。有谁知道我如何解决这个问题？

这是出错的行： viewHolder.getCheckBox().setChecked(Exercise.isChecked()); （用向下箭头标记）

**XML EditWorkout.xml：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
        <Spinner
        android:id="@+id/spinner1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <ListView
        android:id="@+id/mainListView"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="60dp"
        android:layout_weight="0"
        android:gravity="bottom">

<Button
    android:id="@+id/button_EditWorkout_Save"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Save"/>
<Button
    android:id="@+id/button_Workout_Cancel"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Cancel"/>

    </LinearLayout>
</LinearLayout> 
```

**XML Simplerow.xml**

```
<?xml version="1.0" encoding="utf-8" ?> 
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" 
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
  <TextView android:id="@+id/rowTextView" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:padding="10dp" 
            android:textSize="16sp" /> 
  <CheckBox android:id="@+id/CheckBox01" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:padding="10dp" 
            android:layout_alignParentRight="true" 
            android:layout_marginRight="6sp" 
            android:focusable="false" /> 
  </RelativeLayout> 
```

**Java 编辑锻炼：**

```
 public class EditWorkout extends SherlockActivity implements OnItemSelectedListener
    {

          private ListView mainListView;
          private ArrayAdapter<Exercise> listAdapter;
          private String workoutName;
          ArrayList<Exercise> exerciseList = new ArrayList<Exercise>();

        @Override
        public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            Intent intent = getIntent();
            workoutName = intent.getStringExtra(ListWorkoutActivity.WORKOUT_NAME);

            setContentView(R.layout.editworkout);
            // Find the ListView resource.   
            mainListView = (ListView) findViewById( R.id.mainListView );  

            // When item is tapped, toggle checked properties of CheckBox and Exercise.  
            mainListView.setOnItemClickListener(new AdapterView.OnItemClickListener()
            {

              @Override  
              public void onItemClick( AdapterView<?> parent, View item,   int position, long id) 
              {  
                Exercise Exercise = listAdapter.getItem( position );
                Exercise.toogleChecked();
                ExerciseViewHolder viewHolder = (ExerciseViewHolder) item.getTag();
               -----> viewHolder.getCheckBox().setChecked( Exercise.isChecked() <------ );
              }//End of onItemClick
            });//End of Listener

 // Since we don't have a database we manually put in exercises
        //Could use a Arraylist directly but we use a String since we will load
        //String-Arrays from the database we use a String-array here

        if(exerciseList.isEmpty())
        {

            exerciseList.add(new Exercise("pushup"));
            exerciseList.add(new Exercise("sit-up"));
            exerciseList.add(new Exercise("sit-up"));
            exerciseList.add(new Exercise("sit-up"));
            exerciseList.add(new Exercise("sit-up"));
        }

        // Set our custom Arrayadapter as the ListView's adapter.
        listAdapter = new ExerciseArrayAdapter(this, exerciseList);
        mainListView.setAdapter( listAdapter );
    } 
```

**Java 练习：**

```
public class Exercise 
{  
  private String name = "" ;  
  private boolean checked = false ; 

  /** 
   * */ 
  public Exercise( String name ) {  
    this.name = name ;  
  }  
  public Exercise( String name, boolean checked ) {  
    this.name = name ;  
    this.checked = checked ;  
  }  
  public String getName() {  
    return name;  
  }   
  public boolean isChecked() {  
    return checked;  
  }  
  public void setChecked(boolean checked) {  
    this.checked = checked;  
  }  
  public String toString() {  
    return name ;   
  }  
  public void toogleChecked() {  
    checked = !checked ;  
  }  
} 
```

**Java 练习视图持有者：**

> 公共类ExerciseViewHolder { 私人复选框复选框；私有文本视图文本视图；
> 
> ```
>  /**
>      * Creates a new holder with the given name and a checkbox
>      * The name is the name of the exercise
>      */
>     public ExerciseViewHolder( TextView textView, CheckBox checkBox )
>     {
>       this.checkBox = checkBox;
>       this.textView = textView;
>     }
>     /**
>      * Gets the checkbox of the holder
>      * @return the holders checkbox.
>      */
>     public CheckBox getCheckBox()
>     {
>       return checkBox;
>     }
>     /**
>      * Gets the name of the holder
>      * @return the holders name
>      */
>     public TextView getTextView()
>     {  
>       return textView;
>     }
>  } 
> ```

```
public class ExerciseArrayAdapter extends ArrayAdapter<Exercise> {  

  private LayoutInflater inflater;  

  public ExerciseArrayAdapter( Context context, List<Exercise> exerciseList )
  {  
    super( context, R.layout.simplerow, R.id.rowTextView, exerciseList );  
    // Cache the LayoutInflate to avoid asking for a new one each time.  
    inflater = LayoutInflater.from(context);
  }

  /**Since we display other things than a TextView we need to Override a getView-method.
   * This method is the one that got the focus on the screen and is returning the View
   * when the user clicks on a exercise.
   * @param position        The place where the user clicks refereed as an Int.
   * @param convertView     The view, each view will be represented as an simplerow
   *                        with an textfield and a checkbox.
   * @return View*/
  public View getView(int position, View convertView)
  {  
    // Exercise to display  
    Exercise exercise = (Exercise) this.getItem( position );   
    Log.v("Convertview", String.valueOf(position));

    //What each view contains. 
    CheckBox checkBox;
    TextView textView;

    //If the view doesn't exist, we create a new row view. Initially
    //the screen is filled up, when the screen is full the convertView
    // is not null and will there after go to the else-statement
    if ( convertView == null)
    {
      convertView = inflater.inflate(R.layout.simplerow, null);

      // Find the child views.
      textView = (TextView) convertView.findViewById( R.id.rowTextView );
      checkBox = (CheckBox) convertView.findViewById( R.id.CheckBox01 );

      // Optimization: Tag the row with it's child views, so we don't have to   
      // call findViewById() later when we reuse the row in our else case.
      convertView.setTag( new ExerciseViewHolder(textView,checkBox) );

      // If CheckBox is toggled, update the Exercise it is tagged with. 
      checkBox.setOnClickListener( new View.OnClickListener()
      {
        /** When the user click on a exercise, the checkbox
         *  for the exercise is getting unchecked or checked
         *  @param v        The view the user clicks on, this view will
         *                  refeer to a exercise since the view contains
         *                  a exercise.
         *  */
        public void onClick(View v)
        {  
          CheckBox cb = (CheckBox) v;
          Exercise exercise = (Exercise) cb.getTag();
          exercise.setChecked( cb.isChecked() );
        }
      });
    }
    //Is used when the user are scrolling down or up to list existing views but now the
    //the elements  in the highest view with another element if the user scroll up or
    //the lowest view if the user scroll down.
    else
    {
      // Because we use a ViewHolder, we avoid having to call findViewById().  
      ExerciseViewHolder viewHolder = (ExerciseViewHolder) convertView.getTag();  
      checkBox = viewHolder.getCheckBox();
      textView = viewHolder.getTextView();
    }

    // Tag the CheckBox with the Exercise it is displaying, so that we can  
    // access the Exercise in onClick() when the CheckBox is clicked.
    checkBox.setTag( exercise );   

    // Display Exercise 
    checkBox.setChecked( exercise.isChecked() );  
    textView.setText( exercise.getName() );        

    return convertView;  
  }  

} 
```

# c++ - 在宏中将字符串附加到 __FUNCTION__

> ID：12697721
> 
> 赞同：5
> 
> 时间：2012-10-02T20:24:54.903
> 
> 标签：c++, macros

如果我问一个明显的问题，请原谅我，但是在经历了一堆线程并尝试了一些东西之后，我无法确定这个简单的事情。

我有这个小程序：

```
#define FUNC_PREFIX __FUNCTION__ "() :"

int main()
{
    printf("%s\n", FUNC_PREFIX);
    return 0;
} 
```

所以我可以传递`FUNC_PREFIX`而不是`__FUNCTION__`记录函数，它们将打印调用函数名称，后跟括号和冒号——只是为了提高日志行输出的可读性。

这在 Visual Studio 2008 中按原样编译。但是在 中`g++`，我在字符串常量之前得到一个预期的错误 ')'

我尝试了一些类似的事情：

```
#define TEMP __FUNCTION__ 
#define FUNC_PREFIX TEMP "() :" 
```

但无济于事。

这样做的方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T20:31:18.120

`__FUNCTION__`不是标准 C 或标准 C++ 中的宏。

C++ 2011（第 8.4 节函数定义和第 8.4.1 节一般）和 C 1999 或 2011 都有一个预定义的标识符`__func__`，即函数的名称。它不是宏，因此您无法在预处理器中将字符串与它连接起来。

因此，如果要使用不支持 MSVS 扩展的符合标准的 C 或 C++ 编译器，则必须修改代码。

* * *

GCC 手册（适用于 4.6.1 版）将第 6.47 节函数名称作为字符串。它记录`__FUNCTION__`了`__func__`. 它还讨论了`__PRETTY_FUNCTION__`. 这些不是预处理器宏。因此，您将不得不调整您的代码以正确使用`gcc`or `g++`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:35:31.123

您的 printf 缺少报价。使用标识符`__func__`，如果将宏定义为，则可以打印两个字符串：

```
#define FUNC_PREFIX __func__,"() :"

int main()
{
    printf("%s %s\n", FUNC_PREFIX);
    return 0;
} 
```

# jquery - Jquery - 仅在成功更新图像源后运行功能

> ID：12697722
> 
> 赞同：0
> 
> 时间：2012-10-02T20:25:06.710
> 
> 标签：jquery

我有一个网络摄像头，每隔几秒就会覆盖一次“pic.jpg”。我遇到的问题有时是我下面的代码在网络摄像头覆盖旧图像的确切时间执行，导致图像损坏。然后当函数再次运行时（在网络摄像头完成上传图像后）一切正常并显示图像。所以我试图阻止损坏的图像永远显示。我是 javascript/jquery 的新手，所以这在很多层面上可能是错误的：

```
<style type="text/css">
#pictest {display:none}
</style>

function updateCams(){
    var camurl = "/pic.jpg?"+new Date().getTime();
    $("#pictest").attr("src", camurl);
    $("#pictest").error(function(){
        /* image was being written. Restart the function and try again */
        updateCams;
    })
    /* I want a success/valid type function to go here and update the visible image only on success*/
    $("#pictest").valid(function(){
        $("#pic").attr("src", camurl);
    })
};
setInterval( "updateCams()", 2000 );

<img src="pic.jpg" width="640" height="480" id="pic" alt="Loading..." />
<img src="pic.jpg" id="pictest" /> 
```

无论如何，“有效”功能不起作用。我已经尝试过有效/验证/成功，甚至是 if/else，但只有 .error 可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:31:11.130

**更新**

您应该使用这样的插件：[https ://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)

它将正确检测图像源已加载并为您提供所需的功能。

**以下不正确**

看看这篇文章的答案：[jQuery callback on img src replacement?](https://stackoverflow.com/questions/4036865/jquery-callback-on-img-src-replacement)

本质上，您可以为元素使用加载事件侦听器。

```
$('#imageID').load(function() { .... }); 
```

**注意**：请记住，当图像在浏览器缓存中时，load() 并不总是触发。您需要使用 DOM img.complete 添加一些逻辑。阅读 load() 文档页面上的评论以获得一些见解。（通过@MPD）。

# java - 如何初始化基于 Java 枚举的 Singleton？

> ID：12697726
> 
> 赞同：20
> 
> 时间：2012-10-02T20:25:28.710
> 
> 标签：java, enums, singleton

如果我必须在使用对象之前对其进行初始化，那么初始化基于 java 枚举的单例的正确方法是什么。

我已经开始编写代码，但我不确定我是否做得对。你能帮我正确地实现这个单例吗？

```
public enum BitCheck {

    INSTANCE;

    private static HashMap<String, String> props = null;

    public synchronized void  initialize(HashMap<String, String> properties) {
        if(props == null) {
            props = properties;
        }
    }

    public boolean isAenabled(){
        return "Y".equalsIgnoreCase(props.get("A_ENABLED"));
    }

    public boolean isBenabled(){
        return "Y".equalsIgnoreCase(props.get("B_ENABLED"));
    }

} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-02T20:34:26.340

完全有可能为以下内容创建构造函数`enum`：

```
public enum BitCheck {

    INSTANCE;

    BitCheck() {
        props = new HashMap<String, String>();
    }

    private final Map<String, String> props;

    //..

} 
```

注意：

*   `props`字段可以是最终的（我们喜欢`final`）
*   `props`不一定是`static`
*   构造函数会自动且急切地为您调用

注意最后一点。由于`enum`-singleton 是在`enum BitCheck`加载类时急切创建的，因此您无法将任何参数传递给构造函数。当然你可以通过`INSTANCE`声明：

```
public enum BitCheck {

    INSTANCE(new HashMap<String, String>());

    BitCheck(final Map<String, String> props) {
        this.props = props;
    } 
```

但这没有任何区别，对吧？你想达到什么目标？也许您实际上需要延迟初始化的单例？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T20:39:40.507

您只需在声明中初始化它。

```
public enum BitCheck {
    INSTANCE;
    private final Map<String, String> props = new ConcurrentHashMap<String, String>();

    public void putAll(HashMap<String, String> map) {
        props.putAll(map);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T20:35:41.397

您需要像这样定义一个构造函数：

```
public enum BitCheck {

    INSTANCE;
    private final HashMap<String, String> props;

    BitCheck() {

    }
} 
```

一个很好的例子是 Planet 枚举：[http ://docs.oracle.com/javase/tutorial/java/javaOO/enum.html](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T20:36:04.110

```
public enum BitCheck {

    INSTANCE;

    private BitCheck() {
        // initialize here
    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T20:38:45.623

您应该实现接口，因此更改为：

```
private Map<...> props; 
```

您可以查看[在 Java 中使用 Enum 作为单例的最佳方法是什么？](https://stackoverflow.com/questions/427902/what-is-the-best-approach-for-using-an-enum-as-a-singleton-in-java)这与您想要的相似。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-20T11:19:19.237

您可以在基于 Enum 的单例代码中尝试类似的操作。这将确保 Singleton 可以只初始化一次。

```
private static Properties props;
private static AtomicBoolean isInitialized = new AtomicBoolean(false);

public void init(Properties props){
   if(isInitialized.compareAndSet(false, true)) {
       this.props = props;
   }
} 
```

注意：对于更复杂的初始化，initStarted 和 initCompleted 需要 2 个 AtomicBoolean（而不是单个 AtomicBoolean - isInitialized）。然后第一个线程设置 initStarted 并执行初始化步骤，其余的等待直到 initCompleted 由第一个线程设置为 true。

# jsf - JSF 1.2 文件上传

> ID：12697734
> 
> 赞同：0
> 
> 时间：2012-10-02T20:26:19.163
> 
> 标签：jsf, file-upload, jsf-1.2, tomahawk

我使用“t:inputFileUpload”标签在我的 JSF 1.2 中使用 tomahawk 文件上传器功能。但是好像 tomahawk 与 JSF 1.2 不兼容，并且它只适用于 JSF 2.0 及更高版本。

有人可以证实这一点。如果有人指出如何在 JSF 1.2 中使用文件上传，那就太好了。我不想使用 RichFaces "rich:fileUpload"，因为它太花哨了。我只想要简单的 fileInput 字段和旁边的浏览按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:09:44.587

> *但是好像 tomahawk 与 JSF 1.2 不兼容，并且它只适用于 JSF 2.0 及更高版本。*

这不是真的。Tomahawk 几乎与 JSF 本身一样长。它肯定也可以在 JSF 1.2 兼容版本中使用。

显然，您下载了适用于 JSF 2.0 的 Tomahawk 而不是适用于 JSF 1.2 的 Tomahawk。不可否认，战斧的版本号非常令人困惑。它对 JSF 1.2 和 2.0 版本使用完全相同的 1.1.x 版本号。

从[Tomahawk 下载页面](http://myfaces.apache.org/tomahawk/download.html)开始时，您应该下载 JSF 1.2 的版本，如下所示：

> MyFaces Tomahawk 1.1.14 for JSF 1.2 (zip)         [tomahawk12-1.1.14-bin.zip](http://www.apache.org/dyn/closer.cgi/myfaces/binaries/tomahawk12-1.1.14-bin.zip)

因此**不是**下面列出的版本：

> MyFaces Tomahawk 1.1.14 for JSF 2.0 (zip) tomahawk20-1.1.14-bin.zip

For a more detailed answer as to how to setup it, see also [Uploading files with JSF (1.2)](http://balusc.blogspot.com/2008/02/uploading-files-with-jsf.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:07:37.733

Richfaces 的文件上传已经足够好了。可以通过覆盖相应的样式来自定义其视图，请参见[tag](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/rich_fileUpload.html)的参考，表 6.183 及以下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:13:20.467

tomahawk lib 对 jsf 1.2 没有问题，例如文件上传标签，

```
<h:form id="uploadForm" name="uploadForm" enctype="multipart/form-data">
                <table>
                <tr>
                    <h:outputText for="photo" value="Select File: " />
                   <t:inputFileUpload storage="file" size="40" id="photo" value="#{patientsBackingBean.patientPhoto}"/>
                    <h:message for="photo" style="color: red;" />
                </tr>
                </table>
 </h:form> 
```

这里`patientPhoto`必须`UploadedFile`在 backing bean 中声明。

# c - 如何在c中读取原始内存

> ID：12697740
> 
> 赞同：2
> 
> 时间：2012-10-02T20:26:49.240
> 
> 标签：c, memory, memory-management

我想定义一个任何大小的缓冲区，它会在内存中分配一些空间。我想读取分配给该缓冲区的内存中的现有数据。

我尝试过以下代码，但我每次都只看到一些特殊字符。

如果我通过 DumpIt 工具转储我的内存，然后通过 HEX 编辑器打开它，我可以看到普通字符（如数字和 abc 等）。

我使用了下面的代码，它使用了[这里首先提到的](https://stackoverflow.com/questions/11490984/how-to-read-write-type-values-from-raw-memory-in-c)两种技术，第二种只使用简单的数组并一个一个地遍历每个字符。

```
#include <stdio.h>
#include <conio.h>
#include <string.h>
#include <process.h>
#include <time.h>
#include <cstdlib>
#include <stdint.h> 

int main()
{
    int x = 4;
    char arr[400];
    char * src;
    src = arr;

    uint8_t *memory = (uint8_t *) malloc(1000);  
    while(*memory != NULL) {
        printf("Character %c\n", *(memory++));
        memory++;
    }

    while(src != NULL) {
        printf("%c ", *src);
        x++;
        if(x == 1000)
            break;
    }
    printf("And the data stored in memory is %s\n", arr);

    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:31:56.653

当你运行 malloc 时，你只会在那个内存段中得到随机的东西。其中一些将无法被编码为任何用 ASCII 可读的东西。您可以尝试使用“%X”而不是“%c”打印内存中的十六进制值。

虽然我不知道你为什么想做这样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:57:44.283

你没有告诉我们你在什么类型的系统上运行你的代码（`conion.h`让我担心最坏的情况），但在任何体面的系统上，你永远不会得到这样的“随机”数据。*出于安全原因，您从系统获得*的所有页面都将被清除，否则任何进程都可以读取其他进程留下的任何内容、密码、情书……

您最终可能会看到您自己的进程在初始化、调用另一个函数时遗留在堆或堆栈上的伪随机内容。但这就是您可以期望的所有“随机性”。

*挑剔：*

*   不投回报`malloc`
*   你的线

-

```
printf("And the data stored in memory is %s\n", arr); 
```

没有多大意义。此打印语句在遇到第一个空字符时停止打印。

# c# - C# Console.WriteLine(double) 是否以全精度写入此变量？

> ID：12697742
> 
> 赞同：2
> 
> 时间：2012-10-02T20:26:50.873
> 
> 标签：c#, precision

“完全精确”是指正确的结果不会与我使用 C# 程序计算的结果不同的情况。

我已经通过在 C# 和 C++ 下运行相同的测试来检查这一点（不使用 cout.precision()）。我确信我的程序在 C# 和 C++ 下的 2 个变体在相同的测试中表现相似。

C# 上的示例代码。

```
double a;
//...code...
Console.WriteLine(a.ToString(CultureInfo.InvariantCulture)); 
```

相同，但在 C++ 上。

```
double a;
//...code...
cout << a << endl; 
```

实际上，我没有 cout.precision() 的 C++ 程序失败，而只有 Console.WriteLine() 的 C# 通过了。

我知道发生这种情况是因为我的 C++ 程序以某种方式（可能是魔法）截断了数字并且精度丢失了。但是通过所有测试是否意味着 C# 总是以全精度打印一个双精度变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T20:30:21.503

如果你用“R”格式说明符格式化你的双精度，你会得到一个“往返”表示。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#RFormatString](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#RFormatString)。用法：

```
string s = someDoubleValue.ToString("R"); 
```

如果未指定格式说明符，则默认格式说明符是“G”（通用），它“将数字转换为最紧凑的定点或科学记数法，具体取决于数字的类型以及是否存在精度说明符。” 有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#GFormatString](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#GFormatString)。如果未提供精度说明符，则`double`获得 15 位精度，因此使用“G”*可能*会丢失精度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T20:29:57.393

C++ 和 C# 都将浮点数存储为二进制分数。`double`并非所有以 2 为基数的 64 位表示的数字都以 10 为基数具有相当长的表示。从 a 转换为 15 位小数时，必然会经常发生一些舍入。

您看到差异的原因是两种语言在打印时将基数 2 转换为基数 10 的默认精度选择不同。（您可以通过打印来自定义选择，输出精度将在您想要的地方四舍五入。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T20:32:49.913

双精度值的精确十进制表示可以有几十个位置，所以这方面的答案是“否”。有一种往返格式可以保证足够的精度，以在有限数字十进制字符串和有限数字二进制双精度之间提供一对一的对应关系（我不知道它如何处理 NaN 和无穷大），但 ToString 不使用除非您指定该格式（“R”），否则在这方面的答案是否定的。

事实上，如果你使用这个重载，你会得到一个根据“G”格式说明符格式化的结果（参见[Double.ToString Method (IFormatProvider)](http://msdn.microsoft.com/en-us/library/shxtf045.aspx)）。

有关所有标准说明符的信息，请参阅[标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)。

Jon Skeet 有一个类可以将双精度数转换为其（可能很长）精确的十进制表示形式；相关文章在这里：[http](http://csharpindepth.com/Articles/General/FloatingPoint.aspx) ://csharpindepth.com/Articles/General/FloatingPoint.aspx ；课程本身在这里：[http ://www.yoda.arachsys.com/csharp/DoubleConverter.cs](http://www.yoda.arachsys.com/csharp/DoubleConverter.cs)

# python - PyQT：将击键发送到进程的标准输入

> ID：12697744
> 
> 赞同：1
> 
> 时间：2012-10-02T20:26:55.967
> 
> 标签：python, qt, process, pyqt

我正在尝试将键入的每个击键发送到使用 QProcess 运行的进程，但字符似乎没有通过。（快速破解）代码是：

```
 #!/usr/bin/env python
# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'q4testgui.ui'
#
# Created: Fri Sep 21 11:53:03 2012
#      by: PyQt4 UI code generator 4.9.1
#
# WARNING! All changes made in this file will be lost!

import sys
import re
from subprocess import Popen, PIPE
from PyQt4 import QtCore, QtGui

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class Ui_MainWindow(QtGui.QMainWindow):
    def setupUi(self, MainWindow):
        MainWindow.setObjectName(_fromUtf8("MainWindow"))
        MainWindow.resize(788, 664)
        self.centralwidget = QtGui.QWidget(MainWindow)
        self.centralwidget.setObjectName(_fromUtf8("centralwidget"))
        self.runBdiTestBtn = QtGui.QPushButton(self.centralwidget)
        self.runBdiTestBtn.setGeometry(QtCore.QRect(20, 10, 161, 61))
        self.runBdiTestBtn.setToolTip(_fromUtf8("Run BDI tests.  Ensure the BDI and ethernet cable are connected to the Talisman."))
        self.runBdiTestBtn.setStatusTip(_fromUtf8(""))
        self.runBdiTestBtn.setObjectName(_fromUtf8("runBdiTestBtn"))
        self.textEdit = QtGui.QTextEdit(self.centralwidget)
        self.textEdit.setGeometry(QtCore.QRect(20, 350, 751, 281))
        self.textEdit.setToolTip(_fromUtf8(""))
        self.textEdit.setObjectName(_fromUtf8("textEdit"))
        self.label = QtGui.QLabel(self.centralwidget)
        self.label.setGeometry(QtCore.QRect(20, 330, 64, 17))
        self.label.setObjectName(_fromUtf8("label"))
        self.clearBtn = QtGui.QPushButton(self.centralwidget)
        self.clearBtn.setGeometry(QtCore.QRect(80, 320, 81, 28))
        self.clearBtn.setObjectName(_fromUtf8("clearBtn"))
        self.setEnvBtn = QtGui.QPushButton(self.centralwidget)
        self.setEnvBtn.setGeometry(QtCore.QRect(20, 250, 161, 61))
        self.setEnvBtn.setToolTip(_fromUtf8("Set environment variables on the Talisman."))
        self.setEnvBtn.setStatusTip(_fromUtf8(""))
        self.setEnvBtn.setObjectName(_fromUtf8("setEnvBtn"))
        self.eth0Addr1 = QtGui.QLineEdit(self.centralwidget)
        self.eth0Addr1.setGeometry(QtCore.QRect(270, 250, 31, 27))
        self.eth0Addr1.setToolTip(_fromUtf8(""))
        self.eth0Addr1.setObjectName(_fromUtf8("eth0Addr1"))
        self.label_3 = QtGui.QLabel(self.centralwidget)
        self.label_3.setGeometry(QtCore.QRect(190, 250, 71, 29))
        self.label_3.setObjectName(_fromUtf8("label_3"))
        self.label_4 = QtGui.QLabel(self.centralwidget)
        self.label_4.setGeometry(QtCore.QRect(190, 280, 71, 29))
        self.label_4.setObjectName(_fromUtf8("label_4"))
        self.eth0Addr2 = QtGui.QLineEdit(self.centralwidget)
        self.eth0Addr2.setGeometry(QtCore.QRect(310, 250, 31, 27))
        self.eth0Addr2.setToolTip(_fromUtf8(""))
        self.eth0Addr2.setObjectName(_fromUtf8("eth0Addr2"))
        self.eth0Addr3 = QtGui.QLineEdit(self.centralwidget)
        self.eth0Addr3.setGeometry(QtCore.QRect(350, 250, 31, 27))
        self.eth0Addr3.setToolTip(_fromUtf8(""))
        self.eth0Addr3.setObjectName(_fromUtf8("eth0Addr3"))
        self.eth0Addr4 = QtGui.QLineEdit(self.centralwidget)
        self.eth0Addr4.setGeometry(QtCore.QRect(390, 250, 31, 27))
        self.eth0Addr4.setToolTip(_fromUtf8(""))
        self.eth0Addr4.setText(_fromUtf8(""))
        self.eth0Addr4.setObjectName(_fromUtf8("eth0Addr4"))
        self.eth0Addr5 = QtGui.QLineEdit(self.centralwidget)
        self.eth0Addr5.setGeometry(QtCore.QRect(430, 250, 31, 27))
        self.eth0Addr5.setToolTip(_fromUtf8(""))
        self.eth0Addr5.setText(_fromUtf8(""))
        self.eth0Addr5.setObjectName(_fromUtf8("eth0Addr5"))
        self.eth0Addr6 = QtGui.QLineEdit(self.centralwidget)
        self.eth0Addr6.setGeometry(QtCore.QRect(470, 250, 31, 27))
        self.eth0Addr6.setToolTip(_fromUtf8(""))
        self.eth0Addr6.setText(_fromUtf8(""))
        self.eth0Addr6.setObjectName(_fromUtf8("eth0Addr6"))
        self.eth1Addr5 = QtGui.QLineEdit(self.centralwidget)
        self.eth1Addr5.setGeometry(QtCore.QRect(430, 280, 31, 27))
        self.eth1Addr5.setToolTip(_fromUtf8(""))
        self.eth1Addr5.setText(_fromUtf8(""))
        self.eth1Addr5.setObjectName(_fromUtf8("eth1Addr5"))
        self.eth1Addr4 = QtGui.QLineEdit(self.centralwidget)
        self.eth1Addr4.setGeometry(QtCore.QRect(390, 280, 31, 27))
        self.eth1Addr4.setToolTip(_fromUtf8(""))
        self.eth1Addr4.setText(_fromUtf8(""))
        self.eth1Addr4.setObjectName(_fromUtf8("eth1Addr4"))
        self.eth1Addr3 = QtGui.QLineEdit(self.centralwidget)
        self.eth1Addr3.setGeometry(QtCore.QRect(350, 280, 31, 27))
        self.eth1Addr3.setToolTip(_fromUtf8(""))
        self.eth1Addr3.setObjectName(_fromUtf8("eth1Addr3"))
        self.eth1Addr6 = QtGui.QLineEdit(self.centralwidget)
        self.eth1Addr6.setGeometry(QtCore.QRect(470, 280, 31, 27))
        self.eth1Addr6.setToolTip(_fromUtf8(""))
        self.eth1Addr6.setText(_fromUtf8(""))
        self.eth1Addr6.setObjectName(_fromUtf8("eth1Addr6"))
        self.eth1Addr2 = QtGui.QLineEdit(self.centralwidget)
        self.eth1Addr2.setGeometry(QtCore.QRect(310, 280, 31, 27))
        self.eth1Addr2.setToolTip(_fromUtf8(""))
        self.eth1Addr2.setObjectName(_fromUtf8("eth1Addr2"))
        self.eth1Addr1 = QtGui.QLineEdit(self.centralwidget)
        self.eth1Addr1.setGeometry(QtCore.QRect(270, 280, 31, 27))
        self.eth1Addr1.setToolTip(_fromUtf8(""))
        self.eth1Addr1.setObjectName(_fromUtf8("eth1Addr1"))
        self.runUbootTestsBtn = QtGui.QPushButton(self.centralwidget)
        self.runUbootTestsBtn.setGeometry(QtCore.QRect(20, 80, 161, 61))
        self.runUbootTestsBtn.setToolTip(_fromUtf8("Run u-boot tests.  Ensure a serial cable is connected from the test PC to the Talisman.\nThese tests take approx. 10 minutes to run."))
        self.runUbootTestsBtn.setStatusTip(_fromUtf8(""))
        self.runUbootTestsBtn.setObjectName(_fromUtf8("runUbootTestsBtn"))
        self.runLinuxTestsBtn = QtGui.QPushButton(self.centralwidget)
        self.runLinuxTestsBtn.setGeometry(QtCore.QRect(20, 150, 161, 61))
        self.runLinuxTestsBtn.setToolTip(_fromUtf8("Run Linux tests.  Ensure both ethernet cables are connected to the Talisman."))
        self.runLinuxTestsBtn.setStatusTip(_fromUtf8(""))
        self.runLinuxTestsBtn.setObjectName(_fromUtf8("runLinuxTestsBtn"))
        MainWindow.setCentralWidget(self.centralwidget)
        self.menubar = QtGui.QMenuBar(MainWindow)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 788, 25))
        self.menubar.setObjectName(_fromUtf8("menubar"))
        MainWindow.setMenuBar(self.menubar)
        self.statusbar = QtGui.QStatusBar(MainWindow)
        self.statusbar.setObjectName(_fromUtf8("statusbar"))
        MainWindow.setStatusBar(self.statusbar)

        self.retranslateUi(MainWindow)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

    def retranslateUi(self, MainWindow):
        MainWindow.setWindowTitle(QtGui.QApplication.translate("MainWindow", "Talisman Test Suite", None, QtGui.QApplication.UnicodeUTF8))
        self.runBdiTestBtn.setText(QtGui.QApplication.translate("MainWindow", "Run BDI Tests", None, QtGui.QApplication.UnicodeUTF8))
        self.label.setText(QtGui.QApplication.translate("MainWindow", "Output", None, QtGui.QApplication.UnicodeUTF8))
        self.setEnvBtn.setText(QtGui.QApplication.translate("MainWindow", "Set Env. Variables", None, QtGui.QApplication.UnicodeUTF8))
        self.eth0Addr1.setText(QtGui.QApplication.translate("MainWindow", "3c", None, QtGui.QApplication.UnicodeUTF8))
        self.label_3.setText(QtGui.QApplication.translate("MainWindow", "Eth 0 MAC", None, QtGui.QApplication.UnicodeUTF8))
        self.label_4.setText(QtGui.QApplication.translate("MainWindow", "Eth 1 MAC", None, QtGui.QApplication.UnicodeUTF8))
        self.eth0Addr2.setText(QtGui.QApplication.translate("MainWindow", "98", None, QtGui.QApplication.UnicodeUTF8))
        self.eth0Addr3.setText(QtGui.QApplication.translate("MainWindow", "bf", None, QtGui.QApplication.UnicodeUTF8))
        self.eth1Addr3.setText(QtGui.QApplication.translate("MainWindow", "bf", None, QtGui.QApplication.UnicodeUTF8))
        self.eth1Addr2.setText(QtGui.QApplication.translate("MainWindow", "98", None, QtGui.QApplication.UnicodeUTF8))
        self.eth1Addr1.setText(QtGui.QApplication.translate("MainWindow", "3c", None, QtGui.QApplication.UnicodeUTF8))
        self.runUbootTestsBtn.setText(QtGui.QApplication.translate("MainWindow", "Run UBoot Tests", None, QtGui.QApplication.UnicodeUTF8))
        self.runLinuxTestsBtn.setText(QtGui.QApplication.translate("MainWindow", "Run Linux Tests", None, QtGui.QApplication.UnicodeUTF8))
        self.clearBtn.setText(QtGui.QApplication.translate("MainWindow", "Clear", None, QtGui.QApplication.UnicodeUTF8))

    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)
        self.setupUi(self)
        self.process = QtCore.QProcess(self)
        self.connect(self.runBdiTestBtn, QtCore.SIGNAL('clicked()'), self.runBdiTests)
        self.connect(self.runUbootTestsBtn, QtCore.SIGNAL('clicked()'), self.runUbootTests)
        self.connect(self.runLinuxTestsBtn, QtCore.SIGNAL('clicked()'), self.runLinuxTests)
        self.connect(self.clearBtn, QtCore.SIGNAL('clicked()'), self.clear)

        self.textEdit.installEventFilter(self)

    def runBdiTests(self):
        self.process.readyReadStandardOutput.connect(self.readReady)
        self.process.start("make", ("clean", "check_bdi"))

    def runUbootTests(self):
        self.process.readyReadStandardOutput.connect(self.readReady)
        self.process.start("make", ("clean", "check_uboot"))

    def runLinuxTests(self):
        self.process.readyReadStandardOutput.connect(self.readReady)
        self.process.start("make", ("clean", "check_linux"))

    def clear(self):
        self.textEdit.clear()

    # Handler for reading stdout from test process
    def readReady(self):
        chunk = self.process.readAllStandardOutput()
        self.textEdit.append(str(chunk).rstrip())
        self.textEdit.moveCursor(QtGui.QTextCursor.End) 
        print chunk,

    # Event handler for intercepting keystrokes and sending them to stdin of the test process
    def eventFilter(self, source, event):
        if (event.type() == QtCore.QEvent.KeyPress):
            self.textEdit.insertPlainText(str(event.text()))
            self.process.writeData(event.text())
            return True
        else:
            return QtGui.QMainWindow.eventFilter(self, source, event)

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    myapp = Ui_MainWindow()
    myapp.show()
    sys.exit(app.exec_()) 

```

# javadoc - TypeScript 可以输出 javadoc 注释吗？

> ID：12697745
> 
> 赞同：4
> 
> 时间：2012-10-02T20:27:03.603
> 
> 标签：javadoc, google-closure-compiler, typescript

由于 TypeScript 不支持缩小或混淆，这两者都是我们需要的功能，所以我们的工具链中仍然需要像 Google 的 Closure 编译器这样的工具。有没有办法让 TypeScript 自动输出 javadoc 注释，这样 Closure 就可以成为一个自动化的步骤？

没有它，这些工具看起来在很大程度上是不兼容的，因为我们需要有 javadoc 注释，这意味着我们不能使用 TypeScript。似乎这是一个很容易添加的功能，因为您知道所有内容的类型。

谢谢，

杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:39:01.360

TypeScript 不会产生文档或额外的注释；但是，您可以将 TypeScript 文件中的注释（jsDoc 或任何其他格式）保留到发出的 JavaScript，将 -c 或（--comments）传递给编译器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:05:21.070

Micheal Bolin 发布了他是如何破解它的：[Generating Google Closure JavaScript from TypeScript](http://blog.bolinfest.com/2013/01/generating-google-closure-javascript.html)。

由于 IntellJ IDEA 现在理解（虽然不完全）Closure Jsdoc，所以现在 IDE 不需要 TypeScript。

# apache-flex - 单击后禁用播放按钮 - Adob e Flash Builder 4.6

> ID：12697746
> 
> 赞同：1
> 
> 时间：2012-10-02T20:27:08.643
> 
> 标签：apache-flex, mobile, button

我使用以下示例播放 MP3 文件（我不需要/想要“打开”对话框）：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" title="HomeView">

<fx:Script>
    <![CDATA[
        import flash.media.*;
        [Embed(source="assets/marseljeza.mp3")]

              [Bindable]
        public var sndCls:Class;
        public var snd:Sound = new sndCls() as Sound; 
        public var sndChannel:SoundChannel;

        public function playSound():void {
            sndChannel=snd.play();
        }   
        public function stopSound():void {
            sndChannel.stop();
        }   
    ]]>
</fx:Script>

<s:HGroup>
    <s:Button label="play" click="playSound();"/>
    <s:Button label="stop" click="stopSound();"/>
</s:HGroup>
</s:View>` 
```

点击播放按钮后，MP3文件播放正常，但如果我再次点击播放按钮，歌曲同时从头开始，如果我点击按钮三、四、五或更多，同样如此次。所以我最终得到了同一首歌的更多同时“会话”。我想在第一次单击后禁用 PLAY 按钮，并在单击 STOP 后再次启用相同的按钮。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:37:51.047

要回答您的具体问题，您可以使用按钮上的 enabled 属性。在您的 playSound() 方法中，执行以下操作::

```
public function playSound():void {
    sndChannel=snd.play();
    playButton.enabled = false;
} 
```

请务必向您的 playButton 添加一个 Id：

```
<s:Button id="playButton" label="play" click="playSound();"/> 
```

您可能需要考虑在 playSound() 方法中添加一个检查，以便在声音已经播放时不播放它。为此，首先创建一个变量：

```
protected var isPlaying : Boolean = false; 
```

然后像这样调整 playButton() 方法：

```
public function playSound():void {
   if(!isPlaying){
    sndChannel=snd.play();
    isPlaying = true;
   }
} 
```

在上述任何一种情况下，您可能都希望将事件侦听器添加到[完整](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html#event%3acomplete)事件，以便重新启用按钮或更改 isPlaying 标志。该方法将是这样的：

```
public function playSound():void {
   if(!isPlaying){
    snd.addEventListener(Event.COMPLETE,onSoundComplete);
    sndChannel=snd.play();
    isPlaying = true;
   }
}   

public function onSoundComplete(event:Event):void{
  isPlaying = false;
  playButton.enabled = true;
  snd.removeEventListener(Event.COMPLETE,onSoundComplete);
} 
```

您还可以从停止声音方法中调用 onSoundComplete 方法：

```
 public function stopSound():void {
        sndChannel.stop();
        onSoundComplete(new Event());
    } 
```

# asp.net-mvc - 在 Controller 和 View 之间传输 ViewBag 变量

> ID：12697747
> 
> 赞同：0
> 
> 时间：2012-10-02T20:27:09.477
> 
> 标签：asp.net-mvc, viewbag

我在控制器和视图之间传递了一个 ViewBag 变量，并且始终具有相同的 false 值。我在调试期间验证它没有被覆盖。

它的目的是在某种情况下，如果 ViewBag 项设置为 true，我想在我的视图中显示一些附加标记。在数据被发送回视图之前，它被设置为真，但在视图中调试期间，它说它是假的；从而不显示我想要的附加标记。

我在 ViewBag 项目上做错了什么？？？

这是视图中的相关标记：

```
if (ViewBag.Refresh == true)
                            {
                                <tr>
                                    <td colspan="5">
                                        <b>@Html.Label("lbl_Templates", "Templates:")</b>
                                    </td>
                                </tr>
                                <tr>
                                    @foreach (var item in Model.Templates)
                                    {
                                        <td>
                                            @Html.CheckBoxFor(model => Convert.ToBoolean(item.IsChecked));
                                            @Html.LabelFor(model => item.TemplateName)
                                        </td>
                                    }
                                </tr>
                                <tr>
                                    <td colspan="5">
                                        <b>@Html.Label("lbl_Guarantor", "Guarantor(s):")</b>
                                    </td>
                                </tr>
                                <tr>
                                    @foreach (var item in Model.Guarantors)
                                    {
                                        <td>
                                            @Html.CheckBoxFor(model => Convert.ToBoolean(item.isChecked));
                                            @Html.LabelFor(model => item.GuarantorFirstName + " " + item.GuarantorLastName)
                                        </td>
                                    }
                                </tr>
                            } 
```

在 Controller 中，对于 Index 方法，它最初设置为 false：

```
public ActionResult Index()
        {
            ViewBag.Refresh = false;
            ViewBag.Error = "";
            return View();
        } 
```

这是控制器方法。请注意，它属于“其他”逻辑。一旦它回到视图中（通过 return Json 语句）：

```
[HttpPost]
        public ActionResult Refresh(string loanID, string loanType, string selectedVal)
        {
            try
            {
                bool dbHasRows = db.ChkLoanFields(Convert.ToInt32(loanID));

                if (!dbHasRows)
                {
                    ViewBag.Refresh = false;
                    ViewBag.Error = "Details not available for this LoanId";
                    return Json(new { success = false });
                }
                else
                {
                    ViewBag.Refresh = true;
                    bool tmplst = true;
                    bool gurlst = true;

                    ViewModelTemplate_Guarantors tg = db.SelectViewModelTemplate_Guarantors(Convert.ToInt32(loanID), loanType, selectedVal);

                    if (tg.Templates.Count() == 0)
                    {
                        tmplst = false;
                        ViewBag.Error = "Templates not available for this LoanType";
                    }

                    if (tg.Guarantors.Count() == 0)
                    {
                        gurlst = false;
                        ViewBag.Error = "Guarantors not available for this LoanId";
                    }

                    return Json(new { success = true, templist = tmplst, guarlist = gurlst });
                }
            }
            catch (Exception ex)
            {
                throw ex;
            }
        } 
```

# c++ - 使用 mkoctfile 和 Octave 和 Visual Studio 2010 编译器编译 .mex 或 .oct 文件

> ID：12697748
> 
> 赞同：4
> 
> 时间：2012-10-02T20:27:09.680
> 
> 标签：c++, visual-studio-2010, visual-c++, octave

我正在尝试使用 octave 环境编译基本的 c++`.mex`和文件。`.oct`该`.mex`文件只是`mexcpp.cpp`来自 matlab 的文件，您可以在 MATLAB 中使用

```
edit([matlabroot '/extern/examples/mex/mexcpp.cpp']); 
```

该`.oct`文件是在 [here] 上找到的简单 c++ 示例。(http://www.gnu.org/software/octave/doc/interpreter/Getting-Started-with-Oct_002dFiles.html)

我努力让 Visual Studio 编译器[使用 vcvarsall.bat 设置所有环境变量，如 octave wiki 中记录](http://wiki.octave.org/Octave_for_Windows#Octave_with_Visual_Studio)的那样。在设置编译器环境变量之前，我可以发出`mkoctfile -v --mex mexcpp.cpp`命令而没有任何错误，但没有创建文件。

相反，我必须像这样指定环境（我使用 x86）：

```
"C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\vcvarsall.bat" x86 
```

现在我遇到的真正问题是编译我的`.mex`和文件。`.oct`当我尝试编译文件时，我得到：

```
cc-msvc -d -c -D_WIN32 -DWIN32 -D__WIN32__  -IC:\Octave-3.6.2\include\octave-3.6.2\octave\.. -IC:\Octave-3.6.2\include\octave-3.6.2\octave -IC:\Octave-3.6.2\include -Ic:/Software/VC10Libs/include -Ic:/Software/VC10Libs/include/freetype2 -Ic:/Software/VC10Libs/include -Ic:/Software/VC10Libs/include   -O2 -MD -EHsc -wd4244 -fp:strict -fp:except-   -I.  mexcpp.cpp -o mexcpp.o
cl -nologo -c -D_WIN32 -DWIN32 -D__WIN32__ -IC:\Octave-3.6.2\include\octave-3.6.2\octave\.. -IC:\Octave-3.6.2\include\octave-3.6.2\octave -IC:\Octave-3.6.2\include -Ic:/Software/VC10Libs/include -Ic:/Software/VC10Libs/include/freetype2 -Ic:/Software/VC10Libs/include -Ic:/Software/VC10Libs/include -O2 -MD -EHsc -wd4244-fp:strict -fp:except- -I. mexcpp.cpp -Fomexcpp.o mexcpp.cpp
C:\Octave-3.6.2\include\math.h(74) : fatal error C1083: Cannot open include file: 'c:/Program Files/Microsoft Visual Studio 10.0/VC/include/math.h': No such file or directory cc-msvc -d -shared  -o mexcpp.mex  mexcpp.o   -Wl,-export:mexFunction -LC:\Octave-3.6.2\lib\octave\3.6.2 -LC:\Octave-3.6.2\lib -loctinterp -loctave -lcruft link -nologo -DLL -out:mexcpp.mex mexcpp.o -LIBPATH:C:\Octave-3.6.2\lib\octave\3.6.2 -LIBPATH:C:\Octave-3.6.2\lib octinterp.lib octave.lib cruft.lib -export:mex Function dirent.lib msvcmath.lib
LINK : fatal error LNK1181: cannot open input file 'mexcpp.o' 
```

我的 Visual C++ 目录位于，`c:/Program Files (x86)/Microsoft Visual Studio 10.0/VC`所以我不确定它为什么要查找`c:/Program Files/Microsoft Visual Studio 10.0/VC`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T20:30:39.070

我发现问题出在 Octaves 'math.h' 文件中。在第 74 行，包含文件的路径被硬编码为`c:/Program Files/Microsoft Visual Studio 10.0/VC/include/math.h`. 我通过更改为`c:/Program Files (x86)/Microsoft Visual Studio 10.0/VC/include/math.h`. 我尝试编译`.mex`和`.oct`文件，它们现在可以工作了！

编辑：

在另一个说明中，我注意到 octave 还包括一些不存在的 Visual Studio 路径的硬编码路径。

```
-Ic:/Software/VC10Libs/include -Ic:/Software/VC10Libs/include/freetype2 -Ic:/Software/VC10Libs/include -Ic:/Software/VC10Libs/include 
```

# php - 从 PHP 访问 SharePoint 2010 分类 Web 服务

> ID：12697751
> 
> 赞同：0
> 
> 时间：2012-10-02T20:27:29.123
> 
> 标签：php, web-services, sharepoint-2010

我正在尝试从 PHP 访问 SharePoint 提供的分类 Web 服务，但到目前为止运气不佳。

我设法让它与列表网络服务一起工作，但这项服务要困难得多。

该服务的区别之一是输出参数，我不知道如何处理。

这是我正在使用的核心代码。

```
$params = array('sharedServiceIds' => '<termStoreId>66e3f3ae-573a-4dab-b86a-5175f01ca3b5</termStoreId>',
                    'termSetIds' => '<termSetId>e7df9a5c-a760-4247-96ed-e4c125fad54a</termSetId>',
                    'lcid' => 1033,
                    'clientTimeStamps' => '<timeStamp>633992461437070000</timeStamp>',
        'clientVersions' => 1,
                    );

//echo file_get_contents($wsdl, FILE_TEXT, stream_context_create(array('http' => array('timeout' => 1))), 0, 1);

$rawXMLresponse = null;
try{
    $rawXMLresponse = $soapClient->GetTermSets($params);//->GetListItemsResult->any;
}
catch(SoapFault $fault){
    echo 'Fault code: '.$fault->faultcode;
    echo 'Fault string: '.$fault->faultstring;
}

echo "Printing response<br>\n";
print_r($rawXMLresponse); 
```

我收到以下故障代码和消息

```
Fault code: soap:ServerFault string: Server was unable to process request. ---> Data at the root level is invalid. Line 1, position 1. 
```

现在在我的 SharePoint 日志中，我收到此错误

```
TaxonomyClientService: Get term sets failed: System.Xml.XmlException: Data
 at the root level is invalid. Line 1, position 1\.    
 at System.Xml.XmlTextReaderImpl.Throw(Exception e)    
 at System.Xml.XmlTextReaderImpl.ParseRootLevelWhitespace()    
 at System.Xml.XmlTextReaderImpl.ParseDocumentContent()    
 at Microsoft.SharePoint.Taxonomy.Internal.CommonUtilities.GetIntsFromXml(String ints)    
 at Microsoft.SharePoint.Taxonomy.WebServices.TaxonomyClientService.GetTermSets(String sharedServiceIds, String termSetIds, Int32 lcid, String clientTimeStamps, String clientVersions, String& serverTermSetTimeStampXml) 
```

我在 ac# 桌面应用程序中有这个工作，所以我知道该服务正在工作。

我不知道该怎么做才能让它从 php 中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:45:02.163

好的，所以我花了一整天的时间来解决这个问题，发现我没有正确格式化 clientVersions 参数

```
'clientVersions' => 1, 
```

应该

```
'clientVersions' => '<version>1</version>', 
```

# c# - 创建对象与直接从数据库中选择

> ID：12697752
> 
> 赞同：3
> 
> 时间：2012-10-02T20:27:29.710
> 
> 标签：c#, sql-server-2008, api, http-post, n-tier-architecture

我目前正在开发一个集成项目以连接两个不同的系统。
我的计划是设置一个 HTTP-API 以允许系统 A 通过 HTTP-POST 向系统 B 发出命令。
这些命令将用于向 SQL 服务器数据库发出 CRUD 指令以检索和更新会员卡数据（例如“创建会员” '、'更新成员资格'等），然后将数据作为 XML 返回到系统 A。我知道 n 层设计要求我应该有一个具有多个属性的 MembershipCard 类：

```
public class MembershipCard
{
    private string number;
    private decimal points;

    public string Number
    {
        get { return number; }
        set { number = value; }
    }

    public decimal Points
    {
        get { return points; }
        set { points = value; }
    } 
```

连同调用 DAL 的几种方法：

```
 public string GetPoints(string cardnumber) 
    {
        return MembershipCardDB.BalanceRequest(cardnumber);
    } 
```

但是，我在将这种方法证明为静态 DAL 类时遇到了一些困难，MembershipCardDB 似乎执行了我需要的所有工作（见下文）：

```
 public static string BalanceRequest(string cardNumber)
    {
        string response = string.Empty;
        string sqlselect = 
            "SELECT Balance                         " +
            "FROM tbl_MemberShipCard                " +
            "WHERE Card_No = @cardNumber                 " +
            "FOR XML PATH ('Card'), ROOT('CardBalance')";

        using (SqlConnection connect = new SqlConnection("Data Source=TEST\\TEST;Initial Catalog=TEST;User Id=sa;Password=TEST"))
        {
            connect.Open();
            using (SqlCommand command = new SqlCommand(sqlselect))
            {
                command.Parameters.AddWithValue("@cardNumber", cardNumber);
                response = (string)command.ExecuteScalar();
            }
        }
        return response;
    } 
```

通过简单地删除 MembershipCard 类并从数据库中提取数据并将其格式化为 XML 有什么我忽略的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:40:24.143

关键是您应该能够独立于任何数据库接口或 xml 格式编写程序逻辑。将所有数据库内容放入加载和创建对象的单独类中。对对象做任何你想做的事情。最后将对象存储回数据库或 xml。但是，如果您的代码只是关于导入和导出数据，则可以删除额外的类。

顺便说一句，您可以`MembershipCard`使用自动实现的属性来简化类：

```
public class MembershipCard
{
    public string Number { get; set; }
    public decimal Points { get; set; }
} 
```

我经常有一个静态`DB`类

```
public static class DB
{
    public static string GetBalanceRequest(string cardNumber)
    {
        ...
    }

    public static MembershipCard LoadMembershipCard(string cardNumber)
    {
        ...
    }

    public static List<MembershipCard> LoadMembershipCards()
    {
        ...
    }

    public static void SaveMembershipCard(MembershipCard membershipCard)
    {
        ...
    }
} 
```

你的`MembershipCard`班级可能有一个方法

```
 public string BalanceRequest()
    {
        return DB.GetBalanceRequest(this.Number);
    } 
```

像这样，您将数据库操作和其他应用程序逻辑分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:23:49.707

建筑是一件有趣的事情。在选择一个范式之前，最好准确评估你想要完成的工作。

有时 n 层设计可以在以后节省您的时间，但有时您今天必须编写的额外代码量是不值得的。从你说的情况看，你好像已经进入了后者阵营。

所以，回到我的第一句话，你应该问自己：你预见到需要将数据格式化 (XML) 与检索 (SQL 查询) 分开吗？

当然，在某些情况下您可能会这样做。例如，XML 非常冗长，并且包含许多您以后可能不需要的额外的非信息性数据。通过将自己与 SQL Server 如何发出 XML 联系起来，如果您决定使用 JSON，您将面临重写。

更进一步，XML 甚至 JSON 都适用于有限数量的数据，例如一次只传输几条记录，但是如果您开始一次传输数百或数千条数据，那么数据量很容易达到您想要的点通过网络发送类似于 CSV 文件的内容。同样，您将面临重写。

但是，如果您在可以插入新提供程序来处理各种格式要求的地方构建它，那么您将编写新代码而不是替换潜在的大块旧代码......而且同时支持多种格式也相当容易（XML、Json、CSV、Excel 等）如果格式与检索不紧密耦合。

扮演魔鬼的拥护者，如果我们谈论的是一个小型系统，那可能并不重要，因为由于格式更改而重写代码所花费的时间可能是微不足道的，此时我不会花时间构建 n 层模型.

希望对您有所帮助，最终我认为我们无法告诉您该走哪条路。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T21:01:34.653

如果您专门公开 CRUD 操作，REST 接口可能是要走的路（请参阅[Web API](http://www.asp.net/web-api)）。有了这条路线，我相信你有理由直接使用你的数据库类。这并没有真正违反 N 层方法 - Web 服务实际上充当数据层的接口。

您甚至可以更进一步，使用当前构建中的 OData 支持公开对您的服务的延迟执行查询。

主要问题是 Web API 仍处于测试阶段，并且会定期更改。例如，发布预览版中几乎没有 OData 支持。它在夜间构建中要先进得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T21:23:23.517

> n 层设计要求我应该有一个具有多个属性的 MembershipCard 类

我不确定这是否准确。我认为 n 层设计规定每一层只依赖于它下面的层。并且每一层不需要只依赖于它*正*下方的层——你可以跳过关卡。因此，您的 Web 服务接口可以跳过域层并直接进入存储库。尽管即便如此，最好在中间添加另一个层，例如“应用程序”，它为您提供了添加额外非数据访问逻辑的空间，而不是让它泄漏到您的 UI/Web 服务中。

数据库访问类中的“Console.ReadLine”将 UI 与存储库混合在一起，因此这显然不好。另外，使用静态方法使得编写单元测试变得困难，所以这也不好。

查看... Eric Evans 的领域驱动设计。

# ios - 在 UINavigationController 中包装 UIViewController

> ID：12697754
> 
> 赞同：7
> 
> 时间：2012-10-02T20:27:31.220
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller

我希望我的视图控制器有自己的导航栏。我发现这比显示/隐藏现有导航栏更容易。以下代码正在运行。**这是一种反模式还是相对普遍的做法？**

```
MyViewController *viewController = [[MyViewController alloc] init] 
                                    autorelease];

UINavigationController *wrapper = [[[UINavigationController alloc] 
                                   initWithRootViewController:viewController] 
                                    autorelease];

[self.navigationController presentViewController:wrapper 
                                        animated:YES 
                                      completion:nil]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T20:50:43.593

要呈现带有导航栏和自己的导航堆栈的模态视图控制器，您发布的代码是完全正确的。您唯一应该注意的是*将*第二个 UINavigationController 推送到现有导航控制器的堆栈上——这会给您带来问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-08T17:23:54.423

在斯威夫特：

```
let mainViewController = MainViewController()
let navigationController = UINavigationController(rootViewController: mainViewController)
present(navigationController, animated: true, completion: nil) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T20:43:00.240

我将在 Interface Builder 中创建任何需要具有 NavigationBar 的静态 UIView。当您以模态方式呈现 viewController 时（我假设），是否需要整个 UINavigationController 由您决定。只要您最终不将一个navigationController 的rootView 推入另一个navigationController 中，这将在第一个navigationController 下创建一个navigationBar，没什么大不了的。

当我呈现一个“登录”类型的表单或类似的表单时，它会有一个“完成”和“取消”按钮，我将使用这些项目创建一个 XIB 并呈现它。

如果您正在寻找一种在代码中完成这一切的快速方法，那么您正在做的事情没有任何问题。您可以轻松访问 tintColor 和标题。您可以在 IB 中执行此操作，但您必须有一个 IBOutlet 才能连接所有对象。

# macos - 停止httpd，apache2

> ID：12697755
> 
> 赞同：0
> 
> 时间：2012-10-02T20:27:33.307
> 
> 标签：macos, apache2, apache

当我停止 httpd 并且 apache2 localhost 仍然显示“它有效！”。为什么 ？我想重新安装apache2，如何完全删除它？（我做了端口卸载php5和apache2）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:31:54.317

也许你应该按 cmd+f5 来刷新浏览器的缓存？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-07-04T23:56:59.567

试试这个`cd /usr/local/apache2/bin`（你的 apache 安装 fodler）然后当你进入 apache bin 文件夹运行`./apachectl stop` 然后运行`sudo apt-get purge apache2 apache2-utils apache2.2-bin apache2-common` 它这完全取决于 apache 是如何安装的，有可能 httpd 没有添加到服务中，所以不会识别它的停止命令。

# php - 如何将 print_r 主题化为可折叠行？

> ID：12697756
> 
> 赞同：8
> 
> 时间：2012-10-02T20:27:38.377
> 
> 标签：php

Doing `print_r`，返回页面和代码页面；滚动页面以将孩子与父母相匹配太难了，即使是用`<pre>`标签包裹。

有没有办法将 print_r 主题化为可折叠字段。也许是一个在线生成器，我可以在其中发布内容`print_r($array);`并获取可折叠的字段表。

例如，在 Drupal 中有一个名为[Devel](http://drupal.org/project/devel)的模块，它就是这样做的。 ![开发截图](../Images/1e497929cddd43fa90ad33588f34aa9e.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T20:31:54.300

除非我遗漏了什么，否则答案就在你的截图中：http: [//krumo.sourceforge.net/](http://krumo.sourceforge.net/)

**编辑（2019 年）：**尝试[https://github.com/kint-php/kint](https://github.com/kint-php/kint)，因为它今天仍在维护。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-02T21:03:10.377

感谢[这篇文章](http://www.php.net/manual/de/function.print-r.php#90759)，这是一个解决方案。

在 .之前插入以下函数`print_r`。

```
<?php
function print_r_tree($data)
{
    // capture the output of print_r
    $out = print_r($data, true);

    // replace something like '[element] => <newline> (' with <a href="javascript:toggleDisplay('...');">...</a><div id="..." style="display: none;">
    $out = preg_replace('/([ \t]*)(\[[^\]]+\][ \t]*\=\>[ \t]*[a-z0-9 \t_]+)\n[ \t]*\(/iUe',"'\\1<a href=\"javascript:toggleDisplay(\''.(\$id = substr(md5(rand().'\\0'), 0, 7)).'\');\">\\2</a><div id=\"'.\$id.'\" style=\"display: none;\">'", $out);

    // replace ')' on its own on a new line (surrounded by whitespace is ok) with '</div>
    $out = preg_replace('/^\s*\)\s*$/m', '</div>', $out);

    // print the javascript function toggleDisplay() and then the transformed output
    echo '<script language="Javascript">function toggleDisplay(id) { document.getElementById(id).style.display = (document.getElementById(id).style.display == "block") ? "none" : "block"; }</script>'."\n$out";
}
?> 
```

然后，`print_r()`用`print_r_tree()`;替换 像这样：

```
<pre><?php echo print_r_tree(get_defined_vars()); ?></pre> 
```

不要忘记`<pre>`标签。

结果看起来与`print_r()`函数的结果相同，只是现在数组是可折叠的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-02T20:31:19.450

为什么不将其输出为 JSON，然后将其粘贴到[http://jsonviewer.stack.hu/](http://jsonviewer.stack.hu/)上，使其可读且可折叠！

```
json_encode($array); 
```

例子： ![在此处输入图像描述](../Images/e1dfb2150d8441c8273a312590a3d5e5.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-30T20:56:48.153

这是[原始版本](https://www.php.net/manual/en/function.print-r.php#90759)与[Christian's fix](https://stackoverflow.com/a/54874609/2133918)的组合，由于`preg_replace`弃用（PHP 7）而更新：

```
function print_r_tree($data)
{
    // capture the output of print_r
    $out = print_r($data, true);

    // replace something like '[element] => <newline> (' with <a href="javascript:toggleDisplay('...');">...</a><div id="..." style="display: none;">
    $out = preg_replace_callback('/([ \t]*)(\[[^\]]+\][ \t]*\=\>[ \t]*[a-z0-9 \t_]+)\n[ \t]*\(/iU', 'print_r_tree_callback', $out);

    // replace ')' on its own on a new line (surrounded by whitespace is ok) with '</div>
    $out = preg_replace('/^\s*\)\s*$/m', '</div>', $out);

    // print the javascript function toggleDisplay() and then the transformed output
    return '<script language="Javascript">function toggleDisplay(id) { document.getElementById(id).style.display = (document.getElementById(id).style.display == "block") ? "none" : "block"; }</script>'."\n$out";
}

function print_r_tree_callback($matches) {
    $id = substr(md5(rand().$matches[0]), 0, 7);
    return "$matches[1]<a href=\"javascript:toggleDisplay('$id');\">$matches[2]</a><div id='$id' style=\"display: none;\">";
} 
```

# windows-phone-7 - ApplicationBarIconButton 看起来很像

> ID：12697757
> 
> 赞同：1
> 
> 时间：2012-10-02T20:27:41.393
> 
> 标签：windows-phone-7, xaml, button

有谁知道如何使按钮看起来像一个`ApplicationBarIconButton`？我想将按钮放在页面上的堆栈面板中，而不是在 ApplicationBar 中。

按钮必须具有相同的效果，并且必须在图标图像周围有一个圆形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:59:22.560

尝试这样的事情

```
<Border CornerRadius="50" BorderThickness="4" Height="68" Width="68" BorderBrush="White">
     <Button Content="A" BorderThickness="0" Height="68" Width="68" Margin="-9,-4,-8,5" FontSize="36" Foreground="White"/>
</Border> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:01:25.357

您可以使用[http://www.syncfusion.com/downloads/metrostudio](http://www.syncfusion.com/downloads/metrostudio)，它允许您创建自定义图标。我发现它们非常有用。我希望它也能帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:42:40.153

Coding4Fun [Toolkit](http://coding4fun.codeplex.com)有一个 RoundButton 组件，我为此目的使用了很多次。只需指定图像，它就会像应用程序栏一样绘制边框并根据手机主题进行调整。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T07:42:50.740

您可以在 Expression Blend 中[绘制自己的按钮](http://msdn.microsoft.com/en-us/library/bb613598.aspx)模板（对 WP7 开发人员免费）

使用 a`"{StaticResource PhoneContrastBackgroundColor}"`作为按钮的颜色。

# asp.net-mvc-4 - Web API ActionFilterAttribute 可以访问模型吗？

> ID：12697766
> 
> 赞同：11
> 
> 时间：2012-10-02T20:28:08.093
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我希望能够在 web api ActionFilter 中进行一些权限检查，所以我需要能够提取对象 ID。因为我可以访问 RouteData，所以我可以在 GET 上执行此操作，但是是否可以访问 PUT\POST 的操作过滤器中的 searlized viewModel 对象？

```
 public override void OnActionExecuting(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        if (actionContext == null)
        {
            throw new ArgumentNullException("actionContext");
        }

       //Get ID from searlized object and check permissions for a POST\PUT? 
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T20:37:09.780

您是否尝试过 ActionArguments 属性？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:44:35.233

您可以通过此属性访问序列化模型：

`actionContext.Response.Content`

不过，确定要从该属性反序列化的内容可能需要一些工作。Web API 文档现在非常稀少，但[这里是官方文档。](http://msdn.microsoft.com/en-us/library/system.net.http.httpresponsemessage.content.aspx)`Response.Content`类型是这样的`HttpReponseMessage`，您应该通过搜索找到更多反序列化的详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-27T20:36:02.640

让我按照[@André Scartezini](https://stackoverflow.com/users/1687249/andr%C3%A9-scartezini)的回答添加我编写的示例代码。

它是一个 ActionFilter，用于将发布的数据自动记录到 Web API 方法。这不是完成这项工作的最佳解决方案，而只是一个示例代码，用于展示如何从 ActionFilter 属性内部访问模型。

```
using System;
using System.Collections.ObjectModel;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;
using System.Web.Http.Controllers;
using System.Web.Http.Filters;

namespace LazyDIinWebApi.Models
{
    public class LogPostDataAttribute : ActionFilterAttribute
    {
        public override async Task OnActionExecutingAsync(
            HttpActionContext actionContext, 
            CancellationToken cancellationToken)
        {
            Collection<HttpParameterDescriptor> parameters
                = actionContext.ActionDescriptor.GetParameters();
            HttpParameterDescriptor parameter
                = parameters == null ? null : parameters.FirstOrDefault();

            if (parameter != null)
            {
                string parameterName = parameter.ParameterName;
                Type parameterType = parameter.ParameterType;

                object parameterValue = 
                    actionContext.ActionArguments == null && !actionContext.ActionArguments.Any() ? 
                        null : 
                        actionContext.ActionArguments.First().Value;

                string logMessage = 
                    string.Format("Parameter {0} (Type: {1}) with value of '{2}'"
                        , parameterName, parameterType.FullName, parameterValue ?? "/null/");

                // use any logging framework, async is better!
                System.Diagnostics.Trace.Write(logMessage);
            }

            base.OnActionExecuting(actionContext);
        }
    }
} 
```

这是如何使用它：

```
 // POST: api/myapi
    [LogPostData]
    public void Post(MyEntity myEntity)
    {
         // Your code here
    } 
```

# regex - 在 Vim 中，如何交换 2 个不相邻的模式？

> ID：12697768
> 
> 赞同：3
> 
> 时间：2012-10-02T20:28:10.827
> 
> 标签：regex, vim

我有几行文本，都具有相同的结构，并且想在所有行上排列 2 个元素：

```
1257654 some text (which may be long) #Foo
1543098 some other text #Barbar
1238769 whatever #Baz
2456874 something else #Quux 
```

我想获得：

```
#Foo some text (which may be long) 1257654
#Barbar some other text 1543098
#Baz whatever 1238769
#Quux something else 2456874 
```

这就是我卡住的地方：

```
:%s/\(\d\{7\}\)\(#.\{-}\)/\2\1/ 
```

我哪里做错了 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T21:35:32.707

您替换的问题是您只有两组而不是三个。

你的目标是交换`1`和`3`周围`2`：

```
(1)(2)(3) --> (3)(2)(1) 
```

因此，您的模式中需要包含三个组：

```
(1543098)( some other text )(#Barbar) 
```

能够做到：

```
(#Barbar)( some other text )(1543098) 
```

这种替代似乎有效：

```
:s/^\(\d\{7\}\)\(.*\)\(#\w*\)/\3\2\1 
```

这是一个更短更漂亮的版本，这要归功于`verymagic`：

```
:s/\v^(\d{7})(.*)(#\w*)/\3\2\1` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:39:17.793

我会做的

```
%s/\v^(\d{7})(.{-})\s*(#.*)$/\3\2 \1/ 
```

尚未检查任何其他答案

非贪心匹配 ( `{-}`) 是这里的关键

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T20:34:33.997

```
:%s/^\(\d\{7\}\)\(.*\) \(#.*\)/\3\2 \1/ 
```

可能对你有用。

# iphone - 在没有分发文件的情况下将 ipa 发送给测试人员（仅使用配置文件）

> ID：12697770
> 
> 赞同：0
> 
> 时间：2012-10-02T20:28:17.853
> 
> 标签：iphone, ios

今天我正在从我的应用程序中构建一个 ipa 以发送给测试人员。我一直认为我需要一个分发配置文件，但我的一个朋友带着他的 ipod 来了，我只是将他的设备添加到配置文件中并重建 ipa 文件。在将他的设备与我的 iTunes 库同步后，他能够毫无问题地玩/测试游戏。那么，为什么需要分发临时文件呢？

这是否有效，因为我将它安装在拥有配置文件的计算机中？我有点乱。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:34:19.697

有两种分布。一种是 Ad-hoc，另一种是 Enterprise Distribution。

Ad-hoc 将您的分发限制为 100 台设备。这意味着对于您的开发证书，在证书生命周期内您不能在超过 100 台设备上测试您的应用程序。此外，ad-hoc 要求您将设备物理连接到计算机并构建应用程序。这很可能看起来像您所处的情况。

企业分发 (ED) 是另一种方式。ED 允许您在安全的网络服务器上托管应用程序。这样，您只需复制网络服务器上的 ipa 并将链接传递给您的同事。他们将能够通过按`itms://`链接（您发送给他们）直接将应用程序下载到他们的设备上，而无需在您身边。

如果您有选择，我也会检查[TestFlight](https://testflightapp.com/)。它是第三方应用程序分发系统。

# javascript - 正则表达式在应该失败时不会失败

> ID：12697772
> 
> 赞同：1
> 
> 时间：2012-10-02T20:28:26.783
> 
> 标签：javascript, jquery, regex

我有一个这样的正则表达式：

```
var pat = new RegExp("[0-9]{1}\.[0-9]{1}"); 
```

我使用 jQuery 从文本框中获取一个数字，如下所示：

```
var theValue = $(item).val(); 
```

我一直在输入数字并用这一行测试正则表达式：

```
alert(pat.test(theValue)); 
```

如果我输入数字 .111，它就会通过。这不应该是这种情况，因为第一个数字必须是 0-9，后跟一个句点，然后是另一个数字 0-9。我看不出我做错了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T20:31:04.620

要在字符串中使用，您需要转义`\`以使反斜杠字符出现。

```
var pat = new RegExp("[0-9]{1}\\.[0-9]{1}"); 
```

更简洁，也许更可靠的形式是这样的：

```
/[0-9]\.[0-9]/ 
```

假设模式应该匹配一个数字，后跟一个句点，然后是另一个数字。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T20:31:34.633

您的反斜杠正在执行字符串转义而不是正则表达式转义。要么使用：

```
new RegExp("[0-9]{1}\\.[0-9]{1}"); 
```

或首选正斜杠（[RegExp 文字](http://es5.github.com/x7.html#x7.8.5)）语法：

```
/[0-9]{1}\.[0-9]{1}/ 
```

**编辑**：另外，正如 ianpgall 指出的那样，{1} 不是必需的，因为字符类`[0-9]`不是惰性的，除非后面跟着一个`?`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T20:33:32.223

如果你用斜杠而不是引号，这很好用

```
var pat = /[0-9]{1}\.[0-9]{1}/;
var theValue = ".111";
alert(pat.test(theValue));
​ 
```

我会用`\d`而不是`[0-9]`

您`\.`在字符串中转义了`.`字符串中的，而不是在正则表达式中。所以你的正则表达式有效地`[0-9]{1}.[0-9]{1}`匹配一个数字，任何东西，然后是另一个数字。而不是数字，句点，数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T20:48:55.907

在查看了最佳答案之后，我想到了更多的增强，以便可以处理大多数情况。

```
var pat = new RegExp("[0-9]{1}\\.[0-9]{1}");
var theValue = $("#item").val();
if (theValue.length == 3)
    alert(pat.test(theValue));
else
    alert("false"); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/Bv2xM/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T20:31:03.967

你忘了锚定表达式。

```
var pat = new RegExp("^[0-9]{1}\.[0-9]{1}$"); 
```

# .htaccess - .htaccess 域名 301 重定向与排除

> ID：12697779
> 
> 赞同：0
> 
> 时间：2012-10-02T20:29:07.317
> 
> 标签：.htaccess, mod-rewrite, redirect, dns

我设法使用 htaccess 创建了一个基本规则集，以 301 重定向用户为 *.domain.com 键入的所有请求

所以所有： *.domain.com 请求重定向到 www.home.domain.com

```
RewriteCond %{HTTP_HOST} !^www\.home\.domain\.com$ [NC]
RewriteRule ^(.*)$ http://www.home.domain.com/$1 [L,R=301] 
```

现在我正在尝试修改它并使用 302 重定向所有最初没有 *.home.domain.com 但继续保持以前条件的请求

我已经阅读了一些回复，但我对正则表达式语法感到困惑，无法应用针对我的案例给出的类似回复。

更新：感谢乔恩林的回复，再澄清一点

一开始都是我的错，看了你的回复我就明白了

我都想要 ：

```
*.home.domain.com >> 301 >> www.home.domain.com
not *.home.domain.com >> 302 >> www.google.com (for example) 
```

更新 2：

这行得通吗？

```
RewriteCond %{HTTP_HOST} ^(.*)\.home\.domain\.com$ [NC]
RewriteCond $1 !^www\.$ [NC]
RewriteRule ^(.*)$ http://www.home.domain.com [R=301]

RewriteCond %{HTTP_HOST} !^(.*)\.home\.domain\.com$ [NC]
RewriteRule ^(.*)$ http://www.google.com [L,R=302] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:20:35.060

尝试：

```
# all : *.domain.com requests redirect to www.home.domain.com
RewriteCond %{HTTP_HOST} ^[^.]+\.domain\.com$ [NC]
RewriteRule ^(.*)$ http://www.home.domain.com/$1 [L,R=301]

# all requests that didn't have originally the *.home.domain.com
RewriteCond %{HTTP_HOST} ^[^.]+\.[^.]+\.domain\.com$ [NC]
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ http://www.home.domain.com/$1 [L,R=302] 
```

# ruby-on-rails - 导轨中的胖控制器

> ID：12697780
> 
> 赞同：2
> 
> 时间：2012-10-02T20:29:09.300
> 
> 标签：ruby-on-rails, model-view-controller, design-patterns, controllers

我开始通过[railstutorial.org](http://ruby.railstutorial.org/) 上的教程学习该框架。我的控制器还不是很可怕，但我可以看到，[单一职责主体 (SRP)](http://en.wikipedia.org/wiki/Single_responsibility_principle)并没有在整个教程中应用，因为它超出了教程的范围。

我[这里有这个相对简单的控制器](https://github.com/nieve/Nivter/blob/master/app/controllers/users_controller.rb)。我已经可以看到不同的问题（例如身份验证和授权）泄漏到这个控制器中，它包含太多的操作。这会为一个控制器分配太多操作。我偶然发现了[专注于 Rails 的控制器](https://github.com/jonleighton/focused_controller)，它解决了其中一个问题，看起来很有趣。

**这是一个常见的解决方案吗？或者有更好的解决方案吗？**

在 .net 世界中，我们倾向于使用[面向方面编程 (AOP)](https://en.wikipedia.org/wiki/Aspect-oriented_programming)来实现更清晰[的关注点分离 (SoC)](http://en.wikipedia.org/wiki/Separation_of_concerns)。然而，最近有几个人写了一个新的前端控制器框架，叫做[Fubu Behaviors](http://fubumvc.readthedocs.org/en/latest/topics/behaviors/index.html)。它很好地捕捉到了请求管道的概念。对我来说越来越有意义的事情。

为了处理请求，我们倾向于在执行操作之前（有时是之后）执行几个步骤。在某些情况下，有条件地结束请求。使用诸如行为、管道或俄罗斯娃娃模式之类的东西似乎很自然。因此，链条中的每个环节都负责继续或停止。继承似乎不是最好的解决方案。

**在rails中有类似的东西吗？在rails中有意义吗？**

推荐读物同样受欢迎！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:16:52.477

我同意你的观点，拥有这些授权功能就像`is_admin`并且`correct_user`有点代码味道。[我会删除它们并使用我经常使用的名为CanCan](https://github.com/ryanb/cancan)的宝石更好地处理它。

它允许您将所有授权规则从您的控制器中移出到一个清单（即能力模型）中，只需要您的控制器通过`authorize_resource`调用您的控制器来启动授权检查。然后你可以在你的处理简单的重定向`ApplicationController`：

```
class ApplicationController < ActionController::Base
  rescue_from CanCan::AccessDenied do |exception|
    if current_user
      redirect_to signin_url, :alert => exception.message
    else
      redirect_to root_path, :alert => exception.message
    end
  end
end 
```

除此之外，我会将所有`@user = User.find(params[:id])`调用移到 before_filter 中，并清理您的缩进和动作顺序（应该是`index`, `new`, `create`, `show`, `edit`, `update`, `destroy`），我认为您的控制器会很好而且很瘦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:09:06.357

老实说，我无法确定授权/身份验证应该是模型还是控制器的工作，人们会对此给出各种答案。这就像一个灰色地带。

所以我更喜欢那里的 Rails 约定，因为这些年来它们被证明是值得信赖的。您的控制器对我来说似乎很好，我不会称它们为胖子。您当然可以将这些私有方法移动到帮助程序中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-25T21:06:52.883

对于任何类型的授权逻辑，我实际上会将其从控制器层中删除，并将其移至“策略”层。

使用这个 gem：[https](https://github.com/NullVoxPopuli/skinny_controllers) ://github.com/NullVoxPopuli/skinny_controllers 它给你两个额外的层

*   操作
    *   业务逻辑的去向
*   政策
    *   授权去哪里

自述文件中的一个示例：

```
module EventOperations
  class Read < SkinnyControllers::Operation::Base
    def run
      # the business logic here is to only check if we will allow this model
      # to be returned
      model if allowed?
    end
  end
end

class EventPolicy < SkinnyControllers::Policy::Base
  # allowed? from the operation delegates to this method
  # here, you could do whatever logic you need to check if the operation
  # is allowed
  def read?(o = object)
    o.is_accessible_to?(user)
  end
end 
```

# regex - ModRewrite 语句重定向到用户配置文件

> ID：12697787
> 
> 赞同：3
> 
> 时间：2012-10-02T20:29:53.483
> 
> 标签：regex, apache, .htaccess, mod-rewrite, apache2

我需要编写简单的 Apache mod_rewrite 语句，将用户 url 重定向到脚本：

```
**http://mydomain.com/username -> http://mydomain.com/user.py?uname=username**
mydomain.com/username -> http://mydomain.com/user.py?uname
mydomain.com/username -> http://mydomain.com/user.py?uname 
```

以下行不起作用：

```
RewriteEngine on
RewriteRule ^[a-z]{5,}$  /user.py?username=$1 [L] 
```

期待您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T21:13:54.947

尝试：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)$ /user.py?uname=$1 [L] 
```

这使得当有人请求时`http://mydomain.com/username`，他们将在`http://mydomain.com/user.py?uname=username`.

# c++ - std::string::c_str() 是否总是返回一个以空字符结尾的字符串？

> ID：12697788
> 
> 赞同：13
> 
> 时间：2012-10-02T20:29:55.057
> 
> 标签：c++, string

> **可能重复：**
> [字符串 c_str() 与 data()](https://stackoverflow.com/questions/194634/string-c-str-vs-data)

我使用`strncpy(dest, src_string, 32)`转换`std::string`为`char[32]`使我的 C++ 类与遗留 C 代码一起工作。但是 std::string 的`c_str()`方法是否总是返回一个以 null 结尾的字符串？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-02T20:31:13.797

> std::string 的 c_str() 方法是否总是返回一个以 null 结尾的字符串？

是的。

它的规格是：

> 返回： 一个指针`p`，使得`p + i == &operator[](i)`对于每个`i`in `[0,size()]`。

请注意，为 指定的范围`i`是封闭的，因此这`size()` *是*一个有效的索引，指的是字符串末尾之后的字符。

`operator[]`是这样指定的：

> 返回：`*(begin() + pos)`if `pos < size()`，否则是对`T`具有值类型的对象的引用`charT()`

在 的情况下`std::string`，它是`std::basic_string<char>`so that`charT`的别名`char`，值构造`char`的值为零；因此结果指向的字符数组`std::string::c_str()`是以零结尾的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-02T20:33:05.000

c_str 返回一个“C 字符串”。C 字符串总是以空字符结尾。这是C标准。

[空终止字符串。](http://en.wikipedia.org/wiki/Null-terminated_string)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T20:31:15.747

据此，[答案](http://www.cplusplus.com/reference/string/string/c_str/)是肯定的。

# sugarcrm - SugarCRM 中的跨模块搜索

> ID：12697793
> 
> 赞同：0
> 
> 时间：2012-10-02T20:29:59.677
> 
> 标签：sugarcrm

我正在尝试添加对 SugarCRM 中跨模块搜索的支持。更具体地说，我想在联系人搜索中添加一个过滤器，以过滤其帐户具有特定描述的联系人。

我查阅了各种帖子，例如以下内容：http: [//developers.sugarcrm.com/wordpress/2011/04/19/howto-add-a-search-field-that-searches-another-module/](http://developers.sugarcrm.com/wordpress/2011/04/19/howto-add-a-search-field-that-searches-another-module/)

但是我仍然没有完成我需要做的事情。

我对 searchdefs.php 进行了以下更改，以在高级搜索面板中添加一个新字段“account_desc”。

```
 'account_desc' => 
          array (
            'name' => 'account_desc',
            'label' => 'Acct desc',
            'type' => 'name',
            'default' => true,
            'width' => '10%',
          ), 
```

然后，我在 SearchFields.php 中添加了查询

```
 'account_desc'=> array(
        'query_type'=>'default', 
        'operator'=>'subquery',
        'subquery'=>'SELECT contact_id FROM Contacts JOIN accounts_contacts JOIN accounts ON (Contacts.id = contact_id AND accounts.id = account_id) WHERE accounts.description LIKE',
        'db_field' => array(
            'id',
        ), 
```

子查询将输出其帐户具有特定描述的联系人 ID 列表。然后 SugarCRM 将仅将联系人 ID 与此列表进行匹配以获得最终输出。

不幸的是，我似乎仍然缺少一些东西。谁能告诉我出了什么问题？

谢谢，

# jquery - jQuery Hide\show 一旦打开一个新的就关闭

> ID：12697794
> 
> 赞同：0
> 
> 时间：2012-10-02T20:30:02.923
> 
> 标签：jquery, hide

你知道如何打开一个隐藏\显示剧透，然后打开另一个，它使页面真的很长吗？

它的解决方案是让 js 检查类是否正在显示，如果是则关闭扰流板。

但我不知道该怎么做。这是我使用的 js 代码：

```
$(document).ready(function(){

    $(".hide1").hide();
    $(".spoiler1").show();

    $('.spoiler1').click(function(){
    $(".hide1").slideToggle();
    });

}); 
```

hide1 = 点击后打开的内容 剧透1 = 切换按钮。

Spoiler2,3,4 是其余的剧透，hide2,3,4 是其余的内容。

这是现场直播：

[http://justxp.plutohost.net/slyfiles/index.html](http://justxp.plutohost.net/slyfiles/index.html)

例子：

您单击第一个框，顺便说一下，这是框区域：

[http://gyazo.com/5df95ee77b95dfd932eab781955f98f3.png?1349209216](http://gyazo.com/5df95ee77b95dfd932eab781955f98f3.png?1349209216)

好的，它打开了，然后单击第二个.. 内容打开但第一个框尚未关闭。

我希望第一个盒子在打开一个新盒子后关闭。对所有盒子都这样工作。

我该怎么做？

顺便说一下糟糕的语法对不起。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:47:57.157

您应该通过自定义属性将每个链接`spoiler`到其对应的：`hide`

```
<div id="spoiler1" data-hidden="hide1" class="spoiler">Spoiler 1</div>
<div id="hide1" class="hide">Hide 1</div>
<div id="spoiler2" data-hidden="hide2" class="spoiler">Spoiler 2</div>
<div id="hide2" class="hide">Hide 2</div>
<div id="spoiler3" data-hidden="hide3" class="spoiler">Spoiler 3</div>
<div id="hide3" class="hide">Hide 3</div>
<div id="spoiler4" data-hidden="hide4" class="spoiler">Spoiler 4</div>
<div id="hide4" class="hide">Hide 4</div>​ 
```

行为将是这样的：

```
$('.spoiler').click(function() {
    var hiddenid = $(this).data('hidden');
    $('#' + hiddenid).slideToggle();
    $('.hide:not(#' + hiddenid + ')').slideUp();
});​ 
```

见工作小提琴：http: [//jsfiddle.net/adrianonantua/dyUwH/](http://jsfiddle.net/adrianonantua/dyUwH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:47:28.700

解决这个问题的最简单方法是隐藏所有以“隐藏”开头的 div。将以下代码行添加到您的 onclick 处理程序。选择器查找所有具有以“隐藏”开头的类的 div 并将它们隐藏。然后只显示你想要的。

```
$('div[class^="hide"]').hide(); 
```

这是此选择器的 jquery api 文档，[http://api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T20:49:38.840

既然你在做显示和隐藏，就这样做

```
$('.spoiler').click(function(){

    // if the current is not open then hide opened
    if( !($(this).is(':visible')) ) {
        $('.spoiler:visible').hide();
    }
    // open new one, you know the code here
}); 
```

有很多方法可以做到这一点，您可以轻松地添加一个类来打开/隐藏内容，如果您将类打开添加到打开的项目，那么您可以轻松定位打开的类并将其删除以关闭它

```
$('.spoiler').click(function(){

    // if the current is not open then hide opened
    if( !($(this).hasClass('open')) ) {
        $('.spoiler').removeClass('open');
        $(this).addClass('open');
    } else {
        // remove open if you want to close it
    }

}); 
```

扰流板将正常关闭并开课，有显示块或其他东西。当然这不会动画，如果你想要动画，那么你可以使用可见的方式。

我想说的一点对我的编码有很大帮助。如果添加类，它更干净，您可以使用 css 以某种方式控制隐藏和显示。当您想删除打开的项目时，您不需要针对您刚才说的特定打开

```
$('.spoiler').removeClass('open') 
```

所以如果有打开的类它会删除打开的，不需要专门定位。当然，如果您只想定位那些已经打开的，那么

```
$('.spoiler.open').removeClass('open') 
```

更新

在这里看小提琴[http://jsfiddle.net/YE2bY/](http://jsfiddle.net/YE2bY/)

# ajax - 使用 addthis 按钮无限滚动

> ID：12697799
> 
> 赞同：2
> 
> 时间：2012-10-02T20:30:20.593
> 
> 标签：ajax, scroll, addthis, infinite

我正在我的页面上运行一些测试，并且我输入了一个无限滚动功能，女巫工作正常。

问题是 addthis 按钮在 10º 结果之后直到页面末尾才加载，因为此内容来自另一个 php.ini。我需要在我的 php 或 .js 文件中添加什么才能使其正常工作？

测试页面是这个[http://hogardelocio.com/teste2.php](http://hogardelocio.com/teste2.php)，如您所见，前 10 篇文章很完美，向下滚动页面会加载更多文章但按钮不显示...

请给我一步一步的解释，因为我是 ajax 世界的初学者 :)

谢谢

ps：无限滚动的脚本是这个[https://github.com/tournasdim/PHP-infinite-scrolling](https://github.com/tournasdim/PHP-infinite-scrolling)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T20:55:04.577

通过 ajax 从 PHP 脚本加载内容后，需要调用 addthis.toolbox() （在 $.ajax 成功回调中）：

```
$.ajax({
    dataType : "html" ,
    url: "jquery-loadMoreComments.php?lastComment="+ $(".postedComment:last").attr('id') ,  
    success: function(html) {
        // your existing code
        addthis.toolbox('.addthis_toolbox');
    }
}; 
```

这应该重新呈现页面上的所有共享按钮。我希望这行得通。

更新 - 将类名添加到工具箱方法

# ruby-on-rails-3 - Rails 3 - 更新 3 列连接表

> ID：12697804
> 
> 赞同：0
> 
> 时间：2012-10-02T20:30:31.817
> 
> 标签：ruby-on-rails-3, activerecord

我有一个 3 列连接表，它为 3 个不同的 HABTM 模型存储 3 个 ID。

**楷模**

```
# ProductGrade.rb
has_and_belongs_to_many :vendors, :join_table => "item_codes_product_grades_vendors"
has_and_belongs_to_many :item_codes, :join_table => "item_codes_product_grades_vendors"

# Vendor.rb
has_and_belongs_to_many :prouduct_grades, :join_table => "item_codes_product_grades_vendors"
has_and_belongs_to_many :item_codes, :join_table => "item_codes_product_grades_vendors"

# ItemCode.rb
has_and_belongs_to_many :vendors, :join_table => "item_codes_product_grades_vendors"
has_and_belongs_to_many :product_grades, :join_table => "item_codes_product_grades_vendors" 
```

我只是想在用户更新 Vendor 模型时记录 3 部分关联。

**Vendors_Controller.rb**

```
def update
  i = ItemCode.find(params[:vendor][:item_codes].to_i)
  i.vendors << Vendor.find(params[:id])
  i.product_grades << ProductGrade.find(params[:product_grade_id])

  redirect_to product_grade_vendor_path
end 
```

这正确地保存了连接表中的 3 列数据，但是它创建了两个不同的记录，如下所示：

```
-- *product_grade_id* -- *vendor_id* -- *item_code_id* --
---------------------------------------------------------
--                12  --       NULL  --             4  --
--                12  --          6  --           NULL -- 
```

我意识到这可能是一个愚蠢的语法问题，但我只想知道如何让控制器将这两个值都保存在 1 条记录中。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:11:52.000

考虑使用`has_many :through =>`而不是 HABTM。ActiveRecord 不能处理 HABTM 中的连接表，但它可以处理`has_many :through =>`. 使用后一个选项，连接表将表示为一个模型，您将获得如何操作、更改、更新等工具。

我建议仅在加入两个模型而不是三个模型时使用 HABTM。然后，您的更新方法将大大简化。

```
def update
  Association.create!(:product_grade_id => "...", :vendor_id => "...", :item_code_id => "..."

  redirect_to wherever_path
end 
```

# javascript - 如何在中风 amchart js 库上设置自定义颜色？

> ID：12697818
> 
> 赞同：1
> 
> 时间：2012-10-02T20:31:17.110
> 
> 标签：javascript, svg, amcharts

我正在使用[AmCharts Javascript 库](http://www.amcharts.com/)在带有 SVG（可缩放矢量图形）的 HTML 上呈现图表。问题是默认笔触颜色！我想用我自己的颜色。有没有办法设置笔画颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T12:16:36.653

`lineColor`您可以使用该属性按图形设置颜色。

前任。

```
graph = new AmCharts.AmSerialChart();
graph.linecolor = "#FF0000"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:55:23.057

转到启动 AmChart 的代码。新`AmCharts.AmSerialChart()`添加行后：

```
chart.colors = "#000000 #B0DE09 #990000 #0D8ECF #2A0CD0 #CD0D74 #CC0000 #00CC00 #0000CC #DDDDDD #999999 #333333 #990000".split(' '); 
```

每个 RGB 代码从左到右都是图表的颜色！

# asp.net-mvc - CRUD 和非 CRUD 操作的正确路由

> ID：12697832
> 
> 赞同：0
> 
> 时间：2012-10-02T20:32:03.207
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

假设我想在控制器中进行标准 CRUD 操作：

api/values - IEnumerable Get() api/values/1 - Get(int id) api/values - Post([FromBody]string value) api/values/5 - Put(int id, [FromBody]string value) api/ values/5 - 删除（int id）

但我想要额外的操作，比如：

api/values/someoperation1 api/values/searchbysomething ...等。

在此下方有第二条路线无济于事

```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{action}"
        ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:08:06.923

默认情况下，不可能在单个控制器中混合 REST 样式路由和 RPC 样式路由。

在 ASP.NET Web Stack 的 Codeplex - [http://aspnetwebstack.codeplex.com/workitem/184](http://aspnetwebstack.codeplex.com/workitem/184)上有一个未解决的问题。

对您来说唯一合理的解决方案是为每个资源设置 2 个控制器 - 一个用于 CRUD，一个用于非 CRUD (RPC) 类型的操作。

# box-api - 将“字段”支持扩展到“GET /folders/{id}”

> ID：12697833
> 
> 赞同：1
> 
> 时间：2012-10-02T20:32:13.490
> 
> 标签：box-api

非常感谢您添加了新的字段支持——这是对 API 的一个了不起的改进。我想请求将此功能扩展到“获取有关文件夹的信息”调用。例如：

```
GET /folders/{id}?fields=name,size 
```

理想情况下，此调用的结果将是其 item_collection 填充有我指定的字段的完整文件夹对象。这将消除背靠背调用以获取有关文件夹的信息及其内容的定制列表的需要。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:40:20.537

我们正在积极致力于为大多数端点提供 ?fields 功能。有些比其他更难。请继续关注这个很快就会出去！

感谢约翰的反馈。您打算将这部分作为您的 C# SDK 的一部分吗？

# orbeon - 为 Orbeon 开发启用日志记录/调试时出现问题

> ID：12697834
> 
> 赞同：1
> 
> 时间：2012-10-02T20:32:28.447
> 
> 标签：orbeon

按照以下页面上的说明进行操作后：

[http://wiki.orbeon.com/forms/doc/developer-guide/xforms-logging](http://wiki.orbeon.com/forms/doc/developer-guide/xforms-logging)

[http://wiki.orbeon.com/forms/doc/developer-guide/configuration-properties](http://wiki.orbeon.com/forms/doc/developer-guide/configuration-properties)

我已经根据上面页面上的说明生成了我的 log4j.xml 和 properties-local.xml 文件，并将它们插入到**$TOMCAT_HOME/webapps/orbeon/WEB-INF/resources/config**目录中。

重新启动tomcat并使用builder构建了一些表单后，我一直无法找到任何日志信息。我的系统上没有 orbeon.log 文件，我的 tomcat 日志文件中也没有 orbeon 信息。此外，我在调试模式下运行 tomcat 以在 IntelliJ 中使用远程调试，并且没有接收到控制台的输出。

我正在使用 IntelliJ 自己构建 webapp，最新的[https://github.com/orbeon/orbeon-forms/tree/4.0.0.m10-ce](https://github.com/orbeon/orbeon-forms/tree/4.0.0.m10-ce) 目前提交 51f0e8f1b396336c612c16655e39abe6b807214b

我正在使用 Ubuntu 12.04 并在 Tomcat6 中运行 orbeon。

我对 orbeon 开发非常陌生，所以我希望问题很简单。任何帮助将不胜感激。谢谢。

**更新：**

我尝试将记录器设置为没有结果的绝对路径，这是我当前的配置（实际绝对路径除外）。

log4j.xml

```
<!-- This is the standard log appender to the console (System.out) -->
<appender name="ConsoleAppender" class="org.apache.log4j.ConsoleAppender">
    <param name="Target" value="System.out"/>
    <param name="Encoding" value="UTF-8"/>
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d{ISO8601} %-5p %c{1} %x - %m%n"/>
    </layout>
    <filter class="org.apache.log4j.varia.LevelRangeFilter">
        <param name="LevelMin" value="debug"/>
    </filter>
</appender>

<!-- Logging to a single file, typically used in development when you don't want
     to be dealing with multiple files generated by the RollingFileAppender.
     See: http://logging.apache.org/log4j/docs/api/org/apache/log4j/FileAppender.html -->
<appender name="SingleFileAppender" class="org.apache.log4j.FileAppender">
    <param name="File" value="/Absolute_Path_To_$TOMCAT_HOME/logs/orbeon.log"/>
    <param name="Append" value="false" />
    <param name="Encoding" value="UTF-8"/>
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d{ISO8601} %-5p %c{1} %x - %m%n"/>
    </layout>
</appender>

<!-- Logging to a rolling files. Every time the file exceeds a certain size, a backup
     is created and the file used for logging is truncated.
     See: http://logging.apache.org/log4j/docs/api/org/apache/log4j/RollingFileAppender.html -->
<appender name="RollingFileAppender" class="org.apache.log4j.RollingFileAppender">
    <param name="File" value="../logs/orbeon.log"/>
    <param name="MaxFileSize" value="5MB"/>
    <param name="maxBackupIndex" value="200"/>
    <param name="Append" value="false" />
    <param name="Encoding" value="UTF-8"/>
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d{ISO8601} %-5p %c{1} %x - %m%n"/>
    </layout>
</appender>

<!-- XForms engine activity, see http://wiki.orbeon.com/forms/doc/developer-guide/xforms-logging -->

<category name="org.orbeon.oxf.xforms.processor.XFormsServer">
    <priority value="debug"/>
</category>

<!-- To enable logging for any of the sub-systems below, copy that section outside of the comment block -->

<category name="org.orbeon.oxf.properties.Properties">
    <priority value="debug"/>
</category>

<category name="org.orbeon.oxf.processor.pipeline.TeeProcessor">
    <priority value="debug"/>
</category>

<category name="org.orbeon.oxf.processor.pipeline.choose.ConcreteChooseProcessor">
    <priority value="debug"/>
</category>

<category name="org.orbeon.oxf.processor.generator.URLGenerator">
    <priority value="debug"/>
</category>

<category name="org.orbeon.oxf.processor.xmldb.XMLDBProcessor">
    <priority value="debug"/>
</category>

<category name="org.orbeon.oxf.processor.sql.SQLProcessor">
    <priority value="debug"/>
</category>

<category name="org.orbeon.oxf.processor.PageFlowControllerProcessor">
    <priority value="debug"/>
</category>

<category name="org.orbeon.oxf.processor.generator.RequestGenerator">
    <priority value="debug"/>
</category>

<category name="org.orbeon.oxf.webapp.OPSSessionListener">
    <priority value="info"/>
</category>

<category name="org.orbeon.oxf.webapp.OPSServletContextListener">
    <priority value="info"/>
</category>
<!---->

<!-- Prevent extra display of eXist paging activity -->
<category name="org.exist.storage.btree.Paged">
    <priority value="warn"/>
</category>

<category name="org.exist.storage.DBBroker">
    <priority value="warn"/>
</category>

<category name="org.exist.storage.BrokerPool">
    <priority value="warn"/>
</category>

<!-- You decide here which one of the loggers listed above you want to use. -->
<root>
    <priority value="info"/>
    <!--<appender-ref ref="ConsoleAppender"/>-->
    <!--<appender-ref ref="ChainsawAppender"/>-->
    <appender-ref ref="SingleFileAppender"/>
    <!--<appender-ref ref="RollingFileAppender"/>-->
</root> 
```

属性-local.xml

```
<properties xmlns:xs="http://www.w3.org/2001/XMLSchema"
            xmlns:oxf="http://www.orbeon.com/oxf/processors">
    <property as="xs:NMTOKENS" name="oxf.xforms.logging.debug" 
        value="document model submission control event action analysis server server-body html submission-details submission-body"/>
</properties> 
```

**更新2**

根据一些建议，我确保写权限不是问题。我也尝试过使用 ConsoleAppender 仍然没有输出，但是几分钟后 webapp 也崩溃了，我在 tomcat 日志文件中发现了这个异常。

警告：无法为会话 29AE194AA69E0D51C111F5035C219E7B 序列化会话属性 orbeon.resources.dynamic.cb088a8a347ad72a00012a9d8569b5e9c5dd6381

```
java.io.NotSerializableException: scala.collection.JavaConversions$MapWrapper
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1180)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
    at org.apache.catalina.session.StandardSession.writeObject(StandardSession.java:1585)
    at org.apache.catalina.session.StandardSession.writeObjectData(StandardSession.java:1015)
    at org.apache.catalina.session.StandardManager.doUnload(StandardManager.java:528)
    at org.apache.catalina.session.StandardManager.unload(StandardManager.java:469)
    at org.apache.catalina.session.StandardManager.stop(StandardManager.java:678)
    at org.apache.catalina.core.StandardContext.stop(StandardContext.java:4882)
    at org.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:936)
    at org.apache.catalina.startup.HostConfig.undeployApps(HostConfig.java:1359)
    at org.apache.catalina.startup.HostConfig.stop(HostConfig.java:1330)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:326)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1098)
    at org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1110)
    at org.apache.catalina.core.StandardEngine.stop(StandardEngine.java:468)
    at org.apache.catalina.core.StandardService.stop(StandardService.java:604)
    at org.apache.catalina.core.StandardServer.stop(StandardServer.java:788)
    at org.apache.catalina.startup.Catalina.stop(Catalina.java:662)
    at org.apache.catalina.startup.Catalina$CatalinaShutdownHook.run(Catalina.java:706) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:33:25.597

如果您如下声明 log4j，则日志文件夹应该在 Tomcat 文件夹中可用

```
<appender name="SingleFileAppender" class="org.apache.log4j.FileAppender">
    <param name="File" value="../logs/orbeon.log"/>
    <param name="Append" value="false" />
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d{ISO8601} %-5p %c{1} %x - %m%n"/>
    </layout>
</appender> 
```

和

```
<!-- You decide here which one of the loggers listed above you want to use. -->
<root>
    <priority value="debug"/>
    <!--<appender-ref ref="ConsoleAppender"/>-->
    <!--<appender-ref ref="ChainsawAppender"/>-->
    <appender-ref ref="SingleFileAppender"/>
    <!--<appender-ref ref="RollingFileAppender"/>-->
</root> 
```

如果您只是将 Orbeon 战争文件放在 webapps 文件夹中，那么我建议在服务器启动后删除 .war 文件。服务器启动后，tomcat 解包战争并创建一个文件夹。如果每次重启 tomcat 服务器时都没有删除 .war，它将再次解压并覆盖在同一个文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T01:14:25.967

使用 default `log4j.xml`，`SingleFileAppender`正在使用 ，并且它写入的文件使用相对路径引用：

```
<param name="File" value="../logs/orbeon.log"/> 
```

因此，文件在磁盘上的位置将取决于您启动 Tomcat 的目录。从其`bin`目录启动 Tomcat 并不少见，在这种情况下，日志文件将在 Tomcat 的`logs`目录中结束。但是，如果您从不同的位置启动 Tomcat，或者希望日志文件在不同的目录中结束，您可以编辑您的`log4j.xml`并在其中放置`orbeon.log`.

# python - 使用 Google Calendar API 在夏令时创建重复事件的错误？

> ID：12697836
> 
> 赞同：3
> 
> 时间：2012-10-02T20:32:36.903
> 
> 标签：python, google-app-engine, datetime, calendar, timezone

因此，我正在通过 python 制作一个小型 App Engine 应用程序，该应用程序从文件中读取时间表并将其放入您的 Google 日历中。时间表中的所有时间/日期都独立于 DST，因此我需要以相同的方式放入事件。由于所有事件都在多个 DST 期间每周重复发生，这使情况变得复杂。

我正在使用日历 API V3。

我首先为此创建自己的日历。

```
calander = {
    'summary': 'Calender Name,
    'location': 'Somewhere in Ireland',
    'timeZone': 'GMT',
} 
```

然后我用许多不同的重复事件填充它

```
event = {
    'summary': 'CS101',
    'description': 'Intro to Comp Sci',
    'location': 'Bla bla bla',
    'start': {
        'dateTime': '2012-10-03T10:00:00.000-00:00',
        'timeZone': 'GMT'
    },
    'end': {
        'dateTime': '2012-10-03T11:00:00.000-00:00',
        'timeZone': 'GMT'
    },
    'recurrence': [
        'RRULE:FREQ=WEEKLY;UNTIL=20121231',
    ],
} 
```

当然，在我的实际程序中，所有这些字符串都是动态生成的，但我在这里没有问题。

问题是在夏令时 DST 期间发生的任何事件都会自动比我给出的时间晚 1 小时。我确信这是一个错误，因为我将事件和日历的时区设置为 GMT，但 GMT 不遵守夏令时。对我喂食的时间不应该做任何事情。

例如，时间表显示，从 9 月 1 日到 12 月 31 日，每周一上午 10 点到 11 点举行活动。如果将此信息输入日历，则 10 月 28 日（欧洲后备日期）之前的所有事件将比时间表的时间晚一小时。夏季以外的所有时间都很好。

如果我告诉日历活动从上午 10 点开始，我不希望它针对 DST 进行调整。如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:49:24.210

您是否也可以在 start.dateTime 和 end.dateTime 中定义时区？如果这样做，我看起来好像 timeZone 字段没有被完全识别。尝试将日期从“2012-09-26T10:00:00.000-00:00”更改为“2012-09-26T10:00:00.000”[ [API->start.dateTime](https://developers.google.com/google-apps/calendar/v3/reference/events/insert) ]

由于 GMT 没有 DST，如果您将日历事件作为您指定的事件，从 10:00 GMT 开始，当查看日历视图并将您的本地时间设置为“欧洲/都柏林”时，这些事件将从 11:00 开始因为夏令时是+1。

我不确定您所说的“独立”时区是什么意思，但是：

1) 如果您想要一个从爱尔兰时间每周 10:00 开始直到 12 月的重复事件（如您的挂钟所示），试试这个：

```
{
  "start": {
    "dateTime": "2012-09-26T10:00:00.000",
    "timeZone": "Europe/Dublin"
  },
  "end": {
    "dateTime": "2012-09-26T11:00:00.000",
    "timeZone": "Europe/Dublin"
  },
  "summary": "CS101 Dublin",
  "description": "Intro to Comp Sci",
  "location": "Bla bla bla",
  "recurrence": [
    "RRULE:FREQ=WEEKLY;UNTIL=20121131"
  ]
} 
```

2) 如果您实际上希望活动在每周 10:00 GMT 开始直到 12 月（如在爱尔兰始终设置为冬季时间的时钟所示），请尝试以下操作：

```
{
  "start": {
    "dateTime": "2012-09-26T10:00:00.000",
    "timeZone": "GMT"
  },
  "end": {
    "dateTime": "2012-09-26T11:00:00.000",
    "timeZone": "GMT"
  },
  "summary": "CS101 GMT",
  "description": "Intro to Comp Sci",
  "location": "Bla bla bla",
  "recurrence": [
    "RRULE:FREQ=WEEKLY;UNTIL=20121131"
  ]
} 
```

这将创建一个事件，当它显示在时区设置为“欧洲/都柏林”的日历 UI 中时，时间为 11:00 到 2012 年 10 月 31 日，该事件将从 10:00 开始。您可以尝试在花按钮->设置->您的时区上的日历 UI 中切换不同时区显示。

但我的猜测是你想要 (1) 在这里，因为这听起来像是一门以当地时间指定的时间开始的 CS 课程。

顺便说一句，如果发现 API 资源管理器非常方便，则在尝试时：[https ://developers.google.com/apis-explorer/#s/calendar/v3/](https://developers.google.com/apis-explorer/#s/calendar/v3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:08:05.037

GMT 对夏令时不敏感。您应该使用当地时间（在爱尔兰的情况下 - IST）。解释。不同的国家有不同的日期开始和结束 DST。

# java - 无法将 JTable 传递给 Jasper 报告

> ID：12697837
> 
> 赞同：0
> 
> 时间：2012-10-02T20:32:40.657
> 
> 标签：java, swing, jasper-reports, jtable, report

```
private void txtPrintActionPerformed(java.awt.event.ActionEvent evt) {                                         
    // TODO add your handling code here:
    try {
        JasperCompileManager.compileReportToFile("../report/report2.jrxml");
    JasperPrint jasperPrint=JasperFillManager.fillReport("../report/report2.jasper",new HashMap(),new JRTableModelDataSource(tblStock.getModel()));
    JasperViewer jasperviewer=new JasperViewer(jasperPrint);
    jasperviewer.setVisible(true);
}
catch(Exception e) {
    System.out.println("Exception in generating report,generateReport() of JasperReportGenerator:"+e);
}
} 
```

使用此代码生成的 Jasper 报告不显示 JTable (tblStock) 的内容..它仅在报告上显示两个粗体空标题行..任何人帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:48:15.333

请检查表格主体单元格中每个元素的字体大小和/或高度。您还必须检查模板 - 元素不能重叠。

# regex - 如何在石墨中使用正则表达式加入白名单

> ID：12697839
> 
> 赞同：0
> 
> 时间：2012-10-02T20:32:51.177
> 
> 标签：regex, graphite

因此，我想在我的白名单中添加一些内容，以便阻止以前缀开头`a`且不继续的内容。`b`

**例子：**

```
a.b.blah -> Good
a.c.blah -> Bad, should be blocked 
```

我不确定如何编写那个特定的正则表达式。任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:28:15.560

Say you have the string `"a b"`, you can use `/a(?= *b)/`. Note that the space is in `(?= )` so that it's not returned as part of the match. That will see if it follows.

If you don't want it to follow, use `/a(?! *b)/`.

# php - facebook 标签应用程序上的 PHP 会话

> ID：12697842
> 
> 赞同：0
> 
> 时间：2012-10-02T20:32:57.277
> 
> 标签：php, facebook

我在 facebook 上构建了一个应用程序，我正在尝试在数据库中插入正确的信息。信息被插入，但我的代码中的会话出现问题（不是用户的 facebook 会话）似乎如果两台不同的机器进入 iframe 应用程序，它只会创建 1 个会话并且它不会正确存储产品。

这里：（第一页）- product-check.php 我开始会话。

```
session_start(); 
```

然后（第二页）- form.php ：

```
 require 'facebook.php';
    session_start();
   if (isset($_REQUEST['product']) == NULL)
   {
   header ("location: product-check.php");
   }
   else
   {
   $product = $_REQUEST['product'];
   //let's start the session
   //Posted Values stored in session
   $_SESSION['product'] = $product; 
```

然后在第三页上，我使用两个页面中的值进行插入 - 产品检查和表单。

```
 session_start();
    $link = mysql_connect('With the right credentials') or die(mysql_error());
    mysql_set_charset('utf8',$link);
    $db_selected = mysql_select_db('application', $link);
   $product = mysql_real_escape_string($_SESSION['product']);
   if (isset($_POST['name'])){$name = mysql_real_escape_string($_POST['name']);}   
   if (isset($_POST['surname'])){$surname = mysql_real_escape_string($_POST['surname']);} 
   if (isset($_POST['email'])){$email = mysql_real_escape_string($_POST['email']);}
   if (isset($_POST['term'])){$accept_terms =   mysql_real_escape_string("N");}else{$accept_terms = mysql_real_escape_string("Y");}
   if (isset($_POST['contact'])){$accept_newsletter =   mysql_real_escape_string("Y");}else{$accept_newsletter = mysql_real_escape_string("N");}
   $query_insert = "INSERT INTO app(database fields) 
     VALUES(the above values i have declared)";
     $result = mysql_query($query_insert);
     mysql_close($link);
      session_destroy(); 
```

就是这样。但并非 product-check.php 中的所有产品都出现在数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:43:22.423

好的，所以我尝试了另一种可行的方法。这次我没有使用会话来传递值，而是使用了隐藏字段。

我删除了：

```
 session_start(); 
```

从所有页面和与会话有关的所有内容中分离出来，然后我创建了用于发布值的隐藏字段，如下所示：

```
 <input type="hidden" name="productselect" value="<?php echo $variable ?>"> 
```

然后在发布的页面上我使用了一个简单的帖子：

```
 $product = $_POST['productselect'] 
```

有效！

# google-drive-api - 访问 Google Drive API 返回空文件列表

> ID：12697843
> 
> 赞同：10
> 
> 时间：2012-10-02T20:32:57.183
> 
> 标签：google-drive-api

我正在测试 Google Drive API。测试脚本执行 HTTP GET 来访问 Files->List API，但不知何故，我总是在项目中得到一个空列表。我的谷歌驱动器中有数百个文件，所以结果出乎意料。HTTP 响应如下所示。

```
 {
     "kind": "drive#fileList",
     "etag": "\"VEU5fga3uYlZRf0pG-N1kS4iWP4/Kxo5eGvPKynWfroe9v5L5T43-n0\"",
     "selfLink": "https://www.googleapis.com/drive/v2/files?maxResults=5",
     "items": []
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T15:40:12.630

要允许服务帐户访问我自己的 Google Drive 中的文件，我必须授予服务帐户的电子邮件地址权限。正确设置权限后，列表中将填充允许服务帐户访问的文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-27T16:13:03.593

这通常意味着您已使用不允许您查看这些文件的范围进行身份验证。

例如，范围`https://www.googleapis.com/auth/drive.file`仅提供*对应用程序创建或打开的文件的*访问。您将无法访问在 Google Drive 界面或其他应用程序中创建的文件。

如果要访问所有文件，则必须使用另一个范围。`https://www.googleapis.com/auth/drive`例如，为您*提供访问所有用户文件的完整、许可范围*。

[您可以在此处](https://developers.google.com/drive/web/scopes)找到有关可用范围的信息。使用它为您的应用选择正确的范围。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-07-11T11:54:28.607

谷歌在他们的文档中没有明确说明。经过半天的尝试修改所有可能有帮助的内容后，我发现您需要与您的服务帐户 json 文件中描述的电子邮件共享该文件。

例如，我的个人 Google Drive 中有一个 Google Slide 文件，我希望它可以被 Google Drive API 读取，我必须与`xxx@xxx.iam.gserviceaccount.com`json 服务帐户文件中列出的共享这个 Slide 文件。 ![](../Images/a237b94db70f9a2d544b6071d09c0635.png)

然后下面的代码片段应该返回共享的幻灯片文件：

```
import {google} from 'googleapis'
const credentials = require("./credentials.json");

async function main() {
    const scopes = [
        'https://www.googleapis.com/auth/drive',
        'https://www.googleapis.com/auth/presentations',
    ]

    const auth = new google.auth.JWT(
        credentials.client_email,
        null,
        credentials.private_key,
        scopes,
    )

    const drive = google.drive({
        version: 'v3',
        auth
    })

    const res = await drive.files.list()
    console.log(res.data)

}

main() 
```

```
{
  kind: 'drive#fileList',
  incompleteSearch: false,
  files: [
    {
      kind: 'drive#file',
      id: 'xxxxx',
      name: 'xxxxx',
      mimeType: 'application/vnd.openxmlformats-officedocument.presentationml.presentation'
    },
  ]
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T18:00:18.907

`https://www.googleapis.com/auth/drive.readonly.metadata`包含范围以列出文件就足够了

# facebook - Facebook : 在没有 SDK 的情况下在用户墙中发布

> ID：12697845
> 
> 赞同：0
> 
> 时间：2012-10-02T20:33:12.660
> 
> 标签：facebook, facebook-graph-api, curl

我使用下面的代码在用户墙中发布，没有SDK，它发布成功，但它没有返回帖子ID，请帮助我

```
<?php
$token=$_GET['token'];
$id=$_GET['id'];

$msg = "wooow thats soo possible";
$url = "https://graph.facebook.com/".$id."/feed";
$attachment =  array(
'access_token' => $token,
'message' => $msg);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);  //to suppress the curl output
$result = curl_exec($ch);
curl_close ($ch);
return $result;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:48:46.547

我得到了解决方案，下面的代码有效

```
 <?php
$token=$_GET['token'];
$id=$_GET['id'];

 $url = "https://graph.facebook.com/".$id."/feed";
    $ch = curl_init();
    $attachment =  array(   'access_token'  => $token,                        
                        'message'          => "cool winne"
                    );

    curl_setopt($ch, CURLOPT_URL,$url);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
    $result= curl_exec($ch);

    curl_close ($ch);

?> 
```

# php - PHP SQL 事件？

> ID：12697847
> 
> 赞同：1
> 
> 时间：2012-10-02T20:33:14.873
> 
> 标签：php, sql, ajax, events, phpmyadmin

我有一个即时更新评论系统（这意味着当任何人在任何地方发布时，它都会更新，而不必重新加载页面。）它使用 setInterval 执行 AJAX 并将其发送到服务器并重新加载评论。所以，评论一直在闪烁。无论如何，我需要一种仅在看到添加了 phpMyadmin SQL 行时才更新评论的方法。

我的网站： http: [//learntc.net/index.php](http://learntc.net/index.php)

感谢我得到的任何帮助。如果您需要有关某事的更多信息，请发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:55:46.673

当您加载评论时，每条记录都会有一个 ID。您将知道页面上加载的最高记录 ID。

当您的 JS 计时器进行 ajax 调用时，让它将加载的最高 ID 发送回服务器。然后，您的查询可以指定仅加载 ID 高于提供的值的记录。然后，您将只获得比页面上的记录更新的记录。

然后，当这些数据被发送回您的页面时，而不是替换整个评论块，只需将新数据附加到现有评论块的末尾即可。

这将防止必须重新加载现有评论。它将防止闪烁，也将使您的 SQL 查询更高效，并节省您的带宽，避免一遍又一遍地发送相同的数据。

希望这足以让您入门。

最后，还有一件事。离题，但我应该提一下：我建议避免使用 Javascript`setInterval()`函数。改为使用`setTimer()`，并在每次迭代时重新触发它。

这样做的原因是，`setInterval()`如果任何 JS 代码导致延迟，就会出现问题。例如，如果您有一个`alert()`用户在屏幕上停留了一段时间，那么在阻塞系统时`setInterval()`可能发生的调用`alert()`将全部堆积起来，并且会尽快一个接一个地快速连续触发随着 JS 重新获得控制权。这可能是一个严重的问题。如果您`setTimer()`改用，您将避免此问题。

如需更好的解释，请在此处阅读：http: [//bonsaiden.github.com/JavaScript-Garden/#other.timeouts](http://bonsaiden.github.com/JavaScript-Garden/#other.timeouts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:48:15.250

1.  返回最后一个评论 id 或其时间戳（如果表记录了时间）。
2.  对于下一个 Ajax 请求，将上述内容作为参数发送并仅查询那些大于现有值的记录。
3.  附加结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T20:44:45.580

您可以让 AJAX 请求发送用户看到的最后一条评论的 id（您可以将其保存在隐藏的输入中或作为 div 的 id 等）。使用它，您只能向用户返回新评论。在响应功能中，您可以将任何新评论附加到您已有的评论列表中。这将防止所有评论闪烁，并且对您的带宽肯定是健康的；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T20:47:16.813

我做了一个这样的系统。代码本身足够大，但主要思想（最简单的一个）是收集页面上可用评论的 id（或者使用最新评论时间就足够了）并加载页面上暂时不可用的评论。（在 AJAX 调用中传递一个标记并在您的查询中使用它来仅获取您真正需要的项目）如果您的评论总是被添加 - 您可以简单地加载一段 HTML 并将其添加到评论列表的末尾。如果评论可能被删除并且您应该表明 - 最好使用 JSON。

关于您当前的实施 - 为什么需要如此频繁的更新？我看到它每秒左右发生一次。您只需加载您的服务器。另外 - 您不需要返回 html、body 等。在您的情况下，这只是一个垃圾。另外 - 响应正文中包含一个 jquery 脚本。为什么？？？你已经在那里了。

看看jquery的其他AJAX函数。`.load`不是唯一的。

# java - 如果我在执行同步函数时关闭一个 java 程序，它会完成吗

> ID：12697852
> 
> 赞同：0
> 
> 时间：2012-10-02T20:33:50.413
> 
> 标签：java, synchronized

使用 Java

在问这里之前我已经做了一些研究，但我仍然无法找到答案。我正在编写一个连接到 twitter 的流 api 并接收一些推文的应用程序。我打算运行该程序几个小时，然后我需要中断它。

到目前为止，我的项目中没有多线程，我试图避免这种情况。如果我使同步推文的功能，即使我在执行时关闭程序，它会完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:38:20.537

如果您的应用程序中没有多线程，为什么需要`synchronized`？没关系，您的应用程序将完成。点击`Ctrl`+`C`只会中断所有线程并很好地关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:39:25.850

不，它不会完成。同步不会阻止`System.exit()`退出。

也就是说，除非您使用 Ctrl-C 来杀死您的程序，否则您的项目中会有一些多线程。`System.exit()`否则，当另一个方法正在执行时，您将无法调用。

# java - Java Scanner：击键时立即读取

> ID：12697853
> 
> 赞同：0
> 
> 时间：2012-10-02T20:34:07.697
> 
> 标签：java

这似乎是一个非常简单的问题，但我不确定如何去做。

如果我将扫描仪附加到 System.in，并希望在按下*任何按钮后**立即*返回一个令牌（即不必按 Enter 继续），我该如何设置？提前致谢。

# asp.net - 是否有必要记录 http 404 异常

> ID：12697857
> 
> 赞同：0
> 
> 时间：2012-10-02T20:34:14.760
> 
> 标签：asp.net, exception-handling, error-handling

我在全局应用程序错误事件中有以下代码。如果有任何无效的 url，则触发此事件。是否需要记录 http 404 错误。

```
void Application_Error(object sender, System.EventArgs e)
{

Exception lastException = HttpContext.Current.Server.GetLastError();
//log exception

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:39:20.843

大多数服务器配置为将 404 与所有其他请求和响应一起写入其访问日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:41:17.473

如果您想记录此错误，请自行决定。也可以使用 system.web 部分中的 web.config 自动处理错误，如下所示：

```
 <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
        <error statusCode="403" redirect="NoAccess.htm" />
        <error statusCode="404" redirect="FileNotFound.htm" />
    </customErrors> 
```

基本上，服务器将自动重定向到特定错误号的声明页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T20:46:27.060

这个问题很笼统，但是出于几个原因，记录 404 页面非常好。

通过记录 404 页面，您可以`find broken links`在您的网站上查看它发生的频率，这样您就可以`redirects`在需要时创建。

但是，如果您愿意，这当然是您的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T21:12:21.347

您的问题的答案很简单：“不，不需要记录 404 错误。”

不过，最好的做法是制定一个处理 404 错误的流程，以最大限度地优化您网站的搜索引擎。

# sql - 存储过程中是否需要 BEGIN / END 关键字？

> ID：12697859
> 
> 赞同：10
> 
> 时间：2012-10-02T20:34:22.963
> 
> 标签：sql, tsql, syntax

> **可能重复：**
> [我什么时候需要在 SQL Server 中使用 Begin / End Blocks 和 Go 关键字？](https://stackoverflow.com/questions/1180279/when-do-i-need-to-use-begin-end-blocks-and-the-go-keyword-in-sql-server)

例子：

```
CREATE PROCEDURE DoSomething
AS
BEGIN
    SET NOCOUNT ON;

    -- Insert lots of statements in here, including other stored procedures.
END 
```

你需要BEGIN和END吗？如果你有或没有它们有什么不同吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T20:36:08.287

它们是*可选*的。

来自 MSDN -[创建过程](http://msdn.microsoft.com/en-us/library/ms187926.aspx)：

从命令的定义 -

> AS { [ BEGIN ] sql_statement [;] [ ...n ] [ END ] }

稍后在页面中：

> { [ 开始 ] sql_statement [;] [ ...n ] [ 结束 ] }
> 
> 包含过程主体的一个或多个 Transact-SQL 语句。您可以使用可选的 BEGIN 和 END 关键字将语句括起来。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-02T20:37:13.387

如[CREATE PROCEDURE 文档中所述](http://msdn.microsoft.com/en-us/library/ms187926.aspx)，它们是可选的。

> { [ 开始 ] sql_statement [;] [ ...n ] [ 结束 ] }
> 
> 包含过程主体的一个或多个 Transact-SQL 语句。您可以使用***可选***的[emphasis added] BEGIN 和 END 关键字将语句括起来。有关信息，请参阅下面的最佳实践、一般说明以及限制和限制部分。

就个人而言，我总是包括他们，但这只是我。

# lotus-notes - 在 Lotus Notes 视图中比较同一行中的值

> ID：12697863
> 
> 赞同：0
> 
> 时间：2012-10-02T20:34:34.650
> 
> 标签：lotus-notes, lotus, lotus-formula

我想创建一个计算列，如果它旁边的四列不为空，则返回 YES，如果它们都为空，则返回 NO。一个例子是这样的：

```
Calculated Column| Column 1 | Column 2 | Column 3 | Column 4 |
       YES       |     10   |      5   |       3  |     2    |
       YES       |          |      3   |          |          | 
       NO        |          |          |          |          | 
```

我不确定如何比较同一行中的值。如果我检查“Column1 = ''”之类的内容，它会检查整个列，而不仅仅是单个行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:53:28.587

我认为你的想法是正确的。在您的计算列中，您可以检查第 1 - 4 列的值。将对每一行执行检查。

因此，假设您的字段 1 到 4 是列 1 到 4 的公式，您的计算列将如下所示：

```
@If(@Length(field1 + field2 + field3 + field4) > 0; "YES"; "NO"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T00:36:54.443

您是否使用列的“程序名称”属性在公式中引用它们？如果是这样，您是否已将它们从 $1、$2、$3 等的默认值更改？您实际上不能在 Notes 公式语言中使用这些默认值。

请注意，正如 Ken 的回答中所建议的那样，也可以（坦率地说，更常见）在公式中引用基础文档中的字段名称，而不是列的编程名称。但是，如果还计算了列 1 到 4，则使用编程名称是合理的。

# email - 电子邮件中的 Google DFP 广告表现异常

> ID：12697866
> 
> 赞同：9
> 
> 时间：2012-10-02T20:34:44.517
> 
> 标签：email, html-email, ads, google-dfp

我正在尝试在电子邮件中投放 DFP 广告。我正在遵循[这里](http://support.google.com/dfp_sb/bin/answer.py?hl=en&answer=1638620)的指导方针。

*   我为电子邮件设置了一个广告单元
*   我有一个订单项定位到该广告单元，其中只有一个图片广告素材
*   该订单项没有任何定位限制或类似限制

广告将至少在第一次出现在电子邮件中。我看到的奇怪的事情是，在第一次点击之后，再次点击广告通常会将我带到一个空白页面，而不是广告的点击页面。另外，当我重新打开消息时，有时图像不会加载。电子邮件中的代码如下所示：

```
<a href="https://pubads.g.doubleclick.net/gampad/jump?iu=/{my_pub_id}/300x250_email&amp;sz=300x250&amp;c={cachebuster}&amp;tile=1">
<img src="https://pubads.g.doubleclick.net/gampad/ad?iu=/{my_pub_id}/300x250_email&amp;sz=300x250&amp;c={cachebuster}&amp;tile=1" />
</a> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-01-12T16:36:51.857

我们通过使用 co= 选项关闭标准标签中的 cookie 解决了这个问题；将 co=1 添加到标签中。

```
<a href="https://pubads.g.doubleclick.net/gampad/jump?co=1&iu=/{my_pub_id}/300x250_email&amp;sz=300x250&amp;c={cachebuster}&amp;tile=1">
<img src="https://pubads.g.doubleclick.net/gampad/ad?co=1&iu=/{my_pub_id}/300x250_email&amp;sz=300x250&amp;c={cachebuster}&amp;tile=1" />
</a> 
```

这造成的唯一问题（对我们而言）是我们无法使用标准标签提供第 3 方标签，即使是直接解析为 .gifs 的标签。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-26T23:10:38.367

遇到了同样的问题，我通过在我的网络服务器上使用脚本重定向点击来解决它，在该服务器上再次显示广告，以便可以设置所有 cookie。

链接如下所示： [http ://www.mysite.com/dfpclick.php?adunit=mailing&cbuster=1369608725](http://www.mysite.com/dfpclick.php?adunit=mailing&cbuster=1369608725)

```
Script dfpclick.php:
<?php
/* Google DFP url redirect*/
if ($_REQUEST['adunit']) {
    $sUrl = 'http://pubads.g.doubleclick.net/gampad/jump?iu=/%mygoogleid%/'.$_REQUEST['adunit'].'&sz=1x1&c='.$_REQUEST['cbuster'];
}
?>
<html>
<head>
<meta HTTP-EQUIV="REFRESH" content="0; url=<?=$sUrl?>">
</head>
<body>
<?php
if ($_REQUEST['adunit']) {
    echo '<img src="http://pubads.g.doubleclick.net/gampad/ad?iu=/%mygoogleid%/'.$_REQUEST['adunit'].'&sz=1x1&c='.$_REQUEST['cbuster'].'" width="0" height="0" border="0" style="width:0px; height:0px;" alt=""/>';

}

?>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-15T20:56:19.573

事实证明，面向小型企业的 DFP 广告管理系统需要 cookie 支持才能工作，即使在使用调用广告的非 JavaScript 方法时也是如此。因此它在 Gmail 等基于 Web 的客户端中运行良好，但在 Outlook 等中却无法运行。DFP Premium 据说可以在不需要 cookie 的情况下通过电子邮件投放广告。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-01T20:46:01.257

使用 co= 选项不适用于 DFP 标准版。我的解决方法是：

对 img 使用相同的代码`<img src="https://pubads.g.doubleclick.net/gampad/ad?iu=/{my_pub_id}/300x250_email&sz=300x250&c={cachebuster}" />`

并在您的网站上建立一个重定向链接`<a href="http://yourwebsite.com/adunit/300x250_email">`。此页面读取并过滤响应`http://pubads.g.doubleclick.net/gampad/adx?iu=/{my_pub_id}/300x250_email&sz=300x250&c={cachebuster}`，以便使用 javascript`link=$(xmlDoc).find('a').attr('href');`和重定向获取点击跟踪链接。

此解决方法不适用于轮播（多个广告素材/订单项同时竞争同一个广告单元）。

我想知道如何使用 DFP SB 轮流投放电子邮件广告

# c++ - OpenCV highgui220.dll 丢失

> ID：12697868
> 
> 赞同：0
> 
> 时间：2012-10-02T20:34:50.787
> 
> 标签：c++, opencv, visual-c++-2010

[使用本](http://gigadom.wordpress.com/2011/11/01/installing-and-using-opencv-with-visual-studio-2010-express/)教程安装 Opencv2.2 后，我尝试运行一个简单的示例脚本。但是，它给了我以下错误：**程序无法启动，因为您的计算机中缺少 opencv_highgui220.dll。尝试重新安装程序以解决此问题。**但事实上，我确实将 .dll 添加到了库目录中。我实际上也做了教程所做的一切。我还尝试将 .dll 文件复制到通用的 Visual Studio lib 文件夹，然后尝试了这个`#pragma comment (lib, opencv_highgui220)`，但我得到了同样的错误。有谁知道 Visual C++ 怎么可能仍然认为 .dll 不存在？谢谢！

该选项`use library dependence inputs`设置为`yes`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:48:29.213

您的系统环境中缺少 DLL，并且与编译和链接您的可执行文件无关（即，将 DLL 文件夹添加到您的库目录文件夹是没有意义的）。

将 DLL 文件夹添加到您的系统路径（环境变量中的系统变量 PATH）。

# storyboard - 如何调整 iPhone 5 的应用程序大小？

> ID：12697870
> 
> 赞同：0
> 
> 时间：2012-10-02T20:35:02.987
> 
> 标签：storyboard, ios6, autoresize, iphone-5

我正在创建一个通用应用程序。ipad/iphone 上的一切看起来都很棒，但是当我将情节提要视图切换到 iphone 5 或将模拟器作为 iphone 5 运行时，只有空白的底部有一英寸左右。我试过打开自动布局并使用它，但没有运气。我还尝试创建我的图像的 -568h@2x.png 版本，以查看它是否会自动调整大小，但它不会。有没有人有我可以尝试的其他想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T02:44:04.900

如果您是一个使用表格视图和详细视图的简单应用程序，并且只想扩展屏幕高度。试试这个： 1\. 打开你的 mainstoryboard_iphone 作为源 2\. 寻找 autorisizingMask 元素：`" **

```
key="autoresizingMask" flexibleMaxX="YES" flexibleMaxY="YES"/>** "`
. It should be somewhere in the viewController element "view" i.e.:

<view key="view" contentMode="scaleToFill" id="UrG-Iu-edE">
                        <rect key="frame" x="0.0" y="20" width="320" height="460"/>
                        **<autoresizingMask key="autoresizingMask" flexibleMaxX="YES" flexibleMaxY="YES"/>**    
3\. and change into: 

**<autoresizingMask key="autoresizingMask" flexibleMaxX="YES" flexibleMaxY="YES"/>** 
```

对我来说，没有必要使用另一个故事板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:46:50.180

我发现解决这个问题的方法是在 Xcode 的大小检查器中使用 AutoResizing 框。它是带有红线的盒子。它旁边的红色框会动画显示它如何随着视图（白框）大小的变化而变化。这会更改情节提要中的 autoresizingMask。您可以使图像缩放或不缩放或与边缘保持距离：只需单击不同的红线即可查看红框的变化情况。我必须为游戏中的每个按钮和图像都这样做。

您还需要在属性检查器的父视图中检查“自动调整子视图”。

而且您确实需要 Default-568h@2x.png 来首先摆脱信箱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T06:35:25.663

您可以尝试单击视图，转到属性检查器，然后选择“Retina 4 Full Screen”。不过，您必须手动调整视图内的内容。

# android - Android Emulator 无法启动，没有控制台输出或错误

> ID：12697873
> 
> 赞同：0
> 
> 时间：2012-10-02T20:35:36.183
> 
> 标签：android, eclipse, android-emulator

我正在尝试在 64 位 Windows 7 机器上运行 Android 模拟器。我已经为 Eclipse 安装了 Android SDK、JDK、Eclipse 和 Android 插件。从 SDK 管理器中，我安装了 Android SDK 工具，以及 Android 4.1 (API 16) 的所有文件。

在 Eclipse 中，当我想打开模拟器时，我选择 AVD Manager 并单击我创建的设备。AVD 管理器说虚拟设备是有效设备。当我启动机器时，会弹出一个框，上面写着“正在启动 Android 模拟器”，并且在它的正下方有一个加载栏。该条将达到大约 95%，然后该框将消失，并且不会发生任何事情。Eclipse 的控制台输出框中不会出现错误和消息。当我尝试通过从 Eclipse 运行应用程序来启动模拟器时，我得到了类似的行为。

我曾尝试将 SDK 卸载并重新安装到新目录，以及下载不同版本的 Eclipse（我目前使用的是 Eclipse Java EE，之前我使用的是 Eclipse Classic 4.2）。我还尝试下载 API 15 平台并将其用作虚拟设备，但我仍然遇到同样的问题。

我检查了我的任务管理器，唯一创建的新进程是 adb.exe，这仅在我尝试运行我的应用程序时发生，但在我自己启动模拟器时不会发生。

知道可能是什么原因造成的，或者我可以使用什么方法来解决这个问题，这实际上会给我一些错误消息，而不是只是消失而不做任何事情？谢谢。

编辑：当我尝试直接从 AVD 管理器运行模拟器时，我得到与通过 Eclipse 运行时相同的行为（加载框弹出，然后消失，然后什么都没有）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T01:04:18.423

我有同样的问题。启用主机 GPU 仿真对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:07:49.253

尝试使用 BlueStacks 模拟器代替标准。它工作得更快更可靠。您可以从[http://bluestacks.com](http://bluestacks.com)下载它。安装后重启系统。我想一切都好。

# sql-server - “ORA-00936：缺少表达式”使用 OpenQuery 将查询链接到 Oracle

> ID：12697874
> 
> 赞同：1
> 
> 时间：2012-10-02T20:35:36.060
> 
> 标签：sql-server, oracle, linked-server, openquery

我正在尝试执行以下查询：

```
SELECT *
FROM OPENQUERY
(
    CLP,
    '
        SELECT *
        FROM ORACLE_TABLE
        WHERE [UPDATEDATE] > ''1900-01-01 12:00 AM''
    '
) 
```

当我删除日期条件时，此查询工作正常。但是，一旦我尝试通过此标准，它就不再起作用了。我无法弄清楚我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:45:38.590

尝试删除`[`并`]`添加转换日期：

```
SELECT * 
FROM OPENQUERY
(CLP, 
      '
         SELECT * 
         FROM ORACLE_TABLE 
         WHERE 
         UPDATEDATE > to_date(''1900-01-01 12:00'',''yyyy-mm-dd hh:mi'')
       '
) 
```

或与`am`

```
SELECT * 
FROM OPENQUERY
(CLP, 
      '
         SELECT * 
         FROM ORACLE_TABLE 
         WHERE 
         UPDATEDATE > to_date(''1900-01-01 12:00 AM'',''yyyy-mm-dd hh:miam '')
       '
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:44:57.877

采用

```
SELECT *
FROM OPENQUERY
(CLP,SELECT * FROM ORACLE_TABLE WHERE trunc(UPDATEDATE) > ''01-JAN-1900'') 
```

在 Oracle 中，所有没有时间组件的日期默认为 12:00 AM（或 00:00 Hrs）。

您也可以使用`to_timestamp(UPDATEDATE)`，但为此，列应该是时间戳类型（即包含时间戳，否则它总是会给出 12 AM）。您也可以使用`to_char(UPDATEDATE,'YYYY-MM-DD HH:MI AM')`.

# styles - 剑道 UI - 占位符 - 样式

> ID：12697876
> 
> 赞同：4
> 
> 时间：2012-10-02T20:35:39.727
> 
> 标签：styles, datepicker, kendo-ui, placeholder

我有一个带有占位符数据的 Kendo UI 日期选择器。这是HTML：

```
<input type="text" class="datepicker"' placeholder="yyyy-mm-dd" /> 
```

这是JavaScript：

```
var start = $(".datepicker").kendoDatePicker({
        format: "yyyy-MM-dd",
        parseFormats: ["MM/dd/yyyy"],
        change: startChange
    }).data("kendoDatePicker"); 
```

Kendo UI 日期选择器以与用户输入数据相同的样式显示占位符数据。我想以不同的方式设置占位符数据的样式。具体来说，我希望文本为灰色和斜体。当用户输入数据时，样式变为纯黑色（非斜体）。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T12:17:14.137

好吧，`placeholder`它是一种 HTML5 属性，并不特定于 Kendo 控件。据我了解，Kendo 不支持浏览器支持的占位符，请记住，只有某些浏览器支持此属性；IE 没有。无论如何，要设置占位符的样式，您必须使用供应商前缀 CSS 属性，[请参见此处](http://css-tricks.com/snippets/css/style-placeholder-text/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T01:32:53.843

我用这个..它可以在你的 HTML 上工作，你也可以设置它的样式:)

```
 <script>
    // This adds 'placeholder' to the items listed in the jQuery .support object. 
    jQuery(function() {
        jQuery.support.placeholder = false;
        test = document.createElement('input');
        if('placeholder' in test) jQuery.support.placeholder = true;
    });
    // This adds placeholder support to browsers that wouldn't otherwise support it. 
    $(function() {
        if(!$.support.placeholder) { 
            var active = document.activeElement;
            $(':text').focus(function () {
                if ($(this).attr('placeholder') != '' && $(this).val() == $(this).attr('placeholder')) {
                    $(this).val('').removeClass('hasPlaceholder');
                }
            }).blur(function () {
                if ($(this).attr('placeholder') != '' && ($(this).val() == '' || $(this).val() == $(this).attr('placeholder'))) {
                    $(this).val($(this).attr('placeholder')).addClass('hasPlaceholder');
                }
            });
            $(':text').blur();
            $(active).focus();
            $('form:eq(0)').submit(function () {
                $(':text.hasPlaceholder').val('');
            });
        }
    });
    </script> 
```

# c# - 如何安全地格式化 URL

> ID：12697878
> 
> 赞同：1
> 
> 时间：2012-10-02T20:35:50.427
> 
> 标签：c#, string, sharepoint, concatenation

我有一个使用 URL 访问资源的 SharePoint 应用程序。

代码：

```
return web.GetList(web.ServerRelativeUrl + "/lists/UserSettings"); 
```

当我在子站点上时，这很好用，因为`ServerRelativeUrl`会返回`"/sitename"`

但是，当这是一个根站点时，`ServerRelativeUrl`将返回`"/"`，导致 URL 格式不正确，例如`"//lists/UserSettings"`

我知道这似乎是一个简单的问题（而且确实如此），但是是否有一个最佳实践来处理这种始终安全的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:37:17.850

你看过`System.Uri`和`System.UriBuilder`类吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:37:27.080

```
new Uri(web.ServerRelativeUrl, "/lists/UserSettings"); 
```

好的，hrm ...尝试：

```
Path.Combine(web.ServerRelativeUrl, "/lists/UserSettings"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T11:29:23.843

使用绝对网址，这对我有用： web.GetList(web.Url + "/lists/UserSettings")

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-29T19:33:28.650

```
return web.GetList( (web.ServerRelativeUrl == "/" ? string.Empty : web.ServerRelativeUrl) + "/lists/UserSettings"); 
```

# mysql - MySQL - 将同一张表中的字段相乘，存储在同一张表中

> ID：12697884
> 
> 赞同：0
> 
> 时间：2012-10-02T20:36:19.253
> 
> 标签：mysql, sql

我有一个看起来像这样的表：

```
Quote     Super      Factor
29        63                   [83.79]
38        61                   [81.13]
79        65                   [86.45]

47        40                   [80]
81        25                   [50]
82        35                   [70] 
```

如果“报价”为 29、38、79，我想将“超级”列乘以 1.33 。*如果*“报价”字段为 47、81、82，则将“超级”乘以 2。

报价是“BigInt(10)”，“Super”和“Factor”都有“Double”类型。表的名称是“Quote_IDX”。

注意：“[]”中的数字是计算完成后我应该得到的数字。正如您可能会说的那样，我对 MySQL 还很陌生，所以我需要一些帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:40:15.813

您可以使用以下使用语句的[`CASE`](http://dev.mysql.com/doc/refman/5.0/en/case.html)语句。`SELECT`将向您显示数据结果：

```
select quote, super, 
  case when quote in (29, 38, 79)
        then super * 1.33
      when quote  in (47, 81, 82)
        then super * 2.0
      else 0
  end factor
from Quote_IDX 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/41d4e/1)。然后，如果你想做一个`UPDATE`列`factor`：

```
update Quote_IDX
set factor = (case when quote in (29, 38, 79)
                then super * 1.33
              when quote  in (47, 81, 82)
                then super * 2.0
              else 0 end) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/82d38/1)

# ios - Rubymotion：在 iOS 中下载和提取 Zip 文件

> ID：12697887
> 
> 赞同：5
> 
> 时间：2012-10-02T20:36:30.630
> 
> 标签：ios, file, rubymotion

我需要在 RubyMotion 中下载并解压缩文件。我尝试寻找示例，但找不到任何此过程。

我有一个变量（@file），它是请求中的所有数据。我需要将该数据写入文件，然后解压缩，保留未压缩的数据并删除 tmp 压缩文件。

这是我到目前为止所拥有的：

```
 class LoadResourcesViewController < UIViewController

  def viewDidAppear(animated)
    @loading_bar = retrieve_subview_with_tag(self, 1)
    req=NSURLRequest.requestWithURL(NSURL.URLWithString("#{someurl}"))
    @connection = NSURLConnection.alloc.initWithRequest req, delegate: self, startImmediately: true
  end

  def connection(connection, didFailWithError:error)
    p error
  end

  def connection(connection, didReceiveResponse:response)
    @file = NSMutableData.data
    @response = response
    @download_size = response.expectedContentLength
  end

  def connection(connection, didReceiveData:data)
    @file.appendData data
    @loading_bar.setProgress(@file.length.to_f/@download_size.to_f)
  end

  def connectionDidFinishLoading(connection)       
   #create tmp file
   #uncompress .tar, .tar.gz or .zip
   #presist uncompresssed files and delete original tmp file 

    puts @file.inspect
    @connection.release
    solutionStoryboard = UIStoryboard.storyboardWithName("Master", bundle:nil)
    myVC = solutionStoryboard.instantiateViewControllerWithIdentifier("Main3")
    self.presentModalViewController(myVC, animated:true)
  end

end 
```

任何帮助或示例都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T20:44:36.800

所以我已经解决了这个问题，以便解压和解压。

解压：

```
#UNZIP given you have a var data that contains the zipped up data.
tmpFilePath = "#{NSTemporaryDirectory()}temp.zip" #Get a temp dir and suggest the filename temp.zip
@fileManager = NSFileManager.defaultManager() #Get a filemanager instance
@fileManager.createFileAtPath(tmpFilePath, contents: data, attributes:nil) #Create the file in a temp directory with the data from the "data" var.

destinationPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, true ).objectAtIndex(0) //get the target home for the unzipped files. This MUST be within your domain in order to persist.

SSZipArchive.unzipFileAtPath(tmpFilePath, toDestination: destinationPath) #Use the SSZipArchive to unzip the file.
@fileManager.removeItemAtPath(tmpFilePath, error: nil) #Cleanup the tmp dir/files 
```

请记住，您必须包含 SSZipArchive 库。我使用了 obj-c lib 而不是 cocoapod。为此，在您的 Rakefile 中添加以下行（假设您将 obj-c 文件放在 vendor/SSZipArchive 文件夹中）：

```
app.libs += ['/usr/lib/libz.dylib'] 
app.vendor_project('vendor/SSZipArchive', :static) 
```

解压：

```
dir = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, true) #get target dir for untar'd files
error_ptr = Pointer.new(:object)
NSFileManager.defaultManager.createFilesAndDirectoriesAtPath(dir[0], withTarData: data, error: error_ptr) #Create and untar te data (assumes you have collected some tar'd data in the data var) 
```

在这种情况下，您将需要 Light Untar 库 (https://github.com/mhausherr/Light-Untar-for-iOS/)。要包含此库，请将以下内容添加到您的 Rakefile 中（假设文件位于 vendor/unTar 中）：

```
app.vendor_project('vendor', :static, :headers_dir=>"unTar") 
```

# django - 找不到错误 Psycopg2 Mac OS X Mountain Lion 符号：_GSS_C_NT_HOSTBASED_SERVICE

> ID：12697888
> 
> 赞同：1
> 
> 时间：2012-10-02T20:36:31.613
> 
> 标签：django, postgresql, osx-mountain-lion, psycopg2

更新到 Mac OS X Mountain Lion 后出现 psycopg2 错误，之前它工作正常。如果我尝试导入模块，这是错误：

```
 Python 2.7.3 (default, Sep 27 2012, 21:57:16) 
[GCC 4.2.1 Compatible Apple Clang 4.1 ((tags/Apple/clang-421.11.65))] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import psycopg2
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/psycopg2/__init__.py", line 67, in <module>
    from psycopg2._psycopg import BINARY, NUMBER, STRING, DATETIME, ROWID
ImportError: dlopen(/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/psycopg2/_psycopg.so, 2): Symbol not found: _GSS_C_NT_HOSTBASED_SERVICE
  Referenced from: /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/psycopg2/_psycopg.so
  Expected in: flat namespace
 in /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/psycopg2/_psycopg.so 
```

我使用 brew 来安装 python 和 psycopg2。任何想法都会有所帮助。

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T01:38:48.040

也尝试酿造 postgresql。错误可能在于 libpq（PostgreSQL 客户端库，其中 psycopg 是一个包装器）的链接方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:58:35.827

混合原生和 brew 应用程序并不是那么好......我宁愿从 brew 卸载 psycopg2 和 python 并安装“命令行工具”，就像[pip install failed with /usr/bin/clang: No such file or directory](https://stackoverflow.com/questions/11791806/10-8-first-attempts-pip-install-psycopg2-fails-usr-bin-clang-no-such-file-o?rq=1)中解释的那样。然后重试 pip install ，它会工作，至少它为我完成了工作！

# visual-studio-2010 - VS2010项目文件夹无法更改只读属性

> ID：12697889
> 
> 赞同：0
> 
> 时间：2012-10-02T20:36:34.327
> 
> 标签：visual-studio-2010, tfs

我有一个连接到 TFS 的 VS2010 解决方案文件。我的解决方案包含 3 个数据、业务和 Web 前端项目。

我需要将此解决方案文件和相关文件夹复制到网络位置，从该位置将其移动到不同的源代码系统。

我尝试复制我的解决方案文件和相关文件，它有一个与之关联的只读属性。我删除了只读属性并右键单击和属性只读属性仍然存在。

我认为这是解决方案文件和 TFS 之间的某种形式的关联。是否有解决方案删除只读属性？

# javascript - 在浏览器中工作时出现 404 错误

> ID：12697894
> 
> 赞同：0
> 
> 时间：2012-10-02T20:36:46.060
> 
> 标签：javascript, xml, api, lift

我定义了以下 API：

```
object api_event extends RestHelper {
       serve {
             case "events" :: Nil XmlGet _ => <b>static</b>
             }
 } 
```

从浏览器查询我正确获取数据。

*[INFO] net.liftweb.util.TimeHelpers - 服务请求（GET）/事件返回 200，耗时 27 毫秒*

而来自 javascript (JQuery) 的代码如下：

```
 $.get('events', function(data) 
        { alert('Load was performed.');}
   ); 
```

我得到一个 404：

*[INFO] net.liftweb.util.TimeHelpers - 服务请求（GET）/事件返回 404，耗时 816 毫秒*

问：我用 JQuery 做请求是否很糟糕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:42:03.460

即使允许来自浏览器的请求 /events 并获得正确的结果，来自 Js 的调用请求也必须是：

```
$.get('events.xml', function(data) 
        { alert('Load was performed.');}
   ); 
```

所以我必须指定 .xml

# solr - solr facet search 截断单词

> ID：12697897
> 
> 赞同：1
> 
> 时间：2012-10-02T20:37:12.003
> 
> 标签：solr, truncate, faceted-search

为法语内容配置了 solr。搜索很好，但是当我激活构面搜索时，单词会以一种特殊的方式被截断。

所有的 e 都消失了，例如 automobil 代替了汽车，montagn 代替了 montagne，styl 代替了 style ，homm => homme 等等。

```
<lst name="keywords">
    <int name="automobil">1</int>
    <int name="citroen">1</int>
    <int name="minist">0</int>
    <int name="polit">0</int>
    <int name="pric">0</int>
    <int name="shinawatr">0</int>
    <int name="thailand">0</int>
</lst 
```

这是查询 q=fulltextfield:champpions&facet=true&facet.field=keywords

关键字内容：

```
<arr name="keywords">
    <str>Ski</str>
    <str>sport</str>
    <str>Free style</str>
    <str>automobile</str>
    <str>Rallye</str>
    <str>Citroen</str>
    <str>montagne</str>
</arr> 
```

这是使用的架构：

```
<fieldtype name="text_fr" class="solr.TextField">
  <analyzer type="index">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StandardFilterFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords_fr.txt"/>
    <filter class="solr.WordDelimiterFilterFactory" preserveOriginal="1" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="0" />
    <filter class="solr.ISOLatin1AccentFilterFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.SnowballPorterFilterFactory" language="French"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StandardFilterFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords_fr.txt"/>
    <filter class="solr.WordDelimiterFilterFactory" preserveOriginal="1" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1" />
    <filter class="solr.ISOLatin1AccentFilterFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.SnowballPorterFilterFactory" language="French"/>
  </analyzer>
</fieldtype> 
```

字段定义：

如果有人对这个问题有任何想法......

感谢您的回答。问候杰罗姆·朗特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T21:29:56.527

通常，如果要将字段用作构面，则应将其存储为字符串。

您正在对标记化和过滤的字段进行分面，因此各个值是关键字字段中已处理的单词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:45:07.707

上面说的都是正确的，我只想添加一个方面。构面值是索引术语，而不是存储的术语。对构面的一项建议是使用字符串类型。这通常是一个不错的选择。但有时你想把一些事情以你的面子来说。在这种情况下，您可以使用文本类型，但只需轻视输入。在任何情况下都避免使用上述的 Stemming (SnowballPorter) 或 WordDelimiter 选择。

一个不错的选择是 KeywordTokenizerFactory，您可以使用 PatternReplace 来清理您的术语和输入，并在最后执行一个 TrimFilter。如果您的用户会看到条款，请不要使用小写字母。

例如，我的输入是字母语言代码。PatternReplace 清理非字母字符，第二个更正输入错误：

`

```
 <analyzer>
     <tokenizer class="solr.KeywordTokenizerFactory" />
     <filter class="solr.LowerCaseFilterFactory" />
     <filter class="solr.PatternReplaceFilterFactory"
             pattern="([^a-z])" 
             replacement="" 
             replace="all" />
     <filter class="solr.PatternReplaceFilterFactory"
             pattern="fer|xxx"
             replacement="und"
             replace="all" />
     <filter class="solr.LengthFilterFactory" min="3" max="3" />
  </analyzer> 
```

`

玩得开心 solr

奥利弗

# css - 在我的<ui:composition..>代码块中，我尝试使用<h:outputtext ..="">标记呈现的所有内容都不遵守以下定义的类<h:outputstylesheet 1="" 3797="" library="css" name="问问题" 问问题="" 2012-10-02t20:37:42.097="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 在我的<ui:composition..="">代码块中，我尝试使用<h:outputtext ..="">标记呈现的所有内容都不遵守以下定义的类<h:outputstylesheet library="css" name="imagens/index.css">： 这是我的代码： <ui:composition ...=""><ui:define name="conteudoRodape">...</ui:define></ui:composition> 这是如何引起的，我该如何解决？ 要回答您的具体问题，您可以使用按钮上的 enabled 属性。在您的 playSound() 方法中，执行以下操作:: public function playSound():void { sndChannel=snd.play(); playButton.enabled = false; } 请务必向您的 playButton 添加一个 Id： <s:button id="playButton" label="play" click="playSound();">您可能需要考虑在 playSound() 方法中添加一个检查，以便在声音已经播放时不播放它。为此，首先创建一个变量： protected var isPlaying : Boolean = false; 然后像这样调整 playButton() 方法： public function playSound():void { if(!isPlaying){ sndChannel=snd.play(); isPlaying = true; } } 在上述任何一种情况下，您可能都希望将事件侦听器添加到完整事件，以便重新启用按钮或更改 isPlaying 标志。该方法将是这样的： public function playSound():void { if(!isPlaying){ snd.addEventListener(Event.COMPLETE,onSoundComplete); sndChannel=snd.play(); isPlaying = true; } } public function onSoundComplete(event:Event):void{ isPlaying = false; playButton.enabled = true; snd.removeEventListener(Event.COMPLETE,onSoundComplete); } 您还可以从停止声音方法中调用 onSoundComplete 方法： public function stopSound():void { sndChannel.stop(); onSoundComplete(new Event()); } cssjsf 4 1 回答 1 This answer is useful 0 I think your problem is that you're nesting an h:outputText tag inside h:outputStylesheet, as well as using the library name in the name attribute. Try changing: to: <h:outputstylesheet library="css/imagens" name="index.css">于 2012-10-02T22:28:04.767 回答 Related 1 javascript - CESIUM AGI 中的绘图线 5 android - 一个数组列表到另一个数组列表？ 1 c++ - SDL 的 LNK 2019 错误 3 xml - 递归 XSLT 转换 2 git - git 从常规哈希中获取短哈希 1 python - 为什么我绘制图形遇到除以零错误？ 2 c++ - 动态生成/取消线程以处理变化的负载 2 javascript - 使 jCarousel 滑块连续滑动 1 shell - Ansible bash 配置文件，防止冗长 1 mysql - 存储过程中的错误（错误代码：1064） Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</h:outputstylesheet></s:button></h:outputstylesheet></h:outputtext></h:outputstylesheet></h:outputtext></ui:composition..>

> ID：12697906
> 
> 赞同：1
> 
> 时间：
> 
> 标签：css, jsf

在我的`<ui:composition..>`代码块中，我尝试使用`<h:outputText ..>`标记呈现的所有内容都不遵守以下定义的类`<h:outputStylesheet library="css" name="imagens/index.css">`：

这是我的代码：

```
<ui:composition ...>
    <ui:define name="conteudoRodape">
       <h:outputStylesheet  library="css" name="imagens/index.css">
           <h:outputText styleClass="centro" value="Acessando como: Filial:" />
       </h:outputStylesheet>
       ...
    </ui:define>
</ui:composition> 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:28:04.767

I think your problem is that you're nesting an h:outputText tag inside h:outputStylesheet, as well as using the library name in the name attribute. Try changing:

```
<h:outputStylesheet  library="css" name="imagens/index.css">
<h:outputText styleClass="centro" value="Acessando como: Filial:" />
</h:outputStylesheet> 
```

to:

```
<h:outputStylesheet library="css/imagens" name="index.css" /> 
```

# python - 调用 POPEN 导致线程内挂起

> ID：12697908
> 
> 赞同：0
> 
> 时间：2012-10-02T20:37:48.567
> 
> 标签：python, multithreading, popen

我的代码似乎挂在这个 popen 调用上

```
command = "ls"
commandList = shlex.split(command)
print("Executing " + command +"\n")
print(commandList)
output = "#" * 10 + "\n" + server.name + "\n\n"
process = subprocess.Popen(
    command,
    shell=True,
    stdin=subprocess.PIPE, 
    stdout=subprocess.PIPE)
output = process.communicate()[0]
#scriptRunner.threadComplete(output)
return output 
```

代码在`executeScriptOverSSH`方法上`SshWorker`

```
class WorkerThread(threading.Thread):
    def __init__(self, pathToScript, server, runner):
        super(WorkerThread, self).__init__()
        self.scriptRunner = runner
        self.server = server
        self.pathToScript = pathToScript
        self.sshWorker = SshWorker.SshWorker()

    def run(self):
        print('Thread Starting')
        output = self.sshWorker.executeScriptOverSSH(
            self.server, 
            self.pathToScript)
        print('Thread Finishing!')
        self.scriptRunner.threadComplete(output)` 
```

线程永远不会通过调用`Popen`- 我已经通过使用 print 语句进行了检查。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:55:48.540

我已经运行了下面的代码，它运行正常。您提到“如果返回码不为零，则 check_output barfs”，请查看[check_output 文档](http://docs.python.org/library/subprocess.html#subprocess.check_output)，它会引发[CalledProcessError](http://docs.python.org/library/subprocess.html#subprocess.CalledProcessError)异常，您可以捕获该异常并在一个不错的结构中包含所有错误详细信息。

```
import threading, subprocess, random, time, pprint
from subprocess import check_output

class WorkerThread(threading.Thread):
    def __init__(self, user, host, script, runner):
        super(WorkerThread, self).__init__()
        self.user = user
        self.host = host
        self.script = script
        self.runner = runner

    def run(self):
        cmd = "ssh {user}@{host} 'bash -s' < {script}".format(**self.__dict__)
        self.runner.complete(check_output(cmd, shell=True))

class Runner(object):
    def complete(self, output):
        print 'output:\n', output

WorkerThread('marwan', 'homebox', 'local_script.sh', Runner()).start() 
```

上面的代码遵循您在问题中发布的相同结构。但我不建议您采用这种方法，这里有一些建议：

*   从您称为 runner 的 WorkerThread 中，我不知道 runner 的详细信息，但是在进行多线程编程时，最强大的线程安全选项是使用[Queue](http://docs.python.org/library/queue.html#queue-objects)进行通信。
*   有许多优秀的图书馆可以做你正在做的事情。他们经过充分测试并且干净利落。[paramiko](http://www.lag.net/paramiko/)很棒，[Fabric](http://docs.fabfile.org)也很棒。

**简单的结构远程运行示例**

```
from fabric.api import run

def anonymous():
    run("uname -a") 
```

# java - 如何在框架中查找组件

> ID：12697911
> 
> 赞同：0
> 
> 时间：2012-10-02T20:37:59.350
> 
> 标签：java, swing, netbeans

我是学习 Swing 的 Java 新手……希望这真的很简单。

我创建了 a`JFrame`并添加了 a`MenuBar`和 a `Panel`。. . 当我按下运行时，会弹出显示菜单和面板的窗口......所以它一直工作到这里......现在让我们用它做点什么......

我已将MainFrame.java 文件`visibility`中的`Panel`和`MenuBar`引用变量设置为`private`..

问题是，我想访问这些变量...例如： - 我想`Panel`在`Menu(s)`.

但我所持有的只是 main 的句柄`JFrame`。

如何获得菜单或面板的句柄？

我可以将访问器方法添加到`MainFrame.java`文件中。. . 但我认为 Java 可能有一些标准的方法来做到这一点。. . 如果访问器方法是处理此问题的典型方法，我会假设它们将由 NetBeans GUI Builder 提供。

我错过了什么？

坦率

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:40:19.920

访问器方法是一个很好的方法。

另一种方法是执行控制反转之类的操作。您可以调用主框架类中的方法来完成您需要在其他类中完成的菜单和面板工作，而不是从其他类中获取对您的菜单和面板对象的引用。

另一种选择是浏览组件图，但我不建议这样做，因为每当您将组件添加/删除到框架中的面板时，您都必须更改检索对您的菜单和面板的引用的逻辑需要。

# regex - 正则表达式字母不能重复

> ID：12697913
> 
> 赞同：-1
> 
> 时间：2012-10-02T20:38:05.787
> 
> 标签：regex

0|1 需要正则表达式，但字母不能重复。

所以：

```
101010 - valid
010101 - valid
110011 - invalid 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:41:05.117

好吧，这很简单：

```
(?=[01])0?(?:10)*1? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:43:33.390

```
1?(01)*0? // matches alternating 1s and 0s
^1?(01)*0?$ // same as above but only whole strings 
```

# mysql - App Engine - Google Cloud SQL - jUnit 的本地 MySQL 数据库 - 找不到 rdbms 包

> ID：12697927
> 
> 赞同：2
> 
> 时间：2012-10-02T20:39:11.817
> 
> 标签：mysql, google-app-engine, junit, google-cloud-sql

当我启动应用程序时，MySQL 中的离线数据库运行良好，但我想让它也适用于我的单元测试！

但它告诉我“ **rdbms** ”包丢失了。

可能是我错过了导入或其他什么，因为我得到了以下异常：

```
java.lang.AssertionError: Exception = com.google.apphosting.api.ApiProxy$CallNotFoundException: The API package 'rdbms' or call 'OpenConnection()' was not found.
    at org.junit.Assert.fail(Assert.java:93)
    at testDb.DbUserUnitTestCase.testAdd(DbUserUnitTestCase.java:50)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.junit.runners.Suite.runChild(Suite.java:128)
    at org.junit.runners.Suite.runChild(Suite.java:24)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

看起来我不是唯一一个有麻烦的人：

*   [https://groups.google.com/forum/?fromgroups=#!topic/google-cloud-sql-discuss/gyIOtJSrRkY](https://groups.google.com/forum/?fromgroups=#!topic/google-cloud-sql-discuss/gyIOtJSrRkY)
*   [http://googlecloudsql.blogspot.com/2012/03/unit-testing-google-cloud-sql-with.html](http://googlecloudsql.blogspot.com/2012/03/unit-testing-google-cloud-sql-with.html)
*   [https://groups.google.com/forum/#!msg/google-appengine/VOMSNqn2FWI/bNf5pmqvDQUJ](https://groups.google.com/forum/#!msg/google-appengine/VOMSNqn2FWI/bNf5pmqvDQUJ) :/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T03:31:53.603

好的，我遇到了同样的问题，终于可以让它工作了。以下是问题的摘要：

1.  com.google.appengine.api.rdbms.AppEngineDriver 驱动程序仅在您在实际 App Engine 或本地 App Engine 开发环境中运行时才有效。当您仅在单元​​测试中或在 App Engine 之外运行时，它不起作用（给出此“rdbms”包丢失错误）。即使您将 rdbms.driver 系统属性设置为其他值也是如此。
2.  在非 App Engine java 进程中工作的驱动程序是 com.google.cloud.sql.Driver。
3.  不幸的是，如果您使用 DriverManager.getConnection() 加载驱动程序（大多数数据源都会这样做），事情就会变得棘手。此方法查看已注册的驱动程序以查看哪个驱动程序可以加载提供的 URL。因此，如果您同时注册 AppEngineDriver 和 com.google.cloud.sql.Driver，您将会遇到麻烦 - 当您加载 jdbc:google:rdbms DB URL 时，可能会使用“错误的”。

就我而言，我使用的是 maven、Spring 和 iBatis。我的解决方案是，在运行测试用例时，我使用 Spring 的 SimpleDriverDataSource。此数据源让您可以使用 ACTUAL 驱动程序实例，而不仅仅是指定类名。这意味着您不必担心在您的类路径中同时拥有 AppEngineDriver 和 com.google.cloud.sql.Driver：

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.SimpleDriverDataSource">
    <constructor-arg>
        <bean class="com.google.cloud.sql.Driver"/>
    </constructor-arg>
    <constructor-arg value="jdbc:google:rdbms://myProject:myInstance/myDb"/>
</bean> 
```

另外，请注意 com.google.cloud.sql.Driver 似乎没有打包在任何标准的 Maven 工件中。相反，它位于 appengine-java-sdk-1.7.3/lib/impl/google_sql.jar 的 appengine-java-sdk 中。对我来说，google_sql.jar 中还有其他东西与我拥有的其他依赖项（一些杰克逊库）发生冲突，所以我只将 com.google 包提取到一个单独的 jar 中。然后我将这个 jar 添加到我在 maven 中的依赖项中，如下所述：[https](https://devcenter.heroku.com/articles/local-maven-dependencies) ://devcenter.heroku.com/articles/local-maven-dependencies 。然后，我将此作为依赖项添加到具有测试范围的项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:28:06.467

我想我会回答我自己的问题，我找到了解决这个问题的方法

```
 if(isUnitTesting) {

        String url = "jdbc:mysql://localhost:3306/project";

        connection = DriverManager.getConnection(url, "root","");

    } else {

        DriverManager.registerDriver(new AppEngineDriver());
        connection = DriverManager.getConnection("jdbc:google:rdbms://"+instanceName+"/project");

    } 
```

我想这不是最好的方式，所以如果您有更好的答案，请随时回复！

# c# - 更改标签文本颜色 RadioButton

> ID：12697929
> 
> 赞同：-2
> 
> 时间：2012-10-02T20:39:21.093
> 
> 标签：c#, colors, radio-button, labels

我的第一个任务是创建一个程序，该程序可以动态更改用户在文本框中输入的字符串的文本颜色、对齐方式等。这是我的问题：首先我的粗体和下划线按钮工作，但不是斜体：

```
label5.Font = new Font(label5.Font.Name, label5.Font.Size, label5.Font.Style ^ FontStyle.Italic); 
```

其次，我必须使用单选按钮来更改我的文本颜色，并且已经设法为每个按钮执行此按钮，但我想通过制作一个使用我的单选按钮名称来更改字体的程序来提高效率，这就是我的意思：

```
protected void Colorchange(object sender, EventArgs e)    
{        
    RadioButton selectedRadioButton = (RadioButton)sender;        
    selectedRadioButton.Name = sender.ToString();

    label5.ForeColor = Color.???????; <---Can't figure how to put the name string here....
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:41:02.107

更改，由于您的评论：

```
label5.ForeColor = System.Drawing.Color.Red
//or other option:
label5.Style.Add("color", "Red"); 
```

改斜体：

```
label5.Font.Italic = true;
//or other option
label5.Style.Add("font-style", "italic"); 
```

第二个选项，以防您想按照您的描述传递字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:01:59.770

你搜索的是：

```
Color red = Color.FromName("Red");

Color blue = Color.FromName(label5.Name); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T18:41:47.550

要更改正在使用的文本颜色，请`TextBox`使用以下代码

```
 textBox1.ForeColor=System.Drawing.Color.Green //  or choose any color from dropdown 
```

你可以做同样的标签。

```
 label5.ForeColor=System.Drawing.Color.Red //  or  any color 
```

# android - 登录错误 - 安卓

> ID：12697936
> 
> 赞同：0
> 
> 时间：2012-10-02T20:39:55.680
> 
> 标签：android, methods, login

我是android开发的新手，我尝试制作一些登录页面..所以我的登录活动出错..它说该方法不适用blablabla..我已经更改了代码，但它仍然无法正常工作..

所以这里是我的代码..

**登录表单.java**

```
public void onClick(View v) {
    String username=akun.getText().toString(); 
    String password1=password.getText().toString();

    try{  
        if(username.length() > 0 && password1.length() >0)  
        {  
            Toko dbUser = new Toko();  
            dbUser.open();  

            if(dbUser.Login(akun, password))  
            {  
                Toast.makeText(LoginForm.this, "Success !",Toast.LENGTH_LONG).show();
            }  
            else
                Toast.makeText(LoginForm.this, "cok !",Toast.LENGTH_LONG).show();
            //dbUser.close();  
        }  

    }catch(Exception e)
    {  
        Toast.makeText(LoginForm.this,"cok ! 2", Toast.LENGTH_LONG).show();  
    }  
} 
```

**toko.java**

```
public boolean Login(String akun, String password) throws SQLException
{  
    Cursor C = db.rawQuery("SELECT * FROM toko WHERE akun=? AND password=?",new String[] {akun, password});   
    if (C != null) {  
        if(C.getCount() > 0)  
        {  
            return true;  
        }  
    }  
    return false;  
} 
```

所以错误在这里：

```
if(dbUser.**Login**(akun, password)) 
```

它说 Toko 类型中的方法 Login(String, String) 不适用于参数 (EditText, EditText)

我认为该错误与粗体文本对应：

```
public boolean Login(**String akun, String password**) throws SQLException
{  
    Cursor C = db.rawQuery("SELECT * FROM toko WHERE akun=? AND password=?",new >String[] {akun, password}); 
    if (C != null) {  
        if(C.getCount() > 0)  
        {  
            return true;  
        }  
    }  
    return false;  
} 
```

那么我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:49:45.877

这里传递的是 EditText 对象，而不是用户名和密码

```
if(dbUser.Login(akun, password)) 
```

它应该是字符串

```
if(dbUser.Login(username, password1)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:50:20.663

它说**Toko**`Login(String, String)`类型中的方法不适用于参数（EditText，EditText）

 **那是你的问题

传入用户名和密码 1 而不是 akun 和密码。**

# java - 如何在 java 的确认邮件中准备 Web 应用程序的完整 URL

> ID：12697938
> 
> 赞同：0
> 
> 时间：2012-10-02T20:40:04.930
> 
> 标签：java, url, web-applications, confirmation-email

在我的应用程序中，我想向创建新帐户的用户发送一封电子邮件以确认他的电子邮件。像往常一样，邮件中会有一个 URL 供用户单击。但是，我无法弄清楚 Web 应用程序的完整 URL 是如何创建的。

目前我可以访问`ServletContext`. 有没有办法通过 ServletContext 对象构造应用程序的完整 URL，这是一种优雅的方式吗？

一般来说，我想了解用于创建此类确认邮件的最佳实践（尤其是 URL 准备部分）。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:34:22.683

尝试使用以下方法：

```
 ServletContext.getContextPath()
 HttpServletRequest.getRequestURL()
 HttpServletRequest.getServerName()
 HttpServletRequest.getServerPort()
 HttpServletRequest.getRequestURI()
 HttpServletRequest.getServletPath()
 HttpServletRequest.getPathInfo()
 HttpServletRequest.getQueryString() 
```

酌情使用。

请注意：如果您使用 HTTP 服务器作为代理，您可能无法重建原始 URL。在这种情况下，最好为网站 URL 定义一些常量，并在电子邮件中使用与基本 URL 相同的常量。可以使用上述方法检索除基本 URL 之外的任何信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T00:04:52.097

我认为您可以提供配置来配置根 URL。你确定确认网址和注册网址一样吗？？

# html - 使用 CSS 改进右箭头按钮

> ID：12697941
> 
> 赞同：0
> 
> 时间：2012-10-02T20:40:15.927
> 
> 标签：html, css

这就是我到目前为止所拥有的：http: [//jsfiddle.net/xzTGv/21/](http://jsfiddle.net/xzTGv/21/)

我真的需要改进我的 CSS 按钮/锚点。我真的无法获得正确的“三角形”（实际上是一个旋转的正方形）来正确融入按钮。

还有什么我应该做的吗？我见过一些人操纵边界来制作一个真正的三角形。但我发现我无法用这种方法真正得到渐变。我真的很感激我能得到的所有帮助。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:43:21.510

我看到的问题是主按钮是从上到下的从浅到深的渐变，但旋转的“三角形”是从右到左的渐变。如果您可以旋转渐变以在旋转的渐变上从上到下（因此，将渐变旋转 90 度），那么您将被设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:51:57.093

我只是在用 Mike 的回答尝试 jsfiddle

```
.arrow:before{
    background: -moz-linear-gradient(left top, #ffffff 0%, #e6e6e6 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #ffffff), color-stop(100%, #e6e6e6));
    background: -webkit-linear-gradient(left top, #ffffff 0%, #e6e6e6 100%);
    background: -o-linear-gradient(left top, #ffffff 0%, #e6e6e6 100%);
    background: -ms-linear-gradient(left top, #ffffff 0%, #e6e6e6 100%);
    background: linear-gradient(left top, #ffffff 0%, #e6e6e6 100%); 
```

应该管用！

# typescript - tsc --module 无论参数如何，总是生成相同的输出

> ID：12697947
> 
> 赞同：1
> 
> 时间：2012-10-02T20:40:25.010
> 
> 标签：typescript, compiler-services

我对 Javascript、NodeJS 和 -- 显然 -- TypeScript 还是很陌生。我想在`src/services`（Windows）中试验编译器服务，为编辑器提供智能感知等。

据我所知，我需要能够`require`使用 NodeJS 服务器中的 TypeScript 服务代码并与编辑器进行通信。我找不到任何特定于 NodeJS 的 TypeScript 服务代码，所以我认为我必须编译服务代码`--module amd`才能通过 RequireJS 将其提供给 NodeJS。

如果以上是正确的，我尝试编译服务代码`--module amd`的结果与使用默认模块类型完全相同（见下文）。

```
$ tsc.cmd --module amd --out amd.js .\languageService.ts
$ tsc.cmd --out comm.js .\languageService.ts
$ diff.exe .\amd.js .\comm.js
$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:14:05.277

诚然，这令人困惑，但从 AMD/RequireJS 对“模块”的定义而言，languageService.ts 中的代码不在“模块”中。

该规范将`module`块内的东西称为“内部模块”。这就是您在 languageService.ts 中看到的内容。你可以认为它们更像是容器或暴露顶级名称的单例（查看代码生成中的一个简单的内部模块可以清楚地说明这一点）。您可以像使用常规顶级对象一样使用它们，根本不需要任何模块加载器。

通过将指令放在 .ts 文件中的顶级声明上（参见规范第 9.2.1 节）来生成*外部*模块（由规范命名）。如果您有兴趣，可以下载一些示例（例如图像板）。`require``export`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T19:36:23.707

您必须将模块定义为`export module`，而不是您的`module`，然后使用`--m amd`or编译它`--module amd`。

我花了几个小时才意识到:)

# api - 在 Web Api MVC 中返回捆绑文件

> ID：12697953
> 
> 赞同：2
> 
> 时间：2012-10-02T20:40:47.870
> 
> 标签：api, optimization, asp.net-mvc-4, asp.net-4.0

我希望我的 API 可以返回捆绑文件。

我在 app_start 上有这个包：

```
bundles.Add(new StyleBundle("~/Content/css").Include("~/Content/site.css")); 
```

并在控制器上返回这个包：

```
return File(("~/Content/css"), "text/css"); 
```

但我有一条错误消息说“找不到文件”。客户端如何从我的 API 中获取捆绑 CSS？我想要一个提供捆绑脚本的谷歌 CDN 之类的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:59:49.953

您可以直接让客户端请求捆绑包，而不是让控制器操作返回捆绑包。例如样式：

```
Scripts.Url("~/Content/css") 
```

会给你捆绑的 url 以供参考。

# android - 如何将包含 ListFragment 的选项卡放在左侧，将详细信息面板放在右侧？

> ID：12697954
> 
> 赞同：0
> 
> 时间：2012-10-02T20:40:47.910
> 
> 标签：android, android-fragments

我必须显示两个选项卡，每个选项卡都包含 ListFragment 类。单击列表中的任何项目时，其详细信息应在横向视图的右侧面板上打开。这很像官方的 Android 片段示例。 ![在此处输入图像描述](../Images/7345aebfd0e8fc7ac8a241950d6e90b0.png) 我想要实现的是，在布局的左侧，列表视图应该在选项卡中，即选项卡中的两个列表视图。单击任何项​​目时，详细信息应在右侧打开。到目前为止，我可以显示选项卡和详细信息，但详细信息未显示在右侧。它们作为一项新活动开放。选项卡导航可以是一个选项，但由于我的应用程序中的一些设计限制，我不能使用它。请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:53:09.460

请查看这个 android 博客[http://android-developers.blogspot.com/2011/02/android-30-fragments-api.html](http://android-developers.blogspot.com/2011/02/android-30-fragments-api.html)它有一个完整的教程，介绍如何将片段用作主详细信息视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:29:03.093

我找到了一个解决方案。我正在解释我是如何做到的，以防有人需要它。

我想在左侧片段上制作标签。由于设计限制，我不能使用选项卡导航，因为我也必须使用列表导航。所以，我做了一个新的片段放在左边的片段上，并用两个按钮给它充气。在不同的按钮单击时，我使用 FragmentTransaction 将新片段添加到左侧片段。

在按钮单击侦听器上，我使用了 fragmentTransaction.replace 方法。

# java - 我可以让 XQuery 在与 XQJ 绑定的变量中计算 { $expression } 吗？

> ID：12697957
> 
> 赞同：0
> 
> 时间：2012-10-02T20:40:55.913
> 
> 标签：java, xquery, basex, xquery-update

为了模拟 XQuery Update 中的自动增量值，假设`<root count="0"/>`第一次运行时，以下工作正常：

```
let $count := /root/@count
return (
  insert node <node id='{ $count }'/> into /root,
  replace value of node $count with $count + 1  
) 
```

......很好的产量：

```
<root count="1">
  <node id="0">
</root> 
```

但是，我想在我的 Java 代码中定义节点，然后将其[绑定](http://xqj.net/javadoc/javax/xml/xquery/XQDynamicContext.html)为`org.w3c.dom.Node`or `Document`，甚至`String`。喜欢：

```
String expr =
     " declare variable $n external; "
   + " let $count := /root/@count; "
   + " return ( "
   + "   insert node $n into /root, "
   + "   replace value of node $count with $count + 1 "
   + " ) ";
XQConnection xqc = ...;
XQPreparedExpression xqp = xqc.prepareExpression(expr);
// org.w3c.dom.Node node is <node id='{ $count }'/>
xqp.bindNode(new QName("n"), node, null);
xqp.executeQuery(); 
```

但是，这只是给我留下了属性中*的文本* `{ $count }`。将节点绑定为`xs:string`值具有相同的效果。

当然，这是防止“XQuery 注入”的一个很好的保护措施。仍然如此：有什么方法可以使 XQuery 更新过程成为我在变量本身中包含的表达式？

（在 XQuery 中使用自动增量值的任何其他聪明的想法也非常受欢迎，但是请参阅[Auto increment with XQuery Update？](https://stackoverflow.com/questions/2561067/auto-increment-with-xquery-update)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T18:18:16.687

XQuery Update的[转换表达式可能会对您有所帮助。](http://docs.basex.org/wiki/XQuery_Update#transform)它可用于修改主存中的现有节点。您的示例可以重写如下：

```
declare variable $n external;

let $count := /root/@count
let $n :=
  copy $c := $n
  modify replace value of node $c/node/@id with $count
  return $c
return (
  insert node $n into /root,
  replace value of node $count with $count + 1
) 
```

外部节点`$n`被复制到变量中`$c`，`@id`根节点的属性被替换为 的当前值`$count`。

当然，这种方法有很多变体。例如，您可以插入一个新`@id`属性而不是替换虚拟..

```
 copy $c := $n
  modify insert node attribute id { $count } into $c/node
  return $c 
```

转换表达式的当前语法首先需要习惯。更好的可读语法可能会受到官方规范的未来版本的影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T22:42:14.923

说到注入...为什么不直接将节点作为字符串传递并使用 basex:eval()？

```
String node = "<node id='{ $count }'/>";
String expr =
   ...
   + "   insert node xquery:eval($n) into /root, "
   ... 
```

以上，`xquery:` [指的是一个 BaseX 模块](http://docs.basex.org/wiki/XQuery_Module)。

# java - 如何编写一个 Helper 类以在 Java 中将类相互映射？

> ID：12697964
> 
> 赞同：1
> 
> 时间：2012-10-02T20:41:21.480
> 
> 标签：java, class

有一段时间我的脑海中有一个问题。假设我们有以下类：

```
public Class Person{
    String name;
    String address;
    String description;
}

public Class PersonFacade{
    String name;
    String address;
    String desc;
} 
```

如您所见，这两个类之间的唯一区别是一个变量的名称。我的问题是编写帮助类以将一个对象的值映射到另一个对象的最佳方法是什么。假设我们有以下内容：

```
Person person = new Person();
person.name="name1";
person.address="address1";
person.description="description1"; 
```

我想编写一个应该执行以下操作的类（我们称它为 Transformer 类）

```
PersonFacade personFacade = new PersonFacade();
TransformClass.transformFrom(person, personFacade); 
```

我想要这种`TransformClass.transformFrom()`方法做的是以下内容：

基于变量名称的相似性，将变量的值从“FromClass”分配给“ToClass”，所以在我们的例子中，我希望它分配`personFacade.name = "name1"`，`personFacade.address="adderss1"`并且`personFacade.desc = "description1"`（最后一个似乎更难完成，但让我们试试）

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:48:21.507

您可以使用**推土机**：

> Dozer 是一个 Java Bean 到 Java Bean 的映射器，它递归地将数据从一个对象复制到另一个对象。通常，这些 Java Bean 将具有不同的复杂类型。
> 
> Dozer 支持简单属性映射、复杂类型映射、双向映射、隐式-显式映射以及递归映射。这包括映射集合属性，这些属性也需要在元素级别进行映射。

看看这个：[http ://dozer.sourceforge.net/](http://dozer.sourceforge.net/)

这是一个很棒的 JavaBean Mapper。

这里是“入门”：

[http://dozer.sourceforge.net/documentation/gettingstarted.html](http://dozer.sourceforge.net/documentation/gettingstarted.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:04:20.907

也许您可以编写自己的[Annotation](http://docs.oracle.com/javase/tutorial/java/javaOO/annotations.html)类来创建类之间的关系。所以，例如

```
public Class Person{
    @MyAnnotation(id='name')
    String name;

    @MyAnnotation(id='addr')
    String address;

    @MyAnnotation(id='desc')
    String description;
}

public Class PersonFacade{
    @MyAnnotation(id='name')
    String name;

    @MyAnnotation(id='addr')
    String address;

    @MyAnnotation(id='desc')
    String desc;
} 
```

然后在您的 TransformClass 中，您只需遍历注解，找到匹配项并在[Reflection](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/reflect/package-summary.html)的帮助下设置相应的字段值。

# java - Java 组合框错误

> ID：12697967
> 
> 赞同：0
> 
> 时间：2012-10-02T20:41:26.690
> 
> 标签：java, swing, jcombobox, parseint

我添加了一个组合框。它需要具有 1 到 20 的值，并且需要从构造函数调用方法。现在我不擅长放置代码。我很困惑我需要在哪里插入代码并且总是会出错。

运行程序时出现错误。它对组合框说：没有合适的方法我已将框命名为yearscombobox

请帮我修复错误。我不知道我是否需要为具有 1 到 20 的值放置数组？如果是这样，我不知道在哪里放置该代码。我在代码中用粗体编写的行中有错误。好的，我尝试将其加粗。当我从网豆复制这段代码时，它有点不同。任何有 yearscomboox 的东西都有错误说没有合适的方法。帮我。我任凭你摆布。我讨厌Java

```
 package murach.ui;

import java.text.NumberFormat;
 import murach.business.FinancialCalculations;

  public class FutureValueFrame extends javax.swing.JFrame {

   /** Creates new form FutureValueFrame */
    public FutureValueFrame() {
     initComponents();
    }

    /** This method is called from within the constructor to
    * initialize the form.
    * WARNING: Do NOT modify this code. The content of this method is
    * always regenerated by the Form Editor.
    */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
   private void initComponents() {

    jLabel1 = new javax.swing.JLabel();
    jLabel2 = new javax.swing.JLabel();
    jLabel3 = new javax.swing.JLabel();
    jLabel4 = new javax.swing.JLabel();
    monthlyPaymentTextField = new javax.swing.JTextField();
    yearlyRateTextField = new javax.swing.JTextField();
    calculateButton = new javax.swing.JButton();
    exitButton = new javax.swing.JButton();
    **YearsComboBox = new javax.swing.JComboBox();**
    jScrollPane1 = new javax.swing.JScrollPane();
    FutureValueList = new javax.swing.JList();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setTitle("Future Value Calculator");
    setResizable(false);

    jLabel1.setText("Monthly Payment:");

    jLabel2.setText("Yearly Interest Rate:");

    jLabel3.setText("Number of Years:");

    jLabel4.setText("Future Value:");

    calculateButton.setMnemonic('c');
    calculateButton.setText("Calculate");
    calculateButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            calculateButtonActionPerformed(evt);
        }
    });

    exitButton.setMnemonic('x');
    exitButton.setText("Exit");
    exitButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            exitButtonActionPerformed(evt);
        }
    });

    YearsComboBox.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20" }));
    YearsComboBox.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            YearsComboBoxActionPerformed(evt);
        }
    });

    FutureValueList.setModel(new javax.swing.AbstractListModel() {
        String[] strings = { "Year 1", "Year 2", "Year 3", "Year 4", "Year 5" };
        public int getSize() { return strings.length; }
        public Object getElementAt(int i) { return strings[i]; }
    });
    jScrollPane1.setViewportView(FutureValueList);

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(jLabel1)
                .addComponent(jLabel2)
                .addComponent(jLabel3)
                .addComponent(jLabel4))
            .addGap(16, 16, 16)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(yearlyRateTextField)
                    .addComponent(monthlyPaymentTextField, javax.swing.GroupLayout.DEFAULT_SIZE, 115, Short.MAX_VALUE)
                    .addComponent(YearsComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, 67, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(layout.createSequentialGroup()
                    .addGap(6, 6, 6)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(layout.createSequentialGroup()
                            .addComponent(calculateButton, javax.swing.GroupLayout.PREFERRED_SIZE, 90, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 26, Short.MAX_VALUE)
                            .addComponent(exitButton, javax.swing.GroupLayout.PREFERRED_SIZE, 65, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addComponent(jScrollPane1))))
            .addGap(36, 36, 36))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel1)
                .addComponent(monthlyPaymentTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel2)
                .addComponent(yearlyRateTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel3)
                .addComponent(YearsComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(jLabel4)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 56, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(18, 18, 18)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(calculateButton)
                .addComponent(exitButton))
            .addContainerGap(100, Short.MAX_VALUE))
    );

    pack();
}// </editor-fold>

private void calculateButtonActionPerformed(java.awt.event.ActionEvent evt) {                                                
    if (isValidData())
    {
        double p = Double.parseDouble(monthlyPaymentTextField.getText());
        double r = Double.parseDouble(yearlyRateTextField.getText());
        int y = Integer.parseInt(YearsComboBox.getItemCount());

        double fv = FinancialCalculations.calculateFutureValue(p, r, y);

        NumberFormat currency = NumberFormat.getCurrencyInstance();
        FutureValueList.setText(currency.format(fv));
    }
}                                               

private void exitButtonActionPerformed(java.awt.event.ActionEvent evt) {                                           
    System.exit(0);
}                                          

private void YearsComboBoxActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:
 int y = YearsComboBox.getSelectedIndex();

}

private boolean isValidData()
{
    SwingValidator sv = new SwingValidator();
    return
        sv.isPresent(monthlyPaymentTextField, "Monthly Investment") &&
        sv.isDouble(monthlyPaymentTextField, "Monthly Investment") &&
        sv.isPresent(yearlyRateTextField, "Interest Rate") &&
        sv.isDouble(yearlyRateTextField, "Interest Rate") &&
        sv.isPresent(YearsComboBox, "Number of Years") &&
        sv.isInteger(YearsComboBox, "Number of Years");
}

/**
* @param args the command line arguments
*/
public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            // new FutureValueFrame().setVisible(true);  // generated code
            FutureValueFrame frame = new FutureValueFrame();
            frame.setVisible(true);
            frame.setLocationRelativeTo(null);
        }
    });
}

// Variables declaration - do not modify
private javax.swing.JList FutureValueList;
public javax.swing.JComboBox YearsComboBox;
private javax.swing.JButton calculateButton;
private javax.swing.JButton exitButton;
private javax.swing.JLabel jLabel1;
private javax.swing.JLabel jLabel2;
private javax.swing.JLabel jLabel3;
private javax.swing.JLabel jLabel4;
private javax.swing.JScrollPane jScrollPane1;
private javax.swing.JTextField monthlyPaymentTextField;
private javax.swing.JTextField yearlyRateTextField;
// End of variables declaration

  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T21:12:08.407

1.  [为了尽快发布SSCCE](http://sscce.org/)以获得更好的帮助，没有人知道其余的课程......，

2.  对于[JComboBox](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)或[JList](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)`Integer`来说，放置或`Double`重视没有问题`Model`

3.  使用J [FormattedTextField](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)，`Number Formatter`

4.  然后你可以减少`String`从/到`Integer`或解析中的任何可能的异常`Double`

5.  您可以将[JSpinner 与 SpinnerDateModel](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html)一起使用，而不是`JComboBox`

# opengl - OpenGL 多纹理细分

> ID：12697968
> 
> 赞同：-1
> 
> 时间：2012-10-02T20:41:27.400
> 
> 标签：opengl

我必须在 OpenGL 中使用矩形纹理细分一些表面。为简单起见，让它成为一个三角形。纹理相互接触，不重叠。这是通过将 GL_TEXTURE_WRAP_S 和 GL_TEXTURE_WRAP_T 设置为 GL_CLAMP_TO_BORDER 并正确调整纹理坐标来完成的。当 GL_TEXTURE_MIN_FILTER 和 GL_TEXTURE_MAG_FILTER 设置为 GL_NEAREST 时，一切正常，但是当我想应用 GL_LINEAR 文件和/或各向异性过滤时，纹理边界像素的 alpha 逐渐变为透明，因此在相邻纹理之间可以看到背景颜色线。

在保留线性过滤的同时，如何在不将多个纹理合并为一个的情况下避免这种伪影？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:44:11.087

您可能想要`GL_CLAMP_TO_EDGE`而不是`GL_CLAMP_TO_BORDER`. Clamp to border 将边缘像素与初始化为 (0,0,0,0) 的边框颜色混合。这就是您的透明度的来源。

要么将纹理夹在实际边缘，要么设置不透明的边框颜色。

# templates - 玩 2：如何比较 scala 模板中的字符串？

> ID：12697969
> 
> 赞同：7
> 
> 时间：2012-10-02T20:41:28.237
> 
> 标签：templates, scala, playframework-2.0

我有一个表单对象，我需要检查一个字段的值是否等于某个字符串

我正在尝试这个，但它不起作用

```
 @if(sp.pageType.equals("customreCare")) {
   //render this specific div 
  } else {
   //render this other div
  } 
```

但不幸的是它不起作用，它的语法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T20:56:01.753

使用`==`运算符比较字符串：

```
@defining("something") {whatToTest =>
    @if(whatToTest == "something"){ There is something } else { There is.... nothing }
} 
```

所以在你的情况下（当然要确保在`customreCare`......这样的条件下没有拼写错误）：

```
@if(sp.pageType == "customreCare") {
     //render this specific div 
} else {
     //render this other div
} 
```

# vba - 从 HTML 电子邮件填充网站文本区域

> ID：12697970
> 
> 赞同：0
> 
> 时间：2012-10-02T20:41:28.580
> 
> 标签：vba, outlook

我正在使用此 VBA 代码从 Outlook 中的 HTML 电子邮件填充网站文本区域。

我想在保留文本的同时删除 HYPERLINK`"website"website`和 HYPERLINK 。`"mailto:email@email.com"email@email.com``mailitem.body`

我该怎么做？

`ie.document.getElementById("message").Value = Replace(objItem.Body, vbCrLf & vbCrLf, vbCrLf)`

一些例子：

www.google.com

在文本区域中出现 HYPERLINK "www.google.com"www.google.com 电子邮件出现的是 HYPERLINK "mailto:dr_patso@email.com"dr_patso@email.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:44:16.773

使用这个，开始使用“txt”而不是objitem.body进行填充。

```
If objItem.BodyFormat = olFormatHTML Then
txt = objItem.Body
strt = InStr(txt, "HYPERLINK")
do until strt = 0
  nd = InStr(strt + 13, txt, """")
  txt = Left(txt, strt - 1) & Mid(txt, nd + 1)
  strt = InStr(txt, "HYPERLINK")
loop
End If

If objItem.BodyFormat = olFormatRichText Then
txt = objItem.Body
strt = InStr(txt, " HYPERLINK")
do until strt = 0
  nd = InStr(strt + 13, txt, """")
  txt = Left(txt, strt - 1) & Mid(txt, nd + 2)
  strt = InStr(txt, " HYPERLINK")
loop
End If 
```

然后用正文填充文本区域..

If objItem.BodyFormat = olFormatHTML Then ie.document.getElementById("message").Value = Replace(txt, vbCrLf & vbCrLf, vbCrLf) End If If objItem.BodyFormat = olFormatPlain Then ie.document.getElementById("message")。 Value = objItem.Body End If If objItem.BodyFormat = olFormatRichText Then ie.document.getElementById("message").Value = txt End If

# python - Sublime 可以为 Python 文档字符串着色与单行字符串不同吗？

> ID：12697971
> 
> 赞同：5
> 
> 时间：2012-10-02T20:41:34.040
> 
> 标签：python, sublimetext2, docstring

我想在 Sublime Text 2 中区分 Python 文档字符串和单行字符串。查看 Python 语言定义，我可以看到这一点，以及使用相同 comment.block.python 名称的撇号字符串的匹配定义.

```
<dict>
    <key>begin</key>
    <string>^\s*(?=[uU]?[rR]?""")</string>
    <key>end</key>
    <string>(?&lt;=""")</string>
    <key>name</key>
    <string>comment.block.python</string>
... 
```

但是当我像这样创建一个新的颜色规则时：

```
<dict>
    <key>name</key>
    <string>Docstring</string>
    <key>scope</key>
    <string>comment.block.python</string>
    <key>settings</key>
    <dict>
        <key>foreground</key>
        <string>#008800</string>
    </dict>
</dict> 
```

什么都没发生; 它们保持与单行字符串相同的颜色。

是否有可能做到这一点？如果是这样，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T08:33:16.647

也许改为：

```
<dict>
    <key>name</key>
    <string>Docstring</string>
    <key>scope</key>
    <string>string.quoted.double.block.python</string>
    <key>settings</key>
    <dict>
        <key>foreground</key>
        <string>#008800</string>
    </dict>
</dict> 
```

我只是简单地测试了它，但它似乎有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T23:24:02.113

我认为这`Python.tmLanguage`有一个小错误。这是文档字符串的修复，虽然我不确定它是否是一个不错的修复：

*   将文档字符串键替换为：

    ```
    <key>docstrings</key>
    <dict>
        <key>patterns</key>
        <array>
            <dict>
                <key>begin</key>
                <string>^\s*([uU]?[rR]?""")</string>
                <key>end</key>
                <string>(""")</string>
                <key>name</key>
                <string>comment.block.python</string>
            </dict>
            <dict>
                <key>begin</key>
                <string>^\s*(?=[uU]?[rR]?''')</string>
                <key>end</key>
                <string>(?&lt;=''')</string>
                <key>name</key>
                <string>comment.block.python</string>
            </dict>
        </array>
    </dict> 
    ```

*   将单个 dict 添加为和的第一个`string_quoted_double`数组`string_quoted_single`

    ```
    <key>string_quoted_double</key>
    <dict>
        <key>patterns</key>
        <array>
            <dict>
                <key>include</key>
                <string>#docstrings</string>
            </dict> 
    ```

这应该自动使文档字符串成为注释。

# javascript - 无法从 JQuery 中的幻灯片中获取价值

> ID：12697972
> 
> 赞同：0
> 
> 时间：2012-10-02T20:41:35.550
> 
> 标签：javascript, jquery, slider

我有一个简单的滑块 UI，我想在它动态变化时获取它的值，但我似乎无法让它工作。我有：

```
<script type="text/javascript">
    $(function() {
        $( "#slider" ).slider({
            value:0,
            min: 0,
            max: 24,
            step: 1,
            slide: function( event, ui ) {
              $( "#amount" ).val( ui.value + " hrs");
            }
        });
        $( "#amount" ).val( $( "#slider" ).slider( "value" ) + " hrs" );
    });
  });
</script> 
```

和...

```
<p>
<label for="amount">Time (1hr increments):</label>
<input type="text" id="amount" />
</p>
    <div id="slider"></div> 
```

为了检查它是否正常工作，我正在使用：

```
$("#slider").change(function() {
   alert($("#slider").val());
}); 
```

但没有喜悦。对不起，如果我过于愚蠢！任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:56:00.027

试试这个代替`change()`方法：

```
$("#slider").bind("slidechange", function(event, ui) {
    alert(ui.value);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:07:30.123

您是否尝试过使用 jQuery 'on' 方法？

```
$('#slider').on('change', function() {
   alert($('#slider').val());
}); 
```

# android - 在 Fragment (ViewPager) 中更新 ListView

> ID：12697973
> 
> 赞同：1
> 
> 时间：2012-10-02T20:41:41.473
> 
> 标签：android, android-tabhost, android-viewpager

我有一个简单的聊天应用程序，带有 ViewPager 用于活动聊天，现在，我使用

```
 @Override
    public int getItemPosition(Object object)
    {
        return POSITION_NONE;
    } 
```

但这会导致重新创建所有片段，如果消息太多，它将滞后，并且每当收到消息时它都会关闭键盘，所以我试图覆盖 instantiateItem，但我无法到达任何地方，因为我不知道如何处理它，我想更新所有列表视图/片段，而不仅仅是活动的。

我还尝试使用片段的onCreateView，获取列表视图，向其中添加适配器，并将该适配器添加到数组列表中，每当每条消息到来时，都会更新此数组列表中的所有适配器，但这不起作用正如预期的那样，我不得不离开 ViewPager 然后再次回到它（因为 ViewPager 在 tabHost 内）才能显示消息。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:46:59.137

请使用 getItemPostion() 中的 setTag() 方法更新视图，而不是返回 POSITION_NONE。使用 setTag() 的原因以及如何做到这一点的方法在这篇文章[ViewPager PagerAdapter not updates the View中得到了很好的解释](https://stackoverflow.com/questions/7263291/viewpager-pageradapter-not-updating-the-view)

# java - 在 jsf 标签内调用 if 函数两次

> ID：12697974
> 
> 赞同：1
> 
> 时间：2012-10-02T20:41:46.597
> 
> 标签：java, function, jsf, if-statement

直接看标签会更容易理解我的问题，问题在 styleClass 属性里面：

```
<h:outputText value="#{prod.actualStock}" 
styleClass="
#{productBean.getSeverity(prod.actualStock, prod.replacementAlertLevel).equals('INFO') ?
'severity-info' : productBean.getSeverity(prod.actualStock, prod.replacementAlertLevel).equals('WARN') ?
'severity-warn' : 'severity-danger'}" /> 
```

现在，请注意我调用了两次“getSeverity()”函数，三个返回中的每一个都为 outputText 提供了不同的样式类。有没有办法只在保持相同逻辑的情况下调用该函数？

'' 标签进入表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:48:52.303

您可以在您的`ProductBean`类中添加另一个属性来保存结果，`ProductBean#getSeverity`并在您的托管 bean 中使用它之前将其设置在`<h:dataTable>`

```
@ViewScoped
@ManagedBean
public class Bean {
    private List<ProductBean> productBean;
    //getters and setters...

    //I'm assuming you fill the list here
    @PostConstruct
    public void init() {
        productBean = ...
        for(ProductBean pb : productBean) {
            pb.setSeverityValue(pb.getSeverity(<parameters>));
        }
    }
} 
```

在您的 JSF 代码中，您只需调用该属性

```
<h:outputText value="#{prod.actualStock}"
    styleClass="#{productBean.severityValue.equals('INFO') ? 'severity-info' : productBean.severityValue.equals('WARN') ? 'severity-warn' : 'severity-danger'}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:44:04.997

为什么不让 getSeverity 方法将类名作为字符串返回？

# c - 使用 BIO_write() 控制何时传输数据

> ID：12697977
> 
> 赞同：1
> 
> 时间：2012-10-02T20:42:06.030
> 
> 标签：c, network-programming, openssl

我最近开始在我的项目中使用 OpenSSL。

有没有办法指示 BIO_write(bio, buf, len) 在其内部缓冲区达到一定长度时传输数据？

我目前正在调用这样的函数：

```
unsinged char *pByteArray;
Build pByteArray;
BIO_write(pByteArray); 
```

但如果我可以这样调用函数会很好：

```
BIO_write(Length bytes);
BIO_write(STX byte);
BIO_write(Data);
BIO_write(ETX byte); // Now transmit! 
```

# sql - sqlite3 查询磁盘空间使用情况

> ID：12697978
> 
> 赞同：2
> 
> 时间：2012-10-02T20:42:14.670
> 
> 标签：sql, database, sqlite

我有一个重几百兆字节的复杂 sqlite3 数据库，我想知道这个空间被占用了.. 哪些列平均具有最大的字段，哪些记录..

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T20:48:15.953

使用[下载页面中的 SQLite3 Analyzer](http://www.sqlite.org/download.html)

# vba - 对象“_Worksheet”的方法选择失败 - 为什么？

> ID：12697980
> 
> 赞同：8
> 
> 时间：2012-10-02T20:42:28.570
> 
> 标签：vba, excel, excel-2007

```
Set mainWB = Workbooks("Copy Paste.xlsb")
Set mainWS = mainWB.Sheets("Sheet1")
Set testWS = mainWB.Sheets("Sheet3")

mainWS.Select 
```

我在 Excel VBA 的最后一行不断收到错误消息：

> “对象'_Worksheet'的方法选择失败”

知道为什么或如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T23:31:07.780

正如评论中所讨论的，不能`Sheets`在 VBA 中选择不活动的（或`Range`它们上的对象）。

例如下面的代码

```
Sheets(1).Activate
Sheets(2).Range("A1").Select 
```

将导致您收到的错误。

在您的情况下，您似乎正在尝试`Select`使用未激活的工作表 - 您的`mainWS`对象可能不是`ActiveSheet`您调用此代码的那一点。测试是否发生这种情况的一种简单方法是在代码末尾添加以下内容：

```
if (ActiveSheet.Name <> mainWS.Name) then
    msgbox ("Going to crash after clicking ok!")
end if
mainWS.Select 
```

请注意，您可以使用命令参考激活的工作表`ActiveSheet`来获取属性或您感兴趣的任何其他操作。

如果您通过工作簿中的所有工作表循环工作并且存在隐藏工作表，也会发生此错误。留意那个。

* * *

最后，与您的特定错误消息无关，我假设您在某处声明这些变量并且根本没有在此处复制它们 - 如果不是我会考虑使用`Option Explicit`，因为您经常会遇到各种问题而无需`Option Explicit`在您的 VBA 顶部代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T07:33:00.480

虽然我同意上述观点，但同样重要的是要注意，如果工作表的可见性当前设置为 xlSheetVeryHidden，则删除功能将不起作用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-10T13:59:02.860

我遇到了同样的问题，并查看了这篇文章以获取有关如何解决它的想法。通过在我的代码失败的行上使用“激活”而不是“选择”来解决我的问题。因此，不要使用“mainWS.Select”，而是尝试使用“mainWS.Activate”。

# php - Paypal Express 结账退款

> ID：12697981
> 
> 赞同：0
> 
> 时间：2012-10-02T20:42:29.733
> 
> 标签：php, paypal, express-checkout

我试图让我的网站用户单击退款按钮，该按钮会将他们带到贝宝，让他们登录，然后确认退款，然后将他们重定向回我的网站。所以我正在寻找与快速结帐相反的东西。我到处找，但找不到任何东西。

该设施是否存在或是否有解决方法来获得相同的结果？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:04:17.403

PayPal 不为此提供网络流；商家只需调用[RefundTransaction](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_RefundTransaction) API 调用即可立即处理退款。
如果您确实想要某种网络流，您将需要自己构建它。

# entity-framework - 如何修改此实体框架代码优先代码？

> ID：12697984
> 
> 赞同：1
> 
> 时间：2012-10-02T20:42:36.490
> 
> 标签：entity-framework, .net-4.0, ef-code-first

我首先是 Entity Framework 代码的新手，因此非常感谢任何帮助或指导。

我目前有以下课程：

```
public partial class Customer
{
    public int Id { get; set; }
    private ICollection<Address> _addresses;
}

public partial class Address
{
    public int Id { get; set; }
    public string Street { get; set; };
    public string City { get; set; };
    public string Zip { get; set; };
} 
```

和以下

```
public partial class CustomerMap : EntityTypeConfiguration<Customer>
{
    public CustomerMap()
    {
        this.ToTable("Customer");
        this.HasKey(c => c.Id);

        this.HasMany<Address>(c => c.Addresses)
            .WithMany()
            .Map(m => m.ToTable("CustomerAddresses"));
    }
} 
```

这正如我所期望的那样工作，并为映射创建了一个 Customer、Address 和 CustomerAddresses 表。现在我的问题..如果我需要修改代码以生成以下内容，我会怎么做...

我想将 CompanyCode 属性添加到“CustomerAddresses”表中......然后不是构建地址集合......我希望能够构建一个哈希表，其中键是 CompanyCode，值是集合地址。

因此，如果我有以下内容：

```
Customer
ID     C1

Address
ID     A1
ID     A2

CustomerAddresses
CustomerID      C1
AddressID     A1
CompanyCode    ABC

CustomerID      C1
AddressID     A2
CompanyCode    ABC

CustomerID      C1
AddressID     A2
CompanyCode    XYZ 
```

那么，Customer.Addresses["ABC"] 将返回 ID 为 A1 和 A2 的地址集合。而 Customer.Addresses["XYZ"] 将返回 ID 为 A2 的地址集合。

任何方向/帮助将不胜感激......谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:15:44.987

据我所知，不可能用索引器引入这样的导航属性。您的索引器实际上是一个查询，您必须将其表示为一个查询。我看到的唯一方法是让导航集合保持原样并引入第二个（未映射的）属性，该属性将导航集合用于过滤器。最大的缺点是这样的过滤器会在内存中使用 LINQ-to-Objects 进行，并且要求您始终先从数据库加载完整的集合（例如通过急切或延迟加载），然后再过滤集合。

我可能会将这样的过滤器排除在实体本身之外，并将其实现在存储库或服务类中，或者通常是您从数据库加载实体的位置/模块中。

您需要做的第一件事是将`CustomerAddresses`表公开为模型中的实体，因为使用额外的自定义属性`CompanyCode`，您不能再使用多对多关系，而是需要两个一对多关系。新实体如下所示：

```
public partial class CustomerAddress
{
    public int CustomerId { get; set; }
    // public Customer Customer { get; set; } // optional

    public int AddressId { get; set; }
    public Address Address { get; set; }

    public string CompanyCode { get; set; }
} 
```

并且`Customer`需要更改为：

```
public partial class Customer
{
    public int Id { get; set; }
    public ICollection<CustomerAddress> CustomerAddresses { get; set; }
} 
```

您需要将映射更改为：

```
public CustomerMap()
{
    this.ToTable("Customer");
    this.HasKey(c => c.Id);

    this.HasMany(c => c.CustomerAddresses)
        .WithRequired() // or .WithRequired(ca => ca.Customer)
        .HasForeignKey(ca => ca.CustomerId);
} 
```

并为新实体创建一个新映射：

```
public CustomerAddressMap()
{
    this.ToTable("CustomerAddresses");
    this.HasKey(ca => new { ca.CustomerId, ca.AddressId, ca.CompanyCode });
    // or what is the PK on that table?
    // Maybe you need an Id property if this key isn't unique

    this.HasRequired(ca => ca.Address)
        .WithMany()
        .HasForeignKey(ca => ca.AddressId);
} 
```

现在，在某些服务类中，您可以加载过滤后的地址：

```
public List<Address> GetAddresses(int customerId, string companyCode)
{
    return context.CustomerAddresses.Where(ca =>
        ca.CustomerId == customerId && ca.CompanyCode == companyCode)
        .ToList();
} 
```

或者，如果您想将客户与过滤后的地址一起加载：

```
public Customer GetCustomer(int customerId, string companyCode)
{
    var customer = context.Customer.SingleOrDefault(c => c.Id == customerId);
    if (customer != null)
        context.Entry(customer).Collection(c => c.CustomerAddresses).Query()
            .Where(ca => ca.CompanyCode == companyCode)
            .Load();
    return customer;
} 
```

最后一个示例是*两个*数据库查询。

在实体中，您可以使用将地址投影到集合`Customer`之外的辅助属性：`CustomerAddresses`

```
public partial class Customer
{
    public int Id { get; set; }
    public ICollection<CustomerAddress> CustomerAddresses { get; set; }

    public IEnumerable<Address> Addresses
    {
        get
        {
            if (CustomerAddresses != null)
                return CustomerAddresses.Select(ca => ca.Address);
            return null;
        }
    }
} 
```

请记住，此属性不会查询数据库，结果取决于已加载到`CustomerAddresses`.

# jquery - jquery：使用选择框滚动到某个元素（如命名锚）

> ID：12697985
> 
> 赞同：0
> 
> 时间：2012-10-02T20:42:40.957
> 
> 标签：jquery

我正在尝试制作一个选择框，当用户选择一个选项时，页面将滚动到该元素。现在我有类似的东西（使用锚链接而不是选择框）并且“滚动到元素”是通过页面位置完成的（而不是通过滚动到元素）。

**所以，我想要完成的主要事情：**

*   让用户在选择框中选择一个选项，它将“.动画滚动”到一个元素。

这是我到目前为止得到的一个例子（点击“浏览供应商”）： http: [//oneillwebs.com/coburns/vendors/](http://oneillwebs.com/coburns/vendors/)

html:

```
 <!-- Click links to scroll element -->
   <ul>
     <li><a href="#" id="A">A</a></li>
     <li><a href="#" id="B">B</a></li>
     <li><a href="#" id="C">C</a></li>
   </ul>

   <!-- Div that holds the information thats scrolled to -->
   <div class="vendor-links">
      <nav class="a">
        <h3>A</h3>
        <ul class="float">
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
        </ul>
      </nav>

      <nav class="b">
        <h3>B</h3>
        <ul class="float">
          <li><a href="http://www.coburns.com" target="iframe">Coburn's</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
        </ul>
      </nav>

      <nav class="c">
        <h3>C</h3>
        <ul class="float">
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
        </ul>
      </nav>
  </div> 
```

jQuery：

```
 // Scroll to element
        $("#A").click(function() {
            $('.vendors-links').animate({ scrollTop:10 }, 1000);
        });

        $("#B").click(function() {
            $('.vendors-links').animate({ scrollTop:200}, 1000);
        });

        $("#C").click(function() {
            $('.vendors-links').animate({ scrollTop:400 }, 1000);
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:52:45.490

有一个很好的插件可以做到这一点：[https ://github.com/flesler/jquery.scrollTo](https://github.com/flesler/jquery.scrollTo)

可以在此处找到演示：http: [//demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

**添加：**

您可以绑定到“更改”事件 f.ex。带有类似的标记

```
 <select>
    <option value="" selected>Select something...</option>
    <option value=a>A</option>
    <option value=b>B</option>
  </select> 
```

你可以做

```
​$("select").change(function() {
    var v = $(this).val();
    if(v)
        ...scroll to v...
}); 
```

# checkbox - 将复选框与 img 并排排列

> ID：12697986
> 
> 赞同：0
> 
> 时间：2012-10-02T20:42:42.357
> 
> 标签：checkbox, image

我的复选框由 img 提供。我尝试将它们并排放置，但没有成功。

我想要这个：[http](http://tinyurl.com/8g8ev2m) ://tinyurl.com/8g8ev2m （我是通过使用重力形式做到的，但不幸的是它不能满足我的需求）

看起来像这样：[http ://tinyurl.com/8m7g295](http://tinyurl.com/8m7g295)

我附加的第二个代码。

谢谢你的帮助。

```
.DesignCheckBox label {
               background-repeat: no-repeat;
               border: 2px solid #DDD;
                       height: 150px!important;
                       font-size: 150%;
                       -moz-border-radius: 20px;
                       -webkit-border-radius: 20px;
            border-radius: 20px; 
            -khtml-border-radius: 20px; 
                       background-image: url(http://doarna.com/wp-content/uploads/2012/09/XCellcom.gif);
                       }

<?php
global $wpdb;
 $query = "SELECT * FROM wp_organization where type='תקשורת'";
 $results = $wpdb->get_results( $query );

       foreach ($results as $result) {
                   $MEATZBEN= $result->NAME;
                   $MEATZBENID= $result->ID;
                   echo "<input type='checkbox' name='$MEATZBENID' value='$MEATZBEN'><label class='Checkboxstyle'>$MEATZBEN";

}
?> 
```

# ruby-on-rails - ActionView::Template::Capybara 测试错误

> ID：12697992
> 
> 赞同：0
> 
> 时间：2012-10-02T20:43:02.240
> 
> 标签：ruby-on-rails, ruby, rspec, capybara

我正在使用 RSPEC 和 Capybara 进行测试并得到以下错误。

```
 Failure/Error: click_button "Upload"
     ActionView::Template::Error:
       undefined method `name' for nil:NilClass
     # ./app/views/mappings/show.html.erb:164:in `block (2 levels) in _app_views_mappings_show_html_erb__2876658303246235457_70231209394300'
     # ./app/views/mappings/show.html.erb:163:in `block in _app_views_mappings_show_html_erb__2876658303246235457_70231209394300'
     # ./app/views/mappings/show.html.erb:95:in `_app_views_mappings_show_html_erb__2876658303246235457_70231209394300'
     # (eval):2:in `click_button'
     # ./spec/requests/upload_maps_spec.rb:29:in `block (2 levels) in <top (required)>' 
```

这是模板文件

```
<%= bootstrap_form_for( [@mapping,@mapping_version], :html => { :multipart => true, :class => "form-horizontal" } ) do |f| %>
  <% if @mapping_version.new_record? %>
    <%= f.file_field :mapping_file, :class => 'span6' %>
  <% else %>
    <%=  %>
    <%= f.file_field :mapping_file, :class => 'span6', :help_block => "Your current mapping file is #{@mapping_version.mapping_file_file_name}. You can choose another file to replace it or just leave blank to keep your original file." %>
  <% end %>
  <%= f.text_field :version, :class => 'span6', :help_block => "Please use a version number formatted as x.y.z where x, y and z are integers" %>
  <%= f.text_area :notes, :class => 'span6', :rows => 5 %>
  <%= f.actions do %>
    <%= f.submit submit_label %>
  <% end %>
<% end %> 
```

尽管模板文件中没有标签“上传”，但它显示在 HTML 中。这是给我带来问题的测试。

```
 it "allows user to upload new map" do

    user = FactoryGirl.create(:user)
    login_as(user, :scope => :user)

    @mapping = FactoryGirl.create(:mapping)

    login_as(user)
    visit new_mapping_url(:host => with_maps_subdomain)

    fill_in "Title", :with => "What The Map"
    fill_in "Description", :with => @mapping.description
    select('Traktor Control S4', :from => 'mapping_midi_controller_id')
    select('Traktor Pro 2', :from => 'mapping_software_id')
    fill_in "YouTube Video URL", :with => @mapping.video_url

    click_button "Next step: upload the mapping file"

    current_path.should eq("/mappings/2/mapping_versions/new")

    attach_file('Mapping file', './spec/support/DJTT_VCI400SE_v1_1_2_TSI.zip')
    fill_in "Version", :with => "0.1.0"
    fill_in "Notes", :with => "Initial release"

    click_button "Upload"

    current_path.should eq ("/mappings/2")

  end 
```

对可能发生的事情有任何见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:48:40.997

我不确定，但乍一看，我会检查在您单击“上传”后呈现的模板，我猜有对 nil 对象的名称方法的调用，所以有些东西没有正确处理由控制器转移到模板

我想建议将这些测试编写为提供更清晰测试界面的功能，[请参阅](http://railsware.com/blog/2012/01/08/capybara-with-givenwhenthen-steps-in-acceptance-testing/)

# java - java中的双if语句（swing，JFrame）不起作用

> ID：12697994
> 
> 赞同：0
> 
> 时间：2012-10-02T20:43:10.853
> 
> 标签：java, swing, jframe

我正在尝试制作一个表单，以便当用户选中复选框并单击按钮时，将执行一些代码。我试图在一份`if`声明中做到这一点，但当我做这两件事时没有任何反应。我正在使用 Swing 在 Java 中执行此操作。

这是代码：

```
private class theHandler implements ActionListener{
    public void actionPerformed(ActionEvent event){
        String tftext;
        tftext = tf1.getText();

        if (event.getSource()==b1)
            if(event.getSource()==cb1)
            JOptionPane.showMessageDialog(null, tftext, "title", JOptionPane.INFORMATION_MESSAGE); 
```

`b1`是一个按钮，`cb1`是一个复选框，`tf1`是一个文本字段。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T20:47:03.130

`Event.getSource()`不会引用*两个不同*的对象，它应该引用单个事件的唯一源，例如，在单击按钮的情况下为 Button。您的嵌套语句将永远不会执行。

听起来您应该处理按钮单击，并在该事件处理程序中检查复选框的状态（选中与否）。如果选中该复选框，则显示您的对话框。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T20:46:47.793

基本上你所说的是，如果事件来自按钮并且事件来自复选框，则显示一条消息。

这是不可能的，因为一个事件不能同时由一个按钮和一个复选框触发。您不能同时单击两者。