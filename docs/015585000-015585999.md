# StackOverflow 问答 15585000-15585999

# iphone - ECSlidingViewController，从firsttopview开始向右滑动

> ID：15585001
> 
> 赞同：0
> 
> 时间：2013-03-23T08:57:51.293
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uistoryboard

我正在使用[https://github.com/edgecase/ECSlidingViewController](https://github.com/edgecase/ECSlidingViewController)。而且效果很好。现在我想从启动应用程序时稍微向右滑动的 FirstTopView 开始。

[这是一张我希望它如何开始的图片。](http://oi49.tinypic.com/2hd2tlk.jpg)

如果我使用，在 viewWillAppear 或 viewDidLoad (FirstTopViewController) 中：

```
[self.slidingViewController anchorTopViewTo:ECRight animations:nil onComplete:nil]; 
```

它会将 FirstTopView 动画化到右侧，但我希望它立即出现。

谢谢先进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:31:47.133

尝试将其放入 viewWillAppear

# html - 使用 CSS 在模式中显示树

> ID：15585003
> 
> 赞同：0
> 
> 时间：2013-03-23T08:58:14.063
> 
> 标签：html, css

首先，对不起我的英语，它并不完美。我有一个在 ul 列表中排序的树，像这样（它是动态的）：

```
<ul>
    <li>
        Level 1
            <ul>
                <li>Item level 2</li>
            </ul>
    </li>
</ul>
<ul>
    <li>
        Level 1
            <ul>
                <li>
                    Item level 2
                        <ul>
                            <li>Item level 3</li>
                            <li>Item level 3</li>
                        </ul>
                </li>
                <li>
                    Item level 2
                </li>
                <li>
                    Item level 2
                </li>
            </ul>
    </li>
</ul> 
```

这是我想要的结果：

[http://oi48.tinypic.com/dpgt4p.jpg](http://oi48.tinypic.com/dpgt4p.jpg)

我想加入每个父亲与儿子的行列。我知道如何使用 display:table、display:cell 等正确显示每个 div...但我不知道如何使用 css 绘制这些线条以加入 div。

请问有人有什么想法或建议吗？我想将 HTML + CSS 或任何解决方案与 Javascript 结合起来。

你以前见过这样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:16:34.517

您可以使用[jsPlumb](http://jsplumbtoolkit.com/jquery/demo.html)作为 jQuery 的附加组件。它将允许您将元素组合在一起，或者为了更简单的解决方案，请查看[raphaels example](http://raphaeljs.com/graffle.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:43:55.507

这是仅 CSS 的方法。这不是一个完全有效的示例，但也许它可以帮助您进入正确的方向。

我使用此背景图像来连接项目：![](../Images/7f29307c28c9633b3de17ef8049ba22a.png)这必须改进，因为它仅在兄弟元素上有多个子元素时不起作用。

**CSS**

```
ul {
    position: relative;
    width: 100px;
    left: 115px;
}

ul > li {
    position: relative;
}

ul > li > ul {
    margin-top: -18px;
}

ul > li > ul > li:before {
    content: '';
    position: absolute;
    top: 5px;
    left: -31px;
    width: 30px;
    height: 5px;
    background: transparent url(http://i.stack.imgur.com/l2mLf.png) no-repeat 0 -10px;
}

ul > li > ul > li:first-child:before {
    top: 10px;
    left: -21px;
    width: 20px;
    height: 1px;
    background: transparent url(http://i.stack.imgur.com/l2mLf.png) no-repeat 0 0;
} 
```

**演示**

[尝试一下](http://jsfiddle.net/B85SP/)

# html - HTML/CSS/Java -- 尝试在自定义主题下显示：无页面元素

> ID：15585004
> 
> 赞同：0
> 
> 时间：2013-03-23T08:58:18.887
> 
> 标签：html, css

我不会问这个，但我真的没有其他选择，因为我根本无法让它工作，而且技术支持也无济于事！我敢肯定这是我在这里想念的一件非常简单的事情。

我在 Wikispaces.com 上建立了一个网站，并决定将其作为一个投资组合网站，因为我已经为一项服务付费了，所以在网站的自定义主题部分，我掩盖了所有编辑/wiki 内容的人不是使用其主题的 Wikispaces.com 的成员。**除了让我撞墙的连接栏之外，我几乎可以删除所有内容。**

有问题的代码。

```
<body>...
/*-------- Code in question--------*/
   <WikiIsNotSpaceMember>
      .rbMain .rbC .contentBox .innerContentBox .MenuBar .PageTitle {display:none;}
      .rbMain .rbC .contentBox .innerContentBox .MenuBar .Star {display:none;}
      .rbMain .rbC .contentBox .innerContentBox .MenuBar .ButtonPosition .Buttons.MoreMenuActive .Button.tipme.ButtonMiddle {display:none;}
      .rbMain .rbC .contentBox .innerContentBox .MenuBar .ButtonPosition .Buttons.MoreMenuActive .Button.tipme.ButtonMiddle {display:none;}
      .rbMain .rbC .contentBox .innerContentBox .MenuBar .ButtonPosition {display:none;}
      </WikiIsNotSpaceMember> 
```

我使用它为非会员删除了 Wikispaces 上的所有 UI 元素，使用他们在网站帮助页面上的不那么经常更新的自定义代码列表，他们的技术支持拒绝帮助我，因为他们不知道如何去掉它。问题是我在 HTML/CSS 方面完全密集，在 Web 开发方面基本上是 0 经验。我只在 Java/Processing/MEL 中工作，主要是作为一种爱好。

我正在使用 Chrome 的 Inspect Element 来执行此操作……但由于某种原因，我尝试的任何操作都无法在横幅上起作用。

**Chrome 上的 Elements 图像：http: [//i.imgur.com/IWVPtQN.jpg](http://i.imgur.com/IWVPtQN.jpg)**

就像我说的那样，我对语言非常不熟悉，而且我模糊地理解了 class 和 div id 之间的区别。**我想删除位于 div id="WikispacesBanner" class="BannerDisplayed" 下的 biege 栏以及要求人们立即加入的相关文本。**尝试组合 .BannerDisplayed .WikispacesBanner .WikispacesWrapper 都无济于事了大约一个小时。

谢谢！

```
**Edit: Question Answered!**

<WikiIsNotSpaceMember>
    #WikispacesBanner.BannerDisplayed {
        display: none !important;
    }
</WikiIsNotSpaceMember> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:04:33.247

尝试

```
#WikispacesBanner.BannerDisplayed {
    display: none !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:02:39.847

试试这个

```
#WikispacesWrapper #WikispacesBanner.BannerDisplayed{
   display: none; 
} 
```

# tibco - 如何在 Tibco BW 工作流程过程中插入手动活动

> ID：15585005
> 
> 赞同：0
> 
> 时间：2013-03-23T08:58:48.737
> 
> 标签：tibco

我正在使用 Tibco Designer 设计一个简单的业务流程。基本上，就像

通过 JMS 接收 xml 数据 --> 从 xml 中提取某些数据并修改它 --> 发回修改后的 xml

所以我的问题是，我应该选择 Palettes 中的哪个活动来实施手动任务？

例如：

```
original.xml
<xml>
<sender>Jason</sender>
<message>I am hungry</message>
</xml>

modified.xml
<xml>
<sender>Jason</sender>
<message>I am hungry</message>
<modifiedMessage>I am so hungry!!!!!<modifiedMessage>
</xml> 
```

所以我想从 original.xml 中提取并可能在屏幕上显示它，然后要求用户输入修改后的消息。用户输入消息后，我们将其添加为另一个元素并将修改后的.xml 发送到其他目的地。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:20:41.950

Well, TIBCO BusinessWorks (as well as TIBCO Designer which is just a modeler for business processes) is not made for that kind of using - human interaction between process steps (activities). You probably need some kind of BPM tool with rich GUI forms and all other fancy stuffs.

With TIBCO BW you can receive JMS message using "JMS Queue Receiver" but you have to know XML schema for that JMS message. After that, you can 'extract' some data from it with for e.g. "Mapper" activity and after that you can send message back to the same queue with "Reply to JMS Message" activity.

# cmake - 从父目录 cmake 添加可执行文件

> ID：15585007
> 
> 赞同：2
> 
> 时间：2013-03-23T08:59:09.397
> 
> 标签：cmake

我正在尝试在子目录中编译可执行文件以`project/model/tests`进行测试，并且需要链接我的模型文件，这些文件位于`project/model`. 但是，我无法让它工作。我已成功添加父目录，但 cmake 一直告诉我找不到父目录中的 foo.cpp 的源文件，而当前目录中的 bar.cpp 已正确添加。

```
cmake_minimum_required(VERSION 2.6)

# get parent directory
get_filename_component(MODEL_DIR ${CMAKE_CURRENT_SOURCE_DIR} PATH)

# Locate GTest
find_package(GTest REQUIRED)
# Add parent directory
include_directories(${GTEST_INCLUDE_DIRS} ${MODEL_DIR})
link_directories(${MODEL_DIR})

# all included directories are printed out correctly
get_property(dirs DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR} PROPERTY INCLUDE_DIRECTORIES)
foreach(dir ${dirs})
  message(STATUS "dir='${dir}'")
endforeach()

# foo.cpp, which is in the parent directory is not found 
add_executable(runTests foo.cpp bar.cpp)

target_link_libraries(runTests ${GTEST_LIBRARIES} pthread) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T09:24:15.520

`add_executable()`当和中列出的文件`add_library()`作为相对路径给出时（它们几乎总是如此），它们被解释为相对于`CMAKE_CURRENT_SOURCE_DIR`. 换句话说，您必须执行以下操作之一：

```
add_executable(runTests ../foo.cpp bar.cpp) 
```

或者：

```
add_executable(runTests ${MODEL_DIR}/foo.cpp bar.cpp) 
```

旁注：使用它几乎从来都不是一个好主意`link_directories()`；该命令通常比它的价值更麻烦。`target_link_libraries()`首选的替代方法是在必要的地方提供完整的路径。

# c - C 中的字符串问题：不等类型的操作数、char[255] 和 char*

> ID：15585010
> 
> 赞同：2
> 
> 时间：2013-03-23T08:59:50.727
> 
> 标签：c, string

当我尝试编译我的代码时，出现以下错误：

```
error #2168: Operands of '=' have incompatible types 'char [255]' and 'char *'.
error #2088: Lvalue required. 
```

我在同一行（即 1044）和多行上得到这些错误，所以我想通过修复一个我可以修复其他的，所以让我复制你的代码。您可以跳过并只阅读注释以 ** 开头的行，以使其更容易:) 并以 <-- 我希望代码中的注释为您提供良好的服务：首先让我从定义类型 PRINTOPT 开始

```
typedef struct {
    //UsePl signifies if the user would like to see the graphs without having to export data
    //Thanks to PlPlot library. 
    int usePl;

    //Feel free to customize and add to this struct
    //for any simulation program you create.
    //---- Note2self: probably change the graph bool to an array,
    //as later you will have to print around 20 graphs or so

    int thetaGraph;     //Plot Theta VS Time
    int omegaGraph;     //Plot Omega VS Time

    char filename[255]; //**I have declared it to be a 255 char. <============
    int matlab;     //0 no, not 0 yes;
} PRINTOPT; 
```

引发错误的函数 int ReadPrintOpt(PRINTOPT *opt) { int input;

```
 int usePl;
    int thetaGraph;     
    int omegaGraph;

    //**The result behind this def, i would like the user to input a filename
    //To save his data in,  <========================================================
    char filename[255] = "Osc Motion and Chaos- Results"; //I have declared filename as char [255]

    int matlab;
    printf("\n----Print Options----\n");
    printf("\nMENU (choose one of the following commands)\n");
    printf("\n\t 1 - Display Graphs after Simulation\t\t\tCurrent Val\t\"%d\"",opt->usePl);
    printf("\n\t 2 - Enable Theta vs Time Graph\t\tCurrent Val\t\"%d\"",opt->thetaGraph);
    printf("\n\t 3 - Enable Omega vs Time Graph\t\tCurrent Val\t\"%d\"",opt->omegaGraph);
    printf("\n\t 4 - Save Data in Matlab Format\t\tCurrent Val\t%d",opt->matlab);
    printf("\n\t 5 - Filename for exported files\t\tCurrent Val\t%s",opt->filename);
    printf("\n\n\t 0 - <DONE>\n>>");
    scanf("%d",&input);

    switch(input) {
        case 0: 
            return 0;
        case 5:
            printf("Enter Filename: ");     
            fgets(filename, 255, stdin);    //**i've been told to use this, saw it on another question
            opt->filename = filename;   //**In this part, opt is of type PRINTOPT
            //I have been told that the name of an array, is actually 
            //a pointer to the first element, so why does this part 
            //give me this error -- Operands of '=' have incompatible types 'char[255] and [char*]
            //although i've declared both as char[255]; 
            break;
        case 4:
            printf("Enable Matlab (0 no, else yes): ");
            scanf("%d",&matlab);
            opt->matlab = matlab;
            break;
        case 1:
            printf("Use this program to display plots (0 no, else yes): ");
            scanf("%d",&usePl);
            opt->usePl = usePl;
            break;
        case 2:
            printf("Record Data for Graph of Theta (0 no, else yes): ");
            scanf("%d",&thetaGraph);
            opt->thetaGraph = thetaGraph;
            break;
        case 3:
            printf("Record Data for Graph of Omega (0 no, else yes): ");
            scanf("%d",&omegaGraph);
            opt->omegaGraph = omegaGraph;
            break;
        default:
            printf("Invalid Input!");
            break;
    }
    return 1;
} 
```

无论如何，我相信我已经将两个文件名都声明为 255 字符，.. 编译器不会出错.. 所以我认为是我 :) 我哪里出错了？这个想法是我有一个函数可以创建对参数的扫描，例如驱动力..我需要模拟来转储该数据的文件：- results1.txt - results2.txt - results3.txt

这引发了另一个问题，但我肯定会找到答案，谷歌......我如何在 c 中从 int 转换为 char。可能是简单的铸造？

再次感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T09:03:34.100

当数组标识符不用作`sizeof`或`_Alignof`一元运算`&`符时，将衰减为指针，并且*不是*左值。这意味着您不能像在此行中那样`opt->filename`使用运算符进行分配：`=`

```
opt->filename = filename; 
```

我可以看到两种解决方案。

*   定义`opt->filename`为`char *`。请注意，`opt->filename`在`filename`. 否则，行为未定义。
*   定义`opt->filaname`为`char[256]`并使用`strcpy`(from `<string.h>`)。

例如：

```
#include <string.h>

strcpy(opt->filename, filename); 
```

一些参考资料：

*   数组和左值：

> ### C11 (n1570)，第 6.3.2.1 节左值、数组和函数指示符
> 
> 除非它是运算`sizeof`符、运算符`_Alignof`或一元`&`运算符的操作数，或者是用于初始化数组的字符串文字，否则类型为 ''array of type'' 的表达式将转换为类型为 '' 的表达式指向 type'' 的指针，它指向数组对象的初始元素并且**不是左值**。

*   赋值运算符：

> ### C11 (n1570), § 6.5.16 赋值运算符
> 
> 赋值运算符**应具有可修改的左值**作为其左操作数。

# python - 将列读取为列表

> ID：15585011
> 
> 赞同：4
> 
> 时间：2013-03-23T08:59:55.923
> 
> 标签：python, csv

我在表单中的 txt 文件中有数据。制表符分隔的数据

```
here
     a b c
     e f g
tere
     x y z
     w t y 
```

我需要将列读入列表。像

```
col1 = ['here', '', '', tere, '', '']
col2= ['', 'a', 'e', '', 'x'.'w'] 
```

等等。

我用过

```
import re

infile = open('text.txt', 'r')
i=0
a0='';a1='';a2='';a3='';a4='';a5='';a6='';a7='';
for line in infile:
    [a1[i],a2[i],a3[i],a4[i],a5[i],a6[i],a7[i],a8[i]] = line.split('\t')
    i+=1 
```

它说'str'对象不支持项目分配。

有小费吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T09:04:30.370

如果您希望将所有数据分配给*每列*的变量，请从列表开始：

```
per_row = []
for line in infile:
    per_row.append(line.strip().split('\t')) 
```

然后才把它变成一个*列*列表：

```
per_column = zip(*per_row) 
```

现在这是一个列表列表；`per_column[0]`是第一列数据。

不过，您确实想使用该[`csv`模块](http://docs.python.org/2/library/csv.html)来读取表格数据。

不幸的是，您的代码与工作 Python 还不够接近。您为几个变量分配了空字符串，然后尝试将它们用作列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T09:37:01.990

更正@Martijn Pieters 答案

应该是这样的

```
per_row = []
for line in infile:
    per_row.append(line.split('\t')) 
```

然后才把它变成一个列列表：

```
per_column = zip(*per_row) 
```

现在这是一个列表列表；`per_column[0]`是第一列数据。

这给出了我想要的结果。`strip()`也删除空白单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T09:07:13.817

这里，

```
a0='';a1='';a2='';a3='';a4='';a5='';a6='';a7=''; 
```

一旦将变量声明为空字符串，就不能单独（逐个字符地）更改字符串，因为它们是不可变的字符串。

```
[a1[i],a2[i],a3[i],a4[i],a5[i],a6[i],a7[i],a8[i]] = line.split('\t') 
```

因此，您可以使用字符串列表而不是字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T10:09:13.210

该`csv`模块通常也是处理制表符分隔文件的最佳方式：

```
from __future__ import print_function

import csv

MAXCOLS = 4
cols = [[] for _ in xrange(MAXCOLS)]
with open('text.txt', 'rb') as input:
    for row in csv.reader(input, delimiter='\t'):
        for i in xrange(MAXCOLS):
            cols[i].append(row[i] if i < len(row) else '')

for i in xrange(MAXCOLS):
    print('cols[{}]: {}'.format(i, cols[i])) 
```

输出：

```
cols[0]: ['here', '', '', 'tere', '', '']
cols[1]: ['', 'a', 'e', '', 'x', 'w']
cols[2]: ['', 'b', 'f', '', 'y', 't']
cols[3]: ['', 'c', 'g', '', 'z', 'y'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-09T17:55:17.297

```
import csv

## open file
infile = open('col2Rows.txt', 'r')

## define csv reader object, assuming delimiter is tab
tsvfile = csv.reader(infile, delimiter='\t')

lines = []

## iterate through lines in file
for line in tsvfile:
    lines.append(line)

print "Col1",[line[0] for line in lines] 
```

就像 Martijn Pieters 所说，csv 模块非常方便。只要确保你没有用完内存（即输入文件不应该太大。）

# android-layout - 收到长按/点击android中的线性布局？

> ID：15585013
> 
> 赞同：6
> 
> 时间：2013-03-23T09:00:44.930
> 
> 标签：android-layout, android-widget, android-linearlayout, onlongclicklistener, long-click

我对 android 很陌生，而且我碰壁了。

我正在尝试让线性布局更像一个按钮，按下和长按不同的动作 - 原因是我可以在每个“按钮”上有 2 个不同格式的文本标签。类似于以下内容：

```
-------------------------
|          2nd          |  <- Label for long press (regular/smaller type)
|           =           |  <- Label for regular press (bold/larger type)
------------------------- 
```

我发现的帖子解释了如何在线性布局上接收常规点击（我在布局 XML 中使用 onClick 属性）。但是长按我没有运气。我尝试为 xml 定义一个新的 onLongClick 属性，如 Aleksander Gralak 的回答中所述：[Long press definition at XML layout, like android:onClick does](https://stackoverflow.com/questions/5706038/long-press-definition-at-xml-layout-like-androidonclick-does)。但是没有这样的运气 - 它看起来像是用于文本视图，我尝试将其更改为线性布局但惨遭失败。

这是有问题的对象：`Main.xml`

```
<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:clickable="true"
    android:focusable="true"
    android:background="@drawable/darkgrey_button"
    android:onClick="equals" android:longClickable="true" android:id="equalsbutton"
    android:focusableInTouchMode="false">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="2nd"
        android:id="@+id/textView"
        android:duplicateParentState="true"/>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=" = "
        android:id="@+id/textView1"
        android:duplicateParentState="true"/>
</LinearLayout> 
```

和`Main.java`

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

public void equals(View view) {
    Context context = getApplicationContext();
    CharSequence text = "Hello toast!";
    int duration = Toast.LENGTH_SHORT;

    Toast toast = Toast.makeText(context, text, duration);
    toast.show();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T07:01:07.003

`id`在您的布局中添加一个。

```
<LinearLayout
    android:id="@+id/my_button_layout"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    … > 
```

在你的`Main.java`

获取对您的引用`LinearLayout`并设置一个`OnLongClickListener`.

```
LinearLayout buttonLayout = (LinearLayout) findViewById(R.id.my_button_layout);
…
buttonLayout.setOnLongClickListener(new OnLongClickListener() {

    @Override
    public boolean onLongClick(View v) {
          Toast.makeText(Main.this, "Long click!", Toast.LENGTH_SHORT).show();
          return true;
    }

}); 
```

# c - c、二维字符数组和fopen

> ID：15585014
> 
> 赞同：1
> 
> 时间：2013-03-23T09:01:13.293
> 
> 标签：c, arrays, file, pointers, fopen

我正在尝试制作一个程序来读取带有名称列表的文件。这些名称的数量以及名称的长度可能会有所不同。我想将它们存储在 char 数组的数组中，并将每一行作为字符串读取，以便稍后打开与相关名称对应的文件。但是当我尝试打开第一个文件时，打开文件时出错。我完全没有想法。请帮忙？

这是与此操作相关的代码：

```
#include <stdio.h> 
#include <stdlib.h>
#include <math.h>
#include <string.h>
int glimps(char *fname);
int write_av(char *fname, int NumbFiles);
int clr(char *fname);
int readFile(char *fname, int i);

double *dalpha, *alpha, *Ln_t, *LnLnA, Conc;
long *time, *weights, *Lmax, Nmax;
char *av_file, **in_files, *antetka;

/****************************************************************************/

int main(int argc, char *farg[])
{
 int i, NumbFiles, flag;
 long row;
 char *a1;
 FILE *fp;

 av_file = farg[1];
 printf("av_file = %s\n",av_file);
 NumbFiles = glimps(av_file);

 in_files = (char **) malloc (sizeof(char *) * NumbFiles);
 for (i=0 ; i<NumbFiles ; i++) 
      in_files[i] = (char *) malloc (sizeof(char) * 200);

 Lmax = (long *) calloc((size_t) NumbFiles, sizeof(long));
 if((in_files == NULL)||(Lmax==NULL))  printf("Грешка при read алок.\n, "), exit(-1);     
 if (flag = readFile(av_file, -1)) 
     printf("Error in read av_file %s\n", av_file), exit(-1);
 weights = (long *) calloc((size_t) Nmax, sizeof(long));
 for(i = 0; i<Nmax; i++) weights = 0;
 for(i = 0; i<NumbFiles; i++)
 {
       //if (flag = readFile(&(*in_files[i]), i)) 
       if (flag = readFile(in_files[i], i))
           printf("Error in in_files[%d], %s\n",i, &(*in_files[i])), exit(-1);     
 }
 if (flag = write_av(av_file, NumbFiles)) 
     printf("Error in write_av(%s)\n,", av_file), exit(-1);      
 exit(0);
}

/****************************************************************************/

int glimps(char *fname)
{
 FILE *fp;
 char buf[140];
 int cnt=0;

 fp = fopen (fname, "r");
 while (fgets(buf,140,fp) )
 {
        cnt++;
 }
 fclose(fp);
 return (cnt);
}
/****************************************************************************/

int readFile(char *fname, int k)
{
 int cnt=0;
 FILE *fp;
 char buf[200], dummy[13];

 printf("fname is %s\n", fname); getchar();
 fp = fopen (fname, "r");
 if(fp==(NULL)) return(-1);
 if(!strcmp(fname,av_file) )
 {
    while (fgets(in_files[cnt++],200,fp) );
 }
 else
 {
    printf("read TUK!\n"); getchar();

    fgets(buf,200,fp);
    sscanf(buf,"%s %s %s %s %s %s %s %ld %s %s %lf\n", 
                dummy, dummy,dummy,dummy,dummy,dummy,dummy, &Lmax[k], 
                dummy, dummy, &Conc);           
    fgets(buf,200,fp);
    sscanf(buf,"%s\n", antetka);        
    printf("read TUK!\n"); getchar();
    while (fgets(buf,200,fp))
    {
           sscanf(buf,"%ld %lf %lf %s %lf %lf\n", 
                  &time[cnt], &dalpha[cnt], &alpha[cnt], dummy, &Ln_t[cnt], 
                  &LnLnA[cnt]);
           weights[cnt++]++;
    }

 }
 fclose(fp);
 return (0);
}

... 
```

控制台输出：

```
> ./avr alpha_cubeL.C0.010
av_file = alpha_cubeL.C0.010
fname is alpha_cubeL.C0.010
fname is alpha_cubeL100C0.010
Error in read in_files[0], alpha_cubeL100C0.010

> ls alpha_cubeL100C0.010
alpha_cubeL100C0.010 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:40:08.400

发生的情况是，在*readFile*函数中，您读取了作为参数给出的主文件，以使（从内容）中的多个文件名`in_files[i]`，但*fgets*读取包括 CR 或 CRLF 的行（即行尾字符）。因此，稍后在程序中，*readFile*在尝试打开*文件名*+ *CR* [ *LF* ] 时失败。

您可以在程序顶部附近添加一个*修剪功能，例如*

```
void trim(char *s) {
  int i,l = strlen(s);
  for (i=l-1 ; i>=0 && (s[i]==10 || s[i]==13) ; i--) s[i] = 0;
} 
```

删除结束字符串*s 的*CR 和/或 LF，然后更改*readFile*函数以*修剪*在每一行中读取的文件名，例如

```
 while (fgets(in_files[cnt++],200,fp) ) {
    trim(in_files[cnt-1]); // cnt-1, or do the cnt++ here (and not above...)
  } 
```

然后可以打开文件...

（这可能不是这个程序中唯一的问题，但这是一个好的开始）

# wcf - 除非 fiddler 正在运行，否则无法使用 oob 连接到 wcf 服务

> ID：15585016
> 
> 赞同：0
> 
> 时间：2013-03-23T09:01:23.983
> 
> 标签：wcf, silverlight, fiddler

我有一个 silverlight 应用程序，该应用程序通过 wcf (SSL/https) 连接到托管在 iis 上的公共服务。如果我在浏览器中启动应用程序，一切正常。一旦我以“退出浏览器模式”启动应用程序，它就不再工作了。我试图找出提琴手的问题，但只要提琴手正在运行，一切正常。我在互联网上找到了很多关于此的帖子，但没有任何效果。有什么想法吗？fiddler 到底做了什么并让它在 oob 中运行？

摘要： 1.“在浏览器中”一切正常 2.运行“浏览器外”时没有连接到公共服务 3.只要 Fiddler 运行，它就会运行“浏览器外”

以下是我如何进行连接的一些信息。

非常感谢您的帮助。

最好的祝福。马克

以下是我如何做所有事情的一些信息：

自签名证书是否可能与所有人有关？

客户端与公共服务的连接如下所示：

```
 PublicServiceClient proxy;
    BinaryMessageEncodingBindingElement binaryMessageEncodingBindingElement = new     BinaryMessageEncodingBindingElement();
    HttpsTransportBindingElement httpsTransportBindingElement = new HttpsTransportBindingElement();
    httpsTransportBindingElement.MaxBufferSize = int.MaxValue;
    httpsTransportBindingElement.MaxReceivedMessageSize = int.MaxValue;
    httpsTransportBindingElement.TransferMode = TransferMode.Buffered;
    Binding binding = new CustomBinding(binaryMessageEncodingBindingElement,     httpsTransportBindingElement);
    binding.SendTimeout = new TimeSpan(0, 0, _WcfTimeout);
    binding.ReceiveTimeout = new TimeSpan(0, 0, _WcfTimeout);
    binding.OpenTimeout = new TimeSpan(0, 0, _WcfTimeout);
    binding.CloseTimeout = new TimeSpan(0, 0, _WcfTimeout);
    proxy = new PublicServiceClient(binding, new EndpointAddress("https://" +     App.CurrentParameter.WcfDomain + "/PublicService.svc")); 
```

绑定服务器端（web.config）：

```
 <binding name="Web.PublicService.customBinding0" sendTimeout="00:01:00" receiveTimeout="00:01:00" openTimeout="00:01:00" closeTimeout="00:01:00">
    <binaryMessageEncoding maxReadPoolSize="2147483647" maxWritePoolSize="2147483647">
    <readerQuotas maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxDepth="2147483647" maxNameTableCharCount="2147483647" maxStringContentLength="2147483647"/>
    </binaryMessageEncoding>
    <httpsTransport maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" keepAliveEnabled="false"/>
    </binding> 
```

服务服务器端（web.config）：

```
 <service name="Web.PublicService">
    <endpoint address="" binding="customBinding"    bindingConfiguration="Web.PublicService.customBinding0" contract="Web.PublicService"/>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
    </service> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:03:21.203

如果您在 Fiddler 中禁用 HTTPS 解密（并重新启动它）并且应用程序停止通过 Fiddler 运行，这意味着服务器上正在使用的自签名证书是问题所在，您需要通过信任该证书来修复它。

如果在 Fiddler 中禁用 HTTPS 解密没有影响，则问题可能与安全区域设置有关。有关原因的详细信息，请参阅[http://blogs.msdn.com/b/fiddler/archive/2010/11/22/fiddler-and-silverlight-cross-zone-cross-domain-requests.aspx](http://blogs.msdn.com/b/fiddler/archive/2010/11/22/fiddler-and-silverlight-cross-zone-cross-domain-requests.aspx)。

# java - 手动构建和运行 Eclipse 项目

> ID：15585021
> 
> 赞同：2
> 
> 时间：2013-03-23T09:02:00.377
> 
> 标签：java, eclipse, build

我在 Eclipse 中做一个 Java 项目，我想知道如何手动编译这些文件。现在，Eclipse 完成了构建和运行部分，我想手动完成，因为我们只需要提交 .java 文件。现在，我知道我们必须使用`javac`and`java`命令，但这些会引发 Java 异常。所以，这就是我所拥有的：

假设 Eclipse 项目被命名为 Prj1。所以根目录是Prj1。这有 4 个文件夹，`.settings`、和。还有 3 个文件名为,和. 我在这个根文件夹中还有一个文本文件，由我的 java 程序读取（不是作为输入，而是在执行中间的某个地方，打开文件并读取其内容）。该文件夹在一个包中有 5 个类文件。也就是说，该文件夹有一个名为的文件夹，其中有5个类文件。`bin``doc``src``.classpath``.project``javadoc.xml``a.txt``src``src``package1`

那么，我应该如何使用命令从终端构建它，`javac`我应该在哪个文件夹中？此外，将在哪里生成 bin 文件，我应该将`a.txt`在运行时读取的文本文件放在哪里？我无法独自完成。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T09:04:02.143

听起来您应该“进入”`src`文件夹并使用以下命令对其进行编译：

```
javac -d ../bin package1/*.java 
```

该`-d`参数指定类的*根*输出目录 - 编译器将根据源文件中的包创建目录层次结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T09:26:32.243

您可以使用[maven](http://maven.apache.org/)作为构建工具。m2e[插件](http://eclipse.org/m2e/)提供了简单的 eclipse 集成。然后，您可以从 eclipse 创建一个新的 maven 项目，或者从命令行创建它并将其作为 maven 项目导入到您的 eclipse 工作区中。

Maven 也会让你的依赖管理更容易。

当然还有替代的构建工具，比如[ant](http://ant.apache.org/)或[gradle](http://www.gradle.org/)

更新：关于文本文件：您可以将其视为类路径资源。在 Eclipse 中，它位于源文件夹中。例如，将其命名为“资源”。从您的代码中引用它

```
InputStream stream = Main.class.getResourceAsStream("/a.txt"); 
```

在命令行上，只需将文本文件复制到 bin 文件夹中。

# wso2 - 混淆了 WSO2 产品之间的关系

> ID：15585025
> 
> 赞同：6
> 
> 时间：2013-03-23T09:02:50.833
> 
> 标签：wso2, esb

研究WSO2产品后，似乎得到了以下概念，都是我的理解，不知道对不对，请指教：

1.  所有产品都在 Carbon 中运行，Carbon 是 wso2 产品的“容器”，类似于在 tomcat 中运行的 JSP 之类的东西。我对吗？

2.  如果No.1是正确的，那么'Enterprise Service Bus'，'Identity Server'，'Data Service Server'，'Governance Reistry'等都在Carbon Server中运行，实际上我下载了所有产品，我发现它们都是和carbon一起发布，也就是说我可以用命令直接启动管理控制台，每个人都可以自己运行，他们有自己的管理控制台。正确的？

3.  在我阅读Carbon用户指南后，它说'wso2的所有产品都是Carbon的组件'，所以我认为'Enterprise Service Bus'，'Identity Server'，'Data Service Server'，'Governance Reistry'可以放入一个管理控制台，也就是说它们可以集成在一起，我启动Carbon服务器后，所有功能都运行在一起？

很抱歉问了这样一个愚蠢的问题，但是在阅读了很多文章之后，我仍然无法找出它们之间的结构，请指教，提前谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T10:49:11.673

WSO2 中间件产品带有一堆组件。这些基于 Java OSGi。因此，每个产品都带有一组 OSGi 包（在 OSGi 术语中）。Carbon 是每个产品通用的核心框架。这又是一堆 OSGi 组件。碳芯（也称为碳）包含一组必须有的捆绑包。日志记录、集群、安全等... Carbon 是一个单独的下载，您也可以运行它。单独运行碳本身并不是很有趣，除非您正在做一些特定的事情并且您知道自己在做什么。

现在，回到产品.. 每个产品都有碳核心加上更多的 OSGi 组件。这些附加组件反映了产品特定的功能。例如，如果您采用 ESB，它的碳核心加上其他组件使其成为“ESB”。对于其他产品也是如此。

您可以使用碳服务器并安装所有这些附加功能。功能安装是通过 Eclipse 用于安装插件的相同技术完成的。因为一切都是 OSGi 包，所以必须有一个 OSGi 容器来运行所有这些。Carbon 运行在 Equinox OSGi 容器之上。

所以 Tomcat 也是一个单独的 OSGi 包。您可以将这些组件安装到任何正在运行的 carbon server 中，并立即添加 webapp 托管功能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-23T10:48:07.960

1.  是的。所有 WSO2 产品都在 WSO2 Carbon 中运行，它主要是一个基于 OSGi 的框架。

2.  是的。WSO2 产品（例如 ESB）是一个专门的 Carbon 框架。管理控制台是 Carbon 的一部分，您可以在其中为产品安装外部功能/卸载产品中的现有功能以自定义产品。

3.  理论上是的。如果在 WSO2 的所有组件中正确实现了 Carbon 概念，那么它们（如您所说的 ESB、IS、DSS）应该可以使用 WSO2 功能管理器毫无问题地安装在单个 Carbon 服务器中。但是由于一些依赖冲突和版本冲突，有时如果你尝试这样做可能是不可能的。但是，如果您愿意，您仍然可以在代码级别解决这些 OSGi 冲突并使其兼容。

实际上所有的 WSO2 产品已经在它们的产品之间无缝地共享 WSO2 组件。在某些情况下，我们建议在单个 Carbon 服务器中安装多个产品。例如，当用户希望将 CEP 用作 BAM 的实时数据处理解决方案时，要求在 BAM 产品中安装 CEP 功能。对于大多数其他产品组合，我们尚未很好地测试，因此可能会发生冲突。这就是为什么我说这个理论。

# php - mysql中不需要的SHOW COLUMNS查询

> ID：15585028
> 
> 赞同：1
> 
> 时间：2013-03-23T09:03:28.147
> 
> 标签：php, mysql, cakephp-1.3

这个问题我以前问过，但我找不到。

![在此处输入图像描述](../Images/1a6cef6855ff34265c95a9609fc002a7.png)

正如您在上图中看到的那样，很少有`SHOW COLUMNS`查询被触发，默认情况下由`cakephp`.

那么有没有办法删除它或者是否有必要`cakephp.`？

**或者**

cakephp`debug`设置为`2`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:20:20.910

您所看到的是 CakePHP 正在“检查”您的数据库表的结构（“模式”）。CakePHP 使用这些信息来*“知道”*每个表中存在什么字段以及它是什么*类型的字段*，例如，它可以自动生成正确类型的输入字段`FormHelper`

通常，这些信息将被缓存，因此这些查询只需执行一次。

但是，*因为您启用了“调试”模式，CakePHP 将更频繁地检索此信息以发现在开发过程中数据库结构中所做的更改。*

在调试模式下，缓存将在 10 秒后失效，导致这些查询出现。*（在实时网站上不*启用调试的一个重要原因，因为这显然会影响性能）

希望这能解释查询

# ruby-on-rails - 在 ActiveAdmin 过滤器中自定义模型名称

> ID：15585030
> 
> 赞同：1
> 
> 时间：2013-03-23T09:04:02.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

如何在此处自定义 ActiveAdmin 过滤器中的模型名称？![在此处输入图像描述](../Images/03b9fbffefa328960da3896cc523804c.png)

这种方式行不通：

```
activerecord:
  models:
    category:
      one: "категория"
      other: 'категории' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:28:24.417

```
filter :title, :label => "Change me"
filter :description, :label => "Change Me"
filter :user, :label => "Change Me" 
```

![在此处输入图像描述](../Images/6a7d56a433670b0f1a24d52edfdfadc9.png)

`I18n.t`如果你愿意，你也可以使用

```
 filter :title, :label => (I18n.t "some.key.here") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:37:12.650

ActiveAdmin 使用 metasearh ，所以下一条规则对我有用。（目标 - 父模型，rateplan - 嵌套模型）示例：

```
en:
  activerecord:
    attributes:
      destination:
       rateplan: "RATEPLAN LOCALIZED NAME" 
```

更多信息：[https ://github.com/ernie/meta_search#localization](https://github.com/ernie/meta_search#localization)

UPD。

另一种解决方案是使用强化规则进行内化

```
en:
  formtastic:
    labels:
      rateplan: "RATEPLAN LOCAIZED" 
```

更多信息：[https ://github.com/justinfrench/formtastic#internationalization-i18n](https://github.com/justinfrench/formtastic#internationalization-i18n)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-28T08:37:33.613

Active Admin 使用[formtastic](https://github.com/justinfrench/formtastic)来呈现过滤器，就像表单字段一样。因此，您可以根据需要自定义过滤器，因为 formtastic'c 自定义选项非常方便。例如。更改过滤器标签：只需`label: 'YOUR CUSTOM LABEL'`在过滤器方法中使用选项。您也可以在那里使用翻译

# node.js - zeromq epgm 发布/订阅不工作

> ID：15585037
> 
> 赞同：4
> 
> 时间：2013-03-23T09:04:52.847
> 
> 标签：node.js, zeromq, multicast, pgm-protocol

我正在使用 node.js 示例。我已经在我的 ubuntu 12.10 机器上安装了 openpgm 和 zeromq 3.2。这是代码：

```
var zmq = require('zmq')
  , port = 'epgm://eth0;239.192.1.1:5555';

  var socket = zmq.socket('pub');

  socket.identity = 'publisher' + process.pid;

  var stocks = ['AAPL', 'GOOG', 'YHOO', 'MSFT', 'INTC'];

  socket.bind(port, function(err) {
    if (err) throw err;
    console.log('bound!');

    setInterval(function() {
      var symbol = stocks[Math.floor(Math.random()*stocks.length)]
        , value = Math.random()*1000;

      console.log(socket.identity + ': sent ' + symbol + ' ' + value);
      socket.send(symbol + ' ' + value);
    }, 1000);
  }); 
```

和另一个应用程序：

> var zmq = require('zmq') ，端口 = 'epgm://eth0;239.192.1.1:5555';
> 
> var socket = zmq.socket('sub');
> 
> socket.identity = '订阅者' + process.pid;
> 
> socket.connect(端口);
> 
> socket.subscribe('AAPL'); socket.subscribe('GOOG');
> 
> console.log('已连接！');
> 
> socket.on('message', function(data) { console.log(socket.identity + ': 接收到的数据' + data.toString()); });

我不确定我是否使用了正确的多播寻址。我已经在同一台机器上尝试了这些应用程序，也在网络中的另一台机器上尝试过。我很确定我没有考虑过那部分，但我似乎在任何地方都找不到任何好的解释。但我希望这无论如何都能在同一台机器上工作。有任何想法吗？

PS：忘记解释到底发生了什么：基本上push程序只是推送所有消息而没有任何错误，而pull程序启动但没有收到任何消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:26:49.183

epgm 和 pgm 仅适用于 PUB/SUB。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T23:20:18.927

不确定这是否有帮助，但我也一直在节点中试验 zmq 并进行了一些观察：

我正在使用四台机器运行：1：OS X 10.8.3 2：虚拟机中的 Ubuntu 12.10（桥接）3：Ubuntu 12.04 独立机器
4：Ubuntu 12.04 独立机器

当我在所有机器上启动相同的测试服务器时（与上面的代码没有太大区别） 机器 1：看到来自机器 3 和 4 的更新 机器 2：看到来自 1、2、3 和 4 的更新 机器 3：看到来自 1 的更新, 3, 4 机器 4：查看来自 1、3、4 的更新

所以看起来 OS X 阻止了对自己的广播。虚拟机中的 Ubuntu 12.10 得到了所有人的支持，但发送问题（可能与在虚拟机中运行有关？）而其他机器正在得到他们自己的。

我的服务器/客户端：

```
os = require 'os'
zmq = require 'zmq'

client = zmq.socket "sub"
server = zmq.socket "pub"

client.connect "epgm://224.0.0.1:5555", (error) ->
    if error?
        console.log "client error:", error

client.subscribe ""
client.on "message", (buffer) ->
    console.log "received ping:", buffer.toString!

server.bind "epgm://224.0.0.1:5555", (error) ->
    if error?
        console.log "server error:", error
    setInterval ( -> 
        server.send "#{os.hostname!}" 
    ), 1000

process.on "SIGINIT", ->
    client.close!
    server.close!
    process.exit! 
```

# android - 微调器列表未显示我的操作栏？

> ID：15585039
> 
> 赞同：0
> 
> 时间：2013-03-23T09:05:08.297
> 
> 标签：android

```
private void setListNavigation(ActionBar bar) {
    String[] actions = new String[] {
        "Bookmark",
            "Subscribe",
            "Share"
    };
    ArrayAdapter < String > adapter = new ArrayAdapter < String > (getBaseContext(), android.R.layout.simple_spinner_dropdown_item, actions);
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    bar.setDisplayShowTitleEnabled(false); // hide application title from action bar
    bar.setBackgroundDrawable(new ColorDrawable(Color.parseColor("#dedfde")));

} 
```

当我尝试将微调器添加到我的操作栏时，它没有出现。我只得到小箭头图标。

下面是我的`onCreate()`方法

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_prime_mobile_home);               
    ActionBar bar = getActionBar();
    setListNavigation(bar);       
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T09:10:48.527

这是在操作栏中设置导航微调器的工作代码试试这个

```
arrayItemsForDropdown = getResources().getStringArray(R.array.order);
Context context = getSupportActionBar().getThemedContext();
ArrayAdapter<CharSequence> list = ArrayAdapter.createFromResource(context,R.array.order, R.layout.sherlock_spinner_item);
list.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);
getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
getSupportActionBar().setListNavigationCallbacks(list, this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T09:07:47.773

你忘了添加

> bar.setListNavigationCallbacks（适配器，这个）；

在你的`setListNavigation`

并让您的班级实现 ActionBar.OnNavigationListener

# c++ - cvBoundingRect 不工作

> ID：15585040
> 
> 赞同：0
> 
> 时间：2013-03-23T09:05:14.663
> 
> 标签：c++, opencv

我将**cvFindContours**的输出（即轮廓）传递给**cvBoundingRect**。但它给出了这个错误：

OpenCV 错误：cvBoundingRect 中的错误参数（不支持的序列类型），文件 /home/z/src/OpenCV-2.4.2/modules/imgproc/src/shapeescr.cpp，第 950 行终止在抛出 'cv:: 实例后调用异常'what（）：/home/ z/src/OpenCV-2.4.2/modules/imgproc/src/ **shapeescr.cpp**：950：错误：（-5）函数cvBoundingRect中不支持的序列类型

这是代码：

```
CvRect rect;
cvFindContours( imgB, g_storage, &contours,sizeof(CvContour),CV_RETR_LIST, CV_CHAIN_CODE,cvPoint(0,0));
if(contours)
{cvDrawContours(img_B,contours, CV_RGB(250,0,0), CV_RGB(0,0,250),1,2,8);
rect=cvBoundingRect(contours);
} 
```

请告诉我这个错误的原因可能是什么。解决办法是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:21:49.923

cvBoundingRect() 需要 1 个轮廓，您将它们全部输入其中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:17:12.880

好的，我找到了答案。下面是正确的方法：

[http://singhgaganpreet.com/tag/cvboundingrect-example/](http://singhgaganpreet.com/tag/cvboundingrect-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T14:59:25.040

从 berak 离开的地方继续，CvSeq** first_contour 是您提供的功能。

> 指针 first_contour 由函数填充。如果没有检测到轮廓（如果图像完全是黑色），它将包含指向第一个最外层轮廓的指针或 NULL。可以使用 h_next 和 v_next 链接从 first_contour 到达其他轮廓。

所以你需要这样的东西：

```
CvSeq* contour = *contours;
while (contour != NULL)
{
    //insert boundingbox and other code
    contour = contour->h_next;
} 
```

# java - 通过java编程将java keystore转换为PFX

> ID：15585047
> 
> 赞同：0
> 
> 时间：2013-03-23T09:06:49.877
> 
> 标签：java, keystore, keytool, pfx

我需要支持 Keytool.exe 的相同功能，使用 KeyTool 类通过编程将 java 密钥库转换为 PFX 文件。由于项目要求限制，我无法从我的应用程序中使用命令提示符进程，因此通过编程我也无法打开命令进程。

例如

C:\keytool -importkeystore -srckeystore .keystore -srcstoretype JKS -destkeystore thekeystore.pfx -deststoretype PKCS12

我可以使用上述命令通过 keytool.exe 创建 PFX 文件，但我的要求是通过我自己的应用程序的密钥库生成 PFX 文件。我在谷歌上搜索了很多，我找不到任何有用的链接可以提供有关此问题的任何参考或帮助。有一个类 sun.security.tools.Keytool 我也搜索了这个，但我找不到这个类的任何一般编程帮助。如果有人有任何提示或想法，请分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:43:34.017

我不知道 KeyTool 类，而且由于它不是公共 API，我不喜欢使用它，但您可以使用[KeyStore](http://docs.oracle.com/javase/7/docs/api/java/security/KeyStore.html)类自己读写密钥库。根据[文档](http://docs.oracle.com/javase/7/docs/technotes/guides/security/StandardNames.html#KeyStore)，Java 至少支持`jks`和`pkcs12`keystore 类型，因此您可以执行以下操作：

```
public void convertKeystore(Path sourceKeystorePath,
                            char[] sourceKeystorePassword,
                            Path destKeystorePath,
                            char[] destKeystorePassword)
throws GeneralSecurityException, IOException {

    KeyStore sourceKeystore = KeyStore.getInstance("jks");
    try (InputStream stream =
            new BufferedInputStream(
                Files.newInputStream(sourceKeystorePath))) {
        sourceKeystore.load(stream, sourceKeystorePassword);
    }

    KeyStore destKeystore = KeyStore.getInstance("pkcs12");
    destKeystore.load(null, destKeystorePassword);

    // Assume each alias in a keystore has the same password
    // as the keystore itself.
    KeyStore.ProtectionParameter sourceAliasPassword =
        new KeyStore.PasswordProtection(sourceKeystorePassword);
    KeyStore.ProtectionParameter destAliasPassword =
        new KeyStore.PasswordProtection(destKeystorePassword);

    Enumeration<String> aliasList = sourceKeystore.aliases();
    while (aliasList.hasMoreElements()) {
        String alias = aliasList.nextElement();
        KeyStore.Entry entry =
            sourceKeystore.getEntry(alias, sourceAliasPassword);
        destKeystore.setEntry(alias, entry, destAliasPassword);
    }

    try (OutputStream stream =
            new BufferedOutputStream(
                Files.newOutputStream(destKeystorePath))) {
        destKeystore.store(stream, destKeystorePassword);
    }
} 
```

# ios - 如何在单击 TableViewCell 中的按钮时增加标签和单元格大小。

> ID：15585053
> 
> 赞同：8
> 
> 时间：2013-03-23T09:07:16.070
> 
> 标签：ios, iphone, objective-c, uitableview

单击单元格上的 seeMoreBtn 后，我想扩大单元格大小。

标签和单元格的长度不同，但它们是标签大小的约束。

当一个状态太大时，我添加了一个seeMoreBtn，点击查看更多后剩余的文本会显示在下面，然后如何增加标签和单元格大小。

```
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
    {

        NSString *text = [items objectAtIndex:[indexPath row]];
        CGSize constraint = CGSizeMake(300.0f, 150.0f);
        CGSize size = [text sizeWithFont:[UIFont systemFontOfSize:14.0f] constrainedToSize:constraint lineBreakMode:NSLineBreakByCharWrapping];

        CGFloat height1 = MAX(size.height, 44.0f);
        return height1 + (40.0f);
        }
     - (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        NSString *CellIdentifier = [NSString stringWithFormat:@"Cell-%d",indexPath.row];

        cell=[tv dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell == nil)
        {
            cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        }

        int lbltag = 1000;

        label=[[UILabel alloc]initWithFrame:CGRectZero];
        [label setLineBreakMode:NSLineBreakByWordWrapping];
        [label setMinimumScaleFactor:14.0f];
        [label setNumberOfLines:0];
        [label setFont:[UIFont systemFontOfSize:14.0f]];
        NSString *text = [items objectAtIndex:[indexPath row]];
        [label setText:text];
        label.tag = lbltag;
        [cell addSubview:label];

        CGSize constraint1=CGSizeMake(300.0f, 150.0f);
        CGSize size1=[text sizeWithFont:[UIFont systemFontOfSize:14.0f] constrainedToSize:constraint1 lineBreakMode:NSLineBreakByWordWrapping];

        [label setFrame:CGRectMake(10.0f, 10.0f, 300.0f, MAX(size1.height, 44.0f))];

        int countText=text.length;

        if (countText>=350) {
            seeMoreBtn=[UIButton buttonWithType:UIButtonTypeRoundedRect];
            [seeMoreBtn setTitle:@"See More" forState:UIControlStateNormal];
            seeMoreBtn.frame=CGRectMake(220.0f, MAX(size1.height, 44.0f)-10, 80.0f, 20.0f);
            seeMoreBtn.tag=indexPath.row ;
              [seeMoreBtn addTarget:self action:@selector(increaseSize:) forControlEvents:UIControlEventTouchUpInside];
            [cell addSubview:seeMoreBtn];            
        }
        return cell;
    }

    -(void)increaseSize:(UIButton *)sender{
//What to write here that can adjust the label and cell size

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T12:18:33.757

如果您将 UITableViewCell 子类化并在调整单元格大小时使用 layoutSubviews 进行调整，那就更好了。

```
//In SMTableViewCell.h

@interface SMTableViewCell : UITableViewCell

@property (weak, nonatomic) IBOutlet UILabel *statusLabel;
@property (weak, nonatomic) IBOutlet UIButton *seeMoreButton;

//SMTableViewCell.m

- (void)layoutSubviews
{
    CGRect labelFrame = self.statusLabel.frame;
    labelFrame.size.height = self.frame.size.height - 55.0f;
    self.statusLabel.frame = labelFrame;

    CGRect buttonFrame = self.seeMoreButton.frame;
    buttonFrame.origin.y = labelFrame.origin.y+labelFrame.size.height+10.0f;
    self.seeMoreButton.frame = buttonFrame;
} 
```

保留一个数组来存储 selectedIndexPaths：

```
@property (nonatomic, strong) NSMutableArray *selectedIndexPaths; 
```

计算单元格的高度：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    BOOL isSelected = [self.selectedIndexPaths containsObject:indexPath];

    CGFloat maxHeight = MAXFLOAT;
    CGFloat minHeight = 40.0f;

    CGFloat constrainHeight = isSelected?maxHeight:minHeight;
    CGFloat constrainWidth  = tableView.frame.size.width - 20.0f;

    NSString *text       = self.items[indexPath.row];
    CGSize constrainSize = CGSizeMake(constrainWidth, constrainHeight);
    CGSize labelSize     = [text sizeWithFont:[UIFont systemFontOfSize:15.0f]
                            constrainedToSize:constrainSize
                                lineBreakMode:NSLineBreakByCharWrapping];

    return MAX(labelSize.height+75, 100.0f);

} 
```

初始化自定义显示更多 TableViewCell：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"CellIdentifier";

    SMTableViewCell *cell= (SMTableViewCell *)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (cell == nil)
    {
        cell = [[[NSBundle mainBundle]loadNibNamed:NSStringFromClass([SMTableViewCell class])
                                             owner:nil
                                           options:nil] lastObject];
    }

    BOOL isSelected = [self.selectedIndexPaths containsObject:indexPath];
    cell.statusLabel.numberOfLines = isSelected?0:2;

    NSString *text = self.items[indexPath.row];
    cell.statusLabel.text = text;

    NSString *buttonTitle = isSelected?@"See Less":@"See More";
    [cell.seeMoreButton setTitle:buttonTitle forState:UIControlStateNormal];
    [cell.seeMoreButton addTarget:self action:@selector(seeMoreButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
    [cell.seeMoreButton setTag:indexPath.row];

    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    return cell;
} 
```

按钮点击事件方法：

```
- (void)seeMoreButtonPressed:(UIButton *)button
{
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:button.tag inSection:0];
    [self addOrRemoveSelectedIndexPath:indexPath];
}

- (void)addOrRemoveSelectedIndexPath:(NSIndexPath *)indexPath
{
    if (!self.selectedIndexPaths) {
        self.selectedIndexPaths = [NSMutableArray new];
    }

    BOOL containsIndexPath = [self.selectedIndexPaths containsObject:indexPath];

    if (containsIndexPath) {
        [self.selectedIndexPaths removeObject:indexPath];
    }else{
        [self.selectedIndexPaths addObject:indexPath];
    }

    [self.tableView reloadRowsAtIndexPaths:@[indexPath]
                     withRowAnimation:UITableViewRowAnimationFade];

} 
```

如果选择了单元格，则会给出相同的事件：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    [self addOrRemoveSelectedIndexPath:indexPath];

} 
```

示例[演示项目链接。](http://dl.dropbox.com/u/35012982/Demo%20Projects/SeeMoreCell_V1.0.zip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T12:06:09.440

添加如下属性：

```
@property(strong, nonatomic) NSArray *enlargedIndexPaths; 
```

将其初始化为一个空数组。实现表视图委托：

```
- (CGFloat)tableView:(UITableView*)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    return ([self.enlargedIndexPaths containsObject:indexPath])? 88.0 : 44.0;
} 
```

然后在增加大小：

```
UITableViewCell *cell = sender.superview;
NSIndexPath *indexPath = [self.tableView indexPathFoCell:cell];
[self.enlargedIndexPaths addObject:indexPath];

// do you want to enlarge more than one at a time?  You can remove index paths 
// here, too.  Just reload them below
[self.tableView beginUpdates];
[self.tableView reloadRowsAtIndexPaths:self.enlargedIndexPaths] withRowAnimation:UITableViewRowAnimationTop];
[self.tableView endUpdates]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T12:04:08.980

好吧，这个想法是根据您为单元格设置的值来更改单元格的高度。您可以拥有一个 NSArray，您只需为所有单元格标记一个值：isExpanded（真或假）。

回顾一下，创建一个 NSMutableArray 来存储单元状态（扩展与否）：

```
NSMutableArray *cellState; 
```

初始化数组并为所有 UITableView 项数组填充零。当单元格展开时，将 cellState objectAtIndex 值从 0 设置为 1（将其标记为展开）。

然后重新加载该单元格：

```
[self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:indexPath.row inSection:indexPath.section]] withRowAnimation:UITableViewRowAnimationFade]; 
```

并修改`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;`函数以在单元格展开时返回更大的值...

而已！

# c++ - 使用 zLib 进行无效删除

> ID：15585055
> 
> 赞同：1
> 
> 时间：2013-03-23T09:07:38.580
> 
> 标签：c++, protocol-buffers, valgrind, zlib

我有使用 zLib 和 Google 协议缓冲区的代码。问题是，valgrind 在一个同时使用两者的类中检测到无效释放。

```
==1419== Invalid free() / delete / delete[] / realloc()
==1419==    at 0x4A06F1C: operator delete[](void*) (vg_replace_malloc.c:515)
==1419==    by 0x4C3928F: openstreetmap::cOsmBlob::~cOsmBlob() (cOsmBlob.cc:129)
==1419==    by 0x4045DF: void __gnu_cxx::new_allocator<openstreetmap::cOsmBlob>::destroy<openstreetmap::cOsmBlob>(openstreetmap::cOsmBlob*) (new_allocator.h:114)
==1419==    by 0x404005: std::deque<openstreetmap::cOsmBlob, std::allocator<openstreetmap::cOsmBlob> >::pop_front() (stl_deque.h:1407)
==1419==    by 0x403D39: std::queue<openstreetmap::cOsmBlob, std::deque<openstreetmap::cOsmBlob, std::allocator<openstreetmap::cOsmBlob> > >::pop() (stl_queue.h:240)
==1419==    by 0x403BD6: threading::cFifoBuffer<openstreetmap::cOsmBlob>::~cFifoBuffer() (storage.h:86)
==1419==    by 0x403A15: main (main.cc:40)
==1419==  Address 0x50be390 is 752 bytes inside a block of size 7,152 free'd
==1419==    at 0x4A077E6: free (vg_replace_malloc.c:446)
==1419==    by 0x37A6209B3A: inflateEnd (inflate.c:1261)
==1419==    by 0x4C39156: openstreetmap::cOsmBlob::cOsmBlob(std::basic_ifstream<char, std::char_traits<char> >*) (cOsmBlob.cc:116)
==1419==    by 0x4C5B157: openstreetmap::cPbfPipelineFileReader::run(void*) (cPbfPipelineFileReader.cc:158)
==1419==    by 0x37A5A07D14: start_thread (pthread_create.c:308)
==1419==    by 0x37A4EF246C: clone (clone.S:114)
==1419== 
==1419== Invalid free() / delete / delete[] / realloc()
==1419==    at 0x4A06F1C: operator delete[](void*) (vg_replace_malloc.c:515)
==1419==    by 0x4C3928F: openstreetmap::cOsmBlob::~cOsmBlob() (cOsmBlob.cc:129)
==1419==    by 0x4045DF: void __gnu_cxx::new_allocator<openstreetmap::cOsmBlob>::destroy<openstreetmap::cOsmBlob>(openstreetmap::cOsmBlob*) (new_allocator.h:114)
==1419==    by 0x404604: std::deque<openstreetmap::cOsmBlob, std::allocator<openstreetmap::cOsmBlob> >::_M_pop_front_aux() (deque.tcc:520)
==1419==    by 0x404027: std::deque<openstreetmap::cOsmBlob, std::allocator<openstreetmap::cOsmBlob> >::pop_front() (stl_deque.h:1411)
==1419==    by 0x403D39: std::queue<openstreetmap::cOsmBlob, std::deque<openstreetmap::cOsmBlob, std::allocator<openstreetmap::cOsmBlob> > >::pop() (stl_queue.h:240)
==1419==    by 0x403BD6: threading::cFifoBuffer<openstreetmap::cOsmBlob>::~cFifoBuffer() (storage.h:86)
==1419==    by 0x403A15: main (main.cc:40)
==1419==  Address 0x5eb45d0 is not stack'd, malloc'd or (recently) free'd 
```

我不明白为什么地址没有正确对齐以及为什么块被释放两次。

```
#define MAX_BLOB_HEADERSIZE (64 * 1024)
#define MAX_BLOB_DATASIZE   (32 * 1024 * 1024)

cOsmBlob::cOsmBlob(std::ifstream *stream) {
    char headerLength[4], *buffer;
    pbf::BlobHeader header;
    uint32_t length;
    pbf::Blob blob;
    int retval;

    if (stream == NULL)
            throw std::exception();

    stream->read(headerLength, 4);
    length = ntohl(*((uint32_t*)&headerLength));
    if (length == 0 || length > MAX_BLOB_HEADERSIZE) {
        cerr << "cOsmBlob: invalid blob header size" << endl;
        throw exception();
    }

    /* read the BlobHeader */
    buffer = new char[length];
    stream->read(buffer, length);
    if (header.ParseFromArray(buffer, length) == false) {
        cerr << "cOsmBlob: unable to read BlobHeader" << endl;
        delete[] buffer;
        throw exception();
    }
    delete[] buffer;

    /* read the Blob */
    if (header.datasize() == 0 || header.datasize() > MAX_BLOB_DATASIZE) {
        cerr << "cOsmBlob: invalid header->datasize()" << endl;
        throw exception();
    }
    buffer = new char[header.datasize()];
    stream->read(buffer, header.datasize());
    if (blob.ParseFromArray(buffer, header.datasize()) == false) {
        cerr << "cOsmBlob: unable to read Blob" << endl;
        delete[] buffer;
        throw exception();
    }
    delete[] buffer;

    if (header.type() == "OSMHeader") {
        this->type = OSM_HEADER;
    }
    else if (header.type() == "OSMData") {
        this->type = OSM_DATA;
    }
    else {
        cerr << "cOsmBlob: Unknown BlobHeader type" << endl;
        throw exception();
    }

    /* extract data */
    this->size = 0;
    this->rawdata = NULL;
    if (blob.has_raw() == true) {
        this->rawdata = new char[blob.raw().length()];
        memcpy(this->rawdata, blob.raw().data(), blob.raw().length());
        this->size = blob.raw().length();
    }
    else if (blob.has_zlib_data() == true) {
        z_stream zlibStream;

        this->rawdata = new char[blob.raw_size()];
        zlibStream.next_in =
               (Bytef*)const_cast<char*>(blob.zlib_data().data());
        zlibStream.avail_in = blob.zlib_data().size();
        zlibStream.next_out = (Bytef*)this->rawdata;
        zlibStream.avail_out = blob.raw_size();
        zlibStream.zalloc = Z_NULL;
        zlibStream.zfree = Z_NULL;
        zlibStream.opaque = Z_NULL;

        if (inflateInit(&zlibStream) != Z_OK) {
            cerr << "cOsmBlob: " <<
                    "Unknown or unsupported ZLib version of blob's data" <<
                    endl;
            delete[] buffer;
            throw exception();
        }
        retval = inflate(&zlibStream, Z_FINISH);
        if (retval != Z_OK && retval != Z_STREAM_END) {
            cerr << "cOsmBlob: Unable to decompress blob's data" << endl;
            delete[] buffer;
            throw exception();
        }
        if (inflateEnd(&zlibStream) != Z_OK) {
            cerr << "cOsmBlob: " <<
                    "Unable to finalize decompression of blob's data" <<  endl;
            delete[] buffer;
            throw exception();
        }

        this->size = blob.raw_size();
    }
}

cOsmBlob::~cOsmBlob(void) {
    if (this->rawdata != NULL)
            delete[] this->rawdata;
    this->rawdata = NULL;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:20:10.830

从您的评论来看，您的班级似乎违反了[三原则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)。

由于您将类的实例存储在容器中，因此这涉及复制它们。在没有自定义复制构造函数和赋值运算符的情况下，这将使用编译器生成的。后者只会获取`buffer`指针的副本。当原始对象超出范围时，其缓冲区为`delete[]`d，副本带有一个悬空指针。当副本超出范围时，它将再次尝试`delete[]`指向同一个指针，从而导致您看到的错误。

您需要提供一个复制构造函数和一个复制赋值运算符。

# string - 检查一个字符串是否包含另一个字符串

> ID：15585058
> 
> 赞同：253
> 
> 时间：2013-03-23T09:08:03.057
> 
> 标签：string, vba

我想查找字符串中是否包含“，”（逗号）。除了逐字符阅读之外，我们还有其他选择吗？

* * *

## 回答 #1

> 赞同：419
> 
> 时间：2013-03-23T09:13:09.573

使用[Instr](https://docs.microsoft.com/en-us/office/vba/language/reference/user-interface-help/instr-function)函数（旧版 MSDN 文档可在[此处](https://msdn.microsoft.com/en-us/library/gg264811(v=office.14).aspx)找到）

```
Dim pos As Integer

pos = InStr("find the comma, in the string", ",") 
```

将在 pos 中返回 15

**如果没有找到，它将返回 0**

如果您需要使用 excel 公式查找逗号，您可以使用该`=FIND(",";A1)`函数。

请注意，如果您想用于`Instr`查找不区分大小写的字符串的位置，请使用 Instr 的第三个参数并将其指定为 const `vbTextCompare`（或者对于顽固分子来说仅 1）。

```
Dim posOf_A As Integer

posOf_A = InStr(1, "find the comma, in the string", "A", vbTextCompare) 
```

会给你一个 14 的值。

请注意，在这种情况下，您必须指定起始位置，如我链接的规范中所述：*如果指定了 compare，则需要 start 参数。*

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2015-03-12T19:48:48.573

您还可以使用特殊词`like`：

```
Public Sub Search()
  If "My Big String with, in the middle" Like "*,*" Then
    Debug.Print ("Found ','")
  End If
End Sub 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-07-14T17:03:24.553

还有一个[InStrRev](http://msdn.microsoft.com/en-us/library/gg251545%28v=office.14%29.aspx)函数执行相同类型的操作，但从文本末尾开始搜索。

根据@rene 的回答...

```
Dim pos As Integer
pos = InStrRev("find the comma, in the string", ",") 
```

...仍然会返回 15 到 pos，但是如果字符串有多个搜索字符串，比如单词“the”，那么：

```
Dim pos As Integer
pos = InStrRev("find the comma, in the string", "the") 
```

...将返回 20 到 pos，而不是 6。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-08-07T13:17:32.427

基于 Rene 的回答，您还可以编写一个函数，如果子字符串存在则返回 TRUE，如果不存在则返回 FALSE：

```
Public Function Contains(strBaseString As String, strSearchTerm As String) As Boolean
'Purpose: Returns TRUE if one string exists within another
On Error GoTo ErrorMessage
    Contains = InStr(strBaseString, strSearchTerm)
Exit Function
ErrorMessage:
MsgBox "The database has generated an error. Please contact the database administrator, quoting the following error message: '" & Err.Description & "'", vbCritical, "Database Error"
End
End Function 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-03T08:46:55.300

鉴于现有的 Instr/InstrRev 函数，您不会真的想这样做，但有时使用 EVALUATE 在 VBA 中返回 Excel 工作表函数的结果很方便

```
Option Explicit

Public Sub test()

    Debug.Print ContainsSubString("bc", "abc,d")

End Sub
Public Function ContainsSubString(ByVal substring As String, ByVal testString As String) As Boolean
    'substring = string to test for; testString = string to search
    ContainsSubString = Evaluate("=ISNUMBER(FIND(" & Chr$(34) & substring & Chr$(34) & ", " & Chr$(34) & testString & Chr$(34) & "))")

End Function 
```

# android - 文本和路径的缩放问题。果冻豆安卓 4.1.2

> ID：15585060
> 
> 赞同：0
> 
> 时间：2013-03-23T09:08:32.290
> 
> 标签：android, canvas, android-4.2-jelly-bean

我在三星 Galaxy Tab (GT-N8010) 上获得了 JellyBean 的更新。

使用画布缩放文本时，文本不清晰且难看。在 JellyBean 更新之前，文本流畅而准确。

AVD 模拟器 (Android 4.1) 和三星 Galaxy II 上的相同应用程序 (apk) 看起来也不错。

下图以良好的质量（原始尺寸）上传，显示丑陋的文字。此行为适用于 Samsung Galaxy Tab (GT-N8010,Android 4.1.2)、Samsung Galaxy Nexus (4.2.1)、Acer Iconia A-500 (4.0.3)、HTC Tell (4.0.3) ![在此处输入图像描述](../Images/2095ef4c3fc7e4fe80b1c45997f1fb38.png)

应该如下图所示，在 JellyBean 之前在我的 Galaxy Tab 上工作，并且仍然在我的三星 Galaxy II（GT-I9100，Android 4.0.4）和模拟器中工作： ![在此处输入图像描述](../Images/3a1a692a9be1e32bbefaaf25fcfabb16.png)

有什么提示吗？

我的简单代码：（完整，可以复制进行测试）

```
package com.example.textactivities;
import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;

public class TestJellyBeanScaling extends Activity {

    Drawtest drawtest;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        drawtest = new Drawtest(this);
        setContentView(drawtest);

    }
    private class Drawtest extends View  {

        public Drawtest(Context context) {
            super(context);
            // TODO Auto-generated constructor stub
        }

        protected void onDraw(Canvas canvas) {
            super.onDraw(canvas);
            Paint paint = new Paint();
            paint.setColor(Color.WHITE);
            paint.setStyle(Style.FILL);
                    paint.setAntiAlias(true);
            canvas.drawPaint(paint);
            canvas.scale(10,10);
            paint.setColor(Color.BLACK);
            paint.setTextSize(20);
            canvas.drawText("Some Text", 10, 25, paint);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:51:33.783

I found the problem: With my new JellyBean Update Hardware acceleration was defaulted to on and Hardwareacceleration seams to be buggy. I had to explicity false the "Hardware acceleration" in the AndroidManifest.xml :

```
 <application
   android:hardwareAccelerated="false"
    android:icon="@drawable/ic_launcher" 
```

regards

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:30:23.627

`paint.setAntiAlias(true);`

为油漆设置抗锯齿，这将更平滑。

# php - mod_rewrite .html 到子域

> ID：15585061
> 
> 赞同：-1
> 
> 时间：2013-03-23T09:08:44.030
> 
> 标签：php, apache, mod-rewrite

大家早上好，

我真的希望有人可以提供帮助。我已经将一个 html 网站重新开发为一个 php 网站，我想使用 mod_rewrite。

我可能真的很愚蠢（你可以看到，虽然我对此很陌生！）但我保证我已经用谷歌搜索但看不到答案。

我需要做的是将我旧的糟糕 .html 文件重定向到一个虚拟子域。

所以 Example.html 需要转到 example.mydomain.co.uk （我只有几页，所以我想我可以不使用表达式就离开）。

我接近了：

```
RewriteEngine On    # Turn on the rewriting engine
RewriteBase /
RewriteRule example.html$ ^example\.mydomain\.co.uk [R=301,NC] 
```

但这只是 mydomain.co.uk\%5eexample.mydomain.co.uk。我找到了大量的示例，然后将域推送到 php，以便位对其进行排序！

非常感谢您的所有帮助。

问候，艾伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:24:00.597

如果您希望将仅以 az 小写字母开头的任何内容重定向到子域，那么这将起到作用：

```
RewriteRule ^([a-z]+)\.html$ $1.mydomain.co.uk [R=permanent] 
```

但是，您需要仔细考虑是否有任何不得重定向的 .html 文件。在这种情况下，您需要确定是否存在可以轻松避免的模式，在这种情况下，可能只需要更改正则表达式。如果没有模式可以让您轻松避免这些非重定向页面，那么您可能需要使用 RewriteCond 并为您想要避免重定向的每个页面添加检查。

# mysql - 如何通过 SQL 设置 Wordpress 特色图片

> ID：15585063
> 
> 赞同：5
> 
> 时间：2013-03-23T09:08:53.467
> 
> 标签：mysql, wordpress

我正在迁移这个网站，那里有很多没有特色图片的帖子。我开始在界面上按页面执行此操作，但它需要永远。我认为使用数据库插入可能会更快。

这些帖子没有附加图像，因此我无法使用会自动将第一张图像设置为特色的插件。

你们有没有人这样做过或者可以指出我的资源？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-18T19:24:23.043

我发现这个问题很有趣，因为我需要直接使用 sql 在 wp 中插入图像，所以我进行了更多调查。首先，您需要有一个帖子或一个页面来分配特色图像。我假设您通过 wp 接口插入帖子，或调用 wp_insert_post() 或直接通过 sql 插入 $wp->post。然后你需要这篇文章的 ID，比如“target_post_id”。

现在您需要在数据库中插入一个图像。再一次，您可以使用前面的任何方法，但为了快速，我将所有预先调整大小的图像加载到 a 中并使用 sql 插入它们：

```
INSERT INTO $wp->post (post_type, guid, status, post_mime_type) VALUES ('attachment', '<images_url>', 'publish', 'image/jpeg') 
```

最后一步是将帖子绑定到图像，如 cr8ivecodesmith 所回答：

```
INSERT INTO $wp->postmeta (meta_value, meta_key, post_id) VALUES ('<post_id_of_image>', '_thumbnail_id', '<target_post_id>'); 
```

wp db 将使用默认值填充一些非空字段

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-23T16:09:21.543

从手头的记录中观察数据后，我实际上能够使其工作。我只需要`wp_postmeta`使用查询处理表：

```
INSERT INTO `wp_postmeta` (meta_value, meta_key, post_id) VALUES ('<post_id_of_image>', '_thumbnail_id', <target_post_id>); 
```

希望这可以帮助其他人。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-22T18:20:15.987

**第 1 步在您的 wp_posts 表中插入一条记录作为您的附件**

```
INSERT INTO wp_posts (post_type, guid, post_status, post_mime_type,post_parent) VALUES ('attachment', '".$filename."', 'inherit', 'image/jpeg',".$parentpostid."); 
```

$filname = 要用作缩略图的图像的 URL，例如[http://yourdomain.com/wp-content/uploads/2014/09/thumbnail.jpg](http://yourdomain.com/wp-content/uploads/2014/09/thumbnail.jpg)

$parentpostid = 您要附加缩略图的帖子的 post_id。

**步骤 #2 在 wp_postmeta 上为您的附件创建一个帖子元记录**

```
INSERT INTO wp_postmeta (meta_value, meta_key, post_id) VALUES ('".$filename."', '_wp_attached_file',".$attachmentid."); 
```

$filename = 文件的文件名。例如 2014/09/thumbnail.jpg $attachmentid = 在第 1 步创建的附件帖子的 post_id

**步骤#3 创建一个帖子元记录，以将附件帖子标识为您要将缩略图附加到的帖子的缩略图。**

```
INSERT INTO wp_postmeta (meta_value, meta_key, post_id) VALUES (".$attachmentid.", '_thumbnail_id',".$parentpostid."); 
```

$parentpostid = 您希望缩略图附加到的帖子的 post_id。

$attachmentid = 在第 1 步创建的附件帖子的 post_id

# java - java.lang.Exception: Error while transfer data 如何解决这个错误

> ID：15585064
> 
> 赞同：0
> 
> 时间：2013-03-23T09:08:54.500
> 
> 标签：java, exception, client

我正在尝试根据请求将文件从服务器端发送到客户端。发送的文件是加密的，客户端应该解密它。加密过程工作正常，但在解密时我需要使用序列化的 DerIOBuffer objetc。我该怎么办..请帮忙

服务器：

```
import java.net.*;
import java.io.*;

import java.math.BigInteger;
import com.dragongate_technologies.borZoi.*;

public class FileServer {

  static final int LISTENING_PORT = 3210;

  public static void main(String[] args) {

     File directory;        // The directory from which the gets the files that it serves.
     ServerSocket listener; // Listens for connection requests.
     Socket connection;     // A socket for communicating with a client.

     /* Check that there is a command-line argument.
        If not, print a usage message and end. */

     if (args.length == 0) {
        System.out.println("Usage:  java FileServer <directory>");
        return;
     }

     /* Get the directory name from the command line, and make
        it into a file object.  Check that the file exists and
        is in fact a directory. */

     directory = new File(args[0]);
     if ( ! directory.exists() ) {
        System.out.println("Specified directory does not exist.");
        return;
     }
     if (! directory.isDirectory() ) {
        System.out.println("The specified file is not a directory.");
        return;
     }

     /* Listen for connection requests from clients.  For
        each connection, create a separate Thread of type
        ConnectionHandler to process it.  The ConnectionHandler
        class is defined below.  The server runs until the
        program is terminated, for example by a CONTROL-C. */

     try {
        listener = new ServerSocket(LISTENING_PORT);
        System.out.println("Listening on port " + LISTENING_PORT);
        while (true) {
           connection = listener.accept();
           new ConnectionHandler(directory,connection);
        }
     }
     catch (Exception e) {
        System.out.println("Server shut down unexpectedly.");
        System.out.println("Error:  " + e);
        return;
     }

  } // end main()

  static class ConnectionHandler extends Thread {
       // An object of this class is a thread that will
       // process the connection with one client.  The
       // thread starts itself in the constructor.

     File directory;       // The directory from which files are served
     Socket connection;    // A connection to the client.
     TextReader incoming;  // For reading data from the client.
     PrintWriter outgoing; // For transmitting data to the client.

     ConnectionHandler(File dir, Socket conn) {
           // Constructor.  Record the connection and
           // the directory and start the thread running.
        directory = dir;
        connection = conn;
        start();
     }

     void sendIndex() throws Exception {
           // This is called by the run() method in response
           // to an "index" command.  Send the list of files
           // in the directory.
        String[] fileList = directory.list();
        for (int i = 0; i < fileList.length; i++)
           outgoing.println(fileList[i]);
        outgoing.flush();
        outgoing.close();
        if (outgoing.checkError())
           throw new Exception("Error while transmitting data.");
     }

     void ecies_ex(String fileName) throws Exception {
           // This function encrypts the file that has been requested
           // by the client.

        String at1,dc1,der1;

        OutputStream os = connection.getOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(os);

        ECDomainParameters dp = ECDomainParameters.NIST_B_163();

        ECPrivKey skA = new ECPrivKey(dp, BigInteger.valueOf(123));
        ECPubKey pkA = new ECPubKey(skA);

        ECPrivKey skB = new ECPrivKey(dp, BigInteger.valueOf(230));
        ECPubKey pkB = new ECPubKey(skB);

        File file = new File(directory,fileName);
        if ( (! file.exists()) || file.isDirectory()) {
             // (Note:  Don't try to send a directory, which
             // shouldn't be there anyway.)
           outgoing.println("error");
        }
        else {
           outgoing.println("ok");

           String pt1 = new String();
           BufferedReader br = null;

        try {
           String sCurrentLine;

           br = new BufferedReader(new FileReader(fileName));
           while ((sCurrentLine = br.readLine()) != null) {
                pt1=pt1+"\n"+sCurrentLine;
            }

        } catch (IOException e) {
            e.printStackTrace();
        }

        ECIES crypt = new ECIES(skA, pkB, pt1.getBytes()); // encrypt the data

        try {
            DerIOBuffer der = new DerIOBuffer(crypt);

            oos.writeObject(der);
            ECIES decrypt = der.toECIES();
            dc1=decrypt.toString2(); //cipher text

            //at1=decrypt.toString3(); //authentication tag

            FileWriter fstream = new FileWriter("encrypted.txt");
            BufferedWriter out = new BufferedWriter(fstream);
            out.write(dc1);
            //Close the output stream
            out.close();

        } catch (Exception e) {
            System.out.println(e.toString());
        }

        TextReader fileIn = new TextReader( new FileReader("encrypted.txt") );
        while (fileIn.peek() != '\0') {
            // Read and send lines from the file until
            // an end-of-file is encountered.
            String line = fileIn.getln();
            outgoing.println(line);
        }
      }
      outgoing.flush();
    //  oos.close();
    //  os.close();
      outgoing.close();
      if (outgoing.checkError())
        throw new Exception("Error while transmitting data.");

}

     public void run() {
           // This is the method that is executed by the thread.
           // It creates streams for communicating with the client,
           // reads a command from the client, and carries out that
           // command.  The connection is logged to standard output.
           // An output beginning with ERROR indicates that a network
           // error occurred.  A line beginning with OK means that
           // there was no network error, but does not imply that the
           // command from the client was a legal command.
        String command = "Command not read";
        try {
           incoming = new TextReader( connection.getInputStream() );
           outgoing = new PrintWriter( connection.getOutputStream() );
           command = incoming.getln();
           if (command.equals("index")) {
              sendIndex();
           }
           else if (command.startsWith("get")){
              String fileName = command.substring(3).trim();
              ecies_ex(fileName);
              //sendFile(fileName);
           }
           else {
              outgoing.println("unknown command");
              outgoing.flush();
           }
           System.out.println("OK    " + connection.getInetAddress()
                                       + " " + command);
        }
        catch (Exception e) {
           System.out.println("ERROR " + connection.getInetAddress()
                                    + " " + command + " " + e);
        }
        finally {
           try {
              connection.close();
           }
           catch (IOException e) {
           }
        }
     }

  }  // end nested class ConnectionHandler

} //end class FileServer 
```

客户 ：

```
import java.net.*;
import java.io.*;
import java.math.BigInteger;
import com.dragongate_technologies.borZoi.*;

public class FileClient {

  static final int LISTENING_PORT = 3210;

  public static void main(String[] args) {

     String computer;      // Name or IP address of server.
     Socket connection;    // A socket for communicating with that computer.
     PrintWriter outgoing; // Stream for sending a command to the server.
     TextReader incoming;  // Stream for reading data from the connection.
     String command;       // Command to send to the server.
     String pt3;

    ECDomainParameters dp = ECDomainParameters.NIST_B_163();
     ECPrivKey skB = new ECPrivKey(dp, BigInteger.valueOf(230));
    //ECPrivKey skB = new ECPrivKey (dp);
    ECPubKey pkB = new ECPubKey(skB);
     /* Check that the number of command-line arguments is legal.
        If not, print a usage message and end. */

     if (args.length == 0 || args.length > 3) {
        System.out.println("Usage:  java FileClient <server>");
        System.out.println("    or  java FileClient <server> <file>");
        System.out.println("    or  java FileClient <server> <file> <local-file>");
        return;
     }

     /* Get the server name and the message to send to the server. */

     computer = args[0];

     if (args.length == 1)
        command = "index";
     else
        command = "get " + args[1];

     /* Make the connection and open streams for communication.
        Send the command to the server.  If something fails
        during this process, print an error message and end. */

     try {
        connection = new Socket( computer, LISTENING_PORT );
        incoming = new TextReader( connection.getInputStream() );
        outgoing = new PrintWriter( connection.getOutputStream() );

        outgoing.println(command);
        outgoing.flush();
     }
     catch (Exception e) {
        System.out.println(
             "Can't make connection to server at \"" + args[0] + "\".");
        System.out.println("Error:  " + e);
        return;
     }

     /* Read and process the server's response to the command. */

     try {
        if (args.length == 1) {
              // The command was "index".  Read and display lines
              // from the server until the end-of-stream is reached.
           System.out.println("File list from server:");
           while (incoming.eof() == false) {
              String line = incoming.getln();
              System.out.println("   " + line);
           }
        }
        else {
              // The command was "get <file-name>".  Read the server's
              // response message.  If the message is "ok", get the file.
           String message = incoming.getln();
           if (! message.equals("ok")) {
              System.out.println("File not found on server.");
              return;
           }
           PrintWriter fileOut;  // For writing the received data to a file.
           if (args.length == 3) {
                 // Use the third parameter as a file name.
               fileOut = new PrintWriter( new FileWriter(args[2]) );
           }
           else {
                 // Use the second parameter as a file name,
                 // but don't replace an existing file.
               File file = new File(args[1]);
               if (file.exists()) {
                  System.out.println("A file with that name already exists.");
                  System.out.println("To replace it, use the three-argument");
                  System.out.println("version of the command.");
                  return;
               }
               fileOut = new PrintWriter( new FileWriter(args[1]) );
           }
           while (incoming.peek() != '\0') {
                  // Copy lines from incoming to the file until
                  // the end of the incoming stream is encountered.
               String line = incoming.getln();
               fileOut.println(line);
           }
           InputStream is = connection.getInputStream(); 
           ObjectInputStream ois = new ObjectInputStream(is); 
           DerIOBuffer der = (DerIOBuffer)ois.readObject();
           ECIES decrypt = der.toECIES();

           byte[] pt2 = decrypt.decrypt(skB); // decrypt the data
            pt3=new String(pt2);

           if (fileOut.checkError()) {
              System.out.println("Some error occurred while writing the file.");
              System.out.println("Output file might be empty or incomplete.");
           }
        }
     }
     catch (Exception e) {
        System.out.println("Sorry, an error occurred while reading data from the server.");
        System.out.println("Error: " + e);
     }

  }  // end main()

 } //end class FileClient 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:41:07.340

如果您关心错误，则不应使用`PrintWriter`. 为什么？因为如果通过 a 的输出确实发生错误`PrintWriter`，您将无法找出它是什么。这就是在这种情况下很难弄清楚真正的问题是什么的原因。我建议您解决此问题，以便找到问题的真正原因。

真正的问题*可能*与以下问题有关：

*   如果您尝试编写的内容*可能*是二进制的，那么您根本不应该使用`PrintWriter`... 或 Readers / Writers。

*   您似乎在不必要地使用对象序列化......并且在一个看起来可能无法序列化的类上。

*   基于我在查找“borZoi”库的文档时遇到的困难......以及其他事情......我认为你可能选择了一个糟糕的库来进行加密工作。

# sql-server-2008 - SQL Server 2008 连接错误“管道的另一端没有进程”

> ID：15585069
> 
> 赞同：22
> 
> 时间：2013-03-23T09:09:29.707
> 
> 标签：sql-server-2008

首先让我说，我知道[这个线程](https://stackoverflow.com/questions/451720/no-process-is-on-the-other-end-of-the-pipe)和网络上的其他人试图解决这个问题。

那里发布的解决方案不适用于我的问题。在决定提出这个问题之前，我花了 5 个小时试图解决这个问题。

**问题**：当我尝试使用 SQL 身份验证登录 SSMS（或从 Java 应用程序连接）时，出现此错误：

> 与服务器成功建立连接，但在登录过程中出现错误。（提供者：共享内存提供者，错误：0 - 管道的另一端没有进程。）（Microsoft SQL Server，错误：233）

虽然它确实有效，但我不能选择使用集成身份验证。我尝试连接的数据库与我的 SSMS 实例位于同一台机器上。没有网络，这是一个独立的系统。

**在我的配置中启用**了命名管道，我已经重新启动，因为在我的配置中，TCP IP 的优先级高于命名管道。

我什至已经卸载 SQL Server 并重新安装它，但无济于事。

我的 SQL Server 实例的详细信息如下：

```
Microsoft SQL Server Management Studio - 10.0.2531.0
Microsoft Analysis Services Client Tools - 10.0.1600.22
Microsoft Data Access Components (MDAC)  - 6.1.7601.17514
Microsoft MSXML - 3.0 5.0 6.0 
Microsoft Internet Explorer - 9.0.8112.16421
Microsoft .NET Framework - 2.0.50727.5466
Operating System     - 6.1.7601 
```

详细配置如下： [http://i45.tinypic.com/vxdz7c.png](http://i45.tinypic.com/vxdz7c.png) [http://i45.tinypic.com/vxdz7c.jpg](http://i45.tinypic.com/vxdz7c.jpg)

我使用此代码从 java 连接。

```
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
String connectionUrl = "jdbc:sqlserver://localhost;database=AdventureWorks;integratedSecurity=false;User=JIMBO; Password=JIMBO;";
Connection con = DriverManager.getConnection(connectionUrl); 
```

但请记住，当我尝试直接登录 SSMS 时也会出现此错误。提前致谢。

-吉姆

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-23T10:53:54.290

要强制使用 TCP/IP，请将连接字符串中的 localhost 替换为 127.0.0.1。

当您使用用户名和密码时，请确保启用 SQL 身份验证。默认情况下，在 sqlserver 2008 上仅启用 Windows 集成。

使用 SqlServer 身份验证时，请记住密码策略已到位以强制执行安全性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-10T07:56:45.710

强制 TCP/IP 连接（通过提供`127.0.0.1`代替`localhost`or `.`）可以揭示错误的真正原因。就我而言，连接字符串中指定的数据库名称不正确。

所以，这里是到目前为止的清单：

*   确保在配置管理器中启用了**命名管道**（不要忘记重新启动服务器）。
*   确保启用**SQL Server 身份验证**（或混合模式）。
*   确保您的用户名和密码正确。
*   确保您要连接的数据库存在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-26T23:01:48.063

我的解决方案是使用 Windows 登录然后转到安全>登录找到有问题的 ID 并重新输入使用的密码。重启服务...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-17T16:27:08.730

将“user instance=False”添加到连接字符串为我解决了这个问题。

```
<connectionStrings>
  <add name="NorthwindEntities" connectionString="metadata=res://*/Models.Northwind.csdl|res://*/Models.Northwind.ssdl|res://*/Models.Northwind.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\SQLEXPRESS2008R2;attachdbfilename=|DataDirectory|\Northwind.mdf;integrated security=True;user instance=False;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
</connectionStrings> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-01T16:54:07.593

这个问题是由应用程序错误日志中出现的这个错误引起的。

“向客户端发送数据时，对大型对象的读取操作失败。常见原因是应用程序在 READ UNCOMMITTED 隔离级别运行。此连接将被终止。”

我将 PDF 存储在 SQL 表中，当尝试从该表中进行 SELECT 时，它会吐出该错误，从而导致您的问题中提到的错误。

解决方案是删除包含大量文本的列，在我的例子中是 Base64 编码文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-25T11:15:26.187

也许这来得太晚了，但为其他人“记录”它仍然是件好事。

在带有 MS SQL Server 2012 的 MS Server 2012 上尝试和测试远程桌面服务后，我收到了同样的错误。

在远程桌面服务安装过程中，要求创建一个（本地）证书，我就这样做了。完成测试/实验后，我删除了远程桌面服务。就在那时出现了这个错误（我不能说这个错误是否发生在使用 RDS 的测试期间，我不记得我是否在 RDS 测试期间使用/尝试过 SQL 连接）。

我不知道如何解决这个问题，因为默认证书对我不起作用，但“RDS”证书可以。

顺便说一句，证书位于应用程序：“SQL Server 配置管理器”->“SQL Server 网络配置”-> 右键单击​​：“协议”-> 选择“属性”-> 选项卡“证书”

我的默认 SQL 证书名为：ConfigMgr SQL Server 标识证书，到期日期：2114-06-09。

希望这可以给其他人一个提示。

/金

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-30T04:42:09.383

对我来说，这是因为只启用了 Windows 身份验证。更改安全认证模式。在 SQL Server Management Studio 对象资源管理器中，右键单击服务器，然后单击“属性”。在“安全”页面的“服务器身份验证”下，选择新的服务器身份验证模式，然后单击“确定”。更改服务器身份验证模式 - MSDN - Microsoft [https://msdn.microsoft.com/en-AU/library/ms188670.aspx](https://msdn.microsoft.com/en-AU/library/ms188670.aspx)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-11T21:40:30.963

这可能有助于作为参考

我遇到了同样的问题，在本网站和其他网站上多次试用建议的解决方案后，我找到了适合我的方案的解决方案。**帐户被锁定** 如何检查帐户是否被锁定... 使用更高权限的帐户（如 SA 或管理员权限）登录服务器 展开*安全性*==> 选择*登录名*==> 打开*属性*窗口login ==> 在属性窗口中选择*状态*页面

确保这**3**件事 1，连接数据库的权限已授予 2，登录已启用 3，**状态** SQL 服务器身份验证登录未锁定（**取消选中该框**）

谢谢齐格

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-29T09:37:50.967

我只是通过将它添加为第一条语句来执行 connection.close() 并解决了。然后我删除了这条线。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-04-26T19:57:15.753

对此进行跟进。我安装了只有 Windows 身份验证的 SQL Server 2014。启用混合模式后，我无法使用 SQL 用户登录，并收到与原始海报相同的错误消息。我验证了命名管道已启用，但在几次重新启动后仍然无法登录。使用 127.0.0.1 而不是主机名允许我登录，但有趣的是，在首次登录时需要密码重置提示：

[![SQL Server 密码重置提示](../Images/4319718288e4efe60196e4bd9bf1da68.png)](https://i.stack.imgur.com/Zjtcg.png)

一旦我重置密码，该帐户就可以工作。奇怪的是，我专门禁用了密码策略和过期。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-02-20T12:33:50.133

另一个原因是用户的默认数据库不可用。

我有一个用于备份两个数据库的帐户。当备份用户的默认数据库脱机时，“管道另一端没有进程”错误开始。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-08-20T14:45:59.627

来到这里寻找类似问题的解决方案，我刚刚通过使用 Nartac 的“IIS Crypto”更改我们的 IIS 服务器的 Schannel 设置来介绍这个问题......通过禁用 SHA-1 哈希，本地 SQL Server 无法成为达到了，即使我没有使用加密连接（对于使用共享内存访问本地 SQL Express 实例的 ASP.Net 站点没有用处）。

[!['SHA' 哈希算法需要激活 SQL Server 才能连接](../Images/c6bbb7ad4c0bf5c5ff7f09fc8c237479.png)](https://i.stack.imgur.com/gRBhZ.png)

感谢零计数为我指明了正确的方向:-)

因此，吸取的教训：如果您有本地 SQL Server 实例，请不要在 IIS 服务器上禁用 SHA-1。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-08-28T01:44:00.347

对我来说，这个问题似乎是由电源故障引起的。重新启动服务器计算机解决了它。

# web-services - 泽西客户端异常：未找到消息正文编写器

> ID：15585074
> 
> 赞同：8
> 
> 时间：2013-03-23T09:10:44.517
> 
> 标签：web-services, rest, jersey

我正在使用 Jersey 客户端访问 PHP Web 服务以实现图像上传功能。我收到以下异常：

```
Caused by: com.sun.jersey.api.client.ClientHandlerException: 
A message body writer for Java type, class 
com.sun.jersey.multipart.FormDataMultiPart, and MIME media type, 
multipart/form-data, was not found
    at com.sun.jersey.api.client.RequestWriter.writeRequestEntity(RequestWriter.java:288)
    at com.sun.jersey.client.urlconnection.URLConnectionClientHandler._invoke(URLConnectionClientHandler.java:204)
    at com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:147)
    ... 63 more 
```

这是我正在使用的代码：

```
WebResource webResource = Client.create().resource(HTTP_REST_URI);
JSONObject jSONObj = webResource.queryParams(queryParams)
      .type(MediaType.MULTIPART_FORM_DATA)
      .post(JSONObject.class, formDataMultiPart); 
```

如何解决此异常？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-05-20T20:54:15.593

`MultiPartWriter`在创建时注册提供者`Client`：

```
ClientConfig cc = new DefaultClientConfig();
Client client;

cc.getClasses().add(MultiPartWriter.class);
client = Client.create(cc); 
```

如果使用 Maven，这些是您需要的依赖项`pom.xml`：

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-client</artifactId>
    <version>1.17.1</version>
</dependency>
<dependency>
    <groupId>com.sun.jersey.contribs</groupId>
    <artifactId>jersey-multipart</artifactId>
    <version>1.17.1</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-23T16:51:59.420

Jersey（服务器或客户端）具有支持将 Java 类型转换为流的提供程序，反之亦然。您的代码返回（或接收）一个 Java 对象，并根据对象的类型和您使用的内容类型，Jersey 寻找合适的提供者来进行编组（或解组）。

提供者实现[MessageBodyReader](http://docs.oracle.com/javaee/6/api/javax/ws/rs/ext/MessageBodyReader.html)或[MessageBodyWriter](http://docs.oracle.com/javaee/6/api/javax/ws/rs/ext/MessageBodyWriter.html)接口，并且对于您的应用程序使用的每个 Java 类型和内容类型组合，您必须有一个知道如何处理组合的提供者。

您收到的消息告诉您，Jersey 找不到知道如何编组具有mime 类型的`FormDataMultiPart`对象的提供程序。`multipart/form-data`您需要提供一个，如果我没记错[的话，默认实现是在`jersey-multipart.jar`and `mimepull.jar`files](http://jersey.java.net/nonav/documentation/latest/chapter_deps.html#d4e1840)中找到的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-30T05:52:13.070

我遇到了同样的问题。它通过将 jersey-multipart jar 的 maven 依赖项从 1.0.2 更改为 1.8 版本来解决（在客户端和提供程序端使用相同的依赖项。

```
 <dependency>
                <groupId>com.sun.jersey.contribs</groupId>
                <artifactId>jersey-multipart</artifactId>
                <version>1.8</version>
             </dependency> 
```

这是我正在使用的完整代码

```
File file = new File("E:/Goodies/tmp/sparrow.jpg");
byte[] logo = FileUtils.readFileToByteArray(file);

MultiPart multiPart = new MultiPart().bodyPart(new BodyPart(logo, MediaType.APPLICATION_OCTET_STREAM_TYPE));

// POST the request
try{
ClientResponse response = service.type("multipart/mixed").post(ClientResponse.class, multiPart);
System.out.println("Response Status : " + response.getEntity(String.class));
}catch(Exception e){
    e.printStackTrace();
} 
```

在网络服务中：

```
@POST
@Consumes("multipart/mixed")
@Path("/upload")
public Response post(MultiPart multiPart) {

    BodyPartEntity bpe = (BodyPartEntity) multiPart.getBodyParts().get(0)
            .getEntity();

    boolean isProcessed = false;
    String message = null;
    try {
        InputStream source = bpe.getInputStream();
        BufferedImage bi = ImageIO.read(source);

        File file = new File("E:/Goodies/tmp" + "123.jpg");

        // storing the image to file system.
        if (file.isDirectory()) {
            ImageIO.write(bi, "jpg", file);
        } else {
            file.mkdirs();
            ImageIO.write(bi, "jpg", file);
        }
        isProcessed = true;
    } catch (Exception e) {
        message = e.getMessage();
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-04T10:49:10.237

您需要检查的几件事

将 mimepull.jar 添加到您的库或使用 Maven

```
`<dependency>
    <groupId>org.jvnet.mimepull</groupId>
    <artifactId>mimepull</artifactId>
    <version>1.9.5</version>
</dependency>` 
```

如果您正在使用文件，请确保在标题处发送**content-length content-type accept-encoding**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-16T00:22:20.730

这是我的工作：

```
 WebResource webResource =
                jerseyClient.resource("www.api.com");
        WebResource.Builder requestBuilder = webResource.getRequestBuilder();
        requestBuilder.header("content-type", "application/json");
        ClientResponse response = requestBuilder
                .post(ClientResponse.class, mObjectMapper.writeValueAsString(new RequestObject(longUrl)));
        String text = response.getEntity(String.class);
        ResponseObject outcome = mObjectMapper.readValue(text, ResponseObject.class); 
```

我使用 Jackson`ObjectMapper`来序列化请求有效负载，并同样将结果反序列化为`ResponseObject`使用`ObjectMapper`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-16T13:06:58.970

我在`web.xml`. 问题解决了。

```
<init-param>
   <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
   <param-value>true</param-value>
</init-param> 
```

# python - Pygame显示卡尔曼滤波器

> ID：15585077
> 
> 赞同：3
> 
> 时间：2013-03-23T09:11:00.790
> 
> 标签：python, pygame

我正在使用卡尔曼滤波器来估计机器人的状态（在线）。出于调试目的，我想实时显示其状态，最好是在 pygame 窗口中（因为环境已经在 pygame 中绘制）。给定均值和协方差矩阵，是否可以在 pygame 中显示正确的椭圆？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:34:57.360

您可以将所有 matplotlib 的东西与 pygame 一起使用，它会让您的绘图工作更轻松

[http://www.pygame.org/wiki/MatplotlibPygame](http://www.pygame.org/wiki/MatplotlibPygame)

对于 matplotlib 部分，请查看此处的 [多维置信区间](https://stackoverflow.com/questions/12301071/multidimensional-confidence-intervals)

# ruby-on-rails - Mongoid中的模糊关系

> ID：15585079
> 
> 赞同：8
> 
> 时间：2013-03-23T09:11:14.090
> 
> 标签：ruby-on-rails, mongodb, mongoid

我试图在 Post 模型中使用 viewer_ids 来保存 user_ids，并在 User 模型中使用 viewer_ids 来保存被查看的 post_ids。使用 Rspec 进行测试以添加/删除和访问来自用户的关系时，它工作得很好。但是当我使用 RABL 来查看帖子时——在嵌入用户数据的情况下——它会变得混乱并给我一个模糊的关系。

```
#Post class
belongs_to :user
has_and_belongs_to_many :viewers, class_name: 'User', inverse_of: :viewed  

#User class
has_many :users
has_and_belongs_to_many :viewed, class_name: 'Post', inverse_of: :viewers 
```

## Mongoid::Errors::AmbiguousRelationship in Posts#show

```
Problem:
Ambiguous relations :posts, :viewed defined on User.
Summary:
When Mongoid attempts to set an inverse document of a relation in memory, it needs to know which relation it belongs to. When setting :user, Mongoid looked on the class Post for a matching relation, but multiples were found that could potentially match: :posts, :viewed.
Resolution:
On the :user relation on Post you must add an :inverse_of option to specify the exact relationship on User that is the opposite of :user. 
```

那么问题是什么，我正在定义关系和它们的倒数。是否不可能有与关系相反的不同数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T12:04:09.140

问题是在模型上具有同一类的多个关系时。因此，一旦添加了 nn，每边就有 2 个用户关系和 2 个帖子关系。

```
#Post class
belongs_to :user, inverse_of: :posts
has_and_belongs_to_many :viewers, class_name: 'User', inverse_of: :viewed  

#User class
has_many :posts, inverse_of: :user
has_and_belongs_to_many :viewed, class_name: 'Post', inverse_of: :viewers 
```

Thanks to Duran for his clearing this up [https://jira.mongodb.org/browse/MONGOID-2923?focusedCommentId=982950&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-982950](https://jira.mongodb.org/browse/MONGOID-2923?focusedCommentId=982950&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-982950)

# jquery - 删除所有 Adob e Flash (Object) 广告

> ID：15585083
> 
> 赞同：1
> 
> 时间：2013-03-23T09:12:37.020
> 
> 标签：jquery, object

我正在抓取一些网站，我想去掉页面上的 Adob​​e Flash 广告。我认为它们是“对象”，所以我做了：

```
window.setInterval(MyFunction, 900);

function MyFunction() { 

  $('object').remove();

alert('test'); 

} 
```

我看到了警报，但没有删除“对象”。这怎么可能？我还能尝试什么？

这是（其中一个）广告的外观：

```
<script src="http://ad.nl.doubleclick.net/adj/P4442.Nu.nl/home;sz=468x60,728x90;dcopt=ist;tile=1;kw=;tt=1000;gr=-5;rg=0;nk=0;u=m6re350ar;;ord=4884951752610505?" type="text/javascript" style="position: relative; margin: 0px; padding: 0px; width: auto; height: auto; border: none; float: left; background-image: none; background-position: initial initial; background-repeat: initial initial;"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:41:14.790

您的 Flash 广告可能使用`<embed>`元素而不是`<object>`. 例如，我只是尝试加载[http://www.drudgereport.com/](http://www.drudgereport.com/)几次，并在不同时间找到了这两种元素类型。`$('object').length`您可以通过记录和找出哪些存在`$('embed').length`。要删除它们，您可以使用：

```
$('embed,object').length 
```

因此，在您的函数中添加了一些日志记录代码：

```
function MyFunction() {
    console.log( 'Objects:', $('object').length );
    console.log( 'Embeds:', $('embed').length );
    $('embed,object').remove();
    console.log( 'Objects after:', $('object').length );
    console.log( 'Embeds after:', $('embed').length );
} 
```

您的 0.9 秒超时也可能不够。运行代码并稍等片刻后，您可以`console.log()`再次尝试这些调用，看看结果如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:24:14.837

```
setTimeout(function() {
    $('object').remove();  
}, 900); 
```

# windows-8 - winrt中带水印的PasswordBox

> ID：15585086
> 
> 赞同：2
> 
> 时间：2013-03-23T09:12:52.517
> 
> 标签：windows-8, passwords, winrt-xaml

是否可以在 WinRt 中获得水印密码框？获取带有水印的文本框是没有问题的，但是我不知道可以在其中获取带有水印的密码框的工具包。

我怎样才能为自己实现一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-07T12:39:22.910

看看[WinRT XAML 工具包](http://winrtxamltoolkit.codeplex.com/)。

他们还有

1.  水印文本框
2.  水印密码框

您可以自己实现自己的控件：

在 .xaml 中：

```
 <Border x:Name="brdPassword" Margin="5,0,5,10" BorderThickness="2" BorderBrush="White" CornerRadius="5" Grid.Row="0"
                                Background="White" Height="50" VerticalAlignment="Stretch">
                           <Grid>
                <TextBox x:Name="PasswordWatermark" TextWrapping="Wrap" 
                          Text="Watermark"  Foreground="#FFC4C4C4" IsHitTestVisible="False" 
                          Background="{x:Null}" BorderThickness="0" Padding="0,-10" 
                          FontSize="26.667" />
                 <PasswordBox x:Name="pbPassword" LostFocus="PasswordLostFocus"
                         GotFocus="PasswordGotFocus" Background="{x:Null}" 
                         FontSize="26.667" Margin="0,-12,0,-9" VerticalAlignment="Center"
                         BorderThickness="0" Opacity="0" />
                </Grid>
                </Border> 
```

在.cs

```
 private void PasswordLostFocus(object sender, RoutedEventArgs e)
    {
        CheckPasswordWatermark();
    }

    private void CheckPasswordWatermark()
    {
        var passwordEmpty = string.IsNullOrEmpty(pbPassword.Password);
        PasswordWatermark.Opacity = passwordEmpty ? 100 : 0;
        pbPassword.Opacity = passwordEmpty ? 0 : 100;
    }

    private void PasswordGotFocus(object sender, RoutedEventArgs e)
    {
        PasswordWatermark.Opacity = 0;
        pbPassword.Opacity = 100;
    } 
```

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T12:15:43.957

我认为我们不能在密码控件中添加水印。您可以将带有wartermark的TextBox与Password控件放在同一行和同一列中，然后处理两个控件的GotFocus和LostFocus事件以使控件可见或折叠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T03:51:28.027

目前还没有提供水印密码框的工具包。但是，这可能会有所帮助：-

[http://code.msdn.microsoft.com/windowsdesktop/Watermarked-TextBox-and-444ebdec](http://code.msdn.microsoft.com/windowsdesktop/Watermarked-TextBox-and-444ebdec)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-04T04:50:54.883

此外，请查看[http://julmar.com/blog/mark/?p=300](http://julmar.com/blog/mark/?p=300)，了解 WinRT 的 Textbox 和 PasswordBox 实现。

# c++ - 错误是什么意思？关于 C++ 模板参数

> ID：15585090
> 
> 赞同：-1
> 
> 时间：2013-03-23T09:13:11.547
> 
> 标签：c++, templates

```
#include <stdio.h>

template<typename T, typename T2, template <typename T> class TemplateClass>

class TemplateTemplateClass {
public:
    TemplateTemplateClass(const TemplateClass& tempClass)
        : _internalClass(tempClass) {
    }

    void doTest() {
        _internalClass.doTest();
    }
private:
    TemplateClass _internalClass;
}; 
```

上面的代码在编译时会给出如下错误信息：

```
$ g++ TemplateTemplateClass.cpp
TemplateTemplateClass.cpp:7:33: error: invalid use of template-name 'TemplateClass' without an argument list
TemplateTemplateClass.cpp:7:48: error: ISO C++ forbids declaration of 'tempClass' with no type [-fpermissive]
TemplateTemplateClass.cpp:15:5: error: invalid use of template-name 'TemplateClass' without an argument list
TemplateTemplateClass.cpp: In constructor 'TemplateTemplateClass<T, T2, TemplateClass>::TemplateTemplateClass(const int&)':
TemplateTemplateClass.cpp:8:11: error: class 'TemplateTemplateClass<T, T2, TemplateClass>' does not have any field named '_internalClass'
TemplateTemplateClass.cpp: In member function 'void TemplateTemplateClass<T, T2, TemplateClass>::doTest()':
TemplateTemplateClass.cpp:12:9: error: '_internalClass' was not declared in this scope 
```

如果我像下面这样更改它，那么它可以成功编译。

```
class TemplateTemplateClass {
public:
    TemplateTemplateClass(const TemplateClass<T>& tempClass)
        : _internalClass(tempClass) {
    }

    void doTest() {
        _internalClass.doTest();
    }
private:
    TemplateClass<T> _internalClass;
}; 
```

所以考虑到上面的错误信息，我的问题是 in 是`TemplateClass<T>`什么`<T>`意思？为什么不能删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:16:35.113

您已经告诉编译器这`TemplateClass`是一个采用单一类型参数的模板：

```
template<typename T, typename T2, template <typename T> class TemplateClass>
                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

现在，为了使用`TemplateClass`，您必须告诉编译器该参数是什么，例如`T`、`T2`、`int`等`std::string`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T09:18:06.967

```
template <typename T> class TemplateClass 
```

说`TemplateClass`是一个模板类。在您提供所需类型之前，模板是不完整的类。在这种情况下，您应该提供`T`.

# json - 比较extjs中的两个json数据

> ID：15585094
> 
> 赞同：0
> 
> 时间：2013-03-23T09:13:49.677
> 
> 标签：json, extjs

我有一个带有 LeaveTypeName 和 id 的 json。我有另一个只有 id 的 json。我如何将 LeavetypeName 获取到第二个 json 的指定 ID。第二个 json 只携带 ID 和一些其他数据，但我需要特定 ID 的 LeavetypeName被展示！请帮忙

> 第一个带有 ID 和 LeavetypeName 的 json

```
 {
        "LeaveTypes": [
            {
                "ID": 60,
                "LeavetypeName": "Casual Leave"
            },
            {
                "ID": 61,
                "LeavetypeName": "Sick Leave"
            },
            {
                "ID": 62,
                "LeavetypeName": "Privilege Leave"
            },
            {
                "ID": 63,
                "LeavetypeName": "Maternity Leave"
            },
            {
                "ID": 64,
                "LeavetypeName": "Hospitalization Leave"
            },
            {
                "ID": 65,
                "LeavetypeName": "Bereavement Leave"
            },
            {
                "ID": 66,
                "LeavetypeName": "Medical Leave"
            },
            {
                "ID": 67,
                "LeavetypeName": "Paternity Leave"
            },
            {
                "ID": 68,
                "LeavetypeName": "Compensatory Leave"
            },
            {
                "ID": 69,
                "LeavetypeName": "Loss of Pay Leave"
            }
        ]
    } 
```

> 第二个 json.it 有 LeaveTypeId 而不是我想在显示器中显示 Leavetypename。

```
[
    {
        "ID": 37,
        "LeaveEligibility": [
            {
                "Availed": 4,
                "Fullpaydays": 6,
                "Halfpaydays": 0,
                "ID": 1,
                "LeaveTypeId": 60,
                "PersonId": 37,
                "YearOfLeave": 2013
            },
            {
                "Availed": 2,
                "Fullpaydays": 6,
                "Halfpaydays": 0,
                "ID": 3,
                "LeaveTypeId": 61,
                "PersonId": 37,
                "YearOfLeave": 2013
            },
            {
                "Availed": 10,
                "Fullpaydays": 10,
                "Halfpaydays": 0,
                "ID": 4,
                "LeaveTypeId": 62,
                "PersonId": 37,
                "YearOfLeave": 2013
            },
            {
                "Availed": 0,
                "Fullpaydays": 8,
                "Halfpaydays": 0,
                "ID": 6,
                "LeaveTypeId": 63,
                "PersonId": 37,
                "YearOfLeave": 2013
            }
        ],
        "LeaveHistory": [
            {
                "AppliedTo": "Vibha",
                "ApprovalDate": "3/12/2013 12:00:00 AM",
                "ApprovedBy": 12,
                "Duration": 3,
                "FromDate": "3/24/2013 12:00:00 AM",
                "FullPayDays": 3,
                "HalfPayDays": 0,
                "ID": 1,
                "LeaveTypeId": 60,
                "LossOfPayDays": 0,
                "PersonId": 37,
                "Remarks": "onnulla",
                "StatusId": 79,
                "SubstitutePersonId": 13,
                "ToDate": "3/26/2013 12:00:00 AM"
            },
            {
                "AppliedTo": "Vibha",
                "ApprovalDate": "3/12/2013 12:00:00 AM",
                "ApprovedBy": 12,
                "Duration": 1,
                "FromDate": "3/30/2013 12:00:00 AM",
                "FullPayDays": 1,
                "HalfPayDays": 0,
                "ID": 2,
                "LeaveTypeId": 60,
                "LossOfPayDays": 0,
                "PersonId": 37,
                "Remarks": "onnulla",
                "StatusId": 79,
                "SubstitutePersonId": 13,
                "ToDate": "3/31/2013 12:00:00 AM"
            },
            {
                "AppliedTo": "Shyam",
                "ApprovalDate": "",
                "ApprovedBy": 0,
                "Duration": 2,
                "FromDate": "2/13/2013 12:00:00 AM",
                "FullPayDays": 2,
                "HalfPayDays": 0,
                "ID": 4,
                "LeaveTypeId": 61,
                "LossOfPayDays": 0,
                "PersonId": 37,
                "Remarks": "blha blah",
                "StatusId": 70,
                "SubstitutePersonId": 1,
                "ToDate": "2/14/2013 12:00:00 AM"
            },
            {
                "AppliedTo": "Shyam",
                "ApprovalDate": "2/13/2013 4:35:16 PM",
                "ApprovedBy": 2,
                "Duration": 5,
                "FromDate": "3/23/2013 12:00:00 AM",
                "FullPayDays": 5,
                "HalfPayDays": 0,
                "ID": 5,
                "LeaveTypeId": 62,
                "LossOfPayDays": 0,
                "PersonId": 37,
                "Remarks": "oh..",
                "StatusId": 71,
                "SubstitutePersonId": 1,
                "ToDate": "3/27/2013 12:00:00 AM"
            },
            {
                "AppliedTo": "Shyam",
                "ApprovalDate": "2/13/2013 4:35:16 PM",
                "ApprovedBy": 2,
                "Duration": 5,
                "FromDate": "3/28/2013 12:00:00 AM",
                "FullPayDays": 5,
                "HalfPayDays": 0,
                "ID": 6,
                "LeaveTypeId": 62,
                "LossOfPayDays": 0,
                "PersonId": 37,
                "Remarks": "oh..",
                "StatusId": 71,
                "SubstitutePersonId": 1,
                "ToDate": "3/29/2013 12:00:00 AM"
            }
        ],
        "PLavailedcount": 2
    }
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:04:36.577

您是否尝试过：

```
Ext.data.JsonStore.findRecord( fieldName, value, [startIndex], [anyMatch], [caseSensitive], [exactMatch] ) : Ext.data.Model 
```

文档[在这里](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.data.JsonStore-method-findRecord)。

?

# javascript - Signalr 与查询参数的持久连接。

> ID：15585100
> 
> 赞同：11
> 
> 时间：2013-03-23T09:15:18.587
> 
> 标签：javascript, asp.net, signalr

我有一个持久连接，我想从使用查询参数的一些种子信息开始。这是连接中的覆盖。

```
 protected override Task OnConnected(IRequest request, string connectionId)
    {
        //GET QUERY PARAMS HERE

        return base.OnConnected(request, connectionId);
    } 
```

现在我在 global.asax 文件中设置了我的路线，如下所示。

> RouteTable.Routes.MapConnection("myconnection", "/myconnection");

客户端代码看起来像这样

```
var connection = $.connection('/myconnection');

connection.start()
          .done(() =>
          {
          }); 
```

有人可以告诉我如何将查询字符串参数传递给这个连接，这样我就可以在覆盖中读取它们，因为我似乎在这方面遇到了障碍。

干杯希望有人可以帮助，

戴夫

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-23T09:43:13.787

**集线器**

```
 var connection = $.connection('/myconnection');
    $.connection.hub.qs = "name=John"; //pass your query string 
```

并在服务器上获取它

```
var myQS = Context.QueryString["name"]; 
```

要在 javascript 中访问您的查询字符串，您可以使用类似

```
function getQueryStringValueByKey(key) {
    var url = window.location.href;
    var values = url.split(/[\?&]+/);
    for (i = 0; i < values.length; i++) {
            var value = values[i].split("=");
            if (value[0] == key) {
                return value[1];
        }
    }
} 
```

称它为：

```
var name = getQueryStringValueByKey("name"); 
```

**持续连接**

```
//pass your query string
var connection = $.connection('/myconnection', "name=John", true);

protected override Task OnConnected(IRequest request, string connectionId)
    {
        //get the name here
        var name = request.QueryString["name"];

        return base.OnConnected(request, connectionId);
    } 
```

以下是您可以了解更多信息的源代码：[https ://github.com/SignalR/SignalR/blob/master/src/Microsoft.AspNet.SignalR.Client.JS/jquery.signalR.core.js#L106](https://github.com/SignalR/SignalR/blob/master/src/Microsoft.AspNet.SignalR.Client.JS/jquery.signalR.core.js#L106)

# python - 将菜单中的复选按钮的默认值设置为 True

> ID：15585101
> 
> 赞同：5
> 
> 时间：2013-03-23T09:15:36.503
> 
> 标签：python, tkinter

**目标**

我正在应用程序中创建一个菜单。在那我想要一个单选按钮。默认情况下，我希望单选按钮处于`on`状态。

**研究**

我找到了如何使用[TKinter effbot](http://effbot.org/tkinterbook/menu.htm)`options.add_radiobutton()`此处的命令 添加单选按钮。但我仍然不知道需要使用哪些选项，因此默认设置为打开。

**代码**

```
optionsmenu = Menu(menubar,tearoff=0)

optionsmenu.add_radiobutton(label='Pop Up set to on??',command=self.togglePopUp) 
```

代码`self.togglePopUp`：

```
def togglePopUp(self,event=None):
    if self.showPopUp:
        self.showPopUp = False

    else:
        self.showPopUp = True 
```

我将初始化`self.showPopUp`为`True`.

**请**帮助我将单选按钮设置为`on`默认模式下的位置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T14:46:52.410

如果你想切换布尔值，我建议你使用`add_checkbutton()`而不是`add_radiobutton()`.

使用单选按钮，您只有一个静态`value`选项，单击条目时不会更改。另一方面，复选按钮允许您在`onvalue`和`offvalue`选项之间进行切换。

```
self.var = IntVar(root)
self.var.set(1)
optionsmenu.add_checkbutton(label='Pop Up set to on??', command=self.togglePopUp,
                            variable=self.var, onvalue=1, offvalue=0) 
```

请注意，您必须用作meny 条目的变量的IntVar 可以替换该`self.togglePopUp`变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:21:15.270

正如@A Rodas 所提到的：

```
self.var = IntVar()

self.var.set(1)

optionsmenu.add_checkbutton(label='Pop Up set to on??', command=self.togglePopUp,
                            variable=self.var, onvalue=1, offvalue=0) 
```

要取回此变量的值，请使用：

```
if self.var.get() == 1:
    self.showpopup()

else:

    print 'popup has been disabled. you can toggle this option in the options menu' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-30T16:38:59.430

根据我的说法，最简单的方法是使用默认值 1 初始化变量。

```
var = IntVar(value=1) 
```

# netbeans - 创建会话 bean 时出错

> ID：15585105
> 
> 赞同：3
> 
> 时间：2013-03-23T09:16:00.513
> 
> 标签：netbeans, ejb, javabeans

我正在尝试“Hello World！使用 Glassfish3+ 和 netbeans 7.2 的远程无状态会话 Bean 示例，并在创建会话 bean 时出现错误说明-“没有合适的项目可以存储远程接口。需要一个基于 Ant 的开放式 Java 类库项目”。这是什么意思以及如何解决问题以及我该如何进行。是否需要任何额外的安装。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T10:34:00.690

行。因此，Netbeans 尝试对您实施最佳实践。在这种情况下，最好将远程接口放在单独的 Java 库中，因为其他客户端可能会使用它。所以这是你应该采取的步骤。

创建一个新的**Java 类库**项目 ![在此处输入图像描述](../Images/24f9cb234fed37b5dc6b9c7fc27ec20c.png) 右键单击​​您的 EJB 模块，单击属性并将该项目添加到您的 EJB 模块库中。 ![在此处输入图像描述](../Images/35a8bd4c45e2157732665dfc625bce72.png) 现在，当您使用远程接口创建新的会话 Bean 时，您应该会看到您的库类。 ![在此处输入图像描述](../Images/8bebc5ab76c38c3bb111b3dc8577ffdd.png)

# php - 如何使用 jquery 自动完成从 mysql 数据库中加载数据？

> ID：15585106
> 
> 赞同：0
> 
> 时间：2013-03-23T09:16:00.820
> 
> 标签：php, jquery, mysql, smarty

我想创建一个搜索框，它显示与我们在框中输入的相关数据库中的匹配记录列表，我有使用 Jquery 的自动完成功能。没关系，但我想从我的数据库表中选择记录，而不是在 var availableTags 中手动提供它。我想在下面的代码中从数据库中获取 var availableTags 中的记录..

这是我的 Smarty 模板代码.....

我的 Html:(searchh.tpl)

```
{block name=head}
    <title>Untitled Document</title>
      <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
      <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
      <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
      <link rel="stylesheet" href="/resources/demos/style.css" />
      <script>

    }   
      $(function() {
        var availableTags = [
          "Python",
          "Ruby",
          "Scala",
          "Scheme"
        ];
        $( "#tags" ).autocomplete({
          source: availableTags     
        });
      });

      </script>
    {/block}
    {block name=body}
    <div class="ui-widget">
      <label for="tags">Tags: </label>
      <input id="tags" />
    </div>
    {/block} 
```

我的 php :(searchh.php)

```
<?php 
    include("include/config.inc.php");
    $pArray = 0;
    $search = isset($_POST['search']) && ($_POST["search"] != "") ? $_POST['search']:''; 
    if($search != '')
    {   
      $query="select * from party where partyName like '%$search%' ";
      $result = mysql_query($query);
      $pArray = array();
      $n = 0;
      while ($row = mysql_fetch_array($result)) 
      {
        $pArray[$n]['partyId']   = $row['partyId'];
        $pArray[$n]['partyName'] = $row['partyName'];
        $n++;
      }
    }
    include("./bottom.php");
    $smarty->assign("search",$search);
    $smarty->assign("pArray",$pArray);
    $smarty->display('searchh.tpl');
    ?> 
```

如果有人可以提供帮助，将非常感谢我。谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:29:57.107

更改您的 url 路径，例如 {$smarty.server.PHP_SELF | dirname}.balanceAj.php 并在 ajax 函数中使用 get 方法并使用 post 方法获取数据。如果您使用 get 方法发送数据（用于获取数据 $_GET[]）和 Post 方法使用（用于获取数据 $_post[]）

# android - 如何更改 mylocationoverlay 的结果？

> ID：15585109
> 
> 赞同：-1
> 
> 时间：2013-03-23T09:16:26.653
> 
> 标签：android, android-mapview, android-maps

我正在使用 mylocationoverlay 来提供我当前的位置，但是，它并不完全准确。有时误差可达 20 米。我希望能够将位置标记移动到我的确切位置。使用以下代码时，当我按下标记时，地图移动并且标记保持在同一位置。如何保持地图静态并允许用户移动标记？

```
 public class selectmap extends MapActivity {
         private MapView mapView;
         @Override
         public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.selectmap);
            mapView = (MapView) findViewById(R.id.map_view);      
            mapView.setBuiltInZoomControls(true);
            final MyLocationOverlay myLocationOverlay = new MyLocationOverlay(this, mapView);
            myLocationOverlay.enableMyLocation();
            mapView.getController().setZoom(17);
            mapView.getOverlays().add(myLocationOverlay);
            mapView.postInvalidate();
          }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:31:44.737

您必须编写自己的实现来处理这种情况。这是一个示例应用程序，您可以在其中移动标记

[https://github.com/commonsguy/cw-advandroid/tree/master/Maps/NooYawkTouch/](https://github.com/commonsguy/cw-advandroid/tree/master/Maps/NooYawkTouch/)

# asp.net - 使用 jquery-ajax 上传文件，路径在字符串中

> ID：15585113
> 
> 赞同：0
> 
> 时间：2013-03-23T09:16:52.070
> 
> 标签：asp.net, json, jquery, c#-2.0

我正在使用 C# 开发 ASP.net 2.0 Web 应用程序。

我需要上传一个文件路径为字符串的文件。

cs文件中的方法

```
 [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string SendContactUsEmail(string volume, ...., string strFileName, string message)
    {
    // Other parameter is removed in method and written ...
    // Need to upload file where path of the file is in string strFileName
    //rqContact.PakkagingfileName = $('#packagingFile').val(); = strFileName
    } 
```

从 script.js 传递的值如下：

```
if(reqType == '5')                                    
{   
    rqContact.height = $('#height').val();  
    rqContact.PakkagingfileName = $('#packagingFile').val();
}

$.ajax({                            
    type: 'POST',                       
    url: $('#webServiceUrl').val() + "/SendContactUsEmail",
    contentType:"multipart/form-data; charset=utf-8",
    //contentType:"application/json; charset=utf-8",                        
dataType: 'json',                           
    data: JSON.stringify(rqContact),  
    error: function(){                       
       //alert("Error in Contact-us Ajax call");
      } ,

     success: function( response )
       {                            
         trckContactUsEvent()
         if (form.find( '.actionurl' ).attr('name') == 'actionurlcontactus'){
        Cufon.refresh('.cufon-text');

        $('.resultContainer p').html(response);
        $('.resultContainer').attr('data-status','success');
        $('.result').show();
        $('.result').modal({
            opacity:70,
            overlayCss: {backgroundColor:'#000000'},
            containerId: 'simplemodal-container4',
            containerCss: {height:'48px'}
        });
       }
}
}); 
```

请告知如何上传文件。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T05:01:58.853

您可以使用[Ajax Upload](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AjaxFileUpload/AjaxFileUpload.aspx)来上传您的文件。您必须为您的上传生成一个 .ashx（通用处理程序）。您可以将文件的路径发送到处理程序并将文件保存到处理程序中的路径。本[教程](http://aspsnippets.com/Articles/Implement-Uploadify-jQuery-Plugin-in-ASPNet.aspx)介绍如何使用 Uploadify jquery 插件上传文件。我不建议您使用 Uploadify，但本教程可以帮助您学习如何使用 General Handler。

# glassfish - Glassfish 无法启动

> ID：15585121
> 
> 赞同：0
> 
> 时间：2013-03-23T09:18:04.517
> 
> 标签：glassfish

我正在运行 Ubuntu 12.04 LTS 的 vps 服务器上安装 Glassfish 3.1.2，但我无法启动 glassfish。

由于未安装 X，并且我通过 ssh 连接，因此我使用手动解压缩方法安装 Glassfish。

在 Glassfish 的 bin 目录中，我使用 glassfish 用户执行 ./asadmin start-domain 并没有任何反应。好像挂了 我什至无法用 ctrl+c 停止它。我需要从另一个控制台终止 java 进程。

域中的 server.log 文件没有显示任何错误。最后两行是：

```
mar 23, 2013 1:12:03 AM com.sun.enterprise.admin.launcher.GFLauncherLogger info
INFO: Se ha iniciado correctamente en 7 mseg. 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-01T11:29:19.713

我在安装 glassfish 时遇到了同样的问题。我通过在旧版本的 jre 上运行 Glassfish 解决了这个问题。我尝试使用 1.8 版进行安装，最终使用了旧的 jre6 安装。在我使用 1.6 版安装 Glassfish 后，服务器启动正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T14:15:29.157

它看起来像日志级别的错误。GFFileHandler 日志级别可能设置为“OFF”。

尝试这个：

```
asadmin start-domain
asadmin set-log-levels com.sun.enterprise.server.logging.GFFileHandler=ALL
asadmin restart-domain 
```

# asp.net-mvc-4 - 在 mvc4 中创建 Jqplot 折线图

> ID：15585124
> 
> 赞同：0
> 
> 时间：2013-03-23T09:18:11.173
> 
> 标签：asp.net-mvc-4, jqplot

这是我为 Json 获取的字符串。请建议我如何使用它在 mvc4 中使用 razor c# 创建 Jqplot 折线图。x 轴是日期字符串（即下午 3 点、下午 4 点等），y 轴是需求值。

```
[{"Demand":4422.45,"Supply":17660,"Date":"\/Date(1236504600000)\/","DateString":"3 PM"},
{"Demand":5019.27,"Supply":20699,"Date":"\/Date(1236508200000)\/","DateString":"4 PM"},
{"Demand":5030.35,"Supply":19917,"Date":"\/Date(1236511800000)\/","DateString":"5 PM"},
{"Demand":5172.35,"Supply":23597,"Date":"\/Date(1236515400000)\/","DateString":"6 PM"},
{"Demand":5656.51,"Supply":21572,"Date":"\/Date(1236519000000)\/","DateString":"7 PM"},
{"Demand":4622.88,"Supply":7794,"Date":"\/Date(1236522600000)\/","DateString":"8 PM"},
{"Demand":3116.21,"Supply":3427,"Date":"\/Date(1236526200000)\/","DateString":"9 PM"},
{"Demand":1588.83,"Supply":1883,"Date":"\/Date(1236529800000)\/","DateString":"10 PM"},
{"Demand":1394.15,"Supply":1403,"Date":"\/Date(1236533400000)\/","DateString":"11 PM"},
{"Demand":1321.76,"Supply":3755,"Date":"\/Date(1236537000000)\/","DateString":"12 AM"},
{"Demand":1130.98,"Supply":3474,"Date":"\/Date(1236540600000)\/","DateString":"1 AM"},
{"Demand":1277.1,"Supply":1072,"Date":"\/Date(1236544200000)\/","DateString":"2 AM"},
{"Demand":1214.68,"Supply":1025,"Date":"\/Date(1236547800000)\/","DateString":"3 AM"},
{"Demand":2117.91,"Supply":1198,"Date":"\/Date(1236551400000)\/","DateString":"4 AM"},
{"Demand":1658.97,"Supply":1485,"Date":"\/Date(1236555000000)\/","DateString":"5 AM"},
{"Demand":1997.36,"Supply":3126,"Date":"\/Date(1236558600000)\/","DateString":"6 AM"},
{"Demand":2147.37,"Supply":4785,"Date":"\/Date(1236562200000)\/","DateString":"7 AM"},
{"Demand":2114.13,"Supply":5268,"Date":"\/Date(1236565800000)\/","DateString":"8 AM"},
{"Demand":2389.84,"Supply":5264,"Date":"\/Date(1236569400000)\/","DateString":"9 AM"},
{"Demand":2240.77,"Supply":5526,"Date":"\/Date(1236573000000)\/","DateString":"10 AM"},
{"Demand":1802.43,"Supply":4530,"Date":"\/Date(1236576600000)\/","DateString":"11 AM"},
{"Demand":1929.71,"Supply":6618,"Date":"\/Date(1236580200000)\/","DateString":"12 PM"},
{"Demand":545.65,"Supply":2767,"Date":"\/Date(1236583800000)\/","DateString":"1 PM"},
{"Demand":0,"Supply":1,"Date":"\/Date(1236587400000)\/","DateString":"2 PM"}] 
```

编辑：代码

```
 <script src="~/Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>  
            <script src="~/Scripts/jqPlot/jquery.jqplot.js" type="text/javascript"></script>
            <link href="~/Content/jquery.jqplot.css" rel="stylesheet" type="text/css" />
            <script type="text/javascript" src="~/Scripts/jqPlot/jqplot.highlighter.min.js"></script>
            <script type="text/javascript" src="~/Scripts/jqPlot/jqplot.cursor.min.js"></script>
            <script type="text/javascript" src="~/Scripts/jqPlot/jqplot.dateAxisRenderer.min.js"></script>

            <script type="text/javascript">
            $(document).ready(function () {

            var rawData = [{ "Demand": 4422.45, "Supply": 17660, "Date": "/Date(1236504600000)/", "DateString": "3 PM" }, { "Demand": 5019.27, "Supply": 20699, "Date": "/Date(1236508200000)/", "DateString": "4 PM" }, { "Demand": 5030.35, "Supply": 19917, "Date": "/Date(1236511800000)/", "DateString": "5 PM" }, { "Demand": 5172.35, "Supply": 23597, "Date": "/Date(1236515400000)/", "DateString": "6 PM" }, { "Demand": 5656.51, "Supply": 21572, "Date": "/Date(1236519000000)/", "DateString": "7 PM" }, { "Demand": 4622.88, "Supply": 7794, "Date": "/Date(1236522600000)/", "DateString": "8 PM" }, { "Demand": 3116.21, "Supply": 3427, "Date": "/Date(1236526200000)/", "DateString": "9 PM" }, { "Demand": 1588.83, "Supply": 1883, "Date": "/Date(1236529800000)/", "DateString": "10 PM" }, { "Demand": 1394.15, "Supply": 1403, "Date": "/Date(1236533400000)/", "DateString": "11 PM" }, { "Demand": 1321.76, "Supply": 3755, "Date": "/Date(1236537000000)/", "DateString": "12 AM" }, { "Demand": 1130.98, "Supply": 3474, "Date": "/Date(1236540600000)/", "DateString": "1 AM" }, { "Demand": 1277.1, "Supply": 1072, "Date": "/Date(1236544200000)/", "DateString": "2 AM" }, { "Demand": 1214.68, "Supply": 1025, "Date": "/Date(1236547800000)/", "DateString": "3 AM" }, { "Demand": 2117.91, "Supply": 1198, "Date": "/Date(1236551400000)/", "DateString": "4 AM" }, { "Demand": 1658.97, "Supply": 1485, "Date": "/Date(1236555000000)/", "DateString": "5 AM" }, { "Demand": 1997.36, "Supply": 3126, "Date": "/Date(1236558600000)/", "DateString": "6 AM" }, { "Demand": 2147.37, "Supply": 4785, "Date": "/Date(1236562200000)/", "DateString": "7 AM" }, { "Demand": 2114.13, "Supply": 5268, "Date": "/Date(1236565800000)/", "DateString": "8 AM" }, { "Demand": 2389.84, "Supply": 5264, "Date": "/Date(1236569400000)/", "DateString": "9 AM" }, { "Demand": 2240.77, "Supply": 5526, "Date": "/Date(1236573000000)/", "DateString": "10 AM" }, { "Demand": 1802.43, "Supply": 4530, "Date": "/Date(1236576600000)/", "DateString": "11 AM" }, { "Demand": 1929.71, "Supply": 6618, "Date": "/Date(1236580200000)/", "DateString": "12 PM" }, { "Demand": 545.65, "Supply": 2767, "Date": "/Date(1236583800000)/", "DateString": "1 PM" }, { "Demand": 0, "Supply": 1, "Date": "/Date(1236587400000)/", "DateString": "2 PM" }];

            var plotData = []

            for (var i = 0; i < rawData.length; i++) {
                plotData[i] = [rawData[i].DateString, rawData[i].Demand, rawData[i].Supply];
            }

            var plot1 = $.jqplot('chart1', [plotData], {
                title: 'Title of the Chart',
                axes: {
                    xaxis: {
                        renderer: $.jqplot.DateAxisRenderer,
                        label: "Date"
                    },
                    yaxis: {
                        label: "Demand"
                    }
                },
                highlighter: {
                    show: true,
                    sizeAdjust: 7.5
                },
                cursor: {
                    show: false
                }
            });
            });

            </script>
            </head>
            <body>
            <div>
            <div id="chart1" style="height:400px;width:600px; "></div>  
            </div>
            </body> 
```

我想创建一个包含两条线的折线图，一条用于需求，另一条用于供应。以前我使用的是 CanvasAxisLabelRenderer javascript 文件，但使用日期值我无法显示图表。请指教。再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:24:50.553

答案实际上取决于您希望如何处理这些`DateString`字段。如果您只是希望它按原样显示，例如“9 AM”，那么您可以使用以下内容：

```
var rawData = [{"Demand":4422.45,"Supply":17660,"Date":"/Date(1236504600000)/","DateString":"3 PM"},{"Demand":5019.27,"Supply":20699,"Date":"/Date(1236508200000)/","DateString":"4 PM"},{"Demand":5030.35,"Supply":19917,"Date":"/Date(1236511800000)/","DateString":"5 PM"},{"Demand":5172.35,"Supply":23597,"Date":"/Date(1236515400000)/","DateString":"6 PM"},{"Demand":5656.51,"Supply":21572,"Date":"/Date(1236519000000)/","DateString":"7 PM"},{"Demand":4622.88,"Supply":7794,"Date":"/Date(1236522600000)/","DateString":"8 PM"},{"Demand":3116.21,"Supply":3427,"Date":"/Date(1236526200000)/","DateString":"9 PM"},{"Demand":1588.83,"Supply":1883,"Date":"/Date(1236529800000)/","DateString":"10 PM"},{"Demand":1394.15,"Supply":1403,"Date":"/Date(1236533400000)/","DateString":"11 PM"},{"Demand":1321.76,"Supply":3755,"Date":"/Date(1236537000000)/","DateString":"12 AM"},{"Demand":1130.98,"Supply":3474,"Date":"/Date(1236540600000)/","DateString":"1 AM"},{"Demand":1277.1,"Supply":1072,"Date":"/Date(1236544200000)/","DateString":"2 AM"},{"Demand":1214.68,"Supply":1025,"Date":"/Date(1236547800000)/","DateString":"3 AM"},{"Demand":2117.91,"Supply":1198,"Date":"/Date(1236551400000)/","DateString":"4 AM"},{"Demand":1658.97,"Supply":1485,"Date":"/Date(1236555000000)/","DateString":"5 AM"},{"Demand":1997.36,"Supply":3126,"Date":"/Date(1236558600000)/","DateString":"6 AM"},{"Demand":2147.37,"Supply":4785,"Date":"/Date(1236562200000)/","DateString":"7 AM"},{"Demand":2114.13,"Supply":5268,"Date":"/Date(1236565800000)/","DateString":"8 AM"},{"Demand":2389.84,"Supply":5264,"Date":"/Date(1236569400000)/","DateString":"9 AM"},{"Demand":2240.77,"Supply":5526,"Date":"/Date(1236573000000)/","DateString":"10 AM"},{"Demand":1802.43,"Supply":4530,"Date":"/Date(1236576600000)/","DateString":"11 AM"},{"Demand":1929.71,"Supply":6618,"Date":"/Date(1236580200000)/","DateString":"12 PM"},{"Demand":545.65,"Supply":2767,"Date":"/Date(1236583800000)/","DateString":"1 PM"},{"Demand":0,"Supply":1,"Date":"/Date(1236587400000)/","DateString":"2 PM"}];

var plotData = []

for(var i = 0; i < rawData.length; i++) {
    plotData[i] = [rawData[i].DateString, rawData[i].Demand];
} 
```

此时您应该可以`plotData`用作 jqplot 的输入。

**编辑：**

所以这里的技巧是正确解析`Date`字段中的日期并使用`DateString`. 在你的 for 循环中试试这个：

```
for (var i = 0; i < rawData.length; i++) {
    //Parse the date.
    var date = new Date(+rawData[i].Date.match(/\d+/));
    //Grab the hour string.
    var hour = +rawData[i].DateString.match(/\d+/);
    //Figure out if this is PM.
    var isPm = rawData[i].DateString.indexOf("PM") > -1;

    //Set the hours property, but add 12 if this is PM.
    date.setHours(hour + (isPm ? 12 : 0));
    //The minutes should probably be zero.
    date.setMinutes(0);

    plotData[i] = [date, rawData[i].Demand, rawData[i].Supply];
} 
```

现在要让您的 x 轴显示格式的刻度`3 PM`，您需要`tickOptions`在配置轴时设置：

```
tickOptions: { formatString: '%#I %p' } 
```

如果您想显示一条供应线，我建议您考虑使用第二个 x 轴 - 这将允许您在适合数据的比例上使用另一个轴。

参考：

*   JavaScript 日期对象：[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)
*   jqplot 日期格式选项：[jqplot Docs](http://www.jqplot.com/docs/files/plugins/jqplot-dateAxisRenderer-js.html)

# android - 从 toast 消息中删除淡入淡出动画

> ID：15585125
> 
> 赞同：2
> 
> 时间：2013-03-23T09:18:15.923
> 
> 标签：android, toast

我正在使用 hack 使用不断的 toast 消息在 Google TV 中的图片上显示叠加层。

我想知道是否有办法进一步修改 toast 以消除淡入淡出效果。理想情况下，我希望叠加层立即出现。

任何帮助或方向将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:43:39.943

为此，我建议我们可以**使用布局**( `FrameLayout`)。并通过在当前布局之上使用新布局并将看起来类似于 TOAST 的视图添加到顶层

之后，通过将 View 对象设为 v 来做一件事，例如：-

```
View v;

   v.setVisiblity(GONE);
   v.setVisibility(VISIBLE); 
```

这将使您的视图出现或隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:23:55.117

您可以使用 a`FrameLayout`并在当前布局之上创建一个新的 Layout 层，并将一个看起来像 toast 的视图添加到顶层。

然后你可以使用：`View.setVisiblity(GONE);`和`View.setVisibility(VISIBLE);`

使您的视图立即显示和隐藏。

[View.setVisibility 文档](http://developer.android.com/reference/android/view/View.html#setVisibility%28int%29)

[框架布局示例](http://mobile.tutsplus.com/tutorials/android/android-sdk_frame-layout/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-06T16:51:30.540

我喜欢淡入效果，但我需要在没有淡出效果的情况下立即取消 toast 消息，因为即使 Activity 已经退出，toast 消息仍会显示一小段时间。

我来到这个解决方案是为了立即关闭（或实际上隐藏）我的 toast 消息`t`：

```
((TextView)t.getView().findViewById(android.R.id.message)).setTextColor(Color.TRANSPARENT);
t.setText("");
t.getView().setBackgroundColor(Color.TRANSPARENT);
t.cancel(); 
```

我假设将颜色设置为透明是使用标准 Toast 布局隐藏淡入淡出效果的唯一方法。

# php - 从搜索中排除文件夹，但仍考虑在 Netbeans 7 (php) 的导航中

> ID：15585126
> 
> 赞同：13
> 
> 时间：2013-03-23T09:18:29.807
> 
> 标签：php, netbeans

我正在为 php 使用 Netbeans 7。当我对类/方法/常量名称执行 ctrl+click 导航时，是否可以仅从搜索中排除文件夹，并且不从导航中排除这些文件夹的代码？

在 Zend Studio 中，我应该将文件夹标记为“Derived”（目录属性）。我仍然可以 ctrl+单击派生类以进行必要的声明。

当我忽略 Netbeans 中的文件夹时，我无法再通过 ctrl+click 导航访问它们的代码库。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-10T14:29:36.850

搜索项目时（Windows：CTRL + SHIFT + F），有一个名为的复选框`Use Ignore List`，与项目忽略的文件夹不同。

单击`edit`链接以定义要排除的文件、文件夹或模式。

在项目搜索期间，项目忽略的文件夹会被自动忽略。

# html - 如何查看非 Ajax 调用的请求响应

> ID：15585129
> 
> 赞同：1
> 
> 时间：2013-03-23T09:18:38.153
> 
> 标签：html, debugging, browser

我正在开发一个基于 Web 的应用程序，其中用户界面是使用 Jquery 制作的，后端是使用 Java / Java EE 开发的。

在用户界面上，一旦我单击提交按钮，请求就会发出，响应来自后端。（这不是 AJAX 调用）

是否可以查看请求的数据以及响应如何从后端返回？如果不是 AJax 调用，是否有任何此类工具可以查看请求/响应？

顺便说一句，我使用的是 Chrome 和 Apple 浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:25:08.083

使用 Web Inspector (Chrome/WebKit) 或 Web 控制台 (Firefox) 的“网络”选项卡或“网络”选项卡（带有 Firebug 的 Firefox）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:59:49.220

除了使用浏览器本机网络检查器（顺便说一句，它适用于非 Ajax 请求）之外，另一种选择是使用拦截代理。

[Burp Proxy](http://portswigger.net/burp/proxy.html)特别好用。它允许您查看、保留并在需要时修改浏览器和服务器之间的请求和响应。您确实需要设置浏览器以使用代理。它的学习曲线比浏览器的本地网络检查器要陡峭一些，但是一旦你掌握了它，它就是一个非常宝贵的工具。

# emacs - ELISP 宏通过符号而不是列表传递

> ID：15585133
> 
> 赞同：1
> 
> 时间：2013-03-23T09:19:18.700
> 
> 标签：emacs, elisp, flymake

```
(defmacro flycheck-define-clike-checker (name command modes)
    `(flycheck-declare-checker ,(intern (format "flycheck-checker-%s" name))
       ,(format "A %s checker using %s" name (car command))
       :command '(,@command source-inplace)
       :error-patterns
       '(("^\\(?1:.*\\):\\(?2:[0-9]+\\):\\(?3:[0-9]+\\): error: \\(?4:.*\\)$"
          error)
         ("^\\(?1:.*\\):\\(?2:[0-9]+\\):\\(?3:[0-9]+\\): warning: \\(?4:.*\\)$"
          warning))
       :modes ',modes))

  (flycheck-define-clike-checker c
                                 ("gcc" "-fsyntax-only" "-Wall" "-Wextra")
                                 c-mode) 
```

以上是我从[https://github.com/jedrz/.emacs.d/blob/master/setup-flycheck.el获取的代码](https://github.com/jedrz/.emacs.d/blob/master/setup-flycheck.el)

除了定义一个可以在[https://github.com/lunaryorn/flycheck找到的 flycheck 检查器之外，它并没有做任何事情](https://github.com/lunaryorn/flycheck)

我的问题是微不足道的，我已经花了一天的时间，我更困惑。

第二部分代码使用定义的宏调用flycheck注册一个编译器

```
(flycheck-define-clike-checker c
                                     ("gcc" "-fsyntax-only" "-Wall" "-Wextra")
                                     c-mode) 
```

上面的代码完美运行。

但是因为我希望我的编译器有一些动态包含等，所以我有一个变量定义为

```
(defvar efx-flycheck-c-command '("gcc" "-fsyntax-only" "-Wall" "-Wextra")) 
```

当我将它传递给宏时

```
(flycheck-define-clike-checker c
                                         efx-flycheck-c-command
                                         c-mode) 
```

我收到编译错误

```
Debugger entered--Lisp error: (wrong-type-argument sequencep efx-flycheck-c-command)
  append(efx-flycheck-c-command (source-inplace))
  (list (quote quote) (append command (quote (source-inplace))))
  (list (quote flycheck-declare-checker) (intern (format "flycheck-checker-%s" name)) (format "A %s checker" name) (quote :command) (list (quote quote) (app$
  (\` (flycheck-declare-checker (\, (intern (format "flycheck-checker-%s" name))) (\, (format "A %s checker" name)) :command (quote ((\,@ command) source-in$
  (lambda (name command modes) (\` (flycheck-declare-checker (\, (intern (format "flycheck-checker-%s" name))) (\, (format "A %s checker" name)) :command (q$
  (flycheck-define-clike-checker c efx-flycheck-c-command c-mode)
  eval((flycheck-define-clike-checker c efx-flycheck-c-command c-mode) nil)
  eval-last-sexp-1(nil)
  eval-last-sexp(nil)
  call-interactively(eval-last-sexp nil nil) 
```

我想我对宏在 elisp 中的扩展方式感到困惑。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T16:24:42.330

作为一般规则，你最好使用 a`defun`比 a `defmacro`，除非`defun`真的不方便/不可能使用。在您的情况下， a`defun`确实更有意义。唯一的缺点是您需要引用`c`and`c-mode`参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T10:32:35.783

您需要决定是要*评估*还是*不*`command`评估参数。未评估的参数允许您键入列表而不引用它们，即代替，但代价是无法将变量作为参数传递。评估参数使您能够向宏提供变量（或实际上是任意表达式），但必须引用简单列表。**`("gcc" "-Wall")``'("gcc" "-Wall")`**

 **通常，要评估反引号中的宏参数，您只需使用`,`运算符。但是，您已经在使用该`,@`运算符，并且您提到`command`了两次，因此最好使用以下方式明确评估它`eval`：

```
(defmacro flycheck-define-clike-checker (name command modes)
  (let ((command (eval command)))
    `(flycheck-declare-checker ,(intern (format "flycheck-checker-%s" name))
       ,(format "A %s checker using %s" name (car command))
       :command '(,@command source-inplace)
       :error-patterns
       '(("^\\(?1:.*\\):\\(?2:[0-9]+\\):\\(?3:[0-9]+\\): error: \\(?4:.*\\)$"
          error)
         ("^\\(?1:.*\\):\\(?2:[0-9]+\\):\\(?3:[0-9]+\\): warning: \\(?4:.*\\)$"
          warning))
       :modes ',modes))) 
```

借助您的力量`defmacro`，您甚至可以更进一步，定义如果宏是*符号*，则对其进行评估，否则按原样使用。这将允许您拥有蛋糕并吃掉它，即能够同时传递变量名和文字列表。这样做的代价是降低了与正常评估规则的一致性——你可以传递一个列表或一个变量，但不能传递一个任意的表达式，比如函数调用，这会让宏的用户感到不快。因此，该实现留给读者作为练习。**

# cocoa - Cocoa - 每秒行动

> ID：15585134
> 
> 赞同：-3
> 
> 时间：2013-03-23T09:19:19.147
> 
> 标签：cocoa, nstimer, nstableview

如何设置操作以每 1 秒更新一次信息？

我正在创建聊天（使用社交网络 API），我必须检查新消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T09:25:55.290

`NSTimer`像这样在你的 .h 文件中声明一个实例

`NSTimer *timer;`

然后安排它：

```
timer = [NSTimer scheduledTimerWithTimeInterval:1 
                                         target:self   
                                       selector:@selector(checkForNewMessages) 
                                       userInfo:nil 
                                        repeats:YES]; 
```

当您不再需要计时器时，请执行以下操作：

```
[timer invalidate];
 timer = nil; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T17:50:41.197

您还可以[使用 Grand Central Dispatch](http://developer.apple.com/library/ios/documentation/General/Conceptual/ConcurrencyProgrammingGuide/GCDWorkQueues/GCDWorkQueues.html#//apple_ref/doc/uid/TP40008091-CH103-SW2)来定时发送块。

# alignment - 集中对齐表单域

> ID：15585137
> 
> 赞同：0
> 
> 时间：2013-03-23T09:20:01.857
> 
> 标签：alignment, field

我需要在每行中的两个表单字段都针对ab想象的垂直中心线，标签最好在顶部，否则在远离中心的每一端。

最近我来的是 [如何对齐多个表单元素？](https://stackoverflow.com/questions/5304228/how-to-align-multiple-form-elements)

但我需要将字段放在中间。

你能帮我吗？

谢谢

齐姆

PS - 如果这太模糊了，我很抱歉，但我 10 天前才遇到 HTML/CSS，我有点迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:47:09.690

```
<div style="width: 100%; text-align: center; height: 100px;">
    <div style="float: left; text-align: right; width: 47%;">
        Label1
    </div>
    <div style="float: left; text-align: left; width: 47%; margin-left: 6%;">
        Label2
    </div>
    <div>
        <input type="text" />
        <input type="text" />
    </div>
    <div style="float: left; text-align: right; width: 47%;">
        Label3
    </div>
    <div style="float: left; text-align: left; width: 47%; margin-left: 6%;">
        Label4
    </div>
    <div>
        <input type="text" />
        <input type="text" />
    </div>
</div> 
```

或者干脆使用这个：

```
<table style="width: auto; text-align: center; margin: 0 auto;">
    <tr>
        <td>
            Label1
        </td>
        <td>
            Label2
        </td>
    </tr>
    <tr>
        <td>
            <input type="text" />
        </td>
        <td>
            <input type="text" />
        </td>
    </tr>
    <tr>
        <td>
            Label3
        </td>
        <td>
            Label4
        </td>
    </tr>
    <tr>
        <td>
            <input type="text" />
        </td>
        <td>
            <input type="text" />
        </td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:31:21.990

试试这个可能对你有帮助：

```
<div style="width: 100%; text-align: center; height: 100px;">
    Label1
    <div>
        <input type="text" />
    </div>
    Label2
    <div>
        <input type="text" />
    </div>
</div> 
```

你需要这样吗：

```
<div style="width: 100%; text-align: center; height: 100px;">
    Label1
    <div>
        <input type="text" style="margin-right:5px;">
        <input type="text" style="margin-left:5px;">
    </div>
    Label2
    <div>
        <input type="text" style="margin-right:5px;">
        <input type="text" style="margin-left:5px;">
    </div>
</div> 
```

# sql - Sql Server查询一项的树路径

> ID：15585155
> 
> 赞同：2
> 
> 时间：2013-03-23T09:22:52.557
> 
> 标签：sql, sql-server, recursion, tree, common-table-expression

我需要一个 SQL 查询给我一个项目的完整树路径。表格看起来像这样，MyItem_MyItemId 和 MyItemMapping_MyItemId 之间存在 1:n 关系。

表我的项目：

```
MyItem_MyItemId | MyItem_Title 
1 | Desktop
2 | Workspace
3 | Folder1
4 | Folder2
5 | Folder3
6 | Folder4
... 
```

表 MyItemMapping：

```
MyItemMapping_MyItemId | MyItemMapping_MyItemParentId
4 | 3
3 | 2
2 | 1
1 | NULL
5 | 2
6 | 2
... 
```

现在我需要一个查询，它带来了 Folder2 的路径，例如“Desktop\Workspace\Folder1\Folder2.

我用递归查询（见下文）尝试了它，但 SQL Server 需要大约 10 秒来解决它。我在数据库中只有 5000 条记录。我可以弄清楚，通过这个查询，路径是为所有 5000 条记录计算的，但我只需要一项。有谁能够帮助我？

```
WITH 
MyTable as
(
 select MyItem_MyItemId, MyItem_Title, MyItemMapping_MyItemParentId 
 from MyItem inner join MyItemMapping on MyItem_MyItemId = MyItemMapping_MyItemId
),
RecursiveTable AS 
(
  select t.MyItem_MyItemId, t.MyItem_Title, t.MyItemMapping_MyItemParentId
  from MyTable as t
  Where MyItemMapping_MyItemParentId is null 
  union all
  select  t.MyItem_MyItemId,  CAST(RecursiveTable.MyItem_Title + '\' + t.MyItem_Title AS NVARCHAR(max)), t.MyItemMapping_MyItemParentId
  from MyTable as t
  JOIN RecursiveTable ON RecursiveTable.MyItem_MyItemId = t.MyItemMapping_MyItemParentId
)   
select MyItem_Title from RecursiveTable where MyItem_MyItemid = 4 
```

非常感谢你。

最好的祝福。马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:02:02.977

朝相反的方向移动。选择必要的项目后，使用带有[FOR XML](http://msdn.microsoft.com/en-us/library/ms178107.aspx)子句的模式来创建反斜杠分隔的有效值列表。

```
DECLARE @MyItemMapping_MyItemId int = 4
;WITH cte AS
 (
  SELECT MyItemMapping_MyItemId, MyItemMapping_MyItemParentId, 1 AS rn
  FROM MyItemMapping
  Where MyItemMapping_MyItemId = @MyItemMapping_MyItemId 
  UNION ALL
  SELECT m.MyItemMapping_MyItemId, m.MyItemMapping_MyItemParentId, rn + 1
  FROM MyItemMapping m JOIN cte c ON c.MyItemMapping_MyItemParentId = m.MyItemMapping_MyItemId
  )
  SELECT STUFF((SELECT '/' + m.MyItem_Title                   
                FROM cte c JOIN MyItem m                 
                  ON c.MyItemMapping_MyItemId = m.MyItem_MyItemId
                ORDER BY c.rn DESC                    
                FOR XML PATH, TYPE).value('.[1]', 'nvarchar(max)'), 1, 1, '') AS pathFolder 
```

路径文件夹

结果：

```
PathFolder

Desktop/Workspace/Folder1/Folder2 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/b008e/4)上的演示[](http://sqlfiddle.com/#!3/b008e/4)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:43:44.100

请检查查询：

```
declare @MyItem as table (MyItem_MyItemId INT, MyItem_Title nvarchar(50))

insert into @MyItem values 
(1, 'Desktop'),
(2, 'Workspace'),
(3, 'Folder1'),
(4, 'Folder2')

declare @MyItemMapping as table (MyItemMapping_MyItemId INT, MyItemMapping_MyItemParentId int)

insert into @MyItemMapping values
(4, 3),
(3, 2),
(2, 1),
(1, NULL)

select * From @MyItem
select * From @MyItemMapping

;WITH parent AS
(
    SELECT MyItemMapping_MyItemId, MyItemMapping_MyItemParentId, CAST( b.MyItem_Title as nvarchar(max))MyItem_Title
    from @MyItemMapping a INNER JOIN @MyItem b on a.MyItemMapping_MyItemId=b.MyItem_MyItemId
    WHERE MyItemMapping_MyItemParentId is NULL

    UNION ALL 
    SELECT t.MyItemMapping_MyItemId, t.MyItemMapping_MyItemParentId ,CAST( parent.MyItem_Title+'/'+ b.MyItem_Title as nvarchar(max))MyItem_Title
    FROM parent INNER JOIN @MyItemMapping t ON parent.MyItemMapping_MyItemId =  t.MyItemMapping_MyItemParentId
        INNER JOIN @MyItem b on t.MyItemMapping_MyItemId=b.MyItem_MyItemId
)

SELECT MyItem_Title FROM  parent where MyItemMapping_MyItemId=(select MAX(MyItem_MyItemId) from @MyItem) 
```

或者

```
declare @output varchar(max)
;WITH parent AS
(
    SELECT MyItemMapping_MyItemId, MyItemMapping_MyItemParentId
    from @MyItemMapping
    WHERE MyItemMapping_MyItemParentId is NULL

    UNION ALL 
    SELECT t.MyItemMapping_MyItemId, t.MyItemMapping_MyItemParentId 
    FROM parent INNER JOIN @MyItemMapping t ON parent.MyItemMapping_MyItemId =  t.MyItemMapping_MyItemParentId
)

SELECT @output = COALESCE(@output + '/', '')+ (select MyItem_Title from @MyItem where MyItem_MyItemId=MyItemMapping_MyItemId) 
FROM  parent where MyItemMapping_MyItemId <= 4 group by MyItemMapping_MyItemId order by MyItemMapping_MyItemId

select @output 
```**

# javascript - nsIWebprogressListener.onProgressChange()：获取请求的URI

> ID：15585158
> 
> 赞同：0
> 
> 时间：2013-03-23T09:23:17.827
> 
> 标签：javascript, firefox, listener, progress

在我的 Firefox 扩展中，我已经实现了我的 Progresslistener 的 onLocationChange() 方法。正确检测到位置栏中的 URI 更改。现在我想实现 onProgressChange() 方法。

我在这里尝试做的事情：我想检测何时请求定义的 URI。刚开始，我试图提醒请求的 URI：

```
onProgressChange: function(aWebProgress, aRequest, curSelf, maxSelf, curTot, maxTot) {
    if (aRequest != null) {
        var reqName = aRequest.name;

        alert(reqName);
    } else {
        alert("Request is null");
    }
} 
```

因此，我认为请求网站会触发此方法，并且 aRequest.name 必须是所请求页面的 URL。但相反，只有几次警报“为空”......

有人可以帮我解决这个问题吗？

我在文档中读到，名称属性并不总是请求的 URI。有没有更好的方法来获取请求的 URI？

非常感谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:36:48.133

QueryInterface aRequest 到 nsIChannel 并获取 .URI.spec 吗？

# sql - SQL 查询（在 SQL、关系代数和元组关系演算中）

> ID：15585163
> 
> 赞同：2
> 
> 时间：2013-03-23T09:24:06.550
> 
> 标签：sql, postgresql, relational-algebra, relational-division, tuple-relational-calculus

我正在做一个测试考试，在它的 SQL 代码、关系代数和元组关系演算中，我遇到了一个特定的查询。

查询状态：查找包含关系中列出的每种类型的分支的 (city,state) 对`Branch` 。

在哪里`Branch`：

```
Branch_ID (Primary key)
Branch_City
Branch_State
Branch_Type 
```

和城市是：

```
City_Name (Primary key)
State_Name (Primary key)
Population 
```

和分别是`Branch_City`和的`Branch_State`外键。`City_Name``State_Name`

*“规则”是不能*使用聚合函数，例如`COUNT`,`MAX`等。

 *MySQL 和 PostgreSQL 必须“理解”查询，但是可以使用 PostgreSQL`EXCEPT`中`INTERSECT`可用但 MySQL 中不可用的函数。

`FROM`子句中没有子查询

如前所述，如果可以为 SQL、关系代数和元组关系演算提供答案，将不胜感激。这些问题让我停滞不前。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T10:35:09.903

这是 SQL Server 语法，因为我没有 MySql 或 PostGresSQL，但应该给你这个想法：

```
with branches as (
  select * from ( values
    ('Perth',1),
    ('Toronto',1), ('Toronto',2), ('Toronto',3),
    ('Hamilton',2), ('Hamilton',3)
  ) branches(City,  Branch_Type)
)

  select distinct
    City
  from branches
except
  select distinct 
    b.City
  from branches t 
  cross join branches b 
  left join branches b2 on b2.Branch_Type = t.Branch_Type and b2.City = b.City
  where b2.Branch_Type is null 
```

我已将其缩减到最低限度以演示必要的设置操作。

查询的上半部分返回所有三个城市；下半场只回归汉密尔顿和珀斯；这样整个查询只返回多伦多。

30 年来我没有使用过关系代数或关系微积分，但用这些方言表达上述查询只是一个翻译练习。

**更新 - 对于 MySQL：**

```
with branches as (
  select * from ( values
    ('Perth',1),
    ('Toronto',1), ('Toronto',2), ('Toronto',3),
    ('Hamilton',2), ('Hamilton',3)
  ) branches(City,  Branch_Type)
)

select distinct
  City
from branches
where City not in (
  select distinct 
    b.City
  from branches t 
  cross join branches b 
  left join branches b2 on b2.Branch_Type = t.Branch_Type and b2.City = b.City
  where b2.Branch_Type is null
  ) 
```

由于子查询位于 WHERE 子句而不是 FROM 子句中，因此这是合法的。它可以表示为左连接，但我认为这会将子查询移动到 FROM 子句中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T13:06:44.220

```
-- The query states: Find the (city,state) pairs which house a branch of every type which is listed in the Branch relation.
--                                               ((((                    ^^^^^ ^^^^    ))
-- This is equivalent to: Find cities for which "There does NOT EXIST a branchType that is NOT PRESENT in this City"
-- This leads to the double "NOT EXISTS (NOT EXISTS())" solution to relational devision.::
SELECT  * -- city,state
FROM city c
WHERE NOT EXISTS (
        -- find a branchtype that is not present in our city
        SELECT * FROM Branch b
        WHERE NOT EXISTS (
                -- same city for this  branchtype
                SELECT * FROM Branch nx
                WHERE nx.Branch_City = c.City_Name AND nx.Branch_State = c.State_Name
                AND nx.Branch_Type = b.Branch_Type
                )
        )
        ; 
```

[关系除法](http://en.wikipedia.org/wiki/Relational_algebra#Division_.28.C3.B7.29)是此类操作的术语。

顺便说一句：表的复合（城市，州）主键`city`只会让您感到困惑。通常，您将使用数字（代理项）`city_id`作为城市表的主键，并将其用作`branches`表中的外键。*

# android - 适用于 Android 和 iPhone 的文本到语音库

> ID：15585176
> 
> 赞同：1
> 
> 时间：2013-03-23T09:25:22.507
> 
> 标签：android, iphone, ios, objective-c

我将开发一个文本到语音的应用程序，该应用程序将在 android 和 iphone 中运行。我在 iphone 中的 TTS 库的 stackoverflow 上找到了非常好的线程。

我的问题是：我是否需要为 iphone 和 android 使用相同的库？

如果是，iPhone 和 Android 是否有相同的库提供程序？我只是想确保如果我要使用不同的 libaray，这两个应用程序的行为不会如此不同，这就是为什么我很想找到一个解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:10:30.530

您可以使用**Flite-TTS-Engine**，它可用且与**iOS 和 Android**兼容。

你可以在这里找到**Android** [Flite-TTS-Engine](https://github.com/happyalu/Flite-TTS-Engine-for-Android/blob/master/jni/tts/tts.h)

你可以在这里找到**iOS** [Flite-TTS-Engine](https://bitbucket.org/sfoster/iphone-tts/src/a6502c779cd3/flite-1.4-iphone/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T09:26:53.220

**对于 iOS**

**文字转语音（TTS）**

[https://bitbucket.org/sfoster/iphone-tts/src](https://bitbucket.org/sfoster/iphone-tts/src)
[https://github.com/todoroo/iPhone-Speech-To-Text](https://github.com/todoroo/iPhone-Speech-To-Text)
[http://docs.phonegap.com/en/2.0.0/guide_plugin- development_index.md.html](http://docs.phonegap.com/en/2.0.0/guide_plugin-development_index.md.html) [https://github.com/phonegap/phonegap-plugins](https://github.com/phonegap/phonegap-plugins)
[https://github.com/phonegap/phonegap-plugins/tree/master/Android/TTS](https://github.com/phonegap/phonegap-plugins/tree/master/Android/TTS)
[https://github.com/macdonst/TTS](https://github.com/macdonst/TTS)
[http://www.raymondcamden.com/index.cfm/2011/10/12/First-test-of-PhoneGap-Plugins](http://www.raymondcamden.com/index.cfm/2011/10/12/First-test-of-PhoneGap-Plugins) [http://en.usenet.digipedia.org/thread/12992/27474/](http://en.usenet.digipedia.org/thread/12992/27474/) [https:// /groups.google.com/forum/?fromgroups=#!msg/phonegap/JSBV8zfbXZ0/JqiLM5HdTF4J](https://groups.google.com/forum/?fromgroups=#!msg/phonegap/JSBV8zfbXZ0/JqiLM5HdTF4J) [http://phonegap.com/blog/2012/09/](http://phonegap.com/blog/2012/09/)

这个链接可能对你有帮助:)

# php - 设置注册限制？

> ID：15585184
> 
> 赞同：-3
> 
> 时间：2013-03-23T09:26:10.343
> 
> 标签：php, mysql, limit, registration, max

正如我已经尝试过但 nodbody 帮助了我，我会再试一次。我想为想要注册此脚本的人设置一个限制为 16 可以请有人编辑我的脚本并将其发布在这里以便我可以复制粘贴它因为我在编码方面非常糟糕所以在我尝试之前总是会出错请有人只是简单地用 limt 16 发布我的代码。谢谢你们，如果有人这样做，那就太好了

这是脚本

```
<?php
$error_message = "";
if ($_SERVER['REQUEST_METHOD'] == 'POST')
{
   $action = isset($_POST['action']) ? $_POST['action'] : '';
   $mysql_server = 'X';
   $mysql_username = 'X';
   $mysql_password = 'X';
   $mysql_database = 'X';
   $mysql_table = 'LOL';

   $success_page = 'X';
   if ($action == 'signup')
   {
      $newusername = $_POST['username'];
      $newemail = $_POST['email'];
      $newpassword = $_POST['password'];
      $confirmpassword = $_POST['confirmpassword'];
      $newfullname = $_POST['fullname'];
      if ($newpassword != $confirmpassword)
      {
         $error_message = 'Password and Confirm Password are not the same!';
      }
      else
      if (!ereg("^[A-Za-z0-9_!@$]{1,50}$", $newusername))
      {
         $error_message = 'Team name is not valid, please check and try again!';
      }
      else
      if (!ereg("^[A-Za-z0-9_!@$]{1,50}$", $newpassword))
      {
         $error_message = 'Password is not valid, please check and try again!';
      }
      else
      if (!ereg("^.+@.+\..+$", $newemail))
      {
         $error_message = 'Email is not a valid email address. Please check and try again.';
      }
         $db = mysql_connect($mysql_server, $mysql_username, $mysql_password);
         mysql_select_db($mysql_database, $db);
         $sql = "SELECT username FROM ".$mysql_table." WHERE username = '".$newusername."'";
         $result = mysql_query($sql, $db);
         if ($data = mysql_fetch_array($result))
      {
         list($username, $password, $email, $fullname) = explode('|', trim($line));
         if ($newusername == $username)
         {
            $error_message = 'Team name already used. Please select another username.';
         }
      }
      if (empty($error_message))
      {
         $crypt_pass = md5($newpassword);
         $sql = "INSERT `".$mysql_table."` (`username`, `password`, `fullname`, `email`, `active`) VALUES ('$newusername', '$crypt_pass', '$newfullname', '$newemail', 1)";
         $result = mysql_query($sql, $db);
         mysql_close($db);
         $mailto = $newemail;
         $subject = 'X';
         $message = 'X';
         $message .= "\r\nX";
         $message .= "\r\n ";
         $message .= "\r\nTeam name for the upcoming tournament: ";
         $message .= $newusername;
         $message .= "\r\nYour password: ";
         $message .= $newpassword;
         $message .= "\r\n ";
         $message .= "\r\n ";
         $message .= "\r\nX";
         $message .= "\r\nX";
         $header  = "From: X"."\r\n";
         $header .= "Reply-To: X"."\r\n";
         $header .= "MIME-Version: 1.0"."\r\n";
         $header .= "Content-Type: text/plain; charset=utf-8"."\r\n";
         $header .= "Content-Transfer-Encoding: 8bit"."\r\n";
         $header .= "X-Mailer: PHP v".phpversion();
         mail($mailto, $subject, $message, $header);
         header('Location: '.$success_page);
         exit;
      }
   }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:48:52.050

为什么让你的脚本变得复杂。当用户添加时，只需使用简单的计数器添加 1，当它变为 16 时，只需停止脚本添加

例子 ：

```
if(counter != 16)
{
 if (empty($error_message))
      {
     $counter++;
     $crypt_pass = md5($newpassword);
     $sql = "INSERT `".$mysql_table."` (`username`, `password`, `fullname`, `email`, `active`) VALUES ('$newusername', '$crypt_pass', '$newfullname', '$newemail', 1)";
     $result = mysql_query($sql, $db);
     mysql_close($db);
     $mailto = $newemail;
     $subject = 'X';
     $message = 'X';
     $message .= "\r\nX";
     $message .= "\r\n ";
     $message .= "\r\nTeam name for the upcoming tournament: ";
     $message .= $newusername;
     $message .= "\r\nYour password: ";
     $message .= $newpassword;
     $message .= "\r\n ";
     $message .= "\r\n ";
     $message .= "\r\nX";
     $message .= "\r\nX";
     $header  = "From: X"."\r\n";
     $header .= "Reply-To: X"."\r\n";
     $header .= "MIME-Version: 1.0"."\r\n";
     $header .= "Content-Type: text/plain; charset=utf-8"."\r\n";
     $header .= "Content-Transfer-Encoding: 8bit"."\r\n";
     $header .= "X-Mailer: PHP v".phpversion();
     mail($mailto, $subject, $message, $header);
     header('Location: '.$success_page);
     exit;
   }
 }

else
 {
   echo "not inserted";
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:06:20.950

如果要设置用户数量限制，请编写以下代码。

```
$sql = "select count(*) as tot from $mysql_table";
    $rs = mysql_query($sql);
    $row = mysql_fetch_assoc($rs);
    $counter = $row['tot'];

if(counter != 16)
{
 if (empty($error_message))
      {
     $counter++;
     $crypt_pass = md5($newpassword);
     $sql = "INSERT `".$mysql_table."` (`username`, `password`, `fullname`, `email`, `active`) VALUES ('$newusername', '$crypt_pass', '$newfullname', '$newemail', 1)";
     $result = mysql_query($sql, $db);
     mysql_close($db);
     $mailto = $newemail;
     $subject = 'X';
     $message = 'X';
     $message .= "\r\nX";
     $message .= "\r\n ";
     $message .= "\r\nTeam name for the upcoming tournament: ";
     $message .= $newusername;
     $message .= "\r\nYour password: ";
     $message .= $newpassword;
     $message .= "\r\n ";
     $message .= "\r\n ";
     $message .= "\r\nX";
     $message .= "\r\nX";
     $header  = "From: X"."\r\n";
     $header .= "Reply-To: X"."\r\n";
     $header .= "MIME-Version: 1.0"."\r\n";
     $header .= "Content-Type: text/plain; charset=utf-8"."\r\n";
     $header .= "Content-Transfer-Encoding: 8bit"."\r\n";
     $header .= "X-Mailer: PHP v".phpversion();
     mail($mailto, $subject, $message, $header);
     header('Location: '.$success_page);
     exit;
   }
 }

else
 {
   echo "not inserted";
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T09:35:16.600

```
<?php
$error_message = "";
if ($_SERVER['REQUEST_METHOD'] == 'POST')
{
   $action = isset($_POST['action']) ? $_POST['action'] : '';
   $mysql_server = 'X';
   $mysql_username = 'X';
   $mysql_password = 'X';
   $mysql_database = 'X';
   $mysql_table = 'LOL';

   $success_page = 'X';
   if ($action == 'signup')
   {
      $newusername = $_POST['username'];
      $newemail = $_POST['email'];
      $newpassword = $_POST['password'];
      $confirmpassword = $_POST['confirmpassword'];
      $newfullname = $_POST['fullname'];
      if ($newpassword != $confirmpassword)
      {
         $error_message = 'Password and Confirm Password are not the same!';
      }
      else
      if (!ereg("^[A-Za-z0-9_!@$]{1,50}$", $newusername))
      {
         $error_message = 'Team name is not valid, please check and try again!';
      }
      else
      if (!ereg("^[A-Za-z0-9_!@$]{1,50}$", $newpassword))
      {
         $error_message = 'Password is not valid, please check and try again!';
      }
      else
      if (!ereg("^.+@.+\..+$", $newemail))
      {
         $error_message = 'Email is not a valid email address. Please check and try again.';
      }
         $db = mysql_connect($mysql_server, $mysql_username, $mysql_password);
         mysql_select_db($mysql_database, $db);
         $sql = "SELECT username FROM ".$mysql_table." WHERE username = '".$newusername."'";
         $result = mysql_query($sql, $db);
         if ($data = mysql_fetch_array($result))
      {
         list($username, $password, $email, $fullname) = explode('|', trim($line));
         if ($newusername == $username)
         {
            $error_message = 'Team name already used. Please select another username.';
         }
          $count=mysql_num_rows($result);
         if ($count == 16)
         {
            $error_message = 'Team Member exceeds 16';
         }

      }
      if (empty($error_message))
      {
         $crypt_pass = md5($newpassword);
         $sql = "INSERT `".$mysql_table."` (`username`, `password`, `fullname`, `email`, `active`) VALUES ('$newusername', '$crypt_pass', '$newfullname', '$newemail', 1)";
         $result = mysql_query($sql, $db);
         mysql_close($db);
         $mailto = $newemail;
         $subject = 'X';
         $message = 'X';
         $message .= "\r\nX";
         $message .= "\r\n ";
         $message .= "\r\nTeam name for the upcoming tournament: ";
         $message .= $newusername;
         $message .= "\r\nYour password: ";
         $message .= $newpassword;
         $message .= "\r\n ";
         $message .= "\r\n ";
         $message .= "\r\nX";
         $message .= "\r\nX";
         $header  = "From: X"."\r\n";
         $header .= "Reply-To: X"."\r\n";
         $header .= "MIME-Version: 1.0"."\r\n";
         $header .= "Content-Type: text/plain; charset=utf-8"."\r\n";
         $header .= "Content-Transfer-Encoding: 8bit"."\r\n";
         $header .= "X-Mailer: PHP v".phpversion();
         mail($mailto, $subject, $message, $header);
         header('Location: '.$success_page);
         exit;
      }
   }
}
?> 
```

# javascript - 如何减小 jqgrid treegrid 叶行中的字体大小

> ID：15585190
> 
> 赞同：2
> 
> 时间：2013-03-23T09:27:01.923
> 
> 标签：javascript, jquery-ui, jqgrid

jqGrid treegrid 所有行都具有相同的字体大小。如何减小没有子级的行的字体大小？我尝试在[How to make jqgrid treegrid first row text bold](https://stackoverflow.com/questions/14693594/how-to-make-jqgrid-treegrid-first-row-text-bold)中使用 Oleg 很好的答案来为此使用 rowattr。我还没有找到如何在 rowattr 中推断该行没有孩子的方法。

我目前的具体情况是所有叶子都在第三级。所以在这种情况下，可以减小整个第三级的字体大小。如何在 rowattr 中找到 treegrid 嵌套级别？

Treegrid 定义为

```
 var treegrid = $("#tree-grid");
        treegrid.jqGrid({
            url: '/Store/GridData',
            datatype: "json",
            mtype: "POST",
            height: "auto",
            loadui: "disable",
            treeGridModel: "adjacency",
            colModel: [
                    { name: "id", width: 1, hidden: true, key: true },
                    { name: "menu", classes: "treegrid-column", label: "Product tree" },
                    { name: "url", width: 1, hidden: true }
                ],

            gridview: true,
            rowattr: function (rd) {
             // todo: decrease font size for leaf rows.                
            if (rd.parent === "-1" ) {
                return {"class": "no-parent"};
                }
            },
            autowidth: true,
            treeGrid: true,
            ExpandColumn: "menu",
            rowNum: 2000,
            ExpandColClick: true,
            onSelectRow: function (rowid) {
                var treedata = treegrid.jqGrid('getRowData', rowid);
                window.location = treedata.url;
            }
        }
      ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T03:39:27.167

我从未使用过 treegrid，从 Oleg 提供的示例来看，似乎在网格数据中有一个 item `isLeaf`。我认为您必须检查`rd.isLeaf` [此处使用的数据查看演示](http://ok-soft-gmbh.com/jqGrid/LocalAdjacencyTree14.htm)（第一行）

```
{id: "1", name: "Cash", num: "100", debit: "400.00", credit: "250.00", balance: "150.00", enbl: "1", level: "0", parent: "null", isLeaf: false, expanded: true, loaded: true, icon: "ui-icon-carat-1-e,ui-icon-carat-1-s"}, 
```

# android - 为什么 ImageView.setAlpha() 将 alpha 设置为 GridView 中的多个 ImageView？

> ID：15585195
> 
> 赞同：0
> 
> 时间：2013-03-23T09:28:21.943
> 
> 标签：android, gridview, listadapter

我正在实现一个允许多张照片选择的自定义画廊。

我正在使用`GridView`一个`ImageAdapter`从`BaseAdapter`.

这是我的`ImageAdapter`课：

```
public class ImageAdapter extends BaseAdapter {

    private LayoutInflater mInflater;

    public ImageAdapter() {
        mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public int getCount() {
        return count;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = mInflater.inflate(R.layout.galleryitem, null);
            holder.imageview = (ImageView) convertView
                    .findViewById(R.id.thumbImage);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.imageview.setId(position);
        holder.imageview.setLongClickable(true);
        holder.imageview.setOnLongClickListener(new OnLongClickListener() {

            public boolean onLongClick(View arg0) {
                int id = arg0.getId();
                ImageView img = (ImageView) arg0;
                if (thumbnailsselection[id]) {
                    Log.d("PRTAG", "deselecting img with id: " + img.getId());
                    img.setBackgroundResource(R.drawable.imgview_noborder);
                    img.setAlpha(255);
                    thumbnailsselection[id] = false;
                } else {
                    Log.d("PRTAG", "selecting img with id: " + img.getId());
                    img.setAlpha(128);
                    img.setBackgroundResource(R.drawable.imgview_border);
                    thumbnailsselection[id] = true;
                }
                return true;
            }
        });

        holder.imageview.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                int id = v.getId();
                Intent intent = new Intent();
                intent.setAction(Intent.ACTION_VIEW);
                intent.setDataAndType(Uri.parse("file://" + arrPath[id]),
                        "image/*");
                startActivity(intent);
            }
        });

        holder.imageview.setImageBitmap(thumbnails[position]);
        holder.id = position;

        return convertView;
    }
} 
```

所有图像都正确添加，该`onClick()`方法工作正常（它打开了正确的图像）。

问题出在`onLongClick()`. 我正在添加自定义背景并在长时间单击的图像上设置 alpha（ `128`- 图像已选择， - 图像未选择）。`255`实际选择工作正常，它选择了正确的图像。

实际问题是滚动网格视图时背景和 alpha 设置为多个（随机）图像。

有没有人经历过这样的事情？关于可能导致这种情况的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:44:34.153

您的视图是可重用的，这意味着您需要在每次`getView`调用时更新 alpha。不仅在 LongPress 上

为所有选定的图像创建`ArrayList selectedImages`ivar。
- onLongPress 添加/删除图像到`selectedImages`
- 在您的`getView`方法中检查图像是否存储在列表中并根据`alpha`值设置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T09:39:33.283

您需要熟悉`ListView`视图重用概念。基本上`GridView`在滚动时重用视图。因此，如果您更改了某些视图，那么它显然会被更改然后重用（直到您没有更改它的属性`getView()`）。查看[Google I/O 视频](http://www.youtube.com/watch?v=wDBM6wVEO70)，了解更多关于 的解释`ListView`，因为其中大部分也适用于`GridView`。

因此，如果您需要一些具有不同属性的视图，那么您有 2 个选项：

*   制作另一种类型的视图（换句话说，使用[getItemViewType()](http://developer.android.com/reference/android/widget/BaseAdapter.html#getItemViewType%28int%29)和[getItemViewTypeCount()](http://developer.android.com/reference/android/widget/BaseAdapter.html#getViewTypeCount%28%29)并通过调用动态更改类型`notifyDataSetChanged()`）；
*   存储特定项目的位置（或某种标志`ViewHolder`，在您的情况下，它可能是`thumbnailsselection`数组信息）并`getView()`使用存储的信息设置每次调用的视图属性；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T09:52:50.420

我建议不要`ImageView`在方法中使用 's click 和 long click 监听`getView()`器，而是使用`ListView`'s or `GridView`'s `setOnItemLongClickListener`and `setOnItemClickListener`。

在这些侦听器中，您应该只保存项目的状态，无论是否选中，并且在`getView()`方法中您应该查找项目的状态并执行以下操作：

```
 if (thumbnailsselection[id]) {
                Log.d("PRTAG", "deselecting img with id: " + img.getId());
                img.setBackgroundResource(R.drawable.imgview_noborder);
                img.setAlpha(255);
            } else {
                Log.d("PRTAG", "selecting img with id: " + img.getId());
                img.setAlpha(128);
                img.setBackgroundResource(R.drawable.imgview_border);
            } 
```

基本上，在每次`getView()`调用中，您都应该验证您的数据对象状态，并在返回之前**始终调整视图的状态。**

# tomcat7 - Jruby on rails - 扭矩箱与 Tomcat

> ID：15585200
> 
> 赞同：0
> 
> 时间：2013-03-23T09:28:59.757
> 
> 标签：tomcat7, ubuntu-12.04, jrubyonrails, torquebox

我在应用程序服务器配置和部署方面是全新的。我正在使用 Ubuntu 12.04 LTS 并有 JRuby on rails 应用程序（war 文件），我想要部署并从外部网络可见。

我首先开始阅读有关 Tomcat 的信息，因为它在 Jruby git hub 官方文档中有所提及，但环顾四周并搜索扭矩盒也作为解决方案提供。

不幸的是，我找不到一篇比较 Tomcat 和 Torque box 的文章。关于 Torque box，我唯一知道的是它基于 Tomcat 服务器，由于延迟，不利于开发。

对于非商业应用程序和初学者来说，什么是更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:40:18.440

你真的应该比较 Tomcat 和 JBoss，JBoss 是 Torquebox 包装的。

Tomcat 只是一个 Web 应用程序服务器，而 JBoss 则更多。

这可能会有所帮助：[再次 JBoss vs Tomcat](https://stackoverflow.com/questions/4668042/jboss-vs-tomcat-again)

例如，Torquebox（又名 JBoss）包括消息队列和分布式缓存。

# c# - “该页面具有需要母版页引用的控件，但没有指定”问题

> ID：15585201
> 
> 赞同：4
> 
> 时间：2013-03-23T09:29:23.367
> 
> 标签：c#, asp.net, html, master-pages

我得到这个输出：![在此处输入图像描述](../Images/bb4e0f024e3f02c949a977f4e9d5e115.png)

即使我的页面包含`MasterPageFile="~/Site1.Master"`

这是我页面的源代码：

```
<%@ Language="C#" MasterPageFile="~/Site1.Master" AutoEventWireup="true" CodeBehind="WebForm2.aspx.cs" Inherits="Projekt.NET.WebForm2" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
<title>gowno</title>
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
hahahahahahaa
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:33:50.347

作为“ProfK”的自我回答

`<%@ Page Language="C#"` *'指令缺少页面一词'*

[新 MVC 项目上的母版页错误](https://stackoverflow.com/questions/333393/master-page-error-on-new-mvc-project)

# vba - 如何使用 VBA 修剪 MS Word 中的表格单元格值

> ID：15585202
> 
> 赞同：5
> 
> 时间：2013-03-23T09:29:29.337
> 
> 标签：vba, ms-word, iteration, cell, trim

我在 Word 文件中有一个表格。下面的这个 vba 程序将遍历所有表格单元格

```
Dim strCellText As String
Dim uResp As String
Dim Row As Integer
Dim Col As Integer

Dim itable As Table

For Each itable In ThisDocument.Tables

    uResp = ""

    For Row = 1 To itable.Rows.Count

        For Col = 1 To itable.Columns.Count

            strCellText = itable.Cell(Row, Col).Range.Text
            uResp = uResp & Trim(strCellText)                

        Next

    Next

    MsgBox uResp
Next 
```

在行中，`uResp = uResp & Trim(strCellText)` VBA 为每个单元格添加一个换行符和一个点。因此`MsgBox uResp`将显示一个“列”消息框。如何在显示消息框时删除换行符和点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-23T09:57:24.367

Word 使用两个字符作为单元格分隔符，所以使用

```
uResp = uResp & Trim(left(strCellText,len(StrCellText)-2)) 
```

在这种情况下，单元格值之间将没有分隔符，因此您可能需要连接一个空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T09:34:12.503

尝试添加[Replace](http://msdn.microsoft.com/en-us/library/gg264409%28v=office.14%29.aspx)函数和[InstrRev](http://msdn.microsoft.com/en-us/library/gg251545%28v=office.14%29.aspx)以查找最后一个换行符和 . 在单元格文本中，然后[离开](http://msdn.microsoft.com/en-us/library/gg251556%28v=office.14%29.aspx)单元格文本并存储清理后的结果

```
strCellText = itable.Cell(Row, Col).Range.Text
'added
Clean = Trim(strcelltext)
posFromEnd = InStrRev(Clean, vbCr + chr(7)) 'obviously a newline and a chr(7) ..
If (posFromEnd > 0) Then
    Clean = Trim(Left(Clean, posFromEnd - 1))
End If
'end added
uResp = uResp & Clean  'updated 
```

要验证字符串中的最后一个字符是什么，请在调试器中执行以下操作：

```
strCellText = itable.Cell(Row, Col).Range.Text
For r = 1 To Len(strCellText)
  c = Mid(strCellText, r, 1)
  Debug.Print Right("0" + Hex(Asc(c)), 2) + " ";
Next
Debug.Print 'set a breakpoint here 
```

从即时窗口复制结果，以便我们可以从那里推理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T10:01:33.710

如果您确定这总是会发生，您可以将字符串缩短两个字符：

```
 MsgBox LEFT(uResp,LEN(uResp)-2) 
```

编辑：当然，vinod 是正确的。不是 uResp 必须缩短，而是 strCellText。但是这个答案已经给出了。对不起这个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-16T13:11:04.687

我使用的解决方案是：

```
endOfCell = Chr(13) + Chr(7)
uResp = uResp & Split(strCellText, endOfCell)(0) 
```

# qt - QtCreator 调试暂停在代码而不是汇编处停止

> ID：15585204
> 
> 赞同：0
> 
> 时间：2013-03-23T09:29:44.417
> 
> 标签：qt, debugging, qt-creator

如何配置 QtCreator 以便在我调试并按下暂停时它会显示它当前正在处理的代码（现在它显示程序集）。在任何地方都找不到关于此的答案。

我正在使用 Windows 7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-04-24T19:15:49.643

我在 Ubuntu 16.04 中使用 Qt Creator 4.2.2 时遇到了这个问题。其中一个步骤可以解决您的问题：

1.  尝试将左下角的编译模式切换为`Debug`模式
2.  `Debug->Operate by instruction`调试时尝试关闭选项。但这对我不起作用。
3.  尝试切换选项`Tools->Debugger->Set breakpoint using full absolute path`。
4.  尝试在窗口`Source Path Mapping`( `Tools->Debugger->Add Qt sources`)中添加您的 Qt Src 路径
5.  在“项目”和“构建”目录路径中仅使用 ASCII 符号。

在第 5 步之后，在 src 模式下，magic 和 gdb 成功工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:36:13.140

它可能没有当前正在执行的代码的来源。例如，它可能在系统 DLL 中。如果查看堆栈跟踪，您可能会发现它具有源代码的函数，但这不能保证——它可能位于根本没有可用源代码的线程中。

# c++ - Eclipse 未在 Kubuntu 中正确包含 C++ 库

> ID：15585206
> 
> 赞同：2
> 
> 时间：2013-03-23T09:29:56.917
> 
> 标签：c++, eclipse, g++, kubuntu

我在使用 C++11 库时遇到问题。我在 Kubuntu 中使用带有最新 gcc 和 g++ 编译器的 Eclipse。我正在使用 C++ 4.7.2 库。

Eclipse 发现所有库都很好，但仍然存在问题。例如：

```
#include <random>
typedef std::mt19937 myRandom; 
```

此代码导致错误：“类型 'std::mt19937' 无法解析”。似乎并非随机的所有功能都没有包括在内。iostream 中的 cout 和 cin 也存在同样的问题。有什么问题？

-Juho L

# c# - 从字符串转换日期时间时转换失败

> ID：15585210
> 
> 赞同：1
> 
> 时间：2013-03-23T09:30:32.743
> 
> 标签：c#, sql, stored-procedures, dynamic-sql, windows-applications

我正在尝试将参数从 Windows 应用程序传递到存储过程。有两个参数 '@dt' 和 '@dt2' 从 datetimepickers 中获取值。每当我执行存储过程时，它都会出现错误消息“从字符串转换日期时间时转换失败”。

执行查询后，我想在 datagridview 中显示它。

我无法弄清楚问题..这是我的程序和代码

存储过程

> ALTER proc [dbo].[deepak_proc]
> 
> （@dt 日期时间，@dt2 日期时间）
> 
> 作为
> 
> 声明 @cols AS NVARCHAR(MAX)
> 
> 声明@query AS NVARCHAR(MAX)
> 
> 选择@cols =
> 
> ```
>  STUFF((SELECT ',' + QUOTENAME(date +'_'+Logname) 
>                 from
>                 (
>                   select K_date,
>                     convert(char(10),K_date, 101) date, 
>                     LogName
>                   from kq_report_analyze
>                   cross apply
>                   (
>                     select 'In' LogName
>                     union all
>                     select 'Out' 
>                   ) l
>                 ) s   
>                 group by convert(char(10), K_date, 112), date, Logname
>                 order by convert(char(10), K_date, 112)
>         FOR XML PATH(''), TYPE
>         ).value('.', 'NVARCHAR(MAX)') 
>     ,1,1,'') 
> ```
> 
> 设置@查询
> 
> ```
> = 'SELECT empid, name, status, '+@cols+' FROM (SELECT empid, name, status, 
>    doortime, date + "_" + col AS col_names FROM  (SELECT k_userid
>    AS [empid], K_Name AS name, k_description1 as [status], K_WorktimeUp1
>    AS [IN], K_WorktimeDown1 AS OUT, CONVERT(char(10), K_Date, 101) AS
>   date FROM  dbo.kq_report_analyze WHERE (K_Date BETWEEN '+@dt+' AND
>   '+@dt2+') GROUP BY K_UserID, K_Name, k_description1, K_Date,
>   K_WorktimeUp1, K_WorktimeDown1) src  UNPIVOT (doortime FOR col IN
>   ([IN], [OUT])) unpiv) 
>   p PIVOT (max(doortime) FOR col_names IN ('+@cols+')) piv;' 
> ```
> 
> 执行（@查询）

以下代码在按钮单击上

> SqlConnection con = new SqlConnection(); con.ConnectionString = @"数据源=.\SQLEXPRESS；初始目录=test_db；用户ID=用户；密码=密码";
> 
> ```
>  con.Open();
> 
>        SqlCommand cmd = new SqlCommand("deepak_proc", con);
> 
>    cmd.CommandType = CommandType.StoredProcedure; 
> ```
> 
> cmd.Parameters.Add("@dt", SqlDbType.DateTime).Value = dateTimePicker1.Value.ToString("MM/dd/yyyy");
> 
> cmd.Parameters.Add("@dt2", SqlDbType.DateTime).Value = dateTimePicker2.Value.ToString("MM/dd/yyyy");
> 
> 数据表 dt = 新数据表（）；
> 
> cmd.ExecuteNonQuery();
> 
> sda.填充（dt）；
> 
> dataGridView1.DataSource = dt;
> 
> con.Close();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:35:50.567

尝试将日期时间传递为​​标准的 yyyy-MM-dd 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:34:46.220

听起来好像您从客户端中的 DateTimepicker 获取日期的字符串表示形式。当您从 DateTimepicker 获取值时，将其转换为真正的 CLR Date 对象*client-side*。如果存在映射到 SQL 类型的 CLR 类型，则不要将字符串传递到后端。在构建命令对象客户端时选择适当的参数类型。

**通常，将日期保留为日期并仅在需要为人眼显示它们时将它们转换为字符串。**

编辑：例如：

```
 SqlClient.SqlParameter  p0;

        p0.ParameterName = "@startdate";
        p0.SqlDbType = SqlDbType.DateTime;
        p0.Value =  < a datetime object, not a string>  
        p0.Direction = ParameterDirection.Input; 
```

然后将参数添加到参数集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T10:59:28.280

使用[sp_executesql](http://msdn.microsoft.com/en-us/library/ms188001.aspx)系统存储过程并将您的变量作为参数

```
SET @query
= 'SELECT empid, name, status, ' + @cols + ' 
   FROM (SELECT empid, name, status, doortime, date + ''_'' + col AS col_names 
         FROM  (SELECT k_userid AS [empid], K_Name AS name, 
                       k_description1 as [status], K_WorktimeUp1 AS [IN], 
                       ktimeDown1 AS OUT, CONVERT(char(10), K_Date, 101) AS date 
                FROM  dbo.kq_report_analyze 
                WHERE (K_Date BETWEEN @dt AND @dt2) 
                GROUP BY K_UserID, K_Name, k_description1, K_Date, K_WorktimeUp1,
                         K_WorktimeDown1) src  
   UNPIVOT (doortime FOR col IN ([IN], [OUT])) unpiv) p 
   PIVOT (max(doortime) FOR col_names IN (' + @cols + ')) piv;'

EXEC sp_executesql @query, N'@dt datetime, @dt2 datetime', @dt, @dt2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T11:38:09.620

```
DateTime myDateTime = Convert.ToDateTime(dateTimePicker1.Value);

cmd.Parameters.Add(new MySql.Data.MySqlClient.MySqlParameter
("@myDateTime", MySql.Data.MySqlClient.MySqlDbType.DateTime));
 cmd.Parameters["@myDateTime"].Value = myDateTime; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T12:05:23.243

cmd.Parameters.Add("@dt", SqlDbType.DateTime).Value =DateTime.ParseExact(dateTimePicker1.Value.Tostring(),null);

cmd.Parameters.Add("@dt2", SqlDbType.DateTime).Value =DateTime.ParseExact(dateTimePicker2.Value.Tostring(),null);

# eclipse - 共享所有 Eclipse 工作区的所有设置

> ID：15585212
> 
> 赞同：0
> 
> 时间：2013-03-23T09:31:00.947
> 
> 标签：eclipse, ide

我正在 Eclipse (OS X) 下开发依赖于库的应用程序。这使得以下内容：

*   项目 A 使用库 L1、L2、L3
*   项目 B 使用库 L2、L3
*   项目 C 使用库 L1、L2、L3

我曾经只有一个工作区，其中包含项目 A、B、C、L1、L2、L3，这些库通常`git clone`来自其存储库。
然后我有：

```
~/projects/ProjectA
~/projects/ProjectB
~/projects/ProjectC
~/projects/Lib1
~/projects/Lib2
~/projects/Lib3 
```

这已经工作了一段时间，但现在随着项目 A、B、C... 的发布和使用，项目可能不会使用相同版本的库......并且一切都变得过于复杂。

我查看了工作集，但我认为这不是我想要的。

我创建了一个新工作区，并再次克隆了库，这样我就有了：

```
~/projects/ProjectA/Project
~/projects/ProjectA/Lib1
~/projects/ProjectA/Lib2
~/projects/ProjectA/Lib3
~/projects/ProjectB
~/projects/ProjectC
~/projects/Lib1
~/projects/Lib2
~/projects/Lib3 
```

所以 A 的库不会与 B 和 C 中使用的其他副本冲突。

问题是新工作区具有默认设置，而我所有的视角、键盘快捷键和其他东西都不见了。
我这样安排我的文件夹：

```
~/projects/EclipseSettings
~/projects/.metadata/.plugins/org.eclipse.core.runtime/.settings -> ~/projects/EclipseSettings
~/projects/ProjectA/.metadata/.plugins/org.eclipse.core.runtime/.settings -> ~/projects/EclipseSettings
~/projects/ProjectA/Project
~/projects/ProjectA/Lib1
~/projects/ProjectA/Lib2
~/projects/ProjectA/Lib3
~/projects/ProjectB
~/projects/ProjectC
~/projects/Lib1
~/projects/Lib2
~/projects/Lib3 
```

如您所见`.settings`，我将初始工作区的文件夹移动到了一个新文件夹，`EclipseSettings`然后将`.settings`每个工作区的 符号链接到该 Eclipse 设置文件夹。

不工作。

例如，我已将`command`+分配`M`给 SVN 提交：

*   如果我加载初始`~/projects`工作区，则键盘快捷键有效。
*   如果我加载`~/projects/ProjectA`新工作区，则键盘快捷**键**位于 Eclipse 设置的“键”部分内，分配给 SVN Commit，但***它不起作用***。当我使用该快捷方式时，没有任何反应。

为什么？`org.eclipse.core.runtime/.settings`除了定义我的工作区之外，还有其他文件吗？
此外，透视图不存在，Java Formatter 似乎消失了，它没有在 Save 操作中启用，而我确实在我的初始工作区启用了它......

我想知道我是否应该使用该工作区来管理我的项目，并且我想知道为什么我使用使用工作区/项目的 Eclipse 而 IntelliJ 似乎有更好的方式来管理所有内容。但我已经尝试切换并坚持使用 Eclipse。
也许我应该再给 IntelliJ 一次机会，但是我想先对此有一些反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T12:28:06.307

不要将工作区相互嵌套。否则其中一个的更改将使另一个与文件系统不同步，从而在您下次打开该工作区时造成很多混乱。请注意，Eclipse 管理自己的工作空间中资源的状态，而不仅仅是文件系统的 1:1 副本。

不要符号链接（或以其他方式）共享元数据文件夹。很多人都试过了，但是还是不行。虽然 Eclipse 插件的大部分元信息都存储在元数据文件夹中，但没有必要这样做。这就是为什么许多插件还会将一些信息存储在项目的子文件夹、隐藏文件和其他地方。只要您也不能复制或符号链接所有这些信息，只需符号链接元数据文件夹就会导致不一致。

改用可用的工具：

*   创建新工作区时，系统会要求您从当前工作区复制设置。去做！
*   使用[Pulse](http://www.poweredbypulse.com/)、[Yoxos](http://eclipsesource.com/en/products/yoxos/)、[Workspace mechanic](https://code.google.com/a/eclipselabs.org/p/workspacemechanic/)或其他第三方工具为您的工作区和项目创建“配置文件”。您可能想在 stackoverflow 中搜索这 3 个，以查看许多其他人也尝试过手动同步，但没有取得多大成功。

# javascript - 如何在javascript中随机生成数字而不重复？

> ID：15585216
> 
> 赞同：10
> 
> 时间：2013-03-23T09:31:26.057
> 
> 标签：javascript, arrays, random, for-loop

我想使用javascript随机生成0到4之间的每个数字，每个数字只能出现一次。所以我写了代码：

```
for(var l=0; l<5; l++) {
    var randomNumber = Math.floor(Math.random()*5);  
    alert(randomNumber)
} 
```

但是这段代码重复了这些值。请帮忙。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-23T09:50:47.860

生成一系列数字：

```
var numbers = [1, 2, 3, 4]; 
```

然后[洗牌](https://stackoverflow.com/a/6274381/464744)：

```
function shuffle(o) {
    for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
    return o;
};

var random = shuffle(numbers); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-23T10:26:01.797

另一种方法：

```
for (var a = [0, 1, 2, 3, 4], i = a.length; i--; ) {
    var random = a.splice(Math.floor(Math.random() * (i + 1)), 1)[0];
    console.log(random);
} 
```

不知道是否有可能使它更紧凑。

测试：http: [//jsfiddle.net/2m3mS/1/](http://jsfiddle.net/2m3mS/1/)

这是嵌入演示：

```
$('button').click(function() {
    $('.output').empty();

    for (var a = [0, 1, 2, 3, 4], i = a.length; i--; ) {
        var random = a.splice(Math.floor(Math.random() * (i + 1)), 1)[0];
        $('.output').append('<span>' + random + '</span>');
    }

}).click();
```

```
.output span {
    display: inline-block;
    background: #DDD;
    padding: 5px;
    margin: 5px;
    width: 20px;
    height: 20px;
    text-align: center;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="output"></div>
<button>Run</button>
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-23T09:52:55.683

Adil 和 Minko 给出的答案有一个主要问题（尽管 Minko 至少将其限制为一小部分数字）：他们一遍又一遍地检查相同的数字。

从这个意义上说，更好的方法是创建包含可能值的数组，将其打乱，然后从其中弹出元素。这将需要改组数组的复杂性，但它会摆脱上面提到的问题。

```
var elements = [1, 2, 3, 4];
elements.shuffle(); // not a standard Javascript function, needs to be implemented

while( elements.length > 0 ) {
    console.log( elements.pop() );
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-08T09:50:59.160

感谢您的所有帮助。但可能另一种在给定最大范围内生成随机数的方法可以按照以下方式实现。

```
function generateRan(){
    var max = 20;
    var random = [];
    for(var i = 0;i<max ; i++){
        var temp = Math.floor(Math.random()*max);
        if(random.indexOf(temp) == -1){
            random.push(temp);
        }
        else
         i--;
    }
    console.log(random)
}

generateRan(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-12-15T20:53:55.447

```
function getRanArr(lngth) {
  let arr = [];
  do {
      let ran = Math.floor(Math.random() * lngth); 
      arr = arr.indexOf(ran) > -1 ? arr : arr.concat(ran);
   }while (arr.length < lngth)

   return arr;
}

const res = getRanArr(5);

console.log(res);
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-23T09:39:50.323

如果随机数的范围不是很大，你可以使用这个：

```
var exists = [],
    randomNumber,
    max = 5;
for(var l = 0; l < max; l++) {
   do {
       randomNumber = Math.floor(Math.random() * max);  
   } while (exists[randomNumber]);
   exists[randomNumber] = true;
   alert(randomNumber)
} 
```

**[演示](http://jsfiddle.net/EyVm9/)**

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-02T11:26:10.600

生成没有任何范围的随机数

```
function getuid() {
        function s4() {
            return Math.floor((1 + Math.random()) * 0x10000)

        }
          return s4() + s4();
 }
 var uid = getuid();
 alert(uid) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-08-24T14:27:10.617

**HTML：**

```
<p id="array_number" style="font-size: 25px; text-align: center;"></p> 
```

**JS：**

```
var min = 1;
var max = 90;
var stop = 6;  //Number of numbers to extract

var numbers = [];

for (let i = 0; i < stop; i++) {
  var n =  Math.floor(Math.random() * max) + min;
  var check = numbers.includes(n);

if(check === false) {
  numbers.push(n);
} else {
  while(check === true){
    n = Math.floor(Math.random() * max) + min;
    check = numbers.includes(n);
      if(check === false){
        numbers.push(n);
      }
    }
  }
}

sort();

 //Sort the array in ascending order
 function sort() {
   numbers.sort(function(a, b){return a-b});
  document.getElementById("array_number").innerHTML = numbers.join(" - ");
} 
```

**[演示](https://jsfiddle.net/1fw0nLj7/)**

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-12-02T03:08:52.973

[使用randojs](https://github.com/nastyox/Rando.js)简单且加密安全：

```
console.log(randoSequence(4))
```

```
<script src="https://randojs.com/2.0.0.js"></script>
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-27T19:19:34.977

这么多解决方案！这是我的可重用函数的代码，它接受 3 个参数：数组中所需的整数数量（长度）和数组应包含的范围（最大值和最小值）。

```
function generateRandomArr(length, max, min) {
  const resultsArr = [];
  for (let i = 0; i < length; i++) {
    const newNumber = Math.floor(Math.random() * (max - min)) + min;
    resultsArr.includes(newNumber) ? length += 1 : resultsArr.push(newNumber);
  }
  return resultsArr;
}

generateRandomArr(10, 100, 0);
// this would give a list of 10 items ranging from 0 to 100
// for example [3, 21, 56, 12, 74, 23, 2, 89, 100, 4] 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-20T15:23:14.920

这是一个解决方案，可让您指定结果数组的长度，也可以使用负数。

```
// FROM: https://stackoverflow.com/a/2450976/2345158
function shuffleArr(array) {
  let currentIndex = array.length;
  let randomIndex;
  // While there remain elements to shuffle...
  while (currentIndex !== 0) {
    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--;
    // And swap it with the current element.
    [array[currentIndex], array[randomIndex]] = [
      array[randomIndex], array[currentIndex]];
  }
  return array;
}

// Will generate a list of random numbers in a range without duplicates
function getRandomNumberArr(min, max, length) {
  if (length > max - min + 1) throw Error('Length must not be longer than number of unique values.')
  // Generate list of possible values
  let optionsArr = [...Array(max - min + 1).keys()];
  // Return the needed number of random elements
  return shuffleArr(optionsArr).splice(0, length).map(el => el + min);
}

console.log(getRandomNumberArr(-2, 2, 5))
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-04-17T10:15:39.743

```
var randomNumber = [];

for (var i = 0; i < 16; i++) {
    var number = Math.floor(Math.random() * 4);
    var genNumber = randomNumber.indexOf(number);
    if (genNumber === -1) {
        randomNumber.push(number);
    }
} 
```

# c++ - 是否有工具可以帮助了解谁将特定参数传递给函数，以及该变量最初是在哪里创建的（在 C/C++ 中）

> ID：15585217
> 
> 赞同：1
> 
> 时间：2013-03-23T09:31:26.957
> 
> 标签：c++, c, chromium

**背景和背景：** 我在 Chromium 上做一个小项目，我正在开发一个函数，它编译作为参数接收的 JS 代码。

我能够使用 JS 代码获取类型，并使用代码从它创建一个 C++ 字符串（或 C char*）。

我面临的问题是创建其中包含 JS 代码的原始类型的东西，我在 Chromium 文件中搜索了创建这种类型的行，但没有找到需要代码的行（如 char* 或 string ) 并使用代码创建该类型 - 就像函数接收的参数一样。

**我在找什么：** 为了更好地理解这个函数最初是如何接收这个参数的（所以我可以自己创建它）我正在寻找一个 C/C++ 工具，它可以告诉我给定的函数，或给定函数的参数，谁传递了这个参数，谁将它传递给将它传递给函数的那个​​（等等），最后谁创建了它（最好是代码中的哪一行）

有谁知道这样的工具？任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:55:47.533

您可以使用可以帮助提取调用者的宏来包装您的函数。例如，如果最初您有函数签名`void foo(int param1, int param2);`，则可以改为定义：

```
#define foo(param1, param2) fooEx(param1, param2, __FUNCTION__)
void fooEx(int param1, int param2, const char* caller); 
```

现在在你的原始函数中你知道调用函数，所以你可以用它做任何你想做的事情，例如打印。您的原始界面保持不变，因此主叫方无需进行任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:37:11.520

至少一个“草稿”想法是使用带有断点和堆栈跟踪的[GNU 调试器 (gdb) 。](http://www.gnu.org/software/gdb/)可能有条件检查。在这种情况下，附加到正在运行的进程的能力也应该很有用。如果我不能很好地理解您的问题，您能否解释更多细节？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T09:41:05.073

要获得更多信息，您可以使用 valgrind ( [http://en.wikipedia.org/wiki/Valgrind](http://en.wikipedia.org/wiki/Valgrind) )。这将帮助您调试 C/C++ 代码，进行内存泄漏检测和分析（它会告诉您调用这个函数的参数是什么）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T09:44:56.907

我不确定，如果我正确理解了这个问题，但您似乎需要有关函数*调用图*的信息，即哪个函数调用了您的函数、调用了哪个函数等等的信息。

在这里，您基本上有两个选择：使用调试器，为您的函数设置断点并动态显示调用图（大多数调试器都具有此功能）。或者你使用静态代码分析工具（谷歌会帮你解决这个问题，例如我发现[了这个（关闭的）问题](https://stackoverflow.com/questions/153074/tool-to-visualise-code-flow-c-c)）。

请注意，这并不总是直接告诉您“参数”来自何处：调用图中的每个函数都可以以某种方式操纵数据，因此您仍然必须查看处理数据的每一段代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T09:45:52.347

一个称职的 IDE（我知道 Visual Studio 会这样做，所以其他的也应该可用）应该能够向您显示静态已知的对函数的传入调用。希望没有那么多，你可以从那里向后工作。

如果这不起作用（即您没有处理此问题的 IDE，或者调用者过多），您可能会被调试器和断点卡住来检查调用堆栈。

# android - 2d 与活动混合，在 android 中容易吗？

> ID：15585221
> 
> 赞同：1
> 
> 时间：2013-03-23T09:31:48.083
> 
> 标签：android

我的整个应用程序很常见，除了显示 2d 图形的区域（文本框和一些视觉效果）。该应用程序就像一个媒体播放器——它有按钮和大量对话框（用于配置）。

我想知道我怎么能这样做？

首先，我使用活动和内置动画，但显然动画太有限了。

那么我应该使用游戏引擎来实现良好的图形吗？但是在这种情况下，那些对话框呢？它们很难在游戏引擎中实现吗？或者我可以将活动对话框与 2d 游戏引擎混合使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:15:23.590

使用带有对话框和经典 UI 的 2D 引擎应该不会有困难。我建议你看看[AndEngine](http://www.andengine.org)。这是一个非常有名的游戏引擎，对于 2D 来说真的很容易。

# jquery - jQuery .empty() 覆盖 .appendTo()

> ID：15585224
> 
> 赞同：0
> 
> 时间：2013-03-23T09:32:22.940
> 
> 标签：jquery

我有一个由 jQuery 函数填充单个图像的图像模式弹出窗口。

当您单击任何缩略图（我有一个缩略图图库）以放大图像时，会显示此弹出窗口。放大的图像将在模态中弹出。

我是这样称呼它的：

```
$('#articleFeatured').click(function (e) {
    e.preventDefault();
    $('#imageModal').show(500);
    $('#imageModal').empty(); //empty modal to prevent clogging/build-up/duplicates
    $('#articleFeatured img').clone().appendTo('#imageModal #imageHolder');
    //imageModal Close Button Functionality
    $('#close_button').click(function () {
        $('#imageModal').hide(500);
    });
}); 
```

问题是，

```
.empty() 
```

覆盖

```
.appendTo() 
```

功能。

这是为什么？我的意思是 appendTo在空**之后运行。**我使用的原因`.empty()`是当时在模态中只有一个图像并防止堆积。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:49:27.170

更改`.appendTo('#imageModal #imageHolder')`为`.appendTo('#imageModal')`。该`imageModal`元素刚刚被清空，因此它不能包含具有 id 的元素`imageHolder`。

# jquery-mobile - 如何在应用程序中加载 listView 项目

> ID：15585230
> 
> 赞同：1
> 
> 时间：2013-03-23T09:33:28.747
> 
> 标签：jquery-mobile, cordova

我使用 Telerik Icenium 创建一个移动应用程序，它只涉及 Cordova 和 Jquery mobile。

在首页我有一个这样的listView

```
<ul data-role="listview">
                <li><a href="#OpenProject?pid=1" data-transition="slide">Project 1</a></li>
                <li><a href="#OpenProject?pid=2" data-transition="slide">Project 2</a></li>
            </ul> 
```

我想改为从本地存储加载，然后当用户选择时，我会将其与我的 API 同步。

这是使用本地存储并从那里获取项目的好方法吗？如果是这样，任何人都可以给我一个很好的方法来将项目从本地 json 文件或从移动设备上的本地数据库加载到 listView 中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:10:41.330

我给你做了一个工作的例子：http: [//jsfiddle.net/Gajotres/W3YDd/](http://jsfiddle.net/Gajotres/W3YDd/)

```
$(document).on('pagebeforeshow', '#index', function(){       
        if(typeof(Storage)!=="undefined") {
            localStorage.jsonExample='[{"score":null,"popularity":3,"translated":true,"adult":false,"language":"en","original_name":"The Goonies","name":"The Goonies","alternative_name":"Балбесы","movie_type":"movie","id":9340,"imdb_id":"tt0089218","url":"http://www.themoviedb.org/movie/9340","votes":43,"rating":8.5,"certification":"PG","overview":"A young teenager named Mikey Walsh finds an old treasure map in his fathers attic. Hoping to save their homes from demolition, Mikey and his friends Data Wang, Chunk Cohen, and Mouth Devereaux run off on a big quest to find the secret stash of Pirate One-Eyed Willie.","released":"1985-06-06","posters":[{"image":{"type":"poster","size":"thumb","height":138,"width":92,"url":"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/w92/bZUbpjwnarSHJK40W9sGpyedWhx.jpg","id":"4ea6009334f8633bdc002f61"}},{"image":{"type":"poster","size":"w154","height":231,"width":154,"url":"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/w154/bZUbpjwnarSHJK40W9sGpyedWhx.jpg","id":"4ea6009334f8633bdc002f61"}},{"image":{"type":"poster","size":"cover","height":278,"width":185,"url":"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/w185/bZUbpjwnarSHJK40W9sGpyedWhx.jpg","id":"4ea6009334f8633bdc002f61"}},{"image":{"type":"poster","size":"w342","height":513,"width":342,"url":"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/w342/bZUbpjwnarSHJK40W9sGpyedWhx.jpg","id":"4ea6009334f8633bdc002f61"}},{"image":{"type":"poster","size":"mid","height":750,"width":500,"url":"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/w500/bZUbpjwnarSHJK40W9sGpyedWhx.jpg","id":"4ea6009334f8633bdc002f61"}},{"image":{"type":"poster","size":"original","height":1500,"width":1000,"url":"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/original/bZUbpjwnarSHJK40W9sGpyedWhx.jpg","id":"4ea6009334f8633bdc002f61"}}],"backdrops":[{"image":{"type":"backdrop","size":"thumb","height":169,"width":300,"url":"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/w300/awhHFqiw6Dta0uHQVjgwQiyOgro.jpg","id":"4ffdbd7f760ee3570d0000e8"}},{"image":{"type":"backdrop","size":"poster","height":439,"width":780,"url":"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/w780/awhHFqiw6Dta0uHQVjgwQiyOgro.jpg","id":"4ffdbd7f760ee3570d0000e8"}},{"image":{"type":"backdrop","size":"w1280","height":720,"width":1280,"url":"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/w1280/awhHFqiw6Dta0uHQVjgwQiyOgro.jpg","id":"4ffdbd7f760ee3570d0000e8"}},{"image":{"type":"backdrop","size":"original","height":1080,"width":1920,"url":"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/original/awhHFqiw6Dta0uHQVjgwQiyOgro.jpg","id":"4ffdbd7f760ee3570d0000e8"}}],"version":3350,"last_modified_at":"2013-03-19 13:57:18 UTC"}]';      
        }

    var jsonObject = jQuery.parseJSON(localStorage.jsonExample);

    $('#movie-data').append('<li>Movie name:<span> ' + jsonObject[0].original_name+ '</span></li>');
    $('#movie-data').append('<li>Popularity:<span> ' + jsonObject[0].popularity + '</span></li>');
    $('#movie-data').append('<li>Rating:<span> ' + jsonObject[0].rating+ '</span></li>');
    $('#movie-data').append('<li>Overview:<span> ' + jsonObject[0].overview+ '</span></li>');
    $('#movie-data').append('<li>Released:<span> ' + jsonObject[0].released+ '</span></li>');  
    $('#movie-data').listview('refresh'); 
}); 
```

为了更好地说明，这个例子是从我的另一个例子中创建的：

[http://jsfiddle.net/Gajotres/jLdFj/](http://jsfiddle.net/Gajotres/jLdFj/)

在此示例中，json 是从远程源获取的。但基本原理是一样的。

# c# - 将 x 除以 x2 时计算最大舍入差异

> ID：15585234
> 
> 赞同：4
> 
> 时间：2013-03-23T09:33:58.857
> 
> 标签：c#, .net, math, rounding

这可能是 1/2 数学，1/2 编程问题。但我们走了。

我有一个带有 2 位小数的随机小数。我将用一个随机整数来划分它。然后我想知道可能的最大舍入差异。

例子：

```
 decimal number = 100.00M;
  int x = 3;

  var result = number/x;
  var roundedResult = Round(result, 2, MidpointRoundingEx.AwayFromZero);
  // roundedResult = 33.33

  var roundingDiff = number - (roundedResult * x);
  // roundingDiff = 0.01 
```

所以我这个例子的舍入差异是0.01。

但是“数字”可以是任何带有 2 位小数的数字，“x”可以是任何整数。所以我想知道是否可以提出一个公式，以便在任何情况下都能知道最大的舍入差异。

谢谢托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T12:09:21.060

好的，你想要数学 - 让我们玩得开心！

假设 d 是带有两位小数的随机十进制数。

我们可以很容易地说

```
100d = n * x + r, 

where 100d, n, x, r are integers, and 0 <= r < x 
```

所以，

```
d / x = n / 100 + r / 100x 
```

这里 n / 100 从四舍五入的角度来看总是“好”的，所以我们对“r / x”部分很感兴趣，因为它是唯一影响四舍五入的部分：

```
0 <= r / x < 1,
0 <= r / 100x < 0.01 
```

如果 r / 100x >= 0.005，则将 0.01 添加到舍入结果。这与 r / x >= 1/2 相同，即与 r >= x / 2 相同

好的，所以（d / x）四舍五入是

```
(1) n / 100, when r < x / 2, or
(2) n / 100 + 0.01, when r >= x / 2 
```

四舍五入的差异是

```
diff = d - (n / 100) * x              for (1), or
diff = d - (n / 100) * x + 0.01 * x   for (2) 
```

作为

```
(n / 100) * x  = d - r/100 
```

我们有最大差异将用于（2）：

```
max diff = r / 100 + 0.01 * x = (r + x) / 100 
```

但正如我们所知

```
x / 2 <= r < x, 
```

所以最大差异将是最大 r: (*)

```
max diff = 2 * x * 0.01 = x / 200 
```

如您所见，我们仍然依赖于特定的 x，因此我们需要对其进行一些估计。如果它是完全随机的 - 我们可以有任何舍入差异**到 d 本身**。

例如，如果我们说 x < d 那么我们有 max diff = d / 200

并添加编程部分：

```
 decimal number = 100.00M;

        decimal max = decimal.MinValue;
        decimal min = decimal.MaxValue;

        int maxX = 0;
        int minX = 0;

        for (int x = 1; x <= number; x++)
        {
            var result = number / x;
            var roundedResult = Math.Round(result, 2, MidpointRounding.AwayFromZero);
            var roundingDiff = number - (roundedResult * x);
            if (roundingDiff < min)
            {
                min = roundingDiff;
                minX = x;
            }
            if (roundingDiff > max)
            {
                max = roundingDiff;
                maxX = x;
            }
        }

        Console.WriteLine("Max is {0} for {1}", max, maxX);
        Console.WriteLine("Min is {0} for {1}", min, minX);
        Console.WriteLine("Delta is {0}", max - min);
        Console.WriteLine("d / 200 = {0}", number / 200); 
```

我们有输出：

```
Max is 0.40 for 83
Min is -0.44 for 93
Delta is 0.84
d / 200 = 0.50 
```

Why not exactly 0.5? Because in (*) we had implicit assumption that r can be x/2 for any x, which is not true, but hopefully it is enough for you purposes.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T11:06:31.100

您可以使用这个单行公式计算差异：

```
var roundingDiff = ((int)(number * 100) % x - ((int)(number * 100) % x + x / 2) / x * x) / 100M; 
```

对于给定`x`的，最大舍入差异是`x / 200`

# .net - 线程没有看到全局布尔值

> ID：15585237
> 
> 赞同：0
> 
> 时间：2013-03-23T09:34:18.613
> 
> 标签：.net, vb.net

出于某种原因，我无法在调用 Thread.Join() 时结束线程。我疯了吗？

```
Public Sub StartThread()
    _opsthread = New Thread(AddressOf OpsThread)
    _opsthread.IsBackground = True
    _opsthread.Start()
End Sub

Public Sub StopThread()
    _continue = False
    _opsthread.Join()
    'Application Hangs Here
End Sub

Public Sub OpsThread()
    While _continue
        Thread.Sleep(1000)
    End While
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:46:33.903

这是我运行的测试，稍作修改。

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Button1.Enabled = False
    StartThread()
End Sub

Private Sub Button2_Click(sender As Object, e As EventArgs) Handles Button2.Click
    StopThread()
End Sub

Dim _opsthread As Threading.Thread
Dim _continue As New Threading.AutoResetEvent(False)

Public Sub StartThread()
    _continue.Reset()
    _opsthread = New Threading.Thread(AddressOf OpsThread)
    _opsthread.IsBackground = True
    _opsthread.Start()
End Sub

Public Sub StopThread()
    If IsNothing(_opsthread) Then Exit Sub
    _continue.Set()
    _opsthread.Join()
    'Application Hangs Here
    ' Debug.WriteLine("end")
End Sub

Public Sub OpsThread()
    Dim cont As Boolean = False
    While Not cont
        cont = _continue.WaitOne(1000)
    End While
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:45:27.123

您尚未同步访问`_continue`. 出于这个原因，它可能是由 JIT 注册的。`Thread.MemoryBarrier`在读取它之前和写入它之后同步对它的访问（例如使用）。

在没有同步的情况下共享数据始终是一个危险信号。是因为程序变得有问题，还是因为大多数人对规则的理解不够好，无法确保它是安全的（我当然不知道——所以我不这样做）。

# jquery - 使用 jQuery Mobile Pagecreate 访问页面上的 jQuery 函数

> ID：15585238
> 
> 赞同：1
> 
> 时间：2013-03-23T09:34:39.843
> 
> 标签：jquery, ajax, jquery-mobile

我很难理解如何使用 jQuery Mobile 的 pagecreate 将一些 jQuery 函数加载到页面中。任何时候加载页面（无论是直接访问还是单击），我都希望能够访问下面的 swipeleft 功能...

如果我直接访问该页面，此功能正常，但一旦我尝试导航回它（即通过 href 标签到达那里），它就会停止工作。有任何想法吗？谢谢！

```
<script type='text/javascript'>
$('#listitem').live('pagecreate',function(event){
$.event.special.swipe.horizontalDistanceThreshold = 130;
$("#listitem").swipeleft(function() {
    $('#settings_click').click();
});
});
</script>

<div data-role="page" id="listitem">
<?php //content in here ?>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:53:56.023

我给你做了一个工作的例子：http: [//jsfiddle.net/Gajotres/QFuGK/](http://jsfiddle.net/Gajotres/QFuGK/)

```
$(document).on('pagebeforeshow', '#listitem', function(event){       
    $.event.special.swipe.horizontalDistanceThreshold = 130;        
    $(document).off('swipeleft').on('swipeleft', '#listitem', function(){     
        $('#settings_click').trigger('click');
    });        

    $(document).off('click').on('click', '#settings_click', function(){  
        alert('Button clicked');
    });         
}); 
```

您应该使用 pagebeforeshow 事件更改您的 pagecreate。

要测试此代码，请在一个工作示例中转到另一个页面并返回。滑动事件将正常触发。

还有一件事， .off( 方法用于在再次应用之前删除事件，没有它 swipeleft 事件将在您返回页面时一次又一次地绑定。

# php - 在一个查询中获取多个表作为单独的对象

> ID：15585241
> 
> 赞同：0
> 
> 时间：2013-03-23T09:35:21.497
> 
> 标签：php, mysql, ajax, json

我正在制作一个界面，其中第一个下拉列表中的选择决定了 6 个后续下拉列表中可用的选项。

每个下拉列表从如下表中获取其值和显示名称：

```
 $arr = array();
        $rs = mysql_query("SELECT * FROM sn_roles");
        while($obj = mysql_fetch_object($rs)) {
            $arr[] = $obj;
        }
        $response = '{"roles":'.json_encode($arr).'}';
        echo $response; 
```

并得到 json 编码。

我想要做的是从多个表中选择 id 和 name 并为每个表获取一个 json 对象集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:38:50.440

您需要为每个下拉选项使用 ajax，并将特定表的返回 json 对象存储到 javascript 对象

```
 <select name="selector1" id="selector1" onChange="getoptions();" 
            <option value="1">--Select--</option>
            <option value="2">option1</option>
            <option value="3">option2</option>
            <option value="4">option3</option>
   </select>
   <select name="selector2" id="selector2">
    </select>
    <select name="selector3" id="selector3">
    </select> 
```

下拉菜单的javascript代码就像

```
function getoptions(){

$('#selector2').html('<option value="">--Select--</option>');
$('#selector3').html('<option value="">--Select--</option>');
var selector1 = $('#selector1').val();
jQuery.get('getdropAjax.php', {'_action_':'GetDropValue', Selector1val : selector1 }, function(r) {
    for (var i in r.forselector2)
    {
        $('#selector2').append('<option value="'+i+'">'+r.forselector2[i]+'</option>');
    }
    for (var i in r.forselector3)
    {
        $('#selector3').append('<option value="'+i+'">'+r.forselector3[i]+'</option>');
    }
}, 'json');
} 
```

你的 php 代码就像

```
<?php
$data = array();
switch ( $_GET['_action_'] ){
case 'GetDropValue':
$arr1 = array();
    $rs = mysql_query("SELECT `colname` FROM sn_roles");
    while($obj = mysql_fetch_object($rs)) {
        $arr1[] = $obj->colname;
    }
$data['forselector2'] = $arr1;
$arr2 = array();
    $rs = mysql_query("SELECT `colname` FROM table2");
    while($obj = mysql_fetch_object($rs)) {
        $arr2[] = $obj->colname;
    }
$data['forselector2'] = $arr2;
return json_encode($data);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:36:15.503

像这样思考它怎么样：

```
function getSnDataJSON($table_name){

       $arr = array();
        $rs = mysql_query("SELECT id, name FROM sn_" . $table_name);
        while($obj = mysql_fetch_object($rs)) {
            $arr[] = $obj;
        }
        $response = '{"'.$table_name.'":'.json_encode($arr).'}';
        return $response;

}

echo getSnDataJSON('roles'); 
```

将从你的数据库中获取的东西封装在一个函数中，为了让它按原样工作，你需要准备好你的表名和表单元素名：

即您的数据库中的 sn_roles 成为您表单中的角色或您的数据库中的角色在您的表单中保留为角色

这是一种思考方式，我唯一不确定的是对初始 json 返回的引用。

`enter code here`$response = '{"'.$table_name.'":'.json_encode($arr).'}';

# php - jQuery/ajax 的 HTML 表单选择问题

> ID：15585244
> 
> 赞同：0
> 
> 时间：2013-03-23T09:35:44.580
> 
> 标签：php, jquery, mysql, ajax

我有一个 html 表单，下拉列表中的国家/地区来自数据库。如果用户选择任何国家，那么城市下拉菜单将基于所选国家出现。

如果用户错误地输入了表单的任何字段（此表单中还有其他字段），则国家下拉菜单将记住用户最初选择的国家，但清除城市，将其重置为`--Select City--`。我正在尝试选择**城市名称**，但我不能。任何的想法？

**此处为 HTML 格式：**

```
<tr>
    <td>PAYS <span style="color: #FF0000;">*</span></td>
    <td>
<select name="country" class="country">
<option value="">Select</option>

<?php
    $sql=mysql_query("select * from country");
    while($row=mysql_fetch_array($sql))
    {
        $id=$row['Code'];
        $data=$row['Name']; 
        $data = mb_convert_encoding($data, 'UTF-8');
    if($id == $_POST['country'])
    {
        $sel = 'selected="selected"';
    }
    else
    {
        $sel = "";
    }

        echo '<option value="'.$id.'"' . $sel . '>'.$data.'</option>';
    }
?>
</select>   
</td>
</tr>   

<tr>
<td>City</td>
    <td>
    <select class="city" name="city">
<option selected="selected" value="">--Select City--</option>
</select>   
    </td>
</tr> 
```

**Ajax 代码在这里：**

```
<script type="text/javascript" src="http://ajax.googleapis.com/
ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $(".country").change(function()
{
var id=$(this).val();
var dataString = 'id='+ id;

$.ajax({
    type: "POST",
    url: "ajax_city.php",
    data: dataString,
    cache: false,
    success: function(html)
{
$(".city").html(html);
} 
});

});
});
</script> 
```

**ajax_city.php 在这里**

```
<?php
require_once("toplevel/content/database/databd.php");
if($_POST['id'])
{
    $id=$_POST['id'];
    $sql=mysql_query("select Name from cities WHERE CountryCode ='$id'");
    while($row=mysql_fetch_array($sql))
    {
        $id=$row['Code'];
        $data=$row['Name'];
    if($_POST['city'] == $data)
    {
    $sel = 'selected = "selected"'; 
    }
    else
    {
    $sel = " ";
    }
     echo '<option value="'.$data.'" ' .$sel . ' >'.$data.'</option>';
    } 
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:01:12.817

因为，在您的 AJAX 请求中，您将数据定义为`POST`，并且您正在提供`GET`预期 JSON 映射的数据样式。在这种情况下，您的 PHP 脚本将永远不会收到预期的`ID`，也不会发生任何事情。

试试这样：

```
$(document).ready(function () {
    $(".country").change(function () {
        var myId = $(this).val();

        $.ajax({
            type: "POST",
            url: "ajax_city.php",
            data:{id : myId},
            cache: false,
            success: function (html) {
                $(".city").html(html);
            },
            error : function(jqXHR, textStatus, errorThrown) {
                alert('An error occurred!')
            }
        });

    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:10:11.770

确保发布的 ID 有效。如果 id 正确，您可以在 Mozilla 上使用 firebug 来查看相同的内容-

在成功函数中使用 append() 函数而不是 html() -

```
$(document).ready(function () {
    $(".country").change(function () {
        var myId = $(this).val();

        $.ajax({
            type: "POST",
            url: "ajax_city.php",
            data:{id : myId},
            cache: false,
            success: function (html) {
                $(".city").append(html);
            }
        });

    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T10:19:21.310

正如我在评论中提到的那样，快速解决方法是验证客户端以防止表单在无效时发布。这样您就不会丢失从服务器检索到的城市名称。这不是万无一失的，但在大多数情况下，可能会比你现在得到的更温和地失败。

您还可以在页面加载时检查国家/地区选择。如果选择了第一个选项，你什么都不做，否则调用你已经用来填充城市下拉列表的 ajax。将其放在单独的函数中以避免代码重复。

```
$(document).ready(function() {
    // call ajax if country is selected
    if (document.getElementById('countries').selectedIndex != 0) {
        // call you ajax to populate cities
    } 
```

这假设您添加`id="countries"`到国家/地区选择下拉列表。

我强烈建议您在下拉列表中添加*id*。`$('.city').html()`如果您碰巧将类名添加到其他元素，则中继唯一类名和调用可能会意外地给您一些有趣的结果。

# database - modx 自定义表格

> ID：15585246
> 
> 赞同：0
> 
> 时间：2013-03-23T09:35:52.957
> 
> 标签：database, database-design, modx, modx-revolution

我想创建一个需要一些数据库表的应用程序。
基本上，我想用一些新属性（Facebook 页面、传真、联系人......）来扩展用户。

我想通过将 userId 作为外键来做到这一点，其余属性将在一个新表中。
我是否扩展了我已经使用的登录包？

我是否创建一个具有它需要的所有文件结构的新组件，如下所示：[http](http://rtfm.modx.com/display/revolution20/Developing+an+Extra+in+MODX+Revolution) ://rtfm.modx.com/display/revolution20/Developing+an+Extra+in+MODX+Revolution ？

数据将由用户在前端插入、编辑。我需要创建一个组件吗？如果没有，我应该吗？

另外，我应该直接通过 phpMyAdmin 创建表吗？

请帮助我，因为我真的很困惑该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:52:09.443

在这种情况下，您可能最好遵循本文档中给出的“简单”示例： [http ://rtfm.modx.com/display/revolution20/Extending+modUser](http://rtfm.modx.com/display/revolution20/Extending+modUser)

您可以在 phpMyAdmin 中创建表，只需注意确保表结构与您的架构完美匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:41:07.013

所有，你需要什么 - [http://rtfm.modx.com/display/revolution20/Using+Custom+Database+Tables+in+your+3rd+Party+Components](http://rtfm.modx.com/display/revolution20/Using+Custom+Database+Tables+in+your+3rd+Party+Components)。这种情况下不需要通过phpmyadmin创建表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T15:49:56.207

如果您只有几个字段要添加，简单的方法是使用 modx 用户配置文件扩展属性 - 这样您就不必编写任何代码，所有属性都由登录包附带的附加功能控制[简介等]

查看配置文件文档：[http:](http://rtfm.modx.com/display/ADDON/Login.Register) //rtfm.modx.com/display/ADDON/Login.Register 和“useExtended”属性。只需设置该标志，注册表单中的额外字段将作为 json 数组存储在用户属性表中。

# mysql - 使用条件 if 语句查询

> ID：15585248
> 
> 赞同：1
> 
> 时间：2013-03-23T09:35:55.187
> 
> 标签：mysql, sql, pdo

我正在尝试编写一个查询，如果找不到第一个行，它将选择另一行，即如果找不到指定的行，则获取“默认”。

与此类似的东西：

```
SELECT
*
FROM
teams
WHERE
team=:team_id
ELSE
WHERE team=1 
```

这可以在Mysql中做到吗？

顺便说一句，默认值可能不仅仅是 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:38:04.170

假设`:team_id`比`1`你能做的更大

```
select * from teams where team=1 or team=:team_id order by team desc limit 1 
```

或者如果您不知道两个 id 的顺序：

```
select * from teams where team=1 or team=:team_id order by team=:team_id desc limit 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T09:54:28.887

```
SELECT * FROM teams WHERE team=:team_id
UNION ALL
SELECT * FROM teams WHERE team=1
ORDER BY team=1
LIMIT 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T10:12:50.783

再次查看我的问题后，我认为可能比我最初想的更容易做到。

以下方法不起作用吗？：

```
SELECT
*
FROM
teams
WHERE
team=:team OR (team!=:team AND team=:default_team) 
```

# matlab - Matlab：对数组进行复杂求和

> ID：15585251
> 
> 赞同：0
> 
> 时间：2013-03-23T09:36:20.123
> 
> 标签：matlab, sum, vectorization

我正在尝试在 Matlab 中实现值迭代，但在以干净的方式编程求和时遇到了麻烦。这就是我现在使用的：

problem.transition 是一个 92x92x5 矩阵，非零元素的数量从 3 到 88 不等。（对于较小的问题，[http](http://pastebin.com/Ydraa83x) ://pastebin.com/Ydraa83x是一个转换矩阵）

s 和 a 是计算该总和的函数的参数，范围分别为 1 到 92 和 1 到 5。

```
[transI,~,transV] = find(problem.transition(:,s,a)); 

som = 0;
for s_acc = 1:numel(transV)
    som = som + transV(s_acc)*max(Q(transI(s_acc),:));    
end 
```

这可行，但我确信有更好的方法。我查看并找到了诸如符号函数、arrayfun 方法之类的东西，但我无法理解它们。

这是总和（S 和 A 是向量，s 和 a 分别是 S 和 A 的元素） ![方程](../Images/0ce7686c9752d15366c73a39d104b4bd.png)

那么，对此进行编程的干净方法是什么？

提前致谢！

# rest - 使用 jersey 实现 RESTful Web 服务

> ID：15585254
> 
> 赞同：0
> 
> 时间：2013-03-23T09:37:01.877
> 
> 标签：rest, jersey

大家好，我用 jersey 实现了一个RESTful Web 服务的[教程](http://www.theserverside.com/tip/RESTful-Web-services-made-easy)。

我的项目设置如下：

文件夹结构：

*   宁静的
    *   网络信息
        *   类\com\mcnz\ws
            *   HelloWorldResource.java
            *   HelloWorldResource.class
        *   库
            *   一些库（jersey 1.6 存档）
        *   web.xml

Web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
  <web-app
    xmlns="http://java.sun.com/xml/ns/javaee" version="3.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
    http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"> 
    <servlet>
       <servlet-name>RestfulContainer</servlet-name>
       <servlet-class>
        com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
       <init-param>
           <param-name>com.sun.jersey.config.property.packages</param-name>
           <param-value>com.mcnz.ws</param-value>
       </init-param>
           <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
       <servlet-name>RestfulContainer</servlet-name>
       <url-pattern>/resources/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

HelloWorldResource.java

```
package com.mcnz.ws;
import javax.ws.rs.*;
@Path("helloworld")
public class HelloWorldResource {
    @GET
    @Produces("text/plain")
    public String getMessage() {
        return "Rest Never Sleeps";
    }
} 
```

我建立了战争，一切似乎都在运行，但是在部署到 tomcat 7 之后，url

```
http://localhost:8080/restful/resources/helloworld 
```

不回应

这是我的 [.war](https://www.dropbox.com/s/dwoo0s9hfbtp4vz/restful.war)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T07:18:41.790

我认为你的项目结构是一团糟。为什么你的REST资源在`WEB-INF`文件夹中？你应该把它们放在`src/main/java`. 对于您的第一个 REST 项目，我建议您遵循[本教程。](http://www.vogella.com/articles/REST/article.html)再次查看您的文件夹结构，我建议使用[Maven进行依赖管理。您可以](http://maven.apache.org/)[在此处](http://www.mkyong.com/tutorials/maven-tutorials/)找到一些教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T10:52:52.373

最近我在 Liferay 中成功实现了 Jersey RESTful WEB 服务。

你可以找到它...

[泽西岛实施](http://www.liferay.com/web/pradip.bhatt/blog)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T10:11:25.090

你有一个类级别的路径，尝试把它放在方法级别（在@GET语句之后）
你也可以在@GET之后留下第一个和另一个

这是我的一个样本

```
@Path("/user/")
public class UserResource {

    // Method for Registering a User, receives and replies a JSON
    @POST
    @Path("/register")
    @Produces(MediaType.APPLICATION_JSON)
    @Consumes(MediaType.APPLICATION_JSON)
    public StatusResult register(UserRegistrationRequest urr) {
        //Calls the controller to register the producer, and returns result
        StatusResult result = UserController.register(urr);
        return result;
    } 
```

在这种情况下，您可以这样称呼它 localhost:8080/restful/resources/user/register

# java - (JAVA) if 语句

> ID：15585256
> 
> 赞同：-4
> 
> 时间：2013-03-23T09:37:05.520
> 
> 标签：java, if-statement

即使文件explicit.txt 只有单词abazure 程序没有进入if 语句，我也遇到了if 语句的问题。程序只是通过 if 语句并再次输出单词 abazure。

```
import java.util.Scanner;
import java.io.File;
import java.io.PrintWriter;
import java.io.FileNotFoundException;
public class Manzai {

    public static void main(String[] args) {
    String word;
    Scanner input = null;
    PrintWriter output = null;

    try
    {
        input = new Scanner(new File("explicit.txt"));
        output = new PrintWriter(new File("censored.txt"));
    }
    catch(FileNotFoundException e)  
    {

        System.out.println("File explicit.txt was not found");
        System.exit(0);
    }

    while(input.hasNext())
    {
        word = input.next();

        if(word=="abazure")
        {
            word = "a******";
        }

        output.print(word + " ");
    }
    input.close();
    output.close();
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T09:39:01.617

`==`如果是对象，通常只检查两个引用变量是否引用同一个对象。使用 equals() 方法检查字符串是否相等

```
 if(word=="abazure") 
```

应该

```
 if("abazure".equals(word)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T09:42:44.640

尝试

```
if(word.equals("abazure")){
   // do something
} 
```

[字符串#equals()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equals%28java.lang.Object%29)

> 将此字符串与指定对象进行比较。当且仅当参数不为 null 并且是表示与此对象相同的字符序列的 String 对象时，结果才为真。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T09:43:54.913

运算符 ,`==`测试两个对象引用变量是否引用了完全相同的对象实例。

方法 ,`.equals()`测试被比较的两个对象是否等价——但它们不必是同一对象的完全相同的实例。

因此，您应该使用以下内容来检查相等性：

```
 if("abazure".equals(word)) 
```

# java - Java 断言打印

> ID：15585257
> 
> 赞同：3
> 
> 时间：2013-03-23T09:37:09.677
> 
> 标签：java, eclipse, assert

当eclipse中的条件为真时，我需要将断言中的语句打印到控制台。如何？

```
public static void main(String[] args) {
    try {
        assert(args[0].equals("x")): "kate";
    } catch(Error e) {
        System.out.print("ae ");
    } finally {
        try {
             assert(args[0].equals("y")): "jane";
        } catch(Exception e2) {
             System.out.print("ae2 ");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T09:47:24.183

你需要：

*   选择**运行**→**运行配置**→右键单击**Java应用程序**→**新建**→转到**参数**选项卡→在*VM*参数中写入**-ea**：

 *![在此处输入图像描述](../Images/0aa8a8b98f89d4cf11f450500648634b.png)

现在，当你有类似的东西时：

`assert(1==2) : "Error!!!";`

您将在控制台中看到：

```
Exception in thread "main" java.lang.AssertionError: Error!!!
    at ..... 
```*

# image - 需要软件将图像存储为文本（与 OCR 无关）

> ID：15585260
> 
> 赞同：-1
> 
> 时间：2013-03-23T09:38:00.373
> 
> 标签：image, text, converter

我需要一种将图像转换为文本文件的方法，其中包含可复制、可粘贴的文本。图像数据毕竟只是零和一，所以这应该不是不可能的，但我未能找到在线执行此操作的软件（我得到的最接近的是将 mp3 转换为十六进制字符串，但下载页面不再存在整个页面似乎脱离了 Windows 98 的美好时光）。那么，有谁知道可以将 .jpg 文件转换为 .txt 文件的程序吗？（当然不仅仅是通过更改文件扩展名，实际上将图片变成文本并能够稍后将其带回。）

提前致谢！

//LJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:08:56.293

图像包含大量数据，您可以使用 PHP 之类的方法对图像进行 Base64 编码，但它将是一个长字符串！

我刚刚为您整理了小于 2MB 的文件

[http://bigpebbles.co.uk/base64-file-converter](http://bigpebbles.co.uk/base64-file-converter)

# jquery - 在数据中找不到元素

> ID：15585262
> 
> 赞同：0
> 
> 时间：2013-03-23T09:38:12.763
> 
> 标签：jquery, ajax

我有这个js代码：

```
$.ajax({
    type: 'POST',
    url: url,
    data: {id: id, 'YII_CSRF_TOKEN': token },
    success: function(data) {
        var content = $(data).find('.content');
        console.log(content);
        $('.content').html(content);
    }
}).error(function() {
    console.log('Error!');
}) 
```

console.log() 中的数据：

```
[prevObject: jQuery.fn.jQuery.init[27], context: undefined, selector: ".content", constructor: function, init: function…] 
```

我的内容没有被插入。如果我尝试：

```
$('.content').html('TEST'); 
```

它确实有效。我认为这是 jQuery 对象的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:41:23.170

[.html()](http://api.jquery.com/html/)接受一个字符串作为参数，在你的情况下`content`是一个 jquery 对象，所以你需要使用[.append()](http://api.jquery.com/append/)来追加一个元素。

```
$('.content').empty().append(content); 
```

# ruby-on-rails - 为 css 多列布局重新排序数组

> ID：15585263
> 
> 赞同：1
> 
> 时间：2013-03-23T09:38:19.323
> 
> 标签：ruby-on-rails, ruby, css

如何重新排序数组

```
[1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

进入..

```
[1, 4, 7, 2, 5, 8, 3, 6, 9] 
```

我需要它用于 3 列 CSS 布局：

```
<ul>
  <li>1</li>
  <li>4</li>
  <li>7</li>
  <li>2</li>
  <li>5</li>
  <li>8</li>
  <li>3</li>
  <li>6</li>
  <li>9</li>
</ul>

ul { -webkit-column-count: 3 } 
```

这应该产生：

```
| 1 | 2 | 3 |
| 4 | 5 | 6 |
| 7 | 8 | 9 | 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:50:50.953

```
ary = (1..9).to_a
ary.each_slice(3).to_a.transpose.flatten 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T09:46:20.317

```
slices = [1, 2, 3, 4, 5, 6, 7, 8, 9].each_slice(3).to_a
zip = slices[0].zip(*slices[1..-1]).flatten
#=> [1, 4, 7, 2, 5, 8, 3, 6, 9] 
```

# php - Zend Frame Work 中的映射器代码中的问题

> ID：15585266
> 
> 赞同：0
> 
> 时间：2013-03-23T09:38:32.603
> 
> 标签：php, zend-framework, zend-db

```
Notice: Undefined variable: entryMessage in /var/www/Employee/application/models/EmployeeMapper.php on line 34 Fatal error: Call to a member function setEmployeeId() on a non-object in /var/www/Employee/application/models/EmployeeMapper.php on line 34 
```

这是我遇到的错误，我尝试显示输入的字段，我检查了数据库并且字段正在保存，我正在发布员工映射器。请检查代码并告诉解决方案，提前致谢

```
class Application_Model_EmployeeMapper
 {
 protected $_dbTable;

 public function setDbTable($dbTable)
 {
    if (is_string($dbTable)) {
     $dbTable = new $dbTable();
   }
if (!$dbTable instanceof Zend_Db_Table_Abstract) {
  throw new Exception('Invalid table data gateway provided');
}
$this->_dbTable = $dbTable;
return $this;
 }

 public function getDbTable()
 {
if (null === $this->_dbTable) {
  $this->setDbTable('Application_Model_DbTable_Employee');
}
return $this->_dbTable;
 }

 public function fetchAll()
  {
   $table = $this->getDbTable();
   $resultSet = $table->fetchAll($table->select()->order('EMPLOYEE_ID'));
   $entries   = array();
    foreach ($resultSet as $row) {
     $entry = new Application_Model_Employee();
      $entryMessage->setEmployeeId($this->$row->EMPLOYEE_ID)
       ->setFirstName($row->FIRST_NAME)
        ->setLastName($row->LAST_NAME)
        ->setEmail($row->EMAIL)
       ->setPhoneNumber($row->PHONE_NUMBER)
    ->setHireDate($row->HIRE_DATE)
    ->setJobId($row->JOB_ID)
    ->setSalary($row->SALARY);
  $entries[] = $entry; 
}
return $entries;
 }

public function save(Application_Model_Employee $employee)
{
  $data = array(
  'EMAIL'          => $employee->getEmail(),
  'FIRST_NAME'     => $employee->getFirstName(),
  'LAST_NAME'      => $employee->getLastName(),
  'PHONE_NUMBER'   => $employee->getPhoneNumber(),
  'HIRE_DATE'      => $employee->getHireDate(),
  'JOB_ID'         => $employee->getJobId(),
  'SALARY'         => $employee->getSalary(),

  ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:29:19.787

您收到的错误非常清楚，您应该始终阅读并尝试理解您收到的错误消息，它为您提供了大多数常见问题的解决方案。因此，请始终养成阅读和理解您收到的错误消息的习惯。这里，

```
Notice: Undefined variable: entryMessage in /var/www/Employee/application/models/EmployeeMapper.php on line 34 
```

注意说，未定义的变量；这意味着您的变量`$entryMessage`未定义。你得到的错误的第二部分：

```
Fatal error: Call to a member function setEmployeeId() on a non-object in /var/www/Employee/application/models/EmployeeMapper.php on line 34 
```

非常明显，因为您试图调用尚未定义的函数，但您假设它是一个对象并将其用作对象`setEmployeeId()`。`$entryMessage`

我假设`$entryMessage`您使用的应该是`$entry`

这些很简单，实际上不适合在 SO 中询问。

再一次，我给你的建议是，

*   始终阅读错误消息的内容，这是您应该用来调试代码中的任何错误的内容
*   如果您是编程新手，您或许应该使用 IDE（netbeans、eclipse 等），它实际上显示了代码中变量的使用以及函数和语法错误。
*   总是做你的研究，只有在没有找到或成功的情况下才提出问题，并始终展示你的尝试。其他人会帮助你，但不是为你解决一切。:)

# c++ - cout 不打印无符号字符

> ID：15585267
> 
> 赞同：25
> 
> 时间：2013-03-23T09:38:39.517
> 
> 标签：c++, printf, cout, unsigned-char

我正在处理以下代码：

```
#include<iostream>
#include<stdio.h>

using namespace std;

main() {
    unsigned char a;
    a=1;
    printf("%d", a);
    cout<<a;
} 
```

它正在打印 1 和一些垃圾。

为什么`cout`会有这样的行为？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-23T09:42:51.517

`cout << a`正在打印一个对您来说似乎是垃圾的值。其实不是垃圾。它只是一个*不可打印的*ASCII 字符，无论如何都会被打印出来。请注意，对应的 ASCII 字符`1`是不可打印的。您可以检查是否`a`可打印，[`std::isprint`](http://en.cppreference.com/w/cpp/string/byte/isprint)如：

```
std::cout << std::isprint(a) << std::endl; 
```

它将打印`0`（读取`false`：）指示字符不可打印

--

无论如何，如果您还想`cout`打印`1`，请转换`a`为：

```
cout << static_cast<unsigned>(a) << std::endl; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-12-29T15:22:09.810

[我在这里](https://stackoverflow.com/questions/48024566/c-printing-unsigned-char-values?noredirect=1#comment83018436_48024566)有一个类似的问题，我早就忘记了。可以这样解决这个问题`iostream's` `cout`：

```
#include<iostream>
#include<stdio.h>

main() {
    unsigned char a;
    a=1;
    printf("%d", a);
    std::cout<< +a << std::endl;

    return 0;
} 
```

如果要`cout`打印`unsigned char`值而不是`ascii`字符，而不是将其转换回另一种类型。你需要`promote`它。

如果你注意到我所做的只是`+`在`unsigned char`. 这是一元加法，它将促进`unsigned char`为您提供实际的数字表示。

用户 Baum mit Augen 负责提醒我这个解决方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-23T09:41:42.077

您需要将`a`整数类型转换为`cout<< (int)(a);`. 有了这个，您将观察`1`输出。使用`cout << a;`，打印将`SOH (Start of Heading)`对应无法打印的 ascii 值，`1`因此会观察到一些特殊字符。

**编辑**：

更准确地说，该`cout`声明应`cout << static_cast<unsigned>(a)`如纳瓦兹所说。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-05-25T21:51:30.003

C 编译器有自己的方式来定义打印输出的类型，因为您可以指定输出的类型。

前任：

```
uint8_t c = 100;
printf("%d",c); 
```

因此您也可以打印`c`为 int by `%d`、char `%c`、string`%s`或 hex 值`%x`。

C++ 也有自己的方式，默认情况下`cout`打印 8 位值`char`。因此，您必须在输出参数中使用说明符。

您可以使用：

1.  a`+`在输出参数的名称之前

    ```
    uint8_t data_byte = 100;
    cout << "val: " << +data_byte << endl; 
    ```

2.  使用函数转换`unsigned(var)`；喜欢，

    ```
     uint8_t data_byte = 100;
     cout << "val: " << unsigned(data_byte) << endl; 
    ```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-05-18T05:27:30.423

printf("%u",a); 这么简单试试

# c# - 适用于 Windows Phone 7.8 的宽磁贴

> ID：15585268
> 
> 赞同：1
> 
> 时间：2013-03-23T09:38:40.520
> 
> 标签：c#, xaml, windows-phone-7

我正在制作一个小型应用程序，但遇到了一个问题，我希望我的应用程序具有三种磁贴大小。现在我只有两个正方形尺寸。我将如何在 Windows Phone 7.8 中制作双宽标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:41:00.293

这里提供了一个很好的例子[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj720574(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj720574(v=vs.105).aspx)

秘诀是使用特征检测然后设置

宽背景图像宽背景图像宽背景内容

# php - 如何将两个视图表单与一个控制器（codeigniter）相结合

> ID：15585270
> 
> 赞同：0
> 
> 时间：2013-03-23T09:38:49.737
> 
> 标签：php, codeigniter

这是我的视图文件（registration_view.php）

```
<?php echo form_open("user/registration"); ?>
  <p>
  <label for="first_name">First Name:</label>
  <input type="text" id="first_name" name="first_name" value="<?php echo set_value('first_name'); ?>" />
  </p>
  <p>
  <label for="last_name">Last Name:</label>
  <input type="text" id="last_name" name="last_name" value="<?php echo set_value('last_name'); ?>" />
  </p> 
  <p>
  <label for="email">Email Address:</label>
  <input type="text" id="email" name="email" value="<?php echo set_value('email'); ?>" />
<p>
      <label for="pickup_address">Pick up Address:</label>
      <input type="text" id="pickup_address" name="pickup_address" value="<?php echo set_value('pickup_address'); ?>" />
      </p>
      <p>
      <label for="postal_code1">Postal code:</label>
      <input type="text" id="postal_code1" name="postal_code1" value="<?php echo set_value('postal_code1'); ?>" />
      </p>
      <p>
      <input type="submit" class="greenButton" value="Submit" />
      </p>
 <?php echo form_close(); ?> 
```

我的控制器 user.php

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class User extends CI_Controller{

function __construct() {
    parent::__construct();
    $this->load->model('user_model');

    }

    public function index()
    {
    $this->load->view('registration_view');
    }

public function registration()
{
    $this->user_model->add_registration();
}
} 
```

模型（user_model.php）

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

/**
 * 
 */
class User_model extends CI_Model {

    function __construct() 
    {
        parent::__construct();
    }

    public function add_registration()
    {
        $data=array(
'first_name'=>$this->input->post('first_name'),
'last_name'=>$this->input->post('last_name'),
'email'=>($this->input->post('email'),
'pickup_address'=>$this->input->post('pickup_address'),
    'postal_code1'=>$this->input->post('postal_code1'),
  );
  $this->db->insert('user',$data);
    }
    } 
```

这是我的应用程序。它是工作。我需要将此视图与两个视图分开。名字、姓氏和电子邮件属于 one_view.php，其他属于另一个视图（second_view.php）。单击 one_view.php 文件中的下一步按钮，然后打开 second_view.php 而不将值转到数据库。然后如果单击 second_view.php 中的提交按钮，所有值都会传递给用户表...请帮助我如何使用 ajax 或 jquery 分离视图文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:14:10.820

是的，可以显示两个视图。

这是如何做到的

从您的控制器显示第一个视图

```
$this->load->view("one_view",$data); 
```

现在从你的 one_view.php 使用。你可以播种第二种观点。

```
// from inside one_view.php

<div id="g" style="display:none">
<?php

$this->load->view("second_view",$pass_data);

?>
</div> 
```

因此，您正在从一个控制器加载两个视图。现在要显示第二个视图，您可以使用 jquery 显示第二个视图。

然后提交您的表格或您拥有的任何东西。

# android - android 2.2 中的 TabHost 空指针异常

> ID：15585274
> 
> 赞同：1
> 
> 时间：2013-03-23T09:39:08.760
> 
> 标签：android, nullpointerexception, android-tabhost, android-2.2-froyo, android-annotations

我正在尝试使用带有 4 个小部件的 tabhost，我已经在 android 4.2 上对此进行了测试，它的工作原理就像一个魅力，但是在 android 2.2 上，当我更改标签时它给了我一个 nullpointerexception

我知道 tabhosts 和 android 2.1/2.2 存在一个已知问题，但是我似乎无法让它与人们在其他线程上建议的其他修复程序一起使用。

注意：我正在使用[Android 注释](http://androidannotations.org/)

这是 LogCat ：

```
03-23 10:29:08.869: E/AndroidRuntime(423): FATAL EXCEPTION: main
03-23 10:29:08.869: E/AndroidRuntime(423): java.lang.NullPointerException
03-23 10:29:08.869: E/AndroidRuntime(423):  at android.widget.TabWidget.focusCurrentTab(TabWidget.java:367)
03-23 10:29:08.869: E/AndroidRuntime(423):  at android.widget.TabHost.setCurrentTab(TabHost.java:320)
03-23 10:29:08.869: E/AndroidRuntime(423):  at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:129)
03-23 10:29:08.869: E/AndroidRuntime(423):  at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:453)
03-23 10:29:08.869: E/AndroidRuntime(423):  at android.view.View.performClick(View.java:2408)
03-23 10:29:08.869: E/AndroidRuntime(423):  at android.view.View$PerformClick.run(View.java:8816)
03-23 10:29:08.869: E/AndroidRuntime(423):  at android.os.Handler.handleCallback(Handler.java:587)
03-23 10:29:08.869: E/AndroidRuntime(423):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-23 10:29:08.869: E/AndroidRuntime(423):  at android.os.Looper.loop(Looper.java:123)
03-23 10:29:08.869: E/AndroidRuntime(423):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-23 10:29:08.869: E/AndroidRuntime(423):  at java.lang.reflect.Method.invokeNative(Native Method)
03-23 10:29:08.869: E/AndroidRuntime(423):  at java.lang.reflect.Method.invoke(Method.java:521)
03-23 10:29:08.869: E/AndroidRuntime(423):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-23 10:29:08.869: E/AndroidRuntime(423):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-23 10:29:08.869: E/AndroidRuntime(423):  at dalvik.system.NativeStart.main(Native Method) 
```

这是我的代码：

```
@NoTitle
@EActivity(R.layout.activity_base)
public class BaseActivity extends TabActivity {

    Context mContext;

    @ViewById
    Button btnBaseDeconnecter;

    @ViewById
    TextView txtBaseInfos;

    @AfterViews
    void afterViews() {
        mContext = this;
        TabHost tabHost = getTabHost();

        /* tid1 is firstTabSpec Id. Its used to access outside. */
        TabSpec firstTabSpec = tabHost.newTabSpec("0");
        TabSpec secondTabSpec = tabHost.newTabSpec("1");
        TabSpec thirdTabSpec = tabHost.newTabSpec("2");
        TabSpec fourthTabSpec = tabHost.newTabSpec("3");

        /* TabSpec setIndicator() is used to set name for the tab. */
        /* TabSpec setContent() is used to set content for a particular tab. */
        firstTabSpec.setIndicator(
                prepareTabView(mContext, getResources().getDrawable(R.drawable.enlevement))).setContent(
                new Intent(this, EnlevementActivity_.class));
        secondTabSpec.setIndicator(
                prepareTabView(mContext, getResources().getDrawable(R.drawable.travaux))).setContent(
                new Intent(this, TravauxListActivity_.class));
        thirdTabSpec.setIndicator(
                prepareTabView(mContext, getResources().getDrawable(R.drawable.compte))).setContent(
                new Intent(this, CompteActivity_.class));
        fourthTabSpec.setIndicator(
                prepareTabView(mContext, getResources().getDrawable(R.drawable.contact))).setContent(
                new Intent(this, ContactActivity_.class));
        tabHost.setup();
        /* Add tabSpec to the TabHost to display. */
        tabHost.addTab(firstTabSpec);
        tabHost.addTab(secondTabSpec);
        tabHost.addTab(thirdTabSpec);
        tabHost.addTab(fourthTabSpec);
        tabHost.getTabWidget().setStripEnabled(false);
        tabHost.getTabWidget().setDividerDrawable(R.drawable.empty_divider);

    }
    public static View prepareTabView(Context context, Drawable background) {
        View view = LayoutInflater.from(context).inflate(R.layout.fake_native_tab, null);
        ImageView img = (ImageView)view.findViewById(R.id.fakeNativeTabImageView);
        img.setImageDrawable(background);
        return view;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T11:32:15.557

使用`tabHost.getTabWidget().setDividerDrawable(null);`而不是`R.drawable.empty_divider`.

推理：

查看 Stacktrace和 TabWidget.java 的[Android 2.2 源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/widget/TabWidget.java)，该方法似乎存在一个问题`getChildTabViewAt(int index)`，如果 dividerDrawable 不为空，它会跳过选项卡栏中的分隔线视图以获取实际的选项卡视图。

```
public View getChildTabViewAt(int index) {
    // If we are using dividers, then instead of tab views at 0, 1, 2, ...
    // we have tab views at 0, 2, 4, ...
    if (mDividerDrawable != null) {
        index *= 2;
    }
    return getChildAt(index);
} 
```

我认为当您使用`R.drawable.empty_divider`dividerDrawable 时，不会绘制分隔线视图会发生什么，因此应该将它们视为`null`. 如您所见，这不会发生，因此可以解释 NullPointerException 以及单击一个选项卡并选择另一个选项卡的奇怪行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:00:35.883

使用 backword 兼容库意味着在 libs 文件夹中添加 android.support.v4.jar 并尝试使用该库中的相同类，该类将同时兼容低版本和高版本

# vba - 如何循环遍历具有拆分单元格的单词表中的所有单元格

> ID：15585279
> 
> 赞同：10
> 
> 时间：2013-03-23T09:39:44.823
> 
> 标签：vba, split, ms-word, iteration, cell

我在 MS word 中有一个 3 X 3（比如 tableA）表。第 (2,2) 个单元格是一个拆分单元格（拆分为 2X2 表）。如何循环遍历 tableA 中的所有单元格。

```
Dim strCellText As String
Dim uResp As String
Dim Row As Integer
Dim Col As Integer

Dim itable As Table

For Each itable In ThisDocument.Tables

    uResp = ""

    For Row = 1 To itable.Rows.Count

        For Col = 1 To itable.Columns.Count

            strCellText = itable.Cell(Row, Col).Range.Text
            uResp = uResp & Trim(strCellText)                

        Next

    Next

    MsgBox uResp
Next 
```

该程序给出了编译错误：

```
Run time error 5914
The requested member of the collection does not exist 
```

如何迭代具有拆分单元格的表格的单元格。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T10:45:10.253

您应该假设每一行都有最大可能的列数。在你的情况下，那将是四个。为了遍历每个单元格，我建议`On Error Resume Next`在第一个循环开始之前设置。然后在你的内部循环中，试试这个代码：

```
strCellText = itable.cell(Row, Col).Range.Text

If Err.Number = 0 Then
    uResp = uResp & Trim(strCellText)
    Debug.Print Row, Col, strCellText
Else
    Err.Clear
End If 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-22T17:49:54.540

如果你想遍历 MS Word 文档中所有表格中的所有单元格，即使单元格被合并，我也得到了我想要的结果。试试这个：

```
Sub CheckingInTheCell
Dim C as Cell
Dim tableCount, Ctr

tableCount = ActiveDocuments.tables.count

for Ctr = 1 to tableCount
   For each C in ActiveDocument.Tables(Ctr).Range.cells
       .....your validations or whatever you would like to do for the cell content
   next C
next Ctr

End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-20T11:12:54.067

当我尝试从（有时格式错误的）表中提取数据时，我遇到了这种情况。这就是我的处理方式：

检查列数

```
For each row in table.rows
  if row.cells.count < expectedRows
    'You know you are lacking rows
  else
    'Normal processing
  end if
Next 
```

或者如果您仍然想要所有数据，请浏览每个单元格

```
For each row in table.rows
  For each cell in row.cells
    'Process individual cells
  Next
Next 
```

如果单元格垂直合并，这些都不起作用。

# c++ - 从“模板”没有可行的转换 ::Memberclass' 到 'const int'

> ID：15585286
> 
> 赞同：2
> 
> 时间：2013-03-23T09:40:33.463
> 
> 标签：c++, templates

我遇到了返回值/引用的问题。我正在编写一个模板（队列），并且`Front()`函数应该从队列的前面返回元素，但我得到一个错误 - `No viable conversion from 'Queue<int>::Node' to 'const int'`。当我删除时`const`，我得到`Non-const lvalue reference to type 'int' cannot bind to a value of unrelated type 'Queue<int>::Node'`了，而其他参考/无参考变体，const/no const 给了我这两个错误中的任何一个。我错过了什么？

```
#include <iostream>

using namespace std;

template <typename T>
class Queue
{
    friend ostream& operator<< (ostream &, const Queue<T> & );
private:
    class Node
    {
        friend class Queue<T>;
    public:
        Node(const T &t): node(t) {next = 0;}
    private:
        T front;
        T back;
        T node;
        Node *next;
    };
    Node *front;
    Node *back;
public:
    Queue() : front(0), back(0) {}
    ~Queue();
    bool Empty()
    {
        return front == 0;
    }
    T& Front()
    {
        if (Empty())
            cout << "Очередь пуста." << endl;
        else
        {
            T const & temp = *front; // error here
            return temp;
        }
    }
    /* ... */
};

template <class T> ostream& operator<< (ostream &, const Queue<T> & );

int main()
{
    Queue<int> *queueInt = new Queue<int>;
    for (int i = 0; i<10; i++)
    {
        queueInt->Push(i);
        cout << "Pushed " << i << endl;
    }
    if (!queueInt->Empty())
    {
        queueInt->Pop();
        cout << "Pop" << endl;
    }
    queueInt->Front();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:43:48.523

您的`Node`类定义没有多大意义：现在，每个节点存储 3 个数据值`front`：`back`和`node`. 类应该是三元组的队列吗？

然而，在您的`Front()`函数中，您需要返回前端节点的“有效负载”（即返回类型`T`的东西），而不是节点本身。像这样的东西：

```
T& Front()
{
    if (Empty())
        cout << "Очередь пуста." << endl;
    else
    {
        return front->node;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:03:13.423

代替

```
T const & temp = *front; 
```

和

```
T& temp = front->front; 
```

`Queue<T>::front`是指向 a 的指针`Node`，换句话说，`*front`是 a `Node`。然后您尝试将 a 分配`Node`给 a `T& const`，因为编译器无法转换`Node`为`T`它会抱怨。现在，`Node`有一个成员也称为`front`which is `T`，我**想**这就是您想要返回的内容，这就是修复程序所做的。（可能你想回来`front->node`。我不清楚你的意图。）

In addition, you declared `temp` as `T const &` and `Front` returns it. However, the type returned by `Front` is `T&` (non `nonst`) and the compiler cannot convert from `const` to non-`const`. By declaring `temp` non-`const` (as in the fix) such conversion is no longer required.

# facebook - 如何使用 Android 在 Facebook 朋友的墙上发布图像

> ID：15585298
> 
> 赞同：2
> 
> 时间：2013-03-23T09:41:30.793
> 
> 标签：facebook, facebook-graph-api

我开发了一个应用程序，*允许用户在朋友墙上发布图像*，这里我只给出了一个静态图像，使用下面的代码。

```
 params.putString("picture", FacebookUtility.HACK_ICON_URL); 
```

其中 HACK_ICON_URL，

```
 It is the URL of an Image... 
```

但**现在我想让用户从多张图片中选择一张图片，然后发布到好友墙。**

*好友列表.java：*

```
 public void onItemClick(AdapterView<?> adapterView, View view,
        int position, long id) {

    try {
        final long friendId;
        friendId = jsonArray.getJSONObject(position).getLong("uid");
        String name = jsonArray.getJSONObject(position).getString("name");
        new AlertDialog.Builder(this)
                .setTitle(R.string.post_on_wall_title)
                .setMessage(
                        String.format(getString(R.string.post_on_wall),
                                name))
                .setPositiveButton(R.string.yes,
                        new DialogInterface.OnClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                Bundle params = new Bundle();

                                params.putString("to",
                                        String.valueOf(friendId));
                                params.putString("caption",
                                        getString(R.string.app_name));
                                params.putString("description",
                                        getString(R.string.app_desc));
                                params.putString("link", "http://www.google.com");
                                params.putString("picture",
                                        FacebookUtility.HACK_ICON_URL);
                                params.putString("name",
                                        getString(R.string.app_action));
                                FacebookUtility.facebook
                                        .dialog(FriendsList.this,
                                                "feed",
                                                params,
                                                (DialogListener) new PostDialogListener());
                            }

                        }).setNegativeButton(R.string.no, null).show();
    } catch (JSONException e) {
        showToast("Error: " + e.getMessage());
    }
}

public class PostDialogListener extends BaseDialogListener {
    @Override
    public void onComplete(Bundle values) {
        final String postId = values.getString("post_id");
        if (postId != null) {
            showToast("Message posted on the wall.");
        } else {
            showToast("No message posted on the wall.");
        }
    }
} 
```

# vb.net - VB.NET 中的“ConnectionString 属性尚未初始化”错误

> ID：15585299
> 
> 赞同：1
> 
> 时间：2013-03-23T09:41:32.093
> 
> 标签：vb.net, visual-studio-2010

每次我尝试连接到数据库时，它都会给我这个`error "The ConnectionString property has not been initialized"`

`How can i avoid this error and make it work?`

这是我的代码：

```
Imports System.Data.OleDb
Public Class frmLoginPage
Dim con As New OleDbConnection
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim dt As New DataTable
    Dim ds As New DataSet
    ds.Tables.Add(dt)
    Dim da As New OleDbDataAdapter

    da = New OleDbDataAdapter("Select*from tblPassword", con)
    da.Fill(dt)

    Dim newRow As DataRow = dt.NewRow
    With newRow
        If .Item("Username") = txtUsername.Text And .Item("Password") = txtPassword.Text Then frmMainMenu.ShowDialog() Else MsgBox("The username or password you entered was incorrect, please try again!", MsgBoxStyle.Critical, "Information")
    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:55:38.980

你已经实例化了一个`OleDbConnection`对象，但是你没有设置`connectionstring`属性，所以它不知道它应该连接到哪里。你也没有打开它。您的代码应类似于：

```
Dim myConnection As OleDbConnection = New OleDbConnection()
myConnection.ConnectionString = myConnectionString
myConnection.Open()
' execute queries, etc
myConnection.Close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-18T05:27:56.837

您从未将连接字符串分配给连接对象，就像错误所说的那样。

在 con.open 之前插入一行设置连接字符串。

Con.connectionstring = connection Con.Open() 或者更好的是，将您的 using 语句更改如下

Dim Connection As String = "Data Source=.\SQLEXPRESS;AttachDbFilename=G:\VB Project\Library Catalog System\Library Catalog System\library.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True"

使用 Con 作为新的 SqlConnection(connection)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-11T05:40:56.480

当您不考虑建立新连接时会出现此问题解决方法很简单，您所要做的就是使

```
Dim conString as string = "Your connection string here"

Dim con As new OleDbConnection
con.connectionSting= ConSting
con.open()
      'now simply write the query you want to be executed

'At the end write
con.close() 
```

这将解决您的问题。如果它不能解决您的问题后回复，我会尝试解决它。

# python - 在图像上绘制对角线

> ID：15585303
> 
> 赞同：2
> 
> 时间：2013-03-23T09:41:47.140
> 
> 标签：python, drawing, jython, jes

嗨，我试图在图像从右上角到左下角绘制对角线，这是我到目前为止的代码。

```
 width = getWidth(picture)
  height = getHeight(picture)
  for x in range(0, width):
    for y in range(0, height):
      pixel = getPixel(picture, x, y)
      setColor(pixel, black) 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T09:52:37.463

大多数图形库都有一些直接画线的方法。

在[JES](http://www.cs.uic.edu/~troy/fall04/cs100/7_Picture_Functions.html)中有这个`addLine`功能，所以你可以做

```
addLine(picture, 0, 0, width, height) 
```

如果您坚持设置单个像素，您应该看看[Bresenham Line Algorithm](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)，这是绘制线条的最有效算法之一。

代码注释：您对两个嵌套循环所做的操作如下

```
for each column in the picture
  for each row in the current column
     set the pixel in the current column and current row to black 
```

所以基本上你用黑色像素填充整个图像。

**编辑**

要在整个图像上绘制多条对角线（在它们之间留一个空格），您可以使用以下循环

```
width = getWidth(picture)
height = getHeight(picture)
space = 10
for x in range(0, 2*width, space):
  addLine(picture, x, 0, x-width, height) 
```

这会给你一个像（这个例子是手绘的......）

![对角线](../Images/ddc97b8604af7ec59a9a162471b6fe52.png)

这利用了大多数图形库提供的*剪裁*功能，即，不在图像内的部分线条被简单地忽略。请注意，如果没有`2*width`（即如果`x`只达到`with`），则只会绘制线条的左上半部分......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-27T02:04:59.713

我想在讨论中添加一些数学考虑...

（只是因为 JES 的 addLine 函数***只画黑线***并且非常有限......）

***注意：****以下代码使用了（感谢他）指出的**Bresenham's Line Algorithm 。**`MartinStettner`*

> Bresenham 直线算法是一种算法，它确定在两个给定点之间形成近似直线的顺序。由于像素是原子实体，因此只能通过某种近似在计算机屏幕上绘制线条。

*注意：要理解以下代码，您需要记住一些基础的学校数学课程（线方程和三角函数）。*

***代码 ：***

```
# The following is fast implementation and contains side effects...

import random

# Draw point, with check if the point is in the image area
def drawPoint(pic, col, x, y):
   if (x >= 0) and (x < getWidth(pic)) and (y >= 0) and (y < getHeight(pic)):
     px = getPixel(pic, x, y)
     setColor(px, col)

# Draw line segment, given two points
# From Bresenham's line algorithm
# http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm
def drawLine(pic, col, x0, y0, x1, y1):

   dx = abs(x1-x0)
   dy = abs(y1-y0) 
   sx = sy = 0

   #sx = 1 if x0 < x1 else -1
   #sy = 1 if y0 < y1 else -1

   if (x0 < x1): 
     sx = 1 
   else: 
     sx = -1
   if (y0 < y1):
     sy = 1 
   else: 
     sy = -1

   err = dx - dy

   while (True):

     drawPoint(pic, col, x0, y0)

     if (x0 == x1) and (y0 == y1): 
       break

     e2 = 2 * err
     if (e2 > -dy):
       err = err - dy
       x0 = x0 + sx

     if (x0 == x1) and (y0 == y1):
       drawPoint(pic, col, x0, y0)
       break

     if (e2 <  dx):
       err = err + dx
       y0 = y0 + sy 

# Draw infinite line from segment
def drawInfiniteLine(pic, col, x0, y0, x1, y1):
   # y = m * x + b
   m = (y0-y1) / (x0-x1)
   # y0 = m * x0 + b   =>   b = y0 - m * x0
   b = y0 - m * x0

   x0 = 0
   y0 = int(m*x0 + b)
   # get a 2nd point far away from the 1st one
   x1 = getWidth(pic) 
   y1 = int(m*x1 + b)

   drawLine(pic, col, x0, y0, x1, y1)

# Draw infinite line from origin point and angle
# Angle 'theta' expressed in degres
def drawInfiniteLineA(pic, col, x, y, theta):

   # y = m * x + b
   dx = y * tan(theta * pi / 180.0)  # (need radians)
   dy = y

   if (dx == 0):
     dx += 0.000000001 # Avoid to divide by zero 

   m = dy / dx

   # y = m * x + b   =>   b = y - m * x
   b = y - m * x

   # get a 2nd point far away from the 1st one
   x1 = 2 * getWidth(pic)
   y1 = m*x1 + b

   drawInfiniteLine(pic, col, x, y, x1, y1)

# Draw multiple parallele lines, given offset and angle
def multiLines(pic, col, offset, theta, randOffset = 0):
   # Range is [-2*width, 2*width] to cover the whole surface
   for i in xrange(-2*getWidth(pic), 2*getWidth(pic), offset):
      drawInfiniteLineA(pic, col, i + random.randint(0, randOffset), 1, theta)

# Draw multiple lines, given offset, angle and angle offset
def multiLinesA(pic, col, offsetX, offsetY, theta, offsetA):
   j = 0
   # Range is [-2*width, 2*width] to cover the whole surface
   for i in xrange(-2*getWidth(pic), 2*getWidth(pic), offsetX):
      drawInfiniteLineA(pic, col, i, j, theta)
      j += offsetY
      theta += offsetA

file = pickAFile()
picture = makePicture(file)
color = makeColor(0, 65, 65) #pickAColor()
#drawline(picture, color, 10, 10, 100, 100)
#drawInfiniteLine(picture, color, 10, 10, 100, 100)
#drawInfiniteLineA(picture, color, 50, 50, 135.0)
#multiLines(picture, color, 20, 56.0)
#multiLines(picture, color, 10, 56.0, 15)
multiLinesA(picture, color, 10, 2, 1.0, 1.7) 

show(picture) 
```

输出（***Pierre Soulages***的绘画）：

* * *

![在此处输入图像描述](../Images/3bd4d81d532635a3bf46c8b1753e1d18.png)

![在此处输入图像描述](../Images/6cb56c2137d4011a793a24007e12a48a.png)

![在此处输入图像描述](../Images/21ae806016e59bdc6f2179fbffff523e.png)

* * *

希望这能给 JES 学生带来一些乐趣和想法……以及其他人……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T09:51:05.230

你的 `picture`对象来自哪里？它是什么？到目前为止什么不起作用？您要使用什么图像访问库？（我的意思是，您从哪里获得或打算从哪里获得“getWidth、getHeight、getPixel、setColor）？

我认为没有任何库可以为您提供可以在 setColor 调用中使用的整个对象的“像素”，如果确实如此，它将是世界上最慢的东西——也许在银河系中。

另一方面，如果这些方法确实存在并且您的图片，上面的代码将覆盖所有黑色图像 - 您将在所有可能的 x 值（从 0 到宽度）内获得所有可能的“y”值（从 0 到高度） ) 的图像，并为每个黑色着色。

画一条线需要你同时改变 x 和 y，更像：

（使用另一个“想象中的图书馆”，但更合理的是：

```
for x, y in zip(range(0, width), range(0, height)):
   picture.setPixel((x,y), Black) ) 
```

这有点工作，但除非图像是完全正方形的，否则这条线不会是完美的 - 否则它会跳过图像最宽方向的像素。为了解决这个问题，需要一个更精细的算法——但第二个是你有一种真正的方法来访问图像上的像素——比如使用 Python 的成像库（PIL 或 Pillow）、pygame 或其他一些库。

# algorithm - 搜索类似于producer-consumer的算法

> ID：15585304
> 
> 赞同：0
> 
> 时间：2013-03-23T09:41:53.177
> 
> 标签：algorithm, producer-consumer, greedy, knapsack-problem

我想问一下是否有人对以下场景的*最佳（最快）算法有一个想法：*

*   X 进程生成一个非常大的文件列表。每个进程一次生成一个文件
*   Y 进程被通知文件已准备好。每个 Y 进程都有自己的队列来收集通知
*   在给定时间，1 X 进程将通过具有 Round Rubin 算法的负载均衡器通知 1 Y 进程
*   每个文件都有大小，自然，更大的文件会让 X 和 Y 更忙

**限制**

*   一旦文件进入 Y 进程，将其删除并将其移动到另一个 Y 进程是**不切实际的。**

目前我想不出其他限制。

**这种方法的缺点**

*   有时 X 落后（文件不再被推送）。它并没有真正受到排队系统的影响，无论我是否改变它，它仍然会有缓慢/美好的时光。
*   有时 Y 落后（很多文件聚集在队列中）。再一次，和以前一样。
*   1 Y 进程正忙于处理一个非常大的文件。它的队列中还有几个小文件可以被其他 Y 进程处理。
*   通知本身是通过 HTTP 进行的，有时似乎不可靠。通知失败，调试没有显示任何内容。

还有一些细节有助于更清楚地看到图片。

*   Y 进程是数据库线程/作业
*   X 进程是 Web 应用程序
*   一旦文件到达 X 进程，这些也会通过查询从 DB 端消耗资源。对生产部分有影响

现在我考虑了以下方法：

*   X 将像以前一样生成文件，但不会通知 Y。它将保存一个缓冲区（表）来填充文件列表
*   Y 将不断在缓冲区中搜索文件并自行检索它们并将它们存储在自己的队列中。

现在这种改变是否可行？就像我说的，每个 Y 进程都有自己的队列，保留它似乎不再有效。如果是这样，那么我仍然不确定下一点：

**如何决定要获取哪些文件**

我已经通读了背包问题，我认为如果我从一开始就拥有整个文件列表，而我没有。实际上，我确实有每个文件的列表和大小，但我不知道每个文件什么时候准备好接收。

我已经解决了生产者-消费者问题，但它以固定缓冲区为中心并对其进行了优化，但在这种情况下，缓冲区是无限的，我真的不在乎它是大还是小。

下一个最佳选择是贪婪方法，其中每个 Y 进程锁定最小的文件并获取它。起初，它似乎确实是最快的方法，我目前正在构建一个模拟来验证这一点，但第二种意见会很棒。

**更新** 为了确保每个人都能了解大局，我在这里链接了一个快速完成的图表。

*   作业独立于流程。它们将以一定速度运行并处理可能的文件数量。
*   当 Job 完成一个文件时，它将向 LB 发送一个 HTTP 请求
*   每个进程对来自 LB 的请求（文件）进行排队
*   LB 采用循环规则

[图表](http://img10.imageshack.us/img10/6826/picfqd.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:22:59.973

**现在的LB思路不好**

您所描述的负载均衡器是一个坏主意，因为预测未来是不必要的，您说这是不可能的。此外，当作业的长度不同时，循环是一种糟糕的调度策略。

只需让消费者在空闲时通知 LB。当一个新的工作从生产者那里到达时，它会选择第一个空闲的消费者并将工作发送到那里。当没有空闲消费者时，生产者的作业在LB中排队等待空闲消费者出现。

这样，消费者将始终处于最佳忙碌状态。

你说“让一个队列来服务 100 个应用程序（例如）将是低效的。” 这是直觉的巨大飞跃，可能是错误的。仅处理文件名的工作队列可能很快。您只需要比平均“超大文件”处理操作快 100 倍（因为您推断有 100 个消费者）。文件处理通常是 10 秒或秒。例如，基于 Apache mod 或 Redis 的队列处理程序有两个随机选择，每秒可以很容易地处理 10,000 个请求。这与成为瓶颈的距离相差 10 倍。

如果您基于 FIFO 从空闲消费者中进行选择，则当所有作业长度相等时，行为将是循环的。

**如果 LB 绝对不能排队工作**

然后让 Ty(t) 为在当前时期 t 完成消费者 y 队列中的工作所需的未来总时间。LB 的目标是使所有 y 和 t 的 Ty(t) 值相等。这是理想。

为了尽可能接近理想值，它需要一个内部模型来计算这些 Ty(t) 值。当一个新的工作在时期 t 从生产者到达时，它找到具有最小 Ty(t) 值的消费者 y，将工作分配给这个 y，并相应地调整模型。这是“最少剩余时间”调度策略的一种变体，最适合这种情况。

该模型不可避免地是一个近似值。近似的质量将决定其有用性。

一种标准方法（例如，来自操作系统调度），将是为每个消费者 y 维护一对 [t, T]_y。T 是在过去的时期 t 计算的 Ty(t) 的估计值。因此，在稍后的 t+d 时期，我们可以将 Ty(t+d) 估计为 max(Tt,0)。max是因为d>t，估计的job时间已经过期，所以consumer应该是完整的。

LB 使用它可以获得的任何信息来更新模型。示例是估计工作所需的时间（根据您的描述可能基于文件大小和其他特征），消费者实际完成工作的通知（LB 将 T 减去已完成工作的估计持续时间并更新 t），分配新工作的估计时间（LB 增加新工作的估计持续时间并更新 t），以及在长时间工作期间消费者剩余估计时间的中间进度更新。

如果 LB 可用的信息很详细，您将希望将 [t, T]_y 对中的总时间 T 替换为在 y 处排队的更完整的工作模型：例如，估计的工作持续时间列表，其中列表的头部是当前正在执行的。

LB 模型越准确，消费者在有工作时挨饿的可能性就越小，这是您要避免的。

# java - 从 Android 应用程序插入字符串并单击 ASP 页面上的按钮，而无需在手机上打开页面

> ID：15585307
> 
> 赞同：0
> 
> 时间：2013-03-23T09:42:11.890
> 
> 标签：java, android, asp.net, http-post

我想从一个 android 应用程序发送一个字符串并将其转储到一个文本框中，然后单击 ASP 网站中存在的一个按钮，而无需在手机上打开该网站（该按钮和文本框都存在于 asp 网页上）。

我可以控制网站（ASP 页面的内容`__VIEWSTATE`和`__EVENTVALIDATION`字符串可用）。我想知道是否有办法使用`__VIEWSTATE`和`__EVENTVALIDATION`字符串来做到这一点。如果有其他方法，请您逐步解释一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:52:23.933

我想你想在点击后在网站上开始一些过程（例如创建/阅读/一些信息）。但是，如果您可以访问网站源，最好创建一些 WCF 服务或 ASHX 并使用它，您可以发送任何数据并获得操作结果。在没有打开站点的情况下单击按钮是不可能的。或查看[我可以在不触发页面加载事件的情况下触发按钮单击事件吗？](https://stackoverflow.com/questions/11124837/can-i-fire-button-click-event-without-firing-pageload-event)

# php - 使用PHP发送电子邮件两个多个收件人但正文不同

> ID：15585309
> 
> 赞同：0
> 
> 时间：2013-03-23T09:42:33.250
> 
> 标签：php, html-email

我有一个联系表格，当用户提交所有值时将发送（电子邮件）给管理员。但是现在我想做当用户提交管理员将收到电子邮件并且用户也将收到一封电子邮件但正文不同时。

这是我以前的代码：

```
<?php
if(isset($_POST['email'])) {

// EDIT THE 2 LINES BELOW AS REQUIRED
$email_to = "admin@gmail.com";
$email_subject = "Lifemailer Sales Enquiry";
$email_to_user= "Name: ".clean_string($name)."\n";

function died($error) {
    // your error code can go here
    $URL = "error.html";
header("Location: $URL");
die();
}

// validation expected data exists
if(!isset($_POST['name']) ||
    !isset($_POST['contact']) ||
    !isset($_POST['email']) ||
    !isset($_POST['email_sub']) ||
    !isset($_POST['remarks'])) {
    died('We are sorry, but there appears to be a problem with the form your
     submitted.');      
}

$name = $_POST['name']; // not required
$contact = $_POST['contact']; // required
$email = $_POST['email']; // required
$email_sub = $_POST['email_sub']; // required
$remarks = $_POST['remarks']; // required

$error_message = "";
$string_exp = "^[a-z .'-]+$";
  if(!eregi($string_exp,$name)) {
$error_message .= 'The Name you entered does not appear to be valid.<br />';
 }
    $string_exp = "^[0-9 .-]+$";
  if(!eregi($string_exp,$contact)) {
$error_message .= 'The Contact Number you entered does not appear to be valid.
 <br     />';
  }
$email_exp = "^[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$";
  if(!eregi($email_exp,$email)) {
$error_message .= 'The Email Address you entered does not appear to be valid.
  <br    />';
  }

  if(strlen($error_message) > 0) {
died($error_message);
  }
$email_message = "Form details below.\n\n";

function clean_string($string) {
  $bad = array("content-type","bcc:","to:","cc:","href");
  return str_replace($bad,"",$string);
}

$email_message .= "Name: ".clean_string($name)."\n";
$email_message .= "Contact Number: ".clean_string($contact)."\n";
$email_message .= "Email: ".clean_string($email)."\n";
$email_message .= "Email Subject : ".clean_string($email_sub)."\n";
$email_message .= "Remarks/Enquiry : ".clean_string($remarks)."\n";

    // create email headers
    $headers = 'From: '.$email."\r\n".
    'Reply-To: '.$email."\r\n" .
    'X-Mailer: PHP/' . phpversion();
     @mail($email_to, $email_subject, $email_message, $headers);  
     $URL = "thank-you.html";
     header("Location: $URL");

     ?>

    Thank you for contacting us. We will be in touch with you very soon.

     <?
      }
     ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:15:00.663

以同样的方式，您可以在将其发送给管理员后发送具有不同主题、email_to、email_message 的第二封邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:48:00.047

```
 just concatenate

  $email_to = ' admin@gmail.com ' . ',' ;

  $email_to  . = ' admin@gmail.com ' ; 
```

# objective-c - Xcode 比较来自 FMDB 的数字

> ID：15585314
> 
> 赞同：0
> 
> 时间：2013-03-23T09:43:07.893
> 
> 标签：objective-c, sql, xcode, fmdb

我想从数据库中选择一条记录，其中“余额”大于您键入的数字。

常规的 sql 是：SELECT cardNum FROM cardInfo WHERE balance > money ORDER BY 提款 DESC，折扣 DESC。

但我不知道如何在 Objective-C 中做到这一点（在 'WHERE' 子句中将整数与 NSString 进行比较）。问题是没有 NSInteger 可以保存到 FMDB 表中。

这是我的代码的一部分：

```
NSString * moneyText = moneyField.text;
double money = [moneyText doubleValue];

NSString *selectedRecord = [db stringForQuery:@"SELECT cardInfo.cardNum FROM cardInfo WHERE (cardInfo.currentBalance ... I don't know what here is)ORDER BY withdrawals DESC];  (I want to get the first record only). 
```

有谁可以帮帮我吗？~谢谢！~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-16T13:48:56.977

```
NSArray *dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docDir = [dirPaths objectAtIndex:0];
NSString *databasePath = [docDir stringByAppendingPathComponent:@"samcontact.sqlite"];
NSString *name;
NSString *phone;
FMDatabase *database = [FMDatabase databaseWithPath:databasePath];

[database open];
FMResultSet *results = [database executeQuery:@"select * from phone where Name = ?",txt_Name.text];
while ([results next])
{
    name = [results stringForColumn:@"Name"];
    phone = [results stringForColumn:@"phoneno"];
}

txt_Name.text = name;
txt_Contact.text = phone;
[database close]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:12:03.137

你很接近：

```
NSString *selectedRecord = [db stringForQuery: @"SELECT cardNum FROM cardInfo WHERE balance > ? ORDER BY withdrawals DESC, discount DESC", @(money)]; 
```

这基本上绑定了`NSNumber`由语句中的创建的`@(money)`，这会导致它在调用 SQL 时被替换。 `stringForQuery:`总是返回第一个记录集中的第一个值（或者`nil`如果没有匹配项）。

对于旧版本的编译器，使用`[NSNumber numberWithDouble: money]`而不是`@(money)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T10:12:38.523

只需将其作为 NSNumber 传递，如下所示：

```
NSString * moneyText = moneyField.text;
double money = [moneyText doubleValue];
NSString *selectedRecord = [db stringForQuery:@"SELECT cardNum FROM cardInfo WHERE balance > ? ORDER BY withdrawals DESC, discount DESC", [NSNumber numberWithDouble:money]]; 
```

**编辑**

如果 Balance 是一个字符串，那么只需执行此操作！

```
NSString * moneyText = moneyField.text;
NSString *selectedRecord = [db stringForQuery:@"SELECT cardNum FROM cardInfo WHERE balance > ? ORDER BY withdrawals DESC, discount DESC", moneyText]; 
```

# c++ - 如何在 C++ 中正确地从/在二进制文件中读取和写入对象

> ID：15585316
> 
> 赞同：0
> 
> 时间：2013-03-23T09:43:24.650
> 
> 标签：c++, file, object

下面是我的超市开票和股票编辑程序类的基本结构代码：

```
class Admin
{
public:
     admin();
private:
     int Pid;
     char name[20];
     double quant;
     double price;
     double disc;
     double net_price;

     friend istream &read(istream&, Admin&);
     friend ostream &show(ostream&, const Admin);
};

istream &read(istream&, Admin&);
ostream &show(ostream&, const Admin); 
```

友元函数的定义：

```
istream &read(istream &is, Admin &commodity)
{
    double dis;

    fflush(stdin);
    is>>commodity.Pid;

    is.getline(commodity.name,30);

    is>>commodity.quant
      >>commodity.price
      >>commodity.disc;

    dis=grs_pr*(commodity.disc/100);

    commodity.net_price=grs_pr-dis;

    return is;
}

ostream &show(ostream &os, const Admin thing)
{
    os << thing.name <<"   " << thing.quant <<"   "
       << thing.price <<"   " << thing.disc <<"   "
       << thing.net_price << endl;

    return os;
} 
```

主功能：

```
int main()
{
    admin item;

    while(read(cin,item)
    {
        ofstream file;
        file.open("Stock.dat",ios::binary | ios::app);
        file.write(reinterpret_cast<const char*>(&item),sizeof(Admin));
    }
    ifstream readFile("Stock.dat",ios::in|ios::binary);

    while(!readFile.eof())
    {
        readFile.read(reinterpret_cast<char*> (&item),sizeof(Admin));
        Admin readedItem;
        read(readFile,readedItem);    /*i have used read and show function to watch the values that are read by readFile but every time show function output some five exponential values like 5.23689e-301*/
        show(cout,readedItem);
    }

    return 0;
} 
```

请告诉我上面的代码有什么问题，我应该怎么做才能纠正它，我的动机是从创建的文件中读取，并通过用户提及产品 ID 来更改或编辑要选择的项目的数据，请帮助我如何实现此功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T14:45:57.300

您不应该自己实现天真的序列化。使用图书馆。

见即回答[1](https://stackoverflow.com/a/18208129/847349) , [2+comments](https://stackoverflow.com/a/18186809/847349) , [3](https://stackoverflow.com/a/17277321/847349) , [4](https://stackoverflow.com/a/17269736/847349)

此外，不要将数据操作逻辑（即`commodity.net_price=grs_pr-dis;`）放入数据序列化中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:06:32.523

假设我理解正确，那么您的阅读和显示循环应该是

```
 for (;;)
    {
        readFile.read(reinterpret_cast<char*> (&item),sizeof(Admin));
        if (readFile.eof())
            break;
        show(cout,item);
    } 
```

出于某种原因，您阅读了两次，首先是一个名为的变量`item`，然后是另一个名为`readItem`. 您只需要阅读一次。也是错误的，因为您必须在阅读**之后**而不是**之前**`while (!readFile.eof())`测试文件结尾。

# php - 如果没有索引，则 wordpress 回显其他内容

> ID：15585317
> 
> 赞同：0
> 
> 时间：2013-03-23T09:43:25.410
> 
> 标签：php, wordpress

我想给出我的标题`<?php echo get_the_title(); ?>`条件陈述。如果不是 HOMEPAGE 则显示它是什么 = `<?php echo get_the_title(); ?>`。如果主页显示`THIS IS + <?php echo get_the_title(); ?>`

所以语法应该是

```
<?php

$path = $_SERVER['REQUEST_URI'];
$page = basename($path);
$page = basename($path, '.php');

?>

<?php if($page == 'index') 
  {echo 'This is'. get_the_title();  }
   else 
   {echo get_the_title();}
?> 
```

问题是我真的不知道在 wordpress 中我们是否使用相同的方式或更智能或更简单的方式。

哦，忘记了！ **实际上，我的索引/主页不是真正的索引，它是名为“HOMEPAGE”的页面设置来自`Reading Settings -> a static page, front page => HOMEPAGE`**

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:50:33.717

将您的代码放入`functions.php`

```
function title_edit($title){
    if(!is_front_page() || get_post_type() != 'page') return $title;
    $title = 'Home: '.$title;
    return $title;
}

add_filter('the_title','title_edit'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:53:46.020

问题解决了感谢@silentboy

```
<?php if(is_front_page()) 
    echo 'This is'.get_the_title(); 
     else echo get_the_title(); ?> 
```

# java - 如何在休眠中编写连接查询。运行查询时获取 null

> ID：15585326
> 
> 赞同：0
> 
> 时间：2013-03-23T09:44:25.233
> 
> 标签：java, hibernate

我有一个查询，当我在 sqlDeveloper 中运行时，我得到了结果。这是查询

```
select * from Losa_Cust_Reject_App rejectApp 
inner join 
    Losa_Cust losaCust 
on 
    rejectApp.app_Ref_No = losaCust.app_Ref_No 
where 
    rejectApp.app_Ref_No != '0000001912' and  rejectApp.app_Dt >= '23-SEP-2012' 
and
    rejectApp.cust_Id1 = 'A111111111' and rejectApp.cust_Id1_Type = '01'; 
```

我将此查询翻译为休眠如下

```
public List findAppByDate(String appRefNo, Date previousAppDate, String currentId1,
        String currentIdType1) {

    StringBuffer query = new StringBuffer("from ");
    query.append(LosaCustRejectApp.class.getName());
    query.append(" rejectApp inner join ");
    query.append(LosaCust.class.getName());
    query.append(" losaCust with rejectApp.appRefNo = losaCust.comp_id.appRefNo");
    query.append(" where rejectApp.appRefNo != ? and  rejectApp.appDt >= ?");
    query.append(" and rejectApp.custId1 = ? and rejectApp.custId1Type = ? ");

    List result = null;

    try {
        result = getHibernateTemplate().find(query.toString(),
                new Object[] { appRefNo, previousAppDate, currentId1, currentIdType1 });

        if (CollectionUtils.isNotEmpty(result)) {
            return result;
        }
    } catch (Exception e) {
        String message = e.getMessage();
        System.out.println();
    }
    return result;
} 
```

但是当我运行这个查询时，它来到了 catch 块，我进入`message = null`了 catch 块。这是我的 LosaCustRejectApp 的 .hbm.xml 文件

LosaCustRejectApp.hbm.xml

```
<hibernate-mapping default-lazy="false">

<class name="com.thetasp.losa.data.LosaCustRejectApp" table="LOSA_CUST_REJECT_APP" optimistic-lock="version">

    <id name="rejectAppId" type="java.lang.Long" column="REJECT_APP_ID">
        <generator class="com.thetasp.code.runningno.HibernateId">
            <param name="fieldCode">REJECT_APP_ID</param>
            <param name="returnType">java.lang.Long</param>
        </generator>
    </id>
    <version name="rowVersion" type="int" column="ROW_VERSION" access="property" unsaved-value="undefined" />
    <property name="appRefNo" type="java.lang.String" column="APP_REF_NO" not-null="true" length="20" />
    <property name="appDt" type="java.sql.Timestamp" column="APP_DT" not-null="true" length="23" />
    <property name="custId1Type" type="java.lang.String" column="CUST_ID1_TYPE" not-null="true" length="1" />
    <property name="custId1" type="java.lang.String" column="CUST_ID1" not-null="true" length="20" />
            .....
            .....
    <property name="updateDt" type="java.sql.Timestamp" column="UPDATE_DT" length="23" />

    <!-- associations -->

</class> 
```

这是我的 LosaCust.hbm.xml

```
<hibernate-mapping default-lazy="false">
<class name="com.thetasp.losa.data.LosaCust" table="LOSA_CUST" discriminator-value="I" optimistic-lock="version">

    <composite-id name="comp_id" class="com.thetasp.losa.data.LosaCustPK">
        <key-property name="custId" column="CUST_ID" type="java.lang.String" length="20" />
        <key-property name="appRefNo" column="APP_REF_NO" type="java.lang.String" length="20" />
    </composite-id>

    <discriminator column="CUST_T" type="string" length="1" ></discriminator>

    <version name="rowVersion" type="int" column="ROW_VERSION" access="property" unsaved-value="undefined" />

    <property name="age" type="java.lang.Integer" column="AGE" length="10" />
    <property name="id1Type" type="java.lang.String" column="ID1_TYPE" length="1" />
    <property name="id1" type="java.lang.String" column="ID1" length="20" />
    ....
    <many-to-one name="cisCust" class="com.thetasp.cis.data.CisCust" cascade="none" update="false" insert="false" fetch="join">
        <column name="CUST_ID"></column>
    </many-to-one>

    <set name="losaCustDupAppSummaryList" lazy="true" inverse="true" cascade="delete-orphan" order-by="DUP_APP_DT DESC">
        <key>
            <column name="CUST_ID" />
            <column name="APP_REF_NO" />
        </key>
        <one-to-many class="com.thetasp.losa.data.LosaCustDupAppSummary" />
    </set>

    <set name="losaCustDebtSummaryList" lazy="true" inverse="true" cascade="delete-orphan">
        <key>
            <column name="CUST_ID" />
            <column name="APP_REF_NO" />
        </key>
        <one-to-many class="com.thetasp.losa.data.LosaCustDebtSummary" />
    </set>

    <set name="losaCustCcList" lazy="true" inverse="true" cascade="merge">
        <key>
            <column name="CUST_ID" />
            <column name="APP_REF_NO" />
        </key>
        <one-to-many class="com.thetasp.losa.data.cc.LosaCustCc" />
    </set>

    <set name="losaFinancialIncomeList" lazy="true" inverse="true" cascade="all">
        <key>
            <column name="CUST_ID" />
            <column name="APP_REF_NO" />
        </key>
        <one-to-many class="com.thetasp.losa.data.LosaFinancialIncome" />
    </set>

    <set name="losaCustUitilizationCcList" lazy="true" inverse="true" cascade="merge" >
        <key>
            <column name="CUST_ID" />
            <column name="APP_REF_NO" />
        </key>
        <one-to-many class="com.thetasp.losa.data.cc.LosaCustUtilizationCc" />
    </set>

    <set name="losaMueList" lazy="true" inverse="true" cascade="merge">
        <key>
            <column name="CUST_ID" />
            <column name="APP_REF_NO" />
        </key>
        <one-to-many class="com.thetasp.losa.data.LosaMue" />
    </set>

    <subclass name="com.thetasp.losa.data.LosaCorpCust" discriminator-value="C" lazy="false">

        <join table="LOSA_CORP_CUST" fetch="join" optional="true" >
            <key>
                <column name="CUST_ID"/>
                <column name="APP_REF_NO"/>
            </key>
            <property name="annualIncome" column="ANNUAL_INCOME" type="java.math.BigDecimal" precision="19" scale="2" />
                    .....

        </join>
    </subclass>
    <subclass name="com.thetasp.losa.data.LosaIndvCust" discriminator-value="I" lazy="false" >
        <property name="salutation" type="java.lang.String" column="SALUTATION" not-null="false" length="10" />
        <property name="midName" type="java.lang.String" column="MID_NAME" length="50" />
    ....
            ....
        <property name="verifiedTaxPayableAmt" type="java.math.BigDecimal" column="VERIFIED_TAX_PAYABLE_AMT"  precision="19"  scale="2"/>

        </subclass>
    </class>
</hibernate-mapping> 
```

为什么我得到 null ？为什么这个查询不在 hibernate 中运行？我做错了什么？

谢谢

****编辑*** ------------------------------------------------ ------------**

我想我因为线而变得空虚

```
query.append(" losaCust with rejectApp.appRefNo = losaCust.comp_id.appRefNo"); 
```

这里我如何调用这个方法并传递值

```
for (LosaCust currentLosaCust : currentCustomerList) {
    String currentId1 = currentLosaCust.getId1();
    String currentIdType1 = currentLosaCust.getId1Type();
    List<LosaCustRejectApp> previousRejectedAppList = losaCustRejectAppBoc
                    .findAppByDate(appRefNo, previousAppDate, currentId1, currentIdType1);

    if (CollectionUtils.isNotEmpty(previousRejectedAppList)) {
            ....
    }

} 
```

这是堆栈跟踪

```
java.lang.NullPointerException
at org.hibernate.hql.ast.HqlSqlWalker.createFromJoinElement(HqlSqlWalker.java:371)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.joinElement(HqlSqlBaseWalker.java:3452)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromElement(HqlSqlBaseWalker.java:3239)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromElementList(HqlSqlBaseWalker.java:3112)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromClause(HqlSqlBaseWalker.java:720)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:571)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:288)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:231)
at org.hibernate.hql.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:254)
at org.hibernate.hql.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:185)
at org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)
at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:101)
at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:80)
at org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:94)
at org.hibernate.impl.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:156)
at org.hibernate.impl.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:135)
at org.hibernate.impl.SessionImpl.createQuery(SessionImpl.java:1651)
at org.springframework.orm.hibernate3.HibernateTemplate$30.doInHibernate(HibernateTemplate.java:914)
at org.springframework.orm.hibernate3.HibernateTemplate$30.doInHibernate(HibernateTemplate.java:1)
at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:406)
at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
at org.springframework.orm.hibernate3.HibernateTemplate.find(HibernateTemplate.java:912)
at com.thetasp.losa.dao.imp.LosaCustRejectAppDaoImp.findAppByDate(LosaCustRejectAppDaoImp.java:125)
at com.thetasp.losa.boc.imp.LosaCustRejectAppBocImp.findAppByDate(LosaCustRejectAppBocImp.java:263)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.orm.hibernate3.HibernateInterceptor.invoke(HibernateInterceptor.java:111)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at com.sun.proxy.$Proxy213.findAppByDate(Unknown Source)
at com.thetasp.losa.boc.imp.LosaCustRejectAppCheckHKANZBocImp.checkForIdType1AndIdNo1(LosaCustRejectAppCheckHKANZBocImp.java:97)
at com.thetasp.losa.boc.imp.LosaCustRejectAppCheckHKANZBocImp.checkRejectApp(LosaCustRejectAppCheckHKANZBocImp.java:80)
at com.thetasp.losa.zk.composer.creditcheckresults.CreditCheckResultsHKANZComposer.onClick$btn_runcustreject(CreditCheckResultsHKANZComposer.java:219)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.zkoss.zk.ui.event.GenericEventListener.onEvent(GenericEventListener.java:81)
at org.zkoss.zk.ui.impl.EventProcessor.process0(EventProcessor.java:192)
at org.zkoss.zk.ui.impl.EventProcessor.process(EventProcessor.java:138)
at org.zkoss.zk.ui.event.Events.sendEvent(Events.java:306)
at org.zkoss.zk.ui.event.Events.sendEvent(Events.java:329)
at org.zkoss.zk.ui.AbstractComponent$ForwardListener.onEvent(AbstractComponent.java:3054)
at com.thetasp.common.zk.utils.EventUtil.triggerEvent(EventUtil.java:133)
at com.thetasp.common.zk.utils.EventUtil.triggerEvent(EventUtil.java:104)
at com.thetasp.common.zk.utils.EventUtil.triggerEvent(EventUtil.java:89)
at com.thetasp.common.zk.utils.PipeEventHandler.onEvent(PipeEventHandler.java:32)
at org.zkoss.zk.ui.impl.EventProcessor.process0(EventProcessor.java:192)
at org.zkoss.zk.ui.impl.EventProcessor.process(EventProcessor.java:138)
at org.zkoss.zk.ui.impl.UiEngineImpl.processEvent(UiEngineImpl.java:1626)
at org.zkoss.zk.ui.impl.UiEngineImpl.process(UiEngineImpl.java:1410)
at org.zkoss.zk.ui.impl.UiEngineImpl.execUpdate(UiEngineImpl.java:1134)
at org.zkoss.zk.au.http.DHtmlUpdateServlet.process(DHtmlUpdateServlet.java:562)
at org.zkoss.zk.au.http.DHtmlUpdateServlet.doGet(DHtmlUpdateServlet.java:457)
at org.zkoss.zk.au.http.DHtmlUpdateServlet.doPost(DHtmlUpdateServlet.java:465)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:662) 
```

# c# - EF Code First 中的计算列

> ID：15585330
> 
> 赞同：94
> 
> 时间：2013-03-23T09:44:42.497
> 
> 标签：c#, sql-server, ef-code-first, entity-framework-5, calculated-columns

我需要在我的数据库中有一列由数据库计算为（行总和）-（行总和 b）。我正在使用代码优先模型来创建我的数据库。

这就是我的意思：

```
public class Income {
      [Key]
      public int UserID { get; set; }
      public double inSum { get; set; }
}

public class Outcome {
      [Key]
      public int UserID { get; set; }
      public double outSum { get; set; }
}

public class FirstTable {
      [Key]
      public int UserID { get; set; }
      public double Sum { get; set; } 
      // This needs to be calculated by DB as 
      // ( Select sum(inSum) FROM Income WHERE UserID = this.UserID) 
      // - (Select sum(outSum) FROM Outcome WHERE UserID = this.UserID)
} 
```

如何在 EF CodeFirst 中实现这一点？

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-03-23T10:04:42.137

您可以在数据库表中创建[计算列](http://msdn.microsoft.com/en-us/library/ms191250%28v=sql.105%29.aspx)。在 EF 模型中，您只需使用属性注释相应的`DatabaseGenerated`属性：

```
[DatabaseGenerated(DatabaseGeneratedOption.Computed)]
public double Summ { get; private set; } 
```

或者使用流畅的映射：

```
modelBuilder.Entity<Income>().Property(t => t.Summ)
    .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Computed) 
```

正如[Matija Grcic](https://stackoverflow.com/a/15585524/861716)在评论中所建议的那样，制作 property 是个好主意`private set`，因为您可能永远不想在应用程序代码中设置它。实体框架对私有设置器没有问题。

**注意：**对于 EF .NET Core，您应该使用**ValueGeneratedOnAddOrUpdate**因为 HasDatabaseGeneratedOption 不存在，例如：

```
modelBuilder.Entity<Income>().Property(t => t.Summ)
    .ValueGeneratedOnAddOrUpdate() 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-03-23T10:09:29.737

```
public string ChargePointText { get; set; }

public class FirstTable 
{
    [Key]
    public int UserID { get; set; }

    [DatabaseGenerated(DatabaseGeneratedOption.Computed)]      
    public string Summ 
    {
        get { return /* do your sum here */ }
        private set { /* needed for EF */ }
    }
} 
```

参考：

*   [EF 4.1 DatabaseGeneratedOption.Computed 中的错误](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/a6d182bd-5027-4793-bfd9-ef88a44ec6bc)
*   [实体框架代码优先迁移中的计算列](http://geekswithblogs.net/DavidPaquette/archive/2012/09/23/calculated-columns-in-entity-framework-code-first-migrations.aspx)
*   [使用计算列](http://kamranicus.com/blog/posts/35/working-with-computed-columns-in-ef-43)

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2019-02-18T17:44:32.230

截至 2019 年，EF 核心允许您使用 fluent API 以干净的方式计算列：

假设这`DisplayName`是您要定义的计算列，您必须像往常一样定义属性，可能使用私有属性访问器来防止分配它

```
public class Person
{
    public int PersonId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    // this will be computed
    public string DisplayName { get; private set; }
} 
```

然后，在模型构建器中，使用列定义对其进行处理：

```
protected override void OnModelCreating(ModelBuilder modelBuilder)
{
    modelBuilder.Entity<Person>()
        .Property(p => p.DisplayName)
        // here is the computed query definition
        .HasComputedColumnSql("[LastName] + ', ' + [FirstName]");
} 
```

有关详细信息，请查看[MSDN](https://docs.microsoft.com/en-us/ef/core/modeling/relational/computed-columns)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-03-06T12:00:30.450

在 EF6 中，您只需将映射设置配置为忽略计算属性，如下所示：

定义模型的 get 属性的计算：

```
public class Person
{
    // ...
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string FullName => $"{FirstName} {LastName}";
} 
```

然后在模型配置上将其设置为忽略

```
protected override void OnModelCreating(ModelBuilder modelBuilder)
{
    //...
    modelBuilder.Entity<Person>().Ignore(x => x.FullName)
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-23T09:58:35.380

一种方法是使用 LINQ：

```
var userID = 1; // your ID
var income = dataContext.Income.First(i => i.UserID == userID);
var outcome = dataContext.Outcome.First(o => o.UserID == userID);
var summ = income.inSumm - outcome.outSumm; 
```

您可以在您的 POCO 对象中执行此操作`public class FirstTable`，但我不建议这样做，因为**我认为**这不是好的设计。

另一种方法是使用 SQL 视图。您可以使用 Entity Framework 读取像表格一样的视图。在视图代码中，您可以进行计算或任何您想做的事情。只需创建一个视图

```
-- not tested
SELECT FirstTable.UserID, Income.inCome - Outcome.outCome
  FROM FirstTable INNER JOIN Income
           ON FirstTable.UserID = Income.UserID
       INNER JOIN Outcome
           ON FirstTable.UserID = Outcome.UserID 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-08T05:06:54.963

我会通过使用视图模型来解决这个问题。例如，与其将 FirstTable 类作为数据库实体，不如仅拥有一个名为 FirstTable 的视图模型类，然后拥有一个用于返回包含计算总和的此类的函数？例如，您的课程将是：

```
public class FirstTable {
  public int UserID { get; set; }
  public double Sum { get; set; }
 } 
```

然后你会有一个你调用的函数，它返回计算的总和：

```
public FirsTable GetNetSumByUserID(int UserId)
{
  double income = dbcontext.Income.Where(g => g.UserID == UserId).Select(f => f.inSum);
  double expenses = dbcontext.Outcome.Where(g => g.UserID == UserId).Select(f => f.outSum);
  double sum = (income - expense);
  FirstTable _FirsTable = new FirstTable{ UserID = UserId, Sum = sum};
  return _FirstTable;
} 
```

基本上与 SQL 视图相同，正如@Linus 提到的，我认为将计算值保存在数据库中并不是一个好主意。只是一些想法。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-04-30T02:56:26.793

我在尝试使用带有字符串列“Slug”的 EF Code First 模型时偶然发现了这个问题，该模型是从另一个字符串列“Name”派生的。我采用的方法略有不同，但效果很好，所以我将在这里分享。

```
private string _name;

public string Name
{
    get { return _name; }
    set
    {
        _slug = value.ToUrlSlug(); // the magic happens here
        _name = value; // but don't forget to set your name too!
    }
}

public string Slug { get; private set; } 
```

这种方法的好处是您可以自动生成 slug，而不会暴露 slug setter。.ToUrlSlug() 方法不是这篇文章的重要部分，您可以使用任何东西来完成您需要完成的工作。干杯!

# r - 计算 R 中滞后 u 的自相关

> ID：15585333
> 
> 赞同：1
> 
> 时间：2013-03-23T09:44:56.760
> 
> 标签：r, statistics

嗨，我尝试用滞后 u 计算自相关，u = 1...9

我期望 9x1 自相关函数。但是，当我尝试使用此代码时，它总是给我 10x1 自相关函数，第一项 = 1。我不知道如何继续。

```
# initialize a vector to store autocovariance
maxlag <- 9
varstore <- rep(NA,maxlag)
# Calculate Variance
varstore[1] <- sd(as.vector(sample1),na.rm=T)^2

# Estimate autocovariances for all residuals
for (lag in 1:maxlag)
  varstore[lag+1] <- mean(sample1[,1:(10-lag)] * 
                         sample1[,(lag+1):10],na.rm=T)
print(round(varstore,3))
# calculate autocorrelations
corrstore <- varstore/varstore[1]
print(corrstore) 
```

这就是我得到的：

```
[1] 1.0000000 0.6578243 0.5670389 0.5292314 0.5090411 0.4743944 0.4841038 0.4756297
[9] 0.4275208 0.4048436 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T10:31:36.460

由于回收，你得到一个长度为 10 的向量。

for `lag =maxlog`（`for`循环的最后一步）

```
 varstore[lag+1] 
```

将使用 NA 创建一个新条目。要清楚地看到这一点，请尝试以下示例：

```
v <- NA      ## a vector of length 1
v[10] <- 2
v
[1] NA NA NA NA NA NA NA NA NA  2   ## you get a vector of legnth 10!! 
```

也就是说，你为什么要一个长度为 9 的向量？为什么不使用该`acf`功能？这里是`acf`函数的输出：

```
length(acf(1:10)$lag)
[1] 10 
```

# jquery - 从控制器返回元素 ID 到 Ajax 响应

> ID：15585340
> 
> 赞同：1
> 
> 时间：2013-03-23T09:45:43.393
> 
> 标签：jquery, ruby-on-rails, ajax

我发送了一个 Ajax POST 调用来创建一个新的评论。我希望我的控制器返回新对象的 ID，这样我就可以用它更新网页上的几个元素。然而，我得到的唯一功能返回是完整的网页代码。

这是阿贾克斯：

```
$(document).ready(function(){

    $(".new_rate_restaurant").change(function(e){
        e.preventDefault();
        var path = $(this).closest("form").attr("action");
        $.ajax({
            type: 'POST',
            url: path,
            data: $(this).closest("form").serialize(),
            success: function(response){
                alert(response);

            }
        });     

    });

}); 
```

这是我的控制器：

```
if @review = Review.create(@attr)
            flash[:success] = "Review saved. Share with friends!"
            #render :json => @review
        else
            flash[:error] = @review.errors.full_messages.to_sentence
        end

        respond_to do |format|
            format.html {redirect_to @restaurant}
            format.js 
            format.json 
        end 
```

这是没有用的：

`render :json => @review.id`在创建评论之后或在 respond_to 块中放置 a 。至少不像在 flash[:success] 下的评论中输入的那样

祝你好运！我真的希望我能尽快得到一些回应！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T11:01:51.413

`dataType`在 Javascript中`json`发送请求时指定：

```
$.ajax({
    type: 'POST',
    dataType: 'json',
    // other stuff goes here
}); 
```

并像这样返回新的`review`id：

```
respond_to do |format|
  format.html { redirect_to @restaurant }
  format.js 
  format.json { render :json => @review }
end 
```

# c# - .net 中的异步方法（！）说明？

> ID：15585344
> 
> 赞同：2
> 
> 时间：2013-03-23T09:46:22.770
> 
> 标签：c#, multithreading, asynchronous, .net-4.0

*我最近读了很多关于这个话题的书，但我仍然需要澄清一些事情*

*异步方法*的整个想法是*线程经济*：

> 允许许多任务在几个线程上运行。这是通过使用硬件驱动程序来完成这项工作，同时将线程释放回线程池，以便它可以为其他工作提供服务。

请注意 。

我**不是**在谈论与另一个线程相关联的*异步委托（**与调用者并行执行任务*）。

但是，我已经看到了 2 种主要类型的*异步方法*示例：

*   *仅使用现有*I/O 异步操作的代码示例（来自书籍），`beginXXX / endXX`例如 `Stream.BeginRead`.
    而且我找不到任何*不*使用*现有*.net I/O 操作的*异步方法* 示例，例如 ）**`Stream.BeginRead`**

***   [**像这样**](http://madskristensen.net/post/How-to-use-the-IHttpAsyncHandler-in-ASPNET.aspx)（和[这个](http://webcache.googleusercontent.com/search?q=cache%3atooJMko50V0J%3awww.codeproject.com/Articles/42734/Using-IHttpAsyncHandler-and-XMLHttpRequest-to-push%20&cd=3&hl=en&ct=clnk&gl=il)）的代码示例 。这实际上并没有调用异步操作（尽管作者**认为**他是 - 但他实际上导致线程*阻塞*！）** 

 ****问题 ：**

*异步方法*是否 仅与 .net I/O 现有方法一起使用，例如`BeginXXX , EndXXX`？

我的意思是，如果我想创建自己的 *异步方法* ，例如`BeginMyDelay(int ms,...){..} , EndMyDelay(...)`. 如果没有将阻塞的线程绑定到它，我就无法做到......对吗？

非常感谢你。

*ps 请注意这个问题被标记为 .net 4 而不是 .net4.5*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:52:49.217

你在谈论[APM](http://msdn.microsoft.com/en-us/library/ms228963.aspx)。APM 广泛使用操作系统概念，称为[IO 完成端口](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365198%28v=vs.85%29.aspx)。这就是为什么不同的 IO 操作是使用 APM 的最佳候选者。

您可以编写自己的 APM 方法。但事实上，这些方法要么超越现有的 APM 方法，要么受 IO 限制，并使用一些本机操作系统机制（例如`FilesStream`，使用重叠文件 IO）。

对于计算绑定的异步操作，APM 只会增加复杂性，IMO。

再澄清一点。

使用硬件的工作本质上是异步的。硬件需要时间来执行请求——newtork 卡必须发送或接收数据，HDD 必须读/写等。如果 IO 是同步的，则生成 IO 请求的线程正在等待响应。APM 在这里提供帮助 - 你不应该等待，只需执行其他操作，当 IO 完成时，我会打电话给你，APM 说。

要点 - 操作在 CPU 之外执行。

当您编写任何计算密集型操作时，它将使用 CPU 执行它而无需任何 IO，这里没有什么可等待的。所以，APM 没有帮助——如果你需要 CPU，你需要线程——你需要线程池。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:09:34.237

我认为，但我不确定，您可以创建自己的异步方法。例如创建一个新线程并等待它完成一些工作（数据库查询，...）。

就整体系统性能而言，它可能没有用，因为您说您只是创建了另一个线程。但是例如，如果您在 IIS 上工作，则在等待“后台”操作时，原始请求线程可以用于其他请求。

我认为 IIS 具有固定数量的线程（线程池），因此在这种情况下可能很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T10:53:42.110

> 我的意思是，如果我想创建自己的异步方法，例如 BeginMyDelay(int ms,...){..} ，EndMyDelay(...)。如果没有将阻塞的线程绑定到它，我就无法做到......对吗？

虽然我还没有深入研究异步的实现，但我看不出有什么理由不能做到这一点。

*最简单的方法是使用现有的库来帮助 [例如计时器] 或某种事件系统 IIRC。*

然而，即使你不想使用*任何*库助手，你也会遇到一个问题......“阻塞线程”。

当然，代码确实看起来像这样：

```
while (true){
      foreach (var item in WaitingTasks)
              if (item.Ready())
                 /*fire item, and remove it from tasks*/;

      /*Some blocking action*/
} 
```

事情是-“某些阻止操作”不一定是“阻止”。您可以让线程产生/休眠，或使用它来处理一些数据。例如，Unity 游戏引擎对 Coroutines 做了类似的事情 - 处理所有代码的同一个线程还检查是否需要更新各种协程 [由于时间而延迟]。用 ProcessGameLoop() 替换 /*Some blocking action*/。

有帮助的锄头，请随时提出问题/更正等。**

# javascript - 显示计算机浏览器

> ID：15585346
> 
> 赞同：0
> 
> 时间：2013-03-23T09:46:52.017
> 
> 标签：javascript, html

我正在使用下面显示的 javascript 代码将我的计算机浏览器显示为“Firefox 19.0”。

```
<script language="javascript" type="text/javascript">
function detect()
{
 document.getElementById("bCodeName").innerHTML = navigator.appCodeName;
}
</script>
<div id="bCodeName"></div>
<body onload="detect();"></body> 
```

但是这段代码只是显示：

```
Mozilla 
```

我不知道如何继续。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:49:03.643

改为使用`navigator.appName`。我不确定这是否返回正确的名称（由于某种原因，它在 Chrome 中返回“Netscape”。`navigator`还有[一些其他属性](http://www.w3schools.com/jsref/obj_navigator.asp)，您`appVersion`可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:50:05.153

正如*kennebec*在[JavaScript 中的浏览器检测中回答的那样？](https://stackoverflow.com/questions/2400935/browser-detection-in-javascript)

```
navigator.sayswho= (function(){
  var N= navigator.appName, ua= navigator.userAgent, tem;
  var M= ua.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);
  if(M && (tem= ua.match(/version\/([\.\d]+)/i))!= null) M[2]= tem[1];
  M= M? [M[1], M[2]]: [N, navigator.appVersion,'-?'];
  return M;
 })(); 
```

你也可以使用`navigator.userAgent`

这是一个完整的文档：

[http://www.w3schools.com/jsref/prop_nav_useragent.asp](http://www.w3schools.com/jsref/prop_nav_useragent.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T10:02:35.260

如前所述，您可以浏览“导航器”对象属性，然后正确解析您感兴趣的属性（例如：“appCodeName”、“appVersion”和无处不在的“userAgent”）。

这样做的两种方法可能是：

```
function detect()
{
    document.getElementById("bCodeName").innerHTML = navigator.appCodeName + " " + navigator.appVersion.split(" ")[0];
} 
```

或者更短一点：

```
function detect()
{
    document.getElementById("bCodeName").innerHTML = navigator.userAgent.split(" ")[0].replace("/", " ");
} 
```

您可能会很好地处理异常，以防在解析此数据时出现一些错误。请参阅[Javascript 尝试/捕获](http://www.w3schools.com/js/js_errors.asp)

**编辑：**

如果您想显示特定的应用程序名称和版本，请查看[这个很棒的 SO 答案](https://stackoverflow.com/a/5918791/2186237)。有了这个，最终的代码将是：

```
function detect()
{
    var N= navigator.appName, ua= navigator.userAgent, tem;
    var M= ua.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);
    if(M && (tem= ua.match(/version\/([\.\d]+)/i))!= null) M[2]= tem[1];
    M = M? [M[1], M[2]]: [N, navigator.appVersion, '-?'];
    document.getElementById("bCodeName").innerHTML = M[0] + " " + M[1]
} 
```

# javascript - Cakefile 构建任务因错误而崩溃

> ID：15585353
> 
> 赞同：0
> 
> 时间：2013-03-23T09:48:07.270
> 
> 标签：javascript, node.js, coffeescript, build-automation

我从互联网上复制了一些蛋糕片段，并尝试自动构建我的项目。

构建任务有两个版本。一个使用 exec：

```
{exec} = require 'child_process'
task 'build', 'Build project from src/*.coffee to lib/*.js', ->
  exec 'coffee --compile -m --output lib/client scripts/client/', (err, stdout, stderr) ->
    throw err if err
    console.log stdout + stderr

  exec 'coffee --compile -m --output lib/server scripts/server/', (err, stdout, stderr) ->
    throw err if err
    console.log stdout + stderr 
```

一个使用 spawn：

```
task "build2", "build and watch with spawn",->
    client = spawn "coffee", ["--compile", "--map", "--output", "lib/client", "scripts/client"]
    client.stdout.on "data", (data)->console.log data.toString().trim()

    server = spawn "coffee", ["--compile", "--map", "--output", "lib/server", "scripts/client"]
    server.stdout.on "data", (data)->console.log data.toString().trim() 
```

我手动编译了我的项目，启动了服务器，检查了它是否工作，然后执行了这两个任务。他们都返回而没有错误消息。

然后我在客户端coffeescript中添加了一条明显错误的行，就像“123/gff&&728709§”“”并再次执行了这两个任务：

*   带有 exec 的任务崩溃并显示错误消息“throw err, Command failed”
*   带有 spawn 的任务无声地返回。它不会崩溃，但也不会在我的代码中记录错误

使用 cake 构建咖啡脚本的正确方法是什么？如何修复我的代码？

# c# - 将方法作为参数传递与直接调用方法

> ID：15585358
> 
> 赞同：4
> 
> 时间：2013-03-23T09:48:42.003
> 
> 标签：c#, .net, delegates

我在一些示例中看到了作为参数传递的方法。如果我可以从另一种方法调用一个方法，为什么我应该将方法作为参数传递？这种设计背后的目的是什么？

1.  从另一个方法调用一个方法
2.  使用委托或传递方法作为参数`Action`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:59:01.190

将方法作为参数传递可用于防止依赖和耦合。让我们看一下如何将其用于策略模式：

假设我们有一个方法`PrintReport`，它根据参数打印给定的项目列表，这些项目可能按名称或类型排序。这是天真的方法：

```
public void PrintReport (List<Item> data, SortOrder sortBy)
{
    List<Item> sortedItems;
    switch (sortBy)
    {
        case SortOrder.Name: sortedItems = SortByName(data); break;
        case SortOrder.Type: sortedItems = SortByType(data); break;
    }

    Print(sortedItems);
} 
```

这很简单，但很有效。但是当我们想要添加一个新的排序顺序时会发生什么呢？我们需要更新 SortOrder 枚举，进入`PrintReport`并添加一个新的`case`并调用新的`SortByWhatever`方法。

但是如果我们传入一个方法作为参数，我们`PrintReport`可以更简单，不用关心排序实现：

```
public void PrintReport (List<Item> data, Func<List<Item>, List<Item>> sorter)
{
    List<Item> sortedItems = sorter(data);
    Print(sortedItems);
} 
```

现在无论如何都可以定义排序函数，甚至可能在一个`PrintReport`甚至不知道的不同程序集中。它可以是 lambda 函数或临时定义的匿名方法。但在所有情况下，我们的方法都会接收委托，使用它进行排序，然后打印报告。

这是一个使用示例。起初看起来我们只是将 switch/case 移到函数之外，这很重要，因为它允许不同的调用者有不同的逻辑。但请注意第三种情况。

```
public void HandleData()
{
    switch (ReportItemOrder)
    {
        case SortOrder.Name: PrintReport(data, SortByName); break;
        case SortOrder.Type: PrintReport(data, SortByType); break;
        case SortOrder.Whatever: 
        Func<List<Item>, List<Item>> customSort = (items) => /* do something */;
        PrintReport(data, customSort);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T10:00:38.617

委托通常用于将类和接口彼此分离。

这是一个具体的例子。假设您有一个负责绘制日历的 UI 类，但您不希望它确切知道如何将 DateTime 值格式化为字符串。

您可以像这样定义类：

```
public sealed class MyCalendarDrawer
{
    private readonly Func<DateTime, string> _dateFormatter;

    public MyCalendarDrawer(Func<DateTime, string> dateFormatter)
    {
        _dateFormatter = dateFormatter;
    }

    public void Draw()
    {
        // Do some work that involves displaying dates...

        DateTime date = DateTime.Now;

        string dateString = _dateFormatter(date);

        // Display dateString somehow.
    }
} 
```

这样，`MyCalendarDrawer`不需要知道如何格式化日期 - 通过传递一个`Func<DateTime, string>`可以调用的委托来告诉它如何做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T10:05:46.743

事实是，函数传递给其他函数的每个示例都可以用实现传递给函数的给定接口的对象来表示。

换句话说，委托比接口更好没有明显的原因。Java 中即将推出的 lambda 就是一个示例，您实际上并不需要能够将函数传递给另一个函数来获得简洁的语法。

换句话说，将一个函数传递给另一个函数的能力只是程序员工具包中的一个工具，就像将对象传递给函数一样。虽然这是有争议的，但可以使用一种完全不支持将函数传递给函数的语言 - Java - 并且仍然能够具有相同的表现力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T09:54:37.030

将函数视为一等类型有其优势。它为您提供了函数式编程的可能性。

以“事件处理”的经典案例为例，您肯定会将函数指针发送到另一个函数作为事件发生时的回调。

同样，这是另一个假设的例子

```
private void CallMeBack(out int type, Func<int> action)
{
   type = action();
} 
```

现在我可以为此提供任何功能，例如`CallMeBack(a, ()=>return 1);`和`CallMeBack(a, ()=>return 2);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T09:57:46.137

您应该阅读有关代表的内容。例如，委托对于在给定方法完成上定义动态回调很有用。

伪代码示例：

```
doSomething(); //your code
updateInterface(continueDoingSomething); //a generic method, passing a delegate

...

doAnythingElse();
updateInterface(continueDoingAnythingElse); 
```

在此示例中，您可以定义一个通用方法“updateInterface”，它作为回调调用作为委托传入的动态方法。

如果不使用委托，则必须实现两种（或更多）不同的方法：

```
void updateInterfaceAndContinueDoingSomething(){}
void updateInterfaceAndContinueDoingAnythingElse(){} 
```

# curl - 使用 PackageMaker (OS X) 为 make 项目创建安装程序

> ID：15585363
> 
> 赞同：1
> 
> 时间：2013-03-23T09:49:34.703
> 
> 标签：curl, installation, makefile, osx-mountain-lion, packagemaker

好的，所以背景，我已经为自己下载了一份[http://www.opensource.apple.com/source/curl/curl-68/](http://www.opensource.apple.com/source/curl/curl-68/)并且我已经在我自己的机器上进行了配置、编译和安装，现在我想要做的是以包的形式制作一个简单的可再分发包，这样我就可以将它用作我自己的包的要求，我正在创建作为应用程序的一部分。请注意我这样做的原因是这是一个较新版本的 curl ，然后是在山狮上发现的。

解决这个问题的最佳方法是什么？

我是否只是在分发包中创建一个文件夹结构，将所有创建的文件放置在具有正确权限的正确位置？

或者

我是否需要制作一个脚本，因为最终似乎“make install”目标通过使用“/usr/bin/install”将大多数文件放置在它们需要的位置，而我不熟悉使用 linux 的这个概念？

请注意，我对 PackageMaker 的概念也很陌生，因此您必须清楚您提到的任何功能。另一个小问题我认为没有懒惰的方法来强制 make 目标为我创建文件夹结构，而不必自己重新创建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:55:47.617

您可能需要使用第一种方法，因为目标机器上可能没有 make 实用程序（据我所知，它是 Xcode 命令行实用程序的一部分）

**已编辑**：可能您不应该向客户端提供最新版本的 curl，只需在文档中添加要求即可。并且用户可以根据需要安装它（例如使用 brew）。或者可能静态链接是您的解决方案（但我不知道您如何使用 curl）。

**编辑 2**：对于静态链接，只需启动`curl-config --static-libs`并将输出添加到链接器标志。您可以使用命令查看依赖关系`otool -L <your_binary>`，如果没有 curl - 则静态链接

# assembly - 在 MASM x86 程序集中存储和递增整数变量

> ID：15585369
> 
> 赞同：0
> 
> 时间：2013-03-23T09:50:21.407
> 
> 标签：assembly, x86, dos, masm, x86-16

我试图理解装配。今天的主题是：“存储和递增 int 变量和打印数字”:)

所以这是我的代码

```
dane segment
     count     db     0
dane ends

code segment
start:
     inc     byte ptr ds:[count]
     inc     byte ptr ds:[count]
     inc     byte ptr ds:[count]

     mov     dl,ds:[count]
     mov     ah,2
     int     21h

     mov     ah,4ch
     int        21h
code ends
end start 
```

当我编译并运行时，我得到了这个错误：

![在此处输入图像描述](../Images/7d8b7ddf8551c6c790df2c4e4bde4ccb.png)

它仅在`count`多次增加时发生。我在做什么错？

有人可以解释为什么我不能简单地写：

```
inc     count 
```

另外，为什么我必须`byte ptr`在增加值时输入，但如果我将其复制到`dl`寄存器则不需要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T09:58:35.250

**编辑：**重写并添加文本，添加代码（在 MASM 6.11 中工作）：

在 x86 汇编中，您需要为指令指定内存操作数的大小，否则会出现歧义。你必须告诉汇编器操作数的大小`byte ptr`等等`word ptr`。出于这个原因`inc byte ptr ds:[count]`需要`byte ptr`。`inc word ptr ds:[count`是不同的指令。

`mov dl,ds:[count]`不需要`byte ptr`，因为`dl`是一个 8 位寄存器，因此内存操作数的大小总是相同的，一个字节（8 位）。

要打印字符，您需要先将数字转换为字符串（对于小于 10 的数字或单个字符）。否则，您将打印具有 ASCII 代码 3 的控制字符 ETX（参见[ASCII 表](http://www.asciitable.com/)）。对于小于 10 的数字，以十进制打印很简单，只需添加 '0' ( `30h`)，如下所示：

```
mov dl,ds:[计数]
添加 dl,'0' ; 添加 dl,30h

```

在 x86 汇编中以十进制打印是一个经常被问到的问题，例如看看[这个代码是否正确（数字加数字，然后打印结果）](https://stackoverflow.com/questions/9975848/is-this-code-correct-number-plus-number-then-print-the-result)来了解这个想法。

**编辑：** EXE 文件还需要一个堆栈段。

DOS EXE 文件需要有一个堆栈段。使用 MASM 6.11 进行汇编不会给出任何警告或错误，基本上是`dosexe.asm`（将 dosexe.asm 替换为您的汇编代码文件名）。

但是与 ML ( `ml dosexe.obj`) 链接会给出以下警告：

```
链接：警告 L4021：没有堆栈段

```

因此，需要添加一个堆栈段，将以下行添加到源代码的顶部。

```
.model 小
.stack 4096

```

数据段定义也有一些问题，我也修复了。

整个固定的汇编代码可能是这样的（在 MASM 6.11 中工作）：

```
.model 小
.stack 4096

。数据
        计数分贝 0

。代码
开始：
        mov ax,seg 计数
        mov ds,ax

        inc 字节 ptr ds:[count]
        inc 字节 ptr ds:[count]
        inc 字节 ptr ds:[count]

; 此代码以十进制打印，无需反转
; 字符串，通过除数。100/10 = 10

        移动 bl,100 ; 原始除数。

        mov al,ds:[计数]

打印循环：
        异或啊，啊；清除被除数的前 8 位（在 ax 中）。
        div bl ; 将 ax 除以 bl。al 中的商，ah 中的余数。

        移动dl，al；要打印的值 ah = 2, int 21h

        移动，啊；余数在下一个循环中被除。
        测试 dl,dl ; 检查数字是否为零
        jz not_print ; 不要打印前导零。

        添加 dl,'0' ; 转换为 ASCII 数字字符范围。
                          ; '0' = 0x30 = 48
        推斧
        mov 啊,2
        诠释 21 小时；根据 Ralf Brown's 打印值
        流行斧; 中断列表返回 al。

not_print：
        推斧
        mov al,bl
        异或啊，啊
        移动 bl,10 ; 将除数除以 10。
        div bl
        mov bl,al ; 新的除数。
        流行斧
        测试 bl,bl
        jnz 打印循环

        mov ah,4ch
        整数 21 小时
结束开始

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:34:35.900

[quote]mov dl,ds:[count] 不需要字节 ptr，因为 dl 是一个 8 位寄存器，因此内存操作数的大小始终相同，一个字节（8 位）。[/quote]

另外这个操作不需要段覆盖前缀，因为DS是这个操作的默认段。=> mov dl,[计数]

编辑：

定义一个名为 name 的程序段，具有段属性

[http://msdn.microsoft.com/de-de/library/d06y3478%28v=vs.80%29.aspx](http://msdn.microsoft.com/de-de/library/d06y3478%28v=vs.80%29.aspx)

```
name SEGMENT [[READONLY]] [[align]] [[combine]] [[use]] [[characteristics]] ALIAS(string) [['class']]
  statements
  name ENDS 
```

使用段名称的示例：

```
CODE SEGMENT use16 'CODE'
assume cs:CODE,ds:DATEN,ss:STAPEL
org 100h
START:
mov ax, DATEN
mov ds, ax

; your instructions

CODE ends

DATEN SEGMENT use32 'DATA'
org 0
VALUE  DD ?
DATEN ends

STAPEL SEGMENT use16 STACK 'STACK'
   DB 10h dup (0)
STAPEL ends

end 
```

如何使用段和指令：

[http://cs.smith.edu/~thiebaut/ArtOfAssembly/CH08/CH08-3.html](http://cs.smith.edu/~thiebaut/ArtOfAssembly/CH08/CH08-3.html)

...

要使用 MASM 6 链接 16 位应用程序，我们需要另一个链接器。

[ftp://ftp.microsoft.com/softlib/mslfiles/lnk563.exe](ftp://ftp.microsoft.com/softlib/mslfiles/lnk563.exe)

短剑

# sql-server - SQL Server 2008 R2 - 连接到本地数据库

> ID：15585377
> 
> 赞同：0
> 
> 时间：2013-03-23T09:51:05.630
> 
> 标签：sql-server, sql-server-2008-r2

我正在尝试连接到 SQL Server 2008 R2 上的本地数据库，我尝试了以下操作，但没有任何效果：

```
./
servername/sqlexpress
localdb 
```

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:37:31.257

我在您的问题中注意到的第一件事是，它不是`/`但是`\`。

1.  如果您的实例是快速版本，那么您将连接`name\SQLEXPRESS`
2.  如果您的实例不是快速版本，则只能连接`.`。
3.  检查你的 SQLServer 服务。它在运行吗？
4.  如果这些都不起作用，您可以发布错误消息吗？

# quickblox - QucikBlox：推送通知无法正常工作

> ID：15585378
> 
> 赞同：1
> 
> 时间：2013-03-23T09:51:09.457
> 
> 标签：quickblox

我正在尝试从管理面板发送推送通知。它显示消息发送成功，但我**没有**在设备上收到消息作为推送通知。

我也无法从应用程序发送推送通知。

代码：

```
QBMPushMessage *message = [[QBMPushMessage alloc] initWithPayload:payload];

// Send push
[QBMessages TSendPush:message toUsers:[NSString stringWithFormat:@"%d", self.opponent.ID] delegate:self]; 
```

在委托方法中：

```
else if([result isKindOfClass:[QBMSendPushTaskResult class]])
    {
        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];

        // Success result
        if(result.success)
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Message sent successfully" message:nil delegate:self cancelButtonTitle:@"Ok" otherButtonTitles: nil];
            //[alert show];
            [alert release];

            // Errors
        }
    } 
```

请看下面的图片： ![在此处输入图像描述](../Images/87a7605162173f0e37163de39ce93783.png)

![在此处输入图像描述](../Images/4a5e7dcb34a43b6fc94ae0816ec477a5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:48:23.877

好的 解决了。

我必须根据[如何创建 APNS 证书来创建新的开发认证。](http://quickblox.com/developers/How_to_create_APNS_certificates)

我之前的证书也启用了推送通知，并且可以在 API 1.4 上正常工作。我不知道旧证书有什么问题！

# android - 防止软键盘出现在其他活动中

> ID：15585380
> 
> 赞同：1
> 
> 时间：2013-03-23T09:51:30.057
> 
> 标签：android, android-tabactivity

我的第一个选项卡上有一个 EditText。当然，当我触摸我的 EditText 时会出现软键盘。但是当我访问第二个选项卡时，这意味着第二个选项卡活动，软键盘仍然出现在我的第一个选项卡上并且即使我的第二个选项卡活动上没有 EditText 也不会消失。

当我访问我的第二个选项卡时，我想防止软键盘出现。

我该如何解决这个问题？

这是我的清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.androidaccountbook"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme">
        <activity
            android:name="com.example.androidaccountbook.AccountTabActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait"
            android:windowSoftInputMode="stateHidden">
             <!--  screenOrientation prevent from rotation -->
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
         <activity android:name="com.example.androidaccountbook.accountMainThread"
             android:windowSoftInputMode="stateHidden" />

        <!-- activity for intent -->
        <activity android:name="com.example.androidaccountbook.TodayExpenseList"
            android:windowSoftInputMode="stateHidden" />        
        <activity android:name="com.example.androidaccountbook.settingThread" 
            android:windowSoftInputMode="stateHidden"/>
        <activity android:name="com.example.androidaccountbook.FailedConnectDatabase" 
            android:windowSoftInputMode="stateHidden"/>

    </application>

    <uses-permission android:name="android.permission.INTERNET"/>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:34:33.867

我想出了如何处理它并尝试了它，它有效。

因为我想访问第二个活动，所以肯定会发生生命活动 onPause 方法。因此，我在 onPause 方法上编写了以下 hideKeyboard 方法。

这就是 onPause 方法的样子

```
@Override
protected void onPause(){
    super.onPause();

    hideKeyboard(this,editText);

} 
```

这是我的 hideKeyboard 方法看起来像

```
public void hideKeyboard(Context context, EditText text){
        InputMethodManager imm = (InputMethodManager)context.getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(text.getWindowToken(), InputMethodManager.RESULT_UNCHANGED_SHOWN);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:53:46.170

最好的解决方案是：（在清单文件中）

```
<activity android:name=".MainActivity" 

    android:windowSoftInputMode="stateHidden" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T10:57:54.117

我使用它，它总是有效的：

```
<activity
        android:name="MyProfileActivity"
        android:windowSoftInputMode="stateHidden|adjustPan" /> 
```

# php - 在析构函数中获取调用函数名

> ID：15585386
> 
> 赞同：0
> 
> 时间：2013-03-23T09:52:46.933
> 
> 标签：php, class

是否可以在析构函数中获取被调用的函数名称？

```
class My_class {

    function my_func() {
        echo 'Hii';
    }

    function your_func() {
        echo 'Hii';
    }

    function __destruct() {
        echo $the_called_func_name;
    }
}

$bar = new my_class();
$bar->my_func(); 
```

是否有可能`my_func`在析构函数中获得名称''？

如果我们使用

```
echo __FUNCTION__; 
```

它会给

```
__destruct 
```

我想要

```
my_func 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T10:00:55.450

对的，这是可能的。由于`my_func`是动态的，您可以使用函数重载（又名魔术方法）`__call()`

```
class My_Class
{

   private $methods = array(); 

   public function __call($method, array $args)
   {
      array_push($this->methods, $method);
   }

   public function getMethods()
   {
      return $this->methods;
   }

   public function __destruct()
   {
      // Off course, you should improve this 
      print_r($this->getMethods());
   }
}

// Usage:

$foo = new My_Class();
$foo->my_func(); // Output Array(0 => 'my_func') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:21:16.880

> 它仅用于记录已访问的功能。而不是在每个函数中调用 log 函数。

如果不向方法中添加代码或使用单独的工具进行调试和分析，这是不容易实现的。

请注意，建议的解决方案`__call`不适用于现有的公共方法，最终它会变得比仅添加`log(__METHOD__)`到每个方法更复杂。

您正在寻找的基本上是[面向方面的编程（AOP）](http://en.wikipedia.org/wiki/Aspect-oriented_programming)，它在 PHP 中并没有得到很好的支持。Flow3 框架使用注解和反射来动态添加方面。他们的[日志记录示例](http://docs.typo3.org/flow/TYPO3FlowDocumentation/TheDefinitiveGuide/PartIII/AspectOrientedProgramming.html)完美地说明了您的用例：

```
namespace Example\MyPackage;

/**
 * A logging aspect
 *
 * @Flow\Aspect
 */
class LoggingAspect {

        /**
         * @var \TYPO3\Flow\Log\LoggerInterface A logger implementation
         */
        protected $logger;

        /**
         * For logging we need a logger, which we will get injected automatically by
         * the Object Manager
         *
         * @param \TYPO3\Flow\Log\SystemLoggerInterface $logger The System Logger
         * @return void
         */
        public function injectSystemLogger(\TYPO3\Flow\Log\SystemLoggerInterface ⏎
                $systemLogger) {
                $this->logger = $systemLogger;
        }

        /**
         * Before advice, logs all access to public methods of our package
         *
         * @param  \TYPO3\Flow\AOP\JoinPointInterface $joinPoint: The current join point
         * @return void
         * @Flow\Before("method(public Example\MyPackage\.*->.*())")
         */
        public function logMethodExecution(\TYPO3\Flow\AOP\JoinPointInterface $joinPoint) {
                $logMessage = 'The method ' . $joinPoint->getMethodName() . ' in class ' .
                        $joinPoint->getClassName() . ' has been called.';
                $this->logger->log($logMessage);
        }
} 
```

重要的一行是这样的：

```
@Flow\Before("method(public Example\MyPackage\.*->.*())") 
```

它告诉框架在命名空间`logMethodExecution`的任何类中的任何方法调用之前调用`Example\MyPackage`。

因此，使用**Flow3**您可以做到。但是在没有 AOP 框架的情况下自己实现类似的行为必然会失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T09:54:47.923

是的，

```
class My_class {

    function my_func() {
        echo 'Hii';
    }

    function your_func() {
        echo 'Hii';
    }

    function __destruct() {
        self::my_func();
        // my_func called
    }
}

$bar = new my_class();
$bar->my_func(); 
```

如果您的意思是函数名称，请`__call`用于对象函数和`__callStatic`静态函数。

# ruby-on-rails - 使用 Rails 3 自动加载路径不会加载某些文件夹，而是加载其他文件夹

> ID：15585397
> 
> 赞同：5
> 
> 时间：2013-03-23T09:54:23.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3, class, environment, autoload

我正在使用 application.rb 中的自动加载路径来加载一些额外的模块和结构。

这是以下代码：

```
config.autoload_paths += %W(
  #{config.root}/app/controllers/concerns 
  #{config.root}/app/models/concerns 
  #{config.root}/app/jobs/
) 
```

有趣的是，用于扩展模型和控制器的“关注”文件夹都运行良好。

但是，作业文件夹根本没有加载。

为了加载应用程序中的文件夹，我需要做一些特别的事情吗？或者有谁知道为什么其中两个文件夹正在加载而第三个没有？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T15:56:33.033

尝试在作业后删除尾部斜杠。

```
config.autoload_paths += %W(
  #{config.root}/app/controllers/concerns 
  #{config.root}/app/models/concerns 
  #{config.root}/app/jobs
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T19:10:32.930

无论如何，您都不需要显式加载作业。

[http://hakunin.com/rails3-load-paths](http://hakunin.com/rails3-load-paths)

# java - 将完整数据写入图像文件

> ID：15585398
> 
> 赞同：0
> 
> 时间：2013-03-23T09:54:24.060
> 
> 标签：java, android, stream

```
 int count = 0;
        byte[] buffer = new byte[8192]; // more if you like but no need for
        int j = length_img % 8192;
        int value = length_img - j;
        int incre = 0;// it to be the entire file size

        for (int i = 0; i < (value / 8192) + 1; i++) {

            if (length_img == incre + j) {
                buffer = new byte[j];
                int pair = dataInputStream.read(buffer);
                System.out.print("i am here for last chunk" + buffer.length
                        + "value of j is" + j + "incre value is" + incre
                        + "the value of i is" + i
                        + "and the value of count is" + pair);

                image0OutFile.write(buffer, 0, pair);
                break;
            }

            else {
                count = dataInputStream.read(buffer);
                image0OutFile.write(buffer, 0, count);
                incre += 8192;
            }
        } 
```

这是一些问题所在的部分。我得到这个输出长度_img：3147850 [B@72d86c58我在这里是为了最后一个块2122j的值是2122incre值是3145728我的值是384并且计数的值是496bublo......如果你注意到的值对应该是 2122，而不是 496，这就是文件损坏的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:56:23.237

您应该关闭`FileOutputStream`：

`image0OutFile.close`

这会将最后一部分刷新到文件中。或者您甚至可以致电：

`image0OutFile.flush()`

但是推荐上一个。你应该总是关闭你打开的流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:58:40.280

**始终关闭流**

首先将代码放入`Try catch`块中。关闭块中的流`Finally`。

```
finally{
        image0OutFile.close();
      } 
```

并且不要进行刷新。当关闭时调用自动刷新。

# c# - 如何在 while(dr.read()) 中运行 SqlCommand

> ID：15585401
> 
> 赞同：2
> 
> 时间：2013-03-23T09:54:37.267
> 
> 标签：c#, asp.net, sql-server

我收到一个错误：

> *已经有一个与此命令关联的打开的 DataReader，必须先关闭它。*

我的代码：

```
SqlCommand cmd = new SqlCommand("SELECT * FROM shoppingcart", con);
SqlDataReader dr;
con.Open();

dr = cmd.ExecuteReader();

while (dr.Read())
{
                found = true;
                productdate = Convert.ToDateTime(dr.GetString(4));
                string ago1 = string.Format("{0:MM/dd/yy}", Convert.ToString(productdate));
                string productdate1 = string.Format("{0:MM/dd/yy}", Convert.ToString(ago));
                int productqty = Convert.ToInt32( dr.GetValue(3));
                int productID = Convert.ToInt32(dr.GetValue(2));
                int cartID = Convert.ToInt32(dr.GetValue(0));
                if (productdate < ago)
                {

                    SqlCommand updateproducts = new SqlCommand("UPDATE products SET ProductQuantity=ProductQuantity+@ProductQuantity WHERE ProductID=@ProductID", con);
                    updateproducts.Parameters.AddWithValue("@ProductQuantity", productqty);
                    updateproducts.Parameters.AddWithValue("@ProductID", productID);
                    updateproducts.ExecuteNonQuery();

                    SqlCommand deletecart = new SqlCommand("DELETE FROM shoppingcart WHERE ID=@ID", con);
                    deletecart.Parameters.AddWithValue("@ID", cartID);
                    deletecart.ExecuteNonQuery();
                }
}
con.Close(); 
```

我需要在内部执行更新和删除，`while(dr.read())`但是当我尝试关闭连接然后再次打开时会弹出错误，此时将停止并且会出现错误，表示`ExecuteReader`已关闭。请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T10:02:26.170

如果将其添加到连接字符串中，它将允许该代码工作：

```
MultipleActiveResultSets=True; 
```

从[文档](http://msdn.microsoft.com/en-gb/library/cfa084cz.aspx)：

> 多个活动结果集 (MARS) 是一项允许在单个连接上执行多个批处理的功能。在以前的版本中，一次只能针对单个连接执行一个批处理。使用 MARS 执行多个批次并不意味着同时执行操作。

就像一般说明一样 - 将实现 IDisposable 的任何内容包装在 using 块中是更好的做法。这样，资源将被正确关闭和释放。

所以你的连接可以像这样包装：

```
using (var con = new SqlConnection(connectionString))
{
...
} 
```

`SqlCommand`与您的和`SqlDataReader`对象类似。

# jquery-datatables - 数据表：显示子行的摘要行

> ID：15585402
> 
> 赞同：1
> 
> 时间：2013-03-23T09:54:44.543
> 
> 标签：jquery-datatables

我是数据表的新手...

我正在制作一个行网格，每个行都有子（详细信息）行。我正在使用来自 mysql 数据库的服务器端数据。它以包含所有子行的 JSON 形式返回。我需要创建“主”网格行，总结子行中的列。我不确定 Datatables 是否可以做到这一点或如何做到......

我正在考虑从在 JQuery 函数中获取 JSON 开始。然后使用循环来总结我需要的数据并将其作为数组数据传递给网格。最后我渲染网格。

这是最佳实践还是 Datatables 能够以更智能的方式做到这一点？

-- 子行的概念可以看这里：[http](http://datatables.net/blog/Drill-down_rows) ://datatables.net/blog/Drill-down_rows --

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:11:00.620

我已经完成了这样的事情。我返回了我需要的所有数据，并将“详细信息”信息放入隐藏 div 的最后一列。然后使用行点击将该信息放入详细信息行。

```
//In the example the table the first column has a plus icon that gets replace with a minus icon
// the last column added a hidden div that contained the details.
$("#results").dataTable({
    "fnCreatedRow": function (nRow, aData, iDataIndex) {
        //Attach the on click event to the row
        var oTable = this;
        $("td:eq(0) span", nRow).on("click", function () {
            //First column has a image with the jQuery UI plus icon
            if ($(this).hasClass("ui-icon-circle-plus")) {
                //The details information is stored in the last column in a hidden div with the class wrapper
                //Grab the hidden information and append that to the new row.
                oTable.fnOpen(nRow, $(".wraper", nRow).html(), "details");
            } else {
                oTable.fnClose(nRow);
            }
            $(this).toggleClass("ui-icon-circle-plus ui-icon-circle-minus");
        });
    }
}); 
```

# mercurial - Mercurial HG 'pretxncommit.whitespace 钩子以状态 1 退出'但未指定钩子

> ID：15585404
> 
> 赞同：1
> 
> 时间：2013-03-23T09:54:57.433
> 
> 标签：mercurial, xampp, hook, rollback, hgrc

这个请求的标题已经说明了一切。我的 .hgrc 文件中没有定义任何钩子，但是在运行 hg commit 时我收到了这条回滚消息：

```
transaction abort!
rollback completed
abort: pretxncommit.whitespace hook exited with status 1 
```

我的 hgrc 文件如下所示：

```
[paths]
default = 'the_address'

[ui]
username = 'my name and email address'
verbose = True

[extensions]
mq =

[diff]
git = 1
unified = 8 
```

以防万一它很重要。我在 Ubuntu 12.04 上使用 Mercurial，我试图将它与 /opt/ 目录中的 XAMPP 安装（[Apache 朋友](http://www.apachefriends.org/en/xampp-linux.html)）结合起来，所以我总是必须在提交之前运行 sudo。

浏览 SO 并在网上搜索，我发现此错误是由于代码中尾随空格的钩子造成的（比较[Mercurial 的这一部分：权威指南](http://hgbook.red-bean.com/read/handling-repository-events-with-hooks.html)以及[钩子上的这个 SO 条目](https://stackoverflow.com/questions/4162384/mercurial-pre-commit-hook)）。奇怪的是，我没有在任何地方定义这个钩子，所以我也不知道如何删除它。

任何帮助解决这个问题将不胜感激。多谢你们。

==================================================== ===========================

编辑：结合平滑雷鬼的建议，我将 hgrc 文件放在主文件夹和根文件夹中，并调整了 etc/mercurial 中的 hgrc 文件，只是为了找出解决这个问题的方法。

我不确定 debug = True 应该提供多少信息，但我没有得到特别多的信息。在提交消息的开头，我现在看到以下内容：

```
could not import hgext.hgext.mq (No module named hgext.mq): trying hgext.mq
could not import hgext.hgext.transplant (No module named hgext.transplant): trying hgext.transplant 
```

所以，这意味着，它找不到这两个文件，但是为什么呢？

再次感谢你的帮助。

EDIT2：请注意，第一个 EDIT 是一个不相关的问题，对于这个特定问题可以忽略。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:10:32.387

你可以`debug = True`在`[ui]`你的`.hgrc`文件中添加吗？这将为您提供更多输出，这可能会为您提供有关此钩子位置的一些见解

# c - 使用opencv在相机上线程化face_detection

> ID：15585405
> 
> 赞同：-1
> 
> 时间：2013-03-23T09:54:59.537
> 
> 标签：c, multithreading, opencv

我正在训练在面部、鼻子、眼睛检测上使用线程。因为，当我没有的时候，相机的工作速度非常慢。我写了这段代码。我在代码中找不到错误。但是当我编译时它给出了异常

在 taskCollection 选项卡上 pChore->m_pFunction(pChore); 错误。

```
 #include <iostream>
    #include "cv.h"
    #include "highgui.h"
    #include <pthread.h>
    #include <stdio.h>

    struct parameter_t{
        IplImage* capturedImg;
        CvHaarClassifierCascade* pCascade_face;
        CvMemStorage* storage;
    };

    void* threadface_func(void* parameter){

        CvSeq * detectRect_face;
        parameter_t *p =(parameter_t*)parameter;

        detectRect_face=cvHaarDetectObjects(p->capturedImg,p->pCascade_face,p->storage,1.15, 3, 0,cvSize(50,50));

        for(int i=0;i<(detectRect_face ? detectRect_face->total:0); i++ )
            {
                CvRect* r = (CvRect*)cvGetSeqElem(detectRect_face, i); 
                CvPoint pt1 = { r->x, r->y }; 
                CvPoint pt2 = { r->x + r->width, r->y + r->height }; 
                cvRectangle(p->capturedImg, pt1, pt2, CV_RGB(255,0,0), 1,8, 0); 

            }
        return 0;
    }

    int main ()
    {
            CvCapture* capture = cvCaptureFromCAM(0);
            IplImage* capturedImg;
            int resCount = 1;
            int flags = CV_HAAR_FIND_BIGGEST_OBJECT | CV_HAAR_DO_ROUGH_SEARCH;

            CvHaarClassifierCascade * pCascade_face;
            pthread_t threadface;

            pCascade_face = (CvHaarClassifierCascade *)cvLoad("C:/Users/Furkan/Desktop/Computer Vision/Programlar/opencv/data/haarcascades/haarcascade_frontalface_alt.xml");
            cvNamedWindow("FaceDetection");

            while (true)
            {

                CvMemStorage * storage = 0;
                capturedImg = cvQueryFrame(capture);
                storage = cvCreateMemStorage(0);

                parameter_t my_parameters;
                my_parameters.capturedImg=capturedImg;
                my_parameters.storage=storage;
                my_parameters.pCascade_face=pCascade_face;

                int k=pthread_create(&threadface,0,threadface_func,(void*)&my_parameters);

                if(k!=0)
                {
                    printf("Create thread failed! error");
                    return 1;
                }

                cvShowImage("FaceDetection", capturedImg);

            }

        cvDestroyWindow("FaceDetection");

        cvReleaseCapture(&capture);
        pthread_exit(NULL);
        return 0;
    } 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:21:23.613

1.  您从捕获中获得的 IplImages 指向 videodriver-memory。要在另一个线程中使用它们，您必须克隆（）它们。（我明白了，你甚至试图融入其中）。
2.  您在那里以荒谬的高速率生成新线程，而无需等待一个完成
3.  我在您的代码中看不到任何锁/互斥锁

请重新考虑使用多个线程。至少，它不会像这样工作

（似乎，您的 opencv 版本和您的 api 使用也可能需要升级..）

# c++ - 是否需要让同一个QDomDocument创建的QDomElement来写XML？

> ID：15585406
> 
> 赞同：2
> 
> 时间：2013-03-23T09:55:16.393
> 
> 标签：c++, qt, dom, io, tree

我使用 QDomDocument 来编写 XML 文档。
但是在我的 dom 树中，有些节点是使用 docA 创建的，有些是使用 docB 创建的。

```
QDomElement parentNode = docA.CreateElement("name");//created by docA
QDomElement childNode = docB.CreateElement("value");//created by docB
parentNode.appendChild(childNode);//in onr tree 
```

和：

```
QTextStream out(&file);
docA.save(out, Indent);//docA created the root QDomElement
                       //write the file using docA 
```

那么是否可以像这样将整个树写入 XML 呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T10:07:23.413

你应该避免这种情况，因为如果 docA 超出范围，如果 docB 仍在使用，事情就会开始出错。我相信您的提议在技术上会起作用，直到发生这种情况，但图书馆似乎旨在阻止它。

但是，有一个函数 QDomDocument::importNode() 可能是您想要的。你可以这样做：

```
docAParent.appendChild( docA.importNode( docBNode, true ) ); 
```

布尔参数控制是否进行深层复制。

请参阅文档：http: [//qt-project.org/doc/qt-4.8/qdomdocument.html#importNode](http://qt-project.org/doc/qt-4.8/qdomdocument.html#importNode)

# asp.net - 当 value=0 时如何隐藏 linkBut ton inasp.net？

> ID：15585412
> 
> 赞同：0
> 
> 时间：2013-03-23T09:55:48.763
> 
> 标签：asp.net, asp.net-mvc

当我在 asp.net 中找到 value=0 并希望显示值为 0 的标签时，我想禁用链接按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:01:55.677

您可以在 javascript pageLoad 添加一些 JS 代码，使用 CssClass 循环所有链接按钮（如果不存在，则添加虚拟 css 类）。

```
 function pageLoad() {
            $('.lbClassName').each(function (item) {
                if ($(item).val() == '0') {
                    $(item).prop('disabled', true);
                }
            })
        } 
```

# html - 如何在 3d 画布上覆盖 html？

> ID：15585414
> 
> 赞同：0
> 
> 时间：2013-03-23T09:56:03.440
> 
> 标签：html, forms, input, overlay, three.js

我需要在 3D 场景上放置一个 html 表单（three.js）

```
<FORM NAME="test">
<P>Enter your  Name: <INPUT TYPE="TEXT" NAME="firstName"><BR><BR>
<INPUT TYPE="Button" Value="Name" onClick="functionInput(this.form)">
</P>
</FORM> 
```

它只是出现隐藏，我该怎么办？

# ruby-on-rails - 如何在控制器中禁止除html之外的任何响应

> ID：15585420
> 
> 赞同：1
> 
> 时间：2013-03-23T09:57:04.900
> 
> 标签：ruby-on-rails

我有这样的代码：

```
def show
  @attachment = Attachment.find(params[:id])

  respond_to do |format|
    format.html
  end
end 
```

此代码允许响应 json，但不呈现任何内容。如何在除 html 之外的任何其他请求上显示自定义页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T12:24:18.967

尝试：

```
before_filter do
  render text: 'Wrong type', status: 406 unless request.format == Mime::HTML
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T12:24:39.330

当您在 config/routes.rb 中定义它们时，您可以限制它们的格式

```
scope :format => true, :constraints => {:format => :html} do
  resources :attachments
end 
```

定义要在该范围内限制其格式的所有路由。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T10:18:18.783

您可以`format.any`用于除 html 之外的任何其他请求：

```
def show
  @attachment = Attachment.find(params[:id])

  respond_to do |format|
    format.html { render text: => 'This is html' }
    format.any  { render :text => "Only html is supported" }
  end
end 
```

# android - android libpcap -> 没有这样的文件或目录

> ID：15585429
> 
> 赞同：1
> 
> 时间：2013-03-23T09:57:46.947
> 
> 标签：android, libpcap

我正在尝试使用 libpcap 和 android 来测试它我写了一个简单的 c 程序，看起来像这样

```
 #include <string.h>
 #include <pcap.h>
 #include <jni.h>

 jstring Java_com_example_penguin_AvailableHosts_stringFromJNI(JNIEnv* jobject thiz) {
     char *dev, errbuf[PCAP_ERRBUF_SIZE];

     dev = pcap_lookupdev(errbuf);
     if (dev != NULL)
         return (*env)->NewStringUTF(env, dev);
     else
         return (*env)->NewStringUTF(env, "ERROR");
} 
```

Android.mk 文件看起来像

```
 LOCAL_PATH := $(call my-dir)
 include $(CLEAR_VARS)
 LOCAL_MODULE    := test
 LOCAL_SRC_FILES := test.c
 include $(BUILD_SHARED_LIBRARY) 
```

在我的项目的根目录中，我调用

```
 ndk-build 
```

这给了我以下错误

```
 jni/test.c:2:18: fatal error: pcap.h: No such file or directory
 compilation terminated. 
```

Android.mk 文件中是否缺少任何内容？

# jquery - Jquery Couchdb 插件无效的请求 URL

> ID：15585431
> 
> 赞同：1
> 
> 时间：2013-03-23T09:57:56.863
> 
> 标签：jquery, couchdb

早些时候我问了一个关于 Couchdb 和 jQuery 的问题，后来我发现有一个插件可以使 AJAX 请求更容易，但是当我尝试使用它时，jQuery 尝试连接 Couchdb 的 URL 是错误的（请求 URL：文件：/ //C:/_all_dbs - 比如说 all_dbs 函数）。我是新手，真的无法在任何地方找到解决方案。提前致谢！我的javascript代码如下。

```
$.couch.allDbs({
    success : function(dbs) {
        dbs.forEach(function(db) {
          console.log(db);
        });
     }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-01T17:21:17.177

如果您在**5984**端口上运行 CouchDB 并尝试从网页访问数据，它将无法正常工作。可以在这里找到对此的详细解释：

[http://www.bennadel.com/blog/1498-ask-ben-cross-site-ajax-requests-using-jquery-and-coldfusion.htm](http://www.bennadel.com/blog/1498-ask-ben-cross-site-ajax-requests-using-jquery-and-coldfusion.htm)

我对 CouchDB 也很陌生，如果理解正确，通常 CouchApp 用于编写“网络应用程序”。可以在此处找到 CouchApp 的详细说明：

[https://github.com/couchapp/couchapp/blob/master/doc/gettingstarted.md](https://github.com/couchapp/couchapp/blob/master/doc/gettingstarted.md)

# php - 在多个 XML 文件中搜索匹配项

> ID：15585433
> 
> 赞同：4
> 
> 时间：2013-03-23T09:58:12.430
> 
> 标签：php, javascript, html, xml, xpath

这是我的`general.xml`文件：[general.xml](http://services.gisgraphy.com/geoloc/search?lat=22.298569900000000000&lng=70.794301799999970000&radius=7000)

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<results xmlns="http://gisgraphy.com">
    <numFound>1</numFound>
    <QTime>67</QTime>
    <result>
        <distance>1139.81967842778</distance>
        <name>Rājkot</name>
        <adm1Code>09</adm1Code>
        <adm1Name>State of Gujarāt</adm1Name>
        <asciiName>Rajkot</asciiName>
        <countryCode>IN</countryCode>
        <featureClass>P</featureClass>
        <featureCode>PPL</featureCode>
        <featureId>1258847</featureId>
        <gtopo30>139</gtopo30>
        <population>1177362</population>
        <timezone>Asia/Kolkata</timezone>
        <lat>22.299999237060547</lat>
        <lng>70.78333282470703</lng>
        <placeType>City</placeType>
        <oneWay>false</oneWay>
        <length>0.0</length>
        <google_map_url>http://maps.google.com/maps?f=q&amp;amp;ie=UTF-8&amp;amp;iwloc=addr&amp;amp;om=1&amp;amp;z=12&amp;amp;q=R%C4%81jkot&amp;amp;ll=22.329999237060548,70.78333282470703</google_map_url>
        <yahoo_map_url>http://maps.yahoo.com/broadband?mag=6&amp;amp;mvt=m&amp;amp;lon=70.78333282470703&amp;amp;lat=22.299999237060547</yahoo_map_url>
        <country_flag_url>/images/flags/IN.png</country_flag_url>
    </result>
</results> 
```

这是我的`region.xml`文件：

```
<childrens>
    <child_4893 entity_id="4893" value="Gujarat" parent_id="4823">
        <child_4894 entity_id="4894" value="Ahmedabad" parent_id="4893"/>
        <child_4895 entity_id="4895" value="Anand" parent_id="4893"/>
        <child_4896 entity_id="4896" value="Bharuch (Broach)" parent_id="4893"/>
        <child_4897 entity_id="4897" value="Bhavnagar" parent_id="4893"/>
        <child_4898 entity_id="4898" value="Bhuj" parent_id="4893"/>
        <child_4899 entity_id="4899" value="Gandhidham" parent_id="4893"/>
        <child_4900 entity_id="4900" value="Gandhinagar" parent_id="4893"/>
        <child_4901 entity_id="4901" value="Godhra" parent_id="4893"/>
        <child_4902 entity_id="4902" value="Jamnagar" parent_id="4893"/>
        <child_4903 entity_id="4903" value="Junagadh" parent_id="4893"/>
        <child_4904 entity_id="4904" value="Morvi" parent_id="4893"/>
        <child_4905 entity_id="4905" value="Nadiad" parent_id="4893"/>
        <child_4906 entity_id="4906" value="Navsari" parent_id="4893"/>
        <child_4907 entity_id="4907" value="Patan" parent_id="4893"/>
        <child_4908 entity_id="4908" value="Porbandar" parent_id="4893"/>
        <child_4909 entity_id="4909" value="Rajkot" parent_id="4893"/>
        <child_4910 entity_id="4910" value="Surat" parent_id="4893"/>
        <child_4911 entity_id="4911" value="Surendranagar" parent_id="4893"/>
        <child_4912 entity_id="4912" value="Vadodara (Baroda)" parent_id="4893"/>
        <child_4913 entity_id="4913" value="Vejalpur" parent_id="4893"/>
        <child_4914 entity_id="4914" value="Veraval" parent_id="4893"/>
    </child_4893>
</childrens> 
```

这是我的`product.xml`文件：

```
<products>
    <product_id value="1">
        <tab_id>
            <tab_name value="test1" />
            <dist_region value="4909"/>
            <dist_region value="4909"/>
            <dist_region value="4909"/>
        </tab_id>
    </product_id>
</products> 
```

## 解释

1.  在`general.xml`文件中有一个名为 的节点元素`<name>`，它是一个`store-city`名称。
2.  检查该城市名称是否存在于`region.xml`文件中，复制对应`entity_id`的 .
3.  检查文件中是否`entity_id`存在，如果存在则`product.xml`返回相应的`product_id`。

## 例如：

*   `<name>Rajkot</name>`取自_`general.xml`
*   `Rajkot`存在于`region.xml`且对应`entity_id`的是`4909`
*   `entity_id`值`4909`存在于`product.xml`且对应的`product_id`属性值为`1`
*   返回`product_id`值`1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T16:40:09.847

使用 PHP simplexml 执行此操作：--> 查看实时演示：[http ://codepad.viper-7.com/ax2LtQ](http://codepad.viper-7.com/ax2LtQ)

```
// $g holds general.xml, $r region.xml, $p product.xml 

$general = simplexml_load_string($g);
$region = simplexml_load_string($r);
$product = simplexml_load_string($p);

$name = (string)$general->result->name;
$name = 'Rajkot' // <--- see explanation below!

if (strlen(trim($name))==0) exit('name not found');

list($entity) = $region->xpath("//*[@value='$name']/@entity_id");
$entity=(string)$entity;

if (strlen(trim($entity))==0) exit('entity_id not found');

list($prid) = $product->xpath("//dist_region[@value='$entity']/ancestor::product_id/@value");
$prid=(string)$prid;

echo "name: $name, entity_id: $entity, product_id: $prid"; 
```

**解释**： in `general.xml`, `<name>`= `Rājkot`, in `region.xml`it's `Rajkot`, 没有特殊`a`字符。为了使代码正常工作，我必须设置`$name`为`Rajkot`.
您需要为此找到解决方案。

# batch-file - 我如何从 .bat 文件运行默认浏览器

> ID：15585439
> 
> 赞同：0
> 
> 时间：2013-03-23T09:58:52.673
> 
> 标签：batch-file, cmd, php

我创建了一个 PHP 服务器实例，我想通过运行自动运行浏览器`run.bat`

bat文件内容：

```
"php/php.exe" -S localhost:81 -t dokuwiki 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T10:00:40.877

只写以下...

```
start website_address 
```

# linux - 批量重命名具有不同扩展名Linux脚本的多个文件？

> ID：15585441
> 
> 赞同：7
> 
> 时间：2013-03-23T09:59:13.110
> 
> 标签：linux, shell, scripting, batch-rename

我想编写一个 linux 脚本，它将所有具有相同文件名（但扩展名不同）的文件移动或复制到所有这些文件的新文件名，同时保持它们不同的扩展名。换句话说：

如果我从目录列表开始：

`file1.txt, file1.jpg, file1.doc, file12.txt, file12.jpg, file12.doc`

我想编写一个脚本来更改所有文件名而不更改扩展名。对于同一示例，选择 file2 作为新文件名，结果将是：

`file2.txt, file2.jpg and file2.doc, file12.txt, file12.jpg, file12.doc`

因此文件名与当前条件不匹配的文件将不会被更改。

最好的祝愿，

乔治

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T10:13:23.863

注意：如果`file1.doc`变量中存在`i`，则表达式`${i##*.}`提取扩展名，即`doc`在这种情况下。

* * *

一线解决方案：

```
for i in file1.*; do mv "$i" "file2.${i##*.}"; done 
```

* * *

脚本：

```
#!/bin/sh
# first argument    - basename of files to be moved
# second arguments  - basename of destination files
if [ $# -ne 2 ]; then
    echo "Two arguments required."
    exit;
fi

for i in $1.*; do
    if [ -e "$i" ]; then
        mv "$i" "$2.${i##*.}"
        echo "$i to $2.${i##*.}";
    fi
done 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-29T02:57:39.753

util-linux-ng 软件包（大多数 linux 版本默认安装了它）具有命令“重命名”。请参阅`man rename`使用说明。使用它可以简单地完成您的任务

`rename file1 file2 file1.*`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-14T19:02:20.073

要处理其基本名称包含特殊字符的输入文件，我会将 plesiv 的脚本修改为以下内容：

```
if [ $# -ne 2 ]; then
    echo "Two arguments required."
    exit;
fi

for i in "$1".*; do
    if [ -e "$i" ]; then
        mv "$i" "$2.${i##*.}"
        echo "$i to $2.${i##*.}";
    fi
done 
```

请注意 1 美元左右的额外引号。

# ruby-on-rails - 使用 rspec 和工厂测试模型方法

> ID：15585444
> 
> 赞同：1
> 
> 时间：2013-03-23T09:59:44.907
> 
> 标签：ruby-on-rails, rspec, factory-bot

我在模型中有一个 getter/setter 方法，用于检索数组的最后一个元素，并添加到数组中（Postgresql 字符串数组）：

```
# return the last address from the array
def current_address
  addresses && addresses.last
end

# add the current address to the array of addresses
# if the current address is not blank and is not the same as the last address
def current_address=(value)
  addresses ||= []
  if value && value != addresses.last
    addresses << value
  end
  write_attribute(:addresses, addresses)
end 
```

这些方法似乎工作正常。我正在学习 Rspec / Factory 并尝试对此进行测试。测试失败了，我会很感激一些关于我应该如何做到这一点的建议：

```
it "adds to the list of addresses if the student's address changes" do
  student = build(:student)
  student.current_address = "first address"
  student.current_address = "second address"
  student.addresses.count.should == 2
end

Failure/Error: student.addresses.count.should == 2
     expected: 2
          got: 1 (using ==)

it "provides the student's current address" do
  student = build(:student)
  student.current_address = "first address"
  student.current_address = "second address"
  student.current_address = ""
  student.current_address.should == "second address"
end

Failure/Error: student.current_address.should == "second address"
     expected: "second address"
          got: "" (using ==) 
```

提前致谢

更新：谢谢，我通过测试的修改方法如下：

```
# return the last address from the array
def current_address
  addresses && addresses.last
end

# add the current address to the array of addresses
# if the current address is not blank and is not the same as the last address
def current_address=(value)
  list = self.addresses
  list ||= []
  if !value.empty? && value != list.last
    list << value
  end
  write_attribute(:addresses, list)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:31:07.267

它看起来`addresses`只是在本地范围内，所以每次调用`current_address=`它都会被清除。试试`self.addresses`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:48:19.333

这就是我认为这是错误的。

在您的测试中，您不是在向数组中添加元素而是替换它，因为您正在为其分配一个新值。

```
student.current_address = "first address"
student.current_address = "second address" 
```

我认为您应该做的是像在代码中一样添加一个新元素`addresses << value`

# java - 在 Java 1.6 中使用具有不同枚举类型的 String 开关

> ID：15585446
> 
> 赞同：1
> 
> 时间：2013-03-23T09:59:55.670
> 
> 标签：java, oop, enums, type-conversion

我正在编写代码`if`并`else if`找到某种类型并从中创建相应的值。我想知道如何提高效率，我在论坛中找到了以下帖子，但我没有类似的类型`boolean`，我的类型是`bollean.edm`等`char.edm`。

有没有办法使用以下代码进行调整以支持我的情况？

```
public static void main(String[] args) throws InterruptedException {
    String typeName = "Boolean";
    String memberValue = "memberValue";
    SwitchInputType type = Type.valueOf(typeName).makeType(memberValue);
}

enum Type {
    Boolean {
        SwitchInputType makeType(String memberValue) {
            return new SwitchInputType<Boolean>(new Boolean(memberValue));
        }
    },
    Double {
        SwitchInputType makeType(String memberValue) {
            return new SwitchInputType<Double>(new Double(memberValue));
        }
    }, 
    Int32 {
        SwitchInputType makeType(String memberValue) {
            return new SwitchInputType<Integer>(new Integer(memberValue));
        }
    };

    // All must do this.
    abstract SwitchInputType makeType(String memberValue);
}

static class SwitchInputType<T> {
    public SwitchInputType(Object o) {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:41:22.177

据此，[这](http://msdn.microsoft.com/en-us/library/ff478141.aspx)看起来像一个文件，你的神秘`Odata type`。或多或少的工作解决方案应该如下所示（只需将`String typeName` 值从*标准 java.lang.classes*更改为其他值`Odata type`；））：

```
public class Test {
    public static void main(String[] args) throws InterruptedException {
            String typeName = "Edm.Double";
            String namePreparedForEncoding = typeName.replace('.', '_');
            Type type = Type.valueOf(namePreparedForEncoding);
            System.out.println(type);

            String memberValue = "42.99";
            SwitchInputType<?> value = type.makeType(memberValue);
            System.out.println(value);

            String typeName1 = "Edm.Int32";
            String namePreparedForEncoding1 = typeName1.replace('.', '_');
            Type type1 = Type.valueOf(namePreparedForEncoding1);
            System.out.println(type1);

            String memberValue1 = "42";
            SwitchInputType<?> value1 = type1.makeType(memberValue1);
            System.out.println(value1);
    }

    enum Type {
        Edm_Boolean {
            SwitchInputType makeType(String memberValue) {
                return new SwitchInputType<Boolean>(new Boolean(memberValue));
            }
        },
        Edm_Double {
            SwitchInputType makeType(String memberValue) {
                return new SwitchInputType<Double>(new Double(memberValue));
            }
        },
        Edm_Int32 {
            SwitchInputType makeType(String memberValue) {
                return new SwitchInputType<Integer>(new Integer(memberValue));
            }
        };

        // All must do this.
        abstract SwitchInputType makeType(String memberValue);
    }

    static class SwitchInputType<T> {
        private Object o;

        public SwitchInputType(Object o) {
            this.o = o;
        }

        @Override
        public String toString() {
            return "SwitchInputType: " + o.toString();
        }
    }
} 
```

输出：

```
Edm_Double
SwitchInputType: 42.99

Edm_Int32
SwitchInputType: 42 
```

您可能会注意到，我已经`Edm.`用`Edm_`in enums 替换了 - 因为 enum 不能是中间带点的名称。

PS：

如果您更改一点`toString()`方法，您将确定转换确实有效：

```
 public String toString() {
        return String.format("SwitchInputType: (%s) %s", o.getClass().getSimpleName(), o);
    } 
```

结果是：`SwitchInputType: (Double) 42.99`

希望这可以帮助你

# php - PHP 会话编码

> ID：15585449
> 
> 赞同：2
> 
> 时间：2013-03-23T10:00:30.103
> 
> 标签：php, session

我有个问题。我正在写一个商店的cms。当您将商品添加到购物车时，会在会话中记录商品的数据，例如颜色，尺寸等。然后将此数据输出到购物车中，但数据编码错误。

如何设置会话中包含的数据的编码？

在本地服务器上很好，但在云端我有编码问题。

# java - 像在 Java 3D 中一样制作表面反射/镜面

> ID：15585452
> 
> 赞同：2
> 
> 时间：2013-03-23T10:00:38.290
> 
> 标签：java, java-3d

我一直在尝试使 Java 3D 中的表面以类似于镜子的方式反射。API 说要在 SPHERE_MAP 模式下使用 TexCoordGeneration，但它似乎根本没有任何区别。谁能发现我做错了什么？

```
Appearance reflectAp = new Appearance();
TexCoordGeneration tex = new TexCoordGeneration();
tex.setGenMode(TexCoordGeneration.SPHERE_MAP);

reflectAp.setMaterial(matFact.silver());
reflectAp.setTexCoordGeneration(tex);

flat = new Box(.7f, .9f, .01f, Primitive.GENERATE_NORMALS | Primitive.GENERATE_TEXTURE_COORDS, reflectAp); 
```

# ember.js - Ember.js arraycontroller 从视图调用

> ID：15585457
> 
> 赞同：0
> 
> 时间：2013-03-23T10:00:58.520
> 
> 标签：ember.js

我可能用错了，但是：

我有一个代表产品集合的 ArrayController。每个产品都会被渲染，用户可以采取多种操作，例如编辑产品标题或复制不同产品的描述。

问题是：您如何与您正在使用的特定产品的控制器进行交互？控制器如何知道正在编辑哪个产品？

我还尝试创建一个 Ember.Select 并将 selectionBinding 设置为“controller.somevar”，但这也失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:55:37.153

我认为您需要做的最重要的事情是首先将尽可能多的逻辑从视图中移到控制器中。

对您的情况有用的另一件事是`itemController`在列表中为每个产品都有一个。这样，您可以在此项目控制器中处理项目特定的逻辑。

我没有足够的信息来理解你的架构，所以我会做一些假设。

鉴于您有以下内容`ProductsController`：

```
App.ProductsController = Ember.ArrayController.extend(); 
```

您需要创建一个`ProductController`用于单独包装每个产品的产品。

```
App.ProductController = Ember.ObjectController.extend(); 
```

您需要按如下方式修改模板：

```
{{#each controller itemController="product"}}
  <li>name</li>
{{/each}} 
```

现在列表中的每个产品都有自己的`ProductController`，它可以处理一个产品的事件，并将充当每个列表项的上下文。

另外一个选项：

如果您一次只处理一种产品，您可以使用路线来描述您正在使用的产品：

```
App.Router.map(function() {
  this.resource('products', { path: '/products' }, function() {
    this.resource('product', { path: '/:product_id' }, function() {
      this.route('edit');
    });
  });
}); 
```

并创建一个用于编辑产品的控制器：

```
App.ProductEditController = Ember.ObjectController.extend(); 
```

您的列表项将链接到该产品路线：

```
{{#each controller}}
  <li>{{#linkTo "product.edit" this}}name{{/linkTo}}</li>
{{/each}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T03:44:06.693

如果您在您的模板上定义`itemController`，`ProductsController`则无需在模板中指定该详细信息：

```
App.ProductsController = Em.ArrayController.extend({
  itemController: 'product',
  needs: ['suppliers'],
  actions: {
    add: function() {
      // do something to add an item to content collection
    }
  } 
});

App.ProductController = Em.ObjectController.extend({
  actions: {
    remove: function() {
       // do something to remove the item
    }
  }
}); 
```

使用这样的集合模板：

```
<button {{action="add"}}>Add Item</button>
<ul>
{{#each controller}}
  <li>{{name}} <button {{action="remove"}}>x</button></li>
{{/each}}
</ul> 
```

Ember 文档`itemController` [在此处](http://emberjs.com/api/classes/Ember.ArrayController.html)描述：

您甚至可以定义一个`lookupItemController`可以动态决定项目控制器的函数（例如，可能基于模型类型）。

我在渲染包含`ArrayController`在另一个模板/视图中的集合时发现的事情`#each`是使用方式。确保您使用`{{#each controller}}`Teddy Zeeny 表演，否则您最终会使用内容模型项目，而不是项目控制器包装的项目。在您尝试使用旨在由项目控制器或其他基于控制器的内容装饰处理的操作之前，您可能不会注意到这一点。

当我需要在另一个视图中嵌套整个集合时，我使用视图助手如下正确设置上下文，以便任何集合级别的操作（例如添加项目按钮操作）由数组控制器而不是由主控制器设置处理由路线。

所以在我的产品模板中，我会做这样的事情来列出嵌套的供应商（假设你的“产品”路线有正确的“供应商”控制器）：

```
{{view controller=controllers.suppliers templateName="products/suppliers"}} 
```

供应商模板只是遵循与我上面显示的模板相同的模式。

# c# - 检查 void 异步方法的完成情况

> ID：15585458
> 
> 赞同：0
> 
> 时间：2013-03-23T10:01:00.363
> 
> 标签：c#, windows-store-apps, winrt-xaml, winrt-async

我有一个事件处理程序（来自计时器），每 x 毫秒重绘一次。

尽管使用 async void 方法（显然）不是最佳实践，但对于事件处理程序显然不是这样，因为开发人员不会从其他方法调用它们。

我的问题是我注意到当处理器的工作量很大（后台任务等）时，会重复调用重绘。

我已经能够通过设置一个标志（布尔变量）来指示绘图已完成（并且除非此标志为真，否则不调用我的 draw 方法）来解决这个问题，但我听说 Windows 商店应用程序可能会被拒绝轮询关于异步活动。

```
private void _timer_Tick(object sender, object e)
{
    if (drawingFinished == true)
    {
        drawingFinished = false;

        // drawingFinished set to true at the end of this method
        DrawVideoFrame();    
    }
} 
```

此外，您不能将锁添加到异步方法。

这里的最佳做法是什么？我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:36:27.973

您是否看过2013 年 3 月号 MSDN 杂志上的这篇文章[http://msdn.microsoft.com/en-us/magazine/jj991977.aspx ？](http://msdn.microsoft.com/en-us/magazine/jj991977.aspx)本文的第一部分在一定程度上讨论了异步事件处理程序。它不是您问题的直接解决方案，但它可能会给您一个提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:43:17.883

我的方法现在看起来更像这样：

```
private void _timer_Tick(object sender, object e)
{
    _timer.Stop();

    DrawVideoFrame();    // calls timer.Start() as one the last line
} 
```

我看到了这个解决方案的优点和缺点：

优点：（1）感觉不像是一个杂物（sp？）。(2) 微软拒绝我的应用程序的理由较少，因为我没有检查完成条件。(3) 我的画法现在*绝对*不会被打断。（4）尽管我尽了最大的努力，但它正在按预期工作；）

缺点：我并没有真正安排何时绘制框架。因此，与其将超时设置为 1000 毫秒并认为它会（最多）1 Hz 被调用，不如高端机器会看到更快的帧数（因为唯一固定的时间长度是调用 DrawVideoFrame() 之间的时间）。我想这就是冲浪异步波的本质，可以这么说。

# python - Python调用对象列表中对象的成员函数或变量

> ID：15585460
> 
> 赞同：0
> 
> 时间：2013-03-23T10:01:09.650
> 
> 标签：python, list, function, object, member

我有一个对象列表。我想调用该列表中对象的变量或函数。（在这个问题中有这么多的基本关键字，很难找到解决方案或指南！）

例如：

```
for each in current_staff_list:
   print(current_staff_list[each].variable_name) 
```

这样做的正确语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T10:02:43.907

`each`已经是正确的元素：

```
for each in current_staff_list:
   print(each.variable_name) 
```

Python`for`循环为您提供元素*本身*，而不是序列的索引。

# sql-server - SQL Server 复制问题

> ID：15585463
> 
> 赞同：2
> 
> 时间：2013-03-23T10:01:38.323
> 
> 标签：sql-server, sql-server-2008-r2, replication, database-replication, data-synchronization

我正在尝试使用带有 SQL Server 2008 R2 的 c# 设置数据库快照复制。当我连接到服务器时，一切都按原样进行......但是在以下代码行之后：

```
distributor = new ReplicationServer(conn);
distributor.InstallDistributor((string)null, distributionDb); 
```

出现以下错误：

> *此版本的 SQL Server 不能充当复制的发布者或分发者。将数据库上下文更改为“主”*

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T19:43:19.680

根据[复制注意事项 (SQL Server Express)](http://msdn.microsoft.com/en-us/library/ms165686.aspx)，SQL Server Express 不能充当发​​布者或分发者，只能充当订阅者。您将需要标准版或更高版本的实例来配置分发和设置发布。Express Edition 实例然后可以用作订阅者。

> SQL Server Express 不能用作发布者或分发者。

# css - 当所有元素都绝对定位时使用隐藏溢出

> ID：15585465
> 
> 赞同：0
> 
> 时间：2013-03-23T10:01:48.083
> 
> 标签：css, position, overflow

好吧，事情就说到这里了……

我不能`overflow:hidden`去上班。我需要将它应用于身体，以便`.content`在动画结束之前 div 不可见......

这是 jsFiddle，您应该立即看到问题所在：

[http://jsfiddle.net/bzbNg/](http://jsfiddle.net/bzbNg/)

编辑：好的，有人向我指出我不够具体：

我希望 .content div 与身体一起滑出但不改变它的高度，所以就好像它只是从口袋里拉出来一样，如果你知道我的意思的话......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:06:46.833

我不太明白，你为什么要使用`overflow: hidden`. 既然您希望`.content`在动画结束时显示，为什么不将其隐藏在 css 和回调`.fadeIn()`中？`.animate()`那是你想要达到的吗？示例：http: [//jsfiddle.net/bzbNg/2/](http://jsfiddle.net/bzbNg/2/)

# ndepend - 检查属性内的特定字符串

> ID：15585469
> 
> 赞同：2
> 
> 时间：2013-03-23T10:02:12.343
> 
> 标签：ndepend

我想显示所有具有 Obsolete 标记的方法。这个我可以。但是，我们使用一个字符串来定义该方法在哪个版本中被废弃。

```
[Obsolete("2013.1")] 
```

是否可以使用 CQL 访问该字符串？

# java - JFileChooser 在 Windows 中的 MyComputer 异常

> ID：15585479
> 
> 赞同：3
> 
> 时间：2013-03-23T10:02:45.890
> 
> 标签：java, windows, swing, jfilechooser

我使用 swing 创建了一个文件选择器，以仅从 Windows 平台中选择图像。我曾经`FileFilter`这样做过。`accept()`从类中重写的方法的代码`FileFilter`是：

```
public boolean accept(File f) {

    System.out.println("File is : " + f.getName() + "  " + f);

    if(f.isDirectory())
        return true;

    String ext = getExtension(f);    // returns extensions of the files.

    if(ext.equals("jpg") || ext.equals("jpeg") || ext.equals("gif") || ext.equals("tif") || ext.equals("tiff"))
        return true;
    else {
        return false;
} 
```

`MyComputer`当从 Windows 桌面选择时，它会挂起。以下是我为 MyComputer 获得的条目：

`File is ::{20D04FE0-3AEA-1069-A2D8-08002B30309D} Computer`

以下是我收到的错误消息：

```
File is ::{20D04FE0-3AEA-1069-A2D8-08002B30309D}  Computer
File is lenovo  C:\Users\lenovo
File is ::{F02C1A0D-BE21-4350-88B0-7367FC96EF3C}  Network
File is ::{031E4825-7B94-4DC3-B131-E946B44C8DD5}  Libraries
File is 4s.txt  C:\Users\lenovo\Desktop\4s.txt
File is cs.bat - Shortcut.lnk  C:\Users\lenovo\Desktop\cs.bat - Shortcut.lnk
File is kaushik.txt  C:\Users\lenovo\Desktop\kaushik.txt
File is rel.txt  C:\Users\lenovo\Desktop\rel.txt
File is SQL Developer.lnk  C:\Users\lenovo\Desktop\SQL Developer.lnk
File is Get Started With Oracle Database 11g Express Edition .lnk  C:\Users\Public\Desktop\Get Started With Oracle Database 11g Express Edition .lnk 
```

双击myComputer后显示如下：

```
File is ::{416651E4-9C3C-11D9-8BDE-F66BAD1E3F3A}  ::{20D04FE0-3AEA-1069-A2D8-08002B30309D}\::{416651E4-9C3C-11D9-8BDE-F66BAD1E3F3A}

Exception in thread "Basic L&F File Loading Thread" java.lang.NullPointerException
    at gui.ImageFilter.accept(ImageFilter.java:26)
    at javax.swing.JFileChooser.accept(JFileChooser.java:1576)
    at javax.swing.plaf.basic.BasicDirectoryModel$LoadFilesThread$1.call(BasicDirectoryModel.java:230)
    at javax.swing.plaf.basic.BasicDirectoryModel$LoadFilesThread$1.call(BasicDirectoryModel.java:216)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at sun.awt.shell.Win32ShellFolderManager2$ComInvoker$3.run(Win32ShellFolderManager2.java:458)
    at java.lang.Thread.run(Thread.java:619) 
```

但是，当我在初始化后立即添加另一个`if`条件时：`ext`

```
if (ext == null)
    return false; 
```

它运行良好。我的问题是，如果`MyComputer`是一个目录，为什么它会受到`null`测试的困扰？它不应该`true`在目录测试中返回吗？另一方面，如果它不是一个目录（这使它成为一个文件，对吗？），那么它如何仍然返回`true`并被文件选择器打开？还是他们有其他特殊的角度？

提前谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-23T11:45:26.723

MyComputer 没有问题，因为它出现在列表中有或没有 null 条件。请检查[这里](http://docs.oracle.com/javase/6/docs/api/javax/swing/filechooser/FileFilter.html "文件过滤器文档")`FileFilter`的工作原理。

如文档中所述：

> “`FileFilter`可以在 a 上设置A`JFileChooser`以防止不需要的文件出现在目录列表中”。

所以如果`accept()`方法返回`true`，则表示传入的`File`将出现在列表中，否则为false。

应用程序挂起是因为 MyComputer 可能包含的内容。像下面这样写一个日志：

```
public boolean accept(File f) {
                System.out.println("File is : " + f);
                if(f.isDirectory())
                    return true;..... 
```

在没有 null 条件的情况下重新运行应用程序，以便重现问题，并使用您看到的输出更新您的问题。答案会在那里。

**编辑：** 我模拟了你的行为，我得到以下输出，请用类似的输出更新你的问题，至少最后 10 行：

```
File is : Computer
File is : Network
File is : Libraries
File is : Homegroup
File is : C:\
File is : E:\
File is : F:\
Exception in thread "Basic L&F File Loading Thread" java.lang.NullPointerException: 
    at Main$1.accept(Main.java:17)
    at javax.swing.JFileChooser.accept(JFileChooser.java:1617)
    at javax.swing.plaf.basic.BasicDirectoryModel$LoadFilesThread.run0(BasicDirectoryModel.java:252)
    at javax.swing.plaf.basic.BasicDirectoryModel$LoadFilesThread.run(BasicDirectoryModel.java:228) 
```

我希望这有帮助。

PS：进行过滤的一种更简单的方法是使用`FileNameExtensionFilter`

# performance - 从 2D 到 1D 矢量转换的有效方法

> ID：15585480
> 
> 赞同：0
> 
> 时间：2013-03-23T10:02:57.163
> 
> 标签：performance, matlab, matrix, vectorization

我想从给定的矩阵在matlab中创建一维向量，为此我实现了以下算法，它使用简单的方法

```
% create   one dimensional vector from 2D  matrix
function [x]=one_dimensional(b,m,n) 
 k=1;
 for i=1:m 
     for  t=1:n
         x(k)=b(i,t);
         k=k+1;
     end
 end
  x;
end 
```

当我使用以下示例运行它时，它似乎完成了它的任务

```
b=[2 1 3;4 2 3;1 5 4]

b =

     2     1     3
     4     2     3
     1     5     4

>> one_dimensional(b,3,3)

ans =

     2     1     3     4     2     3     1     5     4 
```

但一般我知道，数组不是在 matlab 中使用的好方法，因为它的性能，那么将矩阵转换为行/列向量的有效方法应该是什么？我只关心性能。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T10:11:06.587

您可以使用`(:)`运算符...但它适用于列而不是行，因此您需要在`'`之前使用运算符进行转置，例如：

```
b=b.';
b(:)'

ans=
   2     1     3     4     2     3     1     5     4 
```

我再次转置以获得行输出（否则它将仅以列形式出现相同的向量）

或者，这是一个选项（可能是一个较慢的选项）：

```
reshape(b.',1,[]) 
```

# python - 'unicode' 对象没有属性 'date'

> ID：15585481
> 
> 赞同：1
> 
> 时间：2013-03-23T10:02:59.583
> 
> 标签：python, django, python-2.7, django-1.5

我有这样的代码：

*模型.py*：

```
from django.db import models
import ioweyou.settings as settings
from comment.models import Comment

class Entry(models.Model):

    OPEN = 0
    ACCEPTED = 1
    REJECTED = 2
    DELETED = 3
    STATUS_CHOICES = (
        (OPEN, 'Open'),
        (ACCEPTED, 'Accepted'),
        (REJECTED, 'Rejected'),
        (DELETED, 'Deleted'),
    )

    name = models.CharField(max_length=255)
    description = models.TextField('entry description', blank=True, null=True)
    value = models.DecimalField(max_digits=6, decimal_places=2)
    lender = models.ForeignKey(settings.AUTH_USER_MODEL, null=True, related_name='lender')
    debtor = models.ForeignKey(settings.AUTH_USER_MODEL, null=True, related_name='debtor')
    status = models.SmallIntegerField(default=0, choices=STATUS_CHOICES)
    accepted_at = models.DateTimeField(blank=True, null=True)
    rejected_at = models.DateTimeField(blank=True, null=True)
    created_at = models.DateTimeField(auto_now_add=True, editable=False)
    updated_at = models.DateTimeField(auto_now=True)

    def __unicode__(self):
        return self.name

class EntryComment(Comment):
    entry = models.ForeignKey(Entry, null=False, related_name="comments") 
```

*管理员.py*

```
class EntryAdmin(admin.ModelAdmin):
    fieldsets = [
        (None,               {'fields': ['name']}),
        ('Date information', {'fields': ['accepted_at']}),
    ]

admin.site.register(models.Entry, EntryAdmin) 
```

和这种错误：

```
AttributeError at /admin/entry/entry/116/
'unicode' object has no attribute 'date'

Error during template rendering
In template /Library/Python/2.7/site-packages/django/contrib/admin/templates/admin/includes/fieldset.html, error at line 19 
```

django 和 python 最近一直在处理。而我的知识并不完整。有人可以帮助我吗？

当您尝试编辑条目并确定字段接受_at 的值时发生错误（已设置）。

# python - 在 select() 之后读取 - 在管道上阻塞

> ID：15585484
> 
> 赞同：0
> 
> 时间：2013-03-23T10:03:22.007
> 
> 标签：python, unix

我的 Python 程序需要从多个不同的文件描述符中多路读取。其中一些是子进程的 stdout/stderr 描述符；`inotify`其他是与调用关联的文件描述符。

我的问题是能够在`select()`. 根据[文档](http://docs.python.org/2/library/select.html)，`select()`报告已准备好写入的套接字“保证不会阻塞最多 PIPE_BUF 字节的写入”。

我认为读取没有这样的保证是有意义的，因为`select()`报告内核管道缓冲区中有数据等待准备好并不意味着您可以继续执行 to `.read(socket.PIPE_BUF)`，因为那里可能只有几个字节。

这意味着当我调用`read()`套接字时，我可以得到实际上是死锁，因为一些子进程很少产生输出。

有没有办法解决？我目前的解决方法是调用`readline()`它，我很幸运，我从中读取的所有内容都有逐行输出。从这样的管道读取时是否`select()`有任何用处，因为无法知道您可以在不阻塞的情况下安全地读取多少字节？

[1] 我知道这与 O_NONBLOCK 套接字不同

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T10:12:00.803

可以继续`read`每个管道和套接字：您将获得现在可用的任何数据：

```
>>> import os
>>> desc = os.pipe()
>>> desc
(3, 4)
>>> os.write(desc[1], 'foo')
3
>>> os.read(desc[0], 100)
'foo'
>>> os.read(desc[0], 100) 
```

[挂在这里，因为没有可用的输入，用 ^C 打断]

```
...
KeyboardInterrupt
>>> os.write(desc[1], 'a')
1
>>> os.read(desc[0], 100)
'a'
>>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T16:53:42.650

作为替代方案，我遇到了完全相同的问题，并通过使用`readline(1)`并将其附加到内部缓冲区来解决它，直到 readline 返回一个我对标记感兴趣的字符（换行符、空格等）。

更多细节：我调用`select()`了一个文件描述符，然后调用`readline(1)`了 select 返回的任何文件描述符，将该字符附加到缓冲区，并重复直到 readline 返回我想要的。然后我返回我的缓冲区，清除它并继续前进。顺便说一句，我还返回了一个布尔值，它让调用方法知道我返回的数据是否因为读取错误而为空，只是因为它没有完成。

我还实现了一个可以在超时时进行标记的版本。如果我一直在缓冲 x 毫秒而没有找到换行符或 EOF，请继续并返回缓冲区。

我目前正在尝试找出是否有办法询问文件描述符它有多少字节等待读取，然后`readline([that many bytes])`...

希望有帮助。

# ios6 - 如何从 ios UDID 迁移到 identifierForVendor？

> ID：15585485
> 
> 赞同：1
> 
> 时间：2013-03-23T10:03:39.730
> 
> 标签：ios6, uniqueidentifier, udid

我们正在尝试想办法将我们的用户从使用 UDID 迁移到 identifierForVendor。

为了迁移，我们考虑在 5 月 1 日之前提交使用 UDID 和 identifierForVendor 的更新，以便我们可以识别用户并将他迁移到新系统。

问题来了：假设两个月后我们需要再次更新我们的应用程序。我们将无法再访问 UDID，因此我们将无法保留迁移用户的代码。

如果用户未能安装我们应用的第一次更新并自行迁移，那么如果他直接下载我们应用的第二次更新，我们将无法迁移他。

这个问题有解决方案吗？

# perl - 我想用另一个名称替换 fasta 文件中的序列名称

> ID：15585488
> 
> 赞同：-1
> 
> 时间：2013-03-23T10:04:01.100
> 
> 标签：perl, bioperl

我有一个fasta文件和一个文本文件fasta文件包含fasta格式的序列，文本文件包含基因名称现在我想用文本文件中的基因名称替换fasta文件中“>”符号后的序列名称我是新来的perl 虽然我已经写了一个脚本，但我不知道为什么它不工作任何人都可以帮助我请以下是我的脚本：

```
print"Enter annotated file...";
$f1=<STDIN>;
print"Enter sequence file...";
$f2=<STDIN>;
open(FILE1,$f1) || die"Can't open $f1";
@annotfile=<FILE1>;
open(FILE2,$f2) || die"Can't open $f2";
@seqfile=<FILE2>;
@d=split('\t',@annotfile[0]);

for($i=0;$i<scalar(@annotfile);$i++)
{
@curr_all=split('\t',@annotfile[$i]);
@curr_id[$i]=@curr_all[0];
@gene_nm[$i]=@curr_all[1];
}
for($j=0;$j<scalar(@seqfile);$j++)
{   
$id=@curr_id[$j];
$gene=@gene_nm[$j];

@seqfile[$j]=~s/$id[$j]/$gene[$j]/g;
print @seqfile[$j];
} 
```

我的文件如下所示：

注释.txt

pool75_contig_389 泛素连接酶 e3a
pool75_contig_704 肿瘤易感性
pool75_contig_1977 丝氨酸苏氨酸蛋白磷酸酶 4 催化亚基
pool75_contig_3064 bardet-biedl 综合征 2 蛋白 P
pool75_contig_2499 琥珀酰连接酶

goat300.fasta

```
goat300.fasta

>pool75_contig_704
CCCTTTCTCCCTTCCCAACATTCAGAGATACTGAATCGAAACTCTTACTGTCTGTTAGAT
GACAAAGAGTTATCCATCCTACATACTCCAATTTCCTTCCGCAACTTGTGATTTCGCCGC
TTGAATCTTGACGCCGTGCGTCCACAGTTTGTTGTGTTTTATCAATCAAGGTCATTATCA
ACCGAAGACGCTATCTATTTTCTTGGCGAAGCTCTCGGAAAGGAGCCATCGAAATGGAAG
TATTTCTCAAGAAAGTCCGCGAGTTATCCCGGAAGCAGTTC
>pool75_contig_389
GACCTATACCGGACCGTCACTGAAAGNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
ACGATCCAGGCATGGAGTTGTGGTGACGAGTAGGAGGGTCACCGTGGTGAGCGGGAAGCC
TCGGGCGTGAGCCTGGGTGGAGCCGCCACGGGTGCAGATCTTGGTGGTAGTAGCAAATAT
TCAAGTGAGAACCTTGAAGGCCGAGGTGGAGAAGGNNNNNNNNNNNNNNNNNNNNNNNNN
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNTCATTTGTAT
CGCCCGGAAAACGTCACAAGAACGGGAGTTGCGTACAGAA
>pool75_contig_1977
AAGGGACACCGTTGGGTGAGGCGAGCTGCGTTCCTCGAACCATGGCTTCAAAAAGCGACT
TAGACCGTCAGATTGAACAGCTCAGGGCCTGCAAGCTCATTACAGAGGATGAGGTTAAGG
CACTCTGCGCTAAGGCGCGTGAGATTTTAATTGAAGAGAGTAATGTCCAGTGCGTGGACT
CACCTGTCACGGTTTGTGGCGATATCCACGGCCAGTTTTACGACTTGATTGAACTGTTTA
AAGTGGGCGGAGATGTTC
>pool75_contig_3064
TTACTATTTCTGGGCCTTAAGACTGGCTTAGTCGCTTACGACCCTTATAACAATGTAGAT
GTATATTATAAGGATCTTCCTGATGGTGCTAACGCTATGTTAATTTATTCAAACTCACCG
ACAAAGGAACAGAATATGCTTTGGCAGGTGGAAACTGTTCGATAATTGGATTGAACGACG
GCGGATGCGAGGTATTTTGGACAGTCACTGGCGACTCCGTTTGCTCTCTTTGCTCGATTA
AATCCGACAGCGATAAGTCAAGAGATTTTGTGGTTGGCTCTGAAGATTTTGACATCCGAA
TCTTCCATGGGGATGCCATAATATATGAAATCACGGAGTCTGATG
>pool75_contig_2499
AAGAGAAGAGGTGAGTTTGAGTATTGTTTGTGTGTGTGTGGTTGGGTGAGTGTGTGGTAT
GTGGTGTATGTGTGTGATGAATGTATGTGAAAGAGAGTGATGAATCTCATGGATATGTTC
GAGTTCGTGGTTTCCATTGATCGGTTATAGCCGAGATGATGGATGTGTTCCATGTGTCTG
ATTTCAGTTTAGGATTGTGTTGATGATGTTGATGATGAAAATTGTTGATGGTGATGACGA
TAGTGATGATGATGACGATGTTTCGGATAATGGTGATGATGATGATGGTTCCGACGATGA
TGTTTCGCTTGATGATGGTGATAATGATGACTCCGAAAATAACGTTGACTCGGATGAG 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:38:40.457

您的代码中有很多警告，您的方法效率低下。让我首先向您展示一个有效的 Perl 程序。后面我会解释。

```
#!/usr/bin/perl
use strict;
use warnings;

# Read the annotations file
print"Enter annotated file...\n";
# my $f1 = <STDIN>;
my $f1 = 'annot.txt';
open(my $fh_annotations, '<', $f1) or die "Can't open $f1";
my @annotfile = <$fh_annotations>;
close $fh_annotations;

# Read the sequence file
print"Enter sequence file...\n";
# my $f2 = <STDIN>;
my $f2 = 'goat300.fasta';
open(my $fh_genes, '<', $f2) or die "Can't open $f2";
my @seqfile = <$fh_genes>;
close $fh_genes;

# Process the annotations data
my %names; # this hash is going to hold the names
foreach my $line (@annotfile) {
  chomp $line;                      # remove newline
  my @fields = split /\t/, $line;   # split into array
  $names{$fields[0]} = $fields[1];  # save in the hash as key->value pair
}

# Process the sequence data
foreach my $line (@seqfile) {
  # Look at each line
  if ($line =~ m/>(.+)$/) {
    # If there is a heading there, remember it...
    if (exists $names{$1}) {
      # ... check if we know a name for it and replace it in the line
      $line =~ s/($1)/$names{$1}/;
    }
  }
  # output the line (this would be done to another filehandle)
  print $line;
} 
```

这会读取这两个文件并将它们保存在内存中，就像你的一样。但是，我没有尝试为名称构建两个数组，而是使用[了一个 hash](http://perldoc.perl.org/perldata.html)，它是一个键/值对。把它想象成一个有名字而不是数字的数组，没有特定的排序。

一旦设置了这些名称，我就可以处理序列文件。我[只需查看每一行](http://perldoc.perl.org/perlre.html)并通过寻找`>`标志来检查那里是否有标题。如果它在那里（`$1`因为括号而进入），我看看我们的哈希中是否有一个哈希条目（with `exists`）`%names`。如果这样做，我们可以用正确的名称替换标题。

之后，我们可以将其写入新文件。我只是打印它。

我使用了其他一些技术。不幸的是，人们在 BioPerl 环境中获得的文献已经过时了。请采纳这个建议，它会让你的生活更轻松。

*   始终使用[`strict`](http://perldoc.perl.org/strict.html)和[`warnings`](http://perldoc.perl.org/warnings.html)。他们会告诉您代码存在的问题。
*   始终使用[`my`](http://perldoc.perl.org/functions/my.html). 这与其他语言不同，您需要在问题的顶部设置一个变量。您可以在需要的地方声明它。vars 只存在于某个范围内，这意味着在最近的封闭`{`和`}`括号之间，或块之间。
*   使用三参数打开和词法文件句柄来保证安全。[在这里](http://modernperlbooks.com/mt/2010/04/three-arg-open-migrating-to-modern-perl.html)阅读更多。
*   Perl 提供[`foreach`](http://perldoc.perl.org/perlsyn.html#Compound-Statements)了 C`for`循环的替代方案。在这种情况下，它使事情变得容易多了。

关于这个程序的另一件事：虽然这个示例数据很短，但我相信您的实际数据可能要大得多。考虑在读取序列文件时对其进行处理，以免内存不足。没有必要保存所有的行，除非你想对它们做其他事情。

```
open my $fh_out, '>', $filename_out or die $!;
open my $fh_in, '<', $filename_in or die $!;
while (my $line = <$fh_in>) {
  # do stuff with the line, like your regex
  print $fh_out $line;
}
close $fh_in;
close $fh_out; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:32:12.317

考虑使用[Bio::SeqIO](http://search.cpan.org/~cjfields/BioPerl-1.6.901/Bio/SeqIO.pm)来解析您的 Fasta 数据集，而不是自己做。Bio::SeqIO 为这项任务而生，并且为此而开发得很好。此外，如果您从事生物信息学，了解 Bio::SeqIO 对您很有帮助。鉴于此，请考虑以下事项：

```
use strict;
use warnings;
use Bio::SeqIO;

open my $fh, '<', 'annot.txt' or die $!;
my %annot = map { /(\S+)\s+(.+)/; $1 => $2 } <$fh>;
close $fh;

my $in = Bio::SeqIO->new( -file => 'goat300.fasta', -format => 'Fasta' );

while ( my $seq = $in->next_seq() ) {
    my $seqID = $annot{ $seq->id } // $seq->id;
    print "$seqID\n" . $seq->seq . "\n";
} 
```

数据集上的输出：

```
tumor susceptibility
CCCTTTCTCCCTTCCCAACATTCAGAGATACTGAATCGAAACTCTTACTGTCTGTTAGATGACAAAGAGTTATCCATCCTACATACTCCAATTTCCTTCCGCAACTTGTGATTTCGCCGCTTGAATCTTGACGCCGTGCGTCCACAGTTTGTTGTGTTTTATCAATCAAGGTCATTATCAACCGAAGACGCTATCTATTTTCTTGGCGAAGCTCTCGGAAAGGAGCCATCGAAATGGAAGTATTTCTCAAGAAAGTCCGCGAGTTATCCCGGAAGCAGTTC
ubiquitin ligase e3a
GACCTATACCGGACCGTCACTGAAAGNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNACGATCCAGGCATGGAGTTGTGGTGACGAGTAGGAGGGTCACCGTGGTGAGCGGGAAGCCTCGGGCGTGAGCCTGGGTGGAGCCGCCACGGGTGCAGATCTTGGTGGTAGTAGCAAATATTCAAGTGAGAACCTTGAAGGCCGAGGTGGAGAAGGNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNTCATTTGTATCGCCCGGAAAACGTCACAAGAACGGGAGTTGCGTACAGAA
serine threonine-protein phosphatase 4 catalytic subunit
AAGGGACACCGTTGGGTGAGGCGAGCTGCGTTCCTCGAACCATGGCTTCAAAAAGCGACTTAGACCGTCAGATTGAACAGCTCAGGGCCTGCAAGCTCATTACAGAGGATGAGGTTAAGGCACTCTGCGCTAAGGCGCGTGAGATTTTAATTGAAGAGAGTAATGTCCAGTGCGTGGACTCACCTGTCACGGTTTGTGGCGATATCCACGGCCAGTTTTACGACTTGATTGAACTGTTTAAAGTGGGCGGAGATGTTC
bardet-biedl syndrome 2 protein P
TTACTATTTCTGGGCCTTAAGACTGGCTTAGTCGCTTACGACCCTTATAACAATGTAGATGTATATTATAAGGATCTTCCTGATGGTGCTAACGCTATGTTAATTTATTCAAACTCACCGACAAAGGAACAGAATATGCTTTGGCAGGTGGAAACTGTTCGATAATTGGATTGAACGACGGCGGATGCGAGGTATTTTGGACAGTCACTGGCGACTCCGTTTGCTCTCTTTGCTCGATTAAATCCGACAGCGATAAGTCAAGAGATTTTGTGGTTGGCTCTGAAGATTTTGACATCCGAATCTTCCATGGGGATGCCATAATATATGAAATCACGGAGTCTGATG
succinyl- ligase
AAGAGAAGAGGTGAGTTTGAGTATTGTTTGTGTGTGTGTGGTTGGGTGAGTGTGTGGTATGTGGTGTATGTGTGTGATGAATGTATGTGAAAGAGAGTGATGAATCTCATGGATATGTTCGAGTTCGTGGTTTCCATTGATCGGTTATAGCCGAGATGATGGATGTGTTCCATGTGTCTGATTTCAGTTTAGGATTGTGTTGATGATGTTGATGATGAAAATTGTTGATGGTGATGACGATAGTGATGATGATGACGATGTTTCGGATAATGGTGATGATGATGATGGTTCCGACGATGATGTTTCGCTTGATGATGGTGATAATGATGACTCCGAAAATAACGTTGACTCGGATGAG 
```

`%annot`通过读取和捕获数据的内容来初始化哈希`annot.txt`。Bio::SeqIO 对象是使用您的`goat300.fasta`文件数据创建的。`while`循环遍历您的 fasta 序列。该变量`$seqID`要么采用`%annot`散列中键的关联值，要么保持当前序列 ID（`//`符号表示已*定义或*，因此确保 $seqID 将被定义）。最后，打印 Fasta 记录。

希望这可以帮助！

# c# - 将大型阵列传输到客户端

> ID：15585491
> 
> 赞同：5
> 
> 时间：2013-03-23T10:04:32.733
> 
> 标签：c#, javascript, arrays, web-services

我需要使用对 Web 服务的 AJAX 请求将大量 16 位整数数组传输到客户端。该数组本质上是带有一些附加元数据的图像的灰度像素数据。

原始图像采用浏览器不支持的专有格式。典型的图像是 2000 像素 x 4000 像素，因此该数组可以包含 8,000,000+ 16 位值。

发出一个 AJAX 请求并在一个响应中返回整个数组是否可以接受，还是应该分成更小的块并单独请求？如果在一个响应中传输整个数组是一种公认​​的做法，我是否必须在请求期间处理不可靠的连接（或者这是否在浏览器中“开箱即用”）？

我们正在编写客户端和 Web 服务，因此我们的方法完全灵活。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:12:28.667

就像其他人提到的，如果您在服务器中启用 gzip 压缩传输，浏览器应该会自动解压缩图像。如果图像是具有大面积相同颜色的扫描文档，这实际上可以压缩图像很多；如果它更像是一张航拍照片，那么就没有那么多了。

现在您在客户端有了图像，您还有另一个问题：如何处理这 800 万个 16 位像素。

在我们输入数组之前，我们必须使用字符串来表示任意数据。这比听起来更安全，因为在 JavaScript 中字符串是 16 位代码单元的序列，*可以*解释为以 UTF-16 编码的文本。JavaScript 对编码无效的字符串完全没有问题。

这意味着您可以将图像存储为一个长字符串，并使用`charCodeAt`. 对于大多数操作目的，这应该相当快。

这是一个将 16 位二进制数据（实际上是 PNG 图标）加载到字符串中并输出前 16 个元素的示例：

```
$.ajax({
    url:"http://fiddle.jshell.net/favicon.png",
    success: function(data) {
        // Now we have the data, let's show it:
        var out = "";
        for (var i = 0; i < 16; i++) {
            out += ","+data.charCodeAt(i).toString(16);
        }
        console.log(out.substring(1));
    },
    beforeSend: function ( xhr ) {
        xhr.overrideMimeType("text/plain; charset=utf-16be");
    },
    error: function(jqXHR, textStatus, errorThrown) {
        console.log("ERROR: "+textStatus+" "+errorThrown);
        console.log(jqXHR);
    },
}) 
```

（在[jsfiddle](http://jsfiddle.net/Z7D9U/2/)上的实时示例）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:18:40.063

您需要传输的数据大小超过 16 MB，但考虑到您正在处理未归档的数据，您应该使用 gzip 获得更小的大小。您还应该考虑一种非常快速的序列化格式（因为您需要在客户端和服务器上进行大量处理来序列化/反序列化数据）。

# python - 在 Python >= 3.2 中将缓存存储到文件 functools.lru_cache

> ID：15585493
> 
> 赞同：36
> 
> 时间：2013-03-23T10:05:05.657
> 
> 标签：python, python-3.x, memoization

我`@functools.lru_cache`在 Python 3.3 中使用。我想将缓存保存到一个文件中，以便在程序重新启动时恢复它。我该怎么办？

**编辑 1**可能的解决方案：[我们需要腌制任何类型的可调用对象](https://stackoverflow.com/questions/6234586/we-need-to-pickle-any-sort-of-callable)

酸洗问题`__closure__`：

```
_pickle.PicklingError: Can't pickle <class 'cell'>: attribute lookup builtins.cell failed 
```

如果我尝试在没有它的情况下恢复该功能，我会得到：

```
TypeError: arg 5 (closure) must be tuple 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-23T13:39:42.523

您无法使用 做您想做的事`lru_cache`，因为它不提供访问缓存的 API，并且在未来的版本中可能会用 C 重写。如果您真的想保存缓存，则必须使用不同的解决方案来访问缓存。

自己写一个缓存很简单。例如：

```
from functools import wraps

def cached(func):
    func.cache = {}
    @wraps(func)
    def wrapper(*args):
        try:
            return func.cache[args]
        except KeyError:
            func.cache[args] = result = func(*args)
            return result   
    return wrapper 
```

然后，您可以将其用作装饰器：

```
>>> @cached
... def fibonacci(n):
...     if n < 2:
...             return n
...     return fibonacci(n-1) + fibonacci(n-2)
... 
>>> fibonacci(100)
354224848179261915075L 
```

并检索`cache`：

```
>>> fibonacci.cache
{(32,): 2178309, (23,): 28657, ... } 
```

然后，您可以随意腌制/取消腌制缓存并加载：

```
fibonacci.cache = pickle.load(cache_file_object) 
```

* * *

我在 python 的问题跟踪器中发现了一个将转储/加载添加到的[功能请求](http://bugs.python.org/issue17528)`lru_cache`，但它没有被接受/实现。也许将来可以通过`lru_cache`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-01-20T10:05:20.593

你可以使用我的图书馆，[mezmorize](https://github.com/reubano/mezmorize/blob/master/examples/hello.py "记忆")

```
import random
from mezmorize import Cache

cache = Cache(CACHE_TYPE='filesystem', CACHE_DIR='cache')

@cache.memoize()
def add(a, b):
    return a + b + random.randrange(0, 1000)

>>> add(2, 5)
727
>>> add(2, 5)
727 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-05T16:53:28.790

考虑使用[joblib.Memory](https://joblib.readthedocs.io/en/latest/memory.html)持久缓存到磁盘。

由于磁盘很大，因此不需要 LRU 缓存方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T10:12:47.337

除了公共 API 之外，您不应该接触装饰器实现中的任何内容，因此如果您想更改其行为，您可能需要复制其实现并自己添加必要的函数。请注意，缓存当前存储为循环双向链表，因此在保存和加载它时需要小心。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-15T13:48:49.667

这是我写的可能对[devcache](https://github.com/pcauthorn/devcache)有帮助的东西。

它旨在帮助您加快长时间运行方法的迭代。可以通过配置文件进行配置

```
@devcache(group='crm')
def my_method(a, b, c):  
    ...        

@devcache(group='db')
def another_method(a, b, c): 
    ... 
```

缓存可以刷新或与 yaml 配置文件一起使用，例如：

```
refresh: false # refresh true will ignore use_cache and refresh all cached data 
props:
    1:
        group: crm
        use_cache: false
    2:
        group: db
        use_cache: true 
```

将刷新缓存`my_method`并使用缓存`another_method`。

它不会帮助您腌制可调用对象，但它会完成缓存部分，并且可以直接修改代码以添加专门的序列化。

# javascript - 使用fabric js调整画布大小

> ID：15585494
> 
> 赞同：18
> 
> 时间：2013-03-23T10:05:07.300
> 
> 标签：javascript, html5-canvas, fabricjs

该应用程序允许用户保存设计并将其发布，以便其他用户稍后可以查看。

以宽度=700 和高度=600 的比例保存的原始画布。但是在显示画布时，我想调整画布的大小以适应 (350,300) 的尺寸。原来的一半。但是，如果我直接应用这些尺寸并加载宽度 setWidth() 和 setHeight() 它会以原始比例加载。

我想要的只是显示具有新尺寸的画布。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-09-23T15:57:27.040

如果您使用的是库 fabric.js，那还不够。

考虑到“画布”是 fabric.js 实例对象，您应该这样做以避免失真工件：

```
canvas.setWidth( <desired width> );
canvas.setHeight( <desired height> );
canvas.calcOffset(); 
```

* * *

## 回答 #2

> 赞同：-15
> 
> 时间：2013-03-23T10:08:53.843

以前[在这里](https://stackoverflow.com/questions/4938346/canvas-width-and-height-in-html5)回答过。

我不确定你一直在尝试什么，但是

```
var canvas = document.getElementsByTagName('canvas')[0];
canvas.width  = 800;
canvas.height = 600; 
```

应该可以正常工作。

# java - 如何从 netbeans 中的 .jar 文件访问 javadoc

> ID：15585496
> 
> 赞同：3
> 
> 时间：2013-03-23T10:05:36.783
> 
> 标签：java, netbeans, datepicker

我最近下载了 microba 日期选择器，它带有三个 JAR 文件：源代码、编译后的 coled 和一个用于 javadoc 的 JAR。

我使用 netbeans 并在我有限的能力范围内尝试了所有方法来访问该文档，但就是无法做到……你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T16:50:42.040

要从 .jar 文件中读取 javadoc，首先必须将其解压缩。为此，请打开控制台，导航到 jar 文件所在的文件夹，然后使用以下命令将其解压缩：

**jar xf yourFileNameHere.jar**

然后您可以访问文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:59:09.723

试试这个方法，右键 plusztester(prototyp) 项目并选择>>**解决项目问题**选择丢失的文件并通过找到正确的文件来解决它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T12:46:46.697

首先，您需要将 zip 文件解压缩到您喜欢的位置，转到您的 netbeans 并在您的项目中搜索**库**，然后右键单击**>>>库**并选择 **>>>添加 JAR/文件夹**，找到您提取的文件，然后点击打开。

# javascript - 解释 jQuery 的 JSONP 和 _ 参数

> ID：15585500
> 
> 赞同：2
> 
> 时间：2013-03-23T10:06:30.190
> 
> 标签：javascript, ajax, jquery, jsonp

我了解 JSONP 及其背后的概念。我也知道 jQuery 会生成一个随机回调函数，例如`jQuery93939393_33443434`. 但我不明白，`_`参数是什么。如果我使用 JSONP 调用

```
$.ajax({
  type: 'GET',
  url: "http://blekko.com/ws/?q=ruby+/json",
  async: false,
  contentType: "application/json",
  dataType: 'jsonp'
}); 
```

然后 jQuery 生成这个 url

```
http://blekko.com/ws/?q=ruby+/json&callback=jQuery18209500292707234621_1364031870836&_=1364032979789 
```

并插入`<script>`标签并生成回调函数`jQuery18209500292707234621_1364031870836`。

但是`_=1364032979789`参数有什么用呢？

# r - 使用带有 gbm 方法的插入符号进行多类分类

> ID：15585501
> 
> 赞同：15
> 
> 时间：2013-03-23T10:06:31.640
> 
> 标签：r, r-caret

我正在解决一个多类分类问题并尝试使用广义增强模型（R 中的 gbm 包）。我面临的问题：插入符号的`train`功能`method="gbm"`似乎无法正确处理多类数据。下面给出一个简单的例子。

```
library(gbm)
library(caret)
data(iris)
fitControl <- trainControl(method="repeatedcv",
                           number=5,
                           repeats=1,
                           verboseIter=TRUE)
set.seed(825)
gbmFit <- train(Species ~ ., data=iris,
                method="gbm",
                trControl=fitControl,
                verbose=FALSE)
gbmFit 
```

输出是

```
+ Fold1.Rep1: interaction.depth=1, shrinkage=0.1, n.trees=150 
predictions failed for Fold1.Rep1: interaction.depth=1, shrinkage=0.1, n.trees=150 
- Fold1.Rep1: interaction.depth=1, shrinkage=0.1, n.trees=150 
+ Fold1.Rep1: interaction.depth=2, shrinkage=0.1, n.trees=150 
...
+ Fold5.Rep1: interaction.depth=3, shrinkage=0.1, n.trees=150 
predictions failed for Fold5.Rep1: interaction.depth=3, shrinkage=0.1, n.trees=150 
- Fold5.Rep1: interaction.depth=3, shrinkage=0.1, n.trees=150 
Aggregating results
Selecting tuning parameters
Fitting interaction.depth = numeric(0), n.trees = numeric(0), shrinkage = numeric(0) on full training set
Error in if (interaction.depth < 1) { : argument is of length zero 
```

然而，如果我尝试在没有插入符号包装器的情况下使用 gbm，我会得到很好的结果。

```
set.seed(1365)
train <- createDataPartition(iris$Species, p=0.7, list=F)
train.iris <- iris[train,]
valid.iris <- iris[-train,]
gbm.fit.iris <- gbm(Species ~ ., data=train.iris, n.trees=200, verbose=FALSE)
gbm.pred <- predict(gbm.fit.iris, valid.iris, n.trees=200, type="response")
gbm.pred <- as.factor(colnames(gbm.pred)[max.col(gbm.pred)]) ##!
confusionMatrix(gbm.pred, valid.iris$Species)$overall 
```

仅供参考，由标记的在线代码`##!`将返回的类概率矩阵转换`predict.gbm`为最可能类的因子。输出是

```
 Accuracy          Kappa  AccuracyLower  AccuracyUpper   AccuracyNull AccuracyPValue  McnemarPValue 
  9.111111e-01   8.666667e-01   7.877883e-01   9.752470e-01   3.333333e-01   8.467252e-16            NaN 
```

任何建议如何使插入符号在多类数据上与 gbm 一起正常工作？

**升级版：**

```
sessionInfo()
R version 2.15.3 (2013-03-01)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8    LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] splines   stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] e1071_1.6-1      class_7.3-5      gbm_2.0-8        survival_2.36-14 caret_5.15-61    reshape2_1.2.2   plyr_1.8        
 [8] lattice_0.20-13  foreach_1.4.0    cluster_1.14.3   compare_0.2-3   

loaded via a namespace (and not attached):
[1] codetools_0.2-8 compiler_2.15.3 grid_2.15.3     iterators_1.0.6 stringr_0.6.2   tools_2.15.3 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T21:08:39.790

这是我现在正在处理的一个问题。

如果您发布 sessionInfo() 的结果会有所帮助。

[此外，从https://code.google.com/p/gradientboostedmodels/](https://code.google.com/p/gradientboostedmodels/)获取最新的 gbm可能会解决问题。

最大限度

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-10T06:15:32.737

更新：**插入符号可以**进行多类分类。

您应该确保类标签是字母数字格式（以字母开头）。

例如：如果您的数据有标签“1”、“2”、“3”，则将它们更改为“Seg1”、“Seg2”和“Seg3”，否则插入符号失败。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-02T08:07:04.153

更新：原始代码确实运行并产生以下输出

```
+ Fold1.Rep1: shrinkage=0.1, interaction.depth=1, n.trees=150 
- Fold1.Rep1: shrinkage=0.1, interaction.depth=1, n.trees=150 
...
...
...
+ Fold5.Rep1: shrinkage=0.1, interaction.depth=3, n.trees=150 
- Fold5.Rep1: shrinkage=0.1, interaction.depth=3, n.trees=150 
Aggregating results
Selecting tuning parameters
Fitting n.trees = 50, interaction.depth = 2, shrinkage = 0.1 on full training set
> gbmFit
Stochastic Gradient Boosting 

150 samples
  4 predictor
  3 classes: 'setosa', 'versicolor', 'virginica' 

No pre-processing
Resampling: Cross-Validated (5 fold, repeated 1 times) 

Summary of sample sizes: 120, 120, 120, 120, 120 

Resampling results across tuning parameters:

  interaction.depth  n.trees  Accuracy   Kappa  Accuracy SD
  1                   50      0.9400000  0.91   0.04346135 
  1                  100      0.9400000  0.91   0.03651484 
  1                  150      0.9333333  0.90   0.03333333 
  2                   50      0.9533333  0.93   0.04472136 
  2                  100      0.9533333  0.93   0.05055250 
  2                  150      0.9466667  0.92   0.04472136 
  3                   50      0.9333333  0.90   0.03333333 
  3                  100      0.9466667  0.92   0.04472136 
  3                  150      0.9400000  0.91   0.03651484 
  Kappa SD  
  0.06519202
  0.05477226
  0.05000000
  0.06708204
  0.07582875
  0.06708204
  0.05000000
  0.06708204
  0.05477226

Tuning parameter 'shrinkage' was held constant at a value of 0.1
Accuracy was used to select the optimal model using  the
 largest value.
The final values used for the model were n.trees =
 50, interaction.depth = 2 and shrinkage = 0.1\. 
> summary(gbmFit)
                      var    rel.inf
Petal.Length Petal.Length 74.1266408
Petal.Width   Petal.Width 22.0668983
Sepal.Width   Sepal.Width  3.2209288
Sepal.Length Sepal.Length  0.5855321 
```

# java - Java 方法声明中的方括号是什么意思？

> ID：15585503
> 
> 赞同：4
> 
> 时间：2013-03-23T10:06:38.083
> 
> 标签：java, context-free-grammar, bnf

Java 中方法声明的语法如下所示：

[Java方法声明BNF：](http://cui.unige.ch/isi/bnf/JAVAF/method_declaration.html)

```
method_declaration 
    ::= 
    { modifier } type identifier 
    "(" [ parameter_list ] ")" { "[" "]" } 
    ( statement_block | ";" ) 
```

我想知道方括号是什么意思。

1.  谁能给我一个例子？
2.  Java 中的方法声明是否像上面那样（泛型呢）？
3.  在哪里可以找到适用于 Java 的完整且实际的 BNF 语法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T10:11:28.670

方括号表示该方法返回一个数组。例如，您可以编写一个返回 int 数组的方法：

```
int method()[] { … } 
```

不过，很多人不熟悉这种语法，最好避免使用。

您可以在此处找到 java 7 的完整语法：http: [//docs.oracle.com/javase/specs/jls/se7/html/jls-18.html](http://docs.oracle.com/javase/specs/jls/se7/html/jls-18.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T10:18:28.670

这是一个遗留结构。从 JLS（[§8.4\. 方法声明](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4)）：

> 为了与旧版本的 Java SE 平台兼容，允许返回数组的方法声明将（部分或全部）空括号对放置在形参列表之后，这些空括号对构成数组类型的声明。以下过时的产品支持这一点，但不应在新代码中使用。
> 
> ```
> MethodDeclarator:
>      MethodDeclarator [ ] 
> ```

因此，它是有效的 Java（尽管我从未见过在实际代码中使用过这种结构）。

至于你引用的语法，它似乎不完整。例如，它似乎不包含可选`throws`子句。此外，它只允许一对方括号，`method_declaration`而官方语法允许任意数量的这样的对。

权威参考是 Java 语言规范，[第 18 章语法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-18.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T10:15:16.260

`{ ... }`代表`0..*`（零次或多次）

由于您链接的文档已有 17 年历史，因此缺少泛型。

官方[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)使用这种特殊语法：[http ://docs.oracle.com/javase/specs/jls/se7/html/jls-2.html#jls-2.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-2.html#jls-2.4)

我找不到真正的 Java BNF 语法，它比你的更过时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T10:13:00.950

括号用于作为数组的返回类型，例如：

```
Sting myMethodThatRetrunsStringArray[] {
//Implementation
// return a String array
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T10:13:46.777

*我们说 } 记号在 { 记号的右侧，尽管它在这个二维表示中出现在 { 记号的下方和左侧。这种关于使用单词 left 和 right 的约定允许我们谈论例如二元运算符的右侧操作数或赋值的左侧。*

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-2.html](http://docs.oracle.com/javase/specs/jls/se7/html/jls-2.html)

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html)

# c# - 让用户在部署后编辑配置文件

> ID：15585504
> 
> 赞同：8
> 
> 时间：2013-03-23T10:06:43.770
> 
> 标签：c#, deployment, app-config

我有一个程序，我将使用 VS 内置的部署包进行部署。

现在我有一个 app.config 文件，我希望用户能够修改它（即使在运行程序之后），但我不知道安装程序究竟在哪里转储文件，而且我不希望用户能够根植他们的文件系统。

我在想的是 - 我要求用户指定一些目录（因为它是一个游戏，无论如何都需要发生） - 我在那里检查配置文件，如果它不在那里，我从程序可以的根目录复制它看 - 然后阅读“保存”文件夹中的那个。

也就是说，它听起来像一个非常丑陋和hacky的解决方案 - 有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T10:26:23.577

我不会鼓励用户修改 app.config。app.config 被复制到与您的应用程序 exe 相同的目录中，并且通常包含您的应用程序正确运行所依赖的设置，例如数据库连接字符串、系统默认值等。您通过让用户直接更改其中的设置来玩危险的游戏。

更安全的方法是将另一个 XML 文件导出到用户文档文件夹中，他们可以在其中覆盖应用程序设置。首先将您的应用加载到 app.config 中，然后使用用户自己的配置文件中的任何设置覆盖这些值。

我还建议为此实现某种 UI，即使它真的很基础。您的普通用户不会习惯于直接编辑 XML，错误的余地太大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T10:34:32.603

您可以使用应用程序（或用户）设置来保留用户可能想要在配置中进行的任何更改。请参阅[`ApplicationSettingsBase`](http://msdn.microsoft.com/en-us/library/system.configuration.applicationsettingsbase.aspx)课程和[这篇文章](http://msdn.microsoft.com/en-AU/library/8eyb2ct1%28v=vs.100%29.aspx)。假设您的应用程序包含一个名为 的用户设置`Score`，由一个名为 的类在内部管理`MyUserSettings`：

```
public class MyUserSettings : ApplicationSettingsBase
{
    [UserScopedSetting()]
    [DefaultSettingValue(0)]
    public int Rank
    {
        get
        {
            return (int)this["Score"];
        }
        set
        {
            this["Score"] = value;
        }
    }
} 
```

您可以使用以下方法保存当前值，通常是在主窗体关闭时`Save`：

```
myUserSettings.Save(); 
```

如果您希望用户直接修改某些设置，您可以使用属性网格或您自己的绑定`MyUserSettings`类实例的表单。如果设置被标记为“用户”，则这些值将存储在`user.config`文件中`%InstallRoot%\Documents and Settings\username\Local Settings`或`%InstallRoot%\Documents and Settings\username\Application Data`（用于漫游配置文件）中。

# xml - 强制空 CDATA 元素

> ID：15585507
> 
> 赞同：2
> 
> 时间：2013-03-23T10:07:03.490
> 
> 标签：xml, xslt, xslt-1.0, cdata

有人问我是否可以使用 xsl (1.0) 转换 xml，但即使其中没​​有内容也要保留 CDATA 元素。作为xsl初学者，我对这个问题有点不知所措......

这是一个简单的示例。

**我有的**

```
<AMOUNT/> 
```

**我想要的是**

```
<AMOUNT><![CDATA[]]></AMOUNT> 
```

*   有没有办法强制没有内容的空 cdata 段？
*   有没有办法对文件中的所有元素执行此操作？
*   有没有办法只为**cdata-section-elements**中的那些？

（看看 AMOUNT 元素）

**这是我的示例 xml**

```
<?xml version="1.0" encoding="iso-8859-1" ?>
    <Artikel>
        <Temp>
            <Zeile>107</Zeile>
            <Artikelzubehoerdaten>
                <Artikelzubehoerdaten>
                    <ZubehoerID>18</ZubehoerID>
                    <Mandant>88</Mandant>
                    <UrsprungsArt>1</UrsprungsArt>
                    <Ursprungsnummer>99100091</Ursprungsnummer>
                    <UrsprungsAuspraegungID>0</UrsprungsAuspraegungID>
                    <ZubehoerArt>1</ZubehoerArt>
                    <Zubehoernummer>00500041</Zubehoernummer>
                    <ZubehoerAuspraegungID>0</ZubehoerAuspraegungID>
                    <Automatisch>0</Automatisch>
                    <Mengenberechnung>1</Mengenberechnung>
                    <MengenFaktor>1.0000</MengenFaktor>
                    <Basismengeneinheit>Stk</Basismengeneinheit>
                    <Preisgrundlagen>2</Preisgrundlagen>
                    <ManuellerPreis>0.0000</ManuellerPreis>
                    <PreislisteID>0</PreislisteID>
                    <Timestamp>AAAAAAAEbVw=</Timestamp>
                    <Gruppendaten/>
                </Artikelzubehoerdaten>
                <Artikelzubehoerdaten>
                    <ZubehoerID>19</ZubehoerID>
                    <Mandant>88</Mandant>
                    <UrsprungsArt>1</UrsprungsArt>
                    <Ursprungsnummer>99100091</Ursprungsnummer>
                    <UrsprungsAuspraegungID>0</UrsprungsAuspraegungID>
                    <ZubehoerArt>2</ZubehoerArt>
                    <Zubehoernummer>100</Zubehoernummer>
                    <Automatisch>0</Automatisch>
                    <Mengenberechnung>0</Mengenberechnung>
                    <MengenFaktor>0.0000</MengenFaktor>
                    <Preisgrundlagen>0</Preisgrundlagen>
                    <ManuellerPreis>0.0000</ManuellerPreis>
                    <PreislisteID>0</PreislisteID>
                    <Timestamp>AAAAAAAEbWA=</Timestamp>
                    <Gruppendaten>
                        <ZubehoerID>1</ZubehoerID>
                        <Mandant>88</Mandant>
                        <UrsprungsArt>2</UrsprungsArt>
                        <Ursprungsnummer>100</Ursprungsnummer>
                        <ZubehoerArt>1</ZubehoerArt>
                        <Zubehoernummer>10300003</Zubehoernummer>
                        <ZubehoerAuspraegungID>0</ZubehoerAuspraegungID>
                        <Automatisch>0</Automatisch>
                        <Mengenberechnung>2</Mengenberechnung>
                        <MengenFaktor>1.0000</MengenFaktor>
                        <Basismengeneinheit>Stk</Basismengeneinheit>
                        <Preisgrundlagen>2</Preisgrundlagen>
                        <ManuellerPreis>0.0000</ManuellerPreis>
                        <PreislisteID>0</PreislisteID>
                        <Timestamp>AAAAAAABuBI=</Timestamp>
                    </Gruppendaten>
                    <Gruppendaten>
                        <ZubehoerID>2</ZubehoerID>
                        <Mandant>88</Mandant>
                        <UrsprungsArt>2</UrsprungsArt>
                        <Ursprungsnummer>100</Ursprungsnummer>
                        <ZubehoerArt>1</ZubehoerArt>
                        <Zubehoernummer>10300001</Zubehoernummer>
                        <ZubehoerAuspraegungID>0</ZubehoerAuspraegungID>
                        <Automatisch>0</Automatisch>
                        <Mengenberechnung>2</Mengenberechnung>
                        <MengenFaktor>1.0000</MengenFaktor>
                        <Basismengeneinheit>Stk</Basismengeneinheit>
                        <Preisgrundlagen>2</Preisgrundlagen>
                        <ManuellerPreis>0.0000</ManuellerPreis>
                        <PreislisteID>0</PreislisteID>
                        <Timestamp>AAAAAAABuBM=</Timestamp>
                    </Gruppendaten>
                    <Gruppendaten>
                        <ZubehoerID>3</ZubehoerID>
                        <Mandant>88</Mandant>
                        <UrsprungsArt>2</UrsprungsArt>
                        <Ursprungsnummer>100</Ursprungsnummer>
                        <ZubehoerArt>1</ZubehoerArt>
                        <Zubehoernummer>10300002</Zubehoernummer>
                        <ZubehoerAuspraegungID>0</ZubehoerAuspraegungID>
                        <Automatisch>0</Automatisch>
                        <Mengenberechnung>2</Mengenberechnung>
                        <MengenFaktor>1.0000</MengenFaktor>
                        <Basismengeneinheit>Stk</Basismengeneinheit>
                        <Preisgrundlagen>2</Preisgrundlagen>
                        <ManuellerPreis>0.0000</ManuellerPreis>
                        <PreislisteID>0</PreislisteID>
                        <Timestamp>AAAAAAABuBQ=</Timestamp>
                    </Gruppendaten>
                </Artikelzubehoerdaten>
                <Artikelzubehoerdaten>
                    <ZubehoerID>21</ZubehoerID>
                    <Mandant>88</Mandant>
                    <UrsprungsArt>1</UrsprungsArt>
                    <Ursprungsnummer>99100091</Ursprungsnummer>
                    <UrsprungsAuspraegungID>0</UrsprungsAuspraegungID>
                    <ZubehoerArt>2</ZubehoerArt>
                    <Zubehoernummer>200</Zubehoernummer>
                    <Automatisch>0</Automatisch>
                    <Mengenberechnung>0</Mengenberechnung>
                    <MengenFaktor>0.0000</MengenFaktor>
                    <Preisgrundlagen>0</Preisgrundlagen>
                    <ManuellerPreis>0.0000</ManuellerPreis>
                    <PreislisteID>0</PreislisteID>
                    <Timestamp>AAAAAAAEk3U=</Timestamp>
                    <Gruppendaten>
                        <ZubehoerID>20</ZubehoerID>
                        <Mandant>88</Mandant>
                        <UrsprungsArt>2</UrsprungsArt>
                        <Ursprungsnummer>200</Ursprungsnummer>
                        <ZubehoerArt>1</ZubehoerArt>
                        <Zubehoernummer>00200050</Zubehoernummer>
                        <ZubehoerAuspraegungID>0</ZubehoerAuspraegungID>
                        <Automatisch>0</Automatisch>
                        <Mengenberechnung>1</Mengenberechnung>
                        <MengenFaktor>1.0000</MengenFaktor>
                        <Basismengeneinheit>Stk</Basismengeneinheit>
                        <Preisgrundlagen>2</Preisgrundlagen>
                        <ManuellerPreis>0.0000</ManuellerPreis>
                        <PreislisteID>0</PreislisteID>
                        <Timestamp>AAAAAAAEk3I=</Timestamp>
                    </Gruppendaten>
                </Artikelzubehoerdaten>
            </Artikelzubehoerdaten>
        </Temp>
    </Artikel> 
```

**这是我的示例 xsl**

```
<?xml version="1.0" encoding="iso-8859-1" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="iso-8859-1" indent="yes" cdata-section-elements ="ARTICLE AUTO AMOUNT GROUP_NUMBER"/>
    <xsl:template match="/">
        <ARTICLE_LIST>
            <xsl:for-each select="Artikel/Temp">    
                <ARTICLE>
                    <CROSS_SELLINGS>
                        <xsl:for-each select="Artikelzubehoerdaten/Artikelzubehoerdaten[ZubehoerArt=1]">
                            <CROSS_SELLING>
                                <ARTICLE><xsl:value-of select="Zubehoernummer"/></ARTICLE>
                                <AUTO><xsl:value-of select="Automatisch"/></AUTO>
                                <GROUP_NUMBER></GROUP_NUMBER>
                                <AMOUNT><xsl:value-of select="MengenFaktor"/></AMOUNT>
                            </CROSS_SELLING>
                        </xsl:for-each>
                        <xsl:for-each select="Artikelzubehoerdaten/Artikelzubehoerdaten[ZubehoerArt=2]">
                            <xsl:for-each select="Gruppendaten">
                                <CROSS_SELLING>
                                    <ARTICLE><xsl:value-of select="Zubehoernummer"/></ARTICLE>
                                    <AUTO><xsl:value-of select="Automatisch"/></AUTO>
                                    <GROUP_NUMBER><xsl:value-of select="Ursprungsnummer"/></GROUP_NUMBER>
                                    <AMOUNT></AMOUNT>
                                </CROSS_SELLING>
                            </xsl:for-each>
                        </xsl:for-each>
                    </CROSS_SELLINGS>
                </ARTICLE>
            </xsl:for-each>
        </ARTICLE_LIST>
    </xsl:template>

</xsl:stylesheet> 
```

**这是实际的输出**

```
<?xml version="1.0" encoding="iso-8859-1"?>
<ARTICLE_LIST>
   <ARTICLE>
      <CROSS_SELLINGS>
         <CROSS_SELLING>
            <ARTICLE><![CDATA[00500041]]></ARTICLE>
            <AUTO><![CDATA[0]]></AUTO>
            <GROUP_NUMBER/>
            <AMOUNT><![CDATA[1.0000]]></AMOUNT>
         </CROSS_SELLING>
         <CROSS_SELLING>
            <ARTICLE><![CDATA[10300003]]></ARTICLE>
            <AUTO><![CDATA[0]]></AUTO>
            <GROUP_NUMBER><![CDATA[100]]></GROUP_NUMBER>
            <AMOUNT/>
         </CROSS_SELLING>
         <CROSS_SELLING>
            <ARTICLE><![CDATA[10300001]]></ARTICLE>
            <AUTO><![CDATA[0]]></AUTO>
            <GROUP_NUMBER><![CDATA[100]]></GROUP_NUMBER>
            <AMOUNT/>
         </CROSS_SELLING>
         <CROSS_SELLING>
            <ARTICLE><![CDATA[10300002]]></ARTICLE>
            <AUTO><![CDATA[0]]></AUTO>
            <GROUP_NUMBER><![CDATA[100]]></GROUP_NUMBER>
            <AMOUNT/>
         </CROSS_SELLING>
         <CROSS_SELLING>
            <ARTICLE><![CDATA[00200050]]></ARTICLE>
            <AUTO><![CDATA[0]]></AUTO>
            <GROUP_NUMBER><![CDATA[200]]></GROUP_NUMBER>
            <AMOUNT/>
         </CROSS_SELLING>
      </CROSS_SELLINGS>
   </ARTICLE>
</ARTICLE_LIST> 
```

（这些只是真实文件的截图）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T11:47:15.577

要强制一个空的 CDATA 部分，您可以这样做：

```
<xsl:template name="empty-cdata">
  <xsl:text disable-output-escaping="yes"><![CDATA[]]></xsl:text>
</xsl:template> 
```

如果您不知道该值是否为空，则可以使用条件：

```
<xsl:choose>
  <xsl:when test="string-length(.)">
    <xsl:value-of select="."/>
  </xsl:when>
  <xsl:otherwise>
    <xsl:call-template name="empty-cdata"/>
  </xsl:otherwise>
</xsl:choose> 
```

然后您可以将其包装在模板中：

```
<xsl:template name="cdata-value-of">
  <xsl:param name="value"/>
  <xsl:choose>
    <xsl:when test="string-length($value)">
      <!-- let cdata-section-elements take care of wrapping
           in a CDATA section if needed. Otherwise you will
           need to do string-replacement of ']]>' yourself. -->
      <xsl:value-of select="$value"/>
    </xsl:when>
    <xsl:otherwise>
      <xsl:call-template name="empty-cdata"/>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

然后你像这样使用它：

```
<AMOUNT>
  <xsl:call-template name="cdata-value-of">
    <xsl:with-param name="value" select="MengenFaktor"/>
  </xsl:call-template>
</AMOUNT> 
```

但同样，**应该不需要空的 CDATA 部分**——老实说，文档中的任何地方都不需要任何 CDATA 部分！即使文档的 XML 信息集完全相同，您也会看到它如何极大地复杂化文档生产和使用并增加文档大小（在您的情况下）。

另外，请记住您不能在属性值中使用 CDATA 部分，因此请确保您从不使用`cdata-value-of`或`empty-cdata`生成属性值，否则您的 XML 可能格式不正确！

# php - 检查选择查询是否返回值的脚本？

> ID：15585508
> 
> 赞同：0
> 
> 时间：2013-03-23T10:07:11.137
> 
> 标签：php, html

我想检查选择查询是否返回一些值。

```
if(!empty($_POST['sign']))
{
    $e=$_POST['email'];
    $p-$_POST['password'];
    $selquery="select * from login where email_id='$e' and password='$p'";
    $r=mysql_query($selquery);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:25:33.053

要打印 sql 查询结果，请执行以下操作：

```
 $r = mysql_query ($selquery);
 echo '$a = $r'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:08:38.187

您可以使用 mysql_num_rows() 函数来检索计数并查看它是否大于 0。

```
if (mysql_num_rows($r) > 0) {
    // do something
} 
```

但是，您真的不应该再使用 mysql_* 函数，因为它们很快就会被弃用。相反，您应该使用 PDO 或 mysqli！

您可以在此处阅读有关为什么不使用这些函数的更多信息：[为什么我不应该在 PHP 中使用 mysql_* 函数？](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)

PDO 与 mysqli 的比较在这里： http: [//net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/](http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/)

# android - SurfaceView 中的 ontouch

> ID：15585510
> 
> 赞同：0
> 
> 时间：2013-03-23T10:07:24.807
> 
> 标签：android, touch, surfaceview

我正在将 SurfaceView 实现为我的 xml 文件中的 customView。我想给它添加 ontouch 方法。但它目前没有绘制图标图像。任何人请在这里帮助我，也请回答如何添加ontouch方法。

1.  问题 - 它没有绘制位图。
2.  问题 - 如何在其中添加触摸方法。

我的 xml 文件。

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:gif="http://schemas.android.com/apk/res-auto"
  xmlns:tools="http://schemas.android.com/tools"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  tools:context=".MainActivity" >

<rahul.surfacetest.ImageClass        
    android:id="@+id/viw"
    android:layout_width="fill_parent"
    android:layout_height="100dp"
    android:background="@drawable/them"
    android:layout_centerInParent="true"
    android:paddingTop="200dp" />

</RelativeLayout> 
```

这是我的主要课程

```
public class MainActivity extends Activity{

ImageClass Is;
static float x,y=0;
Bitmap bmp;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Is=(ImageClass)findViewById(R.id.viw);
    bmp=BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);       
}
} 
```

它是我的表面课程

```
public class ImageClass extends SurfaceView implements OnTouchListener,Runnable { 

float x,y;
SurfaceHolder holder;
boolean isItOk = true;
Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
Paint p = new Paint();

public ImageClass(Context context, AttributeSet attrs) {
    super(context, attrs);
    y=x=10;
    holder = getHolder();
}

@Override
public boolean onTouch(View v, MotionEvent event) { 
    try {
        Thread.sleep(20);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        x=event.getX();
        y=event.getY();
        break;
    case MotionEvent.ACTION_UP:
        x=event.getX();
        y=event.getY();         
        break;
    case MotionEvent.ACTION_MOVE:
        x=event.getX();
        y=event.getY();
        break;
    default:
        break;
    }
    return true;        
}

@Override
public void run() {

    Canvas c = holder.lockCanvas();
    c.drawBitmap(bmp, x,y, null);
    holder.unlockCanvasAndPost(c);

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:38:34.693

我想你可能误解了 Runnable 和 SurfaceView 的工作原理。尝试按照[本教程](http://android-er.blogspot.com/2014/03/create-animation-on-surfaceview-in.html)进行操作。注意使用线程来实现绘图。

# c++ - C++ - 访问私有的嵌套迭代器

> ID：15585511
> 
> 赞同：1
> 
> 时间：2013-03-23T10:07:29.140
> 
> 标签：c++

我不知道如何解决这个问题。我的迭代器构造函数需要是私有的，所以我使用容器返回一个迭代器，但它拒绝编译。

啊

```
class A {
    public:
        class iterator {
            friend class A;
            public:
                virtual ~iterator();
                iterator operator++(int);
                iterator operator--(int);

            private:
                iterator(int index, A container);
        };

        iterator begin();
        iterator end();

}; 
```

A.cpp

```
A::iterator A::begin(){
    return iterator(0, *this);
}

A::iterator A::end(){
    return iterator(length(), *this);
} 
```

然后我这样称呼它：

```
for(A::iterator i = a.begin(); i != a.end(); i++)
    std::cout << *i; 
```

但是最后一个块说“A::iterator 在这个上下文中是私有的”。我有一种感觉，迭代器构造函数只是在 begin() 之外被调用，但我不知道如何修复它。我对 C++ 相当陌生，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T10:13:13.050

这是因为`iterator`该类没有公共构造函数。您应该实现一个公共复制构造函数（可能还有一个复制赋值运算符（参见[三规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)））。

# c++ - 如何避免某些值的简单组的长构造函数？

> ID：15585513
> 
> 赞同：1
> 
> 时间：2013-03-23T10:08:13.267
> 
> 标签：c++, constructor, struct, grouping, shortcut

我想对一些值进行分组，例如在 a`struct`中，并在创建对象时轻松设置它们。

```
struct structure
{
    char letter;
    int number;
    float decimal;
};

structure object('c', 42, 12.3); // this doesn't work 
```

我知道我可以手动编写这样的构造函数。

```
struct structure
{
    structure(char letter, int number, float decimal) : letter(letter), number(number), decimal(decimal) {}
    char letter;
    int number;
    float decimal;
};

structure object('c', 42, 12.3); // this of course do work 
```

但是这样做很烦人，因为您必须两次和三次提及每个成员。但我只想对一些值进行分组......

我是否只有五个值中的三个我会使用`std::pair`并嵌套这些值。

```
typedef structure pair<char, pair<number, decimal>>;

structure object(make_pair('c', make_pair(42, 12.3))); 
```

`.first`但是对于更多的值，使用and获取正确的值变得非常混乱`.second`。实际上，我想对五个值进行分组。为此使用嵌套对似乎有点 hacky。

是否有用于设置所有成员或类似内容的构造函数？我有什么替代方法可以简单地对一些值进行分组而不为它们编写构造函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T10:16:35.447

首先，您可以使用[`std::tuple`](http://en.cppreference.com/w/cpp/utility/tuple)，它基本上是具有不同类型的值的集合：

```
std::tuple<char, int, float> object('c', 42, 12.3f); 
```

您可以使用 访问元素[`std::get`](http://en.cppreference.com/w/cpp/utility/tuple/get)。例如，要访问`char`，您将使用`std::get<0>(object)`.

其次，如果你使用结构，你可以用聚合初始化来初始化它：

```
structure object = {'c', 42, 12.3f};
// or even
structure object{'c', 42, 12.3f}; 
```

# c - 请解释这个结构的用法

> ID：15585514
> 
> 赞同：0
> 
> 时间：2013-03-23T10:08:23.217
> 
> 标签：c, arrays, multithreading, struct

```
#define MAX_THREADS ( 17 )
struct thread_info
{
  unsigned int * thread_sp; /* Storage space for thread stack-pointer. */
  int thread_id;            /* Storage space for a thread ID. */
};
struct thread_info thread_info_array[ MAX_THREADS ]; 
```

我不明白第二个结构，你能解释一下它的作用吗？如果我们改变常量，常量如何改变结构？

## 更新

我认为它与以下内容相同：

```
struct thread_info { unsigned int *thread_sp; int thread_id; } thread_info_array[MAX_THREADS]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T10:10:38.947

以下

```
struct thread_info thread_info_array[ MAX_THREADS ]; 
```

是先前声明的`thread_info`结构的数组。数组由`MAX_THREADS`元素组成；如果你改变常数，数组的大小就会改变。

请参阅[C 常见问题解答](http://c-faq.com/struct/typedef.html)，了解为什么需要第二个`struct`关键字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T10:10:59.493

`struct thread_info thread_info_array[ MAX_THREADS ];`暗示是元素结构`thread_info_array`的数组。`thread_info``MAX_THREADS`

更改常量只会更改数组中元素的数量，但不会影响`struct`定义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T10:12:01.757

它不是“第二个结构”。

这个：

```
struct thread_info
{
  unsigned int * thread_sp; /* Storage space for thread stack-pointer. */
  int thread_id;            /* Storage space for a thread ID. */
}; 
```

是一个**类型定义**。

这个：

```
struct thread_info thread_info_array[ MAX_THREADS ]; 
```

是 MAX_THREADS 个元素的数组定义，其中每个元素的类型`struct thread_info`都与您在上面定义的类型相同。

# debugging - 为什么 Intel Pin 无法识别某些已执行指令的映像/例程？

> ID：15585515
> 
> 赞同：0
> 
> 时间：2013-03-23T10:08:35.603
> 
> 标签：debugging, ld, intel-pin

我正在创建一个大型 pintool，我有两个问题：

* * *

该工具（以下仅删减到相关部分）有时无法识别特定执行指令的图像/例程。有人知道什么时候/为什么会发生吗？

* * *

该工具（在检测 Barnes-Hut 基准测试时）在运行一段时间后总是以内存不足 (OOM) 错误终止（尽管基准测试在独立运行时成功完成）。使用哪些工具来调试/跟踪 Pin-instrumented 应用程序的 OOM 错误？

```
int main(int argc, char *argv[])
{
    PIN_InitSymbols();
    if( PIN_Init(argc, argv) )
    {
    return 0;
    }

    INS_AddInstrumentFunction(Instruction, 0);

    PIN_StartProgram();

    return 0;
}

VOID Instruction(INS ins, VOID *v)
{
    INS_InsertPredicatedCall( ins,
    IPOINT_BEFORE, 
    (AFUNPTR) handle_ins_execution,
    IARG_INST_PTR,
    .....);
}

VOID handle_ins_execution (ADDRINT   addr, ...)
{
    PIN_LockClient();
    IMG img = IMG_FindByAddress(addr);
    RTN rtn = RTN_FindByAddress(addr);
    PIN_UnlockClient();
    if( IMG_Valid(img) ) {
    std::cerr << "From Image  : " << IMG_Name( img ) << std::endl;
    } else {
    std::cerr << "From Image  : " << "(UKNOWN)" << std::endl;
    }
    if( RTN_Valid(rtn) ) {
    std::cerr << "From Routine  : " << RTN_Name(rtn) << std::endl;
    } else {
    std::cerr << "From Routine  : " << "(UKNOWN)" << std::endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T16:41:29.417

我最近在 PinHeads 论坛上问过这个问题，我正在等待回复。我在文档中读到的是 IMG_FindByAddress 函数通过查找“对于每个图像，检查地址是否在其一个段的映射内存区域内”来运行。执行的指令可能不在有效范围内。

对于这种情况，了解图像的最佳方法是查看上下文。我的 pintool（基于 DebugTrace）即使不知道它在什么图像中也会继续运行。您可以查看发生这种情况之前和之后的日志条目。我一直在 OSX 的 dydl 中看到这一点。

# java - 将 Swing 应用软件锁定在快捷键上

> ID：15585521
> 
> 赞同：0
> 
> 时间：2013-03-23T10:09:17.217
> 
> 标签：java, swing, awt

在 Swing 应用程序中，我想锁定整个正在运行的应用程序。在快捷键上，我希望 Swing 应用程序应该被锁定，因为我们可以通过按 window+l 来锁定窗口

```
user should also not be allowed to go to open forms with the help of status bar 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:25:23.693

1.  使用应用程序窗口根窗格上的键绑定来捕获快捷方式事件[。](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)
2.  在键绑定的动作中，将窗口的玻璃窗格设置为可见，以捕获所有键盘和鼠标事件。查看如何使用[玻璃窗格教程](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)。另请参阅这篇文章，它显示[了如何阻止键盘事件。](https://stackoverflow.com/a/14381988/928711)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:19:36.400

`IS_LOCKED`在某个类和按键事件中有一个静态变量，将其设置为`true`. 在每个事件中，检查该静态变量。

# windows - Eclipse ADT 已知主机

> ID：15585523
> 
> 赞同：1
> 
> 时间：2013-03-23T10:09:29.080
> 
> 标签：windows, eclipse, adt, egit

我无法让官方 Windows ADT 21.1.0 发行版连接到 git 存储库。无论我尝试了什么（详情如下），它都会抱怨注册表中不存在主机密钥，并且没有显示接受主机密钥的选项。远程服务器正在运行 Gitlab 并且在我的控制之下。连接或防火墙没有问题。

到目前为止我尝试了什么：

1.  使用用户 git 在不提供密码的情况下连接
2.  在提供密码的同时与另一个用户连接
3.  在 ssh 主目录（Preferences->General->Network Connections->SSH2->SSH2 home）中的 known_hosts 文件中手动添加主机密钥。

消息总是：

```
 The server's host key is not cached in the registry. You
 have no guarantee that the server is the computer you
 think it is.
 The server's rsa2 key fingerprint is:
 ssh-rsa 2048 xx:xx:xx...
 Connection abandoned. 
```

RSE 工作没有任何问题，只有 egit 给我带来了问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:15:06.880

您可以通过不将 ssh 协议与 git 服务器一起使用，而是使用[git 或 http 协议](http://git-scm.com/book/en/Git-Internals-Transfer-Protocols)来解决此问题。

上述消息的一个原因可能是使用名为“ssh”的文件夹而不是“.ssh”（注意点）。我的一些同事经历过这种情况，这在使用 Windows 资源管理器时很容易发生，因为它会在创建名为“.ssh”的文件夹时默默地删除点。您必须改用命令行。

# email - 覆盖最大宽度（或为移动设备放大小图像）

> ID：15585527
> 
> 赞同：0
> 
> 时间：2013-03-23T10:09:52.083
> 
> 标签：email, mailchimp, css

我正在使用 Mailchimp 处理响应式电子邮件，除了必须将最大宽度设置为 160px 的图像之外，所有图像都可以缩小。这在桌面上很好，但在小于 100% 宽度的移动显示器上。

我已经设置了以下内容：

```
@media only screen and (max-width: 480px) {
    img[class=mcnImage] {
        width:100% !important; 
```

但它仍然太小了。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:27:53.520

正如我上面的评论所述，可能有几件事可能会合法地阻碍这里的发展。然而，这纯粹是猜测，但考虑一下......

**CSS**

```
img[class=one] {
    border: 5px solid blue;
} 
```

**HTML**

```
<img src="http://dummyimage.com/50x50" class="one"/>
<img src="http://dummyimage.com/50x50" class="one "/>
<img src="http://dummyimage.com/50x50" class=" one"/>
<img src="http://dummyimage.com/50x50" class=" one "/>
<img src="http://dummyimage.com/50x50" class="one two"/> 
```

在查看小提琴上发生了什么之前，首先看看您是否可以弄清楚*应该*发生什么（如果您熟悉`[]`属性选择器）。

认为你明白了吗？看看[小提琴](http://jsfiddle.net/userdude/RxVE5/)。

`img[class=term]`不仅是*不必要的（使用*`img.term` *完美*的类选择），而且它只选择*其中一个*图像。`[attr=term]`匹配一个完全声明，没有空格或任何东西。我不知道这是否相关，但值得注意。尽管如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T15:21:03.810

同意上述评论，您应该遵循这种标准方式来引用元素。但是为了解决您的问题，您可以尝试添加`max-width:auto`到您的代码中；

```
@media only screen and (max-width: 480px) {
    img[class=mcnImage] {
        width:100% !important;
        max-width:auto;
    }
} 
```

# xcode - 如何在 xCode 中模拟/模拟游戏手柄？

> ID：15585533
> 
> 赞同：4
> 
> 时间：2013-03-23T10:10:13.027
> 
> 标签：xcode, bluetooth, simulate, emulation, gamepad

**背景：** 我有一个蓝牙游戏手柄，我可以通过 xCode 发现并连接它。我可以通过控制和中断通道与它进行通信，因此我可以找出正在按下游戏手柄上的哪些按钮。然后我可以将其映射到键盘按钮。

然而，最近的游戏都在寻找真正的游戏手柄或操纵杆来启用多人游戏功能，因为只允许一名玩家使用键盘和鼠标进行游戏。由于我的游戏手柄目前仅模拟键盘按钮，因此游戏无法识别游戏手柄，因此无法解锁多人模式。

**问题：** 我不知道在哪里寻找，但有没有一种方法可以模拟游戏手柄，以便 MAC 实际上将其识别为操纵杆/游戏手柄，并且我可以相应地映射按钮？

我正在为 Mac OSX“Mountain Lion”应用程序在 xCode 4.6.1 中编码。

# ios - 如何在 iOS 字符串中禁用或绕过 Base64 图像 url 数据的转义序列

> ID：15585535
> 
> 赞同：0
> 
> 时间：2013-03-23T10:10:37.127
> 
> 标签：ios, xcode, uiimage, base64

我正在从我的服务器的 json 请求中接收 base64 字符串... base64 字符串如下所示：
“/9j/4AAQSkZJRgABAQAAAQABAAD//gA7Q1J...”（缩短得很好）

现在我的问题是，当我从 NSString > NSURL 转到它时，反斜杠会从字符串中转义...
“/9j/4AAQSkZJRgABAQAAAQABAAD//gA7Q1J”

即“/”变成了“/”现在我很确定这是我对 UIImage 问题的编码问题（通过以下方法：NSString -> NSURL -> NSData -> UIImage）

创建 UIImage 的代码：

```
 imageAllArray = [pathwayResults valueForKey:@"images_data_base64"];  
    NSURL *image2URL = [NSURL URLWithString:[imageAllArray objectAtIndex:1]];  
    NSData *image2Data = [NSData dataWithContentsOfURL:image2URL];  
    imageTwo = [UIImage imageWithData:image2Data]; 
```

有谁知道一种方法来确保反斜杠留在要转换的字符串中？

还是有另一种/更简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:19:40.800

```
NSString *encodedString = [@"your string" stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T09:45:40.907

我发现反斜杠根本没有造成太大的伤害，这是因为我忘记在字符串前面加上：“data:image/png;base64”

见下文：

```
 NSString *prepender = @"data:image/png;base64,";
        NSString *image1String = [NSString stringWithFormat:@"%@%@", prepender, [pathwayImageArray objectAtIndex:0]];
        NSURL *image1URL = [NSURL URLWithString:image1String];
        NSData *image1Data = [NSData dataWithContentsOfURL:image1URL];
        imageOne = [UIImage imageWithData:image1Data]; 
```

希望这对其他人有帮助！

# android - 我想在发送图像时实现进度条

> ID：15585539
> 
> 赞同：1
> 
> 时间：2013-03-23T10:10:57.527
> 
> 标签：android, android-progressbar

我想通过套接字发送图像，并且必须显示进度条上的发送过程，并且在发送图像时它应该更新但是当我尝试此代码时，进度条没有显示并且图像正在发送.

```
 try {
        //image send
        client = new Socket(ServerIP,4444);

        File file = new File(path);
        byte[] mybytearray = new byte[(int) file.length()];
        FileInputStream fis = new FileInputStream(file);
        BufferedInputStream bis = new BufferedInputStream(fis);
        bis.read(mybytearray, 0, mybytearray.length);
        OutputStream os = client.getOutputStream();
        DataOutputStream dos = new DataOutputStream(os);     
                dos.writeUTF(file.getName()); 
                    int bytesread=0;

        ProgressDialog pd = new ProgressDialog(c);
        pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        pd.setMessage("Sending...");
        pd.setCancelable(false);
        pd.setProgress(0);
        pd.show();

            while((bytesread=fis.read(mybytearray))>0)
                os.write(mybytearray, 0, mybytearray.length);
                int old_value=pd.getProgress();
                     int new_read=(int)( ((float)file.length()/bytesread));
                int value= new_read+old_value;
                pd.setProgress(value);
                pd.dismiss();
        os.write(mybytearray, 0, mybytearray.length);
        os.flush();
        bis.close();
        fis.close();
        client.close();

    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:24:37.147

对于此类任务，您必须查看 AsyncTask。尝试以下代码并用于您的要求

```
public class UploadImage extends AsyncTask<String, String, String> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(ShowFullImageShare.this);
        pDialog.setMessage("Updating to twitter...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    @Override
    protected String doInBackground(String... args) {

        // write your code here for sending image
        return null;
    }

    @Override
    protected void onPostExecute(String file_url) {          
        pDialog.dismiss();

    }
} 
```

像这样调用这个 AsyncTask

```
new UploadImage().execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-05T06:15:40.507

```
public class UploadImage extends AsyncTask<Void, Integer, Void> {

@Override
protected void onPreExecute() {
    super.onPreExecute();
    pDialog = new ProgressDialog(ShowFullImageShare.this);
    pDialog.setMessage("Sending...");
    pDialog.setIndeterminate(false);
    pDialog.setCancelable(false);
    pDialog.show();
}

@Override
protected Void doInBackground(Void... args) {

while((bytesread=fis.read(mybytearray))>0)
os.write(mybytearray, 0, mybytearray.length);
int old_value=pd.getProgress();
int new_read=(int)( ((float)file.length()/bytesread));
int value= new_read+old_value;
os.write(mybytearray, 0, mybytearray.length);
os.flush();
bis.close();
fis.close();
client.close();

publishProgress(value);
return null;
}

@Override
protected void onProgressUpdate(Integer progress) {          
    pDialog.setProgress(progress);

}

@Override
protected void onPostExecute(Void value) {          
    pDialog.dismiss();

}
} 
```

# java - 使用 JAR 打开文本文件而不提取它 - 请帮助

> ID：15585545
> 
> 赞同：0
> 
> 时间：2013-03-23T10:11:21.483
> 
> 标签：java, inputstream

我正在尝试打开保存在 JAR 中的 .txt 文件并在 JTextArea 中显示其内容。以下是我尝试使用的代码；

```
 URL urlToDictionary = this.getClass().getResource("eula/" + "eula.txt");
      try {
        InputStream stream = urlToDictionary.openStream();
        gettysburgTextStrBlder = stream;
        System.out.println(stream);
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } 
```

我知道我在正确的文件位置，因为我已经更改了 .getResource 路径并看到了空点异常，我没有当前文件路径。

System.out 在运行时打印以下内容：

```
java.io.BufferedInputStream@3af42ad0 
```

我也试过；

```
gettysburgTextStrBlder = String.valueOf(stream); 
```

但是我得到的结果是一样的。

我想我快到了，但不确定如何获取 .txt 文件的实际内容，而不仅仅是缓冲流。

谢谢。

安迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T10:15:41.020

您必须从输入流中读取内容并使用[`BufferedReader`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html)

```
URL urlToDictionary = this.getClass().getResource("eula/" + "eula.txt");
  try {
    InputStream stream = urlToDictionary.openStream();
    BufferedReader br = new BufferedReader(new InputStreamReader(stream));
    String line = null;
    StringBuffer lineContent = new StringBuffer();
    while((line = br.readLine()) != null){
        lineContent.append(line).append("\n");
    }
    br.close().
    System.out.println(lineContent.toString());
} catch (IOException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
} 
```

# c++ - 具有不同参数的成员函数的 std::map

> ID：15585546
> 
> 赞同：1
> 
> 时间：2013-03-23T10:11:22.803
> 
> 标签：c++, boost, functor, c++03

我有一个`DeviceSettingsManager`看起来像这样的课程：

```
class DeviceSettingsManager
{
    int32_t PropertyA();
    void SetPropertyA(int32_t prop);
    std::string PropertyB();
    void SetPropertyB(std::string prop);

    // about 50 properties go here ...
} 
```

我需要根据我拥有的属性字符串来设置属性。没有代码看起来像这样：

```
// Parse property string ("PropertyA = 100, PropertyB = xyz, ...") to key/value pairs

if (key == "PropertyA")
    manager.SetPropertyA(value);
else if (key == "PropertyB")
    manager.SetPropertyB(value);

// 50 more properties ... 
```

不是很好，对吧？

第一个想法是将设置器存储在地图中：

```
setters_[key](value); // where for example key == "PropertyA" and value = 100 
```

但是有一个问题：我不能在地图中存储不同的函子：

```
typedef boost::function<void(int32_t)> setter_int_t;
typedef boost::function<void(std::string)> setter_string_t;
std::map<std::string, ???> setters_; 
```

当然，我可以有两张地图（for`int32_t`和 for `std::string`）。但它不能很好地扩展。如果我将被迫添加具有参数类型的新设置器，`float`或者`double`甚至`user_defined_class`我需要更多的地图。

另一种方法是在这种情况下使用`boost::any`by 在这种情况下我需要`reinterpret_cast`回到`boost::function`我需要的状态，因此再次面临问题。

问题是：如何管理此类 PropertyManager 以防止编写数十亿条 if-else 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:29:25.403

最后，做的方式（不知道是不是最好的）：

```
// checks (map.find(...)) omitted for brevity

struct base_type_holder
{
    virtual ~base_type_holder() {};
};

template<typename T>
struct type_holder : base_type_holder
{
    typedef T type;
};

std::map<std::string, boost::shared_ptr<base_type_holder> > types_;

template<typename T>
void RegisterSetterType(const std::string& name)
{
    types_[name].reset(new type_holder<T>);
}

boost::shared_ptr<base_type_holder> GetSetterType(const std::string& name)
{
    return types_[name];
}

template<typename T>
std::map<std::string, boost::function<void(T)> >& SettersMap()
{
    static std::map<std::string, boost::function<void(T)> > settersMap;
    return settersMap;
}

template<typename T, typename H>
void AddSetter(const std::string& name, void (H::*Setter)(T))
{
    static H settingsManager;
    RegisterSetterType<T>(name);

    SettersMap<T>()[name] = boost::bind(Setter, &settingsManager, ::_1);
}

void CallSetter(const std::string& name, const std::string& value)
{
    boost::shared_ptr<base_type_holder> base_type = GetSetterType(name);
    if (dynamic_cast<type_holder<int32_t> *>(base_type.get()))
    {
        SettersMap<int32_t>()[name](atoi(value.c_str()));
    }
    else if (dynamic_cast<type_holder<std::string> *>(base_type.get()))
    {
        SettersMap<std::string>()[name](value);
    }
}

// Now somewhere in .cpp
AddSetter<int32_t, DeviceSettingsManager>("PropertyA", &DeviceSettingsManager::SetPropertyA);
AddSetter<const std::string&, DeviceSettingsManager>("PropertyB", &DeviceSettingsManager::SetPropertyB);

// other...

// later
CallSetter(key, value); // key = "PropertyA", value = "100" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:29:29.887

可能只是制作一张地图`<key, parser>`？并将初始字符串、位置和管理器对象传递给解析器。它比一堆地图更灵活，但你仍然需要用具体的解析器填充地图。

# iphone - 如何在 iPhone 中以编程方式将按钮旋转 360 度？

> ID：15585550
> 
> 赞同：2
> 
> 时间：2013-03-23T10:11:38.757
> 
> 标签：iphone, objective-c, cocoa-touch

如何在 30 秒的时间内将按钮旋转 360 度，然后按钮停止旋转。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T10:50:58.410

一个 360 度旋转动画只需几行 Core Animation 代码。

```
CABasicAnimation *rotate = 
    [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
rotate.byValue = @(M_PI*2); // Change to - angle for counter clockwise rotation
rotate.duration = 30.0; 

[yourButton.layer addAnimation:rotate 
                        forKey:@"myRotationAnimation"]; 
```

通过使用该`byValue`属性，您可以对之前的任何旋转进行 360 度的*相对旋转（与显式指定 from 和 to 值相比）。*这意味着即使按钮已经旋转，上面的代码也会将按钮旋转 360 度。所有明确指定结束变换的答案都假设按钮尚未旋转。

上面的示例尽可能小，以按照您的要求进行（“在 30 秒的时间内旋转 360 度”）。如果您想拥有更多控制权，您可以选择通过指定计时函数来使动画缓慢开始和/或停止

```
rotate.timingFunction = 
    [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]; 
```

* * *

如果您还没有添加`QuarzCore.framework`到您的项目中，您将需要这样做。也在`#import <QuartzCore/QuartzCore.h>`源文件的顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:48:42.110

```
CATransform3D myRotationTransform = CATransform3DRotate(Yourbutton.layer.transform, -1, 0.0, 0.0, 1.0);
Yourbutton.layer.transform = myRotationTransform;

CABasicAnimation* animation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
animation.fromValue = [NSNumber numberWithFloat:0.0f];
animation.toValue = [NSNumber numberWithFloat: -1];
animation.duration = 30;
animation.repeatCount = 1;
animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
[Yourbutton.layer addAnimation:animation forKey:@"MyAnimation"]; 
```

应该根据需要工作！不要忘记包含quartz.framework！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-04T03:51:38.720

嗯，我刚用

作为 self.buttonImageView 您需要旋转的 ImageView。

```
[UIView animateKeyframesWithDuration:0.5 delay:0 options:UIViewKeyframeAnimationOptionCalculationModeLinear animations:^{

    [UIView addKeyframeWithRelativeStartTime:0.0 relativeDuration:0.25 animations:^{
        self.buttonImageView.transform= CGAffineTransformMakeRotation(M_PI);
    }];

    [UIView addKeyframeWithRelativeStartTime:0.5 relativeDuration:0.25 animations:^{
        self.buttonImageView.transform= CGAffineTransformMakeRotation(-2* M_PI);
    }];

} completion:^(BOOL finished) {

    [self.map setCenterCoordinate:self.map.userLocation.location.coordinate animated:YES];
    self.buttonImageView.transform= CGAffineTransformMakeRotation(2* M_PI);
}]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-23T10:16:18.783

```
[UIView animateWithDuration:.30f animations:^{
    btnGallery.transform = CGAffineTransformRotate(CGAffineTransformIdentity, -M_PI);
}]; 
```

# dart - dart 测试 dart:html 不加载 dartium

> ID：15585551
> 
> 赞同：2
> 
> 时间：2013-03-23T10:11:39.880
> 
> 标签：dart

有什么方法可以`dart:html`在不触发 dartium 的情况下测试导入的代码。

我想测试`HttpRequest`JSON 数据并希望它在终端上显示它，并且 dart 编辑器希望每次都打开 dartium，我认为这是不必要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T12:50:00.383

Dartium 包含浏览器托管的 Dart VM，它与相关的浏览器 DOM 绑定。当您运行需要浏览器 DOM 的代码时，例如 dart:html，您将运行 Dartium。

但是，您也可以使用 DumpRenderTree - 它是一个无头浏览器（即，向控制台生成输出）。

查看这些帖子以了解有关 DumpRenderTree 和 Dart 的更多信息：

*   [http://work.j832.com/2013/01/headless-browser-testing-dart.html](http://work.j832.com/2013/01/headless-browser-testing-dart.html)
*   [http://docs.drone.io/dart.html](http://docs.drone.io/dart.html)
*   [http://japhr.blogspot.co.uk/2013/01/regression-testing-of-browser-dart-code.html](http://japhr.blogspot.co.uk/2013/01/regression-testing-of-browser-dart-code.html)

# vb.net - 将数据导出到 Excel

> ID：15585552
> 
> 赞同：0
> 
> 时间：2013-03-23T10:11:40.513
> 
> 标签：vb.net, excel, vb6, export-to-excel, vba

问题 1：要导出到 Excel 的数据是在我的 vb.net 代码中使用二维数组对象准备的。当尝试将此数组对象分配给 ExcelRange.Value 或 .Value2 属性时，它可以正常工作，除非要导出的任何单元格值的文本长度超过 8203（它会抛出异常消息“HRESULT 异常：0x800A03EC”）

问题 2：而使用 excelrange.FormulaArray 属性时，会出现错误消息“无法设置 Range 类的 FormulaArray 属性”。但它在使用字符串数组的 vb6 中工作正常。是什么原因 ？下面是我使用 excelrange.FormulaArray 属性时的详细错误

```
System.Runtime.InteropServices.COMException was caught
ErrorCode=-2146827284
HelpLink="C:\Program Files (x86)\Microsoft Office\Office12\1033\XLMAIN11.CHM"
Message="Unable to set the FormulaArray property of the Range class"
Source="Microsoft Office Excel"
StackTrace:
   at System.RuntimeType.ForwardCallToInvokeMember(String memberName, BindingFlags flags, Object target, Int32[] aWrapperTypes, MessageData& msgData)
   at Excel.Range.set_FormulaArray(Object )
   at globalmodule.modglobconstant.ExportMsfgToExcel(AxMSFlexGrid& Msfg1, Boolean& flg, String FileName1)
InnerException: 
```

任何其他导出到 excel/此问题解决方案的替代方法将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:27:23.047

1.  根据[Excel 2010 性能：性能和限制改进](http://msdn.microsoft.com/en-us/library/office/ff700514%28v=office.14%29.aspx#Office2007excelPerf_BigGridIncreasedLimitsExcel)，单元格公式的限制为 8000 个字符。然而，进一步的测试表明 Excel 2007 接受了 32767 个字符的字符串（我手头没有 2010 的副本）。

2.  如果您从表格中转移，通常您会使用`.Value`or `.Formula`，`FormulaArray`用于将一个公式应用于一系列单元格的特殊情况。

在提交的测试用例中，您试图将一个 VB 数组分配给 Range.Value。将其更改为分配数组的单个成员有效。

# java - 管理返回类型休眠

> ID：15585557
> 
> 赞同：0
> 
> 时间：2013-03-23T10:12:21.680
> 
> 标签：java, mysql, hibernate

我正在使用本机查询从数据库中获取数据并将它们添加到包含浮点值的对象中，例如：

```
select tons, delivered_tons from contract where id = 1 
```

并使用 createSQLQuery() 执行查询

并返回一个对象数组，如：

```
Object[] result = (Object[])query.uniqueResult(); 
```

并将它们投射到我的对象中

```
A a = new A((Float)result[0],(Float)result[1]); 
```

问题是我不知道查询的返回类型（浮点或双精度）。那么hibernate有什么方法可以控制返回类型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:29:24.500

如果您使用 HQL 而不是 os SQL，Hibernate 将使用您选择的类型来映射实体中的列：

假设您有一个包含以下字段的合同实体：

```
@Entity
public class Contract {
    @Column(name = "tons")
    private Float tons;

    @Column(name = "delivered_tons")
    private Float deliveredTons;

    ...
} 
```

您只需执行 HQL 查询

```
select c.tons, c.deliveredTons from Contract c where c.id = :id 
```

你肯定会得到一个包含两个浮点数的数组。

也就是说，对于这样一个简单的查询，你为什么不直接使用

```
Contract c = (Contract) session.get(Contract.class, id); 
```

然后从实体中获取您想要的字段？

# java - gwt 形式：请求发送并到达，但 gwt 没有响应

> ID：15585561
> 
> 赞同：0
> 
> 时间：2013-03-23T10:12:47.940
> 
> 标签：java, gwt, formpanel

我一定错过了一些简单的东西，但我被卡住了。我在gwt中创建了一个FormPanel，根据firebug发送请求。该链接有效，因为我从 firebug 复制了 requestlink 并在浏览器窗口中进行了本地尝试。是的，客户端和服务器主机是相同的 --> localhost。但答案并没有到达 gwt。甚至客户端浏览器都没有——萤火虫没有显示任何结果。

这是我的小表格：

```
 Button form = new Button ("SendForm", new ClickHandler() {

        @Override
        public void onClick(ClickEvent event) {
            logger.log(Level.FINER, "Creating SubmitForm...");

            TextBox cmd = new TextBox();
            cmd.setName("cmd");
            cmd.setText("GetMenuitemList");

            Button sendbutton = new Button("Senden");
            logger.log(Level.FINEST, "Creating grid...");
            Grid grid = new Grid(1, 2);
            grid.setWidget(0, 0, new  Label("Command"));
            grid.setWidget(0, 1, cmd);

            VerticalPanel vPan = new VerticalPanel();
            //vPan.add(grid);
            vPan.add(sendbutton);

            logger.log(Level.FINEST, "Creating FormPanel...");
            final FormPanel formPan = new FormPanel();
            formPan.setMethod(FormPanel.METHOD_POST);
            formPan.setAction(RequestHelper.getLink("Menu.php"));

            logger.log(Level.FINEST, "Binding Send button...");
            logger.log(Level.FINEST, "Binding SubmitHandler...");
            formPan.addSubmitHandler(new SubmitHandler() {

                @Override
                public void onSubmit(SubmitEvent event) {
                    OptionPane.showMessageDialog("Form submit", event.toDebugString(), MessageType.INFO, true);
                }
            });

            logger.log(Level.FINEST, "Binding SubmitCompleteHandler...");
            formPan.addSubmitCompleteHandler(new SubmitCompleteHandler() {

                @Override
                public void onSubmitComplete(SubmitCompleteEvent event) {
                    OptionPane.showMessageDialog("Form SubmitComplete", event.toDebugString(), MessageType.INFO, true);
                }
            });

            logger.log(Level.FINEST, "Adding grid to formpan...");
            formPan.add(grid);
            formPan.add(vPan);

            logger.log(Level.FINEST, "Creating DialogBox...");
            final DialogBox box = OptionPane.createClosableBox("TestForm", true);

            sendbutton.addClickHandler(new ClickHandler() {

                @Override
                public void onClick(ClickEvent event) {
                    formPan.submit();
                    box.hide();
                }
            });

            box.add(formPan);
            box.center();
        }
    }); 
```

预期的答案如下所示：

```
{"sessionid":"6dbqibo25e0bn46fldqh37psj5","data":[{"title":"Start","Controller":"Start","Action":"Index","tooltip":"Startseite, Begr\u00fc\u00dfung","prefetch":"1"},{"title":"Register","Controller":"Person","Action":"Index","tooltip":"Neue Benutzer registrieren","prefetch":"0"},{"title":"Daten","Controller":"Contact","Action":"Index","tooltip":"Die eigenen Daten bearbeiten","prefetch":"1"},{"title":"Teilnehmerlisten","Controller":"Lists","Action":"Index","tooltip":"Listen der registrierten Benutzer","prefetch":"0"},{"title":"Suche","Controller":"Search","Action":"Index","tooltip":"Namenssuche nach Benutzer mit Kontaktm\u00f6glichkeit","prefetch":"1"},{"title":"Kalender","Controller":"Calendar","Action":"Index","tooltip":"Termine","prefetch":"1"},{"title":"Newsletter","Controller":"Newsletter","Action":"Index","tooltip":"Verschicken von Newslettern","prefetch":"1"},{"title":"Wettk\u00e4mpfer","Controller":"Competitor","Action":"Index","tooltip":"Zugriff auf Wettk\u00e4mpfer","prefetch":"1"},{"title":"Upload","Controller":"Upload","Action":"Index","tooltip":"Bilder, Videos o.\u00e4\. hochladen","prefetch":"0"},{"title":"Administration","Controller":"Admin","Action":"Index","tooltip":"Datenbankfunktionen und Benutzerrechte","prefetch":"1"}]} 
```

那么，这里出了什么问题？

顺便说一句，我会将这种技术用于登录表单。我读到，以表格形式执行此操作比通过 RequestBuilder （已经有效）更好。文件上传将在稍后进行，因此表单问题无论如何都需要答案...

先感谢您。马库斯

编辑：好的，我也在 Chromium、Konqueror 和 Opera 上进行了测试——代码有效。这只是火狐。让它与Firefox一起使用的想法？我是 eclipse 和 gwt 的新手……也许是一些编译器选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:44:15.853

我自己发现并解决了问题：form.submit执行后，我隐藏了表单面板。正如javadoc所说，这是不允许的：

> 在提交完成之前，不得将 FormPanel 分离（即从其父级移除或以其他方式与 RootPanel 断开连接）。否则，提交通知将失败。

# javascript - 简单的正则表达式替换括号

> ID：15585569
> 
> 赞同：8
> 
> 时间：2013-03-23T10:13:57.687
> 
> 标签：javascript, jquery, regex

有没有一种简单的方法来制作这个字符串：

```
(53.5595313, 10.009969899999987) 
```

到这个字符串

```
[53.5595313, 10.009969899999987] 
```

使用 JavaScript 还是 jQuery？

我尝试了多个替换，这对我来说似乎不太优雅

```
 str = str.replace("(","[").replace(")","]") 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-23T10:16:11.420

好吧，既然您要求使用正则表达式：

```
var input = "(53.5595313, 10.009969899999987)";
var output = input.replace(/^\((.+)\)$/,"[$1]");

// OR to replace all parens, not just one at start and end:
var output = input.replace(/\(/g,"[").replace(/\)/g,"]"); 
```

...但这有点复杂。你可以使用[`.slice()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/slice)：

```
var output = "[" + input.slice(1,-1) + "]"; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-12-20T11:36:56.800

对于它的价值，替换 ( 和 ) 使用：

```
str = "(boob)";
str = str.replace(/[\(\)]/g, ""); // yields "boob" 
```

正则表达式字符含义：

```
[  = start a group of characters to look for
\( = escape the opening parenthesis
\) = escape the closing parenthesis
]  = close the group
g  = global (replace all that are found) 
```

**编辑**

实际上，这两个转义字符是多余的，eslint 会警告你：

**不必要的转义字符:) no-useless-escape**

正确的形式是：

```
str.replace(/[()]/g, "") 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-23T10:20:42.990

```
var s ="(53.5595313, 10.009969899999987)";
s.replace(/\((.*)\)/, "[$1]") 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-23T10:20:49.603

这个 Javascript 应该可以完成这项工作以及上面 'nnnnnn' 的答案

`stringObject = stringObject.replace('(', '[').replace(')', ']')`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-01-20T09:36:01.213

如果您不仅需要一对括号，还需要多个括号替换，则可以使用此正则表达式：

```
var input = "(53.5, 10.009) more stuff then (12) then (abc, 234)";
var output = input.replace(/\((.+?)\)/g, "[$1]");
console.log(output); 
```

> [53.5, 10.009] 更多的东西然后 [12] 然后 [abc, 234]

# java - java中的默认equals实现如何适用于String？

> ID：15585573
> 
> 赞同：5
> 
> 时间：2013-03-23T10:14:40.247
> 
> 标签：java, string, equals

我们都知道，如果我们创建两个 String 对象并使用 == 来比较它们，它将返回 false，如果我们使用 equals 方法，它将返回 true。但是默认情况下 equals 方法只实现 == ，那么它如何返回 true ，它应该返回 == 返回的任何内容？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T10:17:53.603

是的，默认情况下等于类`==`中的方法实现`Object`。但是你可以在你自己的类中重写`equals`方法来改变`equality`同一个类的两个对象之间的方式。例如`equals`，类中的方法`String`被覆盖如下：

```
public boolean equals(Object anObject) {
          if (this == anObject) {
              return true;
          }
          if (anObject instanceof String) {
              String anotherString = (String)anObject;
              int n = count;
              if (n == anotherString.count) {
                  char v1[] = value;
                  char v2[] = anotherString.value;
                  int i = offset;
                  int j = anotherString.offset;
                  while (n-- != 0) {
                      if (v1[i++] != v2[j++])
                          return false;
                  }
                  return true;
              }
          }
          return false;
      } 
```

所以这就是以下代码的原因：

```
String s1 = new String("java");
String s2 = new String("java"); 
```

`s1==s2`返回`false`，因为两者都引用了堆上的不同对象。而从现在开始`s1.equals(s2)`返回的是被调用的是在类中定义的对象，其中对象基于字符串进行比较。`true``equals``String``String``contents`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T10:17:30.737

String 类中的 equals 方法被覆盖，它尝试检查两个字符串中的所有字符是否相等。如果找到，则返回 true。所以 String 类中的 equals 方法的行为与它的普通对象类实现不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T10:27:53.817

`String`java中的类覆盖了类的`equals`方法，`Object`以便比较两个字符串的内容而不是比较引用（`Object`类中的默认实现）。

下面看类的`equals`方法实现`String`：

```
public boolean equals(Object anObject) {
    if (this == anObject) {
        return true;
    }
    if (anObject instanceof String) {
        String anotherString = (String)anObject;
        int n = count;
        if (n == anotherString.count) {
        char v1[] = value;
        char v2[] = anotherString.value;
        int i = offset;
        int j = anotherString.offset;
        while (n-- != 0) {
            if (v1[i++] != v2[j++])
            return false;
        }
        return true;
        }
    }
    return false;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T10:16:48.213

`equals`方法原本是`Object`类的方法。Java 中的每个类都`Object`默认扩展该类。现在，`equals`方法被覆盖，`String`类的行为不同于`==`.

它的[javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equals%28java.lang.Object%29)完美地解释了它：

> 将此字符串与指定对象进行比较。当且仅当参数不为 null 并且是表示与此对象相同的字符序列的 String 对象时，结果才为真。

它的实现如下：

```
@override
public boolean equals(Object anObject) {
// This check is just for the case when exact same String object is passed
if (this == anObject) {
    return true;
}
// After this only real implementation of equals start which you might be looking for
// For other cases checks start from here
if (anObject instanceof String) {
    String anotherString = (String)anObject;
    int n = count;
    if (n == anotherString.count) {
    char v1[] = value;
    char v2[] = anotherString.value;
    int i = offset;
    int j = anotherString.offset;
    while (n-- != 0) {
        if (v1[i++] != v2[j++])
        return false;
    }
    return true;
    }
}
return false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T10:18:30.163

`.equals()`检查字符串是否相同 ei。具有相同的字符。`==`仅检查指针是否指向相同的对象。您可以拥有具有相同字符的不同对象，这就是为什么您应该使用`.equals()`它们来比较它们

# c# - PowerPoint 2010 内存泄漏？

> ID：15585574
> 
> 赞同：1
> 
> 时间：2013-03-23T10:14:49.933
> 
> 标签：c#, binary, tags, powerpoint, add-in

我为 Microsoft PowerPoint 开发了一个自定义插件。我的插件需要将大量二进制数据存储到 PowerPoint 演示文稿中。我将此二进制数据作为 base 64 编码字符串存储到 PowerPoint 演示文稿标签中。我发现，当演示文稿在其标签中包含大量数据（如 10 多兆字节）时，PowerPoint 在保存演示文稿时似乎正在泄漏内存。因此，当多次保存此类演示文稿时，PowerPoint 甚至会耗尽系统内存并崩溃。

我开发了一个非常简单的 C# 插件来隔离问题。创建新演示文稿时，它将 50 兆字节的二进制数据存储到演示文稿中：

```
private void Application_AfterNewPresentation(PowerPoint.Presentation presentation)
{
    int tagLength = 5 * 1000 * 1000;
    StringBuilder largeTagValue = new StringBuilder();
    largeTagValue.Capacity = tagLength + 2;
    for (int i = 0; i < tagLength; i++)
    {
        largeTagValue.Append("A");
    }
    largeTagValue.Append("\0");
    string largeTagValueString = largeTagValue.ToString();
    for (int i = 0; i < 10; i++)
    {
        presentation.Tags.Add("LARGE_TAG" + i.ToString(), largeTagValueString);
    }
} 
```

运行此插件后，我什至可以禁用它以确保它不再执行任何操作。接下来，我多次保存演示文稿，并且每次保存演示文稿时，进程列表中的 PowerPoint 内存使用量都会增加。

完整的源代码和示例演示文稿可[在此处获得](https://skydrive.live.com/redir?resid=83126405EF1FDD45!123&authkey=!AMuAYinYLxhE5p8)

有谁知道这是一个 PowerPoint 错误还是有任何解决方法？...

或者，也许还有另一种方法可以将相对大量的数据存储到 PowerPoint 演示文稿中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:38:33.270

更多的搜索发现了这一点......首先看看 Todd Main 的答案，以大致了解需要什么：

[是否可以将一些数据添加到 Word 文档中？](https://stackoverflow.com/questions/3094519/is-it-possible-to-add-some-data-to-a-word-document/3128463#3128463)

# bash - 多条件循环，while，if

> ID：15585575
> 
> 赞同：0
> 
> 时间：2013-03-23T10:14:50.763
> 
> 标签：bash, embedded-linux

这是我的问题：我需要将不同的文件名从一个公共目录移动到不同的目录文件夹中。我是 Linux 新手，我刚刚做了一些测试，但我陷入了这个问题。例子是：

这些文件：月亮、海、猴子、牛奶

需要移动到已经创建的不同的特定文件夹中，所以

月亮必须移动到 /home/moon

sea 必须移动到 /home/sea

我会通过尽可能少的代码来解决。你能帮我解决这个问题吗？

提前致谢

更新：

这就是我所做的，但我会优化，因为我必须通过更改每个不同文件的 $dirpath 来为需要移动的每个文件重复此代码，因为我不知道如何关联我搜索的文件 ($stuff)以及需要移动文件的正确目录 ($dirpath)。

```
stuff="*Milk*"

if test -n "$(find /volume1/Incoming/ -iname "$stuff")"  
    then  
    dirpath="/volume1/home/My milk"  
    echo -n Action taken file move:" " >/volume1/homes/admin/result  
    find /volume1/Incoming/ -iname "$stuff" -print >>/volume1/homes/admin/result -exec mv {} "$dirpath" \;  
    echo  Destination: $dirpath >>/volume1/homes/admin/result 
```

你能告诉我如何改进这段代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:20:16.083

试试这个：

```
for i in moon sea monkey milk
do
  mv /your/dir/$i /home/$i
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:40:20.193

移动到存储文件的目录并运行以下代码行。

```
for i in *  
do  
mv $i /home/$i  
done 
```

# c++ - 矢量使用的异常问题

> ID：15585580
> 
> 赞同：0
> 
> 时间：2013-03-23T10:15:43.643
> 
> 标签：c++, vector

我正在尝试编写一个程序，但遇到了一些问题`vector`。我有一个逻辑，在`vector`循环的每次迭代中都要比较 的值。所以我初始化了向量并将一个元素推送到每个向量。现在，由于我在这两个向量中都有一个元素，我应该能够像下面的代码一样进行比较和迭代，但事实并非如此。可能有错误，但很难找到。

```
int M = 3; // I am passing values of M and N to this function
int N = 3; 
std::vector<int> X;
std::vector<int> Y;
X.push_back(1);
Y.push_back(1);
int x = 0;
for(int i = 1; i <= N; i++){
    for(int j = 1; j <= M; j++){
        if((X[x] <= i) && (Y[x] <= j)){
            if (x > 0){
                X.push_back(i);
                Y.push_back(j);
                x = x + 1;
            }
            else{
                X[0] = 1;
                Y[0] = 1;
                x = x + 1;
            }
        }
    }
}
for(int i = 0; i < X.size(); i++){
    cout << X[i] << "; " << Y[i] << endl;
} 
```

我使用上述程序得到以下输出。

```
`1; 1` 
```

但我需要制作这个。

```
`1; 1`
`1; 2`
`2; 2` 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T10:19:42.227

你有*未定义的行为*。

当`x`为零时，您不会将新条目推送到向量中，但是会增加`x`并且您访问的下一次迭代`X[1]`超出`Y[1]`了界限。

# android - RSA 加密/解密在 android 2.2 上崩溃

> ID：15585593
> 
> 赞同：1
> 
> 时间：2013-03-23T10:17:46.547
> 
> 标签：android, encryption, crash, rsa

我正在开发一个安卓应用程序。不幸的是我有一个兼容性问题。我的源代码适用于固件 4.1，但使用固件 2.2 的设备会崩溃。该错误似乎是由 ObjectInputStream 引起的“ClassNotFoundException”。

我的加密和解密源代码：

```
private Key getPublicKey() {
    try {
        InputStream fis = activity.getResources().openRawResource(R.raw.publick);
        ObjectInputStream ois = new ObjectInputStream(fis);
        Key RSApublicKey = (Key) ois.readObject();
        return RSApublicKey;
    }
    catch (FileNotFoundException e) {
        e.printStackTrace();
    }
    catch (IOException e) {
        e.printStackTrace();
    }
    catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
    return null;
}

private Key getPrivateKey() {
    try {
        InputStream fis = activity.getResources().openRawResource(R.raw.privatek);
        ObjectInputStream ois = new ObjectInputStream(fis);
        Key RSAprivateKey = (Key) ois.readObject();
        return RSAprivateKey;
    }
    catch (FileNotFoundException e) {
        e.printStackTrace();
    }
    catch (IOException e) {
        e.printStackTrace();
    }
    catch (ClassNotFoundException e) {
        Log.e("error", "Error: " + e);
        e.printStackTrace();
    }
    return null;
}

public byte[] encrypt(String data) {
    byte[] encrypted = null;
    try {
        Cipher cipher = Cipher.getInstance("RSA");
        cipher.init(Cipher.ENCRYPT_MODE, getPublicKey());
        encrypted = cipher.doFinal(data.getBytes());
    }
    catch (IllegalBlockSizeException e) {
            e.printStackTrace();
    }
    catch (BadPaddingException e) {
        e.printStackTrace();
    }
    catch (InvalidKeyException e) {
        e.printStackTrace();
    }
    catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    }
    catch (NoSuchPaddingException e) {
        e.printStackTrace();
    }
    catch (NoSuchProviderException e) {
        e.printStackTrace();
    }
    return encrypted;
}

public String decrypt(byte[] encrypted) {
    byte[] decrypted = null;
    try {
        Cipher cipher;
        cipher = Cipher.getInstance("RSA");
        cipher.init(Cipher.DECRYPT_MODE, getPrivateKey());
        decrypted = cipher.doFinal(encrypted);
    }
    catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    }
    catch (NoSuchPaddingException e) {
        e.printStackTrace();
    }
    catch (InvalidKeyException e) {
        e.printStackTrace();
    }
    catch (IllegalBlockSizeException e) {
        e.printStackTrace();
    }
    catch (BadPaddingException e) {
        e.printStackTrace();
    }
    catch (NoSuchProviderException e) {
        e.printStackTrace();
    }
    return new String(decrypted);
} 
```

logcat中的错误：

```
03-23 10:13:19.706: E/Error(427): Error: java.lang.ClassNotFoundException: com.android.org.bouncycastle.jce.provider.JCERSAPrivateCrtKey 
```

你有什么想法，我怎样才能让它与 android 2.2 一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:48:27.350

好吧，如果它适用于 4.1+ 但不适用于 2.2，我猜它是 2.2 之后包含的来自 android 的类。您可以通过尝试使用 android 2.2 编译一个使用此类的项目来测试这一点，看看是否可以。如果是这种情况，只需找到它并将其包含在您的项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:16:22.033

您最好使用该[`Key.getEncoded()`](http://docs.oracle.com/javase/6/docs/api/java/security/Key.html#getEncoded%28%29)方法来序列化密钥。[`Key.getFormat()`](http://docs.oracle.com/javase/6/docs/api/java/security/Key.html#getFormat%28%29)已经暗示 RSA 私钥应默认为 PKCS#8 编码。

然后，您可以使用[`PKCS8EncodedKeySpec`](http://docs.oracle.com/javase/6/docs/api/java/security/spec/PKCS8EncodedKeySpec.html)类和 an 的实例`"RSA"` [`KeyFactory`](http://docs.oracle.com/javase/6/docs/api/java/security/KeyFactory.html)来反序列化生成的字节数组。

序列化的密钥可能无法在不同的实现中正常工作`PrivateKey`（正如您现在已经发现的那样），并且 PKCS#8 是一个定义明确且经常使用的标准。

# javascript - 如何在Firefox的打印中隐藏网页网址

> ID：15585594
> 
> 赞同：4
> 
> 时间：2013-03-23T10:17:48.307
> 
> 标签：javascript, css, firefox

当我从 Firefox 打印网页时，它会自动添加页眉和页脚，包括网站标题、URL、日期和页码。

我以前查看过[IE 和 Opera](https://stackoverflow.com/questions/1960939/disabling-browser-print-options-headers-footers-margins-from-page)的这个问题以及[这个问题](https://stackoverflow.com/questions/2192806/can-i-remove-the-url-from-my-print-css-so-the-web-address-doesnt-print)，但我需要专门在 Firefox 中删除页眉/页脚。

是否可以使用 JavaScript 或 CSS 以编程方式隐藏页眉和页脚？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T10:25:43.543

如果您使用的是 firefox，请执行以下操作：

转到菜单上的“文件”->“页面设置”项，然后在对话框中选择“页边距和页眉/页脚”选项卡。

![在此处输入图像描述](../Images/e0355d4a80edc88a2acb81d49a472161.png)

您应该能够更改下拉菜单以将标题或 URL 设置为 –blank–，这将阻止它们打印。请注意，如果您愿意，也可以使用它来将页码放在顶部而不是底部。一般来说，这是没有标题/url的正常打印方法

# jquery - Html表格单元格编辑文本框不关注输入模糊事件不起作用

> ID：15585596
> 
> 赞同：1
> 
> 时间：2013-03-23T10:17:54.610
> 
> 标签：jquery, html

我有一个非常简单的表结构

```
<table width='50%' align='center' id='tabs'>
  <tr>
    <td>1.00</td>
    <td>5.23</td>
    <td>6.12</td>
  </tr>
  <tr>
    <td>2</td>
    <td>2.45</td>
    <td>2.45</td>
  </tr>
  <tr>
    <td>3.12</td>
    <td>2.98</td>
    <td>2.09</td>
  </tr>
</table> 
```

这是我的代码，它只允许在文本输入中输入数字，点后有两个位置，即它只允许像 2.12 这样的数字，问题是如果我点击表格单元格，文本框会出现在该单元格中，我可以编辑数字但是当我单击表格单元格，它应该专注于文本框，并且在编辑数字之后，当我完成编辑时，该模糊事件应该起作用。

```
$("table td").click( function(e){   
    if($(this).find('input').length){
         return ;   
    }        
    var input = $("<input type='text' size='5' />").val( $(this).text() );
    $(this).empty().append(input);
    $(this).find('input')
    .focus(function(e){
        if($(this).val()=='0.00' || $(this).val()=='0'){$(this).val('');}
    }).keydown(function(event){
         if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 190  || event.keyCode == 13 || 
              // Allow: Ctrl+A
             (event.keyCode == 65 && event.ctrlKey === true) || 
             // Allow: home, end, left, right
             (event.keyCode >= 35 && event.keyCode <= 39)) {
             // let it happen, don't do anything
             return;
        }
        else {
            // Ensure that it is a number and stop the keypress
            if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {
                event.preventDefault(); 
            }   }
    }).blur( function( e ){
                if($(this).val()!=""){
                    if (!isNaN(parseFloat($(this).val()))) {
                        var val1=parseFloat($(this).val()).toFixed(2);
                        $(this).val(val1);
                        $(this).parent('td').text( 
                              $(this).val()
                        );
                      }
                    }
                    else{
                            $(this).parent('td').text("0.00");
                    }
            });    
});

 $(function() {
        $('table tr td').hover(function() {
            $(this).css('background-color', '#FFFFB0');
        },
        function() {
            $(this).css('background-color', '#F4F4F4');
        });
    }); 
```

[**请在此处查看 JS FIDDLE**](http://jsfiddle.net/v7znh/19/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T10:33:34.900

当您单击一个字段时，这将使其成为焦点：

```
var input = $("<input type='text' size='5' />").val( $(this).text() );
$(this).empty().append(input);
input.focus(); 
```

这是您更新的 JsFiddle：

[**演示**](http://jsfiddle.net/v7znh/20/)

# mysql - 更改“Mysql Row size too large”的限制

> ID：15585602
> 
> 赞同：124
> 
> 时间：2013-03-23T10:18:44.370
> 
> 标签：mysql

如何更改限制

**行大小太大 (> 8126)。**将某些列更改为 TEXT 或 BLOB 或使用`ROW_FORMAT=DYNAMIC or ROW_FORMAT=COMPRESSED`可能会有所帮助。在当前行格式中，`BLOB`768 字节的前缀被内联存储。

**桌子：**

```
id  int(11) No       
name    text    No       
date    date    No       
time    time    No       
schedule    int(11) No       
category    int(11) No       
top_a   varchar(255)    No       
top_b   varchar(255)    No       
top_c   varchar(255)    No       
top_d   varchar(255)    No       
top_e   varchar(255)    No       
top_f   varchar(255)    No       
top_g   varchar(255)    No       
top_h   varchar(255)    No       
top_i   varchar(255)    No       
top_j   varchar(255)    No       
top_title_a varchar(255)    No       
top_title_b varchar(255)    No       
top_title_c varchar(255)    No       
top_title_d varchar(255)    No       
top_title_e varchar(255)    No       
top_title_f varchar(255)    No       
top_title_g varchar(255)    No       
top_title_h varchar(255)    No       
top_title_i varchar(255)    No       
top_title_j varchar(255)    No       
top_desc_a  text    No       
top_desc_b  text    No       
top_desc_c  text    No       
top_desc_d  text    No       
top_desc_e  text    No       
top_desc_f  text    No       
top_desc_g  text    No       
top_desc_h  text    No       
top_desc_i  text    No       
top_desc_j  text    No       
status  int(11) No       
admin_id    int(11) No 
```

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-03-23T10:32:24.967

这个问题也被问到了[serverfault](https://serverfault.com/a/326870)。

> 你可能想看看[这篇文章](https://www.percona.com/blog/2011/04/07/innodb-row-size-limitation/)，它解释了很多关于 MySQL 行大小的内容。请务必注意，即使您使用 TEXT 或 BLOB 字段，您的行大小仍可能超过 8K（InnoDB 的限制），因为它存储了页面中每个内联字段的前 768 个字节。
> 
> 解决这个问题的最简单方法是在 InnoDB中使用[Barracuda 文件格式。](https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_barracuda)这基本上通过仅存储指向文本数据的 20 字节指针而不是存储前 768 字节来完全解决问题。

* * *

适用于 OP 的方法是：

1.  将以下内容添加到部分`my.cnf`下的文件中`[mysqld]`。

    ```
    innodb_file_per_table=1
    innodb_file_format = Barracuda 
    ```

2.  **`ALTER`**要使用的表`ROW_FORMAT=COMPRESSED`。

    ```
    ALTER TABLE nombre_tabla
        ENGINE=InnoDB
        ROW_FORMAT=COMPRESSED 
        KEY_BLOCK_SIZE=8; 
    ```

* * *

上述方法仍有可能无法解决您的问题。这是**InnoDB引擎的一个**[已知（且已验证）错误](https://bugs.mysql.com/bug.php?id=77398)，目前的临时修复是回**退到 MyISAM**引擎作为临时存储。因此，在您的文件中：****`my.cnf`****

 ****```
internal_tmp_disk_storage_engine=MyISAM 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2014-08-30T02:54:36.250

我最近遇到了这个问题并以不同的方式解决了它。如果您正在运行 MySQL 5.6.20 版，则系统中存在已知错误。查看[MySQL 文档](http://dev.mysql.com/doc/refman/5.6/en/innodb-parameters.html#sysvar_innodb_log_file_size)

> 重要由于错误 #69477，大型外部存储的 BLOB 字段的重做日志写入可能会覆盖最近的检查点。为了解决这个错误，MySQL 5.6.20 中引入的补丁将重做日志 BLOB 写入的大小限制为重做日志文件大小的 10%。由于此限制，应将 innodb_log_file_size 设置为大于表行中最大 BLOB 数据大小加上其他可变长度字段（VARCHAR、VARBINARY 和 TEXT 类型字段）长度的 10 倍的值。

在我的情况下，有问题的 blob 表大约是 16MB。因此，我解决它的方法是在 my.cnf 中添加一行，以确保我有至少 10 倍的数量，然后是一些：

`innodb_log_file_size = 256M`

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2017-06-03T12:01:18.977

在您的 my.cnf 文件上设置以下内容并重新启动 mysql 服务器。

```
innodb_strict_mode=0 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2015-05-29T19:18:03.773

如果您可以切换 ENGINE 并使用 MyISAM 而不是 InnoDB，那应该会有所帮助：

`ENGINE=MyISAM`

MyISAM 有两个注意事项（可以说更多）：

1.  你不能使用事务。
2.  您不能使用外键约束。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2018-06-01T16:15:16.373

我有同样的问题，这为我解决了：

```
ALTER TABLE `my_table` ROW_FORMAT=DYNAMIC; 
```

来自 MYSQL[文档](https://dev.mysql.com/doc/refman/5.6/en/innodb-row-format-dynamic.html)：

> DYNAMIC 行格式保持了在合适的情况下将整行存储在索引节点中的效率（就像 COMPACT 和 REDUNDANT 格式一样），但是这种新格式避免了用大量数据字节填充 B-tree 节点的问题长列。DYNAMIC 格式基于这样一种思想，即如果长数据值的一部分在页外存储，则将所有值存储在页外通常是最有效的。使用 DYNAMIC 格式，较短的列可能会保留在 B 树节点中，从而最大限度地减少任何给定行所需的溢出页数。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2013-07-09T09:58:05.420

我想分享一个很棒的答案，它可能会有所帮助。学分 Bill Karwin 在这里看到[https://dba.stackexchange.com/questions/6598/innodb-create-table-error-row-size-too-large](https://dba.stackexchange.com/questions/6598/innodb-create-table-error-row-size-too-large)

它们因 InnoDB 文件格式而异。目前有 2 种格式，称为 Antelope 和 Barracuda。

中央表空间文件 (ibdata1) 始终采用 Antelope 格式。如果您使用 file-per-table，您可以通过在 my.cnf 中设置 innodb_file_format=Barracuda 使单个文件使用 Barracuda 格式。

**基本点：**

1.  一页 16KB 的 InnoDB 数据必须至少包含两行数据。此外，每个页面都有一个页眉和一个页脚，其中包含页面校验和和日志序列号等。这就是您获得每行小于 8KB 的限制的地方。

2.  INTEGER、DATE、FLOAT、CHAR 等固定大小的数据类型存储在此主数据页上，并计入行大小限制。

3.  可变大小的数据类型（如 VARCHAR、TEXT、BLOB）存储在溢出页上，因此它们不完全计入行大小限制。在 Antelope 中，最多 768 字节的此类列除了存储在溢出页上之外，还存储在主数据页上。梭子鱼支持动态行格式，因此它可能只在主数据页上存储一个 20 字节的指针。

4.  可变大小数据类型也以 1 个或多个字节为前缀来编码长度。InnoDB 行格式也有一个字段偏移数组。因此，在他们的 wiki 中或多或少地记录了一个内部结构。

梭子鱼还支持 ROW_FORMAT=COMPRESSED 以提高溢出数据的存储效率。

我还必须评论说，我从未见过精心设计的表格超过行大小限制。您违反了第一范式的重复组条件，这是一种强烈的“代码气味”。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-04-10T13:13:30.300

花了几个小时后，我找到了解决方案：只需在 MySQL 管理员中运行以下 SQL 即可将表转换为 MyISAM：

```
USE db_name;
ALTER TABLE table_name ENGINE=MYISAM; 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-11-01T06:09:50.057

InnoDB 表的最大行大小（适用于本地存储在数据库页面中的数据）对于 4KB、8KB、16KB 和 32KB**略小于半页**

对于 16kb 页面（默认），我们可以计算：

```
Slightly less than half a page 8126 / Number of bytes to threshold for overflow 767 = 10.59 fields of 767 bytes maximum 
```

基本上，您可以通过以下方式最大化一行：

*   11 个 varchar 字段 > 767 个字符（latin1 = 每个字符 1 个字节）或
*   11 个 varchar 字段 > 255 个字符（mysql 上的 utf-8 = 每个字符 3 个字节）。

请记住，如果字段大于 767 字节，它只会溢出到溢出页面。如果 767 字节的字段太多，它将崩溃（超过 max row_size）。latin1 不常见，但如果开发人员不小心，则很有可能使用 utf-8。

对于这种情况，我认为您可能会将 innodb_page_size 提高到 32kb。

在 my.cnf 中：

```
innodb_page_size=32K 
```

参考：

*   [https://dev.mysql.com/doc/refman/8.0/en/column-count-limit.html#row-size-limits](https://dev.mysql.com/doc/refman/8.0/en/column-count-limit.html#row-size-limits)
*   [https://medium.com/@adamhooper/in-mysql-never-use-utf8-use-utf8mb4-11761243e434](https://medium.com/@adamhooper/in-mysql-never-use-utf8-use-utf8mb4-11761243e434)
*   [https://mariadb.com/kb/en/library/innodb-compact-row-format/#overflow-pages-with-the-compact-row-format](https://mariadb.com/kb/en/library/innodb-compact-row-format/#overflow-pages-with-the-compact-row-format)
*   [Innodb 页面大小设置](https://stackoverflow.com/questions/55843820/innodb-page-size-setting)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-02-04T19:19:25.047

当我尝试从不同的服务器恢复备份的 mysql 数据库时遇到了这个问题。为我解决这个问题的方法是向 my.conf 添加某些设置（如上面的问题）并另外更改 sql 备份文件：

**第 1 步：** 在 my.conf 中添加或编辑以下行：

```
innodb_page_size=32K
innodb_file_format=Barracuda
innodb_file_per_table=1 
```

**步骤 2**将 ROW_FORMAT=DYNAMIC 添加到导致此错误的表的 sql 备份文件中的表创建语句中：

```
DROP TABLE IF EXISTS `problematic_table`;
/*!40101 SET @saved_cs_client = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `problematic_table` (
`id` bigint(20) NOT NULL AUTO_INCREMENT,
  ...
PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 ROW_FORMAT=DYNAMIC; 
```

上面的重要变化是**ROW_FORMAT=DYNAMIC;** （未包含在原始 sql 备份文件中）

帮助我解决此问题的来源：[MariaDB and InnoDB MySQL Row size too large](https://zerosandones.co.uk/mysql-row-size-too-large-8126/)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-11-23T12:17:14.853

您需要对`my.ini`文件进行一些更改

在 [mysqld] 下添加

```
innodb_strict_mode=0 
```

更新这两行

```
innodb_log_file_size=256M
innodb_log_buffer_size=256M 
```

`innodb_strict_mode`：启用后，某些 InnoDB 警告会变成错误。

参考：[https ://mariadb.com/kb/en/innodb-strict-mode/](https://mariadb.com/kb/en/innodb-strict-mode/)

`innodb_log_file_size`&`innodb_log_buffer_size`需要增加尺寸。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-10-12T16:15:15.070

其他答案解决了所提出的问题。我将解决根本原因：糟糕的架构设计。

不要跨列展开数组。在这里，您有 3*10 列应该在新表中变成 10 行 3 列（加`id`号等）

你的`Main`桌子只有

```
id  int(11) No       
name    text    No       
date    date    No       
time    time    No       
schedule    int(11) No       
category    int(11) No       
status  int(11) No       
admin_id    int(11) No 
```

您的额外表格 ( `Top`) 会有

```
id  int(11) No          -- for joining to Main
seq TINYINT UNSIGNED    -- containing 1..10
img   varchar(255)    No       
title varchar(255)    No       
desc  text    No    
PRIMARY KEY(id, seq)    -- so you can easily find the 10 top_titles 
```

`Top`每个`id`. _

这消除了您原来的问题，并清理了架构。（这不是“规范化”，正如一些评论中所讨论的那样。）

不要切换到 MyISAM *；*它正在消失。
别担心`ROW_FORMAT`。

您将需要更改代码来`JOIN`处理多行而不是多列。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-09-30T12:36:48.410

我在 AWS RDS 上使用 MySQL 5.6。我在参数组中更新了以下内容。

```
innodb_file_per_table=1
innodb_file_format = Barracuda 
```

我必须重新启动数据库实例才能使参数组更改生效。

此外，不支持 ROW_FORMAT=COMPRESSED。我使用如下 DYNAMIC 并且效果很好。

```
ALTER TABLE nombre_tabla ENGINE=InnoDB ROW_FORMAT=DYNAMIC KEY_BLOCK_SIZE=8 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-12-03T03:04:35.033

当我销毁我的 Laravel Homestead (Vagrant) 盒子并重新开始时，我一直遇到这个问题。

1.  从命令行 SSH 进入该框`homestead ssh`

2.  转到 my.cnf 文件`sudo vi /etc/mysql/my.cnf`

3.  将以下行添加到文件底部（！includedir 下方）

    `[mysqld]`

    `innodb_log_file_size=512M`

    `innodb_strict_mode=0`

4.  将更改保存到 my.cnf，然后重新加载 MYSQL`sudo service mysql restart`

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-09-13T13:24:38.873

要解决此问题，您必须在 phpmyadmin 中将 innodb 更改为 myisam。看这张图片。

[![在此处输入图像描述](../Images/30e35c569020898b77919d60f43ecf79.png)](https://i.stack.imgur.com/9S0vH.jpg)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-07-10T08:39:04.053

如果这发生在具有许多列的 SELECT 上，原因可能是 mysql 正在创建一个临时表。如果此表太大而无法放入内存，它将使用其默认的临时表格式（即 InnoDB）将其存储在磁盘上。在这种情况下，适用 InnoDB 大小限制。

然后，您有 4 个选项：

1.  更改 innodb 行大小限制，如另一篇文章中所述，这需要重新初始化服务器。
2.  更改您的查询以包含更少的列或避免导致它创建一个临时表（即通过删除 order by 和 limit 子句）。
3.  将**max_heap_table_size**更改为很大，以便结果适合内存并且不需要写入磁盘。
4.  将默认临时表格式更改为 MISAM，这就是我所做的。my.cnf 中的更改：

    ```
    internal_tmp_disk_storage_engine=MYISAM 
    ```

重启mysql，查询正常。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-05-20T19:03:32.070

在**Mysql 5.6**上：

> 执行以下 SQL 命令：

```
Mysql > SET GLOBAL innodb_file_format=Barracuda; 
Mysql > ALTER TABLE `name_of_my_table_here` ENGINE=InnoDB ROW_FORMAT=DYNAMIC KEY_BLOCK_SIZE=8; 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-06-14T09:01:05.517

我也遇到了同样的问题。我通过执行以下sql解决了这个问题：

```
ALTER ${table} ROW_FORMAT=COMPRESSED; 
```

但是，我认为您应该了解[Row Storage](https://dev.mysql.com/doc/refman/5.7/en/innodb-row-format.html)。
列有两种：**可变长度列**（如 VARCHAR、VARBINARY 以及 BLOB 和 TEXT 类型）和**固定长度列**。它们存储在不同类型的页面中。

> 可变长度列是此规则的一个例外。诸如 BLOB 和 VARCHAR 之类的列太长而无法容纳在 B 树页面上，它们存储在单独分配的磁盘页面上，称为溢出页面。我们将此类列称为页外列。这些列的值存储在溢出页的单链表中，每个这样的列都有自己的一个或多个溢出页列表。在某些情况下，长列值的全部或一个前缀都存储在 B-tree 中，以避免浪费存储并消除读取单独页面的需要。

当设置 ROW_FORMAT 的目的是

> 当使用 ROW_FORMAT=DYNAMIC 或 ROW_FORMAT=COMPRESSED 创建表时，InnoDB 可以完全离页存储长可变长度列值（对于 VARCHAR、VARBINARY 以及 BLOB 和 TEXT 类型），聚集索引记录仅包含 20-指向溢出页的字节指针。

想了解更多关于[动态和压缩行格式的信息](https://dev.mysql.com/doc/refman/5.7/en/innodb-row-format-dynamic.html)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-09-28T08:42:40.380

这是给感兴趣的人的简单提示：

从 Debian 9 升级到带有 10.3.17-MariaDB 的 Debian 10 后，我在 Joomla 数据库中遇到了一些错误：

[警告] InnoDB：无法`field`在表中添加字段`database`。`table`因为添加后，行大小为 8742，大于索引叶页上记录的最大允许大小 (8126)。

以防万一，我在 /etc/mysql/mariadb.conf.d/50-server.cnf 中设置了 innodb_default_row_format = DYNAMIC （无论如何它都是默认的）

然后，我使用 phpmyadmin 为 Joomla 数据库中的所有表运行“优化表”。我认为 phpmyadmin 在此过程中完成的表格重建有所帮助。如果您碰巧安装了 phpmyadmin，只需单击几下即可。****

# extjs - Extjs分页错误

> ID：15585605
> 
> 赞同：1
> 
> 时间：2013-03-23T10:19:18.153
> 
> 标签：extjs, extjs4, extjs3

使用 ExtJs，我正在测试将接收到的 xml 数据传输到特定的网格。我制作了一个包含 10 个输出值的简单文本文件，并从分页工具栏中将 pageSize 设置为 5。

也就是说，10 个值的所需输出可能是每页（2 页）上的 5 个值。它正确分为 2 页，但每页有 10 个相同的值。

出现上述问题的原因是什么？我希望您的意见将成为可能的解决方案。谢谢！

> 索引.php

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE> New Document </TITLE>
<link rel="stylesheet" type="text/css" href="resources/css/ext-all.css" />
<script src="resources/js/ext-base.js"></script>
<script src="resources/js/ext-all-debug.js"></script>
<script src="resources/ux/BufferView.js"></script>
<script type="text/javascript">

    Ext.onReady(function(){ 
         var mm = Ext.data.Record.create([  
          {name: 'mb_id'},
          {name: 'mb_sex'},
          {name: 'mb_name'}
         ]);

         var store = new Ext.data.Store({
          proxy: new Ext.data.HttpProxy({
           method:'GET',
           url:'./grid2.php'
          }),  

          reader: new Ext.data.XmlReader(
                {
                    record: 'Item'  
                    },  [
                            'mb_id'
                            ,'mb_sex'
                            ,'mb_name'
                         ]  
                    ),
                    autoLoad: {params:{start: 0, limit: 5}}

         });

         var grid = new Ext.grid.GridPanel({ 
            renderTo: document.body, 
            frame:true, 
            title: 'information', 
            height:300, 
            width:516, 
            store: store, 
            columns: [ 
                {header: "id", dataIndex: 'mb_id'},//, renderer: cover_image
                {header: "sex", dataIndex: 'mb_sex',width:100},
                {header: "name", dataIndex: 'mb_name',width:100}
            ],
            bbar:new Ext.PagingToolbar({
            store:store,
            pageSize:5,
            displayInfo:true
            })
        }); 
    }); 

</script>
</HEAD>
<BODY>
</BODY>
</HTML> 
```

> 数据.php

```
 header("Content-type: application/xml");    //;charset=utf-8
    echo "<?xml version=\"1.0\" encoding=\"UTF-8\" ?>";

    echo "<root>";

    //전체 데이터 레코드 값 기록
    for($i=0;$i<10;$i++)
    {

            echo "<Record>";
            echo "<Time>".$i."</Time>";
            echo "<Name>".$i."</Name>";
            echo "</Record>";
    }
    echo "</root>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:33:22.243

正如蒂姆建议的那样，`pageSize`从分页工具栏中删除参数，然后将其添加到您的`store`：

```
var store = new Ext.data.Store({
    pagesize: 5,
    proxy: new Ext.data.HttpProxy({
        method:'GET',
        url:'./grid2.php'
    })
}) ... 
```

# iphone - 我想在不使用 For Loop 的情况下获得特定的关键值

> ID：15585607
> 
> 赞同：-5
> 
> 时间：2013-03-23T10:19:28.477
> 
> 标签：iphone, objective-c, nsdictionary

```
"Setting":  "[{"WIDTH":"150",
      "HEIGHT":"140", 
      "IS_REQUIRED":"YES",
      "TOP_MARGIN":"30" , 
      "LEFT_MARGIN":"80",
      "LINEBREAK":"NO",
      "DEFAULT":"NULL"
    }]" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T10:21:28.357

你可以得到它：

```
 NSString *string=yourDict[@"WIDTH"]; 
```

或者，

```
NSString *string=[yourDict objectForKey:@"WIDTH"]; 
```

检查[NSDictionary 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/Reference/Reference.html)和新[的 Objective-C 文字](http://clang.llvm.org/docs/ObjectiveCLiterals.html)

请开始学习Objective-C，可能来自Apple Documentation。

* * *

编辑：

当您更改问题并添加“设置：”时。

现在你需要使用：

```
NSString *string=yourDict[@"Setting"][@"WIDTH"]; 
```

编辑1：

我认为你有对象数组。每个对象包含一组`WIDTH`等`LINEBREAK`。

```
NSString *string=yourDict[@"Setting"][0][@"WIDTH"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T10:47:03.463

尝试一下 ：

```
 NSArray *itemObjects = (NSArray *) [resultDict objectForKey:@"Setting"];
    for (int i=0;i<[itemObjects count];i++) {
            NSDictionary *rssDict=[itemObjects objectAtIndex:i];
            NSString *str1=[rssDict objectForKey:@"WIDTH"];
            NSString *str2=[rssDict objectForKey:@"HEIGHT"];
            NSString *str3=[rssDict objectForKey:@"IS_REQUIRED"];
            NSString *str4=[rssDict objectForKey:@"LEFT_MARGIN"];

     } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T11:12:42.193

你`mtmDict[@"field_setting"]`不是一个数组或字典，而是一个带有 JSON 数据的***字符串。***您可以使用`NSJSONSerialization`将该字符串转换为数组并访问该值：

```
NSString *jsonString = mtmDict[@"field_setting"];
NSData *jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:NULL];

NSLog(@"%@", jsonArray[0][@"WIDTH"]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T10:36:45.163

```
NSLog(@"%@",[[youDic objectForKey:@"Setting"] objectForKey:@"WIDTH"]); 
```

**或者**

```
 NSLog(@"%@",[[[youDic objectForKey:@"Setting"] objectAtIndex:0] objectForKey:@"WIDTH"]); 
```

# java - Git 创建一个子文件夹

> ID：15585610
> 
> 赞同：-2
> 
> 时间：2013-03-23T10:19:37.330
> 
> 标签：java, git, github, directory, bitbucket

我刚开始使用 Bitbucket，但我在 Github 上遇到了同样的问题。我正在将 Eclipse 与 EGit 一起使用。

我的问题是当我提交和推送时：我没有直接看到“src”，但有一个文件夹，它位于：[https ://bitbucket.org/Knux14/screenup/src/](https://bitbucket.org/Knux14/screenup/src/)

我需要先单击“ScreenUp”，而不是拥有我的 src 文件夹，然后我才能看到 src。我推错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:22:21.170

您只需将**包含**整个项目的文件夹添加到 Git，所以现在您所有的东西都在子文件夹（“ScreenUp”）中。

你可以继续这样使用它，这不是什么大问题。但如果它让您感到困扰，只需删除存储库并将项目从版本控制中删除（谷歌会提供帮助），然后再次添加。

# zend-framework - zend lucene 如何在关键字字段上设置优先级

> ID：15585622
> 
> 赞同：1
> 
> 时间：2013-03-23T10:20:55.363
> 
> 标签：zend-framework, search, lucene, indexing

是否可以为某些关键字字段设置永久奖励？我有产品名称字段、id 关键字字段和优先关键字字段。我想设置结果的相关性，例如搜索的相关性+结果的优先级。

```
 //id of product
  $doc->addField(Zend_Search_Lucene_Field::Keyword('pk', $this->getId(), "utf-8"));

  //i want set permanent revelance bonus on that field
  $doc->addField(Zend_Search_Lucene_Field::Keyword('priotity', "priority", "utf-8"));

  //field for search
  $doc->addField(Zend_Search_Lucene_Field::UnStored('description', $this->getDescription(), "utf-8")); 
```

例如，我搜索苹果 iphone，结果必须是：最大重合最大优先级、最大重合下一个优先级、最大重合下一个优先级

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:37:02.053

是的，可以在评分的情况下为某个字段设置永久奖励。

这是[教程](http://davedash.com/2007/05/29/boosting-terms-in-zend-search-lucene/)

我不确定这个 zend Lucene，但是[Field.setBoost()](http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/document/Field.html#setBoost%28float%29)方法是我们在普通 Lucene 中所做的。我确信使用 zend Lucene 必须有一种等效的方法，因为这是一个基本功能。

以下是上述教程的片段。

```
 $field = Zend_Search_Lucene_Field::Text('firstname', $this->getFirstname());
    $field->boost = 1.5; 
```

我不能保证上述代码段的有效性，但我希望它对你有所帮助。

# java - 一次性 MBean

> ID：15585623
> 
> 赞同：1
> 
> 时间：2013-03-23T10:21:11.387
> 
> 标签：java

我如何实现一次性 MBean，它不会阻止它正在监视的资源被垃圾收集？
假设我编写了虚拟统计 MBean，但它正在监视的类不是系统中的单例。一旦资源不再使用，我希望 MBean 自动取消注册。

任何想法如何实现这一目标？任何现有的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-24T12:40:39.530

用法

```
registerWeakMBean("com.company:type=connection,name=" +
getClass().getSimpleName(), connectionStatMBeanImpl, ConnectionStatMBean.class); 
```

实施

```
package util;

import java.io.IOException;
import java.lang.management.ManagementFactory;
import java.lang.ref.WeakReference;
import java.net.InetAddress;
import java.net.ServerSocket;
import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;

import javax.management.InstanceAlreadyExistsException;
import javax.management.MBeanServer;
import javax.management.ObjectInstance;
import javax.management.ObjectName;
import javax.management.StandardMBean;

import org.apache.log4j.Logger;

import sun.management.Agent;

public class JmxUtils {
    private static Logger log = Logger.getLogger(JmxUtils.class);
    private static Map<Object, String> weakMBeans = new ConcurrentHashMap<Object, String>();
    static {
        verifyJmxAgentStarted();
    }

    private static final int getAvailablePort() throws IOException {
        ServerSocket s = new ServerSocket(0);
        int result = s.getLocalPort();
        s.close();
        return result;
    }

    /**
     * @param objName
     *            domain:type=value[,name=value]
     * @param implementation
     * @param mbeanInterface
     * @see ObjectName
     * @see StandardMBean
     */
    public static final <I> ObjectInstance registerMBean(String objName, I implementation, Class<I> mbeanInterface) {
        int counter = 0;
        String uniqueSuffix = "";
        final MBeanServer mbs = ManagementFactory.getPlatformMBeanServer();
        while (true) {
            try {
                final ObjectName name = new ObjectName(objName + uniqueSuffix);
                final StandardMBean mbean = new StandardMBean(implementation, mbeanInterface);
                return mbs.registerMBean(mbean, name);
            } catch (final InstanceAlreadyExistsException e) {
                uniqueSuffix = "" + ++counter;
            } catch (final Exception e) {
                throw new Error(e);
            }
        }
    }

    /**
     * Weak MBean will not prevent resource it is monitoring from been garbage collected. MBean will be automatically unregistered.
     * 
     * @param objName
     *            domain:type=value[,name=value]
     * @param implementation
     * @param mbeanInterface
     * @see ObjectName
     * @see StandardMBean
     * @see WeakReference
     */
    public static final <I> ObjectInstance registerWeakMBean(String objName, I implementation, Class<I> mbeanInterface) {
        I proxy = DisposableWeakReference.newWeakReferenceProxy(new DisposableWeakReference<I>(implementation) {
            @Override
            public void dispose(Object disposable) {
                unregisterMBean(weakMBeans.remove(disposable));
            }
        }, mbeanInterface);
        ObjectInstance instance = registerMBean(objName, proxy, mbeanInterface);
        weakMBeans.put(proxy, instance.getObjectName().getCanonicalName());
        return instance;
    }

    public static <T> T newJmxClient(Class<T> clazz, String objectName, String serviceUrl) {
        return createJmxClient(clazz, objectName, serviceUrl, null, null);
    }

    public static <T> T newJmxClient(Class<T> clazz, String objectName, String serviceUrl, final String user, final String pass) {
        try {
            JMXServiceURL jmxServiceUrl = new JMXServiceURL(serviceUrl);
            Map<String, ?> env = user == null ? null : new HashMap<String, Object>() {{
                put(JMXConnector.CREDENTIALS, new String[] {user, pass});
            }};
            JMXConnector jmxc = JMXConnectorFactory.connect(jmxServiceUrl, env);
            MBeanServerConnection mbsc = jmxc.getMBeanServerConnection();
            ObjectName mbeanName = new ObjectName(objectName);
            return JMX.newMBeanProxy(mbsc, mbeanName, clazz, true);
        } catch (IOException | MalformedObjectNameException e) {
            throw new RuntimeException("Can not create client for remote JMX " + serviceUrl, e);
        }
    }

    /**
     * @param objName
     * @see ObjectName
     */
    public static final void unregisterMBean(String objName) {
        try {
            final MBeanServer mbs = ManagementFactory.getPlatformMBeanServer();
            final ObjectName name = new ObjectName(objName);
            mbs.unregisterMBean(name);
        } catch (final Exception e) {
            throw new RuntimeException(e);
        }
    }

    private static final void verifyJmxAgentStarted() {
        try {
            String port = System.getProperty("com.sun.management.jmxremote.port");
            if (port == null) {
                port = String.valueOf(getAvailablePort());
                System.setProperty("com.sun.management.jmxremote.port", port);
                System.setProperty("com.sun.management.jmxremote.ssl", "false");
                System.setProperty("com.sun.management.jmxremote.authenticate", "false");

                Agent.startAgent();
            }
            log.info(InetAddress.getLocalHost().getCanonicalHostName() + ":" + port);
        } catch (Exception e) {
            throw new Error(e);
        }
    }
} 
```

* * *

```
package util;

import java.lang.ref.ReferenceQueue;
import java.lang.ref.WeakReference;
import java.lang.reflect.InvocationHandler;
import java.lang.reflect.Method;
import java.util.WeakHashMap;

/**
 * Disposable weak reference calls you back when referent has been disposed. You can also create proxy to the referent to emulate direct access.
 * 
 * <pre>
 * public class Example {
 *     public interface I {
 *         // interface referent is implementing to create a proxy
 *     }
 * 
 *     public static final class T implements I {
 *         public String toString() {
 *             return "blah";
 *         }
 *     }
 * 
 *     private WeakReference&ltT&gt wr;
 *     private I wrp;
 *     private List&ltObject&gt list = new LinkedList&ltObject&gt();
 * 
 *     private void testWeakRef() {
 *         T o = new T();
 *         wr = new DisposableWeakReference&ltT&gt(o) {
 *             public void dispose(Object disposable) {
 *                 list.remove(disposable);
 *             }
 *         };
 *         list.add(wr);
 *         wrp = DisposableWeakReference.newWeakReferenceProxy(new DisposableWeakReference&ltI&gt(o) {
 *             public void dispose(Object disposable) {
 *                 list.remove(disposable);
 *                 Example.this.wrp = null;
 *             }
 *         }, I.class);
 *         list.add(wrp);
 *     }
 * 
 *     public static void main(final String[] args) throws Exception {
 *         Example exmple = new Example();
 *         exmple.testWeakRef(); // try to replace with exact implementation
 * 
 *         System.out.println("exmple.wr.get() " + exmple.wr.get()); // blah
 *         System.out.println("exmple.wrp " + exmple.wrp); // blah
 *         System.out.println("exmple.list.contains(exmple.wr) " + exmple.list.contains(exmple.wr)); // true
 *         System.out.println("exmple.list.contains(exmple.wrp) " + exmple.list.contains(exmple.wrp)); // true
 *         System.gc();
 *         Thread.sleep(10);
 *         System.out.println("exmple.wr.get() " + exmple.wr.get()); // null
 *         System.out.println("exmple.wrp " + exmple.wrp); // null or exception
 *         System.out.println("exmple.list.contains(exmple.wr) " + exmple.list.contains(exmple.wr)); // false
 *         System.out.println("exmple.list.contains(exmple.wrp) " + exmple.list.contains(exmple.wrp)); // false
 *     }
 * }
 * 
 * <pre>
 * 
 * @param <T> weak reference referent type
 * @author Mykhaylo Adamovych
 */
@SuppressWarnings({ "rawtypes" })
public abstract class DisposableWeakReference<T> extends WeakReference<T> {
    public static class DisposedException extends RuntimeException {
        private static final long serialVersionUID = -1176608195614694732L;

        public DisposedException() {
            super();
        }

        public DisposedException(String message) {
            super(message);
        }

        public DisposedException(String message, Throwable cause) {
            super(message, cause);
        }

        public DisposedException(Throwable cause) {
            super(cause);
        }
    }

    private static class ReferenceProxy<T> implements InvocationHandler {
        private final DisposableWeakReference<T> reference;

        public ReferenceProxy(DisposableWeakReference<T> reference) {
            this.reference = reference;
        }

        @Override
        public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
            if ("equals".equals(method.getName()))
                return proxy == args[0];
            else if ("hashCode".equals(method.getName()))
                return hashCode();
            T referent = reference.get();
            if (referent == null)
                throw new DisposedException("Referent has been disposed.");
            return method.invoke(referent, args);
        }
    }

    private static class WeakReferenceDisposerThread extends Thread {
        WeakReferenceDisposerThread() {
            super("Weak Reference Disposer");
        }

        @Override
        public void run() {
            while (true)
                try {
                    DisposableWeakReference<?> reference = (DisposableWeakReference<?>) queue.remove();
                    Object disposable = reference.proxy;
                    if (disposable == null)
                        disposable = reference;
                    reference.dispose(disposable);
                } catch (Throwable e) {
                    // ignore any exception while disposing
                }
        }
    }

    private static final ReferenceQueue queue = new ReferenceQueue();

    static {
        Thread disposer = new WeakReferenceDisposerThread();
        disposer.setPriority(Thread.MAX_PRIORITY - 2);
        disposer.setDaemon(true);
        disposer.start();
    }

    /**
     * You can use referent directly without {@link #get()}. Runtime exception will rise in case referent has been disposed by GC. You can use
     * {@link #dispose(Object)} to deal with proxy also.
     * 
     * @param reference
     *            disposable weak reference
     * @param clazz
     *            referent interface class
     * @param <T>
     *            referent type
     * @param <I>
     *            referent interface to create a proxy
     * @return referent proxy using weak reference
     */
    public static <I> I newWeakReferenceProxy(DisposableWeakReference<I> reference, Class<I> clazz) {
        I proxy = ReflectUtils.<I>newProxyInstance(new ReferenceProxy<I>(reference), clazz);
        reference.proxy = proxy;
        return proxy;
    }

    private Object proxy;

    public DisposableWeakReference(T referent) {
        super(referent, queue);
    }

    /**
     * Remove this weak reference wrapper from whatever when referent has been garbage collected.
     * 
     * @param disposable
     *            either this reference instance or proxy instance created by {@link #newWeakReferenceProxy(DisposableWeakReference, Class)}
     * @see WeakHashMap
     */
    public abstract void dispose(Object disposable);
} 
```

# hadoop - 文件 jobtracker.info 只能复制到 0 个节点，而不是 1 个

> ID：15585630
> 
> 赞同：6
> 
> 时间：2013-03-23T10:21:52.540
> 
> 标签：hadoop

我正在尝试`Hadoop`在`Fedora 17`. 当我给出`/bin/star-all.sh`命令时，守护进程正在主节点和从节点上启动。但是当我在主节点上查看数据节点的日志文件时，我得到以下 EROOR

> 错误 org.apache.hadoop.security.UserGroupInformation: PriviledgedActionException as:hadoop1 原因:java.io.IOException:**文件 /home/hadoop1/mapred/system/jobtracker.info 只能复制到 0 个节点，而不是 1 个**
> 
> 2013-03-23 15:37:08,205 INFO org.apache.hadoop.ipc.Server：9100 上的 IPC 服务器处理程序 5，调用 addBlock（/home/hadoop1/mapred/system/jobtracker.info，DFSClient_-838454688，null）从 127.0.0.1:40173：错误：java.io.IOException：文件 /home/hadoop1/mapred/system/jobtracker.info 只能复制到 0 个节点，而不是 1 个 java.io.IOException：文件 /home/hadoop1 /mapred/system/jobtracker.info 只能复制到 0 个节点，而不是 org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:1558) 的 org.apache.hadoop.hdfs 的 1 个节点.server.namenode.NameNode.addBlock(NameNode.java:696) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl。org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563) 的 java.lang.reflect.Method.invoke(Method.java:601) 的调用(DelegatingMethodAccessorImpl.java:43) org.apache .hadoop.ipc.Server$Handler$1.run(Server.java:1388) at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384) at java.security.AccessController.doPrivileged(Native方法）在 javax.security.auth.Subject.doAs(Subject.java:415) 在 org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121) 在 org.apache.hadoop.ipc.Server$Handler .run(Server.java:1382)在 org.apache.hadoop.security.UserGroupInformation.doAs( UserGroupInformation.java:1121) 在 org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382)在 org.apache.hadoop.security.UserGroupInformation.doAs( UserGroupInformation.java:1121) 在 org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382)

我也在尝试运行 wordcound 程序。使用命令将数据复制到 HDFS 时

**$bin/hadoop dfs -copyFromLocal /home/hadoop1/Documents/wordcount/ /home/hadoop1/hdfs/data** 我得到以下错误

> WARN hdfs.DFSClient: DataStreamer Exception: org.apache.hadoop.ipc.RemoteException: java.io.IOException: File /home/hadoop1/hdfs/data/wordcount/pg20417.txt 只能复制到 0 个节点，而不是 1 个在 org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:1558) 在 org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.java:696) 在 sun.reflect .GeneratedMethodAccessor5.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at org.apache.hadoop.ipc.RPC $Server.call(RPC.java:563) at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388) at org.apache.hadoop.ipc.Server$Handler$1.run(Server .java:1384) 在 java.security.AccessController。doPrivileged(Native Method) at javax.security.auth.Subject.doAs(Subject.java:415) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121) at org.apache.hadoop.ipc。服务器$Handler.run(Server.java:1382)

```
at org.apache.hadoop.ipc.Client.call(Client.java:1070)
at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
at $Proxy1.addBlock(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:82)
at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:59)
at $Proxy1.addBlock(Unknown Source)
at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.locateFollowingBlock(DFSClient.java:3510)
at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.nextBlockOutputStream(DFSClient.java:3373)
at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.access$2600(DFSClient.java:2589)
at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$DataStreamer.run(DFSClient.java:2829) 
```

> 23 年 3 月 3 日 15:41:05 警告 hdfs.DFSClient：块 null 坏数据节点 [0] 节点的错误恢复 == null 13/03/23 15:41:05 警告 hdfs.DFSClient：无法获取块位置。源文件“/home/hadoop1/hdfs/data/wordcount/pg20417.txt” - Aborting... copyFromLocal: java.io.IOException: File /home/hadoop1/hdfs/data/wordcount/pg20417.txt 只能被复制到 0 个节点，而不是 1 13/03/23 15:41:05 错误 hdfs.DFSClient: 异常关闭文件 /home/hadoop1/hdfs/data/wordcount/pg20417.txt : org.apache.hadoop.ipc.RemoteException: java.io.IOException：文件 /home/hadoop1/hdfs/data/wordcount/pg20417.txt 只能复制到 0 个节点，而不是 org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem .java:1558) 在 org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.java:

在这方面的帮助表示赞赏..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:39:23.247

我设法解决了这个问题......

步骤 I) 主节点和从节点机器上的防火墙处于活动状态。我通过以下命令禁用它“systemctl disable iptables.service”

第二步）我在slave的core-sites.xml配置文件中错误地将“hdfs://localhost:9100”分配给了“fs.default.name”。我将其更改为“hdfs://master:9100”

现在我的 Hadoop 集群已启动..

谢谢你克里斯的帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-22T23:41:57.993

我出现此错误的原因是磁盘空间不足（~200MB 不够）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T07:35:41.980

我删除了 HDFS 上的 jobtracker.info，然后它就可以工作了。Hadoop 似乎对其进行了改造

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-22T16:02:41.230

这个错误的另一个原因（我遇到过）是一个混乱的 /etc/hosts 文件导致 namenode 只在环回接口上监听。

这导致datanodes无法连接到namenode，并且没有达到复制级别作为副作用。有关更多详细信息，请参阅 [名称节点拒绝连接错误](https://stackoverflow.com/questions/7426865/hadoop-namenode-rejecting-connections-what-am-i-doing-wrong)。

# sql - 如何将逗号分隔的 NVARCHAR 转换为 SQL Server 2005 中的表记录？

> ID：15585632
> 
> 赞同：14
> 
> 时间：2013-03-23T10:22:14.623
> 
> 标签：sql, sql-server-2005

我有一个用逗号分隔的 id 列表，例如：

```
 1,17,25,44,46,67,88 
```

我想将它们转换为表记录（转换为临时表），例如

```
#tempTable

number_
--------
1
17
25
44
46
67
88 
```

可以使用**函数**，表值函数吗？

我为什么要这个？我想将 for`INNER JOIN`子句（进入存储过程）与另一个表一起使用，例如：

```
SELECT a,b,c FROM T1
INNER JOIN functionNameWhichReturnsTable 
ON functionNameWhichReturnsTable.number_ = T1.a 
```

我不能使用`IN`，因为我将使用接受 NVARCHAR 类型参数的存储过程。该参数将提供 id 列表。

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-23T10:26:56.190

单独的逗号分隔值可能重复[并存储在 sql server 的表中](https://stackoverflow.com/questions/14811316/separate-comma-separated-values-and-store-in-table-in-sql-server)。

请尝试从[Comma-Delimited Value 到 Table](http://www.sql-server-helper.com/functions/comma-delimited-to-table.aspx)的精确值：

```
CREATE FUNCTION [dbo].[ufn_CSVToTable] ( @StringInput VARCHAR(8000), @Delimiter nvarchar(1))
RETURNS @OutputTable TABLE ( [String] VARCHAR(10) )
AS
BEGIN

    DECLARE @String    VARCHAR(10)

    WHILE LEN(@StringInput) > 0
    BEGIN
        SET @String      = LEFT(@StringInput, 
                                ISNULL(NULLIF(CHARINDEX(@Delimiter, @StringInput) - 1, -1),
                                LEN(@StringInput)))
        SET @StringInput = SUBSTRING(@StringInput,
                                     ISNULL(NULLIF(CHARINDEX(@Delimiter, @StringInput), 0),
                                     LEN(@StringInput)) + 1, LEN(@StringInput))

        INSERT INTO @OutputTable ( [String] )
        VALUES ( @String )
    END

    RETURN
END
GO 
```

使用 XML 以其他方式检查需求：

```
DECLARE @param NVARCHAR(MAX)
SET @param = '1:0,2:1,3:1,4:0'

SELECT 
     Split.a.value('.', 'VARCHAR(100)') AS CVS  
FROM  
(
    SELECT CAST ('<M>' + REPLACE(@param, ',', '</M><M>') + '</M>' AS XML) AS CVS 
) AS A CROSS APPLY CVS.nodes ('/M') AS Split(a) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-24T10:59:22.673

这是一个不需要函数或 XML 的技巧。

基本上，字符串被转换为临时表的单个插入语句。

然后可以使用临时表进行进一步处理。

```
IF OBJECT_ID('tempdb..#tmpNum') IS NOT NULL
      DROP TABLE #tmpNum;

CREATE TABLE #tmpNum (num int);

DECLARE @TEXT varchar(max) = '1,17,25,44,46,67,88';

DECLARE @InsertStatement varchar(max);
SET  @InsertStatement = 'insert into #tmpNum (num) values ('+REPLACE(@TEXT,',','),(')+');';
EXEC (@InsertStatement);

-- use the temp table 
SELECT * 
FROM YourTable t
WHERE t.id IN (SELECT DISTINCT num FROM #tmpNum); 
```

此方法最多可用于 1000 个值。
因为 1000 是行值表达式的最大限制。

此外，正如 Stuart Ainsworth 指出的那样。
由于此方法使用动态 Sql，因此要警惕代码注入，不要将其用于基于用户输入的字符串。

**边注**

从 MS Sql Server 2016 开始，可以简单地使用[STRING_SPLIT](https://docs.microsoft.com/en-us/sql/t-sql/functions/string-split-transact-sql)函数。

```
DECLARE @TEXT varchar(max);
SET @TEXT = '1,17,25,44,46,67,88';

SELECT t.* 
FROM YourTable t
JOIN (SELECT DISTINCT CAST(value AS INT) num FROM STRING_SPLIT(@TEXT, ',')) nums
  ON t.id = nums.num; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-23T18:55:51.997

完成答案后，您还可以使用 CSV 字符串将多个值存储在多个列中：

```
 --input sql text 
declare @text_IN varchar(max) ='text1, text1.2, text1.3, 1, 2010-01-01\r\n text2, text2.2, text2.3, 2, 2016-01-01' 
```

将 csv 文件拆分为行：

```
declare @temptable table (csvRow varchar(max))    
declare @DelimiterInit varchar(4) = '\r\n'
declare @Delimiter varchar(1) = '|'
declare @idx int       
declare @slice varchar(max)    

set @text_IN = REPLACE(@text_IN,@DelimiterInit,@Delimiter)

select @idx = 1       
    if len(@text_IN)<1 or @text_IN is null  return       

while @idx!= 0       
begin       
    set @idx = charindex(@Delimiter,@text_IN)       
    if @idx!=0       
        set @slice = left(@text_IN,@idx - 1)       
    else       
        set @slice = @text_IN 

    if(len(@slice)>0)  
        insert into @temptable(csvRow) values(@slice)       

    set @text_IN = right(@text_IN,len(@text_IN) - @idx)       
    if len(@text_IN) = 0 break       
end 
```

将行拆分为列：

```
;WITH XMLTable (xmlTag)
AS
(
    SELECT CONVERT(XML,'<CSV><champ>' + REPLACE(csvRow,',', '</champ><champ>') + '</champ></CSV>') AS xmlTag
    FROM @temptable
)

 SELECT RTRIM(LTRIM(xmlTag.value('/CSV[1]/champ[1]','varchar(max)'))) AS Column1,    
        RTRIM(LTRIM(xmlTag.value('/CSV[1]/champ[2]','varchar(max)'))) AS Column2,
        RTRIM(LTRIM(xmlTag.value('/CSV[1]/champ[3]','varchar(max)'))) AS Column3,    
        RTRIM(LTRIM(xmlTag.value('/CSV[1]/champ[4]','int'))) AS Column4,
        RTRIM(LTRIM(xmlTag.value('/CSV[1]/champ[5]','datetime'))) AS Column5
 FROM XMLTable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-11T10:55:14.220

以下作品：

```
declare @parStoreNo As varchar(8000) = '1,2,3,4'        
CREATE TABLE #parStoreNo (StoreNo INT)-- drop #parStoreNo
declare @temptable VARCHAR(1000) = @parStoreNo
declare @SQL VARCHAR(1000) 
SELECT @SQL = CONVERT(VARCHAR(1000),' select ' + REPLACE(ISNULL(@temptable,' NULL '),',', ' AS Col UNION ALL SELECT ')) 
INSERT #parStoreNo (StoreNo)
EXEC (@SQL) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-18T08:15:01.440

我正在使用如下 XML 函数...

```
DECLARE @str VARCHAR(4000) = '6,7,7,8,10,12,13,14,16,44,46,47,394,396,417,488,714,717,718,719,722,725,811,818,832,833,836,837,846,913,914,919,922,923,924,925,926,927,927,928,929,929,930,931,932,934,935,1029,1072,1187,1188,1192,1196,1197,1199,1199,1199,1199,1200,1201,1202,1203,1204,1205,1206,1207,1208,1209,1366,1367,1387,1388,1666,1759,1870,2042,2045,2163,2261,2374,2445,2550,2676,2879,2880,2881,2892,2893,2894'

Declare @x XML 

select @x = cast('<A>'+ replace(@str,',','</A><A>')+ '</A>' as xml)

select t.value('.', 'int') as inVal
from @x.nodes('/A') as x(t) 
```

我更喜欢这个，因为不需要创建任何单独的函数和过程。此外，我不必选择我最喜欢的动态 SQL 查询。 [将逗号分隔的字符串转换为表格](https://blogs.msdn.microsoft.com/amitjet/2009/12/11/convert-comma-separated-string-to-table-4-different-approaches/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-04T11:10:12.837

```
DECLARE @str VARCHAR(4000) = '6,7,7,8,10,12,13,14,16,44,46,47,394,396,417,488,714,717,718,719,722,725,811,818,832'

DECLARE @x XML 
select @x = cast('<A>'+ replace(@str,',','</A><A>')+ '</A>' as xml)

select t.value('.', 'int') as inVal
from @x.nodes('/A') as x(t) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-10-09T14:16:37.327

试试这个代码

```
 SELECT RTRIM(part) as part
    INTO Table_Name
        FROM dbo.splitstring(@Your_Comma_string,',') 
```

splitstring 函数如下

```
CREATE FUNCTION dbo.splitstring ( @stringToSplit VARCHAR(MAX) )
RETURNS
 @returnList TABLE ([Name] [nvarchar] (500))
AS
BEGIN

 DECLARE @name NVARCHAR(255)
 DECLARE @pos INT

 WHILE CHARINDEX(',', @stringToSplit) > 0
 BEGIN
  SELECT @pos  = CHARINDEX(',', @stringToSplit)  
  SELECT @name = SUBSTRING(@stringToSplit, 1, @pos-1)

  INSERT INTO @returnList 
  SELECT @name

  SELECT @stringToSplit = SUBSTRING(@stringToSplit, @pos+1, LEN(@stringToSplit)-@pos)
 END

 INSERT INTO @returnList
 SELECT @stringToSplit

 RETURN
END 
```

# android - 用于 RDF 提要的 Android SAX 解析器

> ID：15585635
> 
> 赞同：0
> 
> 时间：2013-03-23T10:22:22.930
> 
> 标签：android, rss, rdf, saxparser

在尝试解析 RDF 提要（Android 解析器上的新手）时，我完全被困了几天。尽管使用：

```
Element item = root.getChild("", ITEM); 
```

因为我的项目来自根目录而不是 CHANNEL，正如[这里](https://stackoverflow.com/questions/2966016/android-sax-with-rdf)指定的那样。无论如何，我只检索 0 条消息

```
<?xml version="1.0" encoding="utf-8" ?>
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
     xmlns:dc="http://purl.org/dc/elements/1.1/"
     xmlns:syn="http://purl.org/rss/1.0/modules/syndication/"
     xmlns="http://purl.org/rss/1.0/">
<channel rdf:about="http://...">
    <title>Notícies</title>
    <link>...</link>
    <description></description>
        <syn:updatePeriod>daily</syn:updatePeriod>
        <syn:updateFrequency>1</syn:updateFrequency>
        <syn:updateBase>2009-08-25T16:01:24Z</syn:updateBase>
        <image rdf:resource="..."/>
        <items>
            <rdf:Seq>
            <rdf:li rdf:resource="..."/>
            <rdf:li rdf:resource="..."/>
            </rdf:Seq>
        </items>
        </channel>

<item rdf:about="...">        
   <title>...</title>        
   <link>....</link>        
   <description>...</description>        
   <dc:publisher>No publisher</dc:publisher>
   <dc:creator>administrador</dc:creator>
   <dc:rights></dc:rights>                
   <dc:date>2013-03-22T16:18:36Z</dc:date>        
   <dc:type>Noticia</dc:type>    
</item>
<item rdf:about="...">        
   <title>...</title>        
   <link>....</link>        
   <description>...</description>        
   <dc:publisher>No publisher</dc:publisher>
   <dc:creator>administrador</dc:creator>
   <dc:rights></dc:rights>                
   <dc:date>2013-03-22T16:18:36Z</dc:date>        
   <dc:type>Noticia</dc:type>    
</item>
<item rdf:about="...">        
   <title>...</title>        
   <link>....</link>        
   <description>...</description>        
   <dc:publisher>No publisher</dc:publisher>
   <dc:creator>administrador</dc:creator>
   <dc:rights></dc:rights>                
   <dc:date>2013-03-22T16:18:36Z</dc:date>        
   <dc:type>Noticia</dc:type>    
</item>
 ...

</rdf:RDF> 
```

使用我的 SAX 解析器如下：

```
public class AndroidSaxFeedParser extends BaseFeedParser {

    static final String RDF_NAMESPACE = "http://www.w3.org/1999/02/22-rdf-syntax-ns#";
    static final String ATOM_NAMESPACE = "http://www.w3.org/2005/Atom";
    static final String RSS_NAMESPACE = "";

    static final String RSS = "RDF";
    public AndroidSaxFeedParser(String feedUrl) {
        super(feedUrl);
    }

    public List<Message> parse() {
        final Message currentMessage = new Message();
        //RootElement root = new RootElement(RSS);
        RootElement root = new RootElement(RDF_NAMESPACE, RSS);
        final List<Message> messages = new ArrayList<Message>();

        //Element channel = root.getChild(CHANNEL);
        //Element channel = root.getChild(RDF_NAMESPACE, CHANNEL);
        Log.e("Valor Root", root.toString());

        Element item = root.getChild("", ITEM);
        //Element item = channel.getChild(RDF_NAMESPACE,ITEM);
        item.setEndElementListener(new EndElementListener(){
            public void end() {
                messages.add(currentMessage.copy());
            }
        });
        item.getChild(TITLE).setEndTextElementListener(new EndTextElementListener(){
            public void end(String body) {
                currentMessage.setTitle(body);
            }
        });
        item.getChild(LINK).setEndTextElementListener(new EndTextElementListener(){
            public void end(String body) {
                currentMessage.setLink(body);
            }
        });
        item.getChild(DESCRIPTION).setEndTextElementListener(new EndTextElementListener(){
            public void end(String body) {
                currentMessage.setDescription(body);
            }
        });
        item.getChild(PUB_DATE).setEndTextElementListener(new EndTextElementListener(){
            public void end(String body) {
                currentMessage.setDate(body);
            }
        });
        try {
            Xml.parse(this.getInputStream(), Xml.Encoding.UTF_8, root.getContentHandler());
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
        return messages;
    }
   } 
```

我试过了

> 元素 item = root.getChild("RDF_NAMESPACE", ITEM); 元素 item = root.getChild("", ITEM); 元素项 = root.getChild(ITEM);

但是这 3 个选项返回 0 条消息。任何帮助将不胜感激。提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:05:31.670

对于您的具体问题，我无能为力，但我的一般建议是：不要这样做——不要尝试将 RDF 解析为 XML。

那个特殊的 RDF 语法，RDF/XML，在语法上确实是 XML，但它是把一个图模型 (RDF) 塞进一个树模型 (XML) 然后序列化的结果。解析 RDF/XML 有各种各样的替代方案和极端情况，这是一场噩梦；它会让你把头发扯掉。

看起来您正在使用 Java 执行此操作。 [MRG](https://code.google.com/p/mrg/)是一个很好的轻量级 Java RDF 解析器，我过去曾成功使用过它。

**编辑：**似乎之前已经提出过类似的问题（专门询问 RSS 工具而不是 XML 工具）。请参阅[如何使用 Java 编写 RSS 提要？](https://stackoverflow.com/questions/113063/java-rss-library). 如果您可能解析的唯一 RDF 是 RSS，那么这看起来是一个不错的选择，但如果我是您，我会评估两者，只是为了更全面地了解可能性。

此外，您的示例中似乎有两个`rdf:RDF`元素。这是一个剪切和粘贴错误，还是您正在处理*格式*错误的RDF？

# r - 如何在 R 中编写自定义数据集？

> ID：15585637
> 
> 赞同：1
> 
> 时间：2013-03-23T10:22:46.843
> 
> 标签：r

我有一个实验室研究的数据集（名为 myresearch.txt），我可以安装在 package:datasets 中吗？
1.如何查看何时使用命令

```
data() 
```

2.使用命令时如何加载

```
attach(myresearch) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T10:45:49.753

您似乎在询问是否可以将数据集添加到随 R 一起安装的“数据集”包中。

为此，我会说答案是“否”、“不太可能”或“这可能不是获得该问题答案的正确论坛”。或者，这是一个后续问题，例如“R Core 团队是否希望将它包含在未来的 R 版本中，它是一个足够棒且足够灵活的数据集吗？”

如果您只想要能够在 R 会话中灵活加载数据集的*功能*，您可以创建自己的包含数据的 R 包。请特别参阅“[编写 R 扩展](http://cran.r-project.org/doc/manuals/R-exts.pdf)”手册中的***第 1.1.5 节：包中的数据。***

为此，最好的办法是通过标准方法加载数据并将其保存到包的“数据”目录中的 .RData 或 .rda 文件中。如果您正在寻找不同的方法来轻松地使包中的数据可用，您应该特别阅读*延迟加载。*

* * *

但是，如果这纯粹是供个人使用，我不知道您为什么不将数据集或数据集保存为 .RData 文件，而只是`load("myData.RData")`在脚本顶部添加类似内容以使数据可用。

# mysql - 将 Stardict 字典文件转换为 MySQL 数据库

> ID：15585641
> 
> 赞同：2
> 
> 时间：2013-03-23T10:23:26.173
> 
> 标签：mysql

我正在建立一个在线词典网站，我遇到了一些问题，希望你们能帮助我。我在这里下载 dicts 文件[http://abloz.com/huzheng/stardict-dic/](http://abloz.com/huzheng/stardict-dic/) 如何将这些 dicts 转换为数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T05:23:09.193

The stardict tools come with `stardict_stardict2txt` and `stardict_tabfile2sql`.
Use them like this:
`stardict_stardict2txt some-input.ifo some-output.txt
stardict_tabfile2sql some-output.txt`

You'll get some-output.txt.sql

# c - 从单个链表中删除节点 c 编程

> ID：15585645
> 
> 赞同：0
> 
> 时间：2013-03-23T10:24:20.597
> 
> 标签：c, computer-science, singly-linked-list

当我在 VS 和代码块中构建程序时没有任何问题。虽然，当我运行它时，它要么在我输入索引号后坏掉，要么只是无限显示字母......

```
#include<stdio.h>
#include<stdlib.h>

// list_node structure

typedef struct list_node{
    int item;
    struct list_node *next;
}ListNode;
//call functions that will be used 

void printNode(ListNode *head);
int removeNode(ListNode **ptrhead, int index);
ListNode *findNode(ListNode *head, int index);

int main(){
    int index,value;
    ListNode *head=NULL;
    ListNode *temp;
    //build the list  

    printf("Enter a value:");
    scanf("%d",&value);
    do{
              temp->item=value;
        if(head==NULL){
            head=(struct list_node *)malloc(sizeof(ListNode));
            temp=head;
        }
        else{
            temp->next=(struct list_node *)malloc(sizeof(ListNode));
            temp=temp->next;
        }
        printf("Enter a value:");
        scanf("%d",&value);

    }while(value!=-1);

    printf("Enter the index: ");
    scanf("%d",&index);
    // remove the node at the position indexed

    // when I used debugger, I saw it didn't execute this step. Maybe there's something wrong with it....

    removeNode(&head,index);

    printNode(head);

    return 0;
}

void printNode(ListNode *head){
    if (head==NULL)
        exit(0);
    while(head!=NULL){
        printf("%d",head->item);
        head=head->next;
    }
    printf("\n");
}

ListNode *findNode(ListNode *head,int index){
    if(head==NULL||index<0)
        return NULL;
    while(index>0){
        head=head->next;
        index--;
    }
    return head;
}

int removeNode(ListNode **ptrhead,int index){
    ListNode *pre,*cur,*temphead;

    temphead=*ptrhead;

    if(findNode(temphead,index)!=NULL){
        pre=findNode(temphead,index);
        cur=pre->next;
        temphead->next=cur;
        return 0;
    }
    else
        return -1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:27:14.500

```
prev=NULL;
cur=head;
/* traverse the list until you find your target */
while (cur != NULL && cur->id != search_id) {
  prev=cur;
  cur=cur->next;
}
/* if a result is found */
if (cur != NULL) {
  /* check for the head of the list */
  if (prev == NULL)
    head=cur->next;
  else
    prev->next=cur->next;  
  /* release the old memory structure */
  free(cur);
} 
```

怎么了伙计……我希望你能明白……:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:27:52.963

`temp->item=value;`- 您在`temp`未初始化时取消引用。未定义的行为，崩溃和燃烧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T10:30:12.380

在你的循环中，

```
 temp->item=value; 
```

没有为 temp 分配空间。因此，这将崩溃！

```
 if(head==NULL){
        head=(struct list_node *)malloc(sizeof(ListNode));
        temp=head; 
```

通常，您会分配一个`temp`节点并将其分配给`head`as `head = temp`。缺少的另一点是创建新节点时，`next`应将其初始化`NULL`为`temp->next = NULL`

在`removeNode`,

```
 if(findNode(temphead,index)!=NULL){
        pre=findNode(temphead,index); 
```

`pre`将指向要删除的节点，但`temphead`仍将指向`head`列表。`findNode`不会修改`temphead`. 所以`tmphead->next = cur`会修改`head`always

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T08:14:30.203

```
int removeNode(ListNode **ptrhead,int index){
ListNode *pre,*cur;
if (index==-1)
    return 1;
else if(findNode((*ptrhead),(index))!=NULL){
    pre=findNode((*ptrhead),(index-1));
    cur=pre->next;
    pre->next=cur->next;
    return 0;
}
else
    return 1;
} 
```

我修改了最后一部分并添加`temp->next=NULL`到main函数中。这个程序现在可以运行良好了！

# android - 获取与一组给定电话号码匹配的联系人列表

> ID：15585649
> 
> 赞同：0
> 
> 时间：2013-03-23T10:24:47.387
> 
> 标签：android, android-contacts

我正在尝试获取与给定电话号码集匹配的联系人列表，任何人都可以建议我如何在 android 中执行此操作。

例如，我有 3 个电话号码 [883338383 、 93939311 、 89898999]，它们是用于搜索的输入。我需要获取与这些号码匹配的联系人列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:28:38.810

您可以指定一个 URI 和一个查询来获取带有电话号码的联系信息。

```
Uri contactUri = Uri.withAppendedPath(Contacts.Phones.CONTENT_FILTER_URL, Uri.encode(phoneNumber));

Cursor cursor = mContext.getContentResolver().query(contactUri, null, null, null, null); 
```

上面代码返回的光标应该包含您正在寻找的联系人，您可以对其进行解析以获取您需要的信息：

```
if(cursor.moveToFirst()){
    int personIDIndex = cursor.getColumnIndex(Contacts.Phones.PERSON_ID);
    //etc
} 
```

如果没有给定号码的联系人，则查询将返回 null。因此，请确保 t0 在您解析之前检查光标是否为空值，否则您将得到一个`NullPointerException`.

# batch-file - 启动 CMD，然后回显它，然后清除屏幕

> ID：15585659
> 
> 赞同：8
> 
> 时间：2013-03-23T10:25:47.237
> 
> 标签：batch-file

这是我需要的步骤，我正在使用批处理脚本

1.  打开路径设置为桌面的 cmd
2.  然后设置它的回声关闭
3.  然后清屏
4.  然后等我输入命令

所以我可以直接输入命令而不用长线阻塞视图

到目前为止我尝试过的代码

```
@echo off
cd "C:\Documents and Settings\Administrator\Desktop"
cls
cmd
@echo off
cls 
```

但是当我运行它时，我会得到一个典型的 CMD 窗口，我必须再次输入“echo off”和“cls”才能得到一个干净的窗口。

我得到的输出是

```
Microsoft Windows XP [Version 5.1.2600]
(C) Copyright 1985-2001 Microsoft Corp.

C:\Documents and Settings\Administrator\Desktop> 
```

我想要的输出很简单

想象一个闪烁的下划线

```
_ 
```

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T11:16:26.130

试试这条线：

```
start /D "C:\Documents and Settings\Administrator\Desktop" cmd /k "prompt $" 
```

`/D <path>`将设置您的工作目录

`Prompt $`会将您的提示设置为“无”，只会显示闪烁的光标

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T10:30:13.910

> 我想要的输出很简单
> _

您可以使用`prompt`命令来实现这一点，例如`prompt $S`或`prompt $g`

这是一个示例批处理文件，它将打开一个带有空提示的新 cmd 窗口：

```
@echo Off
start cmd /k "prompt $g" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-04T06:59:38.390

使用记事本创建 VBS 文件

添加此行

```
Set cmd = CreateObject("WScript.Shell")

cmd.run"cmd"
WScript.Sleep 200

cmd.Sendkeys"echo off{Enter}"
WScript.Sleep 200

cmd.Sendkeys"cls{Enter}"
WScript.Sleep 200 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-30T18:51:27.017

此命令可能会非常有问题（cmd /c "echo off | clip"）不带引号使用：

```
cmd /c  echo off | clip
goto off 
```

（另存为.bat）没有更多问题！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-14T12:10:16.513

我刚用

```
cls
echo off
cls
cmd|echo off
cls 
```

在批处理文件中。为我工作

# c - 分叉一个孩子并调用 gcc

> ID：15585664
> 
> 赞同：1
> 
> 时间：2013-03-23T10:26:24.860
> 
> 标签：c, linux, gcc, fork

我正在尝试制作一个程序，该程序正在获取目录路径，打开目录，然后在其中编译 c 文件。

```
 //open current directory
    currDir=opendir(fullpath);
    //get the c file, ignore hidden files
    while((cfile=readdir(currDir))!=NULL)
    {
        if(cfile->d_name[0]!='.')
            break;
    }
    /*compile c file*/

    //child process
    if((pid=fork())==0)
    {
        fullpath=realloc(fullpath, sizeof(char)*(strlen(fullpath)+strlen(cfile->d_name)+1));
        strcat(fullpath,cfile->d_name);
        execl("/usr/bin/gcc", "/usr/bin/gcc", "-o", "comp.out", fullpath,NULL);
    }
    else
    {
        wait(NULL);
    } 
```

如您所见，在子进程中，我正在创建 c 文件的完整路径（否则将找不到它），然后调用 gcc，但出现以下错误：

```
collect2: fatal error: cannot find 'ld'
compilation terminated. 
```

1.  有什么想法有什么问题吗？为什么它不能成功编译文件？请注意，我确实成功地通过终端手动编译它们。
2.  另一个我没有找到答案的问题是，如何强制在 c 文件的目录中创建 comp.out 文件？因为如果我使用文件的完整路径调用 gcc，则会在主目录中创建 .out 文件。

我之前尝试过谷歌和研究，但找不到这两个问题的答案。感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T11:08:51.963

您可以使用

```
execlp() 
```

反而。它在 PATH 环境变量中搜索。

# php - 页面不断快速重新加载

> ID：15585667
> 
> 赞同：0
> 
> 时间：2013-03-23T10:26:42.690
> 
> 标签：php

我有以下索引文件，但是在加载时，它似乎也一直在快速重新加载，就像发生某种循环一样？
它使单击某些内容变得困难，但我找不到问题。
谁能明白为什么会这样？我删除了`session _destroy`用于选择语言的通用文件中的 and all 似乎也很好？

这些是我使用的 2 个文件：
[文件 1](http://pastebin.com/KuB8BKEf)
[文件 2](http://pastebin.com/1L1mH2pE)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:30:52.253

```
else
{
  $lang = 'nl';
  echo "<meta http-equiv=\"refresh\" content=\"0;URL=index.php\">";
} 
```

我认为您想要的是在这一点上设置 $_SESSION["lang"] 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:30:39.080

有一个元标记可能会在某些情况下刷新您的页面，请尝试评论它

```
<meta http-equiv="refresh" content="0;URL=index.php"> 
```

# exception - databene benerator 抛出表空异常

> ID：15585669
> 
> 赞同：0
> 
> 时间：2013-03-23T10:26:55.957
> 
> 标签：exception, h2, data-generation, benerator

我一直在学习使用[databene benerator](http://databene.org/databene-benerator/)（最新的0.8.1），但我在尝试填充H2数据库时遇到了问题（以前是1.3.170，现在是1.3.171）。首先，我得到了目录空异常，但是在进一步阅读 benerator 文档（0.7.6）时，我发现了这个

`When importing database metadata, you might encounter exceptions when Benerator tries to get metadata of catalogs or schemas it has no access privileges to. Usually can fix this by choosing the right schema for your database, e.g. <database id="db" ... schema="PUBLIC" />`

和

`Table X not found in the expected catalog Y and schema Z This message tells you, that you database configuration is wrong. Check and fix the 'schema' and 'catalog' settings in your database configuration, e.g. <database … catalog="main" schema="Z" />`

所以我在数据库标签中明确写了目录和模式名称

```
 <database id="db"
        url="jdbc:h2:tcp://localhost/D:/databases/databaseName"
        driver="org.h2.Driver"
        schema="PUBLIC"
        user="admin"
        catalog = "DATABASENAME"
        password="xxxxxx"
    /> 
```

但是当 benerator 刚刚开始填充第一个表时，我开始收到 Table null 异常，这是堆栈跟踪

```
D:\test3> benerator benerator.xml
Local classpath: .;D:\databene-benerator-0.8.1\bin;D:\databene-benerator-0.8.1\lib\*
12:06:58,495 INFO  (main) [CONFIG] Running file benerator.xml
12:06:58,511 INFO  (main) [CONFIG] Benerator 0.8.1 build 2335
12:06:58,511 INFO  (main) [CONFIG] Java version 1.7.0_17
12:06:58,511 INFO  (main) [CONFIG] JVM Java HotSpot(TM) Client VM 23.7-b01 (Oracle   
Corporation)
12:06:58,511 INFO  (main) [CONFIG] OS Windows 7 6.1 (x86)
12:06:58,511 INFO  (main) [CONFIG] Installed JSR 223 Script Engines:
12:06:58,526 INFO  (main) [CONFIG] - Mozilla Rhino[js, rhino, JavaScript, javascript, 
ECMAScript, ecmascript]
12:06:58,526 INFO  (main) [CONFIG] Max heap size: 247 MB
12:06:58,636 DEBUG (main) [CONFIG] Initializing Script mapping from file org/databene 
/script/script.properties
12:06:59,837 DEBUG (main) [COMMENT] Reproduces an existing database
12:06:59,837 DEBUG (main) [COMMENT] defining a database that will be referred by the  
id 'db' later
12:06:59,868 DEBUG (main) [COMMENT] Drop the current tables and sequences if they 
already exist
12:06:59,884 INFO  (main) [EvaluateStatement] Executing script drop_hotel_tables.sql
12:07:00,118 INFO  (main) [JDBC] Connected to H2 1.3.171 (2013-03-17)
12:07:00,118 INFO  (main) [JDBC] Using driver H2 JDBC Driver 1.3.171 (2013-03-17)
12:07:00,118 INFO  (main) [JDBC] JDBC version 4.0
12:07:00,180 DEBUG (main) [COMMENT] Create the tables and sequences
12:07:00,180 INFO  (main) [EvaluateStatement] Executing script create_tables_h2.sql
12:07:00,227 DEBUG (main) [COMMENT] Generating a single constant profile...
12:07:00,305 INFO  (main) [JDBCDBImporter] Importing tables from environment '___temp'
12:07:00,336 INFO  (main) [DefaultDBSystem] Fetching table details and ordering  
tables  by dependency

12:07:00,508 INFO  (main) [TaskExecutor] Running task  
StateTrackingTaskProxy[GenerateAndConsumeTask(PROFILE)]
12:07:00,508 ERROR (main) [DescriptorRunner] Error in Benerator execution
    org.databene.commons.ObjectNotFoundException: Table null
    at org.databene.platform.db.DBSystem.getTable(DBSystem.java:802)
    at org.databene.platform.db.DBSystem.getWriteColumnInfos(DBSystem.java:744)
    at org.databene.platform.db.DBSystem.persistOrUpdate(DBSystem.java:831)
    at org.databene.platform.db.DBSystem.store(DBSystem.java:360)
    at  

    org.databene.benerator.storage.StorageSystemInserter.startProductConsumption(
    StorageSystemInserter.java:53)
    at   
    org.databene.benerator.consumer.AbstractConsumer.startConsuming(AbstractConsumer.
    java:47)
    at   
    org.databene.benerator.consumer.ConsumerProxy.startConsuming(
    ConsumerProxy.java:62)
    at org.databene.benerator.engine.statement.ConsumptionStatement.execute(
    ConsumptionStatement.java:53)
    at org.databene.benerator.engine.statement.GenerateAndConsumeTask.execute(
    GenerateAndConsumeTask.java:159)
    at org.databene.task.TaskProxy.execute(TaskProxy.java:59)
    at org.databene.task.StateTrackingTaskProxy.execute(StateTrackingTaskProxy.java:52)
    at org.databene.task.TaskExecutor.runWithoutPage(TaskExecutor.java:136)
    at org.databene.task.TaskExecutor.runPage(TaskExecutor.java:126)
    at org.databene.task.TaskExecutor.run(TaskExecutor.java:101)
    at org.databene.task.TaskExecutor.run(TaskExecutor.java:77)
    at org.databene.task.TaskExecutor.execute(TaskExecutor.java:71)
    at org.databene.benerator.engine.statement.GenerateOrIterateStatement.executeTask(
    GenerateOrIterateStatement.java:156)
    at org.databene.benerator.engine.statement.GenerateOrIterateStatement.execute(
    GenerateOrIterateStatement.java:99)
    at   
    org.databene.benerator.engine.statement.LazyStatement.execute(LazyStatement.
    java:58)
    at  
    org.databene.benerator.engine.statement.StatementProxy.execute(
    StatementProxy.java:46)
    at org.databene.benerator.engine.statement.TimedGeneratorStatement.execute(
    TimedGeneratorStatement.java:70)
    at    
    org.databene.benerator.engine.statement.SequentialStatement.executeSubStatements(
    SequentialStatement.java:52)
    at org.databene.benerator.engine.statement.SequentialStatement.execute(
    SequentialStatement.java:47)
    at org.databene.benerator.engine.BeneratorRootStatement.execute(
    BeneratorRootStatement.java:63)
    at   
    org.databene.benerator.engine.DescriptorRunner.execute(DescriptorRunner.java:127)
    at org.databene.benerator.engine.DescriptorRunner.runWithoutShutdownHook(
    DescriptorRunner.java:109)
    at org.databene.benerator.engine.DescriptorRunner.run(DescriptorRunner.java:102)
    at org.databene.benerator.main.Benerator.runFile(Benerator.java:99)
    at org.databene.benerator.main.Benerator.runFromCommandLine(Benerator.java:82)
    at org.databene.benerator.main.Benerator.main(Benerator.java:75)
12:07:00,617 INFO  (main) [CachingDBImporter] Exporting Database meta data of ___temp 
to cache file
12:07:00,695 INFO  (main) [CONFIG] Max. committed heap size: 15 MB 
```

可能是什么问题，或者我忘了做什么？因为当我使用“复制和扩展现有数据库”创建项目时，benerator 正确捕获了所有表，甚至是主键和外键以及唯一约束。帮助将不胜感激，因为我还没有找到任何其他足够灵活、开源、可扩展并支持 JDBC 和 java 数据库的数据生成器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-27T18:48:58.010

这就是我终于意识到databene benerator的原因。如果您使用 mysql 作为您选择的数据库，请始终让数据库定义中的`schema`和`catalog`属性与数据库名称相同。像这样

```
<database id="db"
    url="jdbc:mysql://localhost:3306/DatabaseName"
    driver="org.h2.Driver"
    schema="DatabaseName"
    catalog = "DatabaseName"
    user="admin"
    password="xxxxxx"
/> 
```

它会给你一个像

```
[WARNING] Table 'TableName' not found in the expected catalog 'DatabaseName' and schema 'DatabaseName'. I have taken it from catalog 'DatabaseName' and schema 'null' instead. You better make sure this is right and fix the configuration 
```

但它实际上是在做你想做的事。我没有尝试过其他数据库，但我希望它也适用于它们。

# mongodb - 在 MongoDB 上使用自定义日期字段发出范围请求

> ID：15585672
> 
> 赞同：1
> 
> 时间：2013-03-23T10:27:15.867
> 
> 标签：mongodb, date

我的 MongoDB 中有一个奇怪的字段，它充当日期字段，但只是一个常规文本字段。

它的值是这样的：

*   2012 年 3 月 3 日
*   2013 年 2 月 23 日

您是否有机会对这些值进行查询之类的日期范围？例如，我需要查询 2011 年 1 月 1 日到 2011 年 3 月 3 日之间的所有内容。

我尝试使用 $gte 和 $lte 但排序在这里不起作用。

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:44:43.540

您真正想要做的是将值更新为 an `ISODate()`，然后 $gt 和 $lt 将正常工作。

```
function MonthToNr(month) {
    switch(month.toLowerCase()) {
        case 'jan': return '01';
        case 'feb': return '02';
        case 'mar': return '03';
        case 'apr': return '04';
        case 'may': return '05';
        case 'jun': return '06';
        case 'jul': return '07';
        case 'aug': return '08';
        case 'sep': return '09';
        case 'oct': return '10';
        case 'nov': return '11';
        case 'dec': return '12';
    }
}

db.test.find({date: {$exists: true}}).forEach(function(o) {
    var parts = o.date.split("-");
    o.date = ISODate(parts[2] + '-' + MonthToNr(parts[1]) + '-' + parts[0]);
    db.test.save(o);
}) 
```

# jquery - 如果 var TRUE，则淡出 DIV 元素

> ID：15585674
> 
> 赞同：0
> 
> 时间：2013-03-23T10:27:24.767
> 
> 标签：jquery, if-statement

我有一个名为#slider 的 div，它的宽度为 400%，overflow-x 设置为隐藏。#slider DIV 以 25% 的比例填充了 4 个 div（因此每个 div 都拉伸了 DOM 的 100%）。页面加载后，我立即将 div 向左移动 -100%，以便 div 可以从页面加载时左右移动。

我正在为#slider DIV 设置动画，将其左右移动以将每个子 DIV 移动到 DOM 中的视图中，使用一个简单的方法：

```
$(".goright").click(function(){
$("#slider").animate({left:'-=100%'}, 400);
}); 
```

和

```
 $(".goleft").click(function(){
 $("#slider").animate({left:'+=100%'}, 400);
 }); 
```

分别。

效果很好。

但是，一旦#slider 的位置达到<= -300% 或>= 0%，我试图淡出使滑块移动的按钮。如果它被隐藏，则淡入另一个。

页面初始加载后，以下代码似乎可以工作：

```
// Make the right slide work
$(".goright").click(function(){
    if ($('.goleft').is (':hidden')) {
        $('.goleft').fadeIn();
    };
    $("#slider").animate({left:'-=100%'}, 400, function() {
         var leftPos = $('#slider').css('left');
         if (leftPos >= '-300%') {
              $('.goright').fadeOut(200);}
        });

    });

// Make the left slide work
$(".goleft").click(function(){
    if ($('.goright').is (':hidden')) {
        $('.goright').fadeIn();
    };
    $("#slider").animate({left:'+=100%'}, 400, function() {
         var leftPos = $('#slider').css('left');

         if (leftPos >= '0%') {
              $('.goleft').fadeOut(200);}
        });

    }); 
```

但似乎如果页面在渲染后调整大小，右侧控制按钮无法以正确的左侧值淡出，淡出过早。

任何想法出了什么问题？任何帮助表示赞赏！

您可以在这里查看网站：http: [//www.newactorscompany.com/new/indexx.html](http://www.newactorscompany.com/new/indexx.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:40:09.237

我会通过不同的方式根据框架显示/隐藏箭头。如果您显示第一帧，则隐藏左箭头。如果您显示最后一帧，则隐藏右箭头。通过简单的帧计数器。不是按位置，因为它看起来位置会随着您调整窗口大小而变化，即使使用百分比也是如此。

# c - 如何用c语言编写设备驱动程序

> ID：15585675
> 
> 赞同：5
> 
> 时间：2013-03-23T10:27:33.707
> 
> 标签：c, linux, drivers

我想在 linux os 中用 C 编写驱动程序，尽管我认为它非常困难。我可以得到一些关于如何开始或要遵循的书籍的提示吗？驱动可以从我的USB口到显卡！！

我知道我可以在哪里搜索书籍，我想知道我应该从哪些基础知识开始。我是否需要具备硬件知识以及哪些特定书籍适合像我这样的新手

# android-ndk - cygwin 上的 Pocketsphinx Android 演示错误 ndk-build

> ID：15585679
> 
> 赞同：-1
> 
> 时间：2013-03-23T10:28:10.803
> 
> 标签：android-ndk, offline, speech, cmusphinx

我尝试了在 stackoverflow 和其他一些论坛上发布的许多解决方案，并在谷歌上搜索，直到我完全沮丧。我正在使用带有 cygwin 的 Windows 8。我尝试让 PocketSphinxAndroidDemo 运行，按照教程

[http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/)

但我没有成功。我做了什么：

浏览教程，下载所有资源并安装 cygwin 和 swig。然后，第一件事不工作是 cd 进入 sphinxbase 文件夹并输入命令 ./autogen.sh 。无论我如何编写它（./autogen.sh，只有 autogen.sh，只有 autogen 等），这都行不通。好的，然后我继续教程并给出命令 configure、make 和 make install。这行得通，但是当我尝试使用 ndk-build 构建时，我在 cygwin 终端上收到下一条错误消息：

jni/pocketsphinx_wrap.c:760:26：致命错误：pocketsphinx.h：没有这样的文件或目录

我将 PocketSphinxAndroidDemo jni-folder Android.mk 文件中的 Sphinx Path 更改为所有已发布的解决方案。我试过所有的东西，比如

SPHINX_PATH :=$ /cygdrive/c/Programmierung/DeveloperLibs/CMUSphinx

SPHINX_PATH :=$ /c/Programmierung/DeveloperLibs/CMUSphinx

SPHINX_PATH := /cygdrive/c/Programmierung/DeveloperLibs/CMUSphinx

SPHINX_PATH :=$ /home/c/Programmierung/DeveloperLibs/CMUSphinx

SPHINX_PATH :=$ /cygdrive/home/Programmierung/DeveloperLibs/CMUSphinx

等等，等等......没有任何帮助。顺便说一下本地静态库的定义：

LOCAL_STATIC_LIBRARIES := pocketsphinx sphinxlm sphinxfeat sphinxfe sphinxutil

这一定是对的，因为这被张贴了很多次，以改变顺序。即使我尝试过

包括 $(BUILD_SHARED_LIBRARY) 并将其更改为包括 $(BUILD_STATIC_LIBRARY)

这些都没有给我一个结果，错误仍然存​​在....我该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:50:01.650

> 然后，第一件事不工作是 cd 进入 sphinxbase 文件夹并输入命令 ./autogen.sh 。无论我如何编写它（./autogen.sh，只有 autogen.sh，只有 autogen 等），这都行不通。

您不需要运行 autogen.sh

> 这行得通，但是当我尝试使用 ndk-build 构建时，我在 cygwin 终端上收到下一条错误消息：jni/pocketsphinx_wrap.c:760:26: fatal error: pocketsphinx.h: No such file or directory

您需要下载包含源的存档，而不是名为 win32 的存档，该存档仅适用于 Windows。文件 pocketsphinx.h 包含在 pocketsphinx-0.8.tar.gz/include 中。

编译器具有“标题搜索路径”的概念，它可以在其中找到包含。搜索路径在编译器命令行参数中使用 -I 选项指定。如果编译器找不到某个文件，很可能文件在另一个位置或搜索路径指定不正确。您需要将文件放在正确的位置或正确指定搜索路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T15:03:54.387

现在我得到了它的工作，我不喜欢回答我自己的问题，但也许它可以帮助其他人解决同样的问题。Nikolay Shmyrev 为我指明了正确的方向，非常感谢他。这是一个让pocketsphinx在windows和android上工作的小教程：

[https://sites.google.com/site/opiatefuchs/home/pocketsphinxandroiddemo](https://sites.google.com/site/opiatefuchs/home/pocketsphinxandroiddemo)

# java - 当引用实例对象时，在构造函数中创建的填充 HashMap 返回 null

> ID：15585680
> 
> 赞同：1
> 
> 时间：2013-03-23T10:28:18.840
> 
> 标签：java, constructor, hashmap

第一次在这里发海报。我通过stackoverflow搜索但找不到这个问题的任何答案，也许我的措辞不正确。

我有一个类，我在构造函数中创建一个 HashMap（下面的代码）：

导入 java.util.HashMap；导入 java.util.ArrayList；

类嬉皮扩展客户{

```
Hippie() {
    name = "Hippie";

    HashMap<String, Double> preferences = new HashMap<String,Double>();
    preferences.put("Donuts", 1.5);
    preferences.put("Biscotti", 0.5);

} 
```

}

不幸的是，当我创建上面的“Hippie”对象的实例时，即使构造函数成功完成，对实例对象中 HashMap 的任何引用都返回 null。

公共类 SEJavaDemo{ 公共静态 void main(String[] args){

```
Hippie Billy = new Hippie();
System.out.println(Billy.preferences);
System.out.println(Billy.name);

} 
```

}

例如，上面的代码打印出来：

零嬉皮士

我的最终目标是能够访问由 Hippie 构造函数创建的 HashMap。任何关于它为什么返回 null 而不是 HashMap 的见解将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T10:30:00.140

```
class Hippie extends Customer {

    public HashMap<String, Double> preferences;

    Hippie() {
        name = "Hippie";
        preferences = new HashMap<String,Double>();
    }
} 
```

`preferences`外部类不可见，因为它是在您的`constructor`. 您需要将其声明为实例变量，然后在构造函数中对其进行初始化，以使其对外部类可见。

也一样`name`。

尽管这可能会解决您的问题，但建议您执行以下操作：-

```
class Hippie extends Customer {

        private HashMap<String, Double> preferences

        Hippie() {
            name = "Hippie";
            preferences = new HashMap<String,Double>();
        }

    // have a getter for the hashmap
    public HashMap<String,Double> getMap(){
        return preferences;
    }
} 
```

并像这样使用它：-

```
Hippie billy = new Hippie(); // Couldn't digest `Billy` as object name.
System.out.println(billy.getMap()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T10:33:29.103

因此，您正在创建对 HashMap 的本地引用。它的范围仅限于构造函数本身。为它创建一个实例变量并尝试在构造函数中填充它。它会起作用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T11:01:06.600

这个设计伤了我的眼睛。

地球上没有理由在这里使用扩展。IS-A`Hippie`总是一个`Customer`? 不是`Customers`都有偏好吗？

根本没有封装或信息隐藏。如果你必须写这个，请考虑一下：

```
public class Customer {
    private Map<String, Double> preferences; 

    public Customer() {
        this.preferences = new LinkedHashMap<String, Double>();
    }

    public Double getPreference(String key) {
        return this.preferences.get(key);
    }

    public void setPreference(String key, Double value) {
        this.preferences.put(key, value);
    }

    public void removePreference(String key) {
       this.preferences.remove(key);
    }

    public boolean hasPreference(String key) {
        return this.preferences.containsKey(key);
    }

    // ONLY if you must.
    public Map<String, Double> getMap() {
        return Collections.unmodifiableMap(this.preferences); 
    }
} 
```

# mysql - CakePHP sql 查询

> ID：15585681
> 
> 赞同：0
> 
> 时间：2013-03-23T10:28:38.350
> 
> 标签：mysql, cakephp, join, cakephp-2.0, contain

我有以下表格：

```
- restaurants (restaurant.id, restaurant.name)
- menus (menu.id, menu.name, menu.active, menu.restaurant_id) 
```

我想列出所有带有活动菜单的餐厅（menu.active = true）：

```
- restaurant2
    - menu1
    - menu4
- restaurant5
    -menu3
- restaurant19
    - menu34
    - menu33 
```

我的第一个想法是这样的：

```
$options['contain'] = array(
    'Menu' => array(
        'conditions' => $menuParams //array('Menu.active' => '1') //$menuParams
        )
     ); 
```

这不起作用，因为将列出所有餐厅。我只想拥有有活动菜单的餐厅。

下一个想法：使用连接

```
$options['joins'] = array(
        array('table' => 'menus',
            'alias' => 'Menu',
            'type' => 'RIGHT',
            'conditions' => array(
                'Menu.restaurant_id = Restaurant.id',
            )
        )
    ); 
```

不好，因为，我没有我想要的有序列表。我需要按餐厅分组的菜单。看上面。

加入餐厅和菜单（active = true）然后使用包含来获取有序列表是否是正确的方法？我认为这可行，但我认为还有更简单的方法，对吧？

欢迎任何帮助！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:00:04.950

如果您使用的是 CakePHP 的 ORM 机器，您应该有一个 Restaurant 模型和一个 Menu 模型来描述每个表。在 Restaurant 模型中，您应该有一个`$hasMany = "Menu"`字段，在 menu 中应该有一个`$belongsTo = "Restaurant"`字段（假设模型名称是`Menu`and `Restaurant`）。

从那时起，使用 ORM 进行查询就相当简单了：

```
$this->Restaurant->recursive = 1; // grab the menus
$conditions = array('Menu.active' => '1'); // restrict to active menus only
$this->Restaurant->find('all', array('conditions' => $conditions)); 
```

控制器的 ad-hoc 方法中的上述内容`Restaurant`应将行检索为`Restaurant`对象数组，每个对象都与一个 active 数组捆绑在一起`Menu`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:50:22.043

现在我找到了解决我问题的简单而干净的解决方案！是的！

首先我必须解除绑定，然后我必须使用条件进行新的绑定。它就像一个魅力。这是代码：

```
 $this->unbindModel(array('hasMany' => array('Menu')));
        $this->bindModel(array('hasMany'=>array(
            'Menu'=>array(
                'foreignKey' => 'restaurant_id',
                'conditions' => array(
                                    'Menu.active' => 1
                                    )
            )
        ))); 
```

我感谢大家的回答！

# c# - 从 TSQL 切换到 LINQ

> ID：15585684
> 
> 赞同：0
> 
> 时间：2013-03-23T10:29:02.010
> 
> 标签：c#, linq, tsql

我正在尝试将下面的 TSQL 转换为 LINQ。我显然不太擅长这一点，也不知道如何在 Linq 中加入。我的困惑不仅仅是简单的表达。在我的基本用途中，我的结果集是一个当然代表表格行的类......但是连接不会有这个一对一的比例，所以我必须创建一个自定义结果集吗？

TSQL：

```
SELECT 
  SimEA.*,
  SimE.*
FROM 
  dbo.SSimEmailsAdressees SimEA

JOIN dbo.SSimEmails SimE ON
SimEA.EmailID = SimE.EmailMsgID

WHERE
 SimEA.UserId = var 
```

我最接近的：

```
this.GetAll<SSimEmails>() 
    .Where(e => e.SSimEmailsAdressees.Any(p => p.UserId.ToString() == usrID)); 
```

这当然会返回一个模拟被查询的单个表的对象。所以我需要帮助来添加连接，我猜我必须创建一个类似这样的返回对象？

```
this.GetAll<MyJoinResultsObject>...... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:48:12.147

我认为你应该写这样的东西：

```
var q = 
        from SimEA in SSimEmailsAdressees
        where SimEA.UserId = usrID
        join SimE in SSimEmails on SimEA.EmailID equals SimE.EmailMsgID
               into joinSimE
        from SimE in joinSimE.DefaultIfEmpty() 
        select new { EmailID = SimEA.EMailID, UserId = SimEA.UserId, OtherField = SimE.OtherField }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:52:13.947

```
var result = from ea in SimEA
         join e in SimE
         on ea.EmailID equals e.EmailMsgID
     where ea.UserId = userId
         select new { properties you want here or new object based on properties} 
```

# jquery - jQuery使动画在点击时只发生一次

> ID：15585693
> 
> 赞同：2
> 
> 时间：2013-03-23T10:31:01.220
> 
> 标签：jquery, html, jquery-animate

我有一个简单的 jQuery 动画代码，当用户单击链接时，我使用它从左到右移动 div，然后在用户单击另一个链接时从右到左移动。

我的问题是，如果用户继续点击相同的链接，div 会继续向左移动。我希望他们只能单击一次，如果他们再次单击该链接，则该链接不会执行任何操作。

这是我的代码：

```
$(document).ready(function(){
$('a.facebook').click(function() {
    $('#social_holder').animate({'left' : '-=420px'});
});
$('a.twitter').click(function() {
    $('#social_holder').stop().animate({'left' : '+=420px'});
});
}); 
```

我正在研究的例子可以在这里找到：http: [//www.samskirrow.com/client-bionic](http://www.samskirrow.com/client-bionic)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T10:36:02.003

对只需要处理一次的任何事件使用[one() 。](http://api.jquery.com/one/)

```
$('a.facebook').one('click', function() {
    $('#social_holder').animate({'left' : '420px'});
}); 
```

如果问题是要求在单击按钮后返回动画，那么您需要重置 left 属性，而不是尝试增加/减少它。

```
$(document).ready(function(){
    $('a.facebook').click(function() {
        $('#social_holder').animate({'left' : '0'});
    });
    $('a.twitter').click(function() {
        $('#social_holder').animate({'left' : '420px'});
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T10:40:03.583

而不是使用“+=420”和“-=420”，而是使用绝对位置。

```
$(document).ready(function(){
$('a.facebook').click(function() {
    $('#social_holder').animate({'left' : '0'});
});
$('a.twitter').click(function() {
    $('#social_holder').stop().animate({'left' : '420px'});
});
}); 
```

这也可以防止 div 被定位到中途。

# csv - 将三个 csv 文件列合并为一列的 Windows 脚本

> ID：15585696
> 
> 赞同：3
> 
> 时间：2013-03-23T10:31:25.300
> 
> 标签：csv, excel, vbscript, batch-file, vba

我可以在 excel 中执行此操作，例如使用 =CONCATENATE 函数将多列合并为一列。但我想做的是将同一文件夹内的 3 个不同 csv 文件中的列合并为一列。我想通过批处理脚本运行它，所以像 VBScript 这样的 CMD 复制命令似乎不起作用。

这是文件结构：

**文件 1.csv**

*   栏目1：www.domain.com/
*   栏目2：www.nwdomain.com/
*   第 3 列：www.stackdomain.com/
*   第 4 列：www.example-domain.com/

**文件2.csv**

*   Column1：关于
*   栏目2：联系方式
*   第 3 列：索引
*   第 4 栏：常见问题

**文件 3.csv**

*   第 1 列：.html
*   第 2 列：.html
*   第 3 列：.html
*   第 4 列：.html

**结果在输出文件中：**

*   栏目1：www.domain.com/about.html

*   栏目2：www.nwdomain.com/contact.html

*   第 3 列：www.stackdomain.com/index.html

*   第 4 列：www.example-domain.com/faq.html

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T11:37:33.933

```
@ECHO OFF
SETLOCAL
::
(
FOR /f "tokens=1*delims=:" %%a IN ('findstr /n /r "." ^<csv1.csv') DO (
 FOR /f "tokens=1*delims=:" %%c IN ('findstr /n /r "." ^<csv2.csv') DO ( 
  IF %%a==%%c FOR /f "tokens=1*delims=:" %%e IN ('findstr /n /r "." ^<csv3.csv') DO (
   IF %%a==%%e (
    FOR /f "tokens=1-4delims=," %%m IN ("%%b") DO (
     FOR /f "tokens=1-4delims=," %%r IN ("%%d") DO (
      FOR /f "tokens=1-4delims=," %%w IN ("%%f") DO (
       ECHO.%%m%%r%%w,%%n%%s%%x,%%o%%t%%y,%%p%%u%%z
      )
     )
    )
   )   
  )
 )
)
)>new.csv 
```

应该管用。

它的作用是，

1.  对于 file1，FINDSTR “输出”任何包含任何字符 ( ) 的行，该字符 ( `/r "."`) 前面是行号和冒号 ( `/n`)。此“输出”由 读取`FOR /f`并解析为 2 个标记，由冒号分隔（`tokens=1*`表示“第一个标记；该行的所有其余部分”），效果是将行号`%%a`和该行的其余部分放入，这是从原始`.csv`到的行`%%b`
2.  FOR EACH LINE 的`csv1`重复 for `csv2`，这次将行号放入`%%c`, line in`%%d`
3.  仅当行号匹配时，`csv3`使用 in 中的数字`%%e`和 in 中的文本重复 for`%%f`
4.  如果最后一个文件中的行号匹配，则解析每个`%%b`,`%%d`和`%%f`- 中的行文本，这次选择四列，用逗号分隔。该数据出现在`%%m`.. `%%p`, `%%r`.. `%%u`, `%%w`..中。`%%z`我们所要做的就是对接适当的部分并插入逗号。

完毕！

* * *

源和测试结果，包括运行时间（5 行）

```
start:21:45:40.87
end  :21:45:41.09

csv1.csv =========
www.domain.com/,www.nwdomain.com/,www.stackdomain.com/,www.example-domain.com/
www.domain.com/,www.nwdomain.com/,www.stackdomain.com/,www.example-domain.com/
www.domain.com/,www.nwdomain.com/,www.stackdomain.com/,www.example-domain.com/
www.domain.com/,www.nwdomain.com/,www.stackdomain.com/,www.example-domain.com/
www.domain.com/,www.nwdomain.com/,www.stackdomain.com/,www.example-domain.com/
csv2.csv =========
about,contact,index,faq
about,contact,index,faq
about,contact,index,faq
about,contact,index,faq
about,contact,index,faq
csv3.csv =========
.html,.html,.html,.html
.html,.html,.html,.html
.html,.html,.html,.html
.html,.html,.html,.html
.html,.html,.html,.html
new.csv =========
www.domain.com/about.html,www.nwdomain.com/contact.html,www.stackdomain.com/index.html,www.example-domain.com/faq.html
www.domain.com/about.html,www.nwdomain.com/contact.html,www.stackdomain.com/index.html,www.example-domain.com/faq.html
www.domain.com/about.html,www.nwdomain.com/contact.html,www.stackdomain.com/index.html,www.example-domain.com/faq.html
www.domain.com/about.html,www.nwdomain.com/contact.html,www.stackdomain.com/index.html,www.example-domain.com/faq.html
www.domain.com/about.html,www.nwdomain.com/contact.html,www.stackdomain.com/index.html,www.example-domain.com/faq.html
============= 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T15:40:16.130

在 VBScript 中：

```
Const delim = ","

Set fso = CreateObject("Scripting.FileSystemObject")

Set f1 = fso.OpenTextFile("File1.csv")
Set f2 = fso.OpenTextFile("File2.csv")
Set f3 = fso.OpenTextFile("File3.csv")

Do Until f1.AtEndOfStream Or f2.AtEndOfStream Or f3.AtEndOfStream
  a1 = Split(f1.ReadLine, delim)
  a2 = Split(f2.ReadLine, delim)
  a3 = Split(f3.ReadLine, delim)

  n = Min(UBound(a1), UBound(a2), UBound(a3))
  Dim aout(n)

  For i = 0 To n
    aout(i) = a1(i) & a2(i) & a3(i)
  Next

  WScript.StdOut.WriteLine Join(aout, delim)
Loop

f1.Close
f2.Close
f3.Close

Function Min(a, b, c)
  If a<=b Then
    If c<a Then
      Min = c
    Else
      Min = a
    End If
  Else
    If c<b Then
      Min = c
    Else
      Min = b
    End If
  End If
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T11:14:24.160

虽然不是真正的编程，但一种快速而肮脏的方法是在 Excel 中打开所有文件，创建一个新的`XLS`或`XLSX`文件，然后在新创建的文件的第一个单元格中使用此公式：

```
=[File1.csv]File1!A1&[File2.csv]File2!A1&[File3.csv]File3!A1 
```

其中`File1.csv`、`File2.csv`和`File3.csv`是您的 CSV 文件。然后拖动列/行以应用公式。

# jquery - jquery随着浏览器宽度调整大小动态获取宽度

> ID：15585698
> 
> 赞同：1
> 
> 时间：2013-03-23T10:31:52.950
> 
> 标签：jquery, width

我对 jQuery 不是很有经验，所以希望得到以下帮助，目前我可以获得指定 div 的宽度（以像素为单位），这很好，但我想进一步开发它并能够列出一些 div 来获取附加代码中的宽度。

你会看到我有#divA，我也想在同一个语句中得到#divB 和#divC。例如（我试过这个，但它不正确）>

```
var txt="";
txt+="Width of div: " + $("#divA, #divB, #divC").width() + "</br>";
txt+="Height of div: " + $("#divA, #divB, #divC").height();
$("#divA, #divB, #divC").html(txt); 
```

当视口/浏览器改变宽度时，输出的 div 宽度也可以即时更新 - 这可能吗？将节省页面刷新，这将很方便。

希望这是有道理的。

```
<script>
$(document).ready(function(){
$("button").click(function(){

var txt="";
txt+="Width of div: " + $("#divA").width() + "</br>";
txt+="Height of div: " + $("#divA").height();
$("#divA").html(txt);

});
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:50:37.853

有可能的。没有你的标记，我用 3 个 div 创建了我自己的（就像你的一样）。当窗口调整大小时，它们的高度和宽度会记录到控制台。它们的宽度设置为 %。我希望这有帮助。

让我知道这是否是你想要的。我不是 100% 确定你要的是什么。

**演示：**

[**工作演示**](http://jsfiddle.net/jRrZz/)

**Javascript：**

```
$(window).resize(function() {
    $(".divResized").each(function(i,item){
        item = $(item);
        console.log(item.width(),item.height())
    });
}); 
```

**html:**

```
<div id="divA" class="divResized">
    test
</div>
<div id="divB" class="divResized">
    test1
</div>
<div id="divC" class="divResized">
    test2
</div> 
```

**CSS：**

```
#divA{
    width:33%;
}

#divB{
    width:17%;
}

divC{
    width:50%;
} 
```

**编辑：** 如果你想把它写到另一个 div，这里有一个小例子：[链接](http://jsfiddle.net/jRrZz/1/)

# java - Java/Groovy 线程退出操作

> ID：15585699
> 
> 赞同：1
> 
> 时间：2013-03-23T10:32:24.387
> 
> 标签：java, multithreading, concurrency, groovy

我一直在四处寻找一段时间，检查池、执行器和期货的一些实现，但它们都不符合我的目的......或者至少我无法正确实现它。

我有一个类库，都类似于：

```
class X implements Runnable {
   @Override 
   public void run() { 
    // do sth
   }
} 
```

我无法修改它们。

我的班级：

```
class Controller {
   private int threadState;

   void threadStart() {
     // run a thread (made from any of the classes above)
     // and when it exits change the threadState value to V
   }
} 
```

我只需要在 threadStart() 中运行一个线程，它会在退出后执行一些操作，但 threadStart() 函数应该立即通过。

你有什么好主意可以用 Java 或/和 Groovy 解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:53:01.767

实现此目的的一种可能（但有些丑陋）的方法是在执行之前将您的任务包装在另一个可运行文件中。包装器将负责委派给实际任务，并在完成后调用回调方法：

```
void changeThreadState() {
    // This is your call back, in controller
}

void threadStart() {
    final X task = new X(); // task creation (variable has to be final)

    final Thread t = new Thread(new Runnable() {

        @Override
        public void run() {
            task.run();
            changeThreadState();
        }
    });

    t.start();
} 
```

*您当然会添加异常处理和所有类似的好东西。*

请注意，与直接在您的`threadStart`方法中创建线程相反，您还可以使用 Executor 或任何其他类型的线程池构造。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:36:08.927

您可以在 runnable 中向起始类添加引用，并在 run 方法完成时在父类上调用 changeState 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T11:49:17.943

您可以从 Groovy`as`运算符中受益，以将闭包强制为`Runnable`对象。此外，枚举对于状态来说很酷：

```
class X implements Runnable {
    void run() {
        sleep 1000
        println "async task done"
    }
}

enum State { NOT_STARTED, DONE }

class Controller {
        State state = State.NOT_STARTED
        Thread t
        void threadStart() {
            t = Thread.start { new X().run(); changeState() } as Runnable
        }

        void changeState() { state = State.DONE }
}

controller = new Controller()
controller.threadStart()

assert controller.state == State.NOT_STARTED
controller.t.join()
assert controller.state == State.DONE 
```

# php - 检索表的最后插入 ID 以用作另一个表中的外键

> ID：15585701
> 
> 赞同：0
> 
> 时间：2013-03-23T10:32:29.677
> 
> 标签：php, mysql, auto-increment, identifier

我有表（表 1 和表 2），表 1 的 ID 是表 2 的外键。在 INSERT 中，我想保存插入 table1 的最后一个 ID，以便插入 table2 的外键。在您的想法中，最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T10:40:29.553

在您的代码中使用这样的：

```
$result= mysql_query("Your SelectQuery");   
$lastId  = mysql_insert_id(); 
```

并使用`$lastId`变量。你可以得到你的`REsult`.

您还可以将`JOIN`s 用于连接 2 个表并`last_insert_id`用于表 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:34:36.510

使用[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)函数，获取最后插入的自动递增列的值。

# php - 以整洁的方式加载数十个数据夹具

> ID：15585703
> 
> 赞同：4
> 
> 时间：2013-03-23T10:32:36.800
> 
> 标签：php, symfony, doctrine, fixtures

我正在开发的应用程序中有一个`Media`实体，它与其他几个实体有关联：`Speaker`、`Tag`、`Category`等。

在下面的代码中，我展示了我为创建一些测试数据而编写的夹具。为了建立和分配数据之间的众多关系显然很长。

```
public function load(ObjectManager $manager)
{
    $videoType = new Mediatype();
    $videoType->setName('video');
    $videoType->setType('video');

    $manager->persist($videoType);

    $speaker1 = new Speaker();
    $speaker1->setName('Joe Bloggs');

    $speaker1->setBiography('Joe Bloggs bio.');

    $manager->persist($speaker1);

    $category1 = new Category();
    $category1->setName('PHP');
    $category1->setSlug('php');

    $manager->persist($category1);

    $tag1 = new Tag();
    $tag1->setName('PHPNW');
    $tag1->setSlug('phpnw');

    $manager->persist($tag1);

    $video1 = new Media();
    $video1->setMediatype($videoType);
    $video1->setSpeakers(
        new ArrayCollection(
            array(
                $speaker1
            )
        )
    );

    $video1->setCategories(
        new ArrayCollection(
            array(
                $category1
            )
        )
    );

    $video1->setTags(
        new ArrayCollection(
            array(
                $tag1
            )
        )
    );

    $video1->setDate(new \Datetime());
    $video1->setCreationDate(new \DateTime());
    $video1->setTitle('My video about PHP');
    $video1->setDescription('A video about PHP!');
    $video1->setContent('http://some.video-url.com');
    $video1->setLength('20:00:00');
    $video1->setRating(2.5);
    $video1->setVisits(100);
    $video1->setLanguage('EN');
    $video1->setHostName('PHP');
    $video1->setHostUrl('php');
    $video1->setStatus('pub');
    $manager->persist($video1);
    $manager->flush();
} 
```

现在我想用真实数据替换这个夹具，并`Media`在一个夹具中加载十几个实体。我可以复制和粘贴十几次并更改数据，但这很混乱且难以维护。有没有像这样加载大量相同类型实体的好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T20:16:53.840

我意识到[教义/数据夹具](https://github.com/doctrine/data-fixtures)包已经完全符合我的要求。

为此，我将每个实体加载到它们自己的夹具中，并`$this->addReference('admin-user', $user);`使用从另一个夹具访问它`$this->getReference('admin-user');`

加载依赖的夹具也很容易：

```
public function getDependencies()
{
    // fixture classes that this fixture is dependent on
    return array('MyDataFixtures\MyOtherFixture'); 
} 
```

所以现在我的灯具看起来像这样：

```
public function load(ObjectManager $manager)
{
    $video1 = new Media();
    $video1->setMediatype($this->getReference('video'));
    $video1->setSpeakers(
        new ArrayCollection(
            array(
                $this->getReference('joe-bloggs')
            )
        )
    );

    $video1->setCategories(
        new ArrayCollection(
            array(
                $this->getReference('php')
            )
        )
    );

    $video1->setTags(
        new ArrayCollection(
            array(
                $this->getReference('phpnw')
            )
        )
    );

    $video1->setDate(new \Datetime());
    $video1->setCreationDate(new \DateTime());
    $video1->setTitle('My video about PHP');
    $video1->setDescription('A video about PHP!');
    $video1->setContent('http://some.video-url.com');
    $video1->setLength('20:00:00');
    $video1->setRating(2.5);
    $video1->setVisits(100);
    $video1->setLanguage('EN');
    $video1->setHostName('PHP');
    $video1->setHostUrl('php');
    $video1->setStatus('pub');

    $manager->persist($video1);
    $manager->flush();
}

/**
 * Load this fixtures dependencies
 * @see https://github.com/doctrine/data-fixtures
 *
 * @return array
 */
public function getDependencies()
{
    return array(
        '...\LoadMediatypeData',
        '...\LoadSpeakerData',
        '...\LoadCategoryData',
        '...\LoadTagData'
    );
} 
```

# delphi - 如何注册ExpectedMemoryLeak

> ID：15585704
> 
> 赞同：2
> 
> 时间：2013-03-23T10:32:42.190
> 
> 标签：delphi, delphi-2010, fastmm

让我们从 D2010 下的简单代码开始：

```
var
  StringList: TStringList;
begin
  ReportMemoryLeaksOnShutdown := True;
  StringList := TStringList.Create;
  StringList.LoadFromFile('c:\fateh.txt');
  RegisterExpectedMemoryLeak(StringList); 
```

FastMM4 一次又一次地报告内存泄漏，即使使用`Addr(StringList)`参数，所以如何注册预期的 MemoryLeak 以及为什么上面的方法不起作用提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T10:46:24.147

您只注册了字符串列表对象的泄漏。您还需要注册您正在泄漏字符串列表拥有的所有对象。在这种情况下，它拥有对象`StringList.Count`的实例`string`。内存管理器不知道这些字符串归字符串列表对象所有，因此也会泄露。

这说起来容易做起来难。因为你需要找到代表字符串的内存块的开始。这与字符串的第一个字符有一个固定的偏移量，偏移量取决于您使用的 Delphi 版本。

在 Unicode Delphi 中，在 32 位代码中，偏移量为 12 个字节。所以下面将注册泄露的字符串：

```
for i := 0 to StringList.Count-1 do 
  if StringList[i]<>'' then
    RegisterExpectedMemoryLeak(PByte(StringList[i])-12); 
```

即使你这样做了，你仍然会得到两个报告的内存泄漏。至少其中一个由字符串列表拥有的动态数组解释`TStringList.FList`。如果您想注册该泄漏，那么您需要做更多的黑客攻击，因为您将不得不再次依赖实现细节来确定该数组的存储位置。

# java - 从列表中获取重复的元素

> ID：15585708
> 
> 赞同：1
> 
> 时间：2013-03-23T10:33:22.433
> 
> 标签：java

我需要从数据库中获取重复超过 3 次的元素。这是我的代码如何执行此操作：

```
 public static ArrayList<Integer> getPrice(List<Integer> list) {
    ArrayList<Integer> result = new ArrayList<Integer>();
    int val;
    HashMap<Integer, Integer> map = new HashMap<Integer, Integer>();
    for (int i = 0; i < list.size(); i++) {
        val = list.get(i);
        if (!map.containsKey(val)) {
            map.put(val, 1);
        } else {
            map.put(val, map.get(val) + 1);
        }
    }
    for (Map.Entry<Integer, Integer> entry : map.entrySet()) {
        if (entry.getValue() > 3) {
result.add(entry.getKey());
        }
    }
    return result;
} 
```

是不是又好又有效的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:51:14.987

如果您在数据库中获取列表，我会建议您使用 SQL。但是如果你想在 java 中这样做，你可以这样做：

```
public static List<Integer> getPrice(List<Integer> list) {
    SetUniqueList<Integer> result = new SetUniqueList<Integer>();
    for (Integer number : list) {
        int occurrences = Collections.frequency(list, number); 
        if (occurrences > 3) {
            result.add(number);
        }
    }
    return result;
} 
```

或者没有 org.apache.commons.collections.list：

```
public static List<Integer> getPrice(List<Integer> list) {
    Set<Integer> aSet = new HashSet<Integer>();
    for (Integer number : list) {
        if (Collections.frequency(list, number) > 3) {
            aSet.add(number);
        }
    }
    List<Integer> result = new ArrayList<Integer>();
    result.addAll(aSet);
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:46:28.593

可以有更有效的解决方案，但如果您考虑运行时应该没问题。实际上，您有 2 个 for 循环，其中计数较大的循环占主导地位，这导致 O(n) ，其中 n 是较大数组的元素数。这是一个很好的运行时。

# iphone - 在 mkmap 视图中在道路上绘制折线 - iphone

> ID：15585711
> 
> 赞同：2
> 
> 时间：2013-03-23T10:33:31.837
> 
> 标签：iphone, ios, google-maps-api-3, mkmapview, polyline

我正在制作一个基于导航的应用程序。在此应用程序中，我从用户选择的点绘制路线。

用于计算我使用的路线`Google direction API`。为了绘制路线，我使用了这段代码

```
- (void) drawRoute:(NSArray *) path
{
    NSInteger numberOfSteps = path.count;
    [self.objMapView removeOverlays: self.objMapView.overlays];

    CLLocationCoordinate2D coordinates[numberOfSteps];
    for (NSInteger index = 0; index < numberOfSteps; index++)
    {
        CLLocation *location = [path objectAtIndex:index];
        CLLocationCoordinate2D coordinate = location.coordinate;

        coordinates[index] = coordinate;
    }

    for( id <MKOverlay> ovr in [self.objMapView overlays])
    {
        MKPolylineView *polylineView = [[MKPolylineView alloc] initWithPolyline:ovr];

        if (polylineView.tag == 22)
        {
            [self.objMapView removeOverlay:ovr];
        }
        [polylineView release];
    }

    MKPolyline *polyLine = [MKPolyline polylineWithCoordinates:coordinates count:numberOfSteps];
    [self.objMapView addOverlay:polyLine];

} 
```

**问题：~ 当我绘制路线时，我遇到了一个问题，即它没有在路上绘制折线。为了解释这一点，我附上了一张图片**

![在此处输入图像描述](../Images/67e802f32755d050165f38907a70532f.png)

如图所示折线不在路上。

我用过`UICGDirections`，但有时不能正常工作。

请帮助我，我是 mapview 的新手。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:33:49.123

`http://maps.google.com/maps?output=dragdir&saddr=%@&daddr=%@`下面是一个示例 iPhone 应用程序，演示了使用URL在 MKMapView 上绘制路由

[MapWithRoutes](https://github.com/kadirpekel/MapWithRoutes)

您可以将此作为参考，因为它实现了您想要实现的相同目标。

# c# - 无法通过 Ajax 在 Jquery Modal 中弹出部分视图

> ID：15585713
> 
> 赞同：1
> 
> 时间：2013-03-23T10:33:38.193
> 
> 标签：c#, jquery, ajax, asp.net-mvc

我在谷歌上搜索并引用了许多博客，但我没有成功通过 Ajax 在 Jquery Modal 中弹出 Partial View。

这是主视图的代码：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<ApricaCRMEvent.Models.CRM.DatabaseEntities.Third_Party_Assistance>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
</asp:Content>
<asp:Content ID="Head" ContentPlaceHolderID="HeadContent" runat="server">
    <script src="<%: Url.Content("~/Scripts/jquery.validate.min.js") %>" type="text/javascript"></script>
    <script src="../../Scripts/jquery.unobtrusive-ajax.js" type="text/javascript"></script>
    <script src="<%: Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js") %>"
        type="text/javascript"></script>
    <script src="../../Scripts/MicrosoftAjax.js" type="text/javascript"></script>
    <script src="../../Scripts/MicrosoftMvcValidation.debug.js" type="text/javascript"></script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <!-- for datepicker -->
    <link rel="stylesheet" href="../../jquery-ui-1.8.17.custom/development-bundle/themes/base/jquery.ui.all.css">
    <script type="text/javascript" src="../../jquery-ui-1.8.17.custom/development-bundle/jquery-1.7.1.js"></script>
    <script type="text/javascript" src="../../jquery-ui-1.8.17.custom/development-bundle/ui/jquery.ui.core.js"></script>
    <script type="text/javascript" src="../../jquery-ui-1.8.17.custom/development-bundle/ui/jquery.ui.widget.js"></script>
    <script type="text/javascript" src="../../jquery-ui-1.8.17.custom/development-bundle/ui/jquery.ui.datepicker.js"></script>
    <link rel="stylesheet" href="../../jquery-ui-1.8.17.custom/development-bundle/demos/demos.css">
    <script type="text/javascript">
        $(function () {
            $("#Cheque_Date,#Sent_On,#Docket_Date,#Executed_Date,#Payment_Date").datepicker
            ({
                dateFormat: "dd/mm/yy",
                changeMonth: true,
                changeYear: true,
                showButtonPanel: true
            });
        });

        $(function () {
            $('a#addInvoiceDetail').click(function () {
                $('#dialog-form').load("/CRMService/Add_CRM_Invoice", function () {
                    $(this).dialog({ show: 'fade', hide: 'fade' });
                    bindForm(this);

                });
                return false;
            });
        });
        function bindForm(dialog) {
            $('form', dialog).submit(function () {
                $.ajax({
                    url: "/CRMService/Add_CRM_Invoice",
                    type: this.method,
                    data: $(this).serialize(),
                    success: function (result) {
                        if (result.success) {
                            alert('Invoice Added Successfully');
                            $('#dialog-form').dialog('close');
                        } else {
                            $('#dialog-form').html(result);
                            bindForm();
                        }
                    }
                });
                return false;
            });
        }

    </script>

    <% using (Html.BeginForm())
       { %>
    <%: Html.ValidationSummary(true) %>
    <fieldset>
        <legend>Edit Third Party Assistance</legend>
        <div id="Parts">
            <div id="Part1">
                <table id="entry">
                    <tr>
                        <th>
                            <%: Html.LabelFor(model => model.Service_Id) %>
                        </th>
                        <td>
                            <%: Html.DisplayFor(model => model.Service_Id) %>
                        </td>
                    </tr>
                    <tr>
                        <th>
                            <%: Html.LabelFor(model => model.CRM_Doctor_Request_Id) %>
                        </th>
                        <td>
                            <%: Html.DisplayFor(model => model.CRM_Doctor_Request_Id)%>
                        </td>
                    </tr>
                    <tr>
                        <th>
                            Bank
                        </th>
                        <td>
                            <%: Html.DropDownList("ddlBankList", (SelectList)ViewData["bankList"] as SelectList, "--Select Bank--", new { onchange = "FillBankDetail();" })%>
                            <%: Html.HiddenFor(model => model.Bank_Detail_Id)%>
                        </td>
                    </tr>
            <tr>
                <th>
                    <%: Html.LabelFor(model => model.Amount) %>
                </th>
                <td>
                    <%: Html.EditorFor(model => model.Amount) %>
                </td>
            <tr>
                <th>
                    <%: Html.LabelFor(model => model.Courier_Charge)%>
                </th>
                <td>
                    <%: Html.EditorFor(model => model.Courier_Charge)%>
                </td>
            </tr>
                        <th>
                            <%: Html.LabelFor(model => model.Is_Deleted) %>
                        </th>
                        <td>
                            <%: Html.DisplayFor(model => model.Is_Deleted) %>
                        </td>
                    </tr>
                    <tr>
                        <th>
                            <%: Html.LabelFor(model => model.Is_Cancellation_Charge) %>
                        </th>
                        <td>
                            <%: Html.DisplayFor(model => model.Is_Cancellation_Charge)%>
                        </td>
                    </tr>
                </table>
            </div>
            <div id="Part2">
                <p>

            <input type="button" id="addInvoiceDetail" Value="Add Invoice Detail"/>
                   </p>
            </div>
            <%: Html.HiddenFor(model => model.urlPath) %>
        </div>
        <br />
        <div>
            <input type="submit" value="Save" id="save" name="button" />&nbsp;
            <input type="submit" value="Cancelled" id="cancelled" name="button" />&nbsp;
            <input type="button" id="addInvoiceDetail" Value="Add Invoice Detail"/>
        </div>
    </fieldset>
    <div id="dialog-form"></div>
    <% } %>

</asp:Content> 
```

这是 PartialView 的代码：_Add_Invoice_Detail

```
<%using (Ajax.BeginForm(new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "addInvoiceDetail" }))
{%>
<%: Html.ValidationSummary(true) %>
<fieldset>
 <legend>Invoice</legend>
<table id="entry">
    <tr>
        <th>
            <%: Html.LabelFor(model => model.Vendor_Name)%>
        </th>
        <td>
            <%: Html.EditorFor(model => model.Vendor_Name)%>
        </td>
    </tr>
    <tr>
        <th>
            <%: Html.LabelFor(model => model.Payment_Date)%>
        </th>
        <td>
            <%: Html.EditorFor(model => model.Payment_Date)%>
        </td>
    </tr>
</table>
<p>
    <input type="submit" value="Save" />
</p>
</fieldset>
<%}%> 
```

行动方法：

```
public ActionResult Add_CRM_Invoice()
{
  Invoice model = new Invoice();
  if (Request.IsAjaxRequest())
  {
    return PartialView("_Add_CRM_Invoice",model);
  }
  else
  {
    return View("Add_CRM_Invoice",model);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:21:36.780

将您的操作方法更改为：

```
public ActionResult Add_CRM_Invoice()
{
  Invoice model = new Invoice();
  if (Request.IsAjaxRequest())
  {
    return PartialView("_Add_Invoice_Detail",model);
  }
  else
  {
    return View("Add_CRM_Invoice",model);
  }
} 
```

# c++ - SetCursor 不起作用

> ID：15585715
> 
> 赞同：3
> 
> 时间：2013-03-23T10:33:50.003
> 
> 标签：c++, sdl

我正在使用 SDL2 开发 Windows 应用程序。我想更改光标显示。我使用示例创建了光标，完全复制， [`SDL_CreateCursor`](http://wiki.libsdl.org/moin.fcg/SDL_CreateCursor) 然后`SDL_SetCursor`在`SDL_MOUSEMOTION`事件中调用，但似乎没有运气。

所以我只是跳入：

```
SDL_Cursor * cursor = SDL_CreateSystemCursor(SDL_SYSTEM_CURSOR_HAND); 
SDL_SetCursor(cursor); 
```

官方 wiki`SDL_CreateSystemCursor`向 TODO 状态报告的地方。我查看了源代码，它似乎已经实现并且可以创建一个有效的游标。但是，光标显示也没有改变。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:18:56.227

你真的应该发布你的实际代码，但我会在黑暗中试一试，看看我是否能猜出你做错了什么。您说“我使用从 SDL_CreateCursor 完全复制的样本创建了光标，然后在 SDL_MOUSEMOTION 事件中调用 SDL_SetCursor，但似乎没有运气。” 后来你继续说它似乎短暂地闪烁到正确的图像。

尝试在偶数循环之前更改 SDL 光标。这不是您每次鼠标移动时都想运行的东西，而是您在初始化时更改的东西。将代码移至事件循环之前和 SDL_Init 之后。

如果这不起作用，请在此处发布您的代码，以便我们实际看到您在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-10T21:46:35.140

GitHub 上有各种问题（[例如这个](https://github.com/midwan/amiberry/issues/148)问题）讨论了与 SDL 的光标设置功能相关的错误。

您可以改为手动创建自定义光标，如下所示：

声明鼠标对象。

```
int x = 0, y = 0; // The x and y position of the mouse 
Uint32 mouse = SDL_GetMouseState(&x, &y); // Relative to window. 
// Use SDL_GetGlobalMouseState(&x, &y); to get mouse position relative to desktop. 
```

不断更新游戏循环中的 x 和 y 坐标。

`mouse = SDL_GetMouseState(&x, &y)`

更新您选择的精灵以跟随鼠标的 x 和 y 坐标。

我建议您在实施此操作时将默认光标保持可见，以便您可以了解任何滞后/偏移并进行相应调整。当您感到高兴时，您可以使用以下行来隐藏默认光标：

`SDL_ShowCursor(SDL_DISABLE);`

您可以在此处阅读有关[SDL_GetMouseState()](https://wiki.libsdl.org/SDL_GetMouseState)的更多信息。

# java - Netbeans 7.1.2 按钮上的图标位置

> ID：15585723
> 
> 赞同：1
> 
> 时间：2013-03-23T10:34:41.627
> 
> 标签：java, netbeans

我们使用的是 Netbeans 7.1.2，我们在按钮上有我们的图标。但我们也想要按钮上的文本。

按钮很大（300, 60），图标很小（50,50） 我们想改变按钮上图标的默认位置，例如左边的图标和右边的按钮上的文本。

在设计托盘上找不到任何明显的解决方案，我们将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T11:44:44.207

按钮必须能够同时容纳图标和文本

您需要先编写文本，然后添加图标，您会看到图标向左移动，文本向右移动![在此处输入图像描述](../Images/cdc16b24cf86b432ec7133e049f55539.png)

上面的图像屏幕是先添加文本然后再添加图像的结果示例

如果要将文本切换到左侧，可以使用 Horizo​​ntalTextPosition 和 Horizo​​ntal Alignment

这是结果![左侧的文字](../Images/030559dbb4f5f1fc09594e4fdb6cabcd.png)

右键单击 >>> 属性单击任一 >>> **Horizo** ​​ntalTextPosition >>>> Horizo **​​ntalAlignment**以调整到您喜欢

如果您正在创建带有文本的小图标，您可以使用`margin`使按钮更小。

右键单击按钮并转到属性选择**边距**坐至**[1, 1, 1, 1]**或通过插入负数来降低

# java - Mybatis中无法绑定数据

> ID：15585726
> 
> 赞同：2
> 
> 时间：2013-03-23T10:35:01.827
> 
> 标签：java, mybatis

我正在尝试使用 <foreach> 但遇到一些问题。代码如下：

**Bean.java**

```
private class Bean{
 private String clientId;
//getter and setter 
} 
```

**道.xml**

```
<mapper namespace="...Dao">
    <resultMap id="bean" type="...Bean">
        <result property="clientId" column="CLIENT_ID" />
    </resultMap>

    <select id="getData" resultMap="bean" 
         parameterType="someBean">

             SELECT * 
             FROM tableClient                                       
            WHERE CLIENT_ID        IN 
            <foreach item="item" index="index" collection="list"
                open="(" separator="," close=")">
                trim(#{clientId})
                </foreach>
    </select>
</mapper> 
```

该查询打算在以下位置返回数据：

```
 List<Bean> getData(List<Bean> bean); 
```

虽然查询执行成功，但是在绑定数据时引发异常。 Stacktrace ：

```
2013-03-23 15:11:13,637 DEBUG  [getData] ==>  Preparing: SELECT * FROM tableClient WHERE CLIENT_ID IN ( trim(?) , trim(?) , trim(?) )  

2013-03-23 15:11:13,637 DEBUG  [SqlSessionUtils] Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@117c0eb] 
org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.binding.BindingException: Parameter 'clientId' not found. Available parameters are [list]

2013-03-23 15:11:13,637 DEBUG  [DataSourceUtils] Returning JDBC Connection to DataSource 
at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)
at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:365)
at $Proxy11.selectList(Unknown Source
.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:07:54.167

假设在您的列表中有具有 clientId 属性和 getter 的 bean，您必须替换`trim(#{clientId})`为`trim(#{item.clientId})`您在`foreach`by 项目上定义的 bean。

# perl - 我将如何在 iso-8859-8 perl 中获得新的谢克尔符号

> ID：15585727
> 
> 赞同：0
> 
> 时间：2013-03-23T10:35:03.353
> 
> 标签：perl, translation, currency

我正在使用 i18n/locales/he_IL (iso-8859-8) 在 perl 中进行翻译。但我无法使用这个获得新的谢克尔符号。如何在 perl 中获得相同的新谢克尔符号？

我正在使用此代码 *currency_symbol "<U05E9><U05D7>"。*

我也尝试过使用 currency_symbol "<U20AA>"

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T10:42:21.450

您可能指的是 U+20AA，新 SHEQEL SIGN (₪)？它不是[iso-8859-8](http://en.wikipedia.org/wiki/ISO/IEC_8859-8)字符集的一部分。您不能将其插入使用 iso-8859-8 编码的文档中。

XML 和 HTML 具有包含文档字符集之外的字符的机制。要在 iso-8859-8 XML 或 HTML 文档中包含此字符，您可以使用`&#x20AA;`.

如果你只想用那个字符创建一个 Perl 字符串，你可以使用

```
my $s = "\N{NEW SHEQEL SIGN}";
   or
my $s = chr(0x20AA); 
```

# mysql - 显示报告

> ID：15585732
> 
> 赞同：0
> 
> 时间：2013-03-23T10:35:31.987
> 
> 标签：mysql

请有人可以帮我解决这个问题。

我正在做一个工资系统，我被困在两者之间。我想从两个表中选择信息，这是我的表结构：

**`employee_tbl`**桌子：

```
user_id,
emp_id,
surname,
firstname,
email_address,
dob,
gender,
phone_number,
home_address,
appointment_date,
nationality,
gross_salary,
emp_date,
status 
```

**`other_allowance`**桌子：

```
allo_id, 
user_id, 
month_salary, 
feeding_allowance, 
outstation_allowance, 
leave_allowance, 
total_overtime, 
allo_date, 
```

我想要的是显示 ( `employee_name`, `feeding allowance`, `leave allowance`, `outstation allowance`)

**注意：**它将显示员工表中的所有员工，然后将那些在该特定月份有津贴的人的津贴放在他们的名字前面，例如显示所有员工，但把津贴放在有津贴的员工前面) 可以说是 2013 年 3 月的月份。

这是我自己的查询：

SELECT * FROM employee_tbl JOIN other_allowance WHERE month_salary = '3.2013'

但它显示每个员工 3 次。

有人可以解释一下你认为我应该做什么，我真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:40:31.710

我不认为给你准备好的查询对你有好处，所以这是方向。您应该在查询中使用 JOIN 运算符。看看这篇文章[MySQL JOIN Syntax](http://dev.mysql.com/doc/refman/5.5/en/join.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:43:53.590

使用这样的查询：

```
SELECT * 
FROM employee_tbl e
JOIN other_allowance a ON e.user_id = a.user_id
WHERE month_salary = 'xxxx' 
```

# vb.net - 对字符串变量使用流阅读器

> ID：15585734
> 
> 赞同：4
> 
> 时间：2013-03-23T10:35:40.017
> 
> 标签：vb.net, text, streamreader

是否可以让流阅读器读取字符串变量或文本框而不是文本文件？如果是，如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T10:38:39.937

不，但您可以改用[**`StringReader`**](http://msdn.microsoft.com/en-us/library/system.io.stringreader.aspx)该类。

`StringReader`并`StreamReader`提供相同的消耗接口，并且都继承自`TextReader`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-29T19:58:39.010

如果您需要从**String**或**StringBuilder创建新的***IO.Stream*

 ****```
Dim s As IO.Stream = New IO.MemoryStream(Text.ASCIIEncoding.Default.GetBytes(sb.ToString())) 
```

一些函数对仅使用 StringReader 不满意。****

# c - 为什么 C 中的这段代码会崩溃？（带指针）

> ID：15585743
> 
> 赞同：-1
> 
> 时间：2013-03-23T10:36:32.127
> 
> 标签：c, arrays, pointers

这是我的 C 类的一个练习，其中用户输入两个整数`a`，`b`并且我必须创建一个函数，该函数返回一个数组，该数组包含 和 之间的所有`a`整数`b`：

```
#include <stdlib.h>
#include <stdio.h>
#include <math.h>

int* arrayfromatob(int a,int b,int *p)
{
     int i;
     for(i=0;i<=b-a+1;i++)
            p[i]=a+i;
     return p;
} 

main()
{
      int a,b,*p,i,temp;
      puts("Give two integers:");
      scanf("%d %d",&a,&b);
      if(b<a)
      {
             temp=a;
             a=b;
             b=temp;
      }
      p=(int*)calloc(b-a+1,sizeof(int));
      if(p==NULL)
      {
                 puts("Could not allocate memory");
                 exit(1);
      }
      p=arrayfromatob(a,b,p);
      for(i=0;i<b-a+1;i++)
                printf("Number %d: %d\n",i+1,p[i]);
      free(p);
      system("pause");
} 
```

为什么这段代码会崩溃？（我认为这与 free(p); ，但我不确定......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T10:39:13.687

```
 for(i=0;i<=b-a+1;i++)
        p[i]=a+i; 
```

您正在访问`b - a + 2`元素。但是您在以下位置分配`b - a + 1`了元素：

```
p=(int*)calloc(b-a+1,sizeof(int)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T10:39:36.500

以下循环经过数组末尾：

```
 for(i=0;i<=b-a+1;i++) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T10:47:39.780

`for`函数中循环的最后一次迭代`arrayfromatob`尝试访问`p[b-a+1]`，这是超出范围的，因此会产生***未定义的行为***：

```
int* arrayfromatob(int a,int b,int *p)
{
    int i;
    for(i=0;i<=b-a+1;i++)   // <-- b-a+2 iterations
        p[i]=a+i;
    return p;
} 
```

此外，这个函数根本不会改变指针本身。它只是返回已传递给它的指针。您写道，您*“必须创建一个函数，该函数返回一个包含`a`和之间所有整数的数组`b`”*，但是您的函数不会创建任何数组，它只是将值分配给传递给它的数组元素。

另请注意，`calloc`零初始化分配的内存，无论如何您都将重写。简单`malloc`就足够了。这就是你的函数实际上应该是这样的：

```
// returns the pointer to the newly-created array
// caller should free() this pointer when he's done with it
int* arrayfromatob(int a, int b)
{
    int i, size;
    size = b - a + 1;
    int* p = malloc(size * sizeof(int));
    for (i = 0; i < size; i++)
        p[i] = a + i;
    return p;
} 
```

# matlab - 用于创建和导出绘图的 Matlab 脚本

> ID：15585748
> 
> 赞同：0
> 
> 时间：2013-03-23T10:37:30.450
> 
> 标签：matlab, plot, export

我在 Simulink 中有一个带有多路复用器块 Mux 的 Scope（我想在一个图中绘制多个波形）。模拟后，我需要以定义的形式（背景颜色、线条宽度等）将其导出为 eps/pdf 和 png 文件。

**实际问题：**

*   图例中的颜色不正确。

**我的梦想**：

*   在 Simulink 中开始仿真（点击 F5 开始）
*   然后调用我自己的函数（脚本）来导出它（例如*set_and_export(label x, label y, legend wave 1, legend wave 2, .. ,legend wave x)*）

最后的状态是实现我的梦想。

我的 m 文件：

```
% Get the data from Simulink
% First column is the time signal
% in Scope in Simulink : Array with time
[nothing, NumOfSgns] = size(ScopeData)
time = ScopeData(:,1);

% Plot all signals
hold on
for j=0:NumOfSgns-2,
    graph=plot(time,ScopeData(:,2+j:end),'Color', rand(1,3));

    % Signals description and position of the legend
    legend('firs wave form','next wave form','Location','SouthEast');
end
hold off 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:46:49.077

The problem is using both `legend` and `hold on`: Because you use `hold on`, MATLAB doesn't clear the old plot before drawing the new. But it doesn't store the previous plots' information for `legend`. You need to do this manually.

Here's some code (untested, don't have access to MATLAB at the moment):

```
titles = {'A', 'B', 'C', 'D'};
handles = zeros(1, length(titles));
figure;
hold on;
for i = 1 : length(titles)
    handles(i) = plot(1 : 10, rand(1, 10), 'Color', rand(1, 3));
end
legend(handles, titles{:}); 
```

So: Store the handles returned by `plot` in a vector and pass it to `legend` (which you need to call after the loop).

# android - ProgressDialog 旋转圈

> ID：15585749
> 
> 赞同：55
> 
> 时间：2013-03-23T10:37:30.507
> 
> 标签：android, android-layout, android-progressbar

我想像这样实现 ProgressDialog，没有额外的框架： ![图片](../Images/f2682e500f9905b660dbb506e6cc76f7.png)

但我得到了这个。我怎么能改变呢？

![在此处输入图像描述](../Images/77a56e39f71ad789b1e8a9165cc6ad60.png)

这是我的 ProgressDialog 代码。提前致谢

```
private ProgressDialog mProgressDialog;
   ............
   mProgressDialog = new ProgressDialog(activity);
   mProgressDialog.setIndeterminate(false);
   mProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
   ............
    public class ProgressTask extends AsyncTask <Fragment,Void,Fragment>{
            @Override
            protected void onPreExecute(){
                mProgressDialog.show();
            }

            @Override
            protected Fragment doInBackground(Fragment... arg0) {   
                    //my stuff is here
            }

            @Override
            protected void onPostExecute(Fragment result) {
                   mProgressDialog.dismiss();
            }
        } 
```

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-03-23T10:55:55.200

只需从布局更改`ProgressDialog`为：`ProgressBar`

**资源/布局.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/container">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
        //Your content here
     </LinearLayout>

        <ProgressBar
            android:id="@+id/progressBar"
            style="?android:attr/progressBarStyleLarge"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:visibility="gone"
            android:indeterminateDrawable="@drawable/progress" >
        </ProgressBar>
</RelativeLayout> 
```

**src/yourPackage/YourActivity.java**

```
public class YourActivity extends Activity{

private ProgressBar bar;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout);
    bar = (ProgressBar) this.findViewById(R.id.progressBar);
    new ProgressTask().execute();
}
private class ProgressTask extends AsyncTask <Void,Void,Void>{
    @Override
    protected void onPreExecute(){
        bar.setVisibility(View.VISIBLE);
    }

    @Override
    protected Void doInBackground(Void... arg0) {   
           //my stuff is here
    }

    @Override
    protected void onPostExecute(Void result) {
          bar.setVisibility(View.GONE);
    }
}
} 
```

**drawable/progress.xml**这是`ProgressBar`我用来更改默认颜色的自定义。

```
<?xml version="1.0" encoding="utf-8"?>

<!-- 
    Duration = 1 means that one rotation will be done in 1 second. leave it.
    If you want to speed up the rotation, increase duration value. 
    in example 1080 shows three times faster revolution. 
    make the value multiply of 360, or the ring animates clunky 
-->
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromDegrees="0"
    android:pivotX="50%"
    android:pivotY="50%"
    android:duration="1"
    android:toDegrees="360" >

    <shape
        android:innerRadiusRatio="3"
        android:shape="ring"
        android:thicknessRatio="8"
        android:useLevel="false" >
        <size
            android:height="48dip"
            android:width="48dip" />

        <gradient
            android:centerColor="@color/color_preloader_center"
            android:centerY="0.50"
            android:endColor="@color/color_preloader_end"
            android:startColor="@color/color_preloader_start"
            android:type="sweep"
            android:useLevel="false" />
    </shape>

</rotate> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-23T10:48:32.910

把这个 XML 只显示轮子：

```
<ProgressBar
    android:indeterminate="true"
    android:id="@+id/marker_progress"
    style="?android:attr/progressBarStyle"
    android:layout_height="50dp" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-31T01:42:46.523

我正在使用`View.INVISIBLE`and`View.VISIBLE`并且`ProgressBar`会慢慢闪烁而不是一直可见，切换到`View.GONE`and`View.VISIBLE`并且它工作得很好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-22T09:09:13.027

> ProgressBar Dialog - 无需一直编写自定义 progressBar 代码，创建一个下面的类并使用

```
public class DProgressbar {
    Dialog progressDialog ;
    public DProgressbar(Context context) {
        progressDialog = new Dialog(context);
        progressDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        progressDialog.setContentView(R.layout.dialog_api_loading);
        progressDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));
        progressDialog.setCancelable(false);
    }

    public void show(){
        progressDialog.show();
    }

    public void dismiss(){
        progressDialog.dismiss();
    }

} 
```

> R.layout.dialog_api_loading

```
 <androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    app:cardCornerRadius="@dimen/size_10">

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@color/white"
        android:orientation="horizontal"
        android:padding="20dp">
<ProgressBar
            android:layout_width="@dimen/size_20"
            android:layout_height="@dimen/size_20" />
            <TextView
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_marginHorizontal="@dimen/txt_distance_5"
            android:gravity="center"
            android:text="Loading..." />
    </LinearLayout>
</androidx.cardview.widget.CardView> 
```

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2014-09-25T11:06:14.450

试试这个.........

```
ProgressDialog pd1;
pd1=new ProgressDialog(<current context reference here>);
pd1.setMessage("Loading....");
pd1.setCancelable(false);
pd1.show(); 
```

解雇……

```
if(pd1!=null)
 pd1.dismiss(); 
```

# php - php ticks 是非阻塞的吗

> ID：15585750
> 
> 赞同：6
> 
> 时间：2013-03-23T10:37:33.240
> 
> 标签：php, nonblocking

我偶然遇到了这样的事情：

```
<?php
    declare(ticks=1);

    // using a function as the callback
    register_tick_function('my_function', true);

    // using an object->method
    $object = new my_class();
    register_tick_function(array(&$object, 'my_method'), true);
?> 
```

可以在[register_tick_function](http://www.php.net/manual/en/function.register-tick-function.php)找到。

我想知道在 php 中使用它是否阻塞？

**编辑：** 我的意思是，如果我在同一个线程上启动了一个以上的 php 滴答声，它是否能够在其他滴答声运行时在后台处理 IO，或者它是否需要等待每个滴答声放弃控制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T10:46:25.553

勾选功能被阻塞。PHP 通常不（本机）支持在同一请求中并行执行。所以不，您将无法在后台处理 IO 或类似的事情。

ticks 所做的是或多或少地在每个语句之后插入对 tick 函数的调用。所以你得到的是这样的：

```
tick();
$a = 1;
tick();
$b = 2;
tick();
// ... 
```

它的行为就像那样:)

不过，只是为了让您了解这是否真的很重要：当在 JS 中执行回调（例如触发超时/事件）时，它就像阻塞一样。

# drawing - 用画布画圆

> ID：15585754
> 
> 赞同：0
> 
> 时间：2013-03-23T10:38:17.200
> 
> 标签：drawing, html5-canvas

当我尝试画这个时，我看不到我们的轮廓有任何实心圆圈..

```
 var ball = (function () {
            function ball(x, y) {
                this.color = "white";
                this.x = x;
                this.y = y;
                this.radius = Math.round(Math.random() * ball.MAX_RADIUS);
            }
            ball.MAX_RADIUS = 5;
            ball.prototype.draw = function (context) {
                context.fillStyle = "#ffffff";
                context.arc(this.x, this.y, this.radius, 0, 2 * Math.PI, false);
            };
            ball.prototype.update = function () {
            };
            return ball;
        })(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T14:15:49.187

你很亲近！

您总是必须在绘制之前执行**context.beginPath()并在****context.fill()**实际执行填充绘制。

顺便说一句，您的圆形填充颜色是白色的，因此您无法在纯白色背景下看到它。我将您的填充颜色更改为红色只是为了下面的测试......

这是代码：

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");

     var ball = (function () {
                function ball(x, y) {
                    this.color = "white";
                    this.x = x;
                    this.y = y;
                    this.radius = Math.round(Math.random() * ball.MAX_RADIUS);
                }
                ball.MAX_RADIUS = 5;
                ball.prototype.draw = function (context) {
                    context.fillStyle = "red";
                    context.beginPath();
                    context.arc(this.x, this.y, this.radius, 0, 2 * Math.PI, false);
                    context.fill();
                };
                ball.prototype.update = function () {
                };
                return ball;
            })();

    var myNewBall=new ball(100,100);
    myNewBall.draw(ctx);

}); // end $(function(){});
</script>

</head>

<body>

    <canvas id="canvas" width=300 height=300></canvas>

</body>
</html> 
```

# spring - 在 DelegatingFilterProxy 中设置 HTTP 标头

> ID：15585755
> 
> 赞同：1
> 
> 时间：2013-03-23T10:38:34.103
> 
> 标签：spring, filter, http-headers

我有一个过滤器，我正在使用 Springs delegatingFilterProxy 来拦截 Web 服务的传入请求。根据是否设置了标志，我想允许请求继续，否则我想设置一个请求标头，当端点检查时将指示是否允许请求继续。我想将代码放在过滤器中以抽象检查标志的逻辑。

我如何修改过滤器中的请求标头（简单的代码示例会很棒），这是可以接受的做法，还是应该从过滤器发送响应而不是将决策下推到端点？

```
 public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
if(somecondition)
    set request header and forward to endpoint
else 
    forward to endpoint without extra header 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T11:11:42.553

您需要创建一个 FakeRequest 来解决它

FakeHeadersRequest

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Enumeration;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletRequestWrapper;

public class FakeHeadersRequest extends HttpServletRequestWrapper {

    private Map<String, List<String>> headers = new HashMap<String, List<String>>();

    public FakeHeadersRequest(HttpServletRequest request) {
        super(request);
    }

    @Override
    public String getHeader(String name) {
        if (headers.containsKey(name)) {
            return headers.get(name).get(0);
        }

        return super.getHeader(name);
    }

    public void addHeader(String header, String value) {
        List<String> list = headers.get(header);
        if (list == null) {
            list = new ArrayList<String>();
            headers.put(header, list);
        }
        list.add(value);
    }

    public void setHeader(String header, String value) {
        List<String> list = new ArrayList<String>();
        headers.put(header, list);
        list.add(value);
    }

    @SuppressWarnings({ "rawtypes", "unchecked" })
    @Override
    public Enumeration getHeaderNames() {
        List<String> list = new ArrayList<String>();

        HttpServletRequest request = (HttpServletRequest) getRequest();
        Enumeration<String> e = request.getHeaderNames();
        while (e.hasMoreElements()) {
            list.add(e.nextElement());
        }

        list.addAll(headers.keySet());

        return Collections.enumeration(list);
    }
} 
```

FakeHeaderFilter

```
import java.io.IOException;

import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;

public class FakeHeaderFilter implements Filter {
    public void init(FilterConfig filterConfig) {
    }

    public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {
        boolean condition = false;
        if (condition && request instanceof HttpServletRequest) {
            FakeHeadersRequest req = new FakeHeadersRequest(
                    (HttpServletRequest) request);
            req.setHeader("new-header", "some-value");
            chain.doFilter(req, response);
        } else {
            chain.doFilter(request, response);
        }

    }

    public void destroy() {
    }

} 
```

也[参考这个](http://vangjee.wordpress.com/2009/02/25/how-to-modify-request-headers-in-a-j2ee-web-application/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T12:18:45.470

请求属性更适合此目的`ServletRequest.get/setAttribute()`。你有什么理由不能使用它们吗？

# java - Java 数组效率

> ID：15585757
> 
> 赞同：3
> 
> 时间：2013-03-23T10:38:39.607
> 
> 标签：java, multidimensional-array, performance, memory-efficient

我不是 100% 确定起作用的机制，所以我决定在这里发布以进一步澄清。

我正在做一个应该用 Java 处理大量数据的项目（它必须是 Java）。我希望它尽可能高效。高效我的意思是内存和速度计算应该排在第一位，可读性应该排在第二位。

现在我有两种方法来存储我的数据：创建一个数组`MyObject`

```
1) MyObject[][] V = new MyObject[m][n] 
```

或者创建两个 int 数组：

```
2) int[][] V = new int[m][n]

3) int[][] P = new int[m][n] 
```

显然`MyObject`包含至少两个字段和一些方法。现在我注意到，在循环遍历`MyObject`数组以分配值时，我必须调用`new`，否则我会得到一个空指针异常。这意味着`new`第 1 行还不够。`P[i][j]=n`考虑到数组也是 Java 中的对象，这是否比为了争论而更昂贵的操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T10:45:50.890

我经常通过分析发现，用几个标量数组替换一个对象数组可以提高内存消耗和性能。

但是，只有分析才能判断在您的情况下它是否值得优化。

一个好的分析器可以让你测量代码的性能和内存占用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T10:54:30.103

> > 考虑到数组也是 Java 中的对象，这是一个比 P[i][j]=n 更昂贵的操作吗？

在第一种情况下，您创建一个数组对象，用于存储数组类型的其他对象。数组对象和要存储在数组中的对象都需要实例化，这意味着您将需要`m * n + 1`对象实例化以及`(m * n + 1) * objectSize`内存消耗。

在第二种情况下，您只需实例化数组对象；int 原语不是对象，所以这应该更快，内存效率也更高，因为对象内存大小比 int 大几倍。在这里，您基本上有 1 个对象实例化和`(m * n) * intSize + objectSize`内存消耗。

使用原语的另一个原因是，当用作局部变量时，它们被保存在堆栈中。在将计算值存储在数组中之前，您可能会在方法中使用中间局部变量，并且这些变量的内存分配/释放时间是堆上对象的数倍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T09:09:35.837

为了快速处理真正大量的数据，最好将数据放置在单个连续的内存块中，这样您一起访问的数据彼此靠近。这应该最大限度地减少缓存未命中，这是当今最糟糕的性能杀手之一。

在 java 中，您可以通过仅使用一个单一的一维基元数组来实现这一点。如果您使用两个数组甚至一个二维数组，则不再保证数据位于一个连续块中。

另一个稍微复杂的解决方案是使用堆外数据结构，如下所示：http: [//mechanical-sympathy.blogspot.com/2012/10/compact-off-heap-structurestuples-in.html](http://mechanical-sympathy.blogspot.com/2012/10/compact-off-heap-structurestuples-in.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T10:44:59.830

首先，你必须在java中使用List或Set ie Collections而不是数组。因为您可能不知道需要处理的数据大小。此外，集合具有 API 方法，可让您轻松执行操作，例如插入元素或删除元素。使用数组非常复杂且容易出错，因为您可能需要一次又一次地对其进行迭代，并且还必须在编译时确定大小，如果您有可变大小的数据，这是不可能的。

此外，在运行时分配内存（即使用 new 关键字）非常昂贵，然后只需将值分配给已经存在的对象，即 p[i][j]=v;

# xtend - xtend 2.4.0 文档中的注释示例不起作用

> ID：15585771
> 
> 赞同：1
> 
> 时间：2013-03-23T10:39:51.693
> 
> 标签：xtend

以下代码来自 xtend 的官方网站。

```
@TypeAnnotation("some value")
  class MyClass {
    @FieldAnnotation(children = #[ @MyAnno(true), @MyAnno(false) ])
    String myField5\.  

    @MethodAnnotation(children = #[ @MyAnno(true), @MyAnno ])
    def String myMethod(@ParameterAnnotation String param) {
      //...
    }
} 
```

但是“@MethodAnnotation(children = #[ @MyAnno(true), @MyAnno ])”这行不起作用。日食报告：

输入 ']'不匹配输入 '@' 期待 ']'没有可行的替代方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:31:44.723

对不起，你偶然发现了一个错误。能否请您在[eclipse](https://bugs.eclipse.org/bugs/enter_bug.cgi?product=Xtend)提交一张票。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:02:46.957

似乎是 2.4.0 中的错误。该问题可以在[Bugzilla](https://bugs.eclipse.org/bugs/show_bug.cgi?id=404273)中找到。

# mongodb - MongoDB查询排序计数

> ID：15585778
> 
> 赞同：0
> 
> 时间：2013-03-23T10:40:58.097
> 
> 标签：mongodb, bson

嗨，我有 2 条游戏记录：

**游戏 1**包含玩家列表 p1( **alice** )、p2( **bob** )、p3( **matt** )、p4( **tom** )

**游戏 2**包含玩家列表 p1( **alice** )、p2( **bob** )、p3( **jack** )、p4( **tom** )

我想查询我的 MongoDB 收藏游戏，以对与**BOB**出现在同一游戏中的最常出现的人进行排序。在这种情况下，一个好的结果是：

```
Alice: appear 2 times
Tom:  appear 2 time
Matt: appear 1 time
Jack: appear 1 time 
```

在 SQL 中，我做了：

```
 SELECT idplayer, COUNT(idplayer) AS countplayer 
             FROM (SELECT b.idgame, b.idplayer 
             FROM associations a, associations b 
             WHERE a.idplayer="BOB" 
             AND b.idgame=a.idgame 
             AND b.idplayer <> "BOB"
             ORDER BY b.idgame DESC LIMIT 1000) as c
             GROUP BY idplayer 
             ORDER BY countplayer DESC LIMIT 5; 
```

使用 mongo 我正在尝试类似的东西：

```
gamesCollection.find("{playerid : #}","BOB").sort(//counter).limit(5)... 
```

有人可以帮我修复 MongoDB 的这个查询吗？谢谢

**编辑：**

我想我越来越接近我想要的，但仍然是错误的查询：

```
> db.games.aggregate("[{ $match: {playerid : 'bob'} }, {$group : { _id:null, cou
nt: { $sum: 1}} } ]") 
```

请提出解决方案。谢谢

**编辑 2**

游戏文档示例：

```
{ "_id" : ObjectId("514d9afb6e058b8a806bdbc0"), "gameid" : 1, "numofplayers" : 3,
 "playersList" : [{"playerid" : "matt" },{"playerid" : "bob"},{"playerid" : "alice"} ] } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:15:18.457

如果原始文档如下所示：

```
{
   _id: ObjectId(...),
   players: [...]
} 
```

然后你可以使用`aggregate`：

```
var playerId = 'bob';
db.records.aggregate([
  { $match: { players: playerId }},
  { $unwind: '$players' },
  { $match: { players:  { $ne: playerId } } },
  { $group: { _id: { player: '$players' }, times: { $sum : 1} } },
  { $sort: { times: -1 } }
]) 
```

**更新：**

对于文档：

```
{ 
  "_id" : ObjectId("514d9afb6e058b8a806bdbc0"), 
  "gameid" : 1, "numofplayers" : 3,
  "playersList" : [
    {"playerid" : "matt" },
    {"playerid" : "bob"},
    {"playerid" : "alice"} 
   ] 
} 
```

查询是：

```
var playerId = 'bob';
db.records.aggregate([
  { $match: { 'playersList.playerid': playerId }},
  { $unwind: '$playersList' },
  { $match: { 'playersList.playerid':  { $ne: playerId } } },
  { $group: { _id: '$playersList.playerid', times: { $sum : 1} } },
  { $sort: { times: -1 } }
]) 
```

// 我还发现`$group`操作符可以更简单

# jquery - 如何在图像中使用 raphael 和 raphael 自由变换插件？

> ID：15585779
> 
> 赞同：0
> 
> 时间：2013-03-23T10:41:02.790
> 
> 标签：jquery, raphael

我一直在寻找很长一段时间是否有任何教程显示拉斐尔自由变换图像？下面的代码是我尝试过但不起作用的。

```
<div id="canvas">
<img src="img/product/tmp/202/1.jpeg">
<img src="img/product/tmp/202/2.jpeg">
</div>

var paper = Raphael($("#canvas"));
var img = $('#canvas').children('img').eq(0);
var ft = paper.freeTransform(img);
ft.showHandles(); 
```

[http://jsfiddle.net/DZc8f/1/](http://jsfiddle.net/DZc8f/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:47:16.397

```
Raphael.fn.freeTransform = function(subject, options, callback) {
   ----
------- 
```

}

[这是演示](http://jsfiddle.net/Vqn93/4/)

# ios - 重启视图控制器

> ID：15585784
> 
> 赞同：3
> 
> 时间：2013-03-23T10:41:37.037
> 
> 标签：ios, objective-c, cocoa

为了测试和编写代码，我需要重新启动我的 GameViewContrller

```
GameViewController *controller = [[GameViewController alloc] initWithNibName:@"GameViewController" bundle:nil];
[self presentModalViewController:controller animated:NO]; 
```

此方法重新启动 viewController 但由于我的操作/进程正在进行而全部存储在内存中，因为应用程序内存随着每次不重新启动而增加。我认为这不是正确的方法，并且想知道如何用内存完全使 viewController 负担过重，删除所有进程并重新开始。

**更新**

```
- (IBAction)restartButtonPress {
  //  GameViewController *controller = [[GameViewController alloc] initWithNibName:@"GameViewController" bundle:nil];
  //  [self presentModalViewController:controller animated:NO];

[self.view setNeedsDisplay];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T10:46:53.853

调用`[self.view setNeedsDisplay];`该用途以重新加载您的视图。还可以使用`[self viewDidLoad]`方法，但这对我们不利，而且我们不会手动调用 viewDidLoad。所以你可以使用`setNeedsDisplay`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:45:25.667

这只会开始一个新的。它不会重置旧的。

要删除旧的，您需要调用`[controller release]`旧的。

# javascript - 使用 if 语句使用 javascript 隐藏 div

> ID：15585786
> 
> 赞同：0
> 
> 时间：2013-03-23T10:41:54.467
> 
> 标签：javascript, session, xhtml

当值不相等时，我想使用 javascript 隐藏 ID 为 apDiv1 的 div，我正在使用以下代码。但它不起作用。

```
<script>
/* <![CDATA[ */
if (#{sessionScope['userdet']['email']}!=#{sessionScope['frienddet']['email']}){
$('#apDiv1').hide();
}
/* ]]> */
</script> 
```

渲染后的代码如下：

```
<script>
    /* <![CDATA[ */
    if (amlan@ymail.com != atinr4@gmail.com){
     $('#apDiv1').hide();
    }
    /* ]]> */
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:43:36.700

呈现的代码不是有效的 JS - 您在`if`条件上有语法错误，因为您需要引用包含电子邮件地址的字符串。也就是说，您呈现的代码应如下所示：

```
if ("amlan@ymail.com" != "atinr4@gmail.com"){ 
```

或者您可以使用单引号，JS 允许使用任何一种（只要它们匹配任何特定的字符串文字）。

我不知道您的源语言是什么，但我假设您可以通过以下方式获得所需的渲染结果：

```
if ("#{sessionScope['userdet']['email']}"!="#{sessionScope['frienddet']['email']}"){ 
```

**编辑：**您是否在页面中包含 jquery.js 文件？您没有在问题上使用 jquery 标记，但该`$("#apDiv1").hide()`部分使用 jQuery 函数`$()`和`.hide()`. 如果您没有 jQuery，请尝试以下操作：

```
document.getElementById("apDiv1").style.display = "none"; 
```

此外，如果脚本块出现在它之后，或者如果您将代码包装在文档就绪处理程序中，您显示的代码将只能找到 div，如下所示（尽管这也假设 jQuery 可用）：

```
$(document).ready(function() {

    // your other code here    
}); 
```

使用 onload 处理程序的非 jQuery 版本：

```
window.onload = function() {

    // your other code here
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T10:44:08.027

您需要将 2 个（电子邮件）值括在引号中

# ruby-on-rails - 为什么 .first 不会在我的模型表中返回“第一个”结果（即 ID=1）？

> ID：15585789
> 
> 赞同：1
> 
> 时间：2013-03-23T10:42:36.750
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

当我这样做时`Question.first`，它会返回一条记录`id=7`，但是....`ID=1`在我的数据库中有一个并且它不会返回它。

```
 > Question.first
  Question Load (1.8ms)  SELECT "questions".* FROM "questions" LIMIT 1
 => #<Question id: 7, so_id: 1642028, creation_date: "2009-10-29 06:57:45", score: 1812, accepted_answer_so_id: 1642035, title: "What is the name of this operator: &quot;--&gt;&quo...", view_count: 124958, link: "http://stackoverflow.com/questions/1642028/what-is-...", body: "<p>After reading \"<a href=\"http://groups.google.com...", answer_count: 17, is_answered: true, owner: "GManNickG", created_at: "2013-03-23 07:02:48", updated_at: "2013-03-23 07:02:48", accepted_answer_id: nil> 
1.9.3p392 :026 > Question.find(1)
  Question Load (1.9ms)  SELECT "questions".* FROM "questions" WHERE "questions"."id" = $1 LIMIT 1  [["id", 1]]
 => #<Question id: 1, so_id: 11227809, creation_date: "2012-06-27 13:51:36", score: 4072, accepted_answer_so_id: 11227902, title: "Why is processing a sorted array faster than an uns...", view_count: 216266, link: "http://stackoverflow.com/questions/11227809/why-is-...", body: "<p>Here is a piece of C++ code that shows some very...", answer_count: 9, is_answered: true, owner: "GManNickG", created_at: "2013-03-23 07:02:10", updated_at: "2013-03-23 10:27:17", accepted_answer_id: nil> 
```

两者都是不同的问题，但真正的问题是为什么不`.first`返回记录`id=1`？

**编辑 1**

这是我的`Question`表的架构：

```
 create_table "questions", :force => true do |t|
    t.integer  "so_id"
    t.datetime "creation_date"
    t.integer  "score"
    t.integer  "accepted_answer_so_id"
    t.string   "title"
    t.integer  "view_count"
    t.string   "link"
    t.text     "body"
    t.integer  "answer_count"
    t.boolean  "is_answered"
    t.string   "owner"
    t.datetime "created_at",            :null => false
    t.datetime "updated_at",            :null => false
    t.integer  "accepted_answer_id"
  end

  add_index "questions", ["accepted_answer_so_id"], :name => "index_questions_on_accepted_answer_so_id"
  add_index "questions", ["so_id"], :name => "index_questions_on_so_id"
  add_index "questions", ["title"], :name => "index_questions_on_title" 
```

**编辑 2**

刚刚确认它也发生在另一个模型`Answer`中（所以这里发生了一些时髦的事情）：

```
> Answer.first
  Answer Load (1.0ms)  SELECT "answers".* FROM "answers" LIMIT 1
 => #<Answer id: 6629, so_id: 1048093, creation_date: "2009-06-26 08:58:19", is_accepted: false, question_id: 400, owner: "Christian Hayter", score: 10, created_at: "2013-03-23 09:21:33", updated_at: "2013-03-23 09:23:32", body: "<p>I'd prefer <code>INFORMATION_SCHEMA.COLUMNS</cod..."> 
1.9.3p392 :008 > Answer.find(1)
  Answer Load (44.7ms)  SELECT "answers".* FROM "answers" WHERE "answers"."id" = $1 LIMIT 1  [["id", 1]]
 => #<Answer id: 1, so_id: 11227902, creation_date: "2012-06-27 13:56:42", is_accepted: true, question_id: 1, owner: "Mysticial", score: 6423, created_at: "2013-03-23 07:02:10", updated_at: "2013-03-23 09:43:12", body: "<p><strong>You are the victim of <a href=\"http://en..."> 
```

虽然，它不会在另一个模型中这样做：

```
> Tag.first
  Tag Load (24.5ms)  SELECT "tags".* FROM "tags" LIMIT 1
 => #<Tag id: 1, name: "java", num_questions: 388310, created_at: "2013-03-23 07:02:09", updated_at: "2013-03-23 07:02:09"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T10:50:01.753

您按照从磁盘读取的顺序获得结果。它们不是按您的主键排序的。

您可以在 question.rb 文件中执行此操作

```
default_scope order(:id) 
```

当你这样做`first`或`all`

要不就

```
 Question.order(:id).first 
```

# qt - 从 QFrame 和 QTabWidget 中删除边框线

> ID：15585793
> 
> 赞同：7
> 
> 时间：2013-03-23T10:42:47.907
> 
> 标签：qt, qtabwidget

请查看附图以了解问题。在您可以看到的图像中，如何删除边框线或将它们的颜色设置为 QDialog 颜色。谢谢。

![显示线条的图像](../Images/8fa89bce88eddc153285bf0bd1c3c2d1.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-05-27T16:53:40.113

尝试将 QTabWidget 样式表设置为 0 边框。

例如：

```
tabwidget.setStyleSheet("QTabWidget::pane { border: 0; }"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-22T05:41:27.027

使用 qt 设计器，单击框架，转到属性名称样式表类型边框：0

# eclipse-templates - eclipse模板变量操作

> ID：15585794
> 
> 赞同：3
> 
> 时间：2013-03-23T10:42:50.100
> 
> 标签：eclipse-templates

有没有办法在 Eclipse 模板中操作变量的值？

例如，在以下模板代码中：

```
public class ${file} extends Activity
{
@Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_${enclosing_project});
    }
}
//Change the leading letter of ${enclosing_project} to lower case and remove the .java from ${file} 
```

我希望插入的文件名是 myFile 而不是 myFile.java，我希望插入的项目名称是 myProject 而不是 MyProject。

# php - 如何在where条件下设置多列不等于零

> ID：15585797
> 
> 赞同：-1
> 
> 时间：2013-03-23T10:43:36.087
> 
> 标签：php, mysql, database, mysqli

**在mysql/oracle**中有什么方法可以设置**多列！= 0**

我在表中有 10+ 列，我想**选择那些具有值的列！= 0**

一种方法是使用**与**表中列数一样多的次数。

例子是：

```
 SELECT `id`, `user_name`, `reference_id`, `adventure`, `beach`, `culture`,
   `festival`, `food`, `fun`, `biking`, `ski`, `surf`, `family`, `couple`,
   `single` FROM `ratings` 
    WHERE `adventure`!=0 
    AND `beach`!=0 
    AND `culture`!=0
    AND `festival`!=0
    AND `food`!=0
    AND `fun`!=0
    AND `biking`!=0
    AND `ski`!=0
    AND  `surf`!=0
    AND `family`!=0
    AND `couple`!=0
    AND `single`!=0 
```

有没有更好的方法来做到这一点，**而不是添加那么多 AND/OR**

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T10:46:32.057

试试这个：

```
SELECT `id`, `user_name`, ...
FROM `ratings` 
WHERE 0 NOT IN (`adventure`, `beach`, `culture`, `festival`, ...) 
```

# runtime-error - 单击以编程方式定义的 NSPopUpButton 时出错

> ID：15585802
> 
> 赞同：0
> 
> 时间：2013-03-23T10:44:05.270
> 
> 标签：runtime-error, nspopupbutton, clicking

此错误仅发生特定时间（在创建新文档后）。如果我保存并重新打开，它可以工作。任何想法？有人有同样的错误吗？

```
2013-03-23 11:36:52.977 Demiurge[97164:303] *** -[__NSPlaceholderDictionary initWithObjects:forKeys:count:]: attempt to insert nil object from objects[0]
2013-03-23 11:36:52.979 Demiurge[97164:303] (
    0   CoreFoundation                      0x00007fff89814b06 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff833c53f0 objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff897d91d7 -[__NSPlaceholderDictionary initWithObjects:forKeys:count:] + 119
    3   CoreFoundation                      0x00007fff897e76bb +[NSDictionary dictionaryWithObject:forKey:] + 59
    4   AppKit                              0x00007fff85b428c4 -[NSPopUpButtonCell _menuLocationForEvent:inCellFrame:ofView:] + 581
    5   AppKit                              0x00007fff85b430fd -[NSPopUpButtonCell trackMouse:inRect:ofView:untilMouseUp:] + 132
    6   AppKit                              0x00007fff857cbbcc -[NSControl mouseDown:] + 820
    7   AppKit                              0x00007fff857c353e -[NSWindow sendEvent:] + 6853
    8   AppKit                              0x00007fff857bf674 -[NSApplication sendEvent:] + 5761
    9   AppKit                              0x00007fff856d524a -[NSApplication run] + 636
    10  AppKit                              0x00007fff85679c06 NSApplicationMain + 869
    11  Demiurge                            0x0000000100001772 main + 34
    12  libdyld.dylib                       0x00007fff83d377e1 start + 0
    13  ???                                 0x0000000000000003 0x0 + 3
) 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T14:53:37.713

NSDictionaries 中不能有 nil。看起来恢复自动保存状态已损坏。不要将 autosaveId 分配给按钮或形成正确的占位符字典，其中没有 nils。

# treeview - Notepad++ 是否有 DOM 导航器/HTML 树视图

> ID：15585805
> 
> 赞同：2
> 
> 时间：2013-03-23T10:44:21.680
> 
> 标签：treeview, notepad++

我真的很喜欢 Notepad++，但有时脚本很难导航。我搜索了一个显示 DOM 的插件，例如 Espresso Navigator ( [http://657b072aab060d50f8ce-d7abb53cb376b4947d77643d4b4a48d3.r79.cf1.rackcdn.com/2137_69d6dc6e.png](http://657b072aab060d50f8ce-d7abb53cb376b4947d77643d4b4a48d3.r79.cf1.rackcdn.com/2137_69d6dc6e.png) )，但没有找到任何东西。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:17:32.293

有 2 位可以帮助您导航。他们当然可以帮助我处理复杂的脚本。

左边距可以显示树并允许折叠或折叠某些 html 元素。这是一个很好的导航工具，可以“隐藏”整个标签以专注于代码的某些位。

要查看此树，请转到设置/首选项/编辑选项卡/文件夹边距样式/并设置“无”以外的任何内容。我自己更喜欢Box Tree。在这种模式下（可能还有其他模式），左边距下方的行变为红色以覆盖该标记内的所有行。

自然地，您将选择文件的语言为 HTML 或 Javascript 或任何您编辑的语言。

要隐藏整个 div（比如说），请单击 div 标签旁边的边距中的 +，它会被折叠。

现在为了帮助阅读文档并帮助折叠树发挥最佳作用，然后使用 TextFX HTML Tidy 以适合您的方式格式化代码。

如果处理其他人的格式错误且复杂的脚本，我有时甚至从 HTML Tidy 开始，然后使用折叠树来找出发生了什么。

# android - Android横向右到横向左事件

> ID：15585807
> 
> 赞同：0
> 
> 时间：2013-03-23T10:44:38.357
> 
> 标签：android, events, landscape, screen-orientation, onconfigurationchanged

我现在想知道在重新绘制布局时是否有任何可能的方式来触发事件，因为直接从横向右方向切换到横向左方向的事件。

我尝试了 OrientationEventListener。问题是它触发速度很快。我正在做 UI 更改，它们发生在重新绘制景观之前，看起来很糟糕。

我可以在更改上添加一些延迟，但根据手机的不同，更改可能会持续或多或少。

对于 onConfigurationChanged，时机是完美的，但当然它只适用于纵向到横向或横向到纵向。

我的应用程序不能在此更改中暂停，因此不能选择使用 onPause、onStop 等。

所以我正在寻找一个类似于 onConfigurationChanged 的​​事件，它也涵盖从横向到横向的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:23:54.440

> 我尝试了 OrientationEventListener。问题是它触发速度很快。我正在做 UI 更改，它们发生在重新绘制景观之前，看起来很糟糕。

您可以使用 handler.post(runnable)，这样您的 UI 更改不应该在重绘之前发生，而是会在主线程上排队并在完成绘制后执行。

```
handler.post(new Runnable() {

        @Override
        public void run() {
        //do the UI changes you want

        }
    }); 
```

如果这仍然没有帮助，您可以尝试一种困难且丑陋的方式来利用方向侦听器和 onLayout() 方法:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T06:18:35.440

我想你几乎明白了。我不知道您是否会做类似的事情，但是这个可以让您在方向更改后立即更改 UI。我做了这个例子只是为了改变 from `ROTATION_270`to `ROTATION_90`，但你可以添加到代码中，这样我就可以涵盖从 t​​o 等的所有情况`PORTRAIT`......`REVERSE_PORTRAIT`我的例子只是在方向改变时将文本视图从“横向”更改为“反向横向”。

XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/textview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true" />

</RelativeLayout> 
```

代码

```
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.Display;
import android.view.OrientationEventListener;
import android.view.Surface;
import android.widget.TextView;

public class LandScapeToLandScapeReverse extends Activity
{
    private int mCurrentOrientation;
    private Display mDisplay;
    private OrientationEventListener mOrientationEventListener;

    private TextView mTextView;

    private static final String TAG = "LandScape To LandScape Reverse";

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        Log.d(TAG, "onCreate");

        setContentView(R.layout.activity_main);
        mTextView = (TextView) findViewById(R.id.textview);

        mDisplay = getWindowManager().getDefaultDisplay();
        mCurrentOrientation = mDisplay.getRotation();
        mTextView.setText("CurrentOrientation: " + mCurrentOrientation);

        mOrientationEventListener = new OrientationEventListener(this)
        {
            @Override
            public void onOrientationChanged(int orientation)
            {
                // On my phone it seem to change at 233 maybe should start lower 
                // to take into account of phones model variations.
                if (mCurrentOrientation == Surface.ROTATION_270 && orientation > 230)
                {
                    mTextView.setText("CurrentOrientation: " + orientation);
                    Log.d(TAG, "orientation = " + orientation  
                        + " getRotation: " + mDisplay.getRotation());
                    if (mDisplay.getRotation() != mCurrentOrientation)
                    {
                       // I think one should disable listener here and enable
                       // again after doing all the UI changes.
                        mOrientationEventListener.disable();
                        mTextView.setText("Landscape reverse"); 
                    }
                }
            }
        }; 

        mOrientationEventListener.enable();
    }

    @Override
    protected void onDestroy()
    {
        super.onDestroy();

        Log.d(TAG, "onDestroy");

        mOrientationEventListener.disable();
    }
} 
```

我有一些想法，也许在我们可以覆盖的方向更改之前调用了一个函数。我会玩，如果我找到一个，我会更新答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-16T20:31:00.090

您可以使用在这种情况下触发的 DisplayListener，如本答案所述：[https ://stackoverflow.com/a/23612548/2942294](https://stackoverflow.com/a/23612548/2942294)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-23T10:49:32.420

您可以执行以下操作：

```
int result = this.getResources().getConfiguration().orientation;
if (result == 1){
a//set content view to portrait

}
else{
//set content view to landscape} 
```

# javascript - Jquery按钮点击事件绑定问题

> ID：15585815
> 
> 赞同：2
> 
> 时间：2013-03-23T10:45:39.673
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我的 jQuery Mobile 按钮出现问题，我不知道如何解决。

我正在尝试将单击事件绑定到它。在单击事件期间，我的当前页面应更改为另一个页面。

事件绑定在此按钮上：

```
<a id="test" data-role="button">Test</a> 
```

使用这个 javascript 代码：

```
$(document).ready(function() {
    $('#test').on('click', function() {
        alert('Click!')
    });
}); 
```

这段代码一开始可以工作，但随着我的网站变得越来越大，它就停止了一起工作。

还有一个问题，因为这是我在这里的第一个问题，如何才能使它变得更好？从我过去浏览这个网站的经验来看，我发现了很多悬而未决的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T10:54:21.373

这个答案会从jQuery Mobile的角度来写，不过大部分也可以用在其他群里。

## 免责声明

这是我个人博客中的一篇文章。

## 在场

首先也是最重要的，不要发布您的问题并消失。坚持至少半小时甚至一小时，等待评论（对您的问题）甚至更好的答案。通常，SO 成员会有更多问题，您应该尽快回答。不要把它看作是一件苦差事，你有一个问题，你应该努力寻找一个正确的答案。

如果没有人回答您的问题，请在白天返回几次。

## 代码示例

其次，您需要提供一个代码示例。越多越好，但不要过度。如果您要放置大型代码示例，请尝试注释所有内容。例如：“这是我的索引页面，我的问题发生在这里......”。并且因为这是一个致力于 jQuery Mobile（次要于 jQuery）的小组，所以也要注意放置您的 js 代码，让它比 HTML 代码具有更高的优先级。

例如，这是一个格式正确的问题：[how to load an another html file on a button click in jquery mobile](https://stackoverflow.com/questions/8727988/how-to-load-an-another-html-file-on-a-button-click-in-jquery-mobile?rq=1)

我们需要的一切都在这里：

这个 js 代码示例涵盖了整个页面，我们可以使用它来创建一个工作示例。最好只为您指明正确的方向。

```
<script type="text/javascript">
    $(document).ready(function() {
        var userName;
        var userPassword;

        $("#submitBtn").click(function() {
            //alert("HI");      
            userName = $("#UserName").val();
            userPassword = $("#Password").val();

            if ((!UserName)|| (!userPassword)) {
                alert("Enter the Details");
            }
            else {
                if ((userName !="alpha") ||(userPassword !="beta")) {
                    alert('Enter correct username and password');
                }
                else {
                    //here i want to load my selectOption.html file ?
                }             
            }                                  
        });                          
    });
</script> 
```

就像在顶级示例中一样，这足以让我们看到问题并为您创建一个工作示例。

```
<body>
    <div data-role="page" id="home">        
        <div data-role="header">            
            <h1>Enter Credential</h1>                      
        </div>

        <div data-role="content">
            <label for="UserName">User Name</label>
            <input type="text" name="UserName" id="UserName" value="" style="width:220px;"  />

            <label for="Password">Password</label>
            <input type="password" name="Password" id="Password" value="" style="width:220px;"  />

            <div id="submitBtn" data-role="button">Submit</div>
        </div> 
    </div>
</body> 
```

## 实时代码示例

第三，如果您想更进一步，可以从您的代码中创建一个 jsFiddle 示例。jsFiddle 是一款出色的在线工具，您会发现很多 SO 成员都使用它来回答或提问。

官方页面：http: [//jsfiddle.net/](http://jsfiddle.net/)

通常问题可以在一个较小的 HTML 和 JS 示例中重新创建，因此使用它来创建一个有效的实时示例。您会惊讶于这将导致成功回答多少次。例如，这是我用来帮助其他 SO 成员的模板，它包含我需要给出快速正确答案和工作示例的一切：http: [//jsfiddle.net/Gajotres/yWTG2/](http://jsfiddle.net/Gajotres/yWTG2/)

另一个主要注意事项是，您的代码（HTML 或 js）必须格式正确。如果您有一个大型代码示例，您可以使用此工具自动使您的代码看起来很漂亮：http: [//jsbeautifier.org/](http://jsbeautifier.org/)

你应该经常和明智地使用它。不要忘记您可以将它用于您自己的代码。

## 附加信息

不要忘记告诉我们您在项目中使用了哪些框架版本。这个非常重要。通常只需要一个 jQuery 和 jQuery Mobile 版本。，如果您使用其他框架，您也应该放置它们的版本。

如果您有时间并会查看我关于 jQuery Mobile 的其他答案/文章。根据我的经验，您 50% 的 jQuery Mobile 问题都可以在这里解决：

## 最后的想法

最后重要的事情。谦虚一点，没有人喜欢聪明人。不管你是多么聪明或优秀的开发人员。您在这里寻求帮助，所以请帮助我们帮助您。

**编辑 ：**

要回答您的问题，您的问题在文档就绪行中。它不能与 jQuery Mobile 一起使用，因为它通常会在 jQuery Mobile 页面初始化之前触发。如果页面未初始化，则您的按钮不能存在于 DOM 中。

要解决它，您应该使用正确的 jQuery Mobile 页面事件，如下所示：

```
$(document).on('pagebeforeshow', '#index', function(){      

}); 
```

其中 $index 是您页面的 id。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-23T10:49:07.337

```
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Slider - Default functionality</title>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>

<script>

function fun()
{

var some = $("#some").val();

    if (some.match("3")) {
       alert("Hello");
    }
}

</script>
</head>
<body>
<select id="some">
<option value="1">Text 1</option>
<option value="2">Text 2</option>
<option value="3">Text 3</option>
</select>
<button  id="btn" onclick='fun()' >Show</button>
</body>
</html> 
```

嗨朋友，这可能会帮助你。谢谢 ：）

# c++ - 使用 static 关键字为全局字符串变量添加前缀会减少整个程序的大小吗？

> ID：15585818
> 
> 赞同：3
> 
> 时间：2013-03-23T10:45:54.550
> 
> 标签：c++

我正在编写一个执行大量字符串解析的 c++ 应用程序。我将字符串定义保存在一个普通的头文件中（没有相应的 C++ 文件）。

头文件使用#ifdef XXX 确保编译器只处理一次。

我可以选择声明字符串

```
const TCHAR m_szRoot[] = _T("root"); 
```

或者

```
static const TCHAR m_szRoot[] = _T("root"); 
```

这些变量在应用程序中被多次使用。

推荐的声明是什么？从应用程序大小的角度来看，哪个声明更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T10:49:08.750

如果您`static`从包含在多个翻译单元中的标题中进行相同操作，则每个生成的文件都将获得自己的对象副本，这可能会增加应用程序的占用空间。此外，对象将驻留在不同的地址，可能会使相等比较变慢。链接时优化可以组合相同的常量，但这是可选的。

避免重复的某种方法是将常量放在单独的翻译单元（即 CPP 文件）中，并`extern`在头文件中使用。

标题：

```
extern const TCHAR m_szRoot[]; 
```

常量.cpp：

```
const TCHAR m_szRoot[] = _T("root"); 
```

这将确保每个常量的单一定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T10:47:32.583

忘记微优化！！

如果`static`要将变量的范围限制为单个翻译单元，请使用。
`static`给你内部链接。
这应该是声明它的标准，`static`而不是优化。编译器会做任何需要做的优化。

# javascript - 小胡子模板不会在表格 tbody 内呈现

> ID：15585819
> 
> 赞同：10
> 
> 时间：2013-03-23T10:46:01.630
> 
> 标签：javascript, json, templates, mustache

为什么相同的 JSON 对象代码生成带有`ul`元素的输出，而不是带有`table`标签的输出。

我有我的 Mustache 模板，例如：

```
<div id="template-ul">
    <h3>{{name}}</h3>
    <ul>
        {{#students}}
        <li>{{name}} - {{age}}</li>
        {{/students}}
    </ul>
</div>

<div id="template-table">
    <table>
        <thead>
            <th>Name</th>
            <th>Age</th>
        </thead>
        <tbody>
        {{#students}}
            <tr>
                <td>{{name}}</td>
                <td>{{age}}</td>
            </tr>
        {{/students}}
        </tbody>
    </table>
</div> 
```

这是javascript代码：

```
var testing = {
    "name" : "student-collection",
    "students" : [
        {
            "name" : "John",
            "age" : 23
        },
        {
            "name" : "Mary",
            "age" : 21
        }
    ]
};

var divUl = document.getElementById("template-ul");
var divTable = document.getElementById("template-table");

divUl.innerHTML = Mustache.render(divUl.innerHTML, testing);
divTable.innerHTML = Mustache.render(divTable.innerHTML, testing); 
```

这是 jsFiddle 上的代码 - [http://jsfiddle.net/pRSjH/2/](http://jsfiddle.net/pRSjH/2/)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-08-28T04:28:59.637

您还可以在 tbody 中**评论小胡子标签。**并且表格将正确构建。
我的模板示例：

```
<div id="template-table">
    <table>
        <thead>
            <th>Name</th>
            <th>Age</th>
        </thead>
        <tbody>
        <!--{{#students}}-->
            <tr>
                <td>{{name}}</td>
                <td>{{age}}</td>
            </tr>
        <!--{{/students}}-->
        </tbody>
    </table>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T13:13:43.150

`divTable.innerHTML`返回[这个](http://pastebin.com/FW2vKxGU)而不是正确的模板。可能是因为浏览器试图呈现无效的 HTML。我认为您可以将模板放入`<script>`标签中以解决此问题（[小提琴](http://jsfiddle.net/superhacker/pRSjH/5/)）

# python - 如何解析没有重复结构的.dat文件

> ID：15585823
> 
> 赞同：0
> 
> 时间：2013-03-23T10:46:27.277
> 
> 标签：python, matlab, parsing, numpy

我的问题是关于解析 Missile Datcom 的输出，我不知道是否有人知道。文件的长度是可变的。

我的目标是检索存储在这些表中的所有数据并将其保存在正确的文件结构中（我认为是 MATLAB .mat 文件）。我能得到的唯一对称性是重复这样的文本结构：

```
***** THE USAF AUTOMATED MISSILE DATCOM * REV 3/99 *****     CASE   1
           AERODYNAMIC METHODS FOR MISSILE CONFIGURATIONS          PAGE   2
               STATIC AERODYNAMICS FOR BODY-FIN SET 1

   ******* FLIGHT CONDITIONS AND REFERENCE QUANTITIES *******
 MACH NO  =       0.01                REYNOLDS NO = 2.318E+05 /M
 ALTITUDE =        0.0 M         DYNAMIC PRESSURE =      7.09 N/M**2
 SIDESLIP =      -5.00 DEG                   ROLL =      0.00 DEG     
 REF AREA =      0.006 M**2         MOMENT CENTER =     1.750 M
 REF LENGTH =     0.10 M           LAT REF LENGTH =      0.10 M

               ----- LONGITUDINAL -----     -- LATERAL DIRECTIONAL --
     ALPHA       CN        CM        CA        CY       CLN       CLL

    -15.00   -13.959    -4.106     2.661     4.031     1.817     0.565
    -12.50   -12.292    -1.954     5.103     4.302     1.267     0.449
    -10.00    -9.985    -0.720     7.148     4.600     0.677     0.253
     -7.50    -7.477    -0.030     7.516     4.833     0.143     0.073
     -5.00    -4.881     0.206     6.380     4.881    -0.206     0.000
     -2.50    -2.374     0.167     5.504     4.949    -0.509    -0.059
     -1.00    -0.933     0.069     5.287     4.965    -0.604    -0.036
      0.00     0.000     0.000     5.308     4.967    -0.623    -0.000
      1.00     0.933    -0.069     5.287     4.965    -0.604     0.036
      2.50     2.374    -0.167     5.504     4.949    -0.509     0.059
      5.00     4.881    -0.206     6.380     4.881    -0.206     0.000
      7.50     7.477     0.030     7.516     4.833     0.143    -0.073
     10.00     9.985     0.720     7.148     4.600     0.677    -0.253
     12.50    12.292     1.954     5.103     4.302     1.267    -0.449
     15.00    13.959     4.106     2.661     4.031     1.817    -0.565

     ALPHA       CL        CD      CL/CD     X-C.P.

    -15.00   -12.795     6.183    -2.069     0.294
    -12.50   -10.896     7.643    -1.426     0.159
    -10.00    -8.592     8.773    -0.979     0.072
     -7.50    -6.432     8.427    -0.763     0.004
     -5.00    -4.307     6.781    -0.635    -0.042
     -2.50    -2.132     5.602    -0.381    -0.071
     -1.00    -0.841     5.302    -0.159    -0.074
      0.00     0.000     5.308     0.000     2.298
      1.00     0.841     5.302     0.159    -0.074
      2.50     2.132     5.602     0.381    -0.071
      5.00     4.307     6.781     0.635    -0.042
      7.50     6.432     8.427     0.763     0.004
     10.00     8.592     8.773     0.979     0.072
     12.50    10.896     7.643     1.426     0.159
     15.00    12.795     6.183     2.069     0.294 
```

您可以在其中获取与表格相关的输入数据：MACH NO、ALTITUDE、SIDESLIP。

我必须为每组具有相同 MACH NO、ALTITUDE 和 SIDESLIP 的数据创建一个二维数组（一个表）。

每次其中一个发生变化时，我都必须创建一个新数组。

我应该使用正则表达式来读取 MACH NO、ALTITUDE 和 SIDESLIP 广告旁边的值，检查它们是否已更改，但在我看来这是一个非常复杂的方法。你的方法是什么？

我正在考虑使用Python。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:10:32.910

编辑：下面是一段正在完成工作的代码。由于我决定研究这个主题以获得更多关于正则表达式的知识，我最终有点沮丧，因为最终代码中没有正则表达式。让我在下面总结一下解析代码的不同部分，希望有人可以帮助在正确的地方使用正则表达式 - 我发现只有一个地方正则表达式可能会有所帮助，但也许还有其他地方可能是案子。随意发表评论。

1/通过查找存在字符串'FLIGHT CONDITIONS'的行将文件分成块-我猜没有正则表达式有用

2/将一个块分成两部分：第一个带有 hdr：几行，格式如下：MACH NUMBER = 0.67 REYNOLDS NU = 2.05E5 /M 也许这是一个地方，正则表达式可能会有所帮助：相反用''分割线，正则表达式如何从这条线中提取有用的信息让我们说[（'MACH NUMBER'，0.67），（'REYNOLDS NU'，2.05E5））

3/合并可能拆分的数据数组=>我看不出正则表达式是否有用。

* * *

这是一段正在完成这项工作的代码。我希望你可以从它开始拥有你想要的格式。让我用几句话解释一下：

第一步是能够将您的文件分成块：块用飞行条件分隔。

第二步是将一个块拆分为 hdr（存储飞行条件的详细信息）和原始数据。

飞行条件的详细信息存储在 dct (hdr_dct) 中，原始数据存储在列表 (data_lst) 中，其中 data_hdr 描述列表中的内容。

```
import itertools
import sys

def parse_hdr(block) :
    """
    parsing the header of a block of data
    """
    parsed_hdr = {}
    for line in block :
        if '=' not in line :
            continue
        res = [e for e in line.split(' ') if len(e) >0] # remove white space
        match = False
        name = ''
        for e in res :
            if not match :
               if e == '=' :
                  match = True
               else :
                  name += e
            else :
               parsed_hdr[name] = float(e)
               name = ''
               match = False
    return parsed_hdr

def parse_data(block) :
    """
    parse the numerical data
    """
    hdr, res, block_id = [], [], -1
    for line in block :
        splitted_line = [e for e in line.split(' ') if len(e) > 0]
        if 'ALPHA' in splitted_line :
            hdr.extend(splitted_line)
            block_id += 1
            i_b = 0
        else :
            try :
                to_add = [float(e) for e in splitted_line]
            except :
                #print "skip : " + line
                sys.exc_clear()
                continue
            if block_id == 0 :
                res.append(to_add)
            else :
               res[i_b].extend(to_add)
            i_b += 1
    return hdr, res

def parse_block(block) :
"""
    parsing the data ofone block
"""
hdr_dct  = parse_hdr(block[:5])
data_hdr, data_lst = parse_data(block[6:])

def main() :
    block_limit ='    ******* FLIGHT CONDITIONS AND REFERENCE QUANTITIES *******'
    stt_data_lst = []
    end_data_lst = []

    with open('input.dat') as f :
       lines = f.readlines()
       for i_line, line in enumerate(lines) :
            if block_limit in line :
                stt_data_lst.append(i_line)

    end_data_lst = stt_data_lst[1:] + [-1]

    for stt, end in itertools.izip(stt_data_lst, end_data_lst) :
        parse_block([ee for ee in [e.strip() for e in lines[stt+1:end]] if len(ee) > 0])

main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:02:47.217

你总是可以使用类似的东西

```
fid=fopen('yourfile');
A=fread(fid);
fclose(fid);

C=regexp(char(A'),'[\s ,]','split'); 
```

C 将是一个由字符串 (C{1} C{2} C{3} ...) 组成的元胞数组，这些字符串是通过用空格拆分文件获得的。通过跟踪索引并应用 str2num，您应该能够获得所需的数据。

*编辑*

此外，strcmp 将与 C 一起使用。因此，例如，如果您想查找 SIDESLIP 发生的单元格索引，您可以执行

```
n=find(strcmp(C,'SIDESLIP')); 
```

# java - 如何在GoogleMap android API 2中以像素为单位获取徽标和缩放

> ID：15585826
> 
> 赞同：1
> 
> 时间：2013-03-23T10:46:38.813
> 
> 标签：java, android, google-maps-android-api-2

我使用 GoogleMap API v.2 创建 android 项目。我需要在“Google”-logo 和“Zoom”-icons 之间的地图上创建我的叠加层——看我的图片。

![在此处输入图像描述](../Images/b2655935a94cd59640ba1dc81c0033ae.png)

我知道我的活动的水平大小。为了计算我的叠加层的水平尺寸，我还需要这个“标志”和“缩放”的尺寸。我怎么知道它的“Logo”和“Zoom”的水平和垂直尺寸？

# regex - databene benerator 正则表达式模式：尝试获取特定模式

> ID：15585832
> 
> 赞同：0
> 
> 时间：2013-03-23T10:47:24.813
> 
> 标签：regex, string, data-generation

如何使用 databene benerator 生成以下模式？A01,A02,A03...A25，然后 B、C、D 等也一样。这样我什至可以得到其他范围，如 A01 到 A15 等。我试过这个

```
pattern="[0]{1}[7]{1}[0-9^[6,4]]{8}" 
```

但它继续包括 A00 和 A26 到 A29。

具体来说，我如何给出数字范围，例如从 1 到 10、1 到 20 等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:13:09.663

要获得带有 A..D 前缀的 01-25 范围，您可以使用：`[A-D](0[1-9]|1\d|2[0-5])`
此处解释演示：[http ://regex101.com/r/gU3zA4](http://regex101.com/r/gU3zA4)

这：`[A-G](0[1-9]|1\d|20)`将从 01 到 20 获得 AG

这：`[A-Z](0[1-9]|[1-6]\d|7[0-5])`将获得 AZ 从 01 到 75

这：`[A-Z](0[1-9]|[1-9]\d)`将获得 AZ 从 01 到 99

挺容易...

# ruby - 使用 Ruby 的“推送”方法会导致值从原始数组中删除吗？

> ID：15585841
> 
> 赞同：2
> 
> 时间：2013-03-23T10:48:30.937
> 
> 标签：ruby, methods

我发现以下代码可以解决涉及随机化的初学者 Ruby 问题。我意识到 Ruby 有一个`shuffle`方法，但是我的问题的目的是专门针对`push`.

```
def shuffle arr
    shuf = []
    while arr.length > 0

        # Randomly pick one element of the array.
        rand_index = rand(arr.length)

        # Now go through each item in the array,
        # putting them all into new_arr except for the # randomly chosen one, which goes into shuf. 

        curr_index = 0
        new_arr = []
        arr.each do |item|
            if curr_index == rand_index
                shuf.push item
            else
                new_arr.push item
            end

            curr_index = curr_index + 1
        end

        # Replace the original array with the new, # smaller array.
        puts arr.inspect
        arr = new_arr
    end
    shuf
end

shuffle_array = [1,2,3,4,5,6,7,8,9]
shuffle(shuffle_array) 
```

命令行的输出是：

```
Rick:programs rickthomas$ ruby shuffleSolution.rb
[1, 2, 3, 4, 5, 6, 7, 8, 9]
[1, 2, 3, 4, 5, 6, 8, 9]
[1, 2, 3, 4, 5, 8, 9]
[1, 2, 3, 4, 5, 9]
[1, 2, 3, 4, 9]
[1, 3, 4, 9]
[3, 4, 9]
[3, 9]
[3]
Rick:programs rickthomas$ 
```

从这条线来看`while arr.length > 0`，它似乎`arr`逐渐减少，我认为这是由于来自其他两个数组中的任何一个的`pushing`项目。`arr`为了测试这个假设，我一直在搞乱以下代码：

```
array1 = [1,2,3,4,5,6,7,8]
array2 = []
array3 = []
array1.each do |x|
  random_num = rand(2)
  if random_num == 1
    array2.push x
  else
    array3.push x
  end
  puts array1.inspect

end 
```

我希望 array1 以与上述方法类似的方式减少`shuffle`，但我得到了这个：

```
Rick:programs rickthomas$ ruby socratesWork.rb
[1, 2, 3, 4, 5, 6, 7, 8]
[1, 2, 3, 4, 5, 6, 7, 8]
[1, 2, 3, 4, 5, 6, 7, 8]
[1, 2, 3, 4, 5, 6, 7, 8]
[1, 2, 3, 4, 5, 6, 7, 8]
[1, 2, 3, 4, 5, 6, 7, 8]
[1, 2, 3, 4, 5, 6, 7, 8]
[1, 2, 3, 4, 5, 6, 7, 8]
Rick:programs rickthomas$ 
```

为什么`push`删除第一个片段中的数组项，而不是第二个片段？我只是在某处遗漏了语法错误，还是我误解了一些更基本的东西`push`？

我已经在 Stack Overflow 上搜索了这个问题的答案，但还没有找到类似的问题。我还查看了 ruby​​-doc.org，但它只讨论了添加到数组，而不是将 (?) 项从一个数组移动到另一个数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T11:32:46.523

好吧，您正在将**除具有匹配索引的元素之外的**所有元素推送到`new_arr`. 它的大小在每次迭代中减一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T11:20:47.077

似乎您在每次迭代时都用一个较小的数组替换了您的数组。

```
 # Replace the original array with the new, # smaller array.
    puts arr.inspect
    arr = new_arr 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T12:22:39.010

在您的第一个片段中，内部循环将原始数组拆分`arr`为 2 部分：

1.  匹配随机索引的元素，并将其压入数组`shuf`
2.  那些与随机索引不匹配的元素，它们被推入`new_arr`，在每个外循环中初始化为空数组。

因此，在每个外部循环中，`shuf`再获取一个元素，并`new_arr`接收`arr`除随机选择的元素之外的所有元素。***MAGIC***出现在外循环的最后一行，分配`new_arr`给`arr`. 所以每个循环都会`arr`变小一个元素。这不是`Array#push`.

# c - grep 或 C 代码来解析日志文件？

> ID：15585842
> 
> 赞同：1
> 
> 时间：2013-03-23T10:48:32.123
> 
> 标签：c, parsing, awk, grep

我有一个要解析的日志文件

我只需要前两个字段（以空格分隔）

日志文件中的示例行：

```
1362960460.697 19 27.197.12.76 TCP_MISS/404 339 GET http://what-ever-server.com/what-ever-file - DIRECT/22.22.22.22 text/html 
```

第一个字段应该没有“。”之后的数字。

我以为我可以用 C 来做到这一点，但是如果有一个指针来跟踪每个字符以检查它是空格还是“。”，那就太复杂了。所以我在这里的一些帖子中看到 grep 可以完成这项工作，但我文件中的字段没有固定长度

我应该在C中做吗？或者 grep 中是否有一个选项可以让我解析

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T10:55:15.093

这就是 awk 的用途。

```
cat logfile | awk '{print $1 " " $2}' | sed 's_\.[0-9]*__g' 
```

您使用 打印每行的第一个和第二个字段`awk`。然后匹配小数位并使用`sed`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T10:58:16.217

获取文件使用的前 2 个字段`awk`（包含在所有 unix 或 linux 发行版中）

```
awk '{split($1,a,"."); print a[1], $2}' logfile 
```

解释：

*   `split`函数根据分隔符将第一个标记 ( `$1`) 拆分为数组`a``.`
*   `print a[1], $2`根据输出字段分隔符打印两个值，默认情况下是空格

一种更简单的方法（假设第一个字段是数字）是使用`int`函数：

```
 awk '{print int($1), $2}' logfile 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-23T13:20:33.937

```
$ cat file
1362960460.697 19 27.197.12.76 TCP_MISS/404 339 GET http://what-ever-server.com/what-ever-file - DIR
ECT/22.22.22.22 text/html

$ awk -F'[ .]' '{print $1,$3}' file
1362960460 19

$ sed 's/\([^.]\)\.[^ ]* \([^ ]*\).*/\1 \2/' file
1362960460 19 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T11:01:41.120

BSD 版本（即 OSX）

```
cat logfile | awk '{print $1, $2}' | sed -e 's;\.*;;g' 
```

# javascript - 点击多个播放按钮，播放对应的歌曲

> ID：15585846
> 
> 赞同：0
> 
> 时间：2013-03-23T10:48:43.140
> 
> 标签：javascript, html, html5-audio

Javascript：

```
function Start1 ()
{
    var audie = document.getElementById("myAudio");
    audie.src = ("RWY.mp3");
    audie.play();
}

function Start2 ()
{
    var audie = document.getElementById("myAudio");
    audie.src = ("EL.mp3");
    audie.play(); 
```

HTML

```
<img src="images/play.png" alt="Play Button width="37" height="30" 
onclick="Start1()"> 
```

我正在尝试选择一个图像，一旦单击该图像，就会根据元素中描述的文件播放一首歌曲。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:56:19.373

可能是我没有给您带来问题，但是您为什么要为每个图像或音频制作单独的功能。您也可以使用单个函数来完成它，只需像这样传递音频文件的源

```
function Start (audioFile)
{
    var audie = document.getElementById("myAudio");
    audie.src = audioFile;
    audie.play();
} 
```

标记：

```
<img src="images/play.png" alt="Play Button width="37" height="30" onclick="Start('RWY.mp3')">

<img src="images/play.png" alt="Play Button width="37" height="30" onclick="Start('EL.mp3')"> 
```

更新：

```
function StartOrStop(audioFile)
  {
    var audie = document.getElementById("myAudio");
    audie.src = audioFile;
    if(audie.paused==false)
     {
        audie.Paused();
     }
     else
     {
       audie.play();
     }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:57:36.817

尽量避免为同一目的使用许多不同的功能。您可以使用[jQuery](http://jquery.com/)使您的代码简短且非常简单。

```
$(document).ready(function() { // starting our code when document is loaded
    $('.playbtn').click(function() { // attaching this code to click event of any html element having _playbtn_ class
        $(this).data('song'); // getting song name from _data_ container of clicked element $(this)
        $('#myAudio').attr('src',songFileName).play(); // getting element myAudio bi its id, then setting it's src attribute and, finally, starting playback 
    });
}); 
```

和 HTML 将如下

```
<img src="images/play.png" class='playbtn' alt="Play Button" data-song="RWY.mp3" width="37" height="30" />
<img src="images/play.png" class='playbtn' alt="Play Button" data-song="EL.mp3" width="37" height="30" /> 
```

从现在开始，您只需添加*一行*即可添加新歌曲按钮 - 只需复制 <img ... /> 行，设置新*的数据歌曲*值和... wuala！

# android - 如何在 android 中通过 Url 设置布局的背景图像？

> ID：15585847
> 
> 赞同：1
> 
> 时间：2013-03-23T10:48:53.420
> 
> 标签：android, android-layout, android-imageview

在我的应用程序中通过 JSON 从 web url 设置布局背景。但是在图像视图中我是这样设置的

```
try {
                  ImageView i = (ImageView)findViewById(R.id.animation);
                  Bitmap bitmap = BitmapFactory.decodeStream((InputStream)new URL("http://alpharithm.in/manager/test/img/files/products/mushroom-soup.jpg").getContent());
                  i.setImageBitmap(bitmap); 
                } catch (MalformedURLException e) {
                  e.printStackTrace();
                } catch (IOException e) {
                  e.printStackTrace();
                } 
```

不要设置为背景。如何为布局设置背景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:10:33.847

您可以从这里获得参考。

[设置线性布局背景](https://stackoverflow.com/questions/7646766/set-linear-layout-background-dynamically)

希望这对您有所帮助。

# oracle - 创建触发器时出错

> ID：15585849
> 
> 赞同：2
> 
> 时间：2013-03-23T10:49:00.577
> 
> 标签：oracle, triggers

我创建了一个如下所示的触发器。但它向我显示了一个错误。

```
 2/30    PLS-00103: Encountered the symbol "=" when expecting one of the following:
          := ; not null default character 
```

谁能帮我解决这个问题？提前致谢

```
CREATE OR REPLACE TRIGGER ADRAKLIVE.TRG_HELPDESK
AFTER UPDATE
OF STATUS
ON ADRAKLIVE.TBL_SERVICEREPORT 
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW
BEGIN
     declare ts varchar2(10) = :'YES';
 UPDATE tbl_ithelpdesk
       SET it_closed  =: ts
     WHERE call_no = :NEW.call_no;
END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T10:58:56.870

您的触发器格式错误：

```
CREATE OR REPLACE TRIGGER TRG_HELPDESK
AFTER UPDATE
OF STATUS
ON TBL_SERVICEREPORT 
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW
declare
  ts varchar2(10) := 'YES';
BEGIN
 UPDATE tbl_ithelpdesk
       SET it_closed  = ts
     WHERE call_no = :NEW.call_no;
END;
/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T10:51:46.497

将触发器更改为：

```
CREATE OR REPLACE TRIGGER ADRAKLIVE.TRG_HELPDESK
AFTER UPDATE
OF STATUS
ON ADRAKLIVE.TBL_SERVICEREPORT 
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW
DECLARE
   ts varchar2(10);
BEGIN
 ts := 'YES';
 UPDATE tbl_ithelpdesk
       SET it_closed  =: ts
     WHERE call_no = :NEW.call_no;
END; 
```

# php - 图片上传器在数据库mysql中没有响应

> ID：15585850
> 
> 赞同：-4
> 
> 时间：2013-03-23T10:49:02.143
> 
> 标签：php, android, mysql, image, upload

我修改了人们提供的代码，我面临一个问题，它在 Android 中运行得非常好。但是..它没有给出任何响应，也没有给出数据库..函数之后行仍然保持不变..我犯了什么错误？谢谢！

Android代码在这里：

```
 public class MainActivity extends Activity {
        private ProgressDialog pDialog;
    Uri currImageURI;
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button gallery_btn = (Button)findViewById(R.id.gallerybtn);
    gallery_btn.setOnClickListener(new OnClickListener(){
        public void onClick(View view){
            //to open up a gallery browser
            Intent intent = new Intent();
            intent.setType("image/*");
            intent.setAction(Intent.ACTION_GET_CONTENT);
            startActivityForResult(Intent.createChooser(intent,"Select Picture.."),1);          

        }

    });

    Button upload_btn = (Button)findViewById(R.id.uploadbtn);
    upload_btn.setOnClickListener(new OnClickListener(){
        public void onClick(View view){

            new HttpUploader().execute(getRealPathFromURI(currImageURI));       

        }

    });

}   

// To handle when an image is selected from the browser
public void onActivityResult(int requestCode, int resultCode, Intent data){
    if (resultCode == RESULT_OK) {
        if (requestCode == 1) {
            // currImageURI is the global variable I’m using to hold the content:
            currImageURI = data.getData();

            EditText tv_path = (EditText) findViewById(R.id.path);
            tv_path.setText(getRealPathFromURI(currImageURI));

        }

    }
}

//Convert the image URI to the direct file system path of the image file
public String getRealPathFromURI( Uri contentUri) {
    String [] proj={MediaStore.Images.Media.DATA};
    android.database.Cursor cursor = managedQuery(contentUri,
            proj,     // Which columns to return
            null,     // WHERE clause; which rows to return (all rows)
            null,     // WHERE clause selection arguments (none)
            null);     // Order-by clause (ascending by name)
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    String c = cursor.getString(column_index); 
    return c;
}

public class HttpUploader extends AsyncTask<String, Void, String> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(MainActivity.this);
        pDialog.setMessage("Uploading Image.. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

     protected String doInBackground(String... path) {

         String outPut = null;

         for (String sdPath : path) {

             Bitmap bitmapOrg = BitmapFactory.decodeFile(sdPath);
             ByteArrayOutputStream bao = new ByteArrayOutputStream();

             //Resize the image
             double width = bitmapOrg.getWidth();
             double height = bitmapOrg.getHeight();
             double ratio = 400/width;
             int newheight = (int)(ratio*height);

             System.out.println("———-width" + width);
             System.out.println("———-height" + height);

             bitmapOrg = Bitmap.createScaledBitmap(bitmapOrg, 400, newheight, true);

             //Here you can define .PNG as well
             bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 95, bao);
             byte[] ba = bao.toByteArray();
             String ba1=Base64.encodeBytes(ba);

             String id = "99";
             ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
             nameValuePairs.add(new BasicNameValuePair("image", ba1));
             nameValuePairs.add(new BasicNameValuePair("path", sdPath));
             nameValuePairs.add(new BasicNameValuePair("id", id));

             try {
                 HttpClient httpclient = new DefaultHttpClient();
                 HttpPost httppost = new HttpPost("http://127.0.0.1/upload.php");
                 httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                 HttpResponse response = httpclient.execute(httppost);
                 HttpEntity entity = response.getEntity();                

                 // print responce
                 outPut = EntityUtils.toString(entity);
                 Log.i("GET RESPONSE—-", outPut);

                 //is = entity.getContent();
                 Log.e("log_tag ******", "good connection");

                 bitmapOrg.recycle();

             } catch (Exception e) {
                 Log.e("log_tag ******", "Error in http connection " + e.toString());
             }
         }
         return outPut;
     }

     protected void onPostExecute(String file_url) {
            // dismiss the dialog once got all details
            pDialog.dismiss();
        }
 }
} 
```

Logcat 只显示这个：log_tag ****** ", "good connection

PHP文件放在这里：

```
<?php
 include "db_connection.php";

if (isset($base)) {
    $base = $_REQUEST["image"];
    $filepath = $_REQUEST["path"];
    $id = $_REQUEST["id"];

    $image_name = "/image/".$filepath;

    // base64 encoded utf-8 string
    $binary = base64_decode($base);

    // binary, utf-8 bytes

    header("Content-Type: bitmap; charset=utf-8");

    $file = fopen($image_name, "wb");

    fwrite($file, $binary);

    fclose($file);

    $result = mysql_query("UPDATE restaurants SET image = '$image_name' WHERE ID = '$id'");

    if(mysql_affected_rows > 0){
        echo json_encode("success!");
    }else{
        echo json_encode("failed!");
    }

} else {
       echo json_encode("missing required attribute!"); 
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T11:02:28.287

替换此代码部分：

$result = mysql_query("更新餐厅 SET image = '$image_name' WHERE ID = '$id'");

```
if(mysql_affected_rows() <> 0){
    echo json_encode("success!");
}else{
    echo json_encode("failed!");
} 
```

# c++ - 无法运行将多个文件组织成标题和 cpp 的项目

> ID：15585858
> 
> 赞同：0
> 
> 时间：2013-03-23T10:49:46.387
> 
> 标签：c++, templates

作为参考，我首先看到了[这篇](https://stackoverflow.com/questions/8735847/file-inclusion-errors-c-undefined-reference-to)文章，但它对我没有帮助。我在头文件和 cpp 文件中组织了以下代码。

![在此处输入图像描述](../Images/e7e703e1d48953190a6190d671674cbb.png)

我正在使用带有cygwin的netbeans。当我编译文件时，我没有收到任何错误，所以我猜这是一个链接器错误。我尝试运行主项目时的错误是：

```
/usr/bin/make -f nbproject/Makefile-Debug.mk SUBPROJECTS= .build-conf
make[1]: Entering directory `/cygdrive/i/Codes/Windows 7 Ultimate/NetBeansProjects/EDS'
/usr/bin/make  -f nbproject/Makefile-Debug.mk dist/Debug/Cygwin_1-Windows/EDS.exe
make[2]: Entering directory `/cygdrive/i/Codes/Windows 7 Ultimate/NetBeansProjects/EDS'
mkdir -p dist/Debug/Cygwin_1-Windows
g++.exe     -o dist/Debug/Cygwin_1-Windows/EDS build/Debug/Cygwin_1-Windows/SortedListClass.o  build/Debug/Cygwin_1-Windows/ListNodeClass.o  build/Debug/Cygwin_1-Windows/main.o  
build/Debug/Cygwin_1-Windows/main.o: In function `main':
/cygdrive/i/Codes/Windows 7 Ultimate/NetBeansProjects/EDS/main.cpp:13: undefined reference to `SortedListClass<int>::SortedListClass()'
/cygdrive/i/Codes/Windows 7 Ultimate/NetBeansProjects/EDS/main.cpp:25: undefined reference to `SortedListClass<int>::insertValue(int const&)'
/cygdrive/i/Codes/Windows 7 Ultimate/NetBeansProjects/EDS/main.cpp:29: undefined reference to `SortedListClass<int>::removeFront(int&)'
/cygdrive/i/Codes/Windows 7 Ultimate/NetBeansProjects/EDS/main.cpp:40: undefined reference to `SortedListClass<int>::printForward() const'
/cygdrive/i/Codes/Windows 7 Ultimate/NetBeansProjects/EDS/main.cpp:43: undefined reference to `SortedListClass<int>::printBackward() const'
/cygdrive/i/Codes/Windows 7 Ultimate/NetBeansProjects/EDS/main.cpp:46: undefined reference to `SortedListClass<int>::clear()'
/cygdrive/i/Codes/Windows 7 Ultimate/NetBeansProjects/EDS/main.cpp:49: undefined reference to `SortedListClass<int>::getNumElems() const'
/cygdrive/i/Codes/Windows 7 Ultimate/NetBeansProjects/EDS/main.cpp:56: undefined reference to `SortedListClass<int>::getElemAtIndex(int, int&)'
collect2: ld returned 1 exit status
nbproject/Makefile-Debug.mk:59: recipe for target `dist/Debug/Cygwin_1-Windows/EDS.exe' failed
make[2]: *** [dist/Debug/Cygwin_1-Windows/EDS.exe] Error 1
make[2]: Leaving directory `/cygdrive/i/Codes/Windows 7 Ultimate/NetBeansProjects/EDS'
nbproject/Makefile-Debug.mk:56: recipe for target `.build-conf' failed
make[1]: *** [.build-conf] Error 2
make[1]: Leaving directory `/cygdrive/i/Codes/Windows 7 Ultimate/NetBeansProjects/EDS'
nbproject/Makefile-impl.mk:39: recipe for target `.build-impl' failed
make: *** [.build-impl] Error 2
BUILD FAILED (exit value 2, total time: 1s) 
```

请帮帮我。我什至尝试直接从[该](https://stackoverflow.com/questions/8735847/file-inclusion-errors-c-undefined-reference-to)帖子中复制代码，并且效果很好。绝对没有错误。我是这种类型的代码组织的新手，所以你能帮帮我吗？

# c# - 已安装 SQL Server - 如何使用两个版本的 sql server 运行单击一个应用程序

> ID：15585862
> 
> 赞同：1
> 
> 时间：2013-03-23T10:50:35.687
> 
> 标签：c#, .net, sql-server, vb.net, visual-studio-2010

我是使用 .NET 的数据库和部署应用程序的新手

我开发了一个应用程序并创建了它的单击一次应用程序。

但是它在我的系统上运行良好，但是当我将它安装在另一个系统上时它说：

> *系统组件 SQL Server 2008 Express 的先决条件检查失败并显示以下错误消息：
> SQL Server 2008 Express Service Pack 1 (x64) 无法升级名为“SQLEXPRESS”的 SQL Server 2005 Express (x64 WoW) 的现有实例。卸载此 SQL Server 2005 Express 实例，然后重试安装 SQL Server 2008 Express Service Pack 1 (x64)。*
> 
> *有关详细信息，请参阅位于“C:\Users\SYSUSER\AppData\Local\Temp\VSD3E78.tmp\install.log”的安装日志文件。*

因此，从这里安装了可以理解的 SQL Server 2005，我需要卸载它来安装我的先决条件中包含的 SQL Server 2008。

但是有没有什么可以逃脱的，比如说它在后台自动升级系统从 2005 年到 2008 年以避免用户的刺激。

或者可以是我们可以在一个系统上使用这两个版本的任何机制。理想情况下，我认为这不会发生，因为我们不能同时运行两台服务器。但我仍然限于我的知识。

此外，每天我们在系统上安装如此多的应用程序，它从不要求我们提供 SQL Server 的东西，一切都只是通过简单的`Next -> Next -> Finish`选项安装。安装程序有没有更简单的方法。这样当有人在他/她的系统上安装应用程序时，就不会因为太多的技术问题而困扰他们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:31:34.853

SQL Server 的所有版本和版本都支持无人参与安装。[从从命令提示符安装 SQL Server 2012](http://msdn.microsoft.com/en-us/library/ms144259.aspx)开始，然后选择您的目标版本。有关 SQL Express 特定示例，请参阅[在安装期间配置 SQL Express](http://blogs.msdn.com/b/sqlexpress/archive/2006/09/20/configuring-sql-express-during-installation.aspx)。[甚至还有一份关于将SQL Server Express 嵌入自定义应用程序](http://msdn.microsoft.com/en-us/library/bb264562.aspx)的白皮书。

# php - 从 2 个组合表中获取最后一个条目

> ID：15585864
> 
> 赞同：1
> 
> 时间：2013-03-23T10:50:39.203
> 
> 标签：php, mysql, forum

我正在建立自己的论坛，但我坚持一件事：

我有两张桌子：

1.  `Forum_Topics`
2.  `Forum_Replies`

现在我想要一行包含 5 个最新回复或新生成的主题。

我应该如何开始/进行查询？

编辑：我还应该看到没有任何回复的最新主题的主题名称。通过回复获取最后 5 个主题很简单，但是在没有任何主题的情况下获取主题，我似乎找不到一个好的解决方案。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:04:26.970

例如，如果您有`Forum_Topics`包含以下字段的表：

```
Id
Timestamp
Name 
```

Where`Id`是主键，并且`Timestamp`是一个字段（类型为时间戳），其中包含条目的日期和时间。

以及具有以下字段的表`Forum_Replies`：

```
Id
Id_User
Text
Id_Forum_Topics
Timestamp 
```

`Id`主键在哪里，`Timestamp`是一个字段（时间戳类型），其中包含条目的日期和时间。

也`Id_Forum_Topics`将`Forum_Topic.Id`通过外键约束建立关系。我的答案中没有使用这些字段`Id_User`，`Text`仅用于演示目的。

注意：时间戳的值可以是上次更新或创建时间，具体取决于您的需要

* * *

## 没有回复的最新主题

根据您的评论，我了解您希望创建没有回复的最新主题。

要获取没有回复的最新主题，您需要查询没有回复的主题，然后对结果进行排序以获取最新消息。

由于引擎的限制，这很难通过 COUNT 和 JOIN 实现。我知道的最好的解决方案是嵌套查询，如下所示：

```
SELECT Id, Name FROM Forum_Topics
WHERE Id NOT IN
(
    SELECT Id_Forum_Topics AS Id FROM Forum_Replies
) 
```

在这里，我们要求没有出现在回复主题列表中的主题。那是没有出现在有回复的主题列表中的主题列表。那是没有回复的话题。

当然，您可以使用 ORDER BY 和 LIMIT 仅获取最近的：

```
SELECT Id, Name FROM Forum_Topics
WHERE Id NOT IN
(
    SELECT Id_Forum_Topics AS Id FROM Forum_Replies
)
ORDER BY Timestamp DESC
LIMIT 5 
```

*注意*：以下是我在评论之前理解的问题的答案。

* * *

## 对给定主题的最新回复

然后你可以做这个查询：

```
SELECT Id, Id_User, Text, Timestamp FROM Forum_Replies
WHERE Id_Forum_Topics = THE_ID_YOU_ARE_LOOKING_AT
ORDER BY Timestamp DESC
Limit 5 
```

上面的查询将返回**5 个最新回复到`Forum_Topics`**由`Id` `THE_ID_YOU_ARE_LOOKING_AT`.

您也可以加入：

```
SELECT Id, Id_User, Text, Timestamp FROM Forum_Replies
JOIN Formun_Topics ON Forum_Replies.Id_Forum_Topics = Forum_Topics_Id 
```

当然还有对该连接的查询：

```
SELECT Id, Id_User, Text, Timestamp FROM Forum_Replies
JOIN Formun_Topics ON Forum_Replies.Id_Forum_Topics = Forum_Topics_Id
WHERE Forum_Topics.Id = THE_ID_YOU_ARE_LOOKING_AT
ORDER BY Forum_Replies.Timestamp DESC
Limit 5 
```

* * *

请注意，此方法完全取决于字段值的正确性`Timestamp`[您作为开发人员有权确保] 并且为了提供最新条目，我们按降序对该字段使用 ORDER BY（因为更新意味着更高的值）和使用 LIMIT 设置我们想要的最大结果数。

如果没有包含条目日期和时间的字段，就没有可靠的方法来断言哪些条目较新[您可以做一些事情，但拥有该字段更容易开发和理解]。

* * *

## 最新回复的主题

这与我提出的第一个查询非常相似，只查询字段`Id_Forum_Topics`并且不限制其值（不要放置 WHERE 子句）：

```
SELECT Id_Forum_Topics FROM Forum_Replies
ORDER BY Timestamp DESC
Limit 5 
```

* * *

## 多少回复有一个话题

你可以这样查询：

```
SELECT (*) FROM Forum_Replies
WHERE Id_Forum_Topics = THE_ID_YOU_ARE_LOOKING_AT 
```

既然您说“因此，如果我创建了一个新主题并且没有人回复它就不会显示为新主题”，我想这可能很有用，因为**您可以使用它来判断一个主题是否没有回复**（或只有一个，或小于 5... 等）。

* * *

## 最新主题（无论回复如何）

通过`Timestamp`in `Forum_Topics`，您可以以类似的方式使用来获取最新的主题，例如：

```
SELECT Id, Name FROM Forum_Topics ORDER BY Timestamp DESC LIMIT 20 
```

上面的查询将为您提供最新的 20 个主题。

* * *

最后，**我怀疑您希望它实现 pagination**，如果是这样，您可以：

1）使用时间戳表示查询的起点：

```
SELECT Id, Id_User, Text FROM Forum_Replies
WHERE Id_Forum_Topics = THE_ID_YOU_ARE_LOOKING_AT
AND Timestamp > START_TIMESTAMP
ORDER BY Timestamp DESC
LIMIT 5 
```

其中 START_TIMESTAMP 是检索结果的日期和时间。

2) 将偏移量设置为 LIMIT：

```
SELECT Id, Id_User, Text FROM Forum_Replies
WHERE Id_Forum_Topics = THE_ID_YOU_ARE_LOOKING_AT
ORDER BY Timestamp DESC
LIMIT 10, 5 
```

在这种情况下，我们说我们想要 5 个最新条目（像往常一样），但在 10 个最新条目之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:59:34.187

```
Select * from Forum_Replies left join Forum_Topics on Forum_Replies.topicId = Forum_Topics.id order by Forum_Replies.datefield desc limit 5. 
```

# magento - 多站点 Magento 实例中的角色分配

> ID：15585868
> 
> 赞同：1
> 
> 时间：2013-03-23T10:51:21.757
> 
> 标签：magento, magento-1.7

我知道 Magento 具有多站点、多域和多商店功能。在 Magento 的单个实例中，我可以达到创建多个网站的最大数据分离水平。事实上，“一个网站由一个或多个商店组成。网站可以设置为共享客户数据，也可以不共享任何数据”。假设我已经配置了两个网站（网站-A 和网站-B）：我想将网站-A 的责任委托给管理员-A，将网站-B 的责任委托给管理员-B……这可能吗？用户和角色没有任何设置可以将它们与网站相关联，当我将角色资源分配给角色时，它对所有网站都有效。我认为这是一个重要的功能，我在 Prestashop 中看到了类似的东西，但在 Magento 中没有。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:44:34.110

这是可能的，但它是 Magento 企业版功能。

我见过至少一个为 CE 提供类似功能的第三方模块：[http ://www.aitoc.com/en/magenomods_advanced_permissions.html](http://www.aitoc.com/en/magentomods_advanced_permissions.html)

# linux - 写入被跟踪进程的内存。

> ID：15585869
> 
> 赞同：5
> 
> 时间：2013-03-23T10:51:27.400
> 
> 标签：linux, linux-kernel, linux-device-driver

我在linux中玩ptrace。我正在尝试使用 /proc/pid/mem 接口编写被跟踪进程的内存。

我用来完成这项任务的功能是：

```
void write_proc(pid_t child, unsigned long int addr) {

  char mem_file_name[100];
  char buf[10]="hope";
  int mem_fd;

  memset( (void*)mem_file_name, 0, 100);
  memset( (void *)buf, 0, 10);

  sprintf(mem_file_name, "/proc/%d/mem", child);
  mem_fd = open(mem_file_name, O_RDONLY);
  lseek(mem_fd, addr , SEEK_SET);

  if (write(mem_fd, buf, 5) < 0 )
    perror("Writing");

  return;

} 
```

但我总是收到错误消息：Writing: Bad file descriptor。

是否可以使用这种方法编写跟踪的进程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T11:15:04.870

您正在以只读模式 ( `O_RDONLY`) 打开文件。我建议再试一次`O_RDWR`：

```
 mem_fd = open(mem_file_name, O_RDWR); 
```

但是，`man proc`目前尚不清楚这是否可行：

> ```
>  /proc/[pid]/mem
>           This  file can be used to access the pages of a process's memory
>           through open(2), read(2), and lseek(2). 
> ```

编辑：

我也很好奇，所以我直接使用了这个例子`ptrace()`：

```
#include <sys/ptrace.h>
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>

#define SHOW(call) ({ int _ret = (int)(call); printf("%s -> %d\n", #call, _ret); if (_ret < 0) { perror(NULL); }})

char changeme[] = "This is  a test";

int main (void)
{
  pid_t pid = fork();
  int ret;
  int i;
  union {
    char cdata[8];
    int64_t data;
  } u = { "Hijacked" };

  switch (pid) {
  case 0: /* child */
    sleep(1);
    printf("Message: %s\n", changeme);
    exit(0);

  case -1:
    perror("fork");
    exit(1);
    break;

  default: /* parent */
    SHOW(ptrace(PTRACE_ATTACH, pid, 0, 0));
    SHOW(ptrace(PTRACE_POKEDATA, pid, changeme, u.data));
    SHOW(ptrace(PTRACE_CONT, pid, 0, 0));
    wait(NULL);
    break;
  }

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T11:41:27.777

[ptrace(2)](http://man7.org/linux/man-pages/man2/ptrace.2.html)是一个非常神秘的系统调用，仅由调试器等使用。

当然，记录在案的`PTRACE_POKEDATA`请求`ptrace` 应该可以工作（当跟踪进程停止时），并让您能够写入被跟踪进程的内存。我不知道写（或`mmap`-ing）到`/proc/$pid/mem`是否应该工作。

谷歌搜索`linux write /proc /mem`给了我一个特别的提示，[这](http://lwn.net/Articles/432347/)表明它 `/proc/$pid/mem`被设计为只读的，但在最近的内核中可能已被设为可写。但是最近来自内核源代码树的[Documentation/filesystems/proc.txt](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/Documentation/filesystems/proc.txt?id=refs/tags/v3.8.4)并没有说太多。

我会谨慎写在`/proc/$pid/mem`; 如果它有效（也可能无效），它可能是非常特定于内核版本的。

[也许`mmap`-ing 该文件的某些部分`/proc/$pid/mem`确实有效（但我不知道）。你试过吗？]

相反，`PTRACE_POKEDATA`应该可以工作（在 Linux 出现之前，它已经存在于 SunOS 和许多其他 Unix 中）。当然，它相当缓慢。

# r - psych - 将因子加载作为数据.frame 用于 LaTeX 导出

> ID：15585870
> 
> 赞同：11
> 
> 时间：2013-03-23T10:51:33.990
> 
> 标签：r, latex, psych, factor-analysis

我正在使用`psych`包的`fa`命令进行因子分析，因此有一个对象 class `fa`。我可以使用 查询载荷`fac$loadings`，但我只想提取包含载荷的表，因此我可以使用`xtable`（或类似方法）将其转换为 LaTeX 格式。

示例代码：

```
library(psych)
library(xtable)
data(bfi)
fac <- fa(r=cor(bfi, use="complete.obs"), nfactors=5, fm="ml", rotate="none")
fac$loadings
ld <- someMagicalFunction(fac$loadings)
xtable(ld) 
```

谁能告诉我我可以用来做`someMagicalFunction`什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-23T11:21:43.523

当您查看 时`fac$loading`，您会看到它是一个 S3 对象。删除 class 属性会为您提供一个`matrix`，然后可以将其传递给`xtable`：

```
str(fac$loadings)
class(fac$loadings)

xtable(unclass(fac$loadings)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-09T18:16:12.310

这很好用。

另一种方法是在 psych 中使用 fa2latex 函数：

使用您的示例：

```
library(psych)
fac <- fa(bfi,5)
fa2latex(fac) 
```

会给你一个 APA 准备好的 LaTeX 表。

账单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-11T12:48:25.200

xtable 的结果是 HTML 语言。如果要将其保存为文件，可以使用：

```
print.xtable(x, type="HTML", file="table.html") 
```

# css - 居中弹出 FLUID div

> ID：15585872
> 
> 赞同：1
> 
> 时间：2013-03-23T10:51:42.913
> 
> 标签：css

再会

当元素定义了宽度和高度时，居中元素很容易：例如。

宽度：500px；高度：400px；

问题来自流体布局：

但我有一个模态弹出窗口（灯箱），用于放大缩略图......：

**问题**是我不能让它居中，它在左上浮动......我希望它**绝对居中：垂直和水平**

这是我的模态弹出代码另请参阅我的[JSFIDDLE](http://jsfiddle.net/yKezB/2/)以了解我的意思（尝试调整视口大小）

HTML：

```
<div id="imageModal">
    <div id="close_button">X</div>
    <div id="imageHolder"></div>
</div> 
```

CSS：

```
#articleFeatured img{
    width: 200px;
    height: 113px;
}
#imageModal {
    position: fixed;
    z-index: 1024;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgb(50, 50, 50);
    background: rgba(0, 0, 0, 0.6);
    vertical-align: middle;
}
#imageModal #imageHolder {
    display: table;
    vertical-align: middle;
    position: relative;
    margin: 0 auto;
    width: 100%;
    height: 100%;
    text-align: center;
    vertical-align: middle;
    border: 1px solid #0088cc;
}
#imageModal #imageHolder img {
    max-width: 100%;
    max-height: 100%;
    text-align: center;
    vertical-align: middle;
    display: table-cell;
}
#close_button {
    position: absolute;
    z-index: 9999;
    opacity:0.8;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";
    filter:alpha(opacity=80);
    display: inline-block;
    max-width: 45px;
    max-height: 45px;
    width: 100%;
    height: 100%;
    float: left;
    top: 0;
    left: 0;
    padding: 10px;
    cursor: pointer;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:15:49.363

这就是您将未知宽度/高度居中的方式：http: [//jsfiddle.net/nhGLH/2/](http://jsfiddle.net/nhGLH/2/)

## HTML

```
<div class='centered'>
    you can change the width and height 
    of this and it will always be centered
</div> 
```

## CSS

```
.centered{ 
    // mus have width & height 
    width:400x;  
    height:250px; 
    // absolute position must have all directions set to "0"
    position:absolute;
    left:0; right:0; top:0; bottom:0;
    // final centering trick
    margin:auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:16:35.233

正如您为宽度和高度定义流体尺寸一样，您需要将流体尺寸添加到您的定位属性中：顶部、左侧等

假设你有：

```
#parent {

    width: 50%;
    height: 50%;
    position: absolute;
    /*(or relative)*/
    top: 25%;
    left: 25%;

    text-align: center;
} 
```

顶部尺寸 + 左侧尺寸 = 宽度或高度的剩余尺寸。所以 25%（上）+ 25%（左）= 100% - 50%（宽度）...

所以使用另一个宽度，高度将产生：

```
#parent {

    width: 20%;
    height: 20%;
    position: absolute;
    /*(or relative)*/
    top: 40%;
    left: 40%;

    text-align: center;
} 
```

看[小提琴](http://jsfiddle.net/5HCWu/26/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T10:55:57.610

给以下CSS，

```
#imageModal #imageHolder img {
        margin 0 auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T11:15:07.397

为了使其正常工作，我不得不更改几个地方。稍微更改标记并添加一些 CSS 以支持垂直对齐。

```
<div id="articleFeatured">
    <div class="img">
        <div class="close_button">X</div>
        <img src="http://lorempixel.com/200/115/food/1">
    </div>
</div> 
```

检查工作演示：http: [//jsfiddle.net/yKezB/12/](http://jsfiddle.net/yKezB/12/)

# html - 如何使用css在一行中获取所有图像（允许重叠）？

> ID：15585876
> 
> 赞同：2
> 
> 时间：2013-03-23T10:52:22.220
> 
> 标签：html, css, width, inline, nowrap

我有一些图像（3）应该显示在一行中，并且它们的组合宽度大于页面宽度。但我无论如何都希望它们重叠，因此页面宽度无关紧要。但是由于某种原因，一行中只有 2 张图像，而下一行中只有 2 张图像。我该如何解决这个问题。`.imageContainer`如果我为每个 id 设置`position:abolute`并赋予值，它们就可以完美地工作。`left:--px`但这将难以维持和调整。如果我减小每个图像的宽度，它们也会正确对齐，但我不想这样做:(。请帮助。

* * *

**`white-space:nowrap;`allImagesContainer 中的**UPDATE解决了这个问题，但仅限于 chrome。**问题在 FF 和 IE 中仍然存在。**

 **这是代码：

```
<div class="allImagesContainer">
<div class="imageContainer" id="firstImage">
    <img  src="images/android1.png"/>
    <div class="innerText"></div>
</div>

<div class="imageContainer" id="biggerImage" >
    <img src="images/android2.png"/>
    <div class="innerText"></div>
</div>

<div class="imageContainer" id="lastImage">
    <img src="images/android3.png"/>
    <div class="innerText"></div>
</div>
</div> 
```

这是样式：

```
.allImagesContainer {
position: relative;
top: 50px;
width: 80%;
height: 500px;
margin-left: auto;
margin-right: auto;
display: table ;
}

.imageContainer{
position: relative;
display: inline-block;
}

#firstImage{
z-index: 1;
}

#biggerImage{
position: relative;
left: -50px;
z-index: 2;
}

#lastImage{
position: relative;
left: -40px;
z-index: 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:45:57.677

如果你不想换行，你可以在 allImagesContainer 上使用这个 css

```
.allImagesContainer
{
  white-space:nowrap;
} 
```

您可以删除所有元素的 position: absolute 和 relative 但保留 display:inline-block

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:59:21.623

`white-space:nowrap;`是您正在寻找的，放置在`allImagesContainer`

查看[演示](http://jsfiddle.net/sh0ber/rZMNh/)**

# javascript - 获取为 Input 设置了 Values 属性的 HTML 源代码

> ID：15585877
> 
> 赞同：0
> 
> 时间：2013-03-23T10:52:28.953
> 
> 标签：javascript, html, input

我正在使用 jQuery 将包含表单的 HTML 文档发送到 C# WebService。webService 解析它并尝试读取表单中所有输入的“值”属性。

问题是我将 HTML 文档发送到 web 服务

```
var HTMLDoc = document.getElementById('foo').innerHTML; 
```

并且它不会返回带有 value 属性的输入。例如，我有一个：

```
<input type="text" id="foo" /> 
```

我希望 JavaScript 得到：

```
<input type="text" id="foo" value="bar" /> 
```

当我做类似的事情时

```
document.getElementById('foo').innerHTML; 
```

这可能吗 ？任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:53:11.243

你可以试试看

# HTML

```
<input type="text" name="foo" id="foo" /> 
```

在jQuery中：

```
var foo = $("#foo").val();
alert("Jquery foo value : " + foo); 
```

在 JavaScript 中：

```
var foo = document.foo.value;
alert("JavaScript foo value : " + foo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:56:05.593

尝试

```
document.getElementById('foo').outerHTML 
```

# python - 如何使用 ElementTree 从 Python 中的 XML 文档中删除节点

> ID：15585885
> 
> 赞同：2
> 
> 时间：2013-03-23T10:53:03.800
> 
> 标签：python, elementtree

这是结构：

```
 <foo>
        <bar> 
    <buildCommand>
        <name>com.android.ide.eclipse.adt.ApkBuilder</name>
        <arguments>
        </arguments>
    </buildCommand>
    <buildCommand>
        <name>org.eclipse.ui.externaltools.ExternalToolBuilder</name>
        <triggers>auto,full,incremental,</triggers>
    </buildCommand>
        </bar>
   </foo> 
```

这是我的逻辑，它标识了我要删除的 buildCommand（第二个），将其添加到列表中，然后进行删除。

```
import os;
import xml.etree.ElementTree as ET

document = ET.parse("foo"); 
root = document.getroot(); 
removeList = list()
for child in root.iter('buildCommand'): 
   if (child.tag == 'buildCommand'): 
      name = child.find('name').text
      if (name == 'org.eclipse.ui.externaltools.ExternalToolBuilder'):
          removeList.append(child)

for tag in removeList:
   root.remove(tag)

document.write("newfoo") 
```

Python 2.7.1 具有删除命令，但删除时出现错误：

文件“/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/etree/ElementTree.py”，第 337 行，删除 self._children.remove(element) ValueError: list.remove (x): x 不在列表中

更新：

***由@martijn-pieters 解决 - 第二个 for 循环的正确逻辑是

```
for tag in removeList:
   parent = root.find('bar')
   parent.remove(tag) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T10:57:04.673

您需要从*其父*元素中删除该元素；但是，您需要直接获取对父级的引用，没有从子级备份的路径。在这种情况下，您必须`<bar>`在查找元素的同时获取对元素的引用`<buildCommand>`。

尝试从根中删除标记失败，因为标记不是根的直接子级。

# ios - Xcode 应用程序崩溃且没有错误

> ID：15585887
> 
> 赞同：0
> 
> 时间：2013-03-23T10:53:18.097
> 
> 标签：ios, xcode, error-handling

我不小心删除了我的主要 VC。我把它们带回来并重置了目标成员，所以现在我没有收到任何错误。问题是当它启动时它现在立即崩溃。这个项目太大了，我不知道从哪里开始解决这个问题。有人对从哪里开始解决这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T04:51:49.177

我不删除 .xib 或类文件，但请检查您的 mainviewcontroller.xib 是否处于构建阶段 -> 复制捆绑资源，或者如果您删除类文件意味着检查处于构建阶段 -> 编译源

# java - JDEE 在 OS X 上找不到 JDK 的工具 jar 文件

> ID：15585888
> 
> 赞同：2
> 
> 时间：2013-03-23T10:53:24.083
> 
> 标签：java, macos, emacs, jdee

我正在尝试在 OS X 上为 emacs 24 配置[JDEE](http://jdee.sourceforge.net)。当我创建一个 .java 文件时，环境似乎是自动加载的（请参见图片），因此它似乎安装正确。但是，当我尝试使用`M-x jde-complete` （我尚未将其绑定到任何键）自动完成任何内容时，我收到以下消息：

> 找不到 JDK 的工具 jar 文件（或等效文件）。键入 Mx describe-function [RET] jde-get-jdk-dir 了解更多信息。

我跑去`/usr/libexec/java_home`找到我的 Java 主页并将其设置在我的`~/.bash_profile`：

```
export JAVA_HOME="/Library/Java/JavaVirtualMachines/jdk1.7.0_17.jdk/Contents/Home" 
```

然后我将 JDEE 配置为指向 JDK `~/.emacs`：

```
(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(jde-jdk (quote ("1.7.0_17")))
 '(jde-jdk-registry (quote (("1.7.0_17" . "/Library/Java/JavaVirtualMachines/jdk1.7.0_17.jdk/Contents/Home")))))
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 ) 
```

谁能告诉我为什么自动完成不起作用？我相信我设置的 JDEE 的任何部分当前都没有工作，但是，我使用自动完成来测试，因为这是我开始工作的主要优先事项。

*更新：*如果我使用`M-x jde-compile`它说

> JDE 无法识别 JDK 1.7 javac。假设 JDK 1.6 javac？（是或否）

它似乎找到了我的JDK。如果我输入 yes ，它会给出同样的错误`(Cannot find JDK's tools jar file (or equivalent)`。

![在此处输入图像描述](../Images/eeca53f844d88b94da13f03ca19193da.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:13:20.140

我遵循[了本指南](http://www.cc.gatech.edu/grads/s/simpkins/useful-info/java-5-on-tiger.html)，现在它可以工作了。我认为他们的关键是添加两个 JDK，然后选择您要使用的一个。似乎 JDEE 可能不适用于仅添加一个 JDK。但是，现在我收到错误“无法在此终端上放置 GUI 菜单”，但我想这是另一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T12:35:46.517

[您可以按照本指南](http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html)中的说明获取新鲜的 CEDET 并进行设置。自 2012 年 11 月/12 月以来，CEDET 改进了对 Java 的支持，包括名称补全，包括 JDK 的自动检测（在 Linux 和 Mac OS X 上测试），另外还有 maven 和 ant 的基本 EDE 项目（对于 Maven，EDE 可以提取依赖项列表，并使用它们来构建名称完成）。

这是 Maven 项目的名称完成示例：

![在此处输入图像描述](../Images/c1733e9bbb96292058e272fc8345375f.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-28T17:02:02.853

对于 Mavericks 上的 JDK 1.7、Aquamacs 2.5、JDE 2.4.0.1

JDE 在 JAVA_HOME 下寻找“Classes/classes.jar”（当它试图找到“lib/tools.jar”的 darwin 等效项时）。

您可以通过创建这样的别名来帮助它：

```
sudo mkdir /Library/Java/JavaVirtualMachines/jdk1.7.0_45.jdk/Contents/Home/Classes
sudo ln -sfv /Library/Java/JavaVirtualMachines/jdk1.7.0_45.jdk/Contents/Home/lib/tools.jar /Library/Java/JavaVirtualMachines/jdk1.7.0_45.jdk/Contents/Home/Classes/classes.jar 
```

重新启动emacs，完成应该工作

我没有尝试过更新的 JDE 2.4.1

# ios - AFNetworking - 带有 JSON 参数的 POST 方法：var = {JSON}

> ID：15585889
> 
> 赞同：1
> 
> 时间：2013-03-23T10:53:39.397
> 
> 标签：ios, json, post, parameters, afnetworking

我正在使用一个接受这样的 POST 方法的网络服务

关键d; 值 {JSON 请求}

例如（登录）：

> d={ "action": [ "login" ], "request_data": { "login": { "user": "user", "password": "password" } } }

如果我使用 AFHTTPClient，则服务器找不到任何“d”参数。我尝试使用所有参数创建字典，通过 NSJSONSERIALIZE 序列化，然后将所有内容包装在 NSMutabliDictionary *parmas 中，键值对 @"d"，参数传递给 [httpClient postPath[....]] 但没有成功. 我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:01:29.677

```
NSString *jsonString  = @"YourStringFromServer";
NSDictionary *temDic = [jsonString JSONValue]; // convert string Value to JSON and add it to Dictionary.
NSlog(@"%@",temDic);// set specific key for specific value. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:01:59.080

它正在寻找一个 JSON 字符串。我在理解您问题中的最后几句话时遇到了一些麻烦（您没有非常清楚地描述这些步骤），但基本上：

```
//Create your params
NSDictionary *parametersDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                                                    yourData, @"action",
                                                                    someMoreData, @"request_data", nil];

NSString *parametersJSONString = [parametersDictionary JSONString];

NSDictionary *parametersToSend = [NSDictionary dictionaryWithObject:parametersJSONString forKey:@"d"]; 
```

你应该很高兴。注意`JSONString`需要 JSONKit。此外，在发送之前调试/记录`parametersToSend`以确保您获得正确的数据并且问题不在其他地方。

# ruby-on-rails - 使用“已注册”属性呈现 Facebook 朋友

> ID：15585893
> 
> 赞同：4
> 
> 时间：2013-03-23T10:53:53.860
> 
> 标签：ruby-on-rails, facebook, koala, rabl

基本上我想做的是：

*   获取当前用户的 Facebook 好友
*   `true`呈现此集合，同时通过向此集合的`false`每个项目添加设置的“已注册”属性来区分已在我的应用中注册的用户与其他用户

我设法检索了当前用户的 Facebook 朋友并将其提供给我的应用程序，就像这样

**用户控制器**

```
 def facebook_friends
    @friends = graph.get_connections("me", "friends")
  end 
```

**RABL**

```
object false
node :data do @friends
end 
```

它返回如下内容：

```
{
  data: [{
    'id': '23456789'
    'name': 'Bobby Brown'
  }, {
    'id': '23456788'
    'name': 'Bobby Black'
  }]
} 
```

但我想要的是这样的：

```
{
  data: [{
    'id': '23456789'
    'name': 'Bobby Brown',
    'registered': true
  }, {
    'id': '23456788'
    'name': 'Bobby Black',
    'registered': false
  }]
} 
```

但我不知道如何在不浪费太多资源的情况下完成第二部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T00:20:44.827

有一个简单的 Graph API 查询。

```
me/friends?fields=id,name,installed 
```

[https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)

它返回 JSON。安装应用的用户有`installed: true`

```
@graph.get_connections('me','friends',:fields=>"id,name,installed") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:24:47.323

我假设您的意思是在您的应用中注册

您可以使用 FQL 来构建您需要的响应，因为该`user`表有一个名为的注册字段`is_app_user`

`SELECT uid, name, is_app_user FROM user where uid in (SELECT uid2 FROM friend WHERE uid1 = me())`

哪个应该返回类似

```
{
  data: [{
    'id': '23456789'
    'name': 'Bobby Brown',
    'is_app_user': true
  }, {
    'id': '23456788'
    'name': 'Bobby Black',
    'is_app_user': false
  }]
} 
```

如果您指的是经过 Facebook 验证的用户，我认为它仅适用于经过身份验证的用户。

该领域是`verified`

*   [http://developers.facebook.com/docs/reference/fql/user](http://developers.facebook.com/docs/reference/fql/user)
*   [http://developers.facebook.com/docs/reference/fql/friend](http://developers.facebook.com/docs/reference/fql/friend)

# coffeescript - 从 Coffeescript 中的嵌套函数中获取值

> ID：15585898
> 
> 赞同：0
> 
> 时间：2013-03-23T10:54:24.257
> 
> 标签：coffeescript, nested, anonymous-function

我想从另一个函数（匿名函数）获得结果，但我不知道如何，因为我的结果函数是一个嵌套函数。也许我必须以某种方式使用回调？这是我的代码：

```
render: ->
    console.log @getCommunities()
    return this

getCommunities: ->
    dpd.communities.get (result, err) ->
        return console.log(err)  if err
        result 
```

getCommunities() 始终返回“未定义”。

有谁知道如何解决这个问题？

谢谢，罗扬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:33:07.897

这个怎么样？

```
render: ->
    @getCommunities (err, result) ->
       if err then throw err
       console.log result
    return this

getCommunities: (callback) ->
    dpd.communities.get (result, err) ->
        return console.log(err)  if err
        callback(null, result) 
```

仅供参考，最好`err`将第一个参数作为第一个参数传递给节点中的回调，假设这实际上是节点......只是通过 err 回调来猜测

# ios - 是否可以使用现有的邮件帐户设置？

> ID：15585900
> 
> 赞同：1
> 
> 时间：2013-03-23T10:54:38.873
> 
> 标签：ios, email, settings

是否可以从 ios 获取现有帐户设置？我想向用户提示一个选择框，以便他们可以选择他们已经在设置中创建的帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:23:00.870

为什么你需要那个？没有办法做到这一点。

有一个名为`From`in的字段`MFMailComposeViewController`。您可以从那里选择所需的帐户。

**笔记：**

在设置应用程序中添加多个邮件帐户时，此字段可见。

# c# - IEnumerable 函数 c# .net

> ID：15585904
> 
> 赞同：-3
> 
> 时间：2013-03-23T10:55:20.743
> 
> 标签：c#, .net, oop

我在面试中遇到过这个问题如下？

让我们考虑名为的字符串

```
string gowtham="test1,test2,test3" ; 
```

我需要**转换为 IEnumerable 字符串函数**

我需要一个输出作为

```
new[] {"test1", "test2","test3" } 
```

我所做的是我通过用逗号分隔值来创建一个 string() 函数，如下所示

```
string[] mysamples= gowtham.Split(','); 
```

我不知道如何进行之后

等待您的回复？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T11:04:53.847

每个数组已经是一个 IEnumerable，在你的情况下，如果你想显式转换为一个字符串的 IEnumerable，你可以使用

```
IEnumerable<string> mysamplesEnumerable = mysamples as IEnumerable<string> 
```

如果你的面试官想要一个可以做到这一点的功能，你可以做到

```
 IEnumerable<string> SplitEnumByComa(string input)
    {
          return input.Split(',');
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-23T11:06:07.443

如果我清楚地理解您的问题，您可以使用这样的方法；

```
public static IEnumerable<string> YourMethod()
{
     string gowtham = "test1,test2,test3";
     string[] mysamples = gowtham.Split(',');
     List<string> senum = new List<string>();

     foreach ( string s in mysamples )
     {
         senum.Add(s);
     }

     return senum as IEnumerable<string>;
} 
```

由于`string[]`实现[`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)了接口，看来您只需要将其转换为`IEnumerable<T>`

**编辑**：既然*Magnus*和*LukeH*警告过我，那么您也有一种简单的方法可以做。

```
public static IEnumerable<string> YourMethod()
{
     string gowtham = "test1,test2,test3";
     return gowtham .Split(',');
} 
```

# javascript - 在 js 中创建属性触发异常“不是函数”

> ID：15585908
> 
> 赞同：3
> 
> 时间：2013-03-23T10:55:39.560
> 
> 标签：javascript, html, firefox, scratchpad

我正在使用 js 更改内容输入的 div 的内容，我想将它们与 Ajax 一起使用，我使用 Firefox 暂存器来调试此功能：

```
function show(id){
var div = document.getElementById('com');
div.innerHTML = '';
var input1 = document.createElement('input')
            .createAttribute('type').setAttribute('type', 'hidden')
            .createAttribute('value').setAttribute('value',id )
            .setAttribute('name','id' );
var input2 = document.createElement('input')
             .createAttribute('type').setAttribute('type', 'input')
             .createAttribute('name').setAttribute('name', 'com');
var btn = document.createElement('button')
          .createAttribute('onClick').setAttribute('onClick', 'post()');
btn.innerHTML = 'Comment';
div.appendChild(input1).appendChild(input2).appendChild(btn);
} 
```

我得到的是：

```
/*
Exception: document.createElement(...).createAttribute is not a function
@Scratchpad/2:2
*/ 
```

我什么都不懂，有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T11:16:56.773

我相信`.createAttribute()`属于`document`，而不是单个元素，因此可以解释该错误：`.createElement()`返回一个元素，并且该元素没有功能`.createAttribute()`。

但是你不需要`.createAttribute()`在调用之前使用`.setAttribute()`，因为如果它们不存在，后者将创建元素属性。但是，我认为`.setAttribute()`返回`undefined`，所以你不能真正链接它。尝试一次做一步：

```
var input1 = document.createElement('input');
input1.setAttribute('type', 'hidden');
input1.setAttribute('value',id );
input1.setAttribute('name','id' );
// etc. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T11:17:40.883

基本上，异常表明没有名为“createAttribute”的函数。这是正确的：

`.createAttribute()`是一个函数`document`：[https ://developer.mozilla.org/en-US/docs/DOM/document#Methods](https://developer.mozilla.org/en-US/docs/DOM/document#Methods)

所以这些功能不能像你尝试做的那样被链接起来。你必须单独打电话给他们。无论如何，不​​应再使用“createAttribute”（请参阅[​​Using createAttribute vs. just setting the attribute?](https://stackoverflow.com/questions/7677930/using-createattribute-vs-just-setting-the-attribute-directly)）。

```
function show(id){
    var div = document.getElementById('com');
    div.innerHTML = '';

    var input1 = document.createElement('input');
    input1.setAttribute('type', 'hidden');
    input1.setAttribute('value',id );
    input1.setAttribute('name','id' );

    var input2 = document.createElement('input');
    input2.setAttribute('type', 'input');
    input2.setAttribute('name', 'com');

    var btn = document.createElement('button');
    btn.setAttribute('onClick', 'post()');
    btn.innerHTML = 'Comment';

    div.appendChild(input1).appendChild(input2).appendChild(btn);
} 
```

# php - php header() 的另一种方式是什么

> ID：15585911
> 
> 赞同：1
> 
> 时间：2013-03-23T10:55:53.247
> 
> 标签：php, session, header

我知道，**必须在发送任何实际输出之前调用 header()。**但我正在尝试使用 header() 在我的 xammp 服务器中包含会话。代码是：

```
 $member_id=$_REQUEST['member_id'];
    $member_id = stripslashes($member_id);
    $sql="SELECT * FROM member WHERE member_id='$member_id'";
    $result=mysql_query($sql);
    // Mysql_num_row is counting table row
    $count=mysql_num_rows($result);
    // If result matched $myusername and $mypassword, table row must be 1 row
    if($count==1){
     $_SESSION['member_id']=$member_id;
     header("location:index.php?page=member_account&&member=success");
    } 

```

上面的代码在我的本地主机中运行良好。但是，当我在在线服务器上上传此脚本时，服务器会显示如下所示的警告：**警告：无法修改标头信息 - 标头已由 /home 中的（输出开始于 /home/emonuniq/public_html/index.php:16）发送/emonuniq/public_html/inc/member/check.php 在第 15 行。**然后我尝试另一种方法在 javascript 上重定向此 LINK。

```
 //script tag is not showing  
     echo("location.href = 'index.php?page=member_account&&member=success'; 
     "); 

```

此代码在success.php 上成功重定向。但是在此页面**会话中不起作用**。我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:58:49.183

将此添加到 php.ini

```
output_buffering = On 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:00:20.063

这可能会帮助您：

```
<script>
  window.location.href = "index.php?page=member_account&&member=success";
</script> 
```

# python - 为什么我收到 NameError: name 'array' is not defined

> ID：15585915
> 
> 赞同：1
> 
> 时间：2013-03-23T10:55:58.273
> 
> 标签：python, nameerror, spyder

我正在使用 spyder 并编写了以下类：

```
class Ray:

    def __init__(self, r, p, k):

        if r.shape == (3,):
            self.r = r
        if p.shape == (3,):
            self.p = p
        if k.shape == (3,):
            self.k = k

r = array(range(3))
p = array(range(3))
k = array(range(3)) 
```

它存储在 /home/user/workspace/spyder/project 中，控制台工作目录就是那个目录。在控制台中，我可以运行一个数组（范围（3）），它返回一个值为 0、1、2 的数组。然而做的时候

```
import ray 
```

我收到以下错误

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "ray.py", line 8, in <module>
    class Ray:
  File "ray.py", line 20, in ray
    r = array(range(3));
NameError: name 'array' is not defined 
```

**编辑：**

默认情况下 spyder 具有以下行为，不太明白为什么 array() 默认工作我认为它只是 numpy 的一部分。

```
import numpy as np  # NumPy (multidimensional arrays, linear algebra, ...)
import scipy as sp  # SciPy (signal and image processing library)

import matplotlib as mpl         # Matplotlib (2D/3D plotting library)
import matplotlib.pyplot as plt  # Matplotlib's pyplot: MATLAB-like syntax
from mayavi import mlab          # 3D plotting functions
from pylab import *              # Matplotlib's pylab interface
ion()                            # Turned on Matplotlib's interactive mode

Within Spyder, this intepreter also provides:
    * special commands (e.g. %ls, %pwd, %clear)
    * system commands, i.e. all commands starting with '!' are subprocessed
      (e.g. !dir on Windows or !ls on Linux, and so on) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-23T10:58:03.943

你需要`from numpy import array`.

这是由 Spyder 控制台为您完成的。但是在程序中，您必须进行必要的导入；优点是您的程序可以由没有 Spyder 的人运行，例如。

我不确定默认情况下 Spyder 会为您导入什么。`array`可能通过`from pylab import *`或等效地通过`from numpy import *`. 如果您想直接将代码从 Spyder 控制台复制到程序中，您可能需要`from numpy import *`甚至`from pylab import *`. 不过，[官方不建议在程序中这样做](http://docs.python.org/2/tutorial/modules.html#more-on-modules)，因为这会污染程序的命名空间；做`import numpy as np`然后`np.array(…)`是习惯。

# jquery - jQuery 对话框选择不正确

> ID：15585918
> 
> 赞同：2
> 
> 时间：2013-03-23T10:56:27.750
> 
> 标签：jquery, html, css

在[这个](http://jsfiddle.net/cvh2013/EWebt/3/)Fiddle 中，当您单击图像时会显示一个 jQuery 对话框。对话框应包含特定于图像的文本，例如律师事务所图像的律师事务所文本，行业图像的行业文本等。

问题是，一旦您单击了三个图像中的每一个，对任何图像的任何进一步单击都会返回与您单击的三个图像中的最后一个图像相关的对话框，而不是您刚刚单击的图像的对话框。

有人可以指出我做错了什么吗？

HTML

```
<div id="sf">

    <a href="dialogcontent/lawfirms.html" title="Law firms" id="sfimage">
        <div class="circle hovershadow lawfirms lawfirms-box-shadow">Law firms</div>
    </a> 
    <a href="dialogcontent/industry.html" title="Industry" id="sfimage">
        <div class="circle hovershadow industry industry-box-shadow">Industry</div>
    </a> 
    <a href="dialogcontent/in-house.html" title="In-house legal counsel" id="sfimage">
    <div class="circle hovershadow in-house in-house-box-shadow text">In-house
            legal counsel</div> 
    </a>
</div> 
```

Javascript：

```
$(document).ready(function () {
var $loading = $('<img src="http://ubuntuone.com/5qQ3i4ctM8HAvRsSIZKgqd" alt="Loading ..." class="loading">'); 
var $dialog = $('<div></div>')

$('#sf a').each(function () {

         $dialog.append($loading.clone());
    var $link = $(this).one('click', function () {
        $dialog.load($link.attr('href') + ' #content')
            .dialog({
            title: $link.attr('title'),
            width: 500,
            height: 300
        });

        $link.click(function (e) {

        //    e.preventDefault();
            $dialog.dialog('open');

            return false;
        });

        return false;
    });
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:18:42.763

您正在使用“一个”方法。所以每个元素最多执行一次点击事件。

因此，如果该元素的处理程序已经执行，则将显示对话框中最后加载的内容。

# javascript - Ember.js 搜索模型动词

> ID：15585919
> 
> 赞同：3
> 
> 时间：2013-03-23T10:56:38.030
> 
> 标签：javascript, html, rest, ember.js, ember-data

我发现的教程和指南表明 Ember.js 模型非常以数据为中心，因为您在浏览器中拥有持久保存到服务器的数据和/或模型填充了来自服务器的数据。

以动词为中心的东西怎么样？例如，我的情况是，到目前为止，我有一个“搜索”模型，其中搜索有一个查询、一个状态（“beforesearch”、“duringsearch”等），并且希望有一些结果。我希望搜索然后是“runQuery”，它会触发对服务器的 ajax 请求，服务器返回并用结果填充模型，并将其状态更改为“aftersearch”。

在模型上处理此类动词的最佳方法是什么？“runQuery”应该通过 ember-data 进行，还是使用 $.ajax 或类似工具手动触发？我是否可能以错误的方式考虑模型，而这实际上应该通过控制器进行？

编辑：在阅读了一些关于 REST 的内容之后，我想我想要的是发布到“控制器”资源。因此，例如：

POST：/searches（创建搜索）

POST：/searches/1/run（执行搜索 1 的“运行”控制器

Ember.js / ember-data 是否有推荐的调用控制器资源的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T13:35:28.910

Ember-data 非常注重使用包含各种信息字段和关系并由唯一 ID 定义的模型对象。我的 API 的一半就像 ember-data 所期望的那样，一半就像你描述的那样，它更多的是关于数据处理或执行计算，而不是创建/检索/更新/删除具有 id 的数据对象。将这些计算视为相同并为其分配一个 id 并将其保存在数据库中是没有意义的。

就我而言，由于我同时拥有 ember-data 样式的数据对象和计算功能，因此我混合使用了 ember-data 和自定义 ajax 请求。我存储了由 ember-data 检索的关系数据，但我扩充了模型以包括对计算部分的访问。

例如：

```
App.Event = DS.Model.extend({
  name: DS.attr('string'),
  items: DS.hasMany('App.Item'),
  ...etc...

  searchData: null,
  searchInEvent: function(data) {
    var _this = this;
    return $.ajax({
      url: "/api/events/" + this.get('id') + "/search/",
      dataType: 'json',
      type: 'POST',
      data: data
    }).then(function(result){
      _this.set('searchData', result);
    });
  }
}); 
```

`App.Event`是一个普通的 ember-data 模型，由路由器通过通常的 ember 约定加载，并且由于各种控制器需要访问搜索功能，它们可以访问它`searchInEvent`并`searchData`添加到模型中。

# matlab - Matlab：命令检查一个术语之前是正号还是负号？

> ID：15585920
> 
> 赞同：0
> 
> 时间：2013-03-23T10:56:42.783
> 
> 标签：matlab, math, symbolic-math

我正在寻找一个可以执行的命令：

```
a*b*c -----> +

-a --------> -

a*b -------> +

c*d*e*f*a--> + 
```

其中 a、b、c、d、e 和 f 是 Matlab 中的符号变量。

**是否有任何命令可以返回表达式的初始符号？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T11:15:11.907

如果你有 Matlab 2013，你可以这样做：

```
>> syms a b c       
>> children(a*b*c)

ans =

[ a, b, c]

>> children(-a)   

ans =

[ a, -1]

>> children(a*b)

ans =

[ a, b]

>> children(-a*-b)

ans =

[ a, b]

>> children(-a*-b*-c)

ans =

[ a, b, c, -1] 
```

您将通过查看返回向量的最后一个元素来获得初始符号。所以测试一下。

如果将变量定义为一个值，结果将如下所示：

```
>> c = -4;
>> children(-a*-b*-c)

ans =

[ a, b, 4] 
```

最后一个元素上的呼号如果为负则为 -1，为正则为 1。

请注意，可能并不总是有一个数值作为最后一个元素！Sign(a) 将给出 sign(a) 所以你需要假设它在这种情况下是积极的。

# mysql - 仅在为空时选择

> ID：15585921
> 
> 赞同：7
> 
> 时间：2013-03-23T10:56:57.487
> 
> 标签：mysql, sql, join, left-join

我有一张用户表和一张他们在列表中的东西表 -

要显示在列表中有项目的所有用户，我可以加入这两个表`users`并`user_lists`在`user_id`

例如

```
select u.emailaddr, u.name from users u
join user_lists uw where u.user_id=uw.user_id
group by u.name 
```

**问题：**如何显示列表中没有项目的所有用户- 换句话说，我需要一个在表**user_lists**中没有条目的用户列表

我试过这个，但它无休止地运行

```
select u.emailaddr, u.name from users u
join user_lists uw where u.user_id<>uw.user_id
group by u.name 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T10:58:13.820

`LEFT JOIN`与`IS NULL`谓词一起使用：

```
select u.emailaddr, u.name 
from users u
LEFT join user_lists uw ON u.user_id = uw.user_id
WHERE uw.user_id IS NULL; 
```

* * *

**或者：**谓词`NOT IN`：

```
select u.emailaddr, u.name 
from users u
WHERE u.user_id NOT IN (SELECT user_id
                        FROM user_lists); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:52:28.643

```
SELECT u.user_id FROM users u
EXCEPT
SELECT uw.user_id FROM user_lists uw 
```

它将为您提供存在于用户中但不存在于用户列表中的 ID。

# ios - requestNewPublishPermissions 后权限未更新

> ID：15585922
> 
> 赞同：5
> 
> 时间：2013-03-23T10:56:59.457
> 
> 标签：ios, facebook, facebook-graph-api, facebook-ios-sdk

我正在尝试使我的应用程序像 facebook 页面。为此，我请求`publish_actions`权限调用：

```
[[FBSession activeSession] requestNewPublishPermissions:@[@"publish_actions"]
                                          defaultAudience:FBSessionDefaultAudienceFriends
                                        completionHandler:nil]; 
```

然后为了喜欢我调用的页面：

```
[FBRequestConnection startWithGraphPath:@"PAGE_ID/likes"
                           parameters:@{@"access_token" : [FBSession activeSession].accessTokenData.accessToken}
                           HTTPMethod:@"POST"
                    completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                      NSLog(@"%@", error);
                    }]; 
```

问题是当我查看时`[FBSession activeSession].permissions`，它只包含`@"email`我之前请求的内容。

类似调用打印的错误是：

```
permissions:(
email
)>, com.facebook.sdk:ParsedJSONResponseKey=<CFBasicHash 0x944ee10 [0x214eb48]>{type = mutable dict, count = 2,
entries =>
1 : <CFString 0x27c2cc [0x214eb48]>{contents = "code"} = <CFNumber 0x9446260 [0x214eb48]>{value = +400, type = kCFNumberSInt32Type}
2 : <CFString 0x273e1c [0x214eb48]>{contents = "body"} = <CFBasicHash 0x944e650 [0x214eb48]>{type = mutable dict, count = 1,
entries =>
11 : <CFString 0x944ed50 [0x214eb48]>{contents = "error"} = <CFBasicHash 0x944e3f0 [0x214eb48]>{type = mutable dict, count = 3,
entries =>
2 : <CFString 0x943c0c0 [0x214eb48]>{contents = "type"} = <CFString 0x944e890 [0x214eb48]>{contents = "OAuthException"}
3 : <CFString 0x944e830 [0x214eb48]>{contents = "message"} = <CFString 0x944e7a0 [0x214eb48]>{contents = "(#3) Application does not have the capability to make this API call."}
6 : <CFString 0x944ec70 [0x214eb48]>{contents = "code"} = 3 
```

但是，我可以在用户时间轴上发布内容。

我怎样才能使类似的电话有效？

# javascript - 如何显示 Cookie 是刚刚启用还是禁用？

> ID：15585935
> 
> 赞同：-1
> 
> 时间：2013-03-23T10:59:13.247
> 
> 标签：javascript, html

我正在使用下面显示的 javascript 代码来显示 Cookie

```
Enabled

or 

Disabled 
```

代码是：

```
<script>
txt=navigator.cookieEnabled;
document.getElementById("example").innerHTML=txt;
</script> 
```

但是这段代码只是显示

```
true 
```

我不知道如何继续。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:01:51.773

请找到以下链接以检查 cookie 启用状态：

[http://sveinbjorn.org/cookiecheck](http://sveinbjorn.org/cookiecheck)

```
function are_cookies_enabled()
{
    var cookieEnabled = (navigator.cookieEnabled) ? true : false;

    if (typeof navigator.cookieEnabled == "undefined" && !cookieEnabled)
    { 
        document.cookie="testcookie";
        cookieEnabled = (document.cookie.indexOf("testcookie") != -1) ? true : false;
    }
    return (cookieEnabled);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:02:57.103

```
<script>
txt=navigator.cookieEnabled;
document.getElementById("example").innerHTML=(txt==true?"Enabled":"Disabled";
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T11:04:49.740

`navigator.cookieEnabled`返回`true`或`false`。所以你可以根据这些值显示你想要的

```
<script type="text/javascript">
  txt=navigator.cookieEnabled;
  document.getElementById("example").innerText=(txt==true ?"Enabled":"Disabled");
</script> 
```

# selenium - 如何读取 Selenium 自动性能测试发布的 HAR 文件？

> ID：15585941
> 
> 赞同：0
> 
> 时间：2013-03-23T10:59:36.780
> 
> 标签：selenium, firebug, har

我已使用[此](http://www.softwareishard.com/blog/firebug/automate-page-load-performance-testing-with-firebug-and-selenium/)参考在 Selenium 中使用 Firefox、Firebug 和 NetExport（Firebug 扩展）进行自动页面加载性能测试。我的最终目标只是从 HAR 文件中提取页面加载时间。生成 HAR 文件并存储在本地磁盘上。这完美无缺。

我在上面链接的参考文献中描述了第二种方法，其标题为“将 HAR 文件发送到服务器”。我按照描述的步骤操作，但不确定将稍后显示的 PHP 脚本保存在哪里。我试图保留它，`http://localhost/har-db`并为 PHP 文件命名，即。`getHARData.php`但不知道在 JAVA 程序中写什么以便访问该文件。该文件希望接收一个`REQUEST`参数，但不确定如何使其访问它想要作为`REQUEST`变量的 URL。所有代码都可以在链接的网站上找到。`.xpi`除了更改Firefox 扩展的文件路径外，我没有做任何即兴创作。

任何优化的解决方法都是最受欢迎的。

# c# - 子构造函数

> ID：15585942
> 
> 赞同：-1
> 
> 时间：2013-03-23T10:59:39.123
> 
> 标签：c#, object, constructor, parent-child

好的，所以这个问题已经解决了，但是所有的解决方案实际上只适用于简单的程序，我希望找到一种更有效的方法来做到这一点。所以让我们假设我有这个代码

```
public class Parent
{
    int one;
    int two;
    public Parent(int A, int B)
    {
        one = A;
        two = B;
    }
}
public class Child : Parent
{
    int three;
    int four;
    public Child(int C, int D)
    {
        three = C;
        four = D;
    }
} 
```

好的，因此 Child 具有所有父变量以及所有新变量（它具有 int 1 和 2 以及 3 和 4）。当我创建一个子对象时

```
Child myChild = new Child(3,4); 
```

我只能输入子构造函数中声明的两个值，我真的需要设置所有四个变量值（两个来自父级，两个来自子级）。我发现的唯一解决方案是

```
public class Child : Parent
{
    int three;
    int four;
    public Child(int A, int B, int C, int D) : base(A, B)
    {
        three = C;
        four = D;
    }
} 
```

但是我正在处理数十个子类和大约 30 个父变量，因此上面的解决方案变得非常大，对父变量所做的任何更改都必须在每个子类中手动更改。有没有一种简单的方法可以将父构造函数标记到子构造函数或其他比上面提出的更有效的解决方案上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:22:37.650

公开字段，删除构造函数，定义任意数量的成员，声明您的类，如：

```
public class Parent {
    public int one;
    public int two;
}

public class Child: Parent {
    public int three;
    public int four;
} 
```

并像实例化它

```
var child=
    new Child {
        one=1,
        two=2,
        three=3,
        four=4
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:27:46.007

如果你是

> 处理几十个子类和大约 30 个父变量

您的架构存在严重问题。我可以建议您阅读有关组合而不是继承的内容[http://en.wikipedia.org/wiki/Composition_over_inheritance](http://en.wikipedia.org/wiki/Composition_over_inheritance)或更[喜欢组合而不是继承？](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance).

但是，如果您对此无能为力，我建议您将此*Parent 变量*分组到一个对象中，并将此对象传递给构造函数。

# c# - SOA 和 WCF 数据服务

> ID：15585944
> 
> 赞同：0
> 
> 时间：2013-03-23T10:59:40.343
> 
> 标签：c#, asp.net-mvc, wcf, architecture, soa

我想在我的下一个项目中使用 SOA 架构。另外，我想将 WCF 数据服务用于数据访问层。例如，用户想要接收某个日期的文档。我们调用WCF服务（Service Layer）来检索文档

```
public ActionResult GetDocumentByDate(DateTime date)
{
    var request = // here create request object;
    var documentsDto = _documentService.GetDocument(request);
   ...
} 
```

在 WCF 服务中，我们称之为业务层（BL）：

```
public class DocumentService:IDocumentService
{
     public IEnumerable<DocumentDto> GetDocumentsByDate(DocumentsByDateRequest request)
     {
          // call GetDocumentsByDate from DocumentLogic
     }
}

public class DocumentLogic
{
    public IEnumerable<Document> GetDocumentsByDate(DateTime date)
    {
        // call DAL
    }
} 
```

我想使用 WCF 数据服务来获取数据。我没有使用过这项技术。

**将 WCF 数据服务隐藏在服务层之后是一种很好的做法，或者它们应该可用，只是 SL 通过 WCF 数据服务访问数据？**

在这种情况下，外界将看到 WCF 服务和 WCF 数据服务。
**按照例子，哪里做验证比较好？**

**最后是一般性问题，您对 WCF 数据服务的印象如何？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:13:12.417

我认为 DataServices 是一项很酷的技术，但我认为对用户隐藏它们是一个坏主意。实际上，您并没有真正隐藏服务，只是没有显式调用。如果您想使用数据服务，您可以从您的 asp .net 代码中调用该服务。如果您愿意，您可以使用数据服务中的特定方法管理和限制您的数据（实体）。我猜您正在使用 EF :)

我认为进行验证的最佳位置是在您的 asp .net 代码中（当然是在您创建请求之前）。

# android - setRetainInstance(true) 不持久化 Fragment 的成员变量

> ID：15585948
> 
> 赞同：1
> 
> 时间：2013-03-23T11:00:04.970
> 
> 标签：android, android-fragments

我正在使用无视图片段在我的活动方向更改期间存储一些数据。它看起来大致是这样的：

```
public class BoardActivity extends BaseActivity {
    private DataHandler mDataHandler;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // initialize the data handler
        mDataHandler = (DataHandler)mFragmentManager.findFragmentByTag("data");
        if (mDataHandler == null) {
            mDataHandler = new DataHandler();
            mFragmentManager.beginTransaction().add(mDataHandler, "data").commit();

            // initialize the data
            mDataHandler.mThreads = ...;
        } else {

            // here, the data is taken and the ListView is filled again.
            fillView();
        }
    }

    public static class DataHandler extends Fragment {
        private Topic[] mThreads;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setRetainInstance(true);
        }
    }
} 
```

发生的情况是，当 Activity 离开时（例如使用主页按钮）并且由于某种原因在后台被杀死，应用程序在该 Activity 重新启动时崩溃。原因是虽然 Fragment`mDataHandler`被 FragmentManager 找到了，但它的 Member 变量 ( `mThreads`) 是`null`.

为什么 Fragment 本身可以保留，但其变量设置为零？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:53:13.037

> 为什么 Fragment 本身可以保留，但其变量设置为零？

片段没有保留。保留的片段仅在配置更改时保留。您没有进行配置更改。您的进程已终止，因为 Android 需要 RAM 来支持其他应用程序。

# mysql - 如何只更新mysql中文本条目的一部分？

> ID：15585950
> 
> 赞同：0
> 
> 时间：2013-03-23T11:00:10.453
> 
> 标签：mysql, sql, text, sql-update

我的数据库中有一个列，其中包含图像的绝对 URL。我刚刚将整个网站转移到另一个文件夹，因此图像的 URL 已更改。所以例如。如果 image_URL 列中图像的 URL 如下所示：

```
http://www.mysite.com/images/myimage.jpg 
```

我需要像这样更新它：

```
http://www.mysite.com/newfolder/images/myimage.jpg 
```

列`type`的`image_URL`是`TEXT`。但只有当使用的 URL 是“mysite”而不是“externalsite”时，我才需要更新它。

什么是正确的 SQL 使用？我非常熟悉 SQL`UDATE`命令，但不需要只更新列值的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:05:25.187

更新表 SET image = REPLACE(image, " [http://www.mysite.com/images/](http://www.mysite.com/images/) ", " [http://www.mysite.com/newfolder/images/](http://www.mysite.com/newfolder/images/) ")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:04:09.767

当然，只需对“mysite”进行 LIKE 搜索即可获取所有 URL。然后一一更改文本并将其重新保存到您的 dB。

李

# vb.net - 将字符串发送到另一台计算机

> ID：15585954
> 
> 赞同：0
> 
> 时间：2013-03-23T11:00:57.303
> 
> 标签：vb.net, string, tcp

我有一个字符串，我想发送到另一台使用我的软件的计算机。我想将字符串直接发送到另一台计算机上的软件。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:47:31.720

其他替代方法是使用 tcp 或 udp 广播

如果您需要一次将字符串发送到多台计算机，您可以使用 udp 广播到 255.255.255.255 ；但是使用 udp 没有收到确认。

如果您搜索它们，可以找到很多示例，这里有一个：

[http://msdn.microsoft.com/en-us/library/tst0kwb1(v=VS.71).aspx](http://msdn.microsoft.com/en-us/library/tst0kwb1%28v=VS.71%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:04:57.700

完成此类任务的标准方法是使用套接字。根据您使用的语言和环境，互联网上有很多示例。

以下链接可能对您有用：http: [//msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx)

# sql - 如何在 SQL Server 2008 中将表作为查询文本查看

> ID：15585958
> 
> 赞同：1
> 
> 时间：2013-03-23T11:01:07.927
> 
> 标签：sql, sql-server, sql-server-2008

我在设计器模式下在 SQL Server 2008 中创建了一个表。现在我想将此表显示为查询语句（创建表..）

是否有将表显示为查询模式的选项？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T11:03:45.507

右键单击对象浏览器中的表，然后选择：

```
Script Table as -> CREATE To -> New Query Editor Window 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T11:03:58.967

在 SQL Server Management Studio 中，右键单击表名并 Script as CREATE TABLE

# php - FOSRestBundle 串行器错误

> ID：15585959
> 
> 赞同：3
> 
> 时间：2013-03-23T11:01:11.660
> 
> 标签：php, serialization, symfony, fosrestbundle

使用 FOSRestBundle 时出现错误。

> 致命错误：在第 209 行的 /home/a15net/public_html/kavuklar/vendor/friendsofsymfony/rest-bundle/FOS/RestBundle/View/ViewHandler.php 中找不到类 'JMS\Serializer\SerializationContext'

它在 composer.phar 更新之前工作。

你知道为什么我会收到这个错误吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-24T11:14:32.097

我有同样的问题。

我通过阅读[FOSRestBundle 升级文件](https://github.com/FriendsOfSymfony/FOSRestBundle/blob/master/UPGRADING.md)解决了它，然后更新了我的**composer.json**。您应该尝试在下一行添加 require 部分：

```
"friendsofsymfony/rest-bundle": "0.11.*",
"jms/serializer-bundle": "0.12.x-dev" 
```

接着

`composer.phar update`

这个对我有用。

尝试并发表评论。

# java - netty 4.0 输入字节解码

> ID：15585965
> 
> 赞同：0
> 
> 时间：2013-03-23T11:01:59.950
> 
> 标签：java, sockets, network-programming, netty, pipeline

我正在尝试实现一个非常简单的套接字服务器。我需要阅读一些消息，用新行或任何其他分隔符分隔。

根据此文档： http: [//netty.io/4.0/api/io/netty/handler/codec/string/StringDecoder.html](http://netty.io/4.0/api/io/netty/handler/codec/string/StringDecoder.html)和[http://netty.io/4.0/api/io/netty/handler/codec /DelimiterBasedFrameDecoder.html](http://netty.io/4.0/api/io/netty/handler/codec/DelimiterBasedFrameDecoder.html)

此通道初始化程序的代码

```
ChannelInitializer<SocketChannel> channelInitializer = new ChannelInitializer<SocketChannel>() {
            @Override
            public void initChannel(SocketChannel ch) throws Exception {

                ch.pipeline().addLast("frameDecoder", new DelimiterBasedFrameDecoder(Delimiters.lineDelimiter()));
                ch.pipeline().addLast("stringDecoder", new StringDecoder(CharsetUtil.UTF_8));

                // Encoder
                ch.pipeline().addLast("stringEncoder", new StringEncoder(CharsetUtil.UTF_8));
            }
         }; 
```

应该做的伎俩。

但是对于任何可以使用提供的参数的解码器和编码器都没有合适的构造函数。他们期望一些整数作为第一个参数和一个字节数组。只有 stringDecoder 似乎没问题。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:22:53.907

netty 4.0 的内联文档目前已经过时——但它处于 alpha/beta/development 状态。

引入整数参数以防止无限缓冲区增长并指定最大帧长度。

所以`new LineBasedFrameDecoder(4096))`类似于`new DelimiterBasedFrameDecoder(Delimiters.lineDelimiter())`。

# android - java.lang.ClassCastException: android.widget.Button 不能转换为 android.view.ViewGroup

> ID：15585966
> 
> 赞同：2
> 
> 时间：2013-03-23T11:02:09.787
> 
> 标签：android, android-fragments

我是片段的新手。我做了一个简单的片段，但无法在没有崩溃的情况下工作......**当我按下按钮开始片段时它正在崩溃**......我正在寻找好的片段学习资源并等待您的建议..感谢您的关注。 ..这是主要活动；

```
package com.example.fragments;

import android.annotation.TargetApi;
import android.app.Activity;
import android.app.FragmentManager;
import android.app.FragmentTransaction;
import android.media.MediaPlayer;
import android.os.Build;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class Main extends Activity {

    MediaPlayer sound;
    Button black,red,blue;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        sound = MediaPlayer.create(Main.this, R.raw.alkis);
        black=(Button)findViewById(R.id.colorBlack);
        red=(Button)findViewById(R.id.colorRed);
        blue=(Button)findViewById(R.id.colorBlue);

        black.setOnClickListener(new View.OnClickListener() {

            @TargetApi(Build.VERSION_CODES.HONEYCOMB)
            public void onClick(View v) {
                FragmentManager manager = getFragmentManager();
                sound.start();
                FragmentTransaction transaction=manager.beginTransaction();
                         transaction.add(R.id.colorBlack, new FragmentAferin());

                         transaction.commit();

            }
        });
        red.setOnClickListener(new View.OnClickListener() {

            @TargetApi(Build.VERSION_CODES.HONEYCOMB)
            public void onClick(View v) {
                FragmentManager manager = getFragmentManager();
                sound.start();
                FragmentTransaction transaction = manager.beginTransaction();
                transaction.add(R.id.colorRed, new FragmentAferin());

                transaction.commit(); 

            }
        });
        blue.setOnClickListener(new View.OnClickListener() {

            @TargetApi(Build.VERSION_CODES.HONEYCOMB)
            public void onClick(View v) {
                FragmentManager manager = getFragmentManager();
                sound.start();
                FragmentTransaction transaction = manager.beginTransaction();
                transaction.add(R.id.colorBlue, new FragmentAferin());

                transaction.commit(); 

            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

这是主要的 XML 布局；

```
 <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
         tools:context=".Main" >

    <Button
        android:id="@+id/colorBlack"
        style="@style/FragmentTextTheme"
        android:background="@android:color/black"
        android:gravity="center"
        android:clickable="true"
        android:onClick="@string/black"
        android:text="@string/black"
        android:textColor="@android:color/white" />

    <Button
        android:id="@+id/colorRed"
        style="@style/FragmentTextTheme"
        android:background="@color/Red"
        android:text="@string/red" 
        android:textColor="@android:color/white" />
    <Button
        android:id="@+id/colorBlue"
        style="@style/FragmentTextTheme"
        android:background="@color/Blue"
        android:text="@string/blue" 
        android:textColor="@android:color/white" />

    </LinearLayout> 
```

这是片段类代码；

```
package com.example.fragments;

import android.annotation.TargetApi;
import android.app.Fragment;
import android.os.Build;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class FragmentAferin extends Fragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_aferin,
                container, false);

        return view;
    } 
```

这是片段 XML 布局；

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:gravity="center"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/aferin"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

例外

```
 FATAL EXCEPTION: main
java.lang.ClassCastException: android.widget.Button cannot be cast to android.view.ViewGroup
    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:875)
    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1057)
    at android.app.BackStackRecord.run(BackStackRecord.java:682)
    at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1435)
    at android.app.FragmentManagerImpl$1.run(FragmentManager.java:441)
    at android.os.Handler.handleCallback(Handler.java:725)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5039)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    at dalvik.system.NativeStart.main(Native Method) 
```

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T12:49:18.707

You are trying to add a fragment to your Buttons which does not work, because as the Exception says, Buttons aren't ViewGroups, so that can't have other Views inside. So the exceptions are caused by the R.id.colorBlack - the ID here should be the ID of a ViewGroup, e.g. a LinearLayout

```
 FragmentTransaction transaction=manager.beginTransaction();
                     transaction.add(R.id.colorBlack, new FragmentAferin());

                     transaction.commit(); 
```

Where do you want your `FragmentAferin` to be placed?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:12:27.750

你的课应该扩展`FragmentActivity`而不是`Activity`

[您可以从Android 支持库](http://developer.android.com/tools/extras/support-library.html)中获取此类

# android - 具有 ResultSet 变量的 GSON 对象

> ID：15585967
> 
> 赞同：0
> 
> 时间：2013-03-23T11:02:17.653
> 
> 标签：android, mysql, gson, resultset

我正在用 android 解析 GSON，我想解析我的 MySQL 表中的数据。我的 GSON 对象是：

```
{"data":
   [
   {"country":"Ireland", "capital": "Dublin"},
     {"country":"Hungary", "capital": "Budapest"},
     {"country":"Democratic Republic of the Congo", "capital": "Kinshasa"}
     ]
   } 
```

这个对象对我有用，我可以在我的手机中看到它。不过，如果我从 mysql 数据库添加我的结果集代码，如下所示：

```
<%

    try { Class.forName("com.mysql.jdbc.Driver").newInstance();
    Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/database", "root", "root");
    Statement st = con.createStatement();
    ResultSet rs = st.executeQuery("select * from capitals");
    while (rs.next()) {                      
        %>             
        {"data":
           [
           {"country":"Ireland", "capital": "<% rs.getString(1); %> "},
             {"country":"Hungary", "capital": "<% rs.getString(2); %>"},
             {"country":"Democratic Republic of the Congo", "capital": "Kinshasa"}
               ]
           }
                            <%
                         }
                        } catch (Exception e) {
                        }
                    %> 
```

应用程序失败，并告诉我“不幸的是，应用程序停止了”。这是我的日志： http: [//pastebin.com/8bz5QbjR](http://pastebin.com/8bz5QbjR) 它写道，第 29 行是 EOF。哪条线？在我的 Activity(android) 中还是在我的 GSON 对象中？

# javascript - 如何 .append() 一个对象

> ID：15585970
> 
> 赞同：2
> 
> 时间：2013-03-23T11:02:50.790
> 
> 标签：javascript, jquery, game-physics

我正在用 javascript 制作一个简单的游戏，我想要`.append()`一个盒子。充当子弹。但我被困住了。这就是我所拥有的

```
var existingdiv1 = document.getElementById('bullet'); 
```

和

```
$("#test").click(function() {
    $("div").append([existingdiv1]); 
}); 
```

当我按下按钮“#test”时，它不会创建额外的“div”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:09:18.163

您将不得不选择现有的 div （我猜这是子弹？）。然后附加它。

这是和示例： [**工作演示**](http://jsfiddle.net/pnwCB/1/)

**Javascript：**

```
$("#test").click(function(){
    $("#appendToThis").append($('#bullet').html()); 
}); 
```

**html:**

```
<input id="test" type="button" value="click" />
<div id="appendToThis"></div>

<div id="bullet"><div>BANG</div></div> 
```

每次单击时，您都会看到“砰”字被附加。您可以使用测试 div 上的 empty() 方法将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:29:23.023

您可以使用[.clone()](http://api.jquery.com/clone/)

```
$("#test").click(function(){
    $("#appendToThis").append($('#bullet').clone()); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T11:06:14.603

我相信你想在现有的 div 中添加一个新的 div，所以你的代码已经颠倒了追加顺序。`$('#bullet')` 你需要通过尝试这个来包装现有的 div

```
$('#bullet').append('<div></div>'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T11:08:41.453

从[`.append`文档](http://api.jquery.com/append/)中：

> 如果以这种方式选择的元素被插入到 DOM 中其他位置的单个位置，它将被移动到目标中（而不是克隆）。

您似乎想先[克隆*^([docs])*](http://api.jquery.com/clone/)元素：

```
$("div").append($(existingdiv1).clone());
// or simpler
$("div").append($('#bullet').clone()); 
```

请注意，如果您`div`的页面上有多个元素，`$("div")`将选择所有元素，并且您传递给的元素`.append`将自动克隆（如文档中所述）。
您应该只将元素附加到单个 div。

# functional-programming - 函数式语言中列表操作的效率

> ID：15585971
> 
> 赞同：1
> 
> 时间：2013-03-23T11:02:55.827
> 
> 标签：functional-programming

在 Racket 或 SML 等函数式语言中，我们通常在递归调用中执行列表操作（模式匹配、列表追加、列表连接......）。但是，我不确定这些操作在函数式语言中的一般实现。列表中的创建、更新或删除元素等操作是否会返回列表的全新副本？我曾经在一本书中读到一个关于函数式编程缺点的例子；也就是说，每次更新数据库时，都会返回一个全新的数据库副本。

我质疑这个例子，因为 FP 中的数据本质上是不可变的，因此从现有列表创建列表不应该创建一个全新的副本。相反，新列表只是基于过滤条件的对其他列表中现有对象的不同引用集合。

例如， list`A = [a,b,c]`和 list `B=[1,2,3]`，我创建了一个新列表，其中包含现有列表中的前两个元素，即`C=[a,b,1,2]`. 这个新列表只包含对`a,b,`from`A`和`1,2`from 的引用`B`。它不应该是新副本，因为数据是不可变的。

因此，要更新列表中的元素，只需要线性时间在列表中找到一个元素，创建一个新值并创建一个新列表，该列表与旧列表中的元素相同，但更新后的元素除外。要创建一个新列表，运行环境只需更新前一个元素的下一个指针。如果一个列表保存了非原子元素（即列表、树...），并且仅更新了其中一个非原子元素中的一个原子元素，则该过程递归地应用于非原子元素，直到原子元素如上所述更新。**这是应该如何实施的吗？**

如果有人在每次从现有列表/添加/更新/删除/带有元素创建列表时创建列表的整个深层副本，那么他们做错了，不是吗？

还有一点是，当程序环境更新时（即为一个新变量添加一个新的键/值条目，以便我们以后可以参考），**它并没有违反函数式编程的不可变属性，是吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:29:00.793

你是绝对正确的！具有不可变数据的 FP 语言**永远不会**进行深度复制（除非它们的实现真的很差）。由于数据**是**不可变的，因此重用它永远不会有任何问题。它与所有其他结构的工作方式完全相同。因此，例如，如果您正在使用树结构，那么最多只会复制实际的树，而不会复制其中包含的数据。

因此，虽然复制听起来非常昂贵，但如果您来自命令式/OO 背景（您确实必须复制，因为您有可变数据），它比您最初想象的要少得多。拥有不可变数据有很多好处。

# android - 在选项卡内滚动列表，以便隐藏选项卡上方的部分

> ID：15585973
> 
> 赞同：0
> 
> 时间：2013-03-23T11:02:59.460
> 
> 标签：android, android-listview, scroll, android-tabhost

我在其中一个选项卡中有 TabHost 和 List。在 TabHost 上方，我有一些信息，将显示。因此，当我想向下滚动列表时，必须隐藏该信息，并且只有选项卡可见。（如在 AppStore 中）。如何实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:34:40.233

```
 <ScrollView 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:isScrollContainer="true" 
    android:scrollbarAlwaysDrawVerticalTrack="true" 
    android:layout_below="@+id/label2"
    android:scrollbarStyle="insideOverlay" 
    android:scrollbars="vertical">

   <RelativeLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

     <TextView
    android:id="@+id/TextView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:layout_marginTop="10dp"
    android:text="Name:"
    android:textSize="24sp"
    android:textColor="#00005c"

    android:layout_below="@id/label2"/>
       <EditText
    android:id="@+id/EditText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/TextView2"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:hint="Enter Name"
    android:layout_marginTop="05dp"
    android:textSize="22sp"
    android:textColor="#000000"/>

       <TextView
    android:id="@+id/TextView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:layout_marginTop="10dp"
    android:layout_below="@id/EditText"
    android:text="Phone Number:"
    android:textSize="24sp"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:textColor="#00005c"/>

         <EditText
          android:id="@+id/EditText1"
            android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:layout_below="@id/TextView3"
        android:layout_marginTop="05dp"
        android:hint="Enter Digits"
        android:inputType="number"
        android:textSize="20sp"
       android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:textColor="#000000" />

          <TextView
    android:id="@+id/TextView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:layout_marginTop="10dp"
    android:layout_below="@id/EditText1"
    android:text="Email ID:"
    android:textSize="24sp"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:textColor="#00005c"/>
          <EditText
    android:id="@+id/EditText2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/TextView4"
    android:hint="Enter Text"
    android:layout_marginTop="05dp"
    android:textSize="20sp"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:textColor="#000000"
    />

           <TextView
    android:id="@+id/TextView5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:layout_marginTop="10dp"
    android:layout_below="@id/EditText2"
    android:text="Address Line1:"
    android:textSize="24sp"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:textColor="#00005c"/>

           <EditText
    android:id="@+id/EditText3"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/TextView5"
    android:hint="Address 1"
    android:layout_marginTop="05dp"
    android:textSize="20sp"
    android:textColor="#000000"

    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:gravity="top"/>

         <TextView
    android:id="@+id/TextView6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:layout_marginTop="10dp"
    android:layout_below="@id/EditText3"
    android:text="Address Line2:"
    android:textSize="24sp"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:textColor="#00005c"/>

             <EditText
    android:id="@+id/EditText4"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/TextView6"
    android:hint="Address 2"
    android:layout_marginTop="05dp"
    android:textSize="20sp"
    android:textColor="#000000"

    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:gravity="top"/>

            <TextView
    android:id="@+id/TextView7"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:layout_marginTop="10dp"
    android:layout_below="@id/EditText4"
    android:text="Country"
    android:textSize="24sp"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:textColor="#00005c"/>

             <Spinner
    android:id="@+id/Spin1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/TextView7"
    android:hint="Country"
    android:layout_marginTop="05dp"
    android:textSize="20sp"
    android:textColor="#000000"
     android:background="@drawable/spinner" 
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:gravity="top"/>

             <TextView
    android:id="@+id/TextView8"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:layout_marginTop="10dp"
    android:layout_below="@id/Spin1"
    android:text="City"
    android:textSize="24sp"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:textColor="#00005c"/>

           <Spinner
    android:id="@+id/Spin2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/TextView8"
    android:hint="city"
    android:layout_marginTop="05dp"
    android:textSize="20sp"
    android:textColor="#000000"
    android:background="@drawable/spinner" 
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:gravity="top"/>

              <TextView
    android:id="@+id/TextView9"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:layout_marginTop="10dp"
    android:layout_below="@id/Spin2"
    android:text="State"
    android:textSize="24sp"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:textColor="#00005c"/>

            <Spinner
    android:id="@+id/Spin3"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/TextView9"
    android:hint="State"
    android:layout_marginTop="05dp"
    android:textSize="20sp"
    android:textColor="#000000"
    android:background="@drawable/spinner" 
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:gravity="top"/>

             <TextView
    android:id="@+id/TextView10"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:layout_marginTop="10dp"
    android:layout_below="@id/Spin3"
    android:text="Zip Code"
    android:textSize="24sp"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:textColor="#00005c"/>

           <EditText
    android:id="@+id/EditText5"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/TextView10"
    android:hint="Zip Code"
    android:layout_marginTop="05dp"
    android:textSize="20sp"
    android:textColor="#000000"

    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:gravity="top"/>

            <TextView
    android:id="@+id/TextView11"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:layout_marginTop="10dp"
    android:layout_below="@id/EditText5"
    android:text="Notes:"
    android:textSize="24sp"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"

    android:textColor="#00005c"/>

             <EditText
    android:id="@+id/EditText6"
    android:layout_width="fill_parent"
    android:layout_height="150px"
    android:layout_below="@id/TextView11"
    android:hint="Notes"
    android:layout_marginTop="05dp"
    android:textSize="20sp"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:textColor="#000000"
    android:gravity="top"/>

          <Button
           android:id="@+id/Save"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:layout_alignParentRight="true"
          android:layout_below="@id/EditText6"
          android:layout_marginTop="05dp"
              android:text="Submit"
           android:gravity="center" 
           android:soundEffectsEnabled="true"
            android:typeface="monospace"
         android:textSize="22sp"
        android:layout_marginLeft="100dp"
    android:layout_marginRight="100dp"
        android:background="@drawable/big_button" 
    android:textColor="#FFFFFF"/>

         <Button
           android:id="@+id/reset"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent"
           android:layout_alignParentRight="true"
           android:layout_below="@+id/Save"
           android:layout_marginTop="05dp"
           android:text="Reset"
           android:gravity="center" 
           android:soundEffectsEnabled="true"
           android:typeface="monospace"
           android:textSize="22sp"
           android:layout_marginLeft="100dp"
    android:layout_marginRight="100dp"
           android:background="@drawable/big_button" 
    android:textColor="#FFFFFF"/>

             </RelativeLayout>
             </ScrollView> 
```

# django - is_valid 方法在第二次使用时返回 false

> ID：15585975
> 
> 赞同：0
> 
> 时间：2013-03-23T11:03:50.210
> 
> 标签：django, unit-testing, modelform

我为我的 post 函数编写单元测试，但在第二次，它总是失败。这是我的 forms.py

```
from django import forms
from django.contrib.auth.models import User
from django.utils import timezone
from models import Post

class PostForm(forms.ModelForm):
    class Meta:
        model = Post 
```

这是我的models.py

```
from django.db import models
from django.contrib.auth.models import User

class Post(models.Model):
    post_author = models.ForeignKey(User)
    created_at = models.DateTimeField()
    update_at = models.DateTimeField()
    post_title = models.TextField(blank=True)
    activity_address = models.TextField(blank=True)
    post_content = models.TextField()
    post_type = models.CharField(max_length=50, choices=[('activity', 'activity', ), ('blog', 'blog')])
    post_status = models.CharField(max_length=50, choices=[('open', 'open'), ('locked', 'locked') ]) 
```

这是 postlib.py

```
from models import Post
from forms import PostForm
from django.utils import timezone

def create(data):
    if not data['created_at']:
        data['created_at'] = timezone.now()
    if not data['update_at']:
        data['update_at'] = timezone.now()
    post_form = PostForm(data=data)
    if post_form.is_valid():
        post = post_form.save()
    else:
        post = None
    return post 
```

和单元测试代码

```
from django.test import TestCase
from django.utils import timezone
from Publish.forms import PostForm
from Publish.models import Post
from Publish import postlib
from django.contrib import auth
from django.contrib.auth.models import User

class PublishTest(TestCase):
    def setUp(self):
        User.objects.create_user(username='test', email='test@test.com', password='abc')
        self.user = auth.authenticate(username="test", password='abc')
        self.data = {'post_author': '1',
                'post_title': 'test',
                'post_content': 'nothing',
                'activity_address': 'New York',
                'created_at': '',
                'update_at': '',
                'post_type': 'activity',
                'post_status': 'open'}

    def test_a(self):
        post = postlib.create(self.data)
        self.assertNotEqual(post, None)

    def test_b(self):
        post = postlib.create(self.data)
        self.assertNotEqual(post, None) 
```

在unittest中，总是有一个失败，要么是test_a，要么是test_b，失败的原因是form.is_valid()。Is_valid() 方法有时会失败，但我使用相同的数据，怎么可能？

PS：post_form 错误是 `'Select a valid choice. That choice is not one of the available choices.'`

# ios - 当我点击地图时，它会在 iOS5 的初始时间崩溃？

> ID：15585976
> 
> 赞同：2
> 
> 时间：2013-03-23T11:03:57.103
> 
> 标签：ios, objective-c, google-maps

```
for (int i = 0; i< [delarsInfoArray count] ; i++)
{
    NSString *lattitudeValue;
    NSString *longitudeValue;
    if ([[delarsInfoArray objectAtIndex:i]count]>1) {
        lattitudeValue = [[[delarsInfoArray objectAtIndex:i]valueForKey:@"LATITUDE"]objectAtIndex:1];
        longitudeValue = [[[delarsInfoArray objectAtIndex:i]valueForKey:@"LONGITUDE"]objectAtIndex:0];
    }
    else
    {
        lattitudeValue = @"";
        longitudeValue = @"";
    }
    CLLocationCoordinate2D pinLocation;
    if(([lattitudeValue floatValue] != 0) && ([longitudeValue floatValue] != 0) ) {
        mapRegion.center.latitude = [lattitudeValue floatValue];
        mapRegion.center.longitude = [longitudeValue floatValue];
        if(pinLocation.latitude !=0 && pinLocation.longitude !=0) {
            myAnnotation1 = [[MyAnnotation alloc] init];
            if ([[delarsInfoArray objectAtIndex:i] count] == 0) {

                myAnnotation1.title  = @"";
                myAnnotation1.subtitle = @"";
            }
            else
            {
                // NSLog(@"====== delears array is===%@",delarsInfoArray);
                NSLog(@"===== delears array count is %d",[delarsInfoArray count]);

                if ([[[delarsInfoArray objectAtIndex:i]valueForKey:@"Address"]objectAtIndex:2] !=nil)
                {
                    myAnnotation1.title = [[[delarsInfoArray objectAtIndex:i]valueForKey:@"Address"]objectAtIndex:2];
                }
                if ([[[delarsInfoArray objectAtIndex:i]valueForKey:@"City"]objectAtIndex:3]!= nil) {
                    myAnnotation1.subtitle = [[[delarsInfoArray objectAtIndex:i]valueForKey:@"City"]objectAtIndex:3];
                }

                NSLog(@"%@",[[[delarsInfoArray objectAtIndex:i]valueForKey:@"City"]objectAtIndex:3]);
            }

            [dealerMapView setRegion:mapRegion animated:YES];
            [dealerMapView addAnnotation:myAnnotation1];
            myAnnotation1.coordinate = mapRegion.center;
            [myAnnotation1 release];
        }
    }
} 
```

上面的代码写在viewWillAppear中。将地图加载到视图后，当我点击地图时，应用程序崩溃了。如何解决这个崩溃？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:11:58.197

这里有很多问题，但跳到列表顶部的是以下行：

```
if ([[[delarsInfoArray objectAtIndex:i]valueForKey:@"Address"]objectAtIndex:2] !=nil)
    ... 
```

和

```
if ([[[delarsInfoArray objectAtIndex:i]valueForKey:@"City"]objectAtIndex:3]!= nil) {
    ... 
```

问题是数组`objectAtIndex`的 a*永远不会*是. 您不能将 a 存储在数组中，所以如果它找不到值，它会使用一个对象，. 这表示没有找到值，但使用（可以添加到数组中）而不是（不能）。`valueForKey`*`nil``nil``valueForKey``NSNull``[NSNull null]``NSNull``nil`*

 *问题可能是有一些后续代码（例如，试图计算标注气泡大小的代码）试图获取字符串的长度，但由于您存储了 a `NSNull`，它正在尝试调用该`length`方法它失败了。

您可以通过多种方式解决此问题，例如：

```
if ([[[delarsInfoArray objectAtIndex:i]valueForKey:@"Address"]objectAtIndex:2] != [NSNull null])
    ... 
```*

# php - 将表单数据插入两个数据库表中

> ID：15585977
> 
> 赞同：-1
> 
> 时间：2013-03-23T11:03:58.047
> 
> 标签：php, mysql, database

我希望从一个表单将数据发布到两个数据库表中。我的数据库排列如下：

**数据库 1 - “观察名单”**：

*   watchlist_id
*   用户身份
*   姓名
*   描述
*   类别

**数据库 2 - 'watchlist_films'**：

*   watchlist_id
*   电影编号

我当前的 MySQL 查询看起来像这样：`$query = "INSERT INTO watchlist_films (watchlist_id, film_id) VALUES ('$watchlist_name['watchlist_id']', '$rt_id') WHERE watchlists ('watchlist_id') = " . $watchlist_name['watchlist_id'];`，但我不确定是否一定有某种形式的`INNER JOIN`地方？

不确定要提供哪些其他信息/代码，所以如果这里的细节太少，我深表歉意，但是，如果还有其他需要的，请给我留言，我会提出任何其他需要的。我是一个相对的 PHP 新手，如果这看起来是一个非常简单的问题，我深表歉意！

**根据评论更新**：

我现在有一半的查询工作，并更新了逻辑以反映它。新查询基本上执行以下操作：

*   `INSERT`表中的新监视`'watchlists'`列表
*   `SELECT watchlist_id`表中的新关注`'watchlists'`列表`WHERE watchlist_name = $watchlist_name`（刚刚创建的新关注列表的名称）和`user_id = $user_id`
*   `INSERT watchlist_id`（从上一个查询中选择）AND`film_id`到`'watchlist_films'`表中

根据您的评论，我的查询现在看起来像这样：

```
if ($submit == 'Submit') {
        require_once("db_connect.php");

        $watchlist_name = clean_string($_POST['watchlist-name']);
        $watchlist_description = clean_string($_POST['watchlist-description']);
        $watchlist_category = $_POST['watchlist-category'];

        $addWatchlist_bad_message = '';
        $addWatchlist_good_message = '';

        if ($db_server) {
            if (!empty($watchlist_name)) {
                $watchlist_name = clean_string($watchlist_name);
                $watchlist_description = clean_string($watchlist_description);
                mysql_select_db($db_database);

                // Insert new Watchlist into Watchlist index
                $insert_new_watchlist = "INSERT INTO watchlists (user_id, name, description, category) VALUES ('$user_id', '$watchlist_name', '$watchlist_description', '$watchlist_category')";
                mysql_query($insert_new_watchlist) or die("Insert failed. " . mysql_error() . "<br />" . $insert_new_watchlist);

                // Select new Watchlist ID
                $select_new_watchlist = "SELECT watchlist_id FROM watchlists WHERE name = " . $watchlist_name;
                $new_watchlist_id = mysql_query($select_new_watchlist) or die("Insert failed. " . mysql_error() . "<br />" . $select_new_watchlist);

                // Add film to new Watchlist
                $add_new_film = "INSERT INTO watchlist_films (watchlist_id, film_id) VALUES ('$new_watchlist_id', '$rt_id')";
                mysql_query($add_new_film) or die("Insert failed. " . mysql_error() . "<br />" . $add_new_film);
                $addWatchlist_good_message = '<div class="alert alert-success">Watchlist created successfully!</div>';?>
                <script>
                    $('a.add-watchlist').trigger('click');
                </script><?php 
            }
        } else {
            $addWatchlist_bad_message = '<div class="alert alert-error">Error: could not connect to the database.</div.';?>
            <script>
                $('a.add-watchlist').trigger('click');
            </script><?php
        }
        require_once("db_close.php");
    } 
```

然而，我的查询似乎在 SELECT 语句中失败，在将新的关注列表添加到关注列表索引和将电影添加到新创建的关注列表之间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T11:32:05.033

```
try this

$query1 = "INSERT INTO watchlist_films (watchlist_id, film_id) 
VALUES ('" . $watchlist_name['watchlist_id'] . "', '$rt_id')"; 

 $query2= "INSERT INTO watchlists ('watchlist_id') 
VALUES (" . $watchlist_name['watchlist_id'] . ")";

$result = mysqli_multi_query($query1, $query2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:09:50.643

您需要为每个表编写一个 INSERT。

```
$mysqli->query("INSERT INTO watchlist_films (watchlist_id, film_id) 
  VALUES ('" . $watchlist_name['watchlist_id'] . "', '$rt_id')");
$mysqli->query("INSERT INTO watchlists ('watchlist_id') 
  VALUES (" . $watchlist_name['watchlist_id'] . ")"); 
```

# php - 在 codeigniter 中使用 Order By

> ID：15585979
> 
> 赞同：1
> 
> 时间：2013-03-23T11:04:03.410
> 
> 标签：php, mysql, codeigniter, activerecord, sql-order-by

这是我正常的mysql查询：

```
$sql = "SELECT * FROM item order by ";
if(my_condition)
{
       $sql. = "FIELD(`category`, 'Auto & Accessories', 'Couch', 'Bed', 
       'Desk &     Office', 'Bike &            Scooter', 'Tools', 'Leisure', 
        'Iron & Wood', 'Cabinet', 'Kitchen & Accessories', 'Refrigerator & Appliances',
        'Toys & Games', 'Chair', 'Table', 'Garden & Terrace', 'TV, HIFI & Computers', 
        'General Item')";

}
else
{
     $sql .= "category asc";
} 
```

我需要它在活动记录中的 CI 中。我尝试了以下方式：

```
 if(my_condition)
            {
                $this->db->order_by("FIELD(`category`, 'Auto & Accessories', 'Couch',
                'Bed', 'Desk & Office', 'Bike & Scooter', 'Tools', 'Leisure', 'Iron & 
                 Wood', 'Cabinet', 'Kitchen & Accessories', 'Refrigerator & 
                 Appliances', 'Toys & Games', 'Chair', 'Table', 'Garden & Terrace', 
                 'TV, HIFI & Computers', 'General Item')");

            }
            else
            {
                $this->db->order_by("category", "asc");
            } 
```

但是，我得到了这个错误::

```
 Error Number: 1064
   You have an error in your SQL syntax; check the manual that corresponds to your           
   MySQL server version for the right syntax to use near 'Couch'`, `'Bed'`, `'Desk` &  
   Office', `'Bike` & Scooter', `'Tools'`, `'Leisure'`,' at line 6

  Filename: C:\xampp\htdocs\straatjutter_service\system\database\DB_driver.php

 Line Number: 330 
```

如何解决？实际上，我需要按上述格式排序我的项目类别。这可以在正常的 mysql 查询中完成。但是，在活动记录中这样做会感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:06:43.983

试试这个：：

```
 $this->db->select('i.id, condition, description, created_at, updated_at, category, latitude, longitude, status, d.device_token, d.facebook, d.preferred, d.email, d.phone');
            $this->db->select("CONCAT('$url', `image_url_original`) AS `image_url_original`", false);
            $this->db->select("CONCAT('$url', `image_url_mid`) AS `image_url_mid`", false);
            $this->db->select("CONCAT('$url', `image_url_thumb`) AS `image_url_thumb`", false);
            $this->db->select("FIELD(`category`, 'Auto & Accessories', 'Couch', 'Bed', 'Desk & Office', 'Bike & Scooter', 'Tools', 'Leisure', 'Iron & Wood', 'Cabinet', 'Kitchen & Accessories', 'Refrigerator & Appliances', 'Toys & Games', 'Chair', 'Table', 'Garden & Terrace', 'TV, HIFI & Computers', 'General Item') AS `sort_col`", false);

            $this->db->from('item as i');
            $this->db->join('device as d', 'i.device_id = d.device_token');

            $this->db->where('created_at > DATE_SUB(UTC_TIMESTAMP(), INTERVAL 24 HOUR)');
            $this->db->where('i.status', 'shared');

            if($language === 'nl_NL') {
                $this->db->order_by('sort_col', 'asc');
            } else {
                $this->db->order_by('category', 'asc');
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-11T07:16:06.843

最好用这种方式

```
$ids = "1,3,2,4";
$qry ="SELECT * FROM (`destination`) WHERE `id` IN ($ids) ORDER BY `FIELD` ( id, $ids )";
$result = $this->db->query($qry);
return $result->result(); 
```

# eclipse - 找不到主类：程序将退出

> ID：15585989
> 
> 赞同：1
> 
> 时间：2013-03-23T11:04:59.797
> 
> 标签：eclipse, java, main, .class-file

我在 Eclipse 上搞乱了 JRE 设置。最初项目设置为 1.6，当设置为 1.7 时，我的程序开始显示很多错误。所以当我切换回 1.6 时，所有编译时错误都消失了，但我现在遇到了一个新问题。当我尝试运行包含主函数的启动类时，这显示在控制台上。.class 文件都存在。请指教。

```
java.lang.UnsupportedClassVersionError: Demo : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(Unknown Source)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$000(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
Exception in thread "main" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T11:10:19.200

版本 51.0 意味着仍然是使用 Java 7 编译的类文件。这些文件不会使用 JRE 6 运行。您必须先重新编译它们（重建项目或使用 ant/maven 进行干净编译）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T11:10:55.970

检查 Java 版本是否在您的 Java 构建路径和项目属性中的 Java 编译器中匹配。我认为您使用 1.6 编译并尝试使用 java 1.7 运行

# c++ - 如何使用 playsound() 播放用户指定的声音文件？

> ID：15585990
> 
> 赞同：-4
> 
> 时间：2013-03-23T11:05:13.533
> 
> 标签：c++, c, visual-studio-2010

如何使用 PlaySound() 在数组中播放用户指定的声音文件？我正在使用 Windows7 和 VC++ 2010。

假设我使用**gets(song);** 语句从用户输入歌曲的完整路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:12:38.110

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd743680(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743680(v=vs.85).aspx)

```
PlaySound( song, NULL, SND_FILENAME ); 
```

# c++ - 使用 strdup() 后将 char* 转换为 int

> ID：15585991
> 
> 赞同：4
> 
> 时间：2013-03-23T11:05:22.067
> 
> 标签：c++, c, pointers, type-conversion, strdup

为什么使用后`strdup(value)` `(int)value`返回的输出与以前不同？如何获得相同的输出？

我的简短示例出错了，请使用长示例：这里是完整的测试代码：

```
#include <stdio.h>
#include <iostream>

int main()
{

    //The First Part
    char *c = "ARD-642564";
    char *ca = "ARD-642564";

    std::cout << c << std::endl;
    std::cout << ca << std::endl;

//c and ca are equal
    std::cout << (int)c << std::endl;
    std::cout << (int)ca << std::endl;

    //The Second Part
    c = strdup("ARD-642564");
    ca = strdup("ARD-642564");

    std::cout << c << std::endl;
    std::cout << ca << std::endl;

//c and ca are NOT equal Why?
    std::cout << (int)c << std::endl;
    std::cout << (int)ca << std::endl;

    int x;
    std::cin >> x;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T11:07:45.260

因为在您的情况下数组衰减为指针，所以您正在打印*指针*（即，在非外来计算机上，内存地址）。不能保证指针适合`int`.

*   在代码的第一部分，`c`不必`ca`相等。您的编译器执行一种内存优化（完整答案请参见[此处](https://stackoverflow.com/a/690252/1126268)）。

*   在第二部分，`strdup`动态分配一个字符串两次，使得返回的指针不相等。编译器没有优化这些调用，因为他似乎无法控制`strdup`.

在这两种情况下，`c`并且`ca`可能不相等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T11:07:30.473

> “strdup() 函数应返回一个指向**新字符串**的指针，它是 s1 指向的字符串的副本。” [资源](http://pubs.opengroup.org/onlinepubs/009695399/functions/strdup.html)

因此，指针不同是可以理解的。

# javascript - 悬停在其他 div 上时旋转图像

> ID：15585996
> 
> 赞同：0
> 
> 时间：2013-03-23T11:05:41.000
> 
> 标签：javascript, jquery, rotation

我正在尝试创建一些真正简单的东西。但我不知道为什么它不起作用？这就是我正在尝试的：[http](http://www.yannickluijten.be/test) ://www.yannickluijten.be/test 当我将绿色、蓝色、灰色或黄色 div 悬停时，中间的图像必须旋转。这是代码：

```
$(document).ready(function() {     
$('#green').hover(function(){     
    $('#rotator').addClass('rotate_green');    
},     
function(){    
    $('#rotator').removeClass('rotate_green');     
});

$('#blue').hover(function(){     
    $('#rotator').addClass('rotate_blue');    
},     
function(){    
    $('#rotator').removeClass('rotate_blue');     
});

$('#gray').hover(function(){     
    $('#rotator').addClass('rotate_gray');    
},     
function(){    
    $('#rotator').removeClass('rotate_gray');     
});

$('#yellow').hover(function(){     
    $('#rotator').addClass('rotate_yellow');    
},     
function(){    
    $('#rotator').removeClass('rotate_yellow');     
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:14:43.470

您忘记在代码中包含 jQuery.js。在 HEAD 部分添加这一行 `http://code.jquery.com/jquery-1.9.1.js`

# django - Django Dropbox动态错误

> ID：15585997
> 
> 赞同：0
> 
> 时间：2013-03-23T11:05:44.577
> 
> 标签：django

我有一个页面显示学生选择的类别的所有对象。我在网站上实现了一个分页来分割不同页面的对象。

当学生从保管箱中选择一个类别并尝试浏览新旧条目的分页时，就会出现问题。

![在此处输入图像描述](../Images/3fa203e56f30e42010080c9af4448e69.png)

之所以会发生这种情况，是因为每次用户从 dropbox 中选择一个类别时，dropbox 在检索到对象后都会被重置。因此，当用户尝试使用分页浏览对象时。分页不知道要检索哪些数据，因为保管箱类别被重置并将用户重定向到空白页面。

对此的解决方案是对 Dropbox 进行编程，使其针对用户做出的选择保持静态，这样当用户浏览由分页拆分的数据时，分页知道可以根据 Dropbox 检索对象。

我不知道如何让这个 Dropbox 对用户做出的选择保持静态。

我的意见.py

```
def BoardFinder(request):
    form = BoardFinderForm(request.POST)
    fo = BoardFinderForm()
    if form.is_valid():
        Category = form.cleaned_data['Category']
        posts = Board.objects.filter(Category=Category)
        paginator = Paginator(posts, 1)

        try: page = int(request.GET.get("page", '1'))
        except ValueError: page = 1

        try:
            posts = paginator.page(page)
        except (InvalidPage, EmptyPage):
            posts = paginator.page(paginator.num_pages)
        return render(request,"boardfinder.html",{"posts":posts,"fo":fo})
    return render(request,"boardfinder.html",{"fo":fo}) 
```

我的模型.py

```
class Board(models.Model):
    MATH = 'MATH'
    ENGLISH = 'ENGLISH'
    SCIENCE = 'SCIENCE'
    LANGUAGE = 'LANGUAGE'
    CATEGORY = (
        (MATH, 'Math'),
        (ENGLISH, 'English'),
        (SCIENCE, 'Science'),
        (LANGUAGE, 'Language'),
    )
    Category =models.CharField(max_length=30,choices=CATEGORY)
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)
    created = models.DateTimeField(auto_now_add=True)
    picture = models.OneToOneField('Picture',related_name='picture',blank=True,null=True)
    def __unicode__(self):
        return self.name

class BoardFinderForm(forms.ModelForm):
    class Meta:
        model = Board
        fields = ('Category',) 
```

我的 boardfinder.html 的重要部分

```
<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    {{ fo.as_p }}
<input type = "submit" value= "Find WhiteBoard" />
</form>

            {% for post in posts.object_list %}
                <div class="title">{{ post.name }}</div>
                {% endfor %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:34:35.233

```
<form method="GET">
    <p><select name="category">
        <option value="" 
            {% if not request.session.category %}selected{% endif %}>
            (All subjects)
        </option>

        <option value="ENGLISH" 
            {% if request.session.category == "ENGLISH" %}selected{% endif %}>
            English
        </option>

        <option value="LANGUAGE"
            {% if request.session.category == "LANGUAGE" %}selected{% endif %}>
            Language
        </option>

        <option value="MATH"
            {% if request.session.category == "MATH" %}selected{% endif %}>
            Math
        </option>

        <option value="SCIENCE"
            {% if request.session.category == "SCIENCE" %}selected{% endif %}>
            Science
        </option>
    </select></p>

    <input type = "submit" value= "Find WhiteBoard" />
</form>

def BoardFinder(request):
    category = request.GET.get('category')
    if category:
        request.session['category'] = category
        posts = Board.objects.filter(Category=category)
        paginator = Paginator(posts, 1)

        try: page = int(request.GET.get("page", '1'))
        except ValueError: page = 1

        try:
            posts = paginator.page(page)
        except (InvalidPage, EmptyPage):
            posts = paginator.page(paginator.num_pages)
        return render(request,"boardfinder.html",{"posts":posts,"fo":fo})
    return render(request,"boardfinder.html",{"fo":fo}) 
```